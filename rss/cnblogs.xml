<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>åšå®¢å›­_é¦–é¡µ</title>
<link></link>
<description>ä»£ç æ”¹å˜ä¸–ç•Œ</description>
<item>
<title>codeforces 982D Shark - qrfkickit</title>
<link>http://www.cnblogs.com/kickit/p/9062168.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/kickit/p/9062168.html</guid>
<description>&lt;p&gt;é¢˜æ„ï¼š&lt;/p&gt;
&lt;p&gt;ç»™å‡ºä¸€ä¸ªæ•°ç»„ï¼Œåˆ é™¤å¤§äºç­‰äºkçš„æ•°å­—ï¼Œä½¿å¾—å…¶æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š&lt;/p&gt;
&lt;p&gt;1.å‰©ä½™çš„è¿ç»­çš„æ®µï¼Œæ¯ä¸€æ®µçš„é•¿åº¦ç›¸ç­‰ï¼›&lt;/p&gt;
&lt;p&gt;2.åœ¨æ»¡è¶³ç¬¬ä¸€ä¸ªæ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œæ®µæ•°å°½å¯èƒ½å¤šï¼›&lt;/p&gt;
&lt;p&gt;3.åœ¨æ»¡è¶³å‰ä¸¤ä¸ªæ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œkå–æœ€å°çš„ã€‚&lt;/p&gt;
&lt;p&gt;æ±‚kã€‚&lt;/p&gt;
&lt;p&gt;æ€è·¯ï¼š&lt;/p&gt;
&lt;p&gt;ä¸€å¼€å§‹æ•´ä¸ªæ•°ç»„å¯ä»¥çœ‹æˆå®Œæ•´çš„ä¸€æ®µï¼Œè¿™æ˜¯å¯¹åº”çš„kæ˜¯æœ€å¤§çš„æ•°å­— + 1ã€‚&lt;/p&gt;
&lt;p&gt;ç”¨ä¸€ä¸ªset sdç»´æŠ¤åˆ é™¤çš„æ•°å­—ã€‚&lt;/p&gt;
&lt;p&gt;ä»å¤§åˆ°å°æšä¸¾åˆ é™¤çš„æ•°å­—ï¼Œæ¯æ¬¡åˆ é™¤ä¸€ä¸ªæ•°å­—ï¼Œéƒ½å¯ä»¥çœ‹æˆæ˜¯åˆ é™¤ä¸€ä¸ªé•¿çš„æ®µï¼Œç„¶åæ·»åŠ ä¸¤ä¸ªå°çš„æ®µï¼Œåœ¨sdä¸­æ‰¾å‡ºè¿™ä¸ªæ•°å­—çš„ä½ç½®curçš„å‰é©±preå’Œåç»§subï¼Œè¦åˆ é™¤çš„æ®µå°±æ˜¯å‰é©±åˆ°åç»§è¿™ä¸€æ®µï¼Œç„¶åæ–°æ·»åŠ ä¸¤æ®µå°±æ˜¯curåˆ°pre ä»¥åŠ subåˆ°curã€‚æŠŠcuræ·»åŠ åˆ°åˆ é™¤æ•°å­—çš„é›†åˆä¸­ã€‚&lt;/p&gt;
&lt;p&gt;ç”¨ä¸€ä¸ªmapç»´æŠ¤&amp;lt;çº¿æ®µé•¿åº¦ï¼Œæ•°é‡&amp;gt;æ¥è¡¨ç¤ºç°åœ¨æ®µæ•°çš„æƒ…å†µï¼Œå®¹æ˜“çŸ¥é“å½“mapçš„sizeä¸º1æ—¶ï¼Œè¡¨æ˜æ‰€æœ‰çº¿æ®µçš„é•¿åº¦ç›¸åŒï¼Œå°±å¯ä»¥æ›´æ–°ç­”æ¡ˆäº†ã€‚&lt;/p&gt;
&lt;p&gt;æ›´æ–°ç­”æ¡ˆçš„æ—¶å€™ï¼Œé¦–å…ˆè€ƒè™‘çº¿æ®µæ•°é‡æ˜¯å¦æ›´å¤šï¼Œå†è€ƒè™‘kæ˜¯å¦å¯ä»¥å˜å°ã€‚&lt;/p&gt;
&lt;p&gt;å‡è®¾å½“å‰åˆ é™¤çš„æ•°å­—æ˜¯tmpï¼Œé‚£ä¹ˆæ˜¯ä¸æ˜¯æ»¡è¶³æ¡ä»¶ä¹‹åå°±ç›´æ¥æŠŠç­”æ¡ˆæ›´æ–°ä¸ºtmpå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ä¸æ˜¯ï¼Œå‡è®¾å½“å‰æ•°å­—æ˜¯xï¼Œæ¯”å®ƒå°çš„ç¬¬ä¸€ä¸ªæ•°å­—æ˜¯yï¼Œæ˜¾ç„¶y + 1è¿™ä¸ªæ•°å­—ä¹Ÿå¯ä»¥æ»¡è¶³æ¡ä»¶ï¼Œè€Œä¸”y + 1 &amp;lt;= xæ˜¯æ˜¾ç„¶çš„ï¼Œæ‰€ä»¥ç­”æ¡ˆåº”è¯¥æ›´æ–°ä¸ºy + 1ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ„Ÿè°¢mzjjæ•™æˆ‘ï¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä»£ç ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;45&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; #include &amp;lt;stdio.h&amp;gt;
&lt;span&gt; 2&lt;/span&gt; #include &amp;lt;&lt;span&gt;string&lt;/span&gt;.h&amp;gt;
&lt;span&gt; 3&lt;/span&gt; #include &amp;lt;algorithm&amp;gt;
&lt;span&gt; 4&lt;/span&gt; #include &amp;lt;map&amp;gt;
&lt;span&gt; 5&lt;/span&gt; #include &amp;lt;&lt;span&gt;set&lt;/span&gt;&amp;gt;
&lt;span&gt; 6&lt;/span&gt; &lt;span&gt;using&lt;/span&gt; &lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; std;
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt; typedef &lt;span&gt;long&lt;/span&gt; &lt;span&gt;long&lt;/span&gt;&lt;span&gt; ll;
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt; typedef pair&amp;lt;&lt;span&gt;int&lt;/span&gt;,&lt;span&gt;int&lt;/span&gt;&amp;gt;&lt;span&gt; pii;
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt; map&amp;lt;&lt;span&gt;int&lt;/span&gt;,&lt;span&gt;int&lt;/span&gt;&amp;gt;&lt;span&gt; mmp;
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt; &lt;span&gt;set&lt;/span&gt;&amp;lt;pii&amp;gt;&lt;span&gt; s;
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt; &lt;span&gt;set&lt;/span&gt;&amp;lt;&lt;span&gt;int&lt;/span&gt;&amp;gt;&lt;span&gt; sd;
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; main()
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt;     &lt;span&gt;int&lt;/span&gt;&lt;span&gt; n;
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt;     scanf(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;%d&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&amp;amp;&lt;span&gt;n);
&lt;/span&gt;&lt;span&gt;16&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; i = &lt;span&gt;1&lt;/span&gt;;i &amp;lt;= n;i++&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;17&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;18&lt;/span&gt;         &lt;span&gt;int&lt;/span&gt;&lt;span&gt; x;
&lt;/span&gt;&lt;span&gt;19&lt;/span&gt;         scanf(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;%d&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&amp;amp;&lt;span&gt;x);
&lt;/span&gt;&lt;span&gt;20&lt;/span&gt; &lt;span&gt;        s.insert(pii(x,i));
&lt;/span&gt;&lt;span&gt;21&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;22&lt;/span&gt;     sd.insert(&lt;span&gt;0&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;23&lt;/span&gt;     sd.insert(n+&lt;span&gt;1&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;24&lt;/span&gt;     mmp[n]++&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;25&lt;/span&gt;     &lt;span&gt;int&lt;/span&gt; ans = s.rbegin() -&amp;gt; first + &lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;26&lt;/span&gt;     &lt;span&gt;int&lt;/span&gt; cnt = &lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;27&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; i = &lt;span&gt;0&lt;/span&gt;;i &amp;lt; n - &lt;span&gt;1&lt;/span&gt;;i++&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;28&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;29&lt;/span&gt;         auto it =&lt;span&gt; s.rbegin();
&lt;/span&gt;&lt;span&gt;30&lt;/span&gt;         &lt;span&gt;int&lt;/span&gt; cur = it -&amp;gt;&lt;span&gt; second;
&lt;/span&gt;&lt;span&gt;31&lt;/span&gt;         s.erase(*&lt;span&gt;it);
&lt;/span&gt;&lt;span&gt;32&lt;/span&gt;         &lt;span&gt;int&lt;/span&gt; pre = *(--&lt;span&gt;sd.lower_bound(cur));
&lt;/span&gt;&lt;span&gt;33&lt;/span&gt;         &lt;span&gt;int&lt;/span&gt; sub = *&lt;span&gt;(sd.upper_bound(cur));
&lt;/span&gt;&lt;span&gt;34&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt;printf(&quot;%d %d %d\n&quot;,pre,sub,cur);&lt;/span&gt;
&lt;span&gt;35&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (sub-pre-&lt;span&gt;1&lt;/span&gt; &amp;gt; &lt;span&gt;0&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;36&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;37&lt;/span&gt;             mmp[sub-pre-&lt;span&gt;1&lt;/span&gt;]--&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;38&lt;/span&gt;             &lt;span&gt;if&lt;/span&gt; (mmp[sub-pre-&lt;span&gt;1&lt;/span&gt;] == &lt;span&gt;0&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;39&lt;/span&gt; &lt;span&gt;            {
&lt;/span&gt;&lt;span&gt;40&lt;/span&gt;                 mmp.erase(sub-pre-&lt;span&gt;1&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;41&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;42&lt;/span&gt; &lt;span&gt;        } 
&lt;/span&gt;&lt;span&gt;43&lt;/span&gt; &lt;span&gt;        sd.insert(cur);
&lt;/span&gt;&lt;span&gt;44&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (cur-pre-&lt;span&gt;1&lt;/span&gt; &amp;gt; &lt;span&gt;0&lt;/span&gt;) mmp[cur-pre-&lt;span&gt;1&lt;/span&gt;]++&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;45&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (sub-cur-&lt;span&gt;1&lt;/span&gt; &amp;gt; &lt;span&gt;0&lt;/span&gt;) mmp[sub-cur-&lt;span&gt;1&lt;/span&gt;]++&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;46&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (mmp.size() == &lt;span&gt;1&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;47&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;48&lt;/span&gt;             &lt;span&gt;//&lt;/span&gt;&lt;span&gt;int len = mmp.begin() -&amp;gt; first;&lt;/span&gt;
&lt;span&gt;49&lt;/span&gt;             &lt;span&gt;int&lt;/span&gt; num = mmp.begin() -&amp;gt;&lt;span&gt; second;
&lt;/span&gt;&lt;span&gt;50&lt;/span&gt;             &lt;span&gt;//&lt;/span&gt;&lt;span&gt;printf(&quot;%d *\n&quot;,len);&lt;/span&gt;
&lt;span&gt;51&lt;/span&gt;             &lt;span&gt;if&lt;/span&gt; (num &amp;gt;=&lt;span&gt; cnt)
&lt;/span&gt;&lt;span&gt;52&lt;/span&gt; &lt;span&gt;            {
&lt;/span&gt;&lt;span&gt;53&lt;/span&gt;                 cnt =&lt;span&gt; num;
&lt;/span&gt;&lt;span&gt;54&lt;/span&gt;                 ans = s.rbegin() -&amp;gt; first + &lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;55&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;56&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;57&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;58&lt;/span&gt;     printf(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;%d&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,ans);
&lt;/span&gt;&lt;span&gt;59&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;60&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;

</description>
<pubDate>Sat, 19 May 2018 15:54:00 +0000</pubDate>
<dc:creator>qrfkickit</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/kickit/p/9062168.html</dc:identifier>
</item>
<item>
<title>Flaskå¼€å‘å¾®ç”µå½±ç½‘ç«™(äºŒ) - renpingsheng</title>
<link>http://www.cnblogs.com/renpingsheng/p/9062166.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/renpingsheng/p/9062166.html</guid>
<description>&lt;h2 id=&quot;å®‰è£…æ•°æ®åº“è¿æ¥ä¾èµ–åŒ…&quot;&gt;1.å®‰è£…æ•°æ®åº“è¿æ¥ä¾èµ–åŒ…&lt;/h2&gt;
&lt;pre&gt;
&lt;code&gt;pip install flask-sqlalchemy&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;åˆ›å»ºmovieæ•°æ®åº“&quot;&gt;2.åˆ›å»ºmovieæ•°æ®åº“&lt;/h2&gt;
&lt;p&gt;åœ¨CentOSè™šæ‹Ÿæœºï¼Œ&lt;code&gt;è¿›å…¥MaridDBæ•°æ®åº“æç¤ºç¬¦ï¼Œåˆ›å»ºmovieæ•°æ®åº“&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;create database movie&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;å®šä¹‰mariddbæ•°æ®åº“è¿æ¥&quot;&gt;3.å®šä¹‰MaridDBæ•°æ®åº“è¿æ¥&lt;/h2&gt;
&lt;p&gt;åœ¨appç›®å½•ä¸‹çš„&lt;code&gt;__init__.pyæ–‡ä»¶&lt;/code&gt;ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;# _*_coding:utf-8_*_

from flask import Flask, render_template
from flask_sqlalchemy import SQLAlchemy
import pymysql

# å®ä¾‹åŒ–Flaskç±»å¾—åˆ°appå¯¹è±¡
app = Flask(__name__)

# å®šä¹‰è¿æ¥çš„æ•°æ®åº“
app.config['SQLALCHEMY_DATABASE_URI'] = &quot;mysql+pymysql://root:root1234@192.168.81.10:3306/movie&quot;

# å¦‚æœè®¾ç½®æˆTrue(é»˜è®¤æƒ…å†µ),Flask-SQLAlchemyå°†ä¼šè¿½è¸ªå¯¹è±¡çš„ä¿®æ”¹å¹¶ä¸”å‘é€ä¿¡å·
# è¿™éœ€è¦é¢å¤–çš„å†…å­˜ï¼Œå¦‚æœä¸å¿…è¦çš„å¯ä»¥ç¦ç”¨
app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = True

# å®šä¹‰secret_key
app.config['SECRET_KEY'] = &quot;6bd749587aad49399f674b202a07d56f&quot;

db = SQLAlchemy(app)&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;å®šä¹‰æ•°æ®æ¨¡å‹ç±»&quot;&gt;4.å®šä¹‰æ•°æ®æ¨¡å‹ç±»&lt;/h2&gt;
&lt;p&gt;åœ¨appç›®å½•ä¸‹åˆ›å»ºmodels.pyæ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹ä¸º&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;# _*_coding:utf-8_*_

from datetime import datetime
from app import db&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;å®šä¹‰ä¼šå‘˜æ•°æ®æ¨¡å‹&quot;&gt;4.1 å®šä¹‰ä¼šå‘˜æ•°æ®æ¨¡å‹&lt;/h3&gt;
&lt;pre&gt;
&lt;code&gt;# ä¼šå‘˜
class User(db.Model):
    __tablename__ = 'user'      # å®šä¹‰ç”¨æˆ·è¡¨åœ¨æ•°æ®åº“ä¸­çš„åç§°
    id = db.Column(db.Integer, primary_key=True)    # ç”¨æˆ·ç¼–å·
    name = db.Column(db.String(100), unique=True)   # å‘¢ç§°
    pwd = db.Column(db.String(100))     # å¯†ç 
    email = db.Column(db.String(100), unique=True)  # é‚®ç®±
    phone = db.Column(db.String(11), unique=True)   # ç”¨æˆ·æ‰‹æœºå·ç 
    info = db.Column(db.Text)           # ä¸ªæ€§ç®€ä»‹
    face = db.Column(db.String(255), unique=True)   # å¤´åƒ
    addtime = db.Column(db.DateTime, index=True, default=datetime.utcnow)  # æ³¨å†Œæ—¶é—´
    uuid = db.Column(db.String(255), unique=True)   # å”¯ä¸€æ ‡è¯†
    userlogs = db.relationship(&quot;Userlog&quot;, backref='user')       # ä¼šå‘˜ç™»å½•æ—¥å¿—å¤–é”®å…³ç³»å…³è”
    comments = db.relationship('Comment', backref='user')       # è¯„è®ºå¤–é”®å…³ç³»å…³è”
    moviecols = db.relationship('Moviecol', backref='user')     # ç”µå½±æ”¶è—å¤–é”®å…³ç³»å…³è”

    # è¿”å›å®šä¹‰ç±»å‹
    def __repr__(self):
        return &quot;&amp;lt;User %r&amp;gt;&quot; % self.name

    # æ£€æµ‹å¯†ç ï¼Œåˆ¤æ–­ç”¨æˆ·è¾“å…¥çš„å¯†ç æ˜¯å¦ä¸æ•°æ®åº“ä¸­ä¿å­˜çš„ç”¨æˆ·çš„å¯†ç ç›¸åŒ
    def check_pwd(self,pwd):
        from werkzeug.security import check_password_hash
        return check_password_hash(self.pwd,pwd)&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;å®šä¹‰ä¼šå‘˜ç™»å½•æ—¥å¿—æ•°æ®æ¨¡å‹&quot;&gt;4.2 å®šä¹‰ä¼šå‘˜ç™»å½•æ—¥å¿—æ•°æ®æ¨¡å‹&lt;/h3&gt;
&lt;pre&gt;
&lt;code&gt;# ä¼šå‘˜ç™»å½•æ—¥å¿—
class Userlog(db.Model):
    __tablename__ = 'userlog'        # å®šä¹‰ç”¨æˆ·æ—¥å¿—è¡¨åœ¨æ•°æ®åº“ä¸­çš„åç§°
    id = db.Column(db.Integer, primary_key=True)    # ç¼–å·
    user_id = db.Column(db.Integer, db.ForeignKey('user.id'))  # æ‰€å±ä¼šå‘˜ç¼–å·
    ip = db.Column(db.String(100))                  # æœ€è¿‘ç™»å½•IPåœ°å€
    addtime = db.Column(db.DateTime, index=True, default=datetime.now)  # æœ€è¿‘ç™»å½•æ—¶é—´

    def __repr__(self):
        return &quot;&amp;lt;Userlog %r&amp;gt;&quot; % self.id&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;å®šä¹‰æ ‡ç­¾æ•°æ®æ¨¡å‹&quot;&gt;4.3 å®šä¹‰æ ‡ç­¾æ•°æ®æ¨¡å‹&lt;/h3&gt;
&lt;pre&gt;
&lt;code&gt;# ç”µå½±æ ‡ç­¾
class Tag(db.Model):
    __tablename__ = 'tag'              # å®šä¹‰ç”µå½±æ ‡ç­¾è¡¨åœ¨æ•°æ®åº“ä¸­çš„åç§°
    id = db.Column(db.Integer, primary_key=True)  # ç”µå½±ç¼–å·
    name = db.Column(db.String(100), unique=True)  # æ ‡é¢˜
    addtime = db.Column(db.DateTime, index=True, default=datetime.now)  # ç”µå½±æ·»åŠ æ—¶é—´
    movies = db.relationship(&quot;Movie&quot;, backref='tag')  # ç”µå½±å¤–é”®çš„é”®å€¼

    def __repr__(self):
        return &quot;&amp;lt;Tag %r&amp;gt;&quot; % self.name
        &lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;å®šä¹‰ç”µå½±æ•°æ®æ¨¡å‹&quot;&gt;4.4 å®šä¹‰ç”µå½±æ•°æ®æ¨¡å‹&lt;/h3&gt;
&lt;pre&gt;
&lt;code&gt;# ç”µå½±
class Movie(db.Model):
    __tablename__ = 'movie'              # å®šä¹‰ç”µå½±è¡¨åœ¨æ•°æ®åº“ä¸­çš„åç§°
    id = db.Column(db.Integer, primary_key=True)  # ç¼–å·
    title = db.Column(db.String(255), unique=True)  # æ ‡é¢˜
    url = db.Column(db.String(255), unique=True)  # åœ°å€
    info = db.Column(db.Text)  # ç®€ä»‹
    logo = db.Column(db.String(255), unique=True)  # å°é¢
    star = db.Column(db.SmallInteger)  # æ˜Ÿçº§
    playnum = db.Column(db.BigInteger)  # æ’­æ”¾é‡
    commentnum = db.Column(db.BigInteger)  # è¯„è®ºé‡
    tag_id = db.Column(db.Integer, db.ForeignKey('tag.id'))  # æ‰€å±æ ‡ç­¾
    area = db.Column(db.String(255))  # ä¸Šæ˜ åœ°åŒº
    release_time = db.Column(db.Date)  # ä¸Šæ˜ æ—¶é—´
    length = db.Column(db.String(100))  # æ’­æ”¾æ—¶é—´
    addtime = db.Column(db.DateTime, index=True, default=datetime.now)  # æ·»åŠ æ—¶é—´
    comments = db.relationship('Comment', backref='movie')  # è¯„è®ºå¤–é”®å…³ç³»å…³è”
    moviecols = db.relationship('Moviecol', backref='movie')  # æ”¶è—å¤–é”®å…³ç³»å…³è”

    def __repr__(self):
        return &quot;&amp;lt;Movie %r&amp;gt;&quot; % self.title&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;å®šä¹‰ä¸Šæ˜ é¢„å‘Šæ•°æ®æ¨¡å‹&quot;&gt;4.5 å®šä¹‰ä¸Šæ˜ é¢„å‘Šæ•°æ®æ¨¡å‹&lt;/h3&gt;
&lt;pre&gt;
&lt;code&gt;# ä¸Šæ˜ é¢„å‘Š
class Preview(db.Model):
    __tablename__ = 'preview'              # å®šä¹‰ç”µå½±ä¸Šæ˜ é¢„å‘Šè¡¨åœ¨æ•°æ®åº“ä¸­çš„åç§°
    id = db.Column(db.Integer, primary_key=True)  # ç¼–å·
    title = db.Column(db.String(255), unique=True)  # æ ‡é¢˜
    logo = db.Column(db.String(255), unique=True)  # å°é¢
    addtime = db.Column(db.DateTime, index=True, default=datetime.now)  # æ·»åŠ æ—¶é—´

    def __repr__(self):
        return &quot;&amp;lt;Preview %r&amp;gt;&quot; % self.title
        &lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;å®šä¹‰ç”µå½±è¯„è®ºæ•°æ®æ¨¡å‹&quot;&gt;4.6 å®šä¹‰ç”µå½±è¯„è®ºæ•°æ®æ¨¡å‹&lt;/h3&gt;
&lt;pre&gt;
&lt;code&gt;# ç”µå½±è¯„è®º
class Comment(db.Model):
    __tablename__ = 'comment'              # å®šä¹‰ç”µå½±è¯„è®ºè¡¨åœ¨æ•°æ®åº“ä¸­çš„åç§°
    id = db.Column(db.Integer, primary_key=True)  # ç¼–å·
    content = db.Column(db.Text)  # è¯„è®ºå†…å®¹
    movie_id = db.Column(db.Integer, db.ForeignKey('movie.id'))  # æ‰€å±ç”µå½±
    user_id = db.Column(db.Integer, db.ForeignKey('user.id'))  # æ‰€å±ç”¨æˆ·
    addtime = db.Column(db.DateTime, index=True, default=datetime.now)  # æ·»åŠ æ—¶é—´

    def __repr__(self):
        return '&amp;lt;Comment %r&amp;gt;' % self.id
        &lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;å®šä¹‰ç”µå½±æ”¶è—æ•°æ®æ¨¡å‹&quot;&gt;4.7 å®šä¹‰ç”µå½±æ”¶è—æ•°æ®æ¨¡å‹&lt;/h3&gt;
&lt;pre&gt;
&lt;code&gt;# ç”µå½±æ”¶è—
class Moviecol(db.Model):
    __tablename__ = 'moviecol'              # å®šä¹‰ç”µå½±æ”¶è—è¡¨åœ¨æ•°æ®åº“ä¸­çš„åç§°
    id = db.Column(db.Integer, primary_key=True)  # ç¼–å·
    movie_id = db.Column(db.Integer, db.ForeignKey('movie.id'))  # ç”µå½±ç¼–å·
    user_id = db.Column(db.Integer, db.ForeignKey('user.id'))  # ç”¨æˆ·ç¼–å·
    addtime = db.Column(db.DateTime, index=True, default=datetime)  # æ·»åŠ æ”¶è—æ—¶é—´

    def __repr__(self):
        return &quot;&amp;lt;Moviecol %r&amp;gt;&quot; % self.id
    &lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;å®šä¹‰æƒé™æ•°æ®æ¨¡å‹&quot;&gt;4.8 å®šä¹‰æƒé™æ•°æ®æ¨¡å‹&lt;/h3&gt;
&lt;pre&gt;
&lt;code&gt;# æƒé™
class Auth(db.Model):
    __tablename__ = 'auth'              # å®šä¹‰ç”¨æˆ·æƒé™è¡¨åœ¨æ•°æ®åº“ä¸­çš„åç§°
    id = db.Column(db.Integer, primary_key=True)  # ç¼–å·
    name = db.Column(db.String(100), unique=True)  # æƒé™åç§°
    url = db.Column(db.String(100), unique=True)  # åœ°å€
    addtime = db.Column(db.DateTime, index=True, default=datetime.now)  # æ·»åŠ æ—¶é—´

    def __repr__(self):
        return &quot;&amp;lt;Auth %r&amp;gt;&quot; % self.name
    &lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;å®šä¹‰è§’è‰²æ•°æ®æ¨¡å‹&quot;&gt;4.9 å®šä¹‰è§’è‰²æ•°æ®æ¨¡å‹&lt;/h3&gt;
&lt;pre&gt;
&lt;code&gt;# è§’è‰²
class Role(db.Model):
    __tablename__ = 'role'              # å®šä¹‰ç”¨æˆ·è§’è‰²è¡¨åœ¨æ•°æ®åº“ä¸­çš„åç§°
    id = db.Column(db.Integer, primary_key=True)  # ç¼–å·
    name = db.Column(db.String(128), unique=True)  # è§’è‰²åç§°
    auths = db.Column(db.String(512))
    addtime = db.Column(db.DateTime, index=True, default=datetime.now)  # æ·»åŠ æ—¶é—´
    admins = db.relationship(&quot;Admin&quot;, backref='role')  # ç®¡ç†å‘˜å¤–é”®å…³ç³»å…³è”

    def __repr__(self):
        return &quot;&amp;lt;Role %r&amp;gt;&quot; % self.name
    &lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;å®šä¹‰ç®¡ç†å‘˜æ•°æ®æ¨¡å‹&quot;&gt;4.10 å®šä¹‰ç®¡ç†å‘˜æ•°æ®æ¨¡å‹&lt;/h3&gt;
&lt;pre&gt;
&lt;code&gt;# ç®¡ç†å‘˜
class Admin(db.Model):
    __tablename__ = 'admin'              # å®šä¹‰ç®¡ç†å‘˜è¡¨åœ¨æ•°æ®åº“ä¸­çš„åç§°
    id = db.Column(db.Integer, primary_key=True)  # ç¼–å·
    name = db.Column(db.String(100), unique=True)  # ç®¡ç†å‘˜è´¦å·
    pwd = db.Column(db.String(100))  # ç®¡ç†å‘˜å¯†ç 
    is_super = db.Column(db.SmallInteger)  # æ˜¯å¦ä¸ºè¶…çº§ç®¡ç†å‘˜ï¼Œ0ä¸ºè¶…çº§ç®¡ç†å‘˜
    role_id = db.Column(db.Integer, db.ForeignKey('role.id'))  # æ‰€å±è§’è‰²
    addtime = db.Column(db.DateTime, index=True, default=datetime.now)
    adminlogs = db.relationship('Adminlog', backref='admin')  # ç®¡ç†å‘˜ç™»å½•æ—¥å¿—å¤–é”®å…³ç³»å…³è”
    oplogs = db.relationship('Oplog', backref='admin')  # ç®¡ç†å‘˜æ“ä½œæ—¥å¿—å¤–é”®å…³ç³»å…³è”

    def __repr__(self):
        return &quot;&amp;lt;Admin %r&amp;gt;&quot; % self.name

    def check_pwd(self, pwd):
        from werkzeug.security import check_password_hash
        return check_password_hash(self.pwd, pwd)
    &lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;å®šä¹‰ç®¡ç†å‘˜ç™»å½•æ—¥å¿—æ•°æ®æ¨¡å‹&quot;&gt;4.11 å®šä¹‰ç®¡ç†å‘˜ç™»å½•æ—¥å¿—æ•°æ®æ¨¡å‹&lt;/h3&gt;
&lt;pre&gt;
&lt;code&gt;# ç®¡ç†å‘˜ç™»å½•æ—¥å¿—
class Adminlog(db.Model):
    __tablename__ = 'adminlog'              # å®šä¹‰ç®¡ç†å‘˜æ—¥å¿—è¡¨åœ¨æ•°æ®åº“ä¸­çš„åç§°
    id = db.Column(db.Integer, primary_key=True)  # ç¼–å·
    admin_id = db.Column(db.Integer, db.ForeignKey('admin.id'))  # æ‰€å±ç®¡ç†å‘˜
    ip = db.Column(db.String(100))  # ç™»å½•IP
    addtime = db.Column(db.DateTime, index=True, default=datetime.now)  # ç™»å½•æ—¶é—´

    def __repr__(self):
        return &quot;&amp;lt;Adminlog %r&amp;gt;&quot; % self.id
        &lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;å®šä¹‰ç”¨æˆ·æ“ä½œæ—¥å¿—&quot;&gt;4.12 å®šä¹‰ç”¨æˆ·æ“ä½œæ—¥å¿—&lt;/h3&gt;
&lt;pre&gt;
&lt;code&gt;# æ“ä½œæ—¥å¿—
class Oplog(db.Model):
    __tablename__ = 'oplog'              # å®šä¹‰æ“ä½œæ—¥å¿—è¡¨åœ¨æ•°æ®åº“ä¸­çš„åç§°
    id = db.Column(db.Integer, primary_key=True)  # ç¼–å·
    admin_id = db.Column(db.Integer, db.ForeignKey('admin.id'))  # æ‰€å±ç®¡ç†å‘˜
    ip = db.Column(db.String(100))  # ç™»å½•IP
    reason = db.Column(db.String(600))  # æ“ä½œåŸå› 
    addtime = db.Column(db.DateTime, index=True, default=datetime.now)  # ç™»å½•æ—¶é—´

    def __repr__(self):
        return &quot;&amp;lt;Oplog %r&amp;gt;&quot; % self.id&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;åœ¨models.pyæ–‡ä»¶ä¿å­˜æ‰€æœ‰çš„æ¨¡å‹ç±»&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;åˆ›å»ºæ•°æ®åº“&quot;&gt;5. åˆ›å»ºæ•°æ®åº“&lt;/h2&gt;
&lt;p&gt;åœ¨&lt;code&gt;models.pyæ–‡ä»¶&lt;/code&gt;ä¸­ï¼Œ&lt;code&gt;å®šä¹‰mainå‡½æ•°ï¼Œåœ¨MariaDBæ•°æ®åº“ä¸­ç”Ÿæˆå‰é¢å®šä¹‰çš„æ¨¡å‹è¡¨&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;if __name__ == '__main__':
    db.create_all()&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;å•ç‹¬æ‰§è¡Œmodels.pyæ–‡ä»¶ï¼Œåœ¨MariaDBæ•°æ®åº“çš„movieæ•°æ®åº“ä¸­åˆ›å»ºæ•°æ®è¡¨&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æ•°æ®åº“åˆ›å»ºå®Œæˆï¼Œè¿›å…¥&lt;code&gt;MariaDBæ•°æ®åº“æç¤ºç¬¦&lt;/code&gt;ï¼ŒæŸ¥çœ‹åˆ›å»ºçš„æ•°æ®è¡¨&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1133627/201805/1133627-20180519235528875-760376203.png&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Sat, 19 May 2018 15:53:00 +0000</pubDate>
<dc:creator>renpingsheng</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/renpingsheng/p/9062166.html</dc:identifier>
</item>
<item>
<title>Spring Boot 2.0 æ•™ç¨‹ - æ·±å…¥SpringAplication - NNS</title>
<link>http://www.cnblogs.com/hitandrew/p/9062124.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/hitandrew/p/9062124.html</guid>
<description>&lt;p&gt;åŸæ–‡è¿æ¥ï¼š&lt;a href=&quot;https://www.codemore.top/cates/Backend/post/2018-05-20/spring-boot-SpringApplication&quot; target=&quot;_blank&quot;&gt;https://www.codemore.top/cates/Backend/post/2018-05-20/spring-boot-SpringApplication&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥é€šè¿‡SpringApplication.run() æ–¹æ³•è½»æ¾çš„å¯åŠ¨ä¸€ä¸ªSpringåº”ç”¨ï¼Œä¾‹å¦‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-Java hljs&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public &lt;span class=&quot;hljs-keyword&quot;&gt;static &lt;span class=&quot;hljs-keyword&quot;&gt;void &lt;span class=&quot;hljs-title&quot;&gt;main&lt;span class=&quot;hljs-params&quot;&gt;(String[] args) {
        SpringApplication.run(MySpringConfiguration.class, args);
}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿è¡Œç»“æœ&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-Java hljs&quot;&gt;  .   ____          _            __ _ _
 /\\ / ___&lt;span class=&quot;hljs-string&quot;&gt;'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | &lt;span class=&quot;hljs-string&quot;&gt;'_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  &lt;span class=&quot;hljs-string&quot;&gt;'  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::   v2.0.1.RELEASE

2013-07-31 00:08:16.117  INFO 56603 --- [           main] o.s.b.s.app.SampleApplication            : Starting SampleApplication v0.1.0 on mycomputer with PID 56603 (/apps/myapp.jar started by pwebb)
2013-07-31 00:08:16.166  INFO 56603 --- [           main] ationConfigServletWebServerApplicationContext : Refreshing org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@6e5a8246: startup date [Wed Jul 31 00:08:16 PDT 2013]; root of context hierarchy
2014-03-04 13:09:54.912  INFO 41370 --- [           main] .t.TomcatServletWebServerFactory : Server initialized with port: 8080
2014-03-04 13:09:56.501  INFO 41370 --- [           main] o.s.b.s.app.SampleApplication            : Started SampleApplication in 2.992 seconds (JVM running for 3.658)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é»˜è®¤çš„Logçº§åˆ«æ˜¯INFOçº§åˆ«.&lt;/p&gt;
&lt;h5&gt;å®šåˆ¶banner&lt;/h5&gt;
&lt;p&gt;banneræ˜¯åœ¨Springåº”ç”¨å¯åŠ¨çš„æ—¶å€™æ‰“å°çš„ï¼Œå¦‚æœéœ€è¦å®šåˆ¶bannerï¼Œå¯ä»¥æ·»åŠ banner.txtåˆ°classpathä¸­ï¼Œæˆ–è€…è®¾ç½®&lt;code&gt;spring.banner.location&lt;/code&gt;å±æ€§è®¾ç½®bannerçš„è·¯å¾„ã€‚banneré»˜è®¤ç¼–ç æ–¹å¼æ˜¯UTF-8ï¼Œå¦‚æœä¸ä½¿ç”¨UTF-8ï¼Œå¯ä»¥è®¾ç½®&lt;code&gt;spring.banner.charset&lt;/code&gt;å±æ€§è®¾ç½®å…¶ç¼–ç æ–¹å¼ã€‚é™¤äº†æ–‡æœ¬æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œbanner.gif,banner.jpeg,banner.pngç­‰å›¾ç‰‡æ–‡ä»¶ä½œä¸ºbannerï¼Œæˆ–è€…è®¾ç½®&lt;code&gt;spring.banner.image.location&lt;/code&gt;å±æ€§è®¾ç½®å›¾ç‰‡bannerã€‚å›¾ç‰‡æœ‰Springè½¬ä¸ºASCIIè¾“å‡ºã€‚ banner.txt ä¸­æ·»åŠ å¦‚ä¸‹å ä½ç¬¦&lt;/p&gt;
&lt;p&gt;ä¹Ÿå¯ä»¥å®ç°&lt;code&gt;org.springframework.boot.Banner&lt;/code&gt;æ¥å£çš„&lt;code&gt;printBanner()&lt;/code&gt;æ–¹æ³•å®šåˆ¶Bannerï¼Œä½¿ç”¨SpringApplication.setBanner()è®¾ç½®bannerã€‚ é…ç½®&lt;code&gt;spring.main.banner-mode&lt;/code&gt;è®¾ç½®æ˜¯å¦åœ¨æ§åˆ¶å°æ˜¾ç¤ºbanner&lt;/p&gt;
&lt;h5&gt;å®šåˆ¶SpringApplication&lt;/h5&gt;
&lt;p&gt;å¯ä»¥é€šè¿‡åˆ›å»ºè‡ªå®šä¹‰çš„SpringApplicationç¤ºä¾‹æ¥å®šåˆ¶SpringApplicationï¼Œä¾‹å¦‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-Java hljs&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public &lt;span class=&quot;hljs-keyword&quot;&gt;static &lt;span class=&quot;hljs-keyword&quot;&gt;void &lt;span class=&quot;hljs-title&quot;&gt;main&lt;span class=&quot;hljs-params&quot;&gt;(String[] args) {
        SpringApplication app = &lt;span class=&quot;hljs-keyword&quot;&gt;new SpringApplication(MySpringConfiguration.class);
        app.setBannerMode(Banner.Mode.OFF);
        app.run(args);
}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½¿ç”¨builderå®šåˆ¶SpringApplication&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-Java hljs&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;new SpringApplicationBuilder()
                .sources(Parent.class)
                .child(Application.class)
                .bannerMode(Banner.Mode.OFF)
                .run(args);&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;h5&gt;åº”ç”¨äº‹ä»¶å’Œç›‘å¬å™¨&lt;/h5&gt;
&lt;p&gt;é™¤äº†é€šå¸¸çš„Spring Frameworkçš„äº‹ä»¶ï¼Œä¾‹å¦‚&lt;code&gt;ContextRefreshedEvent&lt;/code&gt;ç­‰ï¼Œ&lt;code&gt;SpringApplication&lt;/code&gt;è¿˜ä¼šå‘é€ä¸€äº›å…¶ä»–çš„åº”ç”¨æ—¶é—´ã€‚ ç”±äºä¸€äº›äº‹ä»¶æ˜¯åœ¨ApplicationContextåˆ›å»ºä¹‹å‰è§¦å‘çš„ï¼Œå› æ­¤æ— æ³•é€šè¿‡@Beançš„æ–¹å¼æ³¨å†Œè¿™äº›äº‹ä»¶çš„ç›‘å¬å™¨ã€‚å¯ä»¥ä½¿ç”¨SpringApplication.addListeners() çŠ¯æ³•æˆ–è€…SpringApplicationBuilder.listeners()æ–¹æ³•æ³¨å†Œç›‘å¬å™¨ã€‚ ä¹Ÿå¯ä»¥é€šè¿‡æ·»åŠ &lt;code&gt;META-INF/spring.factories&lt;/code&gt;æ–‡ä»¶åˆ°é¡¹ç›®ä¸­ï¼Œè‡ªåŠ¨æ³¨å†Œç›‘å¬å™¨ï¼Œä¾‹å¦‚&lt;code&gt;org.springframework.context.ApplicationListener=come.example.project.MyListener&lt;/code&gt;Â åº”ç”¨å¯åŠ¨åï¼Œåº”ç”¨æ—¶é—´æŒ‰ç…§å¦‚ä¸‹çš„é¡ºåºè§¦å‘ 1. åº”ç”¨å¼€å§‹è¿è¡Œæ—¶è§¦å‘&lt;code&gt;ApplicationStartingEvent&lt;/code&gt;äº‹ä»¶ 2. åœ¨ApplicationContextåˆ›å»ºä¹‹å‰ï¼ŒEnvironmentå¯ç”¨æ—¶è§¦å‘&lt;code&gt;ApplicationEnvironmentPreparedEvent&lt;/code&gt;äº‹ä»¶ã€‚ 3. beanå®šä¹‰åŠ è½½åï¼Œåˆ·æ–°ä¹‹å‰è§¦å‘&lt;code&gt;ApplicationPreparedEvent&lt;/code&gt;äº‹ä»¶ 4. contextåˆ·æ–°åï¼Œcommand-line runnerè¿è¡Œå‰ï¼Œè§¦å‘&lt;code&gt;ApplicationStartedEvent&lt;/code&gt;Â 5. command-lie runnerè¿è¡Œåï¼Œè§¦å‘&lt;code&gt;ApplicationReadyEvent&lt;/code&gt;è¡¨ç¤ºåº”ç”¨å¯ä»¥æ¥å—è¯·æ±‚äº† 6. å¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼Œè§¦å‘&lt;code&gt;ApplicationFailedEvent&lt;/code&gt;Â åº”ç”¨äº‹ä»¶æ—¶é€šè¿‡Spring Frameworkçš„äº‹ä»¶å‘å¸ƒæœºåˆ¶å‘é€çš„ï¼Œè¿™ç§æœºåˆ¶ä¿è¯äº†å‘é€ç»™å­contextçš„äº‹ä»¶åŒæ ·ä¹Ÿä¼šå‘é€ç»™å…¶ç¥–å…ˆcontextã€‚å› æ­¤å¦‚æœApplicationContextæ—¶æœ‰å±‚æ¬¡çš„ï¼Œå¯èƒ½ä¼šæ”¶åˆ°å¤šä¸ªç›¸åŒçš„äº‹ä»¶ï¼Œä¸ºäº†åŒºåˆ†è¿™äº›äº‹ä»¶ï¼Œéœ€è¦åº”ç”¨æ³¨å…¥è‡ªå·±çš„ApplicationContextï¼Œå½“æ¥æ”¶äº‹ä»¶æ—¶åˆ¤æ–­æ˜¯å¦æ—¶æœ¬å±‚äº‹ä»¶å†åšå¤„ç†ï¼Œå¯ä»¥ç”¨è¿‡ç»§æ‰¿&lt;code&gt;ApplicationContextAware&lt;/code&gt;æ³¨å…¥ApplicationContextï¼Œæˆ–è€…å¦‚æœç›‘å¬å™¨æ—¶ä¸€ä¸ªbeanä¹Ÿå¯ä»¥ç”¨è¿‡@Autowiredæ³¨å…¥ApplicationContextã€‚&lt;/p&gt;
&lt;h5&gt;Webç¯å¢ƒ&lt;/h5&gt;
&lt;p&gt;&lt;code&gt;SpringApplication&lt;/code&gt;å¯ä»¥æ ¹æ®é…ç½®åˆ›å»ºæ­£ç¡®çš„&lt;code&gt;ApplicationContext&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;åŒæ ·ä¹Ÿå¯ä»¥ä½¿ç”¨setApplication(...)å®Œå…¨è‡ªå·±è®¾ç½®ApplicationContextã€‚&lt;/p&gt;
&lt;h5&gt;è®¿é—®åº”ç”¨å‚æ•°&lt;/h5&gt;
&lt;p&gt;å¦‚æœéœ€è¦è®¿é—®SpringApplication.run(...)ä¸­çš„argså‚æ•°ï¼Œå¯ä»¥é€šè¿‡æ³¨å…¥&lt;code&gt;org.springframework.boot.ApplicationArguments&lt;/code&gt;Â beanè®¿é—®ã€‚æ¥å£&lt;code&gt;ApplicationArguments&lt;/code&gt;ä¸ä»…æä¾›äº†è®¿é—®åŸç”Ÿå‚æ•°çš„String[] ,åŒæ ·ä¹Ÿæä¾›äº† optionå’Œnon-optionå‚æ•°ä¾‹å¦‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-Java hljs&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import org.springframework.boot.*
&lt;span class=&quot;hljs-keyword&quot;&gt;import org.springframework.beans.factory.annotation.*
&lt;span class=&quot;hljs-keyword&quot;&gt;import org.springframework.stereotype.*

&lt;span class=&quot;hljs-meta&quot;&gt;@Component
&lt;span class=&quot;hljs-keyword&quot;&gt;public &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class &lt;span class=&quot;hljs-title&quot;&gt;MyBean {

        &lt;span class=&quot;hljs-meta&quot;&gt;@Autowired
        &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public &lt;span class=&quot;hljs-title&quot;&gt;MyBean&lt;span class=&quot;hljs-params&quot;&gt;(ApplicationArguments args) {
                &lt;span class=&quot;hljs-keyword&quot;&gt;boolean debug = args.containsOption(&lt;span class=&quot;hljs-string&quot;&gt;&quot;debug&quot;);
                List&amp;lt;String&amp;gt; files = args.getNonOptionArgs();
                &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;h6&gt;ä½¿ç”¨ApplicationRunnerå’ŒCommandLineRunner&lt;/h6&gt;
&lt;p&gt;å¦‚æœåœ¨è¿è¡Œå®ŒSpringApplication.run()ä¹‹åéœ€è¦è¿è¡Œå…¶ä»–ä»£ç ï¼Œå¯ä»¥é€šè¿‡å®ç°&lt;code&gt;ApplicationRunner&lt;/code&gt;æˆ–è€…&lt;code&gt;CommandLineRunner&lt;/code&gt;æ¥å£ï¼Œè¿™ä¿©æ¥å£ä½œç”¨ç›¸åŒï¼Œéƒ½æä¾›ä¸€ä¸ªrunï¼ˆï¼‰çš„æ–¹æ³•ï¼Œç­‰è°ƒç”¨å®ŒSpringApplication.run()ä¹‹åè°ƒç”¨ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-Java hljs&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import org.springframework.boot.*
&lt;span class=&quot;hljs-keyword&quot;&gt;import org.springframework.stereotype.*

&lt;span class=&quot;hljs-meta&quot;&gt;@Component
&lt;span class=&quot;hljs-keyword&quot;&gt;public &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class &lt;span class=&quot;hljs-title&quot;&gt;MyBean &lt;span class=&quot;hljs-keyword&quot;&gt;implements &lt;span class=&quot;hljs-title&quot;&gt;CommandLineRunner {

        &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public &lt;span class=&quot;hljs-keyword&quot;&gt;void &lt;span class=&quot;hljs-title&quot;&gt;run&lt;span class=&quot;hljs-params&quot;&gt;(String... args) {
                &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚æœå®šä¹‰äº†å¤šä¸ªCommandLineRunneræˆ–è€…ApplicationRunnerï¼Œåˆ™å¯ä»¥é€šè¿‡æ¥å£&lt;code&gt;org.springframework.core.Ordered&lt;/code&gt;æˆ–è€…&lt;code&gt;org.springframework.core.annotation.Order&lt;/code&gt;æ³¨è§£æä¾›é¡ºåºã€‚&lt;/p&gt;
&lt;h5&gt;åº”ç”¨é€€å‡º&lt;/h5&gt;
&lt;p&gt;æ¯ä¸€ä¸ªSpringApplicationéƒ½ä¼šæ³¨å†Œä¸€ä¸ªJVMé€€å‡ºçš„é’©å­ï¼Œä¿è¯ApplicationContextå¯ä»¥ä¼˜é›…å…³é—­ã€‚å¦å¤–beanå¯ä»¥å®ç°&lt;code&gt;org.springfamework.boot.ExitCodeGenerator&lt;/code&gt;æ¥å£å½“è°ƒç”¨SpringApplication.exit()æ—¶è¿”å›ä¸€ä¸ªç‰¹å®šçš„è¿”å›ç ï¼Œè¿™ä¸ªè¿”å›ç å¯ä»¥ä¼ é€’ç»™System.exit()ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-Java hljs&quot;&gt;&lt;span class=&quot;hljs-meta&quot;&gt;@SpringBootApplication
&lt;span class=&quot;hljs-keyword&quot;&gt;public &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class &lt;span class=&quot;hljs-title&quot;&gt;ExitCodeApplication {

        &lt;span class=&quot;hljs-meta&quot;&gt;@Bean
        &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public ExitCodeGenerator &lt;span class=&quot;hljs-title&quot;&gt;exitCodeGenerator&lt;span class=&quot;hljs-params&quot;&gt;() {
                &lt;span class=&quot;hljs-keyword&quot;&gt;return () -&amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;42;
        }

        &lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public &lt;span class=&quot;hljs-keyword&quot;&gt;static &lt;span class=&quot;hljs-keyword&quot;&gt;void &lt;span class=&quot;hljs-title&quot;&gt;main&lt;span class=&quot;hljs-params&quot;&gt;(String[] args) {
                System.exit(SpringApplication
                                .exit(SpringApplication.run(ExitCodeApplication.class, args)));
        }

}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;</description>
<pubDate>Sat, 19 May 2018 15:40:00 +0000</pubDate>
<dc:creator>NNS</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/hitandrew/p/9062124.html</dc:identifier>
</item>
<item>
<title>æ‰‹æŠŠæ‰‹æ•™ä½ ä½¿ç”¨ netlify å®ç°å‰ç«¯çš„ è‡ªåŠ¨éƒ¨ç½² + HTTPS - å¤§é›„çš„å­¦ä¹ äººç”Ÿ</title>
<link>http://www.cnblogs.com/codernie/p/9062104.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/codernie/p/9062104.html</guid>
<description>&lt;p&gt;éšç€å¼€æºå·¥å…·è¶Šæ¥è¶Šå¤šï¼Œç‰¹åˆ«æ˜¯nodejsæ„å»ºå¾®æœåŠ¡å™¨ä¹‹å¿«ï¼Œå®ç°å‰ç«¯è‡ªåŠ¨åŒ–éƒ¨ç½²è¶Šæ¥è¶Šç®€å•äº†ï¼Œæœ‰å¯èƒ½ã€10è¡Œjsä»£ç +10è¡Œshè„šæœ¬+è®¾ç½®githubçš„webhookã€‘å°±èƒ½å®ç°ï¼Œä½†æ˜¯å¦‚æœä½ å’Œæˆ‘ä¸€æ ·ï¼Œå°±æ˜¯â€œæ‡’â€ï¼ˆæ­¤å¤„ä¸ºè¤’ä¹‰ğŸ˜†ï¼‰ï¼Œè¿è¿™äº›éƒ½ä¸æƒ³è‡ªå·±åšï¼Œé‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™æˆ‘å‘ç°äº†è¿™æ¬¾å¥½å·¥å…·â€”netlifyï¼Œä¸‹é¢æˆ‘å°±æ¥è®²è®²å®ƒç©¶ç«Ÿæœ‰å¤šå¥½ç”¨å§^_^&lt;/p&gt;

&lt;p&gt;ä¸€ã€&lt;strong&gt;ä½¿ç”¨githubæˆ–è€…gitlabç™»é™†netlify&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œæ‰“å¼€netlifyç½‘ç«™(https://app.netlify.com/)&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/rZd1wPibx7PemGDbBG4t2OFxn8VuFvxm5AsjqSEuwwLuTiaw2nWZMlG11hZlno61Hujt1o1dTbsPyu7HXLmt21tw/640?wx_fmt=png&quot; alt=&quot;&quot; data-ratio=&quot;0.53125&quot; data-w=&quot;640&quot; data-type=&quot;png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åä½¿ç”¨githubæˆ–è€…gitlabè´¦å·ç™»å½•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/rZd1wPibx7PemGDbBG4t2OFxn8VuFvxm5MlxAVE5Wqeu6WFuib05vS96mmcljApFe6ktGP1lDyyI3xI0cam0TYnA/640?wx_fmt=png&quot; alt=&quot;&quot; data-ratio=&quot;0.496875&quot; data-w=&quot;640&quot; data-type=&quot;png&quot;/&gt;&lt;/p&gt;

&lt;p&gt;äºŒã€&lt;strong&gt;æ ¹æ®github/gitlabä»“åº“åˆ›å»ºç½‘ç«™&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç‚¹å‡»New site from GitæŒ‰é’®ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/rZd1wPibx7PemGDbBG4t2OFxn8VuFvxm5Iy1qiayjXeMJ2CmHDBRibmyB6Uv0UWTOrphKTe7SOJicATjkXicJRVCh5w/640?wx_fmt=png&quot; alt=&quot;&quot; width=&quot;100%&quot; data-ratio=&quot;0.3&quot; data-w=&quot;640&quot; data-type=&quot;png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ ¹æ®ä½ çš„ä»“åº“æ‰€åœ¨å¹³å°é€‰æ‹©ï¼Œä»¥ä¸‹ä¸‰é€‰ä¸€ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/rZd1wPibx7PemGDbBG4t2OFxn8VuFvxm5vuuAialPKeaqJ6rrzMRtibkG5REj0cUoJcgLjjMgyuhePXZrjwKOAvyg/640?wx_fmt=png&quot; alt=&quot;&quot; width=&quot;100%&quot; data-ratio=&quot;0.11875&quot; data-w=&quot;640&quot; data-type=&quot;png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;é€‰æ‹©ä½ éœ€è¦éƒ¨ç½²çš„ä»“åº“ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/rZd1wPibx7PemGDbBG4t2OFxn8VuFvxm5fabMxMqp4uLichvhVdjpvX8m0D5A77D28ffUcYdG9B5uz1FqyNOpK8g/640?wx_fmt=png&quot; alt=&quot;&quot; data-ratio=&quot;0.5421875&quot; data-w=&quot;640&quot; data-type=&quot;png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è®¾ç½®éƒ¨ç½²é€‰é¡¹ï¼ŒåŒ…æ‹¬ä¸‰ç‚¹ï¼š&lt;/p&gt;
&lt;ol class=&quot; list-paddingleft-2&quot; readability=&quot;4&quot;&gt;&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;éƒ¨ç½²åˆ†æ”¯ï¼ˆå¯¹åº”ä¸‹å›¾ä¸­ Branch to deployï¼‰:&lt;/p&gt;
&lt;p&gt;é¡¾åæ€ä¹‰å°±æ˜¯ä½ çš„gitä»“åº“çš„åˆ†æ”¯ï¼Œé»˜è®¤é€‰æ‹©ä¸ºmasteråˆ†æ”¯&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;æ‰“åŒ…å‘½ä»¤ï¼ˆå¯¹åº”ä¸‹å›¾ä¸­ Build commandï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;å°±æ˜¯ä½ çš„æ‰“åŒ…å‘½ä»¤ï¼Œè¯¸å¦‚ npm run buildï¼Œgulp build ä¹‹ç±»ï¼›å¦‚æœæœ¬èº«å·²æ˜¯é™æ€æ–‡ä»¶ï¼Œä¸éœ€æ‰“åŒ…ç¼–è¯‘ï¼Œè¿™ä¸€æ åˆ™ä¸å¡«&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;æ‰“åŒ…åç›®å½•ï¼ˆå¯¹åº”ä¸‹å›¾ä¸­ Publish directoryï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;å³æ‰§è¡Œå®Œæ‰“åŒ…å‘½ä»¤ä¹‹åé™æ€æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œè¯¸å¦‚ distï¼Œ_site ä¹‹ç±»ï¼›å¦‚æœæœ¬èº«å·²æ˜¯é™æ€æ–‡ä»¶ï¼Œè¿™ä¸€æ åˆ™ä¸å¡«&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/rZd1wPibx7PemGDbBG4t2OFxn8VuFvxm5MoMoWM6l8r95W2Q0FSfCDZMibSJJVmmJsDP3bQmgjMoAJRxY1sdrBlQ/640?wx_fmt=png&quot; alt=&quot;&quot; data-ratio=&quot;1.2109375&quot; data-w=&quot;640&quot; data-type=&quot;png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å®Œæˆä¹‹åç‚¹å‡»é€”ä¸­ deploy site æŒ‰é’®&lt;/p&gt;

&lt;p&gt;ä¸‰ã€&lt;strong&gt;è®¾ç½®åŸŸåï¼Œç»‘å®šåŸŸå&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿›è¡Œå®Œç¬¬äºŒæ­¥ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è‡ªåŠ¨åŒ–éƒ¨ç½²å·²ç»å¼€å§‹è¿è¡Œäº†ï¼Œè€Œä¸”è¿‡ä¸å¤šä¹…ï¼Œæˆ‘ä»¬çš„ç½‘ç«™å°±å·²ç»å¯ä»¥åˆ©ç”¨netlifyåŸŸåå°±è¡Œè®¿é—®äº†ï¼Œå¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/rZd1wPibx7PemGDbBG4t2OFxn8VuFvxm5SiaWJbSTJqA801PqhvQzKhWh79eGqy4wug1OjLmNK3M7BYpMD2MeSyA/640?wx_fmt=png&quot; alt=&quot;&quot; data-ratio=&quot;0.528125&quot; data-w=&quot;640&quot; data-type=&quot;png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°netlifyä¸ºæˆ‘ä»¬éšæœºç”Ÿæˆäº†ä¸€ä¸ªnetlifyä¸‹çš„åŸŸåï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥æ›´æ”¹å…¶å‰ç¼€ï¼Œå¹¶ç»‘å®šåˆ°æˆ‘ä»¬è‡ªå·±çš„åŸŸåä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&amp;gt;&amp;gt; æ›´æ”¹netlifyåŸŸåå‰ç¼€ï¼š&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œç‚¹å‡»ä¸Šå›¾ä¸­ Site settings æŒ‰é’®ï¼Œç„¶ååœ¨ä¸‹æ–¹ç‚¹å‡» Change site name æŒ‰é’®ï¼Œç„¶ååœ¨å¼¹å‡ºæ¡†ä¸­è¾“å…¥è‡ªå·±éœ€è¦æ›´æ”¹çš„å‰ç¼€åï¼Œç‚¹å‡»ä¿å­˜å³å¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/rZd1wPibx7PemGDbBG4t2OFxn8VuFvxm53OBuIYyK11ibyE6c5eBXK9rCtgdkytMPz6UQic9MzQQslSJYY083w2uw/640?wx_fmt=png&quot; alt=&quot;&quot; data-ratio=&quot;0.8265625&quot; data-w=&quot;640&quot; data-type=&quot;png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&amp;gt;&amp;gt; ç»‘å®šåˆ°è‡ªå·±çš„åŸŸåä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œç‚¹å‡»ä¸Šä¸Šå›¾ä¸­ Domain settings æŒ‰é’®ï¼Œç„¶ååœ¨ä¸‹æ–¹ç‚¹å‡» Add custom domain æŒ‰é’®ï¼Œç„¶ååœ¨å¼¹å‡ºæ¡†ä¸­è¾“å…¥è‡ªå·±éœ€è¦ç»‘å®šçš„å®Œæ•´åŸŸåï¼Œç‚¹å‡»ä¿å­˜ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/rZd1wPibx7PemGDbBG4t2OFxn8VuFvxm5tL9CRwYyOH5DDk2iaaNkbgSCsC6b0JibEpB0TYx0qB9TBoyDQYDGTlOg/640?wx_fmt=png&quot; alt=&quot;&quot; data-ratio=&quot;0.584375&quot; data-w=&quot;640&quot; data-type=&quot;png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªæ—¶å€™ä¼šæ˜¾ç¤º ï¼Check DNS configurationï¼Œå› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰è®¾ç½®åŸŸåè§£æåˆ°netlifyæœåŠ¡å™¨ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™éœ€è¦åˆ°ä½ è‡ªå·±åŸŸåçš„ç›¸åº”æœåŠ¡å•†ç½‘ç«™ç™»å½•ä¹‹ååœ¨éœ€è¦ç»‘å®šçš„åŸŸåä¸‹æ·»åŠ ä¸€æ¡CNAMEè§£æï¼Œè§£æçš„ä¸»æœºè®°å½•å³å¯¹åº”çš„netlifyåŸŸåå€¼ï¼ˆè¿™é‡Œå³ codernie.netlify.comï¼‰&lt;/p&gt;
&lt;p&gt;okï¼Œè¿‡ä¸€ä¼šå„¿å°±å¯ä»¥ä½¿ç”¨è‡ªå·±çš„åŸŸåè®¿é—®è‡ªå·±çš„ç½‘ç«™å•¦&lt;/p&gt;

&lt;p&gt;å››ã€&lt;strong&gt;ç”ŸæˆHTTPSè¯ä¹¦ï¼Œå®ç°HTTPSè®¿é—®&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬å››éƒ¨ä¸­çš„Domain settings ä¸­å¾€ä¸‹æ‹‰ï¼Œå¯ä»¥çœ‹åˆ° HTTPS å‡ ä¸ªå¤§å­—æ¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/rZd1wPibx7PemGDbBG4t2OFxn8VuFvxm5c1iaGicpxZAlqyxFqoGxK36iaUM2aiavZHFo2jur16lj0ShqVBGlReCUibg/640?wx_fmt=png&quot; alt=&quot;&quot; data-ratio=&quot;0.765625&quot; data-w=&quot;640&quot; data-type=&quot;png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç‚¹å‡» Verify DNS configuration æŒ‰é’®ï¼Œå¾…å®ƒå˜æˆä¸‹æ–¹ç»¿è‰²æŒ‰é’®ä¹‹åï¼Œå†ç‚¹å‡»ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/rZd1wPibx7PemGDbBG4t2OFxn8VuFvxm5d8ynozib1aVfDZVWWtZhbIIPCAwMrdLdeg04RHtjOaLjWevVaNicnjSg/640?wx_fmt=png&quot; alt=&quot;&quot; width=&quot;100%&quot; data-ratio=&quot;0.285124&quot; data-w=&quot;484&quot; data-type=&quot;png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç„¶ååœ¨å¼¹å‡ºæ¡†ä¸­ç‚¹å‡»ç¡®è®¤ï¼Œè¿‡ä¸€ä¼šå„¿ä¹‹åå°±å¯ä»¥ä½¿ç”¨httpsè®¿é—®ä½ çš„å°ç«™å•¦ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/rZd1wPibx7PemGDbBG4t2OFxn8VuFvxm5upwiakwa0v7BdND2N2WMN56pQlEcLrMrmFmxAvVFv6pTnkpnYRpVSQQ/640?wx_fmt=png&quot; alt=&quot;&quot; data-ratio=&quot;0.1168831&quot; data-w=&quot;462&quot; data-type=&quot;png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;çœ‹åˆ°è‡ªå·±çš„å°ç«™å‰é¢å¯ä»¥æœ‰ç»¿è‰²çš„å®‰å…¨å­—æ ·ï¼Œæ˜¯ä¸æ˜¯å¾ˆé…·ç‚«ï¼Œè€Œä¸”å¾ˆæ”¾å¿ƒï¼Œå†ä¹Ÿä¸ç”¨æ‹…å¿ƒè¿è¥å•†åœ¨è‡ªå·±çš„ç½‘ç«™ä¸ŠæŒ‚å¹¿å‘Šå•¦ï¼Œå“ˆå“ˆå“ˆã€‚ã€‚ã€‚ç­‰ç­‰ï¼Œæ˜¯ä¸æ˜¯è¿˜å·®äº†ç‚¹ä»€ä¹ˆï¼š&lt;/p&gt;
&lt;p&gt;å¯¹å•Šï¼Œè¿˜æ²¡æœ‰å¼ºåˆ¶è·³è½¬httpsï¼ŒOKï¼Œç»§ç»­&lt;/p&gt;

&lt;p&gt;äº”ã€&lt;strong&gt;å¼ºåˆ¶HTTPè·³è½¬HTTPSè®¿é—®&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ç¬¬å››æ­¥ Domain settings å†å¾€ä¸‹ç¿»ä¸€ç‚¹ï¼Œå¯ä»¥çœ‹åˆ° Force HTTPSï¼Œåªéœ€ç‚¹å‡»Â Force HTTPS å³å¯å®ç°ï¼Œæ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œå¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/rZd1wPibx7PemGDbBG4t2OFxn8VuFvxm5baJlA9RpASX7MqZKSFd3Wnxps63Ip1HKYMibNWQKXRZziaPugDNxmeKA/640?wx_fmt=png&quot; alt=&quot;&quot; data-ratio=&quot;0.784375&quot; data-w=&quot;640&quot; data-type=&quot;png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;åˆ°è¿™é‡Œï¼Œä½ çš„ç½‘ç«™å³ä½¿ç”¨æˆ·ä½¿ç”¨httpè®¿é—®ï¼Œä¹Ÿå°†å¼ºåˆ¶è·³è½¬è‡³httpsè®¿é—®å•¦ï¼Œè¿™ä¸‹å¯ä»¥å½»åº•ä¸ç”¨æ‹…ä¸‹è¿è¥å•†ç»™ä½ çš„ç”¨æˆ·â€œå‘çº¢åŒ…â€å•¦ï¼&lt;/p&gt;

&lt;p&gt;å…­ã€è®¾ç½®redirect&lt;strong&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åˆ©ç”¨netlifyå®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²å’ŒHTTPSå°±å†™åˆ°è¿™é‡Œäº†ï¼Œå–œæ¬¢å°±ç‚¹ä¸ªèµå•¦ã€‚&lt;/p&gt;

</description>
<pubDate>Sat, 19 May 2018 15:31:00 +0000</pubDate>
<dc:creator>å¤§é›„çš„å­¦ä¹ äººç”Ÿ</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/codernie/p/9062104.html</dc:identifier>
</item>
<item>
<title>è¶…è¶ŠCtrl+Sä¿å­˜é¡µé¢æ‰€æœ‰èµ„æº - JerremyZhang</title>
<link>http://www.cnblogs.com/Johnzhang/p/9061998.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/Johnzhang/p/9061998.html</guid>
<description>&lt;h2 id=&quot;åŸºæœ¬éœ€æ±‚&quot;&gt;åŸºæœ¬éœ€æ±‚&lt;/h2&gt;
&lt;p&gt;æŠ“å–é¡µé¢æ‰€æœ‰å†…å®¹ä¸»è¦åŒ…æ‹¬ä¸€ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;é¡µé¢å†…å…ƒç´ &lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;é¡µé¢å…ƒç´ åŒ…å«æœåŠ¡ç«¯ç›´æ¥è¿”å›çš„å…ƒç´ ï¼ŒåŠ¨æ€æ„å»ºçš„å…ƒç´ &lt;/p&gt;
&lt;ol&gt;&lt;li&gt;é¡µé¢å†…æ‰€æœ‰èµ„æº&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;é¡µé¢æ‰€æœ‰èµ„æºåŒ…å«æœ¬é¡µé¢æ‰€åœ¨åŸŸèµ„æºä»¥åŠç¬¬ä¸‰æ–¹åŸŸèµ„æºï¼ŒåŒä¸»åŸŸçš„èµ„æºä¹Ÿè®¤ä¸ºç¬¬ä¸‰æ–¹åŸŸèµ„æºï¼Œè¿™ç§èµ„æºä¸€èˆ¬æ˜¯ä»¥ç»å¯¹è·¯å¾„çš„æ–¹å¼æ ‡è¯†ï¼ŒåŒåŸŸä¸‹èµ„æºä¸»è¦æœ‰ä¸‰ç§è¡¨ç°æ–¹å¼ ï¼ˆä»¥https://www.baidu.comä¸¾ä¾‹ï¼‰&lt;/p&gt;
&lt;p&gt;a). ç›¸å¯¹è·¯å¾„&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;sourceCode html&quot;&gt;
&lt;code class=&quot;sourceCode html&quot;&gt;&lt;span class=&quot;kw&quot;&gt;&amp;lt;image&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; src=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;./image/logo.png&quot;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;b). ç»å¯¹è·¯å¾„&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;sourceCode html&quot;&gt;
&lt;code class=&quot;sourceCode html&quot;&gt;&lt;span class=&quot;kw&quot;&gt;&amp;lt;image&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; src=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;https://www.baidu.com/image/logo.png&quot;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;c). ç»å¯¹è·¯å¾„2&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;sourceCode html&quot;&gt;
&lt;code class=&quot;sourceCode html&quot;&gt;&lt;span class=&quot;kw&quot;&gt;&amp;lt;image&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; src=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;//www.baidu.com/image/logo.png&quot;&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™ç§è¡¨ç¤ºæ–¹å¼ä¼šè‡ªåŠ¨æ ¹æ®æµè§ˆå™¨æ‰“å¼€è¯¥é¡µé¢çš„åè®®è¯·æ±‚æ—¶åŠ å…¥åè®®ï¼ˆprotocolï¼‰ï¼Œæœ¬åœ°ä¿å­˜åï¼ŒåŸºäºfileåè®®æ‰“å¼€åŒæ ·ä¼šåŠ å…¥file:å‰ç¼€ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å½“å‰å®ç°æ–¹æ¡ˆ&quot;&gt;å½“å‰å®ç°æ–¹æ¡ˆ&lt;/h2&gt;
&lt;h3 id=&quot;åŸºæœ¬æµç¨‹&quot;&gt;åŸºæœ¬æµç¨‹&lt;/h3&gt;
&lt;ol readability=&quot;0&quot;&gt;&lt;li&gt;
&lt;p&gt;æœåŠ¡ç«¯http get é¡µé¢&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;æ ¹æ®æœåŠ¡ç«¯å“åº”çš„htmlï¼Œéå†éœ€è¦åŠ è½½çš„å…¶å®ƒèµ„æºï¼Œæ¯”å¦‚javascriptã€imageã€cssã€fontã€mediaç­‰èµ„æº&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;å¤„ç†htmlã€javascriptã€css ç­‰æ–‡ä»¶ï¼Œè¿›è¡Œèµ„æºè·¯å¾„æ›¿æ¢ï¼Œä¿è¯é¡µé¢æœ¬åœ°åŒ–åèƒ½æ­£å¸¸æ‰“å¼€&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;h3 id=&quot;ä¸è¶³ä¹‹å¤„&quot;&gt;ä¸è¶³ä¹‹å¤„&lt;/h3&gt;
&lt;ol readability=&quot;3.5&quot;&gt;&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;http get åªèƒ½æ‹¿åˆ°åŸå§‹å†…å®¹ï¼Œéœ€è¦ä¾èµ–åæœŸå†æµè§ˆå™¨ä¸­åŠ è½½ä¹‹åçš„å†æ¸²æŸ“ï¼ˆæ¯”å¦‚ä¾èµ–æœ¬åœ°åŒ–çš„jså†æ¬¡è¯·æ±‚æ•°æ®è¿›è¡Œé¡µé¢æ„å»º æˆ–è€… ç›´æ¥ç”Ÿæˆdomè¿›è¡Œé¡µé¢æ„å»ºï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;è¯·æ±‚åå¾—åˆ°çš„èµ„æºæ–‡ä»¶ä¾èµ–åŸæœ¬ç›¸å¯¹è·¯å¾„ï¼Œå¦‚æœå¤„ç†æœ‰è¾ƒé«˜çš„æŠ€æœ¯éš¾åº¦ï¼Œæ¯”å¦‚ä½¿ç”¨AMDã€CMDç­‰æ¨¡å¼åŠ è½½çš„æ–‡ä»¶ã€‚ç”±äºå½“å‰æ–¹æ¡ˆæŠ“å–èµ„æºæ—¶å¯¹å½“å‰èµ„æºç›®å½•å±‚æ¬¡å…¨éƒ¨é“ºå¹³äº†ï¼ˆçºµå‘ç›®å½•å·²ç»ä¸å­˜åœ¨äº†ï¼Œç›¸å¯¹è·¯å¾„ä¹Ÿä¼šå˜åŒ–ï¼‰ï¼Œæ‰€ä»¥éœ€è¦åŠ¨æ€ä¿®æ”¹ï¼ˆæ‹¿åº”ç”¨äº†AMDåŠ è½½æ¨¡å¼çš„é¡µé¢ä¸¾ä¾‹ï¼‰require.config.js æ–‡ä»¶çš„å†…å®¹ï¼Œå¦åˆ™ä¼šå¯¼è‡´é¡µé¢js æ— æ³•æ­£å¸¸åŠ è½½ï¼Œé¡µé¢æ— æ³•æ­£å¸¸æ¸²æŸ“ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;å¯¹éhtmlé¡µé¢ç›´æ¥è·å–çš„èµ„æºï¼Œè·å–çš„éš¾åº¦è¾ƒå¤§ï¼Œè¿™ç§éhtmlé¡µé¢ç›´æ¥è·å–çš„èµ„æºåŒ…æ‹¬ï¼Œcss æ–‡ä»¶ä¸­å¼•å…¥çš„å­—ä½“èµ„æºæ–‡ä»¶ä»¥åŠå›¾ç‰‡èµ„æºæ–‡ä»¶ï¼Œjsèµ„æºæ–‡ä»¶ä¸­å¼•å…¥çš„èµ„æºæ–‡ä»¶ï¼Œæ¯”å¦‚ä¸Šè¿°2 ä¸­æè¿°çš„AMDã€CMDæ¨¡å¼å®ç°çš„æŒ‰éœ€åŠ è½½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;h2 id=&quot;æ–°çš„å®ç°æ–¹æ¡ˆ&quot;&gt;æ–°çš„å®ç°æ–¹æ¡ˆ&lt;/h2&gt;
&lt;p&gt;puppeteeræ˜¯æ“ä½œchromniumçš„ä¸Šå±‚node apiï¼Œå½“æµè§ˆå™¨æ‰“å¼€ä¸€ä¸ªé¡µé¢æ˜¯ï¼Œå¯ä»¥ç®€å•ç†è§£ç»†åˆ†ä¸ºå¦‚ä¸‹è¿‡ç¨‹ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;é€šçŸ¥æµè§ˆå™¨å‘èµ·è¯·æ±‚&lt;/li&gt;
&lt;li&gt;æµè§ˆå™¨å‘èµ·è¯·æ±‚&lt;/li&gt;
&lt;li&gt;æµè§ˆå™¨è·å–å“åº”å†…å®¹&lt;/li&gt;
&lt;li&gt;æµè§ˆå™¨æŠŠå“åº”å†…å®¹äº¤ç»™ä¸Šå±‚æ¸²æŸ“å¼•æ“&lt;/li&gt;
&lt;li&gt;æ¸²æŸ“å¼•æ“å¤„ç†&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œpuppeteeræä¾›äº†ä¸€ç§æœºåˆ¶è®©æˆ‘ä»¬æœ‰æœºä¼šæ‹¦æˆªåˆ°2å’Œ3è¿™ä¸¤ä¸ªé˜¶æ®µï¼ŒåŸºäºè¿™ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥åšæ›´å¤šçš„äº‹æƒ…ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥æ‹¦æˆªé¡µé¢çš„æ‰€æœ‰è¯·æ±‚ï¼Œå¯ä»¥æˆªè·æ‰€æœ‰çš„å“åº”ï¼Œè€Œä¸ç”¨å…³æ³¨è¯·æ±‚çš„å»å‘ï¼Œå› ä¸ºåªè¦è¯·æ±‚å‘å‡ºå»äº†ï¼Œå°±èƒ½å—æˆ‘ä»¬çš„æ§åˆ¶ï¼Œå¦å¤–ï¼Œç”±äºæ˜¯ä½¿ç”¨æµè§ˆå™¨æœ¬èº«ï¼Œæ‰€ä»¥è·Ÿç›´æ¥http get é¡µé¢æœ€å¤§çš„åŒºåˆ«åœ¨äºå‰è€…æ˜¯æ¸²æŸ“åçš„ï¼Œåè€…æ˜¯åŸå§‹çš„ï¼Œå‰è€…å¯¹SPAæˆ–è€…ä¾é è„šæœ¬æ„å»ºçš„åº”ç”¨æ¯”è¾ƒå‹å¥½ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨puppeteerå®ç°å®Œå…¨èƒ½å¤„ç†åŸå§‹æ–¹æ¡ˆçš„ä¸è¶³ï¼Œæ–°çš„å®ç°æ€è·¯å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol readability=&quot;2.5&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;æ‹¦æˆªæ‰€æœ‰ç½‘ç»œè¯·æ±‚ï¼Œå¯¹èµ„æºè¯·æ±‚ä»¥åŠæ„å»ºdomç›¸å…³è¯·æ±‚è¿›è¡Œå¤„ç†&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;å¯¹åŒåŸŸåä¸‹èµ„æºè¿›è¡Œç›¸å¯¹è·¯å¾„å¤„ç†ï¼Œåœ¨æœ¬åœ°åˆ›å»ºå¯¹åº”çš„ç›¸å¯¹è·¯å¾„&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;å¯¹ä¸åŒåŸŸåä¸‹èµ„æºï¼ˆç¬¬ä¸‰æ–¹èµ„æºï¼‰ä»¥ç¬¬ä¸‰æ–¹åŸŸåä¸ºåå»ºç«‹æ–°çš„ç›®å½•ï¼Œç”¨æ¥å­˜å‚¨ç¬¬ä¸‰æ–¹èµ„æº&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;èµ„æºå¤„ç†ï¼Œå¤„ç†htmlèµ„æºï¼Œcssèµ„æºä»¥åŠjavascriptæ–‡ä»¶ä¸­ç»å¯¹è·¯å¾„ä¸ºç›¸å¯¹è·¯å¾„ï¼ˆè¿™é‡Œç»å¯¹è·¯å¾„æ˜¯æŒ‡ç›´æ¥å¼•å…¥çš„cdnç­‰æ¨¡å¼è·¯å¾„ï¼Œç›¸å¯¹è·¯å¾„æ˜¯æŒ‡å¯¹cdnåŸŸåæœ¬åœ°åŒ–ç›®å½•åçš„è·¯å¾„ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;h2 id=&quot;æ ¸å¿ƒä»£ç è¯´æ˜&quot;&gt;æ ¸å¿ƒä»£ç è¯´æ˜&lt;/h2&gt;
&lt;p&gt;åŸºäºä¸Šè¿°æ–°çš„æ–¹æ¡ˆï¼Œå®ç°çš„æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼Œä»£ç ä¸­åŠ å…¥äº†è¯¦ç»†çš„æ³¨é‡Šï¼Œä¸å†åšè¿‡å¤šè§£é‡Šï¼Œæœ‰ç–‘é—®æ¬¢è¿ç•™è¨€è®¨è®º&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;53&quot;&gt;
&lt;pre class=&quot;sourceCode javascript&quot;&gt;
&lt;code class=&quot;sourceCode javascript&quot;&gt;&lt;span class=&quot;kw&quot;&gt;const&lt;/span&gt; puppeteer &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;'puppeteer'&lt;/span&gt;)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;const&lt;/span&gt; URL &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;'url'&lt;/span&gt;)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;const&lt;/span&gt; md5 &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;'md5'&lt;/span&gt;)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;const&lt;/span&gt; fs &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;'fs'&lt;/span&gt;)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;const&lt;/span&gt; util &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;'util'&lt;/span&gt;)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;const&lt;/span&gt; path &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;'path'&lt;/span&gt;)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;const&lt;/span&gt; shell &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;'shelljs'&lt;/span&gt;)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;co&quot;&gt;//èµ„æºä¿å­˜ç›®å½•&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;const&lt;/span&gt; BASEDIR &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;'./asserts/'&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kw&quot;&gt;const&lt;/span&gt; start &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;async&lt;/span&gt; () &lt;span class=&quot;op&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;co&quot;&gt;//åˆå§‹åŒ–åˆ é™¤æ¸…ç†èµ„æºç›®å½•ï¼Œä»…æµ‹è¯•é˜¶æ®µï¼Œå› ä¸ºå½“å‰ç›®å½•ä¸ºæ—¶é—´æˆ³ç”Ÿæˆ&lt;/span&gt;
    &lt;span class=&quot;va&quot;&gt;shell&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;exec&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;'rm -rf asserts/'&lt;/span&gt;)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;co&quot;&gt;//å› ä¸ºæ‰€æœ‰ç½‘ç»œè¯·æ±‚éƒ½ä¼šæ‹¦æˆªï¼Œå¤„ç†è¯·æ±‚å’Œé¡µé¢èµ„æºä»¥åŠdomæ„å»ºæ— å…³å¯å¿½ç•¥&lt;/span&gt;
    &lt;span class=&quot;co&quot;&gt;//ä¸‹é¢çš„åŸŸåæ˜¯æ¯”è¾ƒå¸¸è§çš„å‰ç«¯é‡‡é›†åŸŸå (æœ‰å¾ˆå¤šæ²¡æœ‰åˆ—å‡ºæ¥çš„)&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;const&lt;/span&gt; blackList &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; [
        &lt;span class=&quot;st&quot;&gt;'collect.ptengine.cn'&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; 
        &lt;span class=&quot;st&quot;&gt;'collect.ptengine.jp'&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;st&quot;&gt;'js.ptengine.cn'&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;st&quot;&gt;'js.ptengine.jp'&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;st&quot;&gt;'hm.baidu.com'&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;st&quot;&gt;'api.growingio.com'&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;st&quot;&gt;'www.google-analytics.com'&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;st&quot;&gt;'script.hotjar.com'&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;st&quot;&gt;'vars.hotjar.com'&lt;/span&gt;
    ]&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;co&quot;&gt;//ç”¨æ¥ç¼“å­˜ç¬¬ä¸‰æ–¹èµ„æºï¼ˆåŒ…æ‹¬cssã€javascriptï¼‰ï¼Œåœ¨è¯·æ±‚æ²¡æœ‰ç»“æŸä¹‹å‰ï¼Œæ— æ³•è·å–å®Œæ•´çš„ç¬¬ä¸‰æ–¹èµ„æºåˆ—ï¼Œæ— æ³•ä¿è¯cssã€javascriptä¸­å†…å®¹æ›¿æ¢å®Œæ•´ï¼Œæ‰€ä»¥å…ˆç¼“å­˜ï¼Œè¯·æ±‚ç»“æŸåå†ç»Ÿä¸€æ›¿æ¢&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;const&lt;/span&gt; resourceBufferMap &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;Map&lt;/span&gt;()&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;co&quot;&gt;//ç¬¬ä¸‰æ–¹èµ„æºæœåŠ¡ï¼ˆåŸŸåï¼‰åˆ—è¡¨&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;const&lt;/span&gt; thirdPartyList &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;{};&lt;/span&gt;
    &lt;span class=&quot;cf&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kw&quot;&gt;const&lt;/span&gt; browser &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; await &lt;span class=&quot;va&quot;&gt;puppeteer&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;launch&lt;/span&gt;()&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;kw&quot;&gt;const&lt;/span&gt; page &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; await &lt;span class=&quot;va&quot;&gt;browser&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;newPage&lt;/span&gt;()&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;co&quot;&gt;//å¯ç”¨è¯·æ±‚æ‹¦æˆª&lt;/span&gt;
        await &lt;span class=&quot;va&quot;&gt;page&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;setRequestInterception&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;true&lt;/span&gt;)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
       &lt;span class=&quot;co&quot;&gt;//ä»¥åšå®¢å›­ä¸ºä¾‹å­è¿›è¡Œé¡µé¢æŠ“å–&lt;/span&gt;
        &lt;span class=&quot;kw&quot;&gt;let&lt;/span&gt; url &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&quot;https://www.cnblogs.com&quot;&lt;/span&gt;
        &lt;span class=&quot;kw&quot;&gt;let&lt;/span&gt; docUrl &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;va&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;parse&lt;/span&gt;(url)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;co&quot;&gt;//è·å–è¯·æ±‚åœ°å€çš„åŸŸåï¼Œç”¨æ¥ç¡®å®šèµ„æºæ˜¯å¦æ¥è‡ªç¬¬ä¸‰æ–¹&lt;/span&gt;
        &lt;span class=&quot;kw&quot;&gt;let&lt;/span&gt; originUrl &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; (&lt;span class=&quot;va&quot;&gt;docUrl&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;protocol&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&quot;//&quot;&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;va&quot;&gt;docUrl&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;hostname&lt;/span&gt;)
        &lt;span class=&quot;co&quot;&gt;//@fixme æ¯æ¬¡æŠ“å–ç”Ÿæˆçš„å†…å®¹ç›®å½•åç§°&lt;/span&gt;
        &lt;span class=&quot;kw&quot;&gt;let&lt;/span&gt; md5_prefix &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;md5&lt;/span&gt;(&lt;span class=&quot;va&quot;&gt;Date&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;now&lt;/span&gt;())&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;va&quot;&gt;page&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;on&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;'request'&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;async&lt;/span&gt; (req) &lt;span class=&quot;op&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;kw&quot;&gt;const&lt;/span&gt; whitelist &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; [&lt;span class=&quot;st&quot;&gt;'image'&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;'script'&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;'stylesheet'&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;'document'&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;'font'&lt;/span&gt;]&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;co&quot;&gt;//å¦‚æœè¯·æ±‚çš„æ˜¯ç¬¬ä¸‰æ–¹åŸŸåï¼Œåªè€ƒè™‘å’Œé¡µé¢æ„å»ºç›¸å…³çš„èµ„æº&lt;/span&gt;
            &lt;span class=&quot;cf&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;va&quot;&gt;req&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;url&lt;/span&gt;().&lt;span class=&quot;at&quot;&gt;indexOf&lt;/span&gt;(originUrl) &lt;span class=&quot;op&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;va&quot;&gt;whitelist&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;includes&lt;/span&gt;(&lt;span class=&quot;va&quot;&gt;req&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;resourceType&lt;/span&gt;())) &lt;span class=&quot;op&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;cf&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;va&quot;&gt;req&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;abort&lt;/span&gt;()&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;

            &lt;span class=&quot;op&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;co&quot;&gt;//é‡‡é›†é»‘åå•ä¸­çš„å†…å®¹ä¸å¤„ç†&lt;/span&gt;
            &lt;span class=&quot;cf&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;va&quot;&gt;blackList&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;indexOf&lt;/span&gt;(&lt;span class=&quot;va&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;parse&lt;/span&gt;(&lt;span class=&quot;va&quot;&gt;req&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;url&lt;/span&gt;()).&lt;span class=&quot;at&quot;&gt;host&lt;/span&gt;) &lt;span class=&quot;op&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;) &lt;span class=&quot;op&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;cf&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;va&quot;&gt;req&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;abort&lt;/span&gt;()&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;op&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;va&quot;&gt;req&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;continue&lt;/span&gt;()&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;


        &lt;span class=&quot;op&quot;&gt;}&lt;/span&gt;)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;va&quot;&gt;page&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;on&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;'response'&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; async res &lt;span class=&quot;op&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;kw&quot;&gt;let&lt;/span&gt; request &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;va&quot;&gt;res&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;request&lt;/span&gt;()&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt;
                resourceUrl &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;va&quot;&gt;request&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;url&lt;/span&gt;()&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt;
                urlObj &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;va&quot;&gt;URL&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;parse&lt;/span&gt;(resourceUrl)&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt;
                filePath &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;va&quot;&gt;urlObj&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;pathname&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;//æ–‡ä»¶è·¯å¾„&lt;/span&gt;
                dirPath &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;va&quot;&gt;path&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;dirname&lt;/span&gt;(filePath)&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;//ç›®å½•è·¯å¾„&lt;/span&gt;
                requestMethod &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;va&quot;&gt;request&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;method&lt;/span&gt;().&lt;span class=&quot;at&quot;&gt;toUpperCase&lt;/span&gt;()&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;//è¯·æ±‚æ–¹æ³•&lt;/span&gt;
                isSameOrigin &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;va&quot;&gt;resourceUrl&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;includes&lt;/span&gt;(originUrl)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;//æ˜¯å¦æ˜¯åŒåŸŸåè¯·æ±‚&lt;/span&gt;

            &lt;span class=&quot;co&quot;&gt;//åªè€ƒè™‘getè¯·æ±‚èµ„æºï¼Œå…¶å®ƒhttp verb å¯¹æ–‡ä»¶èµ„æºè¯·æ±‚è¾ƒå°‘&lt;/span&gt;
            &lt;span class=&quot;cf&quot;&gt;if&lt;/span&gt; (requestMethod &lt;span class=&quot;op&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;'GET'&lt;/span&gt;) &lt;span class=&quot;op&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;co&quot;&gt;//å¦‚æœæ˜¯åŒä¸€ä¸ªåŸŸåä¸‹çš„èµ„æºï¼Œåˆ™ç›´æ¥æ„å»ºç›®å½•ï¼Œä¸‹è½½æ–‡ä»¶&lt;/span&gt;
                &lt;span class=&quot;co&quot;&gt;//åˆ›å»ºè·¯å¾„çš„æ–¹å¼ä¾æ®è¯·æ±‚æœ¬èº«pathç»“æ„ï¼Œä¿è¯å’ŒåŸèµ„æºç½‘ç«™ç›®å½•ç»“æ„å®Œæ•´ç»Ÿä¸€ï¼Œè¿™æ ·å³ä½¿æœ‰CMDã€AMDè§„èŒƒçš„ä»£ç å†æ¬¡æ‰§è¡Œï¼Œrequireç›¸å¯¹è·¯å¾„ä¹Ÿä¸ä¼šå‡ºç°é—®é¢˜ã€‚&lt;/span&gt;
                &lt;span class=&quot;kw&quot;&gt;let&lt;/span&gt; dirPathCreatedIfNotExists&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt;
                    filePathCreatedIfNotExists&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;

                &lt;span class=&quot;kw&quot;&gt;let&lt;/span&gt; hostname &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;va&quot;&gt;urlObj&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;hostname&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;

                &lt;span class=&quot;cf&quot;&gt;if&lt;/span&gt; (isSameOrigin) &lt;span class=&quot;op&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;co&quot;&gt;//æ„å»ºåŒåŸŸåpath&lt;/span&gt;
                    &lt;span class=&quot;co&quot;&gt;//åŒåŸŸåçš„èµ„æº æœ‰æ—¶ä¼šä»¥//www.xxx.com/images/logo.png è¿™ç§æ–¹å¼ä½¿ç”¨ï¼Œæ‰€ä»¥ï¼Œå¯¹è¿™ç§èµ„æºéœ€è¦ç‰¹æ®Šå¤„ç†&lt;/span&gt;
                    thirdPartyList[&lt;span class=&quot;vs&quot;&gt;`//&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;${&lt;/span&gt;hostname&lt;span class=&quot;sc&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;vs&quot;&gt;`&lt;/span&gt;] &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
                    dirPathCreatedIfNotExists &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;va&quot;&gt;path&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;join&lt;/span&gt;(BASEDIR&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; md5_prefix&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; dirPath)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
                    filePathCreatedIfNotExists &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;va&quot;&gt;path&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;join&lt;/span&gt;(BASEDIR&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; md5_prefix&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; filePath)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;op&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;cf&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;co&quot;&gt;//ç¬¬ä¸‰æ–¹èµ„æºæ„å»ºæ­£åˆ™è¡¨è¾¾å¼ï¼Œæ›¿æ¢httpã€httpsã€// ä¸‰ç§æ¨¡å¼è·¯å¾„ä¸ºæœ¬åœ°ç›®å½•è·¯å¾„&lt;/span&gt;
                    thirdPartyList[&lt;span class=&quot;vs&quot;&gt;`(https?:)?//&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;${&lt;/span&gt;hostname&lt;span class=&quot;sc&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;vs&quot;&gt;`&lt;/span&gt;] &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vs&quot;&gt;`/&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;${&lt;/span&gt;hostname&lt;span class=&quot;sc&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;vs&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
                    dirPathCreatedIfNotExists &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;va&quot;&gt;path&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;join&lt;/span&gt;(BASEDIR&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; md5_prefix&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; hostname&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; dirPath)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
                    filePathCreatedIfNotExists &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;va&quot;&gt;path&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;join&lt;/span&gt;(BASEDIR&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; md5_prefix&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; hostname&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; filePath)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;op&quot;&gt;}&lt;/span&gt;
                &lt;span class=&quot;co&quot;&gt;//è·å–æ‰©å±•å å¦‚æœè·å–ä¸åˆ° åˆ™è®¤ä¸ºä¸æ˜¯èµ„æºæ–‡ä»¶&lt;/span&gt;
                &lt;span class=&quot;cf&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;va&quot;&gt;path&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;extname&lt;/span&gt;(filePathCreatedIfNotExists)) &lt;span class=&quot;op&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;co&quot;&gt;//è·¯å¾„ä¸å­˜åœ¨ï¼Œç›´æ¥åˆ›å»ºå¤šçº§ç›®å½•&lt;/span&gt;
                    &lt;span class=&quot;cf&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;op&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;va&quot;&gt;fs&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;existsSync&lt;/span&gt;(dirPathCreatedIfNotExists)) &lt;span class=&quot;op&quot;&gt;{&lt;/span&gt;
                        &lt;span class=&quot;va&quot;&gt;shell&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;exec&lt;/span&gt;(&lt;span class=&quot;vs&quot;&gt;`mkdir -p &lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;${&lt;/span&gt;dirPathCreatedIfNotExists&lt;span class=&quot;sc&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;vs&quot;&gt;`&lt;/span&gt;)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
                        &lt;span class=&quot;va&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;log&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;'create dir'&lt;/span&gt;)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
                    &lt;span class=&quot;op&quot;&gt;}&lt;/span&gt;
                    &lt;span class=&quot;cf&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;va&quot;&gt;res&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;ok&lt;/span&gt;()) &lt;span class=&quot;op&quot;&gt;{&lt;/span&gt;
                        &lt;span class=&quot;cf&quot;&gt;if&lt;/span&gt; ((isSameOrigin &lt;span class=&quot;op&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; dirPath &lt;span class=&quot;op&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;'/'&lt;/span&gt;) &lt;span class=&quot;op&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;!&lt;/span&gt;isSameOrigin) &lt;span class=&quot;op&quot;&gt;{&lt;/span&gt;
                            &lt;span class=&quot;kw&quot;&gt;let&lt;/span&gt; needReplace &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; [&lt;span class=&quot;st&quot;&gt;'stylesheet'&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;'script'&lt;/span&gt;]&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
                            &lt;span class=&quot;co&quot;&gt;//@fixme toString å¯èƒ½ä¼šæœ‰ç¼–ç é—®é¢˜&lt;/span&gt;
                            &lt;span class=&quot;kw&quot;&gt;let&lt;/span&gt; fileContent &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; (await &lt;span class=&quot;va&quot;&gt;res&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;buffer&lt;/span&gt;()).&lt;span class=&quot;at&quot;&gt;toString&lt;/span&gt;()&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
                            &lt;span class=&quot;co&quot;&gt;//ç¬¬ä¸‰æ–¹åŸŸåè¿˜è·å–ï¼Œå…ˆç¼“å­˜å†å¤„ç†&lt;/span&gt;
                            &lt;span class=&quot;cf&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;va&quot;&gt;needReplace&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;includes&lt;/span&gt;(&lt;span class=&quot;va&quot;&gt;request&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;resourceType&lt;/span&gt;())) &lt;span class=&quot;op&quot;&gt;{&lt;/span&gt;
                                &lt;span class=&quot;co&quot;&gt;//js css æ–‡ä»¶ä¸­å¯èƒ½åŒ…å«éœ€è¦æ›¿æ¢çš„å†…å®¹ï¼Œéœ€è¦å¤„ç†&lt;/span&gt;
                                &lt;span class=&quot;co&quot;&gt;//æ‰€ä»¥æš‚æ—¶ç¼“å­˜ä¸å†™å…¥æ–‡ä»¶&lt;/span&gt;
                                &lt;span class=&quot;va&quot;&gt;resourceBufferMap&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;set&lt;/span&gt;(filePathCreatedIfNotExists&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; fileContent)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
                            &lt;span class=&quot;op&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;cf&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;{&lt;/span&gt;

                                &lt;span class=&quot;va&quot;&gt;fs&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;writeFileSync&lt;/span&gt;(filePathCreatedIfNotExists&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; await &lt;span class=&quot;va&quot;&gt;res&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;buffer&lt;/span&gt;())&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
                            &lt;span class=&quot;op&quot;&gt;}&lt;/span&gt;
                        &lt;span class=&quot;op&quot;&gt;}&lt;/span&gt;
                    &lt;span class=&quot;op&quot;&gt;}&lt;/span&gt;
                &lt;span class=&quot;op&quot;&gt;}&lt;/span&gt;

            &lt;span class=&quot;op&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;op&quot;&gt;}&lt;/span&gt;)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;

        await &lt;span class=&quot;va&quot;&gt;page&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;goto&lt;/span&gt;(url&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;dt&quot;&gt;waitUntil&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;'networkidle0'&lt;/span&gt;
        &lt;span class=&quot;op&quot;&gt;}&lt;/span&gt;)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;kw&quot;&gt;let&lt;/span&gt; content &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; await &lt;span class=&quot;va&quot;&gt;page&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;content&lt;/span&gt;()&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;co&quot;&gt;//å¯¹css javascriptæ–‡ä»¶ è¿›è¡Œæ›¿æ¢å¤„ç†&lt;/span&gt;
        &lt;span class=&quot;va&quot;&gt;resourceBufferMap&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;forEach&lt;/span&gt;((value&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; key) &lt;span class=&quot;op&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;{&lt;/span&gt;
            value &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;applyReplace&lt;/span&gt;(value&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; thirdPartyList)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;va&quot;&gt;fs&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;writeFileSync&lt;/span&gt;(key&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; value)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;op&quot;&gt;}&lt;/span&gt;)

        &lt;span class=&quot;co&quot;&gt;// html å†…å®¹å¤„ç†&lt;/span&gt;
        content &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;applyReplace&lt;/span&gt;(content&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; thirdPartyList)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;va&quot;&gt;fs&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;writeFileSync&lt;/span&gt;(&lt;span class=&quot;vs&quot;&gt;`./asserts/&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;${&lt;/span&gt;md5_prefix&lt;span class=&quot;sc&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;vs&quot;&gt;/index.html`&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; content)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;

        await &lt;span class=&quot;va&quot;&gt;page&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;close&lt;/span&gt;()&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
        await &lt;span class=&quot;va&quot;&gt;browser&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;close&lt;/span&gt;()&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;op&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;cf&quot;&gt;catch&lt;/span&gt; (error) &lt;span class=&quot;op&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;va&quot;&gt;console&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;log&lt;/span&gt;(error)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;op&quot;&gt;}&lt;/span&gt;


&lt;span class=&quot;op&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kw&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;applyReplace&lt;/span&gt;(origin&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; regList) &lt;span class=&quot;op&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;cf&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;kw&quot;&gt;let&lt;/span&gt; prop &lt;span class=&quot;kw&quot;&gt;in&lt;/span&gt; regList) &lt;span class=&quot;op&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;co&quot;&gt;//è¿›è¡Œæ­£åˆ™å…¨å±€æ›¿æ¢&lt;/span&gt;
        &lt;span class=&quot;kw&quot;&gt;let&lt;/span&gt; reg &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;RegExp&lt;/span&gt;(prop&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;'g'&lt;/span&gt;)
        origin &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;va&quot;&gt;origin&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;replace&lt;/span&gt;(reg&lt;span class=&quot;op&quot;&gt;,&lt;/span&gt; regList[prop])&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;op&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;cf&quot;&gt;return&lt;/span&gt; origin&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;op&quot;&gt;}&lt;/span&gt;


&lt;span class=&quot;at&quot;&gt;start&lt;/span&gt;()&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;ä¸Šè¿°æ–¹æ¡ˆèƒ½è§£å†³å‡ ä¹æ‰€æœ‰åŸå§‹æ–¹æ¡ˆæ— æ³•è§£å†³çš„é—®é¢˜ï¼Œä½†æ˜¯ä¹Ÿå¹¶éåå…¨åç¾ï¼Œé¦–é€‰ï¼Œç›¸æ¯”åŸå§‹æ–¹æ¡ˆï¼Œå¢åŠ äº†æ¸²æŸ“çš„æ­¥éª¤ï¼Œæ‰€ä»¥æ€§èƒ½æœ‰æ‰€ä¸‹é™ï¼›å…¶æ¬¡å¦‚æœç”¨æˆ·ç½‘ç«™æ¯”è¾ƒç‰¹æ®Šï¼Œæ¯”å¦‚https://www.xxx.com/admin è¿™ä¸ªè·¯å¾„ä¸‹èµ„æºï¼Œæ¯”å¦‚æŸcssæ–‡ä»¶ä¸­æœ‰å¦‚ä¸‹å†™æ³•ï¼š'background:url('./xxx.bg.png')' ï¼Œè¿™æ—¶è·¯å¾„ä¼šæ‰¾ä¸åˆ°ï¼Œå› ä¸ºåœ¨èµ„æºè·¯å¾„æ›¿æ¢é˜¶æ®µï¼Œä¼šæ›¿æ¢ä¸ºhostnameï¼Œå³æŸ¥æ‰¾èµ„æºæ˜¯ä¼šå»æ ¹ç›®å½•å»æ‰¾ï¼Œå¯¼è‡´è·¯å¾„not foundï¼Œä¸è¿‡è¿™æœ‰å…¶å®ƒæ”¹è¿›çš„æ–¹æ¡ˆï¼Œæ¯”å¦‚å¯ä»¥æŠŠåŒåŸŸåçš„è·¯å¾„åšçš„æ›´çµæ´»ä¸€ç‚¹ï¼Œå¯ä»¥è®©æ¥å£æ¶ˆè´¹è€…ä¿®æ”¹ã€‚&lt;/p&gt;
</description>
<pubDate>Sat, 19 May 2018 14:59:00 +0000</pubDate>
<dc:creator>JerremyZhang</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/Johnzhang/p/9061998.html</dc:identifier>
</item>
<item>
<title>ç‰¹å¾å·¥ç¨‹ä¹‹ç‰¹å¾è¡¨è¾¾ - åˆ˜å»ºå¹³Pinard</title>
<link>http://www.cnblogs.com/pinard/p/9061549.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/pinard/p/9061549.html</guid>
<description>&lt;p&gt;Â  Â  Â  Â  Â  åœ¨&lt;a id=&quot;cb_post_title_url&quot; class=&quot;postTitle2&quot; href=&quot;http://www.cnblogs.com/pinard/p/9032759.html&quot;&gt;ç‰¹å¾å·¥ç¨‹ä¹‹ç‰¹å¾é€‰æ‹©&lt;/a&gt;ä¸­ï¼Œæˆ‘ä»¬è®²åˆ°äº†ç‰¹å¾é€‰æ‹©çš„ä¸€äº›è¦ç‚¹ã€‚æœ¬ç¯‡æˆ‘ä»¬ç»§ç»­è®¨è®ºç‰¹å¾å·¥ç¨‹ï¼Œä¸è¿‡ä¼šé‡ç‚¹å…³æ³¨äºç‰¹å¾è¡¨è¾¾éƒ¨åˆ†ï¼Œå³å¦‚æœå¯¹æŸä¸€ä¸ªç‰¹å¾çš„å…·ä½“è¡¨ç°å½¢å¼åšå¤„ç†ã€‚ä¸»è¦åŒ…æ‹¬ç¼ºå¤±å€¼å¤„ç†ï¼Œç‰¹æ®Šçš„ç‰¹å¾å¤„ç†æ¯”å¦‚æ—¶é—´å’Œåœ°ç†ä½ç½®å¤„ç†ï¼Œç¦»æ•£ç‰¹å¾çš„è¿ç»­åŒ–å’Œç¦»æ•£åŒ–å¤„ç†ï¼Œè¿ç»­ç‰¹å¾çš„ç¦»æ•£åŒ–å¤„ç†å‡ ä¸ªæ–¹é¢ã€‚&lt;/p&gt;

&lt;p&gt;Â  Â  Â  Â  Â  ç‰¹å¾æœ‰ç¼ºå¤±å€¼æ˜¯éå¸¸å¸¸è§çš„ï¼Œå¤§éƒ¨åˆ†æœºå™¨å­¦ä¹ æ¨¡å‹åœ¨æ‹Ÿåˆå‰éœ€è¦æ‰€æœ‰çš„ç‰¹å¾éƒ½æœ‰å€¼ï¼Œä¸èƒ½æ˜¯ç©ºæˆ–è€…NULLã€‚é‚£ä¹ˆå¦‚æœæœ‰ç¼ºå¤±å€¼æˆ‘ä»¬éœ€è¦æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ã€€ã€€Â  Â é¦–å…ˆæˆ‘ä»¬ä¼šçœ‹æ˜¯è¯¥ç‰¹å¾æ˜¯è¿ç»­å€¼è¿˜æ˜¯ç¦»æ•£å€¼ã€‚å¦‚æœæ˜¯è¿ç»­å€¼ï¼Œé‚£ä¹ˆä¸€èˆ¬æœ‰ä¸¤ç§é€‰æ‹©ï¼Œä¸€æ˜¯é€‰æ‹©æ‰€æœ‰æœ‰è¯¥ç‰¹å¾å€¼çš„æ ·æœ¬ï¼Œç„¶åå–å¹³å‡å€¼ï¼Œæ¥å¡«å……ç¼ºå¤±å€¼ï¼Œå¦ä¸€ç§æ˜¯å–ä¸­ä½æ•°æ¥å¡«å……ç¼ºå¤±å€¼ã€‚å¦‚æœæ˜¯ç¦»æ•£å€¼ï¼Œåˆ™ä¸€èˆ¬ä¼šé€‰æ‹©æ‰€æœ‰æœ‰è¯¥ç‰¹å¾å€¼çš„æ ·æœ¬ä¸­æœ€é¢‘ç¹å‡ºç°çš„ç±»åˆ«å€¼ï¼Œæ¥å¡«å……ç¼ºå¤±å€¼ã€‚åœ¨sklearnä¸­ï¼Œå¯ä»¥ä½¿ç”¨preprocessing.Imputeræ¥é€‰æ‹©è¿™ä¸‰ç§ä¸åŒçš„å¤„ç†é€»è¾‘åšé¢„å¤„ç†ã€‚&lt;/p&gt;

&lt;p&gt;Â ã€€ã€€æœ‰äº›ç‰¹å¾çš„é»˜è®¤å–å€¼æ¯”è¾ƒç‰¹æ®Šï¼Œä¸€èˆ¬éœ€è¦åšäº†å¤„ç†åæ‰èƒ½ç”¨äºç®—æ³•ã€‚æ¯”å¦‚æ—¥æœŸæ—¶é—´ï¼Œæ¯”å¦‚æ˜¾ç¤º20180519ï¼Œè¿™æ ·çš„å€¼ä¸€èˆ¬æ²¡åŠæ³•ç›´æ¥ä½¿ç”¨ã€‚é‚£ä¹ˆä¸€èˆ¬éœ€è¦å¦‚ä½•å˜æ¢å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;Â  Â  Â  Â  å¯¹äºæ—¶é—´åŸå§‹ç‰¹å¾ï¼Œå¤„ç†æ–¹æ³•æœ‰å¾ˆå¤šï¼Œè¿™é‡Œåªä¸¾ä¾‹å‡ ç§æœ‰ä»£è¡¨æ€§çš„æ–¹æ³•ã€‚ã€€ç¬¬ä¸€ç§æ˜¯ä½¿ç”¨è¿ç»­çš„æ—¶é—´å·®å€¼æ³•ï¼Œå³è®¡ç®—å‡ºæ‰€æœ‰æ ·æœ¬çš„æ—¶é—´åˆ°æŸä¸€ä¸ªæœªæ¥æ—¶é—´ä¹‹é—´çš„æ•°å€¼å·®è·ï¼Œè¿™æ ·è¿™ä¸ªå·®è·æ˜¯UTCçš„æ—¶é—´å·®ï¼Œä»è€Œå°†æ—¶é—´ç‰¹å¾è½¬åŒ–ä¸ºè¿ç»­å€¼ã€‚ç¬¬äºŒç§æ–¹æ³•æ˜¯æ ¹æ®æ—¶é—´æ‰€åœ¨çš„å¹´ï¼Œæœˆï¼Œæ—¥ï¼Œæ˜ŸæœŸå‡ ï¼Œå°æ—¶æ•°ï¼Œå°†ä¸€ä¸ªæ—¶é—´ç‰¹å¾è½¬åŒ–ä¸ºè‹¥å¹²ä¸ªç¦»æ•£ç‰¹å¾ï¼Œè¿™ç§æ–¹æ³•åœ¨åˆ†æå…·æœ‰æ˜æ˜¾æ—¶é—´è¶‹åŠ¿çš„é—®é¢˜æ¯”è¾ƒå¥½ç”¨ã€‚ç¬¬ä¸‰ç§æ˜¯æƒé‡æ³•ï¼Œå³æ ¹æ®æ—¶é—´çš„æ–°æ—§å¾—åˆ°ä¸€ä¸ªæƒé‡å€¼ã€‚æ¯”å¦‚å¯¹äºå•†å“ï¼Œä¸‰ä¸ªæœˆå‰è´­ä¹°çš„è®¾ç½®ä¸€ä¸ªè¾ƒä½çš„æƒé‡ï¼Œæœ€è¿‘ä¸‰å¤©è´­ä¹°çš„è®¾ç½®ä¸€ä¸ªä¸­ç­‰çš„æƒé‡ï¼Œåœ¨ä¸‰ä¸ªæœˆå†…ä½†æ˜¯ä¸‰å¤©å‰çš„è®¾ç½®ä¸€ä¸ªè¾ƒå¤§çš„æƒé‡ã€‚å½“ç„¶ï¼Œè¿˜æœ‰å…¶ä»–çš„è®¾ç½®æƒé‡çš„æ–¹æ³•ï¼Œè¿™ä¸ªè¦æ ¹æ®è¦è§£å†³çš„é—®é¢˜æ¥çµæ´»ç¡®å®šã€‚&lt;/p&gt;
&lt;p&gt;Â  Â  Â  Â å¯¹åœ°ç†ç‰¹å¾ï¼Œæ¯”å¦‚â€œå¹¿å·å¸‚å¤©æ²³åŒºXXè¡—é“XXå·â€ï¼Œè¿™æ ·çš„ç‰¹å¾æˆ‘ä»¬åº”è¯¥å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿå¤„ç†æˆç¦»æ•£å€¼å’Œè¿ç»­å€¼éƒ½æ˜¯å¯ä»¥çš„ã€‚å¦‚æœæ˜¯å¤„ç†æˆç¦»æ•£å€¼ï¼Œåˆ™éœ€è¦è½¬åŒ–ä¸ºå¤šä¸ªç¦»æ•£ç‰¹å¾ï¼Œæ¯”å¦‚åŸå¸‚åç‰¹å¾ï¼ŒåŒºå¿ç‰¹å¾ï¼Œè¡—é“ç‰¹å¾ç­‰ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬éœ€è¦åˆ¤æ–­ç”¨æˆ·åˆ†å¸ƒåŒºåŸŸï¼Œåˆ™ä¸€èˆ¬å¤„ç†æˆè¿ç»­å€¼ä¼šæ¯”è¾ƒå¥½ï¼Œè¿™æ—¶å¯ä»¥å°†åœ°å€å¤„ç†æˆç»åº¦å’Œçº¬åº¦çš„è¿ç»­ç‰¹å¾ã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€Â  æœ‰å¾ˆå¤šæœºå™¨å­¦ä¹ ç®—æ³•åªèƒ½å¤„ç†è¿ç»­å€¼ç‰¹å¾ï¼Œä¸èƒ½å¤„ç†ç¦»æ•£å€¼ç‰¹å¾ï¼Œæ¯”å¦‚çº¿æ€§å›å½’ï¼Œé€»è¾‘å›å½’ç­‰ã€‚é‚£ä¹ˆæƒ³ä½¿ç”¨é€»è¾‘å›å½’ï¼Œçº¿æ€§å›å½’æ—¶è¿™äº›å€¼åªèƒ½ä¸¢å¼ƒå—ï¼Ÿå½“ç„¶ä¸æ˜¯ã€‚æˆ‘ä»¬å¯ä»¥å°†ç¦»æ•£ç‰¹å¾è¿ç»­åŒ–å¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ æœ€å¸¸è§çš„ç¦»æ•£ç‰¹å¾è¿ç»­åŒ–çš„å¤„ç†æ–¹æ³•æ˜¯ç‹¬çƒ­ç¼–ç one-hot encodingã€‚å¤„ç†æ–¹æ³•å…¶å®æ¯”è¾ƒç®€å•ï¼Œæ¯”å¦‚æŸç‰¹å¾çš„å–å€¼æ˜¯é«˜ï¼Œä¸­å’Œä½ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºä¸‰ä¸ªå–å€¼ä¸º0æˆ–è€…1çš„ç‰¹å¾ï¼Œå°†é«˜ç¼–ç ä¸º1,0,0è¿™æ ·ä¸‰ä¸ªç‰¹å¾ï¼Œä¸­ç¼–ç ä¸º0,1,0è¿™æ ·ä¸‰ä¸ªç‰¹å¾ï¼Œä½ç¼–ç ä¸º0,0,1è¿™æ ·ä¸‰ä¸ªç‰¹å¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¹‹å‰çš„ä¸€ä¸ªç‰¹å¾è¢«æˆ‘ä»¬è½¬åŒ–ä¸ºäº†ä¸‰ä¸ªç‰¹å¾ã€‚sklearnçš„OneHotEncoderå¯ä»¥å¸®æˆ‘ä»¬åšè¿™ä¸ªå¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ ç¬¬äºŒä¸ªæ–¹æ³•æ˜¯ç‰¹å¾åµŒå…¥embeddingã€‚è¿™ä¸ªä¸€èˆ¬ç”¨äºæ·±åº¦å­¦ä¹ ä¸­ã€‚æ¯”å¦‚å¯¹äºç”¨æˆ·çš„IDè¿™ä¸ªç‰¹å¾ï¼Œå¦‚æœè¦ä½¿ç”¨ç‹¬çƒ­ç¼–ç ï¼Œåˆ™ç»´åº¦ä¼šçˆ†ç‚¸ï¼Œå¦‚æœä½¿ç”¨ç‰¹å¾åµŒå…¥å°±ç»´åº¦ä½å¾ˆå¤šäº†ã€‚å¯¹äºæ¯ä¸ªè¦åµŒå…¥çš„ç‰¹å¾ï¼Œæˆ‘ä»¬ä¼šæœ‰ä¸€ä¸ªç‰¹å¾åµŒå…¥çŸ©é˜µï¼Œè¿™ä¸ªçŸ©é˜µçš„è¡Œå¾ˆå¤§ï¼Œå¯¹åº”æˆ‘ä»¬è¯¥ç‰¹å¾çš„æ•°ç›®ã€‚æ¯”å¦‚ç”¨æˆ·IDï¼Œå¦‚æœæœ‰100ä¸‡ä¸ªï¼Œé‚£ä¹ˆåµŒå…¥çš„ç‰¹å¾çŸ©é˜µçš„è¡Œå°±æ˜¯100ä¸‡ã€‚ä½†æ˜¯åˆ—ä¸€èˆ¬æ¯”è¾ƒå°ï¼Œæ¯”å¦‚å¯ä»¥å–20ã€‚è¿™æ ·æ¯ä¸ªç”¨æˆ·IDå°±è½¬åŒ–ä¸ºäº†ä¸€ä¸ª20ç»´çš„ç‰¹å¾å‘é‡ã€‚è¿›è€Œå‚ä¸æ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚åœ¨tensorflowä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆéšæœºåˆå§‹åŒ–ä¸€ä¸ªç‰¹å¾åµŒå…¥çŸ©é˜µï¼Œå¯¹äºæ¯ä¸ªç”¨æˆ·ï¼Œå¯ä»¥ç”¨tf.nn.embedding_lookupæ‰¾åˆ°è¯¥ç”¨æˆ·çš„ç‰¹å¾åµŒå…¥å‘é‡ã€‚ç‰¹å¾åµŒå…¥çŸ©é˜µä¼šåœ¨åå‘ä¼ æ’­çš„è¿­ä»£ä¸­ä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ æ­¤å¤–ï¼Œåœ¨è‡ªç„¶è¯­è¨€å¤„ç†ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨word2vecå°†è¯è½¬åŒ–ä¸ºè¯å‘é‡ï¼Œè¿›è€Œå¯ä»¥è¿›è¡Œä¸€äº›è¿ç»­å€¼çš„åç»§å¤„ç†ã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€ ç¦»æ•£ç‰¹å¾æœ‰æ—¶é—´ä¹Ÿä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œéœ€è¦å…ˆè¿›è¡Œè½¬åŒ–ã€‚æ¯”å¦‚æœ€å¸¸è§çš„ï¼Œå¦‚æœç‰¹å¾çš„å–å€¼æ˜¯é«˜ï¼Œä¸­å’Œä½ï¼Œé‚£ä¹ˆå°±ç®—ä½ éœ€è¦çš„æ˜¯ç¦»æ•£å€¼ï¼Œä¹Ÿæ˜¯æ²¡æ³•ç›´æ¥ä½¿ç”¨çš„ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ å¯¹äºåŸå§‹çš„ç¦»æ•£å€¼ç‰¹å¾ï¼Œæœ€å¸¸ç”¨çš„æ–¹æ³•ä¹Ÿæ˜¯ç‹¬çƒ­ç¼–ç ï¼Œæ–¹æ³•åœ¨ç¬¬ä¸‰èŠ‚å·²ç»è®²åˆ°ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ ç¬¬äºŒç§æ–¹æ³•æ˜¯è™šæ‹Ÿç¼–ç dummy codingï¼Œå®ƒå’Œç‹¬çƒ­ç¼–ç ç±»ä¼¼ï¼Œä½†æ˜¯å®ƒçš„ç‰¹ç‚¹æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬çš„ç‰¹å¾æœ‰Nä¸ªå–å€¼ï¼Œå®ƒåªéœ€è¦N-1ä¸ªæ–°çš„0,1ç‰¹å¾æ¥ä»£æ›¿ï¼Œè€Œç‹¬çƒ­ç¼–ç ä¼šç”¨Nä¸ªæ–°ç‰¹å¾ä»£æ›¿ã€‚æ¯”å¦‚ä¸€ä¸ªç‰¹å¾çš„å–å€¼æ˜¯é«˜ï¼Œä¸­å’Œä½ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦ä¸¤ä½ç¼–ç ï¼Œæ¯”å¦‚åªç¼–ç ä¸­å’Œä½ï¼Œå¦‚æœæ˜¯1ï¼Œ0åˆ™æ˜¯ä¸­ï¼Œ0,1åˆ™æ˜¯ä½ã€‚0,0åˆ™æ˜¯é«˜äº†ã€‚ç›®å‰è™šæ‹Ÿç¼–ç ä½¿ç”¨çš„æ²¡æœ‰ç‹¬çƒ­ç¼–ç å¹¿ï¼Œå› æ­¤ä¸€èˆ¬æœ‰éœ€è¦çš„è¯è¿˜æ˜¯ä½¿ç”¨ç‹¬çƒ­ç¼–ç æ¯”è¾ƒå¥½ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ æ­¤å¤–ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬å¯ä»¥å¯¹ç‰¹å¾è¿›è¡Œç ”ç©¶ååšä¸€ä¸ªæ›´å¥½çš„å¤„ç†ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬ç ”ç©¶å•†å“çš„é”€é‡å¯¹åº”çš„ç‰¹å¾ã€‚é‡Œé¢æœ‰ä¸€ä¸ªåŸå§‹ç‰¹å¾æ˜¯å­£èŠ‚æ˜¥å¤ç§‹å†¬ã€‚æˆ‘ä»¬å¯ä»¥å°†å…¶è½¬åŒ–ä¸ºæ·¡å­£å’Œæ—ºå­£è¿™æ ·çš„äºŒå€¼ç‰¹å¾ï¼Œæ–¹ä¾¿å»ºæ¨¡ã€‚å½“ç„¶æœ‰æ—¶å€™è½¬åŒ–ä¸ºä¸‰å€¼ç‰¹å¾æˆ–è€…å››å€¼ç‰¹å¾ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ å¯¹äºåˆ†ç±»é—®é¢˜çš„ç‰¹å¾è¾“å‡ºï¼Œæˆ‘ä»¬ä¸€èˆ¬éœ€è¦ç”¨sklearnçš„LabelEncoderå°†å…¶è½¬åŒ–ä¸º0,1,2ï¼Œ...è¿™æ ·çš„ç±»åˆ«æ ‡ç­¾å€¼ã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€ å¯¹äºè¿ç»­ç‰¹å¾ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å…¶åšç¦»æ•£åŒ–å¤„ç†ã€‚è¿™æ ·ç‰¹å¾å˜å¾—é«˜ç»´ç¨€ç–ï¼Œæ–¹ä¾¿ä¸€äº›ç®—æ³•çš„å¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ å¯¹å¸¸ç”¨çš„æ–¹æ³•æ˜¯æ ¹æ®é˜ˆå€¼è¿›è¡Œåˆ†ç»„ï¼Œæ¯”å¦‚æˆ‘ä»¬æ ¹æ®è¿ç»­å€¼ç‰¹å¾çš„åˆ†ä½æ•°ï¼Œå°†è¯¥ç‰¹å¾åˆ†ä¸ºé«˜ï¼Œä¸­å’Œä½ä¸‰ä¸ªç‰¹å¾ã€‚å°†åˆ†ä½æ•°ä»0-0.3çš„è®¾ç½®ä¸ºé«˜ï¼Œ0.3-0.7çš„è®¾ç½®ä¸ºä¸­ï¼Œ0.7-1çš„è®¾ç½®ä¸ºé«˜ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ å½“ç„¶è¿˜æœ‰é«˜çº§ä¸€äº›çš„æ–¹æ³•ã€‚æ¯”å¦‚ä½¿ç”¨GBDTã€‚åœ¨LR+GBDTçš„ç»å…¸æ¨¡å‹ä¸­ï¼Œå°±æ˜¯ä½¿ç”¨GDBTæ¥å…ˆå°†è¿ç»­å€¼è½¬åŒ–ä¸ºç¦»æ•£å€¼ã€‚é‚£ä¹ˆå¦‚ä½•è½¬åŒ–å‘¢ï¼Ÿæ¯”å¦‚æˆ‘ä»¬ç”¨è®­ç»ƒé›†çš„æ‰€æœ‰è¿ç»­å€¼å’Œæ ‡ç­¾è¾“å‡ºæ¥è®­ç»ƒGBDTï¼Œæœ€åå¾—åˆ°çš„GBDTæ¨¡å‹æœ‰ä¸¤é¢—å†³ç­–æ ‘ï¼Œç¬¬ä¸€é¢—å†³ç­–æ ‘æœ‰ä¸‰ä¸ªå¶å­èŠ‚ç‚¹ï¼Œç¬¬äºŒé¢—å†³ç­–æ ‘æœ‰4ä¸ªå¶å­èŠ‚ç‚¹ã€‚å¦‚æœæŸä¸€ä¸ªæ ·æœ¬åœ¨ç¬¬ä¸€é¢—å†³ç­–æ ‘ä¼šè½åœ¨ç¬¬äºŒä¸ªå¶å­èŠ‚ç‚¹ï¼Œåœ¨ç¬¬äºŒé¢—å†³ç­–æ ‘è½åœ¨ç¬¬4é¢—å¶å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå®ƒçš„ç¼–ç å°±æ˜¯0,1,0,0,0,0,1ï¼Œä¸€å…±ä¸ƒä¸ªç¦»æ•£ç‰¹å¾ï¼Œå…¶ä¸­ä¼šæœ‰ä¸¤ä¸ªå–å€¼ä¸º1çš„ä½ç½®ï¼Œåˆ†åˆ«å¯¹åº”æ¯é¢—å†³ç­–æ ‘ä¸­æ ·æœ¬è½ç‚¹çš„ä½ç½®ã€‚åœ¨sklearnä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨GradientBoostingClassifierçš„ applyæ–¹æ³•å¾ˆæ–¹ä¾¿çš„å¾—åˆ°æ ·æœ¬ç¦»æ•£åŒ–åçš„ç‰¹å¾ï¼Œç„¶åä½¿ç”¨ç‹¬çƒ­ç¼–ç å³å¯ã€‚Â &lt;/p&gt;
&lt;p&gt;Â  Â  Â  Â  Â å…·ä½“çš„ä¸€ä¸ªç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;44&quot;&gt;
&lt;pre&gt;
&lt;span&gt;from&lt;/span&gt; sklearn.datasets &lt;span&gt;import&lt;/span&gt;&lt;span&gt; make_classification
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; sklearn.model_selection &lt;span&gt;import&lt;/span&gt;&lt;span&gt; train_test_split
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; sklearn.ensemble &lt;span&gt;import&lt;/span&gt;&lt;span&gt; GradientBoostingClassifier
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; sklearn.preprocessing &lt;span&gt;import&lt;/span&gt;&lt;span&gt; OneHotEncoder
X, y &lt;/span&gt;= make_classification(n_samples=10&lt;span&gt;)  
X_train, X_test, y_train, y_test &lt;/span&gt;= train_test_split(X, y, test_size=0.5&lt;span&gt;)
gbc &lt;/span&gt;= GradientBoostingClassifier(n_estimators=2&lt;span&gt;)
one_hot &lt;/span&gt;=&lt;span&gt; OneHotEncoder()
gbc.fit(X_train, y_train)
X_train_new &lt;/span&gt;=&lt;span&gt; one_hot.fit_transform(gbc.apply(X_train)[:, :, 0])
&lt;/span&gt;&lt;span&gt;print&lt;/span&gt; (X_train_new.todense())
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Â  Â  Â  Â è¾“å‡ºæ˜¯ï¼š&lt;/p&gt;
&lt;pre&gt;
[[0. 1. 1. 0.]
 [1. 0. 0. 1.]
 [1. 0. 0. 1.]
 [1. 0. 0. 1.]
 [0. 1. 1. 0.]]
&lt;/pre&gt;

&lt;p&gt;Â  Â  Â  Â æœ¬æ–‡æ€»ç»“äº†ç‰¹å¾è¡¨è¾¾çš„ä¸€äº›å…·ä½“æ–¹æ³•ï¼Œ ä½†æ˜¯ç‰¹å¾è¡¨è¾¾çš„æ–¹æ³•ä¾¿ä¸æ­¢äºä¸Šæ–‡ä¸­çš„æ–¹æ³•ï¼Œæ¯•ç«Ÿè¿™æ˜¯å·¥ç¨‹å®è·µã€‚ä½†æ˜¯ä¸Šæ–‡ä¸­çš„æ–¹æ³•æ˜¯æ¯”è¾ƒæ™®éçš„ï¼Œå¸Œæœ›å¯ä»¥ç»™å¤§å®¶ä¸€äº›å¸®åŠ©å’Œå¯å‘ã€‚ ä¸‹ä¸€ç¯‡æˆ‘ä»¬è®¨è®ºç‰¹å¾é¢„å¤„ç†å’Œåˆ†ç±»ç±»åˆ«ä¸å¹³è¡¡çš„é—®é¢˜å¤„ç†ã€‚&lt;/p&gt;

&lt;p&gt;ï¼ˆæ¬¢è¿è½¬è½½ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚æ¬¢è¿æ²Ÿé€šäº¤æµï¼š liujianping-ok@163.comï¼‰Â Â  Â  Â ã€€ã€€ã€€ã€€ã€€ã€€ã€€&lt;/p&gt;
</description>
<pubDate>Sat, 19 May 2018 14:39:00 +0000</pubDate>
<dc:creator>åˆ˜å»ºå¹³Pinard</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/pinard/p/9061549.html</dc:identifier>
</item>
<item>
<title>springMVCå¼•å…¥Validationè¯¦è§£ - å€’éª‘çš„é©´</title>
<link>http://www.cnblogs.com/daoqidelv/p/9061862.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/daoqidelv/p/9061862.html</guid>
<description>&lt;p&gt;æœ¬æ–‡ç®€å•ä»‹ç»å¦‚ä½•å¼•å…¥validationçš„æ­¥éª¤ï¼Œå¦‚ä½•é€šè¿‡è‡ªå®šä¹‰validationå‡å°‘ä»£ç é‡ï¼Œæé«˜ç”Ÿäº§åŠ›ã€‚ç‰¹åˆ«æåŠï¼šéåŸºæœ¬ç±»å‹å±æ€§çš„validï¼ŒGETæ–¹æ³•çš„å¤„ç†ï¼Œvalidationé”™è¯¯ä¿¡æ¯çš„ç»Ÿä¸€resolveã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä¸­validationçš„å®é™…å®ç°å§”æ‰˜ç»™Hibernate validationå¤„ç†&lt;/p&gt;
&lt;h2&gt;åŸºæœ¬é…ç½®&lt;/h2&gt;
&lt;h3&gt;pomå¼•å…¥mavenä¾èµ–&lt;/h3&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;pre&gt;
&amp;lt;!-- validation begin --&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;javax.validation&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;validation-api&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;1.1.0.Final&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.hibernate&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;hibernate-validator&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;5.4.0.Final&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;
&amp;lt;!-- validation end --&amp;gt;
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;h3&gt;å¢åŠ validationé…ç½®&lt;/h3&gt;
&lt;p&gt;åœ¨spring-mvc-servlet.xmlä¸­å¢åŠ å¦‚ä¸‹é…ç½®:&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;pre&gt;
&amp;lt;mvc:annotation-driven validator=&quot;validator&quot;&amp;gt;

&amp;lt;bean id=&quot;validator&quot; class=&quot;org.springframework.validation.beanvalidation.LocalValidatorFactoryBean&quot;&amp;gt;
    &amp;lt;property name=&quot;providerClass&quot; value=&quot;org.hibernate.validator.HibernateValidator&quot; /&amp;gt;
    &amp;lt;property name=&quot;validationMessageSource&quot; ref=&quot;messageSource&quot;/&amp;gt;
&amp;lt;/bean&amp;gt;
 
//messageSource ä¸ºi18nèµ„æºç®¡ç†beanï¼Œè§applicationContext.xmlé…ç½®
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;h3&gt;è‡ªå®šä¹‰exceptionHandler&lt;/h3&gt;
&lt;p&gt;&lt;span&gt;ä¸ªæ€§åŒ–å¤„ç†validationé”™è¯¯ä¿¡æ¯,è¿”å›ç»™è°ƒç”¨æ–¹çš„ä¿¡æ¯æ›´åŠ å‹å¥½ï¼Œ&lt;/span&gt;åœ¨applicationContext.xmlä¸­å¢åŠ å¦‚ä¸‹é…ç½®:&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;pre&gt;
&amp;lt;!--  åŠ è½½i18næ¶ˆæ¯èµ„æºæ–‡ä»¶ --&amp;gt;
&amp;lt;bean id=&quot;messageSource&quot;  class=&quot;org.springframework.context.support.ResourceBundleMessageSource&quot;&amp;gt;
    &amp;lt;property name=&quot;basenames&quot;&amp;gt;
        &amp;lt;list&amp;gt;
            &amp;lt;value&amp;gt;errormsg&amp;lt;/value&amp;gt;
            &amp;lt;value&amp;gt;validation_error&amp;lt;/value&amp;gt;
        &amp;lt;/list&amp;gt;
    &amp;lt;/property&amp;gt;
&amp;lt;/bean&amp;gt;

&amp;lt;bean id=&quot;validationExceptionResolver&quot; class=&quot;com.*.exception.ValidationExceptionResovler&quot;/&amp;gt;
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt;åœ¨é¡¹ç›®ç±»è·¯å¾„ä¸Šå¢åŠ ï¼švalidation_error_zh_CN.propertiesèµ„æºæ–‡ä»¶ï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;pre&gt;
#the error msg for input validation&lt;br/&gt;#common
field.can.not.be.null={field}ä¸èƒ½ä¸ºç©º
field.can.not.be.empty={field}ä¸èƒ½ä¸ºç©ºæˆ–è€…ç©ºå­—ç¬¦ä¸²
field.must.be.greater.than.min={field}ä¸èƒ½å°äº{value}
field.must.be.letter.than.max={field}ä¸èƒ½å¤§äº{value}
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;pre&gt;
ValidationExceptionResovlerå®ç°ï¼š
&lt;/pre&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('3509fe04-5f91-4052-adff-c5c04af82686')&quot; readability=&quot;41.5&quot;&gt;&lt;img id=&quot;code_img_closed_3509fe04-5f91-4052-adff-c5c04af82686&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_3509fe04-5f91-4052-adff-c5c04af82686&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('3509fe04-5f91-4052-adff-c5c04af82686',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_3509fe04-5f91-4052-adff-c5c04af82686&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;78&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;@Slf4j
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; ValidationExceptionResovler &lt;span&gt;extends&lt;/span&gt;&lt;span&gt; AbstractHandlerExceptionResolver {
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt;&lt;span&gt; ValidationExceptionResovler() {
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; è®¾ç½®orderï¼Œåœ¨DefaultHandlerExceptionResolverä¹‹å‰æ‰§è¡Œ&lt;/span&gt;
&lt;span&gt; 5&lt;/span&gt;         &lt;span&gt;this&lt;/span&gt;.setOrder(0&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt; 
&lt;span&gt; 8&lt;/span&gt;     &lt;span&gt;/**&lt;/span&gt;
&lt;span&gt; 9&lt;/span&gt; &lt;span&gt;     * Handle the case where an argument annotated with {&lt;/span&gt;&lt;span&gt;@code&lt;/span&gt;&lt;span&gt; @Valid} such as
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt; &lt;span&gt;     * an {&lt;/span&gt;&lt;span&gt;@link&lt;/span&gt;&lt;span&gt; } or {&lt;/span&gt;&lt;span&gt;@link&lt;/span&gt;&lt;span&gt; } argument fails validation.
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt; &lt;span&gt;     * &amp;lt;p&amp;gt;
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt; &lt;span&gt;     * è‡ªå®šä¹‰ValidationException å¼‚å¸¸å¤„ç†å™¨
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt; &lt;span&gt;     * è·å–åˆ°å…·ä½“çš„validation é”™è¯¯ä¿¡æ¯ï¼Œå¹¶ç»„è£…CommonResponseï¼Œè¿”å›ç»™è°ƒç”¨æ–¹ã€‚
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt; &lt;span&gt;     *
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt; &lt;span&gt;     * &lt;/span&gt;&lt;span&gt;@param&lt;/span&gt;&lt;span&gt; request  current HTTP request
&lt;/span&gt;&lt;span&gt;16&lt;/span&gt; &lt;span&gt;     * &lt;/span&gt;&lt;span&gt;@param&lt;/span&gt;&lt;span&gt; response current HTTP response
&lt;/span&gt;&lt;span&gt;17&lt;/span&gt; &lt;span&gt;     * &lt;/span&gt;&lt;span&gt;@param&lt;/span&gt;&lt;span&gt; handler  the executed handler
&lt;/span&gt;&lt;span&gt;18&lt;/span&gt; &lt;span&gt;     * &lt;/span&gt;&lt;span&gt;@return&lt;/span&gt;&lt;span&gt; an empty ModelAndView indicating the exception was handled
&lt;/span&gt;&lt;span&gt;19&lt;/span&gt; &lt;span&gt;     * &lt;/span&gt;&lt;span&gt;@throws&lt;/span&gt;&lt;span&gt; IOException potentially thrown from response.sendError()
&lt;/span&gt;&lt;span&gt;20&lt;/span&gt;      &lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;21&lt;/span&gt; &lt;span&gt;    @ResponseBody
&lt;/span&gt;&lt;span&gt;22&lt;/span&gt;     &lt;span&gt;protected&lt;/span&gt;&lt;span&gt; ModelAndView handleMethodArgumentNotValidException(BindingResult bindingResult,
&lt;/span&gt;&lt;span&gt;23&lt;/span&gt; &lt;span&gt;                                                                 HttpServletRequest request,
&lt;/span&gt;&lt;span&gt;24&lt;/span&gt; &lt;span&gt;                                                                 HttpServletResponse response,
&lt;/span&gt;&lt;span&gt;25&lt;/span&gt; &lt;span&gt;                                                                 Object handler)
&lt;/span&gt;&lt;span&gt;26&lt;/span&gt;             &lt;span&gt;throws&lt;/span&gt;&lt;span&gt; IOException {
&lt;/span&gt;&lt;span&gt;27&lt;/span&gt; 
&lt;span&gt;28&lt;/span&gt;         List&amp;lt;ObjectError&amp;gt; errors =&lt;span&gt; bindingResult.getAllErrors();
&lt;/span&gt;&lt;span&gt;29&lt;/span&gt;         StringBuffer errmsgBF = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; StringBuffer();
&lt;/span&gt;&lt;span&gt;30&lt;/span&gt;         &lt;span&gt;for&lt;/span&gt;&lt;span&gt; (ObjectError error : errors) {
&lt;/span&gt;&lt;span&gt;31&lt;/span&gt;             String massage =&lt;span&gt; error.getDefaultMessage();
&lt;/span&gt;&lt;span&gt;32&lt;/span&gt; &lt;span&gt;            errmsgBF.append(massage);
&lt;/span&gt;&lt;span&gt;33&lt;/span&gt;             errmsgBF.append(&quot;||&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;34&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;35&lt;/span&gt;         String errmsgString =&lt;span&gt; errmsgBF.toString();
&lt;/span&gt;&lt;span&gt;36&lt;/span&gt;         errmsgString = errmsgString.length() &amp;gt; 2 ? errmsgString.substring(0, errmsgString.length() - 2&lt;span&gt;) : errmsgString;
&lt;/span&gt;&lt;span&gt;37&lt;/span&gt;         log.error(&quot;Validation failed! {} &quot;&lt;span&gt;, errmsgString);
&lt;/span&gt;&lt;span&gt;38&lt;/span&gt; 
&lt;span&gt;39&lt;/span&gt;         Map&amp;lt;String, Object&amp;gt; map = &lt;span&gt;new&lt;/span&gt; TreeMap&amp;lt;String, Object&amp;gt;&lt;span&gt;();
&lt;/span&gt;&lt;span&gt;40&lt;/span&gt;         map.put(&quot;success&quot;, &lt;span&gt;false&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;41&lt;/span&gt;         map.put(&quot;errorCode&quot;, &quot;9999&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;42&lt;/span&gt;         map.put(&quot;errorMsg&quot;&lt;span&gt;, errmsgString);
&lt;/span&gt;&lt;span&gt;43&lt;/span&gt; 
&lt;span&gt;44&lt;/span&gt;         ModelAndView mav = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; ModelAndView();
&lt;/span&gt;&lt;span&gt;45&lt;/span&gt;         MappingJackson2JsonView view = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; MappingJackson2JsonView();
&lt;/span&gt;&lt;span&gt;46&lt;/span&gt; &lt;span&gt;        view.setAttributesMap(map);
&lt;/span&gt;&lt;span&gt;47&lt;/span&gt; &lt;span&gt;        mav.setView(view);
&lt;/span&gt;&lt;span&gt;48&lt;/span&gt; 
&lt;span&gt;49&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; mav;
&lt;/span&gt;&lt;span&gt;50&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;51&lt;/span&gt; 
&lt;span&gt;52&lt;/span&gt; &lt;span&gt;    @Override
&lt;/span&gt;&lt;span&gt;53&lt;/span&gt;     &lt;span&gt;protected&lt;/span&gt;&lt;span&gt; ModelAndView doResolveException(HttpServletRequest request,
&lt;/span&gt;&lt;span&gt;54&lt;/span&gt; &lt;span&gt;                                              HttpServletResponse response, Object handler,
&lt;/span&gt;&lt;span&gt;55&lt;/span&gt; &lt;span&gt;                                              Exception ex) {
&lt;/span&gt;&lt;span&gt;56&lt;/span&gt;         BindingResult bindingResult = &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;57&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (ex &lt;span&gt;instanceof&lt;/span&gt;&lt;span&gt; MethodArgumentNotValidException) {
&lt;/span&gt;&lt;span&gt;58&lt;/span&gt;             bindingResult =&lt;span&gt; ((MethodArgumentNotValidException) ex).getBindingResult();
&lt;/span&gt;&lt;span&gt;59&lt;/span&gt;         } &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt;(ex &lt;span&gt;instanceof&lt;/span&gt;&lt;span&gt; BindException) {
&lt;/span&gt;&lt;span&gt;60&lt;/span&gt;             bindingResult =&lt;span&gt; ((BindException) ex).getBindingResult();
&lt;/span&gt;&lt;span&gt;61&lt;/span&gt;         } &lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
&lt;/span&gt;&lt;span&gt;62&lt;/span&gt;             &lt;span&gt;//&lt;/span&gt;&lt;span&gt;other exception , ignore&lt;/span&gt;
&lt;span&gt;63&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;64&lt;/span&gt; 
&lt;span&gt;65&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt;(bindingResult != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
&lt;/span&gt;&lt;span&gt;66&lt;/span&gt;             &lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
&lt;/span&gt;&lt;span&gt;67&lt;/span&gt;                 &lt;span&gt;return&lt;/span&gt;&lt;span&gt; handleMethodArgumentNotValidException(bindingResult, request, response, handler);
&lt;/span&gt;&lt;span&gt;68&lt;/span&gt;             } &lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (IOException e) {
&lt;/span&gt;&lt;span&gt;69&lt;/span&gt;                 log.error(&quot;doResolveException: &quot;&lt;span&gt;, e);
&lt;/span&gt;&lt;span&gt;70&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;71&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;72&lt;/span&gt; 
&lt;span&gt;73&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;74&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;75&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;ValidationExceptionResovler.java&lt;/span&gt;&lt;/div&gt;
&lt;h3&gt;åœ¨controllerä¸­å¢åŠ @Valid&lt;/h3&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
@RequestMapping(&quot;/buy&quot;&lt;span&gt;)
@ResponseBody
&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; BaseResponse buy(@RequestBody @Valid BuyFlowerRequest request) &lt;span&gt;throws&lt;/span&gt;&lt;span&gt; Exception {
  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;......&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;åœ¨request beanä¸Šä¸ºéœ€è¦validationçš„å±æ€§å¢åŠ validationæ³¨è§£&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
@Setter
@Getter
public class BuyFlowerRequest {

    @NotEmpty(message = &quot;{name.can.not.be.null}&quot;) &lt;br/&gt;private String name;&lt;br/&gt;} 
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;äºŒçº§å¯¹è±¡çš„validation&lt;/h2&gt;
&lt;p&gt;ä¸Šé¢çš„å†™æ³•ï¼Œåªèƒ½å¯¹BuyFlowerRequeståœ¨åŸºæœ¬ç±»å‹å±æ€§ä¸Šåšæ ¡éªŒ,ä½†æ˜¯æ²¡æœ‰åŠæ³•å¯¹å¯¹è±¡å±æ€§çš„å±æ€§è¿›è¡Œvalidation,å¦‚æœéœ€è¦å¯¹äºŒçº§å¯¹è±¡çš„å±æ€§è¿›è¡Œvalidation,åˆ™éœ€è¦åœ¨äºŒçº§å¯¹è±¡åŠäºŒçº§å¯¹è±¡å±æ€§ä¸ŠåŒæ—¶æ·»åŠ @Valid å’Œ å…·ä½“çš„validationæ³¨è§£.&lt;/p&gt;
&lt;p&gt;å¦‚ä¸‹å†™æ³•:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('1c8117cd-a740-45d8-a9d5-ed51c288afdb')&quot; readability=&quot;33&quot;&gt;&lt;img id=&quot;code_img_closed_1c8117cd-a740-45d8-a9d5-ed51c288afdb&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_1c8117cd-a740-45d8-a9d5-ed51c288afdb&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('1c8117cd-a740-45d8-a9d5-ed51c288afdb',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_1c8117cd-a740-45d8-a9d5-ed51c288afdb&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;61&quot;&gt;
&lt;pre&gt;
&lt;span&gt;@Setter
@Getter
&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; BuyFlowerRequest {

    @NotEmpty(field &lt;/span&gt;= &quot;èŠ±å&quot;&lt;span&gt;)
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; String name;

    @Min(field &lt;/span&gt;= &quot;ä»·æ ¼&quot;, value = 1&lt;span&gt;)
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; price;

    @NotNull
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; List&amp;lt;PayType&amp;gt;&lt;span&gt; payTypeList;

} 

@Setter
@Getter
&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; PayType {

    @Valid
    @Min(value &lt;/span&gt;= 1&lt;span&gt;)
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; payType;

    @Valid
    @Min(value &lt;/span&gt;= 1&lt;span&gt;)
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; payAmount;

}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;Â &lt;/div&gt;
&lt;h2&gt;è¿›ä¸€æ­¥å‡å°‘ç¼–ç é‡&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;ä¸ºäº†å‡å°‘ç¼–ç å·¥ä½œé‡,é€šè¿‡è‡ªå®šä¹‰Validationæ³¨è§£,å°è¯•å°†validationä½œç”¨çš„filedåç§°ä¼ é€’åˆ° é”™è¯¯ä¿¡æ¯çš„èµ„æºæ–‡ä»¶ä¸­,ä»è€Œé¿å…ä¸ºæ¯ä¸ªåŸŸç¼–å†™ä¸åŒçš„messageæ¨¡ç‰ˆ.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ä¸‹é¢ä»¥é‡å†™çš„@NotNullä¸ºä¾‹è®²è§£:&lt;/p&gt;
&lt;p&gt;1ã€å®šä¹‰Validationæ³¨è§£,æ³¨æ„ç›¸æ¯”åŸç”Ÿæ³¨è§£å¢åŠ äº†field(),ç”¨äºä¼ é€’è¢«validatedçš„filedåå­—&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('26503447-25f3-4ea6-9690-8c3da66a5ee5')&quot; readability=&quot;34.5&quot;&gt;&lt;img id=&quot;code_img_closed_26503447-25f3-4ea6-9690-8c3da66a5ee5&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_26503447-25f3-4ea6-9690-8c3da66a5ee5&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('26503447-25f3-4ea6-9690-8c3da66a5ee5',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_26503447-25f3-4ea6-9690-8c3da66a5ee5&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;64&quot;&gt;
&lt;pre&gt;
&lt;span&gt;@Target( { ElementType.METHOD, ElementType.FIELD, ElementType.ANNOTATION_TYPE, ElementType.CONSTRUCTOR, ElementType.PARAMETER })
@Constraint(validatedBy &lt;/span&gt;= { NotNullValidator.&lt;span&gt;class&lt;/span&gt;&lt;span&gt; })
@Retention(RetentionPolicy.RUNTIME)
&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; @&lt;span&gt;interface&lt;/span&gt;&lt;span&gt; NotNull {

    String field() &lt;/span&gt;&lt;span&gt;default&lt;/span&gt; &quot;&quot;&lt;span&gt;;

    String message() &lt;/span&gt;&lt;span&gt;default&lt;/span&gt; &quot;{field.can.not.be.null}&quot;&lt;span&gt;;

    Class&lt;/span&gt;&amp;lt;?&amp;gt;[] groups() &lt;span&gt;default&lt;/span&gt;&lt;span&gt; {};

    Class&lt;/span&gt;&amp;lt;? &lt;span&gt;extends&lt;/span&gt; Payload&amp;gt;[] payload() &lt;span&gt;default&lt;/span&gt;&lt;span&gt; {};
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;NotNull.java&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;2ã€å®šä¹‰Validator,æ‰€æœ‰çš„Validatorå‡å®ç°ConstraintValidatoræ¥å£:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('8652f8e4-81e7-4a3c-af44-907316e83127')&quot; readability=&quot;33&quot;&gt;&lt;img id=&quot;code_img_closed_8652f8e4-81e7-4a3c-af44-907316e83127&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_8652f8e4-81e7-4a3c-af44-907316e83127&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('8652f8e4-81e7-4a3c-af44-907316e83127',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_8652f8e4-81e7-4a3c-af44-907316e83127&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;61&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; NotNullValidator &lt;span&gt;implements&lt;/span&gt; ConstraintValidator&amp;lt;NotNull, Object&amp;gt;&lt;span&gt; {
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; 
&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;    @Override
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; initialize(NotNull annotation) {
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt; 
&lt;span&gt; 6&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt; 
&lt;span&gt; 8&lt;/span&gt; &lt;span&gt;    @Override
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;boolean&lt;/span&gt;&lt;span&gt; isValid(Object str, ConstraintValidatorContext constraintValidatorContext) {
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; str != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt; 
&lt;span&gt;13&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;NotNullValidator.java&lt;/span&gt;&lt;/div&gt;

&lt;p&gt;3ã€åœ¨filedä¸ŠåŠ å…¥Validationæ³¨è§£,æ³¨æ„æŒ‡å®šfiledå€¼,messageå¦‚æœæ²¡æœ‰ä¸ªæ€§åŒ–éœ€æ±‚ï¼Œå¯ä»¥ä¸ç”¨æŒ‡æ˜ï¼Œvalidationç»„ä»¶ä¼šè‡ªè¡Œå¡«å……default messageã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('8e46a364-07c2-4ba9-b142-54956c4ec3c0')&quot; readability=&quot;32&quot;&gt;&lt;img id=&quot;code_img_closed_8e46a364-07c2-4ba9-b142-54956c4ec3c0&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_8e46a364-07c2-4ba9-b142-54956c4ec3c0&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('8e46a364-07c2-4ba9-b142-54956c4ec3c0',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_8e46a364-07c2-4ba9-b142-54956c4ec3c0&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;59&quot;&gt;
&lt;pre&gt;
&lt;span&gt;@Setter
@Getter
&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; BuyFlowerRequest {

    @NotEmpty(field &lt;/span&gt;= &quot;èŠ±å&quot;&lt;span&gt;)
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; String name;

    @Min(field &lt;/span&gt;= &quot;ä»·æ ¼&quot;, value = 1&lt;span&gt;)
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; price;

} &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;BuyFlowerRequest.java&lt;/span&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;æ³¨ï¼š@NotNullæ³¨è§£å·²ç»æ”¯æŒå¯¹listçš„ç‰¹æ®Šæ ¡éªŒï¼Œå¯¹äºListç±»å‹èŠ‚ç‚¹ï¼Œå¦‚æœlist==null || list.size() == 0éƒ½ä¼šè¿”å›falseï¼Œvalidationå¤±è´¥ã€‚ç›®å‰å·²æŒ‰ç…§æ­¤æ€è·¯è‡ªå®šä¹‰å®ç°äº†@NotNullã€@NotEmptyã€@Minã€@Maxæ³¨è§£,åœ¨goodså·¥ç¨‹ä¸­å¯ä»¥æ‰¾åˆ°.&lt;/p&gt;
&lt;h2&gt;æ”¯æŒGETè¯·æ±‚&lt;/h2&gt;
&lt;p&gt;ä¸Šé¢çš„ç¤ºä¾‹éƒ½æ˜¯POSTè¯·æ±‚ï¼Œ@RequestBodyå¯ä»¥ resolve POSTè¯·æ±‚ï¼Œä½†æ˜¯ä¸æ”¯æŒGETè¯·æ±‚ï¼Œé˜…è¯»springçš„æ–‡æ¡£å’Œæºç ï¼Œå‘ç°@ModelAttributeå¯ä»¥å°†GETè¯·æ±‚resolveæˆBeanï¼Œä¸”æ”¯æŒValidationã€‚å…·ä½“å¯ä»¥ç¿»é˜…springæºç ï¼šModelAttributeMethodProcessor.resolveArgument()æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('e5f849b2-cdcf-4609-9bc5-001e89d35f82')&quot; readability=&quot;33.5&quot;&gt;&lt;img id=&quot;code_img_closed_e5f849b2-cdcf-4609-9bc5-001e89d35f82&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_e5f849b2-cdcf-4609-9bc5-001e89d35f82&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('e5f849b2-cdcf-4609-9bc5-001e89d35f82',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_e5f849b2-cdcf-4609-9bc5-001e89d35f82&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;62&quot;&gt;
&lt;pre&gt;
@RequestMapping(value = &quot;/buy&quot;, method =&lt;span&gt; RequestMethod.GET)
@ResponseBody
&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; BaseResponse detail(@Valid @ModelAttribute DetailFlowerRequest request) &lt;span&gt;throws&lt;/span&gt;&lt;span&gt; Exception {

    DetailFlowerResponse response &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; DetailFlowerResponse();
    response.setName(request.getName());

    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; ResultFactory.success(response, BaseResponse.&lt;span&gt;class&lt;/span&gt;&lt;span&gt;);
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;
&lt;h2&gt;TODO&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;1ã€æ ¹æ®ä¸šåŠ¡åœºæ™¯æ‰©å±•validation,å¦‚:æ—¥æœŸæ ¼å¼ã€é‡‘é¢ç­‰&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;2ã€æ”¯æŒå¤šä¸ªfieldå…³ç³»æ ¡éªŒçš„validation&lt;/p&gt;
&lt;h2&gt;Â é™„ï¼šspring validationå®ç°å…³é”®ä»£ç &lt;/h2&gt;
&lt;p&gt;@RequestBody&lt;/p&gt;
&lt;p&gt;å®ç°ç±»ï¼šRequestResponseBodyMethodProcessor.java&lt;/p&gt;
&lt;blockquote readability=&quot;21&quot;&gt;
&lt;pre readability=&quot;7&quot;&gt;
public Object resolveArgument(MethodParameter parameter, ModelAndViewContainer mavContainer, NativeWebRequest webRequest, WebDataBinderFactory binderFactory) throws Exception {&lt;br/&gt;Object arg = this.readWithMessageConverters(webRequest, parameter, parameter.getGenericParameterType());&lt;br/&gt;String name = Conventions.getVariableNameForParameter(parameter);&lt;br/&gt;WebDataBinder binder = binderFactory.createBinder(webRequest, arg, name);&lt;br/&gt;if (arg != null) {&lt;br/&gt;&lt;strong&gt;this.validateIfApplicable(binder, parameter);&lt;/strong&gt;&lt;br/&gt;if (binder.getBindingResult().hasErrors() &amp;amp;&amp;amp; this.isBindExceptionRequired(binder, parameter)) {&lt;br/&gt;throw new MethodArgumentNotValidException(parameter, binder.getBindingResult());&lt;br/&gt;}&lt;br/&gt;}&lt;p&gt;mavContainer.addAttribute(BindingResult.MODEL_KEY_PREFIX + name, binder.getBindingResult());&lt;br/&gt;return arg;&lt;br/&gt;}
&lt;/p&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt;@ModelAttibute&lt;/p&gt;
&lt;p&gt;å®ç°ç±»ï¼šModelAttributeMethodProcessor.java&lt;/p&gt;
&lt;blockquote readability=&quot;31.5&quot;&gt;
&lt;pre readability=&quot;22&quot;&gt;
public final Object resolveArgument(MethodParameter parameter, ModelAndViewContainer mavContainer, NativeWebRequest webRequest, WebDataBinderFactory binderFactory) throws Exception {&lt;br/&gt;String name = ModelFactory.getNameForParameter(parameter);&lt;br/&gt;Object attribute = mavContainer.containsAttribute(name) ? mavContainer.getModel().get(name) : this.createAttribute(name, parameter, binderFactory, webRequest);&lt;br/&gt;if (!mavContainer.isBindingDisabled(name)) {&lt;br/&gt;ModelAttribute ann = (ModelAttribute)parameter.getParameterAnnotation(ModelAttribute.class);&lt;br/&gt;if (ann != null &amp;amp;&amp;amp; !ann.binding()) {&lt;br/&gt;mavContainer.setBindingDisabled(name);&lt;br/&gt;}&lt;br/&gt;}&lt;p&gt;WebDataBinder binder = binderFactory.createBinder(webRequest, attribute, name);&lt;br/&gt;if (binder.getTarget() != null) {&lt;br/&gt;if (!mavContainer.isBindingDisabled(name)) {&lt;br/&gt;this.bindRequestParameters(binder, webRequest);&lt;br/&gt;}&lt;/p&gt;&lt;p&gt;&lt;strong&gt; this.validateIfApplicable(binder, parameter);&lt;/strong&gt;&lt;br/&gt;if (binder.getBindingResult().hasErrors() &amp;amp;&amp;amp; this.isBindExceptionRequired(binder, parameter)) {&lt;br/&gt;throw new BindException(binder.getBindingResult());&lt;br/&gt;}&lt;br/&gt;}&lt;/p&gt;&lt;p&gt;Map&amp;lt;String, Object&amp;gt; bindingResultModel = binder.getBindingResult().getModel();&lt;br/&gt;mavContainer.removeAttributes(bindingResultModel);&lt;br/&gt;mavContainer.addAllAttributes(bindingResultModel);&lt;br/&gt;return binder.convertIfNecessary(binder.getTarget(), parameter.getParameterType(), parameter);&lt;br/&gt;}
&lt;/p&gt;&lt;/pre&gt;&lt;/blockquote&gt;

</description>
<pubDate>Sat, 19 May 2018 14:33:00 +0000</pubDate>
<dc:creator>å€’éª‘çš„é©´</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/daoqidelv/p/9061862.html</dc:identifier>
</item>
<item>
<title>ä¸€æ¬¡æ•°ç»„è¶Šç•Œçš„bugç»å† - Andrew_qian</title>
<link>http://www.cnblogs.com/qsyll0916/p/9061841.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/qsyll0916/p/9061841.html</guid>
<description>&lt;p&gt;æ•°ç»„å’ŒæŒ‡é’ˆéƒ½æ˜¯Cé‡Œé¢çš„å¥½ä¸œè¥¿ï¼Œä½†æ˜¯ä¸€æ—¦ä½¿ç”¨ä¸å½“ï¼ŒçœŸçš„ä¼šè®©äººæŠ“ç‹‚ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯å†™ç¨‹åºæ—¶é‡åˆ°çš„ä¸€æ¬¡æ•°ç»„è¶Šç•Œçš„ç»å†ï¼Œæ„Ÿè§‰å¯¹ä»¥åå†™ç¨‹åºæœ‰ç‚¹å¯å‘ï¼Œæ‰€ä»¥è®°å½•ä¸‹æ¥ã€‚&lt;/p&gt;

&lt;h2&gt;èµ·å› ï¼š&lt;/h2&gt;
&lt;p&gt;æˆ‘æƒ³ç”¨OLEDåŠ¨æ€æ˜¾ç¤ºä¸€ç»„æµ®ç‚¹æ•°ï¼Œè€Œä¸”æµ®ç‚¹æ•°çš„é•¿åº¦æ˜¯ä¸å®šçš„ã€‚&lt;/p&gt;
&lt;h3&gt;1ã€å¦‚æœåªæ˜¯å•çº¯çš„æ˜¾ç¤ºï¼Œæ²¡æœ‰æ¶ˆéšçš„è¯ï¼Œä¸Šä¸€æ¬¡çš„é•¿æ•°çš„æ®æ®‹ç•™ä¼šå½±å“ä¸‹ä¸€æ¬¡çŸ­é•¿åº¦æ•°æ®çš„æ˜¾ç¤ºã€‚&lt;/h3&gt;
&lt;h3&gt;2ã€å¦‚æœæ˜¾ç¤ºä¸€æ¬¡å°±æ¸…ç©ºä¸€æ¬¡æ˜¾ç¤ºåŒºåŸŸçš„è¯ï¼Œæ•°æ®ä¼šä¸€ç›´æŠ–åŠ¨ï¼Œä¸€å¼€å§‹ä»¥ä¸ºæ˜¯æˆ‘åˆ·æ–°é¢‘ç‡ä¸å¤Ÿï¼Œæ•…æŠŠåˆ·æ–°é¢‘ç‡ç”±100HZæ”¹ä¸º1000HZï¼Œä½†æ˜¯æ•ˆæœè¿˜æ˜¯å’Œä¹‹å‰ä¸€æ ·ï¼&lt;/h3&gt;
&lt;h3&gt;åæ¥æƒ³æƒ³ä¹Ÿæ˜¯ï¼Œä¸ç®¡æˆ‘æŠŠåˆ·æ–°é¢‘ç‡æ”¹ä¸ºå¤šå°‘ï¼Œæ¸…ç©ºåçš„ç©ºç™½å’Œæ˜¾ç¤ºçš„æ•°æ®éƒ½æ˜¯ç›¸åŒçš„é¢‘ç‡ã€‚1000hzæ˜¾ç¤ºæ•°æ®ï¼Œé‚£ä¹ˆä¹Ÿæ˜¯1000hzçš„ç©ºç™½ã€‚æ‰€ä»¥ä¼šæŠ–åŠ¨ä¸¥é‡ã€‚&lt;/h3&gt;
&lt;h3&gt;3ã€æŠŠæ•°æ®çš„æ¯ä¸€ä½éƒ½å–å‡ºæ¥å•ç‹¬æ˜¾ç¤ºï¼Œä½†æ˜¯è¿™æ ·å°±åˆå¸¦æ¥äº†æ•°æ®å¯¹é½çš„é—®é¢˜ã€‚ä¸çˆ½ï¼Œä¸å¥½çœ‹ï¼Œå¼ƒä¹‹ã€‚&lt;/h3&gt;
&lt;h3&gt;4ã€ä½¿ç”¨sprintfæ ¼å¼åŒ–éœ€è¦æ˜¾ç¤ºçš„æ•°æ®ä¸ºå­—ç¬¦ä¸²ã€‚ç„¶åç”¨OLEDçš„æ˜¾ç¤ºå­—ç¬¦ä¸²çš„æ–¹å¼æ˜¾ç¤ºã€‚&lt;/h3&gt;

&lt;p&gt;äºæ˜¯æœ‰äº†ä¸‹é¢è¿™æ ·çš„ç¨‹åºï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;42&quot;&gt;
&lt;pre&gt;
    sprintf((&lt;span&gt;char&lt;/span&gt; *)weight_string,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;%.1f&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,weight);        &lt;span&gt;//&lt;/span&gt;&lt;span&gt;æ ¼å¼åŒ–ä¸ºå­—ç¬¦ä¸²&lt;/span&gt;
    Clear_Left_Num(money_string);                                &lt;span&gt;//&lt;/span&gt;&lt;span&gt;æ¶ˆé™¤æ®‹ä½™&lt;/span&gt;
    OLED_Show_String(&lt;span&gt;42&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;&lt;span&gt;,weight_string);

    sprintf((&lt;/span&gt;&lt;span&gt;char&lt;/span&gt; *)price_string,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;%d&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,price);
    Clear_Left_Num(money_string);
    OLED_Show_String(&lt;/span&gt;&lt;span&gt;42&lt;/span&gt;,&lt;span&gt;4&lt;/span&gt;,price_string);
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™æ®µç¨‹åºåœ¨å®šæ—¶å™¨ä¸­æ–­å‡½æ•°ä¸­è°ƒç”¨ã€‚weightÂ å’ŒÂ priceÂ å°±æ˜¯æˆ‘æƒ³æ˜¾ç¤ºçš„æµ®ç‚¹æ•°ã€‚&lt;/p&gt;
&lt;p&gt;å…ˆæ ¼å¼åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åæ˜¾ç¤ºã€‚OLED_Show_String()Â çš„å‰ä¸¤ä¸ªå‚æ•°æ˜¯å­—ç¬¦çš„èµ·å§‹æ˜¾ç¤ºåæ ‡ã€‚&lt;/p&gt;
&lt;p&gt;Clear_Left_NumÂ å‡½æ•°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;void&lt;/span&gt; Clear_Left_Num(unsigned &lt;span&gt;char&lt;/span&gt; *&lt;span&gt;num_string)
{
    &lt;/span&gt;&lt;span&gt;while&lt;/span&gt;(*num_string != &lt;span&gt;'&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
        num_string&lt;/span&gt;++&lt;span&gt;;
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;ä¸€ä½å°æ•°ç‚¹åé¢çš„æ•°æ®ç”¨ç©ºæ ¼åˆ·æ–°&lt;/span&gt;
    *(num_string+&lt;span&gt;2&lt;/span&gt;) = &lt;span&gt;'&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
    &lt;/span&gt;*(num_string+&lt;span&gt;3&lt;/span&gt;) = &lt;span&gt;'&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
    &lt;/span&gt;*(num_string+&lt;span&gt;4&lt;/span&gt;) = &lt;span&gt;'&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;æ€è·¯å°±æ˜¯æŠŠå°æ•°ç‚¹åä¸€ä½åé¢çš„æ®‹ä½™æ•°æ®ç”¨ç©ºæ ¼åˆ·æ–°ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯å®éªŒç°è±¡æ˜¯åœ¨æ˜¾ç¤ºå®Œç¬¬ä¸€è¡Œæ•°æ®ä¹‹åï¼Œæœ¬æ¥åº”è¯¥åœ¨ç¬¬äºŒè¡Œæ˜¾ç¤ºç¬¬äºŒä¸ªæ•°æ®ï¼Œä½†æ˜¯ä»– åœ¨ç¬¬ä¸€è¡Œæ•°æ®çš„åé¢åˆæ˜¾ç¤ºäº†ç¬¬äºŒè¡Œçš„æ•°æ®ï¼ï¼ä¹Ÿå°±æ˜¯è¯´ç¬¬äºŒè¡Œæ•°æ®æ˜¾ç¤ºäº†ä¸¤æ¬¡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆä¼šæ˜¾ç¤ºä¸¤æ¬¡å‘¢ï¼Ÿæˆ‘ç¨‹åºä¸­å°±å†™äº†ä¸€æ¬¡å•Šã€ã€ã€&lt;/p&gt;

&lt;h2&gt;åˆ†æï¼š&lt;/h2&gt;
&lt;p&gt;æ—¢ç„¶æ˜¯æ˜¾ç¤ºçš„é—®é¢˜ï¼Œé‚£å°±å…ˆçœ‹çœ‹è¿™ä¸ªæ˜¾ç¤ºå‡½æ•°ï¼&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;40&quot;&gt;
&lt;pre&gt;
&lt;span&gt;/*&lt;/span&gt;&lt;span&gt;----------------------------------
**å‡½æ•°åç§°ï¼šOLED_Show_String
**åŠŸèƒ½æè¿°ï¼šå…‰æ ‡å¤„æ˜¾ç¤ºå­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²å¯ä»¥ç”¨æ•°ç»„è¡¨ç¤ºï¼Œunsigned char string_2[] = {&quot;THIS IS A TEST  &quot;};
**å‚æ•°è¯´æ˜ï¼šX,Yä¸ºåæ ‡
            * chrï¼šå­—ç¬¦ä¸²é¦–åœ°å€
**ä½œè€…ï¼šAndrew
**æ—¥æœŸï¼š2018.1.24
-----------------------------------&lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;void&lt;/span&gt; OLED_Show_String(u8 x, u8 y, u8 *&lt;span&gt;chr)
{
    u8 j&lt;/span&gt;=&lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
    &lt;/span&gt;&lt;span&gt;while&lt;/span&gt; (chr[j]!=&lt;span&gt;'&lt;/span&gt;&lt;span&gt;\0&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
    {
        OLED_ShowChar(x,y,chr[j]);

        x&lt;/span&gt;+= &lt;span&gt;8&lt;/span&gt;&lt;span&gt; ;

        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;(x&amp;gt;&lt;span&gt;120&lt;/span&gt;){x=&lt;span&gt;0&lt;/span&gt;;y+=&lt;span&gt;2&lt;/span&gt;;}  &lt;span&gt;//&lt;/span&gt;&lt;span&gt;è‡ªåŠ¨æ¢è¡Œå†™&lt;/span&gt;
&lt;span&gt;
        j&lt;/span&gt;++&lt;span&gt;;
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åŸæ¥è¿™ä¸ªå‡½æ•°ä¼šåœ¨æ•°ç»„ç»“æŸä¹‹å‰ï¼Œæ˜¾ç¤ºæ•°ç»„çš„å…¨éƒ¨å†…å®¹ã€‚å› ä¸ºæ•°ç»„çš„æœ€åä¸€ä¸ªç»“å°¾æ ‡å¿—æ˜¯Â  &lt;span&gt;&lt;strong&gt;'\0â€™&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;é‚£ä¹ˆï¼Œä¸Šé¢ç¬¬ä¸€è¡Œä¸€ç›´åœ¨æ˜¾ç¤ºï¼Œ&lt;strong&gt;è¯´æ˜ä»–å¯èƒ½æ²¡æœ‰é‡åˆ°æ•°ç»„ç»“æŸæ ‡è¯†ç¬¦ã€‚&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æŸ¥çœ‹æ•°ç»„å®šä¹‰çš„å¤§å°ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
unsigned &lt;span&gt;char&lt;/span&gt; weight_string[&lt;span&gt;7&lt;/span&gt;] = {&lt;span&gt;0&lt;/span&gt;&lt;span&gt;};
unsigned &lt;/span&gt;&lt;span&gt;char&lt;/span&gt; price_string[&lt;span&gt;3&lt;/span&gt;] = {&lt;span&gt;0&lt;/span&gt;};
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;åŸæ¥Â weight_stringÂ æ•°ç»„çš„æœ€åä¸€ä¸ªç»“æŸæ ‡å¿—è¢«æˆ‘èµ‹å€¼æˆäº†ç©ºæ ¼ã€‚é‚£ä¹ˆä»–å°±ä¼šä¸€ç›´è¯»å–å­˜å‚¨åœ¨è¿™ä¸ªæ•°ç»„åé¢çš„å†…å­˜æ•°æ®ï¼Œå¹¶ä¸”ç»™æ˜¾ç¤ºå‡ºæ¥ã€‚ä¹Ÿå°±æ˜¯æ‰€è°“çš„â€œæ•°ç»„è¶Šç•Œâ€ã€‚&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;å¹¸å¥½æˆ‘ä»¬åªæ˜¯è¯»å–æ˜¾ç¤ºï¼Œå¹¶æ²¡æœ‰æ”¹å†™è¿™ä¸ªæ•°æ®ï¼&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;æ—¢ç„¶ä»–æ˜¾ç¤ºçš„æ˜¯ç¬¬äºŒè¡Œçš„æ•°æ®ï¼Œè¯´æ˜ç¬¬äºŒè¡Œçš„æ•°æ®å°±æ˜¯å­˜å‚¨åœ¨åœ¨è¿™ä¸ªæ•°ç»„åé¢çš„å†…å­˜ä¸­ã€‚&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;æŸ¥çœ‹ç¼–è¯‘å™¨ç”Ÿæˆçš„mapæ–‡ä»¶ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1083998/201805/1083998-20180519220338786-270080841.jpg&quot; alt=&quot;&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;æœç„¶ï¼Œç¬¬äºŒä¸ªæ•°ç»„ç´§é‚»ç€ç¬¬ä¸€ä¸ªæ•°ç»„å­˜å‚¨ã€‚&lt;/h3&gt;
&lt;p&gt;ç¬¬ä¸€ä¸ªæ•°ç»„è¯»å–è¶Šç•Œä¹‹åï¼Œè¯»åˆ°äº†ç¬¬äºŒä¸ªæ•°ç»„ã€‚&lt;/p&gt;
&lt;p&gt;åˆ°æ­¤ï¼Œé—®é¢˜è§£å†³ã€‚&lt;/p&gt;

&lt;h2&gt;æ€»ç»“ï¼š&lt;/h2&gt;
&lt;p&gt;ä¸€å®šè¦çœ‹åˆ°ç¨‹åºçš„å†…åœ¨è”ç³»ã€‚åˆ†æå†…å­˜è™½ç„¶å›°éš¾ï¼Œä½†æ˜¯å´æ˜¯æ‰¾åˆ°çƒ¦äººbugÂ çš„æ·å¾„ã€‚&lt;/p&gt;

</description>
<pubDate>Sat, 19 May 2018 14:10:00 +0000</pubDate>
<dc:creator>Andrew_qian</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/qsyll0916/p/9061841.html</dc:identifier>
</item>
<item>
<title>2.Springæ„å»ºREST Web Service - æ˜Ÿäº‘åšå®¢å›­</title>
<link>http://www.cnblogs.com/xingyunblog/p/9060596.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/xingyunblog/p/9060596.html</guid>
<description>&lt;p&gt;ä¸Šç¯‡æ–‡ç« æˆ‘ä»¬å·²ç»å¯¹SpringÂ å·²ç»æœ‰äº†ä¸€ä¸ªåˆæ­¥çš„è®¤è¯†ï¼Œæ¥ä¸‹æ¥æœ¬ç¯‡æ–‡ç« æˆ‘ä»¬å°†ç»§ç»­ä¸€èµ·åœ¨å®˜ç½‘å­¦ä¹ æ–°æŠ€æœ¯ã€‚ åŸæ–‡åœ°å€ï¼š&lt;a href=&quot;https://spring.io/guides/gs/rest-service/&quot; target=&quot;_blank&quot;&gt;https://spring.io/guides/gs/rest-service/&lt;br/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;æœ¬æŒ‡å—æŒ‡å¯¼æ‚¨ä½¿ç”¨Springåˆ›å»ºä¸€ä¸ªâ€œHello Worldâ€REST WebÂ Service çš„è¿‡ç¨‹ã€‚&lt;/p&gt;

&lt;p&gt;Tips: ä¸Šé¢å·²ç»æåˆ°ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Springåˆ›å»ºä¸€ä¸ªâ€œHello Worldâ€REST WebæœåŠ¡çš„è¿‡ç¨‹ï¼Œä½†æ˜¯æœ€ç»ˆçš„æ•ˆæœæ˜¯ä»€ä¹ˆæ ·å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªæ¥å—HTTP GETè¯·æ±‚çš„æœåŠ¡ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
http:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;localhost:8080/greeting&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å½“æˆ‘ä»¬å‘å‡ºä¸Šé¢çš„Http GetÂ è¯·æ±‚åï¼Œä¼šå“åº”è¿”å›ä¸‹é¢çš„JSONÂ å†…å®¹ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
{&quot;id&quot;:1,&quot;content&quot;:&quot;Hello, World!&quot;}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æˆ‘ä»¬ä¹Ÿå¯ä»¥å¸¦ä¸€ä¸ªå‚æ•°è¿›è¡Œè¯·æ±‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
http:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;localhost:8080/greeting?name=User&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Â &lt;strong&gt;Name&lt;/strong&gt;å‚æ•°å€¼é‡å†™â€œWordâ€çš„é»˜è®¤å€¼ï¼Œå¹¶åæ˜ åœ¨å“åº”ä¸­ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
{&quot;id&quot;:1,&quot;content&quot;:&quot;Hello, User!&quot;}
&lt;/pre&gt;&lt;/div&gt;

&lt;ul readability=&quot;0&quot;&gt;&lt;li&gt;
&lt;p&gt;å¤§çº¦åäº”åˆ†é’Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;ä¸€ä¸ªå–œæ¬¢çš„æ–‡æœ¬ç¼–è¾‘å™¨æˆ–è€…IDE&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;http://www.oracle.com/technetwork/java/javase/downloads/index.html&quot;&gt;JDK 1.8&lt;/a&gt;Â or later&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-0.24&quot;&gt;
&lt;p&gt;&lt;a href=&quot;http://www.gradle.org/downloads&quot;&gt;Gradle 4+&lt;/a&gt;Â orÂ &lt;a href=&quot;https://maven.apache.org/download.cgi&quot;&gt;Maven 3.2+&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-0.6&quot;&gt;
&lt;p&gt;You can also import the code straight into your IDE:&lt;/p&gt;

&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åƒå¤§å¤šæ•°Spriing å…¥é—¨æŒ‡å—ä¸€æ ·ï¼Œä½ å¯ä»¥ä»å¤´å¼€å§‹ï¼Œå®Œæˆæ¯ä¸€æ­¥ï¼Œæˆ–è€…ä½ å¯ä»¥ç»•è¿‡å·²ç»ç†Ÿæ‚‰çš„åŸºæœ¬è®¾ç½®æ­¥éª¤ã€‚ä¸ç®¡æ€æ ·ï¼Œä½ æœ€ç»ˆéƒ½ä¼šå¾—åˆ°å·¥ä½œä»£ç &lt;/p&gt;
&lt;h2&gt;3.1 è·å–å·¥ä½œä»£ç &lt;/h2&gt;
&lt;p&gt;Â  a.ä½¿ç”¨Mavenæ„å»º&lt;/p&gt;
&lt;p&gt;Â  b. ä½¿ç”¨Gradleæ„å»º&lt;/p&gt;
&lt;p&gt;Â  &lt;strong&gt;c. ä½¿ç”¨IDEæ„å»º&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Â  d.Â Â &lt;a href=&quot;https://github.com/spring-guides/gs-rest-service/archive/master.zip&quot; target=&quot;_blank&quot;&gt;ç‚¹å‡»ä¸‹è½½&lt;/a&gt;Â ç„¶å è§£å‹ä»“åº“æºç &lt;/p&gt;
&lt;p&gt;Â  e. ä½¿ç”¨gitÂ å…‹éš†&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
git clone https:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;github.com/spring-guides/gs-rest-service.git&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä¸Šé¢æœ‰äº”ç§æ–¹æ³•ï¼Œä½†æ˜¯ç”±äºä¹‹åæˆ‘ä»¬ä¼šç»å¸¸ä½¿ç”¨IDEæ¥å®Œæˆè¿™äº›æ“ä½œï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨IDEÂ æ¥æ„å»ºå…¥é—¨æŒ‡å—é¡¹ç›®&lt;/p&gt;
&lt;h3&gt;3.1.1 ç”¨STSå¼€å§‹å…¥é—¨æŒ‡å—&lt;/h3&gt;
&lt;p&gt;æœ¬æŒ‡å—å¼•å¯¼æ‚¨&lt;a href=&quot;https://spring.io/guides/gs/sts/&quot; target=&quot;_blank&quot;&gt;ä½¿ç”¨Springå·¥å…·å¥—ä»¶ï¼ˆSTSï¼‰æ„å»ºä¸€ä¸ªå…¥é—¨æŒ‡å—&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h4&gt;3.1.1.1 ä½ å°†ä¼šæ„å»ºä»€ä¹ˆï¼Ÿ&lt;/h4&gt;
&lt;p&gt;æ‚¨å°†é€‰æ‹©SpringæŒ‡å—å¹¶å°†å…¶å¯¼å…¥Spring Tool Suiteã€‚ç„¶åä½ å¯ä»¥é˜…è¯»æŒ‡å—ï¼Œå¤„ç†ä»£ç ï¼Œè¿è¡Œé¡¹ç›®ã€‚&lt;/p&gt;
&lt;h4&gt;3.1.1.2Â ä½ éœ€è¦ä»€ä¹ˆï¼Ÿ&lt;/h4&gt;
&lt;h4&gt;3.1.1.3Â å®‰è£…STS&lt;/h4&gt;
&lt;p&gt;Â  Â å¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£…STSï¼Œè¯·è®¿é—®ä¸Šé¢çš„é“¾æ¥ã€‚ä»é‚£é‡Œï¼Œæ‚¨å¯ä»¥ä¸‹è½½ä¸€ä¸ªå‰¯æœ¬ä¸ºæ‚¨çš„å¹³å°ã€‚è¦å®‰è£…å®ƒï¼Œåªéœ€è§£å‹ç¼©ä¸‹è½½çš„å­˜æ¡£æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;Â  Â å½“ä½ å®Œæˆåï¼Œç»§ç»­ç™»é™† STS&lt;/p&gt;
&lt;h4&gt;3.1.1.4 å¯¼å…¥å…¥é—¨æŒ‡å—&lt;/h4&gt;
&lt;p&gt;Â  Â ä½¿ç”¨STSå¯åŠ¨å¹¶è¿è¡Œï¼Œä»æ–‡ä»¶èœå•æ‰“å¼€Import Spring Getting Started Content å‘å¯¼ã€‚&lt;/p&gt;
&lt;p&gt;Â ç‚¹å‡»File â€”â€”&amp;gt; New â€”â€”â€”â€”&amp;gt; Import Spring Geting Started Content&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/622489/201805/622489-20180519164627701-174218420.png&quot; alt=&quot;&quot; width=&quot;524&quot; height=&quot;450&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åä¼šå¼¹å‡ºæ¥ä¸€ä¸ªçª—å£å‘å¯¼ï¼Œå°†ä¸ºæ‚¨æä¾›ä»Springç½‘ç«™æœç´¢å’ŒæŒ‘é€‰ä»»ä½•å·²å‘å¸ƒæŒ‡å—çš„æœºä¼šã€‚&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥æµè§ˆåˆ—è¡¨ï¼Œæˆ–è€…è¾“å…¥æœç´¢è¯æ¥ç«‹å³è¿‡æ»¤é€‰é¡¹ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;å½“æä¾›å³æ—¶æœç´¢ç»“æœæ—¶ï¼Œè¯¥æ ‡å‡†é€‚ç”¨äºæ ‡é¢˜å’Œæè¿°ã€‚æ”¯æŒé€šé…ç¬¦ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¾“å…¥rest ï¼Œé€‰æ‹© Rest Service ,ç‚¹å‡»FinishÂ &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/622489/201805/622489-20180519212411941-1107593705.png&quot; alt=&quot;&quot; width=&quot;486&quot; height=&quot;592&quot;/&gt;&lt;/p&gt;

&lt;p&gt;æ‚¨å¯ä»¥é€‰æ‹©Mavenæˆ–Gradleä½œä¸ºæ„å»ºç³»ç»Ÿæ¥ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;æ‚¨è¿˜å¯ä»¥å†³å®šæ˜¯å¦æŠ“å–åˆå§‹ä»£ç é›†ã€å®Œæˆä»£ç é›†ï¼Œæˆ–ä¸¤è€…å…¼è€Œæœ‰ä¹‹ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºå¤§å¤šæ•°é¡¹ç›®ï¼Œ&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ï¼ˆinitialï¼‰åˆå§‹ä»£ç é›†æ˜¯ä¸€ä¸ªç©ºçš„é¡¹ç›®ï¼Œä½¿å¾—æ‚¨å¯ä»¥é€šè¿‡æŒ‡å—å¤åˆ¶å’Œç²˜è´´æ‚¨çš„æ–¹å¼&lt;/li&gt;
&lt;li&gt;Â  (Complete)å®Œæ•´çš„ä»£ç é›†æ˜¯æ¥è‡ªå·²ç»è¿›å…¥çš„æŒ‡å—çš„æ‰€æœ‰ä»£ç ã€‚å¦‚æœä½ æŠ“ä½è¿™ä¸¤ä¸ªï¼Œä½ å¯ä»¥æ¯”è¾ƒä½ çš„å·¥ä½œä¸æŒ‡å—çš„å·®å¼‚ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æœ€åï¼Œä½ å¯ä»¥è®©STSå‘ç½‘ç«™ä¸Šçš„æŒ‡å—æ‰“å¼€æµè§ˆå™¨æ ‡ç­¾ã€‚è¿™ä¼šè®©ä½ åœ¨ä¸ç¦»å¼€STSçš„æƒ…å†µä¸‹é€šè¿‡å‘å¯¼å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;Â STSå°†åœ¨æ‚¨çš„å·¥ä½œåŒºä¸­åˆ›å»ºä¸¤ä¸ªæ–°é¡¹ç›®ï¼Œå¯¼å…¥æ¶ˆè€—RESTä»£ç åº“ï¼ˆåˆå§‹å’Œå®Œæ•´ï¼‰ï¼Œå¹¶åœ¨STSä¸­æ‰“å¼€æµè§ˆå™¨é€‰é¡¹å¡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;Â &lt;img src=&quot;https://images2018.cnblogs.com/blog/622489/201805/622489-20180519212620858-905180767.png&quot; alt=&quot;&quot; width=&quot;536&quot; height=&quot;453&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Tips:Â &lt;/p&gt;
&lt;p&gt;gs-rest-service-completeÂ æ˜¯å®Œæˆåçš„é¡¹ç›®&lt;a href=&quot;https://spring.io/guides/gs/consuming-rest/&quot; target=&quot;_blank&quot;&gt;&lt;br/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;gs-rest-service-initialÂ æ˜¯åˆå§‹åŒ–ä¸€ä¸ªç©ºçš„é¡¹ç›®&lt;/p&gt;
&lt;h3&gt;3.1.2 ç”¨Intellij Idea å¼€å§‹å…¥é—¨æŒ‡å—&lt;/h3&gt;
&lt;p&gt;Â æœ¬æŒ‡å—æŒ‡å¯¼æ‚¨ä½¿ç”¨Intellij Idea æ„å»ºä¸€ä¸ªå…¥é—¨æŒ‡å—ã€‚&lt;/p&gt;
&lt;h4&gt;3.1.2.1Â ä½ å°†ä¼šæ„å»ºä»€ä¹ˆï¼Ÿ&lt;/h4&gt;
&lt;p&gt;ä½ ä¼šé€‰æ‹©ä¸€ä¸ªSpringæŒ‡å—å¹¶å¯¼å…¥åˆ°iTeliJçš„æƒ³æ³•ä¸­ã€‚ç„¶åä½ å¯ä»¥é˜…è¯»æŒ‡å—ï¼Œå¤„ç†ä»£ç ï¼Œè¿è¡Œé¡¹ç›®ã€‚&lt;/p&gt;
&lt;h4&gt;3.1.2.2Â ä½ éœ€è¦å‡†å¤‡ä»€ä¹ˆï¼Ÿ&lt;/h4&gt;
&lt;h4&gt;3.1.2.3Â å®‰è£… IntelliJ IDEA&lt;/h4&gt;
&lt;p&gt;å¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£…Â IntelliJ IDEA (Ultimate Edition)Â ï¼Œè¯·è®¿é—®ä¸Šé¢çš„é“¾æ¥ã€‚ä»é‚£é‡Œï¼Œæ‚¨å¯ä»¥ä¸‹è½½ä¸€ä¸ªå‰¯æœ¬ä¸ºæ‚¨çš„å¹³å°ã€‚è¦å®‰è£…å®ƒï¼Œåªéœ€è§£å‹ç¼©ä¸‹è½½çš„å­˜æ¡£æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;Â å½“ä½ å®Œæˆåï¼Œç»§ç»­å¯åŠ¨Intellij IDEA&lt;/p&gt;
&lt;h4&gt;3.1.2.4Â å¯¼å…¥å…¥é—¨æŒ‡å—&lt;/h4&gt;
&lt;p&gt;è¦å¯¼å…¥ç°æœ‰çš„é¡¹ç›®ï¼Œéœ€è¦ä¸€äº›ä»£ç ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/spring-guides/gs-rest-service/archive/master.zip&quot; target=&quot;_blank&quot;&gt;ç‚¹å‡»ä¸‹è½½&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æˆ–è€…ä½¿ç”¨Git å…‹éš†æˆ–å¤åˆ¶å…¶ä¸­ä¸€ä¸ªå…¥é—¨æŒ‡å—ï¼Œä¾‹å¦‚RESTæœåŠ¡æŒ‡å—ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
git clone https:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;github.com/spring-guides/gs-rest-service.git&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä¸‹è½½è§£å‹åå¦‚å›¾æ‰€ç¤º&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/622489/201805/622489-20180519172647242-349165433.png&quot; alt=&quot;&quot; width=&quot;470&quot; height=&quot;416&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨Intellij IDEA å¯åŠ¨å’Œè¿è¡Œï¼Œç‚¹å‡»æ¬¢è¿å±å¹•ä¸Šçš„å¯¼å…¥é¡¹ç›®ï¼Œæˆ–åœ¨ä¸»èœå•ä¸Šæ‰“å¼€æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/622489/201805/622489-20180519172336334-1134965268.png&quot; alt=&quot;&quot; width=&quot;486&quot; height=&quot;476&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â åœ¨å¼¹å‡ºå¯¹è¯æ¡†ä¸­ï¼Œç¡®ä¿åœ¨å®Œæ•´æ–‡ä»¶å¤¹ä¸‹é€‰æ‹©Mavençš„POM.xmlæˆ–Gradleçš„build.gradleæ–‡ä»¶ï¼š&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬é€‰æ‹©build.gradle&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/622489/201805/622489-20180519172609545-1665903101.png&quot; alt=&quot;&quot; width=&quot;497&quot; height=&quot;691&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Intellij IDEA å°†åˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œæ‰€æœ‰çš„ä»£ç ä»æŒ‡å—å‡†å¤‡è¿è¡Œã€‚&lt;/p&gt;
&lt;p&gt;ä¿æŒé»˜è®¤ï¼Œç‚¹å‡»OK&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/622489/201805/622489-20180519173050828-2131533873.png&quot; alt=&quot;&quot; width=&quot;498&quot; height=&quot;292&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ„å»ºå®Œæˆåå¦‚å›¾æ‰€ç¤º&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/622489/201805/622489-20180519173810440-121996162.png&quot; alt=&quot;&quot; width=&quot;446&quot; height=&quot;632&quot;/&gt;&lt;/p&gt;
&lt;h2&gt;3.2Â åˆ›å»ºèµ„æºè¡¨ç¤ºç±»&lt;/h2&gt;
&lt;p&gt;Â æ—¢ç„¶å·²ç»å»ºç«‹äº†é¡¹ç›®å¹¶å»ºç«‹äº†ç³»ç»Ÿï¼Œå°±å¯ä»¥åˆ›å»ºWebæœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;Â é€šè¿‡è€ƒè™‘æœåŠ¡äº¤äº’æ¥å¼€å§‹è¿™ä¸ªè¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;æœåŠ¡å°†å¤„ç†æŸ¥è¯¢t /greetingÂ  GET è¯·æ±‚ï¼Œå¯é€‰åœ°åœ¨æŸ¥è¯¢å­—ç¬¦ä¸²ä¸­ä½¿ç”¨nameå‚æ•°ã€‚GETè¯·æ±‚åº”è¯¥è¿”å›ä¸€ä¸ª200 OKå“åº”ï¼Œå…¶ä¸­JSONåœ¨è¡¨ç¤ºgreetinçš„ä¸»ä½“ä¸­ã€‚å®ƒåº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;{
    &lt;/span&gt;&quot;id&quot;: 1&lt;span&gt;,
    &lt;/span&gt;&quot;content&quot;: &quot;Hello, World!&quot;&lt;span&gt;
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;IDå­—æ®µæ˜¯é—®å€™è¯­çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œcontentæ˜¯é—®å€™è¯­çš„æ–‡æœ¬è¡¨ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;Â ä¸ºäº†å»ºæ¨¡é—®å€™è¯­è¡¨ç¤ºï¼Œæ‚¨åˆ›å»ºä¸€ä¸ªèµ„æºè¡¨ç¤ºç±»ã€‚æä¾›ä¸€ä¸ªå­—æ®µï¼Œæ„é€ å‡½æ•°æ™®é€šjavaå¯¹è±¡ï¼Œå¹¶ä¸ºIDå’Œcontentæ•°æ®è®¿é—®ï¼š&lt;/p&gt;
&lt;p&gt;src/main/java/hello/Greeting.java&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package&lt;/span&gt;&lt;span&gt; hello;

&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; Greeting {
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;long&lt;/span&gt;&lt;span&gt; id;
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;final&lt;/span&gt;&lt;span&gt; String content;

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; Greeting(&lt;span&gt;long&lt;/span&gt;&lt;span&gt; id, String content) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.id =&lt;span&gt; id;
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.content =&lt;span&gt; content;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;long&lt;/span&gt;&lt;span&gt; getId() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; id;
    }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; String getContent() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; content;
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;Â æ­£å¦‚æ‚¨åœ¨ä¸‹é¢çš„æ­¥éª¤ä¸­çœ‹åˆ°çš„ï¼ŒSpringä½¿ç”¨Jackson JSONåº“è‡ªåŠ¨å°†é—®å€™ç±»å‹çš„å®ä¾‹å°é€åˆ°JSONä¸­ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Â æ¥ä¸‹æ¥ï¼Œåˆ›å»ºå°†ä¸ºè¿™äº›é—®å€™æœåŠ¡çš„èµ„æºæ§åˆ¶å™¨ã€‚&lt;/p&gt;
&lt;h2&gt;3.3 åˆ›å»ºèµ„æºController&lt;/h2&gt;
&lt;p&gt;åœ¨Springæ„å»ºREST WebæœåŠ¡çš„æ–¹æ³•ä¸­ï¼ŒHTTPè¯·æ±‚ç”±æ§åˆ¶å™¨å¤„ç†ã€‚è¿™äº›ç»„ä»¶å¾ˆå®¹æ˜“è¢«@ RESTControlleræ³¨é‡Šæ ‡è¯†ï¼Œä¸‹é¢çš„GreetingControlleré€šè¿‡è¿”å›Greeting ç±»çš„æ–°å®ä¾‹æ¥å¤„ç†GETè¯·æ±‚/greetingï¼š&lt;/p&gt;
&lt;p&gt;Â src/main/java/hello/GreetingController.java&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package&lt;/span&gt;&lt;span&gt; hello;

&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.util.concurrent.atomic.AtomicLong;

&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.springframework.web.bind.annotation.RequestMapping;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.springframework.web.bind.annotation.RequestParam;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.springframework.web.bind.annotation.RestController;

@RestController
&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; GreetingController {
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; String template = &quot;Hello, %s!&quot;&lt;span&gt;;
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; AtomicLong counter = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; AtomicLong();

    @RequestMapping(&lt;/span&gt;&quot;/greeting&quot;&lt;span&gt;)
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; Greeting greeting(@RequestParam(value=&quot;name&quot;, defaultValue=&quot;World&quot;&lt;span&gt;) String name) {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Greeting(counter.incrementAndGet(),
                            String.format(template, name));
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™ä¸ªæ§åˆ¶å™¨ç®€æ´æ˜äº†ï¼Œä½†å¼•æ“ç›–ä¸‹è¿˜æœ‰å¾ˆå¤šäº‹æƒ…è¦åšã€‚è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥åœ°æ‰“ç ´å®ƒã€‚&lt;/p&gt;
&lt;p&gt;Â @RequestMappingÂ  æ³¨è§£ ç¡®ä¿å°†HTTPè¯·æ±‚ /greetingæ˜ å°„åˆ° greeting()æ–¹æ³•ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;ä¸Šé¢çš„ç¤ºä¾‹ä¸æŒ‡å®šGETã€PUTã€POSTç­‰ç­‰ï¼Œå› ä¸º@RequestMapping é»˜è®¤æ˜ å°„æ‰€æœ‰HTTPæ“ä½œã€‚ä½¿ç”¨@RequestMappingï¼ˆMethod= GETï¼‰æ¥ç¼©å°æ­¤æ˜ å°„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;@RequestParamå°†æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°name çš„å€¼ç»‘å®šåˆ°greetingï¼ˆï¼‰æ–¹æ³•çš„nameå‚æ•°ä¸­ã€‚ å¦‚æœè¯·æ±‚ä¸­ç¼ºå°‘nameå‚æ•°ï¼Œåˆ™ä½¿ç”¨â€œWorldâ€çš„é»˜è®¤å€¼ã€‚&lt;/p&gt;
&lt;p&gt;æ–¹æ³•ä½“çš„å®ç°åŸºäºè®¡æ•°å™¨çš„ä¸‹ä¸€ä¸ªå€¼åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªå¸¦æœ‰idå’Œcontentå±æ€§çš„æ–°Greetingå¯¹è±¡ï¼Œå¹¶ä½¿ç”¨é—®å€™template æ ¼å¼åŒ–ç»™å®šnameã€‚&lt;/p&gt;

&lt;p&gt;ä¼ ç»Ÿçš„MVCæ§åˆ¶å™¨å’Œä¸Šé¢çš„RESTful WebæœåŠ¡æ§åˆ¶å™¨ä¹‹é—´çš„ä¸€ä¸ªä¸»è¦åŒºåˆ«åœ¨äºHTTPå“åº”ä¸»ä½“çš„åˆ›å»ºæ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªRESTful WebæœåŠ¡æ§åˆ¶å™¨åªéœ€å¡«å……å¹¶è¿”å›ä¸€ä¸ªGreetingå¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¾èµ–è§†å›¾æŠ€æœ¯å°†é—®å€™æ•°æ®çš„æœåŠ¡å™¨ç«¯å‘ˆç°å‘ˆç°ç»™HTMLã€‚&lt;/p&gt;
&lt;p&gt;å¯¹è±¡æ•°æ®å°†ä½œä¸ºJSONç›´æ¥å†™å…¥HTTPå“åº”ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤ä»£ç ä½¿ç”¨Spring 4çš„æ–°çš„@RestControlleræ³¨é‡Šï¼Œè¯¥æ³¨é‡Šå°†ç±»æ ‡è®°ä¸ºæ§åˆ¶å™¨ï¼Œå…¶ä¸­æ¯ä¸ªæ–¹æ³•éƒ½è¿”å›ä¸€ä¸ªåŸŸå¯¹è±¡è€Œä¸æ˜¯è§†å›¾ã€‚ å®ƒæ˜¯@Controllerå’Œ@ResponseBodyçš„ç¼©å†™ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;@RestController = = @Controller + @ResponseBodyÂ &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Greetingå¯¹è±¡å¿…é¡»è½¬æ¢ä¸ºJSONã€‚ ç”±äºSpringçš„HTTPæ¶ˆæ¯è½¬æ¢å™¨æ”¯æŒï¼Œæ‚¨ä¸éœ€è¦æ‰‹åŠ¨æ‰§è¡Œæ­¤è½¬æ¢ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºJackson 2ä½äºclasspathä¸­ï¼Œå› æ­¤ä¼šè‡ªåŠ¨é€‰æ‹©Springçš„MappingJackson2HttpMessageConverterå°†Greetingå®ä¾‹è½¬æ¢ä¸ºJSONã€‚&lt;/p&gt;
&lt;h2&gt;3.4 ä½¿åº”ç”¨ç¨‹åºå¯æ‰§è¡Œ&lt;/h2&gt;
&lt;p&gt;è™½ç„¶å¯ä»¥å°†æ­¤æœåŠ¡ä½œä¸ºä¼ ç»ŸWARæ–‡ä»¶æ‰“åŒ…ä»¥éƒ¨ç½²åˆ°å¤–éƒ¨åº”ç”¨ç¨‹åºæœåŠ¡å™¨ï¼Œä½†ä¸‹é¢æ¼”ç¤ºçš„æ›´ç®€å•çš„æ–¹æ³•ä¼šåˆ›å»ºç‹¬ç«‹åº”ç”¨ç¨‹åºã€‚&lt;/p&gt;
&lt;p&gt;æ‚¨å°†æ‰€æœ‰å†…å®¹æ‰“åŒ…åˆ°ä¸€ä¸ªå•ç‹¬çš„ï¼Œå¯æ‰§è¡Œçš„JARæ–‡ä»¶ä¸­ï¼Œç”±ä¸€ä¸ªè‰¯å¥½çš„æ—§Java mainï¼ˆï¼‰æ–¹æ³•é©±åŠ¨ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€è·¯ä¸Šï¼Œæ‚¨ä½¿ç”¨Springçš„æ”¯æŒå°†Tomcat servletå®¹å™¨ä½œä¸ºHTTPè¿è¡Œæ—¶åµŒå…¥ï¼Œè€Œä¸æ˜¯éƒ¨ç½²åˆ°å¤–éƒ¨å®ä¾‹ã€‚&lt;/p&gt;
&lt;div class=&quot;paragraph&quot; readability=&quot;11.5&quot;&gt;
&lt;p&gt;&lt;code&gt;src/main/java/hello/Application.java&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package&lt;/span&gt;&lt;span&gt; hello;

&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.springframework.boot.SpringApplication;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; Application {
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; main(String[] args) {
        SpringApplication.run(Application.&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;, args);
    }
}&lt;/span&gt;&lt;code&gt; &lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;SpringBootApplicationæ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„æ³¨è§£ï¼Œå®ƒå¢åŠ äº†ä»¥ä¸‹æ‰€æœ‰å†…å®¹ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;&lt;li&gt;@Configurationå°†ç±»æ ‡è®°ä¸ºåº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡çš„beanå®šä¹‰çš„æ¥æºã€‚&lt;/li&gt;
&lt;li&gt;@EnableAutoConfigurationé€šçŸ¥Spring Bootæ ¹æ®ç±»è·¯å¾„è®¾ç½®ï¼Œå…¶ä»–beanå’Œå„ç§å±æ€§è®¾ç½®å¼€å§‹æ·»åŠ beanã€‚&lt;/li&gt;
&lt;li&gt;é€šå¸¸ä½ ä¼šä¸ºSpring MVCåº”ç”¨ç¨‹åºæ·»åŠ @EnableWebMvcï¼Œä½†Spring Bootåœ¨ç±»è·¯å¾„ä¸­çœ‹åˆ°spring-webmvcæ—¶ä¼šè‡ªåŠ¨æ·»åŠ ã€‚ è¿™å°†è¯¥åº”ç”¨ç¨‹åºæ ‡è®°ä¸ºWebåº”ç”¨ç¨‹åºå¹¶æ¿€æ´»å…³é”®è¡Œä¸ºï¼Œä¾‹å¦‚è®¾ç½®DispatcherServletã€‚&lt;/li&gt;
&lt;li&gt;@ComponentScanå‘Šè¯‰Springåœ¨helloåŒ…ä¸­æŸ¥æ‰¾å…¶ä»–ç»„ä»¶ï¼Œé…ç½®å’ŒæœåŠ¡ï¼Œä»¥ä¾¿æ‰¾åˆ°æ§åˆ¶å™¨ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/blockquote&gt;
&lt;/div&gt;
&lt;p&gt;mainï¼ˆï¼‰æ–¹æ³•ä½¿ç”¨Spring Bootçš„SpringApplication.runï¼ˆï¼‰æ–¹æ³•å¯åŠ¨åº”ç”¨ç¨‹åºã€‚ä½ æœ‰æ²¡æœ‰æ³¨æ„åˆ°æ²¡æœ‰ä¸€è¡ŒXMLï¼Ÿ æ²¡æœ‰web.xmlæ–‡ä»¶ã€‚è¿™ä¸ªWebåº”ç”¨ç¨‹åºæ˜¯100ï¼…çº¯Javaï¼Œæ‚¨ä¸å¿…å¤„ç†é…ç½®ä»»ä½•ç®¡é“æˆ–åŸºç¡€è®¾æ–½ã€‚&lt;/p&gt;
&lt;h2&gt;3.5 æ„å»ºä¸€ä¸ªå¯æ‰§è¡Œçš„JAR&lt;/h2&gt;
&lt;p&gt;æ‚¨å¯ä»¥ä½¿ç”¨Gradleæˆ–Mavenä»å‘½ä»¤è¡Œè¿è¡Œåº”ç”¨ç¨‹åºã€‚ æˆ–è€…æ‚¨å¯ä»¥æ„å»ºä¸€ä¸ªåŒ…å«æ‰€æœ‰å¿…éœ€çš„ä¾èµ–é¡¹ï¼Œç±»å’Œèµ„æºçš„å¯æ‰§è¡ŒJARæ–‡ä»¶ï¼Œå¹¶è¿è¡Œè¯¥æ–‡ä»¶ã€‚ è¿™ä½¿å¾—åœ¨æ•´ä¸ªå¼€å‘ç”Ÿå‘½å‘¨æœŸå†…è·¨è¶Šä¸åŒç¯å¢ƒç­‰ï¼Œå°†æœåŠ¡ä½œä¸ºåº”ç”¨ç¨‹åºå‘å¸ƒï¼Œç‰ˆæœ¬åŒ–å’Œéƒ¨ç½²å˜å¾—éå¸¸å®¹æ˜“ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨Gradleï¼Œåˆ™å¯ä»¥ä½¿ç”¨./gradlew bootRunè¿è¡Œè¯¥åº”ç”¨ç¨‹åºã€‚ æˆ–è€…æ‚¨å¯ä»¥ä½¿ç”¨./gradlewæ„å»ºæ„å»ºJARæ–‡ä»¶ã€‚ ç„¶åä½ å¯ä»¥è¿è¡ŒJARæ–‡ä»¶ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
java -jar build/libs/gs-rest-service-0.1.0.jar
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯Mavenï¼Œåˆ™å¯ä»¥ä½¿ç”¨./mvnw spring-bootï¼šrunæ¥è¿è¡Œè¯¥åº”ç”¨ç¨‹åºã€‚ æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨./mvnw cleanåŒ…æ„å»ºJARæ–‡ä»¶ã€‚ ç„¶åä½ å¯ä»¥è¿è¡ŒJARæ–‡ä»¶ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
java -jar target/gs-rest-service-0.1.0.jar
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;ä¸Šè¿°è¿‡ç¨‹å°†åˆ›å»ºä¸€ä¸ªå¯è¿è¡Œçš„JARã€‚ æ‚¨ä¹Ÿå¯ä»¥é€‰æ‹©æ„å»ºç»å…¸çš„WARæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è®°å½•è¾“å‡ºæ˜¾ç¤ºã€‚ è¯¥æœåŠ¡åº”è¯¥åœ¨å‡ ç§’é’Ÿå†…å¯åŠ¨å¹¶è¿è¡Œã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/622489/201805/622489-20180519214059131-2005798961.png&quot; alt=&quot;&quot; width=&quot;540&quot; height=&quot;264&quot;/&gt;&lt;/p&gt;
&lt;h2&gt;3.6 æµ‹è¯• service&lt;/h2&gt;
&lt;p&gt;Â ç°åœ¨è¿™ä¸ªserviceå·²ç»å¯åŠ¨ï¼Œæˆ‘ä»¬è®¿é—® &lt;a href=&quot;http://127.0.0.1:8080/greeting&quot; target=&quot;_blank&quot;&gt;http://127.0.0.1:8080/greeting&lt;/a&gt;Â ä½ å°†ä¼šçœ‹åˆ°è¿™æ ·çš„ç»“æœ&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
{&quot;id&quot;:1,&quot;content&quot;:&quot;Hello, World!&quot;}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æä¾›ä¸€ä¸ªnameå‚æ•°è¿›è¡ŒæŸ¥è¯¢ï¼Œè®¿é—®Â &lt;a href=&quot;http://localhost:8080/greeting?name=User&quot; target=&quot;_blank&quot;&gt;http://localhost:8080/greeting?name=User&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
{&quot;id&quot;:2,&quot;content&quot;:&quot;Hello, User!&quot;}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ³¨æ„contentÂ æ–‡æœ¬å†…å®¹å·²ç»ä» &quot;Hello ,World!&quot;Â å˜æˆäº†&quot; Hello, User!&quot;&lt;/p&gt;
&lt;p&gt;æ­¤æ›´æ”¹æ¼”ç¤ºäº†GreetingControllerä¸­çš„@RequestParamæ’åˆ—æŒ‰é¢„æœŸå·¥ä½œã€‚ nameå‚æ•°å·²è¢«èµ‹äºˆé»˜è®¤å€¼â€œWorldâ€ï¼Œä½†å§‹ç»ˆå¯ä»¥é€šè¿‡æŸ¥è¯¢å­—ç¬¦ä¸²æ˜¾å¼è¦†ç›–ã€‚&lt;/p&gt;
&lt;p&gt;è¿˜è¦æ³¨æ„idå±æ€§å¦‚ä½•ä»1æ›´æ”¹ä¸º2.è¿™è¯æ˜æ‚¨æ­£åœ¨é’ˆå¯¹å¤šä¸ªè¯·æ±‚ä¸­çš„åŒä¸€ä¸ªGreetingControllerå®ä¾‹å·¥ä½œï¼Œå¹¶ä¸”å®ƒçš„è®¡æ•°å™¨å­—æ®µæŒ‰ç…§é¢„æœŸåœ¨æ¯æ¬¡è°ƒç”¨æ—¶é€’å¢ã€‚&lt;/p&gt;
&lt;p&gt;æ­å–œï¼ æ‚¨åˆšåˆšç”¨Springå¼€å‘äº†ä¸€ä¸ªRESTful Web Serviceã€‚&lt;/p&gt;
&lt;p&gt;æºç ä¸‹è½½ï¼š&lt;a href=&quot;https://github.com/geekxingyun/JavaEE-Framework-Sample/tree/master/Spring-RESTful-Web-Service-Sample&quot; target=&quot;_blank&quot;&gt;https://github.com/geekxingyun/JavaEE-Framework-Sample/tree/master/Spring-RESTful-Web-Service-Sample&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Sat, 19 May 2018 13:52:00 +0000</pubDate>
<dc:creator>æ˜Ÿäº‘åšå®¢å›­</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/xingyunblog/p/9060596.html</dc:identifier>
</item>
<item>
<title>ç¬¬åä¸€ç« â€”â€”è®­ç»ƒæ·±åº¦ç¥ç»ç½‘ç»œ - royhoo</title>
<link>http://www.cnblogs.com/royhoo/p/Training-Deep-Neural-Nets.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/royhoo/p/Training-Deep-Neural-Nets.html</guid>
<description>&lt;p&gt;ä¸Šä¸€ç« æˆ‘ä»¬è®­ç»ƒäº†ä¸€ä¸ªæµ…å±‚ç¥ç»ç½‘ç»œï¼Œåªè¦ä¸¤ä¸ªéšå±‚ã€‚ä½†å¦‚æœå¤„ç†å¤æ‚çš„é—®é¢˜ï¼Œä¾‹å¦‚ä»é«˜åˆ†è¾¨ç‡å›¾åƒä¸­è¯†åˆ«ä¸Šç™¾ç§ç±»çš„ç‰©å“ï¼Œè¿™å°±éœ€è¦è®­ç»ƒä¸€ä¸ªæ·±åº¦DNNã€‚ä¹Ÿè¡ŒåŒ…å«åå±‚ï¼Œæ¯å±‚ä¸Šç™¾ä¸ªç¥ç»å…ƒï¼Œå‡ åä¸‡ä¸ªè¿æ¥ã€‚è¿™ç»ä¸æ˜¯é—¹ç€ç©çš„ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;é¦–å…ˆï¼Œéœ€è¦é¢å¯¹æ¢¯åº¦æ¶ˆå¤±ï¼ˆæˆ–è€…ç›¸å¯¹çš„æ¢¯åº¦çˆ†ç‚¸ï¼‰é—®é¢˜ï¼Œè¿™ä¼šå¯¼è‡´æµ…å±‚å¾ˆéš¾è¢«è®­ç»ƒã€‚&lt;/li&gt;
&lt;li&gt;å…¶æ¬¡ï¼Œè¿™ä¹ˆå¤§ä¸€ä¸ªç½‘ç»œï¼Œè®­ç»ƒé€Ÿåº¦å¾ˆæ…¢ã€‚&lt;/li&gt;
&lt;li&gt;æœ€åï¼Œä¸€ä¸ªåŒ…å«ä¸Šç™¾ä¸‡å‚æ•°çš„æ¨¡å‹ï¼Œå­˜åœ¨å¾ˆå¤§è¿‡æ‹Ÿåˆçš„é£é™©ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;11.1 æ¢¯åº¦æ¶ˆå¤±ï¼ˆçˆ†ç‚¸ï¼‰é—®é¢˜&lt;/h2&gt;
&lt;p&gt;åå‘ä¼ æ’­ç®—æ³•ä¼šè®¡ç®—æŸå¤±å‡½æ•°å…³äºæ¯ä¸€ä¸ªå‚æ•°çš„åå¯¼æ•°ï¼Œç„¶åä½¿ç”¨æ¢¯åº¦ä¸‹é™æ›´æ–°å‚æ•°ã€‚ä¸å¹¸çš„æ˜¯ï¼Œåå‘ä¼ æ’­æ—¶ï¼Œæ¢¯åº¦ç»å¸¸ä¼šé€å±‚è¶Šæ¥è¶Šå°ï¼Œå¯¼è‡´åº•å±‚æƒé‡åŸºæœ¬ä¿æŒä¸å˜ï¼Œä»è€Œä¸èƒ½å¾—åˆ°å¥½çš„è®­ç»ƒç»“æœã€‚è¿™å°±æ˜¯æ‰€è°“çš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚è€Œæœ‰æ—¶å€™è¿˜å¯èƒ½å‘ç”Ÿç›¸åçš„æƒ…å†µï¼šå¾ˆå¤šå±‚çš„æƒé‡æ¯æ¬¡ä¿®æ”¹é‡å¾ˆå¤§ï¼Œå¯¼è‡´ä¸èƒ½æ”¶æ•›ã€‚è¿™å°±æ˜¯æ¢¯åº¦çˆ†ç‚¸é—®é¢˜ï¼Œä¸»è¦å‘ç”Ÿåœ¨RNNã€‚æ›´æ™®éçš„é—®é¢˜æ˜¯ï¼Œæ·±åº¦ç¥ç»ç½‘ç»œå¾€å¾€æ¢¯åº¦ä¸ç¨³å®šï¼Œä¸åŒçš„å±‚å­¦ä¹ é€Ÿåº¦å·®åˆ«å¾ˆå¤§ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸€é—®é¢˜çŸ¥é“2010æ‰æœ‰äº†çªç ´æ€§çš„è¿›å±•ã€‚åœ¨Xavier Glorotå’ŒYoshua Bengioçš„è®ºæ–‡&lt;a href=&quot;http://proceedings.mlr.press/v9/glorot10a/glorot10a.pdf&quot; target=&quot;_blank&quot;&gt;Understanding the Difficulty of Training Deep Feedforward Neural Networks&lt;/a&gt;ä¸­ï¼Œä½œè€…å‘ç°äº†ä¸€äº›é€ æˆè¿™ä¸€é—®é¢˜çš„å¯èƒ½å› ç´ ï¼ŒåŒ…æ‹¬logistic sigmoidæ¿€æ´»å‡½æ•°å’Œå½“æ—¶æµè¡Œçš„éšæœºåˆå§‹åŒ–æ–¹å¼ï¼ˆä½¿ç”¨ä½¿ç”¨å‡å€¼ä¸º0æ ‡å‡†å·®ä¸º1çš„æ­£æ€åˆ†å¸ƒè¿›è¡Œåˆå§‹åŒ–ï¼‰ã€‚ä»–ä»¬è¡¨æ˜ï¼Œè¿™ä¸€æ¿€æ´»å‡½æ•°åŠ ä¸Šè¿™ç§åˆå§‹åŒ–æ–¹å¼ï¼Œä½¿å¾—æ¯ä¸€å±‚è¾“å‡ºçš„æ–¹å·®è¿œå¤§äºè¾“å…¥ã€‚è¿™ä¸€æƒ…å†µåœ¨ä½¿ç”¨å‡å€¼æ˜¯0.5çš„logisticå‡½æ•°æ—¶å˜å¾—æ›´ä¸ºç³Ÿç³•ï¼ˆåŒæ›²æ­£åˆ‡å‡½æ•°çš„å‡å€¼æ˜¯0ï¼Œä»è€Œåœ¨æ·±åº¦ç½‘ç»œä¸­è¡¨ç°ä¼˜äºlogisticå‡½æ•°ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è§‚å¯Ÿå›¾11-1çš„æ¿€æ´»å‡½æ•°ï¼Œéšç€è¾“å…¥å€¼çš„ç»å¯¹å€¼å˜å¤§ï¼Œå‡½æ•°å€¼è¶‹è¿‘äº1å’Œ0ï¼Œæ­¤æ—¶å¯¼æ•°è¶‹è¿‘äº0ã€‚å› æ­¤åœ¨æ–¹å‘ä¼ æ’­æ—¶ï¼Œå‡ ä¹æ²¡æœ‰å¯¼æ•°ä¼ å›å»ã€‚Â &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/934105/201805/934105-20180510194245898-2135757874.png&quot; alt=&quot;&quot; width=&quot;397&quot; height=&quot;256&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å›¾11-1Â Logisticæ¿€æ´»å‡½æ•°&lt;/p&gt;
&lt;h3&gt;11.1.1Â Xavier and He Initialization&lt;/h3&gt;
&lt;p&gt;åœ¨å…¶è®ºæ–‡ä¸­ï¼ŒGlorot and Bengioæä¾›äº†ä¸€ç§å¯ä»¥æ˜¾è‘—æ”¹å–„è¯¥é—®é¢˜çš„å»ºè®®ã€‚æˆ‘ä»¬éœ€è¦ä¿¡å·åœ¨ä¸¤ä¸ªæ–¹å‘éƒ½å¯ä»¥æ­£å¸¸çš„æµåŠ¨ï¼šåœ¨å‰å‘åšå‡ºé¢„æµ‹å’Œåå‘ä¼ æ’­æ¢¯åº¦æ—¶ã€‚æˆ‘ä»¬ä¸å¸Œæœ›ä¿¡å·æ¶ˆå¤±ï¼Œä¹Ÿä¸å¸Œæœ›å®ƒä¿éšœæˆ–è€…é¥±å’Œï¼ˆä¹Ÿå°±æ˜¯è¶‹è¿‘äºæŸä¸€ä¸ªå€¼ï¼‰ã€‚ä¸ºäº†ä½¿ä¿¡å·æ­£å¸¸æµåŠ¨ï¼Œä½œè€…ä¸»å¼ æ¯ä¸€å±‚è¾“å…¥å’Œè¾“å‡ºçš„æ–¹å·®ç›¸ç­‰ï¼Œå¹¶ä¸”åœ¨åå‘ä¼ æ’­æ—¶æ¢¯åº¦çš„æ–¹å·®ä¿æŒä¸å˜ï¼ˆå¦‚æœå¯¹å…¶ä¸­çš„æ•°å­¦ç»†èŠ‚æ„Ÿå…´è¶£ï¼Œå¯ä»¥ç ”ç©¶ä¸€ä¸‹è®ºæ–‡ï¼‰ã€‚æˆ‘ä»¬æ— æ³•åŒæ—¶æ»¡è¶³è¿™è¿ä¸ªæ¡ä»¶ï¼Œä¸è¿‡ä½œè€…æä¾›äº†æ›´ä¸ºå®½æ¾çš„çº¦æŸæ¡ä»¶ï¼Œå¹¶ä¸”åœ¨å®è·µä¸­è¡¨ç°è¿˜ä¸é”™ï¼Œå„ä¸ªè¿æ¥çš„æƒé‡å¿…é¡»æŒ‰ç…§å¦‚ä¸‹æ–¹å¼åˆå§‹åŒ–ï¼š&lt;/p&gt;
&lt;p&gt;æ­£æ€åˆ†å¸ƒå‡å€¼0ï¼Œæ ‡å‡†å·®$\sigma = \sqrt{\frac{2}{n_{\mbox{input}} + n_{\mbox{output}}}}$&lt;/p&gt;
&lt;p&gt;æˆ–è€…ï¼Œ$-r$åˆ°$+r$ä¹‹é—´çš„å‡åŒ€åˆ†å¸ƒï¼Œå¹¶ä¸”$r = \sqrt{\frac{6}{n_{\mbox{input}} + n_{\mbox{output}}}}$&lt;/p&gt;
&lt;p&gt;å…¶ä¸­ï¼Œ$n_{\mbox{input}}$å’Œ$n_{\mbox{output}}$æ˜¯æ”¹æˆè¾“å…¥å’Œè¾“å‡ºæ•°é‡ã€‚è¿™ä¸€åˆå§‹åŒ–ç­–ç•¥ç§°ä¸ºXavieråˆå§‹åŒ–ï¼Œæˆ–è€…Glorotåˆå§‹åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœè¾“å…¥å’Œè¾“å‡ºæ•°é‡å¤§è‡´ç›¸ç­‰ï¼Œå…¬å¼å¯ä»¥ç®€åŒ–ä¸º$\sigma = 1/\sqrt{n_{\mbox{input}}}$ï¼Œ$\sigma = \sqrt{3} / \sqrt{n_{\mbox{input}}}$ï¼Œè¿™æ­£æ˜¯æˆ‘ä»¬åœ¨&lt;a href=&quot;http://www.cnblogs.com/royhoo/p/Introduction-to-Artificial-Neural-Networks.html&quot; target=&quot;_blank&quot;&gt;ç¬¬åç« &lt;/a&gt;ä½¿ç”¨çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨Xavieråˆå§‹åŒ–ç­–ç•¥å¯ä»¥ä½¿è®­ç»ƒé€Ÿåº¦å¾—åˆ°æ˜¾è‘—æå‡ï¼Œè¿™æ­£æ˜¯ä¸ºå½“ä»Šæ·±åº¦å­¦ä¹ å¸¦æ¥æˆæœçš„ä¸€ä¸ªæŠ€æœ¯æ‰‹æ®µã€‚ä¸€äº›&lt;a href=&quot;https://arxiv.org/pdf/1502.01852v1.pdf&quot; target=&quot;_blank&quot;&gt;ä¸ä¹…å‰çš„è®ºæ–‡&lt;/a&gt;æä¾›äº†ç±»ä¼¼çš„ï¼Œé’ˆå¯¹å…¶ä»–æ¿€æ´»å‡½æ•°çš„åˆå§‹åŒ–ç­–ç•¥ï¼Œå¦‚è¡¨11-1æ‰€ç¤ºã€‚æ‰€æœ‰è¿™äº›åˆå§‹åŒ–ç­–ç•¥æœ‰æ—¶è¢«ç§°ä½œHeï¼ˆè¿™æ˜¯ä¸­å›½å§“æ°ï¼Œä½†ä¸çŸ¥é“æ˜¯ä½•ï¼Œè´ºï¼Œè¿˜æ˜¯å’Œï¼‰åˆå§‹åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;è¡¨11-1. é’ˆå¯¹ä¸åŒæ¿€æ´»å‡½æ•°çš„åˆå§‹åŒ–ç­–ç•¥&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/934105/201805/934105-20180511143646947-1224159618.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h3&gt;11.1.2 ä¸é¥±å’Œï¼ˆNonsaturatingï¼‰æ¿€æ´»å‡½æ•°&lt;/h3&gt;
&lt;p&gt;$f$æ˜¯ä¸é¥±å’Œå‡½æ•°å½“ä¸”ä»…å½“$\mathop{\lim}\limits_{z \to \infty} |f(z)| = +\infty$&lt;/p&gt;
&lt;p&gt;Glorotå’ŒBengioåœ¨å…¶2010å¹´çš„è®ºæ–‡ä¸­è®¤ä¸ºï¼Œå¸¦æ¥æ¢¯åº¦æ¶ˆå¤±ï¼ˆçˆ†ç‚¸ï¼‰é—®é¢˜çš„é‡è¦åŸå› æ˜¯å¯ä¾›é€‰æ‹©çš„æ¿€æ´»å‡½æ•°å¤ªå°‘ã€‚æœ€åˆäººä»¬å€¾å‘äºé€‰æ‹©sigmoidæ¿€æ´»å‡½æ•°ï¼Œä½†äº‹å®ä¸Šåœ¨ç¥ç»ç½‘ç»œä¸­å…¶ä»–æ¿€æ´»å‡½æ•°è¡¨ç°æ›´å¥½ï¼Œå°¤å…¶æ˜¯ReLUã€‚å¾ˆé‡è¦çš„åŸå› æ˜¯ReLUå¯¹æ­£å€¼å…·æœ‰ä¸é¥±å’Œæ€§ï¼ˆä¹Ÿå°±æ˜¯æ²¡æœ‰ä¸Šé™ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡ReLUä¹Ÿå¹¶ä¸å®Œç¾ï¼Œä¼šé‡åˆ°è¢«ç§°ä½œdying ReLUsçš„é—®é¢˜ï¼šåœ¨è®­ç»ƒæœŸé—´ï¼Œæœ‰äº›ç¥ç»å…ƒäº‹å®ä¸Šæ­»æ‰äº†ï¼Œé™¤äº†0ä¹‹å¤–ä»€ä¹ˆä¹Ÿä¸ä¼šè¾“å‡ºï¼ˆè¿™é‡Œçš„è¾“å‡ºï¼Œåº”è¯¥æŒ‡çš„æ˜¯åå‘ä¼ æ’­æ—¶ï¼Œé«˜å±‚å¯¹åº•å±‚è¾“å‡ºçš„æ¢¯åº¦ï¼‰ã€‚æœ‰æ—¶å€™ä¸€åŠçš„ç¥ç»å…ƒéƒ½æ˜¯æ­»çš„ï¼Œå°¤å…¶æ˜¯å­¦ä¹ ç‡è¾ƒå¤§çš„æƒ…å†µä¸‹ã€‚ä¸€æ—¦å‡ºç°è¿™ä¸€æƒ…å†µï¼ŒåŸºæœ¬ä¸Šå°±ä¸èƒ½æ¢å¤è¿‡æ¥äº†ï¼Œå› ä¸ºå½“ReLUçš„è¾“å…¥æ˜¯è´Ÿæ•°æ—¶ï¼Œå…¶æ¢¯åº¦æ˜¯0ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ReLUçš„å˜ä½“ï¼Œæ¯”å¦‚leaky ReLUï¼ˆå¦‚å›¾11-2ï¼‰ã€‚$\mbox{LeakyReLU}_{\alpha}(z) = max(\alpha z, z)$ã€‚å…¶ä¸­ï¼Œè¶…å‚æ•°$\alpha$å®šä¹‰äº†è¾“å…¥ä¸ºè´Ÿå€¼æ—¶çš„å€¾æ–œåº¦ï¼Œä¸€èˆ¬è®¾ç½®ä¸º0.01ã€‚è¿™ä¸ªå°æ–œå¡ä¿è¯äº†leaky ReLUä¸ä¼šæ­»æ‰ï¼Œä¸è¿‡ä¹Ÿå°±å¯èƒ½è¿›å…¥é•¿æœŸçš„æ˜è¿·ã€‚æ¯•ç«Ÿè¿˜æ´»ç€ï¼Œé•¿æœŸæ˜è¿·åè¿˜æ˜¯æœ‰å¯èƒ½è‹é†’è¿‡æ¥çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/934105/201805/934105-20180511154739739-163869998.png&quot; alt=&quot;&quot; width=&quot;379&quot; height=&quot;244&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å›¾11-2Â Leaky ReLU&lt;/p&gt;
&lt;p&gt;Djork-ArnÃ© Clevertç­‰äººåœ¨å…¶&lt;a href=&quot;https://arxiv.org/pdf/1511.07289v5.pdf&quot; target=&quot;_blank&quot;&gt;2015å¹´çš„ä¸€ç¯‡è®ºæ–‡&lt;/a&gt;ä¸­æå‡ºäº†ä¸€ç§ç§°ä¸ºexponential linear unit (ELU)çš„æ–°çš„æ¿€æ´»å‡½æ•°ï¼Œè¡¨ç°å¥½è¿‡ReLUçš„æ‰€æœ‰å˜ä½“ã€‚&lt;/p&gt;
&lt;p&gt;\begin{align*}&lt;br/&gt;\mbox{ELU}_{\alpha}(z) = \left\{\begin{matrix}&lt;br/&gt;\alpha(\exp(z) - 1) &amp;amp;\mbox{if} &amp;amp;z &amp;lt; 0 \\&lt;br/&gt;z &amp;amp;\mbox{if} &amp;amp; z \geq 0&lt;br/&gt;\end{matrix}\right.&lt;br/&gt;\end{align*}&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/934105/201805/934105-20180511163827492-871948132.png&quot; alt=&quot;&quot; width=&quot;392&quot; height=&quot;251&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å›¾11-3 ELUæ¿€æ´»å‡½æ•°&lt;/p&gt;
&lt;p&gt;é€‰æ‹©æ¿€æ´»å‡½æ•°æ—¶ï¼Œä¸€èˆ¬ELU &amp;gt; leaky ReLU (åŠå…¶å˜ç§) &amp;gt; ReLU &amp;gt; tanh &amp;gt; logisticã€‚å¦‚æœä½ æ›´å…³å¿ƒè¿è¡Œæ—¶è¡¨ç°ï¼Œleaky ReLUè¦ä¼˜äºELUã€‚&lt;/p&gt;
&lt;h3&gt;11.1.3Â Batch Normalization&lt;/h3&gt;
&lt;p&gt;å°½ç®¡He initializationæ­é…ELUå¯ä»¥ç¼“è§£è®­ç»ƒåˆæœŸçš„æ¢¯åº¦æ¶ˆå¤±ï¼ˆçˆ†ç‚¸ï¼‰é—®é¢˜ï¼Œä½†æ˜¯å¹¶ä¸èƒ½ä¿è¯åœ¨æ•´ä¸ªè®­ç»ƒå‘¨æœŸéƒ½ä¸ä¼šå‡ºç°è¿™ä¸€é—®é¢˜ã€‚Sergey Ioffeå’ŒChristian Szegedyåœ¨å…¶&lt;a href=&quot;https://arxiv.org/pdf/1502.03167v3.pdf&quot; target=&quot;_blank&quot;&gt;2015å¹´çš„è®ºæ–‡&lt;/a&gt;ä¸­æå‡ºäº†ä¸€ç§è¢«ç§°ä½œBatch Normalization (BN)çš„è§£å†³æ–¹æ¡ˆã€‚æ¯”æ¢¯åº¦æ¶ˆå¤±ï¼ˆçˆ†ç‚¸ï¼‰æ›´ä¸€èˆ¬çš„é—®é¢˜æ˜¯ï¼Œç”±äºå‰å±‚å‚æ•°çš„å˜åŒ–ï¼Œé€ æˆåå±‚è¾“å…¥æ•°æ®åˆ†å¸ƒå˜åŒ–çš„é—®é¢˜ï¼ˆä»–ä»¬ç§°ä¸ºInternal Covariate Shifté—®é¢˜ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è¯¥æŠ€æœ¯å°±æ˜¯åœ¨æ¯ä¸€å±‚åº”ç”¨æ¿€æ´»å‡½æ•°ä¹‹å‰ï¼Œå¢åŠ ä¸€äº›æ“ä½œã€‚é¦–å…ˆå¯¹æ•°æ®è¿›è¡Œç®€å•çš„zero-centeringå’Œnormalizingï¼ˆå…¶å®å°±æ˜¯è½¬æ¢æˆå‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸º1çš„æ•°æ®ï¼‰ï¼Œç„¶åä½¿ç”¨ä¸¤ä¸ªå‚æ•°å¯¹æ•°æ®è¿›è¡Œscalingå’Œshiftingï¼ˆç¼©æ”¾å’Œå¹³ç§»ï¼‰æ“ä½œã€‚æ¢å¥è¯è¯´ï¼Œè¿™ä¸¤æ­¥å°±æ˜¯è®©æ¨¡å‹å­¦ä¹ æ¯å±‚è¾“å…¥æœ€ä¼˜çš„scaleï¼ˆè§„æ¨¡ï¼‰å’Œå‡å€¼ã€‚&lt;/p&gt;
&lt;p&gt;æ‰¹è§„èŒƒåŒ–ç®—æ³•ï¼ˆBatch Normalization algorithmï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/934105/201805/934105-20180519132543508-737060804.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å…¶ä¸­ï¼Œ&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;$\mu_B$æ˜¯ç»éªŒå‡å€¼ï¼Œåœ¨æ•´ä¸ªmini-batchä¸Šè¿›è¡Œè¯„ä¼°ã€‚&lt;/li&gt;
&lt;li&gt;$\sigma_B$æ˜¯ç»éªŒæ ‡å‡†å·®ï¼Œä¹Ÿæ˜¯åœ¨æ•´ä¸ªmini-batchä¸Šè¯„ä¼°çš„ã€‚&lt;/li&gt;
&lt;li&gt;$m_B$æ˜¯mini-batchçš„å®ä¾‹æ•°ã€‚&lt;/li&gt;
&lt;li&gt;$\hat{X}^{(i)}$æ˜¯zero-centeredå’Œnormalizedåçš„è¾“å…¥æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;$\gamma$æ˜¯è¯¥å±‚çš„scalingå‚æ•°ã€‚&lt;/li&gt;
&lt;li&gt;$\beta$æ˜¯è¯¥å±‚çš„shiftingå‚æ•°ã€‚&lt;/li&gt;
&lt;li&gt;$\epsilon$æ˜¯ä¸ºäº†é¿å…é™¤é›¶çš„ï¼Œé€šå¸¸ä¸º$10^{-3}$ï¼Œä¹Ÿè¢«ç§°ä¸ºå¹³æ»‘ç³»æ•°ã€‚&lt;/li&gt;
&lt;li&gt;$Z^{(i)}$æ˜¯BNæ“ä½œçš„è¾“å‡ºã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;åœ¨æµ‹è¯•é˜¶æ®µï¼Œä¸å­˜åœ¨mini-batchæ¥è®¡ç®—ç»éªŒå‡å€¼å’Œæ ‡å‡†å·®ï¼Œç®€å•åœ°ä½¿ç”¨æ•´ä¸ªè®­ç»ƒé›†çš„å‡å€¼å’Œæ ‡å‡†å·®å³å¯ã€‚Â These are typically efficiently computed during training using a moving average.ï¼ˆè¿™å¥è¯æ²¡çœ‹æ‡‚ã€‚moving averageæ˜¯ä¸€ç§å¿«é€Ÿè®¡ç®—å‡å€¼å’Œæ ‡å‡†å·®çš„æŠ€æœ¯ï¼Ÿï¼‰æ‰€ä»¥ï¼Œæ¯ä¸ªbatch-normalizedå±‚éœ€è¦å­¦ä¹ å››ä¸ªå‚æ•°ï¼š$\gamma$(scale)ï¼Œ$\beta$(offset)ï¼Œ$\mu$(mean)å’Œ$\sigma_B$(standard deviation)ã€‚&lt;/p&gt;
&lt;p&gt;ä½œè€…å®£ç§°ï¼Œè¯¥æŠ€æœ¯æå‡äº†ä»–ä»¬å®éªŒæ‰€é‡‡ç”¨çš„æ‰€æœ‰æ·±åº¦å­¦ä¹ ç½‘ç»œã€‚æ¢¯åº¦æ¶ˆå¤±é—®é¢˜å¾—åˆ°äº†æ˜æ˜¾çš„ç¯å¢ƒï¼Œä»¥è‡³äºå¯ä»¥ä½¿ç”¨é¥±å’Œæ¿€æ´»å‡½æ•°ï¼Œæ¯”å¦‚tanhï¼Œç”šè‡³æ˜¯logisticæ¿€æ´»å‡½æ•°ã€‚ç½‘ç»œå¯¹æƒé‡åˆå§‹å€¼çš„æ•æ„Ÿåº¦ä¹Ÿæ˜æ˜¾é™ä½ã€‚ä»–ä»¬ä¹Ÿå¯ä»¥æåˆ°å­¦ä¹ ç‡æ¥åŠ å¿«è®­ç»ƒé€Ÿåº¦ã€‚æ­¤å¤–ï¼ŒBatch Normalizationä¹Ÿå……å½“äº†æ­£åˆ™åŒ–çš„è§’è‰²ï¼Œå‡å°‘å…¶ä»–æ­£åˆ™åŒ–æŠ€æœ¯çš„ä½¿ç”¨ï¼ˆæ¯”å¦‚åé¢ç« èŠ‚å°†ä¼šä»‹ç»çš„dropoutï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å½“ç„¶ï¼Œè¯¥æŠ€æœ¯æœ‰åˆ©ä¹Ÿæœ‰å¼Šâ€”â€”å…¶å¢åŠ äº†æ¨¡å‹å¤æ‚åº¦ï¼Œè¿™æ˜¯ä¸€ç§è¿è¡Œæ—¶æƒ©ç½šï¼šé¢å¤–çš„è®¡ç®—å¯¼è‡´é¢„æµ‹ç¼“æ…¢ã€‚æ‰€ä»¥ï¼Œå¦‚æœæ›´åœ¨æ„é¢„æµ‹æ•ˆç‡çš„è¯ï¼Œæœ€å¥½è¿˜æ˜¯é€‰æ‹©ELU + He initializationã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åæ˜¯Batch Normalizationçš„TensorFlowå®ç°ï¼Œä»£ç å¯å‚è€ƒä½œè€…çš„GitHubã€‚&lt;/p&gt;
&lt;h3&gt;11.1.4Â Gradient Clipping&lt;/h3&gt;
&lt;p&gt;å‡è½»æ¢¯åº¦çˆ†ç‚¸çš„ä¸€é¡¹æŠ€æœ¯æ˜¯ä½¿åå‘ä¼ æ’­çš„æ¢¯åº¦ä¸è¶…è¿‡æŸä¸ªé˜ˆå€¼ï¼ˆè¿™åœ¨è®­ç»ƒrnnæ—¶æ¯”è¾ƒæœ‰ç”¨ï¼‰ã€‚ è¿™ä¸€æŠ€æœ¯ç§°ä¸º&lt;a href=&quot;http://proceedings.mlr.press/v28/pascanu13.pdf&quot; target=&quot;_blank&quot;&gt;Gradient Clipping&lt;/a&gt;ã€‚ç°åœ¨äººä»¬æ›´å–œæ¬¢Batch Normalizationï¼Œä¸è¿‡äº†è§£ä¸€ä¸‹Gradient Clippingè¿˜æ˜¯æœ‰å¸®åŠ©çš„ã€‚&lt;/p&gt;
&lt;h2&gt;11.2Â Reusing Pretrained Layers&lt;/h2&gt;
&lt;p&gt;å¦‚æœè®­ç»ƒä¸€ä¸ªå¤§å‹çš„DNNï¼Œä¸€èˆ¬éƒ½ä¸ä¼šä»é›¶å¼€å§‹ï¼Œè€Œæ˜¯æ‰¾åˆ°ä¸€ä¸ªå·²ç»è®­ç»ƒå¥½çš„ï¼Œä¸ä½ çš„ä»»åŠ¡ç›¸ä¼¼çš„æ¨¡å‹ã€‚å¤ç”¨æ—§æ¨¡å‹çš„åº•å±‚ï¼Œè¿™ç§°ä¸ºtransfer learningã€‚è¿™ä¸ä»…ä¼šåŠ å¿«è®­ç»ƒé€Ÿåº¦ï¼Œè€Œä¸”éœ€è¦æ›´å°‘çš„è®­ç»ƒæ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/934105/201805/934105-20180519152650381-991953039.png&quot; alt=&quot;&quot; width=&quot;457&quot; height=&quot;354&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å›¾11-4Â Reusing pretrained layers&lt;/p&gt;
&lt;p&gt;åœ¨ä¸Šå›¾ä¸­ï¼Œå¦‚æœæ–°æ—§æ¨¡å‹è®­ç»ƒæ•°æ®çš„ç»“æ„ä¸ä¸€è‡´ï¼Œé‚£å°±éœ€è¦å¢åŠ ä¸€æ­¥é¢„å¤„ç†ï¼Œå°†æ•°æ®çš„æ ¼å¼è½¬æ¢ä¸ºå°±æ¨¡å‹éœ€è¦çš„ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œtransfer learningåœ¨è¾“å…¥å€¼å…·æœ‰ç›¸ä¼¼çš„ä½çº§åˆ«ç‰¹å¾æ—¶è¡¨ç°è‰¯å¥½ã€‚&lt;/p&gt;
&lt;h3&gt;11.2.1Â Reusing a TensorFlow Model&lt;/h3&gt;
&lt;p&gt;è®²è§£åœ¨åŸå§‹æ¨¡å‹ä½¿ç”¨TensorFlowæ—¶ï¼Œæ–°çš„æ¨¡å‹å¦‚ä½•å¤ç”¨ã€‚&lt;/p&gt;
&lt;h3&gt;11.2.2Â Reusing Models from Other Frameworks&lt;/h3&gt;
&lt;p&gt;è®²è§£å¦‚æœæ¨¡å‹æ˜¯å…¶ä»–æ¡†æ¶å®ç°çš„ï¼Œåœ¨TensorFlowä¸­å¦‚ä½•å¤ç”¨ã€‚&lt;/p&gt;
&lt;h3&gt;11.2.3Â Freezing the Lower Layers&lt;/h3&gt;
&lt;p&gt;å°±æ˜¯å†·å†»ä½ä½å±‚çº§çš„å‚æ•°ï¼Œä½¿å…¶åœ¨åå‘ä¼ æ’­æ—¶ä¸è¢«æ›´æ–°ã€‚&lt;/p&gt;
&lt;h3&gt;11.2.4Â Caching the Frozen Layers&lt;/h3&gt;
&lt;p&gt;å¦‚æœä½¿ç”¨äº†11.2.3çš„æŠ€æœ¯ï¼Œç”±äºå‰é¢å‡ å±‚çš„å‚æ•°æ˜¯ä¸å˜çš„ï¼Œå¯ä»¥å°†æœ€é«˜å†·å†»å±‚çš„è¾“å‡ºå€¼ç¼“å­˜èµ·æ¥ï¼Œä¸ç”¨æ¯æ¬¡å‰å‘ä¼ æ’­éƒ½å»è®¡ç®—ã€‚è¿™å¯ä»¥æé«˜è®­ç»ƒé€Ÿåº¦ã€‚&lt;/p&gt;
&lt;h3&gt;11.2.5Â Tweaking, Dropping, or Replacing the Upper Layers&lt;/h3&gt;
&lt;p&gt;åŸå§‹æ¨¡å‹çš„è¾“å‡ºå±‚ä¼šè¢«æ›¿æ¢æ‰ï¼Œå› ä¸ºå®ƒä¸€æœ¬å¯¹æ–°ä»»åŠ¡æ¥è®²æ˜¯æ²¡ç”¨çš„ï¼Œç”šè‡³ä¸æ–°ä»»åŠ¡è¾“å‡ºå€¼çš„ä¸ªæ•°éƒ½ä¸åŒ¹é…ã€‚ç±»ä¼¼çš„ï¼ŒåŸå§‹æ¨¡å‹çš„é«˜çº§éšå±‚å¯¹æ–°ä»»åŠ¡çš„ç”¨å¤„è¾ƒå°ã€‚æˆ‘ä»¬éœ€è¦æ‰¾åˆ°é€‚åˆå¤ç”¨çš„å±‚æ•°ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆå¤ç”¨æ‰€æœ‰å±‚ï¼Œè®­ç»ƒæ¨¡å‹å¹¶è¯„ä¼°å…¶è¡¨ç°ã€‚ç„¶åè§£å†»ä¸€ä¸ªæˆ–ä¸¤ä¸ªéšå±‚ï¼Œè®­ç»ƒä¹‹åè§‚å¯Ÿå…¶è¡¨ç°æ˜¯å¦æå‡ã€‚è®­ç»ƒæ•°æ®è¶Šå¤šï¼Œå°±è§£å†»è¶Šå¤šçš„å±‚ã€‚&lt;/p&gt;
&lt;h3&gt;11.2.6Â Model Zoos&lt;/h3&gt;
&lt;p&gt;è¿™å°±æ˜¯æ¨¡å‹ä»“åº“ï¼Œå¯ä»¥æ‰¾åˆ°åˆ«äººè®­ç»ƒå¥½çš„æ¨¡å‹ã€‚&lt;/p&gt;
&lt;p&gt;TensorFlowçš„model zooä½äº&lt;a href=&quot;https://github.com/tensorflow/models&quot; target=&quot;_blank&quot;&gt;https://github.com/tensorflow/models&lt;/a&gt;ã€‚åŒ…å«ç›®å‰æœ€å…ˆè¿›çš„å›¾åƒåˆ†ç±»ç½‘ç»œï¼Œæ¯”å¦‚VGG, Inception, and ResNetã€‚&lt;/p&gt;
&lt;p&gt;å¦ä¸€ä¸ªæ˜¯Caffeâ€™s Model Zooï¼š&lt;a href=&quot;https://github.com/BVLC/caffe/wiki/Model-Zoo&quot; target=&quot;_blank&quot;&gt;https://github.com/BVLC/caffe/wiki/Model-Zoo&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h3&gt;11.2.7Â Unsupervised Pretraining&lt;/h3&gt;
&lt;p&gt;å‡è®¾ä½ è¦å¤„ç†ä¸€ä¸ªå¤æ‚çš„ä»»åŠ¡ï¼Œå¹¶ä¸”æ²¡æœ‰è¶³å¤Ÿå¸¦æ ‡ç­¾çš„è®­ç»ƒæ•°æ®ã€‚å¹¶ä¸”çš„æ˜¯ï¼Œä¹Ÿæ‰¾ä¸åˆ°é’ˆå¯¹ç±»ä¼¼ä»»åŠ¡è®­ç»ƒå¥½çš„æ¨¡å‹ã€‚ä¸è¦ç»æœ›ï¼é¦–å…ˆï¼Œä½ å½“ç„¶åº”è¯¥æ”¶é›†æ›´å¤šçš„å¸¦æ ‡ç­¾æ•°æ®ï¼Œå¦‚æœè¿™å¾ˆå›°éš¾æˆ–è€…å¾ˆæ˜‚è´µï¼Œä»ç„¶å¯ä»¥ä½¿ç”¨unsupervised pretrainingå®Œæˆä»»åŠ¡ï¼ˆå¦‚å›¾11-5ï¼‰ã€‚è¿™å°±æ˜¯è¯´ï¼Œå¦‚æœä½ æœ‰å¤§é‡çš„æ— æ ‡ç­¾æ•°æ®ï¼Œé‚£å°±å¯ä»¥ä¸€å±‚å±‚åœ°è®­ç»ƒï¼Œä½¿ç”¨æ— ç›‘ç£ç‰¹å¾æ£€æµ‹ï¼ˆfeature detectorï¼‰ç®—æ³•ï¼Œæ¯”å¦‚Restricted Boltzmann Machinesæˆ–è€…autoencodersã€‚ç­‰åˆ°æ‰€æœ‰å±‚éƒ½è®­ç»ƒå®Œæˆï¼Œå°±å¯ä»¥ä½¿ç”¨ç›‘ç£å­¦ä¹ å¯¹ç½‘ç»œè¿›è¡Œå¾®è°ƒã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/934105/201805/934105-20180519165254913-1318409057.png&quot; alt=&quot;&quot; width=&quot;624&quot; height=&quot;412&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å›¾11-5Â Unsupervised pretraining&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªæ¼«é•¿ä¹å‘³çš„è¿‡ç¨‹ï¼Œä½†æ˜¯å¾€å¾€è¡¨ç°è‰¯å¥½ã€‚äº‹å®ä¸Šï¼Œè¿™ä¸€æŠ€æœ¯æ­£æ˜¯Geoffrey HintonåŠå…¶å›¢é˜Ÿåœ¨2016å¹´ä½¿ç”¨å¹¶å¸¦æ¥äº†ç¥ç»ç½‘ç»œçš„å¤å…´ä»¥åŠæ·±åº¦å­¦ä¹ çš„æˆåŠŸã€‚&lt;/p&gt;
&lt;h3&gt;11.2.8Â Pretraining on an Auxiliary Task&lt;/h3&gt;
&lt;p&gt;å¦å¤–ä¸€ä¸ªé€‰æ‹©æ˜¯ï¼Œé¦–å…ˆè®­ç»ƒä¸€ä¸ªè¾…åŠ©çš„æ¨¡å‹ï¼Œè¯¥æ¨¡å‹çš„æ ‡ç­¾æ•°æ®å¯ä»¥è½»æ˜“ç”Ÿæˆï¼Œç„¶åå¤ç”¨åº•å±‚æ¥è®­ç»ƒæ¨¡å‹å®ç°çœŸæ­£çš„ä»»åŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚ï¼Œä½ æƒ³å»ºç«‹ä¸€ä¸ªäººè„¸è¯†åˆ«ç³»ç»Ÿï¼Œå¹¶ä¸”æ²¡æœ‰å¤ªå¤šçš„å¸¦æ ‡ç­¾æ•°æ®ã€‚ä¸è¿‡ä½ å¯ä»¥åœ¨ç½‘ç»œéšæœºæœé›†ä¸€äº›ç…§ç‰‡ï¼Œå¹¶è®­ç»ƒä¸€ä¸ªæ¨¡å‹æ¥è¯†åˆ«ä¸åŒçš„ç…§ç‰‡ä¸­æ˜¯å¦æ˜¯åŒä¸€ä¸ªäººã€‚ç¬¬ä¸€ä¸ªæ¨¡å‹ä¼šå­¦ä¹ åˆ°è¯†åˆ«äººè„¸çš„ä¼˜ç§€ç‰¹å¾ï¼Œè¿™å¯ä»¥åœ¨ç¬¬äºŒä¸ªæ¨¡å‹ä¸­å¤ç”¨ï¼Œå¹¶å‡å°‘ç¬¬äºŒä¸ªæ¨¡å‹æ‰€éœ€çš„è®­ç»ƒæ•°æ®ã€‚&lt;/p&gt;
&lt;h2&gt;11.3Â Faster Optimizers&lt;/h2&gt;
&lt;p&gt;è¿™ä¸€å°èŠ‚çš„ç»“è®ºæ˜¯ï¼Œç”¨AdamOptimizeræ›¿æ¢æ‰GradientDescentOptimizerå°±è¡Œäº†ã€‚æˆ‘å…ˆè·³è¿‡äº†ï¼Œåé¢æœ‰æ—¶é—´å†è¡¥ä¸Šè¿™å‡ ä¸ªä¼˜åŒ–ç®—æ³•ã€‚&lt;/p&gt;
&lt;h2&gt;11.4Â Avoiding Overfitting Through Regularization&lt;/h2&gt;
&lt;p&gt;ç¥ç»ç½‘ç»œå¾€å¾€å‚æ•°å¾ˆå¤šï¼Œè‡ªç”±åº¦å¾ˆå¤§ï¼Œå¤ªå®¹æ˜“è¿‡æ‹Ÿåˆï¼Œæ‰€ä»¥åº”è¯¥ä½¿ç”¨ä¸€äº›æ­£åˆ™åŒ–æŠ€æœ¯é˜²æ­¢è¿‡æ‹Ÿåˆã€‚&lt;/p&gt;
&lt;h3&gt;11.4.1Â Early Stopping&lt;/h3&gt;
&lt;p&gt;è¿™åœ¨ç¬¬å››ç« ä»‹ç»è¿‡ï¼Œå°±æ˜¯åœ¨æ ¡éªŒé›†è¡¨ç°æœ€å¥½æ—¶ç»ˆæ­¢è®­ç»ƒã€‚&lt;/p&gt;
&lt;h3&gt;11.4.2 $l_i$å’Œ$l_2$æ­£åˆ™&lt;/h3&gt;
&lt;p&gt;è¿™ä¸ªä¹Ÿå’Œç¬¬å››ç« çš„æ„ä¹‰ï¼Œè·Ÿä¼ ç»Ÿæœºå™¨æ¨¡å‹çš„æ–¹å¼ä¸€æ ·ã€‚&lt;/p&gt;
&lt;h3&gt;11.4.3Â Dropout&lt;/h3&gt;
&lt;p&gt;å½“å‰æ·±åº¦ç¥ç»ç½‘ç»œæœ€å—æ¬¢è¿çš„æ­£åˆ™åŒ–æŠ€æœ¯å¤§æ¦‚å°±æ˜¯dropoutäº†ã€‚å®ƒé¦–å…ˆç”±G. E. Hintonåœ¨2012å¹´&lt;a href=&quot;https://arxiv.org/pdf/1207.0580.pdf&quot; target=&quot;_blank&quot;&gt;æå‡º&lt;/a&gt;ï¼Œå¹¶ç”±Nitish Srivastavaåœ¨å…¶&lt;a href=&quot;http://jmlr.org/papers/volume15/srivastava14a/srivastava14a.pdf&quot; target=&quot;_blank&quot;&gt;è®ºæ–‡&lt;/a&gt;ä¸­å®Œå–„ã€‚è¯¥æŠ€æœ¯å–å¾—äº†å·¨å¤§æˆåŠŸã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„ç®—æ³•ï¼šåœ¨æ¯ä¸€æ­¥è®­ç»ƒï¼Œæ‰€æœ‰ç¥ç»å…ƒï¼ˆåŒ…æ‹¬è¾“å…¥ç¥ç»å…ƒä½†ä¸åŒ…æ‹¬è¾“å‡ºç¥ç»å…ƒï¼‰éƒ½æœ‰ä¸€ä¸ªå¯èƒ½â€œdropped outâ€çš„æ¦‚ç‡$p$ï¼Œæ„å‘³ç€æœ¬æ¬¡è®­ç»ƒå®ƒå¯èƒ½ä¼šè¢«å¿½è§†ï¼Œä½†åœ¨ä¸‹æ¬¡è®­ç»ƒæœ‰å¯èƒ½ä¼šè¢«æ¿€æ´»ã€‚è¶…å‚æ•°$p$è¢«ç§°ä½œdropout rateï¼Œä¸€èˆ¬è¢«è®¾ç½®ä¸º50%ã€‚è®­ç»ƒç»“æŸåï¼Œç¥ç»å…ƒä¸å†è¢«å¿½è§†ã€‚&lt;/p&gt;
&lt;p&gt;èµ·åˆå¯èƒ½è§‰å¾—åƒæƒŠï¼Œè¿™ä¸€è›®æ¨ªçš„ç®—æ³•å±…ç„¶è¡¨ç°è‰¯å¥½ã€‚æˆ‘ä»¬ç°åœ¨å‡è®¾ï¼Œä¸€å®¶å…¬å¸é€šè¿‡æŠ›ç¡¬å¸å†³å®šæ¯ä¸ªå‘˜å·¥æ˜¯å¦ä¸Šç­ã€‚å¾ˆæ˜æ˜¾è¿™å®¶å…¬å¸è¦æ”¹ç¼–å…¶ç»„ç»‡æ¶æ„ã€‚ä»»ä½•å·¥ä½œéƒ½ä¸èƒ½ä¾èµ–äºå•ç‹¬ä¸€ä¸ªäººï¼Œæ‰€ä»¥ä¸“ä¸šæŠ€æœ¯éœ€è¦ä¼ æˆç»™å¾ˆå¤šäººã€‚é›‡å‘˜å¿…é¡»å­¦ç€ä¸åŒäº‹åˆä½œã€‚å¦‚æœæŸå‘˜å·¥é€€å‡ºï¼Œå½±å“ä¸ä¼šå¤ªå¤§ã€‚è™½ç„¶ä¸çŸ¥é“è¿™ä¸€æ€æƒ³æ˜¯å¦é€‚ç”¨äºå…¬å¸è¿è¥ï¼Œä½†å…¶ç¡®å®é€‚ç”¨äºç¥ç»ç½‘ç»œçš„è®­ç»ƒã€‚ç¥ç»å…ƒå°†å¯¹è¾“å…¥å€¼çš„è½»å¾®å˜åŒ–ä¸å†æ•æ„Ÿï¼Œæœ€ç»ˆä¼šå¾—åˆ°ä¸€ä¸ªæ›´åŠ é²æ£’ï¼Œæ›´å®¹æ˜“ä¸€èˆ¬åŒ–çš„ç¥ç»ç½‘ç»œã€‚&lt;/p&gt;
&lt;p&gt;ç†è§£dropoutå·¨å¤§å¨åŠ›çš„å¦ä¸€ä¸ªé€”å¾„å°±æ˜¯ç†è§£ï¼Œæ¯ä¸€æ­¥è®­ç»ƒå…¶å®éƒ½åœ¨ç”Ÿæˆä¸€ä¸ªä¸åŒçš„ç¥ç»ç½‘ç»œã€‚ç”±äºæ¯ä¸ªç¥ç»å…ƒéƒ½å¯èƒ½å‡ºå¸­æˆ–è€…ç¼ºå¸­ï¼Œæ€»å…±æœ‰$2^N$ï¼ˆå…¶ä¸­ï¼Œ$N$æ˜¯å¯å¿½è§†ç¥ç»å…ƒæ€»æ•°ï¼‰ç§å¯èƒ½çš„ç½‘ç»œã€‚å¦‚æœè®­ç»ƒ10000æ­¥ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯è®­ç»ƒäº†10000ä¸ªç¥ç»å…ƒã€‚æœ€ç»ˆçš„ç¥ç»å…ƒå¯ä»¥çœ‹æˆæ˜¯è¿™äº›å•ç‹¬ç¥ç»å…ƒçš„ä¸€ä¸ªaveraging ensembleã€‚&lt;/p&gt;
&lt;p&gt;è¿˜æœ‰ä¸€ä¸ªæŠ€æœ¯ç»†èŠ‚ã€‚å‡è®¾$p = 50%$ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹æµ‹è¯•é˜¶æ®µçš„ç¥ç»å…ƒæ•°é‡æ˜¯è®­ç»ƒé˜¶æ®µçš„ä¸¤å€ã€‚ä¸ºäº†å¼¥è¡¥è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦åœ¨è®­ç»ƒç»“æŸåå¯¹è¿æ¥æƒé‡ä¹˜ä»¥0.5ã€‚æ›´ä¸€èˆ¬çš„ï¼Œæˆ‘ä»¬éœ€è¦åœ¨è®­ç»ƒç»“æŸåå¯¹è¿æ¥æƒé‡ä¹˜ä»¥keep probability (1 â€“ p)ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœè§‚å¯Ÿåˆ°æ¨¡å‹è¿‡æ‹Ÿåˆï¼Œå¯ä»¥å¢å¤§dropout rateã€‚æ¬ æ‹Ÿåˆå°±å‡å°dropout rateã€‚&lt;/p&gt;
&lt;p&gt;Dropoutä¼šæ˜¾è‘—åœ°é™ä½æ”¶æ•›é€Ÿåº¦ï¼Œä½†é€šå¸¸ä¼šå¾—åˆ°ä¸€ä¸ªæ›´å¥½çš„æ¨¡å‹ã€‚å¤šèŠ±è´¹ä¸€äº›è®­ç»ƒæ—¶é—´ä¹Ÿæ˜¯å€¼å¾—çš„ã€‚&lt;/p&gt;
&lt;h3&gt;11.4.4Â Max-Norm Regularization&lt;/h3&gt;
&lt;p&gt;å¦å¤–ä¸€ç§æ¯”è¾ƒå—æ¬¢è¿çš„ç¥ç»ç½‘ç»œæ­£åˆ™åŒ–æ–¹æ³•æ˜¯max-normæ­£åˆ™ã€‚å¯¹äºæ¯ä¸€ä¸ªè¿æ¥æƒé‡$w$ï¼Œéƒ½ä½¿å…¶æ»¡è¶³$\left \| w \right \|_2 \leqÂ \gamma $ï¼Œå…¶ä¸­$\gamma$æ˜¯max-normè¶…å‚æ•°ã€‚&lt;/p&gt;
&lt;p&gt;ç®—æ³•å®ç°æ—¶ï¼Œä¸€èˆ¬ä¼šå…ˆè®¡ç®—$\left \| w \right \|_2$ï¼Œå¦‚æœéœ€è¦çš„è¯å°±å¯¹å…¶è¿›è¡Œä¿®å‰ªï¼ˆ$w \leftarrow w\frac{r}{\left \| w \right \|_2}$ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;é™ä½$\gamma$å°±å¯ä»¥å‡å°‘è¿‡æ‹Ÿåˆçš„å¯èƒ½æ€§ã€‚max-normæ­£åˆ™ä¹Ÿå¯ä»¥ç¼“è§£æ¢¯åº¦æ¶ˆå¤±ï¼ˆçˆ†ç‚¸ï¼‰é—®é¢˜ï¼ˆå¦‚æœæ²¡ä½¿ç”¨Batch Normalizationï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;TensorFlowå¹¶ä¸æä¾›ç°æˆçš„max-normæ­£åˆ™ï¼Œä¸è¿‡ä½œè€…è‡ªå·±å®ç°äº†ä¸€ä¸ªã€‚&lt;/p&gt;
&lt;h3&gt;11.4.5Â Data Augmentation&lt;/h3&gt;
&lt;p&gt;è¯¥æ­£åˆ™åŒ–æŠ€æœ¯å°±æ˜¯é€šè¿‡å·²ç»å­˜åœ¨çš„è®­ç»ƒé›†æ¥ç”Ÿæˆæ–°çš„è®­ç»ƒå®ä¾‹ã€‚è¿™ä¸€æŠ€å·§å°±æ˜¯ç”Ÿæˆé€¼çœŸçš„è®­ç»ƒæ•°æ®ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œäººæ— æ³•åŒºåˆ†è¯¥å®ä¾‹æ˜¯å¦è‡ªåŠ¨ç”Ÿæˆã€‚ç®€å•çš„å¢åŠ white noiseå¹¶æ²¡æœ‰å¸®åŠ©ï¼Œå› ä¸ºæ”¹å˜å¿…é¡»æ˜¯å¯å­¦ä¹ çš„ï¼ˆwhite noiseä¸èƒ½è¢«å­¦ä¹ ï¼‰ã€‚ä¾‹å¦‚ï¼Œæ ¹æ®ä¸€ä¸ªå›¾ç‰‡ï¼Œç”Ÿæˆå„ç§ä¸åŒçš„å›¾ç‰‡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/934105/201805/934105-20180519212055242-285907378.png&quot; alt=&quot;&quot; width=&quot;682&quot; height=&quot;420&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â å›¾11-10 ä½¿ç”¨ç°æœ‰è®­ç»ƒæ ·æœ¬ç”Ÿæˆæ–°çš„å®ä¾‹&lt;/p&gt;
&lt;h2&gt;11.5 å®ç”¨çš„æŒ‡å¯¼æ–¹é’ˆ&lt;/h2&gt;
&lt;p&gt;DNNé»˜è®¤é…ç½®ï¼š&lt;/p&gt;
&lt;p&gt;Initializationï¼šHe initialization&lt;br/&gt;Activation functionï¼š ELU&lt;br/&gt;Normalizationï¼š Batch Normalization&lt;br/&gt;Regularizationï¼š Dropout&lt;br/&gt;Optimizerï¼š Adam&lt;br/&gt;Learning rate scheduleï¼š None&lt;/p&gt;
&lt;p&gt;é»˜è®¤çš„é…ç½®å¯èƒ½éœ€è¦è°ƒæ•´ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å¦‚æœæ‰¾ä¸åˆ°ä¸€ä¸ªåˆé€‚çš„å­¦ä¹ ç‡ï¼ˆæ”¶æ•›å¤ªæ…¢ï¼Œå¢å¤§å­¦ä¹ ç‡ã€‚ç„¶åæ”¶æ•›åŠ å¿«äº†ï¼Œä½†æ˜¯æœ€ç»ˆçš„æ¨¡å‹ä¸æ˜¯æœ€ä¼˜çš„ï¼‰ï¼Œé‚£å°±å¯ä»¥å°è¯•å¢åŠ ä¸€ä¸ªlearning scheduleï¼Œæ¯”å¦‚exponential decayã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœè®­ç»ƒé›†å¤ªå°ï¼Œå¯ä»¥å®ç°data augmentation&lt;/li&gt;
&lt;li&gt;å¦‚æœæƒ³è¦ä¸€ä¸ªç¨€ç–çš„æ¨¡å‹ï¼Œå¯ä»¥å¢åŠ $l_1$æ­£åˆ™ã€‚éœ€è¦æ›´åŠ ç¨€ç–çš„è¯ï¼Œå°è¯•ä½¿ç”¨FTRLä»£æ›¿Adamä¼˜åŒ–ï¼Œå¹¶é…åˆ$l_1$æ­£åˆ™ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœéœ€è¦ä¸€ä¸ªèƒ½å¤Ÿå¿«é€Ÿé¢„æµ‹çš„æ¨¡å‹ï¼Œé‚£ä¹Ÿè®¸å°±éœ€è¦æ”¾å¼ƒBatch Normalizationï¼Œæ”¹ä¸ºELUæ¿€æ´»å‡½æ•°ã€‚ç¨€ç–çš„æ¨¡å‹ä¹Ÿèƒ½åŠ å¿«é¢„æµ‹æ—¶é—´ã€‚&lt;/li&gt;
&lt;/ul&gt;
</description>
<pubDate>Sat, 19 May 2018 13:39:00 +0000</pubDate>
<dc:creator>royhoo</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/royhoo/p/Training-Deep-Neural-Nets.html</dc:identifier>
</item>
</channel>
</rss>