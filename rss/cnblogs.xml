<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>åšå®¢å›­_é¦–é¡µ</title>
<link></link>
<description>ä»£ç æ”¹å˜ä¸–ç•Œ</description>
<item>
<title>EntityFramework Core 2.0æ‰§è¡ŒåŸå§‹æŸ¥è¯¢å¦‚ä½•é˜²æ­¢SQLæ³¨å…¥ï¼Ÿ - Jeffcky</title>
<link>http://www.cnblogs.com/CreateMyself/p/8481331.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/CreateMyself/p/8481331.html</guid>
<description>&lt;h2&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;æ¥ä¸‹æ¥ä¸€æ®µæ—¶é—´æˆ‘ä»¬æ¥è®²è®²EntityFramework CoreåŸºç¡€ï¼Œç²¾ç®€çš„å†…å®¹ï¼Œæ·±å…¥æµ…å‡ºï¼Œå¸Œæœ›ä¸ºæƒ³å­¦ä¹ EntityFramework Coreçš„ç«¥é‹æä¾›ä¸€ç‚¹å¸®åŠ©ã€‚&lt;/p&gt;
&lt;h2&gt;EntityFramework Coreæ‰§è¡ŒåŸå§‹æŸ¥è¯¢&lt;/h2&gt;
&lt;p&gt;åœ¨EntityFramework Coreä¸­æ‰§è¡ŒåŸå§‹æŸ¥è¯¢æˆ‘ä»¬å€ŸåŠ©FromSqlæ¥å®ç°ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
            &lt;span&gt;using&lt;/span&gt; (&lt;span&gt;var&lt;/span&gt; context = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; EFCoreDbContext())
            {
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; orders =&lt;span&gt; context.Orders
                    .FromSql(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;SELECT * FROM dbo.Orders&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
                    .ToList();
            }    &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/589642/201802/589642-20180227223221457-1141883474.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯æœ€ç®€å•ä¸”ä¸å¸¦ä»»ä½•æ¡ä»¶çš„æŸ¥è¯¢æ–¹å¼ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹æœ‰æ¡ä»¶çš„æŸ¥è¯¢æˆ‘ä»¬åº”è¯¥å¦‚ä½•æŸ¥è¯¢ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
            &lt;span&gt;using&lt;/span&gt; (&lt;span&gt;var&lt;/span&gt; context = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; EFCoreDbContext())
            {
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; parameters = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; SqlParameter[]
                {
                    &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; SqlParameter(){ ParameterName = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;@p0&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, Value = &lt;span&gt;1&lt;/span&gt;, SqlDbType =&lt;span&gt; System.Data.SqlDbType.Int }
                };

                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; orders =&lt;span&gt; context.Orders
                    .FromSql(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;SELECT * FROM dbo.Orders WHERE Id = @p0&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, parameters)
                    .ToList();
            }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/589642/201802/589642-20180227223741828-1137580802.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;é™¤äº†ä»¥ä¸Šåˆ©ç”¨å‚æ•°åŒ–æŸ¥è¯¢æ–¹å¼å¤–ï¼Œè‹¥æˆ‘ä»¬è¿˜å€ŸåŠ©string.formatæˆ–è€…C# 6.0å‡ºç°çš„æ–°ç‰¹æ€§å­—ç¬¦ä¸²æ’å€¼å³ç¾å…ƒç¬¦å·$æ¥æŸ¥è¯¢æœ€ç»ˆç”Ÿæˆçš„SQLæ˜¯å¦ä»ç„¶æ˜¯ä»¥å‚æ•°åŒ–æŸ¥è¯¢å‘¢ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
            &lt;span&gt;using&lt;/span&gt; (&lt;span&gt;var&lt;/span&gt; context = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; EFCoreDbContext())
            {

                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; orders =&lt;span&gt; context.Orders
                    .FromSql($&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;SELECT * FROM dbo.Orders WHERE Id = {1}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
                    .ToList();
            }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/589642/201802/589642-20180227224128787-269227215.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç”±ä¸Šæˆ‘ä»¬çœ‹å‡ºå³ä½¿åˆ©ç”¨å­—ç¬¦ä¸²æ’å€¼æœ€ç»ˆä»ç„¶ç¿»è¯‘æˆå‚æ•°åŒ–SQLã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥çœ‹çœ‹å­—ç¬¦ä¸²æ‹¼æ¥æŸ¥è¯¢æ–¹å¼ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
            &lt;span&gt;using&lt;/span&gt; (&lt;span&gt;var&lt;/span&gt; context = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; EFCoreDbContext())
            {

                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; searchString = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Jeffcky&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;

                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; blogs =&lt;span&gt; context.Blogs
                    .FromSql(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;SELECT Id, Name, CreatedTime, Url, ModifiedTime FROM dbo.Blogs &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; +
                    &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;WHERE Name = '&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; + searchString + &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
                    .ToList();
            }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/589642/201802/589642-20180227224743891-1467140498.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶æˆ‘ä»¬é€šè¿‡æ§åˆ¶å°æ‰“å°èƒ½å¤Ÿçœ‹å‡ºæœ€ç»ˆç”Ÿæˆçš„SQLè¯­å¥æ˜¯ä»¥å­—ç¬¦ä¸²å½¢å¼å±•ç¤ºï¼Œåœ¨EntityFramework Core 2.0+ä¸Šæ‰§è¡ŒåŸå§‹æŸ¥è¯¢çš„APiå³FromSqlæœ‰é‡è½½æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; IQueryable&amp;lt;TEntity&amp;gt; FromSql&amp;lt;TEntity&amp;gt;([NotNullAttribute] &lt;span&gt;this&lt;/span&gt; IQueryable&amp;lt;TEntity&amp;gt; source, [NotNullAttribute][NotParameterized] FormattableString sql) &lt;span&gt;where&lt;/span&gt; TEntity : &lt;span&gt;class&lt;/span&gt;;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æˆ‘ä»¬åˆ©ç”¨ä¸Šè¿°FromSqlé‡è½½æ–¹æ³•ä¼ é€’å­—ç¬¦ä¸²å‚æ•°ï¼ŒåŒæ—¶åœ¨æŸ¥è¯¢å­—ç¬¦ä¸²ä¸­æ·»åŠ å¯¹æ•°æ®åº“è¡¨æ“ä½œï¼ŒéªŒè¯EF Coreæ˜¯å¦èƒ½é˜²æ­¢SQLæ³¨å…¥ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
            &lt;span&gt;using&lt;/span&gt; (&lt;span&gt;var&lt;/span&gt; context = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; EFCoreDbContext())
            {

                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; searchString = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Jeffcky; DROP TABLE dbo.Blogs;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;

                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; blogs =&lt;span&gt; context.Blogs
                    .FromSql(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;SELECT Id, Name, Url, CreatedTime, ModifiedTime FROM dbo.Blogs &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
                    + &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; WHERE Name = {0}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, searchString)
                    .ToList();
            }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/589642/201802/589642-20180227225342266-1296989122.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p class=&quot;15&quot;&gt;ç»è¿‡éªŒè¯æ‚¨ä¼šå‘ç°ä¸Šè¿°æˆ‘ä»¬æ³¨å…¥ä¸Šè¿°Blogsè¡¨çš„SQLè¯­å¥ï¼Œæœ€ç»ˆè¡¨å°†ä¸ä¼šåˆ é™¤ã€‚æˆ‘ä»¬çœ‹åˆ°å½“æœªåˆ©ç”¨é‡è½½æ–¹æ³•è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œæ­¤æ—¶å‚æ•°å°†ä»¥å­—ç¬¦ä¸²å½¢å¼å±•ç¤ºï¼Œè¿™ç§æƒ…å†µææ˜“å¼•èµ·SQLæ³¨å…¥é—®é¢˜ã€‚C# 6.0å¼•å…¥äº†å­—ç¬¦ä¸²æ’å€¼ï¼ˆString Interpolationï¼‰ï¼Œæ­¤ç‰¹æ€§èƒ½å¤Ÿå…è®¸C#è¡¨è¾¾å¼ç›´æ¥åµŒå…¥åˆ°å­—ç¬¦ä¸²æ–‡æœ¬ä¸­ï¼Œä¸ºè¿è¡Œæ—¶æ„å»ºå­—ç¬¦ä¸²æä¾›äº†ä¸€ä¸ªå¾ˆå¥½çš„æ–¹æ³•ã€‚åœ¨EF Core 2.0ç‰¹æ€§ä¸­ï¼Œå¯¹FromSqlå’ŒExecuteSqlCommandæ–¹æ³•éƒ½æ·»åŠ äº†å¯¹æ’å…¥å­—ç¬¦ä¸²çš„ç‰¹æ®Šæ”¯æŒã€‚æ­¤æ–°ç‰¹æ€§çš„æ”¯æŒå…è®¸ä»¥å®‰å…¨çš„æ–¹å¼ä½¿ç”¨Cï¼ƒå­—ç¬¦ä¸²æ’å€¼ã€‚å³é˜²æ­¢åœ¨è¿è¡Œæ—¶åŠ¨æ€æ„å»ºSQLæ—¶å¯èƒ½å‘ç”ŸSQLæ³¨å…¥é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;æ˜¯ä¸æ˜¯åˆ°äº†è¿™é‡Œå°±è¿™æ ·ç»“æŸäº†å‘¢ï¼Ÿæ˜¾ç„¶ä¸æ˜¯è¿™æ ·ï¼Œæ¥ä¸‹æ¥å’±ä»¬å†æ¥çœ‹çœ‹å¦å¤–ä¸€ç§æƒ…å†µï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
            &lt;span&gt;using&lt;/span&gt; (&lt;span&gt;var&lt;/span&gt; context = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; EFCoreDbContext())
            {

                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; author = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Jeffcky Wang&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; query = $&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;SELECT * FROM Blogs WHERE Name = {author}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; blogs =&lt;span&gt; context.Blogs.FromSql(query).ToList();
            }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/589642/201802/589642-20180227230419562-1716297346.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/589642/201802/589642-20180227230553142-494571917.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ ·çš„è¯­æ³•é”™è¯¯æ˜¾è€Œæ˜“è§ï¼Œæˆ‘ä»¬éœ€è¦ç”¨å•å¼•å·å°†å˜é‡åŒ…å«èµ·æ¥æ‰èƒ½é¿å…è¯­æ³•é”™è¯¯ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
            &lt;span&gt;using&lt;/span&gt; (&lt;span&gt;var&lt;/span&gt; context = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; EFCoreDbContext())
            {

                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; author = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Jeffcky Wang&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; query = $&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;SELECT * FROM Blogs WHERE Name = &lt;span&gt;'{author}'&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; blogs =&lt;span&gt; context.Blogs.FromSql(query).ToList();
            }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä¸Šè¿°æƒ…å†µä¸‹ï¼ŒEF Coreä¾ç„¶å°†æ‰§è¡Œæ˜æ–‡å­—ç¬¦ä¸²è€Œä¸æ˜¯ä½œä¸ºå˜é‡æŸ¥è¯¢å¹¶æœªä»¥å‚æ•°åŒ–æ‰§è¡Œã€‚å¦‚æœå˜é‡åŒ…å«æ¶æ„å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆEF Coreå°†æ ¹æœ¬æ— æ³•é˜²èŒƒå¹¶ä¿æŠ¤SQLã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦é€šè¿‡EF Coreæ‰§è¡ŒåŸå§‹T-SQLï¼Œåˆ™åº”ä½¿ç”¨å‚æ•°åŒ–SQLæˆ–åˆ©ç”¨FormatttableStringï¼ŒFromSqlæœ‰ä¸¤ä¸ªé‡è½½ï¼Œå…¶ä¸€ä¸ºé€šè¿‡FormatttableStringå¯æ ¼å¼åŒ–å­—ç¬¦ä¸²å‚æ•°ï¼Œå…¶äºŒä¸ºåŸå§‹å­—ç¬¦ä¸²ä¸”å¯ä¼ é€’æŸ¥è¯¢å‚æ•°ã€‚æ‰€ä»¥ä¸Šè¿°é”™è¯¯ï¼Œæˆ‘ä»¬å¯åˆ©ç”¨FormatttableStringæ¥æ‰§è¡Œï¼ŒåŒæ—¶åœ¨åˆ©ç”¨FromSqlæ–¹æ³•æŸ¥è¯¢è¿‡åæˆ‘ä»¬ä»å¯ä»¥ç»§ç»­è¿›è¡ŒæŸ¥è¯¢ï¼Œæ¯”å¦‚å¦‚ä¸‹å…³è”æŸ¥è¯¢Postsè¡¨æ•°æ®ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
            &lt;span&gt;using&lt;/span&gt; (&lt;span&gt;var&lt;/span&gt; context = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; EFCoreDbContext())
            {

                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; searchString = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Jeffcky Wang&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;

                FormattableString sql &lt;/span&gt;= &lt;span&gt;$&lt;/span&gt;&lt;span&gt;&lt;span&gt;@&lt;/span&gt;&quot;&lt;/span&gt;&lt;span&gt;SELECT Id, Name, Url, CreatedTime, ModifiedTime FROM dbo.Blogs WHERE Name = {searchString}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;

                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; blogs =&lt;span&gt; context.Blogs
                    .FromSql&lt;/span&gt;&lt;span&gt;(sql)
                    .Include(d &lt;/span&gt;=&amp;gt;&lt;span&gt; d.Posts)
                    .ToList();
            }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/589642/201802/589642-20180227232807576-425298006.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;é€šè¿‡ã€&lt;span&gt;$@&lt;/span&gt;ã€‘å¹¶åˆ©ç”¨FormattableStringé‡è½½æˆ–è€…ä¼ é€’å‚æ•°åŒ–å˜é‡æ¥é˜²æ­¢SQLæ³¨å…¥é—®é¢˜ï¼Œå¸Œæœ›æ‚¨å‘ç°EF Core 2.0ä¸­è¿™ä¸ªæ–°ç‰¹æ€§ï¼ŒåŒæ—¶ä¸è¦å¿˜è®°å®ƒä¹Ÿç”¨æ¥æ‰¿æ‹…æ›´å¤§çš„è´£ä»»ï¼Œç”±äºSQLæ³¨å…¥æ”»å‡»ï¼Œä¸ä¼šè®©æˆ‘ä»¬æ‰€å†™ä»£ç å­˜åœ¨æ¼æ´ã€‚&lt;/p&gt;
&lt;h2&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;æœ¬èŠ‚æˆ‘ä»¬è¯¦ç»†è®²è§£äº†EF Core 2.0ä¸­æ‰§è¡ŒåŸå§‹æŸ¥è¯¢å¦‚ä½•é˜²æ­¢SQLæ³¨å…¥é—®é¢˜ï¼Œç²¾ç®€çš„å†…å®¹ï¼Œç®€å•çš„è®²è§£ï¼Œå¸Œæœ›èƒ½å¸®åŠ©åˆ°æ‚¨ã€‚æˆ‘ä»¬æ˜å¤©å†ä¼šã€‚&lt;/p&gt;
</description>
<pubDate>Tue, 27 Feb 2018 15:32:00 +0000</pubDate>
<dc:creator>Jeffcky</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/CreateMyself/p/8481331.html</dc:identifier>
</item>
<item>
<title>Effective Java ç¬¬ä¸‰ç‰ˆâ€”â€”33. ä¼˜å…ˆè€ƒè™‘ç±»å‹å®‰å…¨çš„å¼‚æ„å®¹å™¨ - æ—æœ¬æ‰˜</title>
<link>http://www.cnblogs.com/IcanFixIt/p/8481317.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/IcanFixIt/p/8481317.html</guid>
<description>&lt;blockquote readability=&quot;9&quot;&gt;
&lt;p&gt;Tips&lt;br/&gt;ã€ŠEffective Java, Third Editionã€‹ä¸€ä¹¦è‹±æ–‡ç‰ˆå·²ç»å‡ºç‰ˆï¼Œè¿™æœ¬ä¹¦çš„ç¬¬äºŒç‰ˆæƒ³å¿…å¾ˆå¤šäººéƒ½è¯»è¿‡ï¼Œå·ç§°Javaå››å¤§åè‘—ä¹‹ä¸€ï¼Œä¸è¿‡ç¬¬äºŒç‰ˆ2009å¹´å‡ºç‰ˆï¼Œåˆ°ç°åœ¨å·²ç»å°†è¿‘8å¹´çš„æ—¶é—´ï¼Œä½†éšç€Java 6ï¼Œ7ï¼Œ8ï¼Œç”šè‡³9çš„å‘å¸ƒï¼ŒJavaè¯­è¨€å‘ç”Ÿäº†æ·±åˆ»çš„å˜åŒ–ã€‚&lt;br/&gt;åœ¨è¿™é‡Œç¬¬ä¸€æ—¶é—´ç¿»è¯‘æˆä¸­æ–‡ç‰ˆã€‚ä¾›å¤§å®¶å­¦ä¹ åˆ†äº«ä¹‹ç”¨ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/4366140-ca5216df5c1029f6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;Effective Java, Third Edition&quot;/&gt;&lt;/p&gt;

&lt;p&gt;æ³›å‹çš„å¸¸è§ç”¨æ³•åŒ…æ‹¬é›†åˆï¼Œå¦‚&lt;code&gt;Set &amp;lt;E&amp;gt;&lt;/code&gt;å’Œ&lt;code&gt;Map &amp;lt;Kï¼ŒV&amp;gt;&lt;/code&gt;å’Œå•ä¸ªå…ƒç´ å®¹å™¨ï¼Œå¦‚&lt;code&gt;ThreadLocal &amp;lt;T&amp;gt;&lt;/code&gt;å’Œ&lt;code&gt;AtomicReference &amp;lt;T&amp;gt;&lt;/code&gt;ã€‚ åœ¨æ‰€æœ‰è¿™äº›ç”¨é€”ä¸­ï¼Œå®ƒéƒ½æ˜¯å‚æ•°åŒ–çš„å®¹å™¨ã€‚ è¿™é™åˆ¶äº†æ¯ä¸ªå®¹å™¨åªèƒ½æœ‰å›ºå®šæ•°é‡çš„ç±»å‹å‚æ•°ã€‚ é€šå¸¸è¿™æ­£æ˜¯ä½ æƒ³è¦çš„ã€‚ ä¸€ä¸ª&lt;code&gt;Set&lt;/code&gt;æœ‰å•ä¸€çš„ç±»å‹å‚æ•°ï¼Œè¡¨ç¤ºå®ƒçš„å…ƒç´ ç±»å‹; ä¸€ä¸ª&lt;code&gt;Map&lt;/code&gt;æœ‰ä¸¤ä¸ªï¼Œä»£è¡¨å®ƒçš„é”®å’Œå€¼çš„ç±»å‹ï¼›ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œæœ‰æ—¶å€™ï¼Œä½ éœ€è¦æ›´å¤šçš„çµæ´»æ€§ã€‚ ä¾‹å¦‚ï¼Œæ•°æ®åº“ä¸€è¡Œè®°å½•å¯ä»¥å…·æœ‰ä»»æ„å¤šåˆ—ï¼Œå¹¶ä¸”èƒ½å¤Ÿä»¥ç±»å‹å®‰å…¨çš„æ–¹å¼è®¿é—®å®ƒä»¬æ˜¯å¾ˆå¥½çš„ã€‚ å¹¸è¿çš„æ˜¯ï¼Œæœ‰ä¸€ä¸ªç®€å•çš„æ–¹æ³•å¯ä»¥è¾¾åˆ°è¿™ä¸ªæ•ˆæœã€‚ è¿™ä¸ªæƒ³æ³•æ˜¯å‚æ•°åŒ–é”®ï¼ˆkeyï¼‰è€Œä¸æ˜¯å®¹å™¨ã€‚ ç„¶åå°†å‚æ•°åŒ–çš„é”®æäº¤ç»™å®¹å™¨ä»¥æ’å…¥æˆ–æ£€ç´¢å€¼ã€‚ æ³›å‹ç±»å‹ç³»ç»Ÿç”¨äºä¿è¯å€¼çš„ç±»å‹ä¸å…¶é”®ä¸€è‡´ã€‚&lt;/p&gt;
&lt;p&gt;ä½œä¸ºè¿™ç§æ–¹æ³•çš„ä¸€ä¸ªç®€å•ç¤ºä¾‹ï¼Œè¯·è€ƒè™‘ä¸€ä¸ªFavoritesç±»ï¼Œå®ƒå…è®¸å…¶å®¢æˆ·ç«¯ä¿å­˜å’Œæ£€ç´¢ä»»æ„å¤šç§ç±»å‹çš„&lt;code&gt;favorite&lt;/code&gt;å®ä¾‹ã€‚ è¯¥ç±»å‹çš„Classå¯¹è±¡å°†æ‰®æ¼”å‚æ•°åŒ–é”®çš„ä¸€éƒ¨åˆ†ã€‚å…¶åŸå› æ˜¯è¿™&lt;code&gt;Class&lt;/code&gt;ç±»æ˜¯æ³›å‹çš„ã€‚ ç±»çš„ç±»å‹ä»å­—é¢ä¸Šæ¥è¯´ä¸æ˜¯ç®€å•çš„&lt;code&gt;Class&lt;/code&gt;ï¼Œè€Œæ˜¯&lt;code&gt;Class &amp;lt;T&amp;gt;&lt;/code&gt;ã€‚ ä¾‹å¦‚ï¼Œ&lt;code&gt;String.class&lt;/code&gt;çš„ç±»å‹ä¸º&lt;code&gt;Class &amp;lt;String&amp;gt;&lt;/code&gt;ï¼Œ&lt;code&gt;Integer.classçš„&lt;/code&gt;ç±»å‹ä¸º&lt;code&gt;Class &amp;lt;Integer&amp;gt;&lt;/code&gt;ã€‚ å½“åœ¨æ–¹æ³•ä¸­ä¼ é€’å­—é¢ç±»ä¼ é€’ç¼–è¯‘æ—¶å’Œè¿è¡Œæ—¶ç±»å‹ä¿¡æ¯æ—¶ï¼Œå®ƒè¢«ç§°ä¸ºç±»å‹ä»¤ç‰Œï¼ˆtype tokenï¼‰[Bracha04]ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Favorites&lt;/code&gt;ç±»çš„APIå¾ˆç®€å•ã€‚ å®ƒçœ‹èµ·æ¥å°±åƒä¸€ä¸ªç®€å•Mapç±»ï¼Œé™¤äº†è¯¥é”®æ˜¯å‚æ•°åŒ–çš„ä»¥å¤–ã€‚ å®¢æˆ·ç«¯åœ¨è®¾ç½®å’Œè·å–&lt;code&gt;favorites&lt;/code&gt;å®ä¾‹æ—¶å‘ˆç°ä¸€ä¸ªClasså¯¹è±¡ã€‚ è¿™é‡Œæ˜¯APIï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;// Typesafe heterogeneous container pattern - API
public class Favorites {
    public &amp;lt;T&amp;gt; void putFavorite(Class&amp;lt;T&amp;gt; type, T instance);
    public &amp;lt;T&amp;gt; T getFavorite(Class&amp;lt;T&amp;gt; type);
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä¸€ä¸ªæ¼”ç¤º&lt;code&gt;Favorites&lt;/code&gt;ç±»ï¼Œä¿å­˜ï¼Œæ£€ç´¢å’Œæ‰“å°å–œæ¬¢çš„&lt;code&gt;String&lt;/code&gt;ï¼Œ&lt;code&gt;Integer&lt;/code&gt;å’Œ&lt;code&gt;Class&lt;/code&gt;å®ä¾‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;// Typesafe heterogeneous container pattern - client

public static void main(String[] args) {

    Favorites f = new Favorites();

    f.putFavorite(String.class, &quot;Java&quot;);

    f.putFavorite(Integer.class, 0xcafebabe);

    f.putFavorite(Class.class, Favorites.class);

     String favoriteString = f.getFavorite(String.class);

    int favoriteInteger = f.getFavorite(Integer.class);

    Class&amp;lt;?&amp;gt; favoriteClass = f.getFavorite(Class.class);

    System.out.printf(&quot;%s %x %s%n&quot;, favoriteString,

        favoriteInteger, favoriteClass.getName());
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ­£å¦‚ä½ æ‰€æœŸæœ›çš„ï¼Œè¿™ä¸ªç¨‹åºæ‰“å°&lt;code&gt;Java cafebabe Favorites&lt;/code&gt;ã€‚ è¯·æ³¨æ„ï¼Œé¡ºä¾¿è¯´ä¸€ä¸‹ï¼ŒJavaçš„&lt;code&gt;printf&lt;/code&gt;æ–¹æ³•ä¸Cè¯­è¨€çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œåº”è¯¥ä½¿ç”¨&lt;code&gt;ï¼…n&lt;/code&gt;ï¼Œè€Œåœ¨Cä¸­ä½¿ç”¨&lt;code&gt;\n&lt;/code&gt;ã€‚&lt;code&gt;ï¼…n&lt;/code&gt;ç”Ÿæˆé€‚ç”¨çš„ç‰¹å®šäºå¹³å°çš„è¡Œåˆ†éš”ç¬¦ï¼Œè¯¥åˆ†éš”ç¬¦åœ¨å¾ˆå¤šä½†ä¸æ˜¯æ‰€æœ‰å¹³å°ä¸Šéƒ½æ˜¯&lt;code&gt;\n&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Favorites&lt;/code&gt;å®ä¾‹æ˜¯ç±»å‹å®‰å…¨çš„ï¼šå½“ä½ è¯·æ±‚ä¸€ä¸ªå­—ç¬¦ä¸²æ—¶å®ƒæ°¸è¿œä¸ä¼šè¿”å›ä¸€ä¸ªæ•´æ•°ã€‚ å®ƒä¹Ÿæ˜¯å¼‚æ„çš„ï¼šä¸æ™®é€šMapä¸åŒï¼Œæ‰€æœ‰çš„é”®éƒ½æ˜¯ä¸åŒçš„ç±»å‹ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å°†&lt;code&gt;Favorites&lt;/code&gt;ç§°ä¸ºç±»å‹å®‰å…¨å¼‚æ„å®¹å™¨ï¼ˆtypesafe heterogeneous container.ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Favorites&lt;/code&gt;çš„å®ç°éå¸¸å°å·§ã€‚ è¿™æ˜¯å®Œæ•´çš„ä»£ç ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;// Typesafe heterogeneous container pattern - implementation
public class Favorites {
    private Map&amp;lt;Class&amp;lt;?&amp;gt;, Object&amp;gt; favorites = new HashMap&amp;lt;&amp;gt;();

    public &amp;lt;T&amp;gt; void putFavorite(Class&amp;lt;T&amp;gt; type, T instance) {
        favorites.put(Objects.requireNonNull(type), instance);
    }

    public &amp;lt;T&amp;gt; T getFavorite(Class&amp;lt;T&amp;gt; type) {
        return type.cast(favorites.get(type));
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œæœ‰ä¸€äº›å¾®å¦™çš„äº‹æƒ…å‘ç”Ÿã€‚ æ¯ä¸ª&lt;code&gt;Favorites&lt;/code&gt;å®ä¾‹éƒ½ç”±ä¸€ä¸ªåä¸º&lt;code&gt;favorites&lt;/code&gt;ç§æœ‰çš„&lt;code&gt;Map&amp;lt;Class&amp;lt;?&amp;gt;, Object&amp;gt;&lt;/code&gt;æ¥æ”¯æŒã€‚ ä½ å¯èƒ½è®¤ä¸ºæ— æ³•å°†ä»»ä½•å†…å®¹æ”¾å…¥æ­¤Mapä¸­ï¼Œå› ä¸ºè¿™æ˜¯æ— é™å®šçš„é€šé…ç¬¦ç±»å‹ï¼Œä½†äº‹å®æ°æ°ç›¸åã€‚ éœ€è¦æ³¨æ„çš„æ˜¯é€šé…ç¬¦ç±»å‹æ˜¯åµŒå¥—çš„ï¼šå®ƒä¸æ˜¯é€šé…ç¬¦ç±»å‹çš„Mapç±»å‹ï¼Œè€Œæ˜¯é”®çš„ç±»å‹ã€‚ è¿™æ„å‘³ç€æ¯ä¸ªé”®éƒ½å¯ä»¥æœ‰ä¸åŒçš„å‚æ•°åŒ–ç±»å‹ï¼šä¸€ä¸ªå¯ä»¥æ˜¯&lt;code&gt;Class &amp;lt;String&amp;gt;&lt;/code&gt;ï¼Œä¸‹ä¸€ä¸ª&lt;code&gt;Class &amp;lt;Integer&amp;gt;&lt;/code&gt;ç­‰ç­‰ã€‚ è¿™å°±æ˜¯å¼‚æ„çš„ç”±æ¥ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥è¦æ³¨æ„çš„æ˜¯ï¼Œfavoritesçš„Mapçš„å€¼ç±»å‹åªæ˜¯Objectã€‚ æ¢å¥è¯è¯´ï¼ŒMapä¸ä¿è¯é”®å’Œå€¼ä¹‹é—´çš„ç±»å‹å…³ç³»ï¼Œå³æ¯ä¸ªå€¼éƒ½æ˜¯ç”±å…¶é”®è¡¨ç¤ºçš„ç±»å‹ã€‚ äº‹å®ä¸Šï¼ŒJavaçš„ç±»å‹ç³»ç»Ÿå¹¶ä¸è¶³ä»¥è¡¨è¾¾è¿™ä¸€ç‚¹ã€‚ ä½†æ˜¯æˆ‘ä»¬çŸ¥é“è¿™æ˜¯çœŸçš„ï¼Œå¹¶åœ¨æ£€ç´¢ä¸€ä¸ªfavoriteæ—¶åˆ©ç”¨äº†è¿™ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;putFavorite&lt;/code&gt;å®ç°å¾ˆç®€å•ï¼šåªéœ€å°†ç»™å®šçš„Classå¯¹è±¡æ˜ å°„åˆ°ç»™å®šçš„favoritesçš„å®ä¾‹å³å¯ã€‚ å¦‚ä¸Šæ‰€è¿°ï¼Œè¿™ä¸¢å¼ƒäº†é”®å’Œå€¼ä¹‹é—´çš„â€œç±»å‹è”ç³»ï¼ˆtype linkageï¼‰â€ï¼›æ— æ³•çŸ¥é“è¿™ä¸ªå€¼æ˜¯ä¸æ˜¯é”®çš„ä¸€ä¸ªå®ä¾‹ã€‚ ä½†æ²¡å…³ç³»ï¼Œå› ä¸º&lt;code&gt;getFavorites&lt;/code&gt;æ–¹æ³•å¯ä»¥å¹¶ä¸”ç¡®å®é‡æ–°å»ºç«‹è¿™ç§å…³è”ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;getFavorite&lt;/code&gt;çš„å®ç°æ¯”&lt;code&gt;putFavorite&lt;/code&gt;æ›´å¤æ‚ã€‚ é¦–å…ˆï¼Œå®ƒä»favorites Mapä¸­è·å–ä¸ç»™å®šClasså¯¹è±¡ç›¸å¯¹åº”çš„å€¼ã€‚ è¿™æ˜¯è¿”å›çš„æ­£ç¡®å¯¹è±¡å¼•ç”¨ï¼Œä½†å®ƒå…·æœ‰é”™è¯¯çš„ç¼–è¯‘æ—¶ç±»å‹ï¼šå®ƒæ˜¯Objectï¼ˆfavorites mapçš„å€¼ç±»å‹ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦è¿”å›ç±»å‹&lt;code&gt;T&lt;/code&gt;ã€‚å› æ­¤ï¼Œ&lt;code&gt;getFavorite&lt;/code&gt;å®ç°åŠ¨æ€åœ°å°†å¯¹è±¡å¼•ç”¨è½¬æ¢ä¸ºClasså¯¹è±¡è¡¨ç¤ºçš„ç±»å‹ï¼Œä½¿ç”¨Classçš„&lt;code&gt;cast&lt;/code&gt;æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;cast&lt;/code&gt;æ–¹æ³•æ˜¯Javaçš„castæ“ä½œç¬¦çš„åŠ¨æ€æ¨¡æ‹Ÿã€‚å®ƒåªæ˜¯æ£€æŸ¥å®ƒçš„å‚æ•°æ˜¯å¦ç”±Classå¯¹è±¡è¡¨ç¤ºçš„ç±»å‹çš„å®ä¾‹ã€‚å¦‚æœæ˜¯ï¼Œå®ƒè¿”å›å‚æ•°ï¼›å¦åˆ™ä¼šæŠ›å‡º&lt;code&gt;ClassCastException&lt;/code&gt;å¼‚å¸¸ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå‡è®¾å®¢æˆ·ç«¯ä»£ç èƒ½å¤Ÿå¹²å‡€åœ°ç¼–è¯‘ï¼Œ&lt;code&gt;getFavorite&lt;/code&gt;ä¸­çš„å¼ºåˆ¶è½¬æ¢ä¸ä¼šæŠ›å‡º&lt;code&gt;ClassCastException&lt;/code&gt;å¼‚å¸¸ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œfavorites mapä¸­çš„å€¼å§‹ç»ˆä¸å…¶é”®çš„ç±»å‹ç›¸åŒ¹é…ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆè¿™ä¸ª&lt;code&gt;cast&lt;/code&gt;æ–¹æ³•ä¸ºæˆ‘ä»¬åšäº†ä»€ä¹ˆï¼Œå› ä¸ºå®ƒåªæ˜¯è¿”å›å®ƒçš„å‚æ•°ï¼Ÿ &lt;code&gt;cast&lt;/code&gt;çš„ç­¾åå……åˆ†åˆ©ç”¨äº†Classç±»æ˜¯æ³›å‹çš„äº‹å®ã€‚ å®ƒçš„è¿”å›ç±»å‹æ˜¯Classå¯¹è±¡çš„ç±»å‹å‚æ•°ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;public class Class&amp;lt;T&amp;gt; {
    T cast(Object obj);
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™æ­£æ˜¯&lt;code&gt;getFavorite&lt;/code&gt;æ–¹æ³•æ‰€éœ€è¦çš„ã€‚ è¿™æ­£æ˜¯ç¡®ä¿Favoritesç±»å‹å®‰å…¨ï¼Œè€Œä¸ç”¨æ±‚åŠ©ä¸€ä¸ªæœªç»æ£€æŸ¥çš„å¼ºåˆ¶è½¬æ¢çš„&lt;code&gt;T&lt;/code&gt;ç±»å‹ã€‚&lt;/p&gt;
&lt;p&gt;Favoritesç±»æœ‰ä¸¤ä¸ªé™åˆ¶å€¼å¾—æ³¨æ„ã€‚ é¦–å…ˆï¼Œæ¶æ„å®¢æˆ·å¯ä»¥é€šè¿‡ä½¿ç”¨åŸå§‹å½¢å¼çš„Classå¯¹è±¡ï¼Œè½»æ¾ç ´åFavoriteså®ä¾‹çš„ç±»å‹å®‰å…¨ã€‚ ä½†ç”Ÿæˆçš„å®¢æˆ·ç«¯ä»£ç åœ¨ç¼–è¯‘æ—¶ä¼šç”Ÿæˆæœªç»æ£€æŸ¥çš„è­¦å‘Šã€‚ è¿™ä¸æ­£å¸¸çš„é›†åˆå®ç°ï¼ˆå¦‚HashSetå’ŒHashMapï¼‰æ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚ é€šè¿‡ä½¿ç”¨åŸå§‹ç±»å‹HashSetï¼ˆæ¡ç›® 26ï¼‰ï¼Œå¯ä»¥è½»æ¾åœ°å°†å­—ç¬¦ä¸²æ”¾å…¥&lt;code&gt;HashSet &amp;lt;Integer&amp;gt;&lt;/code&gt;ä¸­ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ æ„¿æ„ä¸ºæ­¤ä»˜å‡ºä¸€ç‚¹ä»£ä»·ï¼Œå°±å¯ä»¥æ‹¥æœ‰è¿è¡Œæ—¶ç±»å‹å®‰å…¨æ€§ã€‚ ç¡®ä¿Favoritesæ°¸è¿œä¸è¿åç±»å‹ä¸å˜çš„æ–¹æ³•æ˜¯ï¼Œä½¿&lt;code&gt;putFavorite&lt;/code&gt;æ–¹æ³•æ£€æŸ¥è¯¥å®ä¾‹æ˜¯å¦ç”±typeè¡¨ç¤ºç±»å‹çš„å®ä¾‹ï¼Œå¹¶ä¸”æˆ‘ä»¬å·²ç»çŸ¥é“å¦‚ä½•æ‰§è¡Œæ­¤æ“ä½œã€‚åªéœ€ä½¿ç”¨åŠ¨æ€è½¬æ¢ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;// Achieving runtime type safety with a dynamic cast
public &amp;lt;T&amp;gt; void putFavorite(Class&amp;lt;T&amp;gt; type, T instance) {
    favorites.put(type, type.cast(instance));
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;java.util.Collections&lt;/code&gt;ä¸­æœ‰ä¸€äº›é›†åˆåŒ…è£…ç±»ï¼Œå¯ä»¥å‘æŒ¥ç›¸åŒçš„è¯€çªã€‚ å®ƒä»¬è¢«ç§°ä¸º&lt;code&gt;checkedSet&lt;/code&gt;ï¼Œ&lt;code&gt;checkedList&lt;/code&gt;ï¼Œ&lt;code&gt;checkedMap&lt;/code&gt;ç­‰ç­‰ã€‚ ä»–ä»¬çš„é™æ€å·¥å‚é™¤äº†ä¸€ä¸ªé›†åˆï¼ˆæˆ–Mapï¼‰ä¹‹å¤–è¿˜æœ‰ä¸€ä¸ªClasså¯¹è±¡ï¼ˆæˆ–ä¸¤ä¸ªï¼‰ã€‚ é™æ€å·¥å‚æ˜¯æ³›å‹æ–¹æ³•ï¼Œç¡®ä¿Classå¯¹è±¡å’Œé›†åˆçš„ç¼–è¯‘æ—¶ç±»å‹åŒ¹é…ã€‚ åŒ…è£…ç±»ä¸ºå®ƒä»¬åŒ…è£…çš„é›†åˆæ·»åŠ äº†å…·ä½“åŒ–ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæœ‰äººè¯•å›¾å°†&lt;code&gt;Coin&lt;/code&gt;æ”¾å…¥ä½ çš„&lt;code&gt;Collection &amp;lt;Stamp&amp;gt;&lt;/code&gt;ä¸­ï¼Œåˆ™åŒ…è£…ç±»åœ¨è¿è¡Œæ—¶ä¼šæŠ›å‡º&lt;code&gt;ClassCastException&lt;/code&gt;ã€‚ è¿™äº›åŒ…è£…ç±»å¯¹äºè¿½è¸ªåœ¨æ··åˆäº†æ³›å‹å’ŒåŸå§‹ç±»å‹çš„åº”ç”¨ç¨‹åºä¸­æ·»åŠ ä¸æ­£ç¡®ç±»å‹çš„å…ƒç´ åˆ°é›†åˆçš„å®¢æˆ·ç«¯ä»£ç å¾ˆæœ‰ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;Favoritesç±»çš„ç¬¬äºŒä¸ªé™åˆ¶æ˜¯å®ƒä¸èƒ½ç”¨äºä¸å¯å…·ä½“åŒ–çš„ï¼ˆnon-reifiableï¼‰ç±»å‹ï¼ˆæ¡ç›® 28ï¼‰ã€‚ æ¢å¥è¯è¯´ï¼Œä½ å¯ä»¥ä¿å­˜ä½ æœ€å–œæ¬¢çš„&lt;code&gt;String&lt;/code&gt;æˆ–&lt;code&gt;String []&lt;/code&gt;ï¼Œä½†ä¸èƒ½ä¿å­˜&lt;code&gt;List &amp;lt;String&amp;gt;&lt;/code&gt;ã€‚ å¦‚æœä½ å°è¯•ä¿å­˜ä½ æœ€å–œæ¬¢çš„&lt;code&gt;List &amp;lt;String&amp;gt;&lt;/code&gt;ï¼Œç¨‹åºå°†ä¸èƒ½ç¼–è¯‘ã€‚ åŸå› æ˜¯æ— æ³•è·å–&lt;code&gt;List &amp;lt;String&amp;gt;&lt;/code&gt;çš„Classå¯¹è±¡ã€‚ &lt;code&gt;List &amp;lt;String&amp;gt; .class&lt;/code&gt;æ˜¯è¯­æ³•é”™è¯¯ï¼Œä¹Ÿæ˜¯ä¸€ä»¶å¥½äº‹ã€‚ &lt;code&gt;List &amp;lt;String&amp;gt;&lt;/code&gt;å’Œ&lt;code&gt;List &amp;lt;Integer&amp;gt;&lt;/code&gt;å…±äº«ä¸€ä¸ªClasså¯¹è±¡ï¼Œå³&lt;code&gt;List.class&lt;/code&gt;ã€‚ å¦‚æœâ€œå­—é¢ç±»å‹ï¼ˆtype literalsï¼‰â€&lt;code&gt;List &amp;lt;String&amp;gt; .class&lt;/code&gt;å’Œ&lt;code&gt;List &amp;lt;Integer&amp;gt; .class&lt;/code&gt;åˆæ³•å¹¶è¿”å›ç›¸åŒçš„å¯¹è±¡å¼•ç”¨ï¼Œé‚£ä¹ˆå®ƒä¼šå¯¹Favoriteså¯¹è±¡çš„å†…éƒ¨é€ æˆä¸¥é‡ç ´åã€‚ å¯¹äºè¿™ç§é™åˆ¶ï¼Œæ²¡æœ‰å®Œå…¨ä»¤äººæ»¡æ„çš„è§£å†³æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;Favoritesä½¿ç”¨çš„ç±»å‹ä»¤ç‰Œ( type tokens)æ˜¯æ— é™åˆ¶çš„ï¼š&lt;code&gt;getFavorite&lt;/code&gt;å’Œ&lt;code&gt;putFavorite&lt;/code&gt;æ¥å—ä»»ä½•Classå¯¹è±¡ã€‚ æœ‰æ—¶ä½ å¯èƒ½éœ€è¦é™åˆ¶å¯ä¼ é€’ç»™æ–¹æ³•çš„ç±»å‹ã€‚ è¿™å¯ä»¥é€šè¿‡ä¸€ä¸ªæœ‰é™å®šçš„ç±»å‹ä»¤ç‰Œæ¥å®ç°ï¼Œè¯¥ä»¤ç‰Œåªæ˜¯ä¸€ä¸ªç±»å‹ä»¤ç‰Œï¼Œå®ƒä½¿ç”¨é™å®šçš„ç±»å‹å‚æ•°ï¼ˆæ¡ç›® 30ï¼‰æˆ–é™å®šçš„é€šé…ç¬¦ï¼ˆæ¡ç›® 31ï¼‰æ¥æ”¾ç½®å¯ä»¥è¡¨ç¤ºçš„ç±»å‹çš„è¾¹ç•Œã€‚&lt;/p&gt;
&lt;p&gt;æ³¨è§£APIï¼ˆæ¡ç›® 39ï¼‰å¹¿æ³›ä½¿ç”¨é™å®šç±»å‹çš„ä»¤ç‰Œã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯åœ¨è¿è¡Œæ—¶è¯»å–æ³¨è§£çš„æ–¹æ³•ã€‚ æ­¤æ–¹æ³•æ¥è‡ª&lt;code&gt;AnnotatedElement&lt;/code&gt;æ¥å£ï¼Œè¯¥æ¥å£ç”±è¡¨ç¤ºç±»ï¼Œæ–¹æ³•ï¼Œå±æ€§å’Œå…¶ä»–ç¨‹åºå…ƒç´ çš„åå°„ç±»å‹å®ç°ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;public &amp;lt;T extends Annotation&amp;gt;
    T getAnnotation(Class&amp;lt;T&amp;gt; annotationType);&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å‚æ•°&lt;code&gt;annotationType&lt;/code&gt;æ˜¯è¡¨ç¤ºæ³¨è§£ç±»å‹çš„é™å®šç±»å‹ä»¤ç‰Œã€‚ è¯¥æ–¹æ³•è¿”å›è¯¥ç±»å‹çš„å…ƒç´ çš„æ³¨è§£ï¼ˆå¦‚æœå®ƒæœ‰ä¸€ä¸ªï¼‰ï¼›å¦‚æœæ²¡æœ‰ï¼Œåˆ™è¿”å›nullã€‚ æœ¬è´¨ä¸Šï¼Œæ³¨è§£å…ƒç´ æ˜¯ä¸€ä¸ªç±»å‹å®‰å…¨çš„å¼‚æ„å®¹å™¨ï¼Œå…¶é”®æ˜¯æ³¨è§£ç±»å‹ã€‚&lt;/p&gt;
&lt;p&gt;å‡è®¾æœ‰ä¸€ä¸ª&lt;code&gt;Class &amp;lt;?&amp;gt;&lt;/code&gt;ç±»å‹çš„å¯¹è±¡ï¼Œå¹¶ä¸”æƒ³è¦å°†å®ƒä¼ é€’ç»™éœ€è¦é™å®šç±»å‹ä»¤ç‰Œï¼ˆå¦‚&lt;code&gt;getAnnotation&lt;/code&gt;ï¼‰çš„æ–¹æ³•ã€‚ å¯ä»¥å°†å¯¹è±¡è½¬æ¢ä¸º&lt;code&gt;Class&amp;lt;? extends Annotation&amp;gt;&lt;/code&gt;ï¼Œä½†æ˜¯è¿™ä¸ªè½¬æ¢æ²¡æœ‰è¢«æ£€æŸ¥ï¼Œæ‰€ä»¥å®ƒä¼šäº§ç”Ÿä¸€ä¸ªç¼–è¯‘æ—¶è­¦å‘Šï¼ˆæ¡ç›® 27ï¼‰ã€‚ å¹¸è¿çš„æ˜¯ï¼ŒClassç±»æä¾›äº†ä¸€ç§å®‰å…¨ï¼ˆåŠ¨æ€ï¼‰æ‰§è¡Œè¿™ç§ç±»å‹è½¬æ¢çš„å®ä¾‹æ–¹æ³•ã€‚ è¯¥æ–¹æ³•è¢«ç§°ä¸º&lt;code&gt;asSubclass&lt;/code&gt;ï¼Œå¹¶ä¸”å®ƒè½¬æ¢æ‰€è°ƒç”¨çš„Classå¯¹è±¡æ¥è¡¨ç¤ºç”±å…¶å‚æ•°è¡¨ç¤ºçš„ç±»çš„å­ç±»ã€‚ å¦‚æœè½¬æ¢æˆåŠŸï¼Œè¯¥æ–¹æ³•è¿”å›å®ƒçš„å‚æ•°ï¼›å¦‚æœå¤±è´¥ï¼Œåˆ™æŠ›å‡º&lt;code&gt;ClassCastException&lt;/code&gt;å¼‚å¸¸ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯å¦‚ä½•ä½¿ç”¨&lt;code&gt;asSubclass&lt;/code&gt;æ–¹æ³•åœ¨ç¼–è¯‘æ—¶è¯»å–ç±»å‹æœªçŸ¥çš„æ³¨è§£ã€‚ æ­¤æ–¹æ³•ç¼–è¯‘æ—¶æ²¡æœ‰é”™è¯¯æˆ–è­¦å‘Šï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;// Use of asSubclass to safely cast to a bounded type token
static Annotation getAnnotation(AnnotatedElement element,
                                String annotationTypeName) {
    Class&amp;lt;?&amp;gt; annotationType = null; // Unbounded type token
    try {
        annotationType = Class.forName(annotationTypeName);
    } catch (Exception ex) {
        throw new IllegalArgumentException(ex);
    }
    return element.getAnnotation(
        annotationType.asSubclass(Annotation.class));
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ€»ä¹‹ï¼Œæ³›å‹APIçš„é€šå¸¸ç”¨æ³•ï¼ˆä»¥é›†åˆAPIä¸ºä¾‹ï¼‰é™åˆ¶äº†æ¯ä¸ªå®¹å™¨çš„å›ºå®šæ•°é‡çš„ç±»å‹å‚æ•°ã€‚ ä½ å¯ä»¥é€šè¿‡å°†ç±»å‹å‚æ•°æ”¾åœ¨é”®ä¸Šè€Œä¸æ˜¯å®¹å™¨ä¸Šæ¥è§£å†³æ­¤é™åˆ¶ã€‚ å¯ä»¥ä½¿ç”¨Classå¯¹è±¡ä½œä¸ºæ­¤ç±»å‹å®‰å…¨å¼‚æ„å®¹å™¨çš„é”®ã€‚ ä»¥è¿™ç§æ–¹å¼ä½¿ç”¨çš„Classå¯¹è±¡ç§°ä¸ºç±»å‹ä»¤ç‰Œã€‚ ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰é”®ç±»å‹ã€‚ ä¾‹å¦‚ï¼Œå¯ä»¥æœ‰ä¸€ä¸ªè¡¨ç¤ºæ•°æ®åº“è¡Œï¼ˆå®¹å™¨ï¼‰çš„&lt;code&gt;DatabaseRow&lt;/code&gt;ç±»å‹å’Œä¸€ä¸ªæ³›å‹ç±»å‹&lt;code&gt;Column &amp;lt;T&amp;gt;&lt;/code&gt;ä½œä¸ºå…¶é”®ã€‚&lt;/p&gt;
</description>
<pubDate>Tue, 27 Feb 2018 14:22:00 +0000</pubDate>
<dc:creator>æ—æœ¬æ‰˜</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/IcanFixIt/p/8481317.html</dc:identifier>
</item>
<item>
<title>ç”¨VSCodeå¼€å‘ä¸€ä¸ªåŸºäºasp.net core 2.0/sql server linux(docker)/ng5/bs4çš„é¡¹ç›®(1) - solenovex</title>
<link>http://www.cnblogs.com/cgzl/p/8478993.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/cgzl/p/8478993.html</guid>
<description>&lt;p&gt;æœ€è¿‘ä½¿ç”¨vscodeæ¯”è¾ƒå¤š. å­¦ä¹ äº†ä¸€ä¸‹å¦‚ä½•åœ¨macä¸Šä½¿ç”¨vscodeå¼€å‘asp.netcoreé¡¹ç›®.&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæ˜¯æˆ‘å†™çš„å…³äºvscodeçš„ä¸€ç¯‡æ–‡ç« :Â &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.cnblogs.com/cgzl/p/8450179.html&quot; target=&quot;_blank&quot;&gt;https://www.cnblogs.com/cgzl/p/8450179.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.cnblogs.com/cgzl/p/8450409.html&quot; target=&quot;_blank&quot;&gt;http://www.cnblogs.com/cgzl/p/8450409.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¿™ç¯‡æ–‡ç« å†™çš„æ˜¯ä½¿ç”¨mac(linux)/win10å¼€å‘ä¸€ä¸ªåŸºäºasp.net core 2.0 web api, angular 5, bootstrap 4, sql server linux(ä½¿ç”¨åˆ°docker)çš„å°é¡¹ç›®.&lt;/strong&gt;&lt;/p&gt;
&lt;h2&gt;&lt;span&gt;è¯¥æ–‡ç« å¤§çº¦åˆ†è¿™å‡ éƒ¨åˆ†:&lt;/span&gt;&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;å¼€å‘ç¯å¢ƒçš„æ­å»º&lt;/li&gt;
&lt;li&gt;å»ºç«‹å’Œé…ç½®asp.net core 2.0 web api&lt;/li&gt;
&lt;li&gt;å»ºç«‹å’Œé…ç½®angular5é¡¹ç›®&lt;/li&gt;
&lt;li&gt;å¼€å‘åŸºæœ¬çš„CRUDåŠŸèƒ½&lt;/li&gt;
&lt;li&gt;åŸºäºUnit Of Workå’ŒRepositoryç­‰Patternå¯¹é¡¹ç›®é‡æ„&lt;/li&gt;
&lt;li&gt;å…¶ä»–ä¸šåŠ¡åŠŸèƒ½çš„å®ç°, ä¾‹å¦‚æ–‡ä»¶ä¸Šä¼ ç­‰&lt;/li&gt;
&lt;li&gt;æˆæƒå’ŒéªŒè¯&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;è¯¥æ–‡ç« æ¶‰åŠåˆ°ä»¥ä¸‹æŠ€æœ¯:&lt;/p&gt;
&lt;p&gt;asp.net core, angular 5, vscode, docker, sql server on linux, bootstrap 4.&lt;/p&gt;
&lt;p&gt;------------------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;å¼€å‘ä¸€ä¸ªç”µè§†å‰§ç®¡ç†ç¨‹åº, æ•°æ®è¡¨æœ‰:&lt;/p&gt;
&lt;p&gt;TvNetworks(ç”µè§†å°), TvShows(ç”µè§†å‰§), TvShowSeasons(ç”µè§†å‰§åˆ†å­£), Tags(åˆ†ç±»æ ‡ç­¾), TvShowTags(ç”µè§†å‰§åˆ°åˆ†ç±»æ ‡ç­¾).&lt;/p&gt;
&lt;p&gt;å°±æ˜¯å¯¹ç”µè§†å°, ç”µè§†å‰§ç­‰ä¿¡æ¯è¿›è¡ŒCRUDç»´æŠ¤çš„ç¨‹åº.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227151354541-1672873837.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;------------------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;1. å®‰è£….net core sdk:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åˆ°å®˜ç½‘ä¸‹è½½å¹¶å®‰è£…ç›¸åº”å¹³å°çš„.net core sdk:Â &lt;a href=&quot;https://dotnet.github.io/&quot; target=&quot;_blank&quot;&gt;https://dotnet.github.io&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å®‰è£…å¥½ä¹‹å, æ‰“å¼€å‘½ä»¤è¡Œ: æ‰§è¡Œdotnet --version, å¯ä»¥çœ‹åˆ°ç‰ˆæœ¬å·, è¿™å°±è¯´æ˜å®‰è£…æˆåŠŸäº†.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2. å®‰è£…visual studio code:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å®˜ç½‘:Â &lt;a href=&quot;https://code.visualstudio.com/&quot; target=&quot;_blank&quot;&gt;https://code.visualstudio.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å®‰è£…å¥½ä¹‹å, å¯ä»¥é€‰æ‹©æŠŠvscodeæ·»åŠ åˆ°Path:Â &lt;/p&gt;
&lt;p&gt;ä½¿ç”¨command+option+p(mac)æˆ–è€…ctrl+shift+p(win)æ‰“å¼€å‘½ä»¤æ¿, è¾“å…¥path, é€‰æ‹©install code command in path.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227152522792-1780373170.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åæ‰“å¼€å‘½ä»¤è¡Œ è¾“å…¥ code . å¦‚æœvscodeèƒ½æ‰“å¼€å½“å‰ç›®å½•, é‚£ä¹ˆè¯´æ˜æ“ä½œæˆåŠŸäº†.&lt;/p&gt;
&lt;p&gt;æˆ‘å®‰è£…äº†å¦‚ä¸‹æ‰©å±•:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227153332047-209969426.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å½“ç„¶pythonæ‰©å±•å¯ä»¥ä¸ç”¨å®‰è£…...ğŸ¤£&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3. Sql Server&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;è²Œä¼¼ç›®å‰æ²¡æœ‰macç‰ˆæœ¬åˆ°sql server. æ‰€ä»¥é‡‡ç”¨docker.&lt;/p&gt;
&lt;p&gt;é¦–å…ˆå®‰è£…docker:Â &lt;a href=&quot;https://www.docker.com/docker-mac&quot; target=&quot;_blank&quot;&gt;https://www.docker.com/docker-mac&lt;/a&gt;Â è¿™ä¸ªæ˜¯macç‰ˆæœ¬åˆ°ä¸‹è½½åœ°å€, ä¸‹è½½åæŒ‰ç…§è¯´æ˜å®‰è£…å³å¯.&lt;/p&gt;
&lt;p&gt;å¯¹äºwindows 10ç‰ˆåˆ°, é¦–å…ˆè¦ç¡®ä¿æ‚¨åˆ°windows 10è¦é«˜äºHomeç‰ˆ. å› ä¸ºdocker win 10ç‰ˆä¾èµ–äºhyper-v, è€Œwin10 homeç‰ˆæ²¡æœ‰hyper-v.&lt;/p&gt;
&lt;p&gt;å®‰è£…å¥½ä¹‹å, éœ€è¦è°ƒæ•´ä»¥ä¸‹dockerçš„è®¾ç½®, è‡³å°‘éœ€è¦4Gå†…å­˜(sql serveréœ€è¦):&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227154822067-1689232696.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;dockerçš„ç®€ä»‹å¯ä»¥å‚è€ƒæˆ‘å†™çš„è¿™ç‰‡å…¥é—¨çº§æ–‡ç« :Â &lt;a href=&quot;http://www.cnblogs.com/cgzl/p/8458926.html&quot; target=&quot;_blank&quot;&gt;http://www.cnblogs.com/cgzl/p/8458926.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åä¸‹è½½sqlserver linuxç‰ˆçš„image (&lt;a href=&quot;https://hub.docker.com/r/microsoft/mssql-server-linux/&quot; target=&quot;_blank&quot;&gt;https://hub.docker.com/r/microsoft/mssql-server-linux/&lt;/a&gt;), å‘½ä»¤è¡Œè¾“å…¥:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
docker pull microsoft/mssql-server-linux
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™ä¸ªæ“ä½œåœ¨å›½å†…å¯èƒ½ä¼šå¾ˆæ…¢, è¯·è€å¿ƒ...&lt;/p&gt;
&lt;p&gt;ä¸‹è½½å¥½ä¹‹å, æŸ¥çœ‹æœ¬åœ°çš„images, ä½¿ç”¨å‘½ä»¤:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
docker images
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227155252807-550137934.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥å®‰è£…å¹¶è¿è¡Œè¿™ä¸ªimage:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
docker run -e 'ACCEPT_EULA=Y' -e 'SA_PASSWORD=ä¸€ä¸ªå¤æ‚çš„å¯†ç ' -p 1433:1433 -d microsoft/mssql-server-linux
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æˆåŠŸå, ä½¿ç”¨docker pså‘½ä»¤å¯ä»¥æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227155539580-1487330565.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨docker ps -a å¯ä»¥æŸ¥çœ‹æ‰€æœ‰çš„è¿›ç¨‹, åŒ…æ‹¬å·²ç»åœæ­¢çš„.&lt;/p&gt;
&lt;p&gt;ç„¶åæˆ‘ä»¬ä½¿ç”¨vscodeæµ‹è¯•ä»¥ä¸‹è¿™ä¸ªsqlserver, åœ¨vscodeé‡Œé¢æ·»åŠ ä¸€ä¸ªxx.sqlæ–‡ä»¶, å¾…vscodeè‡ªåŠ¨å®‰è£…å¥½ç›¸åº”çš„æ’ä»¶å, ä½¿ç”¨cmd+opt+pæ‰“å¼€å‘½ä»¤æ¿, è¾“å…¥mssql, é€‰æ‹©mssql: connect:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227160016610-1546650034.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä»¥å‰æ²¡æœ‰è¿æ¥è¿‡çš„è¯, å°±é€‰æ‹© Create Connection Profile:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227160517167-111532654.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åè¾“å…¥serverçš„åå­—localhost:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227160621315-385671583.png&quot; alt=&quot;&quot;/&gt;]&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥è¾“å…¥æ•°æ®åº“å, å› ä¸ºè¿˜æ²¡æœ‰å»ºç«‹ä»»ä½•æ•°æ®åº“, æ‰€ä»¥å°±è¾“å…¥masterå§:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227160721179-935339807.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;é€‰æ‹©ç™»é™†ç±»å‹ SQL Login(å¦‚æœæ˜¯win10çš„è¯, ä¹Ÿå¯ä»¥é€‰æ‹©integrated):&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227160750108-195154244.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç”¨æˆ·åsa:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227160835919-455856736.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¯†ç :&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227160901373-1476119570.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åé€‰æ‹©æ˜¯å¦ä¿å­˜å¯†ç , æœ€åç»™è¿™ä¸ªè¿æ¥èµ·ä¸€ä¸ªåå­—:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227160948690-540084856.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿™äº›æ“ä½œå®Œæˆå, å°±ä¼šå°è¯•è¿æ¥masteræ•°æ®åº“, è¿æ¥æˆåŠŸçš„è¯ä¸Šé¢ä¼šæœ‰æç¤ºæ¡†, å³ä¸‹è§’ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227161143021-311810917.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å†™ä¸€ä¸ªsql è¯­å¥æµ‹è¯•ä»¥ä¸‹:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;FROM&lt;/span&gt; dbo.sysdatabases;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç‚¹å‡»å³é”®(cmd+shift+e)æ‰§è¡Œsql:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227161314956-223784590.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ok, æ•°æ®åº“å®‰è£…æˆåŠŸ.&lt;/p&gt;
&lt;p&gt;å¦‚æœdockeré‡å¯å, å¯ä»¥ä½¿ç”¨â€œdocker start (å®¹å™¨IDçš„å‰ä¸¤ä½)â€å‘½ä»¤å¯åŠ¨è¿™ä¸ªsqlå®¹å™¨.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4. å®‰è£…angular cli:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆå®‰è£…nodejs:Â &lt;a href=&quot;https://nodejs.org/en/&quot; target=&quot;_blank&quot;&gt;https://nodejs.org/en/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åæ‰§è¡Œå‘½ä»¤å®‰è£… angular cli:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
npm install -g @angular-cli
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;------------------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;å‘½ä»¤è¡Œæ‰§è¡Œå‘½ä»¤, å»ºç«‹æ–‡ä»¶å¤¹å’Œwebapié¡¹ç›®:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
mkdir Tv &amp;amp;&amp;amp; cd Tv &amp;amp;&amp;amp; dotnet new webapi
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227162955754-1900860374.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åæ‰§è¡Œdotnet run:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227163036488-101977452.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æµè§ˆå™¨è®¿é—®http://localhost:5000/api/values:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227163133617-1843743595.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;é¡¹ç›®å»ºç«‹æˆåŠŸäº†.&lt;/p&gt;
&lt;p&gt;ç„¶ååœ¨å‘½ä»¤è¡Œè¾“å…¥code . å°±å¯ä»¥ç”¨vscodeæ‰“å¼€è¯¥ç›®å½•äº†:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227163447371-867013313.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å…³äºasp.net core 2.0çš„ç®€ä»‹å¯ä»¥å‚è€ƒæˆ‘çš„æ–‡ç« :Â &lt;a href=&quot;http://www.cnblogs.com/cgzl/p/7637250.html&quot; target=&quot;_blank&quot;&gt;http://www.cnblogs.com/cgzl/p/7637250.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç¯å¢ƒå˜é‡:&lt;/p&gt;
&lt;p&gt;è¿è¡Œdotnet runçš„æ—¶å€™, å¯ä»¥çœ‹åˆ°è¿™å¥è¯:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227163902652-390580865.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿™è¡¨ç¤ºå½“å‰çš„å®¿ä¸»ç¯å¢ƒå˜é‡ä¸ºProduction, è€Œæˆ‘ä»¬å¯èƒ½éœ€è¦ç”¨åˆ°Developmentæˆ–è€…Staging.&lt;/p&gt;
&lt;p&gt;æœ‰å‡ ç§åŠæ³•å¯ä»¥æ›´æ”¹è¿™ä¸ªç¯å¢ƒå˜é‡çš„å€¼:&lt;/p&gt;
&lt;p&gt;1. åœ¨æ‰§è¡Œdotnet runä¹‹å‰è®¾ç½®ç¯å¢ƒå˜é‡:&lt;/p&gt;
&lt;p&gt;mac: export ASPNETCORE_ENVIRONMENT=Development&lt;/p&gt;
&lt;p&gt;windows: set ASPNETCORE_ENVIRONMENT=&quot;Development&quot;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227164253105-14786734.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;2. windowsä¸‹å¯ä»¥åœ¨æ§åˆ¶é¢æ¿--ç³»ç»Ÿ--é«˜çº§è®¾ç½®é‡Œé¢è®¾ç½®ç¯å¢ƒå˜é‡çš„å€¼&lt;/p&gt;
&lt;p&gt;3. macä¸‹, è¿›å…¥ç”¨æˆ·çš„homeç›®å½•, ç„¶åæ‰§è¡Œ&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
code .bash_profile
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åœ¨è¯¥æ–‡ä»¶åé¢åŠ ä¸Š:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
export ASPNETCORE_ENVIRONMENT=Development
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™æ ·ä¹Ÿå¯ä»¥.&lt;/p&gt;
&lt;p&gt;4. åœ¨é¡¹ç›®çš„appSettings.jsonæ–‡ä»¶é‡Œé¢è®¾ç½®ä¹Ÿå¯ä»¥:&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨visual studio 2017çš„è¯, å¯ä»¥åœ¨é¡¹ç›®çš„launchSettings.jsonè®¾ç½®.&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨vscodeçš„è¯, å¯ä»¥åœ¨é¡¹ç›®ç›®å½•çš„launch.jsonè¿›è¡Œè®¾ç½®.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227165440409-1355253536.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¸è¿‡è¿™å°±éœ€è¦ä½¿ç”¨vscodeæ¥å¯åŠ¨é¡¹ç›®äº†.&lt;/p&gt;
&lt;p&gt;å®‰è£….net watch tool&lt;/p&gt;
&lt;p&gt;ç»å¸¸å¼€å‘å‰ç«¯çš„éƒ½çŸ¥é“, å‰ç«¯é¡¹ç›®å¼€å‘çš„æ—¶å€™ä¸€èˆ¬éƒ½é‡‡ç”¨hot module replacementæŠ€æœ¯, å°±æ˜¯æ–‡ä»¶æœ‰å˜åŒ–çš„æ—¶å€™, è‡ªåŠ¨é‡æ–°ç¼–è¯‘å¹¶åˆ·æ–°æµè§ˆå™¨.&lt;/p&gt;
&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹dotnet runæ²¡æœ‰è¿™ä¸ªåŠŸèƒ½, æ‰€ä»¥éœ€è¦æ·»åŠ dotnet watch toolæ¥å®ç°ç±»ä¼¼çš„åŠŸèƒ½:Â &lt;a href=&quot;https://github.com/aspnet/DotNetTools/blob/dev/src/dotnet-watch/README.md&quot; target=&quot;_blank&quot;&gt;https://github.com/aspnet/DotNetTools/blob/dev/src/dotnet-watch/README.md&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ‰“å¼€Tv.csprojæ·»åŠ æ­¤è¡Œ:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;ItemGroup&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;DotNetCliToolReference &lt;/span&gt;&lt;span&gt;Include&lt;/span&gt;&lt;span&gt;=&quot;Microsoft.VisualStudio.Web.CodeGeneration.Tools&quot;&lt;/span&gt;&lt;span&gt; Version&lt;/span&gt;&lt;span&gt;=&quot;2.0.2&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;DotNetCliToolReference Include=&quot;Microsoft.DotNet.Watcher.Tools&quot; Version=&quot;2.0.0&quot; /&amp;gt;&lt;/span&gt;
  &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;ItemGroup&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç„¶åæ‰§è¡Œå‘½ä»¤:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
dotnet restore
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™æ ·å°±ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥ä»£æ›¿dotnet run:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
dotnet watch run
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ‚¨å¯ä»¥éšä¾¿ä¿®æ”¹ä¸€ç‚¹ä»£ç , ç„¶åå°±å¯ä»¥çœ‹åˆ°é¡¹ç›®è¢«é‡æ–°ç¼–è¯‘å¹¶è¿è¡Œäº†.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Debugging asp.net core&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å‚è€ƒæˆ‘è¿™ç¯‡æ–‡ç« :Â &lt;a href=&quot;http://www.cnblogs.com/cgzl/p/8450179.html&quot; target=&quot;_blank&quot;&gt;http://www.cnblogs.com/cgzl/p/8450179.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;åˆ‡æ¢åˆ°Debugç”»é¢, ç„¶åæ³¨æ„é€‰æ‹©åˆ°æ˜¯.net core attach, å› ä¸ºæˆ‘ä»¬ä¹‹å‰è¿è¡Œç€dotnet watch run, æ‰€ä»¥åªèƒ½é™„åŠ ç€å»è°ƒè¯•.&lt;/p&gt;
&lt;p&gt;ç‚¹å‡»ç»¿è‰²åˆ°è°ƒè¯•ç®­å¤´, æˆ–è€…æŒ‰F5, éœ€è¦é€‰æ‹©ç›¸åº”åˆ°å‘½ä»¤:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227202109981-1063068681.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç”±äºdotnet watch runéšæ—¶ä¼šbuildå‡ºæ–°åˆ°Tv.dll, æ‰€ä»¥attachåˆ°dotnet Tv.dllå³å¯. (dotnet watch run å’Œ dotnet execæ˜¯ä¸¤ä¸ªä¸åŒåˆ°è¿›ç¨‹).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é›†æˆGit&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨é¡¹ç›®ç›®å½•æ‰§è¡Œgit initä¹‹å, å·¦è¾¹åˆ°Gitèœå•å°±ä¼šèµ·ä½œç”¨äº†:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227203035798-276743092.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¸¸ç”¨éƒ½gitå‘½ä»¤éƒ½æœ‰å¯¹åº”çš„èœå•. ä¸è¿‡è¿™ç¯‡æ–‡ç« é‡Œ, å…¶å®å¹¶æ²¡æœ‰ä½¿ç”¨åˆ°git.&lt;/p&gt;
&lt;p&gt;-----------------------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;è¿™ä¸€éƒ¨åˆ†, ä¸»è¦åšä»¥ä¸‹å‡ æ–¹é¢å·¥ä½œ:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å»ºç«‹api&lt;/li&gt;
&lt;li&gt;é…ç½®å’Œä½¿ç”¨entity framework core 2.0&lt;/li&gt;
&lt;li&gt;é…ç½®asp.net core&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨automapper&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;å»ºç«‹domain models:&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæœ‰ä¸€äº›å¿«æ·æ“ä½œ, å¦‚æœæ˜¯æ–°æ‰‹çš„è¯å¯èƒ½ä¸çŸ¥é“, é‚£ä¹ˆè¿™ä¸€æ®µæˆ‘ä½¿ç”¨è§†é¢‘.Â &lt;/p&gt;
&lt;p&gt;è§†é¢‘å¥½åƒå‘å¸ƒä¸å‡ºæ¥, è¯·çœ‹è¿æ¥:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://v.qq.com/x/page/u0560t3iwef.html&quot; target=&quot;_blank&quot;&gt;http://v.qq.com/x/page/u0560t3iwef.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://v.qq.com/x/page/w05600dxo8j.html&quot; target=&quot;_blank&quot;&gt;http://v.qq.com/x/page/w05600dxo8j.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸¤ä¸ªmodelçš„ä»£ç å¦‚ä¸‹, Models/TvNetwork.cs:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;using&lt;/span&gt;&lt;span&gt; System.Collections.Generic;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; System.Collections.ObjectModel;

&lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; Tv.Models
{
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; TvNetwork
    {
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; TvNetwork()
        {
            TvShows &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; Collection&amp;lt;TvShow&amp;gt;&lt;span&gt;();
        }
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; Id { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;string&lt;/span&gt; Name { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; ICollection&amp;lt;TvShow&amp;gt; TvShows { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;æ³¨æ„å»ºç«‹å±æ€§çš„å¿«æ·é”®æ˜¯prop, å»ºç«‹æ„é€ å‡½æ•°çš„å¿«æ·é”®æ˜¯ctor.&lt;/p&gt;
&lt;p&gt;ä¸ºäº†é¿å…ä½¿ç”¨TvShowså±æ€§æ—¶å‡ºç°NullReference Exception, æ‰€ä»¥å»ºè®®åœ¨æ„é€ å‡½æ•°é‡Œé¢åˆå§‹åŒ–é›†åˆå¯¼èˆªå±æ€§.&lt;/p&gt;

&lt;p&gt;Models/TvShow.cs:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; Tv.Models
{
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; TvShow
    {
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; Id { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;string&lt;/span&gt; Name { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; TvNetworkId { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; TvNetwork TvNetwork { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;æ·»åŠ Entity Framework Core&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œéœ€è¦ä½¿ç”¨åˆ°dotnet ef å‘½ä»¤, åœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œå‘½ä»¤:&lt;/p&gt;


&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227211351247-1333783041.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªå‘½ä»¤, è¿™æ˜¯å› ä¸ºè¿˜æ²¡æœ‰æ·»åŠ efåˆ°toolsåˆ°é¡¹ç›®.&lt;/p&gt;
&lt;p&gt;å‚è€ƒå®˜æ–¹æ–‡æ¡£:Â &lt;a href=&quot;https://docs.microsoft.com/en-us/ef/core/miscellaneous/cli/dotnet&quot; target=&quot;_blank&quot;&gt;https://docs.microsoft.com/en-us/ef/core/miscellaneous/cli/dotnet&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œå‘½ä»¤:Â &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;dotnet add package Microsoft.EntityFrameworkCore.Design
dotnet restore&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ç„¶åæ‰“å¼€Tv.csprojæ·»åŠ ä¸€ä¸ªå¼•ç”¨:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
  &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;ItemGroup&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;DotNetCliToolReference &lt;/span&gt;&lt;span&gt;Include&lt;/span&gt;&lt;span&gt;=&quot;Microsoft.VisualStudio.Web.CodeGeneration.Tools&quot;&lt;/span&gt;&lt;span&gt; Version&lt;/span&gt;&lt;span&gt;=&quot;2.0.2&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;DotNetCliToolReference &lt;/span&gt;&lt;span&gt;Include&lt;/span&gt;&lt;span&gt;=&quot;Microsoft.DotNet.Watcher.Tools&quot;&lt;/span&gt;&lt;span&gt; Version&lt;/span&gt;&lt;span&gt;=&quot;2.0.0&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;DotNetCliToolReference &lt;/span&gt;&lt;span&gt;Include&lt;/span&gt;&lt;span&gt;=&quot;Microsoft.EntityFrameworkCore.Tools.DotNet&quot;&lt;/span&gt;&lt;span&gt; Version&lt;/span&gt;&lt;span&gt;=&quot;2.0.0&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
  &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;ItemGroup&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;å†æ‰§è¡Œdotnet restoreå³å¯. è¿™æ—¶å†æ‰§è¡Œdotnet efå‘½ä»¤, å°±å¯ä»¥ä½¿ç”¨äº†:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227211822116-1656134419.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;åˆ›å»ºDbContext&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹å«åšDatabase, ç„¶ååœ¨é‡Œé¢å»ºç«‹ä¸€ä¸ªæ–‡ä»¶TvContext.cs:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.EntityFrameworkCore;

&lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; Tv.Database
{
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; TvContext : DbContext
    {
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; TvContext(DbContextOptions&amp;lt;TvContext&amp;gt;&lt;span&gt; options)
            : &lt;/span&gt;&lt;span&gt;base&lt;/span&gt;&lt;span&gt;(options)
        {

        }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;æ ¹æ®å®˜æ–¹æ–‡æ¡£, å°±æ˜¯è¿™æ ·å»ºç«‹dbcontextçš„.&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨dbcontextçš„æ—¶å€™, æ˜¯éœ€è¦ä¾èµ–æ³¨å…¥çš„. æ‰€ä»¥éœ€è¦åœ¨Startup.csçš„ConfigureServicesæŠŠTvContextæ³¨å†Œåˆ°å®¹å™¨:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; ConfigureServices(IServiceCollection services)
        {
            &lt;span&gt;services.AddDbContext&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;TvContext&amp;gt;(opt =&amp;gt; opt.UseSqlServer(&quot;&quot;&lt;/span&gt;&lt;span&gt;&lt;span&gt;));&lt;/span&gt;
            services.AddMvc();
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;http://v.qq.com/x/page/f056037xm2q.html&quot; target=&quot;_blank&quot;&gt;http://v.qq.com/x/page/f056037xm2q.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;é€šå¸¸æˆ‘ä»¬æ˜¯åœ¨appSettings.jsoné‡Œé¢æ·»åŠ æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;{
  &lt;/span&gt;&lt;span&gt;&quot;ConnectionStrings&quot;: {
    &quot;Default&quot;: &quot;server=localhost; database=tvdb; user id=sa; password=Bx@steel1;&quot;
  },
  &lt;/span&gt;&quot;Logging&quot;&lt;span&gt;: {
    &lt;/span&gt;&quot;IncludeScopes&quot;: &lt;span&gt;false&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&quot;Debug&quot;&lt;span&gt;: {
      &lt;/span&gt;&quot;LogLevel&quot;&lt;span&gt;: {
        &lt;/span&gt;&quot;Default&quot;: &quot;Warning&quot;&lt;span&gt;
      }
    },
    &lt;/span&gt;&quot;Console&quot;&lt;span&gt;: {
      &lt;/span&gt;&quot;LogLevel&quot;&lt;span&gt;: {
        &lt;/span&gt;&quot;Default&quot;: &quot;Warning&quot;&lt;span&gt;
      }
    }
  }
}&lt;br/&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å›åˆ°Startup.cs, å¯ä»¥ä½¿ç”¨è¿™ä¸¤ç§æ–¹å¼å–å¾—è¿æ¥å­—ç¬¦ä¸²:Â &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; ConfigureServices(IServiceCollection services)
        {
            // services.AddDbContext&lt;/span&gt;&amp;lt;TvContext&amp;gt;(opt =&amp;gt; opt.UseSqlServer(&lt;span&gt;Configuration[&quot;ConnectionStrings:Default&quot;&lt;/span&gt;&lt;span&gt;&lt;span&gt;]&lt;/span&gt;));
            services.AddDbContext&lt;/span&gt;&amp;lt;TvContext&amp;gt;(opt =&amp;gt; opt.UseSqlServer(&lt;span&gt;Configuration.GetConnectionString(&quot;Default&quot;&lt;/span&gt;&lt;span&gt;&lt;span&gt;)&lt;/span&gt;));
            services.AddMvc();
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ä¸‹é¢, å°±å¯ä»¥åˆ›å»ºæ•°æ®åº“äº†.&lt;/p&gt;
&lt;p&gt;åˆ›å»ºæ•°æ®åº“&lt;/p&gt;
&lt;p&gt;é¦–å…ˆæ·»åŠ migrations:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
dotnet ef migrations add Initial
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;æ‰§è¡ŒæˆåŠŸå, ä¼šåœ¨é¡¹ç›®é‡Œç”Ÿæˆä¸€ä¸ªMigrationsæ–‡ä»¶å¤¹:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227214003747-2135354783.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°Initial Migrationæ–‡ä»¶é‡Œé¢ä»€ä¹ˆä¹Ÿæ²¡æœ‰, å› ä¸ºæˆ‘å¿˜è®°æŠŠDomain Modelæ·»åŠ åˆ°TvContexté‡Œé¢äº†.&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ä½¿ç”¨å‘½ä»¤:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
dotnet ef migrations remove
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;æ¥ç§»é™¤ä¸Šä¸€æ¬¡æ·»åŠ å¹¶ä¸”è¿˜æœªæ›´æ–°åˆ°æ•°æ®åº“çš„migration, æ³¨æ„è¿™æ—¶å€™éœ€è¦åœæ­¢dotnet watchç­‰æ“ä½œ, &lt;span&gt;è¿˜è¦æ³¨æ„çš„æ˜¯, åœ¨ef coreé‡Œåƒä¸‡ä¸è¦æ‰‹åŠ¨åˆ é™¤è¿ç§»æ–‡ä»¶, å› ä¸ºè¿™é‡Œå¤šå‡ºäº†ä¸€ä¸ªSnapshotæ–‡ä»¶, å®ƒå’Œæ‰€æœ‰çš„è¿ç§»æ˜¯åŒæ­¥çš„.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227214446298-713982079.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç›¸åº”çš„è¿ç§»æ–‡ä»¶ä¹Ÿè¢«åˆ é™¤äº†.&lt;/p&gt;
&lt;p&gt;ä¿®æ”¹TvContext:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.EntityFrameworkCore;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Tv.Models;

&lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; Tv.Database
{
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; TvContext : DbContext
    {
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; TvContext(DbContextOptions&amp;lt;TvContext&amp;gt;&lt;span&gt; options)
            : &lt;/span&gt;&lt;span&gt;base&lt;/span&gt;&lt;span&gt;(options)
        {

        }

        &lt;/span&gt;&lt;span&gt;public DbSet&amp;lt;TvNetwork&amp;gt; TvNetworks { get; set; }
        public DbSet&amp;lt;TvShow&amp;gt; TvShows { get; set&lt;/span&gt;&lt;span&gt;&lt;span&gt;; }&lt;/span&gt;
    }
}&lt;br/&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç„¶åé‡æ–°æ‰§è¡Œdotnet ef migrations add Initial:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227214943502-1508963171.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æœ€åæ‰§è¡Œç”Ÿæˆæ•°æ®åº“çš„å‘½ä»¤:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
dotnet ef database update
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;æ•°æ®åº“ç”ŸæˆæˆåŠŸ:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/986268/201802/986268-20180227215151932-2073779258.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;


&lt;p&gt;ä»Šå¤©å…ˆå†™åˆ°è¿™, è¿‡å‡ å¤©ä¼šç»§ç»­å†™.Â &lt;/p&gt;
</description>
<pubDate>Tue, 27 Feb 2018 14:04:00 +0000</pubDate>
<dc:creator>solenovex</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/cgzl/p/8478993.html</dc:identifier>
</item>
<item>
<title>åˆšå…¥èŒçš„æ–°äººå¦‚ä½•å¿«é€Ÿäº†è§£å…¬å¸ä¸šåŠ¡ - èµ„æ·±Tester_ç‹è±†è±†</title>
<link>http://www.cnblogs.com/evangline/p/8481232.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/evangline/p/8481232.html</guid>
<description>&lt;h2&gt;å…¬å¸ä¸šåŠ¡çš„é‡è¦æ€§&lt;/h2&gt;
&lt;p&gt;å…¬å¸ä¸šåŠ¡çš„é‡è¦æ€§å¯¹è½¯ä»¶æµ‹è¯•äººå‘˜æ¥è¯´ä¸ç”¨å¤šè¯´ã€‚ä½œä¸ºè½¯ä»¶æµ‹è¯•äººå‘˜éœ€è¦å¯¹å…¬å¸ä¸šåŠ¡å®Œå…¨äº†è§£ï¼Œä»…ä»…æ˜¯äº†è§£è¿˜ä¸è¡Œï¼Œéœ€è¦åšåˆ°ç²¾é€šï¼Œç†Ÿæ‚‰å…¬å¸ä¸šåŠ¡æµç¨‹ã€åŠŸèƒ½ç­‰éœ€æ±‚ï¼Œç›®çš„å°±æ˜¯ä¸ºäº†èƒ½å¤Ÿæ›´å¥½çš„è¿›è¡Œæµ‹è¯•æ´»åŠ¨ã€‚&lt;/p&gt;
&lt;p&gt;åªæœ‰å¯¹è½¯ä»¶æµ‹è¯•éœ€æ±‚å®Œå…¨æŒæ¡äº†ï¼Œæµ‹è¯•äººå‘˜åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­æ‰èƒ½åšåˆ°æœ‰çš„æ”¾çŸ¢ï¼Œæµ‹è¯•æ€ç»´æ‰èƒ½æ‰“å¼€ï¼Œæµ‹è¯•è¿‡ç¨‹ä¸­çš„ç»†èŠ‚æ‰èƒ½è¢«æ³¨æ„åˆ°ã€‚&lt;/p&gt;

&lt;p&gt;æ¯”å¦‚ï¼Œä½ åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ç¢°åˆ°ä¸€ä¸ªåœºæ™¯ï¼Œç³»ç»Ÿåå°æˆ–ç•Œé¢ç»™ä½ ä¸€ä¸ªé”™è¯¯çš„è¿”å›ï¼Œè‹¥æ˜¯ä½ å¯¹éœ€æ±‚å®Œå…¨ç†Ÿæ‚‰ï¼Œä½ ä¸€å®šçŸ¥é“è¿™ä¸ªåœ°æ–¹çš„è¿”å›æ˜¯æœ‰é—®é¢˜çš„ï¼Œå¦‚æœä½ å¯¹éœ€æ±‚ä¸ç†Ÿæ‚‰ï¼Œé‚£ä½ å¯èƒ½å°±è§†è‹¥æ— ç¹ï¼Œç™½ç™½æ”¾è¿‡è¿™æ ·ä¸€ä¸ªbugã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§æƒ…å†µåœ¨æµ‹è¯•è¿‡ç¨‹ä¸­é‡åˆ°çš„é¢‘ç‡å¾ˆé«˜ï¼Œè‹¥å½“æ—¶å¯¹éœ€æ±‚ä¸äº†è§£ï¼Œå¯ä»¥å‘å¼€å‘æˆ–æœ€ç†Ÿæ‚‰éœ€æ±‚çš„æµ‹è¯•äººå‘˜è¯·æ•™ï¼Œå°†è¿™ä¸ªç‚¹æŠ›å‡ºæ¥ï¼Œå¤§å®¶ä¸€èµ·è®¨è®ºçœ‹å¦æ˜¯ä¸€ä¸ªbugï¼Œå¦‚æœæµ‹è¯•äººå‘˜æœ‰æ„è¯†æŠ›å‡ºè¿˜ç®—å¥½ï¼Œä½†å¦‚æœæ ¹æœ¬å°±è§‰å¾—è¿™ä¸ªè¿”å›å°±åº”è¯¥æ˜¯è¿™æ ·å‘¢ï¼Œé‚£åŸ‹ä¸‹çš„éšæ‚£æ˜¯ä¸æ˜¯å°±å¾ˆå¤§ã€‚&lt;/p&gt;

&lt;p&gt;é‚£æµ‹è¯•äººå‘˜åº”è¯¥æ€ä¹ˆåšæ‰èƒ½æ›´å¥½åœ°äº†è§£ä¸šåŠ¡ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ç‹è±†è±†å»å¹´æ–°å…¥èŒç°åœ¨å…¬å¸ï¼Œå…¬å¸ä¸šåŠ¡æ¯”è¾ƒå¤æ‚ï¼Œè™½ç„¶åŒå±é‡‘èè¡Œä¸šèŒƒç•´ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰å¤§åŒºåˆ«ï¼ŒåŒæ—¶å…¬å¸ä¸šåŠ¡æ ¹æ®è¡Œä¸šè§„åˆ™ä¸æ–­å˜åŒ–ï¼Œæ‰€ä»¥é‡åˆ°ä¸æ–­å­¦ä¹ ï¼Œç›®å‰ç‹è±†è±†ä¹Ÿåªç®—æŒæ¡äº†60%ï¼Œä½†æŒæ¡ä¸šåŠ¡çš„èƒ½åŠ›å·²è¢«è®¤å¯çš„ï¼Œç‹è±†è±†å°±æ ¹æ®è‡ªèº«ç»éªŒåˆ†äº«ä½œä¸ºåˆšå…¥èŒçš„æ–°äººå¦‚ä½•å¿«é€Ÿå»äº†è§£å…¬å¸ä¸šåŠ¡ã€‚&lt;/p&gt;

&lt;p&gt;åˆšå…¥èŒçš„æ–°äººå¦‚ä½•å¿«é€Ÿäº†è§£å…¬å¸ä¸šåŠ¡ï¼Œç‹è±†è±†è¦ä»äºŒä¸ªæ–¹é¢æ¥åˆ†æå¦‚ä½•å¿«é€ŸæŒæ¡ï¼š&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€ä¸ªæ˜¯ä¸šåŠ¡æµç¨‹ï¼›ç¬¬äºŒä¸ªä¸šåŠ¡ç»†èŠ‚&lt;/p&gt;
&lt;hr/&gt;&lt;h2&gt;1.ä¸šåŠ¡æµç¨‹&lt;/h2&gt;
&lt;p&gt;å¯¹åˆšå¼€å§‹å…¥èŒçš„æ–°äººæ¥è¯´ï¼Œåˆšå¼€å§‹ä¸€å®šæ˜¯å…ˆä»å…¬å¸ä¸šåŠ¡æ¡†æ¶å’Œä¸šåŠ¡æµç¨‹å­¦èµ·ï¼Œ&lt;strong&gt;è¿™ä¸ªæ—¶é—´æ®µéœ€è¦åšçš„å°±å¤šçœ‹ï¼Œå¤šé—®ï¼Œå¤šåšã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;01 å¤šçœ‹&lt;/p&gt;
&lt;p&gt;å¤šçœ‹æŒ‡çš„æ˜¯å¤šçœ‹å…¬å¸éœ€æ±‚æ–‡æ¡£ï¼Œéœ€æ±‚æ–‡æ¡£åŒ…æ‹¬ä»»ä½•ä¸€åˆ‡æœ‰å…³å…¬å¸ä¸šåŠ¡çš„æ–‡æ¡£ï¼Œå¯èƒ½æ˜¯å…¬å¸ä¸šåŠ¡èƒŒæ™¯ï¼Œå…¬å¸æ¡†æ¶è¯´æ˜ï¼Œä»¥å‰çš„æµ‹è¯•ç”¨ä¾‹ï¼Œæµ‹è¯•æŠ¥å‘Šï¼ŒåŸå‹å›¾ï¼Œå…¬å¸ç³»ç»Ÿç­‰ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;å°½è‡ªå·±çš„å¯èƒ½å¤šæ‰¾ä¸å…¬å¸ä¸šåŠ¡ç›¸å…³çš„æ–‡æ¡£ã€æ•°æ®æŸ¥çœ‹ã€‚&lt;/p&gt;

&lt;p&gt;02 å¤šé—®&lt;/p&gt;
&lt;p&gt;å¤šé—®å°±æ˜¯æŒ‡å¤šå‘åŒäº‹è¯·æ•™ï¼Œä¸æ˜¯ä¸è€»ä¸‹é—®ï¼Œè€Œæ˜¯ä¸è¦å®³ç¾ä¸Šé—®ï¼Œå…¶ä»–äººéƒ½å¯èƒ½æ¯”ä½ æ‡‚å¾—å¤šã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨ä¼ä¸šå¯¹æ–°äººï¼Œå¯èƒ½ä¼šå®‰æ’ä¸€ä¸ªè€åŒäº‹å¸¦ä½ ï¼Œä¹Ÿå¯èƒ½æ²¡æœ‰ï¼Œç›´æ¥å°±å®‰æ’ä½ è¿›é¡¹ç›®åšï¼Œä½†å‰æœŸä¸€å®šä¼šç»™ä½ ç•™ä¸€ç‚¹æ—¶é—´ç†Ÿæ‚‰å…¬å¸ä¸šåŠ¡ï¼Œå¦‚æœæœ‰åŒäº‹å¸¦ä½ ï¼Œé‚£æ˜¯å¥½è¿ï¼Œä½†è¦æ˜ç¡®ä¸€ä»¶äº‹æƒ…å°±æ˜¯åˆ«äººå¸¦ä½ ï¼Œå¹¶ä¸æ˜¯ä»–çš„ä¸»è¦å·¥ä½œï¼Œè€Œæ˜¯é¢å¤–å·¥ä½œï¼›å¦‚æœæ²¡æœ‰ï¼Œä¹Ÿä¸å¿…æ€¥ï¼Œå­¦ä¼šè‡ªå·±å»æ¢³ç†ï¼Œå»æŒæ¡éœ€æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;å‘åŒäº‹é—®é—®é¢˜ä¹Ÿæ˜¯ä¸€é—¨å­¦é—®ï¼Œä¸æ˜¯é‡åˆ°é—®é¢˜å°±å¼€å§‹é—®ï¼Œä¹Ÿä¸æ˜¯é€®ç€è°éƒ½é—®ï¼Œèƒ½è‡ªå·±è§£å†³çš„å°±æœ€å¥½è‡ªå·±è§£å†³ï¼Œéœ€è¦å¤šè§‚å¯Ÿï¼Œé€šè¿‡è§‚å¯Ÿç¡®å®šé—®é—®é¢˜çš„æ—¶æœºã€‚&lt;/p&gt;
&lt;p&gt;åˆšæ‰ç‹è±†è±†è¯´è¿‡å¸¦ä½ çš„å·¥ä½œæ˜¯é¢å¤–å·¥ä½œï¼Œå¦‚æœé¡¹ç›®ä»»åŠ¡å¾ˆå¿™çš„æ—¶å€™ï¼Œå¸¦ä½ çš„æµ‹è¯•äººå‘˜æ—¢è¦å®Œæˆå¹³æ—¶çš„å·¥ä½œï¼Œåˆè¦è§£å†³ä½ çš„é—®é¢˜ï¼Œä¼šç»™ä»–é€ æˆä¸€å®šçš„å›°æ‰°ï¼Œæ‰€ä»¥ä¸€å®šä¸è¦æœ‰é—®é¢˜å°±é—®ã€‚&lt;/p&gt;

&lt;p&gt;ç‹è±†è±†ä½¿ç”¨çš„åŠæ³•å°±æ˜¯ï¼š&lt;/p&gt;
&lt;p&gt;1.å…ˆå°†ä¸ç´§æ€¥è§£å†³çš„é—®é¢˜è®°å½•ä¸‹æ¥ï¼Œç„¶åæ‰¾ä¸€ä¸ªæ—¶é—´ç»Ÿä¸€é—®ï¼›&lt;/p&gt;
&lt;p&gt;2.ç´§æ€¥é—®é¢˜ï¼Œå¦‚æœè¿™ä¸ªé—®é¢˜ä¸è§£å†³å°±æ²¡åŠæ³•ç»§ç»­ä¸‹é¢çš„æµç¨‹ï¼Œé‚£è¿™æ ·çš„é—®é¢˜å°±å¿…é¡»ç«‹é©¬è§£å†³ï¼Œå¦‚æœå¸¦ä½ çš„äººåœ¨å¿™ç€æµ‹è¯•ï¼Œé‚£ä½ å¯ä»¥å…ˆæ‰¾å…¶ä»–äººè§£å†³ï¼Œå¦‚æœä¸å¿™ï¼Œé‚£å°±æ­£å¥½ã€‚&lt;/p&gt;
&lt;p&gt;ç‹è±†è±†å°±æ˜¯å¾ˆå¥½è¿çš„é‚£ä¸ªï¼Œç‹è±†è±†èƒ½è¿™ä¹ˆå¿«æŒæ¡å…¬å¸ä¸šåŠ¡ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šéƒ½æ˜¯å› ä¸ºé‡åˆ°å¾ˆniceçš„åŒäº‹ï¼Œæ¯é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜éƒ½èƒ½å¾ˆå¥½è§£å†³ï¼Œè§£å†³ä¸ä»…ä»…æ˜¯å‘Šè¯‰ç­”æ¡ˆï¼Œè€Œæ˜¯ä»æµç¨‹ï¼Œä»ç»“æ„ï¼Œä»æ ¹æœ¬åŸå› ï¼Œä»è®¾è®¡ç›®çš„å»åˆ†æè¿™ä¸ªé—®é¢˜ï¼Œè§£ç­”å¾ˆè¯¦å°½ï¼ŒåŸºæœ¬é—®ä¸€æ¬¡å°±ç›¸å½“äºæŠŠä¸€ä¸ªæµç¨‹æˆ–ä¸€ä¸ªåŠŸèƒ½ç‚¹åƒé€ã€‚&lt;/p&gt;

&lt;p&gt;03 å¤šåš&lt;/p&gt;
&lt;p&gt;ä¸ç®¡ä½ é—®å¾—å†å¤šï¼Œçœ‹å¾—å†å¤šï¼Œå¦‚æœè‡ªå·±ä¸åŠ¨æ‰‹å»å°è¯•ï¼Œé‚£éƒ½æ˜¯ç™½è´¹ã€‚&lt;/p&gt;

&lt;p&gt;ç¬¬ä¸€ä¸ªåšï¼š&lt;/p&gt;
&lt;p&gt;çœ‹æ–‡æ¡£æˆ–ç³»ç»Ÿæ—¶ï¼ŒåŠ¨æ‰‹ç”»å‡ºå¤§è‡´åœ°ç³»ç»Ÿæµç¨‹å›¾æ¥ï¼Œä¹Ÿå¯ä»¥æ˜¯ç³»ç»Ÿæ¡†æ¶ï¼Œç³»ç»ŸåŠŸèƒ½æ¨¡å—ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;ç¬¬äºŒä¸ªåšï¼š&lt;/p&gt;
&lt;p&gt;åœ¨é—®é—®é¢˜æ—¶ï¼Œè®°å½•ä¸‹è‡ªå·±é—®çš„æ‰€æœ‰é—®é¢˜ï¼Œé¿å…é‡å¤é—®ï¼Œå¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡ï¼Œæˆ‘èƒ½ç»™ä½ è¯¦ç»†çš„è§£ç­”ï¼Œä½†å¦‚æœæ˜¯ç¬¬äºŒæ¬¡ï¼Œé‚£æˆ‘ä¼šè®°å¾—æˆ‘æ›¾ç»ç»™è¿‡ä½ è§£ç­”ï¼Œå¦‚æœè¿˜æœ‰ç¬¬ä¸‰æ¬¡å‘¢ï¼Ÿé‚£æ˜¯ä¸æ˜¯æˆ‘å¯¹ä½ çš„å°è±¡å°±ä¸ä¼šé‚£ä¹ˆå¥½ï¼Œæˆ‘ä¼šè§‰å¾—ä½ å¯¹å·¥ä½œæ ¹æœ¬ä¸ä¸Šå¿ƒã€‚&lt;/p&gt;

&lt;p&gt;ç¬¬ä¸‰ä¸ªåšï¼š&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œ---è·‘ä¸šåŠ¡æµç¨‹ï¼Œåˆ†ææµç¨‹çš„åŠ¨ä½œèƒŒååŸå› &lt;/p&gt;
&lt;p&gt;å‡è®¾å…¬å¸ä¸šåŠ¡æœ‰ä»˜æ¬¾çš„åŠŸèƒ½ï¼Œé‚£å°±è‡ªå·±åŠ¨æ‰‹ä»ç”¨æˆ·æ³¨å†Œ-ã€‰ç™»å½•-ã€‰è´¦æˆ·å­˜é’±-ã€‰ä»˜æ¬¾çš„ä¸šåŠ¡åœºæ™¯æ¥åšï¼Œä¸€ä¸ªä¸ªå®Œæ•´çš„æµç¨‹è·‘ï¼Œä¸€è¾¹è·‘ä¸€è¾¹è®°å½•é¡µé¢äº¤äº’ç‚¹ï¼Œæ¯ä¸€ä¸ªåŠ¨ä½œå¼•èµ·ç•Œé¢æˆ–ä»»åŠ¡æˆ–æ•°æ®åº“çš„å˜åŒ–ï¼Œç„¶åä¿®æ”¹ä¸€ç‚¹å†è·‘å†è®°å½•ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚ä»˜æ¬¾è´¦æˆ·æœ‰é’±æˆ–æ²¡é’±çš„ç•Œé¢è¿”å›ï¼Œæ•°æ®åº“çš„å˜åŒ–ï¼ŒåŒæ—¶äº†è§£æ¯æ‰§è¡Œä¸€ä¸ªåŠ¨ä½œï¼Œæ‰€éœ€è¦çš„å‰ç½®æ¡ä»¶ï¼Œæ‰§è¡Œæ‰€éœ€è¦çš„æ•°æ®ä»å“ªäº›åœ°æ–¹å–ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;å…³æ³¨ç‚¹è¾ƒå¤šæ—¶ï¼Œä¸ä¸€å®šåªæ‰§è¡Œä¸€æ¬¡å°±å…¨éƒ¨äº†è§£ï¼Œå¯ä»¥å¤šæ¬¡é‡è¯•ï¼Œä½†æœ€ç»ˆç»“æœæ˜¯æ¯ä¸€ä¸ªåŠ¨ä½œï¼Œä½ éƒ½éœ€è¦æŒæ¡ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬ä¸šåŠ¡ç»†èŠ‚éƒ¨åˆ†éœ€è¦æŒæ¡çš„ã€‚&lt;/p&gt;

&lt;hr/&gt;&lt;h2&gt;2.ä¸šåŠ¡ç»†èŠ‚&lt;/h2&gt;

&lt;p&gt;è¿™ä¸ªé˜¶æ®µä¸€å®šæ˜¯å»ºç«‹åœ¨ä½ å¯¹å…¬å¸ç³»ç»Ÿæ¡†æ¶ï¼Œä¸šåŠ¡æµç¨‹ï¼Œäº§å“ç±»å‹éƒ½æ˜¯ç›¸å½“æ¸…æ¥šçš„å‰æä¸‹å†å…³æ³¨çš„ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆè¦æ¸…æ¥šä»€ä¹ˆæ˜¯ä¸šåŠ¡ç»†èŠ‚ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ç‹è±†è±†ä»¥ä¸ºä¸šåŠ¡ç»†èŠ‚å°±æ˜¯é€šè¿‡è¡¨è±¡æ‰€çœ‹ä¸å‡ºæ¥çš„ï¼Œè€Œæ˜¯éœ€è¦æ ¹æ®æ•°æ®ï¼Œä»»åŠ¡ï¼ŒåŠ¨ä½œå…±åŒå»åˆ†æçš„ã€‚&lt;/p&gt;

&lt;p&gt;ç‹è±†è±†ç›®å‰è§‰å¾—åº”è¯¥äºŒä¸ªåŠæ³•ï¼š&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€ä¸ªæ–¹æ³•æ˜¯å¤šè·‘ä¸šåŠ¡æµç¨‹&lt;/p&gt;
&lt;p&gt;å‰é¢å·²ç»è®²è¿‡äº†ï¼Œæ ¹æ®å‰é¢æ‰€è®²çš„æ–¹æ³•æ¥åˆ†ææ¯ä¸€æ¬¡æ‰§è¡ŒåŠ¨ä½œï¼Œè®°å½•æ‰§è¡Œå‰çš„å‰ç½®æ¡ä»¶å’Œå–æ•°æ®çš„è¡¨ï¼Œä»¥åŠæ‰§è¡Œåçš„å˜åŒ–ï¼ŒåŒ…å«æ•°æ®åº“ï¼Œç•Œé¢ï¼Œæµ‹è¯•ç¯å¢ƒè®°å½•çš„æ—¥å¿—ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;ç¬¬äºŒä¸ªæ–¹æ³•æ˜¯çœ‹ä»£ç &lt;/p&gt;
&lt;p&gt;å­¦ä¼šçœ‹ä»£ç æ˜¯æ¯ä¸€ä¸ªæµ‹è¯•äººå‘˜éƒ½åº”è¯¥æŒæ¡åˆ°çš„ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœå…¬å¸æ²¡æœ‰å®Œæ•´çš„éœ€æ±‚æ–‡æ¡£ï¼Œæµ‹è¯•äººå‘˜å¯ä»¥é€šè¿‡çœ‹ä»£ç åˆ†æéœ€æ±‚ï¼Œä¸šåŠ¡æµç¨‹çš„å˜åŒ–ï¼Œè‡ªå·±å°±èƒ½æ¢³ç†å‡ºéœ€æ±‚æ¥ã€‚&lt;/p&gt;
&lt;p&gt;çœ‹ä»£ç å¯ä»¥å‘ç°æµ‹è¯•äººå‘˜åœ¨å‰ç«¯å’Œä¸šåŠ¡æµç¨‹ä¸Šå‘ç°ä¸åˆ°çš„é—®é¢˜ï¼ŒåŒæ—¶è¿˜èƒ½æé«˜æµ‹è¯•äººå‘˜åœ¨æŸç±»åŠŸèƒ½ç‚¹ä¸Šæµ‹è¯•çš„æ•ˆç‡ã€‚&lt;/p&gt;

&lt;p&gt;ä»¥æµ‹è¯•äººå‘˜æµ‹è¯•Mappingç±»ä¸šåŠ¡ä¸ºä¾‹ï¼Œå¤§å®¶éƒ½çŸ¥é“Mappingï¼ˆæ˜ å°„ï¼‰æ˜¯æŒ‡å„ç³»ç»Ÿæˆ–å­ç³»ç»Ÿä¸­ç›¸åŒç‚¹çš„ä¸åŒæ˜ å°„ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚1åœ¨Aç³»ç»Ÿä¸­è¡¨ç¤ºå°å­¦ç”Ÿï¼Œåœ¨Bç³»ç»Ÿä¸­è¡¨ç¤ºä¸­å­¦ç”Ÿï¼Œ2åœ¨Aç³»ç»Ÿä¸­è¡¨ç¤ºä¸­å­¦ç”Ÿï¼Œåœ¨Bç³»ç»Ÿä¸­è¡¨ç¤ºå°å­¦ç”Ÿï¼Œåœ¨Aç³»ç»Ÿä¸­è¾“å…¥1ï¼Œåœ¨Bç³»ç»Ÿç•Œé¢éœ€è¦æ˜¾ç¤ºå°å­¦ç”Ÿã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœè¦æµ‹è¯•è¿™æ ·çš„ä¸šåŠ¡ï¼ŒåŠŸèƒ½æµ‹è¯•è‡³å°‘éœ€è¦äºŒæ¡æµ‹è¯•ç”¨ä¾‹æ¥è¦†ç›–ï¼Œé‚£å¦‚æœæ˜¯çœ‹ä»£ç å‘¢ï¼Œæ˜¯ä¸æ˜¯ç›´æ¥å°±å¯ä»¥çœ‹å‡ºæ¥äº†ï¼Œä½ åˆå¯èƒ½ä¼šè¯´ä¸å°±æ˜¯å¤šäºŒæ¡æµ‹è¯•ç”¨ä¾‹ä¹ˆï¼Ÿé‚£å¦‚æœè¿™æ ·çš„Mappingå€¼å¾ˆå¤šå‘¢ï¼ŒåŠŸèƒ½æµ‹è¯•å°±éœ€è¦æµ‹è¯•å¾ˆå¤šæ¬¡ï¼Œè€Œé€šè¿‡çœ‹ä»£ç èƒ½å¾ˆå¿«å‘ç°ABç³»ç»Ÿçš„æ˜ å°„æ˜¯å¦æ­£ç¡®ï¼Œæ˜¯ä¸æ˜¯æ•ˆç‡æé«˜å¾ˆå¤šã€‚&lt;/p&gt;
&lt;p&gt;åŒæ—¶çœ‹ä»£ç å¯ä»¥æ¸…æ¥šæ›´å¤šä¸šåŠ¡è®¾è®¡ç»†èŠ‚å’Œæµç¨‹çš„è·³è½¬åŠæ¡ä»¶ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥å‰æ²¡æœ‰çœ‹è¿‡ä»£ç ï¼Œåˆšå¼€å§‹çœ‹ä¼¼ç¡®å®å¾ˆéš¾ï¼Œä½†çœ‹å¾—è¶Šå¤šå°±è¶Šå®¹æ˜“ï¼Œå­¦ä¼šçœ‹ä»£ç çš„å‰ææ˜¯å¯¹ç›¸åº”ç¼–ç¨‹è¯­è¨€çš„åŸºç¡€äº†è§£ï¼ŒçŸ¥é“å¦‚ä½•ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ä¸Šå°±æ˜¯ç‹è±†è±†ç†Ÿæ‚‰ä¸šåŠ¡çš„æ–¹æ³•ï¼Œæ¬¢è¿å¤§å®¶å’Œæˆ‘è®¨è®ºæ›´å¤šæ›´æœ‰æ•ˆçš„æ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ¬¢è¿å…³æ³¨ç‹è±†è±†çš„å¾®ä¿¡å…¬ä¼—å·ï¼šèµ„æ·±Tester(zishentester)ï¼Œäº†è§£æ›´å¤šå¥½æ–‡ï¼Œå’Œç‹è±†è±†ä¸€èµ·æˆé•¿ã€‚ã€‚ã€‚&lt;/strong&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 27 Feb 2018 14:00:00 +0000</pubDate>
<dc:creator>èµ„æ·±Tester_ç‹è±†è±†</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/evangline/p/8481232.html</dc:identifier>
</item>
<item>
<title>Dynamics 365 Online-å¤šé€‰åŸŸ - YOBYRON</title>
<link>http://www.cnblogs.com/yobyron/p/MultiSelect.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/yobyron/p/MultiSelect.html</guid>
<description>&lt;p&gt;ã€€å‚ä¸è¿‡Dynamics CRMç›¸å…³å·¥ä½œçš„æœ‹å‹ä»¬éƒ½çŸ¥é“ï¼ŒDynamics 365ä¹‹å‰å¹¶æ²¡æœ‰å¤šé€‰åŸŸå­—æ®µï¼Œæƒ³è¦å®ç°å¤šé€‰åŸŸï¼Œéœ€è¦è‡ªå·±æ·»åŠ WebResourceå®šåˆ¶ï¼Œè€Œè¿™ä¹Ÿå¸¦æ¥äº†ä¸€ç³»åˆ—éœ€è¦è€ƒè™‘çš„æƒ…å†µï¼Œæ¯”å¦‚é¢å¤–çš„å­—æ®µæ¶ˆè€—ï¼Œé€»è¾‘ä¸Šå¤æ‚çš„è½¬æ¢è§„åˆ™ç­‰ï¼Œæ›´æœ‰ç”šè€…ï¼Œä¼šå»æ”¹å˜æ¶‰åŠå¤šé€‰åŸŸæƒ…å†µçš„ä¸šåŠ¡é€»è¾‘ã€‚ä½†éšç€Dynamics 365 V9ç‰ˆæœ¬çš„å‘å¸ƒï¼Œå¤šé€‰åŸŸçš„é—®é¢˜å°†ä¸å†å¤æ‚ï¼ˆé’ˆå¯¹ç®€å•çš„éœ€æ±‚ï¼‰ï¼Œå› ä¸ºMSç»ˆäºæŠŠå¤šé€‰åŸŸå­—æ®µæ·»åŠ äº†è¿›æ¥ã€‚&lt;/p&gt;
&lt;h4&gt;ã€€ã€€1. æ·»åŠ å¤šé€‰åŸŸå­—æ®µ&lt;/h4&gt;
&lt;p&gt;ã€€ã€€ä¸æ–°å»ºOptionSetçš„æ–¹å¼æ²¡æœ‰åŒºåˆ«ï¼Œé€‰æ‹©å­—æ®µç±»å‹â€œMultiSelect Option Setâ€ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªGlobal Multiple Select Option Set&lt;/p&gt;
&lt;p&gt;ã€€ã€€&lt;img src=&quot;https://images2018.cnblogs.com/blog/1055981/201802/1055981-20180227170408753-535939433.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€åœ¨åˆ›å»ºå®Œä¹‹åï¼Œæˆ‘ä»¬æŠŠå®ƒPublishåˆ°Formä¸Šï¼Œæ¥çœ‹çœ‹å…·ä½“çš„é€‰æ‹©æ•ˆæœæ˜¯ä»€ä¹ˆæ ·çš„&lt;/p&gt;
&lt;p&gt;ã€€ã€€&lt;img src=&quot;https://images2018.cnblogs.com/blog/1055981/201802/1055981-20180227171221685-397383455.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;æ”¯æŒå…¨é€‰/åå…¨é€‰&lt;/li&gt;
&lt;li&gt;æ”¯æŒæœç´¢ï¼Œæ˜¯åŒ…å«çš„æŸ¥è¯¢ç»“æœ&lt;/li&gt;
&lt;li&gt;â€œ4 itemsâ€æ˜¾ç¤ºçš„æ˜¯æŸ¥è¯¢çš„ç»“æœæ•°ç›®ï¼Œé»˜è®¤æ˜¯æ‰€æœ‰&lt;/li&gt;
&lt;li&gt;å¯ä»¥é€šè¿‡ç‚¹å‡»â€œxâ€æ¥å»æ‰é€‰é¡¹&lt;/li&gt;
&lt;/ol&gt;&lt;h4&gt;ã€€ã€€2. Advanced Find&lt;/h4&gt;
&lt;p&gt;ã€€ã€€æ—¢ç„¶è¿™æ˜¯ä¸€ä¸ªå­—æ®µï¼Œé‚£ä¹ˆå½“ç„¶å¯ä»¥é€šè¿‡Advanced FindæŸ¥è¯¢ï¼Œå¯¹æ¯”ä»¥å‰çš„è§„åˆ™æ¡ä»¶ï¼Œå¤šé€‰åŸŸå¤šäº†ä¸¤ä¸ªè§„åˆ™ï¼šâ€œContains Valuesâ€ï¼Œ&quot;Does Not Contains Values&quot;&lt;/p&gt;
&lt;p&gt;ã€€ã€€&lt;img src=&quot;https://images2018.cnblogs.com/blog/1055981/201802/1055981-20180227172101786-286394348.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€é‚£ä¹ˆFetchXmlä¹Ÿç›¸åº”çš„æœ‰æ‰€æ”¹å˜&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;fetch &lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;=&quot;1.0&quot;&lt;/span&gt;&lt;span&gt; output-format&lt;/span&gt;&lt;span&gt;=&quot;xml-platform&quot;&lt;/span&gt;&lt;span&gt; mapping&lt;/span&gt;&lt;span&gt;=&quot;logical&quot;&lt;/span&gt;&lt;span&gt; distinct&lt;/span&gt;&lt;span&gt;=&quot;false&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 2&lt;/span&gt;   &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;entity &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;account&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 3&lt;/span&gt;     &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;attribute &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;name&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
&lt;span&gt; 4&lt;/span&gt;     &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;attribute &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;primarycontactid&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
&lt;span&gt; 5&lt;/span&gt;     &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;attribute &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;telephone1&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
&lt;span&gt; 6&lt;/span&gt;     &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;attribute &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;accountid&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
&lt;span&gt; 7&lt;/span&gt;     &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;order &lt;/span&gt;&lt;span&gt;attribute&lt;/span&gt;&lt;span&gt;=&quot;name&quot;&lt;/span&gt;&lt;span&gt; descending&lt;/span&gt;&lt;span&gt;=&quot;false&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
&lt;span&gt; 8&lt;/span&gt;     &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;filter &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;and&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 9&lt;/span&gt;       &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;condition &lt;/span&gt;&lt;span&gt;attribute&lt;/span&gt;&lt;span&gt;=&quot;new_multiselect&quot;&lt;/span&gt;&lt;span&gt; operator&lt;/span&gt;&lt;span&gt;=&quot;contain-values&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;10&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;100000000&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;11&lt;/span&gt;       &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;condition&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;12&lt;/span&gt;       &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;condition &lt;/span&gt;&lt;span&gt;attribute&lt;/span&gt;&lt;span&gt;=&quot;new_multiselect&quot;&lt;/span&gt;&lt;span&gt; operator&lt;/span&gt;&lt;span&gt;=&quot;not-contain-values&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;13&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;100000001&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;14&lt;/span&gt;       &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;condition&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;15&lt;/span&gt;       &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;condition &lt;/span&gt;&lt;span&gt;attribute&lt;/span&gt;&lt;span&gt;=&quot;new_multiselect&quot;&lt;/span&gt;&lt;span&gt; operator&lt;/span&gt;&lt;span&gt;=&quot;in&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;16&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;100000000&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;17&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;100000002&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;18&lt;/span&gt;       &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;condition&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;19&lt;/span&gt;     &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;filter&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;20&lt;/span&gt;   &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;entity&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;21&lt;/span&gt; &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;fetch&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;ã€€ã€€3. APIè°ƒç”¨&lt;/h4&gt;
&lt;p&gt;ã€€ã€€å¦‚æœæƒ³æ‰§è¡Œå¤šé€‰åŸŸç›¸å…³çš„æ“ä½œï¼Œæ¯”å¦‚æŸ¥è¯¢ç»“æœï¼Œè¿™é‡Œéœ€è¦å¼•ç”¨æœ€æ–°ç‰ˆæœ¬çš„dllã€‚åœ¨V9ç‰ˆæœ¬ä¹‹åï¼ŒMSå°†ä¸å†åƒä»¥å‰é‚£æ ·æä¾›SDKçš„ä¸‹è½½åŒ…ï¼ŒAssemblyç›´æ¥é€šè¿‡Nugetæ·»åŠ ï¼Œå…·ä½“çš„åå­—ï¼šMicrosoft.CrmSdk.CoreAssembliesã€‚é‡Œé¢åŒ…å«äº†éœ€è¦ç”¨åˆ°çš„Microsoft.Xrm.Sdk.dllå’ŒMicrosoft.Crm.Sdk.Proxy.dll&lt;/p&gt;
&lt;p&gt;ã€€ã€€&lt;img src=&quot;https://images2018.cnblogs.com/blog/1055981/201802/1055981-20180227213045122-551124302.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€æ¥ç€æˆ‘ä»¬çœ‹çœ‹å¤šé€‰åŸŸå­—æ®µå€¼åˆ°åº•æ˜¯ä»€ä¹ˆæ ·çš„ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€&lt;img src=&quot;https://images2018.cnblogs.com/blog/1055981/201802/1055981-20180227213800797-332789154.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€å¤šé€‰åŸŸå­—æ®µçš„å€¼æ˜¯ä¸€ä¸ªé›†åˆï¼šOptionSetValueCollectionï¼Œæ¯ä¸€ä¸ªè¢«é€‰ä¸­çš„é€‰é¡¹æ˜¯ä¸€ä¸ªOptionSetValueå¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€&lt;img src=&quot;https://images2018.cnblogs.com/blog/1055981/201802/1055981-20180227214038471-2134227267.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€å¹¶ä¸”åƒOptionSetä¸€æ ·ï¼ŒFormattedValuesé‡Œå¯ä»¥å¾—åˆ°æ‰€æœ‰è¢«é€‰ä¸­é€‰é¡¹çš„Labelå€¼ï¼Œä½†æ˜¯è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ç‚¹ï¼ŒLabelå€¼æ˜¯ç”¨â€œ;â€åˆ†å·éš”å¼€ï¼Œè€Œä¸”é™¤äº†ç¬¬ä¸€ä¸ªå€¼ä¹‹å¤–ï¼Œåç»­çš„å€¼çš„å‰é¢éƒ½ä¼šæœ‰ä¸ªç©ºæ ¼ï¼Œåœ¨è¿›è¡Œæ•°æ®æ“ä½œå‰ï¼Œéœ€è¦æŠŠç©ºæ ¼å»æ‰ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€å†æé†’ä¸€ä¸‹ï¼Œè¿™é‡Œéœ€è¦ç”¨åˆ°V9ç‰ˆæœ¬åŠä»¥åçš„dllï¼Œä¸ç„¶å¤šé€‰åŸŸå­—æ®µçš„Valueéƒ½æ˜¯ç©ºã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä¹‹å‰è¯´åˆ°Operationæœ‰æ›´æ–°ï¼Œé‚£ä¹ˆå¯¹åº”äºAdvanced Findé‡Œé¢çš„æƒ…å†µï¼ŒAPIä¸­çš„Operatorå€¼åˆ†åˆ«æ˜¯ConditionOperator.ContainValueså’ŒConditionOperator.DoesNotContainValuesã€‚&lt;/p&gt;







</description>
<pubDate>Tue, 27 Feb 2018 13:52:00 +0000</pubDate>
<dc:creator>YOBYRON</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/yobyron/p/MultiSelect.html</dc:identifier>
</item>
<item>
<title>å›¾ä¹¦ç®¡ç†ç³»ç»Ÿã€ç”¨æˆ·ã€è´­ä¹°ã€è®¢å•æ¨¡å—ã€æ·»åŠ æƒé™ã€‘ - Java3y</title>
<link>http://www.cnblogs.com/Java3y/p/8481080.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/Java3y/p/8481080.html</guid>
<description>&lt;p&gt;è¦ç™»é™†åæ‰èƒ½è´­ä¹°ï¼Œå› æ­¤æˆ‘ä»¬å…ˆå†™è´­ä¹°æ¨¡å—.&lt;/p&gt;
&lt;h2 id=&quot;è®¾è®¡å®ä½“&quot;&gt;è®¾è®¡å®ä½“&lt;/h2&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;8&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; String id;
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; String username;
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; String password;
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; String email;
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; String cellphone;
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; String address;

    &lt;span class=&quot;co&quot;&gt;//å„ç§setterã€getter&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;è®¾è®¡æ•°æ®åº“è¡¨&quot;&gt;è®¾è®¡æ•°æ®åº“è¡¨&lt;/h2&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;13&quot;&gt;
&lt;pre class=&quot;sourceCode sql&quot;&gt;
&lt;code class=&quot;sourceCode sql&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;TABLE&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;user&lt;/span&gt; (

  &lt;span class=&quot;kw&quot;&gt;id&lt;/span&gt;        &lt;span class=&quot;dt&quot;&gt;VARCHAR&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;40&lt;/span&gt;) &lt;span class=&quot;kw&quot;&gt;PRIMARY&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;KEY&lt;/span&gt;,
  username  &lt;span class=&quot;dt&quot;&gt;VARCHAR&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;20&lt;/span&gt;) &lt;span class=&quot;kw&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;NULL&lt;/span&gt;,
  cellphone &lt;span class=&quot;dt&quot;&gt;VARCHAR&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;20&lt;/span&gt;) &lt;span class=&quot;kw&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;NULL&lt;/span&gt;,
  address   &lt;span class=&quot;dt&quot;&gt;VARCHAR&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;40&lt;/span&gt;) &lt;span class=&quot;kw&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;NULL&lt;/span&gt;,
  email     &lt;span class=&quot;dt&quot;&gt;VARCHAR&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;30&lt;/span&gt;),
  &lt;span class=&quot;kw&quot;&gt;password&lt;/span&gt;  &lt;span class=&quot;dt&quot;&gt;VARCHAR&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;30&lt;/span&gt;) &lt;span class=&quot;kw&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;NULL&lt;/span&gt;

);&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;ç¼–å†™dao&quot;&gt;ç¼–å†™DAO&lt;/h2&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;
&lt;span class=&quot;co&quot;&gt;/**&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * ç”¨æˆ·çš„ç™»å½•æ³¨å†Œæ¨¡å—&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * 1ï¼šç™»é™†&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * 2ï¼šæ³¨å†Œ&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * 3ï¼šæ ¹æ®idæŸ¥æ‰¾å…·ä½“çš„ç”¨æˆ·&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; */&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; UserDaoImpl {



    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;register&lt;/span&gt;(User user) {

        QueryRunner queryRunner = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;QueryRunner&lt;/span&gt;(Utils2DB.&lt;span class=&quot;fu&quot;&gt;getDataSource&lt;/span&gt;());

        String sql = &lt;span class=&quot;st&quot;&gt;&quot;INSERT INTO user (id,username,cellphone,address,email,password) VALUES(?,?,?,?,?,?)&quot;&lt;/span&gt;;
        &lt;span class=&quot;kw&quot;&gt;try&lt;/span&gt; {

            queryRunner.&lt;span class=&quot;fu&quot;&gt;update&lt;/span&gt;(sql, &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; Object[]{user.&lt;span class=&quot;fu&quot;&gt;getId&lt;/span&gt;(),user.&lt;span class=&quot;fu&quot;&gt;getUsername&lt;/span&gt;(), user.&lt;span class=&quot;fu&quot;&gt;getCellphone&lt;/span&gt;(), user.&lt;span class=&quot;fu&quot;&gt;getAddress&lt;/span&gt;(), user.&lt;span class=&quot;fu&quot;&gt;getEmail&lt;/span&gt;(), user.&lt;span class=&quot;fu&quot;&gt;getPassword&lt;/span&gt;()});
        } &lt;span class=&quot;kw&quot;&gt;catch&lt;/span&gt; (SQLException e) {
            &lt;span class=&quot;kw&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; RuntimeException(e);
        }
    }

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; User &lt;span class=&quot;fu&quot;&gt;login&lt;/span&gt;(String username, String password) {

        QueryRunner queryRunner = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;QueryRunner&lt;/span&gt;(Utils2DB.&lt;span class=&quot;fu&quot;&gt;getDataSource&lt;/span&gt;());

        String sql = &lt;span class=&quot;st&quot;&gt;&quot;SELECT * FROM user WHERE username = ? AND password=?&quot;&lt;/span&gt;;
        &lt;span class=&quot;kw&quot;&gt;try&lt;/span&gt; {

            &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; (User) queryRunner.&lt;span class=&quot;fu&quot;&gt;query&lt;/span&gt;(sql, &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; Object[]{username, password}, &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;BeanHandler&lt;/span&gt;(User.&lt;span class=&quot;fu&quot;&gt;class&lt;/span&gt;));
        } &lt;span class=&quot;kw&quot;&gt;catch&lt;/span&gt; (SQLException e) {
            &lt;span class=&quot;kw&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; RuntimeException(e);
        }
    }

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; User &lt;span class=&quot;fu&quot;&gt;find&lt;/span&gt;(String id) {

        QueryRunner queryRunner = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;QueryRunner&lt;/span&gt;(Utils2DB.&lt;span class=&quot;fu&quot;&gt;getDataSource&lt;/span&gt;());

        String sql = &lt;span class=&quot;st&quot;&gt;&quot;SELECT * FROM user WHERE id=?&quot;&lt;/span&gt;;
        &lt;span class=&quot;kw&quot;&gt;try&lt;/span&gt; {

            &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; (User) queryRunner.&lt;span class=&quot;fu&quot;&gt;query&lt;/span&gt;(sql, id, &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;BeanHandler&lt;/span&gt;(User.&lt;span class=&quot;fu&quot;&gt;class&lt;/span&gt;));
        } &lt;span class=&quot;kw&quot;&gt;catch&lt;/span&gt; (SQLException e) {
            &lt;span class=&quot;kw&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; RuntimeException(e);
        }
    }

}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;æµ‹è¯•dao&quot;&gt;æµ‹è¯•DAO&lt;/h2&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;11&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; UserDemo {
    UserDaoImpl userDao = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;UserDaoImpl&lt;/span&gt;();

    &lt;span class=&quot;fu&quot;&gt;@Test&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;add&lt;/span&gt;() {

        User user = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;User&lt;/span&gt;();
        user.&lt;span class=&quot;fu&quot;&gt;setId&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;1&quot;&lt;/span&gt;);
        user.&lt;span class=&quot;fu&quot;&gt;setUsername&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;zhong&quot;&lt;/span&gt;);
        user.&lt;span class=&quot;fu&quot;&gt;setPassword&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;123&quot;&lt;/span&gt;);
        user.&lt;span class=&quot;fu&quot;&gt;setCellphone&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;10085&quot;&lt;/span&gt;);
        user.&lt;span class=&quot;fu&quot;&gt;setAddress&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;å¹¿å·èå²—&quot;&lt;/span&gt;);
        user.&lt;span class=&quot;fu&quot;&gt;setEmail&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;40368324234234@QQ.com&quot;&lt;/span&gt;);

        userDao.&lt;span class=&quot;fu&quot;&gt;register&lt;/span&gt;(user);
    }

    &lt;span class=&quot;fu&quot;&gt;@Test&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;find&lt;/span&gt;() {

        String id = &lt;span class=&quot;st&quot;&gt;&quot;1&quot;&lt;/span&gt;;
        User user = userDao.&lt;span class=&quot;fu&quot;&gt;find&lt;/span&gt;(id);

        System.&lt;span class=&quot;fu&quot;&gt;out&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(user.&lt;span class=&quot;fu&quot;&gt;getEmail&lt;/span&gt;());
    }

    &lt;span class=&quot;fu&quot;&gt;@Test&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;login&lt;/span&gt;() {
        String username = &lt;span class=&quot;st&quot;&gt;&quot;zhong&quot;&lt;/span&gt;;
        String password = &lt;span class=&quot;st&quot;&gt;&quot;123&quot;&lt;/span&gt;;
        User user = userDao.&lt;span class=&quot;fu&quot;&gt;login&lt;/span&gt;(username, password);

        System.&lt;span class=&quot;fu&quot;&gt;out&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(user.&lt;span class=&quot;fu&quot;&gt;getAddress&lt;/span&gt;());
    }
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;æŠ½å–dao&quot;&gt;æŠ½å–DAO&lt;/h2&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;9&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;interface&lt;/span&gt; UserDao {
    &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;register&lt;/span&gt;(User user);

    User &lt;span class=&quot;fu&quot;&gt;login&lt;/span&gt;(String username, String password);

    User &lt;span class=&quot;fu&quot;&gt;find&lt;/span&gt;(String id);
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;ç¼–å†™service&quot;&gt;ç¼–å†™Service&lt;/h2&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;13&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; UserDao userDao = DaoFactory.&lt;span class=&quot;fu&quot;&gt;getInstance&lt;/span&gt;().&lt;span class=&quot;fu&quot;&gt;createDao&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;zhongfucheng.dao.impl.UserDaoImpl&quot;&lt;/span&gt;, UserDao.&lt;span class=&quot;fu&quot;&gt;class&lt;/span&gt;);

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;registerUser&lt;/span&gt;(User user) {
        userDao.&lt;span class=&quot;fu&quot;&gt;register&lt;/span&gt;(user);
    }
    
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; User &lt;span class=&quot;fu&quot;&gt;loginUser&lt;/span&gt;(String username,String password) {
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; userDao.&lt;span class=&quot;fu&quot;&gt;login&lt;/span&gt;(username, password);
    }
    
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; User &lt;span class=&quot;fu&quot;&gt;findUser&lt;/span&gt;(String id) {
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; userDao.&lt;span class=&quot;fu&quot;&gt;find&lt;/span&gt;(id);
    }&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;å‰å°æ ·å¼&quot;&gt;å‰å°æ ·å¼&lt;/h2&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;8&quot;&gt;
&lt;pre class=&quot;sourceCode html&quot;&gt;
&lt;code class=&quot;sourceCode html&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;div&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; id=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;User&quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
    ç”¨æˆ·åï¼š&lt;span class=&quot;kw&quot;&gt;&amp;lt;input&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; type=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; name=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;username&quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
    å¯†ç ï¼š&lt;span class=&quot;kw&quot;&gt;&amp;lt;input&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; type=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;password&quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; name=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;password&quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;&amp;lt;button&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; name=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;login&quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;ç™»é™†&lt;span class=&quot;kw&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;&amp;lt;button&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; name=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;register&quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;æ³¨å†Œ&lt;span class=&quot;kw&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;sourceCode css&quot;&gt;
&lt;code class=&quot;sourceCode css&quot;&gt;
&lt;span class=&quot;fl&quot;&gt;#body&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;position:&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;relative&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;fl&quot;&gt;#user&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;position:&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;absolute&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;margin-top:&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;130px&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;margin-left:&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;1364px&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;}&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;http://img.blog.csdn.net/20170416105452440?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaG9uXzN5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast&quot; alt=&quot;è¿™é‡Œå†™å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;hr/&gt;&lt;h2 id=&quot;å®ç°ç™»é™†æ³¨å†ŒåŠŸèƒ½&quot;&gt;å®ç°ç™»é™†æ³¨å†ŒåŠŸèƒ½&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;å½“ç‚¹å‡»ç™»é™†æŒ‰é’®çš„æ—¶å€™ï¼ŒæŠŠæ•°æ®å¸¦è¿‡å»ç»™Servletï¼Œè®©Servletè°ƒç”¨BusinessServiceæ–¹æ³•ï¼Œå®ç°ç™»é™†&lt;/strong&gt;ã€‚æ³¨å†ŒåŒç†.....å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°JavaScriptä»£ç &lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;10&quot;&gt;
&lt;pre class=&quot;sourceCode jsp&quot;&gt;
&lt;code class=&quot;sourceCode jsp&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;c:if&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; test&lt;/span&gt;=&lt;span class=&quot;dt&quot;&gt;&quot;&lt;/span&gt;${user==&lt;span class=&quot;kw&quot;&gt;null&lt;/span&gt;}&lt;span class=&quot;dt&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
&amp;lt;div&lt;span class=&quot;ot&quot;&gt; id&lt;/span&gt;=&lt;span class=&quot;dt&quot;&gt;&quot;User&quot;&lt;/span&gt;&amp;gt;
    ç”¨æˆ·åï¼š&amp;lt;input&lt;span class=&quot;ot&quot;&gt; type&lt;/span&gt;=&lt;span class=&quot;dt&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; id&lt;/span&gt;=&lt;span class=&quot;dt&quot;&gt;&quot;username&quot;&lt;/span&gt;&amp;gt;
    å¯†ç ï¼š&amp;lt;input&lt;span class=&quot;ot&quot;&gt; type&lt;/span&gt;=&lt;span class=&quot;dt&quot;&gt;&quot;password&quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; id&lt;/span&gt;=&lt;span class=&quot;dt&quot;&gt;&quot;password&quot;&lt;/span&gt;&amp;gt;
    &amp;lt;button&lt;span class=&quot;ot&quot;&gt; name&lt;/span&gt;=&lt;span class=&quot;dt&quot;&gt;&quot;login&quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; onclick&lt;/span&gt;=&lt;span class=&quot;dt&quot;&gt;&quot;login()&quot;&lt;/span&gt;&amp;gt;ç™»é™†&amp;lt;/button&amp;gt;
    &amp;lt;button&lt;span class=&quot;ot&quot;&gt; name&lt;/span&gt;=&lt;span class=&quot;dt&quot;&gt;&quot;register&quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; onclick&lt;/span&gt;=&lt;span class=&quot;dt&quot;&gt;&quot;register()&quot;&lt;/span&gt;&amp;gt;æ³¨å†Œ&amp;lt;/button&amp;gt;
&amp;lt;/div&amp;gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;/c:if&amp;gt;&lt;/span&gt;

&lt;span class=&quot;kw&quot;&gt;&amp;lt;c:if&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; test&lt;/span&gt;=&lt;span class=&quot;dt&quot;&gt;&quot;&lt;/span&gt;${user!=&lt;span class=&quot;kw&quot;&gt;null&lt;/span&gt;}&lt;span class=&quot;dt&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
    &amp;lt;div&lt;span class=&quot;ot&quot;&gt; id&lt;/span&gt;=&lt;span class=&quot;dt&quot;&gt;&quot;User&quot;&lt;/span&gt;&amp;gt;
        &amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;æ¬¢è¿æ‚¨ï¼š${user.username}&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;lt;a&lt;span class=&quot;ot&quot;&gt; href&lt;/span&gt;=&lt;span class=&quot;dt&quot;&gt;&quot;&lt;/span&gt;${pageContext.request.contextPath}&lt;span class=&quot;dt&quot;&gt;/UserServlet?method=Logout&quot;&lt;/span&gt;&amp;gt;æ³¨é”€&amp;lt;/a&amp;gt;
    &amp;lt;/div&amp;gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;/c:if&amp;gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;javaScriptä»£ç &lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;sourceCode&quot; readability=&quot;10&quot;&gt;
&lt;pre class=&quot;sourceCode javascript&quot;&gt;
&lt;code class=&quot;sourceCode javascript&quot;&gt;
    &lt;span class=&quot;op&quot;&gt;&amp;lt;&lt;/span&gt;script type&lt;span class=&quot;op&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;&amp;gt;&lt;/span&gt;

        &lt;span class=&quot;kw&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;login&lt;/span&gt;() &lt;span class=&quot;op&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;co&quot;&gt;//å¾—åˆ°è¾“å…¥æ¡†çš„æ•°æ®&lt;/span&gt;
            &lt;span class=&quot;kw&quot;&gt;var&lt;/span&gt; username &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;va&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;username&quot;&lt;/span&gt;).&lt;span class=&quot;at&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;kw&quot;&gt;var&lt;/span&gt; password &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;va&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;password&quot;&lt;/span&gt;).&lt;span class=&quot;at&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;

            &lt;span class=&quot;co&quot;&gt;//è·³è½¬åˆ°ç›¸å¯¹åº”çš„Servletä¸Š&lt;/span&gt;
            &lt;span class=&quot;va&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;va&quot;&gt;location&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;href&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&quot;${pageContext.request.contextPath}/UserServlet?method=login&amp;amp;username=&quot;&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;+&lt;/span&gt; username &lt;span class=&quot;op&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&quot;&amp;amp;password=&quot;&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;+&lt;/span&gt; password&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;op&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;kw&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;register&lt;/span&gt;() &lt;span class=&quot;op&quot;&gt;{&lt;/span&gt;

            &lt;span class=&quot;co&quot;&gt;//è·³è½¬åˆ°æ³¨å†Œé¡µé¢&lt;/span&gt;
            &lt;span class=&quot;va&quot;&gt;window&lt;/span&gt;.&lt;span class=&quot;va&quot;&gt;location&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;href&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&quot;${pageContext.request.contextPath}/client/register.jsp&quot;&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;op&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;op&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;/script&amp;gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;UserServlet&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;sourceCode&quot; readability=&quot;20&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;

        String method = request.&lt;span class=&quot;fu&quot;&gt;getParameter&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;method&quot;&lt;/span&gt;);

        BussinessServiceImpl service = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;BussinessServiceImpl&lt;/span&gt;();
        &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (method.&lt;span class=&quot;fu&quot;&gt;equals&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;login&quot;&lt;/span&gt;)) {

            &lt;span class=&quot;kw&quot;&gt;try&lt;/span&gt; {
                &lt;span class=&quot;co&quot;&gt;//å¾—åˆ°é¡µé¢ä¼ é€’è¿‡æ¥çš„æ•°æ®&lt;/span&gt;
                String username = request.&lt;span class=&quot;fu&quot;&gt;getParameter&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;username&quot;&lt;/span&gt;);
                String password = request.&lt;span class=&quot;fu&quot;&gt;getParameter&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;password&quot;&lt;/span&gt;);
                User user = service.&lt;span class=&quot;fu&quot;&gt;loginUser&lt;/span&gt;(username, password);

                request.&lt;span class=&quot;fu&quot;&gt;getSession&lt;/span&gt;().&lt;span class=&quot;fu&quot;&gt;setAttribute&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;user&quot;&lt;/span&gt;,user);
                request.&lt;span class=&quot;fu&quot;&gt;getRequestDispatcher&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;/client/head.jsp&quot;&lt;/span&gt;).&lt;span class=&quot;fu&quot;&gt;forward&lt;/span&gt;(request, response);

            } &lt;span class=&quot;kw&quot;&gt;catch&lt;/span&gt; (Exception e) {
                request.&lt;span class=&quot;fu&quot;&gt;setAttribute&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;message&quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&quot;ç™»é™†å¤±è´¥äº†ï¼&quot;&lt;/span&gt;);
                request.&lt;span class=&quot;fu&quot;&gt;getRequestDispatcher&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;/message.jsp&quot;&lt;/span&gt;).&lt;span class=&quot;fu&quot;&gt;forward&lt;/span&gt;(request, response);
            }

        } &lt;span class=&quot;kw&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (method.&lt;span class=&quot;fu&quot;&gt;equals&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;register&quot;&lt;/span&gt;)) {

            &lt;span class=&quot;kw&quot;&gt;try&lt;/span&gt; {
                &lt;span class=&quot;co&quot;&gt;//å¾—åˆ°JSPä¼ é€’è¿‡æ¥çš„æ•°æ®ï¼Œå°è£…æˆBeanå¯¹è±¡&lt;/span&gt;
                User user = WebUtils.&lt;span class=&quot;fu&quot;&gt;request2Bean&lt;/span&gt;(request, User.&lt;span class=&quot;fu&quot;&gt;class&lt;/span&gt;);
                user.&lt;span class=&quot;fu&quot;&gt;setId&lt;/span&gt;(WebUtils.&lt;span class=&quot;fu&quot;&gt;makeId&lt;/span&gt;());

                service.&lt;span class=&quot;fu&quot;&gt;registerUser&lt;/span&gt;(user);

                request.&lt;span class=&quot;fu&quot;&gt;setAttribute&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;message&quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&quot;æ³¨å†ŒæˆåŠŸäº†ï¼&quot;&lt;/span&gt;);

            } &lt;span class=&quot;kw&quot;&gt;catch&lt;/span&gt; (Exception e) {
                e.&lt;span class=&quot;fu&quot;&gt;printStackTrace&lt;/span&gt;();
                request.&lt;span class=&quot;fu&quot;&gt;setAttribute&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;message&quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&quot;æ³¨å†Œå¤±è´¥äº†ï¼&quot;&lt;/span&gt;);
            }
            request.&lt;span class=&quot;fu&quot;&gt;getRequestDispatcher&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;/message.jsp&quot;&lt;/span&gt;).&lt;span class=&quot;fu&quot;&gt;forward&lt;/span&gt;(request, response);
        } &lt;span class=&quot;kw&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (method.&lt;span class=&quot;fu&quot;&gt;equals&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;Logout&quot;&lt;/span&gt;)) {

            &lt;span class=&quot;co&quot;&gt;//é”€æ¯session&lt;/span&gt;
            request.&lt;span class=&quot;fu&quot;&gt;getSession&lt;/span&gt;().&lt;span class=&quot;fu&quot;&gt;invalidate&lt;/span&gt;();

            &lt;span class=&quot;co&quot;&gt;//å›åˆ°é¦–é¡µ&lt;/span&gt;
            request.&lt;span class=&quot;fu&quot;&gt;getRequestDispatcher&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;/client/head.jsp&quot;&lt;/span&gt;).&lt;span class=&quot;fu&quot;&gt;forward&lt;/span&gt;(request, response);

        }&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;åœ¨æ˜¾ç¤ºå›¾ä¹¦çš„æ—¶å€™ï¼Œé¡ºä¾¿æ·»åŠ è´­ä¹°çš„è¶…é“¾æ¥&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;sourceCode html&quot;&gt;
&lt;code class=&quot;sourceCode html&quot;&gt;    &lt;span class=&quot;kw&quot;&gt;&amp;lt;li&amp;gt;&amp;lt;a&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; href=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;#&quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;è´­ä¹°&lt;span class=&quot;kw&quot;&gt;&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;è®¾è®¡è´­ç‰©è½¦å®ä½“&quot;&gt;è®¾è®¡è´­ç‰©è½¦å®ä½“&lt;/h2&gt;
&lt;p&gt;å¦‚æœä¸æ¸…æ¥šä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Œå¯å‚è€ƒæˆ‘ä¹‹å‰çš„åšæ–‡ï¼š&lt;a href=&quot;http://blog.csdn.net/hon_3y/article/details/56481439#t5&quot; class=&quot;uri&quot;&gt;http://blog.csdn.net/hon_3y/article/details/56481439#t5&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Cartå®ä½“&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;sourceCode&quot; readability=&quot;15&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; Cart {

    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; Map&amp;lt;String, CartItem&amp;gt; map = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;&amp;gt;();
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;double&lt;/span&gt; price;


    &lt;span class=&quot;co&quot;&gt;//æä¾›æŠŠå•†å“æ·»åŠ åˆ°è´­ç‰©çš„åŠŸèƒ½&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;addBook2Cart&lt;/span&gt;(Book book) {

        &lt;span class=&quot;co&quot;&gt;//å¾—åˆ°å¯¹åº”çš„è´­ç‰©é¡¹&lt;/span&gt;
        CartItem cartItem = map.&lt;span class=&quot;fu&quot;&gt;get&lt;/span&gt;(book.&lt;span class=&quot;fu&quot;&gt;getId&lt;/span&gt;());

        &lt;span class=&quot;co&quot;&gt;//å¦‚æœæ˜¯nullï¼Œè¯´æ˜è´­ç‰©è½¦è¿˜æ²¡æœ‰è¯¥è´­ç‰©é¡¹&lt;/span&gt;
        &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (cartItem == &lt;span class=&quot;kw&quot;&gt;null&lt;/span&gt;) {
            cartItem = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;CartItem&lt;/span&gt;();
            cartItem.&lt;span class=&quot;fu&quot;&gt;setQuantity&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;);
            cartItem.&lt;span class=&quot;fu&quot;&gt;setBook&lt;/span&gt;(book);
            cartItem.&lt;span class=&quot;fu&quot;&gt;setPrice&lt;/span&gt;(book.&lt;span class=&quot;fu&quot;&gt;getPrice&lt;/span&gt;());

            &lt;span class=&quot;co&quot;&gt;//æŠŠè´­ç‰©é¡¹åŠ åˆ°è´­ç‰©è½¦ä¸­&lt;/span&gt;
            map.&lt;span class=&quot;fu&quot;&gt;put&lt;/span&gt;(book.&lt;span class=&quot;fu&quot;&gt;getId&lt;/span&gt;(), cartItem);
        } &lt;span class=&quot;kw&quot;&gt;else&lt;/span&gt; {

            &lt;span class=&quot;co&quot;&gt;//å¦‚æœè´­ç‰©è½¦æœ‰è¯¥è´­ç‰©é¡¹äº†ï¼Œé‚£ä¹ˆå°†è´­ç‰©é¡¹çš„æ•°é‡+1&lt;/span&gt;
            cartItem.&lt;span class=&quot;fu&quot;&gt;setQuantity&lt;/span&gt;(cartItem.&lt;span class=&quot;fu&quot;&gt;getQuantity&lt;/span&gt;() + &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;);
        }
    }


    &lt;span class=&quot;co&quot;&gt;//è´­ç‰©è½¦çš„ä»·é’±æ˜¯è´­ç‰©é¡¹ä»·é’±çš„æ€»å’Œ&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;getPrice&lt;/span&gt;() {

        &lt;span class=&quot;dt&quot;&gt;double&lt;/span&gt; totalPrice = &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;;
        &lt;span class=&quot;kw&quot;&gt;for&lt;/span&gt; (Map.&lt;span class=&quot;fu&quot;&gt;Entry&lt;/span&gt;&amp;lt;String, CartItem&amp;gt; me : map.&lt;span class=&quot;fu&quot;&gt;entrySet&lt;/span&gt;()) {
            CartItem cartItem = me.&lt;span class=&quot;fu&quot;&gt;getValue&lt;/span&gt;();
            totalPrice += cartItem.&lt;span class=&quot;fu&quot;&gt;getPrice&lt;/span&gt;();
        }

        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; totalPrice;
    }

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; Map&amp;lt;String, CartItem&amp;gt; &lt;span class=&quot;fu&quot;&gt;getMap&lt;/span&gt;() {
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; map;
    }

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;setMap&lt;/span&gt;(Map&amp;lt;String, CartItem&amp;gt; map) {
        &lt;span class=&quot;kw&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;map&lt;/span&gt; = map;
    }


    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;setPrice&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;double&lt;/span&gt; price) {
        &lt;span class=&quot;kw&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;price&lt;/span&gt; = price;
    }
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;è®¾è®¡è´­ç‰©é¡¹å®ä½“&quot;&gt;è®¾è®¡è´­ç‰©é¡¹å®ä½“&lt;/h2&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;10&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; CartItem {

    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; Book book;
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;double&lt;/span&gt; price;
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt; quantity;

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;getPrice&lt;/span&gt;() {
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;book&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;getPrice&lt;/span&gt;() * &lt;span class=&quot;kw&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;quantity&lt;/span&gt;;
    }

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;setPrice&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;double&lt;/span&gt; price) {
        &lt;span class=&quot;kw&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;price&lt;/span&gt; = price;
    }

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; Book &lt;span class=&quot;fu&quot;&gt;getBook&lt;/span&gt;() {
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; book;
    }

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;setBook&lt;/span&gt;(Book book) {
        &lt;span class=&quot;kw&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;book&lt;/span&gt; = book;
    }
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;getQuantity&lt;/span&gt;() {
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; quantity;
    }

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;setQuantity&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt; quantity) {
        &lt;span class=&quot;kw&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;quantity&lt;/span&gt; = quantity;
    }
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;å¤„ç†ç”¨æˆ·æƒ³è¦ä¹°çš„ä¹¦ç±servlet&quot;&gt;å¤„ç†ç”¨æˆ·æƒ³è¦ä¹°çš„ä¹¦ç±Servlet&lt;/h2&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;sourceCode html&quot;&gt;
&lt;code class=&quot;sourceCode html&quot;&gt;    &lt;span class=&quot;kw&quot;&gt;&amp;lt;li&amp;gt;&amp;lt;a&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; href=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;${pageContext.request&lt;/span&gt;
&lt;span class=&quot;st&quot;&gt;.contextPath}/BuyServlet?book_id=${book.id}&quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;è´­ä¹°&lt;span class=&quot;kw&quot;&gt;&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;BuyServlet&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;sourceCode&quot; readability=&quot;16&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;
        BussinessServiceImpl service = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;BussinessServiceImpl&lt;/span&gt;();

        &lt;span class=&quot;co&quot;&gt;//å…ˆæ£€æŸ¥è¯¥ç”¨æˆ·æ˜¯å¦ç™»é™†äº†ã€‚&lt;/span&gt;
        User user = (User) request.&lt;span class=&quot;fu&quot;&gt;getSession&lt;/span&gt;().&lt;span class=&quot;fu&quot;&gt;getAttribute&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;user&quot;&lt;/span&gt;);
        &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (user == &lt;span class=&quot;kw&quot;&gt;null&lt;/span&gt;) {
            request.&lt;span class=&quot;fu&quot;&gt;setAttribute&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;message&quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&quot;æ‚¨è¿˜æ²¡ç™»é™†ï¼Œè¯·ç™»é™†äº†å†æ¥è´­ä¹°&quot;&lt;/span&gt;);
            request.&lt;span class=&quot;fu&quot;&gt;getRequestDispatcher&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;/message.jsp&quot;&lt;/span&gt;).&lt;span class=&quot;fu&quot;&gt;forward&lt;/span&gt;(request, response);
            &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; ;
        }

        &lt;span class=&quot;co&quot;&gt;//å¦‚æœç™»é™†äº†...&lt;/span&gt;

        &lt;span class=&quot;co&quot;&gt;//å¾—åˆ°è¯¥ç”¨æˆ·çš„è´­ç‰©è½¦&lt;/span&gt;
        Cart cart = (Cart) request.&lt;span class=&quot;fu&quot;&gt;getSession&lt;/span&gt;().&lt;span class=&quot;fu&quot;&gt;getAttribute&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;cart&quot;&lt;/span&gt;);
        &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (cart == &lt;span class=&quot;kw&quot;&gt;null&lt;/span&gt;) {
            cart = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;Cart&lt;/span&gt;();
            request.&lt;span class=&quot;fu&quot;&gt;getSession&lt;/span&gt;().&lt;span class=&quot;fu&quot;&gt;setAttribute&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;cart&quot;&lt;/span&gt;, cart);
        }

        &lt;span class=&quot;co&quot;&gt;//å¾—åˆ°ç”¨æˆ·æƒ³ä¹°çš„ä¹¦ç±&lt;/span&gt;
        String book_id = request.&lt;span class=&quot;fu&quot;&gt;getParameter&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;book_id&quot;&lt;/span&gt;);
        Book book = service.&lt;span class=&quot;fu&quot;&gt;findBook&lt;/span&gt;(book_id);

        &lt;span class=&quot;co&quot;&gt;//æŠŠä¹¦ç±æ·»åŠ åˆ°è´­ç‰©è½¦ä¸­&lt;/span&gt;
        service.&lt;span class=&quot;fu&quot;&gt;buyBook&lt;/span&gt;(cart, book);
        request.&lt;span class=&quot;fu&quot;&gt;setAttribute&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;message&quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&quot;è¯¥å•†å“å·²æ·»åŠ åˆ°è´­ç‰©è½¦ä¸­&quot;&lt;/span&gt;);
        request.&lt;span class=&quot;fu&quot;&gt;getRequestDispatcher&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;/message.jsp&quot;&lt;/span&gt;).&lt;span class=&quot;fu&quot;&gt;forward&lt;/span&gt;(request,response);&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;æä¾›æ˜¾ç¤ºè´­ç‰©è½¦å•†å“çš„servlet&quot;&gt;æä¾›æ˜¾ç¤ºè´­ç‰©è½¦å•†å“çš„Servlet&lt;/h2&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;14&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;
        &lt;span class=&quot;co&quot;&gt;//å…ˆåˆ¤æ–­è¯¥ç”¨æˆ·æ˜¯å¦ç™»é™†äº†&lt;/span&gt;
        User user = (User) request.&lt;span class=&quot;fu&quot;&gt;getSession&lt;/span&gt;().&lt;span class=&quot;fu&quot;&gt;getAttribute&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;user&quot;&lt;/span&gt;);
        &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (user == &lt;span class=&quot;kw&quot;&gt;null&lt;/span&gt;) {
            request.&lt;span class=&quot;fu&quot;&gt;setAttribute&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;message&quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&quot;æ‚¨è¿˜æ²¡æœ‰ç™»é™†å‘¢ï¼&quot;&lt;/span&gt;);
            request.&lt;span class=&quot;fu&quot;&gt;getRequestDispatcher&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;/message.jsp&quot;&lt;/span&gt;).&lt;span class=&quot;fu&quot;&gt;forward&lt;/span&gt;(request, response);
            &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt;;
        }

        &lt;span class=&quot;co&quot;&gt;//å¦‚æœç™»é™†äº†.....&lt;/span&gt;
        Cart cart = (Cart) request.&lt;span class=&quot;fu&quot;&gt;getSession&lt;/span&gt;().&lt;span class=&quot;fu&quot;&gt;getAttribute&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;cart&quot;&lt;/span&gt;);

        &lt;span class=&quot;co&quot;&gt;//æŠŠè¯¥ç”¨æˆ·çš„è´­ç‰©è½¦ç»™JSPé¡µé¢æ˜¾ç¤º&lt;/span&gt;
        request.&lt;span class=&quot;fu&quot;&gt;setAttribute&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;cart&quot;&lt;/span&gt;, cart);
        request.&lt;span class=&quot;fu&quot;&gt;getRequestDispatcher&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;/client/listCart.jsp&quot;&lt;/span&gt;).&lt;span class=&quot;fu&quot;&gt;forward&lt;/span&gt;(request, response);&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;æ˜¾ç¤ºè´­ç‰©è½¦çš„jspé¡µé¢&quot;&gt;æ˜¾ç¤ºè´­ç‰©è½¦çš„JSPé¡µé¢&lt;/h2&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;10&quot;&gt;
&lt;pre class=&quot;sourceCode jsp&quot;&gt;
&lt;code class=&quot;sourceCode jsp&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;c:if&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; test&lt;/span&gt;=&lt;span class=&quot;dt&quot;&gt;&quot;&lt;/span&gt;${&lt;span class=&quot;kw&quot;&gt;empty&lt;/span&gt;(cart.map)}&lt;span class=&quot;dt&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;

    æ‚¨è¿˜æ²¡æœ‰è´­ä¹°è¿‡ä»»ä½•å•†å“å“¦ï¼ï¼ï¼
&lt;span class=&quot;kw&quot;&gt;&amp;lt;/c:if&amp;gt;&lt;/span&gt;


&amp;lt;table&lt;span class=&quot;ot&quot;&gt; border&lt;/span&gt;=&lt;span class=&quot;dt&quot;&gt;&quot;1px&quot;&lt;/span&gt;&amp;gt;
    &lt;span class=&quot;kw&quot;&gt;&amp;lt;c:if&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; test&lt;/span&gt;=&lt;span class=&quot;dt&quot;&gt;&quot;&lt;/span&gt;${!&lt;span class=&quot;kw&quot;&gt;empty&lt;/span&gt;(cart.map)}&lt;span class=&quot;dt&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
        &amp;lt;h1&amp;gt;æ‚¨è´­ç‰©è½¦ä¸‹æœ‰å¦‚ä¸‹çš„å•†å“ï¼š&amp;lt;/h1&amp;gt;&amp;lt;br&amp;gt;

        &amp;lt;tr&amp;gt;
            &amp;lt;td&amp;gt;ä¹¦åï¼š&amp;lt;/td&amp;gt;
            &amp;lt;td&amp;gt;ä½œè€…ï¼š&amp;lt;/td&amp;gt;
            &amp;lt;td&amp;gt;æ•°é‡ï¼š&amp;lt;/td&amp;gt;
            &amp;lt;td&amp;gt;ä»·é’±ï¼š&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &lt;span class=&quot;kw&quot;&gt;&amp;lt;c:forEach&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; items&lt;/span&gt;=&lt;span class=&quot;dt&quot;&gt;&quot;&lt;/span&gt;${cart.map}&lt;span class=&quot;dt&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; var&lt;/span&gt;=&lt;span class=&quot;dt&quot;&gt;&quot;cartItme&quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;


            &amp;lt;tr&amp;gt;
                &amp;lt;td&amp;gt;${cartItme.value.book.name}&amp;lt;/td&amp;gt;
                &amp;lt;td&amp;gt;${cartItme.value.book.author}&amp;lt;/td&amp;gt;
                &amp;lt;td&amp;gt;${cartItme.value.quantity}&amp;lt;/td&amp;gt;
                &amp;lt;td&amp;gt;${cartItme.value.price}&amp;lt;/td&amp;gt;
            &amp;lt;/tr&amp;gt;
        &lt;span class=&quot;kw&quot;&gt;&amp;lt;/c:forEach&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;kw&quot;&gt;&amp;lt;/c:if&amp;gt;&lt;/span&gt;
&amp;lt;/table&amp;gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;æ•ˆæœ&quot;&gt;&lt;strong&gt;æ•ˆæœï¼š&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;http://img.blog.csdn.net/20170417092028520?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaG9uXzN5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast&quot; alt=&quot;è¿™é‡Œå†™å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;åœ¨å‰å°ç”¨æˆ·ç•Œé¢ä¸­ï¼Œå½“ç”¨æˆ·è¦æŠŠè´­ç‰©è½¦ä»˜æ¬¾æ—¶ï¼Œåº”è¯¥æä¾›ç”Ÿæˆè®¢å•çš„è¶…é“¾æ¥....&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://img.blog.csdn.net/20170417092656216?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaG9uXzN5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast&quot; alt=&quot;è¿™é‡Œå†™å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;hr/&gt;&lt;h2 id=&quot;è®¾è®¡è®¢å•å®ä½“&quot;&gt;è®¾è®¡è®¢å•å®ä½“&lt;/h2&gt;
&lt;p&gt;è®¢å•åº”è¯¥åŒ…å«id,æ”¶è´§äººä¿¡æ¯,ä¸‹å•çš„æ—¶é—´ï¼Œè®¢å•çš„æ€»ä»·,è®¢å•çš„çŠ¶æ€ã€æœ‰æ— å‘è´§ã€‘..è€Œä¸åº”è¯¥åŒ…å«å•†å“çš„ä¿¡æ¯çš„ã€‚å•†å“çš„ä¿¡æ¯ç”¨ä¸€ä¸ªä¸“é—¨çš„â€è®¢å•é¡¹â€œæ¥è¡¨ç¤º&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªè®¢å•å¯¹åº”å¤šä¸ªè®¢å•é¡¹ï¼Œè¿™æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ï¼&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;10&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; String id;
    
    &lt;span class=&quot;co&quot;&gt;//ä¸‹å•çš„æ—¶é—´ã€æ—¥æœŸã€çŠ¶æ€&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; Date date;
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;double&lt;/span&gt; price;
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;boolean&lt;/span&gt; state;
    
    &lt;span class=&quot;co&quot;&gt;//ä¸€ä¸ªç”¨æˆ·å¯ä»¥æœ‰å¤šä¸ªè®¢å•ï¼ŒæŠŠç”¨æˆ·è®°ä½&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; String user_id;

    &lt;span class=&quot;co&quot;&gt;//ä¸€ä¸ªè®¢å•ä¸­æœ‰å¤šä¸ªè®¢å•é¡¹&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; Set&amp;lt;OrderItem&amp;gt; items = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; HashSet&amp;lt;&amp;gt;();

    &lt;span class=&quot;co&quot;&gt;//å„ç§çš„setterå’Œgetter&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;è®¾è®¡è®¢å•é¡¹å®ä½“&quot;&gt;è®¾è®¡è®¢å•é¡¹å®ä½“&lt;/h2&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;8&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; String id;


    &lt;span class=&quot;co&quot;&gt;//ä¸€æœ¬ä¹¦å¯¹åº”å¤šä¸ªè®¢å•é¡¹ï¼Œè®¢å•é¡¹ä¸€å®šæ˜¯ç”±ä¹¦ç»„æˆï¼Œè®°ä½ä¹¦&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; String book_id;

    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;double&lt;/span&gt; price;
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt; quantity;

    &lt;span class=&quot;co&quot;&gt;//å„ç§çš„setterå’Œgetter&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;è®¾è®¡æ•°æ®åº“è¡¨-1&quot;&gt;è®¾è®¡æ•°æ®åº“è¡¨&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;mysqlä¸èƒ½åˆ›å»ºåä¸ºâ€orderâ€çš„è¡¨ï¼Œåè¾¹åŠ ä¸ªså°±å¯ä»¥&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;13&quot;&gt;
&lt;pre class=&quot;sourceCode sql&quot;&gt;
&lt;code class=&quot;sourceCode sql&quot;&gt;

&lt;span class=&quot;kw&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;TABLE&lt;/span&gt; orders (
  &lt;span class=&quot;kw&quot;&gt;id&lt;/span&gt;      &lt;span class=&quot;dt&quot;&gt;VARCHAR&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;40&lt;/span&gt;) &lt;span class=&quot;kw&quot;&gt;PRIMARY&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;KEY&lt;/span&gt;,
  &lt;span class=&quot;dt&quot;&gt;date&lt;/span&gt;    &lt;span class=&quot;dt&quot;&gt;DATE&lt;/span&gt;        &lt;span class=&quot;kw&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;NULL&lt;/span&gt;,
  user_id &lt;span class=&quot;dt&quot;&gt;VARCHAR&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;40&lt;/span&gt;) &lt;span class=&quot;kw&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;NULL&lt;/span&gt;,
  state   &lt;span class=&quot;dt&quot;&gt;BOOLEAN&lt;/span&gt;,
  price   &lt;span class=&quot;dt&quot;&gt;DOUBLE&lt;/span&gt;,
  &lt;span class=&quot;kw&quot;&gt;CONSTRAINT&lt;/span&gt; user_id_FK &lt;span class=&quot;kw&quot;&gt;FOREIGN&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;KEY&lt;/span&gt; (user_id) &lt;span class=&quot;kw&quot;&gt;REFERENCES&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;user&lt;/span&gt; (&lt;span class=&quot;kw&quot;&gt;id&lt;/span&gt;)
);&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;è®¢å•é¡¹è¡¨ï¼š&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;sourceCode&quot; readability=&quot;15&quot;&gt;
&lt;pre class=&quot;sourceCode sql&quot;&gt;
&lt;code class=&quot;sourceCode sql&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;TABLE&lt;/span&gt; orderItem (
  &lt;span class=&quot;kw&quot;&gt;id&lt;/span&gt;       &lt;span class=&quot;dt&quot;&gt;VARCHAR&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;40&lt;/span&gt;) &lt;span class=&quot;kw&quot;&gt;PRIMARY&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;KEY&lt;/span&gt;,
  price    &lt;span class=&quot;dt&quot;&gt;DOUBLE&lt;/span&gt;,
  quantity &lt;span class=&quot;dt&quot;&gt;INT&lt;/span&gt;,
  order_id &lt;span class=&quot;dt&quot;&gt;VARCHAR&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;40&lt;/span&gt;) ,
  book_id  &lt;span class=&quot;dt&quot;&gt;VARCHAR&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;40&lt;/span&gt;) ,
  &lt;span class=&quot;kw&quot;&gt;CONSTRAINT&lt;/span&gt; order_id_FK &lt;span class=&quot;kw&quot;&gt;FOREIGN&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;KEY&lt;/span&gt; (order_id) &lt;span class=&quot;kw&quot;&gt;REFERENCES&lt;/span&gt; orders (&lt;span class=&quot;kw&quot;&gt;id&lt;/span&gt;),
  &lt;span class=&quot;kw&quot;&gt;CONSTRAINT&lt;/span&gt; book_id_FK &lt;span class=&quot;kw&quot;&gt;FOREIGN&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;KEY&lt;/span&gt; (book_id) &lt;span class=&quot;kw&quot;&gt;REFERENCES&lt;/span&gt; book (&lt;span class=&quot;kw&quot;&gt;id&lt;/span&gt;)
);&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;è¡¨ä¹‹é—´çš„ç»“æ„ï¼š&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;http://img.blog.csdn.net/20170417125604528?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaG9uXzN5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast&quot; alt=&quot;è¿™é‡Œå†™å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;hr/&gt;&lt;h2 id=&quot;è®¾è®¡dao&quot;&gt;è®¾è®¡Dao&lt;/h2&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;49&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; OrderDaoImpl &lt;span class=&quot;kw&quot;&gt;implements&lt;/span&gt; zhongfucheng.&lt;span class=&quot;fu&quot;&gt;dao&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;OrderDao&lt;/span&gt; {

    &lt;span class=&quot;fu&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;addOrder&lt;/span&gt;(Order order) {
        QueryRunner queryRunner = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;QueryRunner&lt;/span&gt;(Utils2DB.&lt;span class=&quot;fu&quot;&gt;getDataSource&lt;/span&gt;());
        String sql1 = &lt;span class=&quot;st&quot;&gt;&quot;INSERT INTO orders(id,ordertime,user_id,state,price) VALUES(?,?,?,?,?)&quot;&lt;/span&gt;;
        &lt;span class=&quot;kw&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;co&quot;&gt;//è®¢å•çš„åŸºæœ¬ä¿¡æ¯&lt;/span&gt;
            queryRunner.&lt;span class=&quot;fu&quot;&gt;update&lt;/span&gt;(sql1, &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; Object[]{order.&lt;span class=&quot;fu&quot;&gt;getId&lt;/span&gt;(), order.&lt;span class=&quot;fu&quot;&gt;getOrdertime&lt;/span&gt;(), order.&lt;span class=&quot;fu&quot;&gt;getUser_id&lt;/span&gt;(), order.&lt;span class=&quot;fu&quot;&gt;isState&lt;/span&gt;(), order.&lt;span class=&quot;fu&quot;&gt;getPrice&lt;/span&gt;()});

            &lt;span class=&quot;co&quot;&gt;//è®¢å•é¡¹çš„ä¿¡æ¯&lt;/span&gt;
            String sql2 = &lt;span class=&quot;st&quot;&gt;&quot;INSERT INTO orderItem(id,price,quantity,order_id,book_id) VALUES(?,?,?,?,?)&quot;&lt;/span&gt;;

            Set&amp;lt;OrderItem&amp;gt; items = order.&lt;span class=&quot;fu&quot;&gt;getItems&lt;/span&gt;();

            &lt;span class=&quot;kw&quot;&gt;for&lt;/span&gt; (OrderItem item : items) {
                queryRunner.&lt;span class=&quot;fu&quot;&gt;update&lt;/span&gt;(sql2, &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; Object[]{item.&lt;span class=&quot;fu&quot;&gt;getId&lt;/span&gt;(), item.&lt;span class=&quot;fu&quot;&gt;getPrice&lt;/span&gt;(), item.&lt;span class=&quot;fu&quot;&gt;getQuantity&lt;/span&gt;(), item.&lt;span class=&quot;fu&quot;&gt;getOrder_id&lt;/span&gt;(), item.&lt;span class=&quot;fu&quot;&gt;getBook_id&lt;/span&gt;()});
            }
        } &lt;span class=&quot;kw&quot;&gt;catch&lt;/span&gt; (SQLException e) {
            &lt;span class=&quot;kw&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; RuntimeException(e);
        }
    }

    &lt;span class=&quot;fu&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; Order &lt;span class=&quot;fu&quot;&gt;findOrder&lt;/span&gt;(String id) {
        QueryRunner queryRunner = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;QueryRunner&lt;/span&gt;(Utils2DB.&lt;span class=&quot;fu&quot;&gt;getDataSource&lt;/span&gt;());

        Order order;
        &lt;span class=&quot;kw&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;co&quot;&gt;//æ‰¾å‡ºè®¢å•çš„åŸºæœ¬ä¿¡æ¯&lt;/span&gt;
            String sql = &lt;span class=&quot;st&quot;&gt;&quot;SELECT * FROM orders WHERE id=?&quot;&lt;/span&gt;;
            order = (Order) queryRunner.&lt;span class=&quot;fu&quot;&gt;query&lt;/span&gt;(sql, &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;BeanHandler&lt;/span&gt;(Order.&lt;span class=&quot;fu&quot;&gt;class&lt;/span&gt;), &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; Object[]{id});

            &lt;span class=&quot;co&quot;&gt;//æ‰¾å‡ºè®¢å•çš„æ‰€æœ‰è®¢å•é¡¹&lt;/span&gt;
            String sql2 = &lt;span class=&quot;st&quot;&gt;&quot;SELECT * FROM orderItem WHERE order_id=?&quot;&lt;/span&gt;;
            List&amp;lt;OrderItem&amp;gt; list = (List&amp;lt;OrderItem&amp;gt;) queryRunner.&lt;span class=&quot;fu&quot;&gt;query&lt;/span&gt;(sql2, &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;BeanListHandler&lt;/span&gt;(OrderItem.&lt;span class=&quot;fu&quot;&gt;class&lt;/span&gt;), &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; Object[]{order.&lt;span class=&quot;fu&quot;&gt;getId&lt;/span&gt;()});

            System.&lt;span class=&quot;fu&quot;&gt;out&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;è¿™æ˜¯æ•°æ®åº“æ‹¿åˆ°çš„listé›†åˆï¼š&quot;&lt;/span&gt;+list.&lt;span class=&quot;fu&quot;&gt;size&lt;/span&gt;());


            &lt;span class=&quot;co&quot;&gt;//å°†æ‰€æœ‰è®¢å•é¡¹è£…åˆ°è®¢å•é‡Œè¾¹&lt;/span&gt;
            order.&lt;span class=&quot;fu&quot;&gt;getItems&lt;/span&gt;().&lt;span class=&quot;fu&quot;&gt;addAll&lt;/span&gt;(list);
            System.&lt;span class=&quot;fu&quot;&gt;out&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;è¿™æ˜¯æ•°æ®åº“æ‹¿åˆ°çš„&quot;&lt;/span&gt;+order.&lt;span class=&quot;fu&quot;&gt;getItems&lt;/span&gt;().&lt;span class=&quot;fu&quot;&gt;size&lt;/span&gt;());


            &lt;span class=&quot;co&quot;&gt;//æ‰¾å‡ºè¯¥è®¢å•æ˜¯å±äºå“ªä¸€ä¸ªç”¨æˆ·çš„&lt;/span&gt;
            String sql3 = &lt;span class=&quot;st&quot;&gt;&quot;SELECT * FROM orders o,user u WHERE o.user_id=u.id AND o.id=? &quot;&lt;/span&gt;;
            User user = (User) queryRunner.&lt;span class=&quot;fu&quot;&gt;query&lt;/span&gt;(sql3, &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;BeanHandler&lt;/span&gt;(User.&lt;span class=&quot;fu&quot;&gt;class&lt;/span&gt;), &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; Object[]{order.&lt;span class=&quot;fu&quot;&gt;getId&lt;/span&gt;()});

            order.&lt;span class=&quot;fu&quot;&gt;setUser_id&lt;/span&gt;(user.&lt;span class=&quot;fu&quot;&gt;getId&lt;/span&gt;());
            &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; order;


        } &lt;span class=&quot;kw&quot;&gt;catch&lt;/span&gt; (SQLException e) {
            &lt;span class=&quot;kw&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; RuntimeException(e);
        }
    }


    &lt;span class=&quot;co&quot;&gt;//æ›´æ–°è®¢å•çš„çŠ¶æ€&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;updateState&lt;/span&gt;(String id) {

        QueryRunner queryRunner = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;QueryRunner&lt;/span&gt;(Utils2DB.&lt;span class=&quot;fu&quot;&gt;getDataSource&lt;/span&gt;());

        String sql = &lt;span class=&quot;st&quot;&gt;&quot;UPDATE orders SET state=? WHERE id=?&quot;&lt;/span&gt;;

        &lt;span class=&quot;kw&quot;&gt;try&lt;/span&gt; {
            queryRunner.&lt;span class=&quot;fu&quot;&gt;update&lt;/span&gt;(sql, &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; Object[]{&lt;span class=&quot;kw&quot;&gt;true&lt;/span&gt;, id});
        } &lt;span class=&quot;kw&quot;&gt;catch&lt;/span&gt; (SQLException e) {
            &lt;span class=&quot;kw&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; RuntimeException(e);
        }
    }

    &lt;span class=&quot;co&quot;&gt;//æŸ¥çœ‹å·²ç»å‘è´§æˆ–æ²¡å‘è´§çš„è®¢å•ä¿¡æ¯&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; List&amp;lt;Order&amp;gt; &lt;span class=&quot;fu&quot;&gt;getAllOrder&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;boolean&lt;/span&gt; state) {
        QueryRunner queryRunner = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;QueryRunner&lt;/span&gt;(Utils2DB.&lt;span class=&quot;fu&quot;&gt;getDataSource&lt;/span&gt;());

        String sql = &lt;span class=&quot;st&quot;&gt;&quot;SELECT * FROM orders WHERE state=? &quot;&lt;/span&gt;;
        &lt;span class=&quot;kw&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; (List&amp;lt;Order&amp;gt;) queryRunner.&lt;span class=&quot;fu&quot;&gt;query&lt;/span&gt;(sql, &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;BeanListHandler&lt;/span&gt;(Order.&lt;span class=&quot;fu&quot;&gt;class&lt;/span&gt;), &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; Object[]{state});
        } &lt;span class=&quot;kw&quot;&gt;catch&lt;/span&gt; (SQLException e) {
            &lt;span class=&quot;kw&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; RuntimeException(e);
        }
    }

    &lt;span class=&quot;co&quot;&gt;//é€šè¿‡ç”¨æˆ·çš„idæŸ¥æ‰¾ç”¨æˆ·çš„è®¢å•ï¼Œå¯èƒ½ä¸æ­¢ä¸€ä¸ª&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; List&amp;lt;Order&amp;gt; &lt;span class=&quot;fu&quot;&gt;findUserOrder&lt;/span&gt;(String user_id) {
        QueryRunner queryRunner = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;QueryRunner&lt;/span&gt;(Utils2DB.&lt;span class=&quot;fu&quot;&gt;getDataSource&lt;/span&gt;());

        String sql = &lt;span class=&quot;st&quot;&gt;&quot;SELECT * FROM orders WHERE user_id=? &quot;&lt;/span&gt;;

        &lt;span class=&quot;kw&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; List&amp;lt;Order&amp;gt; queryRunner.&lt;span class=&quot;fu&quot;&gt;query&lt;/span&gt;(sql, &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;BeanHandler&lt;/span&gt;(Order.&lt;span class=&quot;fu&quot;&gt;class&lt;/span&gt;), &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; Object[]{user_id});

        } &lt;span class=&quot;kw&quot;&gt;catch&lt;/span&gt; (SQLException e) {
            &lt;span class=&quot;kw&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; RuntimeException(e);
        }

    }
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;äºŒæ¬¡æ›´æ–°&quot;&gt;äºŒæ¬¡æ›´æ–°&lt;/h2&gt;
&lt;p&gt;åœ¨ç¼–å†™daoçš„æ—¶å€™ï¼Œå°¤å…¶æ˜¯Addæ–¹æ³•ã€‚å®ƒæ˜¯å°†æ‰€æœ‰æ•°æ®éƒ½å°è£…åˆ°Orderå¯¹è±¡ä¸Šï¼Œç„¶åå–å‡ºæ•°æ®ï¼ŒæŠŠæ•°æ®æ’å…¥åˆ°æ•°æ®è¡¨ä¸­&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å…¶å®ï¼Œæˆ‘ä»¬çš„Orderå’ŒOrderItemçš„æ“ä½œå¯ä»¥åˆ†å¼€ã€‚OrderItemä¹Ÿå¯ä»¥å¦å¤–ç¼–å†™ä¸€ä¸ªDaoï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨æ’å…¥å®ŒOrderå¯¹è±¡ä¹‹åï¼Œ&lt;strong&gt;å¾—åˆ°Orderå¯¹è±¡è¿”å›çš„ä¸»é”®ï¼Œå†è°ƒç”¨OrderItemDaoçš„æ–¹æ³•æ¥æ’å…¥OrderItemçš„æ•°æ®&lt;/strong&gt;ï¼Œè¿™æ ·æˆ‘è§‰å¾—ä¼šè®©ä»£ç æ¸…æ™°ä¸€äº›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœ¨OrderItemDaoä¸­æ¥æ”¶çš„æ˜¯ä¸€ä¸ªList&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;æŠ½å–æˆdaoæ¥å£&quot;&gt;æŠ½å–æˆDAOæ¥å£&lt;/h2&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;9&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;interface&lt;/span&gt; OrderDao {
    &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;addOrder&lt;/span&gt;(Order order);

    Order &lt;span class=&quot;fu&quot;&gt;findOrder&lt;/span&gt;(String id);

    List&amp;lt;Order&amp;gt; &lt;span class=&quot;fu&quot;&gt;getAllOrder&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;boolean&lt;/span&gt; state);

    &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;updateState&lt;/span&gt;(String user_id);

    List&amp;lt;Order&amp;gt; &lt;span class=&quot;fu&quot;&gt;findUserOrder&lt;/span&gt;(String user_id);
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;bussinessservice&quot;&gt;BussinessService&lt;/h2&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;13&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; OrderDao orderDao = DaoFactory.&lt;span class=&quot;fu&quot;&gt;getInstance&lt;/span&gt;().&lt;span class=&quot;fu&quot;&gt;createDao&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;zhongfucheng.dao.impl.OrderDaoImpl&quot;&lt;/span&gt;, OrderDao.&lt;span class=&quot;fu&quot;&gt;class&lt;/span&gt;);
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;createOrder&lt;/span&gt;(Cart cart, User user) {

        &lt;span class=&quot;co&quot;&gt;//è®¢å•çš„åŸºæœ¬ä¿¡æ¯&lt;/span&gt;
        String order_id = WebUtils.&lt;span class=&quot;fu&quot;&gt;makeId&lt;/span&gt;();
        Order order = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;Order&lt;/span&gt;();
        order.&lt;span class=&quot;fu&quot;&gt;setId&lt;/span&gt;(order_id);
        order.&lt;span class=&quot;fu&quot;&gt;setPrice&lt;/span&gt;(cart.&lt;span class=&quot;fu&quot;&gt;getPrice&lt;/span&gt;());
        order.&lt;span class=&quot;fu&quot;&gt;setOrdertime&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; Date());
        order.&lt;span class=&quot;fu&quot;&gt;setState&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;false&lt;/span&gt;);
        order.&lt;span class=&quot;fu&quot;&gt;setUser_id&lt;/span&gt;(user.&lt;span class=&quot;fu&quot;&gt;getId&lt;/span&gt;());


        &lt;span class=&quot;co&quot;&gt;//è®¢å•é¡¹çš„åŸºæœ¬ä¿¡æ¯&lt;/span&gt;
        &lt;span class=&quot;co&quot;&gt;//å¾—åˆ°æ¯ä¸ªè´­ç‰©é¡¹ï¼Œè´­ç‰©é¡¹å°±ä½œä¸ºè®¢å•é¡¹&lt;/span&gt;
        &lt;span class=&quot;kw&quot;&gt;for&lt;/span&gt; (Map.&lt;span class=&quot;fu&quot;&gt;Entry&lt;/span&gt;&amp;lt;String, CartItem&amp;gt; me : cart.&lt;span class=&quot;fu&quot;&gt;getMap&lt;/span&gt;().&lt;span class=&quot;fu&quot;&gt;entrySet&lt;/span&gt;()) {

            OrderItem orderItem = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;OrderItem&lt;/span&gt;();
            CartItem cartItem = me.&lt;span class=&quot;fu&quot;&gt;getValue&lt;/span&gt;();

            orderItem.&lt;span class=&quot;fu&quot;&gt;setId&lt;/span&gt;(WebUtils.&lt;span class=&quot;fu&quot;&gt;makeId&lt;/span&gt;());
            orderItem.&lt;span class=&quot;fu&quot;&gt;setPrice&lt;/span&gt;(cartItem.&lt;span class=&quot;fu&quot;&gt;getPrice&lt;/span&gt;());
            orderItem.&lt;span class=&quot;fu&quot;&gt;setBook_id&lt;/span&gt;(cartItem.&lt;span class=&quot;fu&quot;&gt;getBook&lt;/span&gt;().&lt;span class=&quot;fu&quot;&gt;getId&lt;/span&gt;());
            orderItem.&lt;span class=&quot;fu&quot;&gt;setQuantity&lt;/span&gt;(cartItem.&lt;span class=&quot;fu&quot;&gt;getQuantity&lt;/span&gt;());
            orderItem.&lt;span class=&quot;fu&quot;&gt;setOrder_id&lt;/span&gt;(order_id);
            order.&lt;span class=&quot;fu&quot;&gt;getItems&lt;/span&gt;().&lt;span class=&quot;fu&quot;&gt;add&lt;/span&gt;(orderItem);
        }

        orderDao.&lt;span class=&quot;fu&quot;&gt;addOrder&lt;/span&gt;(order);

    }

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; Order &lt;span class=&quot;fu&quot;&gt;findOrder&lt;/span&gt;(String user_id) {

        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; orderDao.&lt;span class=&quot;fu&quot;&gt;findOrder&lt;/span&gt;(user_id);
    }

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; List&amp;lt;Order&amp;gt; &lt;span class=&quot;fu&quot;&gt;getAllOrder&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;boolean&lt;/span&gt; state) {
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; orderDao.&lt;span class=&quot;fu&quot;&gt;getAllOrder&lt;/span&gt;(state);
    }

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;sendOutOrder&lt;/span&gt;(String id) {

        orderDao.&lt;span class=&quot;fu&quot;&gt;updateState&lt;/span&gt;(id);
    }

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; List&amp;lt;Order&amp;gt; &lt;span class=&quot;fu&quot;&gt;findUserOrder&lt;/span&gt;(String user_id) {
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; orderDao.&lt;span class=&quot;fu&quot;&gt;findUserOrder&lt;/span&gt;(user_id);
    }&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;ç”Ÿæˆè®¢å•çš„servlet&quot;&gt;ç”Ÿæˆè®¢å•çš„Servlet&lt;/h2&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;15&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;

        BussinessServiceImpl service = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;BussinessServiceImpl&lt;/span&gt;();

        &lt;span class=&quot;co&quot;&gt;//æ£€æŸ¥è¯¥ç”¨æˆ·çš„è´­ç‰©è½¦æ˜¯å¦æœ‰å•†å“&lt;/span&gt;
        Cart cart = (Cart) request.&lt;span class=&quot;fu&quot;&gt;getSession&lt;/span&gt;().&lt;span class=&quot;fu&quot;&gt;getAttribute&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;cart&quot;&lt;/span&gt;);
        &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (cart == &lt;span class=&quot;kw&quot;&gt;null&lt;/span&gt;) {
            request.&lt;span class=&quot;fu&quot;&gt;setAttribute&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;message&quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&quot;æ‚¨è´­ç‰©è½¦æ²¡æœ‰å•†å“ï¼Œæ— æ³•ç”Ÿæˆè®¢å•&quot;&lt;/span&gt;);
            request.&lt;span class=&quot;fu&quot;&gt;getRequestDispatcher&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;/message.jsp&quot;&lt;/span&gt;).&lt;span class=&quot;fu&quot;&gt;forward&lt;/span&gt;(request, response);
            &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt;;
        }

        &lt;span class=&quot;co&quot;&gt;//å¦‚æœæœ‰å•†å“ï¼Œå¾—åˆ°å½“å‰ç”¨æˆ·&lt;/span&gt;
        User user = (User) request.&lt;span class=&quot;fu&quot;&gt;getSession&lt;/span&gt;().&lt;span class=&quot;fu&quot;&gt;getAttribute&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;user&quot;&lt;/span&gt;);
        service.&lt;span class=&quot;fu&quot;&gt;createOrder&lt;/span&gt;(cart, user);
        request.&lt;span class=&quot;fu&quot;&gt;setAttribute&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;message&quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&quot;è®¢å•å·²ç»ç”Ÿæˆäº†ï¼Œå‡†å¤‡å¥½é’±æ¥æ”¶è´§æŠŠ&quot;&lt;/span&gt;);
        request.&lt;span class=&quot;fu&quot;&gt;getRequestDispatcher&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;/message.jsp&quot;&lt;/span&gt;).&lt;span class=&quot;fu&quot;&gt;forward&lt;/span&gt;(request, response);
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt;;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;ç”¨æˆ·æŸ¥è¯¢è‡ªå·±çš„è®¢å•servlet&quot;&gt;ç”¨æˆ·æŸ¥è¯¢è‡ªå·±çš„è®¢å•Servlet&lt;/h2&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;sourceCode html&quot;&gt;
&lt;code class=&quot;sourceCode html&quot;&gt;
    &lt;span class=&quot;kw&quot;&gt;&amp;lt;a&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; href=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;${pageContext.request.contextPath}/LookOrder&quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; target=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;body&quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;æŸ¥çœ‹è®¢å•&lt;span class=&quot;kw&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;15&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;
        BussinessServiceImpl service = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;BussinessServiceImpl&lt;/span&gt;();

        &lt;span class=&quot;co&quot;&gt;//æ£€æŸ¥è¯¥ç”¨æˆ·æ˜¯å¦ç™»é™†äº†&lt;/span&gt;
        User user = (User) request.&lt;span class=&quot;fu&quot;&gt;getSession&lt;/span&gt;().&lt;span class=&quot;fu&quot;&gt;getAttribute&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;user&quot;&lt;/span&gt;);
        &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (user == &lt;span class=&quot;kw&quot;&gt;null&lt;/span&gt;) {
            request.&lt;span class=&quot;fu&quot;&gt;setAttribute&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;message&quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&quot;æ‚¨è¿˜æ²¡ç™»é™†ï¼Œç­‰æ‚¨ç™»é™†äº†å†æ¥çœ‹æŠŠ&quot;&lt;/span&gt;);
            request.&lt;span class=&quot;fu&quot;&gt;getRequestDispatcher&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;/message.jsp&quot;&lt;/span&gt;).&lt;span class=&quot;fu&quot;&gt;forward&lt;/span&gt;(request, response);
            &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt;;
        }

        &lt;span class=&quot;co&quot;&gt;//ç”¨æˆ·ç™»é™†äº†ï¼&lt;/span&gt;
        Order order = service.&lt;span class=&quot;fu&quot;&gt;findUserOrder&lt;/span&gt;(user.&lt;span class=&quot;fu&quot;&gt;getId&lt;/span&gt;());

        &lt;span class=&quot;co&quot;&gt;//äº¤ç»™ç›¸å¯¹åº”çš„JSP æ˜¾ç¤º&lt;/span&gt;
        request.&lt;span class=&quot;fu&quot;&gt;setAttribute&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;order&quot;&lt;/span&gt;, order);
        request.&lt;span class=&quot;fu&quot;&gt;setAttribute&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;user&quot;&lt;/span&gt;,user);
        request.&lt;span class=&quot;fu&quot;&gt;getRequestDispatcher&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;/client/listOrder.jsp&quot;&lt;/span&gt;).&lt;span class=&quot;fu&quot;&gt;forward&lt;/span&gt;(request, response);
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; ;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;æ˜¾ç¤ºè®¢å•æ•°æ®çš„jsp&quot;&gt;æ˜¾ç¤ºè®¢å•æ•°æ®çš„JSP&lt;/h2&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;10&quot;&gt;
&lt;pre class=&quot;sourceCode jsp&quot;&gt;
&lt;code class=&quot;sourceCode jsp&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;c:if&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; test&lt;/span&gt;=&lt;span class=&quot;dt&quot;&gt;&quot;&lt;/span&gt;${order==&lt;span class=&quot;kw&quot;&gt;null&lt;/span&gt;}&lt;span class=&quot;dt&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
    æ‚¨è¿˜æ²¡æœ‰ä¸‹è¿‡ä»»ä½•è®¢å•ï¼ï¼

&lt;span class=&quot;kw&quot;&gt;&amp;lt;/c:if&amp;gt;&lt;/span&gt;

&lt;span class=&quot;kw&quot;&gt;&amp;lt;c:if&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; test&lt;/span&gt;=&lt;span class=&quot;dt&quot;&gt;&quot;&lt;/span&gt;${order!=&lt;span class=&quot;kw&quot;&gt;null&lt;/span&gt;}&lt;span class=&quot;dt&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;

    &amp;lt;table&lt;span class=&quot;ot&quot;&gt; border&lt;/span&gt;=&lt;span class=&quot;dt&quot;&gt;&quot;1px&quot;&lt;/span&gt;&amp;gt;

        &amp;lt;tr&amp;gt;
            &amp;lt;td&amp;gt;ä¸‹å•äººï¼š&amp;lt;/td&amp;gt;
            &amp;lt;td&amp;gt;è®¢å•æ—¶é—´&amp;lt;/td&amp;gt;
            &amp;lt;td&amp;gt;è®¢å•çŠ¶æ€&amp;lt;/td&amp;gt;
            &amp;lt;td&amp;gt;è®¢å•ä»·é’±&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;
        &amp;lt;tr&amp;gt;
            &amp;lt;td&amp;gt;${user.username}&amp;lt;/td&amp;gt;
            &amp;lt;td&amp;gt;${order.ordertime}&amp;lt;/td&amp;gt;
            &amp;lt;td&amp;gt;${order.state==&lt;span class=&quot;kw&quot;&gt;false&lt;/span&gt;?&lt;span class=&quot;st&quot;&gt;&quot;æœªå‘è´§&quot;&lt;/span&gt;:&lt;span class=&quot;st&quot;&gt;&quot;å·²å‘è´§&quot;&lt;/span&gt;}&amp;lt;/td&amp;gt;
            &amp;lt;td&amp;gt;${order.price}&amp;lt;/td&amp;gt;
        &amp;lt;/tr&amp;gt;

    &amp;lt;/table&amp;gt;

&lt;span class=&quot;kw&quot;&gt;&amp;lt;/c:if&amp;gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;æ•ˆæœ-1&quot;&gt;&lt;strong&gt;æ•ˆæœï¼š&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;http://img.blog.csdn.net/20170417184449188?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaG9uXzN5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast&quot; alt=&quot;è¿™é‡Œå†™å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;hr/&gt;&lt;h2 id=&quot;åå°æŸ¥è¯¢è®¢å•çš„çŠ¶å†µservlet&quot;&gt;åå°æŸ¥è¯¢è®¢å•çš„çŠ¶å†µServlet&lt;/h2&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;9&quot;&gt;
&lt;pre class=&quot;sourceCode html&quot;&gt;
&lt;code class=&quot;sourceCode html&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;a&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; href=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;${pageContext.request.contextPath}/OrderServlet?state=false&quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; target=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;body&quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;å¾…å¤„ç†è®¢å•&lt;span class=&quot;kw&quot;&gt;&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;a&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; href=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;${pageContext.request.contextPath}/OrderServlet?state=true&quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; target=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;body&quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;å·²å‘è´§è®¢å•&lt;span class=&quot;kw&quot;&gt;&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;13&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;
        BussinessServiceImpl service = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;BussinessServiceImpl&lt;/span&gt;();
        String state = request.&lt;span class=&quot;fu&quot;&gt;getParameter&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;state&quot;&lt;/span&gt;);

        &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (state.&lt;span class=&quot;fu&quot;&gt;equals&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;true&quot;&lt;/span&gt;)) {
            List&amp;lt;Order&amp;gt; list = service.&lt;span class=&quot;fu&quot;&gt;getAllOrder&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;true&lt;/span&gt;);
            request.&lt;span class=&quot;fu&quot;&gt;setAttribute&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;list&quot;&lt;/span&gt;,list);

        } &lt;span class=&quot;kw&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (state.&lt;span class=&quot;fu&quot;&gt;equals&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;false&quot;&lt;/span&gt;)) {
            List&amp;lt;Order&amp;gt; list = service.&lt;span class=&quot;fu&quot;&gt;getAllOrder&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;false&lt;/span&gt;);
            request.&lt;span class=&quot;fu&quot;&gt;setAttribute&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;list&quot;&lt;/span&gt;, list);
        }


        request.&lt;span class=&quot;fu&quot;&gt;getRequestDispatcher&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;/background/listOrder.jsp&quot;&lt;/span&gt;).&lt;span class=&quot;fu&quot;&gt;forward&lt;/span&gt;(request, response);&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;æ˜¾ç¤ºè®¢å•çŠ¶å†µçš„jsp&quot;&gt;æ˜¾ç¤ºè®¢å•çŠ¶å†µçš„JSP&lt;/h2&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;10&quot;&gt;
&lt;pre class=&quot;sourceCode html&quot;&gt;
&lt;code class=&quot;sourceCode html&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;c:if&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; test=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;${empty(list)}&quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;

    è¿˜æ²¡æœ‰ä»»ä½•è®¢å•å“¦ï¼

&lt;span class=&quot;kw&quot;&gt;&amp;lt;/c:if&amp;gt;&lt;/span&gt;

&lt;span class=&quot;kw&quot;&gt;&amp;lt;c:if&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; test=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;${!empty(list)}&quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;kw&quot;&gt;&amp;lt;table&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; border=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;1px&quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;

        &lt;span class=&quot;kw&quot;&gt;&amp;lt;tr&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;kw&quot;&gt;&amp;lt;td&amp;gt;&lt;/span&gt;ä¸‹å•äººï¼š&lt;span class=&quot;kw&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;kw&quot;&gt;&amp;lt;td&amp;gt;&lt;/span&gt;è®¢å•æ—¶é—´&lt;span class=&quot;kw&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;kw&quot;&gt;&amp;lt;td&amp;gt;&lt;/span&gt;è®¢å•çŠ¶æ€&lt;span class=&quot;kw&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;kw&quot;&gt;&amp;lt;td&amp;gt;&lt;/span&gt;è®¢å•ä»·é’±&lt;span class=&quot;kw&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;kw&quot;&gt;&amp;lt;td&amp;gt;&lt;/span&gt;æ“ä½œ&lt;span class=&quot;kw&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;kw&quot;&gt;&amp;lt;/tr&amp;gt;&lt;/span&gt;

        &lt;span class=&quot;kw&quot;&gt;&amp;lt;c:forEach&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; items=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;${list}&quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; var=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;order&quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;kw&quot;&gt;&amp;lt;tr&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;kw&quot;&gt;&amp;lt;td&amp;gt;&lt;/span&gt;${order.user_id}&lt;span class=&quot;kw&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;kw&quot;&gt;&amp;lt;td&amp;gt;&lt;/span&gt;${order.ordertime}&lt;span class=&quot;kw&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;kw&quot;&gt;&amp;lt;td&amp;gt;&lt;/span&gt;${order.state==false?&quot;æœªå‘è´§&quot;:&quot;å·²å‘è´§&quot;}&lt;span class=&quot;kw&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;kw&quot;&gt;&amp;lt;td&amp;gt;&lt;/span&gt;${order.price}&lt;span class=&quot;kw&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;kw&quot;&gt;&amp;lt;td&amp;gt;&lt;/span&gt;
                    &lt;span class=&quot;kw&quot;&gt;&amp;lt;a&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; href=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;${pageContext.request.contextPath}/orderItemServlet?order_id=${order.id}&quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯&lt;span class=&quot;kw&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
                    &lt;span class=&quot;kw&quot;&gt;&amp;lt;a&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; href=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;#&quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;åˆ é™¤&lt;span class=&quot;kw&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;

                &lt;span class=&quot;kw&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;kw&quot;&gt;&amp;lt;/tr&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;kw&quot;&gt;&amp;lt;/c:forEach&amp;gt;&lt;/span&gt;


    &lt;span class=&quot;kw&quot;&gt;&amp;lt;/table&amp;gt;&lt;/span&gt;


&lt;span class=&quot;kw&quot;&gt;&amp;lt;/c:if&amp;gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;æŸ¥çœ‹å…·ä½“è®¢å•çš„è¯¦ç»†ä¿¡æ¯servlet&quot;&gt;æŸ¥çœ‹å…·ä½“è®¢å•çš„è¯¦ç»†ä¿¡æ¯Servlet&lt;/h2&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;12&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;
        BussinessServiceImpl service = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;BussinessServiceImpl&lt;/span&gt;();

        &lt;span class=&quot;co&quot;&gt;//å¾—åˆ°ç”¨æˆ·æƒ³è¦æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯çš„è¡¨å•&lt;/span&gt;
        String order_id = request.&lt;span class=&quot;fu&quot;&gt;getParameter&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;order_id&quot;&lt;/span&gt;);

        Order order = service.&lt;span class=&quot;fu&quot;&gt;findOrder&lt;/span&gt;(order_id);

        &lt;span class=&quot;co&quot;&gt;//å°†è¯¥orderå¯¹è±¡ç»™ç›¸å¯¹åº”çš„JSPæ˜¾ç¤º&lt;/span&gt;
        request.&lt;span class=&quot;fu&quot;&gt;setAttribute&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;order&quot;&lt;/span&gt;, order);
        request.&lt;span class=&quot;fu&quot;&gt;getRequestDispatcher&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;/background/listDetail.jsp&quot;&lt;/span&gt;).&lt;span class=&quot;fu&quot;&gt;forward&lt;/span&gt;(request, response);&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;æŸ¥çœ‹å…·ä½“è®¢å•çš„è¯¦ç»†ä¿¡æ¯jsp&quot;&gt;æŸ¥çœ‹å…·ä½“è®¢å•çš„è¯¦ç»†ä¿¡æ¯JSP&lt;/h2&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;10&quot;&gt;
&lt;pre class=&quot;sourceCode html&quot;&gt;
&lt;code class=&quot;sourceCode html&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;table&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; border=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;1px&quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;

   &lt;span class=&quot;kw&quot;&gt;&amp;lt;tr&amp;gt;&lt;/span&gt;
       &lt;span class=&quot;kw&quot;&gt;&amp;lt;td&amp;gt;&lt;/span&gt;ä¹¦ç±çš„ç¼–å·&lt;span class=&quot;kw&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
       &lt;span class=&quot;kw&quot;&gt;&amp;lt;td&amp;gt;&lt;/span&gt;ä»·é’±&lt;span class=&quot;kw&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
       &lt;span class=&quot;kw&quot;&gt;&amp;lt;td&amp;gt;&lt;/span&gt;æ•°é‡&lt;span class=&quot;kw&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
       &lt;span class=&quot;kw&quot;&gt;&amp;lt;td&amp;gt;&lt;/span&gt;æ“ä½œ&lt;span class=&quot;kw&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;kw&quot;&gt;&amp;lt;/tr&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;&amp;lt;c:forEach&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; items=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;${order.items}&quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; var=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;item&quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;kw&quot;&gt;&amp;lt;tr&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;kw&quot;&gt;&amp;lt;td&amp;gt;&lt;/span&gt;${item.book_id}&lt;span class=&quot;kw&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;kw&quot;&gt;&amp;lt;td&amp;gt;&lt;/span&gt;${item.price}&lt;span class=&quot;kw&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;kw&quot;&gt;&amp;lt;td&amp;gt;&lt;/span&gt;${item.quantity}&lt;span class=&quot;kw&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;kw&quot;&gt;&amp;lt;td&amp;gt;&amp;lt;a&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt; href=&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;${pageContext.request.contextPath}/SendOutServlet?id=${order.id}&quot;&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt;å‘è´§&lt;span class=&quot;kw&quot;&gt;&amp;lt;/a&amp;gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;kw&quot;&gt;&amp;lt;/tr&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;&amp;lt;/c:forEach&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;&amp;lt;/table&amp;gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;å¤„ç†å‘è´§çš„servlet&quot;&gt;å¤„ç†å‘è´§çš„Servlet&lt;/h2&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;11&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;

        BussinessServiceImpl service = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;BussinessServiceImpl&lt;/span&gt;();
        String id = request.&lt;span class=&quot;fu&quot;&gt;getParameter&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;id&quot;&lt;/span&gt;);

        service.&lt;span class=&quot;fu&quot;&gt;sendOutOrder&lt;/span&gt;(id);
        request.&lt;span class=&quot;fu&quot;&gt;setAttribute&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;message&quot;&lt;/span&gt;, &lt;span class=&quot;st&quot;&gt;&quot;å·²å‘è´§ï¼&quot;&lt;/span&gt;);
        request.&lt;span class=&quot;fu&quot;&gt;getRequestDispatcher&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;/message.jsp&quot;&lt;/span&gt;).&lt;span class=&quot;fu&quot;&gt;forward&lt;/span&gt;(request, response);
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt;;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;æ•ˆæœ-2&quot;&gt;&lt;strong&gt;æ•ˆæœ:&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;http://img.blog.csdn.net/20170417185813025?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaG9uXzN5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast&quot; alt=&quot;è¿™é‡Œå†™å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å­¦ä¹ äº†åŠ¨æ€ä»£ç†æŠ€æœ¯å’Œæ³¨è§£æŠ€æœ¯äº†ã€‚äºæ˜¯æˆ‘ä»¬æƒ³è¦ä¸ºä¹‹å‰çš„bookStoreé¡¹ç›®æ·»åŠ æƒé™æ§åˆ¶.....&lt;/p&gt;
&lt;p&gt;åªæœ‰ç”¨æˆ·æœ‰æƒé™çš„æ—¶å€™ï¼Œåå°ç®¡ç†æ‰å¯ä»¥è¿›è¡Œç›¸å¯¹åº”çš„æ“ä½œ.....&lt;/p&gt;
&lt;hr/&gt;&lt;h2 id=&quot;å®ç°æ€è·¯&quot;&gt;å®ç°æ€è·¯&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;http://img.blog.csdn.net/20170425102852577?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaG9uXzN5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast&quot; alt=&quot;è¿™é‡Œå†™å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¹‹å‰æˆ‘ä»¬åšæƒé™ç®¡ç†ç³»ç»Ÿçš„æ—¶å€™ï¼Œæ˜¯æ ¹æ®ç”¨æˆ·è¯·æ±‚çš„URIæ¥åˆ¤æ–­è¯¥é“¾æ¥æ˜¯å¦éœ€è¦æƒé™çš„ã€‚è¿™æ¬¡æˆ‘ä»¬ä½¿ç”¨åŠ¨æ€ä»£ç†çš„æŠ€æœ¯å’Œæ³¨è§£æ¥åˆ¤æ–­ï¼š&lt;strong&gt;ç”¨æˆ·è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œæ£€æŸ¥è¯¥æ–¹æ³•æ˜¯å¦éœ€è¦æƒé™...&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ ¹æ®MVCæ¨¡å¼ï¼Œæˆ‘ä»¬åœ¨webå±‚éƒ½æ˜¯è°ƒç”¨serviceå±‚æ¥å®ç°åŠŸèƒ½çš„ã€‚é‚£ä¹ˆæˆ‘ä»¬å…·ä½“çš„æ€è·¯æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;webå±‚è°ƒç”¨serviceå±‚çš„æ—¶å€™ï¼Œ&lt;strong&gt;å¾—åˆ°çš„å¹¶ä¸æ˜¯ServiceDaoå¯¹è±¡ï¼Œè€Œæ˜¯æˆ‘ä»¬çš„ä»£ç†å¯¹è±¡&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;åœ¨serviceå±‚ä¸­çš„æ–¹æ³•æ·»åŠ æ³¨è§£ï¼Œå¦‚æœæ–¹æ³•ä¸Šæœ‰æ³¨è§£ï¼Œé‚£ä¹ˆè¯´æ˜è°ƒç”¨è¯¥æ–¹æ³•éœ€è¦æƒé™...&lt;/li&gt;
&lt;li&gt;å½“webå±‚è°ƒç”¨ä»£ç†å¯¹è±¡æ–¹æ³•çš„æ—¶å€™ï¼Œä»£ç†å¯¹è±¡ä¼šåˆ¤æ–­è¯¥æ–¹æ³•æ˜¯å¦éœ€è¦æƒé™ï¼Œå†ç»™å‡ºç›¸å¯¹åº”çš„æç¤º....&lt;/li&gt;
&lt;/ul&gt;&lt;hr/&gt;&lt;h2 id=&quot;è®¾è®¡å®ä½“æ•°æ®åº“è¡¨&quot;&gt;è®¾è®¡å®ä½“ã€æ•°æ®åº“è¡¨&lt;/h2&gt;
&lt;p&gt;ä¸Šæ¬¡æˆ‘ä»¬åšçš„æƒé™ç®¡ç†ç³»ç»Ÿæ˜¯å¼•å…¥äº†è§’è‰²è¿™ä¸ªæ¦‚å¿µçš„ï¼Œè¿™æ¬¡ä¸»è¦ä¸ºäº†ç»ƒä¹ åŠ¨æ€ä»£ç†å’Œæ³¨è§£æŠ€æœ¯ï¼Œå°±ä»¥ç®€å•ä¸ºä¸»ï¼Œä¸å¼•å…¥è§’è‰²è¿™ä¸ªå®ä½“ã€‚ç›´æ¥æ˜¯&lt;strong&gt;ç”¨æˆ·å’Œæƒé™ä¹‹é—´çš„å…³ç³»&lt;/strong&gt;äº†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;privilegeå®ä½“&quot;&gt;Privilegeå®ä½“&lt;/h2&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;9&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; Privilege {

    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; String id ;
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; String name;

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; String &lt;span class=&quot;fu&quot;&gt;getId&lt;/span&gt;() {
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; id;
    }

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;setId&lt;/span&gt;(String id) {
        &lt;span class=&quot;kw&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;id&lt;/span&gt; = id;
    }

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; String &lt;span class=&quot;fu&quot;&gt;getName&lt;/span&gt;() {
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; name;
    }

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;setName&lt;/span&gt;(String name) {
        &lt;span class=&quot;kw&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;name&lt;/span&gt; = name;
    }
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;æ•°æ®åº“è¡¨&quot;&gt;æ•°æ®åº“è¡¨&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;privilegeè¡¨&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;sourceCode&quot; readability=&quot;8&quot;&gt;
&lt;pre class=&quot;sourceCode sql&quot;&gt;
&lt;code class=&quot;sourceCode sql&quot;&gt;

&lt;span class=&quot;kw&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;TABLE&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;privilege&lt;/span&gt; (

  &lt;span class=&quot;kw&quot;&gt;id&lt;/span&gt;   &lt;span class=&quot;dt&quot;&gt;VARCHAR&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;40&lt;/span&gt;) &lt;span class=&quot;kw&quot;&gt;PRIMARY&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;KEY&lt;/span&gt;,
  name &lt;span class=&quot;dt&quot;&gt;VARCHAR&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;40&lt;/span&gt;)

);&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;privilegeå’Œuseræ˜¯å¤šå¯¹å¤šçš„å…³ç³»ï¼Œäºæ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹è¡¨æ¥ç»´æŠ¤ä»–ä»¬çš„å…³ç³»&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;user_privilegeè¡¨&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;sourceCode&quot; readability=&quot;14&quot;&gt;
&lt;pre class=&quot;sourceCode sql&quot;&gt;
&lt;code class=&quot;sourceCode sql&quot;&gt;

&lt;span class=&quot;kw&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;TABLE&lt;/span&gt; user_privilege (
  privilege_id &lt;span class=&quot;dt&quot;&gt;VARCHAR&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;40&lt;/span&gt;),
  user_id      &lt;span class=&quot;dt&quot;&gt;VARCHAR&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;40&lt;/span&gt;),

  &lt;span class=&quot;kw&quot;&gt;PRIMARY&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;KEY&lt;/span&gt; (privilege_id, user_id),
  &lt;span class=&quot;kw&quot;&gt;CONSTRAINT&lt;/span&gt; privilege_id_FK &lt;span class=&quot;kw&quot;&gt;FOREIGN&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;KEY&lt;/span&gt; (privilege_id) &lt;span class=&quot;kw&quot;&gt;REFERENCES&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;privilege&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;id&lt;/span&gt;),
  &lt;span class=&quot;kw&quot;&gt;CONSTRAINT&lt;/span&gt; user_id_FK1 &lt;span class=&quot;kw&quot;&gt;FOREIGN&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;KEY&lt;/span&gt; (user_id) &lt;span class=&quot;kw&quot;&gt;REFERENCES&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;user&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;id&lt;/span&gt;)

);
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;hr/&gt;&lt;h2 id=&quot;æ·»åŠ æµ‹è¯•æ•°æ®&quot;&gt;æ·»åŠ æµ‹è¯•æ•°æ®&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†æ–¹ä¾¿ï¼Œç›´æ¥æ·»åŠ æ•°æ®äº†ã€‚å°±ä¸å†™è¯¦ç»†çš„DAOäº†ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;åœ¨æ•°æ®åº“ä¸­æ·»åŠ äº†ä¸¤ä¸ªæƒé™&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;http://img.blog.csdn.net/20170425105424043?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaG9uXzN5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast&quot; alt=&quot;è¿™é‡Œå†™å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä¸ºidä¸º1çš„useræ·»åŠ äº†ä¸¤ä¸ªæƒé™&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;http://img.blog.csdn.net/20170425105516226?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaG9uXzN5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast&quot; alt=&quot;è¿™é‡Œå†™å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;hr/&gt;&lt;h2 id=&quot;ç¼–å†™dao-1&quot;&gt;ç¼–å†™DAO&lt;/h2&gt;
&lt;p&gt;åé¢åœ¨åŠ¨æ€ä»£ç†ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ£€æŸ¥è¯¥ç”¨æˆ·æ˜¯å¦æœ‰æƒé™...é‚£ä¹ˆå°±å¿…é¡»æŸ¥æ‰¾å‡º&lt;strong&gt;è¯¥ç”¨æˆ·æ‹¥æœ‰çš„å“ªäº›æƒé™&lt;/strong&gt;ã€‚å†çœ‹çœ‹ç”¨æˆ·æœ‰æ²¡æœ‰ç›¸å¯¹åº”çš„æƒé™&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;13&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;    &lt;span class=&quot;co&quot;&gt;//æŸ¥æ‰¾ç”¨æˆ·çš„æ‰€æœ‰æƒé™&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; List&amp;lt;Privilege&amp;gt; &lt;span class=&quot;fu&quot;&gt;findUserPrivilege&lt;/span&gt;(String user_id) {
        QueryRunner queryRunner = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;QueryRunner&lt;/span&gt;(Utils2DB.&lt;span class=&quot;fu&quot;&gt;getDataSource&lt;/span&gt;());

        String sql = &lt;span class=&quot;st&quot;&gt;&quot;SELECT p.* FROM privilege p, user_privilege up WHERE p.id = up.privilege_id AND up.user_id = ?&quot;&lt;/span&gt;;
        &lt;span class=&quot;kw&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; (List&amp;lt;Privilege&amp;gt;) queryRunner.&lt;span class=&quot;fu&quot;&gt;query&lt;/span&gt;(sql, &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; Object[]{user_id}, &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;BeanListHandler&lt;/span&gt;(Privilege.&lt;span class=&quot;fu&quot;&gt;class&lt;/span&gt;));
        } &lt;span class=&quot;kw&quot;&gt;catch&lt;/span&gt; (SQLException e) {
            &lt;span class=&quot;kw&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; RuntimeException(e);
        }
    }&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;æŠ½å–åˆ°æ¥å£ä¸Š&quot;&gt;&lt;strong&gt;æŠ½å–åˆ°æ¥å£ä¸Š&lt;/strong&gt;&lt;/h3&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;
    List&amp;lt;Privilege&amp;gt; &lt;span class=&quot;fu&quot;&gt;findUserPrivilege&lt;/span&gt;(String user_id);&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;hr/&gt;&lt;h2 id=&quot;æ³¨è§£æ¨¡å—&quot;&gt;æ³¨è§£æ¨¡å—&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;ç¼–å†™æ³¨è§£&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;sourceCode&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;fu&quot;&gt;@Retention&lt;/span&gt;(RetentionPolicy.&lt;span class=&quot;fu&quot;&gt;RUNTIME&lt;/span&gt;)
&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;@interface&lt;/span&gt; permission {
    String &lt;span class=&quot;fu&quot;&gt;value&lt;/span&gt;();
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;åœ¨Serviceå±‚æ–¹æ³•ä¸­éœ€è¦æƒé™çš„åœ°æ–¹æ·»åŠ æ³¨è§£CategoryServiceImpl&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;sourceCode&quot; readability=&quot;10&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;
    &lt;span class=&quot;fu&quot;&gt;@permission&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;æ·»åŠ åˆ†ç±»&quot;&lt;/span&gt;)
    &lt;span class=&quot;co&quot;&gt;/*æ·»åŠ åˆ†ç±»*/&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;addCategory&lt;/span&gt;(Category category) {
        categoryDao.&lt;span class=&quot;fu&quot;&gt;addCategory&lt;/span&gt;(category);
    }


    &lt;span class=&quot;co&quot;&gt;/*æŸ¥æ‰¾åˆ†ç±»*/&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;findCategory&lt;/span&gt;(String id) {
        categoryDao.&lt;span class=&quot;fu&quot;&gt;findCategory&lt;/span&gt;(id);
    }

    &lt;span class=&quot;fu&quot;&gt;@permission&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;æŸ¥æ‰¾åˆ†ç±»&quot;&lt;/span&gt;)
    &lt;span class=&quot;co&quot;&gt;/*æŸ¥çœ‹åˆ†ç±»*/&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; List&amp;lt;Category&amp;gt; &lt;span class=&quot;fu&quot;&gt;getAllCategory&lt;/span&gt;() {
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; categoryDao.&lt;span class=&quot;fu&quot;&gt;getAllCategory&lt;/span&gt;();
    }&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;æŠ½å–service&quot;&gt;æŠ½å–Service&lt;/h2&gt;
&lt;p&gt;æŠŠServiceçš„æ–¹æ³•æŠ½å–æˆServiceDaoã€‚åœ¨Servletä¸­ï¼Œä¹Ÿæ˜¯é€šè¿‡ServiceFactoryæ¥å¾—åˆ°Serviceçš„å¯¹è±¡ã€å’ŒDaoFactoryæ˜¯ç±»ä¼¼çš„ã€‘&lt;/p&gt;
&lt;h2 id=&quot;categoryservice&quot;&gt;CategoryService&lt;/h2&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;9&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;
    &lt;span class=&quot;fu&quot;&gt;@permission&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;æ·»åŠ åˆ†ç±»&quot;&lt;/span&gt;)
    &lt;span class=&quot;co&quot;&gt;/*æ·»åŠ åˆ†ç±»*/&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;addCategory&lt;/span&gt;(Category category);

    &lt;span class=&quot;co&quot;&gt;/*æŸ¥æ‰¾åˆ†ç±»*/&lt;/span&gt;
    &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;findCategory&lt;/span&gt;(String id);

    &lt;span class=&quot;fu&quot;&gt;@permission&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;æŸ¥æ‰¾åˆ†ç±»&quot;&lt;/span&gt;)
    &lt;span class=&quot;co&quot;&gt;/*æŸ¥çœ‹åˆ†ç±»*/&lt;/span&gt; List&amp;lt;Category&amp;gt; &lt;span class=&quot;fu&quot;&gt;getAllCategory&lt;/span&gt;();&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;servicefactory&quot;&gt;ServiceFactory&lt;/h2&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;24&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; ServiceDaoFactory {

    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;final&lt;/span&gt; ServiceDaoFactory factory = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;ServiceDaoFactory&lt;/span&gt;();

    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;ServiceDaoFactory&lt;/span&gt;() {
    }

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; ServiceDaoFactory &lt;span class=&quot;fu&quot;&gt;getInstance&lt;/span&gt;() {
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; factory;
    }


    &lt;span class=&quot;co&quot;&gt;//éœ€è¦åˆ¤æ–­è¯¥ç”¨æˆ·æ˜¯å¦æœ‰æƒé™&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &amp;lt;T&amp;gt; T &lt;span class=&quot;fu&quot;&gt;createDao&lt;/span&gt;(String className, Class&amp;lt;T&amp;gt; clazz, &lt;span class=&quot;dt&quot;&gt;final&lt;/span&gt; User user) {

        System.&lt;span class=&quot;fu&quot;&gt;out&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;æ·»åŠ åˆ†ç±»è¿›æ¥äº†ï¼&quot;&lt;/span&gt;);

        &lt;span class=&quot;kw&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;co&quot;&gt;//å¾—åˆ°è¯¥ç±»çš„ç±»å‹&lt;/span&gt;
            &lt;span class=&quot;dt&quot;&gt;final&lt;/span&gt; T t = (T) Class.&lt;span class=&quot;fu&quot;&gt;forName&lt;/span&gt;(className).&lt;span class=&quot;fu&quot;&gt;newInstance&lt;/span&gt;();
            &lt;span class=&quot;co&quot;&gt;//è¿”å›ä¸€ä¸ªåŠ¨æ€ä»£ç†å¯¹è±¡å‡ºå»&lt;/span&gt;
            &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; (T) Proxy.&lt;span class=&quot;fu&quot;&gt;newProxyInstance&lt;/span&gt;(ServiceDaoFactory.&lt;span class=&quot;fu&quot;&gt;class&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;getClassLoader&lt;/span&gt;(), t.&lt;span class=&quot;fu&quot;&gt;getClass&lt;/span&gt;().&lt;span class=&quot;fu&quot;&gt;getInterfaces&lt;/span&gt;(), &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; InvocationHandler() {

                &lt;span class=&quot;fu&quot;&gt;@Override&lt;/span&gt;
                &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; Object &lt;span class=&quot;fu&quot;&gt;invoke&lt;/span&gt;(Object proxy, Method method, Object[] args) &lt;span class=&quot;kw&quot;&gt;throws&lt;/span&gt; NoSuchMethodException, InvocationTargetException, IllegalAccessException, PrivilegeException {
                    &lt;span class=&quot;co&quot;&gt;//åˆ¤æ–­ç”¨æˆ·è°ƒç”¨çš„æ˜¯ä»€ä¹ˆæ–¹æ³•&lt;/span&gt;
                    String methodName = method.&lt;span class=&quot;fu&quot;&gt;getName&lt;/span&gt;();
                    System.&lt;span class=&quot;fu&quot;&gt;out&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(methodName);

                    &lt;span class=&quot;co&quot;&gt;//å¾—åˆ°ç”¨æˆ·è°ƒç”¨çš„çœŸå®æ–¹æ³•ï¼Œæ³¨æ„å‚æ•°ï¼ï¼ï¼&lt;/span&gt;
                    Method method1 = t.&lt;span class=&quot;fu&quot;&gt;getClass&lt;/span&gt;().&lt;span class=&quot;fu&quot;&gt;getMethod&lt;/span&gt;(methodName,method.&lt;span class=&quot;fu&quot;&gt;getParameterTypes&lt;/span&gt;());

                    &lt;span class=&quot;co&quot;&gt;//æŸ¥çœ‹æ–¹æ³•ä¸Šæœ‰æ²¡æœ‰æ³¨è§£&lt;/span&gt;
                    permission permis = method1.&lt;span class=&quot;fu&quot;&gt;getAnnotation&lt;/span&gt;(permission.&lt;span class=&quot;fu&quot;&gt;class&lt;/span&gt;);

                    &lt;span class=&quot;co&quot;&gt;//å¦‚æœæ³¨è§£ä¸ºç©ºï¼Œé‚£ä¹ˆè¡¨ç¤ºè¯¥æ–¹æ³•å¹¶ä¸éœ€è¦æƒé™ï¼Œç›´æ¥è°ƒç”¨æ–¹æ³•å³å¯&lt;/span&gt;
                    &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (permis == &lt;span class=&quot;kw&quot;&gt;null&lt;/span&gt;) {
                        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; method.&lt;span class=&quot;fu&quot;&gt;invoke&lt;/span&gt;(t, args);
                    }

                    &lt;span class=&quot;co&quot;&gt;//å¦‚æœæ³¨è§£ä¸ä¸ºç©ºï¼Œå¾—åˆ°æ³¨è§£ä¸Šçš„æƒé™&lt;/span&gt;
                    String privilege = permis.&lt;span class=&quot;fu&quot;&gt;value&lt;/span&gt;();

                    &lt;span class=&quot;co&quot;&gt;//è®¾ç½®æƒé™ã€åé¢é€šè¿‡å®ƒæ¥åˆ¤æ–­ç”¨æˆ·çš„æƒé™æœ‰æ²¡æœ‰è‡ªå·±ã€‘&lt;/span&gt;
                    Privilege p = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;Privilege&lt;/span&gt;();
                    p.&lt;span class=&quot;fu&quot;&gt;setName&lt;/span&gt;(privilege);

                    &lt;span class=&quot;co&quot;&gt;//åˆ°è¿™é‡Œçš„æ—¶å€™ï¼Œå·²ç»æ˜¯éœ€è¦æƒé™äº†ï¼Œé‚£ä¹ˆåˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»é™†äº†&lt;/span&gt;
                    &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (user == &lt;span class=&quot;kw&quot;&gt;null&lt;/span&gt;) {

                        &lt;span class=&quot;co&quot;&gt;//è¿™é‡ŒæŠ›å‡ºçš„å¼‚å¸¸æ˜¯ä»£ç†å¯¹è±¡æŠ›å‡ºçš„ï¼Œsunå…¬å¸ä¼šè‡ªåŠ¨è½¬æ¢æˆè¿è¡ŒæœŸå¼‚å¸¸æŠ›å‡ºï¼Œäºæ˜¯åœ¨Servletä¸Šæˆ‘ä»¬æ ¹æ®getCause()æ¥åˆ¤æ–­æ˜¯ä¸æ˜¯è¯¥å¼‚å¸¸ï¼Œä»è€Œåšå‡ºç›¸å¯¹åº”çš„æç¤ºã€‚&lt;/span&gt;
                        &lt;span class=&quot;kw&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;PrivilegeException&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;å¯¹ä¸èµ·è¯·å…ˆç™»é™†&quot;&lt;/span&gt;);
                    }

                    &lt;span class=&quot;co&quot;&gt;//æ‰§è¡Œåˆ°è¿™é‡Œç”¨æˆ·å·²ç»ç™»é™†äº†ï¼Œåˆ¤æ–­ç”¨æˆ·æœ‰æ²¡æœ‰æƒé™&lt;/span&gt;
                    Method m = t.&lt;span class=&quot;fu&quot;&gt;getClass&lt;/span&gt;().&lt;span class=&quot;fu&quot;&gt;getMethod&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;findUserPrivilege&quot;&lt;/span&gt;, String.&lt;span class=&quot;fu&quot;&gt;class&lt;/span&gt;);
                    List&amp;lt;Privilege&amp;gt; list = (List&amp;lt;Privilege&amp;gt;) m.&lt;span class=&quot;fu&quot;&gt;invoke&lt;/span&gt;(t, user.&lt;span class=&quot;fu&quot;&gt;getId&lt;/span&gt;());

                    &lt;span class=&quot;co&quot;&gt;//çœ‹ä¸‹æƒé™é›†åˆä¸­æœ‰æ²¡æœ‰åŒ…å«æ–¹æ³•éœ€è¦çš„æƒé™ã€‚ä½¿ç”¨containsæ–¹æ³•ï¼Œåœ¨Privilegeå¯¹è±¡ä¸­éœ€è¦é‡å†™hashCodeå’Œequals()&lt;/span&gt;
                    &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (!list.&lt;span class=&quot;fu&quot;&gt;contains&lt;/span&gt;(p)) {
                        &lt;span class=&quot;co&quot;&gt;//è¿™é‡ŒæŠ›å‡ºçš„å¼‚å¸¸æ˜¯ä»£ç†å¯¹è±¡æŠ›å‡ºçš„ï¼Œsunå…¬å¸ä¼šè‡ªåŠ¨è½¬æ¢æˆè¿è¡ŒæœŸå¼‚å¸¸æŠ›å‡ºï¼Œäºæ˜¯åœ¨Servletä¸Šæˆ‘ä»¬æ ¹æ®getCause()æ¥åˆ¤æ–­æ˜¯ä¸æ˜¯è¯¥å¼‚å¸¸ï¼Œä»è€Œåšå‡ºç›¸å¯¹åº”çš„æç¤ºã€‚&lt;/span&gt;
                        &lt;span class=&quot;kw&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;PrivilegeException&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;æ‚¨æ²¡æœ‰æƒé™ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ï¼&quot;&lt;/span&gt;);
                    }

                    &lt;span class=&quot;co&quot;&gt;//æ‰§è¡Œåˆ°è¿™é‡Œçš„æ—¶å€™ï¼Œå·²ç»æœ‰æƒé™äº†ï¼Œæ‰€ä»¥å¯ä»¥æ”¾è¡Œäº†&lt;/span&gt;
                    &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; method.&lt;span class=&quot;fu&quot;&gt;invoke&lt;/span&gt;(t, args);
                }
            });

        } &lt;span class=&quot;kw&quot;&gt;catch&lt;/span&gt; (Exception e) {
            &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; RuntimeException(e);
        }
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;null&lt;/span&gt;;
    }
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;privilegeexcetption&quot;&gt;PrivilegeExcetption&lt;/h2&gt;
&lt;p&gt;å½“ç”¨æˆ·æ²¡æœ‰ç™»é™†æˆ–è€…æ²¡æœ‰æƒé™çš„æ—¶å€™ï¼Œæˆ‘ä»¬åº”è¯¥ç»™ç”¨æˆ·ä¸€äº›å‹å¥½çš„æç¤º....äºæ˜¯æˆ‘ä»¬è‡ªå®šä¹‰äº†PrivilegeException&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;12&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; PrivilegeException &lt;span class=&quot;kw&quot;&gt;extends&lt;/span&gt; Exception {

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;PrivilegeException&lt;/span&gt;() {
        &lt;span class=&quot;kw&quot;&gt;super&lt;/span&gt;();
    }

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;PrivilegeException&lt;/span&gt;(String message) {
        &lt;span class=&quot;kw&quot;&gt;super&lt;/span&gt;(message);
    }

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;PrivilegeException&lt;/span&gt;(String message, Throwable cause) {
        &lt;span class=&quot;kw&quot;&gt;super&lt;/span&gt;(message, cause);
    }

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;PrivilegeException&lt;/span&gt;(Throwable cause) {
        &lt;span class=&quot;kw&quot;&gt;super&lt;/span&gt;(cause);
    }
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æˆ‘ä»¬ç»§æ‰¿çš„æ˜¯Exceptionï¼Œé€šè¿‡æ–¹æ³•åæŠ›å‡ºå»ã€‚ä½†æ˜¯æˆ‘ä»¬æ˜¯&lt;strong&gt;é€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨æ–¹æ³•çš„ï¼Œäºæ˜¯sunå…¬å¸çš„ç­–ç•¥å°±æ˜¯æŠŠå®ƒä»¬è½¬æ¢æˆè¿è¡ŒæœŸå¼‚å¸¸æŠ›å‡ºå»&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œæˆ‘ä»¬å°±åœ¨&lt;strong&gt;Servletä¸Šå¾—åˆ°å¼‚å¸¸ï¼Œå†ç»™å‡ºå‹å¥½çš„æç¤º&lt;/strong&gt;ã€‚ã€‚&lt;/p&gt;
&lt;hr/&gt;&lt;h2 id=&quot;æ•ˆæœ-3&quot;&gt;æ•ˆæœï¼š&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;æ²¡æœ‰ç™»é™†çš„æ—¶å€™ï¼š&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;http://img.blog.csdn.net/20170425203417014?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast&quot; alt=&quot;è¿™é‡Œå†™å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ç™»é™†äº†ï¼Œä½†æ˜¯æ²¡æœ‰ç›¸å¯¹åº”çš„æƒé™çš„æ—¶å€™&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;http://img.blog.csdn.net/20170425203527812?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast&quot; alt=&quot;è¿™é‡Œå†™å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ç™»é™†äº†ï¼Œå¹¶ä¸”æœ‰æƒé™&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;http://img.blog.csdn.net/20170425203633494?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast&quot; alt=&quot;è¿™é‡Œå†™å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;è¦ç‚¹æ€»ç»“&quot;&gt;è¦ç‚¹æ€»ç»“&lt;/h2&gt;
&lt;p&gt;è¯¥æƒé™æ§åˆ¶æ˜¯ååˆ†ä¼˜é›…çš„ï¼Œ&lt;strong&gt;åªè¦æˆ‘åœ¨Serviceå±‚ä¸­æ·»åŠ ä¸€ä¸ªæ³¨è§£...é‚£ä¹ˆå½“webå±‚è°ƒç”¨è¯¥æ–¹æ³•çš„æ—¶å€™å°±éœ€è¦åˆ¤æ–­ç”¨æˆ·æœ‰æ²¡æœ‰è¯¥æƒé™...&lt;/strong&gt;.&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;å¤–ç•Œè°ƒç”¨Serviceå±‚çš„æ–¹æ³•æ˜¯ä»£ç†è°ƒç”¨invoke()æ–¹æ³•ï¼Œæˆ‘ä»¬&lt;strong&gt;åœ¨invoke()æ–¹æ³•å¯ä»¥å¯¹å…¶è¿›è¡Œå¢å¼ºï¼&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;invoke()æ–¹æ³•å†…éƒ¨å°±æ˜¯åœ¨æŸ¥è¯¢è°ƒç”¨è¯¥æ–¹æ³•ä¸Šæœ‰æ²¡æœ‰æ³¨è§£ï¼Œå¦‚æœæ²¡æœ‰æ³¨è§£ï¼Œå°±å¯ä»¥ç›´æ¥è°ƒç”¨ã€‚å¦‚æœæœ‰æ³¨è§£ï¼Œé‚£ä¹ˆå°±å¾—åˆ°æ³¨è§£çš„ä¿¡æ¯ï¼Œåˆ¤æ–­è¯¥ç”¨æˆ·æœ‰æ²¡æœ‰æƒé™æ¥è®¿é—®è¿™ä¸ªæ–¹æ³•&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœ¨åå°„å…·ä½“æ–¹æ³•çš„æ—¶å€™ï¼Œå¿…é¡»è®°å¾—è¦ç»™å‡ºç›¸å¯¹åº”çš„å‚æ•°ï¼&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœ¨invoke()æ–¹æ³•æŠ›å‡ºçš„ç¼–è¯‘æ—¶æœŸå¼‚å¸¸ï¼Œjavaä¼šè‡ªåŠ¨è½¬æ¢æˆè¿è¡ŒæœŸå¼‚å¸¸è¿›è¡ŒæŠ›å‡º...&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨contains()æ–¹æ³•æ—¶ï¼Œå°±è¦é‡å†™è¯¥å¯¹è±¡çš„hashCode()å’Œequals()&lt;/li&gt;
&lt;/ol&gt;</description>
<pubDate>Tue, 27 Feb 2018 13:24:00 +0000</pubDate>
<dc:creator>Java3y</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/Java3y/p/8481080.html</dc:identifier>
</item>
<item>
<title>Linux å°è®° â€” ç½‘ç»œç®¡ç† - æ·ä¹‰</title>
<link>http://www.cnblogs.com/youclk/p/8470139.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/youclk/p/8470139.html</guid>
<description>&lt;h2 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;å‰æ®µæ—¶é—´éœ€è¦é…ç½®ä¸€å°ç§ç½‘ ECS è”å¤–ç½‘ï¼Œé˜¿é‡Œäº‘æ¯”è¾ƒæ¨èçš„æ–¹æ¡ˆæ˜¯åˆ›å»ºä¸€ä¸ª Nat ç½‘å…³å¹¶ç»‘å®š EIPï¼Œ ä»¥æ­¤æ¥ç»Ÿä¸€æ‰€æœ‰ ECS çš„ç½‘ç»œå‡ºå£ã€‚ç”±äºæˆ‘å·²ç»æ‹¥æœ‰ä¸€å°å¤–ç½‘ ECSï¼ˆä¸æƒ³å¤šæé’±ï¼Œä¸”æˆ‘è‡ªå·±çš„æµ‹è¯•ç¯å¢ƒä¸éœ€è¦ä¸¥æ ¼çš„ç¨³å®šæ€§è¦æ±‚ï¼‰ï¼Œå› æ­¤æˆ‘å†³å®šä½¿ç”¨ Iptables å¯¹ç§ç½‘ ECS çš„è¯·æ±‚è¿›è¡Œæºåœ°å€è½¬æ¢ï¼Œè¿™å°å¤–ç½‘ ECS å°±ä½œä¸ºå…¶ä½™ç§ç½‘ ECS çš„è·³æ¿æœºå’Œç½‘ç»œä»£ç†æœºã€‚è™½ç„¶åŸç†å’Œæœ€åçš„è§£å†³æ–¹æ¡ˆéƒ½éå¸¸ç®€å•ï¼Œä½†æŸ¥èµ„æ–™çš„è¿‡ç¨‹å´åºŸäº†ä¸€ç•ªå‘¨æŠ˜ï¼Œäºæ˜¯å†³å®šå°†ç½‘ç»œç®¡ç†å’Œ Iptables çš„çŸ¥è¯†ç‚¹åšä¸€ä¸ªç®€å•çš„æ¢³ç†ã€‚&lt;br/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/801714/201802/801714-20180225184609967-870491773.png&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;osi-ä¸ƒå±‚æ¨¡å‹ä¸-tcpip-å››å±‚æ¨¡å‹&quot;&gt;1. OSI ä¸ƒå±‚æ¨¡å‹ä¸ TCP/IP å››å±‚æ¨¡å‹&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;ï¼ˆä»¥ä¸‹éƒ¨åˆ†å›¾ç‰‡æ¥è‡ªäº’è”ç½‘ï¼Œä¸çŸ¥å…¶æœ€åˆä½œè€…ï¼Œå› æ­¤æœªæ ‡è®°æ¥æºã€‚ï¼‰&lt;/em&gt;&lt;/p&gt;
&lt;h3 id=&quot;ä¸ƒå±‚æ¨¡å‹&quot;&gt;1.1 ä¸ƒå±‚æ¨¡å‹&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/801714/201802/801714-20180225204859568-2008716898.png&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;å››å±‚æ¨¡å‹&quot;&gt;1.2 å››å±‚æ¨¡å‹&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/801714/201802/801714-20180225205126670-7656275.png&quot;/&gt;&lt;br/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/801714/201802/801714-20180225205148232-409083579.png&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;å¯¹åº”&quot;&gt;1.3 å¯¹åº”&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/801714/201802/801714-20180225205327019-2011763828.png&quot;/&gt;&lt;br/&gt;è¿™å‡ å¹…å›¾ä¸€ç›®äº†ç„¶ï¼Œä¸éœ€è¦è¿‡å¤šæ–‡å­—èµ˜è¿°äº†ã€‚ä¸¾ä¸ªå†™é‚®ä»¶çš„ä¾‹å­å§ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;åº”ç”¨å±‚ï¼šå†™é‚®ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;è¡¨ç¤ºå±‚ï¼šåŠ å¯†å’Œç¿»è¯‘ä¸ºäºŒè¿›åˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;ä¼šè¯å±‚ï¼šåˆ¤æ–­å­˜å‚¨è¿˜æ˜¯å‘é€ã€‚&lt;/li&gt;
&lt;li&gt;ä¼ è¾“å±‚ï¼šé€‰æ‹© TCP åè®®å’Œå‘é€ç«¯å£ã€‚&lt;/li&gt;
&lt;li&gt;ç½‘ç»œå±‚ï¼šç¡®å®šæ”¶å‘çš„ IP åœ°å€å’Œ MAC åœ°å€ã€‚&lt;/li&gt;
&lt;li&gt;æ•°æ®é“¾è·¯å±‚ï¼šç‰©ç†å¯»å€ï¼Œå³ç¡®å®šæ¯ä¸€ä¸ªç½‘å…³ã€‚&lt;/li&gt;
&lt;li&gt;ç‰©ç†å±‚ï¼šå„ç§ç¡¬ä»¶è®¾å¤‡ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;åœ°å€ä¸ç«¯å£&quot;&gt;2. åœ°å€ä¸ç«¯å£&lt;/h2&gt;
&lt;h3 id=&quot;ip-åœ°å€ä¸å­ç½‘æ©ç &quot;&gt;2.1 IP åœ°å€ä¸å­ç½‘æ©ç &lt;/h3&gt;
&lt;p&gt;æ­¤äºŒè€…å¿…é¡»ç»“åˆä½¿ç”¨ï¼Œå­ç½‘æ©ç çš„ä½œç”¨å°±æ˜¯å°†æŸä¸ªIPåœ°å€åˆ’åˆ†æˆç½‘ç»œåœ°å€å’Œä¸»æœºåœ°å€ä¸¤éƒ¨åˆ†ã€‚&lt;br/&gt;IP åœ°å€åˆ†ç±»ï¼š&lt;/p&gt;
&lt;table&gt;&lt;thead/&gt;&lt;tbody readability=&quot;4&quot;&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td align=&quot;center&quot;&gt;A&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;2^7 -2&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;1.0.0.0-126.255.255.255&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;2^24 -2&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;10.0.0.0-10.255.255.255&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;even&quot; readability=&quot;4&quot;&gt;&lt;td align=&quot;center&quot;&gt;B&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;2^14&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;128.0.0.0-191.255.255.255&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;2^16 -2&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;172.16.0.0-172.31.255.255&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;odd&quot; readability=&quot;4&quot;&gt;&lt;td align=&quot;center&quot;&gt;C&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;2^21&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;192.0.0.0-223.255.255.255&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;2^8 -2&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;192.168.0.0-192.168.255.255&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;å­ç½‘æ©ç åŠå­ç½‘è§„åˆ’ï¼š&lt;/p&gt;
&lt;table&gt;&lt;thead/&gt;&lt;tbody readability=&quot;2&quot;&gt;&lt;tr class=&quot;odd&quot; readability=&quot;2&quot;&gt;&lt;td align=&quot;center&quot;&gt;IPåœ°å€ï¼ˆ172.16.2.121ï¼‰&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;10101100&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;00010000&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;00000010&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;01111001&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;even&quot; readability=&quot;2&quot;&gt;&lt;td align=&quot;center&quot;&gt;å­ç½‘æ©ç ï¼ˆ255.255.255.0ï¼‰&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;11111111&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;11111111&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;11111111&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;00000000&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td align=&quot;center&quot;&gt;ç½‘ç»œåœ°å€&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;10101100&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;00010000&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;00000010&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;00000000&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td align=&quot;center&quot;&gt;å¹¿æ’­åœ°å€&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;10101100&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;00010000&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;00000010&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;11111111&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;ç½‘ç»œåœ°å€ = IP åœ°å€ &amp;amp; å­ç½‘æ©ç ã€‚&lt;br/&gt;å¹¿æ’­åœ°å€ = ç½‘ç»œåœ°å€çš„ä¸»æœºä½ï¼ˆå­ç½‘æ©ç ä¸º0çš„éƒ¨åˆ†ï¼‰å…¨æ¢æˆ1ã€‚&lt;br/&gt;ï¼ˆå¹¿æ’­åœ°å€åªæ˜¯ä¸€ä¸ªæ ‡è¯†ï¼Œåœ¨æ•°æ®åŒ…é‡Œé¢ï¼Œå¦‚æœç›®çš„åœ°å€æ˜¯å¹¿æ’­åœ°å€çš„è¯ï¼Œå°±ä¼šå‘æ•´ä¸ªåŒä¸€ç½‘æ®µçš„ä¸»æœºå‘é€å¹¿æ’­åŒ…ã€‚ï¼‰&lt;/p&gt;
&lt;h3 id=&quot;å…¶ä»–åœ°å€&quot;&gt;2.2 å…¶ä»–åœ°å€&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;ç½‘å…³åœ°å€ï¼šå…·æœ‰è·¯ç”±åŠŸèƒ½çš„è®¾å¤‡çš„IPåœ°å€ï¼Œå¦‚ï¼šè·¯ç”±å™¨ã€å¯ç”¨äº†è·¯ç”±åè®®çš„æœåŠ¡å™¨ï¼ˆç›¸å½“äºè·¯ç”±å™¨ï¼‰ã€ä»£ç†æœåŠ¡å™¨ï¼ˆç›¸å½“äºè·¯ç”±å™¨ï¼‰ã€‚å½“ç½‘ç»œä¸­çš„ä¸»æœºå‘ç°æ•°æ®åŒ…çš„ç›®æ ‡ä¸»æœºä¸åœ¨æœ¬åœ°ç½‘ç»œä¸­ï¼Œå°±æŠŠæ•°æ®åŒ…è½¬å‘ç»™å®ƒè‡ªå·±çš„ç½‘å…³ï¼Œå†ç”±ç½‘å…³è½¬å‘ç»™ç›®æ ‡ç½‘ç»œçš„ç½‘å…³ã€‚ä¸€èˆ¬è®¾ç½®ä¸ºä¸€ä¸ªç½‘æ®µçš„èµ·å§‹æˆ–ç»ˆæ­¢å€¼ï¼Œä¾‹ï¼š172.16.2.1 æˆ– 172.16.2.254ã€‚&lt;/li&gt;
&lt;li&gt;MACåœ°å€ï¼šMedia Access Controlï¼Œå…·æœ‰å…¨çƒå”¯ä¸€æ€§ã€‚&lt;/li&gt;
&lt;li&gt;DNSåœ°å€ï¼šDomain Name Serverï¼ˆåŸŸåæœåŠ¡å™¨ï¼‰ï¼Œç™¾åº¦ï¼š114.114.114.114ï¼Œè°·æ­Œï¼š8.8.8.8ã€‚&lt;/li&gt;
&lt;li&gt;DHCPï¼šæŒ‡çš„æ˜¯ç”±æœåŠ¡å™¨æ§åˆ¶ä¸€æ®µIPåœ°å€èŒƒå›´ï¼Œå®¢æˆ·æœºç™»å½•æœåŠ¡å™¨æ—¶å°±å¯ä»¥è‡ªåŠ¨è·å¾—æœåŠ¡å™¨åˆ†é…çš„IPåœ°å€å’Œå­ç½‘æ©ç ã€‚æå‡åœ°å€çš„ä½¿ç”¨ç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;å¸¸ç”¨ç«¯å£&quot;&gt;2.3 å¸¸ç”¨ç«¯å£&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;FTPï¼š20ï¼Œ21ã€‚&lt;/li&gt;
&lt;li&gt;SSHï¼š22ã€‚&lt;/li&gt;
&lt;li&gt;Telnetï¼š23ã€‚&lt;/li&gt;
&lt;li&gt;DNSï¼š53ã€‚&lt;/li&gt;
&lt;li&gt;HTTPï¼ˆsï¼‰ï¼š80ï¼ˆ443ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;SMTPï¼š25ã€‚&lt;/li&gt;
&lt;li&gt;POP3ï¼š110ã€‚&lt;/li&gt;
&lt;li&gt;SOCKSï¼š1080ã€‚&lt;/li&gt;
&lt;li&gt;Oracleï¼š1521ã€‚&lt;/li&gt;
&lt;li&gt;SQL Serverï¼š1433ã€‚&lt;/li&gt;
&lt;li&gt;MySQLï¼š3306ã€‚&lt;/li&gt;
&lt;li&gt;MongoDBï¼š27017ã€‚&lt;/li&gt;
&lt;li&gt;Redisï¼š6379ã€‚&lt;/li&gt;
&lt;li&gt;Memcachedï¼š11211ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;iptables&quot;&gt;3. Iptables&lt;/h2&gt;
&lt;h3 id=&quot;iptables-æ‘˜è¦&quot;&gt;3.1 Iptables æ‘˜è¦&lt;/h3&gt;
&lt;p&gt;ç®€å•çš„è¯´ï¼ŒIptables æ˜¯ä¸€ç§èƒ½å¤Ÿè½»æ˜“æ’å…¥ã€ä¿®æ”¹å’Œé™¤å»æ•°æ®åŒ…è¿‡æ»¤è¡¨ä¸­è§„åˆ™çš„å·¥å…·ï¼Œæ˜¯netfilteré¡¹ç›®çš„ä¸€éƒ¨åˆ†ã€‚ä»¥ä¸‹ä¸ºä½¿ç”¨æ–¹æ³•å’Œæ¡ˆä¾‹è¯¦è§£ï¼ˆåªè®°å½•æˆ‘è®¤ä¸ºçš„å¸¸ç”¨è§„åˆ™ï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;ç¤ºæ„å›¾ï¼š&lt;br/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/801714/201802/801714-20180227161810070-1763035186.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å‘½ä»¤ç»“æ„ï¼š&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;8&quot;&gt;
&lt;pre class=&quot;sourceCode sh&quot;&gt;
&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;kw&quot;&gt;iptables&lt;/span&gt; [-t è¡¨å] [-AI é“¾å] [-I/o ç½‘å¡å] [-p  åè®®å] [-s æºIP/å­ç½‘] [--sport æºç«¯å£] [-d ç›®æ ‡IP/å­ç½‘] [--dport ç›®æ ‡ç«¯å£] [-j æ§åˆ¶ç±»å‹]&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¡¨ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;filterï¼šé»˜è®¤è¡¨ï¼Œé…ç½®è§„åˆ™å…è®¸æˆ–ä¸å…è®¸ï¼Œç”¨äºé˜²ç«å¢™ã€‚&lt;/li&gt;
&lt;li&gt;natï¼šåœ°å€è½¬æ¢ï¼Œç”¨äºç½‘å…³è·¯ç”±å™¨ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;è§„åˆ™é“¾ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;PREROUTING è·¯ç”±å‰ï¼ˆç”¨äºç›®æ ‡åœ°å€è½¬æ¢ DNATï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;INPUTï¼šæ•°æ®åŒ…æµå…¥å£ã€‚&lt;/li&gt;
&lt;li&gt;PORWARDï¼šè½¬å‘ç®¡å¡ã€‚&lt;/li&gt;
&lt;li&gt;OUTPUTï¼šæ•°æ®åŒ…å‡ºå£ã€‚&lt;/li&gt;
&lt;li&gt;POSTOUTINGï¼šè·¯ç”±åï¼ˆç”¨äºæºåœ°å€è½¬æ¢ SNATï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æ§åˆ¶ç±»å‹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ACCEPT/DROP/REJECTï¼šæ¥æ”¶/ä¸¢å¼ƒ/é‡å®šå‘æ•°æ®åŒ…ã€‚&lt;/li&gt;
&lt;li&gt;SNAT/DNATï¼šæºåœ°/ç›®æ ‡å€è½¬æ¢ã€‚&lt;/li&gt;
&lt;li&gt;MASQUERADEï¼šIPä¼ªè£…ï¼ˆNATï¼‰ï¼Œç”¨äºADSLã€‚&lt;/li&gt;
&lt;li&gt;LOGï¼šæ—¥å¿—è®°å½•ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;iptables-å®ä¾‹&quot;&gt;3.2 Iptables å®ä¾‹&lt;/h3&gt;
&lt;h4 id=&quot;æŸ¥çœ‹ä¸æ¸…é™¤è§„åˆ™&quot;&gt;3.2.1 æŸ¥çœ‹ä¸æ¸…é™¤è§„åˆ™&lt;/h4&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;10&quot;&gt;
&lt;pre class=&quot;sourceCode sh&quot;&gt;
&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;kw&quot;&gt;iptables&lt;/span&gt; [-t tables] [-nv] [-L]
&lt;span class=&quot;co&quot;&gt;# å‚æ•°è¯´æ˜ï¼š&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;-t&lt;/span&gt; tableï¼šé»˜è®¤ä¸º filterï¼Œ å¯æŒ‡å®š natã€‚
&lt;span class=&quot;kw&quot;&gt;-L&lt;/span&gt; ï¼šåˆ—å‡ºå½“å‰ table çš„è§„åˆ™ã€‚
&lt;span class=&quot;kw&quot;&gt;-n&lt;/span&gt; ï¼šä¸è¿›è¡Œ IP ä¸ HOSTNAME çš„åæŸ¥ï¼ˆé€Ÿåº¦æ›´å¿«ï¼‰ã€‚
&lt;span class=&quot;kw&quot;&gt;-v&lt;/span&gt; ï¼šåˆ—å‡ºæ›´å¤šçš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬é€šè¿‡è¯¥è§„åˆ™çš„å°åŒ…æ€»ä½æ•°ã€ç›¸å…³çš„ç½‘ç»œæ¥å£ç­‰ã€‚

&lt;span class=&quot;kw&quot;&gt;iptables&lt;/span&gt; [-t tables] [-FXZ]
&lt;span class=&quot;co&quot;&gt;# å‚æ•°è¯´æ˜ï¼š&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;-F&lt;/span&gt; ï¼šæ¸…ç©ºè§„åˆ™é“¾ã€‚
&lt;span class=&quot;kw&quot;&gt;-X&lt;/span&gt; ï¼šåˆ é™¤ç”¨æˆ·è‡ªå®šä¹‰çš„ç©ºé“¾ã€‚
&lt;span class=&quot;kw&quot;&gt;-Z&lt;/span&gt; ï¼šå°†æ‰€æœ‰é“¾çš„è®¡æ•°ä¸æµé‡ç»Ÿè®¡å½’é›¶ã€‚&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;æ·»åŠ è§„åˆ™&quot;&gt;3.2.2 æ·»åŠ è§„åˆ™&lt;/h4&gt;
&lt;p&gt;å‚æ•°è¯´æ˜ï¼š&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;10&quot;&gt;
&lt;pre class=&quot;sourceCode sh&quot;&gt;
&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;kw&quot;&gt;-A/I&lt;/span&gt; é“¾åï¼šæ·»åŠ è§„åˆ™ï¼Œ-Aä¸ºåœ¨åŸè§„åˆ™åè¿½å‡»&lt;span class=&quot;kw&quot;&gt;;-I&lt;/span&gt; åˆ™ä¸ºæ’å…¥ï¼Œè‹¥æœªæŒ‡å®šè¡Œï¼Œåˆ™æ’å…¥åˆ°ç¬¬ä¸€è¡Œï¼Œä¾‹ï¼šiptables -I 2 INPUT -j ACCEPTã€‚

&lt;span class=&quot;kw&quot;&gt;-i/o&lt;/span&gt; ç½‘å¡åï¼šåŒ¹é…ç½‘å¡æµå…¥/å‡ºã€‚

&lt;span class=&quot;kw&quot;&gt;-p&lt;/span&gt;  åè®®åï¼šä¸»è¦æœ‰tcpã€udpã€icmp å’Œ allã€‚

&lt;span class=&quot;kw&quot;&gt;-s/d&lt;/span&gt; æº/ç›®æ ‡ IP/å­ç½‘ï¼š
   &lt;span class=&quot;kw&quot;&gt;-s&lt;/span&gt; 172.16.205.1
   &lt;span class=&quot;kw&quot;&gt;172.16.205.0/24&lt;/span&gt; 
   &lt;span class=&quot;kw&quot;&gt;172.16.205.0/255.255.255.0&lt;/span&gt;
   &lt;span class=&quot;kw&quot;&gt;IP&lt;/span&gt;ï¼š172.16.205.1
   &lt;span class=&quot;kw&quot;&gt;-s&lt;/span&gt; ! 172.16.205.0/24 
   
&lt;span class=&quot;kw&quot;&gt;...&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä»¥ä¸Šè¯´æ˜å†ç»“åˆ 3.1 å°èŠ‚çš„å‘½ä»¤ç»“æ„è¶³ä»¥æ»¡è¶³å¤§éƒ¨åˆ†çš„åº”ç”¨åœºæ™¯äº†ã€‚&lt;/p&gt;
&lt;h4 id=&quot;é…ç½®ç§ç½‘-ecs-è”å¤–ç½‘&quot;&gt;3.2.3 é…ç½®ç§ç½‘ ECS è”å¤–ç½‘&lt;/h4&gt;
&lt;p&gt;å‰è¨€ä¸­è¯´äº†ä¸€äº›ä¸ä¹‹ç›¸å…³çš„æ¢—æ¦‚ï¼Œæœ¬å°ç»“è¿›è¡Œå®é™…æ“ä½œã€‚é¦–å…ˆï¼Œåœ¨ VPC ä¸“æœ‰ç½‘ç»œä¸­æ·»åŠ ä¸€æ¡è·¯ç”±è§„åˆ™ï¼Œå¦‚ä¸‹ï¼š&lt;br/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/801714/201802/801714-20180227175349211-359192204.png&quot;/&gt;&lt;br/&gt;ä¸‹ä¸€è·³å®ä¾‹ä¸ºå¤–ç½‘ ECS å®ä¾‹ã€‚&lt;br/&gt;å…¶æ¬¡ï¼Œåœ¨å¤–ç½‘ ECSï¼ˆ172.16.200.1ï¼‰ä¸­å¼€å¯å†…æ ¸è·¯ç”±è½¬å‘åŠŸèƒ½ï¼š&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;8&quot;&gt;
&lt;pre class=&quot;sourceCode sh&quot;&gt;
&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;co&quot;&gt;# ä¸´æ—¶&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;echo&lt;/span&gt; 1 &lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt; /proc/sys/net/ipv4/ip_forward
&lt;span class=&quot;kw&quot;&gt;sysctl&lt;/span&gt; -p
&lt;span class=&quot;co&quot;&gt;# æ°¸ä¹…&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;'net.ipv4.ip_forward = 1'&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; /etc/sysctl.conf
&lt;span class=&quot;kw&quot;&gt;sysctl&lt;/span&gt; -p&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å†æ ¹æ® VPC ç½‘æ®µæ·»åŠ ä¸€æ¡è½¬å‘è§„åˆ™ï¼Œä¾‹å¦‚æˆ‘çš„æ˜¯ï¼š&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;sourceCode sh&quot;&gt;
&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;kw&quot;&gt;iptables&lt;/span&gt; -t nat -A POSTROUTING -s 172.16.205.0/24 -j SNAT --to-source 172.16.200.1&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä¹‹åï¼Œåªè¦æ˜¯åœ¨ &lt;code&gt;172.16.205.0/24&lt;/code&gt; è¿™ä¸ªç½‘æ®µå†…çš„æ‰€æœ‰ç§ç½‘æœåŠ¡å™¨éƒ½èƒ½è”å¤–ç½‘äº†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å…¶ä»–ç½‘ç»œç®¡ç†å¸¸ç”¨å‘½ä»¤&quot;&gt;4. å…¶ä»–ç½‘ç»œç®¡ç†å¸¸ç”¨å‘½ä»¤&lt;/h2&gt;
&lt;p&gt;ç”±äºæœåŠ¡å™¨éƒ½åœ¨â€œäº‘ä¸Šâ€ï¼Œæ‰€ä»¥å¾ˆå¤š Linux æœ€åŸºæœ¬çš„ç½‘è·¯é…ç½®å‘½ä»¤å‡ ä¹éƒ½ç”¨ä¸ç€äº†ï¼Œå¸¸ç”¨çš„å°±æ˜¯ä¸€äº›æµ‹è¯•æˆ–è€…æŸ¥çœ‹çš„å‘½ä»¤ï¼Œæš‚æ—¶æ”¶å½•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;pingï¼š&lt;/strong&gt; å‘é€ICMPæŠ¥æ–‡ï¼Œå¸¸ç”¨ï¼š &lt;code&gt;ping -ic&lt;/code&gt;ï¼Œå‚æ•°è¯´æ˜ï¼šintervalã€countã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;telnetï¼š&lt;/strong&gt; æŸ¥çœ‹ç«¯å£æ˜¯å¦è”é€šï¼Œæ ¼å¼ï¼š &lt;code&gt;telnet ip port&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;tracerouteï¼š&lt;/strong&gt; è·¯ç”±è·Ÿè¸ªï¼Œæ ¼å¼ï¼š &lt;code&gt;traceroute hostname&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ifconfigï¼š&lt;/strong&gt; æŸ¥çœ‹ç½‘å¡ä¿¡æ¯ï¼Œå…¶ä»–çš„å‚æ•°éƒ½ä¸å¸¸ç”¨äº†ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;netstatï¼š&lt;/strong&gt; ç›‘æ§ TCP/IP ç½‘ç»œï¼Œå¸¸ç”¨å‚æ•°ï¼š&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;9&quot;&gt;
&lt;pre class=&quot;sourceCode sh&quot;&gt;
&lt;code class=&quot;sourceCode bash&quot;&gt;ã€€ã€€&lt;span class=&quot;kw&quot;&gt;-a&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;# æ˜¾ç¤ºæ‰€æœ‰socketï¼ŒåŒ…æ‹¬æ­£åœ¨ç›‘å¬çš„ã€‚&lt;/span&gt;
ã€€ã€€&lt;span class=&quot;kw&quot;&gt;-l&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;# æ˜¾ç¤ºæœ‰åœ¨ Listen ï¼ˆç›‘å¬ï¼‰ çš„æœåŠ¡çŠ¶æ€ã€‚&lt;/span&gt;
ã€€ã€€&lt;span class=&quot;kw&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;# ä»¥ç½‘ç»œIPåœ°å€ä»£æ›¿åç§°ï¼Œæ˜¾ç¤ºç½‘ç»œè¿æ¥æƒ…å½¢ã€‚&lt;/span&gt;
ã€€ã€€&lt;span class=&quot;kw&quot;&gt;-t&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;# æ˜¾ç¤ºTCPåè®®çš„è¿æ¥æƒ…å†µã€‚&lt;/span&gt;
ã€€ã€€&lt;span class=&quot;kw&quot;&gt;-u&lt;/span&gt; &lt;span class=&quot;co&quot;&gt;# æ˜¾ç¤ºUDPåè®®çš„è¿æ¥æƒ…å†µã€‚&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¸¸ä¸ grep ç»“åˆä½¿ç”¨ï¼Œå¦‚ &lt;code&gt;netstat -atuln | grep 'ï¼š80'&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;routeï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;8&quot;&gt;
&lt;pre class=&quot;sourceCode sh&quot;&gt;
&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;kw&quot;&gt;route&lt;/span&gt; -n &lt;span class=&quot;co&quot;&gt;# æŸ¥è¯¢è·¯ç”±çŠ¶æ€ã€‚&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;route&lt;/span&gt; add/del default gw 172.16.200.1 &lt;span class=&quot;co&quot;&gt;#æ·»åŠ /åˆ é™¤é»˜è®¤ç½‘å…³ã€‚&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;ç»“è¯­&quot;&gt;ç»“è¯­&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸Šä¸»è¦ç®€è¿°äº† TCP/IP æ¨¡å‹å’Œ Iptables çš„ä½¿ç”¨ï¼Œè‹¥æ±ä»¥ä¹‹ä¸ºå°šå¯ï¼Œæ‹œè¯·èµä¹‹ ~ï¼šï¼‰&lt;/p&gt;
</description>
<pubDate>Tue, 27 Feb 2018 12:53:00 +0000</pubDate>
<dc:creator>æ·ä¹‰</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/youclk/p/8470139.html</dc:identifier>
</item>
<item>
<title>SqlBulkCopy å‚æ•°é…ç½®ç¤ºä¾‹ - ä»°å…‰</title>
<link>http://www.cnblogs.com/a_bu/p/8480111.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/a_bu/p/8480111.html</guid>
<description>
&lt;p&gt;Â Â  SqlBulkCopyÂ  åšä¸ºSQL Server å®˜æ–¹ æ‰¹é‡å…¥åº“ç±»ï¼Œæ€§èƒ½ä¸ä¼šå¤ªå·®ã€‚å…¶äº‹åŠ¡éƒ¨ä»½å®˜æ–¹è¯´æ˜è¾ƒæ¨¡ç³Šï¼Œå› æ­¤ é’ˆå¯¹äº‹åŠ¡é…ç½®åšäº†ä¸€äº›æµ‹è¯•ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Â  A. å…ˆå‡†å¤‡æµ‹è¯•åœºæ™¯ ï¼Œå…³äº&lt;code class=&quot;lang-csharp&quot; data-src=&quot;https://github.com/dotnet/docs/blob/live/samples/snippets/csharp/VS_Snippets_ADO.NET/DataWorks%20SqlBulkCopy.DefaultTransaction/CS/source.cs&quot;&gt;SqlBulkCopyOptions.KeepIdentity&lt;/code&gt; åº”ç”¨ã€‚Â  æ–°å»ºä¸¤å¼ è¡¨ , æ¯å¼ è¡¨åˆ—a åšä¸ºè‡ªå¢åˆ—ï¼ŒåŒæ—¶åšä¸ºä¸»é”® ï¼Œ å…¶ä¸­ test_sqlbulk æºè¡¨ ï¼Œå…ˆæ·»åŠ ä¸€ç»„æ•°æ®ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;49&quot;&gt;
&lt;pre&gt;
&lt;span&gt;CREATE&lt;/span&gt; &lt;span&gt;TABLE&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;.&lt;span&gt;[&lt;/span&gt;&lt;span&gt;test_sqlbulk&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;(
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;IDENTITY&lt;/span&gt;(&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;1&lt;/span&gt;) &lt;span&gt;NOT&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;b&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
 &lt;/span&gt;&lt;span&gt;CONSTRAINT&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;PK_test_sqlbulk&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;PRIMARY&lt;/span&gt; &lt;span&gt;KEY&lt;/span&gt; &lt;span&gt;CLUSTERED&lt;/span&gt;&lt;span&gt; 
(
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;ASC&lt;/span&gt;&lt;span&gt;
)&lt;/span&gt;&lt;span&gt;WITH&lt;/span&gt; (PAD_INDEX  &lt;span&gt;=&lt;/span&gt; &lt;span&gt;OFF&lt;/span&gt;, STATISTICS_NORECOMPUTE  &lt;span&gt;=&lt;/span&gt; &lt;span&gt;OFF&lt;/span&gt;, IGNORE_DUP_KEY &lt;span&gt;=&lt;/span&gt; &lt;span&gt;OFF&lt;/span&gt;, ALLOW_ROW_LOCKS  &lt;span&gt;=&lt;/span&gt; &lt;span&gt;ON&lt;/span&gt;, ALLOW_PAGE_LOCKS  &lt;span&gt;=&lt;/span&gt; &lt;span&gt;ON&lt;/span&gt;) &lt;span&gt;ON&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;PRIMARY&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;
) &lt;/span&gt;&lt;span&gt;ON&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;PRIMARY&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;




&lt;span&gt;CREATE&lt;/span&gt; &lt;span&gt;TABLE&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;.&lt;span&gt;[&lt;/span&gt;&lt;span&gt;test_sqlbulk_des&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;(
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;IDENTITY&lt;/span&gt;(&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;1&lt;/span&gt;) &lt;span&gt;NOT&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;b&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
 &lt;/span&gt;&lt;span&gt;CONSTRAINT&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;PK_test_sqlbulk_des&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;PRIMARY&lt;/span&gt; &lt;span&gt;KEY&lt;/span&gt; &lt;span&gt;CLUSTERED&lt;/span&gt;&lt;span&gt; 
(
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;ASC&lt;/span&gt;&lt;span&gt;
)&lt;/span&gt;&lt;span&gt;WITH&lt;/span&gt; (PAD_INDEX  &lt;span&gt;=&lt;/span&gt; &lt;span&gt;OFF&lt;/span&gt;, STATISTICS_NORECOMPUTE  &lt;span&gt;=&lt;/span&gt; &lt;span&gt;OFF&lt;/span&gt;, IGNORE_DUP_KEY &lt;span&gt;=&lt;/span&gt; &lt;span&gt;OFF&lt;/span&gt;, ALLOW_ROW_LOCKS  &lt;span&gt;=&lt;/span&gt; &lt;span&gt;ON&lt;/span&gt;, ALLOW_PAGE_LOCKS  &lt;span&gt;=&lt;/span&gt; &lt;span&gt;ON&lt;/span&gt;) &lt;span&gt;ON&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;PRIMARY&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;
) &lt;/span&gt;&lt;span&gt;ON&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;PRIMARY&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;æ·»åŠ æ•°æ®:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/104935/201802/104935-20180227164025767-2009220958.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;æµ‹è¯•ä»£ç :&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('3c57e69b-560d-4f41-84de-054c2a91cc92')&quot; readability=&quot;33&quot;&gt;&lt;img id=&quot;code_img_closed_3c57e69b-560d-4f41-84de-054c2a91cc92&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_3c57e69b-560d-4f41-84de-054c2a91cc92&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('3c57e69b-560d-4f41-84de-054c2a91cc92',event)&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_3c57e69b-560d-4f41-84de-054c2a91cc92&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;61&quot;&gt;
&lt;pre&gt;
 SqlConnection sqlConn = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; SqlConnection( sourceConnection) ;
            sqlConn.Open() ;
            SqlCommand commandSourceData &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; SqlCommand(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;select * from test_sqlbulk &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, sqlConn);
            SqlDataReader reader &lt;/span&gt;=&lt;span&gt; commandSourceData.ExecuteReader();

            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Set up the bulk copy object using the KeepIdentity option. &lt;/span&gt;
            &lt;span&gt;using&lt;/span&gt; (SqlBulkCopy bulkCopy = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; SqlBulkCopy(
                       sourceConnection))
            {
                bulkCopy.BatchSize &lt;/span&gt;= &lt;span&gt;2&lt;/span&gt;&lt;span&gt;;
                bulkCopy.DestinationTableName &lt;/span&gt;=
                    &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;dbo.test_sqlbulk_des&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;

                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Write from the source to the destination.
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; This should fail with a duplicate key error
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; after some of the batches have been copied.&lt;/span&gt;
                &lt;span&gt;try&lt;/span&gt;&lt;span&gt;
                {
                    bulkCopy.WriteToServer(reader);
                }
                &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Exception ex)
                {
                    Console.WriteLine(ex.Message);
                }
                &lt;/span&gt;&lt;span&gt;finally&lt;/span&gt;&lt;span&gt;
                {
                    reader.Close();
                }
            }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;

&lt;p&gt;å†çœ‹çœ‹ç›®æ ‡è¡¨ &lt;span&gt;test_sqlbulk_des&lt;/span&gt; ç»“æœ , ç”±äºSqlBulkCopyÂ  æ„é€ å‚æ•°æ²¡æœ‰ &lt;code class=&quot;lang-csharp&quot; data-src=&quot;https://github.com/dotnet/docs/blob/live/samples/snippets/csharp/VS_Snippets_ADO.NET/DataWorks%20SqlBulkCopy.DefaultTransaction/CS/source.cs&quot;&gt;KeepIdentity&lt;/code&gt; æ ‡è¯†ï¼Œç›®æ ‡è¡¨è‡ªå¢åˆ—ä¸æºè¡¨ä¸ä¸€è‡´ :&lt;/p&gt;
&lt;p&gt;&lt;span&gt;test_sqlbulk_des&lt;/span&gt; æŸ¥è¯¢ç»“æœ:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/104935/201802/104935-20180227164259728-453747350.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â =&amp;gt;è°ƒæ•´ä»£ç ï¼Œå¢åŠ  SqlBulkCopyOptions.KeepIdentity é€‰é¡¹ï¼Œå†æ¬¡å¯¼å…¥ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;36&quot;&gt;
&lt;pre class=&quot;brush:csharp;collapse:true;;gutter:true;&quot;&gt;
 using (SqlBulkCopy bulkCopy = new SqlBulkCopy(
                       sourceConnection, SqlBulkCopyOptions.KeepIdentity))
            {
                bulkCopy.BatchSize = 2;
                bulkCopy.DestinationTableName =
                    &quot;dbo.test_sqlbulk_des&quot;;

                // Write from the source to the destination.
                // This should fail with a duplicate key error
                // after some of the batches have been copied.
                try
                {
                    bulkCopy.WriteToServer(reader);
                }
                catch (Exception ex)
                {
                    Console.WriteLine(ex.Message);
                }
                finally
                {
                    reader.Close();
                }
            }
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Â =&amp;gt;ç›®æ ‡è¡¨ï¼Œæºè¡¨è‡ªå¢åˆ—ä¸€è‡´äº†:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/104935/201802/104935-20180227164806771-460219348.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;B. æµ‹è¯•æ— äº‹åŠ¡ï¼Œå†…éƒ¨äº‹åŠ¡ï¼ˆ&lt;code class=&quot;lang-csharp&quot; data-src=&quot;https://github.com/dotnet/docs/blob/live/samples/snippets/csharp/VS_Snippets_ADO.NET/DataWorks%20SqlBulkCopy.InternalTransaction/CS/source.cs&quot;&gt;SqlBulkCopyOptions.UseInternalTransaction&lt;/code&gt;ï¼‰ ï¼Œ å¤–éƒ¨ä¼ å…¥äº‹åŠ¡ ä¹‹é—´åŒºåˆ« ï¼Œ ä»¥ä¸‹æ‰€æœ‰æµ‹è¯•å‡äº‹å…ˆåœ¨ç›®æ ‡è¡¨ä¿ç•™ä¸€è¡Œæ•°æ® ä½¿copy è¿‡ç¨‹ä¸­é€ æˆä¸»é”®å†²çªï¼ŒæŸ¥çœ‹å›é€€æƒ…å†µã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1. æ— äº‹åŠ¡æµ‹è¯•ã€‚åˆä½¿åŒ–æºè¡¨ï¼Œç›®æ ‡è¡¨æ•°æ®:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/104935/201802/104935-20180227165529191-1910855416.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;æµ‹è¯•ä»£ç  ï¼Œ ä¸æ„å¤–ï¼Œå¦‚ä¸‹ä»£ç æœ€ç»ˆä¼šäº§ç”Ÿä¸»é”®å†²çªé”™è¯¯ï¼Œ æ‰§è¡Œç»“æŸåï¼Œå†æŸ¥è¯¢æºè¡¨ï¼Œç›®æ ‡è¡¨æ•°æ® ã€‚ BatchSize è®¾ç½®ä¸º2 , ç»“æœè¡¨æ˜åœ¨ç¬¬äºŒæ‰¹æ¬¡ä¸»é”®å†²çª, ç¬¬ä¸€æ‰¹æ¬¡æ•°æ®æˆåŠŸæäº¤äº†ï¼ˆæ²¡æœ‰æ˜¾ç¤ºå£°æ˜äº‹åŠ¡ï¼‰, å†å°† BatchSize è®¾ç½®ä¸º3 éªŒè¯ç»“æœã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;37&quot;&gt;
&lt;pre class=&quot;brush:csharp;collapse:true;;gutter:true;&quot;&gt;
 SqlConnection sqlConn = new SqlConnection( sourceConnection) ;
            sqlConn.Open() ;
            SqlCommand commandSourceData = new SqlCommand(&quot;select * from test_sqlbulk &quot;, sqlConn);
            SqlDataReader reader = commandSourceData.ExecuteReader();

            // Set up the bulk copy object using the KeepIdentity option. 
            using (SqlBulkCopy bulkCopy = new SqlBulkCopy(
                       sourceConnection, SqlBulkCopyOptions.KeepIdentity))
            {
                bulkCopy.BatchSize = 2;
                bulkCopy.DestinationTableName =
                    &quot;dbo.test_sqlbulk_des&quot;;

                // Write from the source to the destination.
                // This should fail with a duplicate key error
                // after some of the batches have been copied.
                try
                {
                    bulkCopy.WriteToServer(reader);
                }
                catch (Exception ex)
                {
                    Console.WriteLine(ex.Message);
                }
                finally
                {
                    reader.Close();
                }
            }
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;BatchSize = 2 ç»“æœ:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/104935/201802/104935-20180227165720819-571432489.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;BatchSize = 3 ç»“æœ:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/104935/201802/104935-20180227170149101-1402099223.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;


&lt;p&gt;2.æŒ‡å®šå†…éƒ¨äº‹åŠ¡ ï¼Œ åˆ†åˆ«å°† BatchSize æŒ‡å®šä¸º 2 , 3, 4Â  ã€‚å¦‚ä¸‹æ‰§è¡Œç»“æœä¸ä¸Šæ–‡ç¤ºä¾‹ ç»“æœä¸€è‡´ï¼Œ å› æ­¤æ— è®ºæ˜¯å¦æŒ‡å®š SqlBulkCopyOptions.UseInternalTransaction å‚æ•°ï¼ˆä¸åŒ…æ‹¬å¤–éƒ¨ä¼ å…¥äº‹åŠ¡ï¼‰ ï¼ŒSqlBulkCopy å†…éƒ¨æŒ‰ç…§ä¸€ä¸ªæ‰¹æ¬¡ä¸€ä¸ªäº‹åŠ¡ã€‚åœ¨å‡ºç°å¼‚å¸¸æ—¶åªå›æ»šå½“å‰æ‰¹æ¬¡ ï¼Œ åœ¨æ­¤ä¹‹å‰æˆåŠŸæ‰§è¡Œæ‰¹æ¬¡ä¸å›æ»šã€‚ å› æ­¤è‹¥éœ€å…¨éƒ¨å›é€€ï¼Œéœ€å°†Â  BatchSize è®¾ä¸º æ€»è®°å½•æ¡æ•° ï¼Œæ­¤æ—¶æ‰€æœ‰æ•°æ®åšä¸ºä¸€ä¸ªæ‰¹æ¬¡æäº¤ ï¼ŒÂ  å¼‚å¸¸å›é€€æ‰¹æ¬¡ï¼Œå›é€€æ•°æ®èŒƒå›´å³å…¨éƒ¨æ•°æ®ã€‚&lt;/p&gt;

&lt;p&gt;æµ‹è¯•ä»£ç ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;36&quot;&gt;
&lt;pre class=&quot;brush:csharp;collapse:true;;gutter:true;&quot;&gt;
 // Set up the bulk copy object using the KeepIdentity option. 
            using (SqlBulkCopy bulkCopy = new SqlBulkCopy(
                       sourceConnection, SqlBulkCopyOptions.KeepIdentity | SqlBulkCopyOptions.UseInternalTransaction))
            {
                bulkCopy.BatchSize = 2;
                bulkCopy.DestinationTableName =
                    &quot;dbo.test_sqlbulk_des&quot;;

                // Write from the source to the destination.
                // This should fail with a duplicate key error
                // after some of the batches have been copied.
                try
                {
                    bulkCopy.WriteToServer(reader);
                }
                catch (Exception ex)
                {
                    Console.WriteLine(ex.Message);
                }
                finally
                {
                    reader.Close();
                }
            }
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Â =&amp;gt;BatchSize = 2Â  , ç›®æ ‡è¡¨ç»“æœ:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/104935/201802/104935-20180227170658110-202907183.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â =&amp;gt;BatchSize = 3Â  , ç›®æ ‡è¡¨ç»“æœ:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/104935/201802/104935-20180227170742931-832589110.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;3. å¤–éƒ¨ä¼ å…¥äº‹åŠ¡å¯¹è±¡åœºæ™¯ , &lt;code&gt;å¦‚æœ ä½¿ç”¨&lt;code class=&quot;lang-csharp&quot; data-src=&quot;https://github.com/dotnet/docs/blob/live/samples/snippets/csharp/VS_Snippets_ADO.NET/DataWorks%20SqlBulkCopy.InternalTransaction/CS/source.cs&quot;&gt;SqlBulkCopy&lt;/code&gt;å…¥åº“æ“ä½œåªåšä¸ºæœ¬æ¬¡ä¸šåŠ¡å¤„ç†ä¸€ä¸ªå­é›†ï¼Œåœ¨æ•´ä¸ªä¸šåŠ¡å¤„ç†ç¯èŠ‚ä¸­å¼‚å¸¸æƒ…å†µï¼Œéœ€è¦å›æ»šæ•´ä¸ªä¸šåŠ¡æ“ä½œã€‚ æœ¬æ¬¡å†æ–°å»ºä¸€å¼ è¡¨:test_sqlbulk_update ï¼Œ æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œå…ˆå¯¹è¯¥è¡¨å¢åŠ ä¸€æ¡è®°å½•ï¼Œå†é‡å¤ä¹‹å‰å¼‚å¸¸åœºæ™¯ã€‚ ç»“æŸæ—¶ï¼Œä¹‹å‰æ–°å¢è®°å½•ä¹Ÿå›é€€äº†ã€‚&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å› æ­¤&lt;/strong&gt;ï¼Œ å½“å¤–éƒ¨ä¼ å…¥äº‹åŠ¡å¯¹è±¡æ—¶ï¼ŒSqlBulkCopyÂ  å†…éƒ¨ä¸æäº¤äº‹åŠ¡ï¼Œ åœ¨å¼‚å¸¸æƒ…å†µï¼Œæœ‰å¯èƒ½ä¼šè‡ªåŠ¨å›æ»šã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('0be46137-caf3-484f-a4c8-d7fd99ce7615')&quot; readability=&quot;32.5&quot;&gt;&lt;img id=&quot;code_img_closed_0be46137-caf3-484f-a4c8-d7fd99ce7615&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_0be46137-caf3-484f-a4c8-d7fd99ce7615&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('0be46137-caf3-484f-a4c8-d7fd99ce7615',event)&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_0be46137-caf3-484f-a4c8-d7fd99ce7615&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;60&quot;&gt;
&lt;pre&gt;
&lt;span&gt;CREATE&lt;/span&gt; &lt;span&gt;TABLE&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;.&lt;span&gt;[&lt;/span&gt;&lt;span&gt;test_sqlbulk_update&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;(
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;IDENTITY&lt;/span&gt;(&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;1&lt;/span&gt;) &lt;span&gt;NOT&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;b&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;41&quot;&gt;
&lt;pre class=&quot;brush:csharp;collapse:true;;gutter:true;&quot;&gt;
SqlConnection sqlConn = new SqlConnection( sourceConnection) ;
            sqlConn.Open() ;

            SqlTransaction tran = sqlConn.BeginTransaction();

            SqlCommand commandInsert = new SqlCommand(&quot;insert into [test_sqlbulk_update]( b ) values (1) &quot;, sqlConn, tran);

            int result = commandInsert.ExecuteNonQuery();

            SqlCommand commandSourceData = new SqlCommand(&quot;select * from test_sqlbulk &quot;, sqlConn, tran);
            
            SqlDataReader reader = commandSourceData.ExecuteReader();
            
            // Set up the bulk copy object using the KeepIdentity option. 
            using (SqlBulkCopy bulkCopy = new SqlBulkCopy(sqlConn, SqlBulkCopyOptions.KeepIdentity, tran))
            {
                bulkCopy.BatchSize = 2;
                bulkCopy.DestinationTableName =
                    &quot;dbo.test_sqlbulk_des&quot;;

                // Write from the source to the destination.
                // This should fail with a duplicate key error
                // after some of the batches have been copied.
                try
                {
                    bulkCopy.WriteToServer(reader);
                    reader.Close();
                    tran.Commit();
                }
                catch (Exception ex)
                {
                    reader.Close();
                    tran.Rollback();&lt;br/&gt;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€// tran.Commit(); å¼‚å¸¸ä»æäº¤æ‰§è¡Œï¼ŒåŒæ—¶æ³¨é‡Šä¸Šä¸€è¡Œã€‚
                }
               
            }
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Â =&amp;gt; å¼‚å¸¸æ—¶æ‰§è¡Œ rollbackï¼Œ æœ€ç»ˆç»“æœ:æ²¡åšä»»ä½•ä¿®æ”¹.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/104935/201802/104935-20180227173314553-2039327166.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;=&amp;gt; å¤–éƒ¨äº‹åŠ¡ï¼ŒCatch ä¸­æ‰§è¡Œ Commint ,å‘ç”Ÿå¼‚å¸¸ï¼Œå› ä¸ºè‡ªåŠ¨å›æ»šäº†ï¼Œä½†åœ¨Catch æ‰§è¡Œ Rollback æ— å¼‚å¸¸ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('0aa13ab7-6009-404d-8584-54e75d7c5daa')&quot; readability=&quot;35&quot;&gt;&lt;img id=&quot;code_img_closed_0aa13ab7-6009-404d-8584-54e75d7c5daa&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_0aa13ab7-6009-404d-8584-54e75d7c5daa&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('0aa13ab7-6009-404d-8584-54e75d7c5daa',event)&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_0aa13ab7-6009-404d-8584-54e75d7c5daa&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;65&quot;&gt;
&lt;pre&gt;
SqlTransaction tran =&lt;span&gt; sqlConn.BeginTransaction();


            SqlCommand commandSourceData &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; SqlCommand(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;select * from test_sqlbulk &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;new&lt;/span&gt;&lt;span&gt; SqlConnection(sourceConnection));
            
            SqlDataAdapter ada &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; SqlDataAdapter(commandSourceData ) ;
            System.Data.DataSet ds &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; System.Data.DataSet();
            ada.Fill(ds);
            
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Set up the bulk copy object using the KeepIdentity option. &lt;/span&gt;
            &lt;span&gt;using&lt;/span&gt; (SqlBulkCopy bulkCopy = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; SqlBulkCopy(sqlConn, SqlBulkCopyOptions.KeepIdentity, tran))
            {
                bulkCopy.BatchSize &lt;/span&gt;= &lt;span&gt;2&lt;/span&gt;&lt;span&gt;;
                bulkCopy.DestinationTableName &lt;/span&gt;=
                    &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;dbo.test_sqlbulk_des&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;

                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Write from the source to the destination.
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; This should fail with a duplicate key error
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; after some of the batches have been copied.&lt;/span&gt;
                &lt;span&gt;try&lt;/span&gt;&lt;span&gt;
                {
                    
                    bulkCopy.WriteToServer(ds.Tables[&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;]);

                    SqlCommand commandInsert &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; SqlCommand(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;insert into [test_sqlbulk_update]( b ) values ('a') &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, sqlConn, tran);

                    &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; result =&lt;span&gt; commandInsert.ExecuteNonQuery();


                    tran.Commit();
                }
                &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Exception ex)
                {
                    tran.Commit();
                }
               
            }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/104935/201802/104935-20180227184130459-1398019973.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

</description>
<pubDate>Tue, 27 Feb 2018 09:41:00 +0000</pubDate>
<dc:creator>ä»°å…‰</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/a_bu/p/8480111.html</dc:identifier>
</item>
<item>
<title>å·ç§¯ç¥ç»ç½‘ç»œ(CNN)åœ¨å¥å­å»ºæ¨¡ä¸Šçš„åº”ç”¨ - ç¬¨å…”å‹¿åº”</title>
<link>http://www.cnblogs.com/bentuwuying/p/8480045.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/bentuwuying/p/8480045.html</guid>
<description>&lt;p&gt;ä¹‹å‰çš„åšæ–‡å·²ç»ä»‹ç»äº†CNNçš„åŸºæœ¬åŸç†ï¼Œæœ¬æ–‡å°†å¤§æ¦‚æ€»ç»“ä¸€ä¸‹æœ€è¿‘CNNåœ¨NLPä¸­çš„å¥å­å»ºæ¨¡ï¼ˆæˆ–è€…å¥å­è¡¨ç¤ºï¼‰æ–¹é¢çš„åº”ç”¨æƒ…å†µï¼Œä¸»è¦é˜…è¯»äº†ä»¥ä¸‹çš„æ–‡çŒ®ï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;34&quot;&gt;
&lt;p&gt;Kim Y. Convolutional neural networks for sentence classification[J]. arXiv preprint arXiv:1408.5882, 2014.&lt;/p&gt;
&lt;p&gt;Kalchbrenner N, Grefenstette E, Blunsom P. A convolutional neural network for modelling sentences[J]. arXiv preprint arXiv:1404.2188, 2014.&lt;/p&gt;
&lt;p&gt;Hu B, Lu Z, Li H, et al. Convolutional neural network architectures for matching natural language sentences[C]//Advances in Neural Information Processing Systems. 2014: 2042-2050.&lt;/p&gt;
&lt;p&gt;He H, Gimpel K, Lin J. Multi-perspective sentence similarity modeling with convolutional neural networks[C]//Proceedings of the 2015 Conference on Empirical Methods in Natural Language Processing. 2015: 1576-1586.&lt;/p&gt;
&lt;p&gt;Wenpeng Yin, Hinrich SchÃ¼tze. Convolutional Neural Network for Paraphrase Identification. The 2015 Conference of the North American Chapter of the Association for Computational Linguistics&lt;/p&gt;
&lt;p&gt;Zhang Y, Wallace B. A Sensitivity Analysis of (and Practitionersâ€™ Guide to) Convolutional Neural Networks for Sentence Classification[J]. arXiv preprint arXiv:1510.03820, 2015.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸‹é¢å¯¹æ–‡çŒ®ä¸­CNNçš„ç»“æ„å’Œç»†èŠ‚è¿›è¡Œæ¢³ç†ã€‚&lt;/p&gt;
&lt;hr/&gt;&lt;h3 id=&quot;Kim_Yâ€™s_Paper&quot;&gt;Kim Yâ€™s Paper&lt;/h3&gt;
&lt;h4 id=&quot;æ¨¡å‹ç»“æ„åŠåŸç†&quot;&gt;æ¨¡å‹ç»“æ„åŠåŸç†&lt;/h4&gt;
&lt;p&gt;æ¨¡å‹çš„ç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://i.imgur.com/yxoZDt9.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://i.imgur.com/yxoZDt9.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è¯´æ˜å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p class=&quot; has-jax has-jax has-jax&quot;&gt;å¦‚å›¾æ‰€ç¤ºï¼Œè¾“å…¥å±‚æ˜¯å¥å­ä¸­çš„è¯è¯­å¯¹åº”çš„word vectorä¾æ¬¡ï¼ˆä»ä¸Šåˆ°ä¸‹ï¼‰æ’åˆ—çš„çŸ©é˜µï¼Œå‡è®¾å¥å­æœ‰Â &lt;span id=&quot;MathJax-Element-1-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;n&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-1&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-2&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-3&quot; class=&quot;mi&quot;&gt;nÂ &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;ä¸ªè¯ï¼Œvectorçš„ç»´æ•°ä¸ºÂ &lt;span id=&quot;MathJax-Element-2-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-4&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-5&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-6&quot; class=&quot;mi&quot;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Â ï¼Œé‚£ä¹ˆè¿™ä¸ªçŸ©é˜µå°±æ˜¯Â &lt;span id=&quot;MathJax-Element-3-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;n&amp;lt;/mi&amp;gt;&amp;lt;mo&amp;gt;&amp;amp;#xD7;&amp;lt;/mo&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-7&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-8&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-9&quot; class=&quot;mi&quot;&gt;n&lt;span id=&quot;MathJax-Span-10&quot; class=&quot;mo&quot;&gt;Ã—&lt;span id=&quot;MathJax-Span-11&quot; class=&quot;mi&quot;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Â çš„ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªçŸ©é˜µçš„ç±»å‹å¯ä»¥æ˜¯é™æ€çš„(static)ï¼Œä¹Ÿå¯ä»¥æ˜¯åŠ¨æ€çš„(non static)ã€‚é™æ€å°±æ˜¯word vectoræ˜¯å›ºå®šä¸å˜çš„ï¼Œè€ŒåŠ¨æ€åˆ™æ˜¯åœ¨æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œword vectorä¹Ÿå½“åšæ˜¯å¯ä¼˜åŒ–çš„å‚æ•°ï¼Œé€šå¸¸æŠŠåå‘è¯¯å·®ä¼ æ’­å¯¼è‡´word vectorä¸­å€¼å‘ç”Ÿå˜åŒ–çš„è¿™ä¸€è¿‡ç¨‹ç§°ä¸º&lt;strong&gt;&lt;code&gt;Fine tune&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºæœªç™»å½•è¯çš„vectorï¼Œå¯ä»¥ç”¨0æˆ–è€…éšæœºå°çš„æ­£æ•°æ¥å¡«å……ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;ç¬¬ä¸€å±‚å·ç§¯å±‚&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p class=&quot; has-jax has-jax has-jax&quot;&gt;è¾“å…¥å±‚é€šè¿‡å·ç§¯æ“ä½œå¾—åˆ°è‹¥å¹²ä¸ª&lt;code&gt;Feature Map&lt;/code&gt;ï¼Œå·ç§¯çª—å£çš„å¤§å°ä¸ºÂ &lt;span id=&quot;MathJax-Element-4-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;h&amp;lt;/mi&amp;gt;&amp;lt;mo&amp;gt;&amp;amp;#xD7;&amp;lt;/mo&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-12&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-13&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-14&quot; class=&quot;mi&quot;&gt;h&lt;span id=&quot;MathJax-Span-15&quot; class=&quot;mo&quot;&gt;Ã—&lt;span id=&quot;MathJax-Span-16&quot; class=&quot;mi&quot;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Â ï¼Œå…¶ä¸­Â &lt;span id=&quot;MathJax-Element-5-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;h&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-17&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-18&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-19&quot; class=&quot;mi&quot;&gt;h&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Â è¡¨ç¤ºçºµå‘è¯è¯­çš„ä¸ªæ•°ï¼Œè€ŒÂ &lt;span id=&quot;MathJax-Element-6-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-20&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-21&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-22&quot; class=&quot;mi&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;kÂ è¡¨ç¤ºword vectorçš„ç»´æ•°ã€‚é€šè¿‡è¿™æ ·ä¸€ä¸ªå¤§å‹çš„å·ç§¯çª—å£ï¼Œå°†å¾—åˆ°è‹¥å¹²ä¸ªåˆ—æ•°ä¸º1çš„&lt;code&gt;Feature Map&lt;/code&gt;ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥çš„æ± åŒ–å±‚ï¼Œæ–‡ä¸­ç”¨äº†ä¸€ç§ç§°ä¸º&lt;strong&gt;&lt;code&gt;Max-over-time Pooling&lt;/code&gt;&lt;/strong&gt;çš„æ–¹æ³•ã€‚è¿™ç§æ–¹æ³•å°±æ˜¯ç®€å•åœ°ä»ä¹‹å‰ä¸€ç»´çš„&lt;code&gt;Feature Map&lt;/code&gt;ä¸­æå‡ºæœ€å¤§çš„å€¼ï¼Œæ–‡ä¸­è§£é‡Šæœ€å¤§å€¼ä»£è¡¨ç€æœ€é‡è¦çš„ä¿¡å·ã€‚å¯ä»¥çœ‹å‡ºï¼Œè¿™ç§Poolingæ–¹å¼å¯ä»¥è§£å†³å¯å˜é•¿åº¦çš„å¥å­è¾“å…¥é—®é¢˜ï¼ˆå› ä¸ºä¸ç®¡&lt;code&gt;Feature Map&lt;/code&gt;ä¸­æœ‰å¤šå°‘ä¸ªå€¼ï¼Œåªéœ€è¦æå–å…¶ä¸­çš„æœ€å¤§å€¼ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æœ€ç»ˆæ± åŒ–å±‚çš„è¾“å‡ºä¸ºå„ä¸ª&lt;code&gt;Feature Map&lt;/code&gt;çš„æœ€å¤§å€¼ä»¬ï¼Œå³ä¸€ä¸ªä¸€ç»´çš„å‘é‡ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;å…¨è¿æ¥ + Softmaxå±‚&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æ± åŒ–å±‚çš„ä¸€ç»´å‘é‡çš„è¾“å‡ºé€šè¿‡å…¨è¿æ¥çš„æ–¹å¼ï¼Œè¿æ¥ä¸€ä¸ªSoftmaxå±‚ï¼ŒSoftmaxå±‚å¯æ ¹æ®ä»»åŠ¡çš„éœ€è¦è®¾ç½®ï¼ˆé€šå¸¸åæ˜ ç€æœ€ç»ˆç±»åˆ«ä¸Šçš„æ¦‚ç‡åˆ†å¸ƒï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æœ€ç»ˆå®ç°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å€’æ•°ç¬¬äºŒå±‚çš„å…¨è¿æ¥éƒ¨åˆ†ä¸Šä½¿ç”¨&lt;code&gt;Dropout&lt;/code&gt;æŠ€æœ¯ï¼Œå³å¯¹å…¨è¿æ¥å±‚ä¸Šçš„æƒå€¼å‚æ•°ç»™äºˆ&lt;strong&gt;&lt;code&gt;L2æ­£åˆ™åŒ–&lt;/code&gt;&lt;/strong&gt;çš„é™åˆ¶ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯é˜²æ­¢éšè—å±‚å•å…ƒè‡ªé€‚åº”ï¼ˆæˆ–è€…å¯¹ç§°ï¼‰ï¼Œä»è€Œå‡è½»è¿‡æ‹Ÿåˆçš„ç¨‹åº¦ã€‚&lt;/p&gt;
&lt;h4 id=&quot;å®éªŒéƒ¨åˆ†&quot;&gt;å®éªŒéƒ¨åˆ†&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;1. æ•°æ®&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å®éªŒç”¨åˆ°çš„æ•°æ®é›†å¦‚ä¸‹ï¼ˆå…·ä½“çš„åç§°å’Œæ¥æºå¯ä»¥å‚è€ƒè®ºæ–‡ï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://i.imgur.com/8VDJDDJ.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://i.imgur.com/8VDJDDJ.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2. æ¨¡å‹è®­ç»ƒå’Œè°ƒå‚&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä¿®æ­£çº¿æ€§å•å…ƒ(Rectified linear units)&lt;/li&gt;
&lt;li&gt;æ»¤æ³¢å™¨çš„hå¤§å°ï¼š3,4,5ï¼›å¯¹åº”çš„Feature Mapçš„æ•°é‡ä¸º100ï¼›&lt;/li&gt;
&lt;li&gt;Dropoutç‡ä¸º0.5ï¼ŒL2æ­£åˆ™åŒ–é™åˆ¶æƒå€¼å¤§å°ä¸è¶…è¿‡3ï¼›&lt;/li&gt;
&lt;li&gt;mini-batchçš„å¤§å°ä¸º50ï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;è¿™äº›å‚æ•°çš„é€‰æ‹©éƒ½æ˜¯åŸºäºSST-2 devæ•°æ®é›†ï¼Œé€šè¿‡ç½‘æ ¼æœç´¢æ–¹æ³•(Grid Search)å¾—åˆ°çš„æœ€ä¼˜å‚æ•°ã€‚å¦å¤–ï¼Œè®­ç»ƒè¿‡ç¨‹ä¸­é‡‡ç”¨éšæœºæ¢¯åº¦ä¸‹é™æ–¹æ³•ï¼ŒåŸºäºshuffled mini-batchesä¹‹ä¸Šçš„ï¼Œä½¿ç”¨äº†Adadelta update rule(Zeiler, 2012)ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3. é¢„è®­ç»ƒçš„Word Vector&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œçš„word vectorä½¿ç”¨çš„æ˜¯å…¬å¼€çš„æ•°æ®ï¼Œå³è¿ç»­è¯è¢‹æ¨¡å‹(COW)åœ¨Google Newsä¸Šçš„è®­ç»ƒç»“æœã€‚æœªç™»å½•æ¬¡çš„vectorå€¼æ˜¯éšæœºåˆå§‹åŒ–çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4. å®éªŒç»“æœ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å®éªŒç»“æœå¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://i.imgur.com/sNpll24.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://i.imgur.com/sNpll24.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å…¶ä¸­ï¼Œå‰å››ä¸ªæ¨¡å‹æ˜¯ä¸Šæ–‡ä¸­æ‰€æå‡ºçš„åŸºæœ¬æ¨¡å‹çš„å„ä¸ªå˜ç§ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;CNN-rand&lt;/strong&gt;: æ‰€æœ‰çš„word vectoréƒ½æ˜¯éšæœºåˆå§‹åŒ–çš„ï¼ŒåŒæ—¶å½“åšè®­ç»ƒè¿‡ç¨‹ä¸­ä¼˜åŒ–çš„å‚æ•°ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CNN-static&lt;/strong&gt;: æ‰€æœ‰çš„word vectorç›´æ¥ä½¿ç”¨æ— ç›‘ç£å­¦ä¹ å³Googleçš„Word2Vectorå·¥å…·(COWæ¨¡å‹)å¾—åˆ°çš„ç»“æœï¼Œå¹¶ä¸”æ˜¯å›ºå®šä¸å˜çš„ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CNN-non-static&lt;/strong&gt;: æ‰€æœ‰çš„word vectorç›´æ¥ä½¿ç”¨æ— ç›‘ç£å­¦ä¹ å³Googleçš„Word2Vectorå·¥å…·(COWæ¨¡å‹)å¾—åˆ°çš„ç»“æœï¼Œä½†æ˜¯ä¼šåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­è¢«&lt;code&gt;Fine tuned&lt;/code&gt;ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CNN-multichannel&lt;/strong&gt;: CNN-staticå’ŒCNN-non-staticçš„æ··åˆç‰ˆæœ¬ï¼Œå³ä¸¤ç§ç±»å‹çš„è¾“å…¥ï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;åšä¸»è‡ªå·±ä¸‹è½½äº†è®ºæ–‡ä½œè€…çš„å®ç°ç¨‹åº(&lt;a href=&quot;https://github.com/yoonkim/CNN_sentence&quot; rel=&quot;external&quot; target=&quot;_blank&quot;&gt;&lt;strong&gt;Githubåœ°å€&lt;/strong&gt;&lt;/a&gt;)ï¼Œæœ€ç»ˆåœ¨MRæ•°æ®é›†ä¸Šçš„è¿è¡Œç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;CNN-rand: 0.7669&lt;/li&gt;
&lt;li&gt;CNN-static: 0.8076&lt;/li&gt;
&lt;li&gt;CNN-non-static: 0.8151&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å’Œè®ºæ–‡ä¸­çš„ç»“æœå·®ä¸å¤šã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;5. ç»“è®º&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;&lt;code&gt;CNN-static&lt;/code&gt;&lt;/strong&gt;è¾ƒä¸&lt;strong&gt;&lt;code&gt;CNN-rand&lt;/code&gt;&lt;/strong&gt;å¥½ï¼Œ&lt;strong&gt;è¯´æ˜pre-trainingçš„word vectorç¡®å®æœ‰è¾ƒå¤§çš„æå‡ä½œç”¨&lt;/strong&gt;ï¼ˆè¿™ä¹Ÿéš¾æ€ªï¼Œå› ä¸ºpre-trainingçš„word vectoræ˜¾ç„¶åˆ©ç”¨äº†æ›´å¤§è§„æ¨¡çš„æ–‡æœ¬æ•°æ®ä¿¡æ¯ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;CNN-non-static&lt;/code&gt;&lt;/strong&gt;è¾ƒäº&lt;strong&gt;&lt;code&gt;CNN-static&lt;/code&gt;&lt;/strong&gt;å¤§éƒ¨åˆ†è¦å¥½ï¼Œ&lt;strong&gt;è¯´æ˜é€‚å½“çš„Fine tuneä¹Ÿæ˜¯æœ‰åˆ©çš„ï¼Œæ˜¯å› ä¸ºä½¿å¾—vectorsæ›´åŠ è´´è¿‘äºå…·ä½“çš„ä»»åŠ¡&lt;/strong&gt;ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;CNN-multichannel&lt;/code&gt;&lt;/strong&gt;è¾ƒäº&lt;strong&gt;&lt;code&gt;CNN-single&lt;/code&gt;&lt;/strong&gt;åœ¨å°è§„æ¨¡çš„æ•°æ®é›†ä¸Šæœ‰æ›´å¥½çš„è¡¨ç°ï¼Œå®é™…ä¸Š&lt;strong&gt;&lt;code&gt;CNN-multichannel&lt;/code&gt;&lt;/strong&gt;ä½“ç°äº†ä¸€ç§æŠ˜ä¸­æ€æƒ³ï¼Œå³æ—¢ä¸å¸Œæœ›Fine tunedçš„vectorè·ç¦»åŸå§‹å€¼å¤ªè¿œï¼Œä½†åŒæ—¶ä¿ç•™å…¶ä¸€å®šçš„å˜åŒ–ç©ºé—´ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œstaticçš„vectorå’Œnon-staticçš„ç›¸æ¯”ï¼Œæœ‰ä¸€äº›æœ‰æ„æ€çš„ç°è±¡å¦‚ä¸‹è¡¨æ ¼ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://i.imgur.com/fW6pr0p.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://i.imgur.com/fW6pr0p.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;åŸå§‹çš„word2vectorè®­ç»ƒç»“æœä¸­ï¼Œ&lt;code&gt;bad&lt;/code&gt;å¯¹åº”çš„æœ€ç›¸è¿‘è¯ä¸º&lt;code&gt;good&lt;/code&gt;ï¼ŒåŸå› æ˜¯è¿™ä¸¤ä¸ªè¯åœ¨å¥æ³•ä¸Šçš„ä½¿ç”¨æ˜¯æå…¶ç±»ä¼¼çš„ï¼ˆå¯ä»¥ç®€å•æ›¿æ¢ï¼Œä¸ä¼šå‡ºç°è¯­å¥æ¯›ç—…ï¼‰ï¼›è€Œåœ¨&lt;code&gt;non-static&lt;/code&gt;çš„ç‰ˆæœ¬ä¸­ï¼Œ&lt;code&gt;bad&lt;/code&gt;å¯¹åº”çš„æœ€ç›¸è¿‘è¯ä¸º&lt;code&gt;terrible&lt;/code&gt;ï¼Œè¿™æ˜¯å› ä¸ºåœ¨&lt;code&gt;Fune tune&lt;/code&gt;çš„è¿‡ç¨‹ä¸­ï¼Œvectorçš„å€¼å‘ç”Ÿæ”¹å˜ä»è€Œæ›´åŠ è´´åˆ‡æ•°æ®é›†ï¼ˆæ˜¯ä¸€ä¸ªæƒ…æ„Ÿåˆ†ç±»çš„æ•°æ®é›†ï¼‰ï¼Œæ‰€ä»¥åœ¨æƒ…æ„Ÿè¡¨è¾¾çš„è§’åº¦è¿™ä¸¤ä¸ªè¯ä¼šæ›´åŠ æ¥è¿‘ï¼›&lt;/li&gt;
&lt;li&gt;å¥å­ä¸­çš„&lt;strong&gt;&lt;code&gt;!&lt;/code&gt;&lt;/strong&gt;æœ€æ¥è¿‘ä¸€äº›è¡¨è¾¾å½¢å¼è¾ƒä¸ºæ¿€è¿›çš„è¯æ±‡ï¼Œå¦‚&lt;code&gt;lush&lt;/code&gt;ç­‰ï¼›è€Œ&lt;strong&gt;&lt;code&gt;,&lt;/code&gt;&lt;/strong&gt;åˆ™æ¥è¿‘äºä¸€äº›è¿æ¥è¯ï¼Œè¿™å’Œæˆ‘ä»¬çš„ä¸»è§‚æ„Ÿå—ä¹Ÿæ˜¯ç›¸ç¬¦çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Kim Yçš„è¿™ä¸ªæ¨¡å‹å¾ˆç®€å•ï¼Œä½†æ˜¯å´æœ‰ç€å¾ˆå¥½çš„æ€§èƒ½ã€‚åç»­Dennyç”¨TensorFlowå®ç°äº†è¿™ä¸ªæ¨¡å‹çš„ç®€å•ç‰ˆæœ¬ï¼Œå¯å‚è€ƒ&lt;strong&gt;&lt;a href=&quot;http://www.wildml.com/2015/12/implementing-a-cnn-for-text-classification-in-tensorflow/&quot; rel=&quot;external&quot; target=&quot;_blank&quot;&gt;è¿™ç¯‡åšæ–‡&lt;/a&gt;&lt;/strong&gt;ï¼›ä»¥åŠYe Zhangç­‰äººå¯¹è¿™ä¸ªæ¨¡å‹è¿›è¡Œäº†å¤§é‡çš„å®éªŒï¼Œå¹¶ç»™å‡ºäº†è°ƒå‚çš„å»ºè®®ï¼Œå¯å‚è€ƒ&lt;strong&gt;&lt;a href=&quot;http://arxiv.org/abs/1510.03820&quot; rel=&quot;external&quot; target=&quot;_blank&quot;&gt;è¿™ç¯‡è®ºæ–‡&lt;/a&gt;&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ€»ç»“ä¸€ä¸‹Ye Zhangç­‰äººåŸºäºKim Yçš„æ¨¡å‹åšäº†å¤§é‡çš„è°ƒå‚å®éªŒä¹‹åçš„ç»“è®ºï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ç”±äºæ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­çš„éšæœºæ€§å› ç´ ï¼Œå¦‚éšæœºåˆå§‹åŒ–çš„æƒé‡å‚æ•°ï¼Œmini-batchï¼Œéšæœºæ¢¯åº¦ä¸‹é™ä¼˜åŒ–ç®—æ³•ç­‰ï¼Œé€ æˆæ¨¡å‹åœ¨æ•°æ®é›†ä¸Šçš„ç»“æœæœ‰ä¸€å®šçš„æµ®åŠ¨ï¼Œå¦‚å‡†ç¡®ç‡(accuracy)èƒ½è¾¾åˆ°1.5%çš„æµ®åŠ¨ï¼Œè€ŒAUCåˆ™æœ‰3.4%çš„æµ®åŠ¨ï¼›&lt;/li&gt;
&lt;li&gt;è¯å‘é‡æ˜¯ä½¿ç”¨word2vecè¿˜æ˜¯GloVeï¼Œå¯¹å®éªŒç»“æœæœ‰ä¸€å®šçš„å½±å“ï¼Œå…·ä½“å“ªä¸ªæ›´å¥½ä¾èµ–äºä»»åŠ¡æœ¬èº«ï¼›&lt;/li&gt;
&lt;li&gt;Filterçš„å¤§å°å¯¹æ¨¡å‹æ€§èƒ½æœ‰è¾ƒå¤§çš„å½±å“ï¼Œå¹¶ä¸”Filterçš„å‚æ•°åº”è¯¥æ˜¯å¯ä»¥æ›´æ–°çš„ï¼›&lt;/li&gt;
&lt;li&gt;Feature Mapçš„æ•°é‡ä¹Ÿæœ‰ä¸€å®šå½±å“ï¼Œä½†æ˜¯éœ€è¦å…¼é¡¾æ¨¡å‹çš„è®­ç»ƒæ•ˆç‡ï¼›&lt;/li&gt;
&lt;li&gt;1-max poolingçš„æ–¹å¼å·²ç»è¶³å¤Ÿå¥½äº†ï¼Œç›¸æ¯”äºå…¶ä»–çš„poolingæ–¹å¼è€Œè¨€ï¼›&lt;/li&gt;
&lt;li&gt;æ­£åˆ™åŒ–çš„ä½œç”¨å¾®ä¹å…¶å¾®ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Ye Zhangç­‰äººç»™äºˆæ¨¡å‹è°ƒå‚è€…çš„å»ºè®®å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä½¿ç”¨&lt;strong&gt;&lt;code&gt;non-static&lt;/code&gt;&lt;/strong&gt;ç‰ˆæœ¬çš„&lt;strong&gt;&lt;code&gt;word2vec&lt;/code&gt;&lt;/strong&gt;æˆ–è€…&lt;strong&gt;&lt;code&gt;GloVe&lt;/code&gt;&lt;/strong&gt;è¦æ¯”å•çº¯çš„&lt;code&gt;one-hot representation&lt;/code&gt;å–å¾—çš„æ•ˆæœå¥½å¾—å¤šï¼›&lt;/li&gt;
&lt;li&gt;ä¸ºäº†æ‰¾åˆ°æœ€ä¼˜çš„è¿‡æ»¤å™¨(Filter)å¤§å°ï¼Œå¯ä»¥ä½¿ç”¨çº¿æ€§æœç´¢çš„æ–¹æ³•ã€‚é€šå¸¸è¿‡æ»¤å™¨çš„å¤§å°èŒƒå›´åœ¨&lt;strong&gt;&lt;code&gt;1-10&lt;/code&gt;&lt;/strong&gt;ä¹‹é—´ï¼Œå½“ç„¶å¯¹äºé•¿å¥ï¼Œä½¿ç”¨æ›´å¤§çš„è¿‡æ»¤å™¨ä¹Ÿæ˜¯æœ‰å¿…è¦çš„ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Feature Map&lt;/code&gt;&lt;/strong&gt;çš„æ•°é‡åœ¨&lt;strong&gt;&lt;code&gt;100-600&lt;/code&gt;&lt;/strong&gt;ä¹‹é—´ï¼›&lt;/li&gt;
&lt;li&gt;å¯ä»¥å°½é‡å¤šå°è¯•æ¿€æ´»å‡½æ•°ï¼Œå®éªŒå‘ç°&lt;strong&gt;&lt;code&gt;ReLU&lt;/code&gt;&lt;/strong&gt;å’Œ&lt;strong&gt;&lt;code&gt;tanh&lt;/code&gt;&lt;/strong&gt;ä¸¤ç§æ¿€æ´»å‡½æ•°è¡¨ç°è¾ƒä½³ï¼›&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ç®€å•çš„&lt;strong&gt;&lt;code&gt;1-max pooling&lt;/code&gt;&lt;/strong&gt;å°±å·²ç»è¶³å¤Ÿäº†ï¼Œå¯ä»¥æ²¡å¿…è¦è®¾ç½®å¤ªå¤æ‚çš„poolingæ–¹å¼ï¼›&lt;/li&gt;
&lt;li&gt;å½“å‘ç°å¢åŠ &lt;code&gt;Feature Map&lt;/code&gt;çš„æ•°é‡ä½¿å¾—æ¨¡å‹çš„æ€§èƒ½ä¸‹é™æ—¶ï¼Œå¯ä»¥è€ƒè™‘å¢å¤§æ­£åˆ™çš„åŠ›åº¦ï¼Œå¦‚è°ƒé«˜&lt;code&gt;dropout&lt;/code&gt;çš„æ¦‚ç‡ï¼›&lt;/li&gt;
&lt;li&gt;ä¸ºäº†æ£€éªŒæ¨¡å‹çš„æ€§èƒ½æ°´å¹³ï¼Œå¤šæ¬¡åå¤çš„äº¤å‰éªŒè¯æ˜¯å¿…è¦çš„ï¼Œè¿™å¯ä»¥ç¡®ä¿æ¨¡å‹çš„é«˜æ€§èƒ½å¹¶ä¸æ˜¯å¶ç„¶ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;è®ºæ–‡é™„å½•ä¸­è¿˜é™„ä¸Šäº†å„ç§è°ƒå‚ç»“æœï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å‰å¾€é˜…è¯»ä¹‹ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Kalchbrennerâ€™s_Paper&quot;&gt;Kalchbrennerâ€™s Paper&lt;/h3&gt;
&lt;p&gt;Kalçš„è¿™ç¯‡æ–‡ç« å¼•ç”¨æ¬¡æ•°è¾ƒé«˜ï¼Œä»–æå‡ºäº†ä¸€ç§åä¸ºDCNN(Dynamic Convolutional Neural Network)çš„ç½‘ç»œæ¨¡å‹ï¼Œåœ¨ä¸Šä¸€ç¯‡ï¼ˆKimâ€™s Paperï¼‰ä¸­çš„å®éªŒç»“æœéƒ¨åˆ†ä¹ŸéªŒè¯äº†è¿™ç§æ¨¡å‹çš„æœ‰æ•ˆæ€§ã€‚è¿™ä¸ªæ¨¡å‹çš„ç²¾å¦™ä¹‹å¤„åœ¨äºPoolingçš„æ–¹å¼ï¼Œä½¿ç”¨äº†ä¸€ç§ç§°ä¸º&lt;strong&gt;&lt;code&gt;åŠ¨æ€Pooling&lt;/code&gt;&lt;/strong&gt;çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹å›¾æ˜¯è¿™ä¸ªæ¨¡å‹å¯¹å¥å­è¯­ä¹‰å»ºæ¨¡çš„è¿‡ç¨‹ï¼Œå¯ä»¥çœ‹åˆ°åº•å±‚é€šè¿‡ç»„åˆé‚»è¿‘çš„è¯è¯­ä¿¡æ¯ï¼Œé€æ­¥å‘ä¸Šä¼ é€’ï¼Œä¸Šå±‚åˆ™åˆç»„åˆæ–°çš„Phraseä¿¡æ¯ï¼Œä»è€Œä½¿å¾—å¥å­ä¸­å³ä½¿ç›¸ç¦»è¾ƒè¿œçš„è¯è¯­ä¹Ÿæœ‰äº¤äº’è¡Œä¸ºï¼ˆæˆ–è€…æŸç§è¯­ä¹‰è”ç³»ï¼‰ã€‚ä»ç›´è§‚ä¸Šæ¥çœ‹ï¼Œè¿™ä¸ªæ¨¡å‹èƒ½å¤Ÿé€šè¿‡è¯è¯­çš„ç»„åˆï¼Œæå–å‡ºå¥å­ä¸­é‡è¦çš„è¯­ä¹‰ä¿¡æ¯ï¼ˆé€šè¿‡Poolingï¼‰ï¼ŒæŸç§æ„ä¹‰ä¸Šæ¥è¯´ï¼Œå±‚æ¬¡ç»“æ„çš„&lt;strong&gt;&lt;code&gt;feature graph&lt;/code&gt;&lt;/strong&gt;çš„ä½œç”¨ç±»ä¼¼äºä¸€æ£µè¯­æ³•è§£ææ ‘ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://i.imgur.com/3IbLJX4.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://i.imgur.com/3IbLJX4.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;DCNNèƒ½å¤Ÿå¤„ç†å¯å˜é•¿åº¦çš„è¾“å…¥ï¼Œç½‘ç»œä¸­åŒ…å«ä¸¤ç§ç±»å‹çš„å±‚ï¼Œåˆ†åˆ«æ˜¯&lt;strong&gt;ä¸€ç»´çš„å·ç§¯å±‚&lt;/strong&gt;å’Œ&lt;strong&gt;åŠ¨æ€k-maxçš„æ± åŒ–å±‚(Dynamic k-max pooling)&lt;/strong&gt;ã€‚å…¶ä¸­ï¼ŒåŠ¨æ€k-maxæ± åŒ–æ˜¯æœ€å¤§åŒ–æ± åŒ–æ›´ä¸€èˆ¬çš„å½¢å¼ã€‚ä¹‹å‰LeCunå°†CNNçš„æ± åŒ–æ“ä½œå®šä¹‰ä¸ºä¸€ç§éçº¿æ€§çš„æŠ½æ ·æ–¹å¼ï¼Œè¿”å›ä¸€å †æ•°ä¸­çš„æœ€å¤§å€¼ï¼ŒåŸè¯å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;The max pooling operator is a non-linear subsampling function that returns the maximum of a set of values (LuCun et al., 1998).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è€Œæ–‡ä¸­çš„k-max poolingæ–¹å¼çš„ä¸€èˆ¬åŒ–ä½“ç°åœ¨ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;poolingçš„ç»“æœä¸æ˜¯è¿”å›ä¸€ä¸ªæœ€å¤§å€¼ï¼Œè€Œæ˜¯è¿”å›kç»„æœ€å¤§å€¼ï¼Œè¿™äº›æœ€å¤§å€¼æ˜¯åŸè¾“å…¥çš„ä¸€ä¸ªå­åºåˆ—ï¼›&lt;/li&gt;
&lt;li&gt;poolingä¸­çš„å‚æ•°kå¯ä»¥æ˜¯ä¸€ä¸ªåŠ¨æ€å‡½æ•°ï¼Œå…·ä½“çš„å€¼ä¾èµ–äºè¾“å…¥æˆ–è€…ç½‘ç»œçš„å…¶ä»–å‚æ•°ï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;h4 id=&quot;æ¨¡å‹ç»“æ„åŠåŸç†-1&quot;&gt;æ¨¡å‹ç»“æ„åŠåŸç†&lt;/h4&gt;
&lt;p&gt;DCNNçš„ç½‘ç»œç»“æ„å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://i.imgur.com/CNMa0VL.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://i.imgur.com/CNMa0VL.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç½‘ç»œä¸­çš„å·ç§¯å±‚ä½¿ç”¨äº†ä¸€ç§ç§°ä¹‹ä¸º&lt;strong&gt;&lt;code&gt;å®½å·ç§¯(Wide Convolution)&lt;/code&gt;&lt;/strong&gt;çš„æ–¹å¼ï¼Œç´§æ¥ç€æ˜¯åŠ¨æ€çš„k-maxæ± åŒ–å±‚ã€‚ä¸­é—´å·ç§¯å±‚çš„è¾“å‡ºå³&lt;code&gt;Feature Map&lt;/code&gt;çš„å¤§å°ä¼šæ ¹æ®è¾“å…¥å¥å­çš„é•¿åº¦è€Œå˜åŒ–ã€‚ä¸‹é¢è®²è§£ä¸€ä¸‹è¿™äº›æ“ä½œçš„å…·ä½“ç»†èŠ‚ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1. å®½å·ç§¯&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç›¸æ¯”äºä¼ ç»Ÿçš„å·ç§¯æ“ä½œï¼Œå®½å·ç§¯çš„è¾“å‡ºçš„&lt;code&gt;Feature Map&lt;/code&gt;çš„å®½åº¦(width)ä¼šæ›´å®½ï¼ŒåŸå› æ˜¯å·ç§¯çª—å£å¹¶ä¸éœ€è¦è¦†ç›–æ‰€æœ‰çš„è¾“å…¥å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯éƒ¨åˆ†è¾“å…¥å€¼ï¼ˆå¯ä»¥è®¤ä¸ºæ­¤æ—¶å…¶ä½™çš„è¾“å…¥å€¼ä¸º0ï¼Œå³å¡«å……0ï¼‰ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://i.imgur.com/YgM3Tsg.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://i.imgur.com/YgM3Tsg.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class=&quot; has-jax has-jax&quot;&gt;å›¾ä¸­çš„å³å›¾å³è¡¨ç¤ºå®½å·ç§¯çš„è®¡ç®—è¿‡ç¨‹ï¼Œå½“è®¡ç®—ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å³&lt;span id=&quot;MathJax-Element-7-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;s&amp;lt;/mi&amp;gt;&amp;lt;mn&amp;gt;1&amp;lt;/mn&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-23&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-24&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-25&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-26&quot; class=&quot;mi&quot;&gt;s&lt;span id=&quot;MathJax-Span-27&quot; class=&quot;mn&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;æ—¶ï¼Œå¯ä»¥å‡ä½¿&lt;span id=&quot;MathJax-Element-8-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;s&amp;lt;/mi&amp;gt;&amp;lt;mn&amp;gt;1&amp;lt;/mn&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-28&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-29&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-30&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-31&quot; class=&quot;mi&quot;&gt;s&lt;span id=&quot;MathJax-Span-32&quot; class=&quot;mn&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;s1èŠ‚ç‚¹å‰é¢æœ‰å››ä¸ªè¾“å…¥å€¼ä¸º0çš„èŠ‚ç‚¹å‚ä¸å·ç§¯ï¼ˆå·ç§¯çª—å£ä¸º5ï¼‰ã€‚æ˜æ˜¾çœ‹å‡ºï¼Œç‹­ä¹‰ä¸Šçš„å·ç§¯è¾“å‡ºç»“æœæ˜¯å®½å·ç§¯è¾“å‡ºç»“æœçš„ä¸€ä¸ªå­é›†ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2. k-maxæ± åŒ–&lt;/strong&gt;&lt;/p&gt;
&lt;p class=&quot; has-jax has-jax has-jax has-jax has-jax&quot;&gt;ç»™å‡ºæ•°å­¦å½¢å¼åŒ–çš„è¡¨è¿°æ˜¯ï¼Œç»™å®šä¸€ä¸ª&lt;span id=&quot;MathJax-Element-9-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-33&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-34&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-35&quot; class=&quot;mi&quot;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;å€¼ï¼Œå’Œä¸€ä¸ªåºåˆ—&lt;span id=&quot;MathJax-Element-10-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;p&amp;lt;/mi&amp;gt;&amp;lt;mo&amp;gt;&amp;amp;#x2208;&amp;lt;/mo&amp;gt;&amp;lt;msup&amp;gt;&amp;lt;mi&amp;gt;R&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;p&amp;lt;/mi&amp;gt;&amp;lt;/msup&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-36&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-37&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-38&quot; class=&quot;mi&quot;&gt;p&lt;span id=&quot;MathJax-Span-39&quot; class=&quot;mo&quot;&gt;âˆˆ&lt;span id=&quot;MathJax-Span-40&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-41&quot; class=&quot;mi&quot;&gt;R&lt;span id=&quot;MathJax-Span-42&quot; class=&quot;mi&quot;&gt;p&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;(å…¶ä¸­&lt;span id=&quot;MathJax-Element-11-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;p&amp;lt;/mi&amp;gt;&amp;lt;mo&amp;gt;&amp;amp;#x2265;&amp;lt;/mo&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-43&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-44&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-45&quot; class=&quot;mi&quot;&gt;p&lt;span id=&quot;MathJax-Span-46&quot; class=&quot;mo&quot;&gt;â‰¥&lt;span id=&quot;MathJax-Span-47&quot; class=&quot;mi&quot;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;)ï¼Œ&lt;code&gt;k-max pooling&lt;/code&gt;é€‰æ‹©äº†åºåˆ—&lt;span id=&quot;MathJax-Element-12-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;p&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-48&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-49&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-50&quot; class=&quot;mi&quot;&gt;p&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;ä¸­çš„å‰&lt;span id=&quot;MathJax-Element-13-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-51&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-52&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-53&quot; class=&quot;mi&quot;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;ä¸ªæœ€å¤§å€¼ï¼Œè¿™äº›æœ€å¤§å€¼ä¿ç•™åŸæ¥åºåˆ—çš„æ¬¡åºï¼ˆå®é™…ä¸Šæ˜¯åŸåºåˆ—çš„ä¸€ä¸ªå­åºåˆ—ï¼‰ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot; has-jax has-jax has-jax&quot;&gt;&lt;code&gt;k-max pooling&lt;/code&gt;çš„å¥½å¤„åœ¨äºï¼Œæ—¢æå–é™¤äº†å¥å­ä¸­çš„è¾ƒé‡è¦ä¿¡æ¯ï¼ˆä¸æ­¢ä¸€ä¸ªï¼‰ï¼ŒåŒæ—¶ä¿ç•™äº†å®ƒä»¬çš„æ¬¡åºä¿¡æ¯ï¼ˆç›¸å¯¹ä½ç½®ï¼‰ã€‚åŒæ—¶ï¼Œç”±äºåº”ç”¨åœ¨æœ€åçš„å·ç§¯å±‚ä¸Šåªéœ€è¦æå–å‡º&lt;span id=&quot;MathJax-Element-14-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-54&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-55&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-56&quot; class=&quot;mi&quot;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;ä¸ªå€¼ï¼Œæ‰€ä»¥è¿™ç§æ–¹æ³•å…è®¸ä¸åŒé•¿åº¦çš„è¾“å…¥ï¼ˆè¾“å…¥çš„é•¿åº¦åº”è¯¥è¦å¤§äº&lt;span id=&quot;MathJax-Element-15-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-57&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-58&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-59&quot; class=&quot;mi&quot;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;ï¼‰ã€‚ç„¶è€Œï¼Œå¯¹äºä¸­é—´çš„å·ç§¯å±‚è€Œè¨€ï¼Œæ± åŒ–çš„å‚æ•°&lt;span id=&quot;MathJax-Element-16-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-60&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-61&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-62&quot; class=&quot;mi&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;kä¸æ˜¯å›ºå®šçš„ï¼Œå…·ä½“çš„é€‰æ‹©æ–¹æ³•è§ä¸‹é¢çš„ä»‹ç»ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3. åŠ¨æ€k-maxæ± åŒ–&lt;/strong&gt;&lt;/p&gt;
&lt;p class=&quot; has-jax&quot;&gt;åŠ¨æ€k-maxæ± åŒ–æ“ä½œï¼Œå…¶ä¸­çš„&lt;span id=&quot;MathJax-Element-17-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-63&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-64&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-65&quot; class=&quot;mi&quot;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;æ˜¯&lt;code&gt;è¾“å…¥å¥å­é•¿åº¦&lt;/code&gt;å’Œ&lt;code&gt;ç½‘ç»œæ·±åº¦&lt;/code&gt;ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œå…·ä½“å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot; has-jax&quot;&gt;Â &lt;/p&gt;
&lt;p&gt;&lt;span id=&quot;MathJax-Element-18-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot; display=&amp;quot;block&amp;quot;&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;K&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;l&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;mo&amp;gt;=&amp;lt;/mo&amp;gt;&amp;lt;mo movablelimits=&amp;quot;true&amp;quot; form=&amp;quot;prefix&amp;quot;&amp;gt;max&amp;lt;/mo&amp;gt;&amp;lt;mrow&amp;gt;&amp;lt;mo&amp;gt;(&amp;lt;/mo&amp;gt;&amp;lt;mrow&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;t&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;o&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;p&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;mo&amp;gt;,&amp;lt;/mo&amp;gt;&amp;lt;mrow&amp;gt;&amp;lt;mo&amp;gt;&amp;amp;#x2308;&amp;lt;/mo&amp;gt;&amp;lt;mrow&amp;gt;&amp;lt;mfrac&amp;gt;&amp;lt;mrow&amp;gt;&amp;lt;mi&amp;gt;L&amp;lt;/mi&amp;gt;&amp;lt;mo&amp;gt;&amp;amp;#x2212;&amp;lt;/mo&amp;gt;&amp;lt;mi&amp;gt;l&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;mi&amp;gt;L&amp;lt;/mi&amp;gt;&amp;lt;/mfrac&amp;gt;&amp;lt;mi&amp;gt;s&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;mo&amp;gt;&amp;amp;#x2309;&amp;lt;/mo&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;mo&amp;gt;)&amp;lt;/mo&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-66&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-67&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-68&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-69&quot; class=&quot;mi&quot;&gt;K&lt;span id=&quot;MathJax-Span-70&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-71&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-72&quot; class=&quot;mi&quot;&gt;l&lt;span id=&quot;MathJax-Span-73&quot; class=&quot;mo&quot;&gt;=&lt;span id=&quot;MathJax-Span-74&quot; class=&quot;mo&quot;&gt;max&lt;span id=&quot;MathJax-Span-75&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-76&quot; class=&quot;mo&quot;&gt;(&lt;span id=&quot;MathJax-Span-77&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-78&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-79&quot; class=&quot;mi&quot;&gt;k&lt;span id=&quot;MathJax-Span-80&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-81&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-82&quot; class=&quot;mi&quot;&gt;t&lt;span id=&quot;MathJax-Span-83&quot; class=&quot;mi&quot;&gt;o&lt;span id=&quot;MathJax-Span-84&quot; class=&quot;mi&quot;&gt;p&lt;span id=&quot;MathJax-Span-85&quot; class=&quot;mo&quot;&gt;,&lt;span id=&quot;MathJax-Span-86&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-87&quot; class=&quot;mo&quot;&gt;âŒˆ&lt;span id=&quot;MathJax-Span-88&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-89&quot; class=&quot;mfrac&quot;&gt;&lt;span id=&quot;MathJax-Span-90&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-91&quot; class=&quot;mi&quot;&gt;L&lt;span id=&quot;MathJax-Span-92&quot; class=&quot;mo&quot;&gt;âˆ’&lt;span id=&quot;MathJax-Span-93&quot; class=&quot;mi&quot;&gt;l&lt;span id=&quot;MathJax-Span-94&quot; class=&quot;mi&quot;&gt;L&lt;span id=&quot;MathJax-Span-95&quot; class=&quot;mi&quot;&gt;s&lt;span id=&quot;MathJax-Span-96&quot; class=&quot;mo&quot;&gt;âŒ‰&lt;span id=&quot;MathJax-Span-97&quot; class=&quot;mo&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML MJX_Assistive_MathML_Block&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p class=&quot; has-jax has-jax has-jax has-jax has-jax has-jax has-jax has-jax&quot;&gt;å…¶ä¸­&lt;span id=&quot;MathJax-Element-19-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;l&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-98&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-99&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-100&quot; class=&quot;mi&quot;&gt;l&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;lè¡¨ç¤ºå½“å‰å·ç§¯çš„å±‚æ•°ï¼ˆå³ç¬¬å‡ ä¸ªå·ç§¯å±‚ï¼‰ï¼Œ&lt;span id=&quot;MathJax-Element-20-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;L&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-101&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-102&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-103&quot; class=&quot;mi&quot;&gt;L&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;æ˜¯ç½‘ç»œä¸­æ€»å…±å·ç§¯å±‚çš„å±‚æ•°ï¼›&lt;span id=&quot;MathJax-Element-21-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;t&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;o&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;p&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-104&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-105&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-106&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-107&quot; class=&quot;mi&quot;&gt;k&lt;span id=&quot;MathJax-Span-108&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-109&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-110&quot; class=&quot;mi&quot;&gt;t&lt;span id=&quot;MathJax-Span-111&quot; class=&quot;mi&quot;&gt;o&lt;span id=&quot;MathJax-Span-112&quot; class=&quot;mi&quot;&gt;p&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;ä¸ºæœ€é¡¶å±‚çš„å·ç§¯å±‚poolingå¯¹åº”çš„&lt;span id=&quot;MathJax-Element-22-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-113&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-114&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-115&quot; class=&quot;mi&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;kå€¼ï¼Œæ˜¯ä¸€ä¸ªå›ºå®šçš„å€¼ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä¾‹å¦‚ç½‘ç»œä¸­æœ‰ä¸‰ä¸ªå·ç§¯å±‚ï¼Œ&lt;span id=&quot;MathJax-Element-23-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;t&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;o&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;p&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;mo&amp;gt;=&amp;lt;/mo&amp;gt;&amp;lt;mn&amp;gt;3&amp;lt;/mn&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-116&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-117&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-118&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-119&quot; class=&quot;mi&quot;&gt;k&lt;span id=&quot;MathJax-Span-120&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-121&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-122&quot; class=&quot;mi&quot;&gt;t&lt;span id=&quot;MathJax-Span-123&quot; class=&quot;mi&quot;&gt;o&lt;span id=&quot;MathJax-Span-124&quot; class=&quot;mi&quot;&gt;p&lt;span id=&quot;MathJax-Span-125&quot; class=&quot;mo&quot;&gt;=&lt;span id=&quot;MathJax-Span-126&quot; class=&quot;mn&quot;&gt;3&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;ktop=3ï¼Œè¾“å…¥çš„å¥å­é•¿åº¦ä¸º18ï¼›é‚£ä¹ˆï¼Œå¯¹äºç¬¬ä¸€å±‚å·ç§¯å±‚ä¸‹é¢çš„poolingå‚æ•°&lt;span id=&quot;MathJax-Element-24-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mn&amp;gt;1&amp;lt;/mn&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;mo&amp;gt;=&amp;lt;/mo&amp;gt;&amp;lt;mn&amp;gt;12&amp;lt;/mn&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-127&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-128&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-129&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-130&quot; class=&quot;mi&quot;&gt;k&lt;span id=&quot;MathJax-Span-131&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-132&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-133&quot; class=&quot;mn&quot;&gt;1&lt;span id=&quot;MathJax-Span-134&quot; class=&quot;mo&quot;&gt;=&lt;span id=&quot;MathJax-Span-135&quot; class=&quot;mn&quot;&gt;12&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;ï¼Œè€Œç¬¬äºŒå±‚å·ç§¯å±‚å¯¹äºçš„ä¸º&lt;span id=&quot;MathJax-Element-25-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mn&amp;gt;2&amp;lt;/mn&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;mo&amp;gt;=&amp;lt;/mo&amp;gt;&amp;lt;mn&amp;gt;6&amp;lt;/mn&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-136&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-137&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-138&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-139&quot; class=&quot;mi&quot;&gt;k&lt;span id=&quot;MathJax-Span-140&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-141&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-142&quot; class=&quot;mn&quot;&gt;2&lt;span id=&quot;MathJax-Span-143&quot; class=&quot;mo&quot;&gt;=&lt;span id=&quot;MathJax-Span-144&quot; class=&quot;mn&quot;&gt;6&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;ï¼Œè€Œ&lt;span id=&quot;MathJax-Element-26-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mn&amp;gt;3&amp;lt;/mn&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;mo&amp;gt;=&amp;lt;/mo&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;t&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;o&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;p&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;mo&amp;gt;=&amp;lt;/mo&amp;gt;&amp;lt;mn&amp;gt;3&amp;lt;/mn&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-145&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-146&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-147&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-148&quot; class=&quot;mi&quot;&gt;k&lt;span id=&quot;MathJax-Span-149&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-150&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-151&quot; class=&quot;mn&quot;&gt;3&lt;span id=&quot;MathJax-Span-152&quot; class=&quot;mo&quot;&gt;=&lt;span id=&quot;MathJax-Span-153&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-154&quot; class=&quot;mi&quot;&gt;k&lt;span id=&quot;MathJax-Span-155&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-156&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-157&quot; class=&quot;mi&quot;&gt;t&lt;span id=&quot;MathJax-Span-158&quot; class=&quot;mi&quot;&gt;o&lt;span id=&quot;MathJax-Span-159&quot; class=&quot;mi&quot;&gt;p&lt;span id=&quot;MathJax-Span-160&quot; class=&quot;mo&quot;&gt;=&lt;span id=&quot;MathJax-Span-161&quot; class=&quot;mn&quot;&gt;3&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;åŠ¨æ€k-maxæ± åŒ–çš„æ„ä¹‰åœ¨äºï¼Œä»ä¸åŒé•¿åº¦çš„å¥å­ä¸­æå–å‡ºç›¸åº”æ•°é‡çš„è¯­ä¹‰ç‰¹å¾ä¿¡æ¯ï¼Œä»¥ä¿è¯åç»­çš„å·ç§¯å±‚çš„ç»Ÿä¸€æ€§ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4. éçº¿æ€§ç‰¹å¾å‡½æ•°&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;poolingå±‚ä¸ä¸‹ä¸€ä¸ªå·ç§¯å±‚ä¹‹é—´ï¼Œæ˜¯é€šè¿‡ä¸ä¸€äº›æƒå€¼å‚æ•°ç›¸ä¹˜åï¼ŒåŠ ä¸ŠæŸä¸ªåç½®å‚æ•°è€Œæ¥çš„ï¼Œè¿™ä¸ä¼ ç»Ÿçš„CNNæ¨¡å‹æ˜¯ä¸€æ ·çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;5. å¤šä¸ªFeature Map&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å’Œä¼ ç»Ÿçš„CNNä¸€æ ·ï¼Œä¼šæå‡ºå¤šä¸ªFeature Mapä»¥ä¿è¯æå–ç‰¹å¾çš„å¤šæ ·æ€§ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;6. æŠ˜å æ“ä½œ(Folding)&lt;/strong&gt;&lt;/p&gt;
&lt;p class=&quot; has-jax has-jax has-jax&quot;&gt;ä¹‹å‰çš„å®½å·ç§¯æ˜¯åœ¨è¾“å…¥çŸ©é˜µ&lt;span id=&quot;MathJax-Element-27-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;d&amp;lt;/mi&amp;gt;&amp;lt;mo&amp;gt;&amp;amp;#xD7;&amp;lt;/mo&amp;gt;&amp;lt;mi&amp;gt;s&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-162&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-163&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-164&quot; class=&quot;mi&quot;&gt;d&lt;span id=&quot;MathJax-Span-165&quot; class=&quot;mo&quot;&gt;Ã—&lt;span id=&quot;MathJax-Span-166&quot; class=&quot;mi&quot;&gt;s&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;ä¸­çš„æ¯ä¸€è¡Œå†…è¿›è¡Œè®¡ç®—æ“ä½œï¼Œå…¶ä¸­&lt;span id=&quot;MathJax-Element-28-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;d&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-167&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-168&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-169&quot; class=&quot;mi&quot;&gt;d&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;æ˜¯word vectorçš„ç»´æ•°ï¼Œ&lt;span id=&quot;MathJax-Element-29-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;s&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-170&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-171&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-172&quot; class=&quot;mi&quot;&gt;s&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;æ˜¯è¾“å…¥å¥å­çš„è¯è¯­æ•°é‡ã€‚è€Œ&lt;strong&gt;&lt;code&gt;Folding&lt;/code&gt;&lt;/strong&gt;æ“ä½œåˆ™æ˜¯è€ƒè™‘ç›¸é‚»çš„ä¸¤è¡Œä¹‹é—´çš„æŸç§è”ç³»ï¼Œæ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯å°†ä¸¤è¡Œçš„vectorç›¸åŠ ï¼›è¯¥æ“ä½œæ²¡æœ‰å¢åŠ å‚æ•°æ•°é‡ï¼Œä½†æ˜¯æå‰ï¼ˆåœ¨æœ€åçš„å…¨è¿æ¥å±‚ä¹‹å‰ï¼‰è€ƒè™‘äº†ç‰¹å¾çŸ©é˜µä¸­è¡Œä¸è¡Œä¹‹é—´çš„æŸç§å…³è”ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h4 id=&quot;æ¨¡å‹çš„ç‰¹ç‚¹&quot;&gt;æ¨¡å‹çš„ç‰¹ç‚¹&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;ä¿ç•™äº†å¥å­ä¸­è¯åºä¿¡æ¯å’Œè¯è¯­ä¹‹é—´çš„ç›¸å¯¹ä½ç½®ï¼›&lt;/li&gt;
&lt;li&gt;å®½å·ç§¯çš„ç»“æœæ˜¯ä¼ ç»Ÿå·ç§¯çš„ä¸€ä¸ªæ‰©å±•ï¼ŒæŸç§æ„ä¹‰ä¸Šï¼Œä¹Ÿæ˜¯n-gramçš„ä¸€ä¸ªæ‰©å±•ï¼›&lt;/li&gt;
&lt;li&gt;æ¨¡å‹ä¸éœ€è¦ä»»ä½•çš„å…ˆéªŒçŸ¥è¯†ï¼Œä¾‹å¦‚å¥æ³•ä¾å­˜æ ‘ç­‰ï¼Œå¹¶ä¸”æ¨¡å‹è€ƒè™‘äº†å¥å­ä¸­ç›¸éš”è¾ƒè¿œçš„è¯è¯­ä¹‹é—´çš„è¯­ä¹‰ä¿¡æ¯ï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;h4 id=&quot;å®éªŒéƒ¨åˆ†-1&quot;&gt;å®éªŒéƒ¨åˆ†&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;1. æ¨¡å‹è®­ç»ƒåŠå‚æ•°&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;è¾“å‡ºå±‚æ˜¯ä¸€ä¸ªç±»åˆ«æ¦‚ç‡åˆ†å¸ƒï¼ˆå³softmaxï¼‰ï¼Œä¸å€’æ•°ç¬¬äºŒå±‚å…¨è¿æ¥ï¼›&lt;/li&gt;
&lt;li&gt;ä»£ä»·å‡½æ•°ä¸ºäº¤å‰ç†µï¼Œè®­ç»ƒç›®æ ‡æ˜¯æœ€å°åŒ–ä»£ä»·å‡½æ•°ï¼›&lt;/li&gt;
&lt;li&gt;L2æ­£åˆ™åŒ–ï¼›&lt;/li&gt;
&lt;li&gt;ä¼˜åŒ–æ–¹æ³•ï¼šmini-batch + gradient-based (ä½¿ç”¨Adagrad update rule, Duchi et al., 2011)&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;2. å®éªŒç»“æœ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ä¸‰ä¸ªæ•°æ®é›†ä¸Šè¿›è¡Œäº†å®éªŒï¼Œåˆ†åˆ«æ˜¯(1)ç”µå½±è¯„è®ºæ•°æ®é›†ä¸Šçš„æƒ…æ„Ÿè¯†åˆ«ï¼Œ(2)TRECé—®é¢˜åˆ†ç±»ï¼Œä»¥åŠ(3)Twitteræ•°æ®é›†ä¸Šçš„æƒ…æ„Ÿè¯†åˆ«ã€‚ç»“æœå¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://i.imgur.com/zuf2bSu.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://i.imgur.com/zuf2bSu.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://i.imgur.com/6lWY7zC.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://i.imgur.com/6lWY7zC.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://i.imgur.com/PX9N2JB.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://i.imgur.com/PX9N2JB.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹å‡ºï¼ŒDCNNçš„æ€§èƒ½éå¸¸å¥½ï¼Œå‡ ä¹ä¸é€Šè‰²äºä¼ ç»Ÿçš„æ¨¡å‹ï¼›è€Œä¸”ï¼ŒDCNNçš„å¥½å¤„åœ¨äºä¸éœ€è¦ä»»ä½•çš„å…ˆéªŒä¿¡æ¯è¾“å…¥ï¼Œä¹Ÿä¸éœ€è¦æ„é€ éå¸¸å¤æ‚çš„äººå·¥ç‰¹å¾ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Huâ€™s_Paper&quot;&gt;Huâ€™s Paper&lt;/h3&gt;
&lt;h4 id=&quot;æ¨¡å‹ç»“æ„ä¸åŸç†&quot;&gt;æ¨¡å‹ç»“æ„ä¸åŸç†&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;1. åŸºäºCNNçš„å¥å­å»ºæ¨¡&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™ç¯‡è®ºæ–‡ä¸»è¦é’ˆå¯¹çš„æ˜¯&lt;strong&gt;å¥å­åŒ¹é…(Sentence Matching)&lt;/strong&gt;çš„é—®é¢˜ï¼Œä½†æ˜¯åŸºç¡€é—®é¢˜ä»ç„¶æ˜¯å¥å­å»ºæ¨¡ã€‚é¦–å…ˆï¼Œæ–‡ä¸­æå‡ºäº†ä¸€ç§åŸºäºCNNçš„å¥å­å»ºæ¨¡ç½‘ç»œï¼Œå¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://i.imgur.com/kG7AbW3.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://i.imgur.com/kG7AbW3.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å›¾ä¸­ç°è‰²çš„éƒ¨åˆ†è¡¨ç¤ºå¯¹äºé•¿åº¦è¾ƒçŸ­çš„å¥å­ï¼Œå…¶åé¢ä¸è¶³çš„éƒ¨åˆ†å¡«å……çš„å…¨æ˜¯0å€¼(Zero Padding)ã€‚å¯ä»¥çœ‹å‡ºï¼Œæ¨¡å‹è§£å†³ä¸åŒé•¿åº¦å¥å­è¾“å…¥çš„æ–¹æ³•æ˜¯è§„å®šä¸€ä¸ªæœ€å¤§çš„å¯è¾“å…¥å¥å­é•¿åº¦ï¼Œç„¶åé•¿åº¦ä¸å¤Ÿçš„éƒ¨åˆ†è¿›è¡Œ0å€¼çš„å¡«å……ï¼›å›¾ä¸­çš„å·ç§¯è®¡ç®—å’Œä¼ ç»Ÿçš„CNNå·ç§¯è®¡ç®—æ— å¼‚ï¼Œè€Œæ± åŒ–åˆ™æ˜¯ä½¿ç”¨Max-Poolingã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;å·ç§¯ç»“æ„çš„åˆ†æ&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä¸‹å›¾ç¤ºæ„æ€§åœ°è¯´æ˜äº†å·ç§¯ç»“æ„çš„ä½œç”¨ï¼Œä½œè€…è®¤ä¸ºå·ç§¯çš„ä½œç”¨æ˜¯&lt;strong&gt;ä»å¥å­ä¸­æå–å‡ºå±€éƒ¨çš„è¯­ä¹‰ç»„åˆä¿¡æ¯&lt;/strong&gt;ï¼Œè€Œå¤šå¼ &lt;code&gt;Feature Map&lt;/code&gt;åˆ™æ˜¯ä»å¤šç§è§’åº¦è¿›è¡Œæå–ï¼Œä¹Ÿå°±æ˜¯&lt;strong&gt;ä¿è¯æå–çš„è¯­ä¹‰ç»„åˆçš„å¤šæ ·æ€§&lt;/strong&gt;ï¼›è€Œæ± åŒ–çš„ä½œç”¨æ˜¯å¯¹å¤šç§è¯­ä¹‰ç»„åˆè¿›è¡Œé€‰æ‹©ï¼Œè¿‡æ»¤æ‰ä¸€äº›ç½®ä¿¡åº¦ä½çš„ç»„åˆï¼ˆå¯èƒ½è¿™æ ·çš„ç»„åˆè¯­ä¹‰ä¸Šå¹¶æ— æ„ä¹‰ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://i.imgur.com/yrFS2k1.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://i.imgur.com/yrFS2k1.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2. åŸºäºCNNçš„å¥å­åŒ¹é…æ¨¡å‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯åŸºäºä¹‹å‰çš„å¥å­æ¨¡å‹ï¼Œå»ºç«‹çš„ä¸¤ç§ç”¨äºä¸¤ä¸ªå¥å­çš„åŒ¹é…æ¨¡å‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.1 ç»“æ„I&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ¨¡å‹ç»“æ„å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://i.imgur.com/xaP0KNV.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://i.imgur.com/xaP0KNV.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼Œé¦–å…ˆåˆ†åˆ«å•ç‹¬åœ°å¯¹ä¸¤ä¸ªå¥å­è¿›è¡Œå»ºæ¨¡ï¼ˆä½¿ç”¨ä¸Šæ–‡ä¸­çš„å¥å­æ¨¡å‹ï¼‰ï¼Œä»è€Œå¾—åˆ°ä¸¤ä¸ªç›¸åŒä¸”å›ºå®šé•¿åº¦çš„å‘é‡ï¼Œå‘é‡è¡¨ç¤ºå¥å­ç»è¿‡å»ºæ¨¡åæŠ½è±¡å¾—æ¥çš„ç‰¹å¾ä¿¡æ¯ï¼›ç„¶åï¼Œå°†è¿™ä¸¤ä¸ªå‘é‡ä½œä¸ºä¸€ä¸ªå¤šå±‚æ„ŸçŸ¥æœº(MLP)çš„è¾“å…¥ï¼Œæœ€åè®¡ç®—åŒ¹é…çš„åˆ†æ•°ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªæ¨¡å‹æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªè¾ƒå¤§çš„ç¼ºç‚¹ï¼šä¸¤ä¸ªå¥å­åœ¨å»ºæ¨¡è¿‡ç¨‹ä¸­æ˜¯å®Œå…¨ç‹¬ç«‹çš„ï¼Œæ²¡æœ‰ä»»ä½•äº¤äº’è¡Œä¸ºï¼Œä¸€ç›´åˆ°æœ€åç”ŸæˆæŠ½è±¡çš„å‘é‡è¡¨ç¤ºåæ‰æœ‰äº¤äº’è¡Œä¸ºï¼ˆä¸€èµ·ä½œä¸ºä¸‹ä¸€ä¸ªæ¨¡å‹çš„è¾“å…¥ï¼‰ï¼Œè¿™æ ·åšä½¿å¾—å¥å­åœ¨æŠ½è±¡å»ºæ¨¡çš„è¿‡ç¨‹ä¸­ä¼šä¸§å¤±å¾ˆå¤šè¯­ä¹‰ç»†èŠ‚ï¼ŒåŒæ—¶è¿‡æ—©åœ°å¤±å»äº†å¥å­é—´è¯­ä¹‰äº¤äº’è®¡ç®—çš„æœºä¼šã€‚å› æ­¤ï¼Œæ¨å‡ºäº†ç¬¬äºŒç§æ¨¡å‹ç»“æ„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.2 ç»“æ„II&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ¨¡å‹ç»“æ„å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://i.imgur.com/NWvAPVr.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://i.imgur.com/NWvAPVr.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œè¿™ç§ç»“æ„æå‰äº†ä¸¤ä¸ªå¥å­é—´çš„äº¤äº’è¡Œä¸ºã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;ç¬¬ä¸€å±‚å·ç§¯å±‚&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p class=&quot; has-jax has-jax has-jax&quot;&gt;ç¬¬ä¸€å±‚ä¸­ï¼Œé¦–å…ˆå–ä¸€ä¸ªå›ºå®šçš„å·ç§¯çª—å£&lt;span id=&quot;MathJax-Element-30-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;mn&amp;gt;1&amp;lt;/mn&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-173&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-174&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-175&quot; class=&quot;mi&quot;&gt;k&lt;span id=&quot;MathJax-Span-176&quot; class=&quot;mn&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;ï¼Œç„¶åéå†Â &lt;span id=&quot;MathJax-Element-31-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;S&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;x&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-177&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-178&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-179&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-180&quot; class=&quot;mi&quot;&gt;S&lt;span id=&quot;MathJax-Span-181&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-182&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-183&quot; class=&quot;mi&quot;&gt;x&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Â å’ŒÂ &lt;span id=&quot;MathJax-Element-32-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;S&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;y&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-184&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-185&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-186&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-187&quot; class=&quot;mi&quot;&gt;S&lt;span id=&quot;MathJax-Span-188&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-189&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-190&quot; class=&quot;mi&quot;&gt;y&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Â ä¸­æ‰€æœ‰ç»„åˆçš„äºŒç»´çŸ©é˜µè¿›è¡Œå·ç§¯ï¼Œæ¯ä¸€ä¸ªäºŒç»´çŸ©é˜µè¾“å‡ºä¸€ä¸ªå€¼ï¼ˆæ–‡ä¸­æŠŠè¿™ä¸ªç§°ä½œä¸ºä¸€ç»´å·ç§¯ï¼Œå› ä¸ºå®é™…ä¸Šæ˜¯æŠŠç»„åˆä¸­æ‰€æœ‰è¯è¯­çš„vectoræ’æˆä¸€è¡Œè¿›è¡Œçš„å·ç§¯è®¡ç®—ï¼‰ï¼Œæ„æˆLayer-2ã€‚ä¸‹é¢ç»™å‡ºæ•°å­¦å½¢å¼åŒ–è¡¨è¿°ï¼š&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://i.imgur.com/f3DqYsp.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://i.imgur.com/f3DqYsp.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;ç¬¬ä¸€å±‚å·ç§¯å±‚åçš„Max-Poolingå±‚&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä»è€Œå¾—åˆ°Layer-2ï¼Œç„¶åè¿›è¡Œ2Ã—2çš„Max-poolingï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://i.imgur.com/DaFv3ps.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://i.imgur.com/DaFv3ps.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;åç»­çš„å·ç§¯å±‚&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;åç»­çš„å·ç§¯å±‚å‡æ˜¯ä¼ ç»Ÿçš„äºŒç»´å·ç§¯æ“ä½œï¼Œå½¢å¼åŒ–è¡¨è¿°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://i.imgur.com/Pr5Mm9n.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://i.imgur.com/Pr5Mm9n.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;äºŒç»´å·ç§¯ç»“æœåçš„Poolingå±‚&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä¸ç¬¬ä¸€å±‚å·ç§¯å±‚åçš„ç®€å•Max-Poolingæ–¹å¼ä¸åŒï¼Œåç»­çš„å·ç§¯å±‚çš„Poolingæ˜¯ä¸€ç§&lt;strong&gt;åŠ¨æ€Poolingæ–¹æ³•&lt;/strong&gt;ï¼Œè¿™ç§æ–¹æ³•æ¥æºäºå‚è€ƒæ–‡çŒ®[1]ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;ç»“æ„IIçš„æ€§è´¨&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;ol&gt;&lt;li&gt;ä¿ç•™äº†è¯åºä¿¡æ¯ï¼›&lt;/li&gt;
&lt;li&gt;æ›´å…·ä¸€èˆ¬æ€§ï¼Œå®é™…ä¸Šç»“æ„Iæ˜¯ç»“æ„IIçš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼ˆå–æ¶ˆæŒ‡å®šçš„æƒå€¼å‚æ•°ï¼‰ï¼›&lt;/li&gt;
&lt;/ol&gt;&lt;h4 id=&quot;å®éªŒéƒ¨åˆ†-2&quot;&gt;å®éªŒéƒ¨åˆ†&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;1. æ¨¡å‹è®­ç»ƒåŠå‚æ•°&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä½¿ç”¨åŸºäºæ’åºçš„è‡ªå®šä¹‰æŸå¤±å‡½æ•°(Ranking-based Loss)&lt;/li&gt;
&lt;li&gt;BPåå‘ä¼ æ’­+éšæœºæ¢¯åº¦ä¸‹é™ï¼›&lt;/li&gt;
&lt;li&gt;mini-batchä¸º100-200,å¹¶è¡ŒåŒ–ï¼›&lt;/li&gt;
&lt;li&gt;ä¸ºäº†é˜²æ­¢è¿‡æ‹Ÿåˆï¼Œå¯¹äºä¸­å‹å’Œå¤§å‹æ•°æ®é›†ï¼Œä¼šæå‰åœæ­¢æ¨¡å‹è®­ç»ƒï¼›è€Œå¯¹äºå°å‹æ•°æ®é›†ï¼Œè¿˜ä¼šä½¿ç”¨Dropoutç­–ç•¥ï¼›&lt;/li&gt;
&lt;li&gt;Word2Vectorï¼š50ç»´ï¼›è‹±æ–‡è¯­æ–™ä¸ºWikipedia(~1B words)ï¼Œä¸­æ–‡è¯­æ–™ä¸ºå¾®åšæ•°æ®(~300M words)ï¼›&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ReLuå‡½æ•°ä½œä¸ºæ¿€æ´»å‡½æ•°ï¼›&lt;/li&gt;
&lt;li&gt;å·ç§¯çª—å£ä¸º3-word windowï¼›&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨Fine tuningï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;2. å®éªŒç»“æœ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸€å…±åšäº†ä¸‰ä¸ªå®éªŒï¼Œåˆ†åˆ«æ˜¯(1)å¥å­è‡ªåŠ¨å¡«å……ä»»åŠ¡ï¼Œ(2)æ¨æ–‡ä¸è¯„è®ºçš„åŒ¹é…ï¼Œä»¥åŠ(3)åŒä¹‰å¥è¯†åˆ«ï¼›ç»“æœå¦‚ä¸‹é¢çš„å›¾ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://i.imgur.com/wLIUAHW.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://i.imgur.com/wLIUAHW.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://i.imgur.com/fO0Xhnj.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://i.imgur.com/fO0Xhnj.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://i.imgur.com/qRfsoB0.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://i.imgur.com/qRfsoB0.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å…¶å®ç»“æ„Iå’Œç»“æ„IIçš„ç»“æœç›¸å·®ä¸å¤§ï¼Œç»“æ„IIç¨å¥½ä¸€äº›ï¼›è€Œç›¸æ¯”äºå…¶ä»–çš„æ¨¡å‹è€Œè¨€ï¼Œç»“æ„Iå’Œç»“æ„IIçš„ä¼˜åŠ¿è¿˜æ˜¯è¾ƒå¤§çš„ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Heâ€™s_Paper&quot;&gt;Heâ€™s Paper&lt;/h3&gt;
&lt;p&gt;ç¬¬å››ç¯‡è®ºæ–‡å³Heçš„æ–‡ç« ä¸­æ‰€æå‡ºçš„æ¨¡å‹ï¼Œæ˜¯æ‰€æœ‰åŸºäºNNçš„æ¨¡å‹ä¸­ï¼Œåœ¨Paraphrase identificationä»»åŠ¡æ ‡å‡†æ•°æ®é›†MSRPä¸Šæ•ˆæœæœ€ä½³çš„ã€‚ä¸‹é¢æˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹è¿™ä¸ªæ¨¡å‹ã€‚&lt;/p&gt;
&lt;h4 id=&quot;æ¨¡å‹ç»“æ„ä¸åŸç†-1&quot;&gt;æ¨¡å‹ç»“æ„ä¸åŸç†&lt;/h4&gt;
&lt;p&gt;æ¨¡å‹ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;å¥å­çš„è¡¨å¾æ¨¡å‹&lt;/strong&gt;ï¼šå¾—åˆ°å¥å­çš„è¡¨å¾(representation)ï¼Œä»¥ä¾›åç»­çš„ç›¸ä¼¼åº¦è®¡ç®—ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›¸ä¼¼åº¦è®¡ç®—æ¨¡å‹&lt;/strong&gt;ï¼šä½¿ç”¨å¤šç§ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•ï¼Œé’ˆå¯¹å¥å­è¡¨å¾åçš„å±€éƒ¨è¿›è¡Œç›¸åº”çš„è®¡ç®—ï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æ¨¡å‹ä¸éœ€è¦å€ŸåŠ©WordNet, å¥æ³•è§£ææ ‘ç­‰èµ„æºï¼›ä½†æ˜¯å¯ä»¥é€‰æ‹©æ€§åœ°ä½¿ç”¨è¯æ€§æ ‡æ³¨ã€word embeddingç­‰æ–¹æ³•æ¥å¢å¼ºæ¨¡å‹çš„æ€§èƒ½ï¼›ä¸ä¹‹å‰çš„æ¨¡å‹åŒºåˆ«åœ¨äºï¼Œæ–‡ä¸­çš„æ¨¡å‹ä½¿ç”¨äº†å¤šç§ç±»å‹çš„å·ç§¯ã€æ± åŒ–æ–¹æ³•ï¼Œä»¥åŠé’ˆå¯¹å¾—åˆ°çš„å¥å­è¡¨å¾çš„å±€éƒ¨è¿›è¡Œç›¸åº”çš„ç›¸ä¼¼åº¦è®¡ç®—ã€‚ï¼ˆè¿™æ ·åšçš„ä¼˜ç‚¹åœ¨äºèƒ½å¤Ÿæ›´åŠ å……åˆ†åœ°æŒ–æ˜å‡ºå¥å­ä¸­çš„ç‰¹å¾ä¿¡æ¯ï¼Œä»è€Œæå‡æ€§èƒ½ï¼Œä½†åŒæ—¶ä½¿å¾—æ¨¡å‹å˜å¾—å¤æ‚ã€è€—æ—¶ï¼‰&lt;/p&gt;
&lt;p&gt;æ¨¡å‹çš„æ•´ä½“æ¡†æ¶å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://i.imgur.com/uz4z7le.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://i.imgur.com/uz4z7le.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä¸‹é¢å…·ä½“çœ‹çœ‹è¿™ä¸¤ä¸ªæ¨¡å‹æ˜¯å¦‚ä½•å®ç°çš„ã€‚&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;&lt;strong&gt;å¥å­çš„è¡¨å¾æ¨¡å‹&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;æ¨¡å‹æ˜¯åŸºäºCNNçš„ï¼Œå·ç§¯å±‚æœ‰ä¸¤ç§å·ç§¯æ–¹å¼ï¼Œæ± åŒ–å±‚åˆ™æœ‰ä¸‰ç§ã€‚&lt;/p&gt;
&lt;p class=&quot; has-jax has-jax has-jax has-jax has-jax has-jax has-jax has-jax has-jax has-jax has-jax has-jax has-jax has-jax has-jax has-jax has-jax has-jax&quot;&gt;å‡è®¾æ¨¡å‹çš„è¾“å…¥ä¸ºäºŒç»´çŸ©é˜µÂ &lt;span id=&quot;MathJax-Element-33-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;S&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;e&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;n&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;t&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-191&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-192&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-193&quot; class=&quot;mi&quot;&gt;S&lt;span id=&quot;MathJax-Span-194&quot; class=&quot;mi&quot;&gt;e&lt;span id=&quot;MathJax-Span-195&quot; class=&quot;mi&quot;&gt;n&lt;span id=&quot;MathJax-Span-196&quot; class=&quot;mi&quot;&gt;t&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;ï¼Œ&lt;span id=&quot;MathJax-Element-34-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;S&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;e&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;n&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;t&amp;lt;/mi&amp;gt;&amp;lt;mo&amp;gt;&amp;amp;#x2208;&amp;lt;/mo&amp;gt;&amp;lt;msup&amp;gt;&amp;lt;mi&amp;gt;R&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;l&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;e&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;n&amp;lt;/mi&amp;gt;&amp;lt;mo&amp;gt;&amp;amp;#xD7;&amp;lt;/mo&amp;gt;&amp;lt;mi&amp;gt;D&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;i&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;m&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msup&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-197&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-198&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-199&quot; class=&quot;mi&quot;&gt;S&lt;span id=&quot;MathJax-Span-200&quot; class=&quot;mi&quot;&gt;e&lt;span id=&quot;MathJax-Span-201&quot; class=&quot;mi&quot;&gt;n&lt;span id=&quot;MathJax-Span-202&quot; class=&quot;mi&quot;&gt;t&lt;span id=&quot;MathJax-Span-203&quot; class=&quot;mo&quot;&gt;âˆˆ&lt;span id=&quot;MathJax-Span-204&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-205&quot; class=&quot;mi&quot;&gt;R&lt;span id=&quot;MathJax-Span-206&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-207&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-208&quot; class=&quot;mi&quot;&gt;l&lt;span id=&quot;MathJax-Span-209&quot; class=&quot;mi&quot;&gt;e&lt;span id=&quot;MathJax-Span-210&quot; class=&quot;mi&quot;&gt;n&lt;span id=&quot;MathJax-Span-211&quot; class=&quot;mo&quot;&gt;Ã—&lt;span id=&quot;MathJax-Span-212&quot; class=&quot;mi&quot;&gt;D&lt;span id=&quot;MathJax-Span-213&quot; class=&quot;mi&quot;&gt;i&lt;span id=&quot;MathJax-Span-214&quot; class=&quot;mi&quot;&gt;m&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;ï¼Œå…¶ä¸­Â &lt;span id=&quot;MathJax-Element-35-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;l&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;e&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;n&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-215&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-216&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-217&quot; class=&quot;mi&quot;&gt;l&lt;span id=&quot;MathJax-Span-218&quot; class=&quot;mi&quot;&gt;e&lt;span id=&quot;MathJax-Span-219&quot; class=&quot;mi&quot;&gt;n&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;lenÂ è¡¨ç¤ºå¥å­åˆ‡åˆ†ä¸ºToken Liståçš„é•¿åº¦(Tokenå¯ä»¥æ˜¯è¯/å­—)ï¼Œ&lt;span id=&quot;MathJax-Element-36-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;D&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;i&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;m&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-220&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-221&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-222&quot; class=&quot;mi&quot;&gt;D&lt;span id=&quot;MathJax-Span-223&quot; class=&quot;mi&quot;&gt;i&lt;span id=&quot;MathJax-Span-224&quot; class=&quot;mi&quot;&gt;m&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Â è¡¨ç¤ºTokençš„Embeddingè¡¨ç¤ºçš„ç»´åº¦ã€‚ç”±æ­¤æœ‰Â &lt;span id=&quot;MathJax-Element-37-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;S&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;e&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;n&amp;lt;/mi&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;t&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;i&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-225&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-226&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-227&quot; class=&quot;mi&quot;&gt;S&lt;span id=&quot;MathJax-Span-228&quot; class=&quot;mi&quot;&gt;e&lt;span id=&quot;MathJax-Span-229&quot; class=&quot;mi&quot;&gt;n&lt;span id=&quot;MathJax-Span-230&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-231&quot; class=&quot;mi&quot;&gt;t&lt;span id=&quot;MathJax-Span-232&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-233&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-234&quot; class=&quot;mi&quot;&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;è¡¨ç¤ºçŸ©é˜µçš„ç¬¬Â &lt;span id=&quot;MathJax-Element-38-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;i&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-235&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-236&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-237&quot; class=&quot;mi&quot;&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Â è¡Œï¼Œå³è¾“å…¥ä¸­çš„ç¬¬Â &lt;span id=&quot;MathJax-Element-39-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;i&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-238&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-239&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-240&quot; class=&quot;mi&quot;&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Â ä¸ªTokençš„Embeddingè¡¨ç¤ºï¼›&lt;span id=&quot;MathJax-Element-40-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;S&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;e&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;n&amp;lt;/mi&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;t&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;i&amp;lt;/mi&amp;gt;&amp;lt;mo&amp;gt;:&amp;lt;/mo&amp;gt;&amp;lt;mi&amp;gt;j&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-241&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-242&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-243&quot; class=&quot;mi&quot;&gt;S&lt;span id=&quot;MathJax-Span-244&quot; class=&quot;mi&quot;&gt;e&lt;span id=&quot;MathJax-Span-245&quot; class=&quot;mi&quot;&gt;n&lt;span id=&quot;MathJax-Span-246&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-247&quot; class=&quot;mi&quot;&gt;t&lt;span id=&quot;MathJax-Span-248&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-249&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-250&quot; class=&quot;mi&quot;&gt;i&lt;span id=&quot;MathJax-Span-251&quot; class=&quot;mo&quot;&gt;:&lt;span id=&quot;MathJax-Span-252&quot; class=&quot;mi&quot;&gt;j&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Â è¡¨ç¤ºçŸ©é˜µä¸­çš„ç¬¬Â &lt;span id=&quot;MathJax-Element-41-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;i&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-253&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-254&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-255&quot; class=&quot;mi&quot;&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;åˆ°ç¬¬Â &lt;span id=&quot;MathJax-Element-42-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;j&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-256&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-257&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-258&quot; class=&quot;mi&quot;&gt;j&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Â è¡Œçš„ä¸€ä¸ªåˆ‡ç‰‡ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå­çŸ©é˜µï¼›&lt;span id=&quot;MathJax-Element-43-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;S&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;e&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;n&amp;lt;/mi&amp;gt;&amp;lt;msubsup&amp;gt;&amp;lt;mi&amp;gt;t&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;i&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mo stretchy=&amp;quot;false&amp;quot;&amp;gt;[&amp;lt;/mo&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;mo stretchy=&amp;quot;false&amp;quot;&amp;gt;]&amp;lt;/mo&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msubsup&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-259&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-260&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-261&quot; class=&quot;mi&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Senti[k]Â è¡¨ç¤ºçŸ©é˜µçš„ç¬¬Â &lt;span id=&quot;MathJax-Element-44-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;i&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-274&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-275&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-276&quot; class=&quot;mi&quot;&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Â è¡Œç¬¬Â &lt;span id=&quot;MathJax-Element-45-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-277&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-278&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-279&quot; class=&quot;mi&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;kÂ åˆ—çš„å€¼ï¼Œå¯¹åº”æ˜¯Embeddingçš„ç¬¬Â &lt;span id=&quot;MathJax-Element-46-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-280&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-281&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-282&quot; class=&quot;mi&quot;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Â ä¸ªå€¼ï¼›è€ŒÂ &lt;span id=&quot;MathJax-Element-47-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;S&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;e&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;n&amp;lt;/mi&amp;gt;&amp;lt;msubsup&amp;gt;&amp;lt;mi&amp;gt;t&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;i&amp;lt;/mi&amp;gt;&amp;lt;mo&amp;gt;:&amp;lt;/mo&amp;gt;&amp;lt;mi&amp;gt;j&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mo stretchy=&amp;quot;false&amp;quot;&amp;gt;[&amp;lt;/mo&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;mo stretchy=&amp;quot;false&amp;quot;&amp;gt;]&amp;lt;/mo&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msubsup&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-283&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-284&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-285&quot; class=&quot;mi&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Senti:j[k]Â åˆ™æ˜¯çŸ©é˜µä¸­ç¬¬Â &lt;span id=&quot;MathJax-Element-48-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;i&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-300&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-301&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-302&quot; class=&quot;mi&quot;&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Â è¡Œåˆ°ç¬¬Â &lt;span id=&quot;MathJax-Element-49-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;j&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-303&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-304&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-305&quot; class=&quot;mi&quot;&gt;j&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Â è¡Œä¸­çš„ç¬¬Â &lt;span id=&quot;MathJax-Element-50-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-306&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-307&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-308&quot; class=&quot;mi&quot;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Â åˆ—çš„ä¸€ä¸ªåˆ‡ç‰‡ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;å·ç§¯å±‚æœ‰ä¸¤ç§å·ç§¯çš„æ–¹å¼ï¼š(1)ç²’åº¦ä¸ºwordçš„å·ç§¯;(2)ç²’åº¦ä¸ºembedding ç»´åº¦ä¸Šçš„å·ç§¯ã€‚å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://i.imgur.com/26LDDfD.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://i.imgur.com/26LDDfD.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å…¶ä¸­ï¼Œç¬¬ä¸€ç§å·ç§¯æ–¹å¼ä¸ä¹‹å‰çš„Kim Yæå‡ºæ¨¡å‹ä¸­çš„ç›¸åŒï¼Œç›¸å½“äºæ˜¯&lt;em&gt;n-gram&lt;/em&gt;ç‰¹å¾çš„æŠ½å–ï¼›è€Œå¯¹äºç¬¬äºŒç§å·ç§¯æ–¹å¼ï¼Œè®ºæ–‡ä½œè€…ç»™å‡ºçš„è§£é‡Šæ˜¯ï¼Œ(1)è¿™ç§æ–¹å¼æœ‰åŠ©äºå……åˆ†åœ°æå–å‡ºè¾“å…¥çš„ç‰¹å¾ä¿¡æ¯ï¼›(2)ç”±äºç²’åº¦æ›´å°ï¼Œæ‰€ä»¥åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­çš„å‚æ•°è°ƒæ•´ä¸Šï¼Œæ¯ä¸€ä¸ªç»´åº¦èƒ½å¤Ÿå¾—åˆ°ä¸åŒç¨‹åº¦çš„å‚æ•°è°ƒæ•´ã€‚ï¼ˆç¬¬äºŒç§å·ç§¯æ–¹å¼ä»ç›´è§‚ä¸Šæ²¡æœ‰å¤ªå¤šçš„ç‰©ç†æ„ä¹‰ï¼Œè€Œä½œè€…ä¹Ÿæ˜¯ç›´è¯´ä¸èƒ½å¤Ÿç»™å‡ºç¬¦åˆäººç›´è§‚æƒ³æ³•ä¸Šçš„è§£é‡Šï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æ¨¡å‹é™¤äº†ä½¿ç”¨ä¼ ç»Ÿçš„&lt;code&gt;max-pooling&lt;/code&gt;ï¼Œè¿˜ä½¿ç”¨äº†&lt;code&gt;min-pooling&lt;/code&gt;å’Œ&lt;code&gt;mean-pooling&lt;/code&gt;æ–¹å¼ã€‚&lt;/p&gt;
&lt;p class=&quot; has-jax has-jax has-jax has-jax has-jax has-jax&quot;&gt;å‡è®¾Â &lt;span id=&quot;MathJax-Element-51-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;g&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;r&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;o&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;u&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;p&amp;lt;/mi&amp;gt;&amp;lt;mo stretchy=&amp;quot;false&amp;quot;&amp;gt;(&amp;lt;/mo&amp;gt;&amp;lt;mi&amp;gt;w&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;s&amp;lt;/mi&amp;gt;&amp;lt;mo&amp;gt;,&amp;lt;/mo&amp;gt;&amp;lt;mi&amp;gt;p&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;o&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;o&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;l&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;i&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;n&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;g&amp;lt;/mi&amp;gt;&amp;lt;mo&amp;gt;,&amp;lt;/mo&amp;gt;&amp;lt;mi&amp;gt;s&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;e&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;n&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;t&amp;lt;/mi&amp;gt;&amp;lt;mo stretchy=&amp;quot;false&amp;quot;&amp;gt;)&amp;lt;/mo&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-309&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-310&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-311&quot; class=&quot;mi&quot;&gt;g&lt;span id=&quot;MathJax-Span-312&quot; class=&quot;mi&quot;&gt;r&lt;span id=&quot;MathJax-Span-313&quot; class=&quot;mi&quot;&gt;o&lt;span id=&quot;MathJax-Span-314&quot; class=&quot;mi&quot;&gt;u&lt;span id=&quot;MathJax-Span-315&quot; class=&quot;mi&quot;&gt;p&lt;span id=&quot;MathJax-Span-316&quot; class=&quot;mo&quot;&gt;(&lt;span id=&quot;MathJax-Span-317&quot; class=&quot;mi&quot;&gt;w&lt;span id=&quot;MathJax-Span-318&quot; class=&quot;mi&quot;&gt;s&lt;span id=&quot;MathJax-Span-319&quot; class=&quot;mo&quot;&gt;,&lt;span id=&quot;MathJax-Span-320&quot; class=&quot;mi&quot;&gt;p&lt;span id=&quot;MathJax-Span-321&quot; class=&quot;mi&quot;&gt;o&lt;span id=&quot;MathJax-Span-322&quot; class=&quot;mi&quot;&gt;o&lt;span id=&quot;MathJax-Span-323&quot; class=&quot;mi&quot;&gt;l&lt;span id=&quot;MathJax-Span-324&quot; class=&quot;mi&quot;&gt;i&lt;span id=&quot;MathJax-Span-325&quot; class=&quot;mi&quot;&gt;n&lt;span id=&quot;MathJax-Span-326&quot; class=&quot;mi&quot;&gt;g&lt;span id=&quot;MathJax-Span-327&quot; class=&quot;mo&quot;&gt;,&lt;span id=&quot;MathJax-Span-328&quot; class=&quot;mi&quot;&gt;s&lt;span id=&quot;MathJax-Span-329&quot; class=&quot;mi&quot;&gt;e&lt;span id=&quot;MathJax-Span-330&quot; class=&quot;mi&quot;&gt;n&lt;span id=&quot;MathJax-Span-331&quot; class=&quot;mi&quot;&gt;t&lt;span id=&quot;MathJax-Span-332&quot; class=&quot;mo&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Â è¡¨ç¤ºå·ç§¯å®½åº¦ä¸ºÂ &lt;span id=&quot;MathJax-Element-52-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;w&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;s&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-333&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-334&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-335&quot; class=&quot;mi&quot;&gt;w&lt;span id=&quot;MathJax-Span-336&quot; class=&quot;mi&quot;&gt;s&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;ï¼Œä½¿ç”¨Â &lt;span id=&quot;MathJax-Element-53-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;p&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;o&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;o&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;l&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;i&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;n&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;g&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-337&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-338&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-339&quot; class=&quot;mi&quot;&gt;p&lt;span id=&quot;MathJax-Span-340&quot; class=&quot;mi&quot;&gt;o&lt;span id=&quot;MathJax-Span-341&quot; class=&quot;mi&quot;&gt;o&lt;span id=&quot;MathJax-Span-342&quot; class=&quot;mi&quot;&gt;l&lt;span id=&quot;MathJax-Span-343&quot; class=&quot;mi&quot;&gt;i&lt;span id=&quot;MathJax-Span-344&quot; class=&quot;mi&quot;&gt;n&lt;span id=&quot;MathJax-Span-345&quot; class=&quot;mi&quot;&gt;g&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Â æ± åŒ–å‡½æ•°ï¼Œåº”ç”¨åœ¨è¾“å…¥çš„å¥å­Â &lt;span id=&quot;MathJax-Element-54-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;s&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;e&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;n&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;t&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-346&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-347&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-348&quot; class=&quot;mi&quot;&gt;s&lt;span id=&quot;MathJax-Span-349&quot; class=&quot;mi&quot;&gt;e&lt;span id=&quot;MathJax-Span-350&quot; class=&quot;mi&quot;&gt;n&lt;span id=&quot;MathJax-Span-351&quot; class=&quot;mi&quot;&gt;tÂ &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;ä¸Šã€‚æˆ‘ä»¬ä½¿ç”¨äº†ä¸¤ç§ç±»å‹çš„&lt;strong&gt;&lt;code&gt;building block&lt;/code&gt;&lt;/strong&gt;ï¼Œåˆ†åˆ«æ˜¯Â &lt;span id=&quot;MathJax-Element-55-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;b&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;l&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;o&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;c&amp;lt;/mi&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;A&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-352&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-353&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-354&quot; class=&quot;mi&quot;&gt;b&lt;span id=&quot;MathJax-Span-355&quot; class=&quot;mi&quot;&gt;l&lt;span id=&quot;MathJax-Span-356&quot; class=&quot;mi&quot;&gt;o&lt;span id=&quot;MathJax-Span-357&quot; class=&quot;mi&quot;&gt;c&lt;span id=&quot;MathJax-Span-358&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-359&quot; class=&quot;mi&quot;&gt;k&lt;span id=&quot;MathJax-Span-360&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-361&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-362&quot; class=&quot;mi&quot;&gt;A&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Â å’ŒÂ &lt;span id=&quot;MathJax-Element-56-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;b&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;l&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;o&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;c&amp;lt;/mi&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;B&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-363&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-364&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-365&quot; class=&quot;mi&quot;&gt;b&lt;span id=&quot;MathJax-Span-366&quot; class=&quot;mi&quot;&gt;l&lt;span id=&quot;MathJax-Span-367&quot; class=&quot;mi&quot;&gt;o&lt;span id=&quot;MathJax-Span-368&quot; class=&quot;mi&quot;&gt;c&lt;span id=&quot;MathJax-Span-369&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-370&quot; class=&quot;mi&quot;&gt;k&lt;span id=&quot;MathJax-Span-371&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-372&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-373&quot; class=&quot;mi&quot;&gt;B&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;ä¸Šï¼Œå®šä¹‰å¦‚ä¸‹&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot; has-jax&quot;&gt;Â &lt;/p&gt;
&lt;p&gt;&lt;span id=&quot;MathJax-Element-57-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot; display=&amp;quot;block&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;b&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;l&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;o&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;c&amp;lt;/mi&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;A&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;mo&amp;gt;=&amp;lt;/mo&amp;gt;&amp;lt;mo fence=&amp;quot;false&amp;quot; stretchy=&amp;quot;false&amp;quot;&amp;gt;{&amp;lt;/mo&amp;gt;&amp;lt;mi&amp;gt;g&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;r&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;o&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;u&amp;lt;/mi&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;p&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;A&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;mo stretchy=&amp;quot;false&amp;quot;&amp;gt;(&amp;lt;/mo&amp;gt;&amp;lt;mi&amp;gt;w&amp;lt;/mi&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;s&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;a&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;mo&amp;gt;,&amp;lt;/mo&amp;gt;&amp;lt;mi&amp;gt;p&amp;lt;/mi&amp;gt;&amp;lt;mo&amp;gt;,&amp;lt;/mo&amp;gt;&amp;lt;mi&amp;gt;s&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;e&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;n&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;t&amp;lt;/mi&amp;gt;&amp;lt;mo stretchy=&amp;quot;false&amp;quot;&amp;gt;)&amp;lt;/mo&amp;gt;&amp;lt;mo&amp;gt;:&amp;lt;/mo&amp;gt;&amp;lt;mi&amp;gt;p&amp;lt;/mi&amp;gt;&amp;lt;mo&amp;gt;&amp;amp;#x2208;&amp;lt;/mo&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;m&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;a&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;x&amp;lt;/mi&amp;gt;&amp;lt;mo&amp;gt;,&amp;lt;/mo&amp;gt;&amp;lt;mi&amp;gt;m&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;i&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;n&amp;lt;/mi&amp;gt;&amp;lt;mo&amp;gt;,&amp;lt;/mo&amp;gt;&amp;lt;mi&amp;gt;m&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;e&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;a&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;n&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;mo fence=&amp;quot;false&amp;quot; stretchy=&amp;quot;false&amp;quot;&amp;gt;}&amp;lt;/mo&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-374&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-375&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-376&quot; class=&quot;mi&quot;&gt;b&lt;span id=&quot;MathJax-Span-377&quot; class=&quot;mi&quot;&gt;l&lt;span id=&quot;MathJax-Span-378&quot; class=&quot;mi&quot;&gt;o&lt;span id=&quot;MathJax-Span-379&quot; class=&quot;mi&quot;&gt;c&lt;span id=&quot;MathJax-Span-380&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-381&quot; class=&quot;mi&quot;&gt;k&lt;span id=&quot;MathJax-Span-382&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-383&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-384&quot; class=&quot;mi&quot;&gt;A&lt;span id=&quot;MathJax-Span-385&quot; class=&quot;mo&quot;&gt;=&lt;span id=&quot;MathJax-Span-386&quot; class=&quot;mo&quot;&gt;{&lt;span id=&quot;MathJax-Span-387&quot; class=&quot;mi&quot;&gt;g&lt;span id=&quot;MathJax-Span-388&quot; class=&quot;mi&quot;&gt;r&lt;span id=&quot;MathJax-Span-389&quot; class=&quot;mi&quot;&gt;o&lt;span id=&quot;MathJax-Span-390&quot; class=&quot;mi&quot;&gt;u&lt;span id=&quot;MathJax-Span-391&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-392&quot; class=&quot;mi&quot;&gt;p&lt;span id=&quot;MathJax-Span-393&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-394&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-395&quot; class=&quot;mi&quot;&gt;A&lt;span id=&quot;MathJax-Span-396&quot; class=&quot;mo&quot;&gt;(&lt;span id=&quot;MathJax-Span-397&quot; class=&quot;mi&quot;&gt;w&lt;span id=&quot;MathJax-Span-398&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-399&quot; class=&quot;mi&quot;&gt;s&lt;span id=&quot;MathJax-Span-400&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-401&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-402&quot; class=&quot;mi&quot;&gt;a&lt;span id=&quot;MathJax-Span-403&quot; class=&quot;mo&quot;&gt;,&lt;span id=&quot;MathJax-Span-404&quot; class=&quot;mi&quot;&gt;p&lt;span id=&quot;MathJax-Span-405&quot; class=&quot;mo&quot;&gt;,&lt;span id=&quot;MathJax-Span-406&quot; class=&quot;mi&quot;&gt;s&lt;span id=&quot;MathJax-Span-407&quot; class=&quot;mi&quot;&gt;e&lt;span id=&quot;MathJax-Span-408&quot; class=&quot;mi&quot;&gt;n&lt;span id=&quot;MathJax-Span-409&quot; class=&quot;mi&quot;&gt;t&lt;span id=&quot;MathJax-Span-410&quot; class=&quot;mo&quot;&gt;)&lt;span id=&quot;MathJax-Span-411&quot; class=&quot;mo&quot;&gt;:&lt;span id=&quot;MathJax-Span-412&quot; class=&quot;mi&quot;&gt;p&lt;span id=&quot;MathJax-Span-413&quot; class=&quot;mo&quot;&gt;âˆˆ&lt;span id=&quot;MathJax-Span-414&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-415&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-416&quot; class=&quot;mi&quot;&gt;m&lt;span id=&quot;MathJax-Span-417&quot; class=&quot;mi&quot;&gt;a&lt;span id=&quot;MathJax-Span-418&quot; class=&quot;mi&quot;&gt;x&lt;span id=&quot;MathJax-Span-419&quot; class=&quot;mo&quot;&gt;,&lt;span id=&quot;MathJax-Span-420&quot; class=&quot;mi&quot;&gt;m&lt;span id=&quot;MathJax-Span-421&quot; class=&quot;mi&quot;&gt;i&lt;span id=&quot;MathJax-Span-422&quot; class=&quot;mi&quot;&gt;n&lt;span id=&quot;MathJax-Span-423&quot; class=&quot;mo&quot;&gt;,&lt;span id=&quot;MathJax-Span-424&quot; class=&quot;mi&quot;&gt;m&lt;span id=&quot;MathJax-Span-425&quot; class=&quot;mi&quot;&gt;e&lt;span id=&quot;MathJax-Span-426&quot; class=&quot;mi&quot;&gt;a&lt;span id=&quot;MathJax-Span-427&quot; class=&quot;mi&quot;&gt;n&lt;span id=&quot;MathJax-Span-428&quot; class=&quot;mo&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML MJX_Assistive_MathML_Block&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p class=&quot; has-jax has-jax&quot;&gt;è¿™é‡ŒÂ &lt;span id=&quot;MathJax-Element-58-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;b&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;l&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;o&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;c&amp;lt;/mi&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;A&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-429&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-430&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-431&quot; class=&quot;mi&quot;&gt;b&lt;span id=&quot;MathJax-Span-432&quot; class=&quot;mi&quot;&gt;l&lt;span id=&quot;MathJax-Span-433&quot; class=&quot;mi&quot;&gt;o&lt;span id=&quot;MathJax-Span-434&quot; class=&quot;mi&quot;&gt;c&lt;span id=&quot;MathJax-Span-435&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-436&quot; class=&quot;mi&quot;&gt;k&lt;span id=&quot;MathJax-Span-437&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-438&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-439&quot; class=&quot;mi&quot;&gt;A&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Â æœ‰ä¸‰ç»„å·ç§¯å±‚ï¼Œå·ç§¯çª—å£çš„å®½åº¦ä¸€è‡´(éƒ½æ˜¯Â &lt;span id=&quot;MathJax-Element-59-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;w&amp;lt;/mi&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;s&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;a&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-440&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-441&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-442&quot; class=&quot;mi&quot;&gt;w&lt;span id=&quot;MathJax-Span-443&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-444&quot; class=&quot;mi&quot;&gt;s&lt;span id=&quot;MathJax-Span-445&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-446&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-447&quot; class=&quot;mi&quot;&gt;a&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Â )ï¼Œæ¯ä¸€ç»„å¯¹åº”ä¸€ç§æ± åŒ–æ“ä½œã€‚è¿™é‡Œæ± åŒ–æ“ä½œå’Œå·ç§¯å±‚æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å¹¶ä¸æ˜¯ä¸€ä¸ªå·ç§¯å±‚ä¸Šå®æ–½ä¸‰ç§æ± åŒ–æ“ä½œ(è™½ç„¶ä¹Ÿå¯ä»¥è¿™ä¹ˆåšï¼Œä½œè€…æ²¡æœ‰è¿™ä¹ˆåšçš„åŸå› æ˜¯ç”±äºæ¿€æ´»å‡½æ•°çš„å­˜åœ¨ï¼Œå¯¹æ¯ä¸ªå·ç§¯ç»“æœéƒ½è¿›è¡Œ&lt;code&gt;max-pooling&lt;/code&gt;å’Œ&lt;code&gt;min-pooling&lt;/code&gt;æ˜¯æ²¡æœ‰å¿…è¦çš„)ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot; has-jax&quot;&gt;è€ŒÂ &lt;span id=&quot;MathJax-Element-60-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;b&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;l&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;o&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;c&amp;lt;/mi&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;B&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-448&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-449&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-450&quot; class=&quot;mi&quot;&gt;b&lt;span id=&quot;MathJax-Span-451&quot; class=&quot;mi&quot;&gt;l&lt;span id=&quot;MathJax-Span-452&quot; class=&quot;mi&quot;&gt;o&lt;span id=&quot;MathJax-Span-453&quot; class=&quot;mi&quot;&gt;c&lt;span id=&quot;MathJax-Span-454&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-455&quot; class=&quot;mi&quot;&gt;k&lt;span id=&quot;MathJax-Span-456&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-457&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-458&quot; class=&quot;mi&quot;&gt;B&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Â çš„å®šä¹‰å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot; has-jax&quot;&gt;Â &lt;/p&gt;
&lt;p&gt;&lt;span id=&quot;MathJax-Element-61-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot; display=&amp;quot;block&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;b&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;l&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;o&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;c&amp;lt;/mi&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;B&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;mo&amp;gt;=&amp;lt;/mo&amp;gt;&amp;lt;mo fence=&amp;quot;false&amp;quot; stretchy=&amp;quot;false&amp;quot;&amp;gt;{&amp;lt;/mo&amp;gt;&amp;lt;mi&amp;gt;g&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;r&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;o&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;u&amp;lt;/mi&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;p&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;B&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;mo stretchy=&amp;quot;false&amp;quot;&amp;gt;(&amp;lt;/mo&amp;gt;&amp;lt;mi&amp;gt;w&amp;lt;/mi&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;s&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;b&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;mo&amp;gt;,&amp;lt;/mo&amp;gt;&amp;lt;mi&amp;gt;p&amp;lt;/mi&amp;gt;&amp;lt;mo&amp;gt;,&amp;lt;/mo&amp;gt;&amp;lt;mi&amp;gt;s&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;e&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;n&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;t&amp;lt;/mi&amp;gt;&amp;lt;mo stretchy=&amp;quot;false&amp;quot;&amp;gt;)&amp;lt;/mo&amp;gt;&amp;lt;mo&amp;gt;:&amp;lt;/mo&amp;gt;&amp;lt;mi&amp;gt;p&amp;lt;/mi&amp;gt;&amp;lt;mo&amp;gt;&amp;amp;#x2208;&amp;lt;/mo&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;m&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;a&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;x&amp;lt;/mi&amp;gt;&amp;lt;mo&amp;gt;,&amp;lt;/mo&amp;gt;&amp;lt;mi&amp;gt;m&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;i&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;n&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;mo fence=&amp;quot;false&amp;quot; stretchy=&amp;quot;false&amp;quot;&amp;gt;}&amp;lt;/mo&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-459&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-460&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-461&quot; class=&quot;mi&quot;&gt;b&lt;span id=&quot;MathJax-Span-462&quot; class=&quot;mi&quot;&gt;l&lt;span id=&quot;MathJax-Span-463&quot; class=&quot;mi&quot;&gt;o&lt;span id=&quot;MathJax-Span-464&quot; class=&quot;mi&quot;&gt;c&lt;span id=&quot;MathJax-Span-465&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-466&quot; class=&quot;mi&quot;&gt;k&lt;span id=&quot;MathJax-Span-467&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-468&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-469&quot; class=&quot;mi&quot;&gt;B&lt;span id=&quot;MathJax-Span-470&quot; class=&quot;mo&quot;&gt;=&lt;span id=&quot;MathJax-Span-471&quot; class=&quot;mo&quot;&gt;{&lt;span id=&quot;MathJax-Span-472&quot; class=&quot;mi&quot;&gt;g&lt;span id=&quot;MathJax-Span-473&quot; class=&quot;mi&quot;&gt;r&lt;span id=&quot;MathJax-Span-474&quot; class=&quot;mi&quot;&gt;o&lt;span id=&quot;MathJax-Span-475&quot; class=&quot;mi&quot;&gt;u&lt;span id=&quot;MathJax-Span-476&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-477&quot; class=&quot;mi&quot;&gt;p&lt;span id=&quot;MathJax-Span-478&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-479&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-480&quot; class=&quot;mi&quot;&gt;B&lt;span id=&quot;MathJax-Span-481&quot; class=&quot;mo&quot;&gt;(&lt;span id=&quot;MathJax-Span-482&quot; class=&quot;mi&quot;&gt;w&lt;span id=&quot;MathJax-Span-483&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-484&quot; class=&quot;mi&quot;&gt;s&lt;span id=&quot;MathJax-Span-485&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-486&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-487&quot; class=&quot;mi&quot;&gt;b&lt;span id=&quot;MathJax-Span-488&quot; class=&quot;mo&quot;&gt;,&lt;span id=&quot;MathJax-Span-489&quot; class=&quot;mi&quot;&gt;p&lt;span id=&quot;MathJax-Span-490&quot; class=&quot;mo&quot;&gt;,&lt;span id=&quot;MathJax-Span-491&quot; class=&quot;mi&quot;&gt;s&lt;span id=&quot;MathJax-Span-492&quot; class=&quot;mi&quot;&gt;e&lt;span id=&quot;MathJax-Span-493&quot; class=&quot;mi&quot;&gt;n&lt;span id=&quot;MathJax-Span-494&quot; class=&quot;mi&quot;&gt;t&lt;span id=&quot;MathJax-Span-495&quot; class=&quot;mo&quot;&gt;)&lt;span id=&quot;MathJax-Span-496&quot; class=&quot;mo&quot;&gt;:&lt;span id=&quot;MathJax-Span-497&quot; class=&quot;mi&quot;&gt;p&lt;span id=&quot;MathJax-Span-498&quot; class=&quot;mo&quot;&gt;âˆˆ&lt;span id=&quot;MathJax-Span-499&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-500&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-501&quot; class=&quot;mi&quot;&gt;m&lt;span id=&quot;MathJax-Span-502&quot; class=&quot;mi&quot;&gt;a&lt;span id=&quot;MathJax-Span-503&quot; class=&quot;mi&quot;&gt;x&lt;span id=&quot;MathJax-Span-504&quot; class=&quot;mo&quot;&gt;,&lt;span id=&quot;MathJax-Span-505&quot; class=&quot;mi&quot;&gt;m&lt;span id=&quot;MathJax-Span-506&quot; class=&quot;mi&quot;&gt;i&lt;span id=&quot;MathJax-Span-507&quot; class=&quot;mi&quot;&gt;n&lt;span id=&quot;MathJax-Span-508&quot; class=&quot;mo&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML MJX_Assistive_MathML_Block&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p class=&quot; has-jax has-jax has-jax has-jax&quot;&gt;è¿™é‡ŒÂ &lt;span id=&quot;MathJax-Element-62-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;b&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;l&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;o&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;c&amp;lt;/mi&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;B&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-509&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-510&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-511&quot; class=&quot;mi&quot;&gt;b&lt;span id=&quot;MathJax-Span-512&quot; class=&quot;mi&quot;&gt;l&lt;span id=&quot;MathJax-Span-513&quot; class=&quot;mi&quot;&gt;o&lt;span id=&quot;MathJax-Span-514&quot; class=&quot;mi&quot;&gt;c&lt;span id=&quot;MathJax-Span-515&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-516&quot; class=&quot;mi&quot;&gt;k&lt;span id=&quot;MathJax-Span-517&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-518&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-519&quot; class=&quot;mi&quot;&gt;B&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Â æœ‰ä¸¤ç»„å·ç§¯å±‚ï¼Œå·ç§¯çª—å£çš„å®½åº¦ä¸ºÂ &lt;span id=&quot;MathJax-Element-63-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;w&amp;lt;/mi&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;s&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;b&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-520&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-521&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-522&quot; class=&quot;mi&quot;&gt;w&lt;span id=&quot;MathJax-Span-523&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-524&quot; class=&quot;mi&quot;&gt;s&lt;span id=&quot;MathJax-Span-525&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-526&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-527&quot; class=&quot;mi&quot;&gt;b&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;ï¼Œä¸¤ç»„åˆ†åˆ«å¯¹åº”&lt;code&gt;max-pooling&lt;/code&gt;å’Œ&lt;code&gt;min-pooling&lt;/code&gt;çš„æ“ä½œã€‚å€¼å¾—è¯´æ˜çš„æ˜¯ï¼Œ&lt;span id=&quot;MathJax-Element-64-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;g&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;r&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;o&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;u&amp;lt;/mi&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;p&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;B&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;mo stretchy=&amp;quot;false&amp;quot;&amp;gt;(&amp;lt;/mo&amp;gt;&amp;lt;mo&amp;gt;&amp;amp;#x2217;&amp;lt;/mo&amp;gt;&amp;lt;mo stretchy=&amp;quot;false&amp;quot;&amp;gt;)&amp;lt;/mo&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-528&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-529&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-530&quot; class=&quot;mi&quot;&gt;g&lt;span id=&quot;MathJax-Span-531&quot; class=&quot;mi&quot;&gt;r&lt;span id=&quot;MathJax-Span-532&quot; class=&quot;mi&quot;&gt;o&lt;span id=&quot;MathJax-Span-533&quot; class=&quot;mi&quot;&gt;u&lt;span id=&quot;MathJax-Span-534&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-535&quot; class=&quot;mi&quot;&gt;p&lt;span id=&quot;MathJax-Span-536&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-537&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-538&quot; class=&quot;mi&quot;&gt;B&lt;span id=&quot;MathJax-Span-539&quot; class=&quot;mo&quot;&gt;(&lt;span id=&quot;MathJax-Span-540&quot; class=&quot;mo&quot;&gt;âˆ—&lt;span id=&quot;MathJax-Span-541&quot; class=&quot;mo&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Â ä¸­çš„å·ç§¯å±‚å¯¹åº”æœ‰Â &lt;span id=&quot;MathJax-Element-65-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;D&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;i&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;m&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-542&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-543&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-544&quot; class=&quot;mi&quot;&gt;D&lt;span id=&quot;MathJax-Span-545&quot; class=&quot;mi&quot;&gt;i&lt;span id=&quot;MathJax-Span-546&quot; class=&quot;mi&quot;&gt;m&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Â ä¸ªä»¥&lt;code&gt;embedding dimension&lt;/code&gt;ä¸ºç²’åº¦çš„å·ç§¯çª—å£ï¼Œä¹Ÿå°±æ˜¯å¯¹&lt;code&gt;embedding&lt;/code&gt;çš„æ¯ä¸€ç»´åº¦åšå·ç§¯è¿ç®—ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œåªæ‰€ä»¥è¦ç»„åˆè¿™äº›å¤šæ ·çš„å·ç§¯å’Œæ± åŒ–æ“ä½œï¼ŒåŸå› æ˜¯å¸Œæœ›èƒ½å¤Ÿä»å¤šä¸ªæ–¹é¢æ¥æå–å‡ºè¾“å…¥ä¸­çš„ç‰¹å¾ä¿¡æ¯ï¼Œä»¥ä¾›åç»­çš„å†³ç­–ä»»åŠ¡ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;å¤šç§çª—å£å°ºå¯¸&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä¸ä¼ ç»Ÿçš„&lt;em&gt;n-gram&lt;/em&gt;æ¨¡å‹ç›¸ä¼¼ï¼Œè¿™é‡Œåœ¨&lt;strong&gt;&lt;code&gt;building block&lt;/code&gt;&lt;/strong&gt;ä¸­ä½¿ç”¨äº†å¤šç§å°ºå¯¸çš„å·ç§¯çª—å£ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://imgur.com/kRijNVc.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://imgur.com/kRijNVc.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class=&quot; has-jax has-jax has-jax&quot;&gt;å…¶ä¸­Â &lt;span id=&quot;MathJax-Element-66-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;w&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;s&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-547&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-548&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-549&quot; class=&quot;mi&quot;&gt;w&lt;span id=&quot;MathJax-Span-550&quot; class=&quot;mi&quot;&gt;s&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;wsÂ è¡¨ç¤ºå·ç§¯æ—¶å·ç§¯çš„&lt;em&gt;n-gram&lt;/em&gt;é•¿åº¦ï¼Œè€ŒÂ &lt;span id=&quot;MathJax-Element-67-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;w&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;s&amp;lt;/mi&amp;gt;&amp;lt;mo&amp;gt;=&amp;lt;/mo&amp;gt;&amp;lt;mi mathvariant=&amp;quot;normal&amp;quot;&amp;gt;&amp;amp;#x221E;&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-551&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-552&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-553&quot; class=&quot;mi&quot;&gt;w&lt;span id=&quot;MathJax-Span-554&quot; class=&quot;mi&quot;&gt;s&lt;span id=&quot;MathJax-Span-555&quot; class=&quot;mo&quot;&gt;=&lt;span id=&quot;MathJax-Span-556&quot; class=&quot;mi&quot;&gt;âˆ&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;ws=âˆÂ è¡¨ç¤ºå·ç§¯çª—å£ä¸ºæ•´ä¸ª&lt;code&gt;word embedding&lt;/code&gt;çŸ©é˜µã€‚&lt;span id=&quot;MathJax-Element-68-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;w&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;s&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-557&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-558&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-559&quot; class=&quot;mi&quot;&gt;w&lt;span id=&quot;MathJax-Span-560&quot; class=&quot;mi&quot;&gt;s&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;wsÂ çš„å€¼åŠ&lt;code&gt;Feature Map&lt;/code&gt;Â çš„æ•°é‡éƒ½æ˜¯éœ€è¦è°ƒå‚çš„ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;&lt;strong&gt;ç›¸ä¼¼åº¦è®¡ç®—æ¨¡å‹&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;ä¸‹é¢ä»‹ç»åœ¨å¾—åˆ°å¥å­çš„è¡¨å¾å‘é‡ä¹‹åï¼Œå¦‚ä½•è®¡ç®—å®ƒä»¬çš„ç›¸ä¼¼åº¦ã€‚ç›´è§‚çš„æƒ³æ³•æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¼ ç»Ÿçš„ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•å¦‚ä½™å¼¦ç›¸ä¼¼åº¦ç­‰æ¥è®¡ç®—ä¸¤ä¸ªå¥å­å‘é‡çš„ç›¸ä¼¼åº¦ã€‚ä½†æ˜¯ï¼Œ&lt;strong&gt;ç›´æ¥åº”ç”¨è¿™ç§åšæ³•åœ¨ä¸¤ä¸ªå¥å­å‘é‡ä¸Šå¹¶ä¸æ˜¯æœ€ä¼˜çš„&lt;/strong&gt;ï¼ŒåŸå› åœ¨äºæœ€åç”Ÿæˆçš„å¥å­å‘é‡ä¸­çš„æ¯ä¸€ä¸ªéƒ¨åˆ†çš„æ„ä¹‰å„ä¸ç›¸åŒï¼Œè¿™æ ·ç®€å•ç²—æš´çš„è®¡ç®—åŠ¿å¿…ä¼šå½±å“æ•ˆæœï¼Œæ‰€ä»¥åšæ³•æ˜¯&lt;strong&gt;å¯¹å¥å­å‘é‡ä¸­çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œç›¸åº”çš„æ¯”è¾ƒå’Œè®¡ç®—(Structured Comparision)&lt;/strong&gt;ã€‚ä¸ºäº†ä½¿å¾—å¥å­å‘é‡ä¸­çš„å±€éƒ¨é—´çš„æ¯”è¾ƒå’Œè®¡ç®—æ›´åŠ æœ‰æ•ˆï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘å¦‚ä¸‹æ–¹é¢ï¼š&lt;/p&gt;
&lt;p&gt;(1) æ˜¯å¦æ¥è‡ªç›¸åŒçš„&lt;code&gt;building block&lt;/code&gt;ï¼›&lt;br/&gt;(2) æ˜¯å¦æ¥è‡ªç›¸åŒå·ç§¯çª—å£å¤§å°ä¸‹çš„å·ç§¯ç»“æœï¼›&lt;br/&gt;(3) æ˜¯å¦æ¥è‡ªç›¸åŒçš„&lt;code&gt;poolingå±‚&lt;/code&gt;ï¼›&lt;br/&gt;(4) æ˜¯å¦æ¥è‡ªç›¸åŒçš„&lt;code&gt;Feature Map&lt;/code&gt;ï¼›&lt;/p&gt;
&lt;p&gt;æœ€ç»ˆæ¯”è¾ƒå¥å­ä¸­çš„ç›¸åº”éƒ¨åˆ†æ—¶ï¼Œéœ€è¦è‡³å°‘æ»¡è¶³ä»¥ä¸Šä¸¤ä¸ªæ¡ä»¶ã€‚ä¸ºäº†è¯†åˆ«å¥å­ä¸­çš„å“ªäº›å¯¹åº”éƒ¨åˆ†éœ€è¦å‚ä¸åˆ°ç›¸ä¼¼åº¦è®¡ç®—ï¼Œæ–‡ä¸­æä¾›äº†ä¸¤ç§ç®—æ³•ã€‚&lt;/p&gt;
&lt;p&gt;2.1.Â &lt;strong&gt;ç›¸ä¼¼åº¦è®¡ç®—å•å…ƒ(Unit)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸¤ç§ç›¸ä¼¼åº¦è®¡ç®—å•å…ƒå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://imgur.com/wttqwKe.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://imgur.com/wttqwKe.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;2.2.Â &lt;strong&gt;åŸºäºå¥å­å±€éƒ¨çš„ç›¸ä¼¼åº¦è®¡ç®—&lt;/strong&gt;&lt;/p&gt;
&lt;p class=&quot; has-jax has-jax has-jax&quot;&gt;ç®—æ³•1å’Œç®—æ³•2ä¸ºå¥å­è¡¨å¾å‘é‡çš„ä¸¤ç§è®¡ç®—æ–¹æ³•ï¼Œå…¶ä¸­ç®—æ³•1ä»…ç”¨åœ¨Â &lt;span id=&quot;MathJax-Element-69-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;b&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;l&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;o&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;c&amp;lt;/mi&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;A&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-561&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-562&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-563&quot; class=&quot;mi&quot;&gt;b&lt;span id=&quot;MathJax-Span-564&quot; class=&quot;mi&quot;&gt;l&lt;span id=&quot;MathJax-Span-565&quot; class=&quot;mi&quot;&gt;o&lt;span id=&quot;MathJax-Span-566&quot; class=&quot;mi&quot;&gt;c&lt;span id=&quot;MathJax-Span-567&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-568&quot; class=&quot;mi&quot;&gt;k&lt;span id=&quot;MathJax-Span-569&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-570&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-571&quot; class=&quot;mi&quot;&gt;A&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;blockAÂ ä¸Šï¼›è€Œç®—æ³•2åˆ™éƒ½ç”¨åœ¨Â &lt;span id=&quot;MathJax-Element-70-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;b&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;l&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;o&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;c&amp;lt;/mi&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;A&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-572&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-573&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-574&quot; class=&quot;mi&quot;&gt;b&lt;span id=&quot;MathJax-Span-575&quot; class=&quot;mi&quot;&gt;l&lt;span id=&quot;MathJax-Span-576&quot; class=&quot;mi&quot;&gt;o&lt;span id=&quot;MathJax-Span-577&quot; class=&quot;mi&quot;&gt;c&lt;span id=&quot;MathJax-Span-578&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-579&quot; class=&quot;mi&quot;&gt;k&lt;span id=&quot;MathJax-Span-580&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-581&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-582&quot; class=&quot;mi&quot;&gt;A&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;blockAÂ å’ŒÂ &lt;span id=&quot;MathJax-Element-71-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;b&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;l&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;o&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;c&amp;lt;/mi&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;B&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-583&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-584&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-585&quot; class=&quot;mi&quot;&gt;b&lt;span id=&quot;MathJax-Span-586&quot; class=&quot;mi&quot;&gt;l&lt;span id=&quot;MathJax-Span-587&quot; class=&quot;mi&quot;&gt;o&lt;span id=&quot;MathJax-Span-588&quot; class=&quot;mi&quot;&gt;c&lt;span id=&quot;MathJax-Span-589&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-590&quot; class=&quot;mi&quot;&gt;k&lt;span id=&quot;MathJax-Span-591&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-592&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-593&quot; class=&quot;mi&quot;&gt;B&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;blockBÂ ä¸Šï¼Œä¸¤ç§ç®—æ³•éƒ½æ˜¯é’ˆå¯¹ç›¸åŒç±»å‹(poolingå’Œblockç±»å‹)çš„è¾“å‡ºåšå±€éƒ¨æ¯”è¾ƒã€‚&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ç»™å‡ºå¦‚ä¸‹çš„ç¬¦å·å‡è®¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://imgur.com/0Oxsp9O.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://imgur.com/0Oxsp9O.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç®—æ³•çš„ä¼ªä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://imgur.com/pkDPaky.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://imgur.com/pkDPaky.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p class=&quot; has-jax&quot;&gt;ä¸‹é¢çš„å›¾ç¤ºè¯´æ˜äº†åœ¨Â &lt;span id=&quot;MathJax-Element-72-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;b&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;l&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;o&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;c&amp;lt;/mi&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;A&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-594&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-595&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-596&quot; class=&quot;mi&quot;&gt;b&lt;span id=&quot;MathJax-Span-597&quot; class=&quot;mi&quot;&gt;l&lt;span id=&quot;MathJax-Span-598&quot; class=&quot;mi&quot;&gt;o&lt;span id=&quot;MathJax-Span-599&quot; class=&quot;mi&quot;&gt;c&lt;span id=&quot;MathJax-Span-600&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-601&quot; class=&quot;mi&quot;&gt;k&lt;span id=&quot;MathJax-Span-602&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-603&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-604&quot; class=&quot;mi&quot;&gt;A&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Â ä¸Šï¼Œä¸¤ç§ç®—æ³•çš„è®¡ç®—æ–¹å¼çš„åŒºåˆ«ï¼Œç®—æ³•ä¸€è¡¨ç°äº†å‘é‡åœ¨æ°´å¹³æ–¹å‘ä¸Šçš„æ¯”è¾ƒï¼›è€Œç®—æ³•äºŒåˆ™æ˜¯åœ¨å‚ç›´æ–¹å‘ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://imgur.com/f4qrseS.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://imgur.com/f4qrseS.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ç®—æ³•äºŒä¸­ç›¸åŒç±»å‹çš„poolingçš„è¾“å‡ºgroupsä¸­ï¼Œå‘é‡æ˜¯ä¸¤ä¸¤è¿›è¡Œæ¯”è¾ƒçš„ï¼ˆå›¾ä¸­çš„çº¢è‰²è™šçº¿åªæ˜¯ä¸ºäº†è¯´æ˜æ¯”è¾ƒçš„æ–¹å‘ï¼Œå¹¶ä¸æ˜¯åªé’ˆå¯¹groupä¸­ç›¸åŒå¤§å°çš„å·ç§¯çª—å£ä½œæ¯”è¾ƒï¼‰ï¼›è€Œç®—æ³•ä¸€ä¸­çš„æ¯ä¸€è¡Œéƒ½è¦ä½œæ¯”è¾ƒï¼Œä¸ä»…ä»…æ˜¯ç¬¬ä¸€è¡Œã€‚&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;&lt;strong&gt;æ¨¡å‹çš„å…¶ä»–ç»†èŠ‚&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;ç›¸ä¼¼åº¦å‘é‡è¾“å‡º + å…¨è¿æ¥å±‚&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;åŸºäºå¥å­å±€éƒ¨çš„ç›¸ä¼¼åº¦è®¡ç®—ä¹‹åï¼Œå¾—åˆ°ç›¸åº”çš„ç›¸ä¼¼åº¦å‘é‡ï¼›ç„¶åè¿™ç»„å‘é‡ä¹‹åè¿æ¥ä¸€ä¸ªå…¨è¿æ¥å±‚ï¼Œæœ€åsoftmaxå¯¹åº”è¾“å‡ºã€‚å¦‚æœæ˜¯è®¡ç®—ç›¸ä¼¼åº¦åº¦é‡å€¼ï¼Œå¯ä»¥ç”¨softmaxè¾“å‡ºçš„ç±»åˆ«æ¦‚ç‡å€¼ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;æ¿€æ´»å‡½æ•°&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä½¿ç”¨&lt;code&gt;tanh&lt;/code&gt;å‡½æ•°ä½œä¸ºæ¿€æ´»å‡½æ•°ã€‚&lt;/p&gt;
&lt;h4 id=&quot;å®éªŒéƒ¨åˆ†-3&quot;&gt;å®éªŒéƒ¨åˆ†&lt;/h4&gt;
&lt;ol&gt;&lt;li&gt;&lt;strong&gt;å®éªŒæ•°æ®é›†&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;ç”¨äºè¯„æµ‹åŒä¹‰å¥æ£€æµ‹ (Paraphrase Identification) ä»»åŠ¡çš„ç»å…¸æ•°æ®é›†ï¼Œæ•°æ®é›†æ¥æºäºæ–°é—»ï¼›åŒ…å«5801å¯¹å¥å­å¯¹ï¼Œå…¶ä¸­4076å¯¹ç”¨äºæ¨¡å‹è®­ç»ƒï¼Œè€Œ1725å¯¹ç”¨äºæµ‹è¯•ï¼›æ¯ä¸€å¯¹å¥å­æ‹¥æœ‰ä¸€ä¸ªæ ‡ç­¾ï¼Œ0æˆ–è€…1,0è¡¨ç¤ºä¸¤ä¸ªå¥å­ä¸æ˜¯äº’ä¸ºåŒä¹‰å¥ï¼Œè€Œ1åˆ™è¡¨ç¤ºä¸¤ä¸ªå¥å­äº’ä¸ºåŒä¹‰å¥ã€‚å› æ­¤è¿™æ˜¯ä¸€ä¸ªäºŒåˆ†ç±»çš„ä»»åŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;æ•°æ®æ¥æºäº2014å¹´SemEvalæ¯”èµ›ï¼Œæ•°æ®é›†æœ‰9927å¯¹å¥å­å¯¹ï¼Œå…¶ä¸­4500å¯¹ç”¨äºæ¨¡å‹è®­ç»ƒï¼Œ500å¯¹ç”¨äºæ¨¡å‹éªŒè¯ï¼Œè€Œå‰©ä¸‹çš„4927å¯¹ç”¨äºæ¨¡å‹æµ‹è¯•ã€‚è¿™äº›å¥å­éƒ½æ˜¯åœ¨å›¾ç‰‡å’Œè§†é¢‘æè¿°ä¸­æŠ½å–å¾—åˆ°çš„ï¼Œæ¯ä¸€å¯¹å¥å­å¯¹æœ‰ä¸€ä¸ªç›¸å…³åˆ†æ•°ï¼ŒåŒºé—´åœ¨[1, 5]ï¼Œåˆ†æ•°è¶Šé«˜è¡¨ç¤ºå¥å­è¶Šç›¸å…³ã€‚&lt;/p&gt;
&lt;p&gt;æ•°æ®é›†æ¥æºäº2012å¹´çš„SemEvalæ¯”èµ›ï¼ŒåŒ…å«1500å¯¹çŸ­æ–‡æœ¬ï¼ˆç”¨äºæè¿°è§†é¢‘ä¿¡æ¯ï¼‰ã€‚å…¶ä¸­ä¸€èˆ¬ç”¨äºæ¨¡å‹è®­ç»ƒï¼Œä¸€åŠç”¨äºæ¨¡å‹æµ‹è¯•ï¼Œæ¯ä¸€å¯¹å¥å­æœ‰ä¸€ä¸ªç›¸å…³æ€§åˆ†æ•°ï¼ŒåŒºé—´åœ¨[0, 5]ï¼Œåˆ†æ•°è¶Šé«˜è¡¨ç¤ºå¥å­è¶Šç›¸å…³ã€‚&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;&lt;strong&gt;æ¨¡å‹è®­ç»ƒ&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;é’ˆå¯¹MSRPå’Œå…¶ä»–ä¸¤ä¸ªæ•°æ®é›†ï¼Œåˆ†åˆ«ä½¿ç”¨ä¸¤ç§æŸå¤±å‡½æ•°ã€‚å¯¹äºMSRPæ•°æ®é›†ï¼ŒæŸå¤±å‡½æ•°ï¼ˆHinge Lossï¼‰å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://imgur.com/jjQu3pY.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://imgur.com/jjQu3pY.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¯¹äºå…¶ä½™ä¸¤ä¸ªæ•°æ®é›†ï¼ŒæŸå¤±å‡½æ•°ï¼ˆKL-divergence Lossï¼‰å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://imgur.com/kfVigMW.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://imgur.com/kfVigMW.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;&lt;strong&gt;å®éªŒå‚æ•°è®¾ç½®&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;ul&gt;&lt;li class=&quot; has-jax has-jax&quot;&gt;&lt;strong class=&quot; has-jax&quot;&gt;&lt;span id=&quot;MathJax-Element-73-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;w&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;s&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-605&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-606&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-607&quot; class=&quot;mi&quot;&gt;w&lt;span id=&quot;MathJax-Span-608&quot; class=&quot;mi&quot;&gt;s&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;wsÂ çš„å€¼&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;ï¼š&lt;span id=&quot;MathJax-Element-74-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;w&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;s&amp;lt;/mi&amp;gt;&amp;lt;mo&amp;gt;&amp;amp;#x2208;&amp;lt;/mo&amp;gt;&amp;lt;mo stretchy=&amp;quot;false&amp;quot;&amp;gt;[&amp;lt;/mo&amp;gt;&amp;lt;mn&amp;gt;1&amp;lt;/mn&amp;gt;&amp;lt;mo&amp;gt;,&amp;lt;/mo&amp;gt;&amp;lt;mn&amp;gt;3&amp;lt;/mn&amp;gt;&amp;lt;mo stretchy=&amp;quot;false&amp;quot;&amp;gt;]&amp;lt;/mo&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-609&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-610&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-611&quot; class=&quot;mi&quot;&gt;w&lt;span id=&quot;MathJax-Span-612&quot; class=&quot;mi&quot;&gt;s&lt;span id=&quot;MathJax-Span-613&quot; class=&quot;mo&quot;&gt;âˆˆ&lt;span id=&quot;MathJax-Span-614&quot; class=&quot;mo&quot;&gt;[&lt;span id=&quot;MathJax-Span-615&quot; class=&quot;mn&quot;&gt;1&lt;span id=&quot;MathJax-Span-616&quot; class=&quot;mo&quot;&gt;,&lt;span id=&quot;MathJax-Span-617&quot; class=&quot;mn&quot;&gt;3&lt;span id=&quot;MathJax-Span-618&quot; class=&quot;mo&quot;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;wsâˆˆ[1,3]å’ŒÂ &lt;span id=&quot;MathJax-Element-75-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;w&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;s&amp;lt;/mi&amp;gt;&amp;lt;mo&amp;gt;=&amp;lt;/mo&amp;gt;&amp;lt;mi mathvariant=&amp;quot;normal&amp;quot;&amp;gt;&amp;amp;#x221E;&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-619&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-620&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-621&quot; class=&quot;mi&quot;&gt;w&lt;span id=&quot;MathJax-Span-622&quot; class=&quot;mi&quot;&gt;s&lt;span id=&quot;MathJax-Span-623&quot; class=&quot;mo&quot;&gt;=&lt;span id=&quot;MathJax-Span-624&quot; class=&quot;mi&quot;&gt;âˆ&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;ws=âˆ.&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Word Embedding&lt;/strong&gt;: 300ç»´çš„&lt;code&gt;GloVe word embedding&lt;/code&gt;ï¼›å¯¹äºMSRPæ•°æ®é›†ï¼Œè¿˜é¢å¤–ä½¿ç”¨äº†200ç»´çš„&lt;code&gt;POS embedding&lt;/code&gt;Â (&lt;a href=&quot;http://nlp.stanford.edu/software/tagger.shtml&quot; rel=&quot;external&quot; target=&quot;_blank&quot;&gt;Standford POS tagger&lt;/a&gt;)å’Œ25ç»´çš„&lt;code&gt;Paragram Vectors&lt;/code&gt;Â (&lt;a href=&quot;http://ttic.uchicago.edu/~wieting/wieting2015TACL.pdf&quot; rel=&quot;external&quot; target=&quot;_blank&quot;&gt;Wieting et al., 2015 PDF&lt;/a&gt;ï¼Œ&lt;a href=&quot;http://ttic.uchicago.edu/~wieting/paragram_vectors.txt&quot; rel=&quot;external&quot; target=&quot;_blank&quot;&gt;æ•°æ®ä¸‹è½½åœ°å€&lt;/a&gt;)ã€‚å› æ­¤å¯¹äºMSRPä»»åŠ¡è€Œè¨€ï¼Œ&lt;code&gt;word embedding&lt;/code&gt;çš„ç»´æ•°ä¸º525ç»´ (200+300+25)ï¼›è€Œå…¶ä½™ä¸¤ä¸ªä»»åŠ¡åˆ™å¯¹åº”æ˜¯300ç»´ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨MSRPä¸Šä½¿ç”¨äº†&lt;strong&gt;5-æŠ˜äº¤å‰éªŒè¯&lt;/strong&gt;çš„æ–¹å¼ï¼Œå¯¹æ¨¡å‹å‚æ•°è¿›è¡Œ&lt;em&gt;tuning&lt;/em&gt;.Â &lt;em&gt;Tuning&lt;/em&gt;å¥½çš„æ¨¡å‹å‚æ•°å°†ä¼šç”¨åœ¨å¦å¤–ä¸¤ä¸ªæ•°æ®é›†ä»»åŠ¡ä¸Šã€‚&lt;/li&gt;
&lt;li&gt;åªæœ‰åœ¨MSRPæ•°æ®é›†ä»»åŠ¡ä¸Šï¼Œå…è®¸æ¨¡å‹å‚æ•°è¿›è¡Œæ›´æ–°ã€‚&lt;/li&gt;
&lt;li&gt;è¾“å‡ºçš„å…¨è¿æ¥å±‚ï¼ŒMSRPæœ‰250ä¸ªç¥ç»å…ƒèŠ‚ç‚¹ï¼Œè€ŒSICKå’ŒMSRVIDåˆ™æ˜¯150ä¸ªã€‚&lt;/li&gt;
&lt;li class=&quot; has-jax&quot;&gt;åœ¨Â &lt;span id=&quot;MathJax-Element-76-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;b&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;l&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;o&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;c&amp;lt;/mi&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;A&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-625&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-626&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-627&quot; class=&quot;mi&quot;&gt;b&lt;span id=&quot;MathJax-Span-628&quot; class=&quot;mi&quot;&gt;l&lt;span id=&quot;MathJax-Span-629&quot; class=&quot;mi&quot;&gt;o&lt;span id=&quot;MathJax-Span-630&quot; class=&quot;mi&quot;&gt;c&lt;span id=&quot;MathJax-Span-631&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-632&quot; class=&quot;mi&quot;&gt;k&lt;span id=&quot;MathJax-Span-633&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-634&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-635&quot; class=&quot;mi&quot;&gt;A&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;blockAÂ ä¸­ï¼Œ&lt;code&gt;Feature Map&lt;/code&gt;Â çš„æ•°é‡ä¸è¾“å…¥çš„&lt;code&gt;embedding&lt;/code&gt;ç»´æ•°ç›¸åŒï¼Œå³MSRPæ˜¯525ä¸ªï¼Œè€ŒSICKå’ŒMSRVIDåˆ™æ˜¯300ä¸ªã€‚&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;ä¼˜åŒ–ç®—æ³•ä½¿ç”¨éšæœºæ¢¯åº¦ä¸‹é™æ–¹æ³•ã€‚&lt;/li&gt;
&lt;li class=&quot; has-jax&quot;&gt;å­¦ä¹ ç‡ä¸º0.01ï¼Œè€Œæ­£åˆ™åŒ–å‚æ•°Â &lt;span id=&quot;MathJax-Element-77-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;&amp;amp;#x03BB;&amp;lt;/mi&amp;gt;&amp;lt;mo&amp;gt;=&amp;lt;/mo&amp;gt;&amp;lt;msup&amp;gt;&amp;lt;mn&amp;gt;10&amp;lt;/mn&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mo&amp;gt;&amp;amp;#x2212;&amp;lt;/mo&amp;gt;&amp;lt;mn&amp;gt;4&amp;lt;/mn&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msup&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-636&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-637&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-638&quot; class=&quot;mi&quot;&gt;Î»&lt;span id=&quot;MathJax-Span-639&quot; class=&quot;mo&quot;&gt;=&lt;span id=&quot;MathJax-Span-640&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-641&quot; class=&quot;mn&quot;&gt;10&lt;span id=&quot;MathJax-Span-642&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-643&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-644&quot; class=&quot;mo&quot;&gt;âˆ’&lt;span id=&quot;MathJax-Span-645&quot; class=&quot;mn&quot;&gt;4&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;Î»=10âˆ’4.&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;ol&gt;&lt;li&gt;&lt;strong&gt;å®éªŒç»“æœ&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;MSRPæ•°æ®é›†&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://imgur.com/CLF0SKJ.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://imgur.com/CLF0SKJ.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹å‡ºï¼Œæ–‡ä¸­çš„æ¨¡å‹æ˜¯æ‰€æœ‰åŸºäºNNçš„æ–¹æ³•ä¸­åœ¨MSRPæ•°æ®é›†ä¸Šæ€§èƒ½æœ€å¥½çš„ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;SICKæ•°æ®é›†&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://imgur.com/16bJWHS.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://imgur.com/16bJWHS.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;MSRVIDæ•°æ®é›†&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://imgur.com/s89LYEb.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://imgur.com/s89LYEb.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è€Œæ¨¡å‹åœ¨SICKå’ŒMSRVIDæ•°æ®é›†ä¸Šçš„è¡¨ç°ä¹Ÿå¾ˆå¥½ã€‚&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;&lt;strong&gt;æ¨¡å‹çš„æ•æ„Ÿåº¦åˆ†æ&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;ä¸‹é¢çš„è¡¨æ ¼è¯´æ˜äº†åœ¨ä¸ä½¿ç”¨æŸç§æŠ€æœ¯ä¸‹ï¼Œæ¨¡å‹æ€§èƒ½åœ¨å®éªŒæ•°æ®é›†ä¸Šçš„å˜åŒ–æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://imgur.com/pmTY9TY.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://imgur.com/pmTY9TY.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä»ä¸­å¯ä»¥å¾—å‡ºä»¥ä¸‹ç»“è®ºï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å¯¹äºMSRPæ•°æ®é›†ä»»åŠ¡è€Œè¨€ï¼Œå¢åŠ &lt;strong&gt;&lt;code&gt;POS Embedding&lt;/code&gt;&lt;/strong&gt;å’Œ&lt;strong&gt;&lt;code&gt;Paragram Vector&lt;/code&gt;&lt;/strong&gt;æ•ˆæœæ˜¾è‘—ï¼›&lt;/li&gt;
&lt;li&gt;ç§»é™¤ç›¸ä¼¼åº¦è®¡ç®—å±‚çš„å½±å“æ˜¾è‘—ï¼Œè¯´æ˜ç»“æ„åŒ–çš„å¥å­å±€éƒ¨æ¯”è¾ƒæ–¹æ³•æ˜¯æœ‰æ•ˆä¸”å¿…è¦çš„ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Horizontal&lt;/code&gt;&lt;/strong&gt;å’Œ&lt;strong&gt;&lt;code&gt;Vertical&lt;/code&gt;&lt;/strong&gt;ç®—æ³•å‡æœ‰ä¸€å®šçš„æå‡æ•ˆæœï¼Œè€Œ&lt;strong&gt;&lt;code&gt;Vertical&lt;/code&gt;&lt;/strong&gt;ç®—æ³•çš„æå‡ç¨‹åº¦æ›´é«˜ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;max-pooling&lt;/code&gt;&lt;/strong&gt;æ–¹å¼ç¡®å®è¦æ¯”&lt;strong&gt;&lt;code&gt;min-pooling&lt;/code&gt;&lt;/strong&gt;å’Œ&lt;strong&gt;&lt;code&gt;mean-pooling&lt;/code&gt;&lt;/strong&gt;å¼ºå¤ªå¤šã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;ol&gt;&lt;li&gt;&lt;strong&gt;æ€»ç»“&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;æ–‡ä¸­çš„æ¨¡å‹åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼šå·ç§¯-æ± åŒ–æ¨¡å‹å’Œç›¸ä¼¼åº¦è®¡ç®—æ¨¡å‹ã€‚å®éªŒéƒ¨åˆ†å·²ç»éªŒè¯äº†æ¨¡å‹çš„æœ‰æ•ˆæ€§ï¼Œåœ¨MSRPæ•°æ®é›†ä¸Šæ¨¡å‹å–å¾—äº†ä»…æ¬¡äºstate-of-artçš„ç»“æœï¼Œå¹¶ä¸”åœ¨åŸºäºNNçš„æ–¹æ³•ä¸­æ˜¯æœ€å¥½çš„ã€‚æ¨¡å‹ä¸­çš„ç›¸ä¼¼åº¦è®¡ç®—å±‚æ˜¯æœ‰å¿…è¦çš„ï¼Œå› ä¸ºå¯¹å·ç§¯æ± åŒ–å¤„ç†åçš„å¥å­æˆåˆ†è¿›è¡Œäº†é’ˆå¯¹æ€§çš„æ¯”è¾ƒï¼Œä»ç›´è§‚ä¸Šè¦æ¯”ç›´æ¥æ‰”è¿›å…¨è¿æ¥å±‚æ›´åˆç†ï¼Œè€Œå®éªŒç»“æœä¹Ÿè¡¨æ˜äº†è¿™ä¸€ç‚¹ã€‚&lt;/p&gt;
&lt;p class=&quot; has-jax&quot;&gt;ç„¶è€Œï¼Œä¸ªäººè§‰å¾—ï¼Œæ–‡ä¸­çš„æ¨¡å‹ç»“æ„è¾ƒä¸ºå¤æ‚ï¼Œè€Œä¸”å…¶ä¸­æœ‰å¾ˆå¤štrickçš„åœ°æ–¹ï¼Œæ¯”å¦‚ä¸ºä»€ä¹ˆè¦å¯¹word embeddingä¸­çš„æ¯ä¸€ç»´åº¦åšå·ç§¯ï¼Œ&lt;span id=&quot;MathJax-Element-78-Frame&quot; class=&quot;MathJax&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;b&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;l&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;o&amp;lt;/mi&amp;gt;&amp;lt;mi&amp;gt;c&amp;lt;/mi&amp;gt;&amp;lt;msub&amp;gt;&amp;lt;mi&amp;gt;k&amp;lt;/mi&amp;gt;&amp;lt;mrow class=&amp;quot;MJX-TeXAtom-ORD&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;B&amp;lt;/mi&amp;gt;&amp;lt;/mrow&amp;gt;&amp;lt;/msub&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-646&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-647&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-648&quot; class=&quot;mi&quot;&gt;b&lt;span id=&quot;MathJax-Span-649&quot; class=&quot;mi&quot;&gt;l&lt;span id=&quot;MathJax-Span-650&quot; class=&quot;mi&quot;&gt;o&lt;span id=&quot;MathJax-Span-651&quot; class=&quot;mi&quot;&gt;c&lt;span id=&quot;MathJax-Span-652&quot; class=&quot;msubsup&quot;&gt;&lt;span id=&quot;MathJax-Span-653&quot; class=&quot;mi&quot;&gt;k&lt;span id=&quot;MathJax-Span-654&quot; class=&quot;texatom&quot;&gt;&lt;span id=&quot;MathJax-Span-655&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-656&quot; class=&quot;mi&quot;&gt;B&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;MJX_Assistive_MathML&quot;&gt;blockBÂ ä¸­çš„&lt;code&gt;pooling&lt;/code&gt;æ–¹å¼ä¸ºä»€ä¹ˆåªç”¨äº†maxå’Œminï¼Œä¸ç”¨meançš„æ–¹å¼ç­‰é—®é¢˜ï¼Œè€Œè¿™äº›æ–¹å¼æˆ–è®¸æ˜¯ä½œè€…è‡ªå·±åšäº†å¤§é‡å®éªŒåï¼Œä»æœåˆ°å› è€Œä½¿ç”¨çš„ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&quot;Yinâ€™s_Paper&quot;&gt;Yinâ€™s Paper&lt;/h3&gt;
&lt;p&gt;Yinçš„è¿™ç¯‡è®ºæ–‡æå‡ºäº†ä¸€ç§å«&lt;code&gt;Bi-CNN-MI&lt;/code&gt;çš„æ¶æ„ï¼Œå…¶ä¸­&lt;code&gt;Bi-CNN&lt;/code&gt;è¡¨ç¤ºä¸¤ä¸ªä½¿ç”¨&lt;code&gt;Siamese&lt;/code&gt;æ¡†æ¶çš„CNNæ¨¡å‹ï¼›&lt;code&gt;MI&lt;/code&gt;è¡¨ç¤ºå¤šç²’åº¦çš„äº¤äº’ç‰¹å¾ã€‚&lt;code&gt;Bi-CNN-MI&lt;/code&gt;åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;å¥å­åˆ†ææ¨¡å‹ (CNN-SM)&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;è¿™éƒ¨åˆ†æ¨¡å‹ä¸»è¦ä½¿ç”¨äº†ä¸Šè¿°Kalåœ¨2014å¹´æå‡ºçš„æ¨¡å‹ï¼Œé’ˆå¯¹å¥å­æœ¬èº«æå–å‡ºå››ç§ç²’åº¦çš„ç‰¹å¾è¡¨ç¤ºï¼šè¯ã€çŸ­&lt;em&gt;ngram&lt;/em&gt;ã€é•¿&lt;em&gt;ngram&lt;/em&gt;å’Œå¥å­ç²’åº¦ã€‚å¤šç§ç²’åº¦çš„ç‰¹å¾è¡¨ç¤ºæ˜¯éå¸¸å¿…è¦çš„ï¼Œä¸€æ–¹é¢æé«˜æ¨¡å‹çš„æ€§èƒ½ï¼Œå¦ä¸€æ–¹é¢å¢å¼ºæ¨¡å‹çš„é²æ£’æ€§ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;å¥å­äº¤äº’è®¡ç®—æ¨¡å‹ (CNN-IM)&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;è¿™éƒ¨åˆ†æ¨¡å‹ä¸»è¦æ˜¯åŸºäº2011å¹´Socheræå‡ºçš„RAEæ¨¡å‹ï¼Œåšäº†ä¸€äº›ç®€åŒ–ï¼Œå³ä»…å¯¹åŒä¸€ç§ç²’åº¦ä¸‹çš„æå–ç‰¹å¾åšä¸¤ä¸¤æ¯”è¾ƒã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;LRæˆ–Softmaxç½‘ç»œå±‚ä»¥é€‚é…ä»»åŠ¡&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h4 id=&quot;æ¨¡å‹ç»“æ„&quot;&gt;æ¨¡å‹ç»“æ„&lt;/h4&gt;
&lt;p&gt;è®ºæ–‡æå‡ºçš„æ¨¡å‹ä¸»è¦æ˜¯åŸºäºKalçš„æ¨¡å‹åŠSocherçš„RAEæ¨¡å‹çš„ç»“åˆä½“ï¼Œå¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://imgur.com/Ubku2XR.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://imgur.com/Ubku2XR.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;é€šè¿‡æ¨¡å‹å›¾å¯ä»¥çœ‹å‡ºæ¨¡å‹çš„ä¸»è¦æ€æƒ³ï¼šä¸€æ–¹é¢åˆ©ç”¨Kalçš„æ¨¡å‹è¿›è¡Œå¤šç§ç²’åº¦ä¸Šçš„ç‰¹å¾æå–ï¼Œå¦ä¸€æ–¹é¢é‡‡å–RAEæ¨¡å‹çš„æ€æƒ³ï¼Œå¯¹æå–å‡ºæ¥çš„ç‰¹å¾è¿›è¡Œä¸¤ä¸¤çš„ç›¸ä¼¼åº¦è®¡ç®—ï¼Œè®¡ç®—å®Œæˆçš„ç»“æœé€šè¿‡&lt;code&gt;dynamic pooling&lt;/code&gt;çš„æ–¹å¼è¿›ä¸€æ­¥æå–å°‘é‡ç‰¹å¾ï¼Œç„¶åå„ä¸ªå±‚æ¬¡çš„&lt;code&gt;pooling&lt;/code&gt;è®¡ç®—ç»“æœå¹³æ‘Šä¸ºä¸€ç»„å‘é‡ï¼Œé€šè¿‡å…¨è¿æ¥çš„æ–¹å¼ä¸LR(æˆ–è€…softmax)å±‚è¿æ¥ï¼Œä»è€Œé€‚é…åŒä¹‰å¥æ£€æµ‹ä»»åŠ¡æœ¬èº«ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªæ¨¡å‹å…·ä½“çš„è®¡ç®—ç»†èŠ‚ä¸å†èµ˜è¿°äº†ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥ç›´æ¥å»çœ‹è®ºæ–‡ã€‚é™¤äº†æå‡ºè¿™ç§æ¨¡å‹ç»“æ„ä¹‹å¤–ï¼Œè®ºæ–‡è¿˜æœ‰ä¸€ä¸ªäº®ç‚¹åœ¨äºä½¿ç”¨äº†ä¸€ç§ç±»ä¼¼äºè¯­è¨€æ¨¡å‹çš„&lt;code&gt;CNN-LM&lt;/code&gt;æ¥å¯¹ä¸Šè¿°CNNéƒ¨åˆ†çš„æ¨¡å‹è¿›è¡Œé¢„è®­ç»ƒï¼Œä»è€Œæå‰ç¡®å®šæ¨¡å‹çš„å‚æ•°ã€‚&lt;code&gt;CNN-LM&lt;/code&gt;çš„ç½‘ç»œç»“æ„å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://imgur.com/zMyzscM.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://imgur.com/zMyzscM.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;CNN-LM&lt;/code&gt;æ¨¡å‹çš„è®­ç»ƒé¢„æ–™ä½¿ç”¨äº†æœ€ç»ˆçš„å®éªŒæ•°æ®é›†ï¼Œå³MSRPï¼›å¦å¤–ï¼Œç”±äºMSRPçš„æ•°æ®è§„æ¨¡è¾ƒå°ï¼Œæ‰€ä»¥ä½œè€…åˆå¢åŠ äº†100,000ä¸ªè‹±æ–‡å¥å­è¯­æ–™ã€‚&lt;code&gt;CNN-LM&lt;/code&gt;æ¨¡å‹æœ€ç»ˆèƒ½å¤Ÿå¾—åˆ°word embedding, æ¨¡å‹æƒå€¼ç­‰å‚æ•°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›å‚æ•°å¹¶ä¸æ˜¯å›ºå®šçš„ï¼Œåœ¨ä¹‹åçš„å¥å­åŒ¹é…ä»»åŠ¡ä¸­æ˜¯ä¼šä¸æ–­æ›´æ–°çš„ã€‚ä»åé¢çš„å®éªŒç»“æœä¸­å¯ä»¥çœ‹å‡ºï¼Œ&lt;code&gt;CNN-LM&lt;/code&gt;çš„ä½œç”¨æ˜¯æ˜¾è‘—çš„ã€‚&lt;/p&gt;
&lt;h4 id=&quot;å®éªŒç»“æœ&quot;&gt;å®éªŒç»“æœ&lt;/h4&gt;
&lt;p&gt;è®ºæ–‡ä»…ä½¿ç”¨äº†ä¸€ç§æ•°æ®é›†ï¼Œå³å…¬è®¤çš„PI (Paraphrase Identification)ä»»åŠ¡æ•°æ®é›†ï¼ŒMSRPã€‚å®éªŒç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;fancybox&quot; href=&quot;http://imgur.com/Y67eY0a.png&quot; rel=&quot;group&quot;&gt;&lt;img src=&quot;http://imgur.com/Y67eY0a.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹å‡ºï¼Œ&lt;code&gt;CNN-LM&lt;/code&gt;çš„é¢„è®­ç»ƒæ•ˆæœæ˜¾è‘—ï¼Œé¢„è®­ç»ƒåçš„æ¨¡å‹æ€§èƒ½å¾ˆå¼ºï¼ˆä½†æ˜¯ç»“æœä¸Šæ¯”ä¹‹å‰Heæå‡ºçš„æ¨¡å‹ç¨å·®ä¸€äº›ï¼‰ã€‚&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;æœ¬æ–‡ç»“æŸï¼Œæ„Ÿè°¢æ¬£èµã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ¬¢è¿è½¬è½½ï¼Œè¯·æ³¨æ˜æœ¬æ–‡çš„é“¾æ¥åœ°å€ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.jeyzhang.com/cnn-apply-on-modelling-sentence.html&quot;&gt;http://www.jeyzhang.com/cnn-apply-on-modelling-sentence.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å‚è€ƒæ–‡çŒ®&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;[1] R. Socher, E. H. Huang, and A. Y. Ng. Dynamic pooling and unfolding recursive autoencoders for paraphrase detection. In Advances in NIPS, 2011.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ¨èèµ„æ–™&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://arxiv.org/abs/1510.03820&quot; rel=&quot;external&quot; target=&quot;_blank&quot;&gt;A Sensitivity Analysis of (and Practitionersâ€™ Guide to) Convolutional Neural Networks for Sentence Classification&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.wildml.com/2015/12/implementing-a-cnn-for-text-classification-in-tensorflow/&quot; rel=&quot;external&quot; target=&quot;_blank&quot;&gt;Implementing a CNN for Text Classification in TensorFlow&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/yoonkim/CNN_sentence&quot; rel=&quot;external&quot; target=&quot;_blank&quot;&gt;Kim Yâ€™s Implement: Convolutional Neural Networks for Sentence Classification&lt;/a&gt;&lt;/p&gt;

</description>
<pubDate>Tue, 27 Feb 2018 09:30:00 +0000</pubDate>
<dc:creator>ç¬¨å…”å‹¿åº”</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/bentuwuying/p/8480045.html</dc:identifier>
</item>
<item>
<title>mysqlè¯»å†™åˆ†ç¦» - Curry_30</title>
<link>http://www.cnblogs.com/lishun1005/p/8472358.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/lishun1005/p/8472358.html</guid>
<description>&lt;p&gt;å¥½ä¹…æ²¡æœ‰å†™è¿‡åšå®¢äº†ï¼Œè¶ç€å¹´å‡è¿˜æœ‰ä¸€å¤©ï¼ŒæŠŠå»å¹´é¡¹ç›®æ‰€è¿ç”¨çš„è¯»å†™åˆ†ç¦»åœ¨è¿™é‡Œæ¦‚è¿°ä¸€ä¸‹åŠå…¶æ³¨æ„ç‚¹ï¼Œä»¥é˜²ä»¥åé¡¹ç›®å†æœ‰ä½¿ç”¨åˆ°;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å‡†å¤‡å·¥ä½œ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1 å¼€å‘ç¯å¢ƒ:window,idea,maven,spring boot,mybatis,druid(æ·˜å®æ•°æ®åº“è¿æ¥æ± )&lt;/p&gt;
&lt;p&gt;2 æ•°æ®åº“æœåŠ¡å™¨:linux,mysql master(192.168.203.135),mysql salve(192.168.203.139)&lt;/p&gt;
&lt;p&gt;3 è¯»å†™åˆ†ç¦»ä¹‹å‰å¿…é¡»å…ˆåšå¥½æ•°æ®åº“çš„ä¸»ä»å¤åˆ¶ï¼Œå…³äºä¸»ä»å¤åˆ¶ä¸æ˜¯è¯¥ç¯‡å¹…çš„ä¸»è¦å™è¿°é‡ç‚¹,å…³äºä¸»ä»å¤åˆ¶è¯»è€…å¯ä»¥è‡ªè¡Œgoogleæˆ–è€…ç™¾åº¦ï¼Œæ•™ç¨‹åŸºæœ¬éƒ½æ˜¯ä¸€æ ·ï¼Œå¯è¡Œ&lt;/p&gt;
&lt;p&gt;ã€€&lt;img src=&quot;https://images2018.cnblogs.com/blog/590770/201802/590770-20180226110416933-121156168.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ³¨æ„ä»¥ä¸‹å‡ ç‚¹:&lt;br/&gt;a:åšä¸»ä»å¤åˆ¶æ—¶ï¼Œé¦–å…ˆç¡®å®šä¸¤å°æœåŠ¡å™¨çš„mysqlæ²¡ä»»ä½•è‡ªå®šä¹‰åº“(å¦åˆ™åªå¯ä»¥é…ç½®å®Œåä¹‹å‰çš„ä¸œè¥¿æ²¡æ³•åŒæ­¥,æˆ–è€…ä¸¤ä¸ªåº“éƒ½æœ‰å®Œå…¨ç›¸åŒçš„åº“åº”è¯¥ä¹Ÿæ˜¯å¯ä»¥åŒæ­¥)&lt;br/&gt;b:server_idå¿…é¡»é…ç½®ä¸ä¸€æ ·&lt;br/&gt;c:é˜²ç«å¢™ä¸èƒ½æŠŠmysqlæœåŠ¡ç«¯å£ç»™æ‹¦æˆªäº†(é»˜è®¤3306)&lt;br/&gt;d:ç¡®ä¿ä¸¤å°mysqlå¯ä»¥ç›¸äº’è®¿é—®&lt;br/&gt;e:é‡ç½®master,slaveã€‚Reset master;reset slave;å¼€å¯å…³é—­slave,start slave;stop slave;&lt;br/&gt;f:ä¸»DB serverå’Œä»DB serveræ•°æ®åº“çš„ç‰ˆæœ¬ä¸€è‡´&lt;/p&gt;
&lt;p&gt;4 è¯»å†™åˆ†ç¦»æ–¹å¼ï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€4-1 åŸºäºç¨‹åºä»£ç å†…éƒ¨å®ç°: åœ¨ä»£ç ä¸­æ ¹æ®select ã€insertè¿›è¡Œè·¯ç”±åˆ†ç±»ï¼Œè¿™ç±»æ–¹æ³•ä¹Ÿæ˜¯ç›®å‰ç”Ÿäº§ç¯å¢ƒä¸‹åº”ç”¨æœ€å¹¿æ³›çš„ã€‚ä¼˜ç‚¹æ˜¯æ€§èƒ½è¾ƒå¥½ï¼Œå› ä¸ºç¨‹åºåœ¨ä»£ç ä¸­å®ç°ï¼Œä¸éœ€è¦å¢åŠ é¢å¤–çš„ç¡¬ä»¶å¼€æ”¯ï¼Œç¼ºç‚¹æ˜¯éœ€è¦å¼€å‘äººå‘˜æ¥å®ç°ï¼Œè¿ç»´äººå‘˜æ— ä»ä¸‹æ‰‹ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€4-2 åŸºäºä¸­é—´ä»£ç†å±‚å®ç°: ä»£ç†ä¸€èˆ¬ä»‹äºåº”ç”¨æœåŠ¡å™¨å’Œæ•°æ®åº“æœåŠ¡å™¨ä¹‹é—´ï¼Œä»£ç†æ•°æ®åº“æœåŠ¡å™¨æ¥æ”¶åˆ°åº”ç”¨æœåŠ¡å™¨çš„è¯·æ±‚åæ ¹æ®åˆ¤æ–­åè½¬å‘åˆ°ï¼Œåç«¯æ•°æ®åº“ï¼Œæœ‰ä»¥ä¸‹ä»£è¡¨æ€§çš„ç¨‹åºã€‚&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;ã€€æœ¬æ–‡åŸºäºä¸¤ç§æ–¹å¼çš„å™è¿°:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åŸºäºåº”ç”¨å±‚ä»£ç å®ç°æ–¹å¼(å†…å®¹éƒ½æ˜¯é€šè¿‡ä»£ç ä½“ç°ï¼Œå¿…è¦çš„è¯´æ˜å­˜åœ¨ä»£ç ä¸­)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1 é…ç½®pom.xml,å¯¼å…¥éœ€è¦çš„jaråŒ…&lt;/p&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;?&lt;/span&gt;&lt;span&gt;xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;&lt;/span&gt;&lt;span&gt;?&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;project &lt;/span&gt;&lt;span&gt;xmlns&lt;/span&gt;&lt;span&gt;=&quot;http://maven.apache.org/POM/4.0.0&quot;&lt;/span&gt;&lt;span&gt; xmlns:xsi&lt;/span&gt;&lt;span&gt;=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&lt;/span&gt;&lt;span&gt;
    xsi:schemaLocation&lt;/span&gt;&lt;span&gt;=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;modelVersion&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;4.0.0&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;modelVersion&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;com.lishun&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;mysql_master_salve&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;0.0.1-SNAPSHOT&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;packaging&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;jar&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;packaging&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;mysql_master_salve&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;description&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;Demo project for Spring Boot&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;description&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;parent&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;spring-boot-starter-parent&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;1.5.10.RELEASE&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;relativePath&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt; &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; lookup parent from repository &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;parent&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;properties&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;project.build.sourceEncoding&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;UTF-8&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;project.build.sourceEncoding&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;project.reporting.outputEncoding&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;UTF-8&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;project.reporting.outputEncoding&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;java.version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;1.8&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;java.version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;properties&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dependencies&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;org.mybatis.spring.boot&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;mybatis-spring-boot-starter&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;1.3.1&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;mysql&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;mysql-connector-java&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;scope&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;runtime&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;scope&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;spring-boot-starter-test&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;scope&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;test&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;scope&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;spring-boot-starter-web&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;RELEASE&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;com.alibaba&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;druid&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;1.0.18&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;spring-boot-starter-aop&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dependencies&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;build&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;plugins&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;plugin&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;spring-boot-maven-plugin&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;plugin&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;plugin&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;org.mybatis.generator&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;mybatis-generator-maven-plugin&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;1.3.2&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dependencies&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;mysql&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;mysql-connector-java&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;5.1.43&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dependencies&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;configuration&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;overwrite&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;true&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;overwrite&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;configuration&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;plugin&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;plugins&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;build&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;


&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;project&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;2 é…ç½®application.properties&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;38&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
server.port=9022
#mybatisé…ç½®*mapper.xmlæ–‡ä»¶å’Œå®ä½“åˆ«å
mybatis.mapper-locations=classpath:mapper/*.xml
mybatis.type-aliases-package=com.lishun.entity

spring.datasource.driver-class-name=com.mysql.jdbc.Driver
spring.datasource.password=123456
spring.datasource.username=root

#å†™èŠ‚ç‚¹
spring.datasource.master.url=jdbc:mysql://192.168.203.135:3306/worldmap
#ä¸¤ä¸ªä¸ªè¯»èŠ‚ç‚¹(ä¸ºäº†æ–¹ä¾¿æµ‹è¯•è¿™é‡Œç”¨çš„æ˜¯åŒä¸€ä¸ªæœåŠ¡å™¨æ•°æ®åº“,ç”Ÿäº§ç¯å¢ƒåº”è¯¥ä¸ä½¿ç”¨)
spring.datasource.salve1.url=jdbc:mysql://192.168.203.139:3306/worldmap
spring.datasource.salve2.url=jdbc:mysql://192.168.203.139:3306/worldmap

# druid è¿æ¥æ±  Setting
# åˆå§‹åŒ–å¤§å°ï¼Œæœ€å°ï¼Œæœ€å¤§
spring.datasource.type=com.alibaba.druid.pool.DruidDataSource
spring.datasource.initialSize=5
spring.datasource.minIdle=5
spring.datasource.maxActive=20
# é…ç½®è·å–è¿æ¥ç­‰å¾…è¶…æ—¶çš„æ—¶é—´
spring.datasource.maxWait=60000
# é…ç½®é—´éš”å¤šä¹…æ‰è¿›è¡Œä¸€æ¬¡æ£€æµ‹ï¼Œæ£€æµ‹éœ€è¦å…³é—­çš„ç©ºé—²è¿æ¥ï¼Œå•ä½æ˜¯æ¯«ç§’
spring.datasource.timeBetweenEvictionRunsMillis=60000
# é…ç½®ä¸€ä¸ªè¿æ¥åœ¨æ± ä¸­æœ€å°ç”Ÿå­˜çš„æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’
spring.datasource.minEvictableIdleTimeMillis=300000
spring.datasource.validationQuery=SELECT 1 FROM rscipc_sys_user
spring.datasource.testWhileIdle=true
spring.datasource.testOnBorrow=false
spring.datasource.testOnReturn=false
# æ‰“å¼€PSCacheï¼Œå¹¶ä¸”æŒ‡å®šæ¯ä¸ªè¿æ¥ä¸ŠPSCacheçš„å¤§å°
spring.datasource.poolPreparedStatements=true
spring.datasource.maxPoolPreparedStatementPerConnectionSize=20
# é…ç½®ç›‘æ§ç»Ÿè®¡æ‹¦æˆªçš„filtersï¼Œå»æ‰åç›‘æ§ç•Œé¢sqlæ— æ³•ç»Ÿè®¡ï¼Œ'wall'ç”¨äºé˜²ç«å¢™
spring.datasource.filters=stat,wall,log4j
# é€šè¿‡connectPropertieså±æ€§æ¥æ‰“å¼€mergeSqlåŠŸèƒ½ï¼›æ…¢SQLè®°å½•
spring.datasource.connectionProperties=druid.stat.mergeSql=true;druid.stat.slowSqlMillis=5000
spring.datasource.logSlowSql=true
#End
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;3 å¯åŠ¨ç±»(æ³¨æ„ï¼šå…¶ä»–éœ€è¦springç®¡ç†çš„bean(service,configç­‰)å¿…é¡»æ”¾åœ¨è¯¥å¯åŠ¨ç±»çš„å­åŒ…ä¸‹ï¼Œä¸ç„¶ä¼šæ‰«æä¸åˆ°beanï¼Œå¯¼è‡´æ³¨å…¥å¤±è´¥)&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
@SpringBootApplication
@MapperScan(&quot;com.lishun.mapper&quot;) //!!!!!! æ³¨æ„:æ‰«ææ‰€æœ‰mapper
public class MysqlMasterSalveApplication {
        public static void main(String[] args) {
                SpringApplication.run(MysqlMasterSalveApplication.class, args);
        }
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;4Â åŠ¨æ€æ•°æ®æºÂ Â &lt;strong&gt;DynamicDataSource&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ã€€ã€€&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;37&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
/**
 * @author lishun
 * @Description:åŠ¨æ€æ•°æ®æº, ç»§æ‰¿AbstractRoutingDataSource
 * @date 2017/8/9
 */
public class DynamicDataSource extends AbstractRoutingDataSource {
        public static final Logger log = LoggerFactory.getLogger(DynamicDataSource.class);

        /**
         * é»˜è®¤æ•°æ®æº
         */
        public static final String DEFAULT_DS = &quot;read_ds&quot;;
        private static final ThreadLocal&amp;lt;String&amp;gt; contextHolder = new ThreadLocal&amp;lt;&amp;gt;();
        public static void setDB(String dbType) {// è®¾ç½®æ•°æ®æºå
                log.info(&quot;åˆ‡æ¢åˆ°{}æ•°æ®æº&quot;, dbType);
                contextHolder.set(dbType);
        }

        public static void clearDB() {
                contextHolder.remove();
        }// æ¸…é™¤æ•°æ®æºå
        @Override
        protected Object determineCurrentLookupKey() {
                return contextHolder.get();
        }
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;5 çº¿ç¨‹æ± é…ç½®æ•°æ®æºã€€ã€€&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;53&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
@Configuration
public class DruidConfig {
        private Logger logger = LoggerFactory.getLogger(DruidConfig.class);

        @Value(&quot;${spring.datasource.master.url}&quot;)
        private String masterUrl;

        @Value(&quot;${spring.datasource.salve1.url}&quot;)
        private String salve1Url;

        @Value(&quot;${spring.datasource.salve2.url}&quot;)
        private String salve2Url;

        @Value(&quot;${spring.datasource.username}&quot;)
        private String username;

        @Value(&quot;${spring.datasource.password}&quot;)
        private String password;

        @Value(&quot;${spring.datasource.driver-class-name}&quot;)
        private String driverClassName;

        @Value(&quot;${spring.datasource.initialSize}&quot;)
        private int initialSize;

        @Value(&quot;${spring.datasource.minIdle}&quot;)
        private int minIdle;

        @Value(&quot;${spring.datasource.maxActive}&quot;)
        private int maxActive;

        @Value(&quot;${spring.datasource.maxWait}&quot;)
        private int maxWait;

        @Value(&quot;${spring.datasource.timeBetweenEvictionRunsMillis}&quot;)
        private int timeBetweenEvictionRunsMillis;

        @Value(&quot;${spring.datasource.minEvictableIdleTimeMillis}&quot;)
        private int minEvictableIdleTimeMillis;

        @Value(&quot;${spring.datasource.validationQuery}&quot;)
        private String validationQuery;

        @Value(&quot;${spring.datasource.testWhileIdle}&quot;)
        private boolean testWhileIdle;

        @Value(&quot;${spring.datasource.testOnBorrow}&quot;)
        private boolean testOnBorrow;

        @Value(&quot;${spring.datasource.testOnReturn}&quot;)
        private boolean testOnReturn;

        @Value(&quot;${spring.datasource.filters}&quot;)
        private String filters;

        @Value(&quot;${spring.datasource.logSlowSql}&quot;)
        private String logSlowSql;

        @Bean
        public ServletRegistrationBean druidServlet() {

                logger.info(&quot;init Druid Servlet Configuration &quot;);
                ServletRegistrationBean reg = new ServletRegistrationBean();
                reg.setServlet(new StatViewServlet());
                reg.addUrlMappings(&quot;/druid/*&quot;);
                reg.addInitParameter(&quot;loginUsername&quot;, username);
                reg.addInitParameter(&quot;loginPassword&quot;, password);
                reg.addInitParameter(&quot;logSlowSql&quot;, logSlowSql);
                return reg;
        }

        @Bean
        public FilterRegistrationBean filterRegistrationBean() {
                FilterRegistrationBean filterRegistrationBean = new FilterRegistrationBean();
                filterRegistrationBean.setFilter(new WebStatFilter());
                filterRegistrationBean.addUrlPatterns(&quot;/*&quot;);
                filterRegistrationBean.addInitParameter(&quot;exclusions&quot;, &quot;*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*&quot;);
                filterRegistrationBean.addInitParameter(&quot;profileEnable&quot;, &quot;true&quot;);
                return filterRegistrationBean;
        }

        @Bean
        public DataSource druidDataSource() {
                DruidDataSource datasource = new DruidDataSource();
                datasource.setUrl(masterUrl);
                datasource.setUsername(username);
                datasource.setPassword(password);
                datasource.setDriverClassName(driverClassName);
                datasource.setInitialSize(initialSize);
                datasource.setMinIdle(minIdle);
                datasource.setMaxActive(maxActive);
                datasource.setMaxWait(maxWait);
                datasource.setTimeBetweenEvictionRunsMillis(timeBetweenEvictionRunsMillis);
                datasource.setMinEvictableIdleTimeMillis(minEvictableIdleTimeMillis);
                datasource.setValidationQuery(validationQuery);
                datasource.setTestWhileIdle(testWhileIdle);
                datasource.setTestOnBorrow(testOnBorrow);
                datasource.setTestOnReturn(testOnReturn);
                try {
                        datasource.setFilters(filters);
                } catch (SQLException e) {
                        logger.error(&quot;druid configuration initialization filter&quot;, e);
                }

                Map&amp;lt;Object, Object&amp;gt; dsMap = new HashMap();
                dsMap.put(&quot;read_ds_1&quot;, druidDataSource_read1());
                dsMap.put(&quot;read_ds_2&quot;, druidDataSource_read2());

                dsMap.put(&quot;write_ds&quot;, datasource);

                DynamicDataSource dynamicDataSource = new DynamicDataSource();
                dynamicDataSource.setTargetDataSources(dsMap);
                return dynamicDataSource;
        }

        public DataSource druidDataSource_read1() {
                DruidDataSource datasource = new DruidDataSource();
                datasource.setUrl(salve1Url);
                datasource.setUsername(username);
                datasource.setPassword(password);
                datasource.setDriverClassName(driverClassName);
                datasource.setInitialSize(initialSize);
                datasource.setMinIdle(minIdle);
                datasource.setMaxActive(maxActive);
                datasource.setMaxWait(maxWait);
                datasource.setTimeBetweenEvictionRunsMillis(timeBetweenEvictionRunsMillis);
                datasource.setMinEvictableIdleTimeMillis(minEvictableIdleTimeMillis);
                datasource.setValidationQuery(validationQuery);
                datasource.setTestWhileIdle(testWhileIdle);
                datasource.setTestOnBorrow(testOnBorrow);
                datasource.setTestOnReturn(testOnReturn);
                try {
                        datasource.setFilters(filters);
                } catch (SQLException e) {
                        logger.error(&quot;druid configuration initialization filter&quot;, e);
                }
                return datasource;
        }
        public DataSource druidDataSource_read2() {
                DruidDataSource datasource = new DruidDataSource();
                datasource.setUrl(salve2Url);
                datasource.setUsername(username);
                datasource.setPassword(password);
                datasource.setDriverClassName(driverClassName);
                datasource.setInitialSize(initialSize);
                datasource.setMinIdle(minIdle);
                datasource.setMaxActive(maxActive);
                datasource.setMaxWait(maxWait);
                datasource.setTimeBetweenEvictionRunsMillis(timeBetweenEvictionRunsMillis);
                datasource.setMinEvictableIdleTimeMillis(minEvictableIdleTimeMillis);
                datasource.setValidationQuery(validationQuery);
                datasource.setTestWhileIdle(testWhileIdle);
                datasource.setTestOnBorrow(testOnBorrow);
                datasource.setTestOnReturn(testOnReturn);
                try {
                        datasource.setFilters(filters);
                } catch (SQLException e) {
                        logger.error(&quot;druid configuration initialization filter&quot;, e);
                }
                return datasource;
        }

}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;6 æ•°æ®æºæ³¨è§£ï¼šåœ¨serviceå±‚é€šè¿‡æ•°æ®æºæ³¨è§£æ¥æŒ‡å®šæ•°æ®æº&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
/**
 * @author lishun
 * @Description: è¯»æ•°æ®æºæ³¨è§£
 * @date 2017/8/9
 */
@Target({ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
public @interface ReadDataSource {
        String vlaue() default &quot;read_ds&quot;;
}

/**
 * @author lishun
 * @Description: å†™æ•°æ®æºæ³¨è§£
 * @date 2017/8/9
 */
@Target({ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
public @interface WriteDataSource {
        String value() default &quot;write_ds&quot;;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;7 service aopåˆ‡é¢æ¥åˆ‡æ¢æ•°æ®æº&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;37&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
/**
 * @author lishun
 * @Description: TODO
 * @date 2017/8/9
 */
@Component
@Aspect
public class ServiceAspect implements PriorityOrdered {
        @Pointcut(&quot;execution(public * com.lishun.service.*.*(..))&quot;)
        public void dataSource(){};

        @Before(&quot;dataSource()&quot;)
        public void before(JoinPoint joinPoint){
                Class&amp;lt;?&amp;gt; className = joinPoint.getTarget().getClass();//è·å¾—å½“å‰è®¿é—®çš„class
                String methodName = joinPoint.getSignature().getName();//è·å¾—è®¿é—®çš„æ–¹æ³•å
                Class[] argClass = ((MethodSignature)joinPoint.getSignature()).getParameterTypes();//å¾—åˆ°æ–¹æ³•çš„å‚æ•°çš„ç±»å‹
                String dataSource = DynamicDataSource.DEFAULT_DS;
                try {
                        Method method = className.getMethod(methodName, argClass);// å¾—åˆ°è®¿é—®çš„æ–¹æ³•å¯¹è±¡
                        if (method.isAnnotationPresent(ReadDataSource.class)) {
                                ReadDataSource annotation = method.getAnnotation(ReadDataSource.class);
                                dataSource = annotation.vlaue();
                                int i = new Random().nextInt(2) + 1;    /* ç®€å•çš„è´Ÿè½½å‡è¡¡ */

                                dataSource = dataSource + &quot;_&quot; + i;
                        }else if (method.isAnnotationPresent(WriteDataSource.class)){
                                WriteDataSource annotation = method.getAnnotation(WriteDataSource.class);
                                dataSource = annotation.value();
                        }
                } catch (Exception e) {
                        e.printStackTrace();
                }
                DynamicDataSource.setDB(dataSource);// åˆ‡æ¢æ•°æ®æº
        }

        /* åŸºäºæ–¹æ³•å
        @Before(&quot;execution(public * com.lishun.service.*.find*(..)) || execution(public * com.lishun.service.*.query*(..))&quot;)
        public void read(JoinPoint joinPoint){
                DynamicDataSource.setDB(&quot;read_ds&quot;);// åˆ‡æ¢æ•°æ®æº
        }
        @Before(&quot;execution(public * com.lishun.service.*.insert*(..)) || execution(public * com.lishun.service.*.add*(..))&quot;)
        public void write(JoinPoint joinPoint){
                DynamicDataSource.setDB(&quot;write_ds&quot;);// åˆ‡æ¢æ•°æ®æº
        }
        */

        @After(&quot;dataSource()&quot;)
        public void after(JoinPoint joinPoint){
                DynamicDataSource.clearDB();// åˆ‡æ¢æ•°æ®æº
        }

        @AfterThrowing(&quot;dataSource()&quot;)
        public void AfterThrowing(){
                System.out.println(&quot;AfterThrowing---------------&quot; );
        }

        @Override
        public int getOrder() {
                return 1;//æ•°å€¼è¶Šå°è¯¥åˆ‡é¢å…ˆè¢«æ‰§è¡Œ,å…ˆé€‰æ‹©æ•°æ®æºï¼ˆé˜²æ­¢äº‹åŠ¡aopä½¿ç”¨æ•°æ®æºå‡ºç°ç©ºå¼‚å¸¸)
        }
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;8 æµ‹è¯• mapperçš„ä»£ç å°±ä¸è´´äº†ï¼Œä¸»è¦æ˜¯serviceå’Œcontroller&lt;/p&gt;
&lt;p&gt;ã€€ã€€service&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
@Service
@Transactional
public class WmIpInfoServiceImpl implements WmIpInfoService {
        @Autowired
        public WmIpInfoMapper wmIpInfoMapper;

        @Override
        @ReadDataSource
        public WmIpInfo findOneById(String id) {
                //wmIpInfoMapper.selectByPrimaryKey(id);
                return wmIpInfoMapper.selectByPrimaryKey(id);
        }

        @Override
        @WriteDataSource
        public int insert(WmIpInfo wmIpInfo) {
                int result = wmIpInfoMapper.insert(wmIpInfo);
                return result;
        }
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€contrlloer&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
@RestController
public class IndexController {
        @Autowired
        public WmIpInfoService wmIpInfoService;
        @GetMapping(&quot;/index/{id}&quot;)
        public WmIpInfo index(@PathVariable(value = &quot;id&quot;) String id){
                WmIpInfo wmIpInfo = new WmIpInfo();
                wmIpInfo.setId(UUID.randomUUID().toString());
                wmIpInfoService.insert(wmIpInfo);
                wmIpInfoService.findOneById(id);
                return null;
        }
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€è¿è¡Œspring boot åœ¨æµè§ˆå™¨è¾“å…¥http://localhost:9022/index/123456&lt;/p&gt;
&lt;p&gt;ã€€ã€€æŸ¥çœ‹æ—¥å¿—&lt;/p&gt;

&lt;p&gt;Â &lt;img src=&quot;https://images2018.cnblogs.com/blog/590770/201802/590770-20180227171529034-1025797692.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â &lt;strong&gt;åŸºäºä¸­é—´ä»¶æ–¹å¼å®ç°è¯»å†™åˆ†ç¦»(mycatï¼šä¸»è¦æ˜¯mycatå®‰è£…ä½¿ç”¨åŠå…¶æ³¨æ„äº‹é¡¹)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;3-1 ä¸‹è½½ http://dl.mycat.io/&lt;br/&gt;3-2 è§£å‹,é…ç½®MYCAT_HOME;&lt;br/&gt;3-3 ä¿®æ”¹æ–‡ä»¶ vim conf/schema.xml&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;?&lt;/span&gt;&lt;span&gt;xml version=&quot;1.0&quot;&lt;/span&gt;&lt;span&gt;?&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;!&lt;/span&gt;&lt;span&gt;DOCTYPE mycat:schema SYSTEM &quot;schema.dtd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;mycat:schema &lt;/span&gt;&lt;span&gt;xmlns:mycat&lt;/span&gt;&lt;span&gt;=&quot;http://io.mycat/&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
ã€€ã€€&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;schema &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;worldmap&quot;&lt;/span&gt;&lt;span&gt; checkSQLschema&lt;/span&gt;&lt;span&gt;=&quot;false&quot;&lt;/span&gt;&lt;span&gt; sqlMaxLimit&lt;/span&gt;&lt;span&gt;=&quot;100&quot;&lt;/span&gt;&lt;span&gt; dataNode&lt;/span&gt;&lt;span&gt;=&quot;worldmap_node&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;schema&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
ã€€ã€€&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dataNode &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;worldmap_node&quot;&lt;/span&gt;&lt;span&gt; dataHost&lt;/span&gt;&lt;span&gt;=&quot;worldmap_host&quot;&lt;/span&gt;&lt;span&gt; database&lt;/span&gt;&lt;span&gt;=&quot;worldmap&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt; &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; database:æ•°æ®åº“åç§° &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
ã€€ã€€&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dataHost &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;worldmap_host&quot;&lt;/span&gt;&lt;span&gt; maxCon&lt;/span&gt;&lt;span&gt;=&quot;1000&quot;&lt;/span&gt;&lt;span&gt; minCon&lt;/span&gt;&lt;span&gt;=&quot;10&quot;&lt;/span&gt;&lt;span&gt; balance&lt;/span&gt;&lt;span&gt;=&quot;1&quot;&lt;/span&gt;&lt;span&gt; writeType&lt;/span&gt;&lt;span&gt;=&quot;0&quot;&lt;/span&gt;&lt;span&gt; dbType&lt;/span&gt;&lt;span&gt;=&quot;mysql&quot;&lt;/span&gt;&lt;span&gt; dbDriver&lt;/span&gt;&lt;span&gt;=&quot;native&quot;&lt;/span&gt;&lt;span&gt; switchType&lt;/span&gt;&lt;span&gt;=&quot;2&quot;&lt;/span&gt;&lt;span&gt; slaveThreshold&lt;/span&gt;&lt;span&gt;=&quot;100&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
ã€€ã€€ã€€ã€€&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;heartbeat&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;select user()&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;heartbeat&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
ã€€ã€€ã€€ã€€&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;writeHost &lt;/span&gt;&lt;span&gt;host&lt;/span&gt;&lt;span&gt;=&quot;hostM1&quot;&lt;/span&gt;&lt;span&gt; url&lt;/span&gt;&lt;span&gt;=&quot;192.168.203.135:3306&quot;&lt;/span&gt;&lt;span&gt; user&lt;/span&gt;&lt;span&gt;=&quot;root&quot;&lt;/span&gt;&lt;span&gt; password&lt;/span&gt;&lt;span&gt;=&quot;123456&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;è¯»å†™åˆ†ç¦»æ¨¡å¼ï¼Œå†™åº“ï¼š192.168.203.135ï¼Œè¯»åº“192.168.203.139&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
ã€€ã€€ã€€ã€€ã€€ã€€&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;readHost &lt;/span&gt;&lt;span&gt;host&lt;/span&gt;&lt;span&gt;=&quot;hostR1&quot;&lt;/span&gt;&lt;span&gt; url&lt;/span&gt;&lt;span&gt;=&quot;192.168.203.139:3306&quot;&lt;/span&gt;&lt;span&gt; user&lt;/span&gt;&lt;span&gt;=&quot;root&quot;&lt;/span&gt;&lt;span&gt; password&lt;/span&gt;&lt;span&gt;=&quot;123456&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
ã€€ã€€ã€€ã€€&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;writeHost&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
ã€€ã€€ã€€ã€€&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;writeHost &lt;/span&gt;&lt;span&gt;host&lt;/span&gt;&lt;span&gt;=&quot;hostM2&quot;&lt;/span&gt;&lt;span&gt; url&lt;/span&gt;&lt;span&gt;=&quot;192.168.203.135:3306&quot;&lt;/span&gt;&lt;span&gt; user&lt;/span&gt;&lt;span&gt;=&quot;root&quot;&lt;/span&gt;&lt;span&gt; password&lt;/span&gt;&lt;span&gt;=&quot;123456&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt; &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;ä¸»ä»åˆ‡æ¢æ¨¡å¼,å½“hostM1å®•æœºï¼Œè¯»å†™æ“ä½œåœ¨hostM2æœåŠ¡å™¨æ•°æ®åº“æ‰§è¡Œ&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
ã€€ã€€&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dataHost&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;mycat:schema&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€é…ç½®è¯´æ˜ï¼š&lt;br/&gt;ã€€ã€€name:å±æ€§å”¯ä¸€æ ‡è¯†dataHostæ ‡ç­¾ï¼Œä¾›ä¸Šå±‚çš„æ ‡ç­¾ä½¿ç”¨ã€‚&lt;br/&gt;ã€€ã€€maxCon:æœ€å¤§è¿æ¥æ•°&lt;br/&gt;ã€€ã€€minCon:æœ€å…ˆè¿æ¥æ•°&lt;br/&gt;ã€€ã€€balance&lt;br/&gt;ã€€ã€€ã€€ã€€1ã€balance=0 ä¸å¼€å¯è¯»å†™åˆ†ç¦»æœºåˆ¶ï¼Œæ‰€æœ‰è¯»æ“ä½œéƒ½å‘é€åˆ°å½“å‰å¯ç”¨çš„writehostäº† .&lt;br/&gt;ã€€ã€€ã€€ã€€2ã€balance=1 å…¨éƒ¨çš„readhostä¸stand by writeHost å‚ä¸selectè¯­å¥çš„è´Ÿè½½å‡è¡¡ã€‚ç®€å•çš„è¯´ï¼ŒåŒä¸»åŒä»æ¨¡å¼(M1Ã S1,M2Ã S2ï¼Œå¹¶ä¸”M1å’ŒM2äº’ä¸ºä¸»å¤‡)ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼ŒM1ï¼ŒS1ï¼ŒS2éƒ½å‚ä¸selectè¯­å¥çš„å¤æ‚å‡è¡¡ã€‚&lt;br/&gt;ã€€ã€€ã€€ã€€3ã€balance=2 æ‰€æœ‰è¯»æ“ä½œéƒ½éšæœºçš„åœ¨readhostå’Œwritehostä¸Šåˆ†å‘&lt;/p&gt;&lt;p&gt;ã€€ã€€writeType è´Ÿè½½å‡è¡¡ç±»å‹ï¼Œç›®å‰çš„å–å€¼æœ‰3ç§ï¼š&lt;br/&gt;ã€€ã€€ã€€ã€€1ã€writeType=&quot;0â€³, æ‰€æœ‰å†™æ“ä½œå‘é€åˆ°é…ç½®çš„ç¬¬ä¸€ä¸ªwriteHostã€‚&lt;br/&gt;ã€€ã€€ã€€ã€€2ã€writeType=&quot;1â€³ï¼Œæ‰€æœ‰å†™æ“ä½œéƒ½éšæœºçš„å‘é€åˆ°é…ç½®çš„writeHostã€‚&lt;br/&gt;ã€€ã€€ã€€ã€€3ã€writeType=&quot;2â€³ï¼Œä¸æ‰§è¡Œå†™æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€switchType&lt;br/&gt;ã€€ã€€ã€€ã€€1ã€switchType=-1 è¡¨ç¤ºä¸è‡ªåŠ¨åˆ‡æ¢&lt;br/&gt;ã€€ã€€ã€€ã€€2ã€switchType=1 é»˜è®¤å€¼ï¼Œè‡ªåŠ¨åˆ‡æ¢&lt;br/&gt;ã€€ã€€ã€€ã€€3ã€switchType=2 åŸºäºMySQL ä¸»ä»åŒæ­¥çš„çŠ¶æ€å†³å®šæ˜¯å¦åˆ‡æ¢&lt;/p&gt;&lt;p&gt;ã€€ã€€dbType:æ•°æ®åº“ç±»å‹ mysql,postgresql,mongodbã€oracleã€sparkç­‰ã€‚&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€heartbeat:ç”¨äºå’Œåç«¯æ•°æ®åº“è¿›è¡Œå¿ƒè·³æ£€æŸ¥çš„è¯­å¥ã€‚ä¾‹å¦‚,MYSQLå¯ä»¥ä½¿ç”¨select user()ï¼ŒOracleå¯ä»¥ä½¿ç”¨select 1 from dualç­‰ã€‚&lt;br/&gt;ã€€ã€€ã€€ã€€ã€€ã€€è¿™ä¸ªæ ‡ç­¾è¿˜æœ‰ä¸€ä¸ªconnectionInitSqlå±æ€§ï¼Œä¸»è¦æ˜¯å½“ä½¿ç”¨Oraclaæ•°æ®åº“æ—¶ï¼Œéœ€è¦æ‰§è¡Œçš„åˆå§‹åŒ–SQLè¯­å¥å°±è¿™ä¸ªæ”¾åˆ°è¿™é‡Œé¢æ¥ã€‚ä¾‹å¦‚ï¼šaltersession set nls_date_format='yyyy-mm-dd hh24:mi:ss'&lt;br/&gt;ã€€ã€€ã€€ã€€ã€€ã€€å½“switchType=2 ä¸»ä»åˆ‡æ¢çš„è¯­å¥å¿…é¡»æ˜¯ï¼šshow slave status&lt;/p&gt;&lt;p&gt;ã€€ã€€writeHostã€readHost:è¿™ä¸¤ä¸ªæ ‡ç­¾éƒ½æŒ‡å®šåç«¯æ•°æ®åº“çš„ç›¸å…³é…ç½®ç»™mycatï¼Œç”¨äºå®ä¾‹åŒ–åç«¯è¿æ¥æ± ã€‚å”¯ä¸€ä¸åŒçš„æ˜¯ï¼ŒwriteHostæŒ‡å®šå†™å®ä¾‹ã€readHostæŒ‡å®šè¯»å®ä¾‹ï¼Œ&lt;br/&gt;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€åœ¨ä¸€ä¸ªdataHostå†…å¯ä»¥å®šä¹‰å¤šä¸ªwriteHostå’ŒreadHostã€‚ä½†æ˜¯ï¼Œå¦‚æœwriteHostæŒ‡å®šçš„åç«¯æ•°æ®åº“å®•æœºï¼Œé‚£ä¹ˆè¿™ä¸ªwriteHostç»‘å®šçš„æ‰€æœ‰readHostéƒ½å°†ä¸å¯ç”¨ã€‚&lt;br/&gt;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€å¦ä¸€æ–¹é¢ï¼Œç”±äºè¿™ä¸ªwriteHostå®•æœºç³»ç»Ÿä¼šè‡ªåŠ¨çš„æ£€æµ‹åˆ°ï¼Œå¹¶åˆ‡æ¢åˆ°å¤‡ç”¨çš„writeHostä¸Šå»ã€‚&lt;/p&gt;&lt;p&gt;3-4 ä¿®æ”¹æ–‡ä»¶ vim conf/server.xml&lt;/p&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;!&lt;/span&gt;&lt;span&gt;DOCTYPE mycat:server SYSTEM &quot;server.dtd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;mycat:server &lt;/span&gt;&lt;span&gt;xmlns:mycat&lt;/span&gt;&lt;span&gt;=&quot;http://io.mycat/&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;system&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;system&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;user &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;root&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
ã€€ã€€&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;property &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;password&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;123456&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;property&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
ã€€ã€€&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;property &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;schemas&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;worldmap&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;property&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;ä¸schema.xmlç›¸å¯¹åº”&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
ã€€ã€€&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;property &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;readOnly&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;false&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;property&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt; &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;readOnlyæ˜¯åº”ç”¨è¿æ¥ä¸­é—´ä»¶é€»è¾‘åº“æ‰€å…·æœ‰çš„æƒé™ã€‚trueä¸ºåªè¯»ï¼Œfalseä¸ºè¯»å†™éƒ½æœ‰ï¼Œé»˜è®¤ä¸ºfalseã€‚&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;mycat:server&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;3-5 å¯åŠ¨ mycat start&lt;br/&gt;æŸ¥çœ‹å¯åŠ¨æ—¥å¿—ï¼šlogs/wrapper.log;ï¼Œæ­£å¸¸å¯åŠ¨æˆåŠŸåä¼šæœ‰mycat.logæ—¥å¿—ï¼Œå¦‚æœæœåŠ¡æœªå¯åŠ¨æˆåŠŸä¸ä¼šæœ‰å¯¹åº”æ—¥å¿—&lt;/p&gt;
&lt;p&gt;3-6:å¯¹äºå¼€å‘äººå‘˜mycatç›¸å½“äºä¸€ä¸ªæ–°çš„æ•°æ®åº“æœåŠ¡ç«¯(é»˜è®¤ç«¯å£8066)ï¼Œå¼€å‘äººå‘˜å¢åˆ æ”¹æŸ¥ä¸å†æ˜¯ç›´æ¥è¿æ¥æ•°æ®åº“ï¼Œè€Œæ˜¯è¿æ¥æ•°æ®åº“ä¸­é—´ä»¶ï¼Œä¸­é—´ä»¶é€šè¿‡å…¶è‡ªå¸¦çš„luaè„šæœ¬è¿›è¡Œsqlåˆ¤æ–­ï¼Œæ¥è·¯ç”±åˆ°æŒ‡å®šæ•°æ®åº“(å®è´¨æ ¹æ®selet,insert,update,deleteå…³é”®å­—)&lt;/p&gt;
&lt;p&gt;3-7:æµ‹è¯•è¯»å†™åˆ†ç¦»&lt;/p&gt;
&lt;p&gt;ã€€ã€€è¯»æ•°æ®è·¯ç”±åˆ° 192.168.203.139&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/590770/201802/590770-20180227172019096-1889568552.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€å†™æ•°æ®è·¯ç”±åˆ°192.168.203.135ã€€&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/590770/201802/590770-20180227172040250-516919727.png&quot; alt=&quot;&quot;/&gt;ã€€&lt;/p&gt;
&lt;p&gt;ã€€ã€€å½“ä¸»åº“å®•æœºï¼Œè¯»å†™æ“ä½œéƒ½åœ¨192.168.203.139&lt;/p&gt;
&lt;p&gt;ã€€ã€€&lt;img src=&quot;https://images2018.cnblogs.com/blog/590770/201802/590770-20180227172057208-484784339.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€&lt;img src=&quot;https://images2018.cnblogs.com/blog/590770/201802/590770-20180227172109899-1616693912.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;3-8:æ³¨æ„äº‹é¡¹&lt;br/&gt;ä¸€èˆ¬ä½¿ç”¨æ¡†æ¶éƒ½ä¼šç”¨åˆ°äº‹åŠ¡ï¼Œå¦‚æœéƒ½è¦åˆ°äº‹åŠ¡é‚£ä¹ˆå°±éƒ½ä¼šè®¿é—®ä¸»æœåŠ¡å™¨ï¼Œè¾¾ä¸åˆ°åˆ†ç¦»çš„æ•ˆæœï¼Œå› æ­¤é…ç½®äº‹åŠ¡çš„æ—¶å€™è¦æ³¨æ„åŒºåˆ†ï¼Œæ¯”å¦‚åªå¯¹åŒ…å«å¢åˆ æ”¹çš„è¿›è¡Œäº‹åŠ¡é…ç½®&lt;/p&gt;

</description>
<pubDate>Tue, 27 Feb 2018 09:08:00 +0000</pubDate>
<dc:creator>Curry_30</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/lishun1005/p/8472358.html</dc:identifier>
</item>
</channel>
</rss>