<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>博客园_首页</title>
<link></link>
<description>代码改变世界</description>
<item>
<title>ASP.NET Core入门（一） - lionxin</title>
<link>http://www.cnblogs.com/xinzhi/p/10242082.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/xinzhi/p/10242082.html</guid>
<description>
&lt;p&gt;　　大家好，很荣幸您点了开此篇文章，和我一起来学习ASP.NET Core，此篇文字为《ASP.NET Core入门》系列中的第一篇，&lt;span&gt;本系列将以一个博客系统为例，从第一行代码，到系统发布上线（linux）。&lt;/span&gt;如有错误，请联系我，让我们共同成长，进步，谢谢。下面进入正题：&lt;/p&gt;
&lt;p&gt;　　首先，看到这篇文章可能是一位新手，下面由我先介绍下ASP.NET Core：&lt;/p&gt;
&lt;p&gt;　　ASP.NET Core 是一个新的&lt;span&gt;&lt;a href=&quot;https://github.com/aspnet/Home&quot;&gt;&lt;span&gt;开源&lt;/span&gt;&lt;/a&gt;和跨平台的框架&lt;/span&gt;，用于构建如 Web 应用、物联网（IoT）应用和移动后端应用等连接到互联网的基于云的现代应用程序。ASP.NET Core 应用可运行于 .NET Core 和完整的 .NET Framework 之上。它整合了原来ASP.NET中的MVC和WebApi框架，你可以在 Windows、Mac 和 Linux 上跨平台的开发和运行你的 ASP.NET Core 应用。&lt;span&gt;重点：跨平台的开发和运行是之前.NET Framework没有的。&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;　　对比之前的.NET Framework，它具有如下&lt;span&gt;优点&lt;/span&gt;：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　　　1.跨平台（Windows、Mac 和 Linux都可以开发，部署）&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　　　2.内置了依赖注入（middewere）&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　　　3.部署应用服务器有更多的选择（除去之前的IIS，还有了新的Kestrel等等）&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　　　4.轻量级，高性能，模块化的HTTP管线。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　　　5..NET Core是开源的。&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;　　那么说到这么多的好处，我们&lt;span&gt;学习起来&lt;/span&gt;又是什么样子的呢？下面我也做了一个简单的对比：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　　　在配置方面：ASP.NET 使用的是web.config文件，而ASP.NET Core使用 appsettings.json 文件来进行配置。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　　　依赖注入：ASP.NET不需要/很少关注就可以开发一个完整的程序，而ASP.NET Core使用了大量的依赖注入（包括本地文件读取都需要）。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　　　管道：ASP.NET使用 httpmodule来配置使用，而ASP.NET Core则使用的是middware。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;　　说了这么多概念性的东西，大家也许很懵，那就先敲俩行，试试全新的ASP.NET Core。&lt;/p&gt;

&lt;p&gt;　　　　环境所需，大家可自行下载（注意：&lt;span&gt;sdk与Runtime版本需相同&lt;/span&gt;）&lt;/p&gt;
&lt;p&gt;　　　　　　.NET Core sdk&lt;/p&gt;
&lt;p&gt;　　　　　　.NET Core Runtime&lt;/p&gt;
&lt;p&gt;　　　　　　VS2017及以上或VS Code&lt;/p&gt;
&lt;p&gt;　　　　　　sdk和runntime下载地址：https://dotnet.microsoft.com/download，vs 2017/vs code下载地址：https://docs.microsoft.com/zh-cn/visualstudio/products/?view=vs-2017&lt;/p&gt;

&lt;p&gt;　　　　安装好以后，我们开始第一行代码，这里我们使用vs code来做示例：&lt;/p&gt;
&lt;p&gt;　　　　打开vs code后，我们看到的是这副画面　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/782902/201901/782902-20190108232520413-136649896.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　找到菜单栏：查看-&amp;gt;集成终端&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/782902/201901/782902-20190108232557058-1270928837.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　输入：dotnet --version，终端显示端口号为正确，否则请检测安装sdk，Runtime环境是否安装正确。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/782902/201901/782902-20190108232748984-1475905871.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　好，下面我们来新建一个项目，输入：dotnet new --help 来查看可创建程序的模板&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/782902/201901/782902-20190108233141410-638272921.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt; 我们来新建一个最简单的 MVC项目，输入 dotnet new mvc即可创建一个mvc模板项目。创建成功后，会自动还原一次包（必须引用的包）。可以执行 dotnet restore 手动来还原包。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/782902/201901/782902-20190108233550836-1824356415.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　最后，我们执行 dotnet run来运行这个程序。输入终端返回的地址，就可以访问我们创建好的项目。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/782902/201901/782902-20190108233858940-1580472904.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/782902/201901/782902-20190108233831897-813072755.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;　　最后，我们来总结下今天所学到的知识，第一篇内容很简单吧，下一篇开始我们会先将第一篇创建的程序放入linux环境中，然后与数据库进行交互。&lt;/p&gt;
&lt;p&gt;　　总结下今天所用到的命令：&lt;/p&gt;
&lt;p&gt;　　　　dotnet --version：查看runtime的版本号&lt;/p&gt;
&lt;p&gt;　　　　dotnet new --help：查看可创建的模块列表&lt;/p&gt;
&lt;p&gt;　　　　dotnet new mvc：创建一个mvc模板项目&lt;/p&gt;
&lt;p&gt;　　　　dotnet restore：还原包&lt;/p&gt;
&lt;p&gt;　　　　dotnet run：运行项目&lt;/p&gt;
&lt;p&gt;　　如文中有错误，还请您多多指出，共同学习进步。&lt;/p&gt;
</description>
<pubDate>Tue, 08 Jan 2019 15:46:00 +0000</pubDate>
<dc:creator>lionxin</dc:creator>
<og:description>大家好，很荣幸您点了开此篇文章，和我一起来学习ASP.NET Core，此篇文字为《ASP.NET Core入门》系列中的第一篇，本系列将以一个博客系统为例，从第一行代码，到系统发布上线（linux）</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/xinzhi/p/10242082.html</dc:identifier>
</item>
<item>
<title>通俗易懂--岭回归(L2)、lasso回归(L1)、ElasticNet讲解(算法+案例) - mantch</title>
<link>http://www.cnblogs.com/mantch/p/10242077.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/mantch/p/10242077.html</guid>
<description>&lt;h2 id=&quot;l2正则化岭回归&quot;&gt;1.L2正则化(岭回归)&lt;/h2&gt;
&lt;h3 id=&quot;问题&quot;&gt;1.1问题&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://images0.cnblogs.com/blog/663864/201411/081949249876584.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;想要理解什么是正则化，首先我们先来了解上图的方程式。当训练的特征和数据很少时，往往会造成欠拟合的情况，对应的是左边的坐标；而我们想要达到的目的往往是中间的坐标，适当的特征和数据用来训练；但往往现实生活中影响结果的因素是很多的，也就是说会有很多个特征值，所以训练模型的时候往往会造成过拟合的情况，如右边的坐标所示。&lt;/p&gt;
&lt;h3 id=&quot;公式&quot;&gt;1.2公式&lt;/h3&gt;
&lt;p&gt;以图中的公式为例，往往我们得到的模型是：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2019/01/08/5c34b8bda06d3.png&quot; alt=&quot;UTOOLS1546959038274.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;为了能够得到中间坐标的图形，肯定是&lt;strong&gt;希望θ3和θ4越小越好&lt;/strong&gt;，因为这两项越小就越接近于0，就可以得到中间的图形了。&lt;/p&gt;
&lt;p&gt;对应的损失函数也加上这个惩罚项(为了惩罚θ)：假设&lt;em&gt;λ&lt;/em&gt;=1000&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2019/01/08/5c34b941f2bf5.png&quot; alt=&quot;UTOOLS1546959169901.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;为了求得最小值，&lt;strong&gt;使θ值趋近于0&lt;/strong&gt;，这就达到了我们的目的，得到中间坐标的方程。&lt;/p&gt;
&lt;p&gt;把以上公式通用化得：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2019/01/08/5c34b975cf88d.png&quot; alt=&quot;UTOOLS1546959221738.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;相当于在原始损失函数中加上了一个惩罚项(λ项)&lt;/p&gt;
&lt;p&gt;这就是&lt;strong&gt;防止过拟合&lt;/strong&gt;的一个方法，通常叫做&lt;strong&gt;L2正则化，也叫作岭回归。&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;对应图形&quot;&gt;1.3对应图形&lt;/h3&gt;
&lt;p&gt;我们可以简化L2正则化的方程：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2019/01/08/5c34b9a91663f.png&quot; alt=&quot;UTOOLS1546959273104.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;J0表示原始的损失函数，咱们假设正则化项为：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2019/01/08/5c34ba6b35b6a.png&quot; alt=&quot;UTOOLS1546959466689.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;我们不妨回忆一下圆形的方程：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2019/01/08/5c34ba88553fb.png&quot; alt=&quot;UTOOLS1546959496318.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;其中(a,b)为圆心坐标，r为半径。那么经过坐标原点的单位元可以写成：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2019/01/08/5c34baf161c01.png&quot; alt=&quot;UTOOLS1546959601400.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;正和L2正则化项一样，同时，机器学习的任务就是要通过一些方法（比如梯度下降）求出损失函数的最小值。&lt;/p&gt;
&lt;p&gt;此时我们的任务变成在L约束下求出J0取最小值的解。&lt;/p&gt;
&lt;p&gt;求解J0的过程可以画出等值线。同时L2正则化的函数L也可以在w1w2的二维平面上画出来。如下图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2019/01/08/5c34a2efa0b01.png&quot; alt=&quot;UTOOLS1546953455440.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;L表示为图中的黑色圆形，随着梯度下降法的不断逼近，与圆第一次产生交点，而这个交点很难出现在坐标轴上。&lt;/p&gt;
&lt;p&gt;这就说明了L2正则化不容易得到稀疏矩阵，同时为了求出损失函数的最小值，使得w1和w2无限接近于0，达到防止过拟合的问题。&lt;/p&gt;
&lt;h3 id=&quot;使用场景&quot;&gt;1.4使用场景&lt;/h3&gt;
&lt;p&gt;只要数据线性相关，用LinearRegression拟合的不是很好，&lt;strong&gt;需要正则化&lt;/strong&gt;，可以考虑使用岭回归(L2), 如何输入特征的维度很高,而且是稀疏线性关系的话， 岭回归就不太合适,考虑使用Lasso回归。&lt;/p&gt;
&lt;h3 id=&quot;代码实现&quot;&gt;1.5代码实现&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/mantchs/machine_learning_model/blob/master/Regularization/RidgeCV.ipynb&quot;&gt;GitHub代码--L2正则化&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;l1正则化lasso回归&quot;&gt;2.L1正则化(lasso回归)&lt;/h2&gt;
&lt;h3 id=&quot;公式-1&quot;&gt;2.1公式&lt;/h3&gt;
&lt;p&gt;L1正则化与L2正则化的区别在于惩罚项的不同：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2019/01/08/5c34bb9ac2621.png&quot; alt=&quot;UTOOLS1546959770276.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;L1正则化表现的是θ的绝对值，变化为上面提到的w1和w2可以表示为：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2019/01/08/5c34bbc779e82.png&quot; alt=&quot;UTOOLS1546959815505.png&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;对应图形-1&quot;&gt;2.2对应图形&lt;/h3&gt;
&lt;p&gt;求解J0的过程可以画出等值线。同时L1正则化的函数也可以在w1w2的二维平面上画出来。如下图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2019/01/08/5c34ab9a546f7.png&quot; alt=&quot;UTOOLS1546955675245.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;惩罚项表示为图中的黑色棱形，随着梯度下降法的不断逼近，与棱形第一次产生交点，而这个交点很容易出现在坐标轴上。&lt;strong&gt;这就说明了L1正则化容易得到稀疏矩阵。&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;使用场景-1&quot;&gt;2.3使用场景&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;L1正则化(Lasso回归)可以使得一些特征的系数变小,甚至还使一些绝对值较小的系数直接变为0&lt;/strong&gt;，从而增强模型的泛化能力 。对于高纬的特征数据,尤其是线性关系是稀疏的，就采用L1正则化(Lasso回归),或者是要在一堆特征里面找出主要的特征，那么L1正则化(Lasso回归)更是首选了。&lt;/p&gt;
&lt;h3 id=&quot;代码实现-1&quot;&gt;2.4代码实现&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/mantchs/machine_learning_model/blob/master/Regularization/LassoCV.ipynb&quot;&gt;GitHub代码--L1正则化&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;elasticnet回归&quot;&gt;3.ElasticNet回归&lt;/h2&gt;
&lt;h3 id=&quot;公式-2&quot;&gt;3.1公式&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;ElasticNet综合了L1正则化项和L2正则化项&lt;/strong&gt;，以下是它的公式：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2019/01/08/5c34bc051086c.png&quot; alt=&quot;UTOOLS1546959876945.png&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;使用场景-2&quot;&gt;3.2使用场景&lt;/h3&gt;
&lt;p&gt;ElasticNet在我们发现用Lasso回归太过(太多特征被稀疏为0),而岭回归也正则化的不够(回归系数衰减太慢)的时候，可以考虑使用ElasticNet回归来综合，得到比较好的结果。&lt;/p&gt;
&lt;h3 id=&quot;代码实现-2&quot;&gt;3.3代码实现&lt;/h3&gt;
&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;from sklearn import linear_model  
#得到拟合模型，其中x_train,y_train为训练集  
ENSTest = linear_model.ElasticNetCV(alphas=[0.0001, 0.0005, 0.001, 0.01, 0.1, 1, 10], l1_ratio=[.01, .1, .5, .9, .99],  max_iter=5000).fit(x_train, y_train)  
#利用模型预测，x_test为测试集特征变量  
y_prediction = ENSTest.predict(x_test)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/13876065-08b587647d14267c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;image.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;欢迎添加微信交流！请备注“机器学习”。&lt;/p&gt;
</description>
<pubDate>Tue, 08 Jan 2019 15:43:00 +0000</pubDate>
<dc:creator>mantch</dc:creator>
<og:description>1.L2正则化(岭回归) 1.1问题 想要理解什么是正则化，首先我们先来了解上图的方程式。当训练的特征和数据很少时，往往会造成欠拟合的情况，对应...</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/mantch/p/10242077.html</dc:identifier>
</item>
<item>
<title>呵呵气象台 - 正版乔</title>
<link>http://www.cnblogs.com/qiaohaoforever/p/10242016.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/qiaohaoforever/p/10242016.html</guid>
<description>&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;&lt;span&gt;“&lt;/span&gt;&lt;span&gt; 每天叫醒你的除了梦想，还有呵呵气象台。&lt;/span&gt;&lt;span&gt;”&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;&lt;img alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;    2017-2-22 22:12，承载着对外经贸1238宿舍3号床的梦想和希望的“呵呵气象台”成功发出来了第一条微博播报。&lt;/span&gt;&lt;/p&gt;
&lt;div&gt;&lt;img alt=&quot;&quot;/&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;    树莓派DHT11温湿度传感器每日播报，至今已播报304条，还在继续～&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;简单来说就是，树莓派定时通过DHT11温湿度传感器查询当前室内温湿度，然后通过调用微博API将获取到的数据发送出来，每日七点准发送！&lt;/span&gt;&lt;/p&gt;


&lt;p&gt;&lt;span&gt;呵呵气象台&lt;/span&gt;每日7点准时为你播报～&lt;/p&gt;

&lt;div&gt;&lt;span&gt;对了，昨天有朋友对&lt;/span&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzI3NTM1NzM4MQ==&amp;amp;mid=2247483741&amp;amp;idx=1&amp;amp;sn=3bcf69d6ced8a2027c94fbd3b175a91e&amp;amp;chksm=eb074af7dc70c3e1d1783861f3006394db9c2b4a781621b062414aaf1d5aeef302d193910a4a&amp;amp;scene=21#wechat_redirect&quot;&gt;SQL行列乾坤大挪移&lt;/a&gt;&lt;span&gt;提出一种很好对方案，&lt;/span&gt;&lt;span&gt;SQL：使用&lt;/span&gt;&lt;span&gt;PIVOT&lt;/span&gt;&lt;span&gt; 行转列和&lt;/span&gt;&lt;span&gt;UNPIVOT &lt;/span&gt;&lt;span&gt;列转行。&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;推荐阅读：&lt;/span&gt;&lt;/p&gt;


&lt;hr/&gt;

&lt;p&gt;&lt;span&gt;一个学统计的程序员&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;喜欢Coding&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;喜欢硬件&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;喜欢树莓派&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;喜欢深度学习&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;喜欢你&lt;/span&gt;&lt;/p&gt;
&lt;div&gt;&lt;span&gt;&lt;img src=&quot;data:image/jpeg;base64,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&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/div&gt;





</description>
<pubDate>Tue, 08 Jan 2019 15:18:00 +0000</pubDate>
<dc:creator>正版乔</dc:creator>
<og:description>“ 每天叫醒你的除了梦想，还有呵呵气象台。” 2017-2-22 22:12，承载着对外经贸1238宿舍3号床的梦想和希望的“呵呵气象台”成功发出来了第一条微博播报。 树莓派DHT11温湿度</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/qiaohaoforever/p/10242016.html</dc:identifier>
</item>
<item>
<title>Spring Boot Admin 2.1.0 全攻略 - 方志朋的专栏</title>
<link>http://www.cnblogs.com/forezp/p/10242004.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/forezp/p/10242004.html</guid>
<description>&lt;blockquote readability=&quot;3.9156626506024&quot;&gt;
&lt;p&gt;转载请标明出处：&lt;br/&gt;https://www.fangzhipeng.com&lt;br/&gt;本文出自&lt;a href=&quot;http://blog.csdn.net/forezp&quot;&gt;方志朋的博客&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;spring-boot-admin简介&quot;&gt;Spring Boot Admin简介&lt;/h2&gt;
&lt;p&gt;Spring Boot Admin是一个开源社区项目，用于管理和监控SpringBoot应用程序。 应用程序作为Spring Boot Admin Client向为Spring Boot Admin Server注册（通过HTTP）或使用SpringCloud注册中心（例如Eureka，Consul）发现。 UI是的AngularJs应用程序，展示Spring Boot Admin Client的Actuator端点上的一些监控。常见的功能或者监控如下：&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;显示健康状况&lt;/li&gt;
&lt;li&gt;显示详细信息，例如
&lt;ul&gt;&lt;li&gt;JVM和内存指标&lt;/li&gt;
&lt;li&gt;micrometer.io指标&lt;/li&gt;
&lt;li&gt;数据源指标&lt;/li&gt;
&lt;li&gt;缓存指标&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;显示构建信息编号&lt;/li&gt;
&lt;li&gt;关注并下载日志文件&lt;/li&gt;
&lt;li&gt;查看jvm系统和环境属性&lt;/li&gt;
&lt;li&gt;查看Spring Boot配置属性&lt;/li&gt;
&lt;li&gt;支持Spring Cloud的postable / env-和/ refresh-endpoint&lt;/li&gt;
&lt;li&gt;轻松的日志级管理&lt;/li&gt;
&lt;li&gt;与JMX-beans交互&lt;/li&gt;
&lt;li&gt;查看线程转储&lt;/li&gt;
&lt;li&gt;查看http跟踪&lt;/li&gt;
&lt;li&gt;查看auditevents&lt;/li&gt;
&lt;li&gt;查看http-endpoints&lt;/li&gt;
&lt;li&gt;查看计划任务&lt;/li&gt;
&lt;li&gt;查看和删除活动会话（使用spring-session）&lt;/li&gt;
&lt;li&gt;查看Flyway / Liquibase数据库迁移&lt;/li&gt;
&lt;li&gt;下载heapdump&lt;/li&gt;
&lt;li&gt;状态变更通知（通过电子邮件，Slack，Hipchat，......）&lt;/li&gt;
&lt;li&gt;状态更改的事件日志（非持久性）&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;快速开始&quot;&gt;快速开始&lt;/h2&gt;
&lt;h3 id=&quot;创建spring-boot-admin-server&quot;&gt;创建Spring Boot Admin Server&lt;/h3&gt;
&lt;p&gt;本文的所有工程的Spring Boot版本为2.1.0 、Spring Cloud版本为Finchley.SR2。案例采用Maven多module形式，父pom文件引入以下的依赖（完整的依赖见源码）：&lt;/p&gt;
&lt;pre class=&quot;xml&quot;&gt;
&lt;code&gt;
    &amp;lt;parent&amp;gt;
        &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;spring-boot-starter-parent&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;2.1.0.RELEASE&amp;lt;/version&amp;gt;
        &amp;lt;relativePath/&amp;gt;
    &amp;lt;/parent&amp;gt;
    
    
     &amp;lt;dependencyManagement&amp;gt;
        &amp;lt;dependencies&amp;gt;
            &amp;lt;dependency&amp;gt;
                &amp;lt;groupId&amp;gt;org.springframework.cloud&amp;lt;/groupId&amp;gt;
                &amp;lt;artifactId&amp;gt;spring-cloud-dependencies&amp;lt;/artifactId&amp;gt;
                &amp;lt;version&amp;gt;${spring-cloud.version}&amp;lt;/version&amp;gt;
                &amp;lt;type&amp;gt;pom&amp;lt;/type&amp;gt;
                &amp;lt;scope&amp;gt;import&amp;lt;/scope&amp;gt;
            &amp;lt;/dependency&amp;gt;
        &amp;lt;/dependencies&amp;gt;
    &amp;lt;/dependencyManagement&amp;gt;


    &amp;lt;spring-cloud.version&amp;gt;Finchley.SR2&amp;lt;/spring-cloud.version&amp;gt;

&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;在工程admin-server引入admin-server的起来依赖和web的起步依赖，代码如下：&lt;/p&gt;
&lt;pre class=&quot;xml&quot;&gt;
&lt;code&gt;&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;de.codecentric&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;spring-boot-admin-starter-server&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;2.1.0&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;spring-boot-starter-web&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;然后在工程的启动类AdminServerApplication加上@EnableAdminServer注解，开启AdminServer的功能，代码如下：&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;
@SpringBootApplication
@EnableAdminServer
public class AdminServerApplication {

    public static void main(String[] args) {
        SpringApplication.run( AdminServerApplication.class, args );
    }

}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;在工程的配置文件application.yml中配置程序名和程序的端口，代码如下：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;spring:
  application:
    name: admin-server
server:
  port: 8769&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;这样Admin Server就创建好了。&lt;/p&gt;
&lt;h3 id=&quot;创建spring-boot-admin-client&quot;&gt;创建Spring Boot Admin Client&lt;/h3&gt;
&lt;p&gt;在admin-client工程的pom文件引入admin-client的起步依赖和web的起步依赖，代码如下：&lt;/p&gt;
&lt;pre class=&quot;xml&quot;&gt;
&lt;code&gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;de.codecentric&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;spring-boot-admin-starter-client&amp;lt;/artifactId&amp;gt;
            &amp;lt;version&amp;gt;2.1.0&amp;lt;/version&amp;gt;
        &amp;lt;/dependency&amp;gt;
       
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;spring-boot-starter-web&amp;lt;/artifactId&amp;gt;
        &amp;lt;/dependency&amp;gt;

&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;在工程的配置文件application.yml中配置应用名和端口信息，以及向admin-server注册的地址为http://localhost:8769，最后暴露自己的actuator的所有端口信息，具体配置如下：&lt;/p&gt;
&lt;pre class=&quot;text&quot;&gt;
&lt;code&gt;spring:
  application:
    name: admin-client
  boot:
    admin:
      client:
        url: http://localhost:8769
server:
  port: 8768

management:
  endpoints:
    web:
      exposure:
        include: '*'
  endpoint:
    health:
      show-details: ALWAYS
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;在工程的启动文件如下：&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;
@SpringBootApplication
public class AdminClientApplication {

    public static void main(String[] args) {
        SpringApplication.run( AdminClientApplication.class, args );
    }&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;一次启动两个工程，在浏览器上输入localhost:8769 ，浏览器显示的界面如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/2279594-88ce6d01030f102c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;21.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;查看wallboard：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/2279594-5e9fe295ac926683.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;22.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;点击wallboard，可以查看admin-client具体的信息，比如内存状态信息：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/2279594-45dead622a5f83b8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;23.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;也可以查看spring bean的情况：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/2279594-41c61d73375de103.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;24.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;更多监控信息，自己体验。&lt;/p&gt;
&lt;h2 id=&quot;spring-boot-admin结合sc注册中心使用&quot;&gt;Spring boot Admin结合SC注册中心使用&lt;/h2&gt;
&lt;p&gt;同上一个案例一样，本案例也是使用的是Spring Boot版本为2.1.0 、Spring Cloud版本为Finchley.SR2。案例采用Maven多module形式，父pom文件引入以下的依赖（完整的依赖见源码），此处省略。&lt;/p&gt;
&lt;h3 id=&quot;搭建注册中心&quot;&gt;搭建注册中心&lt;/h3&gt;
&lt;p&gt;注册中心使用Eureka、使用Consul也是可以的，在eureka-server工程中的pom文件中引入：&lt;/p&gt;
&lt;pre class=&quot;xml&quot;&gt;
&lt;code&gt; &amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.springframework.cloud&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;spring-cloud-starter-netflix-eureka-server&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;配置eureka-server的端口信息，以及defaultZone和防止自注册。最后系统暴露eureka-server的actuator的所有端口。&lt;/p&gt;
&lt;pre class=&quot;text&quot;&gt;
&lt;code&gt;spring:
  application:
    name: eureka-server
server:
  port: 8761
eureka:
  client:
    service-url:
      defaultZone: http://localhost:8761/eureka
    register-with-eureka: false
    fetch-registry: false
management:
  endpoints:
    web:
      exposure:
        include: &quot;*&quot;
  endpoint:
    health:
      show-details: ALWAYS&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;在工程的启动文件EurekaServerApplication加上@EnableEurekaServer注解开启Eureka Server.&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;
@SpringBootApplication
@EnableEurekaServer
public class EurekaServerApplication {

    public static void main(String[] args) {
        SpringApplication.run( EurekaServerApplication.class, args );
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;eureka-server搭建完毕。&lt;/p&gt;
&lt;h3 id=&quot;搭建admin-server&quot;&gt;搭建admin-server&lt;/h3&gt;
&lt;p&gt;在admin-server工程的pom文件引入admin-server的起步依赖、web的起步依赖、eureka-client的起步依赖，如下：&lt;/p&gt;
&lt;pre class=&quot;xml&quot;&gt;
&lt;code&gt;&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;de.codecentric&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;spring-boot-admin-starter-server&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;2.1.0&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;

&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;spring-boot-starter-web&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;
        
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.springframework.cloud&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;spring-cloud-starter-netflix-eureka-client&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;然后配置admin-server，应用名、端口信息。并向注册中心注册，注册地址为http://localhost:8761，最后将actuator的所有端口暴露出来，配置如下：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;
spring:
  application:
    name: admin-server
server:
  port: 8769
eureka:
  client:
    registryFetchIntervalSeconds: 5
    service-url:
      defaultZone: ${EUREKA_SERVICE_URL:http://localhost:8761}/eureka/
  instance:
    leaseRenewalIntervalInSeconds: 10
    health-check-url-path: /actuator/health

management:
  endpoints:
    web:
      exposure:
        include: &quot;*&quot;
  endpoint:
    health:
      show-details: ALWAYS&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;在工程的启动类AdminServerApplication加上@EnableAdminServer注解，开启admin server的功能，加上@EnableDiscoveryClient注解开启eurke client的功能。&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;
@SpringBootApplication
@EnableAdminServer
@EnableDiscoveryClient
public class AdminServerApplication {

    public static void main(String[] args) {
        SpringApplication.run( AdminServerApplication.class, args );
    }

}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;搭建admin-client&quot;&gt;搭建admin-client&lt;/h3&gt;
&lt;p&gt;在admin-client的pom文件引入以下的依赖，由于2.1.0采用webflux，引入webflux的起步依赖，引入eureka-client的起步依赖，并引用actuator的起步依赖如下：&lt;/p&gt;
&lt;pre class=&quot;xml&quot;&gt;
&lt;code&gt;
 &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;spring-boot-starter-webflux&amp;lt;/artifactId&amp;gt;
        &amp;lt;/dependency&amp;gt;

        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.springframework.cloud&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;spring-cloud-starter-netflix-eureka-client&amp;lt;/artifactId&amp;gt;
        &amp;lt;/dependency&amp;gt;

        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;spring-boot-starter-actuator&amp;lt;/artifactId&amp;gt;
        &amp;lt;/dependency&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;在工程的配置文件配置应用名、端口、向注册中心注册的地址，以及暴露actuator的所有端口。&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;
spring:
  application:
    name: admin-client
eureka:
  instance:
    leaseRenewalIntervalInSeconds: 10
    health-check-url-path: /actuator/health

  client:
    registryFetchIntervalSeconds: 5
    service-url:
      defaultZone: ${EUREKA_SERVICE_URL:http://localhost:8761}/eureka/
management:
  endpoints:
    web:
      exposure:
        include: &quot;*&quot;
  endpoint:
    health:
      show-details: ALWAYS
server:
  port: 8762
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;在启动类加上@EnableDiscoveryClie注解，开启DiscoveryClient的功能。&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;@SpringBootApplication
@EnableDiscoveryClient
public class AdminClientApplication {

    public static void main(String[] args) {
        SpringApplication.run( AdminClientApplication.class, args );
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;一次启动三个工程，在浏览器上访问localhost:8769，浏览器会显示和上一小节一样的界面。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/2279594-88fe4dc021510aab.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;31.png&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;集成spring-security&quot;&gt;集成spring security&lt;/h3&gt;
&lt;p&gt;在2.1.0版本中去掉了hystrix dashboard，登录界面默认集成到了spring security模块，只要加上spring security就集成了登录模块。&lt;/p&gt;
&lt;p&gt;只需要改变下admin-server工程，需要在admin-server工程的pom文件引入以下的依赖：&lt;/p&gt;
&lt;pre class=&quot;xml&quot;&gt;
&lt;code&gt;&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;spring-boot-starter-security&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;在admin-server工的配置文件application.yml中配置spring security的用户名和密码，这时需要在服务注册时带上metadata-map的信息，如下：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;spring:
  security:
    user:
      name: &quot;admin&quot;
      password: &quot;admin&quot;
      
eureka:
  instance:
    metadata-map:
      user.name: ${spring.security.user.name}
      user.password: ${spring.security.user.password}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;写一个配置类SecuritySecureConfig继承WebSecurityConfigurerAdapter，配置如下：&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;
@Configuration
public class SecuritySecureConfig extends WebSecurityConfigurerAdapter {

    private final String adminContextPath;

    public SecuritySecureConfig(AdminServerProperties adminServerProperties) {
        this.adminContextPath = adminServerProperties.getContextPath();
    }

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        // @formatter:off
        SavedRequestAwareAuthenticationSuccessHandler successHandler = new SavedRequestAwareAuthenticationSuccessHandler();
        successHandler.setTargetUrlParameter( &quot;redirectTo&quot; );

        http.authorizeRequests()
                .antMatchers( adminContextPath + &quot;/assets/**&quot; ).permitAll()
                .antMatchers( adminContextPath + &quot;/login&quot; ).permitAll()
                .anyRequest().authenticated()
                .and()
                .formLogin().loginPage( adminContextPath + &quot;/login&quot; ).successHandler( successHandler ).and()
                .logout().logoutUrl( adminContextPath + &quot;/logout&quot; ).and()
                .httpBasic().and()
                .csrf().disable();
        // @formatter:on
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;重启启动工程，在浏览器上访问：http://localhost:8769/，会被重定向到登录界面，登录的用户名和密码为配置文件中配置的，分别为admin和admin，界面显示如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/2279594-74630ea069af6a18.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;32.png&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;集成邮箱报警功能&quot;&gt;集成邮箱报警功能&lt;/h3&gt;
&lt;p&gt;在spring boot admin中，也可以集成邮箱报警功能，比如服务不健康了、下线了，都可以给指定邮箱发送邮件。集成非常简单，只需要改造下admin-server即可：&lt;/p&gt;
&lt;p&gt;在admin-server工程Pom文件，加上mail的起步依赖，代码如下：&lt;/p&gt;
&lt;pre class=&quot;xml&quot;&gt;
&lt;code&gt;&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;spring-boot-starter-mail&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;在配置文件application.yml文件中，需要配置邮件相关的配置，如下：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;spring.mail.host: smtp.163.com
spring.mail.username: miles02
spring.mail.password:
spring.boot.admin.notify.mail.to: 124746406@qq.com
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;做完以上配置后，当我们已注册的客户端的状态从 UP 变为 OFFLINE 或其他状态，服务端就会自动将电子邮件发送到上面配置的地址。&lt;/p&gt;
&lt;h2 id=&quot;源码下载&quot;&gt;源码下载&lt;/h2&gt;
&lt;p&gt;快速开始： https://github.com/forezp/SpringCloudLearning/tree/master/sc-f-boot-admin&lt;/p&gt;
&lt;p&gt;和spring cloud结合：https://github.com/forezp/SpringCloudLearning/tree/master/sc-f-boot-admin-cloud&lt;/p&gt;
&lt;h2 id=&quot;参考资料&quot;&gt;参考资料&lt;/h2&gt;
&lt;p&gt;http://codecentric.github.io/spring-boot-admin/2.1.0/&lt;/p&gt;
&lt;p&gt;https://github.com/codecentric/spring-boot-admin&lt;/p&gt;
&lt;h3 id=&quot;更多阅读&quot;&gt;更多阅读&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/forezp/article/details/70148833&quot;&gt;史上最简单的 SpringCloud 教程汇总&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/forezp/article/details/70341818&quot;&gt;SpringBoot教程汇总&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/forezp/article/details/85163411&quot;&gt;Java面试题系列汇总&lt;/a&gt;&lt;br/&gt;&lt;/p&gt;
&lt;div readability=&quot;7.3469387755102&quot;&gt;&lt;p align=&quot;center&quot;&gt;&lt;br/&gt;&lt;img src=&quot;https://www.fangzhipeng.com/img/avatar.jpg&quot; width=&quot;258&quot; height=&quot;258&quot;/&gt;&lt;/p&gt;&lt;p&gt;扫一扫，支持下作者吧&lt;br/&gt;&lt;/p&gt;
&lt;p align=&quot;center&quot;&gt;&lt;br/&gt;&lt;strong&gt;（转载本站文章请注明作者和出处 &lt;a href=&quot;https://www.fangzhipeng.com/&quot;&gt;方志朋的博客&lt;/a&gt;）&lt;/strong&gt;&lt;br/&gt;&lt;/p&gt;
&lt;br/&gt;&lt;/div&gt;
</description>
<pubDate>Tue, 08 Jan 2019 15:15:00 +0000</pubDate>
<dc:creator>方志朋的专栏</dc:creator>
<og:description>转载请标明出处： https://www.fangzhipeng.com 本文出自</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/forezp/p/10242004.html</dc:identifier>
</item>
<item>
<title>ASP.NET Core 2.2 基础知识(十六) SignalR (未完待续) - 热敷哥</title>
<link>http://www.cnblogs.com/refuge/p/10237131.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/refuge/p/10237131.html</guid>
<description>&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1189148/201901/1189148-20190108093730920-1487945392.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;所以,我们先跟着官方文档,创建一个 SignalR 应用: &lt;a href=&quot;https://docs.microsoft.com/zh-cn/aspnet/core/tutorials/signalr?view=aspnetcore-2.2&amp;amp;tabs=visual-studio&quot; target=&quot;_blank&quot;&gt;https://docs.microsoft.com/zh-cn/aspnet/core/tutorials/signalr?view=aspnetcore-2.2&amp;amp;tabs=visual-studio&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这个例子一共涉及到下面几个步骤:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;自定义中心 ChatHub ;&lt;/li&gt;
&lt;li&gt;在启动类 Startup 中启用 SignalR 服务,并添加路由;&lt;/li&gt;
&lt;li&gt;编写客户端JS&lt;/li&gt;
&lt;li&gt;下载 SignalR 官方JS.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; ChatHub : &lt;span&gt;Hub&lt;/span&gt;
    {    &lt;/span&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;async&lt;/span&gt; Task &lt;span&gt;SendMessage&lt;/span&gt;(&lt;span&gt;string&lt;/span&gt; user, &lt;span&gt;string&lt;/span&gt;&lt;span&gt; message)
        {
            &lt;/span&gt;&lt;span&gt;await&lt;/span&gt; Clients.All.&lt;span&gt;SendAsync&lt;/span&gt;(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;ReceiveMessage&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, user, message);
        }
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&quot;Hub&quot; 一词,有的地方翻译成&quot;集线器&quot;,有的地方翻译成&quot;中心&quot;,对于我这种非科班出身的人来说,还是&quot;中心&quot;听起简单点.&lt;/p&gt;
&lt;p&gt;对于基类 Hub ,xml 是这样说的 : A base class for a SignalR hub.   SignalR 中心的基类.&lt;/p&gt;
&lt;p&gt;这个很简单,看这些名字就知道他们是干嘛用的,具体的描述可以看官方文档.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1189148/201901/1189148-20190108223125070-1466729852.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;中心的作用可以这样简单的描述:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;通过中心,我们能在&lt;span&gt;服务器&lt;/span&gt;的代码中定义&lt;span&gt;客户端&lt;/span&gt;可以调用的方法(必须是 public);&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;通过中心,我们能在&lt;span&gt;客户端&lt;/span&gt;的代码中定义&lt;span&gt;服务器&lt;/span&gt;可以调用的方法.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;上述代码,我们通过继承 Hub ,定义了一个自己的中心 : ChatHub (聊天中心) ,在这个类里面,我们做了下面两件事:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;定义了&lt;/span&gt;&lt;span&gt;客户端&lt;/span&gt;可以调用的方法 : SendMessage(string user, string message)&lt;/li&gt;
&lt;li&gt;调用了所有连接上 Hub 的&lt;span&gt;客户端&lt;/span&gt;的 ReceiveMessage 方法,并将 user,message 两个字符串作为入参传入该方法.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;中心定义好了,肯定需要启用&lt;/p&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; ConfigureServices(IServiceCollection services)
        {
            ......
    
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;注册 SignalR 服务&lt;/span&gt;
&lt;span&gt;            services.AddSignalR();
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; Configure(IApplicationBuilder app, IHostingEnvironment env)
        {
            ......

            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;设置 SignalR 中心路由&lt;/span&gt;
            app.UseSignalR(routes =&amp;gt; { routes.MapHub&amp;lt;&lt;span&gt;ChatHub&lt;/span&gt;&amp;gt;(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/chatHub&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;); });

            app.UseMvc();
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class=&quot;cnblogs_code&quot; readability=&quot;48&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;use strict&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;不太明白这句话是什么意思...

&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;创建一个连接到我们创建的 ChatHub 的 connection.&lt;/span&gt;
&lt;span&gt;var connection = new signalR.HubConnectionBuilder().withUrl(&quot;/chatHub&quot;).build();

&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;定义客户端的方法,方法名: ReceiveMessage ,两个入参.
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;注意,这个方法就是服务器要调用的方法,服务器和客户端的名字一定要一样.&lt;/span&gt;
&lt;span&gt;connection.on(&quot;ReceiveMessage&quot;&lt;/span&gt;&lt;span&gt;&lt;span&gt;, function (user, message)&lt;/span&gt; {
    &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; msg = message.replace(/&amp;amp;/g, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;&amp;amp;amp;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;).replace(/&amp;lt;/g, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;&amp;amp;lt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;).replace(/&amp;gt;/g, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;&amp;amp;gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
    &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; encodedMsg = user + &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; says &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; +&lt;span&gt; msg;
    &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; li = document.createElement(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
    li.textContent &lt;/span&gt;=&lt;span&gt; encodedMsg;
    document.getElementById(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;messagesList&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;).appendChild(li);
});

&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;开启连接.&lt;/span&gt;
&lt;span&gt;connection.start()&lt;/span&gt;.&lt;span&gt;catch&lt;/span&gt;&lt;span&gt;(function (err) {
    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; console.error(err.toString());
});

document.getElementById(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;sendButton&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;).addEventListener(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;click&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, function (&lt;span&gt;event&lt;/span&gt;&lt;span&gt;) {
    &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; user = document.getElementById(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;userInput&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;).value;
    &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; message = document.getElementById(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;messageInput&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;).value;

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;调用服务器的 SendMessage 方法,并传入两个入参.这和委托的调用太像了.&lt;/span&gt;
   &lt;span&gt; connection.invoke(&quot;SendMessage&quot;, user, message)&lt;/span&gt;.&lt;span&gt;catch&lt;/span&gt;&lt;span&gt;(function (err) {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; console.error(err.toString());
    });
    &lt;/span&gt;&lt;span&gt;event&lt;/span&gt;&lt;span&gt;.preventDefault();
});&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;上面的 ChatHub 类的 SendAsync 方法在调用客户端的方法时,方法名是直接写的 字符串 : &quot;ReceiveMessage&quot;&lt;/p&gt;
&lt;p&gt;官方不推荐这样写,因为不是强类型,可能出现运行时错误,因此建议使用强类型的中心&lt;/p&gt;
&lt;p&gt;(顺带附上了一些额外的功能):&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;51&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;//&lt;/span&gt;&lt;span&gt;建议使用下面的强类型方式
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;方法二&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;interface&lt;/span&gt;&lt;span&gt; IChatClient
    {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;就算是这种强类型方式,客户端定义的方法名也必须和这个方法名一样,包括签名.&lt;/span&gt;
        Task ReceiveMessage(&lt;span&gt;string&lt;/span&gt; user, &lt;span&gt;string&lt;/span&gt;&lt;span&gt; message);
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; StronglyTypedChatHub : &lt;span&gt;Hub&amp;lt;IChatClient&amp;gt;&lt;/span&gt;&lt;span&gt;
    {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;[HubMethodName(&quot;hello&quot;)] 可以改名,如果改了名,前端也要跟着改,别忘了.&lt;/span&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;async&lt;/span&gt; Task SendMessage(&lt;span&gt;string&lt;/span&gt; user, &lt;span&gt;string&lt;/span&gt;&lt;span&gt; message)
        {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;调用客户端定义的 ReceiveMessage 方法.
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;throw new HubException(&quot;哈哈,出错了!&quot;);&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;可以向客户端发送异常.只会向当前调用的客户端发送,并且只发送 message ,不会发送堆栈信息.&lt;/span&gt;
            &lt;span&gt;await&lt;/span&gt; Clients.All.ReceiveMessage($&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;{GetHashCode()}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; + user, message);&lt;span&gt;//&lt;/span&gt;&lt;span&gt;传递 hashCode 是为了证明,每次调用都是不同的实例.所以官方说不要在&quot;中心&quot;里面存状态.&lt;/span&gt;
&lt;span&gt;        }

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;该方法可以在客户端连接上后,执行操作&lt;/span&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;override&lt;/span&gt; &lt;span&gt;async&lt;/span&gt;&lt;span&gt; Task OnConnectedAsync()
        {
            &lt;/span&gt;&lt;span&gt;await&lt;/span&gt; Groups.AddToGroupAsync(Context.ConnectionId, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;SignalR Users&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
            &lt;/span&gt;&lt;span&gt;await&lt;/span&gt; &lt;span&gt;base&lt;/span&gt;&lt;span&gt;.OnConnectedAsync();
        }

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;同理,当客户端断开连接时执行的操作&lt;/span&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;override&lt;/span&gt; &lt;span&gt;async&lt;/span&gt;&lt;span&gt; Task OnDisconnectedAsync(Exception exception)
        {
            &lt;/span&gt;&lt;span&gt;await&lt;/span&gt; Groups.RemoveFromGroupAsync(Context.ConnectionId, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;SignalR Users&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
            &lt;/span&gt;&lt;span&gt;await&lt;/span&gt; &lt;span&gt;base&lt;/span&gt;&lt;span&gt;.OnDisconnectedAsync(exception);
        }
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;当然,注册路由的代码也得换了 :  app.UseSignalR(routes =&amp;gt; { routes.MapHub&amp;lt;&lt;span&gt;StronglyTypedChatHub&lt;/span&gt;&amp;gt;(&quot;/chatHub&quot;); });&lt;/p&gt;

&lt;p&gt;好困,明天继续&lt;/p&gt;
</description>
<pubDate>Tue, 08 Jan 2019 15:07:00 +0000</pubDate>
<dc:creator>热敷哥</dc:creator>
<og:description>我一直觉得学习的最好方法就是先让程序能够正常运行,才去学习他的原理,剖析他的细节. 就好像这个图: 所以,我们先跟着官方文档,创建一个 SignalR 应用: https://docs.mi</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/refuge/p/10237131.html</dc:identifier>
</item>
<item>
<title>AS5600磁编码器开发记录 - SC-Electronic</title>
<link>http://www.cnblogs.com/SC-Electronic/p/10241953.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/SC-Electronic/p/10241953.html</guid>
<description>&lt;p&gt;&lt;strong&gt;&lt;em&gt;-----------------本文由&lt;a href=&quot;https://item.taobao.com/item.htm?spm=a230r.1.14.1.758e67c3q9ahnl&amp;amp;id=584601996739&amp;amp;ns=1&amp;amp;abbucket=3#detail&quot;&gt;“智御电子”&lt;/a&gt;提供，同时提供范例教程，以便电子爱好者交流学习。----------------&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;前言&quot;&gt;前言：&lt;/h3&gt;
&lt;p&gt;最近由于工作需要接触到AS5600这颗磁角度传感器，以前就对相关的磁应用感到各种高大上（例如霍尔传感器，磁流体等）。既然接触到了，就开始搜索相关资料，发现有用的资料并不多，仅限官网上发布的一些。作为程序员看完datasheet，肯定是要搞一份代码拜读一下。在这里 吐槽一下这AMS官网的揍性：手册里写了官网有ardunio的例子，一顿好找好不容易才找到，接着注册账号想下载，竟然提示没有权限下载（一脸茫然，你个卖芯片的，配套软件环境挂网上不能下载是什么鬼）,功夫不负有心人，还是在好心网友的分享下找到了一些代码。特此将自己开发经过记录下来，与君共享！&lt;/p&gt;
&lt;h3 id=&quot;开发流程&quot;&gt;开发流程：&lt;/h3&gt;
&lt;p&gt;从手册了解到AS5600这颗芯片支持IIC通信，但是输出的信号的方式还有PWM，模拟电压等多种方式。本文直接上手IIC通信。&lt;/p&gt;
&lt;p&gt;接着直接就是设计原理图了，这部分手册都有推荐的电路，需要注意的是VDD5V和VDD3V3引脚的选择。因为本文采用的是STM32F0芯片的主控，供电电压是3V3，故选择3.3v Operation的如下电路。&lt;br/&gt;&lt;img src=&quot;https://i.imgur.com/CFPveq7.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;再就是设计模块PCB，&lt;a href=&quot;https://item.taobao.com/item.htm?spm=a230r.1.14.1.758e67c3q9ahnl&amp;amp;id=584601996739&amp;amp;ns=1&amp;amp;abbucket=3#detail&quot;&gt;模块电路PCB&lt;/a&gt;打样回来，如下图所示。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/YklKVed.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;本文把几个引脚都留出来，通过杜邦线跟控制板连接,连接线如下表所示。&lt;/p&gt;
&lt;table&gt;&lt;thead/&gt;&lt;tbody&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;VCC&lt;/td&gt;
&lt;td&gt;3.3V&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;GND&lt;/td&gt;
&lt;td&gt;GND&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;DIR&lt;/td&gt;
&lt;td&gt;GND&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;SCL&lt;/td&gt;
&lt;td&gt;PA9&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;SDA&lt;/td&gt;
&lt;td&gt;PA10&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;GPO&lt;/td&gt;
&lt;td&gt;3.3V&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;紧接着就是程序设计。出去对STM32硬件IIC的敬畏，我选择敬而远之，采用普通引脚软件模拟IIC的通信过程。软件模拟IIC的过程主要把握两方面：速率控制和时序控制。&lt;/p&gt;
&lt;p&gt;速率控制就是SCL的变化速率，只要控制再AS5600允许的范围内即可。AS5600支持Fast-mode Plus模式，SCL能达到1MHz。&lt;/p&gt;
&lt;p&gt;时序控制就是SCL和SDA变化的规则。有的芯片的IIC还是有点小异同的，所以我们需要对照手册的时序再进行模式时序。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/y6eXOHI.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;本文首先利用CubeMX直接生成STM32F0的Keil工程代码，将PA9(SCL)和PA10(SDA)设置普通的输出引脚。需要注意的是SCL一直由主机提供，故一直都是输出模式；但是SDA为数据线，当从机传数据至主机的时候，主机需要将SDA的模式改为输入模式。代码如下&lt;/p&gt;
&lt;pre class=&quot;c&quot;&gt;
&lt;code&gt;#define SDA1_IN()  IIC_SDA_GPIO_Port-&amp;gt;MODER &amp;amp;= ~(0x3&amp;lt;&amp;lt;(10*2))
#define SDA1_OUT() IIC_SDA_GPIO_Port-&amp;gt;MODER &amp;amp;= ~(0x3&amp;lt;&amp;lt;(10*2));IIC_SDA_GPIO_Port-&amp;gt;MODER |= (0x1&amp;lt;&amp;lt;(10*2))&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;然后就是将IIC的通信协议进行分解，拆解成：&lt;/p&gt;
&lt;pre class=&quot;c&quot;&gt;
&lt;code&gt;Sim_I2C1_START（）、Sim_I2C1_SendByte（）、Sim_I2C1_Wait_Ack（）、Sim_I2C1_STOP（）&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;最后整合成读和写两个函数，如下所示。&lt;/p&gt;
&lt;pre class=&quot;c&quot;&gt;
&lt;code&gt;/**

- @brief  模拟IIC的多字节读

- @param

- @note

- @retval void

- @author 智御电子
  */
  uint8_t Sim_I2C_Read8(uint8_t moni_dev_addr, uint8_t moni_reg_addr, uint8_t moni_i2c_len, uint8_t *moni_i2c_data_buf)
  {

  Sim_I2C1_START();
  Sim_I2C1_SendByte(moni_dev_addr &amp;lt;&amp;lt; 1 | I2C1_Direction_Transmitter);
  Sim_I2C1_Wait_Ack();
  Sim_I2C1_SendByte(moni_reg_addr);
  Sim_I2C1_Wait_Ack();
  //Sim_I2C1_STOP();

  Sim_I2C1_START();
  Sim_I2C1_SendByte(moni_dev_addr &amp;lt;&amp;lt; 1 | I2C1_Direction_Receiver);
  Sim_I2C1_Wait_Ack();
  while (moni_i2c_len)
  {
    if (moni_i2c_len==1) *moni_i2c_data_buf =Sim_I2C1_ReceiveByte();
    else *moni_i2c_data_buf =Sim_I2C1_ReceiveByte_WithACK();
    moni_i2c_data_buf++;
    moni_i2c_len--;
  }
  Sim_I2C1_STOP();
  return 0x00;
  }

/**

- @brief  模拟IIC的多字节写

- @param

- @note   当启用check功能的时候，只能是单字节写的情况，多字接写不可启用check功能

- @retval void

- @author 智御电子
  */
  int8_t Sim_I2C1_Write8(uint8_t moni_dev_addr, uint8_t moni_reg_addr, uint8_t moni_i2c_len, uint8_t *moni_i2c_data_buf)
  {
  uint8_t i;
  Sim_I2C1_START();
  Sim_I2C1_SendByte(moni_dev_addr &amp;lt;&amp;lt; 1 | I2C1_Direction_Transmitter);
  Sim_I2C1_Wait_Ack();
  Sim_I2C1_SendByte(moni_reg_addr);
  Sim_I2C1_Wait_Ack();

  //Sim_I2C1_START();
  for (i=0; i&amp;lt;moni_i2c_len; i++)
  {
    Sim_I2C1_SendByte(moni_i2c_data_buf[i]);
    Sim_I2C1_Wait_Ack();
  }
  Sim_I2C1_STOP();  
    return 0;
  }&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;下面就是开始对AS5600进行IIC的寄存器设置了。其实AS5600的设置相对来说比较简单。特别是对于360度旋转检测的应用，基本不需要设置，直接读取raw data寄存器就可以读出角度信息。但是如果对于小范围角度检测的应用场景，AS5600可以设置其实起始角度和终点角度（大于18度）来和实际的应用对应起来。这个时候就需要按照datasheet的设计步骤一步一步初始化相应的寄存器。本文需要360度检测，故不考虑这种情况。&lt;/p&gt;
&lt;p&gt;再main函数中直接利用iic读取角度寄存器的数值，然后转化成角度，最后通过串口打印出来。&lt;/p&gt;
&lt;pre class=&quot;c&quot;&gt;
&lt;code&gt;void Programe_Run(void)
{
    uint8_t dect= 0;
    dect = detectMagnet();
    printf(&quot;detectMagnet is %d\r\n&quot;,dect);
    rawdata = getRawAngle();
    printf(&quot;rawdata is %d\r\n&quot;,rawdata);
    degress = convertRawAngleToDegrees(rawdata);
    printf(&quot;degress is %f\r\n&quot;,degress);
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;将磁铁放置再芯片上面，旋转。角度信息相应产生变化，导致为止开发测试结束。&lt;/p&gt;
</description>
<pubDate>Tue, 08 Jan 2019 15:01:00 +0000</pubDate>
<dc:creator>SC-Electronic</dc:creator>
<og:description>AS5600使用简介——（程序员版） 本文由</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/SC-Electronic/p/10241953.html</dc:identifier>
</item>
<item>
<title>领域驱动设计，让程序员心中有码（六） - 溪源More</title>
<link>http://www.cnblogs.com/xiyuanMore/p/10241827.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/xiyuanMore/p/10241827.html</guid>
<description>&lt;h4 align=&quot;center&quot;&gt;领域驱动设计-聚合，一种极简的思维模式&lt;/h4&gt;
&lt;h4 align=&quot;center&quot;&gt;引言&lt;/h4&gt;
&lt;p align=&quot;left&quot;&gt;    &lt;span&gt;作为&lt;/span&gt;&lt;span&gt;IT&lt;/span&gt;&lt;span&gt;技术产业飞速发展的产物，软件工程学已经成为当今时代非常重要的一个学科。作为一名资深的软件开发从业者，我们需要学习的东西实际上已经远远超出了原本在大学教育阶段所接受的知识深度和广度，领域驱动设计更是如此。当然必须承认的是大学阶段开了很多扇窗，直到今天才深刻体会那些平时看起来毫不起眼的学科（如图论、概率论、高等代数），实际上对软件领域的影响已经远远超出了我们的想象，例如，如果想做&lt;/span&gt;&lt;span&gt;AI&lt;/span&gt;&lt;span&gt;，没有扎实的数学和图论基础，显然只能成为工具的使用者，而非技术专家。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;有许多读者提到，笔者的内容缺乏实际例子，在具体阅读时，很难形成带入感。主要是因为领域驱动设计思想本身体系庞大，细节非常多，这需要在日常学习之余多加思考，细细的品味知识中的奥妙，笔者也是按照同样的思路来指导自己的学习过程的。坦率而言，要把这些概念的名词都记住，显然很容易，但是要理解这些名词的具体含义以及实际应用场景，却需要更多的思考，这也同样是软件工程博大精深的奥妙所在。&lt;/span&gt;&lt;/p&gt;
&lt;h4 align=&quot;center&quot;&gt;领域生命周期的复杂性是如何影响设计的&lt;/h4&gt;
&lt;p align=&quot;left&quot;&gt;      我们都清楚领域驱动设计，作为应对复杂情形下的软件工程思路，实际上受到了传统软件思维的广泛影响，例如之前提到的实体和值对象、以及服务和包（模块）实际上在非领域驱动设计中同样普遍存在。但是聚合和聚合根的思想，应该属于领域驱动设计中独特的知识点，进一步加强这个知识点的认识，将有助于我们更好的进行聚合设计，从而更好的设计一个符合实际应用场景的应用系统。        &lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;      在上一篇文章中，我们了解到，领域驱动的五个基本部分（关联，实体，值对象，服务和模块），他们是构成软件体系的最基础元素。在一个简单的软件系统中，往往只需使用这些元素的简单组合即可完成单个模块功能的开发，而且显然速度非常迅速。但是我们也将同样面对一些对象，他们具有更长的生命周期，也许有相当一部分时间，是通过复杂的数据持久化处理机制、甚至是跨数据源、跨服务来完成，这意味着不是单纯的依靠一块内存空间来度过的。它们与其他对象有着复杂的依赖关系，在它们漫长的生命周期中，会根据不同场景的规则、经历许多次状态的变化。对于这些对象的操作，稍不留心，就会导致代码间的耦合度急剧提升，甚至成为软件系统中最难以维护的代码块，这实际上偏离了模型驱动设计的理想轨道，成为经验设计史上的一大典型问题。&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;       领域驱动设计认为，这种复杂过程的操作对模型驱动设计带来的影响主要包括以下两个方面：   &lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;        1、维护对象间，在整个生命周期中的完整性：对象依赖不同的数据源或存储机制或内存单元时，完整性将难以保障。&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;        2、陷入管理生命周期复杂性造成的困境中。同上，要维护这套具有复杂体系的模型结果，本身成为一个问题。&lt;/p&gt;
&lt;h4 align=&quot;center&quot;&gt;聚合，让设计简化&lt;/h4&gt;
&lt;p align=&quot;left&quot;&gt;       领域驱动设计思想针对这两种场景，设计了聚合(Aggregate)对象来解决这个问题，并使用工厂对象和仓储对象来对生命周期进行管理，由于时间和篇幅的关系，我这一篇先介绍聚合对象和聚合根，下一篇在介绍工厂对象和仓储对象。&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;        实际上我们很容易就设计出一个具有复杂关系的对象，例如，Person对象，实际上可能关联了地址和工作等不同的实体或者值对象，如果要对数据进行删除，可能倾向于直接删除Person对象，而保留其他对象；或者删除Person对象时，同时删除地址对象。但是这两种方式都并非非常合理的策略，在于方式一，会在数据库中形成冗余数据，不利于后期数据的维护管理；而后者则可能导致依赖于地址的其他Person出现异常。&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;        即使是再简单的场景，遇到并发访问时，也会存在问题。由于不同的用户对系统中的数据的访问是随机分布的，意味着有可能会造成多个用户同时修改相互依赖的对象，进而造成系统可用性的急剧下降。&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;        因此，在具有复杂关联的模型中，要想保证数据更改的一致性是很困难的。不仅互不关联的对象需要遵守一定的规则，而且紧密关联的对象间操作同样也存在规则。经常使用的一种方式可能是事务锁，但是设计谨慎的锁机制，固然可以解决这个问题，但是可能导致用户间的操作不可控，系统变得不可用。事实上数据库层面的行锁和表锁，也是为了解决这些问题提供的思路，但是这种方案实际上分散了人们对于模型的注意力，使得系统流程的设计过程本身就相当臃肿。这也是古老的系统用户体验不佳的一个主要原因。    &lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;        领域驱动设计认为，表面上看是对数据操作层面的技术问题，但是它的根源依然是由于模型的设计依然是基于实体关系模型的设计，而缺乏明确定义的边界。认为通过一个合理的模型的设计，可以是模型更加理解，并且使设计过程更易于沟通。当模型被修改时，它也将引导我们对实现进行修改。&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;        这种模式，就是聚合模式（Aggregate)。这种来源于制造业体系中的模型，简单但严格，但是可以提供新的思路。&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;        领域驱动设计中，认为实现这个聚合模型，应当包含以下要素：&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;        1、通过一个顶层抽象来封装模型中的引用。使用Aggregate对象，实现一组相关对象的集合，作为数据修改的单元。&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;        2、每个Aggreate对象具有一个根和边界。边界，用以定义Aggreate内部都有什么。而根是Aggregate对外暴露的特定实体。对Aggregate而言，外部对象只可以引用根，而边界内部的对象则可以相互引用。&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;        3、除根之外的所有实体，在Aggregate内部都有唯一标识，但外部对象只能看到根实体而无法看到其他实体。&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;        对Aggregate的操作，应该按照一定的规则，确保数据变化时，能够保持一致性。而任何跨越Aggregate的规则，则不要求每时每刻都保持最新状态，跨越通过事件处理、批处理或者其他更新机制，使依赖项在规定的时间内得到解决。但是在Aggregate内部，规则必须得到满足。&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;        这意味着，对于这个Aggregate的操作，必须应用更加具体的规则，包括但不限定于以下内容。&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;strong&gt;        1&lt;/strong&gt;&lt;strong&gt;、聚合根&lt;/strong&gt;&lt;strong&gt;Entity&lt;/strong&gt;&lt;strong&gt;，具有全局标识，代表整个&lt;/strong&gt;&lt;strong&gt;Aggregate&lt;/strong&gt;&lt;strong&gt;对外提供服务，并最终负责检查规则。&lt;/strong&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;strong&gt;        2&lt;/strong&gt;&lt;strong&gt;、边界内的对象具有本地标识，但仅限于&lt;/strong&gt;&lt;strong&gt;Aggregate&lt;/strong&gt;&lt;strong&gt;内部保持唯一性。&lt;/strong&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;strong&gt;        3&lt;/strong&gt;&lt;strong&gt;、&lt;/strong&gt;&lt;strong&gt;Aggregate&lt;/strong&gt;&lt;strong&gt;外部的对象不能引用除根&lt;/strong&gt;&lt;strong&gt;Entity&lt;/strong&gt;&lt;strong&gt;之外的其他内部对象。根可以将内部对象的引用传递给外部对象，但是外部对象只能使用，而不能保持引用更不能操作。这也意味着，根可以将值对象的副本传递给外部对象，因为它只是一个属性值，而不是一个完整的生命周期对象。&lt;/strong&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;strong&gt;        4&lt;/strong&gt;&lt;strong&gt;、只有&lt;/strong&gt;&lt;strong&gt;Aggregate&lt;/strong&gt;&lt;strong&gt;的对象才能通过数据库查询直接完成，而其他对象应该在创建后，通过根的对象遍历关联来发现。&lt;/strong&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;strong&gt;        5&lt;/strong&gt;&lt;strong&gt;、&lt;/strong&gt;&lt;strong&gt;Aggregate&lt;/strong&gt;&lt;strong&gt;内部对象，可以引用外部的&lt;/strong&gt;&lt;strong&gt;Aggregate&lt;/strong&gt;&lt;strong&gt;根对象的引用（不能反过来）&lt;/strong&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;strong&gt;        6&lt;/strong&gt;&lt;strong&gt;、删除操作，应该一次性删除&lt;/strong&gt;&lt;strong&gt;Aggregate&lt;/strong&gt;&lt;strong&gt;边界内的所有对象。&lt;/strong&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;strong&gt;        7&lt;/strong&gt;&lt;strong&gt;、对&lt;/strong&gt;&lt;strong&gt;Aggregate&lt;/strong&gt;&lt;strong&gt;内部任何对象的操作，必须保证上述规则都得到满足。&lt;/strong&gt;&lt;/p&gt;
&lt;h4 align=&quot;center&quot;&gt;总结&lt;/h4&gt;
&lt;p align=&quot;left&quot;&gt;&lt;strong&gt;　　Aggregate&lt;/strong&gt;&lt;strong&gt;对象实际上是通过划分一个界限清晰的范围，确保在&lt;/strong&gt;&lt;strong&gt;Aggregate&lt;/strong&gt;&lt;strong&gt;对象的生命周期内，对范围内对象每个阶段的操作都满足规定规则。&lt;/strong&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;　　对Aggregate对象的定义和分析是一件非常细致的工作，我们应该根据实际应用场景，将实体和值对象分别聚集到Aggregate中，定义好边界和根后，通过根Entity来控制对边界内部其他对象的访问。只允许外部对象引用根，并在一次操作中，临时引用内部成员。但不能通过根来修改内部对象，这种设计有利于Aggregate内部的对象满足规则，也能保证它本身能够作为一个整体满足规则。而对Aggregate对象上的操作，是通过下一篇提到的Factory和Repository来实现的，它们分别在不同的阶段，实现了对象转化的复杂性封装。&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;        &lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;     &lt;/p&gt;

</description>
<pubDate>Tue, 08 Jan 2019 14:33:00 +0000</pubDate>
<dc:creator>溪源More</dc:creator>
<og:description>领域驱动设计-聚合，一种极简的思维模式 引言 作为IT技术产业飞速发展的产物，软件工程学已经成为当今时代非常重要的一个学科。作为一名资深的软件开发从业者，我们需要学习的东西实际上已经远远超出了原本在大</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/xiyuanMore/p/10241827.html</dc:identifier>
</item>
<item>
<title>Spring Cloud Eureka 总结 - EalenXie</title>
<link>http://www.cnblogs.com/ealenxie/p/10240686.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/ealenxie/p/10240686.html</guid>
<description>&lt;h2 id=&quot;写在前面的话给自己&quot;&gt;写在前面的话(给自己)&lt;/h2&gt;
&lt;p&gt;为了巩固自身学习，从今天(2019.01.08),每天晚上开始总结SpringCloud的相关学习，用于自我勉励，自我积累与人生总结。&lt;/p&gt;
&lt;p&gt;总结2018年的我，心态较之从前浮躁，杂念多了，没有用心，更没能好好的反思自己；按照自己单身的情况，平时我本应该有更多的时间去学习，去提高，去真正的充实自己。&lt;/p&gt;
&lt;p&gt;学习本身就并非易事，无论是为了生活还是理想，还是一种生活状态，最重要的是要用心，要真正的去理解，更要沉得住气，静得下心。&lt;/p&gt;
&lt;p&gt;选择了IT这一行，应该有苦修的觉悟，任何技术只停留在简单会用的阶段(目前我深陷其中)，其实是远远不够的。就跟我最早学了spring-cloud-ribbon只知道一个&lt;strong&gt;@LoadBalanced&lt;/strong&gt;一样，感觉很空洞，遇到问题可能就会束手无策，因为自己根本没有真正的学会一件事，没有真正悟到它的原理，认清它的本质。&lt;/p&gt;
&lt;p&gt;2019年，我希望我能戒掉周末还有时间打游戏的生活状态，能充实自己，克服焦虑；&lt;/p&gt;
&lt;p&gt;2019年，我希望我能坚持，能勤奋；&lt;/p&gt;
&lt;p&gt;2019年，我希望我能多读书，能成长；&lt;/p&gt;
&lt;p&gt;2019年，我希望我能坦然面对生活中的任何压力，能有内驱动力，能找到女朋友，找到外驱动力。&lt;/p&gt;
&lt;p&gt;希望我每次看到这段给自己的话，都不要忘了初心。&lt;/p&gt;
&lt;p&gt;好了，闲言碎语，皆尽于此。&lt;/p&gt;
&lt;h2 id=&quot;在微服务架构中注册中心是核心的基础服务&quot;&gt;在微服务架构中，注册中心是核心的基础服务。&lt;/h2&gt;
&lt;p&gt;它主要记录各个微服务和微服务地址的映射关系，各个微服务都将自己注册到这个注册中心上面，当微服务之间需要互相调用时，就可以从注册中心上面去发现微服务和进行调用。&lt;/p&gt;
&lt;p&gt;Spring Cloud是一个开箱即用的微服务框架，秉承了微服务的真正理念而设计。&lt;/p&gt;
&lt;h2 id=&quot;spring-cloud中谁是服务的注册中心-eureka-server即服务的注册中心核心配置如下&quot;&gt;Spring Cloud中，谁是服务的注册中心 ? Eureka Server即服务的注册中心，核心配置如下&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;注 : 本文只讲Eureka，不关注Consul与Zookeeper等替代方案&lt;/span&gt;&lt;/p&gt;
&lt;h4 id=&quot;加入依赖pom.xml&quot;&gt;1. 加入依赖,pom.xml&lt;/h4&gt;
&lt;pre class=&quot;xml&quot;&gt;
&lt;code&gt;&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.springframework.cloud&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;spring-cloud-netflix-eureka-server&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;程序入口类添加enableeurekaserver启用eureka-server例如&quot;&gt;2. 程序入口类添加&lt;strong&gt;@EnableEurekaServer&lt;/strong&gt;，启用Eureka Server。例如:&lt;/h4&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;

/**
 * Created by EalenXie on 2018/12/28 14:13.
 */
@EnableEurekaServer
@SpringBootApplication
public class SpringCloudEurekaServerApplication {

    public static void main(String[] args) {
        SpringApplication.run(SpringCloudEurekaServerApplication.class, args);
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;单机版eureka-server配置application.yml&quot;&gt;3. 单机版Eureka Server,配置application.yml&lt;/h4&gt;
&lt;pre class=&quot;yml&quot;&gt;
&lt;code&gt;server:
  port: 8761
eureka:
  instance:
    hostname: localhost                                                         # 服务注册中心实例的主机名
    lease-renewal-interval-in-seconds: 30                                       # 客户端向Eureka发送心跳周期(s)
    lease-expiration-duration-in-seconds: 90                                    # Eureka Server接收实例的最后一次发出的心跳后,删除需要等待时间(s)
  server:
    enable-self-preservation: true                                              # Eureka自我保护模式
  client:
    register-with-eureka: false                                                 # 是否向服务注册中心注册自己
    fetch-registry: false                                                       # 是否检索发现服务
    service-url:
      defaultZone: http://${eureka.instance.hostname}:${server.port}/eureka/    # 指定服务注册中心的位置&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;eureka-server集群配置ha高可用实际上就是将自己作为服务向其他服务注册中心注册自已这样就可以形成一组互相注册的服务注册中心以实现服务清单的互相同步达到高可用的效果多个eureka-server的实例互相注册配置application.yml&quot;&gt;4. Eureka Server集群配置(HA,高可用),实际上就是将自己作为服务向其他服务注册中心注册自已，这样就可以形成一组互相注册的服务注册中心，以实现服务清单的互相同步，达到高可用的效果。多个Eureka Server的实例互相注册。配置application.yml&lt;/h4&gt;
&lt;p&gt;Eureka Server 实例1 配置&lt;/p&gt;
&lt;pre class=&quot;yml&quot;&gt;
&lt;code&gt;server:
  port: 8761
eureka:
  instance:
    hostname: localhost                                                         # 服务注册中心实例的主机名
  server:
    enable-self-preservation: true                                              # Eureka自我保护模式
  client:
    register-with-eureka: true                                                  # 是否注册到Eureka Server
    fetch-registry: true                                                        # 是否检索发现服务
    service-url:
      defaultZone: http://${eureka.instance.hostname}:8762/eureka/,http://${eureka.instance.hostname}:8763/eureka/  
      #指定多个服务注册中心的位置,并向服务注册中心注册自己&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Eureka Server 实例2 配置&lt;/p&gt;
&lt;pre class=&quot;yml&quot;&gt;
&lt;code&gt;server:
  port: 8762
eureka:
  instance:
    hostname: localhost                                                         # 服务注册中心实例的主机名
  server:
    enable-self-preservation: true                                              # Eureka自我保护模式
  client:
    register-with-eureka: true                                                  # 是否注册到Eureka Server
    fetch-registry: true                                                        # 是否检索发现服务
    service-url:
      defaultZone: http://${eureka.instance.hostname}:8761/eureka/,http://${eureka.instance.hostname}:8763/eureka/  
      #指定多个服务注册中心的位置,并向服务注册中心注册自己&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;...&lt;/p&gt;
&lt;h2 id=&quot;谁注册到eureka-server-eureka-client-即注册的服务基本配置如下&quot;&gt;谁注册到Eureka Server ? Eureka Client 即注册的服务，基本配置如下&lt;/h2&gt;
&lt;h4 id=&quot;加入依赖pom.xml-1&quot;&gt;1. 加入依赖,pom.xml&lt;/h4&gt;
&lt;pre class=&quot;xml&quot;&gt;
&lt;code&gt;   &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;org.springframework.cloud&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;spring-cloud-starter-netflix-eureka-client&amp;lt;/artifactId&amp;gt;
   &amp;lt;/dependency&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;主类上面加入enablediscoveryclient-开启该注解使该服务能够被注册中心发现例如&quot;&gt;2. 主类上面加入&lt;strong&gt;@EnableDiscoveryClient&lt;/strong&gt; ,开启该注解使该服务能够被注册中心发现,例如:&lt;/h4&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.cloud.client.discovery.EnableDiscoveryClient;

/**
 * Created by EalenXie on 2018/12/28 14:45.
 */
@SpringBootApplication
@EnableDiscoveryClient
public class SpringCloudEurekaClientApplication {
    public static void main(String[] args) {
        SpringApplication.run(SpringCloudEurekaClientApplication.class, args);
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;客户端的最基本的配置application.yml-例如&quot;&gt;3. 客户端的最基本的配置,application.yml ,例如:&lt;/h4&gt;
&lt;pre class=&quot;yml&quot;&gt;
&lt;code&gt;server:
  port: 8090
spring:
  application:
    name: spring-cloud-eureka-client-application 
eureka:
  client:
    service-url:
      defaultZone: http://localhost:8761/eureka/&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;启动eureka-server访问httplocalhost8761-可以进入到eureka-server的查看页面&quot;&gt;4. 启动Eureka Server,访问http://localhost:8761 可以进入到Eureka Server的查看页面 :&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/994599/201901/994599-20190108185636583-293216376.png&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;启动eureka-client即可在eureka-server上面看到注册上去的本服务或者访问-httplocalhost8761eurekaapps&quot;&gt;5. 启动Eureka Client,即可在Eureka Server上面看到注册上去的本服务,或者访问: http://localhost:8761/eureka/apps&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/994599/201901/994599-20190108185858678-2117733399.png&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;eureka-client可以通过lookupservice核心接口基本实现类discoveryclient从服务中心获取服务实例的查询方法&quot;&gt;6. Eureka Client可以通过LookupService核心接口(基本实现类DiscoveryClient)从服务中心获取服务实例的查询方法。&lt;/h4&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;package com.netflix.discovery.shared;

import java.util.List;

import com.netflix.appinfo.InstanceInfo;

public interface LookupService&amp;lt;T&amp;gt; {

    Application getApplication(String appName);

    Applications getApplications();

    List&amp;lt;InstanceInfo&amp;gt; getInstancesById(String id);

    InstanceInfo getNextServerFromEureka(String virtualHostname, boolean secure);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;关于eureka和其客户端相关说明&quot;&gt;关于Eureka和其客户端相关说明&lt;/h2&gt;
&lt;h4 id=&quot;关于eureka-server的自我保护模式&quot;&gt;1. 关于Eureka Server的自我保护模式:&lt;/h4&gt;
&lt;pre class=&quot;text&quot;&gt;
&lt;code&gt;    默认情况下,如果Eureka Server在一定时间内没有接收到某个微服务实例的心跳,Eureka Server将会注销该实例(默认90秒)。

    但是当网络分区故障发生时，会统计心跳失败的比例,阈值因子默认是0.85,如果阈值比最小值大则表明微服务与Eureka Server之间无法正常通信,这就可能变得非常危险了--因为微服务本身是健康的，此时本不应该注销这个微服务。
    
    Eureka Server通过'自我保护模式'来解决这个问题,当Eureka Server节点在短时间内丢失过多客户端时(可能发生了网络分区故障),那么这个节点就会进入自我保护模式。
    
    一旦进入该模式，Eureka Server就会保护服务注册表中的信息，不再删除服务注册表中的数据(也就是不会注销任何微服务)。当网络故障恢复后，该Eureka Server节点会自动退出自我保护模式。
    
    自我保护模式是一种对网络异常的安全保护措施。使用自我保护模式，而已让Eureka集群更加的健壮、稳定。&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;关于eureka-server-rest-api-接口&quot;&gt;2. 关于Eureka Server REST API 接口&lt;/h4&gt;
&lt;pre&gt;
&lt;code&gt;POST    /eureka/apps/{appId}                                            注册新的实例

DELETE  /eureka/apps/{appId}/{instanceId}                               注销应用实例

PUT     /eureka/apps/{appId}/{instanceId}                               应用实例发送心跳

GET     /eureka/apps                                                    查询所有的实例

GET     /eureka/apps/{appId}                                            查询指定appId的实例

GET     /eureka/apps/{appId}/{instanceId}                               查询指定appId和instanceId的实例

GET     /eureka/instances/{instanceId}                                  查询指定的instanceId的实例

PUT     /eureka/apps/{appId}/{instanceId}/status?value=OUT_OF_SERVICE   暂停应用实例

PUT     /eureka/apps/{appId}/{instanceId}/status?value=UP               恢复应用实例

PUT     /eureka/apps/{appId}/{instanceId}/metadata?key=value            更新元数据信息

GET     /eureka/vips/{vipAddress}                                       根据vip地址查询

GET     /eureka/svips/{svipAddress}                                     根据svip地址查询&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;eureka的核心类&quot;&gt;3. Eureka的核心类&lt;/h4&gt;
&lt;pre&gt;
&lt;code&gt;InstanceInfo :              注册的服务实例,里面包含服务实例的各项属性
LeaseInfo :                 Eureka用这个类来标识应用实例的租约信息
ServiceInstance :           发现的实例信息的抽象接口,约定了服务发现的实例应用有哪些通用信息
InstanceStatus :            用于标识服务实例的状态,是一个枚举类,主要有状态UP,DOWN,STARTING,OUT_OF_SERVICE,UNKNOWN
EurekaServerConfigBean :    Eureka Server的核心配置类，里面包含了Eureka Server的各项核心属性信息&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;eureka的核心动作核心接口为leasemanager基本实现类为instanceregistry&quot;&gt;4. Eureka的核心动作,核心接口为&lt;strong&gt;LeaseManager&lt;/strong&gt;,基本实现类为&lt;strong&gt;InstanceRegistry&lt;/strong&gt;&lt;/h4&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;package com.netflix.eureka.lease;

import com.netflix.eureka.registry.AbstractInstanceRegistry;

public interface LeaseManager&amp;lt;T&amp;gt; {

    void register(T r, int leaseDuration, boolean isReplication);

    boolean cancel(String appName, String id, boolean isReplication);

    boolean renew(String appName, String id, boolean isReplication);

    void evict();
}&lt;/code&gt;
&lt;/pre&gt;
&lt;pre class=&quot;text&quot;&gt;
&lt;code&gt;    服务注册(register) :  其他客户端将自己注册到Eureka上面
    服务下线(cancel) :    Eureka 删除服务信息
    服务租约(renew) :     客户端定时向Eureka发送心跳证明自己存活,Eureka接收到心跳为其维持租约
    服务剔除(evict) :     Eureka Server的方法,剔除心跳检测过期的服务实例&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;eureka的核心动作监听个人示例代码如下&quot;&gt;5. Eureka的核心动作监听,个人示例代码如下 :&lt;/h4&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;package name.ealen.listener;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.cloud.netflix.eureka.server.EurekaServerConfigBean;
import org.springframework.cloud.netflix.eureka.server.event.*;
import org.springframework.context.event.EventListener;
import org.springframework.stereotype.Component;

/**
 * Created by EalenXie on 2018/9/20 14:46.
 * EurekaServerEventListener 监听Eureka的事件行为
 * 注 : EurekaInstanceRegisteredEvent,EurekaInstanceCanceledEvent,EurekaInstanceRenewedEvent
 */
@Component
public class EurekaServerEventListener {
    private static final Logger log = LoggerFactory.getLogger(EurekaServerEventListener.class);

    /**
     * Eureka Server 注册事件
     */
    @EventListener
    public void eurekaRegister(EurekaRegistryAvailableEvent event) {
        //write your logic..........
        log.info(&quot;Eureka Server Register at timestamp : {}&quot;, event.getTimestamp());
    }
    /**
     * Eureka Server 启动事件
     */
    @EventListener
    public void serverStart(EurekaServerStartedEvent event) {
        //write your logic..........
        Object source = event.getSource();
        if (source instanceof EurekaServerConfigBean) {
            EurekaServerConfigBean eureka = (EurekaServerConfigBean) source;
            log.info(&quot;Eureka ServerConfigBean : {}&quot;,eureka);
        }
    }
    /**
     * 服务注册事件
     */
    @EventListener(condition = &quot;#event.replication==false&quot;)
    public void instanceRegister(EurekaInstanceRegisteredEvent event) {
        //write your logic..........
       log.info(&quot;Register InstanceInfo : {}&quot;,event.getInstanceInfo());
    }
    /**
     * 服务下线事件
     */
    @EventListener(condition = &quot;#event.replication==false&quot;)
    public void instanceCancel(EurekaInstanceCanceledEvent event) {
        //write your logic..........
        log.info(&quot;instanceCancel serviceId : {}&quot;,event.getServerId());
    }
    /**
     * 服务续约事件
     */
    @EventListener(condition = &quot;#event.replication==false&quot;)
    public void instanceRenewed(EurekaInstanceRenewedEvent event) {
        //write your logic..........
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;pre class=&quot;text&quot;&gt;
&lt;code&gt;    Eureka会为每个核心动作发布一个相关的事件，我们可以通过监听这些事件来做一些针对性的自定义处理逻辑。
    Eureka Server自身注册事件 :             EurekaRegistryAvailableEvent
    Eureka Server自身启动事件 :             EurekaServerStartedEvent
    服务注册事件(register) :                EurekaInstanceRegisteredEvent
    服务下线事件(cancel) :                  EurekaInstanceCanceledEvent
    服务租约事件(renew,续约,发送心跳) :      EurekaInstanceRenewedEvent&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;eureka的健康检查&quot;&gt;6. Eureka的健康检查&lt;/h4&gt;
&lt;p&gt;Spring Boot Actuator 提供了/health 端点&lt;/p&gt;
&lt;p&gt;只需要启用Eureka的健康检查,就可以将端点中的健康状态传递到Eureka Server&lt;/p&gt;
&lt;p&gt;eureka.client.healthcheck.enable: true&lt;/p&gt;
&lt;p&gt;&lt;span&gt;注意 : 这个只能在application.yml中配置,如果在bootstrap.yml中配置,可能会导致一些不良后果。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;这一点官方有明确说明 : &lt;a href=&quot;https://cloud.spring.io/spring-cloud-static/Edgware.SR5/single/spring-cloud.html#_eureka_s_health_checks&quot; class=&quot;uri&quot;&gt;https://cloud.spring.io/spring-cloud-static/Edgware.SR5/single/spring-cloud.html#_eureka_s_health_checks&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;eureka-server和client-参数调优与说明&quot;&gt;Eureka Server和Client 参数调优与说明&lt;/h2&gt;
&lt;h4 id=&quot;以下所有参数均为eureka的默认值可按需调整&quot;&gt;以下所有参数,均为Eureka的默认值,可按需调整。&lt;/h4&gt;
&lt;h4 id=&quot;client端参数说明篇幅问题部分&quot;&gt;Client端参数说明(篇幅问题,部分) :&lt;/h4&gt;
&lt;pre class=&quot;text&quot;&gt;
&lt;code&gt;
    eureka.client.register-with-eureka: true                     是否注册自己到Eureka Server上面
    eureka.client.fetch-registry: true                           是否从Eureka Server上面拉取服务信息
    eureka.client.enable: true                                   是否启用Eureka客户端,不启用则不注册到Eureka Server
    eureka.client.healthcheck.enable: true                       是否启用Eureka健康检查
    eureka.client.availability-zones: new HashMap&amp;lt;&amp;gt;()            告诉client有哪些可用的region和zone
    eureka.client.filter-only-up-instances: true                 是否过滤出InstanceStatus为UP的实例
    eureka.client.region: us-east-1                              指定该应用实例所在的region,AWS datacenters适用
    eureka.client.prefer-same-zone-eureka: true                  是否优先使用与该应用相同Zone的Eureka Server
    eureka.client.cache-refresh-executor-thread-pool-size: 2     缓存刷新线程池CacheRefreshThread的初始化线程数
    eureka.client.registry-fetch-interval-seconds: 30            Eureka client拉取服务注册信息间隔时间(s)
    eureka.client.instance-info-replication-interval-seconds: 30 复制实例变化信息到Eureka服务器所需要的时间间隔（s）
    eureka.client.eureka-service-url-poll-interval-seconds:  300 轮询Eureka服务端地址更改的间隔时间(s)
    eureka.client.eureka-server-read-timeout-seconds: 8          读取Eureka Server信息的超时时间(s)
    eureka.client.eureka-server-connect-timeout-seconds: 5       连接Eureka Server的超时时间(s)
    eureka.client.eureka-server-total-connections: 200           从Eureka客户端到所有Eureka服务端的连接总数
    eureka.client.eureka-server-total-connections-per-host: 50   从Eureka客户端到每个Eureka服务端主机的连接总数
    eureka.client.eureka-connection-idle-timeout-seconds: 30     Eureka服务端连接的空闲关闭时间(s)
    eureka.instance.metadata-map: new HashMap&amp;lt;&amp;gt;()                指定应用实例的元数据信息
    eureka.instance.prefer-ip-address: false                     是否优先使用ip地址来替代hostname作为实例hostname字段值 
    eureka.instance.lease-expiration-duration-in-seconds: 90     Eureka clent最后一次心跳后,Eureka Server剔除需要等待时间(s)
    eureka.instance.lease-renewal-interval-in-seconds: 30        客户端向Eureka Server发送心跳周期(s)&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;server端参数说明篇幅问题部分&quot;&gt;Server端参数说明(篇幅问题,部分) :&lt;/h4&gt;
&lt;pre class=&quot;text&quot;&gt;
&lt;code&gt;   eureka.server.enable-self-preservation: true                 Eureka Server是否开启自我保护模式
   eureka.server.renewal-percent-threshold: 0.85                指定每分钟需要收到的续约次数的阙值,如果阈值比最小值大,则自我保护模式开启
   eureka.server.eviction-interval-timer-in-ms: 60*1000         指定EvictionTask定时任务的调度频率,用于剔除过期的实例
   eureka.server.wait-time-in-ms-when-sync-empty: 1000*60*5     在Eureka服务器获取不到集群里对等服务器上的实例时，需要等待的时间&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;谁有权使用和操作eureka-server-如何保证它的安全性-http-basic认证&quot;&gt;谁有权使用和操作Eureka Server? 如何保证它的安全性? HTTP Basic认证&lt;/h2&gt;
&lt;h4 id=&quot;eureka-server只需要结合spring-boot-security就可以为eureka-server开启用户认证的能力加入pom.xml依赖&quot;&gt;1.Eureka Server只需要结合spring-boot-security,就可以为Eureka Server开启用户认证的能力。加入pom.xml依赖:&lt;/h4&gt;
&lt;pre class=&quot;xml&quot;&gt;
&lt;code&gt;&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;spring-boot-starter-security&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;修改application.yml的配置&quot;&gt;2.修改application.yml的配置:&lt;/h4&gt;
&lt;pre class=&quot;yml&quot;&gt;
&lt;code&gt;security:
  basic:
    enabled: true                                                               # 开启基于HTTP Basic的认证
  user:
    name: ealenxie                                                              # 登陆账号名
    password: zaxscdvfrewq                                                      # 登陆密码
server:
  port: 8761
eureka:
  instance:
    hostname: localhost                                                         # 服务注册中心实例的主机名
  client:
    register-with-eureka: false                                                 # 是否向服务注册中心注册自己
    fetch-registry: false                                                       # 是否检索发现服务
    service-url:
      defaultZone: http://${eureka.instance.hostname}:${server.port}/eureka/    # 指定服务注册中心的位置&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;另外由于spring-boot-starter-security默认开启csrf校验对于client端这类非界面应用来说并不合适可以配置将其disable掉&quot;&gt;3. 另外,由于spring-boot-starter-security默认开启csrf校验,对于Client端这类非界面应用来说并不合适,可以配置将其disable掉。&lt;/h4&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;

@EnableWebSecurity
public class EurekaServerSecurityConfig extends WebSecurityConfigurerAdapter {

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        super.configure(http);
        http.csrf().disable();
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;由于eureka-server开启了http-basic认证-eureka-client-也要配置相应的账号信息才能注册到eureka-server上面需要修改eureka-client的-application.yml&quot;&gt;4. 由于Eureka Server开启了HTTP Basic认证, Eureka Client 也要配置相应的账号信息才能注册到Eureka Server上面,需要修改Eureka Client的 application.yml&lt;/h4&gt;
&lt;pre class=&quot;yml&quot;&gt;
&lt;code&gt;security:
  basic:
    enabled: true                                                               # 开启基于HTTP Basic的认证
  user:
    name: ealenxie                                                              # 登陆账号名
    password: zaxscdvfrewq                                                      # 登陆密码
server:
  port: 8090
spring:
  application:
    name: spring-cloud-eureka-client-application 
eureka:
  client:
    service-url:
      defaultZone: http://${security.user}:${security.password}@localhost:8761/eureka/  #包含账号信息的Eureka Server地址&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;其实对于上面开启http-basic认证来说从安全角度考虑如果暴露在公网很容易被抓包然后破解所以建议启用https用安全证书与密钥的形式来保证安全&quot;&gt;5. 其实对于上面开启HTTP Basic认证来说,从安全角度考虑,如果暴露在公网很容易被抓包然后破解,所以建议启用https,用安全证书与密钥的形式来保证安全。&lt;/h4&gt;
&lt;p&gt;其实现方式可以参考博客(篇幅原因) : &lt;a href=&quot;https://www.v2ex.com/t/516287&quot; class=&quot;uri&quot;&gt;https://www.v2ex.com/t/516287&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;或者参考《重新定义Spring Cloud实战》一书 , 61页章节,启用https。&lt;/p&gt;
&lt;h2 id=&quot;eureka-admin-开源的微服务管控平台&quot;&gt;Eureka Admin 开源的微服务管控平台&lt;/h2&gt;
&lt;h4 id=&quot;因为在spring-cloud的技术栈中eureka-server是微服务架构中非常重要的基础组件&quot;&gt;因为在Spring Cloud的技术栈中,Eureka Server是微服务架构中非常重要的基础组件。&lt;/h4&gt;
&lt;h4 id=&quot;所以spring-cloud中国社区为eureka-注册中心开源了一个节点监控服务动态启停的管控平台-eureka-admin&quot;&gt;所以Spring Cloud中国社区为Eureka 注册中心开源了一个节点监控,服务动态启停的管控平台 : Eureka Admin&lt;/h4&gt;
&lt;h4 id=&quot;eureka-admin可以对注册的服务实例进行上线下线停止等操作自己就不必再调用eureka-server的rest-api了很方便感兴趣的道友可以尝试使用&quot;&gt;Eureka Admin可以对注册的服务实例进行上线，下线，停止等操作，自己就不必再调用Eureka Server的REST API了，很方便。感兴趣的道友可以尝试使用。&lt;/h4&gt;
&lt;p&gt;基本效果 :&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/994599/201901/994599-20190108223254261-1310952802.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/994599/201901/994599-20190108223326489-1674385813.jpg&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;eureka-admin的github地址-httpsgithub.comspringcloudeureka-admin&quot;&gt;Eureka Admin的github地址 : &lt;a href=&quot;https://github.com/SpringCloud/eureka-admin&quot; class=&quot;uri&quot;&gt;https://github.com/SpringCloud/eureka-admin&lt;/a&gt;&lt;/h4&gt;
&lt;h2 id=&quot;eureka-也可以跟spring-boot-admin相结合&quot;&gt;Eureka 也可以跟Spring Boot Admin相结合&lt;/h2&gt;
&lt;h4 id=&quot;只需要搭建一个spring-boot-admin然后将其作为eureka-client注册到eureka-server上面就可以实现完美的整合spring-boot-admin简单搭建流程如下pom.xml需要加入下面依赖&quot;&gt;1. 只需要搭建一个Spring Boot Admin，然后将其作为Eureka Client注册到Eureka Server上面，就可以实现完美的整合。Spring Boot Admin简单搭建流程如下，pom.xml需要加入下面依赖 :&lt;/h4&gt;
&lt;pre class=&quot;xml&quot;&gt;
&lt;code&gt;&amp;lt;dependency&amp;gt;
           &amp;lt;groupId&amp;gt;de.codecentric&amp;lt;/groupId&amp;gt;
           &amp;lt;artifactId&amp;gt;spring-boot-admin-server&amp;lt;/artifactId&amp;gt;
           &amp;lt;version&amp;gt;1.5.6&amp;lt;/version&amp;gt;
       &amp;lt;/dependency&amp;gt;
       &amp;lt;dependency&amp;gt;
           &amp;lt;groupId&amp;gt;de.codecentric&amp;lt;/groupId&amp;gt;
           &amp;lt;artifactId&amp;gt;spring-boot-admin-server-ui&amp;lt;/artifactId&amp;gt;
           &amp;lt;version&amp;gt;1.5.6&amp;lt;/version&amp;gt;
       &amp;lt;/dependency&amp;gt;
       &amp;lt;dependency&amp;gt;
           &amp;lt;groupId&amp;gt;org.springframework.cloud&amp;lt;/groupId&amp;gt;
           &amp;lt;artifactId&amp;gt;spring-cloud-starter-netflix-eureka-client&amp;lt;/artifactId&amp;gt;
       &amp;lt;/dependency&amp;gt;
       &amp;lt;!-- 在管理界面中与 JMX-beans 进行交互所需要被依赖的 JAR --&amp;gt;
       &amp;lt;dependency&amp;gt;
           &amp;lt;groupId&amp;gt;org.jolokia&amp;lt;/groupId&amp;gt;
           &amp;lt;artifactId&amp;gt;jolokia-core&amp;lt;/artifactId&amp;gt;
       &amp;lt;/dependency&amp;gt;
       &amp;lt;dependency&amp;gt;
           &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
           &amp;lt;artifactId&amp;gt;spring-boot-starter-aop&amp;lt;/artifactId&amp;gt;
 &amp;lt;/dependency&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;主类上面添加enableadminserver启用-spring-boot-admin和将其注册到eureka上面&quot;&gt;2. 主类上面添加@EnableAdminServer，启用 Spring Boot Admin，和将其注册到Eureka上面。&lt;/h4&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;package name.ealen;

import de.codecentric.boot.admin.config.EnableAdminServer;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.cloud.client.discovery.EnableDiscoveryClient;

/**
 * Created by EalenXie on 2018/11/6 9:23.
 */
@SpringBootApplication
@EnableDiscoveryClient
@EnableAdminServer
public class SpringBootAdminApplication {

    public static void main(String[] args) {
        SpringApplication.run(SpringBootAdminApplication.class,args);
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;简单配置application.yml指定eureka-server关闭掉安全端口暴露限制&quot;&gt;3. 简单配置application.yml，指定Eureka Server，关闭掉安全端口暴露限制。&lt;/h4&gt;
&lt;pre class=&quot;yml&quot;&gt;
&lt;code&gt;server:
  port: 8889
spring:
  application:
    name: spring-cloud-boot-admin
eureka:
  client:
    service-url:
      defaultZone: http://localhost:8761/eureka/

management:
  security:
    enabled: false&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;启动eureka-sever应用和spring-boot-admin应用然后访问localhost8889即可以看到admin的界面&quot;&gt;4. 启动Eureka Sever应用，和Spring Boot Admin应用，然后访问localhost:8889，即可以看到Admin的界面。&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/994599/201901/994599-20190108221829504-1110017271.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;点开 &lt;span&gt;Details按钮&lt;/span&gt;，可以看到Admin里面的各种详细配置信息，内存信息，接口调用次数，甚至是线程数量，都可以一目了然，十分方便。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/994599/201901/994599-20190108222244817-196084022.png&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;写在最后的话&quot;&gt;写在最后的话&lt;/h2&gt;
&lt;h4 id=&quot;本文参考内容&quot;&gt;本文参考内容 :&lt;/h4&gt;
&lt;p&gt;大量参考了《重新定义Spring Cloud实战》一书的内容 , 个人十分推崇。&lt;/p&gt;
&lt;p&gt;参考了周立老师的《Spring Cloud与Docker》一书。&lt;/p&gt;
&lt;p&gt;参考了翟永超大神的《Spring Cloud 微服务实战》一书。&lt;/p&gt;
&lt;h4 id=&quot;声明&quot;&gt;声明 :&lt;/h4&gt;
&lt;p&gt;本文是总结根据自身从各路大神所学习到的内容与理解。&lt;/p&gt;
&lt;p&gt;个人才疏学浅,如博文有不当之处,望各路大神见谅和帮忙指正。&lt;/p&gt;
&lt;p&gt;原创不易,十分感谢各位提出意见和支持。&lt;/p&gt;
</description>
<pubDate>Tue, 08 Jan 2019 14:27:00 +0000</pubDate>
<dc:creator>EalenXie</dc:creator>
<og:description>写在前面的话(给自己) 为了巩固自身学习，从今天(2019.01.08),每天晚上开始总结SpringCloud的相关学习，用于自我勉励，自我积累与人生总结。 总结2018年的我，心态较之从前浮躁，杂</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/ealenxie/p/10240686.html</dc:identifier>
</item>
<item>
<title>微信公众号01 开发环境搭建、natapp内网穿透工具、微信公众号接入 - 寻渝记</title>
<link>http://www.cnblogs.com/NeverCtrl-C/p/10241763.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/NeverCtrl-C/p/10241763.html</guid>
<description>[unable to retrieve full-text content]1 前提准备 JDK：1.8 MAVEN: 3.+ SpringBoot：2.+ IDEA: 2017旗舰版 内网穿透工具：natapp 官方文档：https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1445241432 2 创建Spring</description>
<pubDate>Tue, 08 Jan 2019 14:15:00 +0000</pubDate>
<dc:creator>寻渝记</dc:creator>
<og:description>写在前面的话(给自己) 为了巩固自身学习，从今天(2019.01.08),每天晚上开始总结SpringCloud的相关学习，用于自我勉励，自我积累与人生总结。 总结2018年的我，心态较之从前浮躁，杂</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/ealenxie/p/10240686.html</dc:identifier>
</item>
<item>
<title>Docker 镜像的制作和使用 - 青青草原抓羊小能手</title>
<link>http://www.cnblogs.com/jasongan/p/docker_image.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/jasongan/p/docker_image.html</guid>
<description>&lt;p&gt;镜像里的内容是按「层」来组织的，「层」可以复用，一个完整的镜像也可以看做是一个「层」。多个「层」叠加在一起就形成了一个新的镜像，这个镜像也可以作为别的镜像的基础「层」进行更加复杂的镜像构建。下图展示了一个镜像的内部结构。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://static.ganpengyu.com/2019-01-08-799055-20180309154723871-127136242.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;这个目标镜像使用 Debian 镜像作为基础镜像开始构建，也就是说 Debian 镜像是目标镜像的第一「层」；往上的两层分别使用了 &lt;code&gt;ADD&lt;/code&gt; 指令将 &lt;code&gt;emacs&lt;/code&gt; 和 &lt;code&gt;apache&lt;/code&gt; 添加到了目标镜像中，每一个 &lt;code&gt;ADD&lt;/code&gt; 指令都将产生新的一个「层」，最后这个目标镜像就是一个拥有三「层」的镜像。每新增一「层」时，将要生成的这一「层」镜像都会默认使用上一步构建出的「层」作为自己的基础镜像，上图中的箭头表示的就是这种引用关系。&lt;/p&gt;
&lt;p&gt;所以，「层」和「镜像」是等价的，当这一「层」之上没有其他「层」时，我们就可以将这一「层」及其下面的所有「层」合起来称作一个「镜像」。如果这一「层」只是在构建镜像过程中生成的一个「中间层」，即这一「层」不会被用来启动容器，那么就可以称作「层」。&lt;strong&gt;总的来说，能用来启动容器的就称作「镜像」，其他都称作「层」。&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;制作镜像的过程和在操作系统上安装软件的过程几乎是完全一样的，唯一的区别是制作镜像需要使用 Dockerfile 文件来编写要执行的操作。请注意，Dockerfile 里的所有指令，除了 &lt;code&gt;CMD&lt;/code&gt; 和 &lt;code&gt;ENTRYPOINT&lt;/code&gt;，都是给 Docker 引擎执行的，目的是制作出目标镜像，这些指令&lt;strong&gt;不是&lt;/strong&gt;启动容器的时候执行的。&lt;/p&gt;
&lt;p&gt;下面的例子将一步步演示从 0 开始制作一个在 CentOS7.2 操作系统上安装了 &lt;code&gt;openjdk&lt;/code&gt; 和 &lt;code&gt;nginx&lt;/code&gt; 并运行一个 Java 应用程序的镜像，这个过程同时也将体现镜像分层复用的思想。&lt;/p&gt;
&lt;h2 id=&quot;镜像分层复用思想&quot;&gt;镜像分层复用思想&lt;/h2&gt;
&lt;p&gt;Dockerfile 中的每个指令都会生成一个「层」，最终的目标镜像就是由多个「层」组成的。如果制作 B 镜像的 Dockerfile 中存在某个指令与制作 A 镜像的 Dockerfile 中的某个指令完全一致，那么制作 B 镜像时就会复用制作 A 镜像时生成的「中间层」，而不会再去创建一个新的「层」，这就是「镜像分层复用」思想。&lt;/p&gt;
&lt;h2 id=&quot;第一步制作一个支持中文的-centos-镜像&quot;&gt;第一步，制作一个支持中文的 CentOS 镜像&lt;/h2&gt;
&lt;p&gt;官方为我们提供了 Linux 各种发行版的镜像，我们日常的所有镜像构建都是基于这些镜像来完成的。由于官方的 CentOS 镜像并不支持中文字符集，所以我们需要先制作一个支持中文的镜像出来&lt;/p&gt;
&lt;h3 id=&quot;编写-dockerfile&quot;&gt;编写 Dockerfile&lt;/h3&gt;
&lt;pre class=&quot;dockerfile&quot;&gt;
&lt;code&gt;FROM centos:7.2.1511
RUN yum install -y telnet kde-l10n-Chinese net-tools vim inetutils-ping unzip \
  &amp;amp;&amp;amp; ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \
  &amp;amp;&amp;amp; localedef -c -f UTF-8 -i zh_CN zh_CN.utf8 \
  &amp;amp;&amp;amp; yum clean all
ENV LC_ALL &quot;zh_CN.UTF-8&quot;
CMD [&quot;/bin/bash&quot;]&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;FROM&lt;/code&gt; 指令表示我们从官方提供的 CentOS 镜像开始构建我们自己的镜像。&lt;code&gt;centos&lt;/code&gt; 是镜像的名称，&lt;code&gt;7.2.1511&lt;/code&gt; 是镜像的版本。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;RUN&lt;/code&gt; 指令表示在构建镜像时我们要执行的 shell 命令。之前的 &lt;code&gt;FROM&lt;/code&gt; 指令相当于给了我们一个干净的操作系统，我们在这个系统上要执行的各种操作，如安装软件、创建目录等就都要书写在这个 RUN 指令之后。理论上你可以对每一个要执行的 shell 命令都使用一个 RUN 指令，比如我们将上面的 RUN 指令改写为下面的样子：&lt;/p&gt;
&lt;pre class=&quot;dockerfile&quot;&gt;
&lt;code&gt;RUN yum install -y telnet kde-l10n-Chinese net-tools vim inetutils-ping unzip
RUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
RUN localedef -c -f UTF-8 -i zh_CN zh_CN.utf8
RUN yum clean all&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;这样编写出来的 Dockerfile 文件是没有任何问题的，镜像最终也能够制作成功，但是这并不切合镜像分层复用的思想，因为我们几乎不会用到上面单个 RUN 指令生成的「中间层」。这样编写指令只会增加磁盘空间的占用，也让 Dockerfile 变得非常臃肿。&lt;/p&gt;
&lt;p&gt;需要特别注意的是，如果 RUN 指令中有安装软件的操作，那就一定要在 RUN 指令的最后清除掉软件仓库的缓存，这样可以有效的瘦身镜像。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ENV&lt;/code&gt; 指令表示在构建镜像时要在操作系统中设置的环境变量。这个指令每次只能设置一个环境变量，如果需要设置多个环境变量，则需要编写多个 ENV 指令。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;CMD&lt;/code&gt; 指令表示的是&lt;strong&gt;容器启动&lt;/strong&gt;时要执行的操作，通常会设置为应用程序的启动脚本，这个指令一定是出现在 Dockerfile 的最后。被指定的操作一定是&lt;strong&gt;能够挂起一个进程&lt;/strong&gt;的操作，否则容器启动并执行完这个操作后就会退出。&lt;/p&gt;
&lt;h3 id=&quot;构建镜像&quot;&gt;构建镜像&lt;/h3&gt;
&lt;p&gt;构建镜像时需要告诉 Docker 引擎 Dockerfile 的位置、镜像的名称和构建位置三个信息，下面是一个简单的镜像构建命令：&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;docker build -t myorg/centos:7.2 .&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;由于我们没有使用 &lt;code&gt;-f&lt;/code&gt; 参数指定 Dockerfile 文件的位置，Docker 引擎将默认使用当前目录下的 Dockerfile 文件进行构建。镜像的名称为 &lt;code&gt;myorg/centos:7.2&lt;/code&gt;，其中 &lt;code&gt;myorg&lt;/code&gt; 是组织名，但不是必须的。如果你需要将镜像发布到公网去，或者尽可能的避免和别人制作的镜像发生冲突，通常还是建议加上组织名。最后的 &lt;code&gt;.&lt;/code&gt; 表示构建位置在当前目录。通常建议将 Dockerfile 和构建所需要的文件放在一个目录下，然后在这个目录下执行构建。由于在构建开始前 Docker 引擎会读取构建目录下的所有文件，为了提高构建速度，请不要将构建中不需要的文件放到构建目录下。下面是执行上述构建命令后的输出，其中 shell 命令的输出内容被裁减掉了：&lt;/p&gt;
&lt;pre class=&quot;txt&quot;&gt;
&lt;code&gt;Sending build context to Docker daemon  2.048kB
Step 1/4 : FROM centos:7.2.1511
 ---&amp;gt; 4cbf48630b46
Step 2/4 : RUN yum install -y telnet kde-l10n-Chinese net-tools vim inetutils-ping unzip   &amp;amp;&amp;amp; ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime   &amp;amp;&amp;amp; localedef -c -f UTF-8 -i zh_CN zh_CN.utf8   &amp;amp;&amp;amp; yum clean all
 ---&amp;gt; Running in 724ac4950fc9
// shell 命令执行的输出
 ---&amp;gt; 2703f1dd2526
Removing intermediate container 724ac4950fc9
Step 3/4 : ENV LC_ALL &quot;zh_CN.UTF-8&quot;
 ---&amp;gt; Running in 2f49ec282e95
 ---&amp;gt; f6919bceb45f
Removing intermediate container 2f49ec282e95
Step 4/4 : CMD /bin/bash
 ---&amp;gt; Running in aea69f51eefd
 ---&amp;gt; e8e1d37c61a1
Removing intermediate container aea69f51eefd
Successfully built e8e1d37c61a1
Successfully tagged myorg/centos:7.2&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Sending build context to Docker daemon 2.048kB&lt;/code&gt; 表示在构建开始前，Docker 引擎读取到了构建目录下共有 2.048k 的文件。这里也印证了前文提到的不要将构建无关的文件放到构建目录下，否则会影响构建速度的结论。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Step 1/4 : FROM centos:7.2.1511&lt;/code&gt; 表示构建镜像的第一步是使用 &lt;code&gt;centos:7.2.1511&lt;/code&gt; 镜像作为基础镜像，由于没有任何变更操作，所以下面输出的 &lt;code&gt;4cbf48630b46&lt;/code&gt; 就是原本这个 CentOS 镜像的 ID。如果在构建时本地没有 &lt;code&gt;centos:7.2.1511&lt;/code&gt; 这个镜像，那么这里还将输出 Docker 引擎从镜像仓库拉取这个镜像的信息。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Step 2/4 ...&lt;/code&gt; 表示构建镜像的第二步是执行这些 shell 命令。其下的 &lt;code&gt;Running in 724ac4950fc9&lt;/code&gt; 表示 Docker 引擎启动了一个 ID 为 &lt;code&gt;724ac4950fc9&lt;/code&gt; 的容器并在容器内部执行这些操作。接着 &lt;code&gt;---&amp;gt; 2703f1dd2526&lt;/code&gt; 表示这些 shell 命令执行完成后生成了 ID 为 &lt;code&gt;2703f1dd2526&lt;/code&gt; 的中间「层」。最后的 &lt;code&gt;Removing intermediate container 724ac4950fc9&lt;/code&gt; 表示当中间「层」生成完成后，删除了刚才使用的容器。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Step 3/4 ...&lt;/code&gt; 和 &lt;code&gt;Step 4/4 …&lt;/code&gt; 表示的意义和 &lt;code&gt;Step 2/4&lt;/code&gt; 类似，这里不再赘述。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Successfully built e8e1d37c61a1&lt;/code&gt; 表示最终构建出来的镜像 ID 是 &lt;code&gt;e8e1d37c61a1&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Successfully tagged myorg/centos:7.2&lt;/code&gt; 表示把镜像的名称设置为了构建命令中指定的 &lt;code&gt;myorg/centos:7.2&lt;/code&gt;。&lt;/p&gt;
&lt;h3 id=&quot;查看镜像&quot;&gt;查看镜像&lt;/h3&gt;
&lt;p&gt;构建完成的镜像会直接被 Docker 管理，而不会给我们生成一个文件。使用 &lt;code&gt;docker images&lt;/code&gt; 命令可以查看到当前已有的镜像，如下所示：&lt;/p&gt;
&lt;pre class=&quot;txt&quot;&gt;
&lt;code&gt;REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
myorg/centos        7.2                 e8e1d37c61a1        14 minutes ago      272MB
centos              7.2.1511            4cbf48630b46        3 months ago        195MB&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;可以看到第一个镜像就是刚才创建的镜像，大小是 272MB，比原本官方的镜像多了 77MB。在制作这个镜像的过程中还生成了 2 个中间「层」，我们可以使用 &lt;code&gt;docker images -a&lt;/code&gt; 命令看到它们。&lt;/p&gt;
&lt;pre class=&quot;txt&quot;&gt;
&lt;code&gt;REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
myorg/centos        7.2                 e8e1d37c61a1        18 minutes ago      272MB
&amp;lt;none&amp;gt;              &amp;lt;none&amp;gt;              f6919bceb45f        18 minutes ago      272MB
&amp;lt;none&amp;gt;              &amp;lt;none&amp;gt;              2703f1dd2526        18 minutes ago      272MB
centos              7.2.1511            4cbf48630b46        3 months ago        195MB&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;由于中间「层」没有名字，所以名称和 TAG 都显示为 &lt;code&gt;&amp;lt;none&amp;gt;&lt;/code&gt;。你可以尝试使用 &lt;code&gt;docker rmi f6919bceb45f&lt;/code&gt; 命令来删除一个中间「层」，你会得到一个如下的错误提示：&lt;/p&gt;
&lt;pre class=&quot;txt&quot;&gt;
&lt;code&gt;Error response from daemon: conflict: unable to delete f6919bceb45f (cannot be forced) - image has dependent child images&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;从上面构建镜像的输出可以看出，&lt;code&gt;f6919bceb45f&lt;/code&gt; 这一「层」，即 &lt;code&gt;Step 3/4&lt;/code&gt; 这一步生成的「层」被 &lt;code&gt;e8e1d37c61a1&lt;/code&gt; 所引用，所以这里不能够直接删除这个中间「层」。回想一下前文的那张镜像层次图中的引用箭头，这就是「层」与「层」直接的引用关系。&lt;/p&gt;
&lt;h3 id=&quot;使用镜像&quot;&gt;使用镜像&lt;/h3&gt;
&lt;p&gt;使用镜像就是利用制作好的镜像来启动容器，如下面的命令：&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;docker run --name mycontainer myorg/centos:7.2&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;docker run&lt;/code&gt; 是启动容器的命令，&lt;code&gt;--name&lt;/code&gt; 用于指定容器的名称，最后面是启动容器所使用的镜像名称。命令执行完成后使用 &lt;code&gt;docker ps&lt;/code&gt; 查看运行中的容器，这时你会发现并没有任何容器出现；再使用 &lt;code&gt;docker ps -a&lt;/code&gt; 查看所有容器将会有如下信息：&lt;/p&gt;
&lt;pre class=&quot;txt&quot;&gt;
&lt;code&gt;CONTAINER ID        IMAGE               COMMAND             CREATED                  STATUS                    PORTS               NAMES
b4cae07cb40c        myorg/centos:7.2    &quot;/bin/bash&quot;         Less than a second ago   Exited (0) 1 second ago                       mycontainer&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;可以看到刚才启动的 &lt;code&gt;mycontainer&lt;/code&gt; 容器的状态（STATUS）为 &lt;code&gt;Exited&lt;/code&gt;，这表示容器已经退出了，即没有在运行状态，那为什么容器启动后就会退出呢？前文已经提到过，Dockerfile 中 &lt;code&gt;CMD&lt;/code&gt; 指令和 &lt;code&gt;ENTRYPOINT&lt;/code&gt; 指令指定的是容器启动后的操作，这个操作必须要能够挂起一个进程，否则容器启动完成后就会退出。查看刚才编写的 Dockerfile 可以看到，&lt;code&gt;CMD&lt;/code&gt; 指令指定的命令是 &lt;code&gt;/bin/bash&lt;/code&gt;，这个命令并不会挂起进程。&lt;/p&gt;
&lt;p&gt;这个问题可以通过增加 &lt;code&gt;docker run&lt;/code&gt; 命令的参数来解决，如下面的命令：&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;docker run -d -i --name mycontainer2 myorg/centos:7.2&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;命令执行完成后再次执行 &lt;code&gt;docker ps&lt;/code&gt; 查看运行中的容器就能看到这个名为 &lt;code&gt;mycontainer2&lt;/code&gt; 的容器了。其中 &lt;code&gt;-d&lt;/code&gt; 参数表示让容器在后台运行，&lt;code&gt;-i&lt;/code&gt; 参数表示保持标准输入打开，这样容器就不会在启动完成后立即退出了。&lt;/p&gt;
&lt;h2 id=&quot;第二步制作一个带有-openjdk-和-nginx-的镜像&quot;&gt;第二步，制作一个带有 openjdk 和 nginx 的镜像&lt;/h2&gt;
&lt;p&gt;这一次的镜像构建使用我们第一步构建出的镜像作为基础镜像。&lt;/p&gt;
&lt;h3 id=&quot;编写-dockerfile-1&quot;&gt;编写 Dockerfile&lt;/h3&gt;
&lt;pre class=&quot;dockerfile&quot;&gt;
&lt;code&gt;FROM myorg/centos:7.2
RUN echo &quot;[nginx]&quot; &amp;gt;&amp;gt; /etc/yum.repos.d/nginx.repo \
  &amp;amp;&amp;amp; echo &quot;name=nginx repo&quot; &amp;gt;&amp;gt; /etc/yum.repos.d/nginx.repo \
  &amp;amp;&amp;amp; echo &quot;baseurl=http://nginx.org/packages/centos/7/\$basearch/&quot; &amp;gt;&amp;gt; /etc/yum.repos.d/nginx.repo \
  &amp;amp;&amp;amp; echo &quot;gpgcheck=0&quot; &amp;gt;&amp;gt; /etc/yum.repos.d/nginx.repo \
  &amp;amp;&amp;amp; echo &quot;enabled=1&quot; &amp;gt;&amp;gt; /etc/yum.repos.d/nginx.repo \
  &amp;amp;&amp;amp; yum makecache \
  &amp;amp;&amp;amp; rpm --rebuilddb \
  &amp;amp;&amp;amp; yum install -y java-1.8.0-openjdk-devel.x86_64 nginx \
  &amp;amp;&amp;amp; yum clean all
ENV JAVA_HOME /usr
CMD [&quot;/bin/bash&quot;]&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;这一份 Dockerfile 中的指令在上文中已经解释过了，这里不再赘述。注意 &lt;code&gt;RUN&lt;/code&gt; 指令后 shell 命令多行排版的方式是以 &lt;code&gt;\&lt;/code&gt; 结尾，以 &lt;code&gt;&amp;amp;&amp;amp;&lt;/code&gt; 开头。&lt;/p&gt;
&lt;h3 id=&quot;构建镜像-1&quot;&gt;构建镜像&lt;/h3&gt;
&lt;p&gt;这一次构建的镜像命名为 &lt;code&gt;myorg/base:centos7.2.x64-ngx-java8&lt;/code&gt;。在为镜像命名时，应当在名称和版本两个部分充分描述这个镜像，这样便于快速了解镜像的功能，构建命令如下：&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;docker build -t myorg/base:centos7.2.x64-ngx-java8 .&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;第三步制作可部署的应用系统镜像&quot;&gt;第三步，制作可部署的应用系统镜像&lt;/h2&gt;
&lt;p&gt;经过第二步的构建，我们已经拥有了一个带有 Java 运行环境和 Nginx 的镜像，这一步就是要将应用系统也放入镜像中，并通过指令让容器启动后就去执行应用系统启动操作。&lt;/p&gt;
&lt;h3 id=&quot;编写-dockerfile-2&quot;&gt;编写 Dockerfile&lt;/h3&gt;
&lt;pre class=&quot;dockerfile&quot;&gt;
&lt;code&gt;FROM myorg/base:centos7.2.x64-ngx-java8
COPY login-deploy-1.0 /home/admin/login/
COPY login-ui /home/admin/login-ui/
COPY nginx.conf /etc/nginx/nginx.conf
COPY entrypoint.sh /home/admin/entrypoint.sh

RUN chmod +x /home/admin/entrypoint.sh
EXPOSE 80
VOLUME [&quot;/home/admin/logs&quot;]
ENTRYPOINT [&quot;sh&quot;, &quot;/home/admin/entrypoint.sh&quot;]&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;COPY&lt;/code&gt; 指令用于将文件或目录拷贝到镜像中指定的位置。如果拷贝的是一个目录，指定镜像中的位置时通常建议在最后加上 &lt;code&gt;/&lt;/code&gt;，以避免将目录拷贝成文件的情况。与 &lt;code&gt;COPY&lt;/code&gt; 相似的指令是 &lt;code&gt;ADD&lt;/code&gt;，后者可以将一个压缩文件拷贝到镜像中并自动解压。由于 &lt;code&gt;ADD&lt;/code&gt; 的自动解压功能可能导致解压出来的文件的名称不可控，所以通常是推荐使用 &lt;code&gt;COPY&lt;/code&gt; 命令来完成拷贝工作，压缩文件在拷贝前手动解压即可。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;EXPOSE&lt;/code&gt; 指令用于指定使用这个镜像启动的容器可以通过哪个端口和外界进行通信。换言之，只有 EXPOSE 指令指定的端口才能够和宿主机上的端口做映射。比如这里 EXPOSE 了 80 端口，那么在启动容器的时候就可以将宿主机的 8888 端口映射到容器的 80 端口，这样外界访问宿主机的 8888 端口就相当于访问容器内部的 80 端口。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;VOLUME&lt;/code&gt; 指定用于指定容器数据的挂载点。容器在运行时会产生各种数据，由于容器和宿主机天然是隔离的，所以在宿主机上并不能看到容器内的数据，当容器被销毁时，这些数据也会随之销毁，无法找回。为了将容器内产生的数据存放到宿主机上，我们可以在制作镜像时指定某些目录为挂载点，然后将容器运行时产生的数据指定输出到这些目录中。当容器启动时，Docker 就会自动在宿主机上创建数据卷来映射挂载点，这样容器中产生的数据就会保存在宿主机上的这个数据卷内。数据卷有自己独立的生命周期，即使删掉了容器，数据卷也还会存在。&lt;/p&gt;
&lt;p&gt;Docker 会使用随机 ID 给数据卷命名，这非常不便于管理。在启动 Docker 容器时可以使用 &lt;code&gt;-v&lt;/code&gt; 参数来指定数据卷的名称，如 &lt;code&gt;-v myappdata:/home/admin/logs&lt;/code&gt;。这样当我们启动容器时，Docker 就会在宿主机上创建名为 &lt;code&gt;myappdata&lt;/code&gt; 的数据卷。查看数据卷使用命令 &lt;code&gt;docker volume ls&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ENTRYPOINT&lt;/code&gt; 指令的作用和前文介绍的 &lt;code&gt;CMD&lt;/code&gt; 指令的作用是基本一致的。区别在于前者指定的命令不会被覆盖，而后者指定的命令会被启动容器时附带的命令所覆盖。对于应用程序镜像来说，通常建议使用 ENTRYPOINT 指令。在这份 Dockerfile 中，ENTRYPOINT 指令表示在容器启动后执行 &lt;code&gt;/home/admin/entrypoint.sh&lt;/code&gt; 这份脚本。&lt;/p&gt;
&lt;h3 id=&quot;构建镜像-2&quot;&gt;构建镜像&lt;/h3&gt;
&lt;p&gt;这一次构建的镜像命名为 &lt;code&gt;myorg/login:20190108&lt;/code&gt;。&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;docker build -t myorg/login:20190108 .&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;使用镜像-1&quot;&gt;使用镜像&lt;/h3&gt;
&lt;p&gt;经过上面的三个步骤，一个可以使用的应用系统镜像就制作完成了，使用下面的命令来启动容器：&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;docker run -d --name loginService -p 8800:80 -p 9090:8080 -v myappdata:/home/admin/logs myorg/login:20190108&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;-d&lt;/code&gt; 参数表示让容器在后台运行。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;--name&lt;/code&gt; 参数指定容器的名称。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;-p&lt;/code&gt; 参数指定端口映射关系。命令中的关系为将宿主机 8800 端口映射到容器中的 80 端口，将宿主机 9090 端口映射到容器中的 8080 端口。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;-v&lt;/code&gt; 参数指定挂载点对应数据卷的名称。&lt;strong&gt;需要特别说明的是&lt;/strong&gt;，挂载点也可以指定一个宿主机目录去挂载，这样 Docker 将不会创建数据卷。比如使用宿主机的 &lt;code&gt;/data/appdata&lt;/code&gt; 目录去挂载，参数值修改为 &lt;code&gt;-v /data/appdata:/home/admin/logs&lt;/code&gt;。挂载前宿主机目录必须存在，Docker 不会自动创建，并且要保证具有读写权限。&lt;/p&gt;

&lt;p&gt;对于常用如 MySQL、Kafka、Redis 等中间件，官方已经为我们提供了经过测试的镜像，我们可以直接拿来使用。但是由于业务的具体需求等原因，我们通常需要对这些镜像进行修改。所谓修改镜像，其实就是基于这些官方镜像制作出新的镜像。在下面的这个例子中，我们将一步步把官方的 &lt;code&gt;mysql:5.7&lt;/code&gt; 镜像进行修改。&lt;/p&gt;
&lt;h2 id=&quot;第一步修改时区&quot;&gt;第一步，修改时区&lt;/h2&gt;
&lt;p&gt;很多官方镜像都使用的零时区，这显然不符合国情，所以 通常我们都需要把官方镜像的时区调整为东八区。调整时区需要安装 &lt;code&gt;tzdata&lt;/code&gt; 这个软件，所以我们需要事先确定官方镜像是基于哪种 Linux 发行版进行构建的，否则我们将不知道该使用什么软件安装命令。你可以登录 &lt;a href=&quot;https://hub.docker.com/&quot;&gt;Docker Hub&lt;/a&gt; 搜索对应的镜像，然后查看官方放置在 GitHub 上的 Dockerfile 文件来确定相关信息。&lt;/p&gt;
&lt;h3 id=&quot;编写-dockerfile-3&quot;&gt;编写 Dockerfile&lt;/h3&gt;
&lt;pre class=&quot;dockerfile&quot;&gt;
&lt;code&gt;FROM mysql:5.7
ENV TZ=Asia/Shanghai
COPY customer.cnf /etc/mysql/conf.d/
RUN apt-get update \
  &amp;amp;&amp;amp; apt-get install -y tzdata \
  &amp;amp;&amp;amp; ln -s -f /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \
  &amp;amp;&amp;amp; rm -rf /var/lib/apt/lists/* &lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;修改时区的同时我们通过增加自定义 MySQL 配置文件来调整 MySQL 字符集、时区、连接数等配置，内容如下：&lt;/p&gt;
&lt;pre class=&quot;txt&quot;&gt;
&lt;code&gt;[client]
default-character-set=utf8mb4
[mysql]
default-character-set=utf8mb4
[mysqld]
character-set-client-handshake=FALSE
character-set-server=utf8mb4
collation-server=utf8mb4_unicode_ci
max_connections=1000
default-time_zone='+8:00'&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;需要注意的是我们并没有使用 &lt;code&gt;CMD&lt;/code&gt; 指令或 &lt;code&gt;ENTRYPOINT&lt;/code&gt; 指令来指点容器启动后要执行的操作，因为在很多情况下，除非我们查阅官方镜像的 Dockerfile 文件，否则我们无法获知原本的启动操作是什么。所以只要我们变更的操作不影响启动流程，那么就可以不指定启动操作，让镜像默认使用基础镜像的启动操作。&lt;/p&gt;
&lt;h3 id=&quot;构建镜像-3&quot;&gt;构建镜像&lt;/h3&gt;
&lt;p&gt;这一步我们将镜像命名为 &lt;code&gt;myorg/mysql:5.7_bjtime_utf8mb4&lt;/code&gt;，执行构建命令：&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;docker build -t myorg/mysql:5.7_bjtime_utf8mb4 .&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;第二步自动建库&quot;&gt;第二步，自动建库&lt;/h2&gt;
&lt;p&gt;在系统部署情况下，我们系统 MySQL 容器启动后就能将所需要的数据库建立好，这样可以避免我们再手动去建库。&lt;/p&gt;
&lt;h3 id=&quot;编写-dockerfile-4&quot;&gt;编写 Dockerfile&lt;/h3&gt;
&lt;pre class=&quot;dockerfile&quot;&gt;
&lt;code&gt;FROM myorg/mysql:5.7_bjtime_utf8mb4

COPY db_login.sql /sqls/db_login.sql
COPY privileges.sql /sqls/privileges.sql
COPY entrypoint.sh /entrypoint.sh

RUN chmod +x /entrypoint.sh
ENV MYSQL_ALLOW_EMPTY_PASSWORD yes
ENTRYPOINT [&quot;sh&quot;, &quot;/entrypoint.sh&quot;]&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;本次构建基于上一步的镜像继续构建，&lt;code&gt;db_login.sql&lt;/code&gt; 是建库建表的 SQL 脚本，&lt;code&gt;privileges.sql&lt;/code&gt; 是添加数据库用户信息的脚本， &lt;code&gt;entrypoint.sh&lt;/code&gt; 是容器启动后要执行的脚本。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;privileges.sql&lt;/code&gt; 中主要是修改了 ROOT 用户的密码并允许远程登录，内容如下：&lt;/p&gt;
&lt;pre class=&quot;sql&quot;&gt;
&lt;code&gt;update mysql.user set authentication_string=password(&quot;123456&quot;) where user = &quot;root&quot;;
create user 'root'@'%' identified by '123456';
grant all privileges on *.* to 'root'@'%';
flush privileges;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;entrypoint.sh&lt;/code&gt; 脚本负责启动 MySQL Server 并执行 &lt;code&gt;db_login.sql&lt;/code&gt; 和 &lt;code&gt;privileges.sql&lt;/code&gt;，内容如下：&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;#! /bin/sh
service mysql start
sleep 3
mysql &amp;lt; /sqls/db_login.sql
mysql &amp;lt; /sqls/privileges.sql
tail -f /dev/null&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;最后的 &lt;code&gt;tail -f /dev/null&lt;/code&gt; 是为了让进城挂起，禁止容器退出。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ENV MYSQL_ALLOW_EMPTY_PASSWORD yes&lt;/code&gt; 表示允许容器启动时 MySQL ROOT 用户没有密码。官方默认要求启动时必须设置 ROOT 用户密码，否则容器无法启动。&lt;/p&gt;
&lt;h3 id=&quot;构建镜像-4&quot;&gt;构建镜像&lt;/h3&gt;
&lt;p&gt;至此，一个启动即建库并支持 utf8mb4 和东八区的 MySQL 镜像就修改完成了，这个镜像中关于 MySQL 安装和配置部分完全是复用的官方镜像，我们只做了定制化的修改。最后，我们将镜像命名为 &lt;code&gt;myorg/mysql:5.7_login_20190108&lt;/code&gt;。&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;docker build -t myorg/mysql:5.7_login_20190108 .&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;使用镜像-2&quot;&gt;使用镜像&lt;/h3&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;docker run -d --name login_db -p 3306:3306 -v /data/mysqldata:/var/lib/mysql myorg/mysql:5.7_login_20190108&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;当你需要制作一个镜像，尤其是中间件镜像时，最好的选择是先去 &lt;a href=&quot;https://hub.docker.com/&quot;&gt;Docker Hub&lt;/a&gt; 搜索是否已有相关的官方镜像。基于官方镜像或者别人发布的镜像来进行定制化比自己从头做一个镜像更方便更可靠。&lt;/p&gt;
&lt;p&gt;Docker Hub 是世界上最大的 Docker 镜像仓库，Docker 官方和世界各地的开发者都在这上面发布自己制作的镜像。在这里你可以找到各种镜像的使用说明，也能找到其 Dockerfile 来学习。比如我们上面使用官方的 MySQL 镜像来定制化，那么 ROOT 密码该怎么设置，数据挂载点在哪里，开放了哪些端口这些问题，你都能在镜像文档中找到答案。&lt;/p&gt;

&lt;p&gt;Docker 镜像的制作技术非常简单，难点在于你是否能够事先规划好镜像内容。当你编写 Dockerfile 时，你的脑海里应该具有镜像制作完成之后的一个全貌，这样你编写的 Dockerfile 才是可靠有效的。编写 Dockerfile 其实就像是给你一个干净的操作系统，让你去安装软件，设置目录，启动应用类似，明确了目的，流程就会很清晰。&lt;/p&gt;
</description>
<pubDate>Tue, 08 Jan 2019 13:54:00 +0000</pubDate>
<dc:creator>青青草原抓羊小能手</dc:creator>
<og:description>镜像 Layer（层） 镜像里的内容是按「层」来组织的，「层」可以复用，一个完整的镜像也可以看做是一个「层」。多个「层」叠加在一起就形成了一个新的镜像，这个镜像也可以作为别的镜像的基础「层」进行更加复</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/jasongan/p/docker_image.html</dc:identifier>
</item>
</channel>
</rss>