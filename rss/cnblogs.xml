<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>åšå®¢å›­_é¦–é¡µ</title>
<link></link>
<description>ä»£ç æ”¹å˜ä¸–ç•Œ</description>
<item>
<title>è‹±æ–‡ å•è¯ - kurrrr</title>
<link>http://www.cnblogs.com/kurrrr/p/13630272.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/kurrrr/p/13630272.html</guid>
<description>&lt;tr readability=&quot;4.8909395973154&quot;&gt;
&lt;td id=&quot;main&quot;&gt;
&lt;div id=&quot;post_detail&quot;&gt;
&lt;div class=&quot;post&quot;&gt;
&lt;div class=&quot;postTitle&quot;&gt;&lt;a id=&quot;cb_post_title_url&quot; class=&quot;postTitle2 vertical-middle&quot; href=&quot;https://www.cnblogs.com/kurrrr/p/13630272.html&quot;&gt;&lt;span&gt;è‹±æ–‡ å•è¯&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;
&lt;div class=&quot;postText&quot;&gt;
&lt;p&gt;è‹±æ–‡ å•è¯&lt;/p&gt;
&lt;div id=&quot;cnblogs_post_body&quot; class=&quot;blogpost-body&quot;&gt;
&lt;h2&gt;&lt;span&gt;è‹±æ–‡ å•è¯&lt;/span&gt;&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;orthogonal æ­£äº¤çš„&lt;/li&gt;
&lt;li&gt;momentum åŠ¨é‡Â  Â Â momenta åŠ¨é‡[å¤æ•°]&lt;/li&gt;
&lt;li&gt;argument è®ºç‚¹&lt;/li&gt;
&lt;li&gt;involve åŒ…å«ï¼Œæ¶‰åŠ&lt;/li&gt;
&lt;li&gt;adjust è°ƒæ•´ï¼Œé€‚åº”Â â†’ ä¸€èˆ¬ç”¨è¯ç»„ be adjusted to ...&lt;/li&gt;
&lt;li&gt;demonstrate è¯æ˜ï¼Œå±•ç¤º&lt;/li&gt;
&lt;li&gt;axis è½´(å•æ•°)Â  axes è½´(å¤æ•°)&lt;/li&gt;
&lt;li&gt;behaviour è¡Œä¸º æ˜¯å¯æ•°åè¯&lt;/li&gt;
&lt;li&gt;isotope åŒä½ç´ &lt;/li&gt;
&lt;li&gt;isotone åŒä¸­å­ç´ &lt;/li&gt;
&lt;/ul&gt;&lt;hr/&gt;
&lt;p&gt;&lt;strong&gt;ä¸€äº›ä¸“æœ‰åè¯&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;the potential energy surface åŠ¿èƒ½é¢ï¼Œæ³¨æ„ surface æ˜¯æ²¡æœ‰ s çš„&lt;/li&gt;
&lt;li&gt;Fermi surfaces è´¹ç±³é¢ï¼Œæ³¨æ„ F å¤§å†™ã€‚åé¢ä¸€èˆ¬æ¥ XXX shell æˆ–è€… XXX orbitals&lt;/li&gt;
&lt;li&gt;small energy differences å°çš„èƒ½çº§å·®ï¼Œdifferences æ˜¯å¤æ•°&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;



&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;



&lt;/td&gt;
&lt;/tr&gt;</description>
<pubDate>Fri, 11 Sep 2020 00:39:00 +0000</pubDate>
<dc:creator>kurrrr</dc:creator>
<og:description>è‹±æ–‡ å•è¯</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/kurrrr/p/13630272.html</dc:identifier>
</item>
<item>
<title>é¢ç»æ‰‹å†Œ Â· ç¬¬10ç¯‡ã€Šæ‰«ç›²java.util.Collectionså·¥å…·åŒ…ï¼Œå­¦ä¹ æ’åºã€äºŒåˆ†ã€æ´—ç‰Œã€æ—‹è½¬ç®—æ³•ã€‹ - å°å‚…å“¥</title>
<link>http://www.cnblogs.com/xiaofuge/p/13649630.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/xiaofuge/p/13649630.html</guid>
<description>&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20200910235321424.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;ä½œè€…ï¼šå°å‚…å“¥&lt;br/&gt;åšå®¢ï¼š&lt;a href=&quot;https://bugstack.cn&quot;&gt;https://bugstack.cn&lt;/a&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼ğŸ˜„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;ä¸€ã€å‰è¨€&quot;&gt;ä¸€ã€å‰è¨€&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;ç®—æ³•æ˜¯æ•°æ®ç»“æ„çš„çµé­‚ï¼&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å¥½çš„ç®—æ³•æ­é…ä¸Šåˆé€‚çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥è®©ä»£ç åŠŸèƒ½å¤§å¤§çš„æå‡æ•ˆç‡ã€‚å½“ç„¶ï¼Œç®—æ³•å­¦ä¹ ä¸åªæ˜¯åˆ·é¢˜ï¼Œè¿˜éœ€è¦è½åœ°ä¸åº”ç”¨ï¼Œå¦åˆ™åˆ°äº†å†™ä»£ç çš„æ—¶å€™ï¼Œè¿˜æ˜¯ä¼š&lt;code&gt;forå¾ªç¯&lt;/code&gt;+&lt;code&gt;ifelse&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å½“å¼€å‘ä¸€ä¸ªç¨å¾®å¤æ‚ç‚¹çš„ä¸šåŠ¡æµç¨‹æ—¶ï¼Œå¾€å¾€è¦ç”¨åˆ°ä¸ä¹‹å¥‘åˆçš„æ•°æ®ç»“æ„å’Œç®—æ³•é€»è¾‘ï¼Œåœ¨ä¸è®¾è®¡æ¨¡å¼ç»“åˆï¼Œè¿™æ ·æ—¢èƒ½è®©ä½ çš„å†™å‡ºå…·æœ‰é«˜æ€§èƒ½çš„ä»£ç ï¼Œä¹Ÿèƒ½è®©è¿™äº›ä»£ç å…·å¤‡è‰¯å¥½çš„æ‰©å±•æ€§ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä»¥å¾€çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬æŠŠJavaå¸¸ç”¨çš„æ•°æ®ç»“æ„åŸºæœ¬ä»‹ç»å®Œäº†ï¼Œéƒ½å·²æ”¶å½•åˆ°ï¼š&lt;a href=&quot;https://bugstack.cn/itstack/interview.html&quot;&gt;è·³è½¬ -&amp;gt; ã€Šé¢ç»æ‰‹å†Œã€‹&lt;/a&gt;ï¼Œç« èŠ‚å†…å®¹ä¸‹å›¾ï¼›&lt;br/&gt;&lt;img src=&quot;https://img-service.csdnimg.cn/img_convert/05c49f611785cac20ca6cfec7c890125.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é‚£ä¹ˆ&lt;/strong&gt;ï¼Œæœ‰äº†è¿™äº›æ•°æ®ç»“æ„çš„åŸºç¡€ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†å­¦ä¹ ä¸€ä¸‹Javaä¸­æä¾›çš„ç®—æ³•å·¥å…·ç±»ï¼Œ&lt;code&gt;Collections&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&quot;äºŒã€é¢è¯•é¢˜&quot;&gt;äºŒã€é¢è¯•é¢˜&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;è°¢é£æœº&lt;/code&gt;ï¼Œä»Šå¤©æ€ä¹ˆæ— ç²¾æ‰“é‡‡çš„å‘¢ï¼Œè¿˜æœ‰é»‘çœ¼åœˆï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç­”&lt;/strong&gt;ï¼šå¥½å¤šçŸ¥è¯†ç›²åŒºå‘€ï¼Œæœ€è¿‘ä¸€ç›´åœ¨åŠªåŠ›è¡¥çŸ­æ¿ï¼Œè¿˜æœ‰&lt;a href=&quot;https://bugstack.cn/itstack/interview.html&quot;&gt;é¢ç»æ‰‹å†Œ&lt;/a&gt;é‡Œçš„æ•°æ®ç»“æ„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é—®&lt;/strong&gt;ï¼šé‚£æ•°æ®ç»“æ„çœ‹çš„å·®ä¸å¤šäº†å§ï¼Œä½ æœ‰è€ƒè™‘ğŸ¤”è¿‡ï¼Œæ•°æ®ç»“æ„é‡Œæ¶‰åŠçš„æ’åºã€äºŒåˆ†æŸ¥æ‰¾å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç­”&lt;/strong&gt;ï¼šäºŒåˆ†æŸ¥æ‰¾ä¼šä¸€äº›ï¼Œå·´æ‹‰å·´æ‹‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é—®&lt;/strong&gt;ï¼šè¿˜ä¸é”™ï¼Œé‚£ä½ çŸ¥é“è¿™ä¸ªæ–¹æ³•åœ¨Javaä¸­æœ‰æä¾›å¯¹åº”çš„å·¥å…·ç±»å—ï¼Ÿæ˜¯å“ªä¸ªï¼&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç­”&lt;/strong&gt;ï¼šè¿™ï¼ï¼Ÿå¥½åƒæ²¡æ³¨æ„è¿‡ï¼Œæ²¡ç”¨è¿‡ï¼&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é—®&lt;/strong&gt;ï¼šå»å§ï¼Œå›å®¶åœ¨çœ‹çœ‹ä¹¦ï¼Œè¿™ä¸¤å¤©ä¹Ÿä¼‘æ¯ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;é£æœºæ‚„ç„¶çš„å‡ºé—¨äº†ï¼Œä½†è¿™æ¬¡é¢è¯•é¢˜æ•´ä½“å›ç­”çš„è¿˜æ˜¯ä¸é”™çš„ï¼Œé¢è¯•å®˜å†³å®šä¸‹æ¬¡å†ç»™ä»–ä¸€ä¸ªæœºä¼šã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä¸‰ã€collections-å·¥å…·ç±»&quot;&gt;ä¸‰ã€Collections å·¥å…·ç±»&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;java.util.Collections&lt;/code&gt;ï¼Œæ˜¯javaé›†åˆæ¡†æ¶çš„ä¸€ä¸ªå·¥å…·ç±»ï¼Œä¸»è¦ç”¨äº&lt;code&gt;Collection&lt;/code&gt;æä¾›çš„é€šç”¨ç®—æ³•ï¼›æ’åºã€äºŒåˆ†æŸ¥æ‰¾ã€æ´—ç‰Œç­‰ç®—æ³•æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä»æ•°æ®ç»“æ„åˆ°å…·ä½“å®ç°ï¼Œå†åˆ°ç®—æ³•ï¼Œæ•´ä½“çš„ç»“æ„å¦‚ä¸‹å›¾ï¼›&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-service.csdnimg.cn/img_convert/f238128d3ae304059d8013208151b08a.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;1-collectionssort-æ’åº&quot;&gt;1. Collections.sort æ’åº&lt;/h3&gt;
&lt;h4 id=&quot;11-åˆå§‹åŒ–é›†åˆ&quot;&gt;1.1 åˆå§‹åŒ–é›†åˆ&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;List&amp;lt;String&amp;gt; list = new ArrayList&amp;lt;String&amp;gt;();
list.add(&quot;7&quot;);
list.add(&quot;4&quot;);
list.add(&quot;8&quot;);
list.add(&quot;3&quot;);
list.add(&quot;9&quot;);
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;12-é»˜è®¤æ’åˆ—æ­£åº&quot;&gt;1.2 é»˜è®¤æ’åˆ—[æ­£åº]&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;Collections.sort(list);

// æµ‹è¯•ç»“æœï¼š[3, 4, 7, 8, 9]
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;13-comparatoræ’åº&quot;&gt;1.3 Comparatoræ’åº&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;Collections.sort(list, new Comparator&amp;lt;String&amp;gt;() {
    @Override
    public int compare(String o1, String o2) {
        return o2.compareTo(o1);
    }
});
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;æˆ‘ä»¬ä½¿ç”¨ &lt;code&gt;o2&lt;/code&gt; ä¸ &lt;code&gt;o1&lt;/code&gt; åšå¯¹æ¯”ï¼Œè¿™æ ·ä¼šå‡ºæ¥ä¸€ä¸ªå€’å™æ’åºã€‚&lt;/li&gt;
&lt;li&gt;åŒæ—¶ï¼Œ&lt;code&gt;Comparator&lt;/code&gt;è¿˜å¯ä»¥å¯¹å¯¹è±¡ç±»æŒ‰ç…§æŸä¸ªå­—æ®µè¿›è¡Œæ’åºã€‚&lt;/li&gt;
&lt;li&gt;æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;[9, 8, 7, 4, 3]
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;14-reverseorderå€’æ’&quot;&gt;1.4 reverseOrderå€’æ’&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;Collections.sort(list, Collections.&amp;lt;String&amp;gt;reverseOrder());

// æµ‹è¯•ç»“æœï¼š[9, 8, 7, 4, 3]
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;Collections.&amp;lt;String&amp;gt;reverseOrder()&lt;/code&gt;çš„æºç éƒ¨åˆ†å°±å’Œæˆ‘ä»¬ä¸Šé¢æŠŠä¸¤ä¸ªå¯¹æ¯”çš„ç±»è°ƒæ¢è¿‡æ¥ä¸€æ ·ã€‚&lt;code&gt;c2.compareTo(c1);&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h4 id=&quot;15-æºç ç®€è¿°&quot;&gt;1.5 æºç ç®€è¿°&lt;/h4&gt;
&lt;p&gt;å…³äºæ’åºæ–¹é¢çš„çŸ¥è¯†ç‚¹å¹¶ä¸å°‘ï¼Œè€Œä¸”æœ‰ç‚¹å¤æ‚ã€‚æœ¬æ–‡ä¸»è¦ä»‹ç» &lt;code&gt;Collections&lt;/code&gt; é›†åˆå·¥å…·ç±»ï¼Œåç»­å†æ·±å…¥æ¯ä¸€ä¸ªæ’åºç®—æ³•è¿›è¡Œè®²è§£ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Collections.sort&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é›†åˆæ’åºï¼Œæœ€ç»ˆä½¿ç”¨çš„æ–¹æ³•ï¼š&lt;em&gt;Arrays.sort((E[]) elementData, 0, size, c);&lt;/em&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public static &amp;lt;T&amp;gt; void sort(T[] a, int fromIndex, int toIndex,
                            Comparator&amp;lt;? super T&amp;gt; c) {
    if (c == null) {
        sort(a, fromIndex, toIndex);
    } else {
        rangeCheck(a.length, fromIndex, toIndex);
        if (LegacyMergeSort.userRequested)
            legacyMergeSort(a, fromIndex, toIndex, c);
        else
            TimSort.sort(a, fromIndex, toIndex, c, null, 0, 0);
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;è¿™ä¸€éƒ¨åˆ†æ’åºé€»è¾‘åŒ…æ‹¬äº†ï¼Œæ—§ç‰ˆçš„å½’å¹¶æ’åº &lt;code&gt;legacyMergeSort&lt;/code&gt; å’Œ &lt;code&gt;TimSort&lt;/code&gt; æ’åºã€‚&lt;/li&gt;
&lt;li&gt;ä½†å› ä¸ºå¼€å…³çš„ä½œç”¨ï¼Œ&lt;code&gt;LegacyMergeSort.userRequested = false&lt;/code&gt;ï¼ŒåŸºæœ¬éƒ½æ˜¯èµ°åˆ° &lt;code&gt;TimSort&lt;/code&gt; æ’åº ã€‚&lt;/li&gt;
&lt;li&gt;åŒæ—¶åœ¨æ’åºçš„è¿‡ç¨‹ä¸­è¿˜ä¼šå› ä¸ºå…ƒç´ çš„ä¸ªæ•°æ˜¯å¦å¤§äº&lt;code&gt;32&lt;/code&gt;ï¼Œè€Œé€‰æ‹©&lt;code&gt;åˆ†æ®µæ’åº&lt;/code&gt;å’Œ&lt;code&gt;äºŒåˆ†æ’å…¥æ’åº&lt;/code&gt;ã€‚&lt;em&gt;è¿™ä¸€éƒ¨åˆ†å†…å®¹æˆ‘ä»¬åç»­ä¸“é—¨åœ¨æ’åºå†…å®¹è®²è§£&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;2-collectionsbinarysearch-äºŒåˆ†æŸ¥æ‰¾&quot;&gt;2. Collections.binarySearch äºŒåˆ†æŸ¥æ‰¾&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://img-service.csdnimg.cn/img_convert/50ffcc41e5bba5664897f7a5218abf59.png&quot; alt=&quot;å°å‚…å“¥ &amp;amp; Collections.binarySearch&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;çœ‹åˆ°è¿™å¼ å›¾ç†Ÿæ‚‰å—ï¼Œè¿™å°±æ˜¯é›†åˆå…ƒç´ ä¸­é€šè¿‡äºŒåˆ†æŸ¥æ‰¾å®šä½æŒ‡å®šå…ƒç´ 5ã€‚&lt;/li&gt;
&lt;li&gt;äºŒåˆ†æŸ¥æ‰¾çš„å‰ææ˜¯é›†åˆæœ‰åºï¼Œå¦åˆ™ä¸èƒ½æ»¡è¶³äºŒåˆ†ç®—æ³•çš„æŸ¥æ‰¾è¿‡ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;æŸ¥æ‰¾é›†åˆå…ƒç´ 5ï¼Œåœ¨è¿™ä¸ªé›†åˆä¸­åˆ†äº†ä¸‰éƒ¨ï¼›
&lt;ul&gt;&lt;li&gt;ç¬¬ä¸€æ­¥ï¼Œ&lt;code&gt;(0 + 7) &amp;gt;&amp;gt;&amp;gt; 1 = 3&lt;/code&gt;ï¼Œå®šä½ &lt;code&gt;list.get(3) = 4&lt;/code&gt;ï¼Œåˆ™ç»§ç»­å‘å³ä¾§äºŒåˆ†æŸ¥æ‰¾ã€‚&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒæ­¥ï¼Œ&lt;code&gt;(4 + 7) &amp;gt;&amp;gt;&amp;gt; 1 = 5&lt;/code&gt;ï¼Œå®šä½ &lt;code&gt;list.get(5) = 6&lt;/code&gt;ï¼Œåˆ™ç»§ç»­å‘å·¦ä¾§äºŒåˆ†æŸ¥æ‰¾ã€‚&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸‰æ­¥ï¼Œ&lt;code&gt;(4 + 4) &amp;gt;&amp;gt;&amp;gt; 1 = 4&lt;/code&gt;ï¼Œå®šä½ &lt;code&gt;list.get(4) = 5&lt;/code&gt;ï¼Œæ‰¾åˆ°å…ƒç´ ï¼Œè¿”å›ç»“æœã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h4 id=&quot;21-åŠŸèƒ½ä½¿ç”¨&quot;&gt;2.1 åŠŸèƒ½ä½¿ç”¨&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Test
public void test_binarySearch() {
    List&amp;lt;String&amp;gt; list = new ArrayList&amp;lt;String&amp;gt;();
    list.add(&quot;1&quot;);
    list.add(&quot;2&quot;);
    list.add(&quot;3&quot;);
    list.add(&quot;4&quot;);
    list.add(&quot;5&quot;);
    list.add(&quot;6&quot;);
    list.add(&quot;7&quot;);
    list.add(&quot;8&quot;);
    
    int idx = Collections.binarySearch(list, &quot;5&quot;);
    System.out.println(&quot;äºŒåˆ†æŸ¥æ‰¾ï¼š&quot; + idx);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;æ­¤åŠŸèƒ½å°±æ˜¯ä¸Šå›¾ä¸­çš„å…·ä½“å®ç°æ•ˆæœï¼Œé€šè¿‡ &lt;code&gt;Collections.binarySearch&lt;/code&gt; å®šä½å…ƒç´ ã€‚&lt;/li&gt;
&lt;li&gt;æµ‹è¯•ç»“æœï¼š&lt;code&gt;äºŒåˆ†æŸ¥æ‰¾ï¼š4&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h4 id=&quot;22-æºç åˆ†æ&quot;&gt;2.2 æºç åˆ†æ&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;Collections.binarySearch

public static &amp;lt;T&amp;gt; int binarySearch(List&amp;lt;? extends Comparable&amp;lt;? super T&amp;gt;&amp;gt; list, T key) {
    if (list instanceof RandomAccess || list.size()&amp;lt;BINARYSEARCH_THRESHOLD)
        return Collections.indexedBinarySearch(list, key);
    else
        return Collections.iteratorBinarySearch(list, key);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™æ®µäºŒåˆ†æŸ¥æ‰¾çš„ä»£ç è¿˜æ˜¯è›®æœ‰æ„æ€çš„ï¼Œ&lt;code&gt;list instanceof RandomAccess&lt;/code&gt; è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸º ArrayList æœ‰å®ç° RandomAccessï¼Œä½†æ˜¯ LinkedList å¹¶æ²¡æœ‰å®ç°è¿™ä¸ªæ¥å£ã€‚åŒæ—¶è¿˜æœ‰å…ƒç´ æ•°é‡é˜ˆå€¼çš„æ ¡éªŒ &lt;code&gt;BINARYSEARCH_THRESHOLD = 5000&lt;/code&gt;ï¼Œå°äºè¿™ä¸ªèŒƒå›´çš„éƒ½é‡‡ç”¨ &lt;code&gt;indexedBinarySearch&lt;/code&gt; è¿›è¡ŒæŸ¥æ‰¾ã€‚é‚£ä¹ˆè¿™é‡Œå…¶å®ä½¿ç”¨ LinkedList å­˜å‚¨æ•°æ®ï¼Œåœ¨å…ƒç´ å®šä½çš„æ—¶å€™ï¼Œéœ€è¦getå¾ªç¯è·å–å…ƒç´ ï¼Œå°±ä¼šæ¯” ArrayList æ›´è€—æ—¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Collections.indexedBinarySearch(list, key)&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt; private static &amp;lt;T&amp;gt; int indexedBinarySearch(List&amp;lt;? extends Comparable&amp;lt;? super T&amp;gt;&amp;gt; list, T key) {
     int low = 0;
     int high = list.size()-1;
     while (low &amp;lt;= high) {
         int mid = (low + high) &amp;gt;&amp;gt;&amp;gt; 1;
         Comparable&amp;lt;? super T&amp;gt; midVal = list.get(mid);
         int cmp = midVal.compareTo(key);
         if (cmp &amp;lt; 0)
             low = mid + 1;
         else if (cmp &amp;gt; 0)
             high = mid - 1;
         else
             return mid; // key found
     }
     return -(low + 1);  // key not found
 }
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä»¥ä¸Šè¿™æ®µä»£ç å°±æ˜¯é€šè¿‡æ¯æ¬¡æŠ˜åŠäºŒåˆ†å®šä½å…ƒç´ ï¼Œè€Œä¸Šé¢æ‰€è¯´çš„è€—æ—¶ç‚¹å°±æ˜¯&lt;code&gt;list.get(mid)&lt;/code&gt;ï¼Œè¿™åœ¨æˆ‘ä»¬åˆ†ææ•°æ®ç»“æ„æ—¶å·²ç»è®²è¿‡ã€‚&lt;a href=&quot;https://bugstack.cn/interview/2020/08/30/%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C-%E7%AC%AC8%E7%AF%87-LinkedList%E6%8F%92%E5%85%A5%E9%80%9F%E5%BA%A6%E6%AF%94ArrayList%E5%BF%AB-%E4%BD%A0%E7%A1%AE%E5%AE%9A%E5%90%97.html&quot;&gt;ã€ŠLinkedListæ’å…¥é€Ÿåº¦æ¯”ArrayListå¿«ï¼Ÿä½ ç¡®å®šå—ï¼Ÿã€‹&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Collections.iteratorBinarySearch(list, key)&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;private static &amp;lt;T&amp;gt; int iteratorBinarySearch(List&amp;lt;? extends Comparable&amp;lt;? super T&amp;gt;&amp;gt; list, T key)
{
    int low = 0;
    int high = list.size()-1;
    ListIterator&amp;lt;? extends Comparable&amp;lt;? super T&amp;gt;&amp;gt; i = list.listIterator();
    while (low &amp;lt;= high) {
        int mid = (low + high) &amp;gt;&amp;gt;&amp;gt; 1;
        Comparable&amp;lt;? super T&amp;gt; midVal = get(i, mid);
        int cmp = midVal.compareTo(key);
        if (cmp &amp;lt; 0)
            low = mid + 1;
        else if (cmp &amp;gt; 0)
            high = mid - 1;
        else
            return mid; // key found
    }
    return -(low + 1);  // key not found
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸Šé¢è¿™æ®µä»£ç æ˜¯å…ƒç´ æ•°é‡å¤§äº5000ä¸ªï¼ŒåŒæ—¶æ˜¯ LinkedList æ—¶ä¼šä½¿ç”¨è¿­ä»£å™¨ &lt;code&gt;list.listIterator&lt;/code&gt; çš„æ–¹å¼è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾æ“ä½œã€‚ä¹Ÿç®—æ˜¯ä¸€ä¸ªä¼˜åŒ–ï¼Œä½†æ˜¯å¯¹äºé“¾è¡¨çš„æ•°æ®ç»“æ„ï¼Œä»ç„¶æ²¡æœ‰æ•°ç»„æ•°æ®ç»“æ„ï¼ŒäºŒåˆ†å¤„ç†çš„é€Ÿåº¦å¿«ï¼Œä¸»è¦åœ¨è·å–å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦ä¸ŠO(1) å’Œ O(n)ã€‚&lt;/p&gt;
&lt;h3 id=&quot;3-collectionsshuffle-æ´—ç‰Œç®—æ³•&quot;&gt;3. Collections.shuffle æ´—ç‰Œç®—æ³•&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;æ´—ç‰Œç®—æ³•&lt;/strong&gt;ï¼Œå…¶å®å°±æ˜¯å°† List é›†åˆä¸­çš„å…ƒç´ è¿›è¡Œæ‰“ä¹±ï¼Œä¸€èˆ¬å¯ä»¥ç”¨åœ¨æŠ½å¥–ã€æ‘‡å·ã€æ´—ç‰Œç­‰å„ä¸ªåœºæ™¯ä¸­ã€‚&lt;/p&gt;
&lt;h4 id=&quot;31-åŠŸèƒ½ä½¿ç”¨&quot;&gt;3.1 åŠŸèƒ½ä½¿ç”¨&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;Collections.shuffle(list);

Collections.shuffle(list, new Random(100));
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å®ƒçš„ä½¿ç”¨æ–¹å¼éå¸¸ç®€å•ï¼Œä¸»è¦æœ‰è¿™ä¹ˆä¸¤ç§æ–¹å¼ï¼Œä¸€ç§ç›´æ¥ä¼ å…¥é›†åˆã€å¦å¤–ä¸€ç§è¿˜å¯ä»¥ä¼ å…¥å›ºå®šçš„éšæœºç§å­&lt;em&gt;è¿™ç§æ–¹å¼å¯ä»¥æ§åˆ¶æ´—ç‰ŒèŒƒå›´èŒƒå›´&lt;/em&gt;&lt;/p&gt;
&lt;h4 id=&quot;32-æºç åˆ†æ&quot;&gt;3.2 æºç åˆ†æ&lt;/h4&gt;
&lt;p&gt;æŒ‰ç…§æ´—ç‰Œçš„é€»è¾‘ï¼Œæˆ‘ä»¬æ¥å®ç°ä¸‹å…·ä½“çš„æ ¸å¿ƒé€»è¾‘ä»£ç ï¼Œå¦‚ä¸‹ï¼›&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Test
public void test_shuffle() {
    List&amp;lt;String&amp;gt; list = new ArrayList&amp;lt;String&amp;gt;();
    list.add(&quot;1&quot;);
    list.add(&quot;2&quot;);
    list.add(&quot;3&quot;);
    list.add(&quot;4&quot;);
    list.add(&quot;5&quot;);
    list.add(&quot;6&quot;);
    list.add(&quot;7&quot;);
    list.add(&quot;8&quot;);
    
    Random random = new Random();
    for (int i = list.size(); i &amp;gt; 1; i--) {
        int ri = random.nextInt(i);  // éšæœºä½ç½®
        int ji = i - 1;              // é¡ºå»¶
        System.out.println(&quot;riï¼š&quot; + ri + &quot; jiï¼š&quot; + ji);
        list.set(ji, list.set(ri, list.get(ji)));        // å…ƒç´ ç½®æ¢
    }
    System.out.println(list);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;è¿è¡Œç»“æœï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;riï¼š6 jiï¼š7
riï¼š4 jiï¼š6
riï¼š1 jiï¼š5
riï¼š2 jiï¼š4
riï¼š0 jiï¼š3
riï¼š0 jiï¼š2
riï¼š1 jiï¼š1
[8, 6, 4, 1, 3, 2, 5, 7]
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™éƒ¨åˆ†ä»£ç é€»è¾‘ä¸»è¦æ˜¯é€šè¿‡éšæœºæ•°ä»é€æ­¥ç¼©å°èŒƒå›´çš„é›†åˆä¸­æ‰¾åˆ°å¯¹åº”çš„å…ƒç´ ï¼Œä¸é€’å‡çš„ä¸‹æ ‡ä½ç½®è¿›è¡Œå…ƒç´ æ›¿æ¢ï¼Œæ•´ä½“çš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼›&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-service.csdnimg.cn/img_convert/337c2c41a86877e507cd3dc35647a9c6.png&quot; alt=&quot;å°å‚…å“¥ &amp;amp; æ´—ç‰Œç®—æ³•è¿‡ç¨‹&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;4-collectionsrotate-æ—‹è½¬ç®—æ³•&quot;&gt;4. Collections.rotate æ—‹è½¬ç®—æ³•&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;æ—‹è½¬ç®—æ³•&lt;/strong&gt;ï¼Œå¯ä»¥æŠŠArrayListæˆ–è€…Linkedlistï¼Œä»æŒ‡å®šçš„æŸä¸ªä½ç½®å¼€å§‹ï¼Œè¿›è¡Œæ­£æ—‹æˆ–è€…é€†æ—‹æ“ä½œã€‚æœ‰ç‚¹åƒæŠŠé›†åˆç†è§£æˆåœ†ç›˜ï¼ŒæŠŠè¦çš„å…ƒç´ è½¬åˆ°è‡ªå·±è¿™ï¼Œå…¶ä»–çš„å…ƒç´ é¡ºåºè·Ÿéšã€‚&lt;/p&gt;
&lt;h4 id=&quot;41-åŠŸèƒ½åº”ç”¨&quot;&gt;4.1 åŠŸèƒ½åº”ç”¨&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;List&amp;lt;String&amp;gt; list = new ArrayList&amp;lt;String&amp;gt;();
list.add(&quot;7&quot;);
list.add(&quot;4&quot;);
list.add(&quot;8&quot;);
list.add(&quot;3&quot;);
list.add(&quot;9&quot;);
Collections.rotate(list, 2);
System.out.println(list);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬å°†é›†åˆé¡ºåºï¼›&lt;code&gt;7ã€4ã€8ã€3ã€9&lt;/code&gt;ï¼Œé¡ºæ—¶é’ˆæ—‹è½¬2ä½ï¼Œæµ‹è¯•ç»“æœå¦‚ä¸‹ï¼›&lt;em&gt;é€†æ—¶é’ˆæ—‹è½¬ä¸ºè´Ÿæ•°&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æµ‹è¯•ç»“æœ&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;[3, 9, 7, 4, 8]
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é€šè¿‡æµ‹è¯•ç»“æœæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä»å…ƒç´ &lt;code&gt;7&lt;/code&gt;å¼€å§‹ï¼Œæ­£å‘æ—‹è½¬äº†ä¸¤ä½ï¼Œæ‰§è¡Œæ•ˆæœå¦‚ä¸‹å›¾ï¼›&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-service.csdnimg.cn/img_convert/69d274d80886f85e05fcb1617b38d561.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;42-æºç åˆ†æ&quot;&gt;4.2 æºç åˆ†æ&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public static void rotate(List&amp;lt;?&amp;gt; list, int distance) {
    if (list instanceof RandomAccess || list.size() &amp;lt; ROTATE_THRESHOLD)
        rotate1(list, distance);
    else
        rotate2(list, distance);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…³äºæ—‹è½¬ç®—æ³•çš„å®ç°ç±»åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼›&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;Arraylist æˆ–è€…å…ƒç´ æ•°é‡ä¸å¤šæ—¶ï¼Œ&lt;code&gt;ROTATE_THRESHOLD = 100&lt;/code&gt;ï¼Œåˆ™é€šè¿‡ç®—æ³•&lt;code&gt;rotate1&lt;/code&gt;å®ç°ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæ˜¯ LinkedList å…ƒç´ æ•°é‡åˆè¶…è¿‡äº† ROTATE_THRESHOLDï¼Œåˆ™éœ€è¦ä½¿ç”¨ç®—æ³•&lt;code&gt;rotate2&lt;/code&gt;å®ç°ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;strong&gt;é‚£ä¹ˆ&lt;/strong&gt;ï¼Œè¿™ä¸¤ä¸ªç®—æ³•æœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ&lt;/p&gt;
&lt;h5 id=&quot;421-æ—‹è½¬ç®—æ³•ï¼Œrotate1&quot;&gt;4.2.1 æ—‹è½¬ç®—æ³•ï¼Œrotate1&lt;/h5&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;private static &amp;lt;T&amp;gt; void rotate1(List&amp;lt;T&amp;gt; list, int distance) {
    int size = list.size();
    if (size == 0)
        return;
    distance = distance % size;
    if (distance &amp;lt; 0)
        distance += size;
    if (distance == 0)
        return;
    for (int cycleStart = 0, nMoved = 0; nMoved != size; cycleStart++) {
        T displaced = list.get(cycleStart);
        int i = cycleStart;
        do {
            i += distance;
            if (i &amp;gt;= size)
                i -= size;
            displaced = list.set(i, displaced);
            nMoved ++;
        } while (i != cycleStart);
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™éƒ¨åˆ†ä»£ç çœ‹ç€ç¨å¾®å¤šä¸€ç‚¹ï¼Œä½†æ˜¯æ•°ç»„ç»“æ„çš„æ“ä½œèµ·æ¥å¹¶ä¸å¤æ‚ï¼ŒåŸºæœ¬å¦‚ä¸Šé¢åœ†åœˆå›¾æ“ä½œï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹æ­¥éª¤ï¼›&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;&lt;code&gt;distance = distance % size;&lt;/code&gt;ï¼Œè·å–æ—‹è½¬çš„ä½ç½®ã€‚&lt;/li&gt;
&lt;li&gt;forå¾ªç¯å’Œdowhileï¼Œé…åˆæ¯æ¬¡çš„æ—‹è½¬æ“ä½œï¼Œæ¯”å¦‚è¿™é‡Œç¬¬ä¸€æ¬¡ä¼šæŠŠ0ä½ç½®å…ƒç´ æ›¿æ¢åˆ°2ä½ç½®ï¼Œæ¥ç€åœ¨dowhileä¸­ä¼šåˆ¤æ–­&lt;code&gt;i != cycleStart&lt;/code&gt;ï¼Œæ»¡è¶³æ¡ä»¶ç»§ç»­æŠŠæ›¿æ¢äº†2ä½ç½®çš„å…ƒç´ ç»§ç»­å¾€ä¸‹æ›¿æ¢ã€‚ç›´åˆ°ä¸€è½®å¾ªç¯æŠŠæ‰€æœ‰å…ƒç´ éƒ½æ”¾ç½®åˆ°æ­£ç¡®ä½ç½®ã€‚&lt;/li&gt;
&lt;li&gt;æœ€ç»ˆlistå…ƒç´ è¢«å¾ªç¯æ›¿æ¢å®Œæˆï¼Œä¹Ÿå°±ç›¸å½“ä»æŸä¸ªä½ç½®å¼€å§‹ï¼Œæ­£åºæ—‹è½¬2ä¸ªä½ç½®çš„æ“ä½œã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;h5 id=&quot;422-æ—‹è½¬ç®—æ³•ï¼Œrotate2&quot;&gt;4.2.2 æ—‹è½¬ç®—æ³•ï¼Œrotate2&lt;/h5&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;private static void rotate2(List&amp;lt;?&amp;gt; list, int distance) {
    int size = list.size();
    if (size == 0)
        return;
    int mid =  -distance % size;
    if (mid &amp;lt; 0)
        mid += size;
    if (mid == 0)
        return;
    reverse(list.subList(0, mid));
    reverse(list.subList(mid, size));
    reverse(list);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ¥ä¸‹æ¥è¿™éƒ¨åˆ†æºç ä¸»è¦æ˜¯é’ˆå¯¹å¤§äº&lt;code&gt;100&lt;/code&gt;ä¸ªå…ƒç´ çš„LinkedListè¿›è¡Œæ“ä½œï¼Œæ‰€ä»¥æ•´ä¸ªç®—æ³•ä¹Ÿæ›´åŠ æœ‰æ„æ€ï¼Œå®ƒçš„ä¸»è¦æ“ä½œåŒ…æ‹¬ï¼›&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;å®šä½æ‹†é“¾ä½ç½®ï¼Œ-distance % size + sizeï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¦æ—‹è½¬åæ‰¾åˆ°çš„å…ƒç´ ä½ç½®&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸€æ¬¡ç¿»è½¬ï¼ŒæŠŠä»ä½ç½®0åˆ°æ‹†é“¾ä½ç½®&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒæ¬¡ç¿»è½¬ï¼ŒæŠŠæ‹†é“¾ä½ç½®åˆ°ç»“å°¾&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸‰æ¬¡ç¿»è½¬ï¼Œç¿»è½¬æ•´ä¸ªé“¾è¡¨&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;æ•´ä½“æ‰§è¡Œè¿‡ç¨‹ï¼Œå¯ä»¥å‚è€ƒä¸‹å›¾ï¼Œæ›´æ–¹ä¾¿ç†è§£ï¼›&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-service.csdnimg.cn/img_convert/ceb2281547fca99bec43e859cea83430.png&quot; alt=&quot;å°å‚…å“¥ &amp;amp; æ—‹è½¬ç®—æ³•&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;5-å…¶ä»–apiä»‹ç»&quot;&gt;5. å…¶ä»–APIä»‹ç»&lt;/h3&gt;
&lt;p&gt;è¿™éƒ¨åˆ†APIå†…å®¹ï¼Œä½¿ç”¨å’Œè®¾è®¡ä¸Šç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œå¹³æ—¶å¯èƒ½ç”¨çš„æ—¶å€™ä¸å¤šï¼Œä½†æœ‰çš„å°ä¼™ä¼´è¿˜æ²¡ç”¨è¿‡ï¼Œå°±å½“ä¸ºä½ æ‰«ç›²äº†ã€‚&lt;/p&gt;
&lt;h4 id=&quot;51-æœ€å¤§æœ€å°å€¼&quot;&gt;5.1 æœ€å¤§æœ€å°å€¼&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;String min = Collections.min(Arrays.asList(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;));
String max = Collections.max(Arrays.asList(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;));
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;Collections&lt;/code&gt; å·¥å…·åŒ…å¯ä»¥è¿›è¡Œæœ€å€¼çš„è·å–ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h4 id=&quot;52-å…ƒç´ æ›¿æ¢&quot;&gt;5.2 å…ƒç´ æ›¿æ¢&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt; List&amp;lt;String&amp;gt; list = new ArrayList&amp;lt;String&amp;gt;();
 list.add(&quot;7&quot;);
 list.add(&quot;4&quot;);
 list.add(&quot;8&quot;);
 list.add(&quot;8&quot;);
 Collections.replaceAll(list, &quot;8&quot;, &quot;9&quot;);
 
 // æµ‹è¯•ç»“æœï¼š [7, 4, 9, 9]
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;å¯ä»¥æŠŠé›†åˆä¸­æŸä¸ªå…ƒç´ å…¨éƒ¨æ›¿æ¢æˆæ–°çš„å…ƒç´ ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h4 id=&quot;53-è¿ç»­é›†åˆä½ç½®åˆ¤æ–­&quot;&gt;5.3 è¿ç»­é›†åˆä½ç½®åˆ¤æ–­&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Test
public void test_indexOfSubList() {
    List&amp;lt;String&amp;gt; list = new ArrayList&amp;lt;String&amp;gt;();
    list.add(&quot;7&quot;);
    list.add(&quot;4&quot;);
    list.add(&quot;8&quot;);
    list.add(&quot;3&quot;);
    list.add(&quot;9&quot;);
    int idx = Collections.indexOfSubList(list, Arrays.asList(&quot;8&quot;, &quot;3&quot;));
    System.out.println(idx);
    
    // æµ‹è¯•ç»“æœï¼š2
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨ä½¿ç”¨Stringæ“ä½œä¸­ï¼Œæˆ‘ä»¬çŸ¥é“&lt;code&gt;&quot;74839&quot;.indexOf(&quot;8&quot;);&lt;/code&gt;ï¼Œå¯ä»¥è·å–æŸä¸ªå…ƒç´ åœ¨ä»€ä¹ˆä½ç½®ã€‚è€Œåœ¨&lt;code&gt;ArrayList&lt;/code&gt;é›†åˆæ“ä½œä¸­ï¼Œå¯ä»¥è·å–è¿ç»­çš„å…ƒç´ ï¼Œåœ¨é›†åˆä¸­çš„ä½ç½®ã€‚&lt;/p&gt;
&lt;h4 id=&quot;54-synchronized&quot;&gt;5.4 synchronized&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;List&amp;lt;String&amp;gt; list = Collections.synchronizedList(new ArrayList&amp;lt;String&amp;gt;());
Map&amp;lt;String, String&amp;gt; map = Collections.synchronizedMap(new HashMap&amp;lt;String, String&amp;gt;());
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;è¿™ä¸ªå¾ˆç†Ÿæ‚‰å§ï¼Œç”šè‡³ç»å¸¸ä½¿ç”¨ï¼Œä½†å¯èƒ½ä¼šå¿½ç•¥è¿™äº›çº¿ç¨‹å®‰å…¨çš„æ–¹æ³•æ¥è‡ªäº &lt;code&gt;Collections&lt;/code&gt; é›†åˆå·¥å…·åŒ…ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;å››ã€æ€»ç»“&quot;&gt;å››ã€æ€»ç»“&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;æœ¬ç« èŠ‚åŸºæœ¬å°†&lt;code&gt;java.util.Collections&lt;/code&gt;å·¥å…·åŒ…ä¸­çš„å¸¸ç”¨æ–¹æ³•ä»‹ç»å®Œäº†ï¼Œä»¥åŠä¸€äº›ç®—æ³•çš„è®²è§£ã€‚è¿™æ ·åœ¨åç»­éœ€è¦ä½¿ç”¨åˆ°è¿™äº›ç®—æ³•é€»è¾‘æ—¶ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨å¹¶ä¸éœ€è¦é‡å¤é€ è½®å­ã€‚&lt;/li&gt;
&lt;li&gt;å­¦ä¹ æ•°æ®ç»“æ„ã€ç®—æ³•ã€è®¾è®¡æ¨¡å¼ï¼Œè¿™ä¸‰æ–¹é¢çš„çŸ¥è¯†ï¼Œé‡ç‚¹è¿˜æ˜¯èƒ½è½åœ°åˆ°æ—¥å¸¸çš„ä¸šåŠ¡å¼€å‘ä¸­ï¼Œå¦åˆ™ç©ºã€å‡ã€è™šï¼Œåªèƒ½é€‚åˆå¹å¹ç‰›ï¼Œå¹¶ä¸ä¼šç»™é¡¹ç›®ç ”å‘å¸¦æ¥å®é™…çš„ä»·å€¼ã€‚&lt;/li&gt;
&lt;li&gt;æ‡‚äº†å°±æ˜¯çœŸçš„æ‡‚ï¼Œåˆ«è®©è‡ªå·±å¤ªéš¾å—ã€‚æ­»è®°ç¡¬èƒŒè°ä¹Ÿå—ä¸äº†ï¼Œè€—è´¹äº†å¤§é‡çš„æ—¶é—´ï¼ŒçŸ¥è¯†ä¹Ÿæ²¡æœ‰å¸æ”¶ï¼Œå­¦ä¹ ä¸€ä¸ªçŸ¥è¯†ç‚¹æœ€å¥½å°±ä»æ ¹æœ¬å­¦ä¹ ï¼Œä¸è¦å¿ƒæµ®æ°”èºã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;äº”ã€ç³»åˆ—æ¨è&quot;&gt;äº”ã€ç³»åˆ—æ¨è&lt;/h2&gt;
</description>
<pubDate>Fri, 11 Sep 2020 00:38:00 +0000</pubDate>
<dc:creator>å°å‚…å“¥</dc:creator>
<og:description>ä½œè€…ï¼šå°å‚…å“¥ åšå®¢ï¼šhttps://bugstack.cn æ²‰æ·€ã€åˆ†äº«ã€æˆé•¿ï¼Œè®©è‡ªå·±å’Œä»–äººéƒ½èƒ½æœ‰æ‰€æ”¶è·ï¼&amp;amp;#128516; ä¸€ã€å‰è¨€ ç®—æ³•æ˜¯æ•°æ®ç»“æ„çš„çµé­‚ï¼ å¥½çš„ç®—æ³•æ­é…ä¸Šåˆé€‚çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/xiaofuge/p/13649630.html</dc:identifier>
</item>
<item>
<title>å€ŸåŠ©FreeHttpä»»æ„ç¯¡æ”¹WebsocketæŠ¥æ–‡(Websocketæ”¹åŒ…) - lulianqi15</title>
<link>http://www.cnblogs.com/lulianqi/p/13641844.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/lulianqi/p/13641844.html</guid>
<description>&lt;h2&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;ä½œä¸ºWebåº”ç”¨ä¸­æœ€å¸¸è§çš„æ•°æ®ä¼ è¾“åè®®ä¹‹ä¸€çš„Websocketï¼Œåœ¨æˆ‘ä»¬æ—¥å¸¸å·¥ä½œä¸­ä¹ŸåŠ¿å¿…ä¼šç»å¸¸ä½¿ç”¨åˆ°ï¼Œè€Œåœ¨è°ƒè¯•æˆ–æµ‹è¯•ä¸­æˆ‘ä»¬å¸¸å¸¸ä¹Ÿæœ‰ç›´æ¥æ”¹å˜Websocketæ•°æ®æŠ¥æ–‡ä»¥ç¡®è®¤å…¶å¯¹åº”ç”¨çš„å½±å“çš„éœ€æ±‚ï¼Œæœ¬æ–‡å°†ä»‹ç»ä¸€ç§çµæ´»æ–¹ä¾¿çš„æ–¹å¼ç¯¡æ”¹Websocketæ”¶å‘çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;ä¹‹å‰çš„æ–‡ç« é‡Œå·²ç»æåˆ°äº†å¦‚ä½•åˆ©ç”¨FreeHttpä¿®æ”¹HTTPçš„è¯·æ±‚/å“åº”æŠ¥æ–‡ï¼Œå…¶å®å€ŸåŠ©FreeHttpåŒæ ·å¯ä»¥å¯¹Websocketæ•°æ®æŠ¥æ–‡åšä»»æ„ä¿®æ”¹ã€‚ï¼ˆäº‹å®ä¸Šburp suite åŠ fiddler çš„script ç­‰å·¥å…·ä¹Ÿæ˜¯å¯ä»¥å®Œæˆçš„ï¼‰&lt;/p&gt;
&lt;p&gt;FreeHttpå¯ä»¥æä¾›æ›´å®¹æ˜“çš„æ–¹å¼è®©æ‚¨ä½¿ç”¨æå‰æŒ‰éœ€æ±‚è®¾ç½®çš„ä¸€ç»„è§„åˆ™å¯¹websocketå‘å‡ºåŠæ¥é€çš„æ•°æ®è¿›è¡Œä»»æ„çš„ç¯¡æ”¹ï¼ˆåŒæ—¶æ”¯æŒæ–‡æœ¬åŠäºŒè¿›åˆ¶çš„æ•°æ®ä¿®æ”¹ï¼‰&lt;/p&gt;

&lt;h2&gt;FreeHttpä»‹ç»åŠå®‰è£…&lt;/h2&gt;
&lt;div readability=&quot;8.8445945945946&quot;&gt;FreeHttpæ˜¯ä¸€ä¸ªFiddleræ’ä»¶ï¼Œå€ŸåŠ©FreeHttpæ‚¨å¯æŒ‰ç…§æ‚¨è‡ªå·±çš„è®¾å®šä»»æ„ä¿®æ”¹httpè¯·æ±‚æˆ–å“åº”æŠ¥æ–‡ï¼ˆåŒæ—¶æ”¯æŒwebsocketæ”¹åŒ…ï¼‰&lt;img src=&quot;https://img2020.cnblogs.com/blog/209007/202009/209007-20200910012105472-1053487016.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;p&gt;Â FreeHttp å®‰è£…å¯ä»¥ç›´æ¥æŸ¥çœ‹ &lt;a href=&quot;https://www.cnblogs.com/lulianqi/p/10428551.html#_label0_1&quot;&gt;https://www.cnblogs.com/lulianqi/p/10428551.html#_label0_1&lt;/a&gt; ï¼ˆå†…å®¹æ¯”è¾ƒé•¿ï¼Œæ‚¨å¯ä»¥ä»…æŸ¥çœ‹å®‰è£…éƒ¨åˆ†ï¼‰&lt;/p&gt;
&lt;/div&gt;

&lt;h2&gt;WebSocketæ”¹åŒ…å®è·µ&lt;/h2&gt;
&lt;p&gt;æ¥ä¸‹æ¥å°†å‘æ‚¨æ¼”ç¤ºå¦‚ä½•å€ŸåŠ©FreeHttpä¿®æ”¹ä¼ è¾“ä¸­çš„WebsocketæŠ¥æ–‡ä»¥æ»¡è¶³æˆ‘ä»¬å‡è®¾çš„éœ€æ±‚ï¼&lt;/p&gt;

&lt;h3&gt;1ï¼šWebSocketç¼–è¾‘æ¨¡å¼&lt;/h3&gt;
&lt;div&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/209007/202009/209007-20200910012124281-791212624.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/div&gt;
&lt;p&gt;è¿›å…¥FreeHttp Tabé¡µåé»˜è®¤æ‰“å¼€çš„æ˜¯HTTPæ¨¡å¼ï¼Œæ‚¨å¯ä»¥ç‚¹å‡»å·¦ä¸‹ã€HTTP/WSã€åˆ‡æ¢è‡³WebSocketæ¨¡å¼ï¼ˆå¦‚æœæ‚¨æ²¡æœ‰çœ‹åˆ°ã€HTTP/WSã€è¯´æ˜æ‚¨ä½¿ç”¨çš„FreeHttpæ˜¯1.3åŠä»¥ä¸‹ç‰ˆæœ¬ï¼Œè¯·é€šè¿‡ä¸Šæ–‡æåˆ°é“¾æ¥å‡çº§FreeHttpå³å¯ï¼Œæ³¨æ„ç›´æ¥æ›¿æ¢å®Œæˆå‡çº§ï¼Œå‡çº§ä¹Ÿä¸ä¼šå½±å“æ‚¨å·²æœ‰çš„å†å²è§„åˆ™ï¼‰&lt;/p&gt;

&lt;h3&gt;2ï¼šå‡è®¾æˆ‘ä»¬çš„åœºæ™¯&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬ä»»æ„æ‰¾ä¸€ä¸ªä½¿ç”¨WebSocket çš„ç«™ç‚¹è¿›è¡Œæ¼”ç¤ºï¼Œé€šå¸¸Webç³»ç»Ÿé‡Œçš„å³æ—¶èŠå¤©IMç³»ç»Ÿå¤§å¤šæ•°ç›´æ¥ä½¿ç”¨WebSocketã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä»¥äº¬ä¸œçš„Webç«™ä¸ºä¾‹è¿›è¡Œæ¼”ç¤ºï¼ˆäº‹å®ä¸Šç½‘ä¸Šæ˜¯å¯ä»¥æ‰¾åˆ°è®¸å¤šWebSocketåœ¨çº¿æµ‹è¯•ç«™ç‚¹å¯è®©å¤§å®¶è°ƒè¯•ä½¿ç”¨ï¼Œè¿™é‡Œä½¿ç”¨JDåšæ¼”ç¤ºå®Œå…¨æ²¡æœ‰æ¶æ„ï¼‰&lt;/p&gt;
&lt;div&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/209007/202009/209007-20200910012138724-83549690.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/div&gt;
&lt;p&gt;å¦‚ä¸Šå›¾æˆ‘ä»¬ç›´æ¥è¿›å…¥äº¬ä¸œé¦–é¡µç‚¹å‡»å³ä¸‹è§’å®¢æœçš„IMèŠå¤©ç³»ç»Ÿ ï¼ˆè¿™ä¸ªæ—¶æœŸç¡®ä¿æ‚¨çš„Fiddleræ˜¯æ‰“å¼€çš„ï¼‰&lt;/p&gt;


&lt;div&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/209007/202009/209007-20200910012151312-1847109113.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/div&gt;
&lt;p&gt;æ‚¨å¯ä»¥éšæ„ä¸äº¬ä¸œå®¢æœè¯´å‡ å¥è¯ï¼ˆå½“ç„¶è¿™ä¸ªæ—¶å€™çš„å®¢æœå¾ˆå¯èƒ½åªæ˜¯æœºå™¨äººï¼‰&lt;/p&gt;
&lt;p&gt;å‡è®¾æˆ‘ä»¬è¦æŠŠå®¢æœç»™æˆ‘ä»¬çš„å›å¤ä¿®æ”¹æ‰ï¼Œä¿®æ”¹ä¸ºâ€œæˆ‘ä¸œå“¥å‘è¯äº†ï¼Œä»Šå¤©å…¨åœº1æŠ˜â€ ï¼ˆçº¯å±ç©ç¬‘è¯·å‹¿å½“çœŸï¼‰&lt;/p&gt;

&lt;h3&gt;3ï¼šåˆ›å»ºè§„åˆ™å®Œæˆæ”¹åŒ…&lt;/h3&gt;
&lt;div&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/209007/202009/209007-20200910012209230-1404965177.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/div&gt;
&lt;p&gt;å¦‚ä¸Šå›¾æˆ‘ä»¬éœ€è¦å…ˆåœ¨Fiddlerå·¦ä¾§Sessionåˆ—è¡¨é‡Œæ‰¾åˆ°åˆšåˆšæˆ‘ä»¬èŠå¤©çš„Websocketçš„Session ï¼ˆäº‹å®ä¸ŠWebsocketå»ºç«‹é“¾æ¥çš„æ¡æ‰‹åå•†ä½¿ç”¨çš„æ˜¯HTTPï¼Œä¸€æ—¦é“¾æ¥å»ºç«‹å®Œæˆå°±ä¼šä¸€ç›´ä½¿ç”¨åŒä¸€æ¡é“¾è·¯ä¼ è¾“æ•°æ®ï¼Œæ‰€ä»¥ä¸ç®¡è¿™ä¸ªWebsocketé“¾æ¥åé¢æ”¶å‘äº†å¤šå°‘æ¬¡æ•°æ®åŒ…ï¼Œå¤§éƒ¨åˆ†æŠ“åŒ…å·¥å…·éƒ½ä¼šå°†ä»–ä»¬æ˜¾ç¤ºåœ¨åŒä¸€ä¸ªSession å³åˆ›å»ºé“¾æ¥çš„é‚£ä¸ªSession ä¸­ï¼‰ï¼Œè¿™ä¸ªSession é€šå¸¸å¾ˆå®¹æ˜“åœ¨Sessionåˆ—è¡¨é‡Œè¢«æ‰¾å‡ºæ¥ï¼Œå› ä¸ºSessionåˆ—è¡¨ä¸­è¢«æ ‡è®°ä¸ºWebsocketçš„é¡¹é€šå¸¸ä¸ä¼šå¤ªå¤šï¼ˆæ³¨æ„Sessionåˆ—è¡¨ä¸­é‚£äº›å¸¦wså›¾æ ‡çš„Sessionï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨åˆ—è¡¨ä¸­åŒå‡»æˆ‘ä»¬åˆšåˆšæ‰¾åˆ°çš„Sessionå°±å¯ä»¥æ‰“å¼€WSæ¶ˆæ¯åˆ—è¡¨ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œå¯ä»¥æ‰¾åˆ°å®¢æœåˆšåˆšå›å¤æˆ‘ä»¬çš„å†…å®¹ï¼Œè¿™ä¹Ÿç¡®è®¤æˆ‘ä»¬æ‰¾åˆ°äº†æ­£ç¡®çš„Websocket Sessionã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„æŸ¥çœ‹å›å¤ç»™æˆ‘ä»¬çš„æŠ¥æ–‡ç»“æ„ï¼Œåé¢æˆ‘ä»¬å°†ä»¥æ­¤åˆ›å»ºæˆ‘ä»¬çš„ç¯¡æ”¹è§„åˆ™ã€‚&lt;/p&gt;


&lt;div&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/209007/202009/209007-20200910012225629-103516398.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/div&gt;
&lt;p&gt;å¦‚ä¸Šå›¾ç°åœ¨æˆ‘ä»¬åˆ‡æ¢åˆ°FreeHttp Tabé¡µæ¥åˆ›å»ºä¸€ä¸ªç®€å•çš„WebSocketç¯¡æ”¹è§„åˆ™å®Œæˆæˆ‘ä»¬åˆšåˆšçš„éœ€æ±‚ã€‚&lt;/p&gt;
&lt;div readability=&quot;10.489887640449&quot;&gt;æ‚¨å¯ä»¥ç›´æ¥ç‚¹å‡»FreeHttpè·å–å›¾æ ‡ï¼ˆä¸Šå›¾ä¸­â€œClick hereâ€çš„ä½ç½®ï¼‰ï¼ŒFreeHttpä¼šè‡ªåŠ¨ä¸ºæ‚¨é€‰æ‹©çš„sessionåˆ›å»ºä¸€ä¸ªå®Œå…¨åŒ¹é…è§„åˆ™ï¼ˆåŒæ—¶ä¹Ÿä¼šæ ¹æ®æ‚¨é€‰æ‹©çš„sessionç±»å‹è‡ªåŠ¨åˆ‡æ¢http/wsæ¨¡å¼ï¼‰ã€‚å½“ç„¶å¦‚æœä½ ç†Ÿæ‚‰FreeHttpé‡Œçš„Filteræ‚¨å¯ä»¥æ‰‹åŠ¨åˆ›å»ºæ›´åŠ ç¬¦åˆæ‚¨è‡ªå·±è¦æ±‚çš„åŒ¹é…è§„åˆ™ã€‚ï¼ˆ&lt;a href=&quot;https://www.cnblogs.com/lulianqi/p/10428551.html#_label1&quot;&gt;https://www.cnblogs.com/lulianqi/p/10428551.html#_label1&lt;/a&gt; æ‚¨åœ¨è¿™é‡Œå¯ä»¥æ‰¾åˆ°Filterçš„è¯¦ç»†è§„åˆ™ï¼‰&lt;/div&gt;

&lt;div&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/209007/202009/209007-20200910012242554-81695081.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/div&gt;
&lt;p&gt;æŸ¥çœ‹å®¢æœå›å¤ç»™æˆ‘ä»¬çš„WebSocketæ¶ˆæ¯æˆ‘ä»¬å¾ˆå®¹æ˜“çš„å¯ä»¥çœ‹åˆ°ç›´æ¥ä¿®æ”¹é«˜äº®åŒºåŸŸæ–‡æœ¬å³å¯ã€‚&lt;/p&gt;

&lt;div&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/209007/202009/209007-20200910012335380-920552282.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/div&gt;
&lt;div readability=&quot;9.455205811138&quot;&gt;å› ä¸ºæˆ‘ä»¬è¦ä¿®æ”¹çš„æ˜¯æ¥æ”¶æ•°æ®ï¼Œå¦‚ä¸Šå›¾æˆ‘ä»¬åˆ‡æ¢åˆ°ã€Websocket Receive Moditficã€ï¼Œç„¶åç›´æ¥åœ¨ã€Payload Modificã€åŒºåŸŸå¡«å†™ä¸Šå›¾ä¸­çš„è§„åˆ™å³å¯ï¼ˆæˆ‘ä»¬ä½¿ç”¨æœ€ç®€å•çš„æ–‡æœ¬æ›¿æ¢ï¼Œæ›´å¤æ‚çš„åœºæ™¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ­£åˆ™æ›¿æ¢æˆ–HEXç­‰å…¶ä»–æ¨¡å¼ ï¼Œ &lt;a href=&quot;https://www.cnblogs.com/lulianqi/p/10428551.html#_label2_0&quot;&gt;https://www.cnblogs.com/lulianqi/p/10428551.html#_label2_0&lt;/a&gt; æ‚¨åœ¨è¿™é‡Œçš„2.1.4å¯ä»¥æ‰¾åˆ°å…¶ä»–æ¨¡å¼çš„ä½¿ç”¨æ–¹æ³•ï¼‰ã€‚&lt;/div&gt;
&lt;p&gt;è§„åˆ™å¡«å†™å®Œæˆç‚¹å‡»å³ä¸‹è§’ç¡®è®¤ä¿å­˜æ‚¨åˆšåˆšåˆ›å»ºçš„ç¯¡æ”¹è§„åˆ™ã€‚&lt;/p&gt;

&lt;div&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/209007/202009/209007-20200910012349993-1022207698.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/div&gt;
&lt;p&gt;ä¿å­˜å®Œæˆåæ‚¨å¯ä»¥åœ¨å³ä¾§ã€Response Ruleã€åˆ—è¡¨ä¸­çœ‹åˆ°æ‚¨åˆšåˆšæ·»åŠ çš„è§„åˆ™ï¼Œæ³¨æ„ä¸Šå›¾ä¸­é»„è‰²é«˜äº®åŒºåŸŸæŒ‰æ­¤è®¾ç½®å¯ç”¨æ‚¨åˆšåˆšæ·»åŠ çš„è§„åˆ™ï¼ˆé»˜è®¤æ–°åŠ å…¥çš„è§„åˆ™æ˜¯ä¸å¯ç”¨çš„ï¼‰&lt;/p&gt;

&lt;div&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/209007/202009/209007-20200910012359892-556087560.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/div&gt;
&lt;p&gt;å®Œæˆè§„åˆ™åˆ›å»ºåï¼Œæˆ‘ä»¬å†æ¬¡å¯¹äº¬ä¸œå®¢æœå‘é€æ‚¨å¥½ï¼Œå¯ä»¥çœ‹åˆ°Webç½‘é¡µä¸Šæ”¶åˆ°çš„å›å¤å·²ç»æŒ‰æˆ‘ä»¬çš„è§„åˆ™å‘ç”Ÿäº†å˜åŒ–ã€‚ï¼ˆæ‚¨å¯ä»¥åœ¨ç½‘é¡µçš„å¼€å‘è€…å·¥å…·æˆ–Fiddlerçš„session wsæ¶ˆæ¯åˆ—è¡¨ä¸­åŒæ ·çœ‹åˆ°å˜åŒ–ï¼‰&lt;/p&gt;
&lt;p&gt;æ³¨æ„åˆ°å³ä¸‹è§’çš„â€œå’¨è¯¢å…¶ä»–é—®é¢˜â€çš„å…¥å£äº†å—ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰åˆšåˆšçš„æ“ä½œå†æ·»åŠ ä¸€ä¸ªè§„åˆ™ï¼Œå°†è¿™ä¸ªâ€œå’¨è¯¢å…¶ä»–é—®é¢˜â€ä¿®æ”¹ä¸ºâ€œ1æŠ˜å…¥å£â€ï¼ˆè¿™é‡Œå°±ä¸é‡å¤æè¿°äº†ï¼‰&lt;/p&gt;

&lt;div&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/209007/202009/209007-20200910012411510-2144857511.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/div&gt;
&lt;p&gt;æˆ‘ä»¬å†æ¬¡å‘é€æ‚¨å¥½å¯ä»¥çœ‹åˆ°å³ä¸‹è§’çš„å¿«é€Ÿå…¥å£ä¹Ÿå‘ç”Ÿäº†æ”¹å˜&lt;/p&gt;
&lt;p&gt;æ³¨æ„è¿™é‡Œæœ‰ä¸€ä¸ªç»†èŠ‚ï¼Œå› ä¸ºè¿™é‡Œä¸€ä¸ªsessionéœ€è¦åŒ¹é…å¤šä¸ªè§„åˆ™è¿›è¡Œä¿®æ”¹ï¼Œå¦‚æœæ‚¨å‘ç°æ‚¨çš„FreeHttpåªèƒ½åŒ¹é…å…¶ä¸­ä¸€ä¸ªï¼Œè¯·åœ¨ä¸‹æ–¹æ‰“å¼€ã€Modific Toolã€ã€http tamper settingã€ï¼Œå¹¶å–æ¶ˆã€is only match first tamper ruleã€&lt;/p&gt;

&lt;h3&gt;4ï¼šå¤æ‚çš„åœºæ™¯&lt;/h3&gt;
&lt;p&gt;è™½ç„¶æˆ‘ä»¬æŒ‰ä¸Šæ–‡çš„æ“ä½œå·²ç»å®Œæˆäº†æˆ‘ä»¬æœ€åˆçš„éœ€æ±‚ï¼Œä¸è¿‡ç°å®åœºæ™¯ä¸­çš„éœ€æ±‚å¾€å¾€ä¸æ˜¯ä¸€æˆä¸å˜çš„ï¼ŒFreeHttpåŒæ—¶æä¾›äº†è®¸å¤šæ›´ç²¾ç»†çš„åŠŸèƒ½å¸®åŠ©æ‚¨åˆ›å»ºç¯¡æ”¹è§„åˆ™å¯¹WebsocketæŠ¥æ–‡è¿›è¡Œç¯¡æ”¹ã€‚&lt;/p&gt;
&lt;p&gt;åŒæ ·æ˜¯ä¸Šé¢æåˆ°çš„ä¾‹å­é€šå¸¸Websocketé‡Œçš„çš„å®æ—¶æ¶ˆæ¯ä¼šæœ‰å¾ˆå¤šï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„æ¶ˆæ¯éƒ½æ˜¯å®¢æœå›å¤æˆ‘ä»¬çš„æ–‡æœ¬æ¶ˆæ¯ï¼Œæˆ‘ä»¬æ²¡æœ‰å¿…è¦å¯¹æ¥æ”¶çš„æ‰€æœ‰æ¶ˆæ¯éƒ½è¿›è¡Œç¯¡æ”¹ã€‚&lt;/p&gt;

&lt;div&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/209007/202009/209007-20200910012424902-889861698.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/div&gt;
&lt;p&gt;å¦‚ä¸Šå›¾æˆ‘ä»¬åˆ›å»ºæ›´åŠ å…·ä½“çš„Filterè§„åˆ™ï¼Œé…ç½®ä»…æŒ‡å®špayloadå¼€å¤´çš„è¿”å›æŠ¥æ–‡æ‰èƒ½é€šè¿‡åŒ¹é…ï¼Œå¹¶ä¸ºè¿™æ¡è§„åˆ™åˆ›å»ºæ›´å®¹æ˜“è¾¨è¯†çš„åˆ«åâ€œä¿®æ”¹å®¢æœçš„å›å¤Â·Â·Â·Â·Â·â€&lt;/p&gt;

&lt;p&gt;æœ‰çš„æ—¶å€™æˆ‘ä»¬éœ€è¦è·å–å‘ç”Ÿæˆ–å›å¤æ¶ˆæ¯é‡Œçš„ä¸€äº›æ•°æ®ï¼ŒæŠŠä»–ä»¬å˜æˆå‚æ•°åŒ–æ•°æ®ä¾›åé¢çš„è§„åˆ™ä½¿ç”¨ï¼Œæ¯”å¦‚æˆ‘ä»¬éœ€è¦è·å–æˆ‘ä»¬å‘é€ç»™å®¢æœçš„å†…å®¹ï¼Œæˆ‘ä»¬å°±éœ€è¦åˆ›å»ºä¸€ä¸ªã€Websocket Send Modificã€è§„åˆ™å¹¶ä½¿ç”¨ã€parameter dataã€è·å–åŠ¨æ€å‚æ•°&lt;/p&gt;

&lt;div&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/209007/202009/209007-20200910012440506-17291115.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/div&gt;
&lt;p&gt;é€šè¿‡åˆ†ææˆ‘ä»¬å‘é€çš„payloadä¸éš¾å‘ç°æˆ‘ä»¬å‘é€çš„æ–‡æœ¬æ¶ˆæ¯éƒ½æœ‰å›ºå®šçš„å¼€å¤´ï¼Œæˆ‘ä»¬å¯ä»¥å¦‚ä¸Šå›¾åˆ›å»ºã€Websocket Send Modificã€çš„åŒ¹é…è§„åˆ™&lt;/p&gt;

&lt;div&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/209007/202009/209007-20200910012455491-710809022.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/div&gt;
&lt;div readability=&quot;12.485074626866&quot;&gt;å› ä¸ºè¯¥è§„åˆ™å¹¶ä¸ç”¨ä¿®æ”¹æŠ¥æ–‡åªæ˜¯ç”¨æ¥è·å–åŠ¨æ€æ•°æ®ï¼Œæˆ‘ä»¬ã€Payload Modificã€ä»€ä¹ˆéƒ½ä¸ç”¨å¡«å†™ï¼Œåªéœ€è¦ç‚¹å‡»ä¸‹æ–¹parameterå›¾æ ‡ï¼ˆçº¢è‰²è™šçº¿æ¡†ä¸­çš„å›¾æ ‡ï¼‰æ·»åŠ å¦‚ä¸Šå›¾çš„parameter pickè§„åˆ™å³å¯ï¼ˆå‚æ•°åç§°ä¸ºmy content ï¼Œä½¿ç”¨ stringæ–¹å¼æ‹¾å–ï¼Œæ‹¾å–èŒƒå›´æ˜¯è¯·æ±‚æˆ–å“åº”å®ä½“ï¼Œä»¥},&quot;content&quot;:&quot;å¼€å¤´å¹¶ä»¥&quot;,&quot;render&quot;:&quot;user&quot;ç»“å°¾çš„æ•°æ®ã€‚æ›´å¤šparameter pickè®¾ç½®ç»†èŠ‚æ‚¨å¯ä»¥æŸ¥çœ‹ &lt;a href=&quot;https://www.cnblogs.com/lulianqi/p/10428551.html#_label8_2&quot;&gt;https://www.cnblogs.com/lulianqi/p/10428551.html#_label8_2&lt;/a&gt; 8.3 åŠ¨æ€æ‹¾å–å‚æ•°åŒ–æ•°æ®ï¼‰&lt;/div&gt;

&lt;div&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/209007/202009/209007-20200910012505075-867660840.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/div&gt;
&lt;p&gt;å¯ç”¨æ‚¨åˆšåˆšæ·»åŠ çš„è§„åˆ™ï¼Œå¹¶å†æ¬¡åœ¨IMèŠå¤©æ¡†ä¸­å‘é€æ‚¨å¥½ï¼Œæˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„è§„åˆ™å°±ä¼šä»æˆ‘ä»¬å‘é€çš„payloadä¸­æ‹¾å–æˆ‘ä»¬å‘é€çš„å†…å®¹ï¼Œå¦‚ä¸Šå›¾æˆ‘ä»¬é€šè¿‡ã€Modific Toolã€ã€parameter data manageã€æ‰“å¼€å‚æ•°ç®¡ç†å™¨æŸ¥çœ‹æˆ‘ä»¬æ‹¾å–çš„å†…å®¹ï¼ˆæ³¨æ„è¿™ä¸ªæ•°æ®æ˜¯ä¼šæ ¹æ®æ¯æ¬¡æ‹¾å–åŠ¨æ€å˜åŒ–çš„ï¼‰&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨åé¢çš„è§„åˆ™ä¸­ç›´æ¥ä½¿ç”¨æˆ‘ä»¬å‰é¢æ‹¾å–çš„æ•°æ®ï¼Œæˆ‘ä»¬ç°åœ¨åŒå‡»åˆšåˆšåˆ›å»ºçš„Response Rule â€œä¿®æ”¹å®¢æœçš„å›å¤ä¸ºæ‰“æŠ˜æ¶ˆæ¯â€å¯¹å…¶è¿›è¡Œç¼–è¾‘&lt;/p&gt;

&lt;div&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/209007/202009/209007-20200910012515187-313222524.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/div&gt;
&lt;div readability=&quot;10.272493573265&quot;&gt;å¦‚ä¸Šå›¾æˆ‘ä»¬åœ¨éœ€è¦æ’å…¥åŠ¨æ€å‚æ•°çš„åœ°æ–¹å³é”®æ—¢å¯ä»¥æ–¹ä¾¿çš„æ‰¾åˆ°æˆ‘ä»¬åˆšåˆšæ‹¾å–çš„â€œmy contentâ€å‚æ•°ï¼Œå¹¶å°†å…¶ç›´æ¥åº”ç”¨åˆ°æˆ‘ä»¬çš„è§„åˆ™ä¸­ï¼ŒåŒæ—¶æ‚¨å¯ä»¥ç‚¹å‡»ä¸‹æ–¹çš„é—¹é’Ÿå›¾æ ‡ä¸ºæœ¬æ¬¡sessionè®¾ç½®å»¶æ—¶ã€‚ï¼ˆæ›´å¤š parameter data manage çš„ä½¿ç”¨æ‚¨å¯ä»¥æŸ¥çœ‹ &lt;a href=&quot;https://www.cnblogs.com/lulianqi/p/10428551.html#_label8&quot;&gt;https://www.cnblogs.com/lulianqi/p/10428551.html#_label8&lt;/a&gt; å…«ï¼šå‚æ•°åŒ–æ•°æ®è®¾ç½®ï¼‰&lt;/div&gt;
&lt;p&gt;æ³¨æ„ä¿®æ”¹å®Œæˆåä¸è¦å¿˜äº†ç‚¹ç¡®è®¤ä¿å­˜ä¿®æ”¹ã€‚&lt;/p&gt;

&lt;div&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/209007/202009/209007-20200910012524511-540587968.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/div&gt;
&lt;p&gt;å¦‚ä¸Šå›¾ï¼Œè¿™ä¸ªæ—¶å€™æ‚¨å†å‘å®¢æˆ·å‘é€â€œæ‚¨å¥½å§â€è¿™ç§æ¶ˆæ¯çš„æ—¶å€™ï¼Œå®¢æœçš„å›å¤ä¸­å°±ä¼šç›´æ¥ä½¿ç”¨æˆ‘ä»¬åˆšåˆšæ‹¾å–çš„å‚æ•°ã€‚&lt;/p&gt;


&lt;p&gt;
&lt;h2&gt;æ€»ç»“&lt;/h2&gt;
&lt;/p&gt;
&lt;p&gt;äº‹å®ä¸Šä½¿ç”¨FreeHttpæ‚¨å¯å¯¹APPç§»åŠ¨åº”ç”¨ï¼ŒWebç½‘é¡µï¼Œå°ç¨‹åºçš„Websocket åŠ HTTPæŠ¥æ–‡åˆ›å»ºä»»æ„çš„ç¯¡æ”¹è§„åˆ™å¯¹æŠ¥æ–‡è¿›è¡Œä¿®æ”¹ã€‚&lt;/p&gt;





&lt;p&gt;&lt;img src=&quot;https://common.cnblogs.com/images/loading.gif&quot; alt=&quot;&quot; id=&quot;uploading_image_89575&quot;/&gt;&lt;/p&gt;

</description>
<pubDate>Fri, 11 Sep 2020 00:02:00 +0000</pubDate>
<dc:creator>lulianqi15</dc:creator>
<og:description>å‰è¨€ ä½œä¸ºWebåº”ç”¨ä¸­æœ€å¸¸è§çš„æ•°æ®ä¼ è¾“åè®®ä¹‹ä¸€çš„Websocketï¼Œåœ¨æˆ‘ä»¬æ—¥å¸¸å·¥ä½œä¸­ä¹ŸåŠ¿å¿…ä¼šç»å¸¸ä½¿ç”¨åˆ°ï¼Œè€Œåœ¨è°ƒè¯•æˆ–æµ‹è¯•ä¸­æˆ‘ä»¬å¸¸å¸¸ä¹Ÿæœ‰ç›´æ¥æ”¹å˜Websocketæ•°æ®æŠ¥æ–‡ä»¥ç¡®è®¤å…¶å¯¹åº”ç”¨çš„å½±å“çš„éœ€æ±‚ï¼Œæœ¬æ–‡å°†</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/lulianqi/p/13641844.html</dc:identifier>
</item>
<item>
<title>ç•…è´­å•†åŸ(åäºŒ)ï¼šæ¥å…¥å¾®ä¿¡æ‰«ç æ”¯ä»˜ - Robodä¸¶</title>
<link>http://www.cnblogs.com/robod/p/13649569.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/robod/p/13649569.html</guid>
<description>&lt;blockquote readability=&quot;6.5172413793103&quot;&gt;
&lt;p&gt;&lt;strong&gt;å¥½å¥½å­¦ä¹ ï¼Œå¤©å¤©å‘ä¸Š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡å·²æ”¶å½•è‡³æˆ‘çš„Githubä»“åº“&lt;a href=&quot;https://github.com/RobodLee/DayDayUP&quot;&gt;&lt;strong&gt;DayDayUP&lt;/strong&gt;&lt;/a&gt;ï¼šgithub.com/RobodLee/DayDayUPï¼Œæ¬¢è¿Star&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;æ”¯ä»˜æµç¨‹&quot;&gt;æ”¯ä»˜æµç¨‹&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/RobodLee/image_store/raw/master/Java/%E7%95%85%E8%B4%AD%E5%95%86%E5%9F%8E12%EF%BC%9A%E6%8E%A5%E5%85%A5%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/%E6%94%AF%E4%BB%98%E6%B5%81%E7%A8%8B.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å®ç°æ”¯ä»˜çš„åŠŸèƒ½ï¼Œè¿™é‡Œé€‰æ‹©æ¥å…¥å¾®ä¿¡æ”¯ä»˜ã€‚æµç¨‹å°±æ˜¯æˆ‘ä»¬é€šè¿‡è®¢å•ç³»ç»Ÿä¸‹å•ï¼Œç„¶åè®¢å•ç³»ç»Ÿè°ƒç”¨æ”¯ä»˜ç³»ç»Ÿå»å‘å¾®ä¿¡æ”¯ä»˜çš„æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œç„¶åè·å–äºŒç»´ç è¿”å›ç»™ç”¨æˆ·ï¼Œç„¶åè®¢å•ç³»ç»Ÿå°±å¼€å§‹ç›‘å¬MQã€‚ç”¨æˆ·æ‰«ç æ”¯ä»˜åï¼Œæ”¯ä»˜ç³»ç»Ÿå°†æ”¯ä»˜çŠ¶æ€å­˜è¿›MQä¸­ã€‚è®¢å•ç³»ç»Ÿæ£€æµ‹åˆ°ç”¨æˆ·å·²ç»ä»˜é’±äº†ï¼Œå°±å°†è®¢å•è®¾ä¸ºå·²æ”¯ä»˜ï¼Œç„¶åå­˜è¿›MySQLä¸­ã€‚å¯èƒ½ä¼šå› ä¸ºç½‘ç»œé—®é¢˜å¯¼è‡´è®¢å•ç³»ç»Ÿè·å–ä¸åˆ°æ”¯ä»˜çŠ¶æ€ï¼Œæ‰€ä»¥è®¢å•ç³»ç»Ÿä¼šå®šæ—¶å‘å¾®ä¿¡æ”¯ä»˜æœåŠ¡å™¨å‘é€è¯·æ±‚å»æŸ¥è¯¢è®¢å•çŠ¶æ€ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å¾®ä¿¡æ”¯ä»˜ç®€ä»‹&quot;&gt;å¾®ä¿¡æ”¯ä»˜ç®€ä»‹&lt;/h2&gt;
&lt;p&gt;è¦æƒ³æ¥å…¥å¾®ä¿¡æ”¯ä»˜ï¼Œå°±å¾—æœ‰è®¤è¯è¿‡çš„æœåŠ¡å·ï¼Œè¿™ä¸ªæˆ‘æ²¡æœ‰ï¼Œæ‰€ä»¥ç”³è¯·ä¸äº†ã€‚å°±ç”¨é»‘é©¬æä¾›çš„è´¦å·å§ï¼Œæˆ‘è¯•äº†ä¸€ä¸‹ï¼Œå¯ä»¥ç”¨ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-properties&quot;&gt;appid(å…¬ä¼—è´¦å·ID)ï¼šwx8397f8696b538317
mch_id(å•†æˆ·å·)ï¼š1473426802
key(å•†æˆ·å¯†é’¥)ï¼šT6m9iK73b0kn9g5v426MKfHQH7X8rKwb
&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote readability=&quot;1.6483516483516&quot;&gt;
&lt;p&gt;å¾®ä¿¡æ”¯ä»˜çš„å¼€å‘æ–‡æ¡£ï¼š&lt;a href=&quot;https://pay.weixin.qq.com/wiki/doc/api/native.php?chapter=6_1&quot;&gt;https://pay.weixin.qq.com/wiki/doc/api/native.php?chapter=6_1&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨è¿™ä¸ªå®˜æ–¹çš„å¼€å‘æ–‡æ¡£é‡Œé¢ä»‹ç»äº†å¾®ä¿¡æ”¯ä»˜ç›¸å…³çš„APIå¹¶ä¸”æä¾›äº†SDKã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/RobodLee/image_store/raw/master/Java/%E7%95%85%E8%B4%AD%E5%95%86%E5%9F%8E12%EF%BC%9A%E6%8E%A5%E5%85%A5%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98sdk%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªSDKçš„å†…å®¹ä¸å¤šï¼Œåªæœ‰å‡ ä¸ªç±»ï¼Œæˆ‘ç¨å¾®ä»‹ç»ä¸€ä¸‹ï¼š&lt;/p&gt;
&lt;ul readability=&quot;4.5&quot;&gt;&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;WXPayConfigï¼šè¿™æ˜¯ä¸ªæŠ½è±¡ç±»ï¼Œé‡Œé¢æœ‰å‡ ä¸ªæ–¹æ³•ï¼Œæ˜¯ç”¨æ¥è·å–æ ¸å¿ƒå‚æ•°çš„ï¼Œæ¯”å¦‚å…¬ä¼—å·idï¼Œå•†æˆ·å·ï¼Œå¯†é’¥ç­‰ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨çš„æ—¶å€™è¦å…ˆå»å®ä¾‹åŒ–è¿™ä¸ªç±»å°†å‡ ä¸ªé‡è¦å‚æ•°é…ç½®è¿›å»ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;WXPayï¼šå’Œè®¢å•ç›¸å…³çš„æ–¹æ³•éƒ½å°è£…åœ¨è¿™ä¸ªç±»é‡Œé¢ï¼Œæ¯”å¦‚ä¸‹å•ï¼ŒæŸ¥è¯¢è®¢å•ï¼Œå–æ¶ˆè®¢å•ç­‰ã€‚é‡Œé¢æœ‰ä¸ªæ–¹æ³•&lt;strong&gt;fillRequestData()&lt;/strong&gt;ï¼Œæ¯æ¬¡æ‰§è¡Œä¸‹å•ç­‰æ“ä½œçš„æ—¶å€™éƒ½ä¼šå»è°ƒç”¨è¿™ä¸ªæ–¹æ³•å°†WXPayConfigä¸­çš„å‡ ä¸ªæ ¸å¿ƒå‚æ•°å°è£…åˆ°è¯·æ±‚å‚æ•°çš„Mapé›†åˆé‡Œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;WXPayRequestï¼šè¿™ä¸ªæ˜¯è´Ÿè´£è¯·æ±‚æœåŠ¡å™¨çš„ï¼ŒWXPayä¹Ÿéƒ½æ˜¯é€šè¿‡è°ƒç”¨è¿™ä¸ªç±»ä¸­çš„æ–¹æ³•å»è¯·æ±‚æœåŠ¡å™¨çš„ï¼Œæ‰§è¡Œç›¸åº”æ–¹æ³•çš„æ—¶å€™ï¼Œä¼šå°†WXPayä¼ è¿‡æ¥çš„Mapé›†åˆè½¬æ¢æˆXMLæ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œç„¶åä½¿ç”¨HttpClientå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚æ²¡é”™ï¼Œå¾®ä¿¡æ”¯ä»˜æ˜¯é€šè¿‡XMLè¿›è¡Œæ•°æ®ä¼ è¾“çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;WXPayUtilï¼šè¿™æ˜¯ä¸ªå·¥å…·ç±»ï¼Œå°è£…äº†ä¸€äº›å¸¸ç”¨æ–¹æ³•ï¼Œæ¯”å¦‚Mapè½¬XMLï¼ŒXMLè½¬Mapç­‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ç”¨åˆ°çš„å¾®ä¿¡çš„Nativeæ”¯ä»˜ï¼Œä¹Ÿå°±æ˜¯æ‰«ç æ”¯ä»˜ï¼Œæœ‰ä¸¤ç§æ¨¡å¼ï¼Œæˆ‘ä»¬ç”¨åˆ°çš„æ˜¯æ¨¡å¼äºŒã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/RobodLee/image_store/raw/master/Java/%E7%95%85%E8%B4%AD%E5%95%86%E5%9F%8E12%EF%BC%9A%E6%8E%A5%E5%85%A5%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/%E5%BE%AE%E4%BF%A1%E6%89%AB%E7%A0%81%E6%94%AF%E4%BB%98%E6%A8%A1%E5%BC%8F%E4%BA%8C%E6%97%B6%E5%BA%8F%E5%9B%BE.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆåœ¨ç•…è´­çš„è®¢å•ç³»ç»Ÿä¸­ç”Ÿæˆè®¢å•ï¼Œç„¶åå°†ä¸€äº›å¿…è¦çš„å‚æ•°ä¼ å…¥åˆ°å¾®ä¿¡æ”¯ä»˜çš„åå°ï¼Œç„¶åå°±ä¼šäº§ç”Ÿä¸€ä¸ªé¢„æ”¯ä»˜çš„è®¢å•ï¼Œå°†æ”¯ä»˜é“¾æ¥è¿”å›ç»™æˆ‘ä»¬ï¼Œæˆ‘ä»¬å†æ ¹æ®æ”¯ä»˜é“¾æ¥ç”ŸæˆäºŒç»´ç ä¼ ç»™ç”¨æˆ·ã€‚ç”¨æˆ·æ‰«ç æ”¯ä»˜åå†å°†æ”¯ä»˜ç»“æœä¼ åˆ°æˆ‘ä»¬çš„åå°ï¼Œè¿™æ ·æ•´ä¸ªæ”¯ä»˜çš„æµç¨‹å°±ç»“æŸäº†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å‡†å¤‡å·¥ä½œ&quot;&gt;å‡†å¤‡å·¥ä½œ&lt;/h2&gt;
&lt;p&gt;ä»‹ç»å®Œäº†å¾®ä¿¡æ”¯ä»˜åï¼Œå°±æ¥è¯´ä¸€ä¸‹é¡¹ç›®ä¸­è¯¥æ€ä¹ˆå»é›†æˆå¾®ä¿¡æ”¯ä»˜ã€‚è§†é¢‘ä¸­ç”¨çš„æ˜¯ç¬¬ä¸‰æ–¹çš„ä¾èµ–ï¼Œæˆ‘ç”¨çš„æ˜¯å®˜æ–¹çš„ã€‚å¾®ä¿¡æ”¯ä»˜çš„SDKåœ¨Mavençš„è¿œç¨‹ä»“åº“é‡Œæ˜¯æ²¡æœ‰çš„ï¼Œæ‰€ä»¥éœ€è¦è‡ªå·±ä¸‹è½½ç„¶åæ‰‹åŠ¨å¯¼å…¥ã€‚è¿™é‡Œé¢æœ‰ä¸¤ä¸ªå‘æœ‰å¿…è¦è¯´ä¸€ä¸‹ï¼Œå‰é¢ä¸æ˜¯æåˆ°&lt;strong&gt;WXPayConfig&lt;/strong&gt;æ˜¯ä¸ªæŠ½è±¡ç±»ä¹ˆï¼Œé‚£ä¹ˆç”¨çš„æ—¶å€™è‚¯å®šå¾—å»ç»§æ‰¿æ‰èƒ½å®ä¾‹åŒ–å§ã€‚ä½†æ˜¯é‡Œé¢çš„æŠ½è±¡æ–¹æ³•éƒ½æ²¡æœ‰æƒé™ä¿®é¥°ç¬¦ï¼Œæ‰€ä»¥é»˜è®¤æ˜¯åŒ…è®¿é—®æƒé™ï¼Œæˆ‘ä»¬æ—¢ç„¶æ˜¯Mavenä¾èµ–è¿™ä¸ªSDKï¼Œé‚£ä¹ˆæˆ‘ä»¬å†™çš„ä»£ç è‡ªç„¶ä¸ä¼šå’Œå®ƒåœ¨åŒä¸€ä¸ªåŒ…ä¸‹ï¼Œæ‰€ä»¥è¦å…ˆåœ¨è¿™å‡ ä¸ªæŠ½è±¡æ–¹æ³•å‰é¢æ·»åŠ &lt;strong&gt;public&lt;/strong&gt;ä¿®é¥°ç¬¦ã€‚è€Œä¸”ï¼Œå¾®ä¿¡æä¾›çš„sdkæ–‡æ¡£é‡Œè¿˜å†™æˆäº†implementsæŠ½è±¡ç±»ï¼ŒçœŸæä¸æ‡‚å¾®ä¿¡æ€ä¹ˆä¼šçŠ¯è¿™ç§é”™~~~&lt;/p&gt;
&lt;p&gt;ç°åœ¨å°±å¯ä»¥å°†è¿™ä¸ªSDKæ·»åŠ åˆ°æˆ‘ä»¬æœ¬åœ°çš„Mavenä»“åº“é‡Œäº†ï¼Œåœ¨è§£å‹åçš„sdkçš„æ ¹ç›®å½•ä¸‹æ‰§è¡Œ&lt;code&gt;mvn install&lt;/code&gt;å‘½ä»¤ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/RobodLee/image_store/raw/master/Java/%E7%95%85%E8%B4%AD%E5%95%86%E5%9F%8E12%EF%BC%9A%E6%8E%A5%E5%85%A5%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/mvninstallsdk.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å½“å‡ºç°&lt;strong&gt;BUILD SUCCESS&lt;/strong&gt;çš„å­—æ ·çš„æ—¶å€™ï¼Œå°±è¯´æ˜å·²ç»æˆåŠŸæ·»åŠ åˆ°æœ¬åœ°çš„Mavenä»“åº“äº†ã€‚è¿™æ—¶å€™ç¬¬äºŒä¸ªå‘å°±æ¥äº†ï¼Œå¦‚æœå°±è¿™ä¹ˆæ·»åŠ åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­å°±æœ‰å¯èƒ½ä¼šå‡ºç°Mavenä¾èµ–å†²çªï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/RobodLee/image_store/raw/master/Java/%E7%95%85%E8%B4%AD%E5%95%86%E5%9F%8E12%EF%BC%9A%E6%8E%A5%E5%85%A5%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/maven%E4%BE%9D%E8%B5%96%E5%86%B2%E7%AA%81.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œå‡ºç°å†²çªçš„åŒ…æ˜¯&lt;strong&gt;slf4j-simple&lt;/strong&gt;ï¼Œè€Œå¾®ä¿¡æ”¯ä»˜sdkæ°å¥½ä¾èµ–äº†è¿™ä¸ªåŒ…ï¼Œæ‰€ä»¥åœ¨å¯¼å…¥å¾®ä¿¡æ”¯ä»˜çš„æ—¶å€™æŠŠè¿™ä¸ªä¾èµ–æ’é™¤æ‰å³å¯ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-xml&quot;&gt;&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;com.github.wxpay&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;wxpay-sdk&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;3.0.9&amp;lt;/version&amp;gt;
    &amp;lt;exclusions&amp;gt;
        &amp;lt;exclusion&amp;gt;
            &amp;lt;groupId&amp;gt;org.slf4j&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;slf4j-simple&amp;lt;/artifactId&amp;gt;
        &amp;lt;/exclusion&amp;gt;
    &amp;lt;/exclusions&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç„¶åå°±å¯ä»¥åˆ›å»ºæ”¯ä»˜çš„å·¥ç¨‹äº†ã€‚åœ¨changgou-serviceä¸‹åˆ›å»ºä¸€ä¸ªMoudleåä¸º&lt;strong&gt;changgou-service-wechatpay&lt;/strong&gt;ï¼Œç„¶å&lt;strong&gt;å°†å¾®ä¿¡æ”¯ä»˜çš„ä¾èµ–æ·»åŠ åˆ°è¿™ä¸ªå·¥ç¨‹ä¸‹&lt;/strong&gt;ï¼Œå¯åŠ¨ç±»æ²¡å•¥å¥½è¯´çš„ï¼Œé…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-yml&quot;&gt;server:
  port: 18090
spring:
  application:
    name: wechatpay
  main:
    allow-bean-definition-overriding: true
eureka:
  client:
    service-url:
      defaultZone: http://127.0.0.1:7001/eureka
  instance:
    prefer-ip-address: true
feign:
  hystrix:
    enabled: true
#hystrix é…ç½®
hystrix:
  command:
    default:
      execution:
        timeout:
          #å¦‚æœenabledè®¾ç½®ä¸ºfalseï¼Œåˆ™è¯·æ±‚è¶…æ—¶äº¤ç»™ribbonæ§åˆ¶
          enabled: true
        isolation:
          strategy: SEMAPHORE

#å¾®ä¿¡æ”¯ä»˜ä¿¡æ¯é…ç½®
wechat:
  # åº”ç”¨id
  app_id: wx8397f8696b538317
  # å•†æˆ·å·id
  mch_id: 1473426802
  # å¯†é’¥
  key: T6m9iK73b0kn9g5v426MKfHQH7X8rKwb
  # æ”¯ä»˜å›è°ƒåœ°å€
  notify_url: http://www.itcast.cn
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œé…ç½®äº†appidï¼Œmch_idï¼Œkeyï¼Œnotify_urlè¿™å‡ ä¸ªå‚æ•°ï¼Œç”¨çš„æ—¶å€™ç›´æ¥è¯»å–å°±å¯ä»¥äº†ã€‚è¿™æ ·æ”¯ä»˜å¾®æœåŠ¡å°±æ­å»ºå¥½äº†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å¾®ä¿¡æ”¯ä»˜äºŒç»´ç ç”Ÿæˆ&quot;&gt;å¾®ä¿¡æ”¯ä»˜äºŒç»´ç ç”Ÿæˆ&lt;/h2&gt;
&lt;p&gt;æ·»åŠ ä¸€ä¸ªControllerå±‚çš„ç±»WeChatPayControllerï¼Œç„¶åå†åˆ›å»ºä¸€ä¸ªå…¥å£æ–¹æ³•ï¼Œå› ä¸ºäºŒç»´ç æ”¯ä»˜å«åšNativeæ”¯ä»˜ï¼Œæ‰€ä»¥è¿™é‡Œå°±èµ·åä¸ºcreateNativeäº†ï¼Œæ¥æ”¶ä¸€ä¸ªOrderå‚æ•°ï¼Œè§†é¢‘ä¸­ç”¨çš„æ˜¯Mapæ¥æ”¶å‚æ•°ã€‚ä½†æ˜¯æ—¢ç„¶æ˜¯åˆ›å»ºè®¢å•ï¼Œç›´æ¥ç”¨Orderä½œä¸ºå‚æ•°å¯è¯»æ€§ä¸æ˜¯å¥½å¾ˆå¤šå—ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;//åˆ›å»ºäºŒç»´ç 
@RequestMapping(value = &quot;/create/native&quot;)
public Result createNative(@RequestBody Order order){
    Map&amp;lt;String,String&amp;gt; resultMap = weChatPayService.createNative(order);
    return new Result(true, StatusCode.OK,&quot;åˆ›å»ºäºŒç»´ç é¢„ä»˜è®¢å•æˆåŠŸï¼&quot;,resultMap);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å†™å®Œäº†Controllerå°±å¯ä»¥å†™Serviceå±‚äº†ï¼Œè§†é¢‘ä¸­æ˜¯ç”¨HttpClientè°ƒç”¨å¾®ä¿¡æ”¯ä»˜çš„è¿œç¨‹æ¥å£ï¼Œæ—¢ç„¶å¾®ä¿¡å·²ç»æä¾›äº†sdkï¼Œä¸ºä»€ä¹ˆè¿˜è¦é‡å¤é€ è½®å­å‘¢ï¼Ÿæ‰€ä»¥æˆ‘å°±æ²¡å’Œè§†é¢‘ä¸­å†™çš„ä¸€æ ·ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨å¾®ä¿¡çš„sdkï¼Œè™½ç„¶åº•å±‚ç”¨çš„ä¹Ÿæ˜¯HttpClientã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆéœ€è¦å°†WXPayConfigç»™å®ç°ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class MyWXPayConfig extends WXPayConfig {

    private String appId;

    private String mchId;

    private String key;

    public MyWXPayConfig(String appId, String mchId, String key) {
        this.appId = appId;
        this.mchId = mchId;
        this.key = key;
    }

    @Override
    public String getAppID() {
        return appId;
    }

    @Override
    public String getMchID() {
        return mchId;
    }

    @Override
    public String getKey() {
        return key;
    }

    @Override
    public InputStream getCertStream() {
        return null;
    }

    @Override
    public int getHttpConnectTimeoutMs() {
        return 8000;
    }

    @Override
    public int getHttpReadTimeoutMs() {
        return 10000;
    }

    @Override
    public IWXPayDomain getWXPayDomain() {
        IWXPayDomain iwxPayDomain = new IWXPayDomain() {
            @Override
            public void report(String domain, long elapsedTimeMillis, Exception ex) {
            }
            @Override
            public DomainInfo getDomain(WXPayConfig config) {
                return new IWXPayDomain.DomainInfo(WXPayConstants.DOMAIN_API, true);
            }
        };
        return iwxPayDomain;
    }

}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç„¶ååœ¨&lt;strong&gt;WeChatPayServiceImpl&lt;/strong&gt;ç¼–å†™ç›¸åº”çš„ä»£ç ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Value(&quot;${wechat.appid}&quot;)
private String appId;

@Value(&quot;${wechat.mch_id}&quot;)
private String mcnId;

@Value(&quot;${wechat.key}&quot;)
private String key;

@Value(&quot;${wechat.notify_url}&quot;)
private String notifyUrl;

@Override
public Map&amp;lt;String, String&amp;gt; createNative(Order order) {
    try {
        Map&amp;lt;String, String&amp;gt; map = new HashMap&amp;lt;&amp;gt;(16);
        map.put(&quot;body&quot;, &quot;è…¾è®¯å……å€¼ä¸­å¿ƒ-QQä¼šå‘˜å……å€¼&quot;);    //å•†å“æè¿°
        map.put(&quot;out_trade_no&quot;, order.getId());      //å•†æˆ·è®¢å•å·
        map.put(&quot;total_fee&quot;, String.valueOf((int)(order.getTotalMoney() * 100))); //æ ‡ä»·é‡‘é¢,å•ä½ä¸ºåˆ†
        map.put(&quot;spbill_create_ip&quot;, &quot;127.0.0.1&quot;);    //ç»ˆç«¯IP
        map.put(&quot;trade_type&quot;, &quot;NATIVE &quot;);    //äº¤æ˜“ç±»å‹ï¼ŒJSAPI -JSAPIæ”¯ä»˜,NATIVE -Nativeæ”¯ä»˜,APP -APPæ”¯ä»˜

        Map&amp;lt;String, String&amp;gt; response = wxpay.unifiedOrder(map);
        if (response == null || response.size() == 0) {
                throw new RuntimeException(&quot;ä¸‹å•å¤±è´¥&quot;);
        }
        return response;
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œç”¨åˆ°äº†&lt;strong&gt;@Value&lt;/strong&gt;æ³¨è§£å°†é…ç½®æ–‡ä»¶ä¸­çš„å‡ ä¸ªå‚æ•°æ³¨å…¥äº†è¿›æ¥ã€‚ç„¶åå°†åˆ›å»ºè®¢å•çš„å‡ ä¸ªå‚æ•°æ·»åŠ åˆ°Mapé›†åˆä¸­ï¼Œé”®çš„åç§°åœ¨æ–‡æ¡£ä¸­æœ‰è¯´æ˜ï¼Œä¸èƒ½æ”¹å˜ï¼Œé‡‘é¢çš„å•ä½æ˜¯åˆ†ï¼Œæˆ‘ä»¬ä¼ è¿‡æ¥çš„æ˜¯å…ƒï¼Œæ‰€ä»¥éœ€è¦ä¹˜100ï¼Œå¾®ä¿¡è¦æ±‚é‡‘é¢æ˜¯æ•´æ•°ï¼Œæ‰€ä»¥å†å¼ºè½¬æˆintã€‚ç„¶åå°±å»åˆ›å»º&lt;strong&gt;MyWXPayConfig&lt;/strong&gt;çš„å®ä¾‹ï¼Œå°†ä¸‰ä¸ªå‚æ•°ä¼ å…¥è¿›å…¥ï¼Œç„¶åå»åˆ›å»ºWXPayçš„å¯¹è±¡ï¼Œå°†configå’ŒnotifyUrlä¼ å…¥è¿›å»ï¼Œç„¶åè°ƒç”¨&lt;strong&gt;unifiedOrder()&lt;/strong&gt;æ–¹æ³•æŠŠmapä¼ å…¥è¿›å»å°±å¯ä»¥åˆ›å»ºè®¢å•äº†ï¼Œå…¶å®å†…éƒ¨å°±æ˜¯æŠŠappidè¿™å‡ ä¸ªå‚æ•°æ”¾åœ¨äº†æˆ‘ä»¬ä¼ å…¥çš„mapä¸­ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œæ”¾å…¥åˆ°mapä¸­ä¹Ÿæ˜¯OKçš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/RobodLee/image_store/raw/master/Java/%E7%95%85%E8%B4%AD%E5%95%86%E5%9F%8E12%EF%BC%9A%E6%8E%A5%E5%85%A5%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/%E5%88%9B%E5%BB%BA%E4%BA%8C%E7%BB%B4%E7%A0%81%E6%B5%8B%E8%AF%95.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æµ‹è¯•ä¸€ä¸‹ï¼ŒOKäº†ï¼ŒæˆåŠŸåˆ›å»ºäº†è®¢å•ï¼Œä¹Ÿæ‹¿åˆ°äº†äºŒç»´ç çš„åœ°å€ï¼Œæ¥ä¸‹æ¥åªè¦æŠŠ&lt;strong&gt;code_url&lt;/strong&gt;è½¬æ¢æˆäºŒç»´ç å›¾ç‰‡å°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæ˜¯åšæµ‹è¯•ï¼Œéšä¾¿åœ¨ç½‘ä¸Šæ‰¾ä¸ªäºŒç»´ç ç”Ÿæˆå™¨ï¼Œç„¶åæŠŠcode_urlå¤åˆ¶è¿‡å»å°±è¡Œäº†ã€‚åœ¨é¡¹ç›®ä¸­æ˜¯ç”¨&lt;strong&gt;qrious&lt;/strong&gt;ç”Ÿæˆã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-html&quot;&gt;&amp;lt;html&amp;gt;
&amp;lt;head&amp;gt;
&amp;lt;title&amp;gt;äºŒç»´ç å…¥é—¨å°demo&amp;lt;/title&amp;gt;
&amp;lt;!--1.å¼•å…¥js  2. åˆ›å»ºä¸€ä¸ªimgæ ‡ç­¾ ç”¨æ¥å­˜å‚¨æ˜¾ç¤ºäºŒç»´ç çš„å›¾ç‰‡ 3.åˆ›å»ºjså¯¹è±¡ 4.è®¾ç½®jså¯¹è±¡çš„é…ç½®é¡¹--&amp;gt;
&amp;lt;script src=&quot;qrious.js&quot;&amp;gt; &amp;lt;/script&amp;gt;        &amp;lt;!--ä¸‹è½½qrious.jsåå¼•å…¥--&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
&amp;lt;img id=&quot;myqrious&quot; &amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;script&amp;gt;
   var qrious = new QRious({
                 element:document.getElementById(&quot;myqrious&quot;),// æŒ‡å®šçš„æ˜¯å›¾ç‰‡æ‰€åœ¨çš„DOMå¯¹è±¡
                 size:250,//æŒ‡å®šå›¾ç‰‡çš„åƒç´ å¤§å°
                 level:'H',//æŒ‡å®šäºŒç»´ç çš„å®¹é”™çº§åˆ«(H:å¯ä»¥æ¢å¤30%çš„æ•°æ®)
                 value:'weixin://wxpay/bizpayurl?pr=xKlU7lD'//æŒ‡å®šäºŒç»´ç å›¾ç‰‡ä»£è¡¨çš„çœŸæ­£çš„å€¼
   })
&amp;lt;/script&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;æŸ¥è¯¢è®¢å•çŠ¶æ€&quot;&gt;æŸ¥è¯¢è®¢å•çŠ¶æ€&lt;/h2&gt;
&lt;p&gt;æœ‰æ—¶å€™å¯èƒ½å› ä¸ºç½‘ç»œåŸå› å¯¼è‡´æ”¯ä»˜çŠ¶æ€æ²¡æœ‰åŠæ—¶è¿”å›åˆ°æˆ‘ä»¬çš„æœåŠ¡å™¨ä¸­ï¼Œè¿™ä¸ªæ—¶å€™å°±è¦æ‰‹åŠ¨åœ°å»æŸ¥è¯¢äº†ï¼Œä»£ç å¾ˆç®€å•ï¼Œæˆ‘å°±ä¸å¤šè¯´äº†ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;//WeChatPayController
@GetMapping(value = &quot;/status/query&quot;)
public Result&amp;lt;Map&amp;lt;String,String&amp;gt;&amp;gt; queryPayStatus(@RequestParam String outTradeNo) {
    Map&amp;lt;String,String&amp;gt; resultMap = weChatPayService.queryPayStatus(outTradeNo);
    return new Result&amp;lt;&amp;gt;(true, StatusCode.OK,&quot;è®¢å•æŸ¥è¯¢æˆåŠŸ&quot;,resultMap);
}
--------------------------------------------------------------------------------------
//WeChatPayServiceImpl
@Override
public Map&amp;lt;String, String&amp;gt; queryPayStatus(String outTradeNo) {
    try {
        Map&amp;lt;String, String&amp;gt; map = new HashMap&amp;lt;&amp;gt;();
        map.put(&quot;out_trade_no&quot;, outTradeNo);      //å•†æˆ·è®¢å•å·
        MyWXPayConfig config = new MyWXPayConfig(appId,mcnId, key);
        WXPay wxpay = new WXPay(config,notifyUrl);
        Map&amp;lt;String, String&amp;gt; response = wxpay.orderQuery(map);
        if (response == null || response.size() == 0) {
            throw new RuntimeException(&quot;è®¢å•æŸ¥è¯¢å¤±è´¥&quot;);
        }
        return response;
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æµ‹è¯•ä¸€ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/RobodLee/image_store/raw/master/Java/%E7%95%85%E8%B4%AD%E5%95%86%E5%9F%8E12%EF%BC%9A%E6%8E%A5%E5%85%A5%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/%E8%AE%A2%E5%8D%95%E6%9F%A5%E8%AF%A2%E6%B5%8B%E8%AF%95.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;æ”¯ä»˜ç»“æœå›è°ƒé€šçŸ¥åŠrabbitmqç›‘å¬&quot;&gt;æ”¯ä»˜ç»“æœå›è°ƒé€šçŸ¥åŠRabbitMQç›‘å¬&lt;/h2&gt;
&lt;p&gt;è¦å®ç°æ”¯ä»˜ç»“æœå›è°ƒé€šçŸ¥ï¼Œé¦–å…ˆå¾—å‘Šè¯‰å¾®ä¿¡æ”¯ä»˜çš„æœåŠ¡å™¨æˆ‘ä»¬çš„æ”¯ä»˜ç»“æœå›è°ƒé€šçŸ¥çš„åœ°å€ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰å…¬ç½‘IPï¼Œæ‰€ä»¥å¾®ä¿¡æœåŠ¡å™¨æ²¡åŠæ³•ä¸»åŠ¨å‘æ¶ˆæ¯åˆ°æˆ‘ä»¬çš„æœåŠ¡å™¨ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨å†…ç½‘ç©¿é€ã€‚æˆ‘é€‰æ‹©çš„æ˜¯uToolsçš„ä¸€ä¸ªå†…ç½‘ç©¿é€æ’ä»¶ï¼Œä¸ç”¨æ³¨å†Œè´¦å·å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå¾ˆæ–¹ä¾¿ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/RobodLee/image_store/raw/master/Java/%E7%95%85%E8%B4%AD%E5%95%86%E5%9F%8E12%EF%BC%9A%E6%8E%A5%E5%85%A5%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/utools%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç„¶å&lt;strong&gt;å°†å†…ç½‘ç©¿é€çš„åœ°å€é…ç½®åˆ°ä¹‹å‰é…ç½®notify_urlçš„åœ°æ–¹&lt;/strong&gt;å°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-yml&quot;&gt;# æ”¯ä»˜å›è°ƒåœ°å€
notify_url: http://robod123.cn1.utools.club/wechat/pay/notify/url
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ¥ä¸‹æ¥å°±è¯¥é…ç½®RabbitMQäº†ï¼Œé¦–å…ˆå¾—&lt;strong&gt;åœ¨è™šæ‹Ÿæœºä¸­å®‰è£…RabbitMQ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;docker pull docker.io/rabbitmq:3.7-management                  # ä¸‹è½½rabbitmqçš„é•œåƒ
docker run --name rabbitmq -d -p 15672:15672 -p 5672:5672 4b23cfb64730  # å®‰è£…rabbitmqï¼Œæœ€åé¢çš„idæ˜¯docker imagesæŸ¥å‡ºæ¥çš„
docker exec -it rabbitmq /bin/bash                                              # è¿›å…¥åˆ°rabbitmqä¸­
rabbitmqctl add_user root 123456                                                # æ·»åŠ ä¸€ä¸ªåä¸ºrootçš„ç”¨æˆ·ï¼Œå¯†ç ä¸º123456
rabbitmqctl set_permissions -p / root &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;      # èµ‹äºˆrootç”¨æˆ·æ‰€æœ‰æƒé™
rabbitmqctl set_user_tags root administrator                    # èµ‹äºˆrootç”¨æˆ·administratorè§’è‰²
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å› ä¸ºæ”¯ä»˜å¾®æœåŠ¡å’Œè®¢å•å¾®æœåŠ¡éƒ½ç”¨åˆ°äº†RabbitMQï¼Œæ‰€ä»¥åœ¨è¿™ä¸¤ä¸ªå¾®æœåŠ¡ä¸­æ·»åŠ mqçš„ä¾èµ–&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-xml&quot;&gt;&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;spring-boot-starter-amqp&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç„¶ååœ¨è¿™ä¸¤ä¸ªå¾®æœåŠ¡ä¸­æ·»åŠ rabbitmqçš„é…ç½®ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-yml&quot;&gt;spring:                 # é…ç½®rabbitmqçš„ipå’Œç«¯å£
  rabbitmq:
    host: 192.168.31.200
    port: 5672
    username: root
    password: 123456
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ¥ç€å°±å»æ·»åŠ exchangeå’Œqueueäº†ï¼Œè§†é¢‘ä¸­æ˜¯ç”¨ç¨‹åºè‡ªåŠ¨åˆ›å»ºçš„ï¼Œä½†æ˜¯æˆ‘é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯è®¢å•å¾®æœåŠ¡å¯åŠ¨çš„æ—¶å€™æŠ¥äº†ä¸€ä¸ªé”™ï¼Œå¯¼è‡´æœåŠ¡å¯åŠ¨ä¸äº†ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-properties&quot;&gt;org.springframework.amqp.rabbit.listener.QueuesNotAvailableException: Cannot prepare queue for listener. Either the queue doesn't exist or the broker will not allow us to use it.
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ‰€ä»¥æˆ‘å°±åœ¨ç½‘é¡µç«¯æ‰‹åŠ¨åˆ›å»ºexchangeå’Œqueueäº†ï¼Œå¹¶æŒ‡å®šrouting keyå°†exchangeå’Œqueueç»‘å®šèµ·æ¥ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/RobodLee/image_store/raw/master/Java/%E7%95%85%E8%B4%AD%E5%95%86%E5%9F%8E12%EF%BC%9A%E6%8E%A5%E5%85%A5%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/exchange%E5%92%8Cqueue.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;é…ç½®çš„éƒ¨åˆ†åˆ°è¿™é‡Œå°±å·²ç»å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥å»å†™ä»£ç äº†ï¼Œä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œæˆ‘ç”»äº†ä¸€å¼ æµç¨‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/RobodLee/image_store/raw/master/Java/%E7%95%85%E8%B4%AD%E5%95%86%E5%9F%8E12%EF%BC%9A%E6%8E%A5%E5%85%A5%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E5%9B%9E%E8%B0%83%E9%80%9A%E7%9F%A5%E5%8F%8Amq%E7%9B%91%E5%90%AC.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä»£ç æˆ‘å°±ä¸å»è§£é‡Šäº†ï¼Œç›´æ¥è´´äº†ï¼Œå¯¹ç…§ç€è¿™å¼ æµç¨‹å›¾åº”è¯¥å°±èƒ½çœ‹æ‡‚äº†ã€‚è§†é¢‘ä¸­æåˆ°çš„ä¸¤ä¸ªå°ä½œä¸šæˆ‘ä¹Ÿå†™äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;WeChatPayController&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;/**
 * æ”¯ä»˜ç»“æœå›è°ƒé€šçŸ¥
 * @param request
 * @return
 * @throws Exception
 */
@RequestMapping(&quot;/notify/url&quot;)
public String notifyUrl(HttpServletRequest request) throws Exception {
    ServletInputStream inputStream = request.getInputStream();
    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
    byte[] buffer = new byte[1024];
    int len = 0;
    while ((len = inputStream.read(buffer))!=-1) {
        outputStream.write(buffer,0,len);
    }
    String xmlString = outputStream.toString(&quot;UTF-8&quot;);

    //å°†javaå¯¹è±¡è½¬æ¢æˆamqpæ¶ˆæ¯å‘é€å‡ºå»ï¼Œè°ƒç”¨çš„æ˜¯sendæ–¹æ³•
    rabbitTemplate.convertAndSend(&quot;exchange.order&quot;,&quot;routing.order&quot;, xmlString);

    return  &quot;&amp;lt;xml&amp;gt;&amp;lt;return_code&amp;gt;&amp;lt;![CDATA[SUCCESS]]&amp;gt;&amp;lt;/return_code&amp;gt;&amp;lt;return_msg&amp;gt;&amp;lt;![CDATA[OK]]&amp;gt;&amp;lt;/return_msg&amp;gt;&amp;lt;/xml&amp;gt;&quot;;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;OrderMessageListener&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Component
@RabbitListener(queues = {&quot;queue.order&quot;})
public class OrderMessageListener {

    private final static String SUCCESS = &quot;SUCCESS&quot;;

    @Autowired
    private OrderService orderService;

    @Autowired
    private WeChatPayFeign weChatPayFeign;

    /**
     * ç›‘å¬mqçš„æ¶ˆæ¯
     * @param message xmlæ ¼å¼çš„æ¶ˆæ¯
     */
    @RabbitHandler
    public void getMessage(String message) throws Exception {
        Map&amp;lt;String, String&amp;gt; map = WXPayUtil.xmlToMap(message);
        String returnCode = map.getOrDefault(&quot;return_code&quot;,&quot;&quot;);     //è¿”å›çŠ¶æ€ç 
        String resultCode = map.getOrDefault(&quot;result_code&quot;,&quot;&quot;);     //ä¸šåŠ¡ç»“æœ
        if (SUCCESS.equals(returnCode)) {   //æ”¯ä»˜æˆåŠŸï¼Œä¿®æ”¹è®¢å•çŠ¶æ€
            String outTradeNo = map.get(&quot;out_trade_no&quot;);    //å•†æˆ·è®¢å•å·
            if (! SUCCESS.equals(resultCode)) { //äº¤æ˜“å¤±è´¥ï¼Œå…³é—­è®¢å•ï¼Œä»æ•°æ®åº“ä¸­å°†è®¢å•çŠ¶æ€ä¿®æ”¹ä¸ºæ”¯ä»˜å¤±è´¥ï¼Œå›æ»šåº“å­˜
                Map&amp;lt;String, String&amp;gt; closeResult = weChatPayFeign.closeOrder(outTradeNo).getData();  //å…³é—­è®¢å•æ—¶æœåŠ¡å™¨è¿”å›çš„æ•°æ®
                //å¦‚æœé”™è¯¯ä»£ç ä¸ºORDERPAIDåˆ™è¯´æ˜è®¢å•å·²ç»æ”¯ä»˜ï¼Œå½“ä½œæ­£å¸¸è®¢å•å¤„ç†,åä¹‹ å›æ»šåº“å­˜
                if (!(&quot;FAIL&quot;.equals(closeResult.get(&quot;result_code&quot;)) &amp;amp;&amp;amp; &quot;ORDERPAID&quot;.equals(closeResult.get(&quot;err_code&quot;)))) {
                    orderService.deleteOrder(outTradeNo);
                    return;
                }
            }
            String transactionId = map.get(&quot;transaction_id&quot;);   //å¾®ä¿¡æ”¯ä»˜è®¢å•å·
            String timeEnd = map.get(&quot;time_end&quot;);               //æ”¯ä»˜å®Œæˆæ—¶é—´
            orderService.updateStatus(outTradeNo,timeEnd,transactionId);
        }
    }

}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;OrderServiceImpl&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Override
public void updateStatus(String outTradeNo,String timeEnd,String transactionId) {
    Order order = orderMapper.findById(outTradeNo);
    LocalDateTime payTime = LocalDateTime.parse(timeEnd, DateTimeFormatter.ofPattern(&quot;yyyyMMddHHmmss&quot;));

    order.setPayStatus(&quot;1&quot;);                //æ”¯ä»˜çŠ¶æ€ä¿®æ”¹ä¸º1è¡¨ç¤ºå·²æ”¯ä»˜
    order.setTransactionId(transactionId);  //äº¤æ˜“æµæ°´å·
    order.setPayTime(payTime);              //äº¤æ˜“æ—¶é—´

    orderMapper.updateByPrimaryKey(order);
}

@Override
public void deleteOrder(String outTradeNo) {
    Order order = orderMapper.findById(outTradeNo);
    LocalDateTime time = LocalDateTime.now();
    //ä¿®æ”¹çŠ¶æ€
    order.setPayStatus(&quot;2&quot;);    //äº¤æ˜“å¤±è´¥
    order.setUpdateTime(time);
    //æäº¤åˆ°æ•°æ®åº“
    orderMapper.updateByPrimaryKey(order);
    //å›æ»šåº“å­˜
    List&amp;lt;OrderItem&amp;gt; orderItems = orderItemMapper.findByOrderId(order.getId());
    List&amp;lt;Long&amp;gt; skuIds = new ArrayList&amp;lt;&amp;gt;();
    for (OrderItem orderItem : orderItems) {
        skuIds.add(orderItem.getSkuId());
    }
    List&amp;lt;Sku&amp;gt; skuList = skuFeign.findBySkuIds(order.getSkuIds()).getData(); //æ•°æ®åº“ä¸­å¯¹åº”çš„skué›†åˆ
    Map&amp;lt;Long, Sku&amp;gt; skuMap = skuList.stream().collect(Collectors.toMap(Sku::getId, a -&amp;gt; a));
    for (OrderItem orderItem : orderItems) {
        Sku sku = skuMap.get(orderItem.getSkuId());
        sku.setNum(sku.getNum()+orderItem.getNum());    //åŠ åº“å­˜
    }
    skuFeign.updateMap(skuMap);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;å®šæ—¶å¤„ç†è®¢å•çŠ¶æ€&quot;&gt;å®šæ—¶å¤„ç†è®¢å•çŠ¶æ€&lt;/h2&gt;
&lt;p&gt;å½“åˆ›å»ºä¸€ä¸ªè®¢å•åï¼Œå¯èƒ½ç”¨æˆ·å¹¶ä¸ä¼šå»æ”¯ä»˜ï¼Œæˆ–è€…æ˜¯å› ä¸ºç½‘ç»œçš„åŸå› å¯¼è‡´æˆ‘ä»¬è·å–ä¸åˆ°ç”¨æˆ·æ”¯ä»˜çš„ç»“æœã€‚æ‰€ä»¥å¯ä»¥é‡‡ç”¨å®šæ—¶å¤„ç†çš„æ–¹å¼ï¼Œå…·ä½“çš„æ“ä½œå°±æ˜¯ä¸‹å•æˆåŠŸåå°±å¾€mqçš„é˜Ÿåˆ—1ä¸­å‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œè®¾ç½®30åˆ†é’Ÿè¿‡æœŸï¼Œè¿‡æœŸåå°†æ¶ˆæ¯å‘é€ç»™é˜Ÿåˆ—2ï¼Œç„¶åæˆ‘ä»¬ç›‘å¬é˜Ÿåˆ—2ã€‚è¿™æ ·ä¸€æ—¦ç›‘å¬åˆ°äº†é˜Ÿåˆ—2çš„æ¶ˆæ¯ï¼Œåˆ™è¯´æ˜ç¦»ä¸‹å•å·²ç»è¿‡å»äº†30åˆ†é’Ÿï¼Œè¿™æ—¶å€™æˆ‘ä»¬å»æŸ¥è¯¢ä¸€ä¸‹è®¢å•çŠ¶æ€ï¼Œå¦‚æœæ˜¯å·²æ”¯ä»˜å°±ä¸å»ç®¡å®ƒï¼Œè¦æ˜¯æœªæ”¯ä»˜çš„è¯å°±é€šçŸ¥å¾®ä¿¡æœåŠ¡å™¨å…³é—­è®¢å•ï¼Œç„¶åä»æ•°æ®åº“ä¸­åˆ é™¤è®¢å•ã€‚ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œæˆ‘ç”»äº†ä¸€å¼ æµç¨‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/RobodLee/image_store/raw/master/Java/%E7%95%85%E8%B4%AD%E5%95%86%E5%9F%8E12%EF%BC%9A%E6%8E%A5%E5%85%A5%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/%E5%AE%9A%E6%97%B6%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B%E5%9B%BE.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä»£ç æŒºç®€å•çš„ï¼Œé¦–å…ˆå°†æ·»åŠ ä¸€ä¸ªé…ç½®ç±»å»æŠŠ&lt;strong&gt;é˜Ÿåˆ—åˆ›å»ºå‡ºæ¥&lt;/strong&gt;ï¼Œç›´æ¥åœ¨webé¡µé¢ä¸Šé…ç½®ä¹Ÿæ˜¯OKçš„ï¼Œä¸è¿‡ä¸Šä¸€èŠ‚æ˜¯åœ¨webé¡µé¢é…ç½®çš„ï¼Œè¿™ä¸ªå°±åœ¨ç¨‹åºä¸­æ·»åŠ å§ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Configuration
public class MqConfig {

    //é˜Ÿåˆ—1ï¼Œå»¶æ—¶é˜Ÿåˆ—ï¼Œæ¶ˆæ¯è¿‡æœŸåå‘é€ç»™é˜Ÿåˆ—2
    @Bean
    public Queue orderDelayQueue() {
        return QueueBuilder
                .durable(&quot;orderDelayQueue&quot;)
                //orderDelayQueueé˜Ÿåˆ—ä¿¡æ¯ä¼šè¿‡æœŸï¼Œè¿‡æœŸä¹‹åï¼Œè¿›å…¥åˆ°æ­»ä¿¡é˜Ÿåˆ—ï¼Œæ­»ä¿¡é˜Ÿåˆ—æ•°æ®ç»‘å®šåˆ°å…¶ä»–äº¤æ¢æœº
                .withArgument(&quot;x-dead-letter-exchange&quot;,&quot;orderListenerExchange&quot;)
                .withArgument(&quot;x-dead-letter-routing-key&quot;,&quot;orderListenerRoutingKey&quot;) //ç»‘å®šæŒ‡å®šçš„routing-key
                .build();
    }

    //é˜Ÿåˆ—2
    @Bean(name = &quot;orderListenerQueue&quot;)  //åç§°ä¸å†™é»˜è®¤å°±æ˜¯æ–¹æ³•å
    public Queue orderListenerQueue() {
        return new Queue(&quot;orderListenerQueue&quot;,true);
    }

    //åˆ›å»ºäº¤æ¢æœº
    @Bean
    public Exchange orderListenerExchange() {
        return new DirectExchange(&quot;orderListenerExchange&quot;);
    }

    //é˜Ÿåˆ—queue2ç»‘å®šexchange
    @Bean
    public Binding orderListenerBinding(Queue orderListenerQueue,Exchange orderListenerExchange) {
        return BindingBuilder
                .bind(orderListenerQueue)
                .to(orderListenerExchange)
                .with(&quot;orderListenerRoutingKey&quot;)
                .noargs();
    }

}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨åˆ›å»ºé˜Ÿåˆ—1çš„æ—¶å€™ï¼Œé…ç½®äº†å°†æ­»ä¿¡é˜Ÿåˆ—çš„æ•°æ®ç»‘å®šåˆ°é˜Ÿåˆ—2çš„äº¤æ¢æœºä¸Šï¼Œè¿™æ ·æ•°æ®è¿‡æœŸåå°±ä¼šè¢«å‘é€åˆ°é˜Ÿåˆ—2ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶å&lt;strong&gt;åœ¨åˆ›å»ºè®¢å•çš„æ—¶å€™å°†è®¢å•å·å‘é€åˆ°é˜Ÿåˆ—1ä¸­&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;//OrderServiceImpl
@Override
public synchronized void add(Order order) {
        order.setId(String.valueOf(idWorker.nextId()));
    â€¦â€¦â€¦â€¦
    rabbitTemplate.convertAndSend(&quot;orderDelayQueue&quot;, (Object)order.getId(), new MessagePostProcessor() {
        @Override
        public Message postProcessMessage(Message message) throws AmqpException {
            message.getMessageProperties().setExpiration(&quot;30*60*1000&quot;);   //å®šæ—¶30minåè¿‡æ—¶
            return message;
        }
    });
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;ç›‘å¬é˜Ÿåˆ—2ç„¶åæ‰§è¡Œç›¸åº”çš„æ“ä½œ&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Component
@RabbitListener(queues = &quot;orderListenerQueue&quot;)
public class DelayMessageQueueListener {

    @Autowired
    private OrderService orderService;

    @Autowired
    private WeChatPayFeign weChatPayFeign;

    @RabbitHandler
    public void getMessage(String orderId) throws Exception {
        Order order = orderService.findById(orderId);
        if (&quot;0&quot;.equals(order.getPayStatus())) {
            //0è¡¨ç¤ºæœªæ”¯ä»˜ï¼Œé€šçŸ¥å¾®ä¿¡æœåŠ¡å™¨å–æ¶ˆè®¢å•ï¼Œä»æ•°æ®åº“ä¸­åˆ é™¤è®¢å•ï¼Œå›æ»šåº“å­˜
            Map&amp;lt;String, String&amp;gt; closeResult = weChatPayFeign.closeOrder(orderId).getData();
            //å¦‚æœé”™è¯¯ä»£ç ä¸ºORDERPAIDåˆ™è¯´æ˜è®¢å•å·²ç»æ”¯ä»˜ï¼Œå½“ä½œæ­£å¸¸è®¢å•å¤„ç†,åä¹‹ å›æ»šåº“å­˜
            if (!(&quot;FAIL&quot;.equals(closeResult.get(&quot;result_code&quot;)) &amp;amp;&amp;amp; &quot;ORDERPAID&quot;.equals(closeResult.get(&quot;err_code&quot;)))) {
                orderService.deleteOrder(orderId);
            }
        }
    }

}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;OKï¼Œè¿™æ ·å°±å¯ä»¥å®šæ—¶å»å¤„ç†è®¢å•æ•°æ®äº†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;è¿™ç¯‡æ–‡ç« ä¸»è¦å°±æ˜¯å®ç°äº†å¾®ä¿¡æ‰«ç æ”¯ä»˜ï¼Œå› ä¸ºå¾®ä¿¡æä¾›çš„sdkæœ‰ç‚¹é—®é¢˜ï¼Œè¿˜æ˜¯èŠ±äº†ä¸€äº›æ—¶é—´çš„ï¼Œä¸è¿‡æœ€åè¿˜æ˜¯å®Œæˆäº†ã€‚ç„¶ååˆå®ç°äº†æ”¯ä»˜ç»“æœå›è°ƒé€šçŸ¥å’Œrabbitmqç›‘å¬çš„åŠŸèƒ½ï¼Œç”¨åˆ°äº†å†…ç½‘ç©¿é€ã€‚æœ€åä½¿ç”¨ä¸¤ä¸ªé˜Ÿåˆ—æ¥å®ç°äº†å®šæ—¶å¤„ç†è®¢å•ã€‚è¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯æˆ‘æ²¡ç³»ç»Ÿåœ°å­¦è¿‡RabbitMQï¼Œæ‰€ä»¥å¯¹äºå¾ˆå¤šæ“ä½œéƒ½æ˜¯ä¸€çŸ¥åŠè§£çš„ï¼Œéƒ½æ˜¯å‚è€ƒç€è§†é¢‘ä¸­è®²çš„ç„¶åå†è‡ªå·±æ‘¸ç´¢æ‘¸ç´¢webé¡µé¢çš„é…ç½®ï¼ŒåæœŸæˆ‘ä¼šç³»ç»Ÿåœ°å­¦ä¹ ä¸€ä¸‹RabbitMQç„¶åå†æ€»ç»“å‡ºä¸€ç¯‡æ–‡ç« ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;7.0682926829268&quot;&gt;
&lt;p&gt;å¦‚æœè§‰å¾—æˆ‘å†™çš„è¿˜å¯ä»¥ï¼Œè¯·ä¸è¦åå•¬ä½ çš„ &lt;code&gt;èµ&lt;/code&gt; &lt;code&gt;èµ&lt;/code&gt; &lt;code&gt;èµ&lt;/code&gt; ï¼&lt;/p&gt;
&lt;p&gt;ä»£ç ï¼š&lt;a href=&quot;https://github.com/RobodLee/changgou&quot;&gt;https://github.com/RobodLee/changgou&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡å·²æ”¶å½•è‡³æˆ‘çš„Githubä»“åº“&lt;a href=&quot;https://github.com/RobodLee/DayDayUP&quot;&gt;&lt;strong&gt;DayDayUP&lt;/strong&gt;&lt;/a&gt;ï¼šgithub.com/RobodLee/DayDayUPï¼Œæ¬¢è¿Star&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/RobodLee/image_store/raw/master/QRcode2.0.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Thu, 10 Sep 2020 23:32:00 +0000</pubDate>
<dc:creator>Robodä¸¶</dc:creator>
<og:description>å¥½å¥½å­¦ä¹ ï¼Œå¤©å¤©å‘ä¸Š æœ¬æ–‡å·²æ”¶å½•è‡³æˆ‘çš„Githubä»“åº“DayDayUPï¼šgithub.com/RobodLee/DayDayUPï¼Œæ¬¢è¿Star ç•…è´­å•†åŸ(ä¸€)ï¼šç¯å¢ƒæ­å»º ç•…è´­å•†åŸ(äºŒ)ï¼šåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»ŸF</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/robod/p/13649569.html</dc:identifier>
</item>
<item>
<title>ã€Flutter å®æˆ˜ã€‘1.20ç‰ˆæœ¬æ›´æ–°åŠæ–°å¢ç»„ä»¶ - è€å­ŸFlutter</title>
<link>http://www.cnblogs.com/mengqd/p/13649555.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/mengqd/p/13649555.html</guid>
<description>&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/467322/202009/467322-20200911070743545-770110016.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;&lt;strong&gt;è€å­Ÿå¯¼è¯»&lt;/strong&gt;ï¼šFlutter 1.20 æ›´æ–°äº† Sliderã€RangeSliderã€æ—¥æœŸé€‰æ‹©å™¨ç»„ä»¶ã€æ—¶é—´é€‰æ‹©å™¨ç»„ä»¶çš„æ ·å¼ï¼Œæ–°å¢äº†äº¤æ¢ç»„ä»¶ï¼šInteractiveViewerï¼Œä¸‹é¢è¯¦ç»†ä»‹ç»å…¶ç”¨æ³•ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;æ»‘å—&quot;&gt;æ»‘å—&lt;/h2&gt;
&lt;p&gt;Flutter 1.20 ç‰ˆæœ¬å°† &lt;strong&gt;Slider&lt;/strong&gt; å’Œ &lt;strong&gt;RangeSlider&lt;/strong&gt; å°éƒ¨ä»¶æ›´æ–°ä¸ºæœ€æ–°çš„ Material å‡†åˆ™ã€‚æ–°çš„æ»‘å—åœ¨è®¾è®¡æ—¶è€ƒè™‘åˆ°äº†æ›´å¥½çš„å¯è®¿é—®æ€§ï¼šè½¨é“æ›´é«˜ï¼Œæ»‘å—å¸¦æœ‰é˜´å½±ï¼Œå¹¶ä¸”å€¼æŒ‡ç¤ºå™¨å…·æœ‰æ–°çš„å½¢çŠ¶å’Œæ”¹è¿›çš„æ–‡æœ¬ç¼©æ”¾æ”¯æŒã€‚&lt;/p&gt;
&lt;h3 id=&quot;slider&quot;&gt;Slider&lt;/h3&gt;
&lt;p&gt;åŸºç¡€ç”¨æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;class SliderDemo extends StatefulWidget {
  @override
  _SliderDemoState createState() =&amp;gt; _SliderDemoState();
}

class _SliderDemoState extends State&amp;lt;SliderDemo&amp;gt; {
  double _sliderValue = 0;

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(),
      body: Center(
        child: Column(
          mainAxisSize: MainAxisSize.min,
          children: [
            Text('å€¼ï¼š$_sliderValue'),
            Slider(
              value: _sliderValue,
              onChanged: (v){
                setState(() {
                  _sliderValue = v;
                });
              },
            )
          ],
        ),
      ),
    );
  }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;value&lt;/strong&gt;ï¼šå½“å‰å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;onChanged&lt;/strong&gt;ï¼šæ»‘å—å€¼æ”¹å˜æ—¶å›è°ƒã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2f5f3bad0b5e4778bd262a72b67f121a~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;çœ‹çœ‹ Flutter 1.20 ç‰ˆæœ¬ä»¥å‰çš„æ ·å¼ï¼ˆæˆ‘çš„çè—ï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/202ded80d62a4eb6bb6b39a2bd636212~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ˜æ˜¾çš„æ„Ÿè§‰å°±æ˜¯æ»‘å—è½¨é“å˜ç²—äº†ï¼Œæ»‘å—å˜çš„æ›´æœ‰ç«‹ä½“æ„Ÿï¼ˆåŠ äº†é˜´å½±ï¼‰äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Slider&lt;/strong&gt; é»˜è®¤æ»‘åŠ¨èŒƒå›´æ˜¯ 0-1ï¼Œä¿®æ”¹ä¸º 1-100:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;Slider(
  value: _sliderValue,
  min: 1,
  max: 100,
  onChanged: (v){
    setState(() {
      _sliderValue = v;
    });
  },
)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ec2623b7b64d44d1a365c332f51b10d1~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è®¾ç½®æ»‘å—çš„æ»‘åŠ¨ä¸º &lt;strong&gt;ç¦»æ•£çš„&lt;/strong&gt;ï¼Œå³æ»‘åŠ¨å€¼ä¸º 0ã€25 ã€50ã€75 100ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;Slider(
  value: _sliderValue,
  min: 0,
  max: 100,
  divisions: 4,
  onChanged: (v){
    setState(() {
      _sliderValue = v;
    });
  },
)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fe7a1bea7784483caa29587029a0e3eb~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è®¾ç½®æ ‡ç­¾ï¼Œæ»‘åŠ¨è¿‡ç¨‹ä¸­åœ¨å…¶ä¸Šæ–¹æ˜¾ç¤ºï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;Slider(
  value: _sliderValue,
  label: '$_sliderValue',
  min: 0,
  max: 100,
  divisions: 4,
  onChanged: (v){
    setState(() {
      _sliderValue = v;
    });
  },
)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/19e389ce842c47baa5329f668b3739cb~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;çœ‹çœ‹ Flutter 1.20 ç‰ˆæœ¬ä»¥å‰çš„æ ·å¼ï¼ˆä¾ç„¶æ˜¯æˆ‘çš„çè—ï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b67b25dc51ed4c6cbfdb88642e79a9c7~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¸ªäººæ„Ÿè§‰ä»¥å‰çš„æ›´å¥½çœ‹ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯å®˜æ–¹ç»™çš„ &lt;strong&gt;Slider&lt;/strong&gt; ç»“æ„å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7a05e5da94754de7abbef42682a74470~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;1&lt;/strong&gt; ï¼šè½¨é“ï¼ˆTrackï¼‰ï¼Œ1 å’Œ 4 æ˜¯æœ‰åŒºåˆ«çš„ï¼Œ1 æŒ‡çš„æ˜¯åº•éƒ¨æ•´ä¸ªè½¨é“ï¼Œè½¨é“æ˜¾ç¤ºäº†å¯ä¾›ç”¨æˆ·é€‰æ‹©çš„èŒƒå›´ã€‚å¯¹äºä»å·¦åˆ°å³ï¼ˆLTRï¼‰çš„è¯­è¨€ï¼Œæœ€å°å€¼å‡ºç°åœ¨è½¨é“çš„æœ€å·¦ç«¯ï¼Œè€Œæœ€å¤§å€¼å‡ºç°åœ¨æœ€å³ç«¯ã€‚å¯¹äºä»å³åˆ°å·¦ï¼ˆRTLï¼‰çš„è¯­è¨€ï¼Œæ­¤æ–¹å‘æ˜¯ç›¸åçš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;2&lt;/strong&gt;ï¼šæ»‘å—ï¼ˆThumbï¼‰ï¼Œä½ç½®æŒ‡ç¤ºå™¨ï¼Œå¯ä»¥æ²¿ç€è½¨é“ç§»åŠ¨ï¼Œæ˜¾ç¤ºå…¶ä½ç½®çš„é€‰å®šå€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;3&lt;/strong&gt;ï¼šæ ‡ç­¾ï¼ˆlabelï¼‰ï¼Œæ˜¾ç¤ºä¸æ»‘å—çš„ä½ç½®ç›¸å¯¹åº”çš„ç‰¹å®šæ•°å­—å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;4&lt;/strong&gt;ï¼šåˆ»åº¦æŒ‡ç¤ºå™¨ï¼ˆTick markï¼‰ï¼Œè¡¨ç¤ºç”¨æˆ·å¯ä»¥å°†æ»‘å—ç§»åŠ¨åˆ°çš„é¢„å®šå€¼ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;è‡ªå®šä¹‰æ»‘å— &lt;strong&gt;æ¿€æ´»çš„é¢œè‰²&lt;/strong&gt; å’Œ &lt;strong&gt;æœªæ¿€æ´»çš„é¢œè‰²&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;Slider(
  activeColor: Colors.red,
  inactiveColor: Colors.blue,
  value: _sliderValue,
  label: '$_sliderValue',
  min: 0,
  max: 100,
  divisions: 4,
  onChanged: (v){
    setState(() {
      _sliderValue = v;
    });
  },
)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3ab5186cc90e46309165ee05ab7054ef~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªè‡ªå®šä¹‰æ¯”è¾ƒç¬¼ç»Ÿï¼Œä¸‹é¢æ¥ä¸€ä¸ªæ›´ç»†è‡´çš„è‡ªå®šä¹‰ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;SliderTheme(
  data: SliderTheme.of(context).copyWith(
      activeTrackColor: Color(0xff404080),
      thumbColor: Colors.blue,
      overlayColor: Colors.green,
      valueIndicatorColor: Colors.purpleAccent),
  child: Slider(
    value: _sliderValue,
    label: '$_sliderValue',
    min: 0,
    max: 100,
    divisions: 4,
    onChanged: (v) {
      setState(() {
        _sliderValue = v;
      });
    },
  ),
)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3cf9234077344ca8b758479781fcce21~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªåŸºæœ¬å¯ä»¥å®Œå…¨è‡ªå®šä¹‰æ ·å¼äº†ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚ä½•åœ¨ Flutter 1.20 ç‰ˆæœ¬ä½¿ç”¨ä»¥å‰çš„æ ‡ç­¾æ ·å¼å‘¢ï¼Ÿ&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;SliderTheme(
  data: SliderTheme.of(context).copyWith(
    valueIndicatorShape: PaddleSliderValueIndicatorShape(),
  ),
  child: Slider(
    value: _sliderValue,
    label: '$_sliderValue',
    min: 0,
    max: 100,
    divisions: 4,
    onChanged: (v) {
      setState(() {
        _sliderValue = v;
      });
    },
  ),
)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/91339995c55245a3a6b46e878ff5ba74~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;RectangularSliderValueIndicatorShape&lt;/strong&gt; è¡¨ç¤ºçŸ©å½¢æ ·å¼ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/44f886c15f44488cb67233cdaa416477~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;rangeslider&quot;&gt;RangeSlider&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;RangeSlider&lt;/strong&gt; å’Œ &lt;strong&gt;Slider&lt;/strong&gt; å‡ ä¹ä¸€æ ·ï¼Œ&lt;strong&gt;RangeSlider&lt;/strong&gt; æ˜¯èŒƒå›´æ»‘å—ï¼Œæƒ³è¦é€‰æ‹©ä¸€æ®µå€¼ï¼Œå¯ä»¥ä½¿ç”¨ RangeSliderã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;RangeValues _rangeValues = RangeValues(0, 25);

RangeSlider(
  values: _rangeValues,
  labels: RangeLabels('${_rangeValues.start}','${_rangeValues.end}'),
  min: 0,
  max: 100,
  divisions: 4,
  onChanged: (v) {
    setState(() {
      _rangeValues = v;
    });
  },
),
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/673482bd33b842cf8eff1bb7b5d1c809~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;æ»‘å—çŠ¶æ€&quot;&gt;æ»‘å—çŠ¶æ€&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/696cd01aa79b4876a25de81acc03de9a~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;iosé£æ ¼çš„-slider&quot;&gt;iosé£æ ¼çš„ Slider&lt;/h3&gt;
&lt;p&gt;iosé£æ ¼çš„ Sliderï¼Œä½¿ç”¨ CupertinoSliderï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;double _sliderValue = 0;
CupertinoSlider(
  value: _sliderValue,
  onChanged: (v) {
    setState(() {
      _sliderValue = v;
    });
  },
)

&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2ad0677f53f245aeafb640bc4b6702a3~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å½“ç„¶ä¹Ÿå¯ä»¥æ ¹æ®å¹³å°æ˜¾ç¤ºä¸åŒé£æ ¼çš„Sliderï¼Œioså¹³å°æ˜¾ç¤ºCupertinoSlideræ•ˆæœï¼Œå…¶ä»–å¹³å°æ˜¾ç¤ºMaterialé£æ ¼ï¼Œç”¨æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;Slider.adaptive(
  value: _sliderValue,
  onChanged: (v) {
    setState(() {
      _sliderValue = v;
    });
  },
)

&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;materialé£æ ¼æ—¥æœŸé€‰æ‹©å™¨&quot;&gt;Materialé£æ ¼æ—¥æœŸé€‰æ‹©å™¨&lt;/h2&gt;
&lt;p&gt;Flutter 1.20 ç‰ˆæœ¬æ›´æ–°äº† &lt;strong&gt;æ—¥æœŸ&lt;/strong&gt; ç±»ç»„ä»¶çš„æ ·å¼ï¼ŒåŠ å…¥äº†æ–°çš„ç´§å‡‘è®¾è®¡ä»¥åŠå¯¹æ—¥æœŸèŒƒå›´çš„æ”¯æŒã€‚&lt;/p&gt;
&lt;h3 id=&quot;showdatepicker&quot;&gt;showDatePicker&lt;/h3&gt;
&lt;h4 id=&quot;ç»“æ„å›¾&quot;&gt;ç»“æ„å›¾&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6088ae793e6641bc8d99e82f57dc09aa~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;æ ‡é¢˜&lt;/li&gt;
&lt;li&gt;é€‰ä¸­çš„æ—¥æœŸ&lt;/li&gt;
&lt;li&gt;åˆ‡æ¢åˆ°&lt;strong&gt;è¾“å…¥æ¨¡å¼&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹´&lt;/strong&gt;é€‰æ‹©èœå•&lt;/li&gt;
&lt;li&gt;æœˆä»½åˆ†é¡µ&lt;/li&gt;
&lt;li&gt;å½“å‰æ—¶é—´&lt;/li&gt;
&lt;li&gt;é€‰ä¸­æ—¥æœŸ&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;strong&gt;è¾“å…¥æ¨¡å¼&lt;/strong&gt; ç»“æ„å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4ef7b0da63964700a252c440cda3ff2a~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;æ ‡é¢˜&lt;/li&gt;
&lt;li&gt;é€‰ä¸­æ—¥æœŸ&lt;/li&gt;
&lt;li&gt;åˆ‡æ¢ &lt;strong&gt;æ—¥å†æ¨¡å¼&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;è¾“å…¥æ¡†&lt;/li&gt;
&lt;/ol&gt;&lt;h4 id=&quot;åŸºç¡€ç”¨æ³•&quot;&gt;åŸºç¡€ç”¨æ³•&lt;/h4&gt;
&lt;p&gt;ç‚¹å‡»æŒ‰é’®å¼¹å‡ºæ—¥æœŸç»„ä»¶ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt; RaisedButton(
          child: Text('å¼¹å‡ºæ—¥æœŸç»„ä»¶'),
          onPressed: () async {
            await showDatePicker(
              context: context,
              initialDate: DateTime.now(),
              firstDate: DateTime(2010),
              lastDate: DateTime(2025),
            );
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/af2826a53b094d7bacdced3bec75769d~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;initialDate&lt;/strong&gt;ï¼šåˆå§‹åŒ–æ—¶é—´ï¼Œé€šå¸¸æƒ…å†µä¸‹è®¾ç½®ä¸ºå½“å‰æ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;firstDate&lt;/strong&gt;ï¼šè¡¨ç¤ºå¼€å§‹æ—¶é—´ï¼Œä¸èƒ½é€‰æ‹©æ­¤æ—¶é—´å‰é¢çš„æ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;lastDate&lt;/strong&gt;ï¼šè¡¨ç¤ºç»“æŸæ—¶é—´ï¼Œä¸èƒ½é€‰æ‹©æ­¤æ—¶é—´ä¹‹åçš„æ—¶é—´ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;è®¾ç½®æ—¥æœŸé€‰æ‹©å™¨å¯¹è¯æ¡†çš„æ¨¡å¼ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;var result = await showDatePicker(
  context: context,
  initialDate: DateTime.now(),
  firstDate: DateTime(2010),
  lastDate: DateTime(2025),
  initialEntryMode: DatePickerEntryMode.input,
);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/34291704b20d49acb40452490cb5e331~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç›´æ¥æ˜¾ç¤º &lt;strong&gt;è¾“å…¥æ¨¡å¼&lt;/strong&gt;ï¼Œé»˜è®¤æ˜¯&lt;strong&gt;æ—¥å†æ¨¡å¼&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è®¾ç½®æ—¥å†æ—¥æœŸé€‰æ‹©å™¨çš„åˆå§‹æ˜¾ç¤ºï¼ŒåŒ…å« &lt;strong&gt;day&lt;/strong&gt; å’Œ &lt;strong&gt;year&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;var result = await showDatePicker(
  context: context,
  initialDate: DateTime.now(),
  firstDate: DateTime(2010),
  lastDate: DateTime(2025),
  initialDatePickerMode: DatePickerMode.year,
);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/82b04af824714f22a5b33de762462f45~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å’Œä»¥å‰çš„ç‰ˆæœ¬å¯¹æ¯”ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d678c5cd511e45db89255f730e049520~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è®¾ç½®é¡¶éƒ¨æ ‡é¢˜ã€å–æ¶ˆæŒ‰é’®ã€ç¡®å®šæŒ‰é’® æ–‡æ¡ˆï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;var result = await showDatePicker(
  context: context,
  initialDate: DateTime.now(),
  firstDate: DateTime(2010),
  lastDate: DateTime(2025),
  helpText: 'é€‰åˆ™æ—¥æœŸ',
  cancelText: 'å–æ¶ˆ',
  confirmText: 'ç¡®å®š',
);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0151351ddba0463998fa6e862caa428a~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¿®æ”¹ &lt;strong&gt;è¾“å…¥æ¨¡å¼&lt;/strong&gt; ä¸‹æ–‡æ¡ˆï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;var result = await showDatePicker(
  context: context,
  initialDate: DateTime.now(),
  firstDate: DateTime(2010),
  lastDate: DateTime(2025),
  errorFormatText: 'é”™è¯¯çš„æ—¥æœŸæ ¼å¼',
  errorInvalidText: 'æ—¥æœŸæ ¼å¼éæ³•',
  fieldHintText: 'æœˆ/æ—¥/å¹´',
  fieldLabelText: 'å¡«å†™æ—¥æœŸ',
);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b9a2e2eafd55479bbfc53a9c90efe454~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e8be7f26f2894fa7a0a1cd7091b561c4~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;è®¾ç½®å¯é€‰æ—¥æœŸèŒƒå›´&quot;&gt;è®¾ç½®å¯é€‰æ—¥æœŸèŒƒå›´&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;var result = await showDatePicker(
  context: context,
  initialDate: DateTime.now(),
  firstDate: DateTime(2010),
  lastDate: DateTime(2025),
  selectableDayPredicate: (date) {
    return date.difference(DateTime.now()).inMilliseconds &amp;lt; 0;
  },
);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/64bf98c7c6154ad398b778a12146af16~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä»Šå¤©ä»¥åçš„æ—¥æœŸå…¨éƒ¨ä¸ºç°è‰²ï¼Œä¸å¯é€‰çŠ¶æ€ã€‚&lt;/p&gt;
&lt;h4 id=&quot;è®¾ç½®æ·±è‰²ä¸»é¢˜&quot;&gt;è®¾ç½®æ·±è‰²ä¸»é¢˜&lt;/h4&gt;
&lt;p&gt;è®¾ç½®æ·±è‰²ä¸»é¢˜ä½¿ &lt;code&gt;builder&lt;/code&gt; ï¼Œå…¶ç”¨äºåŒ…è£…å¯¹è¯æ¡†çª—å£å°éƒ¨ä»¶ä»¥æ·»åŠ ç»§æ‰¿çš„çª—å£å°éƒ¨ä»¶ï¼Œä¾‹å¦‚&lt;code&gt;Theme&lt;/code&gt;ï¼Œè®¾ç½®æ·±è‰²ä¸»é¢˜å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;var result = await showDatePicker(
  context: context,
  initialDate: DateTime.now(),
  firstDate: DateTime(2010),
  lastDate: DateTime(2025),
  builder: (context,child){
    return Theme(
      data: ThemeData.dark(),
      child: child,
    );
  }
);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6c342dd476ff45b28c7ffe297a8a60b3~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;è·å–é€‰ä¸­çš„æ—¥æœŸ&quot;&gt;è·å–é€‰ä¸­çš„æ—¥æœŸ&lt;/h4&gt;
&lt;p&gt;showDatePicker æ–¹æ³•æ˜¯ Future æ–¹æ³•ï¼Œç‚¹å‡»æ—¥æœŸé€‰æ‹©æ§ä»¶çš„ç¡®å®šæŒ‰é’®åï¼Œè¿”å›é€‰æ‹©çš„æ—¥æœŸã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;var result = await showDatePicker(
              context: context,
              initialDate: DateTime.now(),
              firstDate: DateTime(2010),
              lastDate: DateTime(2025),
            );

print('$result');
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;result ä¸ºé€‰æ‹©çš„æ—¥æœŸã€‚&lt;/p&gt;
&lt;h3 id=&quot;calendardatepicker&quot;&gt;CalendarDatePicker&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;æ—¥æœŸç»„ä»¶&lt;/strong&gt;ç›´æ¥æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šï¼Œè€Œä¸æ˜¯å¼¹å‡ºæ˜¾ç¤ºï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;CalendarDatePicker(
  initialDate: DateTime.now(),
  firstDate: DateTime(2010),
  lastDate: DateTime(2025),
  onDateChanged: (d) {
    print('$d');
  },
)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c8a4f0bd19c44a9192bbba80267c4253~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å…¶å‚æ•°å’Œ showDatePicker ä¸€æ ·ã€‚&lt;/p&gt;
&lt;h3 id=&quot;èŒƒå›´æ—¥æœŸ&quot;&gt;èŒƒå›´æ—¥æœŸ&lt;/h3&gt;
&lt;p&gt;é€‰æ‹©èŒƒå›´æ—¥æœŸä½¿ç”¨ &lt;strong&gt;showDateRangePicker&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;RaisedButton(
  child: Text('èŒƒå›´æ—¥æœŸ'),
  onPressed: () async {
    var date = showDateRangePicker(context: context, firstDate: DateTime(2010), lastDate: DateTime(2025));
  },
),
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0dd2901d917d412f95f8299368bc7656~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å…¶å‚æ•°å’Œ showDatePicker ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;èŒƒå›´æ—¥æœŸç»“æ„å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/40d5e27b9e334ed090914bdbd30000ae~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;æ ‡é¢˜&lt;/li&gt;
&lt;li&gt;é€‰å®šçš„æ—¥æœŸèŒƒå›´&lt;/li&gt;
&lt;li&gt;åˆ‡æ¢åˆ°&lt;strong&gt;è¾“å…¥æ¨¡å¼&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;æœˆå’Œå¹´æ ‡ç­¾&lt;/li&gt;
&lt;li&gt;å½“å‰æ—¶é—´&lt;/li&gt;
&lt;li&gt;å¼€å§‹æ—¶é—´&lt;/li&gt;
&lt;li&gt;é€‰ä¸­æ—¶é—´èŒƒå›´&lt;/li&gt;
&lt;li&gt;ç»“æŸæ—¶é—´&lt;/li&gt;
&lt;/ol&gt;&lt;h3 id=&quot;å›½é™…åŒ–&quot;&gt;å›½é™…åŒ–&lt;/h3&gt;
&lt;p&gt;å›½é™…åŒ–éƒ½æ˜¯ä¸€ä¸ªå¥—è·¯ï¼Œä¸‹é¢ä»¥ &lt;strong&gt;showDatePicker&lt;/strong&gt; ä¸ºä¾‹ï¼š&lt;/p&gt;
&lt;p&gt;åœ¨ &lt;strong&gt;pubspec.yaml&lt;/strong&gt; ä¸­å¼•å…¥ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;dependencies:
  flutter_localizations:
    sdk: flutter
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨é¡¶çº§ç»„ä»¶ &lt;strong&gt;MaterialApp&lt;/strong&gt; æ·»åŠ æ”¯æŒï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;MaterialApp(
  title: 'Flutter Demo',

  localizationsDelegates: [
    GlobalMaterialLocalizations.delegate,
    GlobalWidgetsLocalizations.delegate,
    GlobalCupertinoLocalizations.delegate,
  ],
  supportedLocales: [
    const Locale('zh'),
    const Locale('en'),
  ],
  ...
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¼¹å‡ºæ—¥æœŸç»„ä»¶ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;var result = await showDatePicker(
  context: context,
  initialDate: DateTime.now(),
  firstDate: DateTime(2010),
  lastDate: DateTime(2025),
);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ­¤æ—¶å°†ç³»ç»Ÿè¯­éŸ³è°ƒæ•´ä¸º&lt;strong&gt;ä¸­æ–‡&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2101a742179545a289a744104035cec7~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ­¤ç»„ä»¶åªæ”¯æŒ&lt;strong&gt;ä¸­æ–‡&lt;/strong&gt;ï¼Œä¸ç®¡ç³»ç»Ÿè®¾ç½®è¯­è¨€ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;var result = await showDatePicker(
  context: context,
  initialDate: DateTime.now(),
  firstDate: DateTime(2010),
  lastDate: DateTime(2025),
  locale: Locale('zh')
);
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;materialé£æ ¼æ—¶é—´é€‰æ‹©å™¨&quot;&gt;Materialé£æ ¼æ—¶é—´é€‰æ‹©å™¨&lt;/h2&gt;
&lt;p&gt;Flutter 1.20 ç‰ˆæœ¬æ›´æ–°äº† &lt;strong&gt;æ—¶é—´&lt;/strong&gt; ç±»ç»„ä»¶çš„æ ·å¼ã€‚&lt;/p&gt;
&lt;h3 id=&quot;åŸºç¡€ä½¿ç”¨&quot;&gt;åŸºç¡€ä½¿ç”¨&lt;/h3&gt;
&lt;p&gt;å¼¹å‡ºæ—¶é—´ç»„ä»¶ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;RaisedButton(
  child: Text('å¼¹å‡ºæ—¶é—´é€‰æ‹©å™¨'),
  onPressed: () async {
    var result =
        showTimePicker(context: context, initialTime: TimeOfDay.now());
  },
)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/59ca64a7d5c34121a7e7a2235a0b8653~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;1.20 ç‰ˆä»¥å‰çš„æ•ˆæœï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/df58f8fbb5fc4ceab39572ce54f5e350~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è®¾ç½® &lt;strong&gt;äº¤äº’æ¨¡å¼&lt;/strong&gt;ï¼Œäº¤äº’æ¨¡å¼åŒ…å« &lt;strong&gt;æ—¶é’Ÿæ¨¡å¼&lt;/strong&gt;ï¼ˆé»˜è®¤ï¼‰å’Œ &lt;strong&gt;è¾“å…¥æ¨¡å¼&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;var result = showTimePicker(
    context: context,
    initialTime: TimeOfDay.now(),
    initialEntryMode: TimePickerEntryMode.input);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ—¶é’Ÿæ¨¡å¼ï¼ˆTimePickerEntryMode.dialï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/07a7a11e6ce04ad1a4b2a472f4d72c6b~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¾“å…¥æ¨¡å¼ï¼ˆTimePickerEntryMode.inputï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b8151b5089b44d4bbb8b8a9123827218~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è®¾ç½®é¡¶éƒ¨æ ‡é¢˜ã€å–æ¶ˆæŒ‰é’®ã€ç¡®å®šæŒ‰é’® æ–‡æ¡ˆï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;var result = showTimePicker(
    context: context,
    initialTime: TimeOfDay.now(),
    initialEntryMode: TimePickerEntryMode.input,
    helpText: 'é€‰æ‹©æ—¶é—´',
    cancelText: 'å–æ¶ˆ',
    confirmText: 'ç¡®å®š');
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ffe5f8fd66ee4872ac30e55ada0dd384~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;24å°æ—¶-åˆ¶ï¼š&quot;&gt;24å°æ—¶ åˆ¶ï¼š&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;var result = showTimePicker(
  context: context,
  initialTime: TimeOfDay.now(),
  builder: (BuildContext context, Widget child) {
    return MediaQuery(
      data: MediaQuery.of(context)
          .copyWith(alwaysUse24HourFormat: true),
      child: child,
    );
  },
);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6dbbb308fb1544b795c94b123a1e3d32~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;é»‘æš—æ¨¡å¼&quot;&gt;é»‘æš—æ¨¡å¼&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;var result = showTimePicker(
  context: context,
  initialTime: TimeOfDay.now(),
  builder: (BuildContext context, Widget child) {
    return Theme(
      data: ThemeData.dark(),
      child: child,
    );
  },
);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e61e16dffd3543ee9c562280ce37c535~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;å›½é™…åŒ–-2&quot;&gt;å›½é™…åŒ–&lt;/h3&gt;
&lt;p&gt;åœ¨ &lt;strong&gt;pubspec.yaml&lt;/strong&gt; ä¸­å¼•å…¥ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;dependencies:
  flutter_localizations:
    sdk: flutter
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨é¡¶çº§ç»„ä»¶ &lt;strong&gt;MaterialApp&lt;/strong&gt; æ·»åŠ æ”¯æŒï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;MaterialApp(
  title: 'Flutter Demo',

  localizationsDelegates: [
    GlobalMaterialLocalizations.delegate,
    GlobalWidgetsLocalizations.delegate,
    GlobalCupertinoLocalizations.delegate,
  ],
  supportedLocales: [
    const Locale('zh'),
    const Locale('en'),
  ],
  ...
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¼¹å‡ºæ—¶é—´ç»„ä»¶ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;RaisedButton(
  child: Text('å¼¹å‡ºæ—¶é—´é€‰æ‹©å™¨'),
  onPressed: () async {
    var result =
        showTimePicker(context: context, initialTime: TimeOfDay.now());
  },
)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åˆ‡æ¢ç³»ç»Ÿè¯­è¨€ä¸ºä¸­æ–‡ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1cd31ba5b6f543adb5d3c3a12be19c10~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¸è·Ÿéšç³»ç»Ÿè¯­è¨€ï¼Œç›´æ¥æŒ‡å®šï¼Œæ¯”å¦‚å½“å‰ç³»ç»Ÿè¯­è¨€ä¸ºä¸­æ–‡ï¼ŒæŒ‡å®šä¸ºè‹±æ–‡ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;var result = showTimePicker(
  context: context,
  initialTime: TimeOfDay.now(),
  builder: (BuildContext context, Widget child) {
    return Localizations(
      locale: Locale('en'),
      delegates: [
        GlobalMaterialLocalizations.delegate,
        GlobalWidgetsLocalizations.delegate,
      ],
      child: child,
    );
  },
);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c5504342963f4cdbbba2321befe0e5cc~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;iosé£æ ¼æ—¥æœŸé€‰æ‹©å™¨&quot;&gt;iOSé£æ ¼æ—¥æœŸé€‰æ‹©å™¨&lt;/h2&gt;
&lt;h3 id=&quot;åŸºç¡€ä½¿ç”¨-2&quot;&gt;åŸºç¡€ä½¿ç”¨&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;CupertinoDatePicker&lt;/strong&gt; æ˜¯ iOSé£æ ¼çš„æ—¥æœŸé€‰æ‹©å™¨ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;class CupertinoDatePickerDemo extends StatefulWidget {
  @override
  _CupertinoDatePickerDemoState createState() =&amp;gt; _CupertinoDatePickerDemoState();
}

class _CupertinoDatePickerDemoState extends State&amp;lt;CupertinoDatePickerDemo&amp;gt; {

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(),
      body: Center(
        child: Container(
          height: 200,
          color: Colors.grey.withOpacity(.5),
          child: CupertinoDatePicker(
            initialDateTime: DateTime.now(),
            onDateTimeChanged: (date) {
              print('$date');
            },
          ),
        ),
      ),
    );
  }

}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1cab65cb96af441f99261842dbcc188c~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è®¾ç½®æœ€å¤§/å°æ—¶é—´ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;CupertinoDatePicker(
  initialDateTime: DateTime.now(),
  minimumDate: DateTime.now().add(Duration(days: -1)),
  maximumDate: DateTime.now().add(Duration(days: 1)),
  onDateTimeChanged: (date) {
    print('$date');
  },
)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æœ€å¤§æ—¶é—´ä¸ºæ˜å¤©ï¼Œæœ€å°æ—¶é—´ä¸ºæ˜¨å¤©ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/538b1d7aa8de420e958efd6cb330b1ea~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è®¾ç½®æ¨¡å¼ä¸º&lt;strong&gt;æ—¶é—´&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;CupertinoDatePicker(
  mode: CupertinoDatePickerMode.time,
  initialDateTime: DateTime.now(),
  onDateTimeChanged: (date) {
    print('$date');
  },
)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e9587db9b4e24190a1858f33c7d11468~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è®¾ç½®æ¨¡å¼ä¸º&lt;strong&gt;æ—¥æœŸ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;CupertinoDatePicker(
  mode: CupertinoDatePickerMode.date,
  initialDateTime: DateTime.now(),
  onDateTimeChanged: (date) {
    print('$date');
  },
)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/346ce5d897214e3bb95ad0c870a97d2e~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è®¾ç½®æ¨¡å¼ä¸º&lt;strong&gt;æ—¥æœŸå’Œæ—¶é—´&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;CupertinoDatePicker(
  mode: CupertinoDatePickerMode.dateAndTime,
  initialDateTime: DateTime.now(),
  onDateTimeChanged: (date) {
    print('$date');
  },
)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e2991c26185d46e28ccb0471bd4a8e34~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;time&lt;/strong&gt;ï¼šåªæ˜¾ç¤ºæ—¶é—´ï¼Œæ•ˆæœï¼š&lt;code&gt;4 | 14 | PM&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;date&lt;/strong&gt;ï¼šåªæ˜¾ç¤ºæ—¥æœŸï¼Œæ•ˆæœï¼š&lt;code&gt;July | 13 | 2012&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;dateAndTime&lt;/strong&gt;ï¼šæ—¶é—´å’Œæ—¥æœŸéƒ½æ˜¾ç¤ºï¼Œæ•ˆæœï¼š &lt;code&gt;Fri Jul 13 | 4 | 14 | PM&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä½¿ç”¨24å°æ—¶åˆ¶ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;CupertinoDatePicker(
  use24hFormat: true,
  initialDateTime: DateTime.now(),
  onDateTimeChanged: (date) {
    print('$date');
  },
)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7d9ab2e6904b4e5f8a618e0b7f57aa28~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;å›½é™…åŒ–-3&quot;&gt;å›½é™…åŒ–&lt;/h3&gt;
&lt;p&gt;åœ¨ &lt;strong&gt;pubspec.yaml&lt;/strong&gt; ä¸­å¼•å…¥ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;dependencies:
  flutter_localizations:
    sdk: flutter
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨é¡¶çº§ç»„ä»¶ &lt;strong&gt;MaterialApp&lt;/strong&gt; æ·»åŠ æ”¯æŒï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;MaterialApp(
  title: 'Flutter Demo',

  localizationsDelegates: [
    GlobalMaterialLocalizations.delegate,
    GlobalWidgetsLocalizations.delegate,
    GlobalCupertinoLocalizations.delegate,
  ],
  supportedLocales: [
    const Locale('zh'),
    const Locale('en'),
  ],
  ...
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç»„ä»¶ä½¿ç”¨ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;CupertinoDatePicker(
  initialDateTime: DateTime.now(),
  onDateTimeChanged: (date) {
    print('$date');
  },
)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç»„ä»¶è¯­è¨€è·Ÿéšç³»ç»Ÿè¯­è¨€ï¼Œå½“å‰ç³»ç»Ÿè¯­è¨€ä¸ºè‹±æ–‡ï¼Œæ•ˆæœï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e225b897044f4011ab62bb707d5765e3~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¸è·Ÿéšç³»ç»Ÿè¯­è¨€ï¼Œç›´æ¥æŒ‡å®šï¼Œæ¯”å¦‚å½“å‰ç³»ç»Ÿè¯­è¨€ä¸ºè‹±æ–‡ï¼ŒæŒ‡å®šä¸ºä¸­æ–‡ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;Localizations(
  locale: Locale('zh'),
  delegates: [
    GlobalMaterialLocalizations.delegate,
    GlobalWidgetsLocalizations.delegate,
    GlobalCupertinoLocalizations.delegate,
  ],
  child: CupertinoDatePicker(
    initialDateTime: DateTime.now(),
    onDateTimeChanged: (date) {
      print('$date');
    },
  ),
)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d7796274d8a24947a25d2ea5f5882401~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;iosé£æ ¼æ—¶é—´é€‰æ‹©å™¨&quot;&gt;iOSé£æ ¼æ—¶é—´é€‰æ‹©å™¨&lt;/h2&gt;
&lt;h3 id=&quot;åŸºç¡€ä½¿ç”¨-3&quot;&gt;åŸºç¡€ä½¿ç”¨&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;CupertinoTimerPicker&lt;/strong&gt; æ˜¯ iOSé£æ ¼çš„æ—¶é—´é€‰æ‹©å™¨ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;CupertinoTimerPicker(onTimerDurationChanged: (time) {
  print('$time');
})
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/023a842f31d74beba405c9228e2b36e9~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è®¾ç½®æ˜¾ç¤ºæ¨¡å¼ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;CupertinoTimerPickerMode.hm&lt;/strong&gt;ï¼šæ˜¾ç¤º å°æ—¶ | åˆ†é’Ÿï¼Œè‹±æ–‡æ•ˆæœ&lt;code&gt;16 hours | 14 min&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CupertinoTimerPickerMode.ms&lt;/strong&gt;ï¼š æ˜¾ç¤º åˆ†é’Ÿ | ç§’ï¼Œè‹±æ–‡æ•ˆæœ&lt;code&gt;14 min | 43 sec&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CupertinoTimerPickerMode.hms&lt;/strong&gt;ï¼šæ˜¾ç¤º å°æ—¶ | åˆ†é’Ÿ | ç§’ï¼Œè‹±æ–‡æ•ˆæœ&lt;code&gt;16 hours | 14 min | 43 sec&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;CupertinoTimerPicker(
    mode: CupertinoTimerPickerMode.hm,
    onTimerDurationChanged: (time) {
      print('$time');
    })
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4f249afd4dc3409b879561528ddee4ff~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼ŒCupertinoTimerPickeræ˜¾ç¤º0:0:0ï¼Œè®¾ç½®æ˜¾ç¤ºå½“å‰æ—¶é—´ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;CupertinoTimerPicker(
    initialTimerDuration: Duration(
        hours: DateTime.now().hour,
        minutes: DateTime.now().minute,
        seconds: DateTime.now().second),
    onTimerDurationChanged: (time) {
      print('$time');
    })
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9d65db5210e44a6ebaff24e2c9cfaa67~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è®¾ç½® åˆ†/ç§’ çš„é—´éš”ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;CupertinoTimerPicker(
    minuteInterval: 5,
    secondInterval: 5,
    onTimerDurationChanged: (time) {
      print('$time');
    })
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/70aa7412f2b04b4f819d49c0478ce1f3~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;å›½é™…åŒ–-4&quot;&gt;å›½é™…åŒ–&lt;/h3&gt;
&lt;p&gt;åœ¨ &lt;strong&gt;pubspec.yaml&lt;/strong&gt; ä¸­å¼•å…¥ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;dependencies:
  flutter_localizations:
    sdk: flutter
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨é¡¶çº§ç»„ä»¶ &lt;strong&gt;MaterialApp&lt;/strong&gt; æ·»åŠ æ”¯æŒï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;MaterialApp(
  title: 'Flutter Demo',

  localizationsDelegates: [
    GlobalMaterialLocalizations.delegate,
    GlobalWidgetsLocalizations.delegate,
    GlobalCupertinoLocalizations.delegate,
  ],
  supportedLocales: [
    const Locale('zh'),
    const Locale('en'),
  ],
  ...
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç»„ä»¶ä½¿ç”¨ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;CupertinoTimerPicker(onTimerDurationChanged: (time) {
  print('$time');
})
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç»„ä»¶è¯­è¨€è·Ÿéšç³»ç»Ÿè¯­è¨€ï¼Œå½“å‰ç³»ç»Ÿè¯­è¨€ä¸ºè‹±æ–‡ï¼Œæ•ˆæœï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e8d883bb37c943708ff97e5fb1ca52ed~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¸è·Ÿéšç³»ç»Ÿè¯­è¨€ï¼Œç›´æ¥æŒ‡å®šï¼Œæ¯”å¦‚å½“å‰ç³»ç»Ÿè¯­è¨€ä¸ºè‹±æ–‡ï¼ŒæŒ‡å®šä¸ºä¸­æ–‡ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;Localizations(
  locale: Locale('zh'),
  delegates: [
    GlobalMaterialLocalizations.delegate,
    GlobalWidgetsLocalizations.delegate,
    GlobalCupertinoLocalizations.delegate,
  ],
  child: CupertinoTimerPicker(onTimerDurationChanged: (time) {
    print('$time');
  }),
)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2a5cb0c592f94dac8644d10dee388d17~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;interactiveviewer&quot;&gt;InteractiveViewer&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;InteractiveViewer&lt;/strong&gt; æ˜¯ Flutter 1.20 æ–°å¢çš„ç»„ä»¶ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡æ‹–åŠ¨ä»¥å¹³ç§»ã€ç¼©æ”¾å’Œæ‹–æ”¾å­ç»„ä»¶ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;InteractiveViewer(
  child: Image.asset('assets/images/go_board_09x09.png'),
)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bfdac0a5bbab422ab07653036a57e536~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;alignPanAxis&lt;/strong&gt; å‚æ•°è¡¨ç¤ºæ˜¯å¦åªåœ¨æ°´å¹³å’Œå‚ç›´æ–¹å‘ä¸Šæ‹–æ‹½ï¼Œé»˜è®¤ä¸ºfalseï¼Œè®¾ç½®ä¸ºtrueï¼Œæ— æ³•æ²¿ç€å¯¹è§’çº¿ï¼ˆæ–œç€ï¼‰æ–¹å‘ç§»åŠ¨ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;InteractiveViewer(
  alignPanAxis: true,
  child: Image.asset('assets/images/go_board_09x09.png'),
)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a8715b3000844ee59df8ff9359d9301b~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;maxScale&lt;/strong&gt; ã€&lt;strong&gt;minScale&lt;/strong&gt;ã€&lt;strong&gt;scaleEnabled&lt;/strong&gt; æ˜¯ç¼©æ”¾ç›¸å…³å‚æ•°ï¼Œåˆ†åˆ«è¡¨ç¤ºæœ€å¤§ç¼©æ”¾å€æ•°ã€æœ€å°ç¼©æ”¾å€æ•°ã€æ˜¯å¦å¯ä»¥ç¼©æ”¾ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;InteractiveViewer(
  maxScale: 2,
  minScale: 1,
  scaleEnabled: true,
  child: Image.asset('assets/images/go_board_09x09.png'),
)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;constrained&lt;/strong&gt; å‚æ•°è¡¨ç¤ºç»„ä»¶æ ‘ä¸­çš„çº¦æŸæ˜¯å¦åº”ç”¨äºå­ç»„ä»¶ï¼Œé»˜è®¤ä¸ºtrueï¼Œå¦‚æœè®¾ä¸ºtrueï¼Œè¡¨ç¤ºå­ç»„ä»¶æ˜¯æ— é™åˆ¶çº¦æŸï¼Œè¿™å¯¹å­ç»„ä»¶çš„å°ºå¯¸æ¯” InteractiveViewer å¤§æ—¶éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚å­ç»„ä»¶ä¸ºæ»šåŠ¨ç³»åˆ—ç»„ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚ä¸‹çš„æ¡ˆä¾‹ï¼Œå­ç»„ä»¶ä¸º Tableï¼ŒTable å°ºå¯¸å¤§äºå±å¹•ï¼Œå¿…é¡»å°†&lt;code&gt;constrained&lt;/code&gt;è®¾ç½®ä¸º false ä»¥ä¾¿å°†å…¶ç»˜åˆ¶ä¸ºå®Œæ•´å°ºå¯¸ã€‚è¶…å‡ºçš„å±å¹•å°ºå¯¸å¯ä»¥å¹³ç§»åˆ°è§†å›¾ä¸­ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;class InteractiveViewerDemo extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    const int _rowCount = 20;
    const int _columnCount = 10;
    return Scaffold(
      appBar: AppBar(),
      body: Center(
        child: Container(
          height: 300,
          width: 300,
          child: InteractiveViewer(
            constrained: false,
            child: Table(
              columnWidths: &amp;lt;int, TableColumnWidth&amp;gt;{
                for (int column = 0; column &amp;lt; _columnCount; column += 1)
                  column: const FixedColumnWidth(100.0),
              },
              children: &amp;lt;TableRow&amp;gt;[
                for (int row = 0; row &amp;lt; _rowCount; row += 1)
                  TableRow(
                    children: &amp;lt;Widget&amp;gt;[
                      for (int column = 0; column &amp;lt; _columnCount; column += 1)
                        Container(
                          height: 50,
                          color: row % 2 + column % 2 == 1
                              ? Colors.red
                              : Colors.green,
                        ),
                    ],
                  ),
              ],
            ),
          ),
        ),
      ),
    );
  }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/230052b354f34f1d9acab75aaa9bed7a~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å›è°ƒäº‹ä»¶ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;onInteractionStart&lt;/strong&gt;ï¼šå½“ç”¨æˆ·å¼€å§‹å¹³ç§»æˆ–ç¼©æ”¾æ‰‹åŠ¿æ—¶è°ƒç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;onInteractionUpdate&lt;/strong&gt;ï¼šå½“ç”¨æˆ·æ›´æ–°ç»„ä»¶ä¸Šçš„å¹³ç§»æˆ–ç¼©æ”¾æ‰‹åŠ¿æ—¶è°ƒç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;onInteractionEnd&lt;/strong&gt;ï¼šå½“ç”¨æˆ·åœ¨ç»„ä»¶ä¸Šç»“æŸå¹³ç§»æˆ–ç¼©æ”¾æ‰‹åŠ¿æ—¶è°ƒç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;InteractiveViewer(
  child: Image.asset('assets/images/go_board_09x09.png'),
  onInteractionStart: (ScaleStartDetails scaleStartDetails){
    print('onInteractionStart:$scaleStartDetails');
  },
  onInteractionUpdate: (ScaleUpdateDetails scaleUpdateDetails){
    print('onInteractionUpdate:$scaleUpdateDetails');
  },
  onInteractionEnd: (ScaleEndDetails endDetails){
    print('onInteractionEnd:$endDetails');
  },
)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é€šè¿‡ &lt;strong&gt;Matrix4&lt;/strong&gt; çŸ©é˜µå¯¹å…¶è¿›è¡Œå˜æ¢ï¼Œæ¯”å¦‚å·¦ç§»ã€æ”¾å¤§ç­‰ï¼Œæ·»åŠ å˜æ¢æ§åˆ¶å™¨ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;final TransformationController _transformationController =
      TransformationController();

InteractiveViewer(
  child: Image.asset('assets/images/go_board_09x09.png'),
  transformationController: _transformationController,
)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ”¾å¤§å˜æ¢ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;var matrix = _transformationController.value.clone();
matrix.scale(1.5, 1.0, 1.0);
_transformationController.value = matrix;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å®Œæ•´ä»£ç ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-dart&quot;&gt;import 'dart:math';

import 'package:flutter/material.dart';

///
/// desc:
///

class InteractiveViewerDemo extends StatefulWidget {
  @override
  _InteractiveViewerDemoState createState() =&amp;gt; _InteractiveViewerDemoState();
}

class _InteractiveViewerDemoState extends State&amp;lt;InteractiveViewerDemo&amp;gt; {
  final TransformationController _transformationController =
      TransformationController();

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(),
      body: Column(
        children: [
          Container(
            padding: EdgeInsets.symmetric(horizontal: 10.0),
            child: Center(
              child: InteractiveViewer(
                child: Image.asset('assets/images/go_board_09x09.png'),
                transformationController: _transformationController,
              ),
            ),
          ),
          Expanded(
            child: Container(),
          ),
          Row(
            children: [
              RaisedButton(
                child: Text('é‡ç½®'),
                onPressed: () {
                  _transformationController.value = Matrix4.identity();
                },
              ),
              RaisedButton(
                child: Text('å·¦ç§»'),
                onPressed: () {
                  var matrix = _transformationController.value.clone();
                  matrix.translate(-5.0);
                  _transformationController.value = matrix;
                },
              ),
              RaisedButton(
                child: Text('æ”¾å¤§'),
                onPressed: () {
                  var matrix = _transformationController.value.clone();
                  matrix.scale(1.5, 1.0, 1.0);
                  _transformationController.value = matrix;
                },
              ),
            ],
          ),
        ],
      ),
    );
  }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2c1523680b8c4fe79b6f4999c51b2a97~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;äº¤æµ&quot;&gt;äº¤æµ&lt;/h2&gt;
&lt;p&gt;è€å­ŸFlutteråšå®¢åœ°å€ï¼ˆ330ä¸ªæ§ä»¶ç”¨æ³•ï¼‰ï¼š&lt;a href=&quot;http://laomengit.com&quot;&gt;http://laomengit.com&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ¬¢è¿åŠ å…¥Flutteräº¤æµç¾¤ï¼ˆå¾®ä¿¡ï¼šlaomengitï¼‰ã€å…³æ³¨å…¬ä¼—å·ã€è€å­ŸFlutterã€‘ï¼š&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th/&gt;
&lt;th/&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/467322/202009/467322-20200911070744287-1731667927.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/td&gt;
&lt;td&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/467322/202009/467322-20200911070744549-1311450165.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;</description>
<pubDate>Thu, 10 Sep 2020 23:08:00 +0000</pubDate>
<dc:creator>è€å­ŸFlutter</dc:creator>
<og:description>è€å­Ÿå¯¼è¯»ï¼šFlutter 1.20 æ›´æ–°äº† Sliderã€RangeSliderã€æ—¥æœŸé€‰æ‹©å™¨ç»„ä»¶ã€æ—¶é—´é€‰æ‹©å™¨ç»„ä»¶çš„æ ·å¼ï¼Œæ–°å¢äº†äº¤æ¢ç»„ä»¶ï¼šInteractiveViewerï¼Œä¸‹é¢è¯¦ç»†ä»‹ç»å…¶ç”¨æ³•ã€‚ æ»‘å—</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/mengqd/p/13649555.html</dc:identifier>
</item>
<item>
<title>æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹æ’åº - å¹³é…±</title>
<link>http://www.cnblogs.com/p1ng/p/13649366.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/p1ng/p/13649366.html</guid>
<description>&lt;ul&gt;&lt;li&gt;å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰&lt;/li&gt;
&lt;li&gt;æ’å…¥æ’åºï¼ˆInsertion Sortï¼‰&lt;/li&gt;
&lt;li&gt;å½’å¹¶æ’åºï¼ˆMerge Sortï¼‰&lt;/li&gt;
&lt;li&gt;å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰&lt;/li&gt;
&lt;li&gt;å †æ’åºï¼ˆHeap Sortï¼‰&lt;/li&gt;
&lt;li&gt;è®¡æ•°æ’åºï¼ˆCounting Sortï¼‰&lt;/li&gt;
&lt;li&gt;æ¡¶æ’åºï¼ˆBucket Sort)&lt;/li&gt;
&lt;li&gt;æ‹“æ‰‘æ’åºï¼ˆTopological Sortï¼‰&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;å†’æ³¡æ’åºï¼ˆbubble-sortï¼‰&quot;&gt;å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬æ€æƒ³&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œæˆ‘ä»¬æŠŠæ•°ç»„é‡Œçš„å…ƒç´ é€šé€šå€’å…¥åˆ°æ°´æ± ä¸­ï¼Œè¿™äº›å…ƒç´ å°†é€šè¿‡ç›¸äº’ä¹‹é—´çš„æ¯”è¾ƒï¼ŒæŒ‰ç…§å¤§å°é¡ºåºä¸€ä¸ªä¸€ä¸ªåœ°åƒæ°”æ³¡ä¸€æ ·æµ®å‡ºæ°´é¢ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®ç°&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ¯ä¸€è½®ï¼Œä»æ‚ä¹±æ— ç« çš„æ•°ç»„å¤´éƒ¨å¼€å§‹ï¼Œæ¯ä¸¤ä¸ªå…ƒç´ æ¯”è¾ƒå¤§å°å¹¶è¿›è¡Œäº¤æ¢ï¼Œç›´åˆ°è¿™ä¸€è½®å½“ä¸­æœ€å¤§æˆ–æœ€å°çš„å…ƒç´ è¢«æ”¾ç½®åœ¨æ•°ç»„çš„å°¾éƒ¨ï¼Œç„¶åä¸æ–­åœ°é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ éƒ½æ’å¥½ä½ç½®ã€‚å…¶ä¸­ï¼Œæ ¸å¿ƒæ“ä½œå°±æ˜¯å…ƒç´ ç›¸äº’æ¯”è¾ƒã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¾‹é¢˜åˆ†æ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç»™å®šæ•°ç»„ [2, 1, 7, 9, 5, 8]ï¼Œè¦æ±‚æŒ‰ç…§ä»å·¦åˆ°å³ã€ä»å°åˆ°å¤§çš„é¡ºåºè¿›è¡Œæ’åºã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è§£é¢˜æ€è·¯&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä»å·¦åˆ°å³ä¾æ¬¡å†’æ³¡ï¼ŒæŠŠè¾ƒå¤§çš„æ•°å¾€å³è¾¹æŒªåŠ¨å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1898410/202009/1898410-20200911014254233-1489169770.gif&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;ol readability=&quot;22.5&quot;&gt;&lt;li readability=&quot;5&quot;&gt;
&lt;p&gt;é¦–å…ˆæŒ‡é’ˆæŒ‡å‘ç¬¬ä¸€ä¸ªæ•°ï¼Œæ¯”è¾ƒç¬¬ä¸€ä¸ªæ•°å’Œç¬¬äºŒä¸ªæ•°çš„å¤§å°ï¼Œç”±äº 2 æ¯” 1 å¤§ï¼Œæ‰€ä»¥ä¸¤ä¸¤äº¤æ¢ï¼Œ[1, 2, 7, 9, 5, 8]ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;5&quot;&gt;
&lt;p&gt;æ¥ä¸‹æ¥æŒ‡é’ˆå¾€å‰ç§»åŠ¨ä¸€æ­¥ï¼Œæ¯”è¾ƒ 2 å’Œ 7ï¼Œç”±äº 2 æ¯” 7 å°ï¼Œä¸¤è€…ä¿æŒä¸åŠ¨ï¼Œ[1, 2, 7, 9, 5, 8]ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œ7 æ˜¯æœ€å¤§çš„é‚£ä¸ªæ•°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;5&quot;&gt;
&lt;p&gt;æŒ‡é’ˆç»§ç»­å¾€å‰ç§»åŠ¨ï¼Œæ¯”è¾ƒ 7 å’Œ 9ï¼Œç”±äº 7 æ¯” 9 å°ï¼Œä¸¤è€…ä¿æŒä¸åŠ¨ï¼Œ[1, 2, 7, 9, 5, 8]ã€‚ç°åœ¨ï¼Œ9 å˜æˆäº†æœ€å¤§çš„é‚£ä¸ªæ•°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;5&quot;&gt;
&lt;p&gt;å†å¾€åï¼Œæ¯”è¾ƒ 9 å’Œ 5ï¼Œå¾ˆæ˜æ˜¾ï¼Œ9 æ¯” 5 å¤§ï¼Œäº¤æ¢å®ƒä»¬çš„ä½ç½®ï¼Œ[1, 2, 7, 5, 9, 8]ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;5&quot;&gt;
&lt;p&gt;æœ€åï¼Œæ¯”è¾ƒ 9 å’Œ 8ï¼Œ9 æ¯” 8 å¤§ï¼Œäº¤æ¢å®ƒä»¬çš„ä½ç½®ï¼Œ[1, 2, 7, 5, 8, 9]ã€‚ç»è¿‡ç¬¬ä¸€è½®çš„ä¸¤ä¸¤æ¯”è¾ƒï¼Œ9 è¿™ä¸ªæœ€å¤§çš„æ•°å°±åƒå†’æ³¡ä¸€æ ·å†’åˆ°äº†æ•°ç»„çš„æœ€åé¢ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;5&quot;&gt;
&lt;p&gt;æ¥ä¸‹æ¥è¿›è¡Œç¬¬äºŒè½®çš„æ¯”è¾ƒï¼ŒæŠŠæŒ‡é’ˆé‡æ–°æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œé‡å¤ä¸Šé¢çš„æ“ä½œï¼Œæœ€åï¼Œæ•°ç»„å˜æˆäº†ï¼š[1, 2, 5, 7, 8, 9]ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;åœ¨è¿›è¡Œæ–°ä¸€è½®çš„æ¯”è¾ƒä¸­ï¼Œåˆ¤æ–­ä¸€ä¸‹åœ¨ä¸Šä¸€è½®æ¯”è¾ƒçš„è¿‡ç¨‹ä¸­æœ‰æ²¡æœ‰å‘ç”Ÿä¸¤ä¸¤äº¤æ¢ï¼Œå¦‚æœä¸€æ¬¡äº¤æ¢éƒ½æ²¡æœ‰å‘ç”Ÿï¼Œå°±è¯æ˜å…¶å®æ•°ç»„å·²ç»æ’å¥½åºäº†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;strong&gt;å®ç°ä»£ç &lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;    public static void bubbleSort(int[] nums) {
        // å®šä¹‰ä¸€ä¸ªå¸ƒå°”å˜é‡ hasChangeï¼Œç”¨æ¥æ ‡è®°æ¯è½®éå†ä¸­æ˜¯å¦å‘ç”Ÿäº†äº¤æ¢
        boolean hasChange = true;
        for (int i = 0; i &amp;lt; nums.length - 1 &amp;amp;&amp;amp; hasChange; i++) {
            // æ¯è½®éå†å¼€å§‹ï¼Œå°† hasChange è®¾ç½®ä¸º false
            hasChange = false;
            // è¿›è¡Œä¸¤ä¸¤æ¯”è¾ƒï¼Œå¦‚æœå‘ç°å½“å‰çš„æ•°æ¯”ä¸‹ä¸€ä¸ªæ•°è¿˜å¤§ï¼Œé‚£ä¹ˆå°±äº¤æ¢è¿™ä¸¤ä¸ªæ•°ï¼ŒåŒæ—¶è®°å½•ä¸€ä¸‹æœ‰äº¤æ¢å‘ç”Ÿ
            for (int j = 0; j &amp;lt; nums.length - 1 - i; j++) {
                if (nums[j] &amp;gt; nums[j+1]) {
                    swap(nums, j, j+1);
                    hasChange = true;
                }
            }
        }
    }
        // äº¤æ¢æ•°ç»„ä¸­çš„ä¸¤ä¸ªæ•°
    public static void swap(int[] arr, int i, int j) {
        int temp = arr[i];
        arr[i] = arr[j];
        arr[j] = temp;
    }
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;ç®—æ³•åˆ†æ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç©ºé—´å¤æ‚åº¦&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å‡è®¾æ•°ç»„çš„å…ƒç´ ä¸ªæ•°æ˜¯ nï¼Œç”±äºåœ¨æ•´ä¸ªæ’åºçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ˜¯ç›´æ¥åœ¨ç»™å®šçš„æ•°ç»„é‡Œé¢è¿›è¡Œå…ƒç´ çš„ä¸¤ä¸¤äº¤æ¢ï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦æ˜¯ O(1)ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ—¶é—´å¤æ‚åº¦&lt;/strong&gt;&lt;/p&gt;
&lt;ol readability=&quot;4&quot;&gt;&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;ç»™å®šçš„æ•°ç»„æŒ‰ç…§é¡ºåºå·²ç»æ’å¥½&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦è¿›è¡Œ nâˆ’1 æ¬¡çš„æ¯”è¾ƒï¼Œä¸¤ä¸¤äº¤æ¢æ¬¡æ•°ä¸º 0ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚è¿™æ˜¯æœ€å¥½çš„æƒ…å†µã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;ç»™å®šçš„æ•°ç»„æŒ‰ç…§é€†åºæ’åˆ—&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œ n(n-1)/2 æ¬¡æ¯”è¾ƒï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(n2)ã€‚è¿™æ˜¯æœ€åçš„æƒ…å†µã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;ç»™å®šçš„æ•°ç»„æ‚ä¹±æ— ç« &lt;/p&gt;
&lt;p&gt;åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯ O(n2)ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;ç”±æ­¤å¯è§ï¼Œå†’æ³¡æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n2)ã€‚å®ƒæ˜¯ä¸€ç§ç¨³å®šçš„æ’åºç®—æ³•ã€‚ï¼ˆç¨³å®šæ˜¯æŒ‡å¦‚æœæ•°ç»„é‡Œä¸¤ä¸ªç›¸ç­‰çš„æ•°ï¼Œé‚£ä¹ˆæ’åºå‰åè¿™ä¸¤ä¸ªç›¸ç­‰çš„æ•°çš„ç›¸å¯¹ä½ç½®ä¿æŒä¸å˜ã€‚ï¼‰&lt;/p&gt;
&lt;h2 id=&quot;æ’å…¥æ’åºï¼ˆinsertion-sortï¼‰&quot;&gt;æ’å…¥æ’åºï¼ˆInsertion Sortï¼‰&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬æ€æƒ³&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸æ–­åœ°å°†å°šæœªæ’å¥½åºçš„æ•°æ’å…¥åˆ°å·²ç»æ’å¥½åºçš„éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç‰¹ç‚¹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å†’æ³¡æ’åºä¸­ï¼Œç»è¿‡æ¯ä¸€è½®çš„æ’åºå¤„ç†åï¼Œæ•°ç»„åç«¯çš„æ•°æ˜¯æ’å¥½åºçš„ï¼›è€Œå¯¹äºæ’å…¥æ’åºæ¥è¯´ï¼Œç»è¿‡æ¯ä¸€è½®çš„æ’åºå¤„ç†åï¼Œæ•°ç»„å‰ç«¯çš„æ•°éƒ½æ˜¯æ’å¥½åºçš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¾‹é¢˜åˆ†æ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¯¹æ•°ç»„ [2, 1, 7, 9, 5, 8] è¿›è¡Œæ’å…¥æ’åºã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è§£é¢˜æ€è·¯&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆå°†æ•°ç»„åˆ†æˆå·¦å³ä¸¤ä¸ªéƒ¨åˆ†ï¼Œå·¦è¾¹æ˜¯å·²ç»æ’å¥½åºçš„éƒ¨åˆ†ï¼Œå³è¾¹æ˜¯è¿˜æ²¡æœ‰æ’å¥½åºçš„éƒ¨åˆ†ï¼Œåˆšå¼€å§‹ï¼Œå·¦è¾¹å·²æ’å¥½åºçš„éƒ¨åˆ†åªæœ‰ç¬¬ä¸€ä¸ªå…ƒç´  2ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯¹å³è¾¹çš„å…ƒç´ ä¸€ä¸ªä¸€ä¸ªè¿›è¡Œå¤„ç†ï¼Œå°†å®ƒä»¬æ”¾åˆ°å·¦è¾¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1898410/202009/1898410-20200911014337107-1006155320.gif&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;å…ˆæ¥çœ‹ 1ï¼Œç”±äº 1 æ¯” 2 å°ï¼Œéœ€è¦å°† 1 æ’å…¥åˆ° 2 çš„å‰é¢ï¼Œåšæ³•å¾ˆç®€å•ï¼Œä¸¤ä¸¤äº¤æ¢ä½ç½®å³å¯ï¼Œ[1, 2, 7, 9, 5, 8]ã€‚&lt;/li&gt;
&lt;li&gt;ç„¶åï¼Œæˆ‘ä»¬è¦æŠŠ 7 æ’å…¥åˆ°å·¦è¾¹çš„éƒ¨åˆ†ï¼Œç”±äº 7 å·²ç»æ¯” 2 å¤§äº†ï¼Œè¡¨æ˜å®ƒæ˜¯ç›®å‰æœ€å¤§çš„å…ƒç´ ï¼Œä¿æŒä½ç½®ä¸å˜ï¼Œ[1, 2, 7, 9, 5, 8]ã€‚&lt;/li&gt;
&lt;li&gt;åŒç†ï¼Œ9 ä¹Ÿä¸éœ€è¦åšä½ç½®å˜åŠ¨ï¼Œ[1, 2, 7, 9, 5, 8]ã€‚&lt;/li&gt;
&lt;li&gt;æ¥ä¸‹æ¥ï¼Œå¦‚ä½•æŠŠ 5 æ’å…¥åˆ°åˆé€‚çš„ä½ç½®ã€‚é¦–å…ˆæ¯”è¾ƒ 5 å’Œ 9ï¼Œç”±äº 5 æ¯” 9 å°ï¼Œä¸¤ä¸¤äº¤æ¢ï¼Œ[1, 2, 7, 5, 9, 8]ï¼Œç»§ç»­ï¼Œç”±äº 5 æ¯” 7 å°ï¼Œä¸¤ä¸¤äº¤æ¢ï¼Œ[1, 2, 5, 7, 9, 8]ï¼Œæœ€åï¼Œç”±äº 5 æ¯” 2 å¤§ï¼Œæ­¤è½®ç»“æŸã€‚&lt;/li&gt;
&lt;li&gt;æœ€åä¸€ä¸ªæ•°æ˜¯ 8ï¼Œç”±äº 8 æ¯” 9 å°ï¼Œä¸¤ä¸¤äº¤æ¢ï¼Œ[1, 2, 5, 7, 8, 9]ï¼Œå†æ¯”è¾ƒ 7 å’Œ 8ï¼Œå‘ç° 8 æ¯” 7 å¤§ï¼Œæ­¤è½®ç»“æŸã€‚åˆ°æ­¤ï¼Œæ’å…¥æ’åºå®Œæ¯•ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;strong&gt;å®ç°ä»£ç &lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;    public static void insertionSort(int[] nums) {
        // å°†æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ å½“ä½œå·²ç»æ’å¥½åºçš„ï¼Œä»ç¬¬äºŒä¸ªå…ƒç´ ï¼Œå³ i ä» 1 å¼€å§‹éå†æ•°ç»„
        for (int i = 1, j, current; i &amp;lt; nums.length; i++) {
            // å¤–å›´å¾ªç¯å¼€å§‹ï¼ŒæŠŠå½“å‰ i æŒ‡å‘çš„å€¼ç”¨ current ä¿å­˜
            current = nums[i];
            // æŒ‡é’ˆ j å†…å¾ªç¯ï¼Œå’Œ current å€¼æ¯”è¾ƒï¼Œè‹¥ j æ‰€æŒ‡å‘çš„å€¼æ¯” current å€¼å¤§ï¼Œåˆ™è¯¥æ•°å³ç§»ä¸€ä½
            for (j = i - 1; j &amp;gt;= 0 &amp;amp;&amp;amp; nums[j] &amp;gt; current; j--) {
                nums[j + 1] = nums[j];
            }
            // å†…å¾ªç¯ç»“æŸï¼Œj+1 æ‰€æŒ‡å‘çš„ä½ç½®å°±æ˜¯ current å€¼æ’å…¥çš„ä½ç½®
            nums[j + 1] = current;
        }
    }
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;ç®—æ³•åˆ†æ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç©ºé—´å¤æ‚åº¦&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å‡è®¾æ•°ç»„çš„å…ƒç´ ä¸ªæ•°æ˜¯ nï¼Œç”±äºåœ¨æ•´ä¸ªæ’åºçš„è¿‡ç¨‹ä¸­ï¼Œæ˜¯ç›´æ¥åœ¨ç»™å®šçš„æ•°ç»„é‡Œé¢è¿›è¡Œå…ƒç´ çš„ä¸¤ä¸¤äº¤æ¢ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯ O(1)ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ—¶é—´å¤æ‚åº¦&lt;/strong&gt;&lt;/p&gt;
&lt;ol readability=&quot;4&quot;&gt;&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;ç»™å®šçš„æ•°ç»„æŒ‰ç…§é¡ºåºå·²ç»æ’å¥½&lt;/p&gt;
&lt;p&gt;åªéœ€è¦è¿›è¡Œ n-1 æ¬¡çš„æ¯”è¾ƒï¼Œä¸¤ä¸¤äº¤æ¢æ¬¡æ•°ä¸º 0ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚è¿™æ˜¯æœ€å¥½çš„æƒ…å†µã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;ç»™å®šçš„æ•°ç»„æŒ‰ç…§é€†åºæ’åˆ—&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œ n(n-1)/2 æ¬¡æ¯”è¾ƒï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(n2)ã€‚è¿™æ˜¯æœ€åçš„æƒ…å†µã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;ç»™å®šçš„æ•°ç»„æ‚ä¹±æ— ç« &lt;/p&gt;
&lt;p&gt;åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯ O(n2)ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;ç”±æ­¤å¯è§ï¼Œå’Œå†’æ³¡æ’åºä¸€æ ·ï¼Œæ’å…¥æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n2)ï¼Œå¹¶ä¸”å®ƒä¹Ÿæ˜¯ä¸€ç§ç¨³å®šçš„æ’åºç®—æ³•ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å½’å¹¶æ’åºï¼ˆmerge-sortï¼‰&quot;&gt;å½’å¹¶æ’åºï¼ˆMerge Sortï¼‰&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬æ€æƒ³&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ ¸å¿ƒæ˜¯åˆ†æ²»ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªå¤æ‚çš„é—®é¢˜åˆ†æˆä¸¤ä¸ªæˆ–å¤šä¸ªç›¸åŒæˆ–ç›¸ä¼¼çš„å­é—®é¢˜ï¼Œç„¶åæŠŠå­é—®é¢˜åˆ†æˆæ›´å°çš„å­é—®é¢˜ï¼Œç›´åˆ°å­é—®é¢˜å¯ä»¥ç®€å•çš„ç›´æ¥æ±‚è§£ï¼Œæœ€åŸé—®é¢˜çš„è§£å°±æ˜¯å­é—®é¢˜è§£çš„åˆå¹¶ã€‚å½’å¹¶æ’åºå°†åˆ†æ²»çš„æ€æƒ³ä½“ç°å¾—æ·‹æ¼“å°½è‡´ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®ç°&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸€å¼€å§‹å…ˆæŠŠæ•°ç»„ä»ä¸­é—´åˆ’åˆ†æˆä¸¤ä¸ªå­æ•°ç»„ï¼Œä¸€ç›´é€’å½’åœ°æŠŠå­æ•°ç»„åˆ’åˆ†æˆæ›´å°çš„å­æ•°ç»„ï¼Œç›´åˆ°å­æ•°ç»„é‡Œé¢åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œæ‰å¼€å§‹æ’åºã€‚&lt;/p&gt;
&lt;p&gt;æ’åºçš„æ–¹æ³•å°±æ˜¯æŒ‰ç…§å¤§å°é¡ºåºåˆå¹¶ä¸¤ä¸ªå…ƒç´ ï¼Œæ¥ç€ä¾æ¬¡æŒ‰ç…§é€’å½’çš„è¿”å›é¡ºåºï¼Œä¸æ–­åœ°åˆå¹¶æ’å¥½åºçš„å­æ•°ç»„ï¼Œç›´åˆ°æœ€åæŠŠæ•´ä¸ªæ•°ç»„çš„é¡ºåºæ’å¥½ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¾‹é¢˜åˆ†æ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¾‹é¢˜ï¼šåˆ©ç”¨å½’å¹¶æ’åºç®—æ³•å¯¹æ•°ç»„ [2, 1, 7, 9, 5, 8] è¿›è¡Œæ’åºã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è§£é¢˜æ€è·¯&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1898410/202009/1898410-20200911014407452-1369183789.gif&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆä¸æ–­åœ°å¯¹æ•°ç»„è¿›è¡Œåˆ‡åˆ†ï¼Œç›´åˆ°å„ä¸ªå­æ•°ç»„é‡ŒåªåŒ…å«ä¸€ä¸ªå…ƒç´ ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥é€’å½’åœ°æŒ‰ç…§å¤§å°é¡ºåºåˆå¹¶åˆ‡åˆ†å¼€çš„å­æ•°ç»„ï¼Œé€’å½’çš„é¡ºåºå’ŒäºŒå‰æ ‘é‡Œçš„å‰åºéå†ç±»ä¼¼ã€‚&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;åˆå¹¶ [2] å’Œ [1] ä¸º [1, 2]ã€‚&lt;/li&gt;
&lt;li&gt;å­æ•°ç»„ [1, 2] å’Œ [7] åˆå¹¶ã€‚&lt;/li&gt;
&lt;li&gt;å³è¾¹ï¼Œåˆå¹¶ [9] å’Œ [5]ã€‚&lt;/li&gt;
&lt;li&gt;ç„¶ååˆå¹¶ [5, 9] å’Œ [8]ã€‚&lt;/li&gt;
&lt;li&gt;æœ€ååˆå¹¶ [1, 2, 7] å’Œ [5, 8, 9] æˆ [1, 2, 5, 8, 9]ï¼Œå°±å¯ä»¥æŠŠæ•´ä¸ªæ•°ç»„æ’å¥½åºäº†ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;åˆå¹¶æ•°ç»„ [1, 2, 7] å’Œ [5, 8, 9] çš„æ“ä½œæ­¥éª¤å¦‚ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1898410/202009/1898410-20200911014426768-75915295.gif&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;æŠŠæ•°ç»„ [1, 2, 7] ç”¨ L è¡¨ç¤ºï¼Œ[5, 8, 9] ç”¨ R è¡¨ç¤ºã€‚&lt;/li&gt;
&lt;li&gt;åˆå¹¶çš„æ—¶å€™ï¼Œå¼€è¾Ÿåˆ†é…ä¸€ä¸ªæ–°æ•°ç»„ T ä¿å­˜ç»“æœï¼Œæ•°ç»„å¤§å°åº”è¯¥æ˜¯ä¸¤ä¸ªå­æ•°ç»„é•¿åº¦çš„æ€»å’Œ&lt;/li&gt;
&lt;li&gt;ç„¶åä¸‹æ ‡ iã€jã€k åˆ†åˆ«æŒ‡å‘æ¯ä¸ªæ•°ç»„çš„èµ·å§‹ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;æ¥ä¸‹æ¥ï¼Œæ¯”è¾ƒä¸‹æ ‡iå’Œjæ‰€æŒ‡å‘çš„å…ƒç´  L[i] å’Œ R[j]ï¼ŒæŒ‰ç…§å¤§å°é¡ºåºæ”¾å…¥åˆ°ä¸‹æ ‡ k æŒ‡å‘çš„åœ°æ–¹ï¼Œ1 å°äº 5ã€‚&lt;/li&gt;
&lt;li&gt;ç§»åŠ¨ i å’Œ kï¼Œç»§ç»­æ¯”è¾ƒ L[i] å’Œ R[j]ï¼Œ2 æ¯” 5 å°ã€‚&lt;/li&gt;
&lt;li&gt;i å’Œ k ç»§ç»­å¾€å‰ç§»åŠ¨ï¼Œ5 æ¯” 7 å°ã€‚&lt;/li&gt;
&lt;li&gt;ç§»åŠ¨ j å’Œ kï¼Œç»§ç»­æ¯”è¾ƒ L[i] å’Œ R[j]ï¼Œ7 æ¯” 8 å°ã€‚&lt;/li&gt;
&lt;li&gt;è¿™æ—¶å€™ï¼Œå·¦è¾¹çš„æ•°ç»„å·²ç»å¤„ç†å®Œæ¯•ï¼Œç›´æ¥å°†å³è¾¹æ•°ç»„å‰©ä½™çš„å…ƒç´ æ”¾åˆ°ç»“æœæ•°ç»„é‡Œå°±å¥½ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;åˆå¹¶ä¹‹æ‰€ä»¥èƒ½æˆåŠŸï¼Œå…ˆå†³æ¡ä»¶å¿…é¡»æ˜¯ä¸¤ä¸ªå­æ•°ç»„éƒ½å·²ç»åˆ†åˆ«æ’å¥½åºäº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®ç°ä»£ç &lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;    public static void mergeSort(int[] arr, int lo, int hi) {
        // åˆ¤æ–­æ˜¯å¦åªå‰©ä¸‹æœ€åä¸€ä¸ªå…ƒç´ 
        if (lo &amp;gt;= hi) {
            return;
        }
        // ä»ä¸­é—´å°†æ•°ç»„åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†
        int mid = lo + (hi - lo) / 2;
        // åˆ†åˆ«é€’å½’åœ°å°†å·¦å³ä¸¤åŠæ’å¥½åº
        mergeSort(arr, lo, mid);
        mergeSort(arr, mid + 1, hi);
        // å°†æ’å¥½åºçš„å·¦å³ä¸¤åŠåˆå¹¶
        merge(arr, lo, mid, hi);
    }
    // å½’å¹¶
    public static void merge(int[] nums, int lo, int mid, int hi) {
        // å¤åˆ¶ä¸€ä»½åŸæ¥çš„æ•°ç»„
        int[] copy = nums.clone();
        // å®šä¹‰ä¸€ä¸ª k æŒ‡é’ˆè¡¨ç¤ºä»ä»€ä¹ˆä½ç½®å¼€å§‹ä¿®æ”¹åŸæ¥çš„æ•°ç»„ï¼Œi æŒ‡é’ˆè¡¨ç¤ºå·¦åŠè¾¹çš„èµ·å§‹ä½ç½®ï¼Œj è¡¨ç¤ºå³åŠè¾¹çš„èµ·å§‹ä½ç½®
        int k = lo, i = lo, j = mid + 1;
        while(k &amp;lt;= hi) {
            if(i &amp;gt; mid) {
                nums[k++] = copy[j++];
            } else if(j &amp;gt; hi) {
                nums[k++] = copy[i++];
            } else if(copy[j] &amp;lt; copy[i]) {
                nums[k++] = copy[j++];
            } else {
                nums[k++] = copy[i++];
            }
        }
    }
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…¶ä¸­ï¼ŒWhile è¯­å¥æ¯”è¾ƒï¼Œä¸€å…±å¯èƒ½ä¼šå‡ºç°å››ç§æƒ…å†µã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å·¦åŠè¾¹çš„æ•°éƒ½å¤„ç†å®Œæ¯•ï¼Œåªå‰©ä¸‹å³åŠè¾¹çš„æ•°ï¼Œåªéœ€è¦å°†å³åŠè¾¹çš„æ•°é€ä¸ªæ‹·è´è¿‡å»ã€‚&lt;/li&gt;
&lt;li&gt;å³åŠè¾¹çš„æ•°éƒ½å¤„ç†å®Œæ¯•ï¼Œåªå‰©ä¸‹å·¦åŠè¾¹çš„æ•°ï¼Œåªéœ€è¦å°†å·¦åŠè¾¹çš„æ•°é€ä¸ªæ‹·è´è¿‡å»å°±å¥½ã€‚&lt;/li&gt;
&lt;li&gt;å³è¾¹çš„æ•°å°äºå·¦è¾¹çš„æ•°ï¼Œå°†å³è¾¹çš„æ•°æ‹·è´åˆ°åˆé€‚çš„ä½ç½®ï¼Œj æŒ‡é’ˆå¾€å‰ç§»åŠ¨ä¸€ä½ã€‚&lt;/li&gt;
&lt;li&gt;å·¦è¾¹çš„æ•°å°äºå³è¾¹çš„æ•°ï¼Œå°†å·¦è¾¹çš„æ•°æ‹·è´åˆ°åˆé€‚çš„ä½ç½®ï¼Œi æŒ‡é’ˆå¾€å‰ç§»åŠ¨ä¸€ä½ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;ç®—æ³•åˆ†æ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç©ºé—´å¤æ‚åº¦&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç”±äºåˆå¹¶ n ä¸ªå…ƒç´ éœ€è¦åˆ†é…ä¸€ä¸ªå¤§å°ä¸º n çš„é¢å¤–æ•°ç»„ï¼Œåˆå¹¶å®Œæˆä¹‹åï¼Œè¿™ä¸ªæ•°ç»„çš„ç©ºé—´å°±ä¼šè¢«é‡Šæ”¾ï¼Œæ‰€ä»¥ç®—æ³•çš„ç©ºé—´å¤æ‚åº¦å°±æ˜¯ O(n)ã€‚å½’å¹¶æ’åºä¹Ÿæ˜¯ç¨³å®šçš„æ’åºç®—æ³•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ—¶é—´å¤æ‚åº¦&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½’å¹¶ç®—æ³•æ˜¯ä¸€ä¸ªä¸æ–­é€’å½’çš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸¾ä¾‹&lt;/strong&gt;ï¼šæ•°ç»„çš„å…ƒç´ ä¸ªæ•°æ˜¯ nï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ T(n) çš„å‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è§£æ³•&lt;/strong&gt;ï¼šæŠŠè¿™ä¸ªè§„æ¨¡ä¸º n çš„é—®é¢˜åˆ†æˆä¸¤ä¸ªè§„æ¨¡åˆ†åˆ«ä¸º n/2 çš„å­é—®é¢˜ï¼Œæ¯ä¸ªå­é—®é¢˜çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ T(n/2)ï¼Œé‚£ä¹ˆä¸¤ä¸ªå­é—®é¢˜çš„å¤æ‚åº¦å°±æ˜¯ 2Ã—T(n/2)ã€‚å½“ä¸¤ä¸ªå­é—®é¢˜éƒ½å¾—åˆ°äº†è§£å†³ï¼Œå³ä¸¤ä¸ªå­æ•°ç»„éƒ½æ’å¥½äº†åºï¼Œéœ€è¦å°†å®ƒä»¬åˆå¹¶ï¼Œä¸€å…±æœ‰ n ä¸ªå…ƒç´ ï¼Œæ¯æ¬¡éƒ½è¦è¿›è¡Œæœ€å¤š n-1 æ¬¡çš„æ¯”è¾ƒï¼Œæ‰€ä»¥åˆå¹¶çš„å¤æ‚åº¦æ˜¯ O(n)ã€‚ç”±æ­¤æˆ‘ä»¬å¾—åˆ°äº†é€’å½’å¤æ‚åº¦å…¬å¼ï¼šT(n) = 2Ã—T(n/2) + O(n)ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºå…¬å¼æ±‚è§£ï¼Œä¸æ–­åœ°æŠŠä¸€ä¸ªè§„æ¨¡ä¸º n çš„é—®é¢˜åˆ†è§£æˆè§„æ¨¡ä¸º n/2 çš„é—®é¢˜ï¼Œä¸€ç›´åˆ†è§£åˆ°è§„æ¨¡å¤§å°ä¸º 1ã€‚å¦‚æœ n ç­‰äº 2ï¼Œåªéœ€è¦åˆ†ä¸€æ¬¡ï¼›å¦‚æœ n ç­‰äº 4ï¼Œéœ€è¦åˆ† 2 æ¬¡ã€‚è¿™é‡Œçš„æ¬¡æ•°æ˜¯æŒ‰ç…§è§„æ¨¡å¤§å°çš„å˜åŒ–åˆ†ç±»çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥æ­¤ç±»æ¨ï¼Œå¯¹äºè§„æ¨¡ä¸º n çš„é—®é¢˜ï¼Œä¸€å…±è¦è¿›è¡Œ log(n) å±‚çš„å¤§å°åˆ‡åˆ†ã€‚åœ¨æ¯ä¸€å±‚é‡Œï¼Œæˆ‘ä»¬éƒ½è¦è¿›è¡Œåˆå¹¶ï¼Œæ‰€æ¶‰åŠåˆ°çš„å…ƒç´ å…¶å®å°±æ˜¯æ•°ç»„é‡Œçš„æ‰€æœ‰å…ƒç´ ï¼Œå› æ­¤ï¼Œæ¯ä¸€å±‚çš„åˆå¹¶å¤æ‚åº¦éƒ½æ˜¯ O(n)ï¼Œæ‰€ä»¥æ•´ä½“çš„å¤æ‚åº¦å°±æ˜¯ O(nlogn)ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å¿«é€Ÿæ’åºï¼ˆquick-sortï¼‰&quot;&gt;å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬æ€æƒ³&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¿«é€Ÿæ’åºä¹Ÿé‡‡ç”¨äº†åˆ†æ²»çš„æ€æƒ³ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®ç°&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æŠŠåŸå§‹çš„æ•°ç»„ç­›é€‰æˆè¾ƒå°å’Œè¾ƒå¤§çš„ä¸¤ä¸ªå­æ•°ç»„ï¼Œç„¶åé€’å½’åœ°æ’åºä¸¤ä¸ªå­æ•°ç»„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸¾ä¾‹&lt;/strong&gt;ï¼šæŠŠç­é‡Œçš„æ‰€æœ‰åŒå­¦æŒ‰ç…§é«˜çŸ®é¡ºåºæ’æˆä¸€æ’ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è§£æ³•&lt;/strong&gt;ï¼šè€å¸ˆå…ˆéšæœºåœ°æŒ‘é€‰äº†åŒå­¦ Aï¼Œè®©æ‰€æœ‰å…¶ä»–åŒå­¦å’Œ A æ¯”é«˜çŸ®ï¼Œæ¯” A çŸ®çš„éƒ½ç«™åœ¨ A çš„å·¦è¾¹ï¼Œæ¯” A é«˜çš„éƒ½ç«™åœ¨ A çš„å³è¾¹ã€‚æ¥ä¸‹æ¥ï¼Œè€å¸ˆåˆ†åˆ«ä»å·¦è¾¹å’Œå³è¾¹çš„åŒå­¦é‡Œé€‰æ‹©äº†åŒå­¦ B å’Œ Cï¼Œç„¶åä¸æ–­åœ°ç­›é€‰å’Œæ’åˆ—ä¸‹å»ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨åˆ†æˆè¾ƒå°å’Œè¾ƒå¤§çš„ä¸¤ä¸ªå­æ•°ç»„è¿‡ç¨‹ä¸­ï¼Œå¦‚ä½•é€‰å®šä¸€ä¸ªåŸºå‡†å€¼ï¼ˆä¹Ÿå°±æ˜¯åŒå­¦ Aã€Bã€C ç­‰ï¼‰å°¤ä¸ºå…³é”®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¾‹é¢˜åˆ†æ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¯¹æ•°ç»„ [2, 1, 7, 9, 5, 8] è¿›è¡Œæ’åºã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è§£é¢˜æ€è·¯&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1898410/202009/1898410-20200911014454657-1840565167.gif&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;æŒ‰ç…§å¿«é€Ÿæ’åºçš„æ€æƒ³ï¼Œé¦–å…ˆæŠŠæ•°ç»„ç­›é€‰æˆè¾ƒå°å’Œè¾ƒå¤§çš„ä¸¤ä¸ªå­æ•°ç»„ã€‚&lt;/li&gt;
&lt;li&gt;éšæœºä»æ•°ç»„é‡Œé€‰å–ä¸€ä¸ªæ•°ä½œä¸ºåŸºå‡†å€¼ï¼Œæ¯”å¦‚ 7ï¼Œäºæ˜¯åŸå§‹çš„æ•°ç»„å°±è¢«åˆ†æˆäº†ä¸¤ä¸ªå­æ•°ç»„ã€‚æ³¨æ„ï¼šå¿«é€Ÿæ’åºæ˜¯ç›´æ¥åœ¨åŸå§‹æ•°ç»„é‡Œè¿›è¡Œå„ç§äº¤æ¢æ“ä½œï¼Œæ‰€ä»¥å½“å­æ•°ç»„è¢«åˆ†å‰²å‡ºæ¥çš„æ—¶å€™ï¼ŒåŸå§‹æ•°ç»„é‡Œçš„æ’åˆ—ä¹Ÿè¢«æ”¹å˜äº†ã€‚&lt;/li&gt;
&lt;li&gt;æ¥ä¸‹æ¥ï¼Œåœ¨è¾ƒå°çš„å­æ•°ç»„é‡Œé€‰ 2 ä½œä¸ºåŸºå‡†å€¼ï¼Œåœ¨è¾ƒå¤§çš„å­æ•°ç»„é‡Œé€‰ 8 ä½œä¸ºåŸºå‡†å€¼ï¼Œç»§ç»­åˆ†å‰²å­æ•°ç»„ã€‚&lt;/li&gt;
&lt;li&gt;ç»§ç»­å°†å…ƒç´ ä¸ªæ•°å¤§äº 1 çš„å­æ•°ç»„è¿›è¡Œåˆ’åˆ†ï¼Œå½“æ‰€æœ‰å­æ•°ç»„é‡Œçš„å…ƒç´ ä¸ªæ•°éƒ½ä¸º 1 çš„æ—¶å€™ï¼ŒåŸå§‹æ•°ç»„ä¹Ÿè¢«æ’å¥½åºäº†ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;strong&gt;å®ç°ä»£ç &lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;       public static void quickSort(int[] nums, int lo, int hi) {
        // åˆ¤æ–­æ˜¯å¦åªå‰©ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œæ˜¯åˆ™ç›´æ¥è¿”å›
        if (lo &amp;gt;= hi) {
            return;
        }
        // åˆ©ç”¨partitionå‡½æ•°æ‰¾åˆ°ä¸€ä¸ªéšæœºåŸºå‡†ç‚¹
        int p = partition(nums, lo, hi);
        // é€’å½’åœ°å¯¹åŸºå‡†ç‚¹å·¦åŠè¾¹å’Œå³åŠè¾¹çš„æ•°è¿›è¡Œæ’åº
        quickSort(nums, lo, p - 1);
        quickSort(nums, p + 1, hi);
    }
    // è·å¾—åŸºå‡†å€¼
    public static int partition(int[] nums, int lo, int hi) {
        // éšæœºé€‰æ‹©ä¸€ä¸ªæ•°ä½œä¸ºåŸºå‡†å€¼ï¼Œnums[hi] å°±æ˜¯åŸºå‡†å€¼
        swap(nums, randRange(lo, hi), hi);
        int i, j;
        // ä»å·¦åˆ°å³ç”¨æ¯ä¸ªæ•°å’ŒåŸºå‡†å€¼æ¯”è¾ƒï¼Œè‹¥æ¯”åŸºå‡†å€¼å°ï¼Œåˆ™æ”¾åˆ°æŒ‡é’ˆ i æ‰€æŒ‡å‘çš„ä½ç½®ã€‚å¾ªç¯å®Œæ¯•åï¼Œi æŒ‡é’ˆä¹‹å‰çš„æ•°éƒ½æ¯”åŸºå‡†å€¼å°
        for (i = lo, j = lo; j &amp;lt; hi; j++) {
            if (nums[j] &amp;lt;= nums[hi]) {
                swap(nums, i++, j);
            }
        }
        // æœ«å°¾çš„åŸºå‡†å€¼æ”¾ç½®åˆ°æŒ‡é’ˆ i çš„ä½ç½®ï¼Œi æŒ‡é’ˆä¹‹åçš„æ•°éƒ½æ¯”åŸºå‡†å€¼å¤§
        swap(nums, i, j);
        // è¿”å›æŒ‡é’ˆ iï¼Œä½œä¸ºåŸºå‡†ç‚¹çš„ä½ç½®
        return i;
    }
    // è·å–éšæœºå€¼
    public static int randRange(int lo, int hi) {
        return (int) (lo + Math.random() * (hi - lo + 1));
    }

    // äº¤æ¢æ•°ç»„ä¸­çš„ä¸¤ä¸ªæ•°
    public static void swap(int[] arr, int i, int j) {
        int temp = arr[i];
        arr[i] = arr[j];
        arr[j] = temp;
    }
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;ç®—æ³•åˆ†æ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç©ºé—´å¤æ‚åº¦&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å’Œå½’å¹¶æ’åºä¸åŒï¼Œå¿«é€Ÿæ’åºåœ¨æ¯æ¬¡é€’å½’çš„è¿‡ç¨‹ä¸­ï¼Œåªéœ€è¦å¼€è¾Ÿ O(1) çš„å­˜å‚¨ç©ºé—´æ¥å®Œæˆäº¤æ¢æ“ä½œå®ç°ç›´æ¥å¯¹æ•°ç»„çš„ä¿®æ”¹ï¼Œåˆå› ä¸ºé€’å½’æ¬¡æ•°ä¸º lognï¼Œæ‰€ä»¥å®ƒçš„æ•´ä½“ç©ºé—´å¤æ‚åº¦å®Œå…¨å–å†³äºå‹å †æ ˆçš„æ¬¡æ•°ï¼Œå› æ­¤å®ƒçš„ç©ºé—´å¤æ‚åº¦æ˜¯ O(logn)ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ—¶é—´å¤æ‚åº¦&lt;/strong&gt;&lt;/p&gt;
&lt;ol readability=&quot;5&quot;&gt;&lt;li readability=&quot;7&quot;&gt;
&lt;p&gt;æœ€ä¼˜æƒ…å†µï¼šè¢«é€‰å‡ºæ¥çš„åŸºå‡†å€¼éƒ½æ˜¯å½“å‰å­æ•°ç»„çš„ä¸­é—´æ•°ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ ·çš„åˆ†å‰²ï¼Œèƒ½ä¿è¯å¯¹äºä¸€ä¸ªè§„æ¨¡å¤§å°ä¸º n çš„é—®é¢˜ï¼Œèƒ½è¢«å‡åŒ€åˆ†è§£æˆä¸¤ä¸ªè§„æ¨¡å¤§å°ä¸º n/2 çš„å­é—®é¢˜ï¼ˆå½’å¹¶æ’åºä¹Ÿé‡‡ç”¨äº†ç›¸åŒçš„åˆ’åˆ†æ–¹æ³•ï¼‰ï¼Œæ—¶é—´å¤æ‚åº¦å°±æ˜¯ï¼šT(n) = 2Ã—T(n/2) + O(n)ã€‚&lt;/p&gt;
&lt;p&gt;æŠŠè§„æ¨¡å¤§å°ä¸º n çš„é—®é¢˜åˆ†è§£æˆ n/2 çš„ä¸¤ä¸ªå­é—®é¢˜æ—¶ï¼Œå’ŒåŸºå‡†å€¼è¿›è¡Œäº† n-1 æ¬¡æ¯”è¾ƒï¼Œå¤æ‚åº¦å°±æ˜¯ O(n)ã€‚å¾ˆæ˜¾ç„¶ï¼Œåœ¨æœ€ä¼˜æƒ…å†µä¸‹ï¼Œå¿«é€Ÿæ’åºçš„å¤æ‚åº¦ä¹Ÿæ˜¯ O(nlogn)ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;3&quot;&gt;
&lt;p&gt;æœ€åæƒ…å†µï¼šåŸºå‡†å€¼é€‰æ‹©äº†å­æ•°ç»„é‡Œçš„æœ€å¤§æˆ–è€…æœ€å°å€¼&lt;/p&gt;
&lt;p&gt;æ¯æ¬¡éƒ½æŠŠå­æ•°ç»„åˆ†æˆäº†ä¸¤ä¸ªæ›´å°çš„å­æ•°ç»„ï¼Œå…¶ä¸­ä¸€ä¸ªçš„é•¿åº¦ä¸º 1ï¼Œå¦å¤–ä¸€ä¸ªçš„é•¿åº¦åªæ¯”åŸå­æ•°ç»„å°‘ 1ã€‚åˆ’åˆ†è¿‡ç¨‹å’Œå†’æ³¡æ’åºçš„è¿‡ç¨‹ç±»ä¼¼ï¼Œç®—æ³•å¤æ‚åº¦ä¸º O(n2)ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;tips:å¯ä»¥é€šè¿‡éšæœºåœ°é€‰å–åŸºå‡†å€¼æ¥é¿å…å‡ºç°æœ€åçš„æƒ…å†µã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;å †æ’åºï¼ˆheap-sortï¼‰&quot;&gt;å †æ’åºï¼ˆHeap Sortï¼‰&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬æ€æƒ³&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å †æ’åºæ˜¯æŒ‡åˆ©ç”¨å †è¿™ç§æ•°æ®ç»“æ„æ‰€è®¾è®¡çš„ä¸€ç§æ’åºç®—æ³•ã€‚å †æ˜¯ä¸€ä¸ªè¿‘ä¼¼å®Œå…¨äºŒå‰æ ‘çš„ç»“æ„ï¼Œå¹¶åŒæ—¶æ»¡è¶³å †çš„æ€§è´¨ï¼šå³å­ç»“ç‚¹çš„é”®å€¼æˆ–ç´¢å¼•æ€»æ˜¯å°äºï¼ˆæˆ–è€…å¤§äºï¼‰å®ƒçš„çˆ¶èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®ç°&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å°†åˆå§‹å¾…æ’åºå…³é”®å­—åºåˆ—(R1,R2â€¦.Rn)æ„å»ºæˆå¤§é¡¶å †ï¼Œæ­¤å †ä¸ºåˆå§‹çš„æ— åºåŒºï¼›&lt;/li&gt;
&lt;li&gt;å°†å †é¡¶å…ƒç´ R[1]ä¸æœ€åä¸€ä¸ªå…ƒç´ R[n]äº¤æ¢ï¼Œæ­¤æ—¶å¾—åˆ°æ–°çš„æ— åºåŒº(R1,R2,â€¦â€¦Rn-1)å’Œæ–°çš„æœ‰åºåŒº(Rn),ä¸”æ»¡è¶³R[1,2â€¦n-1]&amp;lt;=R[n]ï¼›&lt;/li&gt;
&lt;li&gt;ç”±äºäº¤æ¢åæ–°çš„å †é¡¶R[1]å¯èƒ½è¿åå †çš„æ€§è´¨ï¼Œå› æ­¤éœ€è¦å¯¹å½“å‰æ— åºåŒº(R1,R2,â€¦â€¦Rn-1)è°ƒæ•´ä¸ºæ–°å †ï¼Œç„¶åå†æ¬¡å°†R[1]ä¸æ— åºåŒºæœ€åä¸€ä¸ªå…ƒç´ äº¤æ¢ï¼Œå¾—åˆ°æ–°çš„æ— åºåŒº(R1,R2â€¦.Rn-2)å’Œæ–°çš„æœ‰åºåŒº(Rn-1,Rn)ã€‚ä¸æ–­é‡å¤æ­¤è¿‡ç¨‹ç›´åˆ°æœ‰åºåŒºçš„å…ƒç´ ä¸ªæ•°ä¸ºn-1ï¼Œåˆ™æ•´ä¸ªæ’åºè¿‡ç¨‹å®Œæˆã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;å®ç°ä»£ç &lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;    public static void heapSort(int[] arr) {
        len = arr.length;
        if (len &amp;lt; 1) {
            return;
        }
        //1.æ„å»ºä¸€ä¸ªå¤§æ ¹å †
        buildMaxHeap(arr);
        //2.å¾ªç¯å°†å †é¦–ä½ï¼ˆæœ€å¤§å€¼ï¼‰ä¸æœ«ä½äº¤æ¢ï¼Œç„¶åå†é‡æ–°è°ƒæ•´æœ€å¤§å †
        while(len &amp;gt; 0) {
            swap(arr, 0, len-1);
            len--;
            adjustHeap(arr, 0);
        }
    }
    // å»ºç«‹å¤§æ ¹å †
    public static void buildMaxHeap(int[] arr) {
        // ä»æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¼€å§‹å‘ä¸Šæ„é€ å¤§æ ¹å †
        for (int i = (len / 2 -1); i &amp;gt;= 0; i--) {
            adjustHeap(arr, i);
        }
    }
    // è°ƒæ•´ä½¿ä¹‹æˆä¸ºå¤§æ ¹å †
    public static void adjustHeap(int[] arr, int i ) {
        int maxIndex = i;
        // å¦‚æœæœ‰å·¦å­æ ‘ä¸”å·¦å­æ ‘å¤§äºçˆ¶èŠ‚ç‚¹ï¼Œåˆ™å°†æœ€å¤§æŒ‡é’ˆæŒ‡å‘å·¦å­æ ‘
        if (i * 2 &amp;lt; len &amp;amp;&amp;amp; arr[i * 2] &amp;gt; arr[maxIndex]) {
            maxIndex = i * 2;
        }
        // å¦‚æœæœ‰å³å­æ ‘ä¸”å³å­æ ‘å¤§äºçˆ¶èŠ‚ç‚¹ï¼Œåˆ™å°†æœ€å¤§æŒ‡é’ˆæŒ‡å‘å³å­æ ‘
        if (i * 2 + 1 &amp;lt; len &amp;amp;&amp;amp; arr[i * 2 + 1] &amp;gt; arr[maxIndex]) {
            maxIndex = i * 2 + 1;
        }
        // å¦‚æœçˆ¶èŠ‚ç‚¹ä¸æ˜¯æœ€å¤§å€¼ï¼Œåˆ™å°†çˆ¶èŠ‚ç‚¹ä¸æœ€å¤§å€¼äº¤æ¢å¹¶é€’å½’è°ƒæ•´ä¸çˆ¶èŠ‚ç‚¹äº¤æ¢çš„ä½ç½®
        if (maxIndex != i) {
            swap(arr, maxIndex, i);
            adjustHeap(arr, maxIndex);
        }
    }
    // äº¤æ¢æ•°ç»„ä¸­çš„ä¸¤ä¸ªæ•°
    public static void swap(int[] arr, int i, int j) {
        int temp = arr[i];
        arr[i] = arr[j];
        arr[j] = temp;
    }
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;ç®—æ³•åˆ†æ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ—¶é—´å¤æ‚åº¦&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ã€€å †æ’åºæ˜¯ä¸€ç§é€‰æ‹©æ’åºï¼Œæ•´ä½“ä¸»è¦ç”±æ„å»ºåˆå§‹å †+äº¤æ¢å †é¡¶å…ƒç´ å’Œæœ«å°¾å…ƒç´ å¹¶é‡å»ºå †ä¸¤éƒ¨åˆ†ç»„æˆã€‚å…¶ä¸­æ„å»ºåˆå§‹å †ç»æ¨å¯¼å¤æ‚åº¦ä¸ºO(n)ï¼Œåœ¨äº¤æ¢å¹¶é‡å»ºå †çš„è¿‡ç¨‹ä¸­ï¼Œéœ€äº¤æ¢n-1æ¬¡ï¼Œè€Œé‡å»ºå †çš„è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®å®Œå…¨äºŒå‰æ ‘çš„æ€§è´¨ï¼Œ[log2(n-1),log2(n-2)...1]é€æ­¥é€’å‡ï¼Œè¿‘ä¼¼ä¸ºnlognã€‚æ‰€ä»¥å †æ’åºæ—¶é—´å¤æ‚åº¦ä¸€èˆ¬è®¤ä¸ºå°±æ˜¯O(nlogn)çº§ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è®¡æ•°æ’åºï¼ˆcounting-sortï¼‰&quot;&gt;è®¡æ•°æ’åºï¼ˆCounting Sortï¼‰&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬æ€æƒ³&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è®¡æ•°æ’åºçš„æ ¸å¿ƒåœ¨äºå°†è¾“å…¥çš„æ•°æ®å€¼è½¬åŒ–ä¸ºé”®å­˜å‚¨åœ¨é¢å¤–å¼€è¾Ÿçš„æ•°ç»„ç©ºé—´ä¸­ã€‚ä½œä¸ºä¸€ç§çº¿æ€§æ—¶é—´å¤æ‚åº¦çš„æ’åºï¼Œè®¡æ•°æ’åºè¦æ±‚è¾“å…¥çš„æ•°æ®å¿…é¡»æ˜¯æœ‰ç¡®å®šèŒƒå›´çš„æ•´æ•°ã€‚&lt;/p&gt;
&lt;p&gt;è®¡æ•°æ’åº(Counting sort)æ˜¯ä¸€ç§ç¨³å®šçš„æ’åºç®—æ³•ã€‚è®¡æ•°æ’åºä½¿ç”¨ä¸€ä¸ªé¢å¤–çš„æ•°ç»„Cï¼Œå…¶ä¸­ç¬¬iä¸ªå…ƒç´ æ˜¯å¾…æ’åºæ•°ç»„Aä¸­å€¼ç­‰äºiçš„å…ƒç´ çš„ä¸ªæ•°ã€‚ç„¶åæ ¹æ®æ•°ç»„Cæ¥å°†Aä¸­çš„å…ƒç´ æ’åˆ°æ­£ç¡®çš„ä½ç½®ã€‚å®ƒåªèƒ½å¯¹æ•´æ•°è¿›è¡Œæ’åºã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®ç°&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æ‰¾å‡ºå¾…æ’åºçš„æ•°ç»„ä¸­æœ€å¤§å’Œæœ€å°çš„å…ƒç´ ï¼›&lt;/li&gt;
&lt;li&gt;ç»Ÿè®¡æ•°ç»„ä¸­æ¯ä¸ªå€¼ä¸ºiçš„å…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œå­˜å…¥æ•°ç»„Cçš„ç¬¬ié¡¹ï¼›&lt;/li&gt;
&lt;li&gt;å¯¹æ‰€æœ‰çš„è®¡æ•°ç´¯åŠ ï¼ˆä»Cä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œæ¯ä¸€é¡¹å’Œå‰ä¸€é¡¹ç›¸åŠ ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;åå‘å¡«å……ç›®æ ‡æ•°ç»„ï¼šå°†æ¯ä¸ªå…ƒç´ iæ”¾åœ¨æ–°æ•°ç»„çš„ç¬¬C(i)é¡¹ï¼Œæ¯æ”¾ä¸€ä¸ªå…ƒç´ å°±å°†C(i)å‡å»1ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;åŠ¨å›¾æ¼”ç¤º&lt;/strong&gt;&lt;br/&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1898410/202009/1898410-20200911014637743-423667694.gif&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®ç°ä»£ç &lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;    public static void countingSort(int[] arr) {
        if (arr.length == 0) {
            return;
        }
        int bias, min = arr[0], max = arr[0];
        // 1.ç¡®è®¤æ•°ç»„ä¸­çš„æœ€å¤§å€¼æœ€å°å€¼
        for (int i = 1; i &amp;lt; arr.length; i++) {
            if (arr[i] &amp;gt; max) {
                max = arr[i];
            }
            if (arr[i] &amp;lt; min) {
                min = arr[i];
            }
        }
        bias = 0 - min; // biasè®°å½•æ–°æ•°ç»„çš„ä¸‹æ ‡åç§»é‡
        int[] bucket = new int[max - min + 1];
        // 2.ç»Ÿè®¡å¹¶å­˜å…¥æ–°æ•°ç»„
        for (int i = 0; i &amp;lt; arr.length; i++) {
            bucket[arr[i] + bias]++;
        }
        int index = 0, i = 0;
        // 3.åå‘å¡«å……ç›®æ ‡æ•°ç»„
        while(index &amp;lt; arr.length) {
            if (bucket[i] != 0) {
                arr[index] = i - bias;
                bucket[i]--;
                index++;
            } else {
                i++;
            }
        }
    }
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;ç®—æ³•åˆ†æ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½“è¾“å…¥çš„å…ƒç´ æ˜¯ n ä¸ª 0 åˆ° k ä¹‹é—´çš„æ•´æ•°æ—¶ï¼Œå®ƒçš„è¿è¡Œæ—¶é—´æ˜¯ O(n + k)ã€‚è®¡æ•°æ’åºä¸æ˜¯æ¯”è¾ƒæ’åºï¼Œæ’åºçš„é€Ÿåº¦å¿«äºä»»ä½•æ¯”è¾ƒæ’åºç®—æ³•ã€‚ç”±äºç”¨æ¥è®¡æ•°çš„æ•°ç»„Cçš„é•¿åº¦å–å†³äºå¾…æ’åºæ•°ç»„ä¸­æ•°æ®çš„èŒƒå›´ï¼ˆç­‰äºå¾…æ’åºæ•°ç»„çš„æœ€å¤§å€¼ä¸æœ€å°å€¼çš„å·®åŠ ä¸Š1ï¼‰ï¼Œè¿™ä½¿å¾—è®¡æ•°æ’åºå¯¹äºæ•°æ®èŒƒå›´å¾ˆå¤§çš„æ•°ç»„ï¼Œéœ€è¦å¤§é‡æ—¶é—´å’Œå†…å­˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æœ€ä½³æƒ…å†µï¼šT(n) = O(n+k) æœ€å·®æƒ…å†µï¼šT(n) = O(n+k) å¹³å‡æƒ…å†µï¼šT(n) = O(n+k)&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;æ¡¶æ’åºï¼ˆbucket-sortï¼‰&quot;&gt;æ¡¶æ’åºï¼ˆBucket Sortï¼‰&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;æ€æƒ³&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;æ¡¶æ’åº&lt;/code&gt;æ˜¯è®¡æ•°æ’åºçš„å‡çº§ç‰ˆã€‚å½“æ•°åˆ—å–å€¼èŒƒå›´è¿‡å¤§ï¼Œæˆ–è€…ä¸æ˜¯æ•´æ•°æ—¶ä¸èƒ½é€‚ç”¨è®¡æ•°æ’åºï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨æ¡¶æ’åºæ¥è§£å†³é—®é¢˜ã€‚å®ƒåˆ©ç”¨äº†å‡½æ•°çš„æ˜ å°„å…³ç³»ï¼Œé«˜æ•ˆä¸å¦çš„å…³é”®å°±åœ¨äºè¿™ä¸ªæ˜ å°„å‡½æ•°çš„ç¡®å®šã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;æ¡¶æ’åº (Bucket sort)&lt;/code&gt;çš„å·¥ä½œçš„åŸç†ï¼šå‡è®¾è¾“å…¥æ•°æ®æœä»å‡åŒ€åˆ†å¸ƒï¼Œå°†æ•°æ®åˆ†åˆ°æœ‰é™æ•°é‡çš„æ¡¶é‡Œï¼Œæ¯ä¸ªæ¡¶å†åˆ†åˆ«æ’åºï¼ˆæœ‰å¯èƒ½å†ä½¿ç”¨åˆ«çš„æ’åºç®—æ³•æˆ–æ˜¯ä»¥é€’å½’æ–¹å¼ç»§ç»­ä½¿ç”¨æ¡¶æ’åºè¿›è¡Œæ’åºï¼‰&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®ç°&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ¯ä¸€ä¸ªæ¡¶ï¼ˆbucketï¼‰ä»£è¡¨ä¸€ä¸ªåŒºé—´èŒƒå›´ï¼Œé‡Œé¢å¯ä»¥æ‰¿è½½ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ã€‚æ¡¶æ’åºçš„ç¬¬ä¸€æ­¥ï¼Œå°±æ˜¯åˆ›å»ºè¿™äº›æ¡¶ï¼Œç¡®å®šæ¯ä¸€ä¸ªæ¡¶çš„åŒºé—´èŒƒå›´ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1898410/202009/1898410-20200911014701202-564535928.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å…·ä½“å»ºç«‹å¤šå°‘ä¸ªæ¡¶ï¼Œå¦‚ä½•ç¡®å®šæ¡¶çš„åŒºé—´èŒƒå›´ï¼Œæœ‰å¾ˆå¤šä¸åŒçš„æ–¹å¼ã€‚æˆ‘ä»¬è¿™é‡Œåˆ›å»ºçš„æ¡¶æ•°é‡ç­‰äºåŸå§‹æ•°åˆ—çš„å…ƒç´ æ•°é‡ï¼Œé™¤äº†æœ€åä¸€ä¸ªæ¡¶åªåŒ…å«æ•°åˆ—æœ€å¤§å€¼ï¼Œå‰é¢å„ä¸ªæ¡¶çš„åŒºé—´æŒ‰ç…§æ¯”ä¾‹ç¡®å®šã€‚&lt;/p&gt;
&lt;p&gt;åŒºé—´è·¨åº¦ = ï¼ˆæœ€å¤§å€¼-æœ€å°å€¼ï¼‰/ ï¼ˆæ¡¶çš„æ•°é‡ - 1ï¼‰&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒæ­¥ï¼Œéå†åŸå§‹æ•°åˆ—ï¼ŒæŠŠå…ƒç´ å¯¹å·å…¥åº§æ”¾å…¥å„ä¸ªæ¡¶ä¸­ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1898410/202009/1898410-20200911014714365-106808606.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸‰æ­¥ï¼Œæ¯ä¸ªæ¡¶å†…éƒ¨çš„å…ƒç´ åˆ†åˆ«æ’åºï¼ˆæ˜¾ç„¶ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªæ¡¶éœ€è¦æ’åºï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1898410/202009/1898410-20200911014726062-668953081.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬å››æ­¥ï¼Œéå†æ‰€æœ‰çš„æ¡¶ï¼Œè¾“å‡ºæ‰€æœ‰å…ƒç´ ï¼š&lt;/p&gt;
&lt;p&gt;0.5ï¼Œ0.84ï¼Œ2.18ï¼Œ3.25ï¼Œ4.5&lt;/p&gt;
&lt;p&gt;åˆ°æ­¤ä¸ºæ­¢ï¼Œæ’åºç»“æŸã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®ç°ä»£ç &lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;    public static void bucketSort(double[] array){
        //1.å¾—åˆ°æ•°åˆ—çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œå¹¶ç®—å‡ºå·®å€¼d
        double max = array[0];
        double min = array[0];
        for(int i=1; i&amp;lt;array.length; i++) {
            if(array[i] &amp;gt; max) {
                max = array[i];
            }
            if(array[i] &amp;lt; min) {
                min = array[i];
            }
        }
        double d = max - min;
        //2.åˆå§‹åŒ–æ¡¶
        int bucketNum = array.length;
        ArrayList&amp;lt;LinkedList&amp;lt;Double&amp;gt;&amp;gt; bucketList = new ArrayList&amp;lt;LinkedList&amp;lt;Double&amp;gt;&amp;gt;(bucketNum);
        for(int i = 0; i &amp;lt; bucketNum; i++){
            bucketList.add(new LinkedList&amp;lt;Double&amp;gt;());
        }
        //3.éå†åŸå§‹æ•°ç»„ï¼Œå°†æ¯ä¸ªå…ƒç´ æ”¾å…¥æ¡¶ä¸­
        for(int i = 0; i &amp;lt; array.length; i++){
            int num = (int)((array[i] - min) * (bucketNum-1) / d);
            bucketList.get(num).add(array[i]);
        }
        //4.å¯¹æ¯ä¸ªé€šå†…éƒ¨è¿›è¡Œæ’åº
        for(int i = 0; i &amp;lt; bucketList.size(); i++){
            //JDKåº•å±‚é‡‡ç”¨äº†å½’å¹¶æ’åºæˆ–å½’å¹¶çš„ä¼˜åŒ–ç‰ˆæœ¬
            Collections.sort(bucketList.get(i));
        }
        //5.è¾“å‡ºå…¨éƒ¨å…ƒç´ 
        int index = 0;
        for(LinkedList&amp;lt;Double&amp;gt; list : bucketList){
            for(double element : list){
                array[index] = element;
                index++;
            }
        }
    }
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;ç®—æ³•åˆ†æ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ—¶é—´å¤æ‚åº¦&lt;/strong&gt;ï¼šO(N + C)&lt;/p&gt;
&lt;p&gt;å¯¹äºå¾…æ’åºåºåˆ—å¤§å°ä¸º Nï¼Œå…±åˆ†ä¸º M ä¸ªæ¡¶ï¼Œä¸»è¦æ­¥éª¤æœ‰ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;N æ¬¡å¾ªç¯ï¼Œå°†æ¯ä¸ªå…ƒç´ è£…å…¥å¯¹åº”çš„æ¡¶ä¸­&lt;/li&gt;
&lt;li&gt;M æ¬¡å¾ªç¯ï¼Œå¯¹æ¯ä¸ªæ¡¶ä¸­çš„æ•°æ®è¿›è¡Œæ’åºï¼ˆå¹³å‡æ¯ä¸ªæ¡¶æœ‰ N/M ä¸ªå…ƒç´ ï¼‰&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä¸€èˆ¬ä½¿ç”¨è¾ƒä¸ºå¿«é€Ÿçš„æ’åºç®—æ³•ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O ( N l o g N )ï¼Œå®é™…çš„æ¡¶æ’åºè¿‡ç¨‹æ˜¯ä»¥é“¾è¡¨å½¢å¼æ’å…¥çš„ã€‚&lt;/p&gt;
&lt;p&gt;æ•´ä¸ªæ¡¶æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸ºï¼š&lt;/p&gt;
&lt;p&gt;O ( N ) + O ( M âˆ— ( N / M âˆ— l o g ( N / M ) ) ) = O ( N âˆ— ( l o g ( N / M ) + 1 ) )&lt;/p&gt;
&lt;p&gt;å½“ N = M æ—¶ï¼Œå¤æ‚åº¦ä¸º O ( N )&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç©ºé—´å¤æ‚åº¦&lt;/strong&gt;ï¼šOï¼ˆN+Mï¼‰&lt;/p&gt;
&lt;h2 id=&quot;æ‹“æ‰‘æ’åºï¼ˆtopological-sortï¼‰&quot;&gt;æ‹“æ‰‘æ’åºï¼ˆTopological Sortï¼‰&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;åŸºæœ¬æ€æƒ³&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å’Œå‰é¢ä»‹ç»çš„å‡ ç§æ’åºä¸åŒï¼Œæ‹“æ‰‘æ’åºåº”ç”¨çš„åœºåˆä¸å†æ˜¯ä¸€ä¸ªç®€å•çš„æ•°ç»„ï¼Œè€Œæ˜¯ç ”ç©¶å›¾è®ºé‡Œé¢é¡¶ç‚¹å’Œé¡¶ç‚¹è¿çº¿ä¹‹é—´çš„æ€§è´¨ã€‚æ‹“æ‰‘æ’åºå°±æ˜¯è¦å°†è¿™äº›é¡¶ç‚¹æŒ‰ç…§ç›¸è¿çš„æ€§è´¨è¿›è¡Œæ’åºã€‚&lt;/p&gt;
&lt;p&gt;è¦èƒ½å®ç°æ‹“æ‰‘æ’åºï¼Œå¾—æœ‰å‡ ä¸ªå‰æï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;å›¾å¿…é¡»æ˜¯æœ‰å‘å›¾&lt;/li&gt;
&lt;li&gt;å›¾é‡Œé¢æ²¡æœ‰ç¯&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;æ‹“æ‰‘æ’åºä¸€èˆ¬ç”¨æ¥ç†æ¸…å…·æœ‰ä¾èµ–å…³ç³»çš„ä»»åŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸¾ä¾‹&lt;/strong&gt;ï¼šå‡è®¾æœ‰ä¸‰é—¨è¯¾ç¨‹ Aã€Bã€Cï¼Œå¦‚æœæƒ³è¦å­¦ä¹ è¯¾ç¨‹ C å°±å¿…é¡»å…ˆæŠŠè¯¾ç¨‹ B å­¦å®Œï¼Œè¦å­¦ä¹ è¯¾ç¨‹ Bè¿˜å¾—å…ˆå­¦ä¹ è¯¾ç¨‹ Aï¼Œæ‰€ä»¥å¾—å‡ºè¯¾ç¨‹çš„å­¦ä¹ é¡ºåºåº”è¯¥æ˜¯ A -&amp;gt; B -&amp;gt; Cã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®ç°&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;å°†é—®é¢˜ç”¨ä¸€ä¸ªæœ‰å‘æ— ç¯å›¾ï¼ˆDAG, Directed Acyclic Graphï¼‰è¿›è¡ŒæŠ½è±¡è¡¨è¾¾ï¼Œå®šä¹‰å‡ºå“ªäº›æ˜¯å›¾çš„é¡¶ç‚¹ï¼Œé¡¶ç‚¹ä¹‹é—´å¦‚ä½•äº’ç›¸å…³è”ã€‚&lt;/li&gt;
&lt;li&gt;å¯ä»¥åˆ©ç”¨å¹¿åº¦ä¼˜å…ˆæœç´¢æˆ–æ·±åº¦ä¼˜å…ˆæœç´¢æ¥è¿›è¡Œæ‹“æ‰‘æ’åºã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;strong&gt;ä¾‹é¢˜åˆ†æ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æœ‰ä¸€ä¸ªå­¦ç”Ÿæƒ³è¦ä¿®å®Œ 5 é—¨è¯¾ç¨‹çš„å­¦åˆ†ï¼Œè¿™ 5 é—¨è¯¾ç¨‹åˆ†åˆ«ç”¨ 1ã€2ã€3ã€4ã€5 æ¥è¡¨ç¤ºï¼Œç°åœ¨å·²çŸ¥å­¦ä¹ è¿™äº›è¯¾ç¨‹æœ‰å¦‚ä¸‹çš„è¦æ±‚ï¼š&lt;/p&gt;
&lt;ul readability=&quot;1&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;è¯¾ç¨‹ 2 å’Œ 4 ä¾èµ–äºè¯¾ç¨‹ 1&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;è¯¾ç¨‹ 3 ä¾èµ–äºè¯¾ç¨‹ 2 å’Œ 4&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;è¯¾ç¨‹ 4 ä¾èµ–äºè¯¾ç¨‹ 1 å’Œ 2&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;è¯¾ç¨‹ 5 ä¾èµ–äºè¯¾ç¨‹ 3 å’Œ 4&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;é‚£ä¹ˆè¿™ä¸ªå­¦ç”Ÿåº”è¯¥æŒ‰ç…§æ€æ ·çš„é¡ºåºæ¥å­¦ä¹ è¿™ 5 é—¨è¯¾ç¨‹å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è§£é¢˜æ€è·¯&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥æŠŠ 5 é—¨è¯¾ç¨‹çœ‹æˆæ˜¯ä¸€ä¸ªå›¾é‡Œçš„ 5 ä¸ªé¡¶ç‚¹ï¼Œç”¨æœ‰å‘çº¿æ®µæŒ‰ç…§å®ƒä»¬çš„ç›¸äº’å…³ç³»è¿èµ·æ¥ï¼Œäºæ˜¯å¾—å‡ºä¸‹é¢çš„æœ‰å‘å›¾ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆå¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªæœ‰å‘å›¾é‡Œæ²¡æœ‰ç¯ï¼Œæ— è®ºä»å“ªä¸ªé¡¶ç‚¹å‡ºå‘ï¼Œéƒ½ä¸ä¼šå†å›åˆ°é‚£ä¸ªé¡¶ç‚¹ã€‚å¹¶ä¸”ï¼Œè¿™ä¸ªå›¾é‡Œå¹¶æ²¡æœ‰å­¤å²›çš„å‡ºç°ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å®ƒè¿›è¡Œæ‹“æ‰‘æ’åºã€‚&lt;/p&gt;
&lt;p&gt;æ–¹æ³•å°±æ˜¯ï¼Œä¸€å¼€å§‹çš„æ—¶å€™ï¼Œå¯¹æ¯ä¸ªé¡¶ç‚¹ç»Ÿè®¡å®ƒä»¬å„è‡ªçš„å‰é©±ï¼ˆä¹Ÿå°±æ˜¯å…¥åº¦ï¼‰ï¼š1(0)ï¼Œ2(1)ï¼Œ3(2)ï¼Œ4(1)ï¼Œ5(2)ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1898410/202009/1898410-20200911014744707-110576302.gif&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;é€‰æ‹©å…¶ä¸­ä¸€ä¸ªæ²¡æœ‰å‰é©±ï¼ˆä¹Ÿå°±æ˜¯å…¥åº¦ä¸º 0ï¼‰çš„é¡¶ç‚¹ï¼Œåœ¨è¿™é“é¢˜é‡Œé¢ï¼Œé¡¶ç‚¹ 1 å°±æ˜¯æˆ‘ä»¬è¦æ‰¾çš„é‚£ä¸ªç‚¹ï¼Œå°†å®ƒä½œä¸ºç»“æœè¾“å‡ºã€‚åŒæ—¶åˆ é™¤æ‰è¯¥é¡¶ç‚¹å’Œæ‰€æœ‰ä»¥å®ƒä½œä¸ºèµ·å§‹ç‚¹çš„æœ‰å‘è¾¹ï¼Œæ›´æ–°é¡¶ç‚¹çš„å…¥åº¦è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;æ¥ä¸‹æ¥ï¼Œé¡¶ç‚¹ 2 å°±æ˜¯ä¸‹ä¸€ä¸ªæ²¡æœ‰å‰é©±çš„é¡¶ç‚¹ï¼Œè¾“å‡ºé¡¶ç‚¹ 2ï¼Œå¹¶å°†ä»¥å®ƒä½œä¸ºèµ·ç‚¹çš„æœ‰å‘è¾¹åˆ é™¤ï¼ŒåŒæ—¶æ›´æ–°å…¥åº¦è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;å†æ¥ï¼Œé¡¶ç‚¹ 4 æˆä¸ºäº†æ²¡æœ‰å‰é©±çš„é¡¶ç‚¹ï¼Œè¾“å‡ºé¡¶ç‚¹ 4ï¼Œåˆ é™¤æ‰å®ƒå’Œé¡¶ç‚¹ 3 å’Œ 5 çš„æœ‰å‘è¾¹ã€‚&lt;/li&gt;
&lt;li&gt;ç„¶åï¼Œé¡¶ç‚¹ 3 æ²¡æœ‰äº†å‰é©±ï¼Œè¾“å‡ºå®ƒï¼Œå¹¶åˆ é™¤å®ƒä¸ 5 çš„æœ‰å‘è¾¹ã€‚&lt;/li&gt;
&lt;li&gt;æœ€åï¼Œé¡¶ç‚¹ 5 æ²¡æœ‰å‰é©±ï¼Œè¾“å‡ºå®ƒï¼Œäºæ˜¯å¾—å‡ºæœ€åçš„ç»“æœä¸ºï¼š1ï¼Œ2ï¼Œ4ï¼Œ3ï¼Œ5ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;ä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ªæœ‰å‘æ— ç¯å›¾å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªæ‹“æ‰‘æ’åºçš„åºåˆ—ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®ç°ä»£ç &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿ç”¨å¹¿åº¦ä¼˜å…ˆæœç´¢çš„æ–¹æ³•å¯¹è¿™ä¸ªå›¾çš„ç»“æ„è¿›è¡Œéå†ã€‚åœ¨æ„å»ºè¿™ä¸ªå›¾çš„è¿‡ç¨‹ä¸­ï¼Œç”¨ä¸€ä¸ªé“¾æ¥çŸ©é˜µ adj æ¥è¡¨ç¤ºè¿™ä¸ªå›¾çš„ç»“æ„ï¼Œç”¨ä¸€ä¸ª indegree çš„æ•°ç»„ç»Ÿè®¡æ¯ä¸ªé¡¶ç‚¹çš„å…¥åº¦ï¼Œé‡ç‚¹çœ‹å¦‚ä½•å®ç°æ‹“æ‰‘æ’åºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;void topologicalSort() {
    Queue&amp;lt;Integer&amp;gt; q = new LinkedList(); // å®šä¹‰ä¸€ä¸ªé˜Ÿåˆ— q

    // å°†æ‰€æœ‰å…¥åº¦ä¸º 0 çš„é¡¶ç‚¹åŠ å…¥åˆ°é˜Ÿåˆ— q
    for (int v = 0; v &amp;lt; V; v++) {
        if (indegree[v] == 0) q.add(v);
    }

    // å¾ªç¯ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©º
    while (!q.isEmpty()) {
        int v = q.poll();
        // æ¯æ¬¡å¾ªç¯ä¸­ï¼Œä»é˜Ÿåˆ—ä¸­å–å‡ºé¡¶ç‚¹ï¼Œå³ä¸ºæŒ‰ç…§å…¥åº¦æ•°ç›®æ’åºä¸­æœ€å°çš„é‚£ä¸ªé¡¶ç‚¹
        print(v);
        
        // å°†è·Ÿè¿™ä¸ªé¡¶ç‚¹ç›¸è¿çš„å…¶ä»–é¡¶ç‚¹çš„å…¥åº¦å‡ 1ï¼Œå¦‚æœå‘ç°é‚£ä¸ªé¡¶ç‚¹çš„å…¥åº¦å˜æˆäº† 0ï¼Œå°†å…¶åŠ å…¥åˆ°é˜Ÿåˆ—çš„æœ«å°¾
        for (int u = 0; u &amp;lt; adj[v].length; u++) {
            if (--indegree[u] == 0) {
                q.add(u);
            }
        }
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;ç®—æ³•åˆ†æ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ—¶é—´å¤æ‚åº¦&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç»Ÿè®¡é¡¶ç‚¹çš„å…¥åº¦éœ€è¦ O(n) çš„æ—¶é—´ï¼Œæ¥ä¸‹æ¥æ¯ä¸ªé¡¶ç‚¹è¢«éå†ä¸€æ¬¡ï¼ŒåŒæ ·éœ€è¦ O(n) çš„æ—¶é—´ï¼Œæ‰€ä»¥æ‹“æ‰‘æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚&lt;/p&gt;
</description>
<pubDate>Thu, 10 Sep 2020 17:48:00 +0000</pubDate>
<dc:creator>å¹³é…±</dc:creator>
<og:description>æ’åº å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰ æ’å…¥æ’åºï¼ˆInsertion Sortï¼‰ å½’å¹¶æ’åºï¼ˆMerge Sortï¼‰ å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰ å †æ’åºï¼ˆHeap Sortï¼‰ è®¡æ•°æ’åºï¼ˆCoun</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/p1ng/p/13649366.html</dc:identifier>
</item>
<item>
<title>å†æ·±å…¥ä¸€ç‚¹|binlogå’Œrelay-logåˆ°åº•é•¿å•¥æ ·ï¼Ÿ - ç§‘æŠ€ç¼ªç¼ª</title>
<link>http://www.cnblogs.com/ilovejaney/p/13649345.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/ilovejaney/p/13649345.html</guid>
<description>&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸Šä¸€ç¯‡mysqlé¢è¯•çš„æ–‡ç« ä¹‹åæ”¶åˆ°ä¸å°‘æœ‹å‹çš„æ„è§ï¼Œå¸Œæœ›æ·±å…¥è®²è®²å¤åˆ¶ã€æ—¥å¿—çš„æ ¼å¼è¿™äº›ï¼Œä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥æ·±æŒ–ä¸€ä¸‹mysqlçš„å¤åˆ¶æœºåˆ¶åˆ°åº•æœ‰å“ªä¸€äº›ï¼Œä»¥åŠbinlogå’Œrelay-logçš„ç»“æ„åˆ°åº•æ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚&lt;/p&gt;
&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span class=&quot;prefix&quot;&gt;&lt;span class=&quot;content&quot;&gt;binlogä½œç”¨&lt;/span&gt;&lt;/span&gt;&lt;/h3&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;binlogçš„ä¸»è¦ä½œç”¨æ˜¯è®°å½•æ•°æ®åº“ä¸­è¡¨çš„æ›´æ”¹ï¼Œå®ƒåªè®°å½•æ”¹å˜æ•°æ®çš„sqlï¼Œä¸æ”¹å˜æ•°æ®çš„sqlä¸ä¼šå†™å…¥ï¼Œæ¯”å¦‚selectè¯­å¥ä¸€èˆ¬ä¸ä¼šè¢«è®°å½•ï¼Œå› ä¸ºä»–ä»¬ä¸ä¼šå¯¹æ•°æ®äº§ç”Ÿä»»ä½•æ”¹åŠ¨ã€‚&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”¨ä¸€ä¸ªå®é™…çš„åœºæ™¯çœ‹ä¸‹binlogäº§ç”Ÿçš„è¿‡ç¨‹ï¼Œå‡†å¤‡sqlï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;create&lt;/span&gt; &lt;span&gt;table&lt;/span&gt; test(&lt;span&gt;text&lt;/span&gt; &lt;span&gt;varchar&lt;/span&gt;(&lt;span&gt;20&lt;/span&gt;&lt;span&gt;));
&lt;/span&gt;&lt;span&gt;insert&lt;/span&gt; &lt;span&gt;into&lt;/span&gt; test &lt;span&gt;values&lt;/span&gt; (&lt;span&gt;'&lt;/span&gt;&lt;span&gt;test_text&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt;&lt;span&gt; test;
flush logs;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æŸ¥çœ‹binlog&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
show binlog events &lt;span&gt;in&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;binlog.000029&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;;
&lt;/pre&gt;&lt;/div&gt;
&lt;pre class=&quot;custom&quot; data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;
&lt;span&gt;æ˜¾ç¤ºçš„ç»“æœå¦‚ä¸‹ï¼š&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/007S8ZIlgy1gikthd6sbbj31720cq7al.jpg&quot; alt=&quot;binlog&quot; width=&quot;819&quot; height=&quot;242&quot;/&gt;&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨mysqlbinlogå·¥å…·æ¥æŸ¥çœ‹binlogçš„å†…å®¹ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
show variables &lt;span&gt;like&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;log_%&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;; #æŸ¥çœ‹æ—¥å¿—ç›®å½•
mysqlbinlog &lt;/span&gt;&lt;span&gt;--&lt;/span&gt;&lt;span&gt;short-form --force-if-open --base64-output=never /usr/local/var/mysql/binlog.000029&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;pre class=&quot;custom&quot; data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;
&lt;code class=&quot;hljs&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;&lt;span class=&quot;hljs-string&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/007S8ZIlgy1gilfsvrgv1j30nw0f2n0v.jpg&quot; alt=&quot;&quot; width=&quot;565&quot; height=&quot;356&quot;/&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/007S8ZIlgy1gilfsaocunj311g0u0hdt.jpg&quot; alt=&quot;&quot; width=&quot;754&quot; height=&quot;604&quot;/&gt;&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»æ—¥å¿—æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰§è¡Œäº†åˆ›å»ºè¡¨çš„è¯­å¥ä»¥åŠä¸€ä¸ªFormat_descå¤´å’ŒRatateè½®æ¢äº‹ä»¶ï¼Œè¿™ä¸ªæˆ‘ä»¬ä¼šåœ¨åé¢è®²åˆ°ï¼Œå…ˆçœ‹å‡ ä¸ªå­—æ®µä»£è¡¨çš„å«ä¹‰ã€‚&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;Log_name&lt;/strong&gt;ä»£è¡¨æ—¥å¿—æ–‡ä»¶çš„åç§°ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œçš„æŸ¥è¯¢æ˜¯ç›´æ¥æŸ¥è¯¢binlog.000029ï¼Œé»˜è®¤çš„å†™æ³•æ˜¯show binlog eventsï¼Œä½†æ˜¯è¿™æ ·åªä¼šæŸ¥è¯¢åˆ°ç¬¬ä¸€ä¸ªbinlogï¼Œå¹¶ä¸æ˜¯å½“å‰æ¿€æ´»çŠ¶æ€çš„binlogï¼Œå¦‚æœä½ ä¸çŸ¥é“binlogæœ‰å“ªäº›ï¼Œå¯ä»¥ç”¨å‘½ä»¤:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
show &lt;span&gt;binary&lt;/span&gt;&lt;span&gt; logs; #æŸ¥çœ‹binlogåˆ—è¡¨
show master status; #æŸ¥çœ‹æœ€æ–°çš„binlog&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;pre class=&quot;custom&quot; data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;
&lt;code class=&quot;hljs&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/007S8ZIlgy1gilfb6essgj30eq09wdht.jpg&quot; alt=&quot;&quot; width=&quot;374&quot; height=&quot;251&quot;/&gt;&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;Pos&lt;/strong&gt;ä»£è¡¨æ–‡ä»¶å¼€å§‹çš„ä½ç½®ã€‚&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;Event_type&lt;/strong&gt;ä»£è¡¨äº‹ä»¶çš„ç±»å‹ã€‚&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;Server_id&lt;/strong&gt;æ˜¯åˆ›å»ºäº‹ä»¶çš„æœåŠ¡å™¨IDã€‚&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;End_log_pos&lt;/strong&gt;ä»£è¡¨äº‹ä»¶åœ¨æ–‡ä»¶ä¸­çš„ç»“æŸä½ç½®ï¼Œä»¥ä¸Šé¢ä¸ºä¾‹ï¼Œç¬¬ä¸€æ¬¡æŸ¥è¯¢çš„ç»“æŸä½ç½®æ˜¯723ï¼Œç¬¬äºŒæ¬¡insertä¹‹åæ–‡ä»¶çš„å¼€å§‹ä½ç½®å°±æ˜¯ä»723å¼€å§‹ã€‚&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;Info&lt;/strong&gt;ä»£è¡¨äº‹ä»¶ä¿¡æ¯ï¼Œæ˜¯ä¸€æ®µå¯è¯»çš„æ–‡æœ¬å†…å®¹ã€‚&lt;/p&gt;
&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span class=&quot;prefix&quot;&gt;&lt;span class=&quot;content&quot;&gt;binlogæ—¥å¿—ç»“æ„&lt;/span&gt;&lt;/span&gt;&lt;/h3&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;binlogæ—¥å¿—çš„ç»“æ„å¤§æ¦‚æ˜¯é•¿è¿™æ ·çš„ï¼Œå®ƒç”±ç´¢å¼•æ–‡ä»¶å’Œbinlogæ–‡ä»¶ç»„æˆï¼Œå…¶ä¸­binlogäº‹ä»¶åˆåŒ…å«é€šç”¨å¤´ã€æäº¤å¤´å’Œäº‹ä»¶ä½“3ä¸ªéƒ¨åˆ†ç»„æˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/007S8ZIlgy1gilcgk2jjij30qe0b4406.jpg&quot; alt=&quot;&quot; width=&quot;566&quot; height=&quot;238&quot;/&gt;&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é¦–å…ˆè¯´è¯´ç´¢å¼•æ–‡ä»¶ï¼Œç´¢å¼•æ–‡ä»¶çš„æ¯ä¸€è¡Œéƒ½åŒ…å«äº†ä¸€ä¸ªbinlogæ–‡ä»¶çš„å®Œæ•´æ–‡ä»¶å(ç±»ä¼¼host-bin.001)ï¼Œä¸€äº›å‘½ä»¤æ¯”å¦‚flush logså°†æ‰€æœ‰æ—¥å¿—å†™å…¥ç£ç›˜ä¼šå½±å“åˆ°ç´¢å¼•æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¯ä¸ªbinlogæ–‡ä»¶ä»¥è‹¥å¹²ä¸ªbinlogäº‹ä»¶ç»„æˆï¼Œä»¥æ ¼å¼æè¿°äº‹ä»¶(Format_description)ä½œä¸ºæ–‡ä»¶å¤´(ä¸Šé¢çš„binlogå›¾ç‰‡Format_descäº‹ä»¶)ï¼Œä»¥æ—¥å¿—è½®æ¢äº‹ä»¶(rotate)ä½œä¸ºæ–‡ä»¶å°¾ã€‚&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;Format_description&lt;/strong&gt;åŒ…å«binlogæ–‡ä»¶çš„æœåŠ¡å™¨ä¿¡æ¯ã€æ–‡ä»¶çŠ¶æ€çš„å…³é”®ä¿¡æ¯ç­‰ã€‚å¦‚æœæœåŠ¡å™¨å…³é—­æˆ–è€…é‡å¯ï¼Œåˆ™ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„binlogæ–‡ä»¶ï¼ŒåŒæ—¶å†™å…¥ä¸€ä¸ªæ–°çš„format_descriptionã€‚ä»–çš„æ ¼å¼å¤§è‡´å¦‚ä¸‹ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;2&lt;/span&gt;                binlog&lt;span&gt;-&lt;/span&gt;&lt;span&gt;version
string&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;50&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;       mysql&lt;span&gt;-&lt;/span&gt;&lt;span&gt;server version
&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;                &lt;span&gt;create&lt;/span&gt; &lt;span&gt;timestamp&lt;/span&gt;
&lt;span&gt;1&lt;/span&gt;&lt;span&gt;                event header length
string&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;        event type header lengths
&lt;/pre&gt;&lt;/div&gt;
&lt;pre class=&quot;custom&quot; data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;
&lt;code class=&quot;hljs&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;&lt;span class=&quot;hljs-built_in&quot;&gt;&lt;span class=&quot;hljs-number&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;æ—¥å¿—è½®æ¢äº‹ä»¶&lt;/strong&gt;åˆ™åŒ…å«ä¸‹ä¸€ä¸ªbinlogçš„æ–‡ä»¶åä»¥åŠå¼€å§‹è¯»å–çš„ä½ç½®ï¼Œå®ƒç”±æœåŠ¡å™¨å†™å®Œbinlogåæ·»åŠ åˆ°æ–‡ä»¶å°¾ï¼Œè½®æ¢äº‹ä»¶å¹¶ä¸ä¼šæ¯æ¬¡éƒ½å­˜åœ¨ï¼Œæ ¼å¼å¦‚ä¸‹ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;if&lt;/span&gt; binlog&lt;span&gt;-&lt;/span&gt;version &lt;span&gt;&amp;gt;&lt;/span&gt; &lt;span&gt;1&lt;/span&gt;&lt;span&gt; {
&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;&lt;span&gt;              position
}
string&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;      name &lt;span&gt;of&lt;/span&gt; the &lt;span&gt;next&lt;/span&gt; binlog
&lt;/pre&gt;&lt;/div&gt;
&lt;pre class=&quot;custom&quot; data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;
&lt;code class=&quot;hljs&quot;&gt; &lt;/code&gt;
&lt;/pre&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;binlogäº‹ä»¶&lt;/strong&gt;åŒ…å«è‹¥å¹²ä¸ªäº‹åŠ¡ç»„æˆçš„ç»„(group)ï¼Œæ¯ä¸ªç»„å¯¹åº”ä¸€ä¸ªäº‹åŠ¡ï¼Œå¦‚æœæ˜¯create alterè¯­å¥ä¸å±äºäº‹åŠ¡è¯­å¥çš„è¯ï¼Œåˆ™ä»–ä»¬æœ¬èº«å°±æ˜¯ä¸€ä¸ªç»„ï¼Œæ¯ä¸ªç»„è¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/007S8ZIlgy1gikjc7j2sij30a60ei0ur.jpg&quot; alt=&quot;&quot; width=&quot;292&quot; height=&quot;416&quot;/&gt;&lt;/p&gt;
&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span class=&quot;prefix&quot;&gt;&lt;span class=&quot;content&quot;&gt;binlogäº‹ä»¶ç»“æ„&lt;/span&gt;&lt;/span&gt;&lt;/h3&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¯ä¸ªbinlogäº‹ä»¶ç”±3ä¸ªéƒ¨åˆ†ç»„æˆï¼š&lt;/p&gt;
&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;li&gt;é€šç”¨å¤´ï¼ŒåŒ…å«binlogä¸­æ‰€æœ‰äº‹ä»¶å…·å¤‡çš„åŸºæœ¬ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;æäº¤å¤´ï¼Œå¯¹äºä¸åŒç±»å‹çš„äº‹ä»¶æ¥è¯´ï¼Œæäº¤å¤´çš„å†…å®¹ä¹Ÿä¸å°½ç›¸åŒ&lt;/li&gt;
&lt;li&gt;äº‹ä»¶ä½“ï¼Œå­˜å‚¨äº‹ä»¶çš„ä¸»è¦æ•°æ®ï¼ŒåŒæ ·å¯¹äºä¸åŒç±»å‹äº‹ä»¶ä¹Ÿä¸åŒã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span class=&quot;prefix&quot;&gt;&lt;span class=&quot;content&quot;&gt;binlogè½®æ¢å’Œæ¸…ç†&lt;/span&gt;&lt;/span&gt;&lt;/h3&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥ï¼Œbinlogå¹¶éåªæœ‰ä¸€ä¸ªï¼Œè€ŒåŸºäºçœŸå®çš„åœºæ™¯æ¥è¯´ï¼Œå§‹ç»ˆå†™ä¸€ä¸ªbinlogæ–‡ä»¶è‚¯å®šä¹Ÿæ˜¯ä¸å¯å–çš„ï¼Œè€Œbinlogè½®æ¢ä¸»è¦æœ‰3ä¸ªåœºæ™¯ï¼š&lt;/p&gt;
&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;li&gt;æœåŠ¡å™¨å¯åŠ¨ï¼Œæ¯æ¬¡æœåŠ¡å™¨å¯åŠ¨éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„binlogæ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;è¾¾åˆ°æœ€å¤§å¤§å°ï¼Œå¯ä»¥é€šè¿‡binlog-cache-sizeæ§åˆ¶å¤§å°ï¼Œè¾¾åˆ°æœ€å¤§å¤§å°åå°†æ›´æ¢ã€‚&lt;/li&gt;
&lt;li&gt;æ˜¾ç¤ºåˆ·æ–°ï¼Œflush logså°†æ‰€æœ‰æ—¥å¿—å†™å…¥ç£ç›˜ï¼Œè¿™æ—¶å€™ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å†™å…¥ï¼Œä»ç¬¬ä¸€ä¸ªä¾‹å­ä¹Ÿèƒ½çœ‹å‡ºæ¥æ‰§è¡Œå®Œä¹‹åç”Ÿæˆäº†ä¸€ä¸ªæ–°çš„æ—¥å¿—binlog.000030çš„æ–‡ä»¶å¹¶ä¸”å¼€å§‹çš„ä½ç½®æ˜¯4ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/007S8ZIlgy1giktnquwn9j30xu03wmye.jpg&quot; alt=&quot;&quot; width=&quot;653&quot; height=&quot;75&quot;/&gt;&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæˆ‘ä»¬çš„binlogæ–‡ä»¶ä¼šè¶Šæ¥è¶Šå¤šï¼Œè¿™æ—¶å€™æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥æ¸…é™¤binlogï¼š&lt;/p&gt;
&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;li&gt;é€šè¿‡è®¾ç½®expire-logs-daysæ§åˆ¶æƒ³ä¿ç•™çš„binlogæ—¥å¿—æ–‡ä»¶å¤©æ•°ï¼Œç³»ç»Ÿå°†ä¼šè‡ªåŠ¨æ¸…ç†ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡PURGE BINARY LOGSæ‰‹åŠ¨æ¸…ç†&lt;/li&gt;
&lt;/ol&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span class=&quot;prefix&quot;&gt;&lt;span class=&quot;content&quot;&gt;relay-logç»“æ„&lt;/span&gt;&lt;/span&gt;&lt;/h3&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;relay-logä¸­ç»§æ—¥å¿—æ˜¯è¿æ¥masterå’Œslaveçš„æ ¸å¿ƒï¼Œæˆ‘ä»¬æ¥æ·±å…¥äº†è§£ä¸€ä¸‹å®ƒçš„ç»“æ„å’Œä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/007S8ZIlgy1gikgt0jis3j30ns0bimzr.jpg&quot; alt=&quot;image-20200909161115718&quot; width=&quot;593&quot; height=&quot;287&quot;/&gt;&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;relay-logçš„ç»“æ„å’Œbinlogéå¸¸ç›¸ä¼¼ï¼Œåªä¸è¿‡ä»–å¤šäº†ä¸€ä¸ªmaster.infoå’Œrelay-log.infoçš„æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;master.info&lt;/strong&gt;è®°å½•äº†ä¸Šä¸€æ¬¡è¯»å–åˆ°masteråŒæ­¥è¿‡æ¥çš„binlogçš„ä½ç½®ï¼Œä»¥åŠè¿æ¥masterå’Œå¯åŠ¨å¤åˆ¶å¿…é¡»çš„æ‰€æœ‰ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;relay-log.info&lt;/strong&gt;è®°å½•äº†æ–‡ä»¶å¤åˆ¶çš„è¿›åº¦ï¼Œä¸‹ä¸€ä¸ªäº‹ä»¶ä»ä»€ä¹ˆä½ç½®å¼€å§‹ï¼Œç”±sqlçº¿ç¨‹è´Ÿè´£æ›´æ–°ã€‚&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸Šä¸€ç¯‡æ–‡ç« æˆ‘ä»¬æåˆ°äº†æ•´ä¸ªå¤åˆ¶æµç¨‹çš„è¿‡ç¨‹å¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/007S8ZIlgy1gikts3vqiwj30ta0h23zj.jpg&quot; alt=&quot;&quot; width=&quot;607&quot; height=&quot;354&quot;/&gt;&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;çŸ¥é“binlogå’Œrelay-logçš„ç»“æ„ä¹‹åï¼Œæˆ‘ä»¬é‡æ–°æ¢³ç†ä¸€ä¸‹æ•´ä¸ªé“¾è·¯çš„æµç¨‹ï¼Œè¿™é‡Œæˆ‘ä»¬å‡å®šmaster.infoå’Œrelay-log.infoéƒ½æ˜¯å­˜åœ¨çš„æƒ…å†µï¼š&lt;/p&gt;
&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;li&gt;Masteræ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚è¯­å¥ï¼Œåœ¨è¯­å¥ç»“æŸä¹‹å‰å‘äºŒè¿›åˆ¶æ—¥å¿—å†™å…¥ä¸€æ¡è®°å½•ï¼Œå¯èƒ½åŒ…å«å¤šä¸ªäº‹ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;æ­¤æ—¶ï¼Œä¸€ä¸ªSlaveè¿æ¥åˆ°Masterï¼ŒMasterçš„dumpçº¿ç¨‹ä»binlogè¯»å–æ—¥å¿—å¹¶å‘é€åˆ°Slaveçš„IOçº¿ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;IOçº¿ç¨‹ä»master.infoè¯»å–åˆ°ä¸Šä¸€æ¬¡å†™å…¥çš„æœ€åçš„ä½ç½®ã€‚&lt;/li&gt;
&lt;li&gt;IOçº¿ç¨‹å†™å…¥æ—¥å¿—åˆ°relay-logä¸­ç»§æ—¥å¿—ï¼Œå¦‚æœè¶…è¿‡æŒ‡å®šçš„relay-logå¤§å°ï¼Œå†™å…¥è½®æ¢äº‹ä»¶ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„relay-logã€‚&lt;/li&gt;
&lt;li&gt;æ›´æ–°master.infoçš„æœ€åä½ç½®&lt;/li&gt;
&lt;li&gt;SQLçº¿ç¨‹ä»relay-log.infoè¯»å–è¿›ä¸Šä¸€æ¬¡è¯»å–çš„ä½ç½®&lt;/li&gt;
&lt;li&gt;SQLçº¿ç¨‹è¯»å–æ—¥å¿—äº‹ä»¶&lt;/li&gt;
&lt;li&gt;åœ¨æ•°æ®åº“ä¸­æ‰§è¡Œsql&lt;/li&gt;
&lt;li&gt;æ›´æ–°relay-log.infoçš„æœ€åä½ç½®&lt;/li&gt;
&lt;li&gt;Slaveè®°å½•è‡ªå·±çš„binlogæ—¥å¿—&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/007S8ZIlgy1gikuupwskzj31jg0s6k1n.jpg&quot; alt=&quot;&quot; width=&quot;771&quot; height=&quot;391&quot;/&gt;&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†æ˜¯åœ¨è¿™é‡ŒIOå’ŒSQLçº¿ç¨‹æœ‰ä¼šäº§ç”Ÿé‡å¤äº‹ä»¶çš„é—®é¢˜ï¼Œä¸¾ä¸€ä¸ªåœºæ™¯ï¼š&lt;/p&gt;
&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;li&gt;å…ˆè®°å½•ä¸­ç»§æ—¥å¿—ï¼Œç„¶åæ›´æ–°master.infoä½ç½®&lt;/li&gt;
&lt;li&gt;æ­¤æ—¶æœåŠ¡å™¨å´©æºƒï¼Œå†™å…¥master.infoå¤±è´¥&lt;/li&gt;
&lt;li&gt;æœåŠ¡å™¨æ¢å¤ï¼Œå†æ¬¡åŒæ­¥ä»master.infoè·å–åˆ°çš„æ˜¯ä¸Šä¸€æ¬¡çš„ä½ç½®ï¼Œä¼šå¯¼è‡´äº‹ä»¶é‡å¤æ‰§è¡Œ&lt;/li&gt;
&lt;/ol&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ—¢ç„¶ä¼šæœ‰è¿™ä¸ªé—®é¢˜è¿˜ä¸ºä»€ä¹ˆè¦è¿™æ ·åšå‘¢ï¼Ÿå‡è®¾åè¿‡æ¥ï¼Œå…ˆæ›´æ–°master.infoå†è®°å½•ä¸­ç»§æ—¥å¿—ï¼Œè¿™æ ·å¸¦æ¥çš„é—®é¢˜å°±æ˜¯ä¸¢å¤±æ•°æ®äº†ã€‚è€Œmysqlè®¤ä¸ºä¸¢å¤±æ¯”é‡å¤æ›´ä¸¥é‡ï¼Œæ‰€ä»¥è¦å…ˆåˆ·æ–°æ—¥å¿—ï¼Œä¿å¤§è¿˜æ˜¯ä¿å°mysqlå¸®ä½ åšäº†å†³å®šã€‚&lt;/p&gt;
&lt;p&gt;- END -&lt;/p&gt;

</description>
<pubDate>Thu, 10 Sep 2020 17:14:00 +0000</pubDate>
<dc:creator>ç§‘æŠ€ç¼ªç¼ª</dc:creator>
<og:description>ä¸Šä¸€ç¯‡mysqlé¢è¯•çš„æ–‡ç« ä¹‹åæ”¶åˆ°ä¸å°‘æœ‹å‹çš„æ„è§ï¼Œå¸Œæœ›æ·±å…¥è®²è®²å¤åˆ¶ã€æ—¥å¿—çš„æ ¼å¼è¿™äº›ï¼Œä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥æ·±æŒ–ä¸€ä¸‹mysqlçš„å¤åˆ¶æœºåˆ¶åˆ°åº•æœ‰å“ªä¸€äº›ï¼Œä»¥åŠbinlogå’Œrelay-logçš„ç»“æ„åˆ°åº•æ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/ilovejaney/p/13649345.html</dc:identifier>
</item>
<item>
<title>Javaå¤šçº¿ç¨‹ç±»FutureTaskæºç é˜…è¯»ä»¥åŠæµ…æ - rainple</title>
<link>http://www.cnblogs.com/rainple/p/13609069.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/rainple/p/13609069.html</guid>
<description>&lt;p&gt;ã€€ã€€FutureTaskæ˜¯ä¸€ä¸ªå…·ä½“çš„å®ç°ç±»ï¼Œå®ç°äº†RunnableFutureæ¥å£ï¼ŒRunnableFutureåˆ†åˆ«ç»§æ‰¿äº†Runnableå’ŒFutureæ¥å£ï¼Œå› æ­¤FutureTaskç±»æ—¢å¯ä»¥è¢«çº¿ç¨‹æ‰§è¡Œï¼Œåˆå¯ä»¥æ‹¿åˆ°çº¿ç¨‹æ‰§è¡Œçš„ç»“æœã€‚FutrueTaskåº”ç”¨äºå¤šçº¿ç¨‹ä¸­å¼‚æ­¥å¤„ç†å¹¶å¾—åˆ°å¤„ç†ç»“æœçš„åœºæ™¯ï¼Œæ¯”å¦‚ï¼šåŠ å…¥æœ‰ä¸ªæµç¨‹éœ€è¦è°ƒç”¨è¿œç¨‹æ¥å£æ‹¿åˆ°ç›¸å…³æ•°æ®åœ¨æœ¬åœ°è¿›è¡Œå¤„ç†ï¼Œä½†æ˜¯è¿™ä¸ªæ¥å£èŠ±è´¹æ—¶é—´æ¯”è¾ƒé•¿ã€‚å¦‚æœä½¿ç”¨ä¼ ç»Ÿçš„é˜»å¡çº¿ç¨‹å»å¤„ç†çš„è¯ï¼Œé‚£ä¹ˆå°±ä¼šä¸€ç›´é˜»å¡åœ¨è°ƒç”¨æ¥å£è¿™é‡Œï¼Œå…¶å®ƒçš„äº‹æƒ…éƒ½å¹²ä¸äº†ï¼Œè¿™æ ·æ“ä½œæ˜¾ç„¶æ•ˆç‡ç›¸å¯¹è¾ƒä½çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨FutureTaskæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒFutureTaskå¯ä»¥å¼‚æ­¥è°ƒç”¨è¿œç«¯æ¥å£ï¼Œé‚£ä¹ˆå½“å‰çº¿ç¨‹å°±å¯ä»¥åšä¸è¿œç«¯æ¥å£æ— å…³çš„æ•°æ®ï¼ŒåŒç®¡é½ä¸‹æé«˜æ•ˆç‡ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€FutureTask UMLç±»å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1519364/202009/1519364-20200903115737925-876692834.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â ã€€ã€€FutureTaskç±»ç®€å•çš„ä½¿ç”¨ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;36&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
 public static void main(String[] args) throws InterruptedException, ExecutionException {
        FutureTask&amp;lt;String&amp;gt; futureTask = new FutureTask&amp;lt;&amp;gt;(() -&amp;gt; {
            System.out.println(&quot;å¼‚æ­¥å¤„ç†&quot;);
            Thread.sleep(3000);
            return &quot;ok&quot;;
        });
        new Thread(futureTask).start();
        System.out.println(&quot;åŒæ­¥å¤„ç†å…¶å®ƒäº‹æƒ…&quot;);
        Thread.sleep(1000);
        System.out.println(&quot;ç­‰å¾…å¼‚æ­¥å¤„ç†ç»“æœï¼š&quot; + futureTask.get());
        System.out.println(&quot;å¤„ç†å®Œæˆ&quot;);
    }
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ã€€ã€€FutureTaskç±»æœ‰stateï¼Œcallableï¼Œoutcomeï¼Œrunnerå’Œwaiters 5ä¸ªæˆå‘˜å˜é‡&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;em&gt;&lt;em&gt;ã€€ã€€&lt;img src=&quot;https://img2020.cnblogs.com/blog/1519364/202009/1519364-20200903155942824-417622120.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/p&gt;


&lt;h3&gt;ã€€ã€€1.state&lt;/h3&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€çº¿ç¨‹è¿è¡ŒçŠ¶æ€ï¼Œæœ‰ä»¥ä¸‹å‡ ç§çŠ¶æ€ï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€NEWï¼šåˆå§‹çŠ¶æ€ï¼Œåœ¨åˆå§‹åŒ–æ—¶çš„çŠ¶æ€ï¼ŒçŠ¶æ€å€¼ä¸º0ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€COMPLETING: å®Œæˆä¸­çŠ¶æ€ï¼Œrunæ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œå¯¹è¿”å›å€¼è¿›è¡Œèµ‹å€¼æ¬ çš„çŠ¶æ€ï¼Œå€¼ä¸º1ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€NORMAL: æ­£å¸¸çŠ¶æ€ï¼Œçº¿ç¨‹æ­£å¸¸æ‰§è¡Œï¼Œåœ¨è¿”å›å€¼è¢«èµ‹å€¼è¢«èµ‹å€¼æˆåŠŸåçš„çŠ¶æ€ï¼Œå€¼ä¸º2ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€EXCEPTIONALï¼šå¼‚å¸¸çŠ¶æ€ï¼Œåœ¨æ‰§è¡Œç”¨æˆ·å›è°ƒæ–¹å¼callçš„è¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸ï¼Œå€¼ä¸º3ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€CANCELLEDï¼š å–æ¶ˆçŠ¶æ€ï¼Œç”¨æˆ·è°ƒç”¨cancel(false)æ–¹æ³•æ—¶çš„çŠ¶æ€ï¼Œå€¼ä¸º4ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€INTERRUPTINGï¼šæ‰“æ–­ä¸­çŠ¶æ€ï¼Œç”¨æˆ·è°ƒç”¨cancel(true)æ–¹æ³•æ—¶çš„çŠ¶æ€ï¼Œå€¼ä¸º5ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€INTERRUPTEDï¼š è¢«æ‰“æ–­çŠ¶æ€ï¼Œç”¨æˆ·è°ƒç”¨cancel(true)æ–¹æ³•æ—¶ï¼Œrunnerçº¿ç¨‹æ‰§è¡Œæ‰“æ–­æ–¹æ³•å®Œæˆåçš„çŠ¶æ€ï¼Œå€¼ä¸º6ï¼›&lt;/p&gt;

&lt;p&gt;ã€€ã€€ã€€ã€€è¿è¡ŒçŠ¶æ€è½¬æ¢ï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€NEW -&amp;gt; COMPLETING -&amp;gt; NORMAL&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€NEW -&amp;gt; COMPLETING -&amp;gt; EXCEPTIONAL&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€NEW -&amp;gt; CANCELLED&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€NEW -&amp;gt; INTERRUPTING -&amp;gt; INTERRUPTED&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€&lt;img src=&quot;https://img2020.cnblogs.com/blog/1519364/202009/1519364-20200903151322140-1833170702.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;


&lt;h3&gt;ã€€ã€€2.callable&lt;/h3&gt;
&lt;p&gt;&lt;em&gt;ã€€ã€€è¯¥æˆå‘˜å˜é‡ç”¨äºå¼‚æ­¥æ‰§è¡Œç”¨æˆ·è‡ªå®šä¹‰ä¸šåŠ¡ä»£ç ï¼Œå½“futureTaskè·å¾—cpuæ—¶é—´ç‰‡åè°ƒç”¨runæ–¹æ³•ï¼Œåœ¨runæ–¹æ³•ä¸­è°ƒç”¨callable.call(),è·å–åˆ°æ‰§è¡Œç»“æœã€‚&lt;br/&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;ã€€ã€€&lt;/em&gt;&lt;/p&gt;
&lt;h3&gt;&lt;em&gt;ã€€ã€€&lt;/em&gt;3.outcome&lt;/h3&gt;
&lt;p&gt;&lt;em&gt;ã€€ã€€å¼‚æ­¥æ‰§è¡Œè¾“å‡ºç»“æœï¼Œç±»å‹ä¸ºobjectã€‚èµ‹å€¼æ—¶æœºæ—¶åœ¨callable.call()æ–¹å¼æ‰§è¡Œå®Œæˆåã€‚&lt;/em&gt;&lt;/p&gt;

&lt;h3&gt;&lt;em&gt;ã€€ã€€&lt;/em&gt;4.runner&lt;/h3&gt;
&lt;p&gt;&lt;em&gt;ã€€ã€€ç”¨äºæ‰§è¡Œcallableæ¥å£ï¼Œåœ¨futureTaskè¢«cpuè°ƒåº¦æ—¶ä¼šä½¿ç”¨casèµ‹å€¼ä¸ºå½“å‰çº¿ç¨‹ã€‚å½“å‰çº¿ç¨‹æ‰§è¡Œå®Œæˆåè®¾ç½®ä¸ºnullï¼Œç­‰å¾…gcå›æ”¶ã€‚&lt;/em&gt;&lt;/p&gt;

&lt;h3&gt;&lt;em&gt;ã€€ã€€&lt;/em&gt;5.waiters&lt;/h3&gt;
&lt;p&gt;&lt;em&gt;ã€€ã€€å†…éƒ¨ç±»å®ç°çš„å•å‘é“¾è¡¨ï¼Œç”¨äºç­‰å¾…è·å–æ‰§è¡Œç»“æœã€‚æ¯æ¬¡è°ƒç”¨get()æ–¹æ³•æ—¶éƒ½ä¼šå°†è¯¥çº¿ç¨‹æ”¾å…¥ç­‰å¾…é˜Ÿåˆ—çš„å¤´éƒ¨ï¼Œå½“è¯¥çº¿ç¨‹è¢«æ‰“æ–­åï¼Œæˆ–è€…getï¼ˆtimeoutï¼‰æ–¹æ³•è¿‡æœŸåå°±ä¼šé‡è¿™ä¸ªç­‰å¾…é˜Ÿåˆ—ä¸­ç§»é™¤ã€‚å½“callable.call()æ‰§è¡Œå®Œæˆåä¼šä»å¤´éƒ¨å¼€å§‹éå†é€ä¸ªå”¤é†’ç­‰å¾…çº¿ç¨‹ï¼Œå¹¶å°†æ‰§è¡Œç»“æœè¿”å›ã€‚&lt;/em&gt;&lt;/p&gt;


&lt;h3&gt;ã€€ã€€1.runæ–¹æ³•&lt;/h3&gt;
&lt;p&gt;ã€€ã€€runæ–¹æ³•é—´æ¥å®ç°äºRunnableçš„æ¥å£ï¼Œæ‰€ä»¥å½“futureTaskçº¿ç¨‹è·å¾—cpuèµ„æºåä¼šè°ƒç”¨è¯¥æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€1.é¦–å…ˆå…ˆåˆ¤æ–­å½“å‰çŠ¶æ€æ˜¯å¦ä¸ºåˆå§‹åŒ–çŠ¶æ€ï¼Œå¦‚æœä¸æ˜¯åˆå§‹çŠ¶æ€ç›´æ¥ç»“æŸè¯¥æ–¹æ³•ã€‚å¦åˆ™ä½¿ç”¨casæ–¹å¼ç»™æˆå‘˜å˜é‡runnerèµ‹å€¼ï¼Œèµ‹å€¼ä¸ºå½“å‰çº¿ç¨‹ã€‚ç”¨casæ–¹å¼èƒ½å¤Ÿä¿è¯å¤šçº¿ç¨‹ç¯å¢ƒä¸‹èµ‹å€¼æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ä¸æ‡‚casçš„åŒå­¦è‡ªè¡ŒæŸ¥é˜…ç›¸å…³èµ„æ–™ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€2.å¦‚æœcallableä¸ä¸ºnullå¹¶ä¸”stateçŠ¶æ€ä¸ºNEWï¼Œåˆ™æ‰§è¡Œcallable.call()æ–¹æ³•ï¼Œå¹¶å¾—åˆ°è¯¥æ–¹æ³•çš„è¿”å›å€¼ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€3.å¦‚æœæ‰§è¡Œcallæ–¹æ³•å‡ºç°å¼‚å¸¸æ—¶ï¼Œæ‰§è¡ŒsetExceptionæ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†stateçš„NEWçŠ¶æ€ä½¿ç”¨casæ–¹å¼ä¿®æ”¹ä¸ºCOMPLETINGçŠ¶æ€ï¼Œä¿®æ”¹æˆåŠŸåoutcomeè®¾ç½®ä¸ºå½“å‰æŠ›å‡ºçš„å¼‚å¸¸ï¼ŒçŠ¶æ€å†æ¬¡æ”¹ä¸ºEXCEPTIONALçŠ¶æ€ã€‚ç„¶åå°†ç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹éƒ½å”¤é†’ï¼Œå¹¶ä»é˜Ÿåˆ—ä¸­ç§»é™¤ã€‚è°ƒç”¨é’©å­done()æ–¹æ³•ï¼Œå°†callableæ·ä¸ºnullã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€4.å¦‚æœcallæ–¹å¼æ‰§è¡ŒæˆåŠŸï¼Œä¸‹ä¸€æ­¥åˆ™è°ƒç”¨setæ–¹æ³•ï¼Œè¯¥æ–¹æ³•é¦–å…ˆå°†NEWçŠ¶æ€ç”¨casä¿®æ”¹æˆCOMPLETINGçŠ¶æ€ï¼Œä¿®æ”¹æˆåŠŸåå°†callæ‰§è¡Œç»“æœèµ‹å€¼åˆ°outcomeå˜é‡ï¼ŒCOMPLETINGçŠ¶æ€ä¿®æ”¹ä¸ºNORMALï¼Œå”¤é†’ç­‰å¾…çº¿ç¨‹å¹¶ä»é˜Ÿåˆ—ç§»é™¤ï¼Œè°ƒç”¨ç‹—å­æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€5.æ‰§è¡Œfinallyä»£ç çš„ä»£ç ï¼Œå°†runneræ·ä¸ºnullï¼Œå¦‚æœå½“å‰çŠ¶æ€ä¸ºæ‰“æ–­ä¸­ï¼Œé‚£ä¹ˆä¼šå°†å½“å‰èµ„æºè®©å‡ºï¼Œç›´åˆ°çº¿ç¨‹æœ€ç»ˆè¢«æ‰“æ–­ã€‚&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;38&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
 /**
     * Runnable#run();
     * çº¿ç¨‹è·å¾—cpuèµ„æºåä¼šæ‰§è¡Œè¯¥æ–¹æ³•
     */
    public void run() {
        //åˆ¤æ–­å½“å‰çŠ¶æ€æ˜¯ä¸æ˜¯åˆå§‹çŠ¶æ€
        //å°†runnerèµ‹å€¼ä¸ºå½“å‰çº¿ç¨‹
        if (state != NEW ||
            !UNSAFE.compareAndSwapObject(this, runnerOffset,
                                         null, Thread.currentThread()))
            return;
        try {
            Callable&amp;lt;V&amp;gt; c = callable;
            if (c != null &amp;amp;&amp;amp; state == NEW) {
                V result;
                boolean ran;
                try {
                    //è°ƒç”¨ç”¨æˆ·ä¸šåŠ¡æµç¨‹
                    result = c.call();
                    ran = true;
                } catch (Throwable ex) {
                    result = null;
                    ran = false;
                    //æŠ›å‡ºå¼‚å¸¸ï¼Œä¿®æ”¹å“åº”çš„çŠ¶æ€
                    setException(ex);
                }
                if (ran)
                    set(result);
            }
        } finally {
            // runner must be non-null until state is settled to
            // prevent concurrent calls to run()
            runner = null;
            // state must be re-read after nulling runner to prevent
            // leaked interrupts
            int s = state;
            if (s &amp;gt;= INTERRUPTING)
                handlePossibleCancellationInterrupt(s);
        }
    }
&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;45&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
/**
     * 1.ä¿®æ”¹çŠ¶æ€å€¼  NEW  --&amp;gt; COMPLETING --&amp;gt;  EXCEPTIONAL
     * 2.ç§»é™¤å¹¶å”¤é†’æ‰€æœ‰ç­‰å¾…ä¸­çš„çº¿ç¨‹
     * @param t
     */
    protected void setException(Throwable t) {
        //å°†stateä¿®æ”¹ä¸ºCOMPLETING
        if (UNSAFE.compareAndSwapInt(this, stateOffset, NEW, COMPLETING)) {
            outcome = t;
            //å°†stateä¿®æ”¹ä¸ºEXCEPTIONAL
            UNSAFE.putOrderedInt(this, stateOffset, EXCEPTIONAL); // final state
            //å¯¹è¿”å›å€¼è¿›è¡Œå¤„ç†
            finishCompletion();
        }
    }

/**
     * 1.çŠ¶æ€å€¼  NEW  --&amp;gt; COMPLETING  --&amp;gt; NORMAL
     * 2.è®¾ç½®æ‰§è¡Œç»“æœå€¼
     * 3.å”¤é†’æ‰€æœ‰ç­‰å¾…ä¸­çš„çº¿ç¨‹
     * @param v
     */
    protected void set(V v) {
        if (UNSAFE.compareAndSwapInt(this, stateOffset, NEW, COMPLETING)) {
            outcome = v;
            UNSAFE.putOrderedInt(this, stateOffset, NORMAL); // final state
            finishCompletion();
        }
    }
&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;ã€€ã€€2.get() å’Œ get(long timeout,TimeUnit timeUnit);&lt;/h3&gt;
&lt;p&gt;ã€€ã€€ä¸¤ä¸ªæ–¹æ³•çš„åŒºåˆ«åœ¨äºå‰è€…æ²¡æœ‰è¶…æ—¶æ—¶é—´ï¼Œåè€…ç”±è¶…æ—¶æ—¶é—´ï¼Œæµç¨‹æ˜¯åŸºæœ¬å·®ä¸å¤šçš„ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€1.å¦‚æœstateä¸ºCOMPLETEDï¼Œè¿›å…¥reportæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šåˆ¤æ–­å½“å‰çš„çŠ¶æ€ä¸ºNORMALæ—¶å°†outcomeè¿”å›ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€2.å¦‚æœstateä¸ä¸ºCOMPLETEDè¿›å…¥awaitDoneæ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€3.awaitDoneæ–¹æ³•é¡¾åæ€ä¹‰å°±æ˜¯ç­‰å¾…æ“ä½œç»“æœã€‚æ–¹æ³•é‡Œé¢æ˜¯ä¸€ä¸ªæ­»å¾ªç¯ï¼Œåœ¨å¾ªç¯è¿‡ç¨‹ä¸­å¦‚æœçº¿ç¨‹è¢«æ‰“æ–­ï¼Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå¹¶å°†åˆšåˆ›å»ºçš„ç­‰å¾…çº¿ç¨‹ä»é˜Ÿåˆ—ä¸­ç§»é™¤ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€4.å¦‚æœçŠ¶æ€å·²å®Œæˆï¼Œå°†ç­‰å¾…çº¿ç¨‹ç»‘å®šçš„çº¿ç¨‹è®¾ä¸ºnullï¼Œå¹¶å°†çŠ¶æ€è¿”å›ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€5.å¦‚æœå½“å‰çŠ¶æ€ä¸ºCOMPLETINGåˆ™å°†å½“å‰cpuèµ„æºè®©å‡ºç»™å…¶å®ƒçº¿ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€6.å¦‚æœç­‰å¾…èŠ‚ç‚¹ä¸ºnullï¼Œå°±åˆ›å»ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œè¯¥èŠ‚ç‚¹ç»‘å®šäº†å½“å‰çš„çº¿ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€7.å¦‚æœæ–°åˆ›å»ºçš„èŠ‚ç‚¹è¿˜æ²¡æœ‰ä¸ç­‰å¾…é˜Ÿåˆ—è¿›è¡Œç»‘å®šï¼Œé‚£ä¹ˆå°±å°†è¯¥èŠ‚ç‚¹æ”¾å…¥é˜Ÿåˆ—å¤´éƒ¨ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€8.å¦‚æœè°ƒç”¨çš„æ˜¯ç”±è¿‡æœŸæ—¶é—´çš„æ–¹æ³•ï¼Œé‚£ä¹ˆåˆ¤æ–­å¦‚æœå·²ç»åˆ°æœŸäº†åˆ™å°†è¯¥èŠ‚ç‚¹ä»é˜Ÿåˆ—ä¸­ç§»é™¤ï¼Œå¹¶è¿”å›çŠ¶æ€ã€‚å¦åˆ™è¿›å…¥æœ‰è¿‡æœŸçš„ç­‰å¾…ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€9.çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œçº¿ç¨‹ä¼šé˜»å¡åœ¨è¿™é‡Œï¼Œç­‰å¾…runæ–¹æ³•æ‰§è¡Œå®Œæˆåè°ƒç”¨unParkæ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€10.çº¿ç¨‹è¢«å”¤é†’åï¼Œè¿›å…¥reportæ–¹æ³•ã€‚&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;41&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
/**
     * @throws CancellationException {@inheritDoc}
     */
    /**
     * è·å–æ‰§è¡Œç»“æœ
     * @return
     * @throws InterruptedException
     * @throws ExecutionException
     */
    public V get() throws InterruptedException, ExecutionException {
        int s = state;
        if (s &amp;lt;= COMPLETING)
            s = awaitDone(false, 0L);
        return report(s);
    }

    /**
     * @throws CancellationException {@inheritDoc}
     */
    /**
     * è·å–æ‰§è¡Œç»“æœ
     * @param timeout
     * @param unit
     * @return
     * @throws InterruptedException
     * @throws ExecutionException
     * @throws TimeoutException
     */
    public V get(long timeout, TimeUnit unit)
        throws InterruptedException, ExecutionException, TimeoutException {
        if (unit == null)
            throw new NullPointerException();
        int s = state;
        if (s &amp;lt;= COMPLETING &amp;amp;&amp;amp;
            (s = awaitDone(true, unit.toNanos(timeout))) &amp;lt;= COMPLETING)
            throw new TimeoutException();
        return report(s);
    }
&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;ã€€ã€€3.awaitDone(boolean timed, long nanos)&lt;/h2&gt;
&lt;p&gt;ã€€ã€€è¯¥æ–¹æ³•æ˜¯ç­‰å¾…å®Œæˆï¼Œæˆ–è€…çº¿ç¨‹è¢«æ‰“æ–­è€ŒæŠ›å‡ºå¼‚å¸¸é€€å‡ºï¼Œæœ‰æˆ–è€…æ˜¯ç»è¿‡nanos è¿™ä¹ˆå¤šçº³ç§’åé€€å‡ºã€‚æ–¹æ³•å†…éƒ¨æ˜¯ä¸€ä¸ªæ­»å¾ªç¯ï¼Œé€šè¿‡å„ç§æ¡ä»¶åˆ¤æ–­æ˜¯å¦æ»¡è¶³æ¡ä»¶é€€å‡ºï¼Œå¦åˆ™çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œç›´åˆ°è¢«å…¶ä»–çº¿ç¨‹å”¤é†’ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€1.é¦–å…ˆä¼šåˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å¦æœ‰æ‰“æ–­æ ‡è®°ï¼Œå¦‚æœè¢«æ‰“æ–­è¿‡ï¼Œåˆ é™¤åˆšåˆ›å»ºå‡ºæ¥çš„ç­‰å¾…èŠ‚ç‚¹ï¼Œå¹¶æŠ›å‡ºInterruptedExceptionå¼‚å¸¸ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€2.å¦‚æœå½“å‰ä»»åŠ¡æ˜¯å·²å®ŒæˆçŠ¶æ€ï¼Œç›´æ¥å°†å½“å‰çŠ¶æ€è¿”å›ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€3.å¦‚æœå½“å‰ä»»åŠ¡çŠ¶æ€ä¸ºå®Œæˆä¸­ï¼Œè¯´æ˜å…¶ä»–çº¿ç¨‹æ­£åœ¨æ“ä½œï¼Œå½“å‰çº¿ç¨‹æ— éœ€è¦é‡å¤æ“ä½œï¼Œåªéœ€è¦å°†cpuèµ„æºè®©å‡ºæ¥ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€4.å¦‚æœå‰ä¸‰ä¸ªæ¡ä»¶å‡æœªæ»¡è¶³ï¼Œåˆ™ä¼šåˆ›å»ºç­‰å¾…èŠ‚ç‚¹ï¼Œç„¶åè¿›å…¥ç¬¬äºŒè½®å¾ªç¯ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€5.ç¬¬äºŒè½®å¾ªç¯ï¼Œå°†ç¬¬äºŒè½®å¾ªç¯åˆ›å»ºçš„ç­‰å¾…èŠ‚ç‚¹æ”¾å…¥ç­‰å¾…é“¾è¡¨çš„å¤´éƒ¨ï¼Œå¹¶ä½¿ç”¨casæ–¹å¼ç»™waitersèµ‹å€¼ï¼Œä¿è¯å¤šçº¿ç¨‹ä¸‹æ­£å¸¸æ­£ç¡®çš„èµ‹å€¼ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€6.ç¬¬ä¸‰è½®å¾ªç¯ï¼Œå¦‚æœç”¨æˆ·è°ƒç”¨çš„æ˜¯æœ‰è¿‡æœŸæ—¶é—´çš„getæ–¹æ³•ï¼Œåˆ™ä¼šè®¡ç®—å½“å‰å‰©ä½™æ—¶é—´ï¼Œ1ï¼‰å¦‚æœå‰©ä½™æ—¶é—´å°äºç­‰äº0ï¼Œåˆ™è¯´æ˜å·²ç»è¿‡æœŸï¼Œé‚£ä¹ˆå°±ä¼šç§»é™¤å½“å‰ç­‰å¾…ä¸­çš„èŠ‚ç‚¹ï¼Œå°†å½“å‰ä»»åŠ¡çŠ¶æ€è¿”å›ã€‚2ï¼‰å¦åˆ™è°ƒç”¨LockSupportçš„æœ‰è¿‡æœŸæ—¶é—´çš„parkNanosï¼Œè¯¥æ–¹æ³•ä¼šè®©çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œä¹Ÿå³çº¿ç¨‹ä¼šé˜»å¡åœ¨è¿™é‡Œï¼Œè¿‡æœŸæ—¶é—´ä¸ä¼šè¶…è¿‡ç”¨æˆ·ä¼ å…¥çš„è¿‡æœŸæ—¶é—´ã€‚å¦‚æœç”¨æˆ·è°ƒç”¨çš„æ˜¯æ²¡æœ‰è¿‡æœŸæ—¶é—´çš„æ–¹æ³•ï¼Œé‚£ä¹ˆè°ƒç”¨LockSupportçš„æœ‰æ— è¿‡æœŸæ—¶é—´çš„parkNanosï¼Œè¯¥æ–¹æ³•ä¼šè®©çº¿ç¨‹æ— é™çš„ç­‰å¾…ä¸‹åˆï¼ŒçŸ¥é“æœ‰å…¶ä»–çº¿ç¨‹å°†ä»–å”¤é†’ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€æºç ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;41&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
/**
     * Awaits completion or aborts on interrupt or timeout.
     *
     * ç­‰å¾…å®Œæˆæˆ–æ‰“æ–­é€€å‡ºæˆ–è¶…æ—¶é€€å‡º
     * @param timed true if use timed waits æ˜¯å¦æœ‰è¶…æ—¶æ—¶é—´
     * @param nanos time to wait, if timed ç­‰å¾…æ—¶é—´
     * @return state upon completion çŠ¶æ€ç 
     */
    private int awaitDone(boolean timed, long nanos)
        throws InterruptedException {
        final long deadline = timed ? System.nanoTime() + nanos : 0L;
        WaitNode q = null;
        boolean queued = false;
        for (;;) {
            //è¿”å›trueï¼Œçº¿ç¨‹è¢«æ‰“æ–­è¿‡ï¼Œä½†å¹¶ä¸ä¼šç›´æ¥æŠ›å‡ºå¼‚å¸¸
            //è€Œæ˜¯ç­‰å…¶ä»–çº¿ç¨‹å°†çº¿ç¨‹å”¤é†’ä¹‹åï¼Œå‘ç°è¯¥çº¿ç¨‹åœ¨ç­‰å¾…è¿‡ç¨‹ä¸­æ‰§è¡Œäº†æ‰“æ–­æ“ä½œ
            if (Thread.interrupted()) {
                removeWaiter(q);
                throw new InterruptedException();
            }

            int s = state;
            //è¿™é‡Œçš„æ„æ€æ˜¯ä»»åŠ¡å·²å®Œæˆï¼Œåˆå¯ä»¥èƒ½æ˜¯æ­£å¸¸ç»“æŸï¼Œä¹Ÿæœ‰å¯ä»¥èƒ½æ˜¯ç”¨æˆ·å–æ¶ˆï¼Œæˆ–è€…å¼‚å¸¸ï¼Œæ‰“æ–­
            if (s &amp;gt; COMPLETING) {
                if (q != null)
                    q.thread = null;
                return s;
            }
            //è®©å‡ºcpuèµ„æº
            else if (s == COMPLETING) // cannot time out yet
                Thread.yield();
            //ç¬¬ä¸€æ¬¡å¾ªç¯ä¼šè¿›å…¥è¿™ä¸ªæ¡ä»¶åˆ›å»ºèŠ‚ç‚¹
            else if (q == null)
                q = new WaitNode();
            //ç¬¬äºŒæ¬¡å¾ªç¯ç»™æ–°åˆ›å»ºçš„qèŠ‚ç‚¹æ”¾åœ¨waitersé“¾è¡¨çš„å¤´éƒ¨
            else if (!queued)
                queued = UNSAFE.compareAndSwapObject(this, waitersOffset,
                                                     q.next = waiters, q);
            else if (timed) {
                nanos = deadline - System.nanoTime();
                //è¿‡æœŸé€€å‡º
                if (nanos &amp;lt;= 0L) {
                    removeWaiter(q);
                    return state;
                }
                //æœ‰é™æ—¶é—´æŒ‚èµ·çº¿ç¨‹
                LockSupport.parkNanos(this, nanos);
            }
            else
                //æ— é™æ—¶é—´æŒ‚èµ·çº¿ç¨‹
                LockSupport.park(this);
        }
    }
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ã€€ã€€FutureTaskæ˜¯è¿ç”¨äº†é«˜å¹¶å‘è®¾è®¡æ€æƒ³çš„Futureè®¾è®¡æ¨¡å¼ã€‚å®ƒå¾ˆå¥½çš„å¤„ç†äº†é«˜å¹¶å‘ä¸‹å¤„ç†å¤šä»¶è·å–æˆ–åˆ›å»ºæ•°æ®å¹¶æ— ç›¸å…³è”çš„æ“ä½œè€—æ—¶é•¿çš„é—®é¢˜ã€‚è®¾è®¡è€…å¯ä»¥å°†è€—æ—¶æ¯”è¾ƒé•¿çš„æ“ä½œï¼ˆæ¯”å¦‚è¿œç¨‹è°ƒç”¨æ¥å£ç­‰ï¼‰ä½¿ç”¨å¼‚æ­¥çš„æ–¹å¼ï¼ˆå³åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼‰å»å¤„ç†ï¼Œé‚£ä¹ˆä¸»çº¿ç¨‹å°±å¯ä»¥åšå…¶ä»–çš„äº‹æƒ…äº†ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§å‡å°‘æ•´ä½“çš„å¤„ç†æ—¶é—´ã€‚è¿™ä¸ªæ¨¡å¼é€‚ç”¨äºå¤šä¸ªæ— å…³è”çš„æ—¶é—´ï¼Œå¦‚æœAæ“ä½œçš„è¿›è¡Œéœ€è¦Bæ“ä½œçš„ç»“æœæ‰å¯ä»¥å¼€å§‹ï¼Œé‚£ä¹ˆAå…¶å®æ˜¯ä¸€ç›´å¸¦é˜»å¡ç­‰å¾…Bçš„ç»“æœçš„ï¼Œè¿™ä¸ªä¸²è¡Œæ‰§è¡Œçš„è€—æ—¶å·®ä¸å¤šï¼Œä½¿ç”¨futureæ¨¡å¼æ„ä¹‰ä¸å¤§ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€FutureTaskçš„getæ–¹æ³•åœ¨ç”¨æˆ·é€»è¾‘ä»£ç æœªè¿”å›ç»“æœæ—¶ä»ç„¶åè¿›å…¥é˜»å¡ï¼Œä½†æ˜¯ç”¨æˆ·ä¸šåŠ¡ä»£ç çš„æ‰§è¡Œå¹¶ä¸å—ä¸»çº¿ç¨‹ï¼ˆåˆ›å»ºFutureTaskçš„çº¿ç¨‹ï¼‰çš„å½±å“ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡é‡å†™doneæ–¹æ³•æ¥è·å–åˆ°å®ŒæˆåŠ¨ä½œï¼Œè¿™æ ·æˆ‘ä»¬å†è°ƒç”¨getæ–¹æ³•æ—¶å°±ä¸ä¼šé˜»å¡ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€åœ¨ç°å®ç”Ÿæ´»ä¸­å°±æœ‰å¾ˆå¤šç±»ä¼¼Futureæ¨¡å¼çš„ä¾‹å­ã€‚æ¯”å¦‚ä½ çš„ç”Ÿæ—¥å¿«åˆ°äº†ï¼Œä½ éœ€è¦å»è›‹ç³•åº—è®¢è›‹ç³•ï¼ŒåŒæ—¶è¿˜éœ€è¦ä¹°å…¶ä»–çš„ç¤¼å“ï¼Œå¼€partyæ‰€éœ€çš„ä¸œè¥¿ç­‰ï¼Œå‡è®¾è›‹ç³•åº—åˆ¶ä½œè›‹ç³•éœ€è¦èŠ±è´¹1ä¸ªå°æ—¶ï¼Œè´­ä¹°å…¶ä»–ç‰©å“éœ€è¦2å°æ—¶ã€‚ç”¨ä¼ ç»Ÿçš„ä¸²è¡Œçš„æ–¹å¼å°±æ˜¯ä½ å»è›‹ç³•åº—è·Ÿè€æ¿è¯´ä½ è¦è®¢è›‹ç³•ï¼Œè€æ¿æ ¹æ®ä½ çš„éœ€æ±‚å¼€å§‹åˆ¶ä½œè›‹ç³•ï¼Œä½ å°±åœ¨åº—é‡Œåç€ç­‰åˆ¶ä½œå®Œæˆã€‚1ä¸ªå°æ—¶åç»ˆäºåˆ¶ä½œå¥½è›‹ç³•äº†ï¼Œç„¶åä½ æ‰èƒ½æ‹¿ç€è›‹ç³•å»ä¹°å…¶ä»–ä¸œè¥¿ï¼Œä¹°å®Œå…¶ä»–ä¸œè¥¿æœ‰éœ€è¦è€—è´¹2å°æ—¶ï¼Œæœ€åä½ æ€»å…±èŠ±è´¹äº†3å°æ—¶ã€‚å½“ä½¿ç”¨Futureæ¨¡å¼æ—¶ï¼Œä½ äº‹å…ˆå†™å¥½ä½ éœ€è¦è®¢å¤šå¤§çš„ï¼Œä»€ä¹ˆå£å‘³çš„è›‹ç³•ï¼Œç„¶åå»åˆ°è›‹ç³•è·Ÿè€æ¿è¯´ä½ å…ˆå»ä¹°å…¶ä»–ä¸œè¥¿ï¼Œä¸€ä¼šå†è¿‡æ¥æ‹¿ã€‚ä½†æ˜¯ä½ å¿˜è®°ç•™è”ç³»æ–¹å¼ç»™è›‹ç³•åº—è€æ¿äº†ï¼ˆæ²¡æœ‰é‡å†™doneæ–¹æ³•ï¼‰ï¼Œæ‰€ä»¥ä½ å¹¶ä¸çŸ¥é“è›‹ç³•ä»€ä¹ˆæ—¶å€™åšå¥½ï¼Œæå‰è¿‡å»æ‹¿ï¼Œé‚£ä½ è¿˜å¾—åœ¨åº—é‡Œç­‰è›‹ç³•åšå¥½ã€‚å¦‚æœé‡å†™äº†doneæ–¹æ³•ï¼Œç›¸å½“äºç»™åº—è€æ¿ç•™äº†ç”µè¯å·ç ï¼Œç­‰è›‹ç³•åšå¥½è€æ¿å°±ä¼šæ‰“ç”µè¯ç»™ä½ ï¼Œä½ è¿‡æ‹¿è›‹ç³•æ—¶å°±ä¸ä¼šè¯´å¤ªæ—©è¿‡å»è¦ç­‰ä¸€ä¼šæˆ–å¤ªæ™šè¿‡å»äº†ã€‚æˆ‘ä»¬ç”¨æœ€åçš„æƒ…å†µæ¥è®¡ç®—ï¼Œä½ ä¹°å…¶ä»–ä¸œè¥¿èŠ±äº†ä¸¤ä¸ªå°æ—¶ï¼Œåˆ¶ä½œè›‹ç³•èŠ±äº†1ä¸ªå°æ—¶ã€‚ç”±äºåˆ¶ä½œè›‹ç³•å’Œä½ æ²¡å…¶ä»–ä¸œè¥¿æ˜¯åˆ†å¼€åŒæ—¶è¿›è¡Œçš„ï¼Œæ‰€ä»¥æœ€ç»ˆä½ åªèŠ±äº†2ä¸ªå°æ—¶ï¼Œæ¯”ä¸²è¡Œçš„æ–¹å¼å¿«äº†1ä¸ªå°æ—¶ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä»¥ä¸Šå°±æ˜¯æˆ‘åœ¨çœ‹FutureTaskæºç è¿‡ç¨‹ä¸­çš„æ€»ç»“ï¼Œå¦‚æœ‰é”™æ¼æ¬¢è¿æå‡ºã€‚&lt;/p&gt;
</description>
<pubDate>Thu, 10 Sep 2020 15:59:00 +0000</pubDate>
<dc:creator>rainple</dc:creator>
<og:description>FutureTaskæ˜¯ä¸€ä¸ªå…·ä½“çš„å®ç°ç±»ï¼Œå®ç°äº†RunnableFutureæ¥å£ï¼ŒRunnableFutureåˆ†åˆ«ç»§æ‰¿äº†Runnableå’ŒFutureæ¥å£ï¼Œå› æ­¤FutureTaskç±»æ—¢å¯ä»¥è¢«çº¿ç¨‹æ‰§è¡Œï¼Œåˆ</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/rainple/p/13609069.html</dc:identifier>
</item>
<item>
<title>Kubernetes-16ï¼šä¸€æ–‡è¯¦è§£ServiceAccountåŠRBACæƒé™æ§åˆ¶ - Runningçš„èœé¸Ÿ</title>
<link>http://www.cnblogs.com/v-fan/p/13648977.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/v-fan/p/13648977.html</guid>
<description>&lt;h2 id=&quot;ä¸€-serviceaccount&quot; data-source-line=&quot;1&quot;&gt;ä¸€ã€ServiceAccount&lt;/h2&gt;
&lt;h3 id=&quot;1serviceaccount-ä»‹ç»&quot; data-source-line=&quot;3&quot;&gt;1.ServiceAccount ä»‹ç»&lt;/h3&gt;
&lt;p data-source-line=&quot;5&quot;&gt;é¦–å…ˆKubernetesä¸­è´¦æˆ·åŒºåˆ†ä¸ºï¼šUser Accountsï¼ˆç”¨æˆ·è´¦æˆ·ï¼‰ å’Œ Service Accountsï¼ˆæœåŠ¡è´¦æˆ·ï¼‰ ä¸¤ç§ï¼Œå®ƒä»¬çš„è®¾è®¡åŠç”¨é€”å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul data-source-line=&quot;7&quot; readability=&quot;0&quot;&gt;&lt;li readability=&quot;4.5&quot;&gt;
&lt;p&gt;UserAccountæ˜¯ç»™kubernetesé›†ç¾¤å¤–éƒ¨ç”¨æˆ·ä½¿ç”¨çš„ï¼Œä¾‹å¦‚è¿ç»´æˆ–è€…é›†ç¾¤ç®¡ç†äººå‘˜ï¼Œä½¿ç”¨kubectlå‘½ä»¤æ—¶ç”¨çš„å°±æ˜¯UserAccountè´¦æˆ·ï¼›UserAccountæ˜¯å…¨å±€æ€§ã€‚åœ¨é›†ç¾¤æ‰€æœ‰namespacesä¸­ï¼Œåç§°å…·æœ‰å”¯ä¸€æ€§ï¼Œé»˜è®¤æƒ…å†µä¸‹ç”¨æˆ·ä¸ºadminï¼›&lt;/p&gt;
&lt;p&gt;ç”¨æˆ·åç§°å¯ä»¥åœ¨kubeconfigä¸­æŸ¥çœ‹&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
[root@Centos8 ~]# cd ~/.kube/&lt;span&gt;
[root@Centos8 .kube]# &lt;/span&gt;&lt;span&gt;ls&lt;/span&gt;&lt;span&gt;
cache  config  http&lt;/span&gt;-&lt;span&gt;cache
[root@Centos8 .kube]# &lt;/span&gt;&lt;span&gt;cat&lt;/span&gt;&lt;span&gt; config
    users:
    &lt;/span&gt;- name: kubernetes-admin
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;ul data-source-line=&quot;22&quot;&gt;&lt;li&gt;ServiceAccountæ˜¯ç»™è¿è¡Œåœ¨Podçš„ç¨‹åºä½¿ç”¨çš„èº«ä»½è®¤è¯ï¼ŒPodå®¹å™¨çš„è¿›ç¨‹éœ€è¦è®¿é—®API Serveræ—¶ç”¨çš„å°±æ˜¯ServiceAccountè´¦æˆ·ï¼›ServiceAccountä»…å±€é™å®ƒæ‰€åœ¨çš„namespaceï¼Œæ¯ä¸ªnamespaceéƒ½ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªdefault service accountï¼›åˆ›å»ºPodæ—¶ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šService Accountï¼ŒPodåˆ™ä¼šä½¿ç”¨default Service Accountã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h3 data-source-line=&quot;26&quot;&gt;Â &lt;/h3&gt;
&lt;h3 id=&quot;2secret-ä¸-sa-çš„å…³ç³»&quot; data-source-line=&quot;26&quot;&gt;2.Secret ä¸ SA çš„å…³ç³»&lt;/h3&gt;
&lt;p data-source-line=&quot;28&quot;&gt;Kubernetesè®¾è®¡äº†ä¸€ç§Secretèµ„æºï¼Œåˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç§æ˜¯ç”¨äº ServiceAccount çš„Â &lt;a href=&quot;http://kubernetes.io/&quot; target=&quot;_blank&quot;&gt;kubernetes.io/&lt;/a&gt;Â service-account-tokenï¼Œå°±æ˜¯ä¸Šè¾¹è¯´çš„ SAï¼Œå¦ä¸€ç§å°±æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„ä¿å¯†ä¿¡æ¯Opaqueã€‚&lt;/p&gt;
&lt;h3 data-source-line=&quot;32&quot;&gt;Â &lt;/h3&gt;
&lt;h3 id=&quot;3é»˜è®¤çš„service-account&quot; data-source-line=&quot;32&quot;&gt;3.é»˜è®¤çš„Service Account&lt;/h3&gt;
&lt;p data-source-line=&quot;34&quot;&gt;ServiceAccountä»…å±€é™å®ƒæ‰€åœ¨çš„namespaceï¼Œæ‰€ä»¥åœ¨åˆ›å»ºnamespaceæ—¶ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„ SAï¼Œè€Œ SA åˆ›å»ºæ—¶ï¼Œä¹Ÿä¼šåˆ›å»ºå¯¹åº”çš„ Secretï¼Œä¸‹é¢æ“ä½œéªŒè¯ä¸‹ï¼š&lt;/p&gt;
&lt;p data-source-line=&quot;36&quot;&gt;åˆ›å»ºåç§°ç©ºé—´&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;[root@Centos8 .kube]# kubectl create ns vfan
namespace&lt;/span&gt;/vfan created
&lt;/pre&gt;&lt;/div&gt;
&lt;p data-source-line=&quot;43&quot;&gt;æŸ¥çœ‹SA&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
[root@Centos8 .kube]# kubectl get sa -&lt;span&gt;n vfan
NAME      SECRETS   AGE
default   &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;         67s
&lt;/pre&gt;&lt;/div&gt;
&lt;p data-source-line=&quot;51&quot;&gt;æŸ¥çœ‹ SA çš„ Secret&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
[root@Centos8 .kube]# kubectl describe sa default -&lt;span&gt;n vfan
Name:                default
Namespace:           vfan
Labels:              &lt;/span&gt;&amp;lt;none&amp;gt;&lt;span&gt;
Annotations:         &lt;/span&gt;&amp;lt;none&amp;gt;&lt;span&gt;
Image pull secrets:  &lt;/span&gt;&amp;lt;none&amp;gt;&lt;span&gt;
Mountable secrets:   default&lt;/span&gt;-token-&lt;span&gt;wwbc8
Tokens:              default&lt;/span&gt;-token-&lt;span&gt;wwbc8
Events:              &lt;/span&gt;&amp;lt;none&amp;gt;&lt;span&gt;

[root@Centos8 &lt;/span&gt;~]# kubectl get secret -&lt;span&gt;n vfan
NAME                  TYPE                                  DATA   AGE
default&lt;/span&gt;-token-wwbc8   kubernetes.io/service-account-token   &lt;span&gt;3&lt;/span&gt;      3m15s
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote data-source-line=&quot;69&quot; readability=&quot;3.5206611570248&quot;&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œåˆ›å»ºnsæ—¶é»˜è®¤åˆ›å»ºäº†SAï¼ŒSAé»˜è®¤åˆ›å»ºäº†ä¸€ä¸ªÂ &lt;a href=&quot;http://kubernetes.io/service-account-token%E7%B1%BB%E5%9E%8B%E7%9A%84secret&quot; target=&quot;_blank&quot;&gt;kubernetes.io/service-account-tokenç±»å‹çš„secret&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p data-source-line=&quot;73&quot;&gt;Â &lt;/p&gt;
&lt;p data-source-line=&quot;73&quot;&gt;åˆ›å»ºä¸€ä¸ªPod&lt;/p&gt;
&lt;p data-source-line=&quot;75&quot;&gt;vim pods.yaml&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;apiVersion: v1
kind: Pod
metadata:
  name: test&lt;/span&gt;-&lt;span&gt;sa
  namespace: vfan
spec:
  containers:
  &lt;/span&gt;- name: test-&lt;span&gt;sa
    image: nginx:&lt;/span&gt;&lt;span&gt;1.2&lt;/span&gt;.&lt;span&gt;1&lt;/span&gt;&lt;span&gt;
    imagePullPolicy: IfNotPresent
    ports:
    &lt;/span&gt;- containerPort: &lt;span&gt;80&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
[root@Centos8 rbac]# kubectl create -&lt;span&gt;f pods.yaml 
pod&lt;/span&gt;/test-&lt;span&gt;sa created

[root@Centos8 rbac]# kubectl get pod &lt;/span&gt;-&lt;span&gt;n vfan
NAME      READY   STATUS    RESTARTS   AGE
test&lt;/span&gt;-sa   &lt;span&gt;1&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt;     Running   &lt;span&gt;0&lt;/span&gt;&lt;span&gt;          12s

[root@Centos8 rbac]# kubectl describe pod test&lt;/span&gt;-sa -&lt;span&gt;n vfan
...
Containers:
  test&lt;/span&gt;-&lt;span&gt;sa:
    Mounts:
      &lt;/span&gt;/var/run/secrets/kubernetes.io/serviceaccount from default-token-&lt;span&gt;wwbc8 (ro)
Volumes:
  default&lt;/span&gt;-token-&lt;span&gt;wwbc8:
    Type:        Secret (a volume populated by a Secret)
    SecretName:  default&lt;/span&gt;-token-&lt;span&gt;wwbc8
    Optional:    &lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;span&gt;
...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote data-source-line=&quot;114&quot; readability=&quot;7&quot;&gt;
&lt;p&gt;åœ¨ä¸æŒ‡å®šSAçš„æƒ…å†µä¸‹ï¼Œå½“å‰ nsä¸‹é¢çš„ Pod ä¼šé»˜è®¤ä½¿ç”¨ â€œdefaultâ€ è¿™ä¸ª SAï¼Œå¯¹åº”çš„ Secret ä¼šè‡ªåŠ¨æŒ‚è½½åˆ° Pod çš„ /var/run/secrets/kubernetes.io/serviceaccount/ ç›®å½•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Pod é‡Œé¢è·å–åˆ°ç”¨äºèº«ä»½è®¤è¯çš„ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p data-source-line=&quot;116&quot;&gt;Â &lt;/p&gt;
&lt;p data-source-line=&quot;116&quot;&gt;è¿›å…¥Pod Containerå†…ï¼ŒæŸ¥çœ‹ SA&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
[root@Centos8 rbac]# kubectl exec -it test-sa -n vfan -- /bin/&lt;span&gt;bash
root@test&lt;/span&gt;-sa:/# cd /var/run/secrets/kubernetes.io/serviceaccount/&lt;span&gt;
root@test&lt;/span&gt;-sa:/var/run/secrets/kubernetes.io/serviceaccount# &lt;span&gt;ls&lt;/span&gt;&lt;span&gt;
ca.crt    namespace  token

### å¯ä»¥çœ‹åˆ°æœ‰ä¸‰ä¸ªæ–‡ä»¶ï¼Œä½œç”¨åˆ†åˆ«ä¸º
    ca.crtï¼šæ ¹è¯ä¹¦ï¼Œç”¨äºClientç«¯éªŒè¯API Serverå‘é€çš„è¯ä¹¦
    namespaceï¼šæ ‡è¯†è¿™ä¸ªservice&lt;/span&gt;-account-&lt;span&gt;tokençš„ä½œç”¨åŸŸç©ºé—´
    tokenï¼šä½¿ç”¨API Serverç§é’¥ç­¾åçš„JWTï¼Œç”¨äºè®¿é—®API Serveræ—¶ï¼ŒServerç«¯çš„éªŒè¯&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&quot;4ä½¿ç”¨è‡ªå®šä¹‰sa&quot; data-source-line=&quot;132&quot;&gt;4.ä½¿ç”¨è‡ªå®šä¹‰SA&lt;/h3&gt;
&lt;p data-source-line=&quot;134&quot;&gt;åˆ›å»ºä¸€ä¸ª SA&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
[root@Centos8 rbac]# kubectl create sa vfansa -&lt;span&gt;n vfan
serviceaccount&lt;/span&gt;/&lt;span&gt;vfansa created

[root@Centos8 rbac]# kubectl get sa &lt;/span&gt;-&lt;span&gt;n vfan
NAME      SECRETS   AGE
default   &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;         19m
vfansa    &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;         7s

[root@Centos8 rbac]# kubectl describe sa vfansa &lt;/span&gt;-&lt;span&gt;n vfan
Name:                vfansa
Namespace:           vfan
Labels:              &lt;/span&gt;&amp;lt;none&amp;gt;&lt;span&gt;
Annotations:         &lt;/span&gt;&amp;lt;none&amp;gt;&lt;span&gt;
Image pull secrets:  &lt;/span&gt;&amp;lt;none&amp;gt;&lt;span&gt;
Mountable secrets:   vfansa&lt;/span&gt;-token-&lt;span&gt;9s8f7
Tokens:              vfansa&lt;/span&gt;-token-&lt;span&gt;9s8f7
Events:              &lt;/span&gt;&amp;lt;none&amp;gt;&lt;span&gt;

[root@Centos8 rbac]# kubectl get secret &lt;/span&gt;-&lt;span&gt;n vfan
NAME                  TYPE                                  DATA   AGE
default&lt;/span&gt;-token-wwbc8   kubernetes.io/service-account-token   &lt;span&gt;3&lt;/span&gt;&lt;span&gt;      19m
vfansa&lt;/span&gt;-token-9s8f7    kubernetes.io/service-account-token   &lt;span&gt;3&lt;/span&gt;      49s
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote data-source-line=&quot;161&quot; readability=&quot;5&quot;&gt;
&lt;p&gt;åŒæ ·ï¼Œåˆ›å»ºSAåï¼Œè‡ªåŠ¨åˆ›å»ºäº†å¯¹åº”çš„Secret&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p data-source-line=&quot;165&quot;&gt;Â &lt;/p&gt;
&lt;p data-source-line=&quot;165&quot;&gt;æ›´æ–°Podï¼Œä½¿ç”¨æ–°åˆ›å»ºçš„SA&lt;/p&gt;
&lt;p data-source-line=&quot;167&quot;&gt;vim pods.yaml&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;apiVersion: v1
kind: Pod
metadata:
  name: test&lt;/span&gt;-&lt;span&gt;sa
  namespace: vfan
spec:
  containers:
  &lt;/span&gt;- name: test-&lt;span&gt;sa
    image: nginx:&lt;/span&gt;&lt;span&gt;1.2&lt;/span&gt;.&lt;span&gt;1&lt;/span&gt;&lt;span&gt;
    imagePullPolicy: IfNotPresent
    ports:
    &lt;/span&gt;- containerPort: &lt;span&gt;80&lt;/span&gt;&lt;span&gt;
  serviceAccountName: vfansa&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
[root@Centos8 rbac]# kubectl create -&lt;span&gt;f pods.yaml 
pod&lt;/span&gt;/test-&lt;span&gt;sa created

[root@Centos8 rbac]# kubectl describe pod test&lt;/span&gt;-sa -&lt;span&gt;n vfan
...
    Mounts:
      &lt;/span&gt;/var/run/secrets/kubernetes.io/serviceaccount from vfansa-token-&lt;span&gt;9s8f7 (ro)
Volumes:
  vfansa&lt;/span&gt;-token-&lt;span&gt;9s8f7:
    Type:        Secret (a volume populated by a Secret)
    SecretName:  vfansa&lt;/span&gt;-token-&lt;span&gt;9s8f7
    Optional:    &lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;span&gt;
...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&quot;5serviceaccountä¸­æ·»åŠ image-pull-secrets&quot; data-source-line=&quot;203&quot;&gt;5.ServiceAccountä¸­æ·»åŠ Image pull secrets&lt;/h3&gt;
&lt;p data-source-line=&quot;205&quot;&gt;åœ¨ç¬”è€…ä¹‹å‰çš„åšå®¢ä¸­ï¼šSecretä»‹ç»åŠæ¼”ç¤º(Â &lt;a href=&quot;https://www.cnblogs.com/v-fan/p/13269433.html&quot; target=&quot;_blank&quot;&gt;https://www.cnblogs.com/v-fan/p/13269433.html&lt;/a&gt;Â )ä¸­æåŠåˆ°ï¼Œå¯ä»¥ä½¿ç”¨Secretæ¥ä¿å­˜é•œåƒä»“åº“çš„ç™»å½•ä¿¡æ¯ï¼Œæ¥è¾¾åˆ°å…ç™»å½•è·å–imageçš„æ•ˆæœï¼ŒåŒæ ·ï¼Œå¯ä»¥å°†åˆ›å»ºå¥½çš„Secretç›´æ¥ä¸SAè¿›è¡Œç»‘å®šï¼Œç»‘å®šå®Œæˆåï¼Œåªè¦ä½¿ç”¨æ­¤ SA çš„ Podï¼Œéƒ½å¯è¾¾åˆ°å…ç™»å½•è·å–imageçš„æ•ˆæœ&lt;/p&gt;
&lt;p data-source-line=&quot;209&quot;&gt;åˆ›å»º docker-registry çš„ Secret&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
[root@Centos8 rbac]# kubectl create secret docker-registry myregistrykey --docker-server=hub.vfancloud.com --docker-username=admin --docker-password=admin@&lt;span&gt;123&lt;/span&gt; --docker-email=vfan8991@&lt;span&gt;163&lt;/span&gt;.com -&lt;span&gt;n vfan
secret&lt;/span&gt;/&lt;span&gt;myregistrykey created

[root@Centos8 rbac]# kubectl get secret &lt;/span&gt;-&lt;span&gt;n vfan
NAME                  TYPE                                  DATA   AGE
default&lt;/span&gt;-token-wwbc8   kubernetes.io/service-account-token   &lt;span&gt;3&lt;/span&gt;&lt;span&gt;      62m
myregistrykey         kubernetes.io&lt;/span&gt;/dockerconfigjson        &lt;span&gt;1&lt;/span&gt;&lt;span&gt;      7s
vfansa&lt;/span&gt;-token-9s8f7    kubernetes.io/service-account-token   &lt;span&gt;3&lt;/span&gt;      43m
&lt;/pre&gt;&lt;/div&gt;

&lt;p data-source-line=&quot;224&quot;&gt;å°† docker-registry çš„ Secret æ·»åŠ åˆ°SA&lt;/p&gt;
&lt;p data-source-line=&quot;226&quot;&gt;kubectl edit sa vfansa -n vfan&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;apiVersion: v1
kind: ServiceAccount
metadata:
  creationTimestamp: &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;2020-08-30T03:38:47Z&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
  name: vfansa
  namespace: vfan
  resourceVersion: &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;471829&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
  selfLink: &lt;/span&gt;/api/v1/namespaces/vfan/serviceaccounts/&lt;span&gt;vfansa
  uid: 8a44df93&lt;/span&gt;-b2d6-4e61-ad2e-&lt;span&gt;25bc5852f66e
secrets:
&lt;/span&gt;- name: vfansa-token-&lt;span&gt;9s8f7
imagePullSecrets:
&lt;/span&gt;- name: myregistrykey
&lt;/pre&gt;&lt;/div&gt;
&lt;p data-source-line=&quot;246&quot;&gt;Â &lt;/p&gt;
&lt;p data-source-line=&quot;246&quot;&gt;æŸ¥çœ‹ SA çš„ Image pull secrets&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
[root@Centos8 rbac]# kubectl describe sa vfansa -&lt;span&gt;n vfan 
Name:                vfansa
Namespace:           vfan
Labels:              &amp;lt;none&amp;gt;&lt;span&gt;
Annotations:         &amp;lt;none&amp;gt;&lt;span&gt;
Image pull secrets:  myregistrykey
Mountable secrets:   vfansa-token-&lt;span&gt;9s8f7
Tokens:              vfansa-token-&lt;span&gt;9s8f7
Events:              &amp;lt;none&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote data-source-line=&quot;260&quot; readability=&quot;6&quot;&gt;
&lt;p&gt;è¿™ä¸ªæ—¶å€™ï¼Œåªè¦æ˜¯ä½¿ç”¨æ­¤ SA çš„Podï¼Œéƒ½å¯ä»¥åœ¨docker-registryæ‹‰å–é•œåƒäº†ï¼ŒåŒæ ·ï¼Œå¯ä»¥æŠŠæ­¤ Secret æ·»åŠ åˆ°default çš„ SA ä¸­ï¼Œè¾¾åˆ°ç›¸åŒçš„æ•ˆæœ&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;äºŒ-rbac&quot; data-source-line=&quot;264&quot;&gt;äºŒã€RBACæƒé™æ§åˆ¶&lt;/h2&gt;
&lt;h3 id=&quot;1rbacä»‹ç»&quot; data-source-line=&quot;266&quot;&gt;1.RBACä»‹ç»&lt;/h3&gt;
&lt;p data-source-line=&quot;268&quot;&gt;åœ¨Kubernetesä¸­ï¼Œæ‰€æœ‰èµ„æºå¯¹è±¡éƒ½æ˜¯é€šè¿‡APIå¯¹è±¡è¿›è¡Œæ“ä½œï¼Œä»–ä»¬ä¿å­˜åœ¨etcdé‡Œã€‚è€Œå¯¹etcdçš„æ“ä½œæˆ‘ä»¬éœ€è¦é€šè¿‡è®¿é—® kube-apiserver æ¥å®ç°ï¼Œä¸Šé¢çš„Service Accountå…¶å®å°±æ˜¯APIServerçš„è®¤è¯è¿‡ç¨‹ï¼Œè€Œæˆæƒçš„æœºåˆ¶æ˜¯é€šè¿‡RBACï¼šåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶å®ç°ã€‚&lt;/p&gt;
&lt;h2 data-source-line=&quot;272&quot;&gt;Â &lt;/h2&gt;
&lt;h3 id=&quot;2role-and-clusterrole&quot; data-source-line=&quot;272&quot;&gt;2.Role and ClusterRole&lt;/h3&gt;
&lt;p data-source-line=&quot;274&quot;&gt;åœ¨RBAC APIä¸­ï¼ŒRoleè¡¨ç¤ºä¸€ç»„è§„åˆ™æƒé™ï¼Œæƒé™åªä¼šå¢åŠ (ç´¯åŠ æƒé™)ï¼Œä¸å­˜åœ¨ä¸€ä¸ªèµ„æºå¼€å§‹å°±æœ‰å¾ˆå¤šæƒé™è€Œé€šè¿‡RBACå¯¹å…¶è¿›è¡Œå‡å°‘çš„æ“ä½œï¼šRole æ˜¯å®šä¹‰åœ¨ä¸€ä¸ª namespace ä¸­ï¼Œè€Œ ClusterRole æ˜¯é›†ç¾¤çº§åˆ«çš„ã€‚&lt;/p&gt;
&lt;p data-source-line=&quot;276&quot;&gt;ä¸‹é¢æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªRoleï¼š&lt;/p&gt;
&lt;p data-source-line=&quot;278&quot;&gt;vim roles.yaml&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;43&quot;&gt;
&lt;pre&gt;
apiVersion: rbac.authorization.k8s.io/&lt;span&gt;v1
kind: Role
metadata:
  name: test&lt;/span&gt;-&lt;span&gt;role
  namespace: vfan
rules:
&lt;/span&gt;- apiGroups: [&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;]  # ä¸ºç©ºè¡¨ç¤ºä¸ºé»˜è®¤çš„core api group
  resources: [&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;pods&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;] # æ•°æ®æºç±»å‹
  verbs: [&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;watch&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;list&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;]    #èµ‹äºˆçš„æƒé™
&lt;/span&gt;- apiGroups: [&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;apps&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;]
  resources: [&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;deployments&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;]
  verbs: [&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;list&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;create&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;update&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;patch&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;delete&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;watch&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;]
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote data-source-line=&quot;295&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;ä»¥ä¸ŠRoleç­–ç•¥è¡¨ç¤ºåœ¨åå­—ä¸º vfan nsä¸­ï¼Œå¯¹Podsæœ‰get,watch,listçš„æƒé™ï¼Œå¯¹Deploymentæœ‰......æƒé™&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p data-source-line=&quot;299&quot;&gt;Â &lt;/p&gt;
&lt;p data-source-line=&quot;299&quot;&gt;ClusterRole å…·æœ‰ä¸ Role ç›¸åŒæƒé™è§’è‰²æ§åˆ¶èƒ½åŠ›ï¼Œä¸åŒçš„å°±æ˜¯ Cluster Roleæ˜¯é›†ç¾¤çº§åˆ«ï¼Œå®ƒå¯ä»¥ç”¨äºï¼š&lt;/p&gt;
&lt;ul data-source-line=&quot;301&quot;&gt;&lt;li&gt;é›†ç¾¤çº§åˆ«çš„èµ„æºæ§åˆ¶ï¼ˆä¾‹å¦‚ node è®¿é—®æƒé™ï¼‰&lt;/li&gt;
&lt;li&gt;éèµ„æºå‹ endpointsï¼ˆä¾‹å¦‚å¯¹æŸä¸ªç›®å½•æˆ–æ–‡ä»¶çš„è®¿é—®ï¼š/healthzï¼‰&lt;/li&gt;
&lt;li&gt;æ‰€æœ‰å‘½åç©ºé—´èµ„æºæ§åˆ¶ï¼ˆPodã€Deploymentç­‰ï¼‰&lt;/li&gt;
&lt;/ul&gt;&lt;p data-source-line=&quot;305&quot;&gt;Â &lt;/p&gt;
&lt;p data-source-line=&quot;305&quot;&gt;vim clusterroles.yaml&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
apiVersion: rbac.authorization.k8s.io/&lt;span&gt;v1
kind: ClusterRole
metadata:
  name: test&lt;/span&gt;-&lt;span&gt;clusterrole
rules:
&lt;/span&gt;- apiGroups: [&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;]
  resources: [&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;services&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;]
  verbs: [&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;create&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;list&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;]
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote data-source-line=&quot;318&quot; readability=&quot;5&quot;&gt;
&lt;p&gt;ä»¥ä¸ŠCluster roleç­–ç•¥è¡¨ç¤ºï¼Œæœ‰getï¼Œcreateï¼Œlistæ•´ä¸ªé›†ç¾¤serviceçš„æƒé™&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p data-source-line=&quot;322&quot;&gt;Â &lt;/p&gt;
&lt;p data-source-line=&quot;322&quot;&gt;ä¸‹é¢å¼€å§‹åˆ›å»º&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;## role
[root@Centos8 rbac]# kubectl create &lt;/span&gt;-&lt;span&gt;f roles.yaml 
role.rbac.authorization.k8s.io&lt;/span&gt;/test-&lt;span&gt;rbac created

[root@Centos8 rbac]# kubectl get role &lt;/span&gt;-&lt;span&gt;n vfan 
NAME        AGE
test&lt;/span&gt;-&lt;span&gt;rbac   27s

## cluster role
[root@Centos8 rbac]# kubectl get clusterrole &lt;/span&gt;-&lt;span&gt;n vfan
NAME                                                                   AGE
admin                                                                  141d
cluster&lt;/span&gt;-&lt;span&gt;admin                                                          141d
edit                                                                   141d
flannel                                                                141d
ingress&lt;/span&gt;-&lt;span&gt;nginx                                                          90d
ingress&lt;/span&gt;-nginx-&lt;span&gt;admission                                                90d
system:aggregate&lt;/span&gt;-to-&lt;span&gt;admin                                              141d
system:aggregate&lt;/span&gt;-to-&lt;span&gt;edit                                               141d
system:aggregate&lt;/span&gt;-to-view                                               141d
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote data-source-line=&quot;347&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œroleå’Œcluster roleéƒ½å·²ç»åˆ›å»ºæˆåŠŸï¼Œä½†æ˜¯clusterroleé™¤äº†è¿™æ¬¡åˆ›å»ºçš„è¿˜æœ‰è®¸å¤šï¼Œå…¶ä¸­ä»¥systemå¼€å¤´çš„å…¨éƒ¨æ˜¯ç³»ç»Ÿæ‰€ç”¨çš„ï¼Œå…¶ä»–çš„éƒ½æ˜¯åœ¨è£…ä¸€äº›æ’ä»¶æ—¶è‡ªåŠ¨æ·»åŠ çš„ï¼Œä¹Ÿè¦æ³¨æ„ï¼Œæˆ‘ä»¬è‡ªå·±åˆ›å»ºcluster roleæ—¶ä¸è¦ä»¥systemå¼€é€šï¼Œä»¥å…åˆ†ä¸æ¸…æ¥š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 data-source-line=&quot;351&quot;&gt;Â &lt;/h3&gt;
&lt;h3 id=&quot;3rolebinding-and-clusterrolebinding&quot; data-source-line=&quot;351&quot;&gt;3.RoleBinding and ClusterRoleBinding&lt;/h3&gt;
&lt;p data-source-line=&quot;353&quot;&gt;RoleBindingå¯ä»¥å°†è§’è‰²ä¸­å®šä¹‰çš„æƒé™æˆäºˆç”¨æˆ·æˆ–ç”¨æˆ·ç»„ï¼ŒRoleBindingåŒ…å«ä¸€ç»„æƒé™åˆ—è¡¨(Subjects)ï¼Œæƒé™åˆ—è¡¨ä¸­åŒ…å«æœ‰ä¸åŒå½¢å¼çš„å¾…æˆäºˆæƒé™èµ„æºç±»å‹(users,groups, or Service Account)ï¼šRolebinding åŒæ ·åŒ…å«å¯¹è¢« Bind çš„ Role å¼•ç”¨ï¼›RoleBinding é€‚ç”¨äºæŸä¸ªå‘½åç©ºé—´å†…æˆæƒï¼ŒClusterRoleBindingé€‚ç”¨äºé›†ç¾¤èŒƒå›´å†…çš„æˆæƒã€‚&lt;/p&gt;
&lt;p data-source-line=&quot;355&quot;&gt;åˆ›å»ºRoleBinding&lt;/p&gt;
&lt;p data-source-line=&quot;357&quot;&gt;vim rolebindings.yaml&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
apiVersion: rbac.authorization.k8s.io/&lt;span&gt;v1
kind: RoleBinding
metadata:
  name: test&lt;/span&gt;-&lt;span&gt;rolebinding
  namespace: vfan
subjects:
&lt;/span&gt;-&lt;span&gt; kind: User    # æƒé™èµ„æºç±»å‹
  name: vfan    # åç§°
  apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: Role    #è¦ç»‘å®šçš„Roleçš„ç±»å‹(å¯ä»¥æ˜¯Roleæˆ–ClusterRole)
  name: test&lt;/span&gt;-&lt;span&gt;role    # Roleçš„åç§°
  apiGroup: rbac.authorization.k8s.io&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote data-source-line=&quot;375&quot; readability=&quot;6&quot;&gt;
&lt;p&gt;æ­¤ç­–ç•¥è¡¨ç¤ºï¼Œå°†åç§°ä¸ºtest-roleçš„Roleçš„æƒé™èµ„æºèµ‹äºˆåä¸ºvfançš„ç”¨æˆ·ï¼Œä»…ä½œç”¨äºvfan namespaceã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p data-source-line=&quot;379&quot;&gt;Â &lt;/p&gt;
&lt;p data-source-line=&quot;379&quot;&gt;RoleBindingåŒæ ·å¯ä»¥å¼•ç”¨ClusterRoleæ¥å¯¹å½“å‰ namespace å†…ç”¨æˆ·ã€ç”¨æˆ·ç»„æˆ–SAæ¥è¿›è¡Œæˆæƒï¼Œè¿™ç§æ“ä½œå…è®¸ç®¡ç†å‘˜åœ¨æ•´ä¸ªé›†ç¾¤ä¸­å®šä¹‰ä¸€äº›é€šç”¨çš„ClusterRoleï¼Œç„¶ååœ¨ä¸åŒçš„namespaceä¸­ä½¿ç”¨RoleBindingç»‘å®šã€‚&lt;/p&gt;
&lt;p data-source-line=&quot;381&quot;&gt;vim rolebindings2.yaml&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
apiVersion: rbac.authorization.k8s.io/&lt;span&gt;v1
kind: RoleBinding
metadata:
  name: test&lt;/span&gt;-&lt;span&gt;rolebinding2
  namespace: vfan
subjects:
&lt;/span&gt;-&lt;span&gt; kind: User
  name: vfan
  apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: ClusterRole
  name: test&lt;/span&gt;-&lt;span&gt;clusterrole
  apiGroup: rbac.authorization.k8s.io&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote data-source-line=&quot;399&quot; readability=&quot;7&quot;&gt;
&lt;p&gt;ä»¥ä¸Šç­–ç•¥è¡¨ç¤ºï¼Œå°†åç§°ä¸ºtest-clusterroleçš„ClusterRoleçš„èµ„æºæƒé™èµ‹äºˆç»™äº†åç§°ä¸ºvfançš„ç”¨æˆ·ï¼Œè™½ç„¶èµ‹äºˆçš„æ˜¯ClusterRoleï¼Œä½†æ˜¯ç”±äºRoleä»…ä½œç”¨äºå•ä¸ªnamespaceï¼Œæ‰€ä»¥æ­¤èµ„æºç­–ç•¥ä»…ä»…å¯¹vfan namespaceæœ‰æ•ˆ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p data-source-line=&quot;403&quot;&gt;Â &lt;/p&gt;
&lt;p data-source-line=&quot;403&quot;&gt;vim clusterrolebindings.yaml&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
apiVersion: rbac.authorization.k8s.io/&lt;span&gt;v1
kind: ClusterRoleBinding
metadata:
  name: test&lt;/span&gt;-&lt;span&gt;clusterrolebinding
subjects:
&lt;/span&gt;-&lt;span&gt; kind: Group
  name: vfan
  apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: ClusterRole
  name: test&lt;/span&gt;-&lt;span&gt;clusterrole
  apiGroup: rbac.authorization.k8s.io&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote data-source-line=&quot;420&quot; readability=&quot;7&quot;&gt;
&lt;p&gt;ä»¥ä¸Šç­–ç•¥è¡¨ç¤ºï¼Œå°†nameä¸ºtest-clusterroleçš„ClusterRoleçš„èµ„æºæƒé™èµ‹äºˆç»™groupnameä¸ºvfançš„ç”¨æˆ·ç»„ï¼Œæ­¤ç”¨æˆ·ç»„ä¸‹æ‰€æœ‰ç”¨æˆ·æ‹¥æœ‰å¯¹æ•´ä¸ªé›†ç¾¤çš„ test-clusterroleå†…çš„èµ„æºæƒé™&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 data-source-line=&quot;424&quot;&gt;Â &lt;/h2&gt;
&lt;h2 id=&quot;å®è·µåˆ›å»ºä¸€ä¸ªç”¨æˆ·åªèƒ½ç®¡ç†åä¸º-vfan-çš„namespace&quot; data-source-line=&quot;424&quot;&gt;å®è·µï¼šåˆ›å»ºä¸€ä¸ªç”¨æˆ·åªèƒ½ç®¡ç†åä¸º vfan çš„NameSpace&lt;/h2&gt;
&lt;h3 id=&quot;1åˆ›å»ºç³»ç»Ÿç”¨æˆ·&quot; data-source-line=&quot;426&quot;&gt;1.åˆ›å»ºç³»ç»Ÿç”¨æˆ·&lt;/h3&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;[root@Centos8 rbac]# useradd vfan
[root@Centos8 rbac]# &lt;/span&gt;&lt;span&gt;su&lt;/span&gt; -&lt;span&gt; vfan 

## è¿›å…¥vfanç”¨æˆ·æµ‹è¯•è®¿é—®k8sé›†ç¾¤
[vfan@Centos8 &lt;/span&gt;~&lt;span&gt;]$ kubectl get pod 
The connection to the server localhost:&lt;/span&gt;&lt;span&gt;8080&lt;/span&gt; was refused - did you specify the right host or port?
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote data-source-line=&quot;437&quot; readability=&quot;5&quot;&gt;
&lt;p&gt;é»˜è®¤è‚¯å®šæ˜¯è®¿é—®ä¸åˆ°çš„ï¼Œå¦‚æœæƒ³è¦è®¿é—®ï¼Œå¿…é¡»è¦åˆ›å»ºvfanç”¨æˆ·çš„è®¿é—®è¯ä¹¦&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 data-source-line=&quot;442&quot;&gt;Â &lt;/h4&gt;
&lt;h3 id=&quot;2ä¸º-vfan-ç”¨æˆ·åˆ›å»ºè®¿é—®è¯ä¹¦&quot; data-source-line=&quot;442&quot;&gt;2.ä¸º vfan ç”¨æˆ·åˆ›å»ºè®¿é—®è¯ä¹¦&lt;/h3&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;## ä¸‹è½½è¯ä¹¦ç”Ÿæˆå·¥å…· cfssl
[root@Centos8 bin]# &lt;/span&gt;&lt;span&gt;wget&lt;/span&gt; https:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;pkg.cfssl.org/R1.2/cfssl_linux-amd64&lt;/span&gt;
[root@Centos8 bin]# &lt;span&gt;wget&lt;/span&gt; https:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;pkg.cfssl.org/R1.2/cfssljson_linux-amd64&lt;/span&gt;
[root@Centos8 bin]# &lt;span&gt;wget&lt;/span&gt; https:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;pkg.cfssl.org/R1.2/cfssl-certinfo_linux-amd64&lt;/span&gt;
&lt;span&gt;
## æ”¹åï¼Œç»™æ‰§è¡Œæƒé™
[root@Centos8 bin]# &lt;/span&gt;&lt;span&gt;mv&lt;/span&gt; cfssl_linux-&lt;span&gt;amd64 cfssl
[root@Centos8 bin]# &lt;/span&gt;&lt;span&gt;mv&lt;/span&gt; cfssljson_linux-&lt;span&gt;amd64 cfssljson
[root@Centos8 bin]# &lt;/span&gt;&lt;span&gt;mv&lt;/span&gt; cfssl-certinfo_linux-amd64 cfssl-&lt;span&gt;certinfo
[root@Centos8 bin]# &lt;/span&gt;&lt;span&gt;chmod&lt;/span&gt; +x *&lt;span&gt;
[root@Centos8 bin]# ll &lt;/span&gt;-&lt;span&gt;h 
æ€»ç”¨é‡ 19M
&lt;/span&gt;-rwxr-xr-x &lt;span&gt;1&lt;/span&gt; root root &lt;span&gt;9.9M&lt;/span&gt; 3æœˆ  &lt;span&gt;30&lt;/span&gt; &lt;span&gt;2016&lt;/span&gt;&lt;span&gt; cfssl
&lt;/span&gt;-rwxr-xr-x &lt;span&gt;1&lt;/span&gt; root root &lt;span&gt;6.3M&lt;/span&gt; 3æœˆ  &lt;span&gt;30&lt;/span&gt; &lt;span&gt;2016&lt;/span&gt; cfssl-&lt;span&gt;certinfo
&lt;/span&gt;-rwxr-xr-x &lt;span&gt;1&lt;/span&gt; root root &lt;span&gt;2.2M&lt;/span&gt; 3æœˆ  &lt;span&gt;30&lt;/span&gt; &lt;span&gt;2016&lt;/span&gt;&lt;span&gt; cfssljson
[root@Centos8 bin]# &lt;/span&gt;&lt;span&gt;mkdir&lt;/span&gt; /usr/local/&lt;span&gt;vfancert
[root@Centos8 bin]# cd &lt;/span&gt;/usr/local/vfancert/
&lt;/pre&gt;&lt;/div&gt;

&lt;p data-source-line=&quot;467&quot;&gt;åˆ›å»ºCAè¯ä¹¦ç­¾åè¯·æ±‚JSONæ–‡ä»¶&lt;/p&gt;
&lt;p data-source-line=&quot;469&quot;&gt;vim vfan-csr.json&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;42&quot;&gt;
&lt;pre&gt;
&lt;span&gt;{
  &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;CN&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;vfan&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,        # ç”¨æˆ·åç§°
  &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;hosts&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;: [],        # ä¸»æœºåœ°å€ï¼Œä¸å¡«è¡¨ç¤ºæ‰€æœ‰ä¸»æœºéƒ½å¯ä½¿ç”¨
  &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;: {
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;algo&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;rsa&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,    # åŠ å¯†ç®—æ³•
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;size&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;2048&lt;/span&gt;&lt;span&gt;
},
  &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;names&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;: [
    {
       &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;C&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;CN&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
       &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;L&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;BeiJing&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
       &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;O&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Ctyun&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
       &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;ST&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;BeiJing&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,            
       &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;OU&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;System&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
    }
  ]
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p data-source-line=&quot;491&quot;&gt;å¼€å§‹åˆ›å»ºè®¿é—®è¯ä¹¦&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
[root@Centos8 vfancert]# cd /etc/kubernetes/pki/&lt;span&gt;
[root@Centos8 pki]# cfssl gencert &lt;/span&gt;-ca=ca.crt -ca-key=ca.key -profile=kubernetes /usr/local/vfancert/vfan-csr.json | cfssljson -&lt;span&gt;bare vfanuser
&lt;/span&gt;&lt;span&gt;2020&lt;/span&gt;/&lt;span&gt;09&lt;/span&gt;/&lt;span&gt;02&lt;/span&gt; &lt;span&gt;22&lt;/span&gt;:&lt;span&gt;08&lt;/span&gt;:&lt;span&gt;51&lt;/span&gt;&lt;span&gt; [INFO] generate received request
&lt;/span&gt;&lt;span&gt;2020&lt;/span&gt;/&lt;span&gt;09&lt;/span&gt;/&lt;span&gt;02&lt;/span&gt; &lt;span&gt;22&lt;/span&gt;:&lt;span&gt;08&lt;/span&gt;:&lt;span&gt;51&lt;/span&gt;&lt;span&gt; [INFO] received CSR
&lt;/span&gt;&lt;span&gt;2020&lt;/span&gt;/&lt;span&gt;09&lt;/span&gt;/&lt;span&gt;02&lt;/span&gt; &lt;span&gt;22&lt;/span&gt;:&lt;span&gt;08&lt;/span&gt;:&lt;span&gt;51&lt;/span&gt; [INFO] generating key: rsa-&lt;span&gt;2048&lt;/span&gt;
&lt;span&gt;2020&lt;/span&gt;/&lt;span&gt;09&lt;/span&gt;/&lt;span&gt;02&lt;/span&gt; &lt;span&gt;22&lt;/span&gt;:&lt;span&gt;08&lt;/span&gt;:&lt;span&gt;51&lt;/span&gt;&lt;span&gt; [INFO] encoded CSR
&lt;/span&gt;&lt;span&gt;2020&lt;/span&gt;/&lt;span&gt;09&lt;/span&gt;/&lt;span&gt;02&lt;/span&gt; &lt;span&gt;22&lt;/span&gt;:&lt;span&gt;08&lt;/span&gt;:&lt;span&gt;51&lt;/span&gt; [INFO] signed certificate with serial number &lt;span&gt;191102646650271030964539871811792985454770130197&lt;/span&gt;
&lt;span&gt;2020&lt;/span&gt;/&lt;span&gt;09&lt;/span&gt;/&lt;span&gt;02&lt;/span&gt; &lt;span&gt;22&lt;/span&gt;:&lt;span&gt;08&lt;/span&gt;:&lt;span&gt;51&lt;/span&gt; [WARNING] This certificate lacks a &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;hosts&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; field. This makes it unsuitable &lt;span&gt;for&lt;/span&gt;&lt;span&gt;
websites. For &lt;/span&gt;&lt;span&gt;more&lt;/span&gt; information see the Baseline Requirements &lt;span&gt;for&lt;/span&gt;&lt;span&gt; the Issuance and Management
of Publicly&lt;/span&gt;-Trusted Certificates, v.&lt;span&gt;1.1&lt;/span&gt;.&lt;span&gt;6&lt;/span&gt;, from the CA/Browser Forum (https:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;cabforum.org);&lt;/span&gt;
specifically, section &lt;span&gt;10.2&lt;/span&gt;.&lt;span&gt;3&lt;/span&gt; (&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Information Requirements&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;).

## åˆ›å»ºæˆåŠŸï¼Œpkiç›®å½•ä¸‹å¤šå‡ºvfanuser&lt;/span&gt;-&lt;span&gt;key.pemã€vfanuser.pemå’Œvfanuser.csræ–‡ä»¶
[root@Centos8 pki]# &lt;/span&gt;&lt;span&gt;ls&lt;/span&gt;&lt;span&gt;
vfanuser.csr
vfanuser&lt;/span&gt;-&lt;span&gt;key.pem
vfanuser.pem&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&quot;3ä¸º-vfan-ç”¨æˆ·ç”Ÿæˆé›†ç¾¤é…ç½®æ–‡ä»¶&quot; data-source-line=&quot;515&quot;&gt;3.ä¸º vfan ç”¨æˆ·ç”Ÿæˆé›†ç¾¤é…ç½®æ–‡ä»¶&lt;/h3&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;## è®¾ç½®api serverçš„ç¯å¢ƒå˜é‡
[root@Centos8 vfancert]# export KUBE_APISERVER&lt;/span&gt;=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;https://192.168.152.53:6443&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;

## åˆ›å»ºkubeconfigæ–‡ä»¶ï¼Œä»¥ä¸‹è¯¦ç»†å‚æ•°ä¿¡æ¯å¯é€šè¿‡kubectl config set&lt;/span&gt;-cluster --&lt;span&gt;helpæŸ¥çœ‹
[root@Centos8 vfancert]# kubectl config set&lt;/span&gt;-cluster kubernetes --certificate-authority=/etc/kubernetes/pki/ca.crt --embed-certs=&lt;span&gt;true&lt;/span&gt; --server=${KUBE_APISERVER} --kubeconfig=&lt;span&gt;vfan.kubeconfig
Cluster &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;kubernetes&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; set.

## é…ç½®æ–‡ä»¶ç”Ÿæˆ
[root@Centos8 vfancert]# &lt;/span&gt;&lt;span&gt;ls&lt;/span&gt;&lt;span&gt;
vfan&lt;/span&gt;-&lt;span&gt;csr.json  vfan.kubeconfig

## è®¾ç½®å®¢æˆ·ç«¯å‚æ•°ï¼Œç»‘å®šç”¨æˆ·ä¿¡æ¯è‡³kubeconfigä¸­
[root@Centos8 vfancert]# kubectl config set&lt;/span&gt;-&lt;span&gt;credentials vfanuser \
&lt;/span&gt;&amp;gt; --client-certificate=/etc/kubernetes/pki/&lt;span&gt;vfanuser.pem \
&lt;/span&gt;&amp;gt; --client-key=/etc/kubernetes/pki/vfanuser-&lt;span&gt;key.pem \
&lt;/span&gt;&amp;gt; --embed-certs=&lt;span&gt;true&lt;/span&gt;&lt;span&gt; \
&lt;/span&gt;&amp;gt; --kubeconfig=&lt;span&gt;vfan.kubeconfig
User &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;vfanuser&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; set.

## è®¾ç½®ä¸Šä¸‹æ–‡å‚æ•°
[root@Centos8 vfancert]# kubectl config set&lt;/span&gt;-&lt;span&gt;context kubernetes \
&lt;/span&gt;&amp;gt; --cluster=&lt;span&gt;kubernetes \
&lt;/span&gt;&amp;gt; --user=&lt;span&gt;vfan \
&lt;/span&gt;&amp;gt; --namespace=&lt;span&gt;vfan \
&lt;/span&gt;&amp;gt; --kubeconfig=&lt;span&gt;vfan.kubeconfig
Context &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;kubenetes&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; created.
&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&quot;4è¿›è¡Œrolebinding-éªŒè¯æƒé™ç”Ÿæ•ˆ&quot; data-source-line=&quot;548&quot;&gt;4.è¿›è¡ŒRoleBinding éªŒè¯æƒé™ç”Ÿæ•ˆ&lt;/h3&gt;
&lt;p data-source-line=&quot;550&quot;&gt;vim vfanrolebind.yaml&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
apiVersion: rbac.authorization.k8s.io/&lt;span&gt;v1
kind: RoleBinding
metadata:
  name: test&lt;/span&gt;-&lt;span&gt;rolebinding
  namespace: vfan
subjects:
&lt;/span&gt;-&lt;span&gt; kind: User
  name: vfan
  apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: Role
  name: test&lt;/span&gt;-rbac    # ç»‘å®šä¸Šæ–‡ä¸­åˆ›å»ºçš„åç§°ä¸º test-&lt;span&gt;rbac çš„Roleï¼Œå…·ä½“æƒé™ï¼Œå¾€ä¸Šç¿»ä¸‹å“ˆ
  apiGroup: rbac.authorization.k8s.io&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p data-source-line=&quot;570&quot;&gt;æŠŠkubeconfigæ–‡ä»¶å¤åˆ¶åˆ° vfan ç”¨æˆ·çš„å®¶ç›®å½•çš„.kubeä¸‹&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
[root@Centos8 vfancert]# &lt;span&gt;mkdir&lt;/span&gt; -p /home/vfan/&lt;span&gt;.kube
[root@Centos8 vfancert]# &lt;/span&gt;&lt;span&gt;cp&lt;/span&gt; vfan.kubeconfig /home/vfan/.kube/&lt;span&gt;config
[root@Centos8 vfancert]# cd &lt;/span&gt;/home/vfan/.kube/&lt;span&gt;
[root@Centos8 .kube]# &lt;/span&gt;&lt;span&gt;ls&lt;/span&gt;&lt;span&gt;
config

## ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…
[root@Centos8 vfan]# &lt;/span&gt;&lt;span&gt;chown&lt;/span&gt; -R vfan:vfan .kube/
&lt;/pre&gt;&lt;/div&gt;

&lt;p data-source-line=&quot;585&quot;&gt;åˆ‡æ¢ä¸Šä¸‹æ–‡ï¼Œä½¿kubectlè¯»å–åˆ°configçš„ä¿¡æ¯&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
[vfan@Centos8 .kube]$ kubectl config use-context kubernetes --kubeconfig=&lt;span&gt;config 
Switched to context &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;kubernetes&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;.
&lt;/pre&gt;&lt;/div&gt;

&lt;p data-source-line=&quot;594&quot;&gt;å¼€å§‹æµ‹è¯•æƒé™&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;[vfan@Centos8 .kube]$ kubectl get pod 
No resources found.

[vfan@Centos8 .kube]$ kubectl get svc 
Error from server (Forbidden): services is forbidden: User &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;vfan&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; cannot list resource &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;services&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; &lt;span&gt;in&lt;/span&gt; API group &lt;span&gt;&quot;&quot;&lt;/span&gt; &lt;span&gt;in&lt;/span&gt; the namespace &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;vfan&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote data-source-line=&quot;604&quot; readability=&quot;6&quot;&gt;
&lt;p&gt;å¯ä»¥get podï¼Œä½†æ˜¯ä¸å¯ä»¥get serviceï¼Œå› ä¸ºä¹‹å‰çš„Roleä¸­æ˜ç¡®çš„è¡¨ç¤ºäº†è‡ªå·±çš„æƒé™&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p data-source-line=&quot;608&quot;&gt;Â &lt;/p&gt;
&lt;p data-source-line=&quot;608&quot;&gt;åœ¨vfanåç§°ç©ºé—´ä¸‹åˆ›å»ºæµ‹è¯•Deployment&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;## rootç”¨æˆ·ä¸‹åˆ›å»º
[root@Centos8 k8sYaml]# kubectl run deployment test&lt;/span&gt;-vfan --replicas=&lt;span&gt;3&lt;/span&gt; --image=nginx:&lt;span&gt;1.2&lt;/span&gt;.&lt;span&gt;1&lt;/span&gt; --namespace=&lt;span&gt;vfan

[root@Centos8 k8sYaml]# kubectl get pod &lt;/span&gt;-&lt;span&gt;n vfan 
NAME                         READY   STATUS    RESTARTS   AGE
deployment&lt;/span&gt;-7b89b946d-5dtvp   &lt;span&gt;1&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt;     Running   &lt;span&gt;0&lt;/span&gt;&lt;span&gt;          17s
deployment&lt;/span&gt;-7b89b946d-jpr5v   &lt;span&gt;1&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt;     Running   &lt;span&gt;0&lt;/span&gt;&lt;span&gt;          17s
deployment&lt;/span&gt;-7b89b946d-r8k4l   &lt;span&gt;1&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt;     Running   &lt;span&gt;0&lt;/span&gt;&lt;span&gt;          17s

## å‰å¾€vfanç”¨æˆ·æŸ¥çœ‹
[vfan@Centos8 .kube]$ kubectl get pod 
NAME                         READY   STATUS    RESTARTS   AGE
deployment&lt;/span&gt;-7b89b946d-5dtvp   &lt;span&gt;1&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt;     Running   &lt;span&gt;0&lt;/span&gt;&lt;span&gt;          67s
deployment&lt;/span&gt;-7b89b946d-jpr5v   &lt;span&gt;1&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt;     Running   &lt;span&gt;0&lt;/span&gt;&lt;span&gt;          67s
deployment&lt;/span&gt;-7b89b946d-r8k4l   &lt;span&gt;1&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt;     Running   &lt;span&gt;0&lt;/span&gt;          67s
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote data-source-line=&quot;628&quot; readability=&quot;6&quot;&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œvfanç”¨æˆ·ä¹Ÿå¯ä»¥æŸ¥çœ‹åˆ°ç›¸å¯¹åº”çš„Podï¼Œå› ä¸ºvfanç”¨æˆ·åœ¨get podæ—¶å¹¶æ²¡æœ‰æŒ‡å®šåç§°ç©ºé—´ï¼Œæ‰€ä»¥å¯ä»¥è¯æ˜vfançš„é»˜è®¤åç§°ç©ºé—´å³æ˜¯vfan&lt;/p&gt;
&lt;/blockquote&gt;
</description>
<pubDate>Thu, 10 Sep 2020 15:22:00 +0000</pubDate>
<dc:creator>Runningçš„èœé¸Ÿ</dc:creator>
<og:description>ä¸€ã€ServiceAccount 1.ServiceAccount ä»‹ç» é¦–å…ˆKubernetesä¸­è´¦æˆ·åŒºåˆ†ä¸ºï¼šUser Accountsï¼ˆç”¨æˆ·è´¦æˆ·ï¼‰ å’Œ Service Accountsï¼ˆæœåŠ¡è´¦æˆ·ï¼‰</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/v-fan/p/13648977.html</dc:identifier>
</item>
<item>
<title>æ¥è®²è®²ä½ å¯¹ThreadLocalçš„ç†è§£ - çºªè«</title>
<link>http://www.cnblogs.com/jimoer/p/13649008.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/jimoer/p/13649008.html</guid>
<description>&lt;h2 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;é¢è¯•çš„æ—¶å€™è¢«é—®åˆ°ThreadLocalçš„ç›¸å…³çŸ¥è¯†ï¼Œæ²¡æœ‰å›ç­”å¥½ï¼ˆå¥¶å¥¶çš„ï¼Œç°åœ¨æ„Ÿè§‰é—®å•¥éƒ½èƒ½è¢«é—®å€’ï¼‰ï¼Œæ‰€ä»¥æˆ‘å†³å®šå…ˆè§£å†³è¿™å‡ æ¬¡é¢è¯•ä¸­éƒ½é‡åˆ°çš„é«˜é¢‘é—®é¢˜ï¼ŒæŠŠè¿™å‡ ä¸ªç¡¬éª¨å¤´éƒ½èƒ½ç†è§£çš„é€å½»çš„è¯´å‡ºæ¥äº†ï¼Œæ„Ÿè§‰æœ€èµ·ç ä¸èƒ½æ€»æ˜¯ä¸€è½®æ¸¸ã€‚&lt;/p&gt;
&lt;h3 id=&quot;threadlocalä»‹ç»&quot;&gt;ThreadLocalä»‹ç»&lt;/h3&gt;
&lt;p&gt;ThreadLocalæ˜¯JDK1.2å¼€å§‹å°±æä¾›çš„ä¸€ä¸ªç”¨æ¥å­˜å‚¨çº¿ç¨‹æœ¬åœ°å˜é‡çš„ç±»ã€‚ThreadLocalä¸­çš„å˜é‡æ˜¯åœ¨æ¯ä¸ªçº¿ç¨‹ä¸­ç‹¬ç«‹å­˜åœ¨çš„ï¼Œå½“å¤šä¸ªçº¿ç¨‹è®¿é—®ThreadLocalä¸­çš„å˜é‡çš„æ—¶å€™ï¼Œå…¶å®éƒ½æ˜¯è®¿é—®çš„è‡ªå·±å½“å‰çº¿ç¨‹çš„å†…å­˜ä¸­çš„å˜é‡ï¼Œä»è€Œä¿è¯çš„å˜é‡çš„çº¿ç¨‹å®‰å…¨ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä¸€èˆ¬åœ¨ä½¿ç”¨ThreadLocalçš„æ—¶å€™éƒ½æ˜¯ä¸ºäº†è§£å†³çº¿ç¨‹ä¸­å­˜åœ¨çš„å˜é‡ç«äº‰é—®é¢˜ã€‚å…¶å®è§£å†³è¿™ç±»é—®é¢˜ï¼Œé€šå¸¸å¤§å®¶ä¹Ÿä¼šæƒ³åˆ°ä½¿ç”¨synchronizedæ¥åŠ é”è§£å†³ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚åœ¨è§£å†³SimpleDateFormatçš„çº¿ç¨‹å®‰å…¨çš„æ—¶å€™ã€‚SimpleDateFormatæ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œå®ƒé‡Œé¢æ— è®ºçš„æ˜¯format()æ–¹æ³•è¿˜æ˜¯parse()æ–¹æ³•ï¼Œéƒ½æœ‰ä½¿ç”¨å®ƒè‡ªå·±å†…éƒ¨çš„ä¸€ä¸ªCalendarç±»çš„å¯¹è±¡ï¼Œformatæ–¹æ³•æ˜¯è®¾ç½®æ—¶é—´ï¼Œparse()æ–¹æ³•é‡Œé¢æ˜¯å…ˆè°ƒç”¨Calendarçš„clear()æ–¹æ³•ï¼Œç„¶ååˆè°ƒç”¨äº†Calendarçš„set()æ–¹æ³•ï¼ˆèµ‹å€¼ï¼‰ï¼Œå¦‚æœä¸€ä¸ªçº¿ç¨‹åˆšè°ƒç”¨äº†set()è¿›è¡Œèµ‹å€¼ï¼Œè¿™ä¸ªæ—¶å€™åˆæ¥äº†ä¸€ä¸ªçº¿ç¨‹ç›´æ¥è°ƒç”¨äº†clear()æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªparse()æ–¹æ³•æ‰§è¡Œçš„ç»“æœå°±ä¼šæœ‰é—®é¢˜çš„ã€‚&lt;br/&gt;&lt;strong&gt;è§£å†³åŠæ³•ä¸€&lt;/strong&gt;&lt;br/&gt;å°†ä½¿ç”¨SimpleDateformatçš„æ–¹æ³•åŠ ä¸Šsynchronizedï¼Œè¿™æ ·è™½ç„¶ä¿è¯äº†çº¿ç¨‹å®‰å…¨ï¼Œä½†å´é™ä½äº†æ•ˆç‡ï¼ŒåŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½ä½¿ç”¨æ ¼å¼åŒ–æ—¶é—´çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;private static SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);

public static synchronized String formatDate(Date date){
    return simpleDateFormat.format(date);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³åŠæ³•äºŒ&lt;/strong&gt;&lt;br/&gt;å°†SimpleDateFormatçš„å¯¹è±¡ï¼Œæ”¾åˆ°ThreadLocalé‡Œé¢ï¼Œè¿™æ ·æ¯ä¸ªçº¿ç¨‹ä¸­éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„æ ¼å¼å¯¹è±¡çš„å‰¯æœ¬äº†ã€‚äº’ä¸å¹²æ‰°ï¼Œä»è€Œä¿è¯äº†çº¿ç¨‹å®‰å…¨ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;private static final ThreadLocal&amp;lt;SimpleDateFormat&amp;gt; simpleDateFormatThreadLocal = ThreadLocal.withInitial(() -&amp;gt; new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;));

public static String formatDate(Date date){
   return simpleDateFormatThreadLocal.get().format(date);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;threadlocalçš„åŸç†&quot;&gt;ThreadLocalçš„åŸç†&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ThreadLocalæ˜¯æ€ä¹ˆä½¿ç”¨çš„ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;ThreadLocal&amp;lt;Integer&amp;gt; threadLocal99 = new ThreadLocal&amp;lt;Integer&amp;gt;();
threadLocal99.set(3);
int num = threadLocal99.get();
System.out.println(&quot;æ•°å­—:&quot;+num);
threadLocal99.remove();
System.out.println(&quot;æ•°å­—Empty:&quot;+threadLocal99.get());
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿è¡Œç»“æœï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;æ•°å­—:3
æ•°å­—Empty:null
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½¿ç”¨èµ·æ¥å¾ˆç®€å•ï¼Œä¸»è¦æ˜¯å°†å˜é‡æ”¾åˆ°ThreadLocalé‡Œé¢ï¼Œåœ¨çº¿ç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­å°±å¯ä»¥å–åˆ°ï¼Œå½“æ‰§è¡Œå®Œæˆååœ¨removeæ‰å°±å¯ä»¥äº†ï¼Œåªè¦æ²¡æœ‰è°ƒç”¨remove()å½“å‰çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­éƒ½æ˜¯å¯ä»¥æ‹¿åˆ°å˜é‡æ•°æ®çš„ã€‚&lt;br/&gt;å› ä¸ºæ˜¯æ”¾åˆ°äº†å½“å‰æ‰§è¡Œçš„çº¿ç¨‹ä¸­ï¼Œæ‰€ä»¥ThreadLocalä¸­çš„å˜é‡å€¼åªèƒ½å½“å‰çº¿ç¨‹æ¥ä½¿ç”¨ï¼Œä»è€Œä¿è¯çš„äº†çº¿ç¨‹å®‰å…¨ï¼ˆ&lt;mark&gt;å½“å‰çº¿ç¨‹çš„å­çº¿ç¨‹å…¶å®ä¹Ÿæ˜¯å¯ä»¥è·å–åˆ°çš„&lt;/mark&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æ¥çœ‹ä¸€ä¸‹ThreadLocalçš„set()æ–¹æ³•æºç &lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public void set(T value) {
   // è·å–å½“å‰çº¿ç¨‹
   Thread t = Thread.currentThread();
   // è·å–ThreadLocalMap
   ThreadLocal.ThreadLocalMap map = getMap(t);
   // ThreadLocalMap å¯¹è±¡æ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºç©ºåˆ™ç›´æ¥å°†æ•°æ®æ”¾å…¥åˆ°ThreadLocalMapä¸­
   if (map != null)
       map.set(this, value);
   else
       createMap(t, value); // ThreadLocalMapå¯¹è±¡ä¸ºç©ºï¼Œåˆ™å…ˆåˆ›å»ºå¯¹è±¡ï¼Œå†èµ‹å€¼ã€‚
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬çœ‹åˆ°å˜é‡éƒ½æ˜¯å­˜æ”¾åœ¨äº†ThreadLocalMapè¿™ä¸ªå˜é‡ä¸­çš„ã€‚é‚£ä¹ˆThreadLocalMapåˆæ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿ&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;ThreadLocalMap getMap(Thread t) {
    return t.threadLocals;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class Thread implements Runnable {
        ... ...
        /* ThreadLocal values pertaining to this thread. This map is maintained
     * by the ThreadLocal class. */
    ThreadLocal.ThreadLocalMap threadLocals = null;
    ... ...
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é€šè¿‡ä¸Šé¢çš„æºç ï¼Œæˆ‘ä»¬å‘ç°ThreadLocalMapå˜é‡æ˜¯å½“å‰æ‰§è¡Œçº¿ç¨‹ä¸­çš„ä¸€ä¸ªå˜é‡ï¼Œæ‰€ä»¥è¯´ï¼ŒThreadLocalä¸­å­˜æ”¾çš„æ•°æ®å…¶å®éƒ½æ˜¯æ”¾åˆ°äº†å½“å‰æ‰§è¡Œçº¿ç¨‹ä¸­çš„ä¸€ä¸ªå˜é‡é‡Œé¢äº†ã€‚ä¹Ÿå°±æ˜¯å­˜å‚¨åœ¨äº†å½“å‰çš„çº¿ç¨‹å¯¹è±¡é‡Œäº†ï¼Œåˆ«çš„çº¿ç¨‹é‡Œé¢æ˜¯å¦ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡äº†ï¼Œæ‹¿ä¸åˆ°å…¶ä»–çº¿ç¨‹å¯¹è±¡ä¸­çš„æ•°æ®ï¼Œæ‰€ä»¥æ•°æ®è‡ªç„¶å°±éš”ç¦»å¼€äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é‚£ä¹ˆThreadLocalMapæ˜¯æ€ä¹ˆå­˜å‚¨æ•°æ®çš„å‘¢ï¼Ÿ&lt;/strong&gt;&lt;br/&gt;ThreadLocalMap æ˜¯ThreadLocalç±»é‡Œçš„ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œè™½ç„¶ç±»çš„åå­—ä¸Šå¸¦ç€Mapä½†å´æ²¡æœ‰å®ç°Mapæ¥å£ï¼Œåªæ˜¯ç»“æ„å’ŒMapç±»ä¼¼è€Œå·²ã€‚&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20200909231451433.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_SmlNb2Vy,size_16,color_FFFFFF,t_70#pic_center&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;ThreadLocalMapå†…éƒ¨å…¶å®æ˜¯ä¸€ä¸ªEntryæ•°ç»„ï¼ŒEntryæ˜¯ThreadLocalMapä¸­çš„ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œç»§æ‰¿è‡ªWeakReferenceï¼Œå¹¶å°†ThreadLocalç±»å‹çš„å¯¹è±¡è®¾ç½®ä¸ºäº†Entryçš„Keyï¼Œä»¥åŠå¯¹Keyè®¾ç½®æˆå¼±å¼•ç”¨ã€‚&lt;br/&gt;ThreadLocalMapçš„å†…éƒ¨æ•°æ®ç»“æ„ï¼Œå°±å¤§æ¦‚æ˜¯è¿™æ ·çš„key,valueç»„æˆçš„Entryçš„æ•°ç»„é›†åˆã€‚&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/2020090923454535.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_SmlNb2Vy,size_60,color_FFFFFF,t_70#pic_center&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;å’ŒçœŸæ­£çš„Mapè¿˜æ˜¯æœ‰åŒºåˆ«çš„ï¼Œæ²¡æœ‰é“¾è¡¨äº†ï¼Œè¿™æ ·åœ¨è§£å†³keyçš„hashå†²çªçš„æ—¶å€™æªæ–½è‚¯å®šå°±å’ŒHashMapä¸ä¸€æ ·äº†ã€‚&lt;br/&gt;ä¸€ä¸ªçº¿ç¨‹ä¸­æ˜¯å¯ä»¥åˆ›å»ºå¤šä¸ªThreadLocalå¯¹è±¡çš„ï¼Œå¤šä¸ªThreadLocalå¯¹è±¡å°±ä¼šå­˜æ”¾å¤šä¸ªæ•°æ®ï¼Œé‚£ä¹ˆåœ¨ThreadLocalMapä¸­å°±ä¼šä»¥æ•°ç»„çš„å½¢å¼å­˜æ”¾è¿™äº›æ•°æ®ã€‚&lt;br/&gt;æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å…·ä½“çš„ThreadLocalMapçš„set()æ–¹æ³•çš„æºç &lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;/**
 * Set the value associated with key.
 * @param key the thread local object
 * @param value the value to be set
 */
private void set(ThreadLocal&amp;lt;?&amp;gt; key, Object value) {

    // We don't use a fast path as with get() because it is at
    // least as common to use set() to create new entries as
    // it is to replace existing ones, in which case, a fast
    // path would fail more often than not.

    Entry[] tab = table;
    int len = tab.length;
    // å®šä½åœ¨æ•°ç»„ä¸­çš„ä½ç½®
    int i = key.threadLocalHashCode &amp;amp; (len-1);

    for (Entry e = tab[i];
         e != null;
         e = tab[i = nextIndex(i, len)]) {
        ThreadLocal&amp;lt;?&amp;gt; k = e.get();
        // å¦‚æœå½“å‰ä½ç½®ä¸ä¸ºç©ºï¼Œå¹¶ä¸”å½“å‰ä½ç½®çš„keyå’Œä¼ è¿‡æ¥çš„keyç›¸ç­‰ï¼Œé‚£ä¹ˆå°±ä¼šè¦†ç›–å½“å‰ä½ç½®çš„æ•°æ®
        if (k == key) {
            e.value = value;
            return;
        }
        // å¦‚æœå½“å‰ä½ç½®ä¸ºç©ºï¼Œåˆ™åˆå§‹åŒ–ä¸€ä¸ªEntryå¯¹è±¡ï¼Œæ”¾åˆ°å½“å‰ä½ç½®ã€‚
        if (k == null) {
            replaceStaleEntry(key, value, i);
            return;
        }
    }
    // å¦‚æœå½“å‰ä½ç½®ä¸ä¸ºç©ºï¼Œå¹¶ä¸”å½“å‰ä½ç½®çš„keyä¹Ÿä¸ç­‰äºè¦èµ‹å€¼çš„key ï¼Œé‚£ä¹ˆå°†å»æ‰¾ä¸‹ä¸€ä¸ªç©ºä½ç½®ï¼Œç›´æ¥å°†æ•°æ®æ”¾åˆ°ä¸‹ä¸€ä¸ªç©ºä½ç½®å¤„ã€‚
    tab[i] = new Entry(key, value);
    int sz = ++size;
    if (!cleanSomeSlots(i, sz) &amp;amp;&amp;amp; sz &amp;gt;= threshold)
        rehash();
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬ä»set()æ–¹æ³•ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå¤„ç†é€»è¾‘æœ‰å››æ­¥ã€‚&lt;/p&gt;
&lt;ul readability=&quot;3.5&quot;&gt;&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;ç¬¬ä¸€æ­¥å…ˆæ ¹æ®Threadlocalå¯¹è±¡çš„hashcodeå’Œæ•°ç»„é•¿åº¦åšä¸è¿ç®—è·å–æ•°æ®åº”è¯¥æ”¾åœ¨å½“å‰æ•°ç»„ä¸­çš„ä½ç½®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;ç¬¬äºŒæ­¥å°±æ˜¯åˆ¤æ–­å½“å‰ä½ç½®æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºçš„è¯å°±ç›´æ¥åˆå§‹åŒ–ä¸€ä¸ªEntryå¯¹è±¡ï¼Œæ”¾åˆ°å½“å‰ä½ç½®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;ç¬¬ä¸‰æ­¥å¦‚æœå½“å‰ä½ç½®ä¸ä¸ºç©ºï¼Œè€Œå½“å‰ä½ç½®çš„Entryä¸­çš„keyå’Œä¼ è¿‡æ¥çš„keyä¸€æ ·ï¼Œé‚£ä¹ˆç›´æ¥è¦†ç›–æ‰å½“å‰ä½ç½®çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;ç¬¬å››æ­¥å¦‚æœå½“å‰ä½ç½®ä¸ä¸ºç©ºï¼Œå¹¶ä¸”å½“å‰ä½ç½®çš„Entryä¸­çš„keyå’Œä¼ è¿‡æ¥çš„key&lt;br/&gt;ä¹Ÿä¸ä¸€æ ·ï¼Œé‚£ä¹ˆå°±ä¼šå»æ‰¾ä¸‹ä¸€ä¸ªç©ºä½ç½®ï¼Œç„¶åå°†æ•°æ®å­˜æ”¾åˆ°ç©ºä½ç½®ï¼ˆ&lt;strong&gt;æ•°ç»„è¶…è¿‡é•¿åº¦åï¼Œä¼šæ‰§è¡Œæ‰©å®¹çš„&lt;/strong&gt;ï¼‰ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;åœ¨getçš„æ—¶å€™ä¹Ÿæ˜¯ç±»ä¼¼çš„é€»è¾‘ï¼Œå…ˆé€šè¿‡ä¼ å…¥çš„ThreadLocalçš„hashcodeè·å–åœ¨Entryæ•°ç»„ä¸­çš„ä½ç½®ï¼Œç„¶åæ‹¿å½“å‰ä½ç½®çš„Entryçš„Keyå’Œä¼ å…¥çš„ThreadLocalå¯¹æ¯”ï¼Œç›¸ç­‰çš„è¯ï¼Œç›´æ¥æŠŠæ•°æ®è¿”å›ï¼Œå¦‚æœä¸ç›¸ç­‰å°±å»åˆ¤æ–­å’Œæ•°ç»„ä¸­çš„ä¸‹ä¸€ä¸ªå€¼çš„keyæ˜¯å¦ç›¸ç­‰ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;private Entry getEntry(ThreadLocal&amp;lt;?&amp;gt; key) {
    int i = key.threadLocalHashCode &amp;amp; (table.length - 1);
    Entry e = table[i];
    if (e != null &amp;amp;&amp;amp; e.get() == key)
        return e;
    else
        return getEntryAfterMiss(key, i, e);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;/**
 * Version of getEntry method for use when key is not found in
 * its direct hash slot.
 *
 * @param  key the thread local object
 * @param  i the table index for key's hash code
 * @param  e the entry at table[i]
 * @return the entry associated with key, or null if no such
 */
private Entry getEntryAfterMiss(ThreadLocal&amp;lt;?&amp;gt; key, int i, Entry e) {
    Entry[] tab = table;
    int len = tab.length;

    while (e != null) {
        ThreadLocal&amp;lt;?&amp;gt; k = e.get();
        if (k == key)
            return e;
        if (k == null)
            expungeStaleEntry(i);
        else
            i = nextIndex(i, len);
        e = tab[i];
    }
    return null;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬ä¸Šæ–‡ä¸€ç›´è¯´ï¼ŒThreadLocalæ˜¯ä¿å­˜åœ¨å•ä¸ªçº¿ç¨‹ä¸­çš„æ•°æ®ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„æ•°æ®ï¼Œä½†æ˜¯å®é™…ThreadLocalé‡Œé¢çš„çœŸæ­£çš„å¯¹è±¡æ•°æ®ï¼Œå…¶å®æ˜¯ä¿å­˜åœ¨å †é‡Œé¢çš„ï¼Œè€Œçº¿ç¨‹é‡Œé¢åªæ˜¯å­˜å‚¨äº†å¯¹è±¡çš„å¼•ç”¨è€Œå·²ã€‚&lt;br/&gt;å¹¶ä¸”æˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™é€šå¸¸éœ€è¦åœ¨ä¸Šä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œçš„æ–¹æ³•çš„ä¸Šä¸‹æ–‡å…±äº«ThreadLocalä¸­çš„å˜é‡ã€‚&lt;br/&gt;ä¾‹å¦‚æˆ‘çš„ä¸»çº¿ç¨‹æ˜¯åœ¨æŸä¸ªæ–¹æ³•ä¸­æ‰§è¡Œä»£ç å‘¢ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•ä¸­æœ‰ä¸€æ®µä»£ç æ—¶æ–°åˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹ï¼Œåœ¨è¿™ä¸ªçº¿ç¨‹é‡Œé¢è¿˜ä½¿ç”¨äº†æˆ‘è¿™ä¸ªæ­£åœ¨æ‰§è¡Œçš„æ–¹æ³•é‡Œé¢çš„å®šä¹‰çš„ThreadLocalé‡Œé¢çš„å˜é‡ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå°±æ˜¯éœ€è¦ä»æ–°çº¿ç¨‹é‡Œé¢è°ƒç”¨å¤–é¢çº¿ç¨‹çš„æ•°æ®ï¼Œè¿™ä¸ªå°±éœ€è¦çº¿ç¨‹é—´å…±äº«äº†ã€‚è¿™ç§å­çˆ¶çº¿ç¨‹å…±äº«æ•°æ®çš„æƒ…å†µï¼ŒThreadLocalä¹Ÿæ˜¯æ”¯æŒçš„ã€‚&lt;br/&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt; ThreadLocal threadLocalMain = new InheritableThreadLocal();
 threadLocalMain.set(&quot;ä¸»çº¿ç¨‹å˜é‡&quot;);
 Thread t = new Thread() {
     @Override
     public void run() {
         super.run();
         System.out.println( &quot;ç°åœ¨è·å–çš„å˜é‡æ˜¯ =&quot; + threadLocalMain.get());
     }
 };
 t.start();
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿è¡Œç»“æœï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;ç°åœ¨è·å–çš„å˜é‡æ˜¯ =ä¸»çº¿ç¨‹å˜é‡
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸Šé¢è¿™æ ·çš„ä»£ç å°±èƒ½å®ç°å­çˆ¶çº¿ç¨‹å…±äº«æ•°æ®çš„æƒ…å†µï¼Œé‡ç‚¹æ˜¯ä½¿ç”¨InheritableThreadLocalæ¥å®ç°çš„å…±äº«ã€‚&lt;br/&gt;é‚£ä¹ˆå®ƒæ˜¯æ€ä¹ˆå®ç°æ•°æ®å…±äº«çš„å‘¢ï¼Ÿ&lt;br/&gt;åœ¨Threadç±»çš„init()æ–¹æ³•ä¸­æœ‰è¿™ä¹ˆä¸€æ®µä»£ç ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;if (inheritThreadLocals &amp;amp;&amp;amp; parent.inheritableThreadLocals != null)
            this.inheritableThreadLocals =ThreadLocal.createInheritedMap(parent.inheritableThreadLocals);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™æ®µä»£ç çš„æ„æ€æ˜¯ï¼Œ&lt;mark&gt;åœ¨åˆ›å»ºçº¿ç¨‹çš„æ—¶å€™ï¼Œå¦‚æœå½“å‰çº¿ç¨‹çš„inheritThreadLocalså˜é‡å’Œçˆ¶çº¿ç¨‹çš„inheritThreadLocalså˜é‡éƒ½ä¸ä¸ºç©ºçš„æ—¶å€™ï¼Œä¼šå°†çˆ¶çº¿ç¨‹çš„inheritThreadLocalså˜é‡ä¸­çš„æ•°æ®ï¼Œèµ‹ç»™å½“å‰çº¿ç¨‹ä¸­çš„inheritThreadLocalså˜é‡ã€‚&lt;/mark&gt;&lt;/p&gt;
&lt;h3 id=&quot;threadlocalçš„å†…å­˜æ³„æ¼é—®é¢˜&quot;&gt;ThreadLocalçš„å†…å­˜æ³„æ¼é—®é¢˜&lt;/h3&gt;
&lt;p&gt;ä¸Šæ–‡æˆ‘ä»¬ä¹Ÿæåˆ°è¿‡ï¼ŒThreadLocalä¸­çš„ThreadLocalMapé‡Œé¢çš„Entryå¯¹è±¡æ˜¯ç»§æ‰¿è‡ªWeakReferenceç±»çš„ï¼Œè¯´æ˜Entryçš„keyæ˜¯ä¸€ä¸ªå¼±å¼•ç”¨ã€‚&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20200910083829900.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_SmlNb2Vy,size_60,color_FFFFFF,t_70#pic_center&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;å¼±å¼•ç”¨æ˜¯ç”¨æ¥æè¿°é‚£äº›éå¿…é¡»çš„å¯¹è±¡ï¼Œå¼±å¼•ç”¨çš„å¯¹è±¡ï¼Œåªèƒ½ç”Ÿå­˜åˆ°ä¸‹ä¸€æ¬¡åƒåœ¾æ”¶é›†å‘ç”Ÿä¸ºæ­¢ã€‚å½“åƒåœ¾æ”¶é›†å™¨å¼€å§‹å·¥ä½œï¼Œæ— è®ºå½“å‰å†…å­˜æ˜¯å¦è¶³å¤Ÿï¼Œéƒ½ä¼šå›æ”¶æ‰åªè¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;è¿™ä¸ªå¼±å¼•ç”¨è¿˜æ˜¯ThreadLocalå¯¹è±¡æœ¬èº«ï¼Œæ‰€ä»¥ä¸€èˆ¬åœ¨çº¿ç¨‹æ‰§è¡Œå®Œæˆåï¼ŒThreadLocalå¯¹è±¡å°±ä¼šå˜æˆnulläº†ï¼Œè€Œä¸ºnullçš„å¼±å¼•ç”¨å¯¹è±¡ï¼Œåœ¨ä¸‹ä¸€æ¬¡GCçš„æ—¶å€™å°±ä¼šè¢«æ¸…é™¤æ‰ï¼Œè¿™æ ·Entryçš„Keyçš„å†…å­˜ç©ºé—´å°±è¢«é‡Šæ”¾å‡ºæ¥äº†ï¼Œä½†æ˜¯Entryçš„valueè¿˜åœ¨å ç”¨çš„å†…å­˜ï¼Œå¦‚æœçº¿ç¨‹æ˜¯è¢«å¤ç”¨çš„ï¼ˆä¾‹å¦‚&lt;mark&gt;çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹&lt;/mark&gt;ï¼‰ï¼Œé‚£ä¹ˆè¿™é‡Œé¢çš„valueå€¼å°±ä¼šè¶Šæ¥è¶Šå¤šï¼Œæœ€ç»ˆå°±å¯¼è‡´äº†å†…å­˜æ³„æ¼ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é˜²æ­¢å†…å­˜æ³„æ¼çš„åŠæ³•å°±æ˜¯åœ¨æ¯æ¬¡ä½¿ç”¨å®ŒThreadLocalçš„æ—¶å€™éƒ½å»æ‰§è¡Œä»¥ä¸‹remove()æ–¹æ³•ï¼Œå°±å¯ä»¥æŠŠkeyå’Œvalueçš„ç©ºé—´éƒ½é‡Šæ”¾äº†ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;mark&gt;é‚£æ—¢ç„¶å®¹æ˜“äº§ç”Ÿå†…å­˜æ³„æ¼ï¼Œä¸ºä»€ä¹ˆè¿˜è¦è®¾ç½®æˆå¼±å¼•ç”¨çš„å‘¢ï¼Ÿ&lt;/mark&gt;&lt;br/&gt;å¦‚æœæ­£å¸¸æƒ…å†µä¸‹åº”è¯¥æ˜¯å¼ºå¼•ç”¨ï¼Œä½†æ˜¯å¼ºå¼•ç”¨åªè¦å¼•ç”¨å…³ç³»è¿˜åœ¨å°±ä¸€ç›´ä¸ä¼šè¢«å›æ”¶ï¼Œæ‰€ä»¥å¦‚æœçº¿ç¨‹è¢«å¤ç”¨äº†ï¼Œé‚£ä¹ˆEntryä¸­çš„Keyå’ŒValueéƒ½ä¸ä¼šè¢«å›æ”¶ï¼Œè¿™æ ·å°±é€ æˆäº†Keyå’ŒValueéƒ½ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼äº†ã€‚&lt;/p&gt;
</description>
<pubDate>Thu, 10 Sep 2020 15:08:00 +0000</pubDate>
<dc:creator>çºªè«</dc:creator>
<og:description>å‰è¨€ é¢è¯•çš„æ—¶å€™è¢«é—®åˆ°ThreadLocalçš„ç›¸å…³çŸ¥è¯†ï¼Œæ²¡æœ‰å›ç­”å¥½ï¼ˆå¥¶å¥¶çš„ï¼Œç°åœ¨æ„Ÿè§‰é—®å•¥éƒ½èƒ½è¢«é—®å€’ï¼‰ï¼Œæ‰€ä»¥æˆ‘å†³å®šå…ˆè§£å†³è¿™å‡ æ¬¡é¢è¯•ä¸­éƒ½é‡åˆ°çš„é«˜é¢‘é—®é¢˜ï¼ŒæŠŠè¿™å‡ ä¸ªç¡¬éª¨å¤´éƒ½èƒ½ç†è§£çš„é€å½»çš„è¯´å‡ºæ¥äº†ï¼Œæ„Ÿè§‰æœ€èµ·ç ä¸</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/jimoer/p/13649008.html</dc:identifier>
</item>
</channel>
</rss>