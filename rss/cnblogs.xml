<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>åšå®¢å›­_é¦–é¡µ</title>
<link></link>
<description>ä»£ç æ”¹å˜ä¸–ç•Œ</description>
<item>
<title>Net Coreé›†æˆExceptionlessåˆ†å¸ƒå¼æ—¥å¿—åŠŸèƒ½ä»¥åŠå…¨å±€å¼‚å¸¸è¿‡æ»¤ - ä¾ä¹ç¥</title>
<link>http://www.cnblogs.com/yilezhu/p/9339017.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/yilezhu/p/9339017.html</guid>
<description>&lt;blockquote readability=&quot;7.2727272727273&quot;&gt;
&lt;p&gt;ç›¸ä¿¡å¾ˆå¤šæœ‹å‹éƒ½çœ‹è¿‡æˆ‘çš„ä¸Šç¯‡å…³äºExceptionlessçš„ç®€å•å…¥é—¨æ•™ç¨‹[asp.Net Coreå…è´¹å¼€æºåˆ†å¸ƒå¼å¼‚å¸¸æ—¥å¿—æ”¶é›†æ¡†æ¶Exceptionlesså®‰è£…é…ç½®ä»¥åŠç®€å•ä½¿ç”¨å›¾æ–‡æ•™ç¨‹][&lt;a href=&quot;https://www.cnblogs.com/yilezhu/p/9193723.html&quot; class=&quot;uri&quot;&gt;https://www.cnblogs.com/yilezhu/p/9193723.html&lt;/a&gt;] ä¸Šç¯‡æ–‡ç« åªæ˜¯ç®€å•çš„ä»‹ç»äº†Exceptionlessæ˜¯ä»€ä¹ˆï¼Ÿèƒ½åšä»€ä¹ˆå‘¢ï¼Ÿä»¥åŠæ€ä¹ˆè¿›è¡Œæœ¬åœ°éƒ¨ç½²å’Œå¼‚å¸¸æäº¤çš„ç®€å•ç”¨æ³•ï¼Œè€Œè¿™ç¯‡æ–‡ç« å°†å¸¦ä½ æ¢è®¨ä¸€ä¸‹Exceptionlessçš„å¼‚å¸¸æ”¶é›†é«˜çº§ç”¨æ³•ä»¥åŠä½ ç†Ÿæ‚‰çš„ç±»ä¼¼NLogçš„æ—¥å¿—ç”¨æ³•ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™ç¯‡æ–‡ç« æœ‰ä¸€éƒ¨åˆ†å†…å®¹ç¿»è¯‘è‡ªå®˜æ–¹æ–‡æ¡£ï¼Œ[ç‚¹æˆ‘é˜…è¯»][&lt;a href=&quot;https://github.com/exceptionless/Exceptionless.Net/wiki/Sending-Events&quot; class=&quot;uri&quot;&gt;https://github.com/exceptionless/Exceptionless.Net/wiki/Sending-Events&lt;/a&gt;] è‹±è¯­å¥½çš„å¯ä»¥è‡ªè¡Œé˜…è¯» ã€‚å½“ç„¶ä¸­é—´å¾ˆå¤šä»£ç æˆ‘éƒ½è¿›è¡Œäº†é‡æ„ï¼Œè¿˜æœ‰å‚è€ƒå‘¨æ—­é¾™çš„ä»£ç ï¼Œè¿›è¡Œäº†ç®€å•åœ°å°è£…ï¼ŒåŒæ—¶åŠ å…¥äº†ä¸ºwebapiåŠ å…¥å¼‚å¸¸å…¨å±€è¿‡æ»¤å™¨è¿›è¡Œå¼‚å¸¸æ—¥å¿—çš„è®°å½•ã€‚å¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;2.125&quot;&gt;
&lt;p&gt;æœ¬æ–‡åœ°å€ï¼š&lt;a href=&quot;https://www.cnblogs.com/yilezhu/p/9339017.html&quot; class=&quot;uri&quot;&gt;https://www.cnblogs.com/yilezhu/p/9339017.html&lt;/a&gt;&lt;br/&gt;ä½œè€…ï¼šä¾ä¹ç¥&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;æ‰‹åŠ¨å‘é€é”™è¯¯&quot;&gt;æ‰‹åŠ¨å‘é€é”™è¯¯&lt;/h3&gt;
&lt;p&gt;ä¸Šç¯‡æ–‡ç« ä»‹ç»äº†ï¼Œå¯¼å…¥å‘½åç©ºé—´åï¼Œå¹¶ä½¿ç”¨å¦‚ä¸‹ä»£ç å°±å¯ä»¥ç®€å•åœ°æäº¤å¼‚å¸¸æ—¥å¿—ï¼š&lt;/p&gt;
&lt;pre class=&quot;c#&quot;&gt;
&lt;code&gt;try {
    throw new ApplicationException(Guid.NewGuid().ToString());
} catch (Exception ex) {
    ex.ToExceptionless().Submit();
}&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;å‘é€é™„åŠ ä¿¡æ¯&quot;&gt;å‘é€é™„åŠ ä¿¡æ¯&lt;/h3&gt;
&lt;p&gt;å½“ç„¶ä½ è¿˜å¯ä»¥ä¸ºå‘é€çš„äº‹ä»¶æ·»åŠ é¢å¤–çš„æ ‡è®°ä¿¡æ¯ï¼Œæ¯”å¦‚åæ ‡ï¼Œæ ‡ç­¾ï¼Œä»¥åŠå…¶ä»–çš„ç”¨æˆ·ç›¸å…³çš„ä¿¡æ¯ç­‰ç­‰&lt;/p&gt;
&lt;pre class=&quot;c#&quot;&gt;
&lt;code&gt;try {
    throw new ApplicationException(&quot;Unable to create order from quote.&quot;);
} catch (Exception ex) {
    ex.ToExceptionless()
        // è®¾ç½®ä¸€ä¸ªReferenceIdæ–¹ä¾¿æŸ¥æ‰¾
        .SetReferenceId(Guid.NewGuid().ToString(&quot;N&quot;))
        // æ·»åŠ ä¸€ä¸ªä¸åŒ…å«CreditCardNumberå±æ€§çš„å¯¹è±¡ä¿¡æ¯
        .AddObject(order, &quot;Order&quot;, excludedPropertyNames: new [] { &quot;CreditCardNumber&quot; }, maxDepth: 2)
        // è®¾ç½®ä¸€ä¸ªåä¸º&quot;Quote&quot;çš„ç¼–å·
        .SetProperty(&quot;Quote&quot;, 123)
        // æ·»åŠ ä¸€ä¸ªåä¸ºâ€œOrderâ€çš„æ ‡ç­¾
        .AddTags(&quot;Order&quot;)
        //  æ ‡è®°ä¸ºå…³é”®å¼‚å¸¸
        .MarkAsCritical()
        // è®¾ç½®ä¸€ä¸ªä½ç½®åæ ‡
        .SetGeo(43.595089, -88.444602)
        // åœ¨ä½ çš„ç³»ç»Ÿä¸­è®¾ç½®useridå¹¶æä¾›ä¸€ä¸ªæœ‰å¥½çš„åå­—ï¼Œä¿—ç§°æ˜µç§°
        .SetUserIdentity(user.Id, user.FullName)
        // ä¸ºå¼‚å¸¸ä¿¡æ¯æ·»åŠ ä¸€äº›ç”¨æˆ·æè¿°ä¿¡æ¯.
        .SetUserDescription(user.EmailAddress, &quot;I tried creating an order from my saved quote.&quot;)
        // æäº¤.
        .Submit();
}&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;ç»Ÿä¸€ä¿®æ”¹æœªå¤„ç†çš„å¼‚å¸¸æŠ¥å‘Š&quot;&gt;ç»Ÿä¸€ä¿®æ”¹æœªå¤„ç†çš„å¼‚å¸¸æŠ¥å‘Š&lt;/h3&gt;
&lt;p&gt;ä½ å¯ä»¥åœ¨é€šè¿‡SubmittingEvent äº‹ä»¶è®¾ç½®å…¨å±€çš„å¿½ç•¥å¼‚å¸¸ä¿¡æ¯æ·»åŠ ä¸€äº›è‡ªå®šä¹‰ä¿¡æ¯ç­‰ç­‰&lt;/p&gt;
&lt;pre class=&quot;c#&quot;&gt;
&lt;code&gt;
 #region Exceptionlessé…ç½®
            ExceptionlessClient.Default.Configuration.ApiKey = exceptionlessOptions.Value.ApiKey;
            ExceptionlessClient.Default.Configuration.ServerUrl = exceptionlessOptions.Value.ServerUrl;
            ExceptionlessClient.Default.SubmittingEvent += OnSubmittingEvent;
            app.UseExceptionless();
#endregion

 /// &amp;lt;summary&amp;gt;
        /// å…¨å±€é…ç½®Exceptionless
        /// &amp;lt;/summary&amp;gt;
        /// &amp;lt;param name=&quot;sender&quot;&amp;gt;&amp;lt;/param&amp;gt;
        /// &amp;lt;param name=&quot;e&quot;&amp;gt;&amp;lt;/param&amp;gt;
        private void OnSubmittingEvent(object sender, EventSubmittingEventArgs e)
        {
            // åªå¤„ç†æœªå¤„ç†çš„å¼‚å¸¸
            if (!e.IsUnhandledError)
                return;

            // å¿½ç•¥404é”™è¯¯
            if (e.Event.IsNotFound())
            {
                e.Cancel = true;
                return;
            }

            // å¿½ç•¥æ²¡æœ‰é”™è¯¯ä½“çš„é”™è¯¯
            var error = e.Event.GetError();
            if (error == null)
                return;
            // å¿½ç•¥ 401 (Unauthorized) å’Œ è¯·æ±‚éªŒè¯çš„é”™è¯¯.
            if (error.Code == &quot;401&quot; || error.Type == &quot;System.Web.HttpRequestValidationException&quot;)
            {
                e.Cancel = true;
                return;
            }
            // Ignore any exceptions that were not thrown by our code.
            var handledNamespaces = new List&amp;lt;string&amp;gt; { &quot;Exceptionless&quot; };
            if (!error.StackTrace.Select(s =&amp;gt; s.DeclaringNamespace).Distinct().Any(ns =&amp;gt; handledNamespaces.Any(ns.Contains)))
            {
                e.Cancel = true;
                return;
            }
            // æ·»åŠ é™„åŠ ä¿¡æ¯.
            //e.Event.AddObject(order, &quot;Order&quot;, excludedPropertyNames: new[] { &quot;CreditCardNumber&quot; }, maxDepth: 2);
            e.Event.Tags.Add(&quot;MunicipalPublicCenter.BusinessApi&quot;);
            e.Event.MarkAsCritical();
            //e.Event.SetUserIdentity();
        }&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;é…åˆä½¿ç”¨-nlog-æˆ–-log4net&quot;&gt;é…åˆä½¿ç”¨ NLog æˆ– Log4Net&lt;/h3&gt;
&lt;p&gt;æœ‰æ—¶å€™ï¼Œç¨‹åºä¸­éœ€è¦å¯¹æ—¥å¿—ä¿¡æ¯åšéå¸¸è¯¦ç»†çš„è®°å½•ï¼Œæ¯”å¦‚åœ¨å¼€å‘é˜¶æ®µã€‚è¿™ä¸ªæ—¶å€™å¯ä»¥é…åˆ log4net æˆ–è€… nlog æ¥è”åˆä½¿ç”¨ exceptionlessï¼Œè¯¦ç»†å¯ä»¥æŸ¥çœ‹è¿™ä¸ªå®˜æ–¹çš„ [ç¤ºä¾‹][&lt;a href=&quot;https://github.com/exceptionless/Exceptionless.Net/tree/master/samples/Exceptionless.SampleConsole&quot; class=&quot;uri&quot;&gt;https://github.com/exceptionless/Exceptionless.Net/tree/master/samples/Exceptionless.SampleConsole&lt;/a&gt;]ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ çš„ç¨‹åºä¸­æœ‰åœ¨çŸ­æ—¶é—´å†…ç”Ÿæˆå¤§é‡æ—¥å¿—çš„æƒ…å†µï¼Œæ¯”å¦‚ä¸€åˆ†é’Ÿäº§ç”Ÿä¸Šåƒçš„æ—¥å¿—ã€‚è¿™ä¸ªæ—¶å€™ä½ éœ€è¦ä½¿ç”¨å†…å­˜å­˜å‚¨ï¼ˆin-memory storeï¼‰äº‹ä»¶ï¼Œè¿™æ ·å®¢æˆ·ç«¯å°±ä¸ä¼šå°†äº‹ä»¶ç³»åˆ—åŒ–çš„ç£ç›˜ï¼Œæ‰€ä»¥ä¼šå¿«å¾ˆå¤šã€‚è¿™æ ·å°±å¯ä»¥ä½¿ç”¨Log4net æˆ–è€… Nlogæ¥å°†ä¸€äº›äº‹ä»¶å­˜å‚¨åˆ°ç£ç›˜ï¼Œå¦å¤– Exceptionless äº‹ä»¶å­˜å‚¨åˆ°å†…å­˜å½“ä¸­ã€‚&lt;/p&gt;
&lt;h3 id=&quot;exceptionless-æ—¥å¿—è®°å½•çš„å°è£…&quot;&gt;Exceptionless æ—¥å¿—è®°å½•çš„å°è£…&lt;/h3&gt;
&lt;ol readability=&quot;25&quot;&gt;&lt;li readability=&quot;14&quot;&gt;
&lt;p&gt;é¦–å…ˆç®€å•åœ°å°è£…ä¸€ä¸ªILoggerHelperæ¥å£&lt;/p&gt;
&lt;pre class=&quot;c#&quot;&gt;
&lt;code&gt;/// &amp;lt;summary&amp;gt;
    /// lzhu
    /// 2018.7.19
    /// æ—¥å¿—æ¥å£
    /// &amp;lt;/summary&amp;gt;
    public interface ILoggerHelper
    {
        /// &amp;lt;summary&amp;gt;
        /// è®°å½•traceæ—¥å¿—
        /// &amp;lt;/summary&amp;gt;
        /// &amp;lt;param name=&quot;source&quot;&amp;gt;ä¿¡æ¯æ¥æº&amp;lt;/param&amp;gt;
        /// &amp;lt;param name=&quot;message&quot;&amp;gt;æ—¥å¿—å†…å®¹&amp;lt;/param&amp;gt;
        /// &amp;lt;param name=&quot;args&quot;&amp;gt;æ ‡è®°&amp;lt;/param&amp;gt;
        void Trace(string source, string message, params string[] args);
        /// &amp;lt;summary&amp;gt;
        /// è®°å½•debugä¿¡æ¯
        /// &amp;lt;/summary&amp;gt;
        /// &amp;lt;param name=&quot;source&quot;&amp;gt;ä¿¡æ¯æ¥æº&amp;lt;/param&amp;gt;
        /// &amp;lt;param name=&quot;message&quot;&amp;gt;æ—¥å¿—å†…å®¹&amp;lt;/param&amp;gt;
        /// &amp;lt;param name=&quot;args&quot;&amp;gt;æ ‡è®°&amp;lt;/param&amp;gt;
        void Debug(string source, string message, params string[] args);
        /// &amp;lt;summary&amp;gt;
        /// è®°å½•ä¿¡æ¯
        /// &amp;lt;/summary&amp;gt;
        /// &amp;lt;param name=&quot;source&quot;&amp;gt;ä¿¡æ¯æ¥æº&amp;lt;/param&amp;gt;
        /// &amp;lt;param name=&quot;message&quot;&amp;gt;æ—¥å¿—å†…å®¹&amp;lt;/param&amp;gt;
        /// &amp;lt;param name=&quot;args&quot;&amp;gt;æ ‡è®°&amp;lt;/param&amp;gt;
        void Info(string source, string message, params string[] args);
        /// &amp;lt;summary&amp;gt;
        /// è®°å½•è­¦å‘Šæ—¥å¿—
        /// &amp;lt;/summary&amp;gt;
        /// &amp;lt;param name=&quot;source&quot;&amp;gt;ä¿¡æ¯æ¥æº&amp;lt;/param&amp;gt;
        /// &amp;lt;param name=&quot;message&quot;&amp;gt;æ—¥å¿—å†…å®¹&amp;lt;/param&amp;gt;
        /// &amp;lt;param name=&quot;args&quot;&amp;gt;æ ‡è®°&amp;lt;/param&amp;gt;
        void Warn(string source, string message, params string[] args);
        /// &amp;lt;summary&amp;gt;
        /// è®°å½•é”™è¯¯æ—¥å¿—
        /// &amp;lt;/summary&amp;gt;
        /// &amp;lt;param name=&quot;source&quot;&amp;gt;ä¿¡æ¯æ¥æº&amp;lt;/param&amp;gt;
        /// &amp;lt;param name=&quot;message&quot;&amp;gt;æ—¥å¿—å†…å®¹&amp;lt;/param&amp;gt;
        /// &amp;lt;param name=&quot;args&quot;&amp;gt;æ ‡è®°&amp;lt;/param&amp;gt;
        void Error(string source, string message, params string[] args);
    }&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li readability=&quot;34&quot;&gt;
&lt;p&gt;æ—¢ç„¶æœ‰äº†æ¥å£ï¼Œé‚£ä¹ˆå½“ç„¶å¾—å®ç°å®ƒäº†&lt;/p&gt;
&lt;pre class=&quot;c#&quot;&gt;
&lt;code&gt;/// &amp;lt;summary&amp;gt;
    /// lzhu
    /// 2018.7.19
    /// Exceptionlessæ—¥å¿—å®ç°
    /// &amp;lt;/summary&amp;gt;
    public class ExceptionlessLogger : ILoggerHelper
    {
        /// &amp;lt;summary&amp;gt;
        /// è®°å½•traceæ—¥å¿—
        /// &amp;lt;/summary&amp;gt;
        /// &amp;lt;param name=&quot;source&quot;&amp;gt;ä¿¡æ¯æ¥æº&amp;lt;/param&amp;gt;
        /// &amp;lt;param name=&quot;message&quot;&amp;gt;æ—¥å¿—å†…å®¹&amp;lt;/param&amp;gt;
        /// &amp;lt;param name=&quot;args&quot;&amp;gt;æ·»åŠ æ ‡è®°&amp;lt;/param&amp;gt;
        public void Trace(string source,string message, params string[] args)
        {
            if (args != null &amp;amp;&amp;amp; args.Length &amp;gt; 0)
            {
                ExceptionlessClient.Default.CreateLog(source, message, LogLevel.Trace).AddTags(args).Submit();

            }
            else
            {
                ExceptionlessClient.Default.SubmitLog(source, message, LogLevel.Trace);
            }
        }
        /// &amp;lt;summary&amp;gt;
        /// è®°å½•debugä¿¡æ¯
        /// &amp;lt;/summary&amp;gt;
        /// &amp;lt;param name=&quot;source&quot;&amp;gt;ä¿¡æ¯æ¥æº&amp;lt;/param&amp;gt;
        /// &amp;lt;param name=&quot;message&quot;&amp;gt;æ—¥å¿—å†…å®¹&amp;lt;/param&amp;gt;
        /// &amp;lt;param name=&quot;args&quot;&amp;gt;æ ‡è®°&amp;lt;/param&amp;gt;
        public void Debug(string source, string message, params string[] args)
        {
            if (args != null &amp;amp;&amp;amp; args.Length &amp;gt; 0)
            {
                ExceptionlessClient.Default.CreateLog(source, message, LogLevel.Debug).AddTags(args).Submit();
            }
            else
            {
                ExceptionlessClient.Default.SubmitLog(source, message, LogLevel.Debug);
            }
        }
        /// &amp;lt;summary&amp;gt;
        /// è®°å½•ä¿¡æ¯
        /// &amp;lt;/summary&amp;gt;
        /// &amp;lt;param name=&quot;source&quot;&amp;gt;ä¿¡æ¯æ¥æº&amp;lt;/param&amp;gt;
        /// &amp;lt;param name=&quot;message&quot;&amp;gt;æ—¥å¿—å†…å®¹&amp;lt;/param&amp;gt;
        /// &amp;lt;param name=&quot;args&quot;&amp;gt;æ ‡è®°&amp;lt;/param&amp;gt;
        public void Info(string source, string message, params string[] args)
        {
            if (args != null &amp;amp;&amp;amp; args.Length &amp;gt; 0)
            {
                ExceptionlessClient.Default.CreateLog(source, message, LogLevel.Info).AddTags(args).Submit();
            }
            else
            {
                ExceptionlessClient.Default.SubmitLog(source, message, LogLevel.Info);
            }
        }
        /// &amp;lt;summary&amp;gt;
        /// è®°å½•è­¦å‘Šæ—¥å¿—
        /// &amp;lt;/summary&amp;gt;
        /// &amp;lt;param name=&quot;source&quot;&amp;gt;ä¿¡æ¯æ¥æº&amp;lt;/param&amp;gt;
        /// &amp;lt;param name=&quot;message&quot;&amp;gt;æ—¥å¿—å†…å®¹&amp;lt;/param&amp;gt;
        /// &amp;lt;param name=&quot;args&quot;&amp;gt;æ ‡è®°&amp;lt;/param&amp;gt;
        public void Warn(string source, string message, params string[] args)
        {
            if (args != null &amp;amp;&amp;amp; args.Length &amp;gt; 0)
            {
                ExceptionlessClient.Default.CreateLog(source, message, LogLevel.Warn).AddTags(args).Submit();
            }
            else
            {
                ExceptionlessClient.Default.SubmitLog(source, message, LogLevel.Warn);
            }
        }
        /// &amp;lt;summary&amp;gt;
        /// è®°å½•é”™è¯¯æ—¥å¿—
        /// &amp;lt;/summary&amp;gt;
        /// &amp;lt;param name=&quot;source&quot;&amp;gt;ä¿¡æ¯æ¥æº&amp;lt;/param&amp;gt;
        /// &amp;lt;param name=&quot;message&quot;&amp;gt;æ—¥å¿—å†…å®¹&amp;lt;/param&amp;gt;
        /// &amp;lt;param name=&quot;args&quot;&amp;gt;æ ‡è®°&amp;lt;/param&amp;gt;
        public void Error(string source, string message, params string[] args)
        {
            if (args != null &amp;amp;&amp;amp; args.Length &amp;gt; 0)
            {
                ExceptionlessClient.Default.CreateLog(source, message, LogLevel.Error).AddTags(args).Submit();
            }
            else
            {
                ExceptionlessClient.Default.SubmitLog(source, message, LogLevel.Error);
            }
        }
    }&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;å½“ç„¶å®ç°å¥½äº†ï¼Œå¯åˆ«å¿˜äº†ä¾èµ–æ³¨å…¥å“¦&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;pre class=&quot;c#&quot;&gt;
&lt;code&gt; //æ³¨å…¥ExceptionlessLoggeræœåŠ¡
            services.AddSingleton&amp;lt;ILoggerHelper, ExceptionlessLogger&amp;gt;();&lt;/code&gt;
&lt;/pre&gt;
&lt;ol readability=&quot;12&quot;&gt;&lt;li readability=&quot;9&quot;&gt;
&lt;p&gt;è¿™æ—¶å€™è¯¥å†™ä¸€ä¸ªå…¨å±€å¼‚å¸¸è¿‡æ»¤å™¨äº†&lt;/p&gt;
&lt;pre class=&quot;c#&quot;&gt;
&lt;code&gt;/// &amp;lt;summary&amp;gt;
    /// lzhu
    /// 2018.7.19
    /// å®šä¹‰å…¨å±€è¿‡æ»¤å™¨
    /// &amp;lt;/summary&amp;gt;
    public class GlobalExceptionFilter : IExceptionFilter
    {

        private readonly ILoggerHelper _loggerHelper;
        //æ„é€ å‡½æ•°æ³¨å…¥ILoggerHelper
        public GlobalExceptionFilter(ILoggerHelper loggerHelper)
        {
            _loggerHelper = loggerHelper;
        }

        public void OnException(ExceptionContext filterContext)
        {
            _loggerHelper.Error(filterContext.Exception.TargetSite.GetType().FullName, filterContext.Exception.ToString(), MpcKeys.GlobalExceptionCommonTags, filterContext.Exception.GetType().FullName);
            var result = new BaseResult()
            {
                errcode = ResultCodeAddMsgKeys.CommonExceptionCode,//ç³»ç»Ÿå¼‚å¸¸ä»£ç 
                errmsg= ResultCodeAddMsgKeys.CommonExceptionMsg,//ç³»ç»Ÿå¼‚å¸¸ä¿¡æ¯
            };
            filterContext.Result = new ObjectResult(result);
            filterContext.HttpContext.Response.StatusCode = (int)HttpStatusCode.InternalServerError;
            filterContext.ExceptionHandled = true;
        }
    }&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;å…¨å±€è¿‡æ»¤å™¨å†™å¥½äº†ï¼Œæ€ä¹ˆè®©å®ƒç”Ÿæ•ˆå‘¢ï¼Œå®¢è§‚åˆ«æ€¥å•Šï¼Œä¸Šæ­£èœ&lt;/p&gt;
&lt;pre class=&quot;c#&quot;&gt;
&lt;code&gt;  //æ·»åŠ éªŒè¯
            services.AddMvc(options=&amp;gt; {
                options.Filters.Add&amp;lt;GlobalExceptionFilter&amp;gt;();
            }).AddFluentValidation();&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li readability=&quot;10&quot;&gt;
&lt;p&gt;å“ˆå“ˆï¼Œæ²¡ä»€ä¹ˆè¯´çš„äº†ï¼Œä»£ç éƒ½å·²ç»å†™å¥½äº†ï¼Œå‰©ä¸‹çš„å°±æ˜¯ä¸Šä»£ç æµ‹è¯•ç»“æœäº†ã€‚æˆ‘è¿™é‡Œåªæ˜¯ç®€å•åœ°apiæµ‹è¯•ä¸‹ï¼Œä¸‡èƒ½çš„ValuesControllerç™»åœºï¼š&lt;/p&gt;
&lt;pre class=&quot;c#&quot;&gt;
&lt;code&gt; // GET api/values/5
        [HttpGet(&quot;{id}&quot;)]
        public ActionResult&amp;lt;string&amp;gt; Get(int id)
        {
            //try
            //{
            throw new Exception($&quot;æµ‹è¯•æŠ›å‡ºçš„å¼‚å¸¸{id}&quot;);
            //}
            //catch (Exception ex)
            //{
            //    ex.ToExceptionless().Submit();
            //}
            //return &quot;Unknown Error!&quot;;

        }&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œæ˜¯ç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œä¸è¿›è¡Œtrycatch,è¿™æ—¶å€™å¼‚å¸¸ä¼šè¢«å…¨å±€è¿‡æ»¤å™¨æ•è·ï¼Œç„¶åæ”¾åˆ°Exceptionlessçš„Logé‡Œé¢ï¼Œåˆ«é—®æˆ‘ä¸ºä»€ä¹ˆä¼šåœ¨logé‡Œé¢ï¼Œå› ä¸ºæˆ‘å…¨å±€è¿‡æ»¤å™¨ä»£ç é‡Œé¢å·²ç»å†™æ˜äº†ï¼Œä¸æ˜ç™½çš„å›å»çœ‹ä»£ç ï¼Œç„¶åçœ‹æ¥å£è°ƒç”¨çš„å®ç°æ–¹æ³•ã€‚ä¸‹é¢ä¸Šç»“æœï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1377250/201807/1377250-20180719230822995-1262896673.png&quot; alt=&quot;1532012181451&quot;/&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;ç‚¹è¿›å»ï¼Œçœ‹çœ‹è¯¦ç»†ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1377250/201807/1377250-20180719230822444-554363347.png&quot; alt=&quot;1532012249948&quot;/&gt;&lt;/p&gt;
&lt;ol readability=&quot;4.7964601769912&quot;&gt;&lt;li readability=&quot;12.470796460177&quot;&gt;
&lt;p&gt;å†æµ‹è¯•ä¸‹ä½¿ç”¨try catchæ•è·çš„å¼‚å¸¸å¤„ç†ï¼Œè¿™æ—¶å€™å¼‚å¸¸ä¿¡æ¯ä¼šè¢«æäº¤åˆ°Exceptionè¿™ä¸ªé‡Œé¢ã€‚ç›´æ¥ä¸Šä»£ç å§&lt;/p&gt;
&lt;pre class=&quot;c#&quot;&gt;
&lt;code&gt;// GET api/values/5
        [HttpGet(&quot;{id}&quot;)]
        public ActionResult&amp;lt;string&amp;gt; Get(int id)
        {
            try
            {
                throw new Exception($&quot;æµ‹è¯•æŠ›å‡ºçš„å¼‚å¸¸{id}&quot;);
            }
            catch (Exception ex)
            {
                ex.ToExceptionless().Submit();
            }
            return &quot;Unknown Error!&quot;;

        }&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åˆ°exceptionlessé‡Œé¢çœ‹çœ‹ä¸æ´»çš„å¼‚å¸¸å§ã€‚æ‰“å­—å¾ˆç´¯ç›´æ¥ä¸Šå›¾å§&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1377250/201807/1377250-20180719230821803-1365020670.png&quot; alt=&quot;1532012444443&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç‚¹è¿›å»çœ‹çœ‹è¯¦ç»†ä¿¡æ¯ï¼Œæœ‰ä¸‰ä¸ªtabï¼Œä¸‹é¢ä¹‹ç²˜è´´ä¸€ä¸ªå›¾ç‰‡äº†ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1377250/201807/1377250-20180719230821285-1959372186.png&quot; alt=&quot;1532012508157&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;æœ€åæºç å°±ä¸ä¸Šäº†å› ä¸ºä¸Šé¢ä»£ç å¾ˆæ¸…æ¥šäº†&quot;&gt;æœ€åï¼Œæºç å°±ä¸ä¸Šäº†ï¼Œå› ä¸ºä¸Šé¢ä»£ç å¾ˆæ¸…æ¥šäº†&lt;/h3&gt;
&lt;h3 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h3&gt;
&lt;p&gt;æœ¬æ–‡æ²¡æœ‰å¯¹Exceptionlessè¿›è¡Œè¿‡å¤šåœ°ä»‹ç»ï¼Œå› ä¸ºåšä¸»çš„[ä¸Šç¯‡æ–‡ç« ][&lt;a href=&quot;https://www.cnblogs.com/yilezhu/p/9193723.html&quot; class=&quot;uri&quot;&gt;https://www.cnblogs.com/yilezhu/p/9193723.html&lt;/a&gt;] å·²ç»è¿›è¡Œäº†è¯¦ç»†çš„ä»‹ç»ã€‚ç›´æ¥åˆ‡å…¥æ­£é¢˜ï¼Œå…ˆå¯¹å®˜æ–¹é«˜çº§ç”¨æ³•è¿›è¡Œäº†ç®€å•åœ°ç¿»è¯‘ã€‚ç„¶åå¯¹Exceptionless Logè¿™ä¸ªeventtypeè¿›è¡Œäº†ç®€å•åœ°å°è£…ï¼Œè®©ä½ å¯ä»¥åƒä½¿ç”¨NLogä¸€æ ·å¾ˆçˆ½çš„ä½¿ç”¨Exceptionlessã€‚æœ€åé€šè¿‡ä¸€ä¸ªasp.net core web apiçš„é¡¹ç›®è¿›è¡Œäº†æ¼”ç¤ºï¼Œåœ¨å…¨å±€è¿‡æ»¤å™¨ä¸­åˆ©ç”¨å°è£…çš„Logæ–¹æ³•è¿›è¡Œå…¨å±€å¼‚å¸¸çš„æ•è·ã€‚å¸Œæœ›å¯¹å¤§å®¶ä½¿ç”¨Exceptionlessæœ‰æ‰€å¸®åŠ©ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</description>
<pubDate>Thu, 19 Jul 2018 23:26:00 +0000</pubDate>
<dc:creator>ä¾ä¹ç¥</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/yilezhu/p/9339017.html</dc:identifier>
</item>
<item>
<title>ä¼˜é›…çš„ç±»å†™æ³• - æˆ‘æ˜¯leon</title>
<link>http://www.cnblogs.com/walls/p/9339300.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/walls/p/9339300.html</guid>
<description>&lt;h2 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;è™½ç„¶ç°åœ¨å·²ç»æ˜¯ES6çš„æ—¶ä»£ï¼Œä½†æ˜¯ï¼Œè¿˜æ˜¯æœ‰å¿…è¦äº†è§£ä¸‹ES5æ˜¯æ€ä¹ˆå†™ä¸€ä¸ªç±»çš„ã€‚&lt;br/&gt;æœ¬æ–‡è¯¦è¿°JavaScripté¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„ç±»å†™æ³•ï¼Œå¹¶åˆ†æ­¥éª¤è®²è¿°å¦‚ä½•å†™å‡ºä¼˜é›…çš„ç±»ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä¸€ä¾‹å­&quot;&gt;ä¸€ã€ä¾‹å­&lt;/h2&gt;
&lt;p&gt;ä¾‹å­ä¸ºä¸€ä¸ªè½»æç¤ºç»„ä»¶&lt;code&gt;Toast&lt;/code&gt;ã€‚&lt;br/&gt;éœ€è¦å®ç°çš„åŠŸèƒ½ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;on&lt;/code&gt;æ–¹æ³•ï¼Œæ˜¾ç¤ºæç¤º&lt;/li&gt;
&lt;li&gt;&lt;code&gt;off&lt;/code&gt;æ–¹æ³•ï¼Œéšè—æç¤º&lt;/li&gt;
&lt;li&gt;&lt;code&gt;init&lt;/code&gt;æ–¹æ³•ï¼Œåˆå§‹åŒ–æç¤ºè¯­&lt;/li&gt;
&lt;/ul&gt;&lt;pre class=&quot;javascript&quot;&gt;
&lt;code&gt;function Toast(option){
  this.prompt = '';
  this.elem = null;
  this.init(option);
}

Toast.prototype = {
  // æ„é€ å™¨
  constructor: Toast,
  // åˆå§‹åŒ–æ–¹æ³•
  init: function(option){
    this.prompt = option.prompt || '';
    this.render();
    this.bindEvent();
  },
  // æ˜¾ç¤º
  show: function(){
    this.changeStyle(this.elem, 'display', 'block');
  },
  // éšè—
  hide: function(){
    this.changeStyle(this.elem, 'display', 'none');
  },
  // ç”»å‡ºdom
  render: function(){
    var html = '';
    this.elem = document.createElement('div');
    this.changeStyle(this.elem, 'display', 'none');

    html += '&amp;lt;a class=&quot;J-close&quot; href=&quot;javascript:;&quot;&amp;gt;x&amp;lt;/a&amp;gt;'
    html += '&amp;lt;p&amp;gt;'+ this.prompt +'&amp;lt;/p&amp;gt;';
    
    this.elem.innerHTML = html;

    return document.body.appendChild(this.elem);
  },
  // ç»‘å®šäº‹ä»¶
  bindEvent: function(){
    var self = this;
    
    this.addEvent(this.elem, 'click', function(e){
      if(e.target.className.indexOf('J-close') != -1){
        console.log('close Toast!');
        self.hide();
      }
    });
  },
  // æ·»åŠ äº‹ä»¶æ–¹æ³•
  addEvent: function(node, name, fn){
    var self = this;
    
    node.addEventListener(name, function(){
      fn.apply(self, Array.prototype.slice.call(arguments));
    }, false);
  },
  // æ”¹å˜æ ·å¼
  changeStyle: function(node, key, value){
      node.style[key] = value;
  }
};

var T = new Toast({prompt:'I\'m Toast!'});
T.show();
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;äºŒç±»çš„æ„æˆ&quot;&gt;äºŒã€ç±»çš„æ„æˆ&lt;/h2&gt;
&lt;p&gt;JavaScriptçš„ç±»ï¼Œæ˜¯ç”¨&lt;code&gt;å‡½æ•°å¯¹è±¡&lt;/code&gt;æ¥å®ç°ã€‚&lt;br/&gt;ç±»çš„å®ä¾‹åŒ–å½¢å¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre class=&quot;javascript&quot;&gt;
&lt;code&gt;var T = new Toast();&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…¶ä¸­çš„é‡ç‚¹ï¼Œå°±æ˜¯&lt;code&gt;Function&lt;/code&gt;çš„ç¼–å†™ã€‚&lt;/p&gt;
&lt;p&gt;ç±»åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š&lt;code&gt;constructor&lt;/code&gt;+&lt;code&gt;prototype&lt;/code&gt;ã€‚ä¹Ÿå³&lt;code&gt;æ„é€ å™¨&lt;/code&gt;+&lt;code&gt;åŸå‹&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ„é€ å™¨&quot;&gt;2.1 æ„é€ å™¨&lt;/h3&gt;
&lt;p&gt;æ„é€ å™¨ä»ç›´è§‚ä¸Šæ¥ç†è§£ï¼Œå°±æ˜¯å†™åœ¨&lt;strong&gt;å‡½æ•°å†…éƒ¨çš„ä»£ç &lt;/strong&gt;ã€‚&lt;br/&gt;ä»Toastä¾‹å­ä¸Šçœ‹ï¼Œæ„é€ å™¨å°±æ˜¯ä»¥ä¸‹éƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;pre class=&quot;javascript&quot;&gt;
&lt;code&gt;function Toast(option){
  this.prompt = '';
  this.elem = null;
  this.init(option);
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œçš„&lt;code&gt;this&lt;/code&gt;,æŒ‡å‘çš„æ˜¯å®ä¾‹åŒ–çš„ç±»ã€‚&lt;br/&gt;æ¯æ¬¡é€šè¿‡&lt;code&gt;new Toast()&lt;/code&gt;çš„æ–¹å¼è¿›è¡Œå®ä¾‹åŒ–ï¼Œ&lt;strong&gt;æ„é€ å™¨éƒ½ä¼šæ‰§è¡Œä¸€é&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&quot;åŸå‹&quot;&gt;2.2 åŸå‹&lt;/h3&gt;
&lt;p&gt;åŸå‹ä¸Šçš„æ–¹æ³•å’Œå˜é‡çš„å£°æ˜ï¼Œéƒ½æ˜¯é€šè¿‡&lt;code&gt;Toast.prototype.*&lt;/code&gt;çš„æ–¹å¼ã€‚&lt;br/&gt;é‚£ä¹ˆåœ¨åŸå‹ä¸Šæ™®é€šçš„å†™æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre class=&quot;javascript&quot;&gt;
&lt;code&gt;Toast.prototype.hide = function(){/*code*/}
Toast.prototype.myValue = 1;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œè¯¥å†™æ³•ä¸å¥½çš„åœ°æ–¹ï¼šå°±æ˜¯æ¯æ¬¡éƒ½è¦å†™å‰åŠéƒ¨åˆ†&lt;code&gt;Toast.prorotype&lt;/code&gt;ï¼Œç•¥æ˜¾ç´¯èµ˜ã€‚&lt;br/&gt;åœ¨ä»£ç å‹ç¼©ä¼˜åŒ–æ–¹é¢ä¹Ÿä¸å‹å¥½ï¼Œæ— æ³•åšåˆ°æœ€ä½³çš„å‹ç¼©ã€‚&lt;br/&gt;æ”¹è¿›çš„æ–¹å¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre class=&quot;javascript&quot;&gt;
&lt;code&gt;Toast.prorotype = {
  constructor: Toast,
  hide: function(){/*code*/},
  myValue: 1 
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œçš„ä¼˜åŒ–ï¼Œæ˜¯æŠŠåŸå‹æŒ‡å‘ä¸€ä¸ªæ–°çš„ç©ºå¯¹è±¡&lt;code&gt;{}&lt;/code&gt;ã€‚&lt;br/&gt;å¸¦æ¥çš„å¥½å¤„ï¼Œå°±æ˜¯å¯ä»¥ç”¨&lt;code&gt;{key:value}&lt;/code&gt;çš„æ–¹å¼å†™åŸå‹ä¸Šçš„æ–¹æ³•å’Œå˜é‡ã€‚&lt;br/&gt;ä½†æ˜¯ï¼Œè¿™ç§æ–¹å¼ä¼šæ”¹å˜åŸå‹ä¸Šæ„é€ å™¨&lt;code&gt;prototype.constructor&lt;/code&gt;çš„æŒ‡å‘ã€‚&lt;br/&gt;å¦‚æœä¸é‡æ–°æ˜¾å¼å£°æ˜&lt;code&gt;constructor&lt;/code&gt;çš„æŒ‡å‘ï¼Œ&lt;code&gt;Toast.constructor.prototype.constructor&lt;/code&gt;çš„ä¼šéšå¼è¢«æŒ‡å‘&lt;code&gt;Object&lt;/code&gt;ã€‚è€Œæ­£ç¡®çš„æŒ‡å‘ï¼Œåº”è¯¥æ˜¯&lt;code&gt;Toast&lt;/code&gt;ã€‚&lt;br/&gt;è™½ç„¶é€šè¿‡&lt;code&gt;new&lt;/code&gt;å®ä¾‹åŒ–æ²¡æœ‰å‡ºç°å¼‚å¸¸ï¼Œä½†æ˜¯åœ¨ç±»ç»§æ‰¿æ–¹é¢ï¼Œ&lt;code&gt;constructor&lt;/code&gt;çš„æŒ‡å‘å¼‚å¸¸ï¼Œä¼šäº§ç”Ÿä¸æ­£ç¡®çš„ç»§æ‰¿åˆ¤æ–­ç»“æœã€‚è¿™æ˜¯æˆ‘ä»¬ä¸å¸Œæœ›çœ‹åˆ°çš„ã€‚&lt;br/&gt;æ‰€ä»¥ï¼Œéœ€è¦ä¿®æ­£&lt;code&gt;constructor&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ„é€ å™¨å’ŒåŸå‹çš„ä¸åŒ&quot;&gt;2.3 æ„é€ å™¨å’ŒåŸå‹çš„ä¸åŒ&lt;/h3&gt;
&lt;p&gt;åŸå‹ä¸Šçš„æ–¹æ³•å’Œå˜é‡ï¼Œæ˜¯è¯¥ç±»æ‰€æœ‰å®ä¾‹åŒ–å¯¹è±¡&lt;strong&gt;å…±äº«&lt;/strong&gt;çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰ä¸€ä»½ã€‚&lt;br/&gt;è€Œæ„é€ å™¨å†…çš„ä»£ç å—ï¼Œåˆ™æ˜¯æ¯ä¸ªå®ä¾‹åŒ–å¯¹è±¡&lt;strong&gt;å•ç‹¬å æœ‰&lt;/strong&gt;ã€‚ä¸ç®¡æ˜¯å¦ç”¨&lt;code&gt;this.**&lt;/code&gt;æ–¹å¼ï¼Œè¿˜æ˜¯ç§æœ‰å˜é‡çš„æ–¹å¼ï¼Œéƒ½æ˜¯ç‹¬å çš„ã€‚&lt;br/&gt;æ‰€ä»¥ï¼Œåœ¨å†™ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œéœ€è¦è€ƒè™‘è¯¥æ–°å¢å±æ€§æ˜¯å…±äº«çš„ï¼Œè¿˜æ˜¯ç‹¬å çš„ã€‚ä»¥æ­¤ï¼Œå†³å®šåœ¨æ„é€ å™¨è¿˜æ˜¯åŸå‹ä¸Šè¿›è¡Œå£°æ˜ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä¸‰ä»£ç è§„èŒƒ&quot;&gt;ä¸‰ã€ä»£ç è§„èŒƒ&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;ç±»çš„å‘½åè§„èŒƒï¼Œä¸šç•Œæœ‰ä¸æˆæ–‡çš„è§„å®šï¼Œå°±æ˜¯é¦–å­—æ¯å¤§å†™ã€‚&lt;/li&gt;
&lt;li&gt;åŸå‹ä¸Šçš„ç§æœ‰æ–¹æ³•ï¼Œé»˜è®¤ä»¥ä¸‹åˆ’çº¿å¼€å§‹ã€‚è¿™ç§åªæ˜¯å›¢é˜Ÿåˆä½œæ–¹é¢æœ‰reviewä»£ç çš„å¥½å¤„ï¼Œå®é™…ä¸Šè¿˜æ˜¯æš´éœ²å‡ºæ¥çš„æ–¹æ³•ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;å››ä½¿å®ä¾‹åŒ–ä¸newæ— å…³&quot;&gt;å››ã€ä½¿å®ä¾‹åŒ–ä¸newæ— å…³&lt;/h2&gt;
&lt;p&gt;ç±»çš„å®ä¾‹åŒ–ï¼Œä¸€ä¸ªå¼ºåˆ¶è¦æ±‚çš„è¡Œä¸ºï¼Œå°±æ˜¯éœ€è¦ä½¿ç”¨newæ“ä½œç¬¦ã€‚å¦‚æœä¸ä½¿ç”¨newæ“ä½œç¬¦ï¼Œé‚£ä¹ˆæ„é€ å™¨å†…çš„thisæŒ‡å‘ï¼Œå°†ä¸æ˜¯å½“å‰çš„å®ä¾‹åŒ–å¯¹è±¡ã€‚&lt;br/&gt;ä¼˜åŒ–çš„æ–¹å¼ï¼Œå°±æ˜¯ä½¿ç”¨&lt;code&gt;instanceof&lt;/code&gt;åšä¸€å±‚é˜²æŠ¤ã€‚&lt;/p&gt;
&lt;pre class=&quot;javascript&quot;&gt;
&lt;code&gt;function Toast(option){
  if(!(this instanceof Toast)){
    return new Toast(option);
  }
  
  this.prompt = '';
  this.elem = null;
  this.init(option);
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä»ä¸Šè¿°ä»£ç å¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨è¿™ä¸ªæŠ€å·§ï¼Œå¯ä»¥é˜²æ­¢å›¢é˜Ÿä¸€äº›å¤§å¤´è™¾å‡ºç°ä½¿ç”¨é”™è¯¯å®ä¾‹åŒ–æ–¹å¼ï¼Œå¯¼è‡´ä»£ç æ±¡æŸ“çš„é—®é¢˜ã€‚&lt;br/&gt;è¿™ç§å¿è€…æŠ€å·§å¾ˆé…·ï¼Œä½†ä»å¦ä¸€æ–¹é¢è€ƒè™‘ï¼Œè¿˜æ˜¯å¸Œæœ›ä½¿ç”¨è€…å¯ä»¥ç”¨æ­£ç¡®çš„æ–¹å¼å»å®ä¾‹åŒ–ç±»ã€‚&lt;br/&gt;æ‰€ä»¥ï¼Œæ”¹æˆä»¥ä¸‹è¿™ç§é˜²æŠ¤æ–¹å¼&lt;/p&gt;
&lt;pre class=&quot;javascript&quot;&gt;
&lt;code&gt;function Toast(option){
  if(!(this instanceof Toast)){
    throw new Error('Toast instantiation error');
  }
  
  this.prompt = '';
  this.elem = null;
  this.init(option);
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™æ ·ï¼ŒæŠŠé”…ç”©å›å»ï¼Œå²‚ä¸æ˜¯æ›´å¦™ğŸ‘½&lt;/p&gt;
</description>
<pubDate>Thu, 19 Jul 2018 17:35:00 +0000</pubDate>
<dc:creator>æˆ‘æ˜¯leon</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/walls/p/9339300.html</dc:identifier>
</item>
<item>
<title>4.ASP.NETå…¨æ ˆå¼€å‘ä¹‹åœ¨MVCä¸­ä½¿ç”¨æœåŠ¡ç«¯éªŒè¯ï¼ˆäºŒï¼‰ - Gxqsd</title>
<link>http://www.cnblogs.com/Gxqsd/p/9339219.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/Gxqsd/p/9339219.html</guid>
<description>
&lt;p&gt;é¦–å…ˆå£°æ˜ï¼Œè¿™ç¯‡åšæ–‡æ˜¯å®Œå–„.ASP.NETå…¨æ ˆå¼€å‘ä¹‹åœ¨MVCä¸­ä½¿ç”¨æœåŠ¡ç«¯éªŒè¯ çš„ï¼Œæ‰€ä»¥é‡å¤å†…å®¹ï¼Œæˆ‘å°±ä¸è¿‡å¤šçš„é˜è¿°ï¼Œå¾ˆå¤šé—®é¢˜éƒ½æ˜¯åœ¨å®è·µä¸­å»å‘ç°ï¼Œç„¶åå†å»å®Œå–„ï¼Œè¿™ç¯‡åšæ–‡ä¹Ÿä¸€æ ·ï¼Œå»ºç«‹åœ¨å·²é˜… â€œ.ASP.NETå…¨æ ˆå¼€å‘ä¹‹åœ¨MVCä¸­ä½¿ç”¨æœåŠ¡ç«¯éªŒè¯â€ çš„åŸºç¡€ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä¸Šä¸€ç¯‡ä¸­ï¼Œè™½ç„¶æˆ‘ä»¬å®Œæˆäº†æœåŠ¡ç«¯éªŒè¯ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯éœ€è¦åœ¨Actioné‡Œè°ƒç”¨éªŒè¯å™¨æ¥è¿›è¡ŒéªŒè¯ï¼Œåƒè¿™æ ·ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;   [HttpPost]
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; ActionResult ValidatorTest(Person model)
        {
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; result = &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.ValidatorHub.PersonValidator.Validate(model);

            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (result.IsValid)
            {
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; Redirect(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;https://www.baidu.com&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
            }
            &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;
            {
                &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.ValidatorErrorHandler(result);
            }
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; View();
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¾ˆå¯æ¶ï¼Œå¦‚æœæˆ‘éœ€è¦éªŒè¯ï¼Œæˆ‘éœ€è¦åœ¨æ¯ä¸€ä¸ªAction é‡Œåƒè¿™æ ·å†™ï¼Œä¸€æ¬¡å®éªŒä¹Ÿå°±ç½¢äº†ï¼Œå¦‚æœçœŸè¦åœ¨æ¯ä¸ªActioné‡Œåƒè¿™æ ·å¹²ï¼Œæˆ‘æƒ³åˆ°æ—¶å€™ä½ ä¸€å®šä¼šå¾ˆè®¨åŒè¿™äº›ä»£ç çš„ã€‚è‡³å°‘æˆ‘æ˜¯è¿™æ ·è®¤ä¸ºã€‚æ‰€ä»¥æˆ‘å¾ˆè®¨åŒæˆ‘ä¹‹å‰çš„å†™æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨æˆ‘æƒ³å¹²å˜›å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“å…¶å®MVCå†…ç½®äº†ä¸€ä¸ªæ•°æ®æ ¡éªŒã€‚è¿™é‡Œä¸è¿‡å¤šä»‹ç»å®ƒï¼Œï¼ˆå¶å°”é€‚å½“çš„ç…§ç…§è½®å­ï¼Œä¹Ÿæœ‰è®¸å¤šå¥½å¤„çš„ï¼‰ã€‚è¿™é‡Œç®€å•æè¿°ä¸‹å®ƒçš„ç”¨æ³•ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;  [HttpPost]
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; ActionResult ValidatorTest(Person model)
        {
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (ModelState.IsValid)
            {
                &lt;/span&gt;&lt;span&gt;///&lt;/span&gt;&lt;span&gt; ok&lt;/span&gt;
&lt;span&gt;            }
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; View();
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å’Œå’±ä»¬ä¹‹å‰é‚£æ ·å†™æ¯”èµ·æ¥æ˜¯ç²¾ç®€äº†è®¸å¤šï¼Œä½†æˆ‘è¿˜æ˜¯è§‰å¾—å§ï¼Œä»–è¿˜æ˜¯è¦åœ¨æ¯ä¸ªAction é‡Œè°ƒç”¨ModelState.IsValidï¼Œè™½ç„¶åªæœ‰ä¸€ä¸ªifï¼Œä½†è¿™ä¸æ˜¯æˆ‘æƒ³è¦çš„ï¼Œæˆ‘å¸Œæœ›å®ƒèƒ½åƒè¿™æ ·&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;  [HttpPost]
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; ActionResult ValidatorTest(Person model)
        {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt; 
            &lt;span&gt;//&lt;/span&gt;&lt;span&gt;  ä¸€å¤§å †ä»£ç 
            &lt;/span&gt;&lt;span&gt;//
&lt;/span&gt;            &lt;span&gt;return&lt;/span&gt; Redirect(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;https://www.baidu.com&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä¸è¦å½±å“æˆ‘æ­£å¸¸çš„ç¼–ç¨‹ï¼Œè€Œæˆ‘ä¹Ÿä¸å»åšå“ªäº›é‡å¤çš„äº‹ã€‚&lt;/p&gt;
&lt;p&gt;æ¢å¥è¯è¯´ï¼Œå…¶å®å°±æ˜¯åœ¨æ‰§è¡Œæˆ‘Actionä¹‹å‰å°±å»æŠŠæ•°æ®ç»™æ ¡éªŒäº†ã€‚&lt;/p&gt;
&lt;p&gt;äºæ˜¯æˆ‘ä»¬æƒ³åˆ°äº†MVCç»™æˆ‘ä»¬æä¾›çš„Filterï¼ŒOnActionExecutingï¼Œæ‰“å¼€æˆ‘ä»¬çš„ControllerExï¼Œåœ¨é‡Œé¢é‡å†™OnActionExecutingï¼Œä»–æœ‰ä¸€ä¸ªå‚æ•°ActionExecutingContextï¼Œé€šè¿‡åå­—æˆ‘ä»¬å¤§è‡´äº†è§£äº†ï¼Œè¿™ä¸ªå‚æ•°æ˜¯ä¸ªActionç›¸å…³çš„ä¸Šä¸‹æ–‡ï¼Œé‚£ä»–ä¸€å®šè£…äº†Actionç›¸å…³çš„æ•°æ®&lt;/p&gt;
&lt;p&gt;æˆ‘å°±ä¸å¢¨è¿¹äº†ï¼Œå…ˆç›´æ¥ä¸Šä»£ç ï¼Œå…¶å®è¿™äº›ä»£ç ä¹Ÿåªæ˜¯æˆ‘åˆšåˆšæ‰å†™å‡ºæ¥çš„è€Œå·²ï¼Œæˆ‘å¯¹è¿™ä¸ªå‚æ•°ä¹Ÿä¸æ˜¯å¾ˆäº†è§£ï¼Œé€šè¿‡ä¸€ä¸ªä¸€ä¸ªå»å°è¯•ï¼Œæ…¢æ…¢å¾—å°±è¯•å‡ºæ¥äº†ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
 &lt;span&gt;protected&lt;/span&gt; &lt;span&gt;override&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; OnActionExecuting(ActionExecutingContext filterContext)
        {
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; existError = &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;

            &lt;/span&gt;&lt;span&gt;foreach&lt;/span&gt; (&lt;span&gt;var&lt;/span&gt; value &lt;span&gt;in&lt;/span&gt;&lt;span&gt; filterContext.ActionParameters.Values)
            {
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; modelValidatorPropertyInfo = &lt;span&gt;this&lt;/span&gt;.ValidatorHub.GetType().GetProperty(value.GetType().Name + &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Validator&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);

                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (modelValidatorPropertyInfo != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
                {
                    &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; modelValidator = modelValidatorPropertyInfo.GetValue(&lt;span&gt;this&lt;/span&gt;.ValidatorHub) &lt;span&gt;as&lt;/span&gt;&lt;span&gt; IValidator;

                    &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; validateResult =&lt;span&gt; modelValidator.Validate(value);

                    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;validateResult.IsValid)
                    {
                        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.ValidatorErrorHandler(validateResult);
                        existError &lt;/span&gt;= &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
                    }

                }
            }
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (existError)
            {
                ViewData[&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Error&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;] =&lt;span&gt; DicError;

                filterContext.Result &lt;/span&gt;=&lt;span&gt; View();
            }

            &lt;/span&gt;&lt;span&gt;base&lt;/span&gt;&lt;span&gt;.OnActionExecuting(filterContext);

        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åœ¨Â OnActionExecuting é‡Œï¼Œæˆ‘ä»¬é¦–å…ˆå®šä¹‰äº†ä¸€ä¸ªexistErrorï¼Œç”¨æ¥åˆ¤æ–­æ˜¯å¦éªŒè¯å¤±è´¥çš„ï¼Œç„¶åæˆ‘ä»¬éå†äº† filterContext.ActionParameters.Values&lt;/p&gt;
&lt;p&gt;åœ¨filterContext é‡Œï¼Œæˆ‘ä»¬çœ‹åˆ°ActionParameters æ˜¯å…³äºActionçš„å‚æ•°çš„ï¼Œé€šè¿‡è°ƒè¯•æˆ‘å‘ç°ï¼Œä»–æ˜¯ä¸€ä¸ªé›†åˆï¼Œå…¶é”®æ˜¯å‚æ•°åï¼Œæ¯”å¦‚æ‹¿æˆ‘ä»¬è¿™ä¸ªPersonæ¥è®²ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt; [HttpPost]
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; ActionResult ValidatorTest(Person model)
        {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt; 
            &lt;span&gt;//&lt;/span&gt;&lt;span&gt;  ä¸€å¤§å †ä»£ç 
            &lt;/span&gt;&lt;span&gt;//
&lt;/span&gt;            &lt;span&gt;return&lt;/span&gt; Redirect(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;https://www.baidu.com&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;filterContext.ActionParameters é›†åˆé‡Œå°±æœ‰ä¸€ä¸ªæ•°æ®ï¼Œå…¶é”®æ˜¯&quot;model&quot; å€¼å‘¢ model&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1173592/201807/1173592-20180719235057481-189982412.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥å‘¢æˆ‘ä»¬é€šè¿‡éå†filterContext.ActionParameters.Value å°±èƒ½å–å‡ºæ¯ä¸€ä¸ªActionçš„æ‰€æœ‰å‚æ•°äº†ï¼Œè€Œæ¯ä¸€ä¸ªå‚æ•°é€šè¿‡.getType().Name åˆ™èƒ½å–å‡ºä»–çš„ç±»å‹åï¼Œæ¯”å¦‚è¿™é‡Œmodelç±»å‹æ˜¯Person æ‰€ä»¥filterContext.ActionParameters[&quot;model&quot;].GetType().Name å°±æ˜¯â€œPersonâ€äº†ã€‚&lt;/p&gt;
&lt;p&gt;çŸ¥é“äº†å®ä½“æ˜¯ä»€ä¹ˆç±»å‹ï¼Œå¦‚ä½•è·å–å…·ä½“éªŒè¯å™¨å‘¢ï¼Ÿæƒ³æƒ³æˆ‘ä»¬çš„éªŒè¯å™¨é…ç½® Person = PersonValidator é‚£å¤ªç®€å•äº†ï¼Œè¿™ä¸æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»å˜›ï¼Œä½†æ€»ä¸å¯èƒ½é€šè¿‡ä¸€ä¸ªswitch å»å·¥å‚è¿”å›å§ï¼Œé‚£è¿™æ ·è¿˜éœ€è¦ç»´æŠ¤ä¸€ä¸ªå·¥å‚æ–¹æ³•ã€‚å½“ç„¶ä¸æ˜¯å’¯ï¼Œè¿™å°±è¦ç”¨åˆ°å’±.NET æä¾›çš„å¼ºå¤§åå°„æŠ€æœ¯&lt;/p&gt;
&lt;p&gt;æœ‰æ—¶å€™æˆ‘ä»¬æœ‰ä¸€ä¸ªåŒ¿åå¯¹è±¡ï¼Œæ˜¯ä¸€ä¸ªobjectçš„æ—¶å€™ï¼Œåˆä¸çŸ¥é“å®ƒå…·ä½“æ˜¯ä»€ä¹ˆç±»å‹ï¼Œå¦‚ä½•å–å®ƒçš„å±æ€§å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æˆ‘è¿™æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œä»–èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
 &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; ReflectHelper
    {
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;object&lt;/span&gt; GetPropertyByAnonymousObject(&lt;span&gt;string&lt;/span&gt; propertyName, &lt;span&gt;object&lt;/span&gt;&lt;span&gt; obj)
        {
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; property = obj.GetType().GetProperties().Where(p =&amp;gt; p.Name ==&lt;span&gt; propertyName).FirstOrDefault();

            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (property == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
            {
                &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; Exception(&lt;span&gt;string&lt;/span&gt;.Format(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;{0}å¯¹è±¡æœªå®šä¹‰{1}å±æ€§&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, nameof(obj), nameof(propertyName)));
            }

            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; property.GetValue(obj);
        }
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä»ä½¿ç”¨ä¸Šï¼Œä¼ é€’ä¸€ä¸ªå±æ€§åå’Œå¯¹è±¡è¿›æ¥ï¼Œè¿”å›ä¸€ä¸ªobjectçš„å±æ€§ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬çœ‹çœ‹å†…éƒ¨éƒ½åšäº†äº›ä»€ä¹ˆã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆè·å–ç±»å‹ï¼Œç„¶åè·å–æ‰§è¡Œçš„å±æ€§ï¼Œè¯¶ï¼Œè¿™ä¸ªå±æ€§å¯ä¸æ˜¯çœŸçš„å±æ€§å“¦ï¼Œè¿™ä¸ªæ˜¯PropertyInfoç±»å‹ï¼Œæ˜¯åå°„é‡Œçš„æ•°æ®ç±»å‹ï¼Œå®ƒä¸æ˜¯çœŸæ­£çš„å±æ€§å€¼ï¼Œä½†æˆ‘ä»¬å¦‚æœæƒ³è¦è·å–çœŸæ­£çš„å±æ€§å€¼æ€ä¹ˆåŠå‘¢ï¼Ÿå…¶å®åªéœ€è¦è°ƒç”¨ä»–çš„GetValueå°±è¡Œäº†ï¼Œä»–æœ‰ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°æ˜¯æŒ‡è·å–é‚£ä¸ªå¯¹è±¡ä¸Šçš„å±æ€§ï¼Œäºæ˜¯æŠŠobjectä¼ è¿›å»å°±è¡Œã€‚&lt;/p&gt;
&lt;p&gt;æœ‰äº†è¿™ä¸ªåŸºç¡€ï¼Œåè§‚æˆ‘ä»¬çš„ç›®çš„ï¼ŒçŸ¥é“äº†Personï¼Œæœ‰ä¸€ä¸ªå¯¹è±¡å«ValidatotHub é‡Œé¢æœ‰ä¸ªå±æ€§PersonValidator ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦è·å–ä¸€ä¸ªå«ValidatorHubå¯¹è±¡é‡Œçš„PersonValidatorå±æ€§å°±è¡Œäº†ã€‚ï¼ˆPersonæ˜¯å¯æ›¿æ¢çš„ï¼Œæ˜¯æ ¹æ®å‚æ•°ç±»å‹æ¥çš„ï¼Œå‰é¢å·²ç»è§£é‡Šè¿‡äº†ï¼Œè¿™é‡Œä»¥Personä¸¾ä¾‹ï¼‰&lt;/p&gt;
&lt;p&gt;ç°åœ¨æœ‰ä¸ªé—®é¢˜äº†ï¼Œæˆ‘ä»¬å–åˆ°çš„PersonValidator æ˜¯ä¸€ä¸ªobjectç±»å‹çš„ï¼Œobjectç±»å‹æˆ‘å¯ä¸å¥½ä½¿ç”¨å•Šï¼Œæˆ‘ä»¬åˆä¸èƒ½æ˜¾ç¤ºçš„è½¬æ¢ä¸ºå…·ä½“ç±»å‹ï¼Œå› ä¸ºè°çŸ¥é“å…·ä½“ç±»å‹æ˜¯å•¥å‘¢ã€‚å¦‚æœå†™æ­»äº†å°±å‡‰äº†ã€‚é‚£è‚¯å®šä¹Ÿä¸èƒ½ç”¨ä¸ªswitchæ¥ç»´æŠ¤å•Šï¼Œé‚£æ ·ä¸åˆå¢åŠ å·¥ä½œé‡äº†å—ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æ…¢æ…¢å‘ç°PersonValidatorç»§æ‰¿è‡ªAbstractValidator&amp;lt;Person&amp;gt; å¾ˆæ˜¾ç„¶å®ƒçš„åŸºç±»ä¹Ÿéœ€è¦ä¸€ä¸ªå…·ä½“ç±»å‹ï¼Œä¸è¡Œï¼Œç»§ç»­å¾€ä¸Šèµ°ï¼Œè¯¶ï¼Œå‘ç°äº†AbstractValidator&amp;lt;T&amp;gt;ç»§æ‰¿è‡ªIValidatorï¼Œå¹¶ä¸”IValidatorå®šä¹‰äº†Validateæ–¹æ³•ã€‚è¿™ä¸å°±å¥½äº†å—ï¼Œæˆ‘as ä¸ºIValidatorç±»å‹ï¼Œå°±å¯ä»¥ç”¨äº†ã€‚è¿™é‡Œä½¿ç”¨äº†ï¼ˆé‡Œæ°è½¬æ¢åŸåˆ™ï¼‰ã€‚æˆ‘å°½é‡å†™å¾—é€šä¿—æ˜“æ‡‚ï¼Œä¹Ÿå°†è®¸å¤šåŸºç¡€ä¸œè¥¿æä¸€ä¸‹ï¼Œä½†ä¸è‚¯èƒ½é¢é¢ä¿±åˆ°ï¼Œæ‰€ä»¥è¿˜æ˜¯å»ºç«‹åœ¨ä¸€éƒ¨åˆ†åŸºç¡€ä¹‹ä¸Šçš„ã€‚ï¼ˆå½“ç„¶æ›´é‡è¦çš„ä¸€ç‚¹æ˜¯ï¼Œé€šè¿‡è¿™æ¬¡é‡åˆ°çš„é—®é¢˜è®©æˆ‘ä»¥ååœ¨è®¾è®¡æ³›å‹ç±»ç»“æ„çš„æ—¶å€™ï¼Œéƒ½è¦å»ç»§æ‰¿ä¸€ä¸ªéæ³›å‹çš„æ¥å£ï¼Œå¦‚æœFluentValidatoræ²¡æœ‰ç»§æ‰¿è‡ªIValidator è€Œåªæ˜¯ç»§æ‰¿è‡ªIValidator&amp;lt;T&amp;gt;å…¶å®ä»ç®€å•ä½¿ç”¨ä¸Šæ¥è®²ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆå½±å“å•Šï¼Œä½†åˆ°äº†æˆ‘ä»¬åˆšåˆšè¿™é‡Œï¼Œé—®é¢˜å°±å‡ºæ¥äº†ï¼Œæ‰€ä»¥è¿™ä¹Ÿæ˜¯ç»™æˆ‘ä»¬ç‹ ç‹ åœ°ä¸Šäº†ä¸€è¯¾å•Šï¼‰&lt;/p&gt;
&lt;p&gt;ç°åœ¨æˆ‘å°±å¯ä»¥åœ¨è¿™é‡Œè¿›è¡ŒéªŒè¯äº†ï¼Œæˆ‘ä»¬çŸ¥é“value å°±æ˜¯é‚£ä¸ªmodel æ‰€ä»¥ç›´æ¥å¯¹ä»–è¿›è¡ŒéªŒè¯ï¼ŒéªŒè¯ä¼šè¿”å›ä¸€ä¸ªValidationResultç±»å‹æ¥ä¸‹æ¥çš„äº‹æˆ‘å°±ä¸è§£é‡Šäº†ï¼Œç›¸ä¿¡ä¸Šä¸€ç« å·²ç»è®²å¾—å¾ˆæ¸…æ¥šäº†ã€‚æœ€åæ ¹æ®æ˜¯å¦å­˜åœ¨é”™è¯¯åœ¨è¿›è¡Œæå‰å¤„ç†ï¼Œå¦‚æœæœ‰é”™è¯¯çš„è¯å°±ç›´æ¥è¿”å›è§†å›¾å‘ˆç°é”™è¯¯äº†ï¼Œè¿å’±ä»¬çš„Actionéƒ½ä¸æ‰§è¡Œäº†ã€‚å¥½äº†ï¼Œåˆ°è¿™é‡Œå’±ä»¬æ˜¨å¤©è®²å¾—OnActionExecuted å¯ä»¥ç›´æ¥Deleteæ‹‰ ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ç°åœ¨æŠŠValidatorTesté‡Œçš„éªŒè¯ä»£ç éƒ½å»æ‰æ¥æµ‹è¯•ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;        [HttpPost]
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; ActionResult ValidatorTest(Person model)
        {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt; 
            &lt;span&gt;//&lt;/span&gt;&lt;span&gt;  ä¸€å¤§å †ä»£ç 
            &lt;/span&gt;&lt;span&gt;//
&lt;/span&gt;            &lt;span&gt;return&lt;/span&gt; Redirect(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;https://www.baidu.com&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åœ¨ ValidatorTest é‡Œæ‰“ä¸Šæ–­ç‚¹ï¼Œç„¶åä»€ä¹ˆéƒ½ä¸å¡«ï¼Œç›´æ¥æäº¤ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1173592/201807/1173592-20180720002057244-973719130.png&quot; alt=&quot;&quot;/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1173592/201807/1173592-20180720002121955-126162847.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ–­ç‚¹æ²¡è§¦å‘ï¼Œä½†é”™è¯¯æ¶ˆæ¯å·²å‘ˆç°ã€‚å¤šè¯•å‡ æ¬¡~.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1173592/201807/1173592-20180720002200232-1351747719.png&quot; alt=&quot;&quot;/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1173592/201807/1173592-20180720002209741-1158195720.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;åŒæ ·æ²¡è§¦å‘ã€‚&lt;/p&gt;
&lt;p&gt;é‚£æˆ‘ä»¬æ¥ä¸€æ¬¡æ­£ç¡®çš„éªŒè¯ã€‚&lt;/p&gt;
&lt;p&gt;Â &lt;img src=&quot;https://images2018.cnblogs.com/blog/1173592/201807/1173592-20180720002258400-703756518.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ–­ç‚¹è§¦å‘äº†ã€‚å¹¶ä¸”å€¼éƒ½é€šè¿‡äº†æ ¡éªŒ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1173592/201807/1173592-20180720002401756-1787484011.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;F5æ”¾è¡Œï¼Œæœ€ç»ˆæˆ‘ä»¬çš„é¡µé¢è·³è½¬åˆ°äº† www.baidu.comã€‚&lt;/p&gt;
&lt;p&gt;å¥½äº†ï¼Œå°ä¼™ä¼´ä»¬è¿˜ä¸å¿«å»æ”¹æ”¹ä»£ç é€ å°±å¹¸ç¦ç”Ÿæ´»ã€‚&lt;/p&gt;

</description>
<pubDate>Thu, 19 Jul 2018 16:26:00 +0000</pubDate>
<dc:creator>Gxqsd</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/Gxqsd/p/9339219.html</dc:identifier>
</item>
<item>
<title>å…¬å…±æœåŠ¡è®¾è®¡ä¹‹å•†å“æœåŠ¡è®¾è®¡é›å½¢ - å¶å°é’—</title>
<link>http://www.cnblogs.com/yexiaochai/p/9339220.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/yexiaochai/p/9339220.html</guid>
<description>&lt;p&gt;&amp;#13;
                                    &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;modal&quot;&gt;&lt;span aria-hidden=&quot;true&quot;&gt;Ã—&lt;/span&gt;&lt;span class=&quot;sr-only&quot;&gt;Close&lt;/span&gt;&lt;/button&gt;&amp;#13;
                                    &lt;h4 class=&quot;modal-title&quot;&gt;&amp;#13;
                                        è¯·å®Œæˆäººæœºè¯†åˆ«éªŒè¯&amp;#13;
                                    &lt;/h4&gt;&amp;#13;
                                &lt;/p&gt;
                                &lt;div class=&quot;modal-body&quot; readability=&quot;33&quot;&gt;
                                    
                                    &lt;p&gt;&amp;#13;
                                        &lt;span id=&quot;geetestLoading&quot;&gt; éªŒè¯ç ç»„ä»¶åŠ è½½ä¸­,è¯·ç¨å...&lt;/span&gt;&amp;#13;
                                    &lt;/p&gt;
                                &lt;/div&gt;
                            </description>
<pubDate>Thu, 19 Jul 2018 16:26:00 +0000</pubDate>
<dc:creator>å¶å°é’—</dc:creator>
<dc:format>text/html</dc:format>
<dc:identifier>https://passport.cnblogs.com/user/signin?ReturnUrl=http%3A%2F%2Fwww.cnblogs.com%2Fyexiaochai%2Fp%2F9339220.html&amp;AspxAutoDetectCookieSupport=1</dc:identifier>
</item>
<item>
<title>æ‰‹æŠŠæ‰‹æ•™ä½ å­¦ä¼šç”¨Spring AOP - å§œå°æ³®</title>
<link>http://www.cnblogs.com/jpcflyer/p/9339104.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/jpcflyer/p/9339104.html</guid>
<description>&lt;p&gt;&lt;span&gt;Â  Â  Â  Â  ç”¨äº†Springå¾ˆé•¿æ—¶é—´äº†ï¼Œä¸€ç›´æƒ³å†™äº›AOPçš„ä¸œè¥¿ï¼Œä½†ä¸€ç›´æ²¡æœ‰ç©ºé—²ï¼Œç›´åˆ°ç°åœ¨é¡¹ç›®ç¨å¾®è¿›å…¥æ­£è½¨äº†ï¼Œæ‰èµ¶ç´§å†™å†™ã€‚åºŸè¯ä¸å¤šè¯´ï¼Œå…ˆä»AOPå…¥é—¨å¼€å§‹ï¼Œåé¢å†ä»‹ç»AOPçš„åŸç†ï¼ˆJDKåŠ¨æ€ä»£ç å’ŒCGLIBåŠ¨æ€ä»£ç çš„çŸ¥è¯†ï¼‰ã€‚æ³¨ï¼šè¯¥éƒ¨åˆ†é€‚åˆäºæœªæ¥è§¦è¿‡Spring AOPçš„ç«¥é‹ï¼Œå¦‚æœæ˜¯AOPè€æ‰‹ï¼Œè¯·ç›´æ¥ç»•è¿‡ï¼Œä¸ç”¨æ‰“æ‹›å‘¼^^&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â Â Â Â Â Â Â è¯·å°Šé‡ä½œè€…åŠ³åŠ¨æˆæœï¼Œè½¬è½½è¯·æ ‡æ˜åŸæ–‡é“¾æ¥ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â Â Â Â Â Â Â &lt;a id=&quot;Editor_Edit_hlEntryLink&quot; title=&quot;view: æ‰‹æŠŠæ‰‹æ•™ä½ å­¦ä¼šç”¨Spring AOP&quot; href=&quot;https://www.cnblogs.com/jpcflyer/p/9339104.html&quot; target=&quot;_blank&quot;&gt;https://www.cnblogs.com/jpcflyer/p/9339104.html&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;ä¸€ã€ç¯å¢ƒå‡†å¤‡&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â Â Â Â Â Â Â 1.åœ¨Springå®˜ç½‘ï¼ˆåœ°å€è§æœ¬æ–‡æœ€åï¼‰ä¸‹è½½springframeworkç›¸å…³jaråŒ…ï¼Œä¸‹è½½å®Œåçš„jaråŒ…é‡Œé¢ä¼šåŒ…å«aop/aspects/context/beans/coreç­‰ç›¸å…³çš„jarã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â Â Â Â Â Â Â 2.åœ¨AspectJå®˜ç½‘ï¼ˆAOPä¾èµ–åŒ…ï¼Œåœ°å€è§æœ¬æ–‡æœ€åï¼‰ä¸‹è½½AspectJ.jarï¼Œç›®å‰æœ€æ–°ç¨³å®šç‰ˆæ˜¯1.9.1ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â Â Â Â Â Â Â 3.åœ¨Eclipseä¸­ï¼Œæ–°å»ºjava projectï¼Œç„¶ååœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºlibç›®å½•ï¼Œå¹¶å°†ç¬¬1æ­¥ä¸­ä¸‹è½½çš„jaråŒ…å…¨éƒ¨copyåˆ°libç›®å½•ä¸‹ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â Â Â Â Â Â Â 4.å°†ç¬¬2æ­¥ä¸‹è½½çš„AspectJ.jarè§£å‹ï¼Œå¹¶å°†è§£å‹åçš„aspectjrt.jarã€aspectjweaver.jarä¸¤ä¸ªjaråŒ…copyåˆ°libç›®å½•ä¸‹ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â Â Â Â Â Â Â 5.é¡¹ç›®å³é”®-build path-libraries-add jarsï¼Œç„¶åé€‰æ‹©libä¸­çš„å…¨éƒ¨jaråŒ…ï¼Œç‚¹å‡»ç¡®å®šã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â Â Â Â Â Â Â 6.åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»ºé…ç½®æ–‡ä»¶applicationContext.xmlï¼Œæ–‡ä»¶å†…å®¹æš‚æ—¶ä¸ºç©ºï¼Œåˆ°æ­¤ç¯å¢ƒå‡†å¤‡å®Œæ¯•ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;äºŒã€ä»£ç ç¤ºä¾‹&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â Â Â Â Â Â Â äº†è§£AOPçš„ç«¥é‹éƒ½çŸ¥é“ï¼Œä½¿ç”¨AOPçš„æ–¹å¼æœ‰å¤šå°‘ï¼Œè¿™é‡Œå»ºè®®ä½¿ç”¨é…ç½®æ–‡ä»¶çš„æ–¹å¼ï¼Œèƒ½å¤Ÿå‡å°‘å¯¹ä»£ç çš„æ³¨å…¥ï¼Œæ¯”è¾ƒç®€æ´ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â Â Â Â Â Â Â 1.æ–°å»ºåˆ‡é¢ç±»&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33.5&quot;&gt;&lt;span&gt;&lt;img id=&quot;code_img_closed_0c8cd8d7-6770-4975-bf54-7a3c1ba76a4c&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_0c8cd8d7-6770-4975-bf54-7a3c1ba76a4c&quot; class=&quot;code_img_opened&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;
&lt;div id=&quot;cnblogs_code_open_0c8cd8d7-6770-4975-bf54-7a3c1ba76a4c&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;62&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&lt;span&gt;package&lt;/span&gt;&lt;span&gt; test;

&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.aspectj.lang.JoinPoint;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.aspectj.lang.ProceedingJoinPoint;

&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; AspectAdvice {

     &lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
     * å‰ç½®é€šçŸ¥
     * 
     * &lt;/span&gt;&lt;span&gt;@param&lt;/span&gt;&lt;span&gt; jp
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; doBefore(JoinPoint jp) {
        System.out.println(&lt;/span&gt;&quot;===========è¿›å…¥before advice============ \n&quot;&lt;span&gt;);

        System.out.print(&lt;/span&gt;&quot;å‡†å¤‡åœ¨&quot; + jp.getTarget().getClass() + &quot;å¯¹è±¡ä¸Šç”¨&quot;&lt;span&gt;);
        System.out.print(jp.getSignature().getName() &lt;/span&gt;+ &quot;æ–¹æ³•è¿›è¡Œå¯¹ '&quot;&lt;span&gt;);
        System.out.print(jp.getArgs()[&lt;/span&gt;0] + &quot;'è¿›è¡Œåˆ é™¤ï¼\n\n&quot;&lt;span&gt;);

        System.out.println(&lt;/span&gt;&quot;è¦è¿›å…¥åˆ‡å…¥ç‚¹æ–¹æ³•äº† \n&quot;&lt;span&gt;);
    }

    &lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
     * åç½®é€šçŸ¥
     * 
     * &lt;/span&gt;&lt;span&gt;@param&lt;/span&gt;&lt;span&gt; jp
     *            è¿æ¥ç‚¹
     * &lt;/span&gt;&lt;span&gt;@param&lt;/span&gt;&lt;span&gt; result
     *            è¿”å›å€¼
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; doAfter(JoinPoint jp, String result) {
        System.out.println(&lt;/span&gt;&quot;==========è¿›å…¥after advice=========== \n&quot;&lt;span&gt;);
        System.out.println(&lt;/span&gt;&quot;åˆ‡å…¥ç‚¹æ–¹æ³•æ‰§è¡Œå®Œäº† \n&quot;&lt;span&gt;);

        System.out.print(jp.getArgs()[&lt;/span&gt;0] + &quot;åœ¨&quot;&lt;span&gt;);
        System.out.print(jp.getTarget().getClass() &lt;/span&gt;+ &quot;å¯¹è±¡ä¸Šè¢«&quot;&lt;span&gt;);
        System.out.print(jp.getSignature().getName() &lt;/span&gt;+ &quot;æ–¹æ³•åˆ é™¤äº†&quot;&lt;span&gt;);
        System.out.print(&lt;/span&gt;&quot;åªç•™ä¸‹ï¼š&quot; + result + &quot;\n\n&quot;&lt;span&gt;);
    }

    &lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
     * ç¯ç»•é€šçŸ¥
     * 
     * &lt;/span&gt;&lt;span&gt;@param&lt;/span&gt;&lt;span&gt; pjp
     *            è¿æ¥ç‚¹
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; doAround(ProceedingJoinPoint pjp) &lt;span&gt;throws&lt;/span&gt;&lt;span&gt; Throwable {
        System.out.println(&lt;/span&gt;&quot;===========è¿›å…¥aroundç¯ç»•æ–¹æ³•ï¼=========== \n&quot;&lt;span&gt;);

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; è°ƒç”¨ç›®æ ‡æ–¹æ³•ä¹‹å‰æ‰§è¡Œçš„åŠ¨ä½œ&lt;/span&gt;
        System.out.println(&quot;è°ƒç”¨æ–¹æ³•ä¹‹å‰: æ‰§è¡Œï¼\n&quot;&lt;span&gt;);

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; è°ƒç”¨æ–¹æ³•çš„å‚æ•°&lt;/span&gt;
        Object[] args =&lt;span&gt; pjp.getArgs();
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; è°ƒç”¨çš„æ–¹æ³•å&lt;/span&gt;
        String method =&lt;span&gt; pjp.getSignature().getName();
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; è·å–ç›®æ ‡å¯¹è±¡&lt;/span&gt;
        Object target =&lt;span&gt; pjp.getTarget();
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ‰§è¡Œå®Œæ–¹æ³•çš„è¿”å›å€¼ï¼šè°ƒç”¨proceed()æ–¹æ³•ï¼Œå°±ä¼šè§¦å‘åˆ‡å…¥ç‚¹æ–¹æ³•æ‰§è¡Œ&lt;/span&gt;
        Object result =&lt;span&gt; pjp.proceed();

        System.out.println(&lt;/span&gt;&quot;è¾“å‡ºï¼š&quot; + args[0] + &quot;;&quot; + method + &quot;;&quot; + target + &quot;;&quot; + result + &quot;\n&quot;&lt;span&gt;);
        System.out.println(&lt;/span&gt;&quot;è°ƒç”¨æ–¹æ³•ç»“æŸï¼šä¹‹åæ‰§è¡Œï¼\n&quot;&lt;span&gt;);
    }

    &lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
     * å¼‚å¸¸é€šçŸ¥
     * 
     * &lt;/span&gt;&lt;span&gt;@param&lt;/span&gt;&lt;span&gt; jp
     * &lt;/span&gt;&lt;span&gt;@param&lt;/span&gt;&lt;span&gt; e
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; doThrow(JoinPoint jp, Throwable e) {
        System.out.println(&lt;/span&gt;&quot;åˆ é™¤å‡ºé”™å•¦&quot;&lt;span&gt;);
    }


}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;Â Â Â Â Â Â Â 2.æ–°å»ºä¸šåŠ¡ç±»&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32.5&quot;&gt;&lt;span&gt;&lt;img id=&quot;code_img_closed_29c4e5d9-c364-48e9-b5e2-86058b1b892a&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_29c4e5d9-c364-48e9-b5e2-86058b1b892a&quot; class=&quot;code_img_opened&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;
&lt;div id=&quot;cnblogs_code_open_29c4e5d9-c364-48e9-b5e2-86058b1b892a&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;60&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&lt;span&gt;package&lt;/span&gt;&lt;span&gt; test;

&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; AspectBusiness {

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; String delete(String obj) {
        System.out.println(&lt;/span&gt;&quot;==========è°ƒç”¨åˆ‡å…¥ç‚¹ï¼š&quot; + obj + &quot;è¯´ï¼šä½ æ•¢åˆ é™¤æˆ‘ï¼===========\n&quot;&lt;span&gt;);
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; obj + &quot;ï¼šç„ï½&quot;&lt;span&gt;;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; String add(String obj) {
        System.out.println(&lt;/span&gt;&quot;================è¿™ä¸ªæ–¹æ³•ä¸èƒ½è¢«åˆ‡ã€‚ã€‚ã€‚============== \n&quot;&lt;span&gt;);
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; obj + &quot;ï¼šç„ï½ å˜¿å˜¿ï¼&quot;&lt;span&gt;;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; String modify(String obj) {
        System.out.println(&lt;/span&gt;&quot;=================è¿™ä¸ªä¹Ÿè®¾ç½®åŠ å…¥åˆ‡å§====================\n&quot;&lt;span&gt;);
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; obj + &quot;ï¼šç„æ”¹ç„å•Šï¼&quot;&lt;span&gt;;
    }


}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;Â Â Â Â Â Â Â 3.åœ¨applicationContext.xmlä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32.5&quot;&gt;&lt;span&gt;&lt;img id=&quot;code_img_closed_2d7c1889-4826-411b-b1c8-48b07bcd8d30&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_2d7c1889-4826-411b-b1c8-48b07bcd8d30&quot; class=&quot;code_img_opened&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;
&lt;div id=&quot;cnblogs_code_open_2d7c1889-4826-411b-b1c8-48b07bcd8d30&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;60&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
&amp;lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;&lt;span&gt;
       xmlns:xsi&lt;/span&gt;=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&lt;span&gt;
       xmlns:aop&lt;/span&gt;=&quot;http://www.springframework.org/schema/aop&quot;&lt;span&gt;
       xsi:schemaLocation&lt;/span&gt;=&lt;span&gt;&quot;
&lt;/span&gt;       http:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;www.springframework.org/schema/beans &lt;/span&gt;
       http:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;www.springframework.org/schema/beans/spring-beans.xsd &lt;/span&gt;
       http:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;www.springframework.org/schema/aop &lt;/span&gt;
       http:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;www.springframework.org/schema/aop/spring-aop.xsd&quot;&lt;/span&gt;
      &amp;gt;

&amp;lt;!-- bean definitions here --&amp;gt;



    &amp;lt;!-- å£°æ˜ä¸€ä¸ªä¸šåŠ¡ç±» --&amp;gt;
    &amp;lt;bean id=&quot;aspectBusiness&quot; &lt;span&gt;class&lt;/span&gt;=&quot;test.AspectBusiness&quot; /&amp;gt;

    &amp;lt;!-- å£°æ˜é€šçŸ¥ç±» --&amp;gt;
    &amp;lt;bean id=&quot;aspectAdvice&quot; &lt;span&gt;class&lt;/span&gt;=&quot;test.AspectAdvice&quot; /&amp;gt;

    &amp;lt;aop:config&amp;gt;
        &amp;lt;aop:aspect id=&quot;businessAspect&quot; ref=&quot;aspectAdvice&quot;&amp;gt;
            &amp;lt;!-- é…ç½®æŒ‡å®šåˆ‡å…¥çš„å¯¹è±¡ --&amp;gt;
            &amp;lt;aop:pointcut id=&quot;point_cut&quot; expression=&quot;execution(* test.*.*(..))&quot; /&amp;gt;
            &amp;lt;!--&lt;span&gt; åªåŒ¹é…addæ–¹æ³•ä½œä¸ºåˆ‡å…¥ç‚¹
            &lt;/span&gt;&amp;lt;aop:pointcut id=&quot;except_add&quot; expression=&quot;execution(* test.*.add(..))&quot; /&amp;gt;
             --&amp;gt;

            &amp;lt;!-- å‰ç½®é€šçŸ¥ --&amp;gt;
            &amp;lt;aop:before method=&quot;doBefore&quot; pointcut-ref=&quot;point_cut&quot; /&amp;gt;
            &amp;lt;!-- åç½®é€šçŸ¥ returningæŒ‡å®šè¿”å›å‚æ•° --&amp;gt;
            &amp;lt;aop:after-returning method=&quot;doAfter&quot;&lt;span&gt;
                pointcut&lt;/span&gt;-ref=&quot;point_cut&quot; returning=&quot;result&quot; /&amp;gt;
            &amp;lt;aop:around method=&quot;doAround&quot; pointcut-ref=&quot;point_cut&quot;/&amp;gt;
            &amp;lt;aop:after-throwing method=&quot;doThrow&quot; pointcut-ref=&quot;point_cut&quot; throwing=&quot;e&quot;/&amp;gt;
        &amp;lt;/aop:aspect&amp;gt;
    &amp;lt;/aop:config&amp;gt;
&amp;lt;/beans&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;Â Â Â Â Â Â Â 4.æ–°å»ºæµ‹è¯•ç±»&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32.5&quot;&gt;&lt;span&gt;&lt;img id=&quot;code_img_closed_f03504dd-f506-4e05-9e93-52b55be1e4d5&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_f03504dd-f506-4e05-9e93-52b55be1e4d5&quot; class=&quot;code_img_opened&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;
&lt;div id=&quot;cnblogs_code_open_f03504dd-f506-4e05-9e93-52b55be1e4d5&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;60&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&lt;span&gt;package&lt;/span&gt;&lt;span&gt; test;

&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.util.ArrayList;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.util.Collection;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.util.LinkedList;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.util.List;

&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.springframework.context.ApplicationContext;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.springframework.context.support.ClassPathXmlApplicationContext;

&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; StringTest {

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; main(String[] args) {
        ApplicationContext context &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;&lt;span&gt;);
        AspectBusiness business &lt;/span&gt;= (AspectBusiness) context.getBean(&quot;aspectBusiness&quot;&lt;span&gt;);
        business.delete(&lt;/span&gt;&quot;çŒ«&quot;&lt;span&gt;);
    }
}&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;ä¸‰ã€è¿è¡Œç»“æœ&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â Â Â Â Â Â Â è¿è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;===========è¿›å…¥before advice============&lt;span&gt; 

å‡†å¤‡åœ¨class test.AspectBusinesså¯¹è±¡ä¸Šç”¨deleteæ–¹æ³•è¿›è¡Œå¯¹ &lt;/span&gt;'çŒ«'&lt;span&gt;è¿›è¡Œåˆ é™¤ï¼

è¦è¿›å…¥åˆ‡å…¥ç‚¹æ–¹æ³•äº† 

&lt;/span&gt;===========è¿›å…¥aroundç¯ç»•æ–¹æ³•ï¼===========&lt;span&gt; 

è°ƒç”¨æ–¹æ³•ä¹‹å‰: æ‰§è¡Œï¼

&lt;/span&gt;==========è°ƒç”¨åˆ‡å…¥ç‚¹ï¼šçŒ«è¯´ï¼šä½ æ•¢åˆ é™¤æˆ‘ï¼===========&lt;span&gt;

è¾“å‡ºï¼šçŒ«;delete;test.AspectBusiness@3b69e7d1;çŒ«ï¼šç„ï½

è°ƒç”¨æ–¹æ³•ç»“æŸï¼šä¹‹åæ‰§è¡Œï¼

&lt;/span&gt;==========è¿›å…¥after advice===========&lt;span&gt; 

åˆ‡å…¥ç‚¹æ–¹æ³•æ‰§è¡Œå®Œäº† 

çŒ«åœ¨class test.AspectBusinesså¯¹è±¡ä¸Šè¢«deleteæ–¹æ³•åˆ é™¤äº†åªç•™ä¸‹ï¼š&lt;/span&gt;&lt;span&gt;null&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;Â  Â  Â Â  è¿™æ ·AOPçš„ç¤ºä¾‹å°±ç®—å®Œæˆäº†ï¼Œæœ¬ç¯‡å…ˆä¸ä»‹ç»åˆ‡é¢ã€é€šçŸ¥ã€åˆ‡å…¥ç‚¹ç­‰çš„ç›¸å…³æ¦‚å¿µäº†ï¼Œè¿™äº›æ¦‚å¿µåœ¨ç™¾åº¦ä¸Šå¯è°“ä¿¡æ‰‹æ‹ˆæ¥ï¼Œå¦‚æœæœ‰ä¸äº†è§£ï¼Œå¯ä»¥è‡ªè¡Œç™¾åº¦ã€‚æœ¬ç¯‡å…ˆå†™åˆ°è¿™é‡Œï¼Œåç»­å†ä»‹ç»AOPçš„ç›¸å…³åŸç†ã€‚&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;Â Â Â Â Â Â Â å‚è€ƒèµ„æ–™ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â  Â  Â Â  1. Springå®˜ç½‘ï¼šhttps://spring.io/&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â  Â  Â Â  2. Spring4.0å®˜ç½‘ä¸‹è½½åœ°å€ï¼šhttps://repo.spring.io/webapp/#/artifacts/browse/tree/General/libs-release-local/org/springframework/spring/5.0.0.RELEASE&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â  Â  Â Â  3. AspectJæœ€æ–°ç¨³å®šç‰ˆå®˜ç½‘ä¸‹è½½åœ°å€ï¼šhttp://www.eclipse.org/aspectj/downloads.php#stable_release&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;
</description>
<pubDate>Thu, 19 Jul 2018 16:05:00 +0000</pubDate>
<dc:creator>å§œå°æ³®</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/jpcflyer/p/9339104.html</dc:identifier>
</item>
<item>
<title>ä»¥LeetCodeä¸ºä¾‹â€”â€”å¦‚ä½•å‘é€GraphQL Queryè·å–æ•°æ® - zxzhang</title>
<link>http://www.cnblogs.com/ZhaoxiCheung/p/9333476.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/ZhaoxiCheung/p/9333476.html</guid>
<description>&lt;h2 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;Â Â &lt;a href=&quot;http://graphql.cn/&quot;&gt;GraphQL&lt;/a&gt; æ˜¯ä¸€ç§ç”¨äº API çš„æŸ¥è¯¢è¯­è¨€ï¼Œæ˜¯ç”± Facebook å¼€æºçš„ä¸€ç§ç”¨äºæä¾›æ•°æ®æŸ¥è¯¢æœåŠ¡çš„æŠ½è±¡æ¡†æ¶ã€‚åœ¨æœåŠ¡ç«¯ API å¼€å‘ä¸­ï¼Œå¾ˆå¤šæ—¶å€™å®šä¹‰ä¸€ä¸ªæ¥å£è¿”å›çš„æ•°æ®ç›¸å¯¹å›ºå®šï¼Œå› æ­¤è¦è·å¾—æ›´å¤šä¿¡æ¯æˆ–è€…åªæƒ³å¾—åˆ°æŸéƒ¨åˆ†ä¿¡æ¯æ—¶ï¼ŒåŸºäº RESTful API çš„æ¥å£å°±æ˜¾å¾—ä¸é‚£ä¹ˆçµæ´»ã€‚è€Œ GraphQL å¯¹ API ä¸­çš„æ•°æ®æä¾›äº†ä¸€å¥—æ˜“äºç†è§£çš„å®Œæ•´æè¿°ï¼Œä½¿å¾—å®¢æˆ·ç«¯èƒ½å¤Ÿå‡†ç¡®åœ°è·å¾—å®ƒéœ€è¦çš„æ•°æ®ï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•å†—ä½™ï¼Œä¹Ÿè®© API æ›´å®¹æ˜“åœ°éšç€æ—¶é—´æ¨ç§»è€Œæ¼”è¿›ï¼Œè¿˜èƒ½ç”¨äºæ„å»ºå¼ºå¤§çš„å¼€å‘è€…å·¥å…·ã€‚&lt;br/&gt;Â Â ç›®å‰ï¼ŒLeetCode å’Œ GitHub éƒ½å€ŸåŠ© GraphQL æ¥è®¾è®¡ï¼Œæä¾›äº†æ›´å¤§çš„çµæ´»æ€§ï¼Œå¯¹äºæƒ³å€ŸåŠ© GitHub æ¥äº†è§£ GraphQL å¯ç›´æ¥è®¿é—® &lt;a href=&quot;https://developer.github.com/v4/&quot;&gt;GraphQL API v4&lt;/a&gt; ï¼Œæˆ–è€…å‚è€ƒ &lt;a href=&quot;https://www.jianshu.com/p/af7ac20f2c64&quot;&gt;GraphQL å®æˆ˜ï¼šGithub V4 APIä½¿ç”¨&lt;/a&gt;ã€‚è€Œå¯¹äºåœ¨ LeetCode ä¸Šä½¿ç”¨ GraphQL æŸ¥è¯¢ï¼Œç›¸å¯¹èµ„æ–™å°‘ä¸€äº›ï¼Œå› æ­¤åœ¨è¿™ï¼Œæˆ‘ä¸»è¦ä»¥ LeetCode ä¸ºä¾‹ï¼Œæ¥åšè®²è§£ï¼ˆå…¶å®æ˜¯å› ä¸ºè‡ªå·±ä¸šä½™åˆ·é¢˜æ—¶çªå‘å¥‡æƒ³ï¼Œæƒ³å†™ä¸€ä¸ªçˆ¬è™«ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è¿‡ç¨‹&quot;&gt;è¿‡ç¨‹&lt;/h2&gt;
&lt;p&gt;Â Â å¦‚æœç›´æ¥æœç´¢ä»¥ Java è¯­è¨€ä¸ºè½½ä½“çš„ GraphQL çš„è¯ï¼Œä¸€å¤§éƒ¨åˆ†æœç´¢ç»“æœéƒ½æ˜¯ä»‹ç»ä½¿ç”¨ &lt;a href=&quot;https://github.com/graphql-java/graphql-java&quot;&gt;graphql-java&lt;/a&gt; æ¥æ­å»ºæŸ¥è¯¢æœåŠ¡ï¼Œè€Œæˆ‘ä»¬çš„ç›®çš„æ˜¯åˆ©ç”¨ GraphQL æ¥è·å–æƒ³è¦çš„æ•°æ®ï¼Œå¹¶éè‡ªå·±æ­å»ºä¸€ä¸ªæŸ¥è¯¢æœåŠ¡ï¼Œå› æ­¤å¦‚æœä¸€å¼€å§‹å°±é€‰é”™äº†å·¥å…·ï¼Œå°±ä¼šå¯¼è‡´åé¢çš„æ–¹å‘éƒ½æ˜¯é”™è¯¯çš„ã€‚&lt;br/&gt;Â Â ä»¥ LeetCode ç¬¬ä¸€é¢˜ &lt;a href=&quot;https://leetcode.com/problems/two-sum/description/&quot;&gt;1.Two Sum&lt;/a&gt; ä¸ºä¾‹ï¼Œè·å–å…¶åç«¯å‘é€è¿‡æ¥çš„æ•°æ®ã€‚åˆ©ç”¨ F12 åŠŸèƒ½è°ƒå‡ºå¦‚ä¸‹ç•Œé¢ï¼Œé€‰ Network&lt;br/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/885804/201807/885804-20180719223855159-919972190.png&quot;/&gt;&lt;br/&gt;æ‰¾åˆ° graphql æ–‡ä»¶ï¼ˆæœ‰å¥½å¤š graphql æ–‡ä»¶ï¼Œå¯ä»¥ä¾æ¬¡ç‚¹å‡»æŸ¥æ‰¾è‡ªå·±æƒ³è¦çš„é‚£ä¸ªï¼Œè¿™é‡Œæ‰¾åˆ°åŒ…å«æœ‰é¢˜ç›®ä¿¡æ¯çš„ï¼‰ï¼Œä» preview ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ° data è¿”å›äº†é¢˜ç›®ç›¸å…³çš„ä¿¡æ¯&lt;br/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/885804/201807/885804-20180719224356473-18415864.png&quot;/&gt;&lt;br/&gt;Â Â é‚£ä¹ˆï¼Œå¦‚ä½•æ„é€  GraphQL Query æ¥è·å–ä¿¡æ¯å‘¢ï¼Ÿä» Header ä¸­çš„ &lt;strong&gt;Request Payload&lt;/strong&gt; ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ª&lt;code&gt;query&lt;/code&gt;çš„å­—æ®µï¼Œè¿™æ˜¯æˆ‘ä»¬è¦æ„é€ çš„ GraphQL Query çš„ä¸€ä¸ªé‡è¦ä¿¡æ¯ã€‚&lt;br/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/885804/201807/885804-20180719232018633-1699302590.png&quot;/&gt;&lt;br/&gt;Â Â æˆ‘ä»¬å¹¶ä¸ä¸€å¼€å§‹å°±ç”¨ä»£ç æ¥è·å–é¢˜ç›®ä¿¡æ¯ï¼Œè€Œæ˜¯å…ˆåˆ©ç”¨ Postman æ¥çœ‹çœ‹å¦‚ä½•è·å–é¢˜ç›®ä¿¡æ¯ã€‚å³é”® Network ä¸‹çš„ graphql æ–‡ä»¶â€”&amp;gt;Copyâ€”&amp;gt;Copy as cURL(bash)ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;br/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/885804/201807/885804-20180719232607953-589650086.png&quot;/&gt;&lt;br/&gt;ä¹‹åï¼Œæ‰“å¼€ Postmanâ€”&amp;gt;å·¦ä¸Šè§’Importâ€”&amp;gt;Paste Raw Textç²˜è´´ï¼Œä» Bodyä¸­å¯ä»¥çœ‹åˆ°ï¼Œæ„é€ å¥½äº†çš„ GraphQL Query ä¸æˆ‘ä»¬åœ¨ &lt;strong&gt;Request Payload&lt;/strong&gt; ä¸­çœ‹åˆ°çš„ &lt;code&gt;query&lt;/code&gt; çš„å­—æ®µç›¸ä»¿ï¼ˆå› ä¸ºæœ‰ä¸€ç‚¹éœ€è¦æ›´æ”¹çš„ç»†èŠ‚ï¼‰&lt;br/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/885804/201807/885804-20180719233123295-581471877.png&quot;/&gt;&lt;br/&gt;å½“ç„¶ï¼Œå¦‚æœä¸æƒ³ç›´æ¥ç²˜è´´å¤åˆ¶çš„ cURLï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è‡ªå·±åœ¨ Postman ä¸­å†™ Header å’Œ Bodyï¼Œéœ€è¦æ³¨æ„çš„æ˜¯è¿™è¾¹çš„ &lt;code&gt;Content-Type&lt;/code&gt;æ˜¯&lt;code&gt;application/graphql&lt;/code&gt;ï¼ŒBody ä¸­çš„ GraphQL æ„é€ ï¼Œå‚ç…§ &lt;strong&gt;Request Payload&lt;/strong&gt; ä¸­çš„&lt;code&gt;query&lt;/code&gt;çš„å­—æ®µæ¥æ„é€ &lt;br/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/885804/201807/885804-20180719233438003-1026573385.png&quot;/&gt;&lt;br/&gt;è·å–åˆ°çš„ç»“æœå¦‚ä¸‹ï¼š&lt;br/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/885804/201807/885804-20180719233742759-660254344.png&quot;/&gt;&lt;br/&gt;æˆ‘ä»¬åœ¨å®é™…ä¸­ï¼Œå¯èƒ½å¹¶ä¸éœ€è¦æä¾›çš„æ‰€æœ‰ä¿¡æ¯ï¼Œåªæƒ³è¦æŸä¸€éƒ¨åˆ†ï¼Œé‚£ä¹ˆåªéœ€æ›´æ”¹&lt;code&gt;query&lt;/code&gt;å³å¯ï¼Œè¿™ä¹Ÿæ˜¯ GraphQL çš„å¼ºå¤§ä¹‹å¤„ã€‚æ¯”å¦‚æˆ‘ä»¬åªæƒ³è¦é¢˜ç›®çš„&lt;code&gt;content&lt;/code&gt;ä¿¡æ¯ï¼Œé‚£ä¹ˆå…¶&lt;code&gt;query&lt;/code&gt;åˆ™ä¸º&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;query{question(titleSlug:&quot;two-sum&quot;) {content}}&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;ä»£ç &quot;&gt;ä»£ç &lt;/h2&gt;
&lt;p&gt;åœ¨ä¸Šè¾¹ï¼Œå·²ç»åˆ©ç”¨ Postman æŸ¥è¯¢åˆ°æƒ³è¦çš„æ•°æ®äº†ï¼Œè€Œç°åœ¨æˆ‘ä»¬è¦åšçš„å°±æ˜¯ç”¨ä»£ç å°†ä¸Šè¿°æ“ä½œå±•ç¤ºå‡ºæ¥ã€‚è¿™è¾¹ï¼Œä½¿ç”¨ OkHttp æ¥è¿›è¡Œé¢˜ç›®ä¿¡æ¯è·å–ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;import okhttp3.*;
import org.jsoup.Connection;
import org.jsoup.Jsoup;


import java.io.IOException;
import java.util.Map;

import static java.lang.System.out;

public class Question {
    public static void main(String... args) throws IOException {
        String questionUrl = &quot;https://leetcode.com/problems/two-sum/description/&quot;;
        String graphqlUrl = &quot;https://leetcode.com/graphql&quot;;
        Connection.Response response = Jsoup.connect(questionUrl)
                .method(Connection.Method.GET)
                .execute();

        Map&amp;lt;String,String&amp;gt;cookies = response.cookies();
        for (Map.Entry&amp;lt;String,String&amp;gt;entry:cookies.entrySet()){
            //out.println(entry.getKey() + &quot;: &quot; + entry.getValue());
        }
        String csrftoken = response.cookie(&quot;csrftoken&quot;);
        String __cfduid = response.cookie(&quot;__cfduid&quot;);

        OkHttpClient client = new OkHttpClient.Builder()
                .followRedirects(false)
                .followSslRedirects(false)
                .build();

        String postBody = &quot;query{\n&quot; +
                &quot;  question(titleSlug:\&quot;two-sum\&quot;) {\n&quot; +
                &quot;    content\n&quot; +
                &quot;  }\n&quot; +
                &quot;}\n&quot;;

        Request request = new Request.Builder()
                .addHeader(&quot;Content-Type&quot;,&quot;application/graphql&quot;)
                .addHeader(&quot;Referer&quot;,questionUrl)
                .addHeader(&quot;Cookie&quot;,&quot;__cfduid=&quot; + __cfduid + &quot;;&quot; + &quot;csrftoken=&quot; + csrftoken)
                .addHeader(&quot;x-csrftoken&quot;,csrftoken)
                .url(graphqlUrl)
                .post(RequestBody.create(MediaType.parse(&quot;application/graphql; charset=utf-8&quot;),postBody))
                .build();

        Response response1 = client.newCall(request).execute();
        //out.println(response1.headers());
        out.println(response1.body().string());

    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ‰§è¡Œç»“æœï¼š&lt;br/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/885804/201807/885804-20180719235031045-199371891.png&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Thu, 19 Jul 2018 15:52:00 +0000</pubDate>
<dc:creator>zxzhang</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/ZhaoxiCheung/p/9333476.html</dc:identifier>
</item>
<item>
<title>ReentrantLock(é‡å…¥é”)åŠŸèƒ½è¯¦è§£å’Œåº”ç”¨æ¼”ç¤º - takumiCX</title>
<link>http://www.cnblogs.com/takumicx/p/9338983.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/takumicx/p/9338983.html</guid>
<description>&lt;h2 id=&quot;reentrantlockç®€ä»‹&quot;&gt;1. ReentrantLockç®€ä»‹&lt;/h2&gt;
&lt;p&gt;jdkä¸­ç‹¬å é”çš„å®ç°é™¤äº†ä½¿ç”¨å…³é”®å­—synchronizedå¤–,è¿˜å¯ä»¥ä½¿ç”¨ReentrantLockã€‚è™½ç„¶åœ¨æ€§èƒ½ä¸ŠReentrantLockå’Œsynchronizedæ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä½†ReentrantLockç›¸æ¯”synchronizedè€Œè¨€åŠŸèƒ½æ›´åŠ ä¸°å¯Œï¼Œä½¿ç”¨èµ·æ¥æ›´ä¸ºçµæ´»ï¼Œä¹Ÿæ›´é€‚åˆå¤æ‚çš„å¹¶å‘åœºæ™¯ã€‚&lt;/p&gt;
&lt;h2 id=&quot;reentrantlockå’Œsynchronizedçš„ç›¸åŒç‚¹&quot;&gt;2. ReentrantLockå’Œsynchronizedçš„ç›¸åŒç‚¹&lt;/h2&gt;
&lt;h4 id=&quot;reentrantlockæ˜¯ç‹¬å é”ä¸”å¯é‡å…¥çš„&quot;&gt;2.1 ReentrantLockæ˜¯ç‹¬å é”ä¸”å¯é‡å…¥çš„&lt;/h4&gt;
&lt;pre&gt;
&lt;code&gt;public class ReentrantLockTest {

    public static void main(String[] args) throws InterruptedException {

        ReentrantLock lock = new ReentrantLock();

        for (int i = 1; i &amp;lt;= 3; i++) {
            lock.lock();
        }

        for(int i=1;i&amp;lt;=3;i++){
            try {

            } finally {
                lock.unlock();
            }
        }
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸Šé¢çš„ä»£ç é€šè¿‡&lt;code&gt;lock()&lt;/code&gt;æ–¹æ³•å…ˆè·å–é”ä¸‰æ¬¡ï¼Œç„¶åé€šè¿‡&lt;code&gt;unlock()&lt;/code&gt;æ–¹æ³•é‡Šæ”¾é”3æ¬¡ï¼Œç¨‹åºå¯ä»¥æ­£å¸¸é€€å‡ºã€‚ä»ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹å‡º,ReentrantLockæ˜¯å¯ä»¥é‡å…¥çš„é”,å½“ä¸€ä¸ªçº¿ç¨‹è·å–é”æ—¶,è¿˜å¯ä»¥æ¥ç€é‡å¤è·å–å¤šæ¬¡ã€‚åœ¨åŠ ä¸ŠReentrantLockçš„çš„ç‹¬å æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä»¥ä¸‹ReentrantLockå’Œsynchronizedçš„ç›¸åŒç‚¹ã€‚&lt;/p&gt;
&lt;ul readability=&quot;5.5&quot;&gt;&lt;li readability=&quot;8&quot;&gt;
&lt;p&gt;1.ReentrantLockå’Œsynchronizedéƒ½æ˜¯ç‹¬å é”,åªå…è®¸çº¿ç¨‹äº’æ–¥çš„è®¿é—®ä¸´ç•ŒåŒºã€‚ä½†æ˜¯å®ç°ä¸Šä¸¤è€…ä¸åŒ:synchronizedåŠ é”è§£é”çš„è¿‡ç¨‹æ˜¯éšå¼çš„,ç”¨æˆ·ä¸ç”¨æ‰‹åŠ¨æ“ä½œ,ä¼˜ç‚¹æ˜¯æ“ä½œç®€å•ï¼Œä½†æ˜¾å¾—ä¸å¤Ÿçµæ´»ã€‚ä¸€èˆ¬å¹¶å‘åœºæ™¯ä½¿ç”¨synchronizedçš„å°±å¤Ÿäº†ï¼›ReentrantLockéœ€è¦æ‰‹åŠ¨åŠ é”å’Œè§£é”,ä¸”è§£é”çš„æ“ä½œå°½é‡è¦æ”¾åœ¨finallyä»£ç å—ä¸­,ä¿è¯çº¿ç¨‹æ­£ç¡®é‡Šæ”¾é”ã€‚ReentrantLockæ“ä½œè¾ƒä¸ºå¤æ‚ï¼Œä½†æ˜¯å› ä¸ºå¯ä»¥æ‰‹åŠ¨æ§åˆ¶åŠ é”å’Œè§£é”è¿‡ç¨‹,åœ¨å¤æ‚çš„å¹¶å‘åœºæ™¯ä¸­èƒ½æ´¾ä¸Šç”¨åœºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;3&quot;&gt;
&lt;p&gt;2.ReentrantLockå’Œsynchronizedéƒ½æ˜¯å¯é‡å…¥çš„ã€‚synchronizedå› ä¸ºå¯é‡å…¥å› æ­¤å¯ä»¥æ”¾åœ¨è¢«é€’å½’æ‰§è¡Œçš„æ–¹æ³•ä¸Š,ä¸”ä¸ç”¨æ‹…å¿ƒçº¿ç¨‹æœ€åèƒ½å¦æ­£ç¡®é‡Šæ”¾é”ï¼›è€ŒReentrantLockåœ¨é‡å…¥æ—¶è¦å´ç¡®ä¿é‡å¤è·å–é”çš„æ¬¡æ•°å¿…é¡»å’Œé‡å¤é‡Šæ”¾é”çš„æ¬¡æ•°ä¸€æ ·ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´å…¶ä»–çº¿ç¨‹æ— æ³•è·å¾—è¯¥é”ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;reentrantlockç›¸æ¯”synchronizedçš„é¢å¤–åŠŸèƒ½&quot;&gt;2. ReentrantLockç›¸æ¯”synchronizedçš„é¢å¤–åŠŸèƒ½&lt;/h2&gt;
&lt;h4 id=&quot;reentrantlockå¯ä»¥å®ç°å…¬å¹³é”&quot;&gt;2.1 ReentrantLockå¯ä»¥å®ç°å…¬å¹³é”ã€‚&lt;/h4&gt;
&lt;p&gt;å…¬å¹³é”æ˜¯æŒ‡å½“é”å¯ç”¨æ—¶,åœ¨é”ä¸Šç­‰å¾…æ—¶é—´æœ€é•¿çš„çº¿ç¨‹å°†è·å¾—é”çš„ä½¿ç”¨æƒã€‚è€Œéå…¬å¹³é”åˆ™éšæœºåˆ†é…è¿™ç§ä½¿ç”¨æƒã€‚å’Œsynchronizedä¸€æ ·ï¼Œé»˜è®¤çš„ReentrantLockå®ç°æ˜¯éå…¬å¹³é”,å› ä¸ºç›¸æ¯”å…¬å¹³é”ï¼Œéå…¬å¹³é”æ€§èƒ½æ›´å¥½ã€‚å½“ç„¶å…¬å¹³é”èƒ½é˜²æ­¢é¥¥é¥¿,æŸäº›æƒ…å†µä¸‹ä¹Ÿå¾ˆæœ‰ç”¨ã€‚åœ¨åˆ›å»ºReentrantLockçš„æ—¶å€™é€šè¿‡ä¼ è¿›å‚æ•°&lt;code&gt;true&lt;/code&gt;åˆ›å»ºå…¬å¹³é”,å¦‚æœä¼ å…¥çš„æ˜¯&lt;code&gt;false&lt;/code&gt;æˆ–æ²¡ä¼ å‚æ•°åˆ™åˆ›å»ºçš„æ˜¯éå…¬å¹³é”&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;ReentrantLock lock = new ReentrantLock(true);&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç»§ç»­è·Ÿè¿›çœ‹ä¸‹æºç &lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;/**
 * Creates an instance of {@code ReentrantLock} with the
 * given fairness policy.
 *
 * @param fair {@code true} if this lock should use a fair ordering policy
 */
public ReentrantLock(boolean fair) {
    sync = fair ? new FairSync() : new NonfairSync();
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°å…¬å¹³é”å’Œéå…¬å¹³é”çš„å®ç°å…³é”®åœ¨äºæˆå‘˜å˜é‡&lt;code&gt;sync&lt;/code&gt;çš„å®ç°ä¸åŒ,è¿™æ˜¯é”å®ç°äº’æ–¥åŒæ­¥çš„æ ¸å¿ƒã€‚ä»¥åæœ‰æœºä¼šæˆ‘ä»¬å†ç»†è®²ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä¸€ä¸ªå…¬å¹³é”çš„ä¾‹å­&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code&gt;public class ReentrantLockTest {

    static Lock lock = new ReentrantLock(true);

    public static void main(String[] args) throws InterruptedException {

        for(int i=0;i&amp;lt;5;i++){
            new Thread(new ThreadDemo(i)).start();
        }

    }

    static class ThreadDemo implements Runnable {
        Integer id;

        public ThreadDemo(Integer id) {
            this.id = id;
        }

        @Override

      public void run() {
            try {
                TimeUnit.MILLISECONDS.sleep(10);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            for(int i=0;i&amp;lt;2;i++){
                lock.lock();
                System.out.println(&quot;è·å¾—é”çš„çº¿ç¨‹ï¼š&quot;+id);
                lock.unlock();
            }
        }
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;å…¬å¹³é”ç»“æœ&lt;br/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1422237/201807/1422237-20180719230013861-1075860918.png&quot;/&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æˆ‘ä»¬å¼€å¯5ä¸ªçº¿ç¨‹,è®©æ¯ä¸ªçº¿ç¨‹éƒ½è·å–é‡Šæ”¾é”ä¸¤æ¬¡ã€‚ä¸ºäº†èƒ½æ›´å¥½çš„è§‚å¯Ÿåˆ°ç»“æœ,åœ¨æ¯æ¬¡è·å–é”å‰è®©çº¿ç¨‹ä¼‘çœ 10æ¯«ç§’ã€‚å¯ä»¥çœ‹åˆ°çº¿ç¨‹å‡ ä¹æ˜¯è½®æµçš„è·å–åˆ°äº†é”ã€‚å¦‚æœæˆ‘ä»¬æ”¹æˆéå…¬å¹³é”,å†çœ‹ä¸‹ç»“æœ&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;éå…¬å¹³é”ç»“æœ&lt;br/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1422237/201807/1422237-20180719230043730-1158282129.png&quot;/&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;çº¿ç¨‹ä¼šé‡å¤è·å–é”ã€‚å¦‚æœç”³è¯·è·å–é”çš„çº¿ç¨‹è¶³å¤Ÿå¤š,é‚£ä¹ˆå¯èƒ½ä¼šé€ æˆæŸäº›çº¿ç¨‹é•¿æ—¶é—´å¾—ä¸åˆ°é”ã€‚è¿™å°±æ˜¯éå…¬å¹³é”çš„â€œé¥¥é¥¿â€é—®é¢˜ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å…¬å¹³é”å’Œéå…¬å¹³é”è¯¥å¦‚ä½•é€‰æ‹©&lt;br/&gt;å¤§éƒ¨åˆ†æƒ…å†µä¸‹æˆ‘ä»¬ä½¿ç”¨éå…¬å¹³é”ï¼Œå› ä¸ºå…¶æ€§èƒ½æ¯”å…¬å¹³é”å¥½å¾ˆå¤šã€‚ä½†æ˜¯å…¬å¹³é”èƒ½å¤Ÿé¿å…çº¿ç¨‹é¥¥é¥¿ï¼ŒæŸäº›æƒ…å†µä¸‹ä¹Ÿå¾ˆæœ‰ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h4 id=&quot;reentrantlockå¯ä¸­æ–­å“åº”&quot;&gt;2.2 .ReentrantLockå¯ä¸­æ–­å“åº”&lt;/h4&gt;
&lt;p&gt;å½“ä½¿ç”¨synchronizedå®ç°é”æ—¶,é˜»å¡åœ¨é”ä¸Šçš„çº¿ç¨‹é™¤éè·å¾—é”å¦åˆ™å°†ä¸€ç›´ç­‰å¾…ä¸‹å»ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ç§æ— é™ç­‰å¾…è·å–é”çš„è¡Œä¸ºæ— æ³•è¢«ä¸­æ–­ã€‚è€ŒReentrantLockç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå¯ä»¥å“åº”ä¸­æ–­çš„è·å–é”çš„æ–¹æ³•&lt;code&gt;lockInterruptibly()&lt;/code&gt;ã€‚è¯¥æ–¹æ³•å¯ä»¥ç”¨æ¥è§£å†³æ­»é”é—®é¢˜ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å“åº”ä¸­æ–­çš„ä¾‹å­&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code&gt;public class ReentrantLockTest {
    static Lock lock1 = new ReentrantLock();
    static Lock lock2 = new ReentrantLock();
    public static void main(String[] args) throws InterruptedException {

        Thread thread = new Thread(new ThreadDemo(lock1, lock2));//è¯¥çº¿ç¨‹å…ˆè·å–é”1,å†è·å–é”2
        Thread thread1 = new Thread(new ThreadDemo(lock2, lock1));//è¯¥çº¿ç¨‹å…ˆè·å–é”2,å†è·å–é”1
        thread.start();
        thread1.start();
        thread.interrupt();//æ˜¯ç¬¬ä¸€ä¸ªçº¿ç¨‹ä¸­æ–­
    }

    static class ThreadDemo implements Runnable {
        Lock firstLock;
        Lock secondLock;
        public ThreadDemo(Lock firstLock, Lock secondLock) {
            this.firstLock = firstLock;
            this.secondLock = secondLock;
        }
        @Override
        public void run() {
            try {
                firstLock.lockInterruptibly();
                TimeUnit.MILLISECONDS.sleep(10);//æ›´å¥½çš„è§¦å‘æ­»é”
                secondLock.lockInterruptibly();
            } catch (InterruptedException e) {
                e.printStackTrace();
            } finally {
                firstLock.unlock();
                secondLock.unlock();
                System.out.println(Thread.currentThread().getName()+&quot;æ­£å¸¸ç»“æŸ!&quot;);
            }
        }
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;ç»“æœ&lt;br/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1422237/201807/1422237-20180719230113736-1002051172.png&quot;/&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æ„é€ æ­»é”åœºæ™¯:åˆ›å»ºä¸¤ä¸ªå­çº¿ç¨‹,å­çº¿ç¨‹åœ¨è¿è¡Œæ—¶ä¼šåˆ†åˆ«å°è¯•è·å–ä¸¤æŠŠé”ã€‚å…¶ä¸­ä¸€ä¸ªçº¿ç¨‹å…ˆè·å–é”1åœ¨è·å–é”2ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹æ­£å¥½ç›¸åã€‚å¦‚æœæ²¡æœ‰å¤–ç•Œä¸­æ–­ï¼Œè¯¥ç¨‹åºå°†å¤„äºæ­»é”çŠ¶æ€æ°¸è¿œæ— æ³•åœæ­¢ã€‚æˆ‘ä»¬é€šè¿‡ä½¿å…¶ä¸­ä¸€ä¸ªçº¿ç¨‹ä¸­æ–­ï¼Œæ¥ç»“æŸçº¿ç¨‹é—´æ¯«æ— æ„ä¹‰çš„ç­‰å¾…ã€‚è¢«ä¸­æ–­çš„çº¿ç¨‹å°†æŠ›å‡ºå¼‚å¸¸ï¼Œè€Œå¦ä¸€ä¸ªçº¿ç¨‹å°†èƒ½è·å–é”åæ­£å¸¸ç»“æŸã€‚&lt;/p&gt;
&lt;h4 id=&quot;è·å–é”æ—¶é™æ—¶ç­‰å¾…&quot;&gt;2.3 è·å–é”æ—¶é™æ—¶ç­‰å¾…&lt;/h4&gt;
&lt;p&gt;ReentrantLockè¿˜ç»™æˆ‘ä»¬æä¾›äº†è·å–é”é™æ—¶ç­‰å¾…çš„æ–¹æ³•&lt;code&gt;tryLock()&lt;/code&gt;,å¯ä»¥é€‰æ‹©ä¼ å…¥æ—¶é—´å‚æ•°,è¡¨ç¤ºç­‰å¾…æŒ‡å®šçš„æ—¶é—´,æ— å‚åˆ™è¡¨ç¤ºç«‹å³è¿”å›é”ç”³è¯·çš„ç»“æœ:trueè¡¨ç¤ºè·å–é”æˆåŠŸ,falseè¡¨ç¤ºè·å–é”å¤±è´¥ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•é…åˆå¤±è´¥é‡è¯•æœºåˆ¶æ¥æ›´å¥½çš„è§£å†³æ­»é”é—®é¢˜ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æ›´å¥½çš„è§£å†³æ­»é”çš„ä¾‹å­&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code&gt;public class ReentrantLockTest {
    static Lock lock1 = new ReentrantLock();
    static Lock lock2 = new ReentrantLock();
    public static void main(String[] args) throws InterruptedException {

        Thread thread = new Thread(new ThreadDemo(lock1, lock2));//è¯¥çº¿ç¨‹å…ˆè·å–é”1,å†è·å–é”2
        Thread thread1 = new Thread(new ThreadDemo(lock2, lock1));//è¯¥çº¿ç¨‹å…ˆè·å–é”2,å†è·å–é”1
        thread.start();
        thread1.start();
    }

    static class ThreadDemo implements Runnable {
        Lock firstLock;
        Lock secondLock;
        public ThreadDemo(Lock firstLock, Lock secondLock) {
            this.firstLock = firstLock;
            this.secondLock = secondLock;
        }
        @Override
        public void run() {
            try {
                while(!lock1.tryLock()){
                    TimeUnit.MILLISECONDS.sleep(10);
                }
                while(!lock2.tryLock()){
                    lock1.unlock();
                    TimeUnit.MILLISECONDS.sleep(10);
                }
            } catch (InterruptedException e) {
                e.printStackTrace();
            } finally {
                firstLock.unlock();
                secondLock.unlock();
                System.out.println(Thread.currentThread().getName()+&quot;æ­£å¸¸ç»“æŸ!&quot;);
            }
        }
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;ç»“æœ&lt;br/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1422237/201807/1422237-20180719230215064-1644661582.png&quot;/&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;çº¿ç¨‹é€šè¿‡è°ƒç”¨&lt;code&gt;tryLock()&lt;/code&gt;æ–¹æ³•è·å–é”,ç¬¬ä¸€æ¬¡è·å–é”å¤±è´¥æ—¶ä¼šä¼‘çœ 10æ¯«ç§’,ç„¶åé‡æ–°è·å–ï¼Œç›´åˆ°è·å–æˆåŠŸã€‚ç¬¬äºŒæ¬¡è·å–å¤±è´¥æ—¶,é¦–å…ˆä¼šé‡Šæ”¾ç¬¬ä¸€æŠŠé”,å†ä¼‘çœ 10æ¯«ç§’,ç„¶åé‡è¯•ç›´åˆ°æˆåŠŸä¸ºæ­¢ã€‚çº¿ç¨‹è·å–ç¬¬äºŒæŠŠé”å¤±è´¥æ—¶å°†ä¼šé‡Šæ”¾ç¬¬ä¸€æŠŠé”ï¼Œè¿™æ˜¯è§£å†³æ­»é”é—®é¢˜çš„å…³é”®,é¿å…äº†ä¸¤ä¸ªçº¿ç¨‹åˆ†åˆ«æŒæœ‰ä¸€æŠŠé”ç„¶åç›¸äº’è¯·æ±‚å¦ä¸€æŠŠé”ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç»“åˆconditionå®ç°ç­‰å¾…é€šçŸ¥æœºåˆ¶&quot;&gt;3. ç»“åˆConditionå®ç°ç­‰å¾…é€šçŸ¥æœºåˆ¶&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨synchronizedç»“åˆObjectä¸Šçš„waitå’Œnotifyæ–¹æ³•å¯ä»¥å®ç°çº¿ç¨‹é—´çš„ç­‰å¾…é€šçŸ¥æœºåˆ¶ã€‚ReentrantLockç»“åˆConditionæ¥å£åŒæ ·å¯ä»¥å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚è€Œä¸”ç›¸æ¯”å‰è€…ä½¿ç”¨èµ·æ¥æ›´æ¸…æ™°ä¹Ÿæ›´ç®€å•ã€‚&lt;/p&gt;
&lt;h4 id=&quot;conditionä½¿ç”¨ç®€ä»‹&quot;&gt;3.1 Conditionä½¿ç”¨ç®€ä»‹&lt;/h4&gt;
&lt;p&gt;Conditionç”±ReentrantLockå¯¹è±¡åˆ›å»º,å¹¶ä¸”å¯ä»¥åŒæ—¶åˆ›å»ºå¤šä¸ª&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;static Condition notEmpty = lock.newCondition();

static Condition notFull = lock.newCondition();&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Conditionæ¥å£åœ¨ä½¿ç”¨å‰å¿…é¡»å…ˆè°ƒç”¨ReentrantLockçš„lock()æ–¹æ³•è·å¾—é”ã€‚ä¹‹åè°ƒç”¨Conditionæ¥å£çš„await()å°†é‡Šæ”¾é”,å¹¶ä¸”åœ¨è¯¥Conditionä¸Šç­‰å¾…,ç›´åˆ°æœ‰å…¶ä»–çº¿ç¨‹è°ƒç”¨Conditionçš„signal()æ–¹æ³•å”¤é†’çº¿ç¨‹ã€‚ä½¿ç”¨æ–¹å¼å’Œwait,notifyç±»ä¼¼ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä¸€ä¸ªä½¿ç”¨conditionçš„ç®€å•ä¾‹å­&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code&gt;public class ConditionTest {

    static ReentrantLock lock = new ReentrantLock();
    static Condition condition = lock.newCondition();
    public static void main(String[] args) throws InterruptedException {

        lock.lock();
        new Thread(new SignalThread()).start();
        System.out.println(&quot;ä¸»çº¿ç¨‹ç­‰å¾…é€šçŸ¥&quot;);
        try {
            condition.await();
        } finally {
            lock.unlock();
        }
        System.out.println(&quot;ä¸»çº¿ç¨‹æ¢å¤è¿è¡Œ&quot;);
    }
    static class SignalThread implements Runnable {

        @Override
        public void run() {
            lock.lock();
            try {
                condition.signal();
                System.out.println(&quot;å­çº¿ç¨‹é€šçŸ¥&quot;);
            } finally {
                lock.unlock();
            }
        }
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;è¿è¡Œç»“æœ&lt;br/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1422237/201807/1422237-20180719230234682-2105208491.png&quot;/&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h4 id=&quot;ä½¿ç”¨conditionå®ç°ç®€å•çš„é˜»å¡é˜Ÿåˆ—&quot;&gt;3.2 ä½¿ç”¨Conditionå®ç°ç®€å•çš„é˜»å¡é˜Ÿåˆ—&lt;/h4&gt;
&lt;p&gt;é˜»å¡é˜Ÿåˆ—æ˜¯ä¸€ç§ç‰¹æ®Šçš„å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—,å®ƒæœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹&lt;br/&gt;1.å…¥é˜Ÿå’Œå‡ºé˜Ÿçº¿ç¨‹å®‰å…¨&lt;br/&gt;2.å½“é˜Ÿåˆ—æ»¡æ—¶,å…¥é˜Ÿçº¿ç¨‹ä¼šè¢«é˜»å¡;å½“é˜Ÿåˆ—ä¸ºç©ºæ—¶,å‡ºé˜Ÿçº¿ç¨‹ä¼šè¢«é˜»å¡ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;é˜»å¡é˜Ÿåˆ—çš„ç®€å•å®ç°&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code&gt;public class MyBlockingQueue&amp;lt;E&amp;gt; {

    int size;//é˜»å¡é˜Ÿåˆ—æœ€å¤§å®¹é‡

    ReentrantLock lock = new ReentrantLock();

    LinkedList&amp;lt;E&amp;gt; list=new LinkedList&amp;lt;&amp;gt;();//é˜Ÿåˆ—åº•å±‚å®ç°

    Condition notFull = lock.newCondition();//é˜Ÿåˆ—æ»¡æ—¶çš„ç­‰å¾…æ¡ä»¶
    Condition notEmpty = lock.newCondition();//é˜Ÿåˆ—ç©ºæ—¶çš„ç­‰å¾…æ¡ä»¶

    public MyBlockingQueue(int size) {
        this.size = size;
    }

    public void enqueue(E e) throws InterruptedException {
        lock.lock();
        try {
            while (list.size() ==size)//é˜Ÿåˆ—å·²æ»¡,åœ¨notFullæ¡ä»¶ä¸Šç­‰å¾…
                notFull.await();
            list.add(e);//å…¥é˜Ÿ:åŠ å…¥é“¾è¡¨æœ«å°¾
            System.out.println(&quot;å…¥é˜Ÿï¼š&quot; +e);
            notEmpty.signal(); //é€šçŸ¥åœ¨notEmptyæ¡ä»¶ä¸Šç­‰å¾…çš„çº¿ç¨‹
        } finally {
            lock.unlock();
        }
    }

    public E dequeue() throws InterruptedException {
        E e;
        lock.lock();
        try {
            while (list.size() == 0)//é˜Ÿåˆ—ä¸ºç©º,åœ¨notEmptyæ¡ä»¶ä¸Šç­‰å¾…
                notEmpty.await();
            e = list.removeFirst();//å‡ºé˜Ÿ:ç§»é™¤é“¾è¡¨é¦–å…ƒç´ 
            System.out.println(&quot;å‡ºé˜Ÿï¼š&quot;+e);
            notFull.signal();//é€šçŸ¥åœ¨notFullæ¡ä»¶ä¸Šç­‰å¾…çš„çº¿ç¨‹
            return e;
        } finally {
            lock.unlock();
        }
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;æµ‹è¯•ä»£ç &lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code&gt;public static void main(String[] args) throws InterruptedException {

    MyBlockingQueue&amp;lt;Integer&amp;gt; queue = new MyBlockingQueue&amp;lt;&amp;gt;(2);
    for (int i = 0; i &amp;lt; 10; i++) {
        int data = i;
        new Thread(new Runnable() {
            @Override
            public void run() {
                try {
                    queue.enqueue(data);
                } catch (InterruptedException e) {

                }
            }
        }).start();

    }
    for(int i=0;i&amp;lt;10;i++){
        new Thread(new Runnable() {
            @Override
            public void run() {
                try {
                    Integer data = queue.dequeue();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }).start();
    }

}
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;è¿è¡Œç»“æœ&lt;br/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1422237/201807/1422237-20180719230254831-1756382721.png&quot;/&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;æ€»ç»“&quot;&gt;4. æ€»ç»“&lt;/h2&gt;
&lt;p&gt;ReentrantLockæ˜¯å¯é‡å…¥çš„ç‹¬å é”ã€‚æ¯”èµ·synchronizedåŠŸèƒ½æ›´åŠ ä¸°å¯Œï¼Œæ”¯æŒå…¬å¹³é”å®ç°ï¼Œæ”¯æŒä¸­æ–­å“åº”ä»¥åŠé™æ—¶ç­‰å¾…ç­‰ç­‰ã€‚å¯ä»¥é…åˆä¸€ä¸ªæˆ–å¤šä¸ªConditionæ¡ä»¶æ–¹ä¾¿çš„å®ç°ç­‰å¾…é€šçŸ¥æœºåˆ¶ã€‚&lt;/p&gt;
</description>
<pubDate>Thu, 19 Jul 2018 15:11:00 +0000</pubDate>
<dc:creator>takumiCX</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/takumicx/p/9338983.html</dc:identifier>
</item>
<item>
<title>ã€javaçˆ¬è™«ã€‘---çˆ¬è™«+jsoupè½»æ¾çˆ¬åšå®¢ - é›¨ç‚¹çš„åå­—</title>
<link>http://www.cnblogs.com/qdhxhz/p/9338834.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/qdhxhz/p/9338834.html</guid>
<description>&lt;p&gt;Â  Â  Â  æœ€è¿‘çš„å¼€å‘ä»»åŠ¡ä¸»è¦æ˜¯çˆ¬è™«çˆ¬æ–°é—»ä¿¡æ¯ï¼Œè¿™é‡Œä¸»è¦ç”¨åˆ°æŠ€æœ¯å°±æ˜¯jsoupï¼Œjsoup æ˜¯ä¸€æ¬¾ Javaçš„HTMLè§£æå™¨ï¼Œå¯ç›´æ¥è§£ææŸä¸ªURLåœ°å€ã€HTMLæ–‡æœ¬å†…å®¹ã€‚å®ƒæä¾›äº†ä¸€å¥—éå¸¸çœåŠ›çš„APIï¼Œå¯é€šè¿‡&lt;/p&gt;
&lt;p&gt;DOMï¼ŒCSSä»¥åŠç±»ä¼¼äºjQueryçš„æ“ä½œæ–¹æ³•æ¥å–å‡ºå’Œæ“ä½œæ•°æ®ã€‚è¿™ç¯‡æ–‡ç« å°±è®²é€šè¿‡jsoupçˆ¬è™«çš„å®é™…æ¡ˆä¾‹ï¼Œä¸‹ä¸€ç¯‡å†è®²jsoupçš„å…·ä½“æ–‡æ¡£ã€‚&lt;/p&gt;
&lt;p&gt;ä¸»è¦çˆ¬è™«å¯¹è±¡å°±ä»¥æˆ‘ä¹‹å‰å†™çš„ä¸€ç¯‡åšå®¢ï¼š&lt;a id=&quot;cb_post_title_url&quot; class=&quot;postTitle2&quot; href=&quot;https://www.cnblogs.com/qdhxhz/p/9230805.html&quot;&gt;ã€javaæé«˜ã€‘---javaåå°„æœºåˆ¶&lt;/a&gt;Â  Â &lt;/p&gt;
&lt;p&gt;ä¸»è¦çˆ¬åŒºçš„ä¿¡æ¯æœ‰&lt;/p&gt;
&lt;p&gt;Â  Â  ï¼ˆ1ï¼‰è¯¥æ–‡ç« çš„æ ‡é¢˜&lt;/p&gt;
&lt;p&gt;Â  Â  ï¼ˆ2ï¼‰è¯¥æ–‡ç« çš„äºŒç±»æ ‡é¢˜&lt;/p&gt;
&lt;p&gt;Â  Â  ï¼ˆ3ï¼‰å‘è¡¨æ—¶é—´&lt;/p&gt;
&lt;p&gt;Â  Â  ï¼ˆ4ï¼‰é˜…è¯»æ•°é‡&lt;/p&gt;

&lt;h2&gt;&lt;span&gt;ä¸€ã€æ¡ˆä¾‹æ¼”ç¤º&lt;/span&gt;&lt;/h2&gt;
&lt;h4&gt;&lt;span&gt;&lt;strong&gt;1ã€ä»£ç éƒ¨åˆ†&lt;/strong&gt;&lt;/span&gt;&lt;/h4&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package&lt;/span&gt;&lt;span&gt; com.jincou.pachong;

&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.io.IOException;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.jsoup.Jsoup;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.jsoup.nodes.Document;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.jsoup.nodes.Element;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.jsoup.select.Elements;

 &lt;/span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;span&gt;
  * è¿™ä¸ªæ¡ˆä¾‹ä½ åªéœ€è¦çœ‹ç»“æœï¼Œå…·ä½“çš„jsoupä»‹ç»ä¸‹ä¸€ç¯‡åšå®¢ä¼šè¯¦ç»†ä»‹ç»
  &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; Pachong {
     &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; main(String args[]){     
    
         &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è¿™ä¸ªå°±æ˜¯åšå®¢ä¸­çš„javaåå°„çš„url     &lt;/span&gt;
     &lt;span&gt;final&lt;/span&gt; String url=  &quot;https://www.cnblogs.com/qdhxhz/p/9230805.html&quot;&lt;span&gt;;
         
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å…ˆè·å¾—çš„æ˜¯æ•´ä¸ªé¡µé¢çš„htmlæ ‡ç­¾é¡µé¢&lt;/span&gt;
         Document doc =&lt;span&gt; Jsoup.connect(url).get();
        
         &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è·å–æ­£æ–‡æ ‡é¢˜ï¼Œå› ä¸ºæ•´ç‰‡æ–‡ç« åªæœ‰æ ‡é¢˜æ˜¯ç”¨h1æ ‡ç­¾&lt;/span&gt;
         Elements btEl = doc.select(&quot;H1&quot;&lt;span&gt;);
         String  bt&lt;/span&gt;=&lt;span&gt;btEl.text();
         System.out.println(&lt;/span&gt;&quot;========æ­£æ–‡æ ‡é¢˜======ï¼š&quot;&lt;span&gt;); 
         System.out.println(bt); 
                
       &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è·å–äºŒçº§æ ‡é¢˜&lt;/span&gt;
         Elements ejbtEls = doc.select(&quot;H2&quot;&lt;span&gt;);
       &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å› ä¸ºæ•´ç‰‡æ–‡ç« æœ‰å¤šä¸ªäºŒçº§æ ‡é¢˜æ‰€ä»¥è¿›è¡Œæ‹¼æ¥&lt;/span&gt;
         StringBuilder  ejbts=&lt;span&gt;new&lt;/span&gt;&lt;span&gt;  StringBuilder();
         &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt;(Element el :ejbtEls) {
             ejbts.append(el.text());
             ejbts.append(&lt;/span&gt;&quot;\n&quot;&lt;span&gt;);
         }
        String ejbt&lt;/span&gt;=&lt;span&gt;ejbts.toString();
        System.out.println(&lt;/span&gt;&quot;=======äºŒçº§æ ‡é¢˜=========ï¼š&quot;&lt;span&gt;); 
        System.out.println(ejbt); 
                   
       &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è·å–æ—¶é—´&lt;/span&gt;
       Elements timeEl = doc.select(&quot;#post-date&quot;&lt;span&gt;);
       String  time&lt;/span&gt;=&lt;span&gt;timeEl.text();
       System.out.println(&lt;/span&gt;&quot;========å‘å¸ƒæ—¶é—´=========ï¼š&quot;&lt;span&gt;); 
       System.out.println(&lt;/span&gt;&quot;å‘å¸ƒæ—¶é—´ï¼š&quot; +&lt;span&gt; time); 
      
       &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è·å–é˜…è¯»æ•°é‡&lt;/span&gt;
       Elements readEl = doc.select(&quot;#post_view_count&quot;&lt;span&gt;);
       String  read&lt;/span&gt;=&lt;span&gt;readEl.text();
       System.out.println(&lt;/span&gt;&quot;========é˜…è¯»æ•°é‡=========ï¼š&quot;&lt;span&gt;); 
      System.out.println(&lt;/span&gt;&quot;é˜…è¯»æ•°é‡ï¼š&quot; +&lt;span&gt; read); 
       
        } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (IOException e) {
            e.printStackTrace();
        }
 }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;2ã€è¿è¡Œç»“æœ&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1090617/201807/1090617-20180719220010592-445218999.png&quot; alt=&quot;&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼š&lt;span&gt;æˆ‘ä»¬å‘ç°è¯¥ç¯‡æ–‡ç« çš„ä¿¡æ¯éƒ½å·²ç»çˆ¬åˆ°äº†ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆé˜…è¯»æ•°é‡æ˜¯...&lt;/span&gt;&lt;/p&gt;

&lt;h2&gt;&lt;span&gt;äºŒã€æ¡ˆä¾‹è®²è§£&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;Â  Â  Â  Â é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ï¼šjsoup æ˜¯ä¸€æ¬¾Java çš„&lt;span&gt;HTMLè§£æå™¨&lt;/span&gt;ï¼Œå¯ç›´æ¥è§£ææŸä¸ªURLåœ°å€ã€HTMLæ–‡æœ¬å†…å®¹ã€‚å®ƒæä¾›äº†ä¸€å¥—éå¸¸çœåŠ›çš„APIï¼Œå¯&lt;span&gt;é€šè¿‡DOMï¼ŒCSSä»¥åŠç±»ä¼¼äºjQueryçš„æ“ä½œæ–¹æ³•æ¥å–å‡ºå’Œæ“&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ä½œæ•°æ®ã€‚&lt;span&gt;ä¸Šé¢è¿™ä¸¤ç‚¹å¾ˆå…³é”®ï¼Œå…·ä½“&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;ç»†è¯´ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h4&gt;&lt;span&gt;1ã€å¦‚ä½•çˆ¬åˆ°æ­£æ–‡æ ‡ç­¾&lt;/span&gt;&lt;/h4&gt;
&lt;p&gt;Â  Â  Â æˆ‘ä»¬çœ‹åˆ°æ­£æ–‡æ ‡é¢˜çš„htmlæ ‡ç­¾æ˜¯h1æ ‡ç­¾ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦è·å¾—H1æ ‡ç­¾å…ƒç´ ï¼Œå°±å¯ä»¥çˆ¬åˆ°æ–‡æœ¬ã€‚é‚£ä¹ˆåŒæ ·çš„äºŒçº§æ ‡ç­¾ä¹Ÿæ˜¯é€šè¿‡H2æ ‡ç­¾çˆ¬åˆ°å°±å¯ä»¥ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1090617/201807/1090617-20180719221325723-751677140.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h4&gt;&lt;span&gt;2ã€å¦‚ä½•è·å¾—å‘å¸ƒæ—¶é—´&lt;/span&gt;&lt;/h4&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;Â  Â Â &lt;span&gt;å› ä¸ºæ—¶é—´çš„æ ‡ç­¾idæ˜¯&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;post-dateï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡idè·å¾—è¯¥æ ‡ç­¾å…ƒç´ ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1090617/201807/1090617-20180719221811986-85197320.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h4&gt;&lt;span&gt;3ã€ä¸ºä»€ä¹ˆé˜…è¯»æ•°é‡æ˜¯...&lt;/span&gt;&lt;/h4&gt;
&lt;p&gt;&lt;span&gt;Â  æˆ‘ä»¬çœ‹åˆ°é¡µé¢é˜…è¯»æ˜¯æœ‰çš„ï¼Œä½†çˆ¬è™«çˆ¬åˆ°ç¡®å®...ï¼Ÿ&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1090617/201807/1090617-20180719222142225-1728201670.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Â  Â  Â  è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Œè¿™ç‚¹å¾ˆé‡è¦ã€‚é‚£æ˜¯å› ä¸ºè¯¥é™æ€é¡µé¢åˆå§‹åŠ è½½çš„æ—¶å€™æ˜¯æ²¡æœ‰é˜…è¯»æ•°é‡çš„ï¼Œé˜…è¯»æ•°é‡æ˜¯åæ¥æ¥å£é‡æ–°è°ƒå–çš„ã€‚ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå…¶å®å¾ˆå¥½ç†è§£æ‰€ä»¥ä½ å†™ä¸€ç¯‡æ–‡ç« çš„æ—¶å€™åƒæ ‡é¢˜ï¼Œå†…å®¹ï¼Œæ—¶é—´&lt;/p&gt;
&lt;p&gt;ç­‰ç­‰æ˜¯ä¸å¤ªä¼šå˜åŠ¨çš„ï¼Œä½†æ˜¯ä½ çš„é˜…è¯»æ•°é‡æ¯è®¿é—®ä¸€æ¬¡éƒ½ä¼šæ”¹å˜ï¼Œæ‰€ä»¥ä¸å¯èƒ½æŠŠé˜…è¯»æ•°é‡å’Œæ–‡ç« æ”¾åœ¨ä¸€å¼ è¡¨é‡Œï¼Œè€Œæ˜¯åˆ†å¼€æ”¾ç„¶åidå…³è”å°±å¯ä»¥ã€‚è¿™æ ·å°±é¿å…æ¯æ¬¡updateæ–‡ç« è¡¨ã€‚æ‰€ä»¥é™æ€é¡µé¢åˆå§‹æ˜¯æ²¡æœ‰&lt;/p&gt;
&lt;p&gt;é˜…è¯»æ•°é‡çš„ã€‚&lt;/p&gt;
&lt;p&gt;é‚£å¦‚ä½•éªŒè¯æ˜¯ä¸æ˜¯è¿™æ ·ã€‚è¯·çœ‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1090617/201807/1090617-20180719223148478-1892366830.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â  Â  Â æˆ‘ä»¬å‘ç°åˆå§‹çš„htmlé¡µé¢çš„é˜…è¯»é‡å’Œè¯„è®ºéƒ½æ˜¯æ²¡æœ‰çš„ï¼Œè€Œæ˜¯é»˜è®¤...,æ‰€ä»¥ä¸Šé¢çˆ¬åˆ°çš„å°±æ˜¯...&lt;/p&gt;
&lt;p&gt;Â  Â  Â é‚£å¦‚ä½•èƒ½çˆ¬åˆ°çœŸå®çš„é˜…è¯»é‡å‘¢ï¼Œè¿™ä¸ªå°±éœ€è¦çŸ¥é“å®ƒçœŸå®çš„æ¥å£æ˜¯ä»€ä¹ˆï¼Œç„¶åé€šè¿‡å…¶å®ƒå·¥å…·æ¥çˆ¬ï¼Œæˆ‘ä»¬çœ‹ä¸‹è·å–é˜…è¯»é‡çš„çœŸå®æ¥å£ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1090617/201807/1090617-20180719223811553-444726996.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ—¢ç„¶çŸ¥é“é˜…è¯»é‡çš„çœŸå®æ¥å£ï¼Œé‚£ä¹ˆçˆ¬åˆ°å®ƒä¹Ÿå°±ç®€å•äº†ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼š&lt;span&gt;é€šè¿‡è¿™é‡Œæˆ‘ä»¬è¦æ˜ç™½ï¼Œåªæœ‰htmlå…ƒç´ æœ‰çš„æƒ…å†µä¸‹ï¼Œæ‰èƒ½é€šè¿‡jsoupæ¥çˆ¬è™«ï¼Œå¦‚æœæ˜¯è¿™æ¥å£è·å¾—çš„æ•°æ®ï¼Œé‚£ä¹ˆé€šè¿‡jsoupæ˜¯æ— æ³•è·å–åˆ°çš„ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;æœ‰å…³jsoupä¹Ÿæ˜¯è‡ªå·±çš„ç†è§£ï¼Œå¦‚æœ‰ä¸æ­£ç¡®è¯·ç•™è¨€æŒ‡ç‚¹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;æƒ³å¤ªå¤šï¼Œåšå¤ªå°‘ï¼Œä¸­é—´çš„è½å·®å°±æ˜¯çƒ¦æ¼ã€‚æƒ³æ²¡æœ‰çƒ¦æ¼ï¼Œè¦ä¹ˆåˆ«æƒ³ï¼Œè¦ä¹ˆå¤šåšã€‚ä¸­æ ¡ã€9ã€‘&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

</description>
<pubDate>Thu, 19 Jul 2018 14:50:00 +0000</pubDate>
<dc:creator>é›¨ç‚¹çš„åå­—</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/qdhxhz/p/9338834.html</dc:identifier>
</item>
<item>
<title>ã€Javaå…¥é—¨æé«˜ç¯‡ã€‘Day25 å²ä¸Šæœ€è¯¦ç»†çš„HashMapçº¢é»‘æ ‘è§£æ - å¼—å…°å…‹çš„çŒ«</title>
<link>http://www.cnblogs.com/mfrank/p/9227097.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/mfrank/p/9227097.html</guid>
<description>&lt;p&gt;ã€€ã€€å½“å½“å½“å½“å½“å½“å½“ï¼Œå¥½ä¹…ä¸è§ï¼Œæœ€è¿‘åˆæ˜¯æ¢å·¥ä½œï¼Œåˆæ˜¯æ¢æˆ¿å­ï¼Œå¿™çš„ä¸å¯å¼€äº¤ï¼Œæ–­æ›´äº†ä¸€å°æ®µæ—¶é—´ï¼Œæœ€é‡è¦çš„ä¸€ç¯‡è¿Ÿè¿Ÿå‡ºä¸æ¥ï¼Œæ¯æ¬¡éƒ½çŠ¹æŠ±çµç¶åŠé®é¢ï¼Œæƒ³è¦æŠŠå®ƒç”¨é€šä¿—æ˜“æ‡‚çš„æ–¹å¼è¿›è¡Œè¯´æ˜ï¼Œç¡®å®æœ‰ä¸€å®šçš„éš¾åº¦ï¼Œå¯æ„ç…æˆ‘ä¹Ÿï¼Œä½†è‡ªå·±æŒ–çš„å‘ï¼Œå“­ç€ä¹Ÿè¦æŠŠå®ƒè¡¥ä¸Šã€‚&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201806/1043143-20180625234554119-1548105832.png&quot; alt=&quot;&quot;/&gt;è¯·å…è®¸æˆ‘å½“ä¸€å›æ ‡é¢˜å…šã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€å¥½äº†ï¼Œè¨€å½’æ­£ä¼ ï¼Œæœ¬ç¯‡ä¸»è¦å†…å®¹ä¾¿æ˜¯ä»‹ç»HashMapçš„ç”·äºŒå·â€”â€”TreeNodeï¼ˆç”·ä¸€å·è¿˜æ˜¯ç»™Nodeå§ï¼Œæ¯•ç«Ÿæ˜¯TreeNodeçš„çˆ·çˆ·ï¼Œè€Œä¸”æ™®é€šèŠ‚ç‚¹ä¸€èˆ¬æ¥è¯´ä¹Ÿæ¯”TreeNodeè¦å¤šï¼‰ï¼Œæœ¬ç¯‡ä¸»è¦ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ä»‹ç»ï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€1.çº¢é»‘æ ‘ä»‹ç»&lt;/p&gt;
&lt;p&gt;ã€€ã€€2.TreeNodeç»“æ„&lt;/p&gt;
&lt;p&gt;ã€€ã€€3.æ ‘åŒ–çš„è¿‡ç¨‹&lt;/p&gt;
&lt;p&gt;ã€€ã€€4.çº¢é»‘æ ‘çš„å·¦æ—‹å’Œå³æ—‹&lt;/p&gt;
&lt;p&gt;ã€€ã€€5.TreeNodeçš„å·¦æ—‹å’Œå³æ—‹&lt;/p&gt;
&lt;p&gt;ã€€ã€€6.çº¢é»‘æ ‘çš„æ’å…¥&lt;/p&gt;
&lt;p&gt;ã€€ã€€7.TreeNodeçš„æ’å…¥&lt;/p&gt;
&lt;p&gt;ã€€ã€€8.çº¢é»‘æ ‘çš„åˆ é™¤&lt;/p&gt;
&lt;p&gt;ã€€ã€€9.TreeNodeçš„åˆ é™¤&lt;/p&gt;
&lt;p&gt;ã€€ã€€è®²è§£çº¢é»‘æ ‘çš„éƒ¨åˆ†ç®—æ˜¯ç†è®ºéƒ¨åˆ†ï¼Œè®²è§£TreeNodeçš„éƒ¨åˆ†åˆ™æ˜¯ä»£ç å®è·µéƒ¨åˆ†ï¼Œé…åˆæœç”¨æ•ˆæœæ›´åŠ ã€‚&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201806/1043143-20180625235628621-1512974820.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä¿å®ˆä¼°è®¡ï¼Œä»”ç»†é£Ÿç”¨æœ¬ç¯‡å¤§çº¦éœ€è¦åŠå°æ—¶ï¼Œè¯·å„ä½ç»†ç»†å“å°ã€‚&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201807/1043143-20180719223614146-292186441.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h2&gt;çº¢é»‘æ ‘ä»‹ç»&lt;/h2&gt;
&lt;p&gt;ã€€ã€€ä»€ä¹ˆæ˜¯çº¢é»‘æ ‘ï¼Ÿå—¯ï¼Œé¦–å…ˆï¼Œå®ƒæ˜¯ä¸€é¢—æ ‘ï¼Œæ‰€è°“çš„æ ‘ï¼Œä¾¿æ˜¯é•¿çš„åƒè¿™æ ·çš„ä¸œè¥¿&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201807/1043143-20180719223635037-1249032958.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;ã€€ã€€&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201806/1043143-20180625235951335-1438523857.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä¸åƒæ ‘ï¼Ÿemmmmï¼Œä½ æŠŠå®ƒæƒ³è±¡æˆä¸€é¢—å€’è¿‡æ¥çš„æ ‘å°±å¥½äº†ï¼ŒA~Héƒ½æ˜¯æ ‘çš„èŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹æœ‰é›¶ä¸ªæˆ–è€…å¤šä¸ªå­èŠ‚ç‚¹ï¼Œæˆ–è€…è¯´å¤šä¸ªå­©å­ï¼Œä½†é™¤äº†æ ¹èŠ‚ç‚¹ä»¥å¤–ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½åªæœ‰ä¸€ä¸ªçˆ¶èŠ‚ç‚¹ï¼Œä¹Ÿç§°åªæœ‰ä¸€ä¸ªçˆ¶äº²ï¼ˆè€ç‹å˜¿å˜¿ä¸€ç¬‘&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201807/1043143-20180719223653993-1157249254.png&quot; alt=&quot;&quot;/&gt;ï¼‰ã€‚æœ€ä¸Šé¢çš„Aæ˜¯æ ¹èŠ‚ç‚¹ï¼Œæœ€ä¸‹é¢çš„Dã€Hã€Fã€Gæ˜¯å¶å­èŠ‚ç‚¹ã€‚æ¯ä¸€ä¸ªéæ ¹èŠ‚ç‚¹æœ‰ä¸”åªæœ‰ä¸€ä¸ªçˆ¶èŠ‚ç‚¹ï¼›æ ‘æ˜¯å…·æœ‰ä¸€å±‚ä¸€å±‚çš„å±‚æ¬¡ç»“æ„ï¼Œè¿™é‡ŒAä½äºç¬¬ä¸€å±‚ï¼ŒBã€Cä½äºç¬¬äºŒå±‚ï¼Œä¾æ¬¡ç±»æ¨ã€‚å°†å·¦è¾¹çš„BèŠ‚ç‚¹éƒ¨åˆ†ï¼ˆåŒ…æ‹¬BDEHï¼‰æ‹¿å‡ºæ¥ï¼Œåˆ™åˆæ˜¯ä¸€é¢—æ ‘ï¼Œç§°ä¸ºæ ‘çš„å­æ ‘ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€å¥½äº†ï¼ŒçŸ¥é“æ ‘æ˜¯ä»€ä¹ˆä¸œè¥¿äº†ï¼Œé‚£ä¹ˆçº¢é»‘æ ‘æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ã€€ã€€çº¢é»‘æ ‘ï¼Œæœ¬è´¨ä¸Šæ¥è¯´æ˜¯ä¸€é¢—äºŒå‰æœç´¢æ ‘ã€‚å—¯ï¼Œè¿˜æ˜¯å…ˆè¯´è¯´è¿™ä¸ªäºŒå‰æœç´¢æ ‘å§ã€‚äºŒå‰ä»£è¡¨å®ƒçš„èŠ‚ç‚¹æœ€å¤šæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œè€Œä¸”å·¦å³æœ‰é¡ºåºï¼Œä¸èƒ½é¢ å€’ï¼Œåˆ†åˆ«å«å·¦å­©å­å’Œå³å­©å­ï¼Œè¿™ä¸¤ä¸ªèŠ‚ç‚¹äº’ä¸ºå…„å¼ŸèŠ‚ç‚¹ï¼Œå—¯ï¼Œå…¶å®å«æ³•æ ¹ç°å®é‡Œçš„å«æ³•å·®ä¸å¤šï¼Œä»¥ä¸‹å›¾ä¸ºä¾‹ï¼Œ4ã€9äº’ä¸ºå…„å¼Ÿï¼Œ7æ˜¯ä»–ä»¬çš„çˆ¶äº²ï¼Œ9æ˜¯2çš„å”å”ï¼Œ8æ˜¯2çš„å ‚å…„å¼Ÿ&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201806/1043143-20180625235628621-1512974820.png&quot; alt=&quot;&quot;/&gt;ï¼Œå¾ˆç®€å•å§ã€‚è¯´å®Œäº†ç§°è°“ï¼Œå†æ¥è¯´è¯´ç”¨é€”ï¼Œæ—¢ç„¶å«åšæœç´¢æ ‘è¡¨ç¤ºå®ƒçš„ç”¨é€”æ˜¯ä¸ºäº†æ›´å¿«çš„æœç´¢å’ŒæŸ¥æ‰¾è€Œè®¾è®¡çš„ï¼Œæ‰€ä»¥è¿™æ£µæ ‘æœ¬èº«æ»¡è¶³ä¸€å®šçš„æ’åºè§„åˆ™ï¼Œå³æ ‘ä¸­çš„ä»»ä½•èŠ‚ç‚¹çš„å€¼å¤§äºå®ƒçš„å·¦å­©å­ï¼Œä¸”å°äºå®ƒçš„å³å­©å­ã€‚Â ä»»æ„èŠ‚ç‚¹çš„å·¦ã€å³å­æ ‘ä¹Ÿåˆ†åˆ«ä¸ºäºŒå‰æŸ¥æ‰¾æ ‘ã€‚å—¯ï¼Œç»“åˆä¸‹å›¾æ„ä¼šä¸€ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201806/1043143-20180626005359234-143383116.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€è€Œçº¢é»‘æ ‘ï¼Œå°±è·Ÿå®ƒçš„åå­—ä¸€æ ·ï¼Œåˆçº¢åˆé»‘ï¼Œçº¢é»‘å¹¶è¿›ï¼Œç†å®äº¤èï¼ŒèŠ‚ç‚¹æ˜¯éçº¢å³é»‘çš„ï¼Œçœ‹èµ·æ¥å°±åƒè¿™æ ·&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201807/1043143-20180719223751700-870405580.png&quot; alt=&quot;&quot;/&gt;ï¼š&lt;/p&gt;

&lt;p&gt;ã€€ã€€&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201806/1043143-20180626004222951-1996840383.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€çº¢é»‘æ ‘çš„ä¸»è¦ç‰¹æ€§:&lt;br/&gt;ã€€ã€€ï¼ˆ1ï¼‰æ¯ä¸ªèŠ‚ç‚¹è¦ä¹ˆæ˜¯é»‘è‰²ï¼Œè¦ä¹ˆæ˜¯çº¢è‰²ã€‚ï¼ˆèŠ‚ç‚¹éé»‘å³çº¢ï¼‰&lt;br/&gt;ã€€ã€€ï¼ˆ2ï¼‰æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²ã€‚&lt;br/&gt;ã€€ã€€ï¼ˆ3ï¼‰æ¯ä¸ªå¶å­èŠ‚ç‚¹ï¼ˆNILï¼‰æ˜¯é»‘è‰²ã€‚Â &lt;br/&gt;ã€€ã€€ï¼ˆ4ï¼‰å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²çš„ï¼Œåˆ™å®ƒçš„å­èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²çš„ã€‚ï¼ˆä¹Ÿå°±æ˜¯è¯´çˆ¶å­èŠ‚ç‚¹ä¸èƒ½åŒæ—¶ä¸ºçº¢è‰²ï¼‰&lt;br/&gt;ã€€ã€€ï¼ˆ5ï¼‰ä»ä¸€ä¸ªèŠ‚ç‚¹åˆ°è¯¥èŠ‚ç‚¹çš„å­å­™èŠ‚ç‚¹çš„æ‰€æœ‰è·¯å¾„ä¸ŠåŒ…å«ç›¸åŒæ•°ç›®çš„é»‘èŠ‚ç‚¹ã€‚ï¼ˆè¿™ä¸€ç‚¹æ˜¯å¹³è¡¡çš„å…³é”®ï¼‰&lt;/p&gt;
&lt;p&gt;ã€€ã€€è¯´ç®€å•ä¹Ÿç®€å•ï¼Œå…¶å®å°±æ˜¯ä¸€é¢—æ¯”è¾ƒå¹³è¡¡çš„åˆçº¢åˆé»‘çš„äºŒå‰æ ‘å˜›ã€‚&lt;/p&gt;
&lt;h2&gt;TreeNodeç»“æ„&lt;/h2&gt;
&lt;p&gt;ã€€ã€€æ—¢ç„¶æˆ‘ä»¬å·²ç»çŸ¥é“çº¢é»‘æ ‘é•¿ä»€ä¹ˆæ ·äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å†æ¥çœ‹çœ‹HashMapä¸­çš„TreeNodeä»£ç é‡Œæ˜¯å¦‚ä½•è¡¨ç¤ºçš„ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;48&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
     * ç”¨äºTree bins çš„Entryã€‚ æ‰©å±•LinkedHashMap.Entryï¼ˆè¿›è€Œæ‰©å±•Nodeï¼‰ï¼Œå› æ­¤å¯ä»¥ç”¨ä½œå¸¸è§„èŠ‚ç‚¹æˆ–é“¾æ¥èŠ‚ç‚¹çš„æ‰©å±•ã€‚
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; TreeNode&amp;lt;K,V&amp;gt; &lt;span&gt;extends&lt;/span&gt; LinkedHashMap.Entry&amp;lt;K,V&amp;gt;&lt;span&gt; {
        TreeNode&lt;/span&gt;&amp;lt;K,V&amp;gt; parent;  &lt;span&gt;//&lt;/span&gt;&lt;span&gt; çº¢é»‘æ ‘çˆ¶èŠ‚ç‚¹&lt;/span&gt;
        TreeNode&amp;lt;K,V&amp;gt;&lt;span&gt; left;
        TreeNode&lt;/span&gt;&amp;lt;K,V&amp;gt;&lt;span&gt; right;
        TreeNode&lt;/span&gt;&amp;lt;K,V&amp;gt; prev;    &lt;span&gt;//&lt;/span&gt;&lt;span&gt; åˆ é™¤åéœ€è¦å–æ¶ˆé“¾æ¥&lt;/span&gt;
        &lt;span&gt;boolean&lt;/span&gt;&lt;span&gt; red;
        TreeNode(&lt;/span&gt;&lt;span&gt;int&lt;/span&gt; hash, K key, V val, Node&amp;lt;K,V&amp;gt;&lt;span&gt; next) {
            &lt;/span&gt;&lt;span&gt;super&lt;/span&gt;&lt;span&gt;(hash, key, val, next);
        }&lt;br/&gt;ã€€ã€€ã€€ã€€ //çœç•¥åç»­ä»£ç &lt;br/&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Â ã€€ã€€TreeNodeç»§æ‰¿è‡ªLinkedHashMapä¸­çš„å†…éƒ¨ç±»â€”â€”LinkedHashMap.Entryï¼Œè€Œè¿™ä¸ªå†…éƒ¨ç±»åˆç»§æ‰¿è‡ªNodeï¼Œæ‰€ä»¥ç®—æ˜¯Nodeçš„å­™å­è¾ˆäº†ã€‚æˆ‘ä»¬å†æ¥çœ‹çœ‹å®ƒçš„å‡ ä¸ªå±æ€§ï¼Œparentç”¨æ¥æŒ‡å‘å®ƒçš„çˆ¶èŠ‚ç‚¹ï¼ŒleftæŒ‡å‘å·¦å­©å­ï¼ŒrightæŒ‡å‘å³å­©å­ï¼Œprevåˆ™æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆåŸé“¾è¡¨ä¸­çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼‰ï¼Œæ³¨æ„ï¼Œè¿™äº›å­—æ®µè·ŸEntryï¼ŒNodeä¸­çš„å­—æ®µä¸€æ ·ï¼Œæ˜¯ä½¿ç”¨é»˜è®¤è®¿é—®æƒé™çš„ï¼Œæ‰€ä»¥å­ç±»å¯ä»¥ç›´æ¥ä½¿ç”¨çˆ¶ç±»çš„å±æ€§ã€‚&lt;/p&gt;
&lt;h2&gt;æ ‘åŒ–çš„è¿‡ç¨‹&lt;/h2&gt;
&lt;p&gt;ã€€ã€€åœ¨å‰å‡ ç¯‡ä¸­å·²ç»æœ‰æ‰€ä»‹ç»ï¼Œå½“HashMapæ¡¶ä¸­çš„å…ƒç´ ä¸ªæ•°è¶…è¿‡ä¸€å®šæ•°é‡æ—¶ï¼Œå°±ä¼šæ ‘åŒ–ï¼Œä¹Ÿå°±æ˜¯å°†é“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘çš„ç»“æ„ã€‚&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201807/1043143-20180719223820739-1226100695.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;56&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;public&lt;/span&gt;&lt;span&gt; V put(K key, V value) {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; putVal(hash(key), key, value, &lt;span&gt;false&lt;/span&gt;, &lt;span&gt;true&lt;/span&gt;&lt;span&gt;);
    }

    &lt;/span&gt;&lt;span&gt;final&lt;/span&gt; V putVal(&lt;span&gt;int&lt;/span&gt; hash, K key, V value, &lt;span&gt;boolean&lt;/span&gt;&lt;span&gt; onlyIfAbsent,
                   &lt;/span&gt;&lt;span&gt;boolean&lt;/span&gt;&lt;span&gt; evict) {
        ...çœç•¥éƒ¨åˆ†ä»£ç ...
            &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
                &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; binCount = 0; ; ++&lt;span&gt;binCount) {
                    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; ((e = p.next) == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                        p.next &lt;/span&gt;= newNode(hash, key, value, &lt;span&gt;null&lt;/span&gt;&lt;span&gt;);
                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å½“æ¡¶ä¸­å…ƒç´ ä¸ªæ•°è¶…è¿‡é˜ˆå€¼ï¼ˆ8ï¼‰æ—¶å°±è¿›è¡Œæ ‘åŒ–&lt;/span&gt;
                        &lt;span&gt;if&lt;/span&gt; (binCount &amp;gt;= TREEIFY_THRESHOLD - 1&lt;span&gt;)
                            treeifyBin(tab, hash);
                        &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
                    }
         ...çœç•¥éƒ¨åˆ†ä»£ç ...
    }

    &lt;/span&gt;&lt;span&gt;final&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; treeifyBin(Node&amp;lt;K,V&amp;gt;[] tab, &lt;span&gt;int&lt;/span&gt;&lt;span&gt; hash) {
        &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; n, index; Node&amp;lt;K,V&amp;gt;&lt;span&gt; e;
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (tab == &lt;span&gt;null&lt;/span&gt; || (n = tab.length) &amp;lt;&lt;span&gt; MIN_TREEIFY_CAPACITY)
            resize();
        &lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; ((e = tab[index = (n - 1) &amp;amp; hash]) != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
            TreeNode&lt;/span&gt;&amp;lt;K,V&amp;gt; hd = &lt;span&gt;null&lt;/span&gt;, tl = &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
            &lt;/span&gt;&lt;span&gt;do&lt;/span&gt;&lt;span&gt; {
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å°†èŠ‚ç‚¹æ›¿æ¢ä¸ºTreeNode&lt;/span&gt;
                TreeNode&amp;lt;K,V&amp;gt; p = replacementTreeNode(e, &lt;span&gt;null&lt;/span&gt;&lt;span&gt;);
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (tl == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)&lt;br/&gt;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//hdæŒ‡å‘å¤´ç»“ç‚¹
                    hd &lt;/span&gt;=&lt;span&gt; p;
                &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
                    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è¿™é‡Œå…¶å®æ˜¯å°†å•é“¾è¡¨è½¬åŒ–æˆäº†åŒå‘é“¾è¡¨ï¼Œtlæ˜¯pçš„å‰é©±ï¼Œæ¯æ¬¡å¾ªç¯æ›´æ–°æŒ‡å‘åŒé“¾è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œç”¨æ¥å’Œpç›¸è¿ï¼Œpæ˜¯å½“å‰èŠ‚ç‚¹&lt;/span&gt;
                    p.prev =&lt;span&gt; tl;
                    tl.next &lt;/span&gt;=&lt;span&gt; p;
                }
                tl &lt;/span&gt;=&lt;span&gt; p;
            } &lt;/span&gt;&lt;span&gt;while&lt;/span&gt; ((e = e.next) != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;);
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; ((tab[index] = hd) != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å°†é“¾è¡¨è¿›è¡Œæ ‘åŒ–&lt;/span&gt;
&lt;span&gt;                hd.treeify(tab);
        }
    }  &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€ä»ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œåœ¨treeifyBinå‡½æ•°ä¸­ï¼Œå…ˆå°†æ‰€æœ‰èŠ‚ç‚¹æ›¿æ¢ä¸ºTreeNodeï¼Œç„¶åå†å°†å•é“¾è¡¨è½¬ä¸ºåŒé“¾è¡¨ï¼Œæ–¹ä¾¿ä¹‹åçš„éå†å’Œç§»åŠ¨æ“ä½œã€‚è€Œæœ€ç»ˆçš„æ“ä½œï¼Œå®é™…ä¸Šæ˜¯è°ƒç”¨TreeNodeçš„æ–¹æ³•treeifyè¿›è¡Œçš„ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;49&quot;&gt;
&lt;pre&gt;
&lt;span&gt;final&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; treeify(Node&amp;lt;K,V&amp;gt;&lt;span&gt;[] tab) {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;æ ‘çš„æ ¹èŠ‚ç‚¹&lt;/span&gt;
            TreeNode&amp;lt;K,V&amp;gt; root = &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;xæ˜¯å½“å‰èŠ‚ç‚¹ï¼Œnextæ˜¯åç»§&lt;/span&gt;
            &lt;span&gt;for&lt;/span&gt; (TreeNode&amp;lt;K,V&amp;gt; x = &lt;span&gt;this&lt;/span&gt;, next; x != &lt;span&gt;null&lt;/span&gt;; x =&lt;span&gt; next) {
                next &lt;/span&gt;= (TreeNode&amp;lt;K,V&amp;gt;&lt;span&gt;)x.next;
                x.left &lt;/span&gt;= x.right = &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å¦‚æœæ ¹èŠ‚ç‚¹ä¸ºnullï¼ŒæŠŠå½“å‰èŠ‚ç‚¹è®¾ç½®ä¸ºæ ¹èŠ‚ç‚¹&lt;/span&gt;
                &lt;span&gt;if&lt;/span&gt; (root == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                    x.parent &lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
                    x.red &lt;/span&gt;= &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
                    root &lt;/span&gt;=&lt;span&gt; x;
                }
                &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
                    K k &lt;/span&gt;=&lt;span&gt; x.key;
                    &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; h =&lt;span&gt; x.hash;
                    Class&lt;/span&gt;&amp;lt;?&amp;gt; kc = &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
                    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è¿™é‡Œå¾ªç¯éå†ï¼Œè¿›è¡ŒäºŒå‰æœç´¢æ ‘çš„æ’å…¥&lt;/span&gt;
                    &lt;span&gt;for&lt;/span&gt; (TreeNode&amp;lt;K,V&amp;gt; p =&lt;span&gt; root;;) {
                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;pæŒ‡å‘éå†ä¸­çš„å½“å‰èŠ‚ç‚¹ï¼Œxä¸ºå¾…æ’å…¥èŠ‚ç‚¹ï¼Œkæ˜¯xçš„keyï¼Œhæ˜¯xçš„hashå€¼ï¼Œphæ˜¯pçš„hashå€¼ï¼Œdirç”¨æ¥æŒ‡ç¤ºxèŠ‚ç‚¹ä¸pçš„æ¯”è¾ƒï¼Œ-1è¡¨ç¤ºæ¯”på°ï¼Œ1è¡¨ç¤ºæ¯”på¤§ï¼Œä¸å­˜åœ¨ç›¸ç­‰æƒ…å†µï¼Œå› ä¸ºHashMapä¸­æ˜¯ä¸å­˜åœ¨ä¸¤ä¸ªkeyå®Œå…¨ä¸€è‡´çš„æƒ…å†µã€‚&lt;/span&gt;
                        &lt;span&gt;int&lt;/span&gt;&lt;span&gt; dir, ph;
                        K pk &lt;/span&gt;=&lt;span&gt; p.key;
                        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; ((ph = p.hash) &amp;gt;&lt;span&gt; h)
                            dir &lt;/span&gt;= -1&lt;span&gt;;
                        &lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (ph &amp;lt;&lt;span&gt; h)
                            dir &lt;/span&gt;= 1&lt;span&gt;;
                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å¦‚æœhashå€¼ç›¸ç­‰ï¼Œé‚£ä¹ˆåˆ¤æ–­kæ˜¯å¦å®ç°äº†comparableæ¥å£ï¼Œå¦‚æœå®ç°äº†comparableæ¥å£å°±ä½¿ç”¨compareToè¿›è¡Œè¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœä»æ—§ç›¸ç­‰æˆ–è€…æ²¡æœ‰å®ç°comparableæ¥å£ï¼Œåˆ™åœ¨tieBreakOrderä¸­æ¯”è¾ƒ&lt;/span&gt;
                        &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; ((kc == &lt;span&gt;null&lt;/span&gt; &amp;amp;&amp;amp;&lt;span&gt;
                                  (kc &lt;/span&gt;= comparableClassFor(k)) == &lt;span&gt;null&lt;/span&gt;) ||&lt;span&gt;
                                 (dir &lt;/span&gt;= compareComparables(kc, k, pk)) == 0&lt;span&gt;)
                            dir &lt;/span&gt;=&lt;span&gt; tieBreakOrder(k, pk);

                        TreeNode&lt;/span&gt;&amp;lt;K,V&amp;gt; xp =&lt;span&gt; p;
                        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; ((p = (dir &amp;lt;= 0) ? p.left : p.right) == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                            x.parent &lt;/span&gt;=&lt;span&gt; xp;
                            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (dir &amp;lt;= 0&lt;span&gt;)
                                xp.left &lt;/span&gt;=&lt;span&gt; x;
                            &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;
                                xp.right &lt;/span&gt;=&lt;span&gt; x;&lt;br/&gt;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ //è¿›è¡Œæ’å…¥å¹³è¡¡å¤„ç†
                            root &lt;/span&gt;=&lt;span&gt; balanceInsertion(root, x);
                            &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
                        }
                    }
                }
            }&lt;br/&gt;ã€€ã€€ã€€ã€€ã€€ã€€ã€€//ç¡®ä¿ç»™å®šèŠ‚ç‚¹æ˜¯æ¡¶ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ 
            moveRootToFront(tab, root);
        }    
     &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è¿™é‡Œä¸æ˜¯ä¸ºäº†æ•´ä½“æ’åºï¼Œè€Œæ˜¯ä¸ºäº†åœ¨æ’å…¥ä¸­ä¿æŒä¸€è‡´çš„é¡ºåº&lt;/span&gt;
     &lt;span&gt;static&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; tieBreakOrder(Object a, Object b) {
            &lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt; d;
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;ç”¨ä¸¤è€…çš„ç±»åè¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœç›¸åŒåˆ™ä½¿ç”¨å¯¹è±¡é»˜è®¤çš„hashcodeè¿›è¡Œæ¯”è¾ƒ&lt;/span&gt;
            &lt;span&gt;if&lt;/span&gt; (a == &lt;span&gt;null&lt;/span&gt; || b == &lt;span&gt;null&lt;/span&gt; ||&lt;span&gt;
                (d &lt;/span&gt;=&lt;span&gt; a.getClass().getName().
                 compareTo(b.getClass().getName())) &lt;/span&gt;== 0&lt;span&gt;)
                d &lt;/span&gt;= (System.identityHashCode(a) &amp;lt;= System.identityHashCode(b) ?
                     -1 : 1&lt;span&gt;);
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; d;
        }  &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€è¿™é‡Œçš„é€»è¾‘å…¶å®ä¸å¤æ‚ï¼Œä»…ä»…æ˜¯å¾ªç¯éå†å½“å‰æ ‘ï¼Œç„¶åæ‰¾åˆ°å¯ä»¥è¯¥èŠ‚ç‚¹å¯ä»¥æ’å…¥çš„ä½ç½®ï¼Œä¾æ¬¡å’Œéå†èŠ‚ç‚¹æ¯”è¾ƒï¼Œæ¯”å®ƒå¤§åˆ™è·Ÿå…¶å³å­©å­æ¯”è¾ƒï¼Œå°åˆ™ä¸å…¶å·¦å­©å­æ¯”è¾ƒï¼Œä¾æ¬¡éå†ï¼Œç›´åˆ°æ‰¾åˆ°å·¦å­©å­æˆ–è€…å³å­©å­ä¸ºnullçš„ä½ç½®è¿›è¡Œæ’å…¥ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€çœŸæ­£å¤æ‚ä¸€ç‚¹çš„åœ°æ–¹åœ¨äºbalanceInsertionå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¸­ï¼Œå°†çº¢é»‘æ ‘è¿›è¡Œæ’å…¥å¹³è¡¡å¤„ç†ï¼Œä¿è¯æ’å…¥èŠ‚ç‚¹åä»ä¿æŒçº¢é»‘æ ‘çš„æ€§è´¨ã€‚è¿™ä¸ªå‡½æ•°ç¨ååœ¨TreeNodeçš„æ’å…¥ä¸­è¿›è¡Œä»‹ç»ï¼Œè¿™é‡Œå…ˆçœ‹çœ‹moveRootToFrontï¼Œè¿™ä¸ªå‡½æ•°æ˜¯å°†rootèŠ‚ç‚¹ç§»åŠ¨åˆ°æ¡¶ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä¹Ÿå°±æ˜¯é“¾è¡¨çš„é¦–èŠ‚ç‚¹ï¼Œè¿™æ ·åšæ˜¯å› ä¸ºåœ¨åˆ¤æ–­æ¡¶ä¸­å…ƒç´ ç±»å‹çš„æ—¶å€™ä¼šå¯¹é“¾è¡¨è¿›è¡Œéå†ï¼Œå°†æ ¹èŠ‚ç‚¹ç§»åŠ¨åˆ°é“¾è¡¨å‰ç«¯å¯ä»¥ç¡®ä¿ç±»å‹åˆ¤æ–­æ—¶ä¸ä¼šå‡ºç°é”™è¯¯ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;44&quot;&gt;
&lt;pre&gt;
&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
 * æŠŠç»™å®šèŠ‚ç‚¹è®¾ä¸ºæ¡¶ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ 
 &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;        
    &lt;span&gt;static&lt;/span&gt; &amp;lt;K,V&amp;gt; &lt;span&gt;void&lt;/span&gt; moveRootToFront(Node&amp;lt;K,V&amp;gt;[] tab, TreeNode&amp;lt;K,V&amp;gt;&lt;span&gt; root) {
            &lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt; n;
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (root != &lt;span&gt;null&lt;/span&gt; &amp;amp;&amp;amp; tab != &lt;span&gt;null&lt;/span&gt; &amp;amp;&amp;amp; (n = tab.length) &amp;gt; 0&lt;span&gt;) {
                &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; index = (n - 1) &amp;amp;&lt;span&gt; root.hash;
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;firstæŒ‡å‘é“¾è¡¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹&lt;/span&gt;
                TreeNode&amp;lt;K,V&amp;gt; first = (TreeNode&amp;lt;K,V&amp;gt;&lt;span&gt;)tab[index];
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (root !=&lt;span&gt; first) {
                    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å¦‚æœrootä¸æ˜¯ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåˆ™å°†rootä¸ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä½ç½®äº’æ¢&lt;/span&gt;
                    Node&amp;lt;K,V&amp;gt;&lt;span&gt; rn;
                    tab[index] &lt;/span&gt;=&lt;span&gt; root;
                    TreeNode&lt;/span&gt;&amp;lt;K,V&amp;gt; rp =&lt;span&gt; root.prev;
                    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; ((rn = root.next) != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
                        ((TreeNode&lt;/span&gt;&amp;lt;K,V&amp;gt;)rn).prev =&lt;span&gt; rp;
                    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (rp != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
                        rp.next &lt;/span&gt;=&lt;span&gt; rn;
                    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (first != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
                        first.prev &lt;/span&gt;=&lt;span&gt; root;
                    root.next &lt;/span&gt;=&lt;span&gt; first;
                    root.prev &lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
                }
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è¿™é‡Œæ˜¯é˜²å¾¡æ€§ç¼–ç¨‹ï¼Œæ ¡éªŒæ›´æ”¹åçš„ç»“æ„æ˜¯å¦æ»¡è¶³çº¢é»‘æ ‘å’ŒåŒé“¾è¡¨çš„ç‰¹æ€§
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å› ä¸ºHashMapå¹¶æ²¡æœ‰åšå¹¶å‘å®‰å…¨å¤„ç†ï¼Œå¯èƒ½åœ¨å¹¶å‘åœºæ™¯ä¸­æ„å¤–ç ´åäº†ç»“æ„&lt;/span&gt;
                &lt;span&gt;assert&lt;/span&gt;&lt;span&gt; checkInvariants(root);
            }
        }    &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;çº¢é»‘æ ‘çš„å·¦æ—‹å’Œå³æ—‹&lt;/h2&gt;
&lt;p&gt;ã€€ã€€å·¦æ—‹å’Œå³æ—‹ï¼Œé¡¾åæ€ä¹‰å˜›ï¼Œå°±æ˜¯å°†èŠ‚ç‚¹ä»¥æŸä¸ªèŠ‚ç‚¹ä¸ºä¸­å¿ƒå‘å·¦æˆ–è€…å‘å³è¿›è¡Œæ—‹è½¬æ“ä½œä»¥ä¿æŒäºŒå‰æ ‘çš„å¹³è¡¡ï¼Œè®©æˆ‘ä»¬çœ‹å›¾è¯´è¯&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201807/1043143-20180719224136408-508018236.png&quot; alt=&quot;&quot;/&gt;ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201807/1043143-20180717135149338-1921395779.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201807/1043143-20180717135200454-1697647783.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;


&lt;p&gt;ã€€ã€€å›¾ç”»çš„æœ‰ç‚¹å¤§ã€‚å°†å°±ç€çœ‹ä¸€ä¸‹å§ï¼Œå·¦æ—‹å’Œå³æ—‹ç›¸å½“äºä»¥è¦æ—‹è½¬çš„èŠ‚ç‚¹ä¸ºä¸­å¿ƒï¼Œå°†å­æ ‘ï¼ˆä»¥è¯¥èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘ï¼‰æ•´ä½“å‘å·¦æ—‹è½¬ï¼Œè¯¥èŠ‚ç‚¹å˜æˆå­æ ‘çš„æ ¹èŠ‚ç‚¹ï¼ŒåŸæ¥çš„æ ¹èŠ‚ç‚¹å˜æˆäº†å·¦å­©å­ï¼Œå¦‚æœè¯¥èŠ‚ç‚¹åŸæ¥æœ‰å·¦å­©å­ï¼Œåˆ™å°†å…¶å˜ä¸ºè¯¥èŠ‚ç‚¹å·¦å­©å­çš„å³å­©å­ã€‚è¯´èµ·æ¥å¥½åƒæœ‰ç‚¹ç»•ï¼Œå¯ä»¥è”ç³»å›¾è¿›è¡Œå½¢è±¡åŒ–çš„ç†è§£ï¼Œå½“èŠ‚ç‚¹Cå‘å·¦æ—‹è½¬ä¹‹åï¼Œå®ƒçš„å·¦å­©å­Då¯ä»¥ç†è§£ä¸ºå› ä¸ºé‡åŠ›ä½œç”¨æ‰åˆ°Açš„å³å­©å­ä½ç½®ï¼Œå—¯ï¼Œå°±æ˜¯è¿™æ ·ã€‚&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201807/1043143-20180719224801913-1141386044.png&quot; alt=&quot;&quot;/&gt;å³æ—‹ä¹Ÿæ˜¯ç±»ä¼¼ç†è§£å³å¯ã€‚&lt;/p&gt;
&lt;h2&gt;TreeNodeçš„å·¦æ—‹å’Œå³æ—‹&lt;/h2&gt;
&lt;p&gt;ã€€ã€€äº†è§£äº†å·¦æ—‹å’Œå³æ—‹ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä»£ç é‡Œæ˜¯æ€æ ·å®ç°çš„ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;51&quot;&gt;
&lt;pre&gt;
        &lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
         * å·¦æ—‹
         &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
        &lt;span&gt;static&lt;/span&gt; &amp;lt;K,V&amp;gt; TreeNode&amp;lt;K,V&amp;gt; rotateLeft(TreeNode&amp;lt;K,V&amp;gt;&lt;span&gt; root,
                                              TreeNode&lt;/span&gt;&amp;lt;K,V&amp;gt;&lt;span&gt; p) {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è¿™é‡Œçš„på³ä¸Šå›¾çš„AèŠ‚ç‚¹ï¼ŒræŒ‡å‘å³å­©å­å³Cï¼ŒrlæŒ‡å‘å³å­©å­çš„å·¦å­©å­å³Dï¼Œppä¸ºpçš„çˆ¶èŠ‚ç‚¹&lt;/span&gt;
            TreeNode&amp;lt;K,V&amp;gt;&lt;span&gt; r, pp, rl;
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (p != &lt;span&gt;null&lt;/span&gt; &amp;amp;&amp;amp; (r = p.right) != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; ((rl = p.right = r.left) != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
                    rl.parent &lt;/span&gt;=&lt;span&gt; p;
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å°†pçš„çˆ¶èŠ‚ç‚¹çš„å­©å­èŠ‚ç‚¹æŒ‡å‘r&lt;/span&gt;
                &lt;span&gt;if&lt;/span&gt; ((pp = r.parent = p.parent) == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
                    (root &lt;/span&gt;= r).red = &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
                &lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (pp.left ==&lt;span&gt; p)
                    pp.left &lt;/span&gt;=&lt;span&gt; r;
                &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;
                    pp.right &lt;/span&gt;=&lt;span&gt; r;
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å°†pç½®ä¸ºrçš„å·¦èŠ‚ç‚¹&lt;/span&gt;
                r.left =&lt;span&gt; p;
                p.parent &lt;/span&gt;=&lt;span&gt; r;
            }
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; root;
        }

        &lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
         * å³æ—‹
         &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
        &lt;span&gt;static&lt;/span&gt; &amp;lt;K,V&amp;gt; TreeNode&amp;lt;K,V&amp;gt; rotateRight(TreeNode&amp;lt;K,V&amp;gt;&lt;span&gt; root,
                                               TreeNode&lt;/span&gt;&amp;lt;K,V&amp;gt;&lt;span&gt; p) {
             &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è¿™é‡Œçš„på³ä¸Šå›¾çš„AèŠ‚ç‚¹ï¼ŒlæŒ‡å‘å·¦å­©å­å³Cï¼ŒlræŒ‡å‘å·¦å­©å­çš„å³å­©å­å³Eï¼Œppä¸ºpçš„çˆ¶èŠ‚ç‚¹&lt;/span&gt;
            TreeNode&amp;lt;K,V&amp;gt;&lt;span&gt; l, pp, lr;
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (p != &lt;span&gt;null&lt;/span&gt; &amp;amp;&amp;amp; (l = p.left) != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; ((lr = p.left = l.right) != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
                    lr.parent &lt;/span&gt;=&lt;span&gt; p;
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; ((pp = l.parent = p.parent) == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
                    (root &lt;/span&gt;= l).red = &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
                &lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (pp.right ==&lt;span&gt; p)
                    pp.right &lt;/span&gt;=&lt;span&gt; l;
                &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;
                    pp.left &lt;/span&gt;=&lt;span&gt; l;
                l.right &lt;/span&gt;=&lt;span&gt; p;
                p.parent &lt;/span&gt;=&lt;span&gt; l;
            }
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; root;
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€å…¶å®ï¼Œä¹Ÿå¾ˆç®€å•å˜›ã€‚23333Â ã€€&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201807/1043143-20180719224215023-516685596.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;h2&gt;çº¢é»‘æ ‘çš„æ’å…¥&lt;/h2&gt;
&lt;p&gt;ã€€ã€€ç°åœ¨æ¥çœ‹çœ‹ä¸€ä¸ªæ¯”è¾ƒéº»çƒ¦ä¸€ç‚¹çš„æ“ä½œï¼Œçº¢é»‘æ ‘çš„æ’å…¥ï¼Œé¦–å…ˆæ‰¾åˆ°è¿™ä¸ªèŠ‚ç‚¹è¦æ’å…¥çš„ä½ç½®ï¼Œå³ä¸€å±‚ä¸€å±‚æ¯”è¾ƒï¼Œå¤§çš„æ”¾å³è¾¹ï¼Œå°çš„æ”¾å·¦è¾¹ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ºnullçš„èŠ‚ç‚¹æ”¾å…¥å³å¯ï¼Œä½†æ˜¯å¦‚ä½•åœ¨æ’å…¥çš„è¿‡ç¨‹ä¿æŒçº¢é»‘æ ‘çš„ç‰¹æ€§å‘¢ï¼Œæƒ³æƒ³å¥½åƒæ¯”è¾ƒå¤´ç–¼ï¼Œä½†æ˜¯å†ä»”ç»†æƒ³æƒ³å…¶å®å°±ä¼šå‘ç°ï¼Œå…¶å®åªæœ‰è¿™ä¹ˆå‡ ç§æƒ…å†µï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€1.æ’å…¥çš„ä¸ºæ ¹èŠ‚ç‚¹ï¼Œåˆ™ç›´æ¥æŠŠé¢œè‰²æ”¹æˆé»‘è‰²å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€2.æ’å…¥çš„èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æ˜¯é»‘è‰²èŠ‚ç‚¹ï¼Œåˆ™ä¸éœ€è¦è°ƒæ•´ï¼Œå› ä¸ºæ’å…¥çš„èŠ‚ç‚¹ä¼šåˆå§‹åŒ–ä¸ºçº¢è‰²èŠ‚ç‚¹ï¼Œçº¢è‰²èŠ‚ç‚¹æ˜¯ä¸ä¼šå½±å“æ ‘çš„å¹³è¡¡çš„ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€3.æ’å…¥çš„èŠ‚ç‚¹çš„ç¥–çˆ¶èŠ‚ç‚¹ä¸ºnullï¼Œå³æ’å…¥çš„èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æ˜¯æ ¹èŠ‚ç‚¹ï¼Œç›´æ¥æ’å…¥å³å¯ï¼ˆå› ä¸ºæ ¹èŠ‚ç‚¹è‚¯å®šæ˜¯é»‘è‰²ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€4.æ’å…¥çš„èŠ‚ç‚¹çˆ¶èŠ‚ç‚¹å’Œç¥–çˆ¶èŠ‚ç‚¹éƒ½å­˜åœ¨ï¼Œå¹¶ä¸”å…¶çˆ¶èŠ‚ç‚¹æ˜¯ç¥–çˆ¶èŠ‚ç‚¹çš„å·¦èŠ‚ç‚¹ã€‚è¿™ç§æƒ…å†µç¨å¾®éº»çƒ¦ä¸€ç‚¹ï¼Œåˆåˆ†ä¸¤ç§å­æƒ…å†µï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€i.æ’å…¥èŠ‚ç‚¹çš„å”å”èŠ‚ç‚¹æ˜¯çº¢è‰²ï¼Œåˆ™å°†çˆ¶äº²èŠ‚ç‚¹å’Œå”å”èŠ‚ç‚¹éƒ½æ”¹æˆé»‘è‰²ï¼Œç„¶åç¥–çˆ¶èŠ‚ç‚¹æ”¹æˆçº¢è‰²å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ii.æ’å…¥èŠ‚ç‚¹çš„å”å”èŠ‚ç‚¹æ˜¯é»‘è‰²æˆ–ä¸å­˜åœ¨ï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€a.è‹¥æ’å…¥èŠ‚ç‚¹æ˜¯å…¶çˆ¶èŠ‚ç‚¹çš„å³å­©å­ï¼Œåˆ™å°†å…¶çˆ¶èŠ‚ç‚¹å·¦æ—‹ï¼Œ&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€b.è‹¥ä¸ºå·¦å­©å­ï¼Œåˆ™å°†å…¶çˆ¶èŠ‚ç‚¹å˜æˆé»‘è‰²èŠ‚ç‚¹ï¼Œå°†å…¶ç¥–çˆ¶èŠ‚ç‚¹å˜æˆçº¢è‰²èŠ‚ç‚¹ï¼Œç„¶åå°†å…¶ç¥–çˆ¶èŠ‚ç‚¹å³æ—‹ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€5.æ’å…¥çš„èŠ‚ç‚¹çˆ¶èŠ‚ç‚¹å’Œç¥–çˆ¶èŠ‚ç‚¹éƒ½å­˜åœ¨ï¼Œå¹¶ä¸”å…¶çˆ¶èŠ‚ç‚¹æ˜¯ç¥–çˆ¶èŠ‚ç‚¹çš„å³èŠ‚ç‚¹ã€‚è¿™ç§æƒ…å†µè·Ÿä¸Šé¢æ˜¯ç±»ä¼¼çš„ï¼Œåˆ†ä¸¤ç§å­æƒ…å†µï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€i.æ’å…¥èŠ‚ç‚¹çš„å”å”èŠ‚ç‚¹æ˜¯çº¢è‰²ï¼Œåˆ™å°†çˆ¶äº²èŠ‚ç‚¹å’Œå”å”èŠ‚ç‚¹éƒ½æ”¹æˆé»‘è‰²ï¼Œç„¶åç¥–çˆ¶èŠ‚ç‚¹æ”¹æˆçº¢è‰²å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ii.æ’å…¥èŠ‚ç‚¹çš„å”å”èŠ‚ç‚¹æ˜¯é»‘è‰²æˆ–ä¸å­˜åœ¨ï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€a.è‹¥æ’å…¥èŠ‚ç‚¹æ˜¯å…¶çˆ¶èŠ‚ç‚¹çš„å·¦å­©å­ï¼Œåˆ™å°†å…¶çˆ¶èŠ‚ç‚¹å³æ—‹&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€b.è‹¥ä¸ºå³å­©å­ï¼Œåˆ™å°†å…¶çˆ¶èŠ‚ç‚¹å˜æˆé»‘è‰²èŠ‚ç‚¹ï¼Œå°†å…¶ç¥–çˆ¶èŠ‚ç‚¹å˜æˆçº¢è‰²èŠ‚ç‚¹ï¼Œç„¶åå°†å…¶ç¥–çˆ¶èŠ‚ç‚¹å·¦æ—‹ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ç„¶åé‡å¤è¿›è¡Œä¸Šè¿°æ“ä½œï¼Œç›´åˆ°å˜æˆ1æˆ–2æƒ…å†µæ—¶åˆ™ç»“æŸå˜æ¢ã€‚è¯´åŠå¤©ï¼Œå¯èƒ½è¿˜æ˜¯äº‘é‡Œé›¾é‡Œï¼Œä¸€å›¾èƒœåƒè¨€ï¼Œè®©æˆ‘ä»¬ä»æ— åˆ°æœ‰æ„å»ºä¸€é¢—çº¢é»‘æ ‘ï¼Œå‡è®¾æ’å…¥çš„é¡ºåºä¸ºï¼š10ï¼Œ5ï¼Œ9ï¼Œ3ï¼Œ6ï¼Œ7ï¼Œ19ï¼Œ32ï¼Œ24ï¼Œ17ï¼ˆæ•°å­—æ˜¯æˆ‘æ‹è„‘è¢‹çæƒ³çš„ã€‚ï¼‰&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201807/1043143-20180719224258128-564157705.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€å…ˆæ¥æ’ä¸ª10ï¼Œä¸ºæƒ…æ™¯1ï¼Œç›´æ¥æ”¹æˆé»‘è‰²å³å¯ï¼Œå†æ’å…¥5ï¼Œä¸ºæƒ…æ™¯2ï¼Œæ¯”10å°ï¼Œæ”¾åˆ°10çš„å·¦å­©å­ä½ç½®ï¼Œæ’å…¥9ï¼Œæ¯”10å°ï¼Œä½†æ˜¯æ¯”5å¤§ï¼Œæ”¾åˆ°5çš„å³å­©å­ä½ç½®ï¼Œæ­¤æ—¶ï¼Œä¸ºæƒ…æ™¯4iiaï¼Œå·¦æ—‹åå˜æˆäº†æƒ…æ™¯4iibï¼Œå˜è‰²å³æ—‹å³å¯å®Œæˆè½¬åŒ–ã€‚æ’å…¥3åä¸ºæƒ…æ™¯4iï¼Œå°†çˆ¶èŠ‚ç‚¹å’Œå”å”èŠ‚ç‚¹åŒæ—¶å˜è‰²å³å¯ï¼Œæ’å…¥6ä¸éœ€è¦è°ƒæ•´ï¼Œæ’å…¥7åä¸ºæƒ…æ™¯5iï¼Œå˜è‰²å³å¯ã€‚æ’å…¥19ä¸éœ€è¦è°ƒæ•´ï¼Œæ’å…¥32ï¼Œå˜æˆäº†5iibï¼Œå·¦æ—‹å˜è‰²å³å¯ï¼Œæ’å…¥24ï¼Œå˜æˆ5iiaï¼Œå³æ—‹åå˜æˆ5iï¼Œå˜è‰²å³å¯ï¼Œæœ€åæ’å…¥17ï¼Œå®Œç¾ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201807/1043143-20180717135851407-469306294.png&quot; alt=&quot;&quot; width=&quot;875&quot; height=&quot;309&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201807/1043143-20180717135859873-859397966.png&quot; alt=&quot;&quot; width=&quot;898&quot; height=&quot;274&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201807/1043143-20180717135905643-473262190.png&quot; alt=&quot;&quot; width=&quot;998&quot; height=&quot;270&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201807/1043143-20180718102117876-751491712.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201807/1043143-20180718102204970-108750217.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;ã€€ã€€çœ‹å›¾è¯´è¯æ˜¯ä¸æ˜¯å°±ç®€å•æ˜äº†äº†ï¼Œçœ‹åœ¨æˆ‘ç”»å›¾è¿™ä¹ˆè¾›è‹¦çš„ä»½ä¸Šï¼Œç‚¹ä¸ªå…³æ³¨ç»™ä¸ªèµå¯å¥½ï¼ˆæ»‘ç¨½ï¼‰ã€‚&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201807/1043143-20180719224328484-1527173379.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h2&gt;TreeNodeçš„æ’å…¥&lt;/h2&gt;
&lt;p&gt;ã€€ã€€äº†è§£äº†çº¢é»‘æ ‘çš„åˆ é™¤ä¹‹åï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸‹TreeNodeä¸­æ˜¯æ€æ ·ç”¨ä»£ç å®ç°çš„ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;48&quot;&gt;
&lt;pre&gt;
      &lt;span&gt;static&lt;/span&gt; &amp;lt;K,V&amp;gt; TreeNode&amp;lt;K,V&amp;gt; balanceInsertion(TreeNode&amp;lt;K,V&amp;gt;&lt;span&gt; root,
                                                    TreeNode&lt;/span&gt;&amp;lt;K,V&amp;gt;&lt;span&gt; x) {
            x.red &lt;/span&gt;= &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
            &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; (TreeNode&amp;lt;K,V&amp;gt;&lt;span&gt; xp, xpp, xppl, xppr;;) {&lt;br/&gt;//æƒ…æ™¯1ï¼šçˆ¶èŠ‚ç‚¹ä¸ºnull
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; ((xp = x.parent) == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                    x.red &lt;/span&gt;= &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
                    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; x;
                }&lt;br/&gt;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ //æƒ…æ™¯2ï¼Œ3ï¼šçˆ¶èŠ‚ç‚¹æ˜¯é»‘è‰²èŠ‚ç‚¹æˆ–è€…ç¥–çˆ¶èŠ‚ç‚¹ä¸ºnull
                &lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (!xp.red || (xpp = xp.parent) == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
                    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; root;&lt;br/&gt;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//æƒ…æ™¯4ï¼šæ’å…¥çš„èŠ‚ç‚¹çˆ¶èŠ‚ç‚¹å’Œç¥–çˆ¶èŠ‚ç‚¹éƒ½å­˜åœ¨ï¼Œå¹¶ä¸”å…¶çˆ¶èŠ‚ç‚¹æ˜¯ç¥–çˆ¶èŠ‚ç‚¹çš„å·¦èŠ‚ç‚¹
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (xp == (xppl =&lt;span&gt; xpp.left)) {&lt;br/&gt;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//æƒ…æ™¯4iï¼šæ’å…¥èŠ‚ç‚¹çš„å”å”èŠ‚ç‚¹æ˜¯çº¢è‰²
                    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; ((xppr = xpp.right) != &lt;span&gt;null&lt;/span&gt; &amp;amp;&amp;amp;&lt;span&gt; xppr.red) {
                        xppr.red &lt;/span&gt;= &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
                        xp.red &lt;/span&gt;= &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
                        xpp.red &lt;/span&gt;= &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
                        x &lt;/span&gt;=&lt;span&gt; xpp;
                    }&lt;br/&gt;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//æƒ…æ™¯4iiï¼šæ’å…¥èŠ‚ç‚¹çš„å”å”èŠ‚ç‚¹æ˜¯é»‘è‰²æˆ–ä¸å­˜åœ¨
                    &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {&lt;br/&gt;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//æƒ…æ™¯4iiaï¼šæ’å…¥èŠ‚ç‚¹æ˜¯å…¶çˆ¶èŠ‚ç‚¹çš„å³å­©å­
                        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (x ==&lt;span&gt; xp.right) {
                            root &lt;/span&gt;= rotateLeft(root, x =&lt;span&gt; xp);
                            xpp &lt;/span&gt;= (xp = x.parent) == &lt;span&gt;null&lt;/span&gt; ? &lt;span&gt;null&lt;/span&gt;&lt;span&gt; : xp.parent;
                        }&lt;br/&gt;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//æƒ…æ™¯4iibï¼šæ’å…¥èŠ‚ç‚¹æ˜¯å…¶çˆ¶èŠ‚ç‚¹çš„å·¦å­©å­
                        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (xp != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                            xp.red &lt;/span&gt;= &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
                            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (xpp != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                                xpp.red &lt;/span&gt;= &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
                                root &lt;/span&gt;=&lt;span&gt; rotateRight(root, xpp);
                            }
                        }
                    }
                }&lt;br/&gt;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ //æƒ…æ™¯5ï¼šæ’å…¥çš„èŠ‚ç‚¹çˆ¶èŠ‚ç‚¹å’Œç¥–çˆ¶èŠ‚ç‚¹éƒ½å­˜åœ¨ï¼Œå¹¶ä¸”å…¶çˆ¶èŠ‚ç‚¹æ˜¯ç¥–çˆ¶èŠ‚ç‚¹çš„å³èŠ‚ç‚¹
                &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {&lt;br/&gt;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//æƒ…æ™¯5iï¼šæ’å…¥èŠ‚ç‚¹çš„å”å”èŠ‚ç‚¹æ˜¯çº¢è‰²
                    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (xppl != &lt;span&gt;null&lt;/span&gt; &amp;amp;&amp;amp;&lt;span&gt; xppl.red) {
                        xppl.red &lt;/span&gt;= &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
                        xp.red &lt;/span&gt;= &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
                        xpp.red &lt;/span&gt;= &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
                        x &lt;/span&gt;=&lt;span&gt; xpp;
                    }&lt;br/&gt;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//æƒ…æ™¯5iiï¼šæ’å…¥èŠ‚ç‚¹çš„å”å”èŠ‚ç‚¹æ˜¯é»‘è‰²æˆ–ä¸å­˜åœ¨
                    &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {&lt;br/&gt;Â·ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//æƒ…æ™¯5iiaï¼šæ’å…¥èŠ‚ç‚¹æ˜¯å…¶çˆ¶èŠ‚ç‚¹çš„å·¦å­©å­ã€€
                        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (x ==&lt;span&gt; xp.left) {
                            root &lt;/span&gt;= rotateRight(root, x =&lt;span&gt; xp);
                            xpp &lt;/span&gt;= (xp = x.parent) == &lt;span&gt;null&lt;/span&gt; ? &lt;span&gt;null&lt;/span&gt;&lt;span&gt; : xp.parent;
                        }&lt;br/&gt;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€//æƒ…æ™¯5iibï¼šæ’å…¥èŠ‚ç‚¹æ˜¯å…¶çˆ¶èŠ‚ç‚¹çš„å³å­©å­
                        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (xp != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                            xp.red &lt;/span&gt;= &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
                            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (xpp != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                                xpp.red &lt;/span&gt;= &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
                                root &lt;/span&gt;=&lt;span&gt; rotateLeft(root, xpp);
                            }
                        }
                    }
                }
            }
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€å…¶å®å°±æ˜¯ä¸€æ¯›ä¸€æ ·çš„ï¼Œå¯¹å·å…¥åº§å³å¯ã€‚&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201807/1043143-20180719224344101-982941197.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h2&gt;çº¢é»‘æ ‘çš„åˆ é™¤&lt;/h2&gt;
&lt;p&gt;ã€€ã€€è®²å®Œæ’å…¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥è¯´è¯´åˆ é™¤ï¼Œåˆ é™¤çš„è¯ï¼Œæ¯”æ’å…¥è¿˜è¦å¤æ‚ä¸€ç‚¹ï¼Œè¯·å„ä½çœ‹å®˜å…ˆæ·±å‘¼å¸ï¼Œåšå¥½é˜…è¯»å‡†å¤‡ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä¹‹å‰å·²ç»è¯´è¿‡ï¼Œçº¢é»‘æ ‘æ˜¯ä¸€é¢—ç‰¹æ®Šçš„äºŒå‰æœç´¢æ ‘ï¼Œæ‰€ä»¥è¿›è¡Œåˆ é™¤æ“ä½œæ—¶ï¼Œå…¶å®æ˜¯å…ˆè¿›è¡ŒäºŒå‰æœç´¢æ ‘çš„åˆ é™¤ï¼Œç„¶åå†è¿›è¡Œè°ƒæ•´ã€‚æ‰€ä»¥ï¼Œå…¶å®è¿™é‡Œåˆ†ä¸ºä¸¤éƒ¨åˆ†å†…å®¹ï¼š1.äºŒå‰æœç´¢æ ‘çš„åˆ é™¤ï¼Œ2.çº¢é»‘æ ‘çš„åˆ é™¤è°ƒæ•´ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€äºŒå‰æœç´¢æ ‘çš„åˆ é™¤ä¸»è¦æœ‰è¿™ä¹ˆå‡ ç§æƒ…æ™¯ï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€æƒ…æ™¯1ï¼šå¾…åˆ é™¤çš„èŠ‚ç‚¹æ— å·¦å³å­©å­ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€æƒ…æ™¯2ï¼šå¾…åˆ é™¤çš„èŠ‚ç‚¹åªæœ‰å·¦å­©å­æˆ–è€…å³å­©å­ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€æƒ…æ™¯3ï¼šå¾…åˆ é™¤çš„èŠ‚ç‚¹æ—¢æœ‰å·¦å­©å­åˆæœ‰å³å­©å­ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€å¯¹äºæƒ…æ™¯1ï¼Œç›´æ¥åˆ é™¤å³å¯ï¼Œæƒ…æ™¯2ï¼Œåˆ™ç›´æ¥æŠŠè¯¥èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æŒ‡å‘å®ƒçš„å·¦å­©å­æˆ–è€…å³å­©å­å³å¯ï¼Œæƒ…æ™¯3ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œéœ€è¦å…ˆæ‰¾åˆ°å…¶å³å­æ ‘çš„æœ€å·¦å­©å­ï¼ˆæˆ–è€…å·¦å­æ ‘çš„æœ€å³å­©å­ï¼‰ï¼Œå³å·¦ï¼ˆå³ï¼‰å­æ ‘ä¸­åºéå†æ—¶çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç„¶åå°†å…¶ä¸å¾…åˆ é™¤çš„èŠ‚ç‚¹äº’æ¢ï¼Œæœ€åå†åˆ é™¤è¯¥èŠ‚ç‚¹ï¼ˆå¦‚æœæœ‰å³å­æ ‘ï¼Œåˆ™å³å­æ ‘ä¸Šä½ï¼‰ã€‚æ€»ä¹‹ï¼Œå°±æ˜¯å…ˆæ‰¾åˆ°å®ƒçš„æ›¿ä»£è€…ï¼Œæ‰¾åˆ°ä¹‹åæ›¿æ¢è¿™ä¸ªè¦åˆ é™¤çš„èŠ‚ç‚¹ï¼Œç„¶åå†æŠŠè¿™ä¸ªèŠ‚ç‚¹çœŸæ­£åˆ é™¤æ‰ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€å…¶å®äºŒå‰æœç´¢æ ‘çš„åˆ é™¤æ€»ä½“æ¥è¯´è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œåˆ é™¤å®Œä¹‹åï¼Œå¦‚æœæ›¿ä»£è€…æ˜¯çº¢è‰²èŠ‚ç‚¹ï¼Œåˆ™ä¸éœ€è¦è°ƒæ•´ï¼Œå¦‚æœæ˜¯é»‘è‰²èŠ‚ç‚¹ï¼Œåˆ™ä¼šå¯¼è‡´å·¦å­æ ‘å’Œå³å­æ ‘è·¯å¾„ä¸­é»‘è‰²èŠ‚ç‚¹æ•°é‡ä¸ä¸€è‡´ï¼Œéœ€è¦è¿›è¡Œçº¢é»‘æ ‘çš„è°ƒæ•´ï¼Œè·Ÿä¸Šé¢ä¸€æ ·ï¼Œæ›¿ä»£èŠ‚ç‚¹ä¸ºå…¶çˆ¶èŠ‚ç‚¹çš„å·¦å­©å­ä¸å³å­©å­çš„æƒ…å†µç±»ä¼¼ï¼Œæ‰€ä»¥è¿™é‡Œåªè¯´å…¶ä¸ºå·¦å­©å­çš„æƒ…æ™¯ï¼ˆPS:ä¸Šä¸€æ­¥çš„å¯»æ‰¾æ›¿æ¢èŠ‚ç‚¹ä½¿ç”¨çš„æ˜¯å³å­æ ‘çš„æœ€å·¦èŠ‚ç‚¹ï¼Œæ‰€ä»¥è¯¥èŠ‚ç‚¹å¦‚æœæœ‰å­©å­ï¼Œåªèƒ½æ˜¯å³å­©å­ï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€æƒ…æ™¯1ï¼šåªæœ‰å³å­©å­ä¸”ä¸ºçº¢è‰²ï¼Œç›´æ¥ç”¨å³å­©å­æ›¿æ¢è¯¥èŠ‚ç‚¹ç„¶åå˜æˆé»‘è‰²å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201807/1043143-20180719092859077-455815721.png&quot; alt=&quot;&quot; width=&quot;615&quot; height=&quot;330&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€ï¼ˆDä»£è¡¨æ›¿ä»£èŠ‚ç‚¹ï¼Œå³è¦è¢«åˆ é™¤çš„èŠ‚ç‚¹ï¼Œä¹‹å‰åœ¨ç»è¿‡äºŒå‰æœç´¢æ ‘çš„åˆ é™¤åï¼ŒDèŠ‚ç‚¹å…¶å®å·²ç»è¢«åˆ é™¤äº†ï¼Œè¿™é‡Œä¸ºäº†æ–¹ä¾¿ç†è§£è¿™ä¸ªå˜åŒ–è¿‡ç¨‹ï¼Œæ‰€ä»¥æŠŠè¿™ä¸ªèŠ‚ç‚¹ä¹Ÿç”»å‡ºæ¥äº†ï¼Œæ‰€ä»¥å½“å‰çš„åˆå§‹çŠ¶æ€æ˜¯å¾…åˆ é™¤èŠ‚ç‚¹ä¸å…¶æ›¿æ¢èŠ‚ç‚¹äº’æ¢ä½ç½®ä¸é¢œè‰²ä¹‹åçš„çŠ¶æ€ï¼‰&lt;/p&gt;
&lt;p&gt;ã€€ã€€æƒ…æ™¯2ï¼šåªæœ‰å³å­©å­ä¸”ä¸ºé»‘è‰²ï¼Œé‚£ä¹ˆåˆ é™¤è¯¥èŠ‚ç‚¹ä¼šå¯¼è‡´çˆ¶èŠ‚ç‚¹çš„å·¦å­æ ‘è·¯å¾„ä¸Šé»‘è‰²èŠ‚ç‚¹å‡ä¸€ï¼Œæ­¤æ—¶åªèƒ½å»å€ŸåŠ©å³å­æ ‘ï¼Œä»å³å­æ ‘ä¸­å€Ÿä¸€ä¸ªçº¢è‰²èŠ‚ç‚¹è¿‡æ¥å³å¯ï¼Œå…·ä½“å–å†³äºå³å­æ ‘çš„æƒ…å†µï¼Œè¿™é‡Œåˆåˆ†æˆä¸¤ç§ï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€i.å…„å¼ŸèŠ‚ç‚¹æ˜¯çº¢è‰²ï¼Œåˆ™æ­¤æ—¶çˆ¶èŠ‚ç‚¹æ˜¯é»‘è‰²ï¼Œä¸”å…„å¼ŸèŠ‚ç‚¹è‚¯å®šæœ‰ä¸¤ä¸ªå­©å­ï¼Œä¸”å…„å¼ŸèŠ‚ç‚¹çš„å·¦å³å­æ ‘è·¯å¾„ä¸Šå‡æœ‰ä¸¤ä¸ªé»‘è‰²èŠ‚ç‚¹ï¼Œæ­¤æ—¶åªéœ€å°†å…„å¼ŸèŠ‚ç‚¹ä¸çˆ¶èŠ‚ç‚¹é¢œè‰²äº’æ¢ï¼Œç„¶åå°†çˆ¶èŠ‚ç‚¹å·¦æ—‹ï¼Œå·¦æ—‹åï¼Œå…„å¼ŸèŠ‚ç‚¹çš„å·¦å­æ ‘SLæŒ‚åˆ°äº†çˆ¶èŠ‚ç‚¹pçš„å³å­©å­ä½ç½®ï¼Œè¿™æ—¶ä¼šå¯¼è‡´pçš„å³å­æ ‘è·¯å¾„ä¸Šçš„é»‘è‰²èŠ‚ç‚¹æ¯”å·¦å­æ ‘å¤šä¸€ï¼Œæ­¤æ—¶å†SLç½®ä¸ºçº¢è‰²å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201807/1043143-20180719214140303-507970717.png&quot; alt=&quot;&quot;/&gt;Â &lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ii.å…„å¼ŸèŠ‚ç‚¹æ˜¯é»‘è‰²ï¼Œé‚£ä¹ˆå°±åªèƒ½æ‰“å®ƒå­©å­çš„ä¸»æ„äº†ï¼Œè¿™é‡Œä¸»è¦å…³æ³¨è¿œä¾„å­ï¼ˆå…„å¼ŸèŠ‚ç‚¹çš„å³å­©å­ï¼Œå³SRï¼‰çš„é¢œè‰²æƒ…å†µï¼Œè¿™é‡Œåˆ†æˆä¸¤ç§æƒ…å†µï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€a.è¿œä¾„å­SRæ˜¯é»‘è‰²ï¼Œè¿‘ä¾„å­ä»»æ„ï¼ˆç™½è‰²ä»£è¡¨é¢œè‰²å¯ä¸ºä»»æ„é¢œè‰²ï¼‰ï¼Œåˆ™å…ˆå°†Sè½¬ä¸ºçº¢è‰²ï¼Œç„¶åå³æ—‹ï¼Œå†å°†SLæ¢æˆPèŠ‚ç‚¹é¢œè‰²ï¼ŒPæ¶‚æˆé»‘è‰²ï¼ŒSä¹Ÿæ¶‚æˆé»‘è‰²ï¼Œå†è¿›è¡Œå·¦æ—‹å³å¯ã€‚å…¶å®ç®€å•è¯´å°±æ˜¯SLä¸Šä½ï¼Œæ›¿æ¢çˆ¶èŠ‚ç‚¹ä½ç½®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201807/1043143-20180719214715292-764463825.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€b.è¿œä¾„å­SRä¸ºçº¢è‰²ï¼Œè¿‘ä¾„å­ä»»æ„ï¼ˆè¯¥å­æ ‘è·¯å¾„ä¸­æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªé»‘è‰²èŠ‚ç‚¹ï¼‰ï¼Œåˆ™å…ˆå°†å…„å¼ŸèŠ‚ç‚¹ä¸çˆ¶èŠ‚ç‚¹é¢œè‰²äº’æ¢ï¼Œå°†SRæ¶‚æˆé»‘è‰²ï¼Œå†å°†çˆ¶èŠ‚ç‚¹å·¦æ—‹å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;Â &lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201807/1043143-20180719214928467-1870569067.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€emmmm...å¥½åƒä¹Ÿä¸æ˜¯å¾ˆéº»çƒ¦å˜›ï¼ˆé€ƒï¼‰ã€‚&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201807/1043143-20180719224357701-1504779388.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h2&gt;TreeNodeçš„åˆ é™¤èŠ‚ç‚¹&lt;/h2&gt;
&lt;p&gt;ã€€ã€€TreeNodeåˆ é™¤èŠ‚ç‚¹å…¶å®ä¹Ÿæ˜¯ä¸¤æ­¥èµ°ï¼Œå…ˆè¿›è¡ŒäºŒå‰æœç´¢æ ‘çš„åˆ é™¤ï¼Œç„¶åå†è¿›è¡Œçº¢é»‘æ ‘çš„è°ƒæ•´ï¼Œè·Ÿä¹‹å‰çš„æƒ…å†µåˆ†ææ˜¯ä¸€è‡´çš„ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;43&quot;&gt;
&lt;pre&gt;
&lt;span&gt;final&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; removeTreeNode(HashMap&amp;lt;K,V&amp;gt; map, Node&amp;lt;K,V&amp;gt;[] tab, &lt;span&gt;boolean&lt;/span&gt;&lt;span&gt; movable) {

     ......

     &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;pæ˜¯å¾…åˆ é™¤èŠ‚ç‚¹ï¼Œreplacementç”¨äºåç»­çš„çº¢é»‘æ ‘è°ƒæ•´ï¼ŒæŒ‡å‘çš„æ˜¯pæˆ–è€…pçš„ç»§æ‰¿è€…ã€‚
     &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å¦‚æœpæ˜¯å¶å­èŠ‚ç‚¹ï¼Œp==replacementï¼Œå¦åˆ™replacementä¸ºpçš„å³å­æ ‘ä¸­æœ€å·¦èŠ‚ç‚¹&lt;/span&gt;
     &lt;span&gt;if&lt;/span&gt; (replacement !=&lt;span&gt; p) {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è‹¥pä¸æ˜¯å¶å­èŠ‚ç‚¹ï¼Œåˆ™è®©replacementçš„çˆ¶èŠ‚ç‚¹æŒ‡å‘pçš„çˆ¶èŠ‚ç‚¹&lt;/span&gt;
        TreeNode&amp;lt;K,V&amp;gt; pp = replacement.parent =&lt;span&gt; p.parent;
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (pp == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
            root &lt;/span&gt;=&lt;span&gt; replacement;
        &lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (p ==&lt;span&gt; pp.left)
            pp.left &lt;/span&gt;=&lt;span&gt; replacement;
        &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;
            pp.right &lt;/span&gt;=&lt;span&gt; replacement;
        p.left &lt;/span&gt;= p.right = p.parent = &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
    }

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è‹¥å¾…åˆ é™¤çš„èŠ‚ç‚¹pæ—¶çº¢è‰²çš„ï¼Œåˆ™æ ‘å¹³è¡¡æœªè¢«ç ´åï¼Œæ— éœ€è¿›è¡Œè°ƒæ•´ã€‚
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å¦åˆ™åˆ é™¤èŠ‚ç‚¹åéœ€è¦è¿›è¡Œè°ƒæ•´&lt;/span&gt;
    TreeNode&amp;lt;K,V&amp;gt; r = p.red ?&lt;span&gt; root : balanceDeletion(root, replacement);

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;pä¸ºå¶å­èŠ‚ç‚¹ï¼Œåˆ™ç›´æ¥å°†pä»æ ‘ä¸­æ¸…é™¤&lt;/span&gt;
    &lt;span&gt;if&lt;/span&gt; (replacement == p) {  &lt;span&gt;//&lt;/span&gt;&lt;span&gt; detach&lt;/span&gt;
        TreeNode&amp;lt;K,V&amp;gt; pp =&lt;span&gt; p.parent;
        p.parent &lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (pp != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (p ==&lt;span&gt; pp.left)
                pp.left &lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
            &lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (p ==&lt;span&gt; pp.right)
                pp.right &lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
        }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€éº»çƒ¦çš„åœ°æ–¹å°±åœ¨åˆ é™¤èŠ‚ç‚¹åçš„è°ƒæ•´äº†ï¼Œæ‰€æœ‰é€»è¾‘éƒ½åœ¨balanceDeletionå‡½æ•°é‡Œï¼Œä¸¤ä¸ªå‚æ•°åˆ†åˆ«è¡¨ç¤ºæ ¹èŠ‚ç‚¹å’Œåˆ é™¤èŠ‚ç‚¹çš„ç»§æ‰¿è€…ï¼Œæ¥çœ‹çœ‹å®ƒçš„å…·ä½“å®ç°ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;53&quot;&gt;
&lt;pre&gt;
&lt;span&gt;static&lt;/span&gt; &amp;lt;K,V&amp;gt; TreeNode&amp;lt;K,V&amp;gt; balanceDeletion(TreeNode&amp;lt;K,V&amp;gt; root, TreeNode&amp;lt;K,V&amp;gt;&lt;span&gt; x) {
    &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; (TreeNode&amp;lt;K,V&amp;gt;&lt;span&gt; xp, xpl, xpr;;)  {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;xä¸ºç©ºæˆ–xä¸ºæ ¹èŠ‚ç‚¹ï¼Œç›´æ¥è¿”å›&lt;/span&gt;
        &lt;span&gt;if&lt;/span&gt; (x == &lt;span&gt;null&lt;/span&gt; || x ==&lt;span&gt; root)
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; root; 
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;xä¸ºæ ¹èŠ‚ç‚¹ï¼ŒæŸ“æˆé»‘è‰²ï¼Œç›´æ¥è¿”å›ï¼ˆå› ä¸ºè°ƒæ•´è¿‡åï¼Œrootå¹¶ä¸ä¸€å®šæŒ‡å‘åˆ é™¤æ“ä½œè¿‡åçš„æ ¹èŠ‚ç‚¹ï¼Œå¦‚æœä¹‹å‰åˆ é™¤çš„æ˜¯rootèŠ‚ç‚¹ï¼Œåˆ™xå°†æˆä¸ºæ–°çš„æ ¹èŠ‚ç‚¹ï¼‰&lt;/span&gt;
        &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; ((xp = x.parent) == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
            x.red &lt;/span&gt;= &lt;span&gt;false&lt;/span&gt;&lt;span&gt;; 
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; x;
        }
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å¦‚æœxä¸ºçº¢è‰²ï¼Œåˆ™æ— éœ€è°ƒæ•´ï¼Œè¿”å›&lt;/span&gt;
        &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt;&lt;span&gt; (x.red) {
            x.red &lt;/span&gt;= &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; root; 
        }
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;xä¸ºå…¶çˆ¶èŠ‚ç‚¹çš„å·¦å­©å­&lt;/span&gt;
        &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; ((xpl = xp.left) ==&lt;span&gt; x) {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å¦‚æœå®ƒæœ‰çº¢è‰²çš„å…„å¼ŸèŠ‚ç‚¹xprï¼Œé‚£ä¹ˆå®ƒçš„çˆ¶äº²èŠ‚ç‚¹xpä¸€å®šæ˜¯é»‘è‰²èŠ‚ç‚¹&lt;/span&gt;
            &lt;span&gt;if&lt;/span&gt; ((xpr = xp.right) != &lt;span&gt;null&lt;/span&gt; &amp;amp;&amp;amp;&lt;span&gt; xpr.red) { 
                xpr.red &lt;/span&gt;= &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
                xp.red &lt;/span&gt;= &lt;span&gt;true&lt;/span&gt;&lt;span&gt;; 
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å¯¹çˆ¶èŠ‚ç‚¹xpåšå·¦æ—‹è½¬&lt;/span&gt;
                root =&lt;span&gt; rotateLeft(root, xp); 
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;é‡æ–°å°†xpæŒ‡å‘xçš„çˆ¶èŠ‚ç‚¹ï¼ŒxpræŒ‡å‘xpæ–°çš„å³å­©å­&lt;/span&gt;
                xpr = (xp = x.parent) == &lt;span&gt;null&lt;/span&gt; ? &lt;span&gt;null&lt;/span&gt;&lt;span&gt; : xp.right; 
            }
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å¦‚æœxprä¸ºç©ºï¼Œåˆ™å‘ä¸Šç»§ç»­è°ƒæ•´ï¼Œå°†xçš„çˆ¶èŠ‚ç‚¹xpä½œä¸ºæ–°çš„xç»§ç»­å¾ªç¯&lt;/span&gt;
            &lt;span&gt;if&lt;/span&gt; (xpr == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
                x &lt;/span&gt;=&lt;span&gt; xp; 
            &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
                &lt;/span&gt;&lt;span&gt;//slå’Œsråˆ†åˆ«ä¸ºå…¶è¿‘ä¾„å­å’Œè¿œä¾„å­&lt;/span&gt;
                TreeNode&amp;lt;K,V&amp;gt; sl = xpr.left, sr =&lt;span&gt; xpr.right;&lt;br/&gt;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; ((sr == &lt;span&gt;null&lt;/span&gt; || !sr.red) &amp;amp;&amp;amp;&lt;span&gt;
                    (sl &lt;/span&gt;== &lt;span&gt;null&lt;/span&gt; || !&lt;span&gt;sl.red)) {
                    xpr.red &lt;/span&gt;= &lt;span&gt;true&lt;/span&gt;; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;è‹¥slå’Œsréƒ½ä¸ºé»‘è‰²æˆ–è€…ä¸å­˜åœ¨ï¼Œå³xpræ²¡æœ‰çº¢è‰²å­©å­ï¼Œåˆ™å°†xpræŸ“çº¢&lt;/span&gt;
                    x = xp; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;æœ¬è½®ç»“æŸï¼Œç»§ç»­å‘ä¸Šå¾ªç¯&lt;/span&gt;
&lt;span&gt;                }
                &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
                    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å¦åˆ™çš„è¯ï¼Œå°±éœ€è¦è¿›ä¸€æ­¥è°ƒæ•´&lt;/span&gt;
                    &lt;span&gt;if&lt;/span&gt; (sr == &lt;span&gt;null&lt;/span&gt; || !&lt;span&gt;sr.red) { 
                        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (sl != &lt;span&gt;null&lt;/span&gt;) &lt;span&gt;//&lt;/span&gt;&lt;span&gt;è‹¥å·¦å­©å­ä¸ºçº¢ï¼Œå³å­©å­ä¸å­˜åœ¨æˆ–ä¸ºé»‘&lt;/span&gt;
                            sl.red = &lt;span&gt;false&lt;/span&gt;; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;å·¦å­©å­æŸ“é»‘&lt;/span&gt;
                        xpr.red = &lt;span&gt;true&lt;/span&gt;; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;å°†xpræŸ“çº¢&lt;/span&gt;
                        root = rotateRight(root, xpr); &lt;span&gt;//å³æ—‹&lt;/span&gt;
                        xpr = (xp = x.parent) == &lt;span&gt;null&lt;/span&gt; ?
                            &lt;span&gt;null&lt;/span&gt; : xp.right;  &lt;span&gt;//&lt;/span&gt;&lt;span&gt;å³æ—‹åï¼ŒxpræŒ‡å‘xpçš„æ–°å³å­©å­ï¼Œå³ä¸Šä¸€æ­¥ä¸­çš„sl&lt;/span&gt;
&lt;span&gt;                    }
                    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (xpr != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                        xpr.red &lt;/span&gt;= (xp == &lt;span&gt;null&lt;/span&gt;) ? &lt;span&gt;false&lt;/span&gt; : xp.red; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;xpræŸ“æˆè·Ÿçˆ¶èŠ‚ç‚¹ä¸€è‡´çš„é¢œè‰²ï¼Œä¸ºåé¢çˆ¶èŠ‚ç‚¹xpçš„å·¦æ—‹åšå‡†å¤‡&lt;/span&gt;
                        &lt;span&gt;if&lt;/span&gt; ((sr = xpr.right) != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
                            sr.red &lt;/span&gt;= &lt;span&gt;false&lt;/span&gt;; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;xpræ–°çš„å³å­©å­æŸ“é»‘ï¼Œé˜²æ­¢å‡ºç°ä¸¤ä¸ªçº¢è‰²ç›¸è¿&lt;/span&gt;
&lt;span&gt;                    }
                    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (xp != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                        xp.red &lt;/span&gt;= &lt;span&gt;false&lt;/span&gt;; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;å°†xpæŸ“é»‘ï¼Œå¹¶å¯¹å…¶å·¦æ—‹ï¼Œè¿™æ ·å°±èƒ½ä¿è¯è¢«åˆ é™¤çš„Xæ‰€åœ¨çš„è·¯å¾„åˆå¤šäº†ä¸€ä¸ªé»‘è‰²èŠ‚ç‚¹ï¼Œä»è€Œè¾¾åˆ°æ¢å¤å¹³è¡¡çš„ç›®çš„&lt;/span&gt;
                        root =&lt;span&gt; rotateLeft(root, xp);
                    }
                    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;åˆ°æ­¤è°ƒæ•´å·²ç»å®Œæ¯•ï¼Œè¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯åå°†ç›´æ¥é€€å‡º&lt;/span&gt;
                    x =&lt;span&gt; root;
                }
            }
        }
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;xä¸ºå…¶çˆ¶èŠ‚ç‚¹çš„å³å­©å­ï¼Œè·Ÿä¸Šé¢ç±»ä¼¼&lt;/span&gt;
        &lt;span&gt;else&lt;/span&gt; { &lt;span&gt;//&lt;/span&gt;&lt;span&gt; symmetric&lt;/span&gt;
            &lt;span&gt;if&lt;/span&gt; (xpl != &lt;span&gt;null&lt;/span&gt; &amp;amp;&amp;amp;&lt;span&gt; xpl.red) {
                xpl.red &lt;/span&gt;= &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
                xp.red &lt;/span&gt;= &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
                root &lt;/span&gt;=&lt;span&gt; rotateRight(root, xp);
                xpl &lt;/span&gt;= (xp = x.parent) == &lt;span&gt;null&lt;/span&gt; ? &lt;span&gt;null&lt;/span&gt;&lt;span&gt; : xp.left;
            }
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (xpl == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
                x &lt;/span&gt;=&lt;span&gt; xp;
            &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
                TreeNode&lt;/span&gt;&amp;lt;K,V&amp;gt; sl = xpl.left, sr =&lt;span&gt; xpl.right;
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; ((sl == &lt;span&gt;null&lt;/span&gt; || !sl.red) &amp;amp;&amp;amp;&lt;span&gt;
                    (sr &lt;/span&gt;== &lt;span&gt;null&lt;/span&gt; || !&lt;span&gt;sr.red)) {
                    xpl.red &lt;/span&gt;= &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
                    x &lt;/span&gt;=&lt;span&gt; xp;
                }
                &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
                    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (sl == &lt;span&gt;null&lt;/span&gt; || !&lt;span&gt;sl.red) {
                        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (sr != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
                            sr.red &lt;/span&gt;= &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
                        xpl.red &lt;/span&gt;= &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
                        root &lt;/span&gt;=&lt;span&gt; rotateLeft(root, xpl);
                        xpl &lt;/span&gt;= (xp = x.parent) == &lt;span&gt;null&lt;/span&gt; ?
                            &lt;span&gt;null&lt;/span&gt;&lt;span&gt; : xp.left;
                    }
                    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (xpl != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                        xpl.red &lt;/span&gt;= (xp == &lt;span&gt;null&lt;/span&gt;) ? &lt;span&gt;false&lt;/span&gt;&lt;span&gt; : xp.red;
                        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; ((sl = xpl.left) != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
                            sl.red &lt;/span&gt;= &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
                    }
                    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (xp != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                        xp.red &lt;/span&gt;= &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
                        root &lt;/span&gt;=&lt;span&gt; rotateRight(root, xp);
                    }
                    x &lt;/span&gt;=&lt;span&gt; root;
                }
            }
        }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€å‘¼ã€‚ã€‚ã€‚ç»ˆäºã€‚ã€‚é…é…¿äº†å¥½å¤šå¤©çš„ä¸€ç¯‡æ–‡ç« æ€»ç®—æ˜¯å†™å®Œäº†ï¼Œä¸ºäº†å°½é‡ç¡®è®¤è½¬æ¢çš„å‡†ç¡®æ€§ï¼Œæ‰¾äº†å¾ˆå¤šèµ„æ–™è¿›è¡Œå‚è€ƒï¼Œè¿‡ç¨‹ä¸­èŠ±äº†ä¸å°‘æ—¶é—´ï¼Œæ›¾å¤šæ¬¡å‡†å¤‡æ”¾å¼ƒã€‚ã€‚ã€‚ä¸è¿‡æ€»ç®—æ˜¯æ²¡æœ‰æ­»åœ¨å¨˜èƒé‡Œï¼Œä¹Ÿç®—æ˜¯å®Œæˆäº†ä¸€æ¡©å¿ƒäº‹ï¼Œå¼€å¿ƒã€‚&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201807/1043143-20180719224418617-1782235223.png&quot; alt=&quot;&quot;/&gt;.&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä¹‹åè¿˜ä¼šç»§ç»­æ›´æ–°ï¼Œæ¬¢è¿å¤§å®¶ç»§ç»­å…³æ³¨ã€‚ä¹Ÿæ¬¢è¿å¤§å®¶å‰æ¥æ‰“è„¸&lt;img src=&quot;https://images2018.cnblogs.com/blog/1043143/201807/1043143-20180719224705363-1506878908.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Thu, 19 Jul 2018 14:49:00 +0000</pubDate>
<dc:creator>å¼—å…°å…‹çš„çŒ«</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/mfrank/p/9227097.html</dc:identifier>
</item>
<item>
<title>å…³äºJavaScriptä¸­thisçš„è½¯ç»‘å®š - é…¥é£</title>
<link>http://www.cnblogs.com/su-feng/p/9338911.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/su-feng/p/9338911.html</guid>
<description>&lt;h3 class=&quot;heading&quot; data-id=&quot;heading-0&quot;&gt;é¦–å…ˆï¼Œä»€ä¹ˆæ˜¯è½¯ç»‘å®šï¼Ÿ&lt;/h3&gt;
&lt;p&gt;æ‰€è°“è½¯ç»‘å®šï¼Œæ˜¯å’Œç¡¬ç»‘å®šç›¸å¯¹åº”çš„ä¸€ä¸ªè¯ï¼Œåœ¨è¯¦ç»†è§£é‡Šè½¯ç»‘å®šä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ç¡¬ç»‘å®šã€‚åœ¨JavaScriptä¸­ï¼Œthisçš„ç»‘å®šæ˜¯åŠ¨æ€çš„ï¼Œåœ¨å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™ç»‘å®šï¼Œå®ƒæŒ‡å‘ä»€ä¹ˆå®Œå…¨å–å†³äºå‡½æ•°åœ¨å“ªé‡Œè°ƒç”¨ï¼Œæƒ…å†µæ¯”è¾ƒå¤æ‚ï¼Œå…‰æ˜¯ç»‘å®šè§„åˆ™å°±æœ‰é»˜è®¤ç»‘å®šã€éšå¼ç»‘å®šã€æ˜¾å¼ç»‘å®šã€newç»‘å®šç­‰ï¼Œè€Œç¡¬ç»‘å®šæ˜¯æ˜¾å¼ç»‘å®šä¸­çš„ä¸€ç§ï¼Œé€šå¸¸æƒ…å†µä¸‹æ˜¯é€šè¿‡è°ƒç”¨å‡½æ•°çš„Â &lt;span class=&quot;cnblogs_code&quot;&gt;apply()&lt;/span&gt;Â ã€Â &lt;span class=&quot;cnblogs_code&quot;&gt;call()&lt;/span&gt;Â æˆ–è€…ES5é‡Œæä¾›çš„Â &lt;span class=&quot;cnblogs_code&quot;&gt;bind()&lt;/span&gt;Â æ–¹æ³•æ¥å®ç°ç¡¬ç»‘å®šçš„ã€‚&lt;/p&gt;
&lt;h3 class=&quot;heading&quot; data-id=&quot;heading-1&quot;&gt;ç¡¬ç»‘å®šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä¸ºä»€ä¹ˆéœ€è¦è½¯ç»‘å®š&lt;/h3&gt;
&lt;p&gt;ä¸Šè¿°ä¸‰ä¸ªæ–¹æ³•å¥½æ˜¯å¥½ï¼Œå¯ä»¥æŒ‰ç…§è‡ªå·±çš„æƒ³æ³•å°†å‡½æ•°çš„thiså¼ºåˆ¶ç»‘å®šåˆ°æŒ‡å®šçš„å¯¹è±¡ä¸Šï¼ˆé™¤äº†ä½¿ç”¨newç»‘å®šå¯ä»¥æ”¹å˜ç¡¬ç»‘å®šå¤–ï¼‰ï¼Œä½†æ˜¯ç¡¬ç»‘å®šå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ä¼šé™ä½å‡½æ•°çš„çµæ´»æ€§ï¼Œå¹¶ä¸”åœ¨ç¡¬ç»‘å®šä¹‹åæ— æ³•å†ä½¿ç”¨éšå¼ç»‘å®šæˆ–è€…æ˜¾å¼ç»‘å®šæ¥ä¿®æ”¹thisçš„æŒ‡å‘ã€‚&lt;/p&gt;
&lt;div readability=&quot;26.708342909676&quot;&gt;
&lt;p&gt;åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¢«ç§°ä¸ºè½¯ç»‘å®šçš„å®ç°å°±å‡ºç°äº†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡è½¯ç»‘å®šï¼Œæˆ‘ä»¬å¸Œæœ›thisåœ¨é»˜è®¤æƒ…å†µä¸‹ä¸å†æŒ‡å‘å…¨å±€å¯¹è±¡ï¼ˆéä¸¥æ ¼æ¨¡å¼ï¼‰æˆ–Â &lt;span class=&quot;cnblogs_code&quot;&gt;undefined&lt;/span&gt;Â ï¼ˆä¸¥æ ¼æ¨¡å¼ï¼‰ï¼Œè€Œæ˜¯æŒ‡å‘ä¸¤è€…ä¹‹å¤–çš„ä¸€ä¸ªå¯¹è±¡ï¼ˆè¿™ç‚¹å’Œç¡¬ç»‘å®šçš„æ•ˆæœç›¸åŒï¼‰ï¼Œä½†æ˜¯åŒæ—¶åˆä¿ç•™äº†éšå¼ç»‘å®šå’Œæ˜¾å¼ç»‘å®šåœ¨ä¹‹åå¯ä»¥ä¿®æ”¹thisæŒ‡å‘çš„èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;h3 class=&quot;heading&quot; data-id=&quot;heading-2&quot;&gt;è½¯ç»‘å®šçš„å…·ä½“å®ç°&lt;/h3&gt;
&lt;p&gt;åœ¨è¿™é‡Œï¼Œæˆ‘ç”¨çš„æ˜¯ã€Šä½ ä¸çŸ¥é“çš„JavaScript ä¸Šã€‹ä¸­çš„è½¯ç»‘å®šçš„ä»£ç å®ç°ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;if&lt;/span&gt;(!&lt;span&gt;Function.prototype.softBind){
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt;     Function.prototype.softBind=&lt;span&gt;function&lt;/span&gt;&lt;span&gt;(obj){
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt;         &lt;span&gt;var&lt;/span&gt; fn=&lt;span&gt;this&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt;         &lt;span&gt;var&lt;/span&gt; args=Array.prototype.slice.call(arguments,1&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt;         &lt;span&gt;var&lt;/span&gt; bound=&lt;span&gt;function&lt;/span&gt;&lt;span&gt;(){
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt;&lt;span&gt; fn.apply(
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt;                 (!&lt;span&gt;this&lt;/span&gt;||&lt;span&gt;this&lt;/span&gt;===(window||global))?obj:&lt;span&gt;this&lt;/span&gt;&lt;span&gt;,
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt; &lt;span&gt;                args.concat.apply(args,arguments)
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt; &lt;span&gt;            );
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt; &lt;span&gt;        };
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;         bound.prototype=&lt;span&gt;Object.create(fn.prototype);
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; bound;
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt; &lt;span&gt;    };
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹æ•ˆæœï¼Œä¹‹åå†è®¨è®ºå®ƒçš„å®ç°ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;function&lt;/span&gt;&lt;span&gt; foo(){
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt;     console.log(&quot;name: &quot;+&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.name);
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; 
&lt;span&gt; 5&lt;/span&gt; &lt;span&gt;var&lt;/span&gt; obj1={name:&quot;obj1&quot;&lt;span&gt;},
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt;     obj2={name:&quot;obj2&quot;&lt;span&gt;},
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt;     obj3={name:&quot;obj3&quot;&lt;span&gt;};
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt; 
&lt;span&gt; 9&lt;/span&gt; &lt;span&gt;var&lt;/span&gt; fooOBJ=&lt;span&gt;foo.softBind(obj1);
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt; fooOBJ();&lt;span&gt;//&lt;/span&gt;&lt;span&gt;&quot;name: obj1&quot; åœ¨è¿™é‡Œè½¯ç»‘å®šç”Ÿæ•ˆäº†ï¼ŒæˆåŠŸä¿®æ”¹äº†thisçš„æŒ‡å‘ï¼Œå°†thisç»‘å®šåˆ°äº†obj1ä¸Š&lt;/span&gt;
&lt;span&gt;11&lt;/span&gt; 
&lt;span&gt;12&lt;/span&gt; obj2.foo=&lt;span&gt;foo.softBind(obj1);
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt; obj2.foo();&lt;span&gt;//&lt;/span&gt;&lt;span&gt;&quot;name: obj2&quot; åœ¨è¿™é‡Œè½¯ç»‘å®šçš„thisæŒ‡å‘æˆåŠŸè¢«éšå¼ç»‘å®šä¿®æ”¹äº†ï¼Œç»‘å®šåˆ°äº†obj2ä¸Š&lt;/span&gt;
&lt;span&gt;14&lt;/span&gt; 
&lt;span&gt;15&lt;/span&gt; fooOBJ.call(obj3);&lt;span&gt;//&lt;/span&gt;&lt;span&gt;&quot;name: obj3&quot; åœ¨è¿™é‡Œè½¯ç»‘å®šçš„thisæŒ‡å‘æˆåŠŸè¢«ç¡¬ç»‘å®šä¿®æ”¹äº†ï¼Œç»‘å®šåˆ°äº†obj3ä¸Š&lt;/span&gt;
&lt;span&gt;16&lt;/span&gt; 
&lt;span&gt;17&lt;/span&gt; setTimeout(obj2.foo,1000);&lt;span&gt;//&lt;/span&gt;&lt;span&gt;&quot;name: obj1&quot;&lt;/span&gt;
&lt;span&gt;18&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt;å›è°ƒå‡½æ•°ç›¸å½“äºä¸€ä¸ªéšå¼çš„ä¼ å‚ï¼Œå¦‚æœæ²¡æœ‰è½¯ç»‘å®šçš„è¯ï¼Œè¿™é‡Œå°†ä¼šåº”ç”¨é»˜è®¤ç»‘å®šå°†thisç»‘å®šåˆ°å…¨å±€ç¯
&lt;/span&gt;&lt;span&gt;19&lt;/span&gt; &lt;span&gt;å¢ƒä¸Šï¼Œä½†æœ‰è½¯ç»‘å®šï¼Œè¿™é‡Œthisè¿˜æ˜¯æŒ‡å‘obj1&lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°è½¯ç»‘å®šç”Ÿæ•ˆäº†ã€‚ä¸‹é¢æˆ‘ä»¬æ¥å…·ä½“çœ‹ä¸€ä¸‹Â &lt;span class=&quot;cnblogs_code&quot;&gt;softBind()&lt;/span&gt;Â çš„å®ç°ã€‚&lt;/p&gt;

&lt;div readability=&quot;13.250491545419&quot;&gt;
&lt;p&gt;åœ¨ç¬¬ä¸€è¡Œï¼Œå…ˆé€šè¿‡åˆ¤æ–­ï¼Œå¦‚æœå‡½æ•°çš„åŸå‹ä¸Šæ²¡æœ‰Â &lt;span class=&quot;cnblogs_code&quot;&gt;softBind()&lt;/span&gt;Â è¿™ä¸ªæ–¹æ³•ï¼Œåˆ™æ·»åŠ å®ƒï¼Œç„¶åé€šè¿‡Â &lt;span class=&quot;cnblogs_code&quot;&gt;Array.prototype.slice.call(arguments,1)&lt;/span&gt;Â è·å–ä¼ å…¥çš„å¤–éƒ¨å‚æ•°ï¼Œè¿™é‡Œè¿™æ ·åšå…¶å®ä¸ºäº†å‡½æ•°æŸ¯é‡ŒåŒ–ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå…è®¸åœ¨è½¯ç»‘å®šçš„æ—¶å€™ï¼Œäº‹å…ˆè®¾ç½®å¥½ä¸€äº›å‚æ•°ï¼Œåœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™å†ä¼ å…¥å¦ä¸€äº›å‚æ•°ï¼ˆå…³äºå‡½æ•°æŸ¯é‡ŒåŒ–å¤§å®¶å¯ä»¥å»ç½‘ä¸Šæœä¸€ä¸‹è¯¦ç»†çš„è®²è§£ï¼‰æœ€åè¿”å›ä¸€ä¸ªÂ &lt;span class=&quot;cnblogs_code&quot;&gt;bound&lt;/span&gt;Â å‡½æ•°å½¢æˆä¸€ä¸ªé—­åŒ…ï¼Œè¿™æ—¶å€™ï¼Œåœ¨å‡½æ•°è°ƒç”¨Â &lt;span class=&quot;cnblogs_code&quot;&gt;softBind()&lt;/span&gt;Â ä¹‹åï¼Œå¾—åˆ°çš„å°±æ˜¯Â &lt;span class=&quot;cnblogs_code&quot;&gt;bound&lt;/span&gt;Â å‡½æ•°ï¼Œä¾‹å¦‚ä¸Šé¢çš„Â &lt;span class=&quot;cnblogs_code&quot;&gt;&lt;span&gt;var&lt;/span&gt; fooOBJ=foo.softBind(obj1)&lt;/span&gt;Â ã€‚&lt;/p&gt;

&lt;div readability=&quot;12.193850964044&quot;&gt;
&lt;p&gt;åœ¨Â &lt;span class=&quot;cnblogs_code&quot;&gt;bound&lt;/span&gt;Â å‡½æ•°ä¸­ï¼Œé¦–å…ˆä¼šåˆ¤æ–­è°ƒç”¨è½¯ç»‘å®šä¹‹åçš„å‡½æ•°ï¼ˆå¦‚fooOBJï¼‰çš„è°ƒç”¨ä½ç½®ï¼Œæˆ–è€…è¯´å®ƒçš„thisçš„æŒ‡å‘ï¼Œå¦‚æœÂ &lt;span class=&quot;cnblogs_code&quot;&gt;!&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;Â ï¼ˆthisæŒ‡å‘undefinedï¼‰æˆ–è€…Â &lt;span class=&quot;cnblogs_code&quot;&gt;&lt;span&gt;this&lt;/span&gt;===(window||global)&lt;/span&gt;Â ï¼ˆthisæŒ‡å‘å…¨å±€å¯¹è±¡ï¼‰ï¼Œé‚£ä¹ˆå°±å°†å‡½æ•°çš„thisç»‘å®šåˆ°ä¼ å…¥Â &lt;span class=&quot;cnblogs_code&quot;&gt;softBind&lt;/span&gt;Â ä¸­çš„å‚æ•°objä¸Šã€‚å¦‚æœæ­¤æ—¶thisä¸æŒ‡å‘undefindæˆ–è€…å…¨å±€å¯¹è±¡ï¼Œé‚£ä¹ˆå°±å°†thisç»‘å®šåˆ°ç°åœ¨æ­£åœ¨æŒ‡å‘çš„å‡½æ•°ï¼ˆå³éšå¼ç»‘å®šæˆ–æ˜¾å¼ç»‘å®šï¼‰ã€‚Â &lt;span class=&quot;cnblogs_code&quot;&gt;fn.apply&lt;/span&gt;Â çš„ç¬¬äºŒä¸ªå‚æ•°åˆ™æ˜¯è¿è¡ŒÂ &lt;span class=&quot;cnblogs_code&quot;&gt;foo&lt;/span&gt;Â æ‰€éœ€è¦çš„å‚æ•°ï¼Œç”±ä¸Šé¢çš„argsï¼ˆå¤–éƒ¨å‚æ•°ï¼‰å’Œå†…éƒ¨çš„argumentsï¼ˆå†…éƒ¨å‚æ•°ï¼‰è¿æ¥æˆï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢è¯´çš„æŸ¯é‡ŒåŒ–ã€‚&lt;/p&gt;

&lt;div readability=&quot;9.6305031446541&quot;&gt;
&lt;p&gt;å…¶å®åœ¨ç¬¬ä¸€éçœ‹è¿™ä¸ªå‡½æ•°æ—¶ï¼Œä¹Ÿæœ‰ç‚¹è¿·ï¼Œæœ‰ä¸€äº›ç–‘é—®ï¼Œæ¯”å¦‚Â &lt;span class=&quot;cnblogs_code&quot;&gt;&lt;span&gt;var&lt;/span&gt; fn=&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;Â è¿™å¥ï¼Œåœ¨Â &lt;span class=&quot;cnblogs_code&quot;&gt;foo&lt;/span&gt;Â é€šè¿‡Â &lt;span class=&quot;cnblogs_code&quot;&gt;foo.softBind()&lt;/span&gt;Â è°ƒç”¨Â &lt;span class=&quot;cnblogs_code&quot;&gt;softBind&lt;/span&gt;Â çš„æ—¶å€™ï¼Œfnåˆ°åº•æŒ‡å‘è°å‘¢ï¼Ÿæ˜¯æŒ‡å‘fooè¿˜æ˜¯æŒ‡å‘softBindï¼Ÿæˆ‘ä»¬å¯ä»¥å†™ä¸ªdemoæµ‹è¯•ï¼Œç„¶åå¯ä»¥å¾ˆæ¸…æ™°åœ°çœ‹å‡ºfnæŒ‡å‘ä»€ä¹ˆï¼š&lt;/p&gt;
&lt;div readability=&quot;9.0392156862745&quot;&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;var&lt;/span&gt; a=2&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;function&lt;/span&gt;&lt;span&gt; foo(){
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; foo.a=3&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt; Function.prototype.softBind=&lt;span&gt;function&lt;/span&gt;&lt;span&gt;(){
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt;     &lt;span&gt;var&lt;/span&gt; fn=&lt;span&gt;this&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;function&lt;/span&gt;&lt;span&gt;(){
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt; &lt;span&gt;        console.log(fn.a);
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt; &lt;span&gt;};
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt; Function.prototype.a=4&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt; Function.prototype.softBind.a=5&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt; 
&lt;span&gt;14&lt;/span&gt; foo.softBind()();&lt;span&gt;//&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;
&lt;span&gt;15&lt;/span&gt; Function.prototype.softBind()();&lt;span&gt;//&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div readability=&quot;10.713245997089&quot;&gt;
&lt;p&gt;å¯ä»¥çœ‹å‡ºï¼Œfnï¼ˆæˆ–è€…è¯´thisï¼‰çš„æŒ‡å‘è¿˜æ˜¯éµå¾ªthisçš„ç»‘å®šè§„åˆ™çš„ï¼ŒÂ &lt;span class=&quot;cnblogs_code&quot;&gt;softBind&lt;/span&gt;Â å‡½æ•°å®šä¹‰åœ¨Functionçš„åŸå‹Â &lt;span class=&quot;cnblogs_code&quot;&gt;Function.prototype&lt;/span&gt;Â ä¸­ï¼Œä½†æ˜¯JavaScriptä¸­å‡½æ•°æ°¸è¿œä¸ä¼šâ€œå±äºâ€æŸä¸ªå¯¹è±¡ï¼ˆä¸åƒå…¶ä»–è¯­è¨€å¦‚javaä¸­ç±»é‡Œé¢å®šä¹‰çš„æ–¹æ³•é‚£æ ·ï¼‰ï¼Œåªæ˜¯å¯¹è±¡å†…éƒ¨å¼•ç”¨äº†è¿™ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥åœ¨é€šè¿‡ä¸‹é¢ä¸¤ç§æ–¹å¼è°ƒç”¨æ—¶ï¼Œfnï¼ˆæˆ–è€…è¯´thisï¼‰åˆ†åˆ«éšå¼ç»‘å®šåˆ°äº†Â &lt;span class=&quot;cnblogs_code&quot;&gt;foo&lt;/span&gt;Â å’ŒÂ &lt;span class=&quot;cnblogs_code&quot;&gt;Function.prototype&lt;/span&gt;Â ï¼Œæ‰€ä»¥åˆ†åˆ«è¾“å‡º3å’Œ4ã€‚åé¢çš„Â &lt;span class=&quot;cnblogs_code&quot;&gt;fn.apply()&lt;/span&gt;Â ä¹Ÿå°±ç›¸å½“äºÂ &lt;span class=&quot;cnblogs_code&quot;&gt;foo.apply()&lt;/span&gt;Â ã€‚&lt;/p&gt;


&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;


</description>
<pubDate>Thu, 19 Jul 2018 14:49:00 +0000</pubDate>
<dc:creator>é…¥é£</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/su-feng/p/9338911.html</dc:identifier>
</item>
</channel>
</rss>