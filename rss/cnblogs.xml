<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>åšå®¢å›­_é¦–é¡µ</title>
<link></link>
<description>ä»£ç æ”¹å˜ä¸–ç•Œ</description>
<item>
<title>å¦‚ä½•è®©æ–‡ç§‘ç”Ÿ5åˆ†é’Ÿå†™ä¸ŠPython - dongfanger</title>
<link>http://www.cnblogs.com/df888/p/14050445.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/df888/p/14050445.html</guid>
<description>&lt;p&gt;è¿™ç¯‡æ–‡ç« æ˜¯è½¬å‹åå‘è¡¨çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œæœ‰å¿…è¦å…ˆèŠä¸€ä¸‹æˆ‘çš„å†™æ–‡è®¡åˆ’ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸²è¡Œæ–‡ç« å’Œå¹¶è¡Œæ–‡ç« &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä¼šæŒ‰ç…§å‘æ–‡é¡ºåºåˆ†ä¸ºä¸²è¡Œæ–‡ç« å’Œå¹¶è¡Œæ–‡ç« ã€‚Python è¯­è¨€æœ¬èº«çš„å†…å®¹ï¼Œæˆ‘ä¼šæŒ‰ç…§å…¥é—¨ã€è¿›é˜¶ã€åŸç†çš„é¡ºåºä¾æ¬¡å±•å¼€ã€‚ç”±äºæˆ‘çš„æ°´å¹³æœ‰é™ï¼Œä¸ºäº†ä¿è¯è´¨é‡ä¸ä¹±è®²ï¼Œæˆ‘é€‰æ‹©ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šè¿›è¡ŒäºŒæ¬¡åˆ›ä½œã€‚å…¥é—¨ç¯‡ä¸»è¦å‚è€ƒèœé¸Ÿæ•™ç¨‹çš„åŸºç¡€æ•™ç¨‹éƒ¨åˆ†ã€‚è¿›é˜¶ç¯‡ä¸»è¦å‚è€ƒã€Šæµç•…çš„Pythonã€‹è¿™æœ¬ä¹¦ï¼Œæˆ‘æ˜¯ä¹°äº†å®ä½“ä¹¦çš„ï¼Œè®¡åˆ’åé¢ä¼šé€å‡ºæ¥ï¼Œè™½ç„¶æœ‰äº›ç ´æ—§ï¼Œè¿˜æœ›ä¸è¦å«Œå¼ƒï¼ˆå½“æ—¶ä¹°çš„æ—¶å€™ä¹¦é¡µå°±åäº†ï¼Œäº¬ä¸œè¿˜èµ”äº†æˆ‘ 1000 äº¬è±†ï¼‰ã€‚åŸç†ç¯‡ä¸»è¦å‚è€ƒå®˜æ–¹æ–‡æ¡£ä»¥åŠå¤–ç½‘èµ„æ–™ï¼Œæœ‰ä¸€è¯´ä¸€ï¼Œå›½å¤–èµ„æ–™ç¡®å®æ›´å¤šæ›´ä¸“ä¸šï¼Œåªä¸è¿‡éƒ½æ˜¯è‹±æ–‡çš„ï¼Œè¿˜å¥½ç°åœ¨å·²ç»é€‚åº”äº†ã€‚Djangoã€ç®—æ³•ã€pytestã€tepã€æµ‹è¯•æˆé•¿å°è¯´ç­‰ç³»åˆ—ä¸“é¢˜ä¼šå¹¶è¡Œå‘è¡¨ï¼Œä¹ŸåŒ…æ‹¬å…¶ä»–å•ç¯‡æ–‡ç« ã€‚è¿™ä¸¤å¤©äº†è§£åˆ° Python ä¹‹çˆ¶ Guido van Rossum ä» Google é€€ä¼‘åï¼ŒåˆåŠ å…¥å¾®è½¯ç»§ç»­æ Python äº†ã€‚æœ‰ç‚¹æ„æ€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æœ‰å•¥ä¸ä¸€æ ·ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Python æ–‡ç« å’Œè§†é¢‘éƒ½éå¸¸å¤šï¼Œæˆ‘å°±åœ¨æƒ³æˆ‘å†™çš„ä¸œè¥¿å¯¹è¯»è€…è€Œè¨€ä»·å€¼åˆ°åº•åœ¨å“ªï¼Ÿæˆ‘ä¸æ˜¯æåŸ¹è®­çš„ï¼Œä¹Ÿä¸æ˜¯åšæ•™ç¨‹ï¼Œå†…å®¹ä¼šæ›´åå‘äºå­¦ä¹ ç¬”è®°å’Œå®ç”¨ç»éªŒã€‚çœ‹æˆ‘çš„æ–‡ç« ï¼Œè¯´ä¸å®šèƒ½æŠŠä»¥å‰é—æ¼æˆ–é—å¿˜çš„çŸ¥è¯†ç‚¹å†æ¬¡è¡¥ä¸Šã€‚åŒæ—¶æˆ‘å·²ç»æœ‰ä¸€æ®µæ—¶é—´çš„å†™ä½œç»éªŒäº†ï¼Œæˆ‘ä¹Ÿå°½é‡æ·±å…¥æµ…å‡ºçš„æŠŠçŸ¥è¯†è®²æ¸…æ¥šè®²é€å½»ï¼Œé¦–å…ˆå†™çš„æ–‡ç« æˆ‘è¦è‡ªå·±éƒ½ç†è§£é€ï¼Œè¿™æ ·åˆ«äººçœ‹çš„æ—¶å€™æ‰ä¼šè§‰å¾—ä¸€ç›®äº†ç„¶ã€‚å¦å¤–å°±æ˜¯è®¤çœŸçš„æ€åº¦ï¼Œè§è¿‡ä¸€äº›ä¸ºäº†æµé‡å†™çš„æ•™ç¨‹ï¼Œä¸åšè¯„ä»·ã€‚åªæ˜¯è§‰å¾—æ—¢ç„¶å†™äº†ï¼Œæ—¢è¦å¯¹å¾—èµ·è‡ªå·±ï¼Œä¹Ÿè¦å¯¹å¾—èµ·åˆ«äººã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ ‡é¢˜&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ—¢ä¸ºäº†æé«˜æ‰“å¼€ç‡ï¼Œä¹Ÿæ˜¯ä¸ºäº†æ–°é¢–ï¼Œæˆ‘ä¸ä¼šæŒ‰ç…§æ¯”å¦‚ã€ŠPythonå…¥é—¨1ã€‹ã€ã€ŠPythonå…¥é—¨2ã€‹è¿™ç§å¸¸è§„çš„å‘½åï¼Œè¿™æ ·çš„æ–‡ç« å®åœ¨æ˜¯å¤ªå¤šäº†ã€‚è€Œæ˜¯ä¼šåœ¨å†™å®Œæ–‡ç« åï¼Œæ ¹æ®æ–‡ç« å†…å®¹ï¼Œé€‰æ‹©å…¶ä¸­çš„äº®ç‚¹ï¼Œä½œä¸ºæ ‡é¢˜ã€‚è¿™ä¸ªè¿‡ç¨‹ä¹ŸæŒºæœ‰è¶£ï¼Œæœ‰ç§ç‚¹ç›ä¹‹ç¬”çš„æ„å‘³ã€‚åŒæ—¶æˆ‘ä¹Ÿå¸Œæœ›éšä¾¿æ‘˜ä¸€ç¯‡æ–‡ç« æ‹¿å‡ºå»ï¼Œä¹Ÿæ˜¯å¤Ÿçœ‹çš„ã€‚&lt;/p&gt;
&lt;p&gt;ï¼ˆçªç„¶æƒ³èµ·æ¥ä¸Šå­¦å†™ 2000 å¤šæ¡é”™é¢˜ç¬”è®°çš„æ—¶å€™ï¼Œç®€å•åˆå……å®ï¼‰&lt;/p&gt;

&lt;p&gt;ä¸ºäº†æŠŠè¿™ä¸ªå¼€ç¯‡å†™å¥½ï¼Œæˆ‘ä¸“é—¨åœ¨ B ç«™ä¸Šé¢æ‰¾äº†æœ€ç«çš„ Python æ•™ç¨‹ï¼Œå…¨ç«™æ’è¡Œæ¦œæœ€é«˜ç¬¬1åçš„ã€ŠèŠ±äº†2ä¸‡å¤šä¹°çš„Pythonæ•™ç¨‹å…¨å¥—ã€‹ï¼Œè´¨é‡å¾ˆé«˜ï¼Œä¹Ÿæ¨èå¤§å®¶çœ‹çœ‹ã€‚ä¸è¿‡æˆ‘ä¸æåŸ¹è®­ï¼Œä¹Ÿä¸éœ€è¦å®£æ‰¬ Python çš„å¥½å¤„ä¿ƒè¿›å°±ä¸šï¼Œå°±ä¸å†™é‚£ä¹ˆå¤šèƒŒæ™¯ä»‹ç»äº†ã€‚èº«è¾¹å­¦è´¢ä¼šçš„æœ‹å‹ä¹‹å‰è®©æˆ‘æ•™æ•™ Pythonï¼Œå¹²è„†æˆ‘å°±ä»¥è¿™ä¸ªä¸ºå¥‘æœºï¼Œä½œä¸ºå¼€ç¯‡ï¼Œä¿è¯ 5 åˆ†é’Ÿå†…ï¼Œå³ä¾¿æ˜¯æ–‡ç§‘ç”Ÿï¼Œä¹Ÿèƒ½ç”¨ Python ç¼–èµ·ç¨‹åºæ¥ï¼&lt;/p&gt;

&lt;p&gt;Python å¹¶ä¸ç¥ç§˜ï¼Œå®ƒå…¶å®å°±å’Œ QQ ä¸€æ ·ï¼Œåªæ˜¯ä¸€ä¸ªè¿è¡Œåœ¨ç”µè„‘ä¸Šçš„æ™®æ™®é€šé€šçš„è½¯ä»¶ã€‚åªè¦æœ‰ä¸€å°ç”µè„‘ï¼Œå°±å¯ä»¥å†™ Pythonã€‚&lt;/p&gt;

&lt;p&gt;æ‰“å¼€è¿™ä¸ªä¸‹è½½ç½‘å€ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.python.org/downloads/&quot;&gt;https://www.python.org/downloads/&lt;/a&gt;&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1629545/202011/1629545-20201127213136154-684472134.png&quot;/&gt;&lt;/center&gt;
&lt;p&gt;ç‚¹å‡» Download Python è¿›è¡Œä¸‹è½½ï¼ˆMac åœŸè±ªè¯·æ³¨æ„é€‰æ‹©ç‰ˆæœ¬ï¼‰ã€‚ä¸‹è½½åå‚»ç“œå¼ä¸€è·¯ç‚¹å‡»ä¸‹ä¸€æ­¥å®‰è£…å°±å¥½ã€‚&lt;/p&gt;

&lt;p&gt;ä¸€èˆ¬çš„è½¯ä»¶æˆ‘ä»¬éƒ½æ˜¯åŒå‡»å›¾æ ‡æ‰“å¼€ã€‚Python åœ¨å®‰è£…ä»¥åæ¡Œé¢ä¸Šä¸ä¼šå‡ºç°å›¾æ ‡ã€‚ä¸è¿‡å¯ä»¥ä»å¼€å§‹èœå•æ‰¾åˆ°ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1629545/202011/1629545-20201127213136852-1175239289.png&quot;/&gt;&lt;/center&gt;
&lt;p&gt;ç‚¹å‡»åå°±æ‰“å¼€äº†ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1629545/202011/1629545-20201127213137214-1516183903.png&quot;/&gt;&lt;/center&gt;
&lt;p&gt;Python æ¯•ç«Ÿæ˜¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒä¹Ÿæœ‰å®ƒè‡ªå·±çš„å°Šä¸¥ï¼Œæ‰€ä»¥å®ƒçš„ç•Œé¢çœ‹èµ·æ¥ä¹Ÿæœ‰ä¸“ä¸šçš„ä¸€é¢ï¼Œæ¯”å¦‚é‚£ä¸€ä¸²å¯†å¯†éº»éº»çš„è‹±æ–‡ã€‚&lt;/p&gt;
&lt;p&gt;è¾“å…¥ä¸€å¥è¯è¯•è¯•ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;print(&quot;hello&quot;)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ•²å‡»å›è½¦ã€‚å®ƒé©¬ä¸Šå°±ä¼šå›åº”ä¸€å¥ï¼Œhelloï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1629545/202011/1629545-20201127213137576-1441411140.png&quot;/&gt;&lt;/center&gt;
&lt;p&gt;æ²¡é”™ï¼Œæ˜¯çš„ï¼Œä½ å·²ç»åœ¨ç”¨ Python ç¼–ç¨‹äº†ï¼&lt;/p&gt;

&lt;p&gt;æœ¬æ–‡ä»¥æå…¶ç®€å•çš„ä¾‹å­ï¼Œä»‹ç»äº†å¦‚ä½•åŠ¨æ‰‹ç”¨ Python ç¼–ç¨‹ã€‚æˆ‘è¯•äº†ä¸‹ï¼Œå¦‚æœç½‘é€Ÿå¿«çš„è¯ï¼Œ5 åˆ†é’Ÿå†…å®Œæˆæ˜¯å¦¥å¦¥çš„ã€‚å“ˆå“ˆå“ˆã€‚ä¹‹æ‰€ä»¥é€‰æ‹©è¿™ä¸ªç®€å•ä¾‹å­ï¼Œä¹Ÿæ˜¯æƒ³è¯´æ˜ Python æœ¬æ¥å°±æ˜¯å¾ˆç®€å•çš„ï¼Œä¸ç”¨å¬åˆ°ç¼–ç¨‹å°±è¢«å“åˆ°äº†ã€‚å…ˆåŠ¨æ‰‹ï¼Œä¸€ç‚¹ä¸€ç‚¹å­¦ä¹ å°±å¥½ã€‚ä¸è¿‡è¨€å½’æ­£ä¼ ï¼Œæˆ‘ä»¬å·¥ä½œä¸­å¹¶ä¸æ˜¯è¿™ä¹ˆå†™ Python çš„ï¼Œè€Œæ˜¯ç”¨ä¸€æ¬¾å«åš PyCharm çš„è½¯ä»¶ã€‚PyCharm åˆ†ä¸ºç¤¾åŒºå…è´¹ç‰ˆå’Œä¸“ä¸šæ——èˆ°ç‰ˆã€‚æ—¥å¸¸ä½¿ç”¨ç¤¾åŒºç‰ˆå°±å¯ä»¥äº†ï¼Œä¸ªäººæ¨èæ——èˆ°ç‰ˆã€‚æç¤ºä¸€ä¸‹ï¼Œç ´è§£çš„æ—¶å€™æ³¨æ„æœç´¢å¸¦ä¸Š PyCharm çš„ç‰ˆæœ¬ï¼Œæ¯”å¦‚ 2020.2.3ï¼ŒæˆåŠŸç‡ä¼šæ›´é«˜ã€‚&lt;/p&gt;
</description>
<pubDate>Sat, 28 Nov 2020 01:00:00 +0000</pubDate>
<dc:creator>dongfanger</dc:creator>
<og:description>Pythonç³»åˆ—å¼€ç¯‡ã€‚</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/df888/p/14050445.html</dc:identifier>
</item>
<item>
<title>ã€Makefileã€‘5-Makefileå˜é‡çš„åŸºç¡€ - ææŸ±æ˜</title>
<link>http://www.cnblogs.com/lizhuming/p/14050056.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/lizhuming/p/14050056.html</guid>
<description>&lt;hr/&gt;&lt;h2 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;æœ¬ç¬”è®°ä¸»è¦è®°å½•Makefileä¸€äº›æ¦‚å¿µè¦ç‚¹ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;æ¦‚å¿µ&quot;&gt;æ¦‚å¿µ&lt;/h2&gt;
&lt;h2 id=&quot;chapter-5ï¼šå˜é‡çš„åŸºç¡€&quot;&gt;Chapter 5ï¼šå˜é‡çš„åŸºç¡€&lt;/h2&gt;
&lt;ul readability=&quot;0.5&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;å˜é‡å¯ä»¥ä½¿ç”¨åœ¨ &lt;strong&gt;ç›®æ ‡&lt;/strong&gt; ã€ &lt;strong&gt;ä¾èµ–ç›®æ ‡&lt;/strong&gt; ã€ &lt;strong&gt;å‘½ä»¤&lt;/strong&gt; æˆ–æ˜¯ &lt;strong&gt;Makefileçš„å…¶å®ƒéƒ¨åˆ†ä¸­&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;å˜é‡çš„åå­—å¯ä»¥åŒ…å« &lt;strong&gt;å­—ç¬¦ã€æ•°å­—å’Œä¸‹åˆ’çº¿ï¼ˆå¯ä»¥ä»¥æ•°å­—å¼€å¤´ï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä½†æ˜¯ä¸åº”è¯¥åŒ…å«æœ‰ &lt;strong&gt;: # = ç©ºæ ¼ å›è½¦&lt;/strong&gt; ç­‰ç‰¹æ®Šå­—ç¬¦ã€‚&lt;/li&gt;
&lt;li&gt;å˜é‡åå…·æœ‰å¤§å°å†™æ•æ„Ÿç‰¹æ€§ã€‚ï¼ˆæ¨èå¤§å°å†™æ­é…ä½¿ç”¨ï¼‰&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;å˜é‡èµ‹å€¼æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ é™¤ç­‰å· = ä¸¤è¾¹çš„ç©ºæ ¼ï¼Œä½†æ˜¯ï¼Œå˜é‡å€¼åé¢çš„ç©ºæ ¼ä¼šä¿ç•™ï¼Œç›´è‡³é‡åˆ° ç»“æŸç¬¦æˆ–æ³¨é‡Šç¬¦&lt;/span&gt;&lt;/strong&gt; &lt;strong&gt;**&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;51-å˜é‡çš„åŸºç¡€-&quot;&gt;5.1 å˜é‡çš„åŸºç¡€ *&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;ä½¿ç”¨å˜é‡æ—¶éœ€è¦åœ¨å˜é‡å‰é¢æ·»åŠ  &lt;strong&gt;$&lt;/strong&gt; ç¬¦å·ï¼Œè¡¨ç¤ºå»è¯¥å˜é‡çš„å€¼ã€‚
&lt;ul&gt;&lt;li&gt;æ¨èåœ¨å–å€¼æ—¶ç»™å˜é‡æ·»åŠ ä¸Š &lt;strong&gt;()&lt;/strong&gt; æˆ– &lt;strong&gt;{}&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;å¦‚æœéœ€è¦ä½¿ç”¨çœŸå®çš„ &lt;strong&gt;$&lt;/strong&gt; ï¼Œå°±ç”¨ &lt;strong&gt;$$&lt;/strong&gt; å³å¯ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;å–å˜é‡å€¼å…¶å®å°±æ˜¯ç›¸å½“äº C/C++ ä¸­çš„å®å±•å¼€ä¸€æ ·ï¼Œå…¶å®è¿˜æ˜¯å­—ç¬¦ä¸²æ›¿æ¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;em&gt;æ³¨ï¼šæ¨èçœ‹ä¾‹å­ã€‚&lt;/em&gt;*
&lt;ul&gt;&lt;li&gt;èµ‹å€¼æ—¶è¦æ³¨æ„åé¢çš„ç©ºæ ¼å’Œæ³¨é‡Šç¬¦ &lt;strong&gt;#&lt;/strong&gt;
&lt;ul&gt;&lt;li&gt;æ³¨é‡Šç¬¦ &lt;strong&gt;#&lt;/strong&gt; å¯ä»¥è¡¨ç¤ºç»ˆæ­¢ä¸€ä¸ªå˜é‡çš„å®šä¹‰ã€‚&lt;/li&gt;
&lt;li&gt;ä¾‹å­:
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;/foo/bar&lt;/strong&gt; åé¢è¿˜è·Ÿäº†å‡ ä¸ª &lt;strong&gt;ç©ºæ ¼&lt;/strong&gt;ï¼Œå¦‚æœä½¿ç”¨åˆ° &lt;code&gt;$(dir)/file&lt;/code&gt; ï¼Œé‚£ è·¯å¾„å°±é”™è¯¯äº†ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-makefile&quot;&gt;dir := /foo/bar      # directory to put the frobs indir := /foo/bar # directory to put the frobs in
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;ç©ºæ ¼çš„å®šä¹‰-&quot;&gt;ç©ºæ ¼çš„å®šä¹‰ **&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;å…ˆå®šä¹‰ä¸€ä¸ªç©ºå˜é‡ &lt;code&gt;empty&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ç„¶åç”¨ &lt;strong&gt;$&lt;/strong&gt; ç¬¦å·å–å‡º + &lt;em&gt;ç©ºæ ¼&lt;/em&gt; + &lt;em&gt;æ³¨é‡Šç¬¦&lt;/em&gt; &lt;strong&gt;#&lt;/strong&gt;
&lt;ul&gt;&lt;li&gt;å› ä¸º &lt;em&gt;æ³¨é‡Šç¬¦&lt;/em&gt; &lt;strong&gt;#&lt;/strong&gt; å¯ä»¥ç»“æŸä¸€ä¸ªå˜é‡çš„èµ‹å€¼ã€‚&lt;/li&gt;
&lt;li&gt;ä¸ç”¨&lt;em&gt;æ³¨é‡Šç¬¦&lt;/em&gt; &lt;strong&gt;#&lt;/strong&gt; ä¹Ÿå¯ä»¥ï¼Œåªæ˜¯æ€•ç©ºæ ¼çš„æ•°é‡ä¸å¯¹æ‰ç”¨ &lt;em&gt;æ³¨é‡Šç¬¦&lt;/em&gt; &lt;strong&gt;#&lt;/strong&gt; è¡¨ç¤ºä¸€ä¸‹è€Œå·²ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-makefile&quot;&gt;empty:=
a = $(empty) #
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;ä¸€äº›èµ‹å€¼&quot;&gt;ä¸€äº›èµ‹å€¼&lt;/h4&gt;
&lt;p&gt;â€ƒå˜é‡å®šä¹‰è¯­æ³•ï¼š&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å½¢å¼&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody readability=&quot;2.5&quot;&gt;&lt;tr&gt;&lt;td&gt;A = xxx&lt;/td&gt;
&lt;td&gt;å»¶æ—¶å˜é‡&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;B ?= xxx&lt;/td&gt;
&lt;td&gt;å»¶æ—¶å˜é‡ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡å®šä¹‰æ—¶èµ‹å€¼æ‰æˆåŠŸï¼Œè‹¥æ›¾è¢«å®šä¹‰è¿‡ï¼Œåˆ™æ­¤èµ‹å€¼æ— æ•ˆã€‚&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;C := xxx&lt;/td&gt;
&lt;td&gt;ç«‹å³å˜é‡&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td&gt;D += yyy&lt;/td&gt;
&lt;td&gt;å¦‚æœDåœ¨å‰é¢æ˜¯å»¶æ—¶å˜é‡ï¼Œé‚£ä¹ˆç°åœ¨å®ƒè¿˜æ˜¯&lt;strong&gt;å»¶æ—¶å˜é‡&lt;/strong&gt;&lt;br/&gt;å¦‚æœDåœ¨å‰é¢æ˜¯ç«‹å³å˜é‡ï¼Œé‚£ä¹ˆå®ƒç°åœ¨è¿˜æ˜¯&lt;strong&gt;ç«‹å³å˜é‡&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h4 id=&quot;ä¸€äº›ç‰¹æ®Šçš„ç¬¦å·&quot;&gt;ä¸€äº›ç‰¹æ®Šçš„ç¬¦å·&lt;/h4&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;ç¬¦å·&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody readability=&quot;9.5&quot;&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;$@&lt;/td&gt;
&lt;td&gt;è¡¨ç¤ºè§„åˆ™ä¸­çš„ç›®æ ‡æ–‡ä»¶é›†&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td&gt;$%&lt;/td&gt;
&lt;td&gt;å½“ç›®æ ‡ä¸ºå‡½æ•°åº“çš„æ—¶å€™ï¼Œåˆ™è¡¨ç¤ºè§„åˆ™ä¸­çš„ç›®æ ‡æˆå‘˜åã€‚åä¹‹ä¸ºç©ºã€‚å¦‚ä¸€ä¸ªç›®æ ‡ä¸º&quot;&lt;em&gt;foo.a(bar.o)&lt;/em&gt;&quot;ï¼Œé‚£ä¹ˆï¼Œ&quot;$%&quot;å°±æ˜¯&quot;bar.o&quot;ï¼Œä»¥ç©ºæ ¼åˆ†éš”å¼€ã€‚&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td&gt;$&amp;lt;&lt;/td&gt;
&lt;td&gt;ä¾èµ–æ–‡ä»¶é›†åˆä¸­çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æœä¾èµ–æ–‡ä»¶ä»¥&quot;&lt;em&gt;%&lt;/em&gt;&quot;å½¢å¼å‡ºç°ï¼Œåˆ™è¡¨ç¤ºç¬¦åˆæ¨¡å¼çš„ä¸€ç³»åˆ—æ–‡ä»¶é›†åˆ&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;$?&lt;/td&gt;
&lt;td&gt;æ‰€æœ‰æ¯”ç›®æ ‡æ–°çš„ä¾èµ–é›†åˆï¼Œä»¥ç©ºæ ¼åˆ†éš”å¼€ã€‚&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;$^&lt;/td&gt;
&lt;td&gt;æ‰€æœ‰ä¾èµ–æ–‡ä»¶é›†åˆï¼Œä»¥ç©ºæ ¼åˆ†éš”å¼€ã€‚å¦‚æœä¾èµ–æœ‰ç›¸åŒï¼Œåˆ™å–å…¶ä¸€ã€‚&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;$+&lt;/td&gt;
&lt;td&gt;å’Œ &quot;$^&quot;ç±»åŒï¼Œä½†æ˜¯ä¸ä¼šæŠŠç›¸åŒçš„åˆ é™¤æ‰ã€‚&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td&gt;$*&lt;/td&gt;
&lt;td&gt;è¿™ä¸ªå˜é‡è¡¨ç¤ºç›®æ ‡æ¨¡å¼ä¸­ &quot;%&quot;åŠå…¶ä¹‹å‰çš„éƒ¨åˆ†ï¼Œå¦‚æœç›®æ ‡æ˜¯ test/a.test.c,ç›®æ ‡æ¨¡å¼ä¸º a.%.c, é‚£ä¹ˆ &quot;$* &quot; å°±æ˜¯ test/a.testã€‚&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3 id=&quot;52-å˜é‡ä¸­çš„å˜é‡-&quot;&gt;5.2 å˜é‡ä¸­çš„å˜é‡ *&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;åœ¨ &lt;strong&gt;=&lt;/strong&gt; å·å³ä¾§å¯ä»¥æ˜¯å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯å˜é‡*&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¦‚æœ = å³ä¾§æ˜¯ å˜é‡ï¼Œé‚£ä¹ˆè¯¥ å˜é‡ å¯ä»¥å®šä¹‰åœ¨æ–‡ä»¶çš„ä»»ä½•ä¸€å¤„&lt;/strong&gt;ï¼ˆå°±æ˜¯ å»¶æ—¶å˜é‡ &lt;strong&gt;=&lt;/strong&gt;ï¼‰ã€‚ï¼ˆ&lt;em&gt;&lt;strong&gt;ä½†æ˜¯ä¸æ¨èä½¿ç”¨è¯¥æ–¹æ³•&lt;/strong&gt;&lt;/em&gt;ï¼‰&lt;/li&gt;
&lt;/ul&gt;&lt;hr/&gt;&lt;ul&gt;&lt;li&gt;ä¸ºäº†é¿å…ä¸Šé¢ç¬¬äºŒç‚¹çš„æ“ä½œï¼Œä¸€èˆ¬ä½¿ç”¨ å³æ—¶å˜é‡ &lt;strong&gt;:=&lt;/strong&gt; æ¥èµ‹å€¼ï¼Œä¾‹å­ï¼š
&lt;ul&gt;&lt;li&gt;y çš„å€¼æ˜¯ &lt;strong&gt;foo bar&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-makefile&quot;&gt;x := foo
y := $(x) bar
x := later
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;* y çš„å€¼æ˜¯ **bar**
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=&quot;language-makefile&quot;&gt;y := $(x) bar
x := food
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;53-å˜é‡é«˜çº§ç”¨æ³•&quot;&gt;5.3 å˜é‡é«˜çº§ç”¨æ³•&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;å˜é‡å€¼æ›¿æ¢&lt;/li&gt;
&lt;li&gt;æŠŠå˜é‡çš„å€¼å†å˜æˆå˜é‡&lt;/li&gt;
&lt;/ul&gt;&lt;h4 id=&quot;å˜é‡å€¼æ›¿æ¢&quot;&gt;å˜é‡å€¼æ›¿æ¢&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;æ›¿æ¢å˜é‡ä¸­çš„å…±æœ‰çš„éƒ¨åˆ†
&lt;ul&gt;&lt;li&gt;æ ¼å¼
&lt;ul&gt;&lt;li&gt;&lt;code&gt;$(var:a=b)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;${var:a=b}&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;æ„æ€æ˜¯æŠŠå˜é‡ &lt;strong&gt;var&lt;/strong&gt; ä¸­çš„æ‰€æœ‰ä»¥ &lt;strong&gt;a å­—ä¸²ç»“å°¾çš„ a&lt;/strong&gt; æ›¿æ¢æˆ &lt;strong&gt;b&lt;/strong&gt; å­—ä¸²ã€‚
&lt;ul&gt;&lt;li&gt;è¿™é‡Œ &lt;strong&gt;ç»“å°¾&lt;/strong&gt; çš„æ„æ€æ˜¯ &lt;strong&gt;ç©ºæ ¼&lt;/strong&gt; æˆ– &lt;strong&gt;ç»“æŸç¬¦&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;ä¾‹å­&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-makefile&quot;&gt;foo := a.o b.o c.o
bar := $(foo:.o=.c)
# æˆ–
foo := a.o b.o c.o
bar := $(foo:%.o=%.c)
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;æŠŠå˜é‡çš„å€¼å†å½“æˆå˜é‡&quot;&gt;æŠŠå˜é‡çš„å€¼å†å½“æˆå˜é‡&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;ç›´æ¥ä¸Šä¾‹å­ï¼š&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-makefile&quot;&gt;ifdef do_sort
func := sort
else
func := strip
endif
bar := a d b g q c
foo := $($(func) $(bar))
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;ç”¨åœ¨æ“ä½œç¬¦å·¦è¾¹ï¼š&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-makefile&quot;&gt;dir = foo
$(dir)_sources := $(wildcard $(dir)/*.c)
define $(dir)_print
lpr $($(dir)_sources)
endef
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;55-override-æŒ‡ç¤ºç¬¦&quot;&gt;5.5 override æŒ‡ç¤ºç¬¦&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;é€šå¸¸åœ¨æ‰§è¡Œ make æ—¶ï¼Œå¦‚æœé€šè¿‡å‘½ä»¤è¡Œå®šä¹‰äº†ä¸€ä¸ªå˜é‡ï¼Œé‚£ä¹ˆå®ƒå°†æ›¿ä»£åœ¨ Makefile ä¸­å‡ºç°çš„åŒåå˜é‡çš„å®šä¹‰ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸å¸Œæœ›å‘½ä»¤è¡ŒæŒ‡å®šçš„å˜é‡å€¼æ›¿ä»£åœ¨ Makefile ä¸­çš„å˜é‡å®šä¹‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦åœ¨ Makefile ä¸­ä½¿ç”¨æŒ‡ç¤ºç¬¦ &lt;strong&gt;override&lt;/strong&gt; æ¥å¯¹è¿™ä¸ªå˜é‡è¿›è¡Œå£°æ˜ï¼Œå¦‚ï¼š&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-makefile&quot;&gt;override &amp;lt;variable&amp;gt;; = &amp;lt;value&amp;gt;;
# æˆ–
override &amp;lt;variable&amp;gt;; := &amp;lt;value&amp;gt;;
# æˆ–
override &amp;lt;variable&amp;gt;; += &amp;lt;more text&amp;gt;;
# æˆ–
override define foo
bar
endef
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;56-å¤šè¡Œå˜é‡&quot;&gt;5.6 å¤šè¡Œå˜é‡&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;ç›¸å½“äº C ä¸­çš„å‡½æ•°&lt;/li&gt;
&lt;li&gt;å…³é”®å­— &lt;strong&gt;define&lt;/strong&gt;ã€‚ï¼ˆ&lt;em&gt;ä½¿ç”¨è¯¥è¯¥å…³é”®å­—å¯ä»¥æœ‰ æ¢è¡Œ&lt;/em&gt;ï¼‰&lt;/li&gt;
&lt;li&gt;ä¾‹å­&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-makefile&quot;&gt;define two-lines
echo foo
echo $(bar)
endef
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;57-ç¯å¢ƒå˜é‡&quot;&gt;5.7 ç¯å¢ƒå˜é‡&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;make è¿è¡Œæ—¶çš„ç³»ç»Ÿç¯å¢ƒå˜é‡å¯ä»¥åœ¨ make å¼€å§‹è¿è¡Œæ—¶è¢«è½½å…¥åˆ° Makefile æ–‡ä»¶ä¸­ï¼Œä½†æ˜¯å¦‚æœ Makefileä¸­å·²å®šä¹‰äº†è¿™ä¸ªå˜é‡ï¼Œæˆ–æ˜¯è¿™ä¸ªå˜é‡ç”± make å‘½ä»¤è¡Œå¸¦å…¥ï¼Œé‚£ä¹ˆç³»ç»Ÿçš„ç¯å¢ƒå˜é‡çš„å€¼å°†è¢«è¦†ç›–ã€‚ï¼ˆå¦‚æœmake æŒ‡å®šäº†â€œ-eâ€å‚æ•°ï¼Œé‚£ä¹ˆï¼Œç³»ç»Ÿç¯å¢ƒå˜é‡å°†è¦†ç›– Makefi le ä¸­å®šä¹‰çš„å˜é‡ï¼‰&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;58-ç›®æ ‡å˜é‡&quot;&gt;5.8 ç›®æ ‡å˜é‡&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;ä¸ºæŸä¸ªç›®æ ‡è®¾ç½®å±€éƒ¨å˜é‡ï¼Œè¿™ç§å˜é‡è¢«ç§°ä¸º&lt;strong&gt;Target-specifi c Variable&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èŒƒå›´åªåœ¨è¿™æ¡è§„åˆ™ä»¥åŠè¿å¸¦è§„åˆ™ä¸­&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;è¯­æ³•
&lt;ul&gt;&lt;li&gt;; å¯ä»¥æ˜¯å‰é¢è®²è¿‡çš„å„ç§èµ‹å€¼è¡¨è¾¾å¼ï¼Œå¦‚ &lt;strong&gt;= := +=&lt;/strong&gt; æˆ–æ˜¯ &lt;strong&gt;?=&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-makefile&quot;&gt;&amp;lt;target ...&amp;gt; : &amp;lt;variable-assignment&amp;gt;;
&amp;lt;target ...&amp;gt; : overide &amp;lt;variable-assignment&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;ä¾‹å­
&lt;ul&gt;&lt;li&gt;åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œä¸ç®¡å…¨å±€çš„ &lt;strong&gt;$(CFLAGS)&lt;/strong&gt; çš„å€¼æ˜¯ä»€ä¹ˆï¼Œåœ¨ &lt;strong&gt;prog&lt;/strong&gt; ç›®æ ‡ï¼Œä»¥åŠå…¶æ‰€å¼•å‘çš„æ‰€æœ‰è§„åˆ™ä¸­ï¼ˆ&lt;strong&gt;prog.o foo.o bar.o&lt;/strong&gt; çš„è§„åˆ™ï¼‰ï¼Œ&lt;strong&gt;$(CFLAGS)&lt;/strong&gt; çš„å€¼éƒ½æ˜¯ &lt;strong&gt;-g&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-makefile&quot;&gt;prog : CFLAGS = -g
prog : prog.o foo.o bar.o
    $(CC) $(CFLAGS) prog.o foo.o bar.o
prog.o : prog.c
    $(CC) $(CFLAGS) prog.c
foo.o : foo.c
    $(CC) $(CFLAGS) foo.c
bar.o : bar.c
    $(CC) $(CFLAGS) bar.c
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;59-æ¨¡å¼å˜é‡&quot;&gt;5.9 æ¨¡å¼å˜é‡&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;å°±æ˜¯æŠŠä¸Šé¢ ç›®æ ‡å˜é‡ ä¸­çš„å…·ä½“ç›®æ ‡æ”¹ä¸ºä¸€ç§æ¨¡å¼ï¼ˆä¸€æ¡è¯­å¥ï¼ˆè¡¨è¾¾ä¸€ç§æ¨¡å¼ï¼‰ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è¯­æ³•&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-makefile&quot;&gt;&amp;lt;pattern ...&amp;gt;; : &amp;lt;variable-assignment&amp;gt;;
&amp;lt;pattern ...&amp;gt;; : override &amp;lt;variable-assignment&amp;gt;;
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;ä¾‹å­ï¼š&lt;strong&gt;å°±æ˜¯æŠŠ prog æ”¹ä¸º %.o&lt;/strong&gt;ï¼Œ&lt;strong&gt;%.o&lt;/strong&gt; å°±æ˜¯ä¸€ç§æ¨¡å¼ï¼Œæ‰€æœ‰ &lt;strong&gt;.o&lt;/strong&gt; ç»“å°¾çš„éƒ½ç¬¦åˆè¯¥æ¨¡å¼ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-makefile&quot;&gt;%.o : CFLAGS = -O
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;å‚è€ƒ&quot;&gt;å‚è€ƒ&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;ã€ŠGUN Makefileã€‹&lt;/li&gt;
&lt;li&gt;ã€Šè·Ÿæˆ‘ä¸€èµ·å†™Makefileã€‹&lt;/li&gt;
&lt;/ul&gt;</description>
<pubDate>Sat, 28 Nov 2020 00:33:00 +0000</pubDate>
<dc:creator>ææŸ±æ˜</dc:creator>
<og:description>å‰è¨€ æœ¬ç¬”è®°ä¸»è¦è®°å½•Makefileä¸€äº›æ¦‚å¿µè¦ç‚¹ã€‚ æ¦‚å¿µ Chapter 5ï¼šå˜é‡çš„åŸºç¡€ å˜é‡å¯ä»¥ä½¿ç”¨åœ¨ ç›®æ ‡ ã€ ä¾èµ–ç›®æ ‡ ã€ å‘½ä»¤ æˆ–æ˜¯ Makefileçš„å…¶å®ƒéƒ¨åˆ†ä¸­ã€‚ å˜é‡çš„åå­—å¯ä»¥åŒ…å« å­—ç¬¦ã€</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/lizhuming/p/14050056.html</dc:identifier>
</item>
<item>
<title>Linux å­¦ä¹ ç¬”è®°05ä¸¨åœ¨Ubuntu 20.04é…ç½®FTPæœåŠ¡å™¨ - J_StrawHat</title>
<link>http://www.cnblogs.com/J-StrawHat/p/14051520.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/J-StrawHat/p/14051520.html</guid>
<description>&lt;p&gt;æ„Ÿè°¢ linuxconfig.org ä¸Šçš„&lt;a href=&quot;https://linuxconfig.org/how-to-setup-ftp-server-on-ubuntu-20-04-focal-fossa-linux&quot;&gt;è¿™ç¯‡è‹±æ–‡æ•™ç¨‹&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;FTPç”¨äºè®¿é—®å’Œä¼ è¾“&lt;strong&gt;æœ¬åœ°ç½‘ç»œ&lt;/strong&gt;ä¸Šçš„æ–‡ä»¶ï¼Œé€šè¿‡å®‰è£… VSFTPD è½¯ä»¶ï¼Œæ‰“å¼€çƒ­ç‚¹ï¼Œé…ç½®ç›¸å…³ä¿¡æ¯åå³èƒ½å¤Ÿå¯åŠ¨å¹¶è¿è¡ŒFTPæœåŠ¡å™¨äº†ã€‚&lt;/p&gt;
&lt;img src=&quot;https://gitee.com/j__strawhat/MyImages/raw/master/img/20201128085833.png&quot; width=&quot;600&quot;/&gt;&lt;h2 id=&quot;1-å®‰è£…å’Œé…ç½®vsftpd&quot;&gt;1. å®‰è£…å’Œé…ç½®VSFTPD&lt;/h2&gt;
&lt;p&gt;åœ¨ç»ˆç«¯ä¸­è¾“å…¥æŒ‡ä»¤ä»¥å®‰è£… VSFTPD&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;$ sudo apt-get install vsftpd
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;2-è®¾ç½®-ftp-ç”¨æˆ·è´¦å·&quot;&gt;2. è®¾ç½® FTP ç”¨æˆ·è´¦å·&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆæˆ‘ä»¬å¯¹åŸé…ç½®æ–‡ä»¶ &lt;code&gt;vsftpd.conf&lt;/code&gt; è¿›è¡Œå¤‡ä»½ï¼Œé¿å…å¾…ä¼šçš„æ“ä½œä¸­å‡ºé”™ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;$ sudo mv /etc/vsftpd.conf /etc/vsftpd.conf_orig
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ¥ç€ï¼Œæˆ‘ä»¬é€šè¿‡ç¼–è¾‘å™¨ï¼ˆè¿™é‡Œç”¨viï¼‰æ‰“å¼€åŸæ¥çš„é…ç½®æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;$ sudo vi /etc/vsftpd.conf
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å°†ä¸‹é¢åŸºæœ¬é…ç½®ä¿¡æ¯å…¨éƒ¨å¤åˆ¶ç²˜è´´åˆ°åˆšæ‰“å¼€çš„é…ç½®æ–‡ä»¶&lt;code&gt;/etc/vsftpd.conf&lt;/code&gt; ï¼Œç„¶åä¿å­˜ä¿®æ”¹å¹¶å…³é—­æ–‡ä»¶&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;listen=NO
listen_ipv6=YES
anonymous_enable=NO
local_enable=YES
write_enable=YES
local_umask=022
dirmessage_enable=YES
use_localtime=YES
xferlog_enable=YES
connect_from_port_20=YES
chroot_local_user=YES
secure_chroot_dir=/var/run/vsftpd/empty
pam_service_name=vsftpd
rsa_cert_file=/etc/ssl/certs/ssl-cert-snakeoil.pem
rsa_private_key_file=/etc/ssl/private/ssl-cert-snakeoil.key
ssl_enable=NO
pasv_enable=Yes
pasv_min_port=10000
pasv_max_port=10100
allow_writeable_chroot=YES
&lt;/code&gt;
&lt;/pre&gt;
&lt;img src=&quot;https://gitee.com/j__strawhat/MyImages/raw/master/img/20201128003854.png&quot;/&gt;&lt;p&gt;ç”±äºUbuntuçš„å†…ç½®é˜²ç«å¢™é»˜è®¤ä¼šé˜»æ­¢FTPçš„é€šä¿¡ï¼Œæˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„æŒ‡ä»¤åœ¨UFWä¸­æ–°å»ºä¸ªä¾‹å¤–ä»¥å…è®¸é€šä¿¡ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;$ sudo ufw allow from any to any port 20,21,10000:10100 proto tcp
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é‡æ–°å¯åŠ¨VSFTPDä»¥åº”ç”¨æ–°çš„æ›´æ”¹ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;$ sudo systemctl restart vsftpd
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;3-åˆ›å»ºä¸€ä¸ªftpç”¨æˆ·&quot;&gt;3. åˆ›å»ºä¸€ä¸ªFTPç”¨æˆ·&lt;/h2&gt;
&lt;p&gt;FTPæœåŠ¡å™¨å·²ç»å°±å°±ç»ªï¼Œå¯ä»¥æ¥å—ä¼ å…¥çš„è¿æ¥äº†ã€‚æ¥ä¸‹æ¥å°±éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ç”¨æˆ·ä»è€Œè¿æ¥åˆ°FTPæœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;åˆ›å»ºæ–°ç”¨æˆ· &lt;code&gt;ftpuser&lt;/code&gt;çš„åŒæ—¶è®¾ç½®è¯¥ç”¨æˆ·çš„å¯†ç ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;$ sudo useradd -m ftpuser
$ sudo passwd ftpuser
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸ºäº†ä¿è¯è¿è¡ŒæˆåŠŸï¼Œéœ€è¦åœ¨&lt;code&gt;ftpuser&lt;/code&gt;çš„å®¶ç›®å½•ä¸­ä¿å­˜è‡³å°‘ä¸€ä¸ªæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;$ sudo bash -c &quot;echo FTP TESTING &amp;gt; /home/ftpuser/FTP-TEST&quot;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å½“æˆ‘ä»¬è¿æ¥åˆ°è¯¥FTPæœåŠ¡å™¨æ—¶ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿçœ‹åˆ°è¿™æ ·çš„æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;h2 id=&quot;3-è¿ç»“ftpæœåŠ¡å™¨&quot;&gt;3. è¿ç»“FTPæœåŠ¡å™¨&lt;/h2&gt;
&lt;p&gt;ç°åœ¨ï¼Œä½ ç”¨æ‰‹æœºå¼€ä¸‹&lt;strong&gt;çƒ­ç‚¹&lt;/strong&gt;ï¼Œä½ çš„å°ä¼™ä¼´é€šè¿‡è¿æ¥ä½ çš„çƒ­ç‚¹ï¼Œç„¶åè¾“å…¥ä½ é‚£è¾¹çš„IPåœ°å€æˆ–è€…ä¸»æœºåå³èƒ½è¿æ¥åˆ°FTPæœåŠ¡å™¨äº†ã€‚æ¥ä¸‹æ¥ä»‹ç»ä¸¤ç§æ–¹æ³•ï¼Œä»»æ„ç§æ–¹æ³•éƒ½èƒ½å¤ŸæˆåŠŸè¿æ¥ã€‚&lt;/p&gt;
&lt;h3 id=&quot;31-ä½¿ç”¨å‘½ä»¤è¡Œè¿æ¥åˆ°ftpæœåŠ¡å™¨&quot;&gt;3.1 ä½¿ç”¨å‘½ä»¤è¡Œè¿æ¥åˆ°FTPæœåŠ¡å™¨&lt;/h3&gt;
&lt;p&gt;æ‰“å¼€ç»ˆç«¯ï¼Œä½¿ç”¨Ubuntuçš„ &lt;code&gt;ftp&lt;/code&gt; å‘½ä»¤æ¥è¿æ¥ä½ çš„ loopback åœ°å€ï¼ˆ127.0.0.1ï¼‰æˆ–è€… ä½ ç”µè„‘ä¸Šç‰¹æœ‰çš„IPåœ°å€ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;loopback æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç½‘ç»œæ¥å£ï¼ˆç†è§£ä¸ºè™šæ‹Ÿç½‘å¡ï¼‰ï¼Œç”¨äºæœ¬æœºä¸­å„ä¸ªåº”ç”¨é—´çš„ç½‘ç»œäº¤äº’ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;å¦‚ä½•æŸ¥çœ‹ä½ ç”µè„‘ä¸Šçš„IPåœ°å€ï¼Ÿ&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;$ hostname -I
#æ‰“å°æ˜¾ç¤ºçš„å·¦è¾¹é‚£ä¸²æ•°å­—å³æ˜¯ä½ çš„Ipv4åœ°å€äº†
&lt;/code&gt;
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;$ ftp 127.0.0.1
#æˆ–è€… ftp ä½ çš„ç”µè„‘IPåœ°å€
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œä¼šæ˜¾ç¤º&lt;code&gt;Connected&lt;/code&gt;å¹¶è®©ä½ è¾“å…¥è´¦å·åç§°ä¸å£ä»¤ï¼ˆå°±æ˜¯ç¬¬2æ­¥åˆ›å»ºçš„è´¦å·&lt;code&gt;ftpuser&lt;/code&gt;ï¼‰&lt;/p&gt;
&lt;img src=&quot;https://gitee.com/j__strawhat/MyImages/raw/master/img/20201128010205.png&quot;/&gt;&lt;p&gt;ç”±æ­¤è¿æ¥æˆåŠŸï¼é€šè¿‡&lt;code&gt;ls&lt;/code&gt;æŒ‡ä»¤ï¼Œå°±èƒ½æŸ¥çœ‹è¯¥æœåŠ¡å™¨ä¸­çš„æ–‡ä»¶æˆ–è€…åˆ›å»ºç›®å½•äº†ğŸ˜„&lt;/p&gt;
&lt;img src=&quot;https://gitee.com/j__strawhat/MyImages/raw/master/img/20201128010509.png&quot;/&gt;&lt;h3 id=&quot;32-é€šè¿‡guiè¿æ¥åˆ°ftpæœåŠ¡å™¨&quot;&gt;3.2 é€šè¿‡GUIè¿æ¥åˆ°FTPæœåŠ¡å™¨&lt;/h3&gt;
&lt;p&gt;æ‰“å¼€æ–‡ä»¶ç®¡ç†å™¨ï¼Œç‚¹å‡»â€œå…¶ä»–ä½ç½®â€ï¼Œåœ¨â€œè¿æ¥åˆ°æœåŠ¡å™¨â€é‚£ä¸€æ ä¸­è¾“å…¥ &lt;code&gt;ftp://127.0.0.1&lt;/code&gt;ï¼ˆä½¿ç”¨ä½ çš„IPåœ°å€ä¹Ÿå¯ä»¥ï¼‰ï¼Œç‚¹å‡»è¿æ¥å°±ä¼šå¼¹å‡ºçª—å£ï¼Œè¾“å…¥ä½ ç¬¬äºŒæ­¥åˆ›å»ºçš„è´¦å·å°±èƒ½è¿æ¥æˆåŠŸäº†ã€‚&lt;/p&gt;
&lt;img src=&quot;https://gitee.com/j__strawhat/MyImages/raw/master/img/20201128010822.png&quot; width=&quot;600&quot;/&gt;&lt;p&gt;æˆåŠŸè¿æ¥åï¼Œå°±èƒ½çœ‹åˆ°ç›´æ¥æ‰€åˆ›å»ºçš„æ–‡ä»¶äº†ã€‚&lt;/p&gt;
&lt;img src=&quot;https://gitee.com/j__strawhat/MyImages/raw/master/img/20201128011015.png&quot; width=&quot;600&quot;/&gt;&lt;h3 id=&quot;33-ä½¿ç”¨æµè§ˆå™¨è¿æ¥åˆ°ftpæœåŠ¡å™¨&quot;&gt;3.3 ä½¿ç”¨æµè§ˆå™¨è¿æ¥åˆ°FTPæœåŠ¡å™¨&lt;/h3&gt;
&lt;p&gt;æ‰“å¼€ä½ çš„æµè§ˆå™¨ï¼ˆä»¥ç«ç‹æµè§ˆå™¨ä¸ºä¾‹ï¼‰ï¼Œåœ¨åœ°å€æ ä¸­è¾“å…¥ä½ çš„ loopback åœ°å€ï¼ˆ127.0.0.1ï¼‰æˆ–è€… ä½ ç”µè„‘ä¸Šç‰¹æœ‰çš„IPåœ°å€ã€‚&lt;/p&gt;
&lt;img src=&quot;https://gitee.com/j__strawhat/MyImages/raw/master/img/20201128085700.png&quot;/&gt;&lt;p&gt;å¡«å†™ç¬¬äºŒæ­¥æ‰€åˆ›å»ºçš„è´¦å·åç§°åŠå¯†ç &lt;/p&gt;
&lt;img src=&quot;https://gitee.com/j__strawhat/MyImages/raw/master/img/20201128085833.png&quot; width=&quot;600&quot;/&gt;&lt;p&gt;æˆåŠŸç™»å½•~&lt;/p&gt;
</description>
<pubDate>Sat, 28 Nov 2020 00:26:00 +0000</pubDate>
<dc:creator>J_StrawHat</dc:creator>
<og:description>æ„Ÿè°¢ linuxconfig.org ä¸Šçš„è¿™ç¯‡è‹±æ–‡æ•™ç¨‹ FTPç”¨äºè®¿é—®å’Œä¼ è¾“æœ¬åœ°ç½‘ç»œä¸Šçš„æ–‡ä»¶ï¼Œé€šè¿‡å®‰è£… VSFTPD è½¯ä»¶ï¼Œæ‰“å¼€çƒ­ç‚¹ï¼Œé…ç½®ç›¸å…³ä¿¡æ¯åå³èƒ½å¤Ÿå¯åŠ¨å¹¶è¿è¡ŒFTPæœåŠ¡å™¨äº†ã€‚ 1. å®‰è£…å’Œé…ç½®V</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/J-StrawHat/p/14051520.html</dc:identifier>
</item>
<item>
<title>ã€Rè¯­è¨€å…¥é—¨ã€‘Rè¯­è¨€ä¸­çš„å˜é‡ä¸åŸºæœ¬æ•°æ®ç±»å‹ - å¼—å…°å…‹çš„çŒ«</title>
<link>http://www.cnblogs.com/mfrank/p/14051513.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/mfrank/p/14051513.html</guid>
<description>&lt;h2 id=&quot;è¯´æ˜&quot;&gt;è¯´æ˜&lt;/h2&gt;
&lt;p&gt;åœ¨å‰ä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº† &lt;code&gt;R&lt;/code&gt; è¯­è¨€å’Œ &lt;code&gt;R Studio&lt;/code&gt; çš„å®‰è£…ï¼Œå¹¶ç®€å•çš„ä»‹ç»äº†ä¸€ä¸ªç¤ºä¾‹ï¼Œæ¥ä¸‹æ¥è®©æˆ‘ä»¬ç”±æµ…å…¥æ·±çš„å­¦ä¹  &lt;code&gt;R&lt;/code&gt; è¯­è¨€çš„ç›¸å…³çŸ¥è¯†ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬ç¯‡å°†ä¸»è¦ä»‹ç» &lt;code&gt;R&lt;/code&gt; è¯­è¨€çš„åŸºæœ¬æ“ä½œã€å˜é‡å’Œå‡ ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¥½å¯¹ &lt;code&gt;R&lt;/code&gt; è¯­è¨€çš„ä½¿ç”¨æ–¹æ³•æœ‰ä¸€ä¸ªåŸºæœ¬çš„æ¦‚å¿µã€‚é€šè¿‡æœ¬ç¯‡çš„å­¦ä¹ ï¼Œä½ å°†äº†è§£åˆ°ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;&lt;code&gt;R&lt;/code&gt; è¯­è¨€æœ‰å“ªäº›åŸºæœ¬æ“ä½œ&lt;/li&gt;
&lt;li&gt;ä»€ä¹ˆæ˜¯å˜é‡ï¼Œä»¥åŠå¦‚ä½•ç»™å˜é‡èµ‹å€¼&lt;/li&gt;
&lt;li&gt;&lt;code&gt;R&lt;/code&gt; è¯­è¨€æœ‰å“ªäº›åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¦‚ä½•ç¡®å®šå˜é‡çš„æ•°æ®ç±»å‹&lt;/li&gt;
&lt;/ol&gt;&lt;h2 id=&quot;r-è¯­è¨€çš„åŸºæœ¬æ“ä½œ&quot;&gt;R è¯­è¨€çš„åŸºæœ¬æ“ä½œ&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;R&lt;/code&gt; è¯­è¨€çš„é»˜è®¤æç¤ºç¬¦æ˜¯ &lt;code&gt;&amp;gt;&lt;/code&gt; ï¼Œå®ƒè¡¨ç¤ºæ­£åœ¨ç­‰å¾…è¾“å…¥å‘½ä»¤ï¼Œæ¯æ¬¡è¾“å…¥å‘½ä»¤åæ•²å‡»å›è½¦å³å¯æ‰§è¡Œå½“å‰å‘½ä»¤ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1043143/202011/1043143-20201128081833879-1555351561.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;R&lt;/code&gt; è¯­è¨€æ”¯æŒçš„åŸºæœ¬æ“ä½œä¸»è¦æœ‰åŠ ã€å‡ã€ä¹˜ã€é™¤ã€å–ä½™å’Œå¹‚è¿ç®—ï¼Œå¯¹åº”çš„è¿ç®—ç¬¦åˆ†åˆ«ä¸ºï¼š+ã€-ã€*ã€/ã€%%ã€^ã€‚&lt;/p&gt;
&lt;p&gt;åŠ å‡ä¹˜é™¤å°±ä¸å¿…å¤šè¯´äº†ï¼Œä½†æœ‰ä¸€ç‚¹éœ€è¦æä¸€ä¸‹ï¼Œè·Ÿè®¸å¤šè¯­è¨€ä¸ä¸€æ ·çš„æ˜¯ï¼Œ&lt;code&gt;R&lt;/code&gt; è¯­è¨€ä¸­ï¼Œé™¤æ³•è¿ç®—å¾—åˆ°çš„ä¸æ˜¯æ•´æ•°éƒ¨åˆ†ï¼Œè€Œæ˜¯åŒ…å«å°æ•°éƒ¨åˆ†çš„ç»“æœã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-R&quot;&gt;&amp;gt; 9/2
[1] 4.5
&amp;gt; 9/4
[1] 2.25
&amp;gt; 11/3
[1] 3.666667
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å–ä½™è¿ç®—çš„å«ä¹‰æ˜¯è®¡ç®—æ•´é™¤åçš„ä½™æ•°ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-R&quot;&gt;&amp;gt; 9 %% 2
[1] 1
&amp;gt; 9 %% 4
[1] 1
&amp;gt; 9 %% 3
[1] 0
&amp;gt; 11 % 4
é”™è¯¯: unexpected input in &quot;11 % 4&quot;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„çš„æ˜¯æœ‰ä¸¤ä¸ªç™¾åˆ†å·ç»„æˆï¼Œè¾“å…¥é”™è¯¯åˆ™ä¼šå¾—ä¸Šä¸Šè¿°é”™è¯¯æç¤ºã€‚&lt;/p&gt;
&lt;p&gt;å¹‚è¿ç®—è·Ÿæ•°å­¦ä¸­çš„å¹‚è¿ç®—å«ä¹‰ä¸€è‡´ï¼Œ&lt;code&gt;2^3&lt;/code&gt; ä»£è¡¨çš„æ˜¯2çš„3æ¬¡å¹‚ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-R&quot;&gt;&amp;gt; 2 ^ 3
[1] 8
&amp;gt; 3 ^ 2
[1] 9
&amp;gt; 2 ^ 10
[1] 1024
&amp;gt; 2 ^ 100
[1] 1.267651e+30
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;r-è¯­è¨€ä¸­çš„å˜é‡&quot;&gt;R è¯­è¨€ä¸­çš„å˜é‡&lt;/h2&gt;
&lt;p&gt;åœ¨ä½¿ç”¨ &lt;code&gt;R&lt;/code&gt; è¯­è¨€æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸å¾ˆéš¾ä¸€æ­¥åˆ°ä½å¾—åˆ°æœ€ç»ˆçš„ç»“æœï¼Œéœ€è¦è¿›è¡Œä¸€äº›å¤æ‚çš„è®¡ç®—ã€‚è¿™æ—¶æˆ‘ä»¬ä¾¿éœ€è¦ä½¿ç”¨å˜é‡æ¥å­˜æ”¾è®¡ç®—å¾—åˆ°çš„ä¸­é—´ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;R&lt;/code&gt; è¯­è¨€ä¸­ï¼Œå¯ä»¥å°†å˜é‡æƒ³è±¡æˆä¸€ä¸ªç›’å­ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»»ä½•æ•°æ®æš‚å­˜åˆ°è¿™ä¸ªç›’å­é‡Œï¼Œä½†åŒä¸€æ—¶åˆ»ï¼Œè¿™ä¸ªç›’å­åªèƒ½ä¿å­˜ä¸€ä¸ªæ•°æ®ï¼Œå¦‚æœè¢«å¤šæ¬¡èµ‹å€¼ï¼Œåˆ™åªä¼šä¿å­˜æœ€åä¸€æ¬¡æ”¾å…¥çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;R&lt;/code&gt; è¯­è¨€ä¸­çš„èµ‹å€¼ç¬¦å·æ˜¯ &lt;code&gt;-&amp;gt;&lt;/code&gt;ï¼Œè™½ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ &lt;code&gt;=&lt;/code&gt; è¿›è¡Œèµ‹å€¼ï¼Œä½†å¼ºçƒˆå»ºè®®ä¸è¦è¿™æ ·åšï¼Œè¿™æ ·ä¸ä»…æ˜¾å¾—ä¸ä¸“ä¸šï¼Œè€Œä¸”åœ¨ä¸€äº›æƒ…å†µä¸‹ä¼šå‡ºç°é—®é¢˜ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-R&quot;&gt;&amp;gt; x &amp;lt;- 3
&amp;gt; x &amp;lt;- 4
&amp;gt; x &amp;lt;- 9
&amp;gt; x
[1] 9
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;R&lt;/code&gt; è¯­è¨€ä¸­çš„å˜é‡ä¸éœ€è¦äº‹å…ˆå£°æ˜ï¼Œç›´æ¥ä½¿ç”¨å³å¯ã€‚å¦‚æœä½¿ç”¨äº†ä¸€ä¸ªä¹‹å‰æ²¡æœ‰å‡ºç°è¿‡çš„å˜é‡ï¼Œåˆ™ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å˜é‡ã€‚&lt;code&gt;R&lt;/code&gt; è¯­è¨€ä¸­å˜é‡æ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼Œ&lt;code&gt;x&lt;/code&gt; ä¸ &lt;code&gt;X&lt;/code&gt; æ˜¯ä¸¤ä¸ªä¸åŒçš„å˜é‡ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-R&quot;&gt;&amp;gt; X
é”™è¯¯: æ‰¾ä¸åˆ°å¯¹è±¡'X'
&amp;gt; X &amp;lt;- 1
&amp;gt; X &amp;lt;- 3
&amp;gt; X
[1] 3
&amp;gt; x
[1] 9
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å˜é‡éƒ½æ˜¯æœ‰åå­—çš„ï¼Œæ¯”å¦‚&lt;code&gt;x&lt;/code&gt;ã€&lt;code&gt;y&lt;/code&gt;ã€&lt;code&gt;stu_score&lt;/code&gt;ï¼Œå˜é‡çš„å‘½åå¿…é¡»æ»¡è¶³ä»¥ä¸‹è§„åˆ™ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;åªèƒ½ä½¿ç”¨å­—æ¯ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ã€æ•°å­—ã€â€œ_â€ï¼ˆä¸‹åˆ’çº¿ï¼‰ã€â€œ.â€ï¼ˆè‹±æ–‡å¥å·ï¼‰ï¼Œä¸èƒ½æœ‰ä¸­æ–‡ã€ç©ºæ ¼å’Œå…¶å®ƒç‰¹æ®Šå­—ç¬¦å­˜åœ¨&lt;/li&gt;
&lt;li&gt;ä¸èƒ½ä»¥æ•°å­—ã€ä¸‹åˆ’çº¿å¼€å¤´ï¼Œå¼€å¤´å¿…é¡»æ˜¯è‹±æ–‡å­—æ¯æˆ–è€…ç‚¹&lt;/li&gt;
&lt;li&gt;å¯ä»¥ä»¥ç‚¹å·å¼€å¤´ï¼Œä½†ç‚¹å·åé¢çš„ç¬¦å·ä¸èƒ½æ˜¯æ•°å­—&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;åœ¨ &lt;code&gt;R&lt;/code&gt; è¯­è¨€ä¸­ï¼Œå¦‚æœéè¦æä¸€äº›éªšæ“ä½œï¼Œç”¨ä¸€äº›å¥‡æ€ªçš„å˜é‡åï¼Œä¹Ÿä¸æ˜¯ä¸å¯ä»¥ï¼Œéœ€è¦ç”¨åå¼•å·æ¥åŒ…è£¹ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-R&quot;&gt;&amp;gt; `* 90` &amp;lt;- 10
&amp;gt; `* 90`
[1] 10
&amp;gt; `å˜é‡` &amp;lt;- 20
&amp;gt; `å˜é‡`
[1] 20
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å½“ç„¶ï¼Œä¸å»ºè®®è¿™æ ·åšï¼Œå˜é‡å–åæœ€å¥½ç®€å•ä¸”æœ‰æ„ä¹‰ï¼Œè¿™æ ·å¯ä»¥å‡å°‘ä¸å…¶ä»–äººçš„æ²Ÿé€šæˆæœ¬ä»¥åŠæ—¥åçš„ç†è§£æˆæœ¬ã€‚&lt;/p&gt;
&lt;h2 id=&quot;r-è¯­è¨€ä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹&quot;&gt;R è¯­è¨€ä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;R&lt;/code&gt; è¯­è¨€ä¸­ä¸»è¦æ•°æ®ç±»å‹æœ‰ï¼šå‘é‡ã€åˆ—è¡¨ã€çŸ©é˜µã€å› å­ã€æ•°æ®æ¡†ã€æ•°ç»„ã€‚è¿™äº›ä¼šåœ¨åé¢çš„æ–‡ç« ä¸­è¿›è¡Œä»‹ç»ï¼Œæœ¬ç¯‡åªä»‹ç»åŸºæœ¬çš„å‡ ç§æ•°æ®ç±»å‹ã€‚&lt;/p&gt;
&lt;h3 id=&quot;1-é€»è¾‘å‹logical&quot;&gt;1. é€»è¾‘å‹(logical)&lt;/h3&gt;
&lt;p&gt;é€»è¾‘å‹æ•°æ®æœ‰ä¸¤ç§å¯èƒ½çš„å€¼ï¼Œ&lt;code&gt;TRUE&lt;/code&gt; æˆ– &lt;code&gt;FALSE&lt;/code&gt; ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-R&quot;&gt;&amp;gt; v &amp;lt;- TRUE
&amp;gt; class(v)
[1] &quot;logical&quot;
&amp;gt; y &amp;lt;- FALSE
&amp;gt; class(v)
[1] &quot;logical&quot;
&amp;gt; y &amp;lt;- false
é”™è¯¯: æ‰¾ä¸åˆ°å¯¹è±¡'false'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;class&lt;/code&gt; å‡½æ•°å¯ä»¥è·å–å˜é‡çš„ç±»å‹ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå˜é‡ &lt;code&gt;v&lt;/code&gt; å’Œ &lt;code&gt;y&lt;/code&gt; éƒ½æ˜¯ &lt;code&gt;logical&lt;/code&gt; ç±»å‹ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ &lt;code&gt;TRUE&lt;/code&gt; å’Œ &lt;code&gt;FALSE&lt;/code&gt; å¿…é¡»å…¨éƒ¨å¤§å†™ï¼Œå¦åˆ™ä¼šå‡ºç°ä¸Šé¢çš„é”™è¯¯æç¤ºã€‚&lt;/p&gt;
&lt;h3 id=&quot;2-æ•°å€¼å‹numeric&quot;&gt;2. æ•°å€¼å‹(numeric)&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;R&lt;/code&gt; è¯­è¨€ä¸­æ•°å­—çš„é»˜è®¤ç±»å‹ä¸ºæ•°å€¼å‹ï¼Œåœ¨è¿ç®—æ—¶éœ€è¦æ³¨æ„å…¶ç²¾åº¦é—®é¢˜ï¼Œå½“æ•´æ•°éƒ¨åˆ†å¤§äºç­‰äº7ä½æ—¶ï¼Œå°†èˆå¼ƒå°æ•°éƒ¨åˆ†ï¼Œå½“æ•´æ•°éƒ¨åˆ†å°äº7ä½æ—¶ï¼Œä¸å°æ•°éƒ¨åˆ†ä¸€èµ·æœ€å¤šä¿ç•™7ä½æ•°å­—ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-R&quot;&gt;&amp;gt; i &amp;lt;- 10
&amp;gt; class(i)
[1] &quot;numeric&quot;
&amp;gt; j &amp;lt;- 11.1
&amp;gt; class(j)
[1] &quot;numeric&quot;
&amp;gt; k &amp;lt;- 1.1234567890
&amp;gt; class(k)
[1] &quot;numeric&quot;
&amp;gt; k
[1] 1.123457
&amp;gt; k &amp;lt;- 123456789.123456789
&amp;gt; k
[1] 123456789
&amp;gt; k &amp;lt;- 1234567.123456789
&amp;gt; k
[1] 1234567
&amp;gt; k &amp;lt;- 123456.123456789
&amp;gt; k
[1] 123456.1
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;3-æ•´æ•°å‹integer&quot;&gt;3. æ•´æ•°å‹(integer)&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;R&lt;/code&gt; è¯­è¨€ä¸­ï¼Œæ•´æ•°å‹éœ€è¦ä½¿ç”¨æ•°å­—+Læ¥è¡¨ç¤ºï¼Œå¦‚ï¼š&lt;code&gt;2L&lt;/code&gt;ã€&lt;code&gt;11L&lt;/code&gt;ã€&lt;code&gt;-10L&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-R&quot;&gt;&amp;gt; i &amp;lt;- 1L
&amp;gt; class(i)
[1] &quot;integer&quot;
&amp;gt; j &amp;lt;- 22L
&amp;gt; class(j)
[1] &quot;integer&quot;
&amp;gt; k &amp;lt;- -10L
&amp;gt; class(k)
[1] &quot;integer&quot;
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;4-å­—ç¬¦å‹character&quot;&gt;4. å­—ç¬¦å‹(character)&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;R&lt;/code&gt; è¯­è¨€ä¸­å­—ç¬¦å‹å³å­—ç¬¦ä¸²ç±»å‹ï¼Œé€šå¸¸ä¸ºç”¨å•å¼•å·æˆ–åŒå¼•å·åŒ…å›´çš„å­—ç¬¦ä¸²ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-R&quot;&gt;&amp;gt; name &amp;lt;- &quot;Frank&quot;
&amp;gt; class(name)
[1] &quot;character&quot;
&amp;gt; doc_name &amp;lt;- &quot;study.mp4&quot;
&amp;gt; class(doc_name)
[1] &quot;character&quot;
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;5-å¤æ•°å‹complex&quot;&gt;5. å¤æ•°å‹(Complex)&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;R&lt;/code&gt; è¯­è¨€æ˜¯æ”¯æŒå¤æ•°è®¡ç®—çš„ï¼Œå¤æ•°ä¹Ÿæ˜¯ &lt;code&gt;R&lt;/code&gt; è¯­è¨€çš„åŸºæœ¬ç±»å‹ä¹‹ä¸€ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-R&quot;&gt;&amp;gt; c1 &amp;lt;- 3 + 2i
&amp;gt; class(c1)
[1] &quot;complex&quot;
&amp;gt; c2 &amp;lt;-6 - 3i
&amp;gt; class(c2)
[1] &quot;complex&quot;
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;6-åŸå‹raw&quot;&gt;6. åŸå‹(Raw)&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;R&lt;/code&gt; è¯­è¨€è¿˜æœ‰ä¸€ç§ä¸å¤ªå¸¸è§çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå«åŸå‹(&lt;code&gt;raw&lt;/code&gt;)ã€‚&lt;code&gt;raw&lt;/code&gt; ç±»å‹æ˜¯ç›´æ¥ä½¿ç”¨å…¶äºŒè¿›åˆ¶å†…å®¹æ¥è¿›è¡Œä¿å­˜å’Œä½¿ç”¨çš„ç±»å‹ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-R&quot;&gt;&amp;gt; v &amp;lt;- charToRaw(&quot;Hello&quot;)
&amp;gt; class(v)
[1] &quot;raw&quot;
&amp;gt; v
[1] 48 65 6c 6c 6f
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;å¦‚ä½•åˆ¤æ–­å˜é‡çš„ç±»å‹&quot;&gt;å¦‚ä½•åˆ¤æ–­å˜é‡çš„ç±»å‹&lt;/h3&gt;
&lt;p&gt;å½“æˆ‘ä»¬æ‹¿åˆ°ä¸€ä¸ªå˜é‡ä¹‹åï¼Œå¦‚ä½•åˆ¤æ–­å®ƒçš„æ•°æ®ç±»å‹å‘¢ï¼Ÿä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå…¶å®å·²ç»æœ‰æ‰€æåŠï¼Œä½¿ç”¨ &lt;code&gt;class()&lt;/code&gt; å‡½æ•°å¯ä»¥ç®€å•æ–¹ä¾¿çš„æŸ¥çœ‹å˜é‡çš„ç±»å‹ï¼Œä½†è¿˜æœ‰æ›´ç®€å•çš„æ–¹å¼ï¼Œä¸ºäº†åˆ¤æ–­æŸä¸ªå˜é‡&lt;code&gt;x&lt;/code&gt; ä¿å­˜çš„åŸºæœ¬ç±»å‹ï¼Œå¯ä»¥ç”¨ &lt;code&gt;is.xxx()&lt;/code&gt; ç±»å‡½æ•°ï¼Œå¦‚&lt;code&gt;is.integer(x)&lt;/code&gt;, &lt;code&gt;is.double(x)&lt;/code&gt;, &lt;code&gt;is.numeric(x)&lt;/code&gt;, &lt;code&gt;is.logical(x)&lt;/code&gt;, &lt;code&gt;is.character(x)&lt;/code&gt;, &lt;code&gt;is.complex(x)&lt;/code&gt;, &lt;code&gt;is.raw(x)&lt;/code&gt;ã€‚ å…¶ä¸­ &lt;code&gt;is.numeric(x)&lt;/code&gt; å¯¹ &lt;code&gt;integer&lt;/code&gt; å’Œ &lt;code&gt;double&lt;/code&gt; å†…å®¹éƒ½è¿”å›çœŸå€¼ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-R&quot;&gt;&amp;gt; is.character(s)
[1] TRUE
&amp;gt; is.character(v)
[1] FALSE
&amp;gt; is.raw(v)
[1] TRUE
&amp;gt; is.integer(i)
[1] TRUE
&amp;gt; is.numeric(i)
[1] TRUE
&amp;gt; is.complex(c1)
[1] TRUE
&amp;gt; is.integer(c1)
[1] FALSE
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;å°ç»“&quot;&gt;å°ç»“&lt;/h2&gt;
&lt;p&gt;è‡³æ­¤ï¼Œæœ¬ç¯‡å°±å‘Šä¸€æ®µè½äº†ï¼Œç›¸ä¿¡é€šè¿‡æœ¬ç¯‡çš„å­¦ä¹ ï¼Œå¯¹ &lt;code&gt;R&lt;/code&gt; è¯­è¨€çš„åŸºæœ¬æ•°æ®ç±»å‹èƒ½æœ‰ä¸€ä¸ªæ•´ä½“çš„æŒæ¡ï¼Œåˆ«å¿˜äº†å›é¡¾ä¸€ä¸‹ä¹‹å‰çš„é—®é¢˜ï¼Œè¿™äº›ä½ éƒ½äº†è§£äº†å—ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;&lt;code&gt;R&lt;/code&gt; è¯­è¨€æœ‰å“ªäº›åŸºæœ¬æ“ä½œ&lt;/li&gt;
&lt;li&gt;ä»€ä¹ˆæ˜¯å˜é‡ï¼Œä»¥åŠå¦‚ä½•ç»™å˜é‡èµ‹å€¼&lt;/li&gt;
&lt;li&gt;&lt;code&gt;R&lt;/code&gt; è¯­è¨€æœ‰å“ªäº›åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¦‚ä½•ç¡®å®šå˜é‡çš„æ•°æ®ç±»å‹&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;ä¹‹åçš„ç¯‡ç« ä¸­ï¼Œå°†ä¼šç»§ç»­ä»‹ç» &lt;code&gt;R&lt;/code&gt; è¯­è¨€çš„å„æ–¹å„é¢ï¼Œè®© &lt;code&gt;R&lt;/code&gt; è¯­è¨€èƒ½ä¸ºæˆ‘ä»¬çš„æ•°æ®åˆ†ææä¾›æ›´å¼ºåŠ›çš„æ”¯æŒï¼&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1043143/202011/1043143-20201128082031108-2075576963.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Sat, 28 Nov 2020 00:19:00 +0000</pubDate>
<dc:creator>å¼—å…°å…‹çš„çŒ«</dc:creator>
<og:description>è¯´æ˜ åœ¨å‰ä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº† R è¯­è¨€å’Œ R Studio çš„å®‰è£…ï¼Œå¹¶ç®€å•çš„ä»‹ç»äº†ä¸€ä¸ªç¤ºä¾‹ï¼Œæ¥ä¸‹æ¥è®©æˆ‘ä»¬ç”±æµ…å…¥æ·±çš„å­¦ä¹  R è¯­è¨€çš„ç›¸å…³çŸ¥è¯†ã€‚ æœ¬ç¯‡å°†ä¸»è¦ä»‹ç» R è¯­è¨€çš„åŸºæœ¬æ“ä½œã€å˜é‡å’Œå‡ ç§åŸºæœ¬æ•°æ®ç±»å‹</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/mfrank/p/14051513.html</dc:identifier>
</item>
<item>
<title>[ä»æºç å­¦è®¾è®¡]èš‚èšé‡‘æœSOFARegistryç½‘ç»œæ“ä½œä¹‹è¿æ¥ç®¡ç† - ç½—è¥¿çš„æ€è€ƒ</title>
<link>http://www.cnblogs.com/rossiXYZ/p/14051509.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/rossiXYZ/p/14051509.html</guid>
<description>&lt;p&gt;SOFARegistry æ˜¯èš‚èšé‡‘æœå¼€æºçš„ä¸€ä¸ªç”Ÿäº§çº§ã€é«˜æ—¶æ•ˆã€é«˜å¯ç”¨çš„æœåŠ¡æ³¨å†Œä¸­å¿ƒã€‚æœ¬ç³»åˆ—æ–‡ç« é‡ç‚¹åœ¨äºåˆ†æè®¾è®¡å’Œæ¶æ„ï¼Œå³åˆ©ç”¨å¤šç¯‡æ–‡ç« ï¼Œä»å¤šä¸ªè§’åº¦åæ¨æ€»ç»“ DataServer æˆ–è€… SOFARegistry çš„å®ç°æœºåˆ¶å’Œæ¶æ„æ€è·¯ï¼Œè®©å¤§å®¶å€Ÿä»¥å­¦ä¹ é˜¿é‡Œå¦‚ä½•è®¾è®¡ã€‚æœ¬æ–‡ä¸ºç¬¬ä¸‰ç¯‡ï¼Œä»‹ç»SOFARegistryç½‘ç»œæ“ä½œä¹‹è¿æ¥ç®¡ç†ã€‚&lt;/p&gt;&lt;div id=&quot;cnblogs_post_body&quot; readability=&quot;438.11785923182&quot;&gt;


&lt;h2 id=&quot;0x00-æ‘˜è¦&quot;&gt;0x00 æ‘˜è¦&lt;/h2&gt;
&lt;p&gt;SOFARegistry æ˜¯èš‚èšé‡‘æœå¼€æºçš„ä¸€ä¸ªç”Ÿäº§çº§ã€é«˜æ—¶æ•ˆã€é«˜å¯ç”¨çš„æœåŠ¡æ³¨å†Œä¸­å¿ƒã€‚&lt;/p&gt;
&lt;p&gt;æœ¬ç³»åˆ—æ–‡ç« é‡ç‚¹åœ¨äºåˆ†æè®¾è®¡å’Œæ¶æ„ï¼Œå³åˆ©ç”¨å¤šç¯‡æ–‡ç« ï¼Œä»å¤šä¸ªè§’åº¦åæ¨æ€»ç»“ DataServer æˆ–è€… SOFARegistry çš„å®ç°æœºåˆ¶å’Œæ¶æ„æ€è·¯ï¼Œè®©å¤§å®¶å€Ÿä»¥å­¦ä¹ é˜¿é‡Œå¦‚ä½•è®¾è®¡ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä¸ºç¬¬ä¸‰ç¯‡ï¼Œä»‹ç»SOFARegistryç½‘ç»œæ“ä½œä¹‹è¿æ¥ç®¡ç†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;0x01-ä¸šåŠ¡é¢†åŸŸ&quot;&gt;0x01 ä¸šåŠ¡é¢†åŸŸ&lt;/h2&gt;
&lt;p&gt;ä¸Šæ–‡æˆ‘ä»¬è®²è§£äº†SOFARegistryçš„ç½‘ç»œå°è£…å’Œæ“ä½œï¼Œæœ¬æ–‡ç»§ç»­ç½‘ç»œç›¸å…³éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶SOFABoltåº•å±‚å·²ç»åšäº†è¿æ¥ç®¡ç†ï¼Œæ¯”å¦‚æœ‰Managerï¼Œpoolï¼Œä½†æ˜¯SOFARegistryåœ¨ä¸Šå±‚ç»“åˆä¸šåŠ¡ä¹Ÿåšäº†è¿æ¥ç®¡ç†ï¼Œå¾ˆæœ‰ç‰¹è‰²ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸“æ–‡è®²è§£ã€‚&lt;/p&gt;
&lt;h3 id=&quot;11-åº”ç”¨åœºæ™¯&quot;&gt;1.1 åº”ç”¨åœºæ™¯&lt;/h3&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬é›†ä¸­ä»DataServerè§’åº¦å‡ºå‘è®²è§£ï¼Œæ­¤å¤„å’Œä¸šåŠ¡ç´§å¯†ç»“åˆã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬å¤§è‡´æƒ³æƒ³DataServeréœ€è¦ç®¡ç†å“ªäº›è¿æ¥æˆ–è€…ç±»ä¼¼æ¦‚å¿µã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;MetaServer Connectionï¼šæœ¬DataServerä¸Meta Serverçš„è¿æ¥ï¼Œç”¨æ¥å’ŒMeta Serveräº¤äº’ï¼›&lt;/li&gt;
&lt;li&gt;DataServer Connectionï¼šæœ¬DataServerä¸å…¶ä»–dataServerçš„è¿æ¥ï¼Œç”¨æ¥æ•°æ®åŒæ­¥ï¼›&lt;/li&gt;
&lt;li&gt;æ‰©å±•å¼€æ¥ï¼Œå…¶ä»–Data ServerèŠ‚ç‚¹ä¹Ÿéœ€è¦ç®¡ç†ï¼›&lt;/li&gt;
&lt;li&gt;SessionServer Connectionï¼Œæœ¬DataServerä¸Session serverçš„è¿æ¥ï¼Œè¿™ä¸ªéå¸¸å¤æ‚ï¼Œè¿™é‡Œä¼šé‡ç‚¹è®²è§£ï¼›&lt;/li&gt;
&lt;li&gt;åœ¨SessionServeræ–¹é¢ï¼Œåˆéœ€è¦åŒºåˆ†å…·ä½“æ¯ä¸ªPublisherï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;è¿™å°±è®©æˆ‘ä»¬æ¥æ€è€ƒå‡ ä¸ªé—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ç©¶ç«Ÿä»€ä¹ˆå¯ä»¥å”¯ä¸€æ ‡ç¤ºä¸€ä¸ªSessionServerï¼Ÿ&lt;/li&gt;
&lt;li&gt;ä»€ä¹ˆå¯ä»¥å”¯ä¸€æ ‡ç¤ºä¸€ä¸ªPublisherï¼Ÿip : portï¼Ÿæˆ–è€…å…¶ä»–ï¼Ÿ&lt;/li&gt;
&lt;li&gt;ä¸šåŠ¡ä¸Šæœ‰æ²¡æœ‰ç‰¹æ®Šè€ƒè™‘çš„éœ€è¦ï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å…·ä½“æˆ‘ä»¬åœ¨åæ–‡ä¼šè¯¦è¿°é˜¿é‡Œçš„æ€è·¯ã€‚&lt;/p&gt;
&lt;h2 id=&quot;0x02-ç®¡ç†å†…å®¹&quot;&gt;0x02 ç®¡ç†å†…å®¹&lt;/h2&gt;
&lt;h3 id=&quot;21-è¿æ¥ç®¡ç†&quot;&gt;2.1 è¿æ¥ç®¡ç†&lt;/h3&gt;
&lt;p&gt;é¦–å…ˆè®²è®²æ™®éæ„ä¹‰çš„è¿æ¥ç®¡ç†ã€‚&lt;/p&gt;
&lt;p&gt;è¿æ¥ç®¡ç†æ˜¯ç½‘ç»œæ“ä½œä¸­çš„æ ¸å¿ƒã€‚æˆ‘ä»¬çŸ¥é“ï¼Œä¸€æ¬¡ tcp è¯·æ±‚å¤§è‡´åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼šå»ºç«‹è¿æ¥ã€é€šä¿¡ã€å…³é—­è¿æ¥ã€‚æ¯æ¬¡å»ºç«‹æ–°è¿æ¥éƒ½ä¼šç»å†ä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸­é—´åŒ…å«ä¸‰æ¬¡ç½‘ç»œä¼ è¾“ï¼Œå¯¹äºé«˜å¹¶å‘çš„ç³»ç»Ÿï¼Œè¿™æ˜¯ä¸€ç¬”ä¸å°çš„è´Ÿæ‹…ï¼›å…³é—­è¿æ¥åŒæ ·å¦‚æ­¤ã€‚ä¸ºäº†å‡å°‘æ¯æ¬¡ç½‘ç»œè°ƒç”¨è¯·æ±‚çš„å¼€é”€ï¼Œå¯¹è¿æ¥è¿›è¡Œç®¡ç†ã€å¤ç”¨ï¼Œå¯ä»¥æå¤§çš„æé«˜ç³»ç»Ÿçš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æé«˜é€šä¿¡æ•ˆç‡ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘å¤ç”¨è¿æ¥ï¼Œå‡å°‘ TCP ä¸‰æ¬¡æ¡æ‰‹çš„æ¬¡æ•°ï¼Œå› æ­¤éœ€è¦æœ‰è¿æ¥ç®¡ç†çš„æœºåˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;å…³äºè¿æ¥ç®¡ç†ï¼Œ&lt;u&gt;SOFARegistryæœ‰ä¸¤ç»´åº¦å±‚æ¬¡çš„è¿æ¥ç®¡ç†ï¼Œåˆ†åˆ«æ˜¯ Connection å’Œ Node&lt;/u&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&quot;22-ç®¡ç†å†…å®¹&quot;&gt;2.2 ç®¡ç†å†…å®¹&lt;/h3&gt;
&lt;p&gt;æ™®éæ„ä¹‰çš„è¿æ¥ç®¡ç†ï¼Œé€šå¸¸éœ€è¦å¤„ç†ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;è¿æ¥åˆ›å»ºä¸é”€æ¯&lt;/li&gt;
&lt;li&gt;å¿ƒè·³ç®¡ç†&lt;/li&gt;
&lt;li&gt;ç©ºé—²è¿æ¥ç®¡ç†&lt;/li&gt;
&lt;li&gt;æ–­çº¿é‡è¿&lt;/li&gt;
&lt;li&gt;æ…¢è¿æ¥å¤„ç†&lt;/li&gt;
&lt;li&gt;ä½œä¸ºä¸€ä¸ªæ¡†æ¶ï¼Œå½“ç„¶è¿˜éœ€è¦æŠŠå„ç§è¿æ¥äº‹ä»¶åˆ†æ´¾ç»™ç”¨æˆ·è¿›è¡Œå®šåˆ¶&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;u&gt;å› ä¸ºSOFABoltåº•å±‚å·²ç»åšäº†åº•å±‚è¿æ¥ç®¡ç†ï¼Œæ‰€ä»¥SOFARegistryåªè¦åšé¡¶å±‚éƒ¨åˆ†è¿æ¥ç®¡ç†å³å¯ï¼Œå°±æ˜¯ä»ä¸šåŠ¡è§’åº¦åŒºåˆ†ä¿å­˜è¿æ¥&lt;/u&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&quot;0x03-connectionç®¡ç†&quot;&gt;0x03 Connectionç®¡ç†&lt;/h2&gt;
&lt;h3 id=&quot;31-connectionå¯¹è±¡&quot;&gt;3.1 Connectionå¯¹è±¡&lt;/h3&gt;
&lt;p&gt;è¿™é‡Œè¯´çš„Connectionæˆ‘ä»¬ç‰¹æŒ‡&lt;u&gt;&lt;strong&gt;sofa-boltçš„Connectionå¯¹è±¡&lt;/strong&gt;&lt;/u&gt;&lt;code&gt;com.alipay.remoting.Connection&lt;/code&gt;ã€‚å‰æ–‡æåˆ°ï¼ŒSOFARegistryæŠŠsofa-boltçš„Connectionå¯¹è±¡ç›´æ¥æš´éœ²å‡ºæ¥ã€‚&lt;/p&gt;
&lt;p&gt;é¢å‘è¿æ¥çš„TCPåè®®è¦æ±‚æ¯æ¬¡peeré—´é€šä¿¡å‰å»ºç«‹ä¸€æ¡TCPè¿æ¥ï¼Œè¯¥è¿æ¥å¯æŠ½è±¡ä¸ºä¸€ä¸ª4å…ƒç»„ï¼ˆfour-tupleï¼Œæœ‰æ—¶ä¹Ÿç§°socket pairï¼‰ï¼š&lt;code&gt;socketï¼ˆlocalIp, localPort, remoteIp, remotePort ï¼‰&lt;/code&gt;ï¼Œè¿™4ä¸ªå…ƒç´ å”¯ä¸€åœ°ä»£è¡¨ä¸€æ¡TCPè¿æ¥ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨Nettyä¸­ç”¨Channelæ¥è¡¨ç¤ºä¸€æ¡TCPè¿æ¥ï¼Œ&lt;u&gt;åœ¨sofa-boltä½¿ç”¨Connectionå¯¹è±¡æ¥æŠ½è±¡ä¸€ä¸ªè¿æ¥ï¼Œä¸€ä¸ªè¿æ¥åœ¨clientè·Ÿserverç«¯å„ç”¨ä¸€ä¸ªconnectionå¯¹è±¡è¡¨ç¤º&lt;/u&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰äº†Connectionè¿™ä¸ªæŠ½è±¡ä¹‹åï¼Œè‡ªç„¶çš„éœ€è¦æä¾›æ¥å£æ¥ç®¡ç†Connection, è¿™ä¸ªæ¥å£å°±æ˜¯ConnectionFactoryã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆConnectionæ˜¯å¦‚ä½•è·ŸNettyè¿›è¡Œè”åŠ¨å‘¢ã€‚æˆ‘ä»¬çŸ¥é“åœ¨Nettyä¸­ï¼Œclientè¿æ¥åˆ°serveråï¼Œserverä¼šå›è°ƒ&lt;code&gt;initChannel&lt;/code&gt;æ–¹æ³•ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•æˆ‘ä»¬ä¼šåˆå§‹åŒ–å„ç§äº‹ä»¶handlerï¼Œsofa-boltå°±åœ¨è¿™é‡Œåˆ›å»ºConnectionï¼Œå¹¶åœ¨Nettyçš„Channelå¯¹è±¡ä¸Šæ‰“ä¸ŠConnectionæ ‡ï¼Œåç»­é€šè¿‡Channelå°±å¯ä»¥ç›´æ¥æ‰¾åˆ°è¿™ä¸ªConnectionã€‚&lt;/p&gt;
&lt;h3 id=&quot;32-connectionç±»å®šä¹‰&quot;&gt;3.2 Connectionç±»å®šä¹‰&lt;/h3&gt;
&lt;p&gt;Connectionå…¶åˆ å‡ç‰ˆå®šä¹‰å¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°&lt;u&gt;å…¶ä¸»è¦æˆå‘˜å°±æ˜¯ Netty channel å®ä¾‹&lt;/u&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class Connection {

    private Channel                                                               channel;

    private final ConcurrentHashMap&amp;lt;Integer, InvokeFuture&amp;gt;                        invokeFutureMap  = new ConcurrentHashMap&amp;lt;Integer, InvokeFuture&amp;gt;(4);

    /** Attribute key for connection */
    public static final AttributeKey&amp;lt;Connection&amp;gt;                                  CONNECTION       = AttributeKey.valueOf(&quot;connection&quot;);
  
    /** Attribute key for heartbeat count */
    public static final AttributeKey&amp;lt;Integer&amp;gt;                                     HEARTBEAT_COUNT  = AttributeKey.valueOf(&quot;heartbeatCount&quot;);

    /** Attribute key for heartbeat switch for each connection */
    public static final AttributeKey&amp;lt;Boolean&amp;gt;                                     HEARTBEAT_SWITCH = AttributeKey.valueOf(&quot;heartbeatSwitch&quot;);

    /** Attribute key for protocol */
    public static final AttributeKey&amp;lt;ProtocolCode&amp;gt;                                PROTOCOL         = AttributeKey.valueOf(&quot;protocol&quot;);

    /** Attribute key for version */
    public static final AttributeKey&amp;lt;Byte&amp;gt;                                        VERSION          = AttributeKey.valueOf(&quot;version&quot;);

    private Url                                                                   url;

    private final ConcurrentHashMap&amp;lt;Integer/* id */, String/* poolKey */&amp;gt;       id2PoolKey       = new ConcurrentHashMap&amp;lt;Integer, String&amp;gt;(256);

    private Set&amp;lt;String&amp;gt;                                                           poolKeys         = new ConcurrentHashSet&amp;lt;String&amp;gt;();

    private final ConcurrentHashMap&amp;lt;String/* attr key*/, Object /*attr value*/&amp;gt; attributes       = new ConcurrentHashMap&amp;lt;String, Object&amp;gt;();
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;çœå» AtributeKey ç±»å‹å®šä¹‰ä»¥åŠ Log é…ç½®ï¼Œä»¥ä¸Šæ˜¯Connectionä¸­ä¸»è¦çš„æˆå‘˜å˜é‡ã€‚åŒ…æ‹¬å‡ ä¸ªæ–¹é¢:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;è¿æ¥ï¼šChannelã€Url&lt;/li&gt;
&lt;li&gt;ç‰ˆæœ¬ï¼šprotocolCodeã€version&lt;/li&gt;
&lt;li&gt;è°ƒç”¨ï¼šinvokeFutureMap&lt;/li&gt;
&lt;li&gt;é™„ç€ï¼šattributes&lt;/li&gt;
&lt;li&gt;å¼•ç”¨ï¼šreferenceCountã€id2PoolKeyã€poolKeys&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;è¿™é‡Œæä¸€ä¸‹ protocolCode å’Œ versionï¼Œç‰ˆæœ¬ä¿¡æ¯ä¼šè¢«æºå¸¦è‡³å¯¹ç«¯ï¼Œç”¨äºè¿æ¥çš„åå•†ã€‚æ€»çš„æ¥è¯´ï¼Œ&lt;u&gt;é€šè¿‡å¯¹äº Channel çš„åŒ…è£…ï¼ŒConnection æä¾›äº†ä¸°å¯Œçš„ä¸Šä¸‹æ–‡åŠå¼•ç”¨ä¿¡æ¯ï¼Œæ˜¯ SOFABolt è¿æ¥ç®¡ç†çš„ç›´æ¥å¯¹è±¡&lt;/u&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&quot;33-connectionfactory&quot;&gt;3.3 ConnectionFactory&lt;/h3&gt;
&lt;p&gt;SOFARegistryå»ºç«‹äº†ConnectionFactory è¿æ¥å·¥å‚ï¼Œè´Ÿè´£åˆ›å»ºè¿æ¥ã€æ£€æµ‹è¿æ¥ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæˆ‘å¯¹Connectionè¿›è¡Œäº†ç§ç±»ï¼Œåˆ†ç±»æ˜¯æˆ‘ä»ä¸šåŠ¡è§’åº¦å‡ºå‘ï¼Œå¼ºè¡Œåˆ†ä¸ºä¸‰ç§Connectionï¼Œåªæ˜¯ä¸ºäº†è®²è§£æ–¹ä¾¿ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;MetaServerConnectionFactoryï¼Œæ˜¯Meta Serverçš„è¿æ¥ï¼Œç”¨æ¥å’ŒMeta Serveräº¤äº’ã€‚&lt;/li&gt;
&lt;li&gt;DataServerConnectionFactory ï¼Œæ˜¯å…¶ä»–dataServerçš„è¿æ¥ï¼Œç”¨æ¥æ•°æ®åŒæ­¥ï¼›&lt;/li&gt;
&lt;li&gt;SessionServerConnectionFactoryï¼Œæ˜¯Session serverçš„è¿æ¥ï¼Œè¿™ä¸ªéå¸¸å¤æ‚ï¼Œåç»­ä¼šé‡ç‚¹è®²è§£ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;34-metaserverconnectionfactory&quot;&gt;3.4 MetaServerConnectionFactory&lt;/h3&gt;
&lt;p&gt;MetaServerConnectionFactory å°±æ˜¯ç”¨æ¥å¯¹&lt;code&gt;com.alipay.remoting.Connection&lt;/code&gt;è¿›è¡Œè¿æ¥ç®¡ç†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;u&gt;å…¶æ ¸å¿ƒå˜é‡æ˜¯ä¸€ä¸ªåŒå±‚Mapï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªçŸ©é˜µï¼Œå…¶ç»´åº¦æ˜¯ Map&amp;lt;dataCenter, Map&amp;lt;ip, Connection&amp;gt;&amp;gt;&lt;/u&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å…¶å†…éƒ¨å‡½æ•°æ¯”è¾ƒç®€å•ï¼Œæœ›åç”Ÿæ„ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class MetaServerConnectionFactory {

    private final Map&amp;lt;String, Map&amp;lt;String, Connection&amp;gt;&amp;gt; MAP = new ConcurrentHashMap&amp;lt;&amp;gt;();

    /**
     * @param dataCenter
     * @param ip
     * @param connection
     */
    public void register(String dataCenter, String ip, Connection connection) {

        Map&amp;lt;String, Connection&amp;gt; connectionMap = MAP.get(dataCenter);
        if (connectionMap == null) {
            Map&amp;lt;String, Connection&amp;gt; newConnectionMap = new ConcurrentHashMap&amp;lt;&amp;gt;();
            connectionMap = MAP.putIfAbsent(dataCenter, newConnectionMap);
            if (connectionMap == null) {
                connectionMap = newConnectionMap;
            }
        }

        connectionMap.put(ip, connection);
    }

    /**
     * @param dataCenter
     * @param ip
     */
    public Connection getConnection(String dataCenter, String ip) {
        if (MAP.containsKey(dataCenter)) {
            Map&amp;lt;String, Connection&amp;gt; map = MAP.get(dataCenter);
            if (map.containsKey(ip)) {
                return map.get(ip);
            }
        }
        return null;
    }

    /**
     * @param dataCenter
     */
    public Map&amp;lt;String, Connection&amp;gt; getConnections(String dataCenter) {
        if (MAP.containsKey(dataCenter)) {
            return MAP.get(dataCenter);
        }
        return new HashMap&amp;lt;&amp;gt;();
    }

    /**
     * @param dataCenter
     */
    public Set&amp;lt;String&amp;gt; getIps(String dataCenter) {
        if (MAP.containsKey(dataCenter)) {
            Map&amp;lt;String, Connection&amp;gt; map = MAP.get(dataCenter);
            if (map != null) {
                return map.keySet();
            }
        }
        return new HashSet&amp;lt;&amp;gt;();
    }

    /**
     * @param dataCenter
     */
    public void remove(String dataCenter) {
        Map&amp;lt;String, Connection&amp;gt; map = getConnections(dataCenter);
        if (!map.isEmpty()) {
            for (Connection connection : map.values()) {
                if (connection.isFine()) {
                    connection.close();
                }
            }
        }
        MAP.remove(dataCenter);
    }

    /**
     * @param dataCenter
     * @param ip
     */
    public void remove(String dataCenter, String ip) {
        if (MAP.containsKey(dataCenter)) {
            Map&amp;lt;String, Connection&amp;gt; map = MAP.get(dataCenter);
            if (map != null) {
                map.remove(ip);
            }
        }
    }

    public Set&amp;lt;String&amp;gt; getAllDataCenters() {
        return MAP.keySet();
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;35-dataserverconnectionfactory&quot;&gt;3.5 DataServerConnectionFactory&lt;/h3&gt;
&lt;p&gt;DataServerConnectionFactory å°±æ˜¯ç”¨æ¥å¯¹&lt;code&gt;com.alipay.remoting.Connection&lt;/code&gt;è¿›è¡Œè¿æ¥ç®¡ç†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;u&gt;å…¶æ ¸å¿ƒå˜é‡æ˜¯ä»¥ip:portä½œä¸ºkeyï¼ŒConnectionä½œä¸ºvalueçš„ä¸€ä¸ªMap&lt;/u&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å…¶å†…éƒ¨å‡½æ•°æ¯”è¾ƒç®€å•ï¼Œæœ›åç”Ÿæ„ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;import com.alipay.remoting.Connection;

/**
 * the factory to hold connections that other dataservers connected to local server
 */
public class DataServerConnectionFactory {

    /**
     * collection of connections
     * key:connectId ip:port
     */
    private final Map&amp;lt;String, Connection&amp;gt; MAP = new ConcurrentHashMap&amp;lt;&amp;gt;();

    /**
     * register connection
     *
     * @param connection
     */
    public void register(Connection connection) {
        MAP.put(getConnectId(connection), connection);
    }

    /**
     * remove connection by specific ip+port
     *
     * @param connection
     */
    public void remove(Connection connection) {
        MAP.remove(getConnectId(connection));
    }

    /**
     * get connection by ip
     *
     * @param ip
     * @return
     */
    public Connection getConnection(String ip) {
        return MAP.values().stream().filter(connection -&amp;gt; ip.equals(connection.getRemoteIP()) &amp;amp;&amp;amp; connection.isFine()).findFirst().orElse(null);
    }

    private String getConnectId(Connection connection) {
        return connection.getRemoteIP() + &quot;:&quot; + connection.getRemotePort();
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;351-æ³¨å†Œ&quot;&gt;3.5.1 æ³¨å†Œ&lt;/h4&gt;
&lt;p&gt;å½“éœ€è¦ç®¡ç†è¿æ¥æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹æ¥è¿›è¡Œæ³¨å†Œã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public void connected(Channel channel) throws RemotingException {
    super.connected(channel);
    dataServerConnectionFactory.register(((BoltChannel) channel).getConnection());
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™æ ·å¾€ConcurrentHashMap clientæ”¾å…¥ï¼Œæ˜¯æ ¹æ®IPå’Œportæ„å»ºäº†urlï¼Œç„¶åurlä½œä¸ºkeyã€‚&lt;/p&gt;
&lt;h4 id=&quot;352-è·å–&quot;&gt;3.5.2 è·å–&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;com.alipay.remoting.Connection&lt;/code&gt; å¯ä»¥é€šè¿‡Channelè¿›è¡Œè·å–ã€‚&lt;/p&gt;
&lt;p&gt;DataNodeExchangerå°±é‡‡ç”¨å¦‚ä¸‹æ–¹å¼è·å–Clientã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;conn = ((BoltChannel) dataNodeExchanger.connect(new URL(ip, dataServerConfig
    .getSyncDataPort()))).getConnection();
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;353-datasyncserverconnectionhandler&quot;&gt;3.5.3 DataSyncServerConnectionHandler&lt;/h4&gt;
&lt;p&gt;æœ‰äº†æ³¨å†Œä¸è·å–ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹è¿æ¥äº‹ä»¶å“åº”ã€‚&lt;/p&gt;
&lt;p&gt;DataSyncServerConnectionHandler æ˜¯ server çš„handlerã€‚&lt;/p&gt;
&lt;p&gt;å‰æ–‡æåˆ°äº†ï¼ŒDataSyncServerConnectionHandleræ˜¯è¿æ¥äº‹ä»¶å¤„ç†å™¨ (ConnectionEventProcessor)ï¼Œç”¨æ¥ç›‘å¬å»ºè¿äº‹ä»¶ï¼ˆConnectionEventType.CONNECTï¼‰ä¸æ–­è¿äº‹ä»¶ï¼ˆConnectionEventType.CLOSEï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œå°±æ˜¯é’ˆå¯¹å„ç§äº‹ä»¶ï¼Œç®€å•çš„å¯¹Connectionåšç›¸åº”ç»´æŠ¤ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class DataSyncServerConnectionHandler extends AbstractServerHandler {
    @Autowired
    private DataServerConnectionFactory dataServerConnectionFactory;

    @Override
    public ChannelHandler.HandlerType getType() {
        return ChannelHandler.HandlerType.LISENTER;
    }

    @Override
    public void connected(Channel channel) throws RemotingException {
        super.connected(channel);
        dataServerConnectionFactory.register(((BoltChannel) channel).getConnection());
    }

    @Override
    public void disconnected(Channel channel) throws RemotingException {
        super.disconnected(channel);
        dataServerConnectionFactory.remove(((BoltChannel) channel).getConnection());
    }

    @Override
    protected Node.NodeType getConnectNodeType() {
        return Node.NodeType.DATA;
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;36-sessionserverconnectionfactory&quot;&gt;3.6 SessionServerConnectionFactory&lt;/h3&gt;
&lt;p&gt;SessionServerConnectionFactory åŒ…æ‹¬å¤æ‚çš„é€»è¾‘ã€‚&lt;/p&gt;
&lt;h4 id=&quot;361-é—®é¢˜&quot;&gt;3.6.1 é—®é¢˜&lt;/h4&gt;
&lt;p&gt;å›é¡¾å‰é¢é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ç©¶ç«Ÿä»€ä¹ˆå¯ä»¥å”¯ä¸€æ ‡ç¤ºä¸€ä¸ªSessionServerï¼Ÿ&lt;/li&gt;
&lt;li&gt;ä»€ä¹ˆå¯ä»¥å”¯ä¸€æ ‡ç¤ºä¸€ä¸ªPublisherï¼Ÿ&lt;/li&gt;
&lt;li&gt;ip : portï¼Ÿæˆ–è€…å…¶ä»–ï¼Ÿ&lt;/li&gt;
&lt;li&gt;ä¸šåŠ¡ä¸Šæœ‰æ²¡æœ‰ç‰¹æ®Šè€ƒè™‘çš„éœ€è¦ï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä¸‹é¢æˆ‘ä»¬å°±ä¸€ä¸€çœ‹çœ‹é˜¿é‡Œå¦‚ä½•å¤„ç†ã€‚&lt;/p&gt;
&lt;h4 id=&quot;362-é€»è¾‘æ¦‚å¿µå’Œå…³ç³»&quot;&gt;3.6.2 é€»è¾‘æ¦‚å¿µå’Œå…³ç³»&lt;/h4&gt;
&lt;p&gt;é¦–å…ˆè¦è®²è®²é˜¿é‡Œçš„å‡ ä¸ªé€»è¾‘æ¦‚å¿µï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;process Id&lt;/strong&gt; ä»£è¡¨äº†Session Serverï¼Œæ ¼å¼æ˜¯ç±»ä¼¼uidçš„æ„å»ºï¼Œæ¯ä¸ªSession Serveræœ‰ä¸€ä¸ªå”¯ä¸€çš„process Idï¼ŒSession Serverä¸process Idæ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Connection&lt;/strong&gt; å°±æ˜¯ä¸€ä¸ª Session Server å’Œ Data Server ä¹‹é—´çš„ Connectionï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;connect Id&lt;/strong&gt; ä»£è¡¨äº†Publisherï¼Œæ ¼å¼æ˜¯ ip : portã€‚connect Idä¸Publisheræ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ï¼›&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªSession ServeråŒ…æ‹¬è®¸å¤šPubliserï¼Œå³è®¸å¤šconnection idï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Session Server address&lt;/strong&gt; æ˜¯ä¸€ä¸ª ip : port çš„ç»„åˆï¼Œä»£è¡¨ä¸€ä¸ª Connection çš„ session server é‚£ä¸€ç«¯ï¼›&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ª Session Server å¯èƒ½å¯¹äºä¸€ä¸ªdata Serveræœ‰å¤šä¸ªè¿æ¥ï¼›&lt;u&gt;è¿™ä¸ªç›®å‰åŸå› ä¸çŸ¥ï¼Œæ²¡æœ‰å‘ç°ä¸šåŠ¡åŸå› &lt;/u&gt;ï¼Œå¯èƒ½æ¨æµ‹å¦‚ä¸‹ï¼šå› ä¸ºè¿æ¥æ•æ„Ÿæ€§ï¼Œç½‘ç»œä¸ç¨³å®šæ€§ï¼Œæ‰€ä»¥SOFABolté‡è¿æ—¶å€™ä¼šé€‰æ‹©ä¸€ä¸ªæ–°ç«¯å£ï¼Œæ‰€ä»¥ä¼šæœ‰å¤šä¸ªConnectionå­˜åœ¨ã€‚æ‰€ä»¥ä¸€ä¸ªprocessIDå¯¹åº”å¤šä¸ªsessionConnAddressï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å…·ä½“å°±æ˜¯ï¼Œ&lt;u&gt;SOFARegistry å°†æœåŠ¡æ•°æ® ï¼ˆPublisherRegisterï¼‰ å’Œ æœåŠ¡å‘å¸ƒè€… ï¼ˆPublisherï¼‰ çš„è¿æ¥çš„ç”Ÿå‘½å‘¨æœŸç»‘å®šåœ¨ä¸€èµ·&lt;/u&gt;ï¼šæ¯ä¸ª PublisherRegister å®šä¹‰å±æ€§ connIdï¼ŒconnId ç”±æ³¨å†Œæœ¬æ¬¡æœåŠ¡çš„ Publisher çš„è¿æ¥æ ‡è¯† ï¼ˆIP å’Œ Portï¼‰æ„æˆï¼Œä¹Ÿå°±æ˜¯åªè¦è¯¥ Publisher å’Œ SessionServer æ–­è¿ï¼ŒæœåŠ¡ä¿¡æ¯æ•°æ®å³å¤±æ•ˆã€‚å®¢æˆ·ç«¯é‡æ–°å»ºè¿æˆåŠŸåé‡æ–°æ³¨å†ŒæœåŠ¡æ•°æ®ï¼Œé‡æ–°æ³¨å†Œçš„æœåŠ¡æ•°æ®ä¼šè¢«å½“æˆæ–°çš„æ•°æ®ï¼Œè€ƒè™‘æ›´æ¢é•¿è¿æ¥å Publisher çš„ connId æ˜¯ Renew æ–°ç”Ÿæˆçš„ã€‚&lt;/p&gt;
&lt;h4 id=&quot;363-ç¤ºä¾‹å›¾&quot;&gt;3.6.3 ç¤ºä¾‹å›¾&lt;/h4&gt;
&lt;p&gt;æˆ‘ä»¬å‡è®¾ä¸€ä¸ªSession serverå†…éƒ¨æœ‰ä¸¤ä¸ª Publisherï¼Œéƒ½è¿æ¥åˆ°ä¸€ä¸ªData Serverä¸Šã€‚&lt;/p&gt;
&lt;p&gt;è¿™äº› address æ ¼å¼éƒ½æ˜¯ ip : portï¼Œä¸¾ä¾‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul readability=&quot;3&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;SessionServer address 1 æ˜¯ ï¼š1.1.2.3 : 1&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;SessionServer address 2 æ˜¯ ï¼š1.1.2.3 : 2&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;SessionServer address 3 æ˜¯ ï¼š1.1.2.3 : 3&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;SessionServer address 4 æ˜¯ ï¼š1.1.2.3 : 4&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;DataServer address 1 æ˜¯ ï¼š2.2.2.3 : 1&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;DataServer address 2 æ˜¯ ï¼š2.2.2.3 : 2&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å…·ä½“é€»è¾‘å¦‚å›¾ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;    +----------+                        +----------+
    |  Client  |                        |  Client  |
    +----+-----+                        +----+-----+
         |                                   |
         |                                   |
         |                                   |
         |                                   |
         |  SessionServer address 1          |   SessionServer address 2
         v                                   v
+--------+-----------------------------------+----------------+
|                Session Server(process Id)                   |
|                                                             |
| +------------------------+        +-----------------------+ |
| |  Publisher(connect Id) |  ...   | Publisher(connect Id) | |
| +------------------------+        +-----------------------+ |
+-------------------------------------------------------------+
         | SessionServer address 3                  |  SessionServer address 4
         |                                          |
         |                                          |
         |                                          |
         |                                          |
         +----------&amp;gt;  +---------------+  &amp;lt;---------+
DataServer address 1   |  Data Server  |    DataServer address 2
                       +---------------+

&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;364-ä¸»è¦å˜é‡&quot;&gt;3.6.4 ä¸»è¦å˜é‡&lt;/h4&gt;
&lt;p&gt;æ‰€ä»¥ï¼ŒSessionServerConnectionFactoryçš„å‡ ä¸ªå˜é‡å°±å¯¹åº”äº†ä¸Šè¿°è¿™äº›é€»è¾‘å…³ç³»ï¼Œå…·ä½“å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;SESSION_CONN_PROCESS_ID_MAP ï¼š Map&amp;lt;SessionServer address, SessionServer processId&amp;gt;ï¼Œè¿™ä¸ªä»£è¡¨äº†æ€ä¹ˆä» SessionServer address æ‰¾åˆ° SessionServer processIdï¼Œæ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ï¼›&lt;/li&gt;
&lt;li&gt;PROCESS_ID_CONNECT_ID_MAP ï¼š Map&amp;lt;SessionServer processId, Set&amp;lt;ip:port of clients&amp;gt; &amp;gt;ï¼Œè¿™ä¸ªä»£è¡¨äº†&lt;u&gt;ä¸€ä¸ªSession Server åŒ…æ‹¬äº†å“ªäº›Publiser&lt;/u&gt;ï¼›&lt;/li&gt;
&lt;li&gt;PROCESS_ID_SESSION_CONN_MAP ï¼š Map&amp;lt;SessionServer processId, pair(SessionServer address, SessionServer connection)&amp;gt;ï¼Œè¿™ä»£è¡¨äº†&lt;u&gt;ä¸€ä¸ª Session Server åŒ…æ‹¬å“ªäº› Connection&lt;/u&gt;ï¼Œæ¯ä¸ªConnection è¢«å…¶Session Server ç«¯çš„address å”¯ä¸€ç¡®å®šï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;è¿™äº›éƒ½ä»£è¡¨äº†&lt;u&gt;æœ¬ Data Server å’Œ å…¶ Session Server ä¹‹é—´çš„å…³ç³»&lt;/u&gt;ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;+-----------------------------------------------------------------------------------------+     +--------------------------------+
|  SessionServerConnectionFactory                                                         |     |        SessionServer           |
|                                                                                         |     |                                |
|                                                                                         |     |   +-------------------------+  |
|  +---------------------------------------------------------+                            |     |   |   SessionServer address |  |
|  | SESSION_CONN_PROCESS_ID_MAP                             |                            |     |   |                         |  |
|  |                                                         |                            |     |   |  +----------------+     |  |
|  |                                                         | +-----------------------------------&amp;gt;+  |   process Id   |     |  |
|  |    Map&amp;lt;SessionServer address, SessionServer processId&amp;gt;  |                            |     |   +-------------------------+  |
|  |                                                         |                            |     |      |                |        |
|  +---------------------------------------------------------+                            |     |      |   Publisher    |        |
|                                                                                         |     |      +--+-------------+        |
|                                                                                         |     |         ^                      |
|   +---------------------------------------------------------+                           |     |         |                      |
|   | PROCESS_ID_CONNECT_ID_MAP                               |                           |     +------------------------+-------+
|   |                                                         |                           |               |              ^
|   | Map&amp;lt;SessionServer processId, Set&amp;lt;ip:port of clients&amp;gt; &amp;gt;  +-------------------------------------------+              |
|   |                                                         |                           |                              |
|   +---------------------------------------------------------+                           |                              |
|                                                                                         |                              |
|                                                                                         |                              |
|  +------------------------------------------------------------------------------------+ |       +------------+         |
|  |PROCESS_ID_SESSION_CONN_MAP                                                         +-------&amp;gt; | Connection +---------+
|  |                                                                                    | |       +------------+
|  |                                                                                    | |
|  |Map&amp;lt;SessionServer processId, pair(SessionServer address, SessionServer connection)&amp;gt; | |
|  |                                                                                    | |
|  +------------------------------------------------------------------------------------+ |
+-----------------------------------------------------------------------------------------+
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ‰‹æœºä¸Šå¦‚ä¸‹å›¾ï¼š&lt;br/&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1850883/202011/1850883-20201128080731444-1800054878.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å…·ä½“ç±»å®šä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class SessionServerConnectionFactory {

    private static final int               DELAY                       = 30 * 1000;
    private static final Map               EMPTY_MAP                   = new HashMap(0);

    /**
     * key  :   SessionServer address
     * value:   SessionServer processId
     */
    private final Map&amp;lt;String, String&amp;gt;      SESSION_CONN_PROCESS_ID_MAP = new ConcurrentHashMap&amp;lt;&amp;gt;();

    /**
     * key  :   SessionServer processId
     * value:   ip:port of clients
     */
    private final Map&amp;lt;String, Set&amp;lt;String&amp;gt;&amp;gt; PROCESS_ID_CONNECT_ID_MAP   = new ConcurrentHashMap&amp;lt;&amp;gt;();

    /**
     * key  :   SessionServer processId
     * value:   pair(SessionServer address, SessionServer connection)
     */
    private final Map&amp;lt;String, Pair&amp;gt;        PROCESS_ID_SESSION_CONN_MAP = new ConcurrentHashMap&amp;lt;&amp;gt;();

    @Autowired
    private DisconnectEventHandler         disconnectEventHandler;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;365-pair&quot;&gt;3.6.5 Pair&lt;/h4&gt;
&lt;p&gt;è¿™æ˜¯SessionServerConnectionFactoryçš„å†…éƒ¨ç±»ã€‚&lt;/p&gt;
&lt;p&gt;PROCESS_ID_SESSION_CONN_MAPæ˜¯ Map&amp;lt;SessionServer processId, &lt;strong&gt;pair&lt;/strong&gt;(SessionServer address, SessionServer connection)&amp;gt;ï¼Œä»£è¡¨äº†ä¸€ä¸ª Session Server åŒ…æ‹¬å“ªäº›Connectionï¼Œæ¯ä¸ªConnection è¢«å…¶Session Server ç«¯çš„address å”¯ä¸€ç¡®å®šã€‚&lt;/p&gt;
&lt;p&gt;Pairå°±æ˜¯SessionServer address, SessionServer connectionçš„ç»„åˆï¼Œå®šä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;private static class Pair {
    private AtomicInteger           roundRobin = new AtomicInteger(-1);
    private Map&amp;lt;String, Connection&amp;gt; connections;
    private String                  lastDisconnectedSession;

    private Pair(Map&amp;lt;String, Connection&amp;gt; connections) {
        this.connections = connections;
    }

    @Override
    public boolean equals(Object o) {
        return connections.equals(((Pair) o).getConnections())
               &amp;amp;&amp;amp; (((Pair) o).lastDisconnectedSession.equals(lastDisconnectedSession));
    }

    /**
     * Getter method for property &amp;lt;tt&amp;gt;connections&amp;lt;/tt&amp;gt;.
     * @return property value of connections
     */
    private Map&amp;lt;String, Connection&amp;gt; getConnections() {
        return connections;
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å½“ç”Ÿæˆæ—¶ï¼ŒSession Server ç«¯çš„addressï¼Œè¿™æ˜¯ç”±InetSocketAddressè½¬æ¢è€Œæ¥ã€‚æ­¤ç±»ç”¨äºå®ç° IP å¥—æ¥å­—åœ°å€ (IP åœ°å€+ç«¯å£å·)ï¼Œç”¨äºsocket é€šä¿¡ï¼›&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public void registerSession(String processId, Set&amp;lt;String&amp;gt; connectIds, Connection connection) {
    String sessionConnAddress = NetUtil.toAddressString(connection.getRemoteAddress());

    SESSION_CONN_PROCESS_ID_MAP.put(sessionConnAddress, processId);

    Set&amp;lt;String&amp;gt; connectIdSet = PROCESS_ID_CONNECT_ID_MAP
            .computeIfAbsent(processId, k -&amp;gt; ConcurrentHashMap.newKeySet());
    connectIdSet.addAll(connectIds);

    Pair pair = PROCESS_ID_SESSION_CONN_MAP.computeIfAbsent(processId, k -&amp;gt; new Pair(new ConcurrentHashMap&amp;lt;&amp;gt;()));
    pair.getConnections().put(sessionConnAddress, connection);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;366-processid&quot;&gt;3.6.6 processId&lt;/h4&gt;
&lt;p&gt;processIdæ˜¯åœ¨Session Serverä¹‹ä¸­ç”Ÿæˆï¼Œå¯ä»¥çœ‹å‡ºï¼Œæ˜¯IPï¼Œæ—¶é—´æˆ³ï¼Œå¾ªç¯é€’å¢æ•´æ•°æ„å»ºã€‚è¿™æ ·å°±å¯ä»¥å”¯ä¸€ç¡®å®šä¸€ä¸ªSessionServerã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;public class SessionProcessIdGenerator {
    /**
     * Generate session processId.
     */
    public static String generate() {
        String localIp = NetUtil.getLocalSocketAddress().getAddress().getHostAddress();
        if (localIp != null &amp;amp;&amp;amp; !localIp.isEmpty()) {
            return getId(getIPHex(localIp), System.currentTimeMillis(), getNextId());
        }
        return EMPTY_STRING;
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;37-sessionserverconnectionfactoryä¸šåŠ¡æµç¨‹&quot;&gt;3.7 SessionServerConnectionFactoryä¸šåŠ¡æµç¨‹&lt;/h3&gt;
&lt;p&gt;å› ä¸ºé«˜å±‚è¿æ¥ç®¡ç†ä¸ä¸šåŠ¡å¯†åˆ‡è€¦åˆï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥åˆ†æä¸šåŠ¡ã€‚çœ‹çœ‹è°ƒç”¨ SessionServerConnectionFactoryçš„ä¸šåŠ¡æµç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“registerSessionä»ä½•å¤„&lt;strong&gt;è°ƒç”¨&lt;/strong&gt;ï¼Œè¿™å°±æ¶‰åŠåˆ°ä¸¤ä¸ªæ¶ˆæ¯ï¼šSessionServerRegisterRequest å’ŒPublishDataRequestã€‚å³æœ‰ä¸¤ä¸ªé€”å¾„ä¼šè°ƒç”¨ã€‚è€Œä¸”&lt;u&gt;ä¸šåŠ¡æ¶‰åŠåˆ°Session Serverä¸DataServer&lt;/u&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&quot;371-sessionserverregisterrequest&quot;&gt;3.7.1 SessionServerRegisterRequest&lt;/h4&gt;
&lt;p&gt;å½“é‡æ–°è¿æ¥çš„æ—¶å€™ï¼Œä¼šç»Ÿä¸€æ³¨å†Œ Session Server æœ¬èº«åŒ…å«çš„æ‰€æœ‰Publisherã€‚&lt;u&gt;å¯¹åº”åœ¨Session Serverä¹‹ä¸­&lt;/u&gt;ï¼Œå¦‚ä¸‹å¯ä»¥çœ‹åˆ°ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä»sessionServerè·å–connectIdsã€‚&lt;/li&gt;
&lt;li&gt;å»ºç«‹SessionServerRegisterRequestï¼Œç„¶åå‘é€ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class SessionRegisterDataTask extends AbstractSessionTask {
    @Override
    public void setTaskEvent(TaskEvent taskEvent) {

        //taskId create from event
        if (taskEvent.getTaskId() != null) {
            setTaskId(taskEvent.getTaskId());
        }

        Object obj = taskEvent.getEventObj();

        if (obj instanceof BoltChannel) {
            this.channel = (BoltChannel) obj;
        } 
        Server sessionServer = boltExchange.getServer(sessionServerConfig.getServerPort());

        if (sessionServer != null) {

            Collection&amp;lt;Channel&amp;gt; chs = sessionServer.getChannels();
            Set&amp;lt;String&amp;gt; connectIds = new HashSet&amp;lt;&amp;gt;();
            chs.forEach(channel -&amp;gt; connectIds.add(NetUtil.toAddressString(channel.getRemoteAddress())));

            sessionServerRegisterRequest = new SessionServerRegisterRequest(
                    SessionProcessIdGenerator.getSessionProcessId(), connectIds);
        } 
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;u&gt;æ¥åˆ°DataServer&lt;/u&gt;ï¼ŒSessionServerRegisterHandlerä¼šè¿›è¡Œå¤„ç†è°ƒç”¨ï¼Œç”¨åˆ°äº†sessionServerConnectionFactoryã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class SessionServerRegisterHandler extends
                                         AbstractServerHandler&amp;lt;SessionServerRegisterRequest&amp;gt; {
    @Override
    public Object doHandle(Channel channel, SessionServerRegisterRequest request) {
        Set&amp;lt;String&amp;gt; connectIds = request.getConnectIds();
        if (connectIds == null) {
            connectIds = new HashSet&amp;lt;&amp;gt;();
        }
        sessionServerConnectionFactory.registerSession(request.getProcessId(), connectIds,
            ((BoltChannel) channel).getConnection());
        return CommonResponse.buildSuccessResponse();
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;372-publishdatarequest&quot;&gt;3.7.2 PublishDataRequest&lt;/h4&gt;
&lt;p&gt;å½“æ³¨å†ŒPublisheræ—¶å€™ã€‚&lt;u&gt;åœ¨Session Serverä¹‹ä¸­&lt;/u&gt;ï¼Œå¯ä»¥çœ‹åˆ°å»ºç«‹äº†è¯·æ±‚ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;private Request&amp;lt;PublishDataRequest&amp;gt; buildPublishDataRequest(Publisher publisher) {
    return new Request&amp;lt;PublishDataRequest&amp;gt;() {
        private AtomicInteger retryTimes = new AtomicInteger();

        @Override
        public PublishDataRequest getRequestBody() {
            PublishDataRequest publishDataRequest = new PublishDataRequest();
            publishDataRequest.setPublisher(publisher);
            publishDataRequest.setSessionServerProcessId(SessionProcessIdGenerator
                .getSessionProcessId());
            return publishDataRequest;
        }

        @Override
        public URL getRequestUrl() {
            return getUrl(publisher.getDataInfoId());
        }

        @Override
        public AtomicInteger getRetryTimes() {
            return retryTimes;
        }
    };
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;u&gt;åœ¨data serverä¹‹ä¸­&lt;/u&gt;ï¼Œä¼šè°ƒç”¨å¤„ç†ï¼Œç”¨åˆ°äº†sessionServerConnectionFactoryã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class PublishDataHandler extends AbstractServerHandler&amp;lt;PublishDataRequest&amp;gt; {
    @Override
    public Object doHandle(Channel channel, PublishDataRequest request) {
        Publisher publisher = Publisher.internPublisher(request.getPublisher());
        if (forwardService.needForward()) {
            CommonResponse response = new CommonResponse();
            response.setSuccess(false);
            response.setMessage(&quot;Request refused, Server status is not working&quot;);
            return response;
        }

        dataChangeEventCenter.onChange(publisher, dataServerConfig.getLocalDataCenter());

        if (publisher.getPublishType() != PublishType.TEMPORARY) {
            String connectId = WordCache.getInstance().getWordCache(
                publisher.getSourceAddress().getAddressString());
            sessionServerConnectionFactory.registerConnectId(request.getSessionServerProcessId(),
                connectId);
            // record the renew timestamp
            datumLeaseManager.renew(connectId);
        }

        return CommonResponse.buildSuccessResponse();
    }  
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;373-datumleasemanager&quot;&gt;3.7.3 DatumLeaseManager&lt;/h4&gt;
&lt;p&gt;ä¸Šè¿°ä»£ç æåˆ°äº†DatumLeaseManagerï¼Œè¿™é‡Œå¯ä»¥çœ‹åˆ°å°±æ˜¯&lt;u&gt;å¯¹connectIdï¼Œå³Publisherè¿›è¡Œç»­çº¦&lt;/u&gt;ï¼š&lt;/p&gt;
&lt;p&gt;renew å‡½æ•°è®°å½•æœ¬æ¬¡renewæ—¶é—´æˆ³ï¼Œå¯åŠ¨evict taskï¼Œå¦‚æœåˆ°æœŸæ²¡æœ‰renewï¼Œå°±å»é™¤ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class DatumLeaseManager implements AfterWorkingProcess {
    /** record the latest heartbeat time for each connectId, format: connectId -&amp;gt; lastRenewTimestamp */
    private final Map&amp;lt;String, Long&amp;gt;            connectIdRenewTimestampMap = new ConcurrentHashMap&amp;lt;&amp;gt;();

    /** lock for connectId , format: connectId -&amp;gt; true */
    private ConcurrentHashMap&amp;lt;String, Boolean&amp;gt; locksForConnectId          = new ConcurrentHashMap();
  
    /**
     * record the renew timestamp
     */
    public void renew(String connectId) {

        // record the renew timestamp
        connectIdRenewTimestampMap.put(connectId, System.currentTimeMillis());
        // try to trigger evict task
        scheduleEvictTask(connectId, 0);
    }

}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;0x04-èŠ‚ç‚¹ç®¡ç†&quot;&gt;0x04 èŠ‚ç‚¹ç®¡ç†&lt;/h2&gt;
&lt;p&gt;é™¤äº†å…·ä½“è¿æ¥ä¹‹å¤–ï¼Œ&lt;u&gt;SOFARegistryä¹Ÿå¯¹Data èŠ‚ç‚¹è¿›è¡Œå¦ä¸€ä¸ªç»´åº¦çš„è¿æ¥ç®¡ç†&lt;/u&gt;ã€‚å…·ä½“åœ¨DataServerNodeFactoryå®Œæˆã€‚&lt;/p&gt;
&lt;h3 id=&quot;41-dataservernodefactory&quot;&gt;4.1 DataServerNodeFactory&lt;/h3&gt;
&lt;h4 id=&quot;411-dataservernode&quot;&gt;4.1.1 DataServerNode&lt;/h4&gt;
&lt;p&gt;å°±æ˜¯ç®€å•çš„æ•°æ®ç»“æ„ï¼Œæ²¡æœ‰å»ºç«‹Beanã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class DataServerNode implements HashNode {

    private String     ip;

    private String     dataCenter;

    private Connection connection;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;412-dataservernodefactory&quot;&gt;4.1.2 DataServerNodeFactory&lt;/h4&gt;
&lt;p&gt;å¯¹åº”Nodeçš„è¿æ¥ç®¡ç† åˆ™æ˜¯ DataServerNodeFactoryã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å…·ä½“æ¨¡å—æ§åˆ¶ä¸Šï¼ŒDataServerNodeFactoryæ‹¥æœ‰è‡ªå·±çš„Beanã€‚DataServerConnectionFactory åˆ™&lt;u&gt;å…¨éƒ¨æ˜¯Staticç±»å‹ï¼Œç›´æ¥staticä½¿ç”¨&lt;/u&gt;ã€‚&lt;/p&gt;
&lt;p&gt;DataServerNodeFactoryçš„å…³é”®å˜é‡æœ‰ä¸¤ä¸ªï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;MAPæ˜¯ä»¥dataCenterå’Œipä½œä¸ºç»´åº¦çš„ä¸€ä¸ªNodeçŸ©é˜µï¼Œæ˜¯æ•°æ®èŠ‚ç‚¹ç›¸å…³æ•°æ®ï¼›&lt;/li&gt;
&lt;li&gt;CONSISTENT_HASH_MAPåˆ™æ˜¯ç”¨dataCenterä½œä¸ºkeyï¼ŒConsistentHashä½œä¸ºvalueçš„Mapï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å…·ä½“å®šä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class DataServerNodeFactory {
    /**
     * row:     dataCenter
     * column:  ip
     * value    dataServerNode
     */
    private static final Map&amp;lt;String, Map&amp;lt;String, DataServerNode&amp;gt;&amp;gt;    MAP                 = new ConcurrentHashMap&amp;lt;&amp;gt;();

    /**
     * key:     dataCenter
     * value:   consistentHash
     */
    private static final Map&amp;lt;String, ConsistentHash&amp;lt;DataServerNode&amp;gt;&amp;gt; CONSISTENT_HASH_MAP = new ConcurrentHashMap&amp;lt;&amp;gt;();
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;42-ä¸šåŠ¡æµç¨‹&quot;&gt;4.2 ä¸šåŠ¡æµç¨‹&lt;/h3&gt;
&lt;h4 id=&quot;421-æ³¨å†Œ&quot;&gt;4.2.1 æ³¨å†Œ&lt;/h4&gt;
&lt;p&gt;å…·ä½“åœ¨LocalDataServerChangeEventHandler å’Œ DataServerChangeEventHandler å…¨éƒ½æœ‰æ¶‰åŠã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class LocalDataServerChangeEventHandler extends
                                            AbstractEventHandler&amp;lt;LocalDataServerChangeEvent&amp;gt; {
       private void connectDataServer(String dataCenter, String ip) {
            Connection conn = null;
            for (int tryCount = 0; tryCount &amp;lt; TRY_COUNT; tryCount++) {
                try {
                    conn = ((BoltChannel) dataNodeExchanger.connect(new URL(ip, dataServerConfig.getSyncDataPort()))).getConnection();
                    break;
                } 
            }

            //maybe get dataNode from metaServer,current has not start! register dataNode info to factory,wait for connect task next execute
            DataServerNodeFactory.register(new DataServerNode(ip, dataCenter, conn),
                dataServerConfig);
        }
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä»¥åŠ&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class DataServerChangeEventHandler extends AbstractEventHandler&amp;lt;DataServerChangeEvent&amp;gt; {
   private void connectDataServer(String dataCenter, String ip) {
        Connection conn = null;
        for (int tryCount = 0; tryCount &amp;lt; TRY_COUNT; tryCount++) {
            try {
                conn = ((BoltChannel) dataNodeExchanger.connect(new URL(ip, dataServerConfig
                    .getSyncDataPort()))).getConnection();
                break;
            } catch (Exception e) {
                TimeUtil.randomDelay(3000);
            }
        }
        //maybe get dataNode from metaServer,current has not start! register dataNode info to factory,wait for connect task next execute
        DataServerNodeFactory.register(new DataServerNode(ip, dataCenter, conn), dataServerConfig);
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;422-ä½¿ç”¨&quot;&gt;4.2.2 ä½¿ç”¨&lt;/h4&gt;
&lt;p&gt;ä½¿ç”¨å°±æ˜¯ä»MAPä¸CONSISTENT_HASH_MAPä¸­æå–Nodeï¼Œè¿™é‡ŒæŠŠä»CONSISTENT_HASH_MAPæå–çš„ä»£ç æ‘˜å½•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;/**
 * get dataserver by specific datacenter and dataInfoId
 *
 * @param dataCenter
 * @param dataInfoId
 * @return
 */
public static DataServerNode computeDataServerNode(String dataCenter, String dataInfoId) {
    ConsistentHash&amp;lt;DataServerNode&amp;gt; consistentHash = CONSISTENT_HASH_MAP.get(dataCenter);
    if (consistentHash != null) {
        return consistentHash.getNodeFor(dataInfoId);
    }
    return null;
}

public static List&amp;lt;DataServerNode&amp;gt; computeDataServerNodes(String dataCenter, String dataInfoId,
                                                          int backupNodes) {
    ConsistentHash&amp;lt;DataServerNode&amp;gt; consistentHash = CONSISTENT_HASH_MAP.get(dataCenter);
    if (consistentHash != null) {
        return consistentHash.getNUniqueNodesFor(dataInfoId, backupNodes);
    }
    return null;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;0x05-æ€»ç»“&quot;&gt;0x05 æ€»ç»“&lt;/h2&gt;
&lt;p&gt;å…³äºè¿æ¥ç®¡ç†ï¼Œ&lt;u&gt;SOFARegistryæœ‰ä¸¤ç»´åº¦å±‚æ¬¡çš„è¿æ¥ç®¡ç†ï¼Œåˆ†åˆ«æ˜¯ Connection å’Œ Node&lt;/u&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;u&gt;å› ä¸ºSOFABoltåº•å±‚å·²ç»åšäº†åº•å±‚è¿æ¥ç®¡ç†ï¼Œæ‰€ä»¥SOFARegistryåªè¦åšé¡¶å±‚éƒ¨åˆ†è¿æ¥ç®¡ç†å³å¯ï¼Œå°±æ˜¯ä»ä¸šåŠ¡è§’åº¦åŒºåˆ†æ³¨å†Œï¼Œä¿å­˜ï¼Œè·å–è¿æ¥&lt;/u&gt;ã€‚å…·ä½“å°±æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Connection å°±æ˜¯ä¸€ä¸ª Session Server å’Œ Data Server ä¹‹é—´çš„ Connectionï¼›&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ª Session Server å¯èƒ½å¯¹äºä¸€ä¸ªdata Serveræœ‰å¤šä¸ªè¿æ¥ï¼›&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªSession ServeråŒ…æ‹¬è®¸å¤šPubliserï¼›&lt;/li&gt;
&lt;li&gt;Connectionä¸Publiserä¸€ä¸€å¯¹åº”ï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;u&gt;SOFARegistry å°†æœåŠ¡æ•°æ® ï¼ˆPublisherRegisterï¼‰ å’Œ æœåŠ¡å‘å¸ƒè€… ï¼ˆPublisherï¼‰ çš„è¿æ¥çš„ç”Ÿå‘½å‘¨æœŸç»‘å®šåœ¨ä¸€èµ·&lt;/u&gt;ï¼šæ¯ä¸ª PublisherRegister å®šä¹‰å±æ€§ connIdï¼ŒconnId ç”±æ³¨å†Œæœ¬æ¬¡æœåŠ¡çš„ Publisher çš„è¿æ¥æ ‡è¯† ï¼ˆIP å’Œ Portï¼‰æ„æˆã€‚&lt;/p&gt;
&lt;p&gt;åªè¦è¯¥ Publisher å’Œ SessionServer æ–­è¿ï¼ŒæœåŠ¡ä¿¡æ¯æ•°æ®å³å¤±æ•ˆã€‚å®¢æˆ·ç«¯é‡æ–°å»ºè¿æˆåŠŸåé‡æ–°æ³¨å†ŒæœåŠ¡æ•°æ®ï¼Œé‡æ–°æ³¨å†Œçš„æœåŠ¡æ•°æ®ä¼šè¢«å½“æˆæ–°çš„æ•°æ®ï¼Œè€ƒè™‘æ›´æ¢é•¿è¿æ¥å Publisher çš„ connId æ˜¯ Renew æ–°ç”Ÿæˆçš„ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;                 +----------+                        +----------+
                 |  Client  |                        |  Client  |
                 +----+-----+                        +----+-----+
                      |                                   |
                      |                                   |
                      |                                   |
                      |                                   |
                      |                                   |
                      |                                   |
             +-------------------------------------------------------------+
             |        |       Session Server(process Id)  |                |
             |        v                                   v                |
             | +------+-----------------+        +--------+--------------+ |
             | |  Publisher(connect Id) |  ...   | Publisher(connect Id) | |
             | +------------------------+        +-----------------------+ |
             +-------------------------------------------------------------+
                      |                                          |
                      |                                          |
                      | Connection                    Connection |
                      |                                          |
                      |                                          |
                      |                                          |
                      v                                          v
+---------------------+------------------------------------------+--------------------+
|  Data Server                                                                        |
|                                                                                     |
|                  Map&amp;lt;SessionServer address, SessionServer processId&amp;gt;                |
|                                                                                     |
|                  Map&amp;lt;SessionServer processId, Set&amp;lt;ip:port of clients&amp;gt; &amp;gt;             |
|                                                                                     |
| Map&amp;lt;SessionServer processId, pair(SessionServer address, SessionServer connection)&amp;gt; |
|                                                                                     |
+-------------------------------------------------------------------------------------+
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;0xff-å‚è€ƒ&quot;&gt;0xFF å‚è€ƒ&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://timyang.net/architecture/cell-distributed-system/&quot;&gt;https://timyang.net/architecture/cell-distributed-system/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.jianshu.com/p/0b069f9658ac&quot;&gt;SOFABolt æºç åˆ†æ12 - Connection è¿æ¥ç®¡ç†è®¾è®¡&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.jianshu.com/p/46d281e12880&quot;&gt;SOFABolt æºç åˆ†æ2 - RpcServer æœåŠ¡ç«¯å¯åŠ¨çš„è®¾è®¡&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.jianshu.com/p/a8bea57a3242&quot;&gt;SOFABolt æºç åˆ†æ3 - RpcClient å®¢æˆ·ç«¯å¯åŠ¨çš„è®¾è®¡&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;</description>
<pubDate>Sat, 28 Nov 2020 00:17:00 +0000</pubDate>
<dc:creator>ç½—è¥¿çš„æ€è€ƒ</dc:creator>
<og:description>SOFARegistry æ˜¯èš‚èšé‡‘æœå¼€æºçš„ä¸€ä¸ªç”Ÿäº§çº§ã€é«˜æ—¶æ•ˆã€é«˜å¯ç”¨çš„æœåŠ¡æ³¨å†Œä¸­å¿ƒã€‚æœ¬ç³»åˆ—æ–‡ç« é‡ç‚¹åœ¨äºåˆ†æè®¾è®¡å’Œæ¶æ„ï¼Œå³åˆ©ç”¨å¤šç¯‡æ–‡ç« ï¼Œä»å¤šä¸ªè§’åº¦åæ¨æ€»ç»“ DataServer æˆ–è€… SOFARegis</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/rossiXYZ/p/14051509.html</dc:identifier>
</item>
<item>
<title>Mac ä¸Šè¶…å¥½ç”¨çš„ä»£ç å¯¹æ¯”å·¥å…· beyond compareï¼Œå¯¹æ¯”jsonå·®å¼‚ - é™ˆå½¦æ–Œ</title>
<link>http://www.cnblogs.com/chenyanbin/p/14051493.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/chenyanbin/p/14051493.html</guid>
<description>&lt;p&gt;ã€€ã€€æ˜¨å¤©ä¸‹åˆï¼Œå…¬å¸ä¸šåŠ¡è·‘ä¸é€šï¼Œç„¶åå¼€å‘ç»„é•¿è®©æ¶æ„å¸ˆè”ç³»æˆ‘ï¼Œç»™æˆ‘å‘ä¸€ä¸ªjsonå’Œéƒ¨ç½²åˆ°devä¸Šçš„å¾®æœåŠ¡urlï¼Œè®©æˆ‘å»æµ‹è¯•ä¸‹ï¼Œå°†å‘æ¥çš„jsonæ”¾åˆ°json.cnä¸Šæ„£æ˜¯è§£æä¸å‡ºæ¥ï¼Œæˆ‘å°±ç”¨ä¹‹å‰çš„jsonè¯·æ±‚ä¸‹devä¸Šçš„å¾®æœåŠ¡ï¼Œå‘ç°æ˜¯é€šçš„ï¼Œåˆæ¬¡åˆ¤æ–­æ˜¯jsonæ ¼å¼çš„é—®é¢˜ï¼Œå¯¹æ¯”ä¸‹å‘æ¥çš„jsonå’Œä¹‹å‰çš„jsonæœ‰å•¥åŒºåˆ«ï¼Œå‘ç°json.cnä¸Šè¿˜æœ‰ä»£ç å¯¹æ¯”åŠŸèƒ½ï¼Œæ•ˆæœæ˜¯ä¸‹é¢è¿™æ ·çš„ğŸ‘‡&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1504448/202011/1504448-20201128070927330-1244597106.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â ã€€ã€€å¯¹æ¯”æ•ˆæœä¸ä½³ï¼Œç„¶åç™¾åº¦ï¼Œå‘ç°beyond compareå¯¹æ¯”ä»£ç æ•ˆæœçœŸå¿ƒä¸é”™ï¼Œå¦‚ä¸‹ğŸ‘‡&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1504448/202011/1504448-20201128071246123-525986518.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;


&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
é“¾æ¥: https:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;pan.baidu.com/s/1eCXTzWgKZYTRzNNjDptsHw  å¯†ç : nebt&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

</description>
<pubDate>Fri, 27 Nov 2020 23:14:00 +0000</pubDate>
<dc:creator>é™ˆå½¦æ–Œ</dc:creator>
<og:description>å¯¼è¯» æ˜¨å¤©ä¸‹åˆï¼Œå…¬å¸ä¸šåŠ¡è·‘ä¸é€šï¼Œç„¶åå¼€å‘ç»„é•¿è®©æ¶æ„å¸ˆè”ç³»æˆ‘ï¼Œç»™æˆ‘å‘ä¸€ä¸ªjsonå’Œéƒ¨ç½²åˆ°devä¸Šçš„å¾®æœåŠ¡urlï¼Œè®©æˆ‘å»æµ‹è¯•ä¸‹ï¼Œå°†å‘æ¥çš„jsonæ”¾åˆ°json.cnä¸Šæ„£æ˜¯è§£æä¸å‡ºæ¥ï¼Œæˆ‘å°±ç”¨ä¹‹å‰çš„jsonè¯·æ±‚</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/chenyanbin/p/14051493.html</dc:identifier>
</item>
<item>
<title>JSæŒ‡å®šéŸ³é¢‘audioåœ¨æŸä¸ªæ—¶é—´ç‚¹è¿›è¡Œæ’­æ”¾ï¼Œè·å–å½“å‰éŸ³é¢‘audioçš„é•¿åº¦ï¼ŒéŸ³é¢‘æ—¶é•¿æ ¼å¼è½¬åŒ– - è¿½é€æ—¶å…‰è€…</title>
<link>http://www.cnblogs.com/Can-daydayup/p/14049190.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/Can-daydayup/p/14049190.html</guid>
<description>&lt;h2&gt;å‰è¨€ï¼š&lt;/h2&gt;
&lt;p&gt;Â ã€€ã€€ä»Šå¤©æ¥åˆ°ä¸€ä¸ªéœ€æ±‚ï¼Œéœ€è¦è·å–æŸä¸ª.mp3éŸ³é¢‘æ–‡ä»¶çš„æ—¶é—´é•¿åº¦å’ŒæŒ‡å®šéŸ³é¢‘audioåœ¨æŸä¸ªæ—¶é—´ç‚¹è¿›è¡Œæ’­æ”¾ï¼ˆæ¯”å¦‚è¯´è¿™ä¸ªè§†é¢‘æœ‰4åˆ†é’Ÿï¼Œæˆ‘è¦è®©å®ƒé»˜è®¤ä»ç¬¬2ç§’çš„æ—¶å€™å¼€å§‹æ’­æ”¾ï¼‰ï¼Œè¿™é‡Œå½“ç„¶æƒ³åˆ°äº†H5ä¸­çš„audioå…ƒç´ ï¼Œå½“ç„¶æˆ‘ä»¬å¹³æ—¶çœ‹è¿™ä¸ªæ ‡ç­¾ä¸Šæ˜¾ç¤ºçš„éŸ³é¢‘æ—¶é—´æ ¼å¼æ˜¯æ—¶:åˆ†:ç§’çš„æ ¼å¼çš„å› æ­¤éœ€è¦æ¶‰åŠåˆ°ç§’å’Œæ—¶é—´æ ¼å¼çš„è½¬åŒ–ã€‚å› ä¸ºåˆšå¼€å§‹å¯¹è¿™å—ååˆ†çš„é™Œç”Ÿï¼Œæœ€åé€šè¿‡æŸ¥é˜…äº†ç½‘ä¸Šçš„ä¸€äº›èµ„æ–™ï¼Œæœ€ç»ˆå®Œç¾çš„æŠŠè¿™äº›åŠŸèƒ½ç‚¹åšå¥½äº†ã€‚åœ¨è¿™é‡Œåˆ†äº«ä¸€ä¸‹ï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åŠ©æœ‰éœ€è¦çš„å°ä¼™ä¼´ã€‚&lt;/p&gt;
&lt;h2&gt;è·å–éŸ³é¢‘æ—¶é•¿ï¼š&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
&lt;span&gt;function&lt;/span&gt;&lt;span&gt; getAudioDuration(src) {
            let audio &lt;/span&gt;= document.createElement('audio') &lt;span&gt;//&lt;/span&gt;&lt;span&gt;ç”Ÿæˆä¸€ä¸ªaudioå…ƒç´  &lt;/span&gt;
            audio.src = src &lt;span&gt;//&lt;/span&gt;&lt;span&gt;éŸ³ä¹çš„è·¯å¾„ &lt;/span&gt;
            audio.addEventListener(&quot;canplay&quot;, &lt;span&gt;function&lt;/span&gt;&lt;span&gt; () {
                console.log(&lt;/span&gt;&quot;éŸ³é¢‘é•¿åº¦=&amp;gt;&amp;gt;&amp;gt;ï¼š&quot;, parseInt(audio.duration) + 'ç§’', 'éŸ³é¢‘æ—¶åˆ†ç§’æ ¼å¼ï¼š'&lt;span&gt;, timeToMinute(parseInt(audio
                    .duration)));
            });
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;æŒ‡å®šéŸ³é¢‘audioåœ¨æŸä¸ªæ—¶é—´ç‚¹è¿›è¡Œæ’­æ”¾ï¼š&lt;/h2&gt;
&lt;p&gt;æŒ‡å®šé»˜è®¤ä»ç¬¬20så¼€å§‹æ’­æ”¾æ•ˆæœå›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1336199/202011/1336199-20201128005218563-345990149.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt; éŸ³é¢‘åŠ è½½å®Œæˆåçš„ä¸€ç³»åˆ—æ“ä½œ&lt;/span&gt;
        &lt;span&gt;function&lt;/span&gt;&lt;span&gt; duration() {
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; myVid = document.getElementById(&quot;videoDiv&quot;&lt;span&gt;);
            console.log(&lt;/span&gt;&quot;duration  &quot;&lt;span&gt;, myVid);
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (myVid != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt;&lt;span&gt; duration;
                myVid.load(); &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;æ–¹æ³•é‡æ–°åŠ è½½éŸ³é¢‘/è§†é¢‘å…ƒç´ &lt;/span&gt;
                &lt;span&gt;//&lt;/span&gt;&lt;span&gt; https://www.w3school.com.cn/tags/av_prop_currenttime.asp&lt;/span&gt;
                &lt;span&gt;//&lt;/span&gt;&lt;span&gt; currentTime å±æ€§è®¾ç½®æˆ–è¿”å›éŸ³é¢‘/è§†é¢‘æ’­æ”¾çš„å½“å‰ä½ç½®ï¼ˆä»¥ç§’è®¡ï¼‰ã€‚&lt;/span&gt;
                &lt;span&gt;//&lt;/span&gt;&lt;span&gt; å½“è®¾ç½®è¯¥å±æ€§æ—¶ï¼Œæ’­æ”¾ä¼šè·³è·ƒåˆ°æŒ‡å®šçš„ä½ç½®ã€‚&lt;/span&gt;
                myVid.currentTime = 20; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;é»˜è®¤æŒ‡å®šéŸ³é¢‘é»˜è®¤ä»20sçš„æ—¶å€™å¼€å§‹æ’­æ”¾ï¼ˆé»˜è®¤æ—¶é—´ä¸ºsï¼‰&lt;/span&gt;
                myVid.oncanplay = &lt;span&gt;function&lt;/span&gt;&lt;span&gt; () {
                    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;duration å±æ€§è¿”å›å½“å‰éŸ³é¢‘çš„é•¿åº¦ï¼Œä»¥ç§’è®¡ã€‚&lt;/span&gt;
                    console.log(&quot;éŸ³é¢‘æ—¶é—´&quot;&lt;span&gt;, myVid.duration);
                    console.log(&lt;/span&gt;&quot;æ—¶åˆ†ç§’æ ¼å¼è½¬åŒ–ï¼š&quot;&lt;span&gt;, timeToMinute(myVid.duration))
                }
            }
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;ç§’è½¬æ¢æ—¶åˆ†é’Ÿ00:00:00æ—¶åˆ†ç§’æ ¼å¼ï¼š&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;function&lt;/span&gt;&lt;span&gt; timeToMinute(times) {
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt;&lt;span&gt; t;
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (times &amp;gt; -1&lt;span&gt;) {
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; hour = Math.floor(times / 3600&lt;span&gt;);
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; min = Math.floor(times / 60) % 60&lt;span&gt;;
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; sec = times % 60&lt;span&gt;;
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (hour &amp;lt; 10&lt;span&gt;) {
                    t &lt;/span&gt;= '0' + hour + &quot;:&quot;&lt;span&gt;;
                } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
                    t &lt;/span&gt;= hour + &quot;:&quot;&lt;span&gt;;
                }

                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (min &amp;lt; 10&lt;span&gt;) {
                    t &lt;/span&gt;+= &quot;0&quot;&lt;span&gt;;
                }
                t &lt;/span&gt;+= min + &quot;:&quot;&lt;span&gt;;
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (sec &amp;lt; 10&lt;span&gt;) {
                    t &lt;/span&gt;+= &quot;0&quot;&lt;span&gt;;
                }
                t &lt;/span&gt;+= sec.toFixed(2&lt;span&gt;);
            }
            t &lt;/span&gt;= t.substring(0, t.length - 3&lt;span&gt;);
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; t;
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;00:00:00æ—¶åˆ†ç§’æ ¼å¼è½¬åŒ–ä¸ºç§’ï¼š&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;function&lt;/span&gt;&lt;span&gt; timeEvent(e) {
            let time &lt;/span&gt;=&lt;span&gt; e;
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; len = time.split(':'&lt;span&gt;);
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (len.length == 3&lt;span&gt;) {
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; hour = time.split(':')[0&lt;span&gt;];
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; min = time.split(':')[1&lt;span&gt;];
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; sec = time.split(':')[2&lt;span&gt;];
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; Number(hour * 3600) + Number(min * 60) +&lt;span&gt; Number(sec);
            }
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (len.length == 2&lt;span&gt;) {
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; min = time.split(':')[0&lt;span&gt;];
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; sec = time.split(':')[1&lt;span&gt;];
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; Number(min * 60) +&lt;span&gt; Number(sec);
            }
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (len.length == 1&lt;span&gt;) {
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; sec = time.split(':')[0&lt;span&gt;];
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; Number(sec);
            }
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;å®Œæ•´ä»£ç ï¼š&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;44&quot;&gt;
&lt;pre&gt;
&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html&amp;gt;

&amp;lt;head&amp;gt;

&amp;lt;/head&amp;gt;

&amp;lt;body&amp;gt;
    &amp;lt;audio controls autoplay start=&quot;01:00&quot; id='videoDiv'&amp;gt;
        &amp;lt;source src=&quot;http://mp3.9ku.com/hot/2005/05-19/65937.mp3&quot; type=&quot;audio/ogg&quot;&amp;gt;
    &amp;lt;/audio&amp;gt;

    &amp;lt;script src=&quot;http://libs.baidu.com/jquery/2.0.0/jquery.min.js&quot;&amp;gt;&amp;lt;/script&amp;gt;
    &amp;lt;script type=&quot;text/javascript&quot;&amp;gt;&lt;span&gt;
        $(&lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; () {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;jsè·å–æŸä¸ªmp3éŸ³é¢‘æ–‡ä»¶çš„æ’­æ”¾æ—¶é•¿&lt;/span&gt;
            getAudioDuration('http://mp3.9ku.com/hot/2005/05-19/65937.mp3'&lt;span&gt;);

            duration();
            console.log(&lt;/span&gt;&quot;è½¬åŒ–ä¸ºå¤šå°‘ç§’=ã€‹ã€‹&quot;, timeEvent(&quot;00:14:36&quot;&lt;span&gt;));
        })

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; éŸ³é¢‘åŠ è½½å®Œæˆåçš„ä¸€ç³»åˆ—æ“ä½œ&lt;/span&gt;
        &lt;span&gt;function&lt;/span&gt;&lt;span&gt; duration() {
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; myVid = document.getElementById(&quot;videoDiv&quot;&lt;span&gt;);
            console.log(&lt;/span&gt;&quot;duration  &quot;&lt;span&gt;, myVid);
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (myVid != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt;&lt;span&gt; duration;
                myVid.load(); &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;æ–¹æ³•é‡æ–°åŠ è½½éŸ³é¢‘/è§†é¢‘å…ƒç´ &lt;/span&gt;
                &lt;span&gt;//&lt;/span&gt;&lt;span&gt; https://www.w3school.com.cn/tags/av_prop_currenttime.asp&lt;/span&gt;
                &lt;span&gt;//&lt;/span&gt;&lt;span&gt; currentTime å±æ€§è®¾ç½®æˆ–è¿”å›éŸ³é¢‘/è§†é¢‘æ’­æ”¾çš„å½“å‰ä½ç½®ï¼ˆä»¥ç§’è®¡ï¼‰ã€‚&lt;/span&gt;
                &lt;span&gt;//&lt;/span&gt;&lt;span&gt; å½“è®¾ç½®è¯¥å±æ€§æ—¶ï¼Œæ’­æ”¾ä¼šè·³è·ƒåˆ°æŒ‡å®šçš„ä½ç½®ã€‚&lt;/span&gt;
                myVid.currentTime = 20; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;é»˜è®¤æŒ‡å®šéŸ³é¢‘é»˜è®¤ä»20sçš„æ—¶å€™å¼€å§‹æ’­æ”¾ï¼ˆé»˜è®¤æ—¶é—´ä¸ºsï¼‰&lt;/span&gt;
                myVid.oncanplay = &lt;span&gt;function&lt;/span&gt;&lt;span&gt; () {
                    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;duration å±æ€§è¿”å›å½“å‰éŸ³é¢‘çš„é•¿åº¦ï¼Œä»¥ç§’è®¡ã€‚&lt;/span&gt;
                    console.log(&quot;éŸ³é¢‘æ—¶é—´&quot;&lt;span&gt;, myVid.duration);
                    console.log(&lt;/span&gt;&quot;æ—¶åˆ†ç§’æ ¼å¼è½¬åŒ–ï¼š&quot;&lt;span&gt;, timeToMinute(myVid.duration))
                }
            }
        }

        &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; getAudioDuration(src) {
            let audio &lt;/span&gt;= document.createElement('audio') &lt;span&gt;//&lt;/span&gt;&lt;span&gt;ç”Ÿæˆä¸€ä¸ªaudioå…ƒç´  &lt;/span&gt;
            audio.src = src &lt;span&gt;//&lt;/span&gt;&lt;span&gt;éŸ³ä¹çš„è·¯å¾„ &lt;/span&gt;
            audio.addEventListener(&quot;canplay&quot;, &lt;span&gt;function&lt;/span&gt;&lt;span&gt; () {
                console.log(&lt;/span&gt;&quot;éŸ³é¢‘é•¿åº¦=&amp;gt;&amp;gt;&amp;gt;ï¼š&quot;, parseInt(audio.duration) + 'ç§’', 'éŸ³é¢‘æ—¶åˆ†ç§’æ ¼å¼ï¼š'&lt;span&gt;, timeToMinute(parseInt(audio
                    .duration)));
            });
        }

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ç§’è½¬æ¢æ—¶åˆ†é’Ÿ00:00:00æ ¼å¼&lt;/span&gt;
        &lt;span&gt;function&lt;/span&gt;&lt;span&gt; timeToMinute(times) {
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt;&lt;span&gt; t;
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (times &amp;gt; -1&lt;span&gt;) {
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; hour = Math.floor(times / 3600&lt;span&gt;);
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; min = Math.floor(times / 60) % 60&lt;span&gt;;
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; sec = times % 60&lt;span&gt;;
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (hour &amp;lt; 10&lt;span&gt;) {
                    t &lt;/span&gt;= '0' + hour + &quot;:&quot;&lt;span&gt;;
                } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
                    t &lt;/span&gt;= hour + &quot;:&quot;&lt;span&gt;;
                }

                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (min &amp;lt; 10&lt;span&gt;) {
                    t &lt;/span&gt;+= &quot;0&quot;&lt;span&gt;;
                }
                t &lt;/span&gt;+= min + &quot;:&quot;&lt;span&gt;;
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (sec &amp;lt; 10&lt;span&gt;) {
                    t &lt;/span&gt;+= &quot;0&quot;&lt;span&gt;;
                }
                t &lt;/span&gt;+= sec.toFixed(2&lt;span&gt;);
            }
            t &lt;/span&gt;= t.substring(0, t.length - 3&lt;span&gt;);
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; t;
        }

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 00:00:00æ—¶åˆ†ç§’æ ¼å¼è½¬åŒ–ä¸ºç§’&lt;/span&gt;
        &lt;span&gt;function&lt;/span&gt;&lt;span&gt; timeEvent(e) {
            let time &lt;/span&gt;=&lt;span&gt; e;
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; len = time.split(':'&lt;span&gt;);
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (len.length == 3&lt;span&gt;) {
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; hour = time.split(':')[0&lt;span&gt;];
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; min = time.split(':')[1&lt;span&gt;];
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; sec = time.split(':')[2&lt;span&gt;];
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; Number(hour * 3600) + Number(min * 60) +&lt;span&gt; Number(sec);
            }
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (len.length == 2&lt;span&gt;) {
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; min = time.split(':')[0&lt;span&gt;];
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; sec = time.split(':')[1&lt;span&gt;];
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; Number(min * 60) +&lt;span&gt; Number(sec);
            }
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (len.length == 1&lt;span&gt;) {
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; sec = time.split(':')[0&lt;span&gt;];
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; Number(sec);
            }
        }
    &lt;/span&gt;&amp;lt;/script&amp;gt;
&amp;lt;/body&amp;gt;

&amp;lt;/html&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;å‚è€ƒæ–‡ç« ï¼š&lt;/h2&gt;
&lt;blockquote readability=&quot;0.12406015037594&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https://www.zhangxinxu.com/wordpress/2019/07/html-audio-api-guide/%20%20https://developer.mozilla.org/zh-CN/docs/Web/Guide/HTML/Using_HTML5_audio_and_video%20%20https://blog.csdn.net/qq_31984879/article/details/84071245%20%20https://www.w3school.com.cn/tags/av_prop_currenttime.asp&quot; target=&quot;_blank&quot;&gt;https://www.zhangxinxu.com/wordpress/2019/07/html-audio-api-guide/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://developer.mozilla.org/zh-CN/docs/Web/Guide/HTML/Using_HTML5_audio_and_video&quot; target=&quot;_blank&quot;&gt;https://developer.mozilla.org/zh-CN/docs/Web/Guide/HTML/Using_HTML5_audio_and_video&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/qq_31984879/article/details/84071245&quot; target=&quot;_blank&quot;&gt;https://blog.csdn.net/qq_31984879/article/details/84071245&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.w3school.com.cn/tags/av_prop_currenttime.asp&quot; target=&quot;_blank&quot;&gt;https://www.w3school.com.cn/tags/av_prop_currenttime.asp&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
<pubDate>Fri, 27 Nov 2020 16:55:00 +0000</pubDate>
<dc:creator>è¿½é€æ—¶å…‰è€…</dc:creator>
<og:description>å‰è¨€ï¼š ä»Šå¤©æ¥åˆ°ä¸€ä¸ªéœ€æ±‚ï¼Œéœ€è¦è·å–æŸä¸ª.mp3éŸ³é¢‘æ–‡ä»¶çš„æ—¶é—´é•¿åº¦å’ŒæŒ‡å®šéŸ³é¢‘audioåœ¨æŸä¸ªæ—¶é—´ç‚¹è¿›è¡Œæ’­æ”¾ï¼ˆæ¯”å¦‚è¯´è¿™ä¸ªè§†é¢‘æœ‰4åˆ†é’Ÿï¼Œæˆ‘è¦è®©å®ƒé»˜è®¤ä»ç¬¬2ç§’çš„æ—¶å€™å¼€å§‹æ’­æ”¾ï¼‰ï¼Œè¿™é‡Œå½“ç„¶æƒ³åˆ°äº†H5ä¸­çš„audio</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/Can-daydayup/p/14049190.html</dc:identifier>
</item>
<item>
<title>Apache Hudiåˆå­¦è€…æŒ‡å— - leesf</title>
<link>http://www.cnblogs.com/leesf456/p/14050996.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/leesf456/p/14050996.html</guid>
<description>&lt;p&gt;åœ¨æ·±å…¥ç ”ç©¶Hudiæœºåˆ¶ä¹‹å‰ï¼Œè®©æˆ‘ä»¬é¦–å…ˆäº†è§£Hudiæ­£åœ¨è§£å†³çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å®¢æˆ·åœ¨ä½¿ç”¨æ•°æ®æ¹–æ—¶é€šå¸¸ä¼šé—®ä¸€ä¸ªé—®é¢˜ï¼šå½“æºè®°å½•è¢«æ›´æ–°æ—¶ï¼Œå¦‚ä½•æ›´æ–°æ•°æ®æ¹–ï¼Ÿè¿™æ˜¯ä¸€ä¸ªå¾ˆéš¾è§£å†³çš„é—®é¢˜ï¼Œå› ä¸ºä¸€æ—¦ä½ å†™äº†CSVæˆ–Parquetæ–‡ä»¶ï¼Œå”¯ä¸€çš„é€‰æ‹©å°±æ˜¯é‡å†™å®ƒä»¬ï¼Œæ²¡æœ‰ä¸€ç§ç®€å•çš„æœºåˆ¶å¯ä»¥æ‰“å¼€è¿™äº›æ–‡ä»¶ï¼Œæ‰¾åˆ°ä¸€æ¡è®°å½•å¹¶ç”¨æºä»£ç ä¸­çš„æœ€æ–°å€¼æ›´æ–°è¯¥è®°å½•ï¼Œå½“æ•°æ®æ¹–ä¸­æœ‰å¤šå±‚æ•°æ®é›†æ—¶ï¼Œé—®é¢˜å˜å¾—æ›´åŠ ä¸¥é‡ï¼Œæ•°æ®é›†çš„è¾“å‡ºå°†ä½œä¸ºä¸‹æ¬¡æ•°æ®é›†è®¡ç®—çš„è¾“å…¥ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ•°æ®åº“ä¸­ç”¨æˆ·åªéœ€å‘å‡ºä¸€ä¸ªæ›´æ–°è®°å½•å‘½ä»¤å°±å¯ä»¥å®Œæˆä»»åŠ¡äº†ï¼Œæ‰€ä»¥ä»æ•°æ®åº“çš„æ€ç»´æ¨¡å¼æ¥çœ‹å¾ˆéš¾ç†è§£ä¸Šè¿°é™åˆ¶ï¼Œä¸ºä»€ä¹ˆä¸èƒ½åœ¨æ•°æ®æ¹–ä¸­å®Œæˆï¼Ÿé¦–å…ˆè®©æˆ‘ä»¬æ¥çœ‹çœ‹æ•°æ®åº“æ˜¯å¦‚ä½•åº”ç”¨è®°å½•çº§æ›´æ–°çš„ï¼Œè¿™å¯¹äºç†è§£Hudiæ˜¯å¦‚ä½•å·¥ä½œçš„å¾ˆæœ‰ä»·å€¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;RDBMSçš„æ›´æ–°åŸç†&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;RDBMSå°†æ•°æ®å­˜å‚¨åœ¨B-Treeå­˜å‚¨æ¨¡å‹ä¸­ï¼Œæ•°æ®å­˜å‚¨åœ¨æ•°æ®é¡µä¸­ï¼Œæ•°æ®é¡µå¯ä»¥é€šè¿‡åœ¨è¡¨çš„åˆ—ä¸Šåˆ›å»ºçš„ç´¢å¼•æ¥æ‰¾åˆ°ã€‚å› æ­¤å½“å‘å‡ºæ›´æ–°å‘½ä»¤æ—¶ï¼ŒRDBMSå¼•æ“ä¼šæ‰¾åˆ°åŒ…å«è¯¥è®°å½•çš„ç¡®åˆ‡é¡µé¢ï¼Œå¹¶åœ¨è¯¥æ•°æ®é¡µé¢ä¸­é€‚å½“åœ°æ›´æ–°æ•°æ®ï¼Œè¿™æ˜¯ä¸€ä¸ªç®€åŒ–çš„æè¿°ï¼Œåœ¨å¤§å¤šæ•°ç°ä»£RDBMSå¼•æ“ä¸­ï¼Œåœ¨å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ç­‰æ–¹é¢å­˜åœ¨é¢å¤–çš„å¤æ‚æ€§ï¼Œä½†åŸºæœ¬æ€æƒ³ä¿æŒä¸å˜ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹å›¾è¯´æ˜äº†å¦‚ä½•é€šè¿‡Bæ ‘ç´¢å¼•æ‰¾åˆ°å¸¦æœ‰å€¼13çš„æ•°æ®é¡µï¼Œåº•å±‚ï¼ˆç¬¬ä¸‰å±‚ï¼‰æ˜¯è¡¨ç¤ºæ•°æ®é¡µçš„å¶èŠ‚ç‚¹ï¼Œé¡¶å±‚ï¼ˆç¬¬ä¸€å±‚ï¼‰å’Œä¸­é—´å±‚ï¼ˆç¬¬äºŒå±‚ï¼‰ä¸Šçš„èŠ‚ç‚¹æ˜¯ç´¢å¼•å€¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/616953/202011/616953-20201127233000829-1137004049.jpg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯ä¸€äº›éSQLæ•°æ®åº“ï¼ˆå¦‚Cassandraï¼‰ä¸­çš„æ›´æ–°å·¥ä½œæ–¹å¼ï¼š&lt;/p&gt;
&lt;p&gt;è®¸å¤šéSQLæ•°æ®åº“å°†æ•°æ®å­˜å‚¨åœ¨LSMæ ‘çš„å­˜å‚¨æ¨¡å‹ä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªåŸºäºæ—¥å¿—çš„å­˜å‚¨æ¨¡å‹ï¼Œæ–°æ•°æ®ï¼ˆæ’å…¥/æ›´æ–°/åˆ é™¤ï¼‰è¢«æ·»åŠ åˆ°append-onlyçš„æ—¥å¿—ä¸­ï¼Œç„¶åå®šæœŸå°†æ—¥å¿—åˆå¹¶å›æ•°æ®æ–‡ä»¶ï¼Œä½¿æ•°æ®æ–‡ä»¶ä¸æ‰€æœ‰æ›´æ”¹çš„æ•°æ®ä¿æŒæœ€æ–°ï¼Œè¿™ç§åˆå¹¶è¿‡ç¨‹ç§°ä¸ºå‹ç¼©ï¼Œå› æ­¤å½“æ›´æ–°ä¸€æ¡è®°å½•æ—¶ï¼Œåªæ˜¯å°†å…¶å†™å…¥åˆ°append-onlyæ—¥å¿—ä¸­ï¼Œæ ¹æ®æ•°æ®åº“å¼•æ“çš„ä¼˜åŒ–è§„åˆ™ï¼Œå°†ç»„åˆappend-onlyæ—¥å¿—å’Œæ•°æ®æ–‡ä»¶æ¥ä¸ºè¯»å–æŸ¥è¯¢æä¾›æœåŠ¡ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªç®€åŒ–çš„æè¿°ï¼Œä½†åŸºæœ¬æ€æƒ³ç›¸åŒã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹å›¾è¯´æ˜äº†å¦‚ä½•å°†æ–°çš„å’Œæ›´æ–°çš„æ•°æ®æ·»åŠ åˆ°append-onlyæ—¥å¿—ï¼ˆçº§åˆ«0ï¼‰ä¸­ï¼Œå¹¶æœ€ç»ˆåˆå¹¶åˆ°æ›´å¤§çš„æ–‡ä»¶ä¸­ï¼ˆçº§åˆ«1å’Œçº§åˆ«2ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/616953/202011/616953-20201127233017680-2018787229.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬å·²ç»åŸºæœ¬äº†è§£äº†æ•°æ®åº“å¦‚ä½•å¤„ç†è®°å½•çº§åˆ«çš„æ›´æ–°ï¼Œæ¥ç€çœ‹çœ‹Hudiå¦‚ä½•å·¥ä½œï¼Œåœ¨Hudiï¼ˆå’Œç±»ä¼¼çš„æ¡†æ¶ï¼Œå¦‚DeltaLakeï¼‰å‡ºç°ä¹‹å‰ï¼Œå¯¹datalakeåº”ç”¨æ›´æ–°çš„å”¯ä¸€é€”å¾„æ˜¯é‡æ–°è®¡ç®—å¹¶é‡å†™æ•´ä¸ªcsv/parquetæ–‡ä»¶ï¼Œå¦‚å‰æ‰€è¿°ï¼Œæ²¡æœ‰ç®€å•çš„æœºåˆ¶æ¥æ‰“å¼€æ–‡ä»¶å¹¶æ›´æ–°å…¶ä¸­çš„å•ä¸ªè®°å½•ï¼Œé€ æˆè¿™ç§é™åˆ¶æœ‰å¾ˆå¤šåŸå› ï¼Œå…¶ä¸­ä¸€äº›ä¸»è¦åŸå› æ˜¯ä¸çŸ¥é“å“ªä¸ªæ–‡ä»¶åŒ…å«è¦æ›´æ–°çš„è®°å½•ï¼Œä¹Ÿæ²¡æœ‰æœ‰æ•ˆçš„æ–¹æ³•æ¥æ‰«æä¸€ä¸ªæ–‡ä»¶æ¥æ‰¾åˆ°æƒ³è¦æ›´æ–°çš„è®°å½•ï¼Œå¦å¤–Parquetè¿™æ ·çš„åˆ—æ–‡ä»¶æ ¼å¼ä¸èƒ½å°±åœ°æ›´æ–°ï¼Œåªèƒ½é‡æ–°åˆ›å»ºã€‚åœ¨æ•°æ®æ¹–ä¸­ï¼Œé€šå¸¸è¿˜æœ‰å¤šä¸ªè¢«è½¬æ¢çš„æ•°æ®å±‚ï¼Œå…¶ä¸­ä¸€ç»„æ–‡ä»¶è¢«è¾“å…¥åˆ°ä¸‹ä¸€ç»„æ–‡ä»¶çš„è®¡ç®—ä¸­ï¼Œå› æ­¤åœ¨å•è®°å½•æ›´æ–°æœŸé—´ç¼–å†™é€»è¾‘æ¥ç®¡ç†è¿™ç§ä¾èµ–å…³ç³»å‡ ä¹æ˜¯ä¸å¯èƒ½çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;HUDI&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;HUDIæ¡†æ¶çš„åŸºæœ¬æ€æƒ³æ˜¯é‡‡ç”¨æ•°æ®åº“æ›´æ–°æœºåˆ¶çš„æ¦‚å¿µï¼Œå¹¶å°†å…¶åº”ç”¨äºdatalakeï¼Œè¿™å°±æ˜¯Hudiå®ç°çš„ç›®æ ‡ï¼ŒHudiæœ‰ä¸¤ç§â€œæ›´æ–°â€æœºåˆ¶ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å†™æ—¶æ‹·è´ï¼ˆCOWï¼‰-è¿™ç±»ä¼¼äºRDBMS B-Treeæ›´æ–°&lt;/li&gt;
&lt;li&gt;è¯»æ—¶åˆå¹¶ï¼ˆMORï¼‰-è¿™ç±»ä¼¼äºNo-SQL LSM-Treeæ›´æ–°&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æ­¤å¤–ï¼ŒHUDIè¿˜ç»´æŠ¤ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å°†æ•°æ®è®°å½•æ˜ å°„åˆ°æ–‡ä»¶ï¼ˆç±»ä¼¼äºæ•°æ®åº“ç´¢å¼•ï¼‰&lt;/li&gt;
&lt;li&gt;è·Ÿè¸ªåˆ°æ•°æ®æ¹–ä¸­çš„æ¯ä¸ªé€»è¾‘è¡¨çš„æœ€è¿‘æäº¤&lt;/li&gt;
&lt;li&gt;èƒ½å¤ŸåŸºäºâ€œrecord_keyâ€åœ¨æ–‡ä»¶ä¸­è¯†åˆ«å•ä¸ªè®°å½•ï¼Œè¿™åœ¨æ‰€æœ‰Hudiæ•°æ®é›†ä¸­æ˜¯å¿…éœ€çš„ï¼Œç±»ä¼¼äºæ•°æ®åº“è¡¨ä¸­çš„ä¸»é”®&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Hudiä½¿ç”¨ä¸Šè¿°æœºåˆ¶ä»¥åŠâ€œprecombine_keyâ€æœºåˆ¶æ¥ä¿è¯ä¸ä¼šå­˜åœ¨é‡å¤çš„è®°å½•ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æ ‡å‡†æ•°æ®æ–‡ä»¶å¤§å°ï¼ˆå°½å¯èƒ½ï¼‰&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;Copy on Write&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨è¯¥æ¨¡å‹ä¸­ï¼Œå½“è®°å½•æ›´æ–°æ—¶ï¼ŒHudiä¼šæ‰¾åˆ°åŒ…å«æ›´æ–°æ•°æ®çš„æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨æ›´æ–°å€¼é‡å†™è¿™äº›æ–‡ä»¶ï¼ŒåŒ…å«å…¶ä»–è®°å½•çš„æ‰€æœ‰å…¶ä»–æ–‡ä»¶ä¿æŒä¸å˜ï¼Œå› æ­¤æ›´æ–°çš„å¤„ç†æ˜¯å¿«é€Ÿæœ‰æ•ˆçš„ï¼Œè¯»å–æŸ¥è¯¢é€šè¿‡è¯»å–æœ€æ–°çš„æ•°æ®æ–‡ä»¶æ¥æŸ¥çœ‹æœ€æ–°çš„æ›´æ–°ï¼Œæ­¤æ¨¡å‹é€‚ç”¨äºè¯»æ€§èƒ½æ›´ä¸ºé‡è¦çš„è¯»é‡è´Ÿè½½ï¼Œè¿™ç§æ¨¡å‹çš„ç¼ºç‚¹æ˜¯çªç„¶çš„å†™æ“ä½œä¼šå¯¼è‡´å¤§é‡çš„æ–‡ä»¶è¢«é‡å†™ï¼Œä»è€Œå¯¼è‡´å¤§é‡çš„å¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Merge on Read&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨è¯¥æ¨¡å‹ä¸­ï¼Œå½“è®°å½•æ›´æ–°æ—¶ï¼ŒHudiä¼šå°†å®ƒé™„åŠ åˆ°æ•°æ®æ¹–è¡¨çš„æ—¥å¿—ä¸­ï¼Œéšç€æ›´å¤šçš„å†™å…¥æ“ä½œè¿›å…¥ï¼Œå®ƒä»¬éƒ½ä¼šè¢«é™„åŠ åˆ°æ—¥å¿—ä¸­ï¼Œé€šè¿‡ä»æ—¥å¿—å’Œæ•°æ®æ–‡ä»¶ä¸­è¯»å–æ•°æ®å¹¶å°†ç»“æœåˆå¹¶åœ¨ä¸€èµ·ï¼Œæˆ–è€…æ ¹æ®ç”¨æˆ·å®šä¹‰çš„å‚æ•°åªä»æ•°æ®æ–‡ä»¶ä¸­è¯»å–æ•°æ®æ¥æœåŠ¡è¯»å–æŸ¥è¯¢ï¼Œå¦‚æœç”¨æˆ·å¸Œæœ›å®æ—¶æŸ¥çœ‹æ•°æ®ï¼Œåˆ™ä»æ—¥å¿—ä¸­è¯»å–æ•°æ®ï¼›å¦åˆ™ï¼Œå¦‚æœæŒ‡å®šä¸ºread optimizedè¡¨ï¼Œåˆ™ä»æ•°æ®æ–‡ä»¶ä¸­è¯»å–æ•°æ®ï¼Œä½†æ•°æ®å¯èƒ½å·²è¿‡æ—¶ï¼ŒHudiä¼šå®šæœŸå°†æ—¥å¿—åˆå¹¶åˆ°æ•°æ®æ–‡ä»¶ä¸­ï¼Œä»¥ä½¿å®ƒä»¬ä¿æŒæœ€æ–°çŠ¶æ€ï¼Œè¿™æ˜¯é…ç½®ä¸ºæ ¹æ®ç”¨ä¾‹éœ€æ±‚å®šæœŸè¿è¡Œçš„å‹ç¼©è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ çš„æ•°æ®æ¹–ä¸­æœ‰å¤šå±‚æ•°æ®é›†ï¼Œæ¯ä¸€å±‚éƒ½å°†å…¶è¾“å‡ºä½œä¸ºä¸‹ä¸€ä¸ªè®¡ç®—çš„è¾“å…¥ï¼Œé‚£ä¹ˆåªè¦æ‰€æœ‰è¿™äº›æ•°æ®é›†éƒ½æ˜¯Hudiæ•°æ®é›†ï¼Œè®°å½•çº§æ›´æ–°å¯ä»¥å¾ˆå¥½åœ°ã€è‡ªåŠ¨åœ°åœ¨å¤šä¸ªå¤„ç†å±‚ä¸­ä¼ æ’­ï¼Œè€Œä¸å¿…é‡æ–°ç¼–å†™æ•´ä¸ªæ•°æ®é›†ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸Šæ‰€æœ‰è¿™äº›éƒ½æ˜¯ä»è®°å½•æ›´æ–°çš„è§’åº¦å‡ºå‘çš„ï¼ŒåŒæ ·çš„Hudiæ¦‚å¿µä¹Ÿé€‚ç”¨äºæ’å…¥å’Œåˆ é™¤ï¼Œå¯¹äºåˆ é™¤æœ‰è½¯åˆ é™¤å’Œç¡¬åˆ é™¤ä¸¤ä¸ªé€‰é¡¹ï¼Œä½¿ç”¨è½¯åˆ é™¤ï¼ŒHudiä¿ç•™è®°å½•é”®å¹¶åˆ é™¤è®°å½•æ•°æ®ï¼Œä½¿ç”¨ç¡¬åˆ é™¤ï¼ŒHudiä¼šä¸ºæ•´ä¸ªè®°å½•å†™ç©ºç™½å€¼ï¼Œä¸¢å¼ƒè®°å½•é”®å’Œè®°å½•æ•°æ®ã€‚&lt;/p&gt;
</description>
<pubDate>Fri, 27 Nov 2020 15:31:00 +0000</pubDate>
<dc:creator>leesf</dc:creator>
<og:description>åœ¨æ·±å…¥ç ”ç©¶Hudiæœºåˆ¶ä¹‹å‰ï¼Œè®©æˆ‘ä»¬é¦–å…ˆäº†è§£Hudiæ­£åœ¨è§£å†³çš„é—®é¢˜ã€‚ å®¢æˆ·åœ¨ä½¿ç”¨æ•°æ®æ¹–æ—¶é€šå¸¸ä¼šé—®ä¸€ä¸ªé—®é¢˜ï¼šå½“æºè®°å½•è¢«æ›´æ–°æ—¶ï¼Œå¦‚ä½•æ›´æ–°æ•°æ®æ¹–ï¼Ÿè¿™æ˜¯ä¸€ä¸ªå¾ˆéš¾è§£å†³çš„é—®é¢˜ï¼Œå› ä¸ºä¸€æ—¦ä½ å†™äº†CSVæˆ–Parquetæ–‡</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/leesf456/p/14050996.html</dc:identifier>
</item>
<item>
<title>ç—å­è¡¡åµŒå…¥å¼ï¼šä¸€æ¬¡åˆ©ç”¨IARè‡ªå¸¦CRCå®Œæ•´æ€§æ ¡éªŒåŠŸèƒ½çš„å®è·µ(ä¸ºKBOOTåŠ BCA) - ç—å­è¡¡</title>
<link>http://www.cnblogs.com/henjay724/p/14050783.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/henjay724/p/14050783.html</guid>
<description>&lt;p&gt;ç—å­è¡¡ä¹‹å‰å†™è¿‡ä¸¤ç¯‡å…³äºIARä¸­è‡ªå¸¦CRCæ ¡éªŒåŠŸèƒ½çš„æ–‡ç« ï¼Œç®—æ˜¯æŠŠè¿™ä¸ªåŠŸèƒ½ç»†èŠ‚ä»‹ç»å¾—æ¯”è¾ƒæ¸…æ¥šäº†ï¼Œä½†æ˜¯ä¿—è¯è¯´å¾—å¥½ï¼Œç†è®ºæ‡‚å¾—å†å¤šï¼Œä¸èƒ½ç”¨äºå®è·µé‚£ç­‰äºæ²¡å­¦ã€‚ä»Šå¤©ç—å­è¡¡å°±åˆ©ç”¨è¿™ä¸ªåŠŸèƒ½æ¥è§£å†³ä¸€ä¸ªå®é™…éœ€æ±‚&lt;/p&gt;&lt;div id=&quot;cnblogs_post_body&quot; readability=&quot;140.72049689441&quot;&gt;
&lt;hr/&gt;&lt;p&gt;ã€€ã€€å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç—å­è¡¡ï¼Œæ˜¯æ­£ç»ææŠ€æœ¯çš„ç—å­ã€‚ä»Šå¤©ç—å­è¡¡ç»™å¤§å®¶åˆ†äº«çš„æ˜¯&lt;strong&gt;åˆ©ç”¨IARè‡ªå¸¦CRCå®Œæ•´æ€§æ ¡éªŒåŠŸèƒ½çš„ä¸€æ¬¡å®è·µ(ä¸ºKBOOTåŠ BCA)&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ç—å­è¡¡ä¹‹å‰å†™è¿‡ä¸¤ç¯‡å…³äºIARä¸­è‡ªå¸¦CRCæ ¡éªŒåŠŸèƒ½çš„æ–‡ç«  &lt;a href=&quot;https://www.cnblogs.com/henjay724/p/14042538.html&quot;&gt;ã€Šåœ¨IARå¼€å‘ç¯å¢ƒä¸‹ä¸ºå·¥ç¨‹å¼€å¯CRCå®Œæ•´æ€§æ ¡éªŒåŠŸèƒ½çš„æ–¹æ³•ã€‹&lt;/a&gt;ã€&lt;a href=&quot;https://www.cnblogs.com/henjay724/category/1170736.html&quot;&gt;ã€Šæ¢æå¼€å¯CRCå®Œæ•´æ€§æ ¡éªŒçš„IARå·¥ç¨‹ç”Ÿæˆ.outå’Œ.binæ–‡ä»¶å…ˆåé¡ºåºã€‹&lt;/a&gt;ï¼Œç®—æ˜¯æŠŠè¿™ä¸ªåŠŸèƒ½ç»†èŠ‚ä»‹ç»å¾—æ¯”è¾ƒæ¸…æ¥šäº†ï¼Œä½†æ˜¯ä¿—è¯è¯´å¾—å¥½ï¼Œç†è®ºæ‡‚å¾—å†å¤šï¼Œä¸èƒ½ç”¨äºå®è·µé‚£ç­‰äºæ²¡å­¦ã€‚ä»Šå¤©ç—å­è¡¡å°±åˆ©ç”¨è¿™ä¸ªåŠŸèƒ½æ¥è§£å†³ä¸€ä¸ªå®é™…éœ€æ±‚ï¼š&lt;/p&gt;
&lt;h3 id=&quot;ä¸€ã€kbootä¸­bcaå¡«å…¥crcæ ¡éªŒéœ€æ±‚&quot;&gt;ä¸€ã€KBOOTä¸­BCAå¡«å…¥CRCæ ¡éªŒéœ€æ±‚&lt;/h3&gt;
&lt;p&gt;ã€€ã€€è¯´èµ·è¿™ä¸ªéœ€æ±‚ï¼Œè®°å¾—é‚£æ˜¯2014å¹´çš„ç¬¬ä¸€åœºé›ªï¼Œé‚£æ—¶å€™ç—å­è¡¡æ­£åœ¨é£æ€å¡å°”è½¯ä»¶ç»„å‚ä¸Kinetis Bootloaderé¡¹ç›®ï¼ˆç®€ç§°KBOOTï¼‰çš„ç ”å‘ï¼Œç—å­è¡¡ä¸ºè¿™ä¸ªé¡¹ç›®å†™è¿‡ä¸€äº›æ–‡ç« ï¼Œè¯¦è§ &lt;a href=&quot;https://www.cnblogs.com/henjay724/p/9305876.html&quot;&gt;ã€Šé£æ€å¡å°”Kinetisç³»åˆ—MCUå¼€å‘é‚£äº›äº‹ã€‹&lt;/a&gt; é‡Œçš„å¯åŠ¨ç¯‡ç³»åˆ—ï¼ŒKinetisæ˜¯é£æ€å¡å°”å½“æ—¶ä¸»æ¨çš„Cortex-Må¾®æ§åˆ¶å™¨ï¼ŒKBOOTå°±æ˜¯ä¸ºKinetisè®¾è®¡çš„å…¨åŠŸèƒ½Bootloaderï¼Œè¿™å¯èƒ½æ˜¯åµŒå…¥å¼ä¸–ç•Œé‡Œç¬¬ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„é€šç”¨æ¶æ„Bootloaderã€‚è¿™ä¸ªBootloaderåŒ…å«ä¸€ä¸ªç”¨æˆ·é…ç½®åŠŸèƒ½ï¼ˆBCAï¼‰ï¼Œç®€å•è¯´å°±æ˜¯åœ¨ç”¨æˆ·Applicationçš„åç§»0x3c0 - 0x3ffè¿™16ä¸ªwordå­˜æ”¾ä¸€äº›Bootloaderé…ç½®ï¼Œå½“Bootloaderè¿è¡Œæ—¶ä¼šå…ˆå°è¯•ä»ApplicationåŒºåŸŸè¯»å‡ºè¿™16ä¸ªwordï¼Œè·å–ç”¨æˆ·é…ç½®ï¼ˆè¶…æ—¶æ—¶é—´ã€å¤–è®¾ç±»å‹ã€idã€é€Ÿåº¦é€‰é¡¹ç­‰ï¼‰ï¼Œç„¶åæ ¹æ®ç”¨æˆ·é…ç½®å†å»å¯åŠ¨æˆ–å‡çº§ç”¨æˆ·Applicationã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€CRCå®Œæ•´æ€§æ ¡éªŒåŠŸèƒ½å æ®äº†BCAé‡Œçš„12ä¸ªbyteï¼Œæ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„Bootloaderç‰¹æ€§ï¼Œå…¶å®Œæ•´åŠŸèƒ½è¯¦è§ &lt;a href=&quot;https://www.cnblogs.com/henjay724/p/9355642.html&quot;&gt;ã€ŠKBOOTç‰¹æ€§(å®Œæ•´æ€§æ£€æµ‹)ã€‹&lt;/a&gt;ï¼Œä»Šå¤©ç—å­è¡¡è¦è¯´çš„éœ€æ±‚å°±æ˜¯ç›´æ¥åœ¨Applicationå·¥ç¨‹ç¼–è¯‘æ—¶ç”ŸæˆåŒ…å«æ­£ç¡®CRCç›¸å…³å‚æ•°çš„BCAï¼Œè€Œä¸æ˜¯åƒä»¥å‰é‚£æ ·åœ¨æœ€ç»ˆbinaryæ–‡ä»¶é‡ŒäºŒæ¬¡ç¼–è¾‘æ·»åŠ ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€æˆ‘ä»¬ä»¥MK64FN1Mè¿™é¢—èŠ¯ç‰‡ä¸ºä¾‹ï¼Œä¸‹è½½å®ƒçš„è½¯ä»¶åŒ…ï¼Œè½¯ä»¶åŒ…é‡Œæœ‰KBOOTåŠå…¶ç¤ºä¾‹Applicationï¼Œæ‰¾åˆ° \SDK_2.8.2_FRDM-K64F\boards\frdmk64f\bootloader_examples\demo_apps\led_demo_freedom_a000\iar ä¸‹çš„Applicationå·¥ç¨‹ï¼Œå·¥ç¨‹æºæ–‡ä»¶ startup_MK64F12.s é‡Œå®šä¹‰äº†__bootloaderConfigurationAreaï¼Œä½†æ˜¯CRCåŒºåŸŸæ˜¯å…¨0xFFï¼ˆå³æ²¡æœ‰ä½¿èƒ½ï¼‰ï¼Œç¼–è¯‘ç”Ÿæˆçš„binæ–‡ä»¶é‡ŒCRCåŒºåŸŸä¹Ÿæ˜¯å…¨0xFFï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯å¡«å…¥æ­£ç¡®çš„CRCã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://henjay724.com/image/cnblogs/IAR_CRCPractice_KBOOT_user_app_default.PNG&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;äºŒã€å¼€å§‹åŠ¨æ‰‹å®è·µ&quot;&gt;äºŒã€å¼€å§‹åŠ¨æ‰‹å®è·µ&lt;/h3&gt;
&lt;h4 id=&quot;21-ç¡®å®šåŒ¹é…çš„crcç®—æ³•å‚æ•°è®¾ç½®&quot;&gt;2.1 ç¡®å®šåŒ¹é…çš„CRCç®—æ³•å‚æ•°è®¾ç½®&lt;/h4&gt;
&lt;p&gt;ã€€ã€€åœ¨KBOOTç”¨æˆ·æ‰‹å†Œé‡Œå¯ä»¥æ‰¾åˆ°å…¶CRCå…·ä½“ç®—æ³•ï¼Œå®ƒä½¿ç”¨çš„æ˜¯æ¯”è¾ƒä¸»æµçš„CRC32-MPEG2åˆ†æ”¯ï¼Œå…·ä½“å‚æ•°å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://henjay724.com/image/cnblogs/Kinetis_Boot_ImageCRC_mpeg2_characteristics.PNG&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä¸ºäº†æ–¹ä¾¿æ ¸å¯¹ç»“æœï¼Œç—å­è¡¡æ‰¾äº†ä¸€ä¸ªåœ¨çº¿CRCè®¡ç®—çš„ç½‘ç«™ï¼Œåˆ©ç”¨è¿™ä¸ªç½‘ç«™ï¼Œè®¾ç½®ä¸KBOOTä¸€è‡´çš„CRCå‚æ•°ï¼ˆä¸‹å›¾çº¢è‰²æ¡†å†…ï¼‰ï¼Œç„¶åæˆ‘ä»¬é€‰å–led_demo_freedom_a000.binçš„å‰16ä¸ªå­—èŠ‚ï¼ˆä¸‹å›¾è“è‰²æ¡†å†…ï¼‰ä½œä¸ºæµ‹è¯•æ•°æ®è¾“å…¥ï¼Œç‚¹å‡»Calculate CRCæŒ‰é’®ç”Ÿæˆç»“æœ0x8D96BDF0ï¼ˆä¸‹å›¾ç´«è‰²æ¡†å†…ï¼‰ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-text&quot;&gt;åœ¨çº¿ç½‘ç«™ï¼š http://www.sunshine2k.de/coding/javascript/crc/crc_js.html
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;http://henjay724.com/image/cnblogs/IAR_CRCPractice_KBOOT_crc_js_web_test.PNG&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€æˆ‘ä»¬ç°åœ¨å›åˆ°led_demo_freedom_a000å·¥ç¨‹ï¼Œåœ¨Linker/Checksumä¸‹ï¼Œä½¿èƒ½CRCåŠŸèƒ½ï¼Œä¸ºäº†ä¸ä¸Šè¿°æµ‹è¯•ä¸€è‡´ï¼ŒCRCè®¡ç®—èŒƒå›´è®¾ä¸º 0xa000 - 0xa00fï¼ˆå› ä¸ºç¨‹åºèµ·å§‹é“¾æ¥åœ°å€æ˜¯0xa000ï¼Œæ‰€ä»¥ä¹Ÿå°±æ˜¯æœ€ç»ˆ.biné‡Œçš„å‰16ä¸ªå­—èŠ‚ï¼‰ã€‚æŸ¥é˜…IAR developmentæ‰‹å†Œï¼Œåšäº†å¦‚ä¸‹CRCç®—æ³•å‚æ•°è®¾ç½®ï¼Œç¼–è¯‘å·¥ç¨‹å¾—åˆ°ç»“æœä¹Ÿæ˜¯0x8D96BDF0ï¼Œå› æ­¤CRCè®¾ç½®æ˜¯åŒ¹é…çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://henjay724.com/image/cnblogs/IAR_CRCPractice_KBOOT_iar_checksum_test.PNG&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;22-å¡«å……bcaçš„é¦–æ¬¡å°è¯•&quot;&gt;2.2 å¡«å……BCAçš„é¦–æ¬¡å°è¯•&lt;/h4&gt;
&lt;p&gt;ã€€ã€€ç¡®è®¤äº†CRCè®¾ç½®ï¼Œç°åœ¨å°±æ˜¯ä¿®æ”¹æºä»£ç äº†ï¼Œåœ¨BCAçš„CRCåŒºåŸŸé‡Œå°†åˆå§‹çš„0xFFå€¼å…¨éƒ¨æ›´æ¢ä¸ºçœŸå®çš„CRCè®¾ç½®å€¼__checksumã€__checksum_beginã€__checksum_endï¼Œä»£ç ç®€å•ä¿®æ”¹å¦‚ä¸‹ã€‚é‡ç¼–å·¥ç¨‹åæŸ¥çœ‹.binæ–‡ä»¶ï¼Œå‘ç°èµ·æ­¢èŒƒå›´ä¸¤ä¸ªå‚æ•°æ˜¯å¯¹çš„ï¼Œä½†æ˜¯CRCæ ¡éªŒå€¼å¹¶ä¸å¯¹ï¼Œå¡«æˆäº†0x0000a7fcï¼ŒæŸ¥çœ‹mapæ–‡ä»¶å¾—çŸ¥è¿™æ˜¯__checksumçš„é“¾æ¥åœ°å€ï¼Œå¹¶ä¸æ˜¯__checksumçš„å€¼ã€‚æƒ³æƒ³ä¹Ÿæ˜¯ï¼ŒCRCæ ¡éªŒå€¼æ˜¯é“¾æ¥ç”Ÿæˆbinåæ‰è®¡ç®—çš„ï¼Œä½†æºæ–‡ä»¶æ˜¯åœ¨é“¾æ¥å‰ç¼–è¯‘çš„ï¼Œä¸å¯èƒ½åœ¨ç¼–è¯‘æ—¶å¾—åˆ°é“¾æ¥åçš„ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://henjay724.com/image/cnblogs/IAR_CRCPractice_KBOOT_iar_first_try.PNG&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;23-å¡«å……bcaçš„æœ€ç»ˆæ–¹æ¡ˆ&quot;&gt;2.3 å¡«å……BCAçš„æœ€ç»ˆæ–¹æ¡ˆ&lt;/h4&gt;
&lt;p&gt;ã€€ã€€é¦–æ¬¡å°è¯•å¤±è´¥ï¼Œäº‹æƒ…è¿œæ²¡æœ‰æƒ³è±¡å¾—é‚£ä¹ˆç®€å•ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å·¥ç¨‹é“¾æ¥æ–‡ä»¶ä¸ŠåŠ¨å¿ƒæ€ï¼Œè¦ç›´æ¥æŠŠ__checksumé“¾æ¥åˆ°BCAé‡Œçš„å…·ä½“åç§»ä½ç½®ã€‚å› æ­¤startup_MK64F12.s é‡Œ__bootloaderConfigurationAreaä»crcExpectedValueåŠå…¶ä¹‹åå…¨éƒ¨å»æ‰ï¼Œå¹¶ä¸”__FlashConfigä¹Ÿå®é™…ä¸éœ€è¦ï¼ˆä»…å¯¹äºé“¾æ¥åœ¨0åœ°å€æ‰æœ‰æ•ˆï¼Œè¿™æ˜¯Kinetisç‰¹æ€§ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ç„¶åæˆ‘ä»¬éœ€è¦é‡æ–°åœ¨main.cé‡Œå®šä¹‰ä¸€ä¸ªbcaå¸¸é‡æ•°ç»„ï¼ŒæŠŠé™¤crcExpectedValueä¹‹å¤–ç¼ºå¤±çš„BCAæ•°æ®å…¨éƒ¨æ”¾è¿›å»ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-C&quot;&gt;const uint32_t bca[16] @ &quot;.bca_left&quot; = {0x1388ffff, 0xffffffff, 0xffffffff, 0xffffffff,
                                        0xffffffff, 0xffffffff, 0xffffffff, 0xffffffff,
                                        0xffffffff, 0xffffffff, 0xffffffff, 0xffffffff,
                                        0xffffffff, 0xffffffff, 0xffffffff, 0xffffffff};
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€æœ€åæˆ‘ä»¬éœ€è¦ä¿®æ”¹é“¾æ¥æ–‡ä»¶MK64FN1M0xxx12_application_0xA000.icfå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-text&quot;&gt;//place at address mem:__ICFEDIT_intvec_start__ { readonly section .intvec, readonly section .noinit };
//place in FLASH_region { block ApplicationFlash };
place at address mem:__ICFEDIT_intvec_start__ { readonly section .intvec };
place at address mem:0xa3cc { ro section .checksum };
place at address mem:0xa3d0 { ro section .bca_left };
place in FLASH_region { readonly section .noinit, block ApplicationFlash };
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€ç»è¿‡è¿™ä¹ˆä¸€ç•ªæ“ä½œï¼Œè®©æˆ‘ä»¬é‡æ–°ç¼–è¯‘å·¥ç¨‹å†çœ‹biné‡Œç»“æœï¼Œå“ˆå“ˆï¼Œè¿™æ¬¡BCAæœç„¶æ˜¯æ­£ç¡®çš„CRCæ ¡éªŒå€¼äº†ï¼ˆè¿™æ¬¡å€¼æ˜¯0xf62ce2b6ï¼Œå‘ç”Ÿäº†å˜åŒ–ï¼Œå› ä¸ºæºä»£ç çš„æ”¹åŠ¨ï¼Œbinå‰16ä¸ªå­—èŠ‚å†…å®¹ä¹Ÿç›¸åº”å˜åŒ–äº†ï¼‰ï¼Œå¤§åŠŸå‘Šæˆã€‚åº•ä¸‹çš„äº‹æƒ…å°±ç®€å•äº†ï¼Œåœ¨CRCè®¾ç½®ç•Œé¢é‡Œè°ƒæ•´æƒ³è¦çš„CRCè®¡ç®—èŒƒå›´å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://henjay724.com/image/cnblogs/IAR_CRCPractice_KBOOT_iar_final_solution.PNG&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€è‡³æ­¤ï¼Œåˆ©ç”¨IARè‡ªå¸¦CRCå®Œæ•´æ€§æ ¡éªŒåŠŸèƒ½çš„ä¸€æ¬¡å®è·µ(ä¸ºKBOOTåŠ BCA)ç—å­è¡¡ä¾¿ä»‹ç»å®Œæ¯•äº†ï¼ŒæŒå£°åœ¨å“ªé‡Œ~~~&lt;/p&gt;
&lt;h3 id=&quot;æ¬¢è¿è®¢é˜…&quot;&gt;æ¬¢è¿è®¢é˜…&lt;/h3&gt;
&lt;p&gt;æ–‡ç« ä¼šåŒæ—¶å‘å¸ƒåˆ°æˆ‘çš„ &lt;a href=&quot;https://www.cnblogs.com/henjay724/&quot;&gt;åšå®¢å›­ä¸»é¡µ&lt;/a&gt;ã€&lt;a href=&quot;https://blog.csdn.net/henjay724&quot;&gt;CSDNä¸»é¡µ&lt;/a&gt;ã€&lt;a href=&quot;https://www.zhihu.com/people/henjay724&quot;&gt;çŸ¥ä¹ä¸»é¡µ&lt;/a&gt;ã€&lt;a href=&quot;http://weixin.sogou.com/weixin?type=1&amp;amp;query=%E7%97%9E%E5%AD%90%E8%A1%A1%E5%B5%8C%E5%85%A5%E5%BC%8F&quot;&gt;å¾®ä¿¡å…¬ä¼—å·&lt;/a&gt; å¹³å°ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;å¾®ä¿¡æœç´¢&quot;&lt;strong&gt;ç—å­è¡¡åµŒå…¥å¼&lt;/strong&gt;&quot;æˆ–è€…æ‰«æä¸‹é¢äºŒç»´ç ï¼Œå°±å¯ä»¥åœ¨æ‰‹æœºä¸Šç¬¬ä¸€æ—¶é—´çœ‹äº†å“¦ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://henjay724.com/image/github/pzhMcu_qrcode_258x258.jpg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;/div&gt;</description>
<pubDate>Fri, 27 Nov 2020 14:40:00 +0000</pubDate>
<dc:creator>ç—å­è¡¡</dc:creator>
<og:description>ç—å­è¡¡ä¹‹å‰å†™è¿‡ä¸¤ç¯‡å…³äºIARä¸­è‡ªå¸¦CRCæ ¡éªŒåŠŸèƒ½çš„æ–‡ç« ï¼Œç®—æ˜¯æŠŠè¿™ä¸ªåŠŸèƒ½ç»†èŠ‚ä»‹ç»å¾—æ¯”è¾ƒæ¸…æ¥šäº†ï¼Œä½†æ˜¯ä¿—è¯è¯´å¾—å¥½ï¼Œç†è®ºæ‡‚å¾—å†å¤šï¼Œä¸èƒ½ç”¨äºå®è·µé‚£ç­‰äºæ²¡å­¦ã€‚ä»Šå¤©ç—å­è¡¡å°±åˆ©ç”¨è¿™ä¸ªåŠŸèƒ½æ¥è§£å†³ä¸€ä¸ªå®é™…éœ€æ±‚</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/henjay724/p/14050783.html</dc:identifier>
</item>
<item>
<title>Jmeter-è®°ä¸€æ¬¡AESåŠ å¯†ç™»å½•å®ä¾‹ - ä¸€åŠ ä¸€</title>
<link>http://www.cnblogs.com/Chilam007/p/14050450.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/Chilam007/p/14050450.html</guid>
<description>&lt;h2&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;ã€€ã€€å…¬å¸æœ‰ä¸ªç½‘ç«™ç³»ç»Ÿï¼Œç”¨æˆ·åæ˜¯æ˜æ–‡ï¼Œå¯†ç æ˜¯åŠ å¯†çš„ï¼Œæ‰€ä»¥æäº†å¥½ä¹…æ‰ç™»å½•è¿›å»ï¼Œå› æ­¤è®°å½•ä¸‹è‰°è¾›è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;h2&gt;Part 1Â  Â äº†è§£åŠ å¯†ç®—æ³•&lt;/h2&gt;
&lt;p&gt;ã€€ã€€æ‰¾ç ”å‘åŒäº‹å»äº†è§£è¿™ä¸ªæ˜¯æ€æ ·ä¸€ä¸ªåŠ å¯†è¿‡ç¨‹ï¼Œæœ€åå¾—åˆ°çš„ç»“è®ºæ˜¯ï¼šåç«¯ä¼šç”Ÿæˆä¸€ä¸ª16ä½çš„éšæœºæ•°ï¼Œç”±å‰ç«¯æ¥åŠ å¯†ï¼Œè€Œå‰ç«¯æ˜¯ç”¨AESçš„CBCæ¨¡å¼åŠ å¯†çš„ã€‚å› ä¸ºå‰ç«¯æ˜¯ç”¨JSå®ç°çš„ï¼Œè€Œjmeteræ˜¯ç”¨javaï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥è´´å‰ç«¯ä»£ç ã€‚&lt;/p&gt;
&lt;h2&gt;Part 2Â  Â å¼€å§‹ç™¾åº¦ä¹‹æ—…&lt;/h2&gt;
&lt;p&gt;ã€€ã€€å„ç§ç™¾åº¦ï¼Œæœ€åå‚ç…§2ç¯‡åšæ–‡ï¼Œç„¶åcopyäº†ä»£ç è¿‡æ¥ä¼˜åŒ–äº†ä¸‹ï¼Œè¾“å‡ºçš„å¯†ç å¯†æ–‡å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/715975/202011/715975-20201127211324936-1707541247.png&quot; alt=&quot;&quot; width=&quot;626&quot; height=&quot;260&quot; loading=&quot;lazy&quot;/&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;å‚ç…§çš„åšå®¢åœ°å€ï¼š&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;1.https://www.cnblogs.com/artoftest/p/7277996.html&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;2.https://blog.csdn.net/qq_39820860/article/details/95963968&lt;/em&gt;&lt;/p&gt;
&lt;h2&gt;Part 3Â  Â å¡ä½äº†ï¼Œä¸è¿‡è§£å†³äº†&lt;/h2&gt;
&lt;p&gt;ã€€ã€€ä»¥ä¸ºè¿™ä¹ˆå®¹æ˜“å°±ç»“æŸäº†å—ï¼Ÿä¸ï¼Œè¿˜æœ‰ç¬¬3partå‘¢ï¼Œåœ¨åŠ å¯†ç®—æ³•æå®šåï¼Œæ¥å£ä¸€ç›´æç¤ºè®¤è¯å¤±è´¥ï¼Œèµ·åˆä»¥ä¸ºæ˜¯ç½‘ä¸Šæ‰¾çš„åŠ å¯†ç®—æ³•è·Ÿå…¬å¸ç”¨çš„ä¸ä¸€æ ·ï¼Œä½†æ˜¯æ‰¾ç ”å‘çœ‹äº†ï¼Œè¯´æ˜¯ä¸€æ ·çš„ï¼Œæœ€åç»ˆäºåœ¨ç ”å‘åŒäº‹çš„æé†’ä¸‹ï¼Œæ‰¾åˆ°åŸå› äº†ï¼ŒåŸæ¥æ˜¯ç™»å½•çš„æ¥å£è¯·æ±‚æ—¶è¦ç”¨åˆ°å‰é¢é‚£ä¸ªæ¥å£ç”Ÿæˆçš„cookieï¼Œå”‰ï¼ŒçœŸå¿ƒä¸å®¹æ˜“ã€‚ä¸Šé¢åªæ˜¯ç®€å•è´´äº†ä¸‹èµ„æ–™ï¼Œä¸‹é¢å…·ä½“è¯´ä¸‹è¿ç”¨å§ã€‚&lt;/p&gt;
&lt;h2&gt;Part 4Â  Â Â å®Œæ•´å®ä¾‹æ¼”ç¤º&lt;/h2&gt;
&lt;h3&gt;&lt;span&gt;1ã€æ·»åŠ httpè¯·æ±‚ã€€ã€€&lt;/span&gt;&lt;span&gt;è·å–ç™»å½•çš„keyæ¥å£ï¼ˆGETï¼‰ï¼šhttp://../login/getSecretKey&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Response Body ï¼š&lt;/strong&gt;{&quot;msg&quot;:&quot;success&quot;,&quot;code&quot;:&quot;0&quot;,&quot;info&quot;:{&quot;key&quot;:&quot;a2c893cfa0684897&quot;}}&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Response headersï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;46&quot;&gt;
&lt;pre&gt;
&lt;span&gt;HTTP/1.1 200 OK
Server: openresty/1.11.2.5
Date: Fri, 27 Nov 2020 13:18:12 GMT
Content-Type: text/plain;charset=UTF-8
Content-Length: 62
Connection: keep-alive
Set-Cookie: PHPSESSID=a4b06bc0-9974-4b22-aa25-efcd4e969d4e; Path=/; HttpOnly; SameSite=lax
X-Application-Context: FspService:test:8001
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, POST, OPTIONS
Access-Control-Allow-Headers: DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;æ­£åˆ™è¡¨è¾¾å¼æå–ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;key--ä»Response Bodyæå–-----------&lt;span&gt;--åœ¨ç™»å½•æ¥å£ä¼šå¼•ç”¨åˆ°&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;PHPSESSID--ä»Response headersæå–---------------&lt;span&gt;åœ¨ä¿¡æ¯å¤´ç®¡ç†å™¨ä¼šå¼•ç”¨åˆ°&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/715975/202011/715975-20201127212548035-705458829.png&quot; alt=&quot;&quot; width=&quot;899&quot; height=&quot;283&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/715975/202011/715975-20201127212602704-1510744355.png&quot; alt=&quot;&quot; width=&quot;903&quot; height=&quot;288&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3&gt;&lt;span&gt;2ã€æ·»åŠ BeanShell å–æ ·å™¨ã€€ã€€å¯¹å‰é¢æ¥å£æå–çš„keyè¿›è¡ŒAESåŠ å¯†ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/h3&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;50&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å¯¼å…¥éœ€è¦çš„åŠ å¯†åŒ…&lt;/span&gt;
&lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.apache.commons.codec.binary.Base64;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; javax.crypto.Cipher;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; javax.crypto.spec.IvParameterSpec;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; javax.crypto.spec.SecretKeySpec;

 
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;åŠ å¯†&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt;&lt;span&gt; String encrypt(String data, String key) {
        String ivString &lt;/span&gt;=&lt;span&gt; key;
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;åç§»é‡&lt;/span&gt;
        &lt;span&gt;byte&lt;/span&gt;[] iv =&lt;span&gt; ivString.getBytes();
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
            Cipher cipher &lt;/span&gt;= Cipher.getInstance(&quot;AES/CBC/NoPadding&quot;&lt;span&gt;);
            &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; blockSize =&lt;span&gt; cipher.getBlockSize();
            &lt;/span&gt;&lt;span&gt;byte&lt;/span&gt;[] dataBytes =&lt;span&gt; data.getBytes();
            &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; length =&lt;span&gt; dataBytes.length;
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è®¡ç®—éœ€å¡«å……é•¿åº¦&lt;/span&gt;
            &lt;span&gt;if&lt;/span&gt; (length % blockSize != 0&lt;span&gt;) {
                length &lt;/span&gt;= length + (blockSize - (length %&lt;span&gt; blockSize));
            }
            &lt;/span&gt;&lt;span&gt;byte&lt;/span&gt;[] plaintext = &lt;span&gt;new&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;&lt;span&gt;[length];
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å¡«å……&lt;/span&gt;
            System.arraycopy(dataBytes, 0, plaintext, 0&lt;span&gt;, dataBytes.length);
            SecretKeySpec keySpec &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; SecretKeySpec(key.getBytes(), &quot;AES&quot;&lt;span&gt;);
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è®¾ç½®åç§»é‡å‚æ•°&lt;/span&gt;
            IvParameterSpec ivSpec = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; IvParameterSpec(iv);
            cipher.init(Cipher.ENCRYPT_MODE, keySpec, ivSpec);
            &lt;/span&gt;&lt;span&gt;byte&lt;/span&gt;[] encryped =&lt;span&gt; cipher.doFinal(plaintext);
 
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; Base64.encodeBase64String(encryped);
 
        } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Exception e) {
            e.printStackTrace();
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
        }
    }
 
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è§£å¯†&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt;&lt;span&gt; String desEncrypt(String data, String key) {
 
        String ivString &lt;/span&gt;=&lt;span&gt; key;
        &lt;/span&gt;&lt;span&gt;byte&lt;/span&gt;[] iv =&lt;span&gt; ivString.getBytes();
 
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
            &lt;/span&gt;&lt;span&gt;byte&lt;/span&gt;[] encryp =&lt;span&gt; Base64.decodeBase64(data);
            Cipher cipher &lt;/span&gt;= Cipher.getInstance(&quot;AES/CBC/NoPadding&quot;&lt;span&gt;);
            SecretKeySpec keySpec &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; SecretKeySpec(key.getBytes(), &quot;AES&quot;&lt;span&gt;);
            IvParameterSpec ivSpec &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; IvParameterSpec(iv);
            cipher.init(Cipher.DECRYPT_MODE, keySpec, ivSpec);
            &lt;/span&gt;&lt;span&gt;byte&lt;/span&gt;[] original =&lt;span&gt; cipher.doFinal(encryp);
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;new&lt;/span&gt;&lt;span&gt; String(original);
        } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Exception e) {
            e.printStackTrace();
        }
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
    }

    String data &lt;/span&gt;= &quot;abcd1234&quot;;&lt;span&gt;//è¿™æ˜¯æ˜æ–‡å¯†ç &lt;/span&gt;
        String key = &quot;${key}&quot;;&lt;span&gt;//keyå¼•ç”¨äº†å˜é‡ï¼Œå³å‰é¢æ¥å£æå–å‡ºæ¥çš„key&lt;/span&gt;
        String encrypt =&lt;span&gt; encrypt(data,key);
        String desencrypt &lt;/span&gt;=&lt;span&gt; desEncrypt(encrypt, key);
        vars.put(&lt;/span&gt;&quot;enString&quot;,encrypt);&lt;span&gt;//æŠŠåŠ å¯†çš„å¯†ç è®¾ç½®ä¸ºå˜é‡enStringï¼Œä¾›åé¢ç™»å½•æ¥å£ä½¿ç”¨&lt;/span&gt;
        System.out.println(&quot;åŠ å¯†å:&quot;+&lt;span&gt;encrypt);
        System.out.println(&lt;/span&gt;&quot;è§£å¯†å:&quot;+&lt;span&gt;desencrypt);
        log.info(&lt;/span&gt;&quot;åŠ å¯†å:&quot;+encrypt);&lt;span&gt;//&lt;/span&gt;&lt;span&gt;æ‰“å°æ—¥å¿—åˆ°æ§åˆ¶å°&lt;/span&gt;
        log.info(&quot;è§£å¯†å:&quot;+desencrypt);
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;span&gt;3ã€æ·»åŠ httpè¯·æ±‚ã€€ã€€ç™»å½•æ¥å£ï¼ˆPOSTï¼‰ï¼šhttp://../login/login&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;æ¶ˆæ¯ä½“æ•°æ®ï¼š{&quot;password&quot;:&quot;${enString}&quot;,&quot;userName&quot;:&quot;ç”¨æˆ·å&quot;,&quot;isMobile&quot;:false}&lt;/p&gt;
&lt;h3&gt;&lt;span&gt;4ã€HTTPä¿¡æ¯å¤´ç®¡ç†å™¨&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span&gt;Cookieå¼•ç”¨ç¬¬1ä¸ªæ¥å£ç”Ÿæˆçš„PHPSESSIDå€¼å˜é‡ï¼Œå‰é¢å°±æ˜¯è¢«è¿™ä¸ªå˜é‡é˜»å¡äº†å¥½ä¹…&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/715975/202011/715975-20201127214610499-2047207286.png&quot; alt=&quot;&quot; width=&quot;783&quot; height=&quot;167&quot; loading=&quot;lazy&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;&lt;span&gt;5ã€ä»¥ä¸Šå°±å®Œç»“å•¦ï¼Œä¸‹é¢å±•ç¤ºä¸‹çº¿ç¨‹ç»„æ¡†æ¶å’Œdebug&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;Â &lt;img src=&quot;https://img2020.cnblogs.com/blog/715975/202011/715975-20201127214301502-404250644.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â &lt;img src=&quot;https://img2020.cnblogs.com/blog/715975/202011/715975-20201127215351951-2142719821.png&quot; alt=&quot;&quot; width=&quot;694&quot; height=&quot;472&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;

</description>
<pubDate>Fri, 27 Nov 2020 13:55:00 +0000</pubDate>
<dc:creator>ä¸€åŠ ä¸€</dc:creator>
<og:description>å‰è¨€ å…¬å¸æœ‰ä¸ªç½‘ç«™ç³»ç»Ÿï¼Œç”¨æˆ·åæ˜¯æ˜æ–‡ï¼Œå¯†ç æ˜¯åŠ å¯†çš„ï¼Œæ‰€ä»¥æäº†å¥½ä¹…æ‰ç™»å½•è¿›å»ï¼Œå› æ­¤è®°å½•ä¸‹è‰°è¾›è¿‡ç¨‹ã€‚ Part 1 äº†è§£åŠ å¯†ç®—æ³• æ‰¾ç ”å‘åŒäº‹å»äº†è§£è¿™ä¸ªæ˜¯æ€æ ·ä¸€ä¸ªåŠ å¯†è¿‡ç¨‹ï¼Œæœ€åå¾—åˆ°çš„ç»“è®ºæ˜¯ï¼šåç«¯ä¼šç”Ÿæˆä¸€ä¸ª1</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/Chilam007/p/14050450.html</dc:identifier>
</item>
</channel>
</rss>