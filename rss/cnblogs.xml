<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>博客园_首页</title>
<link></link>
<description>代码改变世界</description>
<item>
<title>创建型模式：工厂方法 - LieBrother</title>
<link>http://www.cnblogs.com/liebrother/p/10274888.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/liebrother/p/10274888.html</guid>
<description>&lt;p&gt;个人博客原文&lt;br/&gt;&lt;a href=&quot;http://www.liebrother.com/factory-method-pattern&quot;&gt;创建型模式：工厂方法&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://www.liebrother.com/upload/797e45e3039e4c2ba3431bdc2a0c2bb8_0019_01.jpg&quot; alt=&quot;草原&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;简介&quot;&gt;简介&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;姓名&lt;/strong&gt;：工厂方法&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;英文名&lt;/strong&gt;：Factory method Pattern&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;价值观&lt;/strong&gt;：扩展是我的专属&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;个人介绍&lt;/strong&gt;：&lt;/p&gt;
&lt;p&gt;Define an interface for creating an object,but let subclasses decide which class to instantiate.Factory Method lets a class defer instantiation to subclasses. (定义一个用于创建对象的接口，让子类决定实例化哪一个类。工厂方法使一个类的实例化延迟到其子类。)&lt;br/&gt;(来自《设计模式之禅》)&lt;/p&gt;
&lt;h2 id=&quot;你要的故事&quot;&gt;你要的故事&lt;/h2&gt;
&lt;p&gt;还记得上一篇 &lt;a href=&quot;https://mp.weixin.qq.com/s/aJSf8yESPeex78S6W0FWWw&quot;&gt;单例模式&lt;/a&gt; 中的故事么？小明开着汽车去旅游、去学校、去聚会。这一次还是延续小明的故事，一个故事能讲 2 个设计模式，不容易呀。。。（每次想故事都想破脑袋，每一篇文章至少有 3 个故事从脑子里闪过，但最终留下的只有一个适合，为了就是能比较清晰简单的说明设计模式中的关键要点。）&lt;/p&gt;
&lt;h3 id=&quot;简单工厂&quot;&gt;简单工厂&lt;/h3&gt;
&lt;p&gt;小明家里以前不算很富裕，但是还是有一个不错的车库，什么汽车、摩托车、自行车啥的都放在这个车库里。小明每次要出去，都会到车库里面挑合适的车出发。比如，小明最近期末考试了，骑摩托车去学校考试，考完试之后，小明就准备去旅游，这次决定自驾游，开着自己家的小汽车去。这个场景我们用代码描述下。&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;public class SimpleFactoryTest {

    public static void main(String[] args) {
        XiaoMing xiaoMing = new XiaoMing();
        // 小明骑摩托车去学校
        IVehicle motorcycle = GarageFactory.getVehicle(&quot;motorcycle&quot;);
        xiaoMing.goToSchool(motorcycle);

        // 小明开汽车去旅游
        IVehicle car = GarageFactory.getVehicle(&quot;car&quot;);
        xiaoMing.travel(car);
    }

}

/**
 * 车库
 */
class GarageFactory {

    public static IVehicle getVehicle(String type) {
        if (&quot;car&quot;.equals(type)) {
            return new Car();
        } else if (&quot;motorcycle&quot;.equals(type)) {
            return new Motorcycle();
        }
        throw new IllegalArgumentException(&quot;请输入车类型&quot;);
    }

}

/**
 * 交通工具
 */
interface IVehicle {
    void run();
}

/**
 * 汽车
 */
class Car implements IVehicle {

    @Override
    public void run() {
        System.out.println(&quot;开汽车去。。。。&quot;);
    }
}

/**
 * 摩托车
 */
class Motorcycle implements IVehicle {

    @Override
    public void run() {
        System.out.println(&quot;骑摩托车去。。。。&quot;);
    }
}


class XiaoMing {

    public void goToSchool(IVehicle vehicle) {
        System.out.println(&quot;小明去学校&quot;);
        vehicle.run();
    }

    public void travel(IVehicle vehicle) {
        System.out.println(&quot;小明去旅游&quot;);
        vehicle.run();
    }

}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;上面代码看懂了么？ 小明家里有一个车库 GarageFactory，里面放着汽车 Car 和摩托车 Motorcycle，小明要出去的时候，就到车库选择车，通过传递参数给 GarageFactory.getVehicle()，指明要什么车，然后小明就骑着车出发了。&lt;/p&gt;
&lt;p&gt;这个代码真正的术语叫：&lt;strong&gt;简单工厂模式&lt;/strong&gt;（Simple Factory Pattern），也叫做&lt;strong&gt;静态工厂模式&lt;/strong&gt;。它是工厂方法中的一个实现方式，从字面理解就可以知道，它是最简单的工厂方法实现方式。它有一点点小缺陷，就是&lt;strong&gt;扩展性不够好&lt;/strong&gt;，在上面代码中，小明只能骑摩托车或者开汽车，如果小明要骑单车出去呢？势必得在 GarageFactory 中添加 if 是自行车的逻辑。这违反了哪条规则了？是不是那个&lt;strong&gt;允许扩展，拒绝修改的&lt;a href=&quot;https://mp.weixin.qq.com/s/szBP4A1TFQL1RVZvXEknRA&quot;&gt;开闭原则&lt;/a&gt;&lt;/strong&gt;？&lt;/p&gt;
&lt;p&gt;不是说简单工厂这种实现方式不好，而是扩展性不够，在平时的开发中，简单工厂模式也用得不少。在这个小明家里车不多的情况下，用一个车库也是合适的。&lt;/p&gt;
&lt;h3 id=&quot;工厂方法&quot;&gt;工厂方法&lt;/h3&gt;
&lt;p&gt;小明老爸近几年赚了不少，车迷的两父子一直买车，家里的车越来越多，这时候，他们决定多建几个车库，按车类型放置。比如，有一个汽车库，一个摩托车库。这时候小明要开汽车就去汽车库，要骑摩托车就去摩托车库。代码实现如下。&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;public class FactoryMethodTest {

    public static void main(String[] args) {
        XiaoMing xiaoMing = new XiaoMing();
        // 小明骑摩托车去学校
        VehicleGarage motorcycleGarage = new MotorcycleGarage();
        IVehicle motorcycle = motorcycleGarage.getVehicle();
        xiaoMing.goToSchool(motorcycle);

        // 小明开汽车去旅游
        VehicleGarage carGarage = new CarGarage();
        IVehicle car = carGarage.getVehicle();
        xiaoMing.travel(car);
    }

}

interface VehicleGarage {
    IVehicle getVehicle();
}

/**
 * 汽车车库
 */
class CarGarage implements VehicleGarage {

    @Override
    public IVehicle getVehicle() {
        return new Car();
    }
}

/**
 * 摩托车车库
 */
class MotorcycleGarage implements VehicleGarage {

    @Override
    public IVehicle getVehicle() {
        return new Motorcycle();
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;上面代码重用了简单工厂实现方式的交通接口以及摩托车和汽车的实现类。代码中有 2 个车库，一个是汽车车库 CarGarage，一个是摩托车库 MotorcycleGarage。如果小明要骑自行车，只需要建一个自行车车库，完全不用去修改汽车车库或者摩托车车库，就非常符合开闭原则，扩展性大大的提高。&lt;/p&gt;
&lt;h2 id=&quot;总结&quot;&gt;总结&lt;/h2&gt;
&lt;p&gt;工厂方法模式可以说在你能想到的开源框架源码中必定会使用的一个设计模式，因为开源框架很重要一点就是要有扩展性，而工厂方法模式恰恰具有&lt;strong&gt;可扩展性&lt;/strong&gt;。弄懂了工厂方法模式，以后看开源代码就很得心应手啦。&lt;/p&gt;
&lt;p&gt;参考资料：《大话设计模式》、《Java设计模式》、《设计模式之禅》、《研磨设计模式》、《Head First 设计模式》&lt;/p&gt;
&lt;p&gt;代码链接：&lt;a href=&quot;https://github.com/1CSH1/DesignPatterns/tree/master/src/com/liebrother/designpatterns/factorymethod&quot;&gt;Factory method Pattern&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;希望文章对您有所帮助，设计模式系列会持续更新，感兴趣的同学可以关注公众号 &lt;strong&gt;LieBrother&lt;/strong&gt;，第一时间获取文章推送阅读，也可以一起交流，交个朋友。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/mp/homepage?__biz=MzIxMzgwMTAyMg==&amp;amp;hid=2&amp;amp;sn=c97b64288d92312f57d3c8298f8d8888&quot;&gt;公众号之设计模式系列文章&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 15 Jan 2019 15:39:00 +0000</pubDate>
<dc:creator>LieBrother</dc:creator>
<og:description>五大创建型模式之二：工厂方法。</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/liebrother/p/10274888.html</dc:identifier>
</item>
<item>
<title>架构师成长之路6.4 DNS服务器搭建（部署主从DNS） - CARLOS_CHIANG</title>
<link>http://www.cnblogs.com/yaoyaojcy/p/10175207.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/yaoyaojcy/p/10175207.html</guid>
<description>&lt;p&gt;&lt;a href=&quot;https://www.cnblogs.com/yaoyaojcy/p/9946235.html&quot; target=&quot;_blank&quot;&gt;点击返回架构师成长之路&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt; 部署主DNS ：&lt;/strong&gt; &lt;a href=&quot;https://www.cnblogs.com/yaoyaojcy/p/10267391.html&quot; target=&quot;_blank&quot;&gt;点击&lt;/a&gt;&lt;br/&gt;&lt;strong&gt; 部署从DNS ：&lt;/strong&gt; 如下步骤&lt;/p&gt;
&lt;h3&gt;&lt;span&gt;1.与主DNS一样，安装bind&lt;/span&gt;&lt;/h3&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
yum -y install bind-utils bind bind-devel bind-chroot bind-libs
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;span&gt;2.与主DNS一样，编辑/etc/named.conf&lt;/span&gt;&lt;/h3&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
options {
  version &quot;1.1.1&quot;;
  listen-on port 53 {any;};  #表示使用53端口
  directory &quot;/var/named/chroot/etc/&quot;;#用来指定zone（A记录/MX记录等）文件配置路径，注意chroot加强安全性
  pid-file &quot;/var/named/chroot/var/run/named/named.pid&quot;; #当服务起来的时候，pid的位置
  allow-query { any; };#允许解析访问的权限，可以是ip地址或ip段
  Dump-file &quot;/var/named/chroot/var/log/binddump.db&quot;;
  Statistics-file &quot;/var/named/chroot/var/log/named_stats&quot;;#可以看到解析数量/成功率等，用于监控
  zone-statistics yes;# 配置yes，才能写入
  memstatistics-file &quot;log/mem_stats&quot;;
  empty-zones-enable no; #不允许配置zone，却没有记录
  forwarders {202.106.196.115;8.8.8.8; };#外部转发至以下IP地址
};

key &quot;rndc-key&quot; { # 生成rndc控制命令的key文件，rndc与bind之间使用md5认证
        algorithm hmac-md5;
        secret &quot;Eqw4hClGExUWeDkKBX/pBg==&quot;;
};

controls {
       inet 127.0.0.1 port 953  #连接的实际是953，不是53
               allow { 127.0.0.1; } keys { &quot;rndc-key&quot;; };
 };

logging {  #指定日志记录分类和他们的目标位置
  channel warning {
    file &quot;/var/named/chroot/var/log/dns_warning&quot; versions 10 size 10m;#日志轮转10次，每次10M 
    severity warning;
    print-category yes;
    print-severity yes;
    print-time yes;
  };
  channel general_dns {
    file &quot;/var/named/chroot/var/log/dns_log&quot; versions 10 size 100m;#日志轮转10次，每次100M
    severity info;
    print-category yes;
    print-severity yes;
    print-time yes;
  };
  category default {
    warning;
  };
  category queries {
    general_dns;
  };
};

include &quot;/var/named/chroot/etc/view.conf&quot;;  # viem简单实现智能DNS功能
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;span&gt;3.与主DNS一样，编辑/etc/rndc.key&lt;/span&gt;&lt;/h3&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
key &quot;rndc-key&quot; {
        algorithm hmac-md5;
        secret &quot;Eqw4hClGExUWeDkKBX/pBg==&quot;;
};
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;span&gt;4.与主DNS一样，编辑/etc/rndc.conf  &lt;/span&gt;&lt;/h3&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
key &quot;rndc-key&quot; {
        algorithm hmac-md5;
        secret &quot;Eqw4hClGExUWeDkKBX/pBg==&quot;;
};

options {
        default-key &quot;rndc-key&quot;;
        default-server 127.0.0.1;
        default-port 953;
};
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;span&gt;5.编辑/var/named/chroot/etc/view.conf&lt;/span&gt;&lt;/h3&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
view &quot;SlaveView1&quot; {
             allow-transfer {
                #dns-ip-list; 
        };      
             notify  yes;
             also-notify {
                #dns-ip-list; 
        };
       
#  ixfr-from-differences yes;
zone &quot;carlos.com&quot; {
        type    slave;  #master:表示定义的是主域名服务器，slave :表示定义的是辅助域名服务器 
        masters {192.168.56.13；}
        file    &quot;carlos.com.zone&quot;; 
        };
  };
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;strong&gt;&lt;span&gt;6.修改目录权限　&lt;/span&gt;&lt;/strong&gt;　&lt;/h3&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
cd /var &amp;amp;&amp;amp; chown -R named.named named/ #修改目录权限
/etc/init.d/named start  #启动
chkconfig named on   #加开机启动
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;回到主DNS，master设备，执行rndc reload&lt;br/&gt;回到从DNS，在/etc/chroot/etc 下面是否生成slave.carlos.com.zone文件，若有表示已经自动同步过来。　　&lt;/p&gt;
&lt;p&gt;......&lt;/p&gt;
</description>
<pubDate>Tue, 15 Jan 2019 15:29:00 +0000</pubDate>
<dc:creator>CARLOS_CHIANG</dc:creator>
<og:description>点击返回架构师成长之路 架构师成长之路6.3 DNS服务器搭建（部署主从DNS） 部署主DNS ： 点击 部署从DNS ： 如下步骤 1.与主DNS一样，安装bind 2.与主DN</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/yaoyaojcy/p/10175207.html</dc:identifier>
</item>
<item>
<title>领域驱动设计，让程序员心中有码（七） - 溪源More</title>
<link>http://www.cnblogs.com/xiyuanMore/p/10274752.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/xiyuanMore/p/10274752.html</guid>
<description>&lt;h4 align=&quot;center&quot;&gt;领域驱动设计- 让程序员心中有码（七）&lt;/h4&gt;
&lt;p align=&quot;right&quot;&gt;-设计原则和设计模式，互联网开发者们共同的追求&lt;/p&gt;
&lt;h4 align=&quot;center&quot;&gt;      前言&lt;/h4&gt;
&lt;p&gt;　　多年来，笔者一直从事传统软件企业的软件开发和项目管理工作。笔者发现在众多的传统软件企业中，评判优秀开发者的标准往往是技能的熟练程度，基本上都是以梭代码的速度论英雄。有人评价说，这种开发可以称之为cv编程，即ctrl+c和ctrl+v编程为主。这种开发往往对开发者的技能要求并没有想象中的那么高，由于工时和合同的限制，不得不压缩开发时间，通过靠密集的劳动力资源、较高的工作强度来完成项目的开发。这种模式，通过简单的复用历史代码，可以更快的输出结果，对于中小型企业和一些外包企业来说，也意味着更快的项目完成速度、而越快做完项目，也意味着可以越快收回合同款，尽快开始下一个项目。&lt;/p&gt;
&lt;p&gt;　　然而，也必须承认，在这种模式下，代码的质量取决于项目管理者对于技术和代码的把握能力，如果摊上不懂技术的项目管理者以及对于代码质量没有要求的研发人员，可能最终输出的代码，将成为一团乱麻，只能在一个个项目中无穷次的积累，直到遇到一群优秀的开发人员费劲心力把体系重构为止。&lt;/p&gt;
&lt;p&gt;　　而当今互联网时代下，面向互联网的应用开发，不再追求短期成效，更在乎长期技术的沉淀，这个过程中，也对开发者提出了更高的要求。互联网行业的开发者，不仅仅要求代码梭得快，还在乎编写代码编写的质量，谁能编写出更加优美的代码，往往也更容易受人欢迎。于是，作为优美代码代名词的SOLID设计原则和很多种设计模式实际上成为了非常基础的一种能力，甚至于许多资深的开发者，经常会乐此不疲的进行各种代码的重构，也是期待能够更好的将设计模式揉碎了，应用到代码中，更好的实现高内聚、低耦合的目标。&lt;/p&gt;
&lt;h4 align=&quot;center&quot;&gt;      《head first》中的工厂模式&lt;/h4&gt;
&lt;p&gt;　　 在著名小红书《Head First》一书中，描述了多种设计模式，这些由资深IT技术大牛们抽象化出来的最佳代码实践，初读起来也许简单明了，但是细细品味起来，却意味深长。&lt;/p&gt;
&lt;p&gt;　　 在传统软件开发实践工程中，往往会下意识的使用New关键字产生对象实例。通过这种方式进行代码的编写，固然会带来代码上的开发速度，但是同样也会给对象的生成带来一些问题。例如，对象的构造，往往附带了许多复杂的条件：如需要进行一些初始值的设置，如需要初始化与之相关的子类，或者需要预先执行许多初始化方法，那么就可能意味着代码的构造中会产生一系列复杂、与主流程无关的代码。如何让轻松方便的构造代码、而不去关心具体的实现细节呢？&lt;/p&gt;
&lt;p&gt;　　工厂模式成为解决问题的方案，通过工厂模式，适当的创建接口，将代码中的具体过程进行屏蔽，从而提高了代码的灵活性。又分为静态工厂、简单工厂模式、工厂方法模式、抽象工厂模式等多种不同的模式。例如，我们可能会编写一段下面的代码。   &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;abstract&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; FactoryPizzaStore
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt;         &lt;span&gt;public&lt;/span&gt; Pizza OrderPizza(&lt;span&gt;string&lt;/span&gt;&lt;span&gt; type)
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt; 
&lt;span&gt; 6&lt;/span&gt;             Pizza pizza =&lt;span&gt; CreatePizza(type);
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt;&lt;span&gt; pizza;
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;         &lt;span&gt;public&lt;/span&gt; &lt;span&gt;abstract&lt;/span&gt; Pizza CreatePizza(&lt;span&gt;string&lt;/span&gt;&lt;span&gt; type);
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;    　　我们可以看到，这只是一段最普通的工厂代码，定义了一个抽象对象，如果需要实现成员，只需继承此对象，并重载方法，这种方法可以非常便捷的将内部对象的创建过程进行封装，实现了代码内聚性的显著提高。&lt;/p&gt;
&lt;h4 align=&quot;center&quot;&gt;领域驱动中的工厂模式和仓储模式&lt;/h4&gt;
&lt;p&gt;         在领域驱动中，将工厂模式引入其中，让其产生了不同的含义。在上一章，我们了解到，随着软件系统复杂性的显著提高，维护模型实例的生命周期变成了一件非常困难的事情，因此通过引入一个聚合Aggregate对象，可以有效的将复杂的模型复杂的生命周期的各个阶段进行封装，通过一系列固定的规则，实现了对数据更加的控制。而这种控制，则是通过工厂模式和仓储模式来实现的。这两种模式，实现了对Aggregate对象的操作，实现了复杂的生命周期转换复杂性的良好封装。&lt;/p&gt;
&lt;h5 align=&quot;center&quot;&gt;领域工厂模式&lt;/h5&gt;
&lt;p&gt;　　一个复杂的软件系统，往往如同生产一台汽车，它由许多个不同的部件组成，每个部件间通过一系列复杂的协同运动来实现整体的职能。对于用户而言，汽车是如何装配的，并不是他所关心的问题，他只在乎如何驾驶这辆汽车。这意味着，装配过程，应该与对象要执行的工作分开。软件系统同样如此，我们设计了一个复杂的聚合对象，这个对象内部有大量的实体或者值对象。如果开发者需要使用这个对象，必须按照一系列规则来进行操作。&lt;/p&gt;
&lt;p&gt;在这个聚合对象的生命周期中，如果将创建的过程按照调用的场景，分拆到不同的环节中，可能使代码的耦合性急剧提高，带来的将是后期高昂的更改成本。&lt;/p&gt;
&lt;p&gt;　　在领域驱动设计中，复杂对象的创建过程往往是领域层的核心职能，但是，对于这个复杂对象创建过程，又显然不能有简单的Service对象来实现，因此，需要引入工厂模式。封装创建复杂对象或聚合对象&lt;/p&gt;
&lt;p&gt;的全部规则，并通过提供相关接口、创建对象的抽象视图，让创建的过程符合规则。&lt;/p&gt;
&lt;p&gt;　　在领域工厂模式中，往往有以下要求：&lt;/p&gt;
&lt;p&gt;    1、创建过程的原子性、满足创建所需的所有规则。由于我们引入工厂的目的，是为了将复杂的常见过程进行封装，因此我们应当确保创建过程要产生一致状态的对象。例如创建实体，应当满足聚合的全部规则、创建值对象，应该被设置为默认的参数，如果无法创建参数，应该抛出异常，或者提供处理机制，确保不会影响代码的执行。&lt;/p&gt;
&lt;p&gt;    2、工厂模式是一种抽象对象，而不是具体对象。意味着这个过程，不会产生具体对象，也就避免了与下层对象间不必要的耦合。&lt;/p&gt;
&lt;p&gt;    工厂模式不仅仅可以应用于对象生命周期的开始阶段，也可以在对象的重建过程中发挥作用，例如在使用关系型数据库和非关系数据库组成的复杂体系中，通过对象映射技术，可以实现对现有数据的装载。&lt;/p&gt;
&lt;h5 align=&quot;center&quot;&gt;领域仓储对象&lt;/h5&gt;
&lt;p&gt;　　在软件系统研发过程中，我们通常需要使用SQL语句，直接调用基础设施层中的某个方法，实现了一系列数据转换。有时候，我们会引入AutoMap组件，实现从实体层到模型层对象的封装，这种模式广泛存在于我们的开发过程中，但是如果直接访问基础设施层，则可能增加对于数据库不必要的操作，并导致模型的价值可有可无。而且随着开发过程的推进，有可能会倾向于直接使用多次遍历的方式，提取具体对象，而忽略了Aggregate，并使得实体层成为单纯的数据容器。&lt;/p&gt;
&lt;p&gt;　　因此，通过引入仓储模式，可以为我们的实现过程提供便利。通过仓储模式，封装一系列数据库操作的方法，让我们的注意力更关注于模型中。客户端通过查询方法，向仓储中请求对象，然后再返回用户所需的对象。&lt;/p&gt;
&lt;p&gt;　　这段代码大概是这样的:&lt;/p&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;interface&lt;/span&gt; IRepository&amp;lt;T&amp;gt; &lt;span&gt;where&lt;/span&gt;&lt;span&gt; T : EntityBase
{
    T GetById(&lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt; id);
    IEnumerable&lt;/span&gt;&amp;lt;T&amp;gt;&lt;span&gt; List();
    IEnumerable&lt;/span&gt;&amp;lt;T&amp;gt; List(Expression&amp;lt;Func&amp;lt;T, &lt;span&gt;bool&lt;/span&gt;&amp;gt;&amp;gt;&lt;span&gt; predicate);
    &lt;/span&gt;&lt;span&gt;void&lt;/span&gt;&lt;span&gt; Add(T entity);
    &lt;/span&gt;&lt;span&gt;void&lt;/span&gt;&lt;span&gt; Delete(T entity);
    &lt;/span&gt;&lt;span&gt;void&lt;/span&gt;&lt;span&gt; Edit(T entity);
} &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　仓储的引入有很多优点：&lt;/p&gt;
&lt;p&gt;    　　1、为访问者提供简单的模型，可用来获取持久化对象并管理他们的生命周期。&lt;/p&gt;
&lt;p&gt;　　    2、实现数据源解耦。&lt;/p&gt;
&lt;p&gt;　　    3、实现了对象访问策略的分离。&lt;/p&gt;
&lt;p&gt;　　    4、便捷的访问内存对象，减少对数据库的吞吐压力。&lt;/p&gt;
&lt;p&gt;　　在仓储的设计过程中，应当注意一下事项：&lt;/p&gt;
&lt;p&gt;　　    1、对类型进行抽象。仓储的目的是为了传递具有特定类型的实例，但并非每个对象都有一个仓储来与之对应。&lt;/p&gt;
&lt;p&gt;　　    2、充分解耦。仓储聚合不同的查询方法，例如将关系数据库和缓存数据库的查询方法进行封装，使得代码的过程变得易于操纵。&lt;/p&gt;
&lt;p&gt;　　　3、事务可控。提供事务操作的方式，便于用户自行实现事务的管理。&lt;/p&gt;
&lt;h4 align=&quot;center&quot;&gt;      结语&lt;/h4&gt;
&lt;p&gt;    在领域驱动设计中，通过在领域层中灵活的应用仓储模式和工厂模式，实现对象的创建过程和传递过程的不同阶段，可以让代码的执行过程更加的简洁、关系更加的清晰，这也将客观上有利于我们编写出更加优秀的代码。&lt;/p&gt;

</description>
<pubDate>Tue, 15 Jan 2019 14:54:00 +0000</pubDate>
<dc:creator>溪源More</dc:creator>
<og:description>领域驱动设计- 让程序员心中有码（七） -设计原则和设计模式，互联网开发者们共同的追求 前言 多年来，笔者一直从事传统软件企业的软件开发和项目管理工作。笔者发现在众多的传统软件企业中，评判优秀开发者的</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/xiyuanMore/p/10274752.html</dc:identifier>
</item>
<item>
<title>DES详解（Java实现） - 蒙丿鑫</title>
<link>http://www.cnblogs.com/mx-lqk/p/10255149.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/mx-lqk/p/10255149.html</guid>
<description>&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;a href=&quot;https://github.com/lqk1017237457/DES&quot; target=&quot;_blank&quot;&gt;&lt;span&gt;GitHub&lt;/span&gt;&lt;/a&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;&lt;span&gt;　　数据加密标准（Data Encryption Standard），简称DES，是由IBM公司提交，美国政府于1977年1月5日颁布的一种加密算法。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　DES的设计目标是，用于加密保护静态存储和传输信道中的数据，安全使用10~15年。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　DES综合运用了置换、代替、代数等多种密码技术。它设计精巧、实现容易、使用方便，堪称是适应计算机环境的近代分组密码的一个典范。DES的设计充分体现了Shannon所阐述的设计密码的思想，标志着密码的设计与分析达到了新的水平。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　DES是一种分组密码。明文、密文和密钥的分组长度都是64位。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　DES是面向二进制的密码算法。因而能够加解密任何形式的计算机数据。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　DES是对合运算，因而加密和解密共用同一算法，从而使工程实现的工作量减半。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　DES的密码结构属于Feistel结构。&lt;/span&gt;&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;&lt;span&gt;　　Feistel结构是IBM的密码专家Horst Feistel最早提出的。由于它是对称的密码结构，所以对信息加密和解密的过程就极为相似，甚至完全一样。这就使得在实施的过程中，对编码量和线路传输的要求就减少了几乎一半。&lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;&lt;span&gt;加密结构&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;　　L&lt;sub&gt;i &lt;/sub&gt;= R&lt;sub&gt;i-1&lt;/sub&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　R&lt;sub&gt;i&lt;/sub&gt; = L&lt;sub&gt;i-1 &lt;/sub&gt;⊕ f ( R&lt;sub&gt;i-1 &lt;/sub&gt;, k&lt;sub&gt;i &lt;/sub&gt;)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1582448/201901/1582448-20190111223957225-61909347.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;&lt;span&gt;解密结构&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;　　L&lt;sub&gt;i-1 &lt;/sub&gt;= R&lt;sub&gt;i &lt;/sub&gt;⊕ f ( L&lt;sub&gt;i &lt;/sub&gt;, k&lt;sub&gt;i &lt;/sub&gt;)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　R&lt;sub&gt;i-1 &lt;/sub&gt;= L&lt;sub&gt;i&lt;/sub&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1582448/201901/1582448-20190111140912802-2103603576.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;&lt;span&gt;影响因素&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;　　影响Feistel结构的因素有以下5个：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　1.块的大小：大的块会提高加密的安全性，但是会降低加密、解密的速度；&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　2.密钥的大小：大的密钥也会提高加密的安全性，但是也会降低加密、解密的速度；&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　3.轮次数：每多进行一轮循环，安全性就会有所提高；&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　4.子密钥的生成算法：生成算法越复杂，则会使得密文被破译的难度增强，即信息会越安全；&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　5.轮函数的复杂度：轮函数越复杂，则安全性会越高。&lt;/span&gt;&lt;/p&gt;
&lt;hr/&gt;
&lt;h2&gt;&lt;span&gt;子密钥的产生&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;　　64位密钥经过置换选择1、循环左移、置换选择2等变换，产生出16个48位长的子密钥。&lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;&lt;span&gt;（1）置换选择1&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span&gt;　　64位密钥分为8个字节。每个字节的前7位是真正的密钥位，第8位是奇偶校验位。奇偶校验位可以从前7位密钥位计算得出，不是随机的，因而不起密钥的作用。因此，DES真正的密钥只有56位。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　置换选择1的作用有两个：一是从64位密钥中去掉8个奇偶校验位；二是把其余56位密钥位打乱重排，且将前28位作为C&lt;sub&gt;0&lt;/sub&gt;，后28位作为D&lt;sub&gt;0&lt;/sub&gt;。&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　置换选择1的矩阵如下：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1582448/201901/1582448-20190111150231548-1152575052.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;&lt;span&gt;（2）循环左移&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span&gt;　　每一次迭代，将C&lt;sub&gt;i-1&lt;/sub&gt;和D&lt;sub&gt;i-1&lt;/sub&gt;按照一定的位数循环左移分别得到C&lt;sub&gt;i&lt;/sub&gt;和D&lt;sub&gt;i&lt;/sub&gt;。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　循环左移位数表如下：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1582448/201901/1582448-20190111145149102-939260773.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;&lt;span&gt;（3）置换选择2&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span&gt;　　将C&lt;sub&gt;i&lt;/sub&gt;和D&lt;sub&gt;i&lt;/sub&gt;合并成一个56位的中间数据，置换选择2从中选择出一个48位的子密钥K&lt;sub&gt;i&lt;/sub&gt;。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　置换选择2的矩阵如下：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1582448/201901/1582448-20190111150858753-826278621.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;&lt;span&gt;初始置换IP&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;　　初始置换IP（Initial Permutation）的作用在于将64位数据打乱重排，并分成左右两半，供后面的迭代使用。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　初始置换IP的矩阵如下：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1582448/201901/1582448-20190111164056043-447251130.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;&lt;span&gt;轮函数&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;　　轮函数是DES的核心部分。在迭代中将32位的数据组A进行选择运算E、模2相加、代替函数组S、置换运算P等运算，得到32位输出结果。根据Shannon用混淆和扩散设计密码的理论，DES的S盒用来提供混淆，而P置换用来提供扩散。&lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;&lt;span&gt;（1）选择运算E&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span&gt;　　选择运算E对32位的数据组A的各位进行选择和排列，产生一个48位的结果。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　选择运算E是一种扩展运算，通过重复选择某些数据位来达到数据扩展的目的。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　选择运算E的矩阵如下：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1582448/201901/1582448-20190111164658194-159133318.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;&lt;span&gt;（2）模2相加&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span&gt;　　将选择运算E得到的结果与48位子密钥K进行模2相加，即逐位异或，得到一个48位的结果。&lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;&lt;span&gt;（3）代替函数组S&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span&gt;　　代替函数组S由8个代替函数（S盒）组成。代替函数组S的输入是一个48位的数据，从第1位到第48位依次加到8个S盒的输入端，即第i位到第8i位加到S&lt;sub&gt;i &lt;/sub&gt;(i = 1,2,3,4,5,6,7,8)的输入端。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　每个S盒有一个代替矩阵，规定了其输出与输入的代替规则。代替矩阵有4行（0~3）16列（0~15），64个位置都是0~15这16个数字。每个S盒有6位输入，产生4位输出。S盒运算的结果是用输出数据代替了输入数据，所以称其为代替函数。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　S盒的代替规则是：S盒的6位输入b&lt;sub&gt;1&lt;/sub&gt;b&lt;sub&gt;2&lt;/sub&gt;b&lt;sub&gt;3&lt;/sub&gt;b&lt;sub&gt;4&lt;/sub&gt;b&lt;sub&gt;5&lt;/sub&gt;b&lt;sub&gt;6&lt;/sub&gt;中的第1位和第6位数字b&lt;sub&gt;1&lt;/sub&gt;b&lt;sub&gt;6&lt;/sub&gt;组成的二进制数代表选中的行号，其余4位数字b&lt;sub&gt;2&lt;/sub&gt;b&lt;sub&gt;3&lt;/sub&gt;b&lt;sub&gt;4&lt;/sub&gt;b&lt;sub&gt;5&lt;/sub&gt;组成的二进制数代表选中的列号，将处在行号和列号所代表的位置的数字以4位二进制形式输出作为S盒的输出。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　S盒至少应满足以下准则：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　1.输出不是输入的线性和仿射函数；&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　2.任意改变输入中的1位，输出至少有2位发生变化；&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　3.对于任何S盒和任何输入x，S(x)和S(x⊕001100)至少有2位不同；&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　4.对于任何S盒和任何输入x，以及y,z∈GF(2)，S(x) ≠ S(x⊕11yz00)；&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　5.保持输入中的1位不变，其余5位变化，输出中的0和1的个数接近相等。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　代替函数组S中8个S盒的代替矩阵如下：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1582448/201901/1582448-20190111165318860-612210725.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1582448/201901/1582448-20190111165937587-1861559814.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1582448/201901/1582448-20190111170406680-76029760.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1582448/201901/1582448-20190111171211150-945410781.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1582448/201901/1582448-20190111171506591-1119367823.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1582448/201901/1582448-20190111171821853-1660640772.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1582448/201901/1582448-20190111172329387-1612561563.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1582448/201901/1582448-20190111172723534-1529631921.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h3&gt;&lt;span&gt;（4）置换运算P&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;　　置换运算P把S盒输出的32位数据打乱重排，得到32位轮函数输出。&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　置换运算P的矩阵如下：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1582448/201901/1582448-20190111185528181-1487466800.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;逆初始置换IP&lt;sup&gt;-1&lt;/sup&gt;&lt;/h2&gt;
&lt;p&gt;　　逆初始置换IP&lt;sup&gt;-1&lt;/sup&gt;是初始置换IP的逆置换。它把迭代的结果打乱重排，形成64位结果。&lt;/p&gt;
&lt;p&gt;　　逆初始置换IP&lt;sup&gt;-1&lt;/sup&gt;的矩阵如下：&lt;/p&gt;
&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1582448/201901/1582448-20190111190003177-321581738.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;　　1.64位密钥经子密钥产生算法产生出16个48位子密钥：K&lt;sub&gt;1&lt;/sub&gt;,K&lt;sub&gt;2&lt;/sub&gt;,...,K&lt;sub&gt;16&lt;/sub&gt;，分别供第1次，第2次，...，第16次加密迭代使用。&lt;/p&gt;
&lt;p&gt;　　2.64位明文首先经过初始置换IP，将数据打乱重新排列并分成左右两半，左边32位构成L&lt;sub&gt;0&lt;/sub&gt;，右边32位构成R&lt;sub&gt;0&lt;/sub&gt;。&lt;/p&gt;
&lt;p&gt;　　3.第i次加密迭代：由轮函数f实现子密钥K&lt;sub&gt;i&lt;/sub&gt;对R&lt;sub&gt;i-1&lt;/sub&gt;的加密，结果为32位的数据组f ( R&lt;sub&gt;i-1&lt;/sub&gt; , K&lt;sub&gt;i&lt;/sub&gt; )。f ( R&lt;sub&gt;i-1&lt;/sub&gt; , K&lt;sub&gt;i&lt;/sub&gt; )再与L&lt;sub&gt;i-1&lt;/sub&gt;模2相加，又得到一个32位的数据组L&lt;sub&gt;i-1&lt;/sub&gt; ⊕ f ( R&lt;sub&gt;i-1&lt;/sub&gt; , K&lt;sub&gt;i&lt;/sub&gt; )。以L&lt;sub&gt;i&lt;/sub&gt; ⊕ f ( R&lt;sub&gt;i-1&lt;/sub&gt; , K&lt;sub&gt;i&lt;/sub&gt; )作为下一次加密迭代的R&lt;sub&gt;i&lt;/sub&gt;，以R&lt;sub&gt;i-1&lt;/sub&gt;作为下一次加密迭代的L&lt;sub&gt;i&lt;/sub&gt; ( i = 1,2,...,16)。&lt;/p&gt;
&lt;p&gt;　　4.按照上一步的规则进行16次加密迭代。&lt;/p&gt;
&lt;p&gt;　　5.第16次加密迭代结束后，以R&lt;sub&gt;16&lt;/sub&gt;为左，L&lt;sub&gt;16&lt;/sub&gt;为右，合并产生一个64位的数据组。再经过逆初始置换IP&lt;sup&gt;-1&lt;/sup&gt;，将数据重新排列，便得到64位密文。&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;　　1.64位密钥经子密钥产生算法产生出16个48位子密钥：K&lt;sub&gt;1&lt;/sub&gt;,K&lt;sub&gt;2&lt;/sub&gt;,...,K&lt;sub&gt;16&lt;/sub&gt;，分别供第1次，第2次，...，第16次解密迭代使用。&lt;/p&gt;
&lt;p&gt;　　2.64位密文首先经过初始置换IP，将数据打乱重新排列并分成左右两半，左边32位构成R&lt;sub&gt;16&lt;/sub&gt;，右边32位构成L&lt;sub&gt;16&lt;/sub&gt;。&lt;/p&gt;
&lt;p&gt;　　3.第17-i次解密迭代：由轮函数f实现子密钥K&lt;sub&gt;i&lt;/sub&gt;对L&lt;sub&gt;i&lt;/sub&gt;的解密，结果为32位的数据组f ( L&lt;sub&gt;i&lt;/sub&gt; , K&lt;sub&gt;i&lt;/sub&gt; )。f ( L&lt;sub&gt;i&lt;/sub&gt; , K&lt;sub&gt;i&lt;/sub&gt; )再与R&lt;sub&gt;i&lt;/sub&gt;模2相加，又得到一个32位的数据组R&lt;sub&gt;i&lt;/sub&gt; ⊕ f ( L&lt;sub&gt;i&lt;/sub&gt; , K&lt;sub&gt;i&lt;/sub&gt; )。以R&lt;sub&gt;i&lt;/sub&gt; ⊕ f ( L&lt;sub&gt;i&lt;/sub&gt; , K&lt;sub&gt;i&lt;/sub&gt; )作为下一次解密迭代的L&lt;sub&gt;i-1&lt;/sub&gt;，以L&lt;sub&gt;i&lt;/sub&gt;作为下一次解密迭代的L&lt;sub&gt;i-1&lt;/sub&gt; ( i = 16,15,...,1)。&lt;/p&gt;
&lt;p&gt;　　4.按照上一步的规则进行16次解密迭代。&lt;/p&gt;
&lt;p&gt;　　5.第16次解密迭代结束后，以L&lt;sub&gt;0&lt;/sub&gt;为左，R&lt;sub&gt;0&lt;/sub&gt;为右，合并产生一个64位的数据组。再经过逆初始置换IP&lt;sup&gt;-1&lt;/sup&gt;，将数据重新排列，便得到64位明文。&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;　　DES算法中除了S盒是非线性变换外，其余变换均为线性变换，所以DES安全的关键是S盒。因为算法中使用了16次迭代，从而使得改变输入明文或密钥中的1位，密文都会发生大约32位的变化，具有良好的雪崩效应，大大提高了保密性。S盒用来提供混淆，使明文、密钥、密文之间的关系错综复杂，而P置换用来提供扩散，把S盒提供的混淆作用充分扩散开来。这样，S盒和P置换互相配合，形成了很强的抗差分攻击和抗线性攻击能力，其中抗差分攻击能力更强些。&lt;/p&gt;
&lt;hr/&gt;
&lt;h2&gt;密钥较短&lt;/h2&gt;
&lt;p&gt;　　面对计算能力高速发展的形式，DES采用56位密钥，显然短了一些。如果密钥的长度再长一些，将会更安全。&lt;/p&gt;
&lt;h2&gt;存在弱密钥和半弱密钥&lt;/h2&gt;
&lt;p&gt;　　弱密钥和半弱密钥的存在无疑是DES的一个不足。但由于弱密钥和半弱密钥的数量与密钥的总数2&lt;sup&gt;56&lt;/sup&gt;相比仍是微不足道的，所以这并不对DES构成太大威胁，只要注意在实际应用中不使用这些弱密钥和半弱密钥即可。&lt;/p&gt;
&lt;h2&gt;存在互补对称性&lt;/h2&gt;
&lt;p&gt;　　互补对称性使DES在选择明文攻击下所需的工作量减半。产生互补对称性的原因在于DES中两次异或运算的配置，一次在轮函数中S盒之前，另一次在轮函数输出之后。攻击者任取一个明文M，并可得到密文C = DES ( M , K )，攻击者只要简单地对C取非，便得到另一明文M'（M取非）在密钥K'（K取非）加密下的密文C' = DES ( M' , K' )。因此攻击者只要做一次实验便可知道K和K'是否是所求的密钥。&lt;/p&gt;
&lt;hr/&gt;
&lt;h2&gt;子密钥产生&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;151&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;置换选择1矩阵&lt;/span&gt;
&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;[] replace1C =&lt;span&gt; {
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt;         57, 49, 41, 33, 25, 17,  9&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt;          1, 58, 50, 42, 34, 26, 18&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt;         10,  2, 59, 51, 43, 35, 27&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt;         19, 11,  3, 60, 52, 44, 36
&lt;span&gt; 7&lt;/span&gt; &lt;span&gt;};
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;[] replace1D =&lt;span&gt; {
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;         63, 55, 47, 39, 31, 23, 15&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;          7, 62, 54, 46, 38, 30, 22&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;         14,  6, 61, 53, 45, 37, 29&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;         21, 13,  5, 28, 20, 12,  4
&lt;span&gt;13&lt;/span&gt; &lt;span&gt;};
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt; 
&lt;span&gt;15&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;循环左移位数表&lt;/span&gt;
&lt;span&gt;16&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;[] moveNum = {1, 1, 2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 1&lt;span&gt;};
&lt;/span&gt;&lt;span&gt;17&lt;/span&gt; 
&lt;span&gt;18&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;置换选择2矩阵&lt;/span&gt;
&lt;span&gt;19&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;[] replace2 =&lt;span&gt; {
&lt;/span&gt;&lt;span&gt;20&lt;/span&gt;     14, 17, 11, 24,  1,  5&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt;21&lt;/span&gt;      3, 28, 15,  6, 21, 10&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt;22&lt;/span&gt;     23, 19, 12,  4, 26,  8&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt;23&lt;/span&gt;     16,  7, 27, 20, 13,  2&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt;24&lt;/span&gt;     41, 52, 31, 37, 47, 55&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt;25&lt;/span&gt;     30, 40, 51, 45, 33, 48&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt;26&lt;/span&gt;     44, 49, 39, 56, 34, 53&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt;27&lt;/span&gt;     46, 42, 50, 36, 29, 32
&lt;span&gt;28&lt;/span&gt; };
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;/**&lt;/span&gt;
&lt;span&gt; 2&lt;/span&gt; &lt;span&gt; * 子密钥的产生
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; &lt;span&gt; * &lt;/span&gt;&lt;span&gt;@param&lt;/span&gt;&lt;span&gt; sKey  64位密钥
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; &lt;span&gt; * &lt;/span&gt;&lt;span&gt;@return&lt;/span&gt;&lt;span&gt;      16个48位子密钥
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt;  &lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 6&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[][] generateKeys(&lt;span&gt;byte&lt;/span&gt;&lt;span&gt;[] sKey) {
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt;     &lt;span&gt;byte&lt;/span&gt;[] C = &lt;span&gt;new&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[28&lt;span&gt;];
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;     &lt;span&gt;byte&lt;/span&gt;[] D = &lt;span&gt;new&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[28&lt;span&gt;];
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;     &lt;span&gt;byte&lt;/span&gt;[][] keys = &lt;span&gt;new&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[16][48&lt;span&gt;];
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;置换选择1&lt;/span&gt;
&lt;span&gt;11&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; i = 0; i &amp;lt; 28; i++&lt;span&gt;) {
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;         C[i] = sKey[replace1C[i] - 1&lt;span&gt;];
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt;         D[i] = sKey[replace1D[i] - 1&lt;span&gt;];
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; i = 0; i &amp;lt; 16; i++&lt;span&gt;) {
&lt;/span&gt;&lt;span&gt;16&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt;循环左移&lt;/span&gt;
&lt;span&gt;17&lt;/span&gt;         C =&lt;span&gt; RSHR(C, moveNum[i]);
&lt;/span&gt;&lt;span&gt;18&lt;/span&gt;         D =&lt;span&gt; RSHR(D, moveNum[i]);
&lt;/span&gt;&lt;span&gt;19&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt;置换选择2&lt;/span&gt;
&lt;span&gt;20&lt;/span&gt;         &lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; j = 0; j &amp;lt; 48; j++&lt;span&gt;) {
&lt;/span&gt;&lt;span&gt;21&lt;/span&gt;             &lt;span&gt;if&lt;/span&gt; (replace2[j] &amp;lt;= 28) keys[i][j] = C[replace2[j] - 1&lt;span&gt;];
&lt;/span&gt;&lt;span&gt;22&lt;/span&gt;             &lt;span&gt;else&lt;/span&gt; keys[i][j] = D[replace2[j] - 28&lt;span&gt;];
&lt;/span&gt;&lt;span&gt;23&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;24&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;25&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; keys;
&lt;/span&gt;&lt;span&gt;26&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;/**&lt;/span&gt;
&lt;span&gt; 2&lt;/span&gt; &lt;span&gt; * 循环左移
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; &lt;span&gt; * &lt;/span&gt;&lt;span&gt;@param&lt;/span&gt;&lt;span&gt; b  数组
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; &lt;span&gt; * &lt;/span&gt;&lt;span&gt;@param&lt;/span&gt;&lt;span&gt; n  位数
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt; &lt;span&gt; * &lt;/span&gt;&lt;span&gt;@return&lt;/span&gt;
&lt;span&gt; 6&lt;/span&gt;  &lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 7&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[] RSHR(&lt;span&gt;byte&lt;/span&gt;[] b, &lt;span&gt;int&lt;/span&gt;&lt;span&gt; n) {
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;     String s = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; String(b);
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;     s = (s + s.substring(0&lt;span&gt;, n)).substring(n);
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; s.getBytes();
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;初始置换IP&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;98&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;初始置换矩阵&lt;/span&gt;
&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;[] IP =&lt;span&gt; {
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt;         58, 50, 42, 34, 26, 18, 10,  2&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt;         60, 52, 44, 36, 28, 20, 12,  4&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt;         62, 54, 46, 38, 30, 22, 14,  6&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt;         64, 56, 48, 40, 32, 24, 16,  8&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt;         57, 49, 41, 33, 25, 17,  9,  1&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;         59, 51, 43, 35, 27, 19, 11,  3&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;         61, 53, 45, 37, 29, 21, 13,  5&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;         63, 55, 47, 39, 31, 23, 15,  7
&lt;span&gt;11&lt;/span&gt; };
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;/**&lt;/span&gt;
&lt;span&gt; 2&lt;/span&gt; &lt;span&gt; * 初始置换IP
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; &lt;span&gt; * &lt;/span&gt;&lt;span&gt;@param&lt;/span&gt;&lt;span&gt; text  64位数据
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; &lt;span&gt; * &lt;/span&gt;&lt;span&gt;@return&lt;/span&gt;
&lt;span&gt; 5&lt;/span&gt;  &lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 6&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[] IP(&lt;span&gt;byte&lt;/span&gt;&lt;span&gt;[] text) {
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt;     &lt;span&gt;byte&lt;/span&gt;[] newtext = &lt;span&gt;new&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[64&lt;span&gt;];
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; i = 0; i &amp;lt; 64; i++&lt;span&gt;) 
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;         newtext[i] = text[IP[i] - 1&lt;span&gt;];
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; newtext;
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;轮函数&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;624&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;选择运算矩阵&lt;/span&gt;
&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;[] E =&lt;span&gt; {
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt;         32,  1,  2,  3,  4,  5&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt;          4,  5,  6,  7,  8,  9&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt;          8,  9, 10, 11, 12, 13&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt;         12, 13, 14, 15, 16, 17&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt;         16, 17, 18, 19, 20, 21&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;         20, 21, 22, 23, 24, 25&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;         24, 25, 26, 27, 28, 29&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;         28, 29, 30, 31, 32,  1
&lt;span&gt;11&lt;/span&gt; &lt;span&gt;};
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt; 
&lt;span&gt;13&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;代替函数组&lt;/span&gt;
&lt;span&gt;14&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;[][][] S =&lt;span&gt; {
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt;S1&lt;/span&gt;
&lt;span&gt;16&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;17&lt;/span&gt;             {14,  4, 13,  1,  2, 15, 11,  8,  3, 10,  6, 12,  5,  9,  0,  7&lt;span&gt;}, 
&lt;/span&gt;&lt;span&gt;18&lt;/span&gt;             { 0, 15,  7,  4, 14,  2, 13,  1, 10,  6, 12, 11,  9,  5,  3,  8&lt;span&gt;}, 
&lt;/span&gt;&lt;span&gt;19&lt;/span&gt;             { 4,  1, 14,  8, 13,  6,  2, 11, 15, 12,  9,  7,  3, 10,  5,  0&lt;span&gt;}, 
&lt;/span&gt;&lt;span&gt;20&lt;/span&gt;             {15, 12,  8,  2,  4,  9,  1,  7,  5, 11,  3, 14, 10,  0,  6, 13&lt;span&gt;}
&lt;/span&gt;&lt;span&gt;21&lt;/span&gt; &lt;span&gt;        }, 
&lt;/span&gt;&lt;span&gt;22&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt;S2&lt;/span&gt;
&lt;span&gt;23&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;24&lt;/span&gt;             {15,  1,  8, 14,  6, 11,  3,  4,  9,  7,  2, 13, 12,  0,  5, 10&lt;span&gt;}, 
&lt;/span&gt;&lt;span&gt;25&lt;/span&gt;             { 3, 13,  4,  7, 15,  2,  8, 14, 12,  0,  1, 10,  6,  9, 11,  5&lt;span&gt;}, 
&lt;/span&gt;&lt;span&gt;26&lt;/span&gt;             { 0, 14,  7, 11, 10,  4, 13,  1,  5,  8, 12,  6,  9,  3,  2, 15&lt;span&gt;}, 
&lt;/span&gt;&lt;span&gt;27&lt;/span&gt;             {13,  8, 10,  1,  3, 15,  4,  2, 11,  6,  7, 12,  0,  5, 14,  9&lt;span&gt;}
&lt;/span&gt;&lt;span&gt;28&lt;/span&gt; &lt;span&gt;        }, 
&lt;/span&gt;&lt;span&gt;29&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt;S3&lt;/span&gt;
&lt;span&gt;30&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;31&lt;/span&gt;             {10,  0,  9, 14,  6,  3, 15,  5,  1, 13, 12,  7, 11,  4,  2,  8&lt;span&gt;}, 
&lt;/span&gt;&lt;span&gt;32&lt;/span&gt;             {13,  7,  0,  9,  3,  4,  6, 10,  2,  8,  5, 14, 12, 11, 15,  1&lt;span&gt;}, 
&lt;/span&gt;&lt;span&gt;33&lt;/span&gt;             {13,  6,  4,  9,  8, 15,  3,  0, 11,  1,  2, 12,  5, 10, 14,  7&lt;span&gt;}, 
&lt;/span&gt;&lt;span&gt;34&lt;/span&gt;             { 1, 10, 13,  0,  6,  9,  8,  7,  4, 15, 14,  3, 11,  5,  2, 12&lt;span&gt;}
&lt;/span&gt;&lt;span&gt;35&lt;/span&gt; &lt;span&gt;        }, 
&lt;/span&gt;&lt;span&gt;36&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt;S4&lt;/span&gt;
&lt;span&gt;37&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;38&lt;/span&gt;             { 7, 13, 14,  3,  0,  6,  9, 10,  1,  2,  8,  5, 11, 12,  4, 15&lt;span&gt;}, 
&lt;/span&gt;&lt;span&gt;39&lt;/span&gt;             {13,  8, 11,  5,  6, 15,  0,  3,  4,  7,  2, 12,  1, 10, 14,  9&lt;span&gt;}, 
&lt;/span&gt;&lt;span&gt;40&lt;/span&gt;             {10,  6,  9,  0, 12, 11,  7, 13, 15,  1,  3, 14,  5,  2,  8,  4&lt;span&gt;}, 
&lt;/span&gt;&lt;span&gt;41&lt;/span&gt;             { 3, 15,  0,  6, 10,  1, 13,  8,  9,  4,  5, 11, 12,  7,  2, 14&lt;span&gt;}
&lt;/span&gt;&lt;span&gt;42&lt;/span&gt; &lt;span&gt;        }, 
&lt;/span&gt;&lt;span&gt;43&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt;S5&lt;/span&gt;
&lt;span&gt;44&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;45&lt;/span&gt;             { 2, 12,  4,  1,  7, 10, 11,  6,  8,  5,  3, 15, 13,  0, 14,  9&lt;span&gt;}, 
&lt;/span&gt;&lt;span&gt;46&lt;/span&gt;             {14, 11,  2, 12,  4,  7, 13,  1,  5,  0, 15, 10,  3,  9,  8,  6&lt;span&gt;}, 
&lt;/span&gt;&lt;span&gt;47&lt;/span&gt;             { 4,  2,  1, 11, 10, 13,  7,  8, 15,  9, 12,  5,  6,  3,  0, 14&lt;span&gt;}, 
&lt;/span&gt;&lt;span&gt;48&lt;/span&gt;             {11,  8, 12,  7,  1, 14,  2, 13,  6, 15,  0,  9, 10,  4,  5,  3&lt;span&gt;}
&lt;/span&gt;&lt;span&gt;49&lt;/span&gt; &lt;span&gt;        }, 
&lt;/span&gt;&lt;span&gt;50&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt;S6&lt;/span&gt;
&lt;span&gt;51&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;52&lt;/span&gt;             {12,  1, 10, 15,  9,  2,  6,  8,  0, 13,  3,  4, 14,  7,  5, 11&lt;span&gt;}, 
&lt;/span&gt;&lt;span&gt;53&lt;/span&gt;             {10, 15,  4,  2,  7, 12,  9,  5,  6,  1, 13, 14,  0, 11,  3,  8&lt;span&gt;}, 
&lt;/span&gt;&lt;span&gt;54&lt;/span&gt;             { 9, 14, 15,  5,  2,  8, 12,  3,  7,  0,  4, 10,  1, 13, 11,  6&lt;span&gt;}, 
&lt;/span&gt;&lt;span&gt;55&lt;/span&gt;             { 4,  3,  2, 12,  9,  5, 15, 10, 11, 14,  1,  7,  6,  0,  8, 13&lt;span&gt;}
&lt;/span&gt;&lt;span&gt;56&lt;/span&gt; &lt;span&gt;        }, 
&lt;/span&gt;&lt;span&gt;57&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt;S7&lt;/span&gt;
&lt;span&gt;58&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;59&lt;/span&gt;             { 4, 11,  2, 14, 15,  0,  8, 13,  3, 12,  9,  7,  5, 10,  6,  1&lt;span&gt;}, 
&lt;/span&gt;&lt;span&gt;60&lt;/span&gt;             {13,  0, 11,  7,  4,  9,  1, 10, 14,  3,  5, 12,  2, 15,  8,  6&lt;span&gt;}, 
&lt;/span&gt;&lt;span&gt;61&lt;/span&gt;             { 1,  4, 11, 13, 12,  3,  7, 14, 10, 15,  6,  8,  0,  5,  9,  2&lt;span&gt;}, 
&lt;/span&gt;&lt;span&gt;62&lt;/span&gt;             { 6, 11, 13,  8,  1,  4, 10,  7,  9,  5,  0, 15, 14,  2,  3, 12&lt;span&gt;}
&lt;/span&gt;&lt;span&gt;63&lt;/span&gt; &lt;span&gt;        }, 
&lt;/span&gt;&lt;span&gt;64&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt;S8&lt;/span&gt;
&lt;span&gt;65&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;66&lt;/span&gt;             {13,  2,  8,  4,  6, 15, 11,  1, 10,  9,  3, 14,  5,  0, 12,  7&lt;span&gt;}, 
&lt;/span&gt;&lt;span&gt;67&lt;/span&gt;             { 1, 15, 13,  8, 10,  3,  7,  4, 12,  5,  6, 11,  0, 14,  9,  2&lt;span&gt;}, 
&lt;/span&gt;&lt;span&gt;68&lt;/span&gt;             { 7, 11,  4,  1,  9, 12, 14,  2,  0,  6, 10, 13, 15,  3,  5,  8&lt;span&gt;}, 
&lt;/span&gt;&lt;span&gt;69&lt;/span&gt;             { 2,  1, 14,  7,  4, 10,  8, 13, 15, 12,  9,  0,  3,  5,  6, 11&lt;span&gt;}
&lt;/span&gt;&lt;span&gt;70&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;71&lt;/span&gt; &lt;span&gt;};
&lt;/span&gt;&lt;span&gt;72&lt;/span&gt; 
&lt;span&gt;73&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;置换运算矩阵&lt;/span&gt;
&lt;span&gt;74&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;[] P =&lt;span&gt; {
&lt;/span&gt;&lt;span&gt;75&lt;/span&gt;         16,  7, 20, 21&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt;76&lt;/span&gt;         29, 12, 28, 17&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt;77&lt;/span&gt;          1, 15, 23, 26&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt;78&lt;/span&gt;          5, 18, 31, 10&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt;79&lt;/span&gt;          2,  8, 24, 14&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt;80&lt;/span&gt;         32, 27,  3,  9&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt;81&lt;/span&gt;         19, 13, 30,  6&lt;span&gt;, 
&lt;/span&gt;&lt;span&gt;82&lt;/span&gt;         22, 11,  4, 25
&lt;span&gt;83&lt;/span&gt; };
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;/**&lt;/span&gt;
&lt;span&gt; 2&lt;/span&gt; &lt;span&gt; * 轮函数
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; &lt;span&gt; * &lt;/span&gt;&lt;span&gt;@param&lt;/span&gt;&lt;span&gt; A  32位输入
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; &lt;span&gt; * &lt;/span&gt;&lt;span&gt;@param&lt;/span&gt;&lt;span&gt; K  48位子密钥
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt; &lt;span&gt; * &lt;/span&gt;&lt;span&gt;@return&lt;/span&gt;&lt;span&gt;   32位输出
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt;  &lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 7&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[] f(&lt;span&gt;byte&lt;/span&gt;[] A, &lt;span&gt;byte&lt;/span&gt;&lt;span&gt;[] K) {
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;     &lt;span&gt;byte&lt;/span&gt;[] t = &lt;span&gt;new&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[48&lt;span&gt;];
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;     &lt;span&gt;byte&lt;/span&gt;[] r = &lt;span&gt;new&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[32&lt;span&gt;];
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;     &lt;span&gt;byte&lt;/span&gt;[] result = &lt;span&gt;new&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[32&lt;span&gt;];
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;选择运算E&lt;/span&gt;
&lt;span&gt;12&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; i = 0; i &amp;lt; 48; i++&lt;span&gt;) 
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt;         t[i] = A[E[i] - 1&lt;span&gt;];
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;模2相加&lt;/span&gt;
&lt;span&gt;15&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; i = 0; i &amp;lt; 48; i++&lt;span&gt;) 
&lt;/span&gt;&lt;span&gt;16&lt;/span&gt;         t[i] = (&lt;span&gt;byte&lt;/span&gt;) (t[i] ^&lt;span&gt; K[i]);
&lt;/span&gt;&lt;span&gt;17&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;代替函数组S&lt;/span&gt;
&lt;span&gt;18&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; i = 0, a = 0; i &amp;lt; 48; i += 6, a += 4&lt;span&gt;) {
&lt;/span&gt;&lt;span&gt;19&lt;/span&gt;         &lt;span&gt;int&lt;/span&gt; j = t[i] * 2 + t[i + 5];   &lt;span&gt;//&lt;/span&gt;&lt;span&gt;b1b6&lt;/span&gt;
&lt;span&gt;20&lt;/span&gt;         &lt;span&gt;int&lt;/span&gt; k = t[i + 1] * 8 + t[i + 2] * 4 + t[i + 3] * 2 + t[i + 4];   &lt;span&gt;//&lt;/span&gt;&lt;span&gt;b2b3b4b5&lt;/span&gt;
&lt;span&gt;21&lt;/span&gt;         &lt;span&gt;byte&lt;/span&gt;[] b = Integer.toBinaryString(S[i / 6][j][k] + 16).substring(1&lt;span&gt;).getBytes();
&lt;/span&gt;&lt;span&gt;22&lt;/span&gt;         &lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; n = 0; n &amp;lt; 4; n++&lt;span&gt;) 
&lt;/span&gt;&lt;span&gt;23&lt;/span&gt;             r[a + n] = (&lt;span&gt;byte&lt;/span&gt;) (b[n] - '0'&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;24&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;25&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;置换运算P&lt;/span&gt;
&lt;span&gt;26&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; i = 0; i &amp;lt; 32; i++&lt;span&gt;) 
&lt;/span&gt;&lt;span&gt;27&lt;/span&gt;         result[i] = r[P[i] - 1&lt;span&gt;];
&lt;/span&gt;&lt;span&gt;28&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; result;
&lt;/span&gt;&lt;span&gt;29&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;逆初始置换IP&lt;sup&gt;-1&lt;/sup&gt;&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;97&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt;逆初始置换矩阵&lt;/span&gt;
&lt;span&gt;static&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;[] rIP =&lt;span&gt; {
        &lt;/span&gt;40,  8, 48, 16, 56, 24, 64, 32&lt;span&gt;, 
        &lt;/span&gt;39,  7, 47, 15, 55, 23, 63, 31&lt;span&gt;, 
        &lt;/span&gt;38,  6, 46, 14, 54, 22, 62, 30&lt;span&gt;, 
        &lt;/span&gt;37,  5, 45, 13, 53, 21, 61, 29&lt;span&gt;, 
        &lt;/span&gt;36,  4, 44, 12, 52, 20, 60, 28&lt;span&gt;, 
        &lt;/span&gt;35,  3, 43, 11, 51, 19, 59, 27&lt;span&gt;, 
        &lt;/span&gt;34,  2, 42, 10, 50, 18, 58, 26&lt;span&gt;, 
        &lt;/span&gt;33,  1, 41,  9, 49, 17, 57, 25&lt;span&gt;
};&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;/**&lt;/span&gt;
&lt;span&gt; 2&lt;/span&gt; &lt;span&gt; * 逆初始置换IP^-1
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; &lt;span&gt; * &lt;/span&gt;&lt;span&gt;@param&lt;/span&gt;&lt;span&gt; text  64位数据
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; &lt;span&gt; * &lt;/span&gt;&lt;span&gt;@return&lt;/span&gt;
&lt;span&gt; 5&lt;/span&gt;  &lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 6&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[] rIP(&lt;span&gt;byte&lt;/span&gt;&lt;span&gt;[] text) {
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt;     &lt;span&gt;byte&lt;/span&gt;[] newtext = &lt;span&gt;new&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[64&lt;span&gt;];
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; i = 0; i &amp;lt; 64; i++&lt;span&gt;) 
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;         newtext[i] = text[rIP[i] - 1&lt;span&gt;];
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; newtext;
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt; 加解密过程&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;/**&lt;/span&gt;
&lt;span&gt; 2&lt;/span&gt; &lt;span&gt; * 加密
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; &lt;span&gt; * &lt;/span&gt;&lt;span&gt;@param&lt;/span&gt;&lt;span&gt; plaintext  64位明文
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; &lt;span&gt; * &lt;/span&gt;&lt;span&gt;@param&lt;/span&gt;&lt;span&gt; sKey       64位密钥
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt; &lt;span&gt; * &lt;/span&gt;&lt;span&gt;@return&lt;/span&gt;&lt;span&gt;           64位密文
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt;  &lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 7&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[] encrypt(&lt;span&gt;byte&lt;/span&gt;[] plaintext, &lt;span&gt;byte&lt;/span&gt;&lt;span&gt;[] sKey) {
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;     &lt;span&gt;byte&lt;/span&gt;[][] L = &lt;span&gt;new&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[17][32&lt;span&gt;];
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;     &lt;span&gt;byte&lt;/span&gt;[][] R = &lt;span&gt;new&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[17][32&lt;span&gt;];
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;     &lt;span&gt;byte&lt;/span&gt;[] ciphertext = &lt;span&gt;new&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[64&lt;span&gt;];
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;子密钥的产生&lt;/span&gt;
&lt;span&gt;12&lt;/span&gt;     &lt;span&gt;byte&lt;/span&gt;[][] K =&lt;span&gt; DESUtil.generateKeys(sKey);
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;初始置换IP&lt;/span&gt;
&lt;span&gt;14&lt;/span&gt;     plaintext =&lt;span&gt; DESUtil.IP(plaintext);
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;将明文分成左半部分L0和右半部分R0&lt;/span&gt;
&lt;span&gt;16&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; i = 0; i &amp;lt; 32; i++&lt;span&gt;) {
&lt;/span&gt;&lt;span&gt;17&lt;/span&gt;         L[0][i] =&lt;span&gt; plaintext[i];
&lt;/span&gt;&lt;span&gt;18&lt;/span&gt;         R[0][i] = plaintext[i + 32&lt;span&gt;];
&lt;/span&gt;&lt;span&gt;19&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;20&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;加密迭代&lt;/span&gt;
&lt;span&gt;21&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; i = 1; i &amp;lt;= 16; i++&lt;span&gt;) {
&lt;/span&gt;&lt;span&gt;22&lt;/span&gt;         L[i] = R[i - 1&lt;span&gt;];
&lt;/span&gt;&lt;span&gt;23&lt;/span&gt;         R[i] = xor(L[i - 1], DESUtil.f(R[i - 1], K[i - 1&lt;span&gt;]));
&lt;/span&gt;&lt;span&gt;24&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;25&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;以R16为左半部分，L16为右半部分合并&lt;/span&gt;
&lt;span&gt;26&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; i = 0; i &amp;lt; 32; i++&lt;span&gt;) {
&lt;/span&gt;&lt;span&gt;27&lt;/span&gt;         ciphertext[i] = R[16&lt;span&gt;][i];
&lt;/span&gt;&lt;span&gt;28&lt;/span&gt;         ciphertext[i + 32] = L[16&lt;span&gt;][i];
&lt;/span&gt;&lt;span&gt;29&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;30&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;逆初始置换IP^-1&lt;/span&gt;
&lt;span&gt;31&lt;/span&gt;     ciphertext =&lt;span&gt; DESUtil.rIP(ciphertext);
&lt;/span&gt;&lt;span&gt;32&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; ciphertext;
&lt;/span&gt;&lt;span&gt;33&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;40&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;/**&lt;/span&gt;
&lt;span&gt; 2&lt;/span&gt; &lt;span&gt; * 解密
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; &lt;span&gt; * &lt;/span&gt;&lt;span&gt;@param&lt;/span&gt;&lt;span&gt; ciphertext  64位密文
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; &lt;span&gt; * &lt;/span&gt;&lt;span&gt;@param&lt;/span&gt;&lt;span&gt; sKey        64位密钥
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt; &lt;span&gt; * &lt;/span&gt;&lt;span&gt;@return&lt;/span&gt;&lt;span&gt;            64位明文
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt;  &lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 7&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[] decrypt(&lt;span&gt;byte&lt;/span&gt;[] ciphertext, &lt;span&gt;byte&lt;/span&gt;&lt;span&gt;[] sKey) {
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;     &lt;span&gt;byte&lt;/span&gt;[][] L = &lt;span&gt;new&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[17][32&lt;span&gt;];
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;     &lt;span&gt;byte&lt;/span&gt;[][] R = &lt;span&gt;new&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[17][32&lt;span&gt;];
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;     &lt;span&gt;byte&lt;/span&gt;[] plaintext = &lt;span&gt;new&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[64&lt;span&gt;];
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;子密钥的产生&lt;/span&gt;
&lt;span&gt;12&lt;/span&gt;     &lt;span&gt;byte&lt;/span&gt;[][] K =&lt;span&gt; DESUtil.generateKeys(sKey);
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;初始置换IP&lt;/span&gt;
&lt;span&gt;14&lt;/span&gt;     ciphertext =&lt;span&gt; DESUtil.IP(ciphertext);
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;将密文分成左半部分R16和右半部分L16&lt;/span&gt;
&lt;span&gt;16&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; i = 0; i &amp;lt; 32; i++&lt;span&gt;) {
&lt;/span&gt;&lt;span&gt;17&lt;/span&gt;         R[16][i] =&lt;span&gt; ciphertext[i];
&lt;/span&gt;&lt;span&gt;18&lt;/span&gt;         L[16][i] = ciphertext[i + 32&lt;span&gt;];
&lt;/span&gt;&lt;span&gt;19&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;20&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;解密迭代&lt;/span&gt;
&lt;span&gt;21&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; i = 16; i &amp;gt;= 1; i--&lt;span&gt;) {
&lt;/span&gt;&lt;span&gt;22&lt;/span&gt;         L[i - 1] = xor(R[i], DESUtil.f(L[i], K[i - 1&lt;span&gt;]));
&lt;/span&gt;&lt;span&gt;23&lt;/span&gt;         R[i - 1] =&lt;span&gt; L[i];
&lt;/span&gt;&lt;span&gt;24&lt;/span&gt;         R[i] = xor(L[i - 1], DESUtil.f(R[i - 1], K[i - 1&lt;span&gt;]));
&lt;/span&gt;&lt;span&gt;25&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;26&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;以L0为左半部分，R0为右半部分合并&lt;/span&gt;
&lt;span&gt;27&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; i = 0; i &amp;lt; 32; i++&lt;span&gt;) {
&lt;/span&gt;&lt;span&gt;28&lt;/span&gt;         plaintext[i] = L[0&lt;span&gt;][i];
&lt;/span&gt;&lt;span&gt;29&lt;/span&gt;         plaintext[i + 32] = R[0&lt;span&gt;][i];
&lt;/span&gt;&lt;span&gt;30&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;31&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;逆初始置换IP^-1&lt;/span&gt;
&lt;span&gt;32&lt;/span&gt;     plaintext =&lt;span&gt; DESUtil.rIP(plaintext);
&lt;/span&gt;&lt;span&gt;33&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; plaintext;
&lt;/span&gt;&lt;span&gt;34&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;/**&lt;/span&gt;
&lt;span&gt; 2&lt;/span&gt; &lt;span&gt; * 两数组异或
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; &lt;span&gt; * &lt;/span&gt;&lt;span&gt;@param&lt;/span&gt;&lt;span&gt; a
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; &lt;span&gt; * &lt;/span&gt;&lt;span&gt;@param&lt;/span&gt;&lt;span&gt; b
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt; &lt;span&gt; * &lt;/span&gt;&lt;span&gt;@return&lt;/span&gt;
&lt;span&gt; 6&lt;/span&gt;  &lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 7&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[] xor(&lt;span&gt;byte&lt;/span&gt;[] a, &lt;span&gt;byte&lt;/span&gt;&lt;span&gt;[] b) {
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;     &lt;span&gt;byte&lt;/span&gt;[] c = &lt;span&gt;new&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;&lt;span&gt;[a.length];
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; i = 0; i &amp;lt; a.length; i++&lt;span&gt;) 
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;         c[i] = (&lt;span&gt;byte&lt;/span&gt;) (a[i] ^&lt;span&gt; b[i]);
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; c;
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;hr/&gt;
&lt;h2&gt;测试数据&lt;/h2&gt;
&lt;p&gt;　　密钥：00110001 00110010 00110011 00110100 00110101 00110110 00110111 00111000&lt;/p&gt;
&lt;p&gt;　　明文：00110000 00110001 00110010 00110011 00110100 00110101 00110110 00110111&lt;/p&gt;
&lt;h2&gt;运行结果&lt;/h2&gt;
&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1582448/201901/1582448-20190115213712918-800960511.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;　　张焕国，唐明.密码学引论（第三版）.武汉大学出版社，2015年&lt;/p&gt;
</description>
<pubDate>Tue, 15 Jan 2019 14:20:00 +0000</pubDate>
<dc:creator>蒙丿鑫</dc:creator>
<og:description>GitHub DES 数据加密标准（Data Encryption Standard），简称DES，是由IBM公司提交，美国政府于1977年1月5日颁布的一种加密算法。 DES的设计目标是，用于加密保</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/mx-lqk/p/10255149.html</dc:identifier>
</item>
<item>
<title>记一次性能优化(线程相关) - 贝克田庄</title>
<link>http://www.cnblogs.com/clovejava/p/10274490.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/clovejava/p/10274490.html</guid>
<description>&lt;p&gt;最近一直在负责业务监控告警相关的开发；由于组织架构调整，从原来的服务端架构组分离出来成立工程效率组，很多原来不是我们组负责的项目也开始陆续交接到了我们手里；&lt;/p&gt;
&lt;p&gt;以前一直由业务部门负责开发的sensoragent项目就是由我来交接，交接的时候才发现有很多问题，该应用是业务部门用来从MQ消费消息往神策发送数据的，由于数据量很大，该应用在生产已经扩大到了12点，而我们普通应用在生产也就四个点；虽然已经扩大到了12点，生产仍然有很大的消息堆积来不及处理，所以每天都能收到大量的消息堆积告警；&lt;/p&gt;
&lt;p&gt;下图是我的告警（目前公司只有开发运维角色才会接收到告警）&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1231915/201901/1231915-20190115212334610-75167513.png&quot; alt=&quot;&quot; width=&quot;958&quot; height=&quot;291&quot;/&gt;&lt;/p&gt;

&lt;p&gt;因为这两天迭代结束，有时间来处理下自己交接项目的一个分析和优化：&lt;/p&gt;
&lt;p&gt;我查看了应用在openshift里面的一些情况，同时也分析了一下granfa上面的应用运行状况：在看到openshift里面的时候发现了一些端倪：如图&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1231915/201901/1231915-20190115212554580-2138142142.png&quot; alt=&quot;&quot; width=&quot;879&quot; height=&quot;245&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1231915/201901/1231915-20190115212653757-1280183747.png&quot; alt=&quot;&quot; width=&quot;887&quot; height=&quot;279&quot;/&gt;&lt;/p&gt;

&lt;p&gt;项目里用到了十个线程去消费 MQ的数据，但是openshift上面可以看出，每次只有一个线程在处理，而且会出现Blocked的情况：&lt;/p&gt;
&lt;p&gt;点开以后发现blocked的线程阻塞在send方法：&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;34&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
@Override public void send(Map&amp;lt;String, Object&amp;gt; message) {
      synchronized (messageList) {
        messageList.add(message);
        if (messageList.size() &amp;gt;= bulkSize) {
          flush();
        }
      }
    }　
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;这是神策官方sdk提供的的方法，可以看到加了锁，每次consumer消费完信息，都会在内存里面存一份数据然后统一flush到神策。&lt;/p&gt;
&lt;p&gt;我们再来看交接过来的项目是怎么使用的；&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1231915/201901/1231915-20190115214130147-620433163.png&quot; alt=&quot;&quot; width=&quot;1237&quot; height=&quot;224&quot;/&gt;&lt;/p&gt;
&lt;p&gt;SensorsAnalytics这个对象是个单例对象，这样存在的问题在于十个线程共用一个对象，存在现在安全，所以有了synchronized关键字，但也会导致串行化，同时但list集合满了，会执行flush方法，而该方法：如下&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;38&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
@Override public void flush() {
      synchronized (messageList) {
        String sendingData = null;
        try {
          sendingData = jsonMapper.writeValueAsString(messageList);
        } catch (JsonProcessingException e) {
          messageList.clear();
          if (throwException) {
            throw new RuntimeException(&quot;Failed to serialize data.&quot;, e);
          }
        }

        try {
          this.httpConsumer.consume(sendingData);
          messageList.clear();
        } catch (IOException e) {
          if (throwException) {
            throw new RuntimeException(&quot;Failed to dump message with BatchConsumer.&quot;, e);
          }
        } catch (HttpConsumer.HttpConsumerException e) {
          if (throwException) {
            throw new RuntimeException(&quot;Failed to dump message with BatchConsumer.&quot;, e);
          }
        }
      }
    }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　该方法会往神策发送数据，并且每次发送的时间很长，这也会严重阻碍到线程继续消费运行；&lt;/p&gt;
&lt;p&gt;目前我的解决方案是，为每个线程分配一个SensorsAnalytics对象：&lt;/p&gt;
&lt;p&gt;代码改进：&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;38&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
@Slf4j
public class SensorsAnalyticsThreadLocal {
    
    private static final String PROPERTIES_PATH = &quot;/application.properties&quot;;
    private static final String URL_SENSORS_DATA = &quot;url.sensorsanalytics&quot;;
    private static final String SENSORS_DATA_BATCH_CONSUMER_BULK_SIZE = &quot;sensorsdata.batchconsumer.bulksize&quot;;
    private static Properties props;
    
    static {
        Resource resource = new ClassPathResource(PROPERTIES_PATH);
        try {
            props = PropertiesLoaderUtils.loadProperties(resource);
        } catch (IOException e) {
            log.error(&quot;初始化配置失败&quot;, e);
        }
    }
    
    private static ThreadLocal&amp;lt;SensorsAnalytics&amp;gt; sensorsAnalyticsThreadLocal = ThreadLocal.withInitial(() -&amp;gt; {
                String sensorsDataUrl = props.getProperty(URL_SENSORS_DATA);
                Integer bulkSize = Integer.valueOf(props.getProperty(SENSORS_DATA_BATCH_CONSUMER_BULK_SIZE));
                return new SensorsAnalytics(new SensorsAnalytics.BatchConsumer(sensorsDataUrl, bulkSize, true));
            }
    );
    
    public static SensorsAnalytics get() {
        return sensorsAnalyticsThreadLocal.get();
    }
    
    public static void set(SensorsAnalytics sensorsAnalytics) {
        sensorsAnalyticsThreadLocal.set(sensorsAnalytics);
    }
    
    public static void remove() {
        sensorsAnalyticsThreadLocal.remove();
    }
}
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;今天中午上到了生产，并且下来效果卓有成效，以前下午积压最严重的时候，也没有告警了：&lt;/p&gt;

</description>
<pubDate>Tue, 15 Jan 2019 13:51:00 +0000</pubDate>
<dc:creator>贝克田庄</dc:creator>
<og:description>最近一直在负责业务监控告警相关的开发；由于组织架构调整，从原来的服务端架构组分离出来成立工程效率组，很多原来不是我们组负责的项目也开始陆续交接到了我们手里； 以前一直由业务部门负责开发的sensora</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/clovejava/p/10274490.html</dc:identifier>
</item>
<item>
<title>Django之stark组件 - W的一天</title>
<link>http://www.cnblogs.com/12345huangchun/p/10274376.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/12345huangchun/p/10274376.html</guid>
<description>&lt;p&gt;　　现在让我说啥是stark组件，我也说不清楚。反正从今天讲的知识来看，今天完成的就是自己写一个模块，这个模块包含了admin后台管理工具的一些比较好用的功能，我们把它提炼出来，也就是相当于自己写一个admin后台管理工具，但这个工具不叫admin了，叫stark。既然是模仿admin的实现功能，所以整个执行过程和admin是一样的。首先我们得建一个stark包，即一个stark文件夹，在这里，我们也可以新建一个APP叫stark也行。&lt;/p&gt;
&lt;h2&gt;　　第一步，启动所有APP下的stark.py文件&lt;/h2&gt;
&lt;p&gt;　　每当我们创建一个新的APP时，文件夹下都会有一个admin.py的文件，这是django帮你做的，但现在的后台管理工具换成stark了，所以我们首先要在每个APP下新建一个stark.py的文件。怎么才能让django启动的时候，也把每个APP下的stark.py文件执行呢？？？？我们知道哈，admin是在它的__init__.py文件写了&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;def&lt;/span&gt;&lt;span&gt; autodiscover():
    autodiscover_modules(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;admin&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, register_to=site)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　django项目启动的时候会执行每个APP下的apps.py文件，我们可以把这句代码写stark文件夹下的apps.py文件里，这样就能保证django项目启动后会执行这一句代码，然后通过这句代码，执行每个APP下的stark.py文件，这样我们就启动了每个APP下的stark.py文件。&lt;/p&gt;
&lt;p&gt;　　apps.py&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;from&lt;/span&gt; django.apps &lt;span&gt;import&lt;/span&gt;&lt;span&gt; AppConfig
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; django.utils.module_loading &lt;span&gt;import&lt;/span&gt;&lt;span&gt; autodiscover_modules

&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; StarkConfig(AppConfig):
    name &lt;/span&gt;= &lt;span&gt;'&lt;/span&gt;&lt;span&gt;stark&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
    &lt;span&gt;def&lt;/span&gt;&lt;span&gt; ready(self):
        autodiscover_modules(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;stark&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;　　第二步，该写stark的源码了，完成注册功能&lt;/h2&gt;
&lt;p&gt;　　我们在stark文件夹下新建一个service文件夹用来放源码。&lt;/p&gt;
&lt;p&gt;　　sites.py源码文件&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; ModelStark():
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__init__&lt;/span&gt;&lt;span&gt;(self,model):
        self.model&lt;/span&gt;=&lt;span&gt;model

&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; StarkSite():
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__init__&lt;/span&gt;&lt;span&gt;(self):
        self._registry&lt;/span&gt;=&lt;span&gt;{}
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; register(self,model,stark_class=&lt;span&gt;None):
        stark_class &lt;/span&gt;= stark_class &lt;span&gt;or&lt;/span&gt;&lt;span&gt; ModelStark
        self._registry[model] &lt;/span&gt;= stark_class(model)&lt;br/&gt;site=StarkSite()
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　我们可以给app01下的Book表和Publish注册&lt;/p&gt;
&lt;p&gt;　　app01下的stark.py&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;from&lt;/span&gt; stark.service.sites &lt;span&gt;import&lt;/span&gt;&lt;span&gt; site,ModelStark
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; app01.models &lt;span&gt;import&lt;/span&gt; *
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; BookConfig(ModelStark):
    list_dispaly &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;price&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
site.register(Book,BookConfig)
site.register(Publish)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　这样就完成注册了&lt;/p&gt;
&lt;h2&gt;　　第三步，实现url的二级分发&lt;/h2&gt;
&lt;p&gt;　　urls.py&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;from&lt;/span&gt; django.contrib &lt;span&gt;import&lt;/span&gt;&lt;span&gt; admin
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; django.urls &lt;span&gt;import&lt;/span&gt;&lt;span&gt; path
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; stark.service.sites &lt;span&gt;import&lt;/span&gt;&lt;span&gt; site

urlpatterns &lt;/span&gt;=&lt;span&gt; [
    path(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;admin/&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, admin.site.urls),
    path(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;stark/&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, site.urls),
]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　然后再去源码里添加内容&lt;/p&gt;
&lt;p&gt;　　sites.py&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;50&quot;&gt;
&lt;pre&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; ModelStark():
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; get_urls(self):
    temp&lt;/span&gt;=&lt;span&gt;[
            path(&lt;/span&gt;&lt;span&gt;''&lt;/span&gt;&lt;span&gt;,self.list_view),
            path(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;add/&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;,self.add_view),
            re_path(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;(\d+)/delete/&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;,self.delete_view),
            re_path(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;(\d+)/edit/&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;,self.edit_view),
        ]
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; temp
    @property
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; urls(self):
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; self.get_urls(), None, None



&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; StarkSite():
        &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; get_urls(self):
        temp&lt;/span&gt;=&lt;span&gt;[]
        &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; model,config_obj &lt;span&gt;in&lt;/span&gt;&lt;span&gt; self._registry.items():
            model_name &lt;/span&gt;=&lt;span&gt; model._meta.model_name
            app_label &lt;/span&gt;=&lt;span&gt; model._meta.app_label
            temp.append(path(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;%s/%s/&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;%&lt;span&gt;(app_label,model_name),config_obj.urls))
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; temp

    @property
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; urls(self):
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; self.get_urls(),None, None
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　这个二级分发的想法是很巧秒的，一级分发在StarkSite类里面定义的，二级分发是在配置类里面定义的。调用视图函数的对象变成了配置类对象。在注册模型类的时候，我们就说了，我们可以给每个模型类定制一个配置类，然后去继承ModelStark，从而每个模型类可以重新定义自己的变量，也可以使用ModelStark类的变量，这样变的很灵活。到此，stark的主要功能就写完了，接下来我只需对每个视图写上逻辑和自己定制templates模板，就完成了，说的很简单，但其实并不是那么简单。&lt;/p&gt;
&lt;h2&gt;　　第四步，首先写一个查询的视图函数和模板&lt;/h2&gt;
&lt;p&gt;　　我们把视图定义成Modelstark的一个方法，直接用模型类对象就可以调用。我们首先在stark文件下新建一个templates文件夹，django在找模板时，会现在全局找，然后再一个一个APP下找，所以我们不用修改任何设置就行。静态文件也是一个道理，如bootstrap文件和jQuery文件，我们直接在stark文件下新建一个static文件夹，然后放在里面就行，它也是先在全局找，然后再一个一个APP下找。我们为什么要把这些文件放在stark文件下，只是为了我们写的这个stark模块，以后用在任何项目里都可以，只需要把stark文件夹拷走就行了。&lt;/p&gt;
&lt;p&gt;　　sites.py&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;47&quot;&gt;
&lt;pre&gt;
class  ModelStark：&lt;br/&gt;　　list_dispaly=[&lt;span&gt;'&lt;/span&gt;&lt;span&gt;__str__&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; _checkbox(self,obj=&lt;span&gt;None):
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; obj:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; mark_safe(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;&amp;lt;input type=&quot;checkbox&quot; name=&quot;check&quot; vlaue=&quot;%s&quot;&amp;gt;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;%&lt;span&gt;obj.pk)
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;选择&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
    &lt;span&gt;def&lt;/span&gt; _delete(self,obj=&lt;span&gt;None):
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; obj:
            model_name &lt;/span&gt;=&lt;span&gt; self.model._meta.model_name
            app_label &lt;/span&gt;=&lt;span&gt; self.model._meta.app_label
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; mark_safe(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;&amp;lt;a href=&quot;/stark/%s/%s/%s/delete&quot;&amp;gt;删除&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;%&lt;span&gt;(app_label,model_name,obj.pk))
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;删除&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
    &lt;span&gt;def&lt;/span&gt; _edit(self,obj=&lt;span&gt;None):
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; obj:
            model_name &lt;/span&gt;=&lt;span&gt; self.model._meta.model_name
            app_label &lt;/span&gt;=&lt;span&gt; self.model._meta.app_label
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; mark_safe(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;&amp;lt;a href=&quot;/stark/%s/%s/%s/edit&quot;&amp;gt;编辑&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; %&lt;span&gt; (app_label, model_name, obj.pk))
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;编辑&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;

    &lt;span&gt;def&lt;/span&gt;&lt;span&gt; get_new_list_display(self):
        new_list_display&lt;/span&gt;=&lt;span&gt;self.list_dispaly
        new_list_display.insert(0,self._checkbox)
        new_list_display.append(self._edit)
        new_list_display.append(self._delete)
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; new_list_display
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; list_view(self,request):
        queryset&lt;/span&gt;=&lt;span&gt;self.model.objects.all()
        header&lt;/span&gt;=&lt;span&gt;[]
        &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; field &lt;span&gt;in&lt;/span&gt;&lt;span&gt; self.get_new_list_display():
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; field==&lt;span&gt;'&lt;/span&gt;&lt;span&gt;__str__&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
                header.append(self.model._meta.model_name.upper())
            &lt;/span&gt;&lt;span&gt;elif&lt;/span&gt;&lt;span&gt; callable(field):
                header.append(field())
            &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;:
                header.append(self.model._meta.get_field(field).verbose_name)
        data&lt;/span&gt;=&lt;span&gt;[]
        &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; obj &lt;span&gt;in&lt;/span&gt;&lt;span&gt; queryset:
            tr&lt;/span&gt;=&lt;span&gt;[]
            &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; field &lt;span&gt;in&lt;/span&gt;&lt;span&gt; self.list_dispaly:
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; callable(field):
                    val&lt;/span&gt;=&lt;span&gt;field(obj)
                &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;:
                    val&lt;/span&gt;=&lt;span&gt;getattr(obj,field)
                tr.append(val)
            data.append(tr)
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; render(request,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;list_view.html&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,locals())
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　list_view.html&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;!&lt;/span&gt;&lt;span&gt;DOCTYPE html&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;html &lt;/span&gt;&lt;span&gt;lang&lt;/span&gt;&lt;span&gt;=&quot;en&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;head&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;meta &lt;/span&gt;&lt;span&gt;charset&lt;/span&gt;&lt;span&gt;=&quot;UTF-8&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;Title&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;link &lt;/span&gt;&lt;span&gt;rel&lt;/span&gt;&lt;span&gt;=&quot;stylesheet&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;/static/css/bootstrap.css&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;=&quot;/static/js/bootstrap.js&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;=&quot;/static/jquery-3.3.1.js&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;head&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;body&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;container&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;title&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;所有书籍&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;table &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;table table-bordered table-hover table-striped&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;thead&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;tr&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                {% for foo in header %}
                    &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;td&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ foo }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;td&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                {% endfor %}
            &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;tr&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;thead&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;tbody &lt;/span&gt;&lt;span&gt;id&lt;/span&gt;&lt;span&gt;=&quot;tbody&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                {% for book in data %}
                    &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;tr&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                        {% for foo in book %}
                            &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;td&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ foo }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;td&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                        {% endfor %}
                    &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;tr&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                {% endfor %}
            &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;tbody&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;table&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;body&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;html&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　今天就写到这里，明天继续。。。。。。。&lt;/p&gt;
</description>
<pubDate>Tue, 15 Jan 2019 13:25:00 +0000</pubDate>
<dc:creator>W的一天</dc:creator>
<og:description>现在让我说啥是stark组件，我也说不清楚。反正从今天讲的知识来看，今天完成的就是自己写一个模块，这个模块包含了admin后台管理工具的一些比较好用的功能，我们把它提炼出来，也就是相当于自己写一个ad</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/12345huangchun/p/10274376.html</dc:identifier>
</item>
<item>
<title>Vue项目部署问题及解决方案 - 半指温柔乐</title>
<link>http://www.cnblogs.com/le220/p/10274247.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/le220/p/10274247.html</guid>
<description>&lt;h2&gt;Vue项目部署问题及解决方案&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;code&gt;Vue-Router&lt;/code&gt;&lt;/strong&gt;&lt;/span&gt; 有两种模式，默认是 &lt;span&gt;&lt;strong&gt;&lt;code&gt;hash&lt;/code&gt; &lt;/strong&gt;&lt;/span&gt;模式，另外一种是 &lt;span&gt;&lt;strong&gt;&lt;code&gt;history&lt;/code&gt; &lt;/strong&gt;&lt;/span&gt;模式。&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;hash&lt;/strong&gt;：也就是地址栏里的&lt;span&gt;&lt;strong&gt; &lt;code&gt;#&lt;/code&gt;&lt;/strong&gt;&lt;/span&gt; 符号。比如 &lt;code&gt;http://www.example/#/hello&lt;/code&gt;，hash 的值为 &lt;code&gt;#/hello&lt;/code&gt;。特点：hash 虽然出现 URL 中，但不会被包含在 HTTP 请求中，对后端不会产生什么影响，改变 URL 不会重载页面。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;history&lt;/strong&gt;：利用了 HTML5 History Interface 中新增的 &lt;code&gt;&lt;strong&gt;pushState&lt;/strong&gt;()&lt;/code&gt; 和 &lt;code&gt;&lt;strong&gt;replaceState&lt;/strong&gt;()&lt;/code&gt; 方法，来完成 URL 跳转而无须重新加载页面。（需要特定浏览器支持）&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;hash 和 history 两种模式都是基于&lt;strong&gt;浏览器&lt;/strong&gt;自身的属性，&lt;strong&gt;&lt;code&gt;vue-router&lt;/code&gt;&lt;/strong&gt; 只是利用了这两个特性（底层还是浏览器提供的接口）来实现前端路由。&lt;/p&gt;
&lt;h2 id=&quot;articleHeader1&quot;&gt;1、使用场景&lt;/h2&gt;
&lt;p&gt;一般来说，两种模式都是可以的。除非在意不太漂亮的 &lt;code&gt;#&lt;/code&gt;，只能选择 history。&lt;/p&gt;
&lt;p&gt;这两种模式在开发环境下都没有什么太大的问题，但是当部署到生产环境中后，两者有所不同。&lt;/p&gt;
&lt;p&gt;hash 模式部署没有什么问题，只要访问到服务器上的 index.html，就可以访问网站了。 &lt;br/&gt;history 模式下，前端的 URL 必须和实际向后端发起请求的 URL 一致，如 &lt;code&gt;http://www.example.com/user/id&lt;/code&gt;。如果后端缺少对 &lt;code&gt;/user/id&lt;/code&gt; 的路由处理，将返回 404 错误。&lt;/p&gt;
&lt;blockquote readability=&quot;6.7560975609756&quot;&gt;
&lt;p&gt;不过这种模式要玩好，还需要后台配置支持……所以呢，你要在服务端增加一个覆盖所有情况的候选资源：如果 URL 匹配不到任何静态资源，则应该返回同一个 index.html 页面，这个页面就是你 app 依赖的页面。- &lt;a href=&quot;https://router.vuejs.org/zh/guide/essentials/history-mode.html&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;Vue-Router&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;articleHeader2&quot;&gt;2、问题起因&lt;/h2&gt;
&lt;p&gt;在做「年度账单」项目的时候，项目部署的时候，用的是 hash 模式。&lt;strong&gt;APP安卓端&lt;/strong&gt;分享出去的链接对于 &lt;code&gt;#&lt;/code&gt; 做了特殊处理，encode 转义成了 &lt;code&gt;%23&lt;/code&gt;，所以&lt;strong&gt;路由只能换成 history 的模式。&lt;/strong&gt;因此，现把解决的思路总结下，虽然 &lt;a href=&quot;https://router.vuejs.org/zh/guide/essentials/history-mode.html#%E5%90%8E%E7%AB%AF%E9%85%8D%E7%BD%AE%E4%BE%8B%E5%AD%90&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;官网&lt;/a&gt; 上给出了解决方案，但在实际的编码中也遇到了一些问题。&lt;/p&gt;
&lt;h3 id=&quot;articleHeader3&quot;&gt;（1）根目录下&lt;/h3&gt;
&lt;p&gt;当项目在根目录下部署的时候（如 &lt;code&gt;http://www.example.com/&lt;/code&gt;）,&lt;code&gt;vue&lt;/code&gt; 的相关文件默认不需要修改，修改的是后端，这里以 nginx 为例。　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
location /&lt;span&gt; {
  try_files &lt;span&gt;&lt;strong&gt;$uri $uri&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;/ /index.html&lt;/strong&gt;&lt;/span&gt;;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;$uri&lt;/code&gt; &lt;/strong&gt;就是访问的 url，不包含 &lt;code&gt;域名&lt;/code&gt; 和 &lt;strong&gt;&lt;code&gt;querystring&lt;/code&gt;&lt;/strong&gt;。例如 &lt;code&gt;/test/hello&lt;/code&gt; 当访问 &lt;strong&gt;&lt;code&gt;$uri&lt;/code&gt;&lt;/strong&gt; 时，如果存在，则访问&lt;strong&gt; &lt;code&gt;$uri/&lt;/code&gt;&lt;/strong&gt;, 不存在就访问 &lt;code&gt;/index.html&lt;/code&gt; 这样配置好，访问 &lt;code&gt;http://example.com/&lt;/code&gt; 时就可以访问到网站了，进入多级目录后刷新页面也不会存在问题。&lt;/p&gt;
&lt;h3 id=&quot;articleHeader4&quot;&gt;（2）子级目录下&lt;/h3&gt;
&lt;p&gt;&lt;span&gt;　　这里涉及到修改 &lt;code&gt;vue&lt;/code&gt; 项目几个配置文件。先定义几个环境&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;部署的域名：&lt;code&gt;http://www.example.com:8080/&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;nginx 的 root 目录：&lt;code&gt;home/web/&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;vue 的部署路径：&lt;code&gt;home/web/h5-year-bill/&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;vue 项目的链接：&lt;code&gt;http://www.example/h5-year-bill/&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;vue 项目的静态资源路径：&lt;code&gt;http://www.example/h5-year-bill/static/&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;修改1：打包后的静态资源路径需要修改&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;找到 &lt;code&gt;build/config/index.js&lt;/code&gt;，代码如下：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; &lt;span&gt;...
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt; &lt;span&gt;build: {
&lt;/span&gt;&lt;span&gt;3&lt;/span&gt; &lt;span&gt;...
&lt;/span&gt;&lt;span&gt;4&lt;/span&gt; -&lt;span&gt;    assetsPublicPath
&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;      &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 访问路径，修改成绝对路径&lt;/span&gt;
&lt;span&gt;6&lt;/span&gt; +    assetsPublicPath: '/h5-year-bill/'
&lt;span&gt;7&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;修改2：路由文件&lt;/strong&gt;&lt;br/&gt;&lt;code&gt;Vue-Router&lt;/code&gt; 有一个 &lt;code&gt;base&lt;/code&gt; 属性, &lt;a href=&quot;https://router.vuejs.org/zh/api/#base&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;传送门&lt;/a&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;pre class=&quot;hljs cs&quot;&gt;
&lt;code&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;base
类型: &lt;span class=&quot;hljs-keyword&quot;&gt;string
默认值: &lt;span class=&quot;hljs-string&quot;&gt;&quot;/&quot;
应用的基路径。例如，如果整个单页应用服务在 /app/ 下，然后 &lt;span class=&quot;hljs-keyword&quot;&gt;base 就应该设为 &lt;span class=&quot;hljs-string&quot;&gt;&quot;/app/&quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt;　　因此，找到 &lt;code&gt;src/router/index.js&lt;/code&gt;，代码如下：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 不影响本地开发，兼容性做了处理&lt;/span&gt;
&lt;span&gt; 2&lt;/span&gt; const isHistoryMode = process.env.NODE_ENV === 'production' ?&lt;span&gt; {
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt;   mode: 'history'&lt;span&gt;,
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt;   base: '/h5-year-bill/'
&lt;span&gt; 5&lt;/span&gt; &lt;span&gt;} : {
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt;   mode: 'hash'
&lt;span&gt; 7&lt;/span&gt; &lt;span&gt;};
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt; 
&lt;span&gt; 9&lt;/span&gt; const router = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Router({
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt; &lt;span&gt;  ...isHistoryMode,
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt; &lt;span&gt;  routes
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt; });
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;至此，打包配置的相关修改已全部完成，项目也能够正常访问。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;但还是会有一个问题，跳转到某个路由后，刷新页面，就会出现页面空白，或者路由不通，此时就要修改 nginx 的配置了。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;修改3：nginx 配置相关修改&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;nginx部署路径/conf/nginx.conf&lt;/code&gt;，修改如下：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; #h5-year-&lt;span&gt;bill
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt; location ^~ /h5-year-bill {
&lt;span&gt;3&lt;/span&gt;     root   /home/&lt;span&gt;web;
&lt;/span&gt;&lt;span&gt;4&lt;/span&gt; &lt;span&gt;    index  index.html;
&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;     try_files $uri $uri/ /h5-year-bill/&lt;span&gt;index.html last;
&lt;/span&gt;&lt;span&gt;6&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;/h5-year-bill/&lt;/code&gt; 就是部署的网站目录。&lt;/p&gt;
&lt;p&gt;这样几项配置后，就可以在子目录下访问网站，刷新也没有问题。&lt;/p&gt;

&lt;pre class=&quot;bash hljs&quot;&gt;
&lt;code class=&quot;bash&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;&lt;span class=&quot;hljs-variable&quot;/&gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;pre class=&quot;bash hljs&quot;&gt;
&lt;/pre&gt;
&lt;pre class=&quot;bash hljs&quot;&gt;
&lt;code class=&quot;bash&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;&lt;span class=&quot;hljs-variable&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;</description>
<pubDate>Tue, 15 Jan 2019 12:57:00 +0000</pubDate>
<dc:creator>半指温柔乐</dc:creator>
<og:description>Vue项目部署问题及解决方案 Vue-Router 有两种模式，默认是 hash 模式，另外一种是 history 模式。 hash：也就是地址栏里的</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/le220/p/10274247.html</dc:identifier>
</item>
<item>
<title>go并发调度原理学习 - 啊汉</title>
<link>http://www.cnblogs.com/hlxs/p/10274186.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/hlxs/p/10274186.html</guid>
<description>&lt;div&gt;&lt;img src=&quot;data:image/jpeg;base64,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o6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2wBDAAICAgICAgMCAgMFAwMDBQYFBQUFBggGBgYGBggKCAgICAgICgoKCgoKCgoMDAwMDAwODg4ODg8PDw8PDw8PDw//2wBDAQICAgQEBAcEBAcQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/3QAEADX/2gAMAwEAAhEDEQA/AP38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKQnHNLUEjKB+8+7+VAEoJxk8GlBBqEbfvHvUqHK5oAdRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUe1ACE0bvWgjtiuQ8Z+Jbfwno8mrT/P5ePlHU5NGoXR129c7e9IrqzFR1HWuS8K+KLPxZo0WqWgwJOq9xiuriwc7elFu4rktFFFAwooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9L9/KKKKACiiigAooooAKKKKACiiigAooooAKY77SB1JpxOKikycccUAOZ8Zz2r54+JfirW77Vk0DwrMY/sh3XcgGdo6j65r2HxN4gtfD2iXGo3bbY0GAe5LcD9a8R8O20xgbVL8bZ70kvnkkfw/pXVh6HMcmJr8h7F4M8RReJtFgvM/vEG117gjj9a7CLOWx93tXzj4av08LeL101/3drrJOwn7q7Bz+dfRltjZwd3vWFak4yNqNXmRYoooqDUKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKaTginVG4JxzxQ2BH5wRWduFHevnXxFqNz4w8XCyVdum6ZkOeol3D+lel+PfFaeG9CklC77mX5Y0HVsnB/KvNdCszp9lGt1zLJlmPru5/Su7B0OZ3ZwY2vyx0HeFL+Pwr4tOmA7LLU+Ix/Cu0c19DQGMLhK+dfEGlJqenNGD5cseGDjqu3nj616t4A14634fhmdgZkyrL3G3gZ+tTjqXLLQMDW5lqd5k4zikBzwetMDbxlTginqcjNcZ3jqKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//0/38ooooAKKKKACiiigAooooAKKKKACiiigBCM1GwGeTT2bbXHeN/EcXh7Q5rsfNKw2oO+W4/SnFXegnKyueR+Orv/hJvEa6Ez7rXTiDMB0fdyPyrYaOJRiJcYAGPpXN+GtJm0yxaS8bzry5O5pD1wTkD8q6YHnYRtA6ivdwtHlWp8/iqvNIxde0j+19PFq33h8yEcEFeetel+AfET6rokS3Jzdx5Vh3wvAzXGfJs8ljkP8Aeb0rndOuJvCPilL63b/iW6kcT+iFeB+ZrPHUdOZHTga1nys+llcsenFOBz1qpbsjxrIjfKwBx9atKwYbh3rxT2B1FFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAU0ttp1IcHr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7PsP+fWL/vhf8KUabYHn7LF/3wv+FaFGcUtRfIzhplh1a1iP/bNf8Kki0+yhfzYoER/VVAP6VeyaXrTUhaESxAH5TgelSou0YpQMUtAwooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9L9/KKKKACiiigAooooAKCM8UUUANCgdKUUtFABRRRQAUUUUAFZ2r86Te/9cJP/AEE1o1n6v/yCb3/rhJ/6CaAPmD9lbjw5fj/ptJ/6Ga+r6+UP2V/+Rdv/APrtJ/6Ga+rh1NAC0UUUAFFFFACYxS0UUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAmD60tFFABSYzS0UAJgUYFLRQAmBRgUtFAHx18H8H9pf4wj/AK8P/QK+wwAa+PPg9/ycx8Yf+3D/ANAr7EFABgUYFLRQAmBRj0paKAEwfWloooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP//T/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigArP1f/kE3v/XCT/0E1oVn6v8A8gm9/wCuEn/oJoA+YP2V/wDkXb//AK7Sf+hmvq4dTXyj+yv/AMi7f/8AXaT/ANDNfVw6mgBaKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA+Ovg9/wAnMfGH/tw/9Ar7EFfHfwe/5OY+MP8A24f+gV9iCgBaKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP//U/fyiiigAooooAKKKKACmk4NOpCCaGAZpCwHWjGAe1QNPADhpVBHqRSQE4YGlz3qEXFv/AM9F/MUfaIB1lX8xTAm3Ck3CovtEH/PVfzFJ9og/56r+YoAm3Cs7V3H9lXg7mCT/ANBNW/tF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rTiuRinUUARLHtPBpGt4H/1kat9VBqakOe1AFYWVoDkQIPcKKl8pRxGAo9qd82acM96WoWGhMc5p9FFOwERiDE56Gnqu33NOooAKKKKACiiigAooooAKKKKACiiigAoxRRQAYyMUm0YxS0UAJjjAqMxLn61LTWOBmgD46+EEG39pj4wStzn7Dj/vivsNACM18mfCsCL9oz4qtj/W/Yv0WvrRBxQA7HOaWiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//0P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigArJ1rDaNqAx/y7y/+gGtasfW+NG1A/wDTvL/6AaAPnj9lCQv8MYhjpcXH/ow19PA55r5X/ZIfd8M0HpcXH/ow19U0AFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAU1hkYp1FAHyh8OAI/wBob4ikj/W/Zf0Wvq1eRXy34KUQ/tBeNW/56/Z/0WvqRPu0AOooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP//R/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAE6CsvWedHvwB1t5f8A0A1q1mar/wAgy8T1hk/9BNAHzJ+yV+68BSWp6xTz8/WQ19WA5Jr5S/ZaxFoupWn/ADzmf9XNfVqrgmgB1FFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUh6UtFAHy54ZG34+eJm/56eT+i19QJnHNfNOkoIPjtqzf89dn6LX0wOlAC0UUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAH/9L9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACjpRTWByCO1AC5ozUW5S3H3h2qtcX1naruuZliPuwoAvZrO1L5rG5wOPKf/wBBNcdqXxI8GafmK7vwCOuBn+VcXqHxz8AwxSW0d2XZlYD5T3FAHDfs2Yin8QWwPMcv82NfViuf4hgmvhb4QfEHw14V13X7rVbgpFqDqYflPYnNfTtj8T/BV/tSO/GZOgIIoA9MMqhtp61JWPZappl8B9iuUkHoGBNaoA/CgB9FJkCgHNAC0UUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFNZtvHUmlyKa3I45oAUtge9NWRW6ViaxrWlaKn2rUrhYgBwCa8D8U/tDaZZlrLwvanUrnkHkoFPbk0AfTO4DrxUb3NvH9+RV+pFfBl98VfiLqQaSS8/s7d0iAD/AK1ztz4m8YakgW91dn+gxigD6AjlhX42zTpIpSXHOR2WvpSOVOgYH8a/MyFL2C+/tKK7YXP9/k111v448e25WOHWCVX1UUAfoQsqMdo7U7dz04r4o0v45eL9HlVdUtf7Uh7vuCbR9K988KfGDwj4lARLoQ3HG6NgRgn3NAHrO8bgPWpM1WV451EkLB0Poc5qWMjG0cYoAkooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD//0/38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigApCwBx3NLTHOOgyaAFLAYB6msvUtUs9Mhe6vZBFFEMliaz/EfiXS/C+my6jqswjiiGffPYAV8M+LvHut+Pb2SWR2t9NUkJCD98fWgD2nxd8fraBpbTwlbfbX6GXO3b+Br561LW/EniO4e91zUHmDH5Ix8uz2461UW3igVUiXA7L/9epGxuPr3oAri1twM4Yv6liad5KMMOobHTipaKAIzEhG0qMDpx0pBEgZWOcj0OKloxQAlpc6po8pvfD969rcZzySw/I17j4S+Peo2aRWXiy3LKvDXOev/AAEV4cefuil2swKnDjuKAP0N0LxDpXiC0S90u4WaNx2PI/CugU8e9fm74d17VvBV8NQ0KZkSQjfFksDj619teA/H2meMrASwuEvEA8yMnoaAPS80VDEZDnfUoORmgBaKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAprMFGTTqjkzjcO1AEZPOG4z0rx74gfFrSvCUclrZgXeoKMCMHGCfeqfxY+Ji+ELAadp5Euo3QIQD+H1zXx2DJLOb3UGM9xISS596ANLWdZ1/wAXXZ1HxLctMrHMcAO0J+I61U2hMImAV9ufzp7bl+bru6Ug9D170AB9V+960o29SMk9aSigBQcHH8PpTTk5HY0tFAAeVwKgkt4pVwwO8dCp2/yqejJByKAPQ/APxY8Q+D5vsWtym/0tiBGTwYR39zmvszQPEel+I7CPUNJlE0TjPuK/O0LGwZMZHcGun8GeNr/wBqSXGS+mOwEseemelAH6DrKDk4+X1qQHNYmiaxZa5p8Wp6fIJYJ1BGO1bEfcE5NAElFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQB/9T9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAoziikNACbs8gcVnahqdrptm99dMFSME5PtV8plMZxXy/8e/GLW9tB4R0x/nuyfNIPK7ef1oA8Y8feNbjx9rhuWJTS7diIlB4bsf1rmz1MZ7YwPSo4oljj8qHjHb+dOG7HPTsaAAKB0pec9eKKKACiiigAo470UUALmmhVBzjmlooAXcwB28E1c0TW73wtq8Gq6cTwcyoDw4/+tVKg7dpyMmgD9BvCPinT/FmiwatpzhlccjuCODXTBjnmvin4KeKBoniH+xJ22W2o/cUnhStfaURIGSc5oAsUUDmkAxQAtFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFNbOOOtACFj2GTXL+LfEVt4d0G61a4+7CvAzjJPSunIxnHU18gfH7xPJfana+ELJsQxkm5x+a0AeJ6jqt94i1G58QalkzXbfdP8IU4GPwpThTs6rTT8o6YAAApBkDB60AOHHHakoooAKKKKACiiigApCNw2npS0UAI3zgqfu+lK251KHlfSikO4crQB7J8EfFo0nX28KPLttrn/Uox4XHLcn1r7IiYMSR+dfmZMsqTW91YsYruFgyuPQHJ/Sv0F8A+IU8TeGLPVV6uu0/VeKAOzooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP//V/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKaxAHNOprEAZNAEM8vl28kzcBFJ/IV+dPinUTrni3UtXD5ikYCMddu3g19yePPEMfh7whf6xNwiIV/764r89tMjcWp8znLswP8AvHNAGmoQnhevXnrSDIGD2pFbdxil5zg0ALRx07npRR8vVug70AJkhWY8FOopQGYKUGd/T8KguLmCzhN5fH5UDM0h4AA9q+PPEf7TGvazrFxo3wm8LP4gNo215xJ5ak+2eKAPspvlwexoIIPHK9jXxRpn7THjfwjqtvD8XPCT6FYzsFM/meaBngcKK+ytO1G11Wxhv9PcSWk6hoyPQ80AXaKKKACjkfMBkiigckDOKAK9w1zBJDqNo225t3UxkehPzV+iXhHVF1rQrXUFP+sQAj3Awa/PI/Iry5yFBxX2J8BNQ+1+BreF23SRFs+2TQB7fRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUhzjilprdKAIJW8uGWUnopP5Cvzz8VXf8AaHjPVb5ju85gPpt4r9AtWkEWm3TntG38jX5txz/bJZ7rqWkfP4MaAJ2JyFNGe3cUqkHk0nvQAUoBY4FJRhc5IyRQADJIB4zUUk8EHM8qRD1dgv8AM1Q1bVLXRdHvNXuBi3hRmJJ7gHH618O+E/CfjP8AaNa68V+Jdak0/wANrIy2lmgPIVirfOuDQB94C5tGcJFdQSN6LKjH9DU3HaviTXf2VpPDNm+r/CzWZ7PU4MOAzvJvI5IwxwM19NfDC+8V3/g2yl8aW/2bVF3LIuQc7TgHj1oA9BooooAKDnaccUUmCzBaAGyDcoTP3x+VfT37POsmXT7zRHbK2eNv/Aua+ZlKKw3dq9f+Akph8V6hbqeJNvH4UAfZobNKDkZpPuinUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAH/9b9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigApDzwaWmtnHFAHhP7RLGP4T6ocdWiwP8AgVfIEKslvCvbaP5V9jftBQvP8LdUjA3MGiP/AI9Xx1ayCW2icfd2gfkKAJQMdOKWnNTaACgAEjIyKKASTsXgnv6UAeD/ALTGu6h4a+CWvaxp7kSRtDGpHXEj7T+hq58BfDGk+G/hjpc1nEm+SN5XkwCzE/Mc967P4leDbbx74NvfCd5wl2uQevzpyv618h/Dn433XwWjPw/+LthNaJYswhvUVpRIhOR8qA4wKANb4l/tJ/CnVDdeDvFmlS3MIcCQmCQDKnjDBeK+nfhfqfh7WPB1lqHhaMw6bIp8pCS2APc18vfEj9prwd4w0aXwr8O9FHiC+1LCCU2vklPfLLX0L8DPDOr+Evhvpmi63D5N1HvdlznG87sUAevUUUUAFIwJHHWlpQdp3HtQAvyBDkZ46V9F/s3zOY9WtifkiKYHpmvnDB2+Yfevpf8AZ0s3S31S/I+S42Y/CgD6booooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKQ56UtHSgDF10btJu/aJ/5GvzZ0zCRTAj70j/+hGv00vk3WVwmM7o2H6V+b91bm21C6sGXa0MjH/vok0AQqOwpw4oXiigAoG0kKxwDRR8o5PagDgvilp91qfgLVtPtVJkEZYAdwBk15R+ylrOn6l8LbeztJFR7OWVbiJiFZTvOODzX0k6CWNo2G5XBGD6HrXyV4o/Zz1K18QXHif4Y+IW0Ke6O6e2VC6uR068CgDS+KPg7433XiPU9d8G+OV0TR/LLw2xgRwuxckbj61u/sx+L/EfjL4XWWp+K7v7bqQkmSSTaF3bHKg8fSvPZvgx8cvEyjT/E3jhjp54dBAAWXuMjnmvo74c+AdK+HHhe28M6Mmy1g3Ec5JZjljz6mgDvKKKKAClU4NJSE7Ru9KAB1/dnuTXq/wADImHja6kB+Ubfx4rypzsTjqa9w/Z+sHm13Vbgj5YNmD9RQB9dgdc08ZyaOvFLQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAf/9f9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAprDcMdKdSGgDmvFWkW2s6De2VyNyPGTj3UZFfnPp8MsNu8Ug2iGRwfb5jiv03kUPG0JGdwI/Ovz+8eaW+heNdQsZF8uKYgxDs3c0AcsPubm4J6D1oGcc8GlLFm3uOR29KQcEr196AFpDkjFLRQA4MVLFf4utZV5o+m6gB9stYpmHd41Y/qK06KAMOy8N6FpxzZWMERPcRqD/ACrcwoACjFFFABR2zRSgZoAQdMmgDdx2NL975RQVH3AaAGFWcPjgjgD1r7O+CFgbHwPaM67Xk3Z/Ovje2tLrWL6303Thme4dduPRTz+lfoloWnQ6VpNtZQjARBke+OaANqiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAprDNOprcjFADXG9WT1GK+A/ibYS6P4/v4pRtS6KmL0bA5r77POMV8/fHXweNb0JNftI83un8rjqQx5/SgD5WU5Py8j1pO/HI7GmRSrIqS/eVuGHuKkI2/KDlR0oASgeh5HpRRQA0g4IU4J604YDZUYHpRRQArM5X5Dhj3pMsfvHNFFABRRRQAUEbgRRQBnocGgByZeQbBuIB4r63+BGjCw8MnUTy92Tk4/umvlfRNFvPE2s2ug6blDOwLOP4QvJ/Ov0D0PS7fRdNh021TZHCoH496ANykHApaKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9D9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigApDkjjilooAa2dvB5r55+Ofg0axpaeIrNcXen5PA5O7rX0R1qjcQpLE8UgDI4wykdQaAPzYilE8SyKdzHgn3FTYAGMYYda9L+KPw/Pg3Vn1bSoS2m3RJKjnyj/wDXNeYph1Do24N3oAeBmk4o3bTzRweRQAUUUUAFFFFABSZXO3+I9BS0oYr/ABbQfbNAAoZD7jr7VCMbHkDZ3d+mKkjjYqVT7r9T6YrqvCPhW48YaxFp9uhmtFI86X7oGOlAHp3wR8JyXepN4ilj2Qwf6lj/ABZ4NfWaAZIXtWTomj2mi6fDp9lEIo4RgAfrWyjbhmgB9FFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABSHqKWigBmNo4qjdQx3cElrMuUlUqQffitDIqORgvzHpQB+f/j/AMIXPgDXpokyLG6YmB8ZC55auTHAAIx3J619++LfDOm+K9LlsNWiDxuPl9QfXNfDninwnqvgXUZNOvg0tmD+7nxxg/4UAYwxyT90d6Qc8j7p6Gk3IwVwN6noQacSc7WPI7elABRRRQAUUUUAFAye1LtA5puS3KJvcdBnFACgFhuHTvTHcRIZXzjIC4GSSeMYpzBZG+clS3RAMkH8PWvoD4YfDCe6ePxJ4iT5DzFAR0x3oA7H4PeArrRbQ65qsPlXVwAUiPJQfX3Fe8xDjGMY7VFAE8v5f9WvA/CrKEHoOKAH0UUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAH/0f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAqMxqfvVJSEcg0AZ2oaZa6pay2d7GJI5BggivjTx/8JdU8MvLqPh+M3FhksyD/ln/AI19t8k5HSoZ0jkUpKoZT1BGc0AfmlDcR3EW9Rz0Ibg5H1qQnb1GK+wPGPwZ8P8AiCR7y0Asrl/4xyAfpXzlrnwy8deGriRGtDqNqnS5BC5H+7QBxvbI6UYbG7HFNlSSDLXKSEj+HYePxxUAmRxny2A7cHigCx1GV5ozxk8U0TgJgZf22kVLbpJMwCI7+2w8UAMzTv4GYnCr19R+FdPp3gfxf4hmS302wbyW6zE42/ga9+8MfAzS9O8ufXZP7SmXB/uYP9aAPDPBvgbW/GkwmtQ0FkT89wRjI9Npr7Q8L+EtK8MaZHpmnRBEQcnux9c1r2llb2cIgtohGiDARRitCHGzC9KAHhOhPUU8UUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUxkB6cGn0UAMZAy7W5rA1vQdM1+zk07VIVlhkGCCOfzroqiK8nnBoA+NvFvwN1XRnlvvDQ+1Q9Vhzjb+JrxYvc287WepRtFdKcFSpx+dfpcYY35cbjXN634M8N+IItmp2avj0+U/mKAPz6ZlQ7SRu9KdwOD1r6xv/AIC+GZwx08m3B7ZJrjZ/2ctTZz9i8Q+Qh6L5WcfjQB4Dg0BSemPzr3Nf2bddL/vfFO4enkgVt6f+zzFbt/xMdRN0v+7t/lQB82s6RczNge3Nbvh7w5rvii6MWi2jPGnDyH5duenB619Z6V8G/BmnssrW/muvck16hZ6fZ2EYgtIliQdMAUAeK+BfhBp/h0jVNbk+2ag3IJGAv4dK91SGMxCMABPQcU8RgfeOakGO1ACbRjHpSgEDmlooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9L9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACkxS0UARPFv5J5HSmtbo67HAZPQjNT0UAY82haZOhikt4yh7bRWBL8O/CUxy9iua7eigDhY/hv4QibctiufrW1a+GtJs/9RboMdPlFdBRnFAFNbcRcQhUHcAAVMqE8E8VNRQAzYMcU4DFLRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAIBiloooAaVDDDUbQBgU6igBpUGm+WucipKKAI/LPY0qpjOec0+igBm3n2pcY6U6igBpUE5NKAR3paKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/9P9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACjGaKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/Z&quot; alt=&quot;&quot; width=&quot;353&quot;/&gt;&lt;/div&gt;

&lt;p&gt;go并发调度模型如上图&lt;/p&gt;
&lt;p&gt;M指的是Machine，一个M直接关联了一个线程。&lt;/p&gt;
&lt;p&gt;P指的是Processor，代表了M所需的上下文环境，也是处理用户级代码逻辑的处理器。&lt;/p&gt;
&lt;p&gt;G指的是Goroutine，其实本质上也是一种轻量级的线程。&lt;/p&gt;

&lt;p&gt;⾸先是 Processor（简称 P），其作⽤类似 CPU 核，⽤来控制可同时并发执⾏的任务数量。每个⼯作线程都必须绑定⼀个有效 P 才被允许执⾏任务，否则只能休眠，直到有空闲 P 时被唤醒。P 还为线程提供执⾏资源，⽐如对象分配内存、本地任务队列等。线程独享所绑定的 P 资源，可在⽆锁状态下执⾏⾼效操作。&lt;/p&gt;

&lt;p&gt;进程内的⼀切都在以G⽅式运⾏，包括运⾏时相关服务，以及main.main ⼊口函数。需要指出，G 并⾮执⾏体，它仅仅保存并发任务状态，为任务执⾏提供所需栈内存空间。G 任务创建后被放置在 P 本地队列或全局队列，等待⼯作线程调度执⾏。&lt;/p&gt;

&lt;p&gt;实际执⾏体是系统线程（简称 M），它和 P 绑定，以调度循环⽅式不停执⾏ G 并发任务。M 通过修改寄存器，将执⾏栈指向 G ⾃带栈内存，并在此空间内分配堆栈帧，执⾏任函数。当需要中途切换时，只要将相关寄存器值保存回 G 空间即可维持状态，任何 M 都可据此恢复执⾏。线程仅负责执⾏，不再持有状态，这是并发任务跨线程调度，实现多路复⽤的根本所在。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;G自己提供内存栈在M上执行&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;P保存P执行过程中的数据行，当G被暂停时，SP，SC等寄存器信息会保存在G.sched中，当G被唤醒继续执行时，从之前暂停的位置继续执行，因为G提供内存栈，并记录了上次执行到的位置，G数量很多，P相对较少，在垃圾回收的时候方便定位&lt;/p&gt;
&lt;p&gt;P中有一个对列保存G的指针，其实就是一个256个元素的数组，通过两个变量指向对首和对尾，所以这个队列是会出现满的情况的，满了新加的G就只能放到全局队列中&lt;/p&gt;
&lt;div readability=&quot;10&quot;&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;40&quot;&gt;
&lt;pre&gt;
type g &lt;span&gt;struct&lt;/span&gt;&lt;span&gt; {
   stack       stack   &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;栈，两个能容纳任何变量地址的变量&lt;/span&gt;
   stackguard0 uintptr &lt;span&gt;//&lt;/span&gt;&lt;span&gt; offset known to liblink&lt;/span&gt;
   stackguard1 uintptr &lt;span&gt;//&lt;/span&gt;&lt;span&gt; offset known to liblink&lt;/span&gt;
   _panic         *_panic &lt;span&gt;//&lt;/span&gt;&lt;span&gt; innermost panic - offset known to liblink&lt;/span&gt;
   _defer         *_defer &lt;span&gt;//&lt;/span&gt;&lt;span&gt; innermost defer&lt;/span&gt;
   m              *m      &lt;span&gt;//&lt;/span&gt;&lt;span&gt; current m; offset known to arm liblink&lt;/span&gt;
   sched          gobuf   &lt;span&gt;//&lt;/span&gt;&lt;span&gt;存放g上下文信息，g被停止调度时，会将上线文信息存在这里，唤醒后可继续调度&lt;/span&gt;
   syscallsp      uintptr        &lt;span&gt;//&lt;/span&gt;&lt;span&gt; if status==Gsyscall, syscallsp = sched.sp to use during gc&lt;/span&gt;
   syscallpc      uintptr        &lt;span&gt;//&lt;/span&gt;&lt;span&gt; if status==Gsyscall, syscallpc = sched.pc to use during gc&lt;/span&gt;
   stktopsp       uintptr        &lt;span&gt;//&lt;/span&gt;&lt;span&gt; expected sp at top of stack, to check in traceback&lt;/span&gt;
   param          &lt;span&gt;unsafe&lt;/span&gt;.Pointer &lt;span&gt;//&lt;/span&gt;&lt;span&gt; passed parameter on wakeup&lt;/span&gt;
&lt;span&gt;   atomicstatus   uint32
   stackLock      uint32 &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; sigprof/scang lock; TODO: fold in to atomicstatus&lt;/span&gt;
   goid           int64  &lt;span&gt;//&lt;/span&gt;&lt;span&gt;就像线程有id，g也有id&lt;/span&gt;
   waitsince      int64  &lt;span&gt;//&lt;/span&gt;&lt;span&gt; approx time when the g become blocked&lt;/span&gt;
   waitreason     &lt;span&gt;string&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; if status==Gwaiting&lt;/span&gt;
   schedlink      guintptr  &lt;span&gt;//&lt;/span&gt;&lt;span&gt;指向另一个G，全局G就是通过这个字段连在一起的&lt;/span&gt;
   preempt        &lt;span&gt;bool&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; preemption signal, duplicates stackguard0 = stackpreempt&lt;/span&gt;
   paniconfault   &lt;span&gt;bool&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; panic (instead of crash) on unexpected fault address&lt;/span&gt;
   preemptscan    &lt;span&gt;bool&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; preempted g does scan for gc&lt;/span&gt;
   gcscandone     &lt;span&gt;bool&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; g has scanned stack; protected by _Gscan bit in status&lt;/span&gt;
   gcscanvalid    &lt;span&gt;bool&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; false at start of gc cycle, true if G has not run since last scan; TODO: remove?&lt;/span&gt;
   throwsplit     &lt;span&gt;bool&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; must not split stack&lt;/span&gt;
   raceignore     int8     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; ignore race detection events&lt;/span&gt;
   sysblocktraced &lt;span&gt;bool&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; StartTrace has emitted EvGoInSyscall about this goroutine&lt;/span&gt;
   sysexitticks   int64    &lt;span&gt;//&lt;/span&gt;&lt;span&gt; cputicks when syscall has returned (for tracing)&lt;/span&gt;
   traceseq       uint64   &lt;span&gt;//&lt;/span&gt;&lt;span&gt; trace event sequencer&lt;/span&gt;
   tracelastp     puintptr &lt;span&gt;//&lt;/span&gt;&lt;span&gt; last P emitted an event for this goroutine&lt;/span&gt;
   lockedm        *&lt;span&gt;m
   sig            uint32
   writebuf       []&lt;/span&gt;&lt;span&gt;byte&lt;/span&gt;&lt;span&gt;
   sigcode0       uintptr
   sigcode1       uintptr
   sigpc          uintptr
   gopc           uintptr &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; pc of go statement that created this goroutine&lt;/span&gt;
   startpc        uintptr &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 被执行的函数&lt;/span&gt;
&lt;span&gt;   racectx        uintptr
   waiting        &lt;/span&gt;*sudog         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; sudog structures this g is waiting on (that have a valid elem ptr); in lock order&lt;/span&gt;
   cgoCtxt        []uintptr      &lt;span&gt;//&lt;/span&gt;&lt;span&gt; cgo traceback context&lt;/span&gt;
   labels         &lt;span&gt;unsafe&lt;/span&gt;.Pointer &lt;span&gt;//&lt;/span&gt;&lt;span&gt; profiler labels&lt;/span&gt;
   timer          *timer         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; cached timer for time.Sleep&lt;/span&gt;
&lt;span&gt;   gcAssistBytes int64
}&lt;br/&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;go func()到底做了什么？&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;对应函数runtime.newproc&lt;/p&gt;
&lt;p&gt;1：从执行当前方法的G所在P的空闲G列表中取一个G，如果没有就从全局list中取一个，毕竟G还是经常使用，用完的G并不是马上释放，而是放回P的空闲列表中反复利用，如果还是没有空闲的G，就new一个malg(2048)，G的栈大小为2K&lt;/p&gt;
&lt;p&gt;2：如果有参数会将参数拷贝到G的栈上，将G状态改成可运行状态&lt;/p&gt;
&lt;p&gt;3：如果P的G队列没满，将G加入队尾&lt;/p&gt;
&lt;p&gt;4：如果P的G队列满了，就取出G队列的前面一半+当前G，共129个G加入全局队列&lt;/p&gt;
&lt;p&gt;加入队列后，等待被调度&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;全局队列G存取&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;G本身有个字段schedlink指向另一个G，天生就是链表的一个节点，全局队列其实就是两个指针，一个指向队首，一个指向队尾，队尾的存在就是方便入队列&lt;/p&gt;
&lt;p&gt;入全局队列：前面说过将P中的一半+1个G(129)加入全局队列，并不是一个个入队列，而是将这个129个G的首接入全局队列的尾，将全局队列的尾改成这129个G的尾&lt;/p&gt;
&lt;p&gt;出全局队列：当系统开始调度的时候，会从P本地G队列取一个可用G执行，如果没有，则从全局队列中取，最多取128个，返回第一个用于执行，剩余的存入本地G队列中，毕竟操作本地队列不用加锁，操作全局队列需要加锁&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;findrunnable查找可执行的G&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1：本地队列：从M对应的P的G队列中找(runqget)，队列不为空，返回对列首个元素，对首指针指向下一个元素，当对首和对尾指向同一个元素时表示队列为空，访问本地队列中的G不需要加锁&lt;/p&gt;
&lt;p&gt;2：全局队列：从全局队列中找(globrunqget)，从全局队列中取G不是一次取一个，毕竟访问全局队列是要加锁的，所以全局队列有多少取多少，最多取P队列容量一半128个，将这些G存入P的G队列中&lt;/p&gt;
&lt;p&gt;3：⽹络任务（netpoll）&lt;/p&gt;
&lt;p&gt;4：从其他P任务队列取，拿一半&lt;/p&gt;
&lt;p&gt;所有目的就是多核齐心协力以最快的速度完成任务，总不能出现某个P的本地队列还有多个人，其他P都在睡大觉吧，最后如果还是没找到一个可用的G，那就大家一起睡大觉，等着被叫醒&lt;/p&gt;
&lt;div readability=&quot;9&quot;&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
type p &lt;span&gt;struct&lt;/span&gt;&lt;span&gt; {
   &lt;/span&gt;&lt;span&gt;lock&lt;/span&gt;&lt;span&gt; mutex
   id          int32
   status      uint32 &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; one of pidle/prunning/...&lt;/span&gt;
&lt;span&gt;   link        puintptr
   schedtick   uint32     &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; incremented on every scheduler call&lt;/span&gt;
   syscalltick uint32     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; incremented on every system call&lt;/span&gt;
   sysmontick  sysmontick &lt;span&gt;//&lt;/span&gt;&lt;span&gt; last tick observed by sysmon&lt;/span&gt;
   m           muintptr   &lt;span&gt;//&lt;/span&gt;&lt;span&gt; back-link to associated m (nil if idle)&lt;/span&gt;
   mcache      *mcache    &lt;span&gt;//&lt;/span&gt;&lt;span&gt;方便小对象的分配，一个p一个，不需要加锁&lt;/span&gt;
&lt;span&gt;   racectx     uintptr
   deferpool    [&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;][]*_defer &lt;span&gt;//&lt;/span&gt;&lt;span&gt; pool of available defer structs of different sizes (see panic.go)&lt;/span&gt;
   deferpoolbuf [&lt;span&gt;5&lt;/span&gt;][&lt;span&gt;32&lt;/span&gt;]*&lt;span&gt;_defer
   &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Cache of goroutine ids, amortizes accesses to runtime·sched.goidgen.&lt;/span&gt;
&lt;span&gt;   goidcache    uint64
   goidcacheend uint64
   &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Queue of runnable goroutines. Accessed without lock.&lt;/span&gt;
   runqhead uint32         &lt;span&gt;//&lt;/span&gt;&lt;span&gt;队头&lt;/span&gt;
   runqtail uint32         &lt;span&gt;//&lt;/span&gt;&lt;span&gt;队尾&lt;/span&gt;
   runq     [&lt;span&gt;256&lt;/span&gt;]guintptr  &lt;span&gt;//&lt;/span&gt;&lt;span&gt;G循环队列&lt;/span&gt;
   runnext guintptr        &lt;span&gt;//&lt;/span&gt;&lt;span&gt;高优先级的G，会先执行
   &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Available G's (status == Gdead)&lt;/span&gt;
   gfree    *g             &lt;span&gt;//&lt;/span&gt;&lt;span&gt;空闲G列表&lt;/span&gt;
   gfreecnt int32          &lt;span&gt;//&lt;/span&gt;&lt;span&gt;空闲G数量&lt;/span&gt;
   sudogcache []*&lt;span&gt;sudog
   sudogbuf   [&lt;/span&gt;&lt;span&gt;128&lt;/span&gt;]*&lt;span&gt;sudog
   tracebuf traceBufPtr
   &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; traceSweep indicates the sweep events should be traced.
   &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; This is used to defer the sweep start event until a span
   &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; has actually been swept.&lt;/span&gt;
   traceSweep &lt;span&gt;bool&lt;/span&gt;
   &lt;span&gt;//&lt;/span&gt;&lt;span&gt; traceSwept and traceReclaimed track the number of bytes
   &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; swept and reclaimed by sweeping in the current sweep loop.&lt;/span&gt;
&lt;span&gt;   traceSwept, traceReclaimed uintptr
   palloc persistentAlloc &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; per-P to avoid mutex
   &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Per-P GC state&lt;/span&gt;
   gcAssistTime     int64 &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Nanoseconds in assistAlloc&lt;/span&gt;
&lt;span&gt;   gcBgMarkWorker   guintptr
   gcMarkWorkerMode gcMarkWorkerMode
   gcw gcWork
   runSafePointFn uint32 &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; if 1, run sched.safePointFn at next safe point&lt;/span&gt;
   pad [sys.CacheLineSize]&lt;span&gt;byte&lt;/span&gt;&lt;span&gt;
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;永远不会退出的调度(schedule)&lt;/p&gt;
&lt;p&gt;当一个G执行完成后，会继续调用调度函数schedule，死循环就产生了&lt;/p&gt;
&lt;div readability=&quot;8&quot;&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt; goexit continuation on g0.&lt;/span&gt;
func goexit0(gp *&lt;span&gt;g) {
   _g_ :&lt;/span&gt;=&lt;span&gt; getg()
   casgstatus(gp, _Grunning, _Gdead)
   dropg()
   _g_.m.locked &lt;/span&gt;= &lt;span&gt;0&lt;/span&gt;&lt;span&gt;
   gfput(_g_.m.p.ptr(), gp)
   schedule()
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;整体执行流程&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;mstart() =&amp;gt; schedule() =&amp;gt; findrunnable() =&amp;gt; execute() =&amp;gt; func() =&amp;gt; goexit() =&amp;gt; schedule()&lt;/p&gt;
&lt;p&gt;M就绪  =&amp;gt;调度 =&amp;gt; 查找可调度G =&amp;gt; 执行G =&amp;gt; 具体方法 =&amp;gt; 执行完成 =&amp;gt; 继续调度&lt;/p&gt;
&lt;p&gt;入口函数是 _rt0_amd64_linux，需要说明的是，不同平台的入口函数名称会有所不同，该方法会调用runtime.rt0_go汇编。&lt;/p&gt;
&lt;p&gt;rt0_go 做了大量的初始化工作，runtime.args 读取命令行参数、runtime.osinit 读取 CPU 数目，runtime.schedinit初始化Processor数目，最大的Machine数目等等。&lt;/p&gt;

&lt;p&gt;除此之外，我们还看到了两个奇怪的 g0 和 m0 变量。m0 Machine 代表着当前初始化线程，而 g0 代表着初始化线程 m0 的 system stack，似乎还缺一个 p0 ？&lt;/p&gt;
&lt;p&gt;实际上所有的 Processor 都会放到 allp 里。runtime.schedinit 会在调用 procresize 时为 m0 分配上 allp[0] 。所以到目前为止，初始化线程运行模式是符合上文提到的 G/P/M 模型的。&lt;/p&gt;

&lt;p&gt;大量的初始化工作做完之后，会调用 runtime.newproc 为 mainPC 方法生成一个 Goroutine。 虽然 mainPC 并不是我们平时写的那个 main 函数，但是它会调用我们写的 main 函数，所以 main 函数是会以 Goroutine 的形式运行。&lt;/p&gt;
&lt;div readability=&quot;19&quot;&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;58&quot;&gt;
&lt;pre&gt;
TEXT _rt0_amd64_linux(SB),NOSPLIT,$-&lt;span&gt;8&lt;/span&gt;&lt;span&gt;
   LEAQ   &lt;/span&gt;&lt;span&gt;8&lt;/span&gt;(SP), SI &lt;span&gt;//&lt;/span&gt;&lt;span&gt; argv&lt;/span&gt;
   MOVQ   &lt;span&gt;0&lt;/span&gt;(SP), DI &lt;span&gt;//&lt;/span&gt;&lt;span&gt; argc&lt;/span&gt;
&lt;span&gt;   MOVQ   $main(SB), AX
   JMP    AX
 
TEXT main(SB),NOSPLIT,$&lt;/span&gt;-&lt;span&gt;8&lt;/span&gt;&lt;span&gt;
   MOVQ   $runtime·rt0_go(SB), AX
   JMP    AX
 
TEXT runtime·rt0_go(SB),NOSPLIT,$&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;
   LEAQ   runtime·g0(SB), CX
   MOVQ   CX, g(BX)
   LEAQ   runtime·m0(SB), AX
 
   &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; save m-&amp;gt;g0 = g0&lt;/span&gt;
&lt;span&gt;   MOVQ   CX, m_g0(AX)
   &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; save m0 to g0-&amp;gt;m&lt;/span&gt;
&lt;span&gt;   MOVQ   AX, g_m(CX)
   CALL   runtime·args(SB)
   CALL   runtime·osinit(SB)  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;获取cpu数量，页大小&lt;/span&gt;
   CALL   runtime·schedinit(SB) &lt;span&gt;//&lt;/span&gt;&lt;span&gt;调度初始化
   &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; create a new goroutine to start program&lt;/span&gt;
   MOVQ   $runtime·mainPC(SB), AX       &lt;span&gt;//&lt;/span&gt;&lt;span&gt; entry,执行runtime.main&lt;/span&gt;
&lt;span&gt;   CALL   runtime·newproc(SB)
   &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; start this M&lt;/span&gt;
&lt;span&gt;   CALL   runtime·mstart(SB)
 
   MOVL   $&lt;/span&gt;&lt;span&gt;0xf1&lt;/span&gt;, &lt;span&gt;0xf1&lt;/span&gt;  &lt;span&gt;//&lt;/span&gt;&lt;span&gt; crash&lt;/span&gt;
&lt;span&gt;   RET
 
DATA   runtime·mainPC&lt;/span&gt;+&lt;span&gt;0&lt;/span&gt;(SB)/&lt;span&gt;8&lt;/span&gt;&lt;span&gt;,$runtime·main(SB)
GLOBL  runtime·mainPC(SB),RODATA,$&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;&lt;span&gt;
 
package runtime
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; The main goroutine.&lt;/span&gt;
&lt;span&gt;func main() {
   &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Allow newproc to start new Ms.&lt;/span&gt;
   mainStarted = &lt;span&gt;true&lt;/span&gt;&lt;span&gt;
   gcenable()
   fn :&lt;/span&gt;= main_init &lt;span&gt;//&lt;/span&gt;&lt;span&gt; make an indirect call, as the linker doesn't know the address of the main package when laying down the runtime&lt;/span&gt;
&lt;span&gt;   fn()
   fn &lt;/span&gt;= main_main &lt;span&gt;//&lt;/span&gt;&lt;span&gt; make an indirect call, as the linker doesn't know the address of the main package when laying down the runtime&lt;/span&gt;
&lt;span&gt;   fn()
   exit(&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;)
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;p&gt;参考&lt;/p&gt;




</description>
<pubDate>Tue, 15 Jan 2019 12:41:00 +0000</pubDate>
<dc:creator>啊汉</dc:creator>
<og:description>go并发调度模型如上图 M指的是Machine，一个M直接关联了一个线程。 P指的是Processor，代表了M所需的上下文环境，也是处理用户级代码逻辑的处理器。 G指的是Goroutine，其实本质</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/hlxs/p/10274186.html</dc:identifier>
</item>
<item>
<title>Shiro权限验证详细教程 - 裘建锋</title>
<link>http://www.cnblogs.com/qiujianfeng/p/10274161.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/qiujianfeng/p/10274161.html</guid>
<description>&lt;h2&gt;1、可从本教程中明白以下几个知识点：&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;认识Shiro的整体架构和各组件的概念；&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Shiro认证、授权过程；&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Shiro自定义Realm.&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;span&gt;2、Shiro简介&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;Shiro是Apache强大灵活的开源的安全框架，有认证、授权、企业会话管理、安全加密、缓存管理等功能。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Shiro和Spring Security相比较；Shiro更加简单方便、并且可脱离Spring,Spring Security比较笨重复杂，不可脱离Spring。&lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;3、Shiro架构图&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1539441/201901/1539441-20190115150005885-435298835.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;详细图如上面所示：在这里就不介绍具体每个组件了，我会在以下4个实例代码中详细说明；&lt;/p&gt;
&lt;h2&gt;4、项目中用到的依赖：&lt;/h2&gt;
&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1539441/201901/1539441-20190115200937287-1639761783.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;添加完依赖，以下所有实例都可以直接运行。&lt;/span&gt;&lt;/p&gt;


&lt;h2&gt;1、Shiro认证/授权过程：代码有详解&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;认证原理：创建SecurityManager----&amp;gt;主体提交认证请求-----&amp;gt;提交到SecurityManager认证----&amp;gt;SecurityManager认证是由Authenticator进行认证----&amp;gt;Authenticator认证需要通过Realm验证用户数据。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;授权原理：创建SecurityManager----&amp;gt;主体授权----&amp;gt;提交到SecurityManager授权----&amp;gt;SecurityManager授权是有Authorizer进行授权----&amp;gt;Realm获取角色权限数据&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; AuthenticationTest {
    SimpleAccountRealm simpleAccountRealm&lt;/span&gt;=&lt;span&gt;new&lt;/span&gt;&lt;span&gt; SimpleAccountRealm();
    @Before
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; getAccount()
    {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;方便测试  新增用户和角色权限&lt;/span&gt;
        simpleAccountRealm.addAccount(&quot;quentin&quot;,&quot;123456&quot;,&quot;admin&quot;&lt;span&gt;);
    }
    @Test
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; AuthenticationTest()
    {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;1、创建SecurtyManager&lt;/span&gt;
        DefaultSecurityManager defaultSecurityManager=&lt;span&gt;new&lt;/span&gt;&lt;span&gt; DefaultSecurityManager();
        defaultSecurityManager.setRealm(simpleAccountRealm);

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;2、主体认证/授权&lt;/span&gt;
&lt;span&gt;        SecurityUtils.setSecurityManager(defaultSecurityManager);
        Subject subject&lt;/span&gt;=SecurityUtils.getSubject();&lt;span&gt;//&lt;/span&gt;&lt;span&gt;获得当前正在执行程序的用户&lt;/span&gt;
&lt;span&gt;
        UsernamePasswordToken usernamePasswordToken&lt;/span&gt;=&lt;span&gt;new&lt;/span&gt; UsernamePasswordToken(&quot;quentin&quot;,&quot;123456&quot;&lt;span&gt;);
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;3、login()主体认证请求，里面封装好的不用管，它是由SecurityManager认证-&amp;gt;Authenticate认证-&amp;gt;Realm验证组成，这样就可以实现认证。&lt;/span&gt;
&lt;span&gt;        subject.login(usernamePasswordToken);
        System.out.println(&lt;/span&gt;&quot;isAuthen:&quot;+&lt;span&gt;subject.isAuthenticated());
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;3、checkRole()主体授权请求，里面封装好的不用管，它是由SecurityManager授权-&amp;gt;Authenticate授权-&amp;gt;Realm获取角色权限组成，这样就可以实现授权功能。&lt;/span&gt;
        subject.checkRole(&quot;admin&quot;&lt;span&gt;);
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;运行结果：&lt;/p&gt;
&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1539441/201901/1539441-20190115162203942-1946824850.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;当验证不通过会抛出异常，没有权限也会抛出异常！！&lt;/p&gt;
&lt;p&gt;&lt;strong&gt; 所以，总结一下整个流程，以认证为例：就是在我们调用Subject的login()方法之后，可以看到我传入的是用户的token(里面的实际原理不用管，其实就是第一第二步它经历过一系列的步骤，它调用了Realm中的doGetAuthenticationInfo(token)方法)。&lt;/strong&gt;&lt;/p&gt;


&lt;p&gt;&lt;strong&gt; 介绍：通过加载&lt;code&gt;.ini&lt;/code&gt;文件生成&lt;code&gt;realm&lt;/code&gt;对象来验证&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1、在resourses中建立user.ini文件，内容如下：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;[users]
quentin&lt;/span&gt;=123456&lt;span&gt;,admin
[roles]
admin&lt;/span&gt;=user:delete,user:update
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;设置用户名&quot;quentin&quot;，密码是&quot;123456&quot;，“admin”角色，&quot;admin&quot;拥有“user:delete、user:update”权限。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;2、实例文件代码如下：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; IniRealmTest {

    @Test
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; IniRealmTest()
    {
        IniRealm iniRealm&lt;/span&gt;=&lt;span&gt;new&lt;/span&gt; IniRealm(&quot;classpath:user.ini&quot;);  &lt;span&gt;//&lt;/span&gt;&lt;span&gt;配置user.ini文件（账号和权限等信息）

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;1、创建SecurtyManager&lt;/span&gt;
        DefaultSecurityManager defaultSecurityManager=&lt;span&gt;new&lt;/span&gt;&lt;span&gt; DefaultSecurityManager();
        defaultSecurityManager.setRealm(iniRealm);&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;设置Realm

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;2、主体认证/授权请求&lt;/span&gt;
&lt;span&gt;        SecurityUtils.setSecurityManager(defaultSecurityManager);
        Subject subject&lt;/span&gt;=&lt;span&gt;SecurityUtils.getSubject();

        UsernamePasswordToken usernamePasswordToken&lt;/span&gt;=&lt;span&gt;new&lt;/span&gt; UsernamePasswordToken(&quot;quentin&quot;,&quot;123456&quot;&lt;span&gt;);
        subject.login(usernamePasswordToken);
        System.out.println(&lt;/span&gt;&quot;isAuth:&quot;+subject.isAuthenticated());&lt;span&gt;//&lt;/span&gt;&lt;span&gt;是否认证

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;判断是否授权等&lt;/span&gt;
        subject.checkRole(&quot;admin&quot;);&lt;span&gt;//&lt;/span&gt;&lt;span&gt;是否有角色权限&lt;/span&gt;
        subject.checkPermission(&quot;user:delete&quot;);&lt;span&gt;//&lt;/span&gt;&lt;span&gt;是否有删除权限&lt;/span&gt;
&lt;span&gt;    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;运行结果：&lt;/p&gt;
&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1539441/201901/1539441-20190115200244036-1548105317.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;说明认证通过（用户名密码正确），但是跑出没有权限异常（因为admin没有user:deleteall全选）。&lt;/p&gt;


&lt;p&gt;&lt;strong&gt;  介绍：通过获取数据库用户数据来验证&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1、实例代码如下：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; JdbcRealmTest {

    DruidDataSource dataSource&lt;/span&gt;=&lt;span&gt;new&lt;/span&gt;&lt;span&gt; DruidDataSource();
    {
        dataSource.setUrl(&lt;/span&gt;&quot;jdbc:mysql://10.0.92.23:3306/test&quot;&lt;span&gt;);
        dataSource.setUsername(&lt;/span&gt;&quot;root&quot;&lt;span&gt;);
        dataSource.setPassword(&lt;/span&gt;&quot;123&quot;&lt;span&gt;);
    }

    @Test
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; JdbcRealmTest()
    {
        JdbcRealm jdbcRealm&lt;/span&gt;=&lt;span&gt;new&lt;/span&gt;&lt;span&gt; JdbcRealm();
        jdbcRealm.setDataSource(dataSource);

        String sql&lt;/span&gt;=&quot;select password from user where name=?&quot;&lt;span&gt;;
        jdbcRealm.setAuthenticationQuery(sql);    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;查询认证语句&lt;/span&gt;
        String sqlrole=&quot;select rolename from role where name=?&quot;&lt;span&gt;;
        jdbcRealm.setUserRolesQuery(sqlrole);     &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;查询角色权限语句

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;1、创建SecurtyManager&lt;/span&gt;
        DefaultSecurityManager defaultSecurityManager=&lt;span&gt;new&lt;/span&gt;&lt;span&gt; DefaultSecurityManager();
        defaultSecurityManager.setRealm(jdbcRealm);

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;2、主体认证/授权请求&lt;/span&gt;
&lt;span&gt;        SecurityUtils.setSecurityManager(defaultSecurityManager);
        Subject subject&lt;/span&gt;=&lt;span&gt;SecurityUtils.getSubject();

        UsernamePasswordToken usernamePasswordToken&lt;/span&gt;=&lt;span&gt;new&lt;/span&gt; UsernamePasswordToken(&quot;aaa&quot;,&quot;dfdf&quot;&lt;span&gt;);
        subject.login(usernamePasswordToken);

        System.out.println(&lt;/span&gt;&quot;isAuth:&quot;+subject.isAuthenticated());&lt;span&gt;//&lt;/span&gt;&lt;span&gt;判断是有认证&lt;/span&gt;
&lt;span&gt;
        subject.checkRole(&lt;/span&gt;&quot;admin&quot;);&lt;span&gt;//&lt;/span&gt;&lt;span&gt;是否有权限&lt;/span&gt;
&lt;span&gt;    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt; &lt;span&gt;运行结果也一样就不演示了。其实JdbcRealm里面也提供了默认的sql语句，但是考虑到查询不一样，所以需要单独编写。&lt;/span&gt;&lt;/p&gt;


&lt;p&gt;&lt;span&gt;1、自定义Realm，分为&lt;/span&gt;doGetAuthenticationInfo()认证 和 doGetAuthorizationInfo()授权信息两部分，注意代码注释：&lt;/p&gt;
&lt;p&gt;&lt;span&gt;代码如下：&lt;/span&gt;&lt;/p&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;42&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt;自定义Realm，代码如下：&lt;/span&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; CustomerRealm &lt;span&gt;extends&lt;/span&gt;&lt;span&gt; AuthorizingRealm {

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;继承父类AuthorizingRealm将获取Subject相关信息分成两步：获取身份验证信息（doGetAuthenticationInfo）及授权信息（doGetAuthorizationInfo）；

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 原理！！！！！！！！！&lt;/span&gt;
    &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; doGetAuthenticationInfo获取身份验证相关信息：首先根据传入的用户名获取User信息；
    * 然后如果user为空，那么抛出没找到帐号异常UnknownAccountException；如果user找到但锁定了抛出锁定异常LockedAccountException；
    * 最后生成AuthenticationInfo信息，交给间接父类AuthenticatingRealm使用CredentialsMatcher进行判断密码是否匹配，如果不匹配将抛出密码错误异常IncorrectCredentialsException；
    * 另外如果密码重试此处太多将抛出超出重试次数异常ExcessiveAttemptsException；
    * 在组装SimpleAuthenticationInfo信息时，需要传入：身份信息（用户名）、凭据（密文密码）、盐（username+salt），CredentialsMatcher使用盐加密传入的明文密码和此处的密文密码进行匹配。
    * &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;&lt;span&gt;

    @Override
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;用于当前用户验证。认证login()方法执行会自动调用&lt;/span&gt;
    &lt;span&gt;protected&lt;/span&gt; AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken token) &lt;span&gt;throws&lt;/span&gt;&lt;span&gt; AuthenticationException {

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;1、从主体传过来的认证信息中，获取用户名&lt;/span&gt;
        String UserName=(String)token.getPrincipal();  &lt;span&gt;//&lt;/span&gt;&lt;span&gt;        getPrincipal();身份 | getCredentials();凭据

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;2、通过用户名从数据库中获取密码凭证&lt;/span&gt;
        String Password=&lt;span&gt;getPasswordByUsername(UserName);
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;(Password==&lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
        {
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
        }
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;组装SimpleAuthenticationInfo信息，（用户名、密文密码、盐）&lt;/span&gt;
        SimpleAuthenticationInfo simpleAuthenticationInfo=&lt;span&gt;new&lt;/span&gt; SimpleAuthenticationInfo(&quot;quentin&quot;,Password,&quot;customerReal&quot;&lt;span&gt;);
        simpleAuthenticationInfo.setCredentialsSalt(ByteSource.Util.bytes(&lt;/span&gt;&quot;salt&quot;));  &lt;span&gt;//&lt;/span&gt;&lt;span&gt;将盐注册到信息中去&lt;/span&gt;

        &lt;span&gt;return&lt;/span&gt;&lt;span&gt; simpleAuthenticationInfo;
    }

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;方便测试 设置用户数据&lt;/span&gt;
    Map&amp;lt;String,String&amp;gt; userMap=&lt;span&gt;new&lt;/span&gt; HashMap&amp;lt;String, String&amp;gt;(16&lt;span&gt;);
    {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;将带盐&quot;salt&quot;也一起加密&lt;/span&gt;
        Md5Hash passMD5=&lt;span&gt;new&lt;/span&gt; Md5Hash(&quot;123456&quot;,&quot;salt&quot;&lt;span&gt;);
        userMap.put(&lt;/span&gt;&quot;quentin&quot;&lt;span&gt;,passMD5.toString());
        &lt;/span&gt;&lt;span&gt;super&lt;/span&gt;.setName(&quot;customerReal&quot;&lt;span&gt;);
    }
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; String getPasswordByUsername(String userName) {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; userMap.get(userName);
    }

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;----------------------------------------------------------------以上是认证，以下是授权------------------------------------------------------------------------------------------------------

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;doGetAuthorizationInfo获取授权信息：PrincipalCollection是一个身份集合，因为我们现在就一个Realm，所以直接调用getPrimaryPrincipal得到之前传入的用户名即可；
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 然后根据用户名调用UserService接口获取角色及权限信息。&lt;/span&gt;
&lt;span&gt;
    @Override
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;用于当前登录用户授权,用户的角色与权限初始化，授权会自动调用&lt;/span&gt;
    &lt;span&gt;protected&lt;/span&gt;&lt;span&gt; AuthorizationInfo doGetAuthorizationInfo(PrincipalCollection principals) {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;获取用户名&lt;/span&gt;
        String UserName=(String)principals.getPrimaryPrincipal();  &lt;span&gt;//&lt;/span&gt;&lt;span&gt;getPrimaryPrincipal()得到主要的身份  Set&amp;lt;String&amp;gt; getRealmNames(); &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;获取所有身份验证通过的Realm名字

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;获取角色和权限信息（一般从数据库或缓存中获取）&lt;/span&gt;
        Set&amp;lt;String&amp;gt; setRoles=&lt;span&gt;getRolesByUserName();
        Set&lt;/span&gt;&amp;lt;String&amp;gt; setPression=&lt;span&gt;getPressionByUserName();

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;设置SimpleAuthorizationInfo信息，（角色和权限）&lt;/span&gt;
        SimpleAuthorizationInfo simpleAuthorizationInfo=&lt;span&gt;new&lt;/span&gt;&lt;span&gt; SimpleAuthorizationInfo();
        simpleAuthorizationInfo.setRoles(setRoles);
        simpleAuthorizationInfo.setStringPermissions(setPression);
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; simpleAuthorizationInfo;
    }

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;方便测试  设置用户权限数据&lt;/span&gt;
    &lt;span&gt;private&lt;/span&gt; Set&amp;lt;String&amp;gt;&lt;span&gt; getPressionByUserName() {
        Set&lt;/span&gt;&amp;lt;String&amp;gt; sets=&lt;span&gt;new&lt;/span&gt; HashSet&amp;lt;String&amp;gt;&lt;span&gt;();
        sets.add(&lt;/span&gt;&quot;user:add&quot;&lt;span&gt;);
        sets.add(&lt;/span&gt;&quot;user:delete&quot;&lt;span&gt;);
        sets.add(&lt;/span&gt;&quot;user:select&quot;&lt;span&gt;);
        sets.add(&lt;/span&gt;&quot;admin:select&quot;&lt;span&gt;);
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; sets;
    }

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;方便测试  设置用户角色数据&lt;/span&gt;
    &lt;span&gt;private&lt;/span&gt; Set&amp;lt;String&amp;gt;&lt;span&gt; getRolesByUserName() {
        Set&lt;/span&gt;&amp;lt;String&amp;gt; sets=&lt;span&gt;new&lt;/span&gt; HashSet&amp;lt;String&amp;gt;&lt;span&gt;();
        sets.add(&lt;/span&gt;&quot;admin&quot;&lt;span&gt;);
        sets.add(&lt;/span&gt;&quot;user&quot;&lt;span&gt;);
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; sets;
    }

}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;2、实例运行代码如下：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; CustomerRealmTest {

    @Test
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; CustomerRealmTest()
    {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;引入自定义Realm&lt;/span&gt;
        CustomerRealm customerRealm=&lt;span&gt;new&lt;/span&gt;&lt;span&gt; CustomerRealm();

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;创建DefaultSecurityManager&lt;/span&gt;
        DefaultSecurityManager defaultSecurityManager=&lt;span&gt;new&lt;/span&gt;&lt;span&gt; DefaultSecurityManager();
        defaultSecurityManager.setRealm(customerRealm);

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;设置算法名称和加密次数&lt;/span&gt;
        HashedCredentialsMatcher matcher=&lt;span&gt;new&lt;/span&gt;&lt;span&gt; HashedCredentialsMatcher();
        matcher.setHashAlgorithmName(&lt;/span&gt;&quot;md5&quot;&lt;span&gt;);
        matcher.setHashIterations(&lt;/span&gt;1&lt;span&gt;);
        customerRealm.setCredentialsMatcher(matcher);

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;主体认证，得到SecurityManager实例 并绑定给SecurityUtils&lt;/span&gt;
&lt;span&gt;        SecurityUtils.setSecurityManager(defaultSecurityManager);

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;得到Subject及创建用户名/密码身份验证Token（即用户身份/凭证）&lt;/span&gt;
        Subject subject=&lt;span&gt;SecurityUtils.getSubject();
        UsernamePasswordToken usernamePasswordToken&lt;/span&gt;=&lt;span&gt;new&lt;/span&gt; UsernamePasswordToken(&quot;quentin&quot;,&quot;123456&quot;&lt;span&gt;);

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;登录，即身份验证&lt;/span&gt;
&lt;span&gt;        subject.login(usernamePasswordToken);
        System.out.println(&lt;/span&gt;&quot;isAuth:&quot;+&lt;span&gt;subject.isAuthenticated());

        subject.checkRole(&lt;/span&gt;&quot;admin&quot;&lt;span&gt;);
        subject.checkPermission(&lt;/span&gt;&quot;admin:select&quot;&lt;span&gt;);

    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;运行结果：&lt;/p&gt;
&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1539441/201901/1539441-20190115202555711-1162108609.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;单独解释下Shiro加密：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;在自定义Realm文件中&lt;/p&gt;
&lt;pre&gt;
&lt;span&gt;Md5Hash passMD5=new Md5Hash(&quot;123456&quot;,&quot;salt&quot;&lt;span&gt;);
userMap.put(&quot;quentin&quot;&lt;span&gt;,passMD5.toString());&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;pre&gt;
//由上面代码也能看到解释，其实就是将带盐&quot;salt&quot;也一起加密，作为身份验证的密码信息&lt;br/&gt;+
&lt;/pre&gt;
&lt;pre readability=&quot;6&quot;&gt;
simpleAuthenticationInfo.setCredentialsSalt(ByteSource.Util.bytes(&quot;salt&quot;));  //将盐注册到信息中去&lt;br/&gt;//将盐&quot;salt&quot;注册到信息中去验证&lt;br/&gt;=&lt;br/&gt;这样就更加安全。&lt;p&gt;&lt;span&gt;通过上面4个实例，动手敲一敲，相信你们都能快速了解Shiro认证授权原理了。&lt;/span&gt;
&lt;/p&gt;&lt;/pre&gt;
&lt;pre&gt;
&lt;span&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;

</description>
<pubDate>Tue, 15 Jan 2019 12:35:00 +0000</pubDate>
<dc:creator>裘建锋</dc:creator>
<og:description>一、Shiro介绍 1、可从本教程中明白以下几个知识点： 认识Shiro的整体架构和各组件的概念； Shiro认证、授权过程； Shiro自定义Realm. 2、Shiro简介 Shiro是Apach</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/qiujianfeng/p/10274161.html</dc:identifier>
</item>
<item>
<title>springcloud情操陶冶-springcloud context(二) - 南柯问天</title>
<link>http://www.cnblogs.com/question-sky/p/10273939.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/question-sky/p/10273939.html</guid>
<description>&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;承接前文对bootstrapContext创建的引导，笔者了解到其主要入口类为BootstrapImportSelectorConfiguration。本文将基于此类进行简单的分析&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;bootstrapimportselectorconfiguration&quot;&gt;BootstrapImportSelectorConfiguration&lt;/h3&gt;
&lt;p&gt;简单的配置类，看下源码&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;@Configuration
@Import(BootstrapImportSelector.class)
public class BootstrapImportSelectorConfiguration {
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;嗯，引入了延迟加载类&lt;em&gt;BootstrapImportSelector&lt;/em&gt;，那笔者就继续往下看下此会延迟加载哪些类，直接去观察其主方法&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;    @Override
    public String[] selectImports(AnnotationMetadata annotationMetadata) {
        ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
        // Use names and ensure unique to protect against duplicates
        List&amp;lt;String&amp;gt; names = new ArrayList&amp;lt;&amp;gt;(SpringFactoriesLoader
                .loadFactoryNames(BootstrapConfiguration.class, classLoader));
        names.addAll(Arrays.asList(StringUtils.commaDelimitedListToStringArray(
                environment.getProperty(&quot;spring.cloud.bootstrap.sources&quot;, &quot;&quot;))));

        List&amp;lt;OrderedAnnotatedElement&amp;gt; elements = new ArrayList&amp;lt;&amp;gt;();
        for (String name : names) {
            try {
                elements.add(new OrderedAnnotatedElement(metadataReaderFactory, name));
            } catch (IOException e) {
                continue;
            }
        }
        AnnotationAwareOrderComparator.sort(elements);

        String[] classNames = elements.stream()
                .map(e -&amp;gt; e.name)
                .toArray(String[]::new);

        return classNames;
    }&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;上述的代码很简单，其会去加载classpath路径下&lt;em&gt;spring.factories&lt;/em&gt;文件中以&lt;strong&gt;org.springframework.cloud.bootstrap.BootstrapConfiguration&lt;/strong&gt;作为Key的所有类；&lt;br/&gt;同时springcloud也支持通过设置&lt;em&gt;spring.cloud.bootstrap.sources&lt;/em&gt;属性来加载指定类&lt;/p&gt;
&lt;p&gt;笔者就先以springcloud context板块内的&lt;em&gt;spring.factories&lt;/em&gt;作为分析的源头&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;# Bootstrap components
org.springframework.cloud.bootstrap.BootstrapConfiguration=\
org.springframework.cloud.bootstrap.config.PropertySourceBootstrapConfiguration,\
org.springframework.cloud.bootstrap.encrypt.EncryptionBootstrapConfiguration,\
org.springframework.cloud.autoconfigure.ConfigurationPropertiesRebinderAutoConfiguration,\
org.springframework.boot.autoconfigure.context.PropertyPlaceholderAutoConfiguration&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;在分析上述的源码之前，笔者必须得清楚现在bootstrapContext加载的配置文件默认为bootstrap.properties抑或是bootstrap.yml。基于此我们再往下走，以免犯糊涂&lt;/p&gt;
&lt;h4 id=&quot;propertysourcebootstrapconfiguration&quot;&gt;PropertySourceBootstrapConfiguration&lt;/h4&gt;
&lt;p&gt;配置源的加载，此Configuration主要用于确定是否外部加载的配置属性复写Spring内含的环境变量。注意其是&lt;em&gt;ApplicationContextInitializer&lt;/em&gt;接口的实现类，前文已经提到，bootstrapContext上的此接口的bean类都会被注册至子级的SpringApplication对象上。&lt;br/&gt;直接看下主要的代码片段把&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;    @Override
    public void initialize(ConfigurableApplicationContext applicationContext) {
        CompositePropertySource composite = new CompositePropertySource(
                BOOTSTRAP_PROPERTY_SOURCE_NAME);
        AnnotationAwareOrderComparator.sort(this.propertySourceLocators);
        boolean empty = true;
        // 此处为子级的环境变量对象
        ConfigurableEnvironment environment = applicationContext.getEnvironment();
        // 通过PropertySourceLocator接口去加载外部配置
        for (PropertySourceLocator locator : this.propertySourceLocators) {
            PropertySource&amp;lt;?&amp;gt; source = null;
            source = locator.locate(environment);
            if (source == null) {
                continue;
            }
            logger.info(&quot;Located property source: &quot; + source);
            composite.addPropertySource(source);
            empty = false;
        }
        if (!empty) {
            MutablePropertySources propertySources = environment.getPropertySources();
            String logConfig = environment.resolvePlaceholders(&quot;${logging.config:}&quot;);
            LogFile logFile = LogFile.get(environment);
            if (propertySources.contains(BOOTSTRAP_PROPERTY_SOURCE_NAME)) {
                propertySources.remove(BOOTSTRAP_PROPERTY_SOURCE_NAME);
            }
            // 确定属性读取的先后顺序
            insertPropertySources(propertySources, composite);
            // reinitialize log
            reinitializeLoggingSystem(environment, logConfig, logFile);
            setLogLevels(applicationContext, environment);
            // active profiles process
            handleIncludedProfiles(environment);
        }
    }&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;上述的代码就涉及两点，一个是通过&lt;em&gt;PropertySourceLocator&lt;/em&gt;接口加载外部配置；一个是用于解析以&lt;em&gt;spring.cloud.config&lt;/em&gt;为开头的&lt;strong&gt;PropertySourceBootstrapProperties&lt;/strong&gt;属性，默认情况下，外部配置比内部变量有更高的优先级。具体的用户可自行分析&lt;/p&gt;
&lt;p&gt;备注：&lt;em&gt;PropertiesSourceBootstrapProperties&lt;/em&gt;中的属性变量可通过&lt;strong&gt;系统变量&lt;/strong&gt;抑或是&lt;strong&gt;application.properties&lt;/strong&gt;等文件配置&lt;/p&gt;
&lt;h4 id=&quot;propertyplaceholderautoconfiguration&quot;&gt;PropertyPlaceholderAutoConfiguration&lt;/h4&gt;
&lt;p&gt;和spring常见的解析文件一样的操作，具体就不分析了&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;@Configuration
@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE)
public class PropertyPlaceholderAutoConfiguration {

    // 配置文件属性读取常用类
    @Bean
    @ConditionalOnMissingBean(search = SearchStrategy.CURRENT)
    public static PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderConfigurer() {
        return new PropertySourcesPlaceholderConfigurer();
    }

}&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;configurationpropertiesrebinderautoconfiguration&quot;&gt;ConfigurationPropertiesRebinderAutoConfiguration&lt;/h4&gt;
&lt;p&gt;通过命名便会发现其跟刷新属性的功能有关，先优先看下其类结构&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;@Configuration
@ConditionalOnBean(ConfigurationPropertiesBindingPostProcessor.class)
public class ConfigurationPropertiesRebinderAutoConfiguration
        implements ApplicationContextAware, SmartInitializingSingleton {
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;上述代码表示其依据于当前类环境存在&lt;em&gt;ConfigurationPropertiesBindingPostProcessor&lt;/em&gt;Bean对象才会被应用，仔细查阅了下，发现只要有使用到&lt;strong&gt;@EnableConfigurationProperties&lt;/strong&gt;注解即就会被注册。看来此配置跟&lt;em&gt;ConfigurationProperties&lt;/em&gt;注解也有一定的关联性。&lt;/p&gt;
&lt;p&gt;本文就罗列笔者比较关注的几个地方&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;1.ConfigurationPropertiesRebinder对象的创建&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;    @Bean
    @ConditionalOnMissingBean(search = SearchStrategy.CURRENT)
    public ConfigurationPropertiesRebinder configurationPropertiesRebinder(
            ConfigurationPropertiesBeans beans) {
        ConfigurationPropertiesRebinder rebinder = new ConfigurationPropertiesRebinder(
                beans);
        return rebinder;
    }&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;此类读者可以自行翻阅代码，可以发现其暴露了JMX接口以及监听了springcloud context自定义的&lt;em&gt;EnvironmentChangeEvent&lt;/em&gt;事件。看来其主要用来刷新ApplicationContext上的beans(&lt;strong&gt;含@ConfigurationProperties注解&lt;/strong&gt;)对象集合&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;2.ConfigurationPropertiesBeans对象的创建&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;    @Bean
    @ConditionalOnMissingBean(search = SearchStrategy.CURRENT)
    public ConfigurationPropertiesBeans configurationPropertiesBeans() {
        // 
        ConfigurationBeanFactoryMetadata metaData = this.context.getBean(
                ConfigurationBeanFactoryMetadata.BEAN_NAME,
                        ConfigurationBeanFactoryMetadata.class);
        ConfigurationPropertiesBeans beans = new ConfigurationPropertiesBeans();
        beans.setBeanMetaDataStore(metaData);
        return beans;
    }&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;配合ConfigurationProperties注解的表演，其会缓存ApplicationContext上的所有含有&lt;em&gt;ConfigurationProperties&lt;/em&gt;注解的bean。与第一点所提的&lt;strong&gt;ConfigurationPropertiesRebinder&lt;/strong&gt;对象搭配使用&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;3.实例化结束后刷新父级ApplicationContext上的属性&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;    @Override
    public void afterSingletonsInstantiated() {
        // refresh parent application context
        if (this.context.getParent() != null) {
            // TODO: make this optional? (E.g. when creating child contexts that prefer to
            // be isolated.)
            ConfigurationPropertiesRebinder rebinder = context
                    .getBean(ConfigurationPropertiesRebinder.class);
            for (String name : context.getParent().getBeanDefinitionNames()) {
                rebinder.rebind(name);
            }
        }
    }&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;encryptionbootstrapconfiguration&quot;&gt;EncryptionBootstrapConfiguration&lt;/h4&gt;
&lt;p&gt;与属性读取的加解密有关，跟JDK的keystore也有一定的关联，具体就不去解析了。读者可自行分析&lt;/p&gt;
&lt;h3 id=&quot;其余关联类&quot;&gt;其余关联类&lt;/h3&gt;
&lt;p&gt;比如springcloud config-client模块下的&lt;em&gt;spring.factories&lt;/em&gt;&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;# Bootstrap components
org.springframework.cloud.bootstrap.BootstrapConfiguration=\
org.springframework.cloud.config.client.ConfigServiceBootstrapConfiguration,\
org.springframework.cloud.config.client.DiscoveryClientConfigServiceBootstrapConfiguration&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;和springcloud config-server模块下的&lt;em&gt;spring.factories&lt;/em&gt;&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;# Bootstrap components
org.springframework.cloud.bootstrap.BootstrapConfiguration=\
org.springframework.cloud.config.server.bootstrap.ConfigServerBootstrapConfiguration,\
org.springframework.cloud.config.server.config.EncryptionAutoConfiguration&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;限于本篇幅过长，就不在此讨论server和client模块对bootstrapContext的作用。后文再作详细的讨论&lt;/p&gt;
&lt;h3 id=&quot;小结&quot;&gt;小结&lt;/h3&gt;
&lt;p&gt;1.针对springcloud context模块下的以&lt;strong&gt;BootstrapConfiguration&lt;/strong&gt;作为Key的自动配置类，除了&lt;em&gt;PropertySourceBootstrapConfiguration&lt;/em&gt;自动类的应用范围在子级ApplicationContext，其它三个均有作用于父级ApplicationContext。&lt;/p&gt;
&lt;p&gt;2.关于外部源文件的属性，默认情况下其有更高的优先级于本地系统以及环境变量。当然用户也可以通过修改&lt;em&gt;spring.cloud.config.allowOverride/spring.cloud.config.overrideSystemProperties/spring.cloud.config.overrideNone&lt;/em&gt;属性来进行优先级更改，通过此，用户也可以复写&lt;em&gt;PropertySourceLocator&lt;/em&gt;接口来获取外部源&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;package com.example.cloud.external.resource;

import org.springframework.cloud.bootstrap.config.PropertySourceLocator;
import org.springframework.context.annotation.Configuration;
import org.springframework.core.env.Environment;
import org.springframework.core.env.MapPropertySource;
import org.springframework.core.env.PropertySource;

import java.util.HashMap;
import java.util.Map;

/**
 * @author nanco
 * -------------
 * cloud-demo
 * -------------
 * @create 2019/1/15 19:40
 * @descrption
 **/
@Configuration
public class ExternalPropertySourceLocator implements PropertySourceLocator {

    private static final String EXTERNAL_KEY = &quot;external&quot;;

    @Override
    public PropertySource&amp;lt;?&amp;gt; locate(Environment environment) {
        Map&amp;lt;String, Object&amp;gt; externalMap = new HashMap&amp;lt;&amp;gt;();

        externalMap.put(&quot;username&quot;, &quot;nanco&quot;);
        externalMap.put(&quot;password&quot;, &quot;nanco123&quot;);
        externalMap.put(&quot;mail&quot;, &quot;nancoasky@gmail.com&quot;);

        return new MapPropertySource(EXTERNAL_KEY, externalMap);
    }
}
&lt;/code&gt;
&lt;/pre&gt;</description>
<pubDate>Tue, 15 Jan 2019 11:51:00 +0000</pubDate>
<dc:creator>南柯问天</dc:creator>
<og:description>承接前文对bootstrapContext创建的引导，笔者了解到其主要入口类为BootstrapImportSelectorConfiguration。本文将基于此类进行简单的分析 Bootstrap</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/question-sky/p/10273939.html</dc:identifier>
</item>
</channel>
</rss>