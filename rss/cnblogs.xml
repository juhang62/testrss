<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>åšå®¢å›­_é¦–é¡µ</title>
<link></link>
<description>ä»£ç æ”¹å˜ä¸–ç•Œ</description>
<item>
<title>.NETè¿è¡Œæ—¶ä¸­çš„ç›‘æµ‹å’Œå¯è§‚æµ‹æ€§ - Alin-</title>
<link>http://www.cnblogs.com/WithLin/p/9798485.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/WithLin/p/9798485.html</guid>
<description>&lt;blockquote readability=&quot;6.4235294117647&quot;&gt;
&lt;p&gt;ä»Šå¹´5æœˆä»½çš„æ—¶å€™ç ”ç©¶åˆ†å¸ƒå¼è¿½è¸ªçš„é—®é¢˜çŸ¥é“äº†çš„æ‹¦æˆªæ–¹å¼æ¯”è¾ƒé›¶æ•£ï¼Œ åˆšå¥½8æœˆä»½çš„æ—¶å€™çœ‹åˆ°è¿™ç¯‡æ–‡ç« ï¼Œè¿™ä¸ªæ–‡ç« æ€»ç»“çš„æ¯”è¾ƒå®Œæ•´ã€‚å­˜æ¡£äº†å¾ˆä¹…ï¼Œè¶ä»Šå¤©æœ‰ç©ºç¿»è¯‘ç»™å¤§å®¶ã€‚&lt;a href=&quot;http://mattwarren.org/2018/08/21/Monitoring-and-Observability-in-the-.NET-Runtime/&quot;&gt;åŸæ–‡åœ°å€&lt;/a&gt;ï¼Œæ ¡éªŒï¼š&lt;a href=&quot;https://home.cnblogs.com/u/chenug&quot;&gt;å¼ è˜…æ°´&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;.NETæ˜¯ä¸€ä¸ª&lt;a href=&quot;https://en.wikipedia.org/wiki/Managed_code&quot;&gt;&lt;em&gt;æ‰˜ç®¡è¿è¡Œæ—¶&lt;/em&gt;&lt;/a&gt;ï¼Œè¿™æ„å‘³ç€å®ƒæä¾›äº†â€œç®¡ç†â€æ‚¨çš„ç¨‹åºçš„é«˜çº§åŠŸèƒ½ï¼Œä»&lt;a href=&quot;https://github.com/mattwarren/coreclr/blob/master/Documentation/botr/intro-to-clr.md#fundamental-features-of-the-clr&quot;&gt;ç®€ä»‹åˆ°å…¬å…±è¯­è¨€è¿è¡Œæ—¶ï¼ˆCLRï¼‰&lt;/a&gt;ï¼ˆ2007å¹´ç¼–å†™ï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;è¿è¡Œæ—¶å…·æœ‰è®¸å¤šåŠŸèƒ½ï¼Œå› æ­¤æŒ‰å¦‚ä¸‹æ–¹å¼å¯¹å®ƒä»¬è¿›è¡Œåˆ†ç±»å¾ˆæœ‰ç”¨ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;&lt;strong&gt;åŸºæœ¬åŠŸèƒ½&lt;/strong&gt; å¯¹å…¶ä»–åŠŸèƒ½è®¾è®¡æœ‰å¹¿æ³›å½±å“çš„åŠŸèƒ½ã€‚è¿™äº›åŒ…æ‹¬ï¼š&lt;br/&gt;1.åƒåœ¾æ”¶é›†&lt;br/&gt;2.è®°å¿†å®‰å…¨å’Œç±»å‹å®‰å…¨&lt;br/&gt;3.å¯¹ç¼–ç¨‹è¯­è¨€çš„é«˜çº§æ”¯æŒã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¾…åŠ©åŠŸèƒ½&lt;/strong&gt; - è®¸å¤šæœ‰ç”¨çš„ç¨‹åºå¯èƒ½ä¸éœ€è¦åŸºæœ¬ç‰¹æ€§æ‰€æ”¯æŒçš„åŠŸèƒ½ï¼š&lt;br/&gt;1.ä½¿ç”¨AppDomainsè¿›è¡Œç¨‹åºéš”ç¦»&lt;br/&gt;2.ç¨‹åºå®‰å…¨å’Œæ²™ç›’&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¶ä»–åŠŸèƒ½&lt;/strong&gt; - æ‰€æœ‰è¿è¡Œæ—¶ç¯å¢ƒéƒ½éœ€è¦ä½†ä¸åˆ©ç”¨CLRåŸºæœ¬åŠŸèƒ½çš„åŠŸèƒ½ã€‚ç›¸åï¼Œå®ƒä»¬æ˜¯åˆ›å»ºå®Œæ•´ç¼–ç¨‹ç¯å¢ƒçš„ç»“æœã€‚å…¶ä¸­åŒ…æ‹¬ï¼š&lt;br/&gt;1.ç‰ˆæœ¬&lt;br/&gt;2.&lt;strong&gt;Debugging/Profiling&lt;/strong&gt;&lt;br/&gt;3.äº’æ“ä½œ&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;æ‚¨å¯ä»¥çœ‹åˆ°ï¼Œâ€œ&lt;strong&gt;Debugging/Profiling&lt;/strong&gt;â€è™½ç„¶ä¸æ˜¯åŸºæœ¬æˆ–è¾…åŠ©åŠŸèƒ½ï¼Œä½†ç”±äºâ€œ éœ€è¦åˆ›å»ºå®Œæ•´çš„ç¼–ç¨‹ç¯å¢ƒ â€ ï¼Œå®ƒä»ç„¶ä¼šè¿›å…¥åˆ—è¡¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¿™ç¯‡æ–‡ç« çš„å…¶ä½™éƒ¨åˆ†å°†çœ‹&lt;em&gt;ä»€ä¹ˆ&lt;/em&gt;Â &lt;a href=&quot;https://en.wikipedia.org/wiki/Application_performance_management&quot;&gt;ç›‘æµ‹&lt;/a&gt;ï¼Œ&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E5%8F%AF%E8%A7%80%E6%B8%AC%E6%80%A7&quot;&gt;å¯è§‚æµ‹æ€§&lt;/a&gt;å’Œ&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E5%86%85%E7%9C%81_(%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6)&quot;&gt;å†…çœ&lt;/a&gt;åŠŸèƒ½æ ¸å¿ƒCLRæä¾›ï¼Œ&lt;em&gt;ä¸ºä»€ä¹ˆ&lt;/em&gt;ä»–ä»¬æ˜¯æœ‰ç”¨çš„ï¼Œ&lt;em&gt;å¦‚ä½•&lt;/em&gt;æä¾›ä»–ä»¬ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ä¾¿äºæµè§ˆï¼Œå¸–å­åˆ†ä¸º3ä¸ªä¸»è¦éƒ¨åˆ†ï¼ˆæœ€åæœ‰ä¸€äº›â€œé¢å¤–é˜…è¯»ææ–™â€ï¼‰ï¼š&lt;/p&gt;
&lt;h2 id=&quot;è¯Šæ–­diagnostics&quot;&gt;è¯Šæ–­(Diagnostics)&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬å°†æŸ¥çœ‹CLRæä¾›çš„&lt;strong&gt;è¯Šæ–­&lt;/strong&gt;ä¿¡æ¯ï¼Œä¼ ç»Ÿä¸Šè¿™äº›ä¿¡æ¯æ˜¯é€šè¿‡&lt;a href=&quot;https://docs.microsoft.com/en-us/windows/desktop/etw/about-event-tracing&quot;&gt;â€œWindowsäº‹ä»¶è·Ÿè¸ªâ€&lt;/a&gt;ï¼ˆETWï¼‰æä¾›çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/framework/performance/clr-etw-keywords-and-levels&quot;&gt;CLRæä¾›çš„&lt;/a&gt;å„ç§äº‹ä»¶æ¶‰åŠï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;åƒåœ¾æ”¶é›†ï¼ˆGCï¼‰&lt;/li&gt;
&lt;li&gt;å³æ—¶ï¼ˆJITï¼‰ç¼–è¯‘&lt;/li&gt;
&lt;li&gt;æ¨¡å—å’ŒAppDomains&lt;/li&gt;
&lt;li&gt;çº¿ç¨‹å’Œé”äº‰ç”¨&lt;/li&gt;
&lt;li&gt;ä»¥åŠæ›´å¤š&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä¾‹å¦‚ï¼Œè¿™æ˜¯&lt;a href=&quot;https://github.com/dotnet/coreclr/blob/release/2.1/src/vm/corhost.cpp#L649&quot;&gt;è§¦å‘AppDomain Loadäº‹ä»¶çš„&lt;/a&gt;åœ°æ–¹ï¼Œè¿™æ˜¯&lt;a href=&quot;https://github.com/dotnet/coreclr/blob/release/2.1/src/vm/exceptionhandling.cpp#L203&quot;&gt;Exception Thrownäº‹ä»¶&lt;/a&gt;ï¼Œè¿™é‡Œæ˜¯&lt;a href=&quot;https://github.com/dotnet/coreclr/blob/release/2.1/src/vm/gctoclreventsink.cpp#L139-L144&quot;&gt;GC Allocation Tickäº‹ä»¶&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&quot;perf-view&quot;&gt;Perf View&lt;/h3&gt;
&lt;p&gt;å¦‚æœä½ æƒ³çœ‹åˆ°æ¥è‡ªä½ çš„.NETç¨‹åºçš„ETWäº‹ä»¶ï¼Œæˆ‘å»ºè®®ä½¿ç”¨ä¼˜ç§€çš„&lt;a href=&quot;https://github.com/Microsoft/perfview&quot;&gt;PerfViewå·¥å…·&lt;/a&gt;ï¼Œä»è¿™äº›&lt;a href=&quot;https://channel9.msdn.com/Series/PerfView-Tutorial&quot;&gt;PerfViewæ•™ç¨‹&lt;/a&gt;å¼€å§‹ï¼Œæˆ–è€…è¿™ä¸ªä¼˜ç§€çš„æ¼”è®²&lt;a href=&quot;https://www.slideshare.net/InfoQ/perfview-the-ultimate-net-performance-tool&quot;&gt;PerfViewï¼šç»ˆæ.NETæ€§èƒ½å·¥å…·&lt;/a&gt;ã€‚PerfViewè¢«å¹¿æ³›è®¤å¯ï¼Œå› ä¸ºå®ƒæä¾›äº†å®è´µçš„ä¿¡æ¯ï¼Œä¾‹å¦‚Microsoftå·¥ç¨‹å¸ˆç»å¸¸å°†å…¶ç”¨äº&lt;a href=&quot;https://github.com/dotnet/corefx/issues/28834&quot;&gt;æ€§èƒ½è°ƒæŸ¥&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/5590759-af39d031358bb86b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;image.png&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;å…±åŒåŸºç¡€è®¾æ–½&quot;&gt;å…±åŒåŸºç¡€è®¾æ–½&lt;/h3&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œå¦‚æœä»åç§°ä¸­ä¸æ¸…æ¥šï¼ŒETWäº‹ä»¶ä»…åœ¨Windowsä¸Šå¯ç”¨ï¼Œè¿™å¹¶ä¸é€‚åˆæ–°çš„.NETâ€œè·¨å¹³å°â€ä¸–ç•Œã€‚æ‚¨å¯ä»¥&lt;a href=&quot;https://github.com/dotnet/coreclr/blob/release/2.1/Documentation/project-docs/linux-performance-tracing.md&quot;&gt;åœ¨Linuxä¸Š&lt;/a&gt;ä½¿ç”¨&lt;a href=&quot;https://github.com/dotnet/coreclr/blob/release/2.1/Documentation/project-docs/linux-performance-tracing.md&quot;&gt;PerfViewè¿›è¡Œæ€§èƒ½è·Ÿè¸ª&lt;/a&gt;ï¼ˆé€šè¿‡&lt;a href=&quot;https://lttng.org/&quot;&gt;LTTng&lt;/a&gt;ï¼‰ï¼Œä½†è¿™åªæ˜¯cmd-lineé›†åˆå·¥å…·ï¼Œç§°ä¸ºâ€œPerfCollectâ€ï¼Œåˆ†æå’Œä¸°å¯Œçš„UIï¼ˆåŒ…æ‹¬&lt;a href=&quot;https://github.com/Microsoft/perfview/pull/502&quot;&gt;flamegraphs&lt;/a&gt;ï¼‰ç›®å‰ä»…é€‚ç”¨äºWindowsã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯å¦‚æœä½ æƒ³åˆ†æ.NET Performance Linuxï¼Œè¿˜æœ‰å…¶ä»–ä¸€äº›æ–¹æ³•ï¼š&lt;/p&gt;
&lt;p&gt;ä¸Šé¢çš„ç¬¬äºŒä¸ªé“¾æ¥è®¨è®ºäº†åœ¨.NET Coreä¸­æ­£åœ¨ä½¿ç”¨çš„æ–°&lt;strong&gt;â€œEventPipeâ€åŸºç¡€æ¶æ„&lt;/strong&gt;ï¼ˆä»¥åŠEventSourceså’ŒEventListenersï¼Œä½ èƒ½å‘ç°ä¸€ä¸ªä¸»é¢˜ï¼ï¼‰ï¼Œä½ å¯ä»¥çœ‹åˆ°å®ƒåœ¨&lt;a href=&quot;https://github.com/dotnet/designs/blob/master/accepted/cross-platform-performance-monitoring.md&quot;&gt;è·¨å¹³å°æ€§èƒ½ç›‘æ§è®¾è®¡ä¸­çš„ç›®æ ‡&lt;/a&gt;ã€‚åœ¨é«˜å±‚æ¬¡ä¸Šï¼Œå®ƒå°†ä¸ºCLRæä¾›ä¸€ä¸ªå•ç‹¬çš„ä½ç½®æ¥æ¨åŠ¨ä¸è¯Šæ–­å’Œæ€§èƒ½ç›¸å…³çš„â€œäº‹ä»¶â€ã€‚ç„¶åï¼Œè¿™äº›â€œäº‹ä»¶â€å°†è¢«è·¯ç”±åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªè®°å½•å™¨ï¼Œä¾‹å¦‚ï¼Œå¯èƒ½åŒ…æ‹¬ETWï¼ŒLTTngå’ŒBPFï¼Œç²¾ç¡®è®°å½•å™¨ç”±CLRè¿è¡Œçš„OS /å¹³å°ç¡®å®šã€‚&lt;a href=&quot;https://github.com/dotnet/coreclr/blob/master/Documentation/coding-guidelines/cross-platform-performance-and-eventing.md&quot;&gt;.NET Cross-Platæ€§èƒ½å’Œäº‹ä»¶è®¾è®¡&lt;/a&gt;ä¸­è¿˜æœ‰æ›´å¤šèƒŒæ™¯ä¿¡æ¯å¯ä»¥è§£é‡Šä¸åŒæ—¥å¿—è®°å½•æŠ€æœ¯çš„ä¼˜ç¼ºç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;â€œäº‹ä»¶ç®¡é“â€ä¸­æ­£åœ¨è¿›è¡Œçš„æ‰€æœ‰å·¥ä½œéƒ½åœ¨&lt;a href=&quot;https://github.com/dotnet/coreclr/projects/5&quot;&gt;â€œæ€§èƒ½ç›‘æ§â€é¡¹ç›®&lt;/a&gt;å’Œç›¸å…³çš„&lt;a href=&quot;https://github.com/dotnet/coreclr/search?q=EventPipe&amp;amp;type=Issues&quot;&gt;â€œEventPipeâ€é—®é¢˜ä¸­&lt;/a&gt;è¿›è¡Œè·Ÿè¸ªã€‚&lt;/p&gt;
&lt;h3 id=&quot;æœªæ¥çš„è®¡åˆ’&quot;&gt;æœªæ¥çš„è®¡åˆ’&lt;/h3&gt;
&lt;p&gt;æœ€åï¼Œè¿˜æœ‰ä¸€ä¸ª&lt;a href=&quot;https://github.com/dotnet/designs/blob/master/accepted/performance-profiling-controller.md&quot;&gt;æ€§èƒ½åˆ†ææ§åˆ¶å™¨çš„(Performance Profiling ControllerÂ )&lt;/a&gt;æœªæ¥è®¡åˆ’ï¼Œå…¶ç›®æ ‡å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;æ§åˆ¶å™¨è´Ÿè´£ä»¥ç®€å•å’Œè·¨å¹³å°çš„æ–¹å¼æ§åˆ¶æ€§èƒ½åˆ†æåŸºç¡€ç»“æ„å’Œ.NETæ€§èƒ½è¯Šæ–­ç»„ä»¶ç”Ÿæˆçš„æ€§èƒ½æ•°æ®ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æˆ‘ä»¬çš„æƒ³æ³•æ˜¯&lt;a href=&quot;http://mattwarren.org/2018/08/21/Monitoring-and-Observability-in-the-.NET-Runtime/(https://github.com/dotnet/designs/blob/master/accepted/performance-profiling-controller.md#functionality-exposed-through-controller)&quot;&gt;é€šè¿‡&lt;/a&gt;ä»â€œäº‹ä»¶ç®¡é“â€ä¸­æå–æ‰€æœ‰ç›¸å…³æ•°æ®ï¼Œé€šè¿‡&lt;a href=&quot;http://mattwarren.org/2018/08/21/Monitoring-and-Observability-in-the-.NET-Runtime/(https://github.com/dotnet/designs/blob/master/accepted/performance-profiling-controller.md#functionality-exposed-through-controller)&quot;&gt;HTTPæœåŠ¡å™¨&lt;/a&gt;å…¬å¼€&lt;a href=&quot;http://mattwarren.org/2018/08/21/Monitoring-and-Observability-in-the-.NET-Runtime/(https://github.com/dotnet/designs/blob/master/accepted/performance-profiling-controller.md#functionality-exposed-through-controller)&quot;&gt;ä»¥ä¸‹åŠŸèƒ½&lt;/a&gt;ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;REST API&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Pri 1ï¼šç®€å•åˆ†æï¼šä¸ºè¿è¡Œæ—¶é—´é…ç½®Xä¸ªæ—¶é—´å¹¶è¿”å›è·Ÿè¸ªã€‚&lt;/li&gt;
&lt;li&gt;Pri 1ï¼šé«˜çº§åˆ†æï¼šå¼€å§‹è·Ÿè¸ªï¼ˆä»¥åŠé…ç½®ï¼‰&lt;/li&gt;
&lt;li&gt;Pri 1ï¼šé«˜çº§åˆ†æï¼šåœæ­¢è·Ÿè¸ªï¼ˆå¯¹æ­¤è°ƒç”¨çš„å“åº”å°†æ˜¯è·Ÿè¸ªæœ¬èº«ï¼‰&lt;/li&gt;
&lt;li&gt;Pri 2ï¼šè·å–ä¸æ‰€æœ‰EventCountersæˆ–æŒ‡å®šEventCounterç›¸å…³çš„ç»Ÿè®¡ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;å¯æµè§ˆçš„HTMLé¡µé¢&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Pri 1ï¼šæµç¨‹ä¸­æ‰€æœ‰æ‰˜ç®¡ä»£ç å †æ ˆçš„æ–‡æœ¬è¡¨ç¤ºã€‚&lt;/li&gt;
&lt;li&gt;æä¾›å½“å‰æ­£åœ¨è¿è¡Œçš„ç”¨ä½œç®€å•è¯Šæ–­æŠ¥å‘Šçš„å¿«ç…§æ¦‚è¿°ã€‚&lt;/li&gt;
&lt;li&gt;Pri 2ï¼šæ˜¾ç¤ºEventCountersçš„å½“å‰çŠ¶æ€ï¼ˆå¯èƒ½å…·æœ‰å†å²è®°å½•ï¼‰ã€‚&lt;br/&gt;* æä¾›ç°æœ‰è®¡æ•°å™¨åŠå…¶å€¼çš„æ¦‚è¿°ã€‚&lt;br/&gt;* å¼€æ”¾æ€§é—®é¢˜ï¼šæˆ‘ä¸ç›¸ä¿¡å­˜åœ¨å¿…è¦çš„å…¬å…±APIæ¥æšä¸¾EventCountersã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/blockquote&gt;
&lt;p&gt;æˆ‘å¾ˆé«˜å…´çœ‹åˆ°â€œ&lt;strong&gt;æ€§èƒ½åˆ†ææ§åˆ¶å™¨(Performance Profiling Controller)&lt;/strong&gt;â€ï¼ˆPPCï¼Ÿï¼‰çš„ä½ç½®ï¼Œæˆ‘è®¤ä¸ºå°†è¿™ç§å†…ç½®åˆ°CLRä¸­ç¡®å®éå¸¸æœ‰ä»·å€¼ï¼Œè¿™æ˜¯&lt;a href=&quot;https://github.com/golang/go/wiki/Performance&quot;&gt;å…¶ä»–è¿è¡Œæ—¶çš„å†…å®¹&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å‰–æprofiling&quot;&gt;å‰–æ(Profiling)&lt;/h2&gt;
&lt;p&gt;CLRæä¾›çš„å¦ä¸€ä¸ªå¼ºå¤§åŠŸèƒ½æ˜¯&lt;a href=&quot;https://docs.microsoft.com/en-us/previous-versions/dotnet/netframework-4.0/ms404386(v%3dvs.100)&quot;&gt;Profiling API&lt;/a&gt;ï¼Œå®ƒï¼ˆå¤§éƒ¨åˆ†ï¼‰è¢«ç¬¬ä¸‰æ–¹å·¥å…·ç”¨äºåœ¨éå¸¸ä½çº§åˆ«æŒ‚é’©åˆ°è¿è¡Œæ—¶ã€‚æ‚¨å¯ä»¥åœ¨&lt;a href=&quot;https://docs.microsoft.com/en-us/previous-versions/dotnet/netframework-4.0/bb384493(v%3dvs.100)&quot;&gt;æ­¤æ¦‚è¿°ä¸­&lt;/a&gt;æ‰¾åˆ°æœ‰å…³APIçš„æ›´å¤šä¿¡æ¯ï¼Œä½†åœ¨è¾ƒé«˜çº§åˆ«ï¼Œå®ƒå…è®¸æ‚¨è¿æ¥åœ¨ä»¥ä¸‹æƒ…å†µä¸‹è§¦å‘çš„å›è°ƒï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/5590759-e1e6f4dade78fa92.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;image.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ¥è‡ªBOTRé¡µé¢çš„å›¾åƒ&lt;a href=&quot;https://github.com/dotnet/coreclr/blob/master/Documentation/botr/profiling.md#profiling-api--overview&quot;&gt;åˆ†æAPI - æ¦‚è¿°&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ­¤å¤–è¿˜æœ‰å…¶ä»–&lt;strong&gt;éå¸¸å¼ºå¤§çš„åŠŸèƒ½&lt;/strong&gt;ã€‚é¦–å…ˆï¼Œæ‚¨å¯ä»¥&lt;strong&gt;è®¾ç½®æ¯æ¬¡æ‰§è¡Œ.NETæ–¹æ³•æ—¶è°ƒç”¨çš„æŒ‚é’©ï¼Œ&lt;/strong&gt;æ— è®ºæ˜¯åœ¨è¿è¡Œæ—¶è¿˜æ˜¯ç”¨æˆ·ä»£ç ä¸­ã€‚è¿™äº›å›è°ƒè¢«ç§°ä¸ºâ€œè¿›å…¥/ç¦»å¼€â€é’©å­ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ª&lt;a href=&quot;https://github.com/Microsoft/clr-samples/tree/master/ProfilingAPI/ReJITEnterLeaveHooks&quot;&gt;å¾ˆå¥½çš„ç¤ºä¾‹&lt;/a&gt;æ˜¾ç¤ºå¦‚ä½•ä½¿ç”¨å®ƒä»¬ï¼Œä½†ä¸ºäº†ä½¿å®ƒä»¬å·¥ä½œï¼Œæ‚¨éœ€è¦äº†è§£&lt;a href=&quot;https://github.com/dotnet/coreclr/issues/19023&quot;&gt;ä¸åŒæ“ä½œç³»ç»Ÿå’ŒCPUæ¶æ„çš„â€œè°ƒç”¨çº¦å®šâ€&lt;/a&gt;ï¼Œè¿™&lt;a href=&quot;https://github.com/dotnet/coreclr/issues/18977&quot;&gt;å¹¶ä¸æ€»æ˜¯å®¹æ˜“çš„&lt;/a&gt;ã€‚å¦å¤–ï¼Œä½œä¸ºè­¦å‘Šï¼ŒProfiling APIæ˜¯ä¸€ä¸ªåªèƒ½é€šè¿‡C / C ++ä»£ç è®¿é—®çš„COMç»„ä»¶ï¼Œä½ ä¸èƒ½åœ¨Cï¼ƒ/ Fï¼ƒ/ VB.NETä¸­ä½¿ç”¨å®ƒï¼&lt;/p&gt;
&lt;p&gt;å…¶æ¬¡ï¼ŒProfilerèƒ½å¤Ÿé€šè¿‡&lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/framework/unmanaged-api/profiling/icorprofilerfunctioncontrol-setilfunctionbody-method&quot;&gt;SetILFunctionBodyï¼ˆï¼‰API&lt;/a&gt;åœ¨&lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/framework/unmanaged-api/profiling/icorprofilerfunctioncontrol-setilfunctionbody-method&quot;&gt;JITÂ &lt;/a&gt;&lt;strong&gt;ä¹‹å‰é‡å†™ä»»ä½•.NETæ–¹æ³•çš„ILä»£ç &lt;/strong&gt;ã€‚è¿™ä¸ªAPIåŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œæ„æˆäº†è®¸å¤š.NETÂ &lt;a href=&quot;https://stackify.com/application-performance-management-tools/&quot;&gt;APMå·¥å…·&lt;/a&gt;çš„åŸºç¡€ï¼Œæ‚¨å¯ä»¥åœ¨æˆ‘ä¹‹å‰çš„æ–‡ç« ä¸­äº†è§£æ›´å¤šå…³äºå¦‚ä½•ä½¿ç”¨å®ƒçš„æ–¹æ³•ã€‚&lt;a href=&quot;http://mattwarren.org/2014/08/14/how-to-mock-sealed-classes-and-static-methods/&quot;&gt;å¦‚ä½•æ¨¡æ‹Ÿå¯†å°ç±»å’Œé™æ€æ–¹æ³•&lt;/a&gt;ä»¥åŠ&lt;a href=&quot;https://github.com/mattwarren/DDD2011_ProfilerDemo/commit/9f804cec8ef11b802e020e648180b436a429833f?w=1&quot;&gt;éšé™„çš„ä»£ç &lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&quot;icorprofiler-api&quot;&gt;ICorProfiler API&lt;/h3&gt;
&lt;p&gt;äº‹å®è¯æ˜ï¼Œè¿è¡Œæ—¶å¿…é¡»æ‰§è¡Œå„ç§ç–¯ç‹‚çš„æŠ€å·§æ‰èƒ½ä½¿Profiling APIæ­£å¸¸å·¥ä½œï¼Œåªéœ€æŸ¥çœ‹è¿›å…¥æ­¤PRçš„å†…å®¹&lt;a href=&quot;https://github.com/dotnet/coreclr/pull/19054&quot;&gt;å…è®¸é‡æ–°è¿æ¥&lt;/a&gt;ï¼ˆæœ‰å…³'ReJIT'çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…&lt;a href=&quot;https://blogs.msdn.microsoft.com/davbr/2011/10/12/rejit-a-how-to-guide/&quot;&gt;ReJITï¼šA How-ToæŒ‡å—&lt;/a&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€æœ‰Profiling APIæ¥å£å’Œå›è°ƒçš„æ€»ä½“å®šä¹‰å¯åœ¨&lt;a href=&quot;https://github.com/dotnet/coreclr/blob/master/src/inc/corprof.idl&quot;&gt;\vm\inc\corprof.idlä¸­æ‰¾åˆ°&lt;/a&gt;ï¼ˆè¯·å‚é˜…&lt;a href=&quot;https://en.wikipedia.org/wiki/Interface_description_language&quot;&gt;æ¥å£è¯´æ˜è¯­è¨€&lt;/a&gt;ï¼‰ã€‚ä½†å®ƒåˆ†ä¸º2ä¸ªé€»è¾‘éƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯&lt;strong&gt;Profiler - &amp;gt;'Execution Engine'ï¼ˆEEï¼‰&lt;/strong&gt;æ¥å£ï¼Œç§°ä¸º&lt;code&gt;ICorProfilerInfo&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;// Declaration of class that implements the ICorProfilerInfo* interfaces, which allow the
// Profiler to communicate with the EE.  This allows the Profiler DLL to get
// access to private EE data structures and other things that should never be exported
// outside of the EE.
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™åœ¨ä»¥ä¸‹æ–‡ä»¶ä¸­å®ç°ï¼š&lt;/p&gt;
&lt;p&gt;å¦ä¸€ä¸ªä¸»è¦éƒ¨åˆ†æ˜¯&lt;strong&gt;EE - &amp;gt; Profiler&lt;/strong&gt;å›è°ƒï¼Œå®ƒä»¬åœ¨&lt;code&gt;ICorProfilerCallback&lt;/code&gt;ç•Œé¢ä¸‹ç»„åˆåœ¨ä¸€èµ·ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;// This module implements wrappers around calling the profiler's 
// ICorProfilerCallaback* interfaces. When code in the EE needs to call the
// profiler, it goes through EEToProfInterfaceImpl to do so.
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™äº›å›è°ƒåœ¨ä»¥ä¸‹æ–‡ä»¶ä¸­å®ç°ï¼š&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œå€¼å¾—æŒ‡å‡ºçš„æ˜¯ï¼ŒProfiler APIå¯èƒ½æ— æ³•åœ¨.NET Coreè¿è¡Œçš„æ‰€æœ‰æ“ä½œç³»ç»Ÿå’ŒCPU-archä¸Šè¿è¡Œï¼Œä¾‹å¦‚&lt;a href=&quot;https://github.com/dotnet/coreclr/issues/18977&quot;&gt;Linuxä¸Šçš„ELTè°ƒç”¨å­˜æ ¹é—®é¢˜&lt;/a&gt;ï¼Œæœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…&lt;a href=&quot;https://github.com/dotnet/coreclr/blob/release/2.1/Documentation/project-docs/profiling-api-status.md&quot;&gt;CoreCLR Profiler APIçš„çŠ¶æ€&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&quot;åˆ†æå’Œè°ƒè¯•profiling-v.-debugging&quot;&gt;åˆ†æå’Œè°ƒè¯•(Profiling v. Debugging)&lt;/h3&gt;
&lt;p&gt;é™¤æ­¤ä¹‹å¤–ï¼Œâ€œåˆ†æâ€å’Œâ€œè°ƒè¯•â€ç¡®å®æœ‰ä¸€äº›é‡å ï¼Œå› æ­¤ä»&lt;a href=&quot;https://blogs.msdn.microsoft.com/jmstall/2004/10/22/clr-debugging-vs-clr-profiling/&quot;&gt;CLRè°ƒè¯•ä¸CLRåˆ†æ&lt;/a&gt;&lt;em&gt;ä¸­äº†è§£.NETè¿è¡Œæ—¶ä¸Šä¸‹æ–‡ä¸­&lt;/em&gt;ä¸åŒçš„APIæä¾›&lt;em&gt;äº†&lt;/em&gt;ä»€ä¹ˆæ˜¯æœ‰å¸®åŠ©çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/5590759-5eb562e65f76707e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;image.png&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;è°ƒè¯•debugging&quot;&gt;è°ƒè¯•(Debugging)&lt;/h2&gt;
&lt;p&gt;è°ƒè¯•æ„å‘³ç€ä¸åŒçš„äº‹æƒ…ä¸åŒçš„äººï¼Œæ¯”å¦‚æˆ‘é—®åœ¨Twitterä¸Šâ€œÂ &lt;em&gt;ä»€ä¹ˆæ˜¯ä½ è°ƒè¯•çš„.NETç¨‹åºçš„é€”å¾„&lt;/em&gt;Â â€ï¼Œå¹¶å¾—åˆ°äº†&lt;a href=&quot;https://mobile.twitter.com/matthewwarren/status/1030444463385178113&quot;&gt;å¹¿æ³›&lt;/a&gt;çš„&lt;a href=&quot;https://mobile.twitter.com/matthewwarren/status/1030580487969038344&quot;&gt;ä¸åŒååº”&lt;/a&gt;ï¼Œè™½ç„¶ååº”ä¸¤ç»„å«æœ‰ä¸€ä¸ªå¾ˆå¥½çš„å·¥å…·æ¸…å•å’ŒæŠ€æœ¯ï¼Œæ‰€ä»¥ä»–ä»¬å€¼å¾—ä¸€è¯•ï¼Œè°¢è°¢#LazyWebï¼&lt;/p&gt;
&lt;p&gt;ä½†ä¹Ÿè®¸è¿™å¥è¯æœ€å¥½æ€»ç»“ä¸€ä¸‹&lt;strong&gt;Debuggingç©¶ç«Ÿæ˜¯&lt;/strong&gt;ä»€ä¹ˆğŸ˜Š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/5590759-abbcc4717f35ce03.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;image.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;CLRæä¾›äº†ä¸è°ƒè¯•ç›¸å…³çš„éå¸¸å¹¿æ³›çš„åŠŸèƒ½ï¼Œä½†ä¸ºä»€ä¹ˆéœ€è¦æä¾›è¿™äº›æœåŠ¡ï¼Œä¼˜ç§€çš„å¸–å­&lt;a href=&quot;https://blogs.msdn.microsoft.com/jmstall/2004/10/10/why-is-managed-debugging-different-than-native-debugging/&quot;&gt;ä¸ºä»€ä¹ˆæ‰˜ç®¡è°ƒè¯•ä¸æœ¬æœºè°ƒè¯•ä¸åŒï¼Ÿ&lt;/a&gt;æä¾›äº†3ä¸ªç†ç”±ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;å¯ä»¥åœ¨ç¡¬ä»¶çº§åˆ«æŠ½è±¡æœ¬æœºè°ƒè¯•ï¼Œä½†&lt;strong&gt;éœ€è¦åœ¨ILçº§åˆ«æŠ½è±¡ç®¡ç†è°ƒè¯•&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;æ‰˜ç®¡è°ƒè¯•éœ€è¦å¤§é‡çš„ä¿¡æ¯ï¼Œ&lt;strong&gt;ç›´åˆ°è¿è¡Œæ—¶æ‰å¯ç”¨&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;æ‰˜ç®¡è°ƒè¯•å™¨éœ€è¦&lt;strong&gt;ä¸åƒåœ¾æ”¶é›†å™¨ï¼ˆGCï¼‰åè°ƒ&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;æ‰€ä»¥ç»™ä¸€ä¸ªä½“é¢çš„ç»éªŒï¼ŒCLRÂ &lt;em&gt;å…·æœ‰&lt;/em&gt;æä¾›&lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/framework/unmanaged-api/debugging/&quot;&gt;æ›´é«˜çº§åˆ«çš„è°ƒè¯•API&lt;/a&gt;ç§°&lt;code&gt;ICorDebug&lt;/code&gt;ï¼Œè¿™å°†åœ¨ä¸‹é¢ä»â€œå¸¸ç”¨çš„è°ƒè¯•æ–¹æ¡ˆâ€çš„å›¾åƒä¸­æ˜¾ç¤º&lt;a href=&quot;https://github.com/dotnet/coreclr/blob/master/Documentation/botr/dac-notes.md#marshaling-specifics&quot;&gt;çš„BOTR&lt;/a&gt;ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/5590759-a322f6aae4d89b10.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;image.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œè¿˜æœ‰å¾ˆå¥½çš„æè¿°äº†ä¸åŒéƒ¨åˆ†&lt;a href=&quot;https://blogs.msdn.microsoft.com/jmstall/2004/12/28/how-do-managed-breakpoints-work/&quot;&gt;å¦‚ä½•åœ¨ç®¡ç†æ–­ç‚¹å¦‚ä½•å·¥ä½œä¸­&lt;/a&gt;ç›¸äº’ä½œç”¨&lt;a href=&quot;https://blogs.msdn.microsoft.com/jmstall/2004/12/28/how-do-managed-breakpoints-work/&quot;&gt;ï¼Ÿ&lt;/a&gt;ï¼Œè™½ç„¶æè¿°&lt;em&gt;å·¦&lt;/em&gt;å’Œ&lt;em&gt;å³&lt;/em&gt;æ˜¯ä¸Šå›¾ä¸­çš„ç›¸åï¼&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Hereâ€™s an overview of the pipeline of components:
1) End-user
2) Debugger (such as Visual Studio or MDbg).
3) CLR Debugging Services (which we call &quot;The Right Side&quot;). This is the implementation of ICorDebug (in mscordbi.dll).
---- process boundary between Debugger and Debuggee ----
4) CLR. This is mscorwks.dll. This contains the in-process portion of the debugging services (which we call &quot;The Left Side&quot;) which communicates directly with the RS in stage #3.
5) Debuggee's code (such as end users C# program)
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;icordebug-api&quot;&gt;ICorDebug API&lt;/h3&gt;
&lt;p&gt;ä½†æ˜¯å¦‚ä½•å®ç°æ‰€æœ‰è¿™äº›ä»¥åŠä»&lt;a href=&quot;https://github.com/Microsoft/clrmd/blob/master/Documentation/GettingStarted.md#clr-debugging-a-brief-introduction&quot;&gt;CLR Debuggingç®€è¦ä»‹ç»&lt;/a&gt;çš„ä¸åŒç»„ä»¶æ˜¯ä»€ä¹ˆï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;12&quot;&gt;
&lt;p&gt;æ‰€æœ‰.Netè°ƒè¯•æ”¯æŒéƒ½åœ¨æˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œThe Dacâ€çš„dllä¹‹ä¸Šå®ç°ã€‚æ­¤æ–‡ä»¶ï¼ˆé€šå¸¸å‘½å&lt;code&gt;mscordacwks.dll&lt;/code&gt;ï¼‰æ˜¯æˆ‘ä»¬çš„å…¬å…±è°ƒè¯•APIï¼ˆ&lt;code&gt;ICorDebug&lt;/code&gt;ï¼‰ä»¥åŠä¸¤ä¸ªç§æœ‰è°ƒè¯•APIÂ çš„æ„å»ºå—ï¼šSOS-Dac APIå’ŒIXCLRã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä¸€ä¸ªå®Œç¾çš„ä¸–ç•Œä¸­ï¼Œæ¯ä¸ªäººéƒ½ä¼šä½¿ç”¨&lt;code&gt;ICorDebug&lt;/code&gt;æˆ‘ä»¬çš„å…¬å…±è°ƒè¯•APIã€‚ä½†æ˜¯ï¼Œåƒæ‚¨è¿™æ ·çš„å·¥å…·å¼€å‘äººå‘˜æ‰€éœ€çš„ç»å¤§å¤šæ•°åŠŸèƒ½éƒ½ç¼ºä¹&lt;code&gt;ICorDebug&lt;/code&gt;ã€‚è¿™æ˜¯æˆ‘ä»¬æ­£åœ¨ä¿®å¤çš„é—®é¢˜ï¼Œä½†è¿™äº›æ”¹è¿›å°†è¿›å…¥CLR v.nextï¼Œè€Œä¸æ˜¯æ—§ç‰ˆæœ¬çš„CLRã€‚å®é™…ä¸Šï¼Œ&lt;code&gt;ICorDebug&lt;/code&gt;APIä»…åœ¨CLR v4ä¸­æ·»åŠ äº†å¯¹æ•…éšœè½¬å‚¨è°ƒè¯•çš„æ”¯æŒã€‚ä»»ä½•è°ƒè¯•CLR v2å´©æºƒè½¬å‚¨çš„äººæ ¹æœ¬æ— æ³•ä½¿ç”¨&lt;code&gt;ICorDebug&lt;/code&gt;ï¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ï¼ˆæœ‰å…³å…¶ä»–æ–‡ç« ï¼Œè¯·å‚é˜…&lt;a href=&quot;https://github.com/dotnet/coreclr/blob/master/src/ToolBox/SOS/SOSAndICorDebug.md&quot;&gt;SOSå’ŒICorDebug&lt;/a&gt;ï¼‰&lt;/p&gt;
&lt;p&gt;è¯¥&lt;code&gt;ICorDebug&lt;/code&gt;APIå®é™…ä¸Šæ˜¯åˆ†æˆå¤šä¸ªæ¥å£ï¼Œä¹Ÿæœ‰åœ¨ä»–ä»¬çš„70ï¼æˆ‘ä¸ä¼šåœ¨è¿™é‡Œåˆ—å‡ºæ‰€æœ‰å†…å®¹ï¼Œä½†æ˜¯æˆ‘å°†å±•ç¤ºå®ƒä»¬æ‰€å±çš„ç±»åˆ«ï¼Œæœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…&lt;a href=&quot;https://blogs.msdn.microsoft.com/jmstall/2006/01/04/partition-of-icordebug/&quot;&gt;ICorDebugçš„åˆ†åŒºï¼Œ&lt;/a&gt;å…¶ä¸­åŒ…å«æ­¤åˆ—è¡¨ï¼Œå› ä¸ºå®ƒæ›´è¯¦ç»†ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;é¡¶çº§(Debugging)ï¼š&lt;/strong&gt;Â ICorDebug + ICorDebug2æ˜¯é¡¶çº§æ¥å£ï¼Œæœ‰æ•ˆåœ°å……å½“ICorDebugProcesså¯¹è±¡çš„é›†åˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å›è°ƒ(Callbacks)ï¼š&lt;/strong&gt;é€šè¿‡è°ƒè¯•å™¨å®ç°çš„å›è°ƒå¯¹è±¡ä¸Šçš„æ–¹æ³•è°ƒåº¦æ‰˜ç®¡è°ƒè¯•äº‹ä»¶&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿›ç¨‹(Process)ï¼š&lt;/strong&gt;è¿™ç»„æ¥å£è¡¨ç¤ºæ­£åœ¨è¿è¡Œçš„ä»£ç ï¼Œå¹¶åŒ…å«ä¸äº‹ä»¶ç›¸å…³çš„APIã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»£ç /ç±»å‹æ£€æŸ¥(Code / Type Inspection)ï¼š&lt;/strong&gt;Â ä¸»è¦å¯ä»¥åœ¨é™æ€PEæ˜ åƒä¸Šè¿è¡Œï¼Œä½†å®æ—¶æ•°æ®æœ‰ä¸€äº›ä¾¿â€‹â€‹æ·æ–¹æ³•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰§è¡Œæ§åˆ¶(Execution Control)ï¼š&lt;/strong&gt;æ‰§è¡Œæ˜¯â€œæ£€æŸ¥â€çº¿ç¨‹æ‰§è¡Œçš„èƒ½åŠ›ã€‚å®é™…ä¸Šï¼Œè¿™æ„å‘³ç€æ”¾ç½®æ–­ç‚¹ï¼ˆF9ï¼‰å’Œè¸©è¸ï¼ˆF11æ­¥å…¥ï¼ŒF10æ­¥è¿›ï¼ŒS + F11æ­¥å‡ºï¼‰ç­‰ã€‚ICorDebugçš„æ‰§è¡Œæ§åˆ¶ä»…åœ¨æ‰˜ç®¡ä»£ç ä¸­è¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çº¿ç¨‹+è°ƒç”¨å †æ ˆ(Threads + Callstacks)ï¼š&lt;/strong&gt;è°ƒç”¨å †æ ˆæ˜¯è°ƒè¯•å™¨æ£€æŸ¥åŠŸèƒ½çš„æ”¯æŸ±ã€‚ä»¥ä¸‹æ¥å£ä¸è·å–callstackæœ‰å…³ã€‚ICorDebugä»…å…¬å¼€è°ƒè¯•æ‰˜ç®¡ä»£ç ï¼Œå› æ­¤å †æ ˆè·Ÿè¸ªä»…å—ç®¡ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯¹è±¡æ£€æŸ¥(Object Inspection)ï¼š&lt;/strong&gt;å¯¹è±¡æ£€æŸ¥æ˜¯APIçš„ä¸€éƒ¨åˆ†ï¼Œå®ƒå…è®¸æ‚¨åœ¨æ•´ä¸ªè°ƒè¯•å¯¹è±¡ä¸­æŸ¥çœ‹å˜é‡çš„å€¼ã€‚å¯¹äºæ¯ä¸ªæ¥å£ï¼Œæˆ‘åˆ—å‡ºäº†â€œMVPâ€æ–¹æ³•ï¼Œæˆ‘è®¤ä¸ºå¿…é¡»ç®€æ´åœ°ä¼ è¾¾è¯¥æ¥å£çš„ç”¨é€”ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Profiling APIsä¸€æ ·ï¼Œè°ƒè¯•APIçš„æ”¯æŒçº§åˆ«å› æ“ä½œç³»ç»Ÿå’ŒCPUæ¶æ„è€Œå¼‚ã€‚ä¾‹å¦‚ï¼Œæˆªè‡³2018å¹´8æœˆï¼Œ&lt;a href=&quot;https://github.com/dotnet/diagnostics/issues/58#issuecomment-414182115&quot;&gt;â€œæ²¡æœ‰é’ˆå¯¹Linux ARMè¿›è¡Œæ‰˜ç®¡è°ƒè¯•å’Œè¯Šæ–­çš„è§£å†³æ–¹æ¡ˆâ€&lt;/a&gt;ã€‚æœ‰å…³â€œLinuxâ€æ”¯æŒçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…è¿™ç¯‡å¾ˆæ£’çš„æ–‡ç« ï¼Œ&lt;a href=&quot;https://www.raydbg.com/2018/Debugging-Net-Core-on-Linux-with-LLDB/&quot;&gt;åœ¨Linuxä¸Šä½¿ç”¨LLDBè°ƒè¯•.NET Coreï¼Œ&lt;/a&gt;å¹¶ä»MicrosoftÂ æ£€å‡º&lt;a href=&quot;https://github.com/dotnet/diagnostics&quot;&gt;è¯Šæ–­å­˜å‚¨åº“&lt;/a&gt;ï¼Œå…¶ç›®æ ‡æ˜¯æ›´å®¹æ˜“åœ¨Linuxä¸Šè°ƒè¯•.NETç¨‹åºã€‚&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œå¦‚æœä½ æƒ³çœ‹çœ‹&lt;code&gt;ICorDebug&lt;/code&gt;APIåœ¨Cï¼ƒä¸­çš„æ ·å­ï¼Œçœ‹ä¸€ä¸‹&lt;a href=&quot;https://github.com/Microsoft/clrmd/blob/master/src/Microsoft.Diagnostics.Runtime/ICorDebug/ICorDebugWrappers.cs&quot;&gt;CLRMDåº“ä¸­åŒ…å«&lt;/a&gt;çš„&lt;a href=&quot;https://github.com/Microsoft/clrmd/blob/master/src/Microsoft.Diagnostics.Runtime/ICorDebug/ICorDebugWrappers.cs&quot;&gt;åŒ…è£…å™¨&lt;/a&gt;ï¼ŒåŒ…æ‹¬æ‰€æœ‰&lt;a href=&quot;https://github.com/Microsoft/clrmd/blob/c81a592f3041a9ae86f4c09351d8183801e39eed/src/Microsoft.Diagnostics.Runtime/ICorDebug/ICorDebugHelpers.cs&quot;&gt;å¯ç”¨çš„å›è°ƒ&lt;/a&gt;ï¼ˆCLRMDå°†åœ¨åé¢çš„æ–‡ç« ä¸­è¿›è¡Œæ›´æ·±å…¥çš„ä»‹ç»ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id=&quot;soså’Œdac&quot;&gt;SOSå’ŒDAC&lt;/h3&gt;
&lt;p&gt;â€œæ•°æ®è®¿é—®ç»„ä»¶(Data Access Component)â€ï¼ˆDACï¼‰åœ¨&lt;a href=&quot;https://github.com/dotnet/coreclr/blob/master/Documentation/botr/dac-notes.md&quot;&gt;BOTRé¡µé¢&lt;/a&gt;ä¸­æœ‰è¯¦ç»†è®¨è®ºï¼Œä½†å®é™…ä¸Šå®ƒæä¾›äº†å¯¹CLRæ•°æ®ç»“æ„çš„â€œè¿›ç¨‹å¤–â€è®¿é—®ï¼Œå› æ­¤å¯ä»¥ä»&lt;em&gt;å¦ä¸€ä¸ªè¿›ç¨‹&lt;/em&gt;è¯»å–å…¶å†…éƒ¨è¯¦ç»†ä¿¡æ¯ã€‚è¿™å…è®¸è°ƒè¯•å™¨ï¼ˆviaÂ &lt;code&gt;ICorDebug&lt;/code&gt;ï¼‰æˆ–&lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/framework/tools/sos-dll-sos-debugging-extension&quot;&gt;'Son of Strike'ï¼ˆSOSï¼‰æ‰©å±•&lt;/a&gt;è¿›å…¥CLRçš„è¿è¡Œå®ä¾‹æˆ–å†…å­˜è½¬å‚¨ï¼Œå¹¶æ‰¾åˆ°å¦‚ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹&lt;/li&gt;
&lt;li&gt;æ‰˜ç®¡å †ä¸Šæœ‰å“ªäº›å¯¹è±¡&lt;/li&gt;
&lt;li&gt;æœ‰å…³æ–¹æ³•çš„å®Œæ•´ä¿¡æ¯ï¼ŒåŒ…æ‹¬æœºå™¨ä»£ç &lt;/li&gt;
&lt;li&gt;å½“å‰çš„'å †æ ˆè·Ÿè¸ª'&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;é™¤æ­¤ä¹‹å¤–&lt;/strong&gt;ï¼Œå¦‚æœæ‚¨æƒ³è¦è§£é‡Šæ‰€æœ‰å¥‡æ€ªçš„åç§°å’Œä¸€ç‚¹'.NETå†å²è¯¾'ï¼Œè¯·å‚é˜…&lt;a href=&quot;https://stackoverflow.com/questions/21361602/what-the-ee-means-in-sos/21363245#21363245&quot;&gt;æ­¤Stack Overflowç­”æ¡ˆ&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/dotnet/coreclr/blob/master/Documentation/building/debugging-instructions.md#sos-commands&quot;&gt;SOSå‘½ä»¤&lt;/a&gt;çš„å®Œæ•´åˆ—è¡¨éå¸¸ä»¤äººå°è±¡æ·±åˆ»ï¼Œå¹¶ä¸”åœ¨WinDBGæ—è¾¹ä½¿ç”¨å®ƒå¯ä»¥è®©æ‚¨éå¸¸ä½çº§åœ°äº†è§£ç¨‹åºå’ŒCLRä¸­å‘ç”Ÿçš„æƒ…å†µã€‚è¦äº†è§£å®ƒæ˜¯å¦‚ä½•å®ç°çš„ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹è¿™ä¸ª&lt;code&gt;!HeapStat&lt;/code&gt;å‘½ä»¤ï¼Œè¯¥å‘½ä»¤å¯ä»¥ä¸ºæ‚¨æä¾›.NET GCæ­£åœ¨ä½¿ç”¨çš„ä¸åŒå †å¤§å°çš„æ‘˜è¦ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/5590759-9a6b9693acb576d0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;image.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ï¼ˆæ¥è‡ª&lt;a href=&quot;https://blogs.msdn.microsoft.com/tom/2008/06/30/sos-upcoming-release-has-a-few-new-commands-heapstat/&quot;&gt;SOSçš„&lt;/a&gt;å›¾ç‰‡&lt;a href=&quot;https://blogs.msdn.microsoft.com/tom/2008/06/30/sos-upcoming-release-has-a-few-new-commands-heapstat/&quot;&gt;ï¼šå³å°†å‘å¸ƒçš„ç‰ˆæœ¬æœ‰ä¸€äº›æ–°å‘½ä»¤ - HeapStat&lt;/a&gt;ï¼‰&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ä»£ç æµï¼Œæ˜¾ç¤ºäº†SOSå’ŒDACå¦‚ä½•ååŒå·¥ä½œï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;SOS&lt;/strong&gt;å®Œæ•´&lt;code&gt;!HeapStat&lt;/code&gt;å‘½ä»¤ï¼ˆ&lt;a href=&quot;https://github.com/dotnet/coreclr/blob/release/2.1/src/ToolBox/SOS/Strike/strike.cpp#L4605-L4782&quot;&gt;é“¾æ¥&lt;/a&gt;ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SOS&lt;/strong&gt;&lt;code&gt;!HeapStat&lt;/code&gt;å¤„ç†'Workstation GC'Â çš„å‘½ä»¤ä¸­çš„ä»£ç ï¼ˆ&lt;a href=&quot;https://github.com/dotnet/coreclr/blob/release/2.1/src/ToolBox/SOS/Strike/strike.cpp#L4631-L4667&quot;&gt;é“¾æ¥&lt;/a&gt;ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SOS&lt;/strong&gt;Â &lt;code&gt;GCHeapUsageStats(..)&lt;/code&gt;åŠŸèƒ½ï¼Œé‡è´Ÿè·ï¼ˆ&lt;a href=&quot;https://github.com/dotnet/coreclr/blob/release/2.1/src/ToolBox/SOS/Strike/eeheap.cpp#L768-L850&quot;&gt;é“¾æ¥&lt;/a&gt;ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…±äº«&lt;/strong&gt;&lt;code&gt;DacpGcHeapDetails&lt;/code&gt;åŒ…å«æŒ‡å‘GCå †ä¸­ä¸»æ•°æ®çš„æŒ‡é’ˆçš„æ•°æ®ç»“æ„ï¼Œä¾‹å¦‚æ®µï¼Œå¡è¡¨å’Œå„ä»£ï¼ˆ&lt;a href=&quot;https://github.com/dotnet/coreclr/blob/release/2.1/src/inc/dacprivate.h#L690-L722&quot;&gt;é“¾æ¥&lt;/a&gt;ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;GetGCHeapStaticData&lt;/code&gt;å¡«å……&lt;code&gt;DacpGcHeapDetails&lt;/code&gt;ç»“æ„çš„&lt;strong&gt;DAC&lt;/strong&gt;å‡½æ•°ï¼ˆ&lt;a href=&quot;https://github.com/dotnet/coreclr/blob/release/2.1/src/inc/dacprivate.h#L690-L722&quot;&gt;é“¾æ¥&lt;/a&gt;ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…±äº«&lt;/strong&gt;&lt;code&gt;DacpHeapSegmentData&lt;/code&gt;åŒ…å«GCå †çš„å•ä¸ªâ€œæ®µâ€çš„è¯¦ç»†ä¿¡æ¯çš„æ•°æ®ç»“æ„ï¼ˆ&lt;a href=&quot;https://github.com/dotnet/coreclr/blob/release/2.1/src/inc/dacprivate.h#L738-L771&quot;&gt;é“¾æ¥&lt;/a&gt;ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;GetHeapSegmentData(..)&lt;/code&gt;å¡«å……&lt;code&gt;DacpHeapSegmentData&lt;/code&gt;ç»“æ„çš„&lt;strong&gt;DAC&lt;/strong&gt;ï¼ˆ&lt;a href=&quot;https://github.com/dotnet/coreclr/blob/release/2.1/src/debug/daccess/request.cpp#L2829-L2868&quot;&gt;é“¾æ¥&lt;/a&gt;ï¼‰&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;ç¬¬ä¸‰æ–¹è°ƒè¯•å™¨3rd-party-debuggers&quot;&gt;ç¬¬ä¸‰æ–¹'è°ƒè¯•å™¨'(3rd Party â€˜Debuggersâ€™)&lt;/h3&gt;
&lt;p&gt;ç”±äºMicrosoftå‘å¸ƒäº†è°ƒè¯•APIï¼Œå®ƒå…è®¸ç¬¬ä¸‰æ–¹ä½¿ç”¨&lt;code&gt;ICorDebug&lt;/code&gt;æ¥å£ï¼Œè¿™é‡Œåˆ—å‡ºäº†æˆ‘é‡åˆ°çš„ä¸€äº›å†…å®¹ï¼š&lt;/p&gt;
&lt;h3 id=&quot;è®°å¿†è½¬å‚¨memory-dumps&quot;&gt;è®°å¿†è½¬å‚¨(Memory Dumps)&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬è¦çœ‹çš„æœ€åä¸€ä¸ªåŒºåŸŸæ˜¯â€œå†…å­˜è½¬å‚¨â€ï¼Œå¯ä»¥ä»&lt;em&gt;å®æ—¶&lt;/em&gt;ç³»ç»Ÿä¸­æ•è·å¹¶ç¦»çº¿åˆ†æã€‚.NETè¿è¡Œæ—¶ä¸€ç›´å¾ˆå¥½åœ°æ”¯æŒ&lt;a href=&quot;https://msdn.microsoft.com/en-us/library/dn342825.aspx?f=255&amp;amp;MSPPError=-2147217396#BKMK_Collect_memory_snapshots&quot;&gt;åœ¨Windowsä¸Šåˆ›å»ºâ€œå†…å­˜è½¬å‚¨â€&lt;/a&gt;ï¼Œç°åœ¨.NET Coreæ˜¯â€œè·¨å¹³å°â€ï¼Œä¹Ÿå¯ä»¥&lt;a href=&quot;https://github.com/dotnet/coreclr/blob/master/Documentation/botr/xplat-minidump-generation.md&quot;&gt;åœ¨å…¶ä»–æ“ä½œç³»ç»Ÿä¸Šä½¿ç”¨ç›¸åŒçš„&lt;/a&gt;å·¥å…·ã€‚&lt;/p&gt;
&lt;p&gt;â€œå†…å­˜è½¬å‚¨â€çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œè·å–SOSå’ŒDACæ–‡ä»¶çš„æ­£ç¡®åŒ¹é…ç‰ˆæœ¬å¯èƒ½ä¼šéå¸¸æ£˜æ‰‹ã€‚å¹¸è¿çš„æ˜¯ï¼ŒMicrosoftåˆšåˆšå‘å¸ƒäº†ä»¥ä¸‹&lt;a href=&quot;https://github.com/dotnet/symstore/tree/master/src/dotnet-symbol&quot;&gt;&lt;code&gt;dotnet symbol&lt;/code&gt;CLIå·¥å…·&lt;/a&gt;ï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;å¯ä»¥ä¸‹è½½ä»»ä½•ç»™å®šæ ¸å¿ƒè½¬å‚¨ï¼Œminidumpæˆ–ä»»ä½•æ”¯æŒå¹³å°çš„æ–‡ä»¶æ ¼å¼ï¼ˆå¦‚ELFï¼ŒMachOï¼ŒWindows DLLï¼ŒPDBå’Œä¾¿æºå¼PDBï¼‰çš„è°ƒè¯•æ‰€éœ€çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆç»™å‡ºcoreclræ¨¡å—çš„ç¬¦å·ï¼Œæ¨¡å—ï¼ŒSOSå’ŒDACï¼‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æœ€åï¼Œå¦‚æœä½ èŠ±è´¹ä»»ä½•æ—¶é—´&lt;strong&gt;åˆ†æ'å†…å­˜è½¬å‚¨'ï¼Œ&lt;/strong&gt;ä½ çœŸçš„åº”è¯¥çœ‹çœ‹å¾®è½¯å‡ å¹´å‰å‘å¸ƒçš„ä¼˜ç§€çš„&lt;a href=&quot;https://github.com/Microsoft/clrmd&quot;&gt;CLR MDåº“&lt;/a&gt;ã€‚æˆ‘ä¹‹å‰&lt;a href=&quot;http://mattwarren.org/2016/09/06/Analysing-.NET-Memory-Dumps-with-CLR-MD/&quot;&gt;å·²ç»å†™è¿‡&lt;/a&gt;ä½ å¯ä»¥ç”¨å®ƒåšä»€ä¹ˆï¼Œä½†ç®€è€Œè¨€ä¹‹ï¼Œå®ƒå…è®¸ä½ é€šè¿‡ä¸€ä¸ªç›´è§‚çš„Cï¼ƒAPIä¸å†…å­˜è½¬å‚¨äº¤äº’ï¼Œå…¶ä¸­çš„ç±»å¯ä»¥è®¿é—®&lt;a href=&quot;https://github.com/Microsoft/clrmd/blob/master/src/Microsoft.Diagnostics.Runtime/ClrHeap.cs#L16&quot;&gt;ClrHeap&lt;/a&gt;ï¼Œ&lt;a href=&quot;https://github.com/Microsoft/clrmd/blob/6735e1012d11c244874fa3ba3af6e73edc0da552/src/Microsoft.Diagnostics.Runtime/GCRoot.cs#L105&quot;&gt;GC Roots&lt;/a&gt;ï¼Œ&lt;a href=&quot;https://github.com/Microsoft/clrmd/blob/master/src/Microsoft.Diagnostics.Runtime/ClrThread.cs#L103&quot;&gt;CLR Threads&lt;/a&gt;ï¼Œ&lt;a href=&quot;https://github.com/Microsoft/clrmd/blob/master/src/Microsoft.Diagnostics.Runtime/ClrThread.cs#L37&quot;&gt;Stack Frames&lt;/a&gt;å’Œ&lt;a href=&quot;https://github.com/Microsoft/clrmd/tree/master/src/Samples&quot;&gt;æ›´å¤š&lt;/a&gt;ã€‚å®é™…ä¸Šï¼Œé™¤äº†å®ç°å·¥ä½œæ‰€éœ€çš„æ—¶é—´ä¹‹å¤–ï¼ŒCLR MDè¿˜å¯ä»¥&lt;a href=&quot;https://github.com/Microsoft/clrmd/issues/33&quot;&gt;å®ç°&lt;em&gt;å¤§å¤šæ•°&lt;/em&gt;ï¼ˆå¦‚æœä¸æ˜¯å…¨éƒ¨ï¼‰SOSå‘½ä»¤&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ä»&lt;a href=&quot;https://blogs.msdn.microsoft.com/dotnet/2013/05/01/net-crash-dump-and-live-process-inspection/&quot;&gt;å®£å¸ƒå¸–å­&lt;/a&gt;æ¥çœ‹å®ƒæ˜¯å¦‚ä½•è¿ä½œ&lt;a href=&quot;https://blogs.msdn.microsoft.com/dotnet/2013/05/01/net-crash-dump-and-live-process-inspection/&quot;&gt;çš„&lt;/a&gt;ï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;ClrMDæ‰˜ç®¡åº“æ˜¯CLRä»…å†…éƒ¨è°ƒè¯•APIçš„åŒ…è£…å™¨ã€‚è™½ç„¶è¿™äº›ä»…å†…éƒ¨APIå¯¹äºè¯Šæ–­éå¸¸æœ‰ç”¨ï¼Œä½†æˆ‘ä»¬ä¸æ”¯æŒå®ƒä»¬ä½œä¸ºå…¬å¼€çš„ï¼Œæœ‰æ–‡æ¡£çš„ç‰ˆæœ¬ï¼Œå› ä¸ºå®ƒä»¬éå¸¸éš¾ä»¥ä½¿ç”¨å¹¶ä¸”ä¸CLRçš„å…¶ä»–å®ç°ç»†èŠ‚ç´§å¯†è€¦åˆã€‚ClrMDé€šè¿‡å›´ç»•è¿™äº›ä½çº§è°ƒè¯•APIæä¾›æ˜“äºä½¿ç”¨çš„æ‰˜ç®¡åŒ…è£…æ¥è§£å†³æ­¤é—®é¢˜ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;é€šè¿‡åœ¨å®˜æ–¹æ”¯æŒçš„åº“ä¸­æä¾›è¿™äº›APIï¼ŒMicrosoftä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿåœ¨CLRMDä¹‹ä¸Šæ„å»º&lt;a href=&quot;http://mattwarren.org/2018/06/15/Tools-for-Exploring-.NET-Internals/#tools-based-on-clr-memory-diagnostics-clrmd&quot;&gt;å„ç§å·¥å…·&lt;/a&gt;ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç»“æœï¼&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;&lt;strong&gt;æ€»è€Œè¨€ä¹‹ï¼Œ.NET Runtimeæä¾›äº†å¹¿æ³›çš„è¯Šæ–­ï¼Œè°ƒè¯•å’Œåˆ†æåŠŸèƒ½ï¼Œå¯ä»¥æ·±å…¥äº†è§£CLRå†…éƒ¨çš„æƒ…å†µã€‚&lt;/strong&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 16 Oct 2018 07:52:00 +0000</pubDate>
<dc:creator>Alin-</dc:creator>
<og:description>ä»Šå¹´5æœˆä»½çš„æ—¶å€™ç ”ç©¶åˆ†å¸ƒå¼è¿½è¸ªçš„é—®é¢˜çŸ¥é“äº†çš„æ‹¦æˆªæ–¹å¼æ¯”è¾ƒé›¶æ•£ï¼Œ åˆšå¥½8æœˆä»½çš„æ—¶å€™çœ‹åˆ°è¿™ç¯‡æ–‡ç« ï¼Œè¿™ä¸ªæ–‡ç« æ€»ç»“çš„æ¯”è¾ƒå®Œæ•´ã€‚å­˜æ¡£äº†å¾ˆä¹…ï¼Œè¶ä»Šå¤©æœ‰ç©ºç¿»è¯‘ç»™å¤§å®¶ã€‚</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/WithLin/p/9798485.html</dc:identifier>
</item>
<item>
<title>NLPæ˜¯ä»€ä¹ˆ - ä»—å‰‘èµ°å¤©æ¶¯|</title>
<link>http://www.cnblogs.com/chenliangcl/p/9798397.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/chenliangcl/p/9798397.html</guid>
<description>&lt;p&gt;è€Œåœ¨è®¡ç®—æœºé¢†åŸŸï¼Œ NLPï¼ˆNatural Language Processingï¼‰ï¼Œä¹Ÿå°±æ˜¯äººä»¬å¸¸è¯´çš„ã€Œè‡ªç„¶è¯­è¨€å¤„ç†ã€ï¼Œå°±æ˜¯ç ”ç©¶å¦‚ä½•è®©è®¡ç®—æœºè¯»æ‡‚äººç±»è¯­è¨€ã€‚&lt;/p&gt;
&lt;p&gt;è¿™åŒ…æ‹¬ï¼Œæ—¢è¦èƒ½è®©è®¡ç®—æœºç†è§£è‡ªç„¶è¯­è¨€æ–‡æœ¬çš„æ„ä¹‰ï¼Œä¹Ÿèƒ½ä»¥è‡ªç„¶è¯­è¨€æ–‡æœ¬æ¥è¡¨è¾¾ç»™å®šçš„æ·±å±‚çš„æ„å›¾ã€æ€æƒ³ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/388326/201810/388326-20181016153716614-2077550262.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ï¼Œè¿™é¡¹æŠ€æœ¯å¾€å¾€ä½“ç°äº†äººå·¥æ™ºèƒ½çš„æœ€é«˜ä»»åŠ¡ä¸å¢ƒç•Œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰å½“è®¡ç®—æœºå…·å¤‡äº†ç†è§£è‡ªç„¶è¯­è¨€çš„èƒ½åŠ›æ—¶ï¼Œæœºå™¨æ‰ç®—å®ç°äº†çœŸæ­£çš„æ™ºèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œè¿™ä¸€åˆ‡è¿œéäººä»¬æƒ³è±¡çš„é‚£ä¹ˆç®€å•ã€‚ æ ¹æœ¬åŸå› å°±åœ¨äºè‡ªç„¶è¯­è¨€æ–‡æœ¬å’Œå¯¹è¯çš„å„ä¸ªå±‚æ¬¡ä¸Šå¹¿æ³›å­˜åœ¨å„ç§å„æ ·çš„æ­§ä¹‰æ€§æˆ–å¤šä¹‰æ€§ã€‚&lt;/p&gt;
&lt;p&gt;å¹¶ä¸”ï¼Œç”±äºä¸­æ–‡è¯è¯­æ˜¯ç”±æ±‰å­—åƒå˜ä¸‡åŒ–ç»„æˆçš„ï¼Œæ‰€ä»¥ä¸­æ–‡é¢†åŸŸçš„ã€Œè‡ªç„¶è¯­è¨€å¤„ç†ã€æ˜¾å¾—å°¤ä¸ºå¤æ‚ã€‚&lt;/p&gt;
&lt;p&gt;ä¸“æ³¨äºã€Œè‡ªç„¶è¯­è¨€å¤„ç†ã€é¢†åŸŸå¤šå¹´, æ·±è€•ã€Œè¯­ä¹‰åˆ†æã€æŠ€æœ¯ï¼Œ NLP çš„æŠ€æœ¯å’ŒæœåŠ¡ä¸€ç›´ä¼´éšç€ ImageQ çš„å‘å±•è€Œä¸æ–­è¿›æ­¥ã€‚&lt;/p&gt;
&lt;p&gt;ä»ã€Œä¸­æ–‡åˆ†è¯ã€ã€ã€Œè¯äº‘ç”»åƒã€ã€ã€Œè¯æ€§åˆ†æã€åˆ°ã€Œè‡ªåŠ¨æ‘˜è¦ã€ã€ã€Œå…³ç³»æŒ–æ˜ã€ã€ã€Œæƒ…æ„Ÿåˆ†æã€ã€ã€ŒçŸ¥è¯†å›¾è°±ã€ç­‰ï¼ŒNLP æŠ€æœ¯å·²ä¸å†å•çº¯çš„åœç•™åœ¨æ¦‚å¿µå±‚é¢ï¼Œ è€Œæ˜¯é€æ­¥æ¸—é€å¹¶æˆåŠŸåº”ç”¨åœ¨ ImageQ æœåŠ¡çš„å„ä¸ªå‚ç›´é¢†åŸŸä¸­ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆéœ€è¦NLP&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/388326/201810/388326-20181016153758883-1712150415.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬æ€»ä¼šç¢°åˆ°ä¸€äº›ä¸çŸ¥é“æ€ä¹ˆè¯»çš„ç”Ÿåƒ»å­—ï¼Œ è¿™æ—¶å¾€å¾€å°±ä¼šå»æœç´¢å¼•æ“æœç´¢ï¼Œæ¯”å¦‚â€œ 4 ä¸ªåˆå¿µä»€ä¹ˆâ€ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å‘ç°ï¼Œæœç´¢ç»“æœä¸€å®šæ˜¯å‘ä½ å±•ç¤ºâ€œ 4 ä¸ªåˆç»„æˆçš„å­—â€æ˜¯æ€æ ·çš„ï¼Œå¹¶ä¸€æ—é™„ä¸Šæ‹¼éŸ³åŠæ³¨é‡Šç­‰ï¼Œè€Œä¸æ˜¯â€œ 4 ä¸ªåˆå¿µä»€ä¹ˆâ€è¿™å‡ ä¸ªå­¤é›¶é›¶çš„è¯æˆ–è€…å…¶è¡¨é¢çš„åŒ¹é…ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/388326/201810/388326-20181016153830914-1045363378.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;â–²æœç´¢å¼•æ“ç›¸å…³ç»“æœå±•ç¤º&lt;/p&gt;
&lt;p&gt;è¿™å…¶å®å°±æ˜¯NLPæŠ€æœ¯çš„ä¸€ä¸ªä½“ç°äº†ã€‚é€šè¿‡è¿™é¡¹æŠ€æœ¯ï¼Œäººä»¬ä¸å¿…èŠ±è´¹å¤§é‡å¿ƒåŠ›å»å­¦ä¹ å’Œäº†è§£éš¾æ‡‚çš„è®¡ç®—æœºè¯­è¨€ï¼Œè€Œæ˜¯ç”¨è‡ªå·±æœ€ä¹ æƒ¯çš„è¯­è¨€æ¥ä½¿ç”¨è®¡ç®—æœºï¼Œå¹¶è¿›ä¸€æ­¥äº†è§£è¿™èƒŒåçš„æ„ä¹‰ã€‚&lt;/p&gt;
&lt;p&gt;NLP ç©¶ç«Ÿèƒ½ç”¨æ¥å¹²ä»€ä¹ˆ&lt;/p&gt;
&lt;p&gt;é‚£ NLP ç©¶ç«Ÿèƒ½å¹²äº›ä»€ä¹ˆå‘¢ï¼Ÿ æˆ‘ä»¬ç±»æ¯”å°å­©å­çš„å­¦ä¹ ä¹‹è·¯ï¼Œå¹¶ç»“åˆ ImageQ å¹³å°å¼€æ”¾çš„å‡ é¡¹å…¸å‹ NLP æŠ€æœ¯æ¥è¿›è¡Œä¸€ä¸‹è¯´æ˜ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;
&lt;p&gt;å¹¼å„¿å›­æ—¶æœŸ&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;è¿™ä¸ªæ—¶æœŸçš„æˆ‘ä»¬ï¼Œæ¥æ”¶åˆ°çš„è¿˜åªæ˜¯å•ä¸ªçš„è¯ã€æˆ–çŸ­æˆ–é•¿çš„å¥å­ï¼Œæˆ‘ä»¬ä¸äº†è§£è¿™å…¶ä¸­çš„åŠ¨è¯ã€åè¯æœ‰å“ªäº›ï¼Œæä¸æ‡‚å½“ä¸­çš„ä¸»ä½“åˆæ˜¯è°ï¼Œä¹Ÿå°šä¸æ¸…æ¥šæ ‡ç‚¹ç¬¦å·ã€åˆ†éš”ç¬¦æ˜¯ä»€ä¹ˆæ„æ€ï¼Œåªæ˜¯å•çº¯çš„ä½ è¯´ä¸€å¥ï¼Œæˆ‘å­¦ä¸€å¥äº†ï¼Œå°è„‘è¢‹é‡Œå……æ–¥ç€å„æ ·çš„ä¸œè¥¿ï¼Œä½†æ›´å¤šæ˜¯æ‚ä¹±çš„ï¼Œå°‘æœ‰ç« æ³•å¯è¨€çš„ã€‚&lt;/p&gt;
&lt;p&gt;å¥½æ¯”æˆ‘ä»¬èº«å¤„çš„ä¿¡æ¯çš„æµ·æ´‹ï¼Œæ¯å¤©ï¼Œå„ç±»ä¿¡æ¯å’Œæ•°æ®ä¸æ–­æ¶Œç°ï¼Œå°šæœªå¤„ç†æ¶ˆåŒ–ï¼Œæ–°ä¸€è½®çš„ä¿¡æ¯è½°ç‚¸åˆéšå³å±•å¼€ï¼Œè€Œåä¸æ–­å †ç§¯ï¼Œå†æ¶Œç°ï¼Œå†å †ç§¯......&lt;/p&gt;
&lt;p&gt;åˆ°æœ€åé‡‡é›†æ¥çš„ä¹Ÿéƒ½æ˜¯æ‚ä¹±çš„ï¼Œæ–­å±‚çš„ï¼Œä¸€äº›æœ‰ä»·å€¼çš„å†…å®¹ä¹Ÿå¾€å¾€åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æ¸æ¸æµå¤±äº†ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;
&lt;p&gt;å°å­¦æ—¶æœŸ&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;åˆ°äº†å°å­¦ï¼Œæˆ‘ä»¬èƒ½å­¦ä¹ åˆ°çš„å†…å®¹æ…¢æ…¢å¤šäº†èµ·æ¥ï¼Œ æˆ‘ä»¬çŸ¥é“äº†â€œæ‘˜â€æ˜¯åŠ¨è¯ï¼Œâ€œèŠ±â€æ˜¯åè¯, â€œå’Œâ€æ˜¯è¿è¯ç­‰ç­‰ï¼Œæ¸…æ¥šæ ‡ç‚¹ç¬¦å·æœ‰â€œï¼Œâ€â€œã€‚â€â€œï¼Ÿâ€ç­‰ï¼Œä¹Ÿå­¦ä¼šäº†å¦‚ä½•åˆ†è¯ã€æ–­å¥ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹åº”åœ¨NLPé¢†åŸŸï¼Œåˆ™æ˜¯ã€Œä¸­æ–‡åˆ†è¯ã€ã€ã€Œè¯æ€§åˆ†æã€ç­‰å±‚é¢çš„å±•ç°äº†ã€‚&lt;/p&gt;
&lt;p&gt;â– ä¸­æ–‡åˆ†è¯&lt;/p&gt;
&lt;p&gt;ã€Œä¸­æ–‡è‡ªåŠ¨åˆ†è¯ã€å¤„äºä¸­æ–‡è‡ªç„¶è¯­è¨€å¤„ç†çš„åº•å±‚ï¼Œæ˜¯å…¬è®¤çš„ä¸­æ–‡ä¿¡æ¯å¤„ç†çš„ç¬¬ä¸€é“å·¥åºï¼Œæ‰®æ¼”ç€é‡è¦çš„è§’è‰²ï¼Œ è€Œå•è¯åˆ‡åˆ†åˆæ˜¯ç†è§£è¯­è¨€çš„æœ€åˆçš„ä¸€é“å·¥åºã€‚&lt;/p&gt;
&lt;p&gt;è‰¯å¥½çš„åˆ†è¯æ•ˆæœèƒ½ä¸ºæœºå™¨ç†è§£æä¾›åŸºç¡€ï¼Œä¹Ÿä¸ºäººä»¬åšå‡ºæ›´å¥½ã€æ›´æ­£ç¡®çš„å†³ç­–æä¾›ä¸€å®šä¾æ®ã€‚&lt;/p&gt;
&lt;p&gt;â– è¯æ€§åˆ†æ&lt;/p&gt;
&lt;p&gt;åœ¨åˆ†è¯çš„åŸºç¡€ä¹‹ä¸Šï¼Œæˆ‘ä»¬ä¸ºæ¯ä¸ªåˆ†è¯ç»“æœä¸­çš„å•è¯å•ç‹¬æ ‡æ³¨ä¸€ä¸ªæ­£ç¡®çš„è¯æ€§ï¼Œç¡®å®šæ¯ä¸ªè¯æ˜¯åŠ¨è¯ã€åè¯ã€å½¢å®¹è¯æˆ–å…¶ä»–ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/388326/201810/388326-20181016153916841-16245553.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;â–²è¯æ€§åˆ†æ&lt;/p&gt;
&lt;p&gt;åŒä¸€ä¸ªè¯æ€§åœ¨ä¸åŒåœºæ™¯ä¸‹æ‰€ä»£è¡¨çš„å…·ä½“å±æ€§ä¹Ÿä¼šä¸ä¸€æ ·ã€‚æ¯”å¦‚â€œåˆ€â€ç”¨äºæ—¥å¸¸ç”Ÿæ´»ä¸­ä¼šæ˜¯çƒ¹é¥ªå·¥å…·ï¼Œè€Œæ”¾åœ¨å…¬å®‰äº‹ä»¶ä¸­ï¼Œåˆ™åˆå¯èƒ½æ˜¯ä¸€ç§ä½œæ¡ˆå·¥å…·äº†ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡é¢†å…ˆçš„å…·æœ‰è‡ªä¸»çŸ¥è¯†äº§æƒçš„ä¸“åˆ©ç®—æ³•â€”â€”åŸºäºBI-LSTMå’ŒCRFçš„æ–‡æœ¬åºåˆ—æ ‡æ³¨ç³»ç»ŸåŠæ–¹æ³•ï¼Œè¿ç”¨è¯­è¨€å­¦é€»è¾‘è§£æ„æ–‡å­—è§„å¾‹ï¼Œå¹¶ç»“åˆã€Œæ·±åº¦å­¦ä¹ ã€ç®—æ³•ä¼˜åŒ–åˆ¤æ–­å­—è¯ä¹‹é—´çš„è¯­ä¹‰è§„åˆ™ï¼Œç›¸è¾ƒäºä¼ ç»Ÿè‡ªç„¶è¯­è¨€å¤„ç†ç³»ç»Ÿï¼ŒImageQ æ”¯æŒæ›´ç²¾å‡†çš„è¯­ä¹‰è¯†åˆ«ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/388326/201810/388326-20181016153946392-299126557.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;â–²ç›¸å…³æŠ€æœ¯å®ç°æµç¨‹&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;
&lt;p&gt;ä¸­å­¦æ—¶æœŸ&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬çš„å­¦ä¹ æœ‰äº†æ›´å¹¿æ³›çš„æ¶‰çŒï¼Œä¹Ÿå¼€å§‹è¦å­¦ç€æç‚¼æ–‡ç« çš„ä¸­å¿ƒæ€æƒ³ï¼Œ è§‚ç‚¹å€¾å‘ï¼Œåˆ†æä¸ªä¸­äººç‰©ã€äº‹ä»¶å…³ç³»ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;è¿™åˆæ¶‰åŠåˆ°è‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„ã€Œä¾å­˜å¥æ³•ã€ã€ã€Œè‡ªåŠ¨æ‘˜è¦ã€ã€ã€Œæƒ…æ„Ÿè¯„åˆ†ã€å±‚çº§çš„å†…å®¹ã€‚æˆ‘ä»¬ä¸»è¦è®²ä¸€ä¸‹ã€Œæƒ…æ„Ÿè¯„åˆ†ã€ã€‚&lt;/p&gt;
&lt;p&gt;ã€Œæƒ…æ„Ÿè¯„åˆ†ã€å³æ–‡æœ¬å€¾å‘æ€§åˆ†æï¼Œä¾æ‰˜ã€Œæ·±åº¦å­¦ä¹ ã€ã€ã€Œæœºå™¨å­¦ä¹ ã€ç­‰è¯­ä¹‰ç†è§£æŠ€æœ¯ï¼Œèƒ½å¿«é€Ÿåˆ¤åˆ«å¤§ä¼—å¯¹æŸä¸€äº‹ä»¶æˆ–äº§å“æŒç§¯æã€ä¸­æ€§è¿˜æ˜¯æ¶ˆææ€åº¦ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚æˆ‘ä»¬ç»™å®šã€Œåä¹å¤§ã€æŠ¥å‘Šï¼Œå…¶å‘ˆç°å‡ºæ¥æƒ…æ„Ÿè¯„åˆ†è¿œè¿œå¤§äº 1ï¼Œæ˜¯ç§¯æçš„æ­£é¢æƒ…ç»ªä¸ºä¸»ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/388326/201810/388326-20181016154009206-1667185712.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;â–²ã€Œåä¹å¤§ã€æŠ¥å‘Šçš„æƒ…ç»ªè¯„åˆ†&lt;/p&gt;
&lt;p&gt;å…·æœ‰è‡ªä¸»çŸ¥è¯†äº§æƒçš„ ImageQ è¯­ä¹‰åˆ†æå¼•æ“æä¾›è¡Œä¸šé¢†å…ˆçš„Â ImageQNLPÂ å’ŒÂ ImageQMindÂ è¯­ä¹‰åˆ†ææŠ€æœ¯ï¼Œ åŸºäºå¤§æ•°æ®è¯åº“è¾…åŠ©å’Œå¤§é‡çš„è¡Œä¸šè¯­æ–™åº“ï¼Œé€šè¿‡ã€Œå¥æ³•åˆ†æã€å’Œã€Œæœºå™¨å­¦ä¹ ã€ç­‰æ–¹æ³•å®ç°æ™ºèƒ½è¯­ä¹‰åˆ†æã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç‰¹å®šåœºæ™¯ä¸‹çš„æ­£è´Ÿé¢æƒ…æ„Ÿåˆ†æå‡†ç¡®åº¦è¾¾åˆ°Â 85% ~ 90%Â ã€‚ç»è¿‡è¡Œä¸šæ•°æ®æ ‡æ³¨å­¦ä¹ åå‡†ç¡®ç‡å¯è¾¾ 90% ~ 95%ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;
&lt;p&gt;å¤§å­¦æ—¶æœŸ&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;é€šè¿‡ç§¯ç´¯ï¼Œæˆ‘ä»¬å·²é€æ­¥å½¢æˆè‡ªæœ‰çš„æ€ç»´æ–¹å¼å’ŒçŸ¥è¯†ä½“ç³»ï¼Œ åœ¨æ¢ç´¢æ–°æŠ€æœ¯çš„åŒæ—¶ï¼Œä¹Ÿå¼€å§‹è¯•ç€å°†æ‰€å­¦åº”ç”¨åˆ°å®é™…ï¼Œè§£å†³æŸäº›ç°å®é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ã€Œåª’ä½“ã€ï¼Œã€Œæ”¿åºœã€ã€ã€Œå…¬å®‰ã€ç­‰é¢†åŸŸå¤šå¹´çš„ç§¯ææ¢ç´¢ï¼ŒImageQ æ²‰æ·€äº†ä¸å°‘æŠ€æœ¯ï¼Œç§¯ç´¯äº†å¤§é‡çš„è¡Œä¸šè¯­æ–™ï¼Œè¯åº“å’ŒçŸ¥è¯†åº“ï¼ŒåŒæ—¶ä¹Ÿæ±‡èšäº†ä¼—å¤šå›½å†…å¤–ä¼˜ç§€çš„ä¸“å®¶å›¢é˜ŸååŒåˆä½œï¼Œå…±åŒåŠ©åŠ›ä¸ºè¡Œä¸šå®¢æˆ·è§£å†³å…¶æœ€é‡è¦æœ€å®é™…çš„é—®é¢˜ï¼Œå¤§é‡åº”ç”¨åœºæ™¯å’Œæ¡ˆä¾‹ä¹Ÿéƒ½è·å¾—å®¢æˆ·çš„é«˜åº¦è®¤å¯ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶ç°é˜¶æ®µé’ˆå¯¹ä¸€å®šåº”ç”¨ï¼Œ å…·æœ‰ç›¸å½“ã€Œè‡ªç„¶è¯­è¨€å¤„ç†ã€èƒ½åŠ›çš„å¹³å°å·²ç»å‡ºç°ï¼Œå¹¶å•†å“åŒ–ï¼Œç”šè‡³å¼€å§‹äº§ä¸šåŒ–ã€‚ä½†å¯¹ã€Œè‡ªç„¶è¯­è¨€å¤„ç†ã€çš„æ¢ç´¢ï¼Œ è¿™è¿˜ä»æœªç§°å¾—ä¸Šæ˜¯ç»ˆç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡å¯ä»¥é¢„è§çš„æ˜¯ï¼Œä¸è®ºæ˜¯æ¢ç©¶è‡ªç„¶æœ¬è´¨è¿˜æ˜¯ä»˜è¯¸å®é™…åº”ç”¨, NLP æŠ€æœ¯åœ¨å°†æ¥å¿…å®šä¼šæœ‰ä»¤äººæœŸå¾…çš„æƒŠå–œå’Œå¼‚å¸¸å¿«é€Ÿçš„å‘å±•ã€‚&lt;/p&gt;
</description>
<pubDate>Tue, 16 Oct 2018 07:44:00 +0000</pubDate>
<dc:creator>ä»—å‰‘èµ°å¤©æ¶¯|</dc:creator>
<og:description>NLPæ˜¯ä»€ä¹ˆ NLPæ˜¯ä»€ä¹ˆ è€Œåœ¨è®¡ç®—æœºé¢†åŸŸï¼Œ NLPï¼ˆNatural Language Processingï¼‰ï¼Œä¹Ÿå°±æ˜¯äººä»¬å¸¸è¯´çš„ã€Œè‡ªç„¶è¯­è¨€å¤„ç†ã€ï¼Œå°±æ˜¯ç ”ç©¶å¦‚ä½•è®©è®¡ç®—æœºè¯»æ‡‚äººç±»è¯­è¨€ã€‚ è¿™åŒ…æ‹¬ï¼Œæ—¢è¦èƒ½è®©è®¡</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/chenliangcl/p/9798397.html</dc:identifier>
</item>
<item>
<title>åŸºäºlibcurlå®ç°RESTé£æ ¼http/httpsçš„getå’Œpost - èœ—ç‰›201</title>
<link>http://www.cnblogs.com/woniu201/p/9798278.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/woniu201/p/9798278.html</guid>
<description>&lt;p&gt;c/c++å¼€å‘ä¸­ç»å¸¸è¦ç”¨åˆ°http/httpsåè®®ï¼Œç›´æ¥ä½¿ç”¨socketå·¥ä½œé‡å¾ˆå¤§ï¼Œè¦æ˜¯ä½¿ç”¨socketå®ç°httpsï¼Œé‚£æ›´ä¸å¯æ€è®®ï¼Œå¼€æºçš„c/c++çš„httpå®¢æˆ·ç«¯æ¡†æ¶ï¼Œlibcurlæ˜¯é¦–é€‰ï¼Œè€Œä¸”ä¹Ÿç›¸å½“æˆç†Ÿç¨³å®šï¼Œæœ€è¿‘C++é¡¹ç›®ä¸­ç”¨åˆ°httpsè¯·æ±‚ï¼Œå°±åšä¸‹ç ”ç©¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;libcurlç®€ä»‹(æ¥æºå®˜ç½‘)&lt;/strong&gt;&lt;/span&gt;&lt;br/&gt;libcurlæ˜¯ä¸€ä¸ªè·¨å¹³å°çš„ç½‘ç»œåè®®åº“ï¼Œæ”¯æŒhttp, https, ftp, gopher, telnet, dict, file, å’Œldap åè®®ã€‚libcurlåŒæ ·æ”¯æŒHTTPSè¯ä¹¦æˆæƒï¼ŒHTTP POST, HTTP PUT,Â FTP ä¸Šä¼ , HTTPåŸºæœ¬è¡¨å•ä¸Šä¼ ï¼Œä»£ç†ï¼Œcookies,å’Œç”¨æˆ·è®¤è¯ã€‚å®˜ç½‘åœ°å€ï¼šhttps://curl.haxx.se/libcurl/&lt;/p&gt;
&lt;h3&gt;&lt;span&gt;&lt;strong&gt;å®ç°HTTP/GETï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/h3&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;61&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt;*******************************************************
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;Copyright (C),  2016-2018,
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;FileName:        Get
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; &lt;span&gt;Author:            woniu201
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt; &lt;span&gt;Email:             wangpengfei.201@163.com
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt; &lt;span&gt;Created:           2018/10/15
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt; &lt;span&gt;Description:    å®ç°HTTP/HTTPS GETè¯·æ±‚
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt; &lt;span&gt;*******************************************************&lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 9&lt;/span&gt; #include &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;main.h&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
&lt;span&gt;10&lt;/span&gt; 
&lt;span&gt;11&lt;/span&gt; size_t WriteGetResp(&lt;span&gt;void&lt;/span&gt; *buffer, size_t size, size_t nmemb, &lt;span&gt;void&lt;/span&gt; *&lt;span&gt;userp)
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt;     ((&lt;span&gt;string&lt;/span&gt;*)userp)-&amp;gt;append((&lt;span&gt;char&lt;/span&gt;*)buffer, &lt;span&gt;0&lt;/span&gt;, size*&lt;span&gt;nmemb);
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; size*&lt;span&gt;nmemb;
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;16&lt;/span&gt; 
&lt;span&gt;17&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt;***********************************
&lt;/span&gt;&lt;span&gt;18&lt;/span&gt; &lt;span&gt;@ Brief:        GETè¯·æ±‚
&lt;/span&gt;&lt;span&gt;19&lt;/span&gt; &lt;span&gt;@ Author:        woniu201 
&lt;/span&gt;&lt;span&gt;20&lt;/span&gt; &lt;span&gt;@ Created:        2018/10/15
&lt;/span&gt;&lt;span&gt;21&lt;/span&gt; &lt;span&gt;@ Return:            
&lt;/span&gt;&lt;span&gt;22&lt;/span&gt; &lt;span&gt;***********************************&lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;23&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; HttpGet(&lt;span&gt;char&lt;/span&gt;*&lt;span&gt; url)
&lt;/span&gt;&lt;span&gt;24&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;25&lt;/span&gt;     &lt;span&gt;string&lt;/span&gt;&lt;span&gt; respData;
&lt;/span&gt;&lt;span&gt;26&lt;/span&gt;     CURL*&lt;span&gt; curl;
&lt;/span&gt;&lt;span&gt;27&lt;/span&gt; &lt;span&gt;    CURLcode res;
&lt;/span&gt;&lt;span&gt;28&lt;/span&gt; 
&lt;span&gt;29&lt;/span&gt;     curl =&lt;span&gt; curl_easy_init();
&lt;/span&gt;&lt;span&gt;30&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (curl ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;31&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;32&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;33&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;34&lt;/span&gt; 
&lt;span&gt;35&lt;/span&gt; &lt;span&gt;    curl_easy_setopt(curl, CURLOPT_URL, url);
&lt;/span&gt;&lt;span&gt;36&lt;/span&gt; &lt;span&gt;    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, WriteGetResp);
&lt;/span&gt;&lt;span&gt;37&lt;/span&gt;     curl_easy_setopt(curl, CURLOPT_WRITEDATA, &amp;amp;&lt;span&gt;respData);
&lt;/span&gt;&lt;span&gt;38&lt;/span&gt; 
&lt;span&gt;39&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;      curl_easy_setopt(curl, CURLOPT_CONNECTTIMEOUT_MS, 5000); &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;libcurlå­˜åœ¨æ¯«ç§’è¶…æ—¶bug,å¦‚æœè®¾å¤‡å°äº1000msç«‹å³è¿”å›å¤±è´¥
&lt;/span&gt;&lt;span&gt;40&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;      curl_easy_setopt(curl, CURLOPT_TIMEOUT_MS, 5000); &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è®¾ç½®è¶…æ—¶æ—¶é—´&lt;/span&gt;
&lt;span&gt;41&lt;/span&gt; 
&lt;span&gt;42&lt;/span&gt;     &lt;span&gt;bool&lt;/span&gt; bCA =&lt;span&gt; FALSE;
&lt;/span&gt;&lt;span&gt;43&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;bCA)
&lt;/span&gt;&lt;span&gt;44&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;45&lt;/span&gt;         curl_easy_setopt(curl, CURLOPT_SSL_VERIFYPEER, FALSE);&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è®¾å®šä¸ºä¸éªŒè¯è¯ä¹¦å’ŒHOST &lt;/span&gt;
&lt;span&gt;46&lt;/span&gt; &lt;span&gt;        curl_easy_setopt(curl, CURLOPT_SSL_VERIFYHOST, FALSE); 
&lt;/span&gt;&lt;span&gt;47&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;48&lt;/span&gt;     &lt;span&gt;else&lt;/span&gt;
&lt;span&gt;49&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;50&lt;/span&gt; &lt;span&gt;        curl_easy_setopt(curl, CURLOPT_SSL_VERIFYPEER, TRUE); 
&lt;/span&gt;&lt;span&gt;51&lt;/span&gt;         curl_easy_setopt(curl, CURLOPT_CAINFO, &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;); 
&lt;/span&gt;&lt;span&gt;52&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;53&lt;/span&gt; 
&lt;span&gt;54&lt;/span&gt;     res =&lt;span&gt; curl_easy_perform(curl);
&lt;/span&gt;&lt;span&gt;55&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (res !=&lt;span&gt; CURLE_OK)
&lt;/span&gt;&lt;span&gt;56&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;57&lt;/span&gt;         cout &amp;lt;&amp;lt; curl_easy_strerror(res) &amp;lt;&amp;lt;&lt;span&gt; endl;
&lt;/span&gt;&lt;span&gt;58&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;59&lt;/span&gt; 
&lt;span&gt;60&lt;/span&gt; &lt;span&gt;    curl_easy_cleanup(curl);
&lt;/span&gt;&lt;span&gt;61&lt;/span&gt; 
&lt;span&gt;62&lt;/span&gt;     cout &amp;lt;&amp;lt; Utf8ToAscii(respData) &amp;lt;&amp;lt;&lt;span&gt; endl;
&lt;/span&gt;&lt;span&gt;63&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;64&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;span&gt;å®ç°HTTP/POSTï¼š&lt;/span&gt;&lt;/h3&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;76&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt;*******************************************************
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;Copyright (C),  2016-2018,
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;FileName:        Post
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; &lt;span&gt;Author:            woniu201
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt; &lt;span&gt;Email:             wangpengfei.201@163.com
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt; &lt;span&gt;Created:           2018/10/15
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt; &lt;span&gt;Description:    å®ç°HTTP/HTTPS POSTè¯·æ±‚
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt; &lt;span&gt;*******************************************************&lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 9&lt;/span&gt; #include &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;main.h&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
&lt;span&gt;10&lt;/span&gt; 
&lt;span&gt;11&lt;/span&gt; size_t WritePostBodyResp(&lt;span&gt;void&lt;/span&gt; *buffer, size_t size, size_t nmemb, &lt;span&gt;void&lt;/span&gt; *&lt;span&gt;userp)
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt;     ((&lt;span&gt;string&lt;/span&gt;*)userp)-&amp;gt;append((&lt;span&gt;char&lt;/span&gt;*)buffer, &lt;span&gt;0&lt;/span&gt;, size*&lt;span&gt;nmemb);
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; size*&lt;span&gt;nmemb;
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;16&lt;/span&gt; 
&lt;span&gt;17&lt;/span&gt; size_t WritePostHeaderResp(&lt;span&gt;void&lt;/span&gt; *buffer, size_t size, size_t nmemb, &lt;span&gt;void&lt;/span&gt; *&lt;span&gt;userp)
&lt;/span&gt;&lt;span&gt;18&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;19&lt;/span&gt;     ((&lt;span&gt;string&lt;/span&gt;*)userp)-&amp;gt;append((&lt;span&gt;char&lt;/span&gt;*)buffer, &lt;span&gt;0&lt;/span&gt;, size*&lt;span&gt;nmemb);
&lt;/span&gt;&lt;span&gt;20&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; size*&lt;span&gt;nmemb;
&lt;/span&gt;&lt;span&gt;21&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;22&lt;/span&gt; 
&lt;span&gt;23&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt;***********************************
&lt;/span&gt;&lt;span&gt;24&lt;/span&gt; &lt;span&gt;@ Brief:        POSTè¯·æ±‚
&lt;/span&gt;&lt;span&gt;25&lt;/span&gt; &lt;span&gt;@ Author:        woniu201 
&lt;/span&gt;&lt;span&gt;26&lt;/span&gt; &lt;span&gt;@ Created:        2018/10/15
&lt;/span&gt;&lt;span&gt;27&lt;/span&gt; &lt;span&gt;@ Return:            
&lt;/span&gt;&lt;span&gt;28&lt;/span&gt; &lt;span&gt;***********************************&lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;29&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; HttpPost(&lt;span&gt;char&lt;/span&gt;* url, &lt;span&gt;char&lt;/span&gt;*&lt;span&gt; body)
&lt;/span&gt;&lt;span&gt;30&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;31&lt;/span&gt;     &lt;span&gt;string&lt;/span&gt;&lt;span&gt; respBodyData;
&lt;/span&gt;&lt;span&gt;32&lt;/span&gt;     &lt;span&gt;string&lt;/span&gt;&lt;span&gt; respHeadData;
&lt;/span&gt;&lt;span&gt;33&lt;/span&gt;     CURL*&lt;span&gt; curl;
&lt;/span&gt;&lt;span&gt;34&lt;/span&gt; &lt;span&gt;    CURLcode res;
&lt;/span&gt;&lt;span&gt;35&lt;/span&gt; 
&lt;span&gt;36&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;è®¾ç½®å¤´&lt;/span&gt;
&lt;span&gt;37&lt;/span&gt;     &lt;span&gt;struct&lt;/span&gt; curl_slist *headers =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;38&lt;/span&gt;     headers = curl_slist_append(headers, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Content-Type:application/json;charset=UTF-8&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;39&lt;/span&gt;     
&lt;span&gt;40&lt;/span&gt;     curl =&lt;span&gt; curl_easy_init();
&lt;/span&gt;&lt;span&gt;41&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (curl ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;42&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;43&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;44&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;45&lt;/span&gt; 
&lt;span&gt;46&lt;/span&gt; &lt;span&gt;    curl_easy_setopt(curl, CURLOPT_URL, url);
&lt;/span&gt;&lt;span&gt;47&lt;/span&gt; &lt;span&gt;    curl_easy_setopt(curl, CURLOPT_POSTFIELDS, body);
&lt;/span&gt;&lt;span&gt;48&lt;/span&gt; &lt;span&gt;    curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers);
&lt;/span&gt;&lt;span&gt;49&lt;/span&gt; 
&lt;span&gt;50&lt;/span&gt; &lt;span&gt;    curl_easy_setopt(curl, CURLOPT_HEADERFUNCTION, WritePostHeaderResp);
&lt;/span&gt;&lt;span&gt;51&lt;/span&gt; &lt;span&gt;    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, WritePostBodyResp);
&lt;/span&gt;&lt;span&gt;52&lt;/span&gt;     curl_easy_setopt(curl, CURLOPT_WRITEHEADER, &amp;amp;&lt;span&gt;respHeadData);
&lt;/span&gt;&lt;span&gt;53&lt;/span&gt;     curl_easy_setopt(curl, CURLOPT_WRITEDATA, &amp;amp;&lt;span&gt;respBodyData);
&lt;/span&gt;&lt;span&gt;54&lt;/span&gt; 
&lt;span&gt;55&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;      curl_easy_setopt(curl, CURLOPT_CONNECTTIMEOUT_MS, 5000); &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;libcurlå­˜åœ¨æ¯«ç§’è¶…æ—¶bug,å¦‚æœè®¾å¤‡å°äº1000msç«‹å³è¿”å›å¤±è´¥
&lt;/span&gt;&lt;span&gt;56&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;      curl_easy_setopt(curl, CURLOPT_TIMEOUT_MS, 5000); &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è®¾ç½®è¶…æ—¶æ—¶é—´&lt;/span&gt;
&lt;span&gt;57&lt;/span&gt; 
&lt;span&gt;58&lt;/span&gt;     &lt;span&gt;bool&lt;/span&gt; bCA =&lt;span&gt; FALSE;
&lt;/span&gt;&lt;span&gt;59&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;bCA)
&lt;/span&gt;&lt;span&gt;60&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;61&lt;/span&gt;         curl_easy_setopt(curl, CURLOPT_SSL_VERIFYPEER, FALSE);&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è®¾å®šä¸ºä¸éªŒè¯è¯ä¹¦å’ŒHOST &lt;/span&gt;
&lt;span&gt;62&lt;/span&gt; &lt;span&gt;        curl_easy_setopt(curl, CURLOPT_SSL_VERIFYHOST, FALSE); 
&lt;/span&gt;&lt;span&gt;63&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;64&lt;/span&gt;     &lt;span&gt;else&lt;/span&gt;
&lt;span&gt;65&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;66&lt;/span&gt; &lt;span&gt;        curl_easy_setopt(curl, CURLOPT_SSL_VERIFYPEER, TRUE); 
&lt;/span&gt;&lt;span&gt;67&lt;/span&gt;         curl_easy_setopt(curl, CURLOPT_CAINFO, &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;); 
&lt;/span&gt;&lt;span&gt;68&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;69&lt;/span&gt; 
&lt;span&gt;70&lt;/span&gt;     res =&lt;span&gt; curl_easy_perform(curl);
&lt;/span&gt;&lt;span&gt;71&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (res !=&lt;span&gt; CURLE_OK)
&lt;/span&gt;&lt;span&gt;72&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;73&lt;/span&gt;         cout &amp;lt;&amp;lt; curl_easy_strerror(res) &amp;lt;&amp;lt;&lt;span&gt; endl;
&lt;/span&gt;&lt;span&gt;74&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;75&lt;/span&gt; &lt;span&gt;    curl_slist_free_all(headers);
&lt;/span&gt;&lt;span&gt;76&lt;/span&gt; &lt;span&gt;    curl_easy_cleanup(curl);
&lt;/span&gt;&lt;span&gt;77&lt;/span&gt; 
&lt;span&gt;78&lt;/span&gt;     cout &amp;lt;&amp;lt; Utf8ToAscii(respHeadData) &amp;lt;&amp;lt;&lt;span&gt; endl;
&lt;/span&gt;&lt;span&gt;79&lt;/span&gt;     cout &amp;lt;&amp;lt; Utf8ToAscii(respBodyData) &amp;lt;&amp;lt;&lt;span&gt; endl;
&lt;/span&gt;&lt;span&gt;80&lt;/span&gt; 
&lt;span&gt;81&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;82&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;&lt;span&gt;å…¶ä»–ä»£ç ï¼š&lt;/span&gt;&lt;/h3&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;85&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt;*******************************************************
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;Copyright (C),  2016-2018,
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;FileName:        utils
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; &lt;span&gt;Author:            woniu201
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt; &lt;span&gt;Email:             wangpengfei.201@163.com
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt; &lt;span&gt;Created:           2018/10/15
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt; &lt;span&gt;Description:    ASSIC--UTF8äº’è½¬
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt; &lt;span&gt;*******************************************************&lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 9&lt;/span&gt; #include &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;main.h&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
&lt;span&gt;10&lt;/span&gt; #include &amp;lt;&lt;span&gt;string&lt;/span&gt;&amp;gt;
&lt;span&gt;11&lt;/span&gt; #include &amp;lt;Windows.h&amp;gt;
&lt;span&gt;12&lt;/span&gt; #include &amp;lt;wchar.h&amp;gt;
&lt;span&gt;13&lt;/span&gt; &lt;span&gt;using&lt;/span&gt; &lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; std;
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt; 
&lt;span&gt;15&lt;/span&gt; wstring    AsciiToUnicode(&lt;span&gt;const&lt;/span&gt; &lt;span&gt;string&lt;/span&gt;&amp;amp;&lt;span&gt; str) {  
&lt;/span&gt;&lt;span&gt;16&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; é¢„ç®—-ç¼“å†²åŒºä¸­å®½å­—èŠ‚çš„é•¿åº¦    &lt;/span&gt;
&lt;span&gt;17&lt;/span&gt;     &lt;span&gt;int&lt;/span&gt; unicodeLen = MultiByteToWideChar(CP_ACP, &lt;span&gt;0&lt;/span&gt;, str.c_str(), -&lt;span&gt;1&lt;/span&gt;, nullptr, &lt;span&gt;0&lt;/span&gt;&lt;span&gt;);  
&lt;/span&gt;&lt;span&gt;18&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; ç»™æŒ‡å‘ç¼“å†²åŒºçš„æŒ‡é’ˆå˜é‡åˆ†é…å†…å­˜    &lt;/span&gt;
&lt;span&gt;19&lt;/span&gt;     wchar_t *pUnicode = (wchar_t*)&lt;span&gt;malloc&lt;/span&gt;(&lt;span&gt;sizeof&lt;/span&gt;(wchar_t)*&lt;span&gt;unicodeLen);  
&lt;/span&gt;&lt;span&gt;20&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¼€å§‹å‘ç¼“å†²åŒºè½¬æ¢å­—èŠ‚    &lt;/span&gt;
&lt;span&gt;21&lt;/span&gt;     MultiByteToWideChar(CP_ACP, &lt;span&gt;0&lt;/span&gt;, str.c_str(), -&lt;span&gt;1&lt;/span&gt;&lt;span&gt;, pUnicode, unicodeLen);  
&lt;/span&gt;&lt;span&gt;22&lt;/span&gt;     wstring ret_str =&lt;span&gt; pUnicode;  
&lt;/span&gt;&lt;span&gt;23&lt;/span&gt;     &lt;span&gt;free&lt;/span&gt;&lt;span&gt;(pUnicode);  
&lt;/span&gt;&lt;span&gt;24&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; ret_str;  
&lt;/span&gt;&lt;span&gt;25&lt;/span&gt; &lt;span&gt;}  
&lt;/span&gt;&lt;span&gt;26&lt;/span&gt; &lt;span&gt;string&lt;/span&gt; UnicodeToAscii(&lt;span&gt;const&lt;/span&gt; wstring&amp;amp;&lt;span&gt; wstr) {  
&lt;/span&gt;&lt;span&gt;27&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; é¢„ç®—-ç¼“å†²åŒºä¸­å¤šå­—èŠ‚çš„é•¿åº¦    &lt;/span&gt;
&lt;span&gt;28&lt;/span&gt;     &lt;span&gt;int&lt;/span&gt; ansiiLen = WideCharToMultiByte(CP_ACP, &lt;span&gt;0&lt;/span&gt;, wstr.c_str(), -&lt;span&gt;1&lt;/span&gt;, nullptr, &lt;span&gt;0&lt;/span&gt;&lt;span&gt;, nullptr, nullptr);  
&lt;/span&gt;&lt;span&gt;29&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; ç»™æŒ‡å‘ç¼“å†²åŒºçš„æŒ‡é’ˆå˜é‡åˆ†é…å†…å­˜    &lt;/span&gt;
&lt;span&gt;30&lt;/span&gt;     &lt;span&gt;char&lt;/span&gt; *pAssii = (&lt;span&gt;char&lt;/span&gt;*)&lt;span&gt;malloc&lt;/span&gt;(&lt;span&gt;sizeof&lt;/span&gt;(&lt;span&gt;char&lt;/span&gt;)*&lt;span&gt;ansiiLen);  
&lt;/span&gt;&lt;span&gt;31&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¼€å§‹å‘ç¼“å†²åŒºè½¬æ¢å­—èŠ‚    &lt;/span&gt;
&lt;span&gt;32&lt;/span&gt;     WideCharToMultiByte(CP_ACP, &lt;span&gt;0&lt;/span&gt;, wstr.c_str(), -&lt;span&gt;1&lt;/span&gt;&lt;span&gt;, pAssii, ansiiLen, nullptr, nullptr);  
&lt;/span&gt;&lt;span&gt;33&lt;/span&gt;     &lt;span&gt;string&lt;/span&gt; ret_str =&lt;span&gt; pAssii;  
&lt;/span&gt;&lt;span&gt;34&lt;/span&gt;     &lt;span&gt;free&lt;/span&gt;&lt;span&gt;(pAssii);  
&lt;/span&gt;&lt;span&gt;35&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; ret_str;  
&lt;/span&gt;&lt;span&gt;36&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;37&lt;/span&gt; 
&lt;span&gt;38&lt;/span&gt; wstring Utf8ToUnicode(&lt;span&gt;const&lt;/span&gt; &lt;span&gt;string&lt;/span&gt;&amp;amp;&lt;span&gt; str) {  
&lt;/span&gt;&lt;span&gt;39&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; é¢„ç®—-ç¼“å†²åŒºä¸­å®½å­—èŠ‚çš„é•¿åº¦    &lt;/span&gt;
&lt;span&gt;40&lt;/span&gt;     &lt;span&gt;int&lt;/span&gt; unicodeLen = MultiByteToWideChar(CP_UTF8, &lt;span&gt;0&lt;/span&gt;, str.c_str(), -&lt;span&gt;1&lt;/span&gt;, nullptr, &lt;span&gt;0&lt;/span&gt;&lt;span&gt;);  
&lt;/span&gt;&lt;span&gt;41&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; ç»™æŒ‡å‘ç¼“å†²åŒºçš„æŒ‡é’ˆå˜é‡åˆ†é…å†…å­˜    &lt;/span&gt;
&lt;span&gt;42&lt;/span&gt;     wchar_t *pUnicode = (wchar_t*)&lt;span&gt;malloc&lt;/span&gt;(&lt;span&gt;sizeof&lt;/span&gt;(wchar_t)*&lt;span&gt;unicodeLen);  
&lt;/span&gt;&lt;span&gt;43&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¼€å§‹å‘ç¼“å†²åŒºè½¬æ¢å­—èŠ‚    &lt;/span&gt;
&lt;span&gt;44&lt;/span&gt;     MultiByteToWideChar(CP_UTF8, &lt;span&gt;0&lt;/span&gt;, str.c_str(), -&lt;span&gt;1&lt;/span&gt;&lt;span&gt;, pUnicode, unicodeLen);  
&lt;/span&gt;&lt;span&gt;45&lt;/span&gt;     wstring ret_str =&lt;span&gt; pUnicode;  
&lt;/span&gt;&lt;span&gt;46&lt;/span&gt;     &lt;span&gt;free&lt;/span&gt;&lt;span&gt;(pUnicode);  
&lt;/span&gt;&lt;span&gt;47&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; ret_str;  
&lt;/span&gt;&lt;span&gt;48&lt;/span&gt; &lt;span&gt;}  
&lt;/span&gt;&lt;span&gt;49&lt;/span&gt; &lt;span&gt;string&lt;/span&gt; UnicodeToUtf8(&lt;span&gt;const&lt;/span&gt; wstring&amp;amp;&lt;span&gt; wstr) {  
&lt;/span&gt;&lt;span&gt;50&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; é¢„ç®—-ç¼“å†²åŒºä¸­å¤šå­—èŠ‚çš„é•¿åº¦    &lt;/span&gt;
&lt;span&gt;51&lt;/span&gt;     &lt;span&gt;int&lt;/span&gt; ansiiLen = WideCharToMultiByte(CP_UTF8, &lt;span&gt;0&lt;/span&gt;, wstr.c_str(), -&lt;span&gt;1&lt;/span&gt;, nullptr, &lt;span&gt;0&lt;/span&gt;&lt;span&gt;, nullptr, nullptr);  
&lt;/span&gt;&lt;span&gt;52&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; ç»™æŒ‡å‘ç¼“å†²åŒºçš„æŒ‡é’ˆå˜é‡åˆ†é…å†…å­˜    &lt;/span&gt;
&lt;span&gt;53&lt;/span&gt;     &lt;span&gt;char&lt;/span&gt; *pAssii = (&lt;span&gt;char&lt;/span&gt;*)&lt;span&gt;malloc&lt;/span&gt;(&lt;span&gt;sizeof&lt;/span&gt;(&lt;span&gt;char&lt;/span&gt;)*&lt;span&gt;ansiiLen);  
&lt;/span&gt;&lt;span&gt;54&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¼€å§‹å‘ç¼“å†²åŒºè½¬æ¢å­—èŠ‚    &lt;/span&gt;
&lt;span&gt;55&lt;/span&gt;     WideCharToMultiByte(CP_UTF8, &lt;span&gt;0&lt;/span&gt;, wstr.c_str(), -&lt;span&gt;1&lt;/span&gt;&lt;span&gt;, pAssii, ansiiLen, nullptr, nullptr);  
&lt;/span&gt;&lt;span&gt;56&lt;/span&gt;     &lt;span&gt;string&lt;/span&gt; ret_str =&lt;span&gt; pAssii;  
&lt;/span&gt;&lt;span&gt;57&lt;/span&gt;     &lt;span&gt;free&lt;/span&gt;&lt;span&gt;(pAssii);  
&lt;/span&gt;&lt;span&gt;58&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; ret_str;  
&lt;/span&gt;&lt;span&gt;59&lt;/span&gt; &lt;span&gt;}  
&lt;/span&gt;&lt;span&gt;60&lt;/span&gt; 
&lt;span&gt;61&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt;***********************************
&lt;/span&gt;&lt;span&gt;62&lt;/span&gt; &lt;span&gt;@ Brief:        ASSICè½¬UTF8
&lt;/span&gt;&lt;span&gt;63&lt;/span&gt; &lt;span&gt;@ Author:        woniu201 
&lt;/span&gt;&lt;span&gt;64&lt;/span&gt; &lt;span&gt;@ Created:        2018/10/16
&lt;/span&gt;&lt;span&gt;65&lt;/span&gt; &lt;span&gt;@ Return:            
&lt;/span&gt;&lt;span&gt;66&lt;/span&gt; &lt;span&gt;***********************************&lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;67&lt;/span&gt; &lt;span&gt;string&lt;/span&gt; AsciiToUtf8(&lt;span&gt;const&lt;/span&gt; &lt;span&gt;string&lt;/span&gt;&amp;amp;&lt;span&gt; str) {  
&lt;/span&gt;&lt;span&gt;68&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; UnicodeToUtf8(AsciiToUnicode(str));  
&lt;/span&gt;&lt;span&gt;69&lt;/span&gt; &lt;span&gt;}  
&lt;/span&gt;&lt;span&gt;70&lt;/span&gt; 
&lt;span&gt;71&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt;***********************************
&lt;/span&gt;&lt;span&gt;72&lt;/span&gt; &lt;span&gt;@ Brief:        UTF8è½¬ASSIC
&lt;/span&gt;&lt;span&gt;73&lt;/span&gt; &lt;span&gt;@ Author:        woniu201 
&lt;/span&gt;&lt;span&gt;74&lt;/span&gt; &lt;span&gt;@ Created:        2018/10/16
&lt;/span&gt;&lt;span&gt;75&lt;/span&gt; &lt;span&gt;@ Return:            
&lt;/span&gt;&lt;span&gt;76&lt;/span&gt; &lt;span&gt;***********************************&lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;77&lt;/span&gt; &lt;span&gt;string&lt;/span&gt; Utf8ToAscii(&lt;span&gt;const&lt;/span&gt; &lt;span&gt;string&lt;/span&gt;&amp;amp;&lt;span&gt; str) {  
&lt;/span&gt;&lt;span&gt;78&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; UnicodeToAscii(Utf8ToUnicode(str));  
&lt;/span&gt;&lt;span&gt;79&lt;/span&gt; }  
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;#ifndef _MAIN_H
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;#define&lt;/span&gt; _MAIN_H
&lt;span&gt; 3&lt;/span&gt; 
&lt;span&gt; 4&lt;/span&gt; #include &amp;lt;iostream&amp;gt;
&lt;span&gt; 5&lt;/span&gt; #include &amp;lt;&lt;span&gt;string&lt;/span&gt;&amp;gt;
&lt;span&gt; 6&lt;/span&gt; #include &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;include/curl.h&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
&lt;span&gt; 7&lt;/span&gt; 
&lt;span&gt; 8&lt;/span&gt; &lt;span&gt;using&lt;/span&gt; &lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; std;
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt; 
&lt;span&gt;10&lt;/span&gt; 
&lt;span&gt;11&lt;/span&gt; &lt;span&gt;#pragma&lt;/span&gt; comment(lib, &quot;ssleay32.lib&quot;)
&lt;span&gt;12&lt;/span&gt; &lt;span&gt;#pragma&lt;/span&gt; comment(lib, &quot;libcurl.lib&quot;)
&lt;span&gt;13&lt;/span&gt; 
&lt;span&gt;14&lt;/span&gt; &lt;span&gt;string&lt;/span&gt; AsciiToUtf8(&lt;span&gt;const&lt;/span&gt; &lt;span&gt;string&lt;/span&gt;&amp;amp;&lt;span&gt; str);
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt; &lt;span&gt;string&lt;/span&gt; Utf8ToAscii(&lt;span&gt;const&lt;/span&gt; &lt;span&gt;string&lt;/span&gt;&amp;amp;&lt;span&gt; str);
&lt;/span&gt;&lt;span&gt;16&lt;/span&gt; 
&lt;span&gt;17&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; HttpGet(&lt;span&gt;char&lt;/span&gt;*&lt;span&gt; url);
&lt;/span&gt;&lt;span&gt;18&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; HttpPost(&lt;span&gt;char&lt;/span&gt;* url, &lt;span&gt;char&lt;/span&gt;*&lt;span&gt; body);
&lt;/span&gt;&lt;span&gt;19&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; HttpDownload(&lt;span&gt;char&lt;/span&gt;* url,  &lt;span&gt;char&lt;/span&gt;*&lt;span&gt; filePath);
&lt;/span&gt;&lt;span&gt;20&lt;/span&gt; &lt;span&gt;#endif&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¯¹åº”libcurlåº“å’Œå¤´æ–‡ä»¶ä¸‹è½½åœ°å€(æ”¯æŒHTTPS)ï¼š&lt;a href=&quot;https://download.csdn.net/download/woniu211111/10724021&quot; rel=&quot;nofollow&quot; target=&quot;_blank&quot;&gt;ç‚¹å‡»ä¸‹è½½&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 16 Oct 2018 07:31:00 +0000</pubDate>
<dc:creator>èœ—ç‰›201</dc:creator>
<og:description>c/c++å¼€å‘ä¸­ç»å¸¸è¦ç”¨åˆ°http/httpsåè®®ï¼Œç›´æ¥ä½¿ç”¨socketå·¥ä½œé‡å¾ˆå¤§ï¼Œè¦æ˜¯ä½¿ç”¨socketå®ç°httpsï¼Œé‚£æ›´ä¸å¯æ€è®®ï¼Œå¼€æºçš„c/c++çš„httpå®¢æˆ·ç«¯æ¡†æ¶ï¼Œlibcurlæ˜¯é¦–é€‰ï¼Œè€Œä¸”ä¹Ÿ</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/woniu201/p/9798278.html</dc:identifier>
</item>
<item>
<title>KClientâ€”â€”kafkaæ¶ˆæ¯ä¸­é—´ä»¶æºç è§£è¯» - NinWoo</title>
<link>http://www.cnblogs.com/NinWoo/p/9798270.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/NinWoo/p/9798270.html</guid>
<description>&lt;p class=&quot;toc&quot;&gt;ç›®å½•&lt;/p&gt;
&lt;p&gt;æœ€è¿‘åœ¨æ‹œè¯»æè‰³é¹çš„ã€Šå¯ä¼¸ç¼©æœåŠ¡æ¶æ„â€”â€”æ¡†æ¶ä¸ä¸­é—´ä»¶ã€‹ï¼Œè¯¥ç¯‡éšç¬”ï¼Œé’ˆå¯¹ç¬¬äºŒç« çš„KClientï¼ˆkafkaæ¶ˆæ¯ä¸­é—´ä»¶ï¼‰æºç è§£è¯»é¡¹ç›®ï¼Œè¿›è¡Œå­¦ä¹ ã€‚&lt;/p&gt;

&lt;p&gt;ä»ä½¿ç”¨è§’åº¦ä¸Šå¼€å§‹å…¥æ‰‹å­¦ä¹ &lt;/p&gt;
&lt;h2 id=&quot;kclient-processor&quot;&gt;kclient-processor&lt;/h2&gt;
&lt;p&gt;è¯¥é¡¹ç›®ä½¿ç”¨springbootè°ƒç”¨kclientåº“ï¼Œç¨‹åºç›®å½•å¦‚ä¸‹:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;domain
&lt;ul&gt;&lt;li&gt;Cat ï¼š å®šä¹‰äº†ä¸€ä¸ªcatå¯¹è±¡&lt;/li&gt;
&lt;li&gt;Dog ï¼š å®šä¹‰äº†ä¸€ä¸ªDogå¯¹è±¡&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;handler ï¼š æ¶ˆæ¯å¤„ç†å™¨
&lt;ul&gt;&lt;li&gt;AnimalsHandler ï¼š å®šä¹‰äº†Catå’ŒDogçš„å…·ä½“è¡Œä¸º&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;KClientApplication.java ï¼š Spring bootçš„ä¸»å‡½æ•°â€”â€”ç¨‹åºæ‰§è¡Œå…¥å£&lt;/li&gt;
&lt;li&gt;KClientController.java : Controller æ–‡ä»¶&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;top.ninwoo.kclient.app.kclientapplication&quot;&gt;top.ninwoo.kclient.app.KClientApplication&lt;/h3&gt;
&lt;p&gt;1.å¯åŠ¨Spring Boot&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;ApplicationContext ctxBackend = SpringApplication.run(
                KClientApplication.class, args);&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;2.å¯åŠ¨ç¨‹åºåå°†è‡ªåŠ¨åŠ è½½KClientController(@RestController)&lt;/p&gt;
&lt;h3 id=&quot;top.ninwoo.kclient.app.kclientcontroller&quot;&gt;top.ninwoo.kclient.app.KClientController&lt;/h3&gt;
&lt;p&gt;1.é€šè¿‡@RestControllerï¼Œä½¿@SpringBootApplication,å¯ä»¥è‡ªåŠ¨åŠ è½½è¯¥Controller&lt;/p&gt;
&lt;p&gt;2.é€šè¿‡&lt;code&gt;kafka-application.xml&lt;/code&gt;åŠ è½½Beans&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;private ApplicationContext ctxKafkaProcessor =
            new ClassPathXmlApplicationContext(&quot;kafka-application.xml&quot;);&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;kafka-application.xml&lt;/code&gt;å£°æ˜äº†ä¸€ä¸ªkclient beanï¼Œå¹¶è®¾ç½®å…¶åˆå§‹åŒ–æ‰§è¡Œ&lt;code&gt;init&lt;/code&gt;æ–¹æ³•ï¼Œå…·ä½“å®ç°è§ä¸‹ç« å…·ä½“å®ç°ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;&amp;lt;bean name=&quot;kClientBoot&quot; class=&quot;top.ninwoo.kafka.kclient.boot.KClientBoot&quot; init-method=&quot;init&quot;/&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦å¤–å£°æ˜äº†ä¸€ä¸ªæ‰«ææ¶ˆæ¯å¤„ç†å™¨çš„bean&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;&amp;lt;context:component-scan base-package=&quot;top.ninwoo.kclient.app.handler&quot; /&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…·ä½“å†…å®¹åœ¨ä¸‹ä¸€èŠ‚ä»‹ç»&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;ä½¿ç”¨&lt;code&gt;@RequestMapping&lt;/code&gt;å®šä¹‰&lt;code&gt;/&lt;/code&gt;,&lt;code&gt;/status&lt;/code&gt;,&lt;code&gt;/stop&lt;/code&gt;,&lt;code&gt;/restart&lt;/code&gt;å®šä¹‰äº†ä¸åŒçš„æ¥å£&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;è¿™äº›æ¥å£å®ç°æ¯”è¾ƒç®€å•ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ä»–ä»¬è°ƒç”¨çš„&lt;code&gt;getKClientBoot()&lt;/code&gt;å‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;ä¸Šæ–‡ï¼Œæˆ‘ä»¬å·²ç»é€šè¿‡xmlä¸­ï¼Œæ·»åŠ äº†ä¸¤ä¸ªBeanï¼Œè°ƒç”¨Beançš„å…·ä½“å®ç°æ–¹æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;    private KClientBoot getKClientBoot() {
        return (KClientBoot) ctxKafkaProcessor.getBean(&quot;kClientBoot&quot;);
    }&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é€šè¿‡Beanè·å–åˆ°KClientè·å–åˆ°äº†KClientBootå¯¹è±¡ï¼Œä¾¿å¯ä»¥è°ƒç”¨å…¶å…·ä½“æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h3 id=&quot;top.ninwoo.kclient.app.handler.animalshandler&quot;&gt;top.ninwoo.kclient.app.handler.AnimalsHandler&lt;/h3&gt;
&lt;p&gt;æ¶ˆæ¯å¤„ç†å‡½æ•°&lt;/p&gt;
&lt;p&gt;1.ä½¿ç”¨&lt;code&gt;@KafkaHandlers&lt;/code&gt;è¿›è¡Œå£°æ˜beanï¼Œå…³äºå…¶å…·ä½“å®ç°åŠä»‹ç»åœ¨å…·ä½“å®ç°ä¸­è¿›è¡Œä»‹ç»&lt;/p&gt;
&lt;p&gt;2.å®šä¹‰äº†ä¸‰ä¸ªå¤„ç†å‡½æ•°&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;dogHandler&lt;/li&gt;
&lt;li&gt;catHandler&lt;/li&gt;
&lt;li&gt;ioExceptionHandler&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;dogHandler&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å…·ä½“å¤„ç†å¾ˆç®€å•ï¼Œä¸»è¦åˆ†æ@InputConsumerå’Œ@Consumerçš„ä½œç”¨ï¼Œå…·ä½“å®ç°å°†åœ¨åç»­è¿›è¡Œä»‹ç»ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;    @InputConsumer(propertiesFile = &quot;kafka-consumer.properties&quot;, topic = &quot;test&quot;, streamNum = 1)
    @OutputProducer(propertiesFile = &quot;kafka-producer.properties&quot;, defaultTopic = &quot;test1&quot;)
    public Cat dogHandler(Dog dog) {
        System.out.println(&quot;Annotated dogHandler handles: &quot; + dog);

        return new Cat(dog);
    }&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;@InputConsumer&lt;/code&gt;æ ¹æ®è¾“å…¥å‚æ•°å®šä¹‰äº†ä¸€ä¸ªConsumerï¼Œé€šè¿‡è¯¥Consumerä¼ é€’å…·ä½“å€¼ç»™dogï¼Œä½œä¸ºè¯¥å¤„ç†å‡½æ•°çš„&lt;br/&gt;è¾“å…¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@OutputProducer&lt;/code&gt;æ ¹æ®è¾“å…¥å‚æ•°å®šä¹‰ä¸€ä¸ªProducerï¼Œè€Œè¯¥å¤„ç†å‡½æ•°æœ€åè¿”å›çš„Catå¯¹è±¡ï¼Œå°†é€šè¿‡è¯¥Produceræœ€ç»ˆä¼ é€’åˆ°Kafkaä¸­&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä»¥ä¸‹çš„åŠŸèƒ½ä¸ä¸Šè¿°ç›¸åŒï¼Œå”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ &lt;code&gt;@InputConsumer&lt;/code&gt;å’Œ&lt;code&gt;@OutputProducer&lt;/code&gt;å¯ä»¥å•ç‹¬å­˜åœ¨ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;@InputConsumer(propertiesFile = &quot;kafka-consumer.properties&quot;, topic = &quot;test1&quot;, streamNum = 1)
    public void catHandler(Cat cat) throws IOException {
        System.out.println(&quot;Annotated catHandler handles: &quot; + cat);

        throw new IOException(&quot;Man made exception.&quot;);
    }

    @ErrorHandler(exception = IOException.class, topic = &quot;test1&quot;)
    public void ioExceptionHandler(IOException e, String message) {
        System.out.println(&quot;Annotated excepHandler handles: &quot; + e);
    }&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;top.ninwoo.kclient.app.domain&quot;&gt;top.ninwoo.kclient.app.domain&lt;/h3&gt;
&lt;p&gt;åªæ˜¯å®šä¹‰äº†Catå’ŒDogå¯¹è±¡ï¼Œä¸åšèµ˜è¿°ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h3&gt;
&lt;p&gt;åˆ°è¿™é‡Œï¼Œæ€»ç»“ä¸‹æˆ‘ä»¬éƒ½å®ç°äº†å“ªäº›åŠŸèƒ½ï¼Ÿ&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;ç¨‹åºå¯åŠ¨&lt;/li&gt;
&lt;li&gt;è°ƒç”¨KClientBoot.init()æ–¹æ³•&lt;/li&gt;
&lt;li&gt;AnimalsHandlerå®šä¹‰äº†æ¶ˆè´¹è€…å’Œç”Ÿäº§è€…çš„å…·ä½“æ–¹æ³•ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;h2 id=&quot;kclient-core&quot;&gt;kclient-core&lt;/h2&gt;
&lt;p&gt;kclientæ¶ˆæ¯ä¸­é—´ä»¶çš„ä¸»ä½“éƒ¨åˆ†ï¼Œè¯¥éƒ¨åˆ†å°†ä¼šæ¶‰åŠ&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;kafkaåŸºæœ¬æ“ä½œ&lt;/li&gt;
&lt;li&gt;åå°„&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;é¡¹ç›®ç»“æ„å¦‚ä¸‹:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;boot
&lt;ul&gt;&lt;li&gt;ErrorHandler&lt;/li&gt;
&lt;li&gt;InputConsumer&lt;/li&gt;
&lt;li&gt;OutputProducer&lt;/li&gt;
&lt;li&gt;KafkaHandlers&lt;/li&gt;
&lt;li&gt;KClientBoot&lt;/li&gt;
&lt;li&gt;KafkaHandler&lt;/li&gt;
&lt;li&gt;KafkaHandlerMeta&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;core
&lt;ul&gt;&lt;li&gt;KafkaConsumer&lt;/li&gt;
&lt;li&gt;KafkaProducer&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;excephandler
&lt;ul&gt;&lt;li&gt;DefaultExceptionHandler&lt;/li&gt;
&lt;li&gt;ExceptionHandler&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;handlers
&lt;ul&gt;&lt;li&gt;BeanMessageHandler&lt;/li&gt;
&lt;li&gt;BeansMessageHandler&lt;/li&gt;
&lt;li&gt;DocumentMessageHandler&lt;/li&gt;
&lt;li&gt;ObjectMessageHandler&lt;/li&gt;
&lt;li&gt;ObjectsMessageHandler&lt;/li&gt;
&lt;li&gt;MessageHandler&lt;/li&gt;
&lt;li&gt;SafelyMessageHandler&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;reflection.util
&lt;ul&gt;&lt;li&gt;AnnotationHandler&lt;/li&gt;
&lt;li&gt;AnnotationTranversor&lt;/li&gt;
&lt;li&gt;TranversorContext&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;åœ¨æ¥ä¸‹æ¥çš„æºç é˜…è¯»ä¸­ï¼Œæˆ‘å°†æŒ‰ç…§ç¨‹åºæ‰§è¡Œçš„é¡ºåºè¿›è¡Œè§£è¯»ã€‚å¦‚æœå…¶ä¸­æ¶‰åŠåˆ°æ²¡æœ‰è®¨è®ºè¿‡çš„æ¨¡å—ï¼Œè¯»è€…å¯ä»¥å‘ä¸‹ç¿»é˜…ã€‚è¿™ä¹ˆ&lt;br/&gt;åšçš„å”¯ä¸€åŸå› ï¼Œä¸ºäº†ä¿è¯æ€ç»´çš„è¿ç»­æ€§ï¼Œå°½å¯èƒ½ä¸è¢«ç¹æ‚çš„ç¨‹åºæ‰“ä¹±ã€‚&lt;/p&gt;
&lt;h3 id=&quot;top.ninwoo.kafka.kclient.boot.kclientboot&quot;&gt;top.ninwoo.kafka.kclient.boot.KClientBoot&lt;/h3&gt;
&lt;p&gt;å¦‚æœè¯»è€…åˆšåˆšé˜…è¯»ä¸Šä¸€ç« èŠ‚ï¼Œé‚£ä¹ˆå¯èƒ½è®°å¾—ï¼Œæˆ‘ä»¬æ³¨å†Œäº†ä¸€ä¸ªkClientBootçš„beanï¼Œå¹¶è®¾ç½®äº†åˆå§‹åŒ–å‡½æ•°init(),æ‰€ä»¥ï¼Œåœ¨kclientæºç çš„é˜…è¯»ä¸­&lt;br/&gt;ï¼Œæˆ‘ä»¬å°†ä»è¯¥æ–‡ä»¶å…¥æ‰‹ï¼Œå¼€å§‹è§£è¯»ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;    public void init() {
        meta = getKafkaHandlerMeta();

        if (meta.size() == 0)
            throw new IllegalArgumentException(
                    &quot;No handler method is declared in this spring context.&quot;);

        for (final KafkaHandlerMeta kafkaHandlerMeta : meta) {
            createKafkaHandler(kafkaHandlerMeta);
        }
    }&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;1.è¯¥å‡½æ•°ï¼Œé¦–å…ˆè·å–äº†ä¸€ä¸ªHandlerMetaï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•ç†è§£ï¼Œåœ¨è¿™ä¸ªæ•°æ®å…ƒä¸­ï¼Œå­˜å‚¨äº†å…¨éƒ¨çš„Handlerä¿¡æ¯ï¼Œè¿™ä¸ªHandlerä¿¡æ¯æŒ‡çš„æ˜¯ä¸Šä¸€ç« èŠ‚ä¸­é€šè¿‡&lt;code&gt;@KafkaHandlers&lt;/code&gt;å®šä¹‰çš„å¤„ç†å‡½æ•°ï¼Œ&lt;br/&gt;å…·ä½“å®ç°è§&lt;code&gt;top.ninwoo.kafka.kclient.boot.KafkaHandlerMeta&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;2.è·å–æ•°æ®å…ƒä¹‹åï¼Œé€šè¿‡å¾ªç¯ï¼Œåˆ›å»ºå¯¹åº”çš„å¤„ç†å‡½æ•°ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;    for (final KafkaHandlerMeta kafkaHandlerMeta : meta) {
            createKafkaHandler(kafkaHandlerMeta);
        }&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;3.getKafkaHandlerMetaå‡½æ•°çš„å…·ä½“å®ç°&lt;/p&gt;
&lt;p&gt;a.é€šè¿‡applicationContextè·å–åŒ…å«kafkaHandlersæ³¨è§£çš„Beanåç§°ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;String[] kafkaHandlerBeanNames = applicationContext
    .getBeanNamesForAnnotation(KafkaHandlers.class);&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;b.é€šè¿‡BeanNameè·å–åˆ°Beanå¯¹è±¡&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;    Object kafkaHandlerBean = applicationContext
        .getBean(kafkaHandlerBeanName);
    Class&amp;lt;? extends Object&amp;gt; kafkaHandlerBeanClazz = kafkaHandlerBean
        .getClass();&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;c.æ„å»ºmapDataæ•°æ®ç»“æ„,å…·ä½“æ„å»ºè§&lt;code&gt;top.ninwoo.kafka.kclient.reflection.util.AnnotationTranversor&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;    Map&amp;lt;Class&amp;lt;? extends Annotation&amp;gt;, Map&amp;lt;Method, Annotation&amp;gt;&amp;gt; mapData = extractAnnotationMaps(kafkaHandlerBeanClazz);&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;d.mapè½¬æ•°æ®å…ƒå¹¶æ·»åŠ åˆ°æ•°æ®å…ƒmeta listä¸­ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;    meta.addAll(convertAnnotationMaps2Meta(mapData, kafkaHandlerBean));&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;4.å¾ªç¯éå†åˆ›å»ºkafkaHandler&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;    for (final KafkaHandlerMeta kafkaHandlerMeta : meta) {
            createKafkaHandler(kafkaHandlerMeta);
        }&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;createkafkahandlerå‡½æ•°çš„å…·ä½“å®ç°&quot;&gt;createKafkaHandler()å‡½æ•°çš„å…·ä½“å®ç°ï¼š&lt;/h4&gt;
&lt;p&gt;a.é€šè¿‡metaè·å–clazzä¸­çš„å‚æ•°ç±»å‹&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Class&amp;lt;? extends Object&amp;gt; paramClazz = kafkaHandlerMeta
    .getParameterType()&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;b.åˆ›å»ºkafkaProducer&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;KafkaProducer kafkaProducer = createProducer(kafkaHandlerMeta);&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;c.åˆ›å»ºExceptionHandler&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;List&amp;lt;ExceptionHandler&amp;gt; excepHandlers = createExceptionHandlers(kafkaHandlerMeta);&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;d.æ ¹æ®clazzçš„å‚æ•°ç±»å‹ï¼Œé€‰æ‹©æ¶ˆæ¯è½¬æ¢å‡½æ•°&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;    MessageHandler beanMessageHandler = null;
        if (paramClazz.isAssignableFrom(JSONObject.class)) {
            beanMessageHandler = createObjectHandler(kafkaHandlerMeta,
                    kafkaProducer, excepHandlers);
        } else if (paramClazz.isAssignableFrom(JSONArray.class)) {
            beanMessageHandler = createObjectsHandler(kafkaHandlerMeta,
                    kafkaProducer, excepHandlers);
        } else if (List.class.isAssignableFrom(Document.class)) {
            beanMessageHandler = createDocumentHandler(kafkaHandlerMeta,
                    kafkaProducer, excepHandlers);
        } else if (List.class.isAssignableFrom(paramClazz)) {
            beanMessageHandler = createBeansHandler(kafkaHandlerMeta,
                    kafkaProducer, excepHandlers);
        } else {
            beanMessageHandler = createBeanHandler(kafkaHandlerMeta,
                    kafkaProducer, excepHandlers);
        }&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;e.åˆ›å»ºkafkaConsumer,å¹¶å¯åŠ¨&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;
        KafkaConsumer kafkaConsumer = createConsumer(kafkaHandlerMeta,
                beanMessageHandler);
        kafkaConsumer.startup();
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;f.åˆ›å»ºKafkaHanlder,å¹¶æ·»åŠ åˆ°åˆ—è¡¨ä¸­&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;        KafkaHandler kafkaHandler = new KafkaHandler(kafkaConsumer,
                kafkaProducer, excepHandlers, kafkaHandlerMeta);

        kafkaHandlers.add(kafkaHandler);
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;createexceptionhandlersçš„å…·ä½“å®ç°&quot;&gt;createExceptionHandlersçš„å…·ä½“å®ç°&lt;/h4&gt;
&lt;p&gt;1.åˆ›å»ºä¸€ä¸ªå¼‚å¸¸å¤„ç†åˆ—è¡¨&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;List&amp;lt;ExceptionHandler&amp;gt; excepHandlers = new ArrayList&amp;lt;ExceptionHandler&amp;gt;();&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;2.ä»kafkaHandlerMetaè·å–å¼‚å¸¸å¤„ç†çš„æ³¨è§£&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;for (final Map.Entry&amp;lt;ErrorHandler, Method&amp;gt; errorHandler : kafkaHandlerMeta
    .getErrorHandlers().entrySet()) {&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;3.åˆ›å»ºä¸€ä¸ªå¼‚å¸¸å¤„ç†å¯¹è±¡&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;ExceptionHandler exceptionHandler = new ExceptionHandler() {
    public boolean support(Throwable t) {}
    public void handle(Throwable t, String message) {}&lt;/code&gt;
&lt;/pre&gt;
&lt;h5 id=&quot;supportæ–¹æ³•åˆ¤æ–­å¼‚å¸¸ç±»å‹æ˜¯å¦å’Œè¾“å…¥ç›¸åŒ&quot;&gt;supportæ–¹æ³•åˆ¤æ–­å¼‚å¸¸ç±»å‹æ˜¯å¦å’Œè¾“å…¥ç›¸åŒ&lt;/h5&gt;
&lt;pre&gt;
&lt;code&gt;    public boolean support(Throwable t) {
        // We handle the exception when the classes are exactly same
        return errorHandler.getKey().exception() == t.getClass();
    }
&lt;/code&gt;
&lt;/pre&gt;
&lt;hr/&gt;&lt;h5 id=&quot;handleræ–¹æ³•è¿›ä¸€æ­¥å¯¹å¼‚å¸¸è¿›è¡Œå¤„ç†&quot;&gt;handleræ–¹æ³•ï¼Œè¿›ä¸€æ­¥å¯¹å¼‚å¸¸è¿›è¡Œå¤„ç†&lt;/h5&gt;
&lt;p&gt;1.è·å–å¼‚å¸¸å¤„ç†æ–¹æ³•&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Method excepHandlerMethod = errorHandler.getValue();&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;2.ä½¿ç”¨Method.invokeæ‰§è¡Œå¼‚å¸¸å¤„ç†æ–¹æ³•&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;excepHandlerMethod.invoke(kafkaHandlerMeta.getBean(),
                   t, message);&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œç”¨åˆ°äº†ä¸€äº›åå°„åŸç†ï¼Œä»¥ä¸‹å¯¹invokeåšç®€å•ä»‹ç»&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;public Object invoke(Object obj,
                     Object... args)
              throws IllegalAccessException,
                     IllegalArgumentException,
                     InvocationTargetException&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å‚æ•°ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;obj ä»åº•å±‚æ–¹æ³•è¢«è°ƒç”¨çš„å¯¹è±¡&lt;/li&gt;
&lt;li&gt;args ç”¨äºæ–¹æ³•çš„å‚æ•°&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;åœ¨è¯¥é¡¹ç›®ä¸­çš„å®é™…æƒ…å†µå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;Methodå®é™…å¯¹åº”&lt;code&gt;top.ninwoo.kclient.app.handler.AnimalsHandler&lt;/code&gt;ä¸­çš„ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;    @ErrorHandler(exception = IOException.class, topic = &quot;test1&quot;)
    public void ioExceptionHandler(IOException e, String message) {
        System.out.println(&quot;Annotated excepHandler handles: &quot; + e);
    }&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å‚æ•°æ–¹é¢ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;kafkaHandlerMeta.getBean() ï¼š AninmalsHandler&lt;/li&gt;
&lt;li&gt;t&lt;/li&gt;
&lt;li&gt;message&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;invokeå®Œæˆä¹‹åï¼Œå°†ä¼šæ‰§è¡ŒioExceptionHandlerå‡½æ•°&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;4.æ·»åŠ å¼‚å¸¸å¤„ç†åˆ°åˆ—è¡¨ä¸­&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;excepHandlers.add(exceptionHandler);&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;createobjecthandler&quot;&gt;createObjectHandler&lt;/h3&gt;
&lt;h3 id=&quot;createobjectshandler&quot;&gt;createObjectsHandler&lt;/h3&gt;
&lt;h3 id=&quot;createdocumenthandler&quot;&gt;createDocumentHandler&lt;/h3&gt;
&lt;h3 id=&quot;createbeanhandler&quot;&gt;createBeanHandler&lt;/h3&gt;
&lt;h3 id=&quot;createbeanshandler&quot;&gt;createBeansHandler&lt;/h3&gt;
&lt;p&gt;ä»¥ä¸Šå‡å®ç°äº†ç±»ä¼¼çš„åŠŸèƒ½ï¼Œåªæ˜¯åˆ›å»ºäº†ä¸åŒç±»å‹çš„å¯¹è±¡ï¼Œç„¶åé‡å†™äº†ä¸åŒçš„æ‰§è¡Œå‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;å®ç°åŸç†å’Œå¼‚å¸¸å¤„ç†ç›¸åŒï¼Œåº•å±‚éƒ½æ˜¯è°ƒç”¨äº†invokeå‡½æ•°ï¼Œé€šè¿‡åå°„æœºåˆ¶å¯åŠ¨äº†å¯¹åº”çš„å‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹ä¸€èŠ‚å¯¹æ­¤åšäº†è¯¦ç»†ä»‹ç»&lt;/p&gt;
&lt;h3 id=&quot;invokehandler&quot;&gt;invokeHandler&lt;/h3&gt;
&lt;p&gt;1.è·å–å¯¹åº”Methodæ–¹æ³•&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Method kafkaHandlerMethod = kafkaHandlerMeta.getMethod();&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;2.æ‰§è¡Œæ¥æ”¶è¿”å›ç»“æœ&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Object result = kafkaHandlerMethod.invoke(
    kafkaHandlerMeta.getBean(), parameter);&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;3.å¦‚æœç”Ÿäº§è€…éç©ºï¼Œæ„å‘³ç€éœ€è¦é€šè¿‡ç”Ÿäº§è€…ç¨‹åºå°†ç»“æœå‘é€åˆ°Kafkaä¸­&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;if (kafkaProducer != null) {
    if (result instanceof JSONObject)
        kafkaProducer.send(((JSONObject) result).toJSONString());
    else if (result instanceof JSONArray)
        kafkaProducer.send(((JSONArray) result).toJSONString());
    else if (result instanceof Document)
        kafkaProducer.send(((Document) result).getTextContent());
    else
        kafkaProducer.send(JSON.toJSONString(result));&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…åˆ›å»ºæ–¹æ³•&quot;&gt;ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…åˆ›å»ºæ–¹æ³•&lt;/h3&gt;
&lt;pre&gt;
&lt;code&gt;
    protected KafkaConsumer createConsumer(
            final KafkaHandlerMeta kafkaHandlerMeta,
            MessageHandler beanMessageHandler) {
        KafkaConsumer kafkaConsumer = null;

        if (kafkaHandlerMeta.getInputConsumer().fixedThreadNum() &amp;gt; 0) {
            kafkaConsumer = new KafkaConsumer(kafkaHandlerMeta
                    .getInputConsumer().propertiesFile(), kafkaHandlerMeta
                    .getInputConsumer().topic(), kafkaHandlerMeta
                    .getInputConsumer().streamNum(), kafkaHandlerMeta
                    .getInputConsumer().fixedThreadNum(), beanMessageHandler);

        } else if (kafkaHandlerMeta.getInputConsumer().maxThreadNum() &amp;gt; 0
                &amp;amp;&amp;amp; kafkaHandlerMeta.getInputConsumer().minThreadNum() &amp;lt; kafkaHandlerMeta
                .getInputConsumer().maxThreadNum()) {
            kafkaConsumer = new KafkaConsumer(kafkaHandlerMeta
                    .getInputConsumer().propertiesFile(), kafkaHandlerMeta
                    .getInputConsumer().topic(), kafkaHandlerMeta
                    .getInputConsumer().streamNum(), kafkaHandlerMeta
                    .getInputConsumer().minThreadNum(), kafkaHandlerMeta
                    .getInputConsumer().maxThreadNum(), beanMessageHandler);

        } else {
            kafkaConsumer = new KafkaConsumer(kafkaHandlerMeta
                    .getInputConsumer().propertiesFile(), kafkaHandlerMeta
                    .getInputConsumer().topic(), kafkaHandlerMeta
                    .getInputConsumer().streamNum(), beanMessageHandler);
        }

        return kafkaConsumer;
    }


    protected KafkaProducer createProducer(
            final KafkaHandlerMeta kafkaHandlerMeta) {
        KafkaProducer kafkaProducer = null;

        if (kafkaHandlerMeta.getOutputProducer() != null) {
            kafkaProducer = new KafkaProducer(kafkaHandlerMeta
                    .getOutputProducer().propertiesFile(), kafkaHandlerMeta
                    .getOutputProducer().defaultTopic());
        }

        // It may return null
        return kafkaProducer;
    }&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™ä¸¤éƒ¨åˆ†æ¯”è¾ƒç®€å•ï¼Œä¸åšèµ˜è¿°ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å°ç»“&quot;&gt;å°ç»“&lt;/h3&gt;
&lt;p&gt;KClientBoot.javaå®ç°äº†ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;è·å–ä½¿ç”¨KafkaHandlersä¸­å®šä¹‰æ³¨é‡Šçš„æ–¹æ³•åŠå…¶å®ƒä¿¡æ¯&lt;/li&gt;
&lt;li&gt;åŸºäºåå°„æœºåˆ¶ï¼Œç”Ÿæˆå¤„ç†å‡½æ•°ã€‚&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œå¤„ç†å‡½æ•°&lt;/li&gt;
&lt;li&gt;åˆ›å»ºå¯¹åº”Producerå’ŒConsumer&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;è¿˜å‰©ä½™å‡ ä¸ªæ¯”è¾ƒç®€å•çš„éƒ¨åˆ†ï¼Œæ¯”å¦‚shutdownAll()ç­‰æ–¹æ³•ï¼Œå°†åœ¨å…·ä½“å®ç°å¤„è¿›è¡Œè¡¥å……ä»‹ç»ã€‚&lt;/p&gt;
&lt;p&gt;åˆ°æ­¤ï¼Œæ•´ä¸ªé¡¹ç›®çš„ä¸»ä½“åŠŸèƒ½éƒ½å·²ç»å®ç°ã€‚æ¥ä¸‹æ¥ï¼Œå°†åˆ†æä¸Šæ–‡ä¸­å‡ºç°é¢‘ç‡æœ€é«˜çš„&lt;code&gt;kafkaHandlerMeta&lt;/code&gt;ä¸ç”Ÿäº§è€…æ¶ˆè´¹è€…çš„å…·ä½“å®ç°ã€‚&lt;/p&gt;

&lt;p&gt;KafkaHandlerMetaå­˜å‚¨äº†å…¨éƒ¨çš„å¯ç”¨ä¿¡æ¯ï¼Œè¯¥ç±»å®ç°æ¯”è¾ƒç®€å•ï¼Œä¸»è¦åˆ†æå…¶æˆå‘˜å¯¹è±¡ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Object bean : å­˜å‚¨åº•å±‚çš„beanå¯¹è±¡&lt;/li&gt;
&lt;li&gt;Method method ï¼š å­˜å‚¨æ–¹æ³•å¯¹è±¡&lt;/li&gt;
&lt;li&gt;Class&amp;lt;? extends Object&amp;gt; parameterType ï¼š å­˜å‚¨å‚æ•°çš„ç±»å‹&lt;/li&gt;
&lt;li&gt;InputConsumer inputConsumer ï¼š è¾“å…¥æ¶ˆè´¹è€…æ³¨è§£å¯¹è±¡ï¼Œå…¶ä¸­å­˜å‚¨ç€åˆ›å»ºConsumeréœ€è¦çš„é…ç½®&lt;/li&gt;
&lt;li&gt;OutputProducer outputProducer ï¼š è¾“å‡ºç”Ÿäº§è€…æ³¨è§£å¯¹è±¡ï¼Œå…¶ä¸­å­˜å‚¨ç€åˆ›å»ºProduceréœ€è¦çš„é…ç½®&lt;/li&gt;
&lt;li&gt;Map&amp;lt;ErrorHandler, Method&amp;gt; errorHandlers = new HashMap&amp;lt;ErrorHandler, Method&amp;gt;() å¼‚å¸¸å¤„ç†å‡½æ•°ä¸å…¶æ–¹æ³•ç»„æˆçš„Map&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;top.ninwoo.kafka.kclient.core.kafkaproducer&quot;&gt;top.ninwoo.kafka.kclient.core.KafkaProducer&lt;/h2&gt;
&lt;p&gt;è¯¥ç±»ä¸»è¦é€šè¿‡å¤šæ€å°è£…äº†kafka Producerçš„æ¥å£ï¼Œæä¾›äº†æ›´åŠ çµæ´»ä¸°å¯Œçš„apiæ¥å£ï¼Œæ¯”è¾ƒç®€å•ä¸åšèµ˜è¿°ã€‚&lt;/p&gt;
&lt;h2 id=&quot;top.ninwoo.kafka.kclient.core.kafkaconsumer&quot;&gt;top.ninwoo.kafka.kclient.core.KafkaConsumer&lt;/h2&gt;
&lt;p&gt;è¯¥ç±»çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;åŠ è½½é…ç½®æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;åˆå§‹åŒ–çº¿ç¨‹æ± &lt;/li&gt;
&lt;li&gt;åˆå§‹åŒ–GracefullyShutdownå‡½æ•°&lt;/li&gt;
&lt;li&gt;åˆå§‹åŒ–kafkaè¿æ¥&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;åœ¨è¿™é‡Œè·³è¿‡æ„é€ å‡½æ•°ï¼Œä½†åœ¨è¿›å…¥æ ¸å¿ƒé—®é¢˜å‰ï¼Œå…ˆæ˜ç¡®å‡ ä¸ªæˆå‘˜å˜é‡çš„ä½œç”¨ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;streamNum : åˆ›å»ºæ¶ˆæ¯æµçš„æ•°é‡&lt;/li&gt;
&lt;li&gt;fixedThreadNum ï¼š å¼‚æ­¥çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡&lt;/li&gt;
&lt;li&gt;minThreadNum ï¼š å¼‚æ­¥çº¿ç¨‹æ± çš„æœ€å°çº¿ç¨‹æ•°&lt;/li&gt;
&lt;li&gt;maxThreadNum ï¼š å¼‚æ­¥çº¿ç¨‹æ± çš„æœ€å¤§çº¿ç¨‹æ•°&lt;/li&gt;
&lt;li&gt;stream : kafkaæ¶ˆæ¯æµ&lt;/li&gt;
&lt;li&gt;streamThreadPool : kafkaæ¶ˆæ¯å¤„ç†çº¿ç¨‹æ± &lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;åœ¨æ¯ä¸ªæ„é€ å‡½æ•°åéƒ½è°ƒç”¨äº†init()æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»init()å…¥æ‰‹ã€‚å¦å¤–ä¸€ä¸ªæ ¸å¿ƒæ–¹æ³•startup()å°†åœ¨ä»‹ç»å®Œinit()å‡½æ•°è¿›è¡Œä»‹ç»ã€‚&lt;/p&gt;
&lt;h3 id=&quot;init&quot;&gt;init()&lt;/h3&gt;
&lt;p&gt;åœ¨æ‰§è¡Œæ ¸å¿ƒä»£ç å‰ï¼Œè¿›è¡Œäº†ä¸€ç³»åˆ—çš„éªŒè¯ï¼Œè¿™é‡Œè·³è¿‡è¯¥éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;1.åŠ è½½é…ç½®æ–‡ä»¶&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;properties = loadPropertiesfile();&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;2.å¦‚æœå…±äº«å¼‚æ­¥çº¿ç¨‹æ± ï¼Œåˆ™åˆå§‹åŒ–å¼‚æ­¥çº¿ç¨‹æ± &lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;sharedAsyncThreadPool = initAsyncThreadPool();&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;3.åˆå§‹åŒ–ä¼˜é›…å…³é—­&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;initGracefullyShutdown();&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;4.åˆå§‹åŒ–kafkaè¿æ¥&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;initKafka();&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;initasyncthreadpool&quot;&gt;initAsyncThreadPool()&lt;/h3&gt;
&lt;p&gt;å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;    private ExecutorService initAsyncThreadPool() {
        ExecutorService syncThreadPool = null;
        if (fixedThreadNum &amp;gt; 0)
            syncThreadPool = Executors.newFixedThreadPool(fixedThreadNum);
        else
            syncThreadPool = new ThreadPoolExecutor(minThreadNum, maxThreadNum,
                    60L, TimeUnit.SECONDS, new SynchronousQueue&amp;lt;Runnable&amp;gt;());

        return syncThreadPool;
    }&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é¦–å…ˆï¼Œå¦‚æœå¼‚æ­¥çº¿ç¨‹æ•°å¤§äº0ï¼Œåˆ™ä½¿ç”¨è¯¥å‚æ•°è¿›è¡Œåˆ›å»ºçº¿ç¨‹æ± ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;syncThreadPool = Executors.newFixedThreadPool(fixedThreadNum);&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚æœçº¿ç¨‹æ•°ä¸å¤§äº0ï¼Œä½¿ç”¨minThreadNum,maxThreadNumè¿›è¡Œæ„é€ çº¿ç¨‹æ± ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;syncThreadPool = new ThreadPoolExecutor(minThreadNum, maxThreadNum,
                    60L, TimeUnit.SECONDS, new SynchronousQueue&amp;lt;Runnable&amp;gt;());&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;executorsç®€ä»‹&quot;&gt;Executorsç®€ä»‹&lt;/h4&gt;
&lt;p&gt;è¿™é‡Œä»‹ç»Executorsæä¾›çš„å››ç§çº¿ç¨‹æ± &lt;/p&gt;
&lt;ul&gt;&lt;li&gt;newCachedThreadPoolåˆ›å»ºä¸€ä¸ªå¯ç¼“å­˜çº¿ç¨‹æ± ï¼Œå¦‚æœçº¿ç¨‹æ± é•¿åº¦è¶…è¿‡å¤„ç†éœ€è¦ï¼Œå¯çµæ´»å›æ”¶ç©ºé—²çº¿ç¨‹ï¼Œè‹¥æ— å¯å›æ”¶ï¼Œåˆ™æ–°å»ºçº¿ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;newFixedThreadPool åˆ›å»ºä¸€ä¸ªå®šé•¿çº¿ç¨‹æ± ï¼Œå¯æ§åˆ¶çº¿ç¨‹æœ€å¤§å¹¶å‘æ•°ï¼Œè¶…å‡ºçš„çº¿ç¨‹ä¼šåœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…ã€‚&lt;/li&gt;
&lt;li&gt;newScheduledThreadPool åˆ›å»ºä¸€ä¸ªå®šé•¿çº¿ç¨‹æ± ï¼Œæ”¯æŒå®šæ—¶åŠå‘¨æœŸæ€§ä»»åŠ¡æ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;newSingleThreadExecutor åˆ›å»ºä¸€ä¸ªå•çº¿ç¨‹åŒ–çš„çº¿ç¨‹æ± ï¼Œå®ƒåªä¼šç”¨å”¯ä¸€çš„å·¥ä½œçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼Œä¿è¯æ‰€æœ‰ä»»åŠ¡æŒ‰ç…§æŒ‡å®šé¡ºåº(FIFO, LIFO, ä¼˜å…ˆçº§)æ‰§è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h4 id=&quot;threadpoolexecutorç®€ä»‹&quot;&gt;ThreadPoolExecutorç®€ä»‹&lt;/h4&gt;
&lt;p&gt;ThreadPooExecutorä¸Executorçš„å…³ç³»å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdn.net/20171225112037173?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjU4MDY4NjM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ„é€ æ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue&amp;lt;Runnable&amp;gt; workQueue)ï¼›

ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue&amp;lt;Runnable&amp;gt; workQueue, RejectedExecutionHandler handler)

ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue&amp;lt;Runnable&amp;gt; workQueue, ThreadFactory threadFactory)

ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue&amp;lt;Runnable&amp;gt; workQueue, ThreadFactory threadFactory, RejectedExecutionHandler handler)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å‚æ•°è¯´æ˜ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;corePoolSize&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œé»˜è®¤æƒ…å†µä¸‹æ ¸å¿ƒçº¿ç¨‹ä¼šä¸€ç›´å­˜æ´»ï¼Œå³ä½¿å¤„äºé—²ç½®çŠ¶æ€ä¹Ÿä¸ä¼šå—å­˜keepAliveTimeé™åˆ¶ã€‚é™¤éå°†allowCoreThreadTimeOutè®¾ç½®ä¸ºtrueã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;maximumPoolSize&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;çº¿ç¨‹æ± æ‰€èƒ½å®¹çº³çš„æœ€å¤§çº¿ç¨‹æ•°ã€‚è¶…è¿‡è¿™ä¸ªæ•°çš„çº¿ç¨‹å°†è¢«é˜»å¡ã€‚å½“ä»»åŠ¡é˜Ÿåˆ—ä¸ºæ²¡æœ‰è®¾ç½®å¤§å°çš„LinkedBlockingDequeæ—¶ï¼Œè¿™ä¸ªå€¼æ— æ•ˆã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;keepAliveTime&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;éæ ¸å¿ƒçº¿ç¨‹çš„é—²ç½®è¶…æ—¶æ—¶é—´ï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´å°±ä¼šè¢«å›æ”¶ã€‚&lt;/p&gt;
&lt;p&gt;æŒ‡å®škeepAliveTimeçš„å•ä½ï¼Œå¦‚TimeUnit.SECONDSã€‚å½“å°†allowCoreThreadTimeOutè®¾ç½®ä¸ºtrueæ—¶å¯¹corePoolSizeç”Ÿæ•ˆã€‚&lt;/p&gt;
&lt;p&gt;çº¿ç¨‹æ± ä¸­çš„ä»»åŠ¡é˜Ÿåˆ—.&lt;/p&gt;
&lt;p&gt;å¸¸ç”¨çš„æœ‰ä¸‰ç§é˜Ÿåˆ—ï¼ŒSynchronousQueue,LinkedBlockingDeque,ArrayBlockingQueueã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;SynchronousQueue&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;çº¿ç¨‹å·¥å‚ï¼Œæä¾›åˆ›å»ºæ–°çº¿ç¨‹çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;RejectedExecutionHandler&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å½“çº¿ç¨‹æ± ä¸­çš„èµ„æºå·²ç»å…¨éƒ¨ä½¿ç”¨ï¼Œæ·»åŠ æ–°çº¿ç¨‹è¢«æ‹’ç»æ—¶ï¼Œä¼šè°ƒç”¨RejectedExecutionHandlerçš„rejectedExecutionæ–¹æ³•ã€‚&lt;/p&gt;
&lt;h2 id=&quot;initkafka&quot;&gt;initKafka&lt;/h2&gt;
&lt;p&gt;ç”±äºkafka APIå·²ç»æ”¹åŠ¨å¾ˆå¤šï¼Œæ‰€ä»¥è¿™é‡Œå…³äºKafkaçš„æ“ä½œä»…åšå‚è€ƒï¼Œä¸ä¼šè¯¦ç»†ä»‹ç»ã€‚&lt;/p&gt;
&lt;p&gt;1.åŠ è½½Consumeré…ç½®&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;ConsumerConfig config = new ConsumerConfig(properties);&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;2.åˆ›å»ºconsumerConnectorè¿æ¥&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;consumerConnector = Consumer.createJavaConsumerConnector(config);&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;3.å­˜å‚¨kafka topicä¸å¯¹åº”è®¾ç½®çš„æ¶ˆæ¯æµæ•°é‡&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Map&amp;lt;String, Integer&amp;gt; topics = new HashMap&amp;lt;String, Integer&amp;gt;();
topics.put(topic, streamNum);&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;4.ä»kafkaè·å–æ¶ˆæ¯æµ&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Map&amp;lt;String, List&amp;lt;KafkaStream&amp;lt;String, String&amp;gt;&amp;gt;&amp;gt; streamsMap = consumerConnector
         .createMessageStreams(topics, keyDecoder, valueDecoder);
streams = streamsMap.get(topic);&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;5.åˆ›å»ºæ¶ˆæ¯å¤„ç†çº¿ç¨‹æ± &lt;/p&gt;
&lt;h2 id=&quot;startup&quot;&gt;startup()&lt;/h2&gt;
&lt;p&gt;ä¸Šè¿°init()ä¸»è¦ä»‹ç»äº†kafkaæ¶ˆè´¹è€…çš„åˆå§‹åŒ–ï¼Œè€Œstartup()åˆ™æ˜¯kafkaConsumerä½œä¸ºæ¶ˆè´¹è€…è¿›è¡Œæ¶ˆè´¹åŠ¨ä½œçš„æ ¸å¿ƒåŠŸèƒ½ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;1.ä¾æ¬¡å¤„ç†æ¶ˆæ¯çº¿ç¨‹streamsä¸­çš„æ¶ˆæ¯&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;for (KafkaStream&amp;lt;String, String&amp;gt; stream : streams) {&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;2.åˆ›å»ºæ¶ˆæ¯ä»»åŠ¡&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;AbstractMessageTask abstractMessageTask = (fixedThreadNum == 0 ? new SequentialMessageTask(
    stream, handler) : new ConcurrentMessageTask(stream, handler, fixedThreadNum));&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;3.æ·»åŠ åˆ°tasksä¸­ï¼Œä»¥æ–¹ä¾¿å…³é—­è¿›ç¨‹&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;tasks.add(abstractMessageTask);&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;4.æ‰§è¡Œä»»åŠ¡&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;streamThreadPool.execute(abstractMessageTask);&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;abstractmessagetask&quot;&gt;AbstractMessageTask&lt;/h2&gt;
&lt;p&gt;ä»»åŠ¡æ‰§è¡Œçš„æŠ½è±¡ç±»ï¼Œæ ¸å¿ƒåŠŸèƒ½å¦‚ä¸‹ä»æ¶ˆæ¯çº¿ç¨‹æ± ä¸­ä¸æ–­è·å–æ¶ˆæ¯ï¼Œè¿›è¡Œæ¶ˆè´¹ã€‚&lt;br/&gt;ä¸‹é¢æ˜¯å®Œæ•´ä»£ç ï¼Œä¸å†è¯¦ç»†ä»‹ç»ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;    abstract class AbstractMessageTask implements Runnable {
        protected KafkaStream&amp;lt;String, String&amp;gt; stream;

        protected MessageHandler messageHandler;

        AbstractMessageTask(KafkaStream&amp;lt;String, String&amp;gt; stream,
                            MessageHandler messageHandler) {
            this.stream = stream;
            this.messageHandler = messageHandler;
        }

        public void run() {
            ConsumerIterator&amp;lt;String, String&amp;gt; it = stream.iterator();
            while (status == Status.RUNNING) {
                boolean hasNext = false;
                try {
                    // When it is interrupted if process is killed, it causes some duplicate message processing, because it commits the message in a chunk every 30 seconds
                    hasNext = it.hasNext();
                } catch (Exception e) {
                    // hasNext() method is implemented by scala, so no checked
                    // exception is declared, in addtion, hasNext() may throw
                    // Interrupted exception when interrupted, so we have to
                    // catch Exception here and then decide if it is interrupted
                    // exception
                    if (e instanceof InterruptedException) {
                        log.info(
                                &quot;The worker [Thread ID: {}] has been interrupted when retrieving messages from kafka broker. Maybe the consumer is shutting down.&quot;,
                                Thread.currentThread().getId());
                        log.error(&quot;Retrieve Interrupted: &quot;, e);

                        if (status != Status.RUNNING) {
                            it.clearCurrentChunk();
                            shutdown();
                            break;
                        }
                    } else {
                        log.error(
                                &quot;The worker [Thread ID: {}] encounters an unknown exception when retrieving messages from kafka broker. Now try again.&quot;,
                                Thread.currentThread().getId());
                        log.error(&quot;Retrieve Error: &quot;, e);
                        continue;
                    }
                }

                if (hasNext) {
                    MessageAndMetadata&amp;lt;String, String&amp;gt; item = it.next();
                    log.debug(&quot;partition[&quot; + item.partition() + &quot;] offset[&quot;
                            + item.offset() + &quot;] message[&quot; + item.message()
                            + &quot;]&quot;);

                    handleMessage(item.message());

                    // if not auto commit, commit it manually
                    if (!isAutoCommitOffset) {
                        consumerConnector.commitOffsets();
                    }
                }
            }

            protected void shutdown() {

                // Actually it doesn't work in auto commit mode, because kafka v0.8 commits once per 30 seconds, so it is bound to consume duplicate messages.
                stream.clear();

            }

            protected abstract void handleMessage(String message);
        }
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;sequentialmessagetask-sequentialmessagetask&quot;&gt;SequentialMessageTask &amp;amp;&amp;amp; SequentialMessageTask&lt;/h3&gt;
&lt;p&gt;æˆ–è®¸æ‚¨è¿˜æ¯”è¾ƒè¿·æƒ‘å¦‚ä½•åœ¨è¿™ä¸ªæŠ½è±¡ç±»ä¸­å®ç°æˆ‘ä»¬å…·ä½“çš„æ¶ˆè´¹æ–¹æ³•ï¼Œå®é™…ä¸Šæ˜¯é€šè¿‡å­ç±»å®ç°handleMessageæ–¹æ³•è¿›è¡Œç»‘å®šæˆ‘ä»¬å…·ä½“çš„æ¶ˆè´¹æ–¹æ³•ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;    class SequentialMessageTask extends AbstractMessageTask {
        SequentialMessageTask(KafkaStream&amp;lt;String, String&amp;gt; stream,
                              MessageHandler messageHandler) {
            super(stream, messageHandler);
        }

        @Override
        protected void handleMessage(String message) {
            messageHandler.execute(message);
        }
    }&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨è¯¥å­ç±»ä¸­ï¼ŒhandleMessageç›´æ¥æ‰§è¡Œäº†&lt;code&gt;messageHandler.execute(message)&lt;/code&gt;,è€Œæ²¡æœ‰è°ƒç”¨çº¿ç¨‹æ± ï¼Œæ‰€ä»¥æ˜¯é¡ºåºæ¶ˆè´¹æ¶ˆæ¯ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;    class ConcurrentMessageTask extends AbstractMessageTask {
        private ExecutorService asyncThreadPool;

        ConcurrentMessageTask(KafkaStream&amp;lt;String, String&amp;gt; stream,
                              MessageHandler messageHandler, int threadNum) {
            super(stream, messageHandler);

            if (isSharedAsyncThreadPool)
                asyncThreadPool = sharedAsyncThreadPool;
            else {
                asyncThreadPool = initAsyncThreadPool();
            }
        }

        @Override
        protected void handleMessage(final String message) {
            asyncThreadPool.submit(new Runnable() {
                public void run() {
                    // if it blows, how to recover
                    messageHandler.execute(message);
                }
            });
        }

        protected void shutdown() {
            if (!isSharedAsyncThreadPool)
                shutdownThreadPool(asyncThreadPool, &quot;async-pool-&quot;
                        + Thread.currentThread().getId());
        }
    }&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨ConcurrentMessageTaskä¸­ï¼Œ handleMessageè°ƒç”¨asyncThreadPool.submit()æäº¤äº†ä»»åŠ¡åˆ°å¼‚æ­¥çº¿ç¨‹æ± ä¸­ï¼Œæ˜¯ä¸€ä¸ªå¹¶å‘æ¶ˆè´¹ã€‚&lt;/p&gt;
&lt;p&gt;è€ŒmessageHandleræ˜¯é€šè¿‡&lt;code&gt;KClientBoot&lt;/code&gt;çš„createKafkaHandleråˆ›å»ºå¹¶å‘é€è¿‡æ¥çš„ï¼Œæ‰€ä»¥å®ç°äº†æœ€ç»ˆçš„æ¶ˆè´¹ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ€»ç»“-1&quot;&gt;æ€»ç»“ï¼š&lt;/h2&gt;
&lt;p&gt;åˆ°æ­¤å…¨éƒ¨çš„é¡¹ç›®è§£è¯»å®Œæ¯•ï¼Œå¦‚æœä»æœ‰ç–‘æƒ‘ï¼Œå¯ä»¥å‚çœ‹æè‰³é¹è€å¸ˆçš„ã€Šå¯ä¼¸ç¼©æœåŠ¡æ¶æ„æ¡†æ¶ä¸ä¸­é—´ä»¶ã€‹ä¸€ä¹¦ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ä¸æˆ‘è”ç³»äº¤æµé—®é¢˜ã€‚&lt;/p&gt;
</description>
<pubDate>Tue, 16 Oct 2018 07:30:00 +0000</pubDate>
<dc:creator>NinWoo</dc:creator>
<og:description>[TOC] æœ€è¿‘åœ¨æ‹œè¯»æè‰³é¹çš„ã€Šå¯ä¼¸ç¼©æœåŠ¡æ¶æ„â€”â€”æ¡†æ¶ä¸ä¸­é—´ä»¶ã€‹ï¼Œè¯¥ç¯‡éšç¬”ï¼Œé’ˆå¯¹ç¬¬äºŒç« çš„KClientï¼ˆkafkaæ¶ˆæ¯ä¸­é—´ä»¶ï¼‰æºç è§£è¯»é¡¹ç›®ï¼Œè¿›è¡Œå­¦ä¹ ã€‚ kclientæ¶ˆæ¯ä¸­é—´ä»¶ ä»ä½¿ç”¨è§’åº¦ä¸Šå¼€å§‹å…¥æ‰‹å­¦</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/NinWoo/p/9798270.html</dc:identifier>
</item>
<item>
<title>æ·±å…¥ç†è§£synchronizedæ–¹æ³•åŒæ­¥çš„æ˜¯æ–¹æ³•è¿˜æ˜¯å¯¹è±¡ï¼Ÿ - çœŸæ­£çš„å°æ˜è¢«å ç”¨äº†</title>
<link>http://www.cnblogs.com/SAM-CJM/p/9798263.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/SAM-CJM/p/9798263.html</guid>
<description>&lt;p&gt;&lt;strong&gt;&lt;span&gt;ä¸€.è¿ç”¨synchronizedå…³é”®å­—&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹ä¸€ä¸ªå¤šçº¿ç¨‹ä¸­çº¿ç¨‹ä¸å®‰å…¨çš„åˆ—å­&lt;/p&gt;
&lt;p&gt;ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;å…±äº«æ•°æ®ç±»ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; NotSynchronizated &lt;span&gt;extends&lt;/span&gt;&lt;span&gt; Thread {
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; num =10&lt;span&gt;;
    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; run(){
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
            System.out.println(&lt;/span&gt;&quot;å½“å‰çº¿ç¨‹ä¸º:&quot;+&lt;span&gt;currentThread().getName());
            num&lt;/span&gt;--&lt;span&gt;;
            System.out.println(&lt;/span&gt;&quot;numçš„å€¼ä¸º:&quot;+&lt;span&gt;num);
            Thread.sleep(&lt;/span&gt;100&lt;span&gt;);
        } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (InterruptedException e) {
            e.printStackTrace();
        }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;çº¿ç¨‹æµ‹è¯•ç±»:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; Text {

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; main(String[] args) {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å°†å…±äº«æ•°æ®æ”¾å…¥3ä¸ªçº¿ç¨‹é‡Œè¿›è¡Œå¤„ç†&lt;/span&gt;
        NotSynchronizated notSynchronizated = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; NotSynchronizated();
        Thread t1&lt;/span&gt;=&lt;span&gt;new&lt;/span&gt; Thread(notSynchronizated,&quot;A&quot;&lt;span&gt;);
        Thread t2&lt;/span&gt;=&lt;span&gt;new&lt;/span&gt; Thread(notSynchronizated,&quot;B&quot;&lt;span&gt;);
        Thread t3&lt;/span&gt;=&lt;span&gt;new&lt;/span&gt; Thread(notSynchronizated,&quot;C&quot;&lt;span&gt;);
        Thread t4&lt;/span&gt;=&lt;span&gt;new&lt;/span&gt; Thread(notSynchronizated,&quot;D&quot;&lt;span&gt;);
        t1.start();
        t2.start();
        t3.start();
        t4.start();
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åœ¨è¿™ä¸ªåˆ—å­ä¸­runæ–¹æ³•æ²¡æœ‰ä½¿ç”¨å…³é”®å­—synchronizedï¼Œé‚£ä¹ˆå°±ä¼šé€ æˆçº¿ç¨‹ä¸å®‰å…¨ï¼Œç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;ã€€&lt;img src=&quot;https://img2018.cnblogs.com/blog/1433995/201810/1433995-20181016125600092-1890941269.png&quot; alt=&quot;&quot; width=&quot;106&quot; height=&quot;113&quot;/&gt;&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆå½“æˆ‘ä»¬ä½¿ç”¨å…³é”®å­—synchronizedåç»“æœå°±ä¼šåŒæ­¥äº†ï¼Œç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;Â &lt;img src=&quot;https://img2018.cnblogs.com/blog/1433995/201810/1433995-20181016125746242-1089384934.png&quot; alt=&quot;&quot; width=&quot;140&quot; height=&quot;117&quot;/&gt;&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆï¼Œåœ¨è¿™é‡Œæ˜¯å¯¹è¿™ä¸ªrunæ–¹æ³•è¿›è¡Œäº†åŒæ­¥å‘¢ï¼Ÿè¿˜æ˜¯å¯¹è¿™ä¸ªå¯¹è±¡è¿›è¡Œäº†åŒæ­¥å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;äºŒ.synchronizedåŒæ­¥çš„æ˜¯å¯¹è±¡&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Â ä¸ºäº†è¯æ˜synchronizedåŒæ­¥çš„æ˜¯å¯¹è±¡ï¼Œæˆ‘ä»¬ä¸¾å‡ºä¸‹é¢çš„ä»£ç ï¼š&lt;/p&gt;
&lt;p&gt;å…±äº«èµ„æºç±»ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; SynchronizatedObject &lt;span&gt;extends&lt;/span&gt;&lt;span&gt; Thread {
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; num=20&lt;span&gt;;
    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;synchronized&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; run(){

        System.out.println(&lt;/span&gt;&quot;å½“å‰çš„çº¿ç¨‹ä¸º&quot;+&lt;span&gt;currentThread().getName());
        num&lt;/span&gt;--&lt;span&gt;;
        System.out.println(&lt;/span&gt;&quot;å½“å‰numä¸º&quot;+&lt;span&gt;num);
    }

}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Â æµ‹è¯•ç±»ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; Text {

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; main(String[] args) {&lt;/span&gt;
        SynchronizatedObject synchronizatedObject1=&lt;span&gt;new&lt;/span&gt; SynchronizatedObject();&lt;span&gt;//&lt;/span&gt;&lt;span&gt;åˆ›å»ºç¬¬ä¸€ä¸ªèµ„æºå…±äº«ç±»&lt;/span&gt;
        SynchronizatedObject synchronizatedObject2=&lt;span&gt;new&lt;/span&gt; SynchronizatedObject();&lt;span&gt;//&lt;/span&gt;&lt;span&gt;åˆ›å»ºç¬¬äºŒä¸ªèµ„æºå…±äº«ç±»&lt;/span&gt;
        Thread t1=&lt;span&gt;new&lt;/span&gt; Thread(synchronizatedObject1,&quot;A&quot;);&lt;span&gt;//&lt;/span&gt;&lt;span&gt;åŠ å…¥&lt;/span&gt;
        Thread t2=&lt;span&gt;new&lt;/span&gt; Thread(synchronizatedObject2,&quot;B&quot;);&lt;span&gt;//&lt;/span&gt;&lt;span&gt;åŠ å…¥&lt;/span&gt;
&lt;span&gt;        t1.start();
        t2.start();
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç»“æœå¦‚ä¸‹ï¼š&lt;img src=&quot;https://img2018.cnblogs.com/blog/1433995/201810/1433995-20181016131112218-1115420545.png&quot; alt=&quot;&quot; width=&quot;147&quot; height=&quot;122&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä»è¿™é‡Œæ˜æ˜¾çœ‹å‡ºè¿™ä¸ªsynchronizedå…³é”®å­—åŒæ­¥çš„æ˜¯å¯¹è±¡è€Œä¸æ˜¯æ–¹æ³•ï¼Œ&lt;/p&gt;
&lt;p&gt;å¦‚æœåŒæ­¥çš„æ˜¯æ–¹æ³•é‚£ä¹ˆä»–å°†ä¸ä¼šå‡ºç°è¿™ç§çº¿ç¨‹ä¸å®‰å…¨çš„æƒ…å†µï¼Œè€Œæ˜¯ä¸¤å¯¹è±¡ä¸€ä¸ªä¸€ä¸ªæŒ‰é¡ºåºçš„è¿›å…¥è¿™ä¸ªåŒæ­¥çš„æ–¹æ³•é‡Œï¼Œ&lt;/p&gt;
&lt;p&gt;å‡ºç°è¿™ä¸­æƒ…å†µï¼Œåªèƒ½è¯´æ˜ä»–æ˜¯å¯¹è±¡åŒæ­¥çš„ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥è¯´è¿™æ®µä»£ç æ„æ€æ˜¯æˆ‘åˆ›å»ºäº†ä¸¤ä¸ªå¯¹è±¡ï¼ŒåŒæ—¶æˆ‘ä¹Ÿåˆ›å»ºäº†ä¸¤æŠŠå¯¹è±¡é”æ¥åŒæ­¥è¯å„è‡ªçš„runæ–¹æ³•ï¼Œåªä¸è¿‡æ¯ä¸€æ¡çº¿ç¨‹çš„è°ƒç”¨é¡ºåºä¸åŒæ‰ä¼šå‡ºç°è¿™æ ·çš„ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;æ€»ç»“ï¼šsynchronizedå…³é”®å­—åŒæ­¥çš„æ˜¯å¯¹è±¡ä¸æ˜¯æ–¹æ³•&lt;/span&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/p&gt;

</description>
<pubDate>Tue, 16 Oct 2018 07:29:00 +0000</pubDate>
<dc:creator>çœŸæ­£çš„å°æ˜è¢«å ç”¨äº†</dc:creator>
<og:description>ä¸€.è¿ç”¨synchronizedå…³é”®å­— é¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹ä¸€ä¸ªå¤šçº¿ç¨‹ä¸­çº¿ç¨‹ä¸å®‰å…¨çš„åˆ—å­ ä»£ç å¦‚ä¸‹ï¼š å…±äº«æ•°æ®ç±»ï¼š çº¿ç¨‹æµ‹è¯•ç±»: åœ¨è¿™ä¸ªåˆ—å­ä¸­runæ–¹æ³•æ²¡æœ‰ä½¿ç”¨å…³é”®å­—synchronizedï¼Œé‚£ä¹ˆå°±ä¼šé€ æˆçº¿</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/SAM-CJM/p/9798263.html</dc:identifier>
</item>
<item>
<title>è£…é¥°è€…æ¨¡å¼ - mingmingcome</title>
<link>http://www.cnblogs.com/mingmingcome/p/9798248.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/mingmingcome/p/9798248.html</guid>
<description>&lt;p&gt;&lt;code&gt;begin 2018å¹´9æœˆ29æ—¥14:19:22&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&quot;è£…é¥°è€…æ¨¡å¼decorator-pattern&quot;&gt;è£…é¥°è€…æ¨¡å¼ï¼ˆDecorator Patternï¼‰&lt;/h2&gt;
&lt;h4 id=&quot;å®šä¹‰&quot;&gt;å®šä¹‰&lt;/h4&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;é‡‘ç‰å…¶å¤–ï¼Œè´¥çµ®å…¶ä¸­ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ï¼Œå°±å¢åŠ åŠŸèƒ½æ¥è¯´ï¼Œè£…é¥°è€…æ¨¡å¼æ¯”ç”Ÿæˆå­ç±»æ›´ä¸ºçµæ´»ã€‚â€”â€”ã€Šè®¾è®¡æ¨¡å¼ï¼šå¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„åŸºç¡€ã€‹&lt;/p&gt;
&lt;p&gt;è£…é¥°è€…æ¨¡å¼æ˜¯ä¸€ç§å¯¹è±¡ç»“æ„å‹æ¨¡å¼ã€‚&lt;/p&gt;
&lt;h4 id=&quot;ä½¿ç”¨åœºæ™¯&quot;&gt;ä½¿ç”¨åœºæ™¯&lt;/h4&gt;
&lt;ul readability=&quot;1.5&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;åœ¨ä¸å½±å“å…¶ä»–å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œä»¥åŠ¨æ€ã€é€æ˜çš„æ–¹å¼ç»™å•ä¸ªå¯¹è±¡æ·»åŠ èŒè´£ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;éœ€è¦åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡å¢åŠ åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½ä¹Ÿå¯ä»¥åŠ¨æ€åœ°è¢«æ’¤é”€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;å½“ä¸èƒ½é‡‡ç”¨ç»§æ‰¿çš„æ–¹å¼å¯¹ç³»ç»Ÿè¿›è¡Œæ‰©å……æˆ–è€…é‡‡ç”¨ç»§æ‰¿ä¸åˆ©äºç³»ç»Ÿæ‰©å±•å’Œç»´æŠ¤æ—¶ã€‚ä¸èƒ½é‡‡ç”¨ç»§æ‰¿çš„æƒ…å†µä¸»è¦æœ‰ä¸¤ç±»ï¼šç¬¬ä¸€ç±»æ˜¯ç³»ç»Ÿä¸­å­˜åœ¨å¤§é‡ç‹¬ç«‹çš„æ‰©å±•ï¼Œä¸ºæ”¯æŒæ¯ä¸€ç§ç»„åˆå°†äº§ç”Ÿå¤§é‡çš„å­ç±»ï¼Œä½¿å¾—å­ç±»æ•°ç›®å‘ˆçˆ†ç‚¸æ€§å¢é•¿ï¼›ç¬¬äºŒç±»æ˜¯å› ä¸ºç±»å®šä¹‰ä¸èƒ½ç»§æ‰¿ï¼ˆå¦‚finalç±»ï¼‰.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;h4 id=&quot;è§’è‰²&quot;&gt;è§’è‰²&lt;/h4&gt;
&lt;p&gt;æŠ½è±¡æ„ä»¶è§’è‰²ï¼ˆComponentï¼‰ï¼šå®šä¹‰ä¸€ä¸ªå¯¹è±¡æ¥å£æˆ–æŠ½è±¡ç±»ï¼Œå¯ä»¥ç»™è¿™äº›å¯¹è±¡åŠ¨æ€åœ°æ·»åŠ èŒè´£ã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“æ„ä»¶è§’è‰²ï¼ˆConcreteComponentï¼‰ï¼šå®é™…è¢«åŠ¨æ€åœ°æ·»åŠ èŒè´£çš„å¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;æŠ½è±¡è£…é¥°è€…è§’è‰²ï¼ˆDecoratorï¼‰ï¼šå®ç°äº†Componentæ¥å£ï¼Œç”¨æ¥æ‰©å±•Componentç±»çš„åŠŸèƒ½ï¼Œä½†å¯¹äºComponentæ¥è¯´ï¼Œæ˜¯æ— éœ€çŸ¥é“Decoratorçš„å­˜åœ¨çš„ã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“è£…é¥°è€…è§’è‰²ï¼ˆConcreteDecoratorï¼‰ï¼šåŠ¨æ€åœ°æ·»åŠ èŒè´£çš„å¯¹è±¡ã€‚&lt;/p&gt;
&lt;h4 id=&quot;å›¾ç¤º&quot;&gt;å›¾ç¤º&lt;/h4&gt;
&lt;p&gt;è£…é¥°è€…æ¨¡å¼ï¼ˆDecoratorï¼‰ç»“æ„å›¾&lt;br/&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Mingmingcome/cnblogs/master/images/decorator-class-diagram.jpg&quot; alt=&quot;è£…é¥°è€…æ¨¡å¼ï¼ˆDecoratorï¼‰ç»“æ„å›¾&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;ä»£ç ç¤ºä¾‹&quot;&gt;ä»£ç ç¤ºä¾‹&lt;/h4&gt;
&lt;p&gt;è£…é¥°è€…æ¨¡å¼ï¼ˆDecoratorï¼‰ä»£ç ç¤ºä¾‹ç±»å›¾&lt;br/&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Mingmingcome/cnblogs/master/images/decorator-instance-class-diagram.jpg&quot; alt=&quot;è£…é¥°è€…æ¨¡å¼ï¼ˆDecoratorï¼‰ä»£ç ç¤ºä¾‹ç±»å›¾&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªå…³äºç›¸äº²çš„æ•…äº‹ã€‚æŸå®¶æœ‰å¥³åˆé•¿æˆï¼Œä¸ƒå¤§å§‘å…«å¤§å§¨æ¬²å¸®å¿™è§…å¾—ä½³å©¿ï¼Œååœ¨å„ç§ç¾¤ã€åœˆã€ç½‘ç«™ï¼Œæ”¶é›†äº†å„ç§ç”·äººçš„èµ„æ–™ã€‚è¿™é‡Œéœ€è¦ä¸€ä¸ªåº”ç”¨ç”Ÿæˆæ”¶é›†è¿‡æ¥çš„ç”·äººçš„æè¿°ï¼Œå¦‚ï¼šæ˜¯å¦æœ‰è½¦ã€æ˜¯å¦æœ‰æˆ¿ã€æ˜¯å¦æœ‰å­˜æ¬¾ã€æ˜¯å¦æœ‰å¥½å“è´¨ã€‚ç„¶åè¿™ä¸ªåº”ç”¨äº†è£…é¥°è€…æ¨¡å¼çš„åº”ç”¨å°±è¯ç”Ÿäº†ï¼ŒåŠ¨æ€æ·»åŠ ç”·äººçš„æè¿°ï¼Œæœ€åå¾—åˆ°ç”·äººçš„ç»¼è¿°ã€‚&lt;/p&gt;
&lt;p&gt;æŠ½è±¡æ„ä»¶è§’è‰²ï¼ˆMan.javaï¼‰ï¼š&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;// ç”·äºº
public interface Man {
    public void getManDesc();
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…·ä½“æ„ä»¶è§’è‰²ï¼ˆNormalMan.javaï¼‰ï¼š&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;// æ™®é€šç”·äºº
public class NormalMan implements Man{
    private String name = null;
    
    public NormalMan(String name) {
        this.name = name;
    }
    
    @Override
    public void getManDesc() {
        System.out.print(name + &quot;: &quot;);
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æŠ½è±¡è£…é¥°è€…è§’è‰²ï¼ˆAttachedPropertiesDecorator.javaï¼‰ï¼š&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;// é™„åŠ å±æ€§è£…é¥°è€…
public abstract class AttachedPropertiesDecorator implements Man{
    private Man man;
    
    public AttachedPropertiesDecorator(Man man) {
        this.man = man;
    }
    
    public void getManDesc() {
        man.getManDesc();
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…·ä½“è£…é¥°è€…è§’è‰²ï¼ˆCarDecoratorImpl.javaã€HouseDecoratorImpl.javaã€DepositDecoratorImpl.javaã€QualityDecoratorImpl.javaï¼‰ï¼š&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;// å°è½¦è£…é¥°è€…
public class CarDecoratorImpl extends AttachedPropertiesDecorator{
    private String car = &quot;æœ‰è½¦&quot;;
    
    public CarDecoratorImpl(Man man) {
        super(man);
    }
    
    public void addCar() {
        System.out.print(car + &quot; &quot;);
    }
    
    @Override
    public void getManDesc() {
        super.getManDesc();
        addCar();
    }
}

// æˆ¿å­è£…é¥°è€…
public class HouseDecoratorImpl extends AttachedPropertiesDecorator{
    private String house = &quot;æœ‰æˆ¿&quot;;
    
    public HouseDecoratorImpl(Man man) {
        super(man);
    }
    
    public void addHouse() {
        System.out.print(house + &quot; &quot;);
    }
    
    @Override
    public void getManDesc() {
        super.getManDesc();
        addHouse();
    }
}

// å­˜æ¬¾è£…é¥°è€…
public class DepositDecoratorImpl extends AttachedPropertiesDecorator{
    private String deposit = &quot;æœ‰å­˜æ¬¾&quot;;
    
    public DepositDecoratorImpl(Man man) {
        super(man);
    }
    
    public void addDeposit() {
        System.out.print(deposit + &quot; &quot;);
    }
    
    @Override
    public void getManDesc() {
        super.getManDesc();
        addDeposit();
    }
}

// å“è´¨è£…é¥°è€…
public class QualityDecoratorImpl extends AttachedPropertiesDecorator{
    private String quality = &quot;æœ‰å¥½å“è´¨&quot;;
    
    public QualityDecoratorImpl(Man man) {
        super(man);
    }
    
    public void addQuality() {
        System.out.print(quality + &quot; &quot;);
    }
    
    @Override
    public void getManDesc() {
        super.getManDesc();
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æœ‰è½¦ã€æœ‰æˆ¿ã€æœ‰å­˜æ¬¾ã€æœ‰å“è´¨å…·ä½“ä¿®é¥°è€…ã€‚&lt;/p&gt;
&lt;p&gt;è£…é¥°è€…æ¨¡å¼æµ‹è¯•ç±»ï¼ˆDecoratorTest.javaï¼‰ï¼š&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;public class DecoratorTest {

    public static void main(String[] args) {
        Man man = new NormalMan(&quot;å¼ ä¸‰&quot;);
        Man man1 = new CarDecoratorImpl(man);
        Man man2 = new HouseDecoratorImpl(man1);
        Man man3 = new DepositDecoratorImpl(man2);
        System.out.println(&quot;å±‚å±‚è£…é¥°:&quot;);
        man3.getManDesc();
        System.out.println();
        
        System.out.println(&quot;é‡å¤è£…é¥°ï¼ˆæœ‰ä¸¤ä¸ª'æœ‰å­˜æ¬¾'ï¼‰:&quot;);
        Man man4 = new DepositDecoratorImpl(man3);
        man4.getManDesc();
        System.out.println();
        
        System.out.println(&quot;ä»»æ„ä¿®é¥°:&quot;);
        Man man5 = new QualityDecoratorImpl(man1);
        man5.getManDesc();
        System.out.println();
        
        System.out.println(&quot;ç›´æ¥å¾—åˆ°ä¿®é¥°ç»“æœ:&quot;);
        Man man6 = new HouseDecoratorImpl(new DepositDecoratorImpl(new NormalMan(&quot;æå››&quot;)));
        man6.getManDesc();
        System.out.println();

    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿è¡Œç»“æœï¼š&lt;br/&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Mingmingcome/cnblogs/master/images/decorator-instance-test-result.png&quot; alt=&quot;è¿è¡Œç»“æœ&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;ä¼˜ç‚¹&quot;&gt;ä¼˜ç‚¹&lt;/h4&gt;
&lt;p&gt;1ã€è£…é¥°è€…æ¨¡å¼å’Œç»§æ‰¿å…³ç³»çš„ç›®çš„éƒ½æ˜¯è¦æ‰©å±•å¯¹è±¡çš„åŠŸèƒ½ï¼Œä½†æ˜¯è£…é¥°æ¨¡å¼å¯ä»¥æä¾›æ¯”ç»§æ‰¿æ›´å¤šçš„çµæ´»å‹ã€‚&lt;/p&gt;
&lt;p&gt;2ã€é€šè¿‡ä½¿ç”¨ä¸åŒçš„å…·ä½“è£…é¥°è€…ç±»åŠå®ƒä»¬ä¸åŒçš„ç»„åˆé¡ºåºï¼Œå¯ä»¥å¾—åˆ°ä¸åŒè£…é¥°åå…·æœ‰ä¸åŒè¡Œä¸ºæˆ–è€…çŠ¶æ€çš„å¯¹è±¡ã€‚ä¾‹å¦‚ä¸Šé¢çš„CarDecoratorImplå¯ä»¥å¤šæ¬¡ä¿®é¥°ä¸€ä¸ªç”·äººï¼Œè¯æ˜ä»–æœ‰å¾ˆå¤šè½¦ã€‚&lt;/p&gt;
&lt;p&gt;3ã€ç¬¦åˆå¼€é—­åŸåˆ™ã€‚&lt;/p&gt;
&lt;h4 id=&quot;ç¼ºç‚¹&quot;&gt;ç¼ºç‚¹&lt;/h4&gt;
&lt;p&gt;1ã€å¢åŠ äº†æŠ½è±¡è£…é¥°è€…ç±»å’Œå…·ä½“è£…é¥°è€…ç±»ï¼Œä¸€å®šç¨‹åº¦å¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ï¼ŒåŠ å¤§äº†ç³»ç»Ÿçš„å­¦ä¹ å’Œç†è§£æˆæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;2ã€çµæ´»æ€§ä¹Ÿæ„å‘³ç€æ›´å®¹æ˜“å‡ºé”™ï¼Œå¯¹äºå¤šæ¬¡è¢«å¤šæ¬¡ä¿®é¥°çš„å¯¹è±¡ï¼Œè°ƒè¯•æ—¶å¯»æ‰¾é”™è¯¯å¯èƒ½éœ€è¦æ‰¾åˆ°å¤šä¸ªåœ°æ–¹ã€‚&lt;/p&gt;
&lt;h3 id=&quot;è£…é¥°è€…æ¨¡å¼è¿›é˜¶&quot;&gt;è£…é¥°è€…æ¨¡å¼è¿›é˜¶&lt;/h3&gt;
&lt;h4 id=&quot;é€æ˜ä¸åŠé€æ˜çš„è£…é¥°è€…æ¨¡å¼&quot;&gt;é€æ˜ä¸åŠé€æ˜çš„è£…é¥°è€…æ¨¡å¼&lt;/h4&gt;
&lt;p&gt;é€æ˜çš„è£…é¥°è€…æ¨¡å¼ï¼šè¦æ±‚å®¢æˆ·ç«¯å®Œå…¨é’ˆå¯¹æŠ½è±¡ç¼–ç¨‹ï¼ˆä¾èµ–å€’ç½®åŸåˆ™ï¼‰ï¼Œè£…é¥°è€…æ¨¡å¼çš„é€æ˜å‹è¦æ±‚å®¢æˆ·ç«¯ç¨‹åºä¸åº”è¯¥å£°æ˜å…·ä½“æ„ä»¶ç±»å‹å’Œå…·ä½“è£…é¥°è€…ç±»å‹ï¼Œè€Œåº”è¯¥å…¨éƒ¨å£°æ˜ä¸ºæŠ½è±¡æ„ä»¶ç±»å‹ã€‚å½“ç„¶è°ƒç”¨çš„ä¹Ÿæ˜¯æŠ½è±¡æ„ä»¶ç±»å£°æ˜çš„æ¥å£æ–¹æ³•äº†ã€‚&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;Man man = new NormalMan(&quot;å¼ ä¸‰&quot;);
Man man1 = new CarDecoratorImpl(man);
Man man2 = new HouseDecoratorImpl(man1);
Man man3 = new DepositDecoratorImpl(man2);&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åŠé€æ˜çš„è£…é¥°è€…æ¨¡å¼ï¼šå…è®¸ç”¨æˆ·åœ¨å®¢æˆ·ç«¯å£°æ˜å…·ä½“è£…é¥°è€…ç±»å‹çš„å¯¹è±¡ï¼Œå…è®¸åœ¨å…·ä½“è£…é¥°è€…ä¸­æ–°å¢æ–¹æ³•ä¸”å®¢æˆ·ç«¯å¯ä»¥è°ƒç”¨è¿™äº›æ–°å¢çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;Man man = new NormalMan(&quot;å¼ ä¸‰&quot;);
CarDecoratorImpl man1 = new CarDecoratorImpl(man);
HouseDecoratorImpl man2 = new HouseDecoratorImpl(man);
DepositDecoratorImpl man3 = new DepositDecoratorImpl(man);

man1.addCar();
man2.addHouse();
man3.addDeposit();&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;java.ioä¸­è£…é¥°è€…æ¨¡å¼çš„åº”ç”¨&quot;&gt;java.ioä¸­è£…é¥°è€…æ¨¡å¼çš„åº”ç”¨&lt;/h4&gt;
&lt;p&gt;java I/Oç±»ç»§æ‰¿ç»“æ„å›¾ï¼š&lt;br/&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Mingmingcome/cnblogs/master/images/decorator-Java%20IO.jpg&quot; alt=&quot;java I/Oç±»ç»§æ‰¿ç»“æ„å›¾&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è™½ç„¶java I/Oä¸­ç±»æ¯”è¾ƒå¤šï¼Œä½†æ˜¯è£…é¥°è€…æ¨¡å¼çš„åº”ç”¨æ–¹å¼æ˜¯å·®ä¸å¤šçš„ã€‚ä¸‹é¢ä¸¾ä¸€ä¸ªä¾‹å­ï¼šInputStreamåŠå…¶å­ç±»&lt;br/&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Mingmingcome/cnblogs/master/images/decorator-inputstream-hierarchy.jpg&quot; alt=&quot;InputStreamåŠå…¶å­ç±»&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è£…é¥°è€…æ¨¡å¼å¯¹ç…§ä¸Šå›¾å¯å¾—ï¼š&lt;/p&gt;
&lt;p&gt;æŠ½è±¡æ„ä»¶è§’è‰²ï¼šInputStreamï¼Œè¿™æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“æ„ä»¶è§’è‰²ï¼šByteArrayInputStreamã€FileInputStreamã€PipedInputStreamã€StringBufferInputStreamï¼ˆå·²å¼ƒç”¨ï¼‰ã€AudioInputStreamç­‰ï¼Œå®ç°äº†InputStreamæŠ½è±¡ç±»ã€‚&lt;/p&gt;
&lt;p&gt;æŠ½è±¡è£…é¥°è€…è§’è‰²ï¼šFilterInputStreamï¼Œå®ç°äº†æŠ½è±¡æ„ä»¶è§’è‰²ï¼Œä¸”æˆä¸ºå…·ä½“è£…é¥°è€…çš„çˆ¶ç±»ã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“è£…é¥°è€…æ¨¡å¼ï¼šFilterInputStreamçš„å­ç±»å¦‚å¸¸ç”¨çš„BufferedInputStreamã€DataInputStreamï¼Œè¿˜æœ‰å…¶ä»–ä¸å¸¸ç”¨çš„CheckedInputStreamã€CipherInputStreamã€LineNumberInputStreamã€PushBackInputStreamã€‚è¿™é‡Œå…¶å®å…·ä½“çš„è£…é¥°è€…è¿˜æœ‰ç›´æ¥ç»§æ‰¿InputStreamçš„ObjectInputStreamã€SequenceInputStreamï¼Œè¿™é‡Œæ¶‰åŠåˆ°ä¸‹é¢ä»‹ç»çš„&lt;strong&gt;è£…é¥°è€…æ¨¡å¼çš„ç®€åŒ–&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œçš„è£…é¥°è€…æ¨¡å¼å¤§å¤šéƒ½æ˜¯åŠé€æ˜çš„ï¼Œå…·ä½“è£…é¥°è€…æä¾›äº†æ¯”æŠ½è±¡æ„ä»¶å¤šçš„æ–¹æ³•ï¼Œå®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨è¿™äº›æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h4 id=&quot;è£…é¥°è€…æ¨¡å¼çš„ç®€åŒ–&quot;&gt;è£…é¥°è€…æ¨¡å¼çš„ç®€åŒ–&lt;/h4&gt;
&lt;p&gt;è£…é¥°è€…æœ‰3ç§ç®€åŒ–æ¨¡å¼ï¼š&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€ç§æƒ…å†µï¼Œåªæœ‰ä¸€ä¸ªå…·ä½“è£…é¥°è€…ï¼Œè¿™æ ·å°±ä¸éœ€è¦æŠ½è±¡è£…é¥°è€…ï¼Œå…·ä½“è£…é¥°è€…ç›´æ¥ç»§æ‰¿æŠ½è±¡æ„ä»¶å°±å¯ä»¥äº†ã€‚&lt;br/&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Mingmingcome/cnblogs/master/images/decorator-class-diagram-simplify1.jpg&quot; alt=&quot;è£…é¥°è€…æ¨¡å¼ç®€åŒ–çš„ç¬¬ä¸€ç§æƒ…å†µ&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒç§æƒ…å†µï¼Œåªæœ‰ä¸€ä¸ªå…·ä½“æ„ä»¶ï¼Œè¿™æ ·å°±ä¸éœ€è¦æŠ½è±¡æ„ä»¶ï¼ŒæŠ½è±¡è£…é¥°è€…å¯ä»¥ç›´æ¥ç»§æ‰¿å…·ä½“æ„ä»¶å°±å¯ä»¥äº†ã€‚&lt;br/&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Mingmingcome/cnblogs/master/images/decorator-class-diagram-simplify2.jpg&quot; alt=&quot;è£…é¥°è€…æ¨¡å¼ç®€åŒ–çš„ç¬¬äºŒç§æƒ…å†µ&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸‰ç§æƒ…å†µï¼Œå°±æ˜¯ä¸Šé¢ç»„åˆèµ·æ¥ï¼šåªæœ‰ä¸€ä¸ªå…·ä½“æ„ä»¶å’Œä¸€ä¸ªå…·ä½“è£…é¥°è€…ï¼Œè¿™æ ·æŠ½è±¡è§’è‰²éƒ½ä¸éœ€è¦äº†ï¼Œå…·ä½“è£…é¥°è€…ç›´æ¥ç»§æ‰¿é›†ä½“æ„ä»¶å°±å¯ä»¥äº†ã€‚&lt;br/&gt;&lt;img src=&quot;https://raw.githubusercontent.com/Mingmingcome/cnblogs/master/images/decorator-class-diagram-simplify3.jpg&quot; alt=&quot;è£…é¥°è€…æ¨¡å¼ç®€åŒ–çš„ç¬¬ä¸‰ç§æƒ…å†µ&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h4&gt;
&lt;p&gt;éœ€è¦åŠ¨æ€ç»™æŸä¸ªå¯¹è±¡æ·»åŠ èŒè´£ï¼Œä½¿ç”¨è£…é¥°è€…æ¨¡å¼ã€‚&lt;/p&gt;
&lt;h4 id=&quot;å®Œ&quot;&gt;å®Œ&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;end 2018å¹´10æœˆ16æ—¥15:24:03&lt;/code&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 16 Oct 2018 07:27:00 +0000</pubDate>
<dc:creator>mingmingcome</dc:creator>
<og:description>`begin 2018å¹´9æœˆ29æ—¥14:19:22` è£…é¥°è€…æ¨¡å¼ï¼ˆDecorator Patternï¼‰ å®šä¹‰ é‡‘ç‰å…¶å¤–ï¼Œè´¥çµ®å…¶ä¸­ã€‚ åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ï¼Œå°±å¢åŠ åŠŸèƒ½æ¥è¯´ï¼Œè£…é¥°è€…æ¨¡å¼æ¯”ç”Ÿæˆ</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/mingmingcome/p/9798248.html</dc:identifier>
</item>
<item>
<title>SpringBootå¿«é€Ÿå…¥é—¨ - Miyaã€‚</title>
<link>http://www.cnblogs.com/SimpleWu/p/9798146.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/SimpleWu/p/9798146.html</guid>
<description>&lt;p class=&quot;toc&quot;&gt;ç›®å½•&lt;/p&gt;

&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;Editorï¼šSimpleWu&lt;/p&gt;
&lt;p&gt;GITï¼ˆæœ‰æœ¬æ–‡ç« æ‰€æœ‰æµ‹è¯•ä»£ç å®ä¾‹ï¼‰ï¼šhttps://gitlab.com/450255266/code&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;springbootç®€ä»‹&quot;&gt;SpringBootç®€ä»‹&lt;/h3&gt;
&lt;p&gt;Spring Bootæ˜¯ç”±Pivotalå›¢é˜Ÿæä¾›çš„å…¨æ–°æ¡†æ¶ï¼Œå…¶è®¾è®¡ç›®çš„æ˜¯ç”¨æ¥ç®€åŒ–æ–°Springåº”ç”¨çš„åˆå§‹æ­å»ºä»¥åŠå¼€å‘è¿‡ç¨‹ã€‚è¯¥æ¡†æ¶ä½¿ç”¨äº†ç‰¹å®šçš„æ–¹å¼æ¥è¿›è¡Œé…ç½®ï¼Œä»è€Œä½¿å¼€å‘äººå‘˜ä¸å†éœ€è¦å®šä¹‰æ ·æ¿åŒ–çš„é…ç½®ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒBootè‡´åŠ›äºåœ¨è“¬å‹ƒå‘å±•çš„å¿«é€Ÿåº”ç”¨å¼€å‘é¢†åŸŸï¼ˆrapid application developmentï¼‰æˆä¸ºé¢†å¯¼è€…ã€‚&lt;/p&gt;
&lt;p&gt;Spring Bootè®©æˆ‘ä»¬çš„Springåº”ç”¨å˜çš„æ›´è½»é‡åŒ–ã€‚æ¯”å¦‚ï¼šä½ å¯ä»¥ä»…ä»…ä¾é ä¸€ä¸ªJavaç±»æ¥è¿è¡Œä¸€ä¸ªSpringå¼•ç”¨ã€‚ä½ ä¹Ÿå¯ä»¥æ‰“åŒ…ä½ çš„åº”ç”¨ä¸ºjarå¹¶é€šè¿‡ä½¿ç”¨java -jaræ¥è¿è¡Œä½ çš„Spring Webåº”ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;Spring Bootçš„ä¸»è¦ä¼˜ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;ä¸ºæ‰€æœ‰Springå¼€å‘è€…æ›´å¿«çš„å…¥é—¨&lt;/li&gt;
&lt;li&gt;å¼€ç®±å³ç”¨ï¼Œæä¾›å„ç§é»˜è®¤é…ç½®æ¥ç®€åŒ–é¡¹ç›®é…ç½®&lt;/li&gt;
&lt;li&gt;å†…åµŒå¼å®¹å™¨ç®€åŒ–Webé¡¹ç›®&lt;/li&gt;
&lt;li&gt;æ²¡æœ‰å†—ä½™ä»£ç ç”Ÿæˆå’ŒXMLé…ç½®çš„è¦æ±‚&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;strong&gt;åœ¨ä¸‹é¢çš„ä»£ç ä¸­åªè¦æœ‰ä¸€å®šåŸºç¡€ä¼šå‘ç°è¿™å†™ä»£ç å®ä¾‹éå¸¸ç®€å•å¯¹äºå¼€å‘è€…æ¥è¯´å‡ ä¹æ˜¯â€œé›¶é…ç½®â€ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;springbootè¿è¡Œ&quot;&gt;SpringBootè¿è¡Œ&lt;/h3&gt;
&lt;p&gt;å¼€å‘å·¥å…·ï¼šjdk8ï¼ŒIDEA,STSï¼Œeclipseï¼ˆéœ€è¦å®‰è£…STSæ’ä»¶ï¼‰è¿™äº›éƒ½æ”¯æŒå¿«é€Ÿå¯åŠ¨SpringBootå·¥ç¨‹ã€‚æˆ‘è¿™é‡Œå°±ä¸å¿«é€Ÿå¯åŠ¨äº†ï¼Œä½¿ç”¨mavenå·¥ç¨‹ã€‚å­¦ä¹ ä»»ä½•ä¸€é¡¹æŠ€æœ¯é¦–å…ˆå°±è¦ç²¾é€šHelloWordï¼Œé‚£æˆ‘ä»¬æ¥è·‘ä¸ªåˆä½“éªŒã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆåªç”¨mavenæˆ‘ä»¬åˆ›å»ºçš„mavenå·¥ç¨‹ç›´æ¥ä»¥jaråŒ…çš„å½¢å¼åˆ›å»ºå°±è¡Œäº†ï¼Œé¦–å…ˆæˆ‘ä»¬æ¥å¼•å…¥SpringBootçš„ä¾èµ–&lt;/p&gt;
&lt;p&gt;é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¾èµ–SpringBootçˆ¶å·¥ç¨‹ï¼Œè¿™æ˜¯æ¯ä¸ªé¡¹ç›®ä¸­å¿…é¡»è¦æœ‰çš„ã€‚&lt;/p&gt;
&lt;pre class=&quot;xml&quot;&gt;
&lt;code&gt;&amp;lt;!--å¼•å…¥SpringBootçˆ¶ä¾èµ–--&amp;gt;
&amp;lt;parent&amp;gt;
        &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;spring-boot-starter-parent&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;2.0.5.RELEASE&amp;lt;/version&amp;gt;
        &amp;lt;relativePath/&amp;gt; 
&amp;lt;/parent&amp;gt;
&amp;lt;!--ç¼–ç ä¸JAVAç‰ˆæœ¬--&amp;gt;
&amp;lt;properties&amp;gt;
        &amp;lt;project.build.sourceEncoding&amp;gt;UTF-8&amp;lt;/project.build.sourceEncoding&amp;gt;
        &amp;lt;project.reporting.outputEncoding&amp;gt;UTF-8&amp;lt;/project.reporting.outputEncoding&amp;gt;
        &amp;lt;java.version&amp;gt;1.8&amp;lt;/java.version&amp;gt;
&amp;lt;/properties&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬å¯åŠ¨WEBæ¨¡å—å½“ç„¶å¿…é¡»è¦å¼•å…¥WEBæ¨¡å—çš„ä¾èµ–&lt;/p&gt;
&lt;pre class=&quot;xml&quot;&gt;
&lt;code&gt;&amp;lt;dependencies&amp;gt;
        &amp;lt;!--å¼•å…¥SpringBoot-WEBæ¨¡å—--&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;spring-boot-starter-web&amp;lt;/artifactId&amp;gt;
        &amp;lt;/dependency&amp;gt;
    &amp;lt;/dependencies&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªSpringBootå¯åŠ¨ç±»ï¼ŒSpringbootFirstExperienceApplication.java&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;@SpringBootApplication
public class SpringbootFirstExperienceApplication {

    public static void main(String[] args) {
        SpringApplication.run(SpringbootFirstExperienceApplication.class, args);
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åˆ°äº†è¿™é‡Œæˆ‘ä»¬ç›´æ¥æŠŠä»–å½“æˆSpringMVCæ¥ä½¿ç”¨å°±è¡Œäº†ï¼Œä¸è¿‡è¿™é‡Œé»˜è®¤æ˜¯ä¸æ”¯æŒJSPå®˜æ–¹æ¨èä½¿ç”¨æ¨¡æ¿å¼•æ“ï¼Œåé¢ä¼šå†™åˆ°æ•´åˆJSPã€‚è¿™é‡Œæˆ‘å°±ä¸å†™Controlleräº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;@SpringBootApplication&lt;/strong&gt;ï¼šä¹‹å‰ç”¨æˆ·ä½¿ç”¨çš„æ˜¯3ä¸ªæ³¨è§£æ³¨è§£ä»–ä»¬çš„mainç±»ã€‚åˆ†åˆ«æ˜¯@Configuration,@EnableAutoConfiguration,@ComponentScanã€‚ç”±äºè¿™äº›æ³¨è§£ä¸€èˆ¬éƒ½æ˜¯ä¸€èµ·ä½¿ç”¨ï¼Œspring bootæä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„æ³¨è§£@SpringBootApplicationã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„äº‹é¡¹ï¼šæˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªæ³¨è§£åœ¨ä¸æŒ‡å®šæ‰«æè·¯å¾„çš„æƒ…å†µä¸‹ï¼ŒSpringBootåªèƒ½æ‰«æåˆ°å’ŒSpringbootFirstExperienceApplicationåŒåŒ…æˆ–å­åŒ…çš„Beanï¼›&lt;/p&gt;
&lt;h3 id=&quot;springbootç›®å½•ç»“æ„&quot;&gt;SpringBootç›®å½•ç»“æ„&lt;/h3&gt;
&lt;p&gt;åœ¨src/main/resourcesä¸­æˆ‘ä»¬å¯ä»¥æœ‰å‡ ä¸ªæ–‡ä»¶å¤¹ï¼š&lt;/p&gt;
&lt;p&gt;templatesï¼šç”¨æ¥å­˜å‚¨æ¨¡æ¿å¼•æ“çš„ï¼ŒThymeleafï¼ŒFreeMarkerï¼ŒVelocityç­‰éƒ½æ˜¯ä¸é”™çš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;p&gt;staticï¼šå­˜å‚¨ä¸€äº›é™æ€èµ„æºï¼Œcss,jsç­‰&lt;/p&gt;
&lt;p&gt;publicï¼šåœ¨é»˜è®¤SpringBootå·¥ç¨‹ä¸­æ˜¯ä¸ç”Ÿæˆè¿™ä¸ªæ–‡ä»¶å¤¹çš„ï¼Œä½†æ˜¯åœ¨è‡ªåŠ¨é…ç½®ä¸­æˆ‘ä»¬å¯ä»¥æœ‰è¿™ä¸ªæ–‡ä»¶å¤¹ç”¨æ¥å­˜æ”¾å…¬å…±çš„èµ„æºï¼ˆhtmlç­‰ï¼‰&lt;/p&gt;
&lt;p&gt;application.properties:è¿™ä¸ªæ–‡ä»¶åå­—æ˜¯å›ºå®šçš„ï¼ŒSpringBootå¯åŠ¨ä¼šé»˜è®¤åŠ è½½è¿™äº›é…ç½®åœ¨è¿™é‡Œé¢å¯ä»¥é…ç½®ç«¯å£å·ï¼Œè®¿é—®è·¯å¾„ï¼Œæ•°æ®åº“è¿æ¥ä¿¡æ¯ç­‰ç­‰ã€‚è¿™ä¸ªæ–‡ä»¶éå¸¸é‡è¦ï¼Œå½“ç„¶å®˜æ–¹ä¸­æ¨å‡ºäº†ä¸€ä¸ªymlæ ¼å¼è¿™æ˜¯éå¸¸å¼ºå¤§çš„æ•°æ®æ ¼å¼ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ•´åˆjdbctemplate&quot;&gt;æ•´åˆJdbcTemplate&lt;/h3&gt;
&lt;p&gt;å¼•å…¥ä¾èµ–ï¼š&lt;/p&gt;
&lt;pre class=&quot;xml&quot;&gt;
&lt;code&gt;    &amp;lt;parent&amp;gt;
        &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;spring-boot-starter-parent&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;1.5.2.RELEASE&amp;lt;/version&amp;gt;
    &amp;lt;/parent&amp;gt;
    &amp;lt;dependencies&amp;gt;
        &amp;lt;!--å¼•å…¥WEBæ¨¡å—--&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;spring-boot-starter-web&amp;lt;/artifactId&amp;gt;
        &amp;lt;/dependency&amp;gt;
         &amp;lt;!--å¼•å…¥JDBCæ¨¡å—--&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;spring-boot-starter-jdbc&amp;lt;/artifactId&amp;gt;
        &amp;lt;/dependency&amp;gt;
         &amp;lt;!--å¼•å…¥æ•°æ®åº“é©±åŠ¨--&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;mysql&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;mysql-connector-java&amp;lt;/artifactId&amp;gt;
        &amp;lt;/dependency&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;spring-boot-starter-test&amp;lt;/artifactId&amp;gt;
            &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;
        &amp;lt;/dependency&amp;gt;
    &amp;lt;/dependencies&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é…ç½®application.propertiesï¼Œè™½ç„¶è¯´æ˜¯â€œé›¶é…ç½®â€ä½†æ˜¯è¿™äº›å¿…è¦çš„è‚¯å®šè¦æŒ‡å®šï¼Œå¦åˆ™å®ƒæ€ä¹ˆçŸ¥é“è¿é‚£ä¸ªæ•°æ®åº“ï¼Ÿ&lt;/p&gt;
&lt;pre class=&quot;properties&quot;&gt;
&lt;code&gt;spring.datasource.url=jdbc:mysql://localhost:3306/mybatis
spring.datasource.username=root
spring.datasource.password=root
spring.datasource.driver-class-name=com.mysql.jdbc.Driver&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½¿ç”¨æ–¹å¼ï¼š&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;@Service
public class EmployeeService {
    @Autowired
    private JdbcTemplate jdbcTemplate;
    
    public boolean saveEmp(String name,String email,String gender){
        String sql = &quot;insert into tal_employee values(null,?,?,?)&quot;;
        int result = jdbcTemplate.update(sql, name,email,gender);
        System.out.println(&quot;result : &quot; + result);
        return result &amp;gt; 0 ? true:false;
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;@RestController
public class EmployeeController {
    
    @Autowired
    private EmployeeService employeeService;
    
    @RequestMapping(&quot;/save&quot;)
    public String insert(String name,String email,String gender){
        boolean result = employeeService.saveEmp(name, email, gender);
        if(result){
            return &quot;success&quot;;
        }
        return &quot;error&quot;;
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬ç›´æ¥è¿”å›ä¸€ä¸ªæ–‡æœ¬æ ¼å¼ã€‚&lt;/p&gt;
&lt;h3 id=&quot;restcontroller&quot;&gt;@RestController&lt;/h3&gt;
&lt;p&gt;åœ¨ä¸Šé¢çš„ä»£ç ä¸­æˆ‘ä»¬ä½¿ç”¨åˆ°è¿™ä¸ªæ³¨è§£ä¿®æ”¹æˆ‘ä»¬çš„Controllerç±»è€Œæ˜¯ä¸ä½¿ç”¨@Controllerè¿™ä¸ªæ³¨è§£ï¼Œå…¶å®ä¸­åŒ…å«äº†@Controllerï¼ŒåŒæ—¶åŒ…å«@ResponseBodyæ—¢ç„¶ä¿®é¥°åœ¨ç±»ä¸Šé¢é‚£ä¹ˆå°±æ˜¯è¡¨ç¤ºè¿™ä¸ªç±»ä¸­æ‰€æœ‰çš„æ–¹æ³•éƒ½æ˜¯@ResponseBodyæ‰€ä»¥åœ¨è¿™é‡Œæˆ‘ä»¬è¿”å›å­—ç¬¦ä¸²åœ¨å‰å°æˆ‘ä»¬ä¼šä»¥æ–‡æœ¬æ ¼å¼å±•ç¤ºï¼Œå¦‚æœæ˜¯å¯¹è±¡é‚£ä¹ˆå®ƒä¼šè‡ªåŠ¨è½¬æ¢æˆjsonæ ¼å¼è¿”å›ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ•´åˆjsp&quot;&gt;æ•´åˆJSP&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;åœ¨åˆ›å»ºæ•´åˆJSPçš„æ—¶å€™æŒ‡å®šè¦é€‰WARï¼Œä¸€å®šè¦é€‰WARã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¼•å…¥ä¾èµ–ï¼š&lt;/p&gt;
&lt;pre class=&quot;xml&quot;&gt;
&lt;code&gt;&amp;lt;parent&amp;gt;
    &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;spring-boot-starter-parent&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;1.5.2.RELEASE&amp;lt;/version&amp;gt;
&amp;lt;/parent&amp;gt;
&amp;lt;dependencies&amp;gt;
    &amp;lt;!-- SpringBoot WEBç»„ä»¶ --&amp;gt;
    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;spring-boot-starter-web&amp;lt;/artifactId&amp;gt;
    &amp;lt;/dependency&amp;gt;
    &amp;lt;!-- æ•´åˆJSPä¾èµ– --&amp;gt;
    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;spring-boot-starter-tomcat&amp;lt;/artifactId&amp;gt;
    &amp;lt;/dependency&amp;gt;
    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;org.apache.tomcat.embed&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;tomcat-embed-jasper&amp;lt;/artifactId&amp;gt;
    &amp;lt;/dependency&amp;gt;
&amp;lt;/dependencies&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç„¶åæˆ‘ä»¬åªéœ€è¦é…ç½®è¯•å›¾è§£æå™¨è·¯å¾„å°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;pre class=&quot;properties&quot;&gt;
&lt;code&gt;#é…ç½®è¯•å›¾è§£æå™¨å‰ç¼€
spring.mvc.view.prefix=/WEB-INF/views/
#é…ç½®è¯•å›¾è§£æå™¨åç¼€
spring.mvc.view.suffix=.jsp&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;æ•´åˆjpa&quot;&gt;æ•´åˆJPA&lt;/h3&gt;
&lt;p&gt;åŒæ ·çš„æ•´åˆJPAæˆ‘ä»¬åªéœ€è¦å¯åŠ¨æˆ‘ä»¬SpringBootå·²ç»é›†æˆå¥½çš„æ¨¡å—å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;æ·»åŠ ä¾èµ–ï¼š&lt;/p&gt;
&lt;pre class=&quot;xml&quot;&gt;
&lt;code&gt;&amp;lt;parent&amp;gt;
        &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;spring-boot-starter-parent&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;1.5.2.RELEASE&amp;lt;/version&amp;gt;
    &amp;lt;/parent&amp;gt;
    &amp;lt;dependencies&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;spring-boot-starter-web&amp;lt;/artifactId&amp;gt;
        &amp;lt;/dependency&amp;gt;
        &amp;lt;!--å¯åŠ¨JPAç»„ä»¶--&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;spring-boot-starter-data-jpa&amp;lt;/artifactId&amp;gt;
        &amp;lt;/dependency&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;spring-boot-starter-test&amp;lt;/artifactId&amp;gt;
            &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;
        &amp;lt;/dependency&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;mysql&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;mysql-connector-java&amp;lt;/artifactId&amp;gt;
        &amp;lt;/dependency&amp;gt;
    &amp;lt;/dependencies&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯åŠ¨JPAç»„ä»¶åç›´æ¥é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯å°±å¯ä»¥ä½¿ç”¨JPAåŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;Application.properties&lt;/p&gt;
&lt;pre class=&quot;properties&quot;&gt;
&lt;code&gt;spring.datasource.url=jdbc:mysql://localhost:3306/mybatis
spring.datasource.username=root
spring.datasource.password=root
spring.datasource.driver-class-name=com.mysql.jdbc.Driver&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å®ä½“ç±»ï¼šEmployee.java&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;@Table(name=&quot;tal_employee&quot;)
@Entity
public class Employee implements Serializable{
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Integer id;
    @Column(name=&quot;last_Name&quot;)
    private String lastName;
    private String email;
    private String gender;
    //get set çœç•¥
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;EmployeeDaoæ¥å£ï¼š&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;public interface EmployeeDao extends JpaRepository&amp;lt;Employee, Integer&amp;gt;{
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;EmployeeController.java:&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;@Controller
public class EmployeeController {
    @Autowired
    private EmployeeDao employeeDao;

    @ResponseBody
    @RequestMapping(&quot;/emps&quot;)
    public List&amp;lt;Employee&amp;gt; getEmployees(){
        List&amp;lt;Employee&amp;gt; employees = employeeDao.findAll();
        System.out.println(employees);
        return employees;
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;æ•´åˆmybatis&quot;&gt;æ•´åˆMyBatis&lt;/h3&gt;
&lt;p&gt;å¼•å…¥ä¾èµ–ï¼š&lt;/p&gt;
&lt;pre class=&quot;xml&quot;&gt;
&lt;code&gt;&amp;lt;parent&amp;gt;
        &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;spring-boot-starter-parent&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;1.5.2.RELEASE&amp;lt;/version&amp;gt;
    &amp;lt;/parent&amp;gt;
    &amp;lt;dependencies&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;spring-boot-starter-web&amp;lt;/artifactId&amp;gt;
        &amp;lt;/dependency&amp;gt;
        &amp;lt;!--å¼•å…¥å¯¹JDBCçš„æ”¯æŒ--&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;spring-boot-starter-jdbc&amp;lt;/artifactId&amp;gt;
        &amp;lt;/dependency&amp;gt;
         &amp;lt;!--å¼•å…¥å¯¹loggingçš„æ”¯æŒ--&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;spring-boot-starter-logging&amp;lt;/artifactId&amp;gt;
        &amp;lt;/dependency&amp;gt;
        &amp;lt;!-- SpringBoot MyBatiså¯åŠ¨å™¨ --&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.mybatis.spring.boot&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;mybatis-spring-boot-starter&amp;lt;/artifactId&amp;gt;
            &amp;lt;version&amp;gt;1.2.2&amp;lt;/version&amp;gt;
        &amp;lt;/dependency&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;spring-boot-starter-test&amp;lt;/artifactId&amp;gt;
            &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;
        &amp;lt;/dependency&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;mysql&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;mysql-connector-java&amp;lt;/artifactId&amp;gt;
        &amp;lt;/dependency&amp;gt;
    &amp;lt;/dependencies&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é…ç½®application.properties&lt;/p&gt;
&lt;pre class=&quot;properties&quot;&gt;
&lt;code&gt;spring.datasource.url=jdbc:mysql://localhost:3306/mybatis
spring.datasource.username=root
spring.datasource.password=root
spring.datasource.driver-class-name=com.mysql.jdbc.Driver
##############datasource classpath æ•°æ®è¿æ¥æ± åœ°å€##############
#spring.datasource.type=com.alibaba.druid.pool.DruidDataSource

#æŒ‡å®šæˆ‘ä»¬çš„mapper.xmlä½ç½®
mybatis.mapper-locations=classpath:com/simple/springboot/mybatis/dao/mapper/*.xml
#entity.class æŒ‡å®šæˆ‘ä»¬å®ä½“ç±»æ‰€åœ¨åŒ…ä½ç½®
mybatis.type-aliases-package=com.simple.springboot.mybatis.entity&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å½“ç„¶è¿™é‡Œè¿˜æœ‰å¾ˆå¤šå±æ€§å¦‚æœæƒ³è¦ä½¿ç”¨å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚åˆ°äº†è¿™é‡Œå…¶ä»–å°±ä¸å†™äº†ï¼ŒæŠŠä»–å½“ä½œSSMä½¿ç”¨å°±okã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„äº‹é¡¹ï¼šåœ¨æˆ‘ä»¬çš„Daoå±‚æ¥å£ä¸­ä¸€å®šè¦åœ¨ç±»ä¸ŠåŠ ä¸Šæ³¨è§£@Mapperå¦åˆ™æ— æ³•æ‰«æåˆ°ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;aopåŠŸèƒ½ä½¿ç”¨&quot;&gt;AOPåŠŸèƒ½ä½¿ç”¨&lt;/h3&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬SpringBootä¸­ä½¿ç”¨AOPéå¸¸ç®€å•ã€‚&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;package com.simple.springboot.aop;

import org.aspectj.lang.ProceedingJoinPoint;
import org.aspectj.lang.annotation.After;
import org.aspectj.lang.annotation.AfterThrowing;
import org.aspectj.lang.annotation.Around;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;
import org.aspectj.lang.annotation.Pointcut;
import org.springframework.stereotype.Component;

@Aspect
@Component
public class SpringBootAspect {
    
    /**
     * å®šä¹‰ä¸€ä¸ªåˆ‡å…¥ç‚¹
     * @author:SimpleWu
     * @Date:2018å¹´10æœˆ12æ—¥
     */
    @Pointcut(value=&quot;execution(* com.simple.springboot.util.*.*(..))&quot;)
    public void aop(){}
    
    /**
     * å®šä¹‰ä¸€ä¸ªå‰ç½®é€šçŸ¥
     * @author:SimpleWu
     * @Date:2018å¹´10æœˆ12æ—¥
     */
    @Before(&quot;aop()&quot;)
    public void aopBefore(){
        System.out.println(&quot;å‰ç½®é€šçŸ¥ SpringBootAspect....aopBefore&quot;);
    }
    
    /**
     * å®šä¹‰ä¸€ä¸ªåç½®é€šçŸ¥
     * @author:SimpleWu
     * @Date:2018å¹´10æœˆ12æ—¥
     */
    @After(&quot;aop()&quot;)
    public void aopAfter(){
        System.out.println(&quot;åç½®é€šçŸ¥  SpringBootAspect....aopAfter&quot;);
    }
    
    /**
     * å¤„ç†æœªå¤„ç†çš„JAVAå¼‚å¸¸
     * @author:SimpleWu
     * @Date:2018å¹´10æœˆ12æ—¥
     */
    @AfterThrowing(pointcut=&quot;aop()&quot;,throwing=&quot;e&quot;)
    public void exception(Exception e){
        System.out.println(&quot;å¼‚å¸¸é€šçŸ¥ SpringBootAspect...exception ..&quot; + e);
    }
    
    /**
     * ç¯ç»•é€šçŸ¥
     * @author:SimpleWu
     * @throws Throwable 
     * @Date:2018å¹´10æœˆ12æ—¥
     */
    @Around(&quot;aop()&quot;)
    public void around(ProceedingJoinPoint invocation) throws Throwable{
        System.out.println(&quot;SpringBootAspect..ç¯ç»•é€šçŸ¥ Before&quot;);
        invocation.proceed();
        System.out.println(&quot;SpringBootAspect..ç¯ç»•é€šçŸ¥ After&quot;);
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;ä»»åŠ¡è°ƒåº¦&quot;&gt;ä»»åŠ¡è°ƒåº¦&lt;/h3&gt;
&lt;p&gt;SpringBootå·²ç»é›†æˆå¥½ä¸€ä¸ªè°ƒåº¦åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;@Component
public class ScheduledTasks {
    private static final SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;HH:mm:ss&quot;);
   
    /**
     * ä»»åŠ¡è°ƒåº¦ï¼Œæ¯éš”5ç§’æ‰§è¡Œä¸€æ¬¡
     * @author:SimpleWu
     * @Date:2018å¹´10æœˆ12æ—¥
     */
    
    @Scheduled(fixedRate = 1000)
    public void reportCurrentTime() {
        System.out.println(&quot;ç°åœ¨æ—¶é—´ï¼š&quot; + dateFormat.format(new Date()));
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç„¶åå¯åŠ¨çš„æ—¶å€™æˆ‘ä»¬å¿…é¡»è¦åœ¨ä¸»å‡½æ•°ç±»ä¸ŠåŠ ä¸Šæ³¨è§£ï¼š@EnableSchedulingï¼ˆç¿»è¯‘è¿‡æ¥å°±æ˜¯å¼€å¯è°ƒåº¦ï¼‰&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;/**
 * SpringBootä½¿ç”¨ä»»åŠ¡è°ƒåº¦
 * @EnableSchedulingæ ‡æ³¨ç¨‹åºå¼€å¯ä»»åŠ¡è°ƒåº¦
 * @author :SimpleWu
 * @Date:2018å¹´10æœˆ12æ—¥
 */

@SpringBootApplication
@EnableScheduling
public class App {
    public static void main(String[] args) {
        SpringApplication.run(App.class, args);
    }
}&lt;/code&gt;
&lt;/pre&gt;</description>
<pubDate>Tue, 16 Oct 2018 07:13:00 +0000</pubDate>
<dc:creator>Miyaã€‚</dc:creator>
<og:description>[TOC] SprinBootå¿«é€Ÿå…¥é—¨ Editorï¼šSimpleWu GITï¼ˆæœ‰æœ¬æ–‡ç« æ‰€æœ‰æµ‹è¯•ä»£ç å®ä¾‹ï¼‰ï¼šhttps://gitlab.com/450255266/code SpringBootç®€ä»‹</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/SimpleWu/p/9798146.html</dc:identifier>
</item>
<item>
<title>ä½¿ç”¨ WRK å‹åŠ›æµ‹è¯•å·¥å…·å¯¹ ASP.NET Core çš„æ¥å£è¿›è¡Œå‹åŠ›æµ‹è¯• - myzony</title>
<link>http://www.cnblogs.com/myzony/p/9798116.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/myzony/p/9798116.html</guid>
<description>&lt;h2 id=&quot;ç®€è¦ä»‹ç»&quot;&gt;0. ç®€è¦ä»‹ç»&lt;/h2&gt;
&lt;p&gt;WRK æ˜¯ä¸€æ¬¾è½»é‡ä¸”æ˜“ç”¨çš„ HTTP å‹åŠ›æµ‹è¯•å·¥å…·ï¼Œé€šè¿‡è¯¥å·¥å…·æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°å¯¹æˆ‘ä»¬æ‰€å¼€å‘çš„ WebAPI é¡¹ç›®è¿›è¡Œå‹åŠ›æµ‹è¯•ï¼Œå¹¶ä¸”é’ˆå¯¹æµ‹è¯•çš„æƒ…å†µè¿”å›ç»“æœã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;5.9823788546256&quot;&gt;
&lt;p&gt;PSï¼šWrk å¹¶ä¸èƒ½é’ˆå¯¹æµ‹è¯•çš„ç»“æœç”ŸæˆåŠ¨æ€çš„å›¾è¡¨ï¼Œå¦‚æœæœ‰è¿™ç§éœ€è¦ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨å¦ä¸€æ¬¾å·¥å…· Vegetaã€‚è¯¥é¡¹ç›®ä½¿ç”¨çš„ Golang è¿›è¡Œç¼–å†™ï¼Œå…¶ GitHub åœ°å€ä¸ºï¼š&lt;a href=&quot;https://github.com/tsenart/vegeta&quot; class=&quot;uri&quot;&gt;https://github.com/tsenart/vegeta&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸‹é¢çš„å†…å®¹å°±æ˜¯ä¸€ä¸ªæ ‡å‡†çš„æµ‹è¯•ç»“æœä¿¡æ¯ï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;# é’ˆå¯¹ 127.0.0.1:8080 è¿›è¡Œå‹åŠ›æµ‹è¯•
wrk -t12 -c400 -d30s http://127.0.0.1:8080/index.html&lt;/code&gt;
&lt;/pre&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;# è¿™é‡Œæ˜¯æµ‹è¯•ç»“æœ
Running 30s test @ http://127.0.0.1:8080/index.html
  12 threads and 400 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   635.91us    0.89ms  12.92ms   93.69%
    Req/Sec    56.20k     8.07k   62.00k    86.54%
  22464657 requests in 30.00s, 17.76GB read
Requests/sec: 748868.53
Transfer/sec:    606.33MB&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;å®‰è£…&quot;&gt;1. å®‰è£…&lt;/h2&gt;
&lt;p&gt;å…³äº OS X ä¸ Windows çš„å®‰è£…å¯ä»¥å‚è€ƒ Wrk å®˜æ–¹ WIKI è¿›è¡Œæ“ä½œï¼Œæœ¬æ–‡ä¸»è¦è®²è§£ä¸€ä¸‹ CentOS 7.x ä¸‹å¦‚æœè¿›è¡Œç¼–è¯‘ã€‚&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;sudo yum groupinstall 'Development Tools'
sudo yum install -y openssl-devel git 
git clone https://github.com/wg/wrk.git wrk
cd wrk
make&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç¼–è¯‘ä¹‹åï¼Œä½ ä¼šå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1203160/201810/1203160-20181016150706537-1674995565.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ç”Ÿæˆäº†ä¸€ä¸ª wrk çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä½ å¯ä»¥å°†å…¶æ·»åŠ åˆ°ç¯å¢ƒå˜é‡çš„ PATH å½“ä¸­ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ï¼Œæˆ‘ä»¬ç­‰ä¼šå„¿ä½¿ç”¨çš„æ—¶å€™ç›´æ¥ ./wrk ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å‘½ä»¤è¯´æ˜&quot;&gt;2. å‘½ä»¤è¯´æ˜&lt;/h2&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;./wrk -H &quot;Authorization: Bearer TokenValue&quot; -t 2 -c 50 -d 10s --latency --timeout 1s &quot;http://&quot;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸Šé¢çš„å‘½ä»¤å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„å‹åŠ›æµ‹è¯•å‘½ä»¤ï¼Œå…³äºå‚æ•°çš„å«ä¹‰è¯·çœ‹ä¸‹è¡¨ã€‚&lt;/p&gt;
&lt;table&gt;&lt;thead/&gt;&lt;tbody readability=&quot;9&quot;&gt;&lt;tr class=&quot;odd&quot; readability=&quot;2&quot;&gt;&lt;td&gt;-c&lt;/td&gt;
&lt;td&gt;ä¸ HTTP ä¿æŒè¿æ¥çš„è¿æ¥æ•°ï¼Œæœ€ç»ˆæ¯ä¸ªçº¿ç¨‹èƒ½å¤Ÿå¤„ç†çš„ä¸º è¿æ¥æ•°/çº¿ç¨‹æ•°ã€‚&lt;/td&gt;
&lt;td&gt;-c 50&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;even&quot; readability=&quot;6&quot;&gt;&lt;td&gt;-d&lt;/td&gt;
&lt;td&gt;æŒ‡å®šå‹åŠ›æµ‹è¯•çš„æ—¶é—´æœ‰å¤šé•¿ã€‚&lt;/td&gt;
&lt;td&gt;-d 10sï¼Œå…¶ä»–å•ä½æœ‰ 2s,2m,2h&lt;br/&gt;å¦‚æœä¸å¸¦å•ä½çš„è¯ï¼Œé»˜è®¤ä¸ºç§’ã€‚&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;odd&quot; readability=&quot;2&quot;&gt;&lt;td&gt;-t&lt;/td&gt;
&lt;td&gt;å‹åŠ›æµ‹è¯•æ—¶æ‰€ä½¿ç”¨çš„çº¿ç¨‹æ•°ç›®ï¼Œæœ€å¥½ä¸ºä½  CPU æ ¸å¿ƒçš„æ•°é‡ã€‚&lt;/td&gt;
&lt;td&gt;-t 4&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;even&quot; readability=&quot;2&quot;&gt;&lt;td&gt;-s&lt;/td&gt;
&lt;td&gt;æŒ‡å®šè¦æ‰§è¡Œçš„ Lua è„šæœ¬&lt;/td&gt;
&lt;td&gt;-s ./post.lua&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;odd&quot; readability=&quot;2&quot;&gt;&lt;td&gt;-H&lt;/td&gt;
&lt;td&gt;æ‰§è¡Œè¯·æ±‚çš„æ—¶å€™æ‰€é™„å¸¦çš„ Header ç»„ã€‚&lt;/td&gt;
&lt;td&gt;-H &quot;User-Agent: wrk&quot;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;even&quot; readability=&quot;2&quot;&gt;&lt;td&gt;--latency&lt;/td&gt;
&lt;td&gt;æ‰“å°è¯¦ç»†çš„ç»Ÿè®¡ä¿¡æ¯ã€‚&lt;/td&gt;
&lt;td&gt;--latency&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;odd&quot; readability=&quot;2&quot;&gt;&lt;td&gt;--timeout&lt;/td&gt;
&lt;td&gt;æ¯æ¬¡è¯·æ±‚æ‰€è¿”å›å“åº”ä½“çš„æ—¶é—´ï¼Œå¦‚æœè¶…è¿‡äº†é…ç½®çš„æ—¶é—´ï¼Œåˆ™è§†ä¸ºè¯·æ±‚è¶…æ—¶ã€‚&lt;/td&gt;
&lt;td&gt;--timeout 1s&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h2 id=&quot;å¼€å§‹å‹åŠ›æµ‹è¯•&quot;&gt;3. å¼€å§‹å‹åŠ›æµ‹è¯•&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1203160/201810/1203160-20181016150718942-1812945510.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œäº†ä¸Šè¿°ä»£ç ä¹‹åæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¾ˆç›´è§‚çš„ä¿¡æ¯ï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯ 20s çš„æ—¶é—´å†…å®Œæˆäº† 2887 æ¬¡è¯·æ±‚ï¼Œä¸€å…±æ¥å—åˆ°äº† 2.46MB çš„æ•°æ®ã€‚åœ¨ Socket errors é‡Œé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰ 35 ä¸ªè¯·æ±‚äº§ç”Ÿäº†è¶…æ—¶çš„æƒ…å†µï¼Œæ¯ç§’æ‰§è¡Œçš„è¯·æ±‚å¤§æ¦‚ä¸º 144.20 ä¸ªï¼Œæ¯ç§’çš„æ•°æ®ä¼ è¾“å¤§æ¦‚ä¸º 125.75 KBã€‚&lt;/p&gt;
&lt;p&gt;é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜è¯´æ˜äº†å¹³å‡æ¯æ¬¡è¯·æ±‚æ‰€æ¶ˆè€—çš„æ—¶é—´ä¸º 338.44 msï¼Œæœ€æç«¯çš„æƒ…å†µä¸º 994.27msã€‚&lt;/p&gt;
&lt;h2 id=&quot;lua-è„šæœ¬&quot;&gt;4. LUA è„šæœ¬&lt;/h2&gt;
&lt;p&gt;åœ¨ç¬¬ä¸‰èŠ‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€äº›æ ‡å‡†çš„ GET è¯·æ±‚æˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡æŒ‡å®šå‘½ä»¤æ¥è¿›è¡Œæµ‹è¯•ï¼Œå³ä¾¿è¯¥æ¥å£æœ‰æˆæƒéªŒè¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ &lt;code&gt;-H&lt;/code&gt; å‚æ•°æ¥æŒ‡å®š &lt;code&gt;Authorization&lt;/code&gt; å¤´æ¥å®ç°æƒé™éªŒè¯ã€‚&lt;br/&gt;ä½†æ˜¯é’ˆå¯¹ä¸€äº›å¤æ‚çš„æƒ…å†µï¼Œæˆ‘ä»¬å°±éœ€è¦ç¼–å†™ LUA è„šæœ¬æ¥å®ç°å‹åŠ›æµ‹è¯•äº†ã€‚&lt;/p&gt;
&lt;p&gt;å®˜æ–¹ç¼–å†™äº†å¾ˆå¤šçš„ LUA è„šæœ¬ DEMO ï¼Œå­˜æ”¾åœ¨ GitHub ä¸Šé¢ï¼Œå…¶åœ°å€ä¸ºï¼š&lt;a href=&quot;https://github.com/wg/wrk/tree/master/scripts&quot; class=&quot;uri&quot;&gt;https://github.com/wg/wrk/tree/master/scripts&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬ä»¥å®ç° POST è¯·æ±‚ä¸ºä¾‹ï¼š&lt;/p&gt;
&lt;pre class=&quot;lua&quot;&gt;
&lt;code&gt;wrk.method = &quot;POST&quot;
wrk.body   = '{&quot;username&quot;:&quot;admin&quot;,&quot;password&quot;:&quot;123qwe&quot;,&quot;rememberClient&quot;:true}'
wrk.headers[&quot;Content-Type&quot;] = &quot;application/json&quot;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬çš„æ¥å£åœ°å€æ›´æ”¹äº†ä¸€ä¸‹ï¼Œæ”¹å˜æˆäº† Login æ¥å£ï¼Œè¯¥æ¥å£éœ€è¦ä¼ å…¥ç”¨æˆ·åä¸å¯†ç ï¼Œå¹¶ä¸”å…¶ Method ä¸º POSTã€‚&lt;/p&gt;
&lt;p&gt;å°†ä¸Šè¿° LUA è„šæœ¬ä¿å­˜ä¸º post.lua æ–‡ä»¶ï¼Œç„¶åé€šè¿‡ &lt;code&gt;-s&lt;/code&gt; å‚æ•°æŒ‡å®š LUA è„šæœ¬çš„è·¯å¾„å¹¶æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1203160/201810/1203160-20181016150730379-1026568237.png&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;lua-è„šæœ¬ç›¸å…³è¯¦è§£&quot;&gt;5. LUA è„šæœ¬ç›¸å…³è¯¦è§£&lt;/h2&gt;
&lt;p&gt;WRK ä¸­æ‰§è¡Œ HTTP è¯·æ±‚çš„æ—¶å€™ï¼Œè°ƒç”¨ Lua åˆ†ä¸º 3 ä¸ªé˜¶æ®µï¼Œ&lt;code&gt;setup&lt;/code&gt;ã€&lt;code&gt;running&lt;/code&gt;ã€&lt;code&gt;done&lt;/code&gt;ï¼Œæ¯ä¸ª WRK çº¿ç¨‹ä¸­éƒ½æœ‰ç‹¬ç«‹çš„è„šæœ¬ç¯å¢ƒã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1203160/201810/1203160-20181016150757512-240103441.png&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;wrk-çš„å…¨å±€å±æ€§&quot;&gt;5.1 WRK çš„å…¨å±€å±æ€§&lt;/h3&gt;
&lt;pre class=&quot;lua&quot;&gt;
&lt;code&gt;wrk = {
  scheme  = &quot;http&quot;,
  host    = &quot;localhost&quot;,
  port    = nil,
  method  = &quot;GET&quot;,
  path    = &quot;/&quot;,
  headers = {},
  body    = nil,
  thread  = &amp;lt;userdata&amp;gt;,
}&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;wrk-çš„å…¨å±€æ–¹æ³•&quot;&gt;5.2 WRK çš„å…¨å±€æ–¹æ³•&lt;/h3&gt;
&lt;pre class=&quot;lua&quot;&gt;
&lt;code&gt;-- ç”Ÿæˆæ•´ä¸ªrequestçš„stringï¼Œä¾‹å¦‚ï¼šè¿”å›
-- GET / HTTP/1.1
-- Host: tool.lu
function wrk.format(method, path, headers, body)

-- è·å–åŸŸåçš„IPå’Œç«¯å£ï¼Œè¿”å›tableï¼Œä¾‹å¦‚ï¼šè¿”å› `{127.0.0.1:80}`
function wrk.lookup(host, service)

-- åˆ¤æ–­addræ˜¯å¦èƒ½è¿æ¥ï¼Œä¾‹å¦‚ï¼š`127.0.0.1:80`ï¼Œè¿”å› true æˆ– false
function wrk.connect(addr)&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;setup-é˜¶æ®µ&quot;&gt;5.3 Setup é˜¶æ®µ&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;setup()&lt;/code&gt; æ–¹æ³•æ˜¯åœ¨çº¿ç¨‹åˆ›å»ºä¹‹åï¼Œå¯åŠ¨ä¹‹å‰ã€‚&lt;/p&gt;
&lt;pre class=&quot;lua&quot;&gt;
&lt;code&gt;function setup(thread)

-- threadæä¾›äº†1ä¸ªå±æ€§ï¼Œ3ä¸ªæ–¹æ³•
-- thread.addr è®¾ç½®è¯·æ±‚éœ€è¦æ‰“åˆ°çš„ip
-- thread:get(name) è·å–çº¿ç¨‹å…¨å±€å˜é‡
-- thread:set(name, value) è®¾ç½®çº¿ç¨‹å…¨å±€å˜é‡
-- thread:stop() ç»ˆæ­¢çº¿ç¨‹&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;running-é˜¶æ®µ&quot;&gt;5.4 Running é˜¶æ®µ&lt;/h3&gt;
&lt;pre class=&quot;lua&quot;&gt;
&lt;code&gt;function init(args)
-- æ¯ä¸ªçº¿ç¨‹ä»…è°ƒç”¨1æ¬¡ï¼Œargs ç”¨äºè·å–å‘½ä»¤è¡Œä¸­ä¼ å…¥çš„å‚æ•°, ä¾‹å¦‚ --env=pre

function delay()
-- æ¯ä¸ªçº¿ç¨‹è°ƒç”¨å¤šæ¬¡ï¼Œå‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚ä¹‹å‰çš„å»¶è¿Ÿ, å•ä½ä¸ºms

function request()
-- æ¯ä¸ªçº¿ç¨‹è°ƒç”¨å¤šæ¬¡ï¼Œè¿”å›httpè¯·æ±‚

function response(status, headers, body)
-- æ¯ä¸ªçº¿ç¨‹è°ƒç”¨å¤šæ¬¡ï¼Œè¿”å›httpå“åº”&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;done-é˜¶æ®µ&quot;&gt;5.5 Done é˜¶æ®µ&lt;/h3&gt;
&lt;p&gt;å¯ä»¥ç”¨äºè‡ªå®šä¹‰ç»“æœæŠ¥è¡¨ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸­åªæ‰§è¡Œä¸€æ¬¡ã€‚&lt;/p&gt;
&lt;pre class=&quot;lua&quot;&gt;
&lt;code&gt;function done(summary, latency, requests)


latency.min              -- minimum value seen
latency.max              -- maximum value seen
latency.mean             -- average value seen
latency.stdev            -- standard deviation
latency:percentile(99.0) -- 99th percentile value
latency(i)               -- raw value and count

summary = {
  duration = N,  -- run duration in microseconds
  requests = N,  -- total completed requests
  bytes    = N,  -- total bytes received
  errors   = {
    connect = N, -- total socket connection errors
    read    = N, -- total socket read errors
    write   = N, -- total socket write errors
    status  = N, -- total HTTP status codes &amp;gt; 399
    timeout = N  -- total request timeouts
  }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è€Œå®˜æ–¹çš„ &lt;a href=&quot;https://github.com/wg/wrk/blob/master/scripts/setup.lua&quot;&gt;setup.lua&lt;/a&gt; è„šæœ¬åˆ™æ˜¯é‡è½½è¿™äº›æ–¹æ³•å¹¶ä½¿ç”¨çš„ä¸€ä¸ª DEMOï¼š&lt;/p&gt;
&lt;pre class=&quot;lua&quot;&gt;
&lt;code&gt;-- example script that demonstrates use of setup() to pass
-- data to and from the threads

local counter = 1
local threads = {}

function setup(thread)
   thread:set(&quot;id&quot;, counter)
   table.insert(threads, thread)
   counter = counter + 1
end

function init(args)
   requests  = 0
   responses = 0

   local msg = &quot;thread %d created&quot;
   print(msg:format(id))
end

function request()
   requests = requests + 1
   return wrk.request()
end

function response(status, headers, body)
   responses = responses + 1
end

function done(summary, latency, requests)
   for index, thread in ipairs(threads) do
      local id        = thread:get(&quot;id&quot;)
      local requests  = thread:get(&quot;requests&quot;)
      local responses = thread:get(&quot;responses&quot;)
      local msg = &quot;thread %d made %d requests and got %d responses&quot;
      print(msg:format(id, requests, responses))
   end
end&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;å‚è€ƒèµ„æ–™&quot;&gt;6. å‚è€ƒèµ„æ–™&lt;/h2&gt;
&lt;p&gt;wrkä¸­çš„luaè„šæœ¬ï¼š&lt;a href=&quot;https://type.so/linux/lua-script-in-wrk.html&quot; class=&quot;uri&quot;&gt;https://type.so/linux/lua-script-in-wrk.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;http æ€§èƒ½æµ‹è¯• wrkä½¿ç”¨æ•™ç¨‹ï¼š&lt;a href=&quot;https://juejin.im/post/5a59e74f5188257353008fea&quot; class=&quot;uri&quot;&gt;https://juejin.im/post/5a59e74f5188257353008fea&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 16 Oct 2018 07:10:00 +0000</pubDate>
<dc:creator>myzony</dc:creator>
<og:description>0. ç®€è¦ä»‹ç» WRK æ˜¯ä¸€æ¬¾è½»é‡ä¸”æ˜“ç”¨çš„ HTTP å‹åŠ›æµ‹è¯•å·¥å…·ï¼Œé€šè¿‡è¯¥å·¥å…·æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°å¯¹æˆ‘ä»¬æ‰€å¼€å‘çš„ WebAPI é¡¹ç›®è¿›è¡Œå‹åŠ›æµ‹è¯•ï¼Œå¹¶ä¸”é’ˆå¯¹æµ‹è¯•çš„æƒ…å†µè¿”å›ç»“æœã€‚ PSï¼šWrk å¹¶ä¸èƒ½é’ˆå¯¹æµ‹è¯•çš„</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/myzony/p/9798116.html</dc:identifier>
</item>
<item>
<title>é˜¿é‡Œè¯•ç”¨ï¼Œå¥³æœ‹å‹é€¼ç€æˆ‘ç»™å¥¹æ’åº - zweizhao</title>
<link>http://www.cnblogs.com/ZweiZhao/p/9798008.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/ZweiZhao/p/9798008.html</guid>
<description>&lt;h2 id=&quot;å‰æ™¯æè¦&quot;&gt;å‰æ™¯æè¦&lt;/h2&gt;
&lt;p&gt;è¯´æ¥ç®€ç›´ä¸¢å°½äº†é’¢é“ç›´ç”·çš„è„¸ï¼Œæ²¡é”™ï¼Œæ˜¨æ™šæˆ‘åœ¨æ„‰å¿«çš„åšç€å¤–åŒ…çš„æ´»ï¼ˆä¸­å›½ç§»åŠ¨çš„å°ç¨‹åºï¼Œè‡ªç”±èŒä¸šï¼Œå–‚ï¼‰ï¼Œ11ç‚¹å¤šäº†ï¼Œå¥³å‹çªç„¶è„‘å­ä¸€æŠ½ï¼šâ€œä½ èƒ½ä¸èƒ½å¸®æˆ‘æŠŠè¿™ä¸ªç©æ„æ’åºä¸€ä¸‹ç»™æˆ‘ç”¨å•Šï¼Œæˆ‘å¥½è–…ç‚¹ç¾Šæ¯›ï¼ŒæŠ€æœ¯èƒ½å®ç°å˜›ï¼Ÿâ€&lt;br/&gt;æˆ‘æ¯”è¾ƒæ— å¥ˆçš„çœ‹äº†çœ‹ï¼Œé˜¿é‡Œè¯•ç”¨å’©ï¼Ÿä»€ä¹ˆé¬¼ï¼Œå“¦å“¦å“¦ï¼Œå°±è¿™ç©æ„å•Šï¼Œçˆ¬è™«çˆ¬ä¸€ä¸‹å°±æ˜¯äº†ã€‚æˆ‘æ˜¯å‰ç«¯â€¦â€¦&lt;br/&gt;å›é“ï¼šâ€œæ²¡é—®é¢˜å•Šï¼Œçˆ¬è™«å‘—ã€‚â€&lt;br/&gt;å¥¹ï¼šâ€œå“‡ï¼Œå¤šä¹…èƒ½åšå‡ºæ¥å•Šï¼Ÿâ€&lt;br/&gt;æˆ‘ï¼šâ€œæˆ‘ç°åœ¨åœ¨å¿™è¯¶ï¼Œ1-2å°æ—¶å§ã€‚â€&lt;br/&gt;å¥¹ï¼šâ€œè¡Œäº†ï¼Œä½ åˆ«å¿™äº†ï¼Œèµ¶ç´§å¸®æˆ‘å¼„ä¸€ä¸‹å‡ºæ¥ï¼â€&lt;br/&gt;æˆ‘çœ‹äº†çœ‹å¥¹çš„è„¸ï¼Œç¾è€»çš„æœ€å°åŒ–ã€Šå¾®ä¿¡å¼€å‘è€…å·¥å…·ã€‹ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;h2 id=&quot;é¡µé¢å±•ç¤º&quot;&gt;é¡µé¢å±•ç¤º&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/794080/201810/794080-20181016140944737-145296225.png&quot; alt=&quot;é˜¿é‡Œè¯•ç”¨&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä½ è¦æ˜¯è§‰å¾—è¿™ä¹Ÿæ˜¯å¹¿å‘Šï¼Œé‚£çœŸæ˜¯å¤ªæŠ¬ä¸¾æˆ‘äº†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;çˆ¬è™«æèµ·æ¥&quot;&gt;çˆ¬è™«æèµ·æ¥&lt;/h2&gt;
&lt;p&gt;NodeJS çˆ¬è™«ï¼Œç™¾åº¦ä¸€ä¸‹ï¼Œåˆ°å¤„éƒ½æ˜¯ç°æˆçš„ä»£ç ï¼Œæˆ‘ä¹Ÿå°±ä¸ä¸€ä¸€åˆ†æäº†ï¼Œæ‹¿å‡ºç®€ä¹¦çš„ä¸€æ®µä»£ç ï¼Œæ¥è‡ª åŸƒç±³è‰Emilyï¼š&lt;/p&gt;
&lt;pre class=&quot;js&quot;&gt;
&lt;code&gt;const express = require('express');
// è°ƒç”¨ express å®ä¾‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸å¸¦å‚æ•°è°ƒç”¨æ—¶ï¼Œä¼šè¿”å›ä¸€ä¸ª express å®ä¾‹ï¼Œå°†è¿™ä¸ªå˜é‡èµ‹äºˆ app å˜é‡ã€‚
const superagent = require('superagent');
const cheerio = require('cheerio');
const app = express();

app.get('/', (req, res, next) =&amp;gt; {
  console.log(req)
  superagent.get('https://www.v2ex.com/')
    .end((err, sres) =&amp;gt; {
      // å¸¸è§„çš„é”™è¯¯å¤„ç†
      if (err) {
        return next(err);
      }
      // sres.text é‡Œé¢å­˜å‚¨ç€ç½‘é¡µçš„ html å†…å®¹ï¼Œå°†å®ƒä¼ ç»™ cheerio.load ä¹‹å
      // å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªå®ç°äº† jquery æ¥å£çš„å˜é‡ï¼Œæˆ‘ä»¬ä¹ æƒ¯æ€§åœ°å°†å®ƒå‘½åä¸º `$`
      // å‰©ä¸‹å°±éƒ½æ˜¯ jquery çš„å†…å®¹äº†
      let $ = cheerio.load(sres.text);
      let items = [];
      $('.item_title a').each((idx, element) =&amp;gt; {
        let $element = $(element);
        items.push({
          title: $element.text(),
          href: $element.attr('href')
        });
      });

      res.send(items);
    });
});

app.listen(3000, function () {
  console.log('app is listening at port 3000');
});&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å˜›ï¼Œexpress ç”¨ NodeJS çš„ä¸å¯èƒ½ä¸çŸ¥é“ï¼Œsuperagent ç†è§£æˆå¯ä»¥åœ¨ Node é‡Œé¢åšå¯¹å¤–è¯·æ±‚å³å¯ï¼Œcheerio å—¯ï¼ŒNode ä¸“ç”¨ JQã€‚&lt;/p&gt;
&lt;h2 id=&quot;é¦–çˆ¬&quot;&gt;é¦–çˆ¬&lt;/h2&gt;
&lt;p&gt;æŠŠä¸Šé¢çš„è¯·æ±‚åœ°å€æ¢æˆï¼š&lt;code&gt;https://try.taobao.com/&lt;/code&gt;ï¼ŒæŸ¥çœ‹é¡µé¢æ ‡ç­¾ç»“æ„ï¼Œæ‰¾åˆ°æƒ³è¦çš„é€‰æ‹©å™¨ç»“æ„ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/794080/201810/794080-20181016141514060-1365446772.png&quot; alt=&quot;æ ‡ç­¾ç»“æ„&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;.tb-try-wd-item-info &amp;gt; .detail&lt;/code&gt;ï¼ŒæŠŠè¿™ä¸ªæ›¿æ¢ä¸Šé¢é€‰æ‹©å™¨ &lt;code&gt;.item_title a&lt;/code&gt;ï¼Œèµ°èµ·ï¼š&lt;/p&gt;
&lt;p&gt;â€¦â€¦æˆ‘ä¸æƒ³å±•ç¤ºç»“æœï¼Œå› ä¸ºåªæœ‰å…­ä¸ªï¼Œé¡µé¢å®é™…å±•ç¤ºæ˜¯ 10 ä¸ªï¼Œæ‰¾äº†åŠå¤©ï¼Œå‘ç°ä¸¤ä¸ªé—®é¢˜ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/794080/201810/794080-20181016141653548-1291693698.png&quot; alt=&quot;æ¨è&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/794080/201810/794080-20181016141701958-2121909945.png&quot; alt=&quot;POST è¯·æ±‚æ¥çš„æ•°æ®&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¦‚ä¸Šï¼Œç¬¬ä¸€ä¸ªæ˜¯çˆ¬åˆ°çš„ 6 ä¸ªæ˜¯æ¨èï¼Œå–µçš„ï¼Œä¸æ˜¯ä¸‹é¢åˆ—è¡¨ï¼›&lt;br/&gt;ç¬¬äºŒä¸ªï¼Œä¸‹é¢åˆ—è¡¨æ˜¯åé¢é€šè¿‡ POST å•ç‹¬è¯·æ±‚æ¥çš„æ•°æ®ï¼Œæ€ä¹ˆçœ‹éƒ½æ˜¯æŸæ¡†æ¶çš„ SSR å¹²çš„å¥½äº‹ã€‚&lt;/p&gt;
&lt;p&gt;äºæ˜¯çˆ¬è™«ä¸æˆï¼Œå¾—æ¢æˆ˜ç•¥ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ¨¡æ‹Ÿ-post&quot;&gt;æ¨¡æ‹Ÿ POST&lt;/h2&gt;
&lt;p&gt;OKï¼Œæ—¢ç„¶æ˜¯ POSTï¼Œå°±å¥½å¼„äº†ï¼Œç›´æ¥æŠŠè¿æ¥è·Ÿå‚æ•°åˆ¨å‡ºæ¥ï¼Œç„¶å superagent æ¨¡æ‹Ÿï¼š&lt;/p&gt;
&lt;pre class=&quot;js&quot;&gt;
&lt;code&gt;superagent
  .post(
    `https://try.taobao.com/api3/call?what=show&amp;amp;page=${paylaod.page}&amp;amp;pageSize&amp;amp;api=x%2Fsearch`
  )
  .set('content-type', 'application/x-www-form-urlencoded; charset=UTF-8')
  .end((err, sres) =&amp;gt; {
    // å¸¸è§„çš„é”™è¯¯å¤„ç†
    if (err) {
      return next(err)
    }
    const result = JSON.parse(sres.text).result // è¿”å›ç»“æ„æ ‘
    resolve(result)
  })   &lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;content-type æºè‡ªï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/794080/201810/794080-20181016142140872-388668027.png&quot; alt=&quot;contetnType&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å“¼å“¼å“¼ï¼Œä½ æ²¡çŒœé”™ï¼Œå¤±è´¥äº†ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/794080/201810/794080-20181016142926715-1013698862.png&quot; alt=&quot;å¤±è´¥é¡µé¢&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æƒ³æƒ³æ˜¯å¿…ç„¶çš„ï¼Œæ€ä¹ˆå¯èƒ½ç»™ä½ éšä¾¿è¯·æ±‚å‘¢ï¼Œç„¶åè¯¥æ€ä¹ˆåšï¼Ÿç ”ç©¶ï¼Ÿnononoï¼Œè€å¤«ä¸Šæ¥å°±æ˜¯ä¸€æ¢­å­ï¼Œä¸å°±æ˜¯ Content-Type ä¹ˆï¼&lt;/p&gt;
&lt;pre class=&quot;js&quot;&gt;
&lt;code&gt;superagent
  .post(
    `https://try.taobao.com/api3/call?what=show&amp;amp;page=${paylaod.page}&amp;amp;pageSize&amp;amp;api=x%2Fsearch`
  )
  .set(
    'user-agent',
    'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36'
  )
  .set('accept', 'pplication/json, text/javascript, */*; q=0.01')
  .set('accept-encoding', 'gzip, deflate, br')
  .set(
    'accept-language',
    'zh-CN,zh;q=0.9,en;q=0.8,la;q=0.7,zh-TW;q=0.6,da;q=0.5'
  )
  // .set('content-length', '8')
  .set('content-type', 'application/x-www-form-urlencoded; charset=UTF-8')
  .set(
    'cookie',
    'your cookie'
  )
  .set('origin', 'https://try.taobao.com')
  .set('referer', 'https://try.taobao.com')
  .set('x-csrf-token', 'f0b8e7443eb7e')
  .set('x-requested-with', 'XMLHttpRequest')
  .end((err, sres) =&amp;gt; {
    // å¸¸è§„çš„é”™è¯¯å¤„ç†
    if (err) {
      return next(err)
    }
    const result = JSON.parse(sres.text).result
    resolve(result)
  })&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¾æ®å°±æ˜¯ä¸‹é¢è¿™ä¸ªï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/794080/201810/794080-20181016143200714-729772976.png&quot; alt=&quot;content-type2&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¸å°±æ˜¯å¤´ä¹ˆï¼Œä¸å°±æ˜¯æºä¹ˆï¼Œä¸å°±æ˜¯ç”¨æˆ·ä»£ç†ä¹ˆï¼Œç”¨ä¸ª HTTPS è¿˜æ²¡æœ‰ä½ åŠæ³•äº†ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æ³¨æ„ä¸Šé¢ &lt;code&gt;.set('content-length', '8')&lt;/code&gt;ï¼Œä¸çŸ¥é“é‚£è¾¹æ€ä¹ˆç©ï¼ŒåŠ ä¸Šè¿™ä¸ªå°±è¶…æ—¶â€¦â€¦&lt;/p&gt;
&lt;p&gt;äºæ˜¯ï¼Œäº¤ä»£äº†å§ï¼š&lt;/p&gt;
&lt;pre class=&quot;json&quot;&gt;
&lt;code&gt;{
    &quot;pages&quot;: {
        &quot;paging&quot;: {
            &quot;n&quot;: 2182,
            &quot;page&quot;: 1,
            &quot;pages&quot;: 219
        },
        &quot;items&quot;: [
            {
                &quot;shopUserId&quot;: &quot;2450112357&quot;,
                &quot;title&quot;: &quot;å‡¯åº¦é«˜ç«¯æ¬¾åµŒå…¥å¼è’¸çƒ¤ç®±&quot;,
                &quot;status&quot;: 1,
                &quot;totalNum&quot;: 1,
                &quot;requestNum&quot;: 15530,
                &quot;acceptNum&quot;: 0,
                &quot;reportNum&quot;: 0,
                &quot;isApplied&quot;: false,
                &quot;shopName&quot;: &quot;casdonå‡¯åº¦æ——èˆ°åº—&quot;,
                &quot;showId&quot;: &quot;2561626&quot;,
                &quot;startTime&quot;: 1539619200000,
                &quot;endTime&quot;: 1540220400000,
                &quot;id&quot;: &quot;34530215&quot;,
                &quot;type&quot;: 1,
                &quot;pic&quot;: &quot;//img.alicdn.com/bao/uploaded/TB1ycS2eMDqK1RjSZSyXXaxEVXa.jpg&quot;,
                &quot;shopItemId&quot;: &quot;559771706359&quot;,
                &quot;price&quot;: 13850
            },
            {
                &quot;shopUserId&quot;: &quot;3189770892&quot;,
                &quot;title&quot;: &quot;çš‡å®¶ç¾ç´ ä½³å„¿è€åŒ…è£…2æ®µ400g&quot;,
                &quot;status&quot;: 1,
                &quot;totalNum&quot;: 50,
                &quot;requestNum&quot;: 2079,
                &quot;acceptNum&quot;: 0,
                &quot;reportNum&quot;: 0,
                &quot;isApplied&quot;: false,
                &quot;shopName&quot;: &quot;çš‡å®¶ç¾ç´ ä½³å„¿æ——èˆ°åº—&quot;,
                &quot;showId&quot;: &quot;2551240&quot;,
                &quot;startTime&quot;: 1539619200000,
                &quot;endTime&quot;: 1540220400000,
                &quot;id&quot;: &quot;34396042&quot;,
                &quot;type&quot;: 1,
                &quot;pic&quot;: &quot;//img.alicdn.com/bao/uploaded/TB1YrSZaVYqK1RjSZLeXXbXppXa.jpg&quot;,
                &quot;shopItemId&quot;: &quot;547114874458&quot;,
                &quot;price&quot;: 189
            },
            {
                &quot;shopUserId&quot;: &quot;1077716829&quot;,
                &quot;title&quot;: &quot;å…³æ³¨åº—é“ºä¼˜å…ˆå®¡æ°´å¯†ç å¹»å½©éš”ç¦»&quot;,
                &quot;status&quot;: 1,
                &quot;totalNum&quot;: 10,
                &quot;requestNum&quot;: 6907,
                &quot;acceptNum&quot;: 0,
                &quot;reportNum&quot;: 0,
                &quot;isApplied&quot;: false,
                &quot;shopName&quot;: &quot;æ°´å¯†ç æ——èˆ°åº—&quot;,
                &quot;showId&quot;: &quot;2568391&quot;,
                &quot;startTime&quot;: 1539619200000,
                &quot;endTime&quot;: 1540220400000,
                &quot;id&quot;: &quot;34784086&quot;,
                &quot;type&quot;: 1,
                &quot;pic&quot;: &quot;//img.alicdn.com/bao/uploaded/TB16_4ChmzqK1RjSZPxXXc4tVXa.jpg&quot;,
                &quot;shopItemId&quot;: &quot;559005882880&quot;,
                &quot;price&quot;: 599
            },
            {
                &quot;shopUserId&quot;: &quot;725786863&quot;,
                &quot;title&quot;: &quot;ç²¾å“çš®è‰æ´¾å…‹å¤§è¡£&quot;,
                &quot;status&quot;: 1,
                &quot;totalNum&quot;: 1,
                &quot;requestNum&quot;: 11793,
                &quot;acceptNum&quot;: 0,
                &quot;reportNum&quot;: 0,
                &quot;isApplied&quot;: false,
                &quot;shopName&quot;: &quot;ç¾ç‘è““ç‰¹&quot;,
                &quot;showId&quot;: &quot;2557886&quot;,
                &quot;startTime&quot;: 1539619200000,
                &quot;endTime&quot;: 1540220400000,
                &quot;id&quot;: &quot;34574078&quot;,
                &quot;type&quot;: 1,
                &quot;pic&quot;: &quot;//img.alicdn.com/bao/uploaded/TB1zVLMdCrqK1RjSZK9XXXyypXa.jpg&quot;,
                &quot;shopItemId&quot;: &quot;577418950477&quot;,
                &quot;price&quot;: 5980
            },
            {
                &quot;shopUserId&quot;: &quot;3000840351&quot;,
                &quot;title&quot;: &quot;ä¿å‹æ™ºèƒ½æ–°å“Pofitç”µè„‘æ¤…&quot;,
                &quot;status&quot;: 1,
                &quot;totalNum&quot;: 1,
                &quot;requestNum&quot;: 12895,
                &quot;acceptNum&quot;: 0,
                &quot;reportNum&quot;: 0,
                &quot;isApplied&quot;: false,
                &quot;shopName&quot;: &quot;ä¿å‹åŠå…¬å®¶å…·æ——èˆ°åº—&quot;,
                &quot;showId&quot;: &quot;2557100&quot;,
                &quot;startTime&quot;: 1539619200000,
                &quot;endTime&quot;: 1540220400000,
                &quot;id&quot;: &quot;34528042&quot;,
                &quot;type&quot;: 1,
                &quot;pic&quot;: &quot;//img.alicdn.com/bao/uploaded/TB1bYZEg6TpK1RjSZKPXXa3UpXa.png&quot;,
                &quot;shopItemId&quot;: &quot;577598687971&quot;,
                &quot;price&quot;: 5408
            },
            {
                &quot;shopUserId&quot;: &quot;791732485&quot;,
                &quot;title&quot;: &quot;TEKæ‰‹æŒå¸å°˜å™¨A8&quot;,
                &quot;status&quot;: 1,
                &quot;totalNum&quot;: 1,
                &quot;requestNum&quot;: 17195,
                &quot;acceptNum&quot;: 0,
                &quot;reportNum&quot;: 0,
                &quot;isApplied&quot;: false,
                &quot;shopName&quot;: &quot;æ³°æ€¡å‡¯æ——èˆ°åº—&quot;,
                &quot;showId&quot;: &quot;2552265&quot;,
                &quot;startTime&quot;: 1539619200000,
                &quot;endTime&quot;: 1540220400000,
                &quot;id&quot;: &quot;34444014&quot;,
                &quot;type&quot;: 1,
                &quot;pic&quot;: &quot;//img.alicdn.com/bao/uploaded/TB1D6bWbhTpK1RjSZFGXXcHqFXa.jpg&quot;,
                &quot;shopItemId&quot;: &quot;547653053965&quot;,
                &quot;price&quot;: 5199
            },
            {
                &quot;shopUserId&quot;: &quot;3229583972&quot;,
                &quot;title&quot;: &quot;æ¤°å¯Œæµ·å—å†·ç‚¸æ¤°å­æ²¹é£Ÿç”¨æ²¹1L&quot;,
                &quot;status&quot;: 1,
                &quot;totalNum&quot;: 20,
                &quot;requestNum&quot;: 4451,
                &quot;acceptNum&quot;: 0,
                &quot;reportNum&quot;: 0,
                &quot;isApplied&quot;: false,
                &quot;shopName&quot;: &quot;æ¤°å¯Œé£Ÿå“ä¸“è¥åº—&quot;,
                &quot;showId&quot;: &quot;2561698&quot;,
                &quot;startTime&quot;: 1539619200000,
                &quot;endTime&quot;: 1540220400000,
                &quot;id&quot;: &quot;34532250&quot;,
                &quot;type&quot;: 1,
                &quot;pic&quot;: &quot;//img.alicdn.com/bao/uploaded/TB1VjLSePDpK1RjSZFrXXa78VXa.jpg&quot;,
                &quot;shopItemId&quot;: &quot;578653506446&quot;,
                &quot;price&quot;: 256
            },
            {
                &quot;shopUserId&quot;: &quot;855223948&quot;,
                &quot;title&quot;: &quot;å¡è¥¿æ¬§ç«‹å¼å®¶ç”¨ç”µé’¢ç´PX770&quot;,
                &quot;status&quot;: 1,
                &quot;totalNum&quot;: 1,
                &quot;requestNum&quot;: 16762,
                &quot;acceptNum&quot;: 0,
                &quot;reportNum&quot;: 0,
                &quot;isApplied&quot;: false,
                &quot;shopName&quot;: &quot;ä¸–çºªéŸ³ç¼˜ä¹å™¨ä¸“è¥åº—&quot;,
                &quot;showId&quot;: &quot;2551326&quot;,
                &quot;startTime&quot;: 1539619200000,
                &quot;endTime&quot;: 1540220400000,
                &quot;id&quot;: &quot;34420041&quot;,
                &quot;type&quot;: 1,
                &quot;pic&quot;: &quot;//img.alicdn.com/bao/uploaded/TB1CC6aa9zqK1RjSZFpXXakSXXa.jpg&quot;,
                &quot;shopItemId&quot;: &quot;562405126383&quot;,
                &quot;price&quot;: 4838
            },
            {
                &quot;shopUserId&quot;: &quot;4065939832&quot;,
                &quot;title&quot;: &quot;å…³æ³¨å®è´é€è½»å¥¢æ²™å‘åºŠ&quot;,
                &quot;status&quot;: 1,
                &quot;totalNum&quot;: 1,
                &quot;requestNum&quot;: 17436,
                &quot;acceptNum&quot;: 0,
                &quot;reportNum&quot;: 0,
                &quot;isApplied&quot;: false,
                &quot;shopName&quot;: &quot;è´å…®æ——èˆ°åº—&quot;,
                &quot;showId&quot;: &quot;2559904&quot;,
                &quot;startTime&quot;: 1539619200000,
                &quot;endTime&quot;: 1540220400000,
                &quot;id&quot;: &quot;34532170&quot;,
                &quot;type&quot;: 1,
                &quot;pic&quot;: &quot;//img.alicdn.com/bao/uploaded/TB1AzxYegHqK1RjSZFPXXcwapXa.jpg&quot;,
                &quot;shopItemId&quot;: &quot;577798067313&quot;,
                &quot;price&quot;: 4399
            },
            {
                &quot;shopUserId&quot;: &quot;807974445&quot;,
                &quot;title&quot;: &quot;æ£®æµ·å¡å°”CX6è“ç‰™è€³æœº&quot;,
                &quot;status&quot;: 1,
                &quot;totalNum&quot;: 4,
                &quot;requestNum&quot;: 22557,
                &quot;acceptNum&quot;: 0,
                &quot;reportNum&quot;: 0,
                &quot;isApplied&quot;: false,
                &quot;shopName&quot;: &quot;sennheiseræ——èˆ°åº—&quot;,
                &quot;showId&quot;: &quot;2559701&quot;,
                &quot;startTime&quot;: 1539619200000,
                &quot;endTime&quot;: 1540220400000,
                &quot;id&quot;: &quot;34532161&quot;,
                &quot;type&quot;: 1,
                &quot;pic&quot;: &quot;//img.alicdn.com/bao/uploaded/TB1HET6d7voK1RjSZFwXXciCFXa.jpg&quot;,
                &quot;shopItemId&quot;: &quot;564408956766&quot;,
                &quot;price&quot;: 999
            }
        ]
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç»†å¿ƒçš„å°ä¼™ä¼´åº”è¯¥çœ‹åˆ°ï¼Œæˆ‘æ²¡æœ‰å‘é€ form ç»™ä»–ï¼Œä¸€æ ·å¯ä»¥è¯·æ±‚åˆ°éœ€è¦çš„æ•°æ®ï¼Œpage æŒ‚åœ¨äº† query ä¸Šâ€¦â€¦è¿™é‡Œï¼Œå…è®¸æˆ‘ä¸¥é‡æ€€ç–‘ä¸€ä¸‹ä»–ä»¬çš„æŠ€æœ¯èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å±•ç¤ºéƒ¨åˆ†&quot;&gt;å±•ç¤ºéƒ¨åˆ†&lt;/h2&gt;
&lt;p&gt;æ•°æ®æ‹¿åˆ°ï¼Œå°±ç®€å•äº†ï¼Œå…¶å®å°±æ˜¯è¿™ä¸€ä¸ªæ¥å£å®ç°å‰©ä¸‹çš„åŠŸèƒ½äº†ï¼Œæ²¡é”™ï¼Œè®°ä½æˆ‘æ˜¯å‰ç«¯ã€‚&lt;/p&gt;
&lt;pre class=&quot;html&quot;&gt;
&lt;code&gt;&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html lang=&quot;en&quot;&amp;gt;

&amp;lt;head&amp;gt;
  &amp;lt;meta charset=&quot;UTF-8&quot;&amp;gt;
  &amp;lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&amp;gt;
  &amp;lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&amp;gt;
  &amp;lt;title&amp;gt;tb try&amp;lt;/title&amp;gt;
  &amp;lt;style&amp;gt;
    .warning {
      color: red;
    }

    button {
      width: 100px;
      height: 44px;
      margin-right: 44px;
    }

    table {
      border: 1px solid #d8d8d8;
      border-collapse: collapse;
    }

    tr {
      border-bottom: 1px solid #d8d8d8;
      cursor: pointer;
    }

    tr:last-child {
      border: 0;
    }
  &amp;lt;/style&amp;gt;
&amp;lt;/head&amp;gt;

&amp;lt;body&amp;gt;
  &amp;lt;button onclick=&quot;postPage()&quot;&amp;gt;ä¸‹ä¸€é¡µ&amp;lt;/button&amp;gt;
  &amp;lt;span id=&quot;currentPage&quot;&amp;gt;&amp;lt;/span&amp;gt;
  &amp;lt;table&amp;gt;
    &amp;lt;tbody&amp;gt;
      &amp;lt;tr&amp;gt;
        &amp;lt;th&amp;gt;åºå·ï¼ˆå€’åºï¼‰&amp;lt;/th&amp;gt;
        &amp;lt;th&amp;gt;æ¦‚ç‡&amp;lt;/th&amp;gt;
        &amp;lt;th&amp;gt;åå­—&amp;lt;/th&amp;gt;
      &amp;lt;/tr&amp;gt;
    &amp;lt;/tbody&amp;gt;
    &amp;lt;tbody id=&quot;results&quot;&amp;gt;&amp;lt;/tbody&amp;gt;
  &amp;lt;/table&amp;gt;

  &amp;lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js&quot;&amp;gt;&amp;lt;/script&amp;gt;
  &amp;lt;script&amp;gt;
    let currentPage = 0 // å½“å‰é¡µé¢
    let allItems = [] // å…¨éƒ¨æ•°æ®
    let currentTime = 0 // é”é¢‘ç‡ä½¿ç”¨ï¼Œæ ‡è®°ä¸Šæ¬¡æ—¶é—´
    const loopInterval = 2 // é”é¢‘ç‡æ­¥é•¿ï¼Œå•ä½ç§’
    const results = document.querySelector('#results')
    const currentPageText = document.querySelector('#currentPage')
    const reFullTBody = arr =&amp;gt; {
      let innerHtml = ''
      arr.forEach((item, i) =&amp;gt; {
        item.rate = item.totalNum / item.requestNum * 100
        let tr = `
          &amp;lt;tr onclick=&quot;window.open('https://try.taobao.com/item.htm?id=${item.id}')&quot;&amp;gt;
            &amp;lt;td&amp;gt;${i + 1}&amp;lt;/td&amp;gt;
            &amp;lt;td&amp;gt;${item.rate.toFixed(3) + '%'}&amp;lt;/td&amp;gt;
            &amp;lt;td&amp;gt;${item.title}&amp;lt;/td&amp;gt;
          &amp;lt;/tr&amp;gt;
          `
        if (item.rate &amp;gt; 5) tr = tr.replace('&amp;lt;tr', '&amp;lt;tr class=&quot;warning&quot;')
        innerHtml += tr
      })
      currentPageText.innerText = `å½“å‰é¡µï¼š${currentPage}`
      results.innerHTML = innerHtml // åŸè°…æˆ‘ mvvm çš„è‡­æ¯›ç—…
    }

    const postPage = () =&amp;gt; {
      // é”é¢‘ç‡æ­¥é•¿å†…å–æ¶ˆè¯·æ±‚
      const newTime = new Date().getTime()
      const shoudBack = newTime - currentTime &amp;lt; loopInterval * 1000
      if(shoudBack) {
        alert(loopInterval + 'ç§’å†…ä¸è¦å¤šæ¬¡ç‚¹å‡»å“¦ã€‚')
        return
      }
      currentTime = newTime
      $.post('/table', { page: currentPage }, res =&amp;gt; {
        if(res.length &amp;lt; 1) {
          alert('ä»Šå¤©ç»“æŸçš„å·²ç»ç­›é€‰å®Œäº†')
          return
        }
        allItems = [...allItems, ...res]
        allItems.sort((a, b) =&amp;gt; b.rate - a.rate)
        reFullTBody(allItems)
        currentPage--
      })
    }

    $.get('/total', res =&amp;gt; {
      currentPage = res.pages
      postPage()
    })
  &amp;lt;/script&amp;gt;
&amp;lt;/body&amp;gt;

&amp;lt;/html&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é•¿è¿™ä¸ªæ ·å­ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/794080/201810/794080-20181016144313181-1159665620.png&quot; alt=&quot;å±•ç¤º&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘å¤šäººæ€§åŒ–ï¼Œå¯ä»¥ç‚¹å‡»è·³è½¬ã€æ¦‚ç‡è¶…è¿‡ 5% çº¢è‰²å±•ç¤ºã€è¿˜å‘Šè¯‰ä½ å½“å‰æ‰€åœ¨é¡µç ã€ç‚¹å¤ªå¿«è¿˜ç»™ä½ æç¤ºâ€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦&lt;/p&gt;
&lt;p&gt;å°±æ˜¯è¿™ä¹ˆå¥½ç”¨ï¼Œå–œæ¬¢çš„èµ¶ç´§ä½“éªŒå§ï¼&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;çº¿ä¸Šï¼š&lt;a href=&quot;http://only-u.site:8000/&quot;&gt;ç‚¹æˆ‘ä½“éªŒ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Github: &lt;a href=&quot;https://github.com/ZweiZhao/Spider&quot;&gt;Spider&lt;/a&gt;&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;è§‰å¾—æœ‰ç”¨ï¼Œä¸è¦åæƒœ star å“¦ã€‚&lt;/p&gt;
</description>
<pubDate>Tue, 16 Oct 2018 07:01:00 +0000</pubDate>
<dc:creator>zweizhao</dc:creator>
<og:description>é˜¿é‡Œè¯•ç”¨æ’åº å‰æ™¯æè¦ è¯´æ¥ç®€ç›´ä¸¢å°½äº†é’¢é“ç›´ç”·çš„è„¸ï¼Œæ²¡é”™ï¼Œæ˜¨æ™šæˆ‘åœ¨æ„‰å¿«çš„åšç€å¤–åŒ…çš„æ´»ï¼ˆä¸­å›½ç§»åŠ¨çš„å°ç¨‹åºï¼Œè‡ªç”±èŒä¸šï¼Œå–‚ï¼‰ï¼Œ11ç‚¹å¤šäº†ï¼Œå¥³å‹çªç„¶è„‘å­ä¸€æŠ½ï¼šâ€œä½ èƒ½ä¸èƒ½å¸®æˆ‘æŠŠè¿™ä¸ªç©æ„æ’åºä¸€ä¸‹ç»™æˆ‘ç”¨å•Šï¼Œæˆ‘å¥½è–…ç‚¹</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/ZweiZhao/p/9798008.html</dc:identifier>
</item>
<item>
<title>The Road to learn Reactä¹¦ç±å­¦ä¹ ç¬”è®°(ç¬¬ä¸‰ç« ) - èµ–åŒå­¦</title>
<link>http://www.cnblogs.com/lbh2018/p/theroadtolearnreactpart_3.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/lbh2018/p/theroadtolearnreactpart_3.html</guid>
<description>&lt;p&gt;&lt;a href=&quot;https://github.com/LbhFront-end/react-pratice/tree/master/my-first-react-app&quot;&gt;ä»£ç è¯¦æƒ…&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;å£°æ˜å‘¨æœŸæ–¹æ³•&quot;&gt;å£°æ˜å‘¨æœŸæ–¹æ³•&lt;/h2&gt;
&lt;p&gt;é€šè¿‡ä¹‹å‰çš„å­¦ä¹ ï¼Œå¯ä»¥äº†è§£åˆ°ES6 ç±»ç»„ä»¶ä¸­çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³• &lt;code&gt;constructor()&lt;/code&gt; å’Œ &lt;code&gt;render()&lt;/code&gt;&lt;br/&gt;&lt;code&gt;constructor()&lt;/code&gt; æ„é€ å‡½æ•°åªæœ‰åœ¨ç»„ä»¶å®ä¾‹åŒ–å¹¶æ’å…¥åˆ° &lt;code&gt;DOM&lt;/code&gt; ä¸­çš„æ—¶å€™æ‰ä¼šè¢«è°ƒç”¨ã€‚ç»„ä»¶å®ä¾‹åŒ–çš„è¿‡ç¨‹ç§°ä¸ºç»„ä»¶çš„æŒ‚è½½ &lt;code&gt;mount&lt;/code&gt;&lt;br/&gt;&lt;code&gt;render()&lt;/code&gt;æ–¹æ³•ä¹Ÿä¼šåœ¨ç»„ä»¶æŒ‚è½½è¿‡ç¨‹ä¸­è¢«è°ƒç”¨ï¼ŒåŒæ—¶ç»„ä»¶æ›´æ–°çš„æ—¶å€™ä¹Ÿä¼šè¢«è°ƒç”¨ã€‚æ¯å½“ç»„ä»¶çš„çŠ¶æ€ &lt;code&gt;state&lt;/code&gt; å’Œå±æ€§ &lt;code&gt;props&lt;/code&gt; æ”¹å˜çš„æ—¶å€™ï¼Œç»„ä»¶çš„ &lt;code&gt;render()&lt;/code&gt; æ–¹æ³•éƒ½ä¼šè¢«è°ƒç”¨&lt;/p&gt;
&lt;h3 id=&quot;æŒ‚è½½è¿‡ç¨‹ä¸­æœ‰å››ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•è°ƒç”¨é¡ºåºæ˜¯è¿™æ ·çš„&quot;&gt;æŒ‚è½½è¿‡ç¨‹ä¸­æœ‰å››ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œè°ƒç”¨é¡ºåºæ˜¯è¿™æ ·çš„&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;constructor()&lt;/code&gt;&lt;br/&gt;&lt;code&gt;componentWillMount()&lt;/code&gt;&lt;br/&gt;&lt;code&gt;render()&lt;/code&gt;&lt;br/&gt;&lt;code&gt;componentDidMount()&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&quot;å½“ç»„ä»¶çš„çŠ¶æ€æˆ–è€…å±æ€§æ”¹å˜çš„æ—¶å€™ç”¨æ¥æ›´æ–°çš„ç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹äº”ä¸ªæ­¥éª¤&quot;&gt;å½“ç»„ä»¶çš„çŠ¶æ€æˆ–è€…å±æ€§æ”¹å˜çš„æ—¶å€™ç”¨æ¥æ›´æ–°çš„ç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹äº”ä¸ªæ­¥éª¤&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;componentWillReceiveProps()&lt;/code&gt;&lt;br/&gt;&lt;code&gt;shouldComponentUpdate()&lt;/code&gt;&lt;br/&gt;&lt;code&gt;componentWillUpdate()&lt;/code&gt;&lt;br/&gt;&lt;code&gt;render()&lt;/code&gt;&lt;br/&gt;&lt;code&gt;componentDidUpdate()&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&quot;ç»„ä»¶å¸è½½çš„ç”Ÿå‘½å‘¨æœŸåªæœ‰ä¸€ä¸ª&quot;&gt;ç»„ä»¶å¸è½½çš„ç”Ÿå‘½å‘¨æœŸåªæœ‰ä¸€ä¸ª&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;componentWillUnmount()&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&quot;ç”Ÿå‘½å‘¨æœŸè¯¦è§£&quot;&gt;ç”Ÿå‘½å‘¨æœŸè¯¦è§£&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;constructor(props)&lt;/code&gt;&lt;br/&gt;åœ¨ç»„ä»¶åˆå§‹åŒ–çš„æ—¶è¢«è°ƒç”¨ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œå¯ä»¥è®¾ç½®åˆå§‹åŒ–çŠ¶æ€ä»¥åŠç»‘å®šç±»æ–¹æ³•&lt;/p&gt;
&lt;p&gt;&lt;code&gt;componentWillMount()&lt;/code&gt;&lt;br/&gt;åœ¨ &lt;code&gt;render()&lt;/code&gt; æ–¹æ³•ä¹‹å‰è¢«è°ƒç”¨ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå®ƒå¯ä»¥ç”¨ä½œå»è®¾ç½®ç»„ä»¶å†…éƒ¨çš„çŠ¶æ€ï¼Œå› ä¸ºå®ƒä¸ä¼šè§¦å‘ç»„ä»¶çš„å†æ¬¡æ¸²æŸ“ï¼Œä¸€èˆ¬è¿˜æ˜¯æ¨èåœ¨ &lt;code&gt;constructor()&lt;/code&gt; ä¸­å»åˆå§‹åŒ–çŠ¶æ€&lt;/p&gt;
&lt;p&gt;&lt;code&gt;componentDidMount()&lt;/code&gt;&lt;br/&gt;ä»…åœ¨ç»„ä»¶æŒ‚è½½åæ‰§è¡Œä¸€æ¬¡ï¼Œæ˜¯å‘èµ·å¼‚æ­¥è¯·æ±‚å»API è·å–æ•°æ®çš„æœ€å¥½æ—¶æœŸï¼Œè·å–åˆ°çš„æ•°æ®å°†è¢«ä¿å­˜åœ¨å†…éƒ¨ç»„ä»¶çš„çŠ¶æ€ä¸­ç„¶ååœ¨ &lt;code&gt;render()&lt;/code&gt; ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­å±•ç¤ºå‡ºæ¥&lt;/p&gt;
&lt;p&gt;&lt;code&gt;componentWillReceviceProps(nextProps)&lt;/code&gt;&lt;br/&gt;è¿™ä¸ªæ–¹æ³•åœ¨ä¸€ä¸ªæ›´æ–°å£°æ˜å‘¨ï¼ˆ&lt;code&gt;update lifecycle&lt;/code&gt;ï¼‰ä¸­ä½¿ç”¨ï¼Œ æ–°çš„å±æ€§ä¼šä½œä¸ºå®ƒçš„è¾“å…¥ï¼Œå› æ­¤å¯ä»¥åˆ©ç”¨ &lt;code&gt;this.props&lt;/code&gt; æ¥å¯¹æ¯”ä¹‹åçš„å±æ€§å’Œä¹‹å‰çš„å±æ€§ï¼ŒåŸºäºå¯¹æ¯”çš„ç»“æœå»å®ç°ä¸åŒçš„è¡Œä¸ºï¼Œæ­¤å¤–è¿˜å¯ä»¥åŸºäºæ–°çš„å±æ€§æ¥è®¾ç½®ç»„ä»¶çš„çŠ¶æ€&lt;/p&gt;
&lt;p&gt;&lt;code&gt;shouldComponentUpdate(nextProps,nextState)&lt;/code&gt;&lt;br/&gt;æ¯æ¬¡ç»„ä»¶å› ä¸ºçŠ¶æ€æˆ–è€…æ˜¯å±æ€§æ›´æ”¹è€Œæ›´æ–°æ—¶ï¼Œå®ƒéƒ½ä¼šè¢«è°ƒç”¨ã€‚åœ¨æˆç†Ÿçš„Reactåº”ç”¨ä¸­ä½¿ç”¨å®ƒæ¥è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ã€‚åœ¨ä¸€ä¸ªæ›´æ–°å£°æ˜å‘¨æœŸä¸­ï¼Œç»„ä»¶ä»¥åŠå…¶ç»„ä»¶å°†æ ¹æ®è¯¥æ–¹æ³•è¿”å›çš„å¸ƒå°”å€¼æ¥å†³å®šæ˜¯å¦é‡æ–°æ¸²æŸ“ï¼Œè¿™æ ·å°±å¯ä»¥é˜»æ­¢ç»„ä»¶çš„æ¸²æŸ“å£°æ˜å‘¨æœŸæ–¹æ³•ï¼Œé¿å…ä¸å¿…è¦çš„æ¸²æŸ“&lt;/p&gt;
&lt;p&gt;&lt;code&gt;componentWillUpdate(nextProps,nextState)&lt;/code&gt;&lt;br/&gt;è¿™ä¸ªæ–¹æ³•æ˜¯ &lt;code&gt;render()&lt;/code&gt; æ–¹æ³•æ‰§è¡Œä¹‹å‰çš„æœ€åä¸€ä¸ªæ–¹æ³•ï¼Œæ­¤æ—¶æ‹¥æœ‰äº†ä¸‹ä¸€ä¸ªå±æ€§å’ŒçŠ¶æ€ï¼Œå¯ä»¥åˆ©ç”¨è¿™ä¸ªæ–¹æ³•åœ¨æ¸²æŸ“ä¹‹å‰åšæœ€åçš„å‡†å¤‡ã€‚æ³¨æ„è¿™ä¸ªå£°æ˜å‘¨æœŸä¸èƒ½å†è§¦å‘ &lt;code&gt;setState()&lt;/code&gt; å¦‚æœæƒ³åŸºäºæ–°çš„å±æ€§è®¡ç®—çŠ¶æ€ ,å¿…é¡»ä½¿ç”¨ &lt;code&gt;componentWillReceiveProps()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;componentDidUpdate(prevProps,prevState)&lt;/code&gt;&lt;br/&gt;è¿™ä¸ªæ–¹æ³•åœ¨ &lt;code&gt;render()&lt;/code&gt; ä¹‹åè°ƒç”¨ï¼Œå¯ä»¥ç”¨å®ƒå½“æˆæ“ä½œDOM æˆ–è€…æ˜¯ æ‰§è¡Œæ›´å¤šå¼‚æ­¥è¯·æ±‚çš„æœºä¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;componentWillUnmount()&lt;/code&gt;&lt;br/&gt;å®ƒä¼šåœ¨ç»„ä»¶é”€æ¯ä¹‹å‰è¢«è°ƒç”¨ï¼Œå¯ä»¥åˆ©ç”¨è¿™ä¸ªå£°æ˜å‘¨æœŸæ–¹æ³•å»æ‰§è¡Œä»»ä½•æ¸…ç†ä»»åŠ¡&lt;/p&gt;
&lt;p&gt;&lt;code&gt;render()&lt;/code&gt; æ˜¯å¿…é¡»æœ‰çš„ï¼Œå¦åˆ™ä¸ä¼šè¿”å›ä¸€ä¸ªç»„ä»¶å®ä¾‹&lt;/p&gt;
&lt;h3 id=&quot;è¿˜æœ‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•&quot;&gt;è¿˜æœ‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;componentDidCatch(error,info)&lt;/code&gt;&lt;br/&gt;åœ¨ &lt;code&gt;React 16&lt;/code&gt; ä¸­å¼•å…¥ï¼Œç”¨æ¥æ•è·ç»„ä»¶çš„é”™è¯¯ã€‚&lt;br/&gt;ä¸¾ä¾‹æ¥è¯´ï¼Œåœ¨ä½ çš„åº”ç”¨ä¸­å±•ç¤ºæ ·æœ¬æ•°æ®æœ¬æ¥æ˜¯æ²¡é—®é¢˜çš„ã€‚ä½†æ˜¯å¯èƒ½ä¼šæœ‰åˆ—è¡¨çš„æœ¬åœ°çŠ¶æ€è¢«æ„å¤–è®¾ç½®æˆ &lt;code&gt;null&lt;/code&gt; çš„æƒ…å†µå‘ç”Ÿï¼ˆä¾‹å¦‚ä»å¤–éƒ¨ &lt;code&gt;API&lt;/code&gt; è·å–åˆ—è¡¨å¤±è´¥æ—¶ï¼Œä½ æŠŠæœ¬åœ°çŠ¶æ€è®¾ç½®ä¸ºç©ºäº†ï¼‰ã€‚ç„¶åå®ƒå°±ä¸èƒ½åƒä¹‹å‰ä¸€æ ·å»è¿‡æ»¤ï¼ˆ&lt;code&gt;filter&lt;/code&gt;ï¼‰å’Œæ˜ å°„ï¼ˆ&lt;code&gt;map&lt;/code&gt;ï¼‰è¿™ä¸ªåˆ—è¡¨ï¼Œå› ä¸ºå®ƒä¸æ˜¯ä¸€ä¸ªç©ºåˆ—è¡¨ï¼ˆ[]ï¼‰è€Œæ˜¯ &lt;code&gt;null&lt;/code&gt;ã€‚è¿™æ—¶ç»„ä»¶å°±ä¼šå´©æºƒï¼Œç„¶åæ•´ä¸ªåº”ç”¨å°±ä¼šæŒ‚æ‰ã€‚ç°åœ¨ä½ å¯ä»¥ç”¨&lt;code&gt;componentDidCatch()&lt;/code&gt; æ¥æ•è·é”™è¯¯ï¼Œå°†å®ƒå­˜åœ¨æœ¬åœ°çš„çŠ¶æ€ä¸­ï¼Œç„¶ååƒç”¨æˆ·å±•ç¤ºä¸€æ¡ä¿¡æ¯ï¼Œè¯´æ˜åº”ç”¨å‘ç”Ÿäº†é”™è¯¯&lt;/p&gt;
&lt;h2 id=&quot;è·å–æ•°æ®&quot;&gt;è·å–æ•°æ®&lt;/h2&gt;
&lt;p&gt;ä» &lt;code&gt;Hacker News API&lt;/code&gt; è·å–æ•°æ®ã€‚å¯ä»¥åœ¨ &lt;code&gt;componentDidMount()&lt;/code&gt; ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ¥è·å–æ•°æ®,ç”¨JavaScriptåŸç”Ÿçš„ &lt;code&gt;fetch API&lt;/code&gt; æ¥å‘èµ·è¯·æ±‚&lt;br/&gt;åœ¨é‚£ä¹‹å‰ï¼Œå…ˆè®¾ç½®å¥½ &lt;code&gt;URL&lt;/code&gt;å¸¸é‡å’Œé»˜è®¤å‚æ•°ï¼Œå°† &lt;code&gt;API&lt;/code&gt; è¯·æ±‚åˆ†è§£æˆå‡ æ­¥&lt;/p&gt;
&lt;pre class=&quot;react&quot;&gt;
&lt;code&gt;import React,{ Component } from 'react';
import './App.css'

const DEFAULT_QUERY = 'redux';
const PATH_BASE = 'https://hn.algolia.com/api/v1';
const PATH_SEARCH = '/search';
const PARAM_SEARCH = 'query=';

åœ¨ES6 ä¸­ å¯ä»¥ç”¨æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆ`template strings`ï¼‰ æ¥è¿æ¥å­—ç¬¦ä¸²

//ES6 
const url = `${PATH_BASE}${PATH_SEARCH}?${PARAM_SEARCH}${DEFAULT_QUERY}`;
//ES5 
var url = PATH_BASE + PATH_SEARCH +'?' + PARAM_SEARCH + DEFAULT_QUERY;&lt;/code&gt;
&lt;/pre&gt;
&lt;pre class=&quot;react&quot;&gt;
&lt;code&gt;...

class App extends Component {

constructor(props) {
  super(props);

  this.state = {
    result: null,
    searchTerm: DEFAULT_QUERY,
  };

  this.setSearchTopStories = this.setSearchTopStories.bind(this);
  this.fetchSearchTopStories = this.fetchSearchTopStories.bind(this);
  this.onSearchChange = this.onSearchChange.bind(this);
  this.onDismiss = this.onDismiss.bind(this);
}

setSearchTopStories(result) {
  this.setState({ result });
}

fetchSearchTopStories(searchTerm) {
  fetch(`${PATH_BASE}${PATH_SEARCH}?${PARAM_SEARCH}${searchTerm}`)
    .then(response =&amp;gt; response.json())
    .then(result =&amp;gt; this.setSearchTopStories(result))
    .catch(e =&amp;gt; e);
}

componentDidMount() {
  const { searchTerm } = this.state;
  this.fetchSearchTopStories(searchTerm);
}

...
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä» &lt;code&gt;Hacker News API&lt;/code&gt; å¾—åˆ°ä¸€ä¸ªçœŸå®çš„åˆ—è¡¨ã€‚ç»„ä»¶å°†ä¸€ä¸ªç©ºçš„åˆ—è¡¨ç»“æœä»¥åŠä¸€ä¸ªé»˜è®¤çš„æœç´¢è¯ä½œä¸ºåˆå§‹çŠ¶æ€ã€‚è¿™ä¸ªé»˜è®¤æœç´¢è¯ä¹ŸåŒæ ·ç”¨åœ¨ &lt;code&gt;Search&lt;/code&gt; ç»„ä»¶çš„è¾“å…¥å­—æ®µå’Œç¬¬ä¸€ä¸ª API è¯·æ±‚ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;å…¶æ¬¡ï¼Œåœ¨ç»„ä»¶æŒ‚è½½ä¹‹åï¼Œå®ƒç”¨äº† &lt;code&gt;componentDidMount()&lt;/code&gt;ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å»è·å–æ•°æ®ã€‚åœ¨ç¬¬ä¸€æ¬¡è·å–æ•°æ®æ—¶ï¼Œä½¿ç”¨çš„æ˜¯æœ¬åœ°çŠ¶æ€ä¸­çš„é»˜è®¤æœç´¢è¯ã€‚å®ƒå°†è·å–ä¸ â€œ&lt;code&gt;redux&lt;/code&gt;â€ ç›¸å…³çš„èµ„è®¯ï¼Œå› ä¸ºå®ƒæ˜¯é»˜è®¤çš„å‚æ•°ã€‚&lt;/p&gt;
&lt;p&gt;å†æ¬¡ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯åŸç”Ÿçš„ &lt;code&gt;fetch API&lt;/code&gt;ã€‚&lt;code&gt;JavaScript ES6&lt;/code&gt; æ¨¡æ¿å­—ç¬¦ä¸²å…è®¸ç»„ä»¶åˆ©ç”¨ &lt;code&gt;searchTerm&lt;/code&gt; æ¥ç»„æˆ URLã€‚è¯¥ URL æ˜¯åŸç”Ÿ &lt;code&gt;fetch API&lt;/code&gt; å‡½æ•°çš„å‚æ•°ã€‚è¿”å›çš„å“åº”éœ€è¦è¢«è½¬åŒ–æˆ JSON æ ¼å¼çš„æ•°æ®ç»“æ„ã€‚è¿™æ˜¯åœ¨å¤„ç† &lt;code&gt;JSON&lt;/code&gt; æ•°æ®ç»“æ„æ—¶ï¼ŒåŸç”Ÿçš„ fetch API ä¸­çš„å¼ºåˆ¶æ­¥éª¤ã€‚æœ€åå°†å¤„ç†åçš„å“åº”èµ‹å€¼ç»™ç»„ä»¶å†…éƒ¨çŠ¶æ€ä¸­çš„ç»“æœã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬ç”¨ä¸€æ®µ &lt;code&gt;catch&lt;/code&gt; ä»£ç æ¥å¤„ç†å‡ºé”™çš„æƒ…å†µã€‚å¦‚æœåœ¨å‘èµ·è¯·æ±‚æ—¶å‡ºç°é”™è¯¯ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè¿›å…¥åˆ° &lt;code&gt;catch&lt;/code&gt; ä¸­è€Œä¸æ˜¯ &lt;code&gt;then&lt;/code&gt; ä¸­ã€‚åœ¨æœ¬ä¹¦ä¹‹åçš„ç« èŠ‚ä¸­ï¼Œå°†æ¶µç›–é”™è¯¯å¤„ç†çš„å†…å®¹ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åä½†åŒæ ·é‡è¦çš„æ˜¯ï¼Œä¸è¦å¿˜è®°åœ¨æ„é€ å‡½æ•°ä¸­ç»‘å®šä½ çš„ç»„ä»¶æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ‹“å±•æ“ä½œç¬¦&quot;&gt;æ‹“å±•æ“ä½œç¬¦&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;Dismiss&lt;/code&gt; æŒ‰é’®ä¹‹æ‰€ä»¥ä¸å·¥ä½œï¼Œæ˜¯å› ä¸º &lt;code&gt;onDismiss()&lt;/code&gt; æ–¹æ³•ä¸èƒ½å¤„ç†å¤æ‚çš„ &lt;code&gt;result&lt;/code&gt; å¯¹è±¡ã€‚å®ƒç°åœ¨è¿˜åªèƒ½å¤„ç†ä¸€ä¸ªæœ¬åœ°çŠ¶æ€ä¸­çš„ç®€å•åˆ—è¡¨ã€‚ä½†æ˜¯ç°åœ¨è¿™ä¸ªåˆ—è¡¨å·²ç»ä¸å†æ˜¯ç®€å•çš„å¹³é“ºåˆ—è¡¨äº†ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬å»æ“ä½œè¿™ä¸ª &lt;code&gt;result&lt;/code&gt; å¯¹è±¡è€Œä¸æ˜¯å»æ“ä½œåˆ—è¡¨ã€‚&lt;/p&gt;
&lt;pre class=&quot;react&quot;&gt;
&lt;code&gt;onDismiss(id) {
const isNotId = item =&amp;gt; item.objectID !== id;
const updatedHits = this.state.result.hits.filter(isNotId);
this.setState({
  ...
});
}

/ don`t do this
this.state.result.hits = updatedHits&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;React æ‹¥æŠ¤ä¸å¯å˜çš„æ•°æ®ç»“æ„ï¼Œä¸åº”è¯¥æ”¹å˜ä¸€ä¸ªå¯¹è±¡æˆ–è€…æ˜¯ç›´æ¥æ”¹å˜çŠ¶æ€ã€‚æ›´å¥½çš„åšæ³•æ˜¯åŸºäºç°åœ¨æ‹¥æœ‰çš„èµ„æºæ¥åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚&lt;br/&gt;&lt;code&gt;javaSrcipt ES6&lt;/code&gt; çš„ &lt;code&gt;Object.assign()&lt;/code&gt; å‡½æ•°å¯ä»¥è¾¾åˆ°è¿™æ ·çš„ç›®çš„ã€‚å®ƒæŠŠæ¥å—çš„ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºç›®æ ‡å¯¹è±¡ï¼Œåé¢çš„æ‰€æœ‰å‚æ•°ä½œä¸ºæºå¯¹è±¡ï¼Œç„¶åæŠŠæ‰€æœ‰çš„æºå¯¹è±¡åˆå¹¶åˆ°ç›®æ ‡å¯¹è±¡ä¸­ã€‚åªè¦å°†ç›®æ ‡å¯¹è±¡è®¾ç½®ä¸ºç©ºï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚&lt;/p&gt;
&lt;pre class=&quot;react&quot;&gt;
&lt;code&gt;const updatedHits  = {hits:updatedHits };
const updateList = Object.assign({},this.state.result,updateHits);&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;es6ä¸­æ•°ç»„çš„æ‰©å±•è¿ç®—ç¬¦&quot;&gt;ES6ä¸­æ•°ç»„çš„æ‰©å±•è¿ç®—ç¬¦&lt;/h3&gt;
&lt;pre class=&quot;react&quot;&gt;
&lt;code&gt;æ•°ç»„+å­—ç¬¦ä¸²
const userList = ['Robin', 'Andrew', 'Dan'];
const additionalUser = 'Jordan';
const allUsers = [ ...userList, additionalUser ];

console.log(allUsers);
// output: ['Robin', 'Andrew', 'Dan', 'Jordan']

åˆå¹¶æ•°ç»„
onst oldUsers = ['Robin', 'Andrew'];
const newUsers = ['Dan', 'Jordan'];
const allUsers = [ ...oldUsers, ...newUsers ];

console.log(allUsers);
// output: ['Robin', 'Andrew', 'Dan', 'Jordan']
å¯¹è±¡
const userNames = { firstname: 'Robin', lastname: 'Wieruch' };
const userAge = { age: 28 };
const user = { ...userNames, ...userAge };

console.log(user);
// output: { firstname: 'Robin', lastname: 'Wieruch', age: 28 }&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é‡æ–°æ”¹å†™&lt;/p&gt;
&lt;pre class=&quot;react&quot;&gt;
&lt;code&gt;onDismiss(id) {
    const isNotId = item =&amp;gt; item.objectID !== id;
    const updatedHits = this.state.result.hits.filter(isNotId);
    this.setState({
      result: { ...this.state.result, hits: updatedHits }
    });
}&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;æ¡ä»¶æ¸²æŸ“&quot;&gt;æ¡ä»¶æ¸²æŸ“&lt;/h2&gt;
&lt;p&gt;æ¡ä»¶æ¸²æŸ“ç”¨äºéœ€è¦å†³å®šæ¸²æŸ“å“ªä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç”¨ &lt;code&gt;JSX&lt;/code&gt; ä¸­ &lt;code&gt;if-else&lt;/code&gt; æ¥å®ç°&lt;br/&gt;ç»„ä»¶å†…éƒ¨çŠ¶æ€ä¸­çš„ &lt;code&gt;result&lt;/code&gt; å¯¹è±¡åˆå§‹å€¼ä¸ºç©ºï¼Œå½“ &lt;code&gt;API&lt;/code&gt; ç»“æœè¿˜æ²¡æœ‰è¿”å›çš„æ—¶å€™ï¼Œæ­¤æ—¶çš„ä¸»ç»„ä»¶ä¸­æ²¡æœ‰ä»»ä½•çš„å…ƒç´ ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæ¡ä»¶æ¸²æŸ“ï¼Œå› ä¸ºåœ¨æŸä¸ªç‰¹å®šçš„æ¡ä»¶ä¸‹ï¼Œ &lt;code&gt;render()&lt;/code&gt; æ–¹æ³•æå‰è¿”å›äº†ï¼Œæ ¹æ®æ¡ä»¶ï¼Œ ä¸»ç»„ä»¶æ¸²æŸ“å®ƒçš„å…ƒç´ æˆ–è€…ä»€ä¹ˆéƒ½ä¸æ¸²æŸ“&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Table&lt;/code&gt; ç»„ä»¶çš„æ¸²æŸ“ä¾èµ–äº &lt;code&gt;result&lt;/code&gt;ï¼Œæ‰€ä»¥å°†å®ƒåŒ…åœ¨ä¸€ä¸ªç‹¬ç«‹çš„æ¡ä»¶æ¸²æŸ“ä¸­æ‰æ¯”è¾ƒåˆç†ã€‚å³ä½¿ &lt;code&gt;result&lt;/code&gt; ä¸ºç©ºï¼Œå…¶å®ƒçš„æ‰€æœ‰ç»„ä»¶è¿˜æ˜¯åº”è¯¥è¢«æ¸²æŸ“ã€‚ä½ åªéœ€è¦åœ¨ &lt;code&gt;JSX&lt;/code&gt; ä¸­åŠ ä¸Šä¸€ä¸ªä¸‰å…ƒè¿ç®—ç¬¦å°±å¯ä»¥è¾¾åˆ°è¿™æ ·çš„ç›®çš„ã€‚&lt;/p&gt;
&lt;pre class=&quot;react&quot;&gt;
&lt;code&gt;return (
    &amp;lt;div className=&quot;page&quot;&amp;gt;
      &amp;lt;div className = &quot;interactions&quot;&amp;gt;
        &amp;lt;Search
          value={searchText}
          onChange={this.onSearchChange} /&amp;gt;
          {
            result?
            &amp;lt;Table
            list={result.hits}
            pattern={searchText}
            onDismiss={this.onDismiss}/&amp;gt;:null
          }
      &amp;lt;/div&amp;gt;
    &amp;lt;/div&amp;gt;
  )&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™æ˜¯å®ç°æ¡ä»¶æ¸²æŸ“çš„ç¬¬äºŒç§æ–¹å¼ã€‚&lt;br/&gt;ç¬¬ä¸‰ç§åˆ™æ˜¯è¿ç”¨ &lt;code&gt;&amp;amp;&amp;amp;&lt;/code&gt; é€»è¾‘è¿ç®—ç¬¦ã€‚åœ¨JavaScriptä¸­ï¼Œ true &amp;amp;&amp;amp; 'Hello World' çš„å€¼æ°¸è¿œæ˜¯ â€œHello Worldâ€ã€‚è€Œ false &amp;amp;&amp;amp; 'Hello World' çš„å€¼åˆ™æ°¸è¿œæ˜¯ false&lt;/p&gt;
&lt;pre class=&quot;react&quot;&gt;
&lt;code&gt;  const result = true &amp;amp;&amp;amp; 'Hello World';
  console.log(result);
  // output: Hello World

  const result = false &amp;amp;&amp;amp; 'Hello World';
  console.log(result);
  // output: false&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ‰€ä»¥ä¹Ÿå¯ä»¥è¿™æ ·æ”¹å†™&lt;/p&gt;
&lt;pre class=&quot;react&quot;&gt;
&lt;code&gt;{ result &amp;amp;&amp;amp;
  &amp;lt;Table
    list={result.hits}
    pattern={searchTerm}
    onDismiss={this.onDismiss}
  /&amp;gt;
}&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;å®¢æˆ·ç«¯æˆ–è€…æœåŠ¡ç«¯æœç´¢&quot;&gt;å®¢æˆ·ç«¯æˆ–è€…æœåŠ¡ç«¯æœç´¢&lt;/h2&gt;
&lt;p&gt;åœ¨ä½¿ç”¨ &lt;code&gt;Search&lt;/code&gt; ç»„ä»¶çš„è¾“å…¥æ æ—¶ï¼Œä¼šåœ¨å®¢æˆ·ç«¯è¿‡æ»¤è¿™ä¸ªåˆ—è¡¨ï¼Œæ‰€ä»¥è¦åšçš„æ˜¯ä½¿ç”¨ API åœ¨æœåŠ¡ç«¯è¿›è¡Œæœç´¢ã€‚å¦åˆ™ï¼Œå°±åªèƒ½å¤„ç†ç¬¬ä¸€æ¬¡ä» &lt;code&gt;componentDidMount()&lt;/code&gt; æ‹¿åˆ°çš„é»˜è®¤æœç´¢è¯çš„ API å“åº”&lt;br/&gt;å¯ä»¥åœ¨ä¸»ç»„ä»¶ä¸­é¡¶ä¸€ä¸ª &lt;code&gt;onSeachSubmit()&lt;/code&gt; æ–¹æ³•ï¼Œå½“ &lt;code&gt;Search&lt;/code&gt; ç»„ä»¶è¿›è¡Œæœç´¢çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•æ¥ API è·å–ç»“æœï¼Œé¡ºä¾¿åœ¨ &lt;code&gt;Search&lt;/code&gt; ä¸­å¢åŠ ä¸€ä¸ªæ–°æŒ‰é’®ï¼Œè¿™ä¸ªæŒ‰é’®å¯ä»¥è§¦å‘æœç´¢è¯·æ±‚&lt;/p&gt;
&lt;pre class=&quot;react&quot;&gt;
&lt;code&gt;  class FormP extends Component {

  constructor(props) {
    super(props);
    this.state = {
      result: null,
      searchText: DEFAULT_QUERY,
    };
    this.setSearchTopStories = this.setSearchTopStories.bind(this);
    this.fetchSearchTopStories = this.fetchSearchTopStories.bind(this);
    this.onSearchChange = this.onSearchChange.bind(this);
    this.onSearchSubmit = this.onSearchSubmit.bind(this);
    this.onDismiss = this.onDismiss.bind(this);
  }

  ....

  onSearchSubmit(e) {
    const { searchText } = this.state;
    // console.log( searchText);
    this.fetchSearchTopStories(searchText);
    e.preventDefault();
  }
}

const Search = ({ value, onChange, onSubmit, children }) =&amp;gt;
  &amp;lt;form onSubmit={onSubmit} &amp;gt;
    &amp;lt;input
      type=&quot;text&quot;
      value={value}
      onChange={onChange}
    /&amp;gt;
    &amp;lt;button type=&quot;submit&quot;&amp;gt;
      {children}
    &amp;lt;/button&amp;gt;
  &amp;lt;/form&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;åˆ†é¡µæŠ“å–&quot;&gt;åˆ†é¡µæŠ“å–&lt;/h2&gt;
&lt;p&gt;æ”¹é€ ä¸€ä¸‹å¯ç»„åˆ API å¸¸é‡ï¼Œä»¥ä¾¿äºå¤„ç†åˆ†é¡µæ•°æ®&lt;/p&gt;
&lt;pre class=&quot;react&quot;&gt;
&lt;code&gt;const DEFAULT_QUERY = 'redux';
const PATH_BASE = 'https://hn.algolia.com/api/v1';
const PATH_SEARCH = '/search';
const PARAM_SEARCH = 'query=';
const PARAM_PAGE = 'page=';
const url = `${PATH_BASE}${PATH_SEARCH}?${PARAM_SEARCH}${searchTerm}&amp;amp;${PARAM_PAGE}`;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;fetchSearchTopStories()&lt;/code&gt; å‡½æ•°æ¥æ”¶åˆ†é¡µä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚å¦‚æœä¸æä¾›ç¬¬äºŒä¸ªå‚æ•°ï¼Œå®ƒå°†ä½¿ç”¨ &lt;code&gt;0&lt;/code&gt; ä½œä¸ºåˆå§‹å‚æ•°å¹¶å‘èµ·è¯·æ±‚ã€‚å› æ­¤ &lt;code&gt;componentDidMount()&lt;/code&gt; å’Œ &lt;code&gt;onSearchSubmit()&lt;/code&gt; æ–¹æ³•åœ¨ç¬¬ä¸€ä¸ªè¯·æ±‚ä¸­é»˜è®¤è·å–ç¬¬ä¸€é¡µã€‚ä¹‹åçš„è¯·æ±‚å°†æ ¹æ®æä¾›çš„ç¬¬äºŒä¸ªå‚æ•°æŠ“å–ä¸‹ä¸€ä¸ªé¡µé¢çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;pre class=&quot;react&quot;&gt;
&lt;code&gt;  class App extends Component {

  ...

  fetchSearchTopStories(searchTerm, page = 0) {
    fetch(`${PATH_BASE}${PATH_SEARCH}?${PARAM_SEARCH}${searchTerm}&amp;amp;${PARAM_PAGE}\
${page}`)
      .then(response =&amp;gt; response.json())
      .then(result =&amp;gt; this.setSearchTopStories(result))
      .catch(e =&amp;gt; e);
  }

  ...

}&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;å®¢æˆ·ç«¯ç¼“å­˜&quot;&gt;å®¢æˆ·ç«¯ç¼“å­˜&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/LbhFront-end/react-pratice/tree/master/my-first-react-app&quot;&gt;The Road to learn React ä»£ç &lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;é”™è¯¯å¤„ç†&quot;&gt;é”™è¯¯å¤„ç†&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/LbhFront-end/react-pratice/tree/master/my-first-react-app&quot;&gt;The Road to learn React ä»£ç &lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;ä»£ç ç»„ç»‡å’Œæµ‹è¯•&quot;&gt;ä»£ç ç»„ç»‡å’Œæµ‹è¯•&lt;/h2&gt;
&lt;p&gt;æœ¬ç« å°†ä¸“æ³¨åœ¨å‡ ä¸ªé‡è¦è¯é¢˜æ¥ä¿è¯åœ¨ä¸€ä¸ªè§„æ¨¡å¢é•¿çš„åº”ç”¨ä¸­ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚ä½ å°†äº†è§£å¦‚ä½•å»ç»„ç»‡ä»£ç ï¼Œä»¥ä¾¿åœ¨æ„å»ºä½ çš„å·¥ç¨‹ç›®å½•å’Œæ–‡ä»¶æ—¶æ—¶éµå¾ªæœ€ä½³å®è·µã€‚æœ¬ç« ä½ å°†å­¦ä¼šçš„å¦å¤–ä¸€ä¸ªè¯é¢˜æ˜¯æµ‹è¯•ï¼Œè¿™å¯¹ä½ çš„ä»£ç å¥å£®æ€§éå¸¸é‡è¦ã€‚æœ¬ç« ä¹Ÿä¼šç»“åˆä¹‹å‰çš„ç»ƒä¹ é¡¹ç›®æ¥ä¸ºä½ ä»‹ç»è¿™å‡ ä¸ªè¯é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&quot;es6æ¨¡å—-import-å’Œ-export&quot;&gt;ES6æ¨¡å—ï¼š &lt;code&gt;Import&lt;/code&gt; å’Œ &lt;code&gt;Export&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;åœ¨ &lt;code&gt;JavaScript ES6&lt;/code&gt; ä¸­å¯ä»¥ä»æ¨¡å—ä¸­å¯¼å…¥å’Œå¯¼å‡ºæŸäº›åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½å¯ä»¥æ˜¯å‡½æ•°ã€ç±»ã€ç»„ä»¶ã€å¸¸é‡ç­‰ç­‰ã€‚åŸºæœ¬ä¸Šå¯ä»¥å°†æ‰€æœ‰ä¸œè¥¿éƒ½èµ‹å€¼åˆ°ä¸€ä¸ªå˜é‡ä¸Šã€‚æ¨¡å—å¯ä»¥æ˜¯å•ä¸ªæ–‡ä»¶ï¼Œæˆ–è€…ä¸€ä¸ªå¸¦æœ‰å…¥å£æ–‡ä»¶çš„æ–‡ä»¶å¤¹&lt;/p&gt;
&lt;p&gt;&lt;code&gt;import&lt;/code&gt; ä¸ &lt;code&gt;export&lt;/code&gt; è¯­å¥å¯ä»¥è®©æˆ‘ä»¬åœ¨ä¸åŒçš„æ–‡ä»¶å…±äº«ä»£ç ï¼Œè¿™äº›è¯­è¨€æœ‰åˆ©äºä»£ç çš„åˆ†å‰²ã€‚ä»£ç é£æ ¼å°±æ˜¯å°†ä»£ç åˆ†é…åˆ°å¤šä¸ªæ–‡ä»¶å¤¹ä¸­å»ï¼Œä»¥ä¿æŒä»£ç çš„é‡ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚å‰è€…å¾—ä»¥æˆç«‹æ—¶å› ä¸ºå¯ä»¥åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­å¯¼å…¥ç›¸åŒçš„ä»£ç ç‰‡æ®µï¼Œè€Œåè€…å¾—ä»¥æˆç«‹æ˜¯å› ä¸ºç»´æŠ¤çš„ä»£ç æ—¶å”¯ä¸€çš„ä»£ç æº&lt;/p&gt;
&lt;p&gt;æœ€åä¸€ç‚¹æ˜¯ï¼Œå®ƒèƒ½å¸®åŠ©æˆ‘ä»¬æ€è€ƒä»£ç å°è£…ã€‚ä¸æ˜¯æ‰€æœ‰çš„åŠŸèƒ½éƒ½éœ€è¦ä»ä¸€ä¸ªæ–‡ä»¶å¯¼å‡ºã€‚å…¶ä¸­ä¸€äº›åŠŸèƒ½åº”è¯¥åªåœ¨å®šä¹‰å®ƒçš„æ–‡ä»¶å¤¹ä¸­ä½¿ç”¨ã€‚ä¸€ä¸ªæ–‡ä»¶å¯¼å‡ºçš„åŠŸèƒ½æ˜¯è¿™ä¸ªæ–‡ä»¶å…¬å…± API ï¼Œåªæœ‰å¯¼å‡ºçš„åŠŸèƒ½æ‰èƒ½è¢«å…¶ä»–åœ°æ–¹é‡ç”¨ã€‚éµå¾ªäº†å°è£…çš„æœ€ä½³å®è·µ&lt;/p&gt;
&lt;p&gt;å¯ä»¥å¯¼å‡ºä¸€ä¸ªæˆ–è€…å¤šä¸ªå˜é‡ï¼Œç§°ä¸ºä¸€ä¸ªå‘½åçš„å¯¼å‡º&lt;/p&gt;
&lt;p&gt;file1.js&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;const firstname = 'lai',&lt;br/&gt;const lastname = 'bh',&lt;br/&gt;&lt;code&gt;export&lt;/code&gt; { firstname , lastname };&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¹¶åœ¨å¦å¤–ä¸€ä¸ªæ–‡ä»¶ä¸­å¼•ç”¨&lt;br/&gt;file2.js&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;&lt;code&gt;import&lt;/code&gt; { firstname, lastname } from './file1.js';&lt;br/&gt;console.log(firstname); // lai&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¹Ÿå¯ä»¥ç”¨å¯¹è±¡çš„æ–¹å¼å¯¼å…¥å¦å¤–æ–‡ä»¶çš„å…¨éƒ¨å˜é‡&lt;br/&gt;file2.js&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;&lt;code&gt;import&lt;/code&gt; * as person from './file1.js';&lt;br/&gt;console.log(person.firstname); // lai&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¯¼å…¥å¯ä»¥æœ‰ä¸€ä¸ªåˆ«åï¼Œå¯èƒ½å‘ç”Ÿåœ¨è¾“å‡ºå¤šä¸ªæ–‡ä»¶ä¸­æœ‰ç›¸åŒå‘½åçš„å¯¼å‡ºçš„æ—¶å€™ã€‚&lt;br/&gt;file2.js&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;&lt;code&gt;import&lt;/code&gt; { firstname as foo } from './file1.js'&lt;br/&gt;console.log(foo); // lai&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿˜æœ‰ä¸€ç§æƒ…å†µ &lt;code&gt;default&lt;/code&gt; è¯­å¥ï¼Œå¯ä»¥è¢«ç”¨åœ¨ä»¥ä¸‹æƒ…å†µ&lt;br/&gt;ä¸ºäº†å¯¼å‡ºå’Œå¯¼å…¥å•ä¸€åŠŸèƒ½&lt;br/&gt;ä¸ºäº†å¼ºè°ƒä¸€ä¸ªæ¨¡å—è¾“å‡º API ä¸­çš„ä¸»è¦åŠŸèƒ½&lt;br/&gt;è¿™æ ·å¯ä»¥å‘åå…¼å®¹ ES5 åªæœ‰ä¸€ä¸ªå¯¼å‡ºç‰©çš„åŠŸèƒ½&lt;/p&gt;
&lt;p&gt;file1.js&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;const lbh = { firstname:'lai', lastname:'bh'};&lt;br/&gt;&lt;code&gt;export default&lt;/code&gt; lbh;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¯ä»¥åœ¨å¯¼å…¥ &lt;code&gt;default&lt;/code&gt; è¾“å‡ºæ—¶çœç•¥èŠ±æ‹¬å·&lt;br/&gt;file2.js&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;&lt;code&gt;import&lt;/code&gt; developer from './file1.js'&lt;br/&gt;console.log(developer); // { firstname:'lai',lastname:'bh'}&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¦å¤–ï¼Œè¾“å…¥åç§°å¯ä»¥ä¸å¯¼å…¥çš„ &lt;code&gt;default&lt;/code&gt; åç§°ä¸ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥å°†å…¶ä¸å‘½åçš„å¯¼å‡ºä¸å¯¼å…¥è¯­å¥ä½¿ç”¨åŒä¸€ä¸ªåç§°&lt;br/&gt;file1.js&lt;/p&gt;
&lt;blockquote readability=&quot;10&quot;&gt;
&lt;p&gt;const firstname = 'lai',&lt;br/&gt;const lastname = 'bh',&lt;br/&gt;const lbh = { firstname, lastname};&lt;br/&gt;&lt;code&gt;export&lt;/code&gt;{ firstname, lastname};&lt;br/&gt;&lt;code&gt;export default&lt;/code&gt; lbh&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;file2.js&lt;/p&gt;
&lt;blockquote readability=&quot;11&quot;&gt;
&lt;p&gt;&lt;code&gt;import&lt;/code&gt; lbh, { firstname, lastname } from './file1.js';&lt;br/&gt;console.log(lbh); // { firstname:'lai',lastname:'bh'}&lt;br/&gt;console.log(firstname, lastname); // (lai,bh)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨å‘½åçš„å¯¼å‡ºä¸­ï¼Œå¯ä»¥çœç•¥å¤šä½™è¡Œç›´æ¥å¯¼å‡ºå˜é‡&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;&lt;code&gt;export default&lt;/code&gt; firstname = 'lai';&lt;br/&gt;&lt;code&gt;export default&lt;/code&gt; lastname = 'bh';&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;ä»£ç ç»„ç»‡ä¸es6æ¨¡å—&quot;&gt;ä»£ç ç»„ç»‡ä¸ES6æ¨¡å—&lt;/h2&gt;
&lt;p&gt;å¯èƒ½ä¼šç”¨åˆ°çš„æ¨¡å—ç»“æ„&lt;/p&gt;
&lt;pre class=&quot;react&quot;&gt;
&lt;code&gt;src/
  index.js
  index.css
  App.js
  App.test.js
  App.css
  Button.js
  Button.test.js
  Button.css
  Table.js
  Table.test.js
  Table.css
  Search.js
  Search.test.js
  Search.css&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œå°†ç»„ä»¶å°è£…åˆ°å„è‡ªæ–‡ä»¶ä¸­ï¼Œä½†æ˜¯è¿™çœ‹èµ·æ¥ä¸æ˜¯å¾ˆå¥½ã€‚ä½ å¯ä»¥çœ‹åˆ°éå¸¸å¤šçš„å‘½åå†—ä½™ï¼Œå¹¶ä¸”åªæœ‰æ–‡ä»¶çš„æ‰©å±•æ–‡å­—ä¸åŒã€‚å¦å¤–ä¸€ç§æ¨¡å—çš„ç»“æ„å¤§æ¦‚ç±»ä¼¼ï¼š&lt;/p&gt;
&lt;pre class=&quot;react&quot;&gt;
&lt;code&gt;src/
  index.js
  index.css
  App/
    index.js
    test.js
    index.css
  Button/
    index.js
    test.js
    index.css
  Table/
    index.js
    test.js
    index.css
  Search/
    index.js
    test.js
    index.css&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™çœ‹èµ·æ¥æ¯”ä¹‹å‰æ¸…æ™°å¤šäº†ã€‚æ–‡ä»¶åä¸­çš„ index åç§°è¡¨ç¤ºä»–æ˜¯è¿™ä¸ªæ–‡ä»¶å¤¹çš„å…¥å£æ–‡ä»¶ã€‚è¿™ä»…ä»…æ˜¯ä¸€ä¸ªå‘½åå…±è¯†ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä½ ä¹ æƒ¯çš„å‘½åã€‚åœ¨è¿™ä¸ªæ¨¡å—ç»“æ„ä¸­ï¼Œä¸€ä¸ªç»„ä»¶è¢« JavaScript æ–‡ä»¶ä¸­ç»„ä»¶å£°æ˜ï¼Œæ ·å¼æ–‡ä»¶ï¼Œæµ‹è¯•å…±åŒå®šä¹‰ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–ä¸€ä¸ªæ­¥éª¤å¯èƒ½è¦å°† App ç»„ä»¶ä¸­çš„å˜é‡æŠ½å‡ºã€‚è¿™äº›å˜é‡ç”¨æ¥ç»„åˆå‡º Hacker News çš„ API URLã€‚&lt;/p&gt;
&lt;pre class=&quot;react&quot;&gt;
&lt;code&gt;src/
  index.js
  index.css
  constants/
    index.js
  components/
    App/
      index.js
      test.js
      index..css
    Button/
      index.js
      test.js
      index..css
    ...&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è‡ªç„¶è¿™äº›æ¨¡å—ä¼šåˆ†å‰²åˆ° src/constants/ å’Œ src/components/ ä¸­å»ã€‚ç°åœ¨ src/constants/index.js æ–‡ä»¶å¯èƒ½çœ‹èµ·æ¥ç±»ä¼¼ä¸‹é¢è¿™æ ·ï¼š&lt;/p&gt;
&lt;p&gt;Code Playground: src/constants/index.js&lt;/p&gt;
&lt;pre class=&quot;react&quot;&gt;
&lt;code&gt;export const DEFAULT_QUERY = 'redux';
export const DEFAULT_HPP = '100';
export const PATH_BASE = 'https://hn.algolia.com/api/v1';
export const PATH_SEARCH = '/search';
export const PARAM_SEARCH = 'query=';
export const PARAM_PAGE = 'page=';
export const PARAM_HPP = 'hitsPerPage=';&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;App/index.js æ–‡ä»¶å¯ä»¥å¯¼å…¥è¿™äº›å˜é‡ï¼Œä»¥ä¾¿ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;Code Playground: src/components/App/index.js&lt;/p&gt;
&lt;pre class=&quot;react&quot;&gt;
&lt;code&gt;import {
DEFAULT_QUERY,
DEFAULT_HPP,
PATH_BASE,
PATH_SEARCH,
PARAM_SEARCH,
PARAM_PAGE,
PARAM_HPP,
} from '../constants/index.js';&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å½“ä½ ä½¿ç”¨ index.js è¿™ä¸ªå‘½åå…±è¯†çš„æ—¶å€™ï¼Œä½ å¯ä»¥åœ¨ç›¸å¯¹è·¯å¾„ä¸­çœç•¥æ–‡ä»¶åã€‚&lt;/p&gt;
&lt;pre class=&quot;react&quot;&gt;
&lt;code&gt;Code Playground: src/components/App/index.js
import {
  DEFAULT_QUERY,
  DEFAULT_HPP,
  PATH_BASE,
  PATH_SEARCH,
  PARAM_SEARCH,
  PARAM_PAGE,
  PARAM_HPP,
} from '../constants';

...&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½†æ˜¯ index.js æ–‡ä»¶åç§°åé¢å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿè¿™ä¸ªçº¦å®šæ˜¯åœ¨ node.js ä¸–ç•Œé‡Œé¢è¢«å¼•å…¥çš„ã€‚index æ–‡ä»¶æ˜¯ä¸€ä¸ªæ¨¡å—çš„å…¥å£ã€‚å®ƒæè¿°äº†ä¸€ä¸ªæ¨¡å—çš„å…¬å…± APIã€‚å¤–éƒ¨æ¨¡å—åªå…è®¸é€šè¿‡ index.js æ–‡ä»¶å¯¼å…¥æ¨¡å—ä¸­çš„å…±äº«ä»£ç ã€‚è€ƒè™‘ç”¨ä¸‹é¢è™šæ„çš„æ¨¡å—ç»“æ„è¿›è¡Œæ¼”ç¤ºï¼š&lt;/p&gt;
&lt;pre class=&quot;react&quot;&gt;
&lt;code&gt;src/
  index.js
  App/
    index.js
  Buttons/
    index.js
    SubmitButton.js
    SaveButton.js
    CancelButton.js&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™ä¸ª Buttons/ æ–‡ä»¶å¤¹æœ‰å¤šä¸ªæŒ‰é’®ç»„ä»¶å®šä¹‰åœ¨äº†ä¸åŒçš„æ–‡ä»¶ä¸­ã€‚æ¯ä¸ªæ–‡ä»¶éƒ½ export default ç‰¹å®šçš„ç»„ä»¶ï¼Œä½¿ç»„ä»¶èƒ½å¤Ÿè¢« Buttons/index.js å¯¼å…¥ã€‚Buttons/index.js æ–‡ä»¶å¯¼å…¥æ‰€æœ‰ä¸åŒçš„è¡¨ç°çš„æŒ‰é’®ï¼Œå¹¶å°†ä»–ä»¬å¯¼å‡ºä½œä¸ºæ¨¡å—çš„å…¬å…± APIã€‚&lt;/p&gt;
&lt;p&gt;Code Playground: src/Buttons/index.js&lt;/p&gt;
&lt;pre class=&quot;react&quot;&gt;
&lt;code&gt;import SubmitButton from './SubmitButton';
import SaveButton from './SaveButton';
import CancelButton from './CancelButton';

export {
  SubmitButton,
  SaveButton,
  CancelButton,
};&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç°åœ¨ src/App/index.js å¯ä»¥é€šè¿‡å®šä½åœ¨ index.js æ–‡ä»¶æ¨¡å—çš„å…¬å…± API å¯¼å…¥è¿™äº›æŒ‰é’®ã€‚&lt;br/&gt;Code Playground: src/App/index.js&lt;/p&gt;
&lt;pre class=&quot;react&quot;&gt;
&lt;code&gt;import {
  SubmitButton,
  SaveButton,
  CancelButton
} from '../Buttons';&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å‚è€ƒé“¾æ¥ï¼š&lt;a href=&quot;https://leanpub.com/the-road-to-learn-react-chinese&quot; class=&quot;uri&quot;&gt;https://leanpub.com/the-road-to-learn-react-chinese&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 16 Oct 2018 06:16:00 +0000</pubDate>
<dc:creator>èµ–åŒå­¦</dc:creator>
<og:description>The Road to learn Reactä¹¦ç±å­¦ä¹ ç¬”è®°(ç¬¬ä¸‰ç« ) ===========</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/lbh2018/p/theroadtolearnreactpart_3.html</dc:identifier>
</item>
</channel>
</rss>