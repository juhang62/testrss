<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>åšå®¢å›­_é¦–é¡µ</title>
<link></link>
<description>ä»£ç æ”¹å˜ä¸–ç•Œ</description>
<item>
<title>JVM ç¬¬äº”ç¯‡ï¼šå‘½ä»¤è¡Œ JVM æ•…éšœå¤„ç†å·¥å…· - æå®¢æŒ–æ˜æœº</title>
<link>http://www.cnblogs.com/babycomeon/p/13806788.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/babycomeon/p/13806788.html</guid>
<description>&lt;p&gt;&lt;img src=&quot;https://cdn.geekdigging.com/java/java_header.jpg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;æœ¬æ–‡å†…å®¹è¿‡äºç¡¬æ ¸ï¼Œå»ºè®®æœ‰ Java ç›¸å…³ç»éªŒäººå£«é˜…è¯»ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;1-å¼•è¨€&quot;&gt;1. å¼•è¨€&lt;/h2&gt;
&lt;p&gt;è™½ç„¶æˆ‘ä»¬å‰é¢ä»‹ç»äº†å„ç§å›¾å½¢åŒ– JVM æ•…éšœå¤„ç†å·¥å…·ï¼Œä½†æ˜¯å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åœ¨å¤„ç†é—®é¢˜çš„æ—¶å€™å¹¶æ²¡æœ‰å›¾å½¢åŒ–çš„æ“ä½œç¯å¢ƒå¯ä»¥ä½¿ç”¨ï¼Œè¿™æ—¶å€™ï¼Œå°±éœ€è¦ç”¨åˆ° JDK ä¸ºæˆ‘ä»¬æä¾›çš„å‘½ä»¤è¡Œå·¥å…·äº†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;2-jps-è™šæ‹Ÿæœºè¿›ç¨‹çŠ¶å†µå·¥å…·&quot;&gt;2. jps: è™šæ‹Ÿæœºè¿›ç¨‹çŠ¶å†µå·¥å…·&lt;/h2&gt;
&lt;p&gt;jps ç»å¯¹æ˜¯ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„ JDK å‘½ä»¤è¡Œå·¥å…·ï¼Œå®ƒçš„ä½œç”¨æ˜¯å¯ä»¥åˆ—å‡ºæ­£åœ¨è¿è¡Œçš„è™šæ‹Ÿæœºè¿›ç¨‹ï¼Œå¹¶æ˜¾ç¤ºè™šæ‹Ÿæœºæ‰§è¡Œä¸»ç±»ï¼ˆ Main Class ï¼Œ main() å‡½æ•°æ‰€åœ¨çš„ç±»ï¼‰åç§°ä»¥åŠè¿™äº›è¿›ç¨‹çš„æœ¬åœ°è™šæ‹Ÿæœºå”¯ä¸€ ID ï¼ˆ LVMID ï¼Œ LocalVirtual Machine Identifier ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å‘½ä»¤æ ¼å¼ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;jps [options ] [ hostid ] 
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ‰§è¡Œæ ·ä¾‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;PS D:\&amp;gt; jps -l
5200 org.jetbrains.jps.cmdline.Launcher
16868 jdk.jcmd/sun.tools.jps.Jps
19368 org.jetbrains.idea.maven.server.RemoteMavenServer36
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°æˆ‘æœ¬æœºï¼Œæœ‰ä¸‰ä¸ª JVM è¿›ç¨‹ï¼Œ 5200 å’Œ 19368 æ˜¯è½¯ä»¶ IDEA çš„è¿›ç¨‹ï¼Œä»ç±»åä¸Šæ˜¯å¯ä»¥çœ‹å‡ºæ¥çš„ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯ jps æœ¬èº«çš„è¿™ä¸ª JVM è¿›ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;åˆ—ä¸¾ä¸€äº›å¸¸ç”¨å‚æ•°ï¼š&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å¯é€‰é¡¹&lt;/th&gt;
&lt;th&gt;ä½œç”¨&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody readability=&quot;4&quot;&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;-l&lt;/td&gt;
&lt;td&gt;è¾“å‡ºå®Œå…¨çš„åŒ…åï¼Œåº”ç”¨ä¸»ç±»åï¼Œjarçš„å®Œå…¨è·¯å¾„åã€‚&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td&gt;-q&lt;/td&gt;
&lt;td&gt;ä»…è¾“å‡º VM æ ‡è¯†ç¬¦ï¼Œä¸åŒ…æ‹¬ classname , jar name , arguments in main method ã€‚&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;-m&lt;/td&gt;
&lt;td&gt;è¾“å‡º main method çš„å‚æ•°ã€‚&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;-v&lt;/td&gt;
&lt;td&gt;è¾“å‡º JVM å‚æ•°ã€‚&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h2 id=&quot;3-jstat-è™šæ‹Ÿæœºç»Ÿè®¡ä¿¡æ¯ç›‘è§†å·¥å…·&quot;&gt;3. jstat: è™šæ‹Ÿæœºç»Ÿè®¡ä¿¡æ¯ç›‘è§†å·¥å…·&lt;/h2&gt;
&lt;p&gt;jstatï¼ˆJVM Statistics Monitoring Toolï¼‰ æ˜¯ç”¨äºç›‘è§†è™šæ‹Ÿæœºå„ç§è¿è¡ŒçŠ¶æ€ä¿¡æ¯çš„å‘½ä»¤è¡Œå·¥å…·ã€‚&lt;/p&gt;
&lt;p&gt;ä½äº JDK çš„ bin ç›®å½•ä¸‹ï¼Œä¸»è¦åˆ©ç”¨ JVM å†…å»ºçš„æŒ‡ä»¤å¯¹ Java åº”ç”¨ç¨‹åºçš„èµ„æºå’Œæ€§èƒ½è¿›è¡Œå®æ—¶çš„å‘½ä»¤è¡Œçš„ç›‘æ§ï¼ŒåŒ…æ‹¬äº†å¯¹ Heap size å’Œåƒåœ¾å›æ”¶çŠ¶å†µçš„ç›‘æ§ã€‚&lt;/p&gt;
&lt;p&gt;jstat å·¥å…·ç‰¹åˆ«å¼ºå¤§ï¼Œæœ‰ä¼—å¤šçš„å¯é€‰é¡¹ï¼Œè¯¦ç»†æŸ¥çœ‹å †å†…å„ä¸ªéƒ¨åˆ†çš„ä½¿ç”¨é‡ï¼Œä»¥åŠåŠ è½½ç±»çš„æ•°é‡ã€‚ä½¿ç”¨æ—¶ï¼Œéœ€åŠ ä¸ŠæŸ¥çœ‹è¿›ç¨‹çš„è¿›ç¨‹ id ï¼Œå’Œæ‰€é€‰å‚æ•°ã€‚å‚è€ƒæ ¼å¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;jstat -options 
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯ä»¥åˆ—å‡ºå½“å‰ JVM ç‰ˆæœ¬æ”¯æŒçš„é€‰é¡¹ï¼Œå¸¸è§çš„æœ‰:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;-class (ç±»åŠ è½½å™¨)&lt;/li&gt;
&lt;li&gt;-compiler (JIT)&lt;/li&gt;
&lt;li&gt;-gc (GCå †çŠ¶æ€)&lt;/li&gt;
&lt;li&gt;-gccapacity (å„åŒºå¤§å°)&lt;/li&gt;
&lt;li&gt;-gccause (æœ€è¿‘ä¸€æ¬¡GCç»Ÿè®¡å’ŒåŸå› )&lt;/li&gt;
&lt;li&gt;-gcnew (æ–°åŒºç»Ÿè®¡)&lt;/li&gt;
&lt;li&gt;-gcnewcapacity (æ–°åŒºå¤§å°)&lt;/li&gt;
&lt;li&gt;-gcold (è€åŒºç»Ÿè®¡)&lt;/li&gt;
&lt;li&gt;-gcoldcapacity (è€åŒºå¤§å°)&lt;/li&gt;
&lt;li&gt;-gcpermcapacity (æ°¸ä¹…åŒºå¤§å°)&lt;/li&gt;
&lt;li&gt;-gcutil (GCç»Ÿè®¡æ±‡æ€»)&lt;/li&gt;
&lt;li&gt;-printcompilation (HotSpotç¼–è¯‘ç»Ÿè®¡)&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æ¯”å¦‚æˆ‘æƒ³æŸ¥çœ‹ä¸€ä¸‹æˆ‘æœ¬åœ°çš„ IDEA è¿›ç¨‹çš„ GC æƒ…å†µæ±‡æ€»ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;PS D:\&amp;gt; jstat -gcutil 5200
  S0     S1     E      O      M     CCS    YGC     YGCT    FGC    FGCT    CGC    CGCT     GCT
  0.00  43.29  20.83   0.08  97.05  93.67      1    0.003     0    0.000     -        -    0.003
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æŸ¥è¯¢ç»“æœè¡¨æ˜ï¼š&lt;/p&gt;
&lt;p&gt;æˆ‘çš„ IDEA çš„æ–°ç”Ÿä»£ Eden åŒºï¼ˆ E ï¼Œè¡¨ç¤º Eden ï¼‰ä½¿ç”¨äº† 20.83% çš„ç©ºé—´ï¼Œ 2 ä¸ª Survivor åŒºï¼ˆ S0 ã€ S1 ï¼Œè¡¨ç¤º Survivor0 ã€ Survivor1 ï¼‰ï¼ŒS0 æ˜¯ç©ºçš„ï¼Œè€Œ S1 ä½¿ç”¨äº† 43.29% ï¼Œè€å¹´ä»£ï¼ˆ O ï¼Œè¡¨ç¤º Old ï¼‰ä½¿ç”¨äº† 0.08% çš„ç©ºé—´ï¼Œå…ƒç©ºé—´ï¼ˆ M ï¼Œ è¡¨ç¤º Metaspace ï¼‰ä½¿ç”¨äº† 97.05% çš„ç©ºé—´ã€‚&lt;/p&gt;
&lt;p&gt;ç¨‹åºè¿è¡Œä»¥æ¥å…±å‘ç”Ÿ Minor GC ï¼ˆ YGC ï¼Œè¡¨ç¤º Young GC ï¼‰ 1 æ¬¡ï¼Œæ€»è€—æ—¶ 0.003 ç§’ï¼Œå‘ç”Ÿ Full GC ï¼ˆ FGC ï¼Œè¡¨ç¤º Full GC ï¼‰0 æ¬¡ï¼Œæ€»è€—æ—¶ï¼ˆ FGCT ï¼Œè¡¨ç¤º Full GC Time ï¼‰ä¸º 0 ç§’ï¼Œæ‰€æœ‰ GC æ€»è€—æ—¶ï¼ˆ GCT ï¼Œè¡¨ç¤º GC Time ï¼‰ä¸º 0.003 ç§’ã€‚&lt;/p&gt;
&lt;h2 id=&quot;4-jinfo-java-é…ç½®ä¿¡æ¯å·¥å…·&quot;&gt;4. jinfo: Java é…ç½®ä¿¡æ¯å·¥å…·&lt;/h2&gt;
&lt;p&gt;jinfoï¼ˆConfiguration Info for Javaï¼‰å¯ä»¥ç”¨æ¥æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„ Java åº”ç”¨ç¨‹åºçš„æ‰©å±•å‚æ•°ï¼ŒåŒ…æ‹¬ Java System å±æ€§å’Œ JVM å‘½ä»¤è¡Œå‚æ•°ï¼›ä¹Ÿå¯ä»¥åŠ¨æ€çš„ä¿®æ”¹æ­£åœ¨è¿è¡Œçš„ JVM ä¸€äº›å‚æ•°ã€‚å½“ç³»ç»Ÿå´©æºƒæ—¶ï¼Œ jinfo å¯ä»¥ä» core æ–‡ä»¶é‡Œé¢çŸ¥é“å´©æºƒçš„ Java åº”ç”¨ç¨‹åºçš„é…ç½®ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ jps å‘½ä»¤çš„ -v å‚æ•°å¯ä»¥æŸ¥çœ‹è™šæ‹Ÿæœºå¯åŠ¨æ—¶æ˜¾å¼æŒ‡å®šçš„å‚æ•°åˆ—è¡¨ï¼Œä½†å¦‚æœæƒ³çŸ¥é“æœªè¢«æ˜¾å¼æŒ‡å®šçš„å‚æ•°çš„ç³»ç»Ÿé»˜è®¤å€¼ï¼Œé™¤äº†å»æ‰¾èµ„æ–™å¤–ï¼Œå°±åªèƒ½ä½¿ç”¨ jinfo çš„ -flag é€‰é¡¹è¿›è¡ŒæŸ¥è¯¢äº†ã€‚&lt;/p&gt;
&lt;p&gt;jinfo å‘½ä»¤æ ¼å¼ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;jinfo [option] pid
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æŸ¥è¯¢æ ·ä¾‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;PS D:\&amp;gt; jinfo -flags 5200
VM Flags:
-XX:CICompilerCount=4 -XX:InitialHeapSize=268435456 -XX:MaxHeapSize=734003200 -XX:MaxNewSize=244318208 -XX:MinHeapDeltaBytes=524288 -XX:NewSize=89128960 -XX:OldSize=179306496 -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseFastUnorderedTimeStamps -XX:-UseLargePagesIndividualAllocation -XX:+UseParallelGC
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;5-jmap-java-å†…å­˜æ˜ åƒå·¥å…·&quot;&gt;5. jmap: Java å†…å­˜æ˜ åƒå·¥å…·&lt;/h2&gt;
&lt;p&gt;jmapï¼ˆMemory Map for Javaï¼‰å‘½ä»¤ç”¨äºç”Ÿæˆå †è½¬å‚¨å¿«ç…§ï¼ˆä¸€èˆ¬ç§°ä¸º heapdump æˆ– dump æ–‡ä»¶ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å®ƒä¹Ÿå¯ä»¥æŸ¥çœ‹å †å†…å¯¹è±¡ç¤ºä¾‹çš„ç»Ÿè®¡ä¿¡æ¯ã€æŸ¥çœ‹ ClassLoader çš„ä¿¡æ¯ä»¥åŠ finalizer é˜Ÿåˆ—ã€‚&lt;/p&gt;
&lt;p&gt;jmap å‘½ä»¤æ ¼å¼:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;jinfo [option] pid
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;option å¯é€‰çš„å‚æ•°ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;no optionï¼š æŸ¥çœ‹è¿›ç¨‹çš„å†…å­˜æ˜ åƒä¿¡æ¯,ç±»ä¼¼ Solaris pmap å‘½ä»¤ã€‚&lt;/li&gt;
&lt;li&gt;heapï¼š æ˜¾ç¤º Java å †è¯¦ç»†ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;histo[:live]ï¼š æ˜¾ç¤ºå †ä¸­å¯¹è±¡çš„ç»Ÿè®¡ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;clstatsï¼šæ‰“å°ç±»åŠ è½½å™¨ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;finalizerinfoï¼š æ˜¾ç¤ºåœ¨ F-Queue é˜Ÿåˆ—ç­‰å¾… Finalizer çº¿ç¨‹æ‰§è¡Œ finalizer æ–¹æ³•çš„å¯¹è±¡&lt;/li&gt;
&lt;li&gt;dump:ï¼šç”Ÿæˆå †è½¬å‚¨å¿«ç…§&lt;/li&gt;
&lt;li&gt;Fï¼š å½“ -dump æ²¡æœ‰å“åº”æ—¶ï¼Œä½¿ç”¨ -dump æˆ–è€… -histo å‚æ•°. åœ¨è¿™ä¸ªæ¨¡å¼ä¸‹, live å­å‚æ•°æ— æ•ˆ.&lt;/li&gt;
&lt;li&gt;helpï¼šæ‰“å°å¸®åŠ©ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;Jï¼šæŒ‡å®šä¼ é€’ç»™è¿è¡Œ jmap çš„ JVM çš„å‚æ•°&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;PS D:\&amp;gt; jmap -dump:format=b,file=idea.bin 5200
Dumping heap to D:\idea.bin ...
Heap dump file created
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;6-jhat-è™šæ‹Ÿæœºå †è½¬å‚¨å¿«ç…§åˆ†æå·¥å…·&quot;&gt;6. jhat: è™šæ‹Ÿæœºå †è½¬å‚¨å¿«ç…§åˆ†æå·¥å…·&lt;/h2&gt;
&lt;p&gt;JDK æä¾›jhatï¼ˆJVM Heap Analysis Toolï¼‰å‘½ä»¤ä¸ jmap æ­é…ä½¿ç”¨ï¼Œæ¥åˆ†æ jmap ç”Ÿæˆçš„å †è½¬å‚¨å¿«ç…§ã€‚ jhat å†…ç½®äº†ä¸€ä¸ªå¾®å‹çš„ HTTP/Web æœåŠ¡å™¨ï¼Œç”Ÿæˆå †è½¬å‚¨å¿«ç…§çš„åˆ†æç»“æœåï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨å‘½ä»¤ä¸ºï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;PS D:\&amp;gt; jhat idea.bin
Reading from idea.bin...
Dump file created Thu Oct 08 18:54:37 CST 2020
Snapshot read, resolving...
Resolving 147921 objects...
Chasing references, expect 29 dots.............................
Eliminating duplicate references.............................
Snapshot resolved.
Started HTTP server on port 7000
Server is ready.
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç„¶ååœ¨æµè§ˆå™¨ä¸Šè®¿é—®åœ°å€ &lt;a href=&quot;http://localhost:7000/&quot;&gt;http://localhost:7000/&lt;/a&gt; å¯ä»¥çœ‹åˆ°åˆ†æç»“æœï¼Œä¸è¿‡è¿™ä¸ªåˆ†æå·¥å…·ä¸€èˆ¬æ²¡ä»€ä¹ˆäººä¼šç”¨ï¼Œå› ä¸ºåŠŸèƒ½å¤ªè¿‡ç®€é™‹äº†ã€‚&lt;/p&gt;
&lt;p&gt;ç›¸æ¯”è¾ƒè€Œè¨€ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ VisualVM æˆ–è€… Eclipse Memory Analyzer å†æˆ–è€… IBM HeapAnalyzer ç­‰å·¥å…·åˆ†æåˆšæ‰ jmap äº§ç”Ÿçš„ dump æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;h2 id=&quot;7-jstack-java-å †æ ˆè·Ÿè¸ªå·¥å…·&quot;&gt;7. jstack: Java å †æ ˆè·Ÿè¸ªå·¥å…·&lt;/h2&gt;
&lt;p&gt;jstackï¼ˆStack Trace for Javaï¼‰å‘½ä»¤ç”¨äºç”Ÿæˆè™šæ‹Ÿæœºå½“å‰æ—¶åˆ»çš„çº¿ç¨‹å¿«ç…§ï¼ˆä¸€èˆ¬ç§°ä¸º threaddump æˆ–è€… javacore æ–‡ä»¶ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;çº¿ç¨‹å¿«ç…§å°±æ˜¯å½“å‰è™šæ‹Ÿæœºå†…æ¯ä¸€æ¡çº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„æ–¹æ³•å †æ ˆçš„é›†åˆï¼Œç”Ÿæˆçº¿ç¨‹å¿«ç…§çš„ç›®çš„é€šå¸¸æ˜¯å®šä½çº¿ç¨‹å‡ºç°é•¿æ—¶é—´åœé¡¿çš„åŸå› ï¼Œå¦‚çº¿ç¨‹é—´æ­»é”ã€æ­»å¾ªç¯ã€è¯·æ±‚å¤–éƒ¨èµ„æºå¯¼è‡´çš„é•¿æ—¶é—´æŒ‚èµ·ç­‰ï¼Œéƒ½æ˜¯å¯¼è‡´çº¿ç¨‹é•¿æ—¶é—´åœé¡¿çš„å¸¸è§åŸå› ã€‚&lt;/p&gt;
&lt;p&gt;jstack å‘½ä»¤æ ¼å¼ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;jstack [option] pid
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;option çš„å¯é€‰å‚æ•°ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;-F: å½“æ­£å¸¸è¾“å‡ºçš„è¯·æ±‚ä¸è¢«å“åº”æ—¶ï¼Œå¼ºåˆ¶è¾“å‡ºçº¿ç¨‹å †æ ˆã€‚&lt;/li&gt;
&lt;li&gt;-l: é™¤å †æ ˆå¤–ï¼Œæ˜¾ç¤ºå…³äºé”çš„é™„åŠ ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;-m: å¦‚æœè°ƒç”¨åˆ°æœ¬åœ°æ–¹æ³•çš„è¯ï¼Œå¯ä»¥æ˜¾ç¤º C/C++ çš„å †æ ˆã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;PS D:\&amp;gt; jstack -l 5200
2020-10-08 19:03:39
Full thread dump Java HotSpot(TM) 64-Bit Server VM (25.221-b11 mixed mode):

&quot;DestroyJavaVM&quot; #13 prio=5 os_prio=0 tid=0x00000000037b8000 nid=0x3f20 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

   Locked ownable synchronizers:
        - None
&lt;/code&gt;
&lt;/pre&gt;</description>
<pubDate>Tue, 13 Oct 2020 00:55:00 +0000</pubDate>
<dc:creator>æå®¢æŒ–æ˜æœº</dc:creator>
<og:description>æœ¬æ–‡å†…å®¹è¿‡äºç¡¬æ ¸ï¼Œå»ºè®®æœ‰ Java ç›¸å…³ç»éªŒäººå£«é˜…è¯»ã€‚ 1. å¼•è¨€ è™½ç„¶æˆ‘ä»¬å‰é¢ä»‹ç»äº†å„ç§å›¾å½¢åŒ– JVM æ•…éšœå¤„ç†å·¥å…·ï¼Œä½†æ˜¯å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åœ¨å¤„ç†é—®é¢˜çš„æ—¶å€™å¹¶æ²¡æœ‰å›¾å½¢åŒ–çš„æ“ä½œç¯å¢ƒå¯ä»¥ä½¿ç”¨ï¼Œè¿™æ—¶å€™ï¼Œå°±éœ€</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/babycomeon/p/13806788.html</dc:identifier>
</item>
<item>
<title>.NET Standard æ¥æ—¥è‹¦çŸ­å»æ—¥é•¿ - ç²¾è‡´ç å†œ</title>
<link>http://www.cnblogs.com/willick/p/13806646.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/willick/p/13806646.html</guid>
<description>&lt;blockquote readability=&quot;3.7671232876712&quot;&gt;
&lt;p&gt;ä½œè€…ï¼šRichard&lt;br/&gt;ç¿»è¯‘ï¼šç²¾è‡´ç å†œ-ç‹äº®&lt;br/&gt;åŸæ–‡ï¼š&lt;a href=&quot;http://dwz.win/Q4h&quot;&gt;http://dwz.win/Q4h&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è‡ªä» &lt;a href=&quot;https://devblogs.microsoft.com/dotnet/introducing-net-5/&quot;&gt;.NET 5 å®£è´¯&lt;/a&gt;ä»¥æ¥ï¼Œå¾ˆå¤šäººéƒ½åœ¨é—®è¿™å¯¹ .NET Standard æ„å‘³ç€ä»€ä¹ˆï¼Œå®ƒæ˜¯å¦ä»ç„¶é‡è¦ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†è§£é‡Š .NET 5 æ˜¯å¦‚ä½•æ”¹è¿›ä»£ç å…±ç”¨å¹¶å–ä»£ .NET Standard çš„ï¼Œæˆ‘è¿˜å°†ä»‹ç»ä»€ä¹ˆæƒ…å†µä¸‹ä½ ä»ç„¶éœ€è¦ .NET Standardã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ¦‚è¦&quot;&gt;æ¦‚è¦&lt;/h2&gt;
&lt;p&gt;.NET 5 å°†æ˜¯ä¸€ä¸ªå…·æœ‰ç»Ÿä¸€åŠŸèƒ½å’Œ API çš„å•ä¸€äº§å“ï¼Œå¯ç”¨äº Windows æ¡Œé¢åº”ç”¨ç¨‹åºã€è·¨å¹³å°ç§»åŠ¨åº”ç”¨ç¨‹åºã€æ§åˆ¶å°åº”ç”¨ç¨‹åºã€äº‘æœåŠ¡å’Œç½‘ç«™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/191097/202010/191097-20201013083252194-349045795.gif&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ›´å¥½åœ°è¯´æ˜è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬æ›´æ–°äº†è¿™ç¯‡&lt;sup&gt;[1]&lt;/sup&gt;å…³äº TFM (Target Framework Names) ä»‹ç»çš„æ–‡ç« ï¼ˆè¯‘æ–‡ï¼š&lt;a href=&quot;https://mp.weixin.qq.com/s/hVjfxaJkULZDFlmlofADQA&quot;&gt;.NET 5 ä¸­ Target Framework è¯¦è§£&lt;/a&gt;ï¼‰ï¼Œç°æ”¯æŒçš„ TFM å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;.net5.0&lt;/code&gt;ï¼Œè¡¨ç¤ºä»£ç å¯åœ¨ä»»æ„å¹³å°è¿è¡Œï¼Œå®ƒåˆå¹¶å¹¶æ›¿æ¢äº† &lt;code&gt;netcoreapp&lt;/code&gt; å’Œ &lt;code&gt;netstandard&lt;/code&gt; è¿™ä¸¤ä¸ªåç§°ã€‚è¿™ä¸ª TFM é€šå¸¸åªåŒ…æ‹¬è·¨å¹³å°çš„æŠ€æœ¯ï¼ˆé™¤äº†ä¸€äº›ä¸ºäº†æ»¡è¶³å®ç”¨æ€§è€Œä½œå‡ºè®©æ­¥çš„ APIï¼Œå°±åƒæˆ‘ä»¬åœ¨ .NET Standard ä¸­æ‰€åšçš„é‚£æ ·ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;net5.0-windows&lt;/code&gt;ï¼ˆè¿˜æœ‰åé¢ä¼šå¢åŠ çš„&lt;code&gt;net6.0-android&lt;/code&gt; å’Œ &lt;code&gt;net6.0-ios&lt;/code&gt;ï¼‰ï¼Œè¿™äº› TFM è¡¨ç¤º .NET 5 ç‰¹å®šäºæ“ä½œç³»ç»Ÿçš„é£æ ¼ï¼ŒåŒ…å« &lt;code&gt;net5.0&lt;/code&gt; å’Œç‰¹å®šäºæ“ä½œç³»ç»Ÿçš„åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æˆ‘ä»¬&lt;strong&gt;ä¸ä¼šå†å‘å¸ƒ .NET Standard çš„æ–°ç‰ˆæœ¬&lt;/strong&gt;ï¼Œä½†æ˜¯ .NET 5 å’Œæ‰€æœ‰æœªæ¥çš„ç‰ˆæœ¬å°†ç»§ç»­æ”¯æŒ .NET Standard 2.1 å’Œæ›´æ—©çš„ç‰ˆæœ¬ã€‚ä½ åº”è¯¥å°† &lt;code&gt;net5.0&lt;/code&gt;ï¼ˆå’Œæœªæ¥çš„ç‰ˆæœ¬ï¼‰è§†ä¸ºå…±äº«ä»£ç çš„åŸºç¡€ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äº &lt;code&gt;net5.0&lt;/code&gt; æ˜¯æ‰€æœ‰è¿™äº›æ–° TFM çš„å…±ç”¨çš„åŸºç¡€ï¼Œè¿™æ„å‘³ç€è¿è¡Œæ—¶ã€åº“å’Œæ–°çš„è¯­è¨€ç‰¹æ€§éƒ½ä¼šå›´ç»•è¿™ä¸ªç‰ˆæœ¬å·è¿›è¡Œåè°ƒã€‚ä¾‹å¦‚ï¼Œä¸ºäº†ä½¿ç”¨ C# 9ï¼Œä½ éœ€è¦ä½¿ç”¨ &lt;code&gt;net5.0&lt;/code&gt; æˆ– &lt;code&gt;net5.0-windows&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å¦‚ä½•é€‰æ‹©-target&quot;&gt;å¦‚ä½•é€‰æ‹© Target&lt;/h2&gt;
&lt;p&gt;.NET 5 å’Œæ‰€æœ‰æœªæ¥çš„ç‰ˆæœ¬å°†ç»§ç»­æ”¯æŒ .NET Standard 2.1 å’Œæ›´æ—©çš„ç‰ˆæœ¬ï¼Œä» .NET Standard é‡æ–° Target åˆ° .NET 5 çš„å”¯ä¸€åŸå› æ˜¯ä¸ºäº†è·å¾—æ›´å¤šè¿è¡Œæ—¶ç‰¹æ€§ã€è¯­è¨€ç‰¹æ€§æˆ– API æ”¯æŒã€‚æ‰€ä»¥ï¼Œä½ å¯ä»¥æŠŠ .NET 5 æƒ³è±¡æˆ .NET Standard çš„ vNextã€‚&lt;/p&gt;
&lt;p&gt;é‚£æ–°ä»£ç å‘¢ï¼Ÿè¯¥ä» .NET Standard 2.0 å¼€å§‹è¿˜æ˜¯ç›´æ¥ä» .NET 5 å¼€å§‹ï¼Ÿè¿™å¾—è§†æƒ…å†µè€Œå®šã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;åº”ç”¨ç¨‹åºç»„ä»¶&lt;/strong&gt;ï¼Œå¦‚æœä½ è¦å°†ä½ çš„åº”ç”¨ç¨‹åºä»¥ç±»åº“çš„å½¢å¼åˆ†è§£æˆå¤šä¸ªç»„ä»¶ï¼Œæˆ‘å»ºè®®å°† &lt;code&gt;netX.Y&lt;/code&gt; ä½œä¸º TFMï¼Œ&lt;code&gt;netX.Y&lt;/code&gt; ä¸­çš„ &lt;code&gt;X.Y&lt;/code&gt; æ˜¯åº”ç”¨ç¨‹åºï¼ˆæˆ–å¤šä¸ªåº”ç”¨ç¨‹åºï¼‰çš„ .NET æœ€ä½ç‰ˆæœ¬å·ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œä½ å¯èƒ½å¸Œæœ›æ‰€æœ‰ç»„æˆä½ çš„åº”ç”¨ç¨‹åºçš„ Project éƒ½ä½¿ç”¨ç›¸åŒçš„ .NET ç‰ˆæœ¬ï¼Œå› ä¸ºè¿™æ ·å¯ä»¥ä¿è¯å„å¤„çš„ä»£ç éƒ½å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ BCL ç‰¹æ€§ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯é‡ç”¨åº“&lt;/strong&gt;ï¼Œå¦‚æœä½ æ­£åœ¨æ„å»ºè®¡åˆ’åœ¨ NuGet ä¸Šå‘å¸ƒçš„å¯é‡ç”¨åº“ï¼Œä½ å°†éœ€è¦è€ƒè™‘é€‚ç”¨èŒƒå›´å’Œå¯ç”¨æ–°ç‰¹æ€§ä¹‹é—´çš„æƒè¡¡ã€‚.NET Standard 2.0 æ˜¯ .NET Framework æ”¯æŒçš„æœ€é«˜ .NET Standard ç‰ˆæœ¬ï¼Œæ‰€ä»¥å®ƒå¯ä»¥æ»¡è¶³ä½ çš„å¤§éƒ¨åˆ†ä½¿ç”¨åœºæ™¯ã€‚æˆ‘ä»¬é€šå¸¸å»ºè®®ä¸è¦å°† Target é”å®šåœ¨ .NET Standard 1.x ä¸Šï¼Œå› ä¸ºä¸å€¼å¾—å†ä¸ºæ­¤å¢æ·»ä¸å¿…è¦çš„éº»çƒ¦ã€‚å¦‚æœä½ ä¸éœ€è¦æ”¯æŒ .NET Framworkï¼Œé‚£ä¹ˆä½ å¯ä»¥é€‰æ‹© .NET Standard 2.1 æˆ–è€… .NET 5ï¼Œå¤§å¤šæ•°ä»£ç å¯èƒ½å¯ä»¥è·³è¿‡ .NET Standard 2.1 ç›´æ¥è½¬åˆ° .NET 5ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;é‚£ä¹ˆï¼Œä½ åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿæˆ‘çš„å»ºè®®æ˜¯ï¼Œå·²è¢«å¹¿æ³›ä½¿ç”¨çš„åº“å¯èƒ½éœ€è¦åŒæ—¶æä¾› .NET Standard 2.0 å’Œ .NET 5 æ”¯æŒã€‚æ”¯æŒ .NET Standard 2.0 å°†ä½¿ä½ çš„åº“é€‚ç”¨æ€§æ›´å¹¿ï¼Œè€Œæ”¯æŒ .NET 5 åˆ™ç¡®ä¿ä½ å¯ä»¥ä¸ºå·²ç»åœ¨ .NET 5 ä¸Šçš„ç”¨æˆ·ä½¿ç”¨æœ€æ–°çš„å¹³å°ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;p&gt;å‡ å¹´åï¼Œå¯é‡ç”¨åº“çš„é€‰æ‹©å°†åªæ¶‰åŠ &lt;code&gt;netX.Y&lt;/code&gt; ç‰ˆæœ¬ï¼Œè¿™åŸºæœ¬ä¸Šæ˜¯æ„å»º .NET åº“çš„ä¸€æƒ¯åšæ³•â€”â€”ä½ é€šå¸¸è¦æ”¯æŒä¸€æ®µæ—¶é—´è¾ƒè€çš„ç‰ˆæœ¬ï¼Œä»¥ç¡®ä¿æ²¡æœ‰å‡çº§æœ€æ–° .NET ç‰ˆæœ¬çš„ç”¨æˆ·ä¾ç„¶å¯ä»¥ä½¿ç”¨ä½ çš„åº“ã€‚&lt;/p&gt;
&lt;p&gt;æ€»ç»“ä¸€ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;åœ¨ .NET Framework å’Œæ‰€æœ‰å…¶ä»–å¹³å°ä¹‹é—´å…±äº«ä»£ç ï¼Œä½¿ç”¨ &lt;code&gt;netstandard2.0&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ Monoã€Xamarin å’Œ .NET Core 3.x ä¹‹é—´å…±äº«ä»£ç ï¼Œä½¿ç”¨ &lt;code&gt;netstandard2.1&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¾€åçš„å…±äº«ä»£ç ï¼Œä½¿ç”¨ &lt;code&gt;net5.0&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;net-5-å¦‚ä½•è§£å†³-net-standard-å­˜åœ¨çš„é—®é¢˜&quot;&gt;.NET 5 å¦‚ä½•è§£å†³ .NET Standard å­˜åœ¨çš„é—®é¢˜&lt;/h2&gt;
&lt;p&gt;.NET Standard ä½¿å¾—åˆ›å»ºé€‚ç”¨äºæ‰€æœ‰ .NET å¹³å°çš„åº“å˜å¾—æ›´åŠ å®¹æ˜“ï¼Œä½†æ˜¯ .NET Standard ä»ç„¶å­˜åœ¨ä¸‰ä¸ªé—®é¢˜ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;å®ƒçš„ç‰ˆæœ¬æ›´æ–°å¾ˆæ…¢&lt;sup&gt;[2]&lt;/sup&gt;ï¼Œè¿™æ„å‘³ç€ä½ ä¸èƒ½è½»æ¾åœ°ä½¿ç”¨æœ€æ–°çš„ç‰¹æ€§ã€‚&lt;/li&gt;
&lt;li&gt;å®ƒéœ€è¦ä¸€ä¸ªè§£ç ç¯&lt;sup&gt;[3]&lt;/sup&gt;æ¥å°†ç‰ˆæœ¬æ˜ å°„åˆ° .NET å®ç°ã€‚&lt;/li&gt;
&lt;li&gt;å®ƒå…¬å¼€äº†ç‰¹å®šäºå¹³å°çš„ç‰¹æ€§&lt;sup&gt;[4]&lt;/sup&gt;ï¼Œè¿™æ„å‘³ç€ä½ ä¸èƒ½é™æ€åœ°éªŒè¯ä»£ç æ˜¯å¦çœŸæ­£å¯ç§»æ¤ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;è®©æˆ‘ä»¬çœ‹çœ‹ .NET 5 å°†å¦‚ä½•è§£å†³è¿™ä¸‰ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&quot;é—®é¢˜-1ï¼šnet-standard-ç‰ˆæœ¬æ›´æ–°æ…¢&quot;&gt;é—®é¢˜ 1ï¼š.NET Standard ç‰ˆæœ¬æ›´æ–°æ…¢&lt;/h2&gt;
&lt;p&gt;åœ¨è®¾è®¡ .NET Standard&lt;sup&gt;[5]&lt;/sup&gt; æ—¶ï¼Œ.NET å¹³å°è¿˜æ²¡æœ‰åœ¨å®ç°å±‚æ¬¡ä¸Šèåˆï¼Œè¿™ä½¿å¾—ç¼–å†™éœ€è¦åœ¨ä¸åŒç¯å¢ƒä¸‹å·¥ä½œçš„ä»£ç å˜å¾—å›°éš¾ï¼Œå› ä¸ºä¸åŒçš„å·¥ä½œä»£ç ä½¿ç”¨çš„æ˜¯ä¸åŒçš„ .NET å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;.NET Standard çš„ç›®æ ‡æ˜¯ç»Ÿä¸€åŸºç¡€ç±»åº“(BCL)çš„ç‰¹æ€§é›†ï¼Œè¿™æ ·ä½ å°±å¯ä»¥ç¼–å†™ä¸€ä¸ªå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è¿è¡Œçš„å•ä¸€åº“ã€‚è¿™ä¸ºæˆ‘ä»¬æä¾›äº†å¾ˆå¥½çš„æœåŠ¡ï¼šå‰ 1000 ä¸ªè½¯ä»¶åŒ…ä¸­æœ‰è¶…è¿‡ 77% æ”¯æŒ .NET Standardã€‚å¦‚æœæˆ‘ä»¬çœ‹çœ‹ NuGet.org ä¸Šæ‰€æœ‰åœ¨è¿‡å» 6 ä¸ªæœˆé‡Œæ›´æ–°è¿‡çš„è½¯ä»¶åŒ…ï¼Œé‡‡ç”¨ç‡æ˜¯ 58%ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/191097/202010/191097-20201013083339856-1706372255.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯åªæ ‡å‡†åŒ– API å°±ä¼šäº§ç”Ÿé¢å¤–çš„ä»˜å‡ºï¼Œå®ƒè¦æ±‚æˆ‘ä»¬åœ¨æ·»åŠ æ–° API æ—¶è¿›è¡Œåè°ƒâ€”â€”è¿™ä¸€ç›´åœ¨å‘ç”Ÿã€‚.NET å¼€æºç¤¾åŒºï¼ˆåŒ…æ‹¬.NET å›¢é˜Ÿï¼‰é€šè¿‡æä¾›æ–°çš„è¯­è¨€ç‰¹æ€§ã€å¯ç”¨æ€§æ”¹è¿›ã€æ–°çš„äº¤å‰(cross-cutting)åŠŸèƒ½ï¼ˆå¦‚ &lt;code&gt;Span&amp;lt;T&amp;gt;&lt;/code&gt;ï¼‰æˆ–æ”¯æŒæ–°çš„æ•°æ®æ ¼å¼æˆ–ç½‘ç»œåè®®ï¼Œä¸æ–­å¯¹ BCL è¿›è¡Œåˆ›æ–°ã€‚&lt;/p&gt;
&lt;p&gt;è€Œæˆ‘ä»¬è™½ç„¶å¯ä»¥ä»¥ NuGet åŒ…çš„å½¢å¼æä¾›æ–°çš„ç±»å‹ï¼Œä½†ä¸èƒ½ä»¥è¿™ç§æ–¹å¼åœ¨ç°æœ‰ç±»å‹ä¸Šæä¾›æ–°çš„ APIã€‚æ‰€ä»¥ï¼Œä»ä¸€èˆ¬æ„ä¹‰ä¸Šè®²ï¼ŒBCL çš„åˆ›æ–°éœ€è¦å‘å¸ƒæ–°ç‰ˆæœ¬çš„ .NET æ ‡å‡†ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ .NET Standard 2.0 ä¹‹å‰ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªçœŸæ­£çš„é—®é¢˜ï¼Œå› ä¸ºæˆ‘ä»¬åªå¯¹ç°æœ‰çš„ API è¿›è¡Œæ ‡å‡†åŒ–ã€‚ä½†åœ¨ .NET Standard 2.1 ä¸­ï¼Œæˆ‘ä»¬å¯¹å…¨æ–°çš„ API è¿›è¡Œäº†æ ‡å‡†åŒ–ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬çœ‹åˆ°ç›¸å½“å¤šæ‘©æ“¦çš„åœ°æ–¹ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§æ‘©æ“¦ä»ä½•è€Œæ¥ï¼Ÿ&lt;/p&gt;
&lt;p&gt;.NET æ ‡å‡†æ˜¯ä¸€ä¸ª API é›†ï¼Œæ‰€æœ‰çš„.NET å®ç°éƒ½å¿…é¡»æ”¯æŒï¼Œæ‰€ä»¥å®ƒæœ‰ä¸€ä¸ªç¼–è¾‘æ–¹é¢&lt;sup&gt;[6]&lt;/sup&gt;çš„é—®é¢˜ï¼Œæ‰€æœ‰çš„ API å¿…é¡»ç”± .NET Standard å®¡æŸ¥å§”å‘˜ä¼š&lt;sup&gt;[7]&lt;/sup&gt;å®¡æŸ¥ã€‚è¯¥å§”å‘˜ä¼šç”± .NET å¹³å°å®ç°è€…ä»¥åŠ .NET ç¤¾åŒºçš„ä»£è¡¨ç»„æˆã€‚å…¶ç›®æ ‡æ˜¯åªå¯¹æˆ‘ä»¬èƒ½å¤ŸçœŸæ­£åœ¨æ‰€æœ‰å½“å‰å’Œæœªæ¥çš„ .NET å¹³å°ä¸­å®ç°çš„ API è¿›è¡Œæ ‡å‡†åŒ–ã€‚è¿™äº›å®¡æŸ¥æ˜¯å¿…è¦çš„ï¼Œå› ä¸º .NET åè®®æ ˆæœ‰ä¸åŒçš„å®ç°ï¼Œæœ‰ä¸åŒçš„é™åˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬é¢„æµ‹åˆ°äº†è¿™ç§ç±»å‹çš„æ‘©æ“¦ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å¾ˆæ—©å°±è¯´è¿‡ï¼Œ.NET æ ‡å‡†å°†åªå¯¹è‡³å°‘ä¸€ä¸ª .NET å®ç°ä¸­å·²ç»æ¨å‡ºçš„ API è¿›è¡Œæ ‡å‡†åŒ–ã€‚è¿™ä¹ä¸€çœ‹ä¼¼ä¹å¾ˆåˆç†ï¼Œä½†éšåä½ å°±ä¼šæ„è¯†åˆ°ï¼Œ.NET Standard ä¸å¯èƒ½é¢‘ç¹åœ°æ›´æ–°ã€‚æ‰€ä»¥ï¼Œå¦‚æœä¸€ä¸ªåŠŸèƒ½é”™è¿‡äº†æŸä¸ªç‰¹å®šçš„ç‰ˆæœ¬ï¼Œä½ å¯èƒ½è¦ç­‰ä¸Šå‡ å¹´æ‰èƒ½ä½¿ç”¨ï¼Œç”šè‡³å¯èƒ½è¦ç­‰æ›´ä¹…ï¼Œç›´åˆ°è¿™ä¸ªç‰ˆæœ¬çš„ .NET Standard å¾—åˆ°å¹¿æ³›æ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬è§‰å¾—å¯¹äºæŸäº›ç‰¹æ€§æ¥è¯´ï¼Œæœºä¼šæŸå¤±å¤ªå¤§ï¼Œæ‰€ä»¥æˆ‘ä»¬åšäº†ä¸€äº›ä¸è‡ªç„¶çš„è¡Œä¸ºï¼Œå°†è¿˜æ²¡æœ‰æ¨å‡ºçš„ API æ ‡å‡†åŒ–ï¼ˆæ¯”å¦‚ &lt;code&gt;AsyncEnumerable&amp;lt;T&amp;gt;&lt;/code&gt;ï¼‰ã€‚å¯¹æ‰€æœ‰çš„åŠŸèƒ½éƒ½è¿™æ ·åšå®åœ¨æ˜¯å¤ªæ˜‚è´µäº†ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæœ‰ä¸å°‘åŠŸèƒ½è¿˜æ˜¯é”™è¿‡äº† .NET Standard 2.1 è¿™è¶Ÿåˆ—è½¦çš„åŸå› ï¼ˆæ¯”å¦‚æ–°çš„ç¡¬ä»¶ç‰¹æ€§ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä½†å¦‚æœæœ‰ä¸€ä¸ªå•ä¸€çš„ä»£ç åº“å‘¢ï¼Ÿå¦‚æœè¿™ä¸ªä»£ç åº“å¿…é¡»æ”¯æŒæ‰€æœ‰ä¸ .NET è‡³ä»Šæ‰€å®ç°åŠŸèƒ½æœ‰æ‰€ä¸åŒçš„ç‰¹æ€§ï¼Œæ¯”å¦‚åŒæ—¶æ”¯æŒåŠæ—¶ç¼–è¯‘ï¼ˆJITï¼‰å’Œè¶…å‰ç¼–è¯‘ï¼ˆAOTï¼‰å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ä¸å…¶åœ¨äº‹åæ‰è¿›è¡Œè¿™äº›å®¡æŸ¥ï¼Œä¸å¦‚ä»ä¸€å¼€å§‹å°±å°†æ‰€æœ‰è¿™äº›æ–¹é¢ä½œä¸ºåŠŸèƒ½è®¾è®¡çš„ä¸€éƒ¨åˆ†ã€‚åœ¨è¿™æ ·çš„ä¸–ç•Œé‡Œï¼Œæ ‡å‡†åŒ–çš„ API é›†ä»æ„é€ ä¸Šæ¥è¯´ï¼Œå°±æ˜¯é€šç”¨çš„ API é›†ã€‚å½“ä¸€ä¸ªåŠŸèƒ½å®ç°åï¼Œå› ä¸ºä»£ç åº“æ˜¯å…±äº«çš„ï¼Œæ‰€ä»¥å¤§å®¶å°±å·²ç»å¯ä»¥ä½¿ç”¨äº†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;é—®é¢˜-2ï¼šnet-standard-éœ€è¦è§£ç ç¯&quot;&gt;é—®é¢˜ 2ï¼š.NET Standard éœ€è¦è§£ç ç¯&lt;/h2&gt;
&lt;p&gt;å°† API é›†ä¸å®ƒçš„å®ç°åˆ†ç¦»ï¼Œä¸ä»…ä»…æ˜¯å‡ç¼“äº† API çš„å¯ç”¨æ€§ï¼Œè¿™ä¹Ÿæ„å‘³ç€æˆ‘ä»¬éœ€è¦å°† .NET Standard ç‰ˆæœ¬æ˜ å°„åˆ°å®ƒä»¬çš„å®ç°ä¸Š&lt;sup&gt;[3]&lt;/sup&gt;ã€‚ä½œä¸ºä¸€ä¸ªé•¿æœŸä»¥æ¥ä¸å¾—ä¸å‘è®¸å¤šäººè§£é‡Šè¿™ä¸ªè¡¨æ ¼çš„äººï¼Œæˆ‘å·²ç»æ„è¯†åˆ°è¿™ä¸ªçœ‹ä¼¼ç®€å•çš„æƒ³æ³•æ˜¯å¤šä¹ˆå¤æ‚ã€‚æˆ‘ä»¬å·²ç»å°½åŠ›è®©å®ƒå˜å¾—æ›´ç®€å•ï¼Œä½†æœ€ç»ˆï¼Œè¿™ç§å¤æ‚æ€§æ˜¯ä¸ç”Ÿä¿±æ¥çš„ï¼Œå› ä¸º API é›†å’Œå®ç°æ˜¯ç‹¬ç«‹å‘å¸ƒçš„ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ç»Ÿä¸€äº† .NET å¹³å°ï¼Œåœ¨å®ƒä»¬ä¸‹é¢åˆå¢åŠ äº†ä¸€ä¸ªåˆæˆå¹³å°ï¼Œä»£è¡¨äº†é€šç”¨çš„ API é›†ã€‚ä»å¾ˆç°å®çš„æ„ä¹‰ä¸Šæ¥è¯´ï¼Œè¿™å¹…æ¼«ç”»æ˜¯å¾ˆåˆ°ä½çš„è¡¨è¾¾äº†è¿™ä¸ªç—›ç‚¹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/191097/202010/191097-20201013083430367-1482509685.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä¸èƒ½å®ç°çœŸæ­£æ„ä¹‰ä¸Šçš„åˆå¹¶ï¼Œæˆ‘ä»¬å°±æ— æ³•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿™æ­£æ˜¯ .NET 5 æ‰€åšçš„ï¼šå®ƒæä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„å®ç°ï¼Œå„æ–¹éƒ½å»ºç«‹åœ¨ç›¸åŒçš„åŸºç¡€ä¸Šï¼Œä»è€Œå¾—åˆ°ç›¸åŒçš„ API å’Œç‰ˆæœ¬å·ã€‚&lt;/p&gt;
&lt;h2 id=&quot;é—®é¢˜-3ï¼šnet-standard-å…¬å¼€äº†ç‰¹å®šå¹³å°-api&quot;&gt;é—®é¢˜ 3ï¼š.NET Standard å…¬å¼€äº†ç‰¹å®šå¹³å° API&lt;/h2&gt;
&lt;p&gt;å½“æˆ‘ä»¬è®¾è®¡ .NET Standard æ—¶ï¼Œä¸ºäº†é¿å…è¿‡å¤šåœ°ç ´ååº“çš„ç”Ÿæ€ç³»ç»Ÿï¼Œæˆ‘ä»¬ä¸å¾—ä¸åšå‡ºè®©æ­¥&lt;sup&gt;[4]&lt;/sup&gt;ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä¸å¾—ä¸åŒ…å«ä¸€äº› Windows ä¸“ç”¨çš„ APIï¼ˆå¦‚æ–‡ä»¶ç³»ç»Ÿ ACLã€æ³¨å†Œè¡¨ã€WMI ç­‰ï¼‰ã€‚ä»Šåï¼Œæˆ‘ä»¬å°†é¿å…åœ¨ &lt;code&gt;net5.0&lt;/code&gt;ã€&lt;code&gt;net6.0&lt;/code&gt; å’Œæœªæ¥çš„ç‰ˆæœ¬ä¸­åŠ å…¥ç‰¹å®šå¹³å°çš„ APIã€‚ç„¶è€Œï¼Œæˆ‘ä»¬ä¸å¯èƒ½é¢„æµ‹æœªæ¥ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬æœ€è¿‘ä¸º Blazor WebAssembly å¢åŠ äº†ä¸€ä¸ªæ–°çš„ .NET è¿è¡Œç¯å¢ƒï¼Œåœ¨è¿™ä¸ªç¯å¢ƒä¸­ï¼Œä¸€äº›åŸæœ¬è·¨å¹³å°çš„ APIï¼ˆå¦‚çº¿ç¨‹æˆ–è¿›ç¨‹æ§åˆ¶ï¼‰æ— æ³•åœ¨æµè§ˆå™¨çš„æ²™ç®±ä¸­å¾—åˆ°æ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;å¾ˆå¤šäººæŠ±æ€¨è¯´ï¼Œè¿™ç±» API æ„Ÿè§‰å°±åƒâ€œåœ°é›·â€--ä»£ç ç¼–è¯‘æ—¶æ²¡æœ‰é”™è¯¯ï¼Œå› æ­¤çœ‹èµ·æ¥å¯ä»¥ç§»æ¤åˆ°ä»»ä½•å¹³å°ä¸Šï¼Œä½†å½“è¿è¡Œåœ¨ä¸€ä¸ªæ²¡æœ‰ç»™å®š API å®ç°çš„å¹³å°ä¸Šæ—¶ï¼Œå°±ä¼šå‡ºç°è¿è¡Œæ—¶é”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;ä» .NET 5 å¼€å§‹ï¼Œæˆ‘ä»¬å°†æä¾›éš SDK å‘å¸ƒçš„é»˜è®¤å¼€å¯çš„åˆ†æå™¨å’Œä»£ç ä¿®å¤å™¨ã€‚å®ƒåŒ…å«å¹³å°å…¼å®¹æ€§åˆ†æå™¨ï¼Œå¯ä»¥æ£€æµ‹æ— æ„ä¸­ä½¿ç”¨äº†ç›®æ ‡å¹³å°å¹¶ä¸æ”¯æŒçš„ APIã€‚è¿™ä¸ªåŠŸèƒ½å–ä»£äº† &lt;code&gt;Microsoft.DotNet.Analyzers.Compatibility&lt;/code&gt; NuGet åŒ…ã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ Windows ç‰¹æœ‰çš„ APIã€‚&lt;/p&gt;
&lt;h3 id=&quot;å¤„ç†-windows-ç‰¹å®š-api&quot;&gt;å¤„ç† Windows ç‰¹å®š API&lt;/h3&gt;
&lt;p&gt;å½“ä½ åˆ›å»ºä¸€ä¸ª Target ä¸º &lt;code&gt;net5.0&lt;/code&gt; ä¸ºç›®æ ‡çš„é¡¹ç›®æ—¶ï¼Œä½ å¯ä»¥å¼•ç”¨ &lt;code&gt;Microsoft.Win32.Registry&lt;/code&gt; åŒ…ã€‚ä½†å½“ä½ å¼€å§‹ä½¿ç”¨å®ƒæ—¶ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cs&quot;&gt;private static string GetLoggingDirectory()
{
    using (RegistryKey key = Registry.CurrentUser.OpenSubKey(@&quot;Software\Fabrikam&quot;))
    {
        if (key?.GetValue(&quot;LoggingDirectoryPath&quot;) is string configuredPath)
            return configuredPath;
    }

    string exePath = Process.GetCurrentProcess().MainModule.FileName;
    string folder = Path.GetDirectoryName(exePath);
    return Path.Combine(folder, &quot;Logging&quot;);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½ ä¼šå¾—åˆ°ä»¥ä¸‹è­¦å‘Šï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;CA1416: 'RegistryKey.OpenSubKey(string)' is supported on 'windows'
CA1416: 'Registry.CurrentUser' is supported on 'windows'
CA1416: 'RegistryKey.GetValue(string?)' is supported on 'windows'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½ æœ‰ä¸‰ä¸ªé€‰æ‹©æ¥å¤„ç†è¿™äº›è­¦å‘Šã€‚&lt;/p&gt;
&lt;ol readability=&quot;4&quot;&gt;&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;è°ƒç”¨ä¿æŠ¤ï¼šåœ¨è°ƒç”¨ API ä¹‹å‰ï¼Œä½ å¯ä»¥ä½¿ç”¨ &lt;code&gt;OperatingSystem.IsWindows()&lt;/code&gt; æ¥æ£€æŸ¥å½“å‰è¿è¡Œç¯å¢ƒæ˜¯å¦æ˜¯ Windows ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;å°†è°ƒç”¨æ ‡è®°ä¸º Windows ä¸“ç”¨ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œé€šè¿‡ &lt;code&gt;[SupportedOSPlatform(&quot;windows&quot;)]&lt;/code&gt; å°†è°ƒç”¨æˆå‘˜æ ‡è®°ä¸ºç‰¹å®šå¹³å°ä¹Ÿæœ‰ä¸€å®šçš„æ„ä¹‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;åˆ é™¤ä»£ç ï¼šä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸æ˜¯ä½ æƒ³è¦çš„ï¼Œå› ä¸ºè¿™æ„å‘³ç€å½“ä½ çš„ä»£ç è¢« Windows ç”¨æˆ·ä½¿ç”¨æ—¶ï¼Œä½ ä¼šå¤±å»ä¿çœŸåº¦(fidelity)ã€‚ä½†å¯¹äºå­˜åœ¨è·¨å¹³å°æ›¿ä»£æ–¹æ¡ˆçš„æƒ…å†µï¼Œä½ åº”è¯¥å°½å¯èƒ½ä½¿ç”¨è·¨å¹³å°æ–¹æ¡ˆï¼Œè€Œä¸æ˜¯å¹³å°ç‰¹å®šçš„ APIã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ª XML é…ç½®æ–‡ä»¶æ¥ä»£æ›¿ä½¿ç”¨æ³¨å†Œè¡¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;æŠ‘åˆ¶è­¦å‘Šï¼šå½“ç„¶ï¼Œä½ å¯ä»¥é€šè¿‡ &lt;code&gt;.editorconfig&lt;/code&gt; æˆ– &lt;code&gt;#pragma warning disable&lt;/code&gt; æ¥æŠ‘åˆ¶è­¦å‘Šã€‚ç„¶è€Œï¼Œå½“ä½¿ç”¨ç‰¹å®šå¹³å°çš„ API æ—¶ï¼Œä½ åº”è¯¥æ›´å–œæ¬¢é€‰é¡¹ (1) å’Œ (2)ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;ä¸ºäº†è°ƒç”¨ä¿æŠ¤ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;System.OperatingSystem&lt;/code&gt; ç±»ä¸Šçš„æ–°é™æ€æ–¹æ³•ï¼Œç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cs&quot;&gt;private static string GetLoggingDirectory()
{
    if (OperatingSystem.IsWindows())
    {
        using (RegistryKey key = Registry.CurrentUser.OpenSubKey(@&quot;Software\Fabrikam&quot;))
        {
            if (key?.GetValue(&quot;LoggingDirectoryPath&quot;) is string configuredPath)
                return configuredPath;
        }
    }

    string exePath = Process.GetCurrentProcess().MainModule.FileName;
    string folder = Path.GetDirectoryName(exePath);
    return Path.Combine(folder, &quot;Logging&quot;);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¦å°†ä½ çš„ä»£ç æ ‡è®°ä¸º Windows ä¸“ç”¨ï¼Œè¯·åº”ç”¨æ–°çš„ &lt;code&gt;SupportedOSPlatform&lt;/code&gt; å±æ€§ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cs&quot;&gt;[SupportedOSPlatform(&quot;windows&quot;)]
private static string GetLoggingDirectory()
{
    using (RegistryKey key = Registry.CurrentUser.OpenSubKey(@&quot;Software\Fabrikam&quot;))
    {
        if (key?.GetValue(&quot;LoggingDirectoryPath&quot;) is string configuredPath)
            return configuredPath;
    }

    string exePath = Process.GetCurrentProcess().MainModule.FileName;
    string folder = Path.GetDirectoryName(exePath);
    return Path.Combine(folder, &quot;Logging&quot;);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨æ³¨å†Œè¡¨çš„è­¦å‘Šéƒ½ä¼šæ¶ˆå¤±ã€‚&lt;/p&gt;
&lt;p&gt;å…³é”®çš„åŒºåˆ«åœ¨äºï¼Œåœ¨ç¬¬äºŒä¸ªä¾‹å­ä¸­ï¼Œåˆ†æå™¨ç°åœ¨ä¼šå¯¹ &lt;code&gt;GetLoggingDirectory()&lt;/code&gt; çš„è°ƒç”¨å‘å‡ºè­¦å‘Šï¼Œå› ä¸ºå®ƒç°åœ¨è¢«è®¤ä¸ºæ˜¯ Windows ç‰¹æœ‰çš„ APIã€‚æ¢å¥è¯è¯´ï¼Œä½ æŠŠå¹³å°æ£€æŸ¥çš„è¦æ±‚è½¬ç»™è°ƒç”¨è€…æ”¾å»åšäº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;[SupportedOSPlatform]&lt;/code&gt; å±æ€§å¯ä»¥åº”ç”¨äºæˆå‘˜ã€ç±»å‹å’Œç¨‹åºé›†çº§åˆ«ã€‚è¿™ä¸ªå±æ€§ä¹Ÿè¢« BCL æœ¬èº«ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼Œç¨‹åºé›† &lt;code&gt;Microsoft.Win32.Registry&lt;/code&gt; å°±åº”ç”¨äº†è¿™ä¸ªå±æ€§ï¼Œè¿™ä¹Ÿæ˜¯åˆ†æå™¨æœ€å…ˆå°±çŸ¥é“æ³¨å†Œè¡¨æ˜¯ Windows ç‰¹å®š API æ–¹æ³•çš„åŸå› ã€‚&lt;/p&gt;
&lt;p&gt;è¯·æ³¨æ„ï¼Œå¦‚æœä½ çš„ç›®æ ‡æ˜¯ &lt;code&gt;net5.0-windows&lt;/code&gt;ï¼Œè¿™ä¸ªå±æ€§ä¼šè‡ªåŠ¨åº”ç”¨åˆ°ä½ çš„ç¨‹åºé›†ä¸­ã€‚è¿™æ„å‘³ç€ä½¿ç”¨ &lt;code&gt;net5.0-windows&lt;/code&gt; çš„ Windows ä¸“ç”¨ API æ°¸è¿œä¸ä¼šäº§ç”Ÿä»»ä½•è­¦å‘Šï¼Œå› ä¸ºä½ çš„æ•´ä¸ªç¨‹åºé›†è¢«è®¤ä¸ºæ˜¯ Windows ä¸“ç”¨çš„ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å¤„ç†-blazor-webassembly-ä¸æ”¯æŒçš„-api&quot;&gt;å¤„ç† Blazor WebAssembly ä¸æ”¯æŒçš„ API&lt;/h3&gt;
&lt;p&gt;Blazor WebAssembly é¡¹ç›®åœ¨æµè§ˆå™¨æ²™ç›’å†…è¿è¡Œï¼Œè¿™é™åˆ¶äº†ä½ å¯ä»¥ä½¿ç”¨çš„ APIã€‚ä¾‹å¦‚ï¼Œè™½ç„¶çº¿ç¨‹å’Œè¿›ç¨‹åˆ›å»ºéƒ½æ˜¯è·¨å¹³å°çš„ APIï¼Œä½†æˆ‘ä»¬æ— æ³•è®©è¿™äº› API åœ¨ Blazor WebAssembly ä¸­å·¥ä½œï¼Œå®ƒä»¬ä¼šæŠ›å‡º &lt;code&gt;PlatformNotSupportedException&lt;/code&gt;ã€‚æˆ‘ä»¬å·²ç»ç”¨ &lt;code&gt;[UnsupportedOSPlatform(&quot;browser&quot;)]&lt;/code&gt; æ ‡è®°äº†è¿™äº› APIã€‚&lt;/p&gt;
&lt;p&gt;å‡è®¾ä½ å°† &lt;code&gt;GetLoggingDirectory()&lt;/code&gt; æ–¹æ³•å¤åˆ¶å¹¶ç²˜è´´åˆ° Blazor WebAssembly åº”ç”¨ç¨‹åºä¸­ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cs&quot;&gt;private static string GetLoggingDirectory()
{
    //...

    string exePath = Process.GetCurrentProcess().MainModule.FileName;
    string folder = Path.GetDirectoryName(exePath);
    return Path.Combine(folder, &quot;Logging&quot;);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½ å°†å¾—åˆ°ä»¥ä¸‹è­¦å‘Šï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cs&quot;&gt;CA1416 'Process.GetCurrentProcess()' is unsupported on 'browser'
CA1416 'Process.MainModule' is unsupported on 'browser'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½ å¯ä»¥ç”¨ä¸ Windows ç‰¹å®š API åŸºæœ¬ç›¸åŒçš„åšæ³•æ¥å¤„ç†è¿™äº›è­¦å‘Šã€‚&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥å¯¹è°ƒç”¨è¿›è¡Œä¿æŠ¤ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cs&quot;&gt;private static string GetLoggingDirectory()
{
    //...

    if (!OperatingSystem.IsBrowser())
    {
        string exePath = Process.GetCurrentProcess().MainModule.FileName;
        string folder = Path.GetDirectoryName(exePath);
        return Path.Combine(folder, &quot;Logging&quot;);
    }
    else
    {
        return string.Empty;
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æˆ–è€…ä½ å¯ä»¥å°†è¯¥æˆå‘˜æ ‡è®°ä¸ºä¸è¢« Blazor WebAssembly æ”¯æŒï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cs&quot;&gt;[UnsupportedOSPlatform(&quot;browser&quot;)]
private static string GetLoggingDirectory()
{
    //...

    string exePath = Process.GetCurrentProcess().MainModule.FileName;
    string folder = Path.GetDirectoryName(exePath);
    return Path.Combine(folder, &quot;Logging&quot;);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç”±äºæµè§ˆå™¨æ²™ç›’çš„é™åˆ¶æ€§ç›¸å½“å¤§ï¼Œæ‰€ä»¥å¹¶ä¸æ˜¯æ‰€æœ‰çš„ç±»åº“å’Œ NuGet åŒ…éƒ½èƒ½åœ¨ Blazor WebAssembly ä¸­è¿è¡Œã€‚æ­¤å¤–ï¼Œç»å¤§å¤šæ•°çš„åº“ä¹Ÿä¸åº”è¯¥æ”¯æŒåœ¨ Blazor WebAssembly ä¸­è¿è¡Œã€‚&lt;/p&gt;
&lt;p&gt;è¿™å°±æ˜¯ä¸ºä»€ä¹ˆé’ˆå¯¹ &lt;code&gt;net5.0&lt;/code&gt; çš„æ™®é€šç±»åº“ä¸ä¼šçœ‹åˆ°ä¸æ”¯æŒ Blazor WebAssembly API çš„è­¦å‘Šã€‚ä½ å¿…é¡»åœ¨é¡¹ç›®æ–‡ä»¶ä¸­æ·»åŠ  &lt;code&gt;&amp;lt;SupportedPlatform&amp;gt;&lt;/code&gt; é¡¹ï¼Œæ˜ç¡®è¡¨ç¤ºä½ æ‰“ç®—åœ¨ Blazor WebAssembly ä¸­æ”¯æŒæ‚¨çš„é¡¹ç›®ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-xml&quot;&gt;&amp;lt;Project Sdk=&quot;Microsoft.NET.Sdk&quot;&amp;gt;

  &amp;lt;PropertyGroup&amp;gt;
    &amp;lt;TargetFramework&amp;gt;net5.0&amp;lt;/TargetFramework&amp;gt;
  &amp;lt;/PropertyGroup&amp;gt;

  &amp;lt;ItemGroup&amp;gt;
    &amp;lt;SupportedPlatform Include=&quot;browser&quot; /&amp;gt;
  &amp;lt;/ItemGroup&amp;gt;

&amp;lt;/Project&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚æœä½ æ­£åœ¨æ„å»ºä¸€ä¸ª Blazor WebAssembly åº”ç”¨ç¨‹åºï¼Œä½ ä¸å¿…è¿™æ ·åšï¼Œå› ä¸º &lt;code&gt;Microsoft.NET.Sdk.BlazorWebAssembly&lt;/code&gt; SDK ä¼šè‡ªåŠ¨åšåˆ°è¿™ä¸€ç‚¹ã€‚&lt;/p&gt;
&lt;h2 id=&quot;net-5-æ˜¯-net-standard-å’Œ-net-core-çš„ç»“åˆ&quot;&gt;.NET 5 æ˜¯ .NET Standard å’Œ .NET Core çš„ç»“åˆ&lt;/h2&gt;
&lt;p&gt;.NET 5 åŠåç»­ç‰ˆæœ¬å°†æ˜¯ä¸€ä¸ªå•ä¸€çš„ä»£ç åº“ï¼Œæ”¯æŒæ¡Œé¢åº”ç”¨ã€ç§»åŠ¨åº”ç”¨ã€äº‘æœåŠ¡ã€ç½‘ç«™ä»¥åŠæœªæ¥çš„ä»»ä½• .NET è¿è¡Œç¯å¢ƒã€‚&lt;/p&gt;
&lt;p&gt;ä½ å¯èƒ½ä¼šæƒ³â€œç­‰ç­‰ï¼Œè¿™å¬èµ·æ¥å¾ˆä¸é”™ï¼Œä½†å¦‚æœæœ‰äººæƒ³åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„å®ç°å‘¢â€ã€‚è¿™ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ä½†å‡ ä¹æ²¡æœ‰äººä¼šä»å¤´å¼€å§‹ä¸€ä¸ªæ–°çš„å®ç°ã€‚æœ€æœ‰å¯èƒ½çš„æ˜¯ï¼Œå®ƒå°†æ˜¯å½“å‰ä»£ç åº“ï¼ˆdotnet/runtime&lt;sup&gt;[8]&lt;/sup&gt;ï¼‰çš„ä¸€ä¸ªåˆ†æ”¯ã€‚ä¾‹å¦‚ï¼ŒTizenï¼ˆä¸‰æ˜Ÿæ™ºèƒ½å®¶ç”µå¹³å°ï¼‰ä½¿ç”¨çš„æ˜¯ .NET Coreï¼Œåªåšäº†ç»†å°çš„æ”¹åŠ¨ï¼Œå¹¶åœ¨ä¸Šé¢ä½¿ç”¨äº†ä¸‰æ˜Ÿç‰¹æœ‰çš„åº”ç”¨æ¨¡å‹ã€‚&lt;/p&gt;
&lt;p&gt;Fork ä¿ç•™äº†åˆå¹¶å…³ç³»ï¼Œè¿™ä½¿å¾—ç»´æŠ¤è€…å¯ä»¥ä¸æ–­ä» dotnet/runtime&lt;sup&gt;[8]&lt;/sup&gt; ä»“åº“ä¸­æ‹‰å–æ–°çš„å˜åŒ–ï¼Œåœ¨ä¸å—å…¶å˜åŒ–å½±å“çš„é¢†åŸŸå—ç›Šäº BCL åˆ›æ–°ï¼Œè¿™å’Œ Linux å‘è¡Œç‰ˆçš„å·¥ä½œæ–¹å¼éå¸¸ç›¸ä¼¼ã€‚&lt;/p&gt;
&lt;p&gt;å½“ç„¶ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œäººä»¬å¯èƒ½å¸Œæœ›åˆ›å»ºä¸€ä¸ªéå¸¸ä¸åŒçš„â€œç§ç±»â€çš„ .NETï¼Œæ¯”å¦‚ä¸€ä¸ªæ²¡æœ‰å½“å‰ BCL çš„æœ€å°è¿è¡Œæ—¶ã€‚ä½†è¿™æ„å‘³ç€å®ƒä¸èƒ½åˆ©ç”¨ç°æœ‰çš„ .NET åº“ç”Ÿæ€ç³»ç»Ÿï¼Œå®ƒä¹Ÿä¸ä¼šå®ç° .NET Standardã€‚æˆ‘ä»¬ä¸€èˆ¬å¯¹è¿™ä¸ªæ–¹å‘çš„è¿½æ±‚ä¸æ„Ÿå…´è¶£ï¼Œä½† .NET Standard å’Œ .NET Core çš„ç»“åˆå¹¶ä¸å¦¨ç¢è¿™ä¸€ç‚¹ï¼Œä¹Ÿä¸ä¼šå¢åŠ éš¾åº¦ã€‚&lt;/p&gt;
&lt;h2 id=&quot;net-ç‰ˆæœ¬&quot;&gt;.NET ç‰ˆæœ¬&lt;/h2&gt;
&lt;p&gt;ä½œä¸ºä¸€ä¸ªåº“ä½œè€…ï¼Œä½ å¯èƒ½æƒ³çŸ¥é“ .NET 5 ä»€ä¹ˆæ—¶å€™èƒ½å¾—åˆ°å¹¿æ³›æ”¯æŒã€‚ä»Šåï¼Œæˆ‘ä»¬å°†åœ¨æ¯å¹´çš„ 11 æœˆå‘å¸ƒ .NET æ–°ç‰ˆæœ¬ï¼Œæ¯éš”ä¸€å¹´å‘å¸ƒä¸€æ¬¡é•¿æœŸæ”¯æŒï¼ˆLTSï¼‰ç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;.NET 5 å°†åœ¨ 2020 å¹´ 11 æœˆæ­£å¼å‘å¸ƒï¼Œè€Œ .NET 6 å°†åœ¨ 2021 å¹´ 11 æœˆä½œä¸º LTS å‘å¸ƒã€‚æˆ‘ä»¬åˆ›å»ºäº†è¿™ä¸ªå›ºå®šçš„æ—¶é—´è¡¨ï¼Œä½¿ä½ æ›´å®¹æ˜“è§„åˆ’æ‚¨çš„æ›´æ–°ï¼ˆå¦‚æœä½ æ˜¯åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜ï¼‰ï¼Œå¹¶é¢„æµ‹å¯¹æ”¯æŒçš„ .NET ç‰ˆæœ¬çš„éœ€æ±‚ï¼ˆå¦‚æœä½ æ˜¯åº“å¼€å‘äººå‘˜ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å¾—ç›Šäº .NET Core çš„å¹¶è¡Œå®‰è£…ï¼ˆè¯‘æ³¨ï¼šä¸€å°æœºå™¨å¯åŒæ—¶å®‰è£…å¤šä¸ª .NET Core ç‰ˆæœ¬ï¼Œä¸”å‘ä¸‹å…¼å®¹ï¼‰ï¼Œå®ƒçš„æ–°ç‰ˆæœ¬è¢«é‡‡ç”¨é€Ÿåº¦ç›¸å½“å¿«ï¼Œå…¶ä¸­ LTS ç‰ˆæœ¬æœ€å—æ¬¢è¿ã€‚äº‹å®ä¸Šï¼Œ.NET Core 3.1 æ˜¯æœ‰å²ä»¥æ¥é‡‡ç”¨æœ€å¿«çš„ .NET ç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/191097/202010/191097-20201013083538446-1264174310.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬çš„æœŸæœ›æ˜¯ï¼Œæ¯æ¬¡å‘å¸ƒï¼ˆå¤§ç‰ˆæœ¬ï¼‰æ—¶ï¼Œæˆ‘ä»¬éƒ½ä¼šæŠŠæ‰€æœ‰æ¡†æ¶åç§°è¿åœ¨ä¸€èµ·å‘å¸ƒã€‚ä¾‹å¦‚ï¼Œå®ƒå¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/191097/202010/191097-20201013083547955-737087131.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ„å‘³ç€ä½ å¿ƒé‡Œå¯ä»¥æœ‰ä¸ªé¢„æœŸï¼Œæ— è®ºæˆ‘ä»¬åœ¨ BCL ä¸­åšäº†ä»€ä¹ˆåˆ›æ–°ï¼Œä½ éƒ½èƒ½åœ¨æ‰€æœ‰çš„åº”ç”¨æ¨¡å‹ä¸­ä½¿ç”¨å®ƒï¼Œæ— è®ºå®ƒä»¬è¿è¡Œåœ¨å“ªä¸ªå¹³å°ä¸Šã€‚è¿™ä¹Ÿæ„å‘³ç€ï¼Œåªè¦ä½ è¿è¡Œæœ€æ–°ç‰ˆæœ¬çš„åº“ï¼Œä½ æ€»æ˜¯å¯ä»¥åœ¨æ‰€æœ‰çš„åº”ç”¨æ¨¡å‹æ¶ˆè´¹æœ€æ–°çš„ &lt;code&gt;net&lt;/code&gt; æ¡†æ¶å¸¦æ¥çš„åº“ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§æ¨¡å¼æ¶ˆé™¤äº†å›´ç»• .NET Standard ç‰ˆæœ¬çš„å¤æ‚æ€§ï¼Œå› ä¸ºæ¯æ¬¡æˆ‘ä»¬å‘å¸ƒæ—¶ï¼Œä½ éƒ½å¯ä»¥å‡è®¾æ‰€æœ‰çš„å¹³å°éƒ½ä¼šç«‹å³å’Œå®Œå…¨æ”¯æŒæ–°ç‰ˆæœ¬ï¼Œè€Œæˆ‘ä»¬é€šè¿‡ä½¿ç”¨å‰ç¼€å‘½åæƒ¯ä¾‹æ¥å·©å›ºè¿™ä¸€æ‰¿è¯ºã€‚&lt;/p&gt;
&lt;p&gt;.NET çš„æ–°ç‰ˆæœ¬å¯èƒ½ä¼šæ·»åŠ å¯¹å…¶ä»–å¹³å°çš„æ”¯æŒã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å°†é€šè¿‡ .NET 6 å¢åŠ å¯¹ Android å’Œ iOS çš„æ”¯æŒã€‚ç›¸åï¼Œæˆ‘ä»¬å¯èƒ½ä¼šåœæ­¢æ”¯æŒé‚£äº›ä¸å†ç›¸å…³çš„å¹³å°ã€‚è¿™ä¸€ç‚¹å¯ä»¥é€šè¿‡åœ¨ .NET 6 ä¸­ä¸å­˜åœ¨çš„ &lt;code&gt;net5.0-someoldos&lt;/code&gt; ç›®æ ‡æ¡†æ¶æ¥è¯´æ˜ã€‚æˆ‘ä»¬ç›®å‰æ²¡æœ‰æ”¾å¼ƒä¸€ä¸ªå¹³å°æ”¯æŒçš„è®¡åˆ’ï¼Œé‚£å°†æ˜¯ä¸€ä¸ªå¤§é—®é¢˜ï¼Œè¿™ä¸æ˜¯é¢„æœŸçš„ï¼Œè‹¥æœ‰æˆ‘ä»¬ä¼šæå‰å¾ˆä¹…å®£å¸ƒã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä»¬å¯¹ .NET Standard çš„æ¨¡å¼ï¼Œä¾‹å¦‚ï¼Œæ²¡æœ‰æ–°ç‰ˆæœ¬çš„ Windows Phone å®ç°äº†åé¢çš„ .NET Standard ç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä¸ºä»€ä¹ˆæ²¡æœ‰-webassembly-çš„-tfm&quot;&gt;ä¸ºä»€ä¹ˆæ²¡æœ‰ WebAssembly çš„ TFM&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬æœ€åˆè€ƒè™‘ä¸º WebAssembly æ·»åŠ  TFMï¼Œå¦‚ &lt;code&gt;net5.0-wasm&lt;/code&gt;ã€‚åæ¥æˆ‘ä»¬å†³å®šä¸è¿™ä¹ˆåšï¼ŒåŸå› å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul readability=&quot;3&quot;&gt;&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;WebAssembly æ›´åƒæ˜¯ä¸€ä¸ªæŒ‡ä»¤é›†ï¼ˆå¦‚ x86 æˆ– x64ï¼‰ï¼Œè€Œä¸æ˜¯åƒä¸€ä¸ªæ“ä½œç³»ç»Ÿï¼Œè€Œä¸”æˆ‘ä»¬ä¸€èˆ¬ä¸æä¾›ä¸åŒæ¶æ„ä¹‹é—´æœ‰åˆ†æ­§çš„ APIã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;WebAssembly åœ¨æµè§ˆå™¨æ²™ç®±ä¸­çš„æ‰§è¡Œæ¨¡å‹æ˜¯ä¸€ä¸ªå…³é”®çš„å·®å¼‚åŒ–ï¼Œä½†æˆ‘ä»¬å†³å®šåªå°†å…¶å»ºæ¨¡ä¸ºè¿è¡Œæ—¶æ£€æŸ¥æ›´æœ‰æ„ä¹‰ã€‚ç±»ä¼¼äºä½ å¯¹ Windows å’Œ Linux çš„æ£€æŸ¥æ–¹å¼ï¼Œä½ å¯ä»¥ä½¿ç”¨ OperatingSystem ç±»å‹ã€‚ç”±äºä¸æŒ‡ä»¤é›†æ— å…³ï¼Œæ‰€ä»¥è¯¥æ–¹æ³•è¢«ç§°ä¸º &lt;code&gt;IsBrowser()&lt;/code&gt; è€Œä¸æ˜¯ &lt;code&gt;IsWebAssembly()&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;WebAssembly æœ‰è¿è¡Œæ—¶æ ‡è¯†ç¬¦(RID)&lt;sup&gt;[9]&lt;/sup&gt;ï¼Œç§°ä¸º &lt;code&gt;browser&lt;/code&gt; å’Œ &lt;code&gt;browser-wasm&lt;/code&gt;ã€‚å®ƒä»¬å…è®¸åŒ…çš„ä½œè€…åœ¨æµè§ˆå™¨ä¸­é’ˆå¯¹ WebAssembly éƒ¨ç½²ä¸åŒçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚è¿™å¯¹äºéœ€è¦äº‹å…ˆç¼–è¯‘æˆ WebAssembly çš„æœ¬åœ°ä»£ç ç‰¹åˆ«æœ‰ç”¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å¦‚ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å·²ç»æ ‡è®°äº†åœ¨æµè§ˆå™¨æ²™ç›’ä¸­ä¸æ”¯æŒçš„ APIï¼Œä¾‹å¦‚ &lt;code&gt;System.Diagnostics.Process&lt;/code&gt;ã€‚å¦‚æœä½ ä»æµè§ˆå™¨åº”ç”¨å†…éƒ¨ä½¿ç”¨è¿™äº› APIï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªè­¦å‘Šï¼Œå‘Šè¯‰ä½ è¿™ä¸ª API æ˜¯ä¸æ”¯æŒçš„ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;net5.0&lt;/code&gt; æ˜¯ä¸ºèƒ½åœ¨ä»»ä½•å¹³å°è¿è¡Œçš„ä»£ç è€Œè®¾è®¡çš„ï¼Œå®ƒç»“åˆå¹¶å–ä»£äº† &lt;code&gt;netcoreapp&lt;/code&gt; å’Œ &lt;code&gt;netstandard&lt;/code&gt; åç§°ã€‚æˆ‘ä»¬è¿˜æœ‰é’ˆå¯¹ç‰¹å®šå¹³å°çš„æ¡†æ¶ï¼Œæ¯”å¦‚ &lt;code&gt;net5.0-windows&lt;/code&gt;ï¼ˆåé¢è¿˜æœ‰ &lt;code&gt;net6.0-android&lt;/code&gt;ï¼Œ&lt;code&gt;net6.0-ios&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºæ ‡å‡†å’Œå®ƒçš„å®ç°ä¹‹é—´æ²¡æœ‰åŒºåˆ«ï¼Œä½ å°†èƒ½å¤Ÿæ¯”ä½¿ç”¨ .NET Standard æ›´å¿«åœ°åˆ©ç”¨æ–°åŠŸèƒ½ã€‚è€Œä¸”ç”±äºå‘½åæƒ¯ä¾‹ï¼Œä½ å°†èƒ½å¤Ÿå¾ˆå®¹æ˜“åœ°çŸ¥é“è°å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç»™å®šçš„åº“--è€Œæ— éœ€æŸ¥é˜… .NET Standard ç‰ˆæœ¬è¡¨ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶ .NET Standard 2.1 å°†æ˜¯ .NET Standard çš„æœ€åä¸€ä¸ªç‰ˆæœ¬ï¼Œä½† .NET 5 å’Œæ‰€æœ‰æœªæ¥çš„ç‰ˆæœ¬å°†ç»§ç»­æ”¯æŒ.NET Standard 2.1 å’Œæ›´æ—©çš„ç‰ˆæœ¬ã€‚ä½ åº”è¯¥å°† &lt;code&gt;net5.0&lt;/code&gt;ï¼ˆä»¥åŠæœªæ¥çš„ç‰ˆæœ¬ï¼‰è§†ä¸ºæœªæ¥å…±äº«ä»£ç çš„åŸºç¡€ã€‚&lt;/p&gt;
&lt;p&gt;ç¥ï¼Œç¼–ç æ„‰å¿«ï¼&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;æ–‡ä¸­ç›¸å…³é“¾æ¥ï¼š&lt;/p&gt;
&lt;p&gt;[1].&lt;a href=&quot;https://github.com/dotnet/designs/blob/master/accepted/2020/net5/net5.md&quot;&gt;https://github.com/dotnet/designs/blob/master/accepted/2020/net5/net5.md&lt;/a&gt;&lt;br/&gt;[2].&lt;a href=&quot;https://github.com/dotnet/standard/tree/master/docs/governance#process&quot;&gt;https://github.com/dotnet/standard/tree/master/docs/governance#process&lt;/a&gt;&lt;br/&gt;[3].&lt;a href=&quot;https://dotnet.microsoft.com/platform/dotnet-standard#versions&quot;&gt;https://dotnet.microsoft.com/platform/dotnet-standard#versions&lt;/a&gt;&lt;br/&gt;[4].&lt;a href=&quot;https://github.com/dotnet/standard/blob/master/docs/faq.md#why-do-you-include-apis-that-dont-work-everywhere&quot;&gt;https://github.com/dotnet/standard/blob/master/docs/faq.md#why-do-you-include-apis-that-dont-work-everywhere&lt;/a&gt;&lt;br/&gt;[5].&lt;a href=&quot;https://devblogs.microsoft.com/dotnet/introducing-net-standard/&quot;&gt;https://devblogs.microsoft.com/dotnet/introducing-net-standard/&lt;/a&gt;&lt;br/&gt;[6].&lt;a href=&quot;https://github.com/dotnet/standard/tree/master/docs/governance#process&quot;&gt;https://github.com/dotnet/standard/tree/master/docs/governance#process&lt;/a&gt;&lt;br/&gt;[7].&lt;a href=&quot;https://github.com/dotnet/standard/blob/master/docs/governance/board.md&quot;&gt;https://github.com/dotnet/standard/blob/master/docs/governance/board.md&lt;/a&gt;&lt;br/&gt;[8].&lt;a href=&quot;https://github.com/dotnet/runtime&quot;&gt;https://github.com/dotnet/runtime&lt;/a&gt;&lt;br/&gt;[9].&lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/core/rid-catalog&quot;&gt;https://docs.microsoft.com/en-us/dotnet/core/rid-catalog&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 13 Oct 2020 00:32:00 +0000</pubDate>
<dc:creator>ç²¾è‡´ç å†œ</dc:creator>
<og:description>ä½œè€…ï¼šRichard ç¿»è¯‘ï¼šç²¾è‡´ç å†œ-ç‹äº® åŸæ–‡ï¼šhttp://dwz.win/Q4h è‡ªä» .NET 5 å®£è´¯ä»¥æ¥ï¼Œå¾ˆå¤šäººéƒ½åœ¨é—®è¿™å¯¹ .NET Standard æ„å‘³ç€ä»€ä¹ˆï¼Œå®ƒæ˜¯å¦ä»ç„¶é‡è¦ã€‚åœ¨è¿™ç¯‡æ–‡</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/willick/p/13806646.html</dc:identifier>
</item>
<item>
<title>HttpReports 2.0 å‘å¸ƒäº† ï¼ï¼ï¼ - SpringLeee</title>
<link>http://www.cnblogs.com/myshowtime/p/13806631.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/myshowtime/p/13806631.html</guid>
<description>&lt;h2 id=&quot;-å‰è¨€ä»‹ç»&quot;&gt;ğŸ€ å‰è¨€ä»‹ç»&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;HttpReports&lt;/strong&gt; æ˜¯åŸºäº.Net Core å¼€å‘çš„APMç›‘æ§ç³»ç»Ÿï¼Œä½¿ç”¨MITå¼€æºåè®®ï¼Œä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼Œç»Ÿè®¡, åˆ†æ, å¯è§†åŒ–ï¼Œ ç›‘æ§ï¼Œè¿½è¸ªç­‰ï¼Œé€‚åˆåœ¨å¾®æœåŠ¡ç¯å¢ƒä¸­ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;Githubåœ°å€ï¼š&lt;strong&gt;&lt;a href=&quot;https://github.com/dotnetcore/HttpReports&quot;&gt;https://github.com/dotnetcore/HttpReports&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨çº¿é¢„è§ˆï¼š &lt;strong&gt;&lt;a href=&quot;http://122.51.188.23:8080&quot;&gt;http://122.51.188.23:8080&lt;/a&gt;&lt;/strong&gt; (å¸¦å®½æœ‰é™ï¼Œç¬¬ä¸€æ¬¡ä¼šæœ‰ç‚¹æ…¢)&lt;/p&gt;
&lt;p&gt;åœ¨çº¿æ–‡æ¡£ï¼š &lt;strong&gt;&lt;a href=&quot;https://www.yuque.com/httpreports/docs&quot;&gt;https://www.yuque.com/httpreports/docs&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è´¦å·: &lt;strong&gt;admin&lt;/strong&gt; å¯†ç  &lt;strong&gt;123456&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¼€æºä¸æ˜“ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦è¿˜å¸Œæœ›ç‚¹ä¸ªStarï¼Œæ”¯æŒä¸‹&lt;/p&gt;
&lt;h2 id=&quot;-ç®€å•æ¶æ„&quot;&gt;ğŸ‰ ç®€å•æ¶æ„&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;https://httpreports2-1259586045.cos.ap-shanghai.myqcloud.com/jiagou.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;-ä¸»è¦åŠŸèƒ½&quot;&gt;ğŸŒ ä¸»è¦åŠŸèƒ½&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;æ¥å£è°ƒç”¨æŒ‡æ ‡åˆ†æ&lt;/li&gt;
&lt;li&gt;å¤šæœåŠ¡èŠ‚ç‚¹æ•°æ®èšåˆåˆ†æ&lt;/li&gt;
&lt;li&gt;æ…¢è¯·æ±‚ï¼Œé”™è¯¯è¯·æ±‚åˆ†æ&lt;/li&gt;
&lt;li&gt;æ¥å£è°ƒç”¨æ—¥å¿—æŸ¥è¯¢&lt;/li&gt;
&lt;li&gt;å¤šç±»å‹é¢„è­¦ç›‘æ§&lt;/li&gt;
&lt;li&gt;HTTP,Grpc è°ƒç”¨åˆ†æ&lt;/li&gt;
&lt;li&gt;åˆ†å¸ƒå¼è¿½è¸ª&lt;/li&gt;
&lt;li&gt;å¤šæ•°æ®åº“æ”¯æŒï¼Œé›†æˆæ–¹ä¾¿&lt;/li&gt;
&lt;li&gt;ç¨‹åºæ€§èƒ½ç›‘æ§&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;20-æ›´æ–°&quot;&gt;2.0 æ›´æ–°&lt;/h2&gt;
&lt;p&gt;HttpReports ä¸Šä¸€æ¬¡å‘å¸ƒHttpReports è¿˜æ˜¯åœ¨3ä¸ªæœˆå‰ï¼ŒHttpReports 2.0 ç‰ˆæœ¬çš„æ”¹åŠ¨è¿˜æ˜¯æŒºå¤§çš„ï¼Œæ‰€ä»¥å»ºè®®è€ç‰ˆæœ¬çš„å‡çº§å‰ï¼Œè¿˜æ˜¯å…ˆçœ‹ä¸‹æ–‡æ¡£ï¼Œæœ¬æ¬¡æ›´æ–°ä¸»è¦ä»¥ä¸‹å‡ ä¸ªæ–¹é¢&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;é¡¹ç›®ç»“æ„è°ƒæ•´,ç»Ÿä¸€ä½¿ç”¨ HttpTransport&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ Vue + Antv + ElementUI é‡æ„äº†Dashboard&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨FreeSql ORMé‡æ„äº†å­˜å‚¨å±‚ï¼Œä¹‹å‰å…¼å®¹å¤šæ•°æ®åº“æ˜¯ä¸ªå¾ˆå¤´ç–¼çš„é—®é¢˜ï¼Œè¦å†™å¾ˆå¤šsqlï¼ŒFreeSqlå…¼å®¹çš„å¾ˆå¥½ï¼Œç°åœ¨é¡¹ç›®é‡Œé¢ä½ æ‰¾ä¸åˆ°ä¸€è¡Œsqlï¼Œ ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ï¼Œæ€§èƒ½ä¹Ÿæœ‰æå‡ï¼Œè¿™é‡Œç»™å¶è€æ¿ç‚¹ä¸ªèµ&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;-é¢„è§ˆ&quot;&gt;ğŸ é¢„è§ˆ&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;https://httpreports2-1259586045.cos.ap-shanghai.myqcloud.com/index1.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://httpreports2-1259586045.cos.ap-shanghai.myqcloud.com/v2.0_service.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://httpreports2-1259586045.cos.ap-shanghai.myqcloud.com/v2.0_relatela.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://httpreports2-1259586045.cos.ap-shanghai.myqcloud.com/v2.0_alarm3.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;å¼•ç”¨-httpreportsdashboard&quot;&gt;å¼•ç”¨ HttpReports.Dashboard&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆï¼Œéœ€è¦åˆ›å»ºDashboard é¡¹ç›®æ¥æ¥æ”¶ï¼Œå¤„ç†å’Œå±•ç¤ºæ•°æ®ï¼ŒDashboard ä½¿ç”¨äº† Vue + Antv +ElementUI æ„å»ºé¡µé¢å¹¶æ‰“åŒ…åˆ°ç¨‹åºé›†ï¼Œåªéœ€è¦Webé¡¹ç›®å¼•ç”¨ NugetåŒ…å®‰è£…å³å¯ï¼Œéå¸¸æ–¹ä¾¿ã€‚&lt;/p&gt;
&lt;p&gt;æ–°å»ºä¸€ä¸ª .Net Core çš„ç©ºWebé¡¹ç›®ï¼Œæ”¯æŒ 2.1 åŠä»¥ä¸Šç‰ˆæœ¬&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://httpreports2-1259586045.cos.ap-shanghai.myqcloud.com/create.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ–°å»ºå®Œæˆåï¼Œé€šè¿‡NugetåŒ…åˆ†åˆ«å®‰è£… HttpReports.Dashboard ï¼ŒHttpReports.MySQLï¼ˆæˆ–è€…æ˜¯HttpReports.SqlServer, HttpReports.PostgreSQLï¼‰&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://httpreports2-1259586045.cos.ap-shanghai.myqcloud.com/UseDashboard.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://httpreports2-1259586045.cos.ap-shanghai.myqcloud.com/UseDashboardMySql.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¼•ç”¨å®Œæˆåï¼Œç®€å•é…ç½®ä¸€ä¸‹ï¼Œ ä¿®æ”¹é¡¹ç›®çš„ appsetting.json æ–‡ä»¶&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-json&quot;&gt;{
 &quot;HttpReportsDashboard&quot;: { 
    &quot;ExpireDay&quot;: 3,
    &quot;Storage&quot;: {
      &quot;ConnectionString&quot;: &quot;DataBase=HttpReports;Data Source=localhost;User Id=root;Password=123456;&quot;, 
      &quot;DeferSecond&quot;: 10,
      &quot;DeferThreshold&quot;: 100
    },
    &quot;Mail&quot;: {
      &quot;Server&quot;: &quot;smtp.163.com&quot;,
      &quot;Port&quot;: 465,
      &quot;Account&quot;: &quot;HttpReports@qq.com&quot;,
      &quot;Password&quot;: &quot;*******&quot;,
      &quot;EnableSsL&quot;: true,
      &quot;Switch&quot;: true
    }
  } 
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å‚æ•°ä»‹ç»ï¼š&lt;br/&gt;ExpireDay - æ•°æ®è¿‡æœŸå¤©æ•°ï¼Œé»˜è®¤3å¤©ï¼ŒHttpReports ä¼šè‡ªåŠ¨æ¸…é™¤è¿‡æœŸçš„æ•°æ®&lt;br/&gt;Storage - å­˜å‚¨ä¿¡æ¯&lt;br/&gt;DeferSecond - æ‰¹é‡æ•°æ®å…¥åº“çš„ç§’æ•°ï¼Œå»ºè®®å€¼ 5-60&lt;br/&gt;DeferThreshold - æ‰¹é‡æ•°æ®å…¥åº“çš„æ•°é‡ï¼Œå»ºè®®å€¼100-1000&lt;br/&gt;Mail - é‚®ç®±ä¿¡æ¯ï¼Œé…ç½®ç›‘æ§çš„è¯ï¼Œå¯ä»¥å‘å‘Šè­¦é‚®ä»¶&lt;/p&gt;
&lt;p&gt;ä¿®æ”¹å®Œæˆåï¼Œæˆ‘ä»¬æ¥ç€ä¿®æ”¹ Dahboard é¡¹ç›®çš„ Startup.cs æ–‡ä»¶&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-json&quot;&gt;public void ConfigureServices(IServiceCollection services)
{ 
        services.AddHttpReportsDashboard().UseMySqlStorage(); 
} 
 
public void Configure(IApplicationBuilder app, IWebHostEnvironment env)
{ 
        app.UseHttpReportsDashboard(); 
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æŠŠDashboard ç¨‹åºå¯åŠ¨èµ·æ¥ï¼Œå¦‚æœæ²¡æœ‰é—®é¢˜çš„è¯ï¼Œä¼šè·³è½¬åˆ°Dashboardçš„ç™»é™†é¡µé¢ é»˜è®¤è´¦å·ï¼šadmin å¯†ç : 123456&lt;/p&gt;
&lt;p&gt;ç°åœ¨å¯è§†åŒ–æœ‰äº†ï¼Œä½†æ˜¯æ²¡æœ‰æ•°æ®ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ ç»™æœåŠ¡ç«¯ç¨‹åºï¼Œæ·»åŠ  HttpReports æ¥æ”¶é›†ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://httpreports2-1259586045.cos.ap-shanghai.myqcloud.com/v2.0_login.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;å¼•ç”¨httpreports&quot;&gt;å¼•ç”¨HttpReports&lt;/h2&gt;
&lt;p&gt;æˆ‘æ–°å»ºä¸€ä¸ªWebAPI é¡¹ç›® UserService ï¼Œæ¥å……å½“ç”¨æˆ·æœåŠ¡ï¼Œç„¶åå®‰è£… HttpReportsï¼Œå½“ç„¶ä½ å¯ä»¥åœ¨ä½ çš„é¡¹ç›®ä¸­ç›´æ¥ä½¿ç”¨&lt;/p&gt;
&lt;p&gt;Nuget å¼•ç”¨ HttpReports , HttpReports.Transport.Http&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://httpreports2-1259586045.cos.ap-shanghai.myqcloud.com/UseHttpReports.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¿®æ”¹ appsettings.jsonï¼Œç®€å•é…ç½®ä¸€ä¸‹&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-json&quot;&gt;{
 &quot;HttpReports&quot;: {
   &quot;Transport&quot;: {
     &quot;CollectorAddress&quot;: &quot;http://localhost:5000/&quot;,
     &quot;DeferSecond&quot;: 10,
     &quot;DeferThreshold&quot;: 10
   },
   &quot;Server&quot;: &quot;http://localhost:7000&quot;,
   &quot;Service&quot;: &quot;User&quot;,
   &quot;Switch&quot;: true,
   &quot;RequestFilter&quot;: [ &quot;/api/Helath/*&quot;, &quot;/HttpReports*&quot; ],
   &quot;WithRequest&quot;: true,
   &quot;WithResponse&quot;: true,
   &quot;WithCookie&quot;: true,
   &quot;WithHeader&quot;: true
 }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å‚æ•°ä»‹ç»ï¼š&lt;/p&gt;
&lt;p&gt;Transport -&lt;br/&gt;CollectorAddress - æ•°æ®å‘é€çš„åœ°å€ï¼Œé…ç½®Dashboard çš„é¡¹ç›®åœ°å€å³å¯&lt;br/&gt;DeferSecond - æ‰¹é‡æ•°æ®å…¥åº“çš„ç§’æ•°ï¼Œå»ºè®®å€¼ 5-60&lt;br/&gt;DeferThreshold - æ‰¹é‡æ•°æ®å…¥åº“çš„æ•°é‡ï¼Œå»ºè®®å€¼100-1000&lt;/p&gt;
&lt;p&gt;Server - æœåŠ¡çš„åœ°å€,&lt;br/&gt;Service - æœåŠ¡çš„åç§°&lt;br/&gt;Switch - æ˜¯å¦å¼€å¯æ”¶é›†æ•°æ®&lt;br/&gt;RequestFilter - æ•°æ®è¿‡æ»¤ï¼Œç”¨ * æ¥æ¨¡ç³ŠåŒ¹é…&lt;br/&gt;WithRequest - æ˜¯å¦è®°å½•æ¥å£çš„å…¥å‚&lt;br/&gt;WithResponse - æ˜¯å¦è®°å½•æ¥å£çš„å‡ºå‚&lt;br/&gt;WithCookie - æ˜¯å¦è®°å½•Cookie ä¿¡æ¯&lt;br/&gt;WithHeader - æ˜¯å¦è®°å½•è¯·æ±‚Headerä¿¡æ¯&lt;/p&gt;
&lt;p&gt;ä¿®æ”¹å®Œæˆåï¼Œæˆ‘ä»¬æ¥ç€ä¿®æ”¹ UserService é¡¹ç›®çš„ Startup.cs æ–‡ä»¶&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;public void ConfigureServices(IServiceCollection services)
{
     services.AddHttpReports().UseHttpTransport();
     services.AddControllers();
}

        
public void Configure(IApplicationBuilder app, IWebHostEnvironment env)
{
     app.UseHttpReports();
     ....
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¿®æ”¹ UserService é¡¹ç›®çš„å¯åŠ¨ç«¯å£ä¸º7000ï¼Œ ç„¶å VS è®¾ç½®å¤šé¡¹ç›®å¯åŠ¨ï¼Œ åŒæ—¶è¿è¡Œ UserService å’ŒDashboard&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;public static IHostBuilder CreateHostBuilder(string[] args) =&amp;gt;
    Host.CreateDefaultBuilder(args)
    .ConfigureWebHostDefaults(webBuilder =&amp;gt;
                {
                     webBuilder.UseStartup&amp;lt;Startup&amp;gt;().UseUrls(&quot;http://localhost:7000&quot;);
                });
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åˆ·æ–°ä¸‹ UserService çš„æ¥å£ï¼Œå†å›åˆ°Dashboardçš„é¡µé¢ä¸Šé¢ï¼Œå·²ç»å¯ä»¥çœ‹åˆ°æ•°æ®äº†ï¼Œä¸€ä¸ªç®€å•çš„æœåŠ¡æ¥å…¥HttpReportsï¼Œå·²ç»å®Œæˆäº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•!&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://httpreports2-1259586045.cos.ap-shanghai.myqcloud.com/index.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;é…ç½®ipå’Œç«¯å£--server&quot;&gt;é…ç½®IPå’Œç«¯å£ Server&lt;/h4&gt;
&lt;p&gt;HttpReports éœ€è¦æ˜¾å¼æŒ‡å®šWebç¨‹åºçš„IPå’Œç«¯å£ï¼Œå½“ç„¶è¿™ä¸ªåœ°å€ç”¨å¤–ç½‘å’Œå†…ç½‘çš„éƒ½å¯ä»¥ï¼Œåœ¨å¾®æœåŠ¡ç¯å¢ƒä¸­ï¼Œ ä¸€ä¸ªæœåŠ¡ä¼šå¼€å¯å¤šä¸ªå®ä¾‹ï¼Œ HttpReports é€šè¿‡IPå’Œç«¯å£æ¥åŒºåˆ†ä¸åŒçš„ç¨‹åºå®ä¾‹ã€‚&lt;/p&gt;
&lt;h4 id=&quot;åœ¨appsettingjson-ä¸­é…ç½®&quot;&gt;åœ¨appsetting.json ä¸­é…ç½®&lt;/h4&gt;
&lt;p&gt;æˆ‘ä»¬ç›´æ¥åœ¨ appsetting.json ä¸­è®¾ç½® Urls å±æ€§ï¼Œä½ å¯ä»¥è®¾ç½® &quot;Server&quot;: &quot;&lt;a href=&quot;http://127.0.0.1:3000&quot;&gt;http://127.0.0.1:3000&lt;/a&gt;&quot;&lt;br/&gt;åœ¨å‘½ä»¤è¡Œå‚æ•°ä¸­é…ç½®&lt;/p&gt;
&lt;p&gt;&lt;code&gt;dotnet UserService.dll --urls=&quot;http://127.0.0.1:3000&quot;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æˆ–è€…&lt;/p&gt;
&lt;p&gt;&lt;code&gt;dotnet UserService.dll --HttpReports:Server=&quot;http://127.0.0.1:5000&quot;&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&quot;äº¤æµæ²Ÿé€š&quot;&gt;äº¤æµæ²Ÿé€š&lt;/h2&gt;
&lt;p&gt;è´¡çŒ®çš„æœ€ç®€å•çš„æ–¹æ³•ä¹‹ä¸€å°±æ˜¯æ˜¯å‚ä¸è®¨è®ºå’Œè®¨è®ºé—®é¢˜ï¼ˆissueï¼‰ã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡æäº¤çš„ Pull Request ä»£ç å˜æ›´ä½œå‡ºè´¡çŒ®ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥æ·»åŠ QQç¾¤æ²Ÿé€šï¼Œä¹Ÿå¯ä»¥æ·»åŠ çš„å¾®ä¿¡ï¼Œæˆ‘æ‹‰ä½ è¿›å¾®ä¿¡ç¾¤&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://httpreports2-1259586045.cos.ap-shanghai.myqcloud.com/goutong.jpeg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;å†™åœ¨æœ€å&quot;&gt;å†™åœ¨æœ€å&lt;/h2&gt;
&lt;p&gt;HttpReports ä»ç¬¬ä¸€æ¬¡æäº¤ä»£ç åˆ°ç°åœ¨å·²ç»10ä¸ªæœˆäº†ï¼Œå…¼èŒå¼€æºï¼Œå æ®äº†ç”Ÿæ´»å¾ˆå¤§ä¸€éƒ¨åˆ†çš„æ—¶é—´ï¼Œ ä¸€ä¸ªä¸ªç‰ˆæœ¬è¿­ä»£åˆ°ç°åœ¨ï¼Œ2.0 ä¸æ˜¯æœ€ç»ˆç‰ˆï¼Œæœªæ¥å¯èƒ½ä¼šæœ‰ 3.0 5.0ï¼Œæˆ‘çœ‹æ”¯æŒçš„åŒå­¦ä¹Ÿæœ‰å¾ˆå¤šï¼Œæœ‰å¾ˆå¤šäººæäº†å¾ˆå¤šæ„è§ï¼Œæ„Ÿè°¢å„ä½çš„æ”¯æŒï¼Œè®©æˆ‘ä»¬è§‰å¾—åšè¿™ä»¶äº‹æ˜¯æœ‰æ„ä¹‰çš„ï¼Œä¸€å®šä¼šæŠŠ HttpReports åšçš„è¶Šæ¥è¶Šå¥½&lt;/p&gt;
</description>
<pubDate>Tue, 13 Oct 2020 00:19:00 +0000</pubDate>
<dc:creator>SpringLeee</dc:creator>
<og:description>&amp;amp;#127808; å‰è¨€ä»‹ç» HttpReports æ˜¯åŸºäº.Net Core å¼€å‘çš„APMç›‘æ§ç³»ç»Ÿï¼Œä½¿ç”¨MITå¼€æºåè®®ï¼Œä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼Œç»Ÿè®¡, åˆ†æ, å¯è§†åŒ–ï¼Œ ç›‘æ§ï¼Œè¿½è¸ªç­‰ï¼Œé€‚åˆåœ¨å¾®æœåŠ¡ç¯å¢ƒ</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/myshowtime/p/13806631.html</dc:identifier>
</item>
<item>
<title>Flinkæ·±å…¥æµ…å‡º: èµ„æºç®¡ç†(v1.11) - xingoo</title>
<link>http://www.cnblogs.com/xing901022/p/13806624.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/xing901022/p/13806624.html</guid>
<description>&lt;p&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/4PPc462eOOPtdLVtNgBOmakV7gaElDPTjWViapmicR9OruxaWU4ddCNVFbuicDJlxFSkUibIjWeW5ibzT7Bj0JxZ2Qw/640?wx_fmt=jpeg&quot; class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.5453125&quot; data-s=&quot;300,640&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;
&lt;p&gt;â€”â€” å›¾ç‰‡æ¥è‡ª ã€Šå›½å®¶åœ°ç†ä¸­æ–‡ç½‘ã€‹â€”â€”&lt;/p&gt;
&lt;p&gt;å¾€æœŸæ¨èï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NjY0NTQxNw==&amp;amp;mid=2247484987&amp;amp;idx=1&amp;amp;sn=cc08ab620f15d510a7c3c0700651e013&amp;amp;chksm=fbc0ab7dccb7226b8aa0d8b31f62cd4847a70beb43f67c7982d14b005b9873972027ab68178f&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot; data-itemshowtype=&quot;0&quot; data-linktype=&quot;2&quot;&gt;Flinkæ·±å…¥æµ…å‡ºï¼šéƒ¨ç½²æ¨¡å¼&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NjY0NTQxNw==&amp;amp;mid=2247484974&amp;amp;idx=1&amp;amp;sn=f02489295de20d1398b38f2ee0e939ab&amp;amp;chksm=fbc0ab68ccb7227e243ab7db77bde55bec5c9ba5ef0a7940eb5a14000c150c3723aab30f4c5a&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot; data-itemshowtype=&quot;0&quot; data-linktype=&quot;2&quot;&gt;Flinkæ·±å…¥æµ…å‡ºï¼šå†…å­˜æ¨¡å‹&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NjY0NTQxNw==&amp;amp;mid=2247484547&amp;amp;idx=1&amp;amp;sn=eaab22866f7e0fa492f79349f38604e6&amp;amp;chksm=fbc0a9c5ccb720d3c7b18de81c88f6175cb1f83286b82b253e73268a2eeb4b2a3cd5e73ab748&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot; data-itemshowtype=&quot;0&quot; data-linktype=&quot;2&quot;&gt;Flinkæ·±å…¥æµ…å‡ºï¼šJDBC Sourceä»ç†è®ºåˆ°å®æˆ˜&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NjY0NTQxNw==&amp;amp;mid=2247484529&amp;amp;idx=1&amp;amp;sn=2dbdb75daad3f248ededd88449d77f02&amp;amp;chksm=fbc0a937ccb72021a5f06a70609b9d87f043c8fd33f423a0079885da3acf7cecd14d49f2dff4&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot; data-itemshowtype=&quot;0&quot; data-linktype=&quot;2&quot;&gt;Flinkæ·±å…¥æµ…å‡ºï¼šSql Gatewayæºç åˆ†æ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NjY0NTQxNw==&amp;amp;mid=2247484513&amp;amp;idx=1&amp;amp;sn=0402cb44d2ad55cde6b3990010e3b59d&amp;amp;chksm=fbc0a927ccb72031d94d26fe7d43fb66be7e2059fab599b35055e8d257cd21feecbc0a15b476&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot; data-itemshowtype=&quot;0&quot; data-linktype=&quot;2&quot;&gt;Flinkæ·±å…¥æµ…å‡ºï¼šJDBC Connectoræºç åˆ†æ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NjY0NTQxNw==&amp;amp;mid=2247484952&amp;amp;idx=1&amp;amp;sn=b1c9b8220a207e41effd2004bae2fa95&amp;amp;chksm=fbc0ab5eccb72248cc010d0ab1940c53e9bf1aa2986fcf69567f4ba158e37e3cdc42f5d564dc&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot; data-itemshowtype=&quot;0&quot; data-linktype=&quot;2&quot;&gt;ä»€ä¹ˆæ˜¯Flink ä¹‹ æ¶æ„ç¯‡&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NjY0NTQxNw==&amp;amp;mid=2247484959&amp;amp;idx=1&amp;amp;sn=72f546e72c6d1e5fc8e17c991a593a88&amp;amp;chksm=fbc0ab59ccb7224fdf88edbbe92ed504a2bf47561fa8a0602639b56038da89c80c231b936747&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot; data-itemshowtype=&quot;0&quot; data-linktype=&quot;2&quot;&gt;ä»€ä¹ˆæ˜¯Flink ä¹‹ åº”ç”¨ç¯‡&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Flinkåœ¨èµ„æºç®¡ç†ä¸Šå¯ä»¥åˆ†ä¸ºä¸¤å±‚ï¼š&lt;strong&gt;é›†ç¾¤èµ„æº&lt;/strong&gt;å’Œ&lt;strong&gt;è‡ªèº«èµ„æº&lt;/strong&gt;ã€‚é›†ç¾¤èµ„æºæ”¯æŒä¸»æµçš„èµ„æºç®¡ç†ç³»ç»Ÿï¼Œå¦‚yarnã€mesosã€k8sç­‰ï¼Œä¹Ÿæ”¯æŒç‹¬ç«‹å¯åŠ¨çš„standaloneé›†ç¾¤ã€‚è‡ªèº«èµ„æºæ¶‰åŠåˆ°æ¯ä¸ªå­taskçš„èµ„æºä½¿ç”¨ï¼Œç”±Flinkè‡ªèº«ç»´æŠ¤ã€‚&lt;/p&gt;

&lt;h2&gt;&lt;strong&gt;1 é›†ç¾¤æ¶æ„å‰–æ&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Â &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Flinkçš„è¿è¡Œä¸»è¦ç”± å®¢æˆ·ç«¯ã€ä¸€ä¸ªJobManagerï¼ˆåæ–‡ç®€ç§°JMï¼‰å’Œ ä¸€ä¸ªä»¥ä¸Šçš„TaskManagerï¼ˆç®€ç§°TMæˆ–Workerï¼‰ç»„æˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/4PPc462eOOPtdLVtNgBOmakV7gaElDPTvakOegRvHhmpegLicqDBKNtvXfLLSl5Rpib5vNgYyFLwc1icOMwkeguxg/640?wx_fmt=png&quot; class=&quot;rich_pages&quot; data-ratio=&quot;0.725&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;880&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®¢æˆ·ç«¯&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Â &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å®¢æˆ·ç«¯ä¸»è¦ç”¨äºæäº¤ä»»åŠ¡åˆ°é›†ç¾¤ï¼Œåœ¨Sessionæˆ–Per Jobæ¨¡å¼ä¸­ï¼Œå®¢æˆ·ç«¯ç¨‹åºè¿˜è¦è´Ÿè´£è§£æç”¨æˆ·ä»£ç ï¼Œç”ŸæˆJobGraphï¼›åœ¨Applicationæ¨¡å¼ä¸­ï¼Œç›´æ¥æäº¤ç”¨æˆ·jarå’Œæ‰§è¡Œå‚æ•°å³å¯ã€‚å®¢æˆ·ç«¯ä¸€èˆ¬æ”¯æŒä¸¤ç§æ¨¡å¼ï¼šdetachedæ¨¡å¼ï¼Œå®¢æˆ·ç«¯æäº¤åè‡ªåŠ¨é€€å‡ºã€‚attachedæ¨¡å¼ï¼Œå®¢æˆ·ç«¯æäº¤åé˜»å¡ç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œæ¯•å†é€€å‡ºã€‚Â &lt;/p&gt;

&lt;p&gt;&lt;strong&gt;JobManager&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Â &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;JMè´Ÿè´£å†³å®šåº”ç”¨ä½•æ—¶è°ƒåº¦taskï¼Œåœ¨taskæ‰§è¡Œç»“æŸæˆ–å¤±è´¥æ—¶å¦‚ä½•å¤„ç†ï¼Œåè°ƒæ£€æŸ¥ç‚¹ã€æ•…éšœæ¢å¤ã€‚è¯¥è¿›ç¨‹ä¸»è¦ç”±ä¸‹é¢å‡ ä¸ªéƒ¨åˆ†ç»„æˆï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1 ResourceManager&lt;/strong&gt;ï¼Œè´Ÿè´£èµ„æºçš„ç”³è¯·å’Œé‡Šæ”¾ã€ç®¡ç†slotï¼ˆFlinké›†ç¾¤ä¸­æœ€ç»†ç²’åº¦çš„èµ„æºç®¡ç†å•å…ƒï¼‰ã€‚Flinkå®ç°äº†å¤šç§RMçš„å®ç°æ–¹æ¡ˆä»¥é€‚é…å¤šç§èµ„æºç®¡ç†æ¡†æ¶ï¼Œå¦‚yarnã€mesosã€k8sæˆ–standaloneã€‚åœ¨standaloneæ¨¡å¼ä¸‹ï¼ŒRMåªèƒ½åˆ†é…slotï¼Œè€Œä¸èƒ½å¯åŠ¨æ–°çš„TMã€‚æ³¨æ„ï¼šè¿™é‡Œæ‰€è¯´çš„RMè·ŸYarnçš„RMä¸æ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œè¿™é‡Œçš„RMæ˜¯JMä¸­çš„ä¸€ä¸ªç‹¬ç«‹çš„æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2 Dispatcher&lt;/strong&gt;ï¼Œæä¾›Flinkæäº¤ä»»åŠ¡çš„restæ¥å£ï¼Œä¸ºæ¯ä¸ªæäº¤çš„ä»»åŠ¡å¯åŠ¨æ–°çš„JobMasterï¼Œä¸ºæ‰€æœ‰çš„ä»»åŠ¡æä¾›web uiï¼ŒæŸ¥è¯¢ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3 JobMaster&lt;/strong&gt;ï¼Œè´Ÿè´£ç®¡ç†æ‰§è¡Œå•ä¸ªJobGraphï¼Œå¤šä¸ªä»»åŠ¡å¯ä»¥åŒæ—¶åœ¨ä¸€ä¸ªé›†ç¾¤ä¸­å¯åŠ¨ï¼Œæ¯ä¸ªéƒ½æœ‰è‡ªå·±çš„JobMasterã€‚æ³¨æ„è¿™é‡Œçš„JobMasterå’ŒJobManagerçš„åŒºåˆ«ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;TaskManager&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Â &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;TMä¹Ÿå«åšworkerï¼Œç”¨äºæ‰§è¡Œæ•°æ®æµå›¾ä¸­çš„ä»»åŠ¡ï¼Œç¼“å­˜å¹¶äº¤æ¢æ•°æ®ã€‚é›†ç¾¤è‡³å°‘æœ‰ä¸€ä¸ªTMï¼ŒTMä¸­æœ€å°çš„èµ„æºç®¡ç†å•å…ƒæ˜¯Slotï¼Œæ¯ä¸ªSlotå¯ä»¥æ‰§è¡Œä¸€ä¸ªTaskï¼Œå› æ­¤TMä¸­slotçš„æ•°é‡å°±ä»£è¡¨åŒæ—¶å¯ä»¥æ‰§è¡Œä»»åŠ¡çš„æ•°é‡ã€‚&lt;/p&gt;

&lt;h2&gt;2 Slotä¸èµ„æºç®¡ç†&lt;/h2&gt;

&lt;p&gt;æ¯ä¸ªTMæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„JVMè¿›ç¨‹ï¼Œå†…éƒ¨åŸºäºç‹¬ç«‹çš„çº¿ç¨‹æ‰§è¡Œä¸€ä¸ªæˆ–å¤šä¸ªä»»åŠ¡ã€‚TMä¸ºäº†æ§åˆ¶æ¯ä¸ªä»»åŠ¡çš„æ‰§è¡Œèµ„æºï¼Œä½¿ç”¨task slotæ¥è¿›è¡Œç®¡ç†ã€‚æ¯ä¸ªtask slotä»£è¡¨TMä¸­çš„ä¸€éƒ¨åˆ†å›ºå®šçš„èµ„æºï¼Œæ¯”å¦‚ä¸€ä¸ªTMæœ‰3ä¸ªslotï¼Œæ¯ä¸ªslotå°†ä¼šå¾—åˆ°TMçš„1/3å†…å­˜èµ„æºã€‚ä¸åŒä»»åŠ¡ä¹‹é—´ä¸ä¼šè¿›è¡Œèµ„æºçš„æŠ¢å ï¼Œæ³¨æ„GPUç›®å‰æ²¡æœ‰è¿›è¡Œéš”ç¦»ï¼Œç›®å‰slotåªèƒ½åˆ’åˆ†å†…å­˜èµ„æºã€‚&lt;/p&gt;

&lt;p&gt;æ¯”å¦‚ä¸‹é¢çš„æ•°æ®æµå›¾ï¼Œåœ¨æ‰©å±•æˆå¹¶è¡Œæµå›¾åï¼ŒåŒä¸€çš„taskå¯èƒ½åˆ†æ‹†æˆå¤šä¸ªä»»åŠ¡å¹¶è¡Œåœ¨é›†ç¾¤ä¸­æ‰§è¡Œã€‚æ“ä½œé“¾å¯ä»¥æŠŠå¤šä¸ªä¸åŒçš„ä»»åŠ¡è¿›è¡Œåˆå¹¶ï¼Œä»è€Œæ”¯æŒåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­å…ˆåæ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œæ— éœ€é¢‘ç¹é‡Šæ”¾ç”³è¯·çº¿ç¨‹ã€‚åŒæ—¶æ“ä½œé“¾è¿˜å¯ä»¥ç»Ÿä¸€ç¼“å­˜æ•°æ®ï¼Œå¢åŠ æ•°æ®å¤„ç†ååé‡ï¼Œé™ä½å¤„ç†å»¶è¿Ÿã€‚&lt;/p&gt;

&lt;p&gt;åœ¨Flinkä¸­ï¼Œæƒ³è¦ä¸åŒå­ä»»åŠ¡åˆå¹¶éœ€è¦æ»¡è¶³å‡ ä¸ªæ¡ä»¶ï¼šä¸‹æ¸¸èŠ‚ç‚¹çš„å…¥è¾¹æ˜¯1ï¼ˆä¿è¯ä¸å­˜åœ¨æ•°æ®çš„shuffleï¼‰ï¼›å­ä»»åŠ¡çš„ä¸Šä¸‹æ¸¸ä¸ä¸ºç©ºï¼›è¿æ¥ç­–ç•¥æ€»æ˜¯ALWAYSï¼›åˆ†åŒºç±»å‹ä¸ºForwardPartitionerï¼›å¹¶è¡Œåº¦ä¸€è‡´ï¼›å½“å‰Flinkå¼€å¯Chainç‰¹æ€§ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/4PPc462eOOPtdLVtNgBOmakV7gaElDPTXN1Q6BekV4CqDgOfXXCiaTTDtldjiaG4LIN7g5nibyqUPeM1iaYeicoZehA/640?wx_fmt=png&quot; class=&quot;rich_pages&quot; data-ratio=&quot;0.66721044045677&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;613&quot;/&gt;&lt;/p&gt;
&lt;p&gt;åœ¨é›†ç¾¤ä¸­çš„æ‰§è¡Œå›¾å¯èƒ½å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/4PPc462eOOPtdLVtNgBOmakV7gaElDPT5dYqyKgqJxNlOGw0YMBwkwOVORmyW6OyppAuDIffKnh69oE9WtF9ibw/640?wx_fmt=png&quot; class=&quot;rich_pages&quot; data-ratio=&quot;0.327991452991453&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;936&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Flinkä¹Ÿæ”¯æŒslotçš„å…±äº«ï¼Œå³æŠŠä¸åŒä»»åŠ¡æ ¹æ®ä»»åŠ¡çš„ä¾èµ–å…³ç³»åˆ†é…åˆ°åŒä¸€ä¸ªSlotä¸­ã€‚è¿™æ ·å¸¦æ¥å‡ ä¸ªå¥½å¤„ï¼šæ–¹ä¾¿ç»Ÿè®¡å½“å‰ä»»åŠ¡æ‰€éœ€çš„æœ€å¤§èµ„æºé…ç½®ï¼ˆæŸä¸ªå­ä»»åŠ¡çš„æœ€å¤§å¹¶è¡Œåº¦ï¼‰ï¼›é¿å…Slotçš„è¿‡å¤šç”³è¯·ä¸é‡Šæ”¾ï¼Œæå‡Slotçš„ä½¿ç”¨æ•ˆç‡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/4PPc462eOOPtdLVtNgBOmakV7gaElDPTTSwSq9CZjOiakD8d1b5PtyaFlbKnGU4OG0F15KczhG79EgzZuicWyxgg/640?wx_fmt=png&quot; class=&quot;rich_pages&quot; data-ratio=&quot;0.47103004291845496&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;932&quot;/&gt;&lt;/p&gt;
&lt;p&gt;é€šè¿‡Slotå…±äº«ï¼Œå°±æœ‰å¯èƒ½æŸä¸ªSlotä¸­åŒ…å«å®Œæ•´çš„ä»»åŠ¡æ‰§è¡Œé“¾è·¯ã€‚&lt;/p&gt;

&lt;h2&gt;&lt;strong&gt;3 åº”ç”¨æ‰§è¡Œ&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Â &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªFlinkåº”ç”¨å°±æ˜¯ç”¨æˆ·ç¼–å†™çš„mainå‡½æ•°ï¼Œå…¶ä¸­å¯èƒ½åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªFlinkçš„ä»»åŠ¡ã€‚è¿™äº›ä»»åŠ¡å¯ä»¥åœ¨æœ¬åœ°æ‰§è¡Œï¼Œä¹Ÿå¯ä»¥åœ¨è¿œç¨‹é›†ç¾¤å¯åŠ¨ï¼Œé›†ç¾¤æ—¢å¯ä»¥é•¿æœŸè¿è¡Œï¼Œä¹Ÿæ”¯æŒç‹¬ç«‹å¯åŠ¨ã€‚ä¸‹é¢æ˜¯ç›®å‰æ”¯æŒçš„ä»»åŠ¡æäº¤æ–¹æ¡ˆï¼š&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Sessioné›†ç¾¤&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Â &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;ï¼šé›†ç¾¤äº‹å…ˆåˆ›å»ºå¹¶é•¿æœŸè¿è¡Œï¼Œå®¢æˆ·ç«¯æäº¤ä»»åŠ¡æ—¶ä¸è¯¥é›†ç¾¤è¿æ¥ã€‚å³ä½¿æ‰€æœ‰ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæ¯•ï¼Œé›†ç¾¤ä»ä¼šä¿æŒè¿è¡Œï¼Œé™¤éæ‰‹åŠ¨åœæ­¢ã€‚å› æ­¤é›†ç¾¤çš„ç”Ÿå‘½å‘¨æœŸä¸ä»»åŠ¡æ— å…³ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;èµ„æºéš”ç¦»&lt;/strong&gt;ï¼šTMçš„slotç”±RMç”³è¯·ï¼Œå½“ä¸Šé¢çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä¼šè‡ªåŠ¨è¿›è¡Œé‡Šæ”¾ã€‚ç”±äºå¤šä¸ªä»»åŠ¡ä¼šå…±äº«ç›¸åŒçš„é›†ç¾¤ï¼Œå› æ­¤ä»»åŠ¡é—´ä¼šå­˜åœ¨ç«äº‰ï¼Œæ¯”å¦‚ç½‘ç»œå¸¦å®½ç­‰ã€‚å¦‚æœæŸä¸ªTMæŒ‚æ‰ï¼Œä¸Šé¢çš„æ‰€æœ‰ä»»åŠ¡éƒ½ä¼šå¤±è´¥ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å…¶ä»–æ–¹é¢&lt;/strong&gt;ï¼šæ‹¥æœ‰æå‰åˆ›å»ºçš„é›†ç¾¤ï¼Œå¯ä»¥é¿å…æ¯æ¬¡ä½¿ç”¨çš„æ—¶å€™è¿‡å¤šè€ƒè™‘é›†ç¾¤é—®é¢˜ã€‚æ¯”è¾ƒé€‚åˆé‚£äº›æ‰§è¡Œæ—¶é—´å¾ˆçŸ­ï¼Œå¯¹å¯åŠ¨æ—¶é—´æœ‰æ¯”è¾ƒé«˜çš„è¦æ±‚çš„åœºæ™¯ï¼Œæ¯”å¦‚äº¤äº’å¼æŸ¥è¯¢åˆ†æã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Per Jobé›†ç¾¤&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Â &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;ï¼šä¸ºæ¯ä¸ªæäº¤çš„ä»»åŠ¡å•ç‹¬åˆ›å»ºä¸€ä¸ªé›†ç¾¤ï¼Œå®¢æˆ·ç«¯åœ¨æäº¤ä»»åŠ¡æ—¶ï¼Œç›´æ¥ä¸ClusterManageræ²Ÿé€šç”³è¯·åˆ›å»ºJMå¹¶åœ¨å†…éƒ¨è¿è¡Œæäº¤çš„ä»»åŠ¡ã€‚TMåˆ™æ ¹æ®ä»»åŠ¡è¿è¡Œéœ€è¦çš„èµ„æºå»¶è¿Ÿç”³è¯·ã€‚ä¸€æ—¦ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œé›†ç¾¤å°†ä¼šè¢«å›æ”¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;èµ„æºéš”ç¦»&lt;/strong&gt;ï¼šä»»åŠ¡å¦‚æœå‡ºç°è‡´å‘½é—®é¢˜ï¼Œä»…ä¼šå½±å“è‡ªå·±çš„ä»»åŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å…¶ä»–æ–¹é¢&lt;/strong&gt;ï¼šç”±äºRMéœ€è¦ç”³è¯·å’Œç­‰å¾…èµ„æºï¼Œå› æ­¤å¯åŠ¨æ—¶é—´ä¼šç¨é•¿ï¼Œé€‚åˆå•ä¸ªæ¯”è¾ƒå¤§ã€é•¿æ—¶é—´è¿è¡Œã€éœ€è¦ä¿è¯é•¿æœŸçš„ç¨³å®šæ€§ã€ä¸åœ¨ä¹å¯åŠ¨æ—¶é—´çš„ä»»åŠ¡ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Applicationé›†ç¾¤&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Â &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç”Ÿå‘½å‘¨æœŸ&lt;/strong&gt;ï¼šä¸Per Jobç±»ä¼¼ï¼Œåªæ˜¯main()æ–¹æ³•è¿è¡Œåœ¨é›†ç¾¤ä¸­ã€‚ä»»åŠ¡çš„æäº¤ç¨‹åºå¾ˆç®€å•ï¼Œä¸éœ€è¦å¯åŠ¨æˆ–è¿æ¥é›†ç¾¤ï¼Œè€Œæ˜¯ç›´æ¥æŠŠåº”ç”¨ç¨‹åºæ‰“åŒ…åˆ°èµ„æºç®¡ç†ç³»ç»Ÿä¸­å¹¶å¯åŠ¨å¯¹åº”çš„EntryPointï¼Œåœ¨EntryPointä¸­è°ƒç”¨ç”¨æˆ·ç¨‹åºçš„main()æ–¹æ³•ï¼Œè§£æç”ŸæˆJobGraphï¼Œç„¶åå¯åŠ¨è¿è¡Œã€‚é›†ç¾¤çš„ç”Ÿå‘½å‘¨æœŸä¸åº”ç”¨ç›¸åŒã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;èµ„æºéš”ç¦»&lt;/strong&gt;ï¼šRMå’ŒDispatcheræ˜¯åº”ç”¨çº§åˆ«ã€‚Â &lt;/p&gt;

</description>
<pubDate>Tue, 13 Oct 2020 00:13:00 +0000</pubDate>
<dc:creator>xingoo</dc:creator>
<og:description>â€”â€” å›¾ç‰‡æ¥è‡ª ã€Šå›½å®¶åœ°ç†ä¸­æ–‡ç½‘ã€‹â€”â€” å¾€æœŸæ¨èï¼š Flinkæ·±å…¥æµ…å‡ºï¼šéƒ¨ç½²æ¨¡å¼ Flinkæ·±å…¥æµ…å‡ºï¼šå†…å­˜æ¨¡å‹ Flinkæ·±å…¥æµ…å‡ºï¼šJDBC Sourceä»ç†è®ºåˆ°å®æˆ˜ Flinkæ·±å…¥æµ…å‡ºï¼šSql Ga</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/xing901022/p/13806624.html</dc:identifier>
</item>
<item>
<title>å¦‚ä½•å¿«é€Ÿæ„å»ºReactç»„ä»¶åº“ - jdf2e</title>
<link>http://www.cnblogs.com/jdrdfe/p/13805669.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/jdrdfe/p/13805669.html</guid>
<description>&lt;h3 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h3&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;ä¿—è¯è¯´ï¼šâ€œéº»é›€è™½å°ï¼Œäº”è„ä¿±å…¨â€ï¼Œæ­å»ºä¸€ä¸ªç»„ä»¶åº“ï¼ŒçŸ¥ä¹‹ééš¾ï¼Œè¡Œä¹‹ä¸æ˜“ï¼Œæ¶‰åŠåˆ°çš„æŠ€æœ¯æ–¹æ–¹é¢é¢ï¼ŒçŠ¹å¦‚æµ·é¢é£å¹³æµªé™ï¼Œå®åˆ™æš—ç¤é™©æ»©ï¼Œå¤„å¤„æƒŠé™©ï½&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç›®å‰å›¢é˜Ÿå†…å·²ç»æœ‰è¾ƒä¸ºæˆç†Ÿçš„ Vue æŠ€æœ¯æ ˆçš„ &lt;a href=&quot;http://nutui.jd.com/#/index&quot;&gt;NutUI ç»„ä»¶åº“&lt;/a&gt;[1] å’Œ React æŠ€æœ¯æ ˆçš„ &lt;a href=&quot;http://yep-react.jd.com/#/&quot;&gt;yep-react ç»„ä»¶åº“&lt;/a&gt;[2]ã€‚ç„¶è€Œè¿™äº›ç»„ä»¶åº“å¤§éƒ½ä»é›¶å¼€å§‹æ­å»ºï¼ŒåŒ…æ‹¬ Webpack çš„ç¹æ‚é…ç½®ï¼ŒMarkdown æ–‡ä»¶è½¬ Vue æ–‡ä»¶åŠŸèƒ½çš„å¼€å‘ï¼Œå•å…ƒæµ‹è¯•åŠŸèƒ½çš„å¼€å‘ã€æŒ‰éœ€åŠ è½½çš„ Babel æ’ä»¶å¼€å‘ç­‰ç­‰ï¼Œå®Œæˆæ•´ä¸ªç»„ä»¶åº“é¡¹ç›®å®å±ä¸æ˜“ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæµ©å¤§çš„å·¥ç¨‹ã€‚å¦‚æœæˆ‘ä»¬æƒ³å¿«é€Ÿæ­å»ºä¸€ä¸ªç»„ä»¶åº“ï¼Œå¤§å¯ä¸å¿…å¦‚æ­¤è€—è´¹ç²¾åŠ›ï¼Œå¯ä»¥å€ŸåŠ©ä¸šå†…ä¸“ä¸šçš„ç›¸å…³åº“ï¼Œç»è¿‡æ‹¼è£…è°ƒè¯•ï¼Œå¿«é€Ÿå®ç°ä¸€ä¸ªç»„ä»¶åº“ã€‚&lt;br/&gt;æœ¬ç¯‡æ–‡ç« å°±æ¥ç»™å¤§å®¶ä»‹ç»ä¸€ä¸‹ä½¿ç”¨ create-react-app è„šæ‰‹æ¶ã€docz æ–‡æ¡£ç”Ÿæˆå™¨ã€node-sassã€ç»“åˆ Netlify éƒ¨ç½²é¡¹ç›®çš„æ•´ä¸ªå¼€å‘ç»„ä»¶åº“çš„æµç¨‹ï¼Œæœ¬ç€åŒ…æ•™åŒ…ä¼šï¼Œä¸ä¼šæ²¡æœ‰é€€è´¹çš„åŸåˆ™ï¼Œæ¥ä¸€åœºæ‰‹æ‘¸æ‰‹å¼æ•™å­¦ï¼Œè¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬è¿›å…¥æ­£é¢˜ï¼š&lt;/p&gt;
&lt;p&gt;é¦–å…ˆçœ‹ä¸€ä¸‹ç»„ä»¶åº“çš„æœ€ç»ˆæ•ˆæœï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img10.360buyimg.com/imagetools/jfs/t1/140939/29/4093/150666/5f226b00E7e6992d6/78a95d4b8f525de2.png&quot; alt=&quot;ç»„ä»¶åº“ç•Œé¢&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡å°†ä»ä»¥ä¸‹æ­¥éª¤ä»‹ç»å¦‚ä½•æ­å»ºä¸€ä¸ª React ç»„ä»¶åº“ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img11.360buyimg.com/imagetools/jfs/t1/112907/10/14445/25118/5f30b668E8f85dca0/ee665bd4619fde7a.png&quot; alt=&quot;æ–‡ç« ç»“æ„&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;ä¸€ã€æ„å»ºæœ¬åœ°å¼€å‘ç¯å¢ƒ&quot;&gt;ä¸€ã€æ„å»ºæœ¬åœ°å¼€å‘ç¯å¢ƒ&lt;/h3&gt;
&lt;p&gt;å¼€å‘ä¸€ä¸ªç»„ä»¶åº“çš„é¦–è¦æ­¥éª¤å°±æ˜¯è°ƒè¯•æœ¬åœ° React ç¯å¢ƒï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨ React å®˜æ–¹è„šæ‰‹æ¶ &lt;code&gt;create-react-app&lt;/code&gt;ï¼Œå¯ä»¥çœå»ä»åº•å±‚é…ç½® Webpack+TypeScript+React çš„æ‘§æ®‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1ã€ä½¿ç”¨ create-react-app åˆå§‹åŒ–è„šæ‰‹æ¶ï¼Œå¹¶ä¸”å®‰è£… TypeScript&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;npx create-react-app myapp --typescript&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æ³¨æ„ä½¿ç”¨ node ä¸ºè¾ƒé«˜ç‰ˆæœ¬ &amp;gt;10.15.0&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2ã€é…ç½® eslint è¿›è¡Œæ ¼å¼åŒ–&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç”±äºå®‰è£…æœ€æ–°çš„ create-react-app ç»“åˆ VScode ç¼–è¾‘å™¨å³å¯æ”¯æŒ eslitï¼Œä½†æ˜¯éœ€è¦åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­è¦æ·»åŠ  .env è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œè®¾ç½® &lt;code&gt;EXTEND_ESLINT=true&lt;/code&gt; è¿™æ ·æ‰ä¼šå¯ç”¨ eslint æ£€æµ‹ï¼Œæ³¨æ„è¦ &lt;strong&gt;é‡å¯ vscode&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3ã€ç»„ä»¶åº“ç³»ç»Ÿæ–‡ä»¶ç»“æ„&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ–°å»º styles æ–‡ä»¶å¤¹ï¼ŒåŒ…å«äº†åŸºæœ¬æ ·å¼æ–‡ä»¶ï¼Œç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;|-styles
| |-variables.scss // å„ç§å˜é‡ä»¥åŠå¯é…ç½®è®¾ç½®
| |-mixins.scss    // å…¨å±€ mixins
| |-index.scss    // å¼•å…¥å…¨éƒ¨çš„ scss æ–‡ä»¶ï¼Œå‘å¤–æŠ›å‡ºæ ·å¼å…¥å£
|-components
| |-Button
|   |-button.scss // ç»„ä»¶çš„å•ç‹¬æ ·å¼
|   |-button.mdx // ç»„ä»¶çš„æ–‡æ¡£
|   |-button.tsx // ç»„ä»¶çš„æ ¸å¿ƒä»£ç 
|   |-button.test.tsx // ç»„ä»¶çš„å•å…ƒæµ‹è¯•æ–‡ä»¶
|  |-index.tsx  // ç»„ä»¶å¯¹å¤–å…¥å£
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;4ã€å®‰è£… node-sass å¤„ç†å™¨&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å®‰è£… node-sass ç”¨æ¥ç¼–è¯‘ SCSS æ ·å¼æ–‡ä»¶ï¼š&lt;code&gt;npm i node-sass -D&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ ·æœ€åŸºæœ¬çš„ react å¼€å‘ç¯å¢ƒå°±å®Œæˆäº†ï¼Œå¯ä»¥å¼€å¿ƒçš„å¼€å‘ç»„ä»¶äº†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;äºŒã€ç»„ä»¶åº“æ‰“åŒ…ç¼–è¯‘&quot;&gt;äºŒã€ç»„ä»¶åº“æ‰“åŒ…ç¼–è¯‘&lt;/h3&gt;
&lt;p&gt;æœ¬åœ°è°ƒè¯•å®Œç»„ä»¶åº“ä¹‹åï¼Œéœ€è¦æ‰“åŒ…å‹ç¼©ç¼–è¯‘ä»£ç ï¼Œä¾›å…¶ä»–ç”¨æˆ·ä½¿ç”¨ï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨çš„ TypeScript ç¼–å†™çš„ä»£ç ï¼Œæ‰€ä»¥ä½¿ç”¨ Typescript æ¥ç¼–è¯‘é¡¹ç›®ï¼š&lt;br/&gt;é¦–å…ˆåœ¨æ¯ä¸ªç»„ä»¶ä¸­æ–°å»º index.tsx æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;import Button from './button'
export default Button 
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¿®æ”¹ index.tsx æ–‡ä»¶ï¼Œå¯¼å…¥å¯¼å‡ºå„ä¸ªæ¨¡å—&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;export { default as Button } from './components/Button'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨æ ¹ç›®å½•æ–°å»º tsconfig.build.jsonï¼Œå¯¹ .tsx æ–‡ä»¶è¿›è¡Œç¼–è¯‘ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;{
  &quot;compilerOptions&quot;: {
    &quot;outDir&quot;: &quot;dist&quot;,// ç”Ÿæˆç›®å½•
    &quot;module&quot;: &quot;esnext&quot;,// æ ¼å¼
    &quot;target&quot;: &quot;es5&quot;,// ç‰ˆæœ¬
    &quot;declaration&quot;: true,// ä¸ºæ¯ä¸€ä¸ª ts æ–‡ä»¶ç”Ÿæˆ .d.ts æ–‡ä»¶
    &quot;jsx&quot;: &quot;react&quot;,
    &quot;moduleResolution&quot;:&quot;Node&quot;,// è§„å®šå¯»æ‰¾å¼•å…¥æ–‡ä»¶çš„è·¯å¾„ä¸º node æ ‡å‡†
    &quot;allowSyntheticDefaultImports&quot;: true,
  },
  &quot;include&quot;: [// è¦ç¼–è¯‘å“ªäº›æ–‡ä»¶
    &quot;src&quot;
  ],
  &quot;exclude&quot;: [// æ’é™¤ä¸éœ€è¦ç¼–è¯‘çš„æ–‡ä»¶
    &quot;src/**/*.test.tsx&quot;,
    &quot;src/**/*.stories.tsx&quot;,
    &quot;src/setupTests.ts&quot;,
  ]
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯¹äºæ ·å¼æ–‡ä»¶ï¼Œä½¿ç”¨ node-sass ç¼–è¯‘ SCSSï¼ŒæŠ½å–æ‰€æœ‰ SCSS æ–‡ä»¶ç”Ÿæˆ CSS æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;&quot;script&quot;:{
    &quot;build-css&quot;: &quot;node-sass ./src/styles/index.scss ./dist/index.css&quot;,
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¹¶ä¸”ä¿®æ”¹ build å‘½ä»¤ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;&quot;script&quot;:{
    &quot;clean&quot;: &quot;rimraf ./dist&quot;,// è·¨å¹³å°çš„å…¼å®¹
    &quot;build&quot;: &quot;npm run clean &amp;amp;&amp;amp; npm run build-ts &amp;amp;&amp;amp; npm run build-css&quot;,
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™æ ·ï¼Œæ‰§è¡Œ &lt;code&gt;npm run build&lt;/code&gt; ä¹‹åï¼Œå°±å¯ä»¥ç”Ÿæˆå¯¹åº”çš„ç»„ä»¶ JS å’Œ CSS æ–‡ä»¶ï¼Œä¸ºåé¢ä½¿ç”¨è€…æŒ‰éœ€åŠ è½½å’Œéƒ¨ç½²åˆ° npm ä¸Šæä¾›å‡†å¤‡ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ä¸‰ã€æœ¬åœ°è°ƒè¯•ç»„ä»¶åº“&quot;&gt;ä¸‰ã€æœ¬åœ°è°ƒè¯•ç»„ä»¶åº“&lt;/h3&gt;
&lt;p&gt;æœ¬åœ°å®Œæˆç»„ä»¶åº“çš„å¼€å‘ä¹‹åï¼Œåœ¨å‘å¸ƒåˆ° npm å‰ï¼Œéœ€è¦å…ˆåœ¨æœ¬åœ°è°ƒè¯•ï¼Œé¿å…å¸¦ç€é—®é¢˜ä¸Šä¼ åˆ° npm ä¸Šã€‚è¿™æ—¶å°±éœ€è¦ä½¿ç”¨ npm link å‡ºé©¬äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä»€ä¹ˆæ˜¯ npm link&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨æœ¬åœ°å¼€å‘ npm æ¨¡å—çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ npm link å‘½ä»¤ï¼Œå°† npm æ¨¡å—é“¾æ¥åˆ°å¯¹åº”çš„è¿è¡Œé¡¹ç›®ä¸­å»ï¼Œæ–¹ä¾¿åœ°å¯¹æ¨¡å—è¿›è¡Œè°ƒè¯•å’Œæµ‹è¯•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨æ–¹æ³•&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å‡è®¾ç»„ä»¶åº“æ˜¯ reactui æ–‡ä»¶å¤¹ï¼Œè¦åœ¨æœ¬åœ°çš„ demo é¡¹ç›®ä¸­ä½¿ç”¨ç»„ä»¶ã€‚åˆ™åœ¨ç»„ä»¶åº“ä¸­ï¼ˆè¦è¢« link çš„åœ°æ–¹ï¼‰æ‰§è¡Œ &lt;code&gt;npm link&lt;/code&gt;ï¼Œåˆ™ç”Ÿæˆä»æœ¬æœºçš„ &lt;code&gt;node_modules/reactui&lt;/code&gt; åˆ° &lt;code&gt;ç»„ä»¶åº“çš„è·¯å¾„ / reactui&lt;/code&gt; ä¸­çš„æ˜ å°„å…³ç³»ã€‚&lt;br/&gt;ç„¶ååœ¨è¦ä½¿ç”¨ç»„ä»¶åº“çš„æ–‡ä»¶å¤¹ demo ä¸­æ‰§è¡Œ &lt;code&gt;npm link reactui&lt;/code&gt; åˆ™ç”Ÿæˆä»¥ä¸‹å¯¹åº”é“¾æ¡ï¼š&lt;/p&gt;
&lt;p&gt;åœ¨è¦ä½¿ç”¨ç»„ä»¶çš„æ–‡ä»¶å¤¹ demo ä¸­ -[æ˜ å°„åˆ°]â€”&amp;gt; æœ¬æœºçš„ &lt;code&gt;node_modules/reactui&lt;/code&gt; â€”[æ˜ å°„åˆ°]-&amp;gt; å¼€å‘ç»„ä»¶åº“ reactui çš„æ–‡ä»¶å¤¹ /reactui&lt;/p&gt;
&lt;p&gt;éœ€è¦ä¿®æ”¹ç»„ä»¶åº“çš„ package.json æ–‡ä»¶æ¥è®¾ç½®å…¥å£ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;{
  &quot;name&quot;: &quot;reactui&quot;,
  &quot;main&quot;: &quot;dist/index.js&quot;,
  &quot;module&quot;: &quot;dist/index.js&quot;,
  &quot;types&quot;: &quot;dist/index.d.ts&quot;,
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç„¶ååœ¨è¦ä½¿ç”¨ç»„ä»¶çš„ demo é¡¹ç›®çš„ä¾èµ–ä¸­æ·»åŠ ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;&quot;dependencies&quot;:{
  &quot;reactui&quot;:&quot;0.0.1&quot;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ³¨æ„ï¼Œæ­¤æ—¶å¹¶ä¸ç”¨å®‰è£…ä¾èµ–ï¼Œä¹‹æ‰€ä»¥å†™ä¸Šè¯¥ä¾èµ–ï¼Œæ˜¯ä¸ºäº†æ–¹ä¾¿åœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„æ—¶å€™å¯ä»¥æœ‰ä»£ç æç¤ºåŠŸèƒ½ã€‚&lt;br/&gt;ç„¶ååœ¨ demo é¡¹ç›®ä¸­ä½¿ç”¨ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;import { Button } from 'reactui'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨ index.tsx ä¸­å¼•å…¥ CSS æ–‡ä»¶&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;import 'reactui/build/index.css'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ­£å½“ä»¥ä¸ºå¤§åŠŸå‘Šæˆçš„æ—¶å€™ï¼Œä¸‹é¢è¿™ä¸ªæŠ¥é”™çŠ¹å¦‚ä¸€ç›†å†·æ°´ä»å¤©è€Œé™ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img10.360buyimg.com/imagetools/jfs/t1/148314/6/4090/76920/5f23b0bfE521bc482/19521727a4fdda60.jpg&quot; alt=&quot;é”™è¯¯æç¤º&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç»è¿‡å„ç§é—®é¢˜æ’æŸ¥ï¼Œåœ¨ &lt;a href=&quot;https://reactjs.org/warnings/invalid-hook-call-warning.html&quot;&gt;react å®˜æ–¹ç½‘ç«™&lt;/a&gt;[3] ä¸ŠæŸ¥åˆ°ä»¥ä¸‹è¯´æ³•ï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;ğŸ”´ Do not call Hooks in class components.&lt;br/&gt;ğŸ”´ Do not call in event handlers.&lt;br/&gt;ğŸ”´ Do not call Hooks inside functions passed to useMemo, useReducer, or useEffect.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¯´çš„å¾ˆæ˜ç™½ï¼š&lt;/p&gt;
&lt;p&gt;åŸå›  1: React å’Œ React DOM çš„ç‰ˆæœ¬ä¸ä¸€æ ·çš„é—®é¢˜&lt;br/&gt;åŸå›  2: å¯èƒ½æ‰“ç ´äº† Hooks çš„è§„åˆ™&lt;br/&gt;åŸå›  3: åœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨äº†å¤šä¸ªç‰ˆæœ¬çš„ React&lt;/p&gt;
&lt;p&gt;å®˜ç½‘å¾ˆè´´å¿ƒï¼Œç»™å‡ºäº†è§£å†³æ–¹æ³•ï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;10&quot;&gt;
&lt;p&gt;This problem can also come up when you use npm link or an equivalent. In that case, your bundler might â€œseeâ€ two Reacts â€” one in application folder and one in your library folder. Assuming myapp and mylib are sibling folders, one possible fix is to run npm link ../myapp/node_modules/react from mylib. This should make the library use the applicationâ€™s React copy.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ ¸å¿ƒæ€æƒ³åœ¨ç»„ä»¶åº“ä¸­ä½¿ç”¨ &lt;code&gt;npm link&lt;/code&gt; æ–¹å¼ï¼Œå¼•åˆ° demo é¡¹ç›®ä¸­çš„ reactï¼› æ‰€ä»¥åœ¨ç»„ä»¶åº“ä¸­æ‰§è¡Œï¼š &lt;code&gt;npm link ../demo/node_modules/react&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol readability=&quot;0&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;åœ¨ä»£ç åº“ reactui ä¸­æ‰§è¡Œ &lt;code&gt;npm link&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;åœ¨ä»£ç åº“ reactui ä¸­æ‰§è¡Œ &lt;code&gt;npm link ../../demo/node_modules/react&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;åœ¨é¡¹ç›® demo ä¸­æ‰§è¡Œ &lt;code&gt;npm link reactui&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;å¦‚æ­¤å¯ä»¥è§£å†³ä¸Šé¢ react å†²çªé—®é¢˜ï¼›äºæ˜¯å¯ä»¥åœ¨æœ¬åœ°ä¸€è¾¹å¿«ä¹çš„è°ƒè¯•ç»„ä»¶åº“ï¼Œä¸€è¾¹å¿«ä¹çš„åœ¨ä½¿ç”¨ç»„ä»¶çš„é¡¹ç›®ä¸­çœ‹åˆ°æœ€ç»ˆæ•ˆæœäº†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å››ã€ç»„ä»¶åº“å‘å¸ƒåˆ°-npm&quot;&gt;å››ã€ç»„ä»¶åº“å‘å¸ƒåˆ° npm&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;è¯¥è¿‡ç¨‹ä¸€å®šè¦æ³¨æ„ä½¿ç”¨çš„æ˜¯ npm æºï¼ï¼[éå¸¸é‡è¦]&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆç¡®å®šè‡ªå·±æ˜¯å¦å·²ç»ç™»å½•äº† npmï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;npm adduser
// å¡«å…¥ç”¨æˆ·åï¼›å¯†ç ï¼›email
npm whoami // æŸ¥çœ‹å½“å‰ç™»å½•å
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¿®æ”¹ç»„ä»¶åº“çš„ package.json ï¼Œæ³¨æ„ files é…ç½®ï¼›ä»¥åŠ dependencies æ–‡ä»¶çš„åŒ–ç®€:&lt;br/&gt;react ä¾èµ–åŸæœ¬æ˜¯è¦æ”¾åœ¨ dependencies ä¸­çš„ï¼Œä½†æ˜¯å¯èƒ½ä¼šå’Œç”¨æˆ·å®‰è£…çš„ react ç‰ˆæœ¬å†²çªï¼Œæ‰€ä»¥æ”¾åœ¨äº† devDependencies ä¸­ï¼Œä½†æ˜¯è¿™æ ·è¯ç”¨æˆ·å¦‚æœæ²¡æœ‰å®‰è£… react åˆ™æ— æ³•ä½¿ç”¨ç»„ä»¶åº“ï¼Œæ‰€ä»¥è¦åœ¨ peerDependencies ä¸­å®šä¹‰å‰ç½®ä¾èµ– peerDependenciesï¼Œå‘Šè¯‰ç”¨æˆ· react å’Œ react-dom æ˜¯å¿…è¦çš„å‰ç½®ä¾èµ–:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;&quot;main&quot;: &quot;dist/index.js&quot;,
&quot;module&quot;: &quot;dist/index.js&quot;,
&quot;types&quot;: &quot;dist/index.d.ts&quot;,
&quot;files&quot;: [ // æŠŠå“ªäº›æ–‡ä»¶ä¸Šä¼ åˆ° npm
  &quot;dist&quot;
],
&quot;dependencies&quot;: {  // æ‰§è¡Œ npm i çš„æ—¶å€™ä¼šå®‰è£…è¿™äº›ä¾èµ–åˆ° node_modules ä¸­
  &quot;axios&quot;: &quot;^0.19.1&quot;,// å‘é€è¯·æ±‚
  &quot;classnames&quot;: &quot;^2.2.6&quot;,//
  &quot;react-transition-group&quot;: &quot;^4.3.0&quot;
},
&quot;peerDependencies&quot;: { // é‡è¦ï¼ï¼ï¼Œæé†’ä½¿ç”¨è€…ï¼Œç»„ä»¶åº“çš„æ ¸å¿ƒä¾èµ–ï¼Œå¿…é¡»å…ˆå®‰è£…è¿™äº›ä¾èµ–æ‰èƒ½ä½¿ç”¨
  &quot;react&quot;: &quot;&amp;gt;=16.8.0&quot;,  // åœ¨ 16.8 ä¹‹å æ‰å¼•å…¥äº† hooks
  &quot;react-dom&quot;: &quot;&amp;gt;=16.8.0&quot;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¥½äº†ï¼Œæ•´ä¸ªç»„ä»¶åº“ç»è¿‡ä¸Šè¿°è¿‡ç¨‹ï¼ŒåŸºæœ¬ä¸Šå„ä¸ªåŠŸèƒ½å·²ç»æœ‰äº†ï¼ŒæåŠä¸€å¥ï¼šç”±äºç»„ä»¶åº“ä½¿ç”¨çš„æ˜¯ create-react-app è„šæ‰‹æ¶ï¼Œæœ€æ–°çš„ç‰ˆæœ¬å·²ç»é›†æˆäº†å•å…ƒæµ‹è¯•åŠŸèƒ½ã€‚è¿˜æœ‰é…ç½® husky ç­‰è§„èŒƒä»£ç æäº¤ï¼Œåœ¨è¿™é‡Œä¸åœ¨åšèµ˜è¿°ï¼Œè¯»è€…å¯ä»¥è‡ªè¡Œé…ç½®ã€‚&lt;/p&gt;
&lt;h3 id=&quot;äº”ã€ç”Ÿæˆè¯´æ˜æ–‡æ¡£&quot;&gt;äº”ã€ç”Ÿæˆè¯´æ˜æ–‡æ¡£&lt;/h3&gt;
&lt;p&gt;ç›®å‰ç”Ÿæˆè¯´æ˜æ–‡æ¡£è¾ƒå¥½çš„å·¥å…·æœ‰ &lt;a href=&quot;https://storybook.js.org/&quot;&gt;storybook&lt;/a&gt;[4]ã€&lt;a href=&quot;https://www.docz.site/&quot;&gt;docz&lt;/a&gt;[5] ç­‰å·¥å…·ï¼Œä¸¤è€…éƒ½æ˜¯å¾ˆä¼˜ç§€çš„æ–‡æ¡£ç”Ÿæˆå·¥å…·ï¼Œä½†æ˜¯å°ºæœ‰æ‰€çŸ­ï¼Œå¯¸æœ‰æ‰€é•¿ï¼Œç»è¿‡è®¤çœŸè°ƒç ”æ¯”è¾ƒï¼Œæœ€ç»ˆé€‰æ‹©äº† doczã€‚&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å·¥å…·åç§°&lt;/th&gt;
&lt;th&gt;åŒºåˆ«ä¸€&lt;/th&gt;
&lt;th&gt;åŒºåˆ«äºŒ&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody readability=&quot;4&quot;&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td&gt;storybook&lt;/td&gt;
&lt;td&gt;ä½¿ç”¨ç‰¹æœ‰çš„APIå¼€å‘æ–‡æ¡£è¯´æ˜ï¼Œå¯ä»¥å¼•å…¥markdownæ–‡ä»¶&lt;/td&gt;
&lt;td&gt;ç”Ÿæˆæ–‡æ¡£çš„ç•Œé¢å¸¦æœ‰storybookçš„ç—•è¿¹è¾ƒå¤šä¸€äº›&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td&gt;docz&lt;/td&gt;
&lt;td&gt;å®Œç¾çš„ç»“åˆäº†reactå’Œmarkdownè¯­æ³•å¼€å‘æ–‡æ¡£&lt;/td&gt;
&lt;td&gt;ç”Ÿæˆçš„æ–‡æ¡£ç•Œé¢æ˜¯å¸¸è§„çš„æ–‡æ¡£ç•Œé¢&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;1ã€ç¡®å®šé€‰å‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1ï¼‰storybook çš„å¸¸ç”¨ç¼–è¯‘æ–‡æ¡£è§„èŒƒç›¸å¯¹ docz è€Œè¨€ï¼Œç•¥æœ‰ç¹ç&lt;/p&gt;
&lt;p&gt;storybook çš„ç¼–è¯‘æ–‡æ¡£è§„èŒƒå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;//çœç•¥ import å¼•å…¥çš„ä»£ç 
storiesOf('Buttons', module)
.addDecorator(storyFn =&amp;gt; &amp;lt;div style={{ textAlign: 'center' }}&amp;gt;{storyFn()}&amp;lt;/div&amp;gt;)
.add('with text', () =&amp;gt; (
&amp;lt;Button onClick={action('clicked')}&amp;gt;Hello Button111&amp;lt;/Button&amp;gt;
),{
notes:{markdown}   // å°†ä¼šæ¸²æŸ“ markdown å†…å®¹
}) 
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯¹æ¯” docz çš„å¼€å‘æ–‡æ¡£ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-markdown&quot;&gt;# Button ç»„ä»¶

ä½¿ç”¨æ–¹å¼å¦‚ä¸‹æ‰€ç¤ºï¼š
import { Playground, Props } from 'docz';
import Button from './index.tsx';

## æŒ‰é’®ç»„ä»¶

&amp;lt;Playground&amp;gt;
    &amp;lt;Button btnWidth=&quot;100&quot;&amp;gt;æˆ‘æ˜¯æŒ‰é’®&amp;lt;/Button&amp;gt;
&amp;lt;/Playground&amp;gt;

** åŸºæœ¬å±æ€§ **

| å±æ€§åç§° | è¯´æ˜ | é»˜è®¤å€¼ |
|--|--|--|
|btnType | æŒ‰é’®ç±»å‹ |--|
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¼—æ‰€å‘¨çŸ¥ï¼ŒMarkdown æ˜¯ä¸€ç§è½»é‡çº§æ ‡è®°è¯­è¨€ï¼Œå®ƒå…è®¸äººä»¬ä½¿ç”¨æ˜“è¯»æ˜“å†™çš„çº¯æ–‡æœ¬æ ¼å¼ç¼–å†™æ–‡æ¡£ã€‚å›¢é˜Ÿæˆå‘˜åœ¨å¼€å‘æ–‡æ¡£æ—¶ï¼Œç†Ÿç»ƒä½¿ç”¨ markdown è¯­æ³•ï¼Œå¼€å‘ docz æ–‡æ¡£çš„ mdx æ–‡ä»¶ï¼Œç»“åˆäº† Markdown å’Œ React è¯­æ³•ï¼Œç›¸æ¯” storybook è¦ä½¿ç”¨å¾ˆå¤šçš„ API æ¥ç¼–å†™æ–‡æ¡£çš„æ–¹å¼ï¼Œæ— ç–‘å‡å°‘äº†å¾ˆå¤šçš„å­¦ä¹  storybook è¯­æ³•çš„æˆæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;2ï¼‰docz ç”Ÿæˆçš„æ–‡æ¡£æ ·å¼æ›´åŠ ç¬¦åˆä¸ªäººå®¡ç¾&lt;/p&gt;
&lt;p&gt;storybook ç”Ÿæˆçš„æ–‡æ¡£æ ·å¼ï¼Œå¸¦æœ‰ storybook çš„ç—•è¿¹æ›´ä¸ºä¸¥é‡ä¸€äº›ï¼Œ å…¶ç”Ÿæˆæ–‡æ¡£ç•Œé¢å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img13.360buyimg.com/imagetools/jfs/t1/125708/23/8306/50657/5f22701fEaf5cde34/ff4027b8ff6c6625.png&quot; alt=&quot;storybookç”Ÿæˆç•Œé¢&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;docz ç”Ÿæˆçš„æ–‡æ¡£å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img11.360buyimg.com/imagetools/jfs/t1/132451/34/5413/81872/5f22701aEbdf0390c/f9ca2524119e8dc5.png&quot; alt=&quot;doczç”Ÿæˆç•Œé¢&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç”±ä¸Šå›¾å¯¹æ¯”å¯ä»¥çœ‹å‡ºï¼Œdocz ç”Ÿæˆçš„ç•Œé¢æ›´åŠ ç®€ä»‹ï¼Œè¾ƒä¸ºå¸¸è§„ã€‚&lt;br/&gt;ç»¼ä¸Šï¼Œç»“åˆé»˜è®¤æ–‡æ¡£å¼€å‘ä¹ æƒ¯å’Œç•Œé¢é£æ ¼ï¼Œæˆ‘é€‰æ‹©äº†doczï¼Œå½“ç„¶ä»è€…è§ä»ã€æ™ºè€…è§æ™ºï¼Œè¯»è€…ä¹Ÿå¯ä»¥ä½¿ç”¨åŒä¸ºä¼˜ç§€çš„ storybook å°è¯•ï¼Œè¿™éƒ½ä¸æ˜¯äº‹å„¿ï½&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2ã€ä½¿ç”¨ docz å¼€å‘&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç¡®å®šäº† docz è¿›è¡Œå¼€å‘åï¼Œæ ¹æ®å®˜ç½‘ä»‹ç»ï¼Œåœ¨ create-react-app ç”Ÿæˆçš„ç»„ä»¶åº“ä¸­è¿›è¡Œäº†å®‰è£…é…ç½®ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;npm install docz&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å®‰è£…æˆåŠŸåï¼Œå°±ä¼šå‘ package.json æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;{
  &quot;scripts&quot;: {
    &quot;docz:dev&quot;: &quot;docz dev&quot;,
    &quot;docz:build&quot;: &quot;docz build&quot;,
    &quot;docz:serve&quot;: &quot;docz build &amp;amp;&amp;amp; docz serve&quot;
  }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™æ—¶è¿˜éœ€è¦åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ–°å»º doczrc.js æ–‡ä»¶ï¼Œå¯¹ docz è¿›è¡Œé…ç½®ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;export default {
  files: ['./src/components/**/*.mdx','./src/*.mdx'], 
  dest: 'docsite', // æ‰“åŒ… docz æ–‡æ¡£åˆ°å“ªä¸ªæ–‡ä»¶å¤¹ä¸‹
  title: 'ç»„ä»¶åº“å·¦ä¸Šè§’æ ‡é¢˜',  // è®¾ç½®æ–‡æ¡£çš„æ ‡é¢˜
  typescript: true, // æ”¯æŒ typescript è¯­æ³•
  themesDir: 'theme', // ä¸»é¢˜æ ·å¼æ”¾åœ¨å“ªä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œåé¢ä¼šè®²
  menu: ['å¿«é€Ÿä¸Šæ‰‹', 'ä¸šåŠ¡ç»„ä»¶'] // ç”Ÿæˆæ–‡æ¡£çš„å·¦ä¾§èœå•åˆ†ç±»
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…¶ä¸­ files è§„å®šäº† docz å»å¯¹å“ªäº›æ–‡ä»¶è¿›è¡Œç¼–è¯‘ç”Ÿæˆæ–‡æ¡£ï¼Œå¦‚æœä¸åšé™åˆ¶ï¼Œä¼šæœç´¢é¡¹ç›®ä¸­æ‰€æœ‰çš„ mdã€mdx ä¸ºåç¼€çš„æ–‡ä»¶ç”Ÿæˆæ–‡æ¡£ï¼Œå› æ­¤æˆ‘åœ¨è¯¥æ–‡ä»¶ä¸­åšäº†èŒƒå›´é™åˆ¶ï¼Œé¿å…ä¸€äº› &lt;code&gt;README.md&lt;/code&gt; æ–‡ä»¶ä¹Ÿè¢«ç”Ÿæˆåˆ°æ–‡æ¡£ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–è¿˜éœ€è¦æ³¨æ„åˆ°ä¸¤ç‚¹ï¼š&lt;/p&gt;
&lt;p&gt;1ã€&lt;code&gt;menu: ['å¿«é€Ÿä¸Šæ‰‹', 'ä¸šåŠ¡ç»„ä»¶']&lt;/code&gt; å¯¹åº”ç€ç»„ä»¶åº“å·¦ä¾§çš„èœå•æ åˆ†ç±»ï¼Œæ¯”å¦‚åœ¨ mdx æ–‡æ¡£ä¸­åœ¨æœ€ä¸Šé¢è®¾ç½®ç»„ä»¶æ‰€å±çš„èœå• &lt;code&gt;menu: ä¸šåŠ¡ç»„ä»¶&lt;/code&gt; , åˆ™ Button ç»„ä»¶å±äº &quot;ä¸šåŠ¡ç»„ä»¶&quot; çš„åˆ†ç±»ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-markdown&quot;&gt;---
name: Button
route: /button
menu: ä¸šåŠ¡ç»„ä»¶
---
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨ src ä¸­æ–°å»ºæ¬¢è¿é¡µï¼Œè·¯ç”±ä¸ºè·Ÿè·¯å¾„ï¼Œæ‰€å±èœå•ä¸ºâ€œå¿«é€Ÿä¸Šæ‰‹â€ï¼›&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-markdown&quot;&gt;---
name: å¿«é€Ÿä¸Šæ‰‹
route: /
---
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ‰§è¡Œ &lt;code&gt;npm run docz:dev&lt;/code&gt;ï¼Œå°±å¯ä»¥æ‰“å¼€&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img13.360buyimg.com/imagetools/jfs/t1/111949/36/14393/44763/5f30df4bE8703242c/ae38f3880e4578a8.png&quot; alt=&quot;è·¯ç”±é…ç½®&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä»‹ç»åˆ°è¿™é‡Œï¼Œä¼°è®¡æœ‰å°ä¼™ä¼´ä¼šæœ‰ç–‘é—®äº†ï¼Œè¿™æ ·ç”Ÿæˆçš„ç½‘ç«™åƒç¯‡ä¸€å¾‹ï¼Œèƒ½å¦éšå¿ƒæ‰€æ¬²çš„è‡ªå®šä¹‰ç½‘ç«™çš„æ ·å¼å’ŒåŠŸèƒ½å‘¢ï¼Ÿå½“åˆæˆ‘ä¹Ÿæœ‰è¿™ç§ç–‘é—®ï¼Œç»è¿‡å¤šæ¬¡å°è¯•ï¼Œçš‡å¤©ä¸è´Ÿè‹¦å¿ƒäººï¼Œç»ˆäºæ‘¸ç´¢å‡ºå¦‚ä¸‹æ–¹æ³•ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1ã€ä¿®æ”¹ docz æ–‡æ¡£æœ¬èº«çš„æ ·å¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ ¹æ® docz å®˜æ–¹æ–‡æ¡£ä¸­&lt;a href=&quot;https://www.docz.site/docs/gatsby-theme&quot;&gt;å¢åŠ  logo çš„æ–¹æ³•&lt;/a&gt;[6]ï¼Œå¯ä»¥é€šè¿‡è‡ªå®šä¹‰ç»„ä»¶è¦†ç›–åŸæœ‰ç»„ä»¶çš„å½¢å¼ï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;Example: If you're using our gatsby-theme-docz which has a Header component located at src/components/Header/index.js you can override the component by creating src/gatsby-theme-docz/components/Header/index.js. Cool right?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ‰€ä»¥æ ¹æ® docz æºä»£ç ä¸»é¢˜éƒ¨åˆ†ä»£ç ï¼š &lt;code&gt;https://github.com/doczjs/docz/tree/master/core/gatsby-theme-docz/src&lt;/code&gt;ï¼Œæ‰¾åˆ°å¯¹åº”çš„æ–‡æ¡£ç»„ä»¶çš„ä»£ç ç»“æ„ï¼Œåœ¨ç»„ä»¶åº“é¡¹ç›®æ ¹ç›®å½•æ–°å»ºåŒåç§°çš„æ–‡ä»¶å¤¹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;|-theme
|  |-gatsby-theme-docz
|     |-components
|     |-Header
|       |-index.js // åœ¨è¿™é‡Œä¿®æ”¹è‡ªå®šä¹‰çš„æ–‡æ¡£ç»„ä»¶
|       |-styles.js // åœ¨è¿™é‡Œä¿®æ”¹ç”Ÿæˆçš„æ ·å¼æ–‡ä»¶
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™æ ·åœ¨æ‰§è¡Œ &lt;code&gt;npm run docz:dev&lt;/code&gt; çš„æ—¶å€™ï¼Œå°±ä¼šæŠŠè‡ªå®šä¹‰çš„ä»£ç è¦†ç›–åŸæœ‰æ ·å¼ï¼Œå®ç°æ–‡æ¡£çš„å¤šæ ·åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2ã€ä¿®æ”¹ markdown æ–‡æ¡£æ ·å¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;äº‹æƒ…åˆ°è¿™é‡Œå°±ç»“æŸäº†å—ï¼Ÿä¸ï¼æˆ‘ä»¬çš„ç›®æ ‡ä¸ä»…å¦‚æ­¤ï¼Œå› ä¸ºæˆ‘å‘ç°è‡ªåŠ¨ç”Ÿæˆçš„ markdown æ ¼å¼ï¼Œå¹¶ä¸ç¬¦åˆæˆ‘çš„å®¡ç¾ï¼Œæ¯”å¦‚ç”Ÿæˆçš„è¡¨æ ¼æ–‡å­—å±…å·¦å¯¹é½ï¼Œå¹¶ä¸”æ•´ä¸ªè¡¨æ ¼æ ·å¼å•ä¸€ï¼Œä½†æ˜¯è¿™é‡Œå±äº markdown æ ·å¼çš„èŒƒç•´ï¼Œä¿®æ”¹ä¸Šè¿°æ–‡æ¡£ç»„ä»¶ä¸­å¹¶ä¸åŒ…æ‹¬è¿™é‡Œçš„ä»£ç ï¼Œé‚£ä¹ˆå¦‚ä½•ä¿®æ”¹ markdown ç”Ÿæˆæ–‡æ¡£çš„æ ·å¼å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img12.360buyimg.com/imagetools/jfs/t1/117423/9/13652/45654/5f227adfEa857ba90/094c9543a38758c8.jpg&quot; alt=&quot;doczé»˜è®¤ç”Ÿæˆè¡¨æ ¼æ ·å¼&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç»è¿‡æˆ‘çµæœºä¸€åŠ¨åˆä¸€åŠ¨ï¼Œå‘ç°æ—¢ç„¶åœ¨ä¸Šé¢ä¿®æ”¹æ–‡æ¡£ç»„ä»¶æ ·å¼çš„æ—¶å€™ï¼Œé‡å†™äº† component/Header/styles.js æ–‡ä»¶ï¼Œæ˜¯å¦å¯ä»¥åœ¨è¯¥æ–‡ä»¶ä¸­å¼•å…¥è‡ªå®šä¹‰çš„æ ·å¼å‘¢ï¼Ÿæ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;|-theme
|  |-gatsby-theme-docz
|     |-components
|     |-Header
|       |-index.js // åœ¨è¿™é‡Œä¿®æ”¹è‡ªå®šä¹‰çš„æ–‡æ¡£ç»„ä»¶
|       |-styles.js // åœ¨è¿™é‡Œä¿®æ”¹ç”Ÿæˆçš„æ ·å¼æ–‡ä»¶
|       |-base.css  // è¿™é‡Œä¿®æ”¹ markdown ç”Ÿæˆæ–‡æ¡£çš„æ ·å¼
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™æ ·ä¿®æ”¹åçš„è¡¨æ ¼æ ·å¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img14.360buyimg.com/imagetools/jfs/t1/146970/22/4101/41432/5f227adfE93691424/3deb79390ef6b1f4.jpg&quot; alt=&quot;ä¿®æ”¹doczè¡¨æ ¼æ ·å¼&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥å„ä½å°ä¸»å¯ä»¥æ ¹æ®è‡ªå·±çš„å®¡ç¾æˆ–è€…è§†è§‰è®¾è®¡çš„è¦æ±‚è‡ªå®šä¹‰æ–‡æ¡£çš„æ ·å¼äº†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å…­ã€éƒ¨ç½²æ–‡æ¡£åˆ°æœåŠ¡å™¨&quot;&gt;å…­ã€éƒ¨ç½²æ–‡æ¡£åˆ°æœåŠ¡å™¨&lt;/h3&gt;
&lt;p&gt;ç”Ÿæˆçš„ç»„ä»¶åº“æ–‡æ¡£åªåœ¨æœ¬åœ°æ˜¾ç¤ºæ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œæ‰€ä»¥éœ€è¦éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šï¼Œäºæ˜¯ç¬¬ä¸€æ—¶é—´æƒ³åˆ°çš„æ˜¯æ”¾åœ¨ github è¿›è¡Œæ‰˜ç®¡ï¼Œæ‰“å¼€ github ä¸­çš„ setting è®¾ç½®é€‰é¡¹ï¼ŒGitHub Pages è®¾ç½®é…ç½®çš„åˆ†æ”¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img12.360buyimg.com/imagetools/jfs/t1/150087/19/4164/50237/5f2380dcE3d8103ab/b253298c0acfd582.jpg&quot; alt=&quot;è®¾ç½®åˆ†æ”¯&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ—¶é»˜è®¤æ‰“å¼€çš„é¦–é¡µè·¯å¾„ä¸ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;https://plusui.github.io/plusReact/&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ä½†å®é™…ä¸Šé¡µé¢æœ‰æ•ˆçš„è®¿é—®åœ°å€æ˜¯å¸¦æœ‰æ–‡ä»¶å¤¹ docsite è·¯å¾„çš„ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;https://plusui.github.io/plusReact/docsite/button/index.html&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œé¡µé¢å¼•å…¥çš„å…¶ä»–èµ„æºè·¯å¾„ï¼Œéƒ½æ˜¯ç»å¯¹è·¯å¾„ï¼Œå¦‚ä¸‹å›¾èµ„æºè·¯å¾„æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img11.360buyimg.com/imagetools/jfs/t1/113606/30/13681/95663/5f237355Eb84f4a64/e10b76a0bc45a653.png&quot; alt=&quot;å¼•å…¥èµ„æºè·¯å¾„&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ç›´æ¥æŠŠæ‰“åŒ…åçš„èµ„æºæ”¾åœ¨ github ä¸Šæ˜¯æ— æ³•è®¿é—®å„ç§èµ„æºçš„ã€‚&lt;br/&gt;è¿™æ—¶æˆ‘ä»¬åªå¥½æŠŠç½‘ç«™éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ä¸Šäº†ï¼Œè€ƒè™‘åˆ°æœåŠ¡å™¨é…ç½®çš„ç¹çï¼Œè¿™é‡Œç»™å¤§å®¶æä¾›ä¸€ä¸ªç®€ä¾¿çš„éƒ¨ç½²ç½‘ç«™ï¼š&lt;a href=&quot;https://app.netlify.com/teams/zhenyulei/sites&quot;&gt;Netlify&lt;/a&gt;[7]&lt;/p&gt;
&lt;p&gt;Netlify æ˜¯ä¸€ä¸ªæä¾›é™æ€ç½‘ç«™æ‰˜ç®¡çš„æœåŠ¡ï¼Œæä¾› CI æœåŠ¡ï¼Œèƒ½å¤Ÿå°†æ‰˜ç®¡ GitHubï¼ŒGitLab ç­‰ç½‘ç«™ä¸Šçš„ Jekyllï¼ŒHexoï¼ŒHugo ç­‰é™æ€ç½‘ç«™ã€‚&lt;/p&gt;
&lt;p&gt;éƒ¨ç½²é¡¹ç›®çš„è¿‡ç¨‹ä¹Ÿå¾ˆç®€å•ï¼Œå‚»ç“œå¼çš„ç‚¹å‡»é€‰æ‹© github ç½‘ç«™ä¸­ä»£ç è·¯å¾„ï¼Œä»¥åŠé…ç½®æ–‡ä»¶å¤¹è·Ÿè·¯å¾„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img14.360buyimg.com/imagetools/jfs/t1/150046/40/5112/119951/5f30e02fE1e9f9666/6e656e7a3ac32c30.png&quot; alt=&quot;é…ç½®æ–‡ä»¶å¤¹è·¯å¾„&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åå°±å¯ä»¥ç‚¹å‡»ç”Ÿæˆçš„ç½‘ç«™ urlï¼Œè®¿é—®åˆ°éƒ¨ç½²çš„ç½‘ç«™äº†ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img13.360buyimg.com/imagetools/jfs/t1/119732/6/13015/58243/5f30e0b0E23e941e6/ebacc0096600b409.jpg&quot; alt=&quot;éƒ¨ç½²ç½‘ç«™&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è€Œä¸”å¾ˆæ–¹ä¾¿çš„æ˜¯ï¼Œä¸€æ—¦å®Œæˆéƒ¨ç½²ä¹‹åï¼Œä¹‹åå†æ¬¡å‘ä»£ç åº“ä¸­æäº¤ä»£ç ï¼ŒNetlify ä¼šè‡ªåŠ¨æ›´æ–°ç½‘ç«™ã€‚&lt;br/&gt;æ­¤å¤–ï¼Œå¦‚æœæƒ³è‡ªå®šä¹‰ urlï¼Œé‚£ä¹ˆå°±åªèƒ½å»ç”³è¯·åŸŸåäº†ï¼Œåœ¨è‡ªå·±çš„äº‘æœåŠ¡å™¨ä¸Šï¼Œè§£æåŸŸåå³å¯ã€‚ä¸‹é¢ç®€å•è¯´ä¸€ä¸‹é…ç½®æ­¥éª¤ï¼š&lt;/p&gt;
&lt;p&gt;1ï¼‰é¦–å…ˆåœ¨ Netlify ç½‘ç«™ä¸Šï¼Œé€‰æ‹©ç»„ä»¶åº“å¯¹åº”çš„ Domain settings ä¸‹ Custom domainsï¼Œå¢åŠ è‡ªå·±çš„åŸŸåï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img12.360buyimg.com/imagetools/jfs/t1/129556/28/9451/40735/5f30e145E9a7d9b0f/a05c2ef63298be6c.png&quot; alt=&quot;é…ç½®åŸŸå&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;2ï¼‰ç„¶åæ‰“å¼€äº‘æœåŠ¡å™¨ä¸­çš„åŸŸåè§£æä¸­çš„è§£æè®¾ç½®ï¼Œå°†è¯¥åŸŸåæŒ‡å‘ Netlifyï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img10.360buyimg.com/imagetools/jfs/t1/149292/6/5068/24313/5f30e1ebE409ef7df/45493029c951364c.png&quot; alt=&quot;äº‘æœåŠ¡å™¨ä¸Šå¢åŠ åŸŸå&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;3ï¼‰æœ€åæ‰“å¼€è®¾ç½®çš„ç½‘å€ï¼Œå°±å¯ä»¥è®¿é—®åˆ°ç»„ä»¶åº“äº†ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img12.360buyimg.com/imagetools/jfs/t1/150167/40/4155/60237/5f238c70Eb6e14729/bd30d96e25bfcb37.jpg&quot; alt=&quot;æœ€ç»ˆæ•ˆæœ&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;ä¸ƒã€ç»„ä»¶æŒ‰éœ€åŠ è½½&quot;&gt;ä¸ƒã€ç»„ä»¶æŒ‰éœ€åŠ è½½&lt;/h3&gt;
&lt;p&gt;å¥½äº†ï¼Œç»è¿‡ä¸Šé¢çš„æµç¨‹ï¼Œå¯ä»¥åœ¨ demo é¡¹ç›®ä¸­ä½¿ç”¨ç»„ä»¶åº“äº†ï¼Œä½†æ˜¯åœ¨ demo é¡¹ç›®ä¸­ï¼Œæ‰§è¡Œ &lt;code&gt;npm run build&lt;/code&gt; ï¼Œå°±ä¼šå‘ç°ç”Ÿæˆçš„é™æ€èµ„æºä¸­å³ä½¿åªä½¿ç”¨äº†ä¸€ä¸ªç»„ä»¶ï¼Œä¹Ÿä¼šæŠŠ reactui ç»„ä»¶åº“ä¸­æ‰€æœ‰çš„ç»„ä»¶æ‰“åŒ…è¿›æ¥ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ‰€ä»¥å¦‚ä½•è¿›è¡ŒæŒ‰éœ€åŠ è½½å‘¢ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æŒ‰éœ€åŠ è½½é¦–å…ˆæ˜ å…¥è„‘æµ·çš„æ˜¯ä½¿ç”¨ &lt;code&gt;babel-plugin-import&lt;/code&gt; æ’ä»¶, è¯¥æ’ä»¶å¯ä»¥åœ¨ Babel é…ç½®ä¸­é’ˆå¯¹ç»„ä»¶åº“è¿›è¡ŒæŒ‰éœ€åŠ è½½.&lt;/p&gt;
&lt;p&gt;ç”¨æˆ·éœ€è¦å®‰è£… &lt;code&gt;babel-plugin-impor&lt;/code&gt; æ’ä»¶ï¼Œç„¶ååœ¨ plugins ä¸­åŠ å…¥é…ç½®ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;&quot;plugins&quot;: [
  [
    &quot;import&quot;,
    {
      &quot;libraryName&quot;: &quot;reactui&quot;, // è½¬æ¢ç»„ä»¶åº“çš„åå­—
      &quot;libraryDirectory&quot;: &quot;dist/components&quot;, // è½¬æ¢çš„è·¯å¾„
      &quot;camel2DashComponentName&quot;:false,  // è®¾ç½®ä¸º false æ¥é˜»æ­¢ç»„ä»¶åç§°çš„è½¬æ¢
      &quot;style&quot;:true
    }
  ]
]
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™æ ·åœ¨ demo é¡¹ç›®ä¸­ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;import { Button } from 'reactui';
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å°±ä¼šåœ¨ babel ä¸­ç¼–è¯‘æˆï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;import { Button } from 'reactui/dist/components/Button';
require('reactui/dist/components/Button/style');
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½†æ˜¯è¿™æ ·è¿˜æœ‰äº›å¼Šç«¯ï¼š&lt;/p&gt;
&lt;p&gt;1ã€ ç”¨æˆ·åœ¨ä½¿ç”¨ç»„ä»¶åº“çš„æ—¶å€™è¿˜éœ€è¦å®‰è£… &lt;code&gt;babel-plugin-import&lt;/code&gt;ï¼Œ å¹¶åšç›¸å…³ plugins é…ç½®ï¼›&lt;/p&gt;
&lt;p&gt;2ã€ å¼€å‘ç»„ä»¶åº“çš„æ—¶å€™ç»„ä»¶å¯¹åº”çš„æ ·å¼æ–‡ä»¶è¿˜éœ€è¦æ”¾åœ¨ style æ–‡ä»¶å¤¹ä¸‹ï¼›&lt;/p&gt;
&lt;p&gt;é‚£æœ‰æ²¡æœ‰æ›´ä¸ºç®€å•çš„æ–¹æ³•å‘¢ï¼Ÿåœ¨ ant-design ä¸­å¯»æ‰¾ç­”æ¡ˆï¼Œå‘ç°è¿™æ ·ä¸€å¥è¯ â€œantd çš„ JS ä»£ç é»˜è®¤æ”¯æŒåŸºäº ES modules çš„ tree shakingâ€ã€‚ å¯¹å‘€ï¼è¿˜å¯ä»¥ä½¿ç”¨ webpack çš„æ–°æŠ€æœ¯â€œtree shakingâ€ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;ä»€ä¹ˆæ˜¯ tree shakingï¼Ÿ AST å¯¹ JS ä»£ç è¿›è¡Œè¯­æ³•åˆ†æåå¾—å‡ºçš„è¯­æ³•æ ‘ (Abstract Syntax Tree)ã€‚AST è¯­æ³•æ ‘å¯ä»¥æŠŠä¸€æ®µ JS ä»£ç çš„æ¯ä¸€ä¸ªè¯­å¥éƒ½è½¬åŒ–ä¸ºæ ‘ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚DCE Dead Code Eliminationï¼Œåœ¨ä¿æŒä»£ç è¿è¡Œç»“æœä¸å˜çš„å‰æä¸‹ï¼Œå»é™¤æ— ç”¨çš„ä»£ç ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;webpack 4x ä¸­å·²ç»ä½¿ç”¨äº† tree shaking æŠ€æœ¯ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ package.json æ–‡ä»¶ä¸­é…ç½®å‚æ•° &lt;code&gt;&quot;sideEffects&quot;: false&lt;/code&gt;ï¼Œæ¥å‘Šè¯‰ webpack æ‰“åŒ…çš„æ—¶å€™å¯ä»¥å¤§èƒ†çš„å»æ‰æ²¡æœ‰ç”¨åˆ°çš„æ¨¡å—å³å¯ã€‚è¿™æ—¶ç”¨æˆ·åœ¨ demo é¡¹ç›®ä¸­ä½¿ç”¨ç»„ä»¶åº“çš„æ—¶å€™ä¸éœ€è¦åšä»»ä½•å¤„ç†ï¼Œå°±å¯ä»¥æŒ‰éœ€å¼•ç”¨ JS èµ„æºäº†ã€‚&lt;br/&gt;ä¸çŸ¥é“å¤§å®¶åœ¨çœ‹åˆ°è¿™é‡Œæ—¶ï¼Œæ˜¯å¦å‘ç°è¿™æ ·é…ç½®è¿˜æ˜¯æœ‰é—®é¢˜çš„ï¼šå³ sideEffects é…ç½®æˆ false æ˜¯æœ‰é—®é¢˜çš„ã€‚&lt;br/&gt;å› ä¸ºæŒ‰ç…§ä¸Šè¿°é…ç½®ï¼Œå°±ä¼šå‘ç°ç»„ä»¶çš„æ ·å¼ä¸è§äº†ï¼ï¼&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img10.360buyimg.com/imagetools/jfs/t1/142050/12/4193/209796/5f23d240Ed774ec10/b10a332b84096951.png&quot; alt=&quot;æ ·å¼æ— æ•ˆ&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç»è¿‡æ’æŸ¥ï¼ŒåŸå› æ˜¯å¼•å…¥ CSS æ ·å¼çš„ä»£ç ï¼š&lt;code&gt;import './button.scss'&lt;/code&gt;ï¼Œå¯ä»¥çœ‹åˆ°ç›¸å½“äºåªæ˜¯å¼•å…¥äº†æ ·å¼ï¼Œå¹¶ä¸åƒå…¶ä»– JS æ¨¡å—åé¢åšäº†è°ƒç”¨ï¼Œåœ¨ tree shaking çš„æ—¶å€™ï¼Œä¼šæŠŠ css æ ·å¼å»æ‰ã€‚æ‰€ä»¥åœ¨é…ç½® sideEffects å°±è¦æŠŠ CSS æ–‡ä»¶æ’é™¤æ‰ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;&quot;sideEffects&quot;: [
  &quot;*.scss&quot;
]
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é€šè¿‡ä¸Šè¿° tree shaking çš„æ–¹æ³•ï¼Œå¯ä»¥å®ç°ç»„ä»¶åº“çš„æŒ‰éœ€åŠ è½½åŠŸèƒ½ï¼Œæ‰“åŒ…çš„æ–‡ä»¶å»é™¤äº†æ²¡æœ‰ç”¨åˆ°çš„ç»„ä»¶ä»£ç ï¼ŒåŒæ—¶çœå»äº†ç”¨æˆ·çš„é…ç½®ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å…«ã€æ ·å¼æŒ‰éœ€åŠ è½½&quot;&gt;å…«ã€æ ·å¼æŒ‰éœ€åŠ è½½&lt;/h3&gt;
&lt;p&gt;é€šå¸¸æ¥è¯´ï¼Œç»„ä»¶åº“çš„ JS æ˜¯æŒ‰éœ€åŠ è½½çš„ï¼Œä½†æ˜¯æ ·å¼æ–‡ä»¶ä¸€èˆ¬åªè¾“å‡ºä¸€ä¸ªæ–‡ä»¶ï¼Œå³æŠŠç»„ä»¶åº“ä¸­çš„æ‰€æœ‰æ–‡ä»¶æ‰“åŒ…ç¼–è¯‘æˆä¸€ä¸ª index.css æ–‡ä»¶ï¼Œç”¨æˆ·åœ¨é¡¹ç›®ä¸­å¼•å…¥å³å¯ï¼›ä½†æ˜¯å¦‚æœå°±æ˜¯æƒ³åšæŒ‰éœ€åŠ è½½ç»„ä»¶çš„æ ·å¼æ–‡ä»¶ï¼Œè¯¥å¦‚ä½•å»åšå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæˆ‘æä¾›ä¸€ç§æ€è·¯ï¼Œç”±äº .tsx æ–‡ä»¶æ˜¯ç”± TS ç¼–è¯‘å™¨æ‰“åŒ…ç¼–è¯‘çš„ï¼Œå¹¶æ²¡æœ‰å¤„ç† SCSSï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨äº† node-sass æ¥ç¼–è¯‘ SCSS æ–‡ä»¶ï¼Œå¦‚æœéœ€è¦æŒ‰éœ€åŠ è½½ SCSS æ–‡ä»¶ï¼Œåˆ™æ¯ä¸ªç»„ä»¶çš„ index.tsx æ–‡ä»¶ä¸­å°±éœ€è¦å¼•å…¥å¯¹åº”çš„ SCSS æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;import Button from './button';
import './button.scss';
export default Button;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç”Ÿæˆçš„ SCSS æ–‡ä»¶ä¹Ÿéœ€è¦æ‰“åŒ…åˆ°æ¯ä¸ªç»„ä»¶ä¸­ï¼Œè€Œä¸æ˜¯ç”Ÿæˆåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼š&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ä½¿ç”¨äº† node-sass ä¸­çš„ sass.render å‡½æ•°ï¼ŒæŠ½å–æ¯ä¸ªæ–‡ä»¶ä¸­çš„æ ·å¼æ–‡ä»¶ï¼Œå¹¶æ‰“åŒ…ç¼–è¯‘åˆ°å¯¹åº”çš„æ–‡ä»¶ä¸­ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;//çœç•¥ import å¼•å…¥,æ ¸å¿ƒä»£ç å¦‚ä¸‹
function createCss(name){
    const lowerName = name.toLowerCase();
    sass.render({ // è°ƒç”¨ node-sass å‡½æ•°æ–¹æ³•ï¼Œç¼–è¯‘æŒ‡å®šçš„ scss æ–‡ä»¶åˆ°æŒ‡å®šçš„è·¯å¾„ä¸‹
        file: currPath(`../src/components/${name}/${lowerName}.scss`),
        outputStyle: 'compressed', // è¿›è¡Œå‹ç¼©
        sourceMap: true,
    },(err,result)=&amp;gt;{
        if(err){
            console.log(err);
        }
        const stylePath = `../dist/components/${name}/`;
        fs.writeFile(currPath(stylePath+`/${lowerName}.scss`), result.css, function(err){
            if(err){
                console.log(err);
            }
        });
    });
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™æ ·å°±åœ¨ç”Ÿæˆçš„ dist æ–‡ä»¶ä¸­çš„æ¯ä¸ªç»„ä»¶ä¸­å¢åŠ äº† SCSS æ–‡ä»¶ï¼Œç”¨æˆ·é€šè¿‡â€œæŒ‰éœ€åŠ è½½å°èŠ‚â€ä¸­çš„æ–¹æ³•åœ¨å¼•å…¥ç»„ä»¶çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨å¯¹åº”çš„ index æ–‡ä»¶ï¼Œåœ¨ index.js æ–‡ä»¶ä¸­å°±ä¼šè°ƒç”¨å¯¹åº”çš„ SCSS æ–‡ä»¶ï¼Œä»è€Œä¹Ÿå®ç°äº†æ ·å¼æ–‡ä»¶çš„æŒ‰éœ€åŠ è½½ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯è¿™æ ·è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åœ¨å¼€å‘ç»„ä»¶åº“çš„æ—¶å€™æ¯ä¸ªç»„ä»¶ä¸­çš„ index.tsx æ–‡ä»¶ä¸­å¼•å…¥çš„æ˜¯ SCSS æ–‡ä»¶ &lt;code&gt;import './button.scss';&lt;/code&gt; ï¼Œæ‰€ä»¥ node-sass ç¼–è¯‘åçš„æ–‡ä»¶éœ€è¦æ˜¯ SCSS åç¼€çš„æ–‡ä»¶ï¼ˆè™½ç„¶å·²ç»æ˜¯ CSS æ ¼å¼ï¼‰ï¼Œå¦‚æœç”Ÿæˆçš„æ˜¯ CSS æ–‡ä»¶ï¼Œåˆ™ç”¨æˆ·åœ¨ä½¿ç”¨ç»„ä»¶çš„æ—¶å€™å°±ä¼šå› æ‰¾ä¸åˆ° SCSS æ–‡ä»¶è€ŒæŠ¥é”™ï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·åœ¨ä½¿ç”¨ç»„ä»¶çš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦å®‰è£… node-sass æ’ä»¶ã€‚&lt;br/&gt;ä¸çŸ¥å¤§å®¶æœ‰æ²¡æœ‰æ›´å¥½çš„åŠæ³•ï¼Œåœ¨ç»„ä»¶åº“å¼€å‘çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯ SCSS æ–‡ä»¶ï¼Œç¼–è¯‘åç”Ÿæˆçš„æ˜¯ CSS åç¼€çš„æ–‡ä»¶ï¼Œåœ¨ç”¨æˆ·ä½¿ç”¨ç»„ä»¶çš„ä¸­è°ƒç”¨çš„ä¹Ÿæ˜¯ CSS æ–‡ä»¶å‘¢ï¼Ÿæ¬¢è¿åœ¨æ–‡æœ«ç•™è¨€è®¨è®ºï½&lt;/p&gt;
&lt;h3 id=&quot;ç»“è¯­&quot;&gt;ç»“è¯­&lt;/h3&gt;
&lt;p&gt;ä»¥ä¸Šå°±æ˜¯æ•´ä¸ªæ­å»ºç»„ä»¶åº“çš„è¿‡ç¨‹ï¼Œä»ä¸€å¼€å§‹å†³å®šä½¿ç”¨ç°æœ‰çš„ create-react-app è„šæ‰‹æ¶å’Œ docz æ¥æ„æˆæ ¸å¿ƒåŠŸèƒ½ï¼Œåˆ°æ–‡æ¡£çš„ç½‘ç«™éƒ¨ç½²å’Œ npm èµ„æºçš„å‘å¸ƒï¼Œæœ€åˆæ„Ÿè§‰åº”è¯¥èƒ½å¤Ÿå¿«é€Ÿå®Œæˆæ•´ä¸ªç»„ä»¶åº“çš„æ­å»ºï¼Œå®é™…ä¸Šå¦‚æœè¦æƒ³æ”¹åŠ¨è¿™äº›ç°æœ‰çš„åº“æ¥å®ç°è‡ªå·±æƒ³è¦çš„æ•ˆæœï¼Œè¿˜æ˜¯ç»å†äº†ä¸€äº›æ¢ç´¢ï¼Œä¸è¿‡æ•´ä¸ªæ‘¸ç´¢è¿‡ç¨‹ä¹Ÿæ˜¯ä¸€ç§æ”¶è·å’Œä¹è¶£æ‰€åœ¨ï¼Œæ„¿èµ°è¿‡è·¯è¿‡çš„å°ä¼™ä¼´èƒ½æœ‰æ‰€æ”¶è·ï½&lt;/p&gt;
&lt;h3 id=&quot;å‚è€ƒæ–‡ç« &quot;&gt;å‚è€ƒæ–‡ç« &lt;/h3&gt;
&lt;p&gt;[1] NutUI ç»„ä»¶åº“: &lt;a href=&quot;http://nutui.jd.com/#/index&quot;&gt;http://nutui.jd.com/#/index&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[2] yep-react ç»„ä»¶åº“: &lt;a href=&quot;http://yep-react.jd.com&quot;&gt;http://yep-react.jd.com&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[3] react å®˜æ–¹ç½‘ç«™: &lt;a href=&quot;https://reactjs.org/warnings/invalid-hook-call-warning.html&quot;&gt;https://reactjs.org/warnings/invalid-hook-call-warning.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[4] storybook: &lt;a href=&quot;https://storybook.js.org/&quot;&gt;https://storybook.js.org/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[5] docz: &lt;a href=&quot;https://www.docz.site/&quot;&gt;https://www.docz.site/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[6] docz å®˜æ–¹æ–‡æ¡£: &lt;a href=&quot;https://www.docz.site/docs/gatsby-theme&quot;&gt;https://www.docz.site/docs/gatsby-theme&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[7] Netlify: &lt;a href=&quot;https://app.netlify.com/teams/zhenyulei/sites&quot;&gt;https://app.netlify.com/teams/zhenyulei/sites&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[8]åŸºäº Storybook 5 æ‰“é€ ç»„ä»¶åº“å¼€å‘ä¸æ–‡æ¡£ç«™å»ºè®¾å°ç»“: &lt;a href=&quot;http://jelly.jd.com/article/5f06fe8505541b015b6a708a&quot;&gt;http://jelly.jd.com/article/5f06fe8505541b015b6a708a&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 13 Oct 2020 00:08:00 +0000</pubDate>
<dc:creator>jdf2e</dc:creator>
<og:description>å‰è¨€ ä¿—è¯è¯´ï¼šâ€œéº»é›€è™½å°ï¼Œäº”è„ä¿±å…¨â€ï¼Œæ­å»ºä¸€ä¸ªç»„ä»¶åº“ï¼ŒçŸ¥ä¹‹ééš¾ï¼Œè¡Œä¹‹ä¸æ˜“ï¼Œæ¶‰åŠåˆ°çš„æŠ€æœ¯æ–¹æ–¹é¢é¢ï¼ŒçŠ¹å¦‚æµ·é¢é£å¹³æµªé™ï¼Œå®åˆ™æš—ç¤é™©æ»©ï¼Œå¤„å¤„æƒŠé™©ï½ ç›®å‰å›¢é˜Ÿå†…å·²ç»æœ‰è¾ƒä¸ºæˆç†Ÿçš„ Vue æŠ€æœ¯æ ˆçš„ NutUI ç»„</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/jdrdfe/p/13805669.html</dc:identifier>
</item>
<item>
<title>BeetleXä¹‹webapiè‡ªå®šä¹‰å“åº”å†…å®¹ - beetlex</title>
<link>http://www.cnblogs.com/smark/p/13806610.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/smark/p/13806610.html</guid>
<description>&lt;p&gt;Â  Â  Â  Â  &lt;span&gt;è¾“å‡ºå†…å®¹å¤šæ ·æ€§åœ¨webapiæœåŠ¡ä¸­æ¯”è¾ƒæ™®éçš„ï¼Œæœ‰çš„æƒ…å†µä½¿ç”¨json,xmlï¼Œå›¾ç‰‡å’ŒäºŒè¿›åˆ¶æµä¸‹è½½ç­‰ç­‰ï¼›ä¸ºäº†é€‚åº”ç”¨ä¸åŒæƒ…å†µçš„éœ€è¦ï¼Œç»„ä»¶æ”¯æŒè‡ªå®šä¹‰å†…å®¹è¾“å‡ºã€‚æ¥ä¸‹æ¥çš„ä¸»è¦æè¿°ç»„ä»¶åœ¨webapiå¦‚ä½•å®šä¹‰å„ç§å†…å®¹è¾“å‡ºæ¥æ»¡è¶³å®é™…åº”ç”¨çš„éœ€è¦ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;è§„åˆ™&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;Â  Â  Â  Â  &lt;span&gt;ç»„ä»¶é€šè¿‡æ¥å£æ¥è§„èŒƒè‡ªå®šä¹‰å†…å®¹è¾“å‡º&lt;/span&gt;:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;interface&lt;/span&gt;&lt;span&gt; IResult
    {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;æŒ‡å®šè¾“å‡ºçš„ContentType&lt;/span&gt;
        IHeaderItem ContentType { &lt;span&gt;get&lt;/span&gt;&lt;span&gt;; }
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;http bodyé•¿åº¦ï¼Œæ­¤å€¼å¯ä»¥æ˜¯é›¶ï¼Œå½“ä¸ºé›¶çš„æ—¶å€™ç»„ä»¶ä¼šè‡ªåŠ¨è®¡ç®—&lt;/span&gt;
        &lt;span&gt;int&lt;/span&gt; Length { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è¾“å‡ºå‰ç”¨äºè®¾ç½®ç›¸å…³httpå¤´ä¿¡æ¯&lt;/span&gt;
        &lt;span&gt;void&lt;/span&gt;&lt;span&gt; Setting(HttpResponse response);
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;æ˜¯å¦å­˜åœ¨http bodyå†…å®¹&lt;/span&gt;
        &lt;span&gt;bool&lt;/span&gt; HasBody { &lt;span&gt;get&lt;/span&gt;&lt;span&gt;; }
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å†™å…¥Http body&lt;/span&gt;
        &lt;span&gt;void&lt;/span&gt;&lt;span&gt; Write(PipeStream stream, HttpResponse response);
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;cs&quot;&gt;
&lt;span&gt;ä»¥ä¸Šæ˜¯å®šä¹‰å†…å®¹è¾“å‡ºçš„æ¥å£è§„åˆ™ï¼Œæ‰€æœ‰è‡ªå®šä¹‰è¾“å‡ºéƒ½å¿…é¡»å®ç°è¿™è§„åˆ™ã€‚ä»¥ä¸‹æ˜¯é’ˆå¯¹text/plain; charset=UTF-8çš„åŸºç¡€ç±»è¾“å‡ºæŠ½è±¡ç±»&lt;/span&gt;
&lt;/pre&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;abstract&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; ResultBase : IResult
    {
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;virtual&lt;/span&gt; IHeaderItem ContentType =&amp;gt;&lt;span&gt; ContentTypes.TEXT_UTF8;
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;virtual&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; Length { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;virtual&lt;/span&gt; &lt;span&gt;bool&lt;/span&gt; HasBody =&amp;gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;virtual&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; Setting(HttpResponse response)
        {}
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;virtual&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; Write(PipeStream stream, HttpResponse response)
        {}
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;cs&quot;&gt;
&lt;span&gt;&lt;span&gt;åœ¨ä»¥ä¸ŠæŠ½è±¡ç±»çš„åŸºç¡€ä¸Šï¼Œç»„ä»¶æ‰©å±•äº†å¾ˆå¤šåŸºç¡€çš„è¾“å‡ºç±»&lt;/span&gt;ã€‚&lt;/span&gt;
&lt;/pre&gt;
&lt;h2&gt;&lt;strong&gt;æœåŠ¡å†…éƒ¨é”™è¯¯&lt;/strong&gt;&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;45&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; InnerErrorResult : ResultBase
{
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; InnerErrorResult(&lt;span&gt;string&lt;/span&gt; code, &lt;span&gt;string&lt;/span&gt;&lt;span&gt; messge)
    {
        Code &lt;/span&gt;=&lt;span&gt; code;
        Message &lt;/span&gt;=&lt;span&gt; messge;
    }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; InnerErrorResult(&lt;span&gt;string&lt;/span&gt; message, Exception e, &lt;span&gt;bool&lt;/span&gt; outputStackTrace) : &lt;span&gt;this&lt;/span&gt;(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;500&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, message, e, outputStackTrace)
    {
    }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; InnerErrorResult(&lt;span&gt;string&lt;/span&gt; code, &lt;span&gt;string&lt;/span&gt; message, Exception e, &lt;span&gt;bool&lt;/span&gt;&lt;span&gt; outputStackTrace)
    {
        Code &lt;/span&gt;=&lt;span&gt; code;
        Message &lt;/span&gt;=&lt;span&gt; message;
        Error &lt;/span&gt;=&lt;span&gt; e.Message;
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (outputStackTrace)
            SourceCode &lt;/span&gt;=&lt;span&gt; e.StackTrace;
        &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;
            SourceCode &lt;/span&gt;= &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;;
    }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;string&lt;/span&gt; Message { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;string&lt;/span&gt; Error { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;string&lt;/span&gt; Code { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;string&lt;/span&gt; SourceCode { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;override&lt;/span&gt; &lt;span&gt;bool&lt;/span&gt; HasBody =&amp;gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;override&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; Setting(HttpResponse response)
    {
        response.Code &lt;/span&gt;=&lt;span&gt; Code;
        response.CodeMsg &lt;/span&gt;=&lt;span&gt; Message;
        response.Request.ClearStream();
    }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;override&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; Write(PipeStream stream, HttpResponse response)
    {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;string&lt;/span&gt;&lt;span&gt;.IsNullOrEmpty(Error))
        {
            stream.WriteLine(Error);
        }
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;string&lt;/span&gt;&lt;span&gt;.IsNullOrEmpty(SourceCode))
        {
            stream.WriteLine(SourceCode);
        }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;ä»¥ä¸Šæ˜¯ç»„ä»¶å†…éƒ¨é”™è¯¯å®šä¹‰çš„è¾“å‡ºç±»ï¼Œæ‰€æœ‰å¤„ç†çš„å†…éƒ¨å¼‚å¸¸å“åº”éƒ½æ˜¯ä½¿ç”¨è¿™ç±»è¿›è¡Œè¾“å‡ºã€‚&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;mIPLimit.ValidateRPS(request))
{
    token.KeepAlive &lt;/span&gt;= &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
    InnerErrorResult innerErrorResult &lt;/span&gt;= 
    &lt;span&gt;new&lt;/span&gt; InnerErrorResult(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;400&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, $&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;{request.RemoteIPAddress} request limit!&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
    response.Result(innerErrorResult);
    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt;;
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;ä»¥ä¸Šæ˜¯ç»„ä»¶å†…éƒ¨é’ˆå¯¹IPåšçš„ä¸€ä¸ªè¯·æ±‚é™åˆ¶é”™è¯¯è¾“å‡ºã€‚&lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;JSONè¾“å‡º&lt;/strong&gt;&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;55&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; JsonResult : ResultBase
{
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; JsonResult(&lt;span&gt;object&lt;/span&gt; data, &lt;span&gt;bool&lt;/span&gt; autoGzip = &lt;span&gt;false&lt;/span&gt;&lt;span&gt;)
    {
        Data &lt;/span&gt;=&lt;span&gt; data;
        mAutoGzip &lt;/span&gt;=&lt;span&gt; autoGzip;
    }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;object&lt;/span&gt; Data { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;bool&lt;/span&gt; mAutoGzip = &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; ArraySegment&amp;lt;&lt;span&gt;byte&lt;/span&gt;&amp;gt;&lt;span&gt; mJsonData;
    [ThreadStatic]
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt;&lt;span&gt; System.Text.StringBuilder mJsonText;
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; OnSerialize(HttpResponse response)
    {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (mJsonText == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
            mJsonText &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; System.Text.StringBuilder();
        mJsonText.Clear();
        JsonSerializer serializer &lt;/span&gt;=&lt;span&gt; response.JsonSerializer;
        System.IO.StringWriter writer &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; System.IO.StringWriter(mJsonText);
        JsonTextWriter jsonTextWriter &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; JsonTextWriter(writer);
        serializer.Serialize(jsonTextWriter, Data);
        &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; charbuffer = System.Buffers.ArrayPool&amp;lt;Char&amp;gt;&lt;span&gt;.Shared.Rent(mJsonText.Length);
        mJsonText.CopyTo(&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;, charbuffer, &lt;span&gt;0&lt;/span&gt;&lt;span&gt;, mJsonText.Length);
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt;
        {
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; bytes = System.Buffers.ArrayPool&amp;lt;&lt;span&gt;byte&lt;/span&gt;&amp;gt;.Shared.Rent(mJsonText.Length * &lt;span&gt;6&lt;/span&gt;&lt;span&gt;);
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; len = System.Text.Encoding.UTF8.GetBytes(charbuffer, &lt;span&gt;0&lt;/span&gt;, mJsonText.Length, bytes, &lt;span&gt;0&lt;/span&gt;&lt;span&gt;);
            mJsonData &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; ArraySegment&amp;lt;&lt;span&gt;byte&lt;/span&gt;&amp;gt;(bytes, &lt;span&gt;0&lt;/span&gt;&lt;span&gt;, len);
        }
        &lt;/span&gt;&lt;span&gt;finally&lt;/span&gt;&lt;span&gt;
        {
            System.Buffers.ArrayPool&lt;/span&gt;&amp;lt;&lt;span&gt;char&lt;/span&gt;&amp;gt;&lt;span&gt;.Shared.Return(charbuffer);
        }
    }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;override&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; Setting(HttpResponse response)
    {
        &lt;/span&gt;&lt;span&gt;base&lt;/span&gt;&lt;span&gt;.Setting(response);
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.mAutoGzip)
            OnSerialize(response);
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (mAutoGzip &amp;amp;&amp;amp; mJsonData.Count &amp;gt; &lt;span&gt;1024&lt;/span&gt; * &lt;span&gt;2&lt;/span&gt;&lt;span&gt;)
        {
            response.Header.Add(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Content-Encoding&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;gzip&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
        }
    }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;override&lt;/span&gt; IHeaderItem ContentType =&amp;gt;&lt;span&gt; ContentTypes.JSON;
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;override&lt;/span&gt; &lt;span&gt;bool&lt;/span&gt; HasBody =&amp;gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;override&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; Write(PipeStream stream, HttpResponse response)
    {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (mAutoGzip)
        {
            &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt;
            {
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (mJsonData.Count &amp;gt; &lt;span&gt;1024&lt;/span&gt; * &lt;span&gt;2&lt;/span&gt;&lt;span&gt;)
                {
                    &lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; (stream.LockFree())
                    {
                        &lt;/span&gt;&lt;span&gt;using&lt;/span&gt; (&lt;span&gt;var&lt;/span&gt; gzipStream = &lt;span&gt;new&lt;/span&gt; GZipStream(stream, CompressionMode.Compress, &lt;span&gt;true&lt;/span&gt;&lt;span&gt;))
                        {
                            gzipStream.Write(mJsonData.Array, mJsonData.Offset, mJsonData.Count);
                            gzipStream.Flush();
                        }
                    }
                }
                &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;
                {
                    stream.Write(mJsonData.Array, mJsonData.Offset, mJsonData.Count);
                }
            }
            &lt;/span&gt;&lt;span&gt;finally&lt;/span&gt;&lt;span&gt;
            {
                System.Buffers.ArrayPool&lt;/span&gt;&amp;lt;&lt;span&gt;byte&lt;/span&gt;&amp;gt;&lt;span&gt;.Shared.Return(mJsonData.Array);
            }
        }
        &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;
        {
            &lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; (stream.LockFree())
            {
                response.JsonSerializer.Serialize(response.JsonWriter, Data);
                response.JsonWriter.Flush();
            }
        }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;ä»¥ä¸Šæ˜¯ç»„ä»¶å†…éƒ¨å®ç°çš„Jsonè¾“å‡ºï¼Œä¸è¿‡è¿™ä¸ªJsonResultå®ç°æœ‰äº›å¤æ‚ï¼Œä¸»è¦æ˜¯å¯ä»¥æ ¹æ®å†…å®¹å¤§å°æ¥è‡ªåŠ¨è¿›è¡ŒGzipè¾“å‡ºã€‚&lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;Websocketå‡çº§å“åº”&lt;/strong&gt;&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; UpgradeWebsocketResult : ResultBase
{
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; UpgradeWebsocketResult(&lt;span&gt;string&lt;/span&gt;&lt;span&gt; websocketKey)
    {
        WebsocketKey &lt;/span&gt;=&lt;span&gt; websocketKey;
    }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;string&lt;/span&gt; WebsocketKey { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;override&lt;/span&gt; &lt;span&gt;bool&lt;/span&gt; HasBody =&amp;gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;override&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; Setting(HttpResponse response)
    {
        response.Code &lt;/span&gt;= &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;101&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
        response.CodeMsg &lt;/span&gt;= &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Switching Protocols&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
        response.Header.Add(HeaderTypeFactory.CONNECTION, &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Upgrade&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
        response.Header.Add(HeaderTypeFactory.UPGRADE, &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;websocket&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
        response.Header.Add(HeaderTypeFactory.SEC_WEBSOCKET_VERSION, &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;13&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
        SHA1 sha1 &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; SHA1CryptoServiceProvider();
        &lt;/span&gt;&lt;span&gt;byte&lt;/span&gt;[] bytes_sha1_in = Encoding.UTF8.GetBytes(WebsocketKey + &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;258EAFA5-E914-47DA-95CA-C5AB0DC85B11&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
        &lt;/span&gt;&lt;span&gt;byte&lt;/span&gt;[] bytes_sha1_out =&lt;span&gt; sha1.ComputeHash(bytes_sha1_in);
        &lt;/span&gt;&lt;span&gt;string&lt;/span&gt; str_sha1_out =&lt;span&gt; Convert.ToBase64String(bytes_sha1_out);
        response.Header.Add(HeaderTypeFactory.SEC_WEBSOCKT_ACCEPT, str_sha1_out);&lt;br/&gt;}
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;cs&quot;&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;span&gt;ä»¥ä¸Šæ˜¯é’ˆå¯¹websocketæ¡æ‰‹å‡çº§å“åº”çš„å†…å®¹&lt;/span&gt;&lt;strong&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;æ–‡ä»¶ä¸‹è½½&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Â Â Â Â Â Â Â &lt;span&gt;Â &lt;/span&gt;&lt;/strong&gt;&lt;span&gt;åœ¨webæœåŠ¡ä¸­å¾ˆå¤šæ—¶å€™éœ€è¦ä¸‹è½½æŒ‡å®šçš„æ–‡ä»¶æˆ–äºŒè¿›åˆ¶å†…å®¹ï¼Œä»¥ä¸‹æ˜¯è½¬é—¨é’ˆå¯¹è¿™äº›éœ€æ±‚åœºåˆ¶å®šçš„å“åº”å¯¹è±¡.&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;41&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; DownLoadResult : BeetleX.FastHttpApi.IResult
{
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; DownLoadResult(&lt;span&gt;string&lt;/span&gt; text, &lt;span&gt;string&lt;/span&gt;&lt;span&gt; fileName, IHeaderItem contentType)
    {
        mData &lt;/span&gt;=&lt;span&gt; Encoding.UTF8.GetBytes(text);
        mFileName &lt;/span&gt;=&lt;span&gt; System.Web.HttpUtility.UrlEncode(fileName);
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (contentType != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
            mContentType &lt;/span&gt;=&lt;span&gt; contentType;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; DownLoadResult(&lt;span&gt;byte&lt;/span&gt;[] data, &lt;span&gt;string&lt;/span&gt;&lt;span&gt; fileName, IHeaderItem contentType)
    {
        mData &lt;/span&gt;=&lt;span&gt; data;
        mFileName &lt;/span&gt;=&lt;span&gt; System.Web.HttpUtility.UrlEncode(fileName);
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (contentType != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
            mContentType &lt;/span&gt;=&lt;span&gt; contentType;
    }

    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;string&lt;/span&gt;&lt;span&gt; mFileName;

    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;&lt;span&gt;[] mData;

    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; IHeaderItem mContentType =&lt;span&gt; ContentTypes.OCTET_STREAM;

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; IHeaderItem ContentType =&amp;gt;&lt;span&gt; mContentType;

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; Length { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;bool&lt;/span&gt; HasBody =&amp;gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; Setting(HttpResponse response)
    {
        response.Header.Add(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Content-Disposition&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, $&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;attachment;filename={mFileName}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
    }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;virtual&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; Write(PipeStream stream, HttpResponse response)
    {
        stream.Write(mData);
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;strong&gt;åº”ç”¨ç¤ºä¾‹&lt;/strong&gt;&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;43&quot;&gt;
&lt;pre&gt;
&lt;span&gt;    [Controller]
    &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; Webapi
    {
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;object&lt;/span&gt;&lt;span&gt; Default()
        {
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; { Name = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;BeetleX&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, Email = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Admin@beetlex.io&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; };
        }
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;object&lt;/span&gt;&lt;span&gt; Json()
        {
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; JsonResult(&lt;span&gt;new&lt;/span&gt; { Name = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;BeetleX&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, Email = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Admin@beetlex.io&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; });
        }
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;object&lt;/span&gt;&lt;span&gt; Download()
        {
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; txt = JsonConvert.SerializeObject(&lt;span&gt;new&lt;/span&gt; { Name = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;BeetleX&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, Email = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Admin@beetlex.io&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; });
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; DownLoadResult(txt, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;json.txt&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, ContentTypes.JSON);
        }
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;object&lt;/span&gt;&lt;span&gt; Image()
        {
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; str = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;...&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; data =&lt;span&gt; Convert.FromBase64String(str);
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; ImageResult(&lt;span&gt;new&lt;/span&gt; ArraySegment&amp;lt;&lt;span&gt;byte&lt;/span&gt;&amp;gt;(data, &lt;span&gt;0&lt;/span&gt;, data.Length), &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;image/jpeg&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
        }
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/254151/202010/254151-20201013080348534-1084953351.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â &lt;img src=&quot;https://img2020.cnblogs.com/blog/254151/202010/254151-20201013080356920-103528273.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;Â &lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/254151/202010/254151-20201013080403224-388958396.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2&gt;Â &lt;strong&gt;ä¸‹è½½ç¤ºä¾‹Â &lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;é“¾æ¥ï¼šhttps://pan.baidu.com/s/1GX2D-Qwo9ep1gHU-sPZkUAÂ &lt;/p&gt;
&lt;p&gt;æå–ç ï¼špy6mÂ &lt;/p&gt;
</description>
<pubDate>Tue, 13 Oct 2020 00:07:00 +0000</pubDate>
<dc:creator>beetlex</dc:creator>
<og:description>è¾“å‡ºå†…å®¹å¤šæ ·æ€§åœ¨webapiæœåŠ¡ä¸­æ¯”è¾ƒæ™®éçš„ï¼Œæœ‰çš„æƒ…å†µä½¿ç”¨json,xmlï¼Œå›¾ç‰‡å’ŒäºŒè¿›åˆ¶æµä¸‹è½½ç­‰ç­‰ï¼›ä¸ºäº†é€‚åº”ç”¨ä¸åŒæƒ…å†µçš„éœ€è¦ï¼Œç»„ä»¶æ”¯æŒè‡ªå®šä¹‰å†…å®¹è¾“å‡ºã€‚æ¥ä¸‹æ¥çš„ä¸»è¦æè¿°ç»„ä»¶åœ¨webapiå¦‚ä½•å®šä¹‰å„ç§å†…å®¹</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/smark/p/13806610.html</dc:identifier>
</item>
<item>
<title>CDH5éƒ¨ç½²ä¸‰éƒ¨æ›²ä¹‹ä¸€ï¼šå‡†å¤‡å·¥ä½œ - ç¨‹åºå‘˜æ¬£å®¸</title>
<link>http://www.cnblogs.com/bolingcavalry/p/13806601.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/bolingcavalry/p/13806601.html</guid>
<description>&lt;h3 id=&quot;æ¬¢è¿è®¿é—®æˆ‘çš„github&quot;&gt;æ¬¢è¿è®¿é—®æˆ‘çš„GitHub&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/zq2599/blog_demos&quot;&gt;https://github.com/zq2599/blog_demos&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å†…å®¹ï¼šæ‰€æœ‰åŸåˆ›æ–‡ç« åˆ†ç±»æ±‡æ€»åŠé…å¥—æºç ï¼Œæ¶‰åŠJavaã€Dockerã€Kubernetesã€DevOPSç­‰ï¼›&lt;/p&gt;
&lt;h3 id=&quot;ç³»åˆ—ä»‹ç»&quot;&gt;ç³»åˆ—ä»‹ç»&lt;/h3&gt;
&lt;p&gt;ã€ŠCDH5éƒ¨ç½²ä¸‰éƒ¨æ›²ã€‹å…±ä¸‰ç¯‡æ–‡ç« ï¼Œå¯¹CDH5.7.2ç‰ˆæœ¬çš„å‡†å¤‡ã€éƒ¨ç½²ã€å¯åŠ¨ã€è®¾ç½®ç­‰ç¯èŠ‚è¿›è¡Œå®æˆ˜ï¼Œå†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€ç¯‡ï¼šã€Šå‡†å¤‡å·¥ä½œã€‹ï¼Œå³CDHé›†ç¾¤ä¸­æ¯ä¸€å°æœºå™¨éƒ½è¦åšçš„æ“ä½œï¼›&lt;br/&gt;ç¬¬äºŒç¯‡ï¼šã€Šéƒ¨ç½²å’Œè®¾ç½®ã€‹ï¼Œæœ¬ç« å®ŒæˆCDHé›†ç¾¤éƒ¨ç½²å’Œå¯åŠ¨ï¼›&lt;br/&gt;ç¬¬ä¸‰ç¯‡ï¼šã€Šé—®é¢˜æ€»ç»“ã€‹ï¼Œåˆ—å‡ºå®æˆ˜ä¸­é‡åˆ°çš„é—®é¢˜åŠè§£å†³åŠæ³•ï¼›&lt;/p&gt;
&lt;h3 id=&quot;ç³»åˆ—æ–‡ç« é“¾æ¥&quot;&gt;ç³»åˆ—æ–‡ç« é“¾æ¥&lt;/h3&gt;
&lt;ol&gt;&lt;li&gt;&lt;a href=&quot;https://blog.csdn.net/boling_cavalry/article/details/105340968&quot;&gt;ã€ŠCDH5éƒ¨ç½²ä¸‰éƒ¨æ›²ä¹‹ä¸€ï¼šå‡†å¤‡å·¥ä½œã€‹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://blog.csdn.net/boling_cavalry/article/details/105341713&quot;&gt;ã€ŠCDH5éƒ¨ç½²ä¸‰éƒ¨æ›²ä¹‹äºŒï¼šéƒ¨ç½²å’Œè®¾ç½®ã€‹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://blog.csdn.net/boling_cavalry/article/details//105342156&quot;&gt;ã€ŠCDH5éƒ¨ç½²ä¸‰éƒ¨æ›²ä¹‹ä¸‰ï¼šé—®é¢˜æ€»ç»“ã€‹&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;h3 id=&quot;ç‰ˆæœ¬ä¿¡æ¯&quot;&gt;ç‰ˆæœ¬ä¿¡æ¯&lt;/h3&gt;
&lt;ol&gt;&lt;li&gt;CentOSï¼š7.6.1810&lt;/li&gt;
&lt;li&gt;Pythonï¼š 2.7.5ï¼ˆæ“ä½œç³»ç»Ÿè‡ªå¸¦ï¼‰&lt;/li&gt;
&lt;li&gt;CMåŒ…ï¼šcloudera-manager-centos7-cm5.7.2_x86_64.tar.gz&lt;/li&gt;
&lt;/ol&gt;&lt;h3 id=&quot;æœåŠ¡å™¨è§„åˆ’&quot;&gt;æœåŠ¡å™¨è§„åˆ’&lt;/h3&gt;
&lt;p&gt;æœ¬æ¬¡æ­å»ºçš„CDHé›†ç¾¤ä¸€å…±ç”¨åˆ°ä¸‰å°æœºå™¨ï¼Œä¸€å°masterï¼Œå¦å¤–ä¸¤å°æ˜¯agentï¼š&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;ä¸»æœºå&lt;/th&gt;
&lt;th&gt;IPåœ°å€&lt;/th&gt;
&lt;th&gt;å†…å­˜&lt;/th&gt;
&lt;th&gt;èº«ä»½&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;master&lt;/td&gt;
&lt;td&gt;192.168.133.152&lt;/td&gt;
&lt;td&gt;åŒæ ¸4Gå†…å­˜&lt;/td&gt;
&lt;td&gt;ç®¡ç†èŠ‚ç‚¹&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;worker1&lt;/td&gt;
&lt;td&gt;192.168.133.153&lt;/td&gt;
&lt;td&gt;åŒæ ¸8Gå†…å­˜&lt;/td&gt;
&lt;td&gt;ä»»åŠ¡èŠ‚ç‚¹&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;worker2&lt;/td&gt;
&lt;td&gt;192.168.133.154&lt;/td&gt;
&lt;td&gt;åŒæ ¸16Gå†…å­˜&lt;/td&gt;
&lt;td&gt;ä»»åŠ¡èŠ‚ç‚¹&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3 id=&quot;æ–‡ä»¶ä¸‹è½½&quot;&gt;æ–‡ä»¶ä¸‹è½½&lt;/h3&gt;
&lt;ol&gt;&lt;li&gt;cmä¸‹è½½åœ°å€ï¼š&lt;a href=&quot;http://archive.cloudera.com/cm5/cm/5/&quot;&gt;&lt;span&gt;http://archive.cloudera.com/cm5/cm/5/&lt;/span&gt;&lt;/a&gt; ï¼Œæ‰¾åˆ°è‡ªå·±éœ€è¦çš„cmåŒ…ä¸‹è½½ï¼Œæœ¬æ¬¡å®æˆ˜ç”¨çš„æ˜¯&lt;span&gt;cloudera-manager-centos7-cm5.7.2_x86_64.tar.gz&lt;/span&gt;ï¼Œå¦‚ä¸‹å›¾çº¢æ¡†ï¼š&lt;br/&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/485422/202010/485422-20201013075657347-1962529598.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/li&gt;
&lt;li&gt;parcelä¸‹è½½åœ°å€ï¼š&lt;a href=&quot;http://archive.cloudera.com/cdh5/parcels&quot;&gt;&lt;span&gt;http://archive.cloudera.com/cdh5/parcels&lt;/span&gt;&lt;/a&gt; ï¼Œæœ¬æ¬¡å®æˆ˜ç”¨åˆ°çš„æ˜¯&lt;span&gt;CDH-5.7.2-1.cdh5.7.2.p0.18-el7.parcel&lt;/span&gt;ï¼Œè¯·ä¸‹è½½ä¸‹å›¾çº¢æ¡†ä¸­çš„ä¸‰ä¸ªæ–‡ä»¶ï¼Œæ³¨æ„ä¸€å…±è¦ä¸‹è½½ä¸‰ä¸ªæ–‡ä»¶ï¼š&lt;br/&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/485422/202010/485422-20201013075658196-1251807371.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;h3 id=&quot;æ‰€æœ‰æœºå™¨éƒ½è¦åšçš„ç›¸åŒæ“ä½œ&quot;&gt;æ‰€æœ‰æœºå™¨éƒ½è¦åšçš„ç›¸åŒæ“ä½œ&lt;/h3&gt;
&lt;p&gt;ä»¥ä¸‹æ“ä½œéœ€è¦masterã€worker1ã€worker2å„è‡ªåšä¸€éï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;æœ¬æ¬¡å®æˆ˜åœ¨æ‰€æœ‰æœºå™¨ä¸Šçš„æ“ä½œï¼Œéƒ½ä½¿ç”¨rootè´¦å·ï¼›&lt;/li&gt;
&lt;li&gt;ç¡®ä¿æ‰€æœ‰æœºå™¨éƒ½å¯ä»¥ç”¨SSHå·¥å…·è¿œç¨‹ç™»å½•ï¼›&lt;/li&gt;
&lt;li&gt;å®‰è£…æ—¶é—´åŒæ­¥å·¥å…·ï¼š&lt;/li&gt;
&lt;/ol&gt;&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;yum install -y ntpdate
&lt;/code&gt;
&lt;/pre&gt;
&lt;ol start=&quot;4&quot;&gt;&lt;li&gt;æ—¶é—´åŒæ­¥ï¼š&lt;/li&gt;
&lt;/ol&gt;&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;ntpdate cn.ntp.org.cn
&lt;/code&gt;
&lt;/pre&gt;
&lt;ol start=&quot;5&quot;&gt;&lt;li&gt;å…³é—­å’Œç¦ç”¨é˜²ç«å¢™ï¼š&lt;/li&gt;
&lt;/ol&gt;&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;systemctl stop firewalld &amp;amp;&amp;amp; systemctl disable firewalld
&lt;/code&gt;
&lt;/pre&gt;
&lt;ol start=&quot;6&quot;&gt;&lt;li&gt;å…³é—­SELINUXï¼šæ‰“å¼€æ–‡ä»¶&lt;span&gt;/etc/selinux/config&lt;/span&gt;ï¼Œæ‰¾åˆ°&lt;span&gt;SELINUX=xxx&lt;/span&gt;é‚£ä¸€è¡Œï¼Œæ”¹ä¸º&lt;span&gt;SELINUX=disabled&lt;/span&gt;ï¼Œå¦‚ä¸‹å›¾çº¢æ¡†ï¼š&lt;br/&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/485422/202010/485422-20201013075659052-593086035.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/li&gt;
&lt;li&gt;å…³é—­swapï¼šæ‰“å¼€æ–‡ä»¶&lt;span&gt;/etc/fstab&lt;/span&gt;ï¼Œæ‰¾åˆ°å¸¦æœ‰&lt;span&gt;swap&lt;/span&gt;çš„é‚£ä¸€è¡Œï¼Œæ³¨é‡Šæ‰ï¼Œå¦‚ä¸‹å›¾çº¢æ¡†ï¼š&lt;br/&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/485422/202010/485422-20201013075659818-1996876174.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/li&gt;
&lt;li&gt;é‡å¯ç”µè„‘ï¼›&lt;/li&gt;
&lt;li&gt;æ–°å»ºæ–‡ä»¶å¤¹&lt;span&gt;/usr/lib/jvm&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;å®‰è£…JDKï¼Œæˆ‘è¿™é‡Œä¸‹è½½çš„æ˜¯&lt;span&gt;jdk-8u191-linux-x64.tar.gz&lt;/span&gt;ï¼Œè§£å‹åæ˜¯ä¸ªåä¸º&lt;span&gt;jdk1.8.0_191&lt;/span&gt;çš„æ–‡ä»¶å¤¹ï¼Œå°†æ­¤æ–‡ä»¶å¤¹æ”¾åœ¨&lt;span&gt;/usr/lib/jvm&lt;/span&gt;ç›®å½•ä¸‹ï¼›&lt;/li&gt;
&lt;li&gt;æ‰“å¼€æ–‡ä»¶&lt;span&gt;/etc/profile&lt;/span&gt;ï¼Œåœ¨å°¾éƒ¨å¢åŠ ä»¥ä¸‹å†…å®¹ï¼š&lt;/li&gt;
&lt;/ol&gt;&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;export JAVA_HOME=/usr/lib/jvm/jdk1.8.0_191
export JRE_HOME=${JAVA_HOME}/jre
export CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib
export PATH=${JAVA_HOME}/bin:$PATH
&lt;/code&gt;
&lt;/pre&gt;
&lt;ol start=&quot;12&quot;&gt;&lt;li&gt;ä½¿é…ç½®ç”Ÿæ•ˆï¼š&lt;/li&gt;
&lt;/ol&gt;&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;source /etc/profile
&lt;/code&gt;
&lt;/pre&gt;
&lt;ol start=&quot;13&quot;&gt;&lt;li&gt;CDHé»˜è®¤çš„JDKç›®å½•æ˜¯ &lt;span&gt;/usr/java/default&lt;/span&gt;ï¼Œå› æ­¤è¦åˆ›å»ºè½¯é“¾æ¥ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š&lt;/li&gt;
&lt;/ol&gt;&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;mkdir /usr/java &amp;amp;&amp;amp; ln -s /usr/lib/jvm/jdk1.8.0_191 /usr/java/default
&lt;/code&gt;
&lt;/pre&gt;
&lt;ol start=&quot;14&quot;&gt;&lt;li&gt;æ£€æŸ¥Pythonæ˜¯å¦å¯ç”¨ï¼Œå¦‚æœæ²¡æœ‰è¿˜è¯·è‡ªè¡Œå®‰è£…ï¼Œæœ¬æ¬¡ç”¨åˆ°çš„æ˜¯2.6æˆ–è€…2.7ç‰ˆæœ¬ï¼š&lt;br/&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/485422/202010/485422-20201013075700328-1668091286.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/li&gt;
&lt;li&gt;å®‰è£…å¤šä¸ªä¾èµ–åŒ…ï¼š&lt;/li&gt;
&lt;/ol&gt;&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;yum -y install chkconfig bind-utils psmisc libxslt zlib sqlite cyrus-sasl-plain cyrus-sasl-gssapi fuse fuse-libs redhat-lsb
&lt;/code&gt;
&lt;/pre&gt;
&lt;ol start=&quot;16&quot;&gt;&lt;li&gt;åˆ›å»ºç›®å½•ï¼š&lt;/li&gt;
&lt;/ol&gt;&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;mkdir /opt/cloudera-manager
&lt;/code&gt;
&lt;/pre&gt;
&lt;ol start=&quot;17&quot;&gt;&lt;li&gt;æŠŠå‰é¢å‡†å¤‡å¥½çš„æ–‡ä»¶&lt;span&gt;cloudera-manager-centos7-cm5.7.2_x86_64.tar.gz&lt;/span&gt;ä¸Šä¼ åˆ°&lt;span&gt;master&lt;/span&gt;ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°†è¯¥æ–‡ä»¶è§£å‹åˆ°&lt;span&gt;/opt/cloudera-manager&lt;/span&gt;ç›®å½•ï¼š&lt;/li&gt;
&lt;/ol&gt;&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;tar -zxvf cloudera-manager-centos7-cm5.7.2_x86_64.tar.gz -C /opt/cloudera-manager/
&lt;/code&gt;
&lt;/pre&gt;
&lt;ol start=&quot;18&quot;&gt;&lt;li&gt;åˆ›å»ºè´¦å·&lt;span&gt;cloudera-scm&lt;/span&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;useradd --system --no-create-home --shell=/bin/false --comment &quot;Cloudera SCM User&quot; cloudera-scm
&lt;/code&gt;
&lt;/pre&gt;
&lt;ol start=&quot;19&quot;&gt;&lt;li&gt;ç¼–è¾‘æ–‡ä»¶&lt;span&gt;config.ini&lt;/span&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;vi /opt/cloudera-manager/cm-5.7.2/etc/cloudera-scm-agent/config.ini
&lt;/code&gt;
&lt;/pre&gt;
&lt;ol start=&quot;20&quot;&gt;&lt;li&gt;ä¿®æ”¹&lt;span&gt;server_host&lt;/span&gt;çš„å€¼ï¼Œæ”¹ä¸º&lt;span&gt;master&lt;/span&gt;ï¼Œå¦‚ä¸‹å›¾çº¢æ¡†æ‰€ç¤ºï¼š&lt;br/&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/485422/202010/485422-20201013075700746-1813786872.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/li&gt;
&lt;li&gt;æ–°å»ºç›®å½• &lt;span&gt;/usr/share/java/&lt;/span&gt;ï¼Œå°†åˆšæ‰ä¸‹è½½çš„&lt;span&gt;mysql-connector-java-5.1.34.jar&lt;/span&gt;æ”¾å…¥è¯¥ç›®å½•ï¼Œå¹¶æ”¹åä¸º&lt;span&gt;mysql-connector-java.jar&lt;/span&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;h3 id=&quot;ä¸‰å°ç”µè„‘ç›¸äº’å…å¯†ç ç™»å½•è®¾ç½®&quot;&gt;ä¸‰å°ç”µè„‘ç›¸äº’å…å¯†ç ç™»å½•è®¾ç½®&lt;/h3&gt;
&lt;ol&gt;&lt;li&gt;ä¸‰å°ç”µè„‘çš„/etc/hostsæ–‡ä»¶ï¼Œéƒ½å¢åŠ ä»¥ä¸‹ç›¸åŒå†…å®¹ï¼š&lt;/li&gt;
&lt;/ol&gt;&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;192.168.133.154 master
192.168.133.155 worker1
192.168.133.156 worker2
&lt;/code&gt;
&lt;/pre&gt;
&lt;ol start=&quot;2&quot;&gt;&lt;li&gt;ä¸‰å°ç”µè„‘éƒ½æ‰§è¡Œå‘½ä»¤ï¼š&lt;span&gt;ssh-keygen&lt;/span&gt; ç„¶åå››ä¸ªå›è½¦å®Œæˆsshå…¬ç§é’¥åˆ›å»ºï¼›&lt;/li&gt;
&lt;li&gt;åœ¨masteræ‰§è¡Œ&lt;span&gt;ssh-copy-id root@worker1&lt;/span&gt;ã€&lt;span&gt;ssh-copy-id root@worker2&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;åœ¨worker1æ‰§è¡Œ&lt;span&gt;ssh-copy-id root@master&lt;/span&gt;ã€&lt;span&gt;ssh-copy-id root@worker2&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;åœ¨worker2æ‰§è¡Œ&lt;span&gt;ssh-copy-id root@master&lt;/span&gt;ã€&lt;span&gt;ssh-copy-id root@worker1&lt;/span&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;è‡³æ­¤ï¼Œå‡†å¤‡å·¥ä½œå…¨éƒ¨å®Œæˆï¼Œè¯·ç¡®ä¿æ‰€æœ‰æœºå™¨éƒ½åšäº†ä¸Šè¿°æ“ä½œï¼Œä¸‹ä¸€ç¯‡ä¼šç”¨è¿™äº›æœºå™¨æ¥å®Œæˆéƒ¨ç½²ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ¬¢è¿å…³æ³¨å…¬ä¼—å·ï¼šç¨‹åºå‘˜æ¬£å®¸&quot;&gt;æ¬¢è¿å…³æ³¨å…¬ä¼—å·ï¼šç¨‹åºå‘˜æ¬£å®¸&lt;/h3&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;å¾®ä¿¡æœç´¢ã€Œç¨‹åºå‘˜æ¬£å®¸ã€ï¼Œæˆ‘æ˜¯æ¬£å®¸ï¼ŒæœŸå¾…ä¸æ‚¨ä¸€åŒç•…æ¸¸Javaä¸–ç•Œ...&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/zq2599/blog_demos&quot;&gt;https://github.com/zq2599/blog_demos&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Mon, 12 Oct 2020 23:57:00 +0000</pubDate>
<dc:creator>ç¨‹åºå‘˜æ¬£å®¸</dc:creator>
<og:description>æ¬¢è¿è®¿é—®æˆ‘çš„GitHub https://github.com/zq2599/blog_demos å†…å®¹ï¼šæ‰€æœ‰åŸåˆ›æ–‡ç« åˆ†ç±»æ±‡æ€»åŠé…å¥—æºç ï¼Œæ¶‰åŠJavaã€Dockerã€Kubernetesã€DevOPS</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/bolingcavalry/p/13806601.html</dc:identifier>
</item>
<item>
<title>æˆ‘è¦å‘Šè¯‰ä½ ï¼šjavaæ¥å£ä¸­å¯ä»¥å®šä¹‰privateç§æœ‰æ–¹æ³• - å­—æ¯å“¥åšå®¢</title>
<link>http://www.cnblogs.com/zimug/p/13806592.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/zimug/p/13806592.html</guid>
<description>&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1815316/202010/1815316-20201013073837253-1739083026.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ä¼ ç»Ÿçš„Javaç¼–ç¨‹ä¸­ï¼Œè¢«å¹¿ä¸ºäººçŸ¥çš„ä¸€ä¸ªçŸ¥è¯†ç‚¹æ˜¯ï¼š&lt;strong&gt;java Interfaceæ¥å£ä¸­ä¸èƒ½å®šä¹‰privateç§æœ‰æ–¹æ³•&lt;/strong&gt;ã€‚åªå…è®¸æˆ‘ä»¬å®šä¹‰publicè®¿é—®æƒé™çš„æ–¹æ³•ã€æŠ½è±¡æ–¹æ³•æˆ–é™æ€æ–¹æ³•ã€‚ä½†æ˜¯ä»Java 9 å¼€å§‹ï¼ŒInterface æ¥å£ä¸­å…è®¸å®šä¹‰ç§æœ‰æ–¹æ³•å’Œç§æœ‰é™æ€æ–¹æ³•ã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥ä¸ºå¤§å®¶ä»‹ç»å…¶è¯­æ³•è§„åˆ™ï¼Œå’Œä¸ºä»€ä¹ˆè¦æœ‰è¿™æ ·çš„è®¾è®¡ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;å…¶å®åœ¨Java 8ä¹‹å‰ï¼Œè¿˜æœ‰å¦ä¸€ä¸ªè¢«å¹¿ä¸ºäººä¹‹çš„çŸ¥è¯†ç‚¹ï¼šæ¥å£ä¸­æ‰€æœ‰çš„æ–¹æ³•å¿…é¡»æ˜¯abstract æŠ½è±¡æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œä»java 8å¼€å§‹æ¥å£ä¸­å¯ä»¥åŒ…å«éabstract æ–¹æ³•ï¼Œå¦‚ä¸‹æ–‡ä¸­çš„defaultæ–¹æ³•ã€‚è¿™ä¸ªä¸æ˜¯æˆ‘ä»¬æœ¬æ–‡è¦ä¸ºå¤§å®¶ä»‹ç»çš„å†…å®¹ï¼Œå¦‚ä¸ç†Ÿæ‚‰ï¼Œè¯·è‡ªè¡Œè¡¥è¯¾ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;ä¸€ã€java-9æ¥å£å®šä¹‰ç§æœ‰æ–¹æ³•&quot;&gt;ä¸€ã€Java 9æ¥å£å®šä¹‰ç§æœ‰æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;ä»Java 9å¼€å§‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Interfaceæ¥å£ä¸­æ·»åŠ privateçš„ç§æœ‰æ–¹æ³•å’Œç§æœ‰é™æ€æ–¹æ³•ã€‚è¿™äº›ç§æœ‰æ–¹æ³•å°†æ”¹å–„æ¥å£å†…éƒ¨çš„ä»£ç å¯é‡ç”¨æ€§ã€‚ä¾‹å¦‚ï¼Œå¦‚æœéœ€è¦ä¸¤ä¸ªé»˜è®¤æ–¹æ³•æ¥å…±äº«ä»£ç ï¼Œåˆ™ç§æœ‰æ¥å£æ–¹æ³•å°†å…è®¸å®ƒä»¬å…±äº«ä»£ç ï¼Œä½†ä¸å°†è¯¥ç§æœ‰æ–¹æ³•æš´éœ²ç»™å®ƒçš„å®ç°ç±»è°ƒç”¨ï¼ˆåæ–‡ä¸­ä¼šç»™å¤§å®¶ä¸¾ä¸€ä¸ªä¾‹å­ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ¥å£ä¸­ä½¿ç”¨ç§æœ‰æ–¹æ³•æœ‰å››ä¸ªè§„åˆ™ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æ¥å£ä¸­privateæ–¹æ³•ä¸èƒ½æ˜¯&lt;strong&gt;abstract&lt;/strong&gt;æŠ½è±¡æ–¹æ³•ã€‚å› ä¸ºabstractæŠ½è±¡æ–¹æ³•æ˜¯å…¬å¼€çš„ç”¨äºç»™æ¥å£å®ç°ç±»å®ç°çš„æ–¹æ³•ï¼Œæ‰€ä»¥ä¸èƒ½æ˜¯privateã€‚&lt;/li&gt;
&lt;li&gt;æ¥å£ä¸­ç§æœ‰æ–¹æ³•åªèƒ½åœ¨æ¥å£å†…éƒ¨çš„æ–¹æ³•é‡Œé¢è¢«è°ƒç”¨ã€‚&lt;/li&gt;
&lt;li&gt;æ¥å£ä¸­ç§æœ‰é™æ€æ–¹æ³•å¯ä»¥åœ¨å…¶ä»–é™æ€å’Œéé™æ€æ¥å£æ–¹æ³•ä¸­ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;æ¥å£ä¸­ç§æœ‰éé™æ€æ–¹æ³•ä¸èƒ½åœ¨ç§æœ‰é™æ€æ–¹æ³•å†…éƒ¨ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code&gt;interface CustomInterface {

    public abstract void abstractMethod();  //æŠ½è±¡æ–¹æ³•ä¸èƒ½æ˜¯ç§æœ‰çš„

    public default void defaultMethod() {
        privateMethod(); //å¯ä»¥è°ƒç”¨æ¥å£ä¸­çš„ç§æœ‰æ–¹æ³•
        privateStaticMethod(); //å¯ä»¥è°ƒç”¨æ¥å£ä¸­çš„ç§æœ‰é™æ€æ–¹æ³•
        System.out.println(&quot;æ™®é€šæ–¹æ³•è¢«è°ƒç”¨&quot;);
    }

    public static void staticMethod() {
        privateStaticMethod(); //publicé™æ€æ–¹æ³•å¯ä»¥è°ƒç”¨privateé™æ€æ–¹æ³•
        System.out.println(&quot;é™æ€æ–¹æ³•è¢«è°ƒç”¨&quot;);
    }

    private void privateMethod() {
        System.out.println(&quot;privateç§æœ‰æ–¹æ³•è¢«è°ƒç”¨&quot;);
    }

    private static void privateStaticMethod() {
        System.out.println(&quot;privateç§æœ‰é™æ€æ–¹æ³•è¢«è°ƒç”¨&quot;);
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æŒ‰ç…§ä¸Šé¢å››ä¸ªè§„åˆ™ï¼Œä¸Šé¢çš„ä»£ç å®šä¹‰éƒ½æ˜¯æ­£ç¡®çš„&lt;/p&gt;
&lt;h2 id=&quot;äºŒã€ä¸€ä¸ªä¾‹å­ï¼šåˆ†åˆ«è®¡ç®—å¥‡æ•°ä¸å¶æ•°çš„å’Œ&quot;&gt;äºŒã€ä¸€ä¸ªä¾‹å­ï¼šåˆ†åˆ«è®¡ç®—å¥‡æ•°ä¸å¶æ•°çš„å’Œ&lt;/h2&gt;
&lt;p&gt;æ¥å£å®šä¹‰å¦‚ä¸‹ï¼Œä¸‹æ–‡ä¸­addæ–¹æ³•é‡‡ç”¨äº†java8 çš„Streamæµæ“ä½œï¼Œåˆ†åˆ«ä½¿ç”¨lambdaè¡¨è¾¾å¼ä½œä¸ºè¿‡æ»¤æ¡ä»¶ï¼Œå¹¶æ±‚å’Œã€‚æ ¸å¿ƒæ˜¯ï¼šaddEvenNumberså¶æ•°æ±‚å’Œå‡½æ•°å’ŒaddOddNumberså¥‡æ•°æ±‚å’Œå‡½æ•°ï¼Œéƒ½è°ƒç”¨äº†addæ¥å£ç§æœ‰æ–¹æ³•ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;public interface CustomCalculator 
{
    default int addEvenNumbers(int... nums) { //éæŠ½è±¡ï¼Œjava8 å¼€å§‹å¯ä»¥å®šä¹‰defaultæ–¹æ³•
        return add(n -&amp;gt; n % 2 == 0, nums);   //è¿‡æ»¤å¶æ•°å¹¶æ±‚å’Œï¼Œè°ƒç”¨privateç§æœ‰æ–¹æ³•
    }
 
    default int addOddNumbers(int... nums) { //éæŠ½è±¡ï¼Œjava8 å¼€å§‹å¯ä»¥å®šä¹‰defaultæ–¹æ³•
        return add(n -&amp;gt; n % 2 != 0, nums);  //è¿‡æ»¤å¥‡æ•°å¹¶æ±‚å’Œï¼Œè°ƒç”¨privateç§æœ‰æ–¹æ³•
    }
 
    //æŒ‰ç…§è¿‡æ»¤æ¡ä»¶è¿‡æ»¤å¥‡æ•°æˆ–å¶æ•°å¹¶sumæ±‚å’Œï¼šjava9å¼€å§‹å¯ä»¥å®šä¹‰privateç§æœ‰æ–¹æ³•
    private int add(IntPredicate predicate, int... nums) { 
        return IntStream.of(nums)   //java8 Streamæµ
                .filter(predicate)   //java8 predicateåŠè¿‡æ»¤å™¨
                .sum();  //sumæ±‚å’Œ
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ¥å£å®ç°ç±»MainCalculator å®ç°CustomCalculatoræ¥å£&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;public class MainCalculator implements CustomCalculator {
 
    public static void main(String[] args) {
        CustomCalculator demo = new MainCalculator ();
         
        int sumOfEvens = demo.addEvenNumbers(1,2,3,4,5,6,7,8,9);
        System.out.println(sumOfEvens);   //è¿‡æ»¤æ‰€æœ‰å¶æ•°å¹¶æ±‚å’Œï¼Œç»“æœæ˜¯20
         
        int sumOfOdds = demo.addOddNumbers(1,2,3,4,5,6,7,8,9);
        System.out.println(sumOfOdds);   //è¿‡æ»¤æ‰€æœ‰å¥‡æ•°å¹¶æ±‚å’Œï¼Œç»“æœæ˜¯25
    } 
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;æ¬¢è¿å…³æ³¨æˆ‘çš„åšå®¢ï¼Œé‡Œé¢æœ‰å¾ˆå¤šç²¾å“åˆé›†&quot;&gt;æ¬¢è¿å…³æ³¨æˆ‘çš„åšå®¢ï¼Œé‡Œé¢æœ‰å¾ˆå¤šç²¾å“åˆé›†&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;æœ¬æ–‡è½¬è½½æ³¨æ˜å‡ºå¤„ï¼ˆå¿…é¡»å¸¦è¿æ¥ï¼Œä¸èƒ½åªè½¬æ–‡å­—ï¼‰ï¼š&lt;a href=&quot;http://www.zimug.com&quot;&gt;å­—æ¯å“¥åšå®¢&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;è§‰å¾—å¯¹æ‚¨æœ‰å¸®åŠ©çš„è¯ï¼Œå¸®æˆ‘ç‚¹èµã€åˆ†äº«ï¼æ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸ç«­çš„åˆ›ä½œåŠ¨åŠ›ï¼&lt;/strong&gt; ã€‚å¦å¤–ï¼Œç¬”è€…æœ€è¿‘ä¸€æ®µæ—¶é—´è¾“å‡ºäº†å¦‚ä¸‹çš„ç²¾å“å†…å®¹ï¼ŒæœŸå¾…æ‚¨çš„å…³æ³¨ã€‚&lt;/p&gt;
</description>
<pubDate>Mon, 12 Oct 2020 23:39:00 +0000</pubDate>
<dc:creator>å­—æ¯å“¥åšå®¢</dc:creator>
<og:description>åœ¨ä¼ ç»Ÿçš„Javaç¼–ç¨‹ä¸­ï¼Œè¢«å¹¿ä¸ºäººçŸ¥çš„ä¸€ä¸ªçŸ¥è¯†ç‚¹æ˜¯ï¼šjava Interfaceæ¥å£ä¸­ä¸èƒ½å®šä¹‰privateç§æœ‰æ–¹æ³•ã€‚åªå…è®¸æˆ‘ä»¬å®šä¹‰publicè®¿é—®æƒé™çš„æ–¹æ³•ã€æŠ½è±¡æ–¹æ³•æˆ–é™æ€æ–¹æ³•ã€‚ä½†æ˜¯ä»Java 9 å¼€</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/zimug/p/13806592.html</dc:identifier>
</item>
<item>
<title>ä½ ä¸çŸ¥é“çš„é—­åŒ…åŸç†ã€ä¸‰ä¸ªæ —å­å½»åº•ç†è§£ã€‘ - bigname22</title>
<link>http://www.cnblogs.com/bigname/p/13806545.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/bigname/p/13806545.html</guid>
<description>&lt;center&gt;&lt;span&gt;ä½ ä¸çŸ¥é“çš„é—­åŒ…åŸç†&lt;/span&gt;&lt;/center&gt;&lt;blockquote readability=&quot;4.704&quot;&gt;
&lt;p&gt;&lt;span&gt;æƒ³è¦ç†è§£é—­åŒ…ä¹‹å‰ï¼Œå°±å¿…é¡»ç†è§£å‡½æ•°çš„åˆ›å»ºè¿‡ç¨‹ã€æ´»åŠ¨å˜é‡AOã€ä½œç”¨åŸŸé“¾ã€‚&lt;/span&gt;&lt;a href=&quot;https://blog.csdn.net/bigname22/article/details/107465318&quot;&gt;æˆ‘æ›¾å†™è¿‡ç›¸å…³çš„æ–‡ç« &lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;ç½‘ä¸Šç›¸å…³å¯¹é—­åŒ…çš„å®šä¹‰ï¼š&quot;&gt;ç½‘ä¸Šç›¸å…³å¯¹é—­åŒ…çš„å®šä¹‰ï¼š&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;&lt;strong&gt;MDN&lt;/strong&gt;&lt;/span&gt;ï¼šå‡½æ•°å’Œå¯¹å…¶å‘¨å›´çŠ¶æ€ï¼ˆlexical environmentï¼Œè¯æ³•ç¯å¢ƒï¼‰çš„å¼•ç”¨æ†ç»‘åœ¨ä¸€èµ·æ„æˆé—­åŒ…ï¼ˆclosureï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé—­åŒ…å¯ä»¥è®©ä½ ä»å†…éƒ¨å‡½æ•°è®¿é—®å¤–éƒ¨å‡½æ•°ä½œç”¨åŸŸã€‚åœ¨ JavaScript ä¸­ï¼Œæ¯å½“å‡½æ•°è¢«åˆ›å»ºï¼Œå°±ä¼šåœ¨å‡½æ•°ç”Ÿæˆæ—¶ç”Ÿæˆé—­åŒ…ã€‚&lt;/li&gt;
&lt;li&gt;&lt;span&gt;&lt;strong&gt;ä½ ä¸çŸ¥é“çš„JavaScript&lt;/strong&gt;&lt;/span&gt;ï¼šæ˜¯æŒ‡æœ‰æƒè®¿é—®å¦å¤–ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡çš„å‡½æ•°ã€‚åˆ›å»ºé—­åŒ…çš„å¸¸è§æ–¹å¼å°±æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨åˆ›å»ºå¦å¤–ä¸€ä¸ªå‡½æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;span&gt;&lt;strong&gt;Javascriptæ ¸å¿ƒæŠ€æœ¯å¼€å‘è§£å¯†&lt;/strong&gt;&lt;/span&gt;ï¼šé—­åŒ…æ˜¯ä¸€ç§ç‰¹æ®Šå¯¹è±¡ï¼Œç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šæ‰§è¡Œä¸Šä¸‹æ–‡A + è¯¥æ‰§è¡Œä¸Šä¸‹æ–‡åˆ›å»ºçš„å‡½æ•°B&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;æˆ‘å¯¹è¿™äº›å®šä¹‰çš„ç†è§£ï¼š&quot;&gt;æˆ‘å¯¹è¿™äº›å®šä¹‰çš„ç†è§£ï¼š&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;ã€ŠMDNã€‹çš„è§£é‡Šæ›´åŠ æ¥è¿‘åŸç†ï¼Œ&lt;/li&gt;
&lt;li&gt;ã€Šä½ ä¸çŸ¥é“çš„Javascriptã€‹çš„è§£é‡Šæ›´å¤šè®²çš„æ˜¯ç°è±¡ï¼Œ&lt;/li&gt;
&lt;li&gt;ã€ŠJavascriptæ ¸å¿ƒæŠ€æœ¯å¼€å‘è§£å¯†ã€‹çš„è§£é‡Šæ›´èƒ½è¯´æ˜é—­åŒ…çš„çœŸå®å­˜åœ¨ï¼šé—­åŒ…æ˜¯ä¸€ç§ç‰¹æ®Šå¯¹è±¡ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;---------------------------------äººå·¥åˆ†å‰²çº¿------------------------------&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;ä¸‹é¢æˆ‘ä»¬é€šè¿‡å‡ ä¸ªæ —å­æ¥ä¸€æ­¥æ­¥è®²è§£é—­åŒ…çš„åŸç†ï¼š&quot;&gt;&lt;span&gt;ä¸‹é¢æˆ‘ä»¬é€šè¿‡å‡ ä¸ªæ —å­æ¥ä¸€æ­¥æ­¥è®²è§£é—­åŒ…çš„åŸç†ï¼š&lt;/span&gt;&lt;/h2&gt;
&lt;h3 id=&quot;æ —å­ä¸€ï¼š&quot;&gt;&lt;span&gt;æ —å­ä¸€ï¼š&lt;/span&gt;&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;    function makeFunc() {
        var name = &quot;Mozilla&quot;;
        function displayName() {
            console.log(name);
        }
        return displayName;
    }

    var myFunc = makeFunc();
    myFunc();
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ‰“å°ç»“æœï¼šMozilla&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;&lt;strong&gt;æ··æ·†ç‚¹1&lt;/strong&gt;å½“æ‰§è¡Œåˆ°var myFunc = makeFunc();makeFuncå‡½æ•°åœ¨æ‰§è¡Œå®Œä¹‹åé‡Œé¢çš„nameä¸æ˜¯åº”è¯¥è¢«åƒåœ¾å›æ”¶æœºåˆ¶ç»™å¤„ç†æ‰äº†å—ï¼Ÿ&lt;/span&gt;&lt;br/&gt;&lt;strong&gt;ç­”æ¡ˆ&lt;/strong&gt;ï¼šå…¶å®é€šè¿‡åƒåœ¾å›æ”¶æœºåˆ¶å¤§æ¦‚ä¹ŸçŸ¥é“nameå±æ€§ä¸å¯èƒ½è¢«å›æ”¶ï¼Œå› ä¸ºè¿˜æœ‰myFuncå‡½æ•°æŒæœ‰nameçš„å¼•ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;span&gt;&lt;strong&gt;æ··æ·†ç‚¹2&lt;/strong&gt;ï¼šä¸æ™®é€šå‡½æ•°æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ&lt;/span&gt;&lt;br/&gt;&lt;strong&gt;ç­”æ¡ˆ&lt;/strong&gt;ï¼šå¦‚æœæ²¡äº§ç”Ÿé—­åŒ…ï¼Œé‚£ä¹ˆå‡½æ•°ä¸­çš„ä¸´æ—¶å˜é‡éƒ½è¢«å›æ”¶äº†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;span&gt;&lt;strong&gt;æ··æ·†ç‚¹3&lt;/strong&gt;ï¼šnameå±æ€§å¦‚æœä¸å›æ”¶ï¼Œé‚£ä¹ˆå­˜æ”¾åœ¨å“ªé‡Œï¼Ÿ&lt;/span&gt;&lt;br/&gt;&lt;strong&gt;ç­”æ¡ˆ&lt;/strong&gt;ï¼šè¿™ä¸ªé—®é¢˜åé¢ä¼šè®²åˆ°&lt;br/&gt;ã€myFuncåœ¨googleæµè§ˆå™¨çš„å†…éƒ¨å±æ€§ï¼Œç”Ÿæˆäº†ä¸€ä¸ªé—­åŒ…å¯¹è±¡makeFuncã€‘&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201013015004687.png#pic_center&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;å…ˆæ¥æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼šæˆ‘ä»¬çŸ¥é“å½“æ‰§è¡Œäº†makeFuncå‡½æ•°åä¼šäº§ç”Ÿå¯¹åº”çš„å˜é‡å¯¹è±¡{å˜é‡å¯¹è±¡ä¿å­˜äº†å‡½æ•°ä¸­çš„ä¸´æ—¶å˜é‡}ï¼Œé‚£ä¹ˆä¸Šå›¾ä¸­çš„é—­åŒ…å¯¹è±¡makeFuncæ˜¯å¦å°±ç­‰äºmakeFuncå‡½æ•°æ‰€äº§ç”Ÿçš„å˜é‡å¯¹è±¡ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¸¦ç€è¿™ä¸ªé—®é¢˜çœ‹ä¸‹ä¸€ä¸ªæ —å­--&lt;/p&gt;
&lt;h3 id=&quot;æ —å­äºŒï¼š&quot;&gt;&lt;span&gt;æ —å­äºŒï¼š&lt;/span&gt;&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;    function makeFunc() {
        var name = &quot;Mozilla&quot;;
        var age = 12;
        function displayName() {
            console.log(name);
        }
        return displayName;
    }

    var myFunc = makeFunc();
    myFunc();
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;æ€è€ƒï¼š&lt;/strong&gt; æ­¤æ—¶çš„é—­åŒ…å¯¹è±¡makeFuncæ˜¯å¦å¸¦æœ‰ageå±æ€§ï¼Ÿ&lt;br/&gt;&lt;strong&gt;ç­”æ¡ˆ&lt;/strong&gt;ï¼šæ²¡æœ‰ageå±æ€§&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201013022251806.png#pic_center&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;&lt;strong&gt;è¯´æ˜&lt;/strong&gt;ï¼šé—­åŒ…å¯¹è±¡ä¸ç­‰äºmakeFuncçš„å˜é‡å¯¹è±¡ã€‚é—­åŒ…å¯¹è±¡ä»…ä¿å­˜è·¨åŸŸçš„å±æ€§ã€‚&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å»¶ç”³åˆ°å¦ä¸€ä¸ªå¸¸è§é—®é¢˜ï¼šå¦‚ä½•æ¸…é™¤é—­åŒ…ï¼Ÿ&lt;/span&gt;&lt;br/&gt;æˆ‘ä»¬çŸ¥é“é—­åŒ…å¯¹è±¡å­˜åœ¨äºmyFuncå‡½æ•°å†…ï¼Œæ‰€ä»¥ä¸€å¥ï¼šmyFunc = nullã€‚ä½¿å¾—é—­åŒ…å¯¹è±¡æ²¡æœ‰å¼•ç”¨æŒæœ‰é‚£ä¹ˆç­‰å¾…ä»–çš„å°±æ˜¯åƒåœ¾å›æ”¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å†å»¶ç”³åˆ°å¦ä¸€ä¸ªå¸¸è§é—®é¢˜ï¼šMDNï¼šåœ¨ JavaScript ä¸­ï¼Œæ¯å½“å‡½æ•°è¢«åˆ›å»ºï¼Œå°±ä¼šåœ¨å‡½æ•°ç”Ÿæˆæ—¶ç”Ÿæˆé—­åŒ…ã€‚é‚£ä¹ˆå²‚ä¸æ˜¯å†…å­˜å¾ˆå¿«å°±æ³„éœ²äº†ï¼Ÿ&lt;/span&gt;&lt;br/&gt;å®é™…ä¸Šä½ çš„é—­åŒ…å¤§å¤šæ•°éƒ½æ˜¯æ²¡æœ‰å¼•ç”¨æŒæœ‰ï¼Œå¾ˆå¿«å°±ä¼šè¢«å›æ”¶æ‰çš„ã€‚å¹¶ä¸”JSå¯¹é—­åŒ…ä¹Ÿæœ‰ç›¸å…³çš„ä¼˜åŒ–å¤„ç†ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;ç„¶è€Œï¼šè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯å¦æ˜ç™½è¿™ä¸ªé—­åŒ…å¯¹è±¡ä¸ä½œç”¨åŸŸé“¾çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;æ —å­ä¸‰ï¼š&quot;&gt;&lt;span&gt;æ —å­ä¸‰ï¼š&lt;/span&gt;&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt; var a = 20;
    function test () {
        var b = a + 10;
        function innerTest () {
                debugger
            var c = 10;
            return b + c;
        }
        innerTest();
    }
    test();
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ï¼Ÿï¼Ÿï¼Ÿ å½“æ‰§è¡Œåˆ°debuggeræ—¶ï¼Œæ­¤æ—¶innerTestå‡½æ•°çš„ä½œç”¨é“¾æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿé—­åŒ…å¯¹è±¡æ˜¯å¦äº§ç”Ÿï¼Ÿ&lt;br/&gt;ï¼šï¼šï¼šæ­¤æ—¶innerTestå‡½æ•°çš„ä½œç”¨é“¾ï¼š&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201013030431231.png#pic_center&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;é—­åŒ…å¯¹è±¡å·²ç»äº§ç”Ÿï¼Œå¹¶ä¸”é—­åŒ…å¯¹è±¡ä½œä¸ºä½œç”¨åŸŸé“¾ä¸­çš„å¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ä½ æ˜¯å¦è®°å¾—å¾ˆå¤šä¹¦ä¸Šéƒ½è¯´ä½œç”¨åŸŸé“¾æ˜¯ä¸€æ¡åˆæ¯ä¸ªå‡½æ•°çš„VOå¯¹è±¡ç»„æˆçš„é“¾æ¡ã€‚ä½†è¿™é‡Œçœ‹åˆ°çš„å´ä¸æ˜¯VOå¯¹è±¡ï¼Œè€Œæ˜¯é—­åŒ…å¯¹è±¡ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;æˆ‘çš„çœ‹æ³•æ˜¯ï¼šå¦‚æœå•çº¯ä»å‡½æ•°çš„ä½œç”¨åŸŸæ¥çœ‹ï¼šä½œç”¨åŸŸé“¾æ˜¯ä¸€æ¡åˆæ¯ä¸ªå‡½æ•°çš„VOå¯¹è±¡ç»„æˆçš„é“¾æ¡ã€‚è¿™ä¸ªè¯´æ³•å¾ˆæ­£ç¡®ï¼Œè¿™æ˜¯çœŸæ­£èƒ½å¤Ÿä»¥æ­¤å¸®åŠ©æˆ‘ä»¬åˆ¤æ–­è®¿é—®ä½œç”¨åŸŸè¾¹ç•Œçš„ä¾æ®ã€‚ä½†æ˜¯åœ¨ç¨‹åºå®é™…çš„è¿è¡Œä¸­ï¼Œç»è¿‡è¯æ³•ç¼–è¯‘çš„é˜¶æ®µï¼ŒJSå¼•æ“å·²ç»é€šè¿‡ä»£ç æŠŠå„ä¸ªå®é™…ä¸Šé—­åŒ…äº§ç”Ÿçš„å˜é‡å·²ç»æç‚¼å‡ºæ¥ã€‚è€Œä¸æ˜¯ç›´æ¥å°±æŠŠVOå¯¹è±¡æ”¾åœ¨ä½œç”¨åŸŸé“¾ã€‚è¿™ä¹Ÿæœ‰åˆ©äºæé«˜è®¿é—®é€Ÿåº¦ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&quot;æ€»ç»“&quot;&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;æ€»ç»“:&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/h3&gt;
&lt;pre&gt;
&lt;span&gt;&lt;span&gt;&lt;code class=&quot;language-javascript&quot;&gt;    function makeFunc() {
        var name = &quot;Mozilla&quot;;
        function displayName() {
            console.log(name);
        }
        return displayName;
    }

    var myFunc = makeFunc();
    myFunc();
&lt;/code&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;æ‰§è¡Œè¿‡ç¨‹æœ‰å…³é—­åŒ…çš„å˜åŒ–ï¼š&lt;/strong&gt; å½“è°ƒç”¨makeFunc()å‡½æ•°è¿›å…¥å‡½æ•°åˆ›å»ºé˜¶æ®µæ—¶å‘ç°displayNameå‡½æ•°å«æœ‰nameçš„è·¨å‡½æ•°å˜é‡ï¼Œæ‰€ä»¥åœ¨å¯¹displayNameå‡½æ•°è¿›è¡Œæå‡çš„æ—¶å€™å°±å·²ç»ç»™displayNameå‡½æ•°åˆå§‹åŒ–äº†é—­åŒ…å¯¹è±¡ã€makeFuncé—­åŒ…ã€‘ã€‚æ‰€ä»¥å½“æ‰§è¡ŒmyFunc()å‡½æ•°çš„æ—¶å€™ï¼Œä»å½“å‰myFunc()çš„VOå¯¹è±¡æ‰¾ä¸åˆ°çš„è¯å°±ä¼šä»ä½œç”¨åŸŸé“¾ä¸­çš„ä¸Šä¸€çº§ã€makeFuncé—­åŒ…ã€‘å¯¹è±¡ä¸­æ‰¾ã€‚&lt;br/&gt;æ¥ä¸ªå›¾æ¸…æ™°ä¸€ç‚¹ï¼š&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201013033708856.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2JpZ25hbWUyMg==,size_16,color_FFFFFF,t_70#pic_center&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;&lt;em&gt;--- ä»¥ä¸Šä¾¿æ˜¯å¯¹é—­åŒ…æœ€æ–°çš„ç†è§£ã€‚ä¸å¯¹çš„æœ›å¤šå¤šæŒ‡å‡ºã€‚&lt;/em&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
</description>
<pubDate>Mon, 12 Oct 2020 20:02:00 +0000</pubDate>
<dc:creator>bigname22</dc:creator>
<og:description>ä½ ä¸çŸ¥é“çš„é—­åŒ…åŸç† æƒ³è¦ç†è§£é—­åŒ…ä¹‹å‰ï¼Œå°±å¿…é¡»ç†è§£å‡½æ•°çš„åˆ›å»ºè¿‡ç¨‹ã€æ´»åŠ¨å˜é‡AOã€ä½œç”¨åŸŸé“¾ã€‚æˆ‘æ›¾å†™è¿‡ç›¸å…³çš„æ–‡ç«  ç½‘ä¸Šç›¸å…³å¯¹é—­åŒ…çš„å®šä¹‰ï¼š MDNï¼šå‡½æ•°å’Œå¯¹å…¶å‘¨å›´çŠ¶æ€ï¼ˆlexical environmentï¼Œ</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/bigname/p/13806545.html</dc:identifier>
</item>
<item>
<title>Pythonåº“ä¹‹SQLAlchemy - å†·å†°è‹¥æ°´</title>
<link>http://www.cnblogs.com/lit10050528/p/13806516.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/lit10050528/p/13806516.html</guid>
<description>&lt;h2 id=&quot;11ã€sqlalchemyæ˜¯ä»€ä¹ˆï¼Ÿ&quot;&gt;1.1ã€SQLAlchemyæ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h2&gt;
&lt;p&gt;sqlalchemyæ˜¯ä¸€ä¸ªpythonè¯­è¨€å®ç°çš„çš„é’ˆå¯¹å…³ç³»å‹æ•°æ®åº“çš„ormåº“ã€‚å¯ç”¨äºè¿æ¥å¤§å¤šæ•°å¸¸è§çš„æ•°æ®åº“ï¼Œæ¯”å¦‚Postgesã€MySQLã€SQLiteã€Oracleç­‰ã€‚&lt;/p&gt;
&lt;h2 id=&quot;12ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨sqlalchemyï¼Ÿ&quot;&gt;1.2ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨SQLAlchemyï¼Ÿ&lt;/h2&gt;
&lt;p&gt;å®ƒå°†ä½ çš„ä»£ç ä»åº•å±‚æ•°æ®åº“åŠå…¶ç›¸å…³çš„SQLç‰¹æ€§ä¸­æŠ½è±¡å‡ºæ¥ã€‚&lt;/p&gt;
&lt;h2 id=&quot;13ã€sqlalchemyæä¾›äº†ä¸¤ç§ä¸»è¦çš„ä½¿ç”¨æ¨¡å¼&quot;&gt;1.3ã€SQLAlchemyæä¾›äº†ä¸¤ç§ä¸»è¦çš„ä½¿ç”¨æ¨¡å¼&lt;/h2&gt;
&lt;ol&gt;&lt;li&gt;SQLè¡¨è¾¾å¼è¯­è¨€ï¼ˆSQLAlchemy Coreï¼‰&lt;/li&gt;
&lt;li&gt;ORM&lt;/li&gt;
&lt;/ol&gt;&lt;h2 id=&quot;14ã€åº”è¯¥é€‰æ‹©å“ªç§æ¨¡å¼ï¼Ÿ&quot;&gt;1.4ã€åº”è¯¥é€‰æ‹©å“ªç§æ¨¡å¼ï¼Ÿ&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;è™½ç„¶ä½ ä½¿ç”¨çš„æ¡†æ¶ä¸­å·²ç»å†…ç½®äº†ORMï¼Œä½†æ˜¯å¸Œæœ›æ·»åŠ æ›´å¼ºå¤§çš„æŠ¥è¡¨åŠŸèƒ½ï¼Œè¯·é€‰ç”¨Coreã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä½ æƒ³åœ¨ä¸€ä¸ªä¸€æ¨¡å¼ä¸ºä¸­å¿ƒçš„è§†å›¾ä¸­æŸ¥çœ‹æ•°æ®ï¼ˆç”¨æˆ·ç±»ä¼¼äºSQLï¼‰ï¼Œè¯·ä½¿ç”¨Coreã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä½ çš„æ•°æ®ä¸éœ€è¦ä¸šåŠ¡å¯¹è±¡ï¼Œè¯·ä½¿ç”¨Coreã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä½ è¦æŠŠæ•°æ®çœ‹ä½œä¸šåŠ¡å¯¹è±¡ï¼Œè¯·ä½¿ç”¨ORMã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä½ æƒ³å¿«é€Ÿåˆ›å»ºåŸå‹ï¼Œè¯·ä½¿ç”¨ORMã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä½ éœ€è¦åŒäº‹ä½¿ç”¨ä¸šåŠ¡å¯¹è±¡å’Œå…¶ä»–ä¸é—®é¢˜åŸŸæ— å…³çš„æ•°æ®ï¼Œè¯·ç»„åˆä½¿ç”¨Coreå’ŒORMã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;15ã€è¿æ¥æ•°æ®åº“&quot;&gt;1.5ã€è¿æ¥æ•°æ®åº“&lt;/h2&gt;
&lt;p&gt;è¦è¿æ¥åˆ°æ•°æ®åº“ï¼Œéœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªSQLAlchemyå¼•æ“ã€‚SQLAlchemyå¼•æ“ä¸ºæ•°æ®åº“åˆ›å»ºä¸€ä¸ªå…¬å…±æ¥å£æ¥æ‰§è¡ŒSQLè¯­å¥ã€‚è¿™æ˜¯é€šè¿‡åŒ…è£…æ•°æ®åº“è¿æ¥æ± å’Œæ–¹è¨€ï¼ˆä¸åŒæ•°æ®åº“å®¢æˆ·ç«¯ï¼‰æ¥å®ç°çš„ã€‚&lt;/p&gt;
&lt;p&gt;SQLAlchemyæä¾›äº†ä¸€ä¸ªå‡½æ•°æ¥åˆ›å»ºå¼•æ“ã€‚åœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œä½ å¯ä»¥æŒ‡å®šè¿æ¥å­—ç¬¦ä¸²ï¼Œä»¥åŠå…¶ä»–ä¸€äº›å¯é€‰çš„å…³é”®å­—å‚æ•°ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;from sqlalchemy import create_engine
engine = create_engine('sqlite:///cookies.db')
engine1 = create_engine('sqlite:///:memory:')
engine2 = create_engine('sqlite://///home/cookiemonster/cookies.db')
engine3 = create_engine('sqlite:///c:\\Users\\cookiemonster\\cookies.db')

engine_mysql = create_engine('mysql+pymysql://cookiemonster:chocolatechip', '@mysql01.monster.internal/cookies', pool_recycle=3600)
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;16ã€æ¨¡å¼å’Œç±»å‹&quot;&gt;1.6ã€æ¨¡å¼å’Œç±»å‹&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†è®¿é—®åº•å±‚æ•°æ®åº“ï¼ŒSQLAlchemyéœ€è¦ç”¨æŸç§ä¸œè¥¿æ¥ä»£è¡¨æ•°æ®åº“ä¸­çš„è¡¨ã€‚ä¸ºæ­¤ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢ä¸‰ç§æ–¹æ³•æ€»çš„ä¸€ç§ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä½¿ç”¨ç”¨æˆ·å®šä¹‰çš„Tableå¯¹è±¡&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ä»£è¡¨æ•°æ®è¡¨çš„å£°æ˜å¼ç±»&lt;/li&gt;
&lt;li&gt;ä»æ•°æ®åº“ä¸­æ¨æ–­&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;SQLAlchemy coreå®šä¹‰è¡¨ç»“æ„ä½¿ç”¨çš„æ˜¯1.5ä¸­è¯´çš„ç¬¬1ç§æ–¹å¼ã€‚tableå¯¹è±¡åŒ…å«ä¸€ç³»åˆ—å¸¦æœ‰ç±»å‹çš„åˆ—å’Œå±æ€§ï¼Œå®ƒä»¬ä¸ä¸€ä¸ªå¸¸è§çš„å…ƒæ•°æ®å®¹å™¨ç›¸å…³è”ã€‚&lt;/p&gt;
&lt;p&gt;å…ƒæ•°æ®å¯ä»¥çœ‹ä½œæ˜¯ä¸€ç§Tableå¯¹è±¡ç›®å½•ã€‚è¿™äº›è¡¨å¯ä»¥é€šè¿‡MetaData.tablesæ¥è®¿é—®ã€‚&lt;/p&gt;
&lt;h2 id=&quot;21ã€å®šä¹‰è¡¨ç»“æ„&quot;&gt;2.1ã€å®šä¹‰è¡¨ç»“æ„&lt;/h2&gt;
&lt;p&gt;åœ¨SQLAlchemy Coreä¸­ï¼Œæˆ‘ä»¬é€šè¿‡Tableæ„é€ å‡½æ•°æ¥åˆå§‹åŒ–Tableå¯¹è±¡ã€‚æˆ‘ä»¬è¦åœ¨æ„é€ å‡½æ•°ä¸­æä¾›MetaDataå¯¹è±¡ï¼ˆå…ƒæ•°æ®ï¼‰å’Œè¡¨åï¼Œä»»ä½•å…¶ä»–å‚æ•°éƒ½è¢«è®¤ä¸ºæ˜¯åˆ—å¯¹è±¡ã€‚åˆ—æ˜¯é€šè¿‡Column()å‡½æ•°åˆ›å»ºçš„ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;from sqlalchemy import create_engine
from sqlalchemy import Column
from sqlalchemy import Integer
from sqlalchemy import String
from sqlalchemy import MedaData

metadata = MetaData()
user = table('user', metadata, 
                         Column(id, Integer(), primary_key=True), 
                         Column(name, String(255)), 
)

engine = create_engine('sqlite:///:memory:')
metadata.create_all(engine) # è¡¨çš„æŒä¹…åŒ–
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;22ã€æ’å…¥æ•°æ®&quot;&gt;2.2ã€æ’å…¥æ•°æ®&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆåˆ›é€ ä¸€æ¡insertè¯­å¥ï¼Œç”¨æ¥æŠŠå°æ˜æ”¾å…¥userè¡¨ä¸­ã€‚ä¸ºæ­¤ï¼Œå…ˆè°ƒç”¨userè¡¨çš„insert()æ–¹æ³•ï¼Œç„¶åå†ä½¿ç”¨values()è¯­å¥ï¼Œå…³é”®å­—å‚æ•°ä¸ºå„ä¸ªåˆ—åŠç›¸åº”å€¼ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;ins = user.insert().values(
        id=1, 
  name='å°æ˜'
)
print(str(ins))
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åˆ°æ­¤ä»…ä»…åªæ˜¯åˆ›å»ºäº†ä¸€ä¸ªinsetè¯­å¥ï¼Œè¿˜æ²¡æœ‰çœŸæ­£æ‰§è¡Œå‘¢ï¼Œæ¥ä¸‹æ¥æ‰§è¡Œæ’å…¥æ“ä½œï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;connection = engine.connect()
result = connection.execute(ins)
print(result.inserted_primary_key)
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;23ã€æŸ¥è¯¢æ•°æ®&quot;&gt;2.3ã€æŸ¥è¯¢æ•°æ®&lt;/h2&gt;
&lt;p&gt;æ„å»ºæŸ¥è¯¢æ—¶ï¼Œè¦ç”¨åˆ°selectå‡½æ•°ï¼Œå®ƒç±»ä¼¼äºæ ‡å‡†SQL SELECTè¯­å¥ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;from sqlalchemy.sql import select
s = select([user])
# å¯ä»¥ä½¿ç”¨str(s)æŸ¥çœ‹æ•°æ®åº“çœ‹åˆ°çš„è¯­å¥
print(str(s))
rp = connection.execute(s)
results = rp.fetchall()
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;231ã€resultproxy&quot;&gt;2.3.1ã€ResultProxy&lt;/h3&gt;
&lt;p&gt;execute()å‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€çƒ­ResultProxyå¯¹è±¡ï¼Œå®ƒå…è®¸ä½¿ç”¨ç´¢å¼•ã€åç§°æˆ–Columnå¯¹è±¡è¿›è¡Œè®¿é—®ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ResultProxyå¤„ç†è¡Œ&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;first_row = results[0]
first_row[1]
first_row.name
first_row[user.c.name]
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿­ä»£ResultProxy&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;rp = connection.execute(s)
for record in rp:
        print(record.user_name)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½¿ç”¨æ–¹æ³•è®¿é—®ç»“æœ&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;rp.first() # è‹¥æœ‰è®°å½•ï¼Œåˆ™è¿”å›ç¬¬ä¸€ä¸ªè®°å½•å¹¶å…³é—­è¿æ¥
rp.fetchone() # è¿”å›ä¸€è¡Œï¼Œå¹¶ä¿æŒå…‰æ ‡ä¸ºæ‰“å¼€çŠ¶æ€ï¼Œä»¥ä¾¿ä½ åšæ›´å¤šè·å–è°ƒç”¨
rp.scalar() # å…¥è‚¡æŸ¥è¯¢ç»“æœæ˜¯åŒ…å«ä¸€ä¸ªåˆ—çš„å•æ¡è®°å½•ï¼Œåˆ™è¿”å›å•ä¸ªå€¼
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;232ã€æ§åˆ¶æŸ¥è¯¢ä¸­çš„åˆ—æ•°&quot;&gt;2.3.2ã€æ§åˆ¶æŸ¥è¯¢ä¸­çš„åˆ—æ•°&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;s = select([user.c.name])
rp = connection.execute(s)
print(rp.keys())
result = rp.first()
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;233ã€æ’åº&quot;&gt;2.3.3ã€æ’åº&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;s = select([user.c.name])
s = s.order_by(user.c.name)
rp = connection.execute(s)
for user in rp:
        print(user.name)
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;234ã€é™åˆ¶è¿”å›ç»“æœé›†çš„æ¡æ•°&quot;&gt;2.3.4ã€é™åˆ¶è¿”å›ç»“æœé›†çš„æ¡æ•°&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;s = select([user.c.name])
s = s.order_by(user.c.name)
s = s.limit(2)
rp = connection.execute(s)
for user in rp:
        print(user.name)
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;235ã€å†…ç½®sqlå‡½æ•°å’Œæ ‡ç­¾&quot;&gt;2.3.5ã€å†…ç½®SQLå‡½æ•°å’Œæ ‡ç­¾&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;from sqlalchemy.sql import func
s = select([func.sum(user.c.score)])
rp = connection.execute(s)
print(rp.scalar())
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;236ã€è¿‡æ»¤&quot;&gt;2.3.6ã€è¿‡æ»¤&lt;/h3&gt;
&lt;p&gt;å¯¹æŸ¥è¯¢è¿‡æ»¤æ˜¯é€šè¿‡æ·»åŠ where()è¯­å¥æ¥å®Œæˆçš„ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;s = select([user]).where(user.c.name == 'å°æ˜')
rp = connection.execute(s)
record = rp.first()
print(record.items())
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œåªæ˜¯ä»‹ç»äº†å¸¸ç”¨çš„æŸ¥è¯¢æ–¹æ³•ï¼Œæ›´å¤šå¤æ‚çš„æŸ¥è¯¢è¯·æŸ¥é˜…å®˜æ–¹æ–‡æ¡£ã€‚&lt;/p&gt;
&lt;h2 id=&quot;23ã€æ›´æ–°æ•°æ®&quot;&gt;2.3ã€æ›´æ–°æ•°æ®&lt;/h2&gt;
&lt;p&gt;update()æ–¹æ³•å’Œå‰é¢çš„insert()æ–¹æ³•å¾ˆç›¸ä¼¼ï¼Œå®ƒä»¬çš„è¯­æ³•å‡ ä¹å®Œå…¨ä¸€æ ·ï¼Œä½†æ˜¯update()å¯ä»¥æŒ‡å®šä¸€ä¸ªwhere()å­å¥ï¼Œç”¨æ¥æŒ‡å‡ºè¦æ›´æ–°å“ªäº›è¡Œã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;from sqlalchemy import update
u = update(user).where(user.c.name == 'å°æ˜')
u = u.values(name='å°å')
result = connection.execute(u)
print(result.rowcount)
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;24ã€åˆ é™¤æ•°æ®&quot;&gt;2.4ã€åˆ é™¤æ•°æ®&lt;/h2&gt;
&lt;p&gt;åˆ›å»ºåˆ é™¤è¯­å¥æ—¶ï¼Œæ—¢å¯ä»¥ä½¿ç”¨delete()å‡½æ•°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è¡¨çš„delete()æ–¹æ³•ã€‚ä¸insert()å’Œupdate()ä¸åŒï¼Œdelete()ä¸æ¥æ”¶å€¼å‚æ•°ï¼Œåªæ¥æ”¶ä¸€ä¸ªå¯é€‰whereå­å¥ï¼Œç”¨æ¥æŒ‡å®šåˆ é™¤èŒƒæ–‡ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;from sqlalchemy import delete
u = delete(user).where(user.c.name == 'å°å')
result = connection.execute(u)
print(result.rowcount)
&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;æ³¨æ„ï¼š&lt;/p&gt;
&lt;p&gt;æ›´å¤šçš„é«˜çº§æ“ä½œï¼šè¿æ¥ã€åˆ«åã€åˆ†ç»„ã€é“¾å¼è°ƒç”¨ã€åŸå§‹æŸ¥è¯¢ç­‰ï¼Œè¯·æŸ¥é˜…å®˜æ–¹æ–‡æ¡£ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;25ã€äº‹åŠ¡&quot;&gt;2.5ã€äº‹åŠ¡&lt;/h2&gt;
&lt;p&gt;é€šè¿‡connection.begin()å¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼Œè¿”å›ä¸€ä¸ªtransactionå¯¹è±¡ï¼Œæ¥ä¸‹æ¥æ ¹æ®æ‰§è¡Œçš„æƒ…å†µè°ƒç”¨transaction.commit()æäº¤ä¿®æ”¹æˆ–è€…è°ƒç”¨transaction.rollback()å›æ»šæ“ä½œã€‚&lt;/p&gt;

&lt;p&gt;SQLAlchemy ormå®šä¹‰è¡¨ç»“æ„ä½¿ç”¨çš„æ˜¯1.5ä¸­è¯´çš„ç¬¬2ç§æ–¹å¼ã€‚é€šè¿‡å®šä¹‰ä¸€ä¸ªç±»ï¼Œå®ƒç»§æ‰¿è‡ªä¸€ä¸ªåä¸ºdeclarative_baseçš„ç‰¹æ®ŠåŸºç±»ã€‚declarative_baseæŠŠå…ƒæ•°æ®å®¹å™¨å’Œæ˜ å°„å™¨ï¼ˆç”¨æ¥æŠŠç±»æ˜ å°„åˆ°æ•°æ®è¡¨ï¼‰ç»“åˆåœ¨ä¸€èµ·ã€‚&lt;/p&gt;
&lt;p&gt;ormä½¿ç”¨çš„ç±»åº”è¯¥æ»¡è¶³å¦‚ä¸‹å››ä¸ªè¦æ±‚ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ç»§æ‰¿è‡ªdeclarative_baseå¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;åŒ…å«&lt;code&gt;__tablename__&lt;/code&gt;ï¼Œè¿™æ˜¯æ•°æ®åº“ä¸­ä½¿ç”¨çš„è¡¨åã€‚&lt;/li&gt;
&lt;li&gt;åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§ï¼Œå®ƒä»¬éƒ½æ˜¯columnå¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;ç¡®ä¿ä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§ç»„æˆä¸»é”®ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;31ã€å®šä¹‰è¡¨ç»“æ„ï¼š&quot;&gt;3.1ã€å®šä¹‰è¡¨ç»“æ„ï¼š&lt;/h2&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;from sqlalchemy import create_engine
from sqlalchemy import Column
from sqlalchemy import Integer
from sqlalchemy import String
from sqlalchemy.ext.declarative import declarative_base

Base = declarative_base()
class User(Base):
    __tablename__ = 'user'
    
        id = Column(Integer, primary_key=True)
        name = Column(String(255))
        
engine = create_engine('sqlite:///')
Base.metadata.create_all(engine)
Session = sessionmaker(bind=engine)
session = Session()
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;32ã€ä¼šè¯ï¼ˆsession&quot;&gt;3.2ã€ä¼šè¯ï¼ˆsession)&lt;/h2&gt;
&lt;p&gt;ä¼šè¯æ˜¯SQLAlchemy ORMå’Œæ•°æ®åº“äº¤äº’çš„æ–¹å¼ã€‚å®ƒé€šè¿‡å¼•æ“åŒ…è£…æ•°æ®åº“è¿æ¥ï¼Œå¹¶ä¸ºé€šè¿‡ä¼šè¯åŠ è½½æˆ–ä¸ä¼šè¯å…³è”çš„å¯¹è±¡æä¾›æ ‡è¯†æ˜ å°„ï¼ˆidentity mapï¼‰ã€‚æ ‡è¯†æ˜ å°„æ˜¯ä¸€ç§ç±»ä¼¼äºç¼“å­˜çš„æ•°æ®ç»“æ„ï¼Œå®ƒåŒ…å«ç”±å¯¹è±¡è¡¨å’Œä¸»é”®ç¡®å®šçš„ä¸€ä¸ªå”¯ä¸€çš„å¯¹è±¡åˆ—è¡¨ã€‚ä¼šè¯è¿˜åŒ…è£…äº†ä¸€ä¸ªäº‹åŠ¡ï¼Œè¿™ä¸ªäº‹åŠ¡å°†ä¸€ç›´ä¿æŒæ‰“å¼€çŠ¶æ€ï¼Œç›´åˆ°ä¼šè¯æäº¤æˆ–å›æ»šã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºåˆ›å»ºä¼šè¯ï¼ŒSQLAlchemyæä¾›äº†ä¸€ä¸ªsessionmakerç±»ï¼Œè¿™ä¸ªç±»å¯ä»¥ç¡®ä¿åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­èƒ½å¤Ÿä½¿ç”¨ç›¸åŒçš„å‚æ•°åˆ›å»ºä¼šè¯ã€‚sessionmakerç±»é€šè¿‡åˆ›å»ºä¸€ä¸ªSessionç±»æ¥å®ç°è¿™ä¸€ç‚¹ï¼ŒSessionç±»æ˜¯æ ¹æ®ä¼ é€’ç»™sessionmakerå·¥å‚çš„å‚æ•°é…ç½®çš„ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;from sqlalchemy import create_engine
from sqlalchemy.orm import sessionmaker

engine = create_engine('sqlite:///:memory:')
Session = sessionmaker(bind=engine)
session = Session()
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;32ã€æ’å…¥&quot;&gt;3.2ã€æ’å…¥&lt;/h2&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;user = User(1, 'å°æ˜')
session.add(user)
session.commit()
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;33ã€æŸ¥è¯¢&quot;&gt;3.3ã€æŸ¥è¯¢&lt;/h2&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;for row in session.query(User):
        print(row.id, row.name)
&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote readability=&quot;4.5806451612903&quot;&gt;
&lt;p&gt;æ³¨æ„ï¼šsession.query()çš„è¿”å›å€¼æ˜¯Queryå¯¹è±¡ï¼Œä¸èƒ½ä½¿ç”¨å®ƒçš„è¿”å›å€¼ä½œä¸ºæŸ¥è¯¢ç»“æœã€‚å…³äºQueryå¯¹è±¡çš„ç”¨æ³•ï¼Œè¯·å‚é˜…ï¼š&lt;a href=&quot;https://docs.sqlalchemy.org/en/13/orm/query.html#sqlalchemy.orm.query.Query&quot;&gt;https://docs.sqlalchemy.org/en/13/orm/query.html#sqlalchemy.orm.query.Query&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¸¸ç”¨Queryå¯¹è±¡çš„æ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;q = session.query(User)
q.count() # è·å–æŸ¥è¯¢ç»“æœçš„æ•°é‡
q.all() # è¿”å›æŸ¥è¯¢ç»“æœçš„listï¼Œä¼šè§¦å‘æ‰§è¡ŒSQLæŸ¥è¯¢
q.get(id) # æ ¹æ®primary_keyæŸ¥è¯¢å•ä¸ªå¯¹è±¡
q.as_scalar() # è¿”å›æ­¤æ¬¡æŸ¥è¯¢çš„SQLè¯­å¥
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;331ã€æ§åˆ¶æŸ¥è¯¢ä¸­çš„åˆ—æ•°&quot;&gt;3.3.1ã€æ§åˆ¶æŸ¥è¯¢ä¸­çš„åˆ—æ•°&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;print(session.query(user.name).first())
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;332ã€æ’åº&quot;&gt;3.3.2ã€æ’åº&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;for record in sesssion.query(user).order_by(user.name):
        print(user.name)
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;333ã€é™åˆ¶è¿”å›ç»“æœé›†çš„æ¡æ•°&quot;&gt;3.3.3ã€é™åˆ¶è¿”å›ç»“æœé›†çš„æ¡æ•°&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;query = session.query(user).order_by(user.name).[:2]
print([result.user_name for result in query])
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;334ã€å†…ç½®sqlå‡½æ•°å’Œæ ‡ç­¾&quot;&gt;3.3.4ã€å†…ç½®SQLå‡½æ•°å’Œæ ‡ç­¾&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;from sqlalchemy import func
inv_count = session.query(func.sum(user.name)).scalar()
print(inv_count)
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;335ã€è¿‡æ»¤&quot;&gt;3.3.5ã€è¿‡æ»¤&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;record = session.query(user).filter(user.name == 'å°å')
print(record)
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;34ã€æ›´æ–°æ•°æ®&quot;&gt;3.4ã€æ›´æ–°æ•°æ®&lt;/h2&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;query = session.query(user)
xm_user = query.filter(user.user_name == 'å°å').first()
xm_user.name = 'robin'
session.commit()
print(xm_user.quantity)
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;35ã€åˆ é™¤æ•°æ®&quot;&gt;3.5ã€åˆ é™¤æ•°æ®&lt;/h2&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;query = session.query(user)
xm_user = query.filter(user.user_name == 'å°å').first()
session.delete(xm_user)
session.commit()
print(xm_user)
&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;æ³¨æ„ï¼š&lt;/p&gt;
&lt;p&gt;è¿™é‡Œç®€å•ä»‹ç»äº†SQLAlchemy ormçš„å¸¸è§ç”¨æ³•ï¼Œæ›´é«˜çº§çš„ç”¨æ³•è¯·æŸ¥é˜…å®˜æ–¹æ–‡æ¡£ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä½¿ç”¨åå°„æŠ€æœ¯å¯ä»¥åˆ©ç”¨å…ˆç”¨æ•°æ®åº“å¡«å……SQLAlchemyå¯¹è±¡ã€‚&lt;/p&gt;
&lt;h2 id=&quot;41ã€åå°„å•ä¸ªè¡¨&quot;&gt;4.1ã€åå°„å•ä¸ªè¡¨&lt;/h2&gt;
&lt;p&gt;åˆ›å»ºåˆå§‹å¯¹è±¡ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;from sqlalchemy import Metadata, create_engines
metadata = MetaData()
engine = reate_engine('sqlite:///')
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åå°„Artistè¡¨&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;from sqlalchmy impport Table
artist = Table('Artist', metadata, autoload=True, autoload_with=engine)
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;42ã€åå°„æ•´ä¸ªæ•°æ®åº“&quot;&gt;4.2ã€åå°„æ•´ä¸ªæ•°æ®åº“&lt;/h2&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;metadata.reflect(bind=engine)
&lt;/code&gt;
&lt;/pre&gt;

&lt;ol&gt;&lt;li&gt;&lt;a href=&quot;https://docs.sqlalchemy.org/en/13/core/type_basics.html#generic-types&quot;&gt;https://docs.sqlalchemy.org/en/13/core/type_basics.html#generic-types&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</description>
<pubDate>Mon, 12 Oct 2020 18:04:00 +0000</pubDate>
<dc:creator>å†·å†°è‹¥æ°´</dc:creator>
<og:description>ä¸€ã€SQLAlchemyç®€ä»‹ 1.1ã€SQLAlchemyæ˜¯ä»€ä¹ˆï¼Ÿ sqlalchemyæ˜¯ä¸€ä¸ªpythonè¯­è¨€å®ç°çš„çš„é’ˆå¯¹å…³ç³»å‹æ•°æ®åº“çš„ormåº“ã€‚å¯ç”¨äºè¿æ¥å¤§å¤šæ•°å¸¸è§çš„æ•°æ®åº“ï¼Œæ¯”å¦‚Postgesã€My</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/lit10050528/p/13806516.html</dc:identifier>
</item>
</channel>
</rss>