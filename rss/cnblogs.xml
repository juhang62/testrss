<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>åšå®¢å›­_é¦–é¡µ</title>
<link></link>
<description>ä»£ç æ”¹å˜ä¸–ç•Œ</description>
<item>
<title>æœåŠ¡åº”ç”¨çªç„¶å®•æœºäº†ï¼Ÿåˆ«æ€•ï¼ŒDubbo å¸®ä½ è‡ªåŠ¨æå®šæœåŠ¡éš”ç¦»ï¼ - æ¥¼ä¸‹å°é»‘å“¥</title>
<link>http://www.cnblogs.com/goodAndyxublog/p/13575494.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/goodAndyxublog/p/13575494.html</guid>
<description>&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1419561/202008/1419561-20200828083829099-90058590.jpg&quot; alt=&quot;å¬è¯´çŒ«çŒ«å¯ä»¥å¢åŠ ç‚¹å‡»é‡&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æŸæ—¥ä¸­åˆï¼Œåˆç¡æ­£é¦™çš„æ—¶å€™ï¼Œæ¥åˆ°ç³»ç»Ÿçš„æŠ¥è­¦ç”µè¯ï¼Œæç¤ºç”Ÿäº§æŸç‰©ç†æœºå¼‚å¸¸å®•æœºäº†ï¼Œç›®å‰è¯¥ç‰©ç†æœºå·²æ¢å¤ï¼Œéœ€è¦é‡å¯ä¸Šé¢éƒ¨ç½²çš„åº”ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ—¶ç¬é—´æ²¡æœ‰äº†ç¡æ„ï¼Œç™»ä¸Šå ¡å’æœºï¼Œå¿«é€Ÿé‡å¯äº†åº”ç”¨ï¼Œç³»ç»Ÿæ¢å¤æ­£å¸¸ã€‚æœ¬æƒ³ç€ç»§ç»­åˆç¡ï¼Œä½†æ˜¯å·²ç»æ²¡æœ‰äº†ç¡æ„ã€‚&lt;/p&gt;
&lt;p&gt;æ—è¾¹çš„å°å¸ˆå¼Ÿï¼ˆ&lt;em&gt;æˆ‘ä»¬å«ä»–å°ç°å§&lt;/em&gt;ï¼‰åˆšæ‰åœ¨æˆ‘ä»¬è¾¹ä¸Šï¼Œç›®ç¹è¿™ä¸€åˆ‡ï¼Œç„¶åå‘æˆ‘è¯·æ•™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å°ç°ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é»‘å“¥ï¼Œåˆšæ‰åº”ç”¨çªç„¶å®•æœºï¼Œä¼šä¸ä¼šå¯¹äº¤æ˜“æœ‰å½±å“å•Šï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å°é»‘ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å½±å“ç¡®å®ä¼šæœ‰ï¼Œä¸è¿‡ä¹Ÿä¸å¤§ï¼Œå°±å½“æ—¶åº”ç”¨æ­£åœ¨è¿è¡Œé‚£äº›é‚£äº›äº¤æ˜“ä¼šå—åˆ°å½±å“ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å°ç°ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸å¯¹å•Šï¼Œæˆ‘ä»¬ç°åœ¨ç³»ç»Ÿæ¶æ„æ˜¯ä¸‹é¢è¿™æ ·ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202008/1419561-20200828082735654-1037959224.jpg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬è¿™æ¬¡å®•æœºçš„æ˜¯ä¸šåŠ¡é€»è¾‘å±‚ï¼Œé‚£æŒ‰ç…§ç›®å‰ä½¿ç”¨ Dubbo è½®è¯¢çš„è´Ÿè½½å‡è¡¡æ–¹å¼ï¼Œä¸æ˜¯è¿˜ä¼šæœ‰äº¤æ˜“åˆ†å‘åˆ°å®•æœºé‚£å°åº”ç”¨ä¸Šï¼Œè¿™äº›äº¤æ˜“è¯·æ±‚æ˜¾ç„¶ä¼šå¼‚å¸¸ã€‚&lt;/p&gt;
&lt;p&gt;è¿æ°”å·®ç‚¹ï¼Œä¸æ˜¯ä¼šæœ‰ä¸€åŠäº¤æ˜“è¯·æ±‚éƒ½ä¼šæœ‰é—®é¢˜å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å°é»‘ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ²¡é”™ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿæ¶æ„å›¾ç¡®å®å¦‚è¯´çš„ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡ä½ è¯´çš„è¿™ä¸ªé—®é¢˜ï¼Œå®ƒæ˜¯ä¸å­˜åœ¨çš„ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯å› ä¸º Dubbo å†…éƒ¨ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬çš„æ‘˜é™¤å®•æœºçš„åº”ç”¨èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å°ç°ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å•¥ï¼ŸDubbo å†…éƒ¨è¿˜æœ‰è¿™åŠŸèƒ½å•Šï¼Ÿé»‘å“¥ä½ ç»™æˆ‘è®²è®²åŸç†å‘—ï¼&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å°é»‘ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥å•Šï¼Œä¸è¿‡è®²è¿™ä¸ªåŸç†ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦äº†è§£ Dubbo æœåŠ¡æ³¨å†Œå‘ç°æµç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘çœ‹ä½ æœ€è¿‘ä¸€ç›´åœ¨çœ‹ã€æ·±å…¥ç†è§£ Apache Dubbo ä¸å®æˆ˜ã€ï¼Œè¿™æœ¬ä¹¦ç¡®å®ä¸é”™ï¼Œé‡Œé¢æ¡†æ¶åŸç†ï¼Œä»£ç ç»†èŠ‚éƒ½è®²çš„å¾ˆé€å½»ã€‚&lt;/p&gt;
&lt;p&gt;ä½ åº”è¯¥å·²ç»äº†è§£äº† Dubbo æœåŠ¡æ³¨å†Œå‘ç°æµç¨‹ï¼Œé‚£ä½ å…ˆè·Ÿæˆ‘ç®€å•è®²è®²åŸç†å§ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å°ç°æ‹¿èµ·çº¸ç¬”ï¼Œåœ¨ä¸Šé¢ç”»äº†ä¸ªå›¾ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202008/1419561-20200828082735872-1244661697.jpg&quot; alt=&quot;Dubbo æœåŠ¡æ³¨å†Œå‘ç°æµç¨‹&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ©ï¼Œæˆ‘å½“å‰äº†è§£çš„è¿˜ä¸æ˜¯å¾ˆæ·±ï¼Œé‚£æˆ‘å…ˆèŠèŠç›®å‰æˆ‘çŸ¥é“çš„ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ç›®å‰ä½¿ç”¨ &lt;strong&gt;ZooKeeper&lt;/strong&gt; å½“åšæœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œ&lt;strong&gt;ZooKeeper&lt;/strong&gt; å¯ä»¥ç®€å•ç†è§£æˆæ˜¯ä¸€ä¸ª &lt;strong&gt;KV&lt;/strong&gt;ç³»ç»Ÿï¼Œå†…éƒ¨æ˜¯ä¸€ä¸ªæ ‘å½¢çš„æ•°æ®ç»“æ„ã€‚&lt;/p&gt;
&lt;p&gt;Dubbo é»˜è®¤å°†ä¼šåœ¨ &lt;strong&gt;ZooKeeper&lt;/strong&gt; ä¸­åˆ›å»ºä¸€ä¸ªå››å±‚çš„æ•°æ®ç»“æ„ï¼Œä»ä¸Šåˆ°ä¸‹åˆ†åˆ«ä¸ºï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Root&lt;/li&gt;
&lt;li&gt;Service&lt;/li&gt;
&lt;li&gt;Category&lt;/li&gt;
&lt;li&gt;URL&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å…¶ä¸­ &lt;strong&gt;Root&lt;/strong&gt; å±‚æ˜¯æ³¨å†Œä¸­å¿ƒåˆ†ç»„ï¼Œé»˜è®¤å‘½åä¸º dubboã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹ &lt;code&gt;&amp;lt;dubbo:registry&amp;gt;&lt;/code&gt; ä¸­çš„ group å±æ€§ä¿®æ”¹é»˜è®¤å€¼ï¼Œè¿™æ ·ä¿®æ”¹ä¹‹åä¸åŒåˆ†ç»„çš„ dubbo æœåŠ¡ä¸ä¼šäº’ç›¸å½±å“ï¼Œä¹Ÿä¸ä¼šäº’ç›¸è°ƒç”¨ï¼Œå¯ä»¥ç”¨äºç¯å¢ƒéš”ç¦»ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥ &lt;strong&gt;Service&lt;/strong&gt; å°±æ˜¯æœåŠ¡ç±»çš„å…¨è·¯å¾„ï¼ŒåŒ…æ‹¬åŒ…è·¯å¾„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Service&lt;/strong&gt; å±‚ä¸‹é¢å°±æ˜¯ &lt;strong&gt;Category&lt;/strong&gt; å±‚ï¼Œè¿™å…¶ä¸­æ€»å…±æœ‰å››ç±»ç›®å½•ï¼ˆä¸Šé¢å›¾å½¢åªç”»äº†ä¸¤ç§ï¼‰ï¼Œåˆ†åˆ«ä¸º:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;providersï¼šåŒ…å«æœåŠ¡æä¾›è€… URL å…ƒæ•°æ®ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;consumersï¼šåŒ…å«æ¶ˆè´¹è€… URL å…ƒæ•°æ®ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;routersï¼šåŒ…å«æ¶ˆè´¹è€…è·¯ç”±ç­–ç•¥çš„ URL å…ƒæ•°æ®ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;configuratorsï¼šåŒ…å«åŠ¨æ€é…ç½®å…ƒæ•°æ®ä¿¡æ¯&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æœ€åä¸€å±‚å°±æ˜¯å…·ä½“ Dubbo æœåŠ¡ URLï¼Œç±»ä¼¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-html&quot;&gt;dubbo://2.0.1.13:12345/com.dubbo.example.DemoService?xx=xx
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;å°é»‘ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ²¡é”™ï¼Œè¿™ä¸ªå†…éƒ¨ç»“æ„ä½ ç†è¿˜æ˜¯è›®æ¸…æ™°çš„ä¹ˆï¼&lt;/p&gt;
&lt;p&gt;å¹³å¸¸ä½¿ç”¨çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬é‡ç‚¹å…³æ³¨ &lt;strong&gt;providers&lt;/strong&gt; ä»¥åŠ &lt;strong&gt;consumers&lt;/strong&gt; å°±å¥½äº†ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦é…ç½®æœåŠ¡è·¯ç”±ä¿¡æ¯ä»¥åŠåŠ¨æ€é…ç½®ï¼Œé‚£æˆ‘ä»¬éœ€è¦åœ¨ Dubbo-Admin æœåŠ¡æ²»ç†ä¸­å¿ƒä¸‹å‘é…ç½®ã€‚è¿™æ—¶ &lt;code&gt;routers&lt;/code&gt; ä¸ &lt;code&gt;configurators&lt;/code&gt; å°±ä¼šå¢åŠ ç›¸å…³é…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å°ç°ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å˜¿å˜¿ğŸ˜ï¼Œå’±æ¥ä¸‹æ¥è®²æœåŠ¡æ³¨å†Œæµç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;å½“æœåŠ¡æä¾›è€…å¯åŠ¨ä¹‹åï¼Œä¼šå‘æ³¨å†Œä¸­å¿ƒå†™å…¥è‡ªå·±çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œå…¶å®å°±æ˜¯åœ¨ providers èŠ‚ç‚¹ä¸‹åˆ›å»ºä¸€ä¸ª URL èŠ‚ç‚¹ï¼ˆå¦‚æœä¸Šçº§èŠ‚ç‚¹éƒ½ä¸å­˜åœ¨ï¼Œå°†ä¼šé€å±‚åˆ›å»ºï¼‰ï¼Œå­˜å‚¨å€¼ç±»ä¼¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;dubbo://10.10.11.22:20880/com.foo/BarService?key=value....
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ¥ç€å¯åŠ¨æœåŠ¡æ¶ˆè´¹è€…ï¼Œæ¶ˆè´¹è€…ç¬¬ä¸€æ¬¡è¿æ¥ä¸Š ZooKeeper æ—¶ï¼Œå°†ä¼šæ‹‰å–provider èŠ‚ç‚¹ä¸‹æ‰€æœ‰æœåŠ¡æä¾›è€…çš„ URL ä¿¡æ¯ï¼Œç„¶åä¸ç›¸åº”çš„æœåŠ¡æä¾›è€…å»ºç«‹è¿æ¥ã€‚&lt;/p&gt;
&lt;p&gt;åŒæ—¶æœåŠ¡æ¶ˆè´¹è€…ä¹Ÿä¼šå°†è‡ªå·±ä¿¡æ¯æ³¨å†Œåˆ°åœ¨ consumer èŠ‚ç‚¹ä¸‹ï¼Œè¿™ä¸ªç›®çš„æ˜¯ä¸ºäº†æœåŠ¡æ²»ç†ä¸­å¿ƒï¼ˆDubbo-Adminï¼‰å‘ç°è‡ªå·±ã€‚&lt;/p&gt;
&lt;p&gt;åŒæ—¶æ¶ˆè´¹è€…å°†ä¼šåœ¨ provider èŠ‚ç‚¹ä¸Šæ³¨å†Œä¸€ä¸ª watcher ï¼Œå½“æœ‰æ–°çš„æœåŠ¡æä¾›è€…å¯åŠ¨æˆåŠŸï¼Œprovider èŠ‚ç‚¹å‘ç”Ÿå˜æ›´ï¼ŒZooKeeper å°†ä¼šæ¨é€å˜æ›´ä¿¡æ¯ç»™ Dubbo æœåŠ¡ï¼Œç„¶å Dubbo å°†ä¼šé‡æ–°å»ºç«‹ä¸æœåŠ¡æä¾›è€…çš„è¿æ¥ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å°é»‘ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½ è¯´çš„æ•´ä¸ª Dubbo æœåŠ¡æ³¨å†Œå‘ç°æµç¨‹æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œè¿™é‡Œæ¶ˆè´¹è€…ä¸æœåŠ¡æä¾›è€…å»ºç«‹çš„è¿æ¥çš„æµç¨‹ï¼Œæˆ‘ä»¬ä¹‹å‰è¸©è¿‡ä¸€ä¸ªå‘ï¼Œä½ æœ‰ç©ºå¯ä»¥çœ‹çœ‹ &lt;a href=&quot;https://mp.weixin.qq.com/s/Y4fLEAZ8ZezV_EXzx0YzAg&quot;&gt;å¤©å•¦å™œï¼ç”Ÿäº§æœºå™¨è¿æ¥æ•°é£™å‡åˆ°ä¸Šä¸‡ï¼ŒèƒŒåå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–ï¼Œå†è€ƒä½ ä¸€ä¸‹:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æœåŠ¡èŠ‚ç‚¹å˜æ›´æ—¶ï¼ŒZooKeeper æ¨é€ provider ä¸‹å…¨é‡å­èŠ‚ç‚¹æ•°æ®ç»™æ¶ˆè´¹è€…å—ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å°ç°ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å‘€ï¼Œéš¾é“ä¸æ˜¯å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å°é»‘ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸æ˜¯çš„ã€‚ZooKeeper çš„ watch æœºåˆ¶ç›®å‰åªèƒ½æ¨é€èŠ‚ç‚¹å˜æ›´ä¿¡æ¯ï¼Œæ¯”å¦‚èŠ‚ç‚¹å†…å®¹æ•°æ®å˜æ›´ï¼Œç›‘å¬èŠ‚ç‚¹ä¸‹å­èŠ‚ç‚¹åˆ—è¡¨å˜æ›´ç­‰ï¼Œå…·ä½“å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202008/1419561-20200828082736192-374969055.jpg&quot; alt=&quot;å›¾ç‰‡æ¥è‡ªç½‘ç»œ&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿›ä¸€æ­¥ä» Zookeeper å®¢æˆ·ç«¯çš„æºç ä¸Šæ¥çœ‹ï¼Œwatcher å›è°ƒé€šçŸ¥å†…å®¹æœ€ç»ˆè½¬ä¸º &lt;code&gt;WatchedEvent&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202008/1419561-20200828082736466-183596895.jpg&quot; alt=&quot;image-20200823204259983&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªç±»åªæœ‰ä¸‰ä¸ªå­—æ®µï¼Œæ‰€ä»¥æ˜¯ä¸ä¼šæ¨é€å­èŠ‚ç‚¹åˆ—è¡¨æ•°æ®è¿‡æ¥ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å°ç°ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ—¢ç„¶ä¸æ˜¯é€šè¿‡æ¨é€è·å–å­èŠ‚ç‚¹åˆ—è¡¨çš„ä¿¡æ¯ï¼Œé‚£å¦‚ä½•æ‹¿åˆ°å˜åŠ¨å­èŠ‚ç‚¹åˆ—è¡¨ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æœ‰äº†ï¼Œåœ¨æ”¶åˆ°æ¨é€çš„æ—¶å€™ï¼Œæˆ‘ä»¬èƒ½è·å–åˆ°å˜åŠ¨èŠ‚ç‚¹ä¿¡æ¯ï¼Œç„¶åæˆ‘å†æ‹‰å–ä¸€ä¸‹å­èŠ‚ç‚¹çš„åˆ—è¡¨ä¸å°±å¥½äº†ï¼&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å°é»‘ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ²¡é”™ï¼ŒDubbo å°±æ˜¯è¿™ä¹ˆåšçš„ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸€ç‚¹æˆ‘ä»¬å¯ä»¥å…·ä½“çœ‹ä¸‹ Dubbo çš„æºç ï¼Œä½äº &lt;code&gt;CuratorZookeeperClient&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;ç”»å¤–éŸ³ï¼šä¸‹é¢çš„æºç åŸºäº Dubbo 2.6.7&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202008/1419561-20200828082736773-1542666628.jpg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å›¾ä¸­æ ‡æ³¨çš„åœ°æ–¹ï¼ŒDubbo é€šè¿‡æ‹‰å–è·å–äº†å­—èŠ‚ç‚¹çš„å…¨é‡æ•°æ®ï¼ŒåŒæ—¶å†æ¬¡æ³¨å†Œäº†ä¸€ä¸ª &lt;code&gt;watcher&lt;/code&gt; ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡è¿™ä¹ˆå¤šï¼Œæœ‰ä¸ªç¼ºé™·çš„ï¼Œå½“å¾®æœåŠ¡èŠ‚ç‚¹æ•°é‡æœ‰å¾ˆå¤šçš„æ—¶å€™ï¼Œå…¨é‡æ‹‰å–å°†ä¼šå ç”¨è¿‡å¤šçš„å†…ç½‘å¸¦å®½ï¼Œå¾ˆå®¹æ˜“é€ æˆç½‘ç»œé£æš´ã€‚&lt;/p&gt;
&lt;p&gt;ä¸Šé¢æˆ‘ä»¬è®²åˆ° Zookeeper çš„è¿™ç§æ–¹å¼ï¼Œæ˜¯ä¸€ç§å…¸å‹çš„ &lt;strong&gt;Push&lt;/strong&gt; æ¨¡å¼ï¼Œå¯¹åº”çš„è¿˜æœ‰ä¸€ç§çš„æ¨¡å¼ä¸º &lt;strong&gt;Pull&lt;/strong&gt; æ¨¡å¼ï¼Œ&lt;strong&gt;eureka&lt;/strong&gt; å°±æ˜¯è¿™ç§æ¨¡å¼çš„å…¸å‹çš„ä»£è¡¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;eureka&lt;/strong&gt; å®¢æˆ·ç«¯å°±æ˜¯é€šè¿‡å®šæœŸè½®è¯¢æ‹‰å–æ•°æ®ï¼Œè·å–æœ€æ–°çš„å˜æ›´æ•°æ®ã€‚ä¸è¿‡æ‹‰å–æ¨¡å¼ä¹Ÿå­˜åœ¨å¾ˆå¤§çš„åŠ£åŠ¿ï¼Œå¦‚æœè½®è¯¢é¢‘ç‡ä½ï¼Œé‚£ä¹ˆæœåŠ¡å˜æ›´ä¿¡æ¯æ— æ³•åŠæ—¶è·å–ï¼Œå¦‚æœè½®ç‡å¤ªé«˜è¿™å°±ä¼šå¢åŠ æ³¨å†Œä¸­å¿ƒçš„å‹åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å°é»‘ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æœåŠ¡å‘ç°æµç¨‹è¿™ä¸‹æˆ‘ä»¬å·²ç»ææ˜ç™½äº†ã€‚å¦‚æœæœ‰æ–°å¢æœåŠ¡èŠ‚ç‚¹ï¼ŒDubbo æ¶ˆè´¹è€…é€šè¿‡é€šçŸ¥ï¼Œç„¶åå†æ‹‰å–å…¨é‡çš„å­èŠ‚ç‚¹åˆ—è¡¨ï¼Œè¿™æ · Dubboæ¶ˆè´¹è€…å°±ä¼šæ–°å¢ä¸æ–°çš„æœåŠ¡æä¾›è€…è¿æ¥ï¼Œåç»­å†é€šè¿‡è´Ÿè½½å‡è¡¡ä½¿ç”¨æ–°çš„è¿æ¥ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœ Dubbo æœåŠ¡æä¾›è€…æ­£å¸¸åœæ­¢ä¸‹çº¿ï¼Œé‚£ä¹ˆä»–å°†ä¼šåˆ é™¤ ZooKeeper ä¸Šçš„è‡ªå·±æ³¨å†Œçš„èŠ‚ç‚¹ä¿¡æ¯ã€‚åˆ é™¤ä¹‹å Dubbo æ¶ˆè´¹è€…ç¬¬ä¸€æ—¶é—´æ”¶åˆ°äº†é€šçŸ¥ï¼Œé€šè¿‡æ‹‰å–å…¨é‡çš„å­èŠ‚ç‚¹åˆ—è¡¨ï¼Œç„¶åé€šè¿‡æ¯”å¯¹ï¼Œå‘ç°æŸä¸ªèŠ‚ç‚¹ä¸‹çº¿ï¼Œç„¶ååˆ é™¤ä¹‹å‰ç®€å†çš„è¿æ¥ã€‚è¿™æ ·åç»­ï¼Œå°±ä¸ä¼šå†è°ƒç”¨è¿™ä¸ªèŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å°ç°ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ©ï¼Œæ­£å¸¸åº”ç”¨ä¸Šä¸‹çº¿ï¼ŒDubbo æ¶ˆè´¹è€…å¯ä»¥æ„ŸçŸ¥åˆ°ï¼Œä½†æ˜¯åƒæœåŠ¡æä¾›è€…å®•æœºçš„æƒ…å†µï¼Œæ¶ˆè´¹è€…æ˜¯æ€ä¹ˆæ„ŸçŸ¥åˆ°çš„ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å°é»‘ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸€ç‚¹ï¼Œå°±ä¸ Zookeeper çš„è‡ªèº«ç‰¹æ€§æœ‰å…³äº†ã€‚&lt;/p&gt;
&lt;p&gt;Zookeeper ä¸­æˆ‘ä»¬å¯ä»¥åˆ›å»ºå››ç§èŠ‚ç‚¹ç±»å‹çš„èŠ‚ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æ°¸ä¹…èŠ‚ç‚¹&lt;/li&gt;
&lt;li&gt;ä¸´æ—¶èŠ‚ç‚¹&lt;/li&gt;
&lt;li&gt;é¡ºåºèŠ‚ç‚¹
&lt;ul&gt;&lt;li&gt;æ°¸ä¹…èŠ‚ç‚¹&lt;/li&gt;
&lt;li&gt;ä¸´æ—¶èŠ‚ç‚¹&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä¸´æ—¶èŠ‚ç‚¹ä¸æ°¸ä¹…èŠ‚ç‚¹å”¯ä¸€çš„åŒºåˆ«åœ¨äºï¼Œä¸€æ—¦ Zookeeper å®¢æˆ·ç«¯æ–­å¼€è¿æ¥ï¼ŒZookeeper æœåŠ¡æ„ŸçŸ¥åˆ°ä¹‹åå°±ä¼šè‡ªåŠ¨åˆ é™¤ä¸´æ—¶èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;Dubbo æœåŠ¡æä¾›è€…å°±æ˜¯åœ¨ Zookeeper æ³¨å†Œäº†ä¸´æ—¶èŠ‚ç‚¹ï¼Œå¦‚æœæœåŠ¡æä¾›è€…å®•æœºäº†ï¼Œä¸´æ—¶èŠ‚ç‚¹è‡ªåŠ¨è¢«åˆ é™¤ï¼Œåé¢çš„æµç¨‹å°±è·Ÿ Dubbo åº”ç”¨æ­£å¸¸ä¸‹çº¿ä¸€æ ·äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å°ç°ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ã™ã”ã„ï¼&lt;/strong&gt;åŸæ¥å¦‚æ­¤ï¼Œè¿™ä¸ªè®¾è®¡ 666 å•Šã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å°é»‘ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å…¶å®åº”ç”¨å®•æœºè¿™ç§ï¼Œ Dubbo RPC æ¡†æ¶å†…éƒ¨éƒ½å¯ä»¥è‡ªåŠ¨å¸®æˆ‘ä»¬å¤„ç†ï¼Œè¿™ç§æ•…éšœå…¶å®å¾ˆå¥½å¤„ç†ã€‚ä½†æ˜¯å¦‚æœç¢°åˆ°ä¸‹é¢è¿™è¿™ç§æƒ…å†µï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æœåŠ¡æä¾›è€…ä¸æœåŠ¡æ¶ˆè´¹è€…ç½‘ç»œéš”ç¦»&lt;/li&gt;
&lt;li&gt;æœåŠ¡æä¾›é™·å…¥ç¼“æ…¢&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;åœ¨æœåŠ¡æ¶ˆè´¹è€…çœ‹æ¥ï¼ŒæœåŠ¡æä¾›è€…å…¶å®æ˜¯ã€Œæ´»ç€ã€ï¼Œè¿™æ˜¯å› ä¸ºæœåŠ¡æä¾›è€…ä¸ Zookeeper è¿˜æ˜¯æ­£å¸¸è¿æ¥ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯å®é™…æƒ…å†µä¸‹ï¼ŒæœåŠ¡æ¶ˆè´¹è€…å…¶å®å·²ç»ä¸èƒ½æ­£å¸¸è°ƒç”¨æœåŠ¡æä¾›è€…äº†ï¼Œé‚£è¿™ç§æƒ…å†µå°±æ¯”è¾ƒæ£˜æ‰‹äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡ Dubbo å†…éƒ¨ä¹Ÿæä¾›äº†è§£å†³åŠæ³•ã€‚é©¬ä¸Šå°±ä¸Šç­äº†ï¼Œä¹Ÿæ¥ä¸åŠè®²äº†ï¼Œæˆ‘ä»¬åé¢å†è®¨è®ºï¼&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å°ç°ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¥½çš„ï¼Œé»‘å“¥ï¼ä»Šå¤©å­¦åˆ°äº†ï¼&lt;/p&gt;
&lt;p&gt;é»‘å“¥ğŸ‚ğŸºï¼çˆ±ä½ ~&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202008/1419561-20200828082737249-12206703.jpg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;å¸®åŠ©é“¾æ¥&quot;&gt;å¸®åŠ©é“¾æ¥&lt;/h2&gt;
&lt;ol&gt;&lt;li&gt;&lt;a href=&quot;https://www.sofastack.tech/blog/sofa-registry-service-discovery-optimization/&quot;&gt;https://www.sofastack.tech/blog/sofa-registry-service-discovery-optimization/&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;blockquote readability=&quot;5.5384615384615&quot;&gt;
&lt;p&gt;æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šç¨‹åºé€šäº‹ï¼Œè·å¾—æ—¥å¸¸å¹²è´§æ¨é€ã€‚å¦‚æœæ‚¨å¯¹æˆ‘çš„ä¸“é¢˜å†…å®¹æ„Ÿå…´è¶£ï¼Œä¹Ÿå¯ä»¥å…³æ³¨æˆ‘çš„åšå®¢ï¼š&lt;a href=&quot;https://studyidea.cn&quot;&gt;studyidea.cn&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
<pubDate>Fri, 28 Aug 2020 00:28:00 +0000</pubDate>
<dc:creator>æ¥¼ä¸‹å°é»‘å“¥</dc:creator>
<og:description>æŸæ—¥ä¸­åˆï¼Œåˆç¡æ­£é¦™çš„æ—¶å€™ï¼Œæ¥åˆ°ç³»ç»Ÿçš„æŠ¥è­¦ç”µè¯ï¼Œæç¤ºç”Ÿäº§æŸç‰©ç†æœºå¼‚å¸¸å®•æœºäº†ï¼Œç›®å‰è¯¥ç‰©ç†æœºå·²æ¢å¤ï¼Œéœ€è¦é‡å¯ä¸Šé¢éƒ¨ç½²çš„åº”ç”¨ã€‚ è¿™æ—¶ç¬é—´æ²¡æœ‰äº†ç¡æ„ï¼Œç™»ä¸Šå ¡å’æœºï¼Œå¿«é€Ÿé‡å¯äº†åº”ç”¨ï¼Œç³»ç»Ÿæ¢å¤æ­£å¸¸ã€‚æœ¬æƒ³ç€ç»§ç»­åˆç¡ï¼Œä½†</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/goodAndyxublog/p/13575494.html</dc:identifier>
</item>
<item>
<title>æ­»ç£•äºŒå‰æ ‘ï¼ˆäºŒï¼‰ - punnpkin</title>
<link>http://www.cnblogs.com/punnpkin/p/13575493.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/punnpkin/p/13575493.html</guid>
<description>&lt;h4 id=&quot;102-äºŒå‰æ ‘çš„å±‚åºéå†&quot;&gt;&lt;a href=&quot;https://leetcode-cn.com/problems/binary-tree-level-order-traversal/&quot;&gt;102. äºŒå‰æ ‘çš„å±‚åºéå†&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;äºŒå‰æ ‘å±‚åºéå†å¯ä»¥å€ŸåŠ©BFSçš„æ€æƒ³è§£å†³ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;class Solution {
    public List&amp;lt;List&amp;lt;Integer&amp;gt;&amp;gt; levelOrder(TreeNode root) {

    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ‹¿åˆ°è¿™ä¸ªé¢˜ç›®ä¹‹åï¼Œé¦–å…ˆçœ‹åˆ°è¿”å›çš„ç±»å‹æ˜¯ä¸€ä¸ª&lt;code&gt;List&amp;lt;List&amp;lt;Integer&amp;gt;&amp;gt;&lt;/code&gt;ï¼Œå› æ­¤åœ¨æ„é€ è¿”å›ç»“æœçš„æ—¶å€™ï¼Œç»“æœä¹Ÿæ˜¯æŒ‰å±‚è¿›è¡Œæ·»åŠ çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å¤„ç†çš„è¿‡ç¨‹ä¸­éœ€è¦ä¿å­˜å½“å‰è®¿é—®çš„&lt;strong&gt;å±‚&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;// æ„é€ è¿”å›ç»“æœ
List&amp;lt;List&amp;lt;Integer&amp;gt;&amp;gt; res = new LinkedList&amp;lt;List&amp;lt;Integer&amp;gt;&amp;gt;();

// åŠ¨æ€æ·»åŠ å€¼
List&amp;lt;Integer&amp;gt; list = new LinkedList&amp;lt;&amp;gt;();
res.add(list);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…¶æ¬¡ï¼Œä¸ºäº†è¾¾åˆ°å±‚æ¬¡éå†çš„æ•ˆæœï¼Œå¯ä»¥æŠŠäºŒå‰æ ‘çš„ä¾æ¬¡&lt;strong&gt;æŒ‰å±‚èŠ‚ç‚¹&lt;/strong&gt;å‹å…¥åˆ°é˜Ÿåˆ—ä¸­ï¼Œå†ä¾æ¬¡å¼¹å‡ºä½¿ç”¨ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;Queue&amp;lt;TreeNode&amp;gt; queue = new LinkedList&amp;lt;TreeNode&amp;gt;();

TreeNode node = queue.poll();
if(node.left != null) queue.add(node.left);
if(node.right != null) queue.add(node.right);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯ä»¥è¯´ï¼Œé˜Ÿåˆ—ä¸€æ¬¡æ€§ä¿å­˜äº†&lt;strong&gt;äºŒå‰æ ‘æŸä¸ªå±‚çš„å…¨éƒ¨èŠ‚ç‚¹&lt;/strong&gt;ï¼Œä¸€å±‚ä¸€å±‚çš„ç›´åˆ°æœ€åº•å±‚ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class Solution {
    // è¿­ä»£
    public List&amp;lt;List&amp;lt;Integer&amp;gt;&amp;gt; levelOrder(TreeNode root) {
        List&amp;lt;List&amp;lt;Integer&amp;gt;&amp;gt; res = new LinkedList&amp;lt;List&amp;lt;Integer&amp;gt;&amp;gt;();
        if(root == null) return res;

        Queue&amp;lt;TreeNode&amp;gt; queue = new LinkedList&amp;lt;TreeNode&amp;gt;();
        queue.add(root);

        while (!queue.isEmpty()){
            List&amp;lt;Integer&amp;gt; list = new LinkedList&amp;lt;&amp;gt;();
            int level_length = queue.size();
            for (int i = 0; i &amp;lt; level_length; i++) {
                TreeNode node = queue.poll();
                list.add(node.val);
                if(node.left != null) queue.add(node.left);
                if(node.right != null) queue.add(node.right);
            }
            res.add(list);
        }

        return res;
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;107-äºŒå‰æ ‘çš„å±‚æ¬¡éå†-ii&quot;&gt;&lt;a href=&quot;https://leetcode-cn.com/problems/binary-tree-level-order-traversal-ii/&quot;&gt;107. äºŒå‰æ ‘çš„å±‚æ¬¡éå† II&lt;/a&gt;&lt;/h4&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œè¿”å›å…¶èŠ‚ç‚¹å€¼è‡ªåº•å‘ä¸Šçš„å±‚æ¬¡éå†ã€‚ ï¼ˆå³æŒ‰ä»å¶å­èŠ‚ç‚¹æ‰€åœ¨å±‚åˆ°æ ¹èŠ‚ç‚¹æ‰€åœ¨çš„å±‚ï¼Œé€å±‚ä»å·¦å‘å³éå†ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å’Œä¸Šä¸€é¢˜çš„å”¯ä¸€åŒºåˆ«å°±æ˜¯ï¼š&lt;strong&gt;æ¯å±‚çš„ç»“ç‚¹åœ¨ç»“æœä¸­å­˜æ”¾çš„å…ˆåé¡ºåºä¸åŒ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç¨å¾®è°ƒæ•´ä¸€ä¸‹ä»£ç ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;res.add(0, list);
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;å‰‘æŒ‡-offer-32---iii-ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘-iii&quot;&gt;&lt;a href=&quot;https://leetcode-cn.com/problems/cong-shang-dao-xia-da-yin-er-cha-shu-iii-lcof/&quot;&gt;å‰‘æŒ‡ Offer 32 - III. ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘ III&lt;/a&gt;&lt;/h4&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;è¯·å®ç°ä¸€ä¸ªå‡½æ•°æŒ‰ç…§ä¹‹å­—å½¢é¡ºåºæ‰“å°äºŒå‰æ ‘&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;é€šè¿‡å¥‡å¶å±‚çš„åˆ†ç¦»ï¼Œå°±å¯ä»¥å®ç°ä¹‹å­—å½¢æ‰“å°çš„ã€‚åœ¨å±‚åºéå†ä¸­ï¼ŒresæŒ‰&lt;strong&gt;å±‚&lt;/strong&gt;ä¿å­˜äº†éå†çš„ç»“æœï¼Œå› æ­¤å¯ä»¥å€ŸåŠ©&lt;code&gt;res.size&lt;/code&gt;æ¥åŒºåˆ†å¥‡å¶å±‚ï¼Œä¹Ÿå¯ä»¥åœ¨å¾ªç¯å¤–å•ç‹¬è®¾ç½®ä¸€ä¸ªå˜é‡æ¥æŒ‡ç¤ºå½“å‰çš„å±‚æ•°ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class Solution {
    // è¿­ä»£
    public List&amp;lt;List&amp;lt;Integer&amp;gt;&amp;gt; levelOrder(TreeNode root) {
        List&amp;lt;List&amp;lt;Integer&amp;gt;&amp;gt; res = new LinkedList&amp;lt;List&amp;lt;Integer&amp;gt;&amp;gt;();
        if(root == null) return res;

        Queue&amp;lt;TreeNode&amp;gt; queue = new LinkedList&amp;lt;TreeNode&amp;gt;();
        queue.add(root);

        int level = 0;
        while (!queue.isEmpty()){
            List&amp;lt;Integer&amp;gt; list = new LinkedList&amp;lt;&amp;gt;();
            int level_length = queue.size();
            for (int i = 0; i &amp;lt; level_length; i++) {
                TreeNode node = queue.poll();
                if (level % 2 == 0) list.add(node.val);
                else list.add(0, node.val);
                if(node.left != null) queue.add(node.left);
                if(node.right != null) queue.add(node.right);
            }
            res.add(list);
            level ++;
        }

        return res;
    }
}
&lt;/code&gt;
&lt;/pre&gt;</description>
<pubDate>Fri, 28 Aug 2020 00:28:00 +0000</pubDate>
<dc:creator>punnpkin</dc:creator>
<og:description>102. äºŒå‰æ ‘çš„å±‚åºéå† äºŒå‰æ ‘å±‚åºéå†å¯ä»¥å€ŸåŠ©BFSçš„æ€æƒ³è§£å†³ï¼š class Solution { public List&amp;amp;lt;List&amp;amp;lt;Integer&amp;amp;gt;&amp;a</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/punnpkin/p/13575493.html</dc:identifier>
</item>
<item>
<title>ä¸€ã€SQLMAPå…¥é—¨ - ä¸€å¤œè’å”æ¢¦</title>
<link>http://www.cnblogs.com/chen-kaige/p/13575490.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/chen-kaige/p/13575490.html</guid>
<description>[unable to retrieve full-text content]ä¸€ã€SQLMAPå…¥é—¨ 1ã€åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ³¨å…¥ sqlmap.py -u ç½‘å€/id=1 id=1ä¸å¯ç¼ºå°‘ã€‚å½“æ³¨å…¥ç‚¹åé¢çš„å‚æ•°å¤§äºä¸¤ä¸ªæ—¶ã€‚éœ€è¦åŠ åŒå¼•å·ï¼Œ sqlmap.py -u &quot;ç½‘å€/id=1&amp;uid=1&quot; 2ã€åˆ¤æ–­æ–‡æœ¬ä¸­çš„è¯·æ±‚æ˜¯å¦å­˜åœ¨æ³¨å…¥ ä»æ–‡æœ¬ä¸­åŠ è½½httpè¯·æ±‚ï¼ŒSQLMAPå¯ä»¥ä»ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä¸­</description>
<pubDate>Fri, 28 Aug 2020 00:25:00 +0000</pubDate>
<dc:creator>ä¸€å¤œè’å”æ¢¦</dc:creator>
<dc:language>zh-CN</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://account.cnblogs.com:443/signin?ReturnUrl=https%3A%2F%2Fwww.cnblogs.com%2Fchen-kaige%2Fp%2F13575490.html</dc:identifier>
</item>
<item>
<title>Docker é•œåƒæ„å»ºä¹‹ Dockerfile - å“ˆå–½æ²ƒå¾·å…ˆç”Ÿ</title>
<link>http://www.cnblogs.com/mrhelloworld/p/docker7.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/mrhelloworld/p/docker7.html</guid>
<description>&lt;p&gt;åœ¨ Docker ä¸­æ„å»ºé•œåƒæœ€å¸¸ç”¨çš„æ–¹å¼ï¼Œå°±æ˜¯ä½¿ç”¨ &lt;code&gt;Dockerfile&lt;/code&gt;ã€‚Dockerfile æ˜¯ä¸€ä¸ªç”¨æ¥æ„å»ºé•œåƒçš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ–‡æœ¬å†…å®¹åŒ…å«äº†ä¸€æ¡æ¡æ„å»ºé•œåƒæ‰€éœ€çš„æŒ‡ä»¤å’Œè¯´æ˜ã€‚å®˜æ–¹æ–‡æ¡£ï¼š&lt;a href=&quot;https://docs.docker.com/engine/reference/builder/&quot;&gt;https://docs.docker.com/engine/reference/builder/&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;dockerfile-å¸¸ç”¨æŒ‡ä»¤&quot;&gt;Dockerfile å¸¸ç”¨æŒ‡ä»¤&lt;/h2&gt;

&lt;h3 id=&quot;from&quot;&gt;FROM&lt;/h3&gt;

&lt;p&gt;ã€€ã€€è¯­æ³•ï¼š&lt;code&gt;FROM &amp;lt;image&amp;gt;:&amp;lt;tag&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€æŒ‡æ˜æ„å»ºçš„æ–°é•œåƒæ˜¯æ¥è‡ªäºå“ªä¸ªåŸºç¡€é•œåƒï¼Œå¦‚æœæ²¡æœ‰é€‰æ‹© tagï¼Œé‚£ä¹ˆé»˜è®¤å€¼ä¸º latestã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;FROM centos:7
&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;ã€€ã€€å¦‚æœä¸ä»¥ä»»ä½•é•œåƒä¸ºåŸºç¡€ï¼Œé‚£ä¹ˆå†™æ³•ä¸ºï¼šFROM scratchã€‚å®˜æ–¹è¯´æ˜ï¼šscratch é•œåƒæ˜¯ä¸€ä¸ªç©ºé•œåƒï¼Œå¯ä»¥ç”¨äºæ„å»º busybox ç­‰è¶…å°é•œåƒï¼Œå¯ä»¥è¯´æ˜¯çœŸæ­£çš„ä»é›¶å¼€å§‹æ„å»ºå±äºè‡ªå·±çš„é•œåƒã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;maintainerdeprecated&quot;&gt;&lt;s&gt;MAINTAINER&lt;/s&gt;(deprecated)&lt;/h3&gt;

&lt;p&gt;ã€€ã€€è¯­æ³•ï¼š&lt;code&gt;MAINTAINER &amp;lt;name&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€æŒ‡æ˜é•œåƒç»´æŠ¤è€…åŠå…¶è”ç³»æ–¹å¼ï¼ˆä¸€èˆ¬æ˜¯é‚®ç®±åœ°å€ï¼‰ã€‚å®˜æ–¹è¯´æ˜å·²è¿‡æ—¶ï¼Œæ¨èä½¿ç”¨ LABELã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;MAINTAINER mrhelloworld &amp;lt;mrhelloworld@126.com&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;

&lt;h3 id=&quot;label&quot;&gt;LABEL&lt;/h3&gt;

&lt;p&gt;ã€€ã€€è¯­æ³•ï¼š&lt;code&gt;LABEL &amp;lt;key&amp;gt;=&amp;lt;value&amp;gt; &amp;lt;key&amp;gt;=&amp;lt;value&amp;gt; &amp;lt;key&amp;gt;=&amp;lt;value&amp;gt; ...&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€åŠŸèƒ½æ˜¯ä¸ºé•œåƒæŒ‡å®šæ ‡ç­¾ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ LABEL æ¥æŒ‡å®šé•œåƒä½œè€…ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;LABEL maintainer=&quot;mrhelloworld.com&quot;
&lt;/code&gt;
&lt;/pre&gt;

&lt;h3 id=&quot;run&quot;&gt;RUN&lt;/h3&gt;

&lt;p&gt;ã€€ã€€è¯­æ³•ï¼š&lt;code&gt;RUN &amp;lt;command&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€æ„å»ºé•œåƒæ—¶è¿è¡Œçš„ Shell å‘½ä»¤ï¼Œæ¯”å¦‚æ„å»ºçš„æ–°é•œåƒä¸­æˆ‘ä»¬æƒ³åœ¨ /usr/local ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª java ç›®å½•ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;RUN mkdir -p /usr/local/java
&lt;/code&gt;
&lt;/pre&gt;

&lt;h3 id=&quot;add&quot;&gt;ADD&lt;/h3&gt;

&lt;p&gt;ã€€ã€€è¯­æ³•ï¼š&lt;code&gt;ADD &amp;lt;src&amp;gt;... &amp;lt;dest&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€æ‹·è´æ–‡ä»¶æˆ–ç›®å½•åˆ°é•œåƒä¸­ã€‚src å¯ä»¥æ˜¯ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶æˆ–è€…æ˜¯ä¸€ä¸ªæœ¬åœ°å‹ç¼©æ–‡ä»¶ï¼Œå‹ç¼©æ–‡ä»¶ä¼šè‡ªåŠ¨è§£å‹ã€‚è¿˜å¯ä»¥æ˜¯ä¸€ä¸ª urlï¼Œå¦‚æœæŠŠ src å†™æˆä¸€ä¸ª urlï¼Œé‚£ä¹ˆ ADD å°±ç±»ä¼¼äº wget å‘½ä»¤ï¼Œç„¶åè‡ªåŠ¨ä¸‹è½½å’Œè§£å‹ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;ADD jdk-11.0.6_linux-x64_bin.tar.gz /usr/local/java
&lt;/code&gt;
&lt;/pre&gt;

&lt;h3 id=&quot;copy&quot;&gt;COPY&lt;/h3&gt;

&lt;p&gt;ã€€ã€€è¯­æ³•ï¼š&lt;code&gt;COPY &amp;lt;src&amp;gt;... &amp;lt;dest&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€æ‹·è´æ–‡ä»¶æˆ–ç›®å½•åˆ°é•œåƒä¸­ã€‚ç”¨æ³•åŒ ADDï¼Œåªæ˜¯ä¸æ”¯æŒè‡ªåŠ¨ä¸‹è½½å’Œè§£å‹ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;COPY jdk-11.0.6_linux-x64_bin.tar.gz /usr/local/java
&lt;/code&gt;
&lt;/pre&gt;

&lt;h3 id=&quot;expose&quot;&gt;EXPOSE&lt;/h3&gt;

&lt;p&gt;ã€€ã€€è¯­æ³•ï¼š&lt;code&gt;EXPOSE &amp;lt;port&amp;gt; [&amp;lt;port&amp;gt;/&amp;lt;protocol&amp;gt;...]&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€æš´éœ²å®¹å™¨è¿è¡Œæ—¶çš„ç›‘å¬ç«¯å£ç»™å¤–éƒ¨ï¼Œå¯ä»¥æŒ‡å®šç«¯å£æ˜¯ç›‘å¬ TCP è¿˜æ˜¯ UDPï¼Œå¦‚æœæœªæŒ‡å®šåè®®ï¼Œåˆ™é»˜è®¤ä¸º TCPã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;EXPOSE 80 443 8080/tcp
&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;å¦‚æœæƒ³ä½¿å¾—å®¹å™¨ä¸å®¿ä¸»æœºçš„ç«¯å£æœ‰æ˜ å°„å…³ç³»ï¼Œå¿…é¡»åœ¨å®¹å™¨å¯åŠ¨çš„æ—¶å€™åŠ ä¸Š -P å‚æ•°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;env&quot;&gt;ENV&lt;/h3&gt;

&lt;p&gt;ã€€ã€€è¯­æ³•ï¼š&lt;code&gt;ENV &amp;lt;key&amp;gt; &amp;lt;value&amp;gt;&lt;/code&gt; æ·»åŠ å•ä¸ªï¼Œ&lt;code&gt;ENV &amp;lt;key&amp;gt;=&amp;lt;value&amp;gt; ...&lt;/code&gt; æ·»åŠ å¤šä¸ªã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€è®¾ç½®å®¹å™¨å†…ç¯å¢ƒå˜é‡ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;ENV JAVA_HOME /usr/local/java/jdk-11.0.6/
&lt;/code&gt;
&lt;/pre&gt;

&lt;h3 id=&quot;cmd&quot;&gt;CMD&lt;/h3&gt;

&lt;p&gt;ã€€ã€€è¯­æ³•ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;CMD [&quot;executable&quot;,&quot;param1&quot;,&quot;param2&quot;]&lt;/code&gt;ï¼Œæ¯”å¦‚ï¼š&lt;code&gt;CMD [&quot;/usr/local/tomcat/bin/catalina.sh&quot;, &quot;start&quot;]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;CMD [&quot;param1&quot;,&quot;param2&quot;]&lt;/code&gt; ï¼Œæ¯”å¦‚ï¼š&lt;code&gt;CMD [ &quot;echo&quot;, &quot;$JAVA_HOME&quot; ]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;CMD command param1 param2&lt;/code&gt;ï¼Œæ¯”å¦‚ï¼š&lt;code&gt;CMD echo $JAVA_HOME&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ã€€ã€€å¯åŠ¨å®¹å™¨æ—¶æ‰§è¡Œçš„ Shell å‘½ä»¤ã€‚åœ¨ Dockerfile ä¸­åªèƒ½æœ‰ä¸€æ¡ CMD æŒ‡ä»¤ã€‚å¦‚æœè®¾ç½®äº†å¤šæ¡ CMDï¼Œåªæœ‰æœ€åä¸€æ¡ CMD ä¼šç”Ÿæ•ˆã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;CMD ehco $JAVA_HOME
&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;ã€€ã€€å¦‚æœåˆ›å»ºå®¹å™¨çš„æ—¶å€™æŒ‡å®šäº†å‘½ä»¤ï¼Œåˆ™ CMD å‘½ä»¤ä¼šè¢«æ›¿ä»£ã€‚å‡å¦‚é•œåƒå« &lt;code&gt;centos:7&lt;/code&gt;ï¼Œåˆ›å»ºå®¹å™¨æ—¶å‘½ä»¤æ˜¯ï¼š&lt;code&gt;docker run -it --name centos7 centos:7 echo &quot;helloworld&quot;&lt;/code&gt; æˆ–è€… &lt;code&gt;docker run -it --name centos7 centos:7 /bin/bash&lt;/code&gt;ï¼Œå°±ä¸ä¼šè¾“å‡º &lt;code&gt;$JAVA_HOME&lt;/code&gt; çš„ç¯å¢ƒå˜é‡ä¿¡æ¯äº†ï¼Œå› ä¸º CMD å‘½ä»¤è¢« &lt;code&gt;echo &quot;helloworld&quot;&lt;/code&gt;ã€&lt;code&gt;/bin/bash&lt;/code&gt; è¦†ç›–äº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;entrypoint&quot;&gt;ENTRYPOINT&lt;/h3&gt;

&lt;p&gt;ã€€ã€€è¯­æ³•ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;ENTRYPOINT [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;]&lt;/code&gt;ï¼Œæ¯”å¦‚ï¼š&lt;code&gt;ENTRYPOINT [&quot;/usr/local/tomcat/bin/catalina.sh&quot;, &quot;start&quot;]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ENTRYPOINT command param1 param2&lt;/code&gt;ï¼Œæ¯”å¦‚ï¼š&lt;code&gt;ENTRYPOINT ehco $JAVA_HOME&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ã€€ã€€å¯åŠ¨å®¹å™¨æ—¶æ‰§è¡Œçš„ Shell å‘½ä»¤ï¼ŒåŒ CMD ç±»ä¼¼ï¼Œä¸ä¼šè¢« docker run å‘½ä»¤è¡ŒæŒ‡å®šçš„å‚æ•°æ‰€è¦†ç›–ã€‚åœ¨ Dockerfile ä¸­åªèƒ½æœ‰ä¸€æ¡ ENTRYPOINT æŒ‡ä»¤ã€‚å¦‚æœè®¾ç½®äº†å¤šæ¡ ENTRYPOINTï¼Œåªæœ‰æœ€åä¸€æ¡ ENTRYPOINT ä¼šç”Ÿæ•ˆã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;ENTRYPOINT ehco $JAVA_HOME
&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote&gt;
&lt;ul&gt;&lt;li&gt;å¦‚æœåœ¨ Dockerfile ä¸­åŒæ—¶å†™äº† ENTRYPOINT å’Œ CMDï¼Œå¹¶ä¸” CMD æŒ‡ä»¤ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¯æ‰§è¡Œå‘½ä»¤ï¼Œé‚£ä¹ˆ CMD æŒ‡å®šçš„å†…å®¹å°†ä¼šä½œä¸º ENTRYPOINT çš„å‚æ•°ï¼›&lt;/li&gt;
&lt;li&gt;å¦‚æœåœ¨ Dockerfile ä¸­åŒæ—¶å†™äº† ENTRYPOINT å’Œ CMDï¼Œå¹¶ä¸” CMD æ˜¯ä¸€ä¸ªå®Œæ•´çš„æŒ‡ä»¤ï¼Œé‚£ä¹ˆå®ƒä»¬ä¸¤ä¸ªä¼šäº’ç›¸è¦†ç›–ï¼Œè°åœ¨æœ€åè°ç”Ÿæ•ˆ&lt;/li&gt;
&lt;/ul&gt;&lt;/blockquote&gt;

&lt;h3 id=&quot;workdir&quot;&gt;WORKDIR&lt;/h3&gt;

&lt;p&gt;ã€€ã€€è¯­æ³•ï¼š&lt;code&gt;WORKDIR /path/to/workdir&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä¸º RUNã€CMDã€ENTRYPOINT ä»¥åŠ COPY å’Œ AND è®¾ç½®å·¥ä½œç›®å½•ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;WORKDIR /usr/local
&lt;/code&gt;
&lt;/pre&gt;

&lt;h3 id=&quot;volume&quot;&gt;VOLUME&lt;/h3&gt;

&lt;p&gt;ã€€ã€€æŒ‡å®šå®¹å™¨æŒ‚è½½ç‚¹åˆ°å®¿ä¸»æœºè‡ªåŠ¨ç”Ÿæˆçš„ç›®å½•æˆ–å…¶ä»–å®¹å™¨ã€‚ä¸€èˆ¬çš„ä½¿ç”¨åœºæ™¯ä¸ºéœ€è¦æŒä¹…åŒ–å­˜å‚¨æ•°æ®æ—¶ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;# å®¹å™¨çš„ /var/lib/mysql ç›®å½•ä¼šåœ¨è¿è¡Œæ—¶è‡ªåŠ¨æŒ‚è½½ä¸ºåŒ¿åå·ï¼ŒåŒ¿åå·åœ¨å®¿ä¸»æœºçš„ /var/lib/docker/volumes ç›®å½•ä¸‹
VOLUME [&quot;/var/lib/mysql&quot;]
&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;ä¸€èˆ¬ä¸ä¼šåœ¨ Dockerfile ä¸­ç”¨åˆ°ï¼Œæ›´å¸¸è§çš„è¿˜æ˜¯åœ¨ docker run çš„æ—¶å€™é€šè¿‡ -v æŒ‡å®šæ•°æ®å·ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;æ„å»ºé•œåƒ&quot;&gt;æ„å»ºé•œåƒ&lt;/h2&gt;

&lt;p&gt;ã€€ã€€Dockerfile æ–‡ä»¶ç¼–å†™å¥½ä»¥åï¼ŒçœŸæ­£æ„å»ºé•œåƒæ—¶éœ€è¦é€šè¿‡ &lt;code&gt;docker build&lt;/code&gt; å‘½ä»¤ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€&lt;code&gt;docker build&lt;/code&gt; å‘½ä»¤ç”¨äºä½¿ç”¨ &lt;code&gt;Dockerfile&lt;/code&gt; åˆ›å»ºé•œåƒã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;# ä½¿ç”¨å½“å‰ç›®å½•çš„ Dockerfile åˆ›å»ºé•œåƒ
docker build -t mycentos:7 .
# é€šè¿‡ -f Dockerfile æ–‡ä»¶çš„ä½ç½®åˆ›å»ºé•œåƒ
docker build -f /usr/local/dockerfile/Dockerfile -t mycentos:7 .
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;-f&lt;/code&gt;ï¼šæŒ‡å®šè¦ä½¿ç”¨çš„ Dockerfile è·¯å¾„ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--tag, -t&lt;/code&gt;ï¼šé•œåƒçš„åå­—åŠæ ‡ç­¾ï¼Œå¯ä»¥åœ¨ä¸€æ¬¡æ„å»ºä¸­ä¸ºä¸€ä¸ªé•œåƒè®¾ç½®å¤šä¸ªæ ‡ç­¾ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;å…³äº--ç†è§£&quot;&gt;å…³äº . ç†è§£&lt;/h3&gt;

&lt;p&gt;ã€€ã€€æˆ‘ä»¬åœ¨ä½¿ç”¨ &lt;code&gt;docker build&lt;/code&gt; å‘½ä»¤å»æ„å»ºé•œåƒæ—¶ï¼Œå¾€å¾€ä¼šçœ‹åˆ°å‘½ä»¤æœ€åä¼šæœ‰ä¸€ä¸ª &lt;code&gt;.&lt;/code&gt; å·ã€‚å®ƒç©¶ç«Ÿæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ã€€ã€€å¾ˆå¤šäººä»¥ä¸ºæ˜¯ç”¨æ¥æŒ‡å®š &lt;code&gt;Dockerfile&lt;/code&gt; æ–‡ä»¶æ‰€åœ¨çš„ä½ç½®çš„ï¼Œä½†å…¶å® &lt;code&gt;-f&lt;/code&gt; å‚æ•°æ‰æ˜¯ç”¨æ¥æŒ‡å®š &lt;code&gt;Dockerfile&lt;/code&gt; çš„è·¯å¾„çš„ï¼Œé‚£ä¹ˆ &lt;code&gt;.&lt;/code&gt; å·ç©¶ç«Ÿæ˜¯ç”¨æ¥åšä»€ä¹ˆçš„å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ã€€ã€€&lt;code&gt;Docker&lt;/code&gt; åœ¨è¿è¡Œæ—¶åˆ†ä¸º &lt;code&gt;Docker å¼•æ“ï¼ˆæœåŠ¡ç«¯å®ˆæŠ¤è¿›ç¨‹ï¼‰&lt;/code&gt; å’Œ &lt;code&gt;å®¢æˆ·ç«¯å·¥å…·&lt;/code&gt;ï¼Œæˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨å„ç§ &lt;code&gt;docker å‘½ä»¤&lt;/code&gt;ï¼Œå…¶å®å°±æ˜¯åœ¨ä½¿ç”¨ &lt;code&gt;å®¢æˆ·ç«¯å·¥å…·&lt;/code&gt; ä¸ &lt;code&gt;Docker å¼•æ“&lt;/code&gt; è¿›è¡Œäº¤äº’ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€å½“æˆ‘ä»¬ä½¿ç”¨ &lt;code&gt;docker build&lt;/code&gt; å‘½ä»¤æ¥æ„å»ºé•œåƒæ—¶ï¼Œè¿™ä¸ªæ„å»ºè¿‡ç¨‹å…¶å®æ˜¯åœ¨ &lt;code&gt;Docker å¼•æ“&lt;/code&gt; ä¸­å®Œæˆçš„ï¼Œè€Œä¸æ˜¯åœ¨æœ¬æœºç¯å¢ƒã€‚å¦‚æœåœ¨ &lt;code&gt;Dockerfile&lt;/code&gt; ä¸­ä½¿ç”¨äº†ä¸€äº› &lt;code&gt;ADD&lt;/code&gt; ç­‰æŒ‡ä»¤æ¥æ“ä½œæ–‡ä»¶ï¼Œå¦‚ä½•è®© &lt;code&gt;Docker å¼•æ“&lt;/code&gt; è·å–åˆ°è¿™äº›æ–‡ä»¶å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ã€€ã€€è¿™é‡Œå°±æœ‰äº†ä¸€ä¸ª &lt;code&gt;é•œåƒæ„å»ºä¸Šä¸‹æ–‡&lt;/code&gt; çš„æ¦‚å¿µï¼Œå½“æ„å»ºçš„æ—¶å€™ï¼Œç”±ç”¨æˆ·æŒ‡å®šæ„å»ºé•œåƒæ—¶çš„ä¸Šä¸‹æ–‡è·¯å¾„ï¼Œè€Œ &lt;code&gt;docker build&lt;/code&gt; ä¼šå°†è¿™ä¸ªè·¯å¾„ä¸‹æ‰€æœ‰çš„æ–‡ä»¶éƒ½æ‰“åŒ…ä¸Šä¼ ç»™ &lt;code&gt;Docker å¼•æ“&lt;/code&gt;ï¼Œå¼•æ“å†…å°†è¿™äº›å†…å®¹å±•å¼€åï¼Œå°±èƒ½è·å–åˆ°ä¸Šä¸‹æ–‡ä¸­çš„æ–‡ä»¶äº†ã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€ä¸¾ä¸ªæ —å­ï¼šæˆ‘çš„å®¿ä¸»æœº jdk æ–‡ä»¶åœ¨ /root ç›®å½•ä¸‹ï¼ŒDockerfile æ–‡ä»¶åœ¨ /usr/local/dockerfile ç›®å½•ä¸‹ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;ADD jdk-11.0.6_linux-x64_bin.tar.gz /usr/local/java
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€é‚£ä¹ˆæ„å»ºé•œåƒæ—¶çš„å‘½ä»¤å°±è¯¥è¿™æ ·å†™ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;docker build -f /usr/local/dockerfile/Dockerfile -t mycentos:7 /root
&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;ã€€ã€€å†ä¸¾ä¸ªæ —å­ï¼šæˆ‘çš„å®¿ä¸»æœº jdk æ–‡ä»¶å’Œ Dockerfile æ–‡ä»¶éƒ½åœ¨ /usr/local/dockerfile ç›®å½•ä¸‹ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;ADD jdk-11.0.6_linux-x64_bin.tar.gz /usr/local/java
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€é‚£ä¹ˆæ„å»ºé•œåƒæ—¶çš„å‘½ä»¤åˆ™è¿™æ ·å†™ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;docker build -f /usr/local/dockerfile/Dockerfile -t mycentos:7 .
&lt;/code&gt;
&lt;/pre&gt;

&lt;h2 id=&quot;dockerfile-å®è·µ&quot;&gt;Dockerfile å®è·µ&lt;/h2&gt;

&lt;p&gt;ã€€ã€€æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡åŸºç¡€é•œåƒ &lt;code&gt;centos:7&lt;/code&gt;ï¼Œåœ¨è¯¥é•œåƒä¸­å®‰è£… jdk å’Œ tomcat ä»¥åå°†å…¶åˆ¶ä½œä¸ºä¸€ä¸ªæ–°çš„é•œåƒ &lt;code&gt;mycentos:7&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€åˆ›å»ºç›®å½•ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;mkdir -p /usr/local/dockerfile
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€ç¼–å†™ Dockerfile æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;vi Dockerfile
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€Dockerfile æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;# æŒ‡æ˜æ„å»ºçš„æ–°é•œåƒæ˜¯æ¥è‡ªäº centos:7 åŸºç¡€é•œåƒ
FROM centos:7
# é€šè¿‡é•œåƒæ ‡ç­¾å£°æ˜äº†ä½œè€…ä¿¡æ¯
LABEL maintainer=&quot;mrhelloworld.com&quot;
# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /usr/local
# æ–°é•œåƒæ„å»ºæˆåŠŸä»¥ååˆ›å»ºæŒ‡å®šç›®å½•
RUN mkdir -p /usr/local/java &amp;amp;&amp;amp; mkdir -p /usr/local/tomcat
# æ‹·è´æ–‡ä»¶åˆ°é•œåƒä¸­å¹¶è§£å‹
ADD jdk-11.0.6_linux-x64_bin.tar.gz /usr/local/java
ADD apache-tomcat-9.0.37.tar.gz /usr/local/tomcat
# æš´éœ²å®¹å™¨è¿è¡Œæ—¶çš„ 8080 ç›‘å¬ç«¯å£ç»™å¤–éƒ¨
EXPOSE 8080
# è®¾ç½®å®¹å™¨å†… JAVA_HOME ç¯å¢ƒå˜é‡
ENV JAVA_HOME /usr/local/java/jdk-11.0.6/
ENV PATH $PATH:$JAVA_HOME/bin
# å¯åŠ¨å®¹å™¨æ—¶å¯åŠ¨ tomcat å¹¶æŸ¥çœ‹ tomcat æ—¥å¿—ä¿¡æ¯
ENTRYPOINT /usr/local/tomcat/apache-tomcat-9.0.37/bin/startup.sh &amp;amp;&amp;amp; tail -f /usr/local/tomcat/apache-tomcat-9.0.37/logs/catalina.out
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€æ„å»ºé•œåƒã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;docker build -f /usr/local/dockerfile/Dockerfile -t mycentos:7 /root/

[root@localhost ~]# docker build -f /usr/local/dockerfile/Dockerfile -t mycentos:7 /root/
Sending build context to Docker daemon  191.4MB
Error response from daemon: Dockerfile parse error line 1: unknown instruction: NTOS:7
[root@localhost ~]# vi /usr/local/dockerfile/Dockerfile 
[root@localhost ~]# vi /usr/local/dockerfile/Dockerfile 
[root@localhost ~]# docker build -f /usr/local/dockerfile/Dockerfile -t mycentos:7 /root/
Sending build context to Docker daemon  191.4MB
Step 1/10 : FROM centos:7
 ---&amp;gt; 7e6257c9f8d8
Step 2/10 : LABEL maintainer=&quot;mrhelloworld.com&quot;
 ---&amp;gt; Running in 4c561fed28a5
Removing intermediate container 4c561fed28a5
 ---&amp;gt; b536fc4e4290
Step 3/10 : WORKDIR /usr/local
 ---&amp;gt; Running in 50141816c10e
Removing intermediate container 50141816c10e
 ---&amp;gt; 030f9db632da
Step 4/10 : RUN mkdir -p /usr/local/java &amp;amp;&amp;amp; mkdir -p /usr/local/tomcat
 ---&amp;gt; Running in d1f8f4e008c8
Removing intermediate container d1f8f4e008c8
 ---&amp;gt; 68773de3525a
Step 5/10 : ADD jdk-11.0.6_linux-x64_bin.tar.gz /usr/local/java
 ---&amp;gt; 92f410a9e1ba
Step 6/10 : ADD apache-tomcat-9.0.37.tar.gz /usr/local/tomcat
 ---&amp;gt; 8e0576fccd4e
Step 7/10 : EXPOSE 8080
 ---&amp;gt; Running in bb6c4ef8f4e1
Removing intermediate container bb6c4ef8f4e1
 ---&amp;gt; 01edd4710cc1
Step 8/10 : ENV JAVA_HOME /usr/local/java/jdk-11.0.6/
 ---&amp;gt; Running in 722c2d369a2f
Removing intermediate container 722c2d369a2f
 ---&amp;gt; ef5172fb1dd6
Step 9/10 : ENV PATH $PATH:$JAVA_HOME/bin
 ---&amp;gt; Running in eaa287937565
Removing intermediate container eaa287937565
 ---&amp;gt; 0347db73b904
Step 10/10 : ENTRYPOINT /usr/local/tomcat/apache-tomcat-9.0.37/bin/startup.sh &amp;amp;&amp;amp; tail -f /usr/local/tomcat/apache-tomcat-9.0.37/logs/catalina.out
 ---&amp;gt; Running in 8f93d36f4de2
Removing intermediate container 8f93d36f4de2
 ---&amp;gt; 1674e0191270
Successfully built 1674e0191270
Successfully tagged mycentos:7
&lt;/code&gt;
&lt;/pre&gt;

&lt;h2 id=&quot;é•œåƒæ„å»ºå†å²&quot;&gt;é•œåƒæ„å»ºå†å²&lt;/h2&gt;

&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;docker history é•œåƒåç§°:æ ‡ç­¾|ID
docker history mycentos:7
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://mrhelloworld.com/resources/articles/docker/image-20200817200725799.png&quot; alt=&quot;&quot; title=&quot; &quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;

&lt;h2 id=&quot;ä½¿ç”¨æ„å»ºçš„é•œåƒåˆ›å»ºå®¹å™¨&quot;&gt;ä½¿ç”¨æ„å»ºçš„é•œåƒåˆ›å»ºå®¹å™¨&lt;/h2&gt;

&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;# åˆ›å»ºå®¹å™¨
docker run -di --name mycentos7 -p 8080:8080 mycentos:7
# è¿›å…¥å®¹å™¨
docker exec -it mycentos7 /bin/bash
# æµ‹è¯• java ç¯å¢ƒå˜é‡
[root@dcae87df010b /]# java -version
java version &quot;11.0.6&quot; 2020-01-14 LTS
Java(TM) SE Runtime Environment 18.9 (build 11.0.6+8-LTS)
Java HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.6+8-LTS, mixed mode)
# è®¿é—® http://192.168.10.10:8080/ çœ‹åˆ°é¡µé¢è¯´æ˜ç¯å¢ƒ OK!
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://mrhelloworld.com/resources/articles/docker/image-20200812190553942.png&quot; alt=&quot;&quot; title=&quot; &quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;å¤ªæ£’äº†ï¼ŒDockerfile æ„å»ºé•œåƒçš„æ–¹å¼ä½ ä¹Ÿå­¦ä¼šäº†ï¼Œå†æ¥å†å‰å­¦ä¹ ä¸€ä¸‹ Docker é•œåƒçš„å¤‡ä»½æ¢å¤è¿ç§»ï¼Œgo ~&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2020/5/1/171cf87f564bc82e?w=433&amp;amp;h=133&amp;amp;f=gif&amp;amp;s=333013&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡é‡‡ç”¨ &lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/4.0/&quot; target=&quot;_blank&quot;&gt;&lt;code&gt;çŸ¥è¯†å…±äº«ã€Œç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç¦æ­¢æ¼”ç» 4.0 å›½é™…ã€è®¸å¯åè®®&lt;/code&gt;&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¤§å®¶å¯ä»¥é€šè¿‡ &lt;a href=&quot;https://mrhelloworld.com/categories&quot; target=&quot;_blank&quot;&gt;&lt;code&gt;åˆ†ç±»&lt;/code&gt;&lt;/a&gt; æŸ¥çœ‹æ›´å¤šå…³äº &lt;a href=&quot;https://mrhelloworld.com/categories/docker&quot; target=&quot;_blank&quot;&gt;&lt;code&gt;Docker&lt;/code&gt;&lt;/a&gt; çš„æ–‡ç« ã€‚&lt;/p&gt;

&lt;p&gt;ğŸ¤— æ‚¨çš„&lt;code&gt;ç‚¹èµ&lt;/code&gt;å’Œ&lt;code&gt;è½¬å‘&lt;/code&gt;æ˜¯å¯¹æˆ‘æœ€å¤§çš„æ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;ğŸ“¢ æ‰«ç å…³æ³¨ &lt;code&gt;å“ˆå–½æ²ƒå¾·å…ˆç”Ÿ&lt;/code&gt;ã€Œæ–‡æ¡£ + è§†é¢‘ã€æ¯ç¯‡æ–‡ç« éƒ½é…æœ‰ä¸“é—¨è§†é¢‘è®²è§£ï¼Œå­¦ä¹ æ›´è½»æ¾å™¢ ~&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2020/4/27/171b91f4ae03d737?w=500&amp;amp;h=500&amp;amp;f=gif&amp;amp;s=126591&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/713e7e596507416fb2388a84902a7d1d~tplv-k3u1fbpfcp-zoom-1.image&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Fri, 28 Aug 2020 00:23:00 +0000</pubDate>
<dc:creator>å“ˆå–½æ²ƒå¾·å…ˆç”Ÿ</dc:creator>
<og:description>åœ¨ Docker ä¸­æ„å»ºé•œåƒæœ€å¸¸ç”¨çš„æ–¹å¼ï¼Œå°±æ˜¯ä½¿ç”¨ Dockerfileã€‚Dockerfile æ˜¯ä¸€ä¸ªç”¨æ¥æ„å»ºé•œåƒçš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ–‡æœ¬å†…å®¹åŒ…å«äº†ä¸€æ¡æ¡æ„å»ºé•œåƒæ‰€éœ€çš„æŒ‡ä»¤å’Œè¯´æ˜ã€‚å®˜æ–¹æ–‡æ¡£ï¼šhttps://d</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/mrhelloworld/p/docker7.html</dc:identifier>
</item>
<item>
<title>ä¸€æ–‡å¸¦ä½ æ·±æ‰’ClassLoaderå†…æ ¸ï¼Œæ­å¼€å®ƒçš„ç¥ç§˜é¢çº±ï¼ - æˆ‘æ²¡æœ‰ä¸‰é¢—å¿ƒè„</title>
<link>http://www.cnblogs.com/wmyskxz/p/13575224.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/wmyskxz/p/13575224.html</guid>
<description>&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/wmyskxz/BlogImage01/%E4%B8%80%E6%96%87%E5%B8%A6%E4%BD%A0%E6%B7%B1%E6%89%92%E7%A5%9E%E7%A7%98ClassLoader%E5%86%85%E6%A0%B8/image-20200827234848003.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;ã€ŒMoreThanJavaã€&lt;/strong&gt; å®£æ‰¬çš„æ˜¯ &lt;strong&gt;ã€Œå­¦ä¹ ï¼Œä¸æ­¢ CODEã€&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœè§‰å¾— &lt;strong&gt;ã€Œä¸é”™ã€&lt;/strong&gt; çš„æœ‹å‹ï¼Œæ¬¢è¿ &lt;strong&gt;ã€Œå…³æ³¨ + ç•™è¨€ + åˆ†äº«ã€&lt;/strong&gt;ï¼Œæ–‡æœ«æœ‰å®Œæ•´çš„è·å–é“¾æ¥ï¼Œæ‚¨çš„æ”¯æŒæ˜¯æˆ‘å‰è¿›çš„æœ€å¤§çš„åŠ¨åŠ›ï¼&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ClassLoader å¯ä»¥è¯´æ˜¯ Java æœ€ä¸ºç¥ç§˜çš„åŠŸèƒ½ä¹‹ä¸€äº†ï¼Œå¥½åƒå¤§å®¶éƒ½çŸ¥é“æ€ä¹ˆå›äº‹å„¿ &lt;em&gt;(åŒäº²å§”æ´¾æ¨¡å‹å¥½åƒéƒ½éƒ½èƒ½è¯´å¾—å‡ºæ¥...)&lt;/em&gt;ï¼Œåˆéƒ½è¯´ä¸æ¸…æ¥šå…·ä½“æ˜¯æ€ä¹ˆä¸€å›äº‹ &lt;em&gt;(ä¸ºä»€ä¹ˆéœ€è¦éœ€è¦æœ‰ä»€ä¹ˆå®é™…ç”¨é€”å°±å¾ˆæ¨¡ç³Šäº†...)&lt;/em&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/wmyskxz/BlogImage01/%E4%B8%80%E6%96%87%E5%B8%A6%E4%BD%A0%E6%B7%B1%E6%89%92%E7%A5%9E%E7%A7%98ClassLoader%E5%86%85%E6%A0%B8/1598311905-57783.jpg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥æ·±åº¦æ‰’ä¸€æ‰’ï¼Œæ­å¼€å®ƒç¥ç§˜çš„é¢çº±ï¼&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/wmyskxz/BlogImage01/%E4%B8%80%E6%96%87%E5%B8%A6%E4%BD%A0%E6%B7%B1%E6%89%92%E7%A5%9E%E7%A7%98ClassLoader%E5%86%85%E6%A0%B8/006qOO1Xly1ghftzela9eg308c05sald.gif&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;

&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬çŸ¥é“ï¼ŒJava ä¸ºäº†å®ç° &lt;strong&gt;ã€Œä¸€æ¬¡ç¼–è¯‘ï¼Œåˆ°å¤„è¿è¡Œã€&lt;/strong&gt; çš„ç›®æ ‡ï¼Œé‡‡ç”¨äº†ä¸€ç§ç‰¹åˆ«çš„æ–¹æ¡ˆï¼šå…ˆ &lt;strong&gt;ç¼–è¯‘&lt;/strong&gt; ä¸º &lt;strong&gt;ä¸ä»»ä½•å…·ä½“åŠå…¶ç¯å¢ƒåŠæ“ä½œç³»ç»Ÿç¯å¢ƒæ— å…³çš„ä¸­é—´ä»£ç &lt;/strong&gt;ï¼ˆä¹Ÿå°±æ˜¯ &lt;code&gt;.class&lt;/code&gt; å­—èŠ‚ç æ–‡ä»¶ï¼‰ï¼Œç„¶åäº¤ç”±å„ä¸ªå¹³å°ç‰¹å®šçš„ Java è§£é‡Šå™¨ï¼ˆä¹Ÿå°±æ˜¯ JVMï¼‰æ¥è´Ÿè´£ &lt;strong&gt;è§£é‡Š&lt;/strong&gt; è¿è¡Œã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/wmyskxz/img/img/%E3%80%8CMoreThanJava%E3%80%8D%E6%9C%BA%E5%99%A8%E6%8C%87%E4%BB%A4%E5%88%B0%E6%B1%87%E7%BC%96%E5%86%8D%E5%88%B0%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/7896890-81a0bce7dbea21a5.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ClassLoader &lt;em&gt;(é¡¾åæ€ä¹‰å°±æ˜¯ç±»åŠ è½½å™¨)&lt;/em&gt; å°±æ˜¯é‚£ä¸ªæŠŠå­—èŠ‚ç äº¤ç»™ JVM çš„æ¬è¿å·¥ &lt;em&gt;ï¼ˆåŠ è½½è¿›å†…å­˜ï¼‰&lt;/em&gt;ã€‚å®ƒè´Ÿè´£å°† &lt;strong&gt;å­—èŠ‚ç å½¢å¼&lt;/strong&gt; çš„ Class è½¬æ¢æˆ JVM ä¸­ &lt;strong&gt;å†…å­˜å½¢å¼&lt;/strong&gt; çš„ Class å¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/wmyskxz/BlogImage01/%E4%B8%80%E6%96%87%E5%B8%A6%E4%BD%A0%E6%B7%B1%E6%89%92%E7%A5%9E%E7%A7%98ClassLoader%E5%86%85%E6%A0%B8/image-20200826073719796.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å­—èŠ‚ç å¯ä»¥æ˜¯æ¥è‡ªäºç£ç›˜ä¸Šçš„ &lt;code&gt;.class&lt;/code&gt; æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯ &lt;code&gt;jar&lt;/code&gt; åŒ…é‡Œçš„ &lt;code&gt;*.class&lt;/code&gt;ï¼Œç”šè‡³æ˜¯æ¥è‡ªè¿œç¨‹æœåŠ¡å™¨æä¾›çš„å­—èŠ‚æµã€‚&lt;strong&gt;å­—èŠ‚ç çš„æœ¬è´¨å…¶å®å°±æ˜¯ä¸€ä¸ªæœ‰ç‰¹å®šå¤æ‚æ ¼å¼çš„å­—èŠ‚æ•°ç»„ &lt;code&gt;byte[]&lt;/code&gt;ã€‚&lt;/strong&gt; &lt;em&gt;(ä»åé¢è§£æ ClassLoader ç±»ä¸­çš„æ–¹æ³•æ—¶æ›´èƒ½ä½“ä¼š)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/wmyskxz/BlogImage01/%E4%B8%80%E6%96%87%E5%B8%A6%E4%BD%A0%E6%B7%B1%E6%89%92%E7%A5%9E%E7%A7%98ClassLoader%E5%86%85%E6%A0%B8/image-20200825080559568.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¦å¤–ï¼Œç±»åŠ è½½å™¨ä¸å…‰å¯ä»¥æŠŠ Class åŠ è½½åˆ° JVM ä¹‹ä¸­å¹¶è§£ææˆ JVM ç»Ÿä¸€è¦æ±‚çš„å¯¹è±¡æ ¼å¼ï¼Œè¿˜æœ‰ä¸€ä¸ªé‡è¦çš„ä½œç”¨å°±æ˜¯ &lt;strong&gt;å®¡æŸ¥æ¯ä¸ªç±»åº”è¯¥ç”±è°åŠ è½½&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è€Œä¸”ï¼Œè¿™äº› Java ç±»ä¸ä¼šä¸€æ¬¡å…¨éƒ¨åŠ è½½åˆ°å†…å­˜ï¼Œè€Œæ˜¯åœ¨åº”ç”¨ç¨‹åºéœ€è¦æ—¶åŠ è½½ï¼Œè¿™ä¹Ÿæ˜¯éœ€è¦ç±»åŠ è½½å™¨çš„åœ°æ–¹ã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ä¸‹å°±æ˜¯ ClassLoader çš„ä¸»è¦æ–¹æ³•äº†ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/wmyskxz/BlogImage01/%E4%B8%80%E6%96%87%E5%B8%A6%E4%BD%A0%E6%B7%B1%E6%89%92%E7%A5%9E%E7%A7%98ClassLoader%E5%86%85%E6%A0%B8/image-20200827083357060.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;ul readability=&quot;10.5&quot;&gt;&lt;li readability=&quot;4&quot;&gt;
&lt;p&gt;&lt;code&gt;defineClass()&lt;/code&gt; ç”¨äºå°† &lt;code&gt;byte&lt;/code&gt; å­—èŠ‚æµè§£ææˆ JVM èƒ½å¤Ÿè¯†åˆ«çš„ Class å¯¹è±¡ã€‚æœ‰äº†è¿™ä¸ªæ–¹æ³•æ„å‘³ç€æˆ‘ä»¬ä¸ä»…å¯ä»¥é€šè¿‡ &lt;code&gt;.class&lt;/code&gt; æ–‡ä»¶å®ä¾‹åŒ–å¯¹è±¡ï¼Œè¿˜å¯ä»¥é€šè¿‡å…¶ä»–æ–¹å¼å®ä¾‹åŒ–å¯¹è±¡ï¼Œä¾‹å¦‚é€šè¿‡ç½‘ç»œæ¥æ”¶åˆ°ä¸€ä¸ªç±»çš„å­—èŠ‚ç ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;ï¼ˆæ³¨æ„ï¼Œå¦‚æœç›´æ¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•ç”Ÿæˆç±»çš„ Class å¯¹è±¡ï¼Œè¿™ä¸ªç±»çš„ Class å¯¹è±¡è¿˜æ²¡æœ‰ &lt;code&gt;resolve&lt;/code&gt;ï¼ŒJVM ä¼šåœ¨è¿™ä¸ªå¯¹è±¡çœŸæ­£å®ä¾‹åŒ–æ—¶æ‰è°ƒç”¨ &lt;code&gt;resolveClass()&lt;/code&gt; è¿›è¡Œé“¾æ¥ï¼‰&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;9&quot;&gt;
&lt;p&gt;&lt;code&gt;findClass()&lt;/code&gt; é€šå¸¸å’Œ &lt;code&gt;defineClass()&lt;/code&gt; ä¸€èµ·ä½¿ç”¨ï¼Œæˆ‘ä»¬éœ€è¦ç›´æ¥è¦†ç›– ClassLoader çˆ¶ç±»çš„ &lt;code&gt;findClass()&lt;/code&gt; æ–¹æ³•æ¥å®ç°ç±»çš„åŠ è½½è§„åˆ™ï¼Œä»è€Œå–å¾—è¦åŠ è½½ç±»çš„å­—èŠ‚ç ã€‚&lt;em&gt;(ä»¥ä¸‹æ˜¯ ClassLoader æºç )&lt;/em&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;protected Class&amp;lt;?&amp;gt; findClass(String name) throws ClassNotFoundException {
  throw new ClassNotFoundException(name);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚æœä½ ä¸æƒ³é‡æ–°å®šä¹‰åŠ è½½ç±»çš„è§„åˆ™ï¼Œä¹Ÿæ²¡æœ‰å¤æ‚çš„å¤„ç†é€»è¾‘ï¼Œåªæƒ³åœ¨è¿è¡Œæ—¶èƒ½å¤ŸåŠ è½½è‡ªå·±åˆ¶å®šçš„ä¸€ä¸ªç±»ï¼Œé‚£ä¹ˆä½ å¯ä»¥ç”¨ &lt;code&gt;this.getClass().getClassLoader().loadClass(&quot;class&quot;)&lt;/code&gt; è°ƒç”¨ ClassLoader çš„ &lt;code&gt;loadClass()&lt;/code&gt; æ–¹æ³•æ¥è·å–è¿™ä¸ªç±»çš„ Class å¯¹è±¡ï¼Œè¿™ä¸ª &lt;code&gt;loadClass()&lt;/code&gt; è¿˜æœ‰é‡è½½æ–¹æ³•ï¼Œä½ åŒæ ·å¯ä»¥å†³å®šå†ä»€ä¹ˆæ—¶å€™è§£æè¿™ä¸ªç±»ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;&lt;code&gt;loadClass()&lt;/code&gt; ç”¨äºæ¥å—ä¸€ä¸ªå…¨ç±»åï¼Œç„¶åè¿”å›ä¸€ä¸ª Class ç±»å‹çš„å¯¹è±¡ã€‚&lt;em&gt;ï¼ˆè¯¥æ–¹æ³•æºç è•´å«äº†è‘—åçš„åŒäº²å§”æ´¾æ¨¡å‹ï¼‰&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;&lt;code&gt;resolveClass()&lt;/code&gt; ç”¨äºå¯¹ Class è¿›è¡Œ &lt;strong&gt;é“¾æ¥&lt;/strong&gt;ï¼Œä¹Ÿå°±æ˜¯æŠŠå•ä¸€çš„ Class åŠ å…¥åˆ°æœ‰ç»§æ‰¿å…³ç³»çš„ç±»æ ‘ä¸­ã€‚å¦‚æœä½ æƒ³åœ¨ç±»è¢«åŠ è½½åˆ° JVM ä¸­æ—¶å°±è¢«é“¾æ¥ï¼ˆLinkï¼‰ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨è°ƒç”¨ &lt;code&gt;defineClass()&lt;/code&gt; ä¹‹åç´§æ¥ç€è°ƒç”¨ä¸€ä¸ª &lt;code&gt;resolveClass()&lt;/code&gt; æ–¹æ³•ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥é€‰æ‹©è®© JVM æ¥è§£å†³ä»€ä¹ˆæ—¶å€™æ‰é“¾æ¥è¿™ä¸ªç±»ï¼ˆé€šå¸¸æ˜¯çœŸæ­£è¢«å®å®ä¾‹åŒ–çš„æ—¶å€™ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ClassLoader æ˜¯ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒè¿˜æœ‰å¾ˆå¤šå­ç±»ï¼Œå¦‚æœæˆ‘ä»¬è¦å®ç°è‡ªå·±çš„ ClassLoaderï¼Œä¸€èˆ¬éƒ½ä¼šç»§æ‰¿ &lt;strong&gt;URLClassLoader&lt;/strong&gt; è¿™ä¸ªå­ç±»ï¼Œå› ä¸ºè¿™ä¸ªç±»å·²ç»å¸®æˆ‘ä»¬å®ç°äº†å¤§éƒ¨åˆ†å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ &lt;code&gt;java.net.URLClassLoader.findClass()&lt;/code&gt; æ–¹æ³•çš„å®ç°ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;// å…¥å‚ä¸º Class çš„ binary nameï¼Œå¦‚ java.lang.String
protected Class&amp;lt;?&amp;gt; findClass(final String name) throws ClassNotFoundException {
    // ä»¥ä¸Šä»£ç çœç•¥
  
    // é€šè¿‡ binary name ç”ŸæˆåŒ…è·¯å¾„ï¼Œå¦‚ java.lang.String -&amp;gt; java/lang/String.class
    String path = name.replace('.', '/').concat(&quot;.class&quot;);
    // æ ¹æ®åŒ…è·¯å¾„ï¼Œæ‰¾åˆ°è¯¥ Class çš„æ–‡ä»¶èµ„æº
    Resource res = ucp.getResource(path, false);
    if (res != null) {
        try {
           // è°ƒç”¨ defineClass ç”Ÿæˆ java.lang.Class å¯¹è±¡
            return defineClass(name, res);
        } catch (IOException e) {
            throw new ClassNotFoundException(name, e);
        }
    } else {
        return null;
    }
  
    // ä»¥ä¸‹ä»£ç çœç•¥
}
&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;ä»¥ä¸‹å°±æ˜¯ ClassLoader åŠ è½½ä¸€ä¸ª class æ–‡ä»¶åˆ° JVM æ—¶éœ€è¦ç»è¿‡çš„æ­¥éª¤ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/wmyskxz/BlogImage01/%E4%B8%80%E6%96%87%E5%B8%A6%E4%BD%A0%E6%B7%B1%E6%89%92%E7%A5%9E%E7%A7%98ClassLoader%E5%86%85%E6%A0%B8/image-20200827092015305.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;äº‹å®ä¸Šï¼Œæˆ‘ä»¬æ¯ä¸€æ¬¡åœ¨ IDEA ä¸­ç‚¹å‡»è¿è¡Œæ—¶ï¼ŒIDE éƒ½ä¼šé»˜è®¤æ›¿æˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹çš„å‘½ä»¤ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;javac Xxxx.java&lt;/code&gt; â¡ï¸ æ‰¾åˆ°æºæ–‡ä»¶ä¸­çš„ &lt;code&gt;public class&lt;/code&gt;ï¼Œå†æ‰¾ &lt;code&gt;public class&lt;/code&gt; å¼•ç”¨çš„å…¶ä»–ç±»ï¼ŒJava ç¼–è¯‘å™¨ä¼šæ ¹æ®æ¯ä¸€ä¸ªç±»ç”Ÿæˆä¸€ä¸ªå­—èŠ‚ç æ–‡ä»¶ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;java Xxxx&lt;/code&gt; â¡ï¸ æ‰¾åˆ°æ–‡ä»¶ä¸­çš„å”¯ä¸€ä¸»ç±» &lt;code&gt;public class&lt;/code&gt;ï¼Œå¹¶æ ¹æ® &lt;code&gt;public static&lt;/code&gt; å…³é”®å­—æ‰¾åˆ°è·Ÿä¸»ç±»å…³è”å¯æ‰§è¡Œçš„ &lt;code&gt;main&lt;/code&gt; æ–¹æ³• &lt;em&gt;ï¼ˆè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ &lt;code&gt;main&lt;/code&gt; æ–¹æ³•éœ€è¦è¢«å®šä¹‰ä¸º &lt;code&gt;public static void&lt;/code&gt; çš„åŸå› äº†â€”â€”æˆ‘ä»¬éœ€è¦åœ¨ç±»æ²¡æœ‰åŠ è½½æ—¶è®¿é—®ï¼‰&lt;/em&gt;ï¼Œå¼€å§‹æ‰§è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;åœ¨çœŸæ­£çš„è¿è¡Œ &lt;code&gt;main&lt;/code&gt; æ–¹æ³•ä¹‹å‰ï¼ŒJVM éœ€è¦ &lt;strong&gt;åŠ è½½ã€é“¾æ¥&lt;/strong&gt; ä»¥åŠ &lt;strong&gt;åˆå§‹åŒ–&lt;/strong&gt; ä¸Šè¿°çš„ Xxxx ç±»ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç¬¬ä¸€æ­¥ï¼šåŠ è½½ï¼ˆloadingï¼‰&quot;&gt;ç¬¬ä¸€æ­¥ï¼šåŠ è½½ï¼ˆLoadingï¼‰&lt;/h2&gt;
&lt;p&gt;è¿™ä¸€æ­¥æ˜¯è¯»å–åˆ°ç±»æ–‡ä»¶äº§ç”Ÿçš„äºŒè¿›åˆ¶æµï¼ˆ&lt;code&gt;findClass()&lt;/code&gt;ï¼‰ï¼Œå¹¶è½¬æ¢ä¸ºç‰¹å®šçš„æ•°æ®ç»“æ„ï¼ˆ&lt;code&gt;defineClass()&lt;/code&gt;ï¼‰ï¼Œåˆæ­¥æ ¡éªŒ &lt;code&gt;cafe babe&lt;/code&gt; é­”æ³•æ•° &lt;em&gt;ï¼ˆäºŒè¿›åˆ¶ä¸­å‰å››ä¸ªå­—èŠ‚ä¸º &lt;code&gt;0xCAFEBABE&lt;/code&gt; ç”¨æ¥æ ‡è¯†è¯¥æ–‡ä»¶æ˜¯ Java æ–‡ä»¶ï¼Œè¿™æ˜¯å¾ˆå¤šè½¯ä»¶çš„åšæ³•ï¼Œæ¯”å¦‚ &lt;code&gt;zipå‹ç¼©æ–‡ä»¶&lt;/code&gt;ï¼‰&lt;/em&gt;ã€å¸¸é‡æ± ã€æ–‡ä»¶é•¿åº¦ã€æ˜¯å¦æœ‰çˆ¶ç±»ç­‰ï¼Œç„¶ååœ¨ Java &lt;strong&gt;å †&lt;/strong&gt; ä¸­åˆ›å»ºå¯¹åº”ç±»çš„ &lt;code&gt;java.lang.Class&lt;/code&gt; å®ä¾‹ï¼Œç±»ä¸­å­˜å‚¨çš„å„éƒ¨åˆ†ä¿¡æ¯ä¹Ÿéœ€è¦å¯¹åº”æ”¾å…¥ &lt;strong&gt;è¿è¡Œæ—¶æ•°æ®åŒº&lt;/strong&gt; ä¸­ï¼ˆä¾‹å¦‚é™æ€å˜é‡ã€ç±»ä¿¡æ¯ç­‰æ”¾å…¥æ–¹æ³•åŒºï¼‰ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;6.1333333333333&quot;&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯ä¸€ä¸ª Class æ–‡ä»¶å…·æœ‰çš„åŸºæœ¬ç»“æ„çš„ç®€å•å›¾ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/wmyskxz/BlogImage01/%E4%B8%80%E6%96%87%E5%B8%A6%E4%BD%A0%E6%B7%B1%E6%89%92%E7%A5%9E%E7%A7%98ClassLoader%E5%86%85%E6%A0%B8/image-20200827093649056.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœå¯¹ Class æ–‡ä»¶æ›´å¤šç»†èŠ‚æ„Ÿå…´è¶£çš„å¯ä»¥è¿›ä¸€æ­¥é˜…è¯»ï¼š&lt;a href=&quot;https://juejin.im/post/6844904199617003528&quot;&gt;https://juejin.im/post/6844904199617003528&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬å¯èƒ½ä¼šæœ‰ä¸€ä¸ªç–‘é—®ï¼Œ&lt;strong&gt;ä¸ºä»€ä¹ˆ JVM å…è®¸è¿˜æ²¡æœ‰è¿›è¡ŒéªŒè¯ã€å‡†å¤‡å’Œè§£æçš„ç±»ä¿¡æ¯æ”¾å…¥æ–¹æ³•åŒºå‘¢ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”æ¡ˆæ˜¯åŠ è½½é˜¶æ®µå’Œé“¾æ¥é˜¶æ®µçš„éƒ¨åˆ†åŠ¨ä½œï¼ˆæ¯”å¦‚ä¸€éƒ¨åˆ†å­—èŠ‚ç æ–‡ä»¶æ ¼å¼éªŒè¯åŠ¨ä½œï¼‰æ˜¯ &lt;strong&gt;äº¤å‰è¿›è¡Œ&lt;/strong&gt; çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ &lt;strong&gt;åŠ è½½é˜¶æ®µè¿˜æ²¡å®Œæˆï¼Œé“¾æ¥é˜¶æ®µå¯èƒ½å·²ç»å¼€å§‹äº†&lt;/strong&gt;ã€‚ä½†è¿™äº›å¤¹æ‚åœ¨åŠ è½½é˜¶æ®µçš„åŠ¨ä½œï¼ˆéªŒè¯æ–‡ä»¶æ ¼å¼ç­‰ï¼‰ä»ç„¶å±äºé“¾æ¥æ“ä½œã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç¬¬äºŒæ­¥ï¼šé“¾æ¥ï¼ˆlinkingï¼‰&quot;&gt;ç¬¬äºŒæ­¥ï¼šé“¾æ¥ï¼ˆLinkingï¼‰&lt;/h2&gt;
&lt;p&gt;Link é˜¶æ®µåŒ…æ‹¬éªŒè¯ã€å‡†å¤‡ã€è§£æä¸‰ä¸ªæ­¥éª¤ã€‚ä¸‹é¢ğŸ‘‡æˆ‘ä»¬æ¥è¯¦ç»†è¯´è¯´ã€‚&lt;/p&gt;
&lt;h3 id=&quot;éªŒè¯ï¼šç¡®ä¿è¢«åŠ è½½çš„ç±»çš„æ­£ç¡®æ€§&quot;&gt;éªŒè¯ï¼šç¡®ä¿è¢«åŠ è½½çš„ç±»çš„æ­£ç¡®æ€§&lt;/h3&gt;
&lt;p&gt;éªŒè¯æ˜¯è¿æ¥é˜¶æ®µçš„ç¬¬ä¸€æ­¥ï¼Œè¿™ä¸€é˜¶æ®µçš„ç›®çš„æ˜¯ &lt;strong&gt;ä¸ºäº†ç¡®ä¿ Class æ–‡ä»¶çš„å­—èŠ‚æµä¸­åŒ…å«çš„ä¿¡æ¯ç¬¦åˆå½“å‰è™šæ‹Ÿæœºçš„è¦æ±‚ï¼Œå¹¶ä¸”ä¸ä¼šå±å®³è™šæ‹Ÿæœºè‡ªèº«çš„å®‰å…¨&lt;/strong&gt;ã€‚éªŒè¯é˜¶æ®µå¤§è‡´ä¼šå®Œæˆ &lt;code&gt;4&lt;/code&gt; ä¸ªé˜¶æ®µçš„æ£€éªŒåŠ¨ä½œï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;æ–‡ä»¶æ ¼å¼éªŒè¯ï¼š&lt;/strong&gt; éªŒè¯å­—èŠ‚æµæ˜¯å¦ç¬¦åˆ Class æ–‡ä»¶æ ¼å¼çš„è§„èŒƒï¼›ä¾‹å¦‚ï¼šæ˜¯å¦ä»¥ &lt;code&gt;0xCAFEBABE&lt;/code&gt; å¼€å¤´ã€ä¸»æ¬¡ç‰ˆæœ¬å·æ˜¯å¦åœ¨å½“å‰è™šæ‹Ÿæœºçš„å¤„ç†èŒƒå›´ä¹‹å†…ã€å¸¸é‡æ± ä¸­çš„å¸¸é‡æ˜¯å¦æœ‰ä¸è¢«æ”¯æŒçš„ç±»å‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…ƒæ•°æ®éªŒè¯ï¼š&lt;/strong&gt; å¯¹å­—èŠ‚ç æè¿°çš„ä¿¡æ¯è¿›è¡Œè¯­ä¹‰åˆ†æï¼ˆæ³¨æ„ï¼šå¯¹æ¯” &lt;code&gt;javac&lt;/code&gt; ç¼–è¯‘é˜¶æ®µçš„è¯­ä¹‰åˆ†æï¼‰ï¼Œä»¥ä¿è¯å…¶æè¿°çš„ä¿¡æ¯ç¬¦åˆ Java è¯­è¨€è§„èŒƒçš„è¦æ±‚ï¼›ä¾‹å¦‚ï¼šè¿™ä¸ªç±»æ˜¯å¦æœ‰çˆ¶ç±»ï¼Œé™¤äº† &lt;code&gt;java.lang.Object&lt;/code&gt; ä¹‹å¤–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­—èŠ‚ç éªŒè¯ï¼š&lt;/strong&gt; é€šè¿‡æ•°æ®æµå’Œæ§åˆ¶æµåˆ†æï¼Œç¡®å®šç¨‹åºè¯­ä¹‰æ˜¯åˆæ³•çš„ã€ç¬¦åˆé€»è¾‘çš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¬¦å·å¼•ç”¨éªŒè¯ï¼š&lt;/strong&gt; ç¡®ä¿è§£æåŠ¨ä½œèƒ½æ­£ç¡®æ‰§è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;éªŒè¯é˜¶æ®µæ˜¯éå¸¸é‡è¦çš„ï¼Œä½†ä¸æ˜¯å¿…é¡»çš„&lt;/strong&gt;ï¼Œå®ƒå¯¹ç¨‹åºè¿è¡ŒæœŸæ²¡æœ‰å½±å“ï¼Œå¦‚æœæ‰€å¼•ç”¨çš„ç±»ç»è¿‡åå¤éªŒè¯ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘é‡‡ç”¨ &lt;code&gt;-Xverifynone&lt;/code&gt; å‚æ•°æ¥å…³é—­å¤§éƒ¨åˆ†çš„ç±»éªŒè¯æªæ–½ï¼Œä»¥ç¼©çŸ­è™šæ‹Ÿæœºç±»åŠ è½½çš„æ—¶é—´ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å‡†å¤‡ï¼šä¸ºç±»çš„é™æ€å˜é‡åˆ†é…å†…å­˜ï¼Œå¹¶å°†å…¶åˆå§‹åŒ–ä¸ºé»˜è®¤å€¼&quot;&gt;å‡†å¤‡ï¼šä¸ºç±»çš„é™æ€å˜é‡åˆ†é…å†…å­˜ï¼Œå¹¶å°†å…¶åˆå§‹åŒ–ä¸ºé»˜è®¤å€¼&lt;/h3&gt;
&lt;p&gt;å‡†å¤‡é˜¶æ®µæ˜¯æ­£å¼ä¸ºç±»å˜é‡åˆ†é…å†…å­˜å¹¶è®¾ç½®ç±»å˜é‡åˆå§‹å€¼çš„é˜¶æ®µï¼Œè¿™äº›å†…å­˜éƒ½å°†åœ¨ &lt;strong&gt;æ–¹æ³•åŒº&lt;/strong&gt; ä¸­åˆ†é…ã€‚å¯¹äºè¯¥é˜¶æ®µæœ‰ä»¥ä¸‹å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š&lt;/p&gt;
&lt;ul readability=&quot;2&quot;&gt;&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;1ï¸âƒ£ è¿™æ—¶å€™è¿›è¡Œå†…å­˜åˆ†é…çš„ &lt;strong&gt;ä»…åŒ…æ‹¬ç±»å˜é‡&lt;/strong&gt;ï¼ˆstaticï¼‰ï¼Œè€Œä¸åŒ…æ‹¬å®ä¾‹å˜é‡ï¼Œå®ä¾‹å˜é‡ä¼šåœ¨å¯¹è±¡å®ä¾‹åŒ–æ—¶éšç€å¯¹è±¡ä¸€å—åˆ†é…åœ¨ Java å †ä¸­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;2ï¸âƒ£ è¿™é‡Œæ‰€è®¾ç½®çš„ &lt;strong&gt;åˆå§‹å€¼é€šå¸¸æƒ…å†µä¸‹æ˜¯æ•°æ®ç±»å‹é»˜è®¤çš„é›¶å€¼&lt;/strong&gt;ï¼ˆå¦‚ &lt;code&gt;0&lt;/code&gt;ã€&lt;code&gt;0L&lt;/code&gt;ã€&lt;code&gt;null&lt;/code&gt;ã€&lt;code&gt;false&lt;/code&gt;ç­‰ï¼‰ï¼Œè€Œä¸æ˜¯è¢«åœ¨ Java ä»£ç ä¸­è¢«æ˜¾å¼åœ°èµ‹äºˆçš„å€¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;3ï¸âƒ£ å¦‚æœç±»å­—æ®µçš„å­—æ®µå±æ€§è¡¨ä¸­å­˜åœ¨ ConstantValue å±æ€§ï¼Œå³ &lt;strong&gt;åŒæ—¶è¢« &lt;code&gt;final&lt;/code&gt; å’Œ &lt;code&gt;static&lt;/code&gt; ä¿®é¥°&lt;/strong&gt;ï¼Œé‚£ä¹ˆåœ¨å‡†å¤‡é˜¶æ®µå˜é‡ &lt;code&gt;value&lt;/code&gt; å°±ä¼šè¢«åˆå§‹åŒ–ä¸º ConstValue å±æ€§æ‰€æŒ‡å®šçš„å€¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;â¡ï¸ ä¾‹å¦‚ï¼Œå‡è®¾è¿™é‡Œæœ‰ä¸€ä¸ªç±»å˜é‡ &lt;code&gt;public static int value = 666;&lt;/code&gt;ï¼Œåœ¨å‡†å¤‡é˜¶æ®µæ—¶åˆå§‹å€¼æ˜¯ &lt;code&gt;0&lt;/code&gt; è€Œä¸æ˜¯ &lt;code&gt;666&lt;/code&gt;ï¼Œåœ¨ &lt;strong&gt;åˆå§‹åŒ–é˜¶æ®µ&lt;/strong&gt; æ‰ä¼šè¢«çœŸæ­£èµ‹å€¼ä¸º &lt;code&gt;666&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;â¡ï¸ å‡è®¾æ˜¯ä¸€ä¸ªé™æ€ç±»å˜é‡ &lt;code&gt;public static final int value = 666;&lt;/code&gt;ï¼Œåˆ™å†å‡†å¤‡é˜¶æ®µ JVM å°±å·²ç»èµ‹å€¼ä¸º &lt;code&gt;666&lt;/code&gt; äº†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;è§£æï¼šæŠŠç±»ä¸­çš„ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨ï¼ˆé‡è¦ï¼‰&quot;&gt;è§£æï¼šæŠŠç±»ä¸­çš„ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨ï¼ˆé‡è¦ï¼‰&lt;/h3&gt;
&lt;p&gt;è§£æé˜¶æ®µæ˜¯è™šæ‹Ÿæœºå°†å¸¸é‡æ± å†…çš„ &lt;strong&gt;ç¬¦å·å¼•ç”¨&lt;/strong&gt; æ›¿æ¢ä¸º &lt;strong&gt;ç›´æ¥å¼•ç”¨&lt;/strong&gt; çš„è¿‡ç¨‹ï¼Œè§£æåŠ¨ä½œä¸»è¦é’ˆå¯¹ç±»æˆ–æ¥å£ã€å­—æ®µã€ç±»æ–¹æ³•ã€æ¥å£æ–¹æ³•ã€æ–¹æ³•ç±»å‹ã€æ–¹æ³•å¥æŸ„å’Œè°ƒç”¨ç‚¹é™å®šç¬¦ &lt;code&gt;7&lt;/code&gt; ç±»ç¬¦å·å¼•ç”¨è¿›è¡Œã€‚&lt;/p&gt;
&lt;p&gt;â¡ï¸ &lt;strong&gt;ç¬¦å·å¼•ç”¨&lt;/strong&gt; çš„ä½œç”¨æ˜¯åœ¨ç¼–è¯‘çš„è¿‡ç¨‹ä¸­ï¼ŒJVM å¹¶ä¸çŸ¥é“å¼•ç”¨çš„å…·ä½“åœ°å€ï¼Œæ‰€ä»¥ç”¨ç¬¦å·å¼•ç”¨è¿›è¡Œä»£æ›¿ï¼Œè€Œåœ¨è§£æé˜¶æ®µå°†ä¼šå°†è¿™ä¸ªç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºçœŸæ­£çš„å†…å­˜åœ°å€ã€‚&lt;/p&gt;
&lt;p&gt;â¡ï¸ &lt;strong&gt;ç›´æ¥å¼•ç”¨&lt;/strong&gt; å¯ä»¥ç†è§£ä¸ºæŒ‡å‘ &lt;strong&gt;ç±»ã€å˜é‡ã€æ–¹æ³•&lt;/strong&gt; çš„æŒ‡é’ˆï¼ŒæŒ‡å‘ &lt;strong&gt;å®ä¾‹&lt;/strong&gt; çš„æŒ‡é’ˆå’Œä¸€ä¸ª &lt;strong&gt;é—´æ¥å®šä½&lt;/strong&gt; åˆ°å¯¹è±¡çš„å¯¹è±¡å¥æŸ„ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ç†è§£ğŸ‘†ä¸Šé¢ä¸¤ç§æ¦‚å¿µçš„åŒºåˆ«ï¼Œæ¥çœ‹ä¸€ä¸ªå®é™…çš„ä¾‹å­å§ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class Tester {

    public static void main(String[] args) {
        String str = &quot;å…³æ³¨ã€æˆ‘æ²¡æœ‰ä¸‰é¢—å¿ƒè„ã€‘ï¼Œå…³æ³¨æ›´å¤šç²¾å½©&quot;;
        System.out.println(str);
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬å…ˆåœ¨è¯¥ç±»åŒçº§ç›®å½•ä¸‹è¿è¡Œ &lt;code&gt;javac Tester&lt;/code&gt; ç¼–è¯‘æˆ &lt;code&gt;.class&lt;/code&gt; æ–‡ä»¶ç„¶åå†åˆ©ç”¨ &lt;code&gt;javap -verbose Tester&lt;/code&gt; æŸ¥çœ‹ç±»çš„è¯¦ç»†ä¿¡æ¯ &lt;em&gt;ï¼ˆä¸ºäº†èŠ‚çœç¯‡å¹…åªæˆªå–äº† &lt;code&gt;main&lt;/code&gt; æ–¹æ³•åç¼–è¯‘åçš„ä»£ç ï¼‰&lt;/em&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;// ä¸Šé¢æ˜¯ç±»çš„è¯¦ç»†ä¿¡æ¯çœç•¥...
{
        // .....
  public static void main(java.lang.String[]);
    descriptor: ([Ljava/lang/String;)V
    flags: (0x0009) ACC_PUBLIC, ACC_STATIC
    Code:
      stack=2, locals=2, args_size=1
         0: ldc           #7                  // String å…³æ³¨ã€æˆ‘æ²¡æœ‰ä¸‰é¢—å¿ƒè„ã€‘ï¼Œå…³æ³¨æ›´å¤šç²¾å½©
         2: astore_1
         3: getstatic     #9                  // Field java/lang/System.out:Ljava/io/PrintStream;
         6: aload_1
         7: invokevirtual #15                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V
        10: return
      LineNumberTable:
        line 4: 0
        line 5: 3
        line 6: 10
}
SourceFile: &quot;Tester.java&quot;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢ğŸ‘†å®šä¹‰çš„ &lt;code&gt;str&lt;/code&gt; å˜é‡åœ¨ç¼–è¯‘é˜¶æ®µä¼šè¢«è§£æç§°ä¸º &lt;strong&gt;ç¬¦å·å¼•ç”¨&lt;/strong&gt;ï¼Œç¬¦å·å¼•ç”¨çš„æ ‡å¿—æ˜¯ &lt;code&gt;astore_&amp;lt;n&amp;gt;&lt;/code&gt;ï¼Œè¿™é‡Œå°±æ˜¯ &lt;code&gt;astore_1&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;store_1&lt;/code&gt;çš„å«ä¹‰æ˜¯å°†æ“ä½œæ•°æ ˆé¡¶çš„ &lt;code&gt;å…³æ³¨ã€æˆ‘æ²¡æœ‰ä¸‰é¢—å¿ƒè„ã€‘ï¼Œå…³æ³¨æ›´å¤šç²¾å½©&lt;/code&gt; ä¿å­˜å›ç´¢å¼•ä¸º &lt;code&gt;1&lt;/code&gt; çš„å±€éƒ¨å˜é‡è¡¨ä¸­ï¼Œæ­¤æ—¶è®¿é—®å˜é‡ &lt;code&gt;str&lt;/code&gt; å°±ä¼šè¯»å–å±€éƒ¨å˜é‡è¡¨ç´¢å¼•å€¼ä¸º &lt;code&gt;1&lt;/code&gt; ä¸­çš„æ•°æ®ã€‚æ‰€ä»¥å±€éƒ¨å˜é‡ &lt;code&gt;str&lt;/code&gt; å°±æ˜¯ä¸€ä¸ªç¬¦å·å¼•ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;å†æ¥çœ‹å¦å¤–ä¸€ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class Tester {

    public static void main(String[] args) {
        System.out.println(&quot;å…³æ³¨ã€æˆ‘æ²¡æœ‰ä¸‰é¢—å¿ƒè„ã€‘ï¼Œå…³æ³¨æ›´å¤šç²¾å½©&quot;);
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™ä¸€æ®µä»£ç åç¼–è¯‘ä¹‹åå¾—åˆ°å¦‚ä¸‹çš„ä»£ç ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;// ä¸Šé¢æ˜¯ç±»çš„è¯¦ç»†ä¿¡æ¯çœç•¥...
{
  // ......
  public static void main(java.lang.String[]);
    descriptor: ([Ljava/lang/String;)V
    flags: (0x0009) ACC_PUBLIC, ACC_STATIC
    Code:
      stack=2, locals=1, args_size=1
         0: getstatic     #7                  // Field java/lang/System.out:Ljava/io/PrintStream;
         3: ldc           #13                 // String å…³æ³¨ã€æˆ‘æ²¡æœ‰ä¸‰é¢—å¿ƒè„ã€‘ï¼Œå…³æ³¨æ›´å¤šç²¾å½©
         5: invokevirtual #15                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V
         8: return
      LineNumberTable:
        line 4: 0
        line 5: 8
}
SourceFile: &quot;Tester.java&quot;

&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™é‡Œç›´æ¥ä½¿ç”¨äº† &lt;code&gt;ldc&lt;/code&gt; æŒ‡ä»¤å°† &lt;code&gt;å…³æ³¨ã€æˆ‘æ²¡æœ‰ä¸‰é¢—å¿ƒè„ã€‘ï¼Œå…³æ³¨æ›´å¤šç²¾å½©&lt;/code&gt; æ¨é€åˆ°äº†æ ˆï¼Œç´§æ¥ç€å°±æ˜¯è°ƒç”¨æŒ‡ä»¤ &lt;code&gt;invokevirtual&lt;/code&gt;ï¼Œå¹¶æ²¡æœ‰å°†å­—ç¬¦ä¸²å­˜å…¥å±€éƒ¨å˜é‡è¡¨ä¸­ï¼Œè¿™é‡Œçš„å­—ç¬¦ä¸²å°±æ˜¯ä¸€ä¸ª &lt;strong&gt;ç›´æ¥å¼•ç”¨&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç¬¬ä¸‰æ­¥ï¼šåˆå§‹åŒ–ï¼ˆinitializationï¼‰&quot;&gt;ç¬¬ä¸‰æ­¥ï¼šåˆå§‹åŒ–ï¼ˆInitializationï¼‰&lt;/h2&gt;
&lt;p&gt;åˆå§‹åŒ–ï¼Œä¸ºç±»çš„é™æ€å˜é‡èµ‹äºˆæ­£ç¡®çš„åˆå§‹å€¼ï¼ŒJVM è´Ÿè´£å¯¹ç±»è¿›è¡Œåˆå§‹åŒ–ï¼Œä¸»è¦å¯¹ç±»å˜é‡è¿›è¡Œåˆå§‹åŒ–ã€‚åœ¨ Java ä¸­å¯¹ç±»å˜é‡è¿›è¡Œåˆå§‹å€¼è®¾å®šæœ‰ä¸¤ç§æ–¹å¼ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;1ï¸âƒ£ å£°æ˜ç±»å˜é‡æ˜¯æŒ‡å®šåˆå§‹å€¼ï¼›&lt;/li&gt;
&lt;li&gt;2ï¸âƒ£ ä½¿ç”¨é™æ€ä»£ç å—ä¸ºç±»å˜é‡æŒ‡å®šåˆå§‹å€¼ï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;JVM åˆå§‹åŒ–æ­¥éª¤ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;1ï¸âƒ£ å‡å¦‚è¿™ä¸ªç±»è¿˜æ²¡æœ‰è¢«åŠ è½½å’Œè¿æ¥ï¼Œåˆ™ç¨‹åºå…ˆåŠ è½½å¹¶è¿æ¥è¯¥ç±»&lt;/li&gt;
&lt;li&gt;2ï¸âƒ£ å‡å¦‚è¯¥ç±»çš„ç›´æ¥çˆ¶ç±»è¿˜æ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œåˆ™å…ˆåˆå§‹åŒ–å…¶ç›´æ¥çˆ¶ç±»&lt;/li&gt;
&lt;li&gt;3ï¸âƒ£ å‡å¦‚ç±»ä¸­æœ‰åˆå§‹åŒ–è¯­å¥ï¼Œåˆ™ç³»ç»Ÿä¾æ¬¡æ‰§è¡Œè¿™äº›åˆå§‹åŒ–è¯­å¥&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;ç±»åˆå§‹åŒ–æ—¶æœº&lt;/strong&gt;ï¼šåªæœ‰å½“å¯¹ç±»çš„ä¸»åŠ¨ä½¿ç”¨çš„æ—¶å€™æ‰ä¼šå¯¼è‡´ç±»çš„åˆå§‹åŒ–ï¼Œç±»çš„ä¸»åŠ¨ä½¿ç”¨åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;åˆ›å»ºç±»çš„å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯ &lt;code&gt;new&lt;/code&gt; çš„æ–¹å¼&lt;/li&gt;
&lt;li&gt;è®¿é—®æŸä¸ªç±»æˆ–æ¥å£çš„é™æ€å˜é‡ï¼Œæˆ–è€…å¯¹è¯¥é™æ€å˜é‡èµ‹å€¼&lt;/li&gt;
&lt;li&gt;è°ƒç”¨ç±»çš„é™æ€æ–¹æ³•&lt;/li&gt;
&lt;li&gt;åå°„ï¼ˆå¦‚ &lt;code&gt;Class.forName(&quot;com.wmyskxz.Tester&quot;)&lt;/code&gt;ï¼‰&lt;/li&gt;
&lt;li&gt;åˆå§‹åŒ–æŸä¸ªç±»çš„å­ç±»ï¼Œåˆ™å…¶çˆ¶ç±»ä¹Ÿä¼šè¢«åˆå§‹åŒ–&lt;/li&gt;
&lt;li&gt;Java è™šæ‹Ÿæœºå¯åŠ¨æ—¶è¢«æ ‡æ˜ä¸ºå¯åŠ¨ç±»çš„ç±»ï¼Œç›´æ¥ä½¿ç”¨ &lt;code&gt;java.exe&lt;/code&gt; å‘½ä»¤æ¥è¿è¡ŒæŸä¸ªä¸»ç±»&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ JDK 7 æ–°åŠ å…¥çš„åŠ¨æ€è¯­è¨€æ”¯æŒæ—¶ï¼Œå¦‚æœä¸€ä¸ª &lt;code&gt;java.lang.invoke.MethodHanlde&lt;/code&gt; å®ä¾‹æœ€åçš„è§£æç»“æœä¸º &lt;code&gt;REF_getstatic&lt;/code&gt;ã€&lt;code&gt;REF_putstatic&lt;/code&gt;ã€&lt;code&gt;REF_invokeStatic&lt;/code&gt;ã€&lt;code&gt;REF_newInvokeSpecial&lt;/code&gt; å››ç§ç±»å‹çš„æ–¹æ³•å¥æŸ„æ—¶ï¼Œéƒ½éœ€è¦å…ˆåˆå§‹åŒ–è¯¥å¥æŸ„å¯¹åº”çš„ç±»&lt;/li&gt;
&lt;li&gt;æ¥å£ä¸­å®šä¹‰äº† JDK 8 æ–°åŠ å…¥çš„é»˜è®¤æ–¹æ³•ï¼ˆ&lt;code&gt;default&lt;/code&gt;ä¿®é¥°ç¬¦ï¼‰ï¼Œ&lt;strong&gt;å®ç°ç±»åœ¨åˆå§‹åŒ–ä¹‹å‰éœ€è¦å…ˆåˆå§‹åŒ–å…¶æ¥å£&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨ä¸Šé¢ğŸ‘†å·²ç»äº†è§£äº†ä¸€ä¸ªç±»æ˜¯å¦‚ä½•è¢«åŠ è½½è¿› JVM çš„â€”â€”ä¾é ç±»åŠ è½½å™¨â€”â€”åœ¨ Java è¯­è¨€ä¸­è‡ªå¸¦æœ‰ä¸‰ä¸ªç±»åŠ è½½å™¨ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;Bootstrap ClassLoader&lt;/strong&gt; æœ€é¡¶å±‚çš„åŠ è½½ç±»ï¼Œä¸»è¦åŠ è½½ &lt;strong&gt;æ ¸å¿ƒç±»åº“&lt;/strong&gt;ï¼Œ&lt;code&gt;%JRE_HOME%\lib&lt;/code&gt; ä¸‹çš„&lt;code&gt;rt.jar&lt;/code&gt;ã€&lt;code&gt;resources.jar&lt;/code&gt;ã€&lt;code&gt;charsets.jar&lt;/code&gt; å’Œ &lt;code&gt;class&lt;/code&gt; ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Extention ClassLoader&lt;/strong&gt; æ‰©å±•çš„ç±»åŠ è½½å™¨ï¼ŒåŠ è½½ç›®å½• &lt;code&gt;%JRE_HOME%\lib\ext&lt;/code&gt; ç›®å½•ä¸‹çš„ &lt;code&gt;jar&lt;/code&gt; åŒ…å’Œ &lt;code&gt;class&lt;/code&gt; æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Appclass Loader ä¹Ÿç§°ä¸º SystemAppClass&lt;/strong&gt; åŠ è½½å½“å‰åº”ç”¨çš„ &lt;code&gt;classpath&lt;/code&gt; çš„æ‰€æœ‰ç±»ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥ç®€å•äº†è§£ Java ä¸­è¿™äº›è‡ªå¸¦çš„ç±»åŠ è½½å™¨ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class PrintClassLoader {

    public static void main(String[] args) {
        printClassLoaders();
    }

    public static void printClassLoaders() {
        System.out.println(&quot;Classloader of this class:&quot;
            + PrintClassLoader.class.getClassLoader());
        System.out.println(&quot;Classloader of Logging:&quot;
            + com.sun.javafx.util.Logging.class.getClassLoader());
        System.out.println(&quot;Classloader of ArrayList:&quot;
            + java.util.ArrayList.class.getClassLoader());
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;ä¸Šæ–¹ç¨‹åºæ‰“å°è¾“å‡ºå¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;Classloader of this class:sun.misc.Launcher$AppClassLoader@18b4aac2
Classloader of Logging:sun.misc.Launcher$ExtClassLoader@60e53b93
Classloader of ArrayList:null
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚æˆ‘ä»¬æ‰€è§ï¼Œè¿™é‡Œåˆ†åˆ«å¯¹åº”ä¸‰ç§ä¸åŒç±»å‹çš„ç±»åŠ è½½å™¨ï¼šAppClassLoaderã€ExtClassLoader å’Œ BootstrapClassLoaderï¼ˆæ˜¾ç¤ºä¸º &lt;code&gt;null&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªå¾ˆå¥½çš„é—®é¢˜æ˜¯ï¼š&lt;strong&gt;Java ç±»æ˜¯ç”± &lt;code&gt;java.lang.ClassLoader&lt;/code&gt; å®ä¾‹åŠ è½½çš„ï¼Œä½†ç±»åŠ è½½å™¨æœ¬èº«ä¹Ÿæ˜¯ç±»ï¼Œé‚£ä¹ˆè°æ¥åŠ è½½ç±»åŠ è½½å™¨å‘¢ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å‡è£…ä¸çŸ¥é“ï¼Œå…ˆæ¥è·Ÿç€æºç ä¸€æ­¥ä¸€æ­¥æ¥çœ‹ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å…ˆæ¥çœ‹çœ‹-java-è™šæ‹Ÿæœºå…¥å£ä»£ç &quot;&gt;å…ˆæ¥çœ‹çœ‹ Java è™šæ‹Ÿæœºå…¥å£ä»£ç &lt;/h2&gt;
&lt;p&gt;åœ¨ JDK æºç  &lt;code&gt;sun.misc.Launcher&lt;/code&gt; ä¸­ï¼Œè•´å«äº† Java è™šæ‹Ÿæœºçš„å…¥å£æ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class Launcher {
    private static Launcher launcher = new Launcher();
    private static String bootClassPath =
        System.getProperty(&quot;sun.boot.class.path&quot;);

    public static Launcher getLauncher() {
        return launcher;
    }

    private ClassLoader loader;

    public Launcher() {
        // Create the extension class loader
        ClassLoader extcl;
        try {
            extcl = ExtClassLoader.getExtClassLoader();
        } catch (IOException e) {
            throw new InternalError(
                &quot;Could not create extension class loader&quot;, e);
        }

        // Now create the class loader to use to launch the application
        try {
            loader = AppClassLoader.getAppClassLoader(extcl);
        } catch (IOException e) {
            throw new InternalError(
                &quot;Could not create application class loader&quot;, e);
        }

        // è®¾ç½® AppClassLoader ä¸ºçº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ï¼Œè¿™ä¸ªæ–‡ç« åé¢éƒ¨åˆ†è®²è§£
        Thread.currentThread().setContextClassLoader(loader);
    }
    /*
     * Returns the class loader used to launch the main application.
     */
    public ClassLoader getClassLoader() {
        return loader;
    }
    /*
     * The class loader used for loading installed extensions.
     */
    static class ExtClassLoader extends URLClassLoader {}
                /**
     * The class loader used for loading from java.class.path.
     * runs in a restricted security context.
     */
    static class AppClassLoader extends URLClassLoader {}
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æºç æœ‰ç²¾ç®€ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å¾—åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;p&gt;1ï¸âƒ£ Launcher åˆå§‹åŒ–äº† ExtClassLoader å’Œ AppClassLoaderã€‚&lt;/p&gt;
&lt;p&gt;2ï¸âƒ£ Launcher æ²¡æœ‰çœ‹åˆ° Bootstrap ClassLoader çš„å½±å­ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªå«åš &lt;code&gt;bootClassPath&lt;/code&gt; çš„å˜é‡ï¼Œå¤§èƒ†ä¸€çŒœå°±æ˜¯ Bootstrap ClassLoader åŠ è½½çš„ &lt;code&gt;jar&lt;/code&gt; åŒ…çš„è·¯å¾„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;(ps: å¯ä»¥è‡ªå·±å°è¯•è¾“å‡ºä¸€ä¸‹ &lt;code&gt;System.getProperty(&quot;sun.boot.class.path&quot;)&lt;/code&gt; çš„å†…å®¹ï¼Œå®ƒæ­£å¥½å¯¹åº”äº† JDK ç›®å½• &lt;code&gt;lib&lt;/code&gt; å’Œ &lt;code&gt;classes&lt;/code&gt; ç›®å½•ä¸‹çš„ &lt;code&gt;jar&lt;/code&gt; åŒ…â€”â€”ä¹Ÿå°±æ˜¯é€šå¸¸ä½ é…ç½®ç¯å¢ƒå˜é‡æ—¶è®¾ç½®çš„ &lt;code&gt;%JAVA_HOME/lib&lt;/code&gt; çš„ç›®å½•äº†â€”â€”åŒæ ·çš„æ–¹å¼ä½ ä¹Ÿå¯ä»¥çœ‹çœ‹ Ext å’Œ App çš„æºç )&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;3ï¸âƒ£ ExtClassLoader å’Œ AppClassLoader éƒ½ç»§æ‰¿è‡ª URLClassLoaderï¼Œè¿›ä¸€æ­¥æŸ¥çœ‹ ClassLoader çš„ç»§æ‰¿æ ‘ï¼Œä¼ è¯´ä¸­çš„åŒäº²å§”æ´¾æ¨¡å‹ä¹Ÿå¹¶æ²¡æœ‰å‡ºç°ã€‚&lt;em&gt;ï¼ˆç”šè‡³çœ‹ä¸åˆ° Bootstrap ClassLoader çš„å½±å­ï¼ŒExt ä¹Ÿæ²¡æœ‰ç›´æ¥ç»§æ‰¿è‡ª App ç±»åŠ è½½å™¨ï¼‰&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/wmyskxz/BlogImage01/%E4%B8%80%E6%96%87%E5%B8%A6%E4%BD%A0%E6%B7%B1%E6%89%92%E7%A5%9E%E7%A7%98ClassLoader%E5%86%85%E6%A0%B8/image-20200827155234783.png&quot; alt=&quot;ClassLoader ç»§æ‰¿æ ‘&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;ï¼ˆâš ï¸æ³¨æ„ï¼Œè¿™é‡Œå¯ä»¥æ˜ç¡®çœ‹åˆ°æ¯ä¸€ä¸ª ClassLoader éƒ½æœ‰ä¸€ä¸ª &lt;code&gt;parent&lt;/code&gt; å˜é‡ï¼Œç”¨äºæ ‡è¯†è‡ªå·±çš„çˆ¶ç±»ï¼Œä¸‹é¢ğŸ‘‡è¯¦ç»†è¯´ï¼‰&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;4ï¸âƒ£ æ³¨æ„ä»¥ä¸‹ä»£ç ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;ClassLoader extcl;
        
extcl = ExtClassLoader.getExtClassLoader();

loader = AppClassLoader.getAppClassLoader(extcl);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åˆ†åˆ«è·Ÿè¸ªæŸ¥çœ‹åˆ°è¿™ä¸¤ä¸ª ClassLoader åˆå§‹åŒ–æ—¶çš„ä»£ç ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;// ä¸€ç›´è¿½è¸ªåˆ°æœ€é¡¶å±‚çš„ ClassLoader å®šä¹‰ï¼Œæ„é€ å™¨çš„ç¬¬äºŒä¸ªå‚æ•°æ ‡è¯†äº†ç±»åŠ è½½å™¨çš„çˆ¶ç±»
private ClassLoader(Void unused, ClassLoader parent) {
  this.parent = parent;
  // ä»£ç çœç•¥.....
}
// Ext è®¾ç½®è‡ªå·±çš„çˆ¶ç±»ä¸º null
public ExtClassLoader(File[] var1) throws IOException {
  super(getExtURLs(var1), (ClassLoader)null, Launcher.factory);
  SharedSecrets.getJavaNetAccess().getURLClassPath(this).initLookupCache(this);
}
// æ‰‹åŠ¨æŠŠ Ext è®¾ç½®ä¸º App çš„ parentï¼ˆè¿™é‡Œçš„ var2 æ˜¯ä¼ è¿›æ¥çš„ extc1ï¼‰
AppClassLoader(URL[] var1, ClassLoader var2) {
  super(var1, var2, Launcher.factory);
  this.ucp.initLookupCache(this);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç”±æ­¤ï¼Œæˆ‘ä»¬å¾—åˆ°äº†è¿™æ ·ä¸€ä¸ªç±»åŠ è½½å™¨çš„å…³ç³»å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/wmyskxz/BlogImage01/%E4%B8%80%E6%96%87%E5%B8%A6%E4%BD%A0%E6%B7%B1%E6%89%92%E7%A5%9E%E7%A7%98ClassLoader%E5%86%85%E6%A0%B8/image-20200827164809547.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;ç±»åŠ è½½å™¨çš„çˆ¶ç±»éƒ½æ¥è‡ªå“ªé‡Œï¼Ÿ&quot;&gt;ç±»åŠ è½½å™¨çš„çˆ¶ç±»éƒ½æ¥è‡ªå“ªé‡Œï¼Ÿ&lt;/h2&gt;
&lt;p&gt;å¥‡æ€ªï¼Œä¸ºä»€ä¹ˆ ExtClassLoader çš„ &lt;code&gt;parent&lt;/code&gt; æ˜æ˜æ˜¯ &lt;code&gt;null&lt;/code&gt;ï¼Œæˆ‘ä»¬å´ä¸€èˆ¬åœ°è®¤ä¸º Bootstrap ClassLoader æ‰æ˜¯ ExtClassLoader çš„çˆ¶åŠ è½½å™¨å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ç­”æ¡ˆçš„ä¸€éƒ¨åˆ†å°±è—åœ¨ &lt;code&gt;java.lang.ClassLoader.loadClass()&lt;/code&gt; æ–¹æ³•é‡Œé¢ï¼š&lt;strong&gt;ï¼ˆè¿™ä¹Ÿå°±æ˜¯è‘—åçš„ã€ŒåŒäº²å§”æ´¾æ¨¡å‹ã€ç°åœºäº†ï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;protected Class&amp;lt;?&amp;gt; loadClass(String name, boolean resolve)
  throws ClassNotFoundException
{
  synchronized (getClassLoadingLock(name)) {
    // é¦–å…ˆæ£€æŸ¥æ˜¯å¦å·²ç»åŠ è½½è¿‡äº†
    Class&amp;lt;?&amp;gt; c = findLoadedClass(name);
    if (c == null) {
      long t0 = System.nanoTime();
      try {
        if (parent != null) {
                                        // çˆ¶åŠ è½½å™¨ä¸ä¸ºç©ºåˆ™è°ƒç”¨çˆ¶åŠ è½½å™¨çš„ loadClass æ–¹æ³•
          c = parent.loadClass(name, false);
        } else {
          // çˆ¶åŠ è½½å™¨ä¸ºç©ºåˆ™è°ƒç”¨ Bootstrap ClassLoader
          c = findBootstrapClassOrNull(name);
        }
      } catch (ClassNotFoundException e) {
        // ClassNotFoundException thrown if class not found
        // from the non-null parent class loader
      }

      if (c == null) {
        // If still not found, then invoke findClass in order
        // to find the class.
        long t1 = System.nanoTime();
        // çˆ¶åŠ è½½å™¨æ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™è°ƒç”¨ findclass
        c = findClass(name);

        // this is the defining class loader; record the stats
        sun.misc.PerfCounter.getParentDelegationTime().addTime(t1 - t0);
        sun.misc.PerfCounter.getFindClassTime().addElapsedTimeFrom(t1);
        sun.misc.PerfCounter.getFindClasses().increment();
      }
    }
    if (resolve) {
      // è°ƒç”¨ resolveClass()
      resolveClass(c);
    }
    return c;
  }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä»£ç é€»è¾‘å¾ˆå¥½åœ°è§£é‡Šäº†åŒäº²å§”æ´¾çš„åŸç†ã€‚&lt;/p&gt;
&lt;p&gt;1ï¸âƒ£ å½“å‰ ClassLoader é¦–å…ˆä» &lt;strong&gt;è‡ªå·±å·²ç»åŠ è½½çš„ç±»ä¸­æŸ¥è¯¢æ˜¯å¦æ­¤ç±»å·²ç»åŠ è½½&lt;/strong&gt;ï¼Œå¦‚æœå·²ç»åŠ è½½åˆ™ç›´æ¥è¿”å›åŸæ¥å·²ç»åŠ è½½çš„ç±»ã€‚(æ¯ä¸ªç±»åŠ è½½å™¨éƒ½æœ‰è‡ªå·±çš„åŠ è½½ç¼“å­˜ï¼Œå½“ä¸€ä¸ªç±»è¢«åŠ è½½äº†ä»¥åå°±ä¼šæ”¾å…¥ç¼“å­˜ï¼Œç­‰ä¸‹æ¬¡åŠ è½½çš„æ—¶å€™å°±å¯ä»¥ç›´æ¥è¿”å›äº†ã€‚)&lt;/p&gt;
&lt;p&gt;2ï¸âƒ£ å½“å‰ ClassLoader çš„ç¼“å­˜ä¸­æ²¡æœ‰æ‰¾åˆ°è¢«åŠ è½½çš„ç±»çš„æ—¶å€™ï¼Œ&lt;strong&gt;å§”æ‰˜çˆ¶ç±»åŠ è½½å™¨å»åŠ è½½&lt;/strong&gt;ï¼Œçˆ¶ç±»åŠ è½½å™¨é‡‡ç”¨åŒæ ·çš„ç­–ç•¥ï¼Œé¦–å…ˆæŸ¥çœ‹è‡ªå·±çš„ç¼“å­˜ï¼Œç„¶åå§”æ‰˜çˆ¶ç±»çš„çˆ¶ç±»å»åŠ è½½ï¼Œä¸€ç›´åˆ° Bootstrap ClassLoaderã€‚ï¼ˆå½“æ‰€æœ‰çš„çˆ¶ç±»åŠ è½½å™¨éƒ½æ²¡æœ‰åŠ è½½çš„æ—¶å€™ï¼Œå†ç”±å½“å‰çš„ç±»åŠ è½½å™¨åŠ è½½ï¼Œå¹¶å°†å…¶æ”¾å…¥å®ƒè‡ªå·±çš„ç¼“å­˜ä¸­ï¼Œä»¥ä¾¿ä¸‹æ¬¡æœ‰åŠ è½½è¯·æ±‚çš„æ—¶å€™ç›´æ¥è¿”å›ã€‚ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/wmyskxz/BlogImage01/%E4%B8%80%E6%96%87%E5%B8%A6%E4%BD%A0%E6%B7%B1%E6%89%92%E7%A5%9E%E7%A7%98ClassLoader%E5%86%85%E6%A0%B8/image-20200827213241812.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œç­”æ¡ˆçš„å¦ä¸€éƒ¨åˆ†æ˜¯å› ä¸ºæœ€é«˜ä¸€å±‚çš„ç±»åŠ è½½å™¨ Bootstrap æ˜¯é€šè¿‡ C/C++ å®ç°çš„ï¼Œå¹¶ä¸å­˜åœ¨äº JVM ä½“ç³»å†… &lt;em&gt;ï¼ˆä¸æ˜¯ä¸€ä¸ª Java ç±»ï¼Œæ²¡åŠæ³•ç›´æ¥è¡¨ç¤ºä¸º ExtClassLoader çš„çˆ¶åŠ è½½å™¨ï¼‰&lt;/em&gt;ï¼Œæ‰€ä»¥è¾“å‡ºä¸º &lt;code&gt;null&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;ï¼ˆæˆ‘ä»¬å¯ä»¥å¾ˆè½»æ˜“è·Ÿè¸ªåˆ° &lt;code&gt;findBootstrapClass()&lt;/code&gt; æ–¹æ³•è¢« &lt;code&gt;native&lt;/code&gt; ä¿®é¥°ï¼š&lt;code&gt;private native Class&amp;lt;?&amp;gt; findBootstrapClass(String name);&lt;/code&gt;ï¼‰&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;â¡ï¸ OKï¼Œæˆ‘ä»¬ç†è§£äº†ä¸ºä»€ä¹ˆ ExtClassLoader çš„çˆ¶åŠ è½½å™¨ä¸ºä»€ä¹ˆæ˜¯è¡¨ç¤ºä¸º &lt;code&gt;null&lt;/code&gt; çš„ Bootstrap åŠ è½½å™¨ï¼Œé‚£æˆ‘ä»¬ &lt;strong&gt;è‡ªå·±å®ç°çš„ ClassLoader çˆ¶åŠ è½½å™¨åº”è¯¥æ˜¯è°å‘¢ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è§‚å¯Ÿä¸€ä¸‹ ClassLoader çš„æºç å°±çŸ¥é“äº†ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;protected ClassLoader(ClassLoader parent) {
    this(checkCreateClassLoader(), parent);
}
protected ClassLoader() {
    this(checkCreateClassLoader(), getSystemClassLoader());
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç±»åŠ è½½å™¨çš„ &lt;code&gt;parent&lt;/code&gt; çš„èµ‹å€¼æ˜¯åœ¨ ClassLoader å¯¹è±¡çš„æ„é€ æ–¹æ³•ä¸­ï¼Œå®ƒæœ‰ä¸¤ä¸ªæƒ…å†µï¼š&lt;/p&gt;
&lt;p&gt;1ï¸âƒ£ ç”±å¤–éƒ¨ç±»åˆ›å»º ClassLoader æ—¶ç›´æ¥æŒ‡å®šä¸€ä¸ª ClassLoader ä¸º &lt;code&gt;parent&lt;/code&gt;ï¼›&lt;/p&gt;
&lt;p&gt;2ï¸âƒ£ ç”± &lt;code&gt;getSystemClassLoader()&lt;/code&gt; æ–¹æ³•ç”Ÿæˆï¼Œä¹Ÿå°±æ˜¯åœ¨ &lt;code&gt;sun.misc.Laucher&lt;/code&gt; é€šè¿‡ &lt;code&gt;getClassLoader()&lt;/code&gt; è·å–ï¼Œä¹Ÿå°±æ˜¯ AppClassLoaderã€‚ç›´ç™½çš„è¯´ï¼Œä¸€ä¸ª ClassLoader åˆ›å»ºæ—¶å¦‚æœæ²¡æœ‰æŒ‡å®š &lt;code&gt;parent&lt;/code&gt;ï¼Œé‚£ä¹ˆå®ƒçš„ &lt;code&gt;parent&lt;/code&gt; é»˜è®¤å°±æ˜¯ AppClassLoaderã€‚ï¼ˆå»ºè®®å»çœ‹ä¸€ä¸‹æºç ï¼‰&lt;/p&gt;
&lt;h2 id=&quot;ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡å‘¢ï¼Ÿ&quot;&gt;ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡å‘¢ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼Œä¸»è¦æ˜¯ä¸ºäº† &lt;strong&gt;å®‰å…¨æ€§&lt;/strong&gt;ï¼Œé¿å…ç”¨æˆ·è‡ªå·±ç¼–å†™çš„ç±»åŠ¨æ€æ›¿æ¢ Java çš„ä¸€äº›æ ¸å¿ƒç±»ï¼Œæ¯”å¦‚ Stringï¼ŒåŒæ—¶ä¹Ÿ &lt;strong&gt;é¿å…äº†é‡å¤åŠ è½½&lt;/strong&gt;ï¼Œå› ä¸º JVM ä¸­åŒºåˆ†ä¸åŒç±»ï¼Œä¸ä»…ä»…æ˜¯æ ¹æ®ç±»åï¼Œ&lt;strong&gt;ç›¸åŒçš„ class æ–‡ä»¶è¢«ä¸åŒçš„ ClassLoader åŠ è½½å°±æ˜¯ä¸åŒçš„ä¸¤ä¸ªç±»&lt;/strong&gt;ï¼Œå¦‚æœç›¸äº’è½¬å‹çš„è¯ä¼šæŠ› &lt;code&gt;java.lang.ClassCaseException&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬è¦å®ç°è‡ªå·±çš„ç±»åŠ è½½å™¨ï¼Œä¸ç®¡ä½ æ˜¯ç›´æ¥å®ç°æŠ½è±¡ç±» ClassLoaderï¼Œè¿˜æ˜¯ç»§æ‰¿ URLClassLoader ç±»ï¼Œæˆ–è€…å…¶ä»–å­ç±»ï¼Œå®ƒçš„çˆ¶åŠ è½½å™¨éƒ½æ˜¯ AppClassLoaderã€‚&lt;/p&gt;
&lt;p&gt;å› ä¸ºä¸ç®¡è°ƒç”¨å“ªä¸ªçˆ¶ç±»æ„é€ å™¨ï¼Œåˆ›å»ºçš„å¯¹è±¡éƒ½å¿…é¡»æœ€ç»ˆè°ƒç”¨ &lt;code&gt;getSystemClassLoader()&lt;/code&gt; ä½œä¸ºçˆ¶åŠ è½½å™¨ &lt;em&gt;ï¼ˆæˆ‘ä»¬å·²ç»ä»ä¸Šé¢ğŸ‘†çš„æºç ä¸­çœ‹åˆ°äº†ï¼‰&lt;/em&gt;ã€‚è€Œè¯¥æ–¹æ³•æœ€ç»ˆè·å–åˆ°çš„æ­£æ˜¯ AppClassLoader &lt;em&gt;ï¼ˆåˆ«ç§° SystemClassLoaderï¼‰&lt;/em&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬ç†ŸçŸ¥çš„æœ€ç»ˆçš„åŒäº²å§”æ´¾æ¨¡å‹äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/wmyskxz/BlogImage01/%E4%B8%80%E6%96%87%E5%B8%A6%E4%BD%A0%E6%B7%B1%E6%89%92%E7%A5%9E%E7%A7%98ClassLoader%E5%86%85%E6%A0%B8/image-20200827215439538.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;

&lt;h2 id=&quot;ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦è‡ªå®šä¹‰ç±»åŠ è½½å™¨&quot;&gt;ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦è‡ªå®šä¹‰ç±»åŠ è½½å™¨&lt;/h2&gt;
&lt;p&gt;åœ¨å­¦ä¹ äº†ç±»åŠ è½½å™¨çš„å®ç°æœºåˆ¶ä¹‹åï¼Œæˆ‘ä»¬çŸ¥é“äº†åŒäº²å§”æ´¾æ¨¡å‹å¹¶éå¼ºåˆ¶æ¨¡å‹ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œåœ¨ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦è‡ªå®šä¹‰ç±»åŠ è½½å™¨å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;1ï¸âƒ£ &lt;strong&gt;éš”ç¦»åŠ è½½ç±»&lt;/strong&gt;ã€‚åœ¨æŸäº›æ¡†æ¶å†…è¿›è¡Œä¸­é—´ä»¶ä¸åº”ç”¨çš„æ¨¡å—éš”ç¦»ï¼ŒæŠŠç±»åŠ è½½å™¨åˆ°ä¸åŒçš„ç¯å¢ƒã€‚æ¯”å¦‚ï¼Œé˜¿é‡Œå†…æŸå®¹å™¨æ¡†æ¶é€šè¿‡è‡ªå®šä¹‰ç±»åŠ è½½å™¨ç¡®ä¿åº”ç”¨ä¸­ä¾èµ–çš„ &lt;code&gt;jar&lt;/code&gt; åŒ…ä¸ä¼šå½±å“åˆ°ä¸­é—´ä»¶è¿è¡Œæ—¶ä½¿ç”¨çš„ &lt;code&gt;jar&lt;/code&gt; åŒ…ã€‚&lt;/p&gt;
&lt;p&gt;2ï¸âƒ£ &lt;strong&gt;ä¿®æ”¹ç±»åŠ è½½æ–¹å¼&lt;/strong&gt;ã€‚ç±»çš„åŠ è½½æ¨¡å‹å¹¶éå¼ºåˆ¶ï¼Œé™¤äº† Bootstrap å¤–ï¼Œå…¶ä»–çš„åŠ è½½å¹¶éä¸€å®šè¦å¼•å…¥ï¼Œæˆ–è€…æ ¹æ®å®é™…æƒ…å†µåœ¨æŸä¸ªæ—¶é—´ç‚¹è¿›è¡ŒæŒ‰éœ€çš„åŠ¨æ€åŠ è½½ã€‚&lt;/p&gt;
&lt;p&gt;3ï¸âƒ£ &lt;strong&gt;æ‰©å±•åŠ è½½æº&lt;/strong&gt;ã€‚æ¯”å¦‚ä»æ•°æ®åº“ã€ç½‘ç»œï¼Œç”šè‡³æ˜¯ç”µè§†æœºé¡¶ç›’è¿›è¡ŒåŠ è½½ã€‚ï¼ˆä¸‹é¢ğŸ‘‡æˆ‘ä»¬ä¼šç¼–å†™ä¸€ä¸ªä»ç½‘ç»œåŠ è½½ç±»çš„ä¾‹å­ï¼‰&lt;/p&gt;
&lt;p&gt;4ï¸âƒ£ &lt;strong&gt;é˜²æ­¢æºç æ³„éœ²&lt;/strong&gt;ã€‚Java ä»£ç å®¹æ˜“è¢«ç¼–è¯‘å’Œç¯¡æ”¹ï¼Œå¯ä»¥è¿›è¡Œç¼–è¯‘åŠ å¯†ã€‚é‚£ä¹ˆç±»åŠ è½½å™¨ä¹Ÿéœ€è¦è‡ªå®šä¹‰ï¼Œè¿˜åŸåŠ å¯†çš„å­—èŠ‚ç ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä¸€ä¸ªå¸¸è§„çš„ä¾‹å­&quot;&gt;ä¸€ä¸ªå¸¸è§„çš„ä¾‹å­&lt;/h2&gt;
&lt;p&gt;å®ç°ä¸€ä¸ªè‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨æ¯”è¾ƒç®€å•ï¼šç»§æ‰¿ ClassLoaderï¼Œé‡å†™ &lt;code&gt;findClass()&lt;/code&gt; æ–¹æ³•ï¼Œè°ƒç”¨ &lt;code&gt;defineClass()&lt;/code&gt; æ–¹æ³•ï¼Œå°±å·®ä¸å¤šè¡Œäº†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;testerjava&quot;&gt;Tester.java&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬å…ˆæ¥ç¼–å†™ä¸€ä¸ªæµ‹è¯•ç”¨çš„ç±»æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class Tester {

    public void say() {
        System.out.println(&quot;å…³æ³¨ã€æˆ‘æ²¡æœ‰ä¸‰é¢—å¿ƒè„ã€‘ï¼Œè§£é”æ›´å¤šç²¾å½©ï¼&quot;);
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨åŒçº§ç›®å½•ä¸‹æ‰§è¡Œ &lt;code&gt;javac Tester.java&lt;/code&gt; å‘½ä»¤ï¼Œå¹¶æŠŠç¼–è¯‘åçš„ &lt;code&gt;Tester.class&lt;/code&gt; æ”¾åˆ°æŒ‡å®šçš„ç›®å½•ä¸‹ï¼ˆæˆ‘è¿™è¾¹ä¸ºäº†æ–¹ä¾¿å°±æ”¾åœ¨æ¡Œé¢ä¸Šå•¦ &lt;code&gt;/Users/wmyskxz/Desktop&lt;/code&gt;ï¼‰&lt;/p&gt;
&lt;h3 id=&quot;myclassloaderjava&quot;&gt;MyClassLoader.java&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬ç¼–å†™è‡ªå®šä¹‰ ClassLoader ä»£ç ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;

public class MyClassLoader extends ClassLoader {

    private final String mLibPath;

    public MyClassLoader(String path) {
        // TODO Auto-generated constructor stub
        mLibPath = path;
    }

    @Override
    protected Class&amp;lt;?&amp;gt; findClass(String name) throws ClassNotFoundException {
        // TODO Auto-generated method stub

        String fileName = getFileName(name);

        File file = new File(mLibPath, fileName);

        try {
            FileInputStream is = new FileInputStream(file);

            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            int len = 0;
            try {
                while ((len = is.read()) != -1) {
                    bos.write(len);
                }
            } catch (IOException e) {
                e.printStackTrace();
            }

            byte[] data = bos.toByteArray();
            is.close();
            bos.close();

            return defineClass(name, data, 0, data.length);

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return super.findClass(name);
    }

    // è·å–è¦åŠ è½½çš„ class æ–‡ä»¶å
    private String getFileName(String name) {
        // TODO Auto-generated method stub
        int index = name.lastIndexOf('.');
        if (index == -1) {
            return name + &quot;.class&quot;;
        } else {
            return name.substring(index + 1) + &quot;.class&quot;;
        }
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨ &lt;code&gt;findClass()&lt;/code&gt; æ–¹æ³•ä¸­å®šä¹‰äº†æŸ¥æ‰¾ class çš„æ–¹æ³•ï¼Œç„¶åæ•°æ®é€šè¿‡ &lt;code&gt;defineClass()&lt;/code&gt; ç”Ÿæˆäº† Class å¯¹è±¡ã€‚&lt;/p&gt;
&lt;h3 id=&quot;classloadertester-æµ‹è¯•ç±»&quot;&gt;ClassLoaderTester æµ‹è¯•ç±»&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬éœ€è¦åˆ é™¤åˆšæ‰åœ¨é¡¹ç›®ç›®å½•åˆ›å»ºçš„ &lt;code&gt;Tester.java&lt;/code&gt; å’Œç¼–è¯‘åçš„ &lt;code&gt;Tester.class&lt;/code&gt; æ–‡ä»¶æ¥è§‚å¯Ÿæ•ˆæœï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;

public class ClassLoaderTester {

    public static void main(String[] args) {
        // åˆ›å»ºè‡ªå®šä¹‰çš„ ClassLoader å¯¹è±¡
        MyClassLoader myClassLoader = new MyClassLoader(&quot;/Users/wmyskxz/Desktop&quot;);
        try {
            // åŠ è½½classæ–‡ä»¶
            Class&amp;lt;?&amp;gt; c = myClassLoader.loadClass(&quot;Tester&quot;);

            if(c != null){
                try {
                    Object obj = c.newInstance();
                    Method method = c.getDeclaredMethod(&quot;say&quot;,null);
                    //é€šè¿‡åå°„è°ƒç”¨Testç±»çš„sayæ–¹æ³•
                    method.invoke(obj, null);
                } catch (InstantiationException | IllegalAccessException
                    | NoSuchMethodException
                    | SecurityException |
                    IllegalArgumentException |
                    InvocationTargetException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;è¿è¡Œæµ‹è¯•ï¼Œæ­£å¸¸è¾“å‡ºï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;å…³æ³¨ã€æˆ‘æ²¡æœ‰ä¸‰é¢—å¿ƒè„ã€‘ï¼Œè§£é”æ›´å¤šç²¾å½©ï¼
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;åŠ å¯†è§£å¯†ç±»åŠ è½½å™¨&quot;&gt;åŠ å¯†è§£å¯†ç±»åŠ è½½å™¨&lt;/h2&gt;
&lt;p&gt;çªç ´äº† JDK ç³»ç»Ÿå†…ç½®åŠ è½½è·¯å¾„çš„é™åˆ¶ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç¼–å†™è‡ªå®šä¹‰çš„ ClassLoaderã€‚ä½ å®Œå…¨å¯ä»¥æŒ‰ç…§è‡ªå·±çš„æ„æ„¿è¿›è¡Œä¸šåŠ¡çš„å®šåˆ¶ï¼Œå°† ClassLoader ç©å‡ºèŠ±æ ·æ¥ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œä¸€ä¸ªåŠ å¯†è§£å¯†çš„ç±»åŠ è½½å™¨ã€‚ï¼ˆä¸æ¶‰åŠå®Œæ•´ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥æ¥è¯´ä¸€ä¸‹æ€è·¯å’Œå…³é”®ä»£ç ï¼‰&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œåœ¨ç¼–è¯‘ä¹‹åçš„å­—èŠ‚ç æ–‡ä»¶ä¸­åŠ¨ä¸€åŠ¨æ‰‹è„šï¼Œä¾‹å¦‚ï¼Œç»™æ–‡ä»¶æ¯ä¸€ä¸ª &lt;code&gt;byte&lt;/code&gt; å¼‚æˆ–ä¸€ä¸ªæ•°å­— 2ï¼šï¼ˆè¿™å°±ç®—æ˜¯æ¨¡æ‹ŸåŠ å¯†è¿‡ç¨‹ï¼‰&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;File file = new File(path);
try {
  FileInputStream fis = new FileInputStream(file);
  FileOutputStream fos = new FileOutputStream(path+&quot;en&quot;);
  int b = 0;
  int b1 = 0;
  try {
    while((b = fis.read()) != -1){
      // æ¯ä¸€ä¸ª byte å¼‚æˆ–ä¸€ä¸ªæ•°å­— 2
      fos.write(b ^ 2);
    }
    fos.close();
    fis.close();
  } catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
  }
} catch (FileNotFoundException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç„¶åæˆ‘ä»¬å†åœ¨ &lt;code&gt;findClass()&lt;/code&gt; ä¸­è‡ªå·±è§£å¯†ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;File file = new File(mLibPath,fileName);

try {
  FileInputStream is = new FileInputStream(file);

  ByteArrayOutputStream bos = new ByteArrayOutputStream();
  int len = 0;
  byte b = 0;
  try {
    while ((len = is.read()) != -1) {
      // å°†æ•°æ®å¼‚æˆ–ä¸€ä¸ªæ•°å­— 2 è¿›è¡Œè§£å¯†
      b = (byte) (len ^ 2);
      bos.write(b);
    }
  } catch (IOException e) {
    e.printStackTrace();
  }

  byte[] data = bos.toByteArray();
  is.close();
  bos.close();

  return defineClass(name,data,0,data.length);

} catch (IOException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;em&gt;ï¼ˆä»£ç å‡ ä¹ä¸ä¸Šé¢ğŸ‘†ä¸€ä¸ªä¾‹å­ç­‰åŒï¼Œæ‰€ä»¥åªè¯´ä¸€ä¸‹æ€è·¯å’Œå®Œæ•´ä»£ç ï¼‰&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&quot;ç½‘ç»œç±»åŠ è½½å™¨&quot;&gt;ç½‘ç»œç±»åŠ è½½å™¨&lt;/h2&gt;
&lt;p&gt;å…¶å®éå¸¸ç±»ä¼¼ï¼Œä¹Ÿä¸åšè¿‡å¤šè®²è§£ï¼Œç›´æ¥ä¸Šä»£ç ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;import java.io.ByteArrayOutputStream;  
import java.io.InputStream;  
import java.net.URL;  
  
public class NetworkClassLoader extends ClassLoader {  
  
    private String rootUrl;  
  
    public NetworkClassLoader(String rootUrl) {  
        // æŒ‡å®šURL  
        this.rootUrl = rootUrl;  
    }  
  
    // è·å–ç±»çš„å­—èŠ‚ç   
    @Override  
    protected Class&amp;lt;?&amp;gt; findClass(String name) throws ClassNotFoundException {  
        byte[] classData = getClassData(name);  
        if (classData == null) {  
            throw new ClassNotFoundException();  
        } else {  
            return defineClass(name, classData, 0, classData.length);  
        }  
    }  
  
    private byte[] getClassData(String className) {  
        // ä»ç½‘ç»œä¸Šè¯»å–çš„ç±»çš„å­—èŠ‚  
        String path = classNameToPath(className);  
        try {  
            URL url = new URL(path);  
            InputStream ins = url.openStream();  
            ByteArrayOutputStream baos = new ByteArrayOutputStream();  
            int bufferSize = 4096;  
            byte[] buffer = new byte[bufferSize];  
            int bytesNumRead = 0;  
            // è¯»å–ç±»æ–‡ä»¶çš„å­—èŠ‚  
            while ((bytesNumRead = ins.read(buffer)) != -1) {  
                baos.write(buffer, 0, bytesNumRead);  
            }  
            return baos.toByteArray();  
        } catch (Exception e) {  
            e.printStackTrace();  
        }  
        return null;  
    }  
  
    private String classNameToPath(String className) {  
        // å¾—åˆ°ç±»æ–‡ä»¶çš„URL  
        return rootUrl + &quot;/&quot;  
                + className.replace('.', '/') + &quot;.class&quot;;  
    }  
}  
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;em&gt;(ä»£ç æ¥è‡ªï¼š&lt;a href=&quot;https://blog.csdn.net/justloveyou_/article/details/72217806&quot;&gt;https://blog.csdn.net/justloveyou_/article/details/72217806&lt;/a&gt;)&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;å­¦ä¹ åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å¯¹ ClassLoader å·²ç»ä¸å†é™Œç”Ÿäº†ï¼Œä½†æ˜¯ä»ç„¶æœ‰ä¸€äº›å¿…è¦çš„çŸ¥è¯†ç‚¹éœ€è¦å»æŒæ¡ &lt;em&gt;ï¼ˆé™äºç¯‡å¹…å’Œèƒ½åŠ›è¿™é‡Œä¸æ‰©å±•äº†ï¼‰&lt;/em&gt;ï¼Œå¸Œæœ›æ‚¨èƒ½è®¤çœŸé˜…è¯»ä»¥ä¸‹çš„ææ–™ï¼š&lt;em&gt;ï¼ˆå¯èƒ½æ’ç‰ˆä¸Šé¢å±‚æ¬¡ä¸é½ï¼Œä½†å†…å®¹éƒ½æ˜¯æœ‰è´¨é‡çš„ï¼Œå¹¶ç”¨ â™¨ï¸ æ ‡æ³¨äº†æ›´åŠ é‡ç‚¹ä¸€äº›çš„å†…å®¹ï¼‰&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;1ï¸âƒ£ â™¨ï¸&lt;strong&gt;èƒ½ä¸èƒ½è‡ªå·±å†™ä¸€ä¸ªç±»å« &lt;code&gt;java.lang.System&lt;/code&gt; æˆ–è€… &lt;code&gt;java.lang.String&lt;/code&gt;ï¼Ÿ&lt;/strong&gt; - &lt;a href=&quot;https://blog.csdn.net/tang9140/article/details/42738433&quot;&gt;https://blog.csdn.net/tang9140/article/details/42738433&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;2ï¸âƒ£ æ·±å…¥ç†è§£ Java ä¹‹ JVM å¯åŠ¨æµç¨‹ - &lt;a href=&quot;https://cloud.tencent.com/developer/article/1038435&quot;&gt;https://cloud.tencent.com/developer/article/1038435&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;3ï¸âƒ£ â™¨ï¸&lt;strong&gt;çœŸæ­£ç†è§£çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ï¼ˆå¤šæ¡ˆä¾‹åˆ†æï¼‰&lt;/strong&gt; - &lt;a href=&quot;https://blog.csdn.net/yangcheng33/article/details/52631940&quot;&gt;https://blog.csdn.net/yangcheng33/article/details/52631940&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;4ï¸âƒ£ â™¨ï¸&lt;strong&gt;æ›¹å·¥æ‚è°ˆï¼šJava ç±»åŠ è½½å™¨è¿˜ä¼šæ­»é”ï¼Ÿè¿™æ˜¯ä»€ä¹ˆæƒ…å†µï¼Ÿ&lt;/strong&gt; - &lt;a href=&quot;https://www.cnblogs.com/grey-wolf/p/11378747.html#_label2&quot;&gt;https://www.cnblogs.com/grey-wolf/p/11378747.html#_label2&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;5ï¸âƒ£ è°¨é˜²JDK8é‡å¤ç±»å®šä¹‰é€ æˆçš„å†…å­˜æ³„æ¼ - &lt;a href=&quot;https://segmentfault.com/a/1190000022837543&quot;&gt;https://segmentfault.com/a/1190000022837543&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;7ï¸âƒ£ â™¨ï¸&lt;strong&gt;Tomcat ç±»åŠ è½½å™¨çš„å®ç°&lt;/strong&gt; - &lt;a href=&quot;https://juejin.im/post/6844903945496690695&quot;&gt;https://juejin.im/post/6844903945496690695&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;8ï¸âƒ£ â™¨ï¸&lt;strong&gt;Spring ä¸­çš„ç±»åŠ è½½æœºåˆ¶&lt;/strong&gt; - &lt;a href=&quot;https://www.shuzhiduo.com/A/gVdnwgAlzW/&quot;&gt;https://www.shuzhiduo.com/A/gVdnwgAlzW/&lt;/a&gt;&lt;/p&gt;

&lt;ol&gt;&lt;li&gt;ã€Šæ·±å…¥åˆ†æ Java Web æŠ€æœ¯å†…å¹•ã€‹ | è®¸ä»¤æ³¢ è‘—&lt;/li&gt;
&lt;li&gt;Java ç±»åŠ è½½æœºåˆ¶åˆ†æ - &lt;a href=&quot;https://www.jianshu.com/p/3615403c7c84&quot;&gt;https://www.jianshu.com/p/3615403c7c84&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Class æ–‡ä»¶è§£æå®æˆ˜ - &lt;a href=&quot;https://juejin.im/post/6844904199617003528&quot;&gt;https://juejin.im/post/6844904199617003528&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;å›¾æ–‡å…¼å¤‡çœ‹æ‡‚ç±»åŠ è½½æœºåˆ¶çš„å„ä¸ªé˜¶æ®µï¼Œå°±å·®ä½ äº†ï¼ - &lt;a href=&quot;https://juejin.im/post/6844904119258316814&quot;&gt;https://juejin.im/post/6844904119258316814&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Javaé¢è¯•çŸ¥è¯†ç‚¹è§£æï¼ˆä¸‰ï¼‰â€”â€”JVMç¯‡ - &lt;a href=&quot;https://www.wmyskxz.com/2018/05/16/java-mian-shi-zhi-shi-dian-jie-xi-san-jvm-pian/&quot;&gt;https://www.wmyskxz.com/2018/05/16/java-mian-shi-zhi-shi-dian-jie-xi-san-jvm-pian/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ä¸€çœ‹ä½ å°±æ‡‚ï¼Œè¶…è¯¦ç»†Javaä¸­çš„ClassLoaderè¯¦è§£ - &lt;a href=&quot;https://blog.csdn.net/briblue/article/details/54973413&quot;&gt;https://blog.csdn.net/briblue/article/details/54973413&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;blockquote&gt;
&lt;ul&gt;&lt;li&gt;æœ¬æ–‡å·²æ”¶å½•è‡³æˆ‘çš„ Github ç¨‹åºå‘˜æˆé•¿ç³»åˆ— &lt;strong&gt;ã€More Than Javaã€‘ï¼Œå­¦ä¹ ï¼Œä¸æ­¢ Codeï¼Œæ¬¢è¿ starï¼š&lt;a href=&quot;https://github.com/wmyskxz/MoreThanJava&quot;&gt;https://github.com/wmyskxz/MoreThanJava&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ªäººå…¬ä¼—å·&lt;/strong&gt; ï¼šwmyskxzï¼Œ&lt;strong&gt;ä¸ªäººç‹¬ç«‹åŸŸååšå®¢&lt;/strong&gt;ï¼šwmyskxz.comï¼ŒåšæŒåŸåˆ›è¾“å‡ºï¼Œä¸‹æ–¹æ‰«ç å…³æ³¨ï¼Œ2020ï¼Œä¸æ‚¨å…±åŒæˆé•¿ï¼&lt;/li&gt;
&lt;/ul&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/wmyskxz/img/img/common/qrcode.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;éå¸¸æ„Ÿè°¢å„ä½äººæ‰èƒ½ &lt;strong&gt;çœ‹åˆ°è¿™é‡Œ&lt;/strong&gt;ï¼Œå¦‚æœè§‰å¾—æœ¬ç¯‡æ–‡ç« å†™å¾—ä¸é”™ï¼Œè§‰å¾— &lt;strong&gt;ã€Œæˆ‘æ²¡æœ‰ä¸‰é¢—å¿ƒè„ã€æœ‰ç‚¹ä¸œè¥¿&lt;/strong&gt; çš„è¯ï¼Œ&lt;strong&gt;æ±‚ç‚¹èµï¼Œæ±‚å…³æ³¨ï¼Œæ±‚åˆ†äº«ï¼Œæ±‚ç•™è¨€ï¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åˆ›ä½œä¸æ˜“ï¼Œå„ä½çš„æ”¯æŒå’Œè®¤å¯ï¼Œå°±æ˜¯æˆ‘åˆ›ä½œçš„æœ€å¤§åŠ¨åŠ›ï¼Œæˆ‘ä»¬ä¸‹ç¯‡æ–‡ç« è§ï¼&lt;/p&gt;
</description>
<pubDate>Fri, 28 Aug 2020 00:19:00 +0000</pubDate>
<dc:creator>æˆ‘æ²¡æœ‰ä¸‰é¢—å¿ƒè„</dc:creator>
<og:description>ã€ŒMoreThanJavaã€ å®£æ‰¬çš„æ˜¯ ã€Œå­¦ä¹ ï¼Œä¸æ­¢ CODEã€ã€‚ å¦‚æœè§‰å¾— ã€Œä¸é”™ã€ çš„æœ‹å‹ï¼Œæ¬¢è¿ ã€Œå…³æ³¨ + ç•™è¨€ + åˆ†äº«ã€ï¼Œæ–‡æœ«æœ‰å®Œæ•´çš„è·å–é“¾æ¥ï¼Œæ‚¨çš„æ”¯æŒæ˜¯æˆ‘å‰è¿›çš„æœ€å¤§çš„åŠ¨åŠ›ï¼ å‰è¨€ Clas</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/wmyskxz/p/13575224.html</dc:identifier>
</item>
<item>
<title>å¿«é†’é†’ï¼ŒC# 9 ä¸­åˆæ¥äº†ä¸€å †å…³é”®è¯ init,record,with - ä¸€çº¿ç å†œ</title>
<link>http://www.cnblogs.com/huangxincheng/p/13575171.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/huangxincheng/p/13575171.html</guid>
<description>&lt;h2 id=&quot;ä¸€ï¼šèƒŒæ™¯&quot;&gt;ä¸€ï¼šèƒŒæ™¯&lt;/h2&gt;
&lt;h3 id=&quot;1-è®²æ•…äº‹&quot;&gt;1. è®²æ•…äº‹&lt;/h3&gt;
&lt;p&gt;.NET5 ç»ˆäºåœ¨ 2020-08-25 ä¹Ÿå°±æ˜¯å¤§å‰å¤©å‘å¸ƒäº†ç¬¬å…«ä¸ªé¢„è§ˆç‰ˆï¼Œè¿™ä¹ˆå¤šçš„é¢„è§ˆç‰ˆæå¾—æˆ‘éƒ½éº»æœ¨äº†ï¼Œæ¥è¸µè€Œæ¥çš„å°±æ˜¯æ›´å¤šçš„æ–°ç‰¹æ€§åŠ å…¥åˆ°äº† C# 9 ä¸­ï¼Œæ—¢ç„¶è¿˜æƒ³å‘†åœ¨è¿™æ¡èˆ¹ä¸Šï¼Œå¾—ç»§ç»­ç¡¬ç€å¤´çš®å­¦ä¹ å“ˆï¼Œè¿™ä¸€ç¯‡è·Ÿå¤§å®¶èŠèŠæ–°å¢çš„å‡ ä¸ªå…³é”®è¯ã€‚&lt;/p&gt;
&lt;h2 id=&quot;äºŒï¼šæ–°å¢å…³é”®è¯&quot;&gt;äºŒï¼šæ–°å¢å…³é”®è¯&lt;/h2&gt;
&lt;h3 id=&quot;1-init&quot;&gt;1. init&lt;/h3&gt;
&lt;p&gt;å‡ºæ¥ä¸€ä¸ªæ–°è¯­æ³•ç³–ï¼Œé¦–å…ˆè¦åšçš„å°±æ˜¯å»æ­å®ƒçš„è€åº•ï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿æ¨æµ‹å®ƒçš„åº”ç”¨åœºæ™¯ï¼Œä¸ºäº†æ–¹ä¾¿è¡¨è¿°ï¼Œæˆ‘å…ˆä¸Šä¸€ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-C#&quot;&gt;
    public class Person
    {
        public string Name { get; init; }
    }

&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¹ä¸€çœ‹æœ‰ç‚¹æ‡µé€¼ï¼Œæ²¡å…³ç³»ï¼Œå…ˆç”¨ ILSpy çœ‹ä¸€ä¸‹ï¼Œå¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/214741/202008/214741-20200828071500305-102270307.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šé¢è¿™å¼ å›¾å°±å·²ç»å¾ˆæ¸…æ™°çš„è§£é‡Šäº†ï¼ŒåŸæ¥ &lt;code&gt;init&lt;/code&gt; å°±æ˜¯è‡ªåŠ¨ç”Ÿæˆäº†ä¸€ä¸ªå¯¹ ç§æœ‰åªè¯»å­—æ®µ çš„å°è£…ï¼Œå¯¹äº readonly ç›¸ä¿¡å¤§å®¶å·²ç»è½»è½¦ç†Ÿè·¯äº†ï¼Œå®ƒçš„åˆå§‹åŒ–åªæœ‰ä¸¤ç§æ–¹å¼ï¼šå£°æ˜æ—¶å’Œæ„é€ å‡½æ•°ä¸­ï¼Œä½†ä» C# 9 å¼€å§‹å°±å¤šäº†ä¸€ä¸ªå±æ€§èµ‹å€¼æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯è¯´ç°åœ¨æœ‰ä¸‰ç§èµ‹å€¼æ–¹å¼äº†ï¼Œè¿˜åŸä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-C#&quot;&gt;
    public class Person
    {
        private readonly string name;

        public string Name
        {
            get =&amp;gt; name;

            init
            {
                name = value;
            }
        }
    }

&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™ç§æ–¹å¼è¦æ˜¯æ¢ä½œä»¥å‰è‚¯å®šæ˜¯æŠ¥é”™çš„ï¼Œå¦‚ä¸‹å›¾:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/214741/202008/214741-20200828071500579-427523929.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æœ‰ä¸€ç‚¹è¦æ³¨æ„çš„æ˜¯ç¼–è¯‘å™¨è¿˜åšäº†ä¸€ä¸ªç‰¹æ®Šé™åˆ¶ï¼Œå‡†ä½ åœ¨ &lt;code&gt;ç±»åˆå§‹åŒ–å™¨&lt;/code&gt; ä¸­ä½¿ç”¨ï¼Œä¸å‡†ä½ å•ç‹¬æ‹¿å‡ºæ¥èµ‹å€¼ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/214741/202008/214741-20200828071500885-162995774.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æ€»çš„æ¥è¯´, &lt;code&gt;init&lt;/code&gt; çš„ä½œç”¨å°±æ˜¯å¤šäº†ä¸€ç§è®©ä½ åˆå§‹åŒ– åªè¯»å­—æ®µ çš„æ–¹å¼ï¼Œä»…æ­¤è€Œå·²ç½¢äº†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;2-record&quot;&gt;2. record&lt;/h3&gt;
&lt;p&gt;ä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºï¼Œæˆ‘å…ˆä¸Šä¸€æ®µä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-C#&quot;&gt;
    public record Person
    {
        public string Name { get; set; }

        public int Age { get; set; }
    }

&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;çœ‹èµ·æ¥æŒº ğŸ‚ğŸ‘ƒ çš„ï¼Œç°åœ¨é™¤äº† classï¼Œstruct , enum, delegateï¼Œåˆæ¥äº†ä¸€ä¸ª recordï¼Œä¿ºä»¬çš„ C# æ˜¯è¶Šæ¥è¶Šå¼ºå¤§å•¦ã€‚&lt;/p&gt;
&lt;p&gt;è¿˜æ˜¯è€è§„çŸ©ï¼Œç”¨ILspyçœ‹çœ‹åº•å±‚ç”Ÿæˆäº†ä¸ªå•¥ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-C#&quot;&gt;
public class Person : IEquatable&amp;lt;Person&amp;gt;
{
        protected virtual Type EqualityContract =&amp;gt; typeof(Person);

        public string Name
        {
                get;
                set;
        }

        public int Age
        {
                get;
                set;
        }

        public virtual Person &amp;lt;&amp;gt;Clone()
        {
                return new Person(this);
        }

        public override int GetHashCode()
        {
                return (EqualityComparer&amp;lt;Type&amp;gt;.Default.GetHashCode(EqualityContract) * -1521134295 + EqualityComparer&amp;lt;string&amp;gt;.Default.GetHashCode(Name)) * -1521134295 + EqualityComparer&amp;lt;int&amp;gt;.Default.GetHashCode(Age);
        }

        public override bool Equals(object? obj)
        {
                return Equals(obj as Person);
        }

        public virtual bool Equals(Person? P_0)
        {
                return P_0 != null &amp;amp;&amp;amp; (object)EqualityContract == P_0!.EqualityContract &amp;amp;&amp;amp; EqualityComparer&amp;lt;string&amp;gt;.Default.Equals(Name, P_0!.Name) &amp;amp;&amp;amp; EqualityComparer&amp;lt;int&amp;gt;.Default.Equals(Age, P_0!.Age);
        }

        protected Person(Person P_0)
        {
                Name = P_0.Name;
                Age = P_0.Age;
        }

        public Person()
        {
        }

        bool IEquatable&amp;lt;Person&amp;gt;.Equals(Person other)
        {
                return Equals(other);
        }
}

&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä» ILspy ç”Ÿæˆå‡ºæ¥çš„ä»£ç æ¥çœ‹ï¼Œå¯ä»¥å‘ç°ä¸¤ç‚¹ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;ul readability=&quot;-0.5&quot;&gt;&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;record ç©çš„ä¹Ÿæ˜¯ classï¼Œé‡å†™äº† object ä¸­çš„ä¸€äº›æ–¹æ³• GetHashCode, Equals ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;æŒ‰ç±»ä¸­çš„å­—æ®µé€ä¸€æ¯”è¾ƒåˆ¤æ–­ç±»çš„ç›¸ç­‰æ€§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;è¯´åˆ°æ ¹æ®å­—æ®µåˆ¤æ–­ç±»çš„ç›¸ç­‰æ€§ï¼Œä¸çŸ¥é“å¤§å®¶å¯æœ‰ä¼¼æ›¾ç›¸è¯†çš„æ„Ÿè§‰? ,åæ­£è®©æˆ‘æƒ³èµ·äº†åŒ¿åç±»å‹ï¼Œå› ä¸ºå®ƒç”Ÿæˆçš„ C# ä»£ç å’Œ record å¦‚å‡ºä¸€è¾™ï¼Œä¸ä¿¡çš„è¯ï¼Œæˆ‘æ¼”ç¤ºç»™ä½ çœ‹å‘—ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-C#&quot;&gt;var person = new { Name = &quot;jack&quot;, Age = 20 };
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/214741/202008/214741-20200828071501065-117547690.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥çœ‹ä¸€çœ‹æ˜¯å¦çœŸçš„æ˜¯æŒ‰ç…§é€ä¸€å­—æ®µæ¯”è¾ƒï¼Œä»£ç å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-C#&quot;&gt;
        static void Main(string[] args)
        {
            var person = new Person() { Name = &quot;jack&quot;, Age = 20 };
            var person2 = new Person() { Name = &quot;jack&quot;, Age = 20 };

            var b = person.Equals(person2);
        }

&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/214741/202008/214741-20200828071501302-304257007.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;çœ‹äº†è¿™ä¹ˆå¤šï¼Œæˆ‘æƒ³ä½ è‚¯å®šæœ‰ä¸€äº›ç–‘é—®ï¼š&lt;/p&gt;
&lt;h4 id=&quot;1-ä¸ºå•¥è¦å®ç°-iequatable--æ¥å£&quot;&gt;1) ä¸ºå•¥è¦å®ç° IEquatable æ¥å£&lt;/h4&gt;
&lt;p&gt;è¿™æ˜¯å› ä¸ºåœ¨å½“ Person æ˜¯ æ³›å‹ T çš„æ—¶å€™é¿å…èµ°äº†é»˜è®¤çš„ &lt;code&gt;public override bool Equals(object? obj)&lt;/code&gt;ï¼Œè¿™æ˜¯ä¸€ä¸ªåŒè£…ç®±æ“ä½œï¼Œæ€§èƒ½å¤ªä½æ•ˆï¼Œæ·±å…¥ç ”ç©¶å¯çœ‹æˆ‘çš„åšæ–‡ï¼š&lt;a href=&quot;https://www.cnblogs.com/huangxincheng/p/12996361.html&quot;&gt;https://www.cnblogs.com/huangxincheng/p/12996361.html&lt;/a&gt; ã€‚&lt;/p&gt;
&lt;h4 id=&quot;2-ä¸ºå•¥æœ‰-equals-æ²¡æœ‰-&quot;&gt;2) ä¸ºå•¥æœ‰ equals æ²¡æœ‰ ==&lt;/h4&gt;
&lt;p&gt;è¿™ä¸ªé—®é¢˜é—®å¾—å¥½ï¼Œè°çŸ¥é“ C# å¼€å‘å›¢é˜Ÿæ€ä¹ˆæƒ³çš„ï¼ŒæŒ‰ç…§ç›®å‰ç°çŠ¶ï¼Œ ç”¨ == å’Œ equals æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡ï¼Œç»“æœè‚¯å®šæ˜¯ä¸ä¸€æ ·çš„ï¼Œæˆ‘æƒ³ä½ è‚¯å®šèƒ½ç†è§£ï¼Œæ¯•ç«Ÿä¸€ä¸ªæ˜¯å¼•ç”¨ä¸€ä¸ªæ˜¯æŒ‰å­—æ®µæ¯”è¾ƒï¼Œè¿™å°±æ¯”è¾ƒå‘çˆ¹äº†ï¼Œå¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/214741/202008/214741-20200828071501538-310544047.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;3-clone-æ–¹æ³•æœ‰ä½•ä½œç”¨&quot;&gt;3) &amp;lt;&amp;gt;Clone() æ–¹æ³•æœ‰ä½•ä½œç”¨&lt;/h4&gt;
&lt;p&gt;ä»æ–¹æ³•ä½“æ¥çœ‹ï¼Œè¿™ä¸ªæ–¹æ³•ç”¨äºåš æµ…copy ç”¨çš„ï¼Œä½†æ–¹æ³•åå‰é¢æœ‰ä¸€å¯¹ &lt;code&gt;&amp;lt;&amp;gt;&lt;/code&gt; ï¼Œè¯´æ˜æ˜¯é˜²ä½ ç›´æ¥è°ƒç”¨çš„ï¼Œé‚£é—®é¢˜æ¥äº†ï¼Œæ€ä¹ˆè°ƒç”¨å‘¢ï¼Ÿ è¿™å°±æ¶‰åŠä¸€ä¸ªæ–°çš„è¯­æ³•ç³–ã€‚&lt;/p&gt;
&lt;h3 id=&quot;3-with&quot;&gt;3. with&lt;/h3&gt;
&lt;p&gt;è¿™ä¸ªè¯­æ³•ç³–ä¹ŸæŒºğŸ‚ğŸ‘ƒçš„ï¼Œå°±æ˜¯ä¸ºäº†åŠ©ä½ è°ƒç”¨ record çš„ &lt;code&gt;&amp;lt;&amp;gt;clone&lt;/code&gt; æ–¹æ³•ï¼Œä¸ä¿¡çš„è¯ï¼Œä¸Šä»£ç å‘—ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-C#&quot;&gt;
        static void Main(string[] args)
        {
            var person = new Person() { Name = &quot;jack&quot;, Age = 20 };

            var person2 = person with { };
        }       

&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç„¶åçœ‹ä¸€ä¸‹ IL åç¼–è¯‘çš„ä»£ç &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/214741/202008/214741-20200828071502028-665400018.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¸è¿‡æˆ‘ä¹Ÿæœ‰ä¸€ä¸ªç–‘é—®ï¼Œä¸ºå•¥è¦é˜²ç€æˆ‘ç›´æ¥è°ƒç”¨ &lt;code&gt;Clone&lt;/code&gt; æ–¹æ³•å‘¢ï¼Ÿ æ–°ä¸œè¥¿ï¼Œä¹Ÿä¸çŸ¥é“åº”ç”¨åœºæ™¯ï¼Œè°æçš„æ¸…æ¥šå“ˆ~~~ ğŸ˜‚ğŸ˜‚ğŸ˜‚&lt;/p&gt;
&lt;h2 id=&quot;å››ï¼š-æ€»ç»“&quot;&gt;å››ï¼š æ€»ç»“&lt;/h2&gt;
&lt;p&gt;æ€»çš„æ¥è¯´C#æ˜¯è¶Šæ¥è¶Šæ–°é¢–äº†ï¼Œä¹Ÿä¸€ç›´åœ¨è·µè¡Œ jquery çš„å£å·ï¼š write less,do moreã€‚ æœ‰ä¸€ç‚¹è¦æé†’çš„æ˜¯ï¼Œè¯­æ³•ç³–å¤šäº†ï¼Œä¸€å®šè¦çŸ¥é“å…¶å®å®ƒæ˜¯ä¸ªå•¥ï¼Œä¸è¦å¸¸å¹´æ··åœ¨ç¼–è¯‘å™¨ä¹‹ä¸Šè¿·å¤±äº†æ–¹å‘ğŸ˜„ğŸ˜„ğŸ˜„&lt;/p&gt;
&lt;h3 id=&quot;å¦‚æ‚¨æœ‰æ›´å¤šé—®é¢˜ä¸æˆ‘äº’åŠ¨ï¼Œæ‰«æä¸‹æ–¹è¿›æ¥å§&quot;&gt;å¦‚æ‚¨æœ‰æ›´å¤šé—®é¢˜ä¸æˆ‘äº’åŠ¨ï¼Œæ‰«æä¸‹æ–¹è¿›æ¥å§~&lt;/h3&gt;
&lt;img src=&quot;https://img2020.cnblogs.com/blog/214741/202005/214741-20200522143723695-575216767.png&quot; width=&quot;600&quot; height=&quot;200&quot; alt=&quot;å›¾ç‰‡åç§°&quot; align=&quot;center&quot;/&gt;</description>
<pubDate>Thu, 27 Aug 2020 23:15:00 +0000</pubDate>
<dc:creator>ä¸€çº¿ç å†œ</dc:creator>
<og:description>ä¸€ï¼šèƒŒæ™¯ 1. è®²æ•…äº‹ .NET5 ç»ˆäºåœ¨ 2020-08-25 ä¹Ÿå°±æ˜¯å¤§å‰å¤©å‘å¸ƒäº†ç¬¬å…«ä¸ªé¢„è§ˆç‰ˆï¼Œè¿™ä¹ˆå¤šçš„é¢„è§ˆç‰ˆæå¾—æˆ‘éƒ½éº»æœ¨äº†ï¼Œæ¥è¸µè€Œæ¥çš„å°±æ˜¯æ›´å¤šçš„æ–°ç‰¹æ€§åŠ å…¥åˆ°äº† C# 9 ä¸­ï¼Œæ—¢ç„¶è¿˜æƒ³å‘†åœ¨è¿™æ¡èˆ¹ä¸Šï¼Œ</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/huangxincheng/p/13575171.html</dc:identifier>
</item>
<item>
<title>ç”¨Pythonçš„Pandaså’ŒMatplotlibç»˜åˆ¶è‚¡ç¥¨KDJæŒ‡æ ‡çº¿ - hsm_computer</title>
<link>http://www.cnblogs.com/JavaArchitect/p/13575164.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/JavaArchitect/p/13575164.html</guid>
<description>&lt;p&gt;Â  æˆ‘æœ€è¿‘å‡ºäº†ä¸€æœ¬ä¹¦ï¼Œã€ŠåŸºäºè‚¡ç¥¨å¤§æ•°æ®åˆ†æçš„Pythonå…¥é—¨å®æˆ˜ è§†é¢‘æ•™å­¦ç‰ˆã€‹ï¼Œäº¬ä¸œé“¾æ¥ï¼š&lt;a href=&quot;https://item.jd.com/69241653952.html&quot;&gt;https://item.jd.com/69241653952.html&lt;/a&gt;ï¼Œåœ¨å…¶ä¸­ç»™å‡ºäº†MACDï¼ŒKDJç­‰æŒ‡æ ‡å›¾çš„ç»˜åˆ¶æ–¹æ³•ã€‚è¿™é‡Œå°†æ ¹æ®KDJçš„ç®—æ³•ï¼Œè®¡ç®—å¹¶ç»˜åˆ¶KDJæŒ‡æ ‡çº¿ã€‚&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;1Â  KDJæŒ‡æ ‡çš„è®¡ç®—è¿‡ç¨‹&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Â  Â  KDJæŒ‡æ ‡ä¹Ÿå«éšæœºæŒ‡æ ‡ï¼Œæ˜¯ç”±ä¹”æ²»Â·è“æ©åšå£«ï¼ˆGeorge Laneï¼‰æœ€æ—©æå‡ºçš„ã€‚è¯¥æŒ‡æ ‡é›†ä¸­åŒ…å«äº†å¼ºå¼±æŒ‡æ ‡ã€åŠ¨é‡æ¦‚å¿µå’Œç§»åŠ¨å¹³å‡çº¿çš„ä¼˜ç‚¹ï¼Œå¯ä»¥ç”¨æ¥è¡¡é‡è‚¡ä»·è„±ç¦»æ­£å¸¸ä»·æ ¼èŒƒå›´çš„åç¦»ç¨‹åº¦ã€‚&lt;/p&gt;
&lt;p&gt;Â  Â  KDJæŒ‡æ ‡çš„è®¡ç®—è¿‡ç¨‹æ˜¯ï¼Œé¦–å…ˆè·å–æŒ‡å®šå‘¨æœŸï¼ˆä¸€èˆ¬æ˜¯9å¤©ï¼‰å†…å‡ºç°è¿‡çš„è‚¡ç¥¨æœ€é«˜ä»·ã€æœ€ä½ä»·å’Œæœ€åä¸€ä¸ªäº¤æ˜“æ—¥çš„æ”¶ç›˜ä»·ï¼Œéšåé€šè¿‡å®ƒä»¬ä¸‰è€…é—´çš„æ¯”ä¾‹å…³ç³»æ¥ç®—å‡ºæœªæˆç†Ÿ&lt;a title=&quot;æœªæˆç†Ÿéšæœºå€¼&quot; href=&quot;http://wiki.mbalib.com/wiki/%E6%9C%AA%E6%88%90%E7%86%9F%E9%9A%8F%E6%9C%BA%E5%80%BC&quot;&gt;éšæœºå€¼&lt;/a&gt;RSVï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šå†ç”¨å¹³æ»‘ç§»åŠ¨å¹³å‡çº¿çš„æ–¹å¼æ¥è®¡ç®—Kã€Då’ŒJå€¼ã€‚è®¡ç®—å®Œæˆåï¼ŒæŠŠKDJçš„å€¼ç»˜æˆæ›²çº¿å›¾ï¼Œä»¥æ­¤æ¥é¢„åˆ¤è‚¡ç¥¨èµ°åŠ¿ï¼Œå…·ä½“çš„ç®—æ³•å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Â  Â  ç¬¬ä¸€æ­¥ï¼š&lt;/strong&gt;è®¡ç®—å‘¨æœŸå†…ï¼ˆnæ—¥ã€nå‘¨ç­‰ï¼Œnä¸€èˆ¬æ˜¯9ï¼‰çš„RSVå€¼ï¼ŒRSVä¹Ÿå«æœªæˆç†ŸéšæœºæŒ‡æ ‡å€¼ï¼Œæ˜¯è®¡ç®—Kå€¼ã€Då€¼å’ŒJå€¼çš„åŸºç¡€ã€‚ä»¥næ—¥å‘¨æœŸè®¡ç®—å•ä½ä¸ºä¾‹ï¼Œè®¡ç®—å…¬å¼å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;Â Â Â  næ—¥RSV =ï¼ˆCnï¼Lnï¼‰/ï¼ˆHnï¼Lnï¼‰Ã— 100&lt;/p&gt;
&lt;p&gt;Â  Â  å…¶ä¸­ï¼ŒCnæ˜¯ç¬¬næ—¥ï¼ˆä¸€èˆ¬æ˜¯æœ€åä¸€æ—¥ï¼‰çš„æ”¶ç›˜ä»·ï¼ŒLnæ˜¯næ—¥èŒƒå›´å†…çš„æœ€ä½ä»·ï¼ŒHnæ˜¯næ—¥èŒƒå›´å†…çš„æœ€é«˜ä»·ï¼Œæ ¹æ®ä¸Šè¿°å…¬å¼å¯çŸ¥ï¼ŒRSVå€¼çš„å–å€¼èŒƒå›´æ˜¯1åˆ°100ã€‚å¦‚æœè¦è®¡ç®—nå‘¨çš„ RSVå€¼ï¼Œåˆ™Cnè¿˜æ˜¯æœ€åä¸€æ—¥çš„æ”¶ç›˜ä»·ï¼Œä½†Lnå’ŒHnåˆ™æ˜¯nå‘¨å†…çš„æœ€ä½ä»·å’Œæœ€é«˜ä»·ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Â  Â  ç¬¬äºŒæ­¥ï¼š&lt;/strong&gt;æ ¹æ®RSVè®¡ç®—Kå’ŒDå€¼ï¼Œæ–¹æ³•å¦‚ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;Â Â Â  å½“æ—¥Kå€¼ = 2/3 Ã— å‰ä¸€æ—¥Kå€¼ ï¼‹ 1/3 Ã— å½“æ—¥çš„RSVå€¼&lt;/p&gt;
&lt;p&gt;Â Â Â  å½“æ—¥Då€¼ = 2/3 Ã— å‰ä¸€æ—¥Då€¼ ï¼‹ 1/3 Ã— å½“æ—¥Kå€¼&lt;/p&gt;
&lt;p&gt;Â  Â  åœ¨è®¡ç®—è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ²¡æœ‰å‰ä¸€æ—¥K å€¼æˆ–Då€¼ï¼Œåˆ™å¯ä»¥ç”¨æ•°å­—50æ¥ä»£æ›¿ã€‚&lt;/p&gt;
&lt;p&gt;Â  Â  åœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œä¸€èˆ¬æ˜¯ä»¥9æ—¥ä¸ºå‘¨æœŸæ¥è®¡ç®—KDçº¿ï¼Œæ ¹æ®ä¸Šè¿°å…¬å¼ï¼Œé¦–å…ˆæ˜¯è®¡ç®—å‡ºæœ€è¿‘9æ—¥çš„RSVå€¼ï¼Œå³æœªæˆç†Ÿéšæœºå€¼ï¼Œè®¡ç®—å…¬å¼æ˜¯9æ—¥RSV = ï¼ˆCï¼L9ï¼‰Ã·ï¼ˆH9ï¼L9ï¼‰Ã— 100ã€‚å…¶ä¸­å„é¡¹å‚æ•°å«ä¹‰åœ¨æ­¥éª¤ä¸€ä¸­å·²ç»æåˆ°ï¼Œå…¶æ¬¡å†æŒ‰æœ¬æ­¥éª¤æ‰€ç¤ºè®¡ç®—å½“æ—¥çš„Kå’ŒDå€¼ã€‚&lt;/p&gt;
&lt;p&gt;Â  Â  éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œä¸Šå¼ä¸­çš„å¹³æ»‘å› å­2/3å’Œ1/3æ˜¯å¯ä»¥æ›´æ”¹çš„ï¼Œä¸è¿‡åœ¨è‚¡å¸‚äº¤æ˜“å®è·µä¸­ï¼Œè¿™ä¸¤ä¸ªå€¼å·²ç»è¢«é»˜è®¤è®¾ç½®ä¸º2/3å’Œ1/3ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Â  Â  ç¬¬ä¸‰æ­¥ï¼š&lt;/strong&gt;è®¡ç®—Jå€¼ã€‚JæŒ‡æ ‡çš„è®¡ç®—å…¬å¼ä¸ºï¼šJ = 3Ã—K - 2Ã—Dã€‚ä»ä½¿ç”¨è§’åº¦æ¥çœ‹ï¼ŒJçš„å®è´¨æ˜¯åæ˜ Kå€¼å’ŒDå€¼çš„ä¹–ç¦»ç¨‹åº¦ï¼Œå®ƒçš„èŒƒå›´ä¸Šå¯è¶…è¿‡100ï¼Œä¸‹å¯ä½äº0ã€‚&lt;/p&gt;
&lt;p&gt;æœ€æ—©çš„KDJæŒ‡æ ‡åªæœ‰Kçº¿å’ŒDçº¿ä¸¤æ¡çº¿ï¼Œé‚£ä¸ªæ—¶å€™ä¹Ÿè¢«ç§°ä¸ºKDæŒ‡æ ‡ï¼Œéšç€åˆ†ææŠ€æœ¯çš„å‘å±•ï¼ŒKDæŒ‡æ ‡é€æ¸æ¼”å˜æˆKDJæŒ‡æ ‡ï¼Œå¼•å…¥JæŒ‡æ ‡åï¼Œèƒ½æé«˜KDJæŒ‡æ ‡é¢„åˆ¤è¡Œæƒ…çš„èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;Â  Â  åœ¨æŒ‰ä¸Šè¿°ä¸‰ä¸ªæ­¥éª¤è®¡ç®—å‡ºæ¯å¤©çš„Kã€Då’ŒJä¸‰ä¸ªå€¼ä¹‹åï¼ŒæŠŠå®ƒä»¬è¿æ¥èµ·æ¥ï¼Œå°±å¯ä»¥çœ‹åˆ°KDJæŒ‡æ ‡çº¿äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;2 ç»˜åˆ¶é™æ€çš„KDJæŒ‡æ ‡çº¿&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Â  Â  æ ¹æ®ä¸ŠèŠ‚ç»™å‡ºçš„KDJç®—æ³•ï¼Œåœ¨ä¸‹é¢çš„drawKDJ.pyèŒƒä¾‹ç¨‹åºä¸­å°†ç»˜åˆ¶è‚¡ç¥¨â€œé‡‘çŸ³èµ„æºâ€ï¼ˆè‚¡ç¥¨ä»£ç ä¸º603505ï¼‰ä»2018å¹´9æœˆåˆ°2019å¹´5æœˆè¿™æ®µæ—¶é—´å†…çš„KDJèµ°åŠ¿å›¾ã€‚Â  Â Â &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;50&quot;&gt;
&lt;pre&gt;
 !/usr/bin/&lt;span&gt;env python
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;    # coding=utf-&lt;span&gt;8&lt;/span&gt;
&lt;span&gt;3&lt;/span&gt;    import matplotlib.pyplot &lt;span&gt;as&lt;/span&gt;&lt;span&gt; plt
&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;    import pandas &lt;span&gt;as&lt;/span&gt;&lt;span&gt; pd
&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;    # è®¡ç®—KDJ
&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;&lt;span&gt;    def calKDJ(df):
&lt;/span&gt;&lt;span&gt;7&lt;/span&gt;        df[&lt;span&gt;'&lt;/span&gt;&lt;span&gt;MinLow&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;] = df[&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Low&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;].rolling(&lt;span&gt;9&lt;/span&gt;, min_periods=&lt;span&gt;9&lt;/span&gt;&lt;span&gt;).min()
&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;&lt;span&gt;        # å¡«å……NaNæ•°æ®
&lt;/span&gt;&lt;span&gt;9&lt;/span&gt;        df[&lt;span&gt;'&lt;/span&gt;&lt;span&gt;MinLow&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;].fillna(value = df[&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Low&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;].expanding().min(), inplace =&lt;span&gt; True)
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;        df[&lt;span&gt;'&lt;/span&gt;&lt;span&gt;MaxHigh&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;] = df[&lt;span&gt;'&lt;/span&gt;&lt;span&gt;High&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;].rolling(&lt;span&gt;9&lt;/span&gt;, min_periods=&lt;span&gt;9&lt;/span&gt;&lt;span&gt;).max()
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;        df[&lt;span&gt;'&lt;/span&gt;&lt;span&gt;MaxHigh&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;].fillna(value = df[&lt;span&gt;'&lt;/span&gt;&lt;span&gt;High&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;].expanding().max(), inplace =&lt;span&gt; True)
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;        df[&lt;span&gt;'&lt;/span&gt;&lt;span&gt;RSV&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;] = (df[&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Close&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;] - df[&lt;span&gt;'&lt;/span&gt;&lt;span&gt;MinLow&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;]) / (df[&lt;span&gt;'&lt;/span&gt;&lt;span&gt;MaxHigh&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;] - df[&lt;span&gt;'&lt;/span&gt;&lt;span&gt;MinLow&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;]) * &lt;span&gt;100&lt;/span&gt;
&lt;span&gt;13&lt;/span&gt;&lt;span&gt;        # é€šè¿‡forå¾ªç¯ä¾æ¬¡è®¡ç®—æ¯ä¸ªäº¤æ˜“æ—¥çš„KDJå€¼
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt;        &lt;span&gt;for&lt;/span&gt; i &lt;span&gt;in&lt;/span&gt;&lt;span&gt; range(len(df)):
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt;            &lt;span&gt;if&lt;/span&gt; i==&lt;span&gt;0&lt;/span&gt;&lt;span&gt;:     # ç¬¬ä¸€å¤©
&lt;/span&gt;&lt;span&gt;16&lt;/span&gt;                df.ix[i,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;K&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;]=&lt;span&gt;50&lt;/span&gt;
&lt;span&gt;17&lt;/span&gt;                df.ix[i,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;D&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;]=&lt;span&gt;50&lt;/span&gt;
&lt;span&gt;18&lt;/span&gt;            &lt;span&gt;if&lt;/span&gt; i&amp;gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt;19&lt;/span&gt;                df.ix[i,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;K&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;]=df.ix[i-&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;K&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;]*&lt;span&gt;2&lt;/span&gt;/&lt;span&gt;3&lt;/span&gt; + &lt;span&gt;1&lt;/span&gt;/&lt;span&gt;3&lt;/span&gt;*df.ix[i,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;RSV&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
&lt;/span&gt;&lt;span&gt;20&lt;/span&gt;                df.ix[i,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;D&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;]=df.ix[i-&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;D&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;]*&lt;span&gt;2&lt;/span&gt;/&lt;span&gt;3&lt;/span&gt; + &lt;span&gt;1&lt;/span&gt;/&lt;span&gt;3&lt;/span&gt;*df.ix[i,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;K&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
&lt;/span&gt;&lt;span&gt;21&lt;/span&gt;            df.ix[i,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;J&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;]=&lt;span&gt;3&lt;/span&gt;*df.ix[i,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;K&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;]-&lt;span&gt;2&lt;/span&gt;*df.ix[i,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;D&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
&lt;/span&gt;&lt;span&gt;22&lt;/span&gt;        &lt;span&gt;return&lt;/span&gt; df
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Â  Â Â ä»ç¬¬6è¡Œåˆ°ç¬¬22è¡Œç¨‹åºè¯­å¥å®šä¹‰çš„calKDJæ–¹æ³•ä¸­ï¼Œå°†æ ¹æ®è¾“å…¥å‚æ•°dfï¼Œè®¡ç®—æŒ‡å®šæ—¶é—´èŒƒå›´å†…çš„KDJå€¼ã€‚&lt;/p&gt;
&lt;p&gt;Â  Â  å…·ä½“çš„è®¡ç®—æ­¥éª¤æ˜¯ï¼Œåœ¨ç¬¬8è¡Œä¸­é€šè¿‡df['Low'].rolling(9, min_periods=9).min()ï¼ŒæŠŠæ¯ä¸€è¡Œï¼ˆå³æ¯ä¸ªäº¤æ˜“æ—¥ï¼‰çš„ 'MinLow' å±æ€§å€¼è®¾ç½®ä¸º9å¤©å†…æ”¶ç›˜ä»·ï¼ˆLowï¼‰çš„æœ€å°å€¼ã€‚&lt;/p&gt;
&lt;p&gt;Â  Â  å¦‚æœåªæ‰§è¡Œè¿™å¥ï¼Œç¬¬1åˆ°ç¬¬8ä¸ªäº¤æ˜“æ—¥çš„MinLowå±æ€§å€¼å°†ä¼šæ˜¯NaNï¼Œæ‰€ä»¥è¦é€šè¿‡ç¬¬9è¡Œçš„ç¨‹åºä»£ç ï¼ŒæŠŠè¿™äº›äº¤æ˜“æ—¥çš„MinLowå±æ€§å€¼è®¾ç½®ä¸º9å¤©å†…æ”¶ç›˜ä»·ï¼ˆLowï¼‰çš„æœ€å°å€¼ã€‚åŒç†ï¼Œé€šè¿‡ç¬¬10è¡Œçš„ç¨‹åºä»£ç ï¼ŒæŠŠæ¯ä¸ªäº¤æ˜“æ—¥çš„ 'MaxHigh' å±æ€§å€¼è®¾ç½®ä¸º9å¤©å†…çš„æœ€é«˜ä»·ï¼ŒåŒæ ·é€šè¿‡ç¬¬11è¡Œçš„fillnaæ–¹æ³•ï¼Œå¡«å……å‰8å¤©çš„ 'MaxHigh' å±æ€§å€¼ã€‚éšååœ¨ç¬¬12è¡Œä¸­æ ¹æ®ç®—æ³•è®¡ç®—æ¯ä¸ªäº¤æ˜“æ—¥çš„RSVå€¼ã€‚&lt;/p&gt;
&lt;p&gt;Â  Â  åœ¨ç®—å®ŒRSVå€¼åï¼Œé€šè¿‡ç¬¬14è¡Œçš„forå¾ªç¯ï¼Œä¾æ¬¡éå†æ¯ä¸ªäº¤æ˜“æ—¥ï¼Œåœ¨éå†æ—¶æ ¹æ®KDJçš„ç®—æ³•åˆ†åˆ«è®¡ç®—å‡ºæ¯ä¸ªäº¤æ˜“æ—¥å¯¹åº”çš„KDJå€¼ã€‚&lt;/p&gt;
&lt;p&gt;Â  Â  è¯·æ³¨æ„ï¼Œå¦‚æœæ˜¯ç¬¬1ä¸ªäº¤æ˜“æ—¥ï¼Œåˆ™åœ¨ç¬¬16è¡Œå’Œç¬¬17è¡Œçš„ç¨‹åºä»£ç ä¸­æŠŠ Kå€¼å’ŒDå€¼è®¾ç½®ä¸ºé»˜è®¤çš„50ï¼Œå¦‚æœä¸æ˜¯ç¬¬1äº¤æ˜“æ—¥ï¼Œåˆ™é€šè¿‡ç¬¬19è¡Œå’Œç¬¬20è¡Œçš„ç®—æ³•è®¡ç®—Kå€¼å’ŒDå€¼ã€‚è®¡ç®—å®ŒKå’ŒDçš„å€¼ä»¥åï¼Œå†é€šè¿‡ç¬¬21è¡Œçš„ç¨‹åºä»£ç è®¡ç®—å‡ºæ¯ä¸ªäº¤æ˜“æ—¥çš„Jå€¼ã€‚&lt;/p&gt;
&lt;p&gt;Â  Â  ä»ä¸Šè¿°ä»£ç ä¸­ï¼Œå¯ä»¥çœ‹åˆ°å…³äºDataFrameå¯¹è±¡çš„ä¸‰ä¸ªæ“ä½œæŠ€å·§ï¼š&lt;/p&gt;
&lt;p&gt;Â  Â  ç¬¬ä¸€ï¼Œå¦‚ç¬¬9è¡Œæ‰€ç¤ºï¼Œå¦‚æœè¦æŠŠä¿®æ”¹åçš„æ•°æ®å†™å›åˆ°DataFrameä¸­ï¼Œå¿…é¡»åŠ ä¸Šinplace = Trueçš„å‚æ•°ï¼›&lt;/p&gt;
&lt;p&gt;Â  Â  ç¬¬äºŒï¼Œåœ¨ç¬¬12è¡Œä¸­ï¼Œdf['Close']ç­‰å˜é‡å€¼æ˜¯ä»¥åˆ—ä¸ºå•ä½ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨DataFrameä¸­ï¼Œå¯ä»¥ç›´æ¥ä»¥åˆ—ä¸ºå•ä½è¿›è¡Œæ“ä½œï¼›&lt;/p&gt;
&lt;p&gt;Â  Â  ç¬¬ä¸‰ï¼Œåœ¨ç¬¬16è¡Œçš„ä»£ç df.ix[i,'K']=50ï¼Œè¿™é‡Œç”¨åˆ°çš„æ˜¯ixé€šè¿‡ç´¢å¼•å€¼å’Œæ ‡ç­¾å€¼æ¥è®¿é—®å¯¹è±¡ï¼Œè€Œå®ç°ç±»ä¼¼åŠŸèƒ½çš„locå’Œilocæ–¹æ³•åªèƒ½é€šè¿‡ç´¢å¼•å€¼æ¥è®¿é—®ã€‚Â  Â Â &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;41&quot;&gt;
&lt;pre&gt;
&lt;span&gt; ç»˜åˆ¶KDJçº¿
&lt;/span&gt;&lt;span&gt;24&lt;/span&gt;&lt;span&gt;    def drawKDJ():
&lt;/span&gt;&lt;span&gt;25&lt;/span&gt;        df = pd.read_csv(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;D:/stockData/ch8/6035052018-09-012019-05-31.csv&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,encoding=&lt;span&gt;'&lt;/span&gt;&lt;span&gt;gbk&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;26&lt;/span&gt;        stockDataFrame =&lt;span&gt; calKDJ(df)
&lt;/span&gt;&lt;span&gt;27&lt;/span&gt;&lt;span&gt;        print(stockDataFrame)
&lt;/span&gt;&lt;span&gt;28&lt;/span&gt;&lt;span&gt;        # å¼€å§‹ç»˜å›¾
&lt;/span&gt;&lt;span&gt;29&lt;/span&gt;&lt;span&gt;        plt.figure()
&lt;/span&gt;&lt;span&gt;30&lt;/span&gt;        stockDataFrame[&lt;span&gt;'&lt;/span&gt;&lt;span&gt;K&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;].plot(color=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;blue&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,label=&lt;span&gt;'&lt;/span&gt;&lt;span&gt;K&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;31&lt;/span&gt;        stockDataFrame[&lt;span&gt;'&lt;/span&gt;&lt;span&gt;D&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;].plot(color=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;green&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,label=&lt;span&gt;'&lt;/span&gt;&lt;span&gt;D&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;32&lt;/span&gt;        stockDataFrame[&lt;span&gt;'&lt;/span&gt;&lt;span&gt;J&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;].plot(color=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;purple&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,label=&lt;span&gt;'&lt;/span&gt;&lt;span&gt;J&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;33&lt;/span&gt;        plt.legend(loc=&lt;span&gt;'&lt;/span&gt;&lt;span&gt;best&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)         # ç»˜åˆ¶å›¾ä¾‹
&lt;/span&gt;&lt;span&gt;34&lt;/span&gt;        # è®¾ç½®xè½´åæ ‡çš„æ ‡ç­¾å’Œæ—‹è½¬è§’åº¦    major_index=stockDataFrame.index[stockDataFrame.index%&lt;span&gt;10&lt;/span&gt;==&lt;span&gt;0&lt;/span&gt;&lt;span&gt;]
&lt;/span&gt;&lt;span&gt;35&lt;/span&gt;    major_xtics=stockDataFrame[&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Date&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;][stockDataFrame.index%&lt;span&gt;10&lt;/span&gt;==&lt;span&gt;0&lt;/span&gt;&lt;span&gt;]
&lt;/span&gt;&lt;span&gt;36&lt;/span&gt;&lt;span&gt;        plt.xticks(major_index,major_xtics)
&lt;/span&gt;&lt;span&gt;37&lt;/span&gt;        plt.setp(plt.gca().get_xticklabels(), rotation=&lt;span&gt;30&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;38&lt;/span&gt;&lt;span&gt;        # å¸¦ç½‘æ ¼çº¿ï¼Œä¸”è®¾ç½®äº†ç½‘æ ¼æ ·å¼
&lt;/span&gt;&lt;span&gt;39&lt;/span&gt;        plt.grid(linestyle=&lt;span&gt;'&lt;/span&gt;&lt;span&gt;-.&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;40&lt;/span&gt;        plt.title(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;é‡‘çŸ³èµ„æºçš„KDJå›¾&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;41&lt;/span&gt;        plt.rcParams[&lt;span&gt;'&lt;/span&gt;&lt;span&gt;font.sans-serif&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;]=[&lt;span&gt;'&lt;/span&gt;&lt;span&gt;SimHei&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
&lt;/span&gt;&lt;span&gt;42&lt;/span&gt;&lt;span&gt;        plt.show()
&lt;/span&gt;&lt;span&gt;43&lt;/span&gt;&lt;span&gt;    # è°ƒç”¨æ–¹æ³•
&lt;/span&gt;&lt;span&gt;44&lt;/span&gt;    drawKDJ()
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Â  Â Â åœ¨ç¬¬24è¡Œçš„drawKDJæ–¹æ³•ä¸­å®ç°äº†ç»˜åˆ¶KDJçš„æ“ä½œã€‚å…¶ä¸­çš„å…³é”®æ­¥éª¤æ˜¯ï¼Œé€šè¿‡ç¬¬25è¡Œçš„ç¨‹åºä»£ç ä»æŒ‡å®šçš„csvæ–‡ä»¶ä¸­è¯»å–è‚¡ç¥¨äº¤æ˜“æ•°æ®ï¼Œéšååœ¨ç¬¬30è¡Œåˆ°ç¬¬32è¡Œçš„ç¨‹åºä»£ç ä¸­ï¼Œè°ƒç”¨plotæ–¹æ³•åˆ†åˆ«ç”¨ä¸‰ç§ä¸åŒçš„é¢œè‰²ç»˜åˆ¶äº†KDJçº¿ï¼Œå› ä¸ºåœ¨ç»˜åˆ¶æ—¶é€šè¿‡labelå‚æ•°è®¾ç½®äº†æ ‡ç­¾ï¼Œæ‰€ä»¥å¯ä»¥æ‰§è¡Œç¬¬33è¡Œçš„ç¨‹åºä»£ç æ¥ç»˜åˆ¶å›¾ä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;Â  Â  åœ¨ç¬¬34è¡Œåˆ°ç¬¬37è¡Œçš„ä»£ç ä¸­è®¾ç½®äº†xè½´çš„æ–‡å­—æ ‡ç­¾å’Œæ—‹è½¬è§’åº¦ï¼Œè¿™éƒ¨åˆ†ä»£ç ä¸ä¹‹å‰ç»˜åˆ¶MACDæŒ‡æ ‡çº¿çš„ä»£ç å¾ˆç›¸ä¼¼ï¼Œä¸ºäº†ä¸åœ¨xè½´ä¸Šè¿‡å¤šåœ°æ˜¾ç¤ºæ—¥æœŸï¼Œäºæ˜¯ç”¨stockDataFrame.index%10 == 0çš„æ–¹å¼ï¼Œåªæ˜¾ç¤ºç´¢å¼•å€¼æ˜¯10çš„å€æ•°çš„æ—¥æœŸã€‚&lt;/p&gt;
&lt;p&gt;Â  Â  åœ¨ç¬¬44è¡Œè°ƒç”¨äº†drawKDJæ–¹æ³•å°†KDJç»˜åˆ¶å‡ºæ¥ã€‚è¿è¡Œè¿™ä¸ªèŒƒä¾‹ç¨‹åºä¹‹åï¼Œå³å¯çœ‹åˆ°å¦‚å›¾æ‰€ç¤ºçš„ç»“æœï¼Œå…¶ä¸­KDJä¸‰æ ¹æ›²çº¿åˆ†åˆ«ç”¨è“è‰²ã€ç»¿è‰²å’Œç´«è‰²ç»˜åˆ¶å‡ºæ¥ï¼ˆå› ä¸ºæœ¬ä¹¦é‡‡ç”¨é»‘ç™½å°åˆ·è€Œçœ‹ä¸å‡ºå½©è‰²ï¼Œè¯·è¯»è€…åœ¨è‡ªå·±çš„è®¡ç®—æœºä¸Šè¿è¡Œè¿™ä¸ªèŒƒä¾‹ç¨‹åºï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1226172/202008/1226172-20200828070855063-787059887.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â  Â  ä¸‹å›¾æ˜¯ä»è‚¡ç¥¨è½¯ä»¶ä¸­å¾—åˆ°çš„è‚¡ç¥¨â€œé‡‘çŸ³èµ„æºâ€åœ¨åŒæ—¶é—´æ®µå†…çš„KDJèµ°åŠ¿å›¾ï¼Œä¸¤è€…çš„å˜åŒ–è¶‹åŠ¿åŸºæœ¬ä¸€è‡´ã€‚&lt;/p&gt;
&lt;p&gt;Â  Â Â &lt;img src=&quot;https://img2020.cnblogs.com/blog/1226172/202008/1226172-20200828070923843-107658905.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â &lt;strong&gt;æœ¬æ–‡å¯ä»¥è½¬è½½ï¼Œè½¬è½½æ—¶è¯·å…¨æ–‡è½¬è½½ï¼Œåˆ«æœ‰åˆ èŠ‚ï¼Œå¹¶ç”¨é“¾æ¥çš„å½¢å¼ç»™å‡ºåŸæ–‡é“¾æ¥ã€‚å¦åˆ™çš„è¯ï¼Œå¯èƒ½ä¼šé‡åˆ°å‡ºç‰ˆç¤¾çš„ç»´æƒã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1226172/202008/1226172-20200828071133055-1830235744.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/strong&gt;&lt;/p&gt;


&lt;p&gt;Â  Â  Â æ–‡æœ¬ç›¸å…³é“¾æ¥:&lt;/p&gt;
&lt;div class=&quot;PostList&quot;&gt;
&lt;div class=&quot;postTitl2&quot;&gt;&lt;a id=&quot;PostsList1_rpPosts_TitleUrl_1&quot; class=&quot;vertical-middle&quot; href=&quot;https://www.cnblogs.com/JavaArchitect/p/13534075.html&quot;&gt;ç”¨Pythonçš„Pandaså’ŒMatplotlibç»˜åˆ¶è‚¡ç¥¨å”å¥‡å®‰é€šé“ï¼Œå¸ƒæ—å¸¦é€šé“å’Œé³„é±¼ç»„çº¿Â &lt;/a&gt;&lt;span class=&quot;postDesc2&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;PostList&quot;&gt;
&lt;div class=&quot;postTitl2&quot;&gt;&lt;a id=&quot;PostsList1_rpPosts_TitleUrl_2&quot; class=&quot;vertical-middle&quot; href=&quot;https://www.cnblogs.com/JavaArchitect/p/13489328.html&quot;&gt;ç”¨Pythonçˆ¬å–è‚¡ç¥¨æ•°æ®ï¼Œç»˜åˆ¶Kçº¿å’Œå‡çº¿å¹¶ç”¨æœºå™¨å­¦ä¹ é¢„æµ‹è‚¡ä»·ï¼ˆæ¥è‡ªæˆ‘å‡ºçš„ä¹¦ï¼‰Â &lt;/a&gt;&lt;span class=&quot;postDesc2&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;PostList&quot;&gt;
&lt;div class=&quot;postTitl2&quot;&gt;&lt;a id=&quot;PostsList1_rpPosts_TitleUrl_3&quot; class=&quot;vertical-middle&quot; href=&quot;https://www.cnblogs.com/JavaArchitect/p/13180774.html&quot;&gt;ç”¨Pythonè¯­è¨€ç»˜åˆ¶è‚¡å¸‚OBVæŒ‡æ ‡æ•ˆæœÂ &lt;/a&gt;&lt;span class=&quot;postDesc2&quot;&gt;&lt;span class=&quot;post-view-count&quot;/&gt;&lt;/span&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;PostList&quot;&gt;
&lt;div class=&quot;postTitl2&quot;&gt;&lt;a id=&quot;PostsList1_rpPosts_TitleUrl_4&quot; class=&quot;vertical-middle&quot; href=&quot;https://www.cnblogs.com/JavaArchitect/p/13181181.html&quot;&gt;ç¨‹åºå‘˜å¦‚ä½•é«˜æ•ˆå­¦Pythonï¼Œå¦‚ä½•é«˜æ•ˆç”¨PythonæŒ£é’±Â &lt;/a&gt;&lt;span class=&quot;postDesc2&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;PostList&quot;&gt;
&lt;div class=&quot;postTitl2&quot;&gt;&lt;a id=&quot;PostsList1_rpPosts_TitleUrl_5&quot; class=&quot;vertical-middle&quot; href=&quot;https://www.cnblogs.com/JavaArchitect/p/12921960.html&quot;&gt;ç”¨matplotlibå’Œpandasç»˜åˆ¶è‚¡ç¥¨MACDæŒ‡æ ‡å›¾ï¼Œå¹¶éªŒè¯åŒ–äº¤æ˜“ç­–ç•¥Â &lt;/a&gt;&lt;span class=&quot;postDesc2&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;PostList&quot;&gt;
&lt;div class=&quot;postTitl2&quot;&gt;&lt;a id=&quot;PostsList1_rpPosts_TitleUrl_6&quot; class=&quot;vertical-middle&quot; href=&quot;https://www.cnblogs.com/JavaArchitect/p/12892692.html&quot;&gt;å‘å¤§å®¶ä»‹ç»æˆ‘çš„æ–°ä¹¦ï¼šã€ŠåŸºäºè‚¡ç¥¨å¤§æ•°æ®åˆ†æçš„Pythonå…¥é—¨å®æˆ˜ã€‹&lt;/a&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;PostList&quot;&gt;
&lt;div class=&quot;postTitl2&quot;&gt;&lt;a id=&quot;PostsList1_rpPosts_TitleUrl_7&quot; class=&quot;vertical-middle&quot; href=&quot;https://www.cnblogs.com/JavaArchitect/p/11717998.html&quot;&gt;é€šè¿‡æœºå™¨å­¦ä¹ çš„çº¿æ€§å›å½’ç®—æ³•é¢„æµ‹è‚¡ç¥¨èµ°åŠ¿ï¼ˆç”¨Pythonå®ç°ï¼‰Â &lt;/a&gt;&lt;span class=&quot;postDesc2&quot;&gt;&lt;span class=&quot;post-view-count&quot;/&gt;&lt;/span&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;PostList&quot;&gt;
&lt;div class=&quot;postTitl2&quot;&gt;&lt;a id=&quot;PostsList1_rpPosts_TitleUrl_8&quot; class=&quot;vertical-middle&quot; href=&quot;https://www.cnblogs.com/JavaArchitect/p/11660792.html&quot;&gt;åœ¨æˆ‘çš„æ–°ä¹¦é‡Œï¼Œå°è¯•ç€ç”¨è‚¡ç¥¨æ¡ˆä¾‹è®²è¿°Pythonçˆ¬è™«å¤§æ•°æ®å¯è§†åŒ–ç­‰çŸ¥è¯†Â &lt;/a&gt;&lt;span class=&quot;postDesc2&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;PostList&quot;&gt;
&lt;div class=&quot;postTitl2&quot;&gt;&lt;a id=&quot;PostsList1_rpPosts_TitleUrl_9&quot; class=&quot;vertical-middle&quot; href=&quot;https://www.cnblogs.com/JavaArchitect/p/11463091.html&quot;&gt;ä»¥è‚¡ç¥¨RSIæŒ‡æ ‡ä¸ºä¾‹ï¼Œå­¦ä¹ Pythonå‘é€é‚®ä»¶åŠŸèƒ½ï¼ˆå«RSIæŒ‡æ ‡ç¡®å®šå–ç‚¹ç­–ç•¥ï¼‰Â &lt;/a&gt;&lt;span class=&quot;postDesc2&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;PostList&quot;&gt;
&lt;div class=&quot;postTitl2&quot;&gt;&lt;a id=&quot;PostsList1_rpPosts_TitleUrl_10&quot; class=&quot;vertical-middle&quot; href=&quot;https://www.cnblogs.com/JavaArchitect/p/11350683.html&quot;&gt;ä»¥é¢„æµ‹è‚¡ç¥¨æ¶¨è·Œæ¡ˆä¾‹å…¥é—¨åŸºäºSVMçš„æœºå™¨å­¦ä¹ Â &lt;/a&gt;&lt;span class=&quot;postDesc2&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;PostList&quot;&gt;
&lt;div class=&quot;postTitl2&quot;&gt;&lt;a id=&quot;PostsList1_rpPosts_TitleUrl_11&quot; class=&quot;vertical-middle&quot; href=&quot;https://www.cnblogs.com/JavaArchitect/p/11162005.html&quot;&gt;ç”¨pythonçš„matplotlibå’Œnumpyåº“ç»˜åˆ¶è‚¡ç¥¨Kçº¿å‡çº¿å’Œæˆäº¤é‡çš„æ•´åˆæ•ˆæœï¼ˆå«é‡åŒ–éªŒè¯äº¤æ˜“ç­–ç•¥ä»£ç ï¼‰Â &lt;/a&gt;&lt;span class=&quot;postDesc2&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;PostList&quot;&gt;
&lt;div class=&quot;postTitl2&quot;&gt;&lt;a id=&quot;PostsList1_rpPosts_TitleUrl_12&quot; class=&quot;vertical-middle&quot; href=&quot;https://www.cnblogs.com/JavaArchitect/p/11014215.html&quot;&gt;ç”¨pythonçš„matplotlibå’Œnumpyåº“ç»˜åˆ¶è‚¡ç¥¨Kçº¿å‡çº¿çš„æ•´åˆæ•ˆæœï¼ˆå«ä»ç½‘ç»œæ¥å£çˆ¬å–æ•°æ®å’ŒéªŒè¯äº¤æ˜“ç­–ç•¥ä»£ç ï¼‰Â &lt;/a&gt;&lt;span class=&quot;postDesc2&quot;&gt;&lt;span class=&quot;post-view-count&quot;/&gt;&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;
</description>
<pubDate>Thu, 27 Aug 2020 23:12:00 +0000</pubDate>
<dc:creator>hsm_computer</dc:creator>
<og:description>æˆ‘æœ€è¿‘å‡ºäº†ä¸€æœ¬ä¹¦ï¼Œã€ŠåŸºäºè‚¡ç¥¨å¤§æ•°æ®åˆ†æçš„Pythonå…¥é—¨å®æˆ˜ è§†é¢‘æ•™å­¦ç‰ˆã€‹ï¼Œäº¬ä¸œé“¾æ¥ï¼šhttps://item.jd.com/69241653952.htmlï¼Œåœ¨å…¶ä¸­ç»™å‡ºäº†MACDï¼ŒKDJç­‰æŒ‡æ ‡å›¾çš„ç»˜</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/JavaArchitect/p/13575164.html</dc:identifier>
</item>
<item>
<title>.NET ORM å¯¼èˆªå±æ€§ã€åˆ°åº•ã€‘å¯ä»¥è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ - nicye</title>
<link>http://www.cnblogs.com/kellynic/p/13575053.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/kellynic/p/13575053.html</guid>
<description>&lt;h2 id=&quot;å†™åœ¨å¼€å¤´&quot;&gt;å†™åœ¨å¼€å¤´&lt;/h2&gt;
&lt;p&gt;ä»æœ€æ—©æœŸå…¥é—¨æ—¶çš„å•è¡¨æ“ä½œï¼Œ&lt;/p&gt;
&lt;p&gt;åˆ°åæ¥æ¥è§¦äº† left joinã€right joinã€inner join æŸ¥è¯¢ï¼Œ&lt;/p&gt;
&lt;p&gt;å› ä¸ºç»è´¹æœ‰é™ï¼Œéœ€è¦ä¸æ–­åœ¨å¤šè¡¨æŸ¥è¯¢ä¸­æŠ˜è…¾è§£å†³å®é™…éœ€æ±‚ï¼Œä¸çŸ¥é“æ˜¯å¦æœ‰è¿‡è¿™æ ·çš„ç»å†ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä»å®é™…å¼€å‘éœ€æ±‚è®²è§£å¯¼èˆªå±æ€§ï¼ˆManyToOneã€OneToManyã€ManyToManyï¼‰çš„è®¾è®¡æ€è·¯ï¼Œå’Œåˆ°åº•è§£å†³äº†ä»€ä¹ˆé—®é¢˜ã€‚æç¤ºï¼šä»¥ä¸‹ç¤ºä¾‹ä»£ç ä½¿ç”¨äº† FreeSql è¯­æ³•ï¼Œå’Œä¸€äº›ä¼ªä»£ç ã€‚&lt;/p&gt;
&lt;hr/&gt;&lt;h2 id=&quot;å…¥æˆå‡†å¤‡&quot;&gt;å…¥æˆå‡†å¤‡&lt;/h2&gt;
&lt;p&gt;FreeSql æ˜¯ .Net ORMï¼Œèƒ½æ”¯æŒ .NetFramework4.0+ã€.NetCoreã€Xamarinã€XAUIã€Blazorã€ä»¥åŠè¿˜æœ‰è¯´ä¸å‡ºæ¥çš„è¿è¡Œå¹³å°ï¼Œå› ä¸ºä»£ç ç»¿è‰²æ— ä¾èµ–ï¼Œæ”¯æŒæ–°å¹³å°éå¸¸ç®€å•ã€‚ç›®å‰å•å…ƒæµ‹è¯•æ•°é‡ï¼š5000+ï¼ŒNugetä¸‹è½½æ•°é‡ï¼š180K+ï¼Œæºç å‡ ä¹æ¯å¤©éƒ½æœ‰æäº¤ã€‚å€¼å¾—é«˜å…´çš„æ˜¯ FreeSql åŠ å…¥äº† ncc å¼€æºç¤¾åŒºï¼š&lt;a href=&quot;https://github.com/dotnetcore/FreeSql&quot;&gt;https://github.com/dotnetcore/FreeSql&lt;/a&gt;ï¼ŒåŠ å…¥ç»„ç»‡ä¹‹åç¤¾åŒºè´£ä»»æ„Ÿæ›´å¤§ï¼Œéœ€è¦æ›´åŠªåŠ›åšå¥½å“è´¨ï¼Œä¸ºå¼€æºç¤¾åŒºå‡ºä¸€ä»½åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;QQç¾¤ï¼š4336577(å·²æ»¡)ã€8578575(åœ¨çº¿)ã€52508226(åœ¨çº¿)&lt;/p&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆè¦é‡å¤é€ è½®å­ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/31407/202005/31407-20200525013907903-1470982538.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;FreeSql ä¸»è¦ä¼˜åŠ¿åœ¨äºæ˜“ç”¨æ€§ä¸Šï¼ŒåŸºæœ¬æ˜¯å¼€ç®±å³ç”¨ï¼Œåœ¨ä¸åŒæ•°æ®åº“ä¹‹é—´åˆ‡æ¢å…¼å®¹æ€§æ¯”è¾ƒå¥½ã€‚ä½œè€…èŠ±äº†å¤§é‡çš„æ—¶é—´ç²¾åŠ›åœ¨è¿™ä¸ªé¡¹ç›®ï¼Œè‚¯è¯·æ‚¨èŠ±åŠå°æ—¶äº†è§£ä¸‹é¡¹ç›®ï¼Œè°¢è°¢ã€‚åŠŸèƒ½ç‰¹æ€§å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;&lt;li&gt;æ”¯æŒ CodeFirst å¯¹æ¯”ç»“æ„å˜åŒ–è¿ç§»ï¼›&lt;/li&gt;
&lt;li&gt;æ”¯æŒ DbFirst ä»æ•°æ®åº“å¯¼å…¥å®ä½“ç±»ï¼›&lt;/li&gt;
&lt;li&gt;æ”¯æŒ ä¸°å¯Œçš„è¡¨è¾¾å¼å‡½æ•°ï¼Œè‡ªå®šä¹‰è§£æï¼›&lt;/li&gt;
&lt;li&gt;æ”¯æŒ æ‰¹é‡æ·»åŠ ã€æ‰¹é‡æ›´æ–°ã€BulkCopyï¼›&lt;/li&gt;
&lt;li&gt;æ”¯æŒ å¯¼èˆªå±æ€§ï¼Œè´ªå©ªåŠ è½½ã€å»¶æ—¶åŠ è½½ã€çº§è”ä¿å­˜ï¼›&lt;/li&gt;
&lt;li&gt;æ”¯æŒ è¯»å†™åˆ†ç¦»ã€åˆ†è¡¨åˆ†åº“ï¼Œç§Ÿæˆ·è®¾è®¡ï¼›&lt;/li&gt;
&lt;li&gt;æ”¯æŒ MySql/SqlServer/PostgreSQL/Oracle/Sqlite/è¾¾æ¢¦/ç¥é€š/äººå¤§é‡‘ä»“/MsAccessï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;FreeSql ä½¿ç”¨éå¸¸ç®€å•ï¼Œåªéœ€è¦å®šä¹‰ä¸€ä¸ª IFreeSql å¯¹è±¡å³å¯ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;static IFreeSql fsql = new FreeSql.FreeSqlBuilder()
    .UseConnectionString(FreeSql.DataType.MySql, connectionString)
    .UseAutoSyncStructure(true) //è‡ªåŠ¨åŒæ­¥å®ä½“ç»“æ„åˆ°æ•°æ®åº“
    .Build(); //è¯·åŠ¡å¿…å®šä¹‰æˆ Singleton å•ä¾‹æ¨¡å¼
&lt;/code&gt;
&lt;/pre&gt;
&lt;hr/&gt;&lt;h2 id=&quot;manytoone-å¤šå¯¹ä¸€&quot;&gt;ManyToOne å¤šå¯¹ä¸€&lt;/h2&gt;
&lt;p&gt;left joinã€right joinã€inner join ä»è¡¨çš„å¤–é”®çœ‹æ¥ï¼Œä¸»è¦æ˜¯é’ˆå¯¹ä¸€å¯¹ä¸€ã€å¤šå¯¹ä¸€çš„æŸ¥è¯¢ï¼Œæ¯”å¦‚ Topicã€Type ä¸¤ä¸ªè¡¨ï¼Œä¸€ä¸ª Topic åªèƒ½å±äºä¸€ä¸ª Typeï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-sql&quot;&gt;select
topic.*, type.name
from topic
inner join type on type.id = topic.typeid
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æŸ¥è¯¢ topic æŠŠ type.name ä¸€èµ·è¿”å›ï¼Œä¸€ä¸ª type å¯ä»¥å¯¹åº” N ä¸ª topicï¼Œå¯¹äº topic æ¥è®²æ˜¯ Nå¯¹1ï¼Œæ‰€ä»¥æˆ‘å‘½åä¸º ManyToOne&lt;/p&gt;
&lt;p&gt;åœ¨ c# ä¸­ä½¿ç”¨å®ä½“æŸ¥è¯¢çš„æ—¶å€™ï¼ŒNå¯¹1 åœºæ™¯æŸ¥è¯¢å®¹æ˜“ï¼Œä½†æ˜¯æ¥æ”¶å¯¹è±¡ä¸æ–¹ä¾¿ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c#&quot;&gt;fsql.Select&amp;lt;Topic, Type&amp;gt;()
  .LeftJoin((a,b) =&amp;gt; a.typeid == b.Id)
  .ToList((a,b) =&amp;gt; new { a, b })
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™æ ·åªèƒ½è¿”å›åŒ¿åç±»å‹ï¼Œé™¤éè‡ªå·±å†å»å»ºä¸€ä¸ª TopicDtoï¼Œä½†æ˜¯æŸ¥è¯¢åœºæ™¯çœŸçš„å¤ªå¤šäº†ï¼Œå‡ ä¹æ— æ³•ç©·ä¸¾ TopicDtoï¼Œéšç€éœ€æ±‚çš„å˜åŒ–ï¼Œåé¢è¿™ä¸ª Dto ä¼šå¾ˆæ³›æ»¥è¶Šæ¥è¶Šå¤šã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/31407/202008/31407-20200828024634879-2077957164.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;äºæ˜¯èªæ˜çš„äººç±»æƒ³åˆ°äº†å¯¼èˆªå±æ€§ï¼Œåœ¨ Topic å®ä½“å†…å¢åŠ  Type å±æ€§æ¥æ”¶è¿”å›çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c#&quot;&gt;fsql.Select&amp;lt;Topic&amp;gt;()
   .LeftJoin((a,b) =&amp;gt; a.Type.id == a.typeid)
   .ToList();
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿”å›æ•°æ®åï¼Œå¯ä»¥ä½¿ç”¨ [0].Type.name å¾—åˆ°åˆ†ç±»åç§°ã€‚&lt;/p&gt;
&lt;p&gt;ç»è¿‡ä¸€æ®µæ—¶é—´çš„ä½¿ç”¨ï¼Œå‘ç° InnerJoin çš„æ¡ä»¶æ€»æ˜¯åœ¨é‡å¤ç¼–å†™ï¼Œæ¯æ¬¡éƒ½è¦ç”¨å¤§è„‘å›å¿†è¿™ä¸ªæ¡ä»¶ï¼ˆè®ºå¤´å‘æ€ä¹ˆæ‰å…‰çš„ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/31407/202008/31407-20200828024750137-1027850166.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿›åŒ–ä¸€æ¬¡ä¹‹åï¼Œæˆ‘ä»¬æŠŠ join çš„æ¡ä»¶åšæˆäº†é…ç½®ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c#&quot;&gt;class Topic
{
    public int typeid { get; set; }
    [Navigate(nameof(typeid))]
    public Type Type { get; set; }
}
class Type
{
    public int id { get; set; }
    public string name { get; set; }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æŸ¥è¯¢çš„æ—¶å€™å˜æˆäº†è¿™æ ·ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c#&quot;&gt;fsql.Select&amp;lt;Topic&amp;gt;()
   .Include(a =&amp;gt; a.Type)
   .ToList();
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿”å›æ•°æ®åï¼ŒåŒæ ·å¯ä»¥ä½¿ç”¨ [0].Type.name å¾—åˆ°åˆ†ç±»åç§°ã€‚&lt;/p&gt;
&lt;ul readability=&quot;-0.5&quot;&gt;&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;[Navigate(nameof(typeid))] ç†è§£æˆï¼ŒTopic.typeid ä¸ Type.id å…³è”ï¼Œè¿™é‡Œçœç•¥äº† Type.id çš„é…ç½®ï¼Œå› ä¸º Type.id æ˜¯ä¸»é”®ï¼ˆå·²çŸ¥æ¡ä»¶æ— é¡»é…ç½®ï¼‰ï¼Œä»è€Œè¾¾åˆ°ç®€åŒ–é…ç½®çš„æ•ˆæœ&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;.Include(a =&amp;gt; a.Type) æŸ¥è¯¢çš„æ—¶å€™ä¼šè‡ªåŠ¨è½¬åŒ–ä¸ºï¼š.LeftJoin(a =&amp;gt; a.Type.id == a.typeid)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;hr/&gt;&lt;p&gt;æ€è€ƒï¼šToList é»˜è®¤è¿”å› topic.* å’Œ type.* ä¸å¯¹ï¼Œå› ä¸ºå½“ Topic ä¸‹é¢çš„å¯¼èˆªå±æ€§æœ‰å¾ˆå¤šçš„æ—¶å€™ï¼Œæ¯æ¬¡éƒ½è¿”å›æ‰€æœ‰å¯¼èˆªå±æ€§ï¼Ÿ&lt;/p&gt;
&lt;p&gt;äºæ˜¯ï¼šToList çš„æ—¶å€™åªä¼šè¿”å› Include è¿‡çš„ï¼Œæˆ–è€…ä½¿ç”¨è¿‡çš„ Nå¯¹1 å¯¼èˆªå±æ€§å­—æ®µã€‚&lt;/p&gt;
&lt;ul readability=&quot;2&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;fsql.Select&amp;lt;Topic&amp;gt;().ToList(); è¿”å› topic.*&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;fsql.Select&amp;lt;Topic&amp;gt;().Include(a =&amp;gt; a.Type).ToList(); è¿”å› topic.* å’Œ type.*&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;fsql.Select&amp;lt;Topic&amp;gt;().Where(a =&amp;gt; a.Type.name == &quot;c#&quot;).ToList(); è¿”å› topic.* å’Œ type.*ï¼Œæ­¤æ—¶ä¸éœ€è¦æ˜¾å¼ä½¿ç”¨ Include(a =&amp;gt; a.Type)&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;fsql.Select().ToList(a =&amp;gt; new { Topic = a, TypeName = a.Type.name }); è¿”å› topic.* å’Œ type.name&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;hr/&gt;&lt;p&gt;æœ‰äº†è¿™äº›æœºåˆ¶ï¼Œå„ç§å¤æ‚çš„ Nå¯¹1ï¼Œå°±å¾ˆå¥½æŸ¥è¯¢äº†ï¼Œæ¯”å¦‚è¿™æ ·çš„æŸ¥è¯¢ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c#&quot;&gt;fsql.Select&amp;lt;Tag&amp;gt;().Where(a =&amp;gt; a.Parent.Parent.name == &quot;ç²¤è¯­&quot;).ToList();
//è¯¥ä»£ç äº§ç”Ÿä¸‰ä¸ª tag è¡¨ left join æŸ¥è¯¢ã€‚

class Tag {
  public int id { get; set; }
  public string name { get; set; }
  
  public int? parentid { get; set; }
  public Tag Parent { get; set; }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;æ˜¯ä¸æ˜¯æ¯”è‡ªå·±ä½¿ç”¨ left join/inner join/right join æ–¹ä¾¿å¤šäº†ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;hr/&gt;&lt;h2 id=&quot;onetoone-ä¸€å¯¹ä¸€&quot;&gt;OneToOne ä¸€å¯¹ä¸€&lt;/h2&gt;
&lt;p&gt;ä¸€å¯¹ä¸€ å’Œ Nå¯¹1 è§£å†³ç›®çš„æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ä¸ºäº†ç®€åŒ–å¤šè¡¨ join æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚ order, order_detail ä¸¤ä¸ªè¡¨ï¼Œä¸€å¯¹ä¸€åœºæ™¯ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c#&quot;&gt;fsql.Select&amp;lt;order&amp;gt;().Include(a =&amp;gt; a.detail).ToList();

fsql.Select&amp;lt;order_detail&amp;gt;().Include(a =&amp;gt; a.order).ToList();
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æŸ¥è¯¢çš„æ•°æ®ä¸€æ ·çš„ï¼Œåªæ˜¯è¿”å›çš„ c# ç±»å‹ä¸ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€å¯¹ä¸€ï¼Œåªæ˜¯é…ç½®ä¸Šæœ‰ç‚¹ä¸åŒï¼Œä½¿ç”¨æ–¹å¼è·Ÿ Nå¯¹1 ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€å¯¹ä¸€ï¼Œè¦æ±‚ä¸¤è¾¹éƒ½å­˜åœ¨ç›®æ ‡å®ä½“å±æ€§ï¼Œå¹¶ä¸”ä¸¤è¾¹éƒ½æ˜¯ä½¿ç”¨ä¸»é”®åš Navigateã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c#&quot;&gt;class order
{
    public int id { get; set; }
    [Navigate(nameof(id))]
    public order_detail detail { get; set; }
}
class order_detail
{
    public int orderid { get; set; }
    [Navigate(nameof(orderid))]
    public order order { get; set; }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/31407/202008/31407-20200828032759646-1618203847.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;onetomany-ä¸€å¯¹å¤š&quot;&gt;OneToMany ä¸€å¯¹å¤š&lt;/h2&gt;
&lt;p&gt;1å¯¹Nï¼Œå’Œ Nå¯¹1 æ˜¯åè¿‡æ¥çœ‹&lt;/p&gt;
&lt;p&gt;topic ç›¸å¯¹äº type æ˜¯ Nå¯¹1&lt;/p&gt;
&lt;p&gt;type ç›¸å¯¹äº topic æ˜¯ 1å¯¹N&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/31407/202008/31407-20200828025810358-1865590922.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨ Type å®ä½“ç±»ä¸­å¯ä»¥å®šä¹‰ List&amp;lt;Topic&amp;gt; Topics { get; set; } å¯¼èˆªå±æ€§&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c#&quot;&gt;class Type
{
    public int id { get; set; }
    public List&amp;lt;Topic&amp;gt; Topics { get; set; }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;1å¯¹N å¯¼èˆªå±æ€§çš„ä¸»è¦ä¼˜åŠ¿ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æŸ¥è¯¢ Type çš„æ—¶å€™å¯ä»¥æŠŠ topic ä¸€èµ·æŸ¥è¯¢å‡ºæ¥ï¼Œå¹¶ä¸”è¿˜æ˜¯ç”¨ Type ä½œä¸ºè¿”å›ç±»å‹ã€‚&lt;/li&gt;
&lt;li&gt;æ·»åŠ  Type çš„æ—¶å€™ï¼ŒæŠŠ Topics ä¸€èµ·æ·»åŠ &lt;/li&gt;
&lt;li&gt;æ›´æ–° Type çš„æ—¶å€™ï¼ŒæŠŠ Topics ä¸€èµ·æ›´æ–°&lt;/li&gt;
&lt;li&gt;åˆ é™¤ Type çš„æ—¶å€™ï¼Œæ²¡åŠ¨ä½œï¼ˆ ef é‚£è¾¹æ˜¯ç”¨æ•°æ®åº“å¤–é”®åŠŸèƒ½åˆ é™¤å­è¡¨è®°å½•çš„ï¼‰&lt;/li&gt;
&lt;/ul&gt;&lt;hr/&gt;&lt;h3 id=&quot;onetomany-çº§è”æŸ¥è¯¢&quot;&gt;OneToMany çº§è”æŸ¥è¯¢&lt;/h3&gt;
&lt;p&gt;æŠŠ Type.name ä¸º c# java phpï¼Œä»¥åŠå®ƒä»¬çš„ topic æŸ¥è¯¢å‡ºæ¥ï¼š&lt;/p&gt;
&lt;p&gt;æ–¹æ³•ä¸€ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c#&quot;&gt;fsql.Select&amp;lt;Type&amp;gt;()
   .IncludeMany(a =&amp;gt; a.Topics)
   .Where(a =&amp;gt; new { &quot;c#&quot;, &quot;java&quot;, &quot;php&quot; }.Contains(a.name))
   .ToList();
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=&quot;language-json&quot;&gt;[
{
  name : &quot;c#&quot;,
  Topics: [ æ–‡ç« åˆ—è¡¨ ]
}
...
]
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™ç§æ–¹æ³•æ˜¯ä» Type æ–¹å‘æŸ¥è¯¢çš„ï¼Œéå¸¸ç¬¦åˆä½¿ç”¨æ–¹çš„æ•°æ®æ ¼å¼è¦æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;æœ€ç»ˆæ˜¯åˆ†ä¸¤æ¬¡ SQL æŸ¥è¯¢æ•°æ®å›æ¥çš„ï¼Œå¤§æ¦‚æ˜¯ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-sql&quot;&gt;select * from type where name in ('c#', 'java', 'php')
select * from topics where typeid in (ä¸Šä¸€æ¡SQLè¿”å›çš„id)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ–¹æ³•äºŒï¼šä» Topic æ–¹å‘ä¹Ÿå¯ä»¥æŸ¥è¯¢å‡ºæ¥ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c#&quot;&gt;fsql.Select&amp;lt;Topic&amp;gt;()
   .Where(a =&amp;gt; new { &quot;c#&quot;, &quot;java&quot;, &quot;php&quot; }.Contains(a.Type.name)
   .ToList();
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸€æ¬¡ SQL æŸ¥è¯¢è¿”å›æ‰€æœ‰æ•°æ®çš„ï¼Œå¤§æ¦‚æ˜¯ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-sql&quot;&gt;select * from topic
left join type on type.id = topic.typeid
where type.name in ('c#', 'java', 'php')
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/31407/202008/31407-20200828030137134-994318919.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è§£é‡Šï¼šæ–¹æ³•ä¸€ IncludeMany è™½ç„¶æ˜¯åˆ†å¼€ä¸¤æ¬¡æŸ¥è¯¢çš„ï¼Œä½†æ˜¯ IO æ€§èƒ½è¿œé«˜äº æ–¹æ³•äºŒã€‚æ–¹æ³•äºŒæŸ¥è¯¢ç®€å•æ•°æ®è¿˜è¡Œï¼Œå¤æ‚ä¸€ç‚¹å¾ˆå®¹æ˜“äº§ç”Ÿå¤§é‡é‡å¤ IO æ•°æ®ã€‚å¹¶ä¸”æ–¹æ³•äºŒè¿”å›çš„æ•°æ®ç»“æ„ List&amp;lt;Topic&amp;gt;ï¼Œä¸€èˆ¬ä¸ç¬¦åˆä½¿ç”¨æ–¹è¦æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;IncludeMany ç¬¬äºŒæ¬¡æŸ¥è¯¢ topic çš„æ—¶å€™ï¼Œå¦‚ä½•æŠŠè®°å½•åˆ†é…åˆ° c# java php å¯¹åº”çš„ Type.Topics ä¸­ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥è¿™ä¸ªæ—¶å€™ï¼Œé…ç½®ä¸€ä¸‹å¯¼èˆªå…³ç³»å°±è¡Œäº†ã€‚&lt;/p&gt;
&lt;p&gt;Nå¯¹1ï¼Œè¿™æ ·é…ç½®çš„ï¼ˆä»è‡ªå·±èº«ä¸Šæ‰¾ä¸€ä¸ªå­—æ®µï¼Œä¸ç›®æ ‡ç±»å‹ä¸»é”®å…³è”ï¼‰ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c#&quot;&gt;class Topic
{
    public int typeid { get; set; }
    [Navigate(nameof(typeid))]
    public Type Type { get; set; }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;1å¯¹Nï¼Œè¿™æ ·é…ç½®çš„ï¼ˆä»ç›®æ ‡ç±»å‹ä¸Šæ‰¾å­—æ®µï¼Œä¸è‡ªå·±çš„ä¸»é”®å…³è”ï¼‰ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c#&quot;&gt;class Type
{
    public int id { get; set; }
    [Navigate(nameof(topic.typeid))]
    public List&amp;lt;Topic&amp;gt; Topics { get; set; }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸¾ä¸€åä¸‰ï¼š&lt;/p&gt;
&lt;p&gt;IncludeMany çº§è”æŸ¥è¯¢ï¼Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œè¿˜å¯ä»¥ IncludeMany(a =&amp;gt; a.Topics, then =&amp;gt; then.IncludeMany(b =&amp;gt; b.Comments))&lt;/p&gt;
&lt;p&gt;å‡è®¾ï¼Œè¿˜éœ€è¦æŠŠ topic å¯¹åº”çš„ comments ä¹ŸæŸ¥è¯¢å‡ºæ¥ã€‚æœ€å¤šä¼šäº§ç”Ÿä¸‰æ¡SQLæŸ¥è¯¢ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-sql&quot;&gt;select * from type where name in ('c#', 'java', 'php')
select * from topic where typeid in (ä¸Šä¸€æ¡SQLè¿”å›çš„id)
select * from comment where topicid in (ä¸Šä¸€æ¡SQLè¿”å›çš„id)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ€è€ƒï¼šè¿™æ ·çº§è”æŸ¥è¯¢å…¶å®æ˜¯æœ‰ç¼ºç‚¹çš„ï¼Œæ¯”å¦‚ c# ä¸‹é¢æœ‰1000ç¯‡æ–‡ç« ï¼Œé‚£ä¸æ˜¯éƒ½è¿”å›äº†ï¼Ÿ&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c#&quot;&gt;IncludeMany(a =&amp;gt; a.Topics.Take(10))
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™æ ·å°±èƒ½è§£å†³æ¯ä¸ªåˆ†ç±»åªè¿”å› 10 æ¡æ•°æ®äº†ï¼Œè¿™ä¸ªåŠŸèƒ½ ef/efcore ç›®å‰åšä¸åˆ°ï¼Œç›´åˆ° efcore 5.0 æ‰æ”¯æŒï¼Œè¿™å¯èƒ½æ˜¯å¾ˆå¤šäººå¿Œè®³ ef å¯¼èˆªå±æ€§çš„åŸå› ä¹‹ä¸€å§ã€‚å‡ ä¸ªæœˆå‰æˆ‘æµ‹è¯•äº† efcore 5.0 sqlite è¯¥åŠŸèƒ½æ˜¯æŠ¥é”™çš„ï¼Œä¹Ÿè®¸åªæ”¯æŒ sqlserverã€‚è€Œ FreeSql æ²¡æœ‰æ•°æ®åº“ç§ç±»é™åˆ¶ï¼Œè¿˜æ˜¯é‚£å¥è¯ï¼šéƒ½æ˜¯äº²å„¿å­ï¼&lt;/p&gt;
&lt;p&gt;å…³äº IncludeMany è¿˜æœ‰æ›´å¤šåŠŸèƒ½è¯·åˆ° github wiki æ–‡æ¡£ä¸­äº†è§£ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/31407/202008/31407-20200828032759646-1618203847.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;onetomany-çº§è”ä¿å­˜&quot;&gt;OneToMany çº§è”ä¿å­˜&lt;/h3&gt;
&lt;p&gt;å®è·µä¸­å‘ç°ï¼ŒNå¯¹1 ä¸é€‚åˆåšçº§è”ä¿å­˜ã€‚ä¿å­˜ Topic çš„æ—¶å€™æŠŠ Type ä¿¡æ¯ä¹Ÿä¿å­˜ï¼Ÿæˆ‘ä¸ªäººè®¤ä¸ºè‡ªä¸‹å‘ä¸Šä¿å­˜çš„åŠŸèƒ½å¤ªä¸å¯æ§äº†ï¼ŒFreeSql ç›®å‰ä¸æ”¯æŒè‡ªä¸‹å‘ä¸Šä¿å­˜ã€‚&lt;/p&gt;
&lt;p&gt;FreeSql æ”¯æŒçš„çº§è”ä¿å­˜ï¼Œæ˜¯è‡ªä¸Šå‘ä¸‹ã€‚ä¾‹å¦‚ä¿å­˜ Type çš„æ—¶å€™ï¼Œä¹ŸåŒæ—¶èƒ½ä¿å­˜ä»–çš„ Topicã€‚&lt;/p&gt;
&lt;p&gt;çº§è”ä¿å­˜ï¼Œå»ºè®®ç”¨åœ¨ä¸å¤ªé‡è¦çš„åŠŸèƒ½ï¼Œæˆ–è€…æµ‹è¯•æ•°æ®æ·»åŠ ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c#&quot;&gt;var repo = fsql.GetRepository&amp;lt;Type&amp;gt;();
repo.DbContextOptions.EnableAddOrUpdateNavigateList = true;
repo.DbContextOptions.NoneParameter = true;
repo.Insert(new Type
{
  name = &quot;c#&quot;,
  Topics = new List&amp;lt;Topic&amp;gt;(new[] {
    new Topic
    {
        ...
    }
  })
});
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…ˆæ·»åŠ  Typeï¼Œå¦‚æœä»–æ˜¯è‡ªå¢ï¼Œæ‹¿åˆ°è‡ªå¢å€¼ï¼Œå‘ä¸‹èµ‹ç»™ Topics å†æ’å…¥ topicã€‚&lt;/p&gt;
&lt;hr/&gt;&lt;h2 id=&quot;manytomany-å¤šå¯¹å¤š&quot;&gt;ManyToMany å¤šå¯¹å¤š&lt;/h2&gt;
&lt;p&gt;å¤šå¯¹å¤šæ˜¯å¾ˆå¸¸è§çš„ä¸€ç§è®¾è®¡ï¼Œå¦‚ï¼šTopic, Tag, TopicTag&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c#&quot;&gt;class Topic
{
    public int id { get; set; }
    public string title { get; set; }

    [Navigate(ManyToMany = typeof(TopicTag))]
    public List&amp;lt;Tag&amp;gt; Tags { get; set; }
}
public Tag
{
    public int id { get; set; }
    public string name { get; set; }

    [Navigate(ManyToMany = typeof(TopicTag))]
    public List&amp;lt;Topic&amp;gt; Topics { get; set; }
}
public TopicTag
{
    public int topicid { get; set; }
    public int tagid { get; set; }

    [Navigate(nameof(topicid))]
    public Topic Topic { get; set; }
    [Navigate(nameof(tagid))]
    public Tag Tag { get; set; }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;çœ‹ç€è§‰å¾—å¤æ‚ï¼Ÿï¼Ÿçœ‹å®Œåé¢æŸ¥è¯¢å¤šä¹ˆç®€å•çš„æ—¶å€™ï¼ŒçœŸçš„ä»€ä¹ˆéƒ½å€¼äº†ï¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Nå¯¹N å¯¼èˆªå±æ€§çš„ä¸»è¦ä¼˜åŠ¿ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æŸ¥è¯¢ Topic çš„æ—¶å€™å¯ä»¥æŠŠ Tag ä¸€èµ·æŸ¥è¯¢å‡ºæ¥ï¼Œå¹¶ä¸”è¿˜æ˜¯ç”¨ Topic ä½œä¸ºè¿”å›ç±»å‹ã€‚&lt;/li&gt;
&lt;li&gt;æ·»åŠ  Topic çš„æ—¶å€™ï¼ŒæŠŠ Tags ä¸€èµ·æ·»åŠ &lt;/li&gt;
&lt;li&gt;æ›´æ–° Topic çš„æ—¶å€™ï¼ŒæŠŠ Tags ä¸€èµ·æ›´æ–°&lt;/li&gt;
&lt;li&gt;åˆ é™¤ Topic çš„æ—¶å€™ï¼Œæ²¡åŠ¨ä½œï¼ˆ ef é‚£è¾¹æ˜¯ç”¨æ•°æ®åº“å¤–é”®åŠŸèƒ½åˆ é™¤å­è¡¨è®°å½•çš„ï¼‰&lt;/li&gt;
&lt;/ul&gt;&lt;hr/&gt;&lt;h3 id=&quot;manytomany-çº§è”æŸ¥è¯¢&quot;&gt;ManyToMany çº§è”æŸ¥è¯¢&lt;/h3&gt;
&lt;p&gt;æŠŠ Tag.name ä¸º c# java phpï¼Œä»¥åŠå®ƒä»¬çš„ topic æŸ¥è¯¢å‡ºæ¥ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c#&quot;&gt;fsql.Select&amp;lt;Tag&amp;gt;()
   .IncludeMany(a =&amp;gt; a.Topics)
   .Where(a =&amp;gt; new { &quot;c#&quot;, &quot;java&quot;, &quot;php&quot; }.Contains(a.name))
   .ToList();
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=&quot;language-json&quot;&gt;[
{
  name : &quot;c#&quot;,
  Topics: [ æ–‡ç« åˆ—è¡¨ ]
}
...
]
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æœ€ç»ˆæ˜¯åˆ†ä¸¤æ¬¡ SQL æŸ¥è¯¢æ•°æ®å›æ¥çš„ï¼Œå¤§æ¦‚æ˜¯ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-sql&quot;&gt;select * from tag where name in ('c#', 'java', 'php')
select * from topic where id in (select topicid from topictag where tagid in(ä¸Šä¸€æ¡SQLè¿”å›çš„id))
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚æœ Tag.name = &quot;c#&quot; ä¸‹é¢çš„ Topic è®°å½•å¤ªå¤šï¼Œåªæƒ³è¿”å› top 10ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c#&quot;&gt;.IncludeMany(a =&amp;gt; a.Topics.Take(10))
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¹Ÿå¯ä»¥åè¿‡æ¥æŸ¥ï¼ŒæŠŠ Topic.Type.name ä¸º c# java php çš„ topicï¼Œä»¥åŠå®ƒä»¬çš„ Tag æŸ¥è¯¢å‡ºæ¥ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c#&quot;&gt;fsql.Select&amp;lt;Topic&amp;gt;()
   .IncludeMany(a =&amp;gt; a.Tags)
   .Where(a =&amp;gt; new { &quot;c#&quot;, &quot;java&quot;, &quot;php&quot; }.Contains(a.Type.name))
   .ToList();
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=&quot;language-json&quot;&gt;[
{
  title : &quot;FreeSql 1.8.1 æ­£å¼å‘å¸ƒ&quot;,
  Type: { name: &quot;c#&quot; }
  Tags: [ æ ‡ç­¾åˆ—è¡¨ ]
}
...
]
&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;Nå¯¹N çº§è”æŸ¥è¯¢ï¼Œè·Ÿ 1å¯¹N ä¸€æ ·ï¼Œéƒ½æ˜¯ç”¨ IncludeManyï¼ŒNå¯¹N IncludeMany ä¹Ÿå¯ä»¥ç»§ç»­å‘ä¸‹ thenã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æŸ¥è¯¢ Tag.name = &quot;c#&quot; çš„æ‰€æœ‰ topicï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c#&quot;&gt;fsql.Select&amp;lt;Topic&amp;gt;()
   .Where(a =&amp;gt; a.Tags.AsSelect().Any(b =&amp;gt; b.name = &quot;c#&quot;))
   .ToList();
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;äº§ç”Ÿçš„ SQL å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-sql&quot;&gt;select * from topic
where id in ( 
    select topicid from topictag 
    where tagid in ( select id from tag where name = 'c#' ) 
)
&lt;/code&gt;
&lt;/pre&gt;
&lt;hr/&gt;&lt;h3 id=&quot;manytomany-çº§è”ä¿å­˜&quot;&gt;ManyToMany çº§è”ä¿å­˜&lt;/h3&gt;
&lt;p&gt;çº§è”ä¿å­˜ï¼Œå»ºè®®ç”¨åœ¨ä¸å¤ªé‡è¦çš„åŠŸèƒ½ï¼Œæˆ–è€…æµ‹è¯•æ•°æ®æ·»åŠ ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c#&quot;&gt;var repo = fsql.GetRepository&amp;lt;Topic&amp;gt;();
repo.DbContextOptions.EnableAddOrUpdateNavigateList = true;
repo.DbContextOptions.NoneParameter = true;
repo.Insert(new Topic
{
  title = &quot;FreeSql 1.8.1 æ­£å¼å‘å¸ƒ&quot;,
  Tags = new List&amp;lt;Tag&amp;gt;(new[] {
    new Tag { name = &quot;c#&quot; }
  })
});
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ’å…¥ topicï¼Œå†åˆ¤æ–­ Tag æ˜¯å¦å­˜åœ¨ï¼ˆå¦‚æœä¸å­˜åœ¨åˆ™æ’å…¥ tagï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å¾—åˆ° topic.id å’Œ tag.id å†æ’å…¥ TopicTagã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–æä¾›çš„æ–¹æ³• repo.SaveMany(topicå®ä½“, &quot;Tags&quot;) å®Œæ•´ä¿å­˜ TopicTag æ•°æ®ã€‚æ¯”å¦‚å½“ topicå®ä½“.Tags å±æ€§ä¸º Empty æ—¶ï¼Œåˆ é™¤ topicå®ä½“ å­˜åœ¨äº TopicTag æ‰€æœ‰è¡¨æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;SaveManyæœºåˆ¶ï¼šå®Œæ•´ä¿å­˜ï¼Œå¯¹æ¯” TopicTag è¡¨å·²å­˜åœ¨çš„æ•°æ®ï¼Œè®¡ç®—å‡ºæ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/31407/202008/31407-20200828032759646-1618203847.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;çˆ¶å­å…³ç³»&quot;&gt;çˆ¶å­å…³ç³»&lt;/h2&gt;
&lt;p&gt;çˆ¶å­å…³ç³»ï¼Œå…¶å®æ˜¯ ManyToOneã€OneToMany çš„ç»¼åˆä½“ï¼Œè‡ªå·±æŒ‡å‘è‡ªå·±ï¼Œå¸¸ç”¨äºæ ‘å½¢ç»“æ„è¡¨è®¾è®¡ã€‚&lt;/p&gt;
&lt;p&gt;çˆ¶å­å…³ç³»ï¼Œé™¤äº†èƒ½ä½¿ç”¨ ManyToOneã€OneToMany çš„ä½¿ç”¨æ–¹æ³•å¤–ï¼Œè¿˜æä¾›äº† CTEé€’å½’æŸ¥è¯¢ã€å†…å­˜é€’å½’ç»„è£…æ•°æ® åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/31407/202008/31407-20200828030619929-1935730275.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;public class Area
{
  [Column(IsPrimary = true)]
  public string Code { get; set; }

  public string Name { get; set; }
  public string ParentCode { get; set; }

  [Navigate(nameof(ParentCode))]
  public Area Parent { get; set; }
  [Navigate(nameof(ParentCode))]
  public List&amp;lt;Area&amp;gt; Childs { get; set; }
}

var repo = fsql.GetRepository&amp;lt;Area&amp;gt;();
repo.DbContextOptions.EnableAddOrUpdateNavigateList = true;
repo.DbContextOptions.NoneParameter = true;
repo.Insert(new Area
{
  Code = &quot;100000&quot;,
  Name = &quot;ä¸­å›½&quot;,
  Childs = new List&amp;lt;Area&amp;gt;(new[] {
    new Area
    {
      Code = &quot;110000&quot;,
      Name = &quot;åŒ—äº¬&quot;,
      Childs = new List&amp;lt;Area&amp;gt;(new[] {
        new Area{ Code=&quot;110100&quot;, Name = &quot;åŒ—äº¬å¸‚&quot; },
        new Area{ Code=&quot;110101&quot;, Name = &quot;ä¸œåŸåŒº&quot; },
      })
    }
  })
});
&lt;/code&gt;
&lt;/pre&gt;
&lt;hr/&gt;&lt;h3 id=&quot;é€’å½’æ•°æ®&quot;&gt;é€’å½’æ•°æ®&lt;/h3&gt;
&lt;p&gt;é…ç½®å¥½çˆ¶å­å±æ€§ä¹‹åï¼Œå°±å¯ä»¥è¿™æ ·ç”¨äº†ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;var t1 = fsql.Select&amp;lt;Area&amp;gt;().ToTreeList();
Assert.Single(t1);
Assert.Equal(&quot;100000&quot;, t1[0].Code);
Assert.Single(t1[0].Childs);
Assert.Equal(&quot;110000&quot;, t1[0].Childs[0].Code);
Assert.Equal(2, t1[0].Childs[0].Childs.Count);
Assert.Equal(&quot;110100&quot;, t1[0].Childs[0].Childs[0].Code);
Assert.Equal(&quot;110101&quot;, t1[0].Childs[0].Childs[1].Code);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æŸ¥è¯¢æ•°æ®æœ¬æ¥æ˜¯å¹³é¢çš„ï¼ŒToTreeList æ–¹æ³•å°†è¿”å›çš„å¹³é¢æ•°æ®åœ¨å†…å­˜ä¸­åŠ å·¥ä¸ºæ ‘å‹ List è¿”å›ã€‚&lt;/p&gt;
&lt;hr/&gt;&lt;h3 id=&quot;cteé€’å½’åˆ é™¤&quot;&gt;CTEé€’å½’åˆ é™¤&lt;/h3&gt;
&lt;p&gt;å¾ˆå¸¸è§çš„æ— é™çº§åˆ†ç±»è¡¨åŠŸèƒ½ï¼Œåˆ é™¤æ ‘èŠ‚ç‚¹æ—¶ï¼ŒæŠŠå­èŠ‚ç‚¹ä¹Ÿå¤„ç†ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;fsql.Select&amp;lt;Area&amp;gt;()
  .Where(a =&amp;gt; a.Name == &quot;ä¸­å›½&quot;)
  .AsTreeCte()
  .ToDelete()
  .ExecuteAffrows(); //åˆ é™¤ ä¸­å›½ ä¸‹çš„æ‰€æœ‰è®°å½•
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚æœè½¯åˆ é™¤ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;fsql.Select&amp;lt;Area&amp;gt;()
  .Where(a =&amp;gt; a.Name == &quot;ä¸­å›½&quot;)
  .AsTreeCte()
  .ToUpdate()
  .Set(a =&amp;gt; a.IsDeleted, true)
  .ExecuteAffrows(); //è½¯åˆ é™¤ ä¸­å›½ ä¸‹çš„æ‰€æœ‰è®°å½•
&lt;/code&gt;
&lt;/pre&gt;
&lt;hr/&gt;&lt;h3 id=&quot;cteé€’å½’æŸ¥è¯¢&quot;&gt;CTEé€’å½’æŸ¥è¯¢&lt;/h3&gt;
&lt;p&gt;è‹¥ä¸åšæ•°æ®å†—ä½™çš„æ— é™çº§åˆ†ç±»è¡¨è®¾è®¡ï¼Œé€’å½’æŸ¥è¯¢å°‘ä¸äº†ï¼ŒAsTreeCte æ­£æ˜¯è§£å†³é€’å½’æŸ¥è¯¢çš„å°è£…ï¼Œæ–¹æ³•å‚æ•°è¯´æ˜ï¼š&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‚æ•°&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody readability=&quot;3&quot;&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;(å¯é€‰) pathSelector&lt;/td&gt;
&lt;td&gt;è·¯å¾„å†…å®¹é€‰æ‹©ï¼Œå¯ä»¥è®¾ç½®æŸ¥è¯¢è¿”å›ï¼šä¸­å›½ -&amp;gt; åŒ—äº¬ -&amp;gt; ä¸œåŸåŒº&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;(å¯é€‰) up&lt;/td&gt;
&lt;td&gt;false(é»˜è®¤)ï¼šç”±çˆ¶çº§å‘å­çº§çš„é€’å½’æŸ¥è¯¢ï¼Œtrueï¼šç”±å­çº§å‘çˆ¶çº§çš„é€’å½’æŸ¥è¯¢&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;(å¯é€‰) pathSeparator&lt;/td&gt;
&lt;td&gt;è®¾ç½® pathSelector çš„è¿æ¥ç¬¦ï¼Œé»˜è®¤ï¼š-&amp;gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;(å¯é€‰) level&lt;/td&gt;
&lt;td&gt;è®¾ç½®é€’å½’å±‚çº§&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;é€šè¿‡æµ‹è¯•çš„æ•°æ®åº“ï¼šMySql8.0ã€SqlServerã€PostgreSQLã€Oracleã€Sqliteã€è¾¾æ¢¦ã€äººå¤§é‡‘ä»“&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å§¿åŠ¿ä¸€ï¼šAsTreeCte() + ToTreeList&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;var t2 = fsql.Select&amp;lt;Area&amp;gt;()
  .Where(a =&amp;gt; a.Name == &quot;ä¸­å›½&quot;)
  .AsTreeCte() //æŸ¥è¯¢ ä¸­å›½ ä¸‹çš„æ‰€æœ‰è®°å½•
  .OrderBy(a =&amp;gt; a.Code)
  .ToTreeList(); //éå¿…é¡»ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ ToListï¼ˆè§å§¿åŠ¿äºŒï¼‰
Assert.Single(t2);
Assert.Equal(&quot;100000&quot;, t2[0].Code);
Assert.Single(t2[0].Childs);
Assert.Equal(&quot;110000&quot;, t2[0].Childs[0].Code);
Assert.Equal(2, t2[0].Childs[0].Childs.Count);
Assert.Equal(&quot;110100&quot;, t2[0].Childs[0].Childs[0].Code);
Assert.Equal(&quot;110101&quot;, t2[0].Childs[0].Childs[1].Code);
// WITH &quot;as_tree_cte&quot;
// as
// (
// SELECT 0 as cte_level, a.&quot;Code&quot;, a.&quot;Name&quot;, a.&quot;ParentCode&quot; 
// FROM &quot;Area&quot; a 
// WHERE (a.&quot;Name&quot; = 'ä¸­å›½')

// union all

// SELECT wct1.cte_level + 1 as cte_level, wct2.&quot;Code&quot;, wct2.&quot;Name&quot;, wct2.&quot;ParentCode&quot; 
// FROM &quot;as_tree_cte&quot; wct1 
// INNER JOIN &quot;Area&quot; wct2 ON wct2.&quot;ParentCode&quot; = wct1.&quot;Code&quot;
// )
// SELECT a.&quot;Code&quot;, a.&quot;Name&quot;, a.&quot;ParentCode&quot; 
// FROM &quot;as_tree_cte&quot; a 
// ORDER BY a.&quot;Code&quot;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å§¿åŠ¿äºŒï¼šAsTreeCte() + ToList&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;var t3 = fsql.Select&amp;lt;Area&amp;gt;()
  .Where(a =&amp;gt; a.Name == &quot;ä¸­å›½&quot;)
  .AsTreeCte()
  .OrderBy(a =&amp;gt; a.Code)
  .ToList();
Assert.Equal(4, t3.Count);
Assert.Equal(&quot;100000&quot;, t3[0].Code);
Assert.Equal(&quot;110000&quot;, t3[1].Code);
Assert.Equal(&quot;110100&quot;, t3[2].Code);
Assert.Equal(&quot;110101&quot;, t3[3].Code);
//æ‰§è¡Œçš„ SQL ä¸å§¿åŠ¿ä¸€ç›¸åŒ
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å§¿åŠ¿ä¸‰ï¼šAsTreeCte(pathSelector) + ToList&lt;/p&gt;
&lt;p&gt;è®¾ç½® pathSelector å‚æ•°åï¼Œå¦‚ä½•è¿”å›éšè—å­—æ®µï¼Ÿ&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;var t4 = fsql.Select&amp;lt;Area&amp;gt;()
  .Where(a =&amp;gt; a.Name == &quot;ä¸­å›½&quot;)
  .AsTreeCte(a =&amp;gt; a.Name + &quot;[&quot; + a.Code + &quot;]&quot;)
  .OrderBy(a =&amp;gt; a.Code)
  .ToList(a =&amp;gt; new { 
    item = a, 
    level = Convert.ToInt32(&quot;a.cte_level&quot;), 
    path = &quot;a.cte_path&quot; 
  });
Assert.Equal(4, t4.Count);
Assert.Equal(&quot;100000&quot;, t4[0].item.Code);
Assert.Equal(&quot;110000&quot;, t4[1].item.Code);
Assert.Equal(&quot;110100&quot;, t4[2].item.Code);
Assert.Equal(&quot;110101&quot;, t4[3].item.Code);
Assert.Equal(&quot;ä¸­å›½[100000]&quot;, t4[0].path);
Assert.Equal(&quot;ä¸­å›½[100000] -&amp;gt; åŒ—äº¬[110000]&quot;, t4[1].path);
Assert.Equal(&quot;ä¸­å›½[100000] -&amp;gt; åŒ—äº¬[110000] -&amp;gt; åŒ—äº¬å¸‚[110100]&quot;, t4[2].path);
Assert.Equal(&quot;ä¸­å›½[100000] -&amp;gt; åŒ—äº¬[110000] -&amp;gt; ä¸œåŸåŒº[110101]&quot;, t4[3].path);
// WITH &quot;as_tree_cte&quot;
// as
// (
// SELECT 0 as cte_level, a.&quot;Name&quot; || '[' || a.&quot;Code&quot; || ']' as cte_path, a.&quot;Code&quot;, a.&quot;Name&quot;, a.&quot;ParentCode&quot; 
// FROM &quot;Area&quot; a 
// WHERE (a.&quot;Name&quot; = 'ä¸­å›½')

// union all

// SELECT wct1.cte_level + 1 as cte_level, wct1.cte_path || ' -&amp;gt; ' || wct2.&quot;Name&quot; || '[' || wct2.&quot;Code&quot; || ']' as cte_path, wct2.&quot;Code&quot;, wct2.&quot;Name&quot;, wct2.&quot;ParentCode&quot; 
// FROM &quot;as_tree_cte&quot; wct1 
// INNER JOIN &quot;Area&quot; wct2 ON wct2.&quot;ParentCode&quot; = wct1.&quot;Code&quot;
// )
// SELECT a.&quot;Code&quot; as1, a.&quot;Name&quot; as2, a.&quot;ParentCode&quot; as5, a.cte_level as6, a.cte_path as7 
// FROM &quot;as_tree_cte&quot; a 
// ORDER BY a.&quot;Code&quot;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/31407/202008/31407-20200828031037345-862260815.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;å¾®è½¯åˆ¶é€ äº†ä¼˜ç§€çš„è¯­è¨€ c#ï¼Œåˆ©ç”¨è¯­è¨€ç‰¹æ€§å¯ä»¥åšä¸€äº›éå¸¸å¥½ç”¨çš„åŠŸèƒ½ï¼Œåœ¨ ORM ä¸­ä½¿ç”¨å¯¼èˆªå±æ€§éå¸¸é€‚åˆã€‚&lt;/p&gt;
&lt;ul readability=&quot;1.5&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;ManyToOne(Nå¯¹1) æä¾›äº†ç®€å•çš„å¤šè¡¨ join æŸ¥è¯¢ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;OneToMany(1å¯¹N) æä¾›äº†ç®€å•å¯æ§çš„çº§è”æŸ¥è¯¢ã€çº§è”ä¿å­˜åŠŸèƒ½ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;ManyToMany(å¤šå¯¹å¤š) æä¾›äº†ç®€å•çš„å¤šå¯¹å¤šè¿‡æ»¤æŸ¥è¯¢ã€çº§è”æŸ¥è¯¢ã€çº§è”ä¿å­˜åŠŸèƒ½ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;çˆ¶å­å…³ç³» æä¾›äº†å¸¸ç”¨çš„ CTEæŸ¥è¯¢ã€åˆ é™¤ã€é€’å½’åŠŸèƒ½ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å¸Œæœ›æ­£åœ¨ä½¿ç”¨çš„ã€å–„è‰¯çš„æ‚¨èƒ½åŠ¨ä¸€åŠ¨å°æ‰‹æŒ‡ï¼ŒæŠŠæ–‡ç« è½¬å‘ä¸€ä¸‹ï¼Œè®©æ›´å¤šäººçŸ¥é“ .NET æœ‰è¿™æ ·ä¸€ä¸ªå¥½ç”¨çš„ ORM å­˜åœ¨ã€‚è°¢è°¢äº†ï¼ï¼&lt;/p&gt;
&lt;p&gt;FreeSql å¼€æºåè®® MIT &lt;a href=&quot;https://github.com/dotnetcore/FreeSql&quot;&gt;https://github.com/dotnetcore/FreeSql&lt;/a&gt;ï¼Œå¯ä»¥å•†ç”¨ï¼Œæ–‡æ¡£é½å…¨ã€‚QQç¾¤ï¼š4336577(å·²æ»¡)ã€8578575(åœ¨çº¿)ã€52508226(åœ¨çº¿)&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ æœ‰å¥½çš„ ORM å®ç°æƒ³æ³•ï¼Œæ¬¢è¿ç»™ä½œè€…ç•™è¨€è®¨è®ºï¼Œè°¢è°¢è§‚çœ‹ï¼&lt;/p&gt;
</description>
<pubDate>Thu, 27 Aug 2020 19:53:00 +0000</pubDate>
<dc:creator>nicye</dc:creator>
<og:description>å†™åœ¨å¼€å¤´ ä»æœ€æ—©æœŸå…¥é—¨æ—¶çš„å•è¡¨æ“ä½œï¼Œ åˆ°åæ¥æ¥è§¦äº† left joinã€right joinã€inner join æŸ¥è¯¢ï¼Œ å› ä¸ºç»è´¹æœ‰é™ï¼Œéœ€è¦ä¸æ–­åœ¨å¤šè¡¨æŸ¥è¯¢ä¸­æŠ˜è…¾è§£å†³å®é™…éœ€æ±‚ï¼Œä¸çŸ¥é“æ˜¯å¦æœ‰è¿‡è¿™æ ·çš„ç»å†</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/kellynic/p/13575053.html</dc:identifier>
</item>
<item>
<title>æ¬¢è¿æ¥åˆ° Cï¼ƒ 9.0ï¼ˆWelcome to C# 9.0ï¼‰ã€çº¯æ‰‹å·¥ç¿»è¯‘ã€‘ - æŠ€æœ¯è¯‘æ°‘</title>
<link>http://www.cnblogs.com/ittranslator/p/13575059.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/ittranslator/p/13575059.html</guid>
<description>&lt;blockquote readability=&quot;5.2159090909091&quot;&gt;
&lt;p&gt;ç¿»è¯‘è‡ª Mads Torgersen 2020å¹´5æœˆ20æ—¥çš„åšæ–‡&lt;a href=&quot;https://devblogs.microsoft.com/dotnet/welcome-to-c-9-0/&quot;&gt;ã€ŠWelcome to C# 9.0ã€‹&lt;/a&gt;ï¼ŒMads Torgersen æ˜¯å¾®è½¯ C# è¯­è¨€çš„é¦–å¸­è®¾è®¡å¸ˆï¼Œä¹Ÿæ˜¯å¾®è½¯ .NET å›¢é˜Ÿçš„é¡¹ç›®ç¾¤ç»ç†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;C# 9.0 æ­£åœ¨æˆå½¢ï¼Œæˆ‘æƒ³å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹æˆ‘ä»¬å¯¹ä¸‹ä¸€ç‰ˆæœ¬è¯­è¨€ä¸­æ·»åŠ çš„ä¸€äº›ä¸»è¦ç‰¹æ€§çš„æƒ³æ³•ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äº C# çš„æ¯ä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œæˆ‘ä»¬éƒ½åœ¨åŠªåŠ›è®©å¸¸è§çš„ç¼–ç åœºæ™¯çš„å®ç°å˜å¾—æ›´åŠ æ¸…æ™°å’Œç®€å•ï¼ŒC# 9.0 ä¹Ÿä¸ä¾‹å¤–ã€‚è¿™æ¬¡ç‰¹åˆ«å…³æ³¨çš„æ˜¯æ”¯æŒæ•°æ®æ¨¡å‹çš„ç®€æ´å’Œä¸å¯å˜è¡¨ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;å°±è®©æˆ‘ä»¬ä¸€æ¢ç©¶ç«Ÿå§!&lt;/p&gt;
&lt;h2 id=&quot;ä¸€ã€ä»…åˆå§‹åŒ–init-onlyå±æ€§&quot;&gt;ä¸€ã€ä»…åˆå§‹åŒ–(init-only)å±æ€§&lt;/h2&gt;
&lt;p&gt;å¯¹è±¡åˆå§‹åŒ–å™¨éå¸¸æ£’ã€‚å®ƒä»¬ä¸ºç±»å‹çš„å®¢æˆ·ç«¯æä¾›äº†ä¸€ç§éå¸¸çµæ´»å’Œå¯è¯»çš„æ ¼å¼æ¥åˆ›å»ºå¯¹è±¡ï¼Œå¹¶ä¸”ç‰¹åˆ«é€‚åˆäºåµŒå¥—å¯¹è±¡çš„åˆ›å»ºï¼Œè®©ä½ å¯ä»¥ä¸€æ¬¡æ€§åˆ›å»ºæ•´ä¸ªå¯¹è±¡æ ‘ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;new Person
{
    FirstName = &quot;Scott&quot;,
    LastName = &quot;Hunter&quot;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯¹è±¡åˆå§‹åŒ–å™¨è¿˜ä½¿ç±»å‹ä½œè€…ä¸å¿…ç¼–å†™å¤§é‡çš„æ„é€ å‡½æ•°â€”â€”ä»–ä»¬æ‰€è¦åšçš„å°±æ˜¯ç¼–å†™ä¸€äº›å±æ€§ï¼&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç›®å‰æœ€å¤§çš„é™åˆ¶æ˜¯å±æ€§å¿…é¡»æ˜¯&lt;strong&gt;å¯å˜çš„&lt;/strong&gt;ï¼ˆ&lt;em&gt;è¯‘è€…æ³¨ï¼šå³å¯å†™çš„&lt;/em&gt;ï¼‰ï¼Œå¯¹è±¡åˆå§‹åŒ–å™¨æ‰èƒ½å·¥ä½œï¼šå®ƒä»¬é¦–å…ˆè°ƒç”¨å¯¹è±¡çš„æ„é€ å‡½æ•°(æœ¬ä¾‹ä¸­æ˜¯é»˜è®¤çš„æ— å‚æ•°æ„é€ å‡½æ•°)ï¼Œç„¶åèµ‹å€¼ç»™å±æ€§ &lt;code&gt;setter&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä»…åˆå§‹åŒ–(init-only)å±æ€§è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼å®ƒå¼•å…¥äº†ä¸€ä¸ª &lt;code&gt;init&lt;/code&gt; è®¿é—®å™¨ï¼Œå®ƒæ˜¯ &lt;code&gt;set&lt;/code&gt; è®¿é—®å™¨çš„å˜ä½“ï¼Œåªèƒ½åœ¨å¯¹è±¡åˆå§‹åŒ–æ—¶è°ƒç”¨ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;public class Person
{
    public string FirstName { get; init; }
    public string LastName { get; init; }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æœ‰äº†è¿™ä¸ªå£°æ˜ï¼Œä¸Šé¢çš„å®¢æˆ·ç«¯ä»£ç ä»ç„¶æ˜¯åˆæ³•çš„ï¼Œä½†æ˜¯éšåå¯¹ &lt;code&gt;FirstName&lt;/code&gt; å’Œ &lt;code&gt;LastName&lt;/code&gt; å±æ€§çš„ä»»ä½•èµ‹å€¼éƒ½æ˜¯é”™è¯¯çš„ã€‚&lt;/p&gt;
&lt;h3 id=&quot;åˆå§‹åŒ–init-è®¿é—®å™¨å’Œåªè¯»readonlyå­—æ®µ&quot;&gt;åˆå§‹åŒ–(&lt;code&gt;init&lt;/code&gt;) è®¿é—®å™¨å’Œåªè¯»(&lt;code&gt;readonly&lt;/code&gt;)å­—æ®µ&lt;/h3&gt;
&lt;p&gt;å› ä¸º &lt;code&gt;init&lt;/code&gt; è®¿é—®å™¨åªèƒ½åœ¨åˆå§‹åŒ–æœŸé—´è°ƒç”¨ï¼Œæ‰€ä»¥å…è®¸å®ƒä»¬æ›´æ”¹å°é—­ç±»çš„åªè¯»(&lt;code&gt;readonly&lt;/code&gt;)å­—æ®µï¼Œå°±åƒåœ¨æ„é€ å‡½æ•°ä¸­ä¸€æ ·ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;public class Person
{
    private readonly string firstName;
    private readonly string lastName;
    
    public string FirstName 
    { 
        get =&amp;gt; firstName; 
        init =&amp;gt; firstName = (value ?? throw new ArgumentNullException(nameof(FirstName)));
    }
    public string LastName 
    { 
        get =&amp;gt; lastName; 
        init =&amp;gt; lastName = (value ?? throw new ArgumentNullException(nameof(LastName)));
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;äºŒã€è®°å½•ï¼ˆrecordï¼‰&quot;&gt;äºŒã€è®°å½•ï¼ˆrecordï¼‰&lt;/h2&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;è¯‘è€…æ³¨ï¼š&lt;br/&gt;åŸæ–‡ä¸­å£°æ˜ä¸€ä¸ªè®°å½•çš„ &lt;code&gt;data class **&lt;/code&gt; è”åˆå…³é”®å­—ç°åœ¨å·²ç»å˜æˆ &lt;code&gt;record&lt;/code&gt; å…³é”®å­—äº†ï¼Œæ‰€ä»¥ç¿»è¯‘è¿‡ç¨‹ä¸­åšäº†ä¿®æ­£ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¦‚æœæ‚¨æƒ³ä½¿å•ä¸ªå±æ€§ä¸å¯å˜ï¼Œé‚£ä¹ˆä»…åˆå§‹åŒ–(init-only)å±æ€§æ˜¯æå¥½çš„ã€‚å¦‚æœæ‚¨æƒ³è¦æ•´ä¸ªå¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œè¡Œä¸ºåƒä¸€ä¸ªå€¼ï¼Œé‚£ä¹ˆä½ åº”è¯¥è€ƒè™‘å£°æ˜å®ƒä¸ºä¸€ä¸ª&lt;em&gt;è®°å½•(record)&lt;/em&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;public record Person
{
    public string FirstName { get; init; }
    public string LastName { get; init; }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯¹äºè®°å½•(&lt;code&gt;record&lt;/code&gt;)ï¼Œèµ‹äºˆäº†å®ƒä¸€äº›ç±»ä¼¼å€¼çš„è¡Œä¸ºï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹é¢æ·±å…¥æ¢è®¨ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè®°å½•æ›´åº”è¯¥è¢«çœ‹ä½œæ˜¯â€œå€¼â€â€”â€”æ•°æ®(&lt;code&gt;data&lt;/code&gt;)ï¼Œè€Œä¸æ˜¯å¯¹è±¡ï¼å®ƒä»¬å¹¶ä¸å…·æœ‰å¯å˜çš„å°è£…çŠ¶æ€ï¼Œç›¸åï¼Œæ‚¨éœ€è¦é€šè¿‡åˆ›å»ºè¡¨ç¤ºæ–°çŠ¶æ€çš„æ–°è®°å½•æ¥è¡¨ç¤ºå…¶éšæ—¶é—´çš„å˜åŒ–ã€‚å®ƒä»¬ä¸æ˜¯ç”±å®ƒä»¬çš„èº«ä»½(identity)ç¡®å®šçš„ï¼Œè€Œæ˜¯ç”±å®ƒä»¬çš„å†…å®¹ç¡®å®šçš„ã€‚&lt;/p&gt;
&lt;h3 id=&quot;with-è¡¨è¾¾å¼&quot;&gt;&lt;code&gt;with&lt;/code&gt; è¡¨è¾¾å¼&lt;/h3&gt;
&lt;p&gt;å½“ä½¿ç”¨ä¸å¯å˜æ•°æ®(&lt;code&gt;data&lt;/code&gt;)æ—¶ï¼Œä¸€ç§å¸¸è§çš„æ¨¡å¼æ˜¯ä»ç°æœ‰çš„å€¼ä¸­åˆ›å»ºæ–°å€¼æ¥è¡¨ç¤ºæ–°çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬çš„ &lt;code&gt;person&lt;/code&gt; è¦æ›´æ”¹ä»–ä»¬çš„ &lt;code&gt;LastName&lt;/code&gt;ï¼Œæˆ‘ä»¬ä¼šå°†å…¶è¡¨ç¤ºä¸ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æ˜¯æ—§å¯¹è±¡çš„å‰¯æœ¬ï¼Œåªæ˜¯æœ‰ä¸åŒçš„ &lt;code&gt;LastName&lt;/code&gt;ã€‚è¿™ç§æŠ€å·§é€šå¸¸è¢«ç§°ä¹‹ä¸º&lt;em&gt;éç ´åæ€§çªå˜(non-destructive mutation)&lt;/em&gt;ã€‚è®°å½•(&lt;code&gt;record&lt;/code&gt;)ä¸æ˜¯ä»£è¡¨ &lt;code&gt;person&lt;/code&gt; &lt;em&gt;åœ¨ä¸€æ®µæ—¶é—´å†…çš„&lt;/em&gt; çŠ¶æ€ï¼Œè€Œæ˜¯ä»£è¡¨ &lt;code&gt;person&lt;/code&gt; &lt;em&gt;åœ¨ç»™å®šæ—¶é—´ç‚¹çš„&lt;/em&gt; çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å¸®åŠ©å®ç°è¿™ç§ç¼–ç¨‹é£æ ¼ï¼Œè®°å½•(&lt;code&gt;record&lt;/code&gt;)å…è®¸ä½¿ç”¨ä¸€ç§æ–°çš„è¡¨è¾¾å¼ â€”â€” &lt;code&gt;with&lt;/code&gt; è¡¨è¾¾å¼ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;var otherPerson = person with { LastName = &quot;Hanselman&quot; };
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;with&lt;/code&gt; è¡¨è¾¾å¼ä½¿ç”¨å¯¹è±¡åˆå§‹åŒ–å™¨è¯­æ³•æ¥å£°æ˜æ–°å¯¹è±¡ä¸æ—§å¯¹è±¡çš„ä¸åŒä¹‹å¤„ã€‚æ‚¨å¯ä»¥æŒ‡å®šå¤šä¸ªå±æ€§ã€‚&lt;/p&gt;
&lt;p&gt;è®°å½•(&lt;code&gt;record&lt;/code&gt;)éšå¼å®šä¹‰äº†ä¸€ä¸ªå—ä¿æŠ¤çš„(&lt;code&gt;protected&lt;/code&gt;)â€œå¤åˆ¶æ„é€ å‡½æ•°â€â€”â€”ä¸€ä¸ªæ¥å—ç°æœ‰è®°å½•å¯¹è±¡å¹¶é€å­—æ®µå°†å…¶å¤åˆ¶åˆ°æ–°è®°å½•å¯¹è±¡çš„æ„é€ å‡½æ•°ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;protected Person(Person original) { /* copy all the fields */ } // generated
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;with&lt;/code&gt; è¡¨è¾¾å¼ä¼šè°ƒç”¨â€œå¤åˆ¶æ„é€ å‡½æ•°â€ï¼Œç„¶ååœ¨ä¸Šé¢åº”ç”¨å¯¹è±¡åˆå§‹åŒ–å™¨æ¥ç›¸åº”åœ°å˜æ›´å±æ€§ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæ‚¨ä¸å–œæ¬¢ç”Ÿæˆçš„â€œå¤åˆ¶æ„é€ å‡½æ•°â€çš„é»˜è®¤è¡Œä¸ºï¼Œæ‚¨å¯ä»¥å®šä¹‰è‡ªå·±çš„â€œå¤åˆ¶æ„é€ å‡½æ•°â€ï¼Œå®ƒå°†è¢« &lt;code&gt;with&lt;/code&gt; è¡¨è¾¾å¼æ•è·ã€‚&lt;/p&gt;
&lt;h3 id=&quot;åŸºäºå€¼çš„ç›¸ç­‰ï¼ˆvalue-based-equalityï¼‰&quot;&gt;åŸºäºå€¼çš„ç›¸ç­‰ï¼ˆValue-based equalityï¼‰&lt;/h3&gt;
&lt;p&gt;æ‰€æœ‰å¯¹è±¡éƒ½ä»å¯¹è±¡ç±»(&lt;code&gt;object&lt;/code&gt;)ç»§æ‰¿ä¸€ä¸ªè™šçš„ &lt;code&gt;Equals(object)&lt;/code&gt; æ–¹æ³•ã€‚è¿™è¢«ç”¨ä½œæ˜¯å½“ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯éç©º(&lt;code&gt;non-null&lt;/code&gt;)æ—¶ï¼Œé™æ€æ–¹æ³• &lt;code&gt;Object.Equals(object, object)&lt;/code&gt; çš„åŸºç¡€ã€‚&lt;/p&gt;
&lt;p&gt;ç»“æ„ä½“é‡å†™äº† &lt;code&gt;Equals(object)&lt;/code&gt; æ–¹æ³•ï¼Œé€šè¿‡é€’å½’åœ°åœ¨ç»“æ„ä½“çš„æ¯ä¸€ä¸ªå­—æ®µä¸Šè°ƒç”¨ &lt;code&gt;Equals&lt;/code&gt; æ¥æ¯”è¾ƒç»“æ„ä½“çš„æ¯ä¸€ä¸ªå­—æ®µï¼Œä»è€Œå®ç°äº†â€œåŸºäºå€¼çš„ç›¸ç­‰â€ã€‚&lt;strong&gt;è®°å½•(&lt;code&gt;record&lt;/code&gt;)æ˜¯ä¸€æ ·çš„ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ„å‘³ç€ï¼Œæ ¹æ®å®ƒä»¬çš„â€œå€¼æ€§(value-ness)â€ï¼Œä¸¤ä¸ªè®°å½•(&lt;code&gt;record&lt;/code&gt;)å¯¹è±¡å¯ä»¥å½¼æ­¤ç›¸ç­‰ï¼Œè€Œä¸æ˜¯&lt;em&gt;åŒä¸€ä¸ª&lt;/em&gt;å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬å°†è¢«ä¿®æ”¹ &lt;code&gt;person&lt;/code&gt; çš„ &lt;code&gt;LastName&lt;/code&gt; æ”¹å›å»ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;var originalPerson = otherPerson with { LastName = &quot;Hunter&quot; };
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬å°†å¾—åˆ° &lt;code&gt;ReferenceEquals(person, originalPerson)&lt;/code&gt; = &lt;code&gt;false&lt;/code&gt;(å®ƒä»¬ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡)ï¼Œä½†æ˜¯ &lt;code&gt;Equals(person, originalPerson)&lt;/code&gt; = &lt;code&gt;true&lt;/code&gt;(å®ƒä»¬æœ‰ç›¸åŒçš„å€¼)ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæ‚¨ä¸å–œæ¬¢ç”Ÿæˆçš„ &lt;code&gt;Equals&lt;/code&gt; é‡å†™çš„é»˜è®¤é€ä¸ªå­—æ®µæ¯”è¾ƒçš„è¡Œä¸ºï¼Œæ‚¨å¯ä»¥è‡ªå·±ç¼–å†™ã€‚æ‚¨åªéœ€è¦æ³¨æ„ç†è§£â€œåŸºäºå€¼çš„ç›¸ç­‰â€æ˜¯å¦‚ä½•åœ¨è®°å½•(&lt;code&gt;record&lt;/code&gt;)ä¸­å·¥ä½œçš„ï¼Œç‰¹åˆ«æ˜¯åœ¨æ¶‰åŠç»§æ‰¿æ—¶ï¼Œæˆ‘ä»¬åé¢ä¼šè®²åˆ°ã€‚&lt;/p&gt;
&lt;p&gt;é™¤äº†åŸºäºå€¼çš„ &lt;code&gt;Equals&lt;/code&gt; ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªåŸºäºå€¼ &lt;code&gt;GetHashCode()&lt;/code&gt; çš„é‡å†™ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ•°æ®æˆå‘˜ï¼ˆdata-membersï¼‰&quot;&gt;æ•°æ®æˆå‘˜ï¼ˆData membersï¼‰&lt;/h3&gt;
&lt;p&gt;ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè®°å½•(&lt;code&gt;record&lt;/code&gt;)éƒ½æ˜¯ä¸å¯å˜çš„ï¼Œä»…åˆå§‹åŒ–(init-only)å…¬å…±å±æ€§å¯ä»¥é€šè¿‡ &lt;code&gt;with&lt;/code&gt; è¡¨è¾¾å¼è¿›è¡Œéç ´åæ€§ä¿®æ”¹ã€‚ä¸ºäº†å¯¹è¿™ç§å¸¸è§æƒ…å†µè¿›è¡Œä¼˜åŒ–ï¼Œè®°å½•(&lt;code&gt;record&lt;/code&gt;)æ›´æ”¹äº† &lt;code&gt;string FirstName&lt;/code&gt; è¿™ç§å½¢å¼çš„ç®€å•æˆå‘˜å£°æ˜çš„é»˜è®¤å«ä¹‰ï¼Œä¸å…¶ä»–ç±»å’Œç»“æ„ä½“å£°æ˜ä¸­çš„éšå¼ç§æœ‰å­—æ®µä¸åŒï¼Œå®ƒè¢«å½“ä½œæ˜¯ä¸€ä¸ªå…¬å…±çš„ã€ä»…åˆå§‹åŒ–(init-only) è‡ªåŠ¨å±æ€§çš„ç®€å†™ï¼å› æ­¤ï¼Œå£°æ˜ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;public record Person { string FirstName; string LastName; }
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸æˆ‘ä»¬ä¹‹å‰çš„å£°æ˜æ„æ€å®Œå…¨ä¸€æ ·ï¼Œå³ç­‰åŒäºå£°æ˜ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;public record Person
{
    public string FirstName { get; init; }
    public string LastName { get; init; }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬è®¤ä¸ºè¿™æœ‰åŠ©äºå½¢æˆæ¼‚äº®è€Œæ¸…æ™°çš„è®°å½•(&lt;code&gt;record&lt;/code&gt;)å£°æ˜ã€‚å¦‚æœæ‚¨ç¡®å®éœ€è¦ç§æœ‰å­—æ®µï¼Œåªéœ€æ˜¾å¼æ·»åŠ  &lt;code&gt;private&lt;/code&gt; ä¿®é¥°ç¬¦ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;private string firstName;
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;ä½ç½®è®°å½•ï¼ˆpositional-recordsï¼‰&quot;&gt;ä½ç½®è®°å½•ï¼ˆPositional recordsï¼‰&lt;/h3&gt;
&lt;p&gt;æœ‰æ—¶ï¼Œå¯¹è®°å½•(&lt;code&gt;record&lt;/code&gt;)é‡‡ç”¨ä½ç½®æ›´æ˜ç¡®çš„æ–¹æ³•æ˜¯æœ‰ç”¨çš„ï¼Œå…¶ä¸­å®ƒçš„å†…å®¹æ˜¯é€šè¿‡æ„é€ å‡½æ•°å‚æ•°æä¾›çš„ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ä½ç½®è§£æ„æ¥æå–ã€‚&lt;/p&gt;
&lt;p&gt;å®Œå…¨å¯ä»¥åœ¨è®°å½•(&lt;code&gt;record&lt;/code&gt;)ä¸­æŒ‡å®šè‡ªå·±çš„æ„é€ å‡½æ•°å’Œè§£æ„å‡½æ•°ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;public record Person 
{ 
    string FirstName; 
    string LastName; 
    public Person(string firstName, string lastName) 
      =&amp;gt; (FirstName, LastName) = (firstName, lastName);
    public void Deconstruct(out string firstName, out string lastName) 
      =&amp;gt; (firstName, lastName) = (FirstName, LastName);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½†æ˜¯æœ‰ä¸€ç§æ›´ç®€çŸ­çš„è¯­æ³•æ¥è¡¨è¾¾å®Œå…¨ç›¸åŒçš„æ„æ€ï¼ˆå‚æ•°åç§°åŒ…è£…æ¨¡å¼&lt;code&gt;modulo casing of parameter names&lt;/code&gt;ï¼‰ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;public record Person(string FirstName, string LastName);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å®ƒå£°æ˜äº†å…¬å…±çš„ä»…åˆå§‹åŒ–(init-only)è‡ªåŠ¨å±æ€§ä»¥åŠæ„é€ å‡½æ•°å’Œè§£æ„å‡½æ•°ï¼Œå› æ­¤æ‚¨å°±å¯ä»¥ç¼–å†™ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;var person = new Person(&quot;Scott&quot;, &quot;Hunter&quot;); // ç”¨ä½ç½®å‚æ•°æ„é€ ï¼ˆpositional constructionï¼‰
var (f, l) = person;                        // ç”¨ä½ç½®å‚æ•°è§£æ„ï¼ˆpositional deconstructionï¼‰
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚æœä¸å–œæ¬¢ç”Ÿæˆçš„è‡ªåŠ¨å±æ€§ï¼Œæ‚¨å¯ä»¥å®šä¹‰è‡ªå·±çš„åŒåå±æ€§ï¼Œç”Ÿæˆçš„æ„é€ å‡½æ•°å’Œè§£æ„å‡½æ•°å°†åªä½¿ç”¨æ‚¨è‡ªå®šä¹‰çš„å±æ€§ã€‚&lt;/p&gt;
&lt;h3 id=&quot;è®°å½•ä¸å¯å˜æ€§ï¼ˆrecords-and-mutationï¼‰&quot;&gt;è®°å½•ä¸å¯å˜æ€§ï¼ˆRecords and mutationï¼‰&lt;/h3&gt;
&lt;p&gt;è®°å½•(&lt;code&gt;record&lt;/code&gt;)çš„åŸºäºå€¼çš„è¯­ä¹‰ä¸èƒ½å¾ˆå¥½åœ°é€‚åº”å¯å˜çŠ¶æ€ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå°†ä¸€ä¸ªè®°å½•(&lt;code&gt;record&lt;/code&gt;)å¯¹è±¡æ”¾å…¥å­—å…¸ä¸­ã€‚å†æ¬¡æŸ¥æ‰¾å®ƒä¾èµ–äº &lt;code&gt;Equals&lt;/code&gt; å’Œ &lt;code&gt;GetHashCode&lt;/code&gt;(æœ‰æ—¶)ã€‚ä½†æ˜¯å¦‚æœè®°å½•æ”¹å˜äº†çŠ¶æ€ï¼Œå®ƒçš„ &lt;code&gt;Equals&lt;/code&gt; å€¼ä¹Ÿä¼šéšä¹‹æ”¹å˜ï¼Œæˆ‘ä»¬å¯èƒ½å†ä¹Ÿæ‰¾ä¸åˆ°å®ƒäº†ï¼åœ¨å“ˆå¸Œè¡¨å®ç°ä¸­ï¼Œå®ƒç”šè‡³å¯èƒ½ç ´åæ•°æ®ç»“æ„ï¼Œå› ä¸ºä½ç½®æ˜¯åŸºäºå®ƒçš„å“ˆå¸Œç å¾—åˆ°çš„ã€‚&lt;/p&gt;
&lt;p&gt;è®°å½•(&lt;code&gt;record&lt;/code&gt;)å†…éƒ¨çš„å¯å˜çŠ¶æ€æˆ–è®¸æœ‰ä¸€äº›æœ‰æ•ˆçš„é«˜çº§ç”¨æ³•ï¼Œç‰¹åˆ«æ˜¯å¯¹äºç¼“å­˜ã€‚ä½†æ˜¯é‡å†™é»˜è®¤è¡Œä¸ºä»¥å¿½ç•¥è¿™ç§çŠ¶æ€æ‰€æ¶‰åŠçš„æ‰‹å·¥å·¥ä½œå¾ˆå¯èƒ½æ˜¯ç›¸å½“å¤§çš„ã€‚&lt;/p&gt;
&lt;h3 id=&quot;with-è¡¨è¾¾å¼å’Œç»§æ‰¿ï¼ˆwith-expressions-and-inheritanceï¼‰&quot;&gt;&lt;code&gt;with&lt;/code&gt; è¡¨è¾¾å¼å’Œç»§æ‰¿ï¼ˆWith-expressions and inheritanceï¼‰&lt;/h3&gt;
&lt;p&gt;ä¼—æ‰€å‘¨çŸ¥ï¼ŒåŸºäºå€¼çš„ç›¸ç­‰å’Œéç ´åæ€§çªå˜ä¸ç»§æ‰¿ç»“åˆåœ¨ä¸€èµ·æ—¶æ˜¯æå…·æŒ‘æˆ˜æ€§çš„ã€‚è®©æˆ‘ä»¬åœ¨è¿è¡Œç¤ºä¾‹ä¸­æ·»åŠ ä¸€ä¸ªæ´¾ç”Ÿçš„è®°å½•(&lt;code&gt;record&lt;/code&gt;)ç±» &lt;code&gt;Student&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;public record Person { string FirstName; string LastName; }
public record Student : Person { int ID; }
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç„¶åï¼Œè®©æˆ‘ä»¬ä» &lt;code&gt;with&lt;/code&gt; è¡¨è¾¾å¼ç¤ºä¾‹å¼€å§‹ï¼Œå®é™…åœ°åˆ›å»ºä¸€ä¸ª &lt;code&gt;Student&lt;/code&gt;ï¼Œä½†å°†å®ƒå­˜å‚¨åœ¨ &lt;code&gt;Person&lt;/code&gt; å˜é‡ä¸­ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;int newId = 1;
Func&amp;lt;int&amp;gt; GetNewId = () =&amp;gt; ++newId;
//ä¸Šé¢ä¸¤ä¸Šæ˜¯è¯‘è€…åœ¨æµ‹è¯•æ—¶å‘ç°éœ€è¦æ·»åŠ çš„ä»£ç ã€‚

Person person = new Student { FirstName = &quot;Scott&quot;, LastName = &quot;Hunter&quot;, ID = GetNewId() };
otherPerson = person with { LastName = &quot;Hanselman&quot; };
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨æœ€åä¸€è¡Œå¸¦ &lt;code&gt;with&lt;/code&gt; è¡¨è¾¾å¼çš„åœ°æ–¹ï¼Œç¼–è¯‘å™¨ä¸çŸ¥é“ &lt;code&gt;person&lt;/code&gt; å®é™…ä¸ŠåŒ…å« &lt;code&gt;Student&lt;/code&gt;ã€‚ç„¶è€Œï¼Œå¦‚æœæ–°çš„ &lt;code&gt;person&lt;/code&gt;(å³ &lt;code&gt;otherPerson&lt;/code&gt;) ä¸æ˜¯ä¸€ä¸ª&lt;em&gt;çœŸæ­£çš„&lt;/em&gt; &lt;code&gt;Student&lt;/code&gt; å¯¹è±¡ï¼Œå¹¶ä¸”å…·æœ‰ä»ç¬¬ä¸€ä¸ª &lt;code&gt;person&lt;/code&gt; å¤åˆ¶è¿‡å»çš„ç›¸åŒçš„ &lt;code&gt;ID&lt;/code&gt;ï¼Œé‚£ä¹ˆå®ƒå°±ä¸æ˜¯ä¸€ä¸ªæ°å½“çš„æ‹·è´ã€‚&lt;/p&gt;
&lt;p&gt;C# å®ç°äº†è¿™ä¸€ç‚¹ã€‚è®°å½•(&lt;code&gt;record&lt;/code&gt;)æœ‰ä¸€ä¸ªéšè—çš„è™šæ–¹æ³•ï¼ˆ&lt;code&gt;virtual method&lt;/code&gt;ï¼‰ï¼Œå®ƒè¢«å§”æ‰˜â€œå…‹éš†â€&lt;em&gt;æ•´ä¸ª&lt;/em&gt;å¯¹è±¡ã€‚æ¯ä¸ªæ´¾ç”Ÿè®°å½•ç±»å‹éƒ½é‡å†™æ­¤æ–¹æ³•ä»¥è°ƒç”¨è¯¥ç±»å‹çš„å¤åˆ¶æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”æ´¾ç”Ÿè®°å½•çš„å¤åˆ¶æ„é€ å‡½æ•°å°†é“¾æ¥åˆ°åŸºè®°å½•çš„å¤åˆ¶æ„é€ å‡½æ•°ã€‚&lt;code&gt;with&lt;/code&gt; è¡¨è¾¾å¼åªéœ€è°ƒç”¨éšè—çš„â€œå…‹éš†â€æ–¹æ³•å¹¶å°†å¯¹è±¡åˆå§‹åŒ–å™¨åº”ç”¨äºå…¶è¿”å›ç»“æœã€‚&lt;/p&gt;
&lt;h3 id=&quot;åŸºäºå€¼çš„ç›¸ç­‰å’Œç»§æ‰¿ï¼ˆvalue-based-equality-and-inheritanceï¼‰&quot;&gt;åŸºäºå€¼çš„ç›¸ç­‰å’Œç»§æ‰¿ï¼ˆValue-based equality and inheritanceï¼‰&lt;/h3&gt;
&lt;p&gt;ä¸ &lt;code&gt;with&lt;/code&gt; è¡¨è¾¾å¼æ”¯æŒç±»ä¼¼ï¼ŒåŸºäºå€¼çš„ç›¸ç­‰ä¹Ÿå¿…é¡»æ˜¯â€œè™šçš„(&lt;code&gt;virtual&lt;/code&gt;)â€ï¼Œå³ &lt;code&gt;Student&lt;/code&gt; éœ€è¦æ¯”è¾ƒ &lt;code&gt;Student&lt;/code&gt; çš„æ‰€æœ‰å­—æ®µï¼Œå³ä½¿æ¯”è¾ƒæ—¶é™æ€å·²çŸ¥çš„ç±»å‹æ˜¯ &lt;code&gt;Person&lt;/code&gt; ä¹‹ç±»çš„åŸºç±»å‹ã€‚è¿™å¾ˆå®¹æ˜“é€šè¿‡é‡å†™è™šçš„(&lt;code&gt;virtual&lt;/code&gt;) &lt;code&gt;Equals&lt;/code&gt; æ–¹æ³•æ¥å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œå…³äºç›¸ç­‰è¿˜æœ‰ä¸€ä¸ªé¢å¤–çš„æŒ‘æˆ˜ï¼šå¦‚æœä½ æ¯”è¾ƒä¸¤ç§ä¸åŒçš„ &lt;code&gt;Person&lt;/code&gt; ä¼šæ€æ ·?æˆ‘ä»¬ä¸èƒ½ä»…ä»…è®©å…¶ä¸­ä¸€ä¸ªæ¥å†³å®šå®æ–½å“ªä¸ªç›¸ç­‰ï¼šç›¸ç­‰åº”è¯¥æ˜¯å¯¹ç§°çš„ï¼Œæ‰€ä»¥ä¸ç®¡ä¸¤ä¸ªå¯¹è±¡å“ªä¸ªåœ¨å‰é¢ï¼Œç»“æœåº”è¯¥æ˜¯ç›¸åŒçš„ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒä»¬å¿…é¡»åœ¨&lt;em&gt;ç›¸ç­‰&lt;/em&gt;çš„å®æ–½ä¸Š&lt;em&gt;è¾¾æˆä¸€è‡´&lt;/em&gt;ï¼&lt;/p&gt;
&lt;p&gt;ä¸¾ä¾‹è¯´æ˜ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;Person person1 = new Person { FirstName = &quot;Scott&quot;, LastName = &quot;Hunter&quot; };
Person person2 = new Student { FirstName = &quot;Scott&quot;, LastName = &quot;Hunter&quot;, ID = GetNewId() };
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™ä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰å—ï¼Ÿ &lt;code&gt;person1&lt;/code&gt; å¯èƒ½ä¼šè®¤ä¸ºç›¸ç­‰ï¼Œå› ä¸º &lt;code&gt;person2&lt;/code&gt; å¯¹äº &lt;code&gt;Person&lt;/code&gt; çš„æ‰€æœ‰å±æ€§éƒ½æ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯ &lt;code&gt;person2&lt;/code&gt; ä¸æ•¢è‹ŸåŒï¼æˆ‘ä»¬éœ€è¦ç¡®ä¿å®ƒä»¬éƒ½åŒæ„å®ƒä»¬æ˜¯ä¸åŒçš„å¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;åŒæ ·ï¼ŒC# ä¼šè‡ªåŠ¨ä¸ºæ‚¨å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚å®ç°çš„æ–¹å¼æ˜¯ï¼Œè®°å½•æœ‰ä¸€ä¸ªåä¸º &lt;code&gt;EqualityContract&lt;/code&gt; çš„â€œè™šçš„(&lt;code&gt;virtual&lt;/code&gt;)â€å—ä¿æŠ¤çš„å±æ€§ã€‚æ¯ä¸ªæ´¾ç”Ÿè®°å½•(&lt;code&gt;record&lt;/code&gt;)éƒ½ä¼šé‡å†™å®ƒï¼Œä¸ºäº†æ¯”è¾ƒç›¸ç­‰ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡å¿…é¡»å…·æœ‰ç›¸åŒçš„ &lt;code&gt;EqualityContract&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä¸‰ã€é¡¶çº§ç¨‹åºï¼ˆtop-level-programsï¼‰&quot;&gt;ä¸‰ã€é¡¶çº§ç¨‹åºï¼ˆTop-level programsï¼‰&lt;/h2&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;è¯‘è€…æ³¨ï¼š&lt;br/&gt;ä»€ä¹ˆæ˜¯ Top-level program ? è¿™æ˜¯åœ¨é¡¶çº§ç¼–å†™ç¨‹åºçš„ä¸€ç§æ›´ç®€å•çš„æ–¹å¼ï¼šä¸€ä¸ªæ›´ç®€å•çš„ &lt;code&gt;Program.cs&lt;/code&gt; æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç”¨ C# ç¼–å†™ä¸€ä¸ªç®€å•çš„ç¨‹åºéœ€è¦å¤§é‡çš„æ ·æ¿ä»£ç ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;using System;
class Program
{
    static void Main()
    {
        Console.WriteLine(&quot;Hello World!&quot;);
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™ä¸ä»…å¯¹è¯­è¨€åˆå­¦è€…æ¥è¯´æ˜¯éš¾ä»¥æ‰¿å—çš„ï¼Œè€Œä¸”è¿˜ä¼šä½¿ä»£ç æ··ä¹±ï¼Œå¢åŠ ç¼©è¿›çº§åˆ«ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ C# 9.0 ä¸­ï¼Œæ‚¨å¯ä»¥é€‰æ‹©åœ¨é¡¶çº§ç¼–å†™ä½ çš„ä¸»ç¨‹åº(main program)ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;using System;

Console.WriteLine(&quot;Hello World!&quot;);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…è®¸ä»»ä½•è¯­å¥ã€‚æ­¤ç¨‹åºå¿…é¡»åœ¨æ–‡ä»¶ä¸­çš„ &lt;code&gt;using&lt;/code&gt; è¯­å¥ä¹‹åï¼Œä»»ä½•ç±»å‹æˆ–å‘½åç©ºé—´å£°æ˜ä¹‹å‰æ‰§è¡Œï¼Œå¹¶ä¸”åªèƒ½åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­æ‰§è¡Œã€‚å°±åƒç›®å‰åªèƒ½æœ‰ä¸€ä¸ª &lt;code&gt;Main&lt;/code&gt; æ–¹æ³•ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæ‚¨æƒ³è¿”å›ä¸€ä¸ªçŠ¶æ€ç ï¼Œæ‚¨å¯ä»¥åšã€‚å¦‚æœæ‚¨æƒ³ç­‰å¾…(&lt;code&gt;await&lt;/code&gt;)ï¼Œæ‚¨å¯ä»¥åšã€‚å¦‚æœæ‚¨æƒ³è®¿é—®å‘½ä»¤è¡Œå‚æ•°ï¼Œ&lt;code&gt;args&lt;/code&gt; å¯ä»¥ä½œä¸ºä¸€ä¸ªâ€œé­”æ³•â€å‚æ•°ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;å±€éƒ¨å‡½æ•°æ˜¯è¯­å¥çš„ä¸€ç§å½¢å¼ï¼Œä¹Ÿå…è®¸åœ¨é¡¶çº§ç¨‹åºä¸­ä½¿ç”¨ã€‚ä»é¡¶çº§è¯­å¥éƒ¨åˆ†ä¹‹å¤–çš„ä»»ä½•åœ°æ–¹è°ƒç”¨å®ƒä»¬éƒ½æ˜¯é”™è¯¯çš„ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å››ã€æ”¹è¿›çš„æ¨¡å¼åŒ¹é…ï¼ˆimproved-pattern-matchingï¼‰&quot;&gt;å››ã€æ”¹è¿›çš„æ¨¡å¼åŒ¹é…ï¼ˆImproved pattern matchingï¼‰&lt;/h2&gt;
&lt;p&gt;C# 9.0 ä¸­æ·»åŠ äº†å‡ ç§æ–°çš„æ¨¡å¼ã€‚è®©æˆ‘ä»¬ä»&lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/csharp/tutorials/pattern-matching&quot;&gt;æ¨¡å¼åŒ¹é…æ•™ç¨‹&lt;/a&gt;çš„ä»£ç ç‰‡æ®µçš„ä¸Šä¸‹æ–‡ä¸­æ¥çœ‹çœ‹å®ƒä»¬:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;public static decimal CalculateToll(object vehicle) =&amp;gt;
    vehicle switch
    {
       ...
       
        DeliveryTruck t when t.GrossWeightClass &amp;gt; 5000 =&amp;gt; 10.00m + 5.00m,
        DeliveryTruck t when t.GrossWeightClass &amp;lt; 3000 =&amp;gt; 10.00m - 2.00m,
        DeliveryTruck _ =&amp;gt; 10.00m,

        _ =&amp;gt; throw new ArgumentException(&quot;Not a known vehicle type&quot;, nameof(vehicle))
    };
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;ç®€å•ç±»å‹æ¨¡å¼ï¼ˆsimple-type-patternsï¼‰&quot;&gt;ç®€å•ç±»å‹æ¨¡å¼ï¼ˆSimple type patternsï¼‰&lt;/h3&gt;
&lt;p&gt;ç›®å‰ï¼Œç±»å‹æ¨¡å¼éœ€è¦åœ¨ç±»å‹åŒ¹é…æ—¶å£°æ˜ä¸€ä¸ªæ ‡è¯†ç¬¦â€”â€”å³ä½¿è¯¥æ ‡è¯†ç¬¦æ˜¯ä¸€ä¸ªä¸¢å¼ƒçš„ &lt;code&gt;_&lt;/code&gt;ï¼Œå¦‚ä¸Šé¢çš„ &lt;code&gt;DeliveryTruck _&lt;/code&gt; æ‰€ç¤ºã€‚ä½†ç°åœ¨ä½ åªéœ€å†™ä¸‹ç±»å‹å°±å¯ä»¥äº†ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;DeliveryTruck =&amp;gt; 10.00m,
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;å…³ç³»æ¨¡å¼ï¼ˆrelational-patternsï¼‰&quot;&gt;å…³ç³»æ¨¡å¼ï¼ˆRelational patternsï¼‰&lt;/h3&gt;
&lt;p&gt;C# 9.0 å¼•å…¥äº†ä¸å…³ç³»è¿ç®—ç¬¦ &lt;code&gt;&amp;lt;&lt;/code&gt;ã€&lt;code&gt;&amp;lt;=&lt;/code&gt; ç­‰ç›¸å¯¹åº”çš„æ¨¡å¼ã€‚å› æ­¤ï¼Œç°åœ¨å¯ä»¥å°†ä¸Šè¿°æ¨¡å¼çš„ &lt;code&gt;DeliveryTruck&lt;/code&gt; éƒ¨åˆ†ç¼–å†™ä¸ºåµŒå¥—çš„ &lt;code&gt;switch&lt;/code&gt; è¡¨è¾¾å¼ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;DeliveryTruck t when t.GrossWeightClass switch
{
    &amp;gt; 5000 =&amp;gt; 10.00m + 5.00m,
    &amp;lt; 3000 =&amp;gt; 10.00m - 2.00m,
    _ =&amp;gt; 10.00m,
},
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œçš„ &lt;code&gt;&amp;gt; 5000&lt;/code&gt; å’Œ &lt;code&gt;&amp;lt; 3000&lt;/code&gt; æ˜¯å…³ç³»æ¨¡å¼ã€‚&lt;/p&gt;
&lt;h3 id=&quot;é€»è¾‘æ¨¡å¼ï¼ˆlogical-patternsï¼‰&quot;&gt;é€»è¾‘æ¨¡å¼ï¼ˆLogical patternsï¼‰&lt;/h3&gt;
&lt;p&gt;æœ€åï¼Œæ‚¨å¯ä»¥å°†æ¨¡å¼ä¸é€»è¾‘è¿ç®—ç¬¦ &lt;code&gt;and&lt;/code&gt;ã€&lt;code&gt;or&lt;/code&gt; å’Œ &lt;code&gt;not&lt;/code&gt; ç»„åˆèµ·æ¥ï¼Œè¿™äº›è¿ç®—ç¬¦ç”¨å•è¯æ‹¼å†™ï¼Œä»¥é¿å…ä¸è¡¨è¾¾å¼ä¸­ä½¿ç”¨çš„è¿ç®—ç¬¦æ··æ·†ã€‚ä¾‹å¦‚ï¼Œä¸Šé¢åµŒå¥—çš„&lt;code&gt;switch&lt;/code&gt;çš„ç¤ºä¾‹å¯ä»¥æŒ‰å¦‚ä¸‹å‡åºæ’åˆ—ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;DeliveryTruck t when t.GrossWeightClass switch
{
    &amp;lt; 3000 =&amp;gt; 10.00m - 2.00m,
    &amp;gt;= 3000 and &amp;lt;= 5000 =&amp;gt; 10.00m,
    &amp;gt; 5000 =&amp;gt; 10.00m + 5.00m,
},
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ­¤ä¾‹ä¸­é—´çš„æ¡ˆä¾‹ä½¿ç”¨ &lt;code&gt;and&lt;/code&gt; åˆå¹¶äº†ä¸¤ä¸ªå…³ç³»æ¨¡å¼ï¼Œå½¢æˆä¸€ä¸ªè¡¨ç¤ºåŒºé—´çš„æ¨¡å¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;not&lt;/code&gt; æ¨¡å¼çš„ä¸€ä¸ªå¸¸è§ç”¨æ³•æ˜¯å°†å…¶åº”ç”¨äº &lt;code&gt;null&lt;/code&gt; å¸¸é‡æ¨¡å¼ï¼Œå¦‚ &lt;code&gt;not null&lt;/code&gt;ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®æœªçŸ¥å®ä¾‹æ˜¯å¦ä¸ºç©ºæ¥æ‹†åˆ†å®ƒä»¬çš„å¤„ç†ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;not null =&amp;gt; throw new ArgumentException($&quot;Not a known vehicle type: {vehicle}&quot;, nameof(vehicle)),
null =&amp;gt; throw new ArgumentNullException(nameof(vehicle))
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ­¤å¤–ï¼Œ&lt;code&gt;not&lt;/code&gt; åœ¨ &lt;code&gt;if&lt;/code&gt; æ¡ä»¶ä¸­åŒ…å« &lt;code&gt;is&lt;/code&gt; è¡¨è¾¾å¼æ—¶å°†ä¼šå¾ˆæ–¹ä¾¿ï¼Œå¯ä»¥å–ä»£ç¬¨æ‹™çš„åŒæ‹¬å·ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;if (!(e is Customer)) { ... }
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ‚¨å¯ä»¥å†™æˆï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;if (e is not Customer) { ... }
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;äº”ã€æ”¹è¿›çš„ç›®æ ‡ç±»å‹ï¼ˆimproved-target-typingï¼‰&quot;&gt;äº”ã€æ”¹è¿›çš„ç›®æ ‡ç±»å‹ï¼ˆImproved target typingï¼‰&lt;/h2&gt;
&lt;p&gt;â€œç›®æ ‡ç±»å‹(&lt;code&gt;Target typing&lt;/code&gt;)â€æ˜¯ä¸€ä¸ªæœ¯è¯­ï¼Œå½“ä¸€ä¸ªè¡¨è¾¾å¼ä»ä½¿ç”¨å®ƒçš„åœ°æ–¹çš„ä¸Šä¸‹æ–‡ä¸­è·å¾—å…¶ç±»å‹æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªæœ¯è¯­ã€‚ä¾‹å¦‚ï¼Œ&lt;code&gt;null&lt;/code&gt; å’Œ &lt;code&gt;lambda&lt;/code&gt;è¡¨è¾¾å¼å§‹ç»ˆæ˜¯ç›®æ ‡ç±»å‹çš„ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ C# 9.0 ä¸­ï¼Œä¸€äº›ä»¥å‰ä¸æ˜¯ç›®æ ‡ç±»å‹çš„è¡¨è¾¾å¼å˜å¾—å¯ä»¥ç”±å…¶ä¸Šä¸‹æ–‡æ¨å¯¼ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ç›®æ ‡ç±»å‹çš„-new-è¡¨è¾¾å¼ï¼ˆtarget-typed-new-expressionsï¼‰&quot;&gt;ç›®æ ‡ç±»å‹çš„ &lt;code&gt;new&lt;/code&gt; è¡¨è¾¾å¼ï¼ˆTarget-typed new expressionsï¼‰&lt;/h3&gt;
&lt;p&gt;C# ä¸­çš„ &lt;code&gt;new&lt;/code&gt; è¡¨è¾¾å¼æ€»æ˜¯è¦æ±‚æŒ‡å®šç±»å‹ï¼ˆéšå¼ç±»å‹çš„æ•°ç»„è¡¨è¾¾å¼é™¤å¤–ï¼‰ã€‚ç°åœ¨ï¼Œå¦‚æœè¡¨è¾¾å¼è¢«èµ‹å€¼ä¸ºä¸€ä¸ªæ˜ç¡®çš„ç±»å‹ï¼Œåˆ™å¯ä»¥çœç•¥è¯¥ç±»å‹ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;Point p = new (3, 5);
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;ç›®æ ‡ç±»å‹çš„--å’Œ-ï¼ˆtarget-typed--and-ï¼‰&quot;&gt;ç›®æ ‡ç±»å‹çš„ &lt;strong&gt;&lt;code&gt;??&lt;/code&gt;&lt;/strong&gt; å’Œ &lt;strong&gt;&lt;code&gt;?:&lt;/code&gt;&lt;/strong&gt;ï¼ˆTarget typed &lt;code&gt;??&lt;/code&gt; and &lt;code&gt;?:&lt;/code&gt;ï¼‰&lt;/h3&gt;
&lt;p&gt;æœ‰æ—¶æœ‰æ¡ä»¶çš„ &lt;code&gt;??&lt;/code&gt; å’Œ &lt;code&gt;?:&lt;/code&gt; è¡¨è¾¾å¼åœ¨åˆ†æ”¯ä¹‹é—´æ²¡æœ‰æ˜æ˜¾çš„å…±äº«ç±»å‹ï¼Œè¿™ç§æƒ…å†µç›®å‰æ˜¯å¤±è´¥çš„ã€‚ä½†æ˜¯å¦‚æœæœ‰ä¸€ä¸ªä¸¤ä¸ªåˆ†æ”¯éƒ½å¯ä»¥è½¬æ¢æˆçš„ç›®æ ‡ç±»å‹ï¼Œåœ¨ C# 9.0 ä¸­å°†æ˜¯å…è®¸çš„ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;Person person = student ?? customer; // Shared base type
int? result = b ? 0 : null; // nullable value type
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;å…­ã€åå˜å¼è¿”å›å€¼ï¼ˆcovariant-returnsï¼‰&quot;&gt;å…­ã€åå˜å¼è¿”å›å€¼ï¼ˆCovariant returnsï¼‰&lt;/h2&gt;
&lt;p&gt;æœ‰æ—¶å€™ï¼Œè¿™æ ·çš„è¡¨è¾¾æ˜¯æœ‰ç”¨çš„â€”â€”æ´¾ç”Ÿç±»ä¸­çš„æ–¹æ³•é‡å†™å…·æœ‰ä¸€ä¸ªæ¯”åŸºç±»å‹ä¸­çš„å£°æ˜æ›´å…·ä½“ï¼ˆæ›´æ˜ç¡®ï¼‰çš„è¿”å›ç±»å‹ã€‚C# 9.0 å…è®¸ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-csharp&quot;&gt;abstract class Animal
{
    public abstract Food GetFood();
    ...
}
class Tiger : Animal
{
    public override Meat GetFood() =&amp;gt; ...;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;æ›´å¤šå†…å®¹&quot;&gt;æ›´å¤šå†…å®¹â€¦â€¦&lt;/h2&gt;
&lt;p&gt;è¦æŸ¥çœ‹ C# 9.0 å³å°†å‘å¸ƒçš„å…¨éƒ¨ç‰¹æ€§å¹¶è¿½éšå®ƒä»¬çš„å®Œæˆï¼Œæœ€å¥½çš„åœ°æ–¹æ˜¯ Roslyn(C#/VB ç¼–è¯‘å™¨) GitHub ä»“åº“ä¸Šçš„ &lt;a href=&quot;https://github.com/dotnet/roslyn/blob/master/docs/Language%20Feature%20Status.md&quot;&gt;Language Feature Status&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;br/&gt;&lt;blockquote readability=&quot;5.0649350649351&quot;&gt;
&lt;p&gt;ä½œè€… ï¼š Mads Torgersen&lt;br/&gt;è¯‘è€… ï¼š æŠ€æœ¯è¯‘æ°‘&lt;br/&gt;å‡ºå“ ï¼š &lt;a href=&quot;https://ittranslator.cn/&quot;&gt;æŠ€æœ¯è¯‘ç«™&lt;/a&gt;&lt;br/&gt;é“¾æ¥ ï¼š &lt;a href=&quot;https://devblogs.microsoft.com/dotnet/welcome-to-c-9-0/&quot;&gt;è‹±æ–‡åŸæ–‡&lt;/a&gt;&lt;br/&gt;Â©çº¯æ‰‹å·¥ç¿»è¯‘ï¼Œæ¬¢è¿è½¬è½½ï¼Œè½¬è½½è¯·æ ‡æ˜å‡ºå¤„&lt;/p&gt;
&lt;/blockquote&gt;
</description>
<pubDate>Thu, 27 Aug 2020 17:53:00 +0000</pubDate>
<dc:creator>æŠ€æœ¯è¯‘æ°‘</dc:creator>
<og:description>ç¿»è¯‘è‡ª Mads Torgersen 2020å¹´5æœˆ20æ—¥çš„åšæ–‡ã€ŠWelcome to C# 9.0ã€‹ï¼ŒMads Torgersen æ˜¯å¾®è½¯ C# è¯­è¨€çš„é¦–å¸­è®¾è®¡å¸ˆï¼Œä¹Ÿæ˜¯å¾®è½¯ .NET å›¢é˜Ÿçš„é¡¹ç›®ç¾¤ç»</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/ittranslator/p/13575059.html</dc:identifier>
</item>
<item>
<title>ent ormç¬”è®°2---schemaä½¿ç”¨(ä¸‹) - syncd</title>
<link>http://www.cnblogs.com/zhaof/p/13575062.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/zhaof/p/13575062.html</guid>
<description>&lt;h2 id=&quot;indexes-ç´¢å¼•&quot;&gt;Indexes ç´¢å¼•&lt;/h2&gt;
&lt;p&gt;åœ¨å‰ä¸¤ç¯‡çš„æ–‡ç« ä¸­ï¼Œå…¶å®å¯¹äºç´¢å¼•ä¹Ÿæœ‰ä¸€äº›ä½¿ç”¨ï¼Œ è¿™é‡Œæ¥è¯¦ç»†çœ‹ä¸€ä¸‹å…³äºç´¢å¼•çš„ä½¿ç”¨&lt;/p&gt;
&lt;p&gt;Indexesæ–¹æ³•å¯ä»¥åœ¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªå­—æ®µä¸Šè®¾ç½®ç´¢å¼•ï¼Œä»¥æé«˜æ•°æ®æ£€ç´¢çš„é€Ÿåº¦æˆ–è€…å®šä¹‰æ•°æ®çš„å”¯ä¸€æ€§&lt;/p&gt;
&lt;p&gt;åœ¨ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¯¹userè¡¨çš„&lt;code&gt;field1&lt;/code&gt; å’Œ&lt;code&gt;field2&lt;/code&gt; å­—æ®µè®¾ç½®äº†è”åˆç´¢å¼•;å¯¹&lt;code&gt;first_name&lt;/code&gt;å’Œ&lt;code&gt;last_name&lt;/code&gt;è®¾ç½®äº†è”åˆå”¯ä¸€ç´¢å¼•; å¯¹&lt;code&gt;field3&lt;/code&gt; è®¾ç½®äº†å”¯ä¸€ç´¢å¼•ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œéœ€è¦æ³¨æ„å¯¹äºå•ç‹¬çš„å­—æ®µè®¾ç½®å”¯ä¸€ç´¢å¼•ï¼Œåœ¨Fieldsä¸­å®šä¹‰å­—æ®µçš„æ—¶å€™é€šè¿‡Uniqueæ–¹æ³•å³å¯&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;package schema

import (
        &quot;github.com/facebook/ent&quot;
        &quot;github.com/facebook/ent/schema/field&quot;
        &quot;github.com/facebook/ent/schema/index&quot;
)

// User holds the schema definition for the User entity.
type User struct {
        ent.Schema
}

// Fields of the User.
func (User) Fields() []ent.Field {
        return []ent.Field{
                field.String(&quot;field1&quot;),
                field.String(&quot;field2&quot;),
                field.String(&quot;field3&quot;).Unique(),
                field.String(&quot;first_name&quot;),
                field.String(&quot;last_name&quot;),
        }
}

// Edges of the User.
func (User) Edges() []ent.Edge {
        return nil
}

func Indexes() []ent.Index {
        return []ent.Index{
                // non-unique index.
                index.Fields(&quot;field1&quot;, &quot;field2&quot;),
                // unique index
                index.Fields(&quot;first_name&quot;, &quot;last_name&quot;).Unique(),
        }
}

&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æŸ¥çœ‹ä¸€ä¸‹ç”Ÿæˆçš„è¡¨çš„ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-sql&quot;&gt;CREATE TABLE `users` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `field1` varchar(255) COLLATE utf8mb4_bin NOT NULL,
  `field2` varchar(255) COLLATE utf8mb4_bin NOT NULL,
  `field3` varchar(255) COLLATE utf8mb4_bin NOT NULL,
  `first_name` varchar(255) COLLATE utf8mb4_bin NOT NULL,
  `last_name` varchar(255) COLLATE utf8mb4_bin NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `field3` (`field3`),
  UNIQUE KEY `user_first_name_last_name` (`first_name`,`last_name`),
  KEY `user_field1_field2` (`field1`,`field2`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;index-on-edges&quot;&gt;Index On Edges&lt;/h3&gt;
&lt;p&gt;åœ¨å»ºç«‹è¡¨å…³ç³»çš„æ—¶å€™ä¹Ÿå¯ä»¥å¯¹ç›¸åº”çš„å­—æ®µè®¾ç½®ç´¢å¼•ï¼Œä¸»è¦å®åœ¨ç‰¹å®šå…³ç³»ä¸‹è®¾ç½®å­—æ®µçš„å”¯ä¸€æ€§&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://entgo.io/assets/er_city_streets.png&quot; alt=&quot;er-city-streets&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæœ‰è®¸å¤šè¡—é“çš„åŸå¸‚ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨æ¯ä¸ªåŸå¸‚ä¸‹è®¾ç½®è¡—é“åç§°æ˜¯å”¯ä¸€çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ent/schema/city.go&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;package schema

import (
   &quot;github.com/facebook/ent&quot;
   &quot;github.com/facebook/ent/schema/edge&quot;
   &quot;github.com/facebook/ent/schema/field&quot;
)

// City holds the schema definition for the City entity.
type City struct {
   ent.Schema
}

// Fields of the City.
func (City) Fields() []ent.Field {
   return []ent.Field{
      field.String(&quot;name&quot;),
   }
}

// Edges of the City.
func (City) Edges() []ent.Edge {
   return []ent.Edge{
      edge.To(&quot;streets&quot;, Street.Type),
   }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;ent/schema/street.go&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;package schema

import (
   &quot;github.com/facebook/ent&quot;
   &quot;github.com/facebook/ent/schema/edge&quot;
   &quot;github.com/facebook/ent/schema/field&quot;
)

// Street holds the schema definition for the Street entity.
type Street struct {
   ent.Schema
}

// Fields of the Street.
func (Street) Fields() []ent.Field {
   return []ent.Field{
      field.String(&quot;name&quot;),
   }
}

// Edges of the Street.
func (Street) Edges() []ent.Edge {
   return []ent.Edge{
      edge.From(&quot;city&quot;, City.Type).
         Ref(&quot;streets&quot;).
         Unique(),
   }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­è¿™ç§ç”¨æ³•æˆ‘ä»¬å·²ç»è§è¿‡ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹è¿™æ ·åˆ›å»ºçš„è¡¨ä¿¡æ¯ï¼Œä¸»è¦æ˜¯çœ‹streetsè¿™ä¸ªè¡¨ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-sql&quot;&gt;CREATE TABLE `streets` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8mb4_bin NOT NULL,
  `city_streets` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `streets_cities_streets` (`city_streets`),
  CONSTRAINT `streets_cities_streets` FOREIGN KEY (`city_streets`) REFERENCES `cities` (`id`) ON DELETE SET NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨&lt;code&gt;ent/schema/street.go&lt;/code&gt; æ·»åŠ ç´¢å¼•çš„ä¿¡æ¯åï¼Œå†æ¬¡æŸ¥çœ‹streetsè¡¨çš„ä¿¡æ¯ï¼Œå…¶å®è¿™é‡Œæˆ‘ä»¬å°±æ˜¯é€šè¿‡æ·»åŠ çº¦æŸï¼Œä½¿å¾—ä¸€ä¸ªåŸå¸‚ä¸­æ¯ä¸ªè¡—é“çš„åç§°æ˜¯å”¯ä¸€çš„&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;func (Street) Indexes() []ent.Index {
   return []ent.Index{
      index.Fields(&quot;name&quot;).
         Edges(&quot;city&quot;).
         Unique(),
   }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=&quot;language-sql&quot;&gt;CREATE TABLE `streets` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8mb4_bin NOT NULL,
  `city_streets` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `street_name_city_streets` (`name`,`city_streets`),
  KEY `streets_cities_streets` (`city_streets`),
  CONSTRAINT `streets_cities_streets` FOREIGN KEY (`city_streets`) REFERENCES `cities` (`id`) ON DELETE SET NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;config&quot;&gt;Config&lt;/h2&gt;
&lt;p&gt;å¯ä»¥ä½¿ç”¨Tableé€‰é¡¹ä¸ºç±»å‹æä¾›è‡ªå®šä¹‰è¡¨åï¼Œå¦‚ä¸‹æ‰€ç¤º:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;package schema

import (
    &quot;github.com/facebook/ent&quot;
    &quot;github.com/facebook/ent/schema/field&quot;
)

type User struct {
    ent.Schema
}

func (User) Config() ent.Config {
    return ent.Config{
        Table: &quot;Users&quot;,
    }
}

func (User) Fields() []ent.Field {
    return []ent.Field{
        field.Int(&quot;age&quot;),
        field.String(&quot;name&quot;),
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;mixin&quot;&gt;Mixin&lt;/h2&gt;
&lt;p&gt;Mixinå…è®¸æ‚¨åˆ›å»ºå¯é‡ç”¨çš„&lt;code&gt;ent.Schema&lt;/code&gt;ä»£ç ã€‚&lt;code&gt;ent.Mixin&lt;/code&gt; æ¥å£å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;Mixin interface {
    // Fields returns a slice of fields to add to the schema.
    Fields() []Field
    // Edges returns a slice of edges to add to the schema.
    Edges() []Edge
    // Indexes returns a slice of indexes to add to the schema.
    Indexes() []Index
    // Hooks returns a slice of hooks to add to the schema.
    // Note that mixin hooks are executed before schema hooks.
    Hooks() []Hook
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Mixinçš„ä¸€ä¸ªå¸¸è§ç”¨ä¾‹æ˜¯å°†ä¸€äº›å¸¸ç”¨çš„é€šç”¨å­—æ®µè¿›è¡Œå†…ç½®ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;package schema

import (
    &quot;time&quot;

    &quot;github.com/facebook/ent&quot;
    &quot;github.com/facebook/ent/schema/field&quot;
    &quot;github.com/facebook/ent/schema/mixin&quot;
)

// -------------------------------------------------
// Mixin definition

// TimeMixin implements the ent.Mixin for sharing
// time fields with package schemas.
type TimeMixin struct{
    // We embed the `mixin.Schema` to avoid
    // implementing the rest of the methods.
    mixin.Schema
}

func (TimeMixin) Fields() []ent.Field {
    return []ent.Field{
        field.Time(&quot;created_at&quot;).
            Immutable().
            Default(time.Now),
        field.Time(&quot;updated_at&quot;).
            Default(time.Now).
            UpdateDefault(time.Now),
    }
}

// DetailsMixin implements the ent.Mixin for sharing
// entity details fields with package schemas.
type DetailsMixin struct{
    // We embed the `mixin.Schema` to avoid
    // implementing the rest of the methods.
    mixin.Schema
}

func (DetailsMixin) Fields() []ent.Field {
    return []ent.Field{
        field.Int(&quot;age&quot;).
            Positive(),
        field.String(&quot;name&quot;).
            NotEmpty(),
    }
}

// -------------------------------------------------
// Schema definition

// User schema mixed-in the TimeMixin and DetailsMixin fields and therefore
// has 5 fields: `created_at`, `updated_at`, `age`, `name` and `nickname`.
type User struct {
    ent.Schema
}

func (User) Mixin() []ent.Mixin {
    return []ent.Mixin{
        TimeMixin{},
        DetailsMixin{},
    }
}

func (User) Fields() []ent.Field {
    return []ent.Field{
        field.String(&quot;nickname&quot;).
            Unique(),
    }
}

// Pet schema mixed-in the DetailsMixin fields and therefore
// has 3 fields: `age`, `name` and `weight`.
type Pet struct {
    ent.Schema
}

func (Pet) Mixin() []ent.Mixin {
    return []ent.Mixin{
        DetailsMixin{},
    }
}

func (Pet) Fields() []ent.Field {
    return []ent.Field{
        field.Float(&quot;weight&quot;),
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;builtin-mixin&quot;&gt;Builtin Mixin&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;Mixin&lt;/code&gt;æä¾›äº†ä¸€äº›å†…ç½®çš„&lt;code&gt;Mixin&lt;/code&gt;ï¼Œå¯ç”¨äºå°†create_timeå’Œupdate_timeå­—æ®µæ·»åŠ åˆ°schemaä¸­ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ä½¿ç”¨å®ƒä»¬ï¼Œå°† &lt;code&gt;mixin.Time mixin&lt;/code&gt; æ·»åŠ åˆ°schemaï¼Œå¦‚ä¸‹æ‰€ç¤º:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;package schema

import (
    &quot;github.com/facebook/ent&quot;
    &quot;github.com/facebook/ent/schema/mixin&quot;
)

type Pet struct {
    ent.Schema
}

func (Pet) Mixin() []ent.Mixin {
    return []ent.Mixin{
        mixin.Time{},
        // Or, mixin.CreateTime only for create_time
        // and mixin.UpdateTime only for update_time.
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;å»¶ä¼¸é˜…è¯»&quot;&gt;å»¶ä¼¸é˜…è¯»&lt;/h2&gt;
</description>
<pubDate>Thu, 27 Aug 2020 17:50:00 +0000</pubDate>
<dc:creator>syncd</dc:creator>
<og:description>Indexes ç´¢å¼• åœ¨å‰ä¸¤ç¯‡çš„æ–‡ç« ä¸­ï¼Œå…¶å®å¯¹äºç´¢å¼•ä¹Ÿæœ‰ä¸€äº›ä½¿ç”¨ï¼Œ è¿™é‡Œæ¥è¯¦ç»†çœ‹ä¸€ä¸‹å…³äºç´¢å¼•çš„ä½¿ç”¨ Indexesæ–¹æ³•å¯ä»¥åœ¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªå­—æ®µä¸Šè®¾ç½®ç´¢å¼•ï¼Œä»¥æé«˜æ•°æ®æ£€ç´¢çš„é€Ÿåº¦æˆ–è€…å®šä¹‰æ•°æ®çš„å”¯ä¸€æ€§ åœ¨ä¸‹é¢</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/zhaof/p/13575062.html</dc:identifier>
</item>
</channel>
</rss>