<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>åšå®¢å›­_é¦–é¡µ</title>
<link></link>
<description>ä»£ç æ”¹å˜ä¸–ç•Œ</description>
<item>
<title>2021å¹´æŠŠå…¬ä¼—å·åšæˆè‡ªå·±å–œæ¬¢çš„æ ·å­ - dongfanger</title>
<link>http://www.cnblogs.com/df888/p/14219339.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/df888/p/14219339.html</guid>
<description>&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;ç‚¹å‡»æ’­æ”¾éŸ³ä¹ä½“éªŒæ›´ä½³ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;2020å¹´11æœˆ26æ—¥æˆ‘å‘è¡¨äº†ä¸€ç¯‡å…³äºå…¬ä¼—å·è½¬å‹çš„è¯´æ˜æ–‡ç« ï¼š&lt;/p&gt;
&lt;p&gt;å…³äºå…¬ä¼—å·è½¬å‹çš„ä¸¤åƒå­—è¯´æ˜&lt;/p&gt;
&lt;p&gt;ä»é‚£æ—¶ä»¥æ¥ï¼Œå…¬ä¼—å·å†™ä½œå·²ç»æ…¢æ…¢è°ƒæ•´ä¸ºäº†ï¼Œä»¥PythonæŠ€æœ¯æ ˆä¸ºä¸»çš„å‚ç›´åˆ›ä½œæ¨¡å¼ï¼Œä¸“æ³¨äº†è®¸å¤šï¼Œæ¸…çˆ½äº†è®¸å¤šã€‚ç®€ä»‹ï¼Œ&lt;code&gt;Learn Python step by step&lt;/code&gt;ï¼Œä¸€æ­¥ä¸€æ­¥å­¦Pythonï¼ŒåŒ¹é…å…¬ä¼—å·å†…å®¹ï¼šè®°å½•Pythonå­¦ä¹ ç¬”è®°ï¼Œåˆ†äº«Pythonä½¿ç”¨ç»éªŒï¼Œç ”ç©¶PythonæŠ€æœ¯åŸç†ã€‚åå­—ï¼Œ&lt;code&gt;PythonMind&lt;/code&gt;ï¼Œæ ‡è¯†äº†æµ‹è¯•è¡Œä¸šç”Ÿæ€è¾ƒå¥½çš„&lt;code&gt;Python&lt;/code&gt;æŠ€æœ¯æ ˆï¼Œå°±åƒç”¨&lt;code&gt;XMind&lt;/code&gt;å†™æµ‹è¯•ç”¨ä¾‹ï¼Œ&lt;code&gt;PythonMind&lt;/code&gt;ç›®æ ‡æ˜¯å¸®åŠ©æå‡&lt;code&gt;Python&lt;/code&gt;ç¼–ç¨‹æ€ç»´ã€‚å¤´åƒï¼Œæ²¡æœ‰æ”¹ï¼Œæ˜¯ä¸€ç§æƒ…æ€€ï¼Œå‘ä¸Šå»¶ä¼¸å±•å¼€çš„çŠç‘šæä¸«ï¼Œä¹Ÿæ­£å¥½ç¬¦åˆ&lt;code&gt;Mind&lt;/code&gt;æ€ç»´å‘æ•£çš„æ„æ€ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1629545/202101/1629545-20210101075841864-1465362185.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1629545/202101/1629545-20210101075842155-1622665653.png&quot;/&gt;&lt;/center&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;&lt;code&gt;Mind&lt;/code&gt;æ˜¯ä»åœ°é“é‚£å¥â€œPlease be careful and mind your stepâ€æƒ³åˆ°çš„ï¼Œ&lt;code&gt;Mind&lt;/code&gt;è°éŸ³â€œæ…¢çš„â€ï¼Œæ…¢æ…¢å­¦ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è½¬å‹è¯´æ˜æåˆ°çš„ç³»åˆ—æœ‰ä¸¤ä¸ªè°ƒæ•´ã€‚ä¸€æ˜¯å»æ‰äº†â€œç®—æ³•â€ç³»åˆ—ï¼Œæ¯å‘¨æœ«å’Œå°ä¼™ä¼´ä»¬ä¸€èµ·åˆ·é¢˜ï¼Œå®é™…æ•²ä»£ç ï¼Œç›¸äº’äº¤æµï¼Œæå‡æ•ˆæœæ¯”å†™æ–‡ç« æ›´å¥½ã€‚äºŒæ˜¯â€œæµ‹è¯•æˆé•¿å°è¯´â€ç³»åˆ—æœ€è¿‘åœæ›´äº†ï¼Œå› ä¸ºæˆ‘å‡†å¤‡æŠŠå†…å®¹ä»â€œæµ‹è¯•æˆé•¿å°è¯´â€æ‰©å¤§åˆ°â€œæˆé•¿å°è¯´â€ï¼Œæ—¢åŒ…æ‹¬æµ‹è¯•æˆé•¿ï¼Œä¹ŸåŒ…æ‹¬æ‰€è§æ‰€é—»ã€èŒåœºç»éªŒã€ä»·å€¼è§‚ç‚¹ç­‰ã€‚åˆ›ä½œæ–¹å¼ä¸å˜ï¼Œé£æ ¼ä¾æ—§ï¼Œæ¯ç¯‡800å­—å·¦å³ï¼Œæ ¹æ®ä¸ªäººçœŸå®ç»å†æ”¹ç¼–ï¼Œå‚è€ƒå¤é¾™æ­¦ä¾ ï¼Œä»¥å°è¯´å½¢å¼è®²ä¸€ä¸ªæˆé•¿è¯é¢˜ã€‚å¦‚æœæŸå¤©çœ‹åˆ°æˆ‘æ¨äº†ä¸€ç¯‡éæŠ€æœ¯æ–‡ï¼Œæ ‡é¢˜æœ‰ç‚¹åƒåæ§½ï¼Œé‚£ä¹ˆå¤§æ¦‚ç‡æ˜¯è¿™ä¸ªç³»åˆ—äº†ã€‚æ•…äº‹ä¸»çº¿å‚è€ƒä»¥ä¸‹æµ‹è¯•èƒ½åŠ›æ¨¡å‹å±•å¼€ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1629545/202101/1629545-20210101075839674-1815938129.png&quot; alt=&quot;æµ‹è¯•èƒ½åŠ›æ¨¡å‹&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç»è¿‡äº†ä¸€ç•ªæ¸…ç†åï¼Œå…¬ä¼—å·å†…å®¹åˆ†ç±»å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1629545/202101/1629545-20210101084519239-1567782381.png&quot;/&gt;&lt;/center&gt;
&lt;p&gt;åœ¨2020å¹´æœ€åå‡ å¤©ï¼Œæ²¡æƒ³åˆ°tepè¿™ç¯‡æ–‡ç« è¢«ç¤¾åŒºåŠ ç²¾äº†ï¼Œ&lt;code&gt;tep&lt;/code&gt;æµ‹è¯•å·¥å…·è¢«æ›´å¤šäººçŸ¥é“åï¼Œäº¤æµç¢°æ’äº§ç”Ÿå‡ºæ–°æƒ³æ³•ï¼Œæ¯”å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å˜é‡ã€æ¥å£ã€ç”¨ä¾‹3ä¸ªçº§åˆ«å¤ç”¨&lt;/li&gt;
&lt;li&gt;æå–é¢„ç½®&lt;code&gt;fixture&lt;/code&gt;åˆ°&lt;code&gt;tep.fixture&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;conftest.py&lt;/code&gt;è‡ªåŠ¨æ³¨å†Œ&lt;code&gt;fixtures&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;è‡ªåŠ¨ç”Ÿæˆæ¥å£æµ‹è¯•ç”¨ä¾‹&lt;/li&gt;
&lt;li&gt;æ”¯æŒUIè‡ªåŠ¨åŒ–&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æˆ‘ä¼šé€ä¸€å®è·µï¼ŒéªŒè¯ï¼Œåˆ†äº«ï¼Œè°¢è°¢å¤§å®¶æ”¯æŒï¼Œå®¹å¿ä¸ç¨³å®šBugï¼ŒæœŸå¾…æ›´å¤šç«èŠ±ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://testerhome.com/topics/27284&quot; target=&quot;_blank&quot;&gt;tepç”¨æˆ·æ‰‹å†Œå¸®ä½ ä»unittestè¿‡æ¸¡åˆ°pytest&lt;/a&gt;&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1629545/202101/1629545-20210101075842461-1258228145.png&quot;/&gt;&lt;/center&gt;
&lt;p&gt;è¿˜æœ‰æ²¡æƒ³åˆ°çš„æ˜¯ï¼Œæˆ‘ç«Ÿç„¶å¯¹å°é¢è¶Šæ¥è¶ŠæŒ‘äº†ï¼ä¸ºäº†é€‰ä¸ªåˆé€‚çš„å›¾ç‰‡ï¼Œæœ‰æ—¶ä¼šèŠ±åŠä¸ªå°æ—¶ï¼Œé¢„è§ˆä¸ƒå…«å¼ æ‰ç¡®å®šã€‚é™¤äº†è‡ªå·±çœ‹ç€èˆ’æœï¼Œä¹Ÿå¸Œæœ›æœ‰äººç¿»å¼€å…¬ä¼—å·ï¼Œè§‰å¾—â€œè™½ç„¶å†…å®¹ä¸å’‹åœ°ï¼Œå°é¢çœ‹ç€å€’è¿˜ä¸é”™â€ï¼Œé‚£ä¹Ÿæ˜¯æå¥½çš„ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘æ•°äº†ä¸€ä¸‹ä»12æœˆ1å·åˆ°12æœˆ25å·ï¼Œæˆ‘ä¸€å…±æ›´æ–°äº†21ç¯‡æ–‡ç« ï¼Œè¿ç»­æ—¥æ›´åˆ†åˆ«æœ‰5å¤©ã€6å¤©ã€9å¤©ï¼Œç´¯ä¸”å……å®ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1629545/202101/1629545-20210101075842775-659833296.png&quot;/&gt;&lt;/center&gt;
&lt;p&gt;æˆ‘å†™æ–‡ç« ç¬¬ä¸€éå¾ˆå¿«ï¼Œä½†æ˜¯å‘å…¬ä¼—å·çš„è¯ä¼šåå¤ä¿®æ”¹å¾ˆå¤šéï¼Œè°ƒæ•´æ–‡ç« ç»“æ„ã€æªè¾ã€è¯­å¥é€šé¡ºã€é”™åˆ«å­—ã€è¯­æ„Ÿã€æ’ç‰ˆï¼Œå‡ ä¹æ‰€æœ‰æ—¶é—´ã€ç²¾åŠ›ã€èº«ä½“éƒ½è€—åœ¨è¿™ä»¶äº‹ä¸Šã€‚ç»¼åˆè€ƒé‡äº†å·¥ä½œã€å­¦ä¹ ã€ç”Ÿæ´»å¹³è¡¡åï¼Œæˆ‘å†³å®šä»ç„¶ä¿æŒå­¦ä¹ åŠ²å¤´ï¼Œåšå¥½ç¬”è®°ï¼Œä½†æ˜¯æŒ‰å‘¨æ›´çš„èŠ‚å¥æ¥åˆ†äº«ï¼Œæ¯å‘¨äº”å‘1ç¯‡ï¼Œä¸€ä¸ªæœˆ4ã€5ç¯‡çš„æ ·å­ã€‚æ…¢æ…¢æ›´æ–°ï¼Œå¾å¾é“æ¥ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;å›ºå®šå‘¨äº”æ¨é€ï¼Œå¿™çš„è¯å»¶ä¸€å‘¨ï¼ŒåšæŒåŸåˆ›è¾“å‡ºï¼Œåªåšç²¾å“æ–‡ç« ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç›®å‰æˆ‘çš„æ–‡ç« å…¨éƒ¨åŸåˆ›ï¼Œæ¥ä¸‹æ¥ä¹Ÿä¼šåšæŒåŸåˆ›ï¼Œæš‚ä¸è½¬è½½ã€‚2021å¹´çš„é‡å¿ƒæ˜¯å®Œæˆæ•´ä¸ªPythonè¿›é˜¶ç³»åˆ—ã€‚æˆ‘å°†å‚è€ƒã€Šæµç•…çš„Pythonã€‹è¿™æœ¬ä¹¦æ¥å†™ï¼Œå…¨ä¹¦å…±600é¡µï¼Œåˆ†æˆäº†21ä¸ªç« èŠ‚ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1629545/202101/1629545-20210101075840500-377960415.png&quot; alt=&quot;image-20201216205446264&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯æˆ‘ä¸Šæ¬¡é˜…è¯»å†™çš„è¯»ä¹¦ç¬”è®°ï¼Œè®°å½•äº†æ¯ç« çš„çŸ¥è¯†è¦ç‚¹ï¼Œæ‰‹æ‰“äº†ä¸€ä¸‡å¤šå­—ã€‚æˆ‘æƒ³äº†ä¸¤ä¸ªæ–¹æ¡ˆæ¥å®Œæˆè¿™æ¬¡é‡å†™ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;å†…å®¹æ‹†ç»†ï¼ŒæŒ‰æ¯ç¯‡æ–‡ç« 800å­—å·¦å³æ¥å†™ã€‚å¥½å¤„æ˜¯ä¾¿äºå¿«é€Ÿäº†è§£æŸäº›ç‰¹æ€§ï¼Œç¢ç‰‡åŒ–é˜…è¯»ï¼Œç¼ºç‚¹æ˜¯ä¸å¤Ÿç³»ç»Ÿï¼ŒçŸ¥è¯†æ¯”è¾ƒé›¶æ•£ã€‚&lt;/li&gt;
&lt;li&gt;ç³»ç»Ÿç¼–æ’ï¼Œä¸è€ƒè™‘å­—æ•°ï¼Œæ³¨æ„å†…å®¹ç»“æ„ã€‚å¥½å¤„æ˜¯èƒ½å½¢æˆçŸ¥è¯†ä½“ç³»ï¼Œæœ‰æ¡æœ‰ç†ï¼Œç¼ºç‚¹æ˜¯æ°´å¹³æœ‰é™ï¼Œæ€•å†™ä¸å¥½ï¼Œå†™çš„æ…¢ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;å¦‚æœæŒ‰ç¬¬1ä¸ªæ–¹æ¡ˆæ¥å†™ï¼Œæœ€ç»ˆæˆæœå¾ˆå¯èƒ½æ²¡æœ‰äº®ç‚¹ï¼Œæ— æ³•å½¢æˆä¸ªäººç‰¹è‰²ï¼Œå®¹æ˜“çƒ‚å¤§è¡—ã€‚ç»è¿‡æ·±æ€ç†Ÿè™‘åï¼Œæˆ‘é€‰æ‹©äº†ç¬¬2ä¸ªæ–¹æ¡ˆï¼ŒæŠŠè¿™ä»¶äº‹ä½œä¸º2021å¹´çš„æŒ‘æˆ˜ï¼Œå†™æˆä¸€æœ¬ç”µå­ä¹¦ï¼Œä½œä¸ºä¸ªäººä»£è¡¨ä½œã€‚ä¿—è¯è¯´ï¼šâ€œå¤–è¡Œçœ‹çƒ­é—¹ï¼Œå†…è¡Œçœ‹é—¨é“â€ï¼ŒPythonè¿›é˜¶æˆ‘çš„ç›®æ ‡æ˜¯æ„å»ºPythonicçš„ç¼–ç¨‹æ€ç»´ï¼ŒçŸ¥å…¶ç„¶ï¼ŒçŸ¥å…¶æ‰€ä»¥ç„¶ã€‚å› ä¸ºæˆ‘æ˜¯åšæµ‹è¯•çš„ï¼Œæ‰€ä»¥ä¼šé€‰æ‹©ä¸€äº›æµ‹è¯•æ¡†æ¶æˆ–å·¥å…·çš„ä»£ç ç‰‡æ®µï¼Œç†è®ºç»“åˆå®è·µæ¥å†™ã€‚ä¸çŸ¥é“ä¼šé‡åˆ°ä»€ä¹ˆå›°éš¾ï¼Œæœ€åä¼šå†™æˆä»€ä¹ˆæ ·ï¼Œå°½åŠ›è€Œä¸ºå§ã€‚&lt;/p&gt;
&lt;p&gt;å…¬ä¼—å·æ— æ³•ç•™è¨€ï¼Œå¦‚æœæƒ³å’Œæˆ‘ä»¬ä¸€èµ·äº¤æµï¼Œæ¬¢è¿åŠ å…¥ã€Pythonæ™¨å²›äº‘é‡ã€‘ï¼Œå…¬ä¼—å·åå°å›å¤ã€åŠ ç¾¤ã€‘å³å¯ï¼Œä»¥ä¸‹æ˜¯ç¾¤å…¬å‘Šï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1629545/202101/1629545-20210101075843353-676339291.png&quot;/&gt;&lt;/center&gt;
&lt;p&gt;åŸºäºä»¥ä¸‹3ä¸ªåŸå› ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æé«˜PCç«¯é˜…è¯»ä½“éªŒï¼Œå°¤å…¶æ˜¯ä»£ç éƒ¨åˆ†&lt;/li&gt;
&lt;li&gt;æ–¹ä¾¿ç³»ç»Ÿæµè§ˆï¼Œæä¾›å·¦ä¾§å¯¼èˆªæ ‘ç´¢å¼•&lt;/li&gt;
&lt;li&gt;ä¸ºåŒåç”µå­ä¹¦PythonMindåšå‡†å¤‡&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æˆ‘éƒ¨ç½²äº†ä¸€ä¸ªåœ¨çº¿æ–‡æ¡£ç½‘ç«™ï¼Œåå°å›å¤ã€åœ¨çº¿ã€‘å¯è·å–ç½‘å€ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1629545/202101/1629545-20210101075841389-816002459.png&quot; alt=&quot;image-20201228212054743&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æœ€æ–°æ–‡ç« è¿˜æ˜¯è¯·åœ¨å…¬ä¼—å·çœ‹å•¦ï¼Œç½‘ç«™ç›¸å½“äºå½’æ¡£ï¼Œæˆ‘ä¼šä¸å®šæœŸåœ°æ•´ç†æ–‡ç« æ”¾ä¸Šå»ã€‚&lt;/p&gt;
&lt;p&gt;2021å¹´ï¼Œå¸Œæœ›èƒ½ä¿æŒå¿ƒæƒ…å¼€æœ—ï¼Œå½“æ„Ÿåˆ°è‡ªå‘æ—¶å’Œè‡ªå·±çºµå‘æ¯”è¾ƒï¼Œæ‰¾ä¿¡å¿ƒï¼Œå½“æ„Ÿåˆ°è†¨èƒ€æ—¶å’Œåˆ«äººæ¨ªå‘æ¯”è¾ƒï¼Œå¤šå†·é™ï¼Œåçœ‹å››å­£å˜æ¢ï¼Œä¹äº«äº‘æ·¡é£è½»ï¼Œå¿ äºå†™å…¬ä¼—å·å­¦ä¹ åˆ†äº«çš„åˆå¿ƒï¼ŒæŠŠå…¬ä¼—å·åšæˆè‡ªå·±å–œæ¬¢çš„æ ·å­ã€‚&lt;/p&gt;
</description>
<pubDate>Fri, 01 Jan 2021 00:50:00 +0000</pubDate>
<dc:creator>dongfanger</dc:creator>
<og:description>ç‚¹å‡»æ’­æ”¾éŸ³ä¹ä½“éªŒæ›´ä½³ã€‚ 2020å¹´11æœˆ26æ—¥æˆ‘å‘è¡¨äº†ä¸€ç¯‡å…³äºå…¬ä¼—å·è½¬å‹çš„è¯´æ˜æ–‡ç« ï¼š å…³äºå…¬ä¼—å·è½¬å‹çš„ä¸¤åƒå­—è¯´æ˜ ä»é‚£æ—¶ä»¥æ¥ï¼Œå…¬ä¼—å·å†™ä½œå·²ç»æ…¢æ…¢è°ƒæ•´ä¸ºäº†ï¼Œä»¥PythonæŠ€æœ¯æ ˆä¸ºä¸»çš„å‚ç›´åˆ›ä½œæ¨¡å¼ï¼Œä¸“æ³¨äº†</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/df888/p/14219339.html</dc:identifier>
</item>
<item>
<title>ã€Œæ¯æ—¥ä¸€é¢˜ã€ä¸é¢è¯•å®˜æ‰‹æ’•ä»£ç ï¼šå¦‚ä½•ç§‘å­¦é«˜æ•ˆçš„å¯»æ‰¾é‡å¤å…ƒç´ ï¼Ÿ - saucxs</title>
<link>http://www.cnblogs.com/chengxs/p/14219279.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/chengxs/p/14219279.html</guid>
<description>&lt;p&gt;å…³æ³¨å…¬ä¼—å·ã€Œæ¾å®å†™ä»£ç ã€ï¼Œç²¾é€‰å¥½æ–‡ï¼Œæ¯æ—¥ä¸€é¢˜&lt;/p&gt;
&lt;p&gt;åŠ å…¥æˆ‘ä»¬ä¸€èµ·å­¦ä¹ ï¼Œday day up&lt;/p&gt;
&lt;p&gt;ç»è¿‡ä¸‰å¤©æ—¶é—´ï¼Œå·²ç»æœ‰å°ä¼™ä¼´ï¼ˆxpf666ï¼‰ç»™æˆ‘ä»¬è´¡çŒ®æ–‡ç« äº†ï¼Œè¶…çº§å¼€å¿ƒå’Œæ¿€åŠ¨ï¼Œå› ä¸ºæˆ‘ä»¬ä¸æ˜¯ä¸€ä¸ªäººåœ¨æˆ˜æ–—ï¼Œ&lt;br/&gt;ä¸æ˜¯ä¸€ä¸ªäººåœ¨åŠªåŠ›æé«˜è‡ªå·±ï¼ŒåŠ å…¥æˆ‘ä»¬ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¦‚ä½•åŠ å…¥æˆ‘ä»¬ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€æ­¥ï¼šæ–‡ç« ä¸‹é¢ç•™è¨€ï¼Œç•™è¨€å†…å®¹ï¼šæƒ³å†™ä»€ä¹ˆæ–‡ç« ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒæ­¥ï¼šæˆ‘ä»¬å°±ä¼šæ‰¾åˆ°ä½ &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½œè€…ï¼šxpf666&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;æ¥æºï¼šåŸåˆ›&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;ä¸€ã€å‰è¨€&quot;&gt;ä¸€ã€å‰è¨€&lt;/h2&gt;
&lt;p&gt;2020.12.23 æ—¥åˆšç«‹çš„ flagï¼Œæ¯æ—¥ä¸€é¢˜ï¼Œé¢˜ç›®ç±»å‹ä¸é™åˆ¶ï¼Œå¯ä»¥æ˜¯ï¼šç®—æ³•é¢˜ï¼Œé¢è¯•é¢˜ï¼Œé˜è¿°é¢˜ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡æ˜¯ã€Œæ¯æ—¥ä¸€é¢˜ã€ç¬¬ 4 é¢˜ï¼Œç”± xpf666 å¸¦æ¥çš„æ–‡ç« ï¼šå¦‚ä½•ç§‘å­¦é«˜æ•ˆçš„å¯»æ‰¾é‡å¤å…ƒç´ ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/saucxs/full_stack_knowledge_list/master/daily-question/daily_question.png&quot; alt=&quot;æ¯æ—¥ä¸€é¢˜&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¾€æœŸã€Œæ¯æ—¥ä¸€é¢˜ã€ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s/QuuPd2KCp50snN7F2o3oYg&quot; target=&quot;_blank&quot;&gt;https://mp.weixin.qq.com/s/QuuPd2KCp50snN7F2o3oYg&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s/omeVJdtabo5MeN3DItDfWg&quot; target=&quot;_blank&quot;&gt;https://mp.weixin.qq.com/s/omeVJdtabo5MeN3DItDfWg&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s/O8j9gM5tD5rjLz1kdda3LA&quot; target=&quot;_blank&quot;&gt;https://mp.weixin.qq.com/s/O8j9gM5tD5rjLz1kdda3LA&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;äºŒã€å¯»æ‰¾é‡å¤å…ƒç´ &quot;&gt;äºŒã€å¯»æ‰¾é‡å¤å…ƒç´ &lt;/h2&gt;
&lt;h3 id=&quot;1-æ‰¾å‡ºä»»æ„ä¸€ä¸ªé‡å¤æ•°å­—&quot;&gt;1. &lt;strong&gt;æ‰¾å‡ºä»»æ„ä¸€ä¸ªé‡å¤æ•°å­—&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ numsï¼Œåˆ¤æ–­æ˜¯å¦æœ‰é‡å¤å€¼ã€‚&lt;/p&gt;
&lt;p&gt;ç¤ºä¾‹ï¼šè¾“å…¥[1,2,3,2,1,4,5] è¾“å‡º 1 æˆ– 2&lt;/p&gt;
&lt;p&gt;æ€è·¯ï¼šæ ¹æ®ç»éªŒï¼ŒåŸºæœ¬ä¸Šæ‰€æœ‰åˆ¤æ–­é‡å¤çš„éœ€æ±‚ï¼Œéƒ½å¯ä»¥é€šè¿‡ Set æˆ–è€… Map è§£å†³ï¼ŒSet è§£å†³æ–¹å¼å°±æ˜¯åˆ¤æ–­ add æ–¹æ³•çš„è¿”å›æ˜¯ true è¿˜æ˜¯ falseï¼Œfalse å°±è¯æ˜ä¹‹å‰å·²å­˜åœ¨ï¼Œä¹Ÿå°±æ˜¯æ•°æ®é‡å¤ã€‚Map æ˜¯é€šè¿‡ containsKeyï¼Œtrue å°±è¯´æ˜ä¹‹å‰å­˜åœ¨ keyã€‚&lt;/p&gt;
&lt;p&gt;é¢˜è§£ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;public int getResult(int[] nums) {
    Set&amp;lt;Integer&amp;gt; set = new HashSet&amp;lt;Integer&amp;gt;();
    int result = -1;
    for (int num : nums) {
        if (!set.add(num)) {
            result = num;
            break;
        }
    }
    return result;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚æœä¸Šé¢ä»£ç æ ¼å¼å‡ºç°é—®é¢˜ï¼Œå¯ä»¥æŸ¥çœ‹ä¸‹é¢ä»£ç å›¾ç‰‡&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/saucxs/full_stack_knowledge_list/master/daily-question/algorithm/carbon_0.png&quot; alt=&quot;æ‰¾å‡ºä»»æ„ä¸€ä¸ªé‡å¤æ•°å­—&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;éå† n æ¬¡å¹¶ä¸” Set å†…å®¹æœ€å¤šæ˜¯ n ä¸ªå­—ç¬¦ï¼Œå¤æ‚åº¦éƒ½æ˜¯ O(n)&lt;/p&gt;
&lt;h3 id=&quot;2-æ‰¾å‡ºä»»æ„ä¸€ä¸ªé‡å¤æ•°å­—&quot;&gt;2. &lt;strong&gt;æ‰¾å‡ºä»»æ„ä¸€ä¸ªé‡å¤æ•°å­—&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ numsï¼Œåˆ¤æ–­æ˜¯å¦æœ‰é‡å¤å€¼,å¹¶ä¸”ä¸¤ä¸ªé‡å¤å€¼è·ç¦»ä¸è¶…è¿‡ kã€‚&lt;/p&gt;
&lt;p&gt;ç¤ºä¾‹ï¼šè¾“å…¥[1,2,3,2,1,4,5] ï¼Œk = 2 è¾“å‡º true(ä¸¤ä¸ª 2)&lt;/p&gt;
&lt;p&gt;æ€è·¯ï¼šåŒé—®é¢˜ä¸€ï¼Œåªè¦å¤šåˆ¤æ–­ä¸€æ¬¡ Set é•¿åº¦å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;é¢˜è§£ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;public boolean containsNearbyDuplicate(int[] nums, int k) {
    Set&amp;lt;Integer&amp;gt; set = new HashSet&amp;lt;Integer&amp;gt;();
    boolean result = false;
    for (int i = 0; i &amp;lt; nums.length; i++) {
        if (!set.add(nums[i])) {
            result = true;
            break;
        }

        if (set.size() &amp;gt; k) { // è¶…è¿‡é•¿åº¦å°±åˆ é™¤æœ€è¿œçš„ä¸€ä¸ªæ•°
            set.remove(nums[i-k]);
        }
    }
    return result;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚æœä¸Šé¢ä»£ç æ ¼å¼å‡ºç°é—®é¢˜ï¼Œå¯ä»¥æŸ¥çœ‹ä¸‹é¢ä»£ç å›¾ç‰‡&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/saucxs/full_stack_knowledge_list/master/daily-question/algorithm/carbon_1.png&quot; alt=&quot;æ‰¾å‡ºä»»æ„ä¸€ä¸ªé‡å¤æ•°å­—&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;éå† n æ¬¡å¹¶ä¸” k æœ€å¤š n ä¸ªå­—ç¬¦ï¼Œå¤æ‚åº¦éƒ½æ˜¯ O(n)&lt;/p&gt;
&lt;h3 id=&quot;3-å¯»æ‰¾é‡å¤æ•°&quot;&gt;3. &lt;strong&gt;å¯»æ‰¾é‡å¤æ•°&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;ç»™å®šä¸€ä¸ªåŒ…å« n + 1 ä¸ªæ•´æ•°çš„æ•°ç»„ numsï¼Œå…¶æ•°å­—éƒ½åœ¨ 1 åˆ° n ä¹‹é—´ï¼ˆåŒ…æ‹¬ 1 å’Œ&lt;br/&gt;nï¼‰ï¼Œåªæœ‰ä¸€ä¸ªé‡å¤çš„æ•´æ•°ï¼Œæ‰¾å‡ºè¿™ä¸ªé‡å¤çš„æ•°å­—ã€‚&lt;/p&gt;
&lt;p&gt;ç¤ºä¾‹ï¼šè¾“å…¥[1,3,4,2,2] è¾“å‡º 2&lt;/p&gt;
&lt;p&gt;æ€è·¯ï¼šå¯é€šè¿‡é—®é¢˜ 1 æ–¹å¼è§£å†³ã€‚è¿˜å¯ä»¥é€šè¿‡å¿«æ…¢æŒ‡é’ˆæ³•è§£å†³ï¼šå°†æ•°ç»„çœ‹æˆä¸€ä¸ªé“¾è¡¨ï¼Œä¸‹æ ‡ä¸ºå½“å‰æŒ‡é’ˆï¼ˆnodeï¼‰ï¼Œå€¼æŒ‡å‘ä¸‹ä¸€æŒ‡é’ˆ(nextNode)ï¼Œæ•°ç»„å‡ºç°é‡å¤çš„æ•°å­—æ„å‘³ç€æœ‰ä¸¤ä¸ªæŒ‡é’ˆçš„ nextNode ç›¸åŒã€‚ç„¶åé€šè¿‡å¿«æ…¢æŒ‡é’ˆæ³•è§£å†³ã€‚&lt;/p&gt;
&lt;p&gt;é¢˜è§£ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;public int getResult(int[] nums) {
    int result = 0;
    int slow = 0, fast = 0;
    do  {
        slow = nums[slow];
        fast = nums[nums[fast]];
    } while (slow != fast);

    do {
        slow = nums[slow];
        result = nums[result];
    } while (result != slow);
    return result;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚æœä¸Šé¢ä»£ç æ ¼å¼å‡ºç°é—®é¢˜ï¼Œå¯ä»¥æŸ¥çœ‹ä¸‹é¢ä»£ç å›¾ç‰‡&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/saucxs/full_stack_knowledge_list/master/daily-question/algorithm/carbon_2.png&quot; alt=&quot;æ‰¾å‡ºä»»æ„ä¸€ä¸ªé‡å¤æ•°å­—&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;éå† 2n æ¬¡æ—¶é—´å¤æ‚çš„æ˜¯ O(n)ï¼Œåªç”¨äº†å¸¸é‡ä¸ªå­—ç¬¦ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯ O(1)&lt;/p&gt;
&lt;h3 id=&quot;4-åªå‡ºç°ä¸€æ¬¡çš„æ•°&quot;&gt;4. &lt;strong&gt;åªå‡ºç°ä¸€æ¬¡çš„æ•°&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;ç»™å®šä¸€ä¸ªæ•°ç»„&lt;br/&gt;numsï¼Œé™¤äº†æŸä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ä»¥å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ å‡å‡ºç°ä¸¤æ¬¡ã€‚æ‰¾å‡ºé‚£ä¸ªåªå‡ºç°äº†ä¸€æ¬¡çš„å…ƒç´ ã€‚&lt;/p&gt;
&lt;p&gt;ç¤ºä¾‹ï¼šè¾“å…¥[1,1,4,2,2] è¾“å‡º 4&lt;/p&gt;
&lt;p&gt;æ€è·¯ï¼šå¯é€šè¿‡é—®é¢˜ 1 æ–¹å¼è§£å†³ã€‚è¿˜å¯ä»¥é€šè¿‡ä½è¿ç®—è§£å†³ï¼Œä¸¤ä¸ªç›¸åŒæ•°å¼‚æˆ–åä¸º 0ï¼Œæ•°ç»„æ‰€æœ‰å…ƒç´ æ‰§è¡Œä¸€æ¬¡å¼‚æˆ–æ“ä½œï¼Œå‰©ä¸‹å°±æ˜¯å‡ºç°ä¸€æ¬¡çš„æ•°ã€‚&lt;/p&gt;
&lt;p&gt;é¢˜è§£ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;public int getResult(int[] nums) {
    int result = 0;
    for (int num : nums) {
        result = result ^ num;
    }
    return result;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚æœä¸Šé¢ä»£ç æ ¼å¼å‡ºç°é—®é¢˜ï¼Œå¯ä»¥æŸ¥çœ‹ä¸‹é¢ä»£ç å›¾ç‰‡&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/saucxs/full_stack_knowledge_list/master/daily-question/algorithm/carbon_3.png&quot; alt=&quot;æ‰¾å‡ºä»»æ„ä¸€ä¸ªé‡å¤æ•°å­—&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;éå† n æ¬¡æ—¶é—´å¤æ‚çš„æ˜¯ O(n)ï¼Œåªç”¨äº†å¸¸é‡ä¸ªå­—ç¬¦ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯ O(1)&lt;/p&gt;
&lt;h3 id=&quot;5-åªå‡ºç°ä¸€æ¬¡çš„æ•°&quot;&gt;5. &lt;strong&gt;åªå‡ºç°ä¸€æ¬¡çš„æ•°&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;ç»™å®šä¸€ä¸ªæ•°ç»„&lt;br/&gt;numsï¼Œé™¤äº†ä¸¤ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ä»¥å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ å‡å‡ºç°ä¸¤æ¬¡ã€‚æ‰¾å‡ºé‚£ä¸ªåªå‡ºç°äº†ä¸€æ¬¡çš„å…ƒç´ ã€‚&lt;/p&gt;
&lt;p&gt;ç¤ºä¾‹ï¼šè¾“å…¥[1,1,3,4,2,2] è¾“å‡º[3,4]&lt;/p&gt;
&lt;p&gt;æ€è·¯ï¼šå¯é€šè¿‡é—®é¢˜ 1 æ–¹å¼è§£å†³ã€‚è¿˜å¯ä»¥é€šè¿‡ä½è¿ç®—è§£å†³ï¼Œå’Œé¢˜ 4 åŒºåˆ«æ˜¯å­˜åœ¨ 2 ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°ï¼Œæ‰€ä»¥è¦æƒ³åŠæ³•æŠŠè¿™ä¸¤ä¸ªæ•°åŒºåˆ†å‡ºæ¥ã€‚å…ˆå°†æ•°ç»„æ‰€æœ‰å…ƒç´ å¼‚æˆ–ï¼Œå¾—å‡ºçš„å€¼æ˜¯ä¸¤ä¸ªåªå‡ºç°ä¸€æ¬¡å…ƒç´  a,b çš„å¼‚æˆ–å€¼ numsXORï¼ˆå¦‚ 10010ï¼‰ã€‚numsXOR äºŒè¿›åˆ¶ä¸­ 1 çš„ä½å°±æ˜¯ a å’Œ b å·®å¼‚ä½ï¼ˆå› ä¸ºä¸åŒçš„å€¼å¼‚æˆ–æ‰æ˜¯ 1ï¼‰ï¼Œç°åœ¨åªéœ€è¦æ‰¾ lowbit(æœ€å³ä¸€ä½å·®å¼‚å€¼ï¼Œ10)ï¼Œç„¶åé€šè¿‡ lowbit å’Œ a&lt;br/&gt;, b&lt;br/&gt;è¿›è¡Œä¸è¿ç®—ï¼ˆ&amp;amp;ï¼‰ï¼Œå¾—å‡ºçš„å€¼å°±ä¸€å®šä¸åŒï¼Œè¿™æ ·å¯ä»¥åˆ†å‡º a å’Œ bï¼Œæœ€åæŒ‰ç…§å¼‚æˆ–è¿ç®—å°±èƒ½å¾—å‡ºç»“æœï¼ˆå…¶ä»–é‡å¤çš„ä¸ç”¨ç®¡ï¼Œä¸ç®¡åˆ†åˆ°å“ªä¸€ç»„ï¼Œé‡å¤çš„æ•°å¼‚æˆ–éƒ½æ˜¯ 0ï¼‰&lt;/p&gt;
&lt;p&gt;é¢˜è§£ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;public int[] singleNumber(int[] nums) {
    int[] results = new int[]{0,0};
    int numsXOR = 0; // ä¸¤ä¸ªæ•°å¼‚æˆ–å€¼
    for (int num : nums) {
        numsXOR = numsXOR ^ num;
    }

    int lowBit = numsXOR &amp;amp; (-numsXOR); // lowbitå€¼ï¼Œç”¨äºåŒºåˆ†aå’Œb

    for (int num : nums) {
        if ((lowBit &amp;amp; num) == 0) {
            results[0] = results[0] ^ num;
        } else {
            results[1] = results[1] ^ num;
        }
    }

    return results;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚æœä¸Šé¢ä»£ç æ ¼å¼å‡ºç°é—®é¢˜ï¼Œå¯ä»¥æŸ¥çœ‹ä¸‹é¢ä»£ç å›¾ç‰‡&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/saucxs/full_stack_knowledge_list/master/daily-question/algorithm/carbon_4.png&quot; alt=&quot;æ‰¾å‡ºä»»æ„ä¸€ä¸ªé‡å¤æ•°å­—&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;éå† 2n æ¬¡æ—¶é—´å¤æ‚çš„æ˜¯ O(n)ï¼Œåªç”¨äº†å¸¸é‡ä¸ªå­—ç¬¦ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯ O(1)&lt;/p&gt;
&lt;h2 id=&quot;å„ç§ç¦åˆ©&quot;&gt;å„ç§ç¦åˆ©&lt;/h2&gt;
&lt;p&gt;å…³æ³¨ã€Œæ¾å®å†™ä»£ç ã€ï¼Œåå°å›å¤&lt;/p&gt;
&lt;h3 id=&quot;1ã€å­—èŠ‚å†…æ¨ç¦åˆ©&quot;&gt;1ã€å­—èŠ‚å†…æ¨ç¦åˆ©&lt;/h3&gt;
&lt;p&gt;å›å¤ã€Œæ ¡æ‹›ã€è·å–å†…æ¨ç &lt;/p&gt;
&lt;p&gt;å›å¤ã€Œç¤¾æ‹›ã€è·å–å†…æ¨&lt;/p&gt;
&lt;p&gt;å›å¤ã€Œå®ä¹ ç”Ÿã€è·å–å†…æ¨&lt;/p&gt;
&lt;p&gt;åç»­ä¼šæœ‰æ›´å¤šç¦åˆ©&lt;/p&gt;
&lt;h3 id=&quot;2ã€å­¦ä¹ èµ„æ–™ç¦åˆ©&quot;&gt;2ã€å­¦ä¹ èµ„æ–™ç¦åˆ©&lt;/h3&gt;
&lt;p&gt;å›å¤ã€Œç®—æ³•ã€è·å–ç®—æ³•å­¦ä¹ èµ„æ–™&lt;/p&gt;
&lt;h3 id=&quot;3ã€æ¯æ—¥ä¸€é¢˜&quot;&gt;3ã€æ¯æ—¥ä¸€é¢˜&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s/QuuPd2KCp50snN7F2o3oYg&quot; target=&quot;_blank&quot;&gt;https://mp.weixin.qq.com/s/QuuPd2KCp50snN7F2o3oYg&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s/omeVJdtabo5MeN3DItDfWg&quot; target=&quot;_blank&quot;&gt;https://mp.weixin.qq.com/s/omeVJdtabo5MeN3DItDfWg&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s/O8j9gM5tD5rjLz1kdda3LA&quot; target=&quot;_blank&quot;&gt;https://mp.weixin.qq.com/s/O8j9gM5tD5rjLz1kdda3LA&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;è°¢è°¢æ”¯æŒ&quot;&gt;è°¢è°¢æ”¯æŒ&lt;/h2&gt;
&lt;p&gt;1ã€å–œæ¬¢çš„è¯å¯ä»¥ã€Œåˆ†äº«ï¼Œç‚¹èµï¼Œè¯„è®ºã€ä¸‰è¿å“¦ã€‚&lt;/p&gt;
&lt;p&gt;2ã€ä½œè€…æ˜µç§°ï¼šsaucxsï¼ŒsongEagleï¼Œæ¾å®å†™ä»£ç ã€‚å­—èŠ‚è·³åŠ¨çš„ä¸€æšå‰ç«¯å·¥ç¨‹å¸ˆï¼Œä¸€ä¸ªæ­£åœ¨åŠªåŠ›æˆé•¿çš„ä½œè€…ï¼Œæ˜Ÿè¾°å¤§æµ·ï¼Œæœªæ¥å¯æœŸï¼Œ&lt;strong&gt;å†…æ¨å­—èŠ‚è·³åŠ¨å„ä¸ªéƒ¨é—¨å„ä¸ªå²—ä½ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;3ã€é•¿æŒ‰ä¸‹é¢å›¾ç‰‡ï¼Œå…³æ³¨ã€Œæ¾å®å†™ä»£ç ã€ï¼Œæ˜¯è·å–å¼€å‘çŸ¥è¯†ä½“ç³»æ„å»ºï¼Œç²¾é€‰æ–‡ç« ï¼Œé¡¹ç›®å®æˆ˜ï¼Œå®éªŒå®¤ï¼Œæ¯æ—¥ä¸€é“é¢è¯•é¢˜ï¼Œè¿›é˜¶å­¦ä¹ ï¼Œæ€è€ƒèŒä¸šå‘å±•ï¼Œæ¶‰åŠåˆ°JavaScriptï¼ŒNodeï¼ŒVueï¼ŒReactï¼Œæµè§ˆå™¨ï¼Œhttpç­‰é¢†åŸŸï¼Œå¸Œæœ›å¯ä»¥å¸®åŠ©åˆ°ä½ ï¼Œæˆ‘ä»¬ä¸€èµ·æˆé•¿ï½&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/saucxs/full_stack_knowledge_list/master/daily-question/dongtai.gif&quot; alt=&quot;æ¾å®å†™ä»£ç &quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Thu, 31 Dec 2020 18:00:00 +0000</pubDate>
<dc:creator>saucxs</dc:creator>
<og:description>ã€Œæ¯æ—¥ä¸€é¢˜ã€ä¸é¢è¯•å®˜æ‰‹æ’•ä»£ç ï¼šå¦‚ä½•ç§‘å­¦é«˜æ•ˆçš„å¯»æ‰¾é‡å¤å…ƒç´ ï¼Ÿ å…³æ³¨å…¬ä¼—å·ã€Œæ¾å®å†™ä»£ç ã€ï¼Œç²¾é€‰å¥½æ–‡ï¼Œæ¯æ—¥ä¸€é¢˜ åŠ å…¥æˆ‘ä»¬ä¸€èµ·å­¦ä¹ ï¼Œday day up ç»è¿‡ä¸‰å¤©æ—¶é—´ï¼Œå·²ç»æœ‰å°ä¼™ä¼´ï¼ˆxpf666ï¼‰ç»™æˆ‘ä»¬è´¡çŒ®æ–‡</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/chengxs/p/14219279.html</dc:identifier>
</item>
<item>
<title>ç»™2021å¹´çš„æˆ‘ç«‹å‡ ä¸ªFLAG - é˜¡é™Œå¤•æ®‡</title>
<link>http://www.cnblogs.com/mengxudong/p/14219258.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/mengxudong/p/14219258.html</guid>
<description>&lt;p&gt;çœ‹å¤šäº†å¤§ç‰›çš„å¹´ç»ˆæ€»ç»“ï¼Œæˆ‘ä¹Ÿæ‡’å¾—å†™äº†ï¼Œåæ­£å†™å‡ºæ¥ä¹Ÿæ²¡äººçœ‹ã€‚&lt;/p&gt;
&lt;p&gt;å…¶å®ä¸Šé¢éƒ½æ˜¯å€Ÿå£ï¼Œæˆ‘åªæ˜¯å®Œå…¨æ²¡æœ‰å†™å¹´ç»ˆæ€»ç»“çš„ä¹ æƒ¯ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºå•¥å‘¢ï¼Ÿå› ä¸ºè¿™äº›å¹´è¿‡çš„å¹³å¹³æ— å¥‡ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«å‡ºå½©çš„äº‹æƒ…ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæœ‰ï¼Œå—¯ï¼Œ2020å¹´ï¼Œæˆ‘ç»“å©šäº†ï¼Œå¨¶äº†ä¸€ä½æ¼‚äº®çš„è€å©†ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯åœ¨å„ä½å¤§ç‰›çš„é«˜å…‰ä¹‹ä¸‹ï¼Œè¿™ä»¿ä½›åªæ˜¯ä¸€ä¸ªå°å°çš„æˆå°±ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åï¼Œå…¬å¸é‡Œï¼Œæˆ‘è¿˜æ˜¯ç»§ç»­åœ¨æ‘¸é±¼ï¼ŒæŒç»­çš„æ‘¸é±¼ã€‚&lt;/p&gt;
&lt;p&gt;æ¯å¤©æ²‰æµ¸åœ¨ä¸šåŠ¡çš„æµ·æ´‹ä¸­ï¼ŒæŠ€æœ¯å·²ç»æ”¾ä¸‹å¾ˆä¹…äº†ã€‚&lt;/p&gt;
&lt;p&gt;ç­‰åˆ°æƒ³é‡æ–°æ‹¿èµ·æ¥çš„æ—¶å€™ï¼Œæ‰å‘ç°è‡ªå·±çš„æŠ€æœ¯åšå®¢å·²ç»å‡ å¹´æ²¡æœ‰æ›´æ–°äº†ã€‚&lt;/p&gt;
&lt;p&gt;å—¯ï¼Œæˆ‘å†³å®šåšä¸€ç‚¹ç‚¹æ”¹å˜ï¼Œåªæ”¹å˜ä¸€ç‚¹ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯æˆ‘çš„åˆå¿ƒï¼Œä¹Ÿæ˜¯æˆ‘æƒ³è¿½æ±‚çš„ç›®æ ‡ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶æˆ‘æ€»æ˜¯åœ¨æ‘¸é±¼ï¼Œä½†æˆ‘è¿˜æ˜¯ä¸ç”˜å¿ƒåªå½“ä¸€æ¡å’¸é±¼ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œæˆ‘å†³å®šç»™è‡ªå·±å‡ ä¸ª flagï¼Œè‡³å°‘èƒ½è®©2021å¹´çš„æˆ‘å‡çº§æˆç¨å¾®ä¸é‚£ä¹ˆå’¸çš„é±¼ã€‚&lt;/p&gt;
&lt;p&gt;å¹¶ä¸”ï¼Œæˆ‘çš„ flag å¿…é¡»æ˜¯ä¸€ä¸ªå¯é‡åŒ–çš„ç›®æ ‡ï¼Œä¸ç„¶åšæ²¡åšåˆ°è¿˜ä¸æ˜¯æˆ‘è¯´äº†ç®—ï¼Ÿ&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;å†™100ç¯‡æŠ€æœ¯åšå®¢ï¼Œç§¯ç´¯å­¦åˆ°çš„ä¸œè¥¿ï¼Œå†™å‡ºæ¥æ‰æ˜¯è‡ªå·±çš„ã€‚&lt;/li&gt;
&lt;li&gt;æ¯æœˆçœ‹ä¸€æœ¬ä¹¦ï¼Œå†…å®¹ä¸é™ï¼Œæ‰©å¤§è‡ªå·±çš„è§†é‡ã€‚&lt;/li&gt;
&lt;li&gt;æ¯å‘¨è¿åŠ¨3-4æ¬¡ï¼Œä¿æŒä¸€ä¸ªå¥åº·çš„èº«ä½“ï¼Œèº«ä½“æ˜¯é©å‘½çš„æœ¬é’±&lt;/li&gt;
&lt;li&gt;å·¥èµ„è¾¾åˆ°20kï¼Œè™½ç„¶å¯¹äºå¤§ç¥ä»¬æ¥è¯´å¾ˆç®€å•ğŸ˜„&lt;/li&gt;
&lt;li&gt;æ¯å‘¨ç»™è€å©†ç«¯è‡³å°‘ä¸‰ç›†æ´—è„šæ°´ï¼Œè¿™ä¸ªå¥½åƒæˆ‘å·²ç»åšåˆ°äº†ï¼Œå€¼å¾—åº†è´º&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;å…ˆæƒ³åˆ°çš„å°±è¿™ä¹ˆå¤šï¼Œflagä¹Ÿä¸èƒ½ç«‹å¤ªå¤šï¼Œå®¹æ˜“å‘è‡ªå·±ã€‚è‡³äºèƒ½ä¸èƒ½åšåˆ°ï¼Œè¯·å„ä½åšå‹ç›‘ç£æˆ‘ã€‚å¦‚æœæ²¡åšåˆ°ï¼Œ&lt;strong&gt;å¹´åº•å–è€å©†æ´—è„šæ°´&lt;/strong&gt;ã€‚&lt;/p&gt;
</description>
<pubDate>Thu, 31 Dec 2020 17:03:00 +0000</pubDate>
<dc:creator>é˜¡é™Œå¤•æ®‡</dc:creator>
<og:description>çœ‹å¤šäº†å¤§ç‰›çš„å¹´ç»ˆæ€»ç»“ï¼Œæˆ‘ä¹Ÿæ‡’å¾—å†™äº†ï¼Œåæ­£å†™å‡ºæ¥ä¹Ÿæ²¡äººçœ‹ã€‚ å…¶å®ä¸Šé¢éƒ½æ˜¯å€Ÿå£ï¼Œæˆ‘åªæ˜¯å®Œå…¨æ²¡æœ‰å†™å¹´ç»ˆæ€»ç»“çš„ä¹ æƒ¯ã€‚ ä¸ºå•¥å‘¢ï¼Ÿå› ä¸ºè¿™äº›å¹´è¿‡çš„å¹³å¹³æ— å¥‡ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«å‡ºå½©çš„äº‹æƒ…ã€‚ å¦‚æœæœ‰ï¼Œå—¯ï¼Œ2020å¹´ï¼Œæˆ‘ç»“å©š</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/mengxudong/p/14219258.html</dc:identifier>
</item>
<item>
<title>KafkaProducer ç®€æ - buttercup</title>
<link>http://www.cnblogs.com/buttercup/p/14201153.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/buttercup/p/14201153.html</guid>
<description>&lt;p&gt;KafkaProducer å‘é€æ¶ˆæ¯ä¸»è¦æœ‰ä»¥ä¸‹ 3 ç§æ–¹å¼ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;    Properties properties = new Properties();
    properties.setProperty(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);
    properties.setProperty(&quot;key.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);
    properties.setProperty(&quot;value.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);

    KafkaProducer&amp;lt;String, String&amp;gt; producer = new KafkaProducer&amp;lt;&amp;gt;(properties);
    ProducerRecord&amp;lt;String, String&amp;gt; record = new ProducerRecord&amp;lt;&amp;gt;(&quot;topic&quot;, &quot;key&quot;, &quot;value&quot;);
    
    // å‘é€å¹¶å¿˜è®°ï¼ˆfire-and-forgetï¼‰
    producer.send(record);

    // åŒæ­¥å‘é€
    Future&amp;lt;RecordMetadata&amp;gt; future = producer.send(record);
    RecordMetadata metadata = future.get();

    // å¼‚æ­¥å‘é€
    producer.send(record, new Callback() {
        @Override
        public void onCompletion(RecordMetadata metadata, Exception exception) {
            
        }
    });

    producer.close();
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…·ä½“çš„å‘é€æµç¨‹å¯ä»¥å‚è€ƒ &lt;strong&gt;&lt;a href=&quot;https://www.cnblogs.com/buttercup/p/14130406.html#producer-%E5%8F%91%E9%80%81%E9%93%BE%E8%B7%AF&quot; target=&quot;_blank&quot;&gt;KafkaProducerå‘é€æµç¨‹ç®€æ&lt;/a&gt;&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;KafkaProducer æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥å…±äº«åŒä¸€ä¸ª KafkaProducer å¯¹è±¡ã€‚&lt;/p&gt;

&lt;h4 id=&quot;clientid&quot;&gt;&lt;strong&gt;client.id&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ã€€è¯¥å‚æ•°å¯ä»¥æ˜¯ä»»æ„çš„å­—ç¬¦ä¸²ï¼Œbroker ä¼šç”¨å®ƒæ¥è¯†åˆ«æ¶ˆæ¯çš„æ¥æºï¼Œä¼šåœ¨æ—¥å¿—å’Œç›‘æ§æŒ‡æ ‡é‡Œå±•ç¤ºã€‚&lt;/p&gt;
&lt;h4 id=&quot;bootstrapservers&quot;&gt;&lt;strong&gt;bootstrap.servers&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ã€€è¯¥å±æ€§æŒ‡å®š broker çš„åœ°å€åˆ—è¡¨ã€‚&lt;br/&gt;ã€€æ¸…å•é‡Œä¸éœ€è¦åŒ…å«æ‰€æœ‰çš„ broker åœ°å€ï¼Œç”Ÿäº§è€…ä¼šä»ç»™å®šçš„ broker é‡ŒæŸ¥æ‰¾åˆ°å…¶ä»– broker çš„ä¿¡æ¯ã€‚&lt;br/&gt;ã€€ä¸è¿‡å»ºè®®è‡³å°‘è¦æä¾›ä¸¤ä¸ª broker çš„ä¿¡æ¯ï¼Œä¸€æ—¦å…¶ä¸­ä¸€ä¸ªå®•æœºï¼Œç”Ÿäº§è€…ä»ç„¶èƒ½å¤Ÿè¿æ¥åˆ°é›†ç¾¤ä¸Šã€‚&lt;/p&gt;
&lt;h4 id=&quot;keyserializer--valueserializer&quot;&gt;&lt;strong&gt;key.serializer &amp;amp; value.serializer&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ã€€è¿™ä¸¤ä¸ªå±æ€§å¿…é¡»è¢«è®¾ç½®ä¸ºä¸€ä¸ªå®ç°äº†&lt;code&gt;org.apache.kafka.common.serialization.Serializer&lt;/code&gt;æ¥å£çš„ç±»ã€‚&lt;br/&gt;ã€€ç”Ÿäº§è€…ä¼šä½¿ç”¨è¿™ä¸ªç±»æŠŠé”®å€¼å¯¹è±¡åºåˆ—åŒ–æˆå­—èŠ‚æ•°ç»„ã€‚&lt;/p&gt;
&lt;h4 id=&quot;receivebufferbytes--sendbufferbytes&quot;&gt;&lt;strong&gt;receive.buffer.bytes &amp;amp; send.buffer.bytes&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ã€€è®¾ç½® socket è¯»å†™æ•°æ®æ—¶ç”¨åˆ°çš„ TCP ç¼“å†²åŒºå¤§å°ã€‚å¦‚æœå®ƒä»¬è¢«è®¾ä¸º -1ï¼Œå°±ä½¿ç”¨æ“ä½œç³»ç»Ÿçš„é»˜è®¤å€¼ã€‚&lt;br/&gt;ã€€å½“ç”Ÿäº§è€…æˆ–æ¶ˆè´¹è€…ä¸ broker å¤„äºä¸åŒçš„æœºæˆ¿æ—¶ï¼Œå¯ä»¥é€‚å½“&lt;a href=&quot;https://www.cnblogs.com/buttercup/p/13812221.html#%E9%95%BF%E8%82%A5%E7%AE%A1%E9%81%93-lfn&quot; target=&quot;_blank&quot;&gt;å¢å¤§è¿™äº›å€¼&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&quot;buffermemory&quot;&gt;&lt;strong&gt;buffer.memory&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ã€€è®¾ç½®ç”Ÿäº§è€…å†…å­˜ç¼“å†²åŒºçš„å¤§å°ï¼Œç”Ÿäº§è€…ç”¨å®ƒç¼“å†²è¦å‘é€åˆ°æœåŠ¡å™¨çš„æ¶ˆæ¯ã€‚&lt;br/&gt;ã€€å¦‚æœåº”ç”¨ç¨‹åºå‘é€æ¶ˆæ¯çš„é€Ÿåº¦è¶…è¿‡å‘é€åˆ°æœåŠ¡å™¨çš„é€Ÿåº¦ï¼Œä¼šå¯¼è‡´ç”Ÿäº§è€…ç©ºé—´ä¸è¶³ã€‚&lt;br/&gt;ã€€æ­¤æ—¶&lt;code&gt;KafkaProducer.send()&lt;/code&gt;ä¼šé˜»å¡ç­‰å¾…å†…å­˜é‡Šæ”¾ï¼Œç­‰å¾…æ—¶é—´è¶…è¿‡ max.block.ms åä¼šæŠ›å‡ºè¶…æ—¶å¼‚å¸¸ã€‚&lt;/p&gt;
&lt;h4 id=&quot;compressiontype&quot;&gt;&lt;strong&gt;compression.type&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ã€€è¯¥å‚æ•°æŒ‡å®šäº†æ¶ˆæ¯è¢«å‘é€ç»™ broker ä¹‹å‰ï¼Œä½¿ç”¨å“ªä¸€ç§å‹ç¼©ç®—æ³•ï¼ˆ&lt;code&gt;snappy&lt;/code&gt;ï¼Œ&lt;code&gt;gzip&lt;/code&gt;æˆ–&lt;code&gt;lz4&lt;/code&gt;ï¼‰è¿›è¡Œå‹ç¼©ã€‚&lt;br/&gt;ã€€ä½¿ç”¨å‹ç¼©å¯ä»¥é™ä½ç½‘ç»œä¼ è¾“å¼€é”€å’Œå­˜å‚¨å¼€é”€ï¼Œè€Œè¿™å¾€å¾€æ˜¯å‘ Kafka å‘é€æ¶ˆæ¯çš„ç“¶é¢ˆæ‰€åœ¨ã€‚&lt;/p&gt;
&lt;h4 id=&quot;batchsize&quot;&gt;&lt;strong&gt;batch.size&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ã€€è¯¥å‚æ•°æŒ‡å®šäº†ä¸€ä¸ªæ‰¹æ¬¡å¯ä»¥ä½¿ç”¨çš„å†…å­˜å­—èŠ‚æ•°ï¼ˆè€Œä¸æ˜¯æ¶ˆæ¯ä¸ªæ•°ï¼‰ã€‚&lt;br/&gt;ã€€æ¶ˆæ¯æ‰¹æ¬¡&lt;code&gt;ProducerBatch&lt;/code&gt;åŒ…å«äº†ä¸€ç»„å°†è¦å‘é€è‡³åŒä¸ªåˆ†åŒºçš„æ¶ˆæ¯ï¼Œå½“æ‰¹æ¬¡è¢«å¡«æ»¡ï¼Œæ‰¹æ¬¡é‡Œçš„æ‰€æœ‰æ¶ˆæ¯ä¼šè¢«ç«‹å³å‘é€å‡ºå»ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ä¸è¿‡ç”Ÿäº§è€…å¹¶ä¸ä¸€å®šéƒ½ä¼šç­‰åˆ°æ‰¹æ¬¡è¢«å¡«æ»¡æ‰å‘é€ï¼ŒåŠæ»¡ç”šè‡³åªåŒ…å«ä¸€ä¸ªæ¶ˆæ¯çš„æ‰¹æ¬¡ä¹Ÿå¯èƒ½è¢«å‘é€ã€‚&lt;br/&gt;ã€€æ‰€ä»¥å°±ç®—æŠŠæ‰¹æ¬¡å¤§å°è®¾ç½®å¾—å¾ˆå¤§ï¼Œä¹Ÿä¸ä¼šé€ æˆå»¶è¿Ÿï¼Œåªæ˜¯ä¼šå ç”¨æ›´å¤šçš„å†…å­˜è€Œå·²ã€‚&lt;br/&gt;ã€€ä½†å¦‚æœè®¾ç½®å¾—å¤ªå°ï¼Œç”Ÿäº§è€…ä¼šé¢‘ç¹åœ°å‘é€æ¶ˆæ¯ï¼Œä¼šå¢åŠ ä¸€äº›é¢å¤–çš„ç½‘ç»œå¼€é”€ã€‚&lt;/p&gt;
&lt;h4 id=&quot;lingerms&quot;&gt;&lt;strong&gt;linger.ms&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ã€€è¯¥å‚æ•°æŒ‡å®šäº†ç”Ÿäº§è€…åœ¨å‘é€æ‰¹æ¬¡ä¹‹å‰ç­‰å¾…çš„æ—¶é—´ã€‚&lt;br/&gt;ã€€ç”Ÿäº§è€…ä¼šåœ¨æ‰¹æ¬¡å¡«æ»¡æˆ–ç­‰å¾…æ—¶é—´è¾¾åˆ° linger.ms æ—¶æŠŠæ‰¹æ¬¡å‘é€å‡ºå»ã€‚&lt;br/&gt;ã€€è®¾ç½®&lt;code&gt;linger.ms&amp;gt;0&lt;/code&gt;ä¼šå¢åŠ å»¶è¿Ÿï¼Œä½†ä¹Ÿä¼šæå‡ååé‡ï¼ˆä¸€æ¬¡æ€§å‘é€æ›´å¤šçš„æ¶ˆæ¯ï¼Œæ¯ä¸ªæ¶ˆæ¯çš„å¼€é”€å°±å˜å°äº†ï¼‰ã€‚&lt;/p&gt;
&lt;h4 id=&quot;acks&quot;&gt;&lt;strong&gt;acks&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ã€€å‚æ•°æŒ‡å®šäº†å¿…é¡»è¦æœ‰å¤šå°‘ä¸ªåˆ†åŒºå‰¯æœ¬æ”¶åˆ°æ¶ˆæ¯ï¼Œç”Ÿäº§è€…æ‰ä¼šè®¤ä¸ºæ¶ˆæ¯å†™å…¥æ˜¯æˆåŠŸçš„ã€‚&lt;br/&gt;ã€€è¿™ä¸ªå‚æ•°å†³å®šä»¤æ¶ˆæ¯ä¸¢å¤±çš„å¯èƒ½æ€§ï¼š&lt;/p&gt;
&lt;ul readability=&quot;5.5&quot;&gt;&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;&lt;code&gt;acks=0&lt;/code&gt; &lt;strong&gt;ç”Ÿäº§è€…å‘å‡ºæ¶ˆæ¯åä¸ç­‰å¾…æ¥è‡ªæœåŠ¡å™¨çš„å“åº”&lt;/strong&gt;&lt;br/&gt;å¦‚æœå½“ä¸­å‡ºç°äº†é—®é¢˜ï¼Œå¯¼è‡´æœåŠ¡å™¨æ²¡æœ‰æ”¶åˆ°æ¶ˆæ¯ï¼Œé‚£ä¹ˆç”Ÿäº§è€…å°±æ— ä»å¾—çŸ¥ï¼Œæ¶ˆæ¯ä¹Ÿå°±ä¸¢å¤±äº†ã€‚&lt;br/&gt;ä¸è¿‡ï¼Œå› ä¸ºç”Ÿäº§è€…ä¸éœ€è¦ç­‰å¾…æœåŠ¡å™¨çš„å“åº”ï¼Œæ‰€ä»¥å®ƒå¯ä»¥ä»¥ç½‘ç»œèƒ½å¤Ÿæ”¯æŒçš„æœ€å¤§é€Ÿåº¦å‘é€æ¶ˆæ¯ï¼Œä»è€Œè¾¾åˆ°å¾ˆé«˜çš„ååé‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;4&quot;&gt;
&lt;p&gt;&lt;code&gt;acks=1&lt;/code&gt; &lt;strong&gt;åªè¦é›†ç¾¤çš„ leader èŠ‚ç‚¹æ”¶åˆ°æ¶ˆæ¯ï¼Œç”Ÿäº§è€…å°±ä¼šæ”¶åˆ°ä¸€ä¸ªæ¥è‡ªæœåŠ¡å™¨çš„æˆåŠŸå“åº”&lt;/strong&gt;&lt;br/&gt;å¦‚æœæ¶ˆæ¯æ— æ³•åˆ°è¾¾ leader èŠ‚ç‚¹ï¼ˆæ¯”å¦‚ï¼šleaderèŠ‚ç‚¹å´©æºƒï¼Œæ–°çš„ leader è¿˜æ²¡æœ‰è¢«é€‰ä¸¾å‡ºæ¥ï¼‰ï¼Œç”Ÿäº§è€…ä¼šæ”¶åˆ°ä¸€ä¸ªé”™è¯¯å“åº”ã€‚&lt;br/&gt;ä¸ºäº†é¿å…æ•°æ®ä¸¢å¤±ï¼Œç”Ÿäº§è€…ä¼šé‡å‘æ¶ˆæ¯ã€‚ä¸è¿‡ï¼Œå¦‚æœä¸€ä¸ªæ²¡æœ‰æ”¶åˆ°æ¶ˆæ¯çš„èŠ‚ç‚¹æˆä¸ºæ–° leaderï¼Œæ¶ˆæ¯è¿˜æ˜¯ä¼šä¸¢å¤±ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªæ—¶å€™çš„ååé‡å–å†³äºä½¿ç”¨çš„æ˜¯åŒæ­¥å‘é€è¿˜æ˜¯å¼‚æ­¥å‘é€ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å‘é€ç«¯é˜»å¡ç­‰å¾…æœåŠ¡å™¨çš„å“åº”ï¼ˆé€šè¿‡è°ƒç”¨ &lt;code&gt;Future.get()&lt;/code&gt; æ–¹æ³•ï¼‰ï¼Œæ˜¾ç„¶ä¼šå¢åŠ å»¶è¿Ÿï¼ˆåœ¨ç½‘ç»œä¸Šä¼ è¾“ä¸€ä¸ªæ¥å›çš„å»¶è¿Ÿï¼‰&lt;/li&gt;
&lt;li&gt;å‘é€ç«¯ä½¿ç”¨å›è°ƒå¯ä»¥ç¼“è§£å»¶è¿Ÿé—®é¢˜ï¼Œä¸è¿‡ååé‡ä»å—åœ¨é€”æ¶ˆæ¯æ•°é‡çš„é™åˆ¶ï¼ˆæ¯”å¦‚ï¼šç”Ÿäº§è€…åœ¨æ”¶åˆ°æœåŠ¡å™¨å“åº”ä¹‹å‰å¯ä»¥å‘é€å¤šå°‘ä¸ªæ¶ˆæ¯ï¼‰&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;&lt;code&gt;acks=all&lt;/code&gt; &lt;strong&gt;åªæœ‰å½“æ‰€æœ‰å‚ä¸å¤åˆ¶çš„èŠ‚ç‚¹å…¨éƒ¨æ”¶åˆ°æ¶ˆæ¯æ—¶ï¼Œç”Ÿäº§è€…æ‰ä¼šæ”¶åˆ°ä¸€ä¸ªæ¥è‡ªæœåŠ¡å™¨çš„æˆåŠŸå“åº”&lt;/strong&gt;&lt;br/&gt;è¿™ç§æ¨¡å¼æ˜¯æœ€å®‰å…¨çš„ï¼Œå°±ç®—æœ‰æœåŠ¡å™¨å‘ç”Ÿå´©æºƒï¼Œæ•°æ®ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚&lt;br/&gt;ä¸è¿‡ï¼Œå®ƒçš„å»¶è¿Ÿæ¯” &lt;code&gt;acks=1&lt;/code&gt; æ—¶æ›´é«˜ï¼Œå› ä¸ºæˆ‘ä»¬è¦ç­‰å¾…ä¸åªä¸€ä¸ªæœåŠ¡å™¨èŠ‚ç‚¹æ¥æ”¶æ¶ˆæ¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;h4 id=&quot;retries&quot;&gt;&lt;strong&gt;retries&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ã€€è¯¥å‚æ•°å†³å®šäº†ç”Ÿäº§è€…å¯ä»¥é‡å‘æ¶ˆæ¯çš„æ¬¡æ•°ï¼ˆæ¯æ¬¡é‡è¯•ä¹‹é—´ç­‰å¾… &lt;code&gt;retry.backoff.ms&lt;/code&gt;ï¼‰ã€‚&lt;br/&gt;ã€€æœåŠ¡å™¨è¿”å›ä¸´æ—¶æ€§çš„é”™è¯¯ï¼ˆæ¯”å¦‚ï¼šåˆ†åŒºæ‰¾ä¸åˆ° leaderï¼‰æ—¶ï¼Œç”Ÿäº§è€…ä¼šè‡ªåŠ¨é‡è¯•ï¼Œæ²¡å¿…è¦åœ¨ä»£ç é€»è¾‘é‡Œå¤„ç†å¯é‡è¯•çš„é”™è¯¯ã€‚&lt;br/&gt;ã€€ä½œä¸ºå¼€å‘è€…ï¼Œåªéœ€è¦å¤„ç†é‚£äº›ä¸å¯é‡è¯•çš„é”™è¯¯ï¼ˆæ¯”å¦‚ï¼šæ¶ˆæ¯å­—èŠ‚æ•°è¶…è¿‡å•ä¸ªå‘é€æ‰¹æ¬¡ä¸Šé™ï¼‰æˆ–é‡è¯•æ¬¡æ•°è¶…å‡ºä¸Šé™çš„æƒ…å†µå³å¯ã€‚&lt;/p&gt;
&lt;h4 id=&quot;maxinflightrequestsperconnection&quot;&gt;&lt;strong&gt;max.in.flight.requests.per.connection&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ã€€è¯¥å‚æ•°æŒ‡å®šç”Ÿäº§è€…ï¼Œæœ€å¤šå¯ä»¥å‘é€æœªå“åº”åœ¨é€”æ¶ˆæ¯æ‰¹æ¬¡æ•°é‡ã€‚&lt;br/&gt;ã€€åœ¨é€”æ¶ˆæ¯æ‰¹æ¬¡è¶Šå¤šï¼Œä¼šå ç”¨æ›´å¤šçš„å†…å­˜ï¼Œä¸è¿‡ä¹Ÿä¼šæå‡ååé‡ã€‚&lt;/p&gt;
&lt;p&gt;ã€€å½“&lt;code&gt;retries &amp;gt; 0&lt;/code&gt;ä¸”&lt;code&gt;max.in.flight.requests.per.connection &amp;gt; 1&lt;/code&gt;æ—¶ï¼Œå¯èƒ½å‡ºç°æ¶ˆæ¯ä¹±åºã€‚&lt;br/&gt;ã€€å¦‚æœç¬¬ä¸€ä¸ªæ‰¹æ¬¡æ¶ˆæ¯å†™å…¥å¤±è´¥ï¼Œè€Œç¬¬äºŒä¸ªæ‰¹æ¬¡å†™å…¥æˆåŠŸï¼Œbroker ä¼šé‡è¯•å†™å…¥ç¬¬ä¸€ä¸ªæ‰¹æ¬¡ã€‚&lt;br/&gt;ã€€å¦‚æœæ­¤æ—¶ç¬¬ä¸€ä¸ªæ‰¹æ¬¡ä¹Ÿå†™å…¥æˆåŠŸï¼Œé‚£ä¹ˆä¸¤ä¸ªæ‰¹æ¬¡çš„é¡ºåºå°±åè¿‡æ¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ä¸€èˆ¬ä¸å»ºè®®è®¾ç½®&lt;code&gt;retries=0&lt;/code&gt;ï¼Œè€Œæ˜¯ä»¤&lt;code&gt;max.in.flight.requests.per.connection = 1&lt;/code&gt;æ¥ä¿è¯æ¶ˆæ¯é¡ºåºã€‚&lt;br/&gt;ã€€åœ¨ç”Ÿäº§è€…å°è¯•å‘é€ç¬¬ä¸€æ‰¹æ¶ˆæ¯æ—¶ï¼Œå°±ä¸ä¼šæœ‰å…¶ä»–çš„æ¶ˆæ¯å‘é€ç»™ brokerï¼Œå³ä½¿å‘ç”Ÿé‡è¯•æ¶ˆæ¯ä¹Ÿä¸ä¼šä¹±åºã€‚&lt;br/&gt;ã€€ä¸è¿‡è¿™æ ·ä¼šä¸¥é‡å½±å“ç”Ÿäº§è€…çš„ååé‡ï¼Œæ‰€ä»¥åªæœ‰åœ¨å¯¹æ¶ˆæ¯çš„é¡ºåºæœ‰ä¸¥æ ¼è¦æ±‚çš„æƒ…å†µä¸‹æ‰èƒ½è¿™ä¹ˆåšã€‚&lt;/p&gt;

&lt;h2 id=&quot;å¹‚ç­‰&quot;&gt;å¹‚ç­‰&lt;/h2&gt;
&lt;p&gt;å½“ broker å¤±æ•ˆæ—¶ç”Ÿäº§è€…å¯èƒ½ä¼šè‡ªåŠ¨é‡è¯•ï¼Œå¯¼è‡´ä¸€æ¡æ¶ˆæ¯è¢«é‡å¤å†™å…¥å¤šæ¬¡ã€‚&lt;br/&gt;ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼ŒKafka åœ¨ç”Ÿäº§è€…ç«¯æä¾›æ¥å¹‚ç­‰ä¿è¯ï¼š&lt;strong&gt;åŒä¸€æ¡æ¶ˆæ¯è¢«ç”Ÿäº§è€…å‘é€å¤šæ¬¡ï¼Œä½†åœ¨ brokerç«¯è¿™æ¡æ¶ˆæ¯åªä¼šè¢«å†™å…¥æ—¥å¿—ä¸€æ¬¡&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å‘é€ç«¯è®¾ç½® &lt;code&gt;enable.idempotence = true&lt;/code&gt; å¯ä»¥å¼€å¯å¹‚ç­‰æ€§ï¼Œæ­¤æ—¶é…ç½®åŒæ—¶æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;max.in.flight.requests.per.connection â‰¤ 5&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;retries &amp;gt; 0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;acks = all&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å…¶å·¥ä½œæœºåˆ¶å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;producer åœ¨åˆå§‹åŒ–æ—¶å¿…é¡»åˆ†é…ä¸€ä¸ª &lt;strong&gt;PID&lt;/strong&gt;&lt;code&gt;producer id&lt;/code&gt;è¯¥è¿‡ç¨‹å¯¹ç”¨æˆ·æ¥è¯´æ˜¯å®Œå…¨é€æ˜çš„ï¼‰&lt;/li&gt;
&lt;li&gt;å‘é€åˆ° broker ç«¯çš„æ¯æ‰¹æ¶ˆæ¯éƒ½ä¼šè¢«èµ‹äºˆä¸€ä¸ªå•è°ƒé€’å¢çš„ &lt;strong&gt;SN&lt;/strong&gt;&lt;code&gt;sequence number&lt;/code&gt;ç”¨äºæ¶ˆæ¯å»é‡ï¼ˆæ¯ä¸ªåˆ†åŒºéƒ½æœ‰ç‹¬ç«‹çš„åºåˆ—å·ï¼‰&lt;/li&gt;
&lt;li&gt;æ¥æ”¶åˆ°æ¶ˆæ¯çš„ broker ä¼šå°†æ‰¹æ¬¡çš„&lt;code&gt;(PID, SN)&lt;/code&gt;ä¿¡æ¯ä¸€åŒæŒä¹…åŒ–åˆ°å¯¹åº”çš„åˆ†åŒºæ—¥å¿—ä¸­ï¼ˆä¿è¯ leader åˆ‡æ¢åå»é‡ä»ç„¶ç”Ÿæ•ˆï¼‰&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;è‹¥é‡è¯•å¯¼è‡´ broker æ¥æ”¶åˆ°å°äºæˆ–ç­‰äºå·²çŸ¥æœ€å¤§åºåˆ—å·çš„æ¶ˆæ¯ï¼Œbroker ä¼šæ‹’ç»å†™å…¥è¿™äº›æ¶ˆæ¯ï¼Œä»è€Œä¿è¯æ¯æ¡æ¶ˆæ¯ä¹Ÿåªä¼šè¢«ä¿å­˜åœ¨æ—¥å¿—ä¸­ä¸€æ¬¡ã€‚&lt;br/&gt;ç”±äºæ¯ä¸ª producer å®ä¾‹éƒ½ä¼šè¢«åˆ†é…ä¸åŒçš„ PIDï¼Œè¯¥æœºåˆ¶åªèƒ½ä¿è¯å•ä¸ª producer å®ä¾‹çš„å¹‚ç­‰æ€§ï¼Œæ— æ³•å®ç°ååŒå¤šä¸ª producer å®ç°å¹‚ç­‰ã€‚&lt;/p&gt;
&lt;h2 id=&quot;äº‹åŠ¡&quot;&gt;äº‹åŠ¡&lt;/h2&gt;
&lt;p&gt;Kafka äº‹åŠ¡å¯ä»¥å®ç° producer å¯¹å¤šä¸ªä¸»é¢˜å’Œåˆ†åŒºçš„åŸå­å†™å…¥ï¼Œå¹¶ä¸”ä¿è¯ consumer ä¸ä¼šè¯»å–åˆ°æœªæäº¤çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;Kafka è¦æ±‚åº”ç”¨ç¨‹åºå¿…é¡»æä¾›ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„ &lt;strong&gt;TID&lt;/strong&gt;&lt;code&gt;transactional id&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class=&quot;paper&quot; readability=&quot;11&quot;&gt;åˆå§‹åŒ–æ—¶ï¼Œproducer é¦–å…ˆè¦å‘ broker é›†ç¾¤æ³¨å†Œå…¶ TIDï¼Œbroker ä¼šæ ¹æ®ç»™å®šçš„ TID æ£€æŸ¥æ˜¯å¦å­˜åœ¨æœªå®Œæˆçš„äº‹åŠ¡ã€‚
&lt;p&gt;å¦‚æœæŸä¸ª producer å®ä¾‹å¤±æ•ˆï¼Œè¯¥æœºåˆ¶èƒ½å¤Ÿä¿è¯ä¸‹ä¸€ä¸ªæ‹¥æœ‰ç›¸åŒ TID çš„å®ä¾‹é¦–å…ˆå®Œæˆä¹‹å‰æœªå®Œæˆçš„äº‹åŠ¡ã€‚&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;æ­¤å¤–ï¼Œbroker è¿˜ä¼šä¸ºè‡ªåŠ¨æ¯ä¸ª producer åˆ†é…ä¸€ä¸ª&lt;code&gt;epoch&lt;/code&gt;ç”¨äºéš”ç¦»&lt;code&gt;fencing out&lt;/code&gt;å¤±æ•ˆä½†ä»å­˜æ´»çš„ producerï¼š&lt;/p&gt;
&lt;div class=&quot;paper&quot; readability=&quot;11&quot;&gt;å½“ producer å‚ä¸äº‹åŠ¡æ—¶ï¼Œbroker ä¼šæ£€æŸ¥æ˜¯å¦å­˜åœ¨ç›¸åŒçš„ TID ä¸” epoch æ›´å¤§çš„æ´»è·ƒ producerã€‚
&lt;p&gt;å¦‚æœå­˜åœ¨ï¼Œåˆ™è®¤ä¸ºå½“å‰ producer æ˜¯ä¸€ä¸ªåƒµå°¸å®ä¾‹&lt;code&gt;zombie instance&lt;/code&gt;å¹¶æ‹’ç»ä¸ºå…¶æä¾›æœåŠ¡ï¼Œé˜²æ­¢å…¶ç ´åäº‹åŠ¡çš„å®Œæ•´æ€§ã€‚&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä¸¤ä¸ªå¸¸è§çš„åº”ç”¨åœºæ™¯ï¼š&lt;/p&gt;
&lt;h3 id=&quot;å®ç°è·¨ä¸»é¢˜åŸå­å†™å…¥&quot;&gt;å®ç°è·¨ä¸»é¢˜åŸå­å†™å…¥&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;    Properties properties = new Properties();
    properties.setProperty(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);
    properties.setProperty(&quot;key.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);
    properties.setProperty(&quot;value.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);
    properties.setProperty(&quot;enable.idempotence&quot;, &quot;true&quot;); // å¼€å¯å¹‚ç­‰
    properties.setProperty(&quot;transactional.id&quot;, &quot;my-transaction-id&quot;); // è®¾ç½®äº‹åŠ¡ID

    KafkaProducer&amp;lt;String, String&amp;gt; producer = new KafkaProducer&amp;lt;&amp;gt;(properties);

    ProducerRecord&amp;lt;String, String&amp;gt; record1 = new ProducerRecord&amp;lt;&amp;gt;(&quot;topic1&quot;, &quot;key1&quot;, &quot;value1&quot;);
    ProducerRecord&amp;lt;String, String&amp;gt; record2 = new ProducerRecord&amp;lt;&amp;gt;(&quot;topic2&quot;, &quot;key2&quot;, &quot;value2&quot;);
    ProducerRecord&amp;lt;String, String&amp;gt; record3 = new ProducerRecord&amp;lt;&amp;gt;(&quot;topic3&quot;, &quot;key3&quot;, &quot;value3&quot;);

    producer.initTransactions(); // åˆå§‹åŒ–äº‹åŠ¡ï¼ˆåªéœ€æ‰§è¡Œä¸€æ¬¡ï¼‰
    try {
        producer.beginTransaction(); // å¼€å§‹äº‹åŠ¡

        // å‘å¤šä¸ªä¸åŒçš„ topic å†™å…¥æ¶ˆæ¯
        producer.send(record1);
        producer.send(record2);
        producer.send(record3);

        producer.commitTransaction(); // æäº¤äº‹åŠ¡
    } catch (ProducerFencedException e) {
        producer.close(); // äº‹åŠ¡ID å·²è¢«å ç”¨
    } catch (KafkaException e) {
        producer.abortTransaction();
    }
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;å®ç°-read-process-write-æ¨¡å¼&quot;&gt;å®ç° read-process-write æ¨¡å¼&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;    final String groupID = &quot;my-group-id&quot;;

    Properties producerProps = new Properties();
    producerProps.setProperty(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);
    producerProps.setProperty(&quot;key.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);
    producerProps.setProperty(&quot;value.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);
    producerProps.setProperty(&quot;enable.idempotence&quot;, &quot;true&quot;); // å¼€å¯å¹‚ç­‰
    producerProps.setProperty(&quot;transactional.id&quot;, &quot;my-transaction-id&quot;); // è®¾ç½®äº‹åŠ¡ID

    Properties consumerProps = new Properties();
    consumerProps.setProperty(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);
    consumerProps.setProperty(&quot;key.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);
    consumerProps.setProperty(&quot;value.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);
    consumerProps.setProperty(&quot;isolation.level&quot;,&quot;read_committed&quot;); // è®¾ç½®éš”ç¦»çº§åˆ«
    consumerProps.setProperty(&quot;group.id&quot;, groupID); // è®¾ç½®æ¶ˆè´¹è€…ç»„ç¾¤ID

    KafkaProducer&amp;lt;String, String&amp;gt; producer = new KafkaProducer&amp;lt;&amp;gt;(producerProps);
    KafkaConsumer&amp;lt;String, String&amp;gt; consumer = new KafkaConsumer&amp;lt;&amp;gt;(consumerProps);

    producer.initTransactions();
    consumer.subscribe(Collections.singletonList(&quot;ping&quot;));

    while (true) {
        
        ConsumerRecords&amp;lt;String, String&amp;gt; records = consumer.poll(Long.MAX_VALUE); // è¯»å–æ¶ˆæ¯
        
        try {
            producer.beginTransaction(); // å¼€å¯äº‹åŠ¡

            // å¤„ç†æ¶ˆæ¯ï¼ˆå¯ä»¥æ˜¯ä»»æ„ä¸šåŠ¡åœºæ™¯ï¼‰
            Map&amp;lt;TopicPartition, OffsetAndMetadata&amp;gt; offsets = new HashMap&amp;lt;&amp;gt;();
            for(ConsumerRecord&amp;lt;String, String&amp;gt; record : records){
                offsets.put(new TopicPartition(record.topic(), record.partition()), new OffsetAndMetadata(record.offset())); // è®°å½•æ¶ˆè´¹åç§»é‡
                producer.send(new ProducerRecord&amp;lt;&amp;gt;(&quot;pong&quot;, record.value())); // å‘é€æ¶ˆæ¯
            }

            producer.sendOffsetsToTransaction(offsets, groupID); // æäº¤æ¶ˆè´¹åç§»é‡
            producer.commitTransaction(); // äº‹åŠ¡æäº¤
        } catch (ProducerFencedException e) {
            producer.close(); // äº‹åŠ¡ID å·²è¢«å ç”¨
        } catch (Exception e){
            producer.abortTransaction(); // å›æ»šäº‹åŠ¡
        }
    }
&lt;/code&gt;
&lt;/pre&gt;
&lt;br/&gt;&lt;h3 id=&quot;å‚è€ƒèµ„æ–™&quot;&gt;å‚è€ƒèµ„æ–™&lt;/h3&gt;
</description>
<pubDate>Thu, 31 Dec 2020 16:24:00 +0000</pubDate>
<dc:creator>buttercup</dc:creator>
<og:description>ä½¿ç”¨æ–¹å¼ KafkaProducer å‘é€æ¶ˆæ¯ä¸»è¦æœ‰ä»¥ä¸‹ 3 ç§æ–¹å¼ï¼š Properties properties = new Properties(); properties.setProperty</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/buttercup/p/14201153.html</dc:identifier>
</item>
<item>
<title>å®¹å™¨ç¼–æ’ç³»ç»ŸK8sä¹‹è®¿é—®æ§åˆ¶--RBACæˆæƒ - Linux-1874</title>
<link>http://www.cnblogs.com/qiuhom-1874/p/14216634.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/qiuhom-1874/p/14216634.html</guid>
<description>&lt;p&gt;ã€€ã€€å‰æ–‡æˆ‘ä»¬äº†è§£äº†k8sä¸Šçš„è®¿é—®æ§åˆ¶æœºåˆ¶ï¼Œä¸»è¦å¯¹è®¿é—®æ§åˆ¶ä¸­çš„ç¬¬ä¸€å…³ç”¨æˆ·è®¤è¯åšäº†ç›¸å…³è¯´æ˜ä»¥åŠå¸¸è§„ç”¨æˆ·çš„é…ç½®æ–‡ä»¶çš„åˆ¶ä½œï¼Œå›é¡¾è¯·å‚è€ƒï¼š&lt;a href=&quot;https://www.cnblogs.com/qiuhom-1874/p/14207381.html&quot; target=&quot;_blank&quot;&gt;https://www.cnblogs.com/qiuhom-1874/p/14207381.html&lt;/a&gt;ï¼›ä»Šå¤©æˆ‘ä»¬æ¥äº†è§£ä¸‹k8sä¸Šçš„è®¿é—®æ§åˆ¶ç¬¬äºŒå…³RBACæˆæƒç›¸å…³è¯é¢˜ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€åœ¨k8sä¸Šæˆæƒçš„æœºåˆ¶æœ‰å¾ˆå¤šï¼Œæœ€å¸¸ç”¨çš„æœ‰ABACå’ŒRBACï¼›ABACï¼ˆattribute based access controlï¼‰è¿™ç§æ˜¯åŸºäºå±æ€§åšè®¿é—®æ§åˆ¶ï¼›RBACï¼ˆrole based access controlï¼‰è¿™ç§æ˜¯åŸºäºè§’è‰²åšè®¿é—®æ§åˆ¶ï¼›æ‰€è°“åŸºäºå±æ€§åšè®¿é—®æ§åˆ¶æ˜¯æŒ‡ï¼Œå¯¹k8sä¸Šçš„èµ„æºçš„æŸç§å±æ€§åšæˆæƒï¼Œæˆæƒç»™ç›¸å…³ç”¨æˆ·å¯¹è¯¥èµ„æºçš„æŸä¸ªå±æ€§æœ‰ä»€ä¹ˆæƒé™ï¼›åŒæ ·çš„é€»è¾‘åŸºäºè§’è‰²åšè®¿é—®æ§åˆ¶å°±æ˜¯æŒ‡æŠŠk8sä¸Šçš„èµ„æºï¼Œæˆæƒç»™å¯¹åº”è§’è‰²æœ‰ä»€ä¹ˆæƒé™ï¼›é‚£è§’è‰²å’Œç”¨æˆ·æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿå¯¹äºRBACæˆæƒæ¨¡å‹æ¥è¯´ï¼Œåœ¨k8sä¸Šç”¨æˆ·æ˜¯æ²¡æ³•ç›´æ¥å…³è”èµ„æºï¼›å®ƒæ˜¯é€šè¿‡è§’è‰²å¯¹è±¡æ¥å®ç°å¯¹èµ„æºçš„æˆæƒï¼›ç”¨æˆ·æˆæƒæ˜¯é€šè¿‡è§’è‰²ç»‘å®šå¯¹è±¡æ¥å…³è”åˆ°å¯¹åº”è§’è‰²ï¼›åªè¦ç”¨æˆ·ç»‘å®šåˆ°å¯¹åº”è§’è‰²ï¼Œé‚£ä¹ˆè¯¥ç”¨æˆ·å°±æ‹¥æœ‰ç»‘å®šè§’è‰²ä¸Šçš„æ‰€æœ‰æƒé™ï¼›æ¯”å¦‚ï¼Œåœ¨k8sä¸Šæœ‰ä¸€ä¸ªè§’è‰²åä¸ºpod-readerï¼Œè¿™ä¸ªè§’è‰²èƒ½å¤Ÿå¯¹defaultåç§°ç©ºé—´ä¸‹çš„podèµ„æºæœ‰åªè¯»æƒé™ï¼›å¯¹å…¶ä»–åç§°ç©ºé—´ä»»ä½•èµ„æºæ²¡æœ‰ä»»ä½•æƒé™ï¼›å¦‚æœä¸€ä¸ªç”¨æˆ·ç»‘å®šåˆ°è¯¥è§’è‰²ä¸Šï¼Œå¯¹åº”ç”¨æˆ·å°±æœ‰å¯¹defaultåç§°ç©ºé—´ä¸‹çš„podèµ„æºæ‹¥æœ‰åªè¯»æƒé™ï¼Œå¯¹å…¶ä»–åç§°ç©ºé—´ä»»ä½•èµ„æºæ²¡æœ‰ä»»ä½•æƒé™ï¼›å¯¹äºk8sä¸Šçš„èµ„æºæ¥è¯´ï¼Œèµ„æºæœ‰ä¸¤ä¸ªçº§åˆ«ï¼Œä¸€ä¸ªæ˜¯åç§°ç©ºé—´çº§åˆ«çš„èµ„æºï¼Œä¸€ä¸ªæ˜¯é›†ç¾¤çº§åˆ«çš„èµ„æºï¼›æ¯”å¦‚podï¼Œsvcï¼Œpvcç­‰ç­‰è¿™äº›èµ„æºéƒ½æ˜¯åç§°ç©ºé—´çº§åˆ«èµ„æºï¼Œå®ƒä»¬çš„å­˜åœ¨å¿…é¡»æ˜¯åœ¨æŸä¸ªåç§°ç©ºé—´ä¸‹ï¼›å¯¹äºç±»ä¼¼åƒpvï¼Œnodeï¼Œnsè¿™äº›èµ„æºå°±æ˜¯é›†ç¾¤çº§åˆ«èµ„æºï¼Œå®ƒä»¬çš„å­˜åœ¨ä¸ä¾èµ–ä»»ä½•åç§°ç©ºé—´ï¼›è¿™æ ·ä¸€æ¥å¯¹äºè§’è‰²è€Œè¨€å°±æœ‰åç§°ç©ºé—´çº§åˆ«çš„è§’è‰²ï¼Œä¹Ÿæœ‰é›†ç¾¤çº§åˆ«è§’è‰²ï¼›åç§°ç©ºé—´çº§åˆ«çš„è§’è‰²å°±æ˜¯ç”¨æ¥å®šä¹‰ç‰¹å®šåç§°ç©ºé—´ä¸‹çš„èµ„æºæƒé™ï¼Œé›†ç¾¤çº§åˆ«è§’è‰²å°±æ˜¯ç”¨æ¥å®šä¹‰æ•´ä¸ªé›†ç¾¤ä¸Šçš„èµ„æºæƒé™ï¼›åœ¨k8sä¸Šè¿™ä¸¤ç§è§’è‰²åˆ†åˆ«å«roleå’Œclusterroleï¼›roleå’Œclusterroleéƒ½æ˜¯k8sä¸Šçš„èµ„æºï¼Œæˆ‘ä»¬è¦ç»™æŸä¸ªç”¨æˆ·æˆæƒï¼Œé¦–å…ˆæŠŠå¯¹åº”è§’è‰²èµ„æºå®ä¾‹åŒ–ä¸ºä¸€ä¸ªè§’è‰²å¯¹è±¡ï¼Œç„¶åæŠŠç”¨æˆ·å’Œè§’è‰²å¯¹è±¡ç»‘å®šèµ·æ¥å³å¯ï¼›ç”¨æˆ·æ€ä¹ˆç»‘å®šåˆ°è§’è‰²ä¸Šå‘¢ï¼Ÿåœ¨k8sä¸Šç»‘å®šè¿™ä¸ªæ“ä½œä¹Ÿæ˜¯é€šè¿‡èµ„æºå¯¹è±¡å®ç°çš„ï¼›ç»‘å®šä¹Ÿæœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯rolebindingï¼Œä¸€ç§æ˜¯clusterrolebindingï¼›rolebindingæ˜¯åç§°ç©ºé—´çº§åˆ«èµ„æºï¼Œå®ƒä¸»è¦ç”¨æ¥æŠŠå¯¹åº”ç”¨æˆ·å’Œå¯¹åº”åç§°ç©ºé—´ä¸Šçš„è§’è‰²ï¼ˆroleï¼‰åšç»‘å®šï¼›å¯¹åº”ç”¨æˆ·å°±èƒ½æ‹¥æœ‰å¯¹åº”è§’è‰²åœ¨å¯¹åº”åç§°ç©ºé—´ä¸‹å¯¹åº”èµ„æºçš„æƒé™ï¼›clusterrolebindingä¸»è¦ç”¨æ¥æŠŠç”¨æˆ·ç»‘å®šåˆ°é›†ç¾¤çº§åˆ«è§’è‰²ï¼ˆclusterroleï¼‰ä¸Šï¼Œå¯¹åº”ç”¨æˆ·å°±èƒ½æ‹¥æœ‰å¯¹æ•´ä¸ªé›†ç¾¤ä¸Šçš„å¯¹åº”è§’è‰²æ‹¥æœ‰çš„å¯¹åº”èµ„æºçš„æƒé™ï¼›ç®€å•è®²è§’è‰²(role/clusterrole)å°±æ˜¯ç”¨æ¥å®šä¹‰èµ„æºçš„æƒé™ï¼Œrolebindingå’Œclusterrolebindingæ˜¯ç”¨æ¥å…³è”ç”¨æˆ·å’Œè§’è‰²çš„å…³ç³»ï¼›å¦‚ä¸‹å›¾æ‰€ç¤ºï¼›&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1503305/202012/1503305-20201231184927478-1677316515.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šè¿™é‡Œéœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œclusterroleæ˜¯åŒ…å«åç§°ç©ºé—´çº§åˆ«çš„roleï¼›ä¹Ÿå°±æ˜¯è¯´clusterroleæ—¢å¯ä»¥ç”¨clusterrolebindingæ¥ç»‘å®šï¼Œä¹Ÿå¯ä»¥ç”¨rolebindingæ¥ç»‘å®šï¼Œå¦‚æœrolebindingç»‘å®šçš„æ˜¯ä¸€ä¸ªé›†ç¾¤çº§åˆ«çš„è§’è‰²ï¼ˆclusterroleï¼‰é‚£ä¹ˆå¯¹åº”ç»‘å®šè‡³clusterroleçš„ç”¨æˆ·çš„æƒé™å°±ä¼šç¼©å°åˆ°å¯¹åº”åç§°ç©ºé—´ä¸‹ï¼Œè€Œéæ•´ä¸ªé›†ç¾¤ï¼ŒåŸå› æ˜¯rolebindingæ˜¯åç§°ç©ºé—´çº§åˆ«èµ„æºï¼›&lt;/p&gt;
&lt;p&gt;Â ã€€ã€€æŸ¥çœ‹apiserverå¯ç”¨æˆæƒæ’ä»¶&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1503305/202012/1503305-20201231190823112-2051955047.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šapiserveré…ç½®å¯ç”¨RBACæ’ä»¶éœ€è¦ç”¨--authorization-modeé€‰é¡¹æ¥æŒ‡å®šå¯¹åº”å¯ç”¨çš„æˆæƒæ’ä»¶ï¼Œåœ¨k8s1.6ä»¥åçš„ç‰ˆæœ¬ï¼Œé»˜è®¤apiserverä¼šå¯ç”¨Nodeå’ŒRBACæˆæƒæ’ä»¶ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€åˆ›å»ºè§’è‰²&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä½¿ç”¨é™ˆè¿°æ—¶å‘½ä»¤createï¼Œåˆ›å»ºè§’è‰²çš„è¯­æ³•æ ¼å¼&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
Usage:
  kubectl create role NAME --verb=verb --resource=resource.group/subresource
[--resource-name=resourcename] [--dry-run=server|client|none] [options]
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šä»¥ä¸Šcreate roleè¡¨ç¤ºåˆ›å»ºçš„æ˜¯åç§°ç©ºé—´çº§åˆ«çš„è§’è‰²ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šå…¶åç§°ç©ºé—´è¡¨ç¤ºé»˜è®¤åç§°ç©ºé—´ï¼›--verbæ˜¯ç”¨æ¥æŒ‡å®šå¯¹åº”çš„æƒé™ï¼Œæ¯”å¦‚getï¼Œlistï¼Œwatchç­‰ç­‰ï¼›--resourceä½¿ç”¨æ¥æŒ‡å®šèµ„æºèµ„æºç±»å‹ï¼Œæ¯”å¦‚podsï¼Œservicesï¼Œdaemonsetsï¼Œreplicasetsç­‰ç­‰ï¼›--resource-nameç”¨æ¥æŒ‡å®šå¯¹åº”å…·ä½“çš„èµ„æºçš„åç§°ï¼›å¦‚æœè¦æŒ‡å®šåç§°ç©ºé—´ä½¿ç”¨-né€‰é¡¹æŒ‡å®šå³å¯ï¼›é»˜è®¤ä¸æŒ‡å®šè¡¨ç¤ºdefaultåç§°ç©ºé—´ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€ç¤ºä¾‹ï¼šä½¿ç”¨é™ˆè¿°æ—¶å‘½ä»¤åˆ›å»ºåä¸ºpod-readerçš„è§’è‰²ï¼Œè¯¥è§’è‰²æ‹¥æœ‰å¯¹defaultåç§°ç©ºé—´ä¸‹çš„podèµ„æºæœ‰listï¼Œgetå’Œwatchæƒé™ï¼›&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# kubectl create role pod-reader --verb=list --verb=get --verb=watch --resource=pods 
role.rbac.authorization.k8s.io/pod-reader created
[root@master01 ~]# kubectl get role
NAME         CREATED AT
pod-reader   2020-12-31T11:27:39Z
[root@master01 ~]# kubectl describe role pod-reader
Name:         pod-reader
Labels:       &amp;lt;none&amp;gt;
Annotations:  &amp;lt;none&amp;gt;
PolicyRule:
  Resources  Non-Resource URLs  Resource Names  Verbs
  ---------  -----------------  --------------  -----
  pods       []                 []              [list get watch]
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šå¯ä»¥çœ‹åˆ°pod-readerè§’è‰²å¯¹podsèµ„æºæœ‰list,getï¼Œwatchæƒé™ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä½¿ç”¨é™ˆè¿°å¼å‘½ä»¤åˆ›å»ºclusterrole&lt;/p&gt;
&lt;p&gt;ã€€ã€€å‘½ä»¤ä½¿ç”¨è¯­æ³•æ ¼å¼&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
Usage:
  kubectl create clusterrole NAME --verb=verb --resource=resource.group
[--resource-name=resourcename] [--dry-run=server|client|none] [options]
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šä½¿ç”¨è¯­æ³•å’Œåˆ›å»ºåç§°ç©ºé—´çº§åˆ«çš„è§’è‰²ä¸€æ ·ï¼Œä¸åŒçš„æ˜¯æŒ‡å®šåˆ›å»ºçš„æ˜¯clusterroleï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€ç¤ºä¾‹ï¼šåˆ›å»ºä¸€ä¸ªåä¸ºcluster-pods-readerè§’è‰²ï¼Œæ‹¥æœ‰å¯¹é›†ç¾¤æ‰€æœ‰åç§°ç©ºé—´ä¸‹çš„podså’Œserversèµ„æºæœ‰getï¼Œlistï¼Œwatchæƒé™ï¼›&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# kubectl create clusterrole cluster-pods-reader --verb=get --verb=list --verb=watch --resource=pods --resource=services
clusterrole.rbac.authorization.k8s.io/cluster-pods-reader created
[root@master01 ~]# kubectl get clusterrole cluster-pods-reader
NAME                  CREATED AT
cluster-pods-reader   2020-12-31T11:35:03Z
[root@master01 ~]# kubectl describe clusterrole cluster-pods-reader
Name:         cluster-pods-reader
Labels:       &amp;lt;none&amp;gt;
Annotations:  &amp;lt;none&amp;gt;
PolicyRule:
  Resources  Non-Resource URLs  Resource Names  Verbs
  ---------  -----------------  --------------  -----
  pods       []                 []              [get list watch]
  services   []                 []              [get list watch]
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šå¯ä»¥çœ‹åˆ°cluster-pods-readerè§’è‰²æœ‰å¯¹podsèµ„æºå’Œservicesèµ„æºæœ‰get,list,watchæƒé™ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€åˆ›å»ºrolebinding&lt;/p&gt;
&lt;p&gt;ã€€ã€€å‘½ä»¤è¯­æ³•æ ¼å¼&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
Usage:
  kubectl create rolebinding NAME --clusterrole=NAME|--role=NAME [--user=username]
[--group=groupname] [--serviceaccount=namespace:serviceaccountname] [--dry-run=server|client|none]
[options]
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šåˆ›å»ºrolebindingéœ€è¦æŒ‡å®šå¯¹åº”çš„åç§°ï¼ŒæŒ‡å®šclusterroleæˆ–è€…roleè§’è‰²çš„åç§°ï¼ŒæŒ‡å®šå¯¹åº”çš„ç”¨æˆ·åç§°ï¼Œæˆ–è€…å¯¹åº”çš„ç»„åï¼›å¦‚æœå¯¹åº”ç”¨æˆ·æ˜¯saè´¦å·ï¼Œéœ€è¦ç”¨--serviceaccounté€‰é¡¹æ¥æŒ‡å®šå¯¹åº”saçš„åç§°ï¼›saçš„åç§°ç”±åç§°ç©ºé—´ï¼šsaåç§°ï¼›å¦‚æœè¦æŒ‡å®šåç§°ç©ºé—´ä½¿ç”¨-né€‰é¡¹æŒ‡å®šå³å¯ï¼›é»˜è®¤ä¸æŒ‡å®šè¡¨ç¤ºdefaultåç§°ç©ºé—´ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€ç¤ºä¾‹ï¼šåˆ›å»ºåä¸ºtom-pods-readerçš„rolebindingï¼Œå…¶ä¸­æŒ‡å®šå¯¹åº”tomç”¨æˆ·ç»‘å®šè‡³pod-readerè§’è‰²&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# kubectl create rolebinding  tom-pods-reader --role=pod-reader --user=tom 
rolebinding.rbac.authorization.k8s.io/tom-pods-reader created
[root@master01 ~]# kubectl get rolebinding
NAME              ROLE              AGE
tom-pods-reader   Role/pod-reader   5s
[root@master01 ~]# kubectl describe rolebinding tom-pods-reader
Name:         tom-pods-reader
Labels:       &amp;lt;none&amp;gt;
Annotations:  &amp;lt;none&amp;gt;
Role:
  Kind:  Role
  Name:  pod-reader
Subjects:
  Kind  Name  Namespace
  ----  ----  ---------
  User  tom   
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼›è¿™é‡Œæ²¡æœ‰æ˜¾ç¤ºåç§°ç©ºé—´æ˜¯é‚£ä¸ªåç§°ç©ºé—´ï¼›é»˜è®¤æ²¡æœ‰æ˜¾ç¤ºå°±æ˜¯defaultåç§°ç©ºé—´ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€éªŒè¯ï¼šä½¿ç”¨tomç”¨æˆ·çš„é…ç½®æ–‡ä»¶ï¼Œçœ‹çœ‹æ˜¯å¦å¯ä»¥åˆ—å‡ºdefaultåç§°ç©ºé—´ä¸‹çš„podåˆ—è¡¨å‘¢ï¼Ÿ&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# kubectl config view --kubeconfig=/tmp/myk8s.config
apiVersion: v1
clusters:
- cluster:
    certificate-authority-data: DATA+OMITTED
    server: https://192.168.0.41:6443
  name: myk8s
contexts:
- context:
    cluster: myk8s
    user: tom
  name: tom@myk8s
current-context: tom@myk8s
kind: Config
preferences: {}
users:
- name: tom
  user:
    client-certificate-data: REDACTED
    client-key-data: REDACTED
    username: tom
[root@master01 ~]# kubectl get pod --kubeconfig=/tmp/myk8s.config    
NAME             READY   STATUS    RESTARTS   AGE
nginx-pod-demo   1/1     Running   1          44h
web-0            1/1     Running   2          2d21h
web-1            1/1     Running   2          2d21h
web-2            1/1     Running   2          2d21h
web-3            1/1     Running   3          2d21h
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šå¯ä»¥çœ‹åˆ°ä½¿ç”¨tomç”¨æˆ·çš„é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨kubectlå·¥å…·åŠ è½½å¯¹åº”é…ç½®æ–‡ä»¶ï¼Œåœ¨defaultåç§°ç©ºé—´ä¸‹æ˜¯å¯ä»¥æ­£å¸¸åˆ—å‡ºpodåˆ—è¡¨ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€éªŒè¯ï¼šä½¿ç”¨tomç”¨æˆ·çš„é…ç½®æ–‡ä»¶çœ‹çœ‹æ˜¯å¦åˆ—å‡ºkube-systemåç§°ç©ºé—´ä¸‹çš„podåˆ—è¡¨å‘¢ï¼Ÿ&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;34&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# kubectl get pod -n kube-system --kubeconfig=/tmp/myk8s.config 
Error from server (Forbidden): pods is forbidden: User &quot;tom&quot; cannot list resource &quot;pods&quot; in API group &quot;&quot; in the namespace &quot;kube-system&quot;
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šå¯ä»¥çœ‹åˆ°å¯¹åº”tomç”¨æˆ·æ˜¯æ²¡æœ‰æƒé™åˆ—å‡ºkube-systemåç§°ç©ºé—´ä¸‹çš„podèµ„æºï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€åˆ›å»ºclusterrolebinding&lt;/p&gt;
&lt;p&gt;ã€€ã€€å‘½ä»¤ä½¿ç”¨è¯­æ³•æ ¼å¼&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
Usage:
  kubectl create clusterrolebinding NAME --clusterrole=NAME [--user=username] [--group=groupname]
[--serviceaccount=namespace:serviceaccountname] [--dry-run=server|client|none] [options]
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šä½¿ç”¨æ–¹å¼å’Œåˆ›å»ºrolebindingä¸€æ ·ï¼Œä¸åŒçš„æ˜¯clusterrolebindingä¸èƒ½å…³è”roleè§’è‰²ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€ç¤ºä¾‹ï¼šåˆ›å»ºåä¸ºtom-all-pod-readerçš„clusterrolebindingï¼Œå¹¶å…³è”cluster-pods-readerè§’è‰²å’Œtomç”¨æˆ·ï¼›&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# kubectl create clusterrolebinding tom-all-pod-reader --clusterrole=cluster-pods-reader --user=tom
clusterrolebinding.rbac.authorization.k8s.io/tom-all-pod-reader created
[root@master01 ~]# kubectl get clusterrolebinding tom-all-pod-reader
NAME                 ROLE                              AGE
tom-all-pod-reader   ClusterRole/cluster-pods-reader   20s
[root@master01 ~]# kubectl describe clusterrolebinding tom-all-pod-reader
Name:         tom-all-pod-reader
Labels:       &amp;lt;none&amp;gt;
Annotations:  &amp;lt;none&amp;gt;
Role:
  Kind:  ClusterRole
  Name:  cluster-pods-reader
Subjects:
  Kind  Name  Namespace
  ----  ----  ---------
  User  tom   
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€éªŒè¯ï¼šä½¿ç”¨tomç”¨æˆ·çš„é…ç½®æ–‡ä»¶æŸ¥çœ‹kube-systemåç§°ç©ºé—´ä¸‹çš„podèµ„æºåˆ—è¡¨&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;37&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# kubectl get pod -n kube-system --kubeconfig=/tmp/myk8s.config 
NAME                                       READY   STATUS    RESTARTS   AGE
coredns-7f89b7bc75-k9gdt                   1/1     Running   18         23d
coredns-7f89b7bc75-kp855                   1/1     Running   16         23d
etcd-master01.k8s.org                      1/1     Running   22         23d
kube-apiserver-master01.k8s.org            1/1     Running   17         23d
kube-controller-manager-master01.k8s.org   1/1     Running   19         23d
kube-flannel-ds-cx8d5                      1/1     Running   20         23d
kube-flannel-ds-jz6r4                      1/1     Running   11         12d
kube-flannel-ds-ndzl6                      1/1     Running   21         23d
kube-flannel-ds-rjtn9                      1/1     Running   23         23d
kube-flannel-ds-zgq92                      1/1     Running   20         23d
kube-proxy-cr8j8                           1/1     Running   13         11d
kube-proxy-h8fzw                           1/1     Running   8          11d
kube-proxy-jfzfh                           1/1     Running   9          11d
kube-proxy-rq8wl                           1/1     Running   8          11d
kube-proxy-sj72v                           1/1     Running   8          11d
kube-scheduler-master01.k8s.org            1/1     Running   19         23d
[root@master01 ~]# kubectl get pod  --kubeconfig=/tmp/myk8s.config               
NAME             READY   STATUS    RESTARTS   AGE
nginx-pod-demo   1/1     Running   1          44h
web-0            1/1     Running   2          2d21h
web-1            1/1     Running   2          2d21h
web-2            1/1     Running   2          2d21h
web-3            1/1     Running   3          2d22h
[root@master01 ~]# kubectl get svc --kubeconfig=/tmp/myk8s.config
NAME         TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE
kubernetes   ClusterIP   10.96.0.1    &amp;lt;none&amp;gt;        443/TCP   3d1h
nginx        ClusterIP   None         &amp;lt;none&amp;gt;        80/TCP    3d
[root@master01 ~]# kubectl get svc -n kube-system --kubeconfig=/tmp/myk8s.config
NAME       TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)                  AGE
kube-dns   ClusterIP   10.96.0.10   &amp;lt;none&amp;gt;        53/UDP,53/TCP,9153/TCP   23d
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šå¯ä»¥çœ‹åˆ°æŠŠtomç”¨æˆ·ç”¨clusterrolebindingå…³è”åˆ°å¯¹åº”clusterroleè§’è‰²ä¸Šï¼Œå°±æ‹¥æœ‰å¯¹åº”è§’è‰²ä¸Šçš„æƒé™ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€éªŒè¯ï¼šä½¿ç”¨tomç”¨æˆ·çš„é…ç½®æ–‡ä»¶æŸ¥çœ‹pvæˆ–nodeé›†ç¾¤çº§åˆ«èµ„æºï¼Œçœ‹çœ‹æ˜¯å¦å¯ä»¥æ­£å¸¸åˆ—å‡ºï¼Ÿ&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# kubectl get pv --kubeconfig=/tmp/myk8s.config
Error from server (Forbidden): persistentvolumes is forbidden: User &quot;tom&quot; cannot list resource &quot;persistentvolumes&quot; in API group &quot;&quot; at the cluster scope
[root@master01 ~]# kubectl get node --kubeconfig=/tmp/myk8s.config
Error from server (Forbidden): nodes is forbidden: User &quot;tom&quot; cannot list resource &quot;nodes&quot; in API group &quot;&quot; at the cluster scope
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šä½¿ç”¨tomç”¨æˆ·çš„é…ç½®æ–‡ä»¶æŸ¥çœ‹pvå’Œnodeèµ„æºï¼Œapiserverç›´æ¥æ‹’ç»äº†ï¼›åŸå› æ˜¯å¯¹åº”çš„clusterroleè§’è‰²ä¸Šæ²¡æœ‰æŸ¥çœ‹pvå’Œnodeçš„æƒé™ï¼›æ‰€ä»¥å¯¹åº”ç”¨æˆ·ä¹Ÿå°±æ²¡æœ‰ç›¸åº”çš„æŸ¥çœ‹æƒé™ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€ç¤ºä¾‹ï¼šåˆ›å»ºrolebindingï¼ŒæŠŠtomç”¨æˆ·å…³è”åˆ°clusterroleç±»å‹è§’è‰²cluster-pods-reader&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# kubectl create rolebinding tom-rolebinding-clusterrole --clusterrole=cluster-pods-reader --user=tom 
rolebinding.rbac.authorization.k8s.io/tom-rolebinding-clusterrole created
[root@master01 ~]# kubectl get rolebinding
NAME                          ROLE                              AGE
tom-pods-reader               Role/pod-reader                   20m
tom-rolebinding-clusterrole   ClusterRole/cluster-pods-reader   12s
[root@master01 ~]# kubectl describe rolebinding tom-rolebinding-clusterrole
Name:         tom-rolebinding-clusterrole
Labels:       &amp;lt;none&amp;gt;
Annotations:  &amp;lt;none&amp;gt;
Role:
  Kind:  ClusterRole
  Name:  cluster-pods-reader
Subjects:
  Kind  Name  Namespace
  ----  ----  ---------
  User  tom   
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€éªŒè¯ï¼šä½¿ç”¨tomç”¨æˆ·çš„é…ç½®æ–‡ä»¶ï¼Œçœ‹çœ‹ç°åœ¨tomç”¨æˆ·æ˜¯å¦è¿˜æœ‰å¯¹åº”kube-systemä¸­çš„podèµ„æºæœ‰åˆ—å‡ºæƒé™å‘¢ï¼Ÿ&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# kubectl get pods -n kube-system --kubeconfig=/tmp/myk8s.config
NAME                                       READY   STATUS    RESTARTS   AGE
coredns-7f89b7bc75-k9gdt                   1/1     Running   18         23d
coredns-7f89b7bc75-kp855                   1/1     Running   16         23d
etcd-master01.k8s.org                      1/1     Running   22         23d
kube-apiserver-master01.k8s.org            1/1     Running   17         23d
kube-controller-manager-master01.k8s.org   1/1     Running   19         23d
kube-flannel-ds-cx8d5                      1/1     Running   20         23d
kube-flannel-ds-jz6r4                      1/1     Running   11         12d
kube-flannel-ds-ndzl6                      1/1     Running   21         23d
kube-flannel-ds-rjtn9                      1/1     Running   23         23d
kube-flannel-ds-zgq92                      1/1     Running   20         23d
kube-proxy-cr8j8                           1/1     Running   13         11d
kube-proxy-h8fzw                           1/1     Running   8          11d
kube-proxy-jfzfh                           1/1     Running   9          11d
kube-proxy-rq8wl                           1/1     Running   8          11d
kube-proxy-sj72v                           1/1     Running   8          11d
kube-scheduler-master01.k8s.org            1/1     Running   19         23d
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šè¿™é‡Œè¿˜æ˜¯èƒ½å¤Ÿåˆ—å‡ºkube-systemåç§°ç©ºé—´ä¸‹çš„podï¼Œå…¶åŸå› æ˜¯æˆ‘ä»¬æ²¡æœ‰åˆ é™¤ä¹‹å‰çš„clusterrolebindingï¼Œæ‰€ä»¥å¯¹åº”tomç”¨æˆ·è¿˜æœ‰å¯¹kube-systemçš„æƒé™ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€éªŒè¯ï¼šåˆ é™¤clusterrolebinding tom-all-pod-reader çœ‹çœ‹tomç”¨æˆ·æ˜¯å¦è¿˜æœ‰å¯¹kube-systemä¸­çš„podåˆ—å‡ºæƒé™å‘¢ï¼Ÿ&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# kubectl get clusterrolebinding tom-all-pod-reader
NAME                 ROLE                              AGE
tom-all-pod-reader   ClusterRole/cluster-pods-reader   14m
[root@master01 ~]# kubectl delete clusterrolebinding tom-all-pod-reader
clusterrolebinding.rbac.authorization.k8s.io &quot;tom-all-pod-reader&quot; deleted
[root@master01 ~]# kubectl get rolebinding
NAME                          ROLE                              AGE
tom-pods-reader               Role/pod-reader                   27m
tom-rolebinding-clusterrole   ClusterRole/cluster-pods-reader   7m7s
[root@master01 ~]# kubectl get pods -n kube-system --kubeconfig=/tmp/myk8s.config
Error from server (Forbidden): pods is forbidden: User &quot;tom&quot; cannot list resource &quot;pods&quot; in API group &quot;&quot; in the namespace &quot;kube-system&quot;
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šå¯ä»¥çœ‹åˆ°æ­¤æ—¶tomç”¨æˆ·å°±æ²¡æœ‰å¯¹kube-systemåç§°ç©ºé—´ä¸‹çš„podæœ‰åˆ—å‡ºæƒé™äº†ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€éªŒè¯ï¼šä½¿ç”¨tomç”¨æˆ·çš„é…ç½®æ–‡ä»¶ï¼ŒæŸ¥çœ‹defaultåç§°ç©ºé—´ä¸‹çš„podså’Œserviceèµ„æºï¼Œçœ‹çœ‹æ˜¯å¦æœ‰æƒé™ï¼Ÿ&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# kubectl get pods  --kubeconfig=/tmp/myk8s.config              
NAME             READY   STATUS    RESTARTS   AGE
nginx-pod-demo   1/1     Running   1          45h
web-0            1/1     Running   2          2d22h
web-1            1/1     Running   2          2d22h
web-2            1/1     Running   2          2d22h
web-3            1/1     Running   3          2d22h
[root@master01 ~]# kubectl get svc  --kubeconfig=/tmp/myk8s.config    
NAME         TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE
kubernetes   ClusterIP   10.96.0.1    &amp;lt;none&amp;gt;        443/TCP   3d1h
nginx        ClusterIP   None         &amp;lt;none&amp;gt;        80/TCP    3d
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šå¯ä»¥çœ‹åˆ°tomç”¨æˆ·åœ¨defaultåç§°ç©ºé—´ä¸‹èƒ½å¤Ÿæ­£å¸¸åˆ—å‡ºpodå’Œserviceèµ„æºï¼›ä»ä¸Šé¢çš„ç¤ºä¾‹å¯ä»¥çœ‹åˆ°å½“rolebindingç»‘å®šçš„æ˜¯ä¸€ä¸ªclusterroleï¼Œå¯¹åº”clusterroleçš„æƒé™å°±ä¼šé™ä½è‡³å¯¹åº”rolebindingçš„åç§°ç©ºé—´ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä½¿ç”¨èµ„æºæ¸…å•åˆ›å»ºè§’è‰²&lt;/p&gt;
&lt;p&gt;ã€€ã€€ç¤ºä¾‹ï¼šä½¿ç”¨èµ„æºæ¸…å•åˆ›å»ºrole-demoè§’è‰²&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;38&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# cat role-demo.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: role-demo
  namespace: testing
rules:
- apiGroups: [&quot;&quot;]
  resources: [&quot;pods&quot;,&quot;pods/log&quot;,&quot;services&quot;]
  verbs: [&quot;get&quot;,&quot;list&quot;,&quot;watch&quot;]
  
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šroleèµ„æºæ²¡æœ‰specå­—æ®µï¼Œå®ƒçš„ç¾¤ç»„æ˜¯rbac.authorization.k8s.io/v1ï¼Œå¯¹åº”ç±»å‹ä¸ºRoleï¼›metadataå­—æ®µä¸­çš„nameç”¨äºæŒ‡å®šå¯¹åº”roleçš„åç§°ï¼›namespaceç”¨æˆ·æŒ‡å®šå¯¹åº”çš„åç§°ç©ºé—´ï¼›roleså­—æ®µç”¨æ¥æè¿°å¯¹èµ„æºå’Œæƒé™ï¼Œè¯¥å­—æ®µä¸ºä¸€ä¸ªåˆ—è¡¨å¯¹è±¡ï¼Œä¸€ä¸ªå¯¹è±¡å¿…é¡»æœ‰apiGroupï¼Œresourceså’Œverbså­—æ®µï¼›å…¶ä¸­apiGroupå­—æ®µç”¨æ¥æè¿°å¯¹åº”èµ„æºæ‰€å±ç¾¤ç»„ï¼Œé»˜è®¤ä¸å†™ä»»ä½•ç¾¤ç»„è¡¨ç¤ºæ ¸å¿ƒç¾¤ç»„v1ï¼›å¦‚æœæ˜¯åŒ¹é…æ‰€æœ‰ç¾¤ç»„å¯ä»¥å†™æˆâ€œ*â€;è¯¥å­—æ®µæ˜¯ä¸€ä¸ªåˆ—è¡¨ç±»å‹æ•°æ®ï¼Œæ‰€ä»¥å¿…é¡»ç”¨ä¸­æ‹¬å·å°†å…¶æ‹¬èµ·æ¥ï¼Œå³ä¾¿æ²¡æœ‰å€¼ï¼›resourceså­—æ®µç”¨æ¥æè¿°å¯¹åº”çš„èµ„æºï¼Œè¿™é‡Œçš„èµ„æºå¦‚æœå¯ä»¥ä½¿ç”¨å¤æ•°å½¢å¼çš„å¿…é¡»ä½¿ç”¨å¤æ•°å½¢å¼ï¼›æ‰€è°“å¤æ•°æ˜¯æŒ‡å¯¹åº”èµ„æºåç§°å•è¯çš„å¤æ•°å½¢å¼ï¼›è¯¥å­—æ®µä¹Ÿæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œå¯ä»¥ä½¿ç”¨ä¸­æ‹¬å·ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨-å¼€å¤´å†™å¯¹åº”çš„å€¼ï¼›verbså­—æ®µç”¨æ¥æè¿°å¯¹åº”çš„æƒé™ï¼Œè¯¥å­—æ®µä¹Ÿæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œå¯ä»¥ä½¿ç”¨ä¸­æ‹¬å·æˆ–è€…â€œ-â€å¼€å¤´ä»ä¸‹ä¸€è¡Œç›´æ¥å†™å€¼çš„æ–¹å¼ï¼›ä¸Šè¿°èµ„æºæ¸…å•è¡¨ç¤ºåˆ›å»ºä¸€ä¸ªåä¸ºrole-demoçš„è§’è‰²åœ¨testingåç§°ç©ºé—´ï¼›å¯¹åº”è§’è‰²æ‹¥æœ‰å¯¹è¯¥åç§°ç©ºé—´ä¸‹çš„podï¼Œpods/logå’Œservicesèµ„æºæœ‰get,list,watchæƒé™ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€åˆ›å»ºåç§°ç©ºé—´å¹¶åº”ç”¨é…ç½®æ¸…å•&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# kubectl get ns
NAME              STATUS   AGE
default           Active   23d
ingress-nginx     Active   9d
kube-node-lease   Active   23d
kube-public       Active   23d
kube-system       Active   23d
[root@master01 ~]# kubectl create ns testing
namespace/testing created
[root@master01 ~]# kubectl apply -f role-demo.yaml
role.rbac.authorization.k8s.io/role-demo created
[root@master01 ~]# kubectl get role -n testing
NAME        CREATED AT
role-demo   2020-12-31T12:46:53Z
[root@master01 ~]# kubectl describe role role-demo -n testing
Name:         role-demo
Labels:       &amp;lt;none&amp;gt;
Annotations:  &amp;lt;none&amp;gt;
PolicyRule:
  Resources  Non-Resource URLs  Resource Names  Verbs
  ---------  -----------------  --------------  -----
  pods/log   []                 []              [get list watch]
  pods       []                 []              [get list watch]
  services   []                 []              [get list watch]
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€ç¤ºä¾‹ï¼šä½¿ç”¨èµ„æºæ¸…å•åˆ›å»ºrolebinding&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# cat rolebinding-demo.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: rolebinding-demo
  namespace: testing
roleRef:
  kind: Role
  name: role-demo
  apiGroup: rbac.authorization.k8s.io
subjects:
- kind: User
  apiGroup: rbac.authorization.k8s.io
  name: tom
  
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šä½¿ç”¨èµ„æºæ¸…å•åˆ›å»ºrolebindingï¼Œéœ€è¦ç”¨roleRefå­—æ®µæ¥æŒ‡å®šå¼•ç”¨çš„roleæˆ–clusterroleï¼Œè¯¥å­—æ®µä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­kindæŒ‡å®šå¯¹åº”è§’è‰²çš„ç±»å‹ï¼ŒRoleè¡¨ç¤ºå¼•ç”¨åç§°ç©ºé—´çº§åˆ«çš„roleï¼›ClusterRoleè¡¨ç¤ºå¼•ç”¨é›†ç¾¤çº§åˆ«è§’è‰²clusterroleï¼›apiGroupæ˜¯ç”¨æ¥æè¿°å¯¹åº”è§’è‰²çš„ä¸å¸¦ç‰ˆæœ¬apiç¾¤ç»„ï¼›subjectså­—æ®µç”¨æ¥æè¿°å¯¹åº”ç”¨æˆ·æˆ–ç»„ï¼Œè¯¥å­—æ®µä¸ºä¸€ä¸ªåˆ—è¡¨å¯¹è±¡ï¼›å…¶ä¸­kindå­—æ®µç”¨æ¥è¡¨ç¤ºå¯¹åº”çš„æ˜¯ç”¨æˆ·è¿˜æ˜¯ç”¨æˆ·ç»„ï¼›Userè¡¨ç¤ºç”¨æˆ·ï¼ŒGroupè¡¨ç¤ºç”¨æˆ·ç»„ï¼›ServiceAccountè¡¨ç¤ºæ˜¯ä¸€ä¸ªsaç”¨æˆ·ï¼›apiGroupç”¨æ¥æŒ‡å®šå¯¹åº”ä¸å¸¦ç‰ˆæœ¬çš„apiç¾¤ç»„ï¼›nameç”¨æ¥æŒ‡å®šç”¨æˆ·åæˆ–ç»„åæˆ–saåï¼›ä¸Šè¿°èµ„æºæ¸…å•è¡¨ç¤ºæŠŠtomç”¨æˆ·å’Œrole-demoè§’è‰²åšå…³è”ï¼Œå³æˆæƒtomç”¨æˆ·æ‹¥æœ‰role-demoè§’è‰²çš„æƒé™ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€éªŒè¯ï¼šåœ¨æœªåº”ç”¨èµ„æºæ¸…å•å‰ä½¿ç”¨tomç”¨æˆ·çš„é…ç½®æ–‡ä»¶æŸ¥çœ‹testingåç§°ç©ºé—´ä¸‹çš„podèµ„æº&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;34&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# kubectl get pods -n testing --kubeconfig=/tmp/myk8s.config
Error from server (Forbidden): pods is forbidden: User &quot;tom&quot; cannot list resource &quot;pods&quot; in API group &quot;&quot; in the namespace &quot;testing&quot;
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šåœ¨æœªåº”ç”¨ä¸Šè¿°èµ„æºæ¸…å•ï¼Œtomç”¨æˆ·å¯¹testingåç§°ç©ºé—´çš„èµ„æºæ²¡æœ‰ä»»ä½•æƒé™ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€åº”ç”¨èµ„æºæ¸…å•&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# kubectl apply -f rolebinding-demo.yaml         
rolebinding.rbac.authorization.k8s.io/rolebinding-demo created
[root@master01 ~]# kubectl get rolebinding -n testing
NAME               ROLE             AGE
rolebinding-demo   Role/role-demo   31s
[root@master01 ~]# kubectl describe rolebinding rolebinding-demo -n testing
Name:         rolebinding-demo
Labels:       &amp;lt;none&amp;gt;
Annotations:  &amp;lt;none&amp;gt;
Role:
  Kind:  Role
  Name:  role-demo
Subjects:
  Kind  Name  Namespace
  ----  ----  ---------
  User  tom   
[root@master01 ~]# kubectl get pods -n testing --kubeconfig=/tmp/myk8s.config
No resources found in testing namespace.
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šå¯ä»¥çœ‹åˆ°åº”ç”¨èµ„æºæ¸…å•ä»¥åï¼Œå†æ¬¡ä½¿ç”¨tomç”¨æˆ·çš„é…ç½®æ–‡ä»¶æŸ¥çœ‹testingåç§°ç©ºé—´ä¸‹çš„podèµ„æºï¼Œå°±æ²¡æœ‰æç¤ºæ²¡æœ‰æƒé™æ‹’ç»ï¼Œåªæ˜¯å‘Šè¯‰æˆ‘ä»¬å¯¹åº”åç§°ç©ºé—´ä¸‹æ²¡æœ‰podèµ„æºï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€ç¤ºä¾‹ï¼šä½¿ç”¨èµ„æºæ¸…å•åˆ›å»ºclusterrole&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;40&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# cat clusterrole-demo.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: clusterrole-demo
rules:
- apiGroups: [&quot;&quot;]
  resources: [&quot;pods&quot;,&quot;nodes&quot;,&quot;PersistentVolume&quot;]
  verbs: [&quot;get&quot;,&quot;list&quot;,&quot;watch&quot;,&quot;create&quot;,&quot;delete&quot;]
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šä½¿ç”¨èµ„æºæ¸…å•åˆ›å»ºclusterroleå’Œåˆ›å»ºroleæ˜¯ä¸€æ ·çš„æ ¼å¼ï¼Œä¸åŒçš„æ˜¯å¯¹åº”kindçš„å€¼ä¸åŒï¼Œä¸éœ€è¦æŒ‡å®šåç§°ç©ºé—´ï¼›å…¶ä»–çš„éƒ½ä¸€æ ·ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€åº”ç”¨èµ„æºæ¸…å•&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# kubectl apply -f clusterrole-demo.yaml
clusterrole.rbac.authorization.k8s.io/clusterrole-demo created
[root@master01 ~]# kubectl get clusterrole clusterrole-demo
NAME               CREATED AT
clusterrole-demo   2020-12-31T13:23:48Z
[root@master01 ~]# kubectl describe clusterrole clusterrole-demo
Name:         clusterrole-demo
Labels:       &amp;lt;none&amp;gt;
Annotations:  &amp;lt;none&amp;gt;
PolicyRule:
  Resources         Non-Resource URLs  Resource Names  Verbs
  ---------         -----------------  --------------  -----
  PersistentVolume  []                 []              [get list watch create delete]
  nodes             []                 []              [get list watch create delete]
  pods              []                 []              [get list watch create delete]
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€ç¤ºä¾‹ï¼šä½¿ç”¨èµ„æºæ¸…å•åˆ›å»ºclusterrolebinding&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# cat clusterrolebinding.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: clusterrolebinding-demo
roleRef:
  kind: ClusterRole
  name: clusterrole-demo
  apiGroup: rbac.authorization.k8s.io
subjects:
- kind: User
  apiGroup: rbac.authorization.k8s.io
  name: tom
  
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šä½¿ç”¨èµ„æºæ¸…å•åˆ›å»ºclusterrolebindingå’Œåˆ›å»ºrolebindingçš„æ ¼å¼ä¸€æ ·ï¼Œä¸åŒçš„æ˜¯åˆ›å»ºclusterrolebindingä¸éœ€è¦æŒ‡å®šåç§°ç©ºé—´ï¼Œå¯¹åº”kindå€¼ä¸ºClusterRoleBindingï¼›å…¶ä»–å­—æ®µçš„ä½¿ç”¨æ–¹å¼å’Œroleä¸€æ ·ï¼›ä¸Šè¿°èµ„æºæ¸…å•è¡¨ç¤ºæŠŠtomç”¨æˆ·å’Œclusterrole-demoè§’è‰²åšå…³è”ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€éªŒè¯ï¼šåœ¨æ²¡æœ‰åº”ç”¨èµ„æºæ¸…å•å‰ä½¿ç”¨tomç”¨æˆ·çš„é…ç½®æ–‡ä»¶æŸ¥çœ‹kube-systemåç§°ç©ºé—´ä¸‹çš„podèµ„æº&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;34&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# kubectl get pods -n kube-system --kubeconfig=/tmp/myk8s.config
Error from server (Forbidden): pods is forbidden: User &quot;tom&quot; cannot list resource &quot;pods&quot; in API group &quot;&quot; in the namespace &quot;kube-system&quot;
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šæ²¡æœ‰åº”ç”¨èµ„æºæ¸…å•å‰ä½¿ç”¨tomç”¨æˆ·çš„é…ç½®æ–‡ä»¶æŸ¥çœ‹kube-systemåç§°ç©ºé—´ä¸‹çš„podèµ„æºï¼Œæ˜¯è¢«apiserveræ‹’ç»çš„ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€åº”ç”¨é…ç½®æ¸…å•&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# kubectl apply -f clusterrolebinding.yaml
clusterrolebinding.rbac.authorization.k8s.io/clusterrolebinding-demo created
[root@master01 ~]# kubectl get clusterrolebinding clusterrolebinding-demo
NAME                      ROLE                           AGE
clusterrolebinding-demo   ClusterRole/clusterrole-demo   15s
[root@master01 ~]# kubectl describe clusterrolebinding clusterrolebinding-demo
Name:         clusterrolebinding-demo
Labels:       &amp;lt;none&amp;gt;
Annotations:  &amp;lt;none&amp;gt;
Role:
  Kind:  ClusterRole
  Name:  clusterrole-demo
Subjects:
  Kind  Name  Namespace
  ----  ----  ---------
  User  tom   
[root@master01 ~]# kubectl get pods -n kube-system --kubeconfig=/tmp/myk8s.config           
NAME                                       READY   STATUS    RESTARTS   AGE
coredns-7f89b7bc75-k9gdt                   1/1     Running   18         23d
coredns-7f89b7bc75-kp855                   1/1     Running   16         23d
etcd-master01.k8s.org                      1/1     Running   22         23d
kube-apiserver-master01.k8s.org            1/1     Running   17         23d
kube-controller-manager-master01.k8s.org   1/1     Running   19         23d
kube-flannel-ds-cx8d5                      1/1     Running   20         23d
kube-flannel-ds-jz6r4                      1/1     Running   11         13d
kube-flannel-ds-ndzl6                      1/1     Running   21         23d
kube-flannel-ds-rjtn9                      1/1     Running   23         23d
kube-flannel-ds-zgq92                      1/1     Running   20         23d
kube-proxy-cr8j8                           1/1     Running   13         11d
kube-proxy-h8fzw                           1/1     Running   8          11d
kube-proxy-jfzfh                           1/1     Running   9          11d
kube-proxy-rq8wl                           1/1     Running   8          11d
kube-proxy-sj72v                           1/1     Running   8          11d
kube-scheduler-master01.k8s.org            1/1     Running   19         23d
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šå¯ä»¥çœ‹åˆ°åº”ç”¨èµ„æºæ¸…å•ä»¥åï¼Œå†ä½¿ç”¨tomç”¨æˆ·çš„é…ç½®æ–‡ä»¶æŸ¥çœ‹kube-systemåç§°ç©ºé—´ä¸‹çš„podå°±å¯ä»¥æ­£å¸¸åˆ—å‡ºäº†ï¼Œè¯´æ˜å¯¹åº”tomç”¨æˆ·æˆæƒæˆåŠŸï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€æŸ¥çœ‹ç³»ç»Ÿé»˜è®¤çš„clusterrole&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# kubectl get clusterrole
NAME                                                                   CREATED AT
admin                                                                  2020-12-08T06:39:13Z
cluster-admin                                                          2020-12-08T06:39:13Z
cluster-pods-reader                                                    2020-12-31T11:35:03Z
clusterrole-demo                                                       2020-12-31T13:23:48Z
edit                                                                   2020-12-08T06:39:13Z
flannel                                                                2020-12-08T06:59:56Z
kubeadm:get-nodes                                                      2020-12-08T06:39:15Z
nginx-ingress-clusterrole                                              2020-12-21T15:16:13Z
system:aggregate-to-admin                                              2020-12-08T06:39:13Z
system:aggregate-to-edit                                               2020-12-08T06:39:13Z
system:aggregate-to-view                                               2020-12-08T06:39:13Z
system:auth-delegator                                                  2020-12-08T06:39:13Z
system:basic-user                                                      2020-12-08T06:39:13Z
system:certificates.k8s.io:certificatesigningrequests:nodeclient       2020-12-08T06:39:13Z
system:certificates.k8s.io:certificatesigningrequests:selfnodeclient   2020-12-08T06:39:13Z
system:certificates.k8s.io:kube-apiserver-client-approver              2020-12-08T06:39:13Z
system:certificates.k8s.io:kube-apiserver-client-kubelet-approver      2020-12-08T06:39:13Z
system:certificates.k8s.io:kubelet-serving-approver                    2020-12-08T06:39:13Z
system:certificates.k8s.io:legacy-unknown-approver                     2020-12-08T06:39:13Z
system:controller:attachdetach-controller                              2020-12-08T06:39:13Z
system:controller:certificate-controller                               2020-12-08T06:39:13Z
system:controller:clusterrole-aggregation-controller                   2020-12-08T06:39:13Z
system:controller:cronjob-controller                                   2020-12-08T06:39:13Z
system:controller:daemon-set-controller                                2020-12-08T06:39:13Z
system:controller:deployment-controller                                2020-12-08T06:39:13Z
system:controller:disruption-controller                                2020-12-08T06:39:13Z
system:controller:endpoint-controller                                  2020-12-08T06:39:13Z
system:controller:endpointslice-controller                             2020-12-08T06:39:13Z
system:controller:endpointslicemirroring-controller                    2020-12-08T06:39:13Z
system:controller:expand-controller                                    2020-12-08T06:39:13Z
system:controller:generic-garbage-collector                            2020-12-08T06:39:13Z
system:controller:horizontal-pod-autoscaler                            2020-12-08T06:39:13Z
system:controller:job-controller                                       2020-12-08T06:39:13Z
system:controller:namespace-controller                                 2020-12-08T06:39:13Z
system:controller:node-controller                                      2020-12-08T06:39:13Z
system:controller:persistent-volume-binder                             2020-12-08T06:39:13Z
system:controller:pod-garbage-collector                                2020-12-08T06:39:13Z
system:controller:pv-protection-controller                             2020-12-08T06:39:13Z
system:controller:pvc-protection-controller                            2020-12-08T06:39:13Z
system:controller:replicaset-controller                                2020-12-08T06:39:13Z
system:controller:replication-controller                               2020-12-08T06:39:13Z
system:controller:resourcequota-controller                             2020-12-08T06:39:13Z
system:controller:root-ca-cert-publisher                               2020-12-08T06:39:13Z
system:controller:route-controller                                     2020-12-08T06:39:13Z
system:controller:service-account-controller                           2020-12-08T06:39:13Z
system:controller:service-controller                                   2020-12-08T06:39:13Z
system:controller:statefulset-controller                               2020-12-08T06:39:13Z
system:controller:ttl-controller                                       2020-12-08T06:39:13Z
system:coredns                                                         2020-12-08T06:39:15Z
system:discovery                                                       2020-12-08T06:39:13Z
system:heapster                                                        2020-12-08T06:39:13Z
system:kube-aggregator                                                 2020-12-08T06:39:13Z
system:kube-controller-manager                                         2020-12-08T06:39:13Z
system:kube-dns                                                        2020-12-08T06:39:13Z
system:kube-scheduler                                                  2020-12-08T06:39:13Z
system:kubelet-api-admin                                               2020-12-08T06:39:13Z
system:monitoring                                                      2020-12-08T06:39:13Z
system:node                                                            2020-12-08T06:39:13Z
system:node-bootstrapper                                               2020-12-08T06:39:13Z
system:node-problem-detector                                           2020-12-08T06:39:13Z
system:node-proxier                                                    2020-12-08T06:39:13Z
system:persistent-volume-provisioner                                   2020-12-08T06:39:13Z
system:public-info-viewer                                              2020-12-08T06:39:13Z
system:service-account-issuer-discovery                                2020-12-08T06:39:13Z
system:volume-scheduler                                                2020-12-08T06:39:13Z
view                                                                   2020-12-08T06:39:13Z
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šä»¥systemå¼€å¤´çš„éƒ½æ˜¯ç³»ç»Ÿé»˜è®¤åˆ›å»ºçš„clusterroleè§’è‰²ï¼›è¿™äº›è§’è‰²éƒ½æ˜¯ç”¨æ¥ç»™å¯¹åº”ç»„ä»¶æˆæƒç”¨çš„ï¼Œæ¯”å¦‚ï¼Œsystem:kube-dnså°±æ˜¯ç”¨æ¥ç»™kube-dnsè¿™ä¸ªpodåœ¨apiserverä¸ŠéªŒè¯æˆæƒéœ€è¦ä½¿ç”¨çš„è§’è‰²ï¼›system:kube-controller-managerè¿™ä¸ªè§’è‰²å°±æ˜¯ç”¨æ¥kube-controller-managerè¿™ä¸ªpodåœ¨apiserverä¸Šæ‹¥æœ‰çš„æƒé™ï¼›kube-controller-managerè¿™ä¸ªpodå‘apiserveréªŒè¯æ—¶ï¼Œé¦–å…ˆæŠŠå¯¹åº”çš„è¯ä¹¦å‘é€ç»™apiserverï¼Œapiserveré€šè¿‡è¯†åˆ«å¯¹åº”è¯ä¹¦ä¸­CNçš„åå­—æ¥ç¡®å®šå¯¹åº”çš„ç”¨æˆ·åï¼›å¦‚æœå¯¹åº”ç”¨æˆ·åæ˜¯system:kube-controller-managerï¼Œé‚£ä¹ˆå¯¹åº”kube-controller-managerè¿™ä¸ªpodå°±æ‹¥æœ‰å¯¹åº”è¯¥è§’è‰²çš„æ‰€æœ‰æƒé™ï¼›å¦‚æœæˆ‘ä»¬æ‰‹åŠ¨éƒ¨ç½²çš„k8sé›†ç¾¤ï¼Œå¯¹åº”controller-managerçš„è¯ä¹¦ä¸­CNåç§°ä¸æ˜¯system:kube-controller-managerï¼Œé‚£ä¹ˆæˆ‘ä»¬æ‰‹åŠ¨éƒ¨ç½²çš„k8sé›†ç¾¤å°†ä¸èƒ½æ­£å¸¸å·¥ä½œï¼Œå¯¹äºå…¶ä»–ç»„ä»¶ä¹Ÿæ˜¯ç±»ä¼¼çš„é€»è¾‘ï¼›é™¤äº†å†…ç½®äº†ä»¥systemå¼€å¤´çš„å¾ˆå¤šclusterroleï¼Œk8sä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬æˆæƒï¼Œå®ƒè¿˜å†…ç½®äº†4ä¸ªç‰¹æ®Šçš„clusterroleï¼Œåˆ†åˆ«æ˜¯cluster-adminï¼Œadmin,editå’Œviewï¼›å…¶ä¸­cluster-adminæ˜¯æ‹¥æœ‰å¯¹æ•´ä¸ªé›†ç¾¤çš„æ‰€æœ‰èµ„æºæ‹¥æœ‰æ‰€æœ‰æƒé™ï¼Œé»˜è®¤è¿™ä¸ªè§’è‰²è¢«clusterrolebindingç»‘å®šåœ¨system:masterè¿™ä¸ªç»„ä¸Šï¼›å¯¹åº”kuberctlä½¿ç”¨çš„è¯ä¹¦æ–‡ä»¶ä¸­Oçš„ä¿¡æ¯å°±æ˜¯system:masterï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨kubectlåŠ è½½é»˜è®¤çš„é…ç½®æ–‡ä»¶å¯ä»¥æ“ä½œæ•´ä¸ªé›†ç¾¤ä¸Šçš„æ‰€æœ‰èµ„æºï¼›adminè§’è‰²ä¹Ÿæ˜¯ä¸€ä¸ªç®¡ç†å‘˜æƒé™ï¼Œä¸åŒäºcluster-adminï¼Œadminè§’è‰²ä¸€èˆ¬ç”¨äºé€šè¿‡rolebindingæ¥å®ç°å¯¹ç‰¹æœ‰åç§°ç©ºé—´çš„ç®¡ç†å‘˜æˆæƒï¼›editå’Œviewä¹Ÿæ˜¯ç±»ä¼¼çš„é€»è¾‘ï¼Œä¸»è¦ç”¨äºé€šè¿‡rolebindingæ¥å®ç°ç‰¹æœ‰åç§°ç©ºé—´ä¸‹çš„ç‰¹å®šç®¡ç†å‘˜ï¼›æ¯”å¦‚å¿«é€ŸæˆæƒæŸä¸ªç”¨æˆ·åœ¨æŸä¸ªåç§°ç©ºé—´ä¸‹æ‹¥æœ‰åªè¯»æƒé™ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æŠŠå¯¹åº”ç”¨æˆ·é€šè¿‡rolebindingå°†å…¶ç»‘å®šè‡³viewè¿™ä¸ªclusterroleè§’è‰²ä¸Šï¼›å¦‚æœåªå…è®¸æŸä¸ªç”¨æˆ·æ‹¥æœ‰å¯¹åº”åç§°ç©ºé—´ä¸‹çš„æ‰€æœ‰èµ„æºçš„ä¿®æ”¹æƒé™ï¼Œå°±å¯ä»¥æŠŠå¯¹åº”ç”¨æˆ·é€šè¿‡rolebindingç»‘å®šåˆ°editè¿™ä¸ªclusterroleè§’è‰²ä¸Šï¼›å½“ç„¶ä»¥ä¸Šå‡ ä¸ªè§’è‰²ä¹Ÿå¯ä»¥é€šè¿‡clusterrolebindingæ¥ç»‘å®šï¼Œç”¨clusterrolebindingæ¥ç»‘å®šï¼Œå¯¹åº”ç”¨æˆ·å°±æ˜¯å¯¹åº”æ•´ä¸ªé›†ç¾¤çš„æ‰€æœ‰èµ„æºï¼›æœ‰äº†ä¸Šè¿°4ä¸ªå†…ç½®çš„clusterroleï¼Œæˆ‘ä»¬å°±å¯ä»¥å¿«é€Ÿçš„å°†æŸä¸ªç”¨æˆ·æˆæƒä¸ºç‰¹å®šçš„è§’è‰²ï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€æŸ¥çœ‹kubectlé»˜è®¤è¯ä¹¦ä¸­çš„ä¿¡æ¯&lt;/p&gt;
&lt;p&gt;ã€€ã€€å¤åˆ¶é…ç½®æ–‡ä»¶ä¸­çš„client-certificate-data å¯¹åº”çš„è¢«base64ç¼–ç å¤„ç†è¿‡çš„ä¿¡æ¯ï¼Œç„¶åé€šè¿‡base64 -då°†å…¶è§£å¯†ï¼Œç„¶åä½¿ç”¨openssl x509Â  -text -noout æ¥æŸ¥çœ‹å¯¹åº”è¯ä¹¦ä¸­çš„ä¿¡æ¯&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1503305/202012/1503305-20201231233818512-767748455.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šå¯ä»¥çœ‹åˆ°å½“å‰kubectlçš„è¯ä¹¦ä¸­O=system:master CN=kubernetes-adminï¼›ä¹‹æ‰€ä»¥kubectlèƒ½å¤Ÿç®¡ç†é›†ç¾¤èµ„æºæ˜¯å› ä¸ºå¯¹åº”è¯ä¹¦ä¸­çš„O=system:masterï¼Œè¯¥ä¿¡æ¯ç›´æ¥å¯¹åº”k8sä¸Šçš„é›†ç¾¤è§’è‰²cluster-adminï¼›å¯¹åº”é›†ç¾¤è§’è‰²å°±æ˜¯é€šè¿‡clusterrolebindingç»‘å®šåˆ°system:masterç»„ï¼›æ‰€ä»¥kubectlå°±æ‹¥æœ‰å¯¹k8sæ•´ä¸ªé›†ç¾¤èµ„æºçš„ç®¡æ§ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€ç¤ºä¾‹ï¼šæˆæƒtomç”¨æˆ·ä¸ºé›†ç¾¤ç®¡ç†å‘˜&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# cat tom-clusterrolebinding-cluster-admin.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: tom-cluster-admin
roleRef:
  kind: ClusterRole
  name: cluster-admin
  apiGroup: rbac.authorization.k8s.io
subjects:
- kind: User
  apiGroup: rbac.authorization.k8s.io
  name: tom
  
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šä¸Šè¿°èµ„æºè¡¨ç¤ºé€šè¿‡clusterrolebindingæˆæƒtomç”¨æˆ·æ‹¥æœ‰cluster-adminè§’è‰²çš„æ‰€æœ‰æƒé™ï¼Œå³é›†ç¾¤ç®¡ç†å‘˜ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€åº”ç”¨èµ„æºæ¸…å•&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# kubectl apply -f tom-clusterrolebinding-cluster-admin.yaml
clusterrolebinding.rbac.authorization.k8s.io/tom-cluster-admin created
[root@master01 ~]# kubectl get clusterrolebinding tom-cluster-admin
NAME                ROLE                        AGE
tom-cluster-admin   ClusterRole/cluster-admin   21s
[root@master01 ~]# kubectl describe clusterrolebinding tom-cluster-admin
Name:         tom-cluster-admin
Labels:       &amp;lt;none&amp;gt;
Annotations:  &amp;lt;none&amp;gt;
Role:
  Kind:  ClusterRole
  Name:  cluster-admin
Subjects:
  Kind  Name  Namespace
  ----  ----  ---------
  User  tom   
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€éªŒè¯ï¼šä½¿ç”¨tomç”¨æˆ·çš„é…ç½®æ–‡ä»¶ï¼Œç®¡ç†é›†ç¾¤èµ„æº&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# kubectl get all --kubeconfig=/tmp/myk8s.config
NAME                 READY   STATUS    RESTARTS   AGE
pod/nginx-pod-demo   1/1     Running   1          47h
pod/web-0            1/1     Running   2          3d
pod/web-1            1/1     Running   2          3d
pod/web-2            1/1     Running   2          3d
pod/web-3            1/1     Running   3          3d

NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE
service/kubernetes   ClusterIP   10.96.0.1    &amp;lt;none&amp;gt;        443/TCP   3d3h
service/nginx        ClusterIP   None         &amp;lt;none&amp;gt;        80/TCP    3d3h

NAME                   READY   AGE
statefulset.apps/web   4/4     3d3h
[root@master01 ~]# kubectl delete all --all  --kubeconfig=/tmp/myk8s.config
pod &quot;nginx-pod-demo&quot; deleted
pod &quot;web-0&quot; deleted
pod &quot;web-1&quot; deleted
pod &quot;web-2&quot; deleted
pod &quot;web-3&quot; deleted
service &quot;kubernetes&quot; deleted
service &quot;nginx&quot; deleted
statefulset.apps &quot;web&quot; deleted
[root@master01 ~]# kubectl apply -f statefulset-demo.yaml 
service/nginx created
statefulset.apps/web created
[root@master01 ~]# kubectl get all --kubeconfig=/tmp/myk8s.config          
NAME        READY   STATUS    RESTARTS   AGE
pod/web-0   1/1     Running   0          9s
pod/web-1   1/1     Running   0          6s
pod/web-2   1/1     Running   0          4s

NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE
service/kubernetes   ClusterIP   10.96.0.1    &amp;lt;none&amp;gt;        443/TCP   85s
service/nginx        ClusterIP   None         &amp;lt;none&amp;gt;        80/TCP    9s

NAME                   READY   AGE
statefulset.apps/web   3/3     9s
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šå¯ä»¥çœ‹åˆ°æˆ‘ä»¬ä½¿ç”¨tomç”¨æˆ·çš„é…ç½®æ–‡ä»¶å’Œé»˜è®¤é…ç½®æ–‡ä»¶æ˜¯ä¸€æ ·çš„æ•ˆæœï¼Œç¬é—´tomç”¨æˆ·å°±å˜æˆäº†é›†ç¾¤ç®¡ç†ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€åˆ é™¤tom-cluster-adminè¿™ä¸ªclusterrolebinding&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# kubectl delete -f tom-clusterrolebinding-cluster-admin.yaml 
clusterrolebinding.rbac.authorization.k8s.io &quot;tom-cluster-admin&quot; deleted
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æˆæƒtomç”¨æˆ·åªè¯»ingress-nginxåç§°ç©ºé—´ä¸‹çš„æ‰€æœ‰èµ„æº&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# cat tom-ingress-nginx-view.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: tom-ingress-nginx-view
  namespace: ingress-nginx
roleRef:
  kind: ClusterRole
  name: view
  apiGroup: rbac.authorization.k8s.io
subjects:
- kind: User
  apiGroup: rbac.authorization.k8s.io
  name: tom
  
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šä¸Šè¿°é…ç½®è¡¨ç¤ºé€šè¿‡ingress-nginxåç§° ç©ºé—´ä¸‹çš„rolebindingæŠŠtomç”¨æˆ·ç»‘å®šè‡³viewè¿™ä¸ªclusterroleä¸Šï¼›å³å¯¹åº”tomç”¨æˆ·å¯¹ingress-nginxåç§°ç©ºé—´ä¸‹çš„æ‰€æœ‰èµ„æºåªæœ‰åªè¯»æƒé™ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€åº”ç”¨èµ„æºé…ç½®æ¸…å•&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# kubectl apply -f tom-ingress-nginx-view.yaml
rolebinding.rbac.authorization.k8s.io/tom-ingress-nginx-view created
[root@master01 ~]# kubectl get rolebinding -n ingress-nginx
NAME                              ROLE                      AGE
nginx-ingress-role-nisa-binding   Role/nginx-ingress-role   9d
tom-ingress-nginx-view            ClusterRole/view          22s
[root@master01 ~]# kubectl describe rolebinding tom-ingress-nginx-view -n ingress-nginx
Name:         tom-ingress-nginx-view
Labels:       &amp;lt;none&amp;gt;
Annotations:  &amp;lt;none&amp;gt;
Role:
  Kind:  ClusterRole
  Name:  view
Subjects:
  Kind  Name  Namespace
  ----  ----  ---------
  User  tom   
[root@master01 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€éªŒè¯ï¼šä½¿ç”¨tomç”¨æˆ·çš„é…ç½®æ–‡ä»¶ç®¡ç†ingress-nginxåç§°ç©ºé—´ä¸‹çš„èµ„æº&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@master01 ~]# kubectl get pods -n ingress-nginx --kubeconfig=/tmp/myk8s.config             
NAME                                        READY   STATUS    RESTARTS   AGE
nginx-ingress-controller-5466cb8999-dzn5d   1/1     Running   0          33s
[root@master01 ~]# kubectl get pods --kubeconfig=/tmp/myk8s.config
Error from server (Forbidden): pods is forbidden: User &quot;tom&quot; cannot list resource &quot;pods&quot; in API group &quot;&quot; in the namespace &quot;default&quot;
[root@master01 ~]# kubectl delete pod nginx-ingress-controller-5466cb8999-dzn5d -n ingress-nginx --kubeconfig=/tmp/myk8s.config
Error from server (Forbidden): pods &quot;nginx-ingress-controller-5466cb8999-dzn5d&quot; is forbidden: User &quot;tom&quot; cannot delete resource &quot;pods&quot; in API group &quot;&quot; in the namespace &quot;ingress-nginx&quot;
[root@master01 ~]#
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šå¯ä»¥çœ‹åˆ°ç°åœ¨tomç”¨æˆ·åªèƒ½æŸ¥çœ‹ingress-nginxåç§°ç©ºé—´ä¸‹çš„èµ„æºï¼Œä¸èƒ½æŸ¥çœ‹defaultåç§°ç©ºé—´ä¸‹çš„èµ„æºï¼Œå…¶æ¬¡å¯¹ingress-nginxåç§°ç©ºé—´ä¸‹çš„podèµ„æºæ²¡æœ‰åˆ é™¤æƒé™ï¼›&lt;/p&gt;
</description>
<pubDate>Thu, 31 Dec 2020 15:50:00 +0000</pubDate>
<dc:creator>Linux-1874</dc:creator>
<og:description>å‰æ–‡æˆ‘ä»¬äº†è§£äº†k8sä¸Šçš„è®¿é—®æ§åˆ¶æœºåˆ¶ï¼Œä¸»è¦å¯¹è®¿é—®æ§åˆ¶ä¸­çš„ç¬¬ä¸€å…³ç”¨æˆ·è®¤è¯åšäº†ç›¸å…³è¯´æ˜ä»¥åŠå¸¸è§„ç”¨æˆ·çš„é…ç½®æ–‡ä»¶çš„åˆ¶ä½œï¼Œå›é¡¾è¯·å‚è€ƒï¼šhttps://www.cnblogs.com/qiuhom-1874/p/</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/qiuhom-1874/p/14216634.html</dc:identifier>
</item>
<item>
<title>ã€wpã€‘2020XCTF_é€†å‘ - c10udlnk</title>
<link>http://www.cnblogs.com/c10udlnk/p/14214080.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/c10udlnk/p/14214080.html</guid>
<description>&lt;p&gt;å‰å‡ å¤©çš„XCTFæœ€åä¸€åœºç»ˆäºæ‰“å®Œäº†ï¼Œä¸‰åœºæ¯”èµ›ä¸‹æ¥å¯¹é€†å‘éƒ¨åˆ†çš„å¤§æ¦‚æ„Ÿè§‰æ˜¯ä»ç¬¬ä¸€åœºçš„å•¥éƒ½ä¸ä¼šåšï¼ˆä¸€é“lua+ä¸€é“apkï¼‰åˆ°åæ¥çš„ç»ˆäºèƒ½æœ‰å‚ä¸åº¦ï¼Œè‡³å°‘åä¸¤åœºçš„é¢˜ç›®éƒ½æ˜¯pcé€†å‘ï¼Œè™½ç„¶ç‰¹æ®Šæ¶æ„ä½†å¥½æ­¹èƒ½åšï¼ˆtclã€‚æœ¬æ–‡æ˜¯ä¸‰åœºXCTFæ‰€æœ‰é€†å‘é¢˜ç›®çš„wpï¼ˆç›®æ ‡ï¼‰+å¤ç°æ•´ç†ã€‚èµ›ä¸­æ‹¿åˆ°äº†7/10çš„flagï¼Œå¾ˆå¤šæ˜¯è·Ÿç€é˜Ÿé‡Œçš„å¤§ä½¬åšå‡ºæ¥çš„ï¼ˆtqltqlï¼‰ï¼Œè¿™è¾¹å°±è¯•ç€ç‹¬ç«‹å¤ç°ä¸€ä¸‹ï¼Œè‡³å°‘æ‰“å®Œåº”è¯¥é•¿é•¿è®°æ€§ï¼ˆ&lt;/p&gt;&lt;div id=&quot;cnblogs_post_body&quot; readability=&quot;1424.0020671167&quot;&gt;
&lt;p&gt;å‰å‡ å¤©çš„XCTFæœ€åä¸€åœºç»ˆäºæ‰“å®Œäº†ï¼Œä¸‰åœºæ¯”èµ›ä¸‹æ¥å¯¹é€†å‘éƒ¨åˆ†çš„å¤§æ¦‚æ„Ÿè§‰æ˜¯ä»ç¬¬ä¸€åœºçš„å•¥éƒ½ä¸ä¼šåšï¼ˆä¸€é“lua+ä¸€é“apkï¼‰åˆ°åæ¥çš„ç»ˆäºèƒ½æœ‰å‚ä¸åº¦ï¼Œè‡³å°‘åä¸¤åœºçš„é¢˜ç›®éƒ½æ˜¯pcé€†å‘ï¼Œè™½ç„¶ç‰¹æ®Šæ¶æ„ä½†å¥½æ­¹èƒ½åšï¼ˆtclã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡æ˜¯ä¸‰åœºXCTFæ‰€æœ‰é€†å‘é¢˜ç›®çš„wp+å¤ç°æ•´ç†ã€‚èµ›ä¸­æ‹¿åˆ°äº†7/10çš„flagï¼Œå¾ˆå¤šæ˜¯è·Ÿç€é˜Ÿé‡Œçš„å¤§ä½¬åšå‡ºæ¥çš„ï¼ˆtqltqlï¼‰ï¼Œè¿™è¾¹å°±è¯•ç€ç‹¬ç«‹å¤ç°ä¸€ä¸‹ï¼Œè‡³å°‘æ‰“å®Œåº”è¯¥é•¿é•¿è®°æ€§ï¼ˆ&lt;/p&gt;
&lt;p&gt;P.S. ä¸ä¼šçš„é¢˜æš‚æ—¶æ ‡äº†ã€TODOã€‘ï¼Œç­‰wpå‡ºäº†å›æ¥å¡«å‘= =&lt;/p&gt;
&lt;p&gt;æ¯”èµ›å®˜ç½‘ï¼š&lt;a href=&quot;https://huaweictf2020.xctf.org.cn/&quot; target=&quot;_blank&quot;&gt;XCTFé«˜æ ¡ç½‘ç»œå®‰å…¨ä¸“é¢˜æŒ‘æˆ˜èµ›&lt;/a&gt;&lt;/p&gt;
&lt;hr/&gt;
&lt;h2 id=&quot;weird_luaã€todoã€‘&quot;&gt;Weird_luaã€TODOã€‘&lt;/h2&gt;
&lt;p&gt;ã€TODOã€‘&lt;/p&gt;
&lt;p&gt;luaæ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦ï¼Œ.luaæ–‡ä»¶æ²¡æ³•åç¼–è¯‘ï¼Œä¼°è®¡è™šæ‹Ÿæœºè¢«é­”æ”¹äº†&lt;/p&gt;
&lt;h2 id=&quot;divinationã€todoã€‘&quot;&gt;divinationã€TODOã€‘&lt;/h2&gt;
&lt;p&gt;ã€TODOã€‘&lt;/p&gt;
&lt;p&gt;apké€»è¾‘æ²¡çœ‹å‡ºæ¥ï¼ŒåºŸäº†åºŸäº†&lt;/p&gt;
&lt;hr/&gt;
&lt;h2 id=&quot;mips&quot;&gt;mips&lt;/h2&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;çœŸÂ·é€åˆ†é¢˜ï¼Œå¯æƒœå½“æ—¶è¦ä¸Šè¯¾æ²¡æ¥å¾—åŠæŠ¢ä¸€è¡€ï¼ˆä¸‹åˆ2ç‚¹æ”¾é¢˜ç»äº†&lt;/p&gt;
&lt;p&gt;è€ä¼ ç»Ÿèµ°è¿·å®«&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;mipsæ¶æ„ã€‚&lt;/p&gt;
&lt;p&gt;idaåç¼–è¯‘ä»¥åå¯ä»¥çœ‹åˆ°&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231124279-1769352282.png&quot; alt=&quot;image-20201229125551113&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;v4æ˜¯æˆ‘ä»¬è¾“å…¥çš„å­—ç¬¦ä¸²ï¼Œå¾ˆæ˜æ˜¾æ˜¯è¿·å®«é€»è¾‘ï¼Œä¸Šä¸‹å·¦å³ç”¨wasdèµ°ï¼Œè¿·å®«å­˜åœ¨dword_100111F0é‡Œã€‚&lt;/p&gt;
&lt;p&gt;sub_10000744()è¿™ä¸ªåˆå§‹å‡½æ•°æ˜¯ç”¨æ¥æ‰¾èµ·ç‚¹ç”¨çš„ï¼ˆå°±æ˜¯è¿·å®«ä¸­3æ‰€åœ¨çš„åœ°æ–¹ï¼Œåœ¨åé¢å¯ä»¥çœ‹åˆ°3å…¶å®è¡¨ç¤ºçš„æ˜¯å½“å‰ä½ç½®ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231124504-254962327.png&quot; alt=&quot;image-20201229125822518&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œä¹Ÿå¯ä»¥çœ‹åˆ°åº”è¯¥æœ‰å¤šä¸ªè¿·å®«ï¼ˆdword_10011D10æ˜¯ç”¨æ¥è¡¨ç¤ºç¬¬å‡ ä¸ªè¿·å®«çš„ï¼Œä¸”&amp;lt;=2ï¼Œä¸€ä¸ªè¿·å®«æœ‰225ä¸ªæ•°ï¼‰+ä¸€ä¸ªè¿·å®«å®½ä¸º15=ä¸‰ä¸ªè¿·å®«ï¼Œæ¯ä¸ªè¿·å®«ä¸º15*15ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åå°±æ˜¯ä¸‹é¢çš„å››ä¸ªå‡½æ•°ï¼Œéšä¾¿æŒ‘ä¸€ä¸ªå‡ºæ¥ï¼ˆæ¯”å¦‚sub_10000D28()ï¼‰å¯ä»¥çœ‹åˆ°&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231124727-1266835248.png&quot; alt=&quot;image-20201229130146475&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¾ˆæ˜æ˜¾æ˜¯ä¸ªå¾€å³èµ°çš„å‡½æ•°ï¼Œ3è¡¨ç¤ºå½“å‰ä½ç½®ï¼Œå¹¶æŠŠä¸Šä¸€ä¸ªå½“å‰ä½ç½®æ ‡ä¸º1ï¼ˆå¯èµ°è·¯å¾„ï¼‰ã€‚å¹¶ä¸”å¯ä»¥çœ‹åˆ°ç»ˆç‚¹æ˜¯4ï¼Œå°±æ˜¯è¯´æˆ‘ä»¬è¦æŠŠæ¯ä¸ªè¿·å®«ä»3èµ°åˆ°4ã€‚&lt;/p&gt;
&lt;p&gt;dumpè¿·å®«æ•°ç»„ï¼Œå†™è„šæœ¬æ‰“å°è¿·å®«ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;aMap=[1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 3, 0, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 3, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0, 0]
for i in range(45):
    for j in range(15):
        if aMap[i*15+j]==0:
            tmp='*'
        elif aMap[i*15+j]==1:
            tmp='.'
        elif aMap[i*15+j]==3:
            tmp='@'
        else:
            tmp='#'
        print(tmp,end='')
    print()
    if i==14 or i==29:
        print()
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°æ‰“å°å‡ºäº†ä¸‰ä¸ªè¿·å®«ï¼Œä¸ºäº†çœ‹å¾—æ¸…æ¥šæ‰€ä»¥é€‰ç”¨å‡ ä¸ªç‰¹å®šå­—ç¬¦æ‰“å°ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;.....**********
.....*@*.******
.....*.*.******
.....*.*.******
.....*.*.....**
.....*.*****.**
.....*.*****.**
.....*.*****..*
.....*........*
.....********#*
...............
...............
...............
...............
...............
#sssssssddddddds

..*************
..*@*....******
..*.****.******
..*.****.******
..*..***.....**
..*..*******.**
..*..*******.**
..*..*****....*
..*..*****.**.*
..*..*****.****
..*......*.*..*
..*...........*
..***********#*
...............
...............
#ssssssssssdddddddddds

***************
*@..***********
***.*...*******
***...*.*******
****.**.*******
*..*.**.*******
**...**.*******
*******.*******
*******....****
**********.****
**********.****
**********.****
**********....*
*************.*
*************#*
#ddssddwddssssssdddssssdddss
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;èµ°è¿·å®«ï¼Œç„¶åæŠŠè·¯å¾„æ‹¼èµ·æ¥ï¼Œæ ¹æ®æç¤ºè½¬md5ï¼Œget flagã€‚&lt;/p&gt;
&lt;p&gt;ï¼ˆæœ‰ä¸ªç–‘æƒ‘å“ˆï¼Œç¬¬äºŒä¸ªè¿·å®«ç†è®ºä¸Šè¯´å°±ç®—æ˜¯æœ€çŸ­è·¯ä¹Ÿæœ‰å¤šè§£ï¼Ÿæ˜¯é¢˜ç›®å‡ºé”…äº†è¿˜æ˜¯æˆ‘å“ªé‡Œçœ‹æ¼äº†= =&lt;/p&gt;
&lt;p&gt;ï¼ˆå†è¡¥ä¸€å¥ï¼Œé¢˜ç›®ä¼¼ä¹ç”šè‡³æ²¡è¦æ±‚æœ€çŸ­è·¯ï¼Ÿï¼Ÿï¼Ÿç¥å¥‡.jpg&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231124929-759532959.png&quot; alt=&quot;image-20201229163439245&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;import hashlib
s=b&quot;sssssssdddddddsssssssssssddddddddddsddssddwddssssssdddssssdddss&quot;
print(&quot;flag{%s}&quot;%hashlib.md5(s).hexdigest())
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;flag{999ea6aa6c365ab43eec2a0f0e5968d5}&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;pypy&quot;&gt;pypy&lt;/h2&gt;
&lt;p&gt;æŠŠé¢˜ç›®æ–‡ä»¶æ‹–è¿›idaï¼Œæœç´¢å­—ç¬¦ä¸²èƒ½çœ‹åˆ°&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231125153-1161425124.png&quot; alt=&quot;image-20201229164109092&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;çŒœæµ‹æ˜¯pyinstalleræ‰“åŒ…çš„æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;4.8666666666667&quot;&gt;
&lt;p&gt;ä¹Ÿå°±æ˜¯è¿™ä¸ªé¢˜è®©æˆ‘çªç„¶å‘ç°pyinstallerè¿˜èƒ½æ‰“åŒ…æˆelfçš„ï¼Œäºæ˜¯æ¯”èµ›ç»“æŸä»¥åèµ¶ç´§æŠŠä¹‹å‰æ€»ç»“çš„è§£åŒ…æŒ‡å—æ›´æ–°äº†ï¼š&lt;a href=&quot;https://c10udlnk.top/2020/12/04/reSkillsOn-Pyinstaller-extracted-to-python/&quot; target=&quot;_blank&quot;&gt;REå¥—è·¯ - å…³äºpyinstalleræ‰“åŒ…æ–‡ä»¶çš„å¤åŸ | c10udlnk_Log&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;èµ°æµç¨‹è§£åŒ…ï¼Œå¾—åˆ°pythonæºç ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231125456-429734910.png&quot; alt=&quot;image-20201229165610468&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;çœ‹åˆ°è¿™ç§æ··æ·†å˜é‡åï¼Œæœæ–­æ›¿æ¢æˆida styleå˜é‡åï¼ˆã€‚&lt;/p&gt;
&lt;p&gt;æ”¾ä¸€ä¸‹æºç ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;# uncompyle6 version 3.7.4
# Python bytecode 3.8 (3413)
# Decompiled from: Python 2.7.18 (v2.7.18:8d21aa21f2, Apr 20 2020, 13:25:05) [MSC v.1500 64 bit (AMD64)]
# Warning: this version of Python has problems handling the Python 3 &quot;byte&quot; type in constants properly.

# Embedded file name: main.py
# Compiled at: 1995-09-28 00:18:56
# Size of source mod 2**32: 257 bytes
import random, codecs, sys, time, pygame
from pygame.locals import *
from collections import deque
SCREEN_WIDTH = 600
SCREEN_HEIGHT = 480
SIZE = 20
LINE_WIDTH = 1
flag = 'flag{this is a fake flag}'
SCOPE_X = (0, SCREEN_WIDTH // SIZE - 1)
SCOPE_Y = (2, SCREEN_HEIGHT // SIZE - 1)
FOOD_STYLE_LIST = [(10, (255, 100, 100)), (20, (100, 255, 100)), (30, (100, 100, 255))]
LIGHT = (100, 100, 100)
DARK = (200, 200, 200)
BLACK = (0, 0, 0)
RED = (200, 30, 30)
BGCOLOR = (40, 40, 60)

def print_text(v1, v2, v3, v4, v5, fcolor=(255, 255, 255)):
    v6 = v2.render(v5, True, fcolor)
    v1.blit(v6, (v3, v4))


def init_snake():
    v7 = deque()
    v7.append((2, SCOPE_Y[0]))
    v7.append((1, SCOPE_Y[0]))
    v7.append((0, SCOPE_Y[0]))
    return v7


def create_food(v8):
    v9 = random.randint(SCOPE_X[0], SCOPE_X[1])
    v10 = random.randint(SCOPE_Y[0], SCOPE_Y[1])
    while (v9, v10) in v8:
        v9 = random.randint(SCOPE_X[0], SCOPE_X[1])
        v10 = random.randint(SCOPE_Y[0], SCOPE_Y[1])

    return (
     v9, v10)


def get_food_style():
    return FOOD_STYLE_LIST[random.randint(0, 2)]


DEFAULT_KEY = u'Y\xf3\x02\xc3%\x9a\x820\x0b\xbb%\x7f~;\xd2\xdc'

def rc4(v11, key=DEFAULT_KEY, skip=1024):
    v12 = 0
    v13 = bytearray([v14 for v14 in range(256)])
    v12 = 0
    for v15 in range(256):
        v12 = (v12 + v13[v15] + ord(key[(v15 % len(key))])) % 256
        v16 = v13[v15]
        v17 = v13[v12]
        v13[v15] = v13[v12]
        v13[v12] = v16
    else:
        v12 = 0
        v18 = 0
        v19 = []
        if skip &amp;gt; 0:
            for v15 in range(skip):
                v12 = (v12 + 1) % 256
                v18 = (v18 + v13[v12]) % 256
                v13[v12], v13[v18] = v13[v18], v13[v12]

        for v20 in v11:
            v12 = (v12 + 1) % 256
            v18 = (v18 + v13[v12]) % 256
            v13[v12], v13[v18] = v13[v18], v13[v12]
            v21 = v13[((v13[v12] + v13[v18]) % 256)]
            v19.append(chr(ord(v20) ^ v21))
        else:
            return ''.join(v19)


def func(v22):
    v23 = rc4(v22)
    if v23.encode('utf-8').hex() == '275b39c381c28b701ac3972338456022c2ba06c3b04f5501471c47c38ac380c29b72c3b5c38a7ec2a5c2a0':
        return 'YOU WIN'
    return 'YOU LOSE'


def main():
    pygame.init()
    v24 = pygame.display.set_mode((SCREEN_WIDTH, SCREEN_HEIGHT))
    pygame.display.set_caption(u'\u8d2a\u5403\u86c7')
    v25 = pygame.font.SysFont('SimHei', 24)
    v26 = pygame.font.Font(None, 72)
    v27, v28 = v26.size('GAME OVER')
    v29 = True
    v30 = init_snake()
    v31 = create_food(v30)
    v32 = get_food_style()
    v33 = (1, 0)
    v34 = True
    v35 = False
    v36 = 0
    v37 = 0.5
    v38 = v37
    v39 = None
    v41 = False
    for v40 in pygame.event.get():
        if v40.type == QUIT:
            sys.exit()
        elif v40.type == KEYDOWN:
            if v40.key == K_RETURN:
                if v34:
                    v35 = True
                    v34 = False
                    v29 = True
                    v30 = init_snake()
                    v31 = create_food(v30)
                    v32 = get_food_style()
                    v33 = (1, 0)
                    v36 = 0
                    v39 = time.time()
            elif v40.key == K_SPACE:
                if not v34:
                    v41 = not v41
            elif v40.key in (K_w, K_UP):
                if v29:
                    v33 = v33[1] or (0, -1)
                    v29 = False
            elif v40.key in (K_s, K_DOWN):
                if v29:
                    v33 = v33[1] or (0, 1)
                    v29 = False
            elif v40.key in (K_a, K_LEFT):
                if v29:
                    if not v33[0]:
                        v33 = (-1, 0)
                        v29 = False
                    elif v40.key in (K_d, K_RIGHT):
                        if v29:
                            if not v33[0]:
                                v33 = (1, 0)
                                v29 = False
        else:
            v24.fill(BGCOLOR)
            for v42 in range(SIZE, SCREEN_WIDTH, SIZE):
                pygame.draw.line(v24, BLACK, (v42, SCOPE_Y[0] * SIZE), (v42, SCREEN_HEIGHT), LINE_WIDTH)
            else:
                for v43 in range(SCOPE_Y[0] * SIZE, SCREEN_HEIGHT, SIZE):
                    pygame.draw.line(v24, BLACK, (0, v43), (SCREEN_WIDTH, v43), LINE_WIDTH)
                else:
                    v44 = v34 or time.time()

            if v44 - v39 &amp;gt; v38 and not v41:
                v29 = True
                v39 = v44
                v45 = (v30[0][0] + v33[0], v30[0][1] + v33[1])
                if v45 == v31:
                    v30.appendleft(v45)
                    v36 += v32[0]
                    v38 = v37 - 0.03 * (v36 // 100)
                    v31 = create_food(v30)
                    v32 = get_food_style()
                else:
                    if SCOPE_X[0] &amp;lt;= v45[0] &amp;lt;= SCOPE_X[1]:
                        if SCOPE_Y[0] &amp;lt;= v45[1] &amp;lt;= SCOPE_Y[1]:
                            if v45 not in v30:
                                v30.appendleft(v45)
                                v30.pop()
                            else:
                                v34 = True
                    if not v34:
                        pygame.draw.rect(v24, v32[1], (v31[0] * SIZE, v31[1] * SIZE, SIZE, SIZE), 0)
                for v46 in v30:
                    pygame.draw.rect(v24, DARK, (v46[0] * SIZE + LINE_WIDTH, v46[1] * SIZE + LINE_WIDTH, SIZE - LINE_WIDTH * 2, SIZE - LINE_WIDTH * 2), 0)
                else:
                    print_text(v24, v25, 30, 7, f&quot;speed: {v36 // 100}&quot;)
                    print_text(v24, v25, 450, 7, f&quot;score: {v36}&quot;)
                    if v36 &amp;gt;= 5192296858534827628530496329220096:
                        v47 = flag
                        print_text(v24, v26, (SCREEN_WIDTH - v27) // 2, (SCREEN_HEIGHT - v28) // 2, func(v47), RED)
                    if v34:
                        if v35:
                            print_text(v24, v26, (SCREEN_WIDTH - v27) // 2, (SCREEN_HEIGHT - v28) // 2, 'GAME OVER', RED)
                    pygame.display.update()


if __name__ == '__main__':
    main()
# okay decompiling main.pyc
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°æœ€ågetflagè¿™é‡Œï¼ˆfunc()ï¼‰çš„ç¨‹åºé€»è¾‘å°±ä¸€ä¸ªrc4åŠ å¯†ï¼Œç”±rc4çš„ç‰¹æ€§å¯çŸ¥åŠ å¯†å’Œè§£å¯†æµç¨‹ç›¸åŒï¼Œæ•…å¤ç”¨ç¨‹åºä¸­çš„rc4()æ¥å¾—åˆ°flagã€‚&lt;/p&gt;
&lt;p&gt;uncompyleåç¼–è¯‘å‡ºæ¥çš„æºç æ˜¯python3ï¼Œä½†æ˜¯é¢˜ç›®æœ¬èº«çš„æºç æ˜¯python2ï¼Œæ³¨æ„ç¼–ç é—®é¢˜ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;1.9207317073171&quot;&gt;
&lt;p&gt;å…³äºç¼–ç é—®é¢˜ï¼Œå¯ä»¥çœ‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://pycoders-weekly-chinese.readthedocs.io/en/latest/issue5/unipain.html&quot; target=&quot;_blank&quot;&gt;Unicodeä¹‹ç—› â€” PyCoder's Weelky CN&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.cnblogs.com/yangmingxianshen/p/7990102.html&quot; target=&quot;_blank&quot;&gt;å…³äºpython2ä¸­çš„unicodeå’Œsträ»¥åŠpython3ä¸­çš„strå’Œbytes - æ˜ç‹ä¸åŠ¨å¿ƒ - åšå®¢å›­&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™é‡Œå› ä¸ºåç¼–è¯‘åšäº†è½¬æ¢æˆpython3çš„å¤„ç†ï¼Œæ‰€ä»¥è„šæœ¬ç”¨python3å†™ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;DEFAULT_KEY = u'Y\xf3\x02\xc3%\x9a\x820\x0b\xbb%\x7f~;\xd2\xdc'
def rc4(v11, key=DEFAULT_KEY, skip=1024):
    v12 = 0
    v13 = bytearray([v14 for v14 in range(256)])
    v12 = 0
    for v15 in range(256):
        v12 = (v12 + v13[v15] + ord(key[(v15 % len(key))])) % 256
        v16 = v13[v15]
        v17 = v13[v12]
        v13[v15] = v13[v12]
        v13[v12] = v16
    else:
        v12 = 0
        v18 = 0
        v19 = []
        if skip &amp;gt; 0:
            for v15 in range(skip):
                v12 = (v12 + 1) % 256
                v18 = (v18 + v13[v12]) % 256
                v13[v12], v13[v18] = v13[v18], v13[v12]

        for v20 in v11:
            v12 = (v12 + 1) % 256
            v18 = (v18 + v13[v12]) % 256
            v13[v12], v13[v18] = v13[v18], v13[v12]
            v21 = v13[((v13[v12] + v13[v18]) % 256)]
            v19.append(chr(ord(v20) ^ v21))
        else:
            return ''.join(v19)
# def func(v22):
#     v23 = rc4(v22)
#     if v23.encode('utf-8').hex() == '275b39c381c28b701ac3972338456022c2ba06c3b04f5501471c47c38ac380c29b72c3b5c38a7ec2a5c2a0':
#         return 'YOU WIN'
#     return 'YOU LOSE'

# -=-=-=ä»¥ä¸Šæ‰€æœ‰ä¸ºæºç ä¸­åŸå‡½æ•°-=-=-=

cipher='275b39c381c28b701ac3972338456022c2ba06c3b04f5501471c47c38ac380c29b72c3b5c38a7ec2a5c2a0'
flag=bytes.fromhex(cipher).decode('utf-8')
print(rc4(flag))
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231125746-1136159797.png&quot; alt=&quot;image-20201229190337791&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;flag{snake_bao_is_really_lucky}&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;printã€todoã€‘&quot;&gt;printã€TODOã€‘&lt;/h2&gt;
&lt;p&gt;ã€TODOã€‘&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªé¢˜æ„Ÿè§‰å¤§æ¦‚çŸ¥é“æ€ä¹ˆåšï¼Œä½†å°±æ˜¯ä¸ä¼šå•Šï¼ˆç­‰wp...&lt;/p&gt;
&lt;p&gt;è´´ä¸€ä¸‹å½“æ—¶çš„æƒ³æ³•ï¼Œçœ‹äº†çœ‹é€»è¾‘åªæœ‰sprintfè¿™ç§å‡½æ•°ï¼Œé™¤æ­¤ä»¥å¤–æ²¡æœ‰åˆ«çš„å¯ä»¥æ”¹å†™å†…å­˜æ•°æ®çš„æ“ä½œäº†ã€‚&lt;/p&gt;
&lt;p&gt;åŠ¨æ€è°ƒè¯•è·Ÿäº†ä¸€ä¸‹ï¼ŒçŒœæµ‹æ˜¯sprintfæ ¼å¼åŒ–å­—ç¬¦ä¸²æ¼æ´å†™å…¥ï¼Ÿ&lt;/p&gt;
&lt;blockquote readability=&quot;0.093333333333333&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https://codearcana.com/posts/2013/05/02/introduction-to-format-string-exploits.html&quot; target=&quot;_blank&quot;&gt;Introduction to format string exploits&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.cnblogs.com/liufang/p/3741943.html&quot; target=&quot;_blank&quot;&gt;sprintf - stm32å­¦ä¹ ä¸­ - åšå®¢å›­&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;pwnå¤ªèœäº†è¿˜æ²¡ææ‡‚è¦æ€ä¹ˆå¾€outputé‚£é‡Œå†™ï¼ˆè™½ç„¶è¿™æ˜¯é€†å‘é¢˜orz&lt;/p&gt;
&lt;p&gt;setupå‡½æ•°é‚£é‡Œæœ‰ä¸€äº›formatçš„åˆå§‹åŒ–ï¼Œä¸»è¦æ˜¯loop()é‚£é‡Œï¼Œæ§åˆ¶inputï¼ˆè¾“å…¥çš„å­—ç¬¦ä¸²ï¼Œå…¨éƒ¨ä¸ºå¯è§å­—ç¬¦ä¸”é•¿åº¦&amp;gt;11ï¼‰ï¼Œæ¥æ”¹å˜ä½¿å¾—output!=åŸæ¥çš„outputä¸”output-1==48('0')ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231125990-1063553916.png&quot; alt=&quot;img&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;hr/&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;éš¾å¾—æœ‰ä¸€åœºaké€†å‘äº†ï¼ï¼ˆè™½ç„¶æœ‰å¤§ä½¬å¸¦ç€&lt;/p&gt;
&lt;p&gt;æœ‰ä¸‰é“é¢˜éƒ½æ˜¯å¡ç€å››è¡€äº¤ï¼Œå®æƒ¨TAT&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;re123&quot;&gt;re123&lt;/h2&gt;
&lt;p&gt;ç”¨fileå‘½ä»¤å¯ä»¥çœ‹åˆ°æ˜¯MS Windows HtmlHelp Dataæ–‡ä»¶ï¼ˆå³.chmï¼‰ï¼ŒæŸ¥çœ‹æ–‡ä»¶å¤´ä¹Ÿå¯ä»¥çŸ¥é“ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231126206-279751838.png&quot; alt=&quot;image-20201229191137544&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231126412-1040493664.png&quot; alt=&quot;image-20201229191253926&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æ·»åŠ åç¼€å.chmã€‚&lt;/p&gt;
&lt;p&gt;å…³äºchmæ–‡ä»¶æœ‰ä¸€ä¸ªå¸¸ç”¨çš„åç¼–è¯‘å™¨ChmDecompilerï¼Œå¯ä»¥é‡Šæ”¾CHMé‡Œé¢çš„å…¨éƒ¨æºæ–‡ä»¶ï¼ˆåŒ…æ‹¬ç½‘é¡µã€æ–‡æœ¬ã€å›¾ç‰‡ã€CHMã€ZIPã€EXEç­‰å…¨éƒ¨æºæ–‡ä»¶ï¼‰ï¼Œå¹¶ä¸”å®Œç¾åœ°æ¢å¤æºæ–‡ä»¶çš„å…¨éƒ¨ç›®å½•ç»“æ„ &lt;s&gt;ï¼ˆæ‘˜æŠ„çš„ç®€ä»‹&lt;/s&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ç”¨ChmDecompileræ‰“å¼€re.chmï¼Œè§£å‹ç¼©ï¼Œå¯ä»¥çœ‹åˆ°ç›®å½•ä¸‹å‡ºç°ä¸€ä¸ªåŒ…å«å››ä¸ªæ–‡ä»¶çš„æ–‡ä»¶å¤¹ï¼ˆå…¶å®æºæ–‡ä»¶åªæœ‰ä¸‰ä¸ªï¼Œ.hhpæ˜¯ChmDecompilerè‡ªåŠ¨ç”Ÿæˆçš„ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231126694-1687417192.png&quot; alt=&quot;image-20201229191554582&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªä¸€ä¸ªç¿»å¯ä»¥çœ‹åˆ°doc.htmé‡Œæœ‰ä¸€æ®µå¥‡æ€ªçš„Item1ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231127053-779771947.png&quot; alt=&quot;image-20201229192220277&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¤§æ¦‚å¯ä»¥çœ‹åˆ°æ˜¯powershellçš„è¯­æ³•ï¼Ÿï¼ˆæ„Ÿè§‰åƒwinåé—¨ï¼Œè¿™ä¹ˆå¤šnoçš„å‚æ•°&lt;/p&gt;
&lt;p&gt;æŸ¥äº†ä¸€ä¸‹å…¶å®å°±æ˜¯æŠŠåé¢é‚£å¤§æ®µè¿›è¡Œbase64è§£ç è€Œå·²ï¼Œç”¨wslè§£ä¸€ä¸‹base64æœ‰&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231127407-393101395.png&quot; alt=&quot;img&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åå¾—åˆ°äº†ä¸€æ®µ.NETä»£ç ï¼ˆç™½å­—ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡æŸ¥å¾®è½¯æ–‡æ¡£å¯ä»¥çŸ¥é“ï¼Œè¿™é‡Œæ˜¯æŠŠbase64è§£ç ä»¥åçš„å­—ç¬¦è¿›è¡ŒDeflateè§£å‹çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥ç”¨è„šæœ¬æŠŠä¸­é—´é‚£æ®µbase64è§£ç ï¼Œå¹¶æ•´ç†è¾“å‡ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;import base64
import zlib
 
def deflate(data):
    try:
        return zlib.decompress(data, -zlib.MAX_WBITS)
    except zlib.error:
        return zlib.decompress(data)

code='TY5BC4IwGIbvgv9hjB2McJhEhNChJMGTkN2qg7qvFHQT/bL575vpoV2/53n2skJJBInkQG5xwqOqhkcQXCATx7q+gkaHsvYj7kIVvCgburItVgm9MTxbVB5LATp5OlQvb6IMV0LdQvdPpu+8x66SL2eOrMl+Ck7naUA69ggND5UcoEOzI+pUc8p62G3TRZubv34K6IbLespADoGR27vv+R7HpqXzt8Q9y0IJI5N8RLCtLw=='
de_code=deflate(base64.b64decode(code)).decode()
for x in de_code.split('\r\n'):
    print(x)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231127604-1211487554.png&quot; alt=&quot;image-20201229193302890&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¾ˆæ˜æ˜¾çš„é€»è¾‘äº†ï¼ŒæŠŠdoc.chmï¼ˆåº”è¯¥æ˜¯åŸæ¥çš„re.chmï¼‰ä¸­&quot;xxxxxxxx&quot;åé¢çš„éƒ¨åˆ†æå–å‡ºæ¥ï¼Œè¿˜æ˜¯ç”¨base64è§£ç å¾—åˆ°æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231127829-418802557.png&quot; alt=&quot;img&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æŠŠè¿™åé¢çš„å†…å®¹æ‰‹åŠ¨å¤åˆ¶å‡ºæ¥åˆ°cont.txté‡Œï¼Œè¿›è¡Œbase64è§£ç ï¼Œæœ€åå­˜åœ¨theFileä¸­ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;base64 -d cont.txt &amp;gt; theFile
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æŸ¥çœ‹theFileå¯ä»¥çŒœæµ‹æ˜¯exeï¼ˆæ¯•ç«Ÿæœ€å¼€å§‹ç»™çš„å°±æ˜¯æœ‰powershellæŒ‡ä»¤çš„base64ï¼‰ï¼ŒæŠŠæ–‡ä»¶å¤´è¡¥ä¸Šï¼Œå¹¶æ”¹åç¼€åï¼ˆå³theFile.exeï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231128048-51121876.png&quot; alt=&quot;img&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç”¨idaæ‰“å¼€ï¼Œé€šè¿‡FindCryptæ’ä»¶å¯ä»¥çœ‹åˆ°AESï¼Œè·Ÿè¿‡å»èƒ½çœ‹åˆ°AESåŠ å¯†æ—¶çš„Sç›’ï¼ˆå…¶å®è¿™é‡Œå‰ä¸¤ä¸ªéƒ½æ˜¯Sç›’ï¼Œç¬¬ä¸‰ä¸ªæ˜¯é€†Sç›’ï¼‰ï¼ŒçŒœæµ‹ç”¨åˆ°äº†AESåŠ å¯†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231128284-246093210.png&quot; alt=&quot;image-20201229195213434&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231128523-1894502838.png&quot; alt=&quot;image-20201229195456197&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¾€ä¸Šå›æº¯æ‰¾åˆ°ä¸»å‡½æ•°&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231128761-1669542994.png&quot; alt=&quot;image-20201229195646671&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ˜¾ç„¶ï¼Œè¿™é‡Œæ˜¯AESåŠ å¯†è¿‡ç¨‹ï¼Œsub_180001100()æ˜¯å¯†é’¥æ‹“å±•è¿‡ç¨‹ï¼Œsub_1800015B0()æ˜¯AESåŠ å¯†ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;3.0857142857143&quot;&gt;
&lt;p&gt;å…³äºé€†å‘ä¸­å„ç§å¸¸è§å¯†ç çš„è®°å½•ï¼ŒæŒ‡è·¯ï¼š&lt;a href=&quot;https://yfli.top/2020/02/18/encrypt_document/#more&quot; target=&quot;_blank&quot;&gt;å¯¹ç§°åŠ å¯†ç®—æ³•&amp;amp;&amp;amp;Hashç®—æ³• æ–‡æ¡£ | feng's blog&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;çœ‹äº†ä¸€ä¸‹æ„Ÿè§‰æ˜¯åŸè£…æ— é­”æ”¹çš„AESï¼Œå¯†æ–‡å¯†é’¥éƒ½ç»™äº†ï¼Œé‚£å°±ç›´æ¥å†™è„šæœ¬è§£å¯†ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„è¿™é‡Œæ˜¯ä»¥æ•´æ•°å½¢å¼ç»™å‡ºçš„ï¼Œåˆ«å¿˜äº†å°ç«¯åºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;from Crypto.Cipher import AES
from binascii import *

arr=[0x16157E2B,0xA6D2AE28,0x8815F7AB,0x3C4FCF09]
key=&quot;&quot;
for i in range(4):
    key=hex(arr[i])[2:]+key
key=unhexlify(key)[::-1] #æ³¨æ„å°ç«¯åºçš„é—®é¢˜
tmp=0x46C42084AA2A1B56E799D643453FF4B5
cipher=unhexlify(hex(tmp)[2:])[::-1]
enc=AES.new(key,AES.MODE_ECB)
print(enc.decrypt(cipher))
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231128971-29831972.png&quot; alt=&quot;image-20201229202801230&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;flag{youcangues}&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;puzzle&quot;&gt;puzzle&lt;/h2&gt;
&lt;p&gt;mipsæ¶æ„ã€‚&lt;/p&gt;
&lt;p&gt;åŠ è½½è¿›idaä»¥åï¼Œé€šè¿‡å­—ç¬¦ä¸²å›æº¯æ‰¾åˆ°ä¸»å‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231129252-305638873.png&quot; alt=&quot;image-20201229203258179&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231129478-891715450.png&quot; alt=&quot;image-20201229203319240&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°å¾ˆæ˜æ˜¾çš„sub_401134()è¿™ä¸ªcheckï¼Œå…ˆå¾€è¿™é‡Œé¢çœ‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231129702-143839534.png&quot; alt=&quot;image-20201229203405086&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;çœ‹åˆ°æ˜¯ä¸€ä¸ªç–‘ä¼¼mazeçš„é€»è¾‘ï¼ˆ&lt;/p&gt;
&lt;p&gt;ä¸è¿‡sub_400FA8()ç‚¹è¿›å»ä»¥åå¯ä»¥çœ‹åˆ°æ˜¯swapçš„åŠŸèƒ½&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231129908-653041770.png&quot; alt=&quot;image-20201229203651570&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥åº”è¯¥ä¸æ˜¯mazeï¼Œæ˜¯ä¸€ä¸ªä»¥äº¤æ¢ä¸ºä¸»çš„é€»è¾‘ã€‚&lt;/p&gt;
&lt;p&gt;è‡³äºdword_4A0010ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯ä¸€ä¸ªä¹ä¸ªæ•°çš„æ•°ç»„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231130147-780275031.png&quot; alt=&quot;image-20201229203733240&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;v4å’Œv5çš„å‡ºå¤„åœ¨switché€»è¾‘ä¸Šé¢ä¸€ç‚¹&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231130359-9491212.png&quot; alt=&quot;image-20201229204029832&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°æœ€å(v4,v5)å…¶å®è¡¨ç¤ºäº†æ•°ç»„é‡Œ0çš„ä½ç½®ï¼Œä¸”æ•°ç»„å®é™…å¯ä»¥çœ‹æˆæ˜¯3*3ã€‚&lt;/p&gt;
&lt;p&gt;å³ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;4 0 3
7 2 6
8 1 5
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æœ€åsub_400FFC()çš„æ£€æŸ¥é€»è¾‘ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231130593-1901948782.png&quot; alt=&quot;image-20201229204442580&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å®é™…ä¸Šå°±æ˜¯è¦è®©è¿™ä¸ª3*3ç­‰äº&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;1 2 3
4 5 6
7 8 0
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æŠŠ0çœ‹æˆç©ºä½çš„è¯ï¼Œå¾ˆå®¹æ˜“å°±æƒ³åˆ°3*3çš„åå®¹é“äº†ã€‚&lt;/p&gt;
&lt;p&gt;ï¼ˆæˆ–è€…ç©ç®—æ³•çš„å°ä¼™ä¼´å¯èƒ½å¯¹å…«æ•°ç é—®é¢˜è¿™ä¸ªåå­—æ›´ç†Ÿæ‚‰ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;s&gt;æœ‰æœ¬äº‹ä¸‹æ¬¡å‡ºæ•°ç»‡å•Šï¼20*20æˆ‘éƒ½ç»™ä½ ç«é€Ÿè§£å‡ºæ¥ï¼ˆæ¥è‡ªæ•°ç»‡çˆ±å¥½è€…çš„åæ§½ï¼‰&lt;/s&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œå®é™…ä¸Šæ˜¯æ±‚æœ€çŸ­èƒ½å¾—åˆ°çš„è·¯å¾„ï¼ˆ15æ­¥ï¼‰ï¼Œæ‡’å¾—æƒ³äº†ï¼Œç›´æ¥å»ç½‘ä¸ŠæŠ“äº†ä¸ªç°æˆä»£ç ä¸‹æ¥æ”¹äº†æ”¹ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;1.6304347826087&quot;&gt;
&lt;p&gt;å…«æ•°ç é—®é¢˜çš„ä»£ç è§ï¼š&lt;a href=&quot;https://blog.csdn.net/lishang6257/article/details/79732420&quot; target=&quot;_blank&quot;&gt;å…«æ•°ç é—®é¢˜-A*(AStar)ç®—æ³•å®ç°_Broken Geeker-CSDNåšå®¢&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cpp&quot;&gt;#include &amp;lt;iostream&amp;gt;
#include &amp;lt;vector&amp;gt;
#include &amp;lt;ctime&amp;gt;
#include &amp;lt;cstdlib&amp;gt;
#define maxState 10000
#define N 3
using namespace std;

bool isEqual(int a[N][N][maxState],int b[N][N],int n){
    for(int i = 0;i &amp;lt; N;i ++){
        for(int j = 0;j &amp;lt; N;j ++){
            if(a[i][j][n] != b[i][j]) return false;
        }
    }
    return true;
}
bool isEqual(int a[N][N],int b[N][N]){
    for(int i = 0;i &amp;lt; N;i ++){
        for(int j = 0;j &amp;lt; N;j ++){
            if(a[i][j] != b[i][j]) return false;
        }
    }
    return true;
}
int evalute(int state[N][N],int target[N][N]){
    int num = 0;
    for(int i = 0;i &amp;lt; N;i ++){
        for(int j = 0;j &amp;lt; N;j ++)
            if(state[i][j] != target[i][j]) num ++;
    }
    return num;
}
void findBrack(int a[N][N],int x,int y){
    for(int i = 0;i &amp;lt; N;i ++){
        for(int j = 0;j &amp;lt; N;j ++){
            if(a[i][j] == 0) {
                x = i;y = j;return;
            }
        }
    }
}
bool move(int a[N][N],int b[N][N],int dir){
    //1 up 2 down 3 left 4 right
    int x = 0,y = 0;
    for(int i = 0;i &amp;lt; N;i ++){
        for(int j = 0;j &amp;lt; N;j ++){
            b[i][j] = a[i][j];
            if(a[i][j] == 0) {
                x = i;y = j;
            }
        }
    }
    if(x == 0 &amp;amp;&amp;amp; dir == 1) return false;
    if(x == N-1 &amp;amp;&amp;amp; dir == 2) return false;
    if(y == 0 &amp;amp;&amp;amp; dir == 3) return false;
    if(y == N-1 &amp;amp;&amp;amp; dir == 4) return false;
    if(dir == 1){b[x-1][y] = 0;b[x][y] = a[x-1][y];}
    else if(dir == 2){b[x+1][y] = 0;b[x][y] = a[x+1][y];}
    else if(dir == 3){b[x][y-1] = 0;b[x][y] = a[x][y-1];}
    else if(dir == 4){b[x][y+1] = 0;b[x][y] = a[x][y+1];}
    else return false;
    return true;
}
void statecpy(int a[N][N][maxState],int b[N][N],int n){
    for(int i = 0;i &amp;lt; N;i ++){
        for(int j = 0;j &amp;lt; N;j ++){
            a[i][j][n] = b[i][j];
        }
    }
}
void getState(int a[N][N][maxState],int b[N][N],int n){
    for(int i = 0;i &amp;lt; N;i ++){
        for(int j = 0;j &amp;lt; N;j ++){
            b[i][j] = a[i][j][n];
        }
    }
}
void statecpy(int a[N][N],int b[N][N]){
    for(int i = 0;i &amp;lt; N;i++){
        for(int j = 0;j &amp;lt; N;j++)
            a[i][j] = b[i][j];
    }
}
int checkAdd(int a[N][N][maxState],int b[N][N],int n){
    for(int i = 0;i &amp;lt; n;i ++){
        if(isEqual(a,b,i)) return i;
    }
    return -1;
}
int Astar(int a[N][N][maxState],int start[N][N],int target[N][N],int path[maxState]){
    bool visited[maxState] = {false};
    int fitness[maxState] = {0};
    int passLen[maxState] = {0};
    int curpos[N][N];
    statecpy(curpos,start);
    int id = 0,Curid = 0;
    fitness[id] = evalute(curpos,target);
    statecpy(a,start,id++);
    while(!isEqual(curpos,target)){
        for(int i = 1;i &amp;lt; 5;i ++){//å‘å››å‘¨æ‰¾æ–¹å‘
            int tmp[N][N] = {0};
            if(move(curpos,tmp,i)){
                int state = checkAdd(a,tmp,id);
                if(state == -1){//not add
                    path[id] = Curid;
                    passLen[id] = passLen[Curid] + 1;
                    fitness[id] = evalute(tmp,target) + passLen[id];
                    statecpy(a,tmp,id++);
                }else{//add
                    int len = passLen[Curid] + 1,fit = evalute(tmp,target) + len;
                    if(fit &amp;lt; fitness[state]){
                        path[state] = Curid;
                        passLen[state] = len;
                        fitness[state] = fit;
                        visited[state] = false;
                    }
                }
            }
        }
        visited[Curid] = true;
        //æ‰¾åˆ°é€‚åº”åº¦æœ€å°çš„æœ€ä¸ºä¸‹ä¸€ä¸ªå¸¦æœç´¢èŠ‚ç‚¹
        int minCur = -1;
        for(int i = 0;i &amp;lt; id;i ++)
            if(!visited[i] &amp;amp;&amp;amp; (minCur == -1 || fitness[i] &amp;lt; fitness[minCur])) minCur = i;
        Curid = minCur;
        getState(a,curpos,Curid);
        if(id == maxState) return -1;
    }
    return Curid;
}
void show(int a[N][N][maxState],int n){
    cout &amp;lt;&amp;lt; &quot;-------------------------------\n&quot;;
    for(int i = 0;i &amp;lt; N;i ++){
        for(int j =0;j &amp;lt; N;j ++){
            cout &amp;lt;&amp;lt; a[i][j][n] &amp;lt;&amp;lt; &quot; &quot;;
        }
        cout &amp;lt;&amp;lt; endl;
    }
    cout &amp;lt;&amp;lt; &quot;-------------------------------\n&quot;;
}
int calDe(int a[N][N]){
    int sum = 0;
    for(int i = 0;i &amp;lt; N*N;i ++){
        for(int j = i+1;j &amp;lt; N*N;j ++){
            int m,n,c,d;
            m = i/N;n = i%N;
            c = j/N;d = j%N;
            if(a[c][d] == 0) continue;
            if(a[m][n] &amp;gt; a[c][d]) sum ++;
        }
    }
    return sum;
}
void autoGenerate(int a[N][N]){
    int maxMove = 50;
    srand((unsigned)time(NULL));
    int tmp[N][N];
    while(maxMove --){
        int dir = rand()%4 + 1;
        if(move(a,tmp,dir)) statecpy(a,tmp);
    }
}
int main(){
    int a[N][N][maxState] = {0};
    // int start[N][N] = {1,2,3,4,5,6,7,8,0};
    // autoGenerate(start);
    // cout &amp;lt;&amp;lt; start[0][0] &amp;lt;&amp;lt; start[1][1];
    int start[N][N] = {4,0,3,7,2,6,8,1,5};
    int target[N][N] = {1,2,3,4,5,6,7,8,0};
    if(!(calDe(start)%2 == calDe(target)%2)){
        cout &amp;lt;&amp;lt; &quot;æ— è§£\n&quot;;
        return 0;
    }
    int path[maxState] = {0};
    int res =  Astar(a,start,target,path);
    if(res == -1){
        cout &amp;lt;&amp;lt; &quot;è¾¾åˆ°æœ€å¤§æœç´¢èƒ½åŠ›\n&quot;;
        return 0;
    }
    int shortest[maxState] = {0},j = 0;
    while(res != 0){
        shortest[j++] = res;
        res = path[res];
    }
    cout &amp;lt;&amp;lt; &quot;ç¬¬ 0 æ­¥\n&quot;;
    show(a,0);
    for(int i = j - 1;i &amp;gt;= 0;i --){
        cout &amp;lt;&amp;lt; &quot;ç¬¬ &quot; &amp;lt;&amp;lt; j-i &amp;lt;&amp;lt; &quot; æ­¥\n&quot;;
        show(a,shortest[i]);
    }
    return 0;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¾—åˆ°æ¯ä¸€æ­¥çš„æƒ…å†µï¼Œè¿›è€Œæ ¹æ®switchå†™å‡ºè·¯å¾„ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;ç¬¬ 0 æ­¥
-------------------------------
4 0 3
7 2 6
8 1 5
-------------------------------
ç¬¬ 1 æ­¥
-------------------------------
4 2 3
7 0 6
8 1 5
-------------------------------
ç¬¬ 2 æ­¥
-------------------------------
4 2 3
7 1 6
8 0 5
-------------------------------
ç¬¬ 3 æ­¥
-------------------------------
4 2 3
7 1 6
8 5 0
-------------------------------
ç¬¬ 4 æ­¥
-------------------------------
4 2 3
7 1 0
8 5 6
-------------------------------
ç¬¬ 5 æ­¥
-------------------------------
4 2 0
7 1 3
8 5 6
-------------------------------
ç¬¬ 6 æ­¥
-------------------------------
4 0 2
7 1 3
8 5 6
-------------------------------
ç¬¬ 7 æ­¥
-------------------------------
4 1 2
7 0 3
8 5 6
-------------------------------
ç¬¬ 8 æ­¥
-------------------------------
4 1 2
7 5 3
8 0 6
-------------------------------
ç¬¬ 9 æ­¥
-------------------------------
4 1 2
7 5 3
0 8 6
-------------------------------
ç¬¬ 10 æ­¥
-------------------------------
4 1 2
0 5 3
7 8 6
-------------------------------
ç¬¬ 11 æ­¥
-------------------------------
0 1 2
4 5 3
7 8 6
-------------------------------
ç¬¬ 12 æ­¥
-------------------------------
1 0 2
4 5 3
7 8 6
-------------------------------
ç¬¬ 13 æ­¥
-------------------------------
1 2 0
4 5 3
7 8 6
-------------------------------
ç¬¬ 14 æ­¥
-------------------------------
1 2 3
4 5 0
7 8 6
-------------------------------
ç¬¬ 15 æ­¥
-------------------------------
1 2 3
4 5 6
7 8 0
-------------------------------

6 å·¦
2 ä¸Š
4 å³
8 ä¸‹
// 884226886224488
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è·¯å¾„ä¸ºâ€œ884226886224488â€ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥çœ‹ä¸»å‡½æ•°é‡Œcheckä¸Šé¢çš„éƒ¨åˆ†ï¼Œçœ‹åˆ°sub_409070()å®é™…ä¸Šæ˜¯ä¸€ä¸ªscanfï¼Œè€Œdword_4A1B60æ˜¯æˆ‘ä»¬çš„è¾“å…¥ï¼Œä¹Ÿå°±æ˜¯æœ€åçš„flagï¼Œä¸­é—´å¯¹è¾“å…¥è¿›è¡Œå¤„ç†ä»¥åæ‰å¾—åˆ°â€œ884226886224488â€è¿™ä¸ªå­—ç¬¦ä¸²ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨é‡Œé¢ç¿»å¯ä»¥ç¿»åˆ°ä¸€ä¸ªsub_400B58()ï¼ŒçŒœæµ‹æ˜¯base64æ¢è¡¨ç¼–ç ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231130873-781443123.png&quot; alt=&quot;image-20201229205535378&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;äºæ˜¯å°è¯•å†™è„šæœ¬ç¼–ç ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;import base64
b64table=&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&quot;
mytable=&quot;&quot;
offset=-18
for i in range(len(b64table)):
    mytable+=b64table[(i+offset)%len(b64table)]
text=&quot;884226886224488&quot;.encode()
cipher=base64.b64encode(text).decode().translate(str.maketrans(b64table,mytable))
print(cipher)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231131271-1156274033.png&quot; alt=&quot;image-20201229210535246&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¯•è¯•èƒ½ä¸èƒ½è¿‡checkã€‚&lt;/p&gt;
&lt;p&gt;wslè¿è¡Œï¼šï¼ˆè¦è£…qemuæ‰èƒ½æ‰§è¡Œï¼Œæ¯•ç«Ÿç‰¹æ®Šæ¶æ„ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;cp $(which qemu-mips) .
./qemu-mips -L . ./puzzle
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ‰§è¡Œmipsç¨‹åºï¼Œè¾“å…¥è„šæœ¬ä¸­è§£å‡ºçš„å­—ç¬¦ä¸²ï¼Œå‘ç°æˆåŠŸäº†ï¼Œget flagã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231131488-1607244702.png&quot; alt=&quot;image-20201229210455631&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;flag{8xOi6R2k8xOk6R2i7xOm}&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;arm&quot;&gt;aRm&lt;/h2&gt;
&lt;p&gt;armæ¶æ„ã€‚&lt;/p&gt;
&lt;p&gt;ç…§ä¾‹é€šè¿‡å­—ç¬¦ä¸²å›æº¯æ‰¾åˆ°ä¸»å‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231131753-1021300930.png&quot; alt=&quot;image-20201229220910936&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231131984-1401341208.png&quot; alt=&quot;image-20201229222635806&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;v1æ˜¯keyï¼Œv9æ˜¯è¾“å…¥çš„flagï¼Œå¯¹è¾“å…¥çš„é™åˆ¶å°±æ˜¯é•¿åº¦ä¸º42ä¸”å¤´å°¾æ˜¯â€œflag{â€å’Œâ€œ}â€ã€‚&lt;/p&gt;
&lt;p&gt;åŠ¨æ€è°ƒä¸€ä¸‹å¯ä»¥å‘ç°ï¼Œsub_27770()è¿™ä¸ªå‡½æ•°å®é™…ä¸Šæ˜¯æŠŠunk_723A0æ•°ç»„é‡Œçš„42ä¸ªæ•°æ®å¤åˆ¶åˆ°v8é‡Œã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;./qemu-arm -L ./ -g 12345 ./aRm
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ï¼ˆDebuggeré€‰Remote GDB debuggerï¼ŒæŠŠç«¯å£å·å¡«ä¸Šå°±å¥½ï¼Œå…¶ä½™é…ç½®å…·ä½“è§&lt;a href=&quot;https://c10udlnk.top/2020/12/14/reSkillsOn-Debugging/&quot; target=&quot;_blank&quot;&gt;REå¥—è·¯ - å…³äºä½¿ç”¨IDA 7.0å‰ç«¯è¿›è¡Œçš„åŠ¨æ€è°ƒè¯• | c10udlnk_Log&lt;/a&gt;ä¸­è°ƒè¯•elféƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬æœªçŸ¥çš„æ•°å°±å‰©v5å’Œv6äº†ï¼Œv5è¦çœ‹sub_1714C()çš„è¾“å‡ºï¼Œv6è¿™é‡Œç›¸å½“äºæ˜¯42æ¡42å…ƒä¸€æ¬¡æ–¹ç¨‹ç»„ï¼ˆè¾“å…¥æœªçŸ¥çš„æƒ…å†µä¸‹ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è€Œsub_105B4()æ˜¯è¾“å‡º42ä¸ªç»“æœï¼Œäºæ˜¯å¯ä»¥çŸ¥é“åªè¦è¾“å‡ºäº†output.txté‡Œçš„42ä¸ªæ•°å°±æ˜¯æ­£ç¡®çš„flagäº†ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºå‰é¢æœ‰ä¸€ä¸ªsub_169AC(key)ï¼Œè¿™è¾¹åˆæ˜¯ä¸€ä¸ªæ— å‚çš„sub_1714C()+1ï¼Œäºæ˜¯çŒœæµ‹æ˜¯srand(seed)å’Œrand()ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è¯æ˜çŒœæµ‹ï¼Œå¤šæ¬¡è¿è¡Œç¨‹åºè¾“å…¥åŒä¸€ä¸ªkeyå’Œç›¸åŒ/ä¸åŒçš„flagï¼Œå‘ç°æ¯ä¸€æ¬¡çš„v5æ˜¯ä¸€æ ·çš„ï¼Œç»“åˆrand()çš„ä¼ªéšæœºæ€§ï¼Œç¡®å®šè¿™å°±æ˜¯éšæœºå‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºkeyåªæœ‰ä¸€å­—èŠ‚ï¼ˆ0~255ï¼‰ï¼Œå¹²è„†ç›´æ¥çˆ†ç ´ã€‚æŠŠoutput.txtçš„æ•°æ®è¯»å…¥ï¼Œç”¨sympyåº“è§£æ–¹ç¨‹ï¼Œåªè¦ç¬¬ä¸€ä¸ªè§£x0ç­‰äº&lt;code&gt;ord('f')^v8[0]=102^0xA0=198&lt;/code&gt;ï¼Œå°±è¯´æ˜è¿™ä¸ªkeyæœ‰æå¤§å¯èƒ½æ€§æ˜¯æ­£ç¡®çš„keyã€‚&lt;/p&gt;
&lt;p&gt;å½“ç„¶ï¼Œåœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å¾—å…ˆçŸ¥é“æ¯ä¸€æ¬¡çš„v5ï¼ˆå³æ–¹ç¨‹çš„ç³»æ•°ï¼‰æ˜¯å¤šå°‘ã€‚&lt;/p&gt;
&lt;p&gt;äºæ˜¯hookå‡½æ•°ï¼Œåœ¨v5ç”Ÿæˆä¹‹åå¤ç”¨ç¨‹åºåŸæ¥å°±æœ‰çš„printå‡½æ•°åŠæ ¼å¼ç¬¦ï¼ŒæŠŠæ¯æ¬¡ç”Ÿæˆçš„v5éƒ½æ‰“å°å‡ºæ¥ã€‚&lt;/p&gt;
&lt;p&gt;è¿˜è®°å¾—æœ‰ä¸ªå‡½æ•°æ˜¯å¯ä»¥è¾“å‡ºå…«ä½åå…­è¿›åˆ¶æ•°çš„å§ï¼Œå°±æ˜¯é‚£ä¸ªsub_105B4()ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨è¿™é‡Œé¢çš„printfï¼Œç„¶åæŠŠè°ƒç”¨è¿™ä¸ªå‡½æ•°çš„åœ°æ–¹nopæ‰ï¼ˆç›®æ ‡è¦æ˜ç¡®ï¼Œç°åœ¨æ˜¯ä¸ºäº†çˆ†ç ´keyï¼Œæ²¡å¿…è¦ç®¡ç¨‹åºçš„æ­£å¸¸æ€§hahahï¼‰ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;æœ¬æ¥æ˜¯æƒ³è‡ªå·±å †ä¸ªè°ƒç”¨printfå‡ºæ¥çš„ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆkeypatchå¯¹&lt;code&gt;LDR R0, =a08x&lt;/code&gt;è§£é‡Šä¸äº†ï¼Œäºæ˜¯åªå¥½ç»•ä¸ªå°è·¯äº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231132274-1923711696.png&quot; alt=&quot;image-20201230134100558&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è½¬åˆ°æ±‡ç¼–çª—å£ï¼Œè®°ä¸€ä¸‹è¿™é‡Œçš„locï¼Œç­‰ä¼šè¦è·³è¿‡æ¥çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231132494-877047308.png&quot; alt=&quot;image-20201230134235154&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;çœ‹å›å»åŸæ¥äºŒé‡å¾ªç¯é‡Œå‡ºv5é‚£ä¸ªåœ°æ–¹&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231132734-938607639.png&quot; alt=&quot;image-20201230134326684&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿™å‡ æ¡è¯­å¥çš„æ„æ€å°±æ˜¯f5é‡Œé¢çš„é‚£è¡Œ&lt;code&gt;v5 = (unsigned __int8)(sub_1714C() + 1);&lt;/code&gt;ï¼Œæˆ‘ä»¬ä»å†ä¸‹ä¸€è¡Œå¼€å§‹æ”¹ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„å¯ä»¥æ”¹çš„èŒƒå›´åœ¨è“æ¡†è¿™é‡Œï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸éœ€è¦çš„&lt;code&gt;v6[j] += (unsigned __int8)v9[k] * v5;&lt;/code&gt;ï¼Œåœ¨è¿™ä¸ªèŒƒå›´é‡Œå¯ä»¥å°½æƒ…ä¿®æ”¹ï¼Œå‰©ä¸‹çš„nopæ‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231132983-1952569576.png&quot; alt=&quot;image-20201230134904926&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç”¨keypatchç›´æ¥è¾“å…¥æ±‡ç¼–ï¼Œpatchåé¢çš„è¯­å¥ä¸º&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231133216-2013697483.png&quot; alt=&quot;image-20201230135257443&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ï¼ˆå…¶å®å°±æ˜¯æ”¹äº†ä¸€è¡Œ&lt;code&gt;B loc_105D4&lt;/code&gt;ï¼Œå‰©ä¸‹çš„ç›´æ¥Fill with NOPså°±å¥½ï¼‰&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥å»å¾€loc_105D4ï¼Œæ”¹é€ ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬çŸ¥é“ï¼Œç°åœ¨R3å¯„å­˜å™¨é‡Œå®é™…ä¸Šå­˜çš„æ˜¯v5çš„å€¼ï¼Œæˆ‘ä»¬è°ƒç”¨printfç›´æ¥è¾“å‡ºR3çš„å€¼å°±èƒ½è¾¾æˆç›®æ ‡ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ARMæ±‡ç¼–é‡Œï¼Œå‡½æ•°ä¼ å‚ç”¨R0ã€R1â€¦â€¦æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œç»™R1ä¸€ä¸ªR3çš„å€¼å°±å¥½ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231133413-398089151.png&quot; alt=&quot;image-20201230135756039&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæœ¬æ¥å°±æ˜¯&lt;code&gt;MOV R1, R3&lt;/code&gt;ä¸ç”¨æ”¹ï¼Œæ‰€ä»¥ç›´æ¥æŠŠå‰é¢nopæ‰ã€‚&lt;/p&gt;
&lt;p&gt;å› ä¸ºv5é‚£é‡Œæ˜¯å–(unsigned __int8)ï¼Œæ‰€ä»¥æŠŠè¿™é‡Œæ”¹ä¸€ä¸‹ï¼ŒæŠŠ&quot;%08x&quot;æ”¹æˆ&quot;%02x&quot;ï¼Œå°±æ˜¯å‡ºæ¥çš„v5ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231133641-1175617951.png&quot; alt=&quot;image-20201230141148584&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;åˆ«å¿˜äº†åé¢è¿˜è¦è·³å›å»ï¼Œæ‰¾åˆ°åœ°å€ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231134012-1354607358.png&quot; alt=&quot;image-20201230140112007&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;patchï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231134364-1510036830.png&quot; alt=&quot;image-20201230140621270&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è®°å¾—æŠŠè°ƒç”¨sub_105B4()çš„åœ°æ–¹ä¹Ÿnopæ‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231134607-791664511.png&quot; alt=&quot;image-20201230140838366&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æœ€åæŠŠpatchçš„å­—èŠ‚ä¿å­˜ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231134822-1627344499.png&quot; alt=&quot;image-20201230140754908&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿è¡Œæµ‹è¯•ä¸€ä¸‹ï¼Œæœ‰ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231135025-755564000.png&quot; alt=&quot;image-20201230142921253&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;okï¼ŒhookæˆåŠŸï¼Œå¼€å§‹çˆ†ç ´ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;5.2181818181818&quot;&gt;
&lt;p&gt;ç”¨pexpectè¿›è¡Œæ‰¹é‡çš„è‡ªåŠ¨åŒ–äº¤äº’è§ï¼š&lt;a href=&quot;https://c10udlnk.top/2020/12/28/wpFor-2020chamd5XMAS/&quot; target=&quot;_blank&quot;&gt;ã€wpã€‘2020ChaMd5åœ£è¯é¢˜ | c10udlnk_Log&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¤šäºäº†å‘¨äº”åšçš„é‚£ä¸ªé¢˜ï¼Œæ‰æœ‰äº†è¿™ä¸ªé¢˜çš„çˆ†ç ´è„šæœ¬ï¼ˆDogeã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;import pexpect
from sympy import *

data=[]
with open('output.txt','r') as f:
    tmp=f.read().split('\r\n')
    data=[int(x,16) for x in tmp]
src=[0xA0, 0xE4, 0xBA, 0xFB, 0x10, 0xDD, 0xAC, 0x65, 0x8D, 0x0B, 0x57, 0x1A, 0xE4, 0x28, 0x96, 0xB3, 0x0C, 0x79, 0x4D, 0x80, 0x90, 0x99, 0x58, 0xFE, 0x50, 0xD3, 0xF9, 0x3C, 0x0F, 0xC1, 0xE3, 0xA6, 0x39, 0xC3, 0x28, 0x75, 0xF8, 0xC9, 0xC8, 0xCD, 0x78, 0x26]
flag='flag{000000000000000000000000000000000000}'

var=[]
for num in range(42):
    exec(&quot;x&quot;+str(num)+&quot;=Symbol('x'+str(num))&quot;)
    var.append(&quot;x&quot;+str(num)) #åˆ›å»º42ä¸ªå˜é‡x0~x41
for i in range(256):
    r=pexpect.spawn('./qemu-arm -L ./ ./aRm_getRand')
    r.sendline(str(i))
    r.sendline(flag)
    r.readline()
    r.readline()
    rand=[]
    for j in range(42*42):
        s=r.readline()
        rand.append(int(str(s)[2:-5],16))
    r.wait()
    exper=[]
    for j in range(42):
        anEx=&quot;&quot;
        for k in range(42):
            anEx+=str(rand[j*42+k])+&quot;*&quot;+var[k]+&quot;+&quot;
        anEx=anEx[:-1]+&quot;-&quot;+str(data[j])
        exper.append(anEx)
    res=solve(exper,var)
    print(str(i)+&quot;: &quot;)
    print(res.values())
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;çˆ†ç ´å¾—åˆ°ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231135267-1176964483.png&quot; alt=&quot;image-20201228135416441&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¯çŸ¥keyæ˜¯82ï¼Œè€Œv9åœ¨xorä»¥åçš„æ•°ç»„ä¹Ÿçˆ†å‡ºæ¥äº†ï¼Œç®€å•xorå¾—flagï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;arr=[0xA0, 0xE4, 0xBA, 0xFB, 0x10, 0xDD, 0xAC, 0x65, 0x8D, 0x0B, 0x57, 0x1A, 0xE4, 0x28, 0x96, 0xB3, 0x0C, 0x79, 0x4D, 0x80, 0x90, 0x99, 0x58, 0xFE, 0x50, 0xD3, 0xF9, 0x3C, 0x0F, 0xC1, 0xE3, 0xA6, 0x39, 0xC3, 0x28, 0x75, 0xF8, 0xC9, 0xC8, 0xCD, 0x78, 0x26]
x=[198, 136, 219, 156, 107, 228, 152, 7, 239, 63, 97, 127, 134, 5, 247, 131, 109, 75, 96, 180, 241, 173, 57, 211, 49, 224, 157, 9, 34, 243, 129, 199, 1, 244, 31, 17, 157, 171, 252, 249, 64, 91]
flag=&quot;&quot;
for i in range(42):
    flag+=chr(x[i]^arr[i])
print(flag)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231135506-1315518990.png&quot; alt=&quot;image-20201230002706300&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;flag{94bb46eb-a0a2-4a4a-a3d5-2ba877deb448}&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;pe&quot;&gt;pe&lt;/h2&gt;
&lt;p&gt;armæ¶æ„ï¼Œæ²¡ç¯å¢ƒè°ƒä¸åŠ¨ï¼Œåªèƒ½ç¡¬çœ‹äº†XDã€‚è¿™é¢˜æœ‰å¥½å¤šå¥‡æ€ªçš„å‡½æ•°ï¼Œè€Œä¸”é€šè¿‡ä¼ªä»£ç è·Ÿçš„è¯å°±èƒ½çœ‹åˆ°å‡½æ•°å¥—å‡½æ•°å¥—å‡½æ•°â€¦â€¦æ‰€ä»¥åŸºæœ¬é çŒœå‡ºæ¥çš„ï¼ˆ&lt;/p&gt;
&lt;p&gt;ç»§ç»­é€šè¿‡å­—ç¬¦ä¸²å›æº¯æ‰¾ä¸»å‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231135729-917943359.png&quot; alt=&quot;image-20201230004038936&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231135969-340384244.png&quot; alt=&quot;image-20201230004436275&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ ¹æ®å‚æ•°çŒœæµ‹ï¼Œsub_1400023C8()æ˜¯strcmp()çš„ä½œç”¨ï¼Œæˆ‘ä»¬éœ€è¦è®©v9=&quot;KIMLXDWRZXTHXTHQTXTXHZWC&quot;ã€‚&lt;/p&gt;
&lt;p&gt;å†å¾€ä¸Šèµ°ï¼Œsub_1400015B0è¿™ä¸ªå‡½æ•°è°ƒç”¨äº†v9ï¼Œäºæ˜¯è·Ÿè¿›å»çœ‹åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202012/2183122-20201230231136345-1780338312.png&quot; alt=&quot;image-20201230085247002&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ„Ÿè§‰æ˜¯æŸç§åŠ å¯†ï¼Œä»¥ç›¸é‚»çš„ä¸¤å­—ç¬¦ä¸ºä¸€ç»„ï¼Œå¯¹è¿™ä¸¤ä¸ªå­—ç¬¦åšç›¸åŒçš„æ“ä½œï¼Œå†åšåç»­å¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;è·Ÿè¿›sub_1400012B8()é‡Œçœ‹ï¼Œå¯ä»¥çœ‹åˆ°å¤§æ¦‚æ˜¯ä¸€ä¸ªæœç´¢çš„è¿‡ç¨‹&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202101/2183122-20210101011122099-1501303818.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä¸ç­‰äº-1å°±è¯´æ˜åœ¨è¡¨ä¸­æ‰¾åˆ°äº†è¿™ä¸ªå…ƒç´ ï¼Œç„¶åè¿”å›ä¸€ä¸ªç´¢å¼•ï¼ˆï¼Ÿ&lt;/p&gt;
&lt;p&gt;å†å¾€ä¸‹çœ‹å¥½åƒå°±çœ‹ä¸å¤ªæ‡‚äº†ï¼Œç„¶åå°±æ˜¯ç„å­¦çš„çŒœçŒœçŒœ= =&lt;/p&gt;
&lt;p&gt;å›å»çœ‹stringå¯ä»¥çœ‹åˆ°ä¸€ä¸ªè¿™ä¸ªï¼ŒçŒœæµ‹æ˜¯å¯†é’¥è¡¨ä¹‹ç±»çš„ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202101/2183122-20210101011140817-1334478957.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¾€ä¸Šå›æº¯ä¹Ÿçœ‹ä¸åˆ°ä»€ä¹ˆçº¿ç´¢ï¼Œä¸è¿‡å¯ä»¥å‘ç°è¿™25ä¸ªæ•°å­—åˆšå¥½æ²¡æœ‰ç›¸åŒçš„ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨æ€»ç»“ä¸€ä¸‹è¿™ä¸ªå¤å…¸åŠ å¯†ç®—æ³•çš„ç‰¹ç‚¹ï¼Œå¤§æ¦‚æ˜¯ä¸¤ä¸ªä¸ºä¸€ç»„å¤„ç†+å·²å®šä¹‰çš„å¯†é’¥è¡¨ï¼ˆå³ä¸æ˜¯é€šè¿‡è¾“å…¥ç”Ÿæˆçš„ï¼‰5*5+å¤„ç†æ—¶ç”¨åˆ°ç´¢å¼•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;s&gt;å¾ˆä¹…å¾ˆä¹…ä»¥å‰æƒ³å†™æŸå¯¹cpçš„AUåŒäººæ—¶æƒ³æŠŠctfå…ƒç´ æ··è¿›å»ï¼Œå°±çœ‹äº†å¾ˆå¤šç®€å•åˆå¥‡å¥‡æ€ªæ€ªçš„ç¼–ç /å¤å…¸å¯†ç ï¼ˆç°ä»£å¯†ç å¤ªå­¦æœ¯äº†XDï¼‰ï¼Œæ²¡æƒ³åˆ°ç°åœ¨æœ‰ç”¨æ­¦ä¹‹åœ°äº†ï¼ˆæ‰‹åŠ¨ç‹—å¤´ã€‚&lt;/s&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;2.3669724770642&quot;&gt;
&lt;p&gt;å®‰åˆ©ä¸€ä¸ªç¼–ç /å¤å…¸å¯†ç çš„é›†åˆï¼š&lt;a href=&quot;https://www.cnblogs.com/mq0036/p/6544055.html&quot; target=&quot;_blank&quot;&gt;CTFä¸­é‚£äº›è„‘æ´å¤§å¼€çš„ç¼–ç å’ŒåŠ å¯† - jack_Meng - åšå®¢å›­&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç„¶åç¿»åˆ°äº†ä¸€ä¸ªç¬¦åˆè¿™ä¸ªç‰¹ç‚¹çš„å¯†ç ï¼ŒPlayfair Cipherï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202101/2183122-20210101011208375-1969638470.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¸åŒçš„æ˜¯å¯†ç è¡¨æ˜¯ç›´æ¥ç»™å‡ºçš„ï¼Œä¸è¿‡åŠ å¯†æµç¨‹å†å¯¹å›idaé‡Œçš„åç¼–è¯‘æ„Ÿè§‰æŒºåƒçš„ï¼Œäºæ˜¯æœæ–­è¯•è¯•ã€‚&lt;/p&gt;
&lt;p&gt;æŒ‰ç…§Playfair Cipherçš„åŠ è§£å¯†æµç¨‹å†™å‡ºè„šæœ¬ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;def getIndex(c):
    for i in range(len(key)):
        if key[i].find(c)!=-1:
            return i,key[i].find(c)
letter_list=&quot;ABCDEFGHJKLMNOPQRSTUVWXYZ&quot;
key=[&quot;CREIH&quot;,&quot;TQGNU&quot;,&quot;AOVXL&quot;,&quot;DZKYM&quot;,&quot;PBWFS&quot;]
cipher=&quot;KIMLXDWRZXTHXTHQTXTXHZWC&quot;
text=&quot;&quot;
for i in range(0,len(cipher),2):
    j=i+1
    x1,y1=getIndex(cipher[i])
    x2,y2=getIndex(cipher[j])
    if x1==x2:
        text+=key[x1][(y1+1)%5]+key[x2][(y2+1)%5]
    elif y1==y2:
        text+=key[(x1+1)%5][y1]+key[(x2+1)%5][y2]
    else:
        text+=key[x1][y2]+key[x2][y1]
    i+=2
print(text)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;èµ°ä¸€éè„šæœ¬è§£å¯†å¯ä»¥å¾—åˆ°ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2183122/202101/2183122-20210101011230028-902871151.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;YES MAYBE YOU CAN RUN AN ARM PE&lt;/p&gt;
&lt;p&gt;&lt;s&gt;No, I can't ğŸ˜¦&lt;/s&gt;&lt;/p&gt;
&lt;p&gt;çœ‹èµ·æ¥èƒ½è¯»çš„é€šï¼ŒæˆåŠŸget flagã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;flag{YESMAYBEYOUCANRUNANARMPE}&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;crash&quot;&gt;crash&lt;/h2&gt;
&lt;p&gt;&lt;s&gt;å…ˆå»è‚ddlå›æ¥å†è¡¥ï¼Œåæ­£å°±æ˜¯ä¸ªæŸ¥md5çš„é¢˜ï¼ˆ&lt;/s&gt;&lt;/p&gt;
&lt;/div&gt;</description>
<pubDate>Thu, 31 Dec 2020 15:42:00 +0000</pubDate>
<dc:creator>c10udlnk</dc:creator>
<og:description>å‰å‡ å¤©çš„XCTFæœ€åä¸€åœºç»ˆäºæ‰“å®Œäº†ï¼Œä¸‰åœºæ¯”èµ›ä¸‹æ¥å¯¹é€†å‘éƒ¨åˆ†çš„å¤§æ¦‚æ„Ÿè§‰æ˜¯ä»ç¬¬ä¸€åœºçš„å•¥éƒ½ä¸ä¼šåšï¼ˆä¸€é“lua+ä¸€é“apkï¼‰åˆ°åæ¥çš„ç»ˆäºèƒ½æœ‰å‚ä¸åº¦ï¼Œè‡³å°‘åä¸¤åœºçš„é¢˜ç›®éƒ½æ˜¯pcé€†å‘ï¼Œè™½ç„¶ç‰¹æ®Šæ¶æ„ä½†å¥½æ­¹èƒ½åšï¼ˆtcl</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/c10udlnk/p/14214080.html</dc:identifier>
</item>
<item>
<title>æ‰‹å†™ç³»åˆ—ï¼šcallã€applyã€bindã€å‡½æ•°æŸ¯é‡ŒåŒ– - wangmeijian</title>
<link>http://www.cnblogs.com/wangmeijian/p/14219155.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/wangmeijian/p/14219155.html</guid>
<description>&lt;p&gt;å°‘åºŸè¯ï¼Œshow my code&lt;/p&gt;
&lt;h2 id=&quot;call&quot;&gt;call&lt;/h2&gt;
&lt;p&gt;åŸç†éƒ½åœ¨æ³¨é‡Šé‡Œäº†&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;// ä¸è¦†ç›–åŸç”Ÿcallæ–¹æ³•ï¼Œèµ·ä¸ªåˆ«åå«myCallï¼Œæ¥æ”¶thisä¸Šä¸‹æ–‡contextå’Œå‚æ•°params
Function.prototype.myCall = function (context, ...params) {
  // contextå¿…é¡»æ˜¯ä¸ªå¯¹è±¡å¹¶ä¸”ä¸èƒ½ä¸ºnullï¼Œé»˜è®¤ä¸ºwindow
  const _this = typeof context === &quot;object&quot; ? context || window : window;
  // ä¸ºäº†é¿å…å’ŒåŸæœ‰å±æ€§å†²çªï¼Œå®šä¹‰ä¸€ä¸ªSymbolç±»å‹çš„å±æ€§
  const key = Symbol();
  // callæ–¹æ³•çš„ç›®çš„æ˜¯æ”¹å˜å‡½æ•°çš„thisæŒ‡å‘ï¼Œå‡½æ•°çš„thisæŒ‡å‘å®ƒçš„è°ƒç”¨è€…ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ”¹å˜å‡½æ•°çš„è°ƒç”¨è€…ã€‚
  // ä¸‹é¢çš„thiså°±æ˜¯å‡½æ•°æœ¬èº«ï¼Œç»™contextå¢åŠ ä¸€ä¸ªåä¸º[key]çš„æ–¹æ³•æŒ‡å‘thisï¼Œå°±èƒ½ç”¨contextæ¥è°ƒç”¨thisäº†
  context[key] = this;
  const result = _this[key](...params);
  // è·å–å‡½æ•°æ‰§è¡Œç»“æœåï¼Œåˆ é™¤ä»¥ä¸Šæ·»åŠ çš„å±æ€§
  delete context[key];
  return result;
};
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;apply&quot;&gt;apply&lt;/h2&gt;
&lt;p&gt;å’Œcallçš„åŒºåˆ«åœ¨äºç¬¬äºŒä¸ªå‚æ•°&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;Function.prototype.myApply = function (context, params) {
  return this.myCall(context, ...params);
};
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;bind&quot;&gt;bind&lt;/h2&gt;
&lt;p&gt;å’Œcallçš„åŒºåˆ«åœ¨äºä¸ç«‹å³æ‰§è¡Œï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°å³å¯&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;Function.prototype.myBind = function (context, ...params) {
  const _this = this;
  // è¿”å›çš„å‡½æ•°ä¹Ÿèƒ½æ¥æ”¶å‚æ•°ï¼Œä½†æ˜¯æ˜¯æ”¾åœ¨paramsåé¢
  return function (...args) {
    return _this.myCall(context, ...[...params, ...args]);
  };
};
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;å‡½æ•°æŸ¯é‡ŒåŒ–&quot;&gt;å‡½æ•°æŸ¯é‡ŒåŒ–&lt;/h2&gt;
&lt;p&gt;å‡½æ•°æŸ¯é‡ŒåŒ–ï¼Œä¸¾ä¾‹ï¼Œæœ‰å¦‚ä¸‹å‡½æ•°&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;function test(a, b, c, d, e) {
  console.log(a + b + c + d + e);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æœ‰ä¸€ä¸ªcurryè½¬æ¢å‡½æ•°å¯¹testå‡½æ•°è¿›è¡Œä¸€äº›è½¬æ¢&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;function curry(){
  // todo
}
const transformTest = curry(test, ...args)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è½¬æ¢ä¹‹åï¼ŒåŸæœ¬ä¸€æ¬¡æ€§ä¼ è¿‡å»çš„å‚æ•°ç°åœ¨å¯ä»¥åˆ†æ­¥ä¼ å‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;// ä½¿å¾—
test(1,2,3,4,5)
// ç­‰åŒäº
transformTest(1)(2)(3)(4)(5)
// æˆ–è€…
transformTest(1, 2)(3)(4, 5)
// åˆæˆ–è€…
transformTest(1, 2, 3, 4)(5)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;curryå‡½æ•°åº”è¯¥æ€ä¹ˆå†™ï¼Ÿ&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-js&quot;&gt;function curry(fn, ...args) {
  // åˆ¤æ–­å‚æ•°ä¸ªæ•°æ˜¯ä¸æ˜¯ç­‰äºåŸå‡½æ•°å‚æ•°ä¸ªæ•°
  // å¦‚æœæ˜¯ï¼Œç›´æ¥è¿”å›è°ƒç”¨ç»“æœ
  if ([...args].length === fn.length) {
    return fn(...args);
  } else {
    // å¦‚æœä¸æ˜¯ï¼Œåˆ™è¿”å›ä¸€ä¸ªå‡½æ•°
    return (...params) =&amp;gt; {
      // å°†å‰é¢ä¼ çš„å…¨éƒ¨å‚æ•°ä¼ ç»™curryï¼Œå›åˆ°ç¬¬ä¸€æ­¥çš„ifåˆ¤æ–­ï¼Œç›´åˆ°å‚æ•°ä¸ªæ•°æ»¡è¶³è¦æ±‚
      return curry(fn, ...args, ...params);
    };
  }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æœ¬æ–‡GitHubé“¾æ¥ï¼š&lt;a href=&quot;https://github.com/wangmeijian/blog/issues/3&quot; target=&quot;_blank&quot;&gt;æ‰‹å†™ç³»åˆ—ï¼šcallã€applyã€bindã€å‡½æ•°æŸ¯é‡ŒåŒ–&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Thu, 31 Dec 2020 15:40:00 +0000</pubDate>
<dc:creator>wangmeijian</dc:creator>
<og:description>å°‘åºŸè¯ï¼Œshow my code</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/wangmeijian/p/14219155.html</dc:identifier>
</item>
<item>
<title>ç®—æ³•ç³»åˆ—-åŠ¨æ€è§„åˆ’(4)ï¼šä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº - lillcol</title>
<link>http://www.cnblogs.com/lillcol/p/14218940.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/lillcol/p/14218940.html</guid>
<description>&lt;p&gt;æ­¤ç³»åˆ—ä¸ºåŠ¨æ€è§„åˆ’ç›¸å…³æ–‡ç« ã€‚&lt;/p&gt;
&lt;p&gt;ç³»åˆ—å†å²æ–‡ç« ï¼š&lt;br/&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s/YhbOi2_LInQ7EXP3WDgodA&quot; target=&quot;_blank&quot;&gt;ç®—æ³•ç³»åˆ—-åŠ¨æ€è§„åˆ’(1)ï¼šåˆè¯†åŠ¨æ€è§„åˆ’&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s/TsX5dkKEmJn9Qup0__4AAg&quot; target=&quot;_blank&quot;&gt;ç®—æ³•ç³»åˆ—-åŠ¨æ€è§„åˆ’(2)ï¼šåˆ‡å‰²é’¢æé—®é¢˜&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s/fKqp5icO5CfwoUfZ5jQmeg&quot; target=&quot;_blank&quot;&gt;ç®—æ³•ç³»åˆ—-åŠ¨æ€è§„åˆ’(3)ï¼šæ‰¾é›¶é’±ã€èµ°æ–¹æ ¼é—®é¢˜&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s/ubDMTzaSVw3Ks0F9YIXFeg&quot; target=&quot;_blank&quot;&gt;ç®—æ³•ç³»åˆ—-åŠ¨æ€è§„åˆ’(4)ï¼šä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº&lt;/a&gt;&lt;/p&gt;
&lt;hr/&gt;&lt;h3 id=&quot;æ–°ç”ŸéŸ­èœç½—æ‹‰&quot;&gt;æ–°ç”ŸéŸ­èœç½—æ‹‰&lt;/h3&gt;
&lt;p&gt;è‡ªä»ä¸Šæ¬¡çœ‹åˆ°å…«å“¥æ”¶è—æ—§å¸ï¼Œç½—æ‹‰ä¹Ÿæƒ³ç»™è‡ªå·±æ£é¼“ä¸ªå‰¯ä¸šï¼Œèµšç‚¹é›¶èŠ±é’±ã€‚&lt;/p&gt;
&lt;p&gt;äºæ˜¯å¥¹ç„ä¸Šäº†è‚¡ç¥¨ï¼Œä½œä¸ºè‚¡åœºæ–°äººï¼Œç½—æ‹‰å¯æ˜¯æ»¡æ€€ä¿¡å¿ƒçš„ã€‚&lt;br/&gt;è§‰å¾—è‡ªå·±åªè¦é¡ºåº”æ½®æµï¼Œè¯†å¤§ä½“ï¼Œæ‡‚è¿›é€€ï¼Œä¸è´ªå¿ƒï¼Œå³ä½¿ä¸èµšå¤§é’±ï¼Œä¹Ÿä¸è‡³äºäºé’±ã€‚ æ‰€ä»¥å¥¹æƒ³æ‹¿ä¸ªä¸€åƒå…«ç™¾è¯•è¯•æ°´ã€‚&lt;/p&gt;
&lt;p&gt;å…«å“¥ä½œä¸ºè¿‡æ¥äººï¼Œè‚¡ç¥¨ç©å¾—ç¨€ç¢ï¼Œå½“å¹´ä¹Ÿæ˜¯è¿™ä¹ˆè¿‡æ¥çš„ï¼Œç‹ ç‹ çš„å½“äº†ä¸€æ³¢éŸ­èœã€‚&lt;br/&gt;ä½†æ˜¯çœ‹ç½—æ‹‰çš„åŠ²å¤´ï¼Œä¸è¢«æ”¶å‰²ä¸€æ¬¡æ˜¯åŠä¸ä½å¥¹çš„å¯Œå©†æ¢¦çš„ã€‚&lt;br/&gt;å°±çœ‹çœ‹å¥¹æ€ä¹ˆæ£é¼“å§ã€‚&lt;/p&gt;
&lt;p&gt;ç½—æ‹‰è¿™å‡ å¤©ä¸€ç›´ç›¯ç€æ‰‹æœºçœ‹è‚¡ç¥¨è¡Œæƒ…ã€‚&lt;br/&gt;æ—¶è€Œæ¬£å–œï¼Œæ—¶è€Œå¹æ°”ã€‚&lt;/p&gt;
&lt;p&gt;çœ‹æ¥æ—¶æœºå·®ä¸å¤šäº†ï¼Œå…«å“¥å‡†å¤‡è½äº•...å…³å¿ƒä¸€ä¸‹ç½—æ‹‰ã€‚&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å¯¹è¯è®°å½•&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody readability=&quot;15.5&quot;&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;
&lt;p align=&quot;left&quot;&gt;&lt;strong&gt;å…«å“¥&lt;/strong&gt;&lt;/p&gt;
ç½—æ‹‰ï¼Œç‚’è‚¡ä¹Ÿæœ‰å‡ å¤©äº†ï¼Œä½ çš„å¯Œå©†æ¢¦æ˜¯å¦è¿‘äº†ä¸€æ­¥ï¼Ÿ&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4.5&quot;&gt;&lt;td readability=&quot;6&quot;&gt;
&lt;p align=&quot;right&quot;&gt;&lt;strong&gt;ç½—æ‹‰&lt;/strong&gt;&lt;/p&gt;
&lt;p align=&quot;right&quot;&gt;å“ï¼Œåˆ«æäº†ï¼Œè¿™å‡ å¤©å¤©å¤©ç›¯ç€ä»·æ ¼ï¼Œçœ¼ç›éƒ½èŠ±äº†ã€‚&lt;br/&gt;æˆ‘ä¹°è‚¡ç¥¨å¥½åƒå°±è·Ÿæˆ‘åšå¯¹ä¸€æ ·ï¼Œåœ¨æˆ‘æ‰‹ä¸Šç‹‚è·Œï¼Œæˆ‘ä¸€å–å°±æ¶¨&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td&gt;
&lt;p align=&quot;left&quot;&gt;&lt;strong&gt;å…«å“¥&lt;/strong&gt;&lt;/p&gt;
æ˜¯ä¸æ˜¯æœ‰ä¸€ç§ï¼Œè¿™äº›è‚¡ç¥¨ä¸“é—¨å‰²ä½ éŸ­èœçš„èµ¶è„šã€‚&lt;br/&gt;åªè¦æŒæœ‰å°±è·Œï¼Œå–å‡ºåå°±æ¶¨ã€‚&lt;br/&gt;å…¨ä¸–ç•Œéƒ½ç›¯ç€ä½ çš„ä¸€åƒå…«ç™¾&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;7.5&quot;&gt;&lt;td readability=&quot;8&quot;&gt;
&lt;p align=&quot;right&quot;&gt;&lt;strong&gt;ç½—æ‹‰&lt;/strong&gt;&lt;/p&gt;
&lt;p align=&quot;right&quot;&gt;å¯¹å•Šï¼Œè¿™å‡ å¤©æˆ‘åªå…³æ³¨ä¸€æ”¯è‚¡ç¥¨ï¼Œä¹Ÿä¸€ç›´åœ¨ä¹°å–è¿™ä¸ªã€‚&lt;br/&gt;è™½ç„¶ä¸è‡³äºåƒä½ è¯´çš„è¿™ä¹ˆå¤¸å¼ ï¼Œä½†æ˜¯ç¡®å®ç°åœ¨å°äºå§ã€‚&lt;br/&gt;è¦ä¹ˆå› ä¸ºä¸‹è·Œæ€¥æ€¥å¿™å¿™å–äº†ï¼Œä½†æ˜¯æˆ‘ä¸€å–å®ƒé©¬ä¸Šåˆæ¶¨å›æ¥äº†&lt;br/&gt;è¦ä¹ˆå› ä¸ºä¸Šæ¶¨æ€åŠ¿å¥½ï¼Œæˆ‘æŒæœ‰äº†ï¼Œä½†æ˜¯è½¬çœ¼å®ƒåˆè·Œäº†&lt;br/&gt;æ€»ä¹‹ï¼Œæ—¶æœºæŠŠæ¡çš„ä¸å¥½&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;
&lt;p align=&quot;left&quot;&gt;&lt;strong&gt;å…«å“¥&lt;/strong&gt;&lt;/p&gt;
è¿™ä¹ˆçœ‹æ¥ä½ çš„å¯Œå©†æ¢¦ä¸æ€ä¹ˆé¡ºåˆ©å‘€&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4.5&quot;&gt;&lt;td readability=&quot;6&quot;&gt;
&lt;p align=&quot;right&quot;&gt;&lt;strong&gt;ç½—æ‹‰&lt;/strong&gt;&lt;/p&gt;
&lt;p align=&quot;right&quot;&gt;ç¡®å®ï¼Œæœç„¶å°ä¸‘æ˜¯æˆ‘è‡ªå·±å—ï¼Ÿ&lt;br/&gt;ä¹Ÿå¯¹ï¼Œè¦æ˜¯è¿™ä¹ˆå®¹æ˜“ï¼Œè°è¿˜è€è€å®å®å¹²æ´»å•Šï¼Œéƒ½å»ç‚’è‚¡çš„äº†&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td&gt;
&lt;p align=&quot;left&quot;&gt;&lt;strong&gt;å…«å“¥&lt;/strong&gt;&lt;/p&gt;
æ˜¯çš„&lt;br/&gt;æ‰€ä»¥æˆ‘ä¸€å¼€å§‹ä¹Ÿä¸åŠä½ ï¼Œæ¯•ç«Ÿå¤§å®¶å¼€å§‹çš„å¿ƒæ€å’Œä½ éƒ½å·®ä¸å¤šã€‚&lt;br/&gt;åªæœ‰è¢«å‰²è¿‡éŸ­èœï¼Œæ‰ä¼šçŸ¥é“ç‚’è‚¡é«˜é£é™©ï¼Œé«˜å›æŠ¥ã€‚ä¸æ˜¯ä¸€èˆ¬äººèƒ½ç©çš„ã€‚&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4.5&quot;&gt;&lt;td readability=&quot;6&quot;&gt;
&lt;p align=&quot;right&quot;&gt;&lt;strong&gt;ç½—æ‹‰&lt;/strong&gt;&lt;/p&gt;
&lt;p align=&quot;right&quot;&gt;å“ï¼Œç™½ç™½æµªè´¹äº†å‡ å¤©æ—¶é—´ï¼Œ&lt;br/&gt;çœ‹æ¥æˆ‘è¿˜æ˜¯é€‚åˆå»ç©é¸¡ï¼Œæ‰¾ä¸ªé è°±é¸¡æ”¾ç€éƒ½æ¯”è¿™ä¸ªå¼º&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td&gt;
&lt;p align=&quot;left&quot;&gt;&lt;strong&gt;å…«å“¥&lt;/strong&gt;&lt;/p&gt;
å¯Œå©†æ¢¦å¯èƒ½æ¯«æ— æ”¶è·ï¼Œä½†æ˜¯è¿™ä¸ªç»å†åˆ°æ—¶å¯ä»¥ç”¨æ¥æå‡ä¸€ä¸‹è‡ªå·±ï¼Œ&lt;br/&gt;ä¹°å–è‚¡ç¥¨å¯æ˜¯ä¸€ä¸ªå¾ˆç»å…¸çš„ç®—æ³•é¢˜å“¦ã€‚&lt;br/&gt;å½“ç„¶è¿™ä¸ªäº‹åè¯¸è‘›äº®çš„é¢˜ç›®ã€‚&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td readability=&quot;5&quot;&gt;
&lt;p align=&quot;right&quot;&gt;&lt;strong&gt;ç½—æ‹‰&lt;/strong&gt;&lt;/p&gt;
&lt;p align=&quot;right&quot;&gt;ç®—æ³•ï¼Ÿæœ‰ç‚¹æ„æ€ï¼Œè¯´æ¥ç…ç…&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;
&lt;p align=&quot;left&quot;&gt;&lt;strong&gt;å…«å“¥&lt;/strong&gt;&lt;/p&gt;
è¡Œï¼Œæˆ‘æŠŠå‡ ä¸ªç»å…¸çš„æ¡ˆä¾‹è¯´ä¸€ä¸‹å§&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;è¯´åˆ°ç‚’è‚¡ï¼Œ&lt;br/&gt;æƒ³å½“å¹´å…«å“¥çš„ç¥æ“ä½œ...ï¼Œæ³ªæµæ»¡é¢&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1293390/202012/1293390-20201231224506039-496227391.png&quot; alt=&quot;å…«å“¥éŸ­èœæ›²çº¿&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;hr/&gt;&lt;h3 id=&quot;ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºäº¤æ˜“ä¸€æ¬¡&quot;&gt;ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº(äº¤æ˜“ä¸€æ¬¡)&lt;/h3&gt;
&lt;p&gt;â€œå…ˆæ¥ç¬¬ä¸€ä¸ªé¢˜ç›®ï¼Œâ€&lt;br/&gt;â€œç½—æ‹‰ï¼Œä½ æŠŠä½ æœ€è¿‘çš„è‚¡ç¥¨ä¸ƒå…«å¤©çš„è‚¡ä»·ç»™æˆ‘åˆ—ä¸€ä¸‹â€&lt;/p&gt;
&lt;p&gt;â€œå¥½ï¼Œæœ€è¿‘ä¸ƒå…«å¤©çš„ä»·æ ¼æ˜¯è¿™æ ·çš„ï¼š&lt;code&gt;{9,11,7,5,7,10,18,3}&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;â€œå—¯ï¼Œæˆ‘ä»¬ç°åœ¨å…ˆæ¥æœ€ç®€å•çš„ï¼Œé¢˜ç›®å¦‚ä¸‹ï¼šâ€&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå®ƒçš„ç¬¬Â i ä¸ªå…ƒç´ æ˜¯ä¸€æ”¯ç»™å®šè‚¡ç¥¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚&lt;br/&gt;å¦‚æœä½ æœ€å¤šåªå…è®¸å®Œæˆä¸€ç¬”äº¤æ˜“ï¼ˆå³ä¹°å…¥å’Œå–å‡ºä¸€æ”¯è‚¡ç¥¨ä¸€æ¬¡ï¼‰ï¼Œ&lt;br/&gt;è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚&lt;br/&gt;æ³¨æ„ï¼šä½ ä¸èƒ½åœ¨ä¹°å…¥è‚¡ç¥¨å‰å–å‡ºè‚¡ç¥¨ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;â€œä½ è¯•ç€åˆ†æçœ‹çœ‹ã€‚â€&lt;/p&gt;
&lt;p&gt;â€œè¡Œæˆ‘è¯•è¯•â€&lt;/p&gt;
&lt;p&gt;â€œè¦æƒ³ä¸€æ¬¡äº¤æ˜“æ”¶ç›Šæœ€å¤§â€ï¼Œ&lt;br/&gt;â€œé‚£ä¹ˆå¿…é¡»ä¿è¯æˆ‘æ˜¯åœ¨æœ€ä½ç‚¹ä¹°å…¥æœ€é«˜ç‚¹å–å‡ºã€‚è¿™ä¸ªæ ·å°±å¯ä»¥ä¿è¯æˆ‘çš„æ”¶ç›Šæœ€å¤§â€ã€‚&lt;br/&gt;â€œåœ¨è¿™é‡Œæˆ‘ä»¬çš„æœ€ä½ç‚¹æ˜¯&lt;code&gt;3&lt;/code&gt;ï¼Œæœ€é«˜ç‚¹æ˜¯&lt;code&gt;18&lt;/code&gt;,è¿™æ ·ç®—çš„è¯æœ€å¤§æ”¶ç›Šæ˜¯&lt;code&gt;15&lt;/code&gt;â€ã€‚&lt;/p&gt;
&lt;p&gt;â€œå—¯ï¼Œä¸å¯¹ï¼Œ&lt;code&gt;3&lt;/code&gt;æ˜¯åœ¨&lt;code&gt;18&lt;/code&gt;åé¢ï¼Œè¿™æ ·ä¸ç¬¦åˆé€»è¾‘â€ã€‚&lt;br/&gt;â€œåº”è¯¥æ˜¯è¦ä¿è¯æœ€ä½ä»·æ ¼åœ¨æœ€é«˜ä»·æ ¼å‰é¢ï¼Œè¦å…ˆä¹°äº†æ‰èƒ½ä¹°â€ã€‚&lt;/p&gt;
&lt;p&gt;â€œæ‰€ä»¥ï¼Œå‡è®¾ä»Šå¤©æ˜¯ç¬¬&lt;code&gt;i&lt;/code&gt;å¤©ï¼Œæˆ‘åªè¦è®°å½•&lt;code&gt;i-1&lt;/code&gt;å¤©ä¹‹å‰çš„æœ€ä½ä»·æ ¼â€ï¼Œ&lt;br/&gt;â€œç”¨ä»Šå¤©çš„ä»·æ ¼å‡å»æœ€ä½ä»·æ ¼å¾—åˆ°åˆ©æ¶¦ï¼Œç„¶åé€‰å–æœ€å¤§çš„åˆ©æ¶¦å³å¯â€ã€‚&lt;br/&gt;â€œå—¯ï¼Œå…¸å‹åŠ¨æ€è§„åˆ’ç‰¹å¾â€ã€‚&lt;br/&gt;â€œæˆ‘ç”¨&lt;code&gt;dp[i]&lt;/code&gt;è®°å½•å‰&lt;code&gt;i-1&lt;/code&gt;å¤©çš„æœ€ä½ä»·æ ¼ï¼Œâ€&lt;br/&gt;â€œè¾¹ç•Œå€¼ä¸ºç¬¬&lt;code&gt;0&lt;/code&gt;å¤©è‚¡ä»·è®¾ç½®ä¸ºæœ€å¤§ï¼Œä¿è¯&lt;code&gt;dp[1]&lt;/code&gt;ä»¥åæœ€å°å€¼â€ã€‚&lt;br/&gt;â€œå“ˆå“ˆï¼Œå§å§æ˜ç™½äº†â€ã€‚&lt;/p&gt;
&lt;p&gt;ç½—æ‹‰è‡ªä¿¡é“ï¼Œç„¶åå¼€å§‹ç¼–ç ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;public class StockTrading {
    public static void main(String[] args) {
        int[] prices = {9, 11, 7, 5, 7, 10, 18, 3};
        int[] pricesUp = {2,3,4,5,6,7,8,9};
        int[] pricesDown = {9,8,7,6,5,4,3,2};
        System.out.println(&quot;prices ä¸€æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot;+stockTrading1(prices));
        System.out.println(&quot;pricesUp ä¸€æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot;+stockTrading1(pricesUp));
        System.out.println(&quot;pricesDown ä¸€æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot;+stockTrading1(pricesDown));
    }

    public static int stockTrading1(int[] prices) {
        if(prices==null || prices.length&amp;lt;2) return 0;

        int[] dp = new int[prices.length + 1];
        //è®¾å®šè¾¹ç•Œ
        dp[0] = Integer.MAX_VALUE;//ä¸ºäº†åé¢èƒ½å–åˆ°æœ€å°å€¼ï¼Œdp[0]è®¾ç½®ä¸ºInteger.MAX_VALUE
        int max = Integer.MIN_VALUE;//ä¸€å¼€å§‹åˆ©æ¶¦ä¸ºInteger.MIN_VALUE
        for (int i = 1; i &amp;lt;= prices.length; i++) {
            max = Math.max(max,prices[i-1] - dp[i-1]);
            dp[i] = Math.min(dp[i - 1], prices[i-1]);
        }
        return max&amp;gt;=0?max:0;//åˆ©æ¶¦ä¸èƒ½ä¸ºè´Ÿæ•°ï¼Œæ¯•ç«Ÿæ²¡æœ‰å‚»å­
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;//è¾“å‡ºç»“æœ
prices ä¸€æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 13
pricesUp ä¸€æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 7
pricesDown ä¸€æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 0
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;â€œä¸é”™ï¼Œç»“æœä¹Ÿæ²¡é”™ï¼Œå¯æ˜¯ä½ æ²¡å¿…è¦ä¸‡äº‹çš†åŠ¨æ€å§â€ã€‚&lt;br/&gt;â€œå¹æ¯›æ±‚ç–µï¼Œå¦‚æœæˆ‘è¦ç”¨&lt;code&gt;O(1)&lt;/code&gt;çš„æ—¶é—´å¤æ‚åº¦ï¼Œå’‹æ•´ï¼Ÿâ€ å…«å“¥æœ‰æ°”æ— åŠ›é“ã€‚&lt;br/&gt;â€œæ˜æ˜æœ‰ç®€å•ç‚¹ã€æ›´é«˜æ•ˆçš„å†™æ³•ï¼Œæ¯”å¦‚è¿™æ ·: â€&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;public class StockTrading {
    public static void main(String[] args) {
        int[] prices = {9, 11, 7, 5, 7, 10, 18, 3};
        int[] pricesUp = {2, 3, 4, 5, 6, 7, 8, 9};
        int[] pricesDown = {9, 8, 7, 6, 5, 4, 3, 2};
        System.out.println(&quot;prices ä¸€æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading1(prices));
        System.out.println(&quot;pricesUp ä¸€æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading1(pricesUp));
        System.out.println(&quot;pricesDown ä¸€æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading1(pricesDown));
    }

    public static int stockTrading1(int[] prices) {
        if (prices == null || prices.length &amp;lt; 2) return 0;

        //è®¾å®šè¾¹ç•Œ
        int min = Math.min(prices[0], prices[1]);//è®°å½•å‰ä¸¤å¤©çš„æœ€ä½ä»·æ ¼
        int max = prices[1] - prices[0];//è®°å½•å‰ä¸¤å¤©åˆ©æ¶¦
        for (int i = 2; i &amp;lt; prices.length; i++) {
            max = Math.max(max, prices[i] - min);
            min = Math.min(min, prices[i]);
        }
        return max &amp;gt;= 0 ? max : 0; //åˆ©æ¶¦ä¸èƒ½ä¸ºè´Ÿæ•°ï¼Œæ¯•ç«Ÿæ²¡æœ‰å‚»å­
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;//è¾“å‡ºç»“æœ
prices ä¸€æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 13
pricesUp ä¸€æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 7
pricesDown ä¸€æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 0
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;â€œä¸è¿‡è¿™ä¸ªä¸€èˆ¬é—®é¢˜ä¸å¤§ï¼Œæˆ‘åªæ˜¯æƒ³è¯´ä½ ä¸è¦é™·å…¥ä¸€ä¸ªè¯¯åŒºå°±æ˜¯å•¥éƒ½é’»åˆ°åŠ¨æ€é‡Œé¢å»â€ã€‚&lt;br/&gt;â€œè€Œå¿½è§†å…¶ä»–çš„æ–¹æ³•â€ã€‚&lt;/p&gt;
&lt;p&gt;â€œå“¦ï¼Œè‡ªä»å­¦äº†åŠ¨æ€ï¼Œå¥½åƒç¡®å®æœ‰ç‚¹å‡¡äº‹åªæƒ³åŠ¨æ€äº†ï¼Œä¸è¿‡ä½ è¿™ä¸ªæœ¬è´¨è¿˜æ˜¯åŠ¨æ€å§â€ï¼Œç½—æ‹‰å°´å°¬é“ã€‚&lt;/p&gt;
&lt;p&gt;â€œå—¯ï¼Œè¿™ä¹ˆè¯´ä¹Ÿæ²¡é”™ï¼Œå°±æ˜¯å‹ç¼©ä¸€ä¸‹ç©ºé—´è€Œå·²ï¼Œèƒ½æƒ³åˆ°åŠ¨æ€ä¸æ˜¯åäº‹ï¼Œåªè¦ä¸é’»ç‰›è§’å°–å°±å¥½äº†â€ã€‚&lt;br/&gt;â€œè¿™æ˜¯æœ€ç®€å•çš„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹ä¸‹ä¸€ä¸ªé—®é¢˜â€ã€‚&lt;/p&gt;
&lt;hr/&gt;&lt;h3 id=&quot;ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºäº¤æ˜“å¤šæ¬¡&quot;&gt;ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº(äº¤æ˜“å¤šæ¬¡)&lt;/h3&gt;
&lt;p&gt;â€œç¬¬äºŒä¸ªé—®é¢˜å¦‚ä¸‹ï¼šâ€&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå®ƒçš„ç¬¬Â i ä¸ªå…ƒç´ æ˜¯ä¸€æ”¯ç»™å®šè‚¡ç¥¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚&lt;br/&gt;è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚&lt;br/&gt;ä½ å¯ä»¥å°½å¯èƒ½åœ°å®Œæˆæ›´å¤šçš„äº¤æ˜“ï¼ˆå¤šæ¬¡ä¹°å–ä¸€æ”¯è‚¡ç¥¨ï¼‰ã€‚&lt;br/&gt;æ³¨æ„ï¼šä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;â€œè¿™æ˜¯è‚¡ç¥¨é—®é¢˜çš„ç¬¬äºŒç±»ï¼Œä½ çœ‹çœ‹è¿™ä¸ªè¦æ€ä¹ˆå¤„ç†â€ã€‚&lt;/p&gt;
&lt;p&gt;â€œå—¯ï¼Œæˆ‘å…ˆçœ‹çœ‹â€ï¼Œ&lt;br/&gt;â€œå¦‚æœæˆ‘è¦ç®—æœ€å¤§çš„ï¼Œåˆ©æ¶¦ï¼Œè‚¯å®šæ˜¯å¾—é€¢ä½ä¹°å…¥ï¼Œé€¢é«˜å–å‡ºâ€ã€‚&lt;br/&gt;â€œä¸è¿‡æœ‰ä¸ªé™åˆ¶æ¡ä»¶ï¼Œæ¯å¤©åªèƒ½è¿›è¡Œä¸€æ¬¡äº¤æ˜“ï¼Œåªèƒ½ä¹°å–äºŒé€‰ä¸€â€ã€‚&lt;br/&gt;â€œæˆ‘å¯ä»¥æ¯”è¾ƒä¸¤å¤©çš„ä»·æ ¼ï¼Œå¦‚æœç¬¬&lt;code&gt;i&lt;/code&gt;å¤©çš„ä»·æ ¼&lt;code&gt;prices[i]&lt;/code&gt;å¤§äºç¬¬&lt;code&gt;i-1&lt;/code&gt;å¤©çš„ä»·æ ¼&lt;code&gt;prices[i-1]&lt;/code&gt;ï¼Œé‚£ä¹ˆæˆ‘å°±åœ¨ç¬¬&lt;code&gt;i-1&lt;/code&gt;å¤©ä¹°å…¥ï¼Œç¬¬&lt;code&gt;i&lt;/code&gt;å¤©å–å‡ºâ€ã€‚&lt;br/&gt;â€œä½†æ˜¯è¿™ä¼šå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæˆ‘è¿ç»­ä¸¤å¤©éƒ½æ˜¯ä¸Šæ¶¨çš„ï¼Œè¿™æ ·ç®—ä¼šå‡ºé—®é¢˜â€ã€‚&lt;br/&gt;â€œæ¯”å¦‚&lt;code&gt;prices[i-2]&amp;lt;prices[i-1]&amp;lt;prices[i]&lt;/code&gt;,æ­¤æ—¶æˆ‘æŒ‰ç…§ä¸Šé¢çš„åšæ³•ï¼Œ&lt;code&gt;prices[i-2]&lt;/code&gt;ä¹°å…¥ï¼Œ&lt;code&gt;prices[i-1]&lt;/code&gt;æ˜¯å–å‡ºçš„,é‚£&lt;code&gt;prices[i]&lt;/code&gt;è¿™ä¸€å—æœ€å¤šåªèƒ½æ˜¯ä¹°å…¥äº†ï¼Œæ˜¾ç„¶ä¸åˆé€»è¾‘â€ã€‚&lt;br/&gt;â€œé‚£æˆ‘ä¿®æ­£ä¸€ä¸‹é€»è¾‘â€ã€‚&lt;br/&gt;â€œæˆ‘æ‰¾æ¯ä¸€ä¸ªä¸Šå‡åŒºé—´&lt;code&gt;[p1,p2]&lt;/code&gt;,åœ¨&lt;code&gt;p1&lt;/code&gt;ä¹°å…¥ï¼Œåœ¨&lt;code&gt;p2&lt;/code&gt;å–å‡ºå³å¯ï¼Œå°±åƒè¿™å¼ å›¾é‡Œé¢ç»¿è‰²éƒ¨åˆ†â€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1293390/202012/1293390-20201231224637599-1893454251.png&quot; alt=&quot;é€’å¢åŒºé—´&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;â€œç„¶ååªè¦æŠŠæ¯ä¸€æ®µçš„åˆ©æ¶¦åŠ èµ·æ¥å°±å¯ä»¥äº†ï¼Œso easyâ€ ç½—æ‹‰å¾—æ„é“ã€‚&lt;/p&gt;
&lt;p&gt;â€œä¸é”™ï¼Œæ€è·¯å¯ä»¥ï¼Œshow me your codeâ€ã€‚å…«å“¥ç‚¹ç‚¹å¤´ã€‚&lt;/p&gt;
&lt;p&gt;â€œè¡Œï¼Œç¨åâ€&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;public class StockTrading {
    public static void main(String[] args) {
        int[] prices = {7, 2, 5, 3, 6, 4, 7, 8, 2};
        int[] pricesUp = {2, 3, 4, 5, 6, 7, 8, 9};
        int[] pricesDown = {9, 8, 7, 6, 5, 4, 3, 2};
        System.out.println(&quot;prices ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading2(prices));
        System.out.println(&quot;pricesUp ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading2(pricesUp));
        System.out.println(&quot;pricesDown ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading2(pricesDown));
    }

    public static int stockTrading2(int[] prices) {
        if (prices == null || prices.length &amp;lt; 2) return 0;
        int profit = 0;
        for (int i = 1; i &amp;lt; prices.length; i++) {
            //è½¬æ¢æˆæ±‚è§£ä¸Šå‡åŒºé—´çš„é—®é¢˜
            if (prices[i] &amp;gt; prices[i - 1]) profit += (prices[i] - prices[i - 1]);
        }
        return profit;
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;//è¾“å‡ºç»“æœ
prices ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 10
pricesUp ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 7
pricesDown ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 0
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;â€œä¸é”™ï¼Œå¾ˆç®€å•äº†ï¼Œä¸è¿‡æ—¢ç„¶è¿™æ˜¯åŠ¨æ€è§„åˆ’çš„ç»å…¸æ¡ˆä¾‹ï¼Œä½ å†è¯•è¯•åŠ¨æ€å‘—â€ã€‚å…«å“¥ç¬‘é“&lt;/p&gt;
&lt;p&gt;â€œæœ‰å¿…è¦å—ï¼Ÿè¿™ä¸éƒ½åšå‡ºæ¥äº†å—ï¼Œè€Œä¸”è¿™ä¸ªæ—¶é—´å¤æ‚åº¦&lt;code&gt;O(n)&lt;/code&gt;å·²ç»æ¯”åŠ¨æ€å¥½äº†å§â€ã€‚ç½—æ‹‰ä¸è§£&lt;/p&gt;
&lt;p&gt;â€œè¯æ˜¯è¿™ä¹ˆè¯´æ²¡é”™ï¼Œä¸è¿‡è¿™ä¸ªè™½ç„¶åŠ¨æ€ä¸æ˜¯æœ€ä¼˜è§£ï¼Œä½†æ˜¯è¿™ä¸ªæ€è·¯å¯ä»¥å€Ÿé‰´ã€‚è¿™æ˜¯æ€æƒ³â€ã€‚&lt;/p&gt;
&lt;p&gt;â€œè¡Œå§ï¼Œæˆ‘è¯•è¯•â€ã€‚&lt;/p&gt;
&lt;p&gt;â€œæˆ‘ç¬¬&lt;code&gt;i&lt;/code&gt;å¤©çš„æ”¶ç›Šå—åˆ°ç¬¬&lt;code&gt;i-1&lt;/code&gt;å¤©åˆ©æ¶¦çš„å½±å“â€&lt;br/&gt;â€œä½†æ˜¯æ¯å¤©å…¶å®å°±åªæœ‰ä¸¤ä¸ªçŠ¶æ€ï¼Œæ˜¯å¦æŒæœ‰è‚¡ç¥¨â€&lt;/p&gt;
&lt;p&gt;â€œæˆ‘å¯ä»¥ç”¨ä¸€ä¸ªäºŒç»´æ•°ç»„&lt;code&gt;dp[prices.length+1][2]&lt;/code&gt;çš„æ•°ç»„æ¥è®°å½•æ¯å¤©ä¸åŒçŠ¶æ€çš„æœ€å¤§åˆ©æ¶¦â€&lt;/p&gt;
&lt;p&gt;â€œå…¶ä¸­&lt;code&gt;dp[i][0]&lt;/code&gt;è¡¨ç¤ºç¬¬&lt;code&gt;i&lt;/code&gt;å¤©ä¸æŒæœ‰è‚¡ç¥¨â€ã€‚&lt;br/&gt;â€œä¼šå­˜åœ¨ä¸¤ç§æƒ…å†µï¼šâ€&lt;br/&gt;â€œ1. å‰ä¸€å¤©ä¸æŒæœ‰ï¼Œå³ï¼š&lt;code&gt;dp[i-1][0]&lt;/code&gt;â€&lt;br/&gt;â€œ2. å‰ä¸€å¤©æŒæœ‰ï¼Œä»Šå¤©å–å‡º,å³ï¼š&lt;code&gt;dp[i-1][1]+prices[i]&lt;/code&gt;â€&lt;/p&gt;
&lt;p&gt;â€œå…¶ä¸­&lt;code&gt;dp[i][1]&lt;/code&gt;è¡¨ç¤ºç¬¬&lt;code&gt;i&lt;/code&gt;å¤©æŒæœ‰è‚¡ç¥¨â€ã€‚&lt;br/&gt;â€œä¹Ÿä¼šå­˜åœ¨ä¸¤ç§æƒ…å†µï¼šâ€&lt;br/&gt;â€œ1. å‰ä¸€å¤©æŒæœ‰ï¼Œä»Šå¤©ä¸å–å‡ºç»§ç»­æŒæœ‰ï¼Œå³ï¼š&lt;code&gt;dp[i-1][1]&lt;/code&gt;â€&lt;br/&gt;â€œ2. å‰ä¸€å¤©ä¸æŒæœ‰ï¼Œä»Šå¤©ä¹°å…¥ï¼Œå³ï¼š&lt;code&gt;dp[i-1][0]-prices[i]&lt;/code&gt;â€&lt;/p&gt;
&lt;p&gt;â€œå¯¹äºè¾¹ç•Œå€¼ï¼šâ€&lt;br/&gt;â€œç¬¬ä¸€å¤©çš„ä¸¤ç§æƒ…å†µä¸ºï¼šâ€&lt;br/&gt;â€œ&lt;code&gt;dp[1][0] = 0&lt;/code&gt;â€&lt;br/&gt;â€œ&lt;code&gt;dp[1][1] = -prices[0]&lt;/code&gt;â€&lt;/p&gt;
&lt;p&gt;â€œæ‰€ä»¥ä»£ç å®ç°ä¸ºï¼šâ€&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;
public class StockTrading {
    public static void main(String[] args) {
        int[] prices = {7, 2, 5, 3, 6, 4, 7, 8, 2};
        int[] pricesUp = {2, 3, 4, 5, 6, 7, 8, 9};
        int[] pricesDown = {9, 8, 7, 6, 5, 4, 3, 2};
        System.out.println(&quot;prices ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading2(prices));
        System.out.println(&quot;pricesUp ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading2(pricesUp));
        System.out.println(&quot;pricesDown ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading2(pricesDown));
    }

    public static int stockTrading2(int[] prices) {
        if (prices == null || prices.length &amp;lt; 2) return 0;
        int[][] dp = new int[prices.length + 1][2];//æ­¤å¤„prices.length + 1æ˜¯ä¸ºäº†è®¡ç®—æ–¹ä¾¿ï¼Œæ‰€ä»¥åé¢çš„prices[i - 1]æ˜¯ç›¸åº”è°ƒæ•´çš„
        //åˆå§‹åŒ–è¾¹ç•Œå€¼
        //ç¬¬ä¸€å¤©ä¸æŒæœ‰ï¼Œåˆ©æ¶¦ä¸º0ï¼ŒæŒæœ‰çš„å³ä¹°å…¥ï¼Œæ­¤æ—¶åˆ©æ¶¦ä¸º-prices[0]        
        dp[1][0] = 0;
        dp[1][1] = -prices[0];
        for (int i = 2; i &amp;lt; dp.length; i++) {
            //ä»Šå¤©ä¸æŒæœ‰æœ‰è‚¡ç¥¨çš„æƒ…å†µä¸ºï¼š
            //1. å‰ä¸€å¤©ä¸æŒæœ‰ï¼Œå³ï¼šdp[i-1][0]
            //2. å‰ä¸€å¤©æŒæœ‰ï¼Œä»Šå¤©å–å‡º,å³ï¼šdp[i-1][1]+prices[i-1]
            dp[i][0] = Math.max(dp[i - 1][0], dp[i - 1][1] + prices[i - 1]);
            //ä»Šå¤©æŒæœ‰è‚¡ç¥¨çš„æƒ…å†µä¸º
            //1. å‰ä¸€å¤©æŒæœ‰ï¼Œä»Šå¤©ç»§ç»­æŒæœ‰ï¼Œå³ï¼šdp[i-1][1]
            //2. å‰ä¸€å¤©ä¸æŒæœ‰ï¼Œä»Šå¤©ä¹°å…¥ï¼Œå³ï¼šdp[i-1][0]-prices[i-1]
            dp[i][1] = Math.max(dp[i - 1][1], dp[i - 1][0] - prices[i - 1]);
        }
        //æœ€åä¸€å¤©ä¸æŒæœ‰åº”è¯¥æ˜¯æ”¶ç›Šæœ€å¤§çš„ï¼Œæ‰€ä»¥æ²¡å¿…è¦å†æ¯”è¾ƒdp[prices.length][0]ï¼Œdp[prices.length][1]äº†
        return dp[prices.length][0];
    }

}
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;//è¾“å‡ºç»“æœ
prices ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 10
pricesUp ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 7
pricesDown ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 0
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;â€œå—¯ï¼Œä¸é”™ï¼Œé‚£æœ‰æ²¡æœ‰å¯ä»¥ä¼˜åŒ–çš„æ–¹æ³•å‘¢ï¼Ÿæ¯”å¦‚ç©ºé—´å¤æ‚åº¦æˆ‘è¦&lt;code&gt;O(1)&lt;/code&gt;ã€‚â€å…«å“¥ç»§ç»­è¿½é—®&lt;/p&gt;
&lt;p&gt;â€œå—¯ï¼Œæˆ‘æƒ³æƒ³ã€‚â€&lt;br/&gt;â€œæœ‰äº†ï¼Œå› ä¸ºä»–å…¶å®åªå’Œå‰ä¸€å¤©çš„çŠ¶æ€æœ‰å…³é‚£ä¹ˆæˆ‘åªéœ€è¦è®°å½•å‰ä¸€å¤©çš„ä¸¤ä¸ªçŠ¶æ€å°±å¯ä»¥äº†ã€‚â€&lt;br/&gt;â€œå¯ä»¥è¿™æ ·å®ç°ã€‚â€ç½—æ‹‰å…´å¥‹é“&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;public class StockTrading {
    public static void main(String[] args) {
        int[] prices = {7, 2, 5, 3, 6, 4, 7, 8, 2};
        int[] pricesUp = {2, 3, 4, 5, 6, 7, 8, 9};
        int[] pricesDown = {9, 8, 7, 6, 5, 4, 3, 2};
        System.out.println(&quot;prices ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading2(prices));
        System.out.println(&quot;pricesUp ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading2(pricesUp));
        System.out.println(&quot;pricesDown ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading2(pricesDown));
    }

    public static int stockTrading2(int[] prices) {
        if (prices == null || prices.length &amp;lt; 2) return 0;
        //sellè¡¨ç¤ºå½“å¤©ä¸æŒæœ‰è‚¡ç¥¨ï¼Œbuyè¡¨ç¤ºå½“å¤©æŒæœ‰è‚¡ç¥¨ï¼Œå…¶ä¸­ç¬¬ä¸€å¤©çš„çŠ¶æ€å¦‚ä¸‹
        int sell = 0,buy = -prices[0],tmp=0;
        for (int i = 1; i &amp;lt; prices.length; i++) {
            //ä»Šå¤©ä¸æŒæœ‰æœ‰è‚¡ç¥¨çš„æƒ…å†µä¸ºï¼š
            //1. å‰ä¸€å¤©ä¸æŒæœ‰ï¼Œå³ï¼šsell
            //2. å‰ä¸€å¤©æŒæœ‰ï¼Œä»Šå¤©å–å‡º,å³ï¼šbuy+prices[i]
            tmp = sell;
            sell = Math.max(sell, buy + prices[i]);
            //ä»Šå¤©æŒæœ‰è‚¡ç¥¨çš„æƒ…å†µä¸º
            //1. å‰ä¸€å¤©æŒæœ‰ï¼Œä»Šå¤©ç»§ç»­æŒæœ‰ï¼Œå³ï¼šbuy
            //2. å‰ä¸€å¤©ä¸æŒæœ‰ï¼Œä»Šå¤©ä¹°å…¥ï¼Œå³ï¼štmp-prices[i]
            buy = Math.max(buy, tmp - prices[i]);
        }
        //æœ€åä¸€å¤©ä¸æŒæœ‰åº”è¯¥æ˜¯æ”¶ç›Šæœ€å¤§çš„ï¼Œæ‰€ä»¥æ²¡å¿…è¦å†æ¯”è¾ƒsell,buy
        return sell;
    }

}
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;//è¾“å‡ºç»“æœ
prices ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 10
pricesUp ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 7
pricesDown ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 0
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;â€œæˆ‘å¯ä»¥é€šè¿‡ä¸¤ä¸ªæ ‡ç­¾è®°å½•è¯¥çŠ¶æ€ï¼Œè¾¾åˆ°é™ä½ç©ºé—´å¤æ‚åº¦çš„ç›®çš„ã€‚â€ç½—æ‹‰å¾ˆå¾—æ„è‡ªå·±æƒ³åˆ°åŠæ³•äº†ã€‚&lt;/p&gt;
&lt;p&gt;â€œæ˜¯çš„ï¼Œå…¶å®å¾ˆå¤šåŠ¨æ€éƒ½å¯ä»¥é€šè¿‡ç±»ä¼¼æ–¹å¼ä¼˜åŒ–ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯åŠ¨æ€è§„åˆ’ã€‚â€&lt;br/&gt;â€œçœ‹æ¥ç¬¬äºŒç§ç±»å‹ä½ ä¹ŸæŒæ¡çš„å·®ä¸å¤šäº†ï¼Œæ˜¯æ—¶å€™çœ‹çœ‹ç¬¬ä¸‰ç§äº†ã€‚â€&lt;/p&gt;
&lt;p&gt;â€œè¿˜æœ‰ï¼Ÿå¿«è¯´ã€‚â€ç½—æ‹‰å¯æ˜¯è‡ªä¿¡æ»¡æ»¡çš„&lt;/p&gt;
&lt;p&gt;â€œè¿˜æœ‰å¥½å‡ ç§å‘¢ï¼Œåˆ«æ€¥â€&lt;/p&gt;
&lt;hr/&gt;&lt;h3 id=&quot;ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹&quot;&gt;ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹&lt;/h3&gt;
&lt;p&gt;â€œç¬¬ä¸‰ç§çš„é¢˜ç›®å¦‚ä¸‹ï¼šâ€&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„Â pricesï¼Œå…¶ä¸­ç¬¬Â iÂ ä¸ªå…ƒç´ ä»£è¡¨äº†ç¬¬Â iÂ å¤©çš„è‚¡ç¥¨ä»·æ ¼ ï¼›éè´Ÿæ•´æ•°Â fee ä»£è¡¨äº†äº¤æ˜“è‚¡ç¥¨çš„æ‰‹ç»­è´¹ç”¨ã€‚&lt;br/&gt;ä½ å¯ä»¥æ— é™æ¬¡åœ°å®Œæˆäº¤æ˜“ï¼Œä½†æ˜¯ä½ æ¯ç¬”äº¤æ˜“éƒ½éœ€è¦ä»˜æ‰‹ç»­è´¹ã€‚å¦‚æœä½ å·²ç»è´­ä¹°äº†ä¸€ä¸ªè‚¡ç¥¨ï¼Œåœ¨å–å‡ºå®ƒä¹‹å‰ä½ å°±ä¸èƒ½å†ç»§ç»­è´­ä¹°è‚¡ç¥¨äº†ã€‚&lt;br/&gt;è¿”å›è·å¾—åˆ©æ¶¦çš„æœ€å¤§å€¼ã€‚&lt;br/&gt;æ³¨æ„ï¼šè¿™é‡Œçš„ä¸€ç¬”äº¤æ˜“æŒ‡ä¹°å…¥æŒæœ‰å¹¶å–å‡ºè‚¡ç¥¨çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œæ¯ç¬”äº¤æ˜“ä½ åªéœ€è¦ä¸ºæ”¯ä»˜ä¸€æ¬¡æ‰‹ç»­è´¹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;â€œå…¶ä¸­ä¸€ç¬”äº¤æ˜“è¿‡ç¨‹ä¸ºï¼šâ€&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1293390/202012/1293390-20201231224808400-852801899.png&quot; alt=&quot;äº¤æ˜“è¿‡ç¨‹&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;â€œè¿™ä¸ªä¸éš¾å§ï¼Œåªè¦åœ¨å‰ä¸€ä¸ªæ¡ˆä¾‹ä¸­å‡ºå”®è‚¡ç¥¨çš„ä½ç½®å‡æ‰æ‰‹ç»­è´¹å³å¯â€&lt;br/&gt;â€œä»£ç å¦‚ä¸‹ï¼šâ€&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;public class StockTrading {
    public static void main(String[] args) {
        int[] prices = {1, 3, 2, 8, 4, 9};
        int[] pricesUp = {2, 3, 4, 5, 6, 7, 8, 9};
        int[] pricesDown = {9, 8, 7, 6, 5, 4, 3, 2};
        System.out.println(&quot;prices ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading3(prices,2));
        System.out.println(&quot;pricesUp ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading3(pricesUp,2));
        System.out.println(&quot;pricesDown ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading3(pricesDown,2));
    }

    public static int stockTrading3(int[] prices,int fee) {
        if (prices == null || prices.length &amp;lt; 2) return 0;
        //sellè¡¨ç¤ºå½“å¤©ä¸æŒæœ‰è‚¡ç¥¨ï¼Œbuyè¡¨ç¤ºå½“å¤©æŒæœ‰è‚¡ç¥¨ï¼Œå…¶ä¸­ç¬¬ä¸€å¤©çš„çŠ¶æ€å¦‚ä¸‹
        int sell = 0,buy = -prices[0],tmp=0;
        for (int i = 1; i &amp;lt; prices.length; i++) {
            //ä»Šå¤©ä¸æŒæœ‰æœ‰è‚¡ç¥¨çš„æƒ…å†µä¸ºï¼š
            //1. å‰ä¸€å¤©ä¸æŒæœ‰ï¼Œå³ï¼šsell
            //2. å‰ä¸€å¤©æŒæœ‰ï¼Œä»Šå¤©å–å‡º,æ­¤æ—¶éœ€è¦æ”¯ä»˜æ‰‹ç»­è´¹,å³ï¼šbuy+prices[i]-fee
            tmp = sell;
            sell = Math.max(sell, buy + prices[i]-fee);
            //ä»Šå¤©æŒæœ‰è‚¡ç¥¨çš„æƒ…å†µä¸º
            //1. å‰ä¸€å¤©æŒæœ‰ï¼Œä»Šå¤©ç»§ç»­æŒæœ‰ï¼Œå³ï¼šbuy
            //2. å‰ä¸€å¤©ä¸æŒæœ‰ï¼Œä»Šå¤©ä¹°å…¥ï¼Œå³ï¼štmp-prices[i]
            buy = Math.max(buy, tmp - prices[i]);
        }
        //æœ€åä¸€å¤©ä¸æŒæœ‰åº”è¯¥æ˜¯æ”¶ç›Šæœ€å¤§çš„ï¼Œæ‰€ä»¥æ²¡å¿…è¦å†æ¯”è¾ƒsell,buy
        return sell;
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;//è¾“å‡ºç»“æœ
prices ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 8
pricesUp ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 5
pricesDown ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 0
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;â€œå…¶ä»–ç‰ˆæœ¬å¤§åŒå°å¼‚ï¼Œæˆ‘å°±ä¸å†™äº†ï¼Œèµ¶ç´§æ¥ç‚¹æœ‰éš¾åº¦çš„ã€‚â€ç½—æ‹‰ä¸å±‘é“&lt;/p&gt;
&lt;p&gt;â€œå“ï¼Œå¹´è½»äººï¼Œåˆ«æ¯›æ¯›èºèºï¼Œè¯·çœ‹ä¸‹ä¸€é¢˜â€&lt;/p&gt;
&lt;hr/&gt;&lt;h4 id=&quot;ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«å†·å†»æœŸ&quot;&gt;ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«å†·å†»æœŸ&lt;/h4&gt;
&lt;p&gt;â€œä¸‹é¢æ˜¯ç¬¬å››ç§ç±»å‹ï¼Œé¢˜ç›®å¦‚ä¸‹ï¼šâ€&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œå…¶ä¸­ç¬¬Â iÂ ä¸ªå…ƒç´ ä»£è¡¨äº†ç¬¬Â iÂ å¤©çš„è‚¡ç¥¨ä»·æ ¼ ã€‚&lt;br/&gt;è®¾è®¡ä¸€ä¸ªç®—æ³•è®¡ç®—å‡ºæœ€å¤§åˆ©æ¶¦ã€‚åœ¨æ»¡è¶³ä»¥ä¸‹çº¦æŸæ¡ä»¶ä¸‹ï¼Œä½ å¯ä»¥å°½å¯èƒ½åœ°å®Œæˆæ›´å¤šçš„äº¤æ˜“ï¼ˆå¤šæ¬¡ä¹°å–ä¸€æ”¯è‚¡ç¥¨ï¼‰ã€‚&lt;br/&gt;ä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚&lt;br/&gt;å–å‡ºè‚¡ç¥¨åï¼Œä½ æ— æ³•åœ¨ç¬¬äºŒå¤©ä¹°å…¥è‚¡ç¥¨ (å³å†·å†»æœŸä¸º 1 å¤©)ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;â€œå®Œæ•´äº¤æ˜“å‘¨æœŸä¸ºï¼šâ€&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1293390/202012/1293390-20201231224903321-584912901.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;â€œä½ çœ‹çœ‹æ­¤æ—¶è¦æ€ä¹ˆåšï¼Ÿâ€&lt;/p&gt;
&lt;p&gt;â€œæˆ‘çœ‹çœ‹ï¼Œè¿˜æƒ³æ¯”ä¹‹å‰å¤æ‚ï¼Œä¸è¿‡åº”è¯¥ä¹Ÿæ˜¯ä¸€è„‰ç›¸ä¼ ï¼Œâ€ç½—æ‹‰è‡ªè¯­&lt;/p&gt;
&lt;p&gt;â€œé¦–å…ˆç°åœ¨æ˜¯æœ‰ä¸‰ä¸ªçŠ¶æ€ï¼Œå–å‡ºï¼Œä¹°å…¥ã€å†·å†»æœŸã€‚â€&lt;br/&gt;â€œé‚£æˆ‘å¯ä»¥å®šä¹‰ä¸‰ä¸ªçŠ¶æ€&lt;code&gt;0ï¼Œ1ï¼Œ2&lt;/code&gt;åˆ†åˆ«è¡¨ç¤ºä¸‰ä¸ªçŠ¶æ€ã€‚â€&lt;br/&gt;â€œå®šä¹‰åŠ¨æ€æ•°æ®&lt;code&gt;dp[i][j]&lt;/code&gt;,è¡¨ç¤ºç¬¬&lt;code&gt;i&lt;/code&gt;å¤©ï¼ŒçŠ¶æ€&lt;code&gt;j&lt;/code&gt;çš„æœ€å¤§åˆ©æ¶¦ï¼Œå…¶ä¸­&lt;code&gt;j&lt;/code&gt;çš„å–å€¼ä¸º&lt;code&gt;{0ï¼Œ1ï¼Œ2}&lt;/code&gt;â€&lt;/p&gt;
&lt;p&gt;â€œé‚£ä¹ˆæ­¤æ—¶çš„çŠ¶æ€è½¬ç§»å¯ä»¥æ€»ç»“å¦‚ä¸‹ï¼šâ€&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;çŠ¶æ€&lt;/th&gt;
&lt;th&gt;å«ä¹‰&lt;/th&gt;
&lt;th&gt;è½¬æ¢&lt;/th&gt;
&lt;th&gt;æ³¨é‡Š&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody readability=&quot;6&quot;&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td&gt;&lt;code&gt;dp[i][0]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ­¤æ—¶ä¸ºå–å‡ºçŠ¶æ€&lt;/td&gt;
&lt;td&gt;&lt;code&gt;max(dp[i - 1][0], dp[i - 1][1] + prices[i])&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ­¤æ—¶å­˜åœ¨ä¸¤ç§æƒ…å†µ&lt;br/&gt;1. å‰ä¸€å¤©æ˜¯å·²ç»å–å‡ºäº†&lt;br/&gt;2. å‰ä¸€å¤©å¤„äºä¹°å…¥çŠ¶æ€ä»Šå¤©å–å‡º&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td&gt;&lt;code&gt;dp[i][1]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ­¤æ—¶ä¸ºä¹°å…¥çŠ¶æ€&lt;/td&gt;
&lt;td&gt;&lt;code&gt;max(dp[i - 1][1], dp[i - 1][2] - prices[i])&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ­¤æ—¶å­˜åœ¨ä¸¤ç§æƒ…å†µ&lt;br/&gt;1. å‰ä¸€å¤©ä¸ºä¹°å…¥çŠ¶æ€&lt;br/&gt;2. å‰ä¸€å¤©ä¸ºå†·å†»æœŸï¼Œä»Šå¤©ä¹°å…¥&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;&lt;code&gt;dp[i][2]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ­¤æ—¶ä¸ºå†·å†»æœŸ&lt;/td&gt;
&lt;td&gt;&lt;code&gt;dp[i - 1][0]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ­¤æ—¶å­˜åœ¨ä¸€ç§æƒ…å†µ&lt;br/&gt;1. å‰ä¸€å¤©ä¸ºå–å‡ºçŠ¶æ€&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;â€œæ­¤æ—¶ä»£ç å®ç°å¦‚ä¸‹â€&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;public class StockTrading {
    public static void main(String[] args) {
        int[] prices = {1, 3, 2, 8, 4, 9};
        int[] pricesUp = {2, 3, 4, 5, 6, 7, 8, 9};
        int[] pricesDown = {9, 8, 7, 6, 5, 4, 3, 2};
        System.out.println(&quot;prices ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading4(prices));
        System.out.println(&quot;pricesUp ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading4(pricesUp));
        System.out.println(&quot;pricesDown ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading4(pricesDown));
    }

    public static int stockTrading4(int[] prices) {
        if (prices == null || prices.length &amp;lt; 2) return 0;
        int n = prices.length;
        int[][] dp = new int[n][3];
        //åˆå§‹åŒ–è¾¹ç•Œ(å–å‡ºï¼Œä¹°å…¥)
        dp[0][0] = 0;
        dp[0][1] = -prices[0];
        dp[1][2] = 0;
        for (int i = 1; i &amp;lt; n; i++) {
            //æ­¤æ—¶ä¸ºå–å‡ºçŠ¶æ€ï¼Œè¦ä¹ˆå‰ä¸€å¤©æ˜¯å·²ç»å–å‡ºäº†dp[i-1][0]ï¼Œè¦ä¹ˆå°±æ˜¯æ˜¨å¤©å¤„äºä¹°å…¥çŠ¶æ€ä»Šå¤©å–å‡ºè·å¾—æ”¶ç›Šdp[i-1][1]+prices[i]
            dp[i][0] = Math.max(dp[i - 1][0], dp[i - 1][1] + prices[i]);
            //æ­¤æ—¶ä¸ºä¹°å…¥çŠ¶æ€ï¼Œåªèƒ½æ˜¯å‰ä¸€å¤©ä¸ºä¹°å…¥çŠ¶æ€dp[i-1][1]æˆ–è€…å‰ä¸€å¤©ä¸ºå†·å†»æœŸï¼Œä»Šå¤©ä¹°å…¥,èŠ±è´¹é‡‘é’±dp[i-1][2]-prices[i]
            dp[i][1] = Math.max(dp[i - 1][1], dp[i - 1][2] - prices[i]);
            //æ­¤æ—¶ä¸ºå†·å†»æœŸï¼Œæ­¤æ—¶åªæœ‰å‰ä¸€å¤©ä¸ºå–å‡ºçŠ¶æ€``dp[i-1][0]``ï¼Œä»Šå¤©ä¸æ“ä½œ
            dp[i][2] = dp[i - 1][0];
        }
        return Math.max(dp[n-1][0], dp[n - 1][2]);
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;//è¾“å‡ºç»“æœ
prices ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 8
pricesUp ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 7
pricesDown ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 0
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;â€œä¸é”™ï¼Œè¿™ä¸ªåŠ¨æ€æ¯”è¾ƒå¥½ç†è§£ï¼Œé‚£ä½ æ¥ä¸‹æ¥å¯ä»¥åœ¨è¿™åŸºç¡€ä¸Šåšä¸€ä¸‹ç©ºé—´å‹ç¼©å—ï¼Ÿâ€å…«å“¥ç»§ç»­è¿½é—®ã€‚&lt;/p&gt;
&lt;p&gt;â€œåº”è¯¥é—®é¢˜ä¸å¤§ï¼Œæˆ‘è¯•è¯•ã€‚â€&lt;br/&gt;â€œæ ¹æ®ä¸Šè¾¹çš„æ¨åˆ°å…¬å¼ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“åŠ¨æ€çŠ¶æ€è½¬ç§»ä¸ºï¼šâ€&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;dp[i][0] = Math.max(dp[i - 1][0], dp[i - 1][1] + prices[i]);
dp[i][1] = Math.max(dp[i - 1][1], dp[i - 1][2] - prices[i]);
dp[i][2] = dp[i - 1][0];
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;â€œè€Œæœ€ç»ˆçš„ç»“æœä¸ºï¼šâ€&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Math.max(dp[n - 1][0], dp[n - 1][2])
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;â€œæ ¹æ®è¿™ä¸¤ä¸ª&lt;code&gt;dp[n - 1][0], dp[n - 1][2]&lt;/code&gt;å¯çŸ¥ï¼šâ€&lt;br/&gt;â€œæˆ‘ä»¬è®¡ç®—å½“æ—¥çš„æœ€å¤§åˆ©æ¶¦åªè·Ÿ&lt;code&gt;dp[i - 1][0],dp[i - 1][1],dp[i - 1][2]&lt;/code&gt;æœ‰å…³â€&lt;br/&gt;â€œå³ä¹‹å’Œå‰ä¸€å¤©çš„å–å‡ºã€ä¹°å…¥ã€å†·å†»æœŸçš„æœ€å¤§åˆ©æ¶¦æœ‰å…³â€&lt;br/&gt;â€œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦è®°å½•æœ€æ–°çš„ä¸‰ä¸ªçŠ¶æ€å³å¯ï¼Œæ— éœ€è®°å½•æ‰€æœ‰çš„çŠ¶æ€ã€‚â€&lt;br/&gt;â€œå®ç°å¦‚ä¸‹ï¼šâ€&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;public class StockTrading {
    public static void main(String[] args) {
        int[] prices = {1, 3, 2, 8, 4, 9};
        int[] pricesUp = {2, 3, 4, 5, 6, 7, 8, 9};
        int[] pricesDown = {9, 8, 7, 6, 5, 4, 3, 2};
        System.out.println(&quot;prices ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading4(prices));
        System.out.println(&quot;pricesUp ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading4(pricesUp));
        System.out.println(&quot;pricesDown ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading4(pricesDown));
    }

    public static int stockTrading4(int[] prices) {
        if (prices == null || prices.length &amp;lt; 2) return 0;
        int n = prices.length;
        //åˆå§‹åŒ–è¾¹ç•Œ(å–å‡ºï¼Œä¹°å…¥)
        int dp0 = 0,dp1 = -prices[0],dp2= 0,tmp;
        for (int i = 1; i &amp;lt; n; i++) {
            tmp=dp0;
            //æ­¤æ—¶ä¸ºå–å‡ºçŠ¶æ€ï¼Œè¦ä¹ˆå‰ä¸€å¤©æ˜¯å·²ç»å–å‡ºäº†dp0ï¼Œè¦ä¹ˆå°±æ˜¯æ˜¨å¤©å¤„äºä¹°å…¥çŠ¶æ€ä»Šå¤©å–å‡ºè·å¾—æ”¶ç›Šdp1+prices[i]
            dp0 = Math.max(dp0, dp1 + prices[i]);
            //æ­¤æ—¶ä¸ºä¹°å…¥çŠ¶æ€ï¼Œåªèƒ½æ˜¯å‰ä¸€å¤©ä¸ºä¹°å…¥çŠ¶æ€dp1æˆ–è€…å‰ä¸€å¤©ä¸ºå†·å†»æœŸï¼Œä»Šå¤©ä¹°å…¥,èŠ±è´¹é‡‘é’±dp2 -prices[i]
            dp1 = Math.max(dp1, dp2 - prices[i]);
            //æ­¤æ—¶ä¸ºå†·å†»æœŸï¼Œæ­¤æ—¶åªæœ‰å‰ä¸€å¤©ä¸ºå–å‡ºçŠ¶æ€``dp0``ï¼Œä»Šå¤©ä¸æ“ä½œ
            dp2 = tmp;
        }
        return Math.max(dp0, dp2);
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;//è¾“å‡ºç»“æœ
prices ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 8
pricesUp ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 7
pricesDown ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 0
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;â€œè¿™æ ·çš„è¯ç©ºé—´å¤æ‚åº¦å°±å¯ä»¥ä¸‹é™åˆ°&lt;code&gt;O(1)&lt;/code&gt;å’Œä¹‹å‰çš„æ–¹æ³•ç±»ä¼¼â€&lt;/p&gt;
&lt;p&gt;â€œæ˜¯çš„ï¼Œå‹ç¼©ç©ºé—´æ˜¯åŠ¨æ€è§„åˆ’å¸¸ç”¨çš„ä¼˜åŒ–æ–¹æ³•ï¼Œä¸€èˆ¬åªè¦æ˜¯ä¾èµ–çš„çŠ¶æ€åªæ˜¯å‰ä¸€ä¸ªæˆ–å‡ ä¸ªçŠ¶æ€ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ç±»ä¼¼çš„æ–¹æ³•ä¼˜åŒ–ã€‚â€&lt;/p&gt;
&lt;p&gt;â€œç¬¬å››ç§ä½ ä¹Ÿåšå‡ºæ¥äº†ï¼Œè¦ä¸è¦æ¥ç¬¬äº”ä¸ªï¼Ÿâ€å…«å“¥ç¬‘é“&lt;/p&gt;
&lt;p&gt;â€œè¿˜æœ‰ï¼Ÿè¿˜æœ‰å‡ ä¸ªï¼Ÿâ€ç½—æ‹‰æ˜¾ç„¶æœ‰ç‚¹åƒæƒŠ&lt;/p&gt;
&lt;p&gt;â€œè¿˜æœ‰ä¸¤ä¸ªï¼Œå‰é¢çš„ç›¸å¯¹ç®€å•çš„ï¼Œåé¢è¿™ä¸¤ä¸ªæœ‰ç‚¹éš¾åº¦ï¼Œè¦è¯•è¯•ä¸ï¼Ÿâ€&lt;/p&gt;
&lt;p&gt;â€œè¯•è¯•å§ï¼Œéƒ½è¿™ä¸ªæ—¶å€™ï¼Œæ”¾å¼ƒæœ‰ç‚¹ä¸ç”˜å¿ƒã€‚â€ ç½—æ‹‰ä¸€å’¬ç‰™æœ‰äº†å†³æ–­&lt;/p&gt;
&lt;p&gt;â€œæœ‰å¿—æ°”ï¼Œè¯·å¬é¢˜â€&lt;/p&gt;
&lt;hr/&gt;&lt;h3 id=&quot;ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºæœ€å¤šäº¤æ˜“ä¸¤æ¬¡&quot;&gt;ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº(æœ€å¤šäº¤æ˜“ä¸¤æ¬¡)&lt;/h3&gt;
&lt;p&gt;â€œé¢˜ç›®æ˜¯ï¼šâ€&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå®ƒçš„ç¬¬ i ä¸ªå…ƒç´ æ˜¯ä¸€æ”¯ç»™å®šçš„è‚¡ç¥¨åœ¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚&lt;br/&gt;è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚ä½ æœ€å¤šå¯ä»¥å®ŒæˆÂ ä¸¤ç¬”Â äº¤æ˜“ã€‚&lt;br/&gt;æ³¨æ„:Â ä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å®Œæ•´çš„ä¸¤æ¬¡äº¤æ˜“ä¸ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1293390/202012/1293390-20201231225006175-683826811.png&quot; alt=&quot;å®Œæ•´çš„ä¸¤æ¬¡äº¤æ˜“&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;â€œä½ çœ‹çœ‹è¿™ä¸ªè¦æ€ä¹ˆåˆ†æï¼Ÿæœ‰ç‚¹éš¾åº¦å“¦â€&lt;/p&gt;
&lt;p&gt;â€œå—¯ï¼Œæˆ‘è¯•è¯•â€&lt;br/&gt;â€œè¿™ä¸ªå…¶å®ç±»ä¼¼ç¬¬äºŒä¸ªåœºæ™¯å§ï¼Œå°±æ˜¯ï¼šä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº(äº¤æ˜“å¤šæ¬¡)â€&lt;br/&gt;â€œè¿™ä¸è¿‡è¿™é‡Œé™åˆ¶äº†ä¸¤æ¬¡ï¼Œå½“æ—¶åªè€ƒè™‘å½“å¤©çš„çŠ¶æ€ä¸ºï¼šæŒæœ‰æˆ–è€…å–å‡ºï¼Œæ­¤æ—¶æ§åˆ¶è€ƒè™‘äº†ä¸€ä¸ªç»´åº¦â€&lt;br/&gt;â€œä½†æ˜¯æˆ‘ä»¬é™¤äº†è€ƒè™‘å½“å¤©æ˜¯æŒæœ‰ï¼Œè¿˜æ˜¯å–å‡ºå¤–ï¼Œè¿˜å¾—è€ƒè™‘æ˜¯ç¬¬å‡ æ¬¡äº¤æ˜“ï¼Œæˆ‘ä»¬æœ€å¤šåªèƒ½è¿›è¡Œä¸¤æ¬¡äº¤æ˜“ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¿˜ç¼ºä¸€ä¸ªçŠ¶æ€â€&lt;/p&gt;
&lt;p&gt;â€œæ—¢ç„¶è¿™æ ·æˆ‘ä»¬å¯ä»¥å¢åŠ ä¸€ä¸ªçŠ¶æ€ï¼Œè®°å½•å·²ç»äº¤æ˜“äº†å‡ æ¬¡ï¼Œå³å·²ç»å–å‡ºå¤šå°‘æ¬¡â€&lt;br/&gt;â€œè¿™æ ·æˆ‘ä»¬çš„çŠ¶æ€æ•°æ®å°±å¯ä»¥å˜æˆ&lt;code&gt;dp[å¤©æ•°][å½“å‰æ˜¯å¦æŒè‚¡][å–å‡ºçš„æ¬¡æ•°]=&amp;gt;dp[i][j][k]&lt;/code&gt;â€&lt;br/&gt;â€œè¿™æ ·æ¯å¤©ä¼šæœ‰å…­ä¸ªçŠ¶æ€ï¼Œåˆ†åˆ«ä¸ºï¼šâ€&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;ç¼–å·&lt;/th&gt;
&lt;th&gt;çŠ¶æ€&lt;/th&gt;
&lt;th&gt;å«ä¹‰&lt;/th&gt;
&lt;th&gt;çŠ¶æ€è½¬æ¢&lt;/th&gt;
&lt;th&gt;å¤‡æ³¨&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody readability=&quot;21.5&quot;&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;&lt;code&gt;dp[i][0][0]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç¬¬&lt;code&gt;i&lt;/code&gt;å¤©ä¸æŒæœ‰è‚¡ç¥¨&lt;br/&gt;äº¤æ˜“&lt;code&gt;0&lt;/code&gt;æ¬¡&lt;/td&gt;
&lt;td&gt;&lt;code&gt;0 æˆ– dp[i-1][0][0]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å³ä»å¤´åˆ°å°¾éƒ½æ²¡æœ‰äº¤æ˜“è¿‡,åˆ©æ¶¦ä¸º0&lt;br/&gt;æ²¡æœ‰è¿›è¡Œè¿‡äº¤æ˜“&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;8&quot;&gt;&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;&lt;code&gt;dp[i][0][1]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç¬¬&lt;code&gt;i&lt;/code&gt;å¤©ä¸æŒæœ‰è‚¡ç¥¨&lt;br/&gt;äº¤æ˜“&lt;code&gt;1&lt;/code&gt;æ¬¡&lt;/td&gt;
&lt;td&gt;&lt;code&gt;max(dp[i-1][1][0] + prices[i], dp[i-1][0][1])&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ­¤æ—¶å¯èƒ½æƒ…å†µä¸ºï¼š&lt;br/&gt;1. å‰ä¸€å¤©æŒæœ‰ï¼Œåœ¨ä»Šå¤©å–å‡º&lt;br/&gt;2. å‰ä¸€å¤©ä¸æŒæœ‰ï¼Œå¾ˆæ—©ä»¥å‰å°±å–äº†ä¸€æ¬¡&lt;br/&gt;psï¼šå·²ç»å®Œæˆäº†ç¬¬ä¸€è½®äº¤æ˜“&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;9&quot;&gt;&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;&lt;code&gt;dp[i][0][2]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç¬¬&lt;code&gt;i&lt;/code&gt;å¤©ä¸æŒæœ‰è‚¡ç¥¨&lt;br/&gt;äº¤æ˜“&lt;code&gt;2&lt;/code&gt;æ¬¡&lt;/td&gt;
&lt;td&gt;&lt;code&gt;max(dp[i-1][1][1] + prices[i], dp[i-1][0][2])&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ­¤æ—¶å¯èƒ½æƒ…å†µä¸ºï¼š&lt;br/&gt;1. å‰ä¸€å¤©æŒæœ‰,ä»Šå¤©å–å‡º&lt;br/&gt;2. å‰ä¸€å¤©ä¸æŒæœ‰ï¼Œå¾ˆæ—©ä»¥å‰å–å‡º&lt;br/&gt;psï¼šå·²ç»å®Œæˆäº†ç¬¬äºŒè½®äº¤æ˜“&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;9&quot;&gt;&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;&lt;code&gt;dp[i][1][0]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç¬¬&lt;code&gt;i&lt;/code&gt;å¤©æŒæœ‰è‚¡ç¥¨&lt;br/&gt;äº¤æ˜“&lt;code&gt;0&lt;/code&gt;æ¬¡&lt;/td&gt;
&lt;td&gt;&lt;code&gt;max(dp[i-1][1][0], dp[i-1][0][0] - prices[i])&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ­¤æ—¶å¯èƒ½æƒ…å†µä¸ºï¼š&lt;br/&gt;1. å‰ä¸€å¤©å°±æŒæœ‰è‚¡ç¥¨,ä»Šå¤©ç»§ç»­æŒæœ‰&lt;br/&gt;2. å‰ä¸€å¤©æœªæŒä»Šå¤©ä¹°å…¥&lt;br/&gt;psï¼šè¿›è¡Œç¬¬ä¸€è½®äº¤æ˜“çš„æŒæœ‰æ“ä½œ&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;8&quot;&gt;&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;&lt;code&gt;dp[i][1][1]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç¬¬&lt;code&gt;i&lt;/code&gt;å¤©æŒæœ‰è‚¡ç¥¨&lt;br/&gt;äº¤æ˜“&lt;code&gt;1&lt;/code&gt;æ¬¡&lt;/td&gt;
&lt;td&gt;&lt;code&gt;max(dp[i-1][1][1], dp[i-1][0][1] - prices[i])&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ­¤æ—¶å¯èƒ½æƒ…å†µä¸ºï¼š&lt;br/&gt;1. å‰ä¸€å¤©å°±æŒæœ‰è‚¡ç¥¨ï¼Œä»Šå¤©ç»§ç»­æŒæœ‰&lt;br/&gt;2. å‰ä¸€å¤©æœªæŒæœ‰ä»Šå¤©ä¹°å…¥&lt;br/&gt;psï¼šè¿›è¡Œç¬¬äºŒè½®äº¤æ˜“çš„æŒæœ‰æ“ä½œ&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td&gt;6&lt;/td&gt;
&lt;td&gt;&lt;code&gt;dp[i][1][2]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ç¬¬&lt;code&gt;i&lt;/code&gt;å¤©æŒæœ‰è‚¡ç¥¨&lt;br/&gt;äº¤æ˜“&lt;code&gt;2&lt;/code&gt;æ¬¡&lt;/td&gt;
&lt;td&gt;&lt;code&gt;0&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ­¤æ—¶è¶…å‡ºæˆ‘ä»¬äº¤æ˜“æ¬¡æ•°é™åˆ¶&lt;br/&gt;ç›´æ¥è¿”å›0å³å¯&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;â€œå…³äºæœ€ç»ˆç»“æœâ€&lt;br/&gt;â€œæˆ‘å¯ä»¥æ˜¯äº¤æ˜“ä¸€æ¬¡ï¼Œä¹Ÿå¯ä»¥æ˜¯äº¤æ˜“ä¸¤æ¬¡ï¼Œä¹Ÿå¯ä»¥ä¸äº¤æ˜“ï¼Œåªè¦ä¿è¯åˆ©æ¶¦æœ€å¤§å³å¯â€&lt;/p&gt;
&lt;p&gt;â€œè‡³äºåˆå§‹å€¼â€&lt;br/&gt;â€œç¬¬ä¸€å¤©åªæœ‰ç¬¬ä¸€æ¬¡ä¹°å…¥å’Œä¸æ“ä½œæ‰æ˜¯æ­£å¸¸ï¼Œå…¶ä»–å››ç§æƒ…å†µéƒ½æ˜¯éæ³•ï¼Œç›´æ¥ç»™ä¸ªæœ€å°å€¼å°±å¯ä»¥äº†â€&lt;/p&gt;
&lt;p&gt;â€œä½ çœ‹æˆ‘åˆ†æçš„å¯¹å—ï¼Ÿâ€&lt;/p&gt;
&lt;p&gt;â€œå¯ä»¥å•Šï¼Œç½—æ‹‰ï¼Œä½ è¿™æ€è·¯å¾ˆæ­£ç¡®å•Šâ€å…«å“¥çœ‹äº†ç½—æ‹‰åˆ†æï¼Œæœ‰ç‚¹æƒŠè®¶ç½—æ‹‰å±…ç„¶ä¸€æ¬¡å°±åˆ†æå‡ºæ¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;â€œæ¯•ç«Ÿä¹Ÿåšäº†è¿™ä¹ˆå¤šåŠ¨æ€äº†ï¼Œè¿˜æœ‰å‰é¢å‡ ä¸ªæ¡ˆä¾‹æ‰“åº•ï¼Œåº”è¯¥çš„ï¼Œåº”è¯¥çš„ã€‚â€&lt;br/&gt;ç½—æ‹‰ä¹Ÿæ˜¯å°å°éª„å‚²ä¸€ä¸‹ï¼Œå½“ç„¶è¿˜æ˜¯å¾—ä½è°ƒã€‚&lt;/p&gt;
&lt;p&gt;â€œæ—¢ç„¶åˆ†æå‡ºæ¥äº†ï¼Œshow me your codeâ€&lt;/p&gt;
&lt;p&gt;â€œè¡Œï¼Œæ—¢ç„¶éƒ½å†™å‡ºçŠ¶æ€è½¬æ¢äº†ï¼Œä»£ç è¿˜ä¸å®¹æ˜“ï¼Ÿç­‰ç€â€&lt;/p&gt;
&lt;p&gt;å‡ åˆ†é’Ÿå&lt;/p&gt;
&lt;p&gt;â€œè¯ºï¼Œå®ç°äº†ï¼Œä½ çœ‹çœ‹â€&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;public class StockTrading {
    public static void main(String[] args) {
        int[] prices = {3, 3, 5, 0, 0, 3, 1, 4};
        int[] pricesUp = {2, 3, 4, 5, 6, 7, 8, 9};
        int[] pricesDown = {9, 8, 7, 6, 5, 4, 3, 2};
        System.out.println(&quot;prices ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading5(prices));
        System.out.println(&quot;pricesUp ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading5(pricesUp));
        System.out.println(&quot;pricesDown ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading5(pricesDown));
    }

    public static int stockTrading5(int[] prices) {
        //å¯¹äºä»»æ„ä¸€å¤©ï¼Œæˆ‘å¯èƒ½å¾—çŠ¶æ€ä¸ºæŒè‚¡ï¼Œæˆ–è€…ä¸æŒè‚¡ï¼Œå¹¶ä¸”å¯èƒ½å·²ç»äº¤æ˜“äº†å¤šæ¬¡äº†ã€‚
        //æ‰€ä»¥æˆ‘å¯ä»¥è®°å½•ç¬¬iå¤©çš„ä¸¤ä¸ªç»´åº¦çš„çŠ¶æ€ï¼šdp[å¤©æ•°][å½“å‰æ˜¯å¦æŒè‚¡][å–å‡ºçš„æ¬¡æ•°]=&amp;gt;dp[i][j][k]
        //æ‰€ä»¥æ¯ä¸€å¤©å°±æœ‰å…­ç§æƒ…å†µ,åˆ†åˆ«ä¸º
        //1. ç¬¬iå¤©ä¸æŒæœ‰è‚¡ç¥¨ï¼Œäº¤æ˜“0æ¬¡ï¼Œå³ä»å¤´åˆ°å°¾éƒ½æ²¡æœ‰äº¤æ˜“è¿‡,ï¼Œåˆ©æ¶¦ä¸º0ï¼Œ(æ²¡æœ‰è¿›è¡Œè¿‡äº¤æ˜“)
        //dp[i][0][0] = 0;ï¼ˆä¹Ÿå¯ä»¥å†™æˆ dp[i][0][0] = dp[i - 1][0][0]ï¼Œå› ä¸ºå‰ä¸€å¤©ä¹Ÿä¸€å®šæ˜¯ä¸€æ ·çš„çŠ¶æ€ï¼‰
        //2. ç¬¬iå¤©ä¸æŒæœ‰è‚¡ç¥¨ï¼Œäº¤æ˜“1æ¬¡ï¼Œæ­¤æ—¶å¯èƒ½æ˜¯æ˜¨å¤©æŒæœ‰ï¼Œæœªå–å‡ºè¿‡ï¼Œåœ¨ä»Šå¤©å–å‡ºï¼ˆä»Šå¤©æ‰å–ï¼‰ï¼›æˆ–æ˜¯æ˜¨å¤©ä¸æŒæœ‰ï¼Œä½†æ˜¯å·²ç»ä¹°å‡ºä¸€æ¬¡ï¼ˆå¾ˆæ—©ä»¥å‰å°±å–äº†ï¼‰(å·²ç»å®Œæˆäº†ä¸€è½®è½®äº¤æ˜“)
        //dp[i][0][1] = Math.max(dp[i - 1][1][0] + prices[i], dp[i - 1][0][1]);
        //3. ç¬¬iå¤©ä¸æŒæœ‰è‚¡ç¥¨ï¼Œäº¤æ˜“2æ¬¡ï¼Œæ­¤æ—¶å¯èƒ½æ˜¯æ­¤æ—¶å¯èƒ½æ˜¯æ˜¨å¤©æŒæœ‰å¹¶ä¸”å·²ç»å–å‡ºä¸€æ¬¡ï¼Œç¬¬äºŒæ¬¡æŒæœ‰æœªå–å‡ºè¿‡ï¼Œåœ¨ä»Šå¤©å–å‡ºï¼ˆä»Šå¤©æ‰å–ï¼‰ï¼›æˆ–æ˜¯æ˜¨å¤©ä¸æŒæœ‰ï¼Œä½†æ˜¯å·²ç»ä¹°å‡ºä¸¤æ¬¡(æ­¤æ—¶ä¸ºç¬¬ä¸€è½®ä¹°å…¥)(å·²ç»å®Œæˆäº†ä¸¤è½®äº¤æ˜“)
        //dp[i][0][2] = Math.max(dp[i - 1][1][1] + prices[i], dp[i - 1][0][2]);
        //4. ç¬¬iå¤©æŒæœ‰è‚¡ç¥¨,äº¤æ˜“0æ¬¡ï¼Œæ­¤æ—¶å¯èƒ½æ˜¯å‰ä¸€å¤©å°±æŒæœ‰è‚¡ç¥¨ï¼Œä»Šå¤©ç»§ç»­æŒæœ‰ï¼›æˆ–è€…æ˜¨å¤©æœªæŒä»Šå¤©ä¹°å…¥(æ­¤æ—¶ä¸ºç¬¬ä¸€è½®ä¹°å…¥)
        //dp[i][1][0] = Math.max(dp[i - 1][1][0], dp[i - 1][0][0] - prices[i]);
        //5. ç¬¬iå¤©æŒæœ‰è‚¡ç¥¨,äº¤æ˜“1æ¬¡ï¼Œæ­¤æ—¶å¯èƒ½æ˜¯å‰ä¸€å¤©å°±æŒæœ‰è‚¡ç¥¨ï¼Œä»Šå¤©ç»§ç»­æŒæœ‰ï¼›æˆ–è€…æ˜¨å¤©æœªæŒä»Šå¤©ä¹°å…¥(æ­¤æ—¶ä¸ºç¬¬äºŒè½®ä¹°å…¥)
        // dp[i][1][1] = Math.max(dp[i - 1][1][1], dp[i - 1][0][1] - prices[i]);
        //6. ç¬¬iå¤©æŒæœ‰è‚¡ç¥¨,äº¤æ˜“2æ¬¡ï¼Œæ­¤æ—¶è¶…å‡ºæˆ‘ä»¬äº¤æ˜“æ¬¡æ•°é™åˆ¶ï¼Œç›´æ¥è¿”å›0å³å¯
        //dp[i][1][2] = 0;
        int[][][] dp = new int[prices.length + 1][2][3];
        //ä¸æ“ä½œï¼Œæ‰€ä»¥åˆ©æ¶¦ä¸º0
        dp[0][0][0] = 0;
        //ä¹°å…¥è‚¡ç¥¨ï¼Œæ‰€ä»¥ä¸ºæ”¯å‡º
        dp[0][1][0] = -prices[0];
        //ä¸å¯èƒ½æƒ…å†µ
        int MIN_VALUE = Integer.MIN_VALUE &amp;gt;&amp;gt; 1;//å› ä¸ºæœ€å°å€¼å†å‡å»1å°±æ˜¯æœ€å¤§å€¼Integer.MIN_VALUE-1=Integer.MAX_VALUE,æ‰€ä»¥ä¸èƒ½ç›´æ¥ç”¨æœ€å°å€¼ï¼Œå¯ä»¥æé™è®¾ç½®ä¸ºint MIN_VALUE = - prices[0] - 1ï¼›
        dp[0][0][1] = MIN_VALUE;
        dp[0][0][2] = MIN_VALUE;
        dp[0][1][1] = MIN_VALUE;
        dp[0][1][2] = MIN_VALUE;

        for (int i = 1; i &amp;lt; prices.length; i++) {
            dp[i][0][0] = 0;
            dp[i][0][1] = Math.max(dp[i - 1][1][0] + prices[i], dp[i - 1][0][1]);
            dp[i][0][2] = Math.max(dp[i - 1][1][1] + prices[i], dp[i - 1][0][2]);
            dp[i][1][0] = Math.max(dp[i - 1][1][0], dp[i - 1][0][0] - prices[i]);
            dp[i][1][1] = Math.max(dp[i - 1][1][1], dp[i - 1][0][1] - prices[i]);
            dp[i][1][2] = 0;

        }
        //æœ€ç»ˆçš„ç»“æœæˆ‘å¯ä»¥æ˜¯äº¤æ˜“ä¸€æ¬¡ï¼Œä¹Ÿå¯ä»¥æ˜¯äº¤æ˜“ä¸¤æ¬¡ï¼Œä¹Ÿå¯ä»¥ä¸äº¤æ˜“ï¼Œä½†æ˜¯ä¸ç®¡æ€æ ·ï¼Œæœ€ç»ˆçš„çŠ¶æ€éƒ½æ˜¯ä¸æŒæœ‰è‚¡ç¥¨
        return Math.max(dp[prices.length - 1][0][1], dp[prices.length - 1][0][2] &amp;gt; 0 ? dp[prices.length - 1][0][2] : 0);
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;//è¾“å‡ºç»“æœ
prices ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 6
pricesUp ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 7
pricesDown ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 0
&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;æ³¨æ„ï¼šè¿™é‡ŒMIN_VALUEä¸€å®šè¦è®¾ç½®ä¸ºæ¯”&lt;code&gt;(-prices[0])&lt;/code&gt;å°ï¼Œå…·ä½“åŸå› ï¼Œçœ‹çœ‹è½¬æ¢å…³ç³»å°±çŸ¥é“äº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;â€œä¸é”™ï¼Œç°åœ¨é—®é¢˜æ¥äº†ï¼Œä½ èƒ½å‹ç¼©ä¸€ä¸‹ç©ºé—´å—ï¼Ÿæ¯•ç«Ÿä¸‰ç»´æ•°æ®æ˜¯éœ€è¦å æ®ä¸€å®šç©ºé—´çš„ã€‚â€å…«å“¥è¿›ä¸€æ­¥é—®é“&lt;/p&gt;
&lt;p&gt;â€œæˆ‘è§‰å¾—æˆ‘å¯ä»¥è¯•è¯•ï¼ŒæŒ‰ç…§å‰é¢æ€è·¯åº”è¯¥æœ‰è¿¹å¯å¾ªâ€&lt;br/&gt;ç½—æ‹‰æƒ³äº†ä¸€ä¸‹&lt;br/&gt;â€œæ ¹æ®ä¹‹å‰çš„çŠ¶æ€è½¬æ¢å¯çŸ¥â€&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;dp[i][0][0] = 0;
dp[i][0][1] = Math.max(dp[i - 1][1][0] + prices[i], dp[i - 1][0][1]);
dp[i][0][2] = Math.max(dp[i - 1][1][1] + prices[i], dp[i - 1][0][2]);
dp[i][1][0] = Math.max(dp[i - 1][1][0], dp[i - 1][0][0] - prices[i]);
dp[i][1][1] = Math.max(dp[i - 1][1][1], dp[i - 1][0][1] - prices[i]);
dp[i][1][2] = 0;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;â€œè™½ç„¶æœ‰å…­ä¸ªçŠ¶æ€ï¼ŒçœŸæ­£å†³å®šæœ€ååˆ©æ¶¦çš„åªæœ‰å››ä¸ªçŠ¶æ€â€&lt;br/&gt;â€œåˆ†åˆ«ä¸º&lt;code&gt;dp[i][0][1]ã€dp[i][0][2]ï¼Œdp[i][1][0]ï¼Œdp[i][1][1]&lt;/code&gt;â€&lt;br/&gt;â€œæˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªå››ä¸ªçŠ¶æ€ç”¨ä¸€ä¸ªå˜é‡è¡¨ç¤ºå½“å‰çŠ¶æ€çš„æœ€å¤§åˆ©æ¶¦ï¼Œå¦‚ä¸‹ï¼šâ€&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;çŠ¶æ€&lt;/th&gt;
&lt;th&gt;å˜é‡&lt;/th&gt;
&lt;th&gt;å«ä¹‰&lt;/th&gt;
&lt;th&gt;çŠ¶æ€è½¬æ¢&lt;/th&gt;
&lt;th&gt;å¤‡æ³¨&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody readability=&quot;8.5&quot;&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;&lt;code&gt;dp[i][1][0]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;fstBuy&lt;/td&gt;
&lt;td&gt;ç¬¬ä¸€æ¬¡ä¹°&lt;/td&gt;
&lt;td&gt;&lt;code&gt;max(fstBuy, -price)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ­¤æ—¶å¯èƒ½æƒ…å†µä¸ºï¼š&lt;br/&gt;1. ä¹‹å‰ä¹°äº†ç¬¬ä¸€æ¬¡&lt;br/&gt;2. ç°åœ¨ä¹°ç¬¬ä¸€æ¬¡&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td&gt;&lt;code&gt;dp[i][0][1]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;fstSell&lt;/td&gt;
&lt;td&gt;ç¬¬ä¸€æ¬¡å–&lt;/td&gt;
&lt;td&gt;&lt;code&gt;max(fstSell, fstBuy + price)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ­¤æ—¶å¯èƒ½æƒ…å†µä¸ºï¼š&lt;br/&gt;1. ä¹‹å‰å°±å–äº†ç¬¬ä¸€æ¬¡&lt;br/&gt;2. ç°åœ¨ç¬¬ä¸€æ¬¡å–&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td&gt;&lt;code&gt;dp[i][1][1]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;secBuy&lt;/td&gt;
&lt;td&gt;ç¬¬äºŒæ¬¡ä¹°&lt;/td&gt;
&lt;td&gt;&lt;code&gt;max(secBuy, fstSell - price)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ­¤æ—¶å¯èƒ½æƒ…å†µä¸ºï¼š&lt;br/&gt;1. ä¹‹å‰ä¹°äº†ç¬¬äºŒæ¬¡&lt;br/&gt;2. ç°åœ¨ç¬¬äºŒæ¬¡ä¹°&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td&gt;&lt;code&gt;dp[i][0][2]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;secSell&lt;/td&gt;
&lt;td&gt;ç¬¬äºŒæ¬¡å–&lt;/td&gt;
&lt;td&gt;&lt;code&gt;max(secSell, secBuy + price)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ­¤æ—¶å¯èƒ½æƒ…å†µä¸ºï¼š&lt;br/&gt;1. ä¹‹å‰å·²ç»å–äº†ç¬¬äºŒæ¬¡&lt;br/&gt;2. ç°åœ¨æ‰ç¬¬äºŒæ¬¡å–&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;â€œæ­¤æ—¶çš„ä»£ç å®ç°å¦‚ä¸‹ï¼šâ€&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;public class StockTrading {
    public static void main(String[] args) {
        int[] prices = {3, 3, 5, 0, 0, 3, 1, 4};
        int[] pricesUp = {2, 3, 4, 5, 6, 7, 8, 9};
        int[] pricesDown = {9, 8, 7, 6, 5, 4, 3, 2};
        System.out.println(&quot;prices ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading5(prices));
        System.out.println(&quot;pricesUp ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading5(pricesUp));
        System.out.println(&quot;pricesDown ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading5(pricesDown));
    }

    public static int stockTrading5(int[] prices) {
        //æ³¨æ„ç¬¬ä¸€æ¬¡å–å’Œç¬¬äºŒæ¬¡å–çš„åˆå§‹å€¼ï¼Œä¸€å®šè¦æ¯”prices[0]å°
        int fstBuy = Integer.MIN_VALUE, fstSell = 0;
        int secBuy = Integer.MIN_VALUE, secSell = 0;
        for (int price : prices) {
            //ç¬¬ä¸€æ¬¡ä¹°ï¼šè¦ä¹ˆä¹‹å‰ä¹°è¿‡ï¼Œè¦ä¹ˆç°åœ¨ä¹°
            fstBuy = Math.max(fstBuy, -price);
            //ç¬¬ä¸€æ¬¡å–ï¼Œè¦ä¹ˆä¹‹å‰å°±å–äº†ï¼Œè¦ä¹ˆç°åœ¨ç¬¬ä¸€æ¬¡å–
            fstSell = Math.max(fstSell, fstBuy + price);
            //ç¬¬äºŒæ¬¡ä¹°:è¦ä¹ˆä¹‹å‰ä¹°äº†ï¼Œè¦ä¹ˆç°åœ¨ç¬¬äºŒæ¬¡ä¹°
            secBuy = Math.max(secBuy, fstSell - price);
            //ç¬¬äºŒæ¬¡å–ï¼šè¦ä¹ˆä¹‹å‰å·²ç»å–äº†ï¼Œè¦ä¹ˆç°åœ¨æ‰ç¬¬äºŒæ¬¡å–
            secSell = Math.max(secSell, secBuy + price);
        }
        return secSell;
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;//è¾“å‡ºç»“æœ
prices ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 6
pricesUp ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 7
pricesDown ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 0
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;â€œä½ çœ‹çœ‹â€&lt;/p&gt;
&lt;p&gt;â€œå—¯ï¼Œä¸é”™ï¼Œçœ‹æ¥å¾ªåºæ¸è¿›è¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œå¦‚æœä¸€å¼€å§‹ç›´æ¥ç»™ä½ è¿™ä¸ªä¼°è®¡ä½ å°±è’™é€¼äº†â€&lt;/p&gt;
&lt;p&gt;â€œç¡®å®ï¼Œæœ‰å‰é¢çš„æ‰“åº•ï¼Œæ€è·¯æ¯”è¾ƒæ¸…æ™°ï¼Œå¦‚æœç›´æ¥ä¸Šæ¥å°±æ˜¯è¿™ä¸ªï¼Œè€å®è¯´æ¯«æ— æ€è·¯ã€‚â€ç½—æ‹‰çˆ½å¿«æ‰¿è®¤&lt;br/&gt;â€œè¯è¯´è¿˜æœ‰ä¸€ä¸ªå§ï¼Œçœ‹çœ‹æœ€åä¸€ä¸ªèƒ½ä¸èƒ½åšå‡ºæ¥ã€‚â€ç½—æ‹‰åšäº†å‡ ä¸ªï¼Œçƒ­æƒ…ä¸Šæ¥äº†ï¼Œæœ‰ç‚¹éš¾ä»¥é˜»æŒ¡&lt;/p&gt;
&lt;p&gt;â€œå¥½ï¼Œè¿˜æœ‰æœ€åä¸€ä¸ªï¼Œè¯·çœ‹é¢˜â€&lt;/p&gt;
&lt;hr/&gt;&lt;h3 id=&quot;ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºkæ¬¡äº¤æ˜“&quot;&gt;ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº(kæ¬¡äº¤æ˜“)&lt;/h3&gt;
&lt;p&gt;â€œç¬¬å…­ä¸ªé¢˜ç›®æ˜¯ï¼šâ€&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„Â prices ï¼Œå®ƒçš„ç¬¬ i ä¸ªå…ƒç´ Â prices[i] æ˜¯ä¸€æ”¯ç»™å®šçš„è‚¡ç¥¨åœ¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚&lt;br/&gt;è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚ä½ æœ€å¤šå¯ä»¥å®Œæˆ k ç¬”äº¤æ˜“ã€‚&lt;br/&gt;æ³¨æ„ï¼šä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;â€œå®Œæ•´çš„kæ¬¡äº¤æ˜“ä¸ºï¼šâ€&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1293390/202012/1293390-20201231225109909-385257873.png&quot; alt=&quot;å®Œæ•´çš„kæ¬¡äº¤æ˜“ä¸º&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;â€œè¯·é—®ç°åœ¨è¦å¦‚ä½•åšï¼Ÿâ€&lt;/p&gt;
&lt;p&gt;â€œè¿™...,å­—é¢æ„ä¹‰å‘Šè¯‰æˆ‘ï¼Œè¿™ä¸ªæ˜¯ç¬¬äº”ä¸ªæ‹“å±•ï¼Œå¯ä»¥åœ¨ç¬¬äº”ä¸ªçš„åŸºç¡€ä¸Šæƒ³æƒ³ã€‚â€ ç½—æ‹‰æƒ³äº†ä¸€ä¼šé“&lt;/p&gt;
&lt;p&gt;â€œç¡®å®ï¼Œä¸è¿‡èƒ½ä¸èƒ½æƒ³å‡ºæ¥å°±æ˜¯å¦ä¸€ä¸ªé—®é¢˜äº†â€&lt;/p&gt;
&lt;p&gt;â€œæˆ‘è¯•è¯•â€&lt;br/&gt;â€œå¯¹äºæ¯ä¸€å¤©æ¥è¯´ï¼Œæˆ‘åªæœ‰ä¸¤ä¸ªçŠ¶æ€ï¼ŒæŒæœ‰æˆ–è€…ä¸æŒæœ‰â€&lt;br/&gt;â€œä½†æ˜¯æˆ‘ä»¬ç°åœ¨å› ä¸ºäº¤æ˜“æ¬¡æ•°kçš„é™åˆ¶ï¼Œæˆ‘ä»¬å¿…é¡»è¦è€ƒè™‘æ¯ä¸€æ¬¡äº¤æ˜“çš„çŠ¶æ€â€&lt;br/&gt;â€œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¢åŠ ä¸€ä¸ªå”¯ç‹¬æ¥æè¿°ç°åœ¨æ˜¯ç¬¬å‡ æ¬¡äº¤æ˜“â€&lt;br/&gt;â€œå¯¹æ­¤å¯ä»¥é€šè¿‡&lt;code&gt;dp[å–å‡ºçš„æ¬¡æ•°][å½“å‰æ˜¯å¦æŒè‚¡]=dp[k][i]&lt;/code&gt;æ¥è®°å½•çŠ¶æ€â€&lt;br/&gt;â€œå…¶ä¸­&lt;code&gt;i={0ï¼Œ1}ï¼›0è¡¨ç¤ºå–å‡º,1è¡¨ç¤ºæŒæœ‰&lt;/code&gt;â€&lt;br/&gt;â€œç›¸åº”çš„çŠ¶æ€è½¬æ¢ä¹Ÿå¯ä»¥åˆ—å‡ºæ¥ï¼Œå¦‚ä¸‹è¡¨â€&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;çŠ¶æ€&lt;/th&gt;
&lt;th&gt;å«ä¹‰&lt;/th&gt;
&lt;th&gt;çŠ¶æ€è½¬æ¢&lt;/th&gt;
&lt;th&gt;å¤‡æ³¨&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody readability=&quot;5&quot;&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td&gt;dp[i][0]&lt;/td&gt;
&lt;td&gt;ç¬¬iæ¬¡ä¸æŒæœ‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;max(dp[i][0],dp[i][1]+price)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ­¤æ—¶å¯èƒ½æƒ…å†µä¸ºï¼š&lt;br/&gt;1. æœ¬æ¥ä¸æŒæœ‰ï¼Œè¿™æ¬¡ä¸æ“ä½œ&lt;br/&gt;2. ç¬¬iæ¬¡æŒæœ‰ç°åœ¨å–å‡º&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td&gt;dp[i][1]&lt;/td&gt;
&lt;td&gt;ç¬¬iæ¬¡æŒæœ‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;max(dp[i][1],dp[i-1][0]-price)&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ­¤æ—¶å¯èƒ½æƒ…å†µä¸ºï¼š&lt;br/&gt;1. æœ¬æ¥æŒæœ‰ï¼Œè¿™æ¬¡ä¸æ“ä½œ&lt;br/&gt;2. å‰ä¸€æ¬¡ä¸æŒæœ‰ï¼Œç°åœ¨ä¹°å…¥&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;â€œé‚£å…ˆåœ¨å°±å¯ä»¥å†™å‡ºç›¸åº”çš„ä»£ç äº†â€&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;public class StockTrading {
    public static void main(String[] args) {
        int[] prices = {3, 3, 5, 0, 0, 3, 1, 4};
        int[] pricesUp = {2, 3, 4, 5, 6, 7, 8, 9};
        int[] pricesDown = {9, 8, 7, 6, 5, 4, 3, 2};
        System.out.println(&quot;prices ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading6(prices, 2));
        System.out.println(&quot;pricesUp ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading6(pricesUp, 7));
        System.out.println(&quot;pricesDown ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: &quot; + stockTrading6(pricesDown, 7));
    }

    public static int stockTrading6(int[] prices, int k) {
        //å¦‚æœäº¤æ˜“æ¬¡æ•°å°äº1ï¼Œè¿”å›0
        if (k &amp;lt; 1) return 0;
        //å¦‚æœäº¤æ˜“æ¬¡æ•°å¤§äºç­‰äºæ•°ç»„é•¿åº¦ï¼Œæ­¤æ—¶å°±æ˜¯ç¬¬äºŒç§æƒ…å†µ
        if (k &amp;gt;= prices.length / 2) return stockTrading2(prices);
        //æ¯ä¸€å¤©åªæœ‰ä¸¤ä¸ªçŠ¶æ€ï¼šä¹°å…¥å’Œå–å‡º
        //ä½†æ˜¯æˆ‘ä»¬éœ€è¦è€ƒè™‘æ¬¡æ•°ké™åˆ¶ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¢åŠ ä¸€ä¸ªç»´åº¦æè¿°ç¬¬å‡ æ¬¡äº¤æ˜“
        //dp[å–å‡ºçš„æ¬¡æ•°][å½“å‰æ˜¯å¦æŒè‚¡]=dp[k][i],å…¶ä¸­1={0ï¼Œ1}ï¼›0è¡¨ç¤ºå–å‡º,1è¡¨ç¤ºæŒæœ‰
        //æ­¤æ—¶åªæœ‰ä¸¤ç§çŠ¶æ€ï¼š
        //1.ç¬¬iæ¬¡ä¸æŒæœ‰ï¼šæ­¤æ—¶æƒ…å†µä¸ºï¼šæœ¬æ¥ä¸æŒæœ‰ï¼Œè¿™æ¬¡ä¸æ“ä½œï¼›è¦ä¹ˆç¬¬iæ¬¡æŒæœ‰ç°åœ¨å–å‡º
        //dp[i][0] = (dp[i][0],dp[i][1]+price)
        //2.ç¬¬iæ¬¡æŒæœ‰ï¼šæ­¤æ—¶æƒ…å†µä¸ºï¼šæœ¬æ¥æŒæœ‰ï¼Œè¿™æ¬¡ä¸æ“ä½œï¼›è¦ä¹ˆå‰ä¸€æ¬¡ä¸æŒæœ‰æŒæœ‰ç°åœ¨ä¹°å…¥
        //dp[i][1] = (dp[i][1],dp[i-1][0]-price)
        int[][] dp = new int[k][2];
        //è¾¹ç•Œå€¼ï¼šåˆå§‹æŒæœ‰çš„æœ€å°å€¼ä¸€å®šè¦å°äºpricesçš„æœ€å°å€¼
        for (int i = 0; i &amp;lt; k; i++) dp[i][1] = Integer.MIN_VALUE;
        for (int price : prices) {
            //æ³¨æ„è¦é‡è®¾ç¬¬ä¸€æ¬¡äº¤æ˜“çš„åˆå§‹å€¼ï¼Œå¦åˆ™å­˜åœ¨æŸä¸€å¤©å¤šæ¬¡äº¤æ˜“é—®é¢˜
            //ç¬¬ä¸€æ¬¡ä¸æŒæœ‰ï¼šè¦ä¹ˆä¹‹å‰å°±ä¸æŒæœ‰ï¼Œæ­¤æ—¶ä¸æ“ä½œï¼›è¦ä¹ˆä¹‹å‰æŒæœ‰ï¼Œç°åœ¨ç¬¬ä¸€æ¬¡å–å‡ºå…¥
            dp[0][0] = Math.max(dp[0][0], dp[0][1] + price);
            //ç¬¬ä¸€æ¬¡æŒæœ‰: è¦ä¹ˆä¹‹å‰å°±æ˜¯ç¬¬ä¸€æ¬¡æŒæœ‰ï¼Œæ­¤æ—¶ä¸æ“ä½œï¼›è¦ä¹ˆä¹‹å‰ä¸æŒæœ‰ï¼Œç°åœ¨ç¬¬ä¸€æ¬¡ä¹°å…¥
            dp[0][1] = Math.max(dp[0][1], -price);
            for (int i = 1; i &amp;lt; k; i++) {
                dp[i][0] = Math.max(dp[i][0], dp[i][1] + price);
                dp[i][1] = Math.max(dp[i][1], dp[i - 1][0] - price);
            }
        }
        return dp[k - 1][0];
    }

    public static int stockTrading2(int[] prices) {
        if (prices == null || prices.length &amp;lt; 2) return 0;
        int sell = 0, buy = -prices[0], tmp = 0;
        for (int i = 1; i &amp;lt; prices.length; i++) {
            tmp = sell;
            sell = Math.max(sell, buy + prices[i]);
            buy = Math.max(buy, tmp - prices[i]);
        }
        return sell;
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;//è¾“å‡ºç»“æœï¼š
prices ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 6
pricesUp ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 7
pricesDown ä¸é™æ¬¡äº¤æ˜“æœ€å¤§åˆ©æ¶¦ä¸º: 0
&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;æ­¤å¤„éœ€è¦æ³¨æ„å»æ‰ä¸€å¤©å¤šæ¬¡äº¤æ˜“çš„é—®é¢˜ï¼Œ&lt;br/&gt;è¿™ä¸ªå¯ä»¥é€šè¿‡é€†åºå†…å¾ªç¯è§£å†³ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ¯æ¬¡é‡å¤åˆå§‹åŒ–ç¬¬ä¸€å¤©çŠ¶æ€è§£å†³ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;â€œæ€æ ·ï¼Œç»“æœæ²¡é”™å§â€ç½—æ‹‰å¾—æ„é“&lt;/p&gt;
&lt;p&gt;â€œç¡®å®ï¼Œå¾ˆä¸é”™äº†ï¼Œæˆ‘è¿˜ä»¥ä¸ºä½ ä¼šç”¨ä¸‰ä¸ªdp[å¤©æ•°][æ˜¯å¦æŒæœ‰è‚¡ç¥¨][ç¬¬kæ¬¡äº¤æ˜“]çš„æ–¹å¼æ¥åšï¼Œæ¯”æˆ‘é¢„æƒ³çš„å¥½ã€‚â€å…«å“¥æ„Ÿæ…¨ã€‚&lt;/p&gt;
&lt;p&gt;â€œä¸€å¼€å§‹ç¡®å®è¿™ä¹ˆæƒ³ï¼Œä½†æ˜¯æ¯•ç«Ÿå‰é¢ä¹Ÿæœ‰è¿‡æœ‰è¿‡ä¼˜åŒ–æ–¹æ¡ˆï¼Œå°±æƒ³ç€ç›´æ¥ä¼˜åŒ–åçš„æ–¹æ¡ˆçœ‹çœ‹èƒ½ä¸èƒ½å†™å‡ºæ¥ï¼Œçœ‹æ¥è¿˜æŒºé¡ºåˆ©çš„ã€‚â€&lt;br/&gt;â€œè¿™ä¸ªè¿˜èƒ½ä¼˜åŒ–å˜›ï¼Ÿâ€ç½—æ‹‰ç–‘æƒ‘é“ã€‚&lt;/p&gt;
&lt;p&gt;â€œå­¦æ— æ­¢å¢ƒï¼Œåº”è¯¥è¿˜æœ‰ä¼˜åŒ–çš„ç©ºé—´å§ï¼Œä¸è¿‡æˆ‘ç›®å‰ä¹Ÿæ²¡æƒ³åˆ°æ¯”ä½ ç°åœ¨æ›´å¥½çš„æ–¹æ³•å§â€&lt;/p&gt;
&lt;p&gt;â€œå“ï¼Œè¦æ˜¯æˆ‘ç‚’è‚¡ä¹Ÿèƒ½è¿™æ ·ï¼Œå¯Œå©†æ¢¦æ—©å°±å®ç°äº†â€&lt;/p&gt;
&lt;p&gt;â€œå¾—äº†å§ï¼ŒæŠŠè‚¡ç¥¨ä»·æ ¼éƒ½åˆ—å‡ºæ¥æ¥ç»™ä½ ï¼Œè°è¿˜ç‚’è‚¡...â€å…«å“¥æ— é™é„™è§†ç½—æ‹‰ã€‚&lt;/p&gt;
&lt;p&gt;â€œå…ˆæ‰“ä½ï¼Œå‡ºå»åƒé¥­å§ï¼Œä»Šæ™šè·¨å¹´å‘¢â€&lt;/p&gt;
&lt;p&gt;â€œè¡Œï¼Œèµ°å§ï¼Œå»é€åˆ«2020â€&lt;/p&gt;
&lt;p&gt;ç°åœ¨æ˜¯20201231å·ï¼Œæå‰ç¥å¤§å®¶å…ƒæ—¦å¿«ä¹ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä¸ºåŸåˆ›æ–‡ç« ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼ï¼ï¼&lt;/p&gt;
&lt;p&gt;æ¬¢è¿å…³æ³¨ã€å…”å…«å“¥æ‚è°ˆã€‘&lt;/p&gt;
</description>
<pubDate>Thu, 31 Dec 2020 15:01:00 +0000</pubDate>
<dc:creator>lillcol</dc:creator>
<og:description>æ­¤ç³»åˆ—ä¸ºåŠ¨æ€è§„åˆ’ç›¸å…³æ–‡ç« ã€‚ ç³»åˆ—å†å²æ–‡ç« ï¼š ç®—æ³•ç³»åˆ—-åŠ¨æ€è§„åˆ’(1)ï¼šåˆè¯†åŠ¨æ€è§„åˆ’ ç®—æ³•ç³»åˆ—-åŠ¨æ€è§„åˆ’(2)ï¼šåˆ‡å‰²é’¢æé—®é¢˜ ç®—æ³•ç³»åˆ—-åŠ¨æ€è§„åˆ’(3)ï¼šæ‰¾é›¶é’±ã€èµ°æ–¹æ ¼é—®é¢˜ ç®—æ³•ç³»åˆ—-åŠ¨æ€è§„åˆ’(4)ï¼šä¹°å–</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/lillcol/p/14218940.html</dc:identifier>
</item>
<item>
<title>CMSã€G1æ”¶é›†å™¨ - _çƒ­é£</title>
<link>http://www.cnblogs.com/refeng/p/14218952.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/refeng/p/14218952.html</guid>
<description>&lt;h2 id=&quot;1ã€cmsæ”¶é›†å™¨&quot;&gt;1ã€CMSæ”¶é›†å™¨&lt;/h2&gt;
&lt;p&gt;CMS(Concurrent Mark Sweep) æ”¶é›†å™¨æ˜¯ä¸€ç§ä»¥&lt;strong&gt;è·å–æœ€çŸ­å›æ”¶åœé¡¿æ—¶é—´&lt;/strong&gt;ä¸ºç›®æ ‡çš„æ”¶é›†å™¨ã€‚ä¼˜ç‚¹æ˜¯&lt;strong&gt;å¹¶å‘æ”¶é›†ã€ä½åœé¡¿&lt;/strong&gt;ã€‚ç›®å‰å¾ˆå¤§ä¸€éƒ¨åˆ†çš„Java åº”ç”¨é›†ä¸­åœ¨äº’è”ç½‘ç«™æˆ–è€…B/Sç³»ç»Ÿçš„æœåŠ¡ç«¯ä¸Šï¼Œè¿™ç±»åº”ç”¨å°¤å…¶é‡è§†æœåŠ¡çš„å“åº”é€Ÿåº¦ï¼Œå¸Œæœ›ç³»ç»Ÿåœé¡¿æ—¶é—´æœ€çŸ­ï¼Œä»¥ç»™ç”¨æˆ·å¸¦æ¥è¾ƒå¥½çš„ä½“éªŒã€‚CMSæ”¶é›†å™¨å°±éå¸¸ç¬¦åˆè¿™ç±»åº”ç”¨çš„éœ€æ±‚ã€‚&lt;/p&gt;
&lt;h3 id=&quot;11ã€åŸç†&quot;&gt;1.1ã€åŸç†&lt;/h3&gt;
&lt;p&gt;CMSæ”¶é›†å™¨åŸºäºâ€œ&lt;strong&gt;æ ‡è®°â€”æ¸…é™¤&lt;/strong&gt;â€ç®—æ³•å®ç°ï¼Œæ•´ä¸ªè¿‡ç¨‹åˆ†ä¸ºå››ä¸ªæ­¥éª¤ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;&lt;strong&gt;åˆå§‹æ ‡è®°&lt;/strong&gt;ï¼ˆinitial markï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹¶å‘æ ‡è®°&lt;/strong&gt;ï¼ˆconcurrent markï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡æ–°æ ‡è®°&lt;/strong&gt;ï¼ˆremarkï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹¶å‘æ¸…é™¤&lt;/strong&gt;ï¼ˆconcurrent sweepï¼‰&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/refeng/1909700/o_201231145708u=2304504768,1053283755&amp;amp;fm=26&amp;amp;gp=0.jpg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å…¶ä¸­ï¼Œåˆå§‹æ ‡è®°ã€é‡æ–°æ ‡è®°è¿™ä¸¤ä¸ªæ­¥éª¤ä»ç„¶éœ€è¦Stop-The-Worldã€‚åˆå§‹æ ‡è®°ä»…ä»…åªæ˜¯æ ‡è®°ä¸€ä¸‹GC Roots èƒ½ç›´æ¥å…³è”åˆ°çš„å¯¹è±¡ï¼Œé€Ÿåº¦å¾ˆå¿«ï¼Œå¹¶å‘æ ‡è®°é˜¶æ®µå°±æ˜¯è¿›è¡ŒGc Roots Tracingçš„è¿‡ç¨‹ã€‚è€Œé‡æ–°æ ‡è®°é˜¶æ®µåˆ™æ˜¯ä¸ºäº†ä¿®æ­£å¹¶å‘æ ‡è®°æœŸé—´å› ç”¨æˆ·ç¨‹åºç»§ç»­è¿ä½œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„é‚£ä¸€éƒ¨åˆ†å¯¹è±¡çš„æ ‡è®°è®°å½•ã€‚ç”±äºæ•´ä¸ªè¿‡ç¨‹ä¸­è€—æ—¶æœ€é•¿çš„å¹¶å‘æ ‡è®°å’Œå¹¶å‘æ¸…é™¤è¿‡ç¨‹æ”¶é›†å™¨çº¿ç¨‹éƒ½å¯ä»¥ä¸ç”¨æˆ·çº¿ç¨‹ä¸€èµ·å·¥ä½œï¼Œæ‰€ä»¥ï¼Œä»æ€»ä½“ä¸Šæ¥è¯´ï¼ŒCMS æ”¶é›†å™¨çš„å†…å­˜å›æ”¶è¿‡ç¨‹æ˜¯ä¸ç”¨æˆ·çº¿ç¨‹ä¸€èµ·å¹¶å‘æ‰§è¡Œçš„ã€‚&lt;/p&gt;
&lt;h3 id=&quot;12ã€ä¸è¶³&quot;&gt;1.2ã€ä¸è¶³&lt;/h3&gt;
&lt;p&gt;ï¼ˆ1ï¼‰å¯¹CPU èµ„æºéå¸¸æ•æ„Ÿã€‚&lt;/p&gt;
&lt;p&gt;å…¶å®ï¼Œ é¢å‘å¹¶å‘è®¾è®¡çš„ç¨‹åºéƒ½å¯¹ CPU èµ„æºæ¯”è¾ƒæ•æ„Ÿã€‚åœ¨å¹¶å‘é˜¶æ®µï¼Œå®ƒè™½ç„¶ä¸ä¼šå¯¼è‡´ç”¨æˆ·çº¿ç¨‹åœé¡¿ï¼Œ ä½†æ˜¯ä¼šå› ä¸ºå ç”¨äº†ä¸€éƒ¨åˆ†çº¿ç¨‹ï¼ˆæˆ–è€…è¯´ CPU èµ„æºï¼‰è€Œå¯¼è‡´åº”ç”¨ç¨‹åºå˜æ…¢ï¼Œæ€»ååé‡ä¼šé™ä½ã€‚CMS é»˜è®¤å¯åŠ¨çš„å›æ”¶çº¿ç¨‹æ•°æ˜¯ (CPU æ•°é‡+3) /4, ä¹Ÿå°±æ˜¯å½“ CPU åœ¨ 4 ä¸ªä»¥ä¸Šæ—¶ï¼Œ å¹¶å‘å›æ”¶æ—¶åƒåœ¾æ”¶é›†çº¿ç¨‹ä¸å°‘äº25% çš„CPUèµ„æºï¼Œå¹¶ä¸”éšç€ CPU æ•°é‡çš„å¢åŠ è€Œä¸‹é™ã€‚ä½†æ˜¯å½“ CPU ä¸è¶³4ä¸ªï¼ˆæ¯”å¦‚ 2 ä¸ªï¼‰æ—¶ï¼ŒCMS å¯¹ç”¨æˆ·ç¨‹åºçš„å½±å“å°±å¯èƒ½å˜å¾—å¾ˆå¤§ï¼Œå¦‚æœæœ¬æ¥CPUè´Ÿè½½å°±æ¯”è¾ƒå¤§ï¼Œè¿˜åˆ†å‡ºä¸€åŠçš„è¿ç®—èƒ½åŠ›å»æ‰§è¡Œæ”¶é›†å™¨çº¿ç¨‹ï¼Œå°±å¯èƒ½å¯¼è‡´ç”¨æˆ·ç¨‹åºçš„æ‰§è¡Œé€Ÿåº¦å¿½ç„¶é™ä½äº† 50%ï¼Œè®©äººæ— æ³•æ¥å—ã€‚&lt;/p&gt;
&lt;p&gt;ï¼ˆ2ï¼‰æ— æ³•å¤„ç†æµ®åŠ¨åƒåœ¾ï¼ˆFloating Garbageï¼‰ï¼Œå¯èƒ½å‡ºç°â€œConcurrent Mode Failureâ€å¤±è´¥è€Œå¯¼è‡´å¦ä¸€æ¬¡Full GCçš„äº§ç”Ÿã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºCMSå¹¶å‘æ¸…ç†é˜¶æ®µç”¨æˆ·çº¿ç¨‹è¿˜åœ¨è¿è¡Œç€ï¼Œä¼´éšç¨‹åºè¿è¡Œè‡ªç„¶å°±è¿˜ä¼šæœ‰æ–°çš„åƒåœ¾ä¸æ–­äº§ç”Ÿï¼Œè¿™ä¸€éƒ¨åˆ†åƒåœ¾å‡ºç°åœ¨æ ‡è®°è¿‡ç¨‹ä¹‹åï¼ŒCMSæ— æ³•åœ¨å½“æ¬¡æ”¶é›†ä¸­å¤„ç†æ‰å®ƒä»¬ï¼Œåªå¥½ç•™å¾…ä¸‹ä¸€æ¬¡GCæ—¶å†æ¸…ç†æ‰ã€‚è¿™ä¸€éƒ¨åˆ†åƒåœ¾å°±ç§°ä¸ºâ€œ&lt;strong&gt;æµ®åŠ¨åƒåœ¾&lt;/strong&gt;â€ã€‚ä¹Ÿæ˜¯ç”±äºåœ¨åƒåœ¾æ”¶é›†é˜¶æ®µç”¨æˆ·çº¿ç¨‹è¿˜éœ€è¦è¿è¡Œï¼Œé‚£ä¹Ÿå°±è¿˜éœ€è¦é¢„ç•™æœ‰è¶³å¤Ÿçš„å†…å­˜ç©ºé—´ç»™ç”¨æˆ·çº¿ç¨‹ä½¿ç”¨ï¼Œå› æ­¤CMSæ”¶é›†å™¨ä¸èƒ½åƒå…¶ä»–æ”¶é›†å™¨é‚£æ ·ç­‰åˆ°è€å¹´ä»£å‡ ä¹å®Œå…¨è¢«å¡«æ»¡äº†å†è¿›è¡Œæ”¶é›†ï¼Œéœ€è¦é¢„ç•™ä¸€éƒ¨åˆ†ç©ºé—´æä¾›å¹¶å‘æ”¶é›†æ—¶çš„ç¨‹åºè¿ä½œä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨JDK1.5çš„é»˜è®¤è®¾ç½®ä¸‹ï¼ŒCMSæ”¶é›†å™¨å½“è€å¹´ä»£ä½¿ç”¨äº†68%çš„ç©ºé—´åå°±ä¼šè¢«æ¿€æ´»ï¼Œè¿™æ˜¯ä¸€ä¸ªåä¿å®ˆçš„è®¾ç½®ï¼Œå¦‚æœåœ¨åº”ç”¨ä¸­è€å¹´ä»£å¢é•¿ä¸æ˜¯å¤ªå¿«ï¼Œ å¯ä»¥é€‚å½“è°ƒé«˜å‚æ•°-XX:CMSInitiatingOccupancyFractionçš„å€¼æ¥æé«˜è§¦å‘ç™¾åˆ†æ¯”ï¼Œä»¥ä¾¿é™ä½å†…å­˜å›æ”¶æ¬¡æ•°ä»è€Œè·å–æ›´å¥½çš„æ€§èƒ½ï¼Œåœ¨JDK1.6ä¸­ï¼ŒCMSæ”¶é›†å™¨çš„å¯åŠ¨é˜ˆå€¼å·²ç»æå‡è‡³92%ã€‚è¦æ˜¯CMSè¿è¡ŒæœŸé—´é¢„ç•™çš„å†…å­˜æ— æ³•æ»¡è¶³ç¨‹åºéœ€è¦ï¼Œå°±ä¼šå‡ºç°ä¸€æ¬¡ &quot;Concurrent Mode Failure&quot;å¤±è´¥ï¼Œè¿™æ—¶è™šæ‹Ÿæœºå°†å¯åŠ¨åå¤‡é¢„æ¡ˆï¼šä¸´æ—¶å¯ç”¨SerialOld æ”¶é›†å™¨æ¥é‡æ–°è¿›è¡Œè€å¹´ä»£çš„åƒåœ¾æ”¶é›†ï¼Œè¿™æ ·åœé¡¿æ—¶é—´å°±å¾ˆé•¿äº†ã€‚æ‰€ä»¥è¯´å‚æ•°-XX:CMSlnitiatingOccupancyFractionè®¾ç½®å¾—å¤ªé«˜å¾ˆå®¹æ˜“å¯¼è‡´å¤§é‡&quot;Concurrent Mode Failure&quot; å¤±è´¥ï¼Œæ€§èƒ½åè€Œé™ä½ã€‚&lt;/p&gt;
&lt;p&gt;ï¼ˆ3ï¼‰ç©ºé—´ç¢ç‰‡çš„äº§ç”Ÿã€‚&lt;/p&gt;
&lt;p&gt;å› ä¸ºæ˜¯é‡‡ç”¨â€æ ‡è®°â€”æ¸…é™¤â€ç®—æ³•ï¼Œæ„å‘³ç€æ”¶é›†ç»“æŸæ—¶ä¼šæœ‰å¤§é‡ç©ºé—´ç¢ç‰‡äº§ç”Ÿã€‚ç©ºé—´ç¢ç‰‡è¿‡å¤šæ—¶ï¼Œå°†ä¼šç»™å¤§å¯¹è±¡åˆ†é…å¸¦æ¥å¾ˆå¤§éº»çƒ¦ï¼Œå¾€å¾€ä¼šå‡ºç°è€å¹´ä»£è¿˜æœ‰å¾ˆå¤§ç©ºé—´å‰©ä½™ï¼Œä½†æ˜¯æ— æ³•æ‰¾åˆ°è¶³å¤Ÿå¤§çš„è¿ç»­ç©ºé—´æ¥åˆ†é…å½“å‰å¯¹è±¡ï¼Œä¸å¾—ä¸æå‰è§¦å‘ä¸€æ¬¡Full GCã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒCMSæ”¶é›†å™¨æä¾›äº†ä¸€ä¸ª-XX:+UseCMSCompactAtFullCollectionå¼€å…³å‚æ•°ï¼ˆé»˜è®¤å°±æ˜¯å¼€å¯çš„ï¼‰ï¼Œç”¨äºåœ¨CMSæ”¶é›†å™¨é¡¶ä¸ä½è¦è¿›è¡ŒFull GCæ—¶å¼€å¯å†…å­˜ç¢ç‰‡çš„åˆå¹¶æ•´ç†è¿‡ç¨‹ï¼Œå†…å­˜æ•´ç†çš„è¿‡ç¨‹æ˜¯æ— æ³•å¹¶å‘ çš„ï¼Œç©ºé—´ç¢ç‰‡é—®é¢˜æ²¡æœ‰äº†ï¼Œä½†åœé¡¿æ—¶é—´ä¸å¾—ä¸å˜é•¿ã€‚è™šæ‹Ÿæœºè®¾è®¡è€…è¿˜æä¾›äº†å¦å¤–ä¸€ä¸ªå‚æ•°-XX:CMSFullGCsBeforeCompaction,è¿™ä¸ªå‚æ•°æ˜¯ç”¨äºè®¾ç½®æ‰§è¡Œå¤šå°‘æ¬¡ä¸å‹ç¼©çš„ Full GCåï¼Œè·Ÿç€æ¥ä¸€æ¬¡å¸¦å‹ç¼©çš„ï¼ˆé»˜è®¤å€¼ä¸º0ï¼Œè¡¨ç¤ºæ¯æ¬¡è¿›äººFull GCæ—¶éƒ½è¿›è¡Œç¢ç‰‡æ•´ç†ï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&quot;2ã€g1æ”¶é›†å™¨&quot;&gt;2ã€G1æ”¶é›†å™¨&lt;/h2&gt;
&lt;h3 id=&quot;21ã€ç‰¹ç‚¹&quot;&gt;2.1ã€ç‰¹ç‚¹&lt;/h3&gt;
&lt;p&gt;G1ï¼ˆGarbage-Firstsï¼Œ&lt;strong&gt;ä¼˜å…ˆå¤„ç†ä»·å€¼å¤§çš„å†…å­˜å—&lt;/strong&gt;ï¼‰æ”¶é›†å™¨æ˜¯å½“ä»Šæ”¶é›†å™¨æŠ€æœ¯å‘å±•çš„æœ€å‰æ²¿æˆæœä¹‹ä¸€ï¼Œå¹¶ä¸”è¿˜åœ¨ä¸æ–­å‘å±•ã€å®Œå–„ï¼Œä¸å…¶ä»–GCæ”¶é›†å™¨ç›¸æ¯”G1å…·å¤‡å¦‚ä¸‹ç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å¹¶è¡Œä¸å¹¶å‘ï¼šG1èƒ½å……åˆ†åˆ©ç”¨å¤šCPUã€å¤šæ ¸ç¯å¢ƒä¸‹çš„ç¡¬ä»¶ä¼˜åŠ¿ï¼Œä½¿ç”¨å¤šä¸ªCPUï¼ˆCPU æˆ–è€…CPUæ ¸å¿ƒï¼‰æ¥ç¼©çŸ­Stop-The-Worldåœé¡¿çš„æ—¶é—®ï¼Œéƒ¨åˆ†å…¶ä»–æ”¶é›†å™¨åŸæœ¬éœ€è¦åœé¡¿ Javaçº¿ç¨‹æ‰§è¡Œçš„GCåŠ¨ä½œï¼ŒG1æ”¶é›†å™¨ä»ç„¶å¯ä»¥é€šè¿‡å¹¶å‘çš„æ–¹å¼è®©JAVAç¨‹åºç»§ç»­æ‰§è¡Œ&lt;/li&gt;
&lt;li&gt;åˆ†ä»£æ”¶é›†ï¼šä¸å…¶ä»–æ”¶é›†å™¨ä¸€æ ·ï¼Œåˆ†ä»£æ¦‚å¿µåœ¨G1ä¸­ä¾ç„¶å¾—ä»¥ä¿ç•™ã€‚è™½ç„¶G1å¯ä»¥ä¸éœ€è¦å…¶ä»–æ”¶é›†å™¨é…åˆå°±èƒ½ç‹¬ç«‹ç®¡ç†æ•´ä¸ªGCå †ï¼Œä½†å®ƒèƒ½å¤Ÿé‡‡ç”¨ä¸åŒçš„æ–¹å¼å»å¤„ç†æ–°åˆ›å»ºçš„å¯¹è±¡å’Œå·²ç»å­˜æ´»äº†ä¸€æ®µæ—¶é—´ã€ç†¬è¿‡å¤šæ¬¡GCçš„æ—§å¯¹è±¡ä»¥è·å–æ›´å¥½çš„æ”¶é›†æ•ˆæœã€‚&lt;/li&gt;
&lt;li&gt;ç©ºé—´æ•´åˆï¼šä¸CMSçš„â€œæ ‡è®°ä¸€æ¸…ç†â€ç®—æ³•ä¸åŒï¼ŒG1ä»æ•´ä½“æ¥çœ‹æ˜¯åŸºäºâ€œæ ‡è®°â€”æ•´ç†â€ç®—æ³•å®ç°çš„æ”¶é›†å™¨ï¼Œä»å±€éƒ¨ï¼ˆä¸¤ä¸ªRegionä¹‹é—´ï¼‰ä¸Šæ¥çœ‹æ˜¯åŸºäºâ€œå¤åˆ¶â€ç®—æ³•å®ç°çš„ï¼Œä½†æ— è®ºå¦‚ä½•ï¼Œè¿™ä¸¤ç§ç®—æ³•éƒ½æ„å‘³ç€G1è¿ä½œæœŸé—´ä¸ä¼šäº§ç”Ÿå†…å­˜ç©ºé—´ç¢ç‰‡ï¼Œæ”¶é›†åèƒ½æä¾›è§„æ•´çš„å¯ç”¨å†…å­˜ã€‚è¿™ç§ç‰¹æ€§æœ‰åˆ©äºç¨‹åºé•¿æ—¶é—´è¿è¡Œï¼Œåˆ†é…å¤§å¯¹è±¡æ—¶ä¸ä¼šå› ä¸ºæ— æ³•æ‰¾åˆ°è¿ç»­å†…å­˜ç©ºé—´è€Œæå‰è§¦å‘ä¸‹ä¸€æ¬¡GCã€‚&lt;/li&gt;
&lt;li&gt;å¯é¢„æµ‹çš„åœé¡¿ï¼šè¿™æ˜¯G1ç›¸å¯¹äºCMSçš„å¦ä¸€å¤§ä¼˜åŠ¿ï¼Œé™ä½åœé¡¿æ—¶é—´æ˜¯G1å’ŒCMSå…±åŒçš„å…³æ³¨ç‚¹ï¼Œä½†G1é™¤äº†è¿½æ±‚ä½åœé¡¿å¤–ï¼Œè¿˜èƒ½å»ºç«‹&lt;strong&gt;å¯é¢„æµ‹çš„åœé¡¿æ—¶é—´æ¨¡å‹&lt;/strong&gt;ï¼Œèƒ½è®©ä½¿ç”¨è€…æ˜ç¡®æŒ‡å®šåœ¨ä¸€ä¸ªé•¿åº¦ä¸ºMäº³ç§’çš„æ—¶é—´ç‰‡æ®µå†…ï¼Œæ¶ˆè€—åœ¨åƒåœ¾æ”¶é›†ä¸Šçš„æ—¶é—´ä¸å¾—è¶…è¿‡Näº³ç§’ï¼Œè¿™å‡ ä¹å·²ç»æ˜¯å®æ—¶Java(RTSJ)çš„åƒåœ¾æ”¶é›†å™¨çš„ç‰¹å¾äº†ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;åœ¨G1ä¹‹å‰çš„å…¶ä»–æ”¶é›†å™¨è¿›è¡Œæ”¶é›†çš„èŒƒå›´éƒ½æ˜¯æ•´ä¸ªæ–°ç”Ÿä»£æˆ–è€…è€å¹´ä»£ï¼Œè€ŒG1ä¸å†æ˜¯è¿™æ ·ã€‚ä½¿ç”¨G1æ”¶é›†å™¨æ—¶ï¼ŒJavaå †çš„å†…å­˜å¸ƒå±€å°±ä¸å…¶ä»–æ”¶é›†å™¨æœ‰å¾ˆå¤§å·®åˆ«ï¼Œå®ƒå°†æ•´ä¸ªJavaå †åˆ’åˆ†ä¸º&lt;strong&gt;å¤šä¸ªå¤§å°ç›¸ç­‰çš„ç‹¬ç«‹åŒºåŸŸ(Region)&lt;/strong&gt;ï¼Œè™½ç„¶è¿˜ä¿ç•™æœ‰æ–°ç”Ÿä»£å’Œè€å¹´ä»£çš„æ¦‚å¿µï¼Œä½†æ–°ç”Ÿä»£å’Œè€å¹´ä»£ä¸å†æ˜¯ç‰©ç†éš”ç¦»çš„äº†ï¼Œå®ƒä»¬éƒ½æ˜¯ä¸€éƒ¨åˆ†Region(ä¸éœ€è¦è¿ç»­ï¼‰çš„é›†åˆã€‚&lt;/p&gt;
&lt;p&gt;G1æ”¶é›†å™¨ä¹‹æ‰€ä»¥èƒ½å»ºç«‹å¯é¢„æµ‹çš„åœé¡¿æ—¶é—´æ¨¡å‹ï¼Œæ˜¯å› ä¸ºå®ƒå¯ä»¥æœ‰è®¡åˆ’åœ°é¿å…åœ¨æ•´ä¸ªJavaå †ä¸­è¿›è¡Œå…¨åŒºåŸŸçš„åƒåœ¾æ”¶é›†ã€‚G1 è·Ÿè¸ªå„ä¸ªRegioné‡Œé¢çš„åƒåœ¾å †ç§¯çš„ä»·å€¼å¤§å°ï¼ˆå›æ”¶æ‰€è·å¾—çš„ç©ºé—´å¤§å°ä»¥åŠå›æ”¶æ‰€éœ€æ—¶é—´çš„ç»éªŒå€¼ï¼‰ï¼Œåœ¨åå°ç»´æŠ¤ä¸€ä¸ªä¼˜å…ˆåˆ—è¡¨ï¼Œæ¯æ¬¡æ ¹æ®å…è®¸çš„æ”¶é›†æ—¶é—´ï¼Œä¼˜å…ˆå›æ”¶ä»·å€¼æœ€å¤§çš„Region (è¿™ä¹Ÿå°±æ˜¯ Garbage-First åç§°çš„æ¥ç”±ï¼‰ã€‚è¿™ç§ä½¿ç”¨Regionåˆ’åˆ†å†…å­˜ç©ºé—´ä»¥åŠæœ‰ä¼˜å…ˆçº§çš„åŒºåŸŸå›æ”¶æ–¹å¼ï¼Œä½¿å¾—G1æ”¶é›†å™¨åœ¨æœ‰é™çš„æ—¶é—´å†…å¯ä»¥è·å–å°½å¯èƒ½é«˜çš„æ”¶é›†æ•ˆç‡ã€‚&lt;/p&gt;
&lt;h3 id=&quot;22ã€æ‰§è¡Œè¿‡ç¨‹&quot;&gt;2.2ã€æ‰§è¡Œè¿‡ç¨‹&lt;/h3&gt;
&lt;p&gt;G1æ”¶é›†å™¨çš„è¿ä½œå¤§è‡´å¯åˆ’åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;åˆå§‹æ ‡è®° (Initial Marking)&lt;/li&gt;
&lt;li&gt;å¹¶å‘æ ‡è®° (Concurrent Marking)&lt;/li&gt;
&lt;li&gt;æœ€ç»ˆæ ‡è®° (Final Marking)&lt;/li&gt;
&lt;li&gt;ç­›é€‰å›æ”¶ (Live Data Counting and Evacuation)&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/refeng/1909700/o_201231142817u=2915340601,3458053987&amp;amp;fm=26&amp;amp;gp=0.jpg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;åˆå§‹æ ‡è®°é˜¶æ®µä»…ä»…åªæ˜¯æ ‡è®°ä¸€ä¸‹GC Rootsèƒ½ç›´æ¥å…³è”åˆ°çš„å¯¹è±¡ï¼Œå¹¶ä¸”ä¿®æ”¹NTAMSï¼ˆNext Top at Mark Startï¼‰çš„å€¼ï¼Œè®©ä¸‹ä¸€é˜¶æ®µç”¨æˆ·ç¨‹åºå¹¶å‘è¿è¡Œæ—¶ï¼Œèƒ½åœ¨æ­£ç¡®å¯ç”¨çš„Regionä¸­åˆ›å»ºæ–°å¯¹è±¡ï¼Œè¿™ä¸€é˜¶æ®µéœ€è¦åœé¡¿çº¿ç¨‹ï¼Œä½†è€—æ—¶å¾ˆçŸ­ã€‚å¹¶å‘æ ‡è®°é˜¶æ®µæ˜¯ä»GC Rootså¼€å§‹å¯¹å †ä¸­çš„å¯¹è±¡è¿›è¡Œå¯è¾¾æ€§åˆ†æï¼Œæ‰¾å‡ºå­˜æ´»çš„å¯¹è±¡ï¼Œè¿™ä¸€é˜¶æ®µè€—æ—¶è¾ƒé•¿ï¼Œä½†å¯ä¸ç”¨æˆ·ç¨‹åºå¹¶å‘æ‰§è¡Œã€‚è€Œæœ€ç»ˆæ ‡è®°é˜¶æ®µæ˜¯ä¸ºäº†ä¿®æ­£åœ¨å¹¶å‘æ ‡è®°æœŸé—´å› ç”¨æˆ·ç¨‹åºç»§ç»­è¿è¡Œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„é‚£ä¸€éƒ¨åˆ†æ ‡è®°è®°å½•ï¼Œè¿™ä¸€é˜¶æ®µéœ€è¦åœé¡¿çº¿ç¨‹ï¼Œä½†æ˜¯å¯å¹¶è¡Œæ‰§è¡Œã€‚æœ€ååœ¨ç­›é€‰å›æ”¶é˜¶æ®µé¦–å…ˆå¯¹å„ä¸ªRegionçš„å›æ”¶ä»·å€¼å’Œæˆæœ¬è¿›è¡Œæ’åºï¼Œæ ¹æ®ç”¨æˆ·æ‰€æœŸæœ›çš„GCåœé¡¿æ—¶é—´æ¥åˆ¶å®šå›æ”¶è®¡åˆ’ã€‚&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;å¦‚æœæœ‰å­¦åˆ°ä¸œè¥¿ï¼Œè¯·&lt;strong&gt;ç‚¹èµ&lt;/strong&gt;ç»™äºˆé¼“åŠ±ï¼Œè°¢è°¢ã€‚&lt;/p&gt;
</description>
<pubDate>Thu, 31 Dec 2020 14:58:00 +0000</pubDate>
<dc:creator>_çƒ­é£</dc:creator>
<og:description>CMSã€G1æ”¶é›†å™¨ 1ã€CMSæ”¶é›†å™¨ CMS(Concurrent Mark Sweep) æ”¶é›†å™¨æ˜¯ä¸€ç§ä»¥è·å–æœ€çŸ­å›æ”¶åœé¡¿æ—¶é—´ä¸ºç›®æ ‡çš„æ”¶é›†å™¨ã€‚ä¼˜ç‚¹æ˜¯å¹¶å‘æ”¶é›†ã€ä½åœé¡¿ã€‚ç›®å‰å¾ˆå¤§ä¸€éƒ¨åˆ†çš„Java åº”ç”¨é›†ä¸­</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/refeng/p/14218952.html</dc:identifier>
</item>
<item>
<title>.NET äº‘åŸç”Ÿæ¶æ„å¸ˆè®­ç»ƒè¥ï¼ˆæ¨¡å—äºŒ åŸºç¡€å·©å›º EF Core æ›´æ–°å’Œè¿ç§»ï¼‰--å­¦ä¹ ç¬”è®° - MingsonZheng</title>
<link>http://www.cnblogs.com/MingsonZheng/p/14218950.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/MingsonZheng/p/14218950.html</guid>
<description>&lt;ul&gt;&lt;li&gt;çŠ¶æ€&lt;/li&gt;
&lt;li&gt;è‡ªåŠ¨å˜æ›´æ£€æµ‹&lt;/li&gt;
&lt;li&gt;ä¸æŸ¥è¯¢åˆ é™¤å’Œæ›´æ–°&lt;/li&gt;
&lt;li&gt;å¹¶å‘&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;çŠ¶æ€&quot;&gt;çŠ¶æ€&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;Entity State&lt;/li&gt;
&lt;li&gt;Property State&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;entity-state&quot;&gt;Entity State&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;Added æ·»åŠ &lt;/li&gt;
&lt;li&gt;Unchanged æ²¡æœ‰å˜åŒ–&lt;/li&gt;
&lt;li&gt;Modified å·²ä¿®æ”¹&lt;/li&gt;
&lt;li&gt;Deleted å·²åˆ é™¤&lt;/li&gt;
&lt;li&gt;Detached æœªè·Ÿè¸ª&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1412316/202012/1412316-20201231225658857-1082455360.jpg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;property-state&quot;&gt;Property State&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;IsModified&lt;/li&gt;
&lt;li&gt;CurrentValue&lt;/li&gt;
&lt;li&gt;OriginValue&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;è‡ªåŠ¨å˜æ›´æ£€æµ‹&quot;&gt;è‡ªåŠ¨å˜æ›´æ£€æµ‹&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;ä½¿ç”¨è‡ªåŠ¨å˜æ›´æ£€æµ‹å®Œæˆç¡®å®šå­—æ®µçš„æ›´æ–°&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨è‡ªåŠ¨å˜æ›´æ£€æµ‹å®Œæˆä»»æ„å­—æ®µçš„æ›´æ–°&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;ä½¿ç”¨è‡ªåŠ¨å˜æ›´æ£€æµ‹å®Œæˆç¡®å®šå­—æ®µçš„æ›´æ–°&quot;&gt;ä½¿ç”¨è‡ªåŠ¨å˜æ›´æ£€æµ‹å®Œæˆç¡®å®šå­—æ®µçš„æ›´æ–°&lt;/h3&gt;
&lt;p&gt;ProjectController&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;[HttpPatch]
[Route(&quot;{id}&quot;)]
public async Task&amp;lt;ActionResult&amp;lt;Project&amp;gt;&amp;gt; SetTitleAsync(string id, [FromQuery] string title, CancellationToken cancellationToken)
{
    // æŸ¥è¯¢å®ä½“ä¿¡æ¯
    var origin = await _lighterDbContext.Projects.FirstOrDefaultAsync(p =&amp;gt; p.Id == id, cancellationToken);

    // ä¿®æ”¹å®ä½“å±æ€§
    origin.Title = title;

    // æ•°æ®æäº¤ä¿å­˜
    await _lighterDbContext.SaveChangesAsync();

    return origin;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¿®æ”¹åˆ†ç»„ä¿¡æ¯&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;// æŸ¥è¯¢å®ä½“ä¿¡æ¯
var originGroup = await _lighterDbContext.ProjectGroups.Where(g =&amp;gt; g.ProjectId == id).ToListAsync(cancellationToken: cancellationToken);

// ä¿®æ”¹å®ä½“å±æ€§
foreach (var group in originGroup)
{
    group.Name = $&quot;{title} - {group.Name}&quot;;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æŸ¥è¯¢é¡¹ç›®ä¿¡æ¯æ—¶å¸¦å‡ºåˆ†ç»„ä¿¡æ¯&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;[HttpGet]
public async Task&amp;lt;IEnumerable&amp;lt;Project&amp;gt;&amp;gt; GetListAsync(CancellationToken cancellationToken)
{
    return await _lighterDbContext.Projects.Include(p =&amp;gt; p.Groups).ToListAsync(cancellationToken);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;ä½¿ç”¨è‡ªåŠ¨å˜æ›´æ£€æµ‹å®Œæˆä»»æ„å­—æ®µçš„æ›´æ–°&quot;&gt;ä½¿ç”¨è‡ªåŠ¨å˜æ›´æ£€æµ‹å®Œæˆä»»æ„å­—æ®µçš„æ›´æ–°&lt;/h3&gt;
&lt;pre&gt;
&lt;code&gt;[HttpPatch]
[Route(&quot;{id}&quot;)]
public async Task&amp;lt;ActionResult&amp;lt;Project&amp;gt;&amp;gt; SetAsync(string id, CancellationToken cancellationToken)
{
    // æŸ¥è¯¢å®ä½“ä¿¡æ¯
    var origin = await _lighterDbContext.Projects.FirstOrDefaultAsync(p =&amp;gt; p.Id == id, cancellationToken);
    var properties = _lighterDbContext.Entry(origin).Properties.ToList();

    // ä¿®æ”¹å®ä½“å±æ€§
    foreach (var query in HttpContext.Request.Query)
    {
        var property = properties.FirstOrDefault(p =&amp;gt; p.Metadata.Name == query.Key);
        if (property == null)
            continue;

        var currentValue = Convert.ChangeType(query.Value.First(), property.Metadata.ClrType);

        _lighterDbContext.Entry(origin).Property(query.Key).CurrentValue = currentValue;
        _lighterDbContext.Entry(origin).Property(query.Key).IsModified = true;
    }

    // æ•°æ®æäº¤ä¿å­˜
    await _lighterDbContext.SaveChangesAsync(cancellationToken);

    return origin;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;ä¸æŸ¥è¯¢åˆ é™¤å’Œæ›´æ–°&quot;&gt;ä¸æŸ¥è¯¢åˆ é™¤å’Œæ›´æ–°&lt;/h2&gt;
&lt;p&gt;åˆ é™¤ä¹‹å‰å…ˆæŸ¥è¯¢&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;var id = 1;
using(var db = new entityContext())
{
    var entity = db.dbset.FirstOrDefault(e=&amp;gt;e.ID == id);
    if(entity != null)
    {
        db.dbset.Remove(entity);
        db.SaveChanges();
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸æŸ¥è¯¢åˆ é™¤&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;var id = 1ï¼›
using(var db = new entityContext())
{
    var entity = new Entity{ID = id};
    
    db.dbset.Attach(entity);
    db.dbset.Remove(entity);
    db.SaveChanges();
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸æŸ¥è¯¢æ›´æ–°&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;try
{
    using(var db = new dbContext())
    {
        var entity = new myEntity{PageID = pageid};
        db.Pages.Attach(entity);// added
        
        entity.Title = &quot;new title&quot;;// modified, isModified=true
        entity.Url = &quot;new-url&quot;;
        
        db.SaveChanges();
    }
}
catch(DataException)
{
    
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;å¹¶å‘&quot;&gt;å¹¶å‘&lt;/h2&gt;
&lt;p&gt;ä¹è§‚å¤„ç†ï¼šç³»ç»Ÿè®¤ä¸ºæ•°æ®çš„æ›´æ–°åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯ä¸ä¼šäº§ç”Ÿå†²çªçš„ï¼Œåªåœ¨æ•°æ®åº“æ›´æ–°æ“ä½œæäº¤çš„æ—¶å€™æ‰å¯¹æ•°æ®ä½œå†²çªæ£€æµ‹ï¼ˆæ¨èï¼‰&lt;/p&gt;
&lt;p&gt;æ‚²è§‚å¤„ç†ï¼šæ ¹æ®å‘½åå³å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œæ›´æ–°æ—¶ï¼Œå¯¹æ“ä½œæŒæ‚²è§‚ä¿å®ˆçš„æ€åº¦ï¼Œè®¤ä¸ºäº§ç”Ÿæ•°æ®å†²çªçš„å¯èƒ½æ€§å¾ˆå¤§ï¼Œéœ€è¦å…ˆå¯¹è¯·æ±‚çš„æ•°æ®åŠ é”å†è¿›è¡Œç›¸å…³æ“ä½œ&lt;/p&gt;
&lt;p&gt;åœ¨ Entity ä¸­æ·»åŠ è¡Œç‰ˆæœ¬å·å­—æ®µ&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;/// &amp;lt;summary&amp;gt;
/// è¡Œç‰ˆæœ¬å·
/// &amp;lt;/summary&amp;gt;
[Timestamp]
public byte[] RowVersion { get; set; }
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ¯æ¬¡å¯¹æ•°æ®è¿›è¡Œæ›´æ–°çš„æ—¶å€™ï¼Œéƒ½ä¼šäº§ç”Ÿæœ€æ–°çš„ç‰ˆæœ¬å·ï¼Œå¦‚æœæ›´æ–°çš„æ—¶å€™æŸ¥è¯¢çš„ç‰ˆæœ¬å·ä¸ä¹‹å‰çš„ç‰ˆæœ¬å·ä¸ä¸€è‡´ï¼Œå°±ä¼šæŠ¥é”™&lt;/p&gt;
&lt;p&gt;åœ¨ UpdateAsync æ–¹æ³•ä¸­çš„æŸ¥è¯¢å’Œæ›´æ–°ä¸­é—´å¦‚æœæ•°æ®åº“çš„è¡Œç‰ˆæœ¬å·å‘ç”Ÿäº†ä¿®æ”¹ï¼Œå°±ä¼šæŠ¥é”™&lt;/p&gt;
&lt;p&gt;ProjectController&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;[HttpPut]
[Route(&quot;{id&quot;)]
public async Task&amp;lt;ActionResult&amp;lt;Project&amp;gt;&amp;gt; UpdateAsync(string id, [FromBody] Project project, CancellationToken cancellationToken)
{
    var origin = await _lighterDbContext.Projects.FirstOrDefaultAsync(p =&amp;gt; p.Id == id, cancellationToken);

    if (origin == null)
        return NotFound();

    _lighterDbContext.Entry(origin).CurrentValues.SetValues(project);

    await _lighterDbContext.SaveChangesAsync(cancellationToken);
    return origin;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é€šè¿‡å®¢æˆ·ç«¯ä¼ å…¥è¡Œç‰ˆæœ¬å·ï¼Œè§£å†³å‰ç«¯æµè§ˆå™¨æ•°æ®è¦†ç›–é—®é¢˜&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;_lighterDbContext.Entry(origin).Property(p =&amp;gt; p.RowVersion).OriginalValue = project.RowVersion;
&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;ç”Ÿæˆ SQL è„šæœ¬&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;ä»ç©ºç™½å¼€å§‹ç”Ÿæˆsqlè„šæœ¬  
dotnet ef migrations script


ç”ŸæˆæŒ‡å®šç‰ˆæœ¬åˆ°æœ€æ–°ç‰ˆæœ¬çš„sql 
dotnet ef migrations script AddNewTables


ä»A-Bç‰ˆæœ¬ç”Ÿæˆè¿ç§»SQLè„šæœ¬ 
dotnet ef migrations script AddNewTables AddAuditTable
&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;database-first&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;dotnet ef dbcontext scaffold &quot;server=172.0.0.1;port=7306;user=root;password=root123456@;database=lighter&quot; Pomelo.EntityFrameworkCore.MySql -o Models
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;githubæºç é“¾æ¥ï¼š&quot;&gt;GitHubæºç é“¾æ¥ï¼š&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/MINGSON666/Personal-Learning-Library/tree/main/ArchitectTrainingCamp/LighterApi&quot; target=&quot;_blank&quot;&gt;https://github.com/MINGSON666/Personal-Learning-Library/tree/main/ArchitectTrainingCamp/LighterApi&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a rel=&quot;license&quot; href=&quot;http://creativecommons.org/licenses/by-nc-sa/4.0/&quot;&gt;&lt;img alt=&quot;çŸ¥è¯†å…±äº«è®¸å¯åè®®&quot; src=&quot;https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æœ¬ä½œå“é‡‡ç”¨&lt;a rel=&quot;license&quot; href=&quot;http://creativecommons.org/licenses/by-nc-sa/4.0/&quot;&gt;çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®&lt;/a&gt;è¿›è¡Œè®¸å¯ã€‚&lt;/p&gt;
&lt;p&gt;æ¬¢è¿è½¬è½½ã€ä½¿ç”¨ã€é‡æ–°å‘å¸ƒï¼Œä½†åŠ¡å¿…ä¿ç•™æ–‡ç« ç½²å éƒ‘å­é“­ ï¼ˆåŒ…å«é“¾æ¥ï¼š &lt;a href=&quot;http://www.cnblogs.com/MingsonZheng/&quot; target=&quot;_blank&quot;&gt;http://www.cnblogs.com/MingsonZheng/&lt;/a&gt; ï¼‰ï¼Œä¸å¾—ç”¨äºå•†ä¸šç›®çš„ï¼ŒåŸºäºæœ¬æ–‡ä¿®æ”¹åçš„ä½œå“åŠ¡å¿…ä»¥ç›¸åŒçš„è®¸å¯å‘å¸ƒã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœ‰ä»»ä½•ç–‘é—®ï¼Œè¯·ä¸æˆ‘è”ç³» (MingsonZheng@outlook.com) ã€‚&lt;/p&gt;
</description>
<pubDate>Thu, 31 Dec 2020 14:57:00 +0000</pubDate>
<dc:creator>MingsonZheng</dc:creator>
<og:description>2.4.6 EF Core -- æ›´æ–° çŠ¶æ€ è‡ªåŠ¨å˜æ›´æ£€æµ‹ ä¸æŸ¥è¯¢åˆ é™¤å’Œæ›´æ–° å¹¶å‘ çŠ¶æ€ Entity State Property State Entity State Added æ·»åŠ  Uncha</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/MingsonZheng/p/14218950.html</dc:identifier>
</item>
</channel>
</rss>