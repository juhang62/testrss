<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>åšå®¢å›­_é¦–é¡µ</title>
<link></link>
<description>ä»£ç æ”¹å˜ä¸–ç•Œ</description>
<item>
<title>ã€é¡¹ç›®å®è·µã€‘ä¸€æ–‡å¸¦ä½ æå®šSpring Security + JWT - RudeCrab</title>
<link>http://www.cnblogs.com/RudeCrab/p/14265273.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/RudeCrab/p/14265273.html</guid>
<description>&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/news/1496775/202101/1496775-20210112085019858-1640273167.jpg&quot; alt=&quot;é¦–å›¾.png&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;ä»¥é¡¹ç›®é©±åŠ¨å­¦ä¹ ï¼Œä»¥å®è·µæ£€éªŒçœŸçŸ¥&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å…³äºè®¤è¯å’Œæˆæƒï¼ŒRä¹‹å‰å·²ç»å†™äº†ä¸¤ç¯‡æ–‡ç« ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.cnblogs.com/RudeCrab/p/14251154.html&quot; target=&quot;_blank&quot;&gt;ğŸ“–ã€é¡¹ç›®å®è·µã€‘åœ¨ç”¨å®‰å…¨æ¡†æ¶å‰ï¼Œæˆ‘æƒ³å…ˆè®©ä½ æ‰‹æ’¸ä¸€ä¸ªç™»é™†è®¤è¯&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.cnblogs.com/RudeCrab/p/14251274.html&quot; target=&quot;_blank&quot;&gt;ğŸ“–ã€é¡¹ç›®å®è·µã€‘ä¸€æ–‡å¸¦ä½ æå®šé¡µé¢æƒé™ã€æŒ‰é’®æƒé™ä»¥åŠæ•°æ®æƒé™&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ä¸¤ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨å®‰å…¨æ¡†æ¶å°±æå®šäº†è®¤è¯å’ŒæˆæƒåŠŸèƒ½ï¼Œå¹¶ç†è§£äº†å…¶æ ¸å¿ƒåŸç†ã€‚Råœ¨ä¹‹å‰å°±è¯´è¿‡ï¼Œæ ¸å¿ƒåŸç†æŒæ¡äº†ï¼Œæ— è®ºä»€ä¹ˆå®‰å…¨æ¡†æ¶ä½¿ç”¨èµ·æ¥éƒ½ä¼šéå¸¸å®¹æ˜“ï¼é‚£ä¹ˆæœ¬æ–‡å°±è®²è§£å¦‚ä½•ä½¿ç”¨ä¸»æµçš„å®‰å…¨æ¡†æ¶Spring Securityæ¥å®ç°è®¤è¯å’ŒæˆæƒåŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;å½“ç„¶ï¼Œæœ¬æ–‡å¹¶ä¸åªæ˜¯å¯¹æ¡†æ¶çš„ä½¿ç”¨æ–¹æ³•è¿›è¡Œè®²è§£ï¼Œè¿˜ä¼šå‰–æSpring Securityçš„æºç ï¼Œçœ‹åˆ°æœ€åä½ å°±ä¼šå‘ç°ä½ æŒæ¡äº†ä½¿ç”¨æ–¹æ³•çš„åŒæ—¶ï¼Œè¿˜å¯¹æ¡†æ¶æœ‰äº†æ·±åº¦çš„ç†è§£ï¼å¦‚æœæ²¡æœ‰çœ‹è¿‡å‰ä¸¤ç¯‡æ–‡ç« çš„ï¼Œå¼ºçƒˆå»ºè®®å…ˆçœ‹ä¸€ä¸‹ï¼Œå› ä¸ºå®‰å…¨æ¡†æ¶åªæ˜¯å¸®æˆ‘ä»¬å°è£…äº†ä¸€äº›ä¸œè¥¿ï¼ŒèƒŒåçš„åŸç†æ˜¯ä¸ä¼šå˜çš„ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡æ‰€æœ‰ä»£ç éƒ½æ”¾åœ¨äº†&lt;a href=&quot;https://github.com/RudeCrab/rude-java&quot; target=&quot;_blank&quot;&gt;Github&lt;/a&gt;ä¸Šï¼Œå…‹éš†ä¸‹æ¥å³å¯è¿è¡Œï¼&lt;/p&gt;

&lt;p&gt;Webç³»ç»Ÿä¸­ç™»å½•è®¤è¯ï¼ˆAuthenticationï¼‰çš„æ ¸å¿ƒå°±æ˜¯&lt;strong&gt;å‡­è¯&lt;/strong&gt;æœºåˆ¶ï¼Œæ— è®ºæ˜¯&lt;code&gt;Session&lt;/code&gt;è¿˜æ˜¯&lt;code&gt;JWT&lt;/code&gt;ï¼Œéƒ½æ˜¯åœ¨ç”¨æˆ·æˆåŠŸç™»å½•æ—¶è¿”å›ç»™ç”¨æˆ·ä¸€ä¸ªå‡­è¯ï¼Œåç»­ç”¨æˆ·è®¿é—®æ¥å£éœ€æºå¸¦å‡­è¯æ¥æ ‡æ˜è‡ªå·±çš„èº«ä»½ã€‚åç«¯ä¼šå¯¹éœ€è¦è¿›è¡Œè®¤è¯çš„æ¥å£è¿›è¡Œå®‰å…¨åˆ¤æ–­ï¼Œè‹¥å‡­è¯æ²¡é—®é¢˜åˆ™ä»£è¡¨å·²ç™»å½•å°±æ”¾è¡Œæ¥å£ï¼Œè‹¥å‡­è¯æœ‰é—®é¢˜åˆ™ç›´æ¥æ‹’ç»è¯·æ±‚ã€‚è¿™ä¸ªå®‰å…¨åˆ¤æ–­&lt;strong&gt;éƒ½æ˜¯æ”¾åœ¨è¿‡æ»¤å™¨é‡Œç»Ÿä¸€å¤„ç†çš„&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1496775/202101/1496775-20210112085020523-530662725.jpg&quot; alt=&quot;è®¤è¯è¿‡æ»¤å™¨.png&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç™»å½•è®¤è¯æ˜¯å¯¹&lt;strong&gt;ç”¨æˆ·çš„èº«ä»½&lt;/strong&gt;è¿›è¡Œç¡®è®¤ï¼Œæƒé™æˆæƒï¼ˆAuthorizationï¼‰æ˜¯å¯¹&lt;strong&gt;ç”¨æˆ·èƒ½å¦è®¿é—®æŸä¸ªèµ„æº&lt;/strong&gt;è¿›è¡Œç¡®è®¤ï¼Œæˆæƒå‘ç”Ÿéƒ½è®¤è¯ä¹‹åã€‚ è®¤è¯ä¸€æ ·ï¼Œè¿™ç§é€šç”¨é€»è¾‘éƒ½æ˜¯æ”¾åœ¨è¿‡æ»¤å™¨é‡Œè¿›è¡Œçš„ç»Ÿä¸€æ“ä½œï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1496775/202101/1496775-20210112085021023-973338173.jpg&quot; alt=&quot;æˆæƒè¿‡æ»¤å™¨.png&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;LoginFilter&lt;/code&gt;å…ˆè¿›è¡Œç™»å½•è®¤è¯åˆ¤æ–­ï¼Œè®¤è¯é€šè¿‡åå†ç”±&lt;code&gt;AuthFilter&lt;/code&gt;è¿›è¡Œæƒé™æˆæƒåˆ¤æ–­ï¼Œä¸€å±‚ä¸€å±‚æ²¡é—®é¢˜åæ‰ä¼šæ‰§è¡Œæˆ‘ä»¬çœŸæ­£çš„ä¸šåŠ¡é€»è¾‘ã€‚&lt;/p&gt;
&lt;p&gt;Spring Securityå¯¹Webç³»ç»Ÿçš„æ”¯æŒ&lt;strong&gt;å°±æ˜¯åŸºäºè¿™ä¸€ä¸ªä¸ªè¿‡æ»¤å™¨ç»„æˆçš„è¿‡æ»¤å™¨é“¾&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/news/1496775/202101/1496775-20210112085021940-256434050.jpg&quot; alt=&quot;è¿‡æ»¤å™¨é“¾.png&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç”¨æˆ·è¯·æ±‚éƒ½ä¼šç»è¿‡&lt;code&gt;Servlet&lt;/code&gt;çš„è¿‡æ»¤å™¨é“¾ï¼Œåœ¨ä¹‹å‰ä¸¤ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬å°±æ˜¯é€šè¿‡è‡ªå®šä¹‰çš„ä¸¤ä¸ªè¿‡æ»¤å™¨å®ç°äº†è®¤è¯æˆæƒåŠŸèƒ½ï¼è€ŒSpring Securityä¹Ÿæ˜¯åšçš„åŒæ ·çš„äº‹å®Œæˆäº†ä¸€ç³»åˆ—åŠŸèƒ½ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1496775/202101/1496775-20210112085022237-320474672.jpg&quot; alt=&quot;è‡ªå®šä¹‰è¿‡æ»¤å™¨é“¾.png&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;åœ¨&lt;code&gt;Servlet&lt;/code&gt;è¿‡æ»¤å™¨é“¾ä¸­ï¼ŒSpring Securityå‘å…¶æ·»åŠ äº†ä¸€ä¸ª&lt;code&gt;FilterChainProxy&lt;/code&gt;è¿‡æ»¤å™¨ï¼Œè¿™ä¸ªä»£ç†è¿‡æ»¤å™¨ä¼šåˆ›å»ºä¸€å¥—Spring Securityè‡ªå®šä¹‰çš„è¿‡æ»¤å™¨é“¾ï¼Œç„¶åæ‰§è¡Œä¸€ç³»åˆ—è¿‡æ»¤å™¨ã€‚æˆ‘ä»¬å¯ä»¥å¤§æ¦‚çœ‹ä¸€ä¸‹&lt;code&gt;FilterChainProxy&lt;/code&gt;çš„å¤§è‡´æºç ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Override
public void doFilter(ServletRequest request, ServletResponse response,
                     FilterChain chain) throws IOException, ServletException {
    ...çœç•¥å…¶ä»–ä»£ç 
    
    // è·å–Spring Securityçš„ä¸€å¥—è¿‡æ»¤å™¨
    List&amp;lt;Filter&amp;gt; filters = getFilters(request);
    // å°†è¿™ä¸€å¥—è¿‡æ»¤å™¨ç»„æˆSpring Securityè‡ªå·±çš„è¿‡æ»¤é“¾ï¼Œå¹¶å¼€å§‹æ‰§è¡Œ
    VirtualFilterChain vfc = new VirtualFilterChain(fwRequest, chain, filters);
    vfc.doFilter(request, response);
    
    ...çœç•¥å…¶ä»–ä»£ç 
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹Spring Securityé»˜è®¤ä¼šå¯ç”¨å¤šå°‘è¿‡æ»¤å™¨ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1496775/202101/1496775-20210112085023600-961373993.jpg&quot; alt=&quot;seucirtyé»˜è®¤è¿‡æ»¤å™¨é“¾.png&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œé¢æˆ‘ä»¬åªéœ€è¦é‡ç‚¹å…³æ³¨ä¸¤ä¸ªè¿‡æ»¤å™¨å³å¯ï¼š&lt;code&gt;UsernamePasswordAuthenticationFilter&lt;/code&gt;è´Ÿè´£ç™»å½•è®¤è¯ï¼Œ&lt;code&gt;FilterSecurityInterceptor&lt;/code&gt;è´Ÿè´£æƒé™æˆæƒã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ğŸ’¡Spring Securityçš„æ ¸å¿ƒé€»è¾‘å…¨åœ¨è¿™ä¸€å¥—è¿‡æ»¤å™¨ä¸­ï¼Œè¿‡æ»¤å™¨é‡Œä¼šè°ƒç”¨å„ç§ç»„ä»¶å®ŒæˆåŠŸèƒ½ï¼ŒæŒæ¡äº†è¿™äº›è¿‡æ»¤å™¨å’Œç»„ä»¶ä½ å°±æŒæ¡äº†Spring Security&lt;/strong&gt;ï¼è¿™ä¸ªæ¡†æ¶çš„ä½¿ç”¨æ–¹å¼å°±æ˜¯å¯¹è¿™äº›è¿‡æ»¤å™¨å’Œç»„ä»¶è¿›è¡Œæ‰©å±•ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€å®šè¦è®°ä½è¿™å¥è¯ï¼Œå¸¦ç€è¿™å¥è¯å»ä½¿ç”¨å’Œç†è§£Spring Securityï¼Œä½ ä¼šåƒç«™åœ¨é«˜å¤„ä¿¯ç°ï¼Œæ•´ä¸ªæ¡†æ¶çš„è„‰ç»œä¸€ç›®äº†ç„¶ã€‚&lt;/p&gt;
&lt;p&gt;åˆšæ‰æˆ‘ä»¬æ€»è§ˆäº†ä¸€ä¸‹å…¨å±€ï¼Œç°åœ¨æˆ‘ä»¬å°±å¼€å§‹è¿›è¡Œä»£ç ç¼–å†™äº†ã€‚&lt;/p&gt;
&lt;p&gt;è¦ä½¿ç”¨Spring Securityè‚¯å®šæ˜¯è¦å…ˆå¼•å…¥ä¾èµ–åŒ…ï¼ˆWebé¡¹ç›®å…¶ä»–å¿…å¤‡ä¾èµ–æˆ‘åœ¨ä¹‹å‰æ–‡ç« ä¸­å·²è®²è§£ï¼Œè¿™é‡Œå°±ä¸è¿‡å¤šé˜è¿°äº†ï¼‰ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-xml&quot;&gt;&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;spring-boot-starter-security&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¾èµ–åŒ…å¯¼å…¥åï¼ŒSpring Securityå°±é»˜è®¤æä¾›äº†è®¸å¤šåŠŸèƒ½å°†æ•´ä¸ªåº”ç”¨ç»™ä¿æŠ¤äº†èµ·æ¥ï¼š&lt;/p&gt;
&lt;p&gt;ğŸ“è¦æ±‚ç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·æ‰èƒ½ä¸åº”ç”¨ç¨‹åºè¿›è¡Œäº¤äº’&lt;/p&gt;
&lt;p&gt;ğŸ“åˆ›å»ºå¥½äº†é»˜è®¤ç™»å½•è¡¨å•&lt;/p&gt;
&lt;p&gt;ğŸ“ç”Ÿæˆç”¨æˆ·åä¸º&lt;code&gt;user&lt;/code&gt;çš„éšæœºå¯†ç å¹¶æ‰“å°åœ¨æ§åˆ¶å°ä¸Š&lt;/p&gt;
&lt;p&gt;ğŸ“&lt;code&gt;CSRF&lt;/code&gt;æ”»å‡»é˜²æŠ¤ã€&lt;code&gt;Session Fixation&lt;/code&gt;æ”»å‡»é˜²æŠ¤&lt;/p&gt;
&lt;p&gt;ğŸ“ç­‰ç­‰ç­‰ç­‰......&lt;/p&gt;
&lt;p&gt;åœ¨å®é™…å¼€å‘ä¸­ï¼Œè¿™äº›&lt;strong&gt;é»˜è®¤é…ç½®å¥½çš„åŠŸèƒ½å¾€å¾€ä¸ç¬¦åˆæˆ‘ä»¬çš„å®é™…éœ€æ±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬ä¼šè‡ªå®šä¹‰ä¸€äº›é…ç½®&lt;/strong&gt;ã€‚é…ç½®æ–¹å¼å¾ˆç®€å•ï¼Œæ–°å»ºä¸€ä¸ªé…ç½®ç±»å³å¯ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@EnableWebSecurity
public class SecurityConfig extends WebSecurityConfigurerAdapter {
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨è¯¥ç±»ä¸­é‡å†™&lt;code&gt;WebSecurityConfigurerAdapter&lt;/code&gt;çš„æ–¹æ³•å°±èƒ½å¯¹Spring Securityè¿›è¡Œè‡ªå®šä¹‰é…ç½®ã€‚&lt;/p&gt;

&lt;p&gt;ä¾èµ–åŒ…å’Œé…ç½®ç±»å‡†å¤‡å¥½åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦å®Œæˆçš„ç¬¬ä¸€ä¸ªåŠŸèƒ½é‚£è‡ªç„¶æ˜¯ç™»å½•è®¤è¯ï¼Œæ¯•ç«Ÿç”¨æˆ·è¦ä½¿ç”¨æˆ‘ä»¬ç³»ç»Ÿç¬¬ä¸€æ­¥å°±æ˜¯ç™»å½•ã€‚ä¹‹å‰æ–‡ç« ä»‹ç»äº†&lt;code&gt;Session&lt;/code&gt;å’Œ&lt;code&gt;JWT&lt;/code&gt;ä¸¤ç§è®¤è¯æ–¹å¼ï¼Œè¿™é‡Œæˆ‘ä»¬æ¥ç”¨Spring Securityå®ç°è¿™ä¸¤ç§è®¤è¯ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æœ€ç®€å•çš„è®¤è¯æ–¹å¼&quot;&gt;æœ€ç®€å•çš„è®¤è¯æ–¹å¼&lt;/h2&gt;
&lt;p&gt;ä¸ç®¡å“ªç§è®¤è¯æ–¹å¼å’Œæ¡†æ¶ï¼Œæœ‰äº›æ ¸å¿ƒæ¦‚å¿µæ˜¯ä¸ä¼šå˜çš„ï¼Œè¿™äº›æ ¸å¿ƒæ¦‚å¿µåœ¨å®‰å…¨æ¡†æ¶ä¸­ä¼šä»¥å„ç§ç»„ä»¶æ¥ä½“ç°ï¼Œäº†è§£å„ä¸ªç»„ä»¶çš„åŒæ—¶åŠŸèƒ½ä¹Ÿå°±è·Ÿç€å®ç°äº†åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ç³»ç»Ÿä¸­ä¼šæœ‰è®¸å¤šç”¨æˆ·ï¼Œç¡®è®¤å½“å‰æ˜¯å“ªä¸ªç”¨æˆ·æ­£åœ¨ä½¿ç”¨æˆ‘ä»¬ç³»ç»Ÿå°±æ˜¯ç™»å½•è®¤è¯çš„æœ€ç»ˆç›®çš„ã€‚è¿™é‡Œæˆ‘ä»¬å°±æå–å‡ºäº†ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š&lt;strong&gt;å½“å‰ç™»å½•ç”¨æˆ·/å½“å‰è®¤è¯ç”¨æˆ·&lt;/strong&gt;ã€‚æ•´ä¸ªç³»ç»Ÿå®‰å…¨éƒ½æ˜¯å›´ç»•å½“å‰ç™»å½•ç”¨æˆ·å±•å¼€çš„ï¼è¿™ä¸ªä¸éš¾ç†è§£ï¼Œè¦æ˜¯å½“å‰ç™»å½•ç”¨æˆ·éƒ½ä¸èƒ½ç¡®è®¤äº†ï¼Œé‚£Aä¸‹äº†ä¸€ä¸ªè®¢å•ï¼Œä¸‹åˆ°äº†Bçš„è´¦æˆ·ä¸Šè¿™ä¸å°±ä¹±å¥—äº†ã€‚è¿™ä¸€æ¦‚å¿µåœ¨Spring Securityä¸­çš„ä½“ç°å°±æ˜¯ &lt;strong&gt;ğŸ’¡&lt;code&gt;Authentication&lt;/code&gt;&lt;/strong&gt;ï¼Œå®ƒå­˜å‚¨äº†è®¤è¯ä¿¡æ¯ï¼Œä»£è¡¨å½“å‰ç™»å½•ç”¨æˆ·ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨ç¨‹åºä¸­å¦‚ä½•è·å–å¹¶ä½¿ç”¨å®ƒå‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦é€šè¿‡ &lt;strong&gt;&lt;code&gt;ğŸ’¡SecurityContext&lt;/code&gt;&lt;/strong&gt; æ¥è·å–&lt;code&gt;Authentication&lt;/code&gt;ï¼Œçœ‹äº†ä¹‹å‰æ–‡ç« çš„æœ‹å‹å¤§æ¦‚å°±çŒœåˆ°äº†è¿™ä¸ª&lt;code&gt;SecurityContext&lt;/code&gt;å°±æ˜¯æˆ‘ä»¬çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;è¿™ç§åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­æ¨ªè·¨è‹¥å¹²æ–¹æ³•è°ƒç”¨ï¼Œéœ€è¦ä¼ é€’çš„å¯¹è±¡ï¼Œæˆ‘ä»¬é€šå¸¸ç§°ä¹‹ä¸ºä¸Šä¸‹æ–‡ï¼ˆContextï¼‰ã€‚ä¸Šä¸‹æ–‡å¯¹è±¡æ˜¯éå¸¸æœ‰å¿…è¦çš„ï¼Œå¦åˆ™ä½ æ¯ä¸ªæ–¹æ³•éƒ½å¾—é¢å¤–å¢åŠ ä¸€ä¸ªå‚æ•°æ¥æ”¶å¯¹è±¡ï¼Œå®åœ¨å¤ªéº»çƒ¦äº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡åˆ™æ˜¯äº¤ç”± &lt;strong&gt;ğŸ’¡&lt;code&gt;SecurityContextHolder&lt;/code&gt;&lt;/strong&gt; è¿›è¡Œç®¡ç†ï¼Œä½ å¯ä»¥åœ¨ç¨‹åº&lt;strong&gt;ä»»ä½•åœ°æ–¹&lt;/strong&gt;ä½¿ç”¨å®ƒï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;Authentication authentication = SecurityContextHolder.getContext().getAuthentication();
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°è°ƒç”¨é“¾è·¯æ˜¯è¿™æ ·çš„ï¼š&lt;code&gt;SecurityContextHolder&lt;/code&gt;ğŸ‘‰&lt;code&gt;SecurityContext&lt;/code&gt;ğŸ‘‰&lt;code&gt;Authentication&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;SecurityContextHolder&lt;/code&gt;åŸç†éå¸¸ç®€å•ï¼Œå°±æ˜¯å’Œæˆ‘ä»¬ä¹‹å‰å®ç°çš„ä¸Šä¸‹æ–‡å¯¹è±¡ä¸€æ ·ï¼Œä½¿ç”¨&lt;code&gt;ThreadLocal&lt;/code&gt;æ¥ä¿è¯ä¸€ä¸ªçº¿ç¨‹ä¸­ä¼ é€’åŒä¸€ä¸ªå¯¹è±¡ï¼æºç æˆ‘å°±ä¸è´´äº†ï¼Œå…·ä½“å¯çœ‹ä¹‹å‰æ–‡ç« å†™çš„ä¸Šä¸‹æ–‡å¯¹è±¡å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬å·²ç»çŸ¥é“äº†Spring Securityä¸­ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶ï¼š&lt;/p&gt;
&lt;p&gt;ğŸ“&lt;code&gt;Authentication&lt;/code&gt;ï¼šå­˜å‚¨äº†è®¤è¯ä¿¡æ¯ï¼Œä»£è¡¨å½“å‰ç™»å½•ç”¨æˆ·&lt;/p&gt;
&lt;p&gt;ğŸ“&lt;code&gt;SeucirtyContext&lt;/code&gt;ï¼šä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œç”¨æ¥è·å–&lt;code&gt;Authentication&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ğŸ“&lt;code&gt;SecurityContextHolder&lt;/code&gt;ï¼šä¸Šä¸‹æ–‡ç®¡ç†å¯¹è±¡ï¼Œç”¨æ¥åœ¨ç¨‹åºä»»ä½•åœ°æ–¹è·å–&lt;code&gt;SecurityContext&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ä»–ä»¬å…³ç³»å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/news/1496775/202101/1496775-20210112085024357-410977701.jpg&quot; alt=&quot;securitycontextholder.png&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Authentication&lt;/code&gt;ä¸­é‚£ä¸‰ä¸ªç©æ„å°±æ˜¯è®¤è¯ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;p&gt;ğŸ“&lt;code&gt;Principal&lt;/code&gt;ï¼šç”¨æˆ·ä¿¡æ¯ï¼Œæ²¡æœ‰è®¤è¯æ—¶ä¸€èˆ¬æ˜¯ç”¨æˆ·åï¼Œè®¤è¯åä¸€èˆ¬æ˜¯ç”¨æˆ·å¯¹è±¡&lt;/p&gt;
&lt;p&gt;ğŸ“&lt;code&gt;Credentials&lt;/code&gt;ï¼šç”¨æˆ·å‡­è¯ï¼Œä¸€èˆ¬æ˜¯å¯†ç &lt;/p&gt;
&lt;p&gt;ğŸ“&lt;code&gt;Authorities&lt;/code&gt;ï¼šç”¨æˆ·æƒé™&lt;/p&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬çŸ¥é“å¦‚ä½•è·å–å¹¶ä½¿ç”¨å½“å‰ç™»å½•ç”¨æˆ·äº†ï¼Œé‚£è¿™ä¸ªç”¨æˆ·æ˜¯æ€ä¹ˆè¿›è¡Œè®¤è¯çš„å‘¢ï¼Ÿæ€»ä¸èƒ½æˆ‘éšä¾¿newä¸€ä¸ªå°±ä»£è¡¨ç”¨æˆ·è®¤è¯å®Œæ¯•äº†å§ã€‚æ‰€ä»¥æˆ‘ä»¬è¿˜ç¼ºä¸€ä¸ªç”Ÿæˆ&lt;code&gt;Authentication&lt;/code&gt;å¯¹è±¡çš„è®¤è¯è¿‡ç¨‹ï¼&lt;/p&gt;
&lt;p&gt;è®¤è¯è¿‡ç¨‹å°±æ˜¯ç™»å½•è¿‡ç¨‹ï¼Œä¸ä½¿ç”¨å®‰å…¨æ¡†æ¶æ—¶å’±ä»¬çš„è®¤è¯è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;
&lt;p&gt;æŸ¥è¯¢ç”¨æˆ·æ•°æ®ğŸ‘‰åˆ¤æ–­è´¦å·å¯†ç æ˜¯å¦æ­£ç¡®ğŸ‘‰æ­£ç¡®åˆ™å°†ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ°ä¸Šä¸‹æ–‡ä¸­ğŸ‘‰ä¸Šä¸‹æ–‡ä¸­æœ‰äº†è¿™ä¸ªå¯¹è±¡åˆ™ä»£è¡¨è¯¥ç”¨æˆ·ç™»å½•äº†&lt;/p&gt;
&lt;p&gt;Spring Securityçš„è®¤è¯æµç¨‹ä¹Ÿæ˜¯å¦‚æ­¤ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;Authentication authentication = new UsernamePasswordAuthenticationToken(ç”¨æˆ·å, ç”¨æˆ·å¯†ç , ç”¨æˆ·çš„æƒé™é›†åˆ);
SecurityContextHolder.getContext().setAuthentication(authentication);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å’Œä¸ä½¿ç”¨å®‰å…¨æ¡†æ¶ä¸€æ ·ï¼Œå°†è®¤è¯ä¿¡æ¯æ”¾åˆ°ä¸Šä¸‹æ–‡ä¸­å°±ä»£è¡¨ç”¨æˆ·å·²ç™»å½•ã€‚ä¸Šé¢ä»£ç æ¼”ç¤ºçš„å°±æ˜¯Spring Securityæœ€ç®€å•çš„è®¤è¯æ–¹å¼ï¼Œç›´æ¥å°†&lt;code&gt;Authentication&lt;/code&gt;æ”¾ç½®åˆ°&lt;code&gt;SecurityContext&lt;/code&gt;ä¸­å°±å®Œæˆè®¤è¯äº†ï¼&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªæµç¨‹å’Œä¹‹å‰è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„æµç¨‹è‡ªç„¶æ˜¯ç›¸åçš„ï¼š&lt;code&gt;Authentication&lt;/code&gt;ğŸ‘‰&lt;code&gt;SecurityContext&lt;/code&gt;ğŸ‘‰&lt;code&gt;SecurityContextHolder&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æ˜¯ä¸æ˜¯è§‰å¾—ï¼Œå°±è¿™ï¼Ÿè¿™å°±å®Œæˆè®¤è¯å•¦ï¼Ÿè¿™ä¹Ÿå¤ªç®€å•äº†å§ã€‚å¯¹äºSpring Securityæ¥è¯´ï¼Œè¿™æ ·ç¡®å®å°±å®Œæˆäº†è®¤è¯ï¼Œä½†å¯¹äºæˆ‘ä»¬æ¥è¯´è¿˜å°‘äº†ä¸€æ­¥ï¼Œé‚£å°±æ˜¯åˆ¤æ–­ç”¨æˆ·çš„è´¦å·å¯†ç æ˜¯å¦æ­£ç¡®ã€‚ç”¨æˆ·è¿›è¡Œç™»å½•æ“ä½œæ—¶ä»ä¼šä¼ é€’è¿‡æ¥è´¦å·å¯†ç ï¼Œæˆ‘ä»¬è‚¯å®šæ˜¯è¦æŸ¥è¯¢ç”¨æˆ·æ•°æ®ç„¶ååˆ¤æ–­ä¼ é€’è¿‡æ¥çš„è´¦å·å¯†ç æ˜¯å¦æ­£ç¡®ï¼Œåªæœ‰æ­£ç¡®äº†å’±ä»¬æ‰ä¼šå°†è®¤è¯ä¿¡æ¯æ”¾åˆ°ä¸Šä¸‹æ–‡å¯¹è±¡ä¸­ï¼Œä¸æ­£ç¡®å°±ç›´æ¥æç¤ºé”™è¯¯ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;// è°ƒç”¨serviceå±‚æ‰§è¡Œåˆ¤æ–­ä¸šåŠ¡é€»è¾‘
if (!userService.login(ç”¨æˆ·å, ç”¨æˆ·å¯†ç )) {
    return &quot;è´¦å·å¯†ç é”™è¯¯&quot;;
}
// è´¦å·å¯†ç æ­£ç¡®äº†æ‰å°†è®¤è¯ä¿¡æ¯æ”¾åˆ°ä¸Šä¸‹æ–‡ä¸­ï¼ˆç”¨æˆ·æƒé™éœ€è¦å†ä»æ•°æ®åº“ä¸­è·å–ï¼Œåé¢å†è¯´ï¼Œè¿™é‡Œçœç•¥ï¼‰
Authentication authentication = new UsernamePasswordAuthenticationToken(ç”¨æˆ·å, ç”¨æˆ·å¯†ç , ç”¨æˆ·çš„æƒé™é›†åˆ);
SecurityContextHolder.getContext().setAuthentication(authentication);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™æ ·æ‰ç®—æ˜¯ä¸€ä¸ªå®Œæ•´çš„è®¤è¯è¿‡ç¨‹ï¼Œå’Œä¸ä½¿ç”¨å®‰å…¨æ¡†æ¶æ—¶çš„æµç¨‹æ˜¯ä¸€æ ·çš„å“¦ï¼Œåªæ˜¯ä¸€äº›ç»„ä»¶ä¹‹å‰æ˜¯æˆ‘ä»¬è‡ªå·±å®ç°çš„ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡ŒæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯å¹¶æ ¡éªŒè´¦å·å¯†ç æ˜¯å®Œå…¨ç”±æˆ‘ä»¬è‡ªå·±åœ¨ä¸šåŠ¡å±‚ç¼–å†™æ‰€æœ‰é€»è¾‘ï¼Œå…¶å®è¿™ä¸€å—Spring Securityä¹Ÿæœ‰ç»„ä»¶ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼š&lt;/p&gt;
&lt;h2 id=&quot;authenticationmanagerè®¤è¯æ–¹å¼&quot;&gt;AuthenticationManagerè®¤è¯æ–¹å¼&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;ğŸ’¡&lt;code&gt;AuthenticationManager&lt;/code&gt;&lt;/strong&gt; å°±æ˜¯Spring Securityç”¨äºæ‰§è¡Œèº«ä»½éªŒè¯çš„ç»„ä»¶ï¼Œåªéœ€è¦è°ƒç”¨å®ƒçš„&lt;code&gt;authenticate&lt;/code&gt;æ–¹æ³•å³å¯å®Œæˆè®¤è¯ã€‚Spring Securityé»˜è®¤çš„è®¤è¯æ–¹å¼å°±æ˜¯åœ¨&lt;code&gt;UsernamePasswordAuthenticationFilter&lt;/code&gt;è¿™ä¸ªè¿‡æ»¤å™¨ä¸­è°ƒç”¨è¿™ä¸ªç»„ä»¶ï¼Œè¯¥è¿‡æ»¤å™¨è´Ÿè´£è®¤è¯é€»è¾‘ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬è¦æŒ‰ç…§è‡ªå·±çš„æ–¹å¼ä½¿ç”¨è¿™ä¸ªç»„ä»¶ï¼Œå…ˆåœ¨ä¹‹å‰é…ç½®ç±»é…ç½®ä¸€ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@EnableWebSecurity
public class SecurityConfig extends WebSecurityConfigurerAdapter {
    @Bean
    @Override
    protected AuthenticationManager authenticationManager() throws Exception {
        return super.authenticationManager();
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬å†™ä¸Šå®Œæ•´çš„ç™»å½•æ¥å£ä»£ç ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@RestController
@RequestMapping(&quot;/API&quot;)
public class LoginController {
    @Autowired
    private AuthenticationManager authenticationManager;

    @PostMapping(&quot;/login&quot;)
    public String login(@RequestBody LoginParam param) {
        // ç”Ÿæˆä¸€ä¸ªåŒ…å«è´¦å·å¯†ç çš„è®¤è¯ä¿¡æ¯
        Authentication token = new UsernamePasswordAuthenticationToken(param.getUsername(), param.getPassword());
        // AuthenticationManageræ ¡éªŒè¿™ä¸ªè®¤è¯ä¿¡æ¯ï¼Œè¿”å›ä¸€ä¸ªå·²è®¤è¯çš„Authentication
        Authentication authentication = authenticationManager.authenticate(token);
        // å°†è¿”å›çš„Authenticationå­˜åˆ°ä¸Šä¸‹æ–‡ä¸­
        SecurityContextHolder.getContext().setAuthentication(authentication);
        return &quot;ç™»å½•æˆåŠŸ&quot;;
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;æ³¨æ„ï¼Œè¿™é‡Œæµç¨‹å’Œä¹‹å‰è¯´çš„æµç¨‹æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œåªæ˜¯ç”¨æˆ·èº«ä»½éªŒè¯æ”¹æˆäº†ä½¿ç”¨&lt;code&gt;AuthenticationManager&lt;/code&gt;æ¥è¿›è¡Œã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;AuthenticationManager&lt;/code&gt;çš„æ ¡éªŒé€»è¾‘éå¸¸ç®€å•ï¼š&lt;/p&gt;
&lt;p&gt;æ ¹æ®ç”¨æˆ·åå…ˆæŸ¥è¯¢å‡ºç”¨æˆ·å¯¹è±¡(æ²¡æœ‰æŸ¥åˆ°åˆ™æŠ›å‡ºå¼‚å¸¸)ğŸ‘‰å°†ç”¨æˆ·å¯¹è±¡çš„å¯†ç å’Œä¼ é€’è¿‡æ¥çš„å¯†ç è¿›è¡Œæ ¡éªŒï¼Œå¯†ç ä¸åŒ¹é…åˆ™æŠ›å‡ºå¼‚å¸¸&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªé€»è¾‘æ²¡å•¥å¥½è¯´çš„ï¼Œå†ç®€å•ä¸è¿‡äº†ã€‚é‡ç‚¹æ˜¯è¿™é‡Œæ¯ä¸€ä¸ªæ­¥éª¤Spring Securityéƒ½æä¾›äº†ç»„ä»¶ï¼š&lt;/p&gt;
&lt;p&gt;ğŸ“æ˜¯è°æ‰§è¡Œ &lt;strong&gt;æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢å‡ºç”¨æˆ·å¯¹è±¡&lt;/strong&gt; é€»è¾‘çš„å‘¢ï¼Ÿç”¨æˆ·å¯¹è±¡æ•°æ®å¯ä»¥å­˜åœ¨å†…å­˜ä¸­ã€æ–‡ä»¶ä¸­ã€æ•°æ®åº“ä¸­ï¼Œä½ å¾—ç¡®å®šå¥½æ€ä¹ˆæŸ¥æ‰è¡Œã€‚è¿™ä¸€éƒ¨åˆ†å°±æ˜¯äº¤ç”±&lt;strong&gt;ğŸ’¡&lt;code&gt;UserDetialsService&lt;/code&gt;&lt;/strong&gt; å¤„ç†ï¼Œè¯¥æ¥å£åªæœ‰ä¸€ä¸ªæ–¹æ³•&lt;code&gt;loadUserByUsername(String username)&lt;/code&gt;ï¼Œé€šè¿‡ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·å¯¹è±¡ï¼Œé»˜è®¤å®ç°æ˜¯åœ¨å†…å­˜ä¸­æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ“é‚£æŸ¥è¯¢å‡ºæ¥çš„ &lt;strong&gt;ç”¨æˆ·å¯¹è±¡&lt;/strong&gt; åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ¯ä¸ªç³»ç»Ÿä¸­çš„ç”¨æˆ·å¯¹è±¡æ•°æ®éƒ½ä¸å°½ç›¸åŒï¼Œå’±ä»¬éœ€è¦ç¡®è®¤æˆ‘ä»¬çš„ç”¨æˆ·æ•°æ®æ˜¯å•¥æ ·çš„æ‰è¡Œã€‚Spring Securityä¸­çš„ç”¨æˆ·æ•°æ®åˆ™æ˜¯ç”±&lt;strong&gt;ğŸ’¡&lt;code&gt;UserDetails&lt;/code&gt;&lt;/strong&gt;æ¥ä½“ç°ï¼Œè¯¥æ¥å£ä¸­æä¾›äº†è´¦å·ã€å¯†ç ç­‰é€šç”¨å±æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ“&lt;strong&gt;å¯¹å¯†ç è¿›è¡Œæ ¡éªŒ&lt;/strong&gt;å¤§å®¶å¯èƒ½ä¼šè§‰å¾—æ¯”è¾ƒç®€å•ï¼Œ&lt;code&gt;ifã€else&lt;/code&gt;æå®šï¼Œå°±æ²¡å¿…è¦ç”¨ä»€ä¹ˆç»„ä»¶äº†å§ï¼Ÿä½†æ¡†æ¶æ¯•ç«Ÿæ˜¯æ¡†æ¶è€ƒè™‘çš„æ¯”è¾ƒå‘¨å…¨ï¼Œé™¤äº†&lt;code&gt;ifã€else&lt;/code&gt;å¤–è¿˜è§£å†³äº†å¯†ç åŠ å¯†çš„é—®é¢˜ï¼Œè¿™ä¸ªç»„ä»¶å°±æ˜¯&lt;strong&gt;ğŸ’¡&lt;code&gt;PasswordEncoder&lt;/code&gt;&lt;/strong&gt;ï¼Œè´Ÿè´£å¯†ç åŠ å¯†ä¸æ ¡éªŒã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹ä¸‹&lt;code&gt;AuthenticationManager&lt;/code&gt;æ ¡éªŒé€»è¾‘çš„å¤§æ¦‚æºç ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public Authentication authenticate(Authentication authentication) throws AuthenticationException {
    ...çœç•¥å…¶ä»–ä»£ç 
    
    // ä¼ é€’è¿‡æ¥çš„ç”¨æˆ·å
    String username = authentication.getName();
    // è°ƒç”¨UserDetailServiceçš„æ–¹æ³•ï¼Œé€šè¿‡ç”¨æˆ·åæŸ¥è¯¢å‡ºç”¨æˆ·å¯¹è±¡UserDetailï¼ˆæŸ¥è¯¢ä¸å‡ºæ¥UserDetailServiceåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ï¼‰
    UserDetails userDetails = this.getUserDetailsService().loadUserByUsername(username);
    String presentedPassword = authentication.getCredentials().toString();
        
    // ä¼ é€’è¿‡æ¥çš„å¯†ç 
    String password = authentication.getCredentials().toString();
    // ä½¿ç”¨å¯†ç è§£æå™¨PasswordEncoderä¼ é€’è¿‡æ¥çš„å¯†ç æ˜¯å¦å’ŒçœŸå®çš„ç”¨æˆ·å¯†ç åŒ¹é…
    if (!passwordEncoder.matches(password, userDetails.getPassword())) {
        // å¯†ç é”™è¯¯åˆ™æŠ›å‡ºå¼‚å¸¸
        throw new BadCredentialsException(&quot;é”™è¯¯ä¿¡æ¯...&quot;);
    }
    
    // æ³¨æ„å“¦ï¼Œè¿™é‡Œè¿”å›çš„å·²è®¤è¯Authenticationï¼Œæ˜¯å°†æ•´ä¸ªUserDetailsæ”¾è¿›å»å……å½“Principal
    UsernamePasswordAuthenticationToken result = new UsernamePasswordAuthenticationToken(userDetails,
                                authentication.getCredentials(), userDetails.getAuthorities());
        return result;
    
    ...çœç•¥å…¶ä»–ä»£ç 
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;UserDetialsService&lt;/code&gt;ğŸ‘‰&lt;code&gt;UserDetails&lt;/code&gt;ğŸ‘‰&lt;code&gt;PasswordEncoder&lt;/code&gt;ï¼Œè¿™ä¸‰ä¸ªç»„ä»¶Spring Securityéƒ½æœ‰é»˜è®¤å®ç°ï¼Œè¿™ä¸€èˆ¬æ˜¯æ»¡è¶³ä¸äº†æˆ‘ä»¬çš„å®é™…éœ€æ±‚çš„ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬è‡ªå·±æ¥å®ç°è¿™äº›ç»„ä»¶ï¼&lt;/p&gt;
&lt;h3 id=&quot;åŠ å¯†å™¨passwordencoder&quot;&gt;åŠ å¯†å™¨PasswordEncoder&lt;/h3&gt;
&lt;p&gt;é¦–å…ˆæ˜¯&lt;code&gt;PasswordEncoder&lt;/code&gt;ï¼Œè¿™ä¸ªæ¥å£å¾ˆç®€å•å°±ä¸¤ä¸ªé‡è¦æ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public interface PasswordEncoder {
    /**
         * åŠ å¯†
         */
    String encode(CharSequence rawPassword);
    /**
         * å°†æœªåŠ å¯†çš„å­—ç¬¦ä¸²ï¼ˆå‰ç«¯ä¼ é€’è¿‡æ¥çš„å¯†ç ï¼‰å’Œå·²åŠ å¯†çš„å­—ç¬¦ä¸²ï¼ˆæ•°æ®åº“ä¸­å­˜å‚¨çš„å¯†ç ï¼‰è¿›è¡Œæ ¡éªŒ
         */
    boolean matches(CharSequence rawPassword, String encodedPassword);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½ å¯ä»¥å®ç°æ­¤æ¥å£å®šä¹‰è‡ªå·±çš„åŠ å¯†è§„åˆ™å’Œæ ¡éªŒè§„åˆ™ï¼Œä¸è¿‡Spring Securityæä¾›äº†å¾ˆå¤šåŠ å¯†å™¨å®ç°ï¼Œæˆ‘ä»¬è¿™é‡Œé€‰å®šä¸€ä¸ªå°±å¥½ã€‚å¯ä»¥åœ¨ä¹‹å‰æ‰€è¯´çš„&lt;strong&gt;é…ç½®ç±»&lt;/strong&gt;é‡Œè¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Bean
public PasswordEncoder passwordEncoder() {
    // è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨bcryptåŠ å¯†ç®—æ³•ï¼Œå®‰å…¨æ€§æ¯”è¾ƒé«˜
    return new BCryptPasswordEncoder();
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å› ä¸ºå¯†ç åŠ å¯†æ˜¯æˆ‘å‰é¢æ–‡ç« å°‘æ•°æ²¡æœ‰ä»‹ç»çš„åŠŸèƒ½ï¼Œæ‰€ä»¥è¿™é‡Œé¢å¤–æä¸€å˜´ã€‚å¾€æ•°æ®åº“ä¸­æ·»åŠ ç”¨æˆ·æ•°æ®æ—¶å°±è¦å°†å¯†ç è¿›è¡ŒåŠ å¯†ï¼Œå¦åˆ™åç»­è¿›è¡Œå¯†ç æ ¡éªŒæ—¶ä»æ•°æ®åº“æ‹¿å‡ºæ¥çš„è¿˜æ˜¯æ˜æ–‡å¯†ç ï¼Œæ˜¯æ— æ³•é€šè¿‡æ ¡éªŒçš„ã€‚æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªç”¨æˆ·æ³¨å†Œçš„æ¥å£ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Autowired
private PasswordEncoder passwordEncoder;

@PostMapping(&quot;/register&quot;)
public String register(@RequestBody UserParam param) {
    UserEntity user = new UserEntity();
    // è°ƒç”¨åŠ å¯†å™¨å°†å‰ç«¯ä¼ é€’è¿‡æ¥çš„å¯†ç è¿›è¡ŒåŠ å¯†
    user.setUsername(param.getUsername()).setPassword(passwordEncoder.encode(param.getPassword()));
    // å°†ç”¨æˆ·å®ä½“å¯¹è±¡æ·»åŠ åˆ°æ•°æ®åº“
    userService.save(user);
    return &quot;æ³¨å†ŒæˆåŠŸ&quot;;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™æ ·æ•°æ®åº“ä¸­å­˜å‚¨çš„å¯†ç éƒ½æ˜¯å·²åŠ å¯†çš„äº†ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1496775/202101/1496775-20210112085024631-87486152.jpg&quot; alt=&quot;å¯†ç åŠ å¯†.png&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;ç”¨æˆ·å¯¹è±¡userdetails&quot;&gt;ç”¨æˆ·å¯¹è±¡UserDetails&lt;/h3&gt;
&lt;p&gt;è¯¥æ¥å£å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„ç”¨æˆ·å¯¹è±¡ï¼Œå®ƒæä¾›äº†ç”¨æˆ·çš„ä¸€äº›é€šç”¨å±æ€§ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public interface UserDetails extends Serializable {
   /**
    * ç”¨æˆ·æƒé™é›†åˆï¼ˆè¿™ä¸ªæƒé™å¯¹è±¡ç°åœ¨ä¸ç®¡å®ƒï¼Œåˆ°æƒé™æ—¶æˆ‘ä¼šè®²è§£ï¼‰
    */
   Collection&amp;lt;? extends GrantedAuthority&amp;gt; getAuthorities();
   /**
    * ç”¨æˆ·å¯†ç 
    */
   String getPassword();
   /**
    * ç”¨æˆ·å
    */
   String getUsername();
   /**
    * ç”¨æˆ·æ²¡è¿‡æœŸè¿”å›trueï¼Œåä¹‹åˆ™false
    */
   boolean isAccountNonExpired();
   /**
    * ç”¨æˆ·æ²¡é”å®šè¿”å›trueï¼Œåä¹‹åˆ™false
    */
   boolean isAccountNonLocked();
   /**
    * ç”¨æˆ·å‡­æ®(é€šå¸¸ä¸ºå¯†ç )æ²¡è¿‡æœŸè¿”å›trueï¼Œåä¹‹åˆ™false
    */
   boolean isCredentialsNonExpired();
   /**
    * ç”¨æˆ·æ˜¯å¯ç”¨çŠ¶æ€è¿”å›trueï¼Œåä¹‹åˆ™false
    */
   boolean isEnabled();
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å®é™…å¼€å‘ä¸­æˆ‘ä»¬çš„ç”¨æˆ·å±æ€§å„ç§å„æ ·ï¼Œè¿™äº›é»˜è®¤å±æ€§å¿…ç„¶æ˜¯æ»¡è¶³ä¸äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬ä¼šè‡ªå·±å®ç°è¯¥æ¥å£ï¼Œç„¶åè®¾ç½®å¥½æˆ‘ä»¬å®é™…çš„ç”¨æˆ·å®ä½“å¯¹è±¡ã€‚å®ç°æ­¤æ¥å£è¦é‡å†™å¾ˆå¤šæ–¹æ³•æ¯”è¾ƒéº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥ç»§æ‰¿Spring Securityæä¾›çš„&lt;code&gt;org.springframework.security.core.userdetails.User&lt;/code&gt;ç±»ï¼Œè¯¥ç±»å®ç°äº†&lt;code&gt;UserDetails&lt;/code&gt;æ¥å£å¸®æˆ‘ä»¬çœå»äº†é‡å†™æ–¹æ³•çš„å·¥ä½œï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class UserDetail extends User {
    /**
     * æˆ‘ä»¬è‡ªå·±çš„ç”¨æˆ·å®ä½“å¯¹è±¡ï¼Œè¦è°ƒå–ç”¨æˆ·ä¿¡æ¯æ—¶ç›´æ¥è·å–è¿™ä¸ªå®ä½“å¯¹è±¡ã€‚ï¼ˆè¿™é‡Œæˆ‘å°±ä¸å†™get/setæ–¹æ³•äº†ï¼‰
     */
    private UserEntity userEntity;

    public UserDetail(UserEntity userEntity, Collection&amp;lt;? extends GrantedAuthority&amp;gt; authorities) {
        // å¿…é¡»è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•ï¼Œä»¥åˆå§‹åŒ–ç”¨æˆ·åã€å¯†ç ã€æƒé™
        super(userEntity.getUsername(), userEntity.getPassword(), authorities);
        this.userEntity = userEntity;
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;ä¸šåŠ¡å¯¹è±¡userdetailsservice&quot;&gt;ä¸šåŠ¡å¯¹è±¡UserDetailsService&lt;/h3&gt;
&lt;p&gt;è¯¥æ¥å£å¾ˆç®€å•åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public interface UserDetailsService {
        /**
         * æ ¹æ®ç”¨æˆ·åè·å–ç”¨æˆ·å¯¹è±¡ï¼ˆè·å–ä¸åˆ°ç›´æ¥æŠ›å¼‚å¸¸ï¼‰
         */
        UserDetails loadUserByUsername(String username) throws UsernameNotFoundException;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å’±ä»¬è‡ªå·±çš„ç”¨æˆ·ä¸šåŠ¡ç±»è¯¥æ¥å£å³å¯å®Œæˆè‡ªå·±çš„é€»è¾‘ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Service
public class UserServiceImpl implements UserService, UserDetailsService {
    @Autowired
    private UserMapper userMapper;

    @Override
    public UserDetails loadUserByUsername(String username) {
        // ä»æ•°æ®åº“ä¸­æŸ¥è¯¢å‡ºç”¨æˆ·å®ä½“å¯¹è±¡
        UserEntity user = userMapper.selectByUsername(username);
        // è‹¥æ²¡æŸ¥è¯¢åˆ°ä¸€å®šè¦æŠ›å‡ºè¯¥å¼‚å¸¸ï¼Œè¿™æ ·æ‰èƒ½è¢«Spring Securityçš„é”™è¯¯å¤„ç†å™¨å¤„ç†
        if (user == null) {
            throw new UsernameNotFoundException(&quot;æ²¡æœ‰æ‰¾åˆ°è¯¥ç”¨æˆ·&quot;);
        }
        // èµ°åˆ°è¿™ä»£è¡¨æŸ¥è¯¢åˆ°äº†å®ä½“å¯¹è±¡ï¼Œé‚£å°±è¿”å›æˆ‘ä»¬è‡ªå®šä¹‰çš„UserDetailå¯¹è±¡ï¼ˆè¿™é‡Œæƒé™æš‚æ—¶æ”¾ä¸ªç©ºé›†åˆï¼Œåé¢æˆ‘ä¼šè®²è§£ï¼‰
        return new UserDetail(user, Collections.emptyList());
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;AuthenticationManager&lt;/code&gt;æ ¡éªŒæ‰€è°ƒç”¨çš„ä¸‰ä¸ªç»„ä»¶æˆ‘ä»¬å°±å·²ç»åšå¥½å®ç°äº†ï¼&lt;/p&gt;
&lt;p&gt;ä¸çŸ¥é“å¤§å®¶æ³¨æ„åˆ°æ²¡æœ‰ï¼Œå½“æˆ‘ä»¬æŸ¥è¯¢ç”¨æˆ·å¤±è´¥æ—¶æˆ–è€…æ ¡éªŒå¯†ç å¤±è´¥æ—¶éƒ½ä¼šæŠ›å‡ºSpring Securityçš„è‡ªå®šä¹‰å¼‚å¸¸ã€‚è¿™äº›å¼‚å¸¸ä¸å¯èƒ½æ”¾ä»»ä¸ç®¡ï¼ŒSpring Securityå¯¹äºè¿™äº›å¼‚å¸¸éƒ½æ˜¯åœ¨&lt;code&gt;ExceptionTranslationFilter&lt;/code&gt;è¿‡æ»¤å™¨ä¸­è¿›è¡Œå¤„ç†ï¼ˆå¯ä»¥å›é¡¾ä¸€ä¸‹å‰é¢çš„è¿‡æ»¤å™¨æˆªå›¾ï¼‰ï¼Œè€Œ&lt;strong&gt;ğŸ’¡&lt;code&gt;AuthenticationEntryPoint&lt;/code&gt;&lt;/strong&gt;åˆ™ä¸“é—¨å¤„ç†è®¤è¯å¼‚å¸¸ï¼&lt;/p&gt;
&lt;h3 id=&quot;è®¤è¯å¼‚å¸¸å¤„ç†å™¨authenticationentrypoint&quot;&gt;è®¤è¯å¼‚å¸¸å¤„ç†å™¨AuthenticationEntryPoint&lt;/h3&gt;
&lt;p&gt;è¯¥æ¥å£ä¹Ÿåªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public interface AuthenticationEntryPoint {
        /**
         * æ¥æ”¶å¼‚å¸¸å¹¶å¤„ç†
         */
        void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬æ¥è‡ªå®šä¹‰ä¸€ä¸ªç±»å®ç°æˆ‘ä»¬è‡ªå·±çš„é”™è¯¯å¤„ç†é€»è¾‘ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class MyEntryPoint implements AuthenticationEntryPoint {
    @Override
    public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException e) throws IOException {
        response.setContentType(&quot;application/json;charset=utf-8&quot;);
        PrintWriter out = response.getWriter();
        // ç›´æ¥æç¤ºå‰ç«¯è®¤è¯é”™è¯¯
        out.write(&quot;è®¤è¯é”™è¯¯&quot;);
        out.flush();
        out.close();
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç”¨æˆ·ä¼ é€’è¿‡æ¥è´¦å·å¯†ç ğŸ‘‰è®¤è¯æ ¡éªŒğŸ‘‰å¼‚å¸¸å¤„ç†ï¼Œè¿™ä¸€æ•´å¥—æµç¨‹çš„ç»„ä»¶æˆ‘ä»¬å°±éƒ½ç»™å®šä¹‰å®Œäº†ï¼ç°åœ¨åªå·®æœ€åä¸€æ­¥ï¼Œå°±æ˜¯åœ¨Spring Securityé…ç½®ç±»é‡Œé¢è¿›è¡Œä¸€äº›é…ç½®ï¼Œæ‰èƒ½è®©è¿™äº›ç”Ÿæ•ˆã€‚&lt;/p&gt;
&lt;h3 id=&quot;é…ç½®&quot;&gt;é…ç½®&lt;/h3&gt;
&lt;p&gt;Spring Securityå¯¹å“ªäº›æ¥å£è¿›è¡Œä¿æŠ¤ã€ä»€ä¹ˆç»„ä»¶ç”Ÿæ•ˆã€æŸäº›åŠŸèƒ½æ˜¯å¦å¯ç”¨ç­‰ç­‰éƒ½éœ€è¦åœ¨é…ç½®ç±»ä¸­è¿›è¡Œé…ç½®ï¼Œæ³¨æ„çœ‹ä»£ç æ³¨é‡Šï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@EnableWebSecurity
public class SecurityConfig extends WebSecurityConfigurerAdapter {
    @Autowired
    private UserServiceImpl userDetailsService;

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        // å…³é—­csrfå’ŒframeOptionsï¼Œå¦‚æœä¸å…³é—­ä¼šå½±å“å‰ç«¯è¯·æ±‚æ¥å£ï¼ˆè¿™é‡Œä¸å±•å¼€ç»†è®²äº†ï¼Œæ„Ÿå…´è¶£çš„è‡ªè¡Œäº†è§£ï¼‰
        http.csrf().disable();
        http.headers().frameOptions().disable();
        // å¼€å¯è·¨åŸŸä»¥ä¾¿å‰ç«¯è°ƒç”¨æ¥å£
        http.cors();

        // è¿™æ˜¯é…ç½®çš„å…³é”®ï¼Œå†³å®šå“ªäº›æ¥å£å¼€å¯é˜²æŠ¤ï¼Œå“ªäº›æ¥å£ç»•è¿‡é˜²æŠ¤
        http.authorizeRequests()
                // æ³¨æ„è¿™é‡Œï¼Œæ˜¯å…è®¸å‰ç«¯è·¨åŸŸè”è°ƒçš„ä¸€ä¸ªå¿…è¦é…ç½®
                .requestMatchers(CorsUtils::isPreFlightRequest).permitAll()
                // æŒ‡å®šæŸäº›æ¥å£ä¸éœ€è¦é€šè¿‡éªŒè¯å³å¯è®¿é—®ã€‚ç™»é™†ã€æ³¨å†Œæ¥å£è‚¯å®šæ˜¯ä¸éœ€è¦è®¤è¯çš„
                .antMatchers(&quot;/API/login&quot;, &quot;/API/register&quot;).permitAll()
                // è¿™é‡Œæ„æ€æ˜¯å…¶å®ƒæ‰€æœ‰æ¥å£éœ€è¦è®¤è¯æ‰èƒ½è®¿é—®
                .anyRequest().authenticated()
                // æŒ‡å®šè®¤è¯é”™è¯¯å¤„ç†å™¨
                .and().exceptionHandling().authenticationEntryPoint(new MyEntryPoint());
    }

    @Override
    protected void configure(AuthenticationManagerBuilder auth) throws Exception {
        // æŒ‡å®šUserDetailServiceå’ŒåŠ å¯†å™¨
        auth.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());
    }

    @Bean
    @Override
    protected AuthenticationManager authenticationManager() throws Exception {
        return super.authenticationManager();
    }

    @Bean
    public PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…¶ä¸­ç”¨çš„æœ€å¤šçš„å°±æ˜¯&lt;code&gt;configure(HttpSecurity http)&lt;/code&gt;æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡&lt;code&gt;HttpSecurity&lt;/code&gt; è¿›è¡Œè®¸å¤šé…ç½®ã€‚å½“æˆ‘ä»¬é‡å†™è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œå°±å·²ç»å…³é—­äº†é»˜è®¤çš„è¡¨å•ç™»å½•æ–¹å¼ï¼Œç„¶åæˆ‘ä»¬å†é…ç½®å¥½å¯ç”¨å“ªäº›ç»„ä»¶ã€æŒ‡å®šå“ªäº›æ¥å£éœ€è¦è®¤è¯ï¼Œå°±æå®šäº†ï¼&lt;/p&gt;
&lt;p&gt;å‡è®¾ç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ª&lt;code&gt;/API/test&lt;/code&gt;æ¥å£ï¼Œåœ¨æ²¡æœ‰ç™»å½•çš„æ—¶å€™è°ƒç”¨è¯¥æ¥å£çœ‹ä¸‹æ•ˆæœï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1496775/202101/1496775-20210112085025275-299247427.jpg&quot; alt=&quot;è®¤è¯é”™è¯¯.png&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ç™»å½•ä¸€ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/news/1496775/202101/1496775-20210112085025620-1767401760.jpg&quot; alt=&quot;ç™»å½•æ¥å£.png&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åå†è°ƒç”¨æµ‹è¯•æ¥å£ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1496775/202101/1496775-20210112085025963-327396699.jpg&quot; alt=&quot;è®¤è¯é€šè¿‡.png&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°æœªç™»å½•æ—¶æµ‹è¯•æ¥å£æ˜¯æ— æ³•æ­£å¸¸è®¿é—®çš„ï¼Œä¼šæŒ‰ç…§æˆ‘ä»¬åœ¨&lt;code&gt;EntryPoint&lt;/code&gt;ä¸­çš„é€»è¾‘è¿”å›é”™è¯¯æç¤ºã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ€»ç»“å’Œè¡¥å……&quot;&gt;æ€»ç»“å’Œè¡¥å……&lt;/h3&gt;
&lt;p&gt;æœ‰äººå¯èƒ½ä¼šé—®ï¼Œç”¨&lt;code&gt;AuthenticationManager&lt;/code&gt;è®¤è¯æ–¹å¼è¦é…ç½®å¥½å¤šä¸œè¥¿å•Šï¼Œæˆ‘å°±ç”¨ä¹‹å‰è¯´çš„é‚£ç§æœ€ç®€å•çš„æ–¹å¼ä¸è¡Œå—ï¼Ÿå½“ç„¶æ˜¯å¯ä»¥çš„å•¦ï¼Œç”¨å“ªç§æ–¹å¼éƒ½éšä¾¿ï¼Œåªè¦å®ŒæˆåŠŸèƒ½éƒ½è¡Œã€‚å…¶å®ä¸ç®¡å“ªç§æ–¹å¼æˆ‘ä»¬çš„è®¤è¯çš„é€»è¾‘ä»£ç ä¸€æ ·éƒ½æ²¡å°‘ï¼Œåªä¸è¿‡ä¸€ä¸ªæ˜¯æˆ‘ä»¬è‡ªå·±ä¸šåŠ¡ç±»å…¨éƒ¨æå®šï¼Œä¸€ä¸ªæ˜¯å¯ä»¥é›†æˆæ¡†æ¶çš„ç»„ä»¶ã€‚è¿™é‡Œä¹Ÿé¡ºå¸¦å†æ€»ç»“ä¸€ä¸‹æµç¨‹ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;ç”¨æˆ·è°ƒè¿›è¡Œç™»å½•æ“ä½œï¼Œä¼ é€’è´¦å·å¯†ç è¿‡æ¥ğŸ‘‰ç™»å½•æ¥å£è°ƒç”¨&lt;code&gt;AuthenticationManager&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢å‡ºç”¨æˆ·æ•°æ®ğŸ‘‰&lt;code&gt;UserDetailService&lt;/code&gt;æŸ¥è¯¢å‡º&lt;code&gt;UserDetails&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å°†ä¼ é€’è¿‡æ¥çš„å¯†ç å’Œæ•°æ®åº“ä¸­çš„å¯†ç è¿›è¡Œå¯¹æ¯”æ ¡éªŒğŸ‘‰&lt;code&gt;PasswordEncoder&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;æ ¡éªŒé€šè¿‡åˆ™å°†è®¤è¯ä¿¡æ¯å­˜å…¥åˆ°ä¸Šä¸‹æ–‡ä¸­ğŸ‘‰å°†&lt;code&gt;UserDetails&lt;/code&gt;å­˜å…¥åˆ°&lt;code&gt;Authentication&lt;/code&gt;ï¼Œå°†&lt;code&gt;Authentication&lt;/code&gt;å­˜å…¥åˆ°&lt;code&gt;SecurityContext&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å¦‚æœè®¤è¯å¤±è´¥åˆ™æŠ›å‡ºå¼‚å¸¸ğŸ‘‰ç”±&lt;code&gt;AuthenticationEntryPoint&lt;/code&gt;å¤„ç†&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;åˆšæ‰æˆ‘ä»¬è®²çš„è®¤è¯æ–¹å¼éƒ½æ˜¯åŸºäº&lt;code&gt;session&lt;/code&gt;æœºåˆ¶ï¼Œè®¤è¯åSpring Securityä¼šå°†&lt;code&gt;Authentication&lt;/code&gt;å­˜å…¥åˆ°&lt;code&gt;session&lt;/code&gt;ä¸­ï¼ŒKeyä¸º&lt;code&gt;HttpSessionSecurityContextRepository.SPRING_SECURITY_CONTEXT_KEY&lt;/code&gt;ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å®Œå…¨å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼è·å–&lt;code&gt;Authentication&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;Authentication = (Authentication)session.getAttribute(HttpSessionSecurityContextRepository.SPRING_SECURITY_CONTEXT_KEY)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å½“ç„¶ï¼Œå®˜æ–¹è¿˜æ˜¯ä¸æ¨èè¿™æ ·ç›´æ¥æ“ä½œçš„ï¼Œå› ä¸ºç»Ÿä¸€é€šè¿‡&lt;code&gt;SecurityContextHolder&lt;/code&gt;æ“ä½œæ›´åˆ©äºç®¡ç†ï¼ä½¿ç”¨&lt;code&gt;SecurityContextHolder&lt;/code&gt;é™¤äº†è·å–å½“å‰ç”¨æˆ·å¤–ï¼Œé€€å‡ºç™»å½•çš„æ“ä½œä¹Ÿæ˜¯å¾ˆæ–¹ä¾¿çš„ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@GetMapping(&quot;/logout&quot;)
public String logout() {
    SecurityContextHolder.clearContext();
    return &quot;é€€å‡ºæˆåŠŸ&quot;;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;session&lt;/code&gt;è®¤è¯å’±ä»¬å°±è®²è§£åˆ°æ­¤ï¼Œæ¥ä¸‹æ¥å’±ä»¬è®²è§£&lt;code&gt;JWT&lt;/code&gt;çš„è®¤è¯ã€‚&lt;/p&gt;
&lt;h2 id=&quot;jwté›†æˆ&quot;&gt;JWTé›†æˆ&lt;/h2&gt;
&lt;p&gt;å…³äº&lt;code&gt;JWT&lt;/code&gt;çš„ä»‹ç»å’Œå·¥å…·ç±»ç­‰æˆ‘åœ¨å‰é¢æ–‡ç« å·²ç»è®²çš„å¾ˆæ¸…æ¥šäº†ï¼Œè¿™é‡Œæˆ‘å°±ä¸é¢å¤–è¯´æ˜äº†ï¼Œç›´æ¥å¸¦å¤§å®¶å®ç°ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;é‡‡ç”¨&lt;code&gt;JWT&lt;/code&gt;çš„æ–¹å¼è¿›è¡Œè®¤è¯é¦–å…ˆåšçš„ç¬¬ä¸€æ­¥å°±æ˜¯åœ¨é…ç½®ç±»é‡Œç¦ç”¨æ‰&lt;code&gt;session&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;// ç¦ç”¨session
http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);
&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;æ³¨æ„ï¼Œè¿™é‡Œçš„ç¦ç”¨æ˜¯æŒ‡Spring Securityä¸é‡‡ç”¨&lt;code&gt;session&lt;/code&gt;æœºåˆ¶äº†ï¼Œä¸ä»£è¡¨ä½ ç¦ç”¨æ‰äº†æ•´ä¸ªç³»ç»Ÿçš„&lt;code&gt;session&lt;/code&gt;åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç„¶åæˆ‘ä»¬å†ä¿®æ”¹ä¸€ä¸‹ç™»å½•æ¥å£ï¼Œå½“ç”¨æˆ·ç™»å½•æˆåŠŸçš„åŒæ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç”Ÿæˆ&lt;code&gt;token&lt;/code&gt;å¹¶è¿”å›ç»™å‰ç«¯ï¼Œè¿™æ ·å‰ç«¯æ‰èƒ½è®¿é—®å…¶ä»–æ¥å£æ—¶æºå¸¦&lt;code&gt;token&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Autowired
private UserService userService;

@PostMapping(&quot;/login&quot;)
public UserVO login(@RequestBody @Validated LoginParam user) {
    // è°ƒç”¨ä¸šåŠ¡å±‚æ‰§è¡Œç™»å½•æ“ä½œ
    return userService.login(user);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸šåŠ¡å±‚æ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public UserVO login(LoginParam param) {
    // æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢å‡ºç”¨æˆ·å®ä½“å¯¹è±¡
    UserEntity user = userMapper.selectByUsername(param.getUsername());
    // è‹¥æ²¡æœ‰æŸ¥åˆ°ç”¨æˆ· æˆ–è€… å¯†ç æ ¡éªŒå¤±è´¥åˆ™æŠ›å‡ºè‡ªå®šä¹‰å¼‚å¸¸
    if (user == null || !passwordEncoder.matches(param.getPassword(), user.getPassword())) {
        throw new ApiException(&quot;è´¦å·å¯†ç é”™è¯¯&quot;);
    }

    // éœ€è¦è¿”å›ç»™å‰ç«¯çš„VOå¯¹è±¡
    UserVO userVO = new UserVO();
    userVO.setId(user.getId())
        .setUsername(user.getUsername())
        // ç”ŸæˆJWTï¼Œå°†ç”¨æˆ·åæ•°æ®å­˜å…¥å…¶ä¸­
        .setToken(jwtManager.generate(user.getUsername()));
    return userVO;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬æ‰§è¡Œä¸€ä¸‹ç™»å½•æ“ä½œï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1496775/202101/1496775-20210112085026581-529786086.jpg&quot; alt=&quot;JWTç™»å½•.png&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç™»å½•æˆåŠŸæ—¶æ¥å£ä¼šè¿”å›&lt;code&gt;token&lt;/code&gt;ï¼Œåç»­æˆ‘ä»¬å†è®¿é—®å…¶å®ƒæ¥å£æ—¶éœ€è¦å°†&lt;code&gt;token&lt;/code&gt;æ”¾åˆ°è¯·æ±‚å¤´ä¸­ã€‚è¿™é‡Œæˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰ä¸€ä¸ªè®¤è¯è¿‡æ»¤å™¨ï¼Œæ¥å¯¹&lt;code&gt;token&lt;/code&gt;è¿›è¡Œæ ¡éªŒï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Component
public class LoginFilter extends OncePerRequestFilter {
    @Autowired
    private JwtManager jwtManager;
    @Autowired
    private UserServiceImpl userService;

    @Override
    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws ServletException, IOException {
        // ä»è¯·æ±‚å¤´ä¸­è·å–tokenå­—ç¬¦ä¸²å¹¶è§£æï¼ˆJwtManagerä¹‹å‰æ–‡ç« æœ‰è¯¦è§£ï¼Œè¿™é‡Œä¸å¤šè¯´äº†ï¼‰
        Claims claims = jwtManager.parse(request.getHeader(&quot;Authorization&quot;));
        if (claims != null) {
            // ä»`JWT`ä¸­æå–å‡ºä¹‹å‰å­˜å‚¨å¥½çš„ç”¨æˆ·å
            String username = claims.getSubject();
            // æŸ¥è¯¢å‡ºç”¨æˆ·å¯¹è±¡
            UserDetails user = userService.loadUserByUsername(username);
            // æ‰‹åŠ¨ç»„è£…ä¸€ä¸ªè®¤è¯å¯¹è±¡
            Authentication authentication = new UsernamePasswordAuthenticationToken(user, user.getPassword(), user.getAuthorities());
            // å°†è®¤è¯å¯¹è±¡æ”¾åˆ°ä¸Šä¸‹æ–‡ä¸­
            SecurityContextHolder.getContext().setAuthentication(authentication);
        }
        chain.doFilter(request, response);
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿‡æ»¤å™¨ä¸­çš„é€»è¾‘å’Œä¹‹å‰ä»‹ç»çš„&lt;strong&gt;æœ€ç®€å•çš„è®¤è¯æ–¹å¼&lt;/strong&gt;é€»è¾‘æ˜¯ä¸€è‡´çš„ï¼Œæ¯å½“ä¸€ä¸ªè¯·æ±‚æ¥æ—¶æˆ‘ä»¬éƒ½ä¼šæ ¡éªŒ&lt;code&gt;JWT&lt;/code&gt;è¿›è¡Œè®¤è¯ï¼Œä¸Šä¸‹æ–‡å¯¹è±¡ä¸­æœ‰äº†&lt;code&gt;Authentication&lt;/code&gt;åç»­è¿‡æ»¤å™¨å°±ä¼šçŸ¥é“è¯¥è¯·æ±‚å·²ç»è®¤è¯è¿‡äº†ã€‚&lt;/p&gt;
&lt;p&gt;å’±ä»¬è¿™ä¸ªè‡ªå®šä¹‰çš„è¿‡æ»¤å™¨éœ€è¦æ›¿æ¢æ‰Spring Securityé»˜è®¤çš„è®¤è¯è¿‡æ»¤å™¨ï¼Œè¿™æ ·æˆ‘ä»¬çš„è¿‡æ»¤å™¨æ‰èƒ½ç”Ÿæ•ˆï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;// å°†æˆ‘ä»¬è‡ªå®šä¹‰çš„è®¤è¯è¿‡æ»¤å™¨æ›¿æ¢æ‰é»˜è®¤çš„è®¤è¯è¿‡æ»¤å™¨
http.addFilterBefore(loginFilter, UsernamePasswordAuthenticationFilter.class);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥æ–­ç‚¹è°ƒè¯•çœ‹ä¸€ä¸‹ç°åœ¨çš„è¿‡æ»¤å™¨æ˜¯æ€æ ·çš„ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/news/1496775/202101/1496775-20210112085027744-1007689107.jpg&quot; alt=&quot;è‡ªå®šä¹‰è¿‡æ»¤å™¨.png&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°æˆ‘ä»¬è‡ªå®šä¹‰çš„è¿‡æ»¤å™¨å·²ç»æ›¿æ¢æ‰äº†&lt;code&gt;UsernamePasswordAuthenticationFilter&lt;/code&gt;é»˜è®¤è¿‡æ»¤å™¨äº†ï¼å½“æˆ‘ä»¬æºå¸¦&lt;code&gt;token&lt;/code&gt;è®¿é—®æ¥å£æ—¶å¯ä»¥å‘ç°å·²ç»ç”Ÿæ•ˆï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1496775/202101/1496775-20210112085028108-609275994.jpg&quot; alt=&quot;JWTè®¤è¯ç”Ÿæ•ˆ.png&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç™»å½•è®¤è¯åˆ°æ­¤å°±è®²è§£å®Œæ¯•äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¸€é¼“ä½œæ°”æ¥å®ç°æƒé™æˆæƒï¼&lt;/p&gt;

&lt;p&gt;èœå•æƒé™ä¸»è¦æ˜¯é€šè¿‡å‰ç«¯æ¸²æŸ“ï¼Œæ•°æ®æƒé™ä¸»è¦é &lt;code&gt;SQL&lt;/code&gt;æ‹¦æˆªï¼Œå’ŒSpring Securityæ²¡å¤ªå¤§è€¦åˆï¼Œå°±ä¸å¤šå±•å¼€äº†ã€‚æˆ‘ä»¬æ¥æ¢³ç†ä¸€ä¸‹&lt;strong&gt;æ¥å£æƒé™&lt;/strong&gt;çš„æˆæƒçš„æµç¨‹ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;å½“ä¸€ä¸ªè¯·æ±‚è¿‡æ¥ï¼Œæˆ‘ä»¬å…ˆå¾—çŸ¥é“è¿™ä¸ªè¯·æ±‚çš„è§„åˆ™ï¼Œå³éœ€è¦æ€æ ·çš„æƒé™æ‰èƒ½è®¿é—®&lt;/li&gt;
&lt;li&gt;ç„¶åè·å–å½“å‰ç™»å½•ç”¨æˆ·æ‰€æ‹¥æœ‰çš„æƒé™&lt;/li&gt;
&lt;li&gt;å†æ ¡éªŒå½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰è¯¥è¯·æ±‚çš„æƒé™&lt;/li&gt;
&lt;li&gt;ç”¨æˆ·æ‹¥æœ‰è¿™ä¸ªæƒé™åˆ™æ­£å¸¸è¿”å›æ•°æ®ï¼Œæ²¡æœ‰æƒé™åˆ™æ‹’ç»è¯·æ±‚&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;å®Œæˆäº†ç™»å½•è®¤è¯åŠŸèƒ½åï¼Œæƒ³å¿…å¤§å®¶å·²ç»æœ‰ç‚¹æ„Ÿè§‰ï¼šSpring Securityå°†æµç¨‹åŠŸèƒ½åˆ†å¾—å¾ˆç»†ï¼Œæ¯ä¸€ä¸ªå°åŠŸèƒ½éƒ½ä¼šæœ‰ä¸€ä¸ªç»„ä»¶ä¸“é—¨å»åšï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯å»è‡ªå®šä¹‰è¿™äº›ç»„ä»¶ï¼Spring Securityé’ˆå¯¹ä¸Šè¿°æµç¨‹ä¹Ÿæä¾›äº†è®¸å¤šç»„ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;Spring Securityçš„æˆæƒå‘ç”Ÿåœ¨&lt;code&gt;FilterSecurityInterceptor&lt;/code&gt;è¿‡æ»¤å™¨ä¸­ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;é¦–å…ˆè°ƒç”¨çš„æ˜¯&lt;strong&gt;ğŸ’¡&lt;code&gt;SecurityMetadataSource&lt;/code&gt;&lt;/strong&gt;ï¼Œæ¥è·å–å½“å‰è¯·æ±‚çš„é‰´æƒè§„åˆ™&lt;/li&gt;
&lt;li&gt;ç„¶åé€šè¿‡&lt;code&gt;Authentication&lt;/code&gt;è·å–å½“å‰ç™»å½•ç”¨æˆ·æ‰€æœ‰æƒé™æ•°æ®ï¼š&lt;strong&gt;ğŸ’¡&lt;code&gt;GrantedAuthority&lt;/code&gt;&lt;/strong&gt;ï¼Œè¿™ä¸ªæˆ‘ä»¬å‰é¢æè¿‡ï¼Œè®¤è¯å¯¹è±¡é‡Œå­˜æ”¾è¿™æƒé™æ•°æ®&lt;/li&gt;
&lt;li&gt;å†è°ƒç”¨&lt;strong&gt;ğŸ’¡&lt;code&gt;AccessDecisionManager&lt;/code&gt;&lt;/strong&gt; æ¥æ ¡éªŒå½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰è¯¥æƒé™&lt;/li&gt;
&lt;li&gt;å¦‚æœæœ‰å°±æ”¾è¡Œæ¥å£ï¼Œæ²¡æœ‰åˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œè¯¥å¼‚å¸¸ä¼šè¢«&lt;strong&gt;ğŸ’¡&lt;code&gt;AccessDeniedHandler&lt;/code&gt;&lt;/strong&gt; å¤„ç†&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;æˆ‘ä»¬å¯ä»¥æ¥çœ‹ä¸€ä¸‹è¿‡æ»¤å™¨é‡Œå¤§æ¦‚çš„æºç ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
    ...çœç•¥å…¶å®ƒä»£ç 
        
    // è¿™æ˜¯Spring Securityå°è£…çš„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡é‡ŒåŒ…å«äº†requestç­‰ä¿¡æ¯
    FilterInvocation fi = new FilterInvocation(request, response, chain);
    // è¿™é‡Œè°ƒç”¨äº†çˆ¶ç±»çš„AbstractSecurityInterceptorçš„æ–¹æ³•,è®¤è¯æ ¸å¿ƒé€»è¾‘åŸºæœ¬å…¨åœ¨çˆ¶ç±»é‡Œ
    InterceptorStatusToken token = super.beforeInvocation(fi);

    ...çœç•¥å…¶å®ƒä»£ç 
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;çˆ¶ç±»çš„&lt;code&gt;beforeInvocation&lt;/code&gt;å¤§æ¦‚æºç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;protected InterceptorStatusToken beforeInvocation(Object object) {
    ...çœç•¥å…¶å®ƒä»£ç 
    
    // è°ƒç”¨SecurityMetadataSourceæ¥è·å–å½“å‰è¯·æ±‚çš„é‰´æƒè§„åˆ™ï¼Œè¿™ä¸ªConfigAttribueå°±æ˜¯è§„åˆ™ï¼Œåé¢æˆ‘ä¼šè®²
    Collection&amp;lt;ConfigAttribute&amp;gt; attributes = this.obtainSecurityMetadataSource().getAttributes(object);
    // å¦‚æœå½“å‰è¯·æ±‚å•¥è§„åˆ™ä¹Ÿæ²¡æœ‰ï¼Œå°±ä»£è¡¨è¯¥è¯·æ±‚æ— éœ€æˆæƒå³å¯è®¿é—®ï¼Œç›´æ¥ç»“æŸæ–¹æ³•
    if (CollectionUtils.isEmpty(attributes)) {
        return null;
    }
    
    // è·å–å½“å‰ç™»å½•ç”¨æˆ·
    Authentication authenticated = authenticateIfRequired();
    // è°ƒç”¨AccessDecisionManageræ¥æ ¡éªŒå½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰è¯¥æƒé™ï¼Œæ²¡æœ‰æƒé™åˆ™æŠ›å‡ºå¼‚å¸¸
    this.accessDecisionManager.decide(authenticated, object, attributes);
    
    ...çœç•¥å…¶å®ƒä»£ç 
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è€ç”Ÿå¸¸è°ˆï¼Œæ ¸å¿ƒæµç¨‹éƒ½æ˜¯ä¸€æ ·çš„ã€‚æˆ‘ä»¬æ¥ä¸‹æ¥è‡ªå®šä¹‰è¿™äº›ç»„ä»¶ï¼Œä»¥å®Œæˆæˆ‘ä»¬è‡ªå·±çš„é‰´æƒé€»è¾‘ã€‚&lt;/p&gt;

&lt;p&gt;è¯¥æ¥å£æˆ‘ä»¬åªéœ€è¦å…³æ³¨ä¸€ä¸ªæ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public interface SecurityMetadataSource {
        /**
         * è·å–å½“å‰è¯·æ±‚çš„é‰´æƒè§„åˆ™
         
         * @param object è¯¥å‚æ•°å°±æ˜¯Spring Securityå°è£…çš„FilterInvocationå¯¹è±¡ï¼ŒåŒ…å«äº†å¾ˆå¤šrequestä¿¡æ¯
         * @return é‰´æƒè§„åˆ™å¯¹è±¡
         */
        Collection&amp;lt;ConfigAttribute&amp;gt; getAttributes(Object object);

}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;ConfigAttribute&lt;/code&gt;å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„é‰´æƒè§„åˆ™ï¼Œè¯¥æ¥å£åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public interface ConfigAttribute {
        /**
         * è¿™ä¸ªå­—ç¬¦ä¸²å°±æ˜¯è§„åˆ™ï¼Œå®ƒå¯ä»¥æ˜¯è§’è‰²åã€æƒé™åã€è¡¨è¾¾å¼ç­‰ç­‰ã€‚
         * ä½ å®Œå…¨å¯ä»¥æŒ‰ç…§è‡ªå·±æƒ³æ³•æ¥å®šä¹‰ï¼Œåé¢AccessDecisionManagerä¼šç”¨è¿™ä¸ªå­—ç¬¦ä¸²
         */
        String getAttribute();
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨ä¹‹å‰æ–‡ç« ä¸­æˆ‘ä»¬æˆæƒçš„å®ç°å…¨æ˜¯é ç€èµ„æº&lt;code&gt;id&lt;/code&gt;ï¼Œç”¨æˆ·&lt;code&gt;id&lt;/code&gt;å…³è”è§’è‰²&lt;code&gt;id&lt;/code&gt;ï¼Œè§’è‰²&lt;code&gt;id&lt;/code&gt;å…³è”èµ„æº&lt;code&gt;id&lt;/code&gt;ï¼Œè¿™æ ·ç”¨æˆ·å°±ç›¸å½“äºå…³è”äº†èµ„æºï¼Œè€Œæˆ‘ä»¬æ¥å£èµ„æºåœ¨æ•°æ®åº“ä¸­çš„ä½“ç°æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1496775/202101/1496775-20210112085028739-216486441.jpg&quot; alt=&quot;èµ„æºè¡¨.png&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œè¿˜æ˜¯ä¸€æ ·ï¼Œæˆ‘ä»¬ç…§æ ·ä»¥èµ„æº&lt;code&gt;id&lt;/code&gt;ä½œä¸ºæƒé™çš„æ ‡è®°ã€‚æ¥ä¸‹å’±ä»¬å°±æ¥è‡ªå®šä¹‰&lt;code&gt;SecurityMetadataSource&lt;/code&gt;ç»„ä»¶ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Component
public class MySecurityMetadataSource implements SecurityMetadataSource {
    /**
     * å½“å‰ç³»ç»Ÿæ‰€æœ‰æ¥å£èµ„æºå¯¹è±¡ï¼Œæ”¾åœ¨è¿™é‡Œç›¸å½“äºä¸€ä¸ªç¼“å­˜çš„åŠŸèƒ½ã€‚
     * ä½ å¯ä»¥åœ¨åº”ç”¨å¯åŠ¨æ—¶å°†è¯¥ç¼“å­˜ç»™åˆå§‹åŒ–ï¼Œä¹Ÿå¯ä»¥åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­åŠ è½½æ•°æ®ï¼Œè¿™é‡Œæˆ‘å°±ä¸å¤šå±•å¼€è¯´æ˜äº†
     */
    private static final Set&amp;lt;Resource&amp;gt; RESOURCES = new HashSet&amp;lt;&amp;gt;();

    @Override
    public Collection&amp;lt;ConfigAttribute&amp;gt; getAttributes(Object object) {
        // è¯¥å¯¹è±¡æ˜¯Spring Securityå¸®æˆ‘ä»¬å°è£…å¥½çš„ï¼Œå¯ä»¥é€šè¿‡è¯¥å¯¹è±¡è·å–requestç­‰ä¿¡æ¯
        FilterInvocation filterInvocation = (FilterInvocation) object;
        HttpServletRequest request = filterInvocation.getRequest();
        // éå†æ‰€æœ‰æƒé™èµ„æºï¼Œä»¥å’Œå½“å‰è¯·æ±‚è¿›è¡ŒåŒ¹é…
        for (Resource resource : RESOURCES) {
            // å› ä¸ºæˆ‘ä»¬urlèµ„æºæ˜¯è¿™ç§æ ¼å¼ï¼šGET:/API/user/test/{id}ï¼Œå†’å·å‰é¢æ˜¯è¯·æ±‚æ–¹æ³•ï¼Œå†’å·åé¢æ˜¯è¯·æ±‚è·¯å¾„ï¼Œæ‰€ä»¥è¦å­—ç¬¦ä¸²æ‹†åˆ†
            String[] split = resource.getPath().split(&quot;:&quot;);
            // å› ä¸º/API/user/test/{id}è¿™ç§è·¯å¾„å‚æ•°ä¸èƒ½ç›´æ¥equalsæ¥åˆ¤æ–­è¯·æ±‚è·¯å¾„æ˜¯å¦åŒ¹é…ï¼Œæ‰€ä»¥éœ€è¦ç”¨Antç±»æ¥åŒ¹é…
            AntPathRequestMatcher ant = new AntPathRequestMatcher(split[1]);
            // å¦‚æœè¯·æ±‚æ–¹æ³•å’Œè¯·æ±‚è·¯å¾„éƒ½åŒ¹é…ä¸Šäº†ï¼Œåˆ™ä»£è¡¨æ‰¾åˆ°äº†è¿™ä¸ªè¯·æ±‚æ‰€éœ€çš„æƒé™èµ„æº
            if (request.getMethod().equals(split[0]) &amp;amp;&amp;amp; ant.matches(request)) {
                // å°†æˆ‘ä»¬æƒé™èµ„æºidè¿”å›ï¼Œè¿™ä¸ªSecurityConfigå°±æ˜¯ConfigAttributeä¸€ä¸ªç®€å•å®ç°
                return Collections.singletonList(new SecurityConfig(resource.getId().toString()));
            }
        }
        // èµ°åˆ°è¿™é‡Œå°±ä»£è¡¨è¯¥è¯·æ±‚æ— éœ€æˆæƒå³å¯è®¿é—®ï¼Œè¿”å›ç©º
        return null;
    }

    @Override
    public Collection&amp;lt;ConfigAttribute&amp;gt; getAllConfigAttributes() {
        // ä¸ç”¨ç®¡ï¼Œè¿™ä¹ˆå†™å°±è¡Œ
        return null;
    }

    @Override
    public boolean supports(Class&amp;lt;?&amp;gt; clazz) {
        // ä¸ç”¨ç®¡ï¼Œè¿™ä¹ˆå†™å°±è¡Œ
        return true;
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ³¨æ„ï¼Œæˆ‘ä»¬è¿™é‡Œè¿”å›çš„&lt;code&gt;ConfigAttribute&lt;/code&gt;é‰´æƒè§„åˆ™ï¼Œå°±æ˜¯æˆ‘ä»¬çš„èµ„æº&lt;code&gt;id&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç”¨æˆ·æƒé™grantedauthority&quot;&gt;ç”¨æˆ·æƒé™GrantedAuthority&lt;/h2&gt;
&lt;p&gt;è¯¥ç»„ä»¶ä»£è¡¨ç”¨æˆ·æ‰€æ‹¥æœ‰çš„æƒé™ï¼Œå’Œ&lt;code&gt;ConfigAttribute&lt;/code&gt;ä¸€æ ·ä¹Ÿåªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›çš„å­—ç¬¦ä¸²å°±æ˜¯ä»£è¡¨ç€æƒé™&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public interface GrantedAuthority extends Serializable {
        String getAuthority();
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å°†&lt;code&gt;GrantedAuthority&lt;/code&gt;å’Œ&lt;code&gt;ConfigAttribute&lt;/code&gt;ä¸€å¯¹æ¯”ï¼Œå°±çŸ¥é“ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æŸä¸ªæƒé™äº†ã€‚&lt;/p&gt;
&lt;p&gt;Spring Securityå¯¹&lt;code&gt;GrantedAuthority&lt;/code&gt;æœ‰ä¸€ä¸ªç®€å•å®ç°&lt;code&gt;SimpleGrantedAuthority&lt;/code&gt;ï¼Œå¯¹å’±ä»¬æ¥è¯´å¤Ÿç”¨äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬é¢å¤–å†æ–°å»ºä¸€ä¸ªå®ç°ã€‚æˆ‘ä»¬è¦åšçš„å°±æ˜¯åœ¨&lt;code&gt;UserDetialsService&lt;/code&gt;ä¸­ï¼Œè·å–ç”¨æˆ·å¯¹è±¡çš„åŒæ—¶ä¹Ÿå°†æƒé™æ•°æ®æŸ¥è¯¢å‡ºæ¥ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Override
public UserDetails loadUserByUsername(String username) {
    UserEntity user = userMapper.selectByUsername(username);
    if (user == null) {
        throw new UsernameNotFoundException(&quot;æ²¡æœ‰æ‰¾åˆ°è¯¥ç”¨æˆ·&quot;);
    }
    // å…ˆå°†è¯¥ç”¨æˆ·æ‰€æ‹¥æœ‰çš„èµ„æºidå…¨éƒ¨æŸ¥è¯¢å‡ºæ¥ï¼Œå†è½¬æ¢æˆ`SimpleGrantedAuthority`æƒé™å¯¹è±¡
    Set&amp;lt;SimpleGrantedAuthority&amp;gt; authorities = resourceService.getIdsByUserId(user.getId())
        .stream()
        .map(String::valueOf)
        .map(SimpleGrantedAuthority::new)
        .collect(Collectors.toSet());
    // å°†ç”¨æˆ·å®ä½“å’Œæƒé™é›†åˆéƒ½æ”¾åˆ°UserDetailä¸­ï¼Œ
    return new UserDetail(user, authorities);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™æ ·å½“è®¤è¯å®Œæ¯•æ—¶ï¼Œ&lt;code&gt;Authentication&lt;/code&gt;å°±ä¼šæ‹¥æœ‰ç”¨æˆ·ä¿¡æ¯å’Œæƒé™æ•°æ®äº†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æˆæƒç®¡ç†accessdecisionmanager&quot;&gt;æˆæƒç®¡ç†AccessDecisionManager&lt;/h2&gt;
&lt;p&gt;ç»ˆäºè¦æ¥åˆ°æˆ‘ä»¬çœŸæ­£çš„æˆæƒç»„ä»¶äº†ï¼Œè¿™ä¸ªç»„ä»¶æ‰æœ€ç»ˆå†³å®šäº†ä½ æœ‰æ²¡æœ‰æŸä¸ªæƒé™ï¼Œè¯¥æ¥å£æˆ‘ä»¬åªéœ€å…³æ³¨ä¸€ä¸ªæ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public interface AccessDecisionManager {

        /**
         * æˆæƒæ“ä½œï¼Œå¦‚æœæ²¡æœ‰æƒé™åˆ™æŠ›å‡ºå¼‚å¸¸ 
         *
     * @param authentication å½“å‰ç™»å½•ç”¨æˆ·ï¼Œä»¥è·å–å½“å‰ç”¨æˆ·æƒé™ä¿¡æ¯
         * @param object FilterInvocationå¯¹è±¡ï¼Œä»¥è·å–requestä¿¡æ¯
         * @param configAttributes å½“å‰è¯·æ±‚é‰´æƒè§„åˆ™
         */
        void decide(Authentication authentication, Object object, Collection&amp;lt;ConfigAttribute&amp;gt; configAttributes)
                        throws AccessDeniedException, InsufficientAuthenticationException;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¯¥æ–¹æ³•æ¥å—äº†è¿™å‡ ä¸ªå‚æ•°åå®Œå…¨èƒ½åšåˆ°æƒé™æ ¡éªŒäº†ï¼Œæˆ‘ä»¬æ¥å®ç°è‡ªå·±çš„é€»è¾‘ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Component
public class MyDecisionManager implements AccessDecisionManager {
    @Override
    public void decide(Authentication authentication, Object object, Collection&amp;lt;ConfigAttribute&amp;gt; configAttributes) {
        // å¦‚æœæˆæƒè§„åˆ™ä¸ºç©ºåˆ™ä»£è¡¨æ­¤URLæ— éœ€æˆæƒå°±èƒ½è®¿é—®
        if (Collections.isEmpty(configAttributes)) {
            return;
        }
        // åˆ¤æ–­æˆæƒè§„åˆ™å’Œå½“å‰ç”¨æˆ·æ‰€å±æƒé™æ˜¯å¦åŒ¹é…
        for (ConfigAttribute ca : configAttributes) {
            for (GrantedAuthority authority : authentication.getAuthorities()) {
                // å¦‚æœåŒ¹é…ä¸Šäº†ï¼Œä»£è¡¨å½“å‰ç™»å½•ç”¨æˆ·æ˜¯æœ‰è¯¥æƒé™çš„ï¼Œç›´æ¥ç»“æŸæ–¹æ³•
                if (Objects.equals(authority.getAuthority(), ca.getAttribute())) {
                    return;
                }
            }
        }
        // èµ°åˆ°è¿™é‡Œå°±ä»£è¡¨æ²¡æœ‰æƒé™ï¼Œå¿…é¡»è¦æŠ›å‡ºå¼‚å¸¸ï¼Œå¦åˆ™é”™è¯¯å¤„ç†å™¨æ•æ‰ä¸åˆ°
        throw new AccessDeniedException(&quot;æ²¡æœ‰ç›¸å…³æƒé™&quot;);
    }

    @Override
    public boolean supports(ConfigAttribute attribute) {
        // ä¸ç”¨ç®¡ï¼Œè¿™ä¹ˆå†™å°±è¡Œ
        return true;
    }

    @Override
    public boolean supports(Class&amp;lt;?&amp;gt; clazz) {
        // ä¸ç”¨ç®¡ï¼Œè¿™ä¹ˆå†™å°±è¡Œ
        return true;
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;æˆæƒé”™è¯¯å¤„ç†å™¨accessdeniedhandler&quot;&gt;æˆæƒé”™è¯¯å¤„ç†å™¨AccessDeniedHandler&lt;/h2&gt;
&lt;p&gt;è¯¥ç»„ä»¶å’Œä¹‹å‰çš„è®¤è¯å¼‚å¸¸å¤„ç†å™¨ä¸€æ ·ï¼Œåªæœ‰ä¸€ä¸ªæ–¹æ³•ç”¨æ¥å¤„ç†å¼‚å¸¸ï¼Œåªä¸è¿‡è¿™ä¸ªæ˜¯ç”¨æ¥å¤„ç†æˆæƒå¼‚å¸¸çš„ã€‚æˆ‘ä»¬ç›´æ¥æ¥å®ç°ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class MyDeniedHandler implements AccessDeniedHandler {
    @Override
    public void handle(HttpServletRequest request, HttpServletResponse response, AccessDeniedException accessDeniedException) throws IOException, ServletException {
        response.setContentType(&quot;application/json;charset=utf-8&quot;);
        out.write(&quot;æ²¡æœ‰ç›¸å…³æƒé™&quot;);
        out.flush();
        out.close();
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;é…ç½®-1&quot;&gt;é…ç½®&lt;/h2&gt;
&lt;p&gt;ç»„ä»¶éƒ½å®šä¹‰å¥½äº†ï¼Œé‚£æˆ‘ä»¬æ¥ä¸‹æ¥å°±æ˜¯æœ€åä¸€æ­¥å’¯ï¼Œå°±æ˜¯è®©è¿™äº›ç»„ä»¶ç”Ÿæ•ˆã€‚æˆ‘ä»¬çš„é‰´æƒè§„åˆ™æºç»„ä»¶&lt;code&gt;SecurityMetadataSource&lt;/code&gt;å’Œæˆæƒç®¡ç†ç»„ä»¶&lt;code&gt;AccessDecisionManager&lt;/code&gt;å¿…é¡»é€šè¿‡æˆæƒè¿‡æ»¤å™¨&lt;code&gt;FilterSecurityInterceptor&lt;/code&gt;æ¥é…ç½®ç”Ÿæ•ˆï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—è‡ªå·±å…ˆå†™ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œè¿™ä¸ªè¿‡æ»¤å™¨çš„æ ¸å¿ƒä»£ç åŸºæœ¬æŒ‰ç…§çˆ¶ç±»çš„å†™å°±è¡Œï¼Œä¸»è¦å°±æ˜¯å±æ€§çš„é…ç½®ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Component
public class AuthFilter extends AbstractSecurityInterceptor implements Filter {
    @Autowired
    private SecurityMetadataSource securityMetadataSource;

    @Override
    public SecurityMetadataSource obtainSecurityMetadataSource() {
        // å°†æˆ‘ä»¬è‡ªå®šä¹‰çš„SecurityMetadataSourceç»™è¿”å›
        return this.securityMetadataSource;
    }

    @Override
    @Autowired
    public void setAccessDecisionManager(AccessDecisionManager accessDecisionManager) {
        // å°†æˆ‘ä»¬è‡ªå®šä¹‰çš„AccessDecisionManagerç»™æ³¨å…¥
        super.setAccessDecisionManager(accessDecisionManager);
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        // ä¸‹é¢çš„å°±æ˜¯æŒ‰ç…§çˆ¶ç±»å†™æ³•å†™çš„
        FilterInvocation fi = new FilterInvocation(request, response, chain);
        InterceptorStatusToken token = super.beforeInvocation(fi);
        try {
            // æ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨
            fi.getChain().doFilter(fi.getRequest(), fi.getResponse());
        }  finally {
            // è¯·æ±‚ä¹‹åçš„å¤„ç†
            super.afterInvocation(token, null);
        }
    }

    @Override
    public Class&amp;lt;?&amp;gt; getSecureObjectClass() {
        return FilterInvocation.class;
    }

    @Override
    public void init(FilterConfig filterConfig) {}

    @Override
    public void destroy() {}
}

&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿‡æ»¤å™¨å®šä¹‰å¥½äº†ï¼Œæˆ‘ä»¬å›åˆ°Spring Securityé…ç½®ç±»è®©è¿™ä¸ªè¿‡æ»¤å™¨æ›¿æ¢æ‰åŸæœ‰çš„è¿‡æ»¤å™¨å°±ä¸€åˆ‡éƒ½æå®šå•¦ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;http.addFilterBefore(authFilter, FilterSecurityInterceptor.class);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥æ¥çœ‹ä¸‹æ•ˆæœï¼Œæ²¡æœ‰æƒé™çš„æƒ…å†µä¸‹è®¿é—®æ¥å£ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/news/1496775/202101/1496775-20210112085029661-1860709031.jpg&quot; alt=&quot;æˆæƒå¤±è´¥.png&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æœ‰æƒé™çš„æƒ…å†µä¸‹è®¿é—®æ¥å£ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1496775/202101/1496775-20210112085029885-1288238309.jpg&quot; alt=&quot;æˆæƒé€šè¿‡.png&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;

&lt;p&gt;æ•´ä¸ªSpring Securityå°±è®²è§£å®Œæ¯•äº†ï¼Œæˆ‘ä»¬å¯¹ä¸¤ä¸ªè¿‡æ»¤å™¨ã€Nå¤šä¸ªç»„ä»¶è¿›è¡Œäº†è‡ªå®šä¹‰å®ç°ï¼Œä»è€Œè¾¾åˆ°äº†æˆ‘ä»¬çš„åŠŸèƒ½ã€‚è¿™é‡Œåšäº†ä¸€ä¸ªæ€ç»´å¯¼å›¾æ–¹ä¾¿å¤§å®¶ç†è§£ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1496775/202101/1496775-20210112085030502-869377035.jpg&quot; alt=&quot;æ€ç»´å¯¼å›¾.png&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;åˆ«çœ‹ç»„ä»¶è¿™ä¹ˆå¤šï¼Œè®¤è¯æˆæƒçš„æ ¸å¿ƒæµç¨‹å’Œä¸€äº›æ¦‚å¿µæ˜¯ä¸ä¼šå˜çš„ï¼Œä»€ä¹ˆå®‰å…¨æ¡†æ¶éƒ½ä¸‡å˜ä¸ç¦»å…¶å®—ã€‚æ¯”å¦‚&lt;code&gt;Shiro&lt;/code&gt;ï¼Œå…¶ä¸­æœ€åŸºæœ¬çš„æ¦‚å¿µ&lt;code&gt;Subject&lt;/code&gt;å°±ä»£è¡¨å½“å‰ç”¨æˆ·ï¼Œ&lt;code&gt;SubjectManager&lt;/code&gt;å°±æ˜¯ç”¨æˆ·ç®¡ç†å™¨â€¦â€¦&lt;/p&gt;
&lt;p&gt;åœ¨æˆ‘å‰ä¸¤ç¯‡æ–‡ç« ä¸­æœ‰äººä¹Ÿè°ˆåˆ°ç”¨å®‰å…¨æ¡†æ¶è¿˜ä¸å¦‚è‡ªå·±æ‰‹å†™ï¼Œç¡®å®ï¼Œæ‰‹å†™å¯ä»¥æœ€å¤§çµæ´»åº¦æŒ‰ç…§è‡ªå·±çš„æƒ³æ³•æ¥ï¼ˆå¹¶ä¸”ä¹Ÿä¸å¤æ‚ï¼‰ï¼Œä½¿ç”¨å®‰å…¨æ¡†æ¶åè€Œè¦é…åˆæ¡†æ¶çš„å®šå¼ï¼Œå¥½åƒè¢«æŸç¼šäº†ã€‚é‚£å®‰å…¨æ¡†æ¶å¯¹æ¯”æ‰‹å†™æœ‰ä»€ä¹ˆä¼˜åŠ¿å‘¢ï¼Ÿæˆ‘è§‰å¾—ä¼˜åŠ¿ä¸»è¦æœ‰å¦‚ä¸‹ä¸¤ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;ä¸€äº›åŠŸèƒ½å¼€ç®±å³ç”¨ï¼Œæ¯”å¦‚Spring Securityçš„åŠ å¯†å™¨ï¼Œéå¸¸æ–¹ä¾¿&lt;/li&gt;
&lt;li&gt;æ¡†æ¶çš„å®šå¼æ—¢æ˜¯æŸç¼šä¹Ÿæ˜¯è§„èŒƒï¼Œæ— è®ºè°æ¥æ‰‹ä½ çš„é¡¹ç›®ï¼Œä¸€çœ‹åˆ°ç†Ÿæ‚‰çš„å®‰å…¨æ¡†æ¶å°±èƒ½ç«‹é©¬ä¸Šæ‰‹&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;è®²è§£åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œæœ¬æ–‡æ‰€æœ‰ä»£ç ã€&lt;code&gt;SQL&lt;/code&gt;è¯­å¥éƒ½æ”¾åœ¨&lt;a href=&quot;https://github.com/RudeCrab/rude-java&quot; target=&quot;_blank&quot;&gt;Github&lt;/a&gt;ï¼Œå…‹éš†ä¸‹æ¥å³å¯è¿è¡Œã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1496775/202101/1496775-20210108125800650-1747993399.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 12 Jan 2021 00:53:00 +0000</pubDate>
<dc:creator>RudeCrab</dc:creator>
<og:description>å‰åç«¯åˆ†ç¦»ä¸‹çš„è®¤è¯ä¸æˆæƒ</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/RudeCrab/p/14265273.html</dc:identifier>
</item>
<item>
<title>åŸºäºCefSharpå¼€å‘ï¼ˆä¸ƒï¼‰æµè§ˆå™¨æ”¶è—å¤¹èœå• - å’¸é±¼ç¿»èº«ï¼Ÿ</title>
<link>http://www.cnblogs.com/mchao/p/14237923.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/mchao/p/14237923.html</guid>
<description>&lt;h2&gt;ä¸€ã€Edgeæ”¶è—å¤¹èœå•åˆ†æ&lt;/h2&gt;
&lt;p&gt;å¦‚ä¸‹å›¾æ‰€ç¤ºä¸ºEdgeæ”¶è—å¤¹èœå•ï¼Œ ç‚¹å‡»æ”¶è—å¤¹èœå•æŒ‰é’®ï¼ˆçº¢æ¡†éƒ¨åˆ†ï¼‰å¼¹å‡ºæ”¶è—å¤¹èœå•çª—ä½“ï¼Œçª—ä½“ä¸­åŒ…å«å·¥å…·æ ï¼ˆç»¿æ¡†éƒ¨åˆ†ï¼‰å’Œæ ‘å‹èœå•ï¼ˆé»„æ¡†éƒ¨åˆ†ï¼‰&lt;/p&gt;
&lt;p&gt;å·¥å…·æ æŒ‰é’®åŠŸèƒ½åˆ†åˆ«ä¸ºæ·»åŠ å½“å‰ç½‘é¡µåˆ°æ ¹èŠ‚ç‚¹ã€åˆ›å»ºæ–°æ–‡ä»¶å¤¹åˆ°æ ¹èŠ‚ç‚¹ã€æœç´¢æ”¶è—å¤¹å†…å®¹ã€å•ä¸­å•ï¼ˆæ”¶è—å¤¹èœå•ä¸­çš„å…¶ä»–åŠŸèƒ½ï¼‰ã€æ”¶è—å¤¹èœå•å›ºå®šåˆ°å³ä¾§&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/814381/202101/814381-20210105202920151-519873135.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;åœ¨æ ‘èŠ‚ç‚¹ä¸Šå³é”®ï¼Œæœ‰å¦‚ä¸‹å³é”®èœå•åŠŸèƒ½&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/814381/202101/814381-20210105204415620-1878023320.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â è¦å®Œæˆæ­¤åŠŸèƒ½ï¼Œéœ€å…ˆä»¿å…¶å½¢ï¼Œå†è°‹å…¶ç¥ã€‚&lt;/p&gt;
&lt;h2&gt;äºŒã€ä»¿å…¶å½¢&lt;/h2&gt;
&lt;p&gt;è¿™é‡Œæ‰€è°“çš„ä»¿å…¶å½¢ï¼Œå³æ¨¡ä»¿å®ƒçš„æ ·å¼ï¼ˆStyleï¼‰&lt;/p&gt;
&lt;h3&gt;1ã€åˆ›å»ºæ”¶è—å¤¹èœå•UserControl&lt;/h3&gt;
&lt;p&gt;åˆ›å»ºFavoritesMenuUcï¼ŒGridå†…å®¹å¦‚ä¸‹ï¼šToggleButtonæ§åˆ¶èœå•æ˜¾éšï¼ŒPopupå±•ç¤ºå¼¹å‡ºèœå•ï¼Œ&lt;/p&gt;
&lt;p&gt;StackPanel ä¸­æ·»åŠ äº”ä¸ªæŒ‰é’®ç”¨äºå®ç°å·¥å…·æ ä¸­çš„åŠŸèƒ½ï¼ŒMTreeViewç”¨äºå®ç°æ ‘å‹èœå•&lt;/p&gt;
&lt;p&gt;å…³äºMTreeViewçš„å®ç°è¯·å‚ç…§Â &lt;a id=&quot;cb_post_title_url&quot; class=&quot;postTitle2 vertical-middle&quot; href=&quot;https://www.cnblogs.com/mchao/p/14192196.html&quot;&gt;Cys_Controlï¼ˆå…­ï¼‰ MTreeView&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;45&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;Grid&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;ToggleButton &lt;/span&gt;&lt;span&gt;x:Name&lt;/span&gt;&lt;span&gt;=&quot;FavoritesButton&quot;&lt;/span&gt;&lt;span&gt; Style&lt;/span&gt;&lt;span&gt;=&quot;&lt;/span&gt;&lt;span&gt;{DynamicResource ToggleButton.FontButton}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; Checked&lt;/span&gt;&lt;span&gt;=&quot;FavoritesButton_OnChecked&quot;&lt;/span&gt;&lt;span&gt;
                      Unchecked&lt;/span&gt;&lt;span&gt;=&quot;FavoritesButton_OnUnchecked&quot;&lt;/span&gt;&lt;span&gt; Content&lt;/span&gt;&lt;span&gt;=&quot;&amp;amp;#xe646;&quot;&lt;/span&gt;&lt;span&gt; FontSize&lt;/span&gt;&lt;span&gt;=&quot;26&quot;&lt;/span&gt;&lt;span&gt; Background&lt;/span&gt;&lt;span&gt;=&quot;Transparent&quot;&lt;/span&gt;&lt;span&gt; IsChecked&lt;/span&gt;&lt;span&gt;=&quot;&lt;/span&gt;&lt;span&gt;{Binding ElementName=FavoritesPop,Path=IsOpen}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;Popup &lt;/span&gt;&lt;span&gt;x:Name&lt;/span&gt;&lt;span&gt;=&quot;FavoritesPop&quot;&lt;/span&gt;&lt;span&gt; PopupAnimation&lt;/span&gt;&lt;span&gt;=&quot;Fade&quot;&lt;/span&gt;&lt;span&gt; Placement&lt;/span&gt;&lt;span&gt;=&quot;Bottom&quot;&lt;/span&gt;&lt;span&gt;  PlacementTarget&lt;/span&gt;&lt;span&gt;=&quot;&lt;/span&gt;&lt;span&gt;{Binding ElementName=FavoritesButton}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
               StaysOpen&lt;/span&gt;&lt;span&gt;=&quot;False&quot;&lt;/span&gt;&lt;span&gt; AllowsTransparency&lt;/span&gt;&lt;span&gt;=&quot;True&quot;&lt;/span&gt;&lt;span&gt; HorizontalOffset&lt;/span&gt;&lt;span&gt;=&quot;-330&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;Border &lt;/span&gt;&lt;span&gt;Background&lt;/span&gt;&lt;span&gt;=&quot;&lt;/span&gt;&lt;span&gt;{DynamicResource WebBrowserBrushes.WebMenuBackground}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; CornerRadius&lt;/span&gt;&lt;span&gt;=&quot;5&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;Border.Effect&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;DropShadowEffect &lt;/span&gt;&lt;span&gt;Color&lt;/span&gt;&lt;span&gt;=&quot;&lt;/span&gt;&lt;span&gt;{DynamicResource Color.MenuItemDropShadowBrush}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; Opacity&lt;/span&gt;&lt;span&gt;=&quot;0.3&quot;&lt;/span&gt;&lt;span&gt; ShadowDepth&lt;/span&gt;&lt;span&gt;=&quot;3&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;Border.Effect&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;Grid &lt;/span&gt;&lt;span&gt;Width&lt;/span&gt;&lt;span&gt;=&quot;360&quot;&lt;/span&gt;&lt;span&gt; Height&lt;/span&gt;&lt;span&gt;=&quot;660&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;Grid.RowDefinitions&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;RowDefinition &lt;/span&gt;&lt;span&gt;Height&lt;/span&gt;&lt;span&gt;=&quot;Auto&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;RowDefinition &lt;/span&gt;&lt;span&gt;Height&lt;/span&gt;&lt;span&gt;=&quot;1&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;RowDefinition &lt;/span&gt;&lt;span&gt;Height&lt;/span&gt;&lt;span&gt;=&quot;*&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;Grid.RowDefinitions&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;Grid &lt;/span&gt;&lt;span&gt;Grid.Row&lt;/span&gt;&lt;span&gt;=&quot;0&quot;&lt;/span&gt;&lt;span&gt; Height&lt;/span&gt;&lt;span&gt;=&quot;40&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;Grid.ColumnDefinitions&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;ColumnDefinition &lt;/span&gt;&lt;span&gt;Width&lt;/span&gt;&lt;span&gt;=&quot;Auto&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;ColumnDefinition &lt;/span&gt;&lt;span&gt;Width&lt;/span&gt;&lt;span&gt;=&quot;*&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;ColumnDefinition &lt;/span&gt;&lt;span&gt;Width&lt;/span&gt;&lt;span&gt;=&quot;Auto&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;Grid.ColumnDefinitions&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;TextBlock &lt;/span&gt;&lt;span&gt;Grid.Column&lt;/span&gt;&lt;span&gt;=&quot;0&quot;&lt;/span&gt;&lt;span&gt; Text&lt;/span&gt;&lt;span&gt;=&quot;æ”¶è—å¤¹æ &quot;&lt;/span&gt;&lt;span&gt; VerticalAlignment&lt;/span&gt;&lt;span&gt;=&quot;Center&quot;&lt;/span&gt;&lt;span&gt; FontSize&lt;/span&gt;&lt;span&gt;=&quot;18&quot;&lt;/span&gt;&lt;span&gt; Margin&lt;/span&gt;&lt;span&gt;=&quot;10,0,0,0&quot;&lt;/span&gt;&lt;span&gt; Foreground&lt;/span&gt;&lt;span&gt;=&quot;&lt;/span&gt;&lt;span&gt;{DynamicResource WebBrowserBrushes.DefaultForeground}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;StackPanel &lt;/span&gt;&lt;span&gt;Grid.Column&lt;/span&gt;&lt;span&gt;=&quot;2&quot;&lt;/span&gt;&lt;span&gt; Orientation&lt;/span&gt;&lt;span&gt;=&quot;Horizontal&quot;&lt;/span&gt;&lt;span&gt; Margin&lt;/span&gt;&lt;span&gt;=&quot;0,0,10,0&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;Button &lt;/span&gt;&lt;span&gt;Style&lt;/span&gt;&lt;span&gt;=&quot;&lt;/span&gt;&lt;span&gt;{DynamicResource Button.FontButton}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; Content&lt;/span&gt;&lt;span&gt;=&quot;&amp;amp;#xe659;&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;Button &lt;/span&gt;&lt;span&gt;Style&lt;/span&gt;&lt;span&gt;=&quot;&lt;/span&gt;&lt;span&gt;{DynamicResource Button.FontButton}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; Content&lt;/span&gt;&lt;span&gt;=&quot;&amp;amp;#xe652;&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;Button &lt;/span&gt;&lt;span&gt;Style&lt;/span&gt;&lt;span&gt;=&quot;&lt;/span&gt;&lt;span&gt;{DynamicResource Button.FontButton}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; Content&lt;/span&gt;&lt;span&gt;=&quot;&amp;amp;#xe65c;&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;Button &lt;/span&gt;&lt;span&gt;Style&lt;/span&gt;&lt;span&gt;=&quot;&lt;/span&gt;&lt;span&gt;{DynamicResource Button.FontButton}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; Content&lt;/span&gt;&lt;span&gt;=&quot;...&quot;&lt;/span&gt;&lt;span&gt; Padding&lt;/span&gt;&lt;span&gt;=&quot;0,0,0,12&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;Button &lt;/span&gt;&lt;span&gt;Style&lt;/span&gt;&lt;span&gt;=&quot;&lt;/span&gt;&lt;span&gt;{DynamicResource Button.FontButton}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; Content&lt;/span&gt;&lt;span&gt;=&quot;&amp;amp;#xe6b9;&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;StackPanel&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;Grid&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;Rectangle &lt;/span&gt;&lt;span&gt;Grid.Row&lt;/span&gt;&lt;span&gt;=&quot;1&quot;&lt;/span&gt;&lt;span&gt; Height&lt;/span&gt;&lt;span&gt;=&quot;1&quot;&lt;/span&gt;&lt;span&gt; Fill&lt;/span&gt;&lt;span&gt;=&quot;&lt;/span&gt;&lt;span&gt;{DynamicResource WebBrowserBrushes.WebMenuDivideLine}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;controls:MTreeView &lt;/span&gt;&lt;span&gt;Grid.Row&lt;/span&gt;&lt;span&gt;=&quot;2&quot;&lt;/span&gt;&lt;span&gt; x:Name&lt;/span&gt;&lt;span&gt;=&quot;FavoritesTree&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;Grid&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;Border&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;Popup&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;Grid&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ–°å»ºç±»TreeNodeç”¨äºæ˜¾ç¤ºTreeViewæ˜¾ç¤º&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; TreeNode
{
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; NodeId { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; ParentId { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;string&lt;/span&gt; NodeName { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;string&lt;/span&gt; Url { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;; } = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;http://www.baidu.com&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; List&amp;lt;TreeNode&amp;gt; ChildNodes { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;; } = &lt;span&gt;new&lt;/span&gt; List&amp;lt;TreeNode&amp;gt;&lt;span&gt;();
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; Type { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;; } &lt;span&gt;//&lt;/span&gt;&lt;span&gt;0-æ–‡ä»¶ï¼Œ1-æ–‡ä»¶å¤¹&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;FavoritesMenuUc.xaml.csæ–‡ä»¶ä¸­å¢åŠ æµ‹è¯•æ•°æ®&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;74&quot;&gt;
&lt;pre&gt;
&lt;span&gt;private&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; GetFavoritesInfo()
{
    nodes &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; List&amp;lt;TreeNode&amp;gt;&lt;span&gt;()
            {
                &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; TreeNode(){ParentId=-&lt;span&gt;1&lt;/span&gt;, NodeId=&lt;span&gt;0&lt;/span&gt;, NodeName = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;æ”¶è—å¤¹&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,Type = &lt;span&gt;1&lt;/span&gt;&lt;span&gt;},
                &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; TreeNode(){ParentId=&lt;span&gt;0&lt;/span&gt;, NodeId=&lt;span&gt;1&lt;/span&gt;, NodeName = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;æ–‡æœ¬&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,Type = &lt;span&gt;1&lt;/span&gt;&lt;span&gt;},
                &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; TreeNode(){ParentId=&lt;span&gt;0&lt;/span&gt;, NodeId=&lt;span&gt;2&lt;/span&gt;, NodeName = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;éŸ³é¢‘&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,Type = &lt;span&gt;1&lt;/span&gt;&lt;span&gt;},
                &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; TreeNode(){ParentId=&lt;span&gt;0&lt;/span&gt;, NodeId=&lt;span&gt;3&lt;/span&gt;, NodeName = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;è§†é¢‘&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,Type = &lt;span&gt;1&lt;/span&gt;&lt;span&gt;},

                &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; TreeNode(){ParentId=&lt;span&gt;1&lt;/span&gt;, NodeId=&lt;span&gt;11&lt;/span&gt;, NodeName = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;æ–‡æœ¬1&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,Type = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;},
                &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; TreeNode(){ParentId=&lt;span&gt;1&lt;/span&gt;, NodeId=&lt;span&gt;12&lt;/span&gt;, NodeName = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;æ–‡æœ¬2&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,Type = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;},
                &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; TreeNode(){ParentId=&lt;span&gt;1&lt;/span&gt;, NodeId=&lt;span&gt;13&lt;/span&gt;, NodeName = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;æ–‡æœ¬3&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,Type = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;},
            };
    List&lt;/span&gt;&amp;lt;TreeNode&amp;gt; root = GetNodes(-&lt;span&gt;1&lt;/span&gt;&lt;span&gt;, nodes);
    AddTreeViewItems(&lt;/span&gt;&lt;span&gt;null&lt;/span&gt;, root[&lt;span&gt;0&lt;/span&gt;], &lt;span&gt;true&lt;/span&gt;&lt;span&gt;);
}

&lt;/span&gt;&lt;span&gt;private&lt;/span&gt; List&amp;lt;TreeNode&amp;gt; GetNodes(&lt;span&gt;int&lt;/span&gt; parentId, List&amp;lt;TreeNode&amp;gt;&lt;span&gt; nodes)
{
    List&lt;/span&gt;&amp;lt;TreeNode&amp;gt; mainNodes = nodes.Where(x =&amp;gt; x.ParentId == parentId).OrderByDescending(x =&amp;gt;&lt;span&gt; x.Type).ToList();
    List&lt;/span&gt;&amp;lt;TreeNode&amp;gt; otherNodes = nodes.Where(x =&amp;gt; x.ParentId != parentId).OrderByDescending(x =&amp;gt;&lt;span&gt; x.Type).ToList();
    &lt;/span&gt;&lt;span&gt;foreach&lt;/span&gt; (TreeNode node &lt;span&gt;in&lt;/span&gt;&lt;span&gt; mainNodes)
        node.ChildNodes &lt;/span&gt;=&lt;span&gt; GetNodes(node.NodeId, otherNodes);
    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; mainNodes;
}

&lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; AddTreeViewItems(MTreeViewItem parent, TreeNode treeNode, &lt;span&gt;bool&lt;/span&gt;&lt;span&gt; isRoot)
{
    &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; treeViewItem = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; MTreeViewItem();
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (treeNode.ChildNodes.Count &amp;lt;= &lt;span&gt;0&lt;/span&gt;&lt;span&gt;)
    {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (treeNode.Type == &lt;span&gt;0&lt;/span&gt;&lt;span&gt;)
        {
            treeViewItem.Header &lt;/span&gt;=&lt;span&gt; treeNode.Url;
            treeViewItem.Icon &lt;/span&gt;= &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\ueb1e&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
            treeViewItem.IsExpandedIcon &lt;/span&gt;= &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\ueb1e&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
            treeViewItem.IconForeground &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; SolidColorBrush(Color.FromRgb(&lt;span&gt;255&lt;/span&gt;, &lt;span&gt;255&lt;/span&gt;, &lt;span&gt;255&lt;/span&gt;&lt;span&gt;));
        }
        &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;
        {
            treeViewItem.Header &lt;/span&gt;=&lt;span&gt; treeNode.NodeName;
        }
    }
    &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;
    {
        treeViewItem.Header &lt;/span&gt;=&lt;span&gt; treeNode.NodeName;
        &lt;/span&gt;&lt;span&gt;foreach&lt;/span&gt; (&lt;span&gt;var&lt;/span&gt; child &lt;span&gt;in&lt;/span&gt;&lt;span&gt; treeNode.ChildNodes)
        {
            AddTreeViewItems(treeViewItem, child, &lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;span&gt;);
        }
    }
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;isRoot)
        parent.Items.Add(treeViewItem);
    &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;
    {
        FavoritesTree.Items.Add(treeViewItem);
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/814381/202101/814381-20210106090342395-405124628.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3&gt;2ã€ä¸ºMTreeViewæ·»åŠ å³é”®èœå•&lt;/h3&gt;
&lt;p&gt;å³é”®å­èœå•å¯ä½¿ç”¨MMneuItemï¼Œxamlæ ·å¼å¦‚ä¸‹&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;controls:MTreeView &lt;/span&gt;&lt;span&gt;Grid.Row&lt;/span&gt;&lt;span&gt;=&quot;2&quot;&lt;/span&gt;&lt;span&gt; x:Name&lt;/span&gt;&lt;span&gt;=&quot;FavoritesTree&quot;&lt;/span&gt;&lt;span&gt; ContextMenuOpening&lt;/span&gt;&lt;span&gt;=&quot;FavoritesTree_OnContextMenuOpening&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;controls:MTreeView.ContextMenu&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;ContextMenu &lt;/span&gt;&lt;span&gt;x:Name&lt;/span&gt;&lt;span&gt;=&quot;FavoritesContextMenu&quot;&lt;/span&gt;&lt;span&gt; Style&lt;/span&gt;&lt;span&gt;=&quot;&lt;/span&gt;&lt;span&gt;{DynamicResource WebCustomMenus.DefaultContextMenu}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;controls:MMenuItem &lt;/span&gt;&lt;span&gt;Tag&lt;/span&gt;&lt;span&gt;=&quot;0&quot;&lt;/span&gt;&lt;span&gt; Header&lt;/span&gt;&lt;span&gt;=&quot;å…¨éƒ¨æ‰“å¼€ï¼ˆ16ä¸ªï¼‰&quot;&lt;/span&gt;&lt;span&gt; Icon&lt;/span&gt;&lt;span&gt;=&quot;&amp;amp;#xe600;&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;controls:MMenuItem &lt;/span&gt;&lt;span&gt;Tag&lt;/span&gt;&lt;span&gt;=&quot;1&quot;&lt;/span&gt;&lt;span&gt; Header&lt;/span&gt;&lt;span&gt;=&quot;åœ¨æ–°å»ºçª—å£ä¸­å…¨éƒ¨æ‰“å¼€ï¼ˆ16ä¸ªï¼‰&quot;&lt;/span&gt;&lt;span&gt; Icon&lt;/span&gt;&lt;span&gt;=&quot;&amp;amp;#xe602;&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;controls:MMenuItem &lt;/span&gt;&lt;span&gt;Tag&lt;/span&gt;&lt;span&gt;=&quot;2&quot;&lt;/span&gt;&lt;span&gt; Header&lt;/span&gt;&lt;span&gt;=&quot;åœ¨æ–° InPrivateçª—å£å…¨éƒ¨æ‰“å¼€ï¼ˆ16ä¸ªï¼‰&quot;&lt;/span&gt;&lt;span&gt; Icon&lt;/span&gt;&lt;span&gt;=&quot;&amp;amp;#xe68c;&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;controls:MMenuItem &lt;/span&gt;&lt;span&gt;Tag&lt;/span&gt;&lt;span&gt;=&quot;4&quot;&lt;/span&gt;&lt;span&gt; Header&lt;/span&gt;&lt;span&gt;=&quot;æŒ‰åç§°æ’åº&quot;&lt;/span&gt;&lt;span&gt; Icon&lt;/span&gt;&lt;span&gt;=&quot;&amp;amp;#xe606;&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;controls:MMenuItem &lt;/span&gt;&lt;span&gt;Tag&lt;/span&gt;&lt;span&gt;=&quot;5&quot;&lt;/span&gt;&lt;span&gt; Header&lt;/span&gt;&lt;span&gt;=&quot;é‡å‘½å&quot;&lt;/span&gt;&lt;span&gt; Icon&lt;/span&gt;&lt;span&gt;=&quot;&amp;amp;#xe712;&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;controls:MMenuItem &lt;/span&gt;&lt;span&gt;Tag&lt;/span&gt;&lt;span&gt;=&quot;5&quot;&lt;/span&gt;&lt;span&gt; Header&lt;/span&gt;&lt;span&gt;=&quot;åˆ é™¤&quot;&lt;/span&gt;&lt;span&gt; Icon&lt;/span&gt;&lt;span&gt;=&quot;&amp;amp;#xe74e;&quot;&lt;/span&gt;&lt;span&gt; IconFontSize&lt;/span&gt;&lt;span&gt;=&quot;26&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;controls:MMenuItem &lt;/span&gt;&lt;span&gt;Tag&lt;/span&gt;&lt;span&gt;=&quot;5&quot;&lt;/span&gt;&lt;span&gt; Header&lt;/span&gt;&lt;span&gt;=&quot;å°†å½“å‰æ ‡ç­¾é¡µæ·»åŠ åˆ°æ–‡ä»¶å¤¹&quot;&lt;/span&gt;&lt;span&gt; Icon&lt;/span&gt;&lt;span&gt;=&quot;&amp;amp;#xe659;&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;controls:MMenuItem &lt;/span&gt;&lt;span&gt;Tag&lt;/span&gt;&lt;span&gt;=&quot;5&quot;&lt;/span&gt;&lt;span&gt; Header&lt;/span&gt;&lt;span&gt;=&quot;å°†æ‰€æœ‰æ ‡ç­¾é¡µæ·»åŠ åˆ°æ–‡ä»¶å¤¹&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;controls:MMenuItem &lt;/span&gt;&lt;span&gt;Tag&lt;/span&gt;&lt;span&gt;=&quot;5&quot;&lt;/span&gt;&lt;span&gt; Header&lt;/span&gt;&lt;span&gt;=&quot;æ·»åŠ æ–‡ä»¶å¤¹&quot;&lt;/span&gt;&lt;span&gt; Icon&lt;/span&gt;&lt;span&gt;=&quot;&amp;amp;#xe652;&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;ContextMenu&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;controls:MTreeView.ContextMenu&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;controls:MTreeView&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å½“å³é”®æœªé€‰ä¸­æ—¶å¢åŠ å±è”½å³é”®èœå•&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;private&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; FavoritesTree_OnContextMenuOpening(&lt;span&gt;object&lt;/span&gt;&lt;span&gt; sender, ContextMenuEventArgs e)
{
    _currentRightItem &lt;/span&gt;= ControlHelper.FindVisualParent&amp;lt;MTreeViewItem&amp;gt;(e.OriginalSource &lt;span&gt;as&lt;/span&gt;&lt;span&gt; DependencyObject);
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (&lt;span&gt;null&lt;/span&gt; ==&lt;span&gt; _currentRightItem)
    {
        e.Handled &lt;/span&gt;= &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/814381/202101/814381-20210106112443594-722098523.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2&gt;ä¸‰ã€è°‹å…¶ç¥&lt;/h2&gt;
&lt;p&gt;è¿™é‡Œçš„è°‹å…¶ç¥ï¼Œå°±æ˜¯ä½¿å…¶å¯ä»¥å®Œæˆæ­£å¸¸çš„ä¸šåŠ¡å¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;å‰é¢ä»¿é€ äº†Edgeæµè§ˆå™¨çš„å¤§è‡´æ ·å¼ï¼Œæ¥ä¸‹æ¥è¦å¯¹åŠå¢åŠ æ•°æ®å­˜å‚¨ã€å‘½ä»¤å¤„ç†ç­‰&lt;/p&gt;
&lt;h3&gt;1ã€å¢åŠ Favoritesæ•°æ®å­˜å‚¨&lt;/h3&gt;
&lt;p&gt;è¿™é‡Œä½¿ç”¨åŒæ•°æ®ä¸‹è½½åŒæ ·çš„å¤„ç†é€»è¾‘ï¼Œå°†æ”¶è—å¤¹ä¿å­˜ä¸ºJsonæ–‡ä»¶&lt;/p&gt;
&lt;p&gt;æ–°å»ºFavoritesDataRepository,ç±»ä¸­æ·»åŠ Â SaveFavoritesSettingã€GetFavoritesSettingç”¨äºä¿å­˜ä¸è¯»å–æ•°æ®ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;40&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; FavoritesDataRepository
{
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; SaveFavoritesSetting()
    {
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt;
        {
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; setting =&lt;span&gt; GlobalInfo.FavoritesSetting;
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (setting == &lt;span&gt;null&lt;/span&gt;) &lt;span&gt;return&lt;/span&gt;&lt;span&gt;;
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; fileName =&lt;span&gt; FileDataPath.GetFilePath(DataFileType.Favorites);
            CommonOperator.SaveDataJson(setting, fileName);
        }
        &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Exception ex)
        {

        }
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; FavoritesSetting GetFavoritesSetting()
    {
        &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; fileName =&lt;span&gt; FileDataPath.GetFilePath(DataFileType.Favorites);
        &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; setting = CommonOperator.GetDataJson&amp;lt;FavoritesSetting&amp;gt;&lt;span&gt;(fileName);
        setting &lt;/span&gt;??= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; FavoritesSetting();
        setting.FavoritesInfos &lt;/span&gt;??= &lt;span&gt;new&lt;/span&gt; List&amp;lt;TreeNode&amp;gt;&lt;span&gt;();
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (setting.FavoritesInfos.Count &amp;lt;= &lt;span&gt;0&lt;/span&gt;&lt;span&gt;)
        {
            setting.FavoritesInfos.Add(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; TreeNode()
            {
                ParentId &lt;/span&gt;= -&lt;span&gt;1&lt;/span&gt;&lt;span&gt;,
                NodeId &lt;/span&gt;= &lt;span&gt;0&lt;/span&gt;&lt;span&gt;,
                NodeName &lt;/span&gt;= &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;æ”¶è—å¤¹&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
                Type &lt;/span&gt;= &lt;span&gt;1&lt;/span&gt;&lt;span&gt;,
            });
        }
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; setting;
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Â 2ã€å¢åŠ èœå•äº‹ä»¶&lt;/h3&gt;
&lt;p&gt;ç”±äºäº‹ä»¶è¾ƒå¤šï¼Œç›®å‰ä»…å¤„ç†æ·»åŠ æ–‡ä»¶å¤¹ã€æ·»åŠ æ”¶è—ã€åˆ é™¤åŠŸèƒ½&lt;/p&gt;
&lt;p&gt;æ·»åŠ folder,è¿™é‡Œçš„ifç”¨æ¥åˆ¤æ–­æ˜¯æ”¶è—å¤¹å·¥å…·æ çš„æŒ‰é’®è¿˜æ˜¯å³é”®èœå•C&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;42&quot;&gt;
&lt;pre&gt;
&lt;span&gt;private&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; AddFolder_OnClick(&lt;span&gt;object&lt;/span&gt;&lt;span&gt; sender, RoutedEventArgs e)
{
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (sender &lt;span&gt;is&lt;/span&gt;&lt;span&gt; Button)
    {
        &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; newTreeNode = GetNewTreeNodeInfo(&lt;span&gt;true&lt;/span&gt;, &lt;span&gt;1&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;æ–°å»ºæ–‡ä»¶å¤¹&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;null&lt;/span&gt;&lt;span&gt;);
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (&lt;span&gt;null&lt;/span&gt; == FavoritesTree || FavoritesTree.Items.Count &amp;lt;= &lt;span&gt;0&lt;/span&gt;) &lt;span&gt;return&lt;/span&gt;&lt;span&gt;;
        &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; treeNodeUc = FavoritesTree.Items[&lt;span&gt;0&lt;/span&gt;&lt;span&gt;];
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (!(treeNodeUc &lt;span&gt;is&lt;/span&gt; MTreeViewItem item)) &lt;span&gt;return&lt;/span&gt;&lt;span&gt;;
        item.Items.Add(newTreeNode.Item2);
        GlobalInfo.FavoritesSetting.FavoritesInfos.Add(newTreeNode.Item1);
    }
    &lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (sender &lt;span&gt;is&lt;/span&gt;&lt;span&gt; MMenuItem)
    {
        &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; newTreeNode = GetNewTreeNodeInfo(&lt;span&gt;false&lt;/span&gt;, &lt;span&gt;1&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;æ–°å»ºæ–‡ä»¶å¤¹&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;null&lt;/span&gt;&lt;span&gt;);
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (_currentRightItem != &lt;span&gt;null&lt;/span&gt; &amp;amp;&amp;amp; _currentRightItem.Type == &lt;span&gt;1&lt;/span&gt;&lt;span&gt;)
        {
            _currentRightItem.Items.Add(newTreeNode.Item2);
            GlobalInfo.FavoritesSetting.FavoritesInfos.Add(newTreeNode.Item1);
        }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ·»åŠ æ”¶è—ï¼Œæ·»åŠ æ”¶è—å¢åŠ äº†GetWebUrlEventäº‹ä»¶ ç”¨äºè·å–å½“å‰tabé¡µçš„url;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;42&quot;&gt;
&lt;pre&gt;
&lt;span&gt;private&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; AddFavorites_OnClick(&lt;span&gt;object&lt;/span&gt;&lt;span&gt; sender, RoutedEventArgs e)
{
    &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; model = GetWebUrlEvent?&lt;span&gt;.Invoke();
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (&lt;span&gt;null&lt;/span&gt; == model) &lt;span&gt;return&lt;/span&gt;&lt;span&gt;;

    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (sender &lt;span&gt;is&lt;/span&gt;&lt;span&gt; Button)
    {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (!(FavoritesTree.Items[&lt;span&gt;0&lt;/span&gt;] &lt;span&gt;is&lt;/span&gt; MTreeViewItem item)) &lt;span&gt;return&lt;/span&gt;&lt;span&gt;;
        &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; newTreeNode = GetNewTreeNodeInfo(&lt;span&gt;true&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;&lt;span&gt;, model.Title, model.CurrentUrl);
        GlobalInfo.FavoritesSetting.FavoritesInfos.Add(newTreeNode.Item1);
        item.Items.Add(newTreeNode.Item2);
    }
    &lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (sender &lt;span&gt;is&lt;/span&gt;&lt;span&gt; MMenuItem)
    {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (_currentRightItem != &lt;span&gt;null&lt;/span&gt; &amp;amp;&amp;amp; _currentRightItem.Type == &lt;span&gt;1&lt;/span&gt;&lt;span&gt;)
        {
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; newTreeNode = GetNewTreeNodeInfo(&lt;span&gt;false&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;&lt;span&gt;, model.Title, model.CurrentUrl);
            _currentRightItem.Items.Add(newTreeNode.Item2);
            GlobalInfo.FavoritesSetting.FavoritesInfos.Add(newTreeNode.Item1);
        }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åˆ é™¤å½“å‰èŠ‚ç‚¹&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;private&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; Delete_OnClick(&lt;span&gt;object&lt;/span&gt;&lt;span&gt; sender, RoutedEventArgs e)
{
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (_currentRightItem?.Parent == &lt;span&gt;null&lt;/span&gt;) &lt;span&gt;return&lt;/span&gt;&lt;span&gt;;

    &lt;/span&gt;&lt;span&gt;foreach&lt;/span&gt; (&lt;span&gt;var&lt;/span&gt; item &lt;span&gt;in&lt;/span&gt;&lt;span&gt; _currentRightItem.Items)
    {
        _currentRightItem.Items.Remove(item);
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (!GlobalInfo.FavoritesSetting.FavoritesInfos.Exists(x =&amp;gt; x.NodeId ==&lt;span&gt; _currentRightItem.NodeId))
            &lt;/span&gt;&lt;span&gt;continue&lt;/span&gt;&lt;span&gt;;
        &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; currentNode = (GlobalInfo.FavoritesSetting.FavoritesInfos.FirstOrDefault(x =&amp;gt; x.NodeId ==&lt;span&gt; _currentRightItem.NodeId));
        GlobalInfo.FavoritesSetting.FavoritesInfos.Remove(currentNode);
    }

    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (_currentRightItem.Parent &lt;span&gt;is&lt;/span&gt;&lt;span&gt; MTreeViewItem items)
    {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (GlobalInfo.FavoritesSetting.FavoritesInfos.Exists(x =&amp;gt; x.NodeId ==&lt;span&gt; _currentRightItem.NodeId))
        {
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; currentNode = (GlobalInfo.FavoritesSetting.FavoritesInfos.FirstOrDefault(x =&amp;gt; x.NodeId ==&lt;span&gt; _currentRightItem.NodeId));
            GlobalInfo.FavoritesSetting.FavoritesInfos.Remove(currentNode);
        }
        items.Items.Remove(_currentRightItem);
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å…³äºåˆ›å»ºTreeNodeä»£ç ç»†èŠ‚è¯·å‚è€ƒæ–‡ç« æœ«å°¾æºç &lt;/p&gt;
&lt;p&gt;å¢åŠ OpenNewTabEventäº‹ä»¶ç”¨äºç‚¹å‡»æ”¶è—å†…å®¹æ—¶æ‰“å¼€ç½‘é¡µ&lt;/p&gt;
&lt;h2&gt;å››ã€è¿è¡Œæ•ˆæœ&lt;/h2&gt;
&lt;p&gt;Â &lt;img src=&quot;https://img2020.cnblogs.com/blog/814381/202101/814381-20210111214356672-495528602.gif&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2&gt;äº”ã€æºç åœ°å€&lt;/h2&gt;
&lt;p&gt;giteeåœ°å€ï¼š&lt;a href=&quot;https://gitee.com/sirius_machao/mweb-browser&quot; target=&quot;_blank&quot;&gt;https://gitee.com/sirius_machao/mweb-browser&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 12 Jan 2021 00:44:00 +0000</pubDate>
<dc:creator>å’¸é±¼ç¿»èº«ï¼Ÿ</dc:creator>
<og:description>ä¸€ã€Edgeæ”¶è—å¤¹èœå•åˆ†æ å¦‚ä¸‹å›¾æ‰€ç¤ºä¸ºEdgeæ”¶è—å¤¹èœå•ï¼Œ ç‚¹å‡»æ”¶è—å¤¹èœå•æŒ‰é’®ï¼ˆçº¢æ¡†éƒ¨åˆ†ï¼‰å¼¹å‡ºæ”¶è—å¤¹èœå•çª—ä½“ï¼Œçª—ä½“ä¸­åŒ…å«å·¥å…·æ ï¼ˆç»¿æ¡†éƒ¨åˆ†ï¼‰å’Œæ ‘å‹èœå•ï¼ˆé»„æ¡†éƒ¨åˆ†ï¼‰ å·¥å…·æ æŒ‰é’®åŠŸèƒ½åˆ†åˆ«ä¸ºæ·»åŠ å½“å‰ç½‘é¡µåˆ°æ ¹</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/mchao/p/14237923.html</dc:identifier>
</item>
<item>
<title>ã€å°èœå­¦ç½‘ç»œã€‘MACåœ°å€è¯¦è§£ - fasionchan</title>
<link>http://www.cnblogs.com/fasionchan/p/mac.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/fasionchan/p/mac.html</guid>
<description>&lt;p&gt;ä¸Šä¸€å°èŠ‚ä»‹ç»äº†ä»¥å¤ªç½‘å¸§çš„ç»“æ„ï¼Œä»¥åŠå¸§ä¸­å„ä¸ªå­—æ®µçš„ä½œç”¨ã€‚å‚ä¸ä»¥å¤ªç½‘é€šè®¯çš„å®ä½“ï¼Œç”±ä»¥å¤ªç½‘åœ°å€å”¯ä¸€æ ‡è¯†ã€‚ä»¥å¤ªç½‘åœ°å€ä¹Ÿå«åš &lt;em&gt;MAC&lt;/em&gt; åœ°å€ï¼Œæˆ‘ä»¬å¯¹å®ƒä»çŸ¥ä¹‹ç”šå°‘ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;ä»¥å¤ªç½‘åœ°å€åœ¨ä¸åŒåœºæ™¯ï¼Œç§°è°“ä¹Ÿä¸ä¸€æ ·ï¼Œå¸¸ç”¨å«æ³•åŒ…æ‹¬è¿™äº›ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä»¥å¤ªç½‘åœ°å€&lt;/li&gt;
&lt;li&gt;&lt;em&gt;MAC&lt;/em&gt; åœ°å€&lt;/li&gt;
&lt;li&gt;ç¡¬ä»¶åœ°å€&lt;/li&gt;
&lt;li&gt;ç‰©ç†åœ°å€&lt;/li&gt;
&lt;li&gt;ç½‘å¡åœ°å€&lt;/li&gt;
&lt;/ul&gt;&lt;/blockquote&gt;
&lt;h2 id=&quot;ç½‘å¡&quot;&gt;ç½‘å¡&lt;/h2&gt;
&lt;p&gt;åœ¨ä»¥å¤ªç½‘ä¸­ï¼Œæ¯å°ä¸»æœºéƒ½éœ€è¦å®‰è£…ä¸€ä¸ªç‰©ç†è®¾å¤‡å¹¶é€šè¿‡ç½‘çº¿è¿æ¥åˆ°ä¸€èµ·ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.fasionchan.com/p/18394ac97c9ef2e90596d62f6bc2f07b28796694.png#width=340px&quot; alt=&quot;1&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªè®¾å¤‡å°±æ˜¯ &lt;strong&gt;ç½‘å¡&lt;/strong&gt; ( &lt;em&gt;NIC&lt;/em&gt; )ï¼Œ&lt;strong&gt;ç½‘ç»œæ¥å£å¡&lt;/strong&gt; ( &lt;em&gt;network interface card&lt;/em&gt; )çš„ç®€ç§°ã€‚æœ‰äº›æ–‡çŒ®ä¹Ÿå°†ç½‘å¡ç§°ä¸º &lt;strong&gt;ç½‘ç»œæ¥å£æ§åˆ¶å™¨&lt;/strong&gt; ( &lt;em&gt;network interface controller&lt;/em&gt; )ã€‚&lt;/p&gt;
&lt;p&gt;ä»ç‰©ç†çš„å±‚é¢çœ‹ï¼Œç½‘å¡è´Ÿè´£å°†æ¯”ç‰¹æµè½¬æ¢æˆç”µä¿¡å·å‘é€å‡ºå»ï¼› åè¿‡æ¥ï¼Œä¹Ÿè´Ÿè´£å°†æ£€æµ‹åˆ°çš„ç”µä¿¡å·è½¬æ¢æˆæ¯”ç‰¹æµå¹¶æ¥æ”¶ã€‚&lt;/p&gt;
&lt;p&gt;ä»è½¯ä»¶çš„å±‚é¢çœ‹ï¼Œå‘é€æ•°æ®æ—¶ï¼Œå†…æ ¸åè®®æ ˆè´Ÿè´£å°è£…ä»¥å¤ªç½‘å¸§(å¡«å……Â &lt;strong&gt;ç›®çš„åœ°å€&lt;/strong&gt;Â ï¼ŒÂ &lt;strong&gt;æºåœ°å€&lt;/strong&gt;Â ï¼ŒÂ &lt;strong&gt;ç±»å‹&lt;/strong&gt;Â å’ŒÂ &lt;strong&gt;æ•°æ®&lt;/strong&gt;Â å¹¶è®¡ç®—Â &lt;strong&gt;æ ¡éªŒå’Œ&lt;/strong&gt;)ï¼Œå¹¶è°ƒç”¨ç½‘å¡é©±åŠ¨å‘é€ï¼› æ¥æ”¶æ•°æ®æ—¶ï¼Œè´Ÿè´£éªŒè¯Â &lt;strong&gt;ç›®çš„åœ°å€&lt;/strong&gt;Â ã€Â &lt;strong&gt;æ ¡éªŒå’Œ&lt;/strong&gt;Â å¹¶å–å‡ºæ•°æ®éƒ¨åˆ†ï¼Œäº¤ç”±ä¸Šå±‚åè®®æ ˆå¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.fasionchan.com/p/d58604f365fbacb3a220d2379c0474605e64a3af.jpg#width=340px&quot; alt=&quot;2&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ¯å—ç½‘å¡å‡ºå‚æ—¶ï¼Œéƒ½é¢„å…ˆåˆ†é…äº†ä¸€ä¸ªå…¨çƒå”¯ä¸€çš„ &lt;strong&gt;MACåœ°å€&lt;/strong&gt; ï¼Œå¹¶çƒ§è¿›ç¡¬ä»¶ã€‚ ä¸ç®¡åæ¥ç½‘å¡èº«å¤„ä½•å¤„ï¼Œæ¥å…¥å“ªä¸ªç½‘ç»œï¼Œ&lt;em&gt;MAC&lt;/em&gt; åœ°å€å‡ä¸å˜ã€‚ å½“ç„¶ï¼ŒæŸäº›æ“ä½œç³»ç»Ÿä¹Ÿå…è®¸ä¿®æ”¹ç½‘å¡çš„ &lt;em&gt;MAC&lt;/em&gt; åœ°å€ã€‚&lt;/p&gt;
&lt;h2 id=&quot;macåœ°å€&quot;&gt;MACåœ°å€&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;MAC&lt;/em&gt; åœ°å€ç”± &lt;em&gt;6&lt;/em&gt; ä¸ªå­—èŠ‚ç»„æˆ(Â &lt;em&gt;48&lt;/em&gt; ä½)ï¼Œå¯ä»¥å”¯ä¸€æ ‡è¯†Â $2^{48}$ ï¼Œå³ &lt;em&gt;281474976710656&lt;/em&gt; ä¸ªç½‘ç»œè®¾å¤‡(æ¯”å¦‚ç½‘å¡)ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;MAC&lt;/em&gt; åœ°å€Â &lt;em&gt;6&lt;/em&gt; ä¸ªå­—èŠ‚å¯ä»¥åˆ’åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œå¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.fasionchan.com/p/18f17216ce3ec65b7b61c3a070c5d1d7e49dba4a.jpg#width=400px&quot; alt=&quot;3&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;em&gt;3&lt;/em&gt; å­—èŠ‚é•¿çš„ &lt;strong&gt;å‚å•†ä»£ç &lt;/strong&gt; ( &lt;em&gt;OUI&lt;/em&gt; )ï¼Œç”±å›½é™…ç»„ç»‡åˆ†é…ç»™ä¸åŒçš„ç½‘ç»œè®¾å¤‡å•†ï¼›&lt;/li&gt;
&lt;li&gt;&lt;em&gt;3&lt;/em&gt; å­—èŠ‚é•¿çš„ &lt;strong&gt;åºåˆ—å·&lt;/strong&gt; ( &lt;em&gt;SN&lt;/em&gt; )ï¼Œç”±å‚å•†åˆ†é…ç»™å®ƒç”Ÿäº§çš„ç½‘ç»œè®¾å¤‡ï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å‚å•†ä»£ç å’Œåºåˆ—å·éƒ½æ˜¯å”¯ä¸€åˆ†é…ï¼Œå› æ­¤ &lt;em&gt;MAC&lt;/em&gt; åœ°å€æ˜¯ &lt;strong&gt;å…¨çƒå”¯ä¸€&lt;/strong&gt; çš„ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å†’åˆ†åå…­è¿›åˆ¶è¡¨ç¤ºæ³•&quot;&gt;å†’åˆ†åå…­è¿›åˆ¶è¡¨ç¤ºæ³•&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;MAC&lt;/em&gt; åœ°å€ &lt;em&gt;6&lt;/em&gt; ä¸ªå­—èŠ‚å¦‚ä½•å±•ç¤ºå‘¢ï¼Ÿ æ˜¯å¦èƒ½å¤Ÿä½œä¸º &lt;em&gt;ASCII&lt;/em&gt; æ¥è§£è¯»å¹¶æ˜¾ç¤ºï¼Ÿ&lt;/p&gt;
&lt;p&gt;ææ€•ä¸èƒ½ã€‚ä¸€ä¸ªå­—èŠ‚æ€»å…±æœ‰ &lt;em&gt;8&lt;/em&gt; ä¸ªä½ï¼Œè€Œ &lt;em&gt;ASCII&lt;/em&gt; åªå®šä¹‰äº†å…¶ä¸­çš„ &lt;em&gt;7&lt;/em&gt; ä½ã€‚å†µä¸” &lt;em&gt;ASCII&lt;/em&gt; ä¸­å®šä¹‰äº†å¾ˆå¤šæ§åˆ¶å­—ç¬¦ï¼Œèƒ½æ˜¾ç¤ºçš„ä¹Ÿåªæœ‰å­—æ¯ã€æ•°å­—ä»¥åŠä¸€äº›å¸¸ç”¨ç¬¦å·ã€‚ä»¥ä¸Šè¿°åœ°å€ä¸ºä¾‹ï¼Œåªæœ‰Â &lt;code&gt;0x5B&lt;/code&gt;Â è¿™ä¸ªå­—èŠ‚æ˜¯å¯ä»¥æ˜¾ç¤ºçš„ï¼Œå¯¹åº”ç€å­—ç¬¦Â &lt;code&gt;[&lt;/code&gt;Â ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.fasionchan.com/p/7d20b966b4622355560fd0d2ba54227a717c1662.png#width=619px&quot; alt=&quot;4&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¥½åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¤šä¸ªå¯è¯»å­—ç¬¦æ¥è¡¨ç¤ºä¸€ä¸ªåŸå§‹å­—èŠ‚ã€‚æˆ‘ä»¬å°†ä¸€ä¸ªå­—èŠ‚åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œé«˜ &lt;code&gt;4&lt;/code&gt; ä½ä»¥åŠä½ &lt;code&gt;4&lt;/code&gt; ä½ï¼Œæ¯éƒ¨åˆ†å¯ä»¥ç”¨ä¸€ä¸ªåå…­è¿›åˆ¶å­—ç¬¦æ¥è¡¨ç¤ºã€‚ä»¥ &lt;code&gt;0x00&lt;/code&gt; è¿™ä¸ªå­—èŠ‚ä¸ºä¾‹ï¼Œå¯ä»¥ç”¨ä¸¤ä¸ªå­—ç¬¦ &lt;code&gt;00&lt;/code&gt; è¡¨ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.fasionchan.com/p/7a59527148a3b97626c41569cab75bf2fb41f2b2.png#width=366px&quot; alt=&quot;5&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ ·ä¸€æ¥ï¼Œæ•´ä¸ªåœ°å€å¯ä»¥ç”¨ä¸€ä¸ª &lt;em&gt;12&lt;/em&gt; å­—èŠ‚é•¿çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼š &lt;code&gt;0010A4BA875B&lt;/code&gt; ã€‚ ä¸ºäº†è¿›ä¸€æ­¥æé«˜å¯è¯»æ€§ï¼Œå¯ä»¥åœ¨ä¸­é—´æ’å…¥å†’å· &lt;code&gt;:&lt;/code&gt; ï¼š &lt;code&gt;00:10:A4:BA:87:5B&lt;/code&gt; ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.fasionchan.com/p/67043e74cdcd09aaa861efe5393f1779a334b8ed.png&quot; alt=&quot;6&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿™å°±æ˜¯ &lt;strong&gt;å†’åˆ†åå…­è¿›åˆ¶è¡¨ç¤ºæ³•&lt;/strong&gt; ( &lt;em&gt;colon hexadecimal notation&lt;/em&gt; )ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„åˆ°ï¼Œå†’åˆ†åå…­è¿›åˆ¶æ€»å…±éœ€è¦ &lt;code&gt;17&lt;/code&gt; ä¸ªå­—èŠ‚ã€‚ å¦‚æœç®—ä¸Šå­—ç¬¦ä¸²ç»“å°¾å¤„çš„ &lt;code&gt;\0&lt;/code&gt; ï¼Œå°†è¾¾åˆ° &lt;em&gt;18&lt;/em&gt; ä¸ªå­—èŠ‚ï¼ŒåŸå§‹ &lt;em&gt;MAC&lt;/em&gt; åœ°å€çš„æ•´æ•´ &lt;em&gt;3&lt;/em&gt; å€ï¼é¡ºä¾¿æä¸€ä¸‹ï¼Œåå…­è¿›åˆ¶å­—æ¯å­—ç¬¦ç”¨å¤§å°å†™éƒ½å¯ä»¥ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç½‘å¡ç®¡ç†&quot;&gt;ç½‘å¡ç®¡ç†&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;Linux&lt;/em&gt; ä¸Šæœ‰ä¸å°‘å·¥å…·å‘½ä»¤å¯ä»¥æŸ¥çœ‹ç³»ç»Ÿå½“å‰æ¥å…¥çš„ç½‘å¡ä»¥åŠæ¯å¼ ç½‘å¡çš„è¯¦ç»†ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆæ˜¯ &lt;em&gt;ifconfig&lt;/em&gt; å‘½ä»¤ï¼Œä»–é»˜è®¤æ˜¾ç¤ºå·²å¯ç”¨çš„ç½‘å¡ï¼Œè¯¦æƒ…ä¸­å¯ä»¥çœ‹åˆ°æ¯å¼ ç½‘å¡çš„ç‰©ç†åœ°å€ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-txt&quot;&gt;fasion@u2004 [ ~ ]  âœ ifconfig
enp0s3: flags=4163&amp;lt;UP,BROADCAST,RUNNING,MULTICAST&amp;gt;  mtu 1500
        inet 10.0.2.15  netmask 255.255.255.0  broadcast 10.0.2.255
        inet6 fe80::a00:27ff:fe49:50dd  prefixlen 64  scopeid 0x20&amp;lt;link&amp;gt;
        ether 08:00:27:49:50:dd  txqueuelen 1000  (Ethernet)
        RX packets 3702  bytes 4881568 (4.8 MB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 538  bytes 42999 (42.9 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

enp0s8: flags=4163&amp;lt;UP,BROADCAST,RUNNING,MULTICAST&amp;gt;  mtu 1500
        inet 192.168.56.2  netmask 255.255.255.0  broadcast 192.168.56.255
        inet6 fe80::a00:27ff:fe56:831c  prefixlen 64  scopeid 0x20&amp;lt;link&amp;gt;
        ether 08:00:27:56:83:1c  txqueuelen 1000  (Ethernet)
        RX packets 4183  bytes 1809871 (1.8 MB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 2674  bytes 350013 (350.0 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

lo: flags=73&amp;lt;UP,LOOPBACK,RUNNING&amp;gt;  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10&amp;lt;host&amp;gt;
        loop  txqueuelen 1000  (Local Loopback)
        RX packets 679  bytes 1510416 (1.5 MB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 679  bytes 1510416 (1.5 MB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¾‹å­ä¸­ï¼Œç³»ç»Ÿæ€»å…±æœ‰ &lt;em&gt;3&lt;/em&gt; å—å·²å¯ç”¨ç½‘å¡ï¼Œåå­—åˆ†åˆ«æ˜¯ &lt;em&gt;enp0s3&lt;/em&gt; ã€ &lt;em&gt;enp0s8&lt;/em&gt; ä»¥åŠ &lt;em&gt;lo&lt;/em&gt; ã€‚å…¶ä¸­ &lt;em&gt;lo&lt;/em&gt; æ˜¯ç¯å›ç½‘å¡ï¼Œç”¨äºæœ¬æœºé€šè®¯ã€‚&lt;code&gt;ether 08:00:27:49:50:dd&lt;/code&gt;Â è¡¨æ˜ï¼Œç½‘å¡ &lt;em&gt;enp0s3&lt;/em&gt; çš„ç‰©ç†åœ°å€æ˜¯ &lt;code&gt;08:00:27:49:50:dd&lt;/code&gt; ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;è¯·æ³¨æ„ï¼Œ&lt;em&gt;ifconfig&lt;/em&gt; æ˜¯ä¸€ä¸ªæ¯”è¾ƒè€æ—§çš„å‘½ä»¤ï¼Œæ­£åœ¨æ…¢æ…¢æ·¡å‡ºå†å²èˆå°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;em&gt;ip&lt;/em&gt; å‘½ä»¤ä¹Ÿå¯ä»¥æŸ¥çœ‹ç³»ç»Ÿç½‘å¡ä¿¡æ¯ï¼Œé»˜è®¤æ˜¾ç¤ºæ‰€æœ‰ç½‘å¡ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-txt&quot;&gt;fasion@u2004 [ ~ ]  âœ ip link
1: lo: &amp;lt;LOOPBACK,UP,LOWER_UP&amp;gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
2: enp0s3: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
    link/ether 08:00:27:49:50:dd brd ff:ff:ff:ff:ff:ff
3: enp0s8: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
    link/ether 08:00:27:56:83:1c brd ff:ff:ff:ff:ff:ff
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;em&gt;ip&lt;/em&gt; å‘½ä»¤è¾“å‡ºä¿¡æ¯æ¯”è¾ƒç´§å‡‘ï¼Œ &lt;code&gt;link/ether 08:00:27:49:50:dd&lt;/code&gt;Â è¿™è¡Œå±•ç¤ºç½‘å¡çš„ç‰©ç†åœ°å€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;ip&lt;/em&gt; å‘½ä»¤æ˜¯ä¸€ä¸ªæ¯”è¾ƒæ–°çš„å‘½ä»¤ï¼ŒåŠŸèƒ½éå¸¸å¼ºå¤§ã€‚å®ƒé™¤äº†å¯ä»¥ç”¨äºç®¡ç†ç½‘ç»œè®¾å¤‡ï¼Œè¿˜å¯ä»¥ç”¨äºç®¡ç†è·¯ç”±è¡¨ï¼Œç­–ç•¥è·¯ç”±ä»¥åŠå„ç§éš§é“ã€‚å› æ­¤ï¼Œæ¨èé‡ç‚¹å­¦ä¹ æŒæ¡ &lt;em&gt;ip&lt;/em&gt; å‘½ä»¤çš„ç”¨æ³•ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç¼–ç¨‹è·å–ç½‘å¡åœ°å€&quot;&gt;ç¼–ç¨‹è·å–ç½‘å¡åœ°å€&lt;/h2&gt;
&lt;p&gt;å¦‚æœç¨‹åºä¸­éœ€è¦ç”¨åˆ°ç½‘å¡åœ°å€ï¼Œå¦‚ä½•è·å–å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æœ‰ä¸ªæ–¹æ³•æ˜¯æ‰§è¡Œ &lt;em&gt;ip&lt;/em&gt; å‘½ä»¤è¾“å‡ºç½‘å¡è¯¦æƒ…ï¼Œç„¶åä»è¾“å‡ºä¿¡æ¯ä¸­æˆªå–ç½‘å¡åœ°å€ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-txt&quot;&gt;fasion@u2004 [ ~ ]  âœ ip link show dev enp0s3 | grep 'link/ether' | awk '{print $2}'
08:00:27:49:50:dd
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™ç§æ–¹æ³•å¤šç”¨äº &lt;em&gt;Shell&lt;/em&gt; ç¼–ç¨‹ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;æ›´ä¼˜é›…çš„åŠæ³•æ˜¯é€šè¿‡å¥—æ¥å­—ç¼–ç¨‹ï¼Œç›´æ¥å‘æ“ä½œç³»ç»Ÿè·å–ã€‚&lt;em&gt;Linux&lt;/em&gt; å¥—æ¥å­—æ”¯æŒé€šè¿‡ &lt;em&gt;ioctl&lt;/em&gt; ç³»ç»Ÿè°ƒç”¨è·å–ç½‘ç»œè®¾å¤‡ä¿¡æ¯ï¼Œå¤§è‡´æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;åˆ›å»ºä¸€ä¸ªå¥—æ¥å­—ï¼Œä»»æ„ç±»å‹å‡å¯ï¼›&lt;/li&gt;
&lt;li&gt;å‡†å¤‡ &lt;em&gt;ifreq&lt;/em&gt; ç»“æ„ä½“ï¼Œç”¨äºä¿å­˜ç½‘å¡è®¾å¤‡ä¿¡æ¯ï¼›&lt;/li&gt;
&lt;li&gt;å°†å¾…æŸ¥è¯¢ç½‘å¡åå¡«å……åˆ° &lt;em&gt;ifreq&lt;/em&gt; ç»“æ„ä½“ï¼›&lt;/li&gt;
&lt;li&gt;è°ƒç”¨ &lt;em&gt;ioctl&lt;/em&gt; ç³»ç»Ÿè°ƒç”¨ï¼Œå‘å¥—æ¥å­—å‘èµ· &lt;code&gt;SIOCGIFHWADDR&lt;/code&gt;Â è¯·æ±‚ï¼Œè·å–ç‰©ç†åœ°å€ï¼›&lt;/li&gt;
&lt;li&gt;å¦‚æ— é”™æ¼ï¼Œå†…æ ¸å°†è¢«æŸ¥è¯¢ç½‘å¡çš„ç‰©ç†åœ°å€å¡«å……åœ¨ &lt;em&gt;ifreq&lt;/em&gt; ç»“æ„ä½“ &lt;em&gt;ifr_hwaddr&lt;/em&gt; å­—æ®µä¸­ï¼›&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;æœ€åï¼Œé™„ä¸Šä¸€ä¸ªå®Œæ•´çš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c&quot;&gt;#include &amp;lt;net/if.h&amp;gt;
#include &amp;lt;stdio.h&amp;gt;
#include &amp;lt;string.h&amp;gt;
#include &amp;lt;sys/ioctl.h&amp;gt;
#include &amp;lt;sys/socket.h&amp;gt;

/**
 *  Convert binary MAC address to readable format.
 *
 *  Arguments
 *      n: binary format, must be 6 bytes.
 *
 *      a: buffer for readable format, 18 bytes at least(`\0` included).
 **/
void mac_ntoa(unsigned char *n, char *a) {
    // traverse 6 bytes one by one
    sprintf(a, &quot;%02x:%02x:%02x:%02x:%02x:%02x&quot;, n[0], n[1], n[2], n[3], n[4], n[5]);
}


int main(int argc, char *argv[]) {
    if (argc &amp;lt; 2) {
        fprintf(stderr, &quot;no iface given\n&quot;);
        return 1;
    }

    // create a socket, any type is ok
    int s = socket(AF_INET, SOCK_STREAM, 0);
    if (-1 == s) {
        perror(&quot;Fail to create socket&quot;);
        return 2;
    }

    // fill iface name to struct ifreq
    struct ifreq ifr;
    strncpy(ifr.ifr_name, argv[1], 15);

    // call ioctl to get hardware address
    int ret = ioctl(s, SIOCGIFHWADDR, &amp;amp;ifr);
    if (-1 == ret) {
        perror(&quot;Fail to get mac address&quot;);
        return 3;
    }

    // convert to readable format
    char mac[18];
    mac_ntoa((unsigned char *)ifr.ifr_hwaddr.sa_data, mac);

    // output result
    printf(&quot;IFace: %s\n&quot;, ifr.ifr_name);
    printf(&quot;MAC: %s\n&quot;, mac);

    return 0;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…¶ä¸­ï¼Œ&lt;em&gt;mac_ntoa&lt;/em&gt; å‡½æ•°è°ƒç”¨å­—ç¬¦ä¸²æ ¼å¼åŒ–å‡½æ•° &lt;em&gt;sprintf&lt;/em&gt; å°†åŸå§‹ &lt;em&gt;MAC&lt;/em&gt; åœ°å€è½¬æ¢æˆå†’åˆ†åå…­è¿›åˆ¶å½¢å¼ã€‚&lt;/p&gt;
&lt;p&gt;ã€&lt;a href=&quot;https://fasionchan.com/network/&quot; target=&quot;_blank&quot;&gt;å°èœå­¦ç½‘ç»œ&lt;/a&gt;ã€‘ç³»åˆ—æ–‡ç« é¦–å‘äºå…¬ä¼—å·ã€å°èœå­¦ç¼–ç¨‹ã€‘ï¼Œæ•¬è¯·å…³æ³¨ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.fasionchan.com/coding-fan-wechat-soso.png?x-oss-process=image/resize,w_359&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 12 Jan 2021 00:43:00 +0000</pubDate>
<dc:creator>fasionchan</dc:creator>
<og:description>ä¸Šä¸€å°èŠ‚ä»‹ç»äº†ä»¥å¤ªç½‘å¸§çš„ç»“æ„ï¼Œä»¥åŠå¸§ä¸­å„ä¸ªå­—æ®µçš„ä½œç”¨ã€‚å‚ä¸ä»¥å¤ªç½‘é€šè®¯çš„å®ä½“ï¼Œç”±ä»¥å¤ªç½‘åœ°å€å”¯ä¸€æ ‡è¯†ã€‚ä»¥å¤ªç½‘åœ°å€ä¹Ÿå«åš MAC åœ°å€ï¼Œæˆ‘ä»¬å¯¹å®ƒä»çŸ¥ä¹‹ç”šå°‘ã€‚ ä»¥å¤ªç½‘åœ°å€åœ¨ä¸åŒåœºæ™¯ï¼Œç§°è°“ä¹Ÿä¸ä¸€æ ·ï¼Œå¸¸ç”¨å«æ³•åŒ…æ‹¬</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/fasionchan/p/mac.html</dc:identifier>
</item>
<item>
<title>ã€Nginxå­¦ä¹ ç¬”è®°ã€‘-åˆè¯†Nginx - ITèƒ–</title>
<link>http://www.cnblogs.com/FLY_DREAM/p/14265110.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/FLY_DREAM/p/14265110.html</guid>
<description>&lt;p&gt;Nginxä¸­æ–‡æ–‡æ¡£ - &lt;a href=&quot;https://www.nginx.cn/doc/&quot; target=&quot;_blank&quot;&gt;https://www.nginx.cn/doc/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Nginx (&quot;engine x&quot;) æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ HTTP å’Œ åå‘ä»£ç† æœåŠ¡å™¨ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª IMAP/POP3/SMTP ä»£ç†æœåŠ¡å™¨ã€‚ Nginx æ˜¯ç”± Igor Sysoev ä¸ºä¿„ç½—æ–¯è®¿é—®é‡ç¬¬äºŒçš„ Rambler.ru ç«™ç‚¹å¼€å‘çš„ï¼Œç¬¬ä¸€ä¸ªå…¬å¼€ç‰ˆæœ¬0.1.0å‘å¸ƒäº2004å¹´10æœˆ4æ—¥ã€‚å…¶å°†æºä»£ç ä»¥ç±»BSDè®¸å¯è¯çš„å½¢å¼å‘å¸ƒï¼Œå› å®ƒçš„ç¨³å®šæ€§ã€ä¸°å¯Œçš„åŠŸèƒ½é›†ã€ç¤ºä¾‹é…ç½®æ–‡ä»¶å’Œä½ç³»ç»Ÿèµ„æºçš„æ¶ˆè€—è€Œé—»åã€‚&lt;/p&gt;
&lt;p&gt;Nginx è§£å†³äº†æœåŠ¡å™¨çš„C10Kï¼ˆå°±æ˜¯åœ¨ä¸€ç§’ä¹‹å†…è¿æ¥å®¢æˆ·ç«¯çš„æ•°ç›®ä¸º10kå³1ä¸‡ï¼‰é—®é¢˜ã€‚å®ƒçš„è®¾è®¡ä¸åƒä¼ ç»Ÿçš„æœåŠ¡å™¨é‚£æ ·ä½¿ç”¨çº¿ç¨‹å¤„ç†è¯·æ±‚ï¼Œè€Œæ˜¯ä¸€ä¸ªæ›´åŠ é«˜çº§çš„æœºåˆ¶â€”&lt;code&gt;äº‹ä»¶é©±åŠ¨æœºåˆ¶&lt;/code&gt;ï¼Œæ˜¯ä¸€ç§å¼‚æ­¥äº‹ä»¶é©±åŠ¨ç»“æ„ã€‚å®ƒå¯ä»¥è½»æ¾åœ¨ç™¾ä¸‡å¹¶å‘è¿æ¥ä¸‹å®ç°é«˜ååé‡çš„WebæœåŠ¡ï¼ŒåŒæ—¶è¯¸å¤šåº”ç”¨åœºæ™¯ä¸‹çš„é—®é¢˜éƒ½å¯ä»¥é€šè¿‡ç§ç§Nginxæ¨¡å—å¾—ä»¥è§£å†³ï¼Œè€Œæˆ‘ä»¬æ‰€éœ€çš„å·¥ä½œé‡ä¹Ÿå¹¶ä¸å¤§&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/owen2016/pic-hub/raw/master/1610378133_20200624150926016_509393060.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;nginx-ç‰¹ç‚¹&quot;&gt;Nginx ç‰¹ç‚¹&lt;/h2&gt;
&lt;ul readability=&quot;4.5&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;é«˜å¹¶å‘è¯·æ±‚çš„åŒæ—¶ä¿æŒé«˜æ•ˆçš„æœåŠ¡&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;çƒ­éƒ¨ç½²&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;ä½å†…å­˜æ¶ˆè€—/å¾ˆé«˜çš„å¯é æ€§&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¤„ç†å“åº”è¯·æ±‚å¾ˆå¿«&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;éé˜»å¡ã€é«˜å¹¶å‘è¿æ¥-IOå¤šè·¯å¤ç”¨epollï¼ˆIOå¤ç”¨ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è½»é‡çº§&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;åŠŸèƒ½æ¨¡å—å°‘ - Nginxä»…ä¿ç•™äº†HTTPéœ€è¦çš„æ¨¡å—ï¼Œå…¶ä»–éƒ½ç”¨æ’ä»¶çš„æ–¹å¼ï¼Œåå¤©æ·»åŠ &lt;/li&gt;
&lt;li&gt;ä»£ç æ¨¡å—åŒ– - æ›´é€‚åˆäºŒæ¬¡å¼€å‘ï¼Œå¦‚é˜¿é‡Œå·´å·´Tengine&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;CPUäº²å’Œ&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æŠŠCPUæ ¸å¿ƒå’ŒNginxå·¥ä½œè¿›ç¨‹ç»‘å®šï¼ŒæŠŠæ¯ä¸ªworkerè¿›ç¨‹å›ºå®šåœ¨ä¸€ä¸ªCPUä¸Šæ‰§è¡Œï¼Œå‡å°‘åˆ‡æ¢CPUçš„cache missï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;Nginxæ¥æ”¶ç”¨æˆ·è¯·æ±‚æ˜¯å¼‚æ­¥çš„ï¼Œå³å…ˆå°†ç”¨æˆ·è¯·æ±‚å…¨éƒ¨æ¥æ”¶ä¸‹æ¥ï¼Œå†ä¸€æ¬¡æ€§å‘é€åˆ°åç«¯WebæœåŠ¡å™¨ï¼Œæå¤§å‡è½»åç«¯WebæœåŠ¡å™¨çš„å‹åŠ›ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;æ”¯æŒå†…ç½®æœåŠ¡å™¨æ£€æµ‹ã€‚Nginxèƒ½å¤Ÿæ ¹æ®åº”ç”¨æœåŠ¡å™¨å¤„ç†é¡µé¢è¿”å›çš„çŠ¶æ€ç ã€è¶…æ—¶ä¿¡æ¯ç­‰æ£€æµ‹æœåŠ¡å™¨æ˜¯å¦å‡ºç°æ•…éšœï¼Œå¹¶åŠæ—¶è¿”å›é”™è¯¯çš„è¯·æ±‚é‡æ–°æäº¤åˆ°å…¶å®ƒèŠ‚ç‚¹ä¸Š&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;é‡‡ç”¨Master/workerå¤šè¿›ç¨‹å·¥ä½œæ¨¡å¼&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;nginx-åŸºæœ¬åŠŸèƒ½&quot;&gt;Nginx åŸºæœ¬åŠŸèƒ½&lt;/h2&gt;
&lt;p&gt;Nginxçš„åŠŸèƒ½åŒ…æ‹¬åŸºæœ¬HTTPåŠŸèƒ½å’Œæ‰©å±•åŠŸèƒ½ã€‚å’ŒApacheæœåŠ¡å™¨ä¸€æ ·ï¼ŒNginxæœåŠ¡å™¨ä¸ºäº†æä¾›æ›´å¤šçš„åŠŸèƒ½å¹¶ä¸”èƒ½å¤Ÿæœ‰æ•ˆåœ°æ‰©å±•è¿™äº›åŠŸèƒ½ã€‚æ¯ä¸€ä¸ªæ¨¡å—éƒ½æä¾›äº†ä¸€ä¸ªåŠŸèƒ½ï¼Œé€šè¿‡ç¼–è¯‘è¿™äº›åŠŸèƒ½æ¨¡å—æ¥å®ç°åŠŸèƒ½çš„æ‰©å±•&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;åŸºæœ¬HTTPåŠŸèƒ½&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;aï¼‰æä¾›é™æ€æ–‡ä»¶å’Œindexæ–‡ä»¶ï¼Œå¤„ç†é™æ€æ–‡ä»¶ï¼Œç´¢å¼•æ–‡ä»¶ä»¥åŠè‡ªåŠ¨ç´¢å¼•ï¼Œæ‰“å¼€æ–‡ä»¶æè¿°ç¬¦ç¼“å­˜ï¼›&lt;br/&gt;bï¼‰ä½¿ç”¨ç¼“å­˜åŠ é€Ÿåå‘ä»£ç†ï¼Œåå‘ä»£ç†åŠ é€Ÿï¼ˆæ— ç¼“å­˜ï¼‰ï¼Œç®€å•çš„è´Ÿè½½å‡è¡¡å’Œå®¹é”™ï¼›&lt;br/&gt;cï¼‰ä½¿ç”¨ç¼“å­˜æœºåˆ¶åŠ é€Ÿè¿œç¨‹FastCGIï¼Œç®€å•çš„è´Ÿè½½å‡è¡¡å’Œå®¹é”™ï¼›&lt;br/&gt;dï¼‰æ¨¡å—åŒ–çš„ç»“æ„ã€‚è¿‡æ»¤å™¨åŒ…æ‹¬gzipping,byte ranges,chunked responsesï¼Œä»¥åŠ SSI-filterã€‚åœ¨SSIè¿‡æ»¤å™¨ä¸­ï¼Œåˆ°åŒä¸€ä¸ª proxy æˆ–è€… FastCGI çš„å¤šä¸ªå­è¯·æ±‚å¹¶å‘å¤„ç†ï¼›&lt;br/&gt;eï¼‰æ”¯æŒSSL å’Œ TLS SNI æ”¯æŒï¼›&lt;br/&gt;fï¼‰IMAP/POP3ä»£ç†æœåŠ¡åŠŸèƒ½ï¼›&lt;br/&gt;gï¼‰ä½¿ç”¨å¤–éƒ¨ HTTP è®¤è¯æœåŠ¡å™¨é‡å®šå‘ç”¨æˆ·åˆ° IMAP/POP3 åç«¯ï¼›&lt;br/&gt;hï¼‰ä½¿ç”¨å¤–éƒ¨ HTTP è®¤è¯æœåŠ¡å™¨è®¤è¯ç”¨æˆ·åè¿æ¥é‡å®šå‘åˆ°å†…éƒ¨çš„ SMTP åç«¯ï¼›&lt;/p&gt;
&lt;ol start=&quot;2&quot;&gt;&lt;li&gt;å…¶ä»–HTTPåŠŸèƒ½&lt;br/&gt;aï¼‰åŸºäºåç§°å’ŒåŸºäºIPçš„è™šæ‹ŸæœåŠ¡å™¨ï¼›&lt;br/&gt;bï¼‰æ”¯æŒKeep-aliveå’Œç®¡é“è¿æ¥ï¼›&lt;br/&gt;cï¼‰çµæ´»çš„é…ç½®å’Œé‡æ–°é…ç½®ã€åœ¨çº¿å‡çº§çš„æ—¶å€™ä¸ç”¨ä¸­æ–­å®¢æˆ·è®¿é—®çš„å¤„ç†ï¼›&lt;br/&gt;dï¼‰è®¿é—®æ—¥å¿—çš„æ ¼å¼ï¼Œç¼“å­˜æ—¥å¿—å†™å…¥å’Œå¿«é€Ÿæ—¥å¿—è½®å¾ªï¼›&lt;br/&gt;eï¼‰3xx-5xxé”™è¯¯ä»£ç é‡å®šå‘ï¼›&lt;br/&gt;fï¼‰é€Ÿåº¦é™åˆ¶&lt;/li&gt;
&lt;/ol&gt;&lt;h2 id=&quot;nginx-ä½¿ç”¨åœºæ™¯&quot;&gt;Nginx ä½¿ç”¨åœºæ™¯&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;æ­å»ºé™æ€èµ„æºæœåŠ¡å™¨&lt;/li&gt;
&lt;li&gt;åå‘ä»£ç†åˆ†å‘åç«¯æœåŠ¡ï¼ˆå¯ä»¥å’Œnodejsæ­é…å®ç°å‰åç«¯åˆ†ç¦»ï¼‰å’Œè·¨åŸŸé—®é¢˜&lt;/li&gt;
&lt;li&gt;æ ¹æ®User Agentæ¥é‡å®šå‘ç«™ç‚¹&lt;/li&gt;
&lt;li&gt;å¼€å‘ç¯å¢ƒæˆ–æµ‹è¯•ç¯å¢ƒåˆ‡æ¢ï¼ˆåˆ‡æ¢hostï¼‰&lt;/li&gt;
&lt;li&gt;urlé‡å†™ï¼Œä½¿ç”¨rewrieè§„åˆ™æœ¬åœ°æ˜ å°„&lt;/li&gt;
&lt;li&gt;èµ„æºå†…å®¹ç¯¡æ”¹&lt;/li&gt;
&lt;li&gt;è·å–cookieåšåˆ†æµ&lt;/li&gt;
&lt;li&gt;èµ„æºåˆå¹¶&lt;/li&gt;
&lt;li&gt;gzipå‹ç¼©&lt;/li&gt;
&lt;li&gt;å‹ç¼©å›¾ç‰‡&lt;/li&gt;
&lt;li&gt;sourceMapè°ƒè¯•&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://cdn.devopsing.site/2020/20210112000306.jpeg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;nginx-å®‰è£…å¸è½½&quot;&gt;Nginx å®‰è£…/å¸è½½&lt;/h2&gt;
&lt;p&gt;ä¸‹è½½åœ°å€ï¼š&lt;a href=&quot;http://nginx.org/en/download.html&quot; target=&quot;_blank&quot;&gt;http://nginx.org/en/download.html&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;docker-æ–¹å¼è¿è¡Œ&quot;&gt;Docker æ–¹å¼è¿è¡Œ&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;docker run --name nginx -p 8080:80 -d nginx&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&quot;ubuntuä¸Šå®‰è£…&quot;&gt;Ubuntuä¸Šå®‰è£…&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;sudo apt-get install software-properties-common
sudo add-apt-repository ppa:nginx/stable 
sudo apt-get update
sudo apt-get install nginx
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å®‰è£…å®Œæˆåï¼Œæ£€æŸ¥NginxæœåŠ¡çš„çŠ¶æ€&lt;code&gt;sudo systemctl status nginx&lt;/code&gt; å’Œ ç‰ˆæœ¬&lt;code&gt;nginx -V&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è®¿é—®ï¼š&lt;a href=&quot;http://localhost&quot; target=&quot;_blank&quot;&gt;http://localhost&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.devopsing.site/2020/20210112000843.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¯åŠ¨æ—¶å€™è‹¥æ˜¾ç¤ºç«¯å£80è¢«å ç”¨ï¼š &lt;code&gt;Starting nginx: [emerg]: bind() to 0.0.0.0:80 failed (98: Address already in use)ï¼Œ&lt;/code&gt;&lt;br/&gt;ä¿®æ”¹æ–‡ä»¶ï¼š/etc/nginx/sites-available/default,æŠŠ listen åé¢çš„ 80 ç«¯å£å·æ”¹ä¸ºè‡ªå·±çš„ç«¯å£ï¼Œè®¿é—®æ˜¯éœ€è¦æ·»åŠ ç«¯å£å·ã€‚&lt;br/&gt;å®‰è£…å®Œåå¦‚å‡ºç°403é”™è¯¯ï¼Œé‚£å¯èƒ½æ˜¯nginxé…ç½®æ–‡ä»¶é‡Œçš„ç½‘ç«™è·¯å¾„ä¸æ­£ç¡®&lt;/p&gt;
&lt;h3 id=&quot;å¸è½½nginx&quot;&gt;å¸è½½Nginx&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;sudo apt-get remove nginx nginx-common # å¸è½½åˆ é™¤é™¤äº†é…ç½®æ–‡ä»¶ä»¥å¤–çš„æ‰€æœ‰æ–‡ä»¶ã€‚
sudo apt-get purge nginx nginx-common # å¸è½½æ‰€æœ‰ä¸œä¸œï¼ŒåŒ…æ‹¬åˆ é™¤é…ç½®æ–‡ä»¶ã€‚
sudo apt-get autoremove # åœ¨ä¸Šé¢å‘½ä»¤ç»“æŸåæ‰§è¡Œï¼Œä¸»è¦æ˜¯å¸è½½åˆ é™¤Nginxçš„ä¸å†è¢«ä½¿ç”¨çš„ä¾èµ–åŒ…ã€‚
sudo apt-get remove nginx-full nginx-common #å¸è½½åˆ é™¤ä¸¤ä¸ªä¸»è¦çš„åŒ…ã€‚
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;nginx-å‘½ä»¤&quot;&gt;Nginx å‘½ä»¤&lt;/h2&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;- sudo nginx #æ‰“å¼€ nginx
- nginx -s reload|reopen|stop|quit #é‡æ–°åŠ è½½é…ç½®|é‡å¯|åœæ­¢|é€€å‡º nginx
- nginx -t #æµ‹è¯•é…ç½®æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯

nginx [-?hvVtq] [-s signal] [-c filename] [-p prefix] [-g directives]

-?,-h : æ‰“å¼€å¸®åŠ©ä¿¡æ¯
-v : æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯å¹¶é€€å‡º
-V : æ˜¾ç¤ºç‰ˆæœ¬å’Œé…ç½®é€‰é¡¹ä¿¡æ¯ï¼Œç„¶åé€€å‡º
-t : æ£€æµ‹é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯ï¼Œç„¶åé€€å‡º
-q : åœ¨æ£€æµ‹é…ç½®æ–‡ä»¶æœŸé—´å±è”½éé”™è¯¯ä¿¡æ¯
-s signal : ç»™ä¸€ä¸ª nginx ä¸»è¿›ç¨‹å‘é€ä¿¡å·ï¼šstopï¼ˆåœæ­¢ï¼‰, quitï¼ˆé€€å‡ºï¼‰, reopenï¼ˆé‡å¯ï¼‰, reloadï¼ˆé‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼‰
-p prefix : è®¾ç½®å‰ç¼€è·¯å¾„ï¼ˆé»˜è®¤æ˜¯ï¼š/usr/local/Cellar/nginx/1.2.6/ï¼‰
-c filename : è®¾ç½®é…ç½®æ–‡ä»¶ï¼ˆé»˜è®¤æ˜¯ï¼š/usr/local/etc/nginx/nginx.confï¼‰
-g directives : è®¾ç½®é…ç½®æ–‡ä»¶å¤–çš„å…¨å±€æŒ‡ä»¤
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;éªŒè¯é…ç½®æ˜¯å¦æ­£ç¡®: nginx -t&lt;br/&gt;é…ç½®æ–‡ä»¶ä¿®æ”¹é‡è£…è½½å‘½ä»¤ï¼šnginx -s reload&lt;/p&gt;
&lt;p&gt;åœæ­¢nginx: &lt;code&gt;sudo systemctl stop nginx&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å¯åŠ¨nginx: &lt;code&gt;sudo systemctl start nginx&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;é»˜è®¤ï¼Œnginxæ˜¯éšç€ç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™è‡ªåŠ¨è¿è¡Œï¼Œ&lt;code&gt;sudo systemctl disable nginx&lt;/code&gt;å¯ä»¥ç¦æ­¢nginxå¼€æœºå¯åŠ¨.&lt;/p&gt;
&lt;p&gt;é‡æ–°é…ç½®nginxå¼€æœºè‡ªåŠ¨å¯åŠ¨: &lt;code&gt;sudo systemctl enable nginx&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;é‡å¯nginx: &lt;code&gt;sudo systemctl restart nginx&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å¹³æ»‘åŠ è½½é…ç½®(ä¸ä¼šæ–­å¼€ç”¨æˆ·è®¿é—®ï¼‰ï¼š&lt;code&gt;sudo systemctl reload nginx&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;reloadï¼Œé‡æ–°åŠ è½½çš„æ„æ€ï¼Œreloadä¼šé‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼ŒnginxæœåŠ¡ä¸ä¼šä¸­æ–­ï¼Œè€Œä¸”reloadæ—¶ä¼šæµ‹è¯•confè¯­æ³•ç­‰ï¼Œå¦‚æœå‡ºé”™ä¼šrollbackç”¨ä¸Šä¸€æ¬¡æ­£ç¡®é…ç½®æ–‡ä»¶ä¿æŒæ­£å¸¸è¿è¡Œã€‚&lt;/li&gt;
&lt;li&gt;restartï¼Œé‡å¯ï¼Œä¼šé‡å¯nginxæœåŠ¡ã€‚è¿™ä¸ªé‡å¯ä¼šé€ æˆæœåŠ¡ä¸€ç¬é—´çš„ä¸­æ–­ï¼Œå½“ç„¶å¦‚æœé…ç½®æ–‡ä»¶å‡ºé”™ä¼šå¯¼è‡´æœåŠ¡å¯åŠ¨å¤±è´¥ï¼Œé‚£å°±æ˜¯æ›´é•¿æ—¶é—´çš„æœåŠ¡ä¸­æ–­äº†ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;nginx-ç›®å½•ç»“æ„&quot;&gt;Nginx ç›®å½•ç»“æ„&lt;/h2&gt;
&lt;p&gt;ç½‘ç«™æ–‡ä»¶ä½ç½®&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;/var/www/html: ç½‘ç«™æ–‡ä»¶å­˜æ”¾çš„åœ°æ–¹, é»˜è®¤åªæœ‰æˆ‘ä»¬ä¸Šé¢çœ‹åˆ°nginxé¡µé¢ï¼Œå¯ä»¥é€šè¿‡æ”¹å˜nginxé…ç½®æ–‡ä»¶çš„æ–¹å¼æ¥ä¿®æ”¹è¿™ä¸ªä½ç½®ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æœåŠ¡å™¨é…ç½®&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;/etc/nginx: nginxé…ç½®æ–‡ä»¶ç›®å½•ã€‚æ‰€æœ‰çš„nginxé…ç½®æ–‡ä»¶éƒ½åœ¨è¿™é‡Œã€‚&lt;/li&gt;
&lt;li&gt;/etc/nginx/nginx.conf: Nginxçš„ä¸»é…ç½®æ–‡ä»¶. å¯ä»¥ä¿®æ”¹ä»–æ¥æ”¹å˜nginxçš„å…¨å±€é…ç½®ã€‚&lt;/li&gt;
&lt;li&gt;/etc/nginx/sites-available/: è¿™ä¸ªç›®å½•å­˜å‚¨æ¯ä¸€ä¸ªç½‘ç«™çš„&quot;server blocks&quot;ã€‚nginxé€šå¸¸ä¸ä¼šä½¿ç”¨è¿™äº›é…ç½®ï¼Œé™¤éå®ƒä»¬é™ªè¿æ¥åˆ° sites-enabled ç›®å½• (see below)ã€‚ä¸€èˆ¬æ‰€æœ‰çš„server block é…ç½®éƒ½åœ¨è¿™ä¸ªç›®å½•ä¸­è®¾ç½®ï¼Œç„¶åè½¯è¿æ¥åˆ°åˆ«çš„ç›®å½• ã€‚&lt;/li&gt;
&lt;li&gt;/etc/nginx/sites-enabled/: è¿™ä¸ªç›®å½•å­˜å‚¨ç”Ÿæ•ˆçš„ &quot;server blocks&quot; é…ç½®. é€šå¸¸,è¿™ä¸ªé…ç½®éƒ½æ˜¯é“¾æ¥åˆ° sites-availableç›®å½•ä¸­çš„é…ç½®æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;/etc/nginx/snippets: è¿™ä¸ªç›®å½•ä¸»è¦å¯ä»¥åŒ…å«åœ¨å…¶å®ƒnginxé…ç½®æ–‡ä»¶ä¸­çš„é…ç½®ç‰‡æ®µã€‚é‡å¤çš„é…ç½®éƒ½å¯ä»¥é‡æ„ä¸ºé…ç½®ç‰‡æ®µã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æ—¥å¿—æ–‡ä»¶&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;/var/log/nginx/access.log: æ¯ä¸€ä¸ªè®¿é—®è¯·æ±‚éƒ½ä¼šè®°å½•åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œé™¤éä½ åšäº†å…¶å®ƒè®¾ç½®&lt;/li&gt;
&lt;li&gt;/var/log/nginx/error.log: ä»»ä½•Nginxçš„é”™è¯¯ä¿¡æ¯éƒ½ä¼šè®°å½•åˆ°è¿™ä¸ªæ–‡ä»¶ä¸­&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;nginxçƒ­éƒ¨ç½²&quot;&gt;Nginxçƒ­éƒ¨ç½²&lt;/h2&gt;
&lt;p&gt;æ‰€è°“çƒ­éƒ¨ç½²ï¼Œå°±æ˜¯é…ç½®æ–‡ä»¶nginx.confä¿®æ”¹åï¼Œä¸éœ€è¦stop Nginxï¼Œä¸éœ€è¦ä¸­æ–­è¯·æ±‚ï¼Œå°±èƒ½è®©é…ç½®æ–‡ä»¶ç”Ÿæ•ˆï¼ï¼ˆnginx -s reload é‡æ–°åŠ è½½/nginx -tæ£€æŸ¥é…ç½®/nginx -s stopï¼‰&lt;/p&gt;
&lt;p&gt;é€šè¿‡ä¸Šæ–‡æˆ‘ä»¬å·²ç»çŸ¥é“workerè¿›ç¨‹è´Ÿè´£å¤„ç†å…·ä½“çš„è¯·æ±‚ï¼Œé‚£ä¹ˆå¦‚æœæƒ³è¾¾åˆ°çƒ­éƒ¨ç½²çš„æ•ˆæœï¼Œå¯ä»¥æƒ³è±¡ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ–¹æ¡ˆä¸€ï¼š&lt;/strong&gt; ä¿®æ”¹é…ç½®æ–‡ä»¶nginx.confåï¼Œä¸»è¿›ç¨‹masterè´Ÿè´£æ¨é€ç»™wokerè¿›ç¨‹æ›´æ–°é…ç½®ä¿¡æ¯ï¼Œwokerè¿›ç¨‹æ”¶åˆ°ä¿¡æ¯åï¼Œæ›´æ–°è¿›ç¨‹å†…éƒ¨çš„çº¿ç¨‹ä¿¡æ¯ã€‚ï¼ˆæœ‰ç‚¹valatileçš„å‘³é“ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ–¹æ¡ˆäºŒï¼š&lt;/strong&gt; ä¿®æ”¹é…ç½®æ–‡ä»¶nginx.confåï¼Œé‡æ–°ç”Ÿæˆæ–°çš„workerè¿›ç¨‹ï¼Œå½“ç„¶ä¼šä»¥æ–°çš„é…ç½®è¿›è¡Œå¤„ç†è¯·æ±‚ï¼Œè€Œä¸”æ–°çš„è¯·æ±‚å¿…é¡»éƒ½äº¤ç»™æ–°çš„workerè¿›ç¨‹ï¼Œè‡³äºè€çš„workerè¿›ç¨‹ï¼Œç­‰æŠŠé‚£äº›ä»¥å‰çš„è¯·æ±‚å¤„ç†å®Œæ¯•åï¼Œkillæ‰å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;Nginxé‡‡ç”¨çš„å°±æ˜¯æ–¹æ¡ˆäºŒæ¥è¾¾åˆ°çƒ­éƒ¨ç½²çš„ï¼&lt;/p&gt;
&lt;h2 id=&quot;nginx-è¿è¡ŒåŸç†&quot;&gt;Nginx è¿è¡ŒåŸç†&lt;/h2&gt;
&lt;h3 id=&quot;master-workeræ¨¡å¼&quot;&gt;Master-Workeræ¨¡å¼&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/owen2016/pic-hub/raw/master/1610378134_20200624162443069_232260949.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¯åŠ¨Nginxåï¼Œå…¶å®å°±æ˜¯åœ¨80ç«¯å£å¯åŠ¨äº†SocketæœåŠ¡è¿›è¡Œç›‘å¬ï¼Œå¦‚å›¾æ‰€ç¤ºï¼ŒNginxæ¶‰åŠMasterè¿›ç¨‹å’ŒWorkerè¿›ç¨‹&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/owen2016/pic-hub/raw/master/1610378134_20200624162509036_171276403.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Masterè¿›ç¨‹çš„ä½œç”¨æ˜¯ï¼Ÿ&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;è¯»å–å¹¶éªŒè¯é…ç½®æ–‡ä»¶nginx.confï¼›ç®¡ç†workerè¿›ç¨‹ï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Workerè¿›ç¨‹çš„ä½œç”¨æ˜¯ï¼Ÿ&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æ¯ä¸€ä¸ªWorkerè¿›ç¨‹éƒ½ç»´æŠ¤ä¸€ä¸ªçº¿ç¨‹ï¼ˆé¿å…çº¿ç¨‹åˆ‡æ¢ï¼‰ï¼Œå¤„ç†è¿æ¥å’Œè¯·æ±‚ï¼›æ³¨æ„Workerè¿›ç¨‹çš„ä¸ªæ•°ç”±é…ç½®æ–‡ä»¶å†³å®šï¼Œä¸€èˆ¬å’ŒCPUä¸ªæ•°ç›¸å…³ï¼ˆæœ‰åˆ©äºè¿›ç¨‹åˆ‡æ¢ï¼‰ï¼Œé…ç½®å‡ ä¸ªå°±æœ‰å‡ ä¸ªWorkerè¿›ç¨‹ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;é¦–å…ˆï¼ŒNginxåœ¨å¯åŠ¨æ—¶ï¼Œä¼šè§£æé…ç½®æ–‡ä»¶ï¼Œå¾—åˆ°éœ€è¦ç›‘å¬çš„ç«¯å£ä¸IPåœ°å€ï¼Œç„¶ååœ¨Nginxçš„masterè¿›ç¨‹é‡Œé¢ï¼Œå…ˆåˆå§‹åŒ–å¥½è¿™ä¸ªç›‘æ§çš„socket(åˆ›å»ºsocketï¼Œè®¾ç½®addrreuseç­‰é€‰é¡¹ï¼Œç»‘å®šåˆ°æŒ‡å®šçš„IPåœ°å€ç«¯å£ï¼Œå†listen)ï¼Œç„¶åå†fork(ä¸€ä¸ªç°æœ‰è¿›ç¨‹å¯ä»¥è°ƒç”¨forkå‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°è¿›ç¨‹ã€‚ç”±forkåˆ›å»ºçš„æ–°è¿›ç¨‹è¢«ç§°ä¸ºå­è¿›ç¨‹ )å‡ºå¤šä¸ªå­è¿›ç¨‹å‡ºæ¥ï¼Œç„¶åå­è¿›ç¨‹ä¼šç«äº‰acceptæ–°çš„è¿æ¥ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶ï¼Œå®¢æˆ·ç«¯å°±å¯ä»¥å‘Nginxå‘èµ·è¿æ¥äº†ã€‚å½“å®¢æˆ·ç«¯ä¸Nginxè¿›è¡Œä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸Nginxå»ºç«‹å¥½ä¸€ä¸ªè¿æ¥åï¼ŒæŸä¸€ä¸ªå­è¿›ç¨‹ä¼šacceptæˆåŠŸï¼Œå¾—åˆ°è¿™ä¸ªå»ºç«‹å¥½çš„è¿æ¥çš„socketï¼Œç„¶ååˆ›å»ºNginxå¯¹è¿æ¥çš„å°è£…ï¼Œå³ngx_connection_tç»“æ„ä½“ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ç€ï¼Œè®¾ç½®è¯»å†™äº‹ä»¶å¤„ç†å‡½æ•°å¹¶æ·»åŠ è¯»å†™äº‹ä»¶æ¥ä¸å®¢æˆ·ç«¯è¿›è¡Œæ•°æ®çš„äº¤æ¢ã€‚æœ€åï¼ŒNginxæˆ–å®¢æˆ·ç«¯æ¥ä¸»åŠ¨å…³æ‰è¿æ¥&lt;/p&gt;
&lt;h3 id=&quot;nginxå¦‚ä½•åšåˆ°é«˜å¹¶å‘ä¸‹çš„é«˜æ•ˆå¤„ç†ï¼Ÿ&quot;&gt;Nginxå¦‚ä½•åšåˆ°é«˜å¹¶å‘ä¸‹çš„é«˜æ•ˆå¤„ç†ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;ä¸Šæ–‡å·²ç»æåŠNginxçš„workerè¿›ç¨‹ä¸ªæ•°ä¸CPUç»‘å®šã€workerè¿›ç¨‹å†…éƒ¨åŒ…å«ä¸€ä¸ªçº¿ç¨‹é«˜æ•ˆå›ç¯å¤„ç†è¯·æ±‚ï¼Œè¿™çš„ç¡®æœ‰åŠ©äºæ•ˆç‡ï¼Œä½†è¿™æ˜¯ä¸å¤Ÿçš„ã€‚&lt;/p&gt;
&lt;p&gt;ä½œä¸ºä¸“ä¸šçš„ç¨‹åºå‘˜ï¼Œæˆ‘ä»¬å¯ä»¥å¼€ä¸€ä¸‹è„‘æ´ï¼šBIO/NIO/AIOã€å¼‚æ­¥/åŒæ­¥ã€é˜»å¡/éé˜»å¡...&lt;/p&gt;
&lt;p&gt;è¦åŒæ—¶å¤„ç†é‚£ä¹ˆå¤šçš„è¯·æ±‚ï¼Œè¦çŸ¥é“ï¼Œæœ‰çš„è¯·æ±‚éœ€è¦å‘ç”ŸIOï¼Œå¯èƒ½éœ€è¦å¾ˆé•¿æ—¶é—´ï¼Œå¦‚æœç­‰ç€å®ƒï¼Œå°±ä¼šæ‹–æ…¢workerçš„å¤„ç†é€Ÿåº¦ã€‚&lt;/p&gt;
&lt;p&gt;Nginxé‡‡ç”¨äº†Linuxçš„&lt;strong&gt;epollæ¨¡å‹&lt;/strong&gt;ï¼Œepollæ¨¡å‹åŸºäºäº‹ä»¶é©±åŠ¨æœºåˆ¶ï¼Œå®ƒå¯ä»¥ç›‘æ§å¤šä¸ªäº‹ä»¶æ˜¯å¦å‡†å¤‡å®Œæ¯•ï¼Œå¦‚æœOKï¼Œé‚£ä¹ˆæ”¾å…¥epollé˜Ÿåˆ—ä¸­ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯å¼‚æ­¥çš„ã€‚workeråªéœ€è¦ä»epollé˜Ÿåˆ—å¾ªç¯å¤„ç†å³å¯ã€‚&lt;/p&gt;
&lt;h2 id=&quot;nginx-é«˜å¯ç”¨&quot;&gt;Nginx é«˜å¯ç”¨&lt;/h2&gt;
&lt;p&gt;Nginxæ—¢ç„¶ä½œä¸ºå…¥å£ç½‘å…³ï¼Œå¾ˆé‡è¦ï¼Œå¦‚æœå‡ºç°å•ç‚¹é—®é¢˜ï¼Œæ˜¾ç„¶æ˜¯ä¸å¯æ¥å—çš„ã€‚&lt;/p&gt;
&lt;p&gt;ç­”æ¡ˆæ˜¯ï¼š&lt;strong&gt;Keepalived+Nginx&lt;/strong&gt;å®ç°é«˜å¯ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;Keepalivedæ˜¯ä¸€ä¸ªé«˜å¯ç”¨è§£å†³æ–¹æ¡ˆï¼Œä¸»è¦æ˜¯ç”¨æ¥é˜²æ­¢æœåŠ¡å™¨å•ç‚¹å‘ç”Ÿæ•…éšœï¼Œå¯ä»¥é€šè¿‡å’ŒNginxé…åˆæ¥å®ç°WebæœåŠ¡çš„é«˜å¯ç”¨ã€‚ï¼ˆå…¶å®ï¼ŒKeepalivedä¸ä»…ä»…å¯ä»¥å’ŒNginxé…åˆï¼Œè¿˜å¯ä»¥å’Œå¾ˆå¤šå…¶ä»–æœåŠ¡é…åˆï¼‰&lt;/p&gt;
&lt;p&gt;Keepalived+Nginxå®ç°é«˜å¯ç”¨çš„æ€è·¯ï¼š&lt;br/&gt;ç¬¬ä¸€ï¼šè¯·æ±‚ä¸è¦ç›´æ¥æ‰“åˆ°Nginxä¸Šï¼Œåº”è¯¥å…ˆé€šè¿‡Keepalivedï¼ˆè¿™å°±æ˜¯æ‰€è°“è™šæ‹ŸIPï¼ŒVIPï¼‰&lt;br/&gt;ç¬¬äºŒï¼šKeepalivedåº”è¯¥èƒ½ç›‘æ§Nginxçš„ç”Ÿå‘½çŠ¶æ€ï¼ˆæä¾›ä¸€ä¸ªç”¨æˆ·è‡ªå®šä¹‰çš„è„šæœ¬ï¼Œå®šæœŸæ£€æŸ¥Nginxè¿›ç¨‹çŠ¶æ€ï¼Œè¿›è¡Œæƒé‡å˜åŒ–,ï¼Œä»è€Œå®ç°Nginxæ•…éšœåˆ‡æ¢ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/owen2016/pic-hub/raw/master/1610378135_20200624172822781_380420450.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Mon, 11 Jan 2021 16:34:00 +0000</pubDate>
<dc:creator>ITèƒ–</dc:creator>
<og:description>Nginxä¸­æ–‡æ–‡æ¡£ - https://www.nginx.cn/doc/ Nginx (&amp;amp;quot;engine x&amp;amp;quot;) æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ HTTP å’Œ åå‘ä»£ç† æœåŠ¡å™¨ï¼Œä¹Ÿ</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/FLY_DREAM/p/14265110.html</dc:identifier>
</item>
<item>
<title>æˆ‘æ˜¯å¦‚ä½•åœ¨çŸ­æœŸå†…å¿«é€ŸæŒæ¡Dubboçš„åŸç†å’Œæºç çš„ï¼ˆçº¯å¹²è´§ï¼‰ï¼Ÿ - å†°æ²³å›¢é˜Ÿ</title>
<link>http://www.cnblogs.com/binghe001/p/14264989.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/binghe001/p/14264989.html</guid>
<description>&lt;h2 id=&quot;å†™åœ¨å‰é¢&quot;&gt;å†™åœ¨å‰é¢&lt;/h2&gt;
&lt;p&gt;ä¸Šå‘¨ï¼Œåœ¨ã€Dubboç³»åˆ—ä¸“é¢˜ã€‘ä¸­æ›´æ–°äº†ä¸¤ç¯‡æ–‡ç« ã€Š&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=Mzg4MjU0OTM1OA==&amp;amp;mid=2247489794&amp;amp;idx=1&amp;amp;sn=aa9efb732ac7fe3d2bc927c1491cae57&amp;amp;chksm=cf55ae03f82227157bb69cb487df2081b5b623d173b1df603be66347692acec56d455da6aae1&amp;amp;token=942113583&amp;amp;lang=zh_CN#rd&quot; target=&quot;_blank&quot;&gt;å†°æ²³å¼€å§‹å¯¹Dubboä¸‹æ‰‹äº†ï¼&lt;/a&gt;ã€‹å’Œã€Š&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=Mzg4MjU0OTM1OA==&amp;amp;mid=2247489831&amp;amp;idx=1&amp;amp;sn=e1126303a91f8fccb6154196695c5e6e&amp;amp;chksm=cf55ae26f82227302f71ced14c0aa312f631c8f03df65650dd3a49dc7fa9f339685342c38f5a&amp;amp;token=942113583&amp;amp;lang=zh_CN#rd&quot; target=&quot;_blank&quot;&gt;ä¿¯ç°Dubboå…¨å±€ï¼Œé˜…è¯»æºç å‰å¿…é¡»æŒæ¡è¿™äº›ï¼ï¼&lt;/a&gt;ã€‹ï¼Œæ”¶åˆ°äº†å¾ˆå¤šå°ä¼™ä¼´çš„å¾®ä¿¡ç§èŠæ¶ˆæ¯ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯åœ¨è¯¢é—®å¦‚ä½•å¿«é€Ÿçš„æŒæ¡Dubboçš„åŸç†å’Œæºç ã€‚é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä¹Ÿåœ¨æ€è€ƒå¦‚ä½•ä»¥æ›´ç®€å•ã€æ˜“æ‡‚çš„æ–¹å¼è®©å°ä¼™ä¼´ä»¬æ›´å¥½çš„æŒæ¡Dubboçš„åŸç†å’Œæºç ã€‚ä»Šå¤©ï¼Œæˆ‘å°±ä¸ºå°ä¼™ä¼´ä»¬åˆ†äº«ä¸‹æˆ‘æ˜¯å¦‚ä½•å¿«é€ŸæŒæ¡Dubboçš„åŸç†å’Œæºç çš„ã€‚&lt;/p&gt;
&lt;p&gt;æ–‡ç« å·²æ”¶å½•åˆ°ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/sunshinelyz/technology-binghe&quot; target=&quot;_blank&quot;&gt;https://github.com/sunshinelyz/technology-binghe&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://gitee.com/binghe001/technology-binghe&quot; target=&quot;_blank&quot;&gt;https://gitee.com/binghe001/technology-binghe&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;é˜…è¯»æºç çš„å‰æ&quot;&gt;é˜…è¯»æºç çš„å‰æ&lt;/h2&gt;
&lt;p&gt;é˜…è¯»æŸä¸€é¡¹æŠ€æœ¯æ¡†æ¶ï¼Œæˆ–è€…è¯´å¼€æºé¡¹ç›®çš„æºç å‰ï¼Œä½ å¿…é¡»äº†è§£è¿™ä¸ªæ¡†æ¶æ˜¯å¹²å•¥ç”¨çš„ï¼Œè¯´ç™½äº†ï¼Œå°±æ˜¯ä½ è‡³å°‘äº†è§£è¿™ä¸ªæ¡†æ¶è¯¥æ€ä¹ˆç”¨ï¼Œåœ¨ä»€ä¹ˆåœºæ™¯ä¸‹ç”¨ï¼Œä½¿ç”¨çš„è¿‡ç¨‹ä¸­ä¼šé‡åˆ°å“ªäº›å‘ï¼Œå¦‚ä½•è§£å†³ã€‚è€Œå­¦ä¹ ä¸€ä¸ªæ¡†æ¶ï¼Œæœ€ç®€å•æœ‰æ•ˆçš„æ–¹å¼å°±æ˜¯å®ƒçš„å®˜æ–¹æ–‡æ¡£ã€‚Dubboä¹Ÿä¸ä¾‹å¤–ï¼Œæˆ‘åœ¨å­¦ä¹ Dubboçš„æ—¶å€™ï¼Œä¹Ÿæ˜¯é¦–å…ˆçœ‹çš„Dubboçš„å®˜æ–¹æ–‡æ¡£ï¼ŒåŸºæœ¬æ²¡çœ‹å…¶ä»–çš„æ–‡ç« æˆ–è€…èµ„æ–™ã€‚ä¸ºå•¥ï¼Ÿå› ä¸ºDubboçš„å®˜æ–¹æ–‡æ¡£æ˜¯æœ€æƒå¨çš„ï¼Œæ˜¯æœ€å¯ä¿¡çš„ã€‚&lt;/p&gt;
&lt;p&gt;å³ä½¿ä½ åœ¨é¡¹ç›®ä¸­æ²¡æœ‰ä½¿ç”¨è¿‡Dubboæ¡†æ¶ï¼Œä½ ä¹Ÿå¯ä»¥æŒ‰ç…§Dubboçš„å®˜æ–¹æ–‡æ¡£åŸºäºDubboå†™ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ç¨‹åºï¼Œé€šè¿‡ç¤ºä¾‹èƒ½å¤Ÿè®©è‡ªå·±å¿«é€Ÿçš„äº†è§£Dubboã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä¸ºä½•è¦é˜…è¯»æºç &quot;&gt;ä¸ºä½•è¦é˜…è¯»æºç &lt;/h2&gt;
&lt;p&gt;é˜…è¯»æºç å‰ï¼Œä½ è¦æ¸…æ¥šçš„çŸ¥é“è‡ªå·±ä¸ºä½•è¦é˜…è¯»æºç ï¼Œå¸¦ç€é—®é¢˜å»çœ‹æºç ã€‚ &lt;strong&gt;æƒ³è¦çœ‹æ¡†æ¶çš„æºç ï¼Œæ— å¤–ä¹ä¸¤ç§æƒ…å†µï¼šä¸€ç§å°±æ˜¯åœ¨é¡¹ç›®ä¸­é‡åˆ°äº†æ— æ³•é€šè¿‡æ–‡æ¡£æˆ–è€…å…¶ä»–æŠ€æœ¯èµ„æ–™è§£å†³çš„é—®é¢˜ï¼Œæƒ³é€šè¿‡æºç æ¥æ‰¾è§£å†³æ–¹æ¡ˆï¼›å¦ä¸€ç§å°±æ˜¯å¯¹æ¡†æ¶çš„åº•å±‚å®ç°å¥½å¥‡ï¼Œè¿™ä¹ˆç‰›é€¼çš„æŠ€æœ¯æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ&lt;/strong&gt; è€Œæˆ‘ï¼ŒåŸºæœ¬å±äºåè€…ã€‚åœ¨æˆ‘ç»å†çš„ç”¨æˆ·ä¸Šäº¿çš„é«˜å¹¶å‘ç”µå•†ç³»ç»Ÿä¸­ï¼Œéƒ¨åˆ†æ ¸å¿ƒå­ç³»ç»Ÿä½¿ç”¨äº†Dubboï¼Œç»è¿‡æ€§èƒ½è°ƒä¼˜ï¼ŒDubboçš„è¡¨ç°è‰¯å¥½ã€‚æˆ‘å°±å¾ˆå¥½å¥‡ï¼šDubboæ˜¯å¦‚ä½•æŠ—ä½è¿™ä¹ˆé«˜çš„å¹¶å‘çš„ï¼Ÿå®ƒå†…éƒ¨æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å…¶æ¬¡ï¼Œé˜…è¯»æºç å‰ï¼Œä½ è¦ä¸ºè‡ªå·±æå‡ ä¸ªé—®é¢˜ï¼Œæ¯”å¦‚æˆ‘åœ¨çœ‹Dubboæºç å‰ï¼Œå°±æ˜ç¡®äº†å¾ˆå¤šé—®é¢˜ï¼Œæ¯”å¦‚ï¼šDubboæ˜¯å¦‚ä½•å®ç°RPCæœåŠ¡çš„ï¼ŸæœåŠ¡æä¾›è€…å’Œè°ƒç”¨è€…ä¹‹é—´æ˜¯å¦‚ä½•äº¤äº’çš„ï¼ŸDubboæ˜¯å¦‚ä½•å°è£…ç½‘ç»œè°ƒç”¨ä½¿å…¶çœ‹èµ·æ¥å’Œè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·ï¼ŸDubboåˆæ˜¯å¦‚ä½•å®ç°æœåŠ¡æ²»ç†çš„ï¼Ÿç­‰ç­‰ä¸€ç³»åˆ—çš„é—®é¢˜ï¼Œæˆ‘è®°å¾—æˆ‘å½“æ—¶çœ‹æºç å‰ï¼Œè¶³è¶³ç»™è‡ªå·±æäº†ä¸Šç™¾ä¸ªé—®é¢˜ã€‚&lt;strong&gt;å¸¦ç€é—®é¢˜çœ‹æºç ï¼Œèƒ½å¤Ÿè®©ä½ äº‹åŠåŠŸå€ï¼Œä¸ä»…ä»…æ˜¯Dubboï¼Œå¯¹äºå…¶ä»–çš„æ¡†æ¶ï¼Œä¹Ÿæ˜¯å¦‚æ­¤ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿˜æœ‰å°±æ˜¯ï¼Œä¸è¦ä¸ºäº†çœ‹æºç è€Œçœ‹æºç ï¼Œå¾ˆå¤šå°ä¼™ä¼´çœ‹äº†ä¸å°‘æ¡†æ¶çš„æºç ï¼Œå¯æ²¡è¿‡å¤šä¹…å°±å¿˜è®°äº†ï¼Œè·Ÿæ²¡çœ‹ä¸€æ ·ï¼Œè¿˜æµªè´¹äº†å¾ˆå¤šæ—¶é—´ã€‚è¿™ç§å°±æ˜¯å…¸å‹çš„ä¸ºäº†çœ‹æºç è€Œçœ‹æºç ï¼Œå¹¶æ²¡æœ‰å»æ·±ç©¶è¿™ä¸ªæ¡†æ¶çš„å®ç°åŸç†å’Œç»†èŠ‚ï¼Œé‡åˆ°çœ‹ä¸æ‡‚çš„ï¼Œå¯ä»¥å…ˆè·³è¿‡ï¼Œè®°å½•ä¸‹ï¼Œç­‰æŠŠç›¸å…³è”çš„ä»£ç çœ‹æ‡‚åï¼Œå†åè¿‡å¤´æ¥é‡æ–°æ¢³ç†æ²¡æœ‰çœ‹æ‡‚çš„æºç ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ¡†æ¶ä½¿ç”¨äº†å“ªäº›æŠ€æœ¯&quot;&gt;æ¡†æ¶ä½¿ç”¨äº†å“ªäº›æŠ€æœ¯&lt;/h2&gt;
&lt;p&gt;é˜…è¯»æºç å‰ï¼Œè¿˜æœ‰ä¸€é¡¹é‡è¦çš„å·¥ä½œå°±æ˜¯ï¼Œè¦äº†è§£æ¡†æ¶ä¸­ä½¿ç”¨äº†å“ªäº›æŠ€æœ¯ã€‚å¯¹æ‰€ç”¨çš„æŠ€æœ¯è¦æœ‰ä¸ªå¤§ä½“çš„äº†è§£ã€‚æ¯”å¦‚ï¼šåœ¨Dubboä¸­ä½¿ç”¨äº†SPIã€æ—¶é—´è½®å®šæ—¶ä»»åŠ¡ã€æœåŠ¡æ³¨å†Œä¸å‘ç°ã€Nettyã€åºåˆ—åŒ–ã€è‡ªå®šä¹‰åè®®ç­‰ç­‰æŠ€æœ¯ã€‚æ‰€ä»¥ï¼Œåœ¨é˜…è¯»æºç å‰ï¼Œå…ˆè¦å¯¹è¿™äº›æŠ€æœ¯æœ‰ä¸ªå¤§ä½“çš„äº†è§£ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚ï¼Œåœ¨çœ‹Dubboæºç å‰ï¼Œæˆ‘å°±å·²ç»äº†è§£åˆ°Dubboçš„ç½‘è·¯äº¤äº’åº•å±‚ä½¿ç”¨çš„Nettyï¼Œæ­£å¥½åœ¨æˆ‘å·¥ä½œä¸ä¹…çš„æ—¶å€™ï¼Œæˆ‘åˆæ·±å…¥ç ”ç©¶è¿‡Nettyçš„æºç ï¼Œè¿™å°±æœ‰åŠ©äºæˆ‘åœ¨çœ‹Dubboæºç æ—¶ï¼Œèƒ½å¤Ÿæ›´å¥½çš„ç†è§£Dubboçš„ç½‘ç»œç¼–ç¨‹éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥è¯´ï¼Œå°ä¸Šä¸€åˆ†é’Ÿï¼Œå°ä¸‹åå¹´åŠŸï¼Œåœ¨çœ‹Dubboæºç å‰ï¼Œæˆ‘ä¹Ÿæ˜¯åšäº†å……åˆ†çš„å‡†å¤‡ã€‚&lt;/p&gt;
&lt;h2 id=&quot;é˜…è¯»æºç æ—¶æ³¨æ„ä»€ä¹ˆ&quot;&gt;é˜…è¯»æºç æ—¶æ³¨æ„ä»€ä¹ˆ&lt;/h2&gt;
&lt;p&gt;ä»»ä½•ä¸€é¡¹æŠ€æœ¯æ¡†æ¶ï¼Œæˆ–è€…è¯´å¼€æºé¡¹ç›®ï¼Œè‚¯å®šæ˜¯ä¸ºäº†è§£å†³æŸäº›åœºæ™¯è€Œç”Ÿçš„ï¼Œå°±æ¯”å¦‚Dubboï¼Œç›¸ä¿¡å°ä¼™ä¼´ä»¬éƒ½çŸ¥é“ï¼ŒDubboä½œä¸ºä¸€ä¸ªåˆ†å¸ƒå¼æœåŠ¡æ²»ç†æ¡†æ¶ï¼Œä¸€ä¸ªå…¸å‹çš„ä½¿ç”¨åœºæ™¯å°±æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;p&gt;å…¶æ¬¡ï¼Œä¸€ä¸ªä¼˜ç§€çš„æŠ€æœ¯æ¡†æ¶æˆ–å¼€æºé¡¹ç›®èƒŒåè‚¯å®šè•´å«ç€ä¼—å¤šå…¶ä»–æŠ€æœ¯çš„åŸç†ä¸å®ç°ã€‚æˆ‘ä»¬åŒæ ·æ˜¯ä»¥Dubboä¸ºä¾‹ï¼Œåœ¨Dubboä¸­ï¼Œä¸ºäº†å®ç°åœ¨åˆ†å¸ƒå¼åœºæ™¯ä¸‹ï¼Œè°ƒç”¨è¿œç¨‹RPCæœåŠ¡å°±åƒè°ƒç”¨æœ¬åœ°æœåŠ¡ä¸€æ ·ï¼Œå…¶è‡³å°‘éœ€è¦å®ç°å¦‚ä¸‹åŠŸèƒ½ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æœåŠ¡ä¹‹é—´åŠŸæ€§èƒ½çš„é€šä¿¡ã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡è°ƒç”¨éœ€è¦åšåˆ°è´Ÿè½½å‡è¡¡ã€é«˜å¯ç”¨ã€é™æµã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡æ²»ç†ã€‚&lt;/li&gt;
&lt;li&gt;é«˜å¯é ã€å®¹é”™ã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡èƒ½å¤Ÿè‡ªåŠ¨æ³¨å†Œå’Œå‘ç°ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;è€Œå®ç°è¿™äº›åŠŸèƒ½æ—¶ï¼ŒDubboå€ŸåŠ©äº†å“ªäº›ä¼˜ç§€çš„å¼€æºæ¡†æ¶ï¼Ÿè¿™äº›å¼€æºæ¡†æ¶Dubboæ˜¯å¦‚ä½•é›†æˆèµ·æ¥çš„ï¼Ÿæ˜¯ç¡¬ç¼–ç æ–¹å¼é›†æˆï¼Ÿè¿˜æ˜¯å…¶ä»–æ›´å¥½çš„æ–¹å¼ï¼Ÿè¿™äº›éƒ½æ˜¯éœ€è¦æˆ‘ä»¬åœ¨é˜…è¯»æºç çš„æ—¶å€™ï¼Œå»æºç ä¸­æ‰¾åˆ°ç­”æ¡ˆã€‚&lt;/p&gt;
&lt;h2 id=&quot;é˜…è¯»æºç çš„æ–¹å¼&quot;&gt;é˜…è¯»æºç çš„æ–¹å¼&lt;/h2&gt;
&lt;p&gt;æˆ‘æŠŠé˜…è¯»æºç çš„æ–¹å¼æ€»ç»“ä¸ºï¼š&lt;strong&gt;å…ˆæ•´ä½“å†å±€éƒ¨ï¼Œå…ˆå®è§‚å†å¾®è§‚ï¼Œå…ˆç²—ç•¥å†ç»†èŠ‚ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå°±æ˜¯åœ¨çœ‹æºç çš„æ˜¯æ—¶å€™ï¼Œå…ˆä»æ•´ä½“ä¸ŠæŠŠæ¡æºç çš„è®¾è®¡åŸç†å’Œè®¾è®¡ç†å¿µï¼Œå…ˆæ•´ä½“ä¸Šå¤§æ¦‚äº†è§£æºç æ˜¯å¦‚ä½•å®ç°çš„ã€‚æ¯”å¦‚åœ¨Dubboä¸­ï¼Œç½‘ç»œç¼–ç¨‹æ˜¯åŸºäºNettyå®ç°çš„ï¼Œä½ å°±å¯ä»¥å…ˆåšä¸ªäº†è§£ï¼ŒçŸ¥é“è¿™ä¹ˆå›äº‹ã€‚ä»æ•´ä½“ä¸ŠæŠŠæ¡åŸºæœ¬çš„æ¡†æ¶æºç åï¼Œå†ä»ç»†èŠ‚ä¸­æ­»ç£•å…·ä½“çš„å®ç°ï¼Œæ¯”å¦‚ï¼Œåœ¨Dubboä¸­æ˜¯å¦‚ä½•ä½¿ç”¨Nettyå®ç°ç½‘ç»œäº¤äº’çš„ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è®°ä½ï¼Œé˜…è¯»æºç æ—¶åˆ‡å¿Œåœ¨è¿˜æ²¡æœ‰ææ‡‚æ•´ä½“çš„è®¾è®¡åŸç†å’Œæ•´ä½“æºç è®¾è®¡å‰ï¼Œå°±å¼€å§‹æ­»æ‰£æºç çš„ç»†èŠ‚ã€‚å¦åˆ™ï¼Œä½ ä¼šåœ¨æºç é‡Œé¢è¿·å¤±è‡ªå·±ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;å¦‚ä½•éªŒè¯è‡ªå·±æŒæ¡äº†æºç ï¼Ÿ&quot;&gt;å¦‚ä½•éªŒè¯è‡ªå·±æŒæ¡äº†æºç ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;é˜…è¯»æºç å…‰çœ‹æºç è¿˜ä¸è¡Œï¼Œè¿˜è¦è‡ªå·±å»åŠ¨æ‰‹å®è·µï¼Œæ­£æ‰€è°“â€œå®è·µæ˜¯æŒæ¡æ•´ç†çš„å”¯ä¸€æ ‡å‡†â€ã€‚ä½ ä¸å®è·µï¼Œæ€ä¹ˆçŸ¥é“è‡ªå·±æ˜¯ä¸æ˜¯æŒæ¡äº†ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘æŠŠå®è·µéƒ¨åˆ†åˆ†ä¸ºä¸¤ä¸ªç»„æˆéƒ¨åˆ†ï¼š&lt;strong&gt;åœ¨çœ‹æºç çš„è¿‡ç¨‹ä¸­åŠ¨æ‰‹å®è·µï¼›åœ¨çœ‹æºç ååŠ¨æ‰‹å®è·µã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨çœ‹æºç çš„è¿‡ç¨‹ä¸­åŠ¨æ‰‹å®è·µå°±æ˜¯è¯´ï¼šåœ¨çœ‹æºç çš„è¿‡ç¨‹ä¸­ï¼Œå°†è‡ªå·±ä¸æ˜ç™½çš„åœ°æ–¹è®°å½•ä¸‹æ¥ï¼ŒæŸ¥é˜…å®˜ç½‘æ–‡æ¡£æˆ–è€…å…¶ä»–èµ„æ–™ï¼Œå¦‚æœæ˜¯ç”±äºè‡ªå·±çš„æŠ€æœ¯èƒ½åŠ›æœ‰æ¬ ç¼ºï¼Œçœ‹ä¸æ‡‚çš„ï¼Œå°±è¦åŠæ—¶ä¸ºè‡ªå·±å……ç”µæ¥è¡¥å……ç›¸å…³çš„çŸ¥è¯†ç‚¹äº†ã€‚å¦‚æœæ˜¯é‡åˆ°è‡ªå·±è®¤ä¸ºæ¯”è¾ƒå¥½çš„å®ç°æ–¹å¼æ—¶ï¼Œå¯ä»¥åœ¨æ¡†æ¶çš„ä»£ç ä¸Šä»¥æ³¨é‡Šçš„æ–¹å¼æ ‡è®°è‡ªå·±çš„ç†è§£ã€‚æ¯”å¦‚ï¼Œæˆ‘åœ¨çœ‹Dubboæºç çš„æ—¶å€™ï¼Œå°±æ ‡æ³¨äº†å¤§é‡çš„æ³¨é‡Šã€‚&lt;/p&gt;
&lt;p&gt;åœ¨çœ‹æºç åï¼Œä¸€å®šè¦åŠ¨æ‰‹å®æ“ã€‚çœ‹è¿‡Dubboçš„æ•´ä½“æºç åï¼Œå¦‚æœä½ è®¤ä¸ºè‡ªå·±æŒæ¡äº†Dubboï¼Œå°±ä¸å¦¨è‡ªå·±åŠ¨æ‰‹å®ç°ä¸€ä¸ªRPCæ¡†æ¶ï¼Œçœ‹çœ‹è‡ªå·±å®ç°çš„æ¡†æ¶ä¸Dubboæ¡†æ¶æœ‰å“ªäº›åŒºåˆ«ï¼Œä¸ºå•¥Dubboæ¡†æ¶æ˜¯è¿™æ ·å®ç°çš„ã€‚å†åè¿‡å¤´æ¥å¸¦ç€é—®é¢˜çœ‹Dubboçš„æºç ï¼Œä½ è‚¯å®šä¼šç†è§£çš„æ›´åŠ æ·±å…¥ã€‚è€Œæˆ‘ï¼Œåœ¨çœ‹å®ŒDubboæ¡†æ¶çš„æºç åï¼Œä¹Ÿæ˜¯è¿™æ ·åšçš„ã€‚&lt;/p&gt;
&lt;h2 id=&quot;é˜…è¯»æºç çš„æ€»ç»“&quot;&gt;é˜…è¯»æºç çš„æ€»ç»“&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;æœ€åï¼Œè·Ÿå°ä¼™ä¼´ä»¬é€éœ²ä¸‹ï¼šæˆ‘ä»å¼€å§‹çœ‹Dubboæºç ï¼Œåˆ°æŒæ¡Dubboçš„åŸç†å’Œæºç ï¼Œå‰å‰åååªç”¨äº†ä¸åˆ°ä¸¤ä¸ªæœˆã€‚è®°ä½ï¼Œé˜…è¯»æºç å‰ï¼Œä¸€å®šè¦æ˜ç¡®ä¸ºä½•è¯»æºç ï¼Œå¸¦ç€é—®é¢˜è¯»æºç ï¼Œå¯¹äºæºç ä¸­æ‰€æ¶‰åŠçš„å…¶ä»–æŠ€æœ¯æˆ–æ¡†æ¶ï¼Œä¸€å®šè¦æœ‰æ‰€äº†è§£ã€‚é˜…è¯»æºç çš„è¿‡ç¨‹ä¸­ï¼Œè¦éµå¾ªï¼šå…ˆæ•´ä½“å†å±€éƒ¨ï¼Œå…ˆå®è§‚å†å¾®è§‚ï¼Œå…ˆç²—ç•¥å†ç»†èŠ‚çš„åŸåˆ™ã€‚æœ€é‡è¦çš„ä¸€ç‚¹æ˜¯ï¼šåœ¨é˜…è¯»æºç çš„è¿‡ç¨‹ä¸­å’Œé˜…è¯»æºç åéƒ½è¦åŠ¨æ‰‹å®è·µã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¥½äº†ï¼Œä»Šå¤©å°±åˆ°è¿™å„¿å§ï¼Œæˆ‘æ˜¯å†°æ²³ï¼Œå¤§å®¶æœ‰å•¥é—®é¢˜å¯ä»¥åœ¨ä¸‹æ–¹ç•™è¨€ï¼Œä¹Ÿå¯ä»¥åŠ æˆ‘å¾®ä¿¡ï¼Œä¸€èµ·äº¤æµæŠ€æœ¯ï¼Œä¸€èµ·è¿›é˜¶ï¼Œä¸€èµ·ç‰›é€¼~~&lt;/strong&gt;&lt;/p&gt;
</description>
<pubDate>Mon, 11 Jan 2021 15:39:00 +0000</pubDate>
<dc:creator>å†°æ²³å›¢é˜Ÿ</dc:creator>
<og:description>å†™åœ¨å‰é¢ ä¸Šå‘¨ï¼Œåœ¨ã€Dubboç³»åˆ—ä¸“é¢˜ã€‘ä¸­æ›´æ–°äº†ä¸¤ç¯‡æ–‡ç« ã€Šå†°æ²³å¼€å§‹å¯¹Dubboä¸‹æ‰‹äº†ï¼ã€‹å’Œã€Šä¿¯ç°Dubboå…¨å±€ï¼Œé˜…è¯»æºç å‰å¿…é¡»æŒæ¡è¿™äº›ï¼ï¼ã€‹ï¼Œæ”¶åˆ°äº†å¾ˆå¤šå°ä¼™ä¼´çš„å¾®ä¿¡ç§èŠæ¶ˆæ¯ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯åœ¨è¯¢é—®å¦‚ä½•å¿«é€Ÿçš„</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/binghe001/p/14264989.html</dc:identifier>
</item>
<item>
<title>965ä¸ƒå¹´æˆ‘å¤±å»äº†ä»€ä¹ˆï¼Ÿå¾—åˆ°äº†ä»€ä¹ˆï¼Ÿ - é€ƒç¦»æ²™æ¼ </title>
<link>http://www.cnblogs.com/demingblog/p/14264979.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/demingblog/p/14264979.html</guid>
<description>&lt;p&gt;è¿‘å‡ å¹´â€œ996â€çš„è¯é¢˜çƒ­åº¦ä¸æ–­ï¼Œæˆ–è€…è¯´996è¯é¢˜åœ¨â€œäº’è”ç½‘ä»ä¸šè€…â€åœˆå­ä¸­çƒ­åº¦ä¸æ–­ã€‚ç„¶è€Œæ¯ä¸€æ¬¡ï¼Œæˆ‘éƒ½æ„Ÿè§‰è¿™ä¸ªè¯é¢˜â€œè·Ÿæˆ‘æ— å…³â€ï¼Œå› ä¸ºæˆ‘çœŸçš„965äº†ä¸ƒå¹´ã€‚æ›¾ç»æœ‰äººè¿™ä¹ˆè¯´æˆ‘ï¼šâ€œä½ éƒ½ä¸åƒä¸€ä¸ªç¨‹åºå‘˜ï¼Œç¨‹åºå‘˜å“ªæœ‰ä¸‹ç­è¿™ä¹ˆæ—©çš„ï¼Ÿâ€ã€‚æ˜¯çš„ï¼Œæˆ‘ç¡®å®ä¸åƒâ€œä¸»æµç¨‹åºå‘˜â€é‚£æ ·ï¼Œå³æ²¡æœ‰æœ‰996ï¼Œä¹Ÿä¸åƒåª’ä½“å£ä¸­æè¿°çš„é‚£æ ·â€œé»‘è‰²åŒè‚©åŒ…â€ï¼Œâ€œæ ¼å­è¡¬è¡«â€ã€‚&lt;br/&gt;æˆ‘ä¸æ˜¯ä¸€ä¸ªçˆ±è¹­çƒ­åº¦çš„äººï¼Œå®é™…ä¸Šæˆ‘å‡ ä¹ä¸æ€ä¹ˆå…³å¿ƒå¤§å®¶éƒ½çƒ­çƒˆè®¨è®ºçš„çƒ­åº¦è¯é¢˜ã€‚æˆ‘æ˜¯ä¸€ä¸ªâ€œè‡ªç§â€ã€â€œç†æ€§â€åˆ°åªå…³å¿ƒâ€œè‡ªå·±å…³å¿ƒçš„è¯é¢˜â€çš„äººï¼Œå®‰å®‰é™é™çš„åœ¨é‚£é‡Œï¼Œä»¿ä½›å¯¹æ•´ä¸ªä¸–ç•Œæ— å®³ã€‚æˆ‘åªæ˜¯æƒ³åœ¨è¿™ä¸ªæ—¶é—´ç‚¹å›é¡¾ä¸€ä¸‹è‡ªå·±è¿™7å¹´æ˜¯æ€ä¹ˆä¸€è·¯965è¿‡æ¥çš„ï¼Œå’Œ996ç›¸æ¯”ï¼Œæˆ‘å¤±å»äº†ä»€ä¹ˆï¼Ÿåˆå¾—åˆ°äº†ä»€ä¹ˆï¼Ÿ&lt;/p&gt;

&lt;h2 id=&quot;ç¬¬ä¸€å®¶å…¬å¸&quot;&gt;ç¬¬ä¸€å®¶å…¬å¸&lt;/h2&gt;
&lt;p&gt;æˆ‘äº2013å¹´æ¯•ä¸šï¼Œ7æœˆä»½çš„æ—¶å€™åŠ å…¥äº†ä¸€å®¶å…¬å¸ï¼Œåœ¨åŒ—äº¬äº”é“å£ã€‚3ä¸ªæœˆåˆšè½¬æ­£æˆ‘å°±ç¦»èŒäº†ã€‚ç¦»èŒçš„æ—¶å€™ï¼Œéƒ¨é—¨ç»ç†è·Ÿæˆ‘è°ˆè¯è¯´ï¼šâ€œçœŸæ˜¯ä¸å¥½æ„æ€ï¼Œä½ éƒ½æ¥3ä¸ªæœˆäº†ï¼Œç›´åˆ°ä»Šå¤©ç¦»èŒæˆ‘æ‰çŸ¥é“æˆ‘ä¸¤æ˜¯è€ä¹¡â€ï¼ˆä»–æ˜¯é©»é©¬åº—çš„ï¼Œæˆ‘æ˜¯ä¿¡é˜³çš„ï¼‰ã€‚åœ¨ä¸€ä¸ªæŠ€æœ¯éƒ¨é—¨äººæ•°ä¸è¿‡20äººçš„å…¬å¸ï¼Œéƒ¨é—¨ç»ç†ä¸è®¤è¯†æ‰‹åº•ä¸‹çš„äººï¼Œç¡®å®åº”è¯¥â€œä¸å¥½æ„æ€â€ã€‚è€Œæˆ‘ç¦»èŒçš„åŸå› åœ¨äºï¼Œä»–ä»¬åªæ˜¯æŠŠæˆ‘æ‹›è¿›å»ï¼Œå¹¶ä¸è®©æˆ‘å¹²æ´»ï¼ˆæ´»å¤ªå°‘ï¼‰ï¼Œå·¥èµ„ä¹Ÿæ˜¯æ‹–æ‹–æ‹‰æ‹‰ã€‚äºæ˜¯ï¼Œè¿™ç¬¬ä¸€ä»½3ä¸ªæœˆ955çš„å·¥ä½œç»“æŸäº†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç¬¬äºŒå®¶å…¬å¸&quot;&gt;ç¬¬äºŒå®¶å…¬å¸&lt;/h2&gt;
&lt;p&gt;ç¦»èŒçš„ä¸‹ä¸€å‘¨ï¼Œæˆ‘åŠ å…¥äº†ä¸€å®¶åˆ›ä¸šå…¬å¸ï¼ˆç»æœ‹å‹ä»‹ç»ï¼‰ï¼Œè¿™å®¶åˆ›ä¸šå…¬å¸æ°›å›´å¾ˆå¥½ï¼ŒCTOååˆ†ç»™åŠ›ã€‚åœ¨è¿™ä¸ªå›¢é˜Ÿé‡Œï¼Œæˆ‘åªå› ä¸ºä¸€æ¬¡â€œçªå‡»ä»»åŠ¡â€è¿›è¡Œäº†ä¸ºæœŸä¸€ä¸ªæœˆçš„995ç”Ÿæ´»ï¼Œå…¶ä»–çš„æ—¶é—´éƒ½æ˜¯965ã€‚åœ¨è¿™å®¶å…¬å¸å·¥ä½œçœŸçš„éå¸¸çˆ½ï¼ŒCTOèƒ½åŠ›è¶…å¼ºï¼Œä»–å³æ˜¯äº§å“ä¹Ÿæ˜¯æŠ€æœ¯çš„æ¶æ„ï¼Œä¹Ÿç®¡ä»»åŠ¡çš„æ‹†åˆ†ï¼Œä¹Ÿå®šé¡¹ç›®çš„è¿›åº¦å®‰æ’ã€‚æˆ‘ä»¬æ¯ä¸ªäººçš„å·¥ä½œéƒ½ååˆ†ç¡®å®šï¼Œç›®æ ‡ä¹Ÿååˆ†ç¡®å®šï¼Œä»–åœ¨trello ä¸­ç»™æ¯ä¸ªäººå»ºå¥½ä»»åŠ¡åˆ—è¡¨ï¼Œæˆ‘ä»¬è¿™äº›å¹²æ´»çš„äººå°±åƒæ˜¯æ‰“â€œæ¶ˆæ¶ˆä¹â€æ¸¸æˆä¸€æ ·ï¼ŒæŠŠæ¯ä¸€æ¡å¾…å®Œæˆçš„ä»»åŠ¡å†™å®Œï¼Œç„¶åæ‹–åˆ°å·²å®Œæˆåˆ—è¡¨ã€‚æ¯å¤©éƒ½èƒ½æ¶ˆé™¤å¥½å¤šæ¡ä»»åŠ¡ï¼Œå¤§å®¶çœ¼è§è¿™æ¯æ—¥ç›®æ ‡ä¸€ç‚¹ç‚¹è¾¾æˆï¼Œéå¸¸æœ‰æˆå°±æ„Ÿï¼Œæ¯å¤©éƒ½æ˜¯å‡†ç‚¹ä¸€èµ·ä¸‹ç­ï¼Œæ— æ¯”çš„å¼€å¿ƒå’Œå……å®ã€‚åœ¨è¿™é‡Œï¼Œæ²¡æœ‰æ—¶é—´çš„æµªè´¹ï¼Œååˆ†é«˜æ•ˆï¼Œä¹Ÿå°±æ— éœ€996äº†ã€‚&lt;br/&gt;ç„¶è€Œï¼Œä¸€å¹´åŠä¹‹åï¼Œå…¬å¸èèµ„æ²¡åˆ°ä½ï¼Œå‡ ä½åˆ›å§‹äººå¤šç•ªåŠªåŠ›ä¹‹ä¸‹ï¼Œè¿˜æ˜¯æ— åŠ›å›å¤©ï¼Œæˆ‘ä»¬æ‹¿ç€N+1é—æ†¾ç¦»èŒã€‚ç¦»èŒé‚£å¤©ï¼Œæˆ‘ä»¬åŒäº‹åœ¨äº”é“å£åƒé¥­èŠå¤©åˆ°å¾ˆä¹…ï¼Œååˆ†çš„ä¸èˆã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç¬¬ä¸‰å®¶å…¬å¸&quot;&gt;ç¬¬ä¸‰å®¶å…¬å¸&lt;/h2&gt;
&lt;p&gt;åœ¨ç¬¬äºŒå®¶å…¬å¸ç¦»èŒä¹‹åï¼Œæˆ‘æ•´ä¸ªäººæ‡µäº†2å¤©ã€‚æˆ‘è§‰å¾—æˆ‘ä»¬äº§å“åšçš„éå¸¸å¥½ï¼Œæˆ‘ä»¬å¹²çš„éå¸¸èµ·åŠ²ï¼Œæˆ‘ä¹Ÿéå¸¸å–œæ¬¢é‚£å®¶å…¬å¸çš„åŒäº‹ä»¥åŠå…¬å¸çš„æ°›å›´ã€‚æ€ä¹ˆå°±å¿½ç„¶è¦â€œåˆ†æ‰‹â€äº†å‘¢ï¼Ÿ23å²çš„æˆ‘ä»æƒ…æ„Ÿä¸Šæ— æ³•æ¥å—ï¼Œå› æ­¤å¹¶æ²¡æœ‰æ€¥äºæ‰¾ä¸‹ä¸€ä»½å·¥ä½œã€‚ç„¶è€Œï¼Œç¬¬ä¸‰å®¶å…¬å¸æ‰¾ä¸Šäº†æˆ‘ï¼Œè¿™æ˜¯ä¸€å®¶å¤§å…¬å¸ï¼Œæœ‰è‡ªå·±çš„åŠå…¬å›­åŒºï¼Œé›†å›¢æ——ä¸‹æœ‰å¥½å‡ ä¸ªå…¬å¸ï¼Œé¢è¯•ä¹‹å‰æˆ‘ç²¾å¿ƒå‡†å¤‡äº†ï¼ŒCTOè§‰å¾—æˆ‘æ˜¯ä¸ªæœ‰å¹²åŠ²çš„å°ä¼™å­ï¼Œæˆ‘ä¹Ÿæ„Ÿè§‰è·Ÿç€è¿™ä¸ªå¤§å”æŒºä¸é”™ï¼Œä¹Ÿå‚è§‚äº†ä¸€ä¸‹åŠå…¬ç¯å¢ƒï¼Œå’¨è¯¢äº†ä¸€ä¸‹å…¬å¸çš„å„æ–¹é¢ï¼Œæ„Ÿè§‰å¾ˆæ»¡æ„ï¼Œå¾ˆæƒ³å»ã€‚å‡ å¤©åæˆ‘æ‹¿åˆ°offerï¼ŒæˆåŠŸå…¥èŒã€‚å®äº‹è¯æ˜ï¼Œæˆ‘è¿™æ¬¡çš„åˆ¤æ–­ååˆ†å‡†ç¡®ï¼Œå…¬å¸æ°›å›´çœŸçš„è¶…å¥½ï¼ŒCTOä¹ŸçœŸçš„è¶…çº§æ£’ã€‚æˆ‘åœ¨è¿™é‡Œåº¦è¿‡äº†æˆ‘èŒä¸šç”Ÿæ¶¯æœ€å¼€å¿ƒã€æœ€å……å®ã€æœ€æœ‰æ„ä¹‰çš„2å¹´ã€‚åœ¨è¿™å®¶å…¬å¸å·¥ä½œçš„æœŸé—´ï¼Œæˆ‘æ˜¯CTOçš„â€œå¾—åŠ›å¹²å°†â€ä¹‹ä¸€ï¼Œåªè¦æœ‰ä»€ä¹ˆä»»åŠ¡éœ€æ±‚ï¼ŒCTOåŸºæœ¬ç¬¬ä¸€ä¸ªæƒ³åˆ°è®©æˆ‘å»å‚ä¸å¹²ï¼Œåœ¨ç¾¤é‡Œ@æˆ‘ã€‚æˆ‘å¹²çš„å¾ˆèµ·åŠ²ï¼Œä¹Ÿè·å¾—äº†æå‰è½¬æ­£ï¼Œä¹Ÿèµ¢å¾—äº†è¢«åŠ¨æ¶¨è–ªï¼ˆâ€œè¢«åŠ¨æ¶¨è–ªâ€æŒ‡çš„æ˜¯æˆ‘å¹¶æ²¡æœ‰æ²¡æï¼ŒCTOä¸»åŠ¨ç»™æˆ‘æ¶¨äº†ï¼‰ã€‚åœ¨è¿™é‡Œæˆ‘è§‰å¾—æˆ‘å¾—åˆ°äº†æå¤§çš„è®¤å¯ï¼Œæˆ‘å¾—åˆ°äº†æå¤§çš„æ”¾æƒï¼Œæˆ‘æœ‰é™çš„èƒ½åŠ›å¾—åˆ°äº†å……åˆ†çš„å‘æŒ¥ã€‚åœ¨è¿™é‡Œä¾ç„¶æ˜¯965ï¼Œå‘¨æœ«å¶å°”åœ¨å®¶å¤„ç†ä¸€äº›é—®é¢˜ï¼Œä¹Ÿéƒ½æ˜¯æˆ‘è‡ªæ„¿ï¼Œä¸”ä¹æ„ä¸ºä¹‹ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç¬¬å››å®¶å…¬å¸&quot;&gt;ç¬¬å››å®¶å…¬å¸&lt;/h2&gt;
&lt;p&gt;ä¸Šå®¶å…¬å¸é‚£ä¹ˆå–œæ¬¢ï¼Œé‚£ä¹ˆå¥½ï¼Œä¸ºä»€ä¹ˆèµ°äº†å‘¢ï¼Ÿå› ä¸ºCTOå› ä¸ºéæ­£å¸¸åŸå› èµ°äº†ä¹‹åï¼Œæˆ‘ä¹Ÿé­å—äº†æ–°CTOçš„åŠå…¬å®¤æ”¿æ²»ç­‰åŸå› ï¼Œæ— å¥ˆä¸»åŠ¨ç¦»èŒã€‚è€Œåæ¥åˆ°äº†ç¬¬4å®¶å…¬å¸ä¸€å¹²å°±æ˜¯3å¹´åŠï¼Œè¿™å®¶å…¬å¸æ˜¯æˆ‘å¾…è¿‡â€œæœ€ç¦»è°±â€çš„å…¬å¸ï¼Œç¦»è°±åˆ°ä»€ä¹ˆç¨‹åº¦å‘¢ï¼Ÿâ€”â€”6ç‚¹ä¸‹ç­ï¼Œ6:00å°±æœ‰äººæ‰“å¡äº†ï¼ˆèƒ½å¬åˆ°èµ°å»Šæ‰“å¡æœºçš„å£°éŸ³ï¼‰6:05äººèµ°äº†ä¸€åŠï¼Œ6:20å°±å‰©å‡ ä¸ªäººäº†ï¼Œ6:30æ²¡èµ°çš„å°±æ˜¯è¦ä¸Šçº¿çš„ã€‚è¿™å®¶å…¬å¸å®Œå…¨æ²¡æœ‰PUAï¼Œä¸€ä¸ç‚¹éƒ½æ²¡æœ‰ï¼Œä¸€åˆ‡å…¨é ä¸»åŠ¨ï¼Œæˆ‘è§‰å¾—è¿™å®¶å…¬å¸çš„ç†å¿µæ˜¯â€œè€æ¿ç›¸ä¿¡ä½ ä¼šè‡ªä¸»æŠŠæ‰‹å¤´çš„æ´»å¹²å¥½â€ï¼Œæ‰€ä»¥æ²¡æœ‰é‚£ä¹ˆå¤šçš„å¼ºåˆ¶è¦æ±‚ï¼Œä¸å­˜åœ¨è°ä¸‹ç­æ—©ä¸åˆç¾¤ï¼Œè°æ¯”é¢†å¯¼èµ°çš„æ—©ä¼šé­æ®ƒã€‚äº‹å®ä¸Šï¼Œæˆ‘åœ¨è¿™å®¶å…¬å¸ï¼Œé™¤äº†åšå¥½è‡ªå·±äº§å“éœ€æ±‚ï¼Œè¿˜è‡ªå‘çš„åšäº†å¾ˆå¤šä¼˜åŒ–ã€‚ä¹Ÿä»ç„¶æ²¡æœ‰åŠ ç­è¿‡ï¼Œåªæ˜¯ä¸€å¹´æœ‰é‚£ä¹ˆä¸‰äº”æ¬¡å¤§ä¸€ç‚¹çš„ä¸Šçº¿ä¼šå¼„åˆ°å¾ˆæ™šã€‚å…¶ä»–æ—¶é—´éƒ½æ˜¯ç¦»è°±åˆ°â€œ6:00ä¸‹ç­â€ï¼ŒåŒ—äº¬çš„å¤å¤©6ç‚¹ä¸‹ç­çœŸçš„å¤ªé˜³å¾ˆæ™’ï¼Œå¾ˆçƒ­ã€‚å‘¨æœ«ä»ä¸åŠ ç­ï¼ŒåŠ ç­ä¹Ÿæ˜¯ç»™é’±ï¼Œæ³•å®šå‡æ—¥åŠ ç­å¦¥å¦¥çš„3å€å·¥èµ„ã€‚åœ¨996ç››è¡Œçš„äº’è”ç½‘è¡Œä¸šï¼Œè¿™ç®€ç›´æ˜¯â€œç¦»è°±â€ï¼ç¦»è°±åˆ°æè‡´ï¼&lt;/p&gt;
&lt;h2 id=&quot;ç¬¬äº”å®¶å…¬å¸&quot;&gt;ç¬¬äº”å®¶å…¬å¸&lt;/h2&gt;
&lt;p&gt;ç°åœ¨çš„å…¬å¸å’Œä¹‹å‰çš„å‡ å®¶ç›¸æ¯”ï¼Œç´§å¼ äº†å¾ˆå¤šå¾ˆå¤šã€‚ä»»åŠ¡éå¸¸å¤šï¼Œéœ€æ±‚éå¸¸æ€¥ï¼Œè¿˜å¸¸å¸¸æå¹¶è¡Œã€‚è¿™ä¸ªä»»åŠ¡è¿˜åœ¨å¼€å‘ï¼Œåé¢çš„2ä¸ªéœ€æ±‚æ–‡æ¡£å°±é€è¿‡æ¥äº†ï¼Œå¤©å¤©è®©ä½ è¯„ä¼°éœ€æ±‚ï¼Œè¯„ä¼°å·¥æœŸï¼Œå®‰æ’èµ„æºè¿›åº¦ã€‚çœŸçš„æ˜¯å‹å¾—äººå–˜ä¸è¿‡æ°”ã€‚ç„¶è€Œï¼Œä½ æƒ³ä¸åˆ°çš„æ˜¯ï¼Œè¿™è¾¹ä¹Ÿæ²¡æœ‰å¼ºåˆ¶åŠ ç­è¿™ä¹ˆä¸€è¯´ï¼Œ10ç‚¹ä¸Šç­ï¼Œ19ç‚¹ä¸‹ç­ï¼ˆå¾€å‰æ¨ä¸€ä¸ªå°æ—¶å°±æ˜¯965äº†ï¼‰ã€‚æ´»å°±æ˜¯è¿™ä¹ˆå¤šï¼Œå·¥æœŸå’Œèµ„æºä½ è¦æ˜¯èƒ½å®‰æ’å¥½ï¼Œä½ å¯ä»¥965æ»¡è´Ÿè·è¿›è¡Œï¼Œä¸å¿…åŠ ç­ï¼Œå¦‚æœä½ çœŸçš„æ²¡è¯„ä¼°å¥½æ—¶é—´è¿›åº¦ï¼Œé‚£åªèƒ½åŠ åŠ ç­äº†ã€‚å› ä¸ºå¾ˆå¤šé¡¹ç›®æ’æœŸæ‹å¥½äº†ä¹‹åæ˜¯ä¸èƒ½å˜çš„ï¼Œå› ä¸ºæ¶‰åŠçš„èµ„æºå¤ªå¤šäº†ï¼Œç‰µæ‰¯çš„äº‹æƒ…å¤ªå¤šäº†ï¼Œå„æ–¹éƒ½æ’å¥½äº†ï¼Œä½ å»¶æœŸäº†ä½ å°±å¾—è€½è¯¯åˆ«çš„å›¢é˜Ÿï¼Œæ•´ä½“æŸå¤±ä¸¥é‡ã€‚&lt;br/&gt;æˆ‘æ‰¿è®¤åœ¨è¿™é‡ŒçœŸçš„å¾ˆå¿™ï¼Œä½†æ˜¯æˆ‘å‘ç°ï¼šåªè¦æˆ‘è¶³å¤Ÿè®¤çœŸï¼Œè¶³å¤Ÿç”¨å¿ƒçš„å»åˆ†æè®¾è®¡å¥½é¡¹ç›®è¿›åº¦å®‰æ’ï¼Œå¹¶å……åˆ†åˆ©ç”¨å·¥ä½œæ—¥çš„æ—¶é—´ï¼Œä¸è¦ä¸­é€”ç©æ‰‹æœºä¸è¦åˆ’æ°´ï¼Œ965å®Œå…¨æ²¡é—®é¢˜ã€‚äº‹å®ä¸Šï¼Œæˆ‘å¤§å¤šæ•°æ—¶å€™éƒ½æ˜¯19:10å·¦å³ä¸‹ç­çš„ï¼Œå°‘éƒ¨åˆ†æ—¶é—´æ˜¯20:00ä¸‹ç­çš„ã€‚æ€»ä½“æ¥è¯´ï¼Œä¹Ÿæ˜¯çº¦ç­‰äº965ï¼Œå°±ç®—ä¸èƒ½å…¨ç­‰äº965ï¼Œä½†æ˜¯å·²ç»å¾ˆæ¥è¿‘äº†ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘æ›¾æƒ³è¿‡ï¼Œâ€œä¸ºä½•æˆ‘æ‰€é€‰æ‹©çš„å…¬å¸éƒ½æ˜¯965â€œï¼Œå…¶å®æˆ‘å¹¶æ²¡æœ‰å®Œå…¨æ€»ç»“å‡ºæ¥åŸå› ï¼Œæ¯•ç«Ÿâ€œå½“å±€è€…è¿·â€ã€‚æˆ‘è§‰å¾—æœ‰ä¸€éƒ¨åˆ†çš„åŸå› æ˜¯â€œä¸ªäººæ€§æ ¼ä½¿ç„¶â€ã€‚æˆ‘ä¸æ˜¯é‚£ç§å¾ˆå–œæ¬¢â€œå–å‘½â€çš„äººï¼Œä¸æ˜¯ä¸€ä¸ªç‰¹åˆ«â€œå–åŠ›â€çš„äººï¼Œæ˜¯ä¸€ä¸ªâ€œç‚¹åˆ°ä¸ºæ­¢â€è¿™æ ·å¿ƒæ€çš„äººï¼Œæ˜¯ä¸€ä¸ªâ€œä¸å¤ªå‹¤å¿«â€çš„äººã€‚æˆ‘ä¸æ˜¯å¾ˆè®¤å¯é€šè¿‡â€œåŠ ç­â€çš„å½¢å¼å»èµ¶ä»»åŠ¡ï¼Œæˆ‘è§‰å¾—ç¼–ç¨‹æ˜¯ä¸ªè„‘åŠ›è„‘æ´ï¼Œéœ€è¦é‡å¤çš„æ€è€ƒå’Œæ¢³ç†ï¼Œæ˜¯æ€¥ä¸å¾—çš„ï¼Œä¸å…¶è‰è‰çš„å†™å‡ºä¸€å †bugï¼Œä¸å¦‚ç¨å¾®ä¸é‚£ä¹ˆå¿«å†™å‡ºç¨³å¥ä¸€ç‚¹çš„åº”ç”¨ã€‚æˆ‘è¿˜è§‰å¾—ï¼Œæˆ‘ä»¬åº”è¯¥ç éœ€æ±‚ï¼Œè€Œä¸æ˜¯ç›²ç›®çš„åšä¸€å¯¹æ²¡ç”¨çš„éœ€æ±‚ï¼Œæˆå¤©å¿™çš„è¦æ­»ï¼Œå®é™…ä¸Šæ˜¯â€œæ— ä»·å€¼â€çš„å¿™ç¢Œã€‚æˆ‘ä¸è®¤å¯å¤§å®¶ä¸€èµ·â€œé€ ä¸šç»©ï¼Œéª—è€æ¿çš„é’±â€è¿™ç§å·¥ä½œæ¨¡å¼ã€‚&lt;br/&gt;ä¹Ÿè®¸æ˜¯è¿™æ ·çš„â€œæŒ‡å¯¼æ€æƒ³â€ï¼Œæ½œç§»é»˜åŒ–çš„å½±å“äº†æˆ‘æ‰¾å·¥ä½œæ—¶å€™çš„ä¼šå…³æ³¨ç‚¹ï¼Œå’Œå¿ƒæ€ã€‚æˆ‘ç”šè‡³æ²¡æœ‰åˆ»æ„ï¼Œå´æ€»èƒ½æ‰¾åˆ°ä¸éœ€è¦996çš„å…¬å¸ã€‚&lt;br/&gt;æˆ‘æ²¡æœ‰é­é‡996ï¼Œå…¶å®è¿˜æœ‰ä¸€ä¸ªåŸå› â€”â€”æˆ‘æ²¡æœ‰å»è¿‡ä¸€çº¿å¤§å‚ã€‚ä¸”ä¸è°ˆæˆ‘çš„èƒ½åŠ›å¤Ÿä¸å¤Ÿå»å¤§å‚ï¼Œå¥‡æ€ªçš„æ˜¯æˆ‘ä»æ¥æ²¡æœ‰æƒ³è¿‡å»ä¸€ä¸ªå¤§å‚ï¼Œå¤§å‚ä¼¼ä¹å¯¹æˆ‘æ²¡æœ‰å¸å¼•åŠ›ï¼Œæˆ‘ä¼¼ä¹æ²¡æœ‰é‚£ä¹ˆå¤§çš„å…´è¶£å»ã€‚å¯èƒ½æ˜¯æˆ‘æ²¡æœ‰â€œé‡å¿ƒâ€ï¼Œæ²¡æœ‰â€œä¸Šè¿›å¿ƒâ€å§ï¼&lt;/p&gt;

&lt;p&gt;è¯´996æ˜¯å¤§å‚çš„ä»£åè¯ï¼Œä¸è¿‡åˆ†å§ï¼Ÿâ€”â€”ä¸€ç‚¹éƒ½ä¸è¿‡åˆ†ï¼Œæ¯•ç«Ÿç°åœ¨çš„å¤§å‚å‡ ä¹éƒ½æ˜¯996ï¼Œè€Œå°å…¬å¸æ²¡æœ‰996çš„éœ€æ±‚ã€‚æ—¢ç„¶996èƒ½å¤Ÿä½œä¸ºå¤§å‚çš„ä»£åè¯ï¼Œé‚£ä¹ˆâ€œæˆ‘æ²¡æœ‰996â€å°±ç­‰äºæˆ‘æ²¡æœ‰å»å¤§å‚å·¥ä½œã€‚æ²¡å»å¤§å‚å·¥ä½œç­‰äºä»€ä¹ˆï¼Ÿå°±ç­‰äºæˆ‘å°‘æŒ£äº†ä¸€å¤§ç¬”é’±ï¼Œæ¯”å¦‚æ˜¨å¤©çœ‹åˆ°åŒ¿ååŒºä¸€ä¸ªæŸå¤§å‚çš„ç¨‹åºå‘˜è¯´â€œè‡ªå·±å¹´ç»ˆå¥–34ä¸‡ï¼Œè§‰å¾—åŠ ç­è‹¦ï¼Œä½†æ˜¯é’±å¾ˆé¦™ï¼Œå€¼ï¼â€ã€‚&lt;br/&gt;å¦‚æœæ˜¯æˆ‘æˆ‘ä¹Ÿè§‰å¾—å¾ˆå€¼ï¼Œä¸€å¹´åŠ ç­èƒ½ç»™è‡ªå·±åŠ 34ä¸‡ï¼Œä½œä¸ºä¸€ä¸ªå æ®ç¤¾ä¼šè´¢å¯Œ10%çš„90%äººç¾¤ä¸­çš„ä¸€å‘˜ï¼Œä¸€å¹´å¤šè¿™34ä¸‡æ˜¯æ— æ¯”çš„é¦™ã€‚å½“ç„¶äº†ï¼Œæ²¡å¿…è¦è´¨ç–‘è¿™ä¸ª34ä¸‡çš„çœŸå‡ï¼Œæˆ‘æ›¾è·Ÿå¤Ÿå¤§å‚çš„å‘˜å·¥èŠè¿‡ï¼ˆå› ä¸ºå·¥ä½œä¸Šçš„åˆä½œï¼Œæ›¾ä¸€èµ·åŠå…¬è¿‡å‡ å¤©ï¼‰å¯¹æ–¹å¤§æ¦‚è®²äº†å„ä¸ªå±‚æ¬¡å¹´ç»ˆå¥–æœ€å·®å‡ ä¸ªæœˆä»¥åŠè‡ªå·±çŸ¥é“çš„éƒ½æ˜¯å‡ ä¸ªæœˆã€‚å› æ­¤æˆ‘è§‰å¾—34ä¸‡è¿™ä¸ªä¿¡æ¯ä¸éœ€è¦è´¨ç–‘ã€‚&lt;br/&gt;æˆ‘è¿˜å¤±å»äº†ä»€ä¹ˆï¼Œæˆ‘å¤±å»äº†996å¤§å‚æ½œåœ¨çš„èƒ½åŠ›æå‡èµ›é“ã€å¤±å»äº†æ½œåœ¨çš„ä¼˜è´¨äººè„‰èµ›é“ã€å¤±å»äº†æŒ£æ›´å¤šçš„é’±çš„æœºä¼šã€å¤±å»äº†åœ¨å¤§å‚æ‰¾ä¸€ä¸ªä¼˜ç§€è€å©†çš„å¯èƒ½æ€§ã€å¤±å»äº†å’Œä¸€ä½å¤§å‚è€å©†ç»“åˆï¼ŒäºŒäººâ€œå¼ºå¼ºè”æ‰‹â€åœ¨ä¸€çº¿åŸå¸‚è´­ä¹°åƒä¸‡æˆ¿å­çš„æœºä¼šã€‚&lt;br/&gt;æ˜¯è¿™æ ·å—ï¼Ÿä¸æ˜¯ï¼Œè¿™ä¸€åˆ‡éƒ½æ˜¯æ„æ·«ã€‚è™½ç„¶æˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸€å®šçš„è§„åˆ™æ¨æ–­å’Œåˆ†æé¢„åˆ¤ã€‚ç„¶è€Œäººç”Ÿä¹‹è·¯å¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•ã€‚å³ä½¿ä½ è®¡åˆ’çš„å¾ˆå¥½ï¼Œä¹Ÿä¸ä¸€å®šèƒ½å®ç°ç›®æ ‡ï¼Œå³ä½¿ä½ ååˆ†çš„åŠªåŠ›ï¼Œä¹Ÿä¸è§å¾—èƒ½100%è¾¾æˆæœŸæœ›çš„ç»“æœã€‚&lt;br/&gt;ç„¶è€Œæˆ‘å°‘æŒ£äº†ä¸€äº›é’±ï¼Œè¿™å€’æ˜¯çœŸçš„ï¼Œå› ä¸ºå¹³å‡æ¥è®²ï¼ŒåŒæ ·çš„æ°´å¹³å’Œçº§åˆ«å¤§å‚å¼€çš„è–ªèµ„è¦é«˜å¾ˆå¤šã€‚æ‰€ä»¥ï¼Œè¿™7å¹´ï¼Œæ²¡æœ‰996ï¼Œæˆ‘å¯èƒ½çœŸçš„å°‘æŒ£äº†äºŒç™¾ä¸‡ã€‚&lt;/p&gt;

&lt;p&gt;æ²¡æœ‰996ï¼Œæˆ‘çœ‹èµ·æ¥è¿˜ç®—å¹´è½»ï¼Œæ„Ÿè§‰æ¯”å®é™…å¹´é¾„å°1å²å§ï¼ˆä¹Ÿè®¸996çš„äººä¹Ÿä¸€æ ·å¹´è½»ï¼‰ï¼Œå‘é‡ä¹Ÿå¾—åˆ°è¾ƒå¥½çš„ä¿æŒï¼ˆä¹Ÿè®¸996çš„äººä¹Ÿä¸€æ ·å‘é‡å……è¶³ï¼‰ã€‚å‰å‡ å¹´æˆ‘ä¸€ç›´éƒ½æ˜¯ä¸‹ç­å›å®¶åƒè€å©†åšçš„æ™šé¥­ï¼Œåƒå®Œé¥­è·Ÿè€å©†å»æ¥¼ä¸‹ä¸¢åƒåœ¾æ•£æ•£æ­¥ï¼Œå‘¨æœ«å»å¤–é¢è½¬è½¬ï¼Œç”¨æ‰‹æœºæ‹ä¸€äº›ç…§ç‰‡ã€‚â€‹èµ”å°å­©å­ç©ï¼Œç»™å°å­©å­æ´—æ¾¡ã€‚åŒæ—¶ä¹Ÿåˆ©ç”¨é—²ä½™æ—¶é—´çœ‹äº†ä¸€äº›æŠ€æœ¯ä¹¦ç±ï¼Œæˆ‘ä¹Ÿçœ‹äº†ä¸€ç³»åˆ—é—²ä¹¦ï¼ˆè·ŸæŠ€æœ¯æ— å…³ï¼‰ã€‚&lt;br/&gt;è¿™éƒ½æ˜¯æˆ‘è‡ªå·±çš„æ—¶é—´ï¼Œå°½ç®¡æˆ‘å¹¶æ²¡æœ‰ç”¨è¿™äº›æ—¶é—´åˆ›é€ éå¸¸å¤§çš„ä»·å€¼ï¼Œä½†æ˜¯è¿™æ˜¯æˆ‘è‡ªå·±å¯ä»¥æ”¯é…å¹¶æµªè´¹çš„æ—¶é—´ã€‚æˆ‘å¹¶æ²¡æœ‰å»åƒæ™šä¸Š7:30çš„ç‚¹åŠ ç­é¤ï¼Œæˆ–æ˜¯å“å°9ç‚¹çš„å¤œå®µï¼Œæˆ–æ˜¯10ç‚¹çš„å…è´¹æ‰“è½¦ã€‚ä½œä¸ºä¸€ä¸ªéå¸¸æ™®é€šçš„æ™®é€šäººï¼Œæˆ‘åªæ˜¯æŒ‰ç…§è‡ªå·±çš„æ–¹å¼è‡ªç”±çš„æµªè´¹è‡ªå·±çš„æ—¶é—´ã€‚&lt;br/&gt;å¦‚æœéè¦è®©æˆ‘è¯´æˆ‘å¾—åˆ°äº†ä»€ä¹ˆï¼Œæˆ‘è¿˜çœŸçš„æ— æ³•é‡åŒ–çš„ç»™ä½ çœ‹ï¼ˆè¿™ä¸€ç‚¹ï¼Œåˆ°ä¸å¦‚åŠ ç­å¾—åˆ°34ä¸‡è¿™ä¹ˆç›´è§‚çš„å¯ä»¥è¡¡é‡ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;ä»äº’è”ç½‘å°±ä¸šç¯å¢ƒæ¥è®²ï¼Œ996çš„å…¬å¸ç¡®å®ä¸åœ¨å°‘æ•°ï¼Œä»¥è‡³äºä»æ¦‚ç‡ä¸Šè®²ï¼Œæˆ‘ä»¬å¾ˆå¤§ç¨‹åº¦ä¸Šèƒ½ç¢°åˆ°996çš„å…¬å¸ã€‚æ¯ä¸€æ¬¡ç½‘ä¸Šçˆ†å‘996çš„çƒ­åº¦æ‚²å‰§äº‹ä»¶çš„æ—¶å€™ï¼Œä¸€æ‰¹äººè¯´â€œ996å…¬å¸æ˜¯ä¸‡æ¶ä¹‹æºâ€ï¼Œæˆ‘ä»¬è¦æŠµåˆ¶ï¼›å¦ä¸€å¸®äººåˆè¯´å…¶å®æ¯ä¸ªäººéƒ½å¯ä»¥æœ‰è‡ªå·±çš„é€‰æ‹©ã€‚&lt;br/&gt;é¦–å…ˆæˆ‘æƒ³è¯´è¯´â€œä»»ä½•äººéƒ½æœ‰é€‰æ‹©â€çš„é—®é¢˜ï¼Œæˆ‘æƒ³è¯·é—®ï¼šä½ è§‰å¾—çœŸçš„æœ‰é€‰æ‹©å—ï¼Ÿä½ åœ¨å„ä¸ªäº‹æƒ…æ˜¯éƒ½æœ‰é€‰æ‹©å—ï¼Ÿã€‚ä»ä¸»è§‚ä¸Šæ¥è®²ï¼Œæˆ‘ä»¬ç¡®å®æ˜¯æœ‰è‡ªå·±çš„é€‰æ‹©ï¼Œä½†æ˜¯ä»å®¢è§‚ä¸Šæ¥è®²å°±ä¸ä¸€å®šâ€œçœŸçš„æœ‰è‡ªæˆ‘é€‰æ‹©äº†â€ã€‚ä¸¾ä¸ªä¾‹å­ï¼šä½ æœ‰æ‰‹æœºçš„è‡ªä¸»é€‰æ‹©æƒå—ï¼Ÿæˆ‘è§‰å¾—æˆ‘æ²¡æœ‰ï¼Œæˆ‘éœ€è¦çš„æ˜¯ä¸€æ¬¾å±å¹•å¤§å°ä¸º4å¯¸å·¦å³çš„æ‰‹æœºï¼Œå› ä¸ºæˆ‘æ‰‹ä¸å¤§ï¼ŒçœŸçš„ä¸å–œæ¬¢åŒæ‰‹æ§ä¸ªæ‰“æ‰‹æœºï¼Œé‚£ä¹ˆé«˜çš„åƒç´ æˆ‘ä¹Ÿä¸éœ€è¦ï¼Œæˆ‘å°±æ‹ç®€å•çš„ç…§ç‰‡ï¼Œå¤šå‡ºæ¥çš„é…ç½®å°±ä»¥ä¸ºäº†å¤šä»˜å‡ºå¾ˆå¤šé’±ï¼Œå°±æˆ‘è¿™éœ€æ±‚ï¼Œæˆ‘èƒ½åœ¨å¸‚é¢ä¸Šä¹°åˆ°å¯¹åº”çš„æ‰‹æœºå—ï¼Ÿæˆ‘ä¹°ä¸åˆ°ï¼æˆ‘æ²¡å¾—é€‰ï¼Œæˆ‘åªèƒ½åœ¨ä¸€å †å¤§å±å¹•æ‰‹æœºé‡Œè¾¹é€‰ã€‚æˆ‘æ˜¯æœ‰è‡ªä¸»é€‰æ‹©æ‰‹æœºçš„æƒåˆ©ï¼Œä½†æ˜¯æˆ‘é€‰æ‹©çš„å¯¹è±¡å°±æ˜¯é‚£äº›ï¼Œæˆ‘ä¸é€‰å°±æ²¡å¾—ç”¨ï¼Œé™¤éæˆ‘è‡ªå·±ç»™è‡ªå·±é‡èº«å®šåšä¸€ä¸ªæ‰‹æœºã€‚æˆ–è€…æˆ‘æ¥å—è¿™ä¸ªäº‹å®ï¼Œé€€è€Œæ±‚å…¶æ¬¡ä¹°ä¸ªè€äººæœºã€‚&lt;br/&gt;å·¥ä½œä¹Ÿæ˜¯ä¸€æ ·ï¼Œæˆ‘ä»¬æ˜¯å¯ä»¥è‡ªä¸»é€‰æ‹©é‚£äº›ä¸åŠ ç­çš„å·¥ä½œï¼Œé€‰æ‹©ç¦»å®¶è¿‘çš„å·¥ä½œï¼Œé€‰æ‹©å‹åŠ›å°çš„å·¥ä½œã€‚ä½†æ˜¯å¦‚æœæ‰€æœ‰çš„å…¬å¸éƒ½æ˜¯å¼ºåº¦é«˜ï¼Œå‹åŠ›å¤§ï¼Œä½ æœ‰å¾—é€‰å—ï¼Ÿæ²¡å¾—é€‰ï¼Œ996å’Œé996å…¬å¸åœ¨å¾…é‡ä¸Šã€æŠ€æœ¯æ°›å›´ä¸Šã€é€¼æ ¼ä¸Šã€å‘å±•å‰é€”ä¸Šä¸¤çº§åˆ†åŒ–ä¸¥é‡ï¼ŒåŠ¿å¿…è®©é‚£äº›äººâ€œé«˜ä¸æˆä½ä¸å°±â€åªèƒ½é€‰æ‹©åœ¨åˆ©å¥½çš„åœ°æ–¹è¢«å¼ºå¥¸ã€‚&lt;br/&gt;å†è¯´ï¼Œâ€œ996æ˜¯å¦æ˜¯ä¸‡æ¶ä¹‹æºâ€ï¼Œâ€œ996æ˜¯å¦åº”è¯¥æŠµåˆ¶â€çš„é—®é¢˜ï¼Œè¿™ä¸ªé—®é¢˜å¤ªå¤æ‚äº†ï¼Œæˆ‘æ‰€å…·å¤‡çš„çŸ¥è¯†è¿˜æ— æ³•ç»™ä¸ç§‘å­¦å®Œå¤‡çš„è§£é‡Šã€‚æˆ‘ç°åœ¨æ˜¯ä¸€åå‘˜å·¥ï¼Œæˆ‘èƒ½çœ‹åˆ°çš„åªæ˜¯æ‰‹å¤´çš„å·¥ä½œï¼Œæˆ‘ä¸å¸Œæœ›996ã€‚å¦‚æœæˆ‘æ˜¯è€æ¿ï¼Œæˆ‘æœ‰ä¸€å®¶å…¬å¸ï¼Œæˆ‘ä¼šæŠŠå…¬å¸å˜æˆ996å…¬å¸å—ï¼Ÿæˆ‘ä¼šå˜æˆç–¯ç‹‚å‹æ¦¨å‰©ä½™ä»·å€¼çš„äººå—ï¼Ÿæˆ‘ä¸ç¡®å®šï¼Œæˆ‘ç°åœ¨å¯ä»¥è¯´â€œæˆ‘ä¸æ˜¯é‚£æ ·çš„äººâ€ï¼Œä¸‡ä¸€æˆ‘å…¥åœºä¹‹åå°±å˜äº†å‘¢ï¼Ÿä¸å¥½è¯´ï¼Œäººæ˜¯ä¸ç¡®å®šçš„ï¼Œæœªæ¥ä¹Ÿæ˜¯ä¸ç¡®å®šçš„ã€‚&lt;br/&gt;è€Œé‚£äº›æƒ³â€œä»¥ä¸ªäººä¹‹åŠ›åå¯¹996â€ï¼Œâ€œä»¥è¾èŒè¡¨æ˜æˆ‘ä¸996åŠ¿ä¸ä¸¤ç«‹æ€åº¦â€ï¼Œâ€œä»æˆ‘åšèµ·æ”¹å˜ç¤¾ä¼šâ€ç­‰æƒ…å†µï¼Œå…¶å®ä¹Ÿè®¸éƒ½æ˜¯â€œå¾’åŠ³â€ï¼Œä½ ä¸å»ï¼Œæœ‰äººå»ï¼Œä½ åšä¸äº†ï¼Œæœ‰äººèƒ½åšå¾—äº†ï¼Œè¿™ä¸æ˜¯ä¸‰ä¸¤ä¸ªäººå°±èƒ½æ”¹å˜çš„äº‹æƒ…ï¼Œè¿™ä¸ªäº‹æƒ…çš„å‰å› åæœæå…¶å¤æ‚ï¼Œä½ çš„æŠµåˆ¶å’ŒèµåŒä¹Ÿè®¸éƒ½æ˜¯è‚¤æµ…çš„ã€‚å¯¹äºé‚£äº›å› ä¸º996çš„æ ¹æœ¬åŸå› è€Œä¸§å‘½ï¼Œæˆ–è€…åœ¨ç²¾ç¥ä¸Šé­å—ä¸¥é‡æŸå¤±ï¼Œæˆ–è€…åœ¨èº«ä½“å¥åº·æ–¹é¢é­å—ä¸¥é‡æŸå¤±çš„åŒè¡Œï¼Œæˆ‘æ·±è¡¨é—æ†¾ï¼Œå“ªä¸ªå¹´è½»ç”Ÿå‘½çš„é™¨è½ä¸è®©äººå¿ƒç—›å‘¢ï¼Ÿå¯¹äºè¿™äº›äººçš„æƒ…å†µæ¥è¯´ï¼Œæœ€äºçš„æ˜¯ä»–è‡ªå·±ï¼Œæœ€ä¼¤çš„æ˜¯ä»–çš„äº²äººã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ï¼Œæ€»ç»“ä¸€ä¸‹ï¼š&lt;strong&gt;æˆ‘å¯¹äº996çš„çœ‹æ³•æ˜¯ï¼šæˆ‘æ²¡æœ‰çœ‹æ³•ï¼Œä¹Ÿæ²¡æœ‰å»ºè®®ï¼Œä¸èµåŒï¼Œä¹Ÿä¸åå¯¹&lt;/strong&gt;,è¿™ä¸ªé—®é¢˜å¤ªå¤æ‚æˆ‘çœŸçš„è¯´ä¸æ¸…æ¥šã€‚å¦‚æœæ˜¯æˆ‘çš„å¥½æœ‹å‹ï¼Œæˆ‘çš„èº«è¾¹çš„äººé—®æˆ‘ï¼šæˆ‘è¦ä¸è¦å»é‚£å®¶996å…¬å¸å•Šï¼Ÿæˆ‘è¦ä¸è¦ç»§ç»­996å•Šï¼Ÿæˆ‘ä¼šè¯´ï¼šèƒ½å¹²å°±å¹²ï¼Œä¸èƒ½å¹²å°±ä¸å¹²ï¼Œæƒ³å¹²å°±å¹²ï¼Œä¸ç›¸å¹²å°±ä¸å¹²ï¼Œæ ¹æ®è‡ªå·±çš„æƒ…å†µåšé€‰æ‹©ï¼Œè‡ªå·±åšå†³å®šã€‚&lt;br/&gt;&lt;strong&gt;å…¶å®æ¯ä¸ªäººå¿ƒä¸­éƒ½æœ‰ç­”æ¡ˆã€‚ç‰¹åˆ«æ˜¯ä½ åœ¨å¯»æ±‚åˆ«äººæ„è§çš„æ—¶å€™â€¦â€¦&lt;/strong&gt;&lt;/p&gt;
</description>
<pubDate>Mon, 11 Jan 2021 15:35:00 +0000</pubDate>
<dc:creator>é€ƒç¦»æ²™æ¼ </dc:creator>
<og:description>è¿‘å‡ å¹´â€œ996â€çš„è¯é¢˜çƒ­åº¦ä¸æ–­ï¼Œæˆ–è€…è¯´996è¯é¢˜åœ¨â€œäº’è”ç½‘ä»ä¸šè€…â€åœˆå­ä¸­çƒ­åº¦ä¸æ–­ã€‚ç„¶è€Œæ¯ä¸€æ¬¡ï¼Œæˆ‘éƒ½æ„Ÿè§‰è¿™ä¸ªè¯é¢˜â€œè·Ÿæˆ‘æ— å…³â€ï¼Œå› ä¸ºæˆ‘çœŸçš„965äº†ä¸ƒå¹´ã€‚æ›¾ç»æœ‰äººè¿™ä¹ˆè¯´æˆ‘ï¼šâ€œä½ éƒ½ä¸åƒä¸€ä¸ªç¨‹åºå‘˜ï¼Œç¨‹åºå‘˜å“ªæœ‰ä¸‹</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/demingblog/p/14264979.html</dc:identifier>
</item>
<item>
<title>SQL Server On Linuxï¼šåŸºäºå®é™…é¡¹ç›®æ¡ˆä¾‹ï¼Œæ€»ç»“åŠŸèƒ½æ”¯æŒæƒ…å†µåŠç›¸å…³é—®é¢˜è§£å†³æ–¹æ¡ˆ - èµ–å¤©å“æ°´</title>
<link>http://www.cnblogs.com/camelliabloglyf/p/14262631.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/camelliabloglyf/p/14262631.html</guid>
<description>&lt;p&gt;&lt;span&gt;ã€€ã€€ä¸Šä¸ªæœˆï¼Œæœ‰ä¸ªæœ‹å‹é—®æˆ‘è¯´Sql Severå‘Mysqlè¿ç§»æœ‰ä»€ä¹ˆå¥½çš„ç»éªŒåˆ†äº«ï¼Œä»–ä»¬å…¬å¸å®¢æˆ·æ˜ç¡®æå‡ºä¸å†æä¾›WindowsæœåŠ¡å™¨ï¼Œç°åœ¨è®¡åˆ’Mysqlè¿ç§»ã€‚æˆ‘è¯´Mysqlè¿ç§»æˆæœ¬å¤ªé«˜äº†ï¼Œä¸å¦¨å¯ä»¥äº†è§£ä¸€ä¸‹SQL Server On Linuxå†åšå†³å®šã€‚äºæ˜¯ï¼Œæˆ‘æŠŠä¹‹å‰ç»™è¿ç»´åˆ†äº«çš„Wordæ–‡æ¡£å‘ç»™äº†ä»–ï¼Œå‘Šè¯‰ä»–ï¼Œå¦‚æœå¯ä»¥æ¥å—ä¸€äº›ä¸æ”¯æŒçš„åŠŸèƒ½ï¼Œé€‰æ‹©æˆæœ¬ï¼Œé£é™©å°çš„ï¼Œå¦‚æœé¡¹ç›®ä¸­ç”¨åˆ°çš„æŠ€æœ¯çŸ¥è¯†åˆšå¥½é¿å¼€äº†é‚£äº›ä¸æ”¯æŒçš„åŠŸèƒ½ï¼Œ3~5ä¸ªå°æ—¶å¯ä»¥å®Œæˆä¸€ä¸ªé¡¹ç›®çš„è¿ç§»ã€‚æˆ‘ä»¬å…¬å¸ä¹Ÿæœ‰æ¡ˆä¾‹ï¼Œåœ¨Linuxå¹³å°ä¸Šï¼ŒåŒæ—¶å®‰è£…äº†Sqlserver2017å’ŒMysql,æ—§åŠŸèƒ½å‡çº§Sql Serverï¼Œæ–°åŠŸèƒ½ç”¨Mysqlã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€ä¸Šå‘¨ä»–å¾ˆé«˜å…´çš„å‘Šè¯‰æˆ‘ï¼Œä»–ä»¬å…¬å¸æœ€ç»ˆé€‰æ‹©äº†SQL Server On Linuxï¼Œå·²ç»å®Œæˆäº†ä¸€ä¸ªå¤§é¡¹ç›®çš„å‡çº§äº†ï¼Œç›®å‰ä½¿ç”¨ç¨³å®šï¼Œé¡¹ç›®åœ¨æ­£å¸¸è¿è¡Œä¸­,ä»–è¯´ä»–ä»Šå¹´å‡èŒåŠ è–ªæœ‰æˆäº†ã€‚åæ¥äº†è§£åˆ°ï¼Œä»–ä»¬é€‰æ‹©Mysqlè¿ç§»ï¼Œæ˜¯å› ä¸ºä»–ä»¬ä¸çŸ¥é“Sqlserver2017åŠä»¥ä¸Šç‰ˆæœ¬ä¹Ÿæ˜¯æ”¯æŒLinxuå¹³å°çš„ï¼Œäºæ˜¯å¼ºçƒˆå»ºè®®æˆ‘æŠŠå†…å®¹åˆ†äº«åˆ°åšå®¢å›­ï¼Œè®©ä¸€äº›äººå°‘èµ°ä¸€äº›å¼¯è·¯ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;ã€€ã€€åœ¨è¿‡å»çš„20å¤šå¹´ä¸­ï¼Œå¾®è½¯çš„å„å¤§äº§å“é Windowsç»‘å®šå¸‚åœºï¼Œä¼—å¤šçš„å¾®è½¯ISVå›´ç»•ç€Windowså¼€å‘ç³»åˆ—äº§å“ï¼Œå½¢æˆä¸€ä¸ªä»¥Windowsä¸ºæ ¸å¿ƒçš„ç”Ÿæ€ç³»ç»Ÿã€‚éšç€äº’è”ç½‘çš„å‘å±•ï¼Œå‡ºç°äº†Google,Facebook,Tencent,Baidu,Alibaba éƒ½æ˜¯ä»¥Linux æ“ä½œç³»ç»Ÿæ„å»ºçš„äº§å“ç”Ÿæ€ç³»ç»Ÿï¼Œä»–ä»¬ä¸å†æ˜¯å…·ä½“çš„äº§å“ï¼Œè€Œæ˜¯æä¾›æœåŠ¡ï¼Œè€Œä¸”æœåŠ¡æ‰€ç”¨æŠ€æœ¯éƒ½æ˜¯å¼€æºçš„ï¼Œå’ŒåŸæ¥Windowsçš„ç”Ÿæ€ä¸æ˜¯åŒä¸€ä¸ªç»´åº¦çš„ä¸–ç•Œï¼Œå¾®è½¯å°é—­çš„ç”Ÿæ€ç³»ç»Ÿåªæœ‰æ…¢æ…¢çš„ç“¦è§£ã€‚å¾®è½¯ä¹Ÿæ„è¯†åˆ°é—®é¢˜çš„ä¸¥é‡æ€§ï¼Œæ¢äº†é‚£ä¸ªç§°Linuxä¸ºæ¯’ç˜¤çš„CEO&lt;strong&gt;å²è’‚å¤«Â·é²å°”é»˜&lt;/strong&gt;ï¼Œç”¨é¢†å¯¼å¾®è½¯äº‘çš„&lt;strong&gt;è¨æäºšÂ·çº³å¾·æ‹‰&lt;/strong&gt;æ¥å¸¦é¢†å¾®è½¯èµ°å‡ºåŸæ¥å°é—­çš„ç”Ÿæ€ç³»ç»Ÿï¼Œèµ°å…¥å¼€æ”¾çš„äº‘ç”Ÿæ€ç³»ç»Ÿã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€a)Â Â Â Â  äº‘è®¡ç®—æœºä¼šæ¯”Â WindowsÂ å¤§ï¼ŒWindowså å¾®è½¯çš„è¥æ”¶è¶Šæ¥è¶Šå°‘ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€b)Â Â Â Â  æœåŠ¡å™¨ç‰ˆæ“ä½œç³»ç»Ÿå¸‚åœºä»½é¢åŸºæœ¬æ˜¯Linuxç¨³å ç¬¬ä¸€æŠŠäº¤æ¤…ï¼Œå¾®è½¯è¦è®©è‡ªå®¶çš„æ•°æ®åº“å¸‚åœºä»½é¢æ‰©å¤§æ¥æŒ¤å å…¶ä»–æ•°æ®åº“çš„ä»½é¢ï¼Œå¿…ç„¶è¦åšå‡ºSQL Server on Linuxçš„å†³å®šã€‚&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;ã€€ã€€SQL Server åœ¨ Red Hat Enterprise Linux (RHEL)ã€SUSE Linux Enterprise Server (SLES) å’Œ Ubuntu ä¸Šå—æ”¯æŒã€‚Â æ­¤å¤–ï¼Œå®ƒä¹Ÿå¯ä½œä¸º Docker æ˜ åƒæä¾›ï¼Œå¯åœ¨ Linux ä¸Šçš„ Docker å¼•æ“æˆ–ç”¨äº Windows/Mac çš„ Docker ä¸Šè¿è¡Œã€‚&lt;/span&gt;&lt;/p&gt;
&lt;table border=&quot;1&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot;&gt;&lt;tbody readability=&quot;2&quot;&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;215&quot;&gt;
&lt;p align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;å¹³å°&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;227&quot;&gt;
&lt;p align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;æ”¯æŒçš„ç‰ˆæœ¬&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;215&quot;&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;Red Hat Enterprise Linux&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;227&quot; readability=&quot;5&quot;&gt;
&lt;p&gt;&lt;span&gt;7.3ã€7.4ã€7.5ã€7.6ã€8&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;215&quot; readability=&quot;5&quot;&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;SUSE Linux Enterprise Server&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;227&quot;&gt;
&lt;p&gt;&lt;span&gt;v12 SP2&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;215&quot;&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;Ubuntu&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;227&quot;&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;16.04&lt;/strong&gt;&lt;strong&gt;ã€&lt;/strong&gt;18.04&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;215&quot;&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;Docker&lt;/strong&gt; &lt;strong&gt;å¼•æ“&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;227&quot;&gt;
&lt;p&gt;&lt;span&gt;1.8+&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;ã€€ã€€You need to have at least Ubuntu 16.04 or you will faceÂ unmet dependenciesÂ problems.&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;ã€€ã€€SQL Server å¯¹ Linux å…·æœ‰ä»¥ä¸‹ç³»ç»Ÿè¦æ±‚ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;table border=&quot;1&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot;&gt;&lt;tbody readability=&quot;1&quot;&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;284&quot;&gt;
&lt;p&gt;&lt;span&gt;å†…å­˜ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;284&quot;&gt;
&lt;p&gt;&lt;span&gt;2 GB&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;284&quot;&gt;
&lt;p&gt;&lt;span&gt;æ–‡ä»¶ç³»ç»Ÿï¼š&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;284&quot; readability=&quot;5&quot;&gt;
&lt;p&gt;&lt;span&gt;XFS æˆ– EXT4ï¼ˆå…¶ä»–æ–‡ä»¶ç³»ç»Ÿå‡ä¸å—æ”¯æŒï¼Œå¦‚ BTRFSï¼‰&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;284&quot;&gt;
&lt;p&gt;&lt;span&gt;ç£ç›˜ç©ºé—´ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;284&quot;&gt;
&lt;p&gt;&lt;span&gt;6 GB&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;284&quot;&gt;
&lt;p&gt;&lt;span&gt;å¤„ç†å™¨é€Ÿåº¦ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;284&quot;&gt;
&lt;p&gt;&lt;span&gt;2 GHz&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;284&quot;&gt;
&lt;p&gt;&lt;span&gt;å¤„ç†å™¨æ ¸å¿ƒæ•°ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;284&quot;&gt;
&lt;p&gt;&lt;span&gt;2 ä¸ªæ ¸å¿ƒ&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;284&quot;&gt;
&lt;p&gt;&lt;span&gt;å¤„ç†å™¨ç±»å‹ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;284&quot;&gt;
&lt;p&gt;&lt;span&gt;ä»…å…¼å®¹ x64&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;table border=&quot;1&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot;&gt;&lt;tbody readability=&quot;10&quot;&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;130&quot;&gt;
&lt;p&gt;&lt;strong&gt;SQL Server&lt;/strong&gt;&lt;strong&gt;ç‰ˆæœ¬&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;438&quot;&gt;
&lt;p align=&quot;center&quot;&gt;&lt;strong&gt;æè¿°&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;130&quot;&gt;
&lt;p&gt;ä¼ä¸š&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;438&quot; readability=&quot;7&quot;&gt;
&lt;p&gt;SQL Server Enterprise Editionæ˜¯é«˜çº§äº§å“ï¼Œå¯æä¾›å…¨é¢çš„é«˜ç«¯æ•°æ®ä¸­å¿ƒåŠŸèƒ½ï¼Œå¹¶å…·æœ‰è¶…å¿«çš„æ€§èƒ½ï¼Œå¯ä¸ºä»»åŠ¡å…³é”®å‹å·¥ä½œè´Ÿè½½æä¾›é«˜æœåŠ¡æ°´å¹³ã€‚å¯ç”¨æ€§ç»„æ”¯æŒæ€»å‰¯æœ¬ï¼ˆä¸€ä¸ªä¸»å‰¯æœ¬ï¼Œå…«ä¸ªè¾…åŠ©å‰¯æœ¬ï¼‰&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;130&quot;&gt;
&lt;p&gt;æ ‡å‡†&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;438&quot; readability=&quot;7&quot;&gt;
&lt;p&gt;SQL Server Standard Editionä¸ºéƒ¨é—¨å’Œå°å‹ç»„ç»‡æä¾›äº†è¿è¡Œå…¶åº”ç”¨ç¨‹åºçš„åŸºæœ¬æ•°æ®ç®¡ç†ï¼Œå¹¶æ”¯æŒç”¨äºå†…éƒ¨éƒ¨ç½²å’Œäº‘çš„é€šç”¨å¼€å‘å·¥å…·-ä»¥æœ€å°‘çš„ITèµ„æºå®ç°æœ‰æ•ˆçš„æ•°æ®åº“ç®¡ç†ã€‚&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4.5&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;130&quot;&gt;
&lt;p&gt;ç½‘é¡µ&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;438&quot; readability=&quot;6&quot;&gt;
&lt;p&gt;SQL Server Webç‰ˆæ˜¯Webæ‰˜ç®¡è€…å’ŒWeb VAPçš„æ€»æ‹¥æœ‰æˆæœ¬ä½çš„é€‰é¡¹ï¼Œå¯ä¸ºå°å‹åˆ°å¤§å‹Webå±æ€§æä¾›å¯ä¼¸ç¼©æ€§ï¼Œå¯è´Ÿæ‹…æ€§å’Œå¯ç®¡ç†æ€§ã€‚&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;130&quot;&gt;
&lt;p&gt;&lt;strong&gt;å¼€å‘è€…&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;438&quot; readability=&quot;7&quot;&gt;
&lt;p&gt;&lt;strong&gt;SQL Server Developer&lt;/strong&gt;&lt;strong&gt;ç‰ˆæœ¬ä½¿å¼€å‘äººå‘˜å¯ä»¥åœ¨SQL Serverä¹‹ä¸Šæ„å»ºä»»ä½•ç±»å‹çš„åº”ç”¨ç¨‹åºã€‚å®ƒåŒ…å«ä¼ä¸šç‰ˆçš„æ‰€æœ‰åŠŸèƒ½ï¼Œä½†å·²è·è®¸å¯ç”¨ä½œå¼€å‘å’Œæµ‹è¯•ç³»ç»Ÿï¼Œè€Œä¸ç”¨ä½œç”Ÿäº§æœåŠ¡å™¨ã€‚SQL Server Developeræ˜¯æ„å»ºå’Œæµ‹è¯•åº”ç”¨ç¨‹åºçš„äººä»¬çš„ç†æƒ³é€‰æ‹©ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;7.5&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;130&quot;&gt;
&lt;p&gt;é€Ÿæˆç‰ˆ&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;438&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;Express Editionæ˜¯å…¥é—¨çº§çš„å…è´¹æ•°æ®åº“ï¼Œéå¸¸é€‚åˆå­¦ä¹ å’Œæ„å»ºå°å¼æœºå’Œå°å‹æœåŠ¡å™¨æ•°æ®é©±åŠ¨çš„åº”ç”¨ç¨‹åºã€‚å¯¹äºæ„å»ºå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºçš„ç‹¬ç«‹è½¯ä»¶ä¾›åº”å•†ï¼Œå¼€å‘äººå‘˜å’Œçˆ±å¥½è€…æ¥è¯´ï¼Œè¿™æ˜¯æœ€ä½³é€‰æ‹©ã€‚å¦‚æœéœ€è¦æ›´é«˜çº§çš„æ•°æ®åº“åŠŸèƒ½ï¼Œåˆ™å¯ä»¥å°†SQL Server Expressæ— ç¼å‡çº§åˆ°SQL Serverçš„å…¶ä»–æ›´é«˜ç«¯ç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;34&quot;&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;38&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
Choose an edition of SQL Server:
   1. Evaluation (free, no production use rights, 180-day limit)
   2. Developer (free, no production use rights)
   3. Express (free)
   4. Web (PAID)
   5. Standard (PAID)
   6. Enterprise (PAID)
   7. Enterprise Core (PAID)
   8. I bought a license through a retail sales channel and have a product key to enter.
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;ã€€ã€€&lt;span&gt;ä¸‹é¢å®‰è£…ä»¥&lt;strong&gt;Red Hat&lt;/strong&gt;&lt;strong&gt;ä¸ºä¾‹ã€‚&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;Wgetå®‰è£…&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
ã€€yum -y install wget
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€&lt;span&gt;ã€€å·²ç»å®‰è£…äº†å°±è·³è¿‡æ­¤æ­¥ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;å®‰è£…mssql-server&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€å¦‚æœ Linux è®¡ç®—æœºæ— æ³•è®¿é—®è”æœºå­˜å‚¨åº“ï¼Œåˆ™å¯ä»¥ç›´æ¥ä¸‹è½½åŒ…æ–‡ä»¶ã€‚Â è¿™äº›åŒ…ä½äº Microsoft å­˜å‚¨åº“ä¸­ï¼Œåœ°å€ä¸ºÂ &lt;a href=&quot;https://packages.microsoft.com/&quot;&gt;https://packages.microsoft.com&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€a)Â Â  åˆ›å»ºç›®å½•ä¸‹è½½RPMåŒ…&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
mkdir -p /opt/sqlserver2017 
cd /opt/sqlserver2017/
wget https://packages.microsoft.com/rhel/7/mssql-server-2017/mssql-server-14.0.3048.4-1.x86_64.rpm
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;Â  Â  Â  Â b)Â Â  Yumå®‰è£…mssql-server&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
yum localinstall mssql-server-14.0.3048.4-1.x86_64.rpm
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€&lt;img src=&quot;https://img2020.cnblogs.com/blog/742073/202101/742073-20210111172935491-1718203676.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;Â é…ç½®&lt;/h2&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
/opt/mssql/bin/mssql-conf setup
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€&lt;/span&gt;&lt;span&gt;è¿è¡Œ mssql-conf setupï¼ŒæŒ‰ç…§æç¤ºè®¾ç½® SA å¯†ç å¹¶é€‰æ‹©ç‰ˆæœ¬ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;è¯·ç¡®ä¿ä¸º SA å¸æˆ·æŒ‡å®šå¼ºå¯†ç ï¼ˆæœ€å°‘ 8 ä¸ªå­—ç¬¦ï¼ŒåŒ…æ‹¬å¤§å†™å’Œå°å†™å­—æ¯ã€åè¿›åˆ¶æ•°å­—å’Œ/æˆ–éå­—æ¯æ•°å­—ç¬¦å·ï¼‰ã€‚&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;Developer (free, no production use rights)ï¼ˆç‰ˆæœ¬é€‰æ‹©2ï¼ŒDeveloperï¼‰&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/742073/202101/742073-20210111173308331-1624613040.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;Â éªŒè¯æœåŠ¡&lt;/h2&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
systemctl status mssql-server
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€&lt;img src=&quot;https://img2020.cnblogs.com/blog/742073/202101/742073-20210111173351525-1833919620.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2&gt;æœåŠ¡å¯åœ&lt;/h2&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
systemctl stop mssql-server
systemctl start mssql-server
systemctl restart mssql-server
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;å®‰è£… sqlcmd å’Œ bcp SQL Server å‘½ä»¤è¡Œå·¥å…·&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;ã€€ã€€&lt;span&gt;a)Â &lt;/span&gt;&lt;/strong&gt; &lt;span&gt;&lt;strong&gt;ä¸‹è½½&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
&lt;span&gt;wget https://packages.microsoft.com/rhel/7.3/prod/msodbcsql-13.1.6.0-1.x86_64.rpm
wget https://packages.microsoft.com/rhel/7.3/prod/mssql-tools-14.0.5.0-1.x86_64.rpm&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;ã€€Â  b)Â &lt;/strong&gt; &lt;strong&gt;å®‰è£…&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
yum localinstall msodbcsql-13.1.6.0-1.x86_64.rpm
yum localinstall mssql-tools-14.0.5.0-1.x86_64.rpm
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;æ·»åŠ ç¯å¢ƒå˜é‡&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€ä¸ºæ–¹ä¾¿èµ·è§ï¼Œå‘ PATH ç¯å¢ƒå˜é‡æ·»åŠ Â &lt;code&gt;/opt/mssql-tools/bin/&lt;/code&gt;ã€‚Â è¿™æ ·å¯ä»¥åœ¨ä¸æŒ‡å®šå®Œæ•´è·¯å¾„çš„æƒ…å†µä¸‹è¿è¡Œè¿™äº›å·¥å…·ã€‚Â &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥ä¿®æ”¹ç™»å½•ä¼šè¯å’Œäº¤äº’å¼/éç™»å½•ä¼šè¯çš„è·¯å¾„ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
echo &lt;span&gt;'&lt;/span&gt;&lt;span&gt;export PATH=&quot;$PATH:/opt/mssql-tools/bin&quot;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; &amp;gt;&amp;gt; ~/&lt;span&gt;.bash_profile
echo &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;export PATH=&quot;$PATH:/opt/mssql-tools/bin&quot;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; &amp;gt;&amp;gt; ~/&lt;span&gt;.bashrc
source &lt;/span&gt;~/.bashrc
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;è®¾ç½®è¿œç¨‹è¿æ¥ï¼Œæ‰“å¼€ç«¯å£&lt;/h2&gt;
&lt;p&gt;ã€€&lt;span&gt;ã€€é»˜è®¤çš„ SQL Server ç«¯å£ä¸º TCP 1433ã€‚Â å¦‚æœä¸ºé˜²ç«å¢™ä½¿ç”¨çš„æ˜¯Â &lt;strong&gt;FirewallD&lt;/strong&gt;ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
sudo firewall-cmd --zone=&lt;span&gt;public&lt;/span&gt; --add-port=&lt;span&gt;1433&lt;/span&gt;/tcp --&lt;span&gt;permanent
sudo firewall&lt;/span&gt;-cmd --reload
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€ä½¿ç”¨ SQL Server åç§° (-S)ï¼Œç”¨æˆ·å (-U) å’Œå¯†ç  (-P) çš„å‚æ•°è¿è¡Œ sqlcmd ã€‚Â ç”¨æˆ·åä¸ºÂ &lt;code&gt;SA&lt;/code&gt;ï¼Œå¯†ç æ˜¯åœ¨å®‰è£…è¿‡ç¨‹ä¸­ä¸º SA å¸æˆ·æä¾›çš„å¯†ç ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
ã€€sqlcmd -S localhost -U SA -P &lt;span&gt;'&lt;/span&gt;&lt;span&gt;&amp;lt;YourPassword&amp;gt;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;
ã€€sqlcmd &lt;/span&gt;-S &lt;span&gt;192.168&lt;/span&gt;.&lt;span&gt;1&lt;/span&gt;.XXX -U userName
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€æ¥ç€è¾“å…¥å¯†ç ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
SELECT Name FROM Master..SysDatabases ORDER BY Name
SELECT Name FROM Sys.Databases ORDER BY Name
go
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/742073/202101/742073-20210111174153367-653211830.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€æ­¤æ—¶å¯ä»¥ç”¨Navicatæˆ–è€…SqlServer2017éªŒè¯è¿æ¥æƒ…å†µã€‚&lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;å®‰è£…è®¾ç½®Agentï¼ˆSQL Serverä»£ç†ï¼‰&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€SQL Server Agent ä¹Ÿå«SQL Serverä»£ç†ï¼Œä»¥å‰ç§°ä¸ºSQLæ‰§è¡Œè€…ï¼Œè¿™æ˜¯SQL Server&lt;/span&gt;&lt;span&gt;çš„ä»»åŠ¡æ—¥ç¨‹è¡¨ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€è¿™ç§æœåŠ¡ä¸»è¦æ˜¯ç”¨äºåœ¨è®¾å®šçš„æ—¶é—´å¤‡ä»½ã€å¤åˆ¶æ•°æ®ï¼Œä»¥åŠåœ¨è‡ªåŠ¨æ‰§è¡Œè°ƒåº¦è¡¨ä¸Šè®¾ç½®çš„å…¶ä»–é¡¹ç›®ã€‚å¯åŠ¨è¿™ä¸ªæœåŠ¡åï¼Œè®¾å®šå¥½åœ¨ä»€ä¹ˆæ—¶å€™åšä»€ä¹ˆäº‹ï¼Œè¿™ä¸ªæœåŠ¡ä¼šè®©å®ƒè‡ªåŠ¨è¿è¡Œï¼Œä¸éœ€è¦äººå·¥å¹²é¢„ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;ã€€ã€€a)Â &lt;/strong&gt; &lt;strong&gt;ä¸‹è½½&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
wget https://packages.microsoft.com/rhel/7/mssql-server-2017/mssql-server-agent-14.0.3015.40-1.x86_64.rpm
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;ã€€ã€€b)Â &lt;/strong&gt; &lt;strong&gt;å®‰è£…&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
yum localinstall mssql-server-agent-14.0.3015.40-1.x86_64.rpm
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;ã€€ã€€c)Â &lt;/strong&gt; &lt;strong&gt;å¯ç”¨ä»£ç†ï¼ˆä½œä¸šï¼‰&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€ä½¿ç”¨ sqlagent.enabled è®¾ç½®å¯å¯ç”¨ SQL Server ä»£ç†ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒSQL Server ä»£ç†å¤„äºç¦ç”¨çŠ¶æ€ã€‚ å¦‚æœ mssql.conf è®¾ç½®æ–‡ä»¶ä¸­ä¸å­˜åœ¨ sqlagent.enabledï¼Œåˆ™ SQL Server åœ¨å†…éƒ¨å‡å®šå·²ç¦ç”¨ SQL Server ä»£ç†ã€‚è‹¥è¦æ›´æ”¹æ­¤è®¾ç½®ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹æ­¥éª¤ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
sudo /opt/mssql/bin/mssql-conf set sqlagent.enabled true
sudo systemctl restart mssql-server
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;ã€€ã€€d)Â &lt;/strong&gt; &lt;strong&gt;ä»£ç†é”™è¯¯æ—¥å¿—è®¾ç½®&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€sqlpagent.errorlogfile å’Œ sqlpagent.errorlogginglevel è®¾ç½®å…è®¸ä½ åˆ†åˆ«è®¾ç½® SQL ä»£ç†æ—¥å¿—æ–‡ä»¶è·¯å¾„å’Œæ—¥å¿—è®°å½•çº§åˆ«ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€sudo /opt/mssql/bin/mssql-conf set sqlagent.errorfile &lt;strong&gt;&amp;lt;path&amp;gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€SQL ä»£ç†æ—¥å¿—è®°å½•çº§åˆ«æ˜¯ä½æ©ç å€¼ï¼Œç­‰äºï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€1 = é”™è¯¯&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€2 = è­¦å‘Š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€4 = ä¿¡æ¯&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€å¦‚æœè¦æ•è·æ‰€æœ‰çº§åˆ«ï¼Œè¯·ä½¿ç”¨Â &lt;code&gt;7&lt;/code&gt;Â ä½œä¸ºå€¼ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
ã€€sudo /opt/mssql/bin/mssql-conf set sqlagent.errorlogginglevel 7
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;è®¾ç½®é»˜è®¤è¯­è¨€ä¸æ’åºè§„åˆ™&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€a)Â Â  è‹¥è¦è·å–æ”¯æŒçš„æ’åºè§„åˆ™çš„åˆ—è¡¨ï¼Œè¯·è¿è¡ŒÂ sys.fn_helpcollationsÂ å‡½æ•°&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
SELECT NAME FROM SYS.FN_HELPCOLLATIONS()
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/742073/202101/742073-20210111181214090-42922947.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€b)Â Â  &lt;span&gt;å¦‚æœå®‰è£…æ—¶æ²¡æœ‰æŒ‡å®šç¯å¢ƒå˜é‡å‚æ•°ï¼Œä¼šæŒ‰é»˜è®¤è®¾ç½®å®‰è£…ï¼Œå­—ç¬¦é›†ä¼šæ˜¯æ‹‰ä¸å­—ç¬¦é›†ï¼Œé»˜è®¤è¯­è¨€æ˜¯è‹±è¯­ï¼Œæ­¤æ—¶ä¸­å›½ç”¨æˆ·éœ€è¦è¿›è¡Œå¦å¤–è®¾ç½®ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
systemctl stop mssql-server
/opt/mssql/bin/mssql-conf set-collation
Chinese_PRC_CI_AS
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€&lt;span&gt;c)Â Â  å¯ä»¥é€šè¿‡é¢„å…ˆè®¾ç½®ç¯å¢ƒå˜é‡æ¥æŒ‰ç…§æŒ‡å®šçš„å­—ç¬¦é›†åŠæœ¬åœ°è¯­è¨€ç­‰è®¾ç½®å‚æ•°ï¼Œè¿™æ ·çš„è¯æ— éœ€å®‰è£…åå†è¿›è¡Œé…ç½®ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
MSSQL_LCID=&lt;span&gt;'&lt;/span&gt;&lt;span&gt;2052&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; MSSQL_COLLATION=&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Chinese_PRC_CI_AS&lt;/span&gt;&lt;span&gt;'&lt;br/&gt;&lt;/span&gt;/opt/mssql/bin/mssql-conf setup
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€d)Â Â  æŸ¥è¯¢å½“å‰æ’åºè§„åˆ™&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; serverproperty(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Collation&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;è®¾ç½®å†…å­˜é™åˆ¶&lt;/h2&gt;
&lt;p&gt;ã€€&lt;span&gt;ã€€ä½¿ç”¨ memory.memorylimitmb è®¾ç½®å¯æ§åˆ¶ SQL Server å¯ç”¨çš„ç‰©ç†å†…å­˜é‡ï¼ˆä»¥ MB ä¸ºå•ä½ï¼‰ã€‚Â é»˜è®¤å€¼ä¸ºç‰©ç†å†…å­˜çš„80%ã€‚ï¼ˆæˆ‘ä»¬æ ¹æ®æƒ…å†µè€Œå®šï¼Œæ›´æ”¹æ­¤è®¾ç½®æ—¶ï¼Œä¸è¦å°†æ­¤å€¼è®¾ç½®å¾—å¤ªé«˜ã€‚Â å¦‚æœä¸ç•™å‡ºè¶³å¤Ÿçš„å†…å­˜ï¼Œåˆ™å¯èƒ½ä¼šé‡åˆ° Linux æ“ä½œç³»ç»Ÿå’Œå…¶ä»– Linux åº”ç”¨ç¨‹åºçš„é—®é¢˜ï¼‰&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€a)Â Â  ä½¿ç”¨ memory.memorylimitmb çš„ set å‘½ä»¤ä»¥æ ¹ç”¨æˆ·èº«ä»½è¿è¡Œ mssql-conf è„šæœ¬ ã€‚Â ä»¥ä¸‹ç¤ºä¾‹å°† SQL Server å¯ç”¨çš„å†…å­˜æ›´æ”¹ä¸º 3.25 GB (3328 MB)ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
sudo /opt/mssql/bin/mssql-conf &lt;span&gt;set&lt;/span&gt; memory.memorylimitmb &lt;span&gt;6656&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€b)Â Â  é‡å¯ SQL Server æœåŠ¡ä»¥åº”ç”¨æ›´æ”¹&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
sudo systemctl restart mssql-server
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;æ›´æ”¹TCPç«¯å£&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;ã€€&lt;/span&gt;&lt;span&gt;ã€€ä½¿ç”¨ network.tcpport è®¾ç½®å¯æ›´æ”¹ SQL Server ä¾¦å¬è¿æ¥çš„ TCP ç«¯å£ã€‚Â é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤ç«¯å£è®¾ç½®ä¸º 1433ã€‚Â è‹¥è¦æ›´æ”¹ç«¯å£ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ã€€&lt;span&gt;ã€€a)Â  ä½¿ç”¨â€œnetwork.tcpportâ€çš„â€œsetâ€å‘½ä»¤ä»¥æ ¹ç”¨æˆ·èº«ä»½è¿è¡Œmssql-conf è„šæœ¬&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
sudo /opt/mssql/bin/mssql-conf set network.tcpport &amp;lt;new_tcp_port&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€&lt;span&gt;ã€€b)Â  é‡å¯ SQL Server æœåŠ¡&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
sudo systemctl restart mssql-server
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€&lt;span&gt;c)Â  è¿æ¥åˆ° SQL Server åï¼Œå¿…é¡»åœ¨ä¸»æœºåæˆ– IP åœ°å€åç”¨é€—å· (,) æŒ‡å®šè‡ªå®šä¹‰ç«¯å£ã€‚&lt;/span&gt;Â &lt;/p&gt;
&lt;p&gt;ã€€ã€€&lt;span&gt;ä¾‹å¦‚ï¼Œè¦ä½¿ç”¨ SQLCMD è¿›è¡Œè¿æ¥ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€sqlcmd -S localhost,&amp;lt;new_tcp_port&amp;gt; -U test -P test&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
# iptables -A INPUT -p tcp --dport &lt;span&gt;1433&lt;/span&gt; -&lt;span&gt;j ACCEPT
# iptables&lt;/span&gt;-save &amp;gt; /etc/sysconfig/&lt;span&gt;iptables
# firewall&lt;/span&gt;-cmd --add-port=&lt;span&gt;1433&lt;/span&gt;/tcp --&lt;span&gt;permanent
# firewall&lt;/span&gt;-cmd --reload
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;æ›´æ”¹é»˜è®¤æ•°æ®æˆ–æ—¥å¿—ç›®å½•ä½ç½®&lt;/h2&gt;
&lt;p&gt;ã€€&lt;span&gt;ã€€ä½¿ç”¨ filelocation.defaultdatadir å’Œ filelocation.defaultlogdir è®¾ç½®å¯æ›´æ”¹åˆ›å»ºæ–°æ•°æ®åº“å’Œæ—¥å¿—æ–‡ä»¶çš„ä½ç½® ã€‚Â é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤ä½ç½®ä¸º /var/opt/mssql/dataã€‚Â è‹¥è¦æ›´æ”¹è¿™äº›è®¾ç½®ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹æ­¥éª¤ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€a)Â Â  ä¸ºæ–°çš„æ•°æ®åº“æ•°æ®å’Œæ—¥å¿—æ–‡ä»¶åˆ›å»ºç›®æ ‡ç›®å½•ã€‚Â ä»¥ä¸‹ç¤ºä¾‹åˆ›å»ºä¸€ä¸ªæ–°çš„&lt;strong&gt;/mssql/data&lt;/strong&gt;ç›®å½•&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
mkdir -p /mssql/data
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€b)Â Â  å°†ç›®å½•çš„æ‰€æœ‰è€…å’Œç»„æ›´æ”¹ä¸ºÂ &lt;strong&gt;mssql&lt;/strong&gt;Â ç”¨æˆ·&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;ã€€ã€€&lt;span&gt;æ•°æ®ç›®å½•çš„ä¸Šä¸€çº§ç›®å½•å¿…é¡»è®¾ç½®mssqlç”¨æˆ·æ‰ä¼šæœ‰æƒé™ï¼ï¼ï¼ï¼ï¼ˆä¸Mysqlçš„ä¸åŒï¼‰&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
sudo chown mssql /mssql
sudo chgrp mssql /mssql
sudo chown mssql /mssql/data
sudo chgrp mssql /mssql/data
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€c)Â Â  ä½¿ç”¨ mssql-conf é€šè¿‡ set å‘½ä»¤æ›´æ”¹é»˜è®¤æ•°æ®ç›®å½•&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
sudo /opt/mssql/bin/mssql-conf &lt;span&gt;set&lt;/span&gt; filelocation.defaultdatadir /mssql/data
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€ç°åœ¨ï¼Œä¸ºæ–°æ•°æ®åº“åˆ›å»ºçš„æ‰€æœ‰æ•°æ®åº“æ–‡ä»¶éƒ½å°†å­˜å‚¨åœ¨æ­¤æ–°ä½ç½®ã€‚Â &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€d)Â Â  æ›´æ”¹æ–°æ•°æ®åº“çš„æ—¥å¿—æ–‡ä»¶ (.ldf) ä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„â€œsetâ€å‘½ä»¤&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
mkdir -p /mssql/mssqllog
sudo chown mssql /mssql/mssqllog
sudo chgrp mssql /mssql/mssqllog
sudo /opt/mssql/bin/mssql-conf set filelocation.defaultlogdir /mssql/mssqllogã€€ã€€
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€e)Â Â  é‡å¯ SQL Server æœåŠ¡&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
sudo systemctl restart mssql-server
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;span&gt;æ›´æ”¹é»˜è®¤è½¬å‚¨ç›®å½•ä½ç½®&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€ä½¿ç”¨ filelocation.defaultdumpdir è®¾ç½®å¯æ›´æ”¹æ¯å½“ç³»ç»Ÿå´©æºƒæ—¶ç”Ÿæˆå†…å­˜å’Œ SQL è½¬å‚¨çš„é»˜è®¤ä½ç½®ã€‚Â é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™äº›æ–‡ä»¶åœ¨ /var/opt/mssql/log ä¸­ç”Ÿæˆã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€è‹¥è¦è®¾ç½®æ–°ä½ç½®ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€a)Â Â  æ–°çš„è½¬å‚¨æ–‡ä»¶åˆ›å»ºç›®æ ‡ç›®å½•ã€‚Â ä»¥ä¸‹ç¤ºä¾‹åˆ›å»ºä¸€ä¸ªæ–°çš„ &lt;strong&gt;/mssql/mssql&lt;/strong&gt;dump ç›®å½•&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
sudo mkdir /mssql/mssqldump
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€b)Â Â  å°†ç›®å½•çš„æ‰€æœ‰è€…å’Œç»„æ›´æ”¹ä¸ºÂ &lt;strong&gt;mssql&lt;/strong&gt;Â ç”¨æˆ·&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
sudo chown mssql /mssql/mssqldump
sudo chgrp mssql /mssql/mssqldump
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€c)Â Â  ä½¿ç”¨ mssql-conf é€šè¿‡ set å‘½ä»¤æ›´æ”¹é»˜è®¤æ•°æ®ç›®å½•&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
sudo /opt/mssql/bin/mssql-conf set filelocation.defaultdumpdir /mssql/mssqldump
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€d)Â Â  é‡å¯ SQL Server æœåŠ¡&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
sudo systemctl restart mssql-server
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;span&gt;å¯ç”¨å¯ç”¨æ€§ç»„(é»˜è®¤ä¸ç”¨å¼€å¯)&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€ä½¿ç”¨ hadr.hadrenabled é€‰é¡¹å¯åœ¨ SQL Server å®ä¾‹ä¸Šå¯ç”¨å¯ç”¨æ€§ç»„ã€‚Â ä¸‹é¢çš„å‘½ä»¤é€šè¿‡å°† hadr.hadrenabled è®¾ç½®ä¸º 1 æ¥å¯ç”¨å¯ç”¨æ€§ç»„ã€‚Â å¿…é¡»é‡å¯ SQL Serverï¼Œè¯¥è®¾ç½®æ‰èƒ½ç”Ÿæ•ˆã€‚&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
sudo /opt/mssql/bin/mssql-conf set hadr.hadrenabled  1
sudo systemctl restart mssql-server
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;span&gt;éªŒè¯åˆ›å»ºåº“&lt;/span&gt;&lt;/h2&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;ã€€ã€€a)Â Â  åˆ›å»ºåˆ›å»ºåº“çš„å­˜å‚¨è¿‡ç¨‹ï¼Œå¦‚æœ‰è¿™ä¸ªå­˜å‚¨è¿‡ç¨‹å°±ä¸ç”¨åˆ›å»ºäº†ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;44&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
CREATE PROCEDURE [dbo].[PROC_CREATE_DB]
    @DB_NAME  varchar(100),
    @data_path_root varchar(256) = 'D:\DBData\' --'/mssql/data/'
AS
BEGIN
    IF DB_ID (@DB_NAME) IS NOT NULL
    EXECUTE ('DROP DATABASE ' + @DB_NAME)
    
    -- execute the CREATE DATABASE statement 
    EXECUTE ('CREATE DATABASE ' + @DB_NAME + '
    ON 
    ( NAME = '''+ @DB_NAME +''',
        FILENAME = '''+ @data_path_root + @DB_NAME + '.mdf'',
        SIZE = 500,
        MAXSIZE = UNLIMITED,
        FILEGROWTH = 500 )
    LOG ON
    ( NAME = '''+ @DB_NAME +'_log'',
        FILENAME = '''+ @data_path_root + @DB_NAME + '_log.ldf'',
        SIZE = 50MB,
        MAXSIZE = UNLIMITED,
        FILEGROWTH = 50 )'
    )
    EXECUTE ('ALTER DATABASE ' + @DB_NAME  + ' SET RECOVERY SIMPLE')
ENDã€€
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€&lt;span&gt;ã€€b)Â Â  æ‰§è¡Œåˆ›å»ºåº“çš„å­˜å‚¨è¿‡ç¨‹ï¼Œæ³¨æ„è·¯å¾„&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
EXEC PROC_CREATE_DB 'åº“å','/mssql/data/'  --åº“åã€è·¯å¾„
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;æŸ¥è¯¢å½“å‰æ—¶é—´&lt;/h2&gt;
&lt;p&gt;ã€€ã€€&lt;span&gt;å¦‚æœä¸å½“å‰æ—¶é—´ä¸ç¬¦ï¼Œåˆ™éœ€è¦ä¿®æ”¹ç³»ç»Ÿæ—¶é—´ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
clock --set --date=&quot;2020-10-19 19:30:39&quot;
clock â€“hctosys
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; GETDATE()
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/742073/202101/742073-20210111182602655-780618099.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€å¦‚æœä¸€å°æœåŠ¡å™¨åŒæ—¶éƒ¨ç½²äº†mysqlï¼Œåˆ™ä¿®æ”¹æ—¶é—´åè¦å»mysqlæŸ¥è¯¢å½“å‰æ—¶é—´&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
select now()
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/742073/202101/742073-20210111182634221-566024985.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/span&gt;&lt;/p&gt;

&lt;h2&gt;åˆ›å»ºç”¨æˆ·å¹¶åˆ†é…æƒé™&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€éœ€è¦SAç”¨æˆ·ç™»å½•æ‰æœ‰æƒé™è®¾ç½®ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€a)Â Â  åº”ç”¨ç¨‹åºå’Œç®¡ç†äººå‘˜è´¦å·&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;ã€€ã€€Linuxä¸Šçš„SQL Serverä¸æ”¯æŒADMINISTER BULK OPERATIONSæƒé™æˆ–bulkadminè§’è‰²ã€‚åªæœ‰sysadminå¯ä»¥åœ¨Linuxä¸Šå¯¹SQL Serveræ‰§è¡Œæ‰¹é‡æ’å…¥ã€‚&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;ã€€ã€€sysadminè¯»å†™æƒé™æ¯”è¾ƒé«˜ï¼Œä¸“é—¨ç»™ç³»ç»Ÿç›¸å…³ç¨‹åºæˆ–ç®¡ç†å‘˜ä½¿ç”¨ï¼Œä¸å¾—é€šè¿‡ä»»ä½•äººä¸ºæ–¹å¼ä½¿ç”¨ã€‚&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;36&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
DECLARE @loginName VARCHAR(50) = 'ç”¨æˆ·å'
DECLARE @loginPassword VARCHAR(50) = 'å¯†ç '
IF EXISTS(SELECT 1 FROM sys.syslogins WHERE name = @loginName)
BEGIN
        PRINT 'ç™»å½•åã€' + @loginName + 'ã€‘å·²å­˜åœ¨ã€‚'
        RETURN
END

DECLARE @sql VARCHAR(8000)
SET @sql = 'CREATE LOGIN ' + @loginName + ' WITH PASSWORD = ''' + @loginPassword + ''''
EXEC(@sql) 
--åˆ†é…è§’è‰²
EXEC sys.sp_addsrvrolemember @rolename = 'sysadmin', @loginame = @loginName
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;ã€€&lt;span&gt;ã€€æ‰€ä»¥ï¼Œå¦‚æœæ˜¯éƒ¨ç½²åœ¨&lt;strong&gt;Windows&lt;/strong&gt;çš„è¯ï¼Œç¨‹åºè´¦æˆ·ç”¨bulkadminã€dbcreatorã€‚å»ºè®®ä¸ç”¨sysadminã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:sql;gutter:true;&quot;&gt;
EXEC sys.sp_addsrvrolemember @rolename = 'bulkadmin', @loginame = @loginName
EXEC sys.sp_addsrvrolemember @rolename = 'dbcreator', @loginame = @loginName
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;åˆ é™¤ç”¨æˆ·ï¼ˆä¸è¦æ‰‹è´±ï¼ï¼‰&lt;/h2&gt;
&lt;p&gt;ã€€&lt;span&gt;ã€€a)Â Â Â Â Â  åœ¨åˆ é™¤è¯¥ç™»å½•åä¹‹å‰,è¯·æ›´æ”¹ç›¸åº”æ•°æ®åº“çš„æ‰€æœ‰è€…ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
USE [SLSW_YN]; 
EXEC dbo.sp_changedbowner @loginame = N'sa', @map = false;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€&lt;/span&gt;&lt;span&gt;@map: å°†åˆ«ååŠå…¶æƒé™ç§»äº¤ç»™æ–°çš„æ•°æ®åº“æ‰€æœ‰è€…&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€æ‰¾åˆ°å¯¹åº”ç”¨æˆ·æ‰€æ‹¥æœ‰çš„æ•°æ®åº“æƒé™ï¼Œå¹¶è½¬ç»™å…¶ä»–ç”¨æˆ·,å¦‚SAç”¨æˆ·ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;34&quot;&gt;
&lt;pre class=&quot;brush:sql;gutter:true;&quot;&gt;
SELECT 'use ['+A.NAME+']; exec dbo.sp_changedbowner @loginame = N''sa'', @map = false; '
FROM SYS.DATABASES A
INNER JOIN SYS.SYSLOGINS B ON A.OWNER_SID=B.SID
WHERE B.NAME='ç”¨æˆ·å'
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€&lt;span&gt;ã€€b)Â Â  æ‰§è¡Œaï¼‰äº§ç”Ÿçš„æ‰€æœ‰SQLè¯­å¥&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€Â  Â c)Â Â  æ€æ‰è´¦å·æ‰€æœ‰çº¿ç¨‹å†åˆ é™¤è´¦å·ï¼ˆä¸æ€çš„è¯ï¼Œç¦ç”¨ä»¥åï¼ŒåŸæ¥æ‰“å¼€çš„è¿›ç¨‹ä¾ç„¶å¯ä»¥è¿è¡Œï¼‰&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;54&quot;&gt;
&lt;pre class=&quot;brush:sql;gutter:true;&quot;&gt;
CREATE PROC [dbo].[PROC_mgr_login_process_kill_all]
@loginName VARCHAR(255)
AS
BEGIN
DECLARE @processes TABLE
(
ID INT IDENTITY(1, 1),
spid INT,
ecid INT,
status VARCHAR(50),
loginname VARCHAR(255),
hostname VARCHAR(255),
blk INT,
dbname VARCHAR(255),
cmd VARCHAR(8000),
request_id INT
)

DECLARE @sql VARCHAR(8000)
SET @sql = 'EXEC sp_who ''' + @loginName + ''''

INSERT INTO @processes
(
spid,
ecid,
status,
loginname,
hostname,
blk,
dbname,
cmd,
request_id
)
EXEC(@sql)

DECLARE @iLoop INT
DECLARE @totalCount INT

SELECT @iLoop = 1,
@totalCount = COUNT(*)
FROM @processes

WHILE @iLoop &amp;lt;= @totalCount
BEGIN
DECLARE @spid INT
SELECT @spid = spid FROM @processes WHERE ID = @iLoop

SET @sql = 'KILL ' + CAST(@spid AS VARCHAR(20))
EXEC(@sql)

SET @iLoop += 1
END
EN
&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:sql;gutter:true;&quot;&gt;
EXEC MTNOH_AAA_DB.[dbo].[PROC_mgr_login_process_kill_all] 'ç”¨æˆ·å';
EXEC sys.sp_droplogin @loginame = 'ç”¨æˆ·å';
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;mssql.confæ ¼å¼é…ç½®&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€ç±»ä¼¼mysqlçš„etc/my.cnf&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;ã€€ã€€/var/opt/mssql/mssql.conf&lt;/strong&gt;æ–‡ä»¶æä¾›äº†æ¯ä¸ªè®¾ç½®çš„ç¤ºä¾‹&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:sql;gutter:true;&quot;&gt;
ã€€ã€€cat /var/opt/mssql/mssql.conf
&lt;/pre&gt;&lt;/div&gt;

&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;è‡ª &lt;span lang=&quot;EN-US&quot;&gt;CU20&lt;/span&gt; èµ·ï¼Œ&lt;span lang=&quot;EN-US&quot;&gt;SQL Server 2017&lt;/span&gt; å¼€å§‹æ”¯æŒ &lt;span lang=&quot;EN-US&quot;&gt;RHEL 8&lt;/span&gt;ã€‚&lt;span lang=&quot;EN-US&quot;&gt;Â &lt;/span&gt;ä»¥ä¸‹ç”¨äº &lt;span lang=&quot;EN-US&quot;&gt;SQL Server 2017&lt;/span&gt; çš„å‘½ä»¤æŒ‡å‘ &lt;span lang=&quot;EN-US&quot;&gt;RHEL 8&lt;/span&gt; å­˜å‚¨åº“ã€‚&lt;span lang=&quot;EN-US&quot;&gt;Â RHEL 8&lt;/span&gt; æœªé¢„å®‰è£… &lt;span lang=&quot;EN-US&quot;&gt;SQL Server&lt;/span&gt; æ‰€éœ€çš„ &lt;span lang=&quot;EN-US&quot;&gt;python2&lt;/span&gt;ã€‚&lt;span lang=&quot;EN-US&quot;&gt;Â &lt;/span&gt;åœ¨å¼€å§‹ &lt;span lang=&quot;EN-US&quot;&gt;SQL Server&lt;/span&gt; çš„å®‰è£…æ­¥éª¤ä¹‹å‰ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå¹¶éªŒè¯æ˜¯å¦é€‰æ‹©äº† &lt;span lang=&quot;EN-US&quot;&gt;python2&lt;/span&gt; ä½œä¸ºè§£é‡Šå™¨ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:sql;gutter:true;&quot;&gt;
sudo alternatives --config python
# If not configured, install python2 and openssl10 using the following commands:
sudo yum install python2
sudo yum install compat-openssl10
# Configure python2 as the default interpreter using this command:
sudo alternatives --config python
&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span&gt;ã€€ã€€æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…ä»¥ä¸‹åšå®¢ï¼Œäº†è§£å¦‚ä½•å®‰è£… &lt;span lang=&quot;EN-US&quot;&gt;python2&lt;/span&gt; å¹¶å°†å…¶é…ç½®ä¸ºé»˜è®¤è§£é‡Šå™¨ï¼š&lt;span lang=&quot;EN-US&quot;&gt;Â &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://www.redhat.com/en/blog/installing-microsoft-sql-server-red-hat-enterprise-linux-8-beta&quot;&gt;&lt;span&gt;https://www.redhat.com/en/blog/installing-microsoft-sql-server-red-hat-enterprise-linux-8-beta&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;Â &lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span&gt;ã€€ã€€å¦‚æœä½¿ç”¨ &lt;span lang=&quot;EN-US&quot;&gt;RHEL 7&lt;/span&gt;ï¼Œè¯·å°†ä»¥ä¸‹è·¯å¾„æ›´æ”¹ä¸º&lt;span lang=&quot;EN-US&quot;&gt;Â /rhel/7Â &lt;/span&gt;è€Œä¸æ˜¯&lt;span lang=&quot;EN-US&quot;&gt;Â /rhel/8&lt;/span&gt;ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;&lt;span&gt;&lt;span&gt;å®‰è£…&lt;span lang=&quot;EN-US&quot;&gt;mssql-server&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/h2&gt;
&lt;p class=&quot;MsoListParagraph&quot;&gt;&lt;span&gt;&lt;span&gt;Â  ä¸‹è½½&lt;span lang=&quot;EN-US&quot;&gt;SQL Server 2017 Red Hat&lt;/span&gt; å­˜å‚¨åº“é…ç½®æ–‡ä»¶å¹¶å®‰è£…&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:sql;gutter:true;&quot;&gt;
sudo curl -o /etc/yum.repos.d/mssql-server.repo https://packages.microsoft.com/config/rhel/8/mssql-server-2019.repo
sudo yum install -y mssql-server
&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;ã€€ã€€å¦‚æœæƒ³å®‰è£… &lt;span lang=&quot;EN-US&quot;&gt;SQL Server 2019&lt;/span&gt;ï¼Œå¿…é¡»æ”¹ä¸ºæ³¨å†Œ &lt;span lang=&quot;EN-US&quot;&gt;SQL Server 2019&lt;/span&gt; å­˜å‚¨åº“ã€‚ ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£… &lt;span lang=&quot;EN-US&quot;&gt;SQL Server 2019&lt;/span&gt;ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:sql;gutter:true;&quot;&gt;
sudo curl -o /etc/yum.repos.d/mssql-server.repo https://packages.microsoft.com/config/rhel/8/mssql-server-2019.repo
sudo yum install -y mssql-server
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;span&gt;&lt;span&gt;é…ç½®&lt;/span&gt;&lt;/span&gt;&lt;/h2&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:sql;gutter:true;&quot;&gt;
/opt/mssql/bin/mssql-conf setup
&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;ã€€ã€€è¿è¡Œ &lt;span lang=&quot;EN-US&quot;&gt;mssql-conf setup&lt;/span&gt;ï¼ŒæŒ‰ç…§æç¤ºè®¾ç½® &lt;span lang=&quot;EN-US&quot;&gt;SA&lt;/span&gt; å¯†ç å¹¶é€‰æ‹©ç‰ˆæœ¬ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;&lt;span&gt;å®‰è£…&lt;/span&gt; &lt;span lang=&quot;EN-US&quot;&gt;sqlcmd&lt;/span&gt; &lt;span&gt;å’Œ&lt;/span&gt; &lt;span lang=&quot;EN-US&quot;&gt;bcp SQL Server&lt;/span&gt; &lt;span&gt;å‘½ä»¤è¡Œå·¥å…·&lt;/span&gt;&lt;/h2&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;ã€€ã€€ä¸‹è½½ &lt;span lang=&quot;EN-US&quot;&gt;Microsoft Red Hat&lt;/span&gt; å­˜å‚¨åº“é…ç½®æ–‡ä»¶&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:sql;gutter:true;&quot;&gt;
sudo curl -o /etc/yum.repos.d/msprod.repo https://packages.microsoft.com/config/rhel/8/prod.repo
&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;ã€€ã€€å¦‚æœå®‰è£…äº†æ—©æœŸç‰ˆæœ¬çš„&lt;span lang=&quot;EN-US&quot;&gt;Â &lt;strong&gt;mssql-tools&lt;/strong&gt;&lt;/span&gt;ï¼Œè¯·åˆ é™¤æ‰€æœ‰æ—§çš„ &lt;span lang=&quot;EN-US&quot;&gt;unixODBC&lt;/span&gt;åŒ…&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
sudo yum remove unixODBC-utf16 unixODBC-utf16-devel
&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;ã€€ã€€ä½¿ç”¨ &lt;span lang=&quot;EN-US&quot;&gt;unixODBC&lt;/span&gt; å¼€å‘äººå‘˜åŒ…å®‰è£…&lt;span lang=&quot;EN-US&quot;&gt;Â &lt;strong&gt;mssql-tools&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:sql;gutter:true;&quot;&gt;
sudo yum install -y mssql-tools unixODBC-devel
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€â€¦â€¦â€¦â€¦&lt;/p&gt;
&lt;p&gt;ã€€ã€€å…¶ä»–å‚è€ƒè„±æœºå®‰è£…ç« èŠ‚&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;45&quot;&gt;
&lt;pre class=&quot;brush:sql;gutter:true;&quot;&gt;
#!/bin/bash -e

# Use the following variables to control your install:

# Password for the SA user (required)
MSSQL_SA_PASSWORD='&amp;lt;YourStrong!Passw0rd&amp;gt;'

# Product ID of the version of SQL server you're installing
# Must be evaluation, developer, express, web, standard, enterprise, or your 25 digit product key
# Defaults to developer
MSSQL_PID='evaluation'

# Install SQL Server Agent (recommended)
SQL_ENABLE_AGENT='y'

# Install SQL Server Full Text Search (optional)
# SQL_INSTALL_FULLTEXT='y'

# Create an additional user with sysadmin privileges (optional)
# SQL_INSTALL_USER='&amp;lt;Username&amp;gt;'
# SQL_INSTALL_USER_PASSWORD='&amp;lt;YourStrong!Passw0rd&amp;gt;'

if [ -z $MSSQL_SA_PASSWORD ]
then
  echo Environment variable MSSQL_SA_PASSWORD must be set for unattended install
  exit 1
fi

echo Adding Microsoft repositories...
sudo curl -o /etc/yum.repos.d/mssql-server.repo https://packages.microsoft.com/config/rhel/7/mssql-server-2017.repo
sudo curl -o /etc/yum.repos.d/msprod.repo https://packages.microsoft.com/config/rhel/7/prod.repo

echo Installing SQL Server...
sudo yum install -y mssql-server

echo Running mssql-conf setup...
sudo MSSQL_SA_PASSWORD=$MSSQL_SA_PASSWORD \
     MSSQL_PID=$MSSQL_PID \
     /opt/mssql/bin/mssql-conf -n setup accept-eula

echo Installing mssql-tools and unixODBC developer...
sudo ACCEPT_EULA=Y yum install -y mssql-tools unixODBC-devel

# Add SQL Server tools to the path by default:
echo Adding SQL Server tools to your path...
echo PATH=&quot;$PATH:/opt/mssql-tools/bin&quot; &amp;gt;&amp;gt; ~/.bash_profile
echo 'export PATH=&quot;$PATH:/opt/mssql-tools/bin&quot;' &amp;gt;&amp;gt; ~/.bashrc
source ~/.bashrc

# Optional Enable SQL Server Agent :
if [ ! -z $SQL_ENABLE_AGENT ]
then
  echo Enable SQL Server Agent...
  sudo /opt/mssql/bin/mssql-conf set sqlagent.enabled true
  sudo systemctl restart mssql-server
fi

# Optional SQL Server Full Text Search installation:
if [ ! -z $SQL_INSTALL_FULLTEXT ]
then
    echo Installing SQL Server Full-Text Search...
    sudo yum install -y mssql-server-fts
fi

# Configure firewall to allow TCP port 1433:
echo Configuring firewall to allow traffic on port 1433...
sudo firewall-cmd --zone=public --add-port=1433/tcp --permanent
sudo firewall-cmd --reload

# Example of setting post-installation configuration options
# Set trace flags 1204 and 1222 for deadlock tracing:
#echo Setting trace flags...
#sudo /opt/mssql/bin/mssql-conf traceflag 1204 1222 on

# Restart SQL Server after making configuration changes:
echo Restarting SQL Server...
sudo systemctl restart mssql-server

# Connect to server and get the version:
counter=1
errstatus=1
while [ $counter -le 5 ] &amp;amp;&amp;amp; [ $errstatus = 1 ]
do
  echo Waiting for SQL Server to start...
  sleep 5s
  /opt/mssql-tools/bin/sqlcmd \
    -S localhost \
    -U SA \
    -P $MSSQL_SA_PASSWORD \
    -Q &quot;SELECT @@VERSION&quot; 2&amp;gt;/dev/null
  errstatus=$?
  ((counter++))
done

# Display error if connection failed:
if [ $errstatus = 1 ]
then
  echo Cannot connect to SQL Server, installation aborted
  exit $errstatus
fi

# Optional new user creation:
if [ ! -z $SQL_INSTALL_USER ] &amp;amp;&amp;amp; [ ! -z $SQL_INSTALL_USER_PASSWORD ]
then
  echo Creating user $SQL_INSTALL_USER
  /opt/mssql-tools/bin/sqlcmd \
    -S localhost \
    -U SA \
    -P $MSSQL_SA_PASSWORD \
    -Q &quot;CREATE LOGIN [$SQL_INSTALL_USER] WITH PASSWORD=N'$SQL_INSTALL_USER_PASSWORD', DEFAULT_DATABASE=[master], CHECK_EXPIRATION=ON, CHECK_POLICY=ON; ALTER SERVER ROLE [sysadmin] ADD MEMBER [$SQL_INSTALL_USER]&quot;
fi

echo Done!
&lt;/pre&gt;&lt;/div&gt;

&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;ã€€&lt;/span&gt;&lt;span&gt;ã€€&lt;/span&gt;&lt;span&gt;&lt;span&gt;è‹¥è¦éªŒè¯&lt;/span&gt; &lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;Linux&lt;/span&gt; ä¸Šçš„ &lt;span lang=&quot;EN-US&quot;&gt;SQL Server&lt;/span&gt; çš„å½“å‰ç‰ˆæœ¬å’Œç‰ˆæœ¬ï¼Œ&lt;/span&gt;&lt;span&gt;è¯·å…ˆå®‰è£…&lt;span lang=&quot;EN-US&quot;&gt;Â &lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;SQL Server&lt;/span&gt; &lt;span&gt;å‘½ä»¤è¡Œå·¥å…·&lt;span&gt;ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span&gt;ã€€ã€€ä½¿ç”¨&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;â€œsqlcmdâ€&lt;/span&gt;&lt;span&gt;è¿è¡Œæ˜¾ç¤º&lt;/span&gt; &lt;span lang=&quot;EN-US&quot;&gt;SQL Server&lt;/span&gt; &lt;span&gt;ç‰ˆæœ¬çš„&lt;/span&gt; &lt;span lang=&quot;EN-US&quot;&gt;Transact-SQL&lt;/span&gt; &lt;span&gt;å‘½ä»¤ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:sql;gutter:true;&quot;&gt;
sqlcmd -S localhost -U SA -Q 'select @@VERSION'
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/742073/202101/742073-20210111190108549-1608554281.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
select @@VERSION
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Â &lt;img src=&quot;https://img2020.cnblogs.com/blog/742073/202101/742073-20210111190119184-1980255398.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:sql;gutter:true;&quot;&gt;
SELECT SERVERPROPERTY('Edition')
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/742073/202101/742073-20210111190139420-1723849435.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;

&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;ã€€ã€€&lt;span&gt;è‹¥è¦åˆ é™¤ &lt;span lang=&quot;EN-US&quot;&gt;Linux&lt;/span&gt; ä¸Šçš„&lt;span lang=&quot;EN-US&quot;&gt;â€œmssql-serverâ€&lt;/span&gt;åŒ…ï¼Œä¸åŒå¹³å°å‘½ä»¤ä¼šä¸ä¸€æ ·ï¼š&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;table class=&quot;MsoTableGrid&quot; border=&quot;1&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot;&gt;&lt;tbody readability=&quot;3&quot;&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;284&quot;&gt;
&lt;p class=&quot;MsoNormal&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å¹³å°&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;284&quot;&gt;
&lt;p class=&quot;MsoNormal&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;åŒ…åˆ é™¤å‘½ä»¤&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;284&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span lang=&quot;EN-US&quot;&gt;RHEL&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;284&quot; readability=&quot;5&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;sudo yum remove mssql-server&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;284&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;SLES&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;284&quot; readability=&quot;5&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;sudo zypper remove mssql-server&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;284&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;Ubuntu&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td width=&quot;284&quot; readability=&quot;5&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;sudo apt-get remove mssql-server&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;ã€€ã€€åˆ é™¤åŒ…ä¸ä¼šåˆ é™¤ç”Ÿæˆçš„æ•°æ®åº“æ–‡ä»¶ã€‚&lt;span lang=&quot;EN-US&quot;&gt;Â &lt;/span&gt;å¦‚æœå¸Œæœ›åˆ é™¤æ•°æ®åº“æ–‡ä»¶ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
ã€€sudo rm -rf /var/opt/mssql/
&lt;/pre&gt;&lt;/div&gt;

&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;ã€€ã€€&lt;span&gt;è‹¥è¦å°†&lt;span lang=&quot;EN-US&quot;&gt;â€œmssql-serverâ€&lt;/span&gt;åŒ…æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œè¯·æ ¹æ®ä½ çš„å¹³å°ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä¹‹ä¸€ï¼š&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;table class=&quot;MsoTableGrid&quot; border=&quot;1&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot;&gt;&lt;tbody readability=&quot;3&quot;&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;284&quot;&gt;
&lt;p class=&quot;MsoNormal&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å¹³å°&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;284&quot;&gt;
&lt;p class=&quot;MsoNormal&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;åŒ…æ›´æ–°å‘½ä»¤&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;284&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;RHEL&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;284&quot; readability=&quot;5&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;sudo yum update mssql-server&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;284&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;SLES&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;284&quot; readability=&quot;5&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;sudo zypper update mssql-server&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;284&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;Ubuntu&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;284&quot; readability=&quot;5&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;code&gt;&lt;span lang=&quot;EN-US&quot;&gt;sudo apt-get update&lt;/span&gt;&lt;/code&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;br/&gt;&lt;/span&gt; &lt;code&gt;&lt;span lang=&quot;EN-US&quot;&gt;sudo apt-get install mssql-server&lt;/span&gt;&lt;/code&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span&gt;ã€€ã€€è¿™äº›å‘½ä»¤å°†ä¸‹è½½æœ€æ–°åŒ…ï¼Œå¹¶æ›¿æ¢&lt;span lang=&quot;EN-US&quot;&gt;Â &lt;/span&gt;&lt;/span&gt;&lt;code&gt;&lt;span lang=&quot;EN-US&quot;&gt;/opt/mssql/&lt;/span&gt;&lt;/code&gt;&lt;span lang=&quot;EN-US&quot;&gt;Â &lt;/span&gt;&lt;span&gt;ä¸‹çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚&lt;span lang=&quot;EN-US&quot;&gt;Â &lt;/span&gt;æ­¤æ“ä½œä¸ä¼šå½±å“åˆ°ç”¨æˆ·ç”Ÿæˆçš„æ•°æ®åº“å’Œç³»ç»Ÿæ•°æ®åº“ã€‚&lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;Â &lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span&gt;ã€€ã€€è‹¥è¦å‡çº§ &lt;span lang=&quot;EN-US&quot;&gt;SQL Server&lt;/span&gt;ï¼Œè¯·é¦–å…ˆ&lt;/span&gt;&lt;strong&gt;&lt;span&gt;å°†é…ç½®çš„å­˜å‚¨åº“æ›´æ”¹&lt;span&gt;ä¸ºæ‰€éœ€çš„ &lt;span lang=&quot;EN-US&quot;&gt;SQL Server&lt;/span&gt; ç‰ˆæœ¬&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ã€‚&lt;span lang=&quot;EN-US&quot;&gt;Â &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span&gt;ã€€ã€€ç„¶åä½¿ç”¨åŒä¸€ä¸ª &lt;span lang=&quot;EN-US&quot;&gt;update&lt;/span&gt; å‘½ä»¤å‡çº§ &lt;span lang=&quot;EN-US&quot;&gt;SQL Server&lt;/span&gt; ç‰ˆæœ¬ã€‚&lt;span lang=&quot;EN-US&quot;&gt;Â &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;Â &lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;ã€€ã€€å­˜å‚¨åº“çš„ä½œç”¨&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼šç”¨äºè·å–æ•°æ®åº“å¼•æ“åŒ…ã€&lt;span lang=&quot;EN-US&quot;&gt;mssql-server&lt;/span&gt; ä»¥åŠç›¸å…³ &lt;span lang=&quot;EN-US&quot;&gt;SQL Server&lt;/span&gt; åŒ… ã€‚&lt;span lang=&quot;EN-US&quot;&gt;Â &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;Â &lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span&gt;ã€€ã€€ç°æœ‰äº”ä¸ªä¸»è¦å­˜å‚¨åº“ï¼š&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;table class=&quot;MsoTableGrid&quot; border=&quot;1&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot;&gt;&lt;tbody readability=&quot;5&quot;&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;189&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å­˜å‚¨åº“&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;189&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;åç§°&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;189&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;è¯´æ˜&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;189&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;2019&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;189&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;mssql-server-2019&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;189&quot; readability=&quot;5&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;SQL Server 2019&lt;/span&gt; &lt;span&gt;ç´¯ç§¯æ›´æ–° &lt;span lang=&quot;EN-US&quot;&gt;(CU)&lt;/span&gt; å­˜å‚¨åº“ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;189&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;2019 GDR&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;189&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;mssql-server-2019-gdr&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;189&quot; readability=&quot;5&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;SQL Server 2019 GDR&lt;/span&gt; &lt;span&gt;å­˜å‚¨åº“ä»…ç”¨äºå…³é”®æ›´æ–°ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;189&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;2019&lt;/span&gt; &lt;span&gt;é¢„è§ˆç‰ˆ&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;189&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;mssql-server-preview&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;189&quot; readability=&quot;5&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;SQL Server 2019&lt;/span&gt; &lt;span&gt;é¢„è§ˆç‰ˆå’Œ &lt;span lang=&quot;EN-US&quot;&gt;RC&lt;/span&gt; å­˜å‚¨åº“ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;Â &lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;189&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;2017&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;189&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;mssql-server-2017&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;189&quot; readability=&quot;5&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;SQL Server 2017&lt;/span&gt; &lt;span&gt;ç´¯ç§¯æ›´æ–° &lt;span lang=&quot;EN-US&quot;&gt;(CU)&lt;/span&gt; å­˜å‚¨åº“ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;189&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;2017 GDR&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;189&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;mssql-server-2017-gdr&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;189&quot; readability=&quot;5&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;SQL Server 2017 GDR&lt;/span&gt; &lt;span&gt;å­˜å‚¨åº“ä»…ç”¨äºå…³é”®æ›´æ–°ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p class=&quot;MsoNormal&quot;&gt;Â &lt;/p&gt;

&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;ã€€ã€€&lt;span&gt;è‹¥è¦å°† &lt;span lang=&quot;EN-US&quot;&gt;SQL Server&lt;/span&gt; å›æ»šæˆ–é™çº§åˆ°ä»¥å‰çš„ç‰ˆæœ¬ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹æ­¥éª¤ï¼š&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoListParagraph&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span&gt;Â  Â  Â  Â a)&lt;/span&gt;&lt;/span&gt;&lt;span&gt;æ ‡è¯†è¦é™çº§åˆ°çš„ &lt;span lang=&quot;EN-US&quot;&gt;SQL Server&lt;/span&gt; åŒ…çš„ç‰ˆæœ¬å·ã€‚&lt;span lang=&quot;EN-US&quot;&gt;Â &lt;/span&gt;æœ‰å…³åŒ…ç‰ˆæœ¬å·çš„åˆ—è¡¨ï¼Œè¯·å‚é˜…&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://docs.microsoft.com/zh-cn/sql/linux/sql-server-linux-release-notes?view=sql-server-linux-2017&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;å‘è¡Œè¯´æ˜&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoListParagraph&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;span&gt;Â  Â  Â  Â b)&lt;/span&gt;&lt;/span&gt;&lt;span&gt;é™çº§åˆ° &lt;span lang=&quot;EN-US&quot;&gt;SQL Server&lt;/span&gt; çš„æ—©æœŸç‰ˆæœ¬ã€‚&lt;span lang=&quot;EN-US&quot;&gt;Â &lt;/span&gt;åœ¨ä»¥ä¸‹å‘½ä»¤ä¸­ï¼Œå°†&lt;span lang=&quot;EN-US&quot;&gt;Â &lt;/span&gt;&lt;/span&gt;&lt;code&gt;&lt;span lang=&quot;EN-US&quot;&gt;&amp;lt;version_number&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;span lang=&quot;EN-US&quot;&gt;Â &lt;/span&gt;&lt;span&gt;æ›¿æ¢ä¸ºæ­¥éª¤ &lt;span lang=&quot;EN-US&quot;&gt;1&lt;/span&gt; ä¸­æ ‡è¯†çš„ &lt;span lang=&quot;EN-US&quot;&gt;SQL Server&lt;/span&gt; ç‰ˆæœ¬å·ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;table class=&quot;MsoTableGrid&quot; border=&quot;1&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot;&gt;&lt;tbody readability=&quot;3&quot;&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;130&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å¹³å°&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;438&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;åŒ…æ›´æ–°å‘½ä»¤&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;130&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;RHEL&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;438&quot; readability=&quot;5&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;sudo yum downgrade mssql-server-&amp;lt;version_number&amp;gt;.x86_64&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;130&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;SLES&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;438&quot; readability=&quot;5&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;sudo zypper install --oldpackage mssql-server=&amp;lt;version_number&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;130&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;Ubuntu&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;438&quot; readability=&quot;5&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;code&gt;&lt;span lang=&quot;EN-US&quot;&gt;sudo apt-get install mssql-server=&amp;lt;version_number&amp;gt;&lt;/span&gt;&lt;/code&gt; &lt;span lang=&quot;EN-US&quot;&gt;sudo systemctl start mssql-server&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;ã€€ã€€åªæ”¯æŒé™çº§åˆ°ç›¸åŒä¸»ç‰ˆæœ¬ï¼ˆå¦‚&lt;span lang=&quot;EN-US&quot;&gt;SQL Server 2017&lt;/span&gt;ï¼‰å†…çš„ç‰ˆæœ¬ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;ã€€ã€€&lt;span&gt;ç›¸æ¯”&lt;span lang=&quot;EN-US&quot;&gt;Windows&lt;/span&gt;ï¼Œ&lt;span lang=&quot;EN-US&quot;&gt;Linux&lt;/span&gt;ä¼šæœ‰äº›åŠŸèƒ½ä¸å®Œå…¨æ”¯æŒã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;table class=&quot;MsoTableGrid&quot; border=&quot;1&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot;&gt;&lt;tbody readability=&quot;5&quot;&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;111&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;strong&gt;&lt;span&gt;ç±»åˆ«&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;57&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;strong&gt;&lt;span lang=&quot;EN-US&quot;&gt;Windows&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;55&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;strong&gt;&lt;span lang=&quot;EN-US&quot;&gt;Linux&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;345&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;strong&gt;&lt;span&gt;è¯´æ˜&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;111&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;è¡¨&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;57&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;âˆš&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;55&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;âˆš&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;345&quot;&gt;Â &lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;111&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;SQL&lt;/span&gt;&lt;span&gt;åŸºç¡€è¯­æ³•&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;57&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;âˆš&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;55&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;âˆš&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;345&quot;&gt;Â &lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;111&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;å­˜å‚¨è¿‡ç¨‹&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;57&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;âˆš&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;55&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;âˆš&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;345&quot;&gt;Â &lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;111&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;å‡½æ•°&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;57&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;âˆš&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;55&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;âˆš&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;345&quot; readability=&quot;5&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;åŒ…æ‹¬&lt;span lang=&quot;EN-US&quot;&gt;CLR&lt;/span&gt;å‡½æ•°ã€‚ä¸æ”¯æŒè®¾ç½®äº†&lt;span lang=&quot;EN-US&quot;&gt;EXTERNAL_ACCESS&lt;/span&gt;æˆ–&lt;span lang=&quot;EN-US&quot;&gt;UNSAFE&lt;/span&gt;æƒé™çš„&lt;span lang=&quot;EN-US&quot;&gt;CLR&lt;/span&gt;ç¨‹åºé›†&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;111&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;ç´¢å¼•&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;57&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;âˆš&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;55&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;âˆš&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;345&quot;&gt;Â &lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;111&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;ä½œä¸š&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;57&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;âˆš&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;55&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;âˆš&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;345&quot;&gt;Â &lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;111&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;è§†å›¾&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;57&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;âˆš&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;55&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;âˆš&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;345&quot;&gt;Â &lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;111&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;äº‹åŠ¡&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;57&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;âˆš&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;55&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;âˆš&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;345&quot;&gt;Â &lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;111&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;æ•°æ®åº“åˆ†åŒº&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;57&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;âˆš&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;55&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;âˆš&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;345&quot;&gt;Â &lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;111&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;é“¾æ¥æœåŠ¡å™¨&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;57&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;âˆš&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;55&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;âˆš&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;345&quot; readability=&quot;5&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;åªæ”¯æŒ&lt;span lang=&quot;EN-US&quot;&gt;SQLServer&lt;/span&gt;é“¾æ¥æœåŠ¡å™¨ï¼Œä¸æ”¯æŒ&lt;span lang=&quot;EN-US&quot;&gt;Mysql&lt;/span&gt;ã€‚ä½ç‰ˆæœ¬è¿æ¥é«˜ç‰ˆæœ¬ä¼šå‡ºç°éƒ¨åˆ†é—®é¢˜&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;111&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;ç³»ç»Ÿè¡¨&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;57&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;âˆš&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;55&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;âˆš&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;345&quot;&gt;Â &lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;111&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;å¤‡ä»½ã€è¿˜åŸ&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;57&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;âˆš&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;55&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;âˆš&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;345&quot;&gt;Â &lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;111&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;è°ƒç”¨&lt;span lang=&quot;EN-US&quot;&gt;bat&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;57&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;âˆš&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;55&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;strong&gt;&lt;span&gt;Ã—&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;345&quot; readability=&quot;5&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;æ—§ç‰ˆæœ¬å·¥å•åˆ›å»ºã€æ›´æ–°ä¼šç”¨åˆ°&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;111&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;BCP&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;57&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;âˆš&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;55&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;strong&gt;&lt;span&gt;Ã—&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;345&quot; readability=&quot;5&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;xp_cmdshell&lt;/span&gt;&lt;span&gt;ã€&lt;span lang=&quot;EN-US&quot;&gt;bulk insert&lt;/span&gt;ï¼Œæ•°æ®åº“å…¥åº“ä¼šä¹±ç &lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;111&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;æ–‡ä»¶æ“ä½œ&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;57&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;âˆš&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;55&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;strong&gt;&lt;span&gt;Ã—&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;345&quot; readability=&quot;5&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;xp_cmdshell&lt;/span&gt;&lt;span&gt;ã€&lt;span lang=&quot;EN-US&quot;&gt;bulk insert&lt;/span&gt;ï¼Œæ•°æ®åº“å…¥åº“ä¼šä¹±ç &lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;111&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;ç»´æŠ¤è®¡åˆ’&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;57&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;âˆš&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;55&quot;&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;strong&gt;&lt;span&gt;Ã—&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; nowrap=&quot;nowrap&quot; width=&quot;345&quot;&gt;Â &lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h2&gt;&lt;span&gt;&lt;br/&gt;æ•´åº“è¿ç§»&lt;/span&gt;&lt;/h2&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span&gt;ã€€ã€€æŠŠ&lt;span lang=&quot;EN-US&quot;&gt;Sqlserver2008&lt;/span&gt;ï¼ˆ&lt;span lang=&quot;EN-US&quot;&gt;Windows&lt;/span&gt;ï¼‰çš„æ•°æ®åº“è¿ç§»åˆ°&lt;span lang=&quot;EN-US&quot;&gt;Sqlserver2017&lt;/span&gt;ï¼ˆ&lt;span lang=&quot;EN-US&quot;&gt;Linux&lt;/span&gt;ï¼‰&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ã€€&lt;/strong&gt;ã€€&lt;span&gt;a)Â &lt;/span&gt; &lt;span&gt;ä»Sqlserver2008(Windows)å¤‡ä»½&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;42&quot;&gt;
&lt;pre class=&quot;brush:sql;gutter:true;&quot;&gt;
SELECT 'BACKUP DATABASE ' + name + ' TO  DISK = N'''
+ 'D:'
+ '\' + name + '.bak''
   WITH COMPRESSION,NOFORMAT, NOINIT,
   NAME = N''' + name + '-å®Œæ•´ æ•°æ®åº“ å¤‡ä»½'',
   SKIP, NOREWIND, NOUNLOAD,  STATS = 10'
FROM SYS.DATABASES
WHERE NAME IN ('åº“å1','åº“å2')
ORDER BY NAME
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/742073/202101/742073-20210111190650422-480677405.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€&lt;span&gt;b)Â  åœ¨Sqlserver2017(Linux)è¿˜åŸ&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;39&quot;&gt;
&lt;pre class=&quot;brush:sql;gutter:true;&quot;&gt;
exec PROC_CREATE_DB 'åº“å','/mssql/data/'
RESTORE DATABASE SLSW FROM DISK = '/home/slsw1009/SLSW.bak'
WITH
MOVE 'SLSW' TO '/home/mssqldata/SLSW.mdf',
MOVE 'SLSW_log' TO '/home/mssqldata/SLSW.ldf',
STATS = 1, REPLACE, RECOVERY
GO
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/742073/202101/742073-20210111190844811-171940518.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â ã€€ã€€&lt;span&gt;&lt;span&gt;æ¢å¤æ•°æ®åº“æ—¶å‡ºç°&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;Exclusive access could not be obtained because the database is in use&lt;/span&gt;&lt;span&gt;é”™è¯¯ï¼Œé‚£æ˜¯å› ä¸ºåº“æ­£åœ¨ä½¿ç”¨ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;ã€€ã€€è¿è¡Œä»¥ä¸‹&lt;span lang=&quot;EN-US&quot;&gt;query&lt;/span&gt;è¯­å¥å°†æ•°æ®åº“ç¦»çº¿&lt;span lang=&quot;EN-US&quot;&gt;(&lt;/span&gt;æŠŠ&lt;span lang=&quot;EN-US&quot;&gt;[db_name]&lt;/span&gt;æ›¿æ¢æˆä½ çš„æ•°æ®åº“åï¼Œä¸‹åŒ&lt;span lang=&quot;EN-US&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:sql;gutter:true;&quot;&gt;
use master 
alter database [db_name] set offline with rollback immediate
&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;ã€€ã€€æ¥ç€è¿›è¡Œæ•°æ®åº“æ¢å¤çš„ç›¸å…³æ“ä½œ&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
RESTORE DATABASE SLSW FROM DISK = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;/home/slsw1009//SLSW.bak&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;
WITH
MOVE &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;SLSW&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; TO &lt;span&gt;'&lt;/span&gt;&lt;span&gt;/home/mssqldata/SLSW.mdf&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;,
MOVE &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;SLSW_log&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; TO &lt;span&gt;'&lt;/span&gt;&lt;span&gt;/home/mssqldata/SLSW.ldf&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;,
STATS &lt;/span&gt;= &lt;span&gt;1&lt;/span&gt;&lt;span&gt;, REPLACE, RECOVERY
GO&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;ã€€ã€€æœ€åæ‰§è¡Œä¸‹é¢çš„&lt;span lang=&quot;EN-US&quot;&gt;query&lt;/span&gt;è¯­å¥å°†æ•°æ®åº“æ¢å¤åœ¨çº¿&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;use master 
alter database [db_name] &lt;/span&gt;&lt;span&gt;set&lt;/span&gt; online with rollback immediate;
&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;MsoListParagraph&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;Â  &lt;span&gt;c)&lt;span&gt;Â &lt;/span&gt;&lt;/span&gt;&lt;/span&gt; &lt;span&gt;&lt;span&gt;åœ¨&lt;span lang=&quot;EN-US&quot;&gt;Sqlserver&lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;2017(Linux)&lt;/span&gt;&lt;span&gt;å¤‡ä»½&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span&gt;ã€€ã€€å¤‡ä»½è·¯å¾„è¦æœ‰&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;mssql&lt;/span&gt;&lt;span&gt;ç”¨æˆ·çš„æƒé™&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:sql;gutter:true;&quot;&gt;
mkdir -p /home/mssqlbackup
chown mssql /home/mssqlbackup
chgrp mssql /home/mssqlbackup
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;40&quot;&gt;
&lt;pre class=&quot;brush:sql;gutter:true;&quot;&gt;
BACKUP DATABASE TestDB TO  DISK = N'/home/mssqlbackup/TestDB.bak'    
WITH COMPRESSION,NOFORMAT, NOINIT,    
NAME = N'TestDB_BACKUP', SKIP, NOREWIND, NOUNLOAD,  STATS = 10
&lt;/pre&gt;&lt;/div&gt;

&lt;p class=&quot;MsoListParagraph&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;Â a)&lt;span&gt;Â Â &lt;/span&gt;&lt;/span&gt; &lt;span&gt;å®‰è£…&lt;span lang=&quot;EN-US&quot;&gt;SQL Server&lt;/span&gt;çš„ä¸»æœºåçš„é•¿åº¦å¿…é¡»ä¸º&lt;span lang=&quot;EN-US&quot;&gt;15&lt;/span&gt;ä¸ªå­—ç¬¦æˆ–æ›´å°‘&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;è§£å†³æ–¹æ³•ï¼šå°†&lt;span lang=&quot;EN-US&quot;&gt;/ etc / hostname&lt;/span&gt;ä¸­çš„åç§°æ›´æ”¹ä¸º&lt;span lang=&quot;EN-US&quot;&gt;15&lt;/span&gt;ä¸ªå­—ç¬¦ä»¥ä¸‹çš„é•¿åº¦ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoListParagraph&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;Â b)&lt;span&gt;Â Â &lt;/span&gt;&lt;/span&gt; &lt;span&gt;æ‰‹åŠ¨å°†ç³»ç»Ÿæ—¶é—´å€’é€€è®¾ç½®ä¸ºæ—¶é—´ä¼šå¯¼è‡´&lt;span lang=&quot;EN-US&quot;&gt;SQL Server&lt;/span&gt;åœæ­¢æ›´æ–°&lt;span lang=&quot;EN-US&quot;&gt;SQL Server&lt;/span&gt;ä¸­çš„å†…éƒ¨ç³»ç»Ÿæ—¶é—´&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;è§£å†³æ–¹æ³•ï¼šé‡æ–°å¯åŠ¨&lt;span lang=&quot;EN-US&quot;&gt;SQL Server&lt;/span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoListParagraph&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;Â c)&lt;span&gt;Â Â &lt;/span&gt;&lt;/span&gt; &lt;span&gt;ä»…æ”¯æŒå•å®ä¾‹å®‰è£…&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoListParagraph&quot;&gt;&lt;span&gt;å»ºè®®åœ¨ä¸»æœºä¸Šè¿è¡Œå¤šä¸ªå®¹å™¨ä»¥å…·æœ‰å¤šä¸ªä¸åŒçš„å®ä¾‹ã€‚ä½¿ç”¨&lt;span lang=&quot;EN-US&quot;&gt;docker&lt;/span&gt;å¯ä»¥è½»æ¾å®ç°è¿™ä¸€ç‚¹ï¼Œä½†æ˜¯æ¯ä¸ªå®¹å™¨éƒ½éœ€è¦ä¾¦å¬ä¸åŒçš„ç«¯å£&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoListParagraph&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;Â d)&lt;span&gt;Â Â &lt;/span&gt;&lt;/span&gt; &lt;span lang=&quot;EN-US&quot;&gt;Linux&lt;/span&gt;&lt;span&gt;ä¸Šä¸æ”¯æŒç”¨æˆ·æƒé™&lt;span lang=&quot;EN-US&quot;&gt;ADMINISTER BULK OPERATIONS&lt;/span&gt;&lt;span&gt;ï¼ˆ&lt;span lang=&quot;EN-US&quot;&gt;bulkadmin&lt;/span&gt;æœåŠ¡å™¨è§’è‰²ï¼‰&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoListParagraph&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;Â e)&lt;span&gt;Â Â &lt;/span&gt;&lt;/span&gt; &lt;span lang=&quot;EN-US&quot;&gt;SQLServer&lt;/span&gt;&lt;span&gt;å’Œç›¸å…³å·¥å…·ç›®å‰ä¸æ”¯æŒåœ¨&lt;span lang=&quot;EN-US&quot;&gt;Windows 10&lt;/span&gt;ä¸Šè¿è¡Œçš„&lt;span lang=&quot;EN-US&quot;&gt;Linux&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoListParagraph&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;Â f)&lt;span&gt;Â Â &lt;/span&gt;&lt;/span&gt; &lt;span lang=&quot;EN-US&quot;&gt;SQL Server&lt;/span&gt;&lt;span&gt;æ•°æ®å’Œæ—¥å¿—ç›®å½•ä¸æ”¯æŒç¬¦å·é“¾æ¥&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoListParagraph&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;Â g)&lt;span&gt;Â Â &lt;/span&gt;&lt;/span&gt; &lt;span&gt;é‡ç½®ç³»ç»Ÿç®¡ç†ï¼ˆ&lt;span lang=&quot;EN-US&quot;&gt;SA&lt;/span&gt;ï¼‰å¯†ç &lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:sql;gutter:true;&quot;&gt;
sudo systemctl stop mssql-server
sudo /opt/mssql/bin/mssql-conf setup
sqlcmd -S myserver -U sa -P Test\$\$
&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;MsoListParagraph&quot;&gt;&lt;span&gt;å¦‚æœåœ¨&lt;span lang=&quot;EN-US&quot;&gt;SQL Server&lt;/span&gt;ç™»å½•å¯†ç ä¸­ä½¿ç”¨æŸäº›å­—ç¬¦ï¼Œåˆ™åœ¨ç»ˆç«¯çš„&lt;span lang=&quot;EN-US&quot;&gt;Linux&lt;/span&gt;å‘½ä»¤ä¸­ä½¿ç”¨å®ƒä»¬æ—¶ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨åæ–œæ å°†å…¶è½¬ä¹‰ã€‚ä¾‹å¦‚ï¼Œåœ¨ç»ˆç«¯å‘½ä»¤&lt;span lang=&quot;EN-US&quot;&gt;/ shell&lt;/span&gt;è„šæœ¬ä¸­ä½¿ç”¨ç¾å…ƒç¬¦å·ï¼ˆ&lt;span lang=&quot;EN-US&quot;&gt;$&lt;/span&gt;ï¼‰æ—¶ï¼Œå¿…é¡»éšæ—¶å¯¹å…¶è¿›è¡Œè½¬ä¹‰&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoListParagraph&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://tldp.org/LDP/abs/html/special-chars.html&quot;&gt;https://tldp.org/LDP/abs/html/special-chars.html&lt;/a&gt;&lt;/span&gt;&lt;span&gt;ï¼ˆç‰¹æ®Šå­—ç¬¦ï¼‰&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;


&lt;p&gt;&lt;span&gt;ã€€ã€€Translate å‡½æ•°ï¼ˆå®ç°æ‰¹é‡æ›¿æ¢ï¼‰&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€string_aggå‡½æ•°ï¼ˆåˆ†ç»„åˆå¹¶å­—ç¬¦ä¸²ï¼‰&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€trimå‡½æ•°ï¼ˆç§»é™¤å·¦å³ç©ºæ ¼ã€æŒ‡å®šå­—ç¬¦ï¼‰&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€string_splitå‡½æ•°ï¼ˆæ‹†åˆ†å­—ç¬¦ä¸²ï¼‰&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€æ•°æ®è½¬æˆ&lt;span lang=&quot;EN-US&quot;&gt;JSONæ ¼å¼ï¼ˆ2016ç‰¹æ€§ï¼‰&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;å‚è€ƒèµ„æ–™&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.microsoft.com/zh-cn/sql/linux/sql-server-linux-configure-mssql-conf?view=sql-server-linux-2017%20%EF%BC%88%E5%BE%AE%E8%BD%AF%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%EF%BC%89%20https://www.cnblogs.com/shanyou/p/5272628.html%20&quot; target=&quot;_blank&quot;&gt;https://docs.microsoft.com/zh-cn/sql/linux/sql-server-linux-configure-mssql-conf?view=sql-server-linux-2017&lt;/a&gt; ï¼ˆå¾®è½¯å®˜æ–¹æ–‡æ¡£ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.cnblogs.com/shanyou/p/5272628.html&quot;&gt;https://www.cnblogs.com/shanyou/p/5272628.html&lt;/a&gt;Â ï¼ˆèƒŒæ™¯æ®µè½æ‘˜æŠ„ï¼‰&lt;/p&gt;

</description>
<pubDate>Mon, 11 Jan 2021 15:26:00 +0000</pubDate>
<dc:creator>èµ–å¤©å“æ°´</dc:creator>
<og:description>ä¸Šä¸ªæœˆï¼Œæœ‰ä¸ªæœ‹å‹é—®æˆ‘è¯´Sql Severå‘Mysqlè¿ç§»æœ‰ä»€ä¹ˆå¥½çš„ç»éªŒåˆ†äº«ï¼Œä»–ä»¬å…¬å¸å®¢æˆ·æ˜ç¡®æå‡ºä¸å†æä¾›WindowsæœåŠ¡å™¨ï¼Œç°åœ¨è®¡åˆ’Mysqlè¿ç§»ã€‚æˆ‘è¯´Mysqlè¿ç§»æˆæœ¬å¤ªé«˜äº†ï¼Œä¸å¦¨å¯ä»¥äº†è§£ä¸€ä¸‹SQ</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/camelliabloglyf/p/14262631.html</dc:identifier>
</item>
<item>
<title>Spring Security OAuth2.0è®¤è¯æˆæƒä¸‰ï¼šä½¿ç”¨JWTä»¤ç‰Œ - ç‹‚ç›—ä¸€ææ¢…</title>
<link>http://www.cnblogs.com/kuangdaoyizhimei/p/14264844.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/kuangdaoyizhimei/p/14264844.html</guid>
<description>&lt;p&gt;æœ¬ç¯‡æ–‡ç« å°†ä¼šè®²è§£é›†æˆjwtä»¥åŠå°†å®¢æˆ·ç«¯ä¿¡æ¯å’Œæˆæƒç ä¿¡æ¯ä¿å­˜åˆ°æ•°æ®åº“&lt;/p&gt;&lt;div id=&quot;cnblogs_post_body&quot; readability=&quot;242.99777643016&quot;&gt;
&lt;p&gt;Spring Security OAuth2.0ç³»åˆ—æ–‡ç« ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;/blockquote&gt;
&lt;p&gt;å‰é¢ä¸¤ç¯‡æ–‡ç« è¯¦ç»†è®²è§£äº†å¦‚ä½•åŸºäºspring boot + oath2.0æ­å»ºè®¤è¯ä¸­å¿ƒå’Œèµ„æºä¸­å¿ƒï¼Œæœ¬ç¯‡æ–‡ç« å°†ä¼šè®²è§£é›†æˆjwtä»¥åŠå°†å®¢æˆ·ç«¯ä¿¡æ¯å’Œæˆæƒç ä¿¡æ¯ä¿å­˜åˆ°æ•°æ®åº“ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä¸€ã€-jwt&quot;&gt;ä¸€ã€ JWT&lt;/h2&gt;
&lt;h3 id=&quot;1-jwtç®€ä»‹&quot;&gt;1. JWTç®€ä»‹&lt;/h3&gt;
&lt;p&gt;JSON Web Tokenï¼ˆJWTï¼‰æ˜¯ä¸€ä¸ªå¼€æ”¾çš„è¡Œä¸šæ ‡å‡†ï¼ˆRFC 7519ï¼‰ï¼Œå®ƒå®šä¹‰äº†ä¸€ç§ç®€ä»‹çš„ã€è‡ªåŒ…å«çš„åè®®æ ¼å¼ï¼Œç”¨äºåœ¨é€šä¿¡åŒæ–¹ä¼ é€’jsonå¯¹è±¡ï¼Œä¼ é€’çš„ä¿¡æ¯ç»è¿‡æ•°å­—ç­¾åå¯ä»¥è¢«éªŒè¯å’Œä¿¡ä»»ã€‚JWTå¯ä»¥ä½¿ç”¨HMACç®—æ³•æˆ–ä½¿ç”¨RSAçš„å…¬é’¥/ç§é’¥å¯¹æ¥ç­¾åï¼Œé˜²æ­¢è¢«ç¯¡æ”¹ã€‚&lt;/p&gt;
&lt;p&gt;å®˜ç½‘ï¼š&lt;a href=&quot;https://jwt.io/&quot; target=&quot;_blank&quot;&gt;https://jwt.io/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ ‡å‡†ï¼š &lt;a href=&quot;https://tools.ietf.org/html/rfc7519&quot; target=&quot;_blank&quot;&gt;https://tools.ietf.org/html/rfc7519&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;JWTä»¤ç‰Œçš„ä¼˜ç‚¹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1ï¼‰jwtåŸºäºjsonï¼Œéå¸¸æ–¹ä¾¿è§£æã€‚&lt;/p&gt;
&lt;p&gt;2ï¼‰å¯ä»¥åœ¨ä»¤ç‰Œä¸­è‡ªå®šä¹‰ä¸°å¯Œçš„å†…å®¹ï¼Œæ˜“æ‰©å±•ã€‚&lt;/p&gt;
&lt;p&gt;3ï¼‰é€šè¿‡éå¯¹ç§°åŠ å¯†ç®—æ³•åŠæ•°å­—ç­¾åæŠ€æœ¯ï¼ŒJWTé˜²æ­¢ç¯¡æ”¹ï¼Œå®‰å…¨æ€§é«˜ã€‚&lt;/p&gt;
&lt;p&gt;4ï¼‰èµ„æºæœåŠ¡ä½¿ç”¨JWTå¯ä¸ä¾èµ–è®¤è¯æœåŠ¡å³å¯å®Œæˆæˆæƒã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¼ºç‚¹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1ï¼‰JWTä»¤ç‰Œè¾ƒé•¿ï¼Œå å­˜å‚¨ç©ºé—´æ¯”è¾ƒå¤§ï¼Œè¿™æ„å‘³ç€ä¼šè€—è´¹ä¸€å®šçš„å¸¦å®½èµ„æº&lt;/p&gt;
&lt;p&gt;2ï¼‰JWTç­¾åå’ŒéªŒç­¾éƒ½è¦è€—è´¹å¤„ç†å™¨èµ„æº&lt;/p&gt;
&lt;h3 id=&quot;2-jwtä»¤ç‰Œç»“æ„&quot;&gt;2. JWTä»¤ç‰Œç»“æ„&lt;/h3&gt;
&lt;p&gt;JWTä»¤ç‰Œç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œæ¯éƒ¨åˆ†ä¸­é—´ä½¿ç”¨ç‚¹ï¼ˆ.ï¼‰åˆ†éš”ï¼Œæ¯”å¦‚ï¼šxxxxx.yyyyy.zzzzz&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.1 Header&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¤´éƒ¨åŒ…æ‹¬ä»¤ç‰Œçš„ç±»å‹ï¼ˆå³JWTï¼‰åŠä½¿ç”¨çš„å“ˆå¸Œç®—æ³•ï¼ˆå¦‚HMAC SHA256æˆ–RSAï¼‰ä¸€ä¸ªä¾‹å­å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;ä¸‹è¾¹æ˜¯Headeréƒ¨åˆ†çš„å†…å®¹&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-json&quot;&gt;{ 
&quot;alg&quot;: &quot;HS256&quot;,
&quot;typ&quot;: &quot;JWT&quot;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å°†ä¸Šè¾¹çš„å†…å®¹ä½¿ç”¨Base64Urlç¼–ç ï¼Œå¾—åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²å°±æ˜¯JWTä»¤ç‰Œçš„ç¬¬ä¸€éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.2 Payload&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒéƒ¨åˆ†æ˜¯è´Ÿè½½ï¼Œå†…å®¹ä¹Ÿæ˜¯ä¸€ä¸ªjsonå¯¹è±¡ï¼Œå®ƒæ˜¯å­˜æ”¾æœ‰æ•ˆä¿¡æ¯çš„åœ°æ–¹ï¼Œå®ƒå¯ä»¥å­˜æ”¾jwtæä¾›çš„ç°æˆå­—æ®µï¼Œæ¯”å¦‚ï¼šissï¼ˆç­¾å‘è€…ï¼‰,expï¼ˆè¿‡æœŸæ—¶é—´æˆ³ï¼‰, subï¼ˆé¢å‘çš„ç”¨æˆ·ï¼‰ç­‰ï¼Œä¹Ÿå¯è‡ªå®šä¹‰å­—æ®µã€‚æ­¤éƒ¨åˆ†ä¸å»ºè®®å­˜æ”¾æ•æ„Ÿä¿¡æ¯ï¼Œå› ä¸ºæ­¤éƒ¨åˆ†å¯ä»¥è§£ç è¿˜åŸåŸå§‹å†…å®¹ã€‚æœ€åå°†ç¬¬äºŒéƒ¨åˆ†è´Ÿè½½ä½¿ç”¨Base64Urlç¼–ç ï¼Œå¾—åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²å°±æ˜¯JWTä»¤ç‰Œçš„ç¬¬äºŒéƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-json&quot;&gt;{ 
&quot;sub&quot;: &quot;1234567890&quot;,
&quot;name&quot;: &quot;456&quot;,
&quot;admin&quot;: true
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;2.3 Signature&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸‰éƒ¨åˆ†æ˜¯ç­¾åï¼Œæ­¤éƒ¨åˆ†ç”¨äºé˜²æ­¢jwtå†…å®¹è¢«ç¯¡æ”¹ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªéƒ¨åˆ†ä½¿ç”¨base64urlå°†å‰ä¸¤éƒ¨åˆ†è¿›è¡Œç¼–ç ï¼Œç¼–ç åä½¿ç”¨ç‚¹ï¼ˆ.ï¼‰è¿æ¥ç»„æˆå­—ç¬¦ä¸²ï¼Œæœ€åä½¿ç”¨headerä¸­å£°æ˜ç­¾åç®—æ³•è¿›è¡Œç­¾åã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;HMACSHA256( 
base64UrlEncode(header) + &quot;.&quot; +
base64UrlEncode(payload),
secret
)
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;base64UrlEncode(header)ï¼šjwtä»¤ç‰Œçš„ç¬¬ä¸€éƒ¨åˆ†ã€‚&lt;/li&gt;
&lt;li&gt;base64UrlEncode(payload)ï¼šjwtä»¤ç‰Œçš„ç¬¬äºŒéƒ¨åˆ†ã€‚&lt;/li&gt;
&lt;li&gt;secretï¼šç­¾åæ‰€ä½¿ç”¨çš„å¯†é’¥ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;äºŒã€é…ç½®jwt&quot;&gt;äºŒã€é…ç½®JWT&lt;/h2&gt;
&lt;h3 id=&quot;1è®¤è¯æœåŠ¡é…ç½®jwt&quot;&gt;1.è®¤è¯æœåŠ¡é…ç½®JWT&lt;/h3&gt;
&lt;p&gt;TokenConfigç±»çš„ä¿®æ”¹&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Configuration
public class TokenConfig {

private static final String SIGNING_KEY = &quot;auth123&quot;;

@Bean
public TokenStore tokenStore() {
return new JwtTokenStore(accessTokenConverter());
}

@Bean
public JwtAccessTokenConverter accessTokenConverter(){
JwtAccessTokenConverter jwtAccessTokenConverter = new JwtAccessTokenConverter();
jwtAccessTokenConverter.setSigningKey(SIGNING_KEY);//å¯¹ç§°ç§˜é’¥ï¼Œèµ„æºæœåŠ¡å™¨ä½¿ç”¨è¯¥ç§˜é’¥æ¥éªŒè¯
return jwtAccessTokenConverter;
}
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;AuthorizationServerTokenServicesè®¾ç½®Tokenå¢å¼ºç±»&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Autowired
private JwtAccessTokenConverter jwtAccessTokenConverter;

@Bean
public AuthorizationServerTokenServices tokenServices(){
DefaultTokenServices services = new DefaultTokenServices();
services.setClientDetailsService(clientDetailsService);
services.setSupportRefreshToken(true);
services.setTokenStore(tokenStore);
services.setAccessTokenValiditySeconds(7200);
services.setRefreshTokenValiditySeconds(259200);

TokenEnhancerChain tokenEnhancerChain = new TokenEnhancerChain();
tokenEnhancerChain.setTokenEnhancers(Collections.singletonList(jwtAccessTokenConverter));
services.setTokenEnhancer(tokenEnhancerChain);

return services;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç„¶åå°±å¯ä»¥æµ‹è¯•äº†ï¼š&lt;/p&gt;
&lt;p&gt;POSTè¯·æ±‚æ¥å£ï¼š&lt;a href=&quot;http://127.0.0.1:30000/oauth/token?client_id=c1&amp;amp;client_secret=secret&amp;amp;grant_type=password&amp;amp;username=zhangsan&amp;amp;password=123&quot; target=&quot;_blank&quot;&gt;http://127.0.0.1:30000/oauth/token?client_id=c1&amp;amp;client_secret=secret&amp;amp;grant_type=password&amp;amp;username=zhangsan&amp;amp;password=123&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¾—åˆ°å“åº”ç»“æœï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-json&quot;&gt;{
&quot;access_token&quot;: &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOlsicmVzMSJdLCJ1c2VyX25hbWUiOiJ6aGFuZ3NhbiIsInNjb3BlIjpbIlJPTEVfQURNSU4iLCJST0xFX1VTRVIiLCJST0xFX0FQSSJdLCJleHAiOjE2MTAzNzI5MzUsImF1dGhvcml0aWVzIjpbInAxIiwicDIiXSwianRpIjoiOWQzMzRmZGMtOTcwZC00YmJkLWI2MmMtZDU4MDZkNTgzM2YwIiwiY2xpZW50X2lkIjoiYzEifQ.gZraRNeX-o_jKiH7XQgg3TlUQBpxUcXa2-qR_Treu8U&quot;,
&quot;token_type&quot;: &quot;bearer&quot;,
&quot;refresh_token&quot;: &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOlsicmVzMSJdLCJ1c2VyX25hbWUiOiJ6aGFuZ3NhbiIsInNjb3BlIjpbIlJPTEVfQURNSU4iLCJST0xFX1VTRVIiLCJST0xFX0FQSSJdLCJhdGkiOiI5ZDMzNGZkYy05NzBkLTRiYmQtYjYyYy1kNTgwNmQ1ODMzZjAiLCJleHAiOjE2MTA2MjQ5MzUsImF1dGhvcml0aWVzIjpbInAxIiwicDIiXSwianRpIjoiN2U1NzE0NTgtNmU2Zi00YjlmLTkxODQtOWUzZmVmZmQ1YTNjIiwiY2xpZW50X2lkIjoiYzEifQ.wyiS-z-xhBPZSODXZHQVDJCQ6dcmeJjAwBPWe2GhT94&quot;,
&quot;expires_in&quot;: 7199,
&quot;scope&quot;: &quot;ROLE_ADMIN ROLE_USER ROLE_API&quot;,
&quot;jti&quot;: &quot;9d334fdc-970d-4bbd-b62c-d5806d5833f0&quot;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¼šå‘ç°accessTokené•¿äº†å¾ˆå¤šï¼Œè¿™æ˜¯å› ä¸ºtokenæ˜¯jwtå­—ç¬¦ä¸²ï¼Œåˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼Œç¬¬äºŒéƒ¨åˆ†payloadæºå¸¦äº†å¾ˆå¤šä¿¡æ¯ï¼Œæ‰“å¼€jwt.ioç½‘ç«™ï¼Œå°†ä¸Šé¢çš„accessTokenè´´ä¸Šå»ï¼Œå¯ä»¥çœ‹åˆ°Base64è§£ç åçš„ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://blog.kdyzm.cn/storage/thumbnails/_signature/2B8J8S7BH0UB15MRJNP45M1G6J.png&quot; alt=&quot;2021-01-11_201526.png&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;2èµ„æºæœåŠ¡é…ç½®&quot;&gt;2.èµ„æºæœåŠ¡é…ç½®&lt;/h3&gt;
&lt;p&gt;ç¬¬ä¸€æ­¥ï¼Œå°†è®¤è¯æœåŠ¡ä¸­çš„TokenConfigç›´æ¥æ‹·è´åˆ°èµ„æºæœåŠ¡ä¸­&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒæ­¥ï¼Œä¿®æ”¹ResouceServerConfig ç±»&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Autowired
private TokenStore tokenStore;

@Override
public void configure(ResourceServerSecurityConfigurer resources) throws Exception {
resources
.resourceId(RESOURCE_ID)
// .tokenServices(resourceServerTokenServices)//ä»¤ç‰ŒæœåŠ¡
.tokenStore(tokenStore)
.stateless(true);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å³å¯å®Œæˆèµ„æºæœåŠ¡é›†æˆjwtçš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;h3 id=&quot;3æ¥å£æµ‹è¯•&quot;&gt;3.æ¥å£æµ‹è¯•&lt;/h3&gt;
&lt;p&gt;POSTè¯·æ±‚ &lt;a href=&quot;http://127.0.0.1:30000/oauth/token?client_id=c1&amp;amp;client_secret=secret&amp;amp;grant_type=password&amp;amp;username=zhangsan&amp;amp;password=123&quot; target=&quot;_blank&quot;&gt;http://127.0.0.1:30000/oauth/token?client_id=c1&amp;amp;client_secret=secret&amp;amp;grant_type=password&amp;amp;username=zhangsan&amp;amp;password=123&lt;/a&gt; è·å–ä»¤ç‰Œï¼Œè·å–åˆ°accessTokenä¹‹åæºå¸¦token GET è¯·æ±‚ &lt;a href=&quot;http://127.0.0.1:30001/r1&quot; target=&quot;_blank&quot;&gt;http://127.0.0.1:30001/r1&lt;/a&gt; ï¼Œå¾—åˆ°å“åº”ç»“æœï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-txt&quot;&gt;è®¿é—®èµ„æºr1
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å³å¯è¯æ˜æˆåŠŸã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä¸‰ã€å®¢æˆ·ç«¯ä¿¡æ¯ä¿å­˜åˆ°æ•°æ®åº“&quot;&gt;ä¸‰ã€å®¢æˆ·ç«¯ä¿¡æ¯ä¿å­˜åˆ°æ•°æ®åº“&lt;/h2&gt;
&lt;p&gt;è®¤è¯æœåŠ¡å®¢æˆ·ç«¯ä¿¡æ¯è¿˜æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œç°åœ¨å°†å…¶æ”¹é€ æ”¾åˆ°æ•°æ®åº“ä¸­&lt;/p&gt;
&lt;h3 id=&quot;1-æ–°å»ºè¡¨&quot;&gt;1. æ–°å»ºè¡¨&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-sql&quot;&gt;DROP TABLE IF EXISTS `oauth_client_details`;

CREATE TABLE `oauth_client_details` (
`client_id` varchar(255) NOT NULL COMMENT 'å®¢æˆ·ç«¯æ ‡è¯†',
`resource_ids` varchar(255) DEFAULT NULL COMMENT 'æ¥å…¥èµ„æºåˆ—è¡¨',
`client_secret` varchar(255) DEFAULT NULL COMMENT 'å®¢æˆ·ç«¯ç§˜é’¥',
`scope` varchar(255) DEFAULT NULL,
`authorized_grant_types` varchar(255) DEFAULT NULL,
`web_server_redirect_uri` varchar(255) DEFAULT NULL,
`authorities` varchar(255) DEFAULT NULL,
`access_token_validity` int(11) DEFAULT NULL,
`refresh_token_validity` int(11) DEFAULT NULL,
`additional_information` longtext,
`create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
`archived` tinyint(4) DEFAULT NULL,
`trusted` tinyint(4) DEFAULT NULL,
`autoapprove` varchar(255) DEFAULT NULL,
PRIMARY KEY (`client_id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 ROW_FORMAT=DYNAMIC COMMENT='æ¥å…¥å®¢æˆ·ç«¯ä¿¡æ¯';

/*Data for the table `oauth_client_details` */

insert into `oauth_client_details`(`client_id`,`resource_ids`,`client_secret`,`scope`,`authorized_grant_types`,`web_server_redirect_uri`,`authorities`,`access_token_validity`,`refresh_token_validity`,`additional_information`,`create_time`,`archived`,`trusted`,`autoapprove`) values
('c1','res1','$2a$10$X2xVwW.7cOEh2niPqHYAne9EnjRJFj7QI4TqfmnDou9fT/45sCFEm','ROLE_ADMIN,ROLE_USER,ROLE_API','client_credentials,password,authorization_code,implicit,refresh_token','https://www.baidu.com',NULL,7200,259200,NULL,'2021-01-11 09:09:53',0,0,'false'),
('c2','res2','$2a$10$X2xVwW.7cOEh2niPqHYAne9EnjRJFj7QI4TqfmnDou9fT/45sCFEm','ROLE_API','client_credentials,password,authorization_code,implicit,refresh_token','https://www.baidu.com',NULL,31536000,2592000,NULL,'2021-01-11 09:09:56',0,0,'false');

/*Table structure for table `oauth_code` */

DROP TABLE IF EXISTS `oauth_code`;

CREATE TABLE `oauth_code` (
`create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
`code` varchar(255) DEFAULT NULL,
`authentication` blob,
KEY `code_index` (`code`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 ROW_FORMAT=COMPACT;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸Šè¿°SQLæ–°å»ºäº†ä¸¤å¼ è¡¨&lt;code&gt;oauth_client_details&lt;/code&gt;ä»¥åŠ&lt;code&gt;oauth_code&lt;/code&gt;åˆ†åˆ«ç”¨äºå­˜å‚¨å®¢æˆ·ç«¯ä¿¡æ¯ä»¥åŠæˆæƒç ä¿¡æ¯ï¼Œç”±äºä½¿ç”¨äº†jwt tokenï¼ˆjwt tokenæœ¬èº«å°±å­˜å‚¨äº†æ•°æ®ï¼‰ï¼Œæ‰€ä»¥ä¸å†ä¿å­˜æ•°æ®åº“ï¼Œä¸¤å¼ è¡¨å‡ä¸ºspring oauth2.0å†…ç½®è¡¨ï¼Œä¸éœ€è¦å†™SQLï¼Œå†…ç½®æ¡†æ¶è‡ªåŠ¨è¯†åˆ«è¡¨ã€‚&lt;/p&gt;
&lt;h3 id=&quot;2ä¿®æ”¹é…ç½®&quot;&gt;2.ä¿®æ”¹é…ç½®&lt;/h3&gt;
&lt;p&gt;å¯¹åº”ä¸Šè¿°ä¸¤å¼ è¡¨ï¼Œåˆ†åˆ«ä¿®æ”¹Beanå¯¹è±¡çš„åˆ›å»ºä¸ºjdbcç±»å‹çš„ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Bean
public AuthorizationCodeServices authorizationCodeServices(DataSource dataSource){
return new JdbcAuthorizationCodeServices(dataSource);
}

@Bean
public ClientDetailsService clientDetailsService(DataSource dataSource) {
JdbcClientDetailsService clientDetailsService = new JdbcClientDetailsService(dataSource);
clientDetailsService.setPasswordEncoder(passwordEncoder);
return clientDetailsService;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¹‹åä¿®æ”¹å®¢æˆ·ç«¯é…ç½®å¯¹è±¡ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Override
public void configure(ClientDetailsServiceConfigurer clients) throws Exception {
clients.withClientDetails(clientDetailsService);
// clients.inMemory()
// .withClient(&quot;c1&quot;)
// .secret(new BCryptPasswordEncoder().encode(&quot;secret&quot;))//$2a$10$0uhIO.ADUFv7OQ/kuwsC1.o3JYvnevt5y3qX/ji0AUXs4KYGio3q6
// .resourceIds(&quot;r1&quot;)
// .authorizedGrantTypes(&quot;authorization_code&quot;, &quot;password&quot;, &quot;client_credentials&quot;, &quot;implicit&quot;, &quot;refresh_token&quot;)
// .scopes(&quot;all&quot;)
// .autoApprove(false)
// .redirectUris(&quot;https://www.baidu.com&quot;);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å®Œæˆä¿®æ”¹ã€‚&lt;/p&gt;
&lt;h3 id=&quot;3æ¥å£æµ‹è¯•-1&quot;&gt;3.æ¥å£æµ‹è¯•&lt;/h3&gt;
&lt;p&gt;GETè¯·æ±‚ï¼š&lt;a href=&quot;http://127.0.0.1:30000/oauth/authorize?client_id=c1&amp;amp;response_type=code&amp;amp;scope=ROLE_API&amp;amp;redirect_uri=https://www.baidu.com&quot; target=&quot;_blank&quot;&gt;http://127.0.0.1:30000/oauth/authorize?client_id=c1&amp;amp;response_type=code&amp;amp;scope=ROLE_API&amp;amp;redirect_uri=https://www.baidu.com&lt;/a&gt; è·å–æˆæƒç åï¼Œè§‚å¯Ÿè¡¨oauth_codeï¼Œé‡Œé¢åº”å½“å·²ç»æœ‰äº†æˆæƒç æ•°æ®ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å››ã€æºç åœ°å€&quot;&gt;å››ã€æºç åœ°å€&lt;/h2&gt;
&lt;p&gt;æºç åœ°å€ï¼š&lt;a href=&quot;https://gitee.com/kdyzm/spring-security-oauth-study/tree/v4.0.0&quot; target=&quot;_blank&quot;&gt;https://gitee.com/kdyzm/spring-security-oauth-study/tree/v4.0.0&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘çš„åšå®¢åœ°å€ï¼š&lt;a href=&quot;https://blog.kdyzm.cn/&quot; target=&quot;_blank&quot;&gt;https://blog.kdyzm.cn/&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;</description>
<pubDate>Mon, 11 Jan 2021 14:58:00 +0000</pubDate>
<dc:creator>ç‹‚ç›—ä¸€ææ¢…</dc:creator>
<og:description>æœ¬ç¯‡æ–‡ç« å°†ä¼šè®²è§£é›†æˆjwtä»¥åŠå°†å®¢æˆ·ç«¯ä¿¡æ¯å’Œæˆæƒç ä¿¡æ¯ä¿å­˜åˆ°æ•°æ®åº“</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/kuangdaoyizhimei/p/14264844.html</dc:identifier>
</item>
<item>
<title>å†·é¥­æ–°ç‚’ï¼šç†è§£Redissonä¸­åˆ†å¸ƒå¼é”çš„å®ç° - throwable</title>
<link>http://www.cnblogs.com/throwable/p/14264804.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/throwable/p/14264804.html</guid>
<description>&lt;h2 id=&quot;å‰æ&quot;&gt;å‰æ&lt;/h2&gt;
&lt;p&gt;åœ¨å¾ˆæ—©å¾ˆæ—©ä¹‹å‰ï¼Œå†™è¿‡ä¸€ç¯‡æ–‡ç« ä»‹ç»è¿‡&lt;code&gt;Redis&lt;/code&gt;ä¸­çš„&lt;code&gt;red lock&lt;/code&gt;çš„å®ç°ï¼Œä½†æ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œç¬”è€…æ‰€è´Ÿè´£çš„é¡¹ç›®ä½¿ç”¨çš„åˆ†å¸ƒå¼é”ç»„ä»¶ä¸€ç›´æ˜¯&lt;code&gt;Redisson&lt;/code&gt;ã€‚&lt;code&gt;Redisson&lt;/code&gt;æ˜¯å…·å¤‡å¤šç§å†…å­˜æ•°æ®ç½‘æ ¼ç‰¹æ€§çš„åŸºäº&lt;code&gt;Java&lt;/code&gt;ç¼–å†™çš„&lt;code&gt;Redis&lt;/code&gt;å®¢æˆ·ç«¯æ¡†æ¶ï¼ˆ&lt;code&gt;Redis Java Client with features of In-Memory Data Grid&lt;/code&gt;ï¼‰ï¼ŒåŸºäº&lt;code&gt;Redis&lt;/code&gt;çš„åŸºæœ¬æ•°æ®ç±»å‹æ‰©å±•å‡ºå¾ˆå¤šç§å®ç°çš„é«˜çº§æ•°æ®ç»“æ„ï¼Œå…·ä½“è§å…¶å®˜æ–¹çš„ç®€ä»‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/202101/l-f-x-c-r-i-1.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡è¦åˆ†æçš„&lt;code&gt;R(ed)Lock&lt;/code&gt;å®ç°ï¼Œåªæ˜¯å…¶ä¸­ä¸€ä¸ªå¾ˆå°çš„æ¨¡å—ï¼Œå…¶ä»–é«˜çº§ç‰¹æ€§å¯ä»¥æŒ‰éœ€é€‰ç”¨ã€‚ä¸‹é¢ä¼šä»åŸºæœ¬åŸç†ã€æºç åˆ†æå’ŒåŸºäº&lt;code&gt;Jedis&lt;/code&gt;ä»¿å®ç°ç­‰å†…å®¹è¿›è¡Œå±•å¼€ã€‚æœ¬æ–‡åˆ†æçš„&lt;code&gt;Redisson&lt;/code&gt;æºç æ˜¯&lt;code&gt;2020-01&lt;/code&gt;å·¦å³&lt;code&gt;Redisson&lt;/code&gt;é¡¹ç›®çš„&lt;code&gt;main&lt;/code&gt;åˆ†æ”¯æºç ï¼Œå¯¹åº”ç‰ˆæœ¬æ˜¯&lt;code&gt;3.14.1&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&quot;åŸºæœ¬åŸç†&quot;&gt;åŸºæœ¬åŸç†&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;red lock&lt;/code&gt;çš„åŸºæœ¬åŸç†å…¶å®å°±&quot;å…‰æ˜æ­£å¤§åœ°&quot;å±•ç¤ºåœ¨&lt;code&gt;Redis&lt;/code&gt;å®˜ç½‘çš„é¦–é¡µæ–‡æ¡£ä¸­ï¼ˆå…·ä½“é“¾æ¥æ˜¯&lt;code&gt;https://redis.io/topics/distlock&lt;/code&gt;ï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/202101/l-f-x-c-r-i-2.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ‘˜å½•ä¸€ä¸‹ç®€ä»‹è¿›è¡Œç¿»è¯‘ï¼šåœ¨è®¸å¤šç¯å¢ƒä¸­ä¸åŒè¿›ç¨‹å¿…é¡»ä»¥äº’æ–¥æ–¹å¼ä½¿ç”¨å…±äº«èµ„æºè¿›è¡Œæ“ä½œæ—¶ï¼Œåˆ†å¸ƒå¼é”æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„åŸè¯­ã€‚æ­¤è¯•å›¾æä¾›ä¸€ç§æ›´è§„èŒƒçš„ç®—æ³•æ¥å®ç°Redisçš„åˆ†å¸ƒå¼é”ã€‚æˆ‘ä»¬æå‡ºäº†ä¸€ç§ç§°ä¸º&lt;code&gt;Redlock&lt;/code&gt;çš„ç®—æ³•ï¼Œå®ƒå®ç°äº†&lt;code&gt;DLM&lt;/code&gt;ï¼ˆçŒœæµ‹æ˜¯&lt;code&gt;Distributed Lock Manager&lt;/code&gt;çš„ç¼©å†™ï¼Œåˆ†å¸ƒå¼é”ç®¡ç†å™¨ï¼‰ï¼Œæˆ‘ä»¬è®¤ä¸ºå®ƒæ¯”æ™®é€šçš„å•å®ä¾‹æ–¹æ³•æ›´å®‰å…¨ã€‚&lt;/p&gt;
&lt;p&gt;ç®—æ³•çš„ä¸‰ä¸ªæ ¸å¿ƒç‰¹å¾ï¼ˆä¸‰å¤§æœ€ä½ä¿è¯ï¼‰ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;Safety property&lt;/code&gt;ï¼ˆå®‰å…¨æ€§ï¼‰ï¼šäº’æ–¥ã€‚ç¡®ä¿åœ¨ä»»ä½•ç»™å®šæ—¶åˆ»ä¸‹ï¼Œåªæœ‰ä¸€ä¸ªå®¢æˆ·ç«¯å¯ä»¥æŒæœ‰é”&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Liveness property A&lt;/code&gt;ï¼ˆæ´»æ€§&lt;code&gt;A&lt;/code&gt;ï¼‰ï¼šæ— æ­»é”ã€‚å³ä½¿å­˜åœ¨æ›¾ç»é”å®šèµ„æºçš„å®¢æˆ·ç«¯å´©æºƒæˆ–è€…å‡ºç°ç½‘ç»œåˆ†åŒºå¼‚å¸¸ï¼Œç¡®ä¿é”æ€»æ˜¯èƒ½å¤ŸæˆåŠŸè·å–&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Liveness property B&lt;/code&gt;ï¼ˆæ´»æ€§&lt;code&gt;B&lt;/code&gt;ï¼‰ï¼šå®¹é”™æ€§ã€‚åªè¦å¤§å¤šæ•°&lt;code&gt;Redis&lt;/code&gt;èŠ‚ç‚¹å¤„äºæ­£å¸¸è¿è¡ŒçŠ¶æ€ï¼Œå®¢æˆ·ç«¯å°±å¯ä»¥è·å–å’Œé‡Šæ”¾é”&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æ–‡æ¡£ä¸­è¿˜æŒ‡å‡ºäº†ç›®å‰ç®—æ³•å¯¹äºæ•…éšœè½¬ç§»çš„å®ç°è¿˜å­˜åœ¨æ˜æ˜¾çš„ç«æ€æ¡ä»¶é—®é¢˜ï¼ˆæè¿°çš„åº”è¯¥æ˜¯&lt;code&gt;Redis&lt;/code&gt;ä¸»ä»æ¶æ„ä¸‹çš„é—®é¢˜ï¼‰ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å®¢æˆ·ç«¯&lt;code&gt;A&lt;/code&gt;è·å–&lt;code&gt;Redis&lt;/code&gt;ä¸»èŠ‚ç‚¹ä¸­çš„é”ï¼ˆå‡è®¾é”å®šçš„èµ„æºä¸º&lt;code&gt;X&lt;/code&gt;ï¼‰&lt;/li&gt;
&lt;li&gt;åœ¨&lt;code&gt;Redis&lt;/code&gt;ä¸»èŠ‚ç‚¹æŠŠ&lt;code&gt;KEY&lt;/code&gt;åŒæ­¥åˆ°&lt;code&gt;Redis&lt;/code&gt;ä»èŠ‚ç‚¹ä¹‹å‰ï¼Œ&lt;code&gt;Redis&lt;/code&gt;ä¸»èŠ‚ç‚¹å´©æºƒ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Redis&lt;/code&gt;ä»èŠ‚ç‚¹å› ä¸ºæ•…éšœæ™‹å‡ä¸ºä¸»èŠ‚ç‚¹&lt;/li&gt;
&lt;li&gt;æ­¤æ—¶ï¼Œå®¢æˆ·ç«¯&lt;code&gt;B&lt;/code&gt;è·å–èµ„æº&lt;code&gt;X&lt;/code&gt;çš„é”æˆåŠŸï¼Œé—®é¢˜æ˜¯èµ„æº&lt;code&gt;X&lt;/code&gt;çš„é”åœ¨å‰é¢å·²ç»è¢«å®¢æˆ·ç«¯&lt;code&gt;A&lt;/code&gt;è·å–è¿‡ï¼Œè¿™æ ·å°±å‡ºç°äº†å¹¶å‘é—®é¢˜&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ç®—æ³•çš„å®ç°å¾ˆç®€å•ï¼Œå•ä¸ª&lt;code&gt;Redis&lt;/code&gt;å®ä¾‹ä¸‹åŠ é”å‘½ä»¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;SET $resource_name $random_value NX PX $ttl
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œçš„&lt;code&gt;Nx&lt;/code&gt;å’Œ&lt;code&gt;PX&lt;/code&gt;æ˜¯&lt;code&gt;SET&lt;/code&gt;å‘½ä»¤çš„å¢å¼ºå‚æ•°ï¼Œè‡ªä»&lt;code&gt;Redis&lt;/code&gt;çš„&lt;code&gt;2.6.12&lt;/code&gt;ç‰ˆæœ¬èµ·ï¼Œ&lt;code&gt;SET&lt;/code&gt;å‘½ä»¤å·²ç»æä¾›äº†å¯é€‰çš„å¤åˆæ“ä½œç¬¦ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;EX&lt;/code&gt;ï¼šè®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ˜¯ç§’&lt;/li&gt;
&lt;li&gt;&lt;code&gt;PX&lt;/code&gt;ï¼šè®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NX&lt;/code&gt;ï¼š&lt;code&gt;IF NOT EXIST&lt;/code&gt;çš„ç¼©å†™ï¼Œåªæœ‰&lt;code&gt;KEY&lt;/code&gt;ä¸å­˜åœ¨çš„å‰æä¸‹æ‰ä¼šè®¾ç½®&lt;code&gt;K-V&lt;/code&gt;ï¼Œè®¾ç½®æˆåŠŸè¿”å›&lt;code&gt;1&lt;/code&gt;ï¼Œå¦åˆ™è¿”å›&lt;code&gt;0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;XX&lt;/code&gt;ï¼š&lt;code&gt;IF EXIST&lt;/code&gt;çš„ç¼©å†™ï¼Œåªæœ‰åœ¨&lt;code&gt;KEY&lt;/code&gt;å­˜åœ¨çš„å‰æä¸‹æ‰ä¼šè®¾ç½®&lt;code&gt;K-V&lt;/code&gt;ï¼Œè®¾ç½®æˆåŠŸè¿”å›&lt;code&gt;1&lt;/code&gt;ï¼Œå¦åˆ™è¿”å›&lt;code&gt;0&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å•ä¸ª&lt;code&gt;Redis&lt;/code&gt;å®ä¾‹ä¸‹è§£é”å‘½ä»¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;# KEYS[1] = $resource_name
# ARGV[1] = $random_value
if redis.call(&quot;get&quot;,KEYS[1]) == ARGV[1] then
    return redis.call(&quot;del&quot;,KEYS[1])
else
    return 0
end
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;ä½¿ç”¨redissonä¸­çš„rlock&quot;&gt;ä½¿ç”¨Redissonä¸­çš„RLock&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨&lt;code&gt;RLock&lt;/code&gt;è¦å…ˆå®ä¾‹åŒ–&lt;code&gt;Redisson&lt;/code&gt;ï¼Œ&lt;code&gt;Redisson&lt;/code&gt;å·²ç»é€‚é…äº†&lt;code&gt;Redis&lt;/code&gt;çš„å“¨å…µã€é›†ç¾¤ã€æ™®é€šä¸»ä»å’Œå•æœºæ¨¡å¼ï¼Œå› ä¸ºç¬”è€…æœ¬åœ°åªå®‰è£…äº†å•æœº&lt;code&gt;Redis&lt;/code&gt;ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨å•æœºæ¨¡å¼é…ç½®è¿›è¡Œæ¼”ç¤ºã€‚å®ä¾‹åŒ–&lt;code&gt;RedissonClient&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;static RedissonClient REDISSON;

@BeforeClass
public static void beforeClass() throws Exception {
    Config config = new Config();
    // å•æœº
    config.useSingleServer()
            .setTimeout(10000)
            .setAddress(&quot;redis://127.0.0.1:6379&quot;);
    REDISSON = Redisson.create(config);
//        // ä¸»ä»
//        config.useMasterSlaveServers()
//                .setMasterAddress(&quot;ä¸»èŠ‚ç‚¹è¿æ¥åœ°å€&quot;)
//                .setSlaveAddresses(Sets.newHashSet(&quot;ä»èŠ‚ç‚¹è¿æ¥åœ°å€&quot;));
//        REDISSON = Redisson.create(config);
//        // å“¨å…µ
//        config.useSentinelServers()
//                .setMasterName(&quot;Masteråç§°&quot;)
//                .addSentinelAddress(new String[]{&quot;å“¨å…µè¿æ¥åœ°å€&quot;});
//        REDISSON = Redisson.create(config);
//        // é›†ç¾¤
//        config.useClusterServers()
//                .addNodeAddress(new String[]{&quot;é›†ç¾¤èŠ‚ç‚¹è¿æ¥åœ°å€&quot;});
//        REDISSON = Redisson.create(config);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åŠ é”å’Œè§£é”ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Test
public void testLockAndUnLock() throws Exception {
    String resourceName = &quot;resource:x&quot;;
    RLock lock = REDISSON.getLock(resourceName);
    Thread threadA = new Thread(() -&amp;gt; {
        try {
            lock.lock();
            process(resourceName);
        } finally {
            lock.unlock();
            System.out.println(String.format(&quot;çº¿ç¨‹%sé‡Šæ”¾èµ„æº%sçš„é”&quot;, Thread.currentThread().getName(), resourceName));
        }
    }, &quot;threadA&quot;);
    Thread threadB = new Thread(() -&amp;gt; {
        try {
            lock.lock();
            process(resourceName);
        } finally {
            lock.unlock();
            System.out.println(String.format(&quot;çº¿ç¨‹%sé‡Šæ”¾èµ„æº%sçš„é”&quot;, Thread.currentThread().getName(), resourceName));
        }
    }, &quot;threadB&quot;);
    threadA.start();
    threadB.start();
    Thread.sleep(Long.MAX_VALUE);
}

private void process(String resourceName) {
    String threadName = Thread.currentThread().getName();
    System.out.println(String.format(&quot;çº¿ç¨‹%sè·å–åˆ°èµ„æº%sçš„é”&quot;, threadName, resourceName));
    try {
        Thread.sleep(1000);
    } catch (InterruptedException ignore) {
    }
}

// æŸæ¬¡æ‰§è¡Œçš„è¾“å‡ºç»“æœ
çº¿ç¨‹threadBè·å–åˆ°èµ„æºresource:xçš„é”
çº¿ç¨‹threadBé‡Šæ”¾èµ„æºresource:xçš„é”
çº¿ç¨‹threadAè·å–åˆ°èµ„æºresource:xçš„é”
çº¿ç¨‹threadAé‡Šæ”¾èµ„æºresource:xçš„é”
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ›´å¤šçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šé€‰ç”¨å¸¦ç­‰å¾…æ—¶é—´å‘¨æœŸå’Œé”æœ€å¤§æŒæœ‰æ—¶é—´çš„&lt;code&gt;API&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Test
public void testTryLockAndUnLock() throws Exception {
    String resourceName = &quot;resource:x&quot;;
    int waitTime = 500;
    int leaseTime = 1000;
    Thread threadA = new Thread(() -&amp;gt; {
        process(resourceName, waitTime, leaseTime);
    }, &quot;threadA&quot;);
    Thread threadB = new Thread(() -&amp;gt; {
        process(resourceName, waitTime, leaseTime);
    }, &quot;threadB&quot;);
    threadA.start();
    threadB.start();
    Thread.sleep(Long.MAX_VALUE);
}

private void process(String resourceName, int waitTime, int leaseTime) {
    RLock lock = REDISSON.getLock(resourceName);
    try {
        String threadName = Thread.currentThread().getName();
        boolean tryLock = lock.tryLock(waitTime, leaseTime, TimeUnit.MILLISECONDS);
        if (tryLock) {
            try {
                System.out.println(String.format(&quot;çº¿ç¨‹%sè·å–åˆ°èµ„æº%sçš„é”&quot;, threadName, resourceName));
                Thread.sleep(800);
            } finally {
                lock.unlock();
                System.out.println(String.format(&quot;çº¿ç¨‹%sé‡Šæ”¾èµ„æº%sçš„é”&quot;, Thread.currentThread().getName(), resourceName));
            }
        } else {
            System.out.println(String.format(&quot;çº¿ç¨‹%sè·å–èµ„æº%sçš„é”å¤±è´¥,ç­‰å¾…æ—¶é—´:%d ms&quot;, threadName, resourceName, waitTime));
        }
    } catch (InterruptedException e) {
        Thread.currentThread().interrupt();
    }
}
// æŸæ¬¡æ‰§è¡Œçš„è¾“å‡ºç»“æœ
çº¿ç¨‹threadAè·å–åˆ°èµ„æºresource:xçš„é”
çº¿ç¨‹threadBè·å–èµ„æºresource:xçš„é”å¤±è´¥,ç­‰å¾…æ—¶é—´:500 ms
çº¿ç¨‹threadAé‡Šæ”¾èµ„æºresource:xçš„é”
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸ºäº†ä½¿ç”¨çš„æ—¶å€™æ›´åŠ ç®€å•ï¼Œå¯ä»¥å‚è€ƒ&lt;code&gt;spring-tx&lt;/code&gt;ä¸­çš„ç¼–ç¨‹å¼äº‹åŠ¡é‚£æ ·è¿›è¡Œè½»åº¦å°è£…ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@RequiredArgsConstructor
private static class RedissonLockProvider {

    private final RedissonClient redissonClient;

    public &amp;lt;T&amp;gt; T executeInLock(String resourceName, LockAction lockAction) {
        RLock lock = redissonClient.getLock(resourceName);
        try {
            lock.lock();
            lockAction.onAcquire(resourceName);
            return lockAction.doInLock(resourceName);
        } finally {
            lock.unlock();
            lockAction.onExit(resourceName);
        }
    }

    public &amp;lt;T&amp;gt; T executeInLock(String resourceName, int waitTime, int leaseTime, LockAction lockAction) throws InterruptedException {
        RLock lock = redissonClient.getLock(resourceName);
        boolean tryLock = lock.tryLock(waitTime, leaseTime, TimeUnit.MILLISECONDS);
        if (tryLock) {
            try {
                lockAction.onAcquire(resourceName);
                return lockAction.doInLock(resourceName);
            } finally {
                lock.unlock();
                lockAction.onExit(resourceName);
            }
        }
        return null;
    }

    public void executeInLockWithoutResult(String resourceName, int waitTime, int leaseTime, LockActionWithoutResult lockAction) throws InterruptedException {
        RLock lock = redissonClient.getLock(resourceName);
        boolean tryLock = lock.tryLock(waitTime, leaseTime, TimeUnit.MILLISECONDS);
        if (tryLock) {
            try {
                lockAction.onAcquire(resourceName);
                lockAction.doInLock(resourceName);
            } finally {
                lock.unlock();
                lockAction.onExit(resourceName);
            }
        }
    }

    public void executeInLockWithoutResult(String resourceName, LockActionWithoutResult lockAction) {
        RLock lock = redissonClient.getLock(resourceName);
        try {
            lock.lock();
            lockAction.onAcquire(resourceName);
            lockAction.doInLock(resourceName);
        } finally {
            lock.unlock();
            lockAction.onExit(resourceName);
        }
    }
}

@FunctionalInterface
interface LockAction {

    default void onAcquire(String resourceName) {

    }

    &amp;lt;T&amp;gt; T doInLock(String resourceName);

    default void onExit(String resourceName) {

    }
}

@FunctionalInterface
interface LockActionWithoutResult {

    default void onAcquire(String resourceName) {

    }

    void doInLock(String resourceName);

    default void onExit(String resourceName) {

    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½¿ç”¨&lt;code&gt;RedissonLockProvider&lt;/code&gt;ï¼ˆä»…ä¾›å‚è€ƒï¼‰ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Test
public void testRedissonLockProvider() throws Exception {
    RedissonLockProvider provider = new RedissonLockProvider(REDISSON);
    String resourceName = &quot;resource:x&quot;;
    Thread threadA = new Thread(() -&amp;gt; {
        provider.executeInLockWithoutResult(resourceName, new LockActionWithoutResult() {

            @Override
            public void onAcquire(String resourceName) {
                System.out.println(String.format(&quot;çº¿ç¨‹%sè·å–åˆ°èµ„æº%sçš„é”&quot;, Thread.currentThread().getName(), resourceName));
            }

            @Override
            public void doInLock(String resourceName) {
                try {
                    Thread.sleep(800);
                } catch (InterruptedException ignore) {

                }
            }

            @Override
            public void onExit(String resourceName) {
                System.out.println(String.format(&quot;çº¿ç¨‹%sé‡Šæ”¾èµ„æº%sçš„é”&quot;, Thread.currentThread().getName(), resourceName));
            }
        });
    }, &quot;threadA&quot;);
    Thread threadB = new Thread(() -&amp;gt; {
        provider.executeInLockWithoutResult(resourceName, new LockActionWithoutResult() {

            @Override
            public void onAcquire(String resourceName) {
                System.out.println(String.format(&quot;çº¿ç¨‹%sè·å–åˆ°èµ„æº%sçš„é”&quot;, Thread.currentThread().getName(), resourceName));
            }

            @Override
            public void doInLock(String resourceName) {
                try {
                    Thread.sleep(800);
                } catch (InterruptedException ignore) {

                }
            }

            @Override
            public void onExit(String resourceName) {
                System.out.println(String.format(&quot;çº¿ç¨‹%sé‡Šæ”¾èµ„æº%sçš„é”&quot;, Thread.currentThread().getName(), resourceName));
            }
        });
    }, &quot;threadB&quot;);
    threadA.start();
    threadB.start();
    Thread.sleep(Long.MAX_VALUE);
}
// æŸæ¬¡æ‰§è¡Œç»“æœ
çº¿ç¨‹threadAè·å–åˆ°èµ„æºresource:xçš„é”
çº¿ç¨‹threadAé‡Šæ”¾èµ„æºresource:xçš„é”
çº¿ç¨‹threadBè·å–åˆ°èµ„æºresource:xçš„é”
çº¿ç¨‹threadBé‡Šæ”¾èµ„æºresource:xçš„é”
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;redissonä¸­rlockçš„å®ç°åŸç†&quot;&gt;Redissonä¸­RLockçš„å®ç°åŸç†&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;Redisson&lt;/code&gt;ä¸­&lt;code&gt;RLock&lt;/code&gt;çš„å®ç°æ˜¯åŸºæœ¬å‚ç…§äº†&lt;code&gt;Redis&lt;/code&gt;çš„&lt;code&gt;red lock&lt;/code&gt;ç®—æ³•è¿›è¡Œå®ç°ï¼Œä¸è¿‡åœ¨åŸå§‹çš„&lt;code&gt;red lock&lt;/code&gt;ç®—æ³•ä¸‹è¿›è¡Œäº†æ”¹è‰¯ï¼Œä¸»è¦åŒ…æ‹¬ä¸‹é¢çš„ç‰¹æ€§ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;äº’æ–¥&lt;/li&gt;
&lt;li&gt;æ— æ­»é”&lt;/li&gt;
&lt;li&gt;å¯é‡å…¥ï¼Œç±»ä¼¼äº&lt;code&gt;ReentrantLock&lt;/code&gt;ï¼ŒåŒä¸€ä¸ªçº¿ç¨‹å¯ä»¥é‡å¤è·å–åŒä¸€ä¸ªèµ„æºçš„é”ï¼ˆä¸€èˆ¬ä½¿ç”¨è®¡æ•°å™¨å®ç°ï¼‰ï¼Œé”çš„é‡å…¥ç‰¹æ€§ä¸€èˆ¬æƒ…å†µä¸‹æœ‰åˆ©äºæé«˜èµ„æºçš„åˆ©ç”¨ç‡&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç»­æœŸ&lt;/strong&gt;ï¼Œè¿™ä¸ªæ˜¯ä¸€ä¸ªæ¯”è¾ƒå‰å«è§£å†³æ€è·¯ï¼Œä¹Ÿå°±æ˜¯å¦‚æœä¸€ä¸ªå®¢æˆ·ç«¯å¯¹èµ„æº&lt;code&gt;X&lt;/code&gt;æ°¸ä¹…é”å®šï¼Œé‚£ä¹ˆå¹¶ä¸æ˜¯ç›´æ¥å¯¹&lt;code&gt;KEY&lt;/code&gt;ç”Ÿå­˜å‘¨æœŸè®¾ç½®ä¸º&lt;code&gt;-1&lt;/code&gt;ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªå®ˆæŠ¤çº¿ç¨‹æ¯éš”å›ºå®šå‘¨æœŸå»¶é•¿&lt;code&gt;KEY&lt;/code&gt;çš„è¿‡æœŸæ—¶é—´ï¼Œè¿™æ ·å°±èƒ½å®ç°&lt;strong&gt;åœ¨å®ˆæŠ¤çº¿ç¨‹ä¸è¢«æ€æ‰çš„å‰æä¸‹ï¼Œé¿å…å®¢æˆ·ç«¯å´©æºƒå¯¼è‡´é”æ— æ³•é‡Šæ”¾é•¿æœŸå ç”¨èµ„æºçš„é—®é¢˜&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;é”çŠ¶æ€å˜æ›´è®¢é˜…ï¼Œä¾èµ–äº&lt;code&gt;org.redisson.pubsub.LockPubSub&lt;/code&gt;ï¼Œç”¨äºè®¢é˜…å’Œé€šçŸ¥é”é‡Šæ”¾äº‹ä»¶&lt;/li&gt;
&lt;li&gt;ä¸æ˜¯å®Œå…¨å‚è€ƒ&lt;code&gt;red lock&lt;/code&gt;ç®—æ³•çš„å®ç°ï¼Œæ•°æ®ç±»å‹é€‰ç”¨äº†&lt;code&gt;HASH&lt;/code&gt;ï¼Œé…åˆ&lt;code&gt;Lua&lt;/code&gt;è„šæœ¬å®Œæˆå¤šä¸ªå‘½ä»¤çš„åŸå­æ€§&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ç»­æœŸæˆ–è€…è¯´å»¶é•¿&lt;code&gt;KEY&lt;/code&gt;çš„è¿‡æœŸæ—¶é—´åœ¨&lt;code&gt;Redisson&lt;/code&gt;ä½¿ç”¨&lt;code&gt;watch dog&lt;/code&gt;å®ç°ï¼Œç†è§£ä¸ºç”¨äºç»­æœŸçš„å®ˆæŠ¤çº¿ç¨‹ï¼Œåº•å±‚ä¾èµ–äº&lt;code&gt;Netty&lt;/code&gt;çš„æ—¶é—´è½®&lt;code&gt;HashedWheelTimer&lt;/code&gt;å’Œä»»åŠ¡&lt;code&gt;io.netty.util.Timeout&lt;/code&gt;å®ç°ï¼Œ&lt;strong&gt;ä¿—ç§°çœ‹é—¨ç‹—&lt;/strong&gt;ï¼Œä¸‹é¢ä¼šè¯¦ç»†åˆ†æã€‚&lt;/p&gt;
&lt;p&gt;å…ˆçœ‹&lt;code&gt;RLock&lt;/code&gt;çš„ç±»å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/202101/l-f-x-c-r-i-3.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;è¿™é‡Œæœ‰ä¸€ä¸ªç–‘æƒ‘ç‚¹ï¼ŒRedissonRedLockï¼ˆRedissonMultiLockçš„å­ç±»ï¼‰çš„æ³¨é‡Šä¸­æåˆ°RedLock locking algorithm implementation for multiple locks. It manages all locks as one. ä½†ä»ç›´è§‚ä¸Šçœ‹ï¼ŒRedissonLockæ‰æ˜¯æ•´ä¸ªé”ä½“ç³»çš„æ ¸å¿ƒï¼Œé‡Œé¢çš„å®ç°æ€è·¯ä¹Ÿæ˜¯éµä»red lockç®—æ³•çš„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;RedissonLock&lt;/code&gt;å°±æ˜¯&lt;code&gt;RLock&lt;/code&gt;çš„ç›´æ¥å®ç°ï¼Œä¹Ÿæ˜¯åˆ†å¸ƒå¼é”å®ç°çš„æ ¸å¿ƒç±»ï¼Œä»æºç ä¸­çœ‹åˆ°&lt;code&gt;Redisson#getLock()&lt;/code&gt;å°±æ˜¯ç›´æ¥å®ä¾‹åŒ–&lt;code&gt;RedissonLock&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class Redisson implements RedissonClient {
    
    // ...... çœç•¥å…¶ä»–ä»£ç 

    @Override
    public RLock getLock(String name) {
        return new RedissonLock(connectionManager.getCommandExecutor(), name);
    }

    // ...... çœç•¥å…¶ä»–ä»£ç 
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å› æ­¤åªéœ€è¦å›´ç»•&lt;code&gt;RedissonLock&lt;/code&gt;çš„æºç è¿›è¡Œåˆ†æå³å¯ã€‚&lt;code&gt;RedissonLock&lt;/code&gt;çš„ç±»ç»§æ‰¿å›¾å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/202101/l-f-x-c-r-i-4.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œéœ€è¦æœ‰å‡ ç‚¹è®¤çŸ¥ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;RedissonLock&lt;/code&gt;å®ç°äº†&lt;code&gt;java.util.concurrent.locks.Lock&lt;/code&gt;æ¥å£ä¸­é™¤äº†&lt;code&gt;newCondition()&lt;/code&gt;æ–¹æ³•å¤–çš„æ‰€æœ‰æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥åŸºæœ¬æ— ç¼é€‚é…&lt;code&gt;Lock&lt;/code&gt;æ¥å£ï¼Œå¯¹äºä¹ æƒ¯&lt;code&gt;Lock&lt;/code&gt;æ¥å£çš„&lt;code&gt;API&lt;/code&gt;çš„ä½¿ç”¨è€…æ¥è¯´æ˜¯ä¸€ä¸ªç¦éŸ³&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RedissonLock&lt;/code&gt;åŸºæœ¬æ‰€æœ‰åŒæ­¥&lt;code&gt;API&lt;/code&gt;éƒ½ä¾èµ–äºå¼‚æ­¥&lt;code&gt;API&lt;/code&gt;çš„å®ç°ï¼Œä¹Ÿå°±æ˜¯&lt;code&gt;RLock&lt;/code&gt;çš„å®ç°ä¾èµ–äº&lt;code&gt;RLockAsync&lt;/code&gt;çš„å®ç°ï¼Œåº•å±‚ä¾èµ–çš„æ˜¯&lt;code&gt;Netty&lt;/code&gt;çš„&lt;code&gt;io.netty.util.concurrent.Promise&lt;/code&gt;ï¼Œå…·ä½“è§&lt;code&gt;RedissonPromise&lt;/code&gt;ï¼Œå¦‚æœç”¨è¿‡&lt;code&gt;JUC&lt;/code&gt;ä¸­çš„&lt;code&gt;Future&lt;/code&gt;çš„å¼€å‘è€…åº”è¯¥æ¯”è¾ƒç†Ÿæ‚‰&lt;code&gt;Future#get()&lt;/code&gt;ï¼Œè¿™é‡Œçš„åšæ³•ç±»ä¼¼&lt;/li&gt;
&lt;li&gt;å³è¾¹çš„å‡ ä¸ªçˆ¶ç±»çš„ç®€å•åŠŸèƒ½æè¿°å¦‚ä¸‹ï¼š
&lt;ul&gt;&lt;li&gt;&lt;code&gt;RObjectAsync&lt;/code&gt;ï¼šæ‰€æœ‰&lt;code&gt;Redisson&lt;/code&gt;å¯¹è±¡çš„åŸºç¡€æ¥å£ï¼Œæä¾›ä¸€äº›å†…å­˜æµ‹é‡ã€å¯¹è±¡æ‹·è´ã€ç§»åŠ¨ç­‰çš„å¼‚æ­¥æ–¹æ³•&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RObject&lt;/code&gt;ï¼š&lt;code&gt;RObjectAsync&lt;/code&gt;çš„åŒæ­¥ç‰ˆæœ¬&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RExpirableAsync&lt;/code&gt;ï¼šæä¾›å¯¹è±¡&lt;code&gt;TTL&lt;/code&gt;ç›¸å…³çš„å¼‚æ­¥æ–¹æ³•&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RExpirable&lt;/code&gt;ï¼š&lt;code&gt;RExpirableAsync&lt;/code&gt;çš„åŒæ­¥ç‰ˆæœ¬&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RedissonObject&lt;/code&gt;ï¼šç›´æ¥å®ç°ç±»&lt;code&gt;RObject&lt;/code&gt;æ¥å£ä¸­çš„æ–¹æ³•&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RedissonExpirable&lt;/code&gt;ï¼šä¸»è¦æ˜¯å®ç°äº†&lt;code&gt;RExpirable&lt;/code&gt;æ¥å£ä¸­çš„æ–¹æ³•&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æ¥ç€å…ˆçœ‹&lt;code&gt;RedissonLock&lt;/code&gt;çš„æ„é€ å‡½æ•°å’Œæ ¸å¿ƒå±æ€§ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;// å­˜æ”¾entryName -&amp;gt; ExpirationEntryï¼Œç”¨äºè·å–å½“å‰entryNameçš„çº¿ç¨‹é‡å…¥è®¡æ•°å™¨å’Œç»­æœŸä»»åŠ¡
private static final ConcurrentMap&amp;lt;String, ExpirationEntry&amp;gt; EXPIRATION_RENEWAL_MAP = new ConcurrentHashMap&amp;lt;&amp;gt;();

// å†…éƒ¨çš„é”æŒæœ‰çš„æœ€å¤§æ—¶é—´ï¼Œæ¥æºäºå‚æ•°Config#lockWatchdogTimeoutï¼Œç”¨äºæ§åˆ¶ç»­æœŸçš„å‘¨æœŸ
protected long internalLockLeaseTime;

// IDï¼Œå”¯ä¸€æ ‡è¯†ï¼Œæ˜¯ä¸€ä¸ªUUID
final String id;

// 
final String entryName;

// é”é‡Šæ”¾äº‹ä»¶è®¢é˜…å‘å¸ƒç›¸å…³
protected final LockPubSub pubSub;

// å‘½ä»¤å¼‚æ­¥æ‰§è¡Œå™¨å®ä¾‹
final CommandAsyncExecutor commandExecutor;

/**
 * CommandAsyncExecutoræ˜¯å‘½ä»¤çš„å¼‚æ­¥æ‰§è¡Œå™¨ï¼Œé‡Œé¢çš„æ–¹æ³•æ˜¯ç›¸å¯¹åº•å±‚çš„é¢å‘é€šè®¯æ¡†æ¶çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬å¼‚æ­¥å†™ã€å¼‚æ­¥è¯»å’ŒåŒæ­¥ç»“æœè·å–ç­‰
 * nameå‚æ•°å°±æ˜¯getLock()æ—¶å€™ä¼ å…¥çš„å‚æ•°ï¼Œå…¶å®å°±æ˜¯æœ€ç»ˆåŒæ­¥åˆ°Redisä¸­çš„KEY
 */
public RedissonLock(CommandAsyncExecutor commandExecutor, String name) {
    super(commandExecutor, name);
    this.commandExecutor = commandExecutor;
    // è¿™é‡Œçš„IDä¸ºå¤–éƒ¨åˆå§‹åŒ–çš„UUIDå®ä¾‹ï¼Œè°ƒç”¨toString()
    this.id = commandExecutor.getConnectionManager().getId();
    this.internalLockLeaseTime = commandExecutor.getConnectionManager().getCfg().getLockWatchdogTimeout();
    // è¿™é‡Œçš„entryName = uuidå€¼ + : + å¤–éƒ¨ä¼ è¿›æ¥çš„name(KEY)ï¼Œå¦‚559cc9df-bad8-4f6c-86a4-ffa51b7f1c36:resource:x
    this.entryName = id + &quot;:&quot; + name;
    // åˆå§‹åŒ–LockPubSubå®ä¾‹ï¼Œç”¨äºè®¢é˜…å’Œå‘å¸ƒé”é‡Šæ”¾çš„äº‹ä»¶
    this.pubSub = commandExecutor.getConnectionManager().getSubscribeService().getLockPubSub();
}

// RedissonLockå†…éƒ¨ç±»ExpirationEntryï¼Œå­˜æ”¾ç€çº¿ç¨‹é‡å…¥çš„è®¡æ•°å™¨å’Œç»­æœŸçš„Timeoutä»»åŠ¡
public static class ExpirationEntry {
    
    // çº¿ç¨‹ID -&amp;gt; çº¿ç¨‹é‡å…¥çš„æ¬¡æ•°
    private final Map&amp;lt;Long, Integer&amp;gt; threadIds = new LinkedHashMap&amp;lt;&amp;gt;();
    private volatile Timeout timeout;
    
    public ExpirationEntry() {
        super();
    }
    
    // è¿™ä¸ªæ–¹æ³•ä¸»è¦è®°å½•çº¿ç¨‹é‡å…¥çš„è®¡æ•°
    public void addThreadId(long threadId) {
        Integer counter = threadIds.get(threadId);
        if (counter == null) {
            counter = 1;
        } else {
            counter++;
        }
        threadIds.put(threadId, counter);
    }

    public boolean hasNoThreads() {
        return threadIds.isEmpty();
    }

    public Long getFirstThreadId() {
        if (threadIds.isEmpty()) {
            return null;
        }
        return threadIds.keySet().iterator().next();
    }

    public void removeThreadId(long threadId) {
        Integer counter = threadIds.get(threadId);
        if (counter == null) {
            return;
        }
        counter--;
        if (counter == 0) {
            threadIds.remove(threadId);
        } else {
            threadIds.put(threadId, counter);
        }
    }
    
    public void setTimeout(Timeout timeout) {
        this.timeout = timeout;
    }
    public Timeout getTimeout() {
        return timeout;
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œéœ€è¦å…³æ³¨ä¸€ä¸‹&lt;code&gt;Config&lt;/code&gt;ä¸­çš„&lt;code&gt;lockWatchdogTimeout&lt;/code&gt;å‚æ•°ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/202101/l-f-x-c-r-i-5.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç¿»è¯‘ä¸€ä¸‹å¤§æ„ï¼š&lt;code&gt;lockWatchdogTimeout&lt;/code&gt;å‚æ•°åªæœ‰åœ¨æ²¡æœ‰ä½¿ç”¨&lt;code&gt;leaseTimeout&lt;/code&gt;å‚æ•°å®šä¹‰çš„æˆåŠŸè·å–åˆ°é”çš„åœºæ™¯ï¼ˆç®€å•æ¥è¯´å°±æ˜¯ä¸è®¾ç½®æ—¶é™çš„åŠ é”ï¼‰ä¸‹ç”Ÿæ•ˆï¼Œå¦‚æœçœ‹é—¨ç‹—åœ¨ä¸‹ä¸€ä¸ª&lt;code&gt;lockWatchdogTimeout&lt;/code&gt;å‘¨æœŸå†…ä¸è¿›è¡Œç»­æœŸï¼Œé‚£ä¹ˆé”å°±ä¼šè¿‡æœŸé‡Šæ”¾ï¼ˆ&lt;strong&gt;ä»æºç ä¸Šçœ‹ï¼Œæ¯ä¸‰åˆ†ä¹‹ä¸€&lt;code&gt;lockWatchdogTimeout&lt;/code&gt;å°±ä¼šæ‰§è¡Œä¸€æ¬¡ç»­æœŸä»»åŠ¡ï¼Œæ¯æ¬¡é€šè¿‡&lt;code&gt;pexpire&lt;/code&gt;æŠŠ&lt;code&gt;KEY&lt;/code&gt;çš„å­˜æ´»å‘¨æœŸå»¶é•¿&lt;code&gt;lockWatchdogTimeout&lt;/code&gt;&lt;/strong&gt;ï¼‰ï¼Œ&lt;code&gt;lockWatchdogTimeout&lt;/code&gt;çš„é»˜è®¤å€¼ä¸º&lt;code&gt;30000&lt;/code&gt;ï¼Œä¹Ÿå°±æ˜¯&lt;code&gt;30&lt;/code&gt;ç§’ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œå…ˆåˆ—ä¸¾ä¸€ä¸‹&lt;code&gt;RedissonLock&lt;/code&gt;ä¸­è·å–åç§°çš„æ–¹æ³•ï¼Œä»¥ä¾¿åé¢åˆ†æè¿™äº›åç§°ä½œä¸º&lt;code&gt;K-V&lt;/code&gt;ç»“æ„çš„&lt;code&gt;KEY&lt;/code&gt;æ—¶å€™ä½¿ç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;id&lt;/code&gt;ï¼šç”±é…ç½®å®ä¾‹åŒ–æ—¶å€™å®ä¾‹åŒ–çš„&lt;code&gt;UUID&lt;/code&gt;å®ä¾‹ç”Ÿæˆï¼Œä»æºç ä¸Šåˆ†ææ¯ä¸ªè¿æ¥æ–¹å¼çš„&lt;code&gt;Redisson&lt;/code&gt;å®ä¾‹æœ‰å”¯ä¸€çš„&lt;code&gt;UUID&lt;/code&gt;ï¼Œ&lt;code&gt;ConnectionManager&lt;/code&gt;åˆå§‹åŒ–çš„æ—¶å€™ä¼šè°ƒç”¨&lt;code&gt;UUID id = UUID.randomUUID()&lt;/code&gt;ï¼Œç¬”è€…è®¤ä¸ºå¯ä»¥ç†è§£ä¸º&lt;code&gt;Redisson&lt;/code&gt;å®ä¾‹åœ¨æŸä¸ªåº”ç”¨ç¨‹åºè¿›ç¨‹ä¸­çš„å”¯ä¸€æ ‡è¯†ï¼Œæ¯•ç«Ÿä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸€ä¸ªåº”ç”¨ç¨‹åºåº”è¯¥åªä¼šåº”ç”¨ä¸€ç§&lt;code&gt;Redisson&lt;/code&gt;çš„è¿æ¥æ–¹å¼&lt;/li&gt;
&lt;li&gt;&lt;code&gt;getEntryName()&lt;/code&gt;ï¼šè¿”å›çš„æ˜¯&lt;code&gt;UUID + : + $KEY&lt;/code&gt;ï¼Œä¾‹å¦‚&lt;code&gt;559cc9df-bad8-4f6c-86a4-ffa51b7f1c36:resource:x&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;getName()&lt;/code&gt;ï¼šè¿”å›çš„æ˜¯&lt;code&gt;$KEY&lt;/code&gt;ï¼Œä¾‹å¦‚&lt;code&gt;resource:x&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;getChannelName()&lt;/code&gt;ï¼šè¿”å›çš„æ˜¯&lt;code&gt;redisson_lock__channel:{$KEY}&lt;/code&gt;ï¼Œä¾‹å¦‚&lt;code&gt;redisson_lock__channel:{resource:x}&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;getLockName(long threadId)&lt;/code&gt;ï¼šè¿”å›çš„æ˜¯&lt;code&gt;UUID + : + $threadId&lt;/code&gt;ï¼Œä¾‹å¦‚&lt;code&gt;559cc9df-bad8-4f6c-86a4-ffa51b7f1c36:1&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æ¥ç€çœ‹åŠ é”çš„æ–¹æ³•ï¼Œæ ¸å¿ƒå®ç°ä¸»è¦æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;private void lock(long leaseTime, TimeUnit unit, boolean interruptibly) throws InterruptedException&lt;/code&gt;ï¼š&lt;code&gt;lock&lt;/code&gt;æ–¹æ³•ä½“ç³»&lt;/li&gt;
&lt;li&gt;&lt;code&gt;public boolean tryLock(long waitTime, long leaseTime, TimeUnit unit) throws InterruptedException&lt;/code&gt;ï¼š&lt;code&gt;tryLock&lt;/code&gt;æ–¹æ³•ä½“ç³»&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å…ˆçœ‹åªåŒ…å«é”æœ€å¤§æŒæœ‰æ—¶é—´çš„&lt;code&gt;lock()&lt;/code&gt;æ–¹æ³•ä½“ç³»ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;/**
 * è·å–é”ï¼Œä¸æŒ‡å®šç­‰å¾…æ—¶é—´ï¼ŒåªæŒ‡å®šé”çš„æœ€å¤§æŒæœ‰æ—¶é—´
 * é€šè¿‡interruptiblyå‚æ•°é…ç½®æ”¯æŒä¸­æ–­
 */
private void lock(long leaseTime, TimeUnit unit, boolean interruptibly) throws InterruptedException {
    long threadId = Thread.currentThread().getId();
    // å°è¯•è·å–é”ï¼Œè¿”å›çš„ttlä¸ºç©ºä»£è¡¨è·å–é”æˆåŠŸï¼Œè¿”å›çš„ttlä»£è¡¨å·²ç»å­˜åœ¨çš„KEYçš„å‰©ä½™å­˜æ´»æ—¶é—´
    Long ttl = tryAcquire(leaseTime, unit, threadId);
    // lock acquired
    if (ttl == null) {
        return;
    }
    // è®¢é˜…redisson_lock__channel:{$KEY}ï¼Œå…¶å®æœ¬è´¨çš„ç›®çš„æ˜¯ä¸ºäº†å®¢æˆ·ç«¯é€šè¿‡Redisçš„è®¢é˜…å‘å¸ƒï¼Œæ„ŸçŸ¥åˆ°è§£é”çš„äº‹ä»¶
    // è¿™ä¸ªæ–¹æ³•ä¼šåœ¨LockPubSubä¸­æ³¨å†Œä¸€ä¸ªentryName -&amp;gt; RedissonLockEntryçš„å“ˆå¸Œæ˜ å°„ï¼ŒRedissonLockEntryå®ä¾‹ä¸­å­˜æ”¾ç€RPromise&amp;lt;RedissonLockEntry&amp;gt;ç»“æœï¼Œä¸€ä¸ªä¿¡å·é‡å½¢å¼çš„é”å’Œè®¢é˜…æ–¹æ³•é‡å…¥è®¡æ•°å™¨
    // ä¸‹é¢çš„æ­»å¾ªç¯ä¸­çš„getEntry()æˆ–è€…RPromise&amp;lt;RedissonLockEntry&amp;gt;#getNow()å°±æ˜¯ä»è¿™ä¸ªæ˜ å°„ä¸­è·å–çš„
    RFuture&amp;lt;RedissonLockEntry&amp;gt; future = subscribe(threadId);
    // åŒæ­¥è®¢é˜…æ‰§è¡Œï¼Œè·å–æ³¨å†Œè®¢é˜…Channelçš„å“åº”ï¼ŒåŒºåˆ†æ˜¯å¦æ”¯æŒä¸­æ–­
    if (interruptibly) {
        commandExecutor.syncSubscriptionInterrupted(future);
    } else {
        commandExecutor.syncSubscription(future);
    }
    // èµ°åˆ°ä¸‹é¢çš„forå¾ªç¯è¯´æ˜è¿”å›çš„ttlä¸ä¸ºç©ºï¼Œä¹Ÿå°±æ˜¯Rediså·²ç»å­˜åœ¨å¯¹åº”çš„KEYï¼Œæœ‰å…¶ä»–å®¢æˆ·ç«¯å·²ç»è·å–åˆ°é”ï¼Œæ­¤å®¢æˆ·ç«¯çº¿ç¨‹çš„è°ƒç”¨éœ€è¦é˜»å¡ç­‰å¾…è·å–é”
    try {
        while (true) {
            // æ­»å¾ªç¯ä¸­å°è¯•è·å–é”ï¼Œè¿™ä¸ªæ˜¯åé¢ä¼šåˆ†æçš„æ–¹æ³•
            ttl = tryAcquire(leaseTime, unit, threadId);
            // è¿”å›çš„ttlä¸ºç©ºï¼Œè¯´æ˜è·å–åˆ°é”ï¼Œè·³å‡ºæ­»å¾ªç¯ï¼Œè¿™ä¸ªæ­»å¾ªç¯æˆ–è€…æŠ›å‡ºä¸­æ–­å¼‚å¸¸ï¼Œæˆ–è€…è·å–åˆ°é”æˆåŠŸbreakè·³å‡ºï¼Œæ²¡æœ‰å…¶ä»–æ–¹å¼
            if (ttl == null) {
                break;
            }

            // è¿™ä¸ªttlæ¥æºäºç­‰å¾…å­˜åœ¨çš„é”çš„KEYçš„å­˜æ´»æ—¶é—´ï¼Œç›´æ¥ä½¿ç”¨è®¸å¯ä¸º0çš„ä¿¡å·é‡è¿›è¡Œé˜»å¡ç­‰å¾…ï¼Œä¸‹é¢çš„å‡ ä¸ªåˆ†æ”¯åˆ¤æ–­éƒ½æ˜¯å¤§åŒå°å¼‚ï¼Œåªæ˜¯æœ‰çš„æ”¯æŒè¶…æ—¶æ—¶é—´ï¼Œæœ‰çš„æ”¯æŒä¸­æ–­
            // æœ‰çš„æ˜¯æ°¸ä¹…é˜»å¡ç›´åˆ°é”é‡Šæ”¾äº‹ä»¶è®¢é˜…LockPubSubçš„onMessage()æ–¹æ³•å›è°ƒæ¿€æ´»getLatch().release()è¿›è¡Œè§£é”æ‰ä¼šå¾€ä¸‹èµ°
            // è¿™é‡Œå¯ä»¥å­¦åˆ°ä¸€ä¸ªç‰¹æ®Šçš„æŠ€å·§ï¼ŒSemaphore(0)ï¼Œä¿¡å·é‡çš„è®¸å¯è®¾ç½®ä¸º0ï¼Œé¦–ä¸ªè°ƒç”¨acquire()çš„çº¿ç¨‹ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°å…¶ä»–çº¿ç¨‹è°ƒç”¨æ­¤ä¿¡å·é‡çš„release()æ–¹æ³•æ‰ä¼šè§£é™¤é˜»å¡ï¼Œç±»ä¼¼äºä¸€ä¸ªCountDownLatch(1)çš„æ•ˆæœ
            if (ttl &amp;gt;= 0) {
                try {
                    future.getNow().getLatch().tryAcquire(ttl, TimeUnit.MILLISECONDS);
                } catch (InterruptedException e) {
                    if (interruptibly) {
                        throw e;
                    }
                    future.getNow().getLatch().tryAcquire(ttl, TimeUnit.MILLISECONDS);
                }
            } else {
                if (interruptibly) {
                    future.getNow().getLatch().acquire();
                } else {
                    future.getNow().getLatch().acquireUninterruptibly();
                }
            }
        }
    } finally {
        // è·å–åˆ°é”æˆ–è€…æŠ›å‡ºä¸­æ–­å¼‚å¸¸ï¼Œé€€è®¢redisson_lock__channel:{$KEY}ï¼Œä¸å†å…³æ³¨è§£é”äº‹ä»¶
        unsubscribe(future, threadId);
    }
}

// è¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥è½¬åŒæ­¥çš„æ–¹æ³•ï¼Œç±»ä¼¼äºFutureTask#get()ï¼Œå…³é”®çœ‹è°ƒç”¨çš„tryAcquireAsync()æ–¹æ³•
private Long tryAcquire(long leaseTime, TimeUnit unit, long threadId) {
    return get(tryAcquireAsync(leaseTime, unit, threadId));
}

/**
 * é€šè¿‡ä¼ å…¥é”æŒæœ‰çš„æœ€å¤§æ—¶é—´å’Œçº¿ç¨‹IDå¼‚æ­¥è·å–é”
 */
private &amp;lt;T&amp;gt; RFuture&amp;lt;Long&amp;gt; tryAcquireAsync(long leaseTime, TimeUnit unit, long threadId) {
    // é”æŒæœ‰æœ€å¤§æ—¶é—´ä¸ä¸º-1ï¼Œä¹Ÿå°±æ˜¯æ˜ç¡®é”çš„æŒæœ‰æ—¶é—´ï¼Œä¸æ˜¯æ°¸ä¹…æŒæœ‰çš„åœºæ™¯
    if (leaseTime != -1) {
        return tryLockInnerAsync(leaseTime, unit, threadId, RedisCommands.EVAL_LONG);
    }
    // èµ°åˆ°è¿™é‡Œè¯´æ˜æ˜¯leaseTime == -1ï¼ŒKEYä¸è®¾ç½®è¿‡æœŸæ—¶é—´çš„åˆ†æ”¯ï¼Œéœ€è¦å¯åŠ¨çœ‹é—¨ç‹—æœºåˆ¶ã€‚å°è¯•å†…éƒ¨å¼‚æ­¥è·å–é”ï¼Œæ³¨æ„è¿™é‡Œçš„lockWatchdogTimeoutæ˜¯ä»é…ç½®ä¸­è·å–ä¼ è¿›å»ï¼Œä¸æ˜¯å†…éƒ¨çš„internalLockLeaseTimeå±æ€§ï¼Œè¿™é‡Œçš„é»˜è®¤å€¼è¿˜æ˜¯30000æ¯«ç§’
    RFuture&amp;lt;Long&amp;gt; ttlRemainingFuture = tryLockInnerAsync(commandExecutor.getConnectionManager().getCfg().getLockWatchdogTimeout(), TimeUnit.MILLISECONDS, threadId, RedisCommands.EVAL_LONG);
    ttlRemainingFuture.onComplete((ttlRemaining, e) -&amp;gt; {
        // æ‰§è¡Œå¼‚å¸¸åœºæ™¯ç›´æ¥è¿”å›
        if (e != null) {
            return;
        }

        // æˆåŠŸè·å–åˆ°é”çš„åœºæ™¯ï¼Œéœ€è¦åŸºäºçº¿ç¨‹IDå¯ç”¨çœ‹é—¨ç‹—ï¼Œé€šè¿‡æ—¶é—´è½®æŒ‡å®šå®šæ—¶ä»»åŠ¡è¿›è¡Œç»­æœŸ
        if (ttlRemaining == null) {
            // å®šæ—¶è°ƒåº¦è¿›è¡Œç»­æœŸæ“ä½œ
            scheduleExpirationRenewal(threadId);
        }
    });
    return ttlRemainingFuture;
}

/**
 * è½¬æ¢é”æŒæœ‰æœ€å¤§æ—¶é—´ï¼Œé€šè¿‡å‚æ•°è¿›è¡ŒåŠ é”çš„LUAè„šæœ¬è°ƒç”¨ 
 * getName()å°±æ˜¯ä¼ å…¥çš„KEYï¼Œå¦‚resource:x getLockName()å°±æ˜¯é”çš„åç§°ï¼Œå½¢å¼æ˜¯ï¼šUUID + : + threadIdï¼Œå¦‚559cc9df-bad8-4f6c-86a4-ffa51b7f1c36:1
 * internalLockLeaseTimeåœ¨leaseTime != -1çš„å‰æä¸‹ä½¿ç”¨çš„æ˜¯åŸå€¼ï¼Œåœ¨leaseTime == -1çš„å‰æä¸‹ï¼Œä½¿ç”¨çš„æ˜¯lockWatchdogTimeout
 */
&amp;lt;T&amp;gt; RFuture&amp;lt;T&amp;gt; tryLockInnerAsync(long leaseTime, TimeUnit unit, long threadId, RedisStrictCommand&amp;lt;T&amp;gt; command) {
    // æ—¶é—´è½¬æ¢ä¸ºæ¯«ç§’ï¼Œæ³¨æ„ä¸€ç‚¹è¿™é‡Œçš„internalLockLeaseTimeæ˜¯ç±»å†…çš„å±æ€§ï¼Œè¢«é‡æ–°èµ‹å€¼äº†
    internalLockLeaseTime = unit.toMillis(leaseTime);
    // åº•å±‚å‘RedisæœåŠ¡æ‰§è¡ŒLUAè„šæœ¬
    return commandExecutor.evalWriteAsync(getName(), LongCodec.INSTANCE, command,
                &quot;if (redis.call('exists', KEYS[1]) == 0) then &quot; +
                    &quot;redis.call('hset', KEYS[1], ARGV[2], 1); &quot; +
                    &quot;redis.call('pexpire', KEYS[1], ARGV[1]); &quot; +
                    &quot;return nil; &quot; +
                &quot;end; &quot; +
                &quot;if (redis.call('hexists', KEYS[1], ARGV[2]) == 1) then &quot; +
                    &quot;redis.call('hincrby', KEYS[1], ARGV[2], 1); &quot; +
                    &quot;redis.call('pexpire', KEYS[1], ARGV[1]); &quot; +
                    &quot;return nil; &quot; +
                &quot;end; &quot; +
                &quot;return redis.call('pttl', KEYS[1]);&quot;,
                Collections.&amp;lt;Object&amp;gt;singletonList(getName()), internalLockLeaseTime, getLockName(threadId));
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;å…ˆç•™æ„ä¸€ä¸‹å±æ€§&lt;code&gt;internalLockLeaseTime&lt;/code&gt;ï¼Œå®ƒåœ¨&lt;code&gt;tryLockInnerAsync()&lt;/code&gt;æ–¹æ³•å†…è¢«é‡æ–°èµ‹å€¼ï¼Œåœ¨&lt;code&gt;leaseTime == -1L&lt;/code&gt;çš„å‰æä¸‹ï¼Œå®ƒè¢«èµ‹å€¼ä¸º&lt;code&gt;lockWatchdogTimeout&lt;/code&gt;ï¼Œè¿™ä¸ªç»†èŠ‚å¾ˆé‡è¦ï¼Œå†³å®šäº†åé¢ç»­æœŸæ–¹æ³•ï¼ˆçœ‹é—¨ç‹—ï¼‰çš„è°ƒåº¦é¢‘ç‡ã€‚å¦å¤–ï¼Œ&lt;code&gt;leaseTime != -1L&lt;/code&gt;ä¸ä¼šè¿›è¡Œç»­æœŸï¼Œä¹Ÿå°±æ˜¯ä¸ä¼šå¯åŠ¨çœ‹é—¨ç‹—æœºåˆ¶ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ¥ç€éœ€è¦ä»”ç»†åˆ†æä¸€ä¸‹&lt;code&gt;tryLockInnerAsync()&lt;/code&gt;ä¸­æ‰§è¡Œçš„&lt;code&gt;LUA&lt;/code&gt;è„šæœ¬ï¼Œç¬”è€…æŠŠå®ƒæå–å‡ºæ¥é€šè¿‡æ³¨é‡Šè¿›è¡Œæè¿°ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-lua&quot;&gt;-- KEYS[1] == getName() --&amp;gt; $KEY --&amp;gt; resource:x
-- ARGV[1] == internalLockLeaseTime --&amp;gt; 30000
-- ARGV[2] == getLockName(threadId) --&amp;gt; 559cc9df-bad8-4f6c-86a4-ffa51b7f1c36:1
-- ç¬¬ä¸€æ®µä»£ç æ˜¯åˆ¤æ–­é”å®šçš„èµ„æºKEYä¸å­˜åœ¨çš„æ—¶å€™è¿›è¡Œç›¸åº”å€¼çš„è®¾ç½®ï¼Œä»£è¡¨èµ„æºæ²¡æœ‰è¢«é”å®šï¼Œé¦–æ¬¡è·å–é”æˆåŠŸ
if (redis.call('exists', KEYS[1]) == 0) then
    -- è¿™é‡Œæ˜¯è®¾ç½®è°ƒç”¨æ¬¡æ•°ï¼Œå¯ä»¥ç†è§£ä¸ºå»¶é•¿KEYè¿‡æœŸæ—¶é—´çš„è°ƒç”¨æ¬¡æ•°
    redis.call('hset', KEYS[1], ARGV[2], 1);
    -- è®¾ç½®KEYçš„è¿‡æœŸæ—¶é—´
    redis.call('pexpire', KEYS[1], ARGV[1]);
    return nil;
end;
-- ç¬¬äºŒæ®µä»£ç æ˜¯åˆ¤æ–­HASHçš„fieldæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨è¯´æ˜æ˜¯åŒä¸€ä¸ªçº¿ç¨‹é‡å…¥çš„æƒ…å†µï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦å»¶é•¿KEYçš„TTLï¼Œå¹¶ä¸”HASHçš„fieldå¯¹åº”çš„valueåŠ 1ï¼Œè®°å½•å»¶é•¿ttlçš„æ¬¡æ•°
if (redis.call('hexists', KEYS[1], ARGV[2]) == 1) then
    -- è¿™é‡Œæ˜¯å¢åŠ è°ƒç”¨æ¬¡æ•°ï¼Œå¯ä»¥ç†è§£ä¸ºå¢åŠ å»¶é•¿KEYè¿‡æœŸæ—¶é—´çš„è°ƒç”¨æ¬¡æ•°
    redis.call('hincrby', KEYS[1], ARGV[2], 1);
    -- å»¶é•¿KEYçš„è¿‡æœŸæ—¶é—´
    redis.call('pexpire', KEYS[1], ARGV[1]);
    return nil;
end;
-- ç¬¬ä¸‰æ®µä»£ç æ˜¯å…œåº•çš„ï¼Œèµ°åˆ°è¿™é‡Œè¯´æ˜å½“å‰çº¿ç¨‹è·å–é”å¤±è´¥ï¼Œé”å·²ç»è¢«å…¶ä»–ï¼ˆè¿›ç¨‹ä¸­çš„ï¼‰çº¿ç¨‹å æœ‰ï¼Œè¿”å›å½“å‰KEYè¢«å ç”¨èµ„æºçš„ttlï¼Œç”¨æ¥ç¡®å®šéœ€è¦ä¼‘çœ çš„æœ€å¤§æ—¶é—´
return redis.call('pttl', KEYS[1]);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œç”»ä¸€ä¸ªå›¾æ¼”ç¤ºä¸€ä¸‹è¿™ä¸ª&lt;code&gt;Lua&lt;/code&gt;è„šæœ¬ä¸­ä¸‰æ®µä»£ç å‡ºç°çš„é€»è¾‘ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/202101/l-f-x-c-r-i-6.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å‰©ä¸‹ä¸€ä¸ª&lt;code&gt;scheduleExpirationRenewal(threadId)&lt;/code&gt;æ–¹æ³•è¿˜æ²¡æœ‰åˆ†æï¼Œé‡Œé¢çš„é€»è¾‘å°±æ˜¯çœ‹é—¨ç‹—çš„å®šæœŸç»­æœŸé€»è¾‘ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;// åŸºäºçº¿ç¨‹IDå®šæ—¶è°ƒåº¦å’Œç»­æœŸ
private void scheduleExpirationRenewal(long threadId) {
    // å¦‚æœéœ€è¦çš„è¯æ–°å»ºä¸€ä¸ªExpirationEntryè®°å½•çº¿ç¨‹é‡å…¥è®¡æ•°ï¼ŒåŒæ—¶æŠŠç»­æœŸçš„ä»»åŠ¡Timeoutå¯¹è±¡ä¿å­˜åœ¨å±æ€§ä¸­
    ExpirationEntry entry = new ExpirationEntry();
    ExpirationEntry oldEntry = EXPIRATION_RENEWAL_MAP.putIfAbsent(getEntryName(), entry);
    if (oldEntry != null) {
        // å½“å‰è¿›è¡Œçš„å½“å‰çº¿ç¨‹é‡å…¥åŠ é”
        oldEntry.addThreadId(threadId);
    } else {
        // å½“å‰è¿›è¡Œçš„å½“å‰çº¿ç¨‹é¦–æ¬¡åŠ é”
        entry.addThreadId(threadId);
        // é¦–æ¬¡æ–°å»ºExpirationEntryéœ€è¦è§¦å‘ç»­æœŸæ–¹æ³•ï¼Œè®°å½•ç»­æœŸçš„ä»»åŠ¡å¥æŸ„
        renewExpiration();
    }
}

// å¤„ç†ç»­æœŸ
private void renewExpiration() {
    // æ ¹æ®entryNameè·å–ExpirationEntryå®ä¾‹ï¼Œå¦‚æœä¸ºç©ºï¼Œè¯´æ˜åœ¨cancelExpirationRenewal()æ–¹æ³•å·²ç»è¢«ç§»é™¤ï¼Œä¸€èˆ¬æ˜¯è§£é”çš„æ—¶å€™è§¦å‘
    ExpirationEntry ee = EXPIRATION_RENEWAL_MAP.get(getEntryName());
    if (ee == null) {
        return;
    }
    // æ–°å»ºä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œè¿™ä¸ªå°±æ˜¯çœ‹é—¨ç‹—çš„å®ç°ï¼Œio.netty.util.Timeoutæ˜¯Nettyç»“åˆæ—¶é—´è½®ä½¿ç”¨çš„å®šæ—¶ä»»åŠ¡å®ä¾‹
    Timeout task = commandExecutor.getConnectionManager().newTimeout(new TimerTask() {
        @Override
        public void run(Timeout timeout) throws Exception {
            // è¿™é‡Œæ˜¯é‡å¤å¤–é¢çš„é‚£ä¸ªé€»è¾‘ï¼Œ
            ExpirationEntry ent = EXPIRATION_RENEWAL_MAP.get(getEntryName());
            if (ent == null) {
                return;
            }
            // è·å–ExpirationEntryä¸­é¦–ä¸ªçº¿ç¨‹IDï¼Œå¦‚æœä¸ºç©ºè¯´æ˜è°ƒç”¨è¿‡cancelExpirationRenewal()æ–¹æ³•æ¸…ç©ºæŒæœ‰çš„çº¿ç¨‹é‡å…¥è®¡æ•°ï¼Œä¸€èˆ¬æ˜¯é”å·²ç»é‡Šæ”¾çš„åœºæ™¯
            Long threadId = ent.getFirstThreadId();
            if (threadId == null) {
                return;
            }
            // å‘Rediså¼‚æ­¥å‘é€ç»­æœŸçš„å‘½ä»¤
            RFuture&amp;lt;Boolean&amp;gt; future = renewExpirationAsync(threadId);
            future.onComplete((res, e) -&amp;gt; {
                // æŠ›å‡ºå¼‚å¸¸ï¼Œç»­æœŸå¤±è´¥ï¼Œåªæ‰“å°æ—¥å¿—å’Œç›´æ¥ç»ˆæ­¢ä»»åŠ¡
                if (e != null) {
                    log.error(&quot;Can't update lock &quot; + getName() + &quot; expiration&quot;, e);
                    return;
                }
                // è¿”å›trueè¯æ˜ç»­æœŸæˆåŠŸï¼Œåˆ™é€’å½’è°ƒç”¨ç»­æœŸæ–¹æ³•ï¼ˆé‡æ–°è°ƒåº¦è‡ªå·±ï¼‰ï¼Œç»­æœŸå¤±è´¥è¯´æ˜å¯¹åº”çš„é”å·²ç»ä¸å­˜åœ¨ï¼Œç›´æ¥è¿”å›ï¼Œä¸å†é€’å½’
                if (res) {
                    // reschedule itself
                    renewExpiration();
                }
            });
        }
    }, 
    // è¿™é‡Œçš„æ‰§è¡Œé¢‘ç‡ä¸ºleaseTimeè½¬æ¢ä¸ºmså•ä½ä¸‹çš„ä¸‰åˆ†ä¹‹ä¸€ï¼Œç”±äºleaseTimeåˆå§‹å€¼ä¸º-1çš„æƒ…å†µä¸‹æ‰ä¼šè¿›å…¥ç»­æœŸé€»è¾‘ï¼Œé‚£ä¹ˆè¿™é‡Œçš„æ‰§è¡Œé¢‘ç‡ä¸ºlockWatchdogTimeoutçš„ä¸‰åˆ†ä¹‹ä¸€
    internalLockLeaseTime / 3, TimeUnit.MILLISECONDS); 
    
    // ExpirationEntryå®ä¾‹æŒæœ‰è°ƒåº¦ä»»åŠ¡å®ä¾‹
    ee.setTimeout(task);
}

// è°ƒç”¨Redisï¼Œæ‰§è¡ŒLuaè„šæœ¬ï¼Œè¿›è¡Œå¼‚æ­¥ç»­æœŸ
protected RFuture&amp;lt;Boolean&amp;gt; renewExpirationAsync(long threadId) {
    return commandExecutor.evalWriteAsync(getName(), LongCodec.INSTANCE, RedisCommands.EVAL_BOOLEAN,
            &quot;if (redis.call('hexists', KEYS[1], ARGV[2]) == 1) then &quot; +
                &quot;redis.call('pexpire', KEYS[1], ARGV[1]); &quot; +
                &quot;return 1; &quot; +
            &quot;end; &quot; +
            &quot;return 0;&quot;,
        Collections.&amp;lt;Object&amp;gt;singletonList(getName()), 
        //  è¿™é‡Œæ ¹æ®å‰é¢çš„åˆ†æï¼ŒinternalLockLeaseTimeåœ¨leaseTimeçš„å€¼ä¸º-1çš„å‰æä¸‹ï¼Œå¯¹åº”å€¼ä¸ºlockWatchdogTimeout
        internalLockLeaseTime, getLockName(threadId));  
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åŸºäºæºç æ¨æ–­å‡ºç»­æœŸçš„æœºåˆ¶ç”±å…¥å‚&lt;code&gt;leaseTime&lt;/code&gt;å†³å®šï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å½“&lt;code&gt;leaseTime == -1&lt;/code&gt;çš„å‰æä¸‹ï¼ˆä¸€èˆ¬æ˜¯&lt;code&gt;lock()&lt;/code&gt;å’Œ&lt;code&gt;lockInterruptibly()&lt;/code&gt;è¿™ç±»æ–¹æ³•è°ƒç”¨ï¼‰ï¼Œç»­æœŸä»»åŠ¡çš„è°ƒåº¦å‘¨æœŸä¸º&lt;code&gt;lockWatchdogTimeout / 3&lt;/code&gt;ï¼Œé”çš„æœ€å¤§æŒæœ‰æ—¶é—´ï¼ˆ&lt;code&gt;KEY&lt;/code&gt;çš„è¿‡æœŸæ—¶é—´ï¼‰è¢«åˆ·æ–°ä¸º&lt;code&gt;lockWatchdogTimeout&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å½“&lt;code&gt;leaseTime != -1&lt;/code&gt;çš„å‰æä¸‹ï¼ˆä¸€èˆ¬æ˜¯&lt;code&gt;lock(long leaseTime, TimeUnit unit)&lt;/code&gt;å’Œ&lt;code&gt;lockInterruptibly(long leaseTime, TimeUnit unit)&lt;/code&gt;è¿™ç±»æ–¹æ³•è°ƒç”¨æŒ‡å®š&lt;code&gt;leaseTime&lt;/code&gt;ä¸ä¸º&lt;code&gt;-1&lt;/code&gt;ï¼‰ï¼Œè¿™ç§æƒ…å†µä¸‹ä¼šç›´æ¥è®¾ç½®é”çš„è¿‡æœŸæ—¶é—´ä¸ºè¾“å…¥å€¼è½¬æ¢ä¸º&lt;code&gt;ms&lt;/code&gt;å•ä½çš„æ—¶é—´é‡ï¼Œä¸ä¼šå¯åŠ¨ç»­æœŸæœºåˆ¶&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æå–ç»­æœŸçš„&lt;code&gt;Lua&lt;/code&gt;è„šæœ¬å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-lua&quot;&gt;-- KEYS[1] == getName() --&amp;gt; $KEY --&amp;gt; resource:x
-- ARGV[1] == internalLockLeaseTime --&amp;gt; 30000
-- ARGV[2] == getLockName(threadId) --&amp;gt; 559cc9df-bad8-4f6c-86a4-ffa51b7f1c36:1
if (redis.call('hexists', KEYS[1], ARGV[2]) == 1) then
    redis.call('pexpire', KEYS[1], ARGV[1]);
    return 1;
end;
return 0;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åˆ°æ­¤ä¸ºæ­¢ï¼Œä¸å¸¦&lt;code&gt;waitTime&lt;/code&gt;å‚æ•°çš„åŠ é”å’Œç»­æœŸé€»è¾‘åŸºæœ¬åˆ†æå®Œæ¯•ï¼Œè€Œå¸¦&lt;code&gt;waitTime&lt;/code&gt;å‚æ•°çš„&lt;code&gt;tryLock(long waitTime, long leaseTime, TimeUnit unit)&lt;/code&gt;å®ç°å…¶å®å’Œåªå­˜åœ¨&lt;code&gt;leaseTime&lt;/code&gt;å‚æ•°çš„&lt;code&gt;lock(long leaseTime, TimeUnit unit, boolean interruptibly)&lt;/code&gt;å®ç°åº•å±‚è°ƒç”¨çš„æ–¹æ³•æ˜¯ä¸€è‡´çš„ï¼Œæœ€å¤§çš„åŒºåˆ«æ˜¯ä¼šåœ¨å°è¯•è·å–é”æ“ä½œä¹‹ååŸºäºå‰åçš„&lt;code&gt;System.currentTimeMillis()&lt;/code&gt;è®¡ç®—å‡ºæ—¶é—´å·®å’Œ&lt;code&gt;waitTime&lt;/code&gt;åšå¯¹æ¯”ï¼Œå†³å®šéœ€è¦é˜»å¡ç­‰å¾…è¿˜æ˜¯ç›´æ¥è¶…æ—¶è·å–é”å¤±è´¥è¿”å›ï¼Œå¤„ç†é˜»å¡ç­‰å¾…çš„é€»è¾‘æ˜¯å®¢æˆ·ç«¯æœ¬èº«çš„é€»è¾‘ï¼Œè¿™é‡Œå°±ä¸åšè¯¦ç»†å±•å¼€ï¼Œå› ä¸ºæºç å®ç°ä¹Ÿä¸æ˜¯ååˆ†ä¼˜é›…ï¼ˆå¤ªå¤š&lt;code&gt;long currentTime = System.currentTimeMillis()&lt;/code&gt;çš„ä»£ç æ®µäº†ï¼‰ã€‚æ¥ç€èŠ±ç‚¹åŠŸå¤«åˆ†æä¸€ä¸‹è§£é”çš„å®ç°ï¼ŒåŒ…æ‹¬ä¸€èˆ¬æƒ…å†µä¸‹çš„è§£é”&lt;code&gt;unlock()&lt;/code&gt;å’Œå¼ºåˆ¶è§£é”&lt;code&gt;forceUnlockAsync()&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;//  ä¸€èˆ¬æƒ…å†µä¸‹çš„è§£é”
@Override
public void unlock() {
    try {
        get(unlockAsync(Thread.currentThread().getId()));
    } catch (RedisException e) {
        // IllegalMonitorStateExceptionä¸€èˆ¬æ˜¯Açº¿ç¨‹åŠ é”ï¼ŒBçº¿ç¨‹è§£é”ï¼Œå†…éƒ¨åˆ¤æ–­çº¿ç¨‹çŠ¶æ€ä¸ä¸€è‡´æŠ›å‡ºçš„
        if (e.getCause() instanceof IllegalMonitorStateException) {
            throw (IllegalMonitorStateException) e.getCause();
        } else {
            throw e;
        }
    }
}

@Override
public RFuture&amp;lt;Void&amp;gt; unlockAsync() {
    // è·å–å½“å‰è°ƒç”¨è§£é”æ“ä½œçš„çº¿ç¨‹ID
    long threadId = Thread.currentThread().getId();
    return unlockAsync(threadId);
}

@Override
public RFuture&amp;lt;Void&amp;gt; unlockAsync(long threadId) {
    // æ„å»ºä¸€ä¸ªç»“æœRedissonPromise
    RPromise&amp;lt;Void&amp;gt; result = new RedissonPromise&amp;lt;Void&amp;gt;();
    // è¿”å›çš„RFutureå¦‚æœæŒæœ‰çš„ç»“æœä¸ºtrueï¼Œè¯´æ˜è§£é”æˆåŠŸï¼Œè¿”å›NULLè¯´æ˜çº¿ç¨‹IDå¼‚å¸¸ï¼ŒåŠ é”å’Œè§£é”çš„å®¢æˆ·ç«¯çº¿ç¨‹ä¸æ˜¯åŒä¸€ä¸ªçº¿ç¨‹
    RFuture&amp;lt;Boolean&amp;gt; future = unlockInnerAsync(threadId);
    future.onComplete((opStatus, e) -&amp;gt; {
        // è¿™æ˜¯å†…éƒ¨çš„å¼‚å¸¸ï¼Œè¯´æ˜è§£é”å¼‚å¸¸ï¼Œéœ€è¦å–æ¶ˆçœ‹é—¨ç‹—çš„ç»­æœŸä»»åŠ¡
        if (e != null) {
            cancelExpirationRenewal(threadId);
            result.tryFailure(e);
            return;
        }
        // è¿™ç§æƒ…å†µè¯´æ˜çº¿ç¨‹IDå¼‚å¸¸ï¼ŒåŠ é”å’Œè§£é”çš„å®¢æˆ·ç«¯çº¿ç¨‹ä¸æ˜¯åŒä¸€ä¸ªçº¿ç¨‹ï¼ŒæŠ›å‡ºIllegalMonitorStateExceptionå¼‚å¸¸
        if (opStatus == null) {
            IllegalMonitorStateException cause = new IllegalMonitorStateException(&quot;attempt to unlock lock, not locked by current thread by node id: &quot;
                    + id + &quot; thread-id: &quot; + threadId);
            result.tryFailure(cause);
            return;
        }
        // èµ°åˆ°è¿™é‡Œè¯´æ˜æ­£å¸¸è§£é”ï¼Œå–æ¶ˆçœ‹é—¨ç‹—çš„ç»­æœŸä»»åŠ¡
        cancelExpirationRenewal(threadId);
        result.trySuccess(null);
    });
    return result;
}

// çœŸæ­£çš„å†…éƒ¨è§£é”çš„æ–¹æ³•ï¼Œæ‰§è¡Œè§£é”çš„Luaè„šæœ¬
protected RFuture&amp;lt;Boolean&amp;gt; unlockInnerAsync(long threadId) {
    return commandExecutor.evalWriteAsync(getName(), LongCodec.INSTANCE, RedisCommands.EVAL_BOOLEAN,
            &quot;if (redis.call('hexists', KEYS[1], ARGV[3]) == 0) then &quot; +
                &quot;return nil;&quot; +
            &quot;end; &quot; +
            &quot;local counter = redis.call('hincrby', KEYS[1], ARGV[3], -1); &quot; +
            &quot;if (counter &amp;gt; 0) then &quot; +
                &quot;redis.call('pexpire', KEYS[1], ARGV[2]); &quot; +
                &quot;return 0; &quot; +
            &quot;else &quot; +
                &quot;redis.call('del', KEYS[1]); &quot; +
                &quot;redis.call('publish', KEYS[2], ARGV[1]); &quot; +
                &quot;return 1; &quot;+
            &quot;end; &quot; +
            &quot;return nil;&quot;,
            Arrays.&amp;lt;Object&amp;gt;asList(getName(), getChannelName()), LockPubSub.UNLOCK_MESSAGE, internalLockLeaseTime, getLockName(threadId));
}

// å–æ¶ˆç»­æœŸä»»åŠ¡
void cancelExpirationRenewal(Long threadId) {
    // è¿™é‡Œè¯´æ˜ExpirationEntryå·²ç»è¢«ç§»é™¤ï¼Œä¸€èˆ¬æ˜¯åŸºäºåŒä¸€ä¸ªçº¿ç¨‹IDå¤šæ¬¡è°ƒç”¨è§£é”æ–¹æ³•å¯¼è‡´çš„ï¼ˆå¹¶å‘è§£é”ï¼‰
    ExpirationEntry task = EXPIRATION_RENEWAL_MAP.get(getEntryName());
    if (task == null) {
        return;
    }
    // ä¼ å…¥çš„çº¿ç¨‹IDä¸ä¸ºNULLï¼Œä»ExpirationEntryä¸­ç§»é™¤çº¿ç¨‹IDï¼Œå¦‚æœæŒæœ‰çš„çº¿ç¨‹IDå¯¹åº”çš„çº¿ç¨‹é‡å…¥è®¡æ•°ä¸ä¸º0ï¼Œä¼šå…ˆé€’å‡åˆ°0ï¼Œç­‰äº0çš„å‰æä¸‹æ‰ä¼šè¿›è¡Œåˆ é™¤
    if (threadId != null) {
        task.removeThreadId(threadId);
    }
    // è¿™é‡ŒthreadId == nullçš„æƒ…å†µæ˜¯ä¸ºäº†æ»¡è¶³å¼ºåˆ¶è§£é”çš„åœºæ™¯ï¼Œå¼ºåˆ¶è§£é”éœ€è¦ç›´æ¥åˆ é™¤é”æ‰€åœ¨çš„KEYï¼Œä¸éœ€è¦ç†ä¼šä¼ å…¥çš„çº¿ç¨‹IDï¼ˆä¼ å…¥çš„çº¿ç¨‹IDç›´æ¥ä¸ºNULLï¼‰
    // åè€…task.hasNoThreads()æ˜¯ä¸ºäº†è¯´æ˜å½“å‰çš„é”æ²¡æœ‰è¢«ä»»ä½•çº¿ç¨‹æŒæœ‰ï¼Œå¯¹äºå•çº¿ç¨‹ä¹Ÿç¡®å®šåœ¨ç§»é™¤çº¿ç¨‹IDä¹‹åé‡å…¥è®¡æ•°å™¨å·²ç»ä¸º0ï¼Œä»ExpirationEntryä¸­ç§»é™¤ï¼Œè¿™ä¸ªæ—¶å€™è·å–ExpirationEntryçš„ä»»åŠ¡å®ä¾‹è¿›è¡Œå–æ¶ˆå³å¯
    if (threadId == null || task.hasNoThreads()) {
        Timeout timeout = task.getTimeout();
        if (timeout != null) {
            timeout.cancel();
        }
        // EntryName -&amp;gt; ExpirationEntryæ˜ å°„ä¸­ç§»é™¤å½“å‰é”çš„ç›¸å…³å®ä¾‹ExpirationEntry
        EXPIRATION_RENEWAL_MAP.remove(getEntryName());
    }
}

// å¼ºåˆ¶è§£é”
@Override
public boolean forceUnlock() {
    return get(forceUnlockAsync());
}

@Override
public RFuture&amp;lt;Boolean&amp;gt; forceUnlockAsync() {
    // çº¿ç¨‹IDä¼ å…¥ä¸ºNULLï¼Œå–æ¶ˆå½“å‰çš„EntryNameå¯¹åº”çš„ç»­æœŸä»»åŠ¡
    cancelExpirationRenewal(null);
    // æ‰§è¡ŒLuaè„šæœ¬å¼ºåˆ¶åˆ é™¤é”æ‰€åœ¨çš„KEYå¹¶ä¸”å‘å¸ƒè§£é”æ¶ˆæ¯
    return commandExecutor.evalWriteAsync(getName(), LongCodec.INSTANCE, RedisCommands.EVAL_BOOLEAN,
            &quot;if (redis.call('del', KEYS[1]) == 1) then &quot;
            + &quot;redis.call('publish', KEYS[2], ARGV[1]); &quot;
            + &quot;return 1 &quot;
            + &quot;else &quot;
            + &quot;return 0 &quot;
            + &quot;end&quot;,
            Arrays.&amp;lt;Object&amp;gt;asList(getName(), getChannelName()), LockPubSub.UNLOCK_MESSAGE);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œåˆ—å‡ºä¸€èˆ¬æƒ…å†µä¸‹è§£é”å’Œå¼ºåˆ¶è§£é”çš„&lt;code&gt;Lua&lt;/code&gt;è„šæœ¬ï¼Œåˆ†æå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-lua&quot;&gt;-- unlockInnerAsyncæ–¹æ³•çš„luaè„šæœ¬
-- KEYS[1] == getName() --&amp;gt; $KEY --&amp;gt; resource:x
-- KEYS[2] == getChannelName() --&amp;gt; è®¢é˜…é”çš„Channel --&amp;gt; redisson_lock__channel:{resource:x}
-- ARGV[1] == LockPubSub.UNLOCK_MESSAGE --&amp;gt; å¸¸é‡æ•°å€¼0
-- ARGV[2] == internalLockLeaseTime --&amp;gt; 30000æˆ–è€…å…·ä½“çš„é”æœ€å¤§æŒæœ‰æ—¶é—´
-- ARGV[3] == getLockName(threadId) --&amp;gt; 559cc9df-bad8-4f6c-86a4-ffa51b7f1c36:1
-- ç¬¬ä¸€ä¸ªIFåˆ†æ”¯åˆ¤æ–­å¦‚æœé”æ‰€åœ¨çš„å“ˆå¸Œçš„fieldä¸å­˜åœ¨ï¼Œè¯´æ˜å½“å‰çº¿ç¨‹IDæœªæ›¾è·å–è¿‡å¯¹åº”çš„é”ï¼Œè¿”å›NULLè¡¨ç¤ºè§£é”å¤±è´¥
if (redis.call('hexists', KEYS[1], ARGV[3]) == 0) then
    return nil;
end;
-- èµ°åˆ°è¿™é‡Œé€šè¿‡hincrbyè¿›è¡Œçº¿ç¨‹é‡å…¥è®¡æ•°-1,è¿”å›è®¡æ•°å€¼
local counter = redis.call('hincrby', KEYS[1], ARGV[3], -1);
-- è®¡æ•°å€¼å¤§äº0ï¼Œè¯´æ˜çº¿ç¨‹é‡å…¥åŠ é”ï¼Œè¿™ä¸ªæ—¶å€™åŸºäºinternalLockLeaseTimeå¯¹é”æ‰€åœ¨KEYè¿›è¡Œç»­æœŸ
if (counter &amp;gt; 0) then
    redis.call('pexpire', KEYS[1], ARGV[2]);
    return 0;
else
    -- è®¡æ•°å€¼å°äºæˆ–ç­‰äº0ï¼Œè¯´æ˜å¯ä»¥è§£é”ï¼Œåˆ é™¤é”æ‰€åœ¨çš„KEYï¼Œå¹¶ä¸”å‘redisson_lock__channel:{$KEY}å‘å¸ƒæ¶ˆæ¯ï¼Œå†…å®¹æ˜¯0ï¼ˆå¸¸é‡æ•°å€¼ï¼‰
    redis.call('del', KEYS[1]);
    redis.call('publish', KEYS[2], ARGV[1]);
    return 1;
end;
-- æœ€åçš„return nil;åœ¨IDEAä¸­æç¤ºæ˜¯ä¸ä¼šåˆ°è¾¾çš„è¯­å¥ï¼Œä¼°è®¡è¿™é‡Œæ˜¯å¼€å‘è€…ç¬”è¯¯å†™ä¸Šå»çš„ï¼Œå‰é¢çš„if-elseéƒ½æœ‰è¿”å›è¯­å¥ï¼Œè¿™é‡Œåº”è¯¥æ˜¯ä¸å¯è¾¾çš„
return nil;

-------------------------------------------------- ä¸æ€ä¹ˆåä¸½çš„åˆ†å‰²çº¿ -------------------------------------------------

-- forceUnlockAsyncæ–¹æ³•çš„luaè„šæœ¬
-- KEYS[1] == getName() --&amp;gt; $KEY --&amp;gt; resource:x
-- KEYS[2] == getChannelName() --&amp;gt; è®¢é˜…é”çš„Channel --&amp;gt; redisson_lock__channel:{resource:x}
-- ARGV[1] == LockPubSub.UNLOCK_MESSAGE --&amp;gt; å¸¸é‡æ•°å€¼0
-- å¼ºåˆ¶åˆ é™¤é”æ‰€åœ¨çš„KEYï¼Œå¦‚æœåˆ é™¤æˆåŠŸå‘redisson_lock__channel:{$KEY}å‘å¸ƒæ¶ˆæ¯ï¼Œå†…å®¹æ˜¯0ï¼ˆå¸¸é‡æ•°å€¼ï¼‰
if (redis.call('del', KEYS[1]) == 1) then
    redis.call('publish', KEYS[2], ARGV[1]);
    return 1
else
    return 0
end
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…¶ä»–è¾…åŠ©æ–¹æ³•éƒ½ç›¸å¯¹ç®€å•ï¼Œè¿™é‡Œå¼„ä¸ªç®€å•çš„&quot;æµæ°´è´¦&quot;è®°å½•ä¸€ç•ªï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;isLocked()&lt;/code&gt;ï¼šåŸºäº&lt;code&gt;getName()&lt;/code&gt;è°ƒç”¨&lt;code&gt;Redis&lt;/code&gt;çš„&lt;code&gt;EXISTS $KEY&lt;/code&gt;å‘½ä»¤åˆ¤æ–­æ˜¯å¦åŠ é”&lt;/li&gt;
&lt;li&gt;&lt;code&gt;isHeldByThread(long threadId)&lt;/code&gt;å’Œ&lt;code&gt;isHeldByCurrentThread()&lt;/code&gt;ï¼šåŸºäº&lt;code&gt;getName()&lt;/code&gt;å’Œ&lt;code&gt;getLockName(threadId)&lt;/code&gt;è°ƒç”¨&lt;code&gt;Redis&lt;/code&gt;çš„&lt;code&gt;HEXISTS $KEY $LOCK_NAME&lt;/code&gt;å‘½ä»¤åˆ¤æ–­&lt;code&gt;HASH&lt;/code&gt;ä¸­å¯¹åº”çš„&lt;code&gt;field-value&lt;/code&gt;æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨åˆ™è¯´æ˜é”è¢«å¯¹åº”çº¿ç¨‹&lt;code&gt;ID&lt;/code&gt;çš„çº¿ç¨‹æŒæœ‰&lt;/li&gt;
&lt;li&gt;&lt;code&gt;getHoldCount()&lt;/code&gt;ï¼šåŸºäº&lt;code&gt;getName()&lt;/code&gt;å’Œ&lt;code&gt;getLockName(threadId)&lt;/code&gt;è°ƒç”¨&lt;code&gt;Redis&lt;/code&gt;çš„&lt;code&gt;HGET $KEY $LOCK_NAME&lt;/code&gt;å‘½ä»¤ï¼Œç”¨äºè·å–çº¿ç¨‹å¯¹äºæŸä¸€ä¸ªé”çš„æŒæœ‰é‡ï¼ˆæ³¨é‡Šå«&lt;code&gt;holds&lt;/code&gt;ï¼Œå…¶å®å°±æ˜¯åŒä¸€ä¸ªçº¿ç¨‹å¯¹æŸä¸€ä¸ªé”çš„&lt;code&gt;KEY&lt;/code&gt;çš„ç»­æœŸæ¬¡æ•°ï¼‰&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;è®¢é˜…å’Œå‘å¸ƒ&lt;/strong&gt;éƒ¨åˆ†è®¾è®¡åˆ°å¤§é‡&lt;code&gt;Netty&lt;/code&gt;ç»„ä»¶ä½¿ç”¨ç›¸å…³çš„æºç ï¼Œè¿™é‡Œä¸è¯¦ç»†å±•å¼€ï¼Œè¿™éƒ¨åˆ†çš„é€»è¾‘ç®€å•é™„åŠ åˆ°åé¢è¿™ä¸ªæµç¨‹å›¾ä¸­ã€‚æœ€åï¼Œé€šè¿‡ä¸€ä¸ªæ¯”è¾ƒè¯¦ç»†çš„å›¾åˆ†æä¸€ä¸‹&lt;code&gt;Redisson&lt;/code&gt;çš„åŠ é”å’Œè§£é”æµç¨‹ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä¸å¸¦&lt;code&gt;waitTime&lt;/code&gt;å‚æ•°çš„åŠ é”æµç¨‹ï¼š&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/202101/l-f-x-c-r-i-7.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å¸¦æœ‰&lt;code&gt;waitTime&lt;/code&gt;å‚æ•°çš„åŠ é”æµç¨‹ï¼ˆå›¾å³è¾¹çš„æµç¨‹åŸºæœ¬ä¸å˜ï¼Œä¸»è¦æ˜¯å·¦è¾¹çš„æµç¨‹æ¯ä¸€æ­¥éƒ½è¦è®¡ç®—æ—¶é—´é—´éš”ï¼‰ï¼š&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/202101/l-f-x-c-r-i-8.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;è§£é”æµç¨‹ï¼š&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/202101/l-f-x-c-r-i-9.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å‡è®¾ä¸åŒè¿›ç¨‹çš„ä¸¤ä¸ªä¸åŒçš„çº¿ç¨‹&lt;code&gt;X&lt;/code&gt;å’Œ&lt;code&gt;Y&lt;/code&gt;å»ç«äº‰èµ„æº&lt;code&gt;RESOURCE&lt;/code&gt;çš„é”ï¼Œé‚£ä¹ˆå¯èƒ½çš„æµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://throwable-blog-1256189093.cos.ap-guangzhou.myqcloud.com/202101/l-f-x-c-r-i-10.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æœ€åå†æ¦‚æ‹¬ä¸€ä¸‹&lt;code&gt;Redisson&lt;/code&gt;ä¸­å®ç°&lt;code&gt;red lock&lt;/code&gt;ç®—æ³•ä½¿ç”¨çš„&lt;code&gt;HASH&lt;/code&gt;æ•°æ®ç±»å‹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;KEY&lt;/code&gt;ä»£è¡¨çš„å°±æ˜¯èµ„æºæˆ–è€…é”ï¼Œ&lt;strong&gt;åˆ›å»ºã€å­˜åœ¨æ€§åˆ¤æ–­ï¼Œå»¶é•¿ç”Ÿå­˜å‘¨æœŸå’Œåˆ é™¤æ“ä½œæ€»æ˜¯é’ˆå¯¹&lt;code&gt;KEY&lt;/code&gt;è¿›è¡Œçš„&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;FIELD&lt;/code&gt;ä»£è¡¨çš„æ˜¯é”åç§°&lt;code&gt;lockName()&lt;/code&gt;ï¼Œä½†æ˜¯å…¶å®å®ƒç”±&lt;code&gt;Redisson&lt;/code&gt;è¿æ¥ç®¡ç†å™¨å®ä¾‹çš„åˆå§‹åŒ–&lt;code&gt;UUID&lt;/code&gt;æ‹¼æ¥å®¢æˆ·ç«¯çº¿ç¨‹&lt;code&gt;ID&lt;/code&gt;ç»„æˆï¼Œä¸¥æ ¼æ¥è¯´åº”è¯¥æ˜¯è·å–é”çš„å®¢æˆ·ç«¯çº¿ç¨‹å”¯ä¸€æ ‡è¯†&lt;/li&gt;
&lt;li&gt;&lt;code&gt;VALUE&lt;/code&gt;ä»£è¡¨çš„æ˜¯å®¢æˆ·ç«¯çº¿ç¨‹å¯¹äºé”çš„æŒæœ‰é‡ï¼Œä»æºç ä¸Šçœ‹åº”è¯¥æ˜¯&lt;code&gt;KEY&lt;/code&gt;è¢«ç»­æœŸçš„æ¬¡æ•°&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;åŸºäºjediså®ç°ç±»ä¼¼redissonçš„åˆ†å¸ƒå¼é”åŠŸèƒ½&quot;&gt;åŸºäºJediså®ç°ç±»ä¼¼Redissonçš„åˆ†å¸ƒå¼é”åŠŸèƒ½&lt;/h2&gt;
&lt;p&gt;å‰é¢çš„ç« èŠ‚å·²ç»æ¯”è¾ƒè¯¦ç»†åˆ†æäº†&lt;code&gt;Redisson&lt;/code&gt;ä¸­åˆ†å¸ƒå¼é”çš„å®ç°åŸç†ï¼Œè¿™é‡Œä½¿ç”¨&lt;code&gt;Jedis&lt;/code&gt;å’Œå¤šçº¿ç¨‹æŠ€å·§åšä¸€ä¸ªç±»ä¼¼çš„å®ç°ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œè¿™é‡Œåªå®ç°ä¸€ä¸ªæ— å…¥å‚çš„&lt;code&gt;lock()&lt;/code&gt;æ–¹æ³•ï¼ˆç±»ä¼¼äº&lt;code&gt;Redisson&lt;/code&gt;ä¸­&lt;code&gt;leaseTime == -1&lt;/code&gt;çš„åœºæ™¯ï¼‰å’Œ&lt;code&gt;unlock()&lt;/code&gt;æ–¹æ³•ã€‚å®šä¹‰æ¥å£&lt;code&gt;RedLock&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public interface RedLock {

    void lock(String resource) throws InterruptedException;

    void unlock(String resource);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸ºäº†ç®€å•èµ·è§ï¼Œç¬”è€…æŠŠæ‰€æœ‰å®ç°é€»è¾‘éƒ½å†™åœ¨å®ç°ç±»&lt;code&gt;RedisRedLock&lt;/code&gt;ä¸­ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@RequiredArgsConstructor
public class RedisRedLock implements RedLock {

    private final JedisPool jedisPool;
    private final String uuid;

    private static final String WATCH_DOG_TIMEOUT_STRING = &quot;30000&quot;;
    private static final long WATCH_DOG_TASK_DURATION = 10000L;
    private static final String CHANNEL_PREFIX = &quot;__red__lock:&quot;;
    private static final String UNLOCK_STATUS_STRING = &quot;0&quot;;

    private static final String LOCK_LUA = &quot;if (redis.call('exists', KEYS[1]) == 0) then\n&quot; +
            &quot;    redis.call('hset', KEYS[1], ARGV[2], 1);\n&quot; +
            &quot;    redis.call('pexpire', KEYS[1], ARGV[1]);\n&quot; +
            &quot;    return nil;\n&quot; +
            &quot;end;\n&quot; +
            &quot;if (redis.call('hexists', KEYS[1], ARGV[2]) == 1) then\n&quot; +
            &quot;    redis.call('hincrby', KEYS[1], ARGV[2], 1);\n&quot; +
            &quot;    redis.call('pexpire', KEYS[1], ARGV[1]);\n&quot; +
            &quot;    return nil;\n&quot; +
            &quot;end;\n&quot; +
            &quot;return redis.call('pttl', KEYS[1]);&quot;;

    private static final String UNLOCK_LUA = &quot;if (redis.call('hexists', KEYS[1], ARGV[3]) == 0) then\n&quot; +
            &quot;    return nil;\n&quot; +
            &quot;end;\n&quot; +
            &quot;local counter = redis.call('hincrby', KEYS[1], ARGV[3], -1);\n&quot; +
            &quot;if (counter &amp;gt; 0) then\n&quot; +
            &quot;    redis.call('pexpire', KEYS[1], ARGV[2]);\n&quot; +
            &quot;    return 0;\n&quot; +
            &quot;else\n&quot; +
            &quot;    redis.call('del', KEYS[1]);\n&quot; +
            &quot;    redis.call('publish', KEYS[2], ARGV[1]);\n&quot; +
            &quot;    return 1;\n&quot; +
            &quot;end;&quot;;

    private static final String RENEW_LUA = &quot;if (redis.call('hexists', KEYS[1], ARGV[2]) == 1) then &quot; +
            &quot;redis.call('pexpire', KEYS[1], ARGV[1]); &quot; +
            &quot;return 1; &quot; +
            &quot;end; &quot; +
            &quot;return 0;&quot;;

    private static final ExecutorService SUB_PUB_POOL = Executors.newCachedThreadPool();
    private static final ScheduledExecutorService WATCH_DOG_POOL = new ScheduledThreadPoolExecutor(
            Runtime.getRuntime().availableProcessors() * 2
    );

    private static class ThreadEntry {

        private final ConcurrentMap&amp;lt;Long, Integer&amp;gt; threadCounter = Maps.newConcurrentMap();

        private volatile WatchDogTask watchDogTask;

        public synchronized void addThreadId(long threadId) {
            Integer counter = threadCounter.get(threadId);
            if (counter == null) {
                counter = 1;
            } else {
                counter++;
            }
            threadCounter.put(threadId, counter);
        }

        public synchronized boolean hasNoThreads() {
            return threadCounter.isEmpty();
        }

        public synchronized Long getFirstThreadId() {
            if (threadCounter.isEmpty()) {
                return null;
            }
            return threadCounter.keySet().iterator().next();
        }

        public synchronized void removeThreadId(long threadId) {
            Integer counter = threadCounter.get(threadId);
            if (counter == null) {
                return;
            }
            counter--;
            if (counter == 0) {
                threadCounter.remove(threadId);
            } else {
                threadCounter.put(threadId, counter);
            }
        }

        public void setWatchDogTask(WatchDogTask watchDogTask) {
            this.watchDogTask = watchDogTask;
        }

        public WatchDogTask getWatchDogTask() {
            return watchDogTask;
        }
    }

    @Getter
    private static class SubPubEntry {

        private final String key;
        private final Semaphore latch;
        private final SubscribeListener subscribeListener;

        public SubPubEntry(String key) {
            this.key = key;
            this.latch = new Semaphore(0);
            this.subscribeListener = new SubscribeListener(key, latch);
        }
    }

    private static final ConcurrentMap&amp;lt;String, ThreadEntry&amp;gt; THREAD_ENTRY_MAP = Maps.newConcurrentMap();

    @Override
    public void lock(String resource) throws InterruptedException {
        long threadId = Thread.currentThread().getId();
        String lockName = uuid + &quot;:&quot; + threadId;
        String entryName = uuid + &quot;:&quot; + resource;
        // è·å–é”
        Long ttl = acquire(resource, lockName, threadId, entryName);
        // åŠ é”æˆåŠŸç›´æ¥è¿”å›
        if (Objects.isNull(ttl)) {
            return;
        }
        // è®¢é˜…
        SubPubEntry subPubEntry = subscribeAsync(resource);
        try {
            for (; ; ) {
                ttl = acquire(resource, lockName, threadId, entryName);
                // åŠ é”æˆåŠŸç›´æ¥è¿”å›
                if (Objects.isNull(ttl)) {
                    return;
                }
                if (ttl &amp;gt; 0L) {
                    subPubEntry.getLatch().tryAcquire(ttl, TimeUnit.MILLISECONDS);
                }
            }
        } finally {
            unsubscribeSync(subPubEntry);
        }
    }

    private Long acquire(String key, String lockName, long threadId, String entryName) {
        Object result = execute0(jedis -&amp;gt; jedis.eval(LOCK_LUA, Lists.newArrayList(key),
                Lists.newArrayList(WATCH_DOG_TIMEOUT_STRING, lockName)));
        if (Objects.nonNull(result)) {
            return Long.parseLong(String.valueOf(result));
        }
        // å¯åŠ¨çœ‹é—¨ç‹—
        ThreadEntry entry = new ThreadEntry();
        ThreadEntry oldEntry = THREAD_ENTRY_MAP.putIfAbsent(entryName, entry);
        if (oldEntry != null) {
            oldEntry.addThreadId(threadId);
        } else {
            entry.addThreadId(threadId);
            Runnable renewAction = () -&amp;gt; executeWithoutResult(jedis -&amp;gt; jedis.eval(RENEW_LUA, Lists.newArrayList(key),
                    Lists.newArrayList(WATCH_DOG_TIMEOUT_STRING, lockName)));
            WatchDogTask watchDogTask = new WatchDogTask(new AtomicReference&amp;lt;&amp;gt;(renewAction));
            entry.setWatchDogTask(watchDogTask);
            WATCH_DOG_POOL.scheduleWithFixedDelay(watchDogTask, 0, WATCH_DOG_TASK_DURATION, TimeUnit.MILLISECONDS);
        }
        return null;
    }

    private SubPubEntry subscribeAsync(String key) {
        SubPubEntry subPubEntry = new SubPubEntry(key);
        SUB_PUB_POOL.submit(() -&amp;gt; {
            SubscribeListener subscribeListener = subPubEntry.getSubscribeListener();
            executeWithoutResult(jedis -&amp;gt; jedis.subscribe(subscribeListener, subscribeListener.getChannelName()));
            return null;
        });
        return subPubEntry;
    }

    private void unsubscribeSync(SubPubEntry subPubEntry) {
        SubscribeListener subscribeListener = subPubEntry.getSubscribeListener();
        subscribeListener.unsubscribe(subscribeListener.getChannelName());
    }

    @Override
    public void unlock(String resource) {
        long threadId = Thread.currentThread().getId();
        String entryName = uuid + &quot;:&quot; + resource;
        String lockName = uuid + &quot;:&quot; + threadId;
        String channelName = CHANNEL_PREFIX + resource;
        Object result = execute0(jedis -&amp;gt; jedis.eval(UNLOCK_LUA, Lists.newArrayList(resource, channelName),
                Lists.newArrayList(UNLOCK_STATUS_STRING, WATCH_DOG_TIMEOUT_STRING, lockName)));
        ThreadEntry threadEntry = THREAD_ENTRY_MAP.get(entryName);
        if (Objects.nonNull(threadEntry)) {
            threadEntry.removeThreadId(threadId);
            if (threadEntry.hasNoThreads() &amp;amp;&amp;amp; Objects.nonNull(threadEntry.getWatchDogTask())) {
                threadEntry.getWatchDogTask().cancel();
            }
        }
        if (Objects.isNull(result)) {
            throw new IllegalMonitorStateException();
        }
    }

    private static class SubscribeListener extends JedisPubSub {

        @Getter
        private final String key;
        @Getter
        private final String channelName;
        @Getter
        private final Semaphore latch;

        public SubscribeListener(String key, Semaphore latch) {
            this.key = key;
            this.channelName = CHANNEL_PREFIX + key;
            this.latch = latch;
        }

        @Override
        public void onMessage(String channel, String message) {
            if (Objects.equals(channelName, channel) &amp;amp;&amp;amp; Objects.equals(UNLOCK_STATUS_STRING, message)) {
                latch.release();
            }
        }
    }

    @RequiredArgsConstructor
    private static class WatchDogTask implements Runnable {

        private final AtomicBoolean running = new AtomicBoolean(true);
        private final AtomicReference&amp;lt;Runnable&amp;gt; actionReference;

        @Override
        public void run() {
            if (running.get() &amp;amp;&amp;amp; Objects.nonNull(actionReference.get())) {
                actionReference.get().run();
            } else {
                throw new WatchDogTaskStopException(&quot;watch dog cancel&quot;);
            }
        }

        public void cancel() {
            actionReference.set(null);
            running.set(false);
        }
    }

    private &amp;lt;T&amp;gt; T execute0(Function&amp;lt;Jedis, T&amp;gt; function) {
        try (Jedis jedis = jedisPool.getResource()) {
            return function.apply(jedis);
        }
    }

    interface Action {

        void apply(Jedis jedis);
    }

    private void executeWithoutResult(Action action) {
        try (Jedis jedis = jedisPool.getResource()) {
            action.apply(jedis);
        }
    }

    private static class WatchDogTaskStopException extends RuntimeException {

        @Override
        public synchronized Throwable fillInStackTrace() {
            return this;
        }
    }

    public static void main(String[] args) throws Exception {
        String resourceName = &quot;resource:x&quot;;
        RedLock redLock = new RedisRedLock(new JedisPool(new GenericObjectPoolConfig()), UUID.randomUUID().toString());
        Thread threadA = new Thread(() -&amp;gt; {
            try {
                redLock.lock(resourceName);
                process(resourceName);
            } catch (InterruptedException e) {
                e.printStackTrace();
            } finally {
                redLock.unlock(resourceName);
                System.out.println(String.format(&quot;çº¿ç¨‹%sé‡Šæ”¾èµ„æº%sçš„é”&quot;, Thread.currentThread().getName(), resourceName));
            }
        }, &quot;threadA&quot;);
        Thread threadB = new Thread(() -&amp;gt; {
            try {
                redLock.lock(resourceName);
                process(resourceName);
            } catch (InterruptedException e) {
                e.printStackTrace();
            } finally {
                redLock.unlock(resourceName);
                System.out.println(String.format(&quot;çº¿ç¨‹%sé‡Šæ”¾èµ„æº%sçš„é”&quot;, Thread.currentThread().getName(), resourceName));
            }
        }, &quot;threadB&quot;);
        threadA.start();
        threadB.start();
        Thread.sleep(Long.MAX_VALUE);
    }

    private static void process(String resourceName) {
        String threadName = Thread.currentThread().getName();
        System.out.println(String.format(&quot;çº¿ç¨‹%sè·å–åˆ°èµ„æº%sçš„é”&quot;, threadName, resourceName));
        try {
            Thread.sleep(1000);
        } catch (InterruptedException ignore) {
        }
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸Šé¢çš„å®ç°çŸ­æ—¶é—´å†…ç¼–å†™å®Œï¼Œæ²¡æœ‰åšè¯¦ç»†çš„&lt;code&gt;DEBUG&lt;/code&gt;ï¼Œå¯èƒ½ä¼šæœ‰çº°æ¼ã€‚æŸæ¬¡æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;çº¿ç¨‹threadBè·å–åˆ°èµ„æºresource:xçš„é”
çº¿ç¨‹threadBé‡Šæ”¾èµ„æºresource:xçš„é”
çº¿ç¨‹threadAè·å–åˆ°èµ„æºresource:xçš„é”
çº¿ç¨‹threadAé‡Šæ”¾èµ„æºresource:xçš„é”
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;å°ç»“&quot;&gt;å°ç»“&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;Redisson&lt;/code&gt;ä¸­çš„&lt;code&gt;red lock&lt;/code&gt;å®ç°ï¼Œåº”ç”¨åˆ°ä¸‹é¢çš„æ ¸å¿ƒæŠ€æœ¯ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;åˆç†åº”ç”¨&lt;code&gt;Redis&lt;/code&gt;çš„åŸºæœ¬æ•°æ®ç±»å‹&lt;code&gt;HASH&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Redis&lt;/code&gt;çš„è®¢é˜…å‘å¸ƒ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Lua&lt;/code&gt;è„šæœ¬çš„åŸå­æ€§&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Netty&lt;/code&gt;ä¸­çš„&lt;code&gt;Promise&lt;/code&gt;å®ç°&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Netty&lt;/code&gt;ä¸­çš„æ—¶é—´è½®&lt;code&gt;HashedWheelTimer&lt;/code&gt;å’Œå¯¹åº”çš„å®šæ—¶ä»»åŠ¡&lt;code&gt;(HashedWheel)Timeout&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Semaphore&lt;/code&gt;è¿›è¡Œå¸¦æœŸé™ã€æ°¸ä¹…æˆ–è€…å¯ä¸­æ–­çš„é˜»å¡ä»¥åŠå”¤é†’ï¼Œæ›¿ä»£&lt;code&gt;CountDownLatch&lt;/code&gt;ä¸­çš„æ— ç­‰å¾…æœŸé™é˜»å¡&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä¸Šé¢çš„æ ¸å¿ƒæŠ€æœ¯ç›¸å¯¹åˆç†åœ°åº”ç”¨ï¼Œæ‰èƒ½å®ç°ä¸€ä¸ªé«˜æ•ˆè€Œä¸”å®¹é”™èƒ½åŠ›ç›¸å¯¹æ¯”è¾ƒé«˜çš„åˆ†å¸ƒå¼é”æ–¹æ¡ˆï¼Œä½†æ˜¯ä»ç›®å‰æ¥çœ‹ï¼Œ&lt;code&gt;Redisson&lt;/code&gt;ä»æœªè§£å†³&lt;code&gt;red lock&lt;/code&gt;ç®—æ³•ä¸­çš„æ•…éšœè½¬ç§»ç¼ºé™·ï¼Œç¬”è€…è®¤ä¸ºè¿™ä¸ªæœ‰å¯èƒ½æ˜¯&lt;code&gt;Redis&lt;/code&gt;å®ç°åˆ†å¸ƒå¼é”æ–¹æ¡ˆçš„ä¸€ä¸ªåº•å±‚ç¼ºé™·ï¼Œ&lt;strong&gt;æ­¤æ–¹æ¡ˆåœ¨&lt;code&gt;Redis&lt;/code&gt;å•å®ä¾‹ä¸­æ˜¯ç›¸å¯¹å®Œå–„&lt;/strong&gt;ï¼Œä¸€æ—¦åº”ç”¨åœ¨&lt;code&gt;Redis&lt;/code&gt;é›†ç¾¤ï¼ˆæ™®é€šä¸»ä»ã€å“¨å…µæˆ–è€…&lt;code&gt;Cluster&lt;/code&gt;ï¼‰ï¼Œæœ‰å‡ ç‡ä¼šå‡ºç°å‰æ–‡æåˆ°çš„èŠ‚ç‚¹è§’è‰²åˆ‡æ¢å¯¼è‡´å¤šä¸ªä¸åŒå®¢æˆ·ç«¯è·å–åˆ°åŒä¸€ä¸ªèµ„æºå¯¹åº”çš„é”çš„é—®é¢˜ã€‚æš‚æ—¶æ— è§£ã€‚&lt;/p&gt;
&lt;p&gt;å‚è€ƒèµ„æ–™ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;Redisson&lt;/code&gt;å¼€æºç‰ˆæœ¬æºç &lt;/li&gt;
&lt;li&gt;&lt;code&gt;Redis&lt;/code&gt;å®˜æ–¹æ–‡æ¡£&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ç”»å›¾ç”¨çš„æ˜¯&lt;code&gt;ProcessOn&lt;/code&gt;ï¼š&lt;code&gt;https://www.processon.com/view/link/5ffc540de0b34d2060d2d715&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ï¼ˆc-2-w e-a-20210110 2021å¹´çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œå¸Œæœ›è¿™ä¸€å¹´ä¸è¦è¿™ä¹ˆé¸½ï¼Œè¿™ä¸ªç³»åˆ—çš„ä¸‹ä¸€ç¯‡æ˜¯ã€Šå†·é¥­æ–°ç‚’ï¼šç†è§£JDKä¸­UUIDçš„åº•å±‚å®ç°ã€‹ï¼‰&lt;/p&gt;
</description>
<pubDate>Mon, 11 Jan 2021 14:40:00 +0000</pubDate>
<dc:creator>throwable</dc:creator>
<og:description>å‰æ åœ¨å¾ˆæ—©å¾ˆæ—©ä¹‹å‰ï¼Œå†™è¿‡ä¸€ç¯‡æ–‡ç« ä»‹ç»è¿‡Redisä¸­çš„red lockçš„å®ç°ï¼Œä½†æ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œç¬”è€…æ‰€è´Ÿè´£çš„é¡¹ç›®ä½¿ç”¨çš„åˆ†å¸ƒå¼é”ç»„ä»¶ä¸€ç›´æ˜¯Redissonã€‚Redissonæ˜¯å…·å¤‡å¤šç§å†…å­˜æ•°æ®ç½‘æ ¼ç‰¹æ€§çš„åŸº</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/throwable/p/14264804.html</dc:identifier>
</item>
<item>
<title>PythonåŸºç¡€ï¼ˆä¸‹ç¯‡ï¼‰ - keleæ˜¯å¯ä¹å‘€</title>
<link>http://www.cnblogs.com/kele-develop/p/14264779.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/kele-develop/p/14264779.html</guid>
<description>&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;æœ¬ç¯‡æ–‡ç« ä¸»è¦å†…å®¹ï¼š&lt;span&gt;&lt;strong&gt;å¼‚å¸¸å¤„ç†ï¼Œå‡½æ•°ï¼Œæ¨¡å—å’ŒåŒ…&lt;/strong&gt;&lt;/span&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;mark&gt;&lt;span&gt;&lt;strong&gt;åœ¨å¼€å§‹æ­£ç¯‡ä¹‹å‰æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¸Šä¸€ç¯‡å¯ä¹ç•™ä¸‹çš„é¢˜ç›®ã€‚&lt;/strong&gt;&lt;/span&gt;&lt;/mark&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;é¢˜ç›®ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;&lt;span&gt;å˜é‡ a= {&quot;name&quot;: &quot;å¯ä¹&quot;, &quot;age&quot;: 18, &quot;hello&quot;: &quot;python&quot;}ï¼Œç°åœ¨è¦å°† a æ‰€æœ‰çš„ key æ”¾å…¥åˆ° b åˆ—è¡¨ä¸­ï¼Œæ‰€æœ‰çš„ value æ”¾åˆ° c åˆ—è¡¨ä¸­ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;å®ç°æ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œå¯ä¹åœ¨è¿™é‡Œç”¨ä¸¤ç§æ–¹å¼æ¥å®ç°ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;ä»£ç å®ç°1ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;a = {&quot;name&quot;: &quot;å¯ä¹&quot;, &quot;age&quot;: 18, &quot;hello&quot;: &quot;python&quot;}
b = []
c = []
for key, value in a.items():
    b.append(key)
    c.append(value)
print(f&quot;å­˜å‚¨keyçš„båˆ—è¡¨æ˜¯{b}&quot;)
print(f&quot;å­˜å‚¨valueçš„cåˆ—è¡¨æ˜¯{c}&quot;)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;ä»£ç å®ç°2ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;a = {&quot;name&quot;: &quot;å¯ä¹&quot;, &quot;age&quot;: 18, &quot;hello&quot;: &quot;python&quot;}
b = [key for key in a.keys()]
c = [value for value in a.values()]
print(f&quot;å­˜å‚¨keyçš„båˆ—è¡¨æ˜¯{b}&quot;)
print(f&quot;å­˜å‚¨valueçš„cåˆ—è¡¨æ˜¯{c}&quot;)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;span&gt;æ³¨ï¼šç¬¬äºŒç§æ˜¯åˆ—è¡¨æ¨å¯¼å¼ï¼Œä¸Šç¯‡å¯ä¹æ²¡æœ‰æå‡ºæ¥ï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œç™¾åº¦æˆ–è€…ç§èŠå¯ä¹ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æ¥ä¸‹æ¥å°±æ˜¯æˆ‘ä»¬æœ¬ç¯‡çš„ä¸»è§’&lt;span&gt;&lt;strong&gt;å¼‚å¸¸å¤„ç†ï¼Œå‡½æ•°ï¼Œæ¨¡å—å’ŒåŒ…&lt;/strong&gt;&lt;/span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;ä¸€ã€å¼‚å¸¸å¤„ç†&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;15&quot;&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;&lt;u&gt;ä½•è°“å¼‚å¸¸å‘¢&lt;/u&gt;ï¼Ÿ&lt;/strong&gt;&lt;/span&gt; å°±æ˜¯æˆ‘ä»¬ITç•Œé¼é¼æœ‰åçš„ &quot; bug &quot; å…„ã€‚bug ä¹Ÿå°±æ˜¯æŒ‡ç¨‹åºæ²¡æœ‰æŒ‰ç…§æˆ‘ä»¬æ‰€æœŸæœ›çš„å»è¿è¡Œè€Œå‡ºç°çš„ä¸€äº›é”™è¯¯æƒ…å†µã€‚æ¯”å¦‚ä¸€ä¸ªé™¤æ³•è¡¨è¾¾å¼ a / b ï¼Œå¦‚æœæˆ‘ä»¬ä¸åŠ å¤„ç†ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç° a / 0 çš„æƒ…å†µï¼Œæ­¤æ—¶ç¨‹åºå°±ä¼šå‡ºç°å¼‚å¸¸ã€‚é‚£ä¹ˆè¿™å°±æ˜¯ä¸€ä¸ª bug ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;u&gt;ä½•è°“å¼‚å¸¸å¤„ç†å‘¢&lt;/u&gt;ï¼Ÿ&lt;/strong&gt;&lt;/span&gt; é¡¾åæ€ä¹‰å°±æ˜¯å½“ç¨‹åºå‡ºç°å¼‚å¸¸çš„æ—¶å€™ï¼Œæˆ‘ä»¬é’ˆå¯¹è¿™äº›å¼‚å¸¸è¿›è¡Œå¤„ç†çš„æœºåˆ¶ã€‚åœ¨ python ä¸­é»˜è®¤çš„å¤„ç†æ–¹æ³•æ˜¯å‡ºç°å¼‚å¸¸åï¼Œç¨‹åºä¼šåœ¨å‡ºç°å¼‚å¸¸çš„åœ°æ–¹ç»ˆæ­¢ï¼Œç„¶è€Œè¿™å¯èƒ½ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡å‡ ä¸ªå†…ç½®çš„å…³é”®å­—æ¥è¿›è¡Œè‡ªå®šä¹‰å¤„ç†æ–¹å¼ã€‚&lt;/p&gt;&lt;p&gt;æˆ‘ä»¬å…ˆæ¥äº†è§£ä¸¤ä¸ª python çš„å¼‚å¸¸å¤„ç†ç±»ï¼š&lt;br/&gt;&lt;span&gt;&lt;strong&gt;- BaseException&lt;br/&gt;- Exception&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span&gt;1.1 BaseException&lt;/span&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;&lt;span&gt;è¿™ä¸ªå¼‚å¸¸å¤„ç†ç±»æ˜¯æ‰€æœ‰ python å¼‚å¸¸å¤„ç†çš„åŸºç±»ã€‚æˆ‘ä»¬åœ¨è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†æ—¶ï¼Œå¯ä»¥ç»§æ‰¿è¿™ä¸ªç±»ã€‚&lt;span&gt;&lt;strong&gt;(å®˜æ–¹ä¸æ¨è)&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span&gt;1.2 Exception&lt;/span&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;5.4545454545455&quot;&gt;
&lt;p&gt;&lt;span&gt;è¿™ä¸ªå¼‚å¸¸å¤„ç†ç±»æ˜¯å¸¸è§„å¤„ç†çš„åŸºç±»ï¼Œä½†æ˜¯ Exception ä¹Ÿç»§æ‰¿äº BaseException ï¼Œå®˜æ–¹æ¨èæˆ‘ä»¬è‡ªå®šä¹‰å¼‚å¸¸ç±»æ—¶ï¼Œç»§æ‰¿äº Exception ã€‚&lt;a href=&quot;https://docs.python.org/zh-cn/3.7/library/exceptions.html#Exception&quot; target=&quot;_blank&quot;&gt;(å®˜æ–¹æ–‡æ¡£ï¼‰&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span&gt;1.3 å¼‚å¸¸å¤„ç†å…³é”®å­—&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;mark&gt;&lt;span&gt;&lt;strong&gt;å…³é”®å­—ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/mark&gt;&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;try&lt;/th&gt;
&lt;th&gt;except&lt;/th&gt;
&lt;th&gt;else&lt;/th&gt;
&lt;th&gt;finally&lt;/th&gt;
&lt;th&gt;raise&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;/table&gt;&lt;p&gt;&lt;mark&gt;&lt;span&gt;&lt;strong&gt;è¯­æ³• - tryã€exceptã€elseã€finallyï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/mark&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;&lt;span&gt;try:&lt;br/&gt;ã€€å¯èƒ½å¼‚å¸¸çš„ä»£ç &lt;br/&gt;except Error... as e:&lt;br/&gt;ã€€å½“å‡ºç° Error åå¤„ç†çš„ä»£ç &lt;br/&gt;else:&lt;br/&gt;ã€€å¦‚æœä¸å‡ºç°å¼‚å¸¸ï¼Œæ‰§è¡Œçš„ä»£ç &lt;br/&gt;finally:&lt;br/&gt;ã€€æ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸éƒ½æ‰§è¡Œçš„ä»£ç &lt;br/&gt;&lt;span&gt;æ³¨æ„ï¼šä¸€èˆ¬æ—¶å€™åªéœ€è¦ try / except å³å¯ï¼Œtry ä¸å¯ä»¥å•ç‹¬ä½¿ç”¨ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;mark&gt;&lt;span&gt;&lt;strong&gt;ç¤ºä¾‹1ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/mark&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;try:
    a = 1 / 0
except Exception as e:
    print(f&quot;å¼‚å¸¸æ˜¯{e}&quot;)
â€‹
è¾“å‡º: å¼‚å¸¸æ˜¯division by zero
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;mark&gt;&lt;span&gt;&lt;strong&gt;ç¤ºä¾‹2ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/mark&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;try:
    a = 1 / 0
except Exception as e:
    print(f&quot;å¼‚å¸¸æ˜¯{e}&quot;)
else:
    print(&quot;æ²¡æœ‰å¼‚å¸¸æ‰§è¡Œ&quot;)
finally:
    print(&quot;æ‰§è¡Œäº†finally&quot;)
â€‹
è¾“å‡º: å¼‚å¸¸æ˜¯division by zeroï¼ˆæ‰§è¡Œäº†finallyï¼‰
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;mark&gt;&lt;span&gt;&lt;strong&gt;è¯­æ³• - raiseï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/mark&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;&lt;span&gt;raise å¼‚å¸¸ç±»(æè¿°ä¿¡æ¯)&lt;br/&gt;&lt;span&gt;æ³¨ï¼š&lt;/span&gt;raise ç”¨äºä¸»åŠ¨æŠ›å‡ºå¼‚å¸¸ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;mark&gt;&lt;span&gt;&lt;strong&gt;ç¤ºä¾‹ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/mark&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;try:
    a = 2
    raise ValueError(&quot;aä¸èƒ½ç­‰äº2&quot;)
except Exception as e:
    print(f&quot;å¼‚å¸¸æ˜¯{e}&quot;)
â€‹
è¾“å‡º å¼‚å¸¸æ˜¯aä¸èƒ½ç­‰äº2
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;ç±»&lt;/span&gt;å¯ä¹ä¼šåœ¨ä¸‹ä¸€ç¯‡&lt;span&gt;pythoné«˜çº§ä¹‹é¢å‘å¯¹è±¡&lt;/span&gt;ä¸­è¯¦ç»†è§£é‡Šã€‚&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;äºŒã€å‡½æ•°&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;2.1 è¯­æ³•&lt;/span&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;&lt;span&gt;def func_name(å‚æ•°):&lt;br/&gt;ã€€ä»£ç éƒ¨åˆ†&lt;br/&gt;ã€€return è¿”å›å€¼&lt;br/&gt;&lt;span&gt;æ³¨ï¼š&lt;/span&gt;å‡½æ•°å¯ä»¥æœ‰è¿”å›å€¼ï¼Œå¯ä»¥æ²¡æœ‰è¿”å›å€¼ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span&gt;æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š&lt;span&gt;åœ¨å‡½æ•°å½“ä¸­è®¡ç®— 1 + 2 + ... + 9 çš„å’Œï¼Œå¹¶ä¸”è¿”å›&lt;/span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;2.1.1 æ— å‚æ•°ï¼Œæ— è¿”å›å€¼&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;mark&gt;&lt;span&gt;&lt;strong&gt;ç¤ºä¾‹ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/mark&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;def num_sum():
    sum = 0
    for i in range(10):
        sum += i
    print(sum)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;span&gt;é‚£ä¹ˆå‡½æ•°å†™å¥½åï¼Œæˆ‘ä»¬æ€ä¹ˆè°ƒç”¨å®ƒå‘¢ï¼Ÿ&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;mark&gt;&lt;span&gt;&lt;strong&gt;è¯­æ³•ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/mark&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;span&gt;func_name(å‚æ•°)&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;mark&gt;&lt;span&gt;&lt;strong&gt;è°ƒç”¨å‡½æ•°ç¤ºä¾‹ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/mark&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;num_sum()
â€‹
è¾“å‡º 45
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;span&gt;2.1.2 æ— å‚æ•°ï¼Œæœ‰è¿”å›å€¼&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;mark&gt;&lt;span&gt;&lt;strong&gt;ç¤ºä¾‹ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/mark&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;â€‹def num_sum():
    sum = 0
    for i in range(10):
        sum += i
    return sum
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;mark&gt;&lt;span&gt;&lt;strong&gt;æˆ‘ä»¬å†æ¥æ‰“å°ä¸€ä¸‹å‡½æ•°è¿”å›çš„æ•°å€¼ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/mark&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;def num_sum():
    sum = 0
    for i in range(10):
        sum += i
    return sum
print(num_sum)
â€‹
è¾“å‡º 45
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;span&gt;2.1.3 æœ‰å‚æ•°ï¼Œæ— è¿”å›å€¼&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;mark&gt;&lt;span&gt;&lt;strong&gt;ç¤ºä¾‹ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/mark&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;def num_sum(number):
    sum = 0
    for i in range(number):
        sum += i
    print(sum)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;span&gt;åœ¨ä¸Šè¿°å‡½æ•°ä¸­æˆ‘ä»¬å¯ä»¥å®ç°&lt;span&gt;1åˆ°ä»»ä½•æ•°ä¹‹é—´æ‰€ç›¸åŠ çš„å’Œ&lt;/span&gt;ï¼Œåªéœ€è¦æŠŠæœŸæœ›çš„å€¼ä¼ é€’ç»™å‡½æ•°å³å¯ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;2.1.4 æœ‰å‚æ•°ï¼Œæœ‰è¿”å›å€¼&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;mark&gt;&lt;span&gt;&lt;strong&gt;ç¤ºä¾‹ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/mark&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;def num_sum(number):
    sum = 0
    for i in range(number):
        sum += i
    return sum
total = num_sum(10)
print(total)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;span&gt;åœ¨è¿™é‡Œæˆ‘ä»¬ç”¨ä¸€ä¸ªå˜é‡ total æ¥æ¥æ”¶å‡½æ•° num_sum çš„è¿”å›å€¼ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;åœ¨å‡½æ•°è¿™é‡Œæœ‰ä¸‹é¢ä¸€äº›é‡ç‚¹éœ€è¦æ³¨æ„(æ¯ä¸€ä¸ªæ³¨æ„ç‚¹å¯ä¹éƒ½ä¼šæœ‰ä¸€ä¸ªç¤ºä¾‹)ã€‚&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;2.2 æ³¨æ„ç‚¹&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;2.2.1 å…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡&lt;/span&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;å…¨å±€å˜é‡ï¼š&lt;/span&gt;åœ¨å‡½æ•°å¤–éƒ¨å®šä¹‰çš„å˜é‡ã€‚&lt;br/&gt;&lt;span&gt;å±€éƒ¨å˜é‡ï¼š&lt;/span&gt;åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡ã€‚&lt;br/&gt;- å¦‚æœå±€éƒ¨å˜é‡å®šä¹‰çš„åå­—å’Œå…¨å±€å˜é‡å®šä¹‰çš„åå­—ç›¸åŒï¼Œé‚£ä¹ˆåœ¨å‡½æ•°ä½“å†…å±€éƒ¨å˜é‡ä¼šè¦†ç›–å…¨å±€å˜é‡ã€‚&lt;br/&gt;- å‡½æ•°ä½“å†…å˜é‡çš„ä½œç”¨åŸŸæˆ–è€…è¯´ç”Ÿå‘½å‘¨æœŸï¼Œä»…åœ¨å‡½æ•°ä½“å†…æœ‰ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;mark&gt;&lt;span&gt;&lt;strong&gt;ç¤ºä¾‹ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/mark&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;def scope():
    name = &quot;å¯ä¹&quot;
    print(f&quot;æˆ‘æ˜¯å‡½æ•°ä½“å†…çš„{name}&quot;)
scope()
print(f&quot;æˆ‘æ˜¯å‡½æ•°ä½“å¤–çš„{name}&quot;)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;span&gt;ç»“æœå¦‚ä¸‹å›¾ï¼š&lt;/span&gt;&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/img_convert/133161f06ed816a5e79aac103ecd10ed.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;&lt;span&gt;æˆ‘ä»¬åœ¨å‡½æ•°ä½“å†…å®šä¹‰çš„ name å˜é‡æ˜¯å¯ä»¥æ­£å¸¸æ‰“å°çš„ï¼Œä½†æ˜¯åœ¨å‡½æ•°ä½“å¤–æŠ›å‡ºäº† name æ²¡æœ‰è¢«å®šä¹‰ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;2.2.2 ä¿®æ”¹å…¨å±€å˜é‡&lt;/span&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;&lt;span&gt;- å¦‚æœæ˜¯&lt;span&gt;ä¸å¯å˜ç±»å‹&lt;/span&gt;ï¼Œéœ€è¦é€šè¿‡ global æ¥å£°æ˜æ“ä½œå…¨å±€å˜é‡ï¼›&lt;br/&gt;- å¦‚æœæ˜¯&lt;span&gt;å¯å˜ç±»å‹&lt;/span&gt;ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥æ“ä½œå…¨å±€å˜é‡ä¸éœ€è¦é€šè¿‡ global æ¥å£°æ˜ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;mark&gt;&lt;span&gt;&lt;strong&gt;ç¤ºä¾‹ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/mark&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;a = [1, 2, 3]
b = &quot;å¯ä¹&quot;
def scope():
    a.append(4)
    print(f&quot;å‡½æ•°ä½“å†…açš„å€¼æ˜¯{a}&quot;)
    global b
    b = &quot;å¯ä¹å¾ˆå¸…&quot;
    print(f&quot;å‡½æ•°ä½“å†…bçš„å€¼æ˜¯{b}&quot;)
scope()
print(f&quot;å…¨å±€å˜é‡açš„å€¼æ˜¯{a}&quot;)
print(f&quot;å…¨å±€å˜é‡bçš„å€¼æ˜¯{b}&quot;)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;span&gt;ç»“æœå¦‚ä¸‹å›¾ï¼š&lt;/span&gt;&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/img_convert/37ae8a00ca8bad8e0b27eac255878292.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;&lt;span&gt;åœ¨å‡½æ•°ä¼ å‚æ—¶ï¼Œå®é™…æƒ…å†µä¸‹&lt;span&gt;&lt;strong&gt;æ— è®ºæ˜¯å¯å˜ç±»å‹è¿˜æ˜¯ä¸å¯å˜ç±»å‹ï¼Œä¼ é€’çš„éƒ½æ˜¯å¼•ç”¨&lt;/strong&gt;&lt;/span&gt;ã€‚ä½†æ˜¯ç”±äºä¸å¯å˜ç±»å‹æ”¹å˜å€¼åæ˜¯ç”¨æ–°çš„å†…å­˜åœ°å€æ¥å­˜å‚¨ï¼Œæ‰€ä»¥ç½‘ä¸Šæœ‰å¾ˆå¤šè¿™æ ·ä¸€ä¸ªç»“è®ºï¼š&lt;strong&gt;å‡½æ•°æ¥æ”¶å‚æ•°æ—¶ï¼Œå¦‚æœå‚æ•°æ˜¯å¯å˜ç±»å‹ï¼Œé‚£ä¹ˆä¼ é€’çš„æ˜¯å‚æ•°çš„å¼•ç”¨ï¼›å¦‚æœå‚æ•°æ˜¯ä¸å¯å˜ç±»å‹ï¼Œé‚£ä¹ˆä¼ é€’çš„æ˜¯å‚æ•°çš„å€¼ã€‚&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;æ‰€ä»¥ç»“è®ºæ˜¯ï¼šåœ¨ python å‡½æ•°ä¼ å‚ï¼Œæ— è®ºæ˜¯å¯å˜ç±»å‹è¿˜æ˜¯ä¸å¯å˜ç±»å‹æœ¬è´¨ä¸Šéƒ½æ˜¯å¼•ç”¨ä¼ é€’ï¼Œä½†æ˜¯ç”±äºä¸å¯å˜ç±»å‹ä¸èƒ½ç›´æ¥ä¿®æ”¹åŸæœ‰çš„å€¼ï¼Œæ‰€ä»¥åœ¨è¡¨ç°ä¸Šä¸å¯å˜ç±»å‹æ˜¯ä¼ å€¼ã€‚&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;mark&gt;&lt;span&gt;&lt;strong&gt;ç¤ºä¾‹ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/mark&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;a = 10
b = [&quot;å¯ä¹&quot;]
â€‹
def scope(change):
    print(f&quot;æ”¹å˜å‰s_changeçš„å†…å­˜åœ°å€æ˜¯{id(change)}&quot;)
    change = 20
    print(f&quot;æ”¹å˜ås_changeçš„å†…å­˜åœ°å€æ˜¯{id(change)}&quot;)
    print(f&quot;æ”¹å˜ås_changeçš„å€¼æ˜¯{change}&quot;)
â€‹
def scope2(change):
    print(f&quot;æ”¹å˜å‰s2_changeçš„å†…å­˜åœ°å€æ˜¯{id(change)}&quot;)
    change.append(&quot;å¾ˆå¸…&quot;)
    print(f&quot;æ”¹å˜ås2_changeçš„å†…å­˜åœ°å€æ˜¯{id(change)}&quot;)
    print(f&quot;æ”¹å˜ås2_changeçš„å€¼æ˜¯{change}&quot;)
â€‹
scope(a)
print(f&quot;açš„å€¼æ˜¯{a},açš„å†…å­˜åœ°å€æ˜¯{id(a)}&quot;)
scope2(b)
print(f&quot;bçš„å€¼æ˜¯{b},bçš„å†…å­˜åœ°å€æ˜¯{id(b)}&quot;)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;span&gt;ç»“æœå¦‚ä¸‹å›¾ï¼š&lt;/span&gt;&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/img_convert/8a326a809fb348485afba4d6181862fd.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;&lt;span&gt;2.2.3 å‡½æ•°çš„ä¸å®šé•¿å‚æ•°å’Œå…³é”®å­—å‚æ•°&lt;/span&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;ä¸å®šé•¿å‚æ•°ï¼š&lt;/span&gt;*args&lt;br/&gt;&lt;span&gt;å…³é”®å­—å‚æ•°ï¼š&lt;/span&gt;**kwargs&lt;br/&gt;åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œå‚æ•°æ¥æ”¶å‡ ä¸ªå‚æ•°æˆ‘ä»¬å°±å†™å‡ ä¸ªå‚æ•°åå°±å¯ä»¥äº†ï¼Œå¯æ˜¯åœ¨å®é™…å¼€å‘ä¸­æœ‰çš„å‡½æ•°çš„å‚æ•°å¹¶ä¸æ˜¯å›ºå®šçš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç”¨å…³é”®å­—å‚æ•°å’Œå¯å˜å‚æ•°æ¥æ›¿ä»£ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span&gt;2.2.3.1 ä¸å®šé•¿å‚æ•°&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;mark&gt;&lt;span&gt;&lt;strong&gt;ç¤ºä¾‹ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/mark&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;def scope(*args):
    print(args)
scope(1, 2, 3)
â€‹
è¾“å‡º: (1,2,3)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;span&gt;åœ¨è¿™é‡Œçš„æ—¶å€™éœ€è¦æ³¨æ„ï¼Œå¦‚æœæˆ‘ä»¬åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™ä¼ é€’çš„æ˜¯ä¸€ä¸ª&lt;span&gt;å…ƒç»„&lt;/span&gt;ï¼Œè€Œä¸æ˜¯ 1ï¼Œ2ï¼Œ3 è¿™ä¸‰ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªå…ƒç»„å°±æ˜¯ä¸€ä¸ªå‚æ•°ï¼Œå¦‚æœéœ€è¦è¾¾åˆ°ä¸Šè¿°å‡½æ•°çš„æ•ˆæœï¼Œéœ€è¦å¯¹ä»–&lt;span&gt;è§£åŒ…&lt;/span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;mark&gt;&lt;span&gt;&lt;strong&gt;ç¤ºä¾‹ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/mark&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;a = (1, 2, 3)
def scope(*args):
    print(args)
scope(a)
scope(*a)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;span&gt;ç»“æœå¦‚ä¸‹å›¾ï¼š&lt;/span&gt;&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/img_convert/c7912732c7639ae6e6526b22e0ddc219.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;é‡ç”³ï¼š&lt;/strong&gt;&lt;/span&gt;å¦‚æœæˆ‘ä»¬åœ¨ä¼ é€’å‡½æ•°å‚æ•°æ—¶æ˜¯ä¸€ä¸ªå…ƒç»„ã€åˆ—è¡¨ã€å­—å…¸ç­‰æ—¶ï¼Œå¦‚æœä¸å¯¹ä»–è§£åŒ…ï¼Œé‚£ä¹ˆä¼ é€’çš„æ˜¯è¯¥å…ƒç»„ã€åˆ—è¡¨ã€å­—å…¸çš„æ•´ä½“ã€‚å¦‚æœéœ€è¦å¯¹ä»–çš„æ¯ä¸ªå…ƒç´ è¿›è¡Œåˆ†åˆ«ä¼ å‚ï¼Œåˆ™éœ€è¦å¯¹å…¶è§£åŒ…ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;2.2.3.2 å…³é”®å­—å‚æ•°&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;å…³é”®å­—å‚æ•°&lt;/strong&gt;&lt;/span&gt;æ˜¯é’ˆå¯¹å­—å…¸è¿™é”®å€¼å¯¹ç±»å‹çš„ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;mark&gt;&lt;span&gt;&lt;strong&gt;ç¤ºä¾‹ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/mark&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;a = {&quot;name&quot;: &quot;å¯ä¹&quot;, &quot;age&quot;: 18}
def scope(**kwargs):
    print(kwargs)
scope(name=&quot;å¯ä¹&quot;, age=18)
scope(**a)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;æ³¨æ„ï¼š&lt;/span&gt;å‡½æ•°å‚æ•°çš„åŒ¹é…é¡ºåº(æŒ‡å®šå‚æ•°åé™¤å¤–)ä¸º&lt;span&gt;ä»å·¦å¾€å³&lt;/span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;mark&gt;&lt;span&gt;&lt;strong&gt;ç¤ºä¾‹ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/mark&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;â€‹def scope(name1, name2, name3):
    print(name1)
    print(name2)
    print(name3)
scope(&quot;å¯ä¹&quot;, &quot;python&quot;, &quot;æ˜¯å¯ä¹å‘€&quot;)
print()
scope(name3=&quot;å¯ä¹&quot;, name2=&quot;æ˜¯å¯ä¹å‘€&quot;, name1=&quot;python&quot;)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;span&gt;ç»“æœå¦‚ä¸‹å›¾ï¼š&lt;/span&gt;&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/img_convert/30885a9ebd07018c23d4f9d1fe72eb74.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;æ³¨æ„ï¼š&lt;/strong&gt;&lt;/span&gt;å¦‚æœåœ¨å‡½æ•°çš„å‚æ•°æ—¢æœ‰ä¸å®šé•¿å‚æ•°å’Œå…³é”®å­—å‚æ•°åˆæœ‰æ™®é€šå‚æ•°ï¼Œé‚£ä¹ˆä¸€å®šè¦å°†æ™®é€šå‚æ•°æ”¾åœ¨æœ€å‰é¢ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;2.2.4 é»˜è®¤å‚æ•°&lt;/span&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;&lt;span&gt;é¡¾åæ€ä¹‰ï¼šé»˜è®¤å‚æ•°å°±æ˜¯å¦‚æœæˆ‘ä»¬æ²¡æœ‰ä¼ å€¼ç»™è¿™ä¸ªå‚æ•°çš„è¯ï¼Œé‚£ä»–å°±æ˜¯é»˜è®¤å€¼ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;mark&gt;&lt;span&gt;&lt;strong&gt;ç¤ºä¾‹1ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/mark&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;def scope(name=&quot;å¯ä¹&quot;):
    print(name)
scope()
â€‹
è¾“å‡º: å¯ä¹
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;mark&gt;&lt;span&gt;&lt;strong&gt;ç¤ºä¾‹2ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/mark&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;def scope(name=&quot;å¯ä¹&quot;):
    print(name)
scope(&quot;æ˜¯å¯ä¹å‘€&quot;)
â€‹
è¾“å‡º: æ˜¯å¯ä¹å‘€
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;span&gt;2.2.5 åŒ¿åå‚æ•°&lt;/span&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;&lt;span&gt;è§£é‡Šï¼šåŒ¿åå‡½æ•°ä¹Ÿå°±æ˜¯è¿™ä¸ªå‡½æ•°æ˜¯æ²¡æœ‰åå­—çš„ï¼Œä¸è¿‡åŒ¿åå‡½æ•°çš„å…³é”®å­—ä¸æ˜¯é€šè¿‡defæ¥å®šä¹‰ï¼Œè€Œæ˜¯ &lt;span&gt;lambda&lt;/span&gt; ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;mark&gt;&lt;span&gt;&lt;strong&gt;è¯­æ³•ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/mark&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;&lt;span&gt;lambda å‚æ•°(å¯ä»¥å¤šä¸ª) : è¡¨è¾¾å¼(åªèƒ½æœ‰ä¸€ä¸ª)&lt;br/&gt;&lt;span&gt;æ³¨ï¼šè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;mark&gt;&lt;span&gt;&lt;strong&gt;ç¤ºä¾‹ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/mark&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;b = lambda x, y: y + x
print(b(1, 2))
â€‹
è¾“å‡º: 3
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;è§£è¯»ï¼š&lt;/strong&gt;&lt;/span&gt;â‘  å®šä¹‰ä¸€ä¸ªåŒ¿åå‡½æ•°ç”¨æ¥è®¡ç®— x+y çš„å€¼å¹¶ä¸”è¿”å›ã€‚â‘¡ åŒ¿åå‡½æ•°å®šä¹‰å®Œåè¿”å›æ–°çš„å‡½æ•°ç»™å˜é‡ bï¼Œb è°ƒç”¨è¿™ä¸ªåŒ¿åå‡½æ•°å¹¶ä¸”å°†å‚æ•° 1ï¼Œ2 ä¼ é€’ã€‚â‘¢ æ‰“å° x+y è¡¨è¾¾å¼çš„å€¼ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;å‡½æ•°æ›´é«˜å±‚æ¬¡çš„ç†è§£å’Œä½¿ç”¨ä¾‹å¦‚ï¼šè£…é¥°å™¨ï¼Œé—­åŒ…ã€‚å¯ä¹ä¼šåœ¨é«˜çº§éƒ¨åˆ†è®²è§£ã€‚&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;ä¸‰ã€æ¨¡å—å’ŒåŒ…&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;æ¨¡å—ï¼š&lt;/strong&gt;&lt;/span&gt;æˆ‘ä»¬å¯ä»¥é€šä¿—çš„ç†è§£æ¨¡å—å°±æ˜¯ä¸€ä¸ª &lt;span&gt;&lt;strong&gt;py æ–‡ä»¶åŒ…&lt;/strong&gt;&lt;/span&gt;ï¼ˆè‹¥å¹²ä¸ª py æ–‡ä»¶ + ini.py ç»„æˆçš„æ–‡ä»¶å¤¹å°±æ˜¯ä¸€ä¸ªåŒ…ï¼‰ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;init.py æ–‡ä»¶çš„ä½œç”¨ï¼š&lt;/strong&gt;&lt;/span&gt;ç”¨äºåˆå§‹åŒ–è¿™ä¸ªåŒ…ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å¦‚ä¸‹å›¾ï¼š&lt;/span&gt;&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/img_convert/19aa3132f093c5c2a75e4c56e9d74328.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;&lt;span&gt;å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°æˆ–è€…å˜é‡éœ€è¦ä»å¦å¤–çš„ä¸€ä¸ªåŒ…å½“ä¸­å¼•ç”¨è¿‡æ¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯&lt;span&gt;&lt;strong&gt;å¯¼åŒ…&lt;/strong&gt;&lt;/span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;3.1 å¯¼åŒ…&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;mark&gt;&lt;span&gt;&lt;strong&gt;è¯­æ³•ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/mark&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;&lt;span&gt;â‘  import module_name&lt;br/&gt;â‘¡ from xxx import module_name&lt;br/&gt;â‘¢ from module_name import *&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;mark&gt;&lt;span&gt;&lt;strong&gt;ç¤ºä¾‹å¦‚ä¸‹å›¾ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/mark&gt;&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/img_convert/d286ebe2ad8c92b1033ca96846115261.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/img_convert/cea9e5fd35403e585042d076a83b2501.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;&lt;span&gt;è¾“å‡ºï¼šhello world&lt;br/&gt;å…¶ä»–çš„ä¸¤ç§æ–¹å¼å¤§å®¶å¯è‡ªå·±çº¿ä¸‹æµ‹è¯•ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;3.2 æ¨¡å—çš„æœç´¢è·¯å¾„é¡ºåº&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;å½“å‰ä¸»ç›®å½•&lt;/strong&gt;&lt;/span&gt; &amp;gt; &lt;span&gt;&lt;strong&gt;PTYHONPATH ç›®å½•&lt;/strong&gt;&lt;/span&gt;ï¼ˆå¼€å§‹å®‰è£… python æ—¶è®¾ç½®çš„ç¯å¢ƒå˜é‡è·¯å¾„ï¼Œå¿˜è®°å¯å¾€å›çœ‹ python å®‰è£…ï¼‰ &amp;gt; &lt;span&gt;&lt;strong&gt;æ ‡å‡†çš„è¿æ¥åº“è·¯å¾„&lt;/strong&gt;&lt;/span&gt; &amp;gt; &lt;span&gt;&lt;strong&gt;.pth æ–‡ä»¶&lt;/strong&gt;&lt;/span&gt; &amp;gt; &lt;span&gt;&lt;strong&gt;ç¬¬ä¸‰æ–¹åŒ…&lt;/strong&gt;&lt;/span&gt;ï¼ˆsite-package ç›®å½•ï¼‰&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ &lt;span&gt;&lt;strong&gt;sys.path&lt;/strong&gt;&lt;/span&gt; æ¥æŸ¥çœ‹æœç´¢è·¯å¾„ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å¦‚ä¸‹å›¾ï¼š&lt;/span&gt;&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/img_convert/14b9bbe7cc15e565033be7ecf2dea318.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;æ³¨æ„ï¼š&lt;/strong&gt;&lt;/span&gt;æˆ‘ä»¬æ ¹æ®æ¨¡å—çš„æœç´¢è·¯å¾„é¡ºåºå¾—çŸ¥ï¼Œæˆ‘ä»¬åœ¨ç»™åŒ…æˆ–è€…æ¨¡å—å–åçš„æ—¶å€™ï¼Œä¸€å®š&lt;span&gt;&lt;strong&gt;ä¸è¦å’Œç³»ç»ŸåŒ…æˆ–è€…ç¬¬ä¸‰æ–¹åŒ…åŒå&lt;/strong&gt;&lt;/span&gt;ï¼Œå¦åˆ™ä¼šæ‰¾ä¸åˆ°å¯¹åº”çš„æ–¹æ³•ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;3.3 ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;ç›¸å¯¹è·¯å¾„ï¼š&lt;/strong&gt;&lt;/span&gt;ç›¸å¯¹äºä½ çš„å·¥ä½œç›®å½•çš„è·¯å¾„&lt;br/&gt;&lt;span&gt;&lt;strong&gt;ç»å¯¹è·¯å¾„ï¼š&lt;/strong&gt;&lt;/span&gt;ä»¥ç³»ç»Ÿçš„æ ¹è·¯å¾„ä¸ºä¸ºæ ¹ç›®å½•ï¼Œå¦‚ï¼šwindows C: linux /&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;åˆ°æ­¤PythonåŸºç¡€ç¯‡çš„å†…å®¹å°±å…¨éƒ¨ç»“æŸäº†ï¼Œå¤§å®¶åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­é‡åˆ°ç–‘é—®å¯ä»¥ç§èŠå¯ä¹ï¼Œå¯ä¹çœ‹åˆ°äº†éƒ½ä¼šä¸€ä¸€å›å¤çš„( â€¢Ì€ Ï‰ â€¢Ì )âœ§ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;br/&gt;&lt;center&gt;&lt;span&gt;&lt;strong&gt;&amp;lt; END&amp;gt;&lt;/strong&gt;&lt;/span&gt;&lt;/center&gt;
&lt;strong&gt;&lt;br/&gt;&lt;/strong&gt;
&lt;p&gt;&lt;strong&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201229144802188.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODYwNzQ4Mw==,size_1,color_FFFFFF,t_70#pic_center&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/strong&gt;&lt;/p&gt;
</description>
<pubDate>Mon, 11 Jan 2021 14:35:00 +0000</pubDate>
<dc:creator>keleæ˜¯å¯ä¹å‘€</dc:creator>
<og:description>æœ¬ç¯‡æ–‡ç« ä¸»è¦å†…å®¹ï¼šå¼‚å¸¸å¤„ç†ï¼Œå‡½æ•°ï¼Œæ¨¡å—å’ŒåŒ…ã€‚</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/kele-develop/p/14264779.html</dc:identifier>
</item>
</channel>
</rss>