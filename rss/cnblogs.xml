<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>åšå®¢å›­_é¦–é¡µ</title>
<link></link>
<description>ä»£ç æ”¹å˜ä¸–ç•Œ</description>
<item>
<title>ä»å£¹å¼€å§‹å­¦ä¹ NetCore 45 â•‘ ç»ˆäºè§£å†³äº†äº‹åŠ¡é—®é¢˜ - è€å¼ çš„å“²å­¦</title>
<link>http://www.cnblogs.com/laozhang-is-phi/p/11605436.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/laozhang-is-phi/p/11605436.html</guid>
<description>&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;å“ˆå–½ï¼Œåˆæ¥å†™æ–‡ç« äº†ï¼ŒåŸæ¥æ”¾å‡å¯ä»¥è¿™ä¹ˆçˆ½ï¼Œå¯ä»¥å­¦ä¹ å’Œåˆ†äº«ï¼ŒğŸ¤«å˜˜ï¼Œå¤§å®¶è¦å¥½å¥½çš„å·¥ä½œå“Ÿã€‚æ˜¨å¤©å‘è¡¨çš„é—®é¢˜ï¼Œå—¯ï¼Œç»™æˆ‘ç•™ä¸‹äº†ä¸€ç‚¹ç‚¹å†²å‡»ï¼Œå¤œé‡Œè¾—è½¬åä¾§ï¼Œæƒ³äº†å¾ˆå¤šï¼Œä»å¥½åˆ°åå†åˆ°å¥½å†åˆ°åï¼Œä»å¸Œæœ›åˆ°å¤±æœ›å†åˆ°å¸Œæœ›å†åˆ°å¤±æœ›ï¼Œæƒ³èµ·æ¥å½“å¹´é«˜å››äº†ï¼Œä¸æƒ³è§£é‡Šä»€ä¹ˆäº†ï¼Œå››å¹´åå†è§â¤ï¼Œä¸è¯´åºŸè¯ï¼Œç›´æ¥è¯´è¯´ä»Šå¤©çš„å†…å®¹å§ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä»Šå¤©è¿™ä¸ªå†…å®¹ï¼Œè¿˜æ˜¯æ¥æºäºä¸¤ä¸ªå¤šæœˆå‰ï¼Œæˆ‘çš„é¡¹ç›®çš„ä¸€ä¸ª issue ï¼Œå½“æ—¶è¯´åˆ°äº†å¦‚ä½•ä½¿ç”¨äº‹åŠ¡ï¼Œï¼ˆ&lt;span&gt;&lt;span&gt;ä¸ºå•¥è¦ä½¿ç”¨äº‹åŠ¡ï¼Œæˆ‘å°±ä¸å¤šè¯´äº†ï¼Œç›¸ä¿¡è‚¯å®šéƒ½çŸ¥é“ï¼Œè¿˜æœ‰é‚£ä¸ªæ¯æ¬¡é¢è¯•éƒ½é—®çš„é¢˜ï¼Œäº‹åŠ¡å››å¤§ç‰¹æ€§ã€‚ä¸çŸ¥é“è¿˜æœ‰æ²¡æœ‰å°ä¼™ä¼´è®°å¾—ï¼Œä¸ï¼Œæ˜¯éƒ½è®°å¾—ï¼ï¼‰&lt;/span&gt;â€‹&lt;/span&gt;æˆ‘ä¸€ç›´ä¹Ÿæ˜¯å„ç§å°è¯•ï¼Œç›´åˆ°å‰å‡ å¤©ä¹Ÿå°è¯•äº†å‡ ä¸ªåŠæ³•ï¼Œè¿˜æ˜¯æ— æœï¼Œç„¶ååˆå’Œ sqlsugar çš„ä½œè€…å‡¯æ—‹è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚ä»–è¯´åªè¦èƒ½ä¿è¯æ¯æ¬¡http çš„scope ä¼šè¯ä¸­çš„ sugar client æ˜¯åŒä¸€ä¸ªå°±è¡Œäº†ï¼Œè€Œä¸”åˆä¸èƒ½æŠŠ client è®¾ç½®ä¸ºå•ä¾‹ï¼Œå¤©å¤©çœ‹ç€è¿™ä¸ª issueï¼Œå¿ƒé‡Œéš¾å…æ³¢æ¾œï¼Œç»ˆäºå“Ÿï¼Œæ˜¨å¤©ç¾¤ç®¡ @å¤§é»„ç“œ å°ä¼™ä¼´ç ”ç©¶å‡ºæ¥äº†ï¼Œæˆ‘å¾ˆå¼€å¿ƒï¼Œè¡¨æ‰¬ä¸‹ä»–ï¼Œä¸‹è¾¹å°±æ­£å¼è¯´è¯´åœ¨æˆ‘çš„é¡¹ç›®ä¸­ï¼Œå¦‚æœä½¿ç”¨äº‹åŠ¡çš„ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1468246/201909/1468246-20190929123618079-423116429.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;é¡¹ç›®ä»‹ç»ï¼š netcore 2.2 + Sqlsugar 5.0 + UnitOfWork + async Repository + Service ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æŠ•ç¨¿ä½œè€…ï¼šQQç¾¤ï¼šå¤§é»„ç“œï¼ˆåšå®¢å›­åœ°å€ä¸è¯¦ï¼‰Â &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;é¡¹ç›®å·²ç»ä¿®æ”¹ï¼Œä¸ä»…ä»…å®ç°äº†å•ä¸€ä»“å‚¨æœåŠ¡çš„äº‹åŠ¡æäº¤ï¼Œè€Œä¸”ä¹Ÿå¯ä»¥è·¨ç±»è·¨ä»“å‚¨æœåŠ¡æ¥å®ç°äº‹åŠ¡ï¼Œæ¬¢è¿å¤§å®¶ä¸‹è½½ä¸å…¬æµ‹ï¼Œæ²¡é—®é¢˜ï¼Œæˆ‘ä¼šmerge åˆ° masterã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ä¸ºäº†é˜²æ­¢å¤§å®¶ä¸å¿…è¦çš„æ›´æ–°é”™è¯¯ï¼Œæˆ‘æ–°å»ºäº†ä¸€ä¸ªåˆ†æ”¯ï¼Œå¤§å®¶è‡ªå·±å»çœ‹åˆ†æ”¯å³å¯â€”â€”&lt;a href=&quot;https://github.com/anjoy8/Blog.Core/tree/Trans1.0&quot;&gt;https://github.com/anjoy8/Blog.Core/tree/Trans1.0&lt;/a&gt;&lt;a href=&quot;https://github.com/anjoy8/Blog.Core/tree/Trans1.0&quot; target=&quot;_blank&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/a&gt;ã€‚&lt;/span&gt;&lt;/p&gt;

&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;&lt;span&gt;Tipsï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æˆ‘è®¤ä¸º sqlsugar è¿˜æ˜¯å¾ˆä¸é”™ï¼Œå¾ˆå¥½ç”¨ï¼Œå½“ç„¶ï¼Œä¸èƒ½ç”¨ä¸‡èƒ½æ¥å½¢å®¹å®¢è§‚äº‹ç‰©ï¼Œè¿™æœ¬èº«å°±ä¸æ˜¯ä¸€ä¸ªæˆå¹´äººè¯¥æœ‰çš„æ€ç»´ï¼Œåœ¨æˆ‘æ¨å¹¿ sqlsugar è¿™ä¸€å¹´æ¥ï¼Œæˆ‘ä¹Ÿä¸€ç›´ç»™å‡¯æ—‹æä¸€äº›éœ€æ±‚å’ŒBugï¼Œä»–éƒ½ç‰¹åˆ«åŠæ—¶çš„è§£å†³äº†ï¼Œè€Œä¸”ä½¿ç”¨ä¸Šä¹Ÿå¾ˆé¡ºæ‰‹ï¼Œç›®å‰å·²ç»å®ç°äº†è·¨æœåŠ¡äº‹åŠ¡æ“ä½œäº†ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯åœ¨blog.core ä¸­ï¼Œä½¿ç”¨ä¸»ä»æ•°æ®åº“ï¼Œåˆ†ç¦»äº†ï¼ŒåŠ æ²¹ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;


&lt;h3&gt;1ã€åˆ›å»ºå·¥ä½œå•å…ƒæ¥å£&lt;/h3&gt;
&lt;p&gt;é¦–å…ˆæˆ‘ä»¬éœ€è¦åœ¨Â Blog.Core.IRepository å±‚ï¼Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹Â UnitOfWork ï¼Œç„¶ååˆ›å»ºæ¥å£Â IUnitOfWork.cs ï¼Œç”¨æ¥å¯¹å·¥ä½œå•å…ƒè¿›è¡Œå®šä¹‰&lt;span&gt;ç›¸åº”çš„è¡Œä¸ºæ“ä½œ&lt;/span&gt;ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
 &lt;span&gt;public&lt;/span&gt; &lt;span&gt;interface&lt;/span&gt;&lt;span&gt; IUnitOfWork
 {
     &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; åˆ›å»º sqlsugar client å®ä¾‹&lt;/span&gt;
&lt;span&gt;     ISqlSugarClient GetDbClient();
     &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¼€å§‹äº‹åŠ¡&lt;/span&gt;
     &lt;span&gt;void&lt;/span&gt;&lt;span&gt; BeginTran();
     &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æäº¤äº‹åŠ¡&lt;/span&gt;
     &lt;span&gt;void&lt;/span&gt;&lt;span&gt; CommitTran();
     &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å›æ»šäº‹åŠ¡&lt;/span&gt;
     &lt;span&gt;void&lt;/span&gt;&lt;span&gt; RollbackTran();
 }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;2ã€å¯¹ UnitOfWork æ¥å£è¿›è¡Œå®ç°&lt;/h3&gt;
&lt;p&gt;åœ¨Â Blog.Core.Repository å±‚ï¼Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ UnitOfWorkï¼Œç„¶ååˆ›å»ºäº‹åŠ¡æ¥å£å®ç°ç±» UnitOfWork.cs ï¼Œæ¥&lt;span&gt;å¯¹äº‹åŠ¡è¡Œä¸ºåšå®ç°&lt;/span&gt;ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; UnitOfWork : IUnitOfWork
    {

        &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;readonly&lt;/span&gt;&lt;span&gt; ISqlSugarClient _sqlSugarClient;
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ³¨å…¥ sugar client å®ä¾‹&lt;/span&gt;
        &lt;span&gt;public&lt;/span&gt;&lt;span&gt; UnitOfWork(ISqlSugarClient sqlSugarClient)
        {
            _sqlSugarClient &lt;/span&gt;=&lt;span&gt; sqlSugarClient;
        }
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ä¿è¯æ¯æ¬¡ scope è®¿é—®ï¼Œå¤šä¸ªä»“å‚¨ç±»ï¼Œéƒ½ç”¨ä¸€ä¸ª client å®ä¾‹
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ³¨æ„ï¼Œä¸æ˜¯å•ä¾‹æ¨¡å‹ï¼ï¼ï¼&lt;/span&gt;
        &lt;span&gt;public&lt;/span&gt;&lt;span&gt; ISqlSugarClient GetDbClient()
        {

            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; _sqlSugarClient;
        }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; BeginTran()
        {
            GetDbClient().Ado.BeginTran(); 
        }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; CommitTran()
        {
            &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt;
            {
                GetDbClient().Ado.CommitTran(); &lt;/span&gt;&lt;span&gt;//
&lt;/span&gt;&lt;span&gt;            }
            &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Exception ex)
            {
                GetDbClient().Ado.RollbackTran();
            }
        }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; RollbackTran()
        {
            GetDbClient().Ado.RollbackTran();
        }

    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å…·ä½“çš„å†…å®¹ï¼Œå¾ˆç®€å•ï¼Œè¿™é‡Œä¸è¿‡å¤šè§£é‡Šã€‚&lt;/p&gt;

&lt;h3&gt;3ã€ç”¨ UnitOfWork æ¥ç®¡ SqlguarClient&lt;/h3&gt;
&lt;p&gt;åœ¨åŸºç±»æ³›å‹ä»“å‚¨ç±»Â Â BaseRepository&amp;lt;TEntity&amp;gt; ä¸­ï¼Œæˆ‘ä»¬ä¿®æ”¹æ„é€ å‡½æ•°ï¼Œæ³¨å…¥å·¥ä½œå•å…ƒæ¥å£ï¼Œç”¨æ¥å°† sqlsugar å®ä¾‹ç»Ÿä¸€èµ·æ¥ï¼Œä¸æ˜¯æ¯æ¬¡éƒ½ newï¼Œè€Œä¸”é€šè¿‡å·¥ä½œå•å…ƒæ¥æ§åˆ¶ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;private&lt;/span&gt;&lt;span&gt;  ISqlSugarClient _db;
&lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;readonly&lt;/span&gt;&lt;span&gt; IUnitOfWork _unitOfWork;

&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ„é€ å‡½æ•°ï¼Œé€šè¿‡ unitofworkï¼Œæ¥æ§åˆ¶sqlsugar å®ä¾‹&lt;/span&gt;
&lt;span&gt;public&lt;/span&gt;&lt;span&gt; BaseRepository(IUnitOfWork unitOfWork)
{
    _unitOfWork &lt;/span&gt;=&lt;span&gt; unitOfWork;
    _db &lt;/span&gt;=&lt;span&gt; unitOfWork.GetDbClient();
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¥½åƒè¿™ä¸ªå¯ä»¥å»æ‰ï¼Œå…ˆä¿ç•™&lt;/span&gt;
&lt;span&gt;    DbContext.Init(BaseDBConfig.ConnectionString, (DbType)BaseDBConfig.DbType);
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä½ å¯ä»¥å¯¹æ¯”ä¸‹ä»¥å‰çš„ä»£ç ï¼Œå°±çŸ¥é“äº†ï¼Œè¿™ä¹ˆåšçš„ç›®çš„ï¼Œå°±æ˜¯æŠŠ sugar client ç»Ÿä¸€èµ·æ¥ï¼Œè¿™æ ·å°±èƒ½ä¿è¯æ¯æ¬¡ä¸€ä¸ªscope ï¼Œéƒ½èƒ½æ˜¯åŒä¸€ä¸ªå®ä¾‹ã€‚&lt;/p&gt;

&lt;h3&gt;4ã€ä¿®æ”¹æ¯ä¸€ä¸ªä»“å‚¨çš„æ„é€ å‡½æ•°&lt;/h3&gt;
&lt;p&gt;ä¸Šè¾¹æˆ‘ä»¬ä¸ºäº†å®ç°å¯¹ sugar clientçš„æ§åˆ¶ï¼Œåœ¨&lt;span&gt;åŸºç±»ä»“å‚¨çš„æ„é€ å‡½æ•°&lt;/span&gt;ä¸­ï¼Œæ³¨å…¥äº†IUnitOfWorkï¼Œä½†æ˜¯è¿™æ ·ä¼šå¯¼è‡´å­ç±»çš„ä»“å‚¨æŠ¥é”™ï¼Œæ¯•ç«Ÿçˆ¶ç±»æ„é€ å‡½æ•°ä¿®æ”¹äº†å˜›ï¼Œæ‰€ä»¥ç›®å‰æœ‰ä¸¤ä¸ªæ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;9&quot;&gt;
&lt;p&gt;1ã€å»æ‰å­ä»“å‚¨ï¼Œåªä½¿ç”¨æ³›å‹åŸºç±»ä»“å‚¨ï¼Œåœ¨serviceå±‚ä¸­ï¼Œä½¿ç”¨Â Â private readonly IRepository&amp;lt;å®ä½“ç±»&amp;gt; _repository; è¿™ç§æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;2ã€å»ä¸€ä¸€çš„ä¿®æ”¹å­ä»“å‚¨ï¼Œå¢åŠ æ„é€ å‡½æ•°ï¼Œå°† IUnitOfWork ä¼ ç»™çˆ¶ç±»ï¼Œå…·ä½“çš„çœ‹æˆ‘çš„ä»£ç å³å¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1468246/201909/1468246-20190929173816653-1729920699.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3&gt;5ã€ä¾èµ–æ³¨å…¥Â ISqlSugarClient&lt;/h3&gt;
&lt;p&gt;è¿™ä¸ªæ˜¯è‚¯å®šçš„ï¼Œå¤§å®¶è¿˜è®°å¾—ä¸Šè¾¹è¯´çš„å‘¢ï¼Œæˆ‘ä»¬è¦åœ¨ BaseRepository ä¸­ï¼Œæ³¨å…¥ ISqlSugarClient ï¼Œæ‰€ä»¥å°±å¿…é¡»ä¾èµ–æ³¨å…¥ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;45&quot;&gt;
&lt;pre&gt;
 &lt;span&gt;//&lt;/span&gt;&lt;span&gt; è¿™é‡Œæˆ‘ä¸æ˜¯å¼•ç”¨äº†å‘½åç©ºé—´ï¼Œå› ä¸ºå¦‚æœå¼•ç”¨å‘½åç©ºé—´çš„è¯ï¼Œä¼šå’ŒMicrosoftçš„ä¸€ä¸ªGetTypeInfoå­˜åœ¨äºŒä¹‰æ€§ï¼Œæ‰€ä»¥å°±ç›´æ¥è¿™ä¹ˆä½¿ç”¨äº†ã€‚&lt;/span&gt;
 services.AddScoped&amp;lt;SqlSugar.ISqlSugarClient&amp;gt;(o =&amp;gt;&lt;span&gt;
 {
     &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; SqlSugar.SqlSugarClient(&lt;span&gt;new&lt;/span&gt;&lt;span&gt; SqlSugar.ConnectionConfig()
     {
         ConnectionString &lt;/span&gt;= BaseDBConfig.ConnectionString,&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å¿…å¡«, æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²&lt;/span&gt;
         DbType = (SqlSugar.DbType)BaseDBConfig.DbType,&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å¿…å¡«, æ•°æ®åº“ç±»å‹&lt;/span&gt;
         IsAutoCloseConnection = &lt;span&gt;true&lt;/span&gt;,&lt;span&gt;//&lt;/span&gt;&lt;span&gt;é»˜è®¤false, æ—¶å€™çŸ¥é“å…³é—­æ•°æ®åº“è¿æ¥, è®¾ç½®ä¸ºtrueæ— éœ€ä½¿ç”¨usingæˆ–è€…Closeæ“ä½œ&lt;/span&gt;
         IsShardSameThread=&lt;span&gt;true&lt;/span&gt;,&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å…±äº«çº¿ç¨‹&lt;/span&gt;
         InitKeyType = SqlSugar.InitKeyType.SystemTable&lt;span&gt;//&lt;/span&gt;&lt;span&gt;é»˜è®¤SystemTable, å­—æ®µä¿¡æ¯è¯»å–, å¦‚ï¼šè¯¥å±æ€§æ˜¯ä¸æ˜¯ä¸»é”®ï¼Œæ ‡è¯†åˆ—ç­‰ç­‰ä¿¡æ¯&lt;/span&gt;
&lt;span&gt;     });
 });&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;è¿™é‡Œæœ‰ä¸€ä¸ªå°çŸ¥è¯†ç‚¹ï¼Œå°±æ˜¯æˆ‘ä»¬çš„ IUnitOfWork å·²ç»éšç€ ä»“å‚¨å±‚ ä¾èµ–æ³¨å…¥äº†ï¼Œå°±ä¸è®¸å•ç‹¬æ³¨å…¥äº†ï¼Œæ˜¯ä¸æ˜¯è¿™ä¸ªæ—¶å€™æ„Ÿè§‰ä½¿ç”¨ Autofac å¾ˆæ–¹ä¾¿ï¼Ÿ&lt;/p&gt;
&lt;p&gt;åˆ°äº†è¿™é‡Œï¼Œä¿®æ”¹å°±å®Œæˆäº†ï¼Œä¸‹è¾¹å°±æ˜¯å¦‚ä½•ä½¿ç”¨äº†ã€‚&lt;/p&gt;



&lt;h3&gt;1ã€ç›´æ¥æ“ä½œè·¨ ServiceÂ  äº‹åŠ¡&lt;/h3&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å¦‚ä½•ä½¿ç”¨äº‹åŠ¡äº†ï¼Œç¬¬ä¸€ä¸ªç®€å•ç²—æš´çš„ï¼Œå°±æ˜¯å…¨éƒ¨å†™åˆ° controller é‡Œï¼Œæˆ‘å·²ç»å†™å¥½äº†ä¸€ä¸ªdemoï¼Œå¤§å®¶æ¥çœ‹çœ‹ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ä¾èµ–æ³¨å…¥&lt;/span&gt;
&lt;span&gt;public&lt;/span&gt;&lt;span&gt; TransactionController(IUnitOfWork unitOfWork, IPasswordLibServices passwordLibServices, IGuestbookServices guestbookServices)
{
    _unitOfWork &lt;/span&gt;=&lt;span&gt; unitOfWork;
    _passwordLibServices &lt;/span&gt;=&lt;span&gt; passwordLibServices;
    _guestbookServices &lt;/span&gt;=&lt;span&gt; guestbookServices;
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;41&quot;&gt;
&lt;pre&gt;
&lt;span&gt;[HttpGet]
&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;async&lt;/span&gt; Task&amp;lt;IEnumerable&amp;lt;&lt;span&gt;string&lt;/span&gt;&amp;gt;&amp;gt;&lt;span&gt; Get()
{
            &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt;
            {
                Console.WriteLine($&lt;/span&gt;&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;);
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å¼€å§‹äº‹åŠ¡&lt;/span&gt;
                Console.WriteLine($&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Begin Transaction&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
                _unitOfWork.BeginTran();
                Console.WriteLine($&lt;/span&gt;&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;);
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; passwords = &lt;span&gt;await&lt;/span&gt;&lt;span&gt; _passwordLibServices.Query();
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ç¬¬ä¸€æ¬¡å¯†ç è¡¨çš„æ•°æ®æ¡æ•°&lt;/span&gt;
                Console.WriteLine($&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;first time : the count of passwords is :{passwords.Count}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
               
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å‘å¯†ç è¡¨æ·»åŠ ä¸€æ¡æ•°æ®&lt;/span&gt;
                Console.WriteLine($&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;insert a data into the table PasswordLib now.&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; insertPassword = &lt;span&gt;await&lt;/span&gt; _passwordLibServices.Add(&lt;span&gt;new&lt;/span&gt;&lt;span&gt; PasswordLib()
                {
                    IsDeleted &lt;/span&gt;= &lt;span&gt;false&lt;/span&gt;&lt;span&gt;,
                    plAccountName &lt;/span&gt;= &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;aaa&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
                    plCreateTime &lt;/span&gt;=&lt;span&gt; DateTime.Now
                });

                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ç¬¬äºŒæ¬¡æŸ¥çœ‹å¯†ç è¡¨æœ‰å¤šå°‘æ¡æ•°æ®ï¼Œåˆ¤æ–­æ˜¯å¦æ·»åŠ æˆåŠŸ&lt;/span&gt;
                passwords = &lt;span&gt;await&lt;/span&gt; _passwordLibServices.Query(d =&amp;gt; d.IsDeleted == &lt;span&gt;false&lt;/span&gt;&lt;span&gt;);
                Console.WriteLine($&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;second time : the count of passwords is :{passwords.Count}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);

                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;......&lt;/span&gt;
&lt;span&gt;
                Console.WriteLine($&lt;/span&gt;&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;);
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; guestbooks = &lt;span&gt;await&lt;/span&gt;&lt;span&gt; _guestbookServices.Query();
                Console.WriteLine($&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;first time : the count of guestbooks is :{guestbooks.Count}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);

                &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; ex = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å‡ºç°äº†ä¸€ä¸ªå¼‚å¸¸ï¼&lt;/span&gt;
                Console.WriteLine($&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\nThere's an exception!!&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
                &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; throwEx = &lt;span&gt;1&lt;/span&gt; /&lt;span&gt; ex;

                Console.WriteLine($&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;insert a data into the table Guestbook now.&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; insertGuestbook = &lt;span&gt;await&lt;/span&gt; _guestbookServices.Add(&lt;span&gt;new&lt;/span&gt;&lt;span&gt; Guestbook()
                {
                    username &lt;/span&gt;= &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bbb&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
                    blogId &lt;/span&gt;= &lt;span&gt;1&lt;/span&gt;&lt;span&gt;,
                    createdate &lt;/span&gt;=&lt;span&gt; DateTime.Now,
                    isshow &lt;/span&gt;= &lt;span&gt;true&lt;/span&gt;&lt;span&gt;
                });

                guestbooks &lt;/span&gt;= &lt;span&gt;await&lt;/span&gt;&lt;span&gt; _guestbookServices.Query();
                Console.WriteLine($&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;second time : the count of guestbooks is :{guestbooks.Count}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);

                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;äº‹åŠ¡æäº¤&lt;/span&gt;
&lt;span&gt;                _unitOfWork.CommitTran();
            }
            &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Exception)
            {
               &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; äº‹åŠ¡å›æ»š&lt;/span&gt;
&lt;span&gt;                _unitOfWork.RollbackTran();
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; passwords = &lt;span&gt;await&lt;/span&gt;&lt;span&gt; _passwordLibServices.Query();
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ç¬¬ä¸‰æ¬¡æŸ¥çœ‹å¯†ç è¡¨æœ‰å‡ æ¡æ•°æ®ï¼Œåˆ¤æ–­æ˜¯å¦å›æ»šæˆåŠŸ&lt;/span&gt;
                Console.WriteLine($&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;third time : the count of passwords is :{passwords.Count}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);

               &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; guestbooks = &lt;span&gt;await&lt;/span&gt;&lt;span&gt; _guestbookServices.Query();
                Console.WriteLine($&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;third time : the count of guestbooks is :{guestbooks.Count}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
            }

         &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; &lt;span&gt;string&lt;/span&gt;[] { &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;value1&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;value2&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; };
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;é¡¹ç›®çš„è¿‡ç¨‹ï¼Œåœ¨ä¸Šè¾¹æ³¨é‡Šå·²ç»è¯´æ˜äº†ï¼Œå¤§å®¶å¯ä»¥çœ‹ä¸€ä¸‹ï¼Œå¾ˆç®€å•ï¼Œå°±æ˜¯æŸ¥è¯¢ï¼Œæ·»åŠ ï¼Œå†æŸ¥è¯¢ï¼Œåˆ¤æ–­æ˜¯å¦æ“ä½œæˆåŠŸï¼Œé‚£ç°åœ¨æˆ‘ä»¬å°±æµ‹è¯•ä¸€ä¸‹ï¼Œæ•°æ®åº“è¡¨æ˜¯ç©ºçš„ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1468246/201909/1468246-20190929175950831-1575262568.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;


&lt;p&gt;Â ç„¶åæˆ‘ä»¬æ‰§è¡Œæ–¹æ³•ï¼ŒåŠ¨å›¾å¦‚ä¸‹ï¼š&lt;img src=&quot;https://img2018.cnblogs.com/blog/1468246/201909/1468246-20190929182511861-1598537061.gif&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;



&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æ˜¯å¯†ç è¡¨å·²ç»æ·»åŠ äº†ä¸€æ¡æ•°æ®çš„å‰æä¸‹ï¼Œåæ¥å›æ»šåï¼Œæ•°æ®éƒ½è¢«åˆ æ‰äº†ï¼Œæ•°æ®åº“ä¹Ÿæ²¡æœ‰å¯¹åº”çš„å€¼ï¼Œè¾¾åˆ°çš„ç›®çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯è¿™é‡Œæœ‰ä¸¤ä¸ªå°é—®é¢˜ï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;1ã€æˆ‘ä»¬æ§åˆ¶çš„æ˜¯ Service ç±»ï¼Œé‚£æˆ‘ä»¬èƒ½ä¸èƒ½æ§åˆ¶ä»“å‚¨ Repository ç±»å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;2ã€æˆ‘ä»¬æ¯æ¬¡éƒ½è¿™ä¹ˆå†™ï¼Œä¼šä¸ä¼šå¾ˆéº»çƒ¦å‘¢ï¼Œèƒ½ä¸èƒ½ç”¨ç»Ÿä¸€AOPå‘¢ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç­”æ¡ˆéƒ½æ˜¯è‚¯å®šçš„ï¼&lt;/p&gt;

&lt;h3&gt;2ã€å»ºç«‹äº‹åŠ¡AOPï¼Œè§£å†³å¤šä»“å‚¨å†…çš„äº‹åŠ¡æ“ä½œ&lt;/h3&gt;
&lt;p&gt;åœ¨ Blog.Core api å±‚çš„ AOP æ–‡ä»¶å¤¹ä¸‹ï¼Œåˆ›å»ºÂ BlogTranAOP.cs æ–‡ä»¶ï¼Œç”¨æ¥å®ç°äº‹åŠ¡AOPæ“ä½œï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;40&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; BlogTranAOP : IInterceptor
    {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ä¾èµ–æ³¨å…¥å·¥ä½œå•å…ƒæ¥å£&lt;/span&gt;
        &lt;span&gt;private&lt;/span&gt; &lt;span&gt;readonly&lt;/span&gt;&lt;span&gt; IUnitOfWork _unitOfWork;
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; BlogTranAOP(IUnitOfWork unitOfWork)
        {
            _unitOfWork &lt;/span&gt;=&lt;span&gt; unitOfWork;
        }

        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt;&lt;span&gt; å®ä¾‹åŒ–IInterceptorå”¯ä¸€æ–¹æ³• 
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;param name=&quot;invocation&quot;&amp;gt;&lt;/span&gt;&lt;span&gt;åŒ…å«è¢«æ‹¦æˆªæ–¹æ³•çš„ä¿¡æ¯&lt;/span&gt;&lt;span&gt;&amp;lt;/param&amp;gt;&lt;/span&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; Intercept(IInvocation invocation)
        {
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; method = invocation.MethodInvocationTarget ??&lt;span&gt; invocation.Method;
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å¯¹å½“å‰æ–¹æ³•çš„ç‰¹æ€§éªŒè¯
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å¦‚æœéœ€è¦éªŒè¯&lt;/span&gt;
            &lt;span&gt;if&lt;/span&gt; (method.GetCustomAttributes(&lt;span&gt;true&lt;/span&gt;).FirstOrDefault(x =&amp;gt; x.GetType() == &lt;span&gt;typeof&lt;/span&gt;(UseTranAttribute)) &lt;span&gt;is&lt;/span&gt;&lt;span&gt; UseTranAttribute) {
                &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt;
                {
                    Console.WriteLine($&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Begin Transaction&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
                    _unitOfWork.BeginTran();

                    invocation.Proceed();


                    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¼‚æ­¥è·å–å¼‚å¸¸ï¼Œæ™®é€šçš„ try catch å¤–å±‚ä¸èƒ½è¾¾åˆ°ç›®çš„ï¼Œæ¯•ç«Ÿæ˜¯&lt;span&gt;å¼‚æ­¥&lt;/span&gt;çš„&lt;/span&gt;
                    &lt;span&gt;if&lt;/span&gt;&lt;span&gt; (IsAsyncMethod(invocation.Method))
                    {
                        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (invocation.Method.ReturnType == &lt;span&gt;typeof&lt;/span&gt;&lt;span&gt;(Task))
                        {
                            invocation.ReturnValue &lt;/span&gt;=&lt;span&gt; InternalAsyncHelper.AwaitTaskWithPostActionAndFinally(
                                (Task)invocation.ReturnValue,
                                &lt;/span&gt;&lt;span&gt;async&lt;/span&gt; () =&amp;gt; &lt;span&gt;await&lt;/span&gt;&lt;span&gt; TestActionAsync(invocation),
                                ex &lt;/span&gt;=&amp;gt;&lt;span&gt;
                                {
                                    _unitOfWork.RollbackTran();&lt;span&gt;//äº‹åŠ¡å›æ»š&lt;/span&gt;
                                });
                        }
                        &lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;Task&amp;lt;TResult&amp;gt;&lt;/span&gt;
&lt;span&gt;                        {
                            invocation.ReturnValue &lt;/span&gt;=&lt;span&gt; InternalAsyncHelper.CallAwaitTaskWithPostActionAndFinallyAndGetResult(
                             invocation.Method.ReturnType.GenericTypeArguments[&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;],
                             invocation.ReturnValue,
                             &lt;/span&gt;&lt;span&gt;async&lt;/span&gt; () =&amp;gt; &lt;span&gt;await&lt;/span&gt;&lt;span&gt; TestActionAsync(invocation),
                             ex &lt;/span&gt;=&amp;gt;&lt;span&gt;
                             {
                                 _unitOfWork.RollbackTran();&lt;span&gt;//äº‹åŠ¡å›æ»š&lt;/span&gt;
                             });
                        }
                    }
                    _unitOfWork.CommitTran();

                }
                &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Exception)
                {
                    Console.WriteLine($&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Rollback Transaction&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
                    _unitOfWork.RollbackTran();
                }
            }
            &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;
            {
                invocation.Proceed();&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;ç›´æ¥æ‰§è¡Œè¢«æ‹¦æˆªæ–¹æ³•&lt;/span&gt;
&lt;span&gt;            }

        }
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;bool&lt;/span&gt;&lt;span&gt; IsAsyncMethod(MethodInfo method)
        {
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; (
                method.ReturnType &lt;/span&gt;== &lt;span&gt;typeof&lt;/span&gt;(Task) ||&lt;span&gt;
                (method.ReturnType.IsGenericType &lt;/span&gt;&amp;amp;&amp;amp; method.ReturnType.GetGenericTypeDefinition() == &lt;span&gt;typeof&lt;/span&gt;(Task&amp;lt;&amp;gt;&lt;span&gt;))
                );
        }
        &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;async&lt;/span&gt;&lt;span&gt; Task TestActionAsync(IInvocation invocation)
        {
        }

    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šè¾¹å…·ä½“çš„æ“ä½œå¾ˆç®€å•ï¼Œå¦‚æœä½ çœ‹è¿‡æˆ‘çš„ç¼“å­˜AOPå’Œæ—¥å¿—AOPä»¥åï¼Œè‚¯å®šå°±èƒ½çœ‹æ‡‚è¿™ä¸ªäº‹åŠ¡AOPçš„å†…å®¹ï¼Œè¿™é‡Œåªæ˜¯æœ‰ä¸€ç‚¹ï¼Œéœ€è¦å¢åŠ ä¸€ä¸ªç‰¹æ€§ï¼Œpublic class UseTranAttribute : Attributeï¼Œè¿™ä¸ªå’Œå½“æ—¶çš„ç¼“å­˜AOPæ˜¯ä¸€æ ·çš„ï¼Œåªæœ‰é…ç½®äº†æ‰ä¼šå®ç°äº‹åŠ¡æäº¤ï¼Œå…·ä½“çš„è¯·æŸ¥çœ‹Â &lt;span&gt;UseTranAttribute&lt;/span&gt;.cs ç±»ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åæˆ‘ä»¬æµ‹è¯•ä¸€ä¸ªå­ä»“å‚¨é¡¹ç›®ï¼Œå…·ä½“çš„ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;åœ¨ Blog.Core.Services å±‚ä¸‹çš„Â GuestbookServices.cs å†…ï¼Œå¢åŠ ä¸€ä¸ª Task&amp;lt;bool&amp;gt; TestTranInRepositoryAOP() æ–¹æ³•ï¼Œå†…å®¹å’Œä¸Šè¾¹ controller ä¸­çš„æ§åˆ¶ service ç±»ä¼¼ï¼Œåªä¸è¿‡æ˜¯ç”¨ Repository æ“ä½œç±»ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1468246/201909/1468246-20190929190323756-1300213067.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¢åŠ äº‹åŠ¡ç‰¹æ€§ [&lt;span&gt;UseTran&lt;/span&gt;] ï¼Œç„¶ååœ¨æ§åˆ¶å™¨æ­£å¸¸çš„è°ƒç”¨ï¼Œå…·ä½“çš„æ“ä½œå’Œç»“æœå°±ä¸å±•ç¤ºäº†ï¼Œå·²ç»æµ‹è¯•è¿‡äº†ï¼Œæ²¡é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;åˆ°è¿™é‡Œï¼Œå°±ç»ˆäºè§£å†³äº†äº‹åŠ¡çš„ç›¸å…³æ“ä½œï¼Œå½“ç„¶è¿™é‡Œè¿˜æ˜¯æœ‰å¾ˆå¤šçš„é—®é¢˜éœ€è¦è€ƒç©¶ï¼Œæˆ‘ä¹Ÿåœ¨è€ƒè™‘æœ‰æ²¡æœ‰æ›´å¥½çš„ç‚¹å­å’Œæ–¹æ¡ˆï¼ŒæœŸå¾…åç»­æŠ¥é“ã€‚Â &lt;/p&gt;




&lt;p&gt;æ³¨æ„æƒ…å†µåˆ†æ”¯ï¼š&lt;span&gt;Trans1.0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/anjoy8/Blog.Core&quot; target=&quot;_blank&quot;&gt;https://github.com/anjoy8/Blog.Core&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://gitee.com/laozhangIsPhi/Blog.Core&quot; target=&quot;_blank&quot;&gt;https://gitee.com/laozhangIsPhi/Blog.Core&lt;/a&gt;&lt;/p&gt;

</description>
<pubDate>Mon, 30 Sep 2019 00:37:00 +0000</pubDate>
<dc:creator>è€å¼ çš„å“²å­¦</dc:creator>
<og:description>ä¸€ã€é¡¹ç›®è¯´æ˜ å“ˆå–½ï¼Œåˆæ¥å†™æ–‡ç« äº†ï¼ŒåŸæ¥æ”¾å‡å¯ä»¥è¿™ä¹ˆçˆ½ï¼Œå¯ä»¥å­¦ä¹ å’Œåˆ†äº«ï¼Œ&amp;#129323;å˜˜ï¼Œå¤§å®¶è¦å¥½å¥½çš„å·¥ä½œå“Ÿã€‚æ˜¨å¤©å‘è¡¨çš„é—®é¢˜ï¼Œå—¯ï¼Œç»™æˆ‘ç•™ä¸‹äº†ä¸€ç‚¹ç‚¹å†²å‡»ï¼Œå¤œé‡Œè¾—è½¬åä¾§ï¼Œæƒ³äº†å¾ˆå¤šï¼Œä»å¥½åˆ°åå†åˆ°å¥½å†åˆ°åï¼Œ</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/laozhang-is-phi/p/11605436.html</dc:identifier>
</item>
<item>
<title>é¢è¯•å¹¶å‘volatileå…³é”®å­—æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥å…·å¤‡å“ªäº›è°ˆèµ„ï¼Ÿ - æ—¥æ‹±ä¸€å…µ</title>
<link>http://www.cnblogs.com/FraserYu/p/11610855.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/FraserYu/p/11610855.html</guid>
<description>&lt;p&gt;&lt;strong&gt;æå‰å‘ç°æ›´å¤šç²¾å½©å†…å®¹ï¼Œè¯·è®¿é—® &lt;a href=&quot;https://dayarch.top/&quot;&gt;ä¸ªäººåšå®¢&lt;/a&gt;&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;æå‰å‘ç°æ›´å¤šç²¾å½©å†…å®¹ï¼Œè¯·è®¿é—® &lt;a href=&quot;https://dayarch.top/&quot;&gt;ä¸ªäººåšå®¢&lt;/a&gt;&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;æå‰å‘ç°æ›´å¤šç²¾å½©å†…å®¹ï¼Œè¯·è®¿é—® &lt;a href=&quot;https://dayarch.top/&quot;&gt;ä¸ªäººåšå®¢&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;å†™åœ¨å‰é¢&quot;&gt;å†™åœ¨å‰é¢&lt;/h2&gt;
&lt;p&gt;åœ¨ &lt;a href=&quot;https://dayarch.top/2019/09/12/you-xu-xing-ke-jian-xing-happens-before-lai-gao-ding/&quot;&gt;å¯è§æ€§æœ‰åºæ€§ï¼ŒHappens-beforeæ¥æå®š&lt;/a&gt; æ–‡ç« ä¸­ï¼Œhappens-before çš„åŸåˆ™ä¹‹ä¸€: volatileå˜é‡è§„åˆ™&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;å¯¹ä¸€ä¸ª volatile åŸŸçš„å†™, happens-before äºä»»æ„åç»­å¯¹è¿™ä¸ª volatile åŸŸçš„è¯»&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æŒ‰ç†è¯´äº†è§£äº†è¿™ä¸ªè§„åˆ™ï¼Œå¯¹ volatile çš„ä½¿ç”¨å°±å·²ç»è¶³å¤Ÿäº†ï¼Œä½†æ˜¯é¢è¯•å®˜å¯æ˜¯å–œæ¬¢åˆ¨æ ¹é—®åˆ°åº•çš„ï¼Œä¸ºäº†æ›´é€å½»çš„äº†è§£ volatile çš„å†…å­˜è¯­ä¹‰ä¸è¯»å†™è¯­ä¹‰ï¼Œä¸ºäº†é¢è¯•å¤šä¸€äº›è°ˆèµ„è¿›è€Œè·å¾—ä¸€äº›åŠ åˆ†é¡¹ï¼ŒåŒæ—¶å°½æ—©å¡«è¡¥å‰åºæ–‡ç« ç•™ä¸‹çš„å‘ï¼Œäºæ˜¯ä¹è¿™ç¯‡æ–‡ç« å°±è¿™æ ·å°´å°¬çš„è¯ç”Ÿäº†&lt;/p&gt;
&lt;h2 id=&quot;happens-before-ä¹‹-volatile-å˜é‡è§„åˆ™&quot;&gt;happens-before ä¹‹ volatile å˜é‡è§„åˆ™&lt;/h2&gt;
&lt;p&gt;ä¸‹é¢çš„è¡¨æ ¼ä½ è¿˜è®°å¾—å—ï¼Ÿ(æ˜¯çš„ï¼Œä½ è®°å¾—ğŸ˜‚)&lt;/p&gt;
&lt;table&gt;&lt;thead/&gt;&lt;tbody&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;ç¬¬ä¸€ä¸ªæ“ä½œ&lt;/td&gt;
&lt;td&gt;æ™®é€šè¯»/å†™&lt;/td&gt;
&lt;td&gt;volatile è¯»&lt;/td&gt;
&lt;td&gt;volatile å†™&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;æ™®é€šè¯»/å†™&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;NO&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;volatile è¯»&lt;/td&gt;
&lt;td&gt;NO&lt;/td&gt;
&lt;td&gt;NO&lt;/td&gt;
&lt;td&gt;NO&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;volatile å†™&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;NO&lt;/td&gt;
&lt;td&gt;NO&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;ä¸Šé¢çš„è¡¨æ ¼æ˜¯ JMM é’ˆå¯¹ç¼–è¯‘å™¨å®šåˆ¶çš„ volatile é‡æ’åºçš„è§„åˆ™ï¼Œé‚£ JMM æ˜¯æ€æ ·ç¦æ­¢é‡æ’åºçš„å‘¢ï¼Ÿç­”æ¡ˆæ˜¯&lt;strong&gt;å†…å­˜å±éšœ&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;å†…å­˜å±éšœ-memory-barriers-fences&quot;&gt;å†…å­˜å±éšœ (Memory Barriers / Fences)&lt;/h2&gt;
&lt;p&gt;æ— è®ºä½ å¬è¿‡è¿™ä¸ªåè¯ä¸å¦éƒ½æ²¡å…³ç³»ï¼Œå¾ˆç®€å•ï¼Œä¸”çœ‹&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;ä¸ºäº†å®ç° volatile çš„å†…å­˜è¯­ä¹‰ï¼Œç¼–è¯‘å™¨åœ¨ç”Ÿæˆå­—èŠ‚ç æ—¶ï¼Œä¼šåœ¨æŒ‡ä»¤åºåˆ—ä¸­æ’å…¥å†…å­˜å±éšœæ¥ç¦æ­¢ç‰¹å®šç±»å‹çš„å¤„ç†å™¨é‡æ’åº&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™å¥è¯æœ‰ç‚¹æŠ½è±¡ï¼Œè¯•ç€æƒ³è±¡å†…å­˜å±éšœæ˜¯ä¸€é¢é«˜å¢™ï¼Œå¦‚æœä¸¤ä¸ªå˜é‡ä¹‹é—´æœ‰è¿™ä¸ªå±éšœï¼Œé‚£ä¹ˆä»–ä»¬å°±ä¸èƒ½äº’æ¢ä½ç½®(é‡æ’åº)äº†ï¼Œå˜é‡æœ‰è¯»(Load)æœ‰å†™(Store)ï¼Œæ“ä½œæœ‰å‰æœ‰åï¼ŒJMM å°±å°†å†…å­˜å±éšœæ’å…¥ç­–ç•¥åˆ†ä¸º 4 ç§:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;åœ¨æ¯ä¸ª volatile å†™æ“ä½œçš„å‰é¢æ’å…¥ä¸€ä¸ª StoreStore å±éšœ&lt;/li&gt;
&lt;li&gt;åœ¨æ¯ä¸ª volatile å†™æ“ä½œçš„åé¢æ’å…¥ä¸€ä¸ª StoreLoad å±éšœ&lt;/li&gt;
&lt;li&gt;åœ¨æ¯ä¸ª volatile è¯»æ“ä½œçš„åé¢æ’å…¥ä¸€ä¸ª LoadLoad å±éšœ&lt;/li&gt;
&lt;li&gt;åœ¨æ¯ä¸ª volatile è¯»æ“ä½œçš„åé¢æ’å…¥ä¸€ä¸ª LoadStore å±éšœ&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;1 å’Œ 2 ç”¨å›¾å½¢æè¿°ä»¥åŠå¯¹åº”è¡¨æ ¼è§„åˆ™å°±æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­äº†:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1583165/201909/1583165-20190930082902457-681497965.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;3 å’Œ 4 ç”¨å›¾å½¢æè¿°ä»¥åŠå¯¹åº”è¡¨æ ¼è§„åˆ™å°±æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­äº†:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1583165/201909/1583165-20190930082903800-760097773.png&quot;/&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;å…¶å®å›¾å½¢ä¹Ÿæ˜¯è¡¨æ ¼å†…å®¹çš„ä½“ç°ï¼Œåªä¸è¿‡å‘Šè¯‰å¤§å®¶å†…å­˜å±éšœæ˜¯å¦‚ä½•ç¦æ­¢æŒ‡ä»¤é‡æ’åºçš„ï¼Œæ‰€ä»¥å¤§å®¶åªè¦ç‰¢è®°è¡¨æ ¼å†…å®¹å³å¯&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸€æ®µç¨‹åºçš„è¯»å†™é€šå¸¸ä¸ä¼šåƒä¸Šé¢ä¸¤ç§æƒ…å†µè¿™æ ·ç®€å•ï¼Œè¿™äº›å±éšœç»„åˆèµ·æ¥å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿå…¶å®ä¸€ç‚¹éƒ½ä¸éš¾ï¼Œæˆ‘ä»¬åªéœ€è¦å°†è¿™äº›æŒ‡ä»¤å¸¦å…¥åˆ°æ–‡ç« å¼€å¤´çš„è¡¨æ ¼ä¸­ï¼Œç„¶åå†æŒ‰ç…§ç¨‹åºé¡ºåºæ‹¼æ¥æŒ‡ä»¤å°±å¥½äº†&lt;/p&gt;
&lt;p&gt;æ¥çœ‹ä¸€å°æ®µç¨‹åº:&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;public class VolatileBarrierExample {

    private int a;
    private volatile int v1 = 1;
    private volatile int v2 = 2;

    void readAndWrite(){
        int i = v1; //ç¬¬ä¸€ä¸ªvolatileè¯»
        int j = v2; //ç¬¬äºŒä¸ªvolatileè¯»
        a = i + j;  //æ™®é€šå†™
        v1 = i + 1; //ç¬¬ä¸€ä¸ªvolatileå†™
        v2 = j * 2; //ç¬¬äºŒä¸ªvolatileå†™
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å°†å±éšœæŒ‡ä»¤å¸¦å…¥åˆ°ç¨‹åºå°±æ˜¯è¿™ä¸ªæ ·å­:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1583165/201909/1583165-20190930082905867-738431879.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å°†ä¸Šå›¾åˆ†å‡ ä¸ªè§’åº¦æ¥çœ‹:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;å½©è‰²æ˜¯å°†å±éšœæŒ‡ä»¤å¸¦å…¥åˆ°ç¨‹åºä¸­ç”Ÿæˆçš„å…¨éƒ¨å†…å®¹ï¼Œä¹Ÿå°±æ˜¯ç¼–è¯‘å™¨ç”Ÿæˆçš„&lt;strong&gt;ã€Œæœ€ç¨³å¦¥ã€&lt;/strong&gt;çš„æ–¹æ¡ˆ&lt;/li&gt;
&lt;li&gt;æ˜¾ç„¶æœ‰å¾ˆå¤šå±éšœæ˜¯é‡å¤å¤šä½™çš„ï¼Œå³ä¾§è™šçº¿æ¡†æŒ‡å‘çš„å±éšœæ˜¯å¯ä»¥è¢«&lt;strong&gt;ã€Œä¼˜åŒ–ã€&lt;/strong&gt;åˆ é™¤æ‰çš„å±éšœ&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;åˆ°è¿™é‡Œä½ åº”è¯¥äº†è§£äº† volatile æ˜¯å¦‚ä½•é€šè¿‡å†…å­˜å±éšœä¿è¯ç¨‹åºä¸è¢«&quot;æ“…è‡ª&quot;æ’åºçš„ï¼Œé‚£ volatile æ˜¯å¦‚ä½•ä¿è¯å¯è§æ€§çš„å‘¢ï¼Ÿ&lt;/p&gt;
&lt;h2 id=&quot;volatile-å†™-è¯»çš„å†…å­˜è¯­ä¹‰&quot;&gt;volatile å†™-è¯»çš„å†…å­˜è¯­ä¹‰&lt;/h2&gt;
&lt;p&gt;å›é¡¾ä¸€ä¸‹ä¹‹å‰æ–‡ç« å†…å®¹ä¸­çš„ç¨‹åºï¼Œå‡å®šçº¿ç¨‹ A å…ˆæ‰§è¡Œ writer æ–¹æ³•ï¼Œéšåçº¿ç¨‹ B æ‰§è¡Œ reader æ–¹æ³•ï¼Œ:&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;public class ReorderExample {

    private int x = 0;
    private int y = 1;
    private volatile boolean flag = false;

    public void writer(){
        x = 42; //1
        y = 50; //2
        flag = true;    //3
    }

    public void reader(){
        if (flag){  //4
            System.out.println(&quot;x:&quot; + x);   //5
            System.out.println(&quot;y:&quot; + y);   //6
        }
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åˆ°è¿™é‡Œä½ æ˜¯å¦è¿˜è®°å¾—ä¹‹å‰è¯´è¿‡çš„ JMMï¼Œæ˜¯çš„ï¼Œä½ è¿˜è®°å¾—ğŸ˜‚ï¼Œå½“çº¿ç¨‹ A æ‰§è¡Œ writer æ–¹æ³•æ—¶ï¼Œä¸”çœ‹ä¸‹å›¾:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1583165/201909/1583165-20190930082906449-849548855.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;çº¿ç¨‹ A å°†æœ¬åœ°å†…å­˜æ›´æ”¹çš„å˜é‡å†™å›åˆ°ä¸»å†…å­˜ä¸­&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;h3 id=&quot;volatile-è¯»çš„å†…å­˜è¯­ä¹‰&quot;&gt;volatile è¯»çš„å†…å­˜è¯­ä¹‰:&lt;/h3&gt;
&lt;p&gt;å½“è¯»ä¸€ä¸ª volatile å˜é‡æ—¶, JMM ä¼šæŠŠè¯¥çº¿ç¨‹å¯¹åº”çš„æœ¬åœ°å†…å­˜ç½®ä¸ºæ— æ•ˆã€‚çº¿ç¨‹æ¥ä¸‹æ¥å°†ä»ä¸»å†…å­˜ä¸­è¯»å–å…±äº«å˜é‡ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ‰€ä»¥å½“çº¿ç¨‹ B æ‰§è¡Œ reader æ–¹æ³•æ—¶ï¼Œå›¾å½¢ç»“æ„å°±å˜æˆäº†è¿™ä¸ªæ ·å­:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1583165/201909/1583165-20190930082907159-1356957098.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;çº¿ç¨‹ B æœ¬åœ°å†…å­˜å˜é‡æ— æ•ˆï¼Œä»ä¸»å†…å­˜ä¸­è¯»å–å˜é‡åˆ°æœ¬åœ°å†…å­˜ä¸­ï¼Œä¹Ÿå°±å¾—åˆ°äº†çº¿ç¨‹ A æ›´æ”¹åçš„ç»“æœï¼Œè¿™å°±æ˜¯ volatile æ˜¯å¦‚ä½•ä¿è¯å¯è§æ€§çš„&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ çœ‹è¿‡å‰é¢çš„æ–‡ç« ä½ å°±ä¸éš¾ç†è§£ä¸Šé¢çš„ä¸¤å¼ å›¾äº†ï¼Œç»¼åˆèµ·æ¥è¯´:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;çº¿ç¨‹ A å†™ä¸€ä¸ªvolatileå˜é‡, å®è´¨ä¸Šæ˜¯çº¿ç¨‹ A å‘æ¥ä¸‹æ¥å°†è¦è¯»è¿™ä¸ª volatile å˜é‡çš„æŸä¸ªçº¿ç¨‹å‘å‡ºäº†(å…¶å¯¹å…±äº«å˜é‡æ‰€åšä¿®æ”¹çš„)æ¶ˆæ¯&lt;/li&gt;
&lt;li&gt;çº¿ç¨‹ B è¯»ä¸€ä¸ª volatile å˜é‡,å®è´¨ä¸Šæ˜¯çº¿ç¨‹ B æ¥æ”¶äº†ä¹‹å‰æŸä¸ªçº¿ç¨‹å‘å‡ºçš„(åœ¨å†™è¿™ä¸ª volatile å˜é‡ä¹‹å‰å¯¹å…±äº«å˜é‡æ‰€åšä¿®æ”¹çš„)æ¶ˆæ¯ã€‚&lt;/li&gt;
&lt;li&gt;çº¿ç¨‹ A å†™ä¸€ä¸ª volatile å˜é‡, éšåçº¿ç¨‹ B è¯»è¿™ä¸ª volatile å˜é‡, è¿™ä¸ªè¿‡ç¨‹å®è´¨ä¸Šæ˜¯çº¿ç¨‹ A é€šè¿‡ä¸»å†…å­˜å‘çº¿ç¨‹B å‘é€æ¶ˆæ¯ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;åˆ°è¿™é‡Œï¼Œé¢è¯• volatile æ—¶ï¼Œä½ åº”è¯¥æœ‰ä¸€äº›è°ˆèµ„äº†ï¼ŒåŒæ—¶ä¹Ÿå¯¹ volatile çš„è¯­ä¹‰æœ‰äº†æ›´æ·±å±‚æ¬¡çš„äº†è§£&lt;/p&gt;
&lt;h2 id=&quot;å½©è›‹&quot;&gt;å½©è›‹&lt;/h2&gt;
&lt;p&gt;ä¹‹å‰çš„æ–‡ç« æåˆ°è¿‡è¿™æ ·ä¸€å¥è¯:&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;ä»å†…å­˜è¯­ä¹‰çš„è§’åº¦æ¥è¯´, volatile çš„&lt;code&gt;å†™-è¯»&lt;/code&gt;ä¸é”çš„&lt;code&gt;é‡Šæ”¾-è·å–&lt;/code&gt;æœ‰ç›¸åŒçš„å†…å­˜æ•ˆæœï¼›volatile å†™å’Œé”çš„é‡Šæ”¾æœ‰ç›¸åŒçš„å†…å­˜è¯­ä¹‰; volatile è¯»ä¸é”çš„è·å–æœ‰ç›¸åŒçš„å†…å­˜è¯­ä¹‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è®°ä½æ–‡ä¸­æœ€åä¸¤å¼ å›¾ï¼Œ å½“æˆ‘ä»¬è¯´åˆ° synchronized çš„æ—¶å€™ï¼Œä½ å°±ä¼šçŒ›çš„ç†è§£è¿™å¥è¯çš„å«ä¹‰äº†, æ„Ÿå…´è¶£çš„å¯ä»¥è‡ªå·±å…ˆäº†è§£ synchronized çš„å†™-è¯»è¯­ä¹‰&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬å°±èŠä¸€èŠé”ç›¸å…³çš„å†…å®¹äº†ï¼Œæ•¬è¯·æœŸå¾…...&lt;/p&gt;
&lt;h2 id=&quot;çµé­‚è¿½é—®&quot;&gt;çµé­‚è¿½é—®&lt;/h2&gt;
&lt;ol&gt;&lt;li&gt;å¦‚æœ volatile å†™ä¹‹åç›´æ¥ returnï¼Œé‚£è¿˜ä¼šç”Ÿæˆ StoreLoad æŒ‡ä»¤å—ï¼Ÿ&lt;/li&gt;
&lt;li&gt;synchronized æ˜¯æ€æ ·é€æ­¥è¢«ä¼˜åŒ–çš„ï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;&lt;h2 id=&quot;æé«˜æ•ˆç‡å·¥å…·&quot;&gt;æé«˜æ•ˆç‡å·¥å…·&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1583165/201909/1583165-20190930082907383-221945708.png&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;tool.lu&quot;&gt;tool.lu&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://tool.lu&quot; class=&quot;uri&quot;&gt;https://tool.lu&lt;/a&gt; æ˜¯ä¸€æ¬¾é›†æˆäº†éå¸¸å¤šåŠŸèƒ½çš„åœ¨çº¿å·¥å…·ï¼ŒåŸºæœ¬æ»¡è¶³æ—¥å¸¸å¼€å‘æ‰€éœ€&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1583165/201909/1583165-20190930082914498-1015843942.png&quot;/&gt;&lt;/p&gt;
&lt;hr/&gt;&lt;h2 id=&quot;æ¨èé˜…è¯»&quot;&gt;æ¨èé˜…è¯»&lt;/h2&gt;
&lt;hr/&gt;&lt;blockquote&gt;
&lt;h3 id=&quot;æ¬¢è¿æŒç»­å…³æ³¨å…¬ä¼—å·æ—¥æ‹±ä¸€å…µ&quot;&gt;æ¬¢è¿æŒç»­å…³æ³¨å…¬ä¼—å·ï¼šã€Œæ—¥æ‹±ä¸€å…µã€&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;å‰æ²¿ Java æŠ€æœ¯å¹²è´§åˆ†äº«&lt;/li&gt;
&lt;li&gt;é«˜æ•ˆå·¥å…·æ±‡æ€» | å›å¤ã€Œå·¥å…·ã€&lt;/li&gt;
&lt;li&gt;é¢è¯•é—®é¢˜åˆ†æä¸è§£ç­”&lt;/li&gt;
&lt;li&gt;æŠ€æœ¯èµ„æ–™é¢†å– | å›å¤ã€Œèµ„æ–™ã€&lt;/li&gt;
&lt;/ul&gt;&lt;/blockquote&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;ä»¥è¯»ä¾¦æ¢å°è¯´æ€ç»´è½»æ¾è¶£å‘³å­¦ä¹  Java æŠ€æœ¯æ ˆç›¸å…³çŸ¥è¯†ï¼Œæœ¬ç€å°†å¤æ‚é—®é¢˜ç®€å•åŒ–ï¼ŒæŠ½è±¡é—®é¢˜å…·ä½“åŒ–å’Œå›¾å½¢åŒ–åŸåˆ™é€æ­¥åˆ†è§£æŠ€æœ¯é—®é¢˜ï¼ŒæŠ€æœ¯æŒç»­æ›´æ–°ï¼Œè¯·æŒç»­å…³æ³¨......&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1583165/201909/1583165-20190930082915462-420578354.png&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Mon, 30 Sep 2019 00:29:00 +0000</pubDate>
<dc:creator>æ—¥æ‹±ä¸€å…µ</dc:creator>
<og:description>æå‰å‘ç°æ›´å¤šç²¾å½©å†…å®¹ï¼Œè¯·è®¿é—® 'ä¸ªäººåšå®¢' æå‰å‘ç°æ›´å¤šç²¾å½©å†…å®¹ï¼Œè¯·è®¿é—® 'ä¸ªäººåšå®¢' æå‰å‘ç°æ›´å¤šç²¾å½©å†…å®¹ï¼Œè¯·è®¿é—® 'ä¸ªäººåšå®¢' å†™åœ¨å‰é¢ åœ¨ 'å¯è§æ€§æœ‰åºæ€§ï¼ŒHappens beforeæ¥æå®š'</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/FraserYu/p/11610855.html</dc:identifier>
</item>
<item>
<title>11.DjangoåŸºç¡€ä¹ä¹‹ä¸­é—´ä»¶ - changxin7</title>
<link>http://www.cnblogs.com/changxin7/p/11610813.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/changxin7/p/11610813.html</guid>
<description>&lt;h2 id=&quot;ä¸€-å‰æˆ&quot;&gt;ä¸€ å‰æˆ&lt;/h2&gt;

&lt;p&gt;ã€€ã€€æˆ‘ä»¬åœ¨å‰é¢çš„è¯¾ç¨‹ä¸­å·²ç»å­¦ä¼šäº†ç»™è§†å›¾å‡½æ•°åŠ è£…é¥°å™¨æ¥åˆ¤æ–­æ˜¯ç”¨æˆ·æ˜¯å¦ç™»å½•ï¼ŒæŠŠæ²¡æœ‰ç™»å½•çš„ç”¨æˆ·è¯·æ±‚è·³è½¬åˆ°ç™»å½•é¡µé¢ã€‚æˆ‘ä»¬é€šè¿‡ç»™å‡ ä¸ªç‰¹å®šè§†å›¾å‡½æ•°åŠ è£…é¥°å™¨å®ç°äº†è¿™ä¸ªéœ€æ±‚ã€‚ä½†æ˜¯ä»¥åæ·»åŠ çš„è§†å›¾å‡½æ•°å¯èƒ½ä¹Ÿéœ€è¦åŠ ä¸Šè£…é¥°å™¨ï¼Œè¿™æ ·æ˜¯ä¸æ˜¯ç¨å¾®æœ‰ç‚¹ç¹çã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€å­¦å®Œä»Šå¤©çš„å†…å®¹ä¹‹åå‘¢ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨æ›´é€‚å®œçš„æ–¹å¼æ¥å®ç°ç±»ä¼¼ç»™æ‰€æœ‰è¯·æ±‚éƒ½åšç›¸åŒæ“ä½œçš„åŠŸèƒ½äº†&lt;/p&gt;

&lt;h2 id=&quot;äºŒ-ä¸­é—´ä»¶ä»‹ç»&quot;&gt;äºŒ ä¸­é—´ä»¶ä»‹ç»&lt;/h2&gt;

&lt;p&gt;ã€€ã€€ä¸­é—´ä»¶é¡¾åæ€ä¹‰ï¼Œæ˜¯ä»‹äºrequestä¸responseå¤„ç†ä¹‹é—´çš„ä¸€é“å¤„ç†è¿‡ç¨‹ï¼Œç›¸å¯¹æ¯”è¾ƒè½»é‡çº§ï¼Œå¹¶ä¸”åœ¨å…¨å±€ä¸Šæ”¹å˜djangoçš„è¾“å…¥ä¸è¾“å‡ºã€‚å› ä¸ºæ”¹å˜çš„æ˜¯å…¨å±€ï¼Œæ‰€ä»¥éœ€è¦è°¨æ…å®ç”¨ï¼Œç”¨ä¸å¥½ä¼šå½±å“åˆ°æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€Djangoçš„ä¸­é—´ä»¶çš„å®šä¹‰ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Middleware is a framework of hooks into Djangoâ€™s request/response processing. &amp;lt;br&amp;gt;Itâ€™s a light, low-level â€œpluginâ€ system for globally altering Djangoâ€™s input or output.&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€å¦‚æœä½ æƒ³ä¿®æ”¹è¯·æ±‚ï¼Œä¾‹å¦‚è¢«ä¼ é€åˆ°viewä¸­çš„&lt;strong&gt;HttpRequest&lt;/strong&gt;å¯¹è±¡ã€‚ æˆ–è€…ä½ æƒ³ä¿®æ”¹viewè¿”å›çš„&lt;strong&gt;HttpResponse&lt;/strong&gt;å¯¹è±¡ï¼Œè¿™äº›éƒ½å¯ä»¥é€šè¿‡ä¸­é—´ä»¶æ¥å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€å¯èƒ½ä½ è¿˜æƒ³åœ¨viewæ‰§è¡Œä¹‹å‰åšä¸€äº›æ“ä½œï¼Œè¿™ç§æƒ…å†µå°±å¯ä»¥ç”¨ middlewareæ¥å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€è¯´çš„ç›´ç™½ä¸€ç‚¹ä¸­é—´ä»¶æ˜¯å¸®åŠ©æˆ‘ä»¬åœ¨è§†å›¾å‡½æ•°æ‰§è¡Œä¹‹å‰å’Œæ‰§è¡Œä¹‹åéƒ½å¯ä»¥åšä¸€äº›é¢å¤–çš„æ“ä½œï¼Œå®ƒæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰ç±»ï¼Œç±»ä¸­å®šä¹‰äº†å‡ ä¸ªæ–¹æ³•ï¼ŒDjangoæ¡†æ¶ä¼šåœ¨è¯·æ±‚çš„ç‰¹å®šçš„æ—¶é—´å»æ‰§è¡Œè¿™äº›æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€æˆ‘ä»¬ä¸€ç›´éƒ½åœ¨ä½¿ç”¨ä¸­é—´ä»¶ï¼Œåªæ˜¯æ²¡æœ‰æ³¨æ„åˆ°è€Œå·²ï¼Œæ‰“å¼€Djangoé¡¹ç›®çš„Settings.pyæ–‡ä»¶ï¼Œçœ‹åˆ°ä¸‹é¢çš„MIDDLEWAREé…ç½®é¡¹ï¼Œdjangoé»˜è®¤è‡ªå¸¦çš„ä¸€äº›ä¸­é—´ä»¶ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€MIDDLEWAREé…ç½®é¡¹æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œåˆ—è¡¨ä¸­æ˜¯ä¸€ä¸ªä¸ªå­—ç¬¦ä¸²ï¼Œè¿™äº›å­—ç¬¦ä¸²å…¶å®æ˜¯ä¸€ä¸ªä¸ªç±»ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªä¸ªä¸­é—´ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€æˆ‘ä»¬ä¹‹å‰å·²ç»æ¥è§¦è¿‡ä¸€ä¸ªcsrfç›¸å…³çš„ä¸­é—´ä»¶äº†ï¼Ÿæˆ‘ä»¬ä¸€å¼€å§‹è®©å¤§å®¶æŠŠä»–æ³¨é‡Šæ‰ï¼Œå†æäº¤postè¯·æ±‚çš„æ—¶å€™ï¼Œå°±ä¸ä¼šè¢«forbiddenäº†ï¼Œåæ¥å­¦ä¼šä½¿ç”¨csrf_tokenä¹‹åå°±ä¸å†æ³¨é‡Šè¿™ä¸ªä¸­é—´ä»¶äº†ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€&lt;img src=&quot;https://img2018.cnblogs.com/blog/988061/201903/988061-20190307152249812-1922952163.png&quot; alt=&quot;img&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€é‚£æ¥ä¸‹æ¥å°±å­¦ä¹ ä¸­é—´ä»¶ä¸­çš„æ–¹æ³•ä»¥åŠè¿™äº›æ–¹æ³•ä»€ä¹ˆæ—¶å€™è¢«æ‰§è¡Œã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä¸‰-è‡ªå®šä¹‰ä¸­é—´ä»¶&quot;&gt;ä¸‰ è‡ªå®šä¹‰ä¸­é—´ä»¶&lt;/h2&gt;
&lt;p&gt;æƒ³å¤šäº†è§£ä¸­é—´ï¼Œåœ¨&lt;a href=&quot;https://my.oschina.net/zfschool/blog/789541&quot;&gt;å¼€æºä¸­å›½&lt;/a&gt;ä¸­æœ‰å¾ˆå¤šå…³äºä¸­é—´ä»¶çš„&lt;a href=&quot;https://my.oschina.net/liuyuantao/blog/756778&quot;&gt;è¯¦ç»†è§£é‡Š&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä¸­é—´ä»¶å¯ä»¥å®šä¹‰äº”ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ï¼šï¼ˆä¸»è¦çš„æ˜¯process_requestå’Œprocess_responseï¼‰&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;process_request(self,request)&lt;/li&gt;
&lt;li&gt;process_view(self, request, view_func, view_args, view_kwargs)&lt;/li&gt;
&lt;li&gt;process_template_response(self,request,response)&lt;/li&gt;
&lt;li&gt;process_exception(self, request, exception)&lt;/li&gt;
&lt;li&gt;process_response(self, request, response)&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ã€€ã€€ä»¥ä¸Šæ–¹æ³•çš„è¿”å›å€¼å¯ä»¥æ˜¯Noneæˆ–ä¸€ä¸ªHttpResponseå¯¹è±¡ï¼Œå¦‚æœæ˜¯Noneï¼Œåˆ™ç»§ç»­æŒ‰ç…§djangoå®šä¹‰çš„è§„åˆ™å‘åç»§ç»­æ‰§è¡Œï¼Œå¦‚æœæ˜¯HttpResponseå¯¹è±¡ï¼Œåˆ™ç›´æ¥å°†è¯¥å¯¹è±¡è¿”å›ç»™ç”¨æˆ·ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€å½“ç”¨æˆ·å‘èµ·è¯·æ±‚çš„æ—¶å€™ä¼šä¾æ¬¡ç»è¿‡æ‰€æœ‰çš„çš„ä¸­é—´ä»¶ï¼Œè¿™ä¸ªæ—¶å€™çš„è¯·æ±‚æ—¶process_request,æœ€ååˆ°è¾¾viewsçš„å‡½æ•°ä¸­ï¼Œviewså‡½æ•°å¤„ç†åï¼Œåœ¨ä¾æ¬¡ç©¿è¿‡ä¸­é—´ä»¶ï¼Œè¿™ä¸ªæ—¶å€™æ˜¯process_response,æœ€åè¿”å›ç»™è¯·æ±‚è€…ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€&lt;img src=&quot;https://images2017.cnblogs.com/blog/877318/201710/877318-20171012212952512-1143032176.png&quot; alt=&quot;img&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä¸Šè¿°æˆªå›¾ä¸­çš„ä¸­é—´ä»¶éƒ½æ˜¯djangoä¸­çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±å®šä¹‰ä¸€ä¸ªä¸­é—´ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±å†™ä¸€ä¸ªç±»ï¼Œä½†æ˜¯å¿…é¡»ç»§æ‰¿MiddlewareMixin&lt;/p&gt;
&lt;h3 id=&quot;è‡ªå®šä¹‰ä¸€ä¸ªä¸­é—´ä»¶ç¤ºä¾‹&quot;&gt;è‡ªå®šä¹‰ä¸€ä¸ªä¸­é—´ä»¶ç¤ºä¾‹&lt;/h3&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ç›®å½•ï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€åœ¨é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ªåŒ…ï¼Œéšä¾¿èµ·åå­—ï¼Œä¸€èˆ¬éƒ½æ”¾åœ¨ä¸€ä¸ªå«åšutilsçš„åŒ…é‡Œé¢ï¼Œè¡¨ç¤ºä¸€ä¸ªå…¬ç”¨çš„ç»„ä»¶ï¼Œåˆ›å»ºä¸€ä¸ªpyæ–‡ä»¶ï¼Œéšä¾¿èµ·åå­—ï¼Œä¾‹å¦‚å«åšï¼šmiddlewares.pyï¼Œå†…å®¹å¦‚ä¸‹&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;from django.utils.deprecation import MiddlewareMixin

class MD1(MiddlewareMixin):
    #è‡ªå®šä¹‰ä¸­é—´ä»¶ï¼Œä¸æ˜¯å¿…é¡»è¦æœ‰ä¸‹é¢è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œæœ‰requestæ–¹æ³•è¯´æ˜è¯·æ±‚æ¥äº†è¦å¤„ç†ï¼Œæœ‰responseæ–¹æ³•è¯´æ˜å“åº”å‡ºå»æ—¶éœ€è¦å¤„ç†ï¼Œä¸æ˜¯éè¦å†™è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œå¦‚æœä½ æ²¡å†™process_responseæ–¹æ³•ï¼Œé‚£ä¹ˆä¼šä¸€å±‚ä¸€å±‚çš„å¾€ä¸Šæ‰¾ï¼Œå“ªä¸ªä¸­é—´ä»¶æœ‰process_responseæ–¹æ³•å°±å°†è¿”å›å¯¹è±¡ç»™å“ªä¸ªä¸­é—´ä»¶
    def process_request(self, request):
        print(&quot;MD1é‡Œé¢çš„ process_request&quot;)

    def process_response(self, request, response):
        print(&quot;MD1é‡Œé¢çš„ process_response&quot;)
        return response&lt;/code&gt;
&lt;/pre&gt;

&lt;h3 id=&quot;process_request&quot;&gt;process_request&lt;/h3&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€process_requestæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯requestï¼Œè¿™ä¸ªrequestå’Œè§†å›¾å‡½æ•°ä¸­çš„requestæ˜¯ä¸€æ ·çš„ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€å®ƒçš„è¿”å›å€¼å¯ä»¥æ˜¯Noneä¹Ÿå¯ä»¥æ˜¯HttpResponseå¯¹è±¡ã€‚è¿”å›å€¼æ˜¯Noneçš„è¯ï¼ŒæŒ‰æ­£å¸¸æµç¨‹ç»§ç»­èµ°ï¼Œäº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶å¤„ç†ï¼Œå¦‚æœæ˜¯HttpResponseå¯¹è±¡ï¼ŒDjangoå°†ä¸æ‰§è¡Œè§†å›¾å‡½æ•°ï¼Œè€Œå°†ç›¸åº”å¯¹è±¡è¿”å›ç»™æµè§ˆå™¨ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€æˆ‘ä»¬æ¥çœ‹çœ‹å¤šä¸ªä¸­é—´ä»¶æ—¶ï¼ŒDjangoæ˜¯å¦‚ä½•æ‰§è¡Œå…¶ä¸­çš„process_requestæ–¹æ³•çš„ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;from django.utils.deprecation import MiddlewareMixin


class MD1(MiddlewareMixin):

    def process_request(self, request):
        print(&quot;MD1é‡Œé¢çš„ process_request&quot;)


class MD2(MiddlewareMixin):
    def process_request(self, request):
        print(&quot;MD2é‡Œé¢çš„ process_request&quot;)
        pass&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€åœ¨settings.pyçš„MIDDLEWAREé…ç½®é¡¹ä¸­æ³¨å†Œä¸Šè¿°ä¸¤ä¸ªè‡ªå®šä¹‰ä¸­é—´ä»¶ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
    'middlewares.MD1',  # è‡ªå®šä¹‰ä¸­é—´ä»¶MD1ï¼Œè¿™ä¸ªå†™çš„æ˜¯ä½ é¡¹ç›®è·¯å¾„ä¸‹çš„ä¸€ä¸ªè·¯å¾„ï¼Œä¾‹å¦‚ï¼Œå¦‚æœä½ æ”¾åœ¨é¡¹ç›®ä¸‹ï¼Œæ–‡ä»¶å¤¹åæˆä¸ºutilsï¼Œé‚£ä¹ˆè¿™é‡Œåº”è¯¥å†™utils.middlewares.MD1
    'middlewares.MD2'  # è‡ªå®šä¹‰ä¸­é—´ä»¶MD2
]&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€æ­¤æ—¶ï¼Œæˆ‘ä»¬è®¿é—®ä¸€ä¸ªè§†å›¾ï¼Œä¼šå‘ç°ç»ˆç«¯ä¸­æ‰“å°å¦‚ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;MD1é‡Œé¢çš„ process_request
MD2é‡Œé¢çš„ process_requestapp01 ä¸­çš„ indexè§†å›¾&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€æŠŠMD1å’ŒMD2çš„ä½ç½®è°ƒæ¢ä¸€ä¸‹ï¼Œå†è®¿é—®ä¸€ä¸ªè§†å›¾ï¼Œä¼šå‘ç°ç»ˆç«¯ä¸­æ‰“å°çš„å†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;MD2é‡Œé¢çš„ process_request
MD1é‡Œé¢çš„ process_requestapp01 ä¸­çš„ indexè§†å›¾&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€çœ‹ç»“æœæˆ‘ä»¬çŸ¥é“ï¼šè§†å›¾å‡½æ•°è¿˜æ˜¯æœ€åæ‰§è¡Œçš„ï¼ŒMD2æ¯”MD1å…ˆæ‰§è¡Œè‡ªå·±çš„process_requestæ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€åœ¨æ‰“å°ä¸€ä¸‹ä¸¤ä¸ªè‡ªå®šä¹‰ä¸­é—´ä»¶ä¸­process_requestæ–¹æ³•ä¸­çš„requestå‚æ•°ï¼Œä¼šå‘ç°å®ƒä»¬æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€ç”±æ­¤æ€»ç»“ä¸€ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ä¸­é—´ä»¶çš„process_requestæ–¹æ³•æ˜¯åœ¨æ‰§è¡Œè§†å›¾å‡½æ•°ä¹‹å‰æ‰§è¡Œçš„ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€å½“é…ç½®å¤šä¸ªä¸­é—´ä»¶æ—¶ï¼Œä¼šæŒ‰ç…§MIDDLEWAREä¸­çš„æ³¨å†Œé¡ºåºï¼Œä¹Ÿå°±æ˜¯åˆ—è¡¨çš„ç´¢å¼•å€¼ï¼Œä»å‰åˆ°åä¾æ¬¡æ‰§è¡Œçš„ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ä¸åŒä¸­é—´ä»¶ä¹‹é—´ä¼ é€’çš„requestéƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€å¤šä¸ªä¸­é—´ä»¶ä¸­çš„process_responseæ–¹æ³•æ˜¯æŒ‰ç…§MIDDLEWAREä¸­çš„æ³¨å†Œé¡ºåº&lt;strong&gt;å€’åº&lt;/strong&gt;æ‰§è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ç¬¬ä¸€ä¸ªä¸­é—´ä»¶çš„process_requestæ–¹æ³•é¦–å…ˆæ‰§è¡Œï¼Œè€Œå®ƒçš„process_responseæ–¹æ³•æœ€åæ‰§è¡Œï¼Œæœ€åä¸€ä¸ªä¸­é—´ä»¶çš„process_requestæ–¹æ³•æœ€åä¸€ä¸ªæ‰§è¡Œï¼Œå®ƒçš„process_responseæ–¹æ³•æ˜¯æœ€å…ˆæ‰§è¡Œã€‚&lt;/p&gt;
&lt;h3 id=&quot;process_response&quot;&gt;process_response&lt;/h3&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€å®ƒæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯requestï¼Œä¸€ä¸ªæ˜¯responseï¼Œrequestå°±æ˜¯ä¸Šè¿°ä¾‹å­ä¸­ä¸€æ ·çš„å¯¹è±¡ï¼Œresponseæ˜¯è§†å›¾å‡½æ•°è¿”å›çš„HttpResponseå¯¹è±¡ã€‚è¯¥æ–¹æ³•çš„è¿”å›å€¼ä¹Ÿå¿…é¡»æ˜¯HttpResponseå¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€ç»™ä¸Šè¿°çš„M1å’ŒM2åŠ ä¸Šprocess_responseæ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;from django.utils.deprecation import MiddlewareMixin


class MD1(MiddlewareMixin):

    def process_request(self, request):
        print(&quot;MD1é‡Œé¢çš„ process_request&quot;)
        #ä¸å¿…é¡»å†™returnå€¼
    def process_response(self, request, response):#requestå’Œresponseä¸¤ä¸ªå‚æ•°å¿…é¡»æœ‰ï¼Œåå­—éšä¾¿å–
        print(&quot;MD1é‡Œé¢çš„ process_response&quot;)        #print(response.__dict__['_container'][0].decode('utf-8')) #æŸ¥çœ‹å“åº”ä½“é‡Œé¢çš„å†…å®¹çš„æ–¹æ³•ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨response.contentä¹Ÿå¯ä»¥çœ‹åˆ°å“åº”ä½“é‡Œé¢çš„å†…å®¹ï¼Œç”±äºresponseæ˜¯ä¸ªå˜é‡ï¼Œç›´æ¥ç‚¹å‡»çœ‹æºç æ˜¯çœ‹ä¸åˆ°çš„ï¼Œä½ æ‰“å°type(response)å‘ç°æ˜¯HttpResponseå¯¹è±¡ï¼ŒæŸ¥çœ‹è¿™ä¸ªå¯¹è±¡çš„æºç å°±çŸ¥é“æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥ç”¨äº†ã€‚
ã€€ã€€ã€€ã€€ return response  #å¿…é¡»æœ‰è¿”å›å€¼ï¼Œå†™return response  ï¼Œè¿™ä¸ªresponseå°±åƒä¸€ä¸ªæ¥åŠ›æ£’ä¸€æ ·
        #return HttpResponse('çæ') ,å¦‚æœä½ å†™äº†è¿™ä¸ªï¼Œé‚£ä¹ˆä½ è§†å›¾è¿”å›è¿‡æ¥çš„å†…å®¹å°±è¢«å®ƒç»™æ›¿ä»£äº†

class MD2(MiddlewareMixin):
    def process_request(self, request):
        print(&quot;MD2é‡Œé¢çš„ process_request&quot;)
        pass

    def process_response(self, request, response): #requestå’Œresponseä¸¤ä¸ªå‚æ•°å¿…é¡»è¦æœ‰ï¼Œåå­—éšä¾¿å–
        print(&quot;MD2é‡Œé¢çš„ process_response&quot;) 
        return response  #å¿…é¡»è¿”å›responseï¼Œä¸ç„¶ä½ ä¸Šå±‚çš„ä¸­é—´ä»¶å°±æ²¡æœ‰æ‹¿åˆ°httpresponseå¯¹è±¡ï¼Œå°±ä¼šæŠ¥é”™&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€è®¿é—®ä¸€ä¸ªè§†å›¾ï¼Œçœ‹ä¸€ä¸‹ç»ˆç«¯çš„è¾“å‡ºï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;MD2é‡Œé¢çš„ process_request
MD1é‡Œé¢çš„ process_request
app01 ä¸­çš„ indexè§†å›¾
MD1é‡Œé¢çš„ process_response
MD2é‡Œé¢çš„ process_response&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€çœ‹ç»“æœå¯çŸ¥ï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€process_responseæ–¹æ³•æ˜¯åœ¨è§†å›¾å‡½æ•°ä¹‹åæ‰§è¡Œçš„ï¼Œå¹¶ä¸”é¡ºåºæ˜¯MD1æ¯”MD2å…ˆæ‰§è¡Œã€‚(æ­¤æ—¶settings.pyä¸­ MD2æ¯”MD1å…ˆæ³¨å†Œ)&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€å¤šä¸ªä¸­é—´ä»¶ä¸­çš„process_responseæ–¹æ³•æ˜¯æŒ‰ç…§MIDDLEWAREä¸­çš„æ³¨å†Œé¡ºåº&lt;strong&gt;å€’åº&lt;/strong&gt;æ‰§è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ç¬¬ä¸€ä¸ªä¸­é—´ä»¶çš„process_requestæ–¹æ³•é¦–å…ˆæ‰§è¡Œï¼Œè€Œå®ƒçš„process_responseæ–¹æ³•æœ€åæ‰§è¡Œï¼Œæœ€åä¸€ä¸ªä¸­é—´ä»¶çš„process_requestæ–¹æ³•æœ€åä¸€ä¸ªæ‰§è¡Œï¼Œå®ƒçš„process_responseæ–¹æ³•æ˜¯æœ€å…ˆæ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€å†çœ‹ä¸€ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;from django.utils.deprecation import MiddlewareMixin
from django.shortcuts import HttpResponse

class Md1(MiddlewareMixin):

    def process_request(self,request):
        print(&quot;Md1è¯·æ±‚&quot;)ã€€ã€€ã€€ã€€ #process_requestæ–¹æ³•é‡Œé¢ä¸å†™è¿”å›å€¼ï¼Œé»˜è®¤ä¹Ÿæ˜¯è¿”å›Noneï¼Œå¦‚æœä½ è‡ªå·±å†™äº†return Noneï¼Œä¹Ÿæ˜¯ä¸€æ ·çš„æ•ˆæœï¼Œä¸ä¼šä¸­æ–­ä½ çš„è¯·æ±‚ï¼Œä½†æ˜¯å¦‚æœä½ return çš„ä¸€ä¸ªhttpresponseå¯¹è±¡ï¼Œé‚£ä¹ˆå°±ä¼šåœ¨è¿™ä¸ªæ–¹æ³•ä¸­æ–­ä½ çš„è¯·æ±‚ï¼Œç›´æ¥è¿”å›ç»™ç”¨æˆ·ï¼Œè¿™å°±æˆäº†éæ­£å¸¸çš„æµç¨‹äº†        #å¹¶ä¸”ï¼Œå¦‚æœä½ åœ¨è¿™é‡Œreturnäº†httpresponseå¯¹è±¡ï¼Œé‚£ä¹ˆä¼šä»ä½ è¿™ä¸ªä¸­é—´ä»¶ç±»ä¸­çš„process_responseæ–¹æ³•å¼€å§‹æ‰§è¡Œè¿”å›æ“ä½œï¼Œæ‰€ä»¥è¿™ä¸ªç±»é‡Œé¢åªè¦æœ‰process_responseæ–¹æ³•ï¼Œè‚¯å®šä¼šæ‰§è¡Œ
 
    def process_response(self,request,response):
        print(&quot;Md1è¿”å›&quot;)
        return response

class Md2(MiddlewareMixin):

    def process_request(self,request):
        print(&quot;Md2è¯·æ±‚&quot;)
        #return HttpResponse(&quot;Md2ä¸­æ–­&quot;)
    def process_response(self,request,response):
        print(&quot;Md2è¿”å›&quot;)
        return response&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€&lt;strong&gt;ç»“æœï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Md1è¯·æ±‚
Md2è¯·æ±‚
viewå‡½æ•°...
Md2è¿”å›
Md1è¿”å›&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€&lt;strong&gt;æ³¨æ„ï¼š&lt;/strong&gt;å¦‚æœå½“è¯·æ±‚åˆ°è¾¾è¯·æ±‚2çš„æ—¶å€™ç›´æ¥ä¸ç¬¦åˆæ¡ä»¶è¿”å›ï¼Œå³&lt;strong&gt;return HttpResponse(&quot;Md2ä¸­æ–­&quot;)&lt;/strong&gt;ï¼Œç¨‹åºå°†æŠŠè¯·æ±‚ç›´æ¥å‘ç»™ä¸­é—´ä»¶2è¿”å›ï¼Œç„¶åä¾æ¬¡è¿”å›åˆ°è¯·æ±‚è€…ï¼Œç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€è¿”å›Md2ä¸­æ–­çš„é¡µé¢ï¼Œåå°æ‰“å°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Md1è¯·æ±‚
Md2è¯·æ±‚
Md2è¿”å›
Md1è¿”å›&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€&lt;strong&gt;æµç¨‹å›¾å¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€&lt;img src=&quot;https://images2018.cnblogs.com/blog/877318/201805/877318-20180523153139864-2049371026.png&quot; alt=&quot;img&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ä¹‹å‰æˆ‘ä»¬åšçš„cookieè®¤è¯ï¼Œéƒ½æ˜¯é€šè¿‡åœ¨å‡½æ•°ä¸Šé¢åŠ è£…é¥°å™¨æçš„ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œçœ‹çœ‹ä¸­é—´ä»¶æ€ä¹ˆæï¼Œå¦‚æœå†™çš„æ˜¯sessionè®¤è¯çš„ï¼Œä½ å¿…é¡»æ”¾åœ¨djangoè‡ªå¸¦çš„sessionä¸­é—´ä»¶çš„ä¸‹é¢ï¼Œæ‰€ä»¥è‡ªå®šä¹‰ä¸­é—´ä¹‹åï¼Œä½ éœ€è¦æ³¨æ„ä½ çš„ä¸­é—´ä»¶çš„æ‘†æ”¾é¡ºåºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;class M1(MiddlewareMixin):

    def process_request(self,request):

        #è®¾ç½®è·¯å¾„ç™½åå•ï¼Œåªè¦è®¿é—®çš„æ˜¯loginç™»é™†è·¯å¾„ï¼Œå°±ä¸åšè¿™ä¸ªcookieè®¤è¯
        if request.path not in [reverse('login'),]:
            print('æˆ‘æ˜¯M1ä¸­é—´ä»¶') #å®¢æˆ·ç«¯IPåœ°å€
            # return HttpResponse('sorry,æ²¡æœ‰é€šè¿‡æˆ‘çš„M1ä¸­é—´ä»¶')
            is_login = request.COOKIES.get('is_login', False)

            if is_login:
                pass
            else:
                # return render(request,'login.html')
                return redirect(reverse('login'))
        else:
            return None #åˆ«å¿˜äº†return Noneï¼Œæˆ–è€…ç›´æ¥å†™ä¸ªpass

    def process_response(self,request,response):

        print('M1å“åº”éƒ¨åˆ†')
        # print(response.__dict__['_container'][0].decode('utf-8'))
        return response
        # return HttpResponse('çæ')&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€ç»ƒä¹ ï¼šå°è¯•ä¸€ä¸‹é€šè¿‡ä¸­é—´ä»¶æ¥æ§åˆ¶ç”¨æˆ·çš„è®¿é—®æ¬¡æ•°ï¼Œè®©ç”¨æˆ·åœ¨ä¸€åˆ†é’Ÿä¹‹å†…ä¸èƒ½è®¿é—®æˆ‘çš„ç½‘ç«™è¶…è¿‡20æ¬¡ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€åé¢è¦å­¦çš„æ–¹æ³•ä¸å¸¸ç”¨ï¼Œä½†æ˜¯å¤§å®¶æœ€å¥½ä¹Ÿè¦çŸ¥é“ã€‚&lt;/p&gt;
&lt;h3 id=&quot;process_view&quot;&gt;process_view&lt;/h3&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€process_view(self, request, view_func, view_args, view_kwargs)&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€è¯¥æ–¹æ³•æœ‰å››ä¸ªå‚æ•°&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€requestæ˜¯HttpRequestå¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€view_funcæ˜¯Djangoå³å°†ä½¿ç”¨çš„è§†å›¾å‡½æ•°ã€‚ ï¼ˆå®ƒæ˜¯å®é™…çš„å‡½æ•°å¯¹è±¡ï¼Œè€Œä¸æ˜¯å‡½æ•°çš„åç§°ä½œä¸ºå­—ç¬¦ä¸²ã€‚ï¼‰&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€view_argsæ˜¯å°†ä¼ é€’ç»™è§†å›¾çš„ä½ç½®å‚æ•°çš„åˆ—è¡¨.&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€view_kwargsæ˜¯å°†ä¼ é€’ç»™è§†å›¾çš„å…³é”®å­—å‚æ•°çš„å­—å…¸ã€‚ view_argså’Œview_kwargséƒ½ä¸åŒ…å«ç¬¬ä¸€ä¸ªè§†å›¾å‚æ•°ï¼ˆrequestï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€Djangoä¼šåœ¨è°ƒç”¨è§†å›¾å‡½æ•°ä¹‹å‰è°ƒç”¨process_viewæ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€å®ƒåº”è¯¥è¿”å›Noneæˆ–ä¸€ä¸ªHttpResponseå¯¹è±¡ã€‚ å¦‚æœè¿”å›Noneï¼ŒDjangoå°†ç»§ç»­å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œæ‰§è¡Œä»»ä½•å…¶ä»–ä¸­é—´ä»¶çš„process_viewæ–¹æ³•ï¼Œç„¶ååœ¨æ‰§è¡Œç›¸åº”çš„è§†å›¾ã€‚ å¦‚æœå®ƒè¿”å›ä¸€ä¸ªHttpResponseå¯¹è±¡ï¼ŒDjangoä¸ä¼šè°ƒç”¨å¯¹åº”çš„è§†å›¾å‡½æ•°ã€‚ å®ƒå°†æ‰§è¡Œä¸­é—´ä»¶çš„process_responseæ–¹æ³•å¹¶å°†åº”ç”¨åˆ°è¯¥HttpResponseå¹¶è¿”å›ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€&lt;img src=&quot;https://images2018.cnblogs.com/blog/877318/201805/877318-20180523150722556-373788290.png&quot; alt=&quot;img&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€ç»™MD1å’ŒMD2æ·»åŠ process_viewæ–¹æ³•:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;from django.utils.deprecation import MiddlewareMixin


class MD1(MiddlewareMixin):

    def process_request(self, request):
        print(&quot;MD1é‡Œé¢çš„ process_request&quot;)

    def process_response(self, request, response):
        print(&quot;MD1é‡Œé¢çš„ process_response&quot;)
        return response

    def process_view(self, request, view_func, view_args, view_kwargs):
        print(&quot;-&quot; * 80)
        print(&quot;MD1 ä¸­çš„process_view&quot;)
        print(view_func, view_func.__name__) #å°±æ˜¯urlæ˜ å°„åˆ°çš„é‚£ä¸ªè§†å›¾å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªä¸­é—´ä»¶çš„è¿™ä¸ªprocess_viewå·²ç»æå‰æ‹¿åˆ°äº†è¦æ‰§è¡Œçš„é‚£ä¸ªè§†å›¾å‡½æ•°        #ret = view_func(request) #æå‰æ‰§è¡Œè§†å›¾å‡½æ•°ï¼Œä¸ç”¨åˆ°äº†ä¸Šå›¾çš„è¯•å›¾å‡½æ•°çš„ä½ç½®å†æ‰§è¡Œï¼Œå¦‚æœä½ è§†å›¾å‡½æ•°æœ‰å‚æ•°çš„è¯ï¼Œå¯ä»¥è¿™ä¹ˆå†™ view_func(request,view_args,view_kwargs) 
        #return ret  #ç›´æ¥å°±åœ¨MD1ä¸­é—´ä»¶è¿™é‡Œè¿™ä¸ªç±»çš„process_responseç»™è¿”å›äº†ï¼Œå°±ä¸ä¼šå»æ‰¾åˆ°è§†å›¾å‡½æ•°é‡Œé¢çš„è¿™ä¸ªå‡½æ•°å»æ‰§è¡Œäº†ã€‚

class MD2(MiddlewareMixin):
    def process_request(self, request):
        print(&quot;MD2é‡Œé¢çš„ process_request&quot;)
        pass

    def process_response(self, request, response):
        print(&quot;MD2é‡Œé¢çš„ process_response&quot;)
        return response

    def process_view(self, request, view_func, view_args, view_kwargs):
        print(&quot;-&quot; * 80)
        print(&quot;MD2 ä¸­çš„process_view&quot;)
        print(view_func, view_func.__name__)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€è®¿é—®indexè§†å›¾å‡½æ•°ï¼Œçœ‹ä¸€ä¸‹è¾“å‡ºç»“æœï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;MD2é‡Œé¢çš„ process_request
MD1é‡Œé¢çš„ process_request
--------------------------------------------------------------------------------
MD2 ä¸­çš„process_view
&amp;lt;function index at 0x000001DE68317488&amp;gt; index
--------------------------------------------------------------------------------
MD1 ä¸­çš„process_view
&amp;lt;function index at 0x000001DE68317488&amp;gt; index
app01 ä¸­çš„ indexè§†å›¾
MD1é‡Œé¢çš„ process_response
MD2é‡Œé¢çš„ process_response&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€process_viewæ–¹æ³•æ˜¯åœ¨process_requestä¹‹åï¼Œreprocess_responseä¹‹å‰ï¼Œè§†å›¾å‡½æ•°ä¹‹å‰æ‰§è¡Œçš„ï¼Œæ‰§è¡Œé¡ºåºæŒ‰ç…§MIDDLEWAREä¸­çš„æ³¨å†Œé¡ºåº&lt;strong&gt;ä»å‰åˆ°åé¡ºåº&lt;/strong&gt;æ‰§è¡Œçš„&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ ã€€ã€€&lt;img src=&quot;https://img2018.cnblogs.com/blog/988061/201903/988061-20190307175159136-388101846.png&quot; alt=&quot;img&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;process_exception&quot;&gt;process_exception&lt;/h3&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€process_exception(self, request, exception)&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€è¯¥æ–¹æ³•ä¸¤ä¸ªå‚æ•°:&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€ä¸€ä¸ªHttpRequestå¯¹è±¡&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€ä¸€ä¸ªexceptionæ˜¯è§†å›¾å‡½æ•°å¼‚å¸¸äº§ç”Ÿçš„Exceptionå¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€è¿™ä¸ªæ–¹æ³•åªæœ‰åœ¨è§†å›¾å‡½æ•°ä¸­å‡ºç°å¼‚å¸¸äº†æ‰æ‰§è¡Œï¼Œå®ƒè¿”å›çš„å€¼å¯ä»¥æ˜¯ä¸€ä¸ªNoneä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªHttpResponseå¯¹è±¡ã€‚å¦‚æœæ˜¯HttpResponseå¯¹è±¡ï¼ŒDjangoå°†è°ƒç”¨æ¨¡æ¿å’Œä¸­é—´ä»¶ä¸­çš„process_responseæ–¹æ³•ï¼Œå¹¶è¿”å›ç»™æµè§ˆå™¨ï¼Œå¦åˆ™å°†é»˜è®¤å¤„ç†å¼‚å¸¸ã€‚å¦‚æœè¿”å›ä¸€ä¸ªNoneï¼Œåˆ™äº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶çš„process_exceptionæ–¹æ³•æ¥å¤„ç†å¼‚å¸¸ã€‚å®ƒçš„æ‰§è¡Œé¡ºåºä¹Ÿæ˜¯æŒ‰ç…§ä¸­é—´ä»¶æ³¨å†Œé¡ºåºçš„å€’åºæ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€&lt;img src=&quot;https://images2018.cnblogs.com/blog/877318/201805/877318-20180523152523125-1475347796.png&quot; alt=&quot;img&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€ç»™MD1å’ŒMD2æ·»åŠ ä¸Šè¿™ä¸ªæ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;from django.utils.deprecation import MiddlewareMixin


class MD1(MiddlewareMixin):

    def process_request(self, request):
        print(&quot;MD1é‡Œé¢çš„ process_request&quot;)

    def process_response(self, request, response):
        print(&quot;MD1é‡Œé¢çš„ process_response&quot;)
        return response

    def process_view(self, request, view_func, view_args, view_kwargs):
        print(&quot;-&quot; * 80)
        print(&quot;MD1 ä¸­çš„process_view&quot;)
        print(view_func, view_func.__name__)

    def process_exception(self, request, exception):
        print(exception)
        print(&quot;MD1 ä¸­çš„process_exception&quot;)


class MD2(MiddlewareMixin):
    def process_request(self, request):
        print(&quot;MD2é‡Œé¢çš„ process_request&quot;)
        pass

    def process_response(self, request, response):
        print(&quot;MD2é‡Œé¢çš„ process_response&quot;)
        return response

    def process_view(self, request, view_func, view_args, view_kwargs):
        print(&quot;-&quot; * 80)
        print(&quot;MD2 ä¸­çš„process_view&quot;)
        print(view_func, view_func.__name__)

    def process_exception(self, request, exception):
        print(exception)
        print(&quot;MD2 ä¸­çš„process_exception&quot;)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€å¦‚æœè§†å›¾å‡½æ•°ä¸­æ— å¼‚å¸¸ï¼Œprocess_exceptionæ–¹æ³•ä¸æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€æƒ³åŠæ³•ï¼Œåœ¨è§†å›¾å‡½æ•°ä¸­æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;def index(request):
    print(&quot;app01 ä¸­çš„ indexè§†å›¾&quot;)
    raise ValueError(&quot;å‘µå‘µ&quot;)
    return HttpResponse(&quot;O98K&quot;)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€åœ¨MD1çš„process_exceptionä¸­è¿”å›ä¸€ä¸ªå“åº”å¯¹è±¡ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;class MD1(MiddlewareMixin):

    def process_request(self, request):
        print(&quot;MD1é‡Œé¢çš„ process_request&quot;)

    def process_response(self, request, response):
        print(&quot;MD1é‡Œé¢çš„ process_response&quot;)
        return response

    def process_view(self, request, view_func, view_args, view_kwargs):
        print(&quot;-&quot; * 80)
        print(&quot;MD1 ä¸­çš„process_view&quot;)
        print(view_func, view_func.__name__)

    def process_exception(self, request, exception):
        print(exception)
        print(&quot;MD1 ä¸­çš„process_exception&quot;)
        return HttpResponse(str(exception))  # è¿”å›ä¸€ä¸ªå“åº”å¯¹è±¡&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€çœ‹è¾“å‡ºç»“æœï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;MD2é‡Œé¢çš„ process_request
MD1é‡Œé¢çš„ process_request
--------------------------------------------------------------------------------
MD2 ä¸­çš„process_view
&amp;lt;function index at 0x0000022C09727488&amp;gt; index
--------------------------------------------------------------------------------
MD1 ä¸­çš„process_view
&amp;lt;function index at 0x0000022C09727488&amp;gt; index
app01 ä¸­çš„ indexè§†å›¾
å‘µå‘µ
MD1 ä¸­çš„process_exception
MD1é‡Œé¢çš„ process_response
MD2é‡Œé¢çš„ process_response&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€&lt;img src=&quot;https://img2018.cnblogs.com/blog/988061/201903/988061-20190307234702348-264207907.png&quot; alt=&quot;img&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€æ³¨æ„ï¼Œè¿™é‡Œå¹¶æ²¡æœ‰æ‰§è¡ŒMD2çš„process_exceptionæ–¹æ³•ï¼Œå› ä¸ºMD1ä¸­çš„process_exceptionæ–¹æ³•ç›´æ¥è¿”å›äº†ä¸€ä¸ªå“åº”å¯¹è±¡ã€‚&lt;/p&gt;
&lt;h3 id=&quot;process_template_responseç”¨çš„æ¯”è¾ƒå°‘&quot;&gt;&lt;strong&gt;process_template_responseï¼ˆç”¨çš„æ¯”è¾ƒå°‘ï¼‰&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€process_template_response(self, request, response)&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€å®ƒçš„å‚æ•°ï¼Œä¸€ä¸ªHttpRequestå¯¹è±¡ï¼Œresponseæ˜¯TemplateResponseå¯¹è±¡ï¼ˆç”±è§†å›¾å‡½æ•°æˆ–è€…ä¸­é—´ä»¶äº§ç”Ÿï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€process_template_responseæ˜¯åœ¨è§†å›¾å‡½æ•°æ‰§è¡Œå®Œæˆåç«‹å³æ‰§è¡Œï¼Œä½†æ˜¯å®ƒæœ‰ä¸€ä¸ªå‰ææ¡ä»¶ï¼Œé‚£å°±æ˜¯è§†å›¾å‡½æ•°è¿”å›çš„å¯¹è±¡æœ‰ä¸€ä¸ªrender()æ–¹æ³•ï¼ˆæˆ–è€…è¡¨æ˜è¯¥å¯¹è±¡æ˜¯ä¸€ä¸ªTemplateResponseå¯¹è±¡æˆ–ç­‰ä»·æ–¹æ³•ï¼‰ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;class MD1(MiddlewareMixin):

    def process_request(self, request):
        print(&quot;MD1é‡Œé¢çš„ process_request&quot;)

    def process_response(self, request, response):
        print(&quot;MD1é‡Œé¢çš„ process_response&quot;)
        return response

    def process_view(self, request, view_func, view_args, view_kwargs):
        print(&quot;-&quot; * 80)
        print(&quot;MD1 ä¸­çš„process_view&quot;)
        print(view_func, view_func.__name__)

    def process_exception(self, request, exception):
        print(exception)
        print(&quot;MD1 ä¸­çš„process_exception&quot;)
        return HttpResponse(str(exception))

    def process_template_response(self, request, response):
        print(&quot;MD1 ä¸­çš„process_template_response&quot;)
        return response


class MD2(MiddlewareMixin):
    def process_request(self, request):
        print(&quot;MD2é‡Œé¢çš„ process_request&quot;)
        pass

    def process_response(self, request, response):
        print(&quot;MD2é‡Œé¢çš„ process_response&quot;)
        return response

    def process_view(self, request, view_func, view_args, view_kwargs):
        print(&quot;-&quot; * 80)
        print(&quot;MD2 ä¸­çš„process_view&quot;)
        print(view_func, view_func.__name__)

    def process_exception(self, request, exception):
        print(exception)
        print(&quot;MD2 ä¸­çš„process_exception&quot;)

    def process_template_response(self, request, response):
        print(&quot;MD2 ä¸­çš„process_template_response&quot;)
        return response&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€views.pyä¸­ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;def index(request):
    print(&quot;app01 ä¸­çš„ indexè§†å›¾&quot;)
ã€€ã€€#raise ValueError('å‡ºé”™å•¦') 
    def render():
        print(&quot;in index/render&quot;)          #raise ValueError('å‡ºé”™å•¦') #è‡³äºrenderå‡½æ•°ä¸­æŠ¥é”™äº†ï¼Œé‚£ä¹ˆä¼šå…ˆæ‰§è¡Œprocess_template_responseæ–¹æ³•ï¼Œç„¶åæ‰§è¡Œprocess_exceptionæ–¹æ³•ï¼Œå¦‚æœæ˜¯åœ¨renderæ–¹æ³•å¤–é¢æŠ¥é”™äº†ï¼Œé‚£ä¹ˆå°±ä¸ä¼šæ‰§è¡Œè¿™ä¸ªprocess_template_responseæ–¹æ³•äº†ã€‚
        return HttpResponse(&quot;O98K&quot;) #è¿”å›çš„å°†æ˜¯è¿™ä¸ªæ–°çš„å¯¹è±¡
    rep = HttpResponse(&quot;OK&quot;)
    rep.render = render
    return rep&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€è®¿é—®indexè§†å›¾ï¼Œç»ˆç«¯è¾“å‡ºçš„ç»“æœï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;MD2é‡Œé¢çš„ process_request
MD1é‡Œé¢çš„ process_request
--------------------------------------------------------------------------------
MD2 ä¸­çš„process_view
&amp;lt;function index at 0x000001C111B97488&amp;gt; index
--------------------------------------------------------------------------------
MD1 ä¸­çš„process_view
&amp;lt;function index at 0x000001C111B97488&amp;gt; index
app01 ä¸­çš„ indexè§†å›¾
MD2 ä¸­çš„process_template_response
MD1 ä¸­çš„process_template_response
in index/render
MD1é‡Œé¢çš„ process_response
MD2é‡Œé¢çš„ process_response&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€ä»ç»“æœçœ‹å‡ºï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€è§†å›¾å‡½æ•°æ‰§è¡Œå®Œä¹‹åï¼Œç«‹å³æ‰§è¡Œäº†ä¸­é—´ä»¶çš„process_template_responseæ–¹æ³•ï¼Œé¡ºåºæ˜¯å€’åºï¼Œå…ˆæ‰§è¡ŒMD2çš„ï¼Œåœ¨æ‰§è¡ŒMD1çš„ï¼Œæ¥ç€æ‰§è¡Œäº†è§†å›¾å‡½æ•°è¿”å›çš„HttpResponseå¯¹è±¡çš„renderæ–¹æ³•ï¼Œè¿”å›äº†ä¸€ä¸ªæ–°çš„HttpResponseå¯¹è±¡ï¼Œæ¥ç€æ‰§è¡Œä¸­é—´ä»¶çš„process_responseæ–¹æ³•ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å››-ä¸­é—´ä»¶æ‰§è¡Œæµç¨‹&quot;&gt;å›› ä¸­é—´ä»¶æ‰§è¡Œæµç¨‹&lt;/h2&gt;
&lt;p&gt;ã€€ã€€ä¸Šä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬äº†è§£äº†ä¸­é—´ä»¶ä¸­çš„5ä¸ªæ–¹æ³•ï¼Œå®ƒä»¬çš„å‚æ•°ã€è¿”å›å€¼ä»¥åŠä»€ä¹ˆæ—¶å€™æ‰§è¡Œï¼Œç°åœ¨æ€»ç»“ä¸€ä¸‹ä¸­é—´ä»¶çš„æ‰§è¡Œæµç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€è¯·æ±‚åˆ°è¾¾ä¸­é—´ä»¶ä¹‹åï¼Œå…ˆæŒ‰ç…§æ­£åºæ‰§è¡Œæ¯ä¸ªæ³¨å†Œä¸­é—´ä»¶çš„process_requesæ–¹æ³•ï¼Œprocess_requestæ–¹æ³•è¿”å›çš„å€¼æ˜¯Noneï¼Œå°±ä¾æ¬¡æ‰§è¡Œï¼Œå¦‚æœè¿”å›çš„å€¼æ˜¯HttpResponseå¯¹è±¡ï¼Œä¸å†æ‰§è¡Œåé¢çš„process_requestæ–¹æ³•ï¼Œè€Œæ˜¯æ‰§è¡Œå½“å‰å¯¹åº”ä¸­é—´ä»¶çš„process_responseæ–¹æ³•ï¼Œå°†HttpResponseå¯¹è±¡è¿”å›ç»™æµè§ˆå™¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šå¦‚æœMIDDLEWAREä¸­æ³¨å†Œäº†6ä¸ªä¸­é—´ä»¶ï¼Œæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç¬¬3ä¸ªä¸­é—´ä»¶è¿”å›äº†ä¸€ä¸ªHttpResponseå¯¹è±¡ï¼Œé‚£ä¹ˆç¬¬4,5,6ä¸­é—´ä»¶çš„process_requestå’Œprocess_responseæ–¹æ³•éƒ½ä¸æ‰§è¡Œï¼Œé¡ºåºæ‰§è¡Œ3,2,1ä¸­é—´ä»¶çš„process_responseæ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€&lt;img src=&quot;https://images2018.cnblogs.com/blog/867021/201804/867021-20180409214209079-1725524152.png&quot; alt=&quot;img&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€process_requestæ–¹æ³•éƒ½æ‰§è¡Œå®Œåï¼ŒåŒ¹é…è·¯ç”±ï¼Œæ‰¾åˆ°è¦æ‰§è¡Œçš„è§†å›¾å‡½æ•°ï¼Œå…ˆä¸æ‰§è¡Œè§†å›¾å‡½æ•°ï¼Œå…ˆæ‰§è¡Œä¸­é—´ä»¶ä¸­çš„process_viewæ–¹æ³•ï¼Œprocess_viewæ–¹æ³•è¿”å›Noneï¼Œç»§ç»­æŒ‰é¡ºåºæ‰§è¡Œï¼Œæ‰€æœ‰process_viewæ–¹æ³•æ‰§è¡Œå®Œåæ‰§è¡Œè§†å›¾å‡½æ•°ã€‚åŠ å…¥ä¸­é—´ä»¶3 çš„process_viewæ–¹æ³•è¿”å›äº†HttpResponseå¯¹è±¡ï¼Œåˆ™4,5,6çš„process_viewä»¥åŠè§†å›¾å‡½æ•°éƒ½ä¸æ‰§è¡Œï¼Œç›´æ¥ä»æœ€åä¸€ä¸ªä¸­é—´ä»¶ï¼Œä¹Ÿå°±æ˜¯ä¸­é—´ä»¶6çš„process_responseæ–¹æ³•å¼€å§‹å€’åºæ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€&lt;img src=&quot;https://images2018.cnblogs.com/blog/867021/201804/867021-20180409214307195-1684061444.png&quot; alt=&quot;img&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€process_template_responseå’Œprocess_exceptionä¸¤ä¸ªæ–¹æ³•çš„è§¦å‘æ˜¯æœ‰æ¡ä»¶çš„ï¼Œæ‰§è¡Œé¡ºåºä¹Ÿæ˜¯å€’åºã€‚æ€»ç»“æ‰€æœ‰çš„æ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€&lt;img src=&quot;https://images2018.cnblogs.com/blog/867021/201804/867021-20180409214356226-286908304.png&quot; alt=&quot;img&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€&lt;img src=&quot;https://images2018.cnblogs.com/blog/867021/201804/867021-20180409214433968-2137571775.png&quot; alt=&quot;img&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;äº”-ä¸­é—´ä»¶ç‰ˆç™»é™†è®¤è¯&quot;&gt;äº” ä¸­é—´ä»¶ç‰ˆç™»é™†è®¤è¯&lt;/h2&gt;
&lt;p&gt;ä¸­é—´ä»¶ç‰ˆçš„ç™»å½•éªŒè¯éœ€è¦ä¾é sessionï¼Œæ‰€ä»¥æ•°æ®åº“ä¸­è¦æœ‰django_sessionè¡¨ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€urls.py&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;from django.conf.urls import url
from app01 import views

urlpatterns = [
    url(r'^index/$', views.index),
    url(r'^login/$', views.login, name='login'),
]&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€views.py&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;from django.shortcuts import render, HttpResponse, redirect


def index(request):
    return HttpResponse('this is index')


def home(request):
    return HttpResponse('this is home')


def login(request):
    if request.method == &quot;POST&quot;:
        user = request.POST.get(&quot;user&quot;)
        pwd = request.POST.get(&quot;pwd&quot;)

        if user == &quot;Q1mi&quot; and pwd == &quot;123456&quot;:
            # è®¾ç½®session
            request.session[&quot;user&quot;] = user
            # è·å–è·³åˆ°ç™»é™†é¡µé¢ä¹‹å‰çš„URL
            next_url = request.GET.get(&quot;next&quot;)
            # å¦‚æœæœ‰ï¼Œå°±è·³è½¬å›ç™»é™†ä¹‹å‰çš„URL
            if next_url:
                return redirect(next_url)
            # å¦åˆ™é»˜è®¤è·³è½¬åˆ°indexé¡µé¢
            else:
                return redirect(&quot;/index/&quot;)
    return render(request, &quot;login.html&quot;)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€login.html&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html lang=&quot;en&quot;&amp;gt;
&amp;lt;head&amp;gt;
    &amp;lt;meta charset=&quot;UTF-8&quot;&amp;gt;
    &amp;lt;meta http-equiv=&quot;x-ua-compatible&quot; content=&quot;IE=edge&quot;&amp;gt;
    &amp;lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&amp;gt;
    &amp;lt;title&amp;gt;ç™»å½•é¡µé¢&amp;lt;/title&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
&amp;lt;form action=&quot;{% url 'login' %}&quot;&amp;gt;
    &amp;lt;p&amp;gt;
        &amp;lt;label for=&quot;user&quot;&amp;gt;ç”¨æˆ·åï¼š&amp;lt;/label&amp;gt;
        &amp;lt;input type=&quot;text&quot; name=&quot;user&quot; id=&quot;user&quot;&amp;gt;
    &amp;lt;/p&amp;gt;
    &amp;lt;p&amp;gt;
        &amp;lt;label for=&quot;pwd&quot;&amp;gt;å¯† ç ï¼š&amp;lt;/label&amp;gt;
        &amp;lt;input type=&quot;text&quot; name=&quot;pwd&quot; id=&quot;pwd&quot;&amp;gt;
    &amp;lt;/p&amp;gt;
    &amp;lt;input type=&quot;submit&quot; value=&quot;ç™»å½•&quot;&amp;gt;
&amp;lt;/form&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€middlewares.py&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;class AuthMD(MiddlewareMixin):
    white_list = ['/login/', ]  # ç™½åå•
    balck_list = ['/black/', ]  # é»‘åå•

    def process_request(self, request):
        from django.shortcuts import redirect, HttpResponse

        next_url = request.path_info
        print(request.path_info, request.get_full_path())

        if next_url in self.white_list or request.session.get(&quot;user&quot;):
            return
        elif next_url in self.balck_list:
            return HttpResponse('This is an illegal URL')
        else:
            return redirect(&quot;/login/?next={}&quot;.format(next_url))&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€åœ¨settings.pyä¸­æ³¨å†Œ&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'middlewares.AuthMD',
]&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€AuthMDä¸­é—´ä»¶æ³¨å†Œåï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½è¦èµ°AuthMDçš„process_requestæ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€è®¿é—®çš„URLåœ¨ç™½åå•å†…æˆ–è€…sessionä¸­æœ‰userç”¨æˆ·åï¼Œåˆ™ä¸åšé˜»æ‹¦èµ°æ­£å¸¸æµç¨‹ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€å¦‚æœURLåœ¨é»‘åå•ä¸­ï¼Œåˆ™è¿”å›This is an illegal URLçš„å­—ç¬¦ä¸²ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€æ­£å¸¸çš„URLä½†æ˜¯éœ€è¦ç™»å½•åè®¿é—®ï¼Œè®©æµè§ˆå™¨è·³è½¬åˆ°ç™»å½•é¡µé¢ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€æ³¨ï¼šAuthMDä¸­é—´ä»¶ä¸­éœ€è¦sessionï¼Œæ‰€ä»¥AuthMDæ³¨å†Œçš„ä½ç½®è¦åœ¨sessionä¸­é—´çš„ä¸‹æ–¹ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€é™„ï¼šDjangoè¯·æ±‚æµç¨‹å›¾&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€&lt;img src=&quot;https://images2018.cnblogs.com/blog/867021/201804/867021-20180409234112982-196913305.png&quot; alt=&quot;img&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;å…­-ä¸­é—´ä»¶æ¡ˆä¾‹&quot;&gt;å…­ ä¸­é—´ä»¶æ¡ˆä¾‹&lt;/h2&gt;
&lt;h3 id=&quot;åº”ç”¨æ¡ˆä¾‹&quot;&gt;åº”ç”¨æ¡ˆä¾‹&lt;/h3&gt;
&lt;h4 id=&quot;åšipè®¿é—®é¢‘ç‡é™åˆ¶&quot;&gt;&lt;strong&gt;1ã€åšIPè®¿é—®é¢‘ç‡é™åˆ¶&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€æŸäº›IPè®¿é—®æœåŠ¡å™¨çš„é¢‘ç‡è¿‡é«˜ï¼Œè¿›è¡Œæ‹¦æˆªï¼Œæ¯”å¦‚é™åˆ¶æ¯åˆ†é’Ÿä¸èƒ½è¶…è¿‡20æ¬¡ã€‚&lt;/p&gt;
&lt;h4 id=&quot;urlè®¿é—®è¿‡æ»¤&quot;&gt;&lt;strong&gt;2ã€URLè®¿é—®è¿‡æ»¤&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€å¦‚æœç”¨æˆ·è®¿é—®çš„æ˜¯loginè§†å›¾ï¼ˆæ”¾è¿‡ï¼‰&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€å¦‚æœè®¿é—®å…¶ä»–è§†å›¾ï¼Œéœ€è¦æ£€æµ‹æ˜¯ä¸æ˜¯æœ‰sessionè®¤è¯ï¼Œå·²ç»æœ‰äº†æ”¾è¡Œï¼Œæ²¡æœ‰è¿”å›loginï¼Œè¿™æ ·å°±çœå¾—åœ¨å¤šä¸ªè§†å›¾å‡½æ•°ä¸Šå†™è£…é¥°å™¨äº†ï¼&lt;/p&gt;
&lt;h3 id=&quot;æºç è¯•è¯»&quot;&gt;æºç è¯•è¯»&lt;/h3&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ä½œä¸ºå»¶ä¼¸æ‰©å±•å†…å®¹ï¼Œæœ‰ä½™åŠ›çš„åŒå­¦å¯ä»¥å°è¯•ç€è¯»ä¸€ä¸‹ä»¥ä¸‹ä¸¤ä¸ªè‡ªå¸¦çš„ä¸­é—´ä»¶ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;'django.contrib.sessions.middleware.SessionMiddleware',
'django.contrib.auth.middleware.AuthenticationMiddleware',&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;â€‹&lt;/p&gt;
</description>
<pubDate>Sun, 29 Sep 2019 23:55:00 +0000</pubDate>
<dc:creator>changxin7</dc:creator>
<og:description>ä¸€ å‰æˆ æˆ‘ä»¬åœ¨å‰é¢çš„è¯¾ç¨‹ä¸­å·²ç»å­¦ä¼šäº†ç»™è§†å›¾å‡½æ•°åŠ è£…é¥°å™¨æ¥åˆ¤æ–­æ˜¯ç”¨æˆ·æ˜¯å¦ç™»å½•ï¼ŒæŠŠæ²¡æœ‰ç™»å½•çš„ç”¨æˆ·è¯·æ±‚è·³è½¬åˆ°ç™»å½•é¡µé¢ã€‚æˆ‘ä»¬é€šè¿‡ç»™å‡ ä¸ªç‰¹å®šè§†å›¾å‡½æ•°åŠ è£…é¥°å™¨å®ç°äº†è¿™ä¸ªéœ€æ±‚ã€‚ä½†æ˜¯ä»¥åæ·»åŠ çš„è§†å›¾å‡½æ•°å¯èƒ½ä¹Ÿéœ€è¦åŠ ä¸Š</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/changxin7/p/11610813.html</dc:identifier>
</item>
<item>
<title>[ æµ‹è¯•æ€è€ƒ ] æ•ˆç‡æå‡æµ‹è¯•å·¥å…·å¼€å‘çš„æ€è€ƒ - BengDou_Do&amp;Think</title>
<link>http://www.cnblogs.com/linyfeng/p/11610780.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/linyfeng/p/11610780.html</guid>
<description>&lt;p&gt;&lt;span&gt;Â  æœ¬æ–‡é’ˆå¯¹æµ‹è¯•éƒ¨æ•ˆç‡æå‡æµ‹è¯•å·¥å…·å¼€å‘ã€ç®¡ç†ã€ç»´æŠ¤æš´éœ²å‡ºæ¥çš„é—®é¢˜çš„ä¸€äº›æ€è€ƒä»¥åŠä¸€äº›ä¸ªäººæ”¹è¿›è§‚ç‚¹ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;å†™åœ¨å‰é¢&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â  æœ¬æ–‡æåˆ°çš„æ•ˆç‡æå‡æµ‹è¯•å·¥å…·ä¸æ˜¯æŒ‡çš„éƒ¨é—¨ä¸­å›ºæœ‰çš„è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·ï¼Œè¿™é‡Œæåˆ°çš„æµ‹è¯•å·¥å…·ç»Ÿä¸€æŒ‡&lt;strong&gt;æµ‹è¯•äººå‘˜åœ¨å·¥ä½œä¹‹ä½™&lt;/strong&gt;è‡ªä¸»å¼€å‘ç”¨äºæœŸæœ›æ›¿ä»£é‡å¤ã€ç¹çã€è€—æ—¶çš„æ‰‹å·¥æ“ä½œçš„æµ‹è¯•å·¥å…·ï¼Œå¼€å‘çš„ç›®çš„æ˜¯å¸Œæœ›æå‡æµ‹è¯•å·¥ä½œæ•ˆç‡ã€‚ä¸æ˜¯é’ˆå¯¹ä¸“ä¸šå·¥å…·å¼€å‘éƒ¨é—¨å›¢é˜Ÿçš„æµ‹è¯•å·¥å…·ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;æµ‹è¯•å·¥å…·ç®¡ç†æš´éœ²çš„é—®é¢˜&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â  æ€»ä½“æ¥è¯´ï¼Œæµ‹è¯•å†…éƒ¨å‘å¸ƒçš„ç”¨äºæ•ˆç‡æå‡çš„æµ‹è¯•å·¥å…·æ•´ä½“è´¨é‡ä¸é«˜ï¼Œå·¥å…·åŠŸèƒ½ã€æ€§èƒ½ã€æ˜“ç”¨æ€§ã€å¯ç»´æŠ¤æ€§è´¨é‡éƒ½ä¸é«˜ã€‚å¤§éƒ¨åˆ†æµ‹è¯•å·¥å…·é€šå¸¸éƒ½æ˜¯è°å¼€å‘çš„è°ç”¨çš„æ¯”è¾ƒé¡ºæ‰‹ï¼Œ&lt;span&gt;å·¥å…·æ¨å¹¿åº¦ä¸é«˜ã€‚&lt;/span&gt;å¹¶æ²¡æœ‰çœŸæ­£è®©éƒ¨é—¨å…¶ä»–æµ‹è¯•äººå‘˜æ•ˆç‡å¾—åˆ°æå‡ã€‚é’ˆå¯¹è¿™äº›é—®é¢˜ç®€å•è°ƒç ”äº†ä¸€ä¸‹èº«è¾¹çš„åŒäº‹åŸå› ï¼Œä¸»è¦ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â  1ã€å·¥å…·ä¸çŸ¥é“ä»å“ªé‡Œå¯ä»¥è·å–ã€‚è¿™æ˜¯æµ‹è¯•éƒ¨&lt;strong&gt;å·¥å…·ç®¡ç†çš„é—®é¢˜ã€‚&lt;/strong&gt;æ²¡æœ‰ç»Ÿä¸€çš„å‘å¸ƒè·¯å¾„ã€æµ‹è¯•äººå‘˜ä¸çŸ¥é“å½“å‰æµ‹è¯•éƒ¨éƒ½æœ‰å“ªäº›æµ‹è¯•å·¥å…·å¯ä»¥ç”¨ï¼Œä¸çŸ¥é“ä»å“ªé‡Œå¯ä»¥è·å–åˆ°&lt;strong&gt;ã€‚&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â  2ã€å·¥å…·ä¸ä¼šç”¨ã€‚æµ‹è¯•äººå‘˜æ‹¿åˆ°å·¥å…·ä¸çŸ¥é“æ€ä¹ˆä½¿ç”¨ã€‚å¯¹ä¸€äº›ç›¸å¯¹å¤æ‚åŠŸèƒ½çš„æµ‹è¯•å·¥å…·æ²¡æœ‰ä½¿ç”¨æŒ‡å¯¼ä¹¦ã€æ²¡æœ‰è”æœºå¸®åŠ©ã€‚ç”šè‡³æœ‰ä¸€äº›å·¥å…·å¼€å‘çš„èœå•ã€æ ‡ç­¾ã€å·¥å…·åç§°èµ·çš„éƒ½å¾ˆå«ç³Šã€‚ä¸çŸ¥é“è¿™ä¸ªå·¥å…·æ˜¯è¦å¹²å˜›çš„ã€‚è¿™äº›é€šå¸¸éƒ½æ˜¯æµ‹è¯•äººå‘˜åœ¨å¼€å‘å·¥å…·æ—¶ä¸è€ƒè™‘å·¥å…·çš„æ˜“ç”¨æ€§é—®é¢˜å¯¼è‡´å…¶ä»–æµ‹è¯•äººå‘˜å¾ˆéš¾ä¸Šæ‰‹ä½¿ç”¨ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæµ‹è¯•å·¥å…·å¼€å‘äººå‘˜ç”¨ Pythonå¼€å‘äº†ä¸€ä¸ªwindowså¹³å°å·¥å…·ä½†æ˜¯å¹¶æ²¡æœ‰ç¼–è¯‘æˆå¯æ‰§è¡Œçš„.exeç¨‹åºå‘å¸ƒï¼Œå…¶ä»–äººå¾ˆéš¾ç”¨ï¼Œé¦–å…ˆå¯èƒ½è¦ä¸‹è½½pythonç¨‹åºã€å…¶ä»–è¦ä¸‹è½½ç¨‹åºä¾èµ–çš„å„ç§ç±»åº“ã€‚ç”¨ä¸ªå·¥å…·è¿™ä¹ˆéº»çƒ¦å¾ˆå¤šäººå°±ä¸æƒ³ç”¨äº†ã€‚ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â  3ã€å·¥å…·ä¸å¥½ç”¨ã€ç»å¸¸å‡ºç°é—®é¢˜ã€‚æµ‹è¯•å·¥å…·å¼€å‘åœ¨å®ç°å·¥å…·æ—¶å¯èƒ½åªé’ˆå¯¹æŸä¸€ä¸ªå…·ä½“çš„åœºæ™¯ã€æŸä¸€ä¸ªå…·ä½“çš„ä¸šåŠ¡ç‰ˆæœ¬è¿›è¡Œå¼€å‘å¯¼è‡´å·¥å…·å¹¶ä¸å…·å¤‡æ¨å¹¿æ€§ã€‚å¦å¤–ï¼Œä¸€äº›å·¥å…·äº¤äº’å¤ªå¤š&lt;span&gt;ç”šè‡³ä½¿ç”¨æ—¶æœ‰ä¸€äº›ä¾èµ–å¤–éƒ¨æ¡ä»¶éœ€è¦è®¾ç½®ç¨‹åºæ‰èƒ½æ­£å¸¸æ‰§è¡Œç­‰ç­‰éƒ½æ˜¯å¯¼è‡´ä¸å¥½ç”¨ã€æ²¡äººç”¨çš„åŸå› ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â  4ã€å·¥å…·å¾ˆéš¾ç»´æŠ¤ï¼ˆå¯ç»´æŠ¤æ€§é—®é¢˜ï¼‰ã€‚å·¥å…·å¼€å‘äººå‘˜æŠ€èƒ½ä¸ä¸€ã€èƒ½åŠ›é«˜ä½æœ‰åŒºåˆ«ã€å¯¹ç¼–ç è§„èŒƒçš„éµå¾ªç¨‹åº¦ä¹Ÿä¸ä¸€æ ·ã€‚å®ç°å·¥å…·å¼€å‘çš„è¯­è¨€å¤šæ ·åŒ–ï¼Œä¸»æµçš„å¼€å‘è¯­è¨€Pythonã€Javaç­‰è¿˜å¥½ï¼Œå¦‚æœæ˜¯AutoItã€vbsç­‰è¿™äº›æ¯”è¾ƒå°‘ç”¨çš„è¯­è¨€å¼€å‘çš„å·¥å…·åæœŸç»´æŠ¤å°±å¾ˆéº»çƒ¦ç”šè‡³å°±æ²¡äººç»´æŠ¤äº†ã€‚å¦å¤–ï¼Œæµ‹è¯•äººå‘˜æ¯•ç«Ÿæ²¡æœ‰å¯¹ç¼–ç è§„èŒƒæœ‰å¾ˆå¥½çš„ç†è§£ï¼Œä»£ç æ€ä¹ˆå†™çš„éƒ½æœ‰ã€å‡ åƒè¡Œä»£ç æ³¨é‡Šå‡ ä¹ä¸º0ï¼Œä¹Ÿæ²¡æœ‰å¼€å‘æ–‡æ¡£è¯´æ˜ï¼Œç»´æŠ¤èµ·æ¥ç‰¹åˆ«å›°éš¾ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â  5ã€å·¥å…·éœ€æ±‚å¼€å‘éšæ„ã€å‘å¸ƒè·¯å¾„ä¸ç»Ÿä¸€ã€å·¥å…·å‘å¸ƒæ ¼å¼ä¸è§„èŒƒã€‚è¿™ä¹Ÿæ˜¯ç®¡ç†çš„é—®é¢˜ã€‚å·¥å…·æ²¡æœ‰ç»Ÿä¸€çš„ç®¡ç†å°±ä¼šè¡ç”Ÿå‡ºå¾ˆå¤šé¢å¤–çš„é—®é¢˜ã€‚æ¯”å¦‚å‰æ–‡æåˆ°çš„ä¸çŸ¥é“ä»å“ªé‡Œè·å–å·¥å…·ã€å·¥å…·æ²¡æœ‰æŒ‡å¯¼ä¹¦ï¼Œæˆ‘æ²¡æœ‰ç¼–ç èƒ½åŠ›ä½†æ˜¯æˆ‘è¯†åˆ«å‡ºäº†å·¥ä½œä¸­çš„çŸ­æ¿éœ€è¦å¼€å‘å·¥å…·å¯ä»¥æŠŠéœ€æ±‚æäº¤ç»™è°ã€‚ã€‚ç­‰ç­‰ã€‚ã€‚è¿™é‡Œï¼Œä¸æ˜¯ä¸€å®šè¦å¼ºåˆ¶æŸäº›å·¥å…·ä¸èƒ½å¼€å‘ï¼ŒæŸäº›å·¥å…·å¯ä»¥å¼€å‘ã€‚ä»æµ‹è¯•éƒ¨æ•´ä½“è§’åº¦æ¥è¯´ï¼Œå°†å·¥ä½œé‡èšç„¦æµ‹è¯•éƒ¨topNæ•ˆç‡çŸ­æ¿æå‡çš„å·¥å…·å¼€å‘è‚¯å®šæ˜¯å¿…è¦çš„ã€‚ã€‚&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;Â  ä¸Šé¢æš´éœ²çš„é—®é¢˜åœ¨æˆ‘å‘†è¿‡çš„å¾ˆå¤šäº§å“éƒ½é‡åˆ°è¿‡ï¼Œå¹¶ä¸æ˜¯ä¸ªä¾‹ã€‚é’ˆå¯¹è¿™äº›é—®é¢˜çš„è§£å†³æ–¹æ³•ï¼Œè°ˆä¸€ä¸‹ä¸ªäººè§‚ç‚¹ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â  1ã€å·¥å…·ç»Ÿä¸€ç®¡ç†ã€‚æµ‹è¯•éƒ¨å†…éƒ¨å‘å¸ƒå·¥å…·å¼€å‘è§„èŒƒã€ç»Ÿä¸€å·¥å…·å‘å¸ƒè·¯å¾„ã€å·¥å…·å‘å¸ƒæ ¼å¼ï¼ˆå·¥å…·åç§°+ç‰ˆæœ¬å·ã€å·¥å…·ä¸»è¦åŠŸèƒ½ã€å·¥å…·ä½œè€…ã€å·¥å…·ç»´æŠ¤å†å²ã€å·¥å…·å¼€å‘IDEç­‰ï¼‰ã€‚å»ºè®®ä½¿ç”¨ä¸»æµç¼–ç¨‹è¯­è¨€å¼€å‘ï¼ˆPythonã€Javaç­‰ï¼‰ï¼Œå†…éƒ¨å¼ºè°ƒç¼–ç¨‹è§„èŒƒç­‰ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â 2ã€å·¥å…·å¼€å‘æé«˜æ˜“ç”¨æ€§ã€‚ä¸€æ˜¯å‡å°‘äº¤äº’è€Œæ˜¯æ–¹ä¾¿äº¤äº’ã€‚å‡å°‘äº¤äº’ä¸»è¦æ˜¯æŒ‡æ²¡æœ‰å¿…è¦çš„è¾“å…¥æˆ–è€…å¯ä»¥å›ºåŒ–çš„è¾“å…¥å°±é›†æˆåˆ°è½¯ä»¶ä¸­ï¼Œéœ€è¦ä¾èµ–çš„æ­¥éª¤ä¹Ÿå¯ä»¥ç›´æ¥åœ¨å·¥å…·ä¸­å®ç°ã€‚æ–¹ä¾¿äº¤äº’ä¸»è¦æ˜¯æŒ‡åœ¨windowsç³»ç»Ÿä½¿ç”¨æ—¶å°½é‡æä¾›ç•Œé¢åŒ–å½¢å¼çš„äº¤äº’çª—å£ã€‚windowsä¸Šä½¿ç”¨çš„ç¨‹åºåŸ¹å…»çš„ä¹ æƒ¯æ˜¯è¿™æ ·ã€‚å¯¹äºlinuxä¸‹ï¼Œå‘½ä»¤è¡Œäº¤äº’æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯æ¯ä¸€æ­¥çš„è¾“å…¥æç¤ºæè¿°å°½é‡ç®€å•æ¸…æ™°ã€‚å°½é‡å¯ä»¥è¾¾åˆ°å‚»ç“œå¼çš„ä½¿ç”¨ã€‚å®ç°çš„æ—¶å€™å°±ä»è¿™ä¸ªè§’åº¦è€ƒè™‘ã€‚ä½ ä¸æœŸæœ›ä½ ç»™åˆ«äººå·¥å…·è¿˜è¦æ•™ä»–æ€ä¹ˆç”¨å§ã€‚ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â 3ã€æé«˜å·¥å…·å¯ç”¨æ€§ã€‚è¿™æ˜¯åŠŸèƒ½çš„é—®é¢˜ã€‚é€šå¸¸è¿™äº›æ•ˆç‡æå‡å·¥å…·éƒ½æ˜¯ä¸ªäººåœ¨å·¥ä½œä¹‹ä½™èŠ±æ—¶é—´å®ç°çš„ï¼Œè¦æ±‚é¢é¢ä¿±åˆ°ä¹Ÿæ˜¯å¾ˆå›°éš¾ï¼Œä½†æ˜¯å°½é‡è¿˜æ˜¯è¦ä¿è¯ä¸»åœºæ™¯åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹è¿è¡Œæ­£å¸¸ï¼Œå¯ä»¥æ­£å¸¸è¾“å‡ºé¢„æœŸç»“æœã€‚ä¸èƒ½æ¢ä¸€ä¸ªæµ‹è¯•ç‰ˆæœ¬å·¥å…·å°±å‡ºé—®é¢˜å°±å¥½äº†ï¼Œåˆ«äººå¯èƒ½å°±ä¸æƒ³ç”¨äº†ã€‚å¯¹äºå·¥å…·çš„å®Œå–„å¯ä»¥åœ¨ä¸‹ä¸€æ¬¡è¿­ä»£ä¼˜åŒ–ã€‚è¿™æ˜¯æ¯ä¸€ä¸ªå·¥å…·å¼€å‘äººå‘˜éƒ½æ˜¯åº”è¯¥æ€è€ƒçš„é—®é¢˜ã€‚ã€‚ä½ ä¹Ÿä¸æœŸæœ›è‡ªå·±å‘å¸ƒçš„å·¥å…·åˆ«äººä¸€ç”¨å°±å‡ºé—®é¢˜ã€‚ã€‚å¯¹è‡ªå·±çš„å½¢è±¡ä¹Ÿä¸å¥½ã€‚ã€‚æ˜¯å§&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â 4ã€æé«˜å·¥å…·å¯ç»´æŠ¤æ€§ã€‚è¦æ±‚ä¸é«˜ï¼Œå°±æ˜¯å¤šåŠ ä¸€äº›æ³¨é‡Šï¼Œä»£ç è‡ªå·±è§‰å¾—å¯è¯»æ€§è¿˜å¯ä»¥ã€‚å‡½æ•°/ç±»å°½é‡åˆ’åˆ†çš„åˆç†ã€‚è‡³å°‘ä¿è¯è‡ªå·±è¿‡åŠå¹´ä¸€å¹´å†å›æ¥çœ‹è‡ªå·±çš„ä»£ç è¿˜èƒ½å¿«é€Ÿè¯»æ‡‚ä¿®æ”¹å°±å·®ä¸å¤šäº†ã€‚ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â 5ã€å·¥å…·å®šæœŸå®£ä¼ ã€‚å®šæœŸæŒ‘é€‰ä¸€äº›å¥½ç”¨çš„ã€å…·æœ‰ä¸€å®šæ™®éæ€§çš„å·¥å…·è¿›è¡Œæ¨å¹¿ã€‚é…’é¦™ä¹Ÿæ€•å··å­æ·±ï¼Œæ¯ä¸ªå·¥å…·å¼€å‘ä½œè€…ä¹Ÿå¸Œæœ›è‡ªå·±çš„åŠ³åŠ¨æˆæœå¯ä»¥çœŸæ­£çš„è®©å…¶ä»–äººå—ç›Šï¼Œè®©è‡ªå·±çš„ä»˜å‡ºå¾—åˆ°åˆ«äººçš„è®¤å¯ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â  6ã€ç¼–ç æŠ€èƒ½äº¤æµã€‚æµ‹è¯•äººå‘˜æ•´ä½“ç¼–ç æŠ€èƒ½è¿˜æ˜¯ç›¸å¯¹è¾ƒå¼±ï¼Œå·¥å…·çš„å¼€å‘ä¸»è¦è¿˜æ˜¯é›†ä¸­åœ¨ä¸€å°éƒ¨åˆ†äººèº«ä¸Šã€‚å¯ä»¥å°†è¿™éƒ¨åˆ†äººå‘˜ç»Ÿä¸€é›†ä¸­èµ·æ¥å¤šäº¤æµã€æ¢è®¨ã€‚ä¹Ÿå¯ä»¥åœ¨æµ‹è¯•å†…éƒ¨æ¨ä¸€äº›ç¼–ç åŸºç¡€åŸ¹è®­è¯¾ç¨‹æˆ–è€…æ˜¯ä¸€äº›åŸºç¡€æ–‡ç« ï¼Œå¯ä»¥å¸®åŠ©æœ‰å…´è¶£æå‡ç¼–ç èƒ½åŠ›çš„æµ‹è¯•äººå‘˜ã€‚&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;Â Â  å·¥å…·å¼€å‘ç®¡ç†ç»´æŠ¤ä½¿ç”¨æš´éœ²å‡ºçš„é—®é¢˜æŒºå¤šçš„ï¼Œå…¶å®æ²¡æœ‰å•¥ã€‚æ¯•ç«Ÿéƒ½æ˜¯æµ‹è¯•äººå‘˜åœ¨ä¸šä½™æ—¶é—´å¼€å‘çš„ã€‚åšå‡ºæ¥äº†æ€»æ¯”æ²¡åšå‡ºæ¥å¥½ï¼Œåšå‡ºæ¥çš„ä¸œè¥¿åªè¦ç¨åŠ å¼•å¯¼å°±å¯ä»¥ä¸æ–­è¿­ä»£ä¼˜åŒ–æ”¹è¿›ã€‚ä¸å¯å–çš„æ˜¯æ²¡æœ‰æ”¹è¿›æ„è¯†ï¼Œå®¹å¿ä½æ•ˆã€é‡å¤ã€ç¹ççš„æ‰‹å·¥æ‰§è¡Œå·¥ä½œï¼Œè¿™æ ·å¯¹è‡ªå·±æ²¡æœ‰ä»€ä¹ˆå¥½å¤„ã€‚ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â Â  é™äºæ—¶é—´ï¼ŒåŒ†åŒ†å†™å®Œï¼Œæœ‰äº›è§‚ç‚¹å¯èƒ½è¡¨è¾¾ä¸åˆ°ä½ï¼Œé’ˆå¯¹è¿™äº›é—®é¢˜ï¼Œæœ‰å…´è¶£å¯ä»¥äº¤æµã€‚ã€‚&lt;/span&gt;&lt;/p&gt;
</description>
<pubDate>Sun, 29 Sep 2019 23:40:00 +0000</pubDate>
<dc:creator>BengDou_Do&amp;amp;Think</dc:creator>
<og:description>æœ¬æ–‡é’ˆå¯¹æµ‹è¯•éƒ¨æ•ˆç‡æå‡æµ‹è¯•å·¥å…·å¼€å‘ã€ç®¡ç†ã€ç»´æŠ¤æš´éœ²å‡ºæ¥çš„é—®é¢˜çš„ä¸€äº›æ€è€ƒä»¥åŠä¸€äº›ä¸ªäººæ”¹è¿›è§‚ç‚¹ã€‚ å†™åœ¨å‰é¢ æœ¬æ–‡æåˆ°çš„æ•ˆç‡æå‡æµ‹è¯•å·¥å…·ä¸æ˜¯æŒ‡çš„éƒ¨é—¨ä¸­å›ºæœ‰çš„è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·ï¼Œè¿™é‡Œæåˆ°çš„æµ‹è¯•å·¥å…·ç»Ÿä¸€æŒ‡æµ‹è¯•äººå‘˜åœ¨</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/linyfeng/p/11610780.html</dc:identifier>
</item>
<item>
<title>åˆ†åº“åˆ†è¡¨(1) --- ç†è®º - é›¨ç‚¹çš„åå­—</title>
<link>http://www.cnblogs.com/qdhxhz/p/11608222.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/qdhxhz/p/11608222.html</guid>
<description>&lt;center&gt;

&lt;/center&gt;
&lt;p&gt;å½“ä¸€å¼ è¡¨çš„æ•°æ®è¾¾åˆ°å‡ åƒä¸‡æ—¶ï¼ŒæŸ¥è¯¢ä¸€æ¬¡æ‰€èŠ±çš„æ—¶é—´ä¼šå˜é•¿ã€‚ä¸šç•Œå…¬è®¤MySQLå•è¡¨å®¹é‡åœ¨ &lt;strong&gt;1åƒä¸‡&lt;/strong&gt; ä»¥ä¸‹æ˜¯æœ€ä½³çŠ¶æ€ï¼Œå› ä¸ºè¿™æ—¶å®ƒçš„BTREEç´¢å¼•æ ‘é«˜åœ¨3~5ä¹‹é—´ã€‚&lt;/p&gt;
&lt;p&gt;æ•°æ®åˆ‡åˆ†å¯ä»¥åˆ†ä¸ºï¼š&lt;code&gt;å‚ç›´åˆ‡åˆ†&lt;/code&gt;å’Œ&lt;code&gt;æ°´å¹³åˆ‡åˆ†&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä¸€å‚ç›´åˆ‡åˆ†&quot;&gt;&lt;span&gt;ä¸€ã€å‚ç›´åˆ‡åˆ†&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;å‚ç›´åˆ‡åˆ†åˆå¯ä»¥åˆ†ä¸º: &lt;code&gt;å‚ç›´åˆ†åº“&lt;/code&gt;å’Œ&lt;code&gt;å‚ç›´åˆ†è¡¨&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&quot;å‚ç›´åˆ†åº“&quot;&gt;1ã€å‚ç›´åˆ†åº“&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;æ¦‚å¿µ&lt;/code&gt; å°±æ˜¯æ ¹æ®ä¸šåŠ¡è€¦åˆæ€§ï¼Œå°†å…³è”åº¦ä½çš„ä¸åŒè¡¨å­˜å‚¨åœ¨ä¸åŒçš„æ•°æ®åº“ã€‚åšæ³•ä¸å¤§ç³»ç»Ÿæ‹†åˆ†ä¸ºå¤šä¸ªå°ç³»ç»Ÿç±»ä¼¼ï¼ŒæŒ‰ä¸šåŠ¡åˆ†ç±»è¿›è¡Œç‹¬ç«‹åˆ’åˆ†ã€‚ä¸&quot;å¾®æœåŠ¡æ²»ç†&quot;çš„åšæ³•ç›¸ä¼¼ï¼Œ&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªå¾®æœåŠ¡ä½¿ç”¨å•ç‹¬çš„ä¸€ä¸ªæ•°æ®åº“ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1090617/201909/1090617-20190929153840439-1816032834.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;è¯´æ˜&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ä¸€å¼€å§‹æˆ‘ä»¬æ˜¯å•ä½“æœåŠ¡ï¼Œæ‰€ä»¥åªæœ‰ä¸€ä¸ªæ•°æ®åº“ï¼Œæ‰€æœ‰çš„è¡¨éƒ½åœ¨è¿™ä¸ªåº“é‡Œã€‚&lt;/p&gt;
&lt;p&gt;åæ¥å› ä¸ºä¸šåŠ¡éœ€æ±‚,å•ä½“æœåŠ¡å˜æˆå¾®æœåŠ¡æ²»ç†ã€‚æ‰€ä»¥å°†ä¹‹å‰çš„ä¸€ä¸ªå•†å“åº“ï¼Œæ‹†åˆ†æˆå¤šä¸ªæ•°æ®åº“ã€‚æ¯ä¸ªå¾®æœåŠ¡å¯¹äºä¸€ä¸ªæ•°æ®åº“ã€‚&lt;/p&gt;
&lt;h4 id=&quot;å‚ç›´åˆ†è¡¨&quot;&gt;2ã€å‚ç›´åˆ†è¡¨&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;æ¦‚å¿µ&lt;/code&gt; æŠŠä¸€ä¸ªè¡¨çš„å¤šä¸ªå­—æ®µåˆ†åˆ«æ‹†æˆå¤šä¸ªè¡¨ï¼Œä¸€èˆ¬æŒ‰å­—æ®µçš„å†·çƒ­æ‹†åˆ†ï¼Œçƒ­å­—æ®µä¸€ä¸ªè¡¨ï¼Œå†·å­—æ®µä¸€ä¸ªè¡¨ã€‚ä»è€Œæå‡äº†æ•°æ®åº“æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1090617/201909/1090617-20190929153851001-806440217.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;è¯´æ˜&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ä¸€å¼€å§‹å•†å“è¡¨ä¸­åŒ…å«å•†å“çš„æ‰€æœ‰å­—æ®µï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;1.å•†å“è¯¦æƒ…å’Œå•†å“å±æ€§å­—æ®µè¾ƒé•¿&lt;/code&gt;ã€‚&lt;code&gt;2.å•†å“åˆ—è¡¨çš„æ—¶å€™æˆ‘ä»¬æ˜¯ä¸éœ€è¦æ˜¾ç¤ºå•†å“è¯¦æƒ…å’Œå•†å“å±æ€§ä¿¡æ¯ï¼Œåªæœ‰åœ¨ç‚¹è¿›å•†å“å•†å“çš„æ—¶å€™æ‰ä¼šå±•ç¤ºå•†å“è¯¦æƒ…ä¿¡æ¯&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥å¯ä»¥è€ƒè™‘æŠŠå•†å“è¯¦æƒ…å’Œå•†å“å±æ€§å•ç‹¬åˆ‡åˆ†ä¸€å¼ è¡¨ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚&lt;/p&gt;
&lt;h4 id=&quot;å‚ç›´åˆ‡åˆ†ä¼˜ç¼ºç‚¹&quot;&gt;3ã€å‚ç›´åˆ‡åˆ†ä¼˜ç¼ºç‚¹&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;ä¼˜ç‚¹&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;- è§£å†³ä¸šåŠ¡ç³»ç»Ÿå±‚é¢çš„è€¦åˆï¼Œä¸šåŠ¡æ¸…æ™°
- ä¸å¾®æœåŠ¡çš„æ²»ç†ç±»ä¼¼ï¼Œä¹Ÿèƒ½å¯¹ä¸åŒä¸šåŠ¡çš„æ•°æ®è¿›è¡Œåˆ†çº§ç®¡ç†ã€ç»´æŠ¤ã€ç›‘æ§ã€æ‰©å±•ç­‰
- é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå‚ç›´åˆ‡åˆ†ä¸€å®šç¨‹åº¦çš„æå‡IOã€æ•°æ®åº“è¿æ¥æ•°ã€å•æœºç¡¬ä»¶èµ„æºçš„ç“¶é¢ˆ&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;ç¼ºç‚¹&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;- åˆ†åº“åæ— æ³•Joinï¼Œåªèƒ½é€šè¿‡æ¥å£èšåˆæ–¹å¼è§£å†³ï¼Œæå‡äº†å¼€å‘çš„å¤æ‚åº¦
- åˆ†åº“ååˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†å¤æ‚
- ä¾ç„¶å­˜åœ¨å•è¡¨æ•°æ®é‡è¿‡å¤§çš„é—®é¢˜ï¼ˆéœ€è¦æ°´å¹³åˆ‡åˆ†ï¼‰&lt;/code&gt;
&lt;/pre&gt;

&lt;h2 id=&quot;äºŒæ°´å¹³åˆ‡åˆ†&quot;&gt;&lt;span&gt;äºŒã€æ°´å¹³åˆ‡åˆ†&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;å½“ä¸€ä¸ªåº”ç”¨éš¾ä»¥å†ç»†ç²’åº¦çš„å‚ç›´åˆ‡åˆ†æˆ–åˆ‡åˆ†åæ•°æ®é‡è¡Œæ•°å·¨å¤§,å­˜åœ¨å•åº“è¯»å†™ã€å­˜å‚¨æ€§èƒ½ç“¶é¢ˆï¼Œè¿™æ—¶å€™å°±éœ€è¦è¿›è¡Œæ°´å¹³åˆ‡åˆ†äº†ã€‚&lt;/p&gt;
&lt;p&gt;æ°´å¹³åˆ‡åˆ†ä¹Ÿå¯ä»¥åˆ†ä¸ºï¼š&lt;code&gt;æ°´å¹³åˆ†åº“&lt;/code&gt;å’Œ&lt;code&gt;æ°´å¹³åˆ†è¡¨&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&quot;æ°´å¹³åˆ†åº“&quot;&gt;1ã€æ°´å¹³åˆ†åº“&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;æ°´å¹³åˆ†åº“çš„åŸå› &lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šé¢è™½ç„¶å·²ç»æŠŠå•†å“åº“åˆ†æˆ3ä¸ªåº“ï¼Œä½†æ˜¯éšç€ä¸šåŠ¡çš„å¢åŠ ä¸€ä¸ªè®¢å•åº“ä¹Ÿå‡ºç°QPSè¿‡é«˜ï¼Œæ•°æ®åº“å“åº”é€Ÿåº¦æ¥ä¸åŠ,ä¸€èˆ¬mysqlå•æœºä¹Ÿå°±1000å·¦å³çš„QPSï¼Œå¦‚æœè¶…è¿‡1000å°±è¦è€ƒè™‘åˆ†åº“ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¦‚å›¾&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1090617/201909/1090617-20190929153903240-431948355.jpg&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;æ°´å¹³åˆ†è¡¨&quot;&gt;2ã€æ°´å¹³åˆ†è¡¨&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;æ¦‚å¿µ&lt;/code&gt; ä¸€èˆ¬æˆ‘ä»¬ä¸€å¼ è¡¨çš„æ•°æ®ä¸è¦è¶…è¿‡1åƒä¸‡,å¦‚æœè¡¨æ•°æ®è¶…è¿‡1åƒä¸‡ï¼Œå¹¶ä¸”è¿˜åœ¨ä¸æ–­å¢åŠ æ•°æ®ï¼Œé‚£å°±å¯ä»¥è€ƒè™‘åˆ†è¡¨ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚å›¾&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1090617/201909/1090617-20190929153912863-301123895.jpg&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;å‚ç›´åˆ‡åˆ†ä¼˜ç¼ºç‚¹-1&quot;&gt;3ã€å‚ç›´åˆ‡åˆ†ä¼˜ç¼ºç‚¹&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;ä¼˜ç‚¹&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;- ä¸å­˜åœ¨å•åº“æ•°æ®é‡è¿‡å¤§ã€é«˜å¹¶å‘çš„æ€§èƒ½ç“¶é¢ˆï¼Œæå‡ç³»ç»Ÿç¨³å®šæ€§å’Œè´Ÿè½½èƒ½åŠ›
- åº”ç”¨ç«¯æ”¹é€ è¾ƒå°ï¼Œä¸éœ€è¦æ‹†åˆ†ä¸šåŠ¡æ¨¡å—&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;ç¼ºç‚¹&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;- è·¨åˆ†ç‰‡çš„äº‹åŠ¡ä¸€è‡´æ€§éš¾ä»¥ä¿è¯
- è·¨åº“çš„Joinå…³è”æŸ¥è¯¢æ€§èƒ½è¾ƒå·®
- æ•°æ®å¤šæ¬¡æ‰©å±•éš¾åº¦å’Œç»´æŠ¤é‡æå¤§&lt;/code&gt;
&lt;/pre&gt;

&lt;h2 id=&quot;ä¸‰æ•°æ®åˆ†ç‰‡è§„åˆ™&quot;&gt;&lt;span&gt;ä¸‰ã€æ•°æ®åˆ†ç‰‡è§„åˆ™&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬æˆ‘ä»¬è€ƒè™‘å»æ°´å¹³åˆ‡åˆ†è¡¨ï¼Œå°†ä¸€å¼ è¡¨æ°´å¹³åˆ‡åˆ†æˆå¤šå¼ è¡¨ï¼Œè¿™å°±æ¶‰åŠåˆ°æ•°æ®åˆ†ç‰‡çš„è§„åˆ™ï¼Œæ¯”è¾ƒå¸¸è§çš„æœ‰ï¼š&lt;code&gt;Hashå–æ¨¡åˆ†è¡¨&lt;/code&gt;ã€&lt;code&gt;æ•°å€¼Rangeåˆ†è¡¨&lt;/code&gt;ã€&lt;code&gt;ä¸€è‡´æ€§Hashç®—æ³•åˆ†è¡¨&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&quot;hashå–æ¨¡åˆ†è¡¨&quot;&gt;1ã€Hashå–æ¨¡åˆ†è¡¨&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;æ¦‚å¿µ&lt;/code&gt; ä¸€èˆ¬é‡‡ç”¨Hashå–æ¨¡çš„åˆ‡åˆ†æ–¹å¼ï¼Œä¾‹å¦‚ï¼šå‡è®¾æŒ‰goods_idåˆ†4å¼ è¡¨ã€‚ï¼ˆgoods_id%4 å–æ•´ç¡®å®šè¡¨ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1090617/201909/1090617-20190929153922347-942099001.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¼˜ç‚¹&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt; - æ•°æ®åˆ†ç‰‡ç›¸å¯¹æ¯”è¾ƒå‡åŒ€ï¼Œä¸å®¹æ˜“å‡ºç°çƒ­ç‚¹å’Œå¹¶å‘è®¿é—®çš„ç“¶é¢ˆã€‚&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;ç¼ºç‚¹&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;- åæœŸåˆ†ç‰‡é›†ç¾¤æ‰©å®¹æ—¶ï¼Œéœ€è¦è¿ç§»æ—§çš„æ•°æ®å¾ˆéš¾ã€‚
- å®¹æ˜“é¢ä¸´è·¨åˆ†ç‰‡æŸ¥è¯¢çš„å¤æ‚é—®é¢˜ã€‚æ¯”å¦‚ä¸Šä¾‹ä¸­ï¼Œå¦‚æœé¢‘ç¹ç”¨åˆ°çš„æŸ¥è¯¢æ¡ä»¶ä¸­ä¸å¸¦goods_idæ—¶,å°†ä¼šå¯¼è‡´æ— æ³•å®šä½æ•°æ®åº“,ä»è€Œéœ€è¦åŒæ—¶å‘4ä¸ªåº“å‘èµ·æŸ¥è¯¢ï¼Œ
å†åœ¨å†…å­˜ä¸­åˆå¹¶æ•°æ®ï¼Œå–æœ€å°é›†è¿”å›ç»™åº”ç”¨ï¼Œåˆ†åº“åè€Œæˆä¸ºæ‹–ç´¯ã€‚&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;æ•°å€¼rangeåˆ†è¡¨&quot;&gt;2ã€æ•°å€¼Rangeåˆ†è¡¨&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;æ¦‚å¿µ&lt;/code&gt; æŒ‰ç…§æ—¶é—´åŒºé—´æˆ–IDåŒºé—´æ¥åˆ‡åˆ†ã€‚ä¾‹å¦‚ï¼šå°†goods_idä¸º1~1000çš„è®°å½•åˆ†åˆ°ç¬¬ä¸€ä¸ªè¡¨ï¼Œ1001~2000çš„åˆ†åˆ°ç¬¬äºŒä¸ªè¡¨ï¼Œä»¥æ­¤ç±»æ¨ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚å›¾&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1090617/201909/1090617-20190929153932064-1649836918.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ä¼˜ç‚¹&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;- å•è¡¨å¤§å°å¯æ§
- å¤©ç„¶ä¾¿äºæ°´å¹³æ‰©å±•ï¼ŒåæœŸå¦‚æœæƒ³å¯¹æ•´ä¸ªåˆ†ç‰‡é›†ç¾¤æ‰©å®¹æ—¶ï¼Œåªéœ€è¦æ·»åŠ èŠ‚ç‚¹å³å¯ï¼Œæ— éœ€å¯¹å…¶ä»–åˆ†ç‰‡çš„æ•°æ®è¿›è¡Œè¿ç§»
- ä½¿ç”¨åˆ†ç‰‡å­—æ®µè¿›è¡ŒèŒƒå›´æŸ¥æ‰¾æ—¶ï¼Œè¿ç»­åˆ†ç‰‡å¯å¿«é€Ÿå®šä½åˆ†ç‰‡è¿›è¡Œå¿«é€ŸæŸ¥è¯¢ï¼Œæœ‰æ•ˆé¿å…è·¨åˆ†ç‰‡æŸ¥è¯¢çš„é—®é¢˜ã€‚&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;ç¼ºç‚¹&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;- çƒ­ç‚¹æ•°æ®æˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚
ä¾‹å¦‚æŒ‰æ—¶é—´å­—æ®µåˆ†ç‰‡ï¼Œæœ‰äº›åˆ†ç‰‡å­˜å‚¨æœ€è¿‘æ—¶é—´æ®µå†…çš„æ•°æ®ï¼Œå¯èƒ½ä¼šè¢«é¢‘ç¹çš„è¯»å†™ï¼Œè€Œæœ‰äº›åˆ†ç‰‡å­˜å‚¨çš„å†å²æ•°æ®ï¼Œåˆ™å¾ˆå°‘è¢«æŸ¥è¯¢&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;ä¸€è‡´æ€§hashç®—æ³•&quot;&gt;3ã€ä¸€è‡´æ€§Hashç®—æ³•&lt;/h4&gt;
&lt;p&gt;ä¸€è‡´æ€§Hashç®—æ³•èƒ½å¾ˆå¥½çš„&lt;code&gt;è§£å†³å› ä¸ºHashå–æ¨¡è€Œäº§ç”Ÿçš„åˆ†ç‰‡é›†ç¾¤æ‰©å®¹æ—¶ï¼Œéœ€è¦è¿ç§»æ—§çš„æ•°æ®çš„éš¾é¢˜&lt;/code&gt;ã€‚è‡³äºå…·ä½“åŸç†è¿™é‡Œå°±ä¸è¯¦ç»†è¯´ï¼Œ&lt;/p&gt;
&lt;p&gt;å¯ä»¥å‚è€ƒä¸€ç¯‡åšå®¢ï¼š&lt;a href=&quot;https://www.cnblogs.com/duhuo/p/4996105.html&quot;&gt;ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•(åˆ†åº“åˆ†è¡¨ï¼Œè´Ÿè½½å‡è¡¡ç­‰)&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;å››åˆ†åº“åˆ†è¡¨å¸¦æ¥çš„é—®é¢˜&quot;&gt;&lt;span&gt;å››ã€åˆ†åº“åˆ†è¡¨å¸¦æ¥çš„é—®é¢˜&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;ä»»ä½•äº‹æƒ…éƒ½æœ‰ä¸¤é¢æ€§ï¼Œåˆ†åº“åˆ†è¡¨ä¹Ÿä¸ä¾‹å¤–ï¼Œå¦‚æœé‡‡ç”¨åˆ†åº“åˆ†è¡¨ï¼Œä¼šå¼•å…¥æ–°çš„çš„é—®é¢˜&lt;/p&gt;
&lt;h4 id=&quot;åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜&quot;&gt;1ã€åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜&lt;/h4&gt;
&lt;p&gt;ä½¿ç”¨åˆ†å¸ƒå¼äº‹åŠ¡ä¸­é—´ä»¶è§£å†³ï¼Œå…·ä½“æ˜¯é€šè¿‡æœ€ç»ˆä¸€è‡´æ€§è¿˜æ˜¯å¼ºä¸€è‡´æ€§åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œçœ‹ä¸šåŠ¡éœ€æ±‚ï¼Œè¿™é‡Œå°±ä¸å¤šè¯´ã€‚&lt;/p&gt;
&lt;h4 id=&quot;è·¨èŠ‚ç‚¹å…³è”æŸ¥è¯¢-join-é—®é¢˜&quot;&gt;2ã€è·¨èŠ‚ç‚¹å…³è”æŸ¥è¯¢ Join é—®é¢˜&lt;/h4&gt;
&lt;p&gt;åˆ‡åˆ†ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Joinæ¥å®Œæˆã€‚è€Œåˆ‡åˆ†ä¹‹åï¼Œæ•°æ®å¯èƒ½åˆ†å¸ƒåœ¨ä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œæ­¤æ—¶Joinå¸¦æ¥çš„é—®é¢˜å°±æ¯”è¾ƒéº»çƒ¦äº†ï¼Œè€ƒè™‘åˆ°æ€§èƒ½ï¼Œå°½é‡é¿å…ä½¿ç”¨JoinæŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;p&gt;è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€äº›æ–¹æ³•ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;å…¨å±€è¡¨&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å…¨å±€è¡¨ï¼Œä¹Ÿå¯çœ‹åšæ˜¯ &quot;&lt;strong&gt;æ•°æ®å­—å…¸è¡¨&lt;/strong&gt;&quot;ï¼Œå°±æ˜¯ç³»ç»Ÿä¸­æ‰€æœ‰æ¨¡å—éƒ½å¯èƒ½ä¾èµ–çš„ä¸€äº›è¡¨ï¼Œä¸ºäº†é¿å…è·¨åº“JoinæŸ¥è¯¢ï¼Œå¯ä»¥å°† &lt;strong&gt;è¿™ç±»è¡¨åœ¨æ¯ä¸ªæ•°æ®åº“ä¸­éƒ½ä¿å­˜ä¸€ä»½&lt;/strong&gt;ã€‚è¿™äº›æ•°æ®é€šå¸¸&lt;/p&gt;
&lt;p&gt;å¾ˆå°‘ä¼šè¿›è¡Œä¿®æ”¹ï¼Œæ‰€ä»¥ä¹Ÿä¸æ‹…å¿ƒä¸€è‡´æ€§çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;å­—æ®µå†—ä½™&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åˆ©ç”¨ç©ºé—´æ¢æ—¶é—´ï¼Œä¸ºäº†æ€§èƒ½è€Œé¿å…joinæŸ¥è¯¢&lt;/strong&gt;ã€‚ä¾‹ï¼šè®¢å•è¡¨ä¿å­˜userIdæ—¶å€™,ä¹Ÿå°†userNameå†—ä½™ä¿å­˜ä¸€ä»½ï¼Œè¿™æ ·æŸ¥è¯¢è®¢å•è¯¦æƒ…æ—¶å°±ä¸éœ€è¦å†å»æŸ¥è¯¢&quot;ä¹°å®¶userè¡¨&quot;äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;æ•°æ®ç»„è£…&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åœ¨ç³»ç»Ÿå±‚é¢ï¼Œåˆ†ä¸¤æ¬¡æŸ¥è¯¢&lt;/strong&gt;ã€‚ç¬¬ä¸€æ¬¡æŸ¥è¯¢çš„ç»“æœé›†ä¸­æ‰¾å‡ºå…³è”æ•°æ®idï¼Œç„¶åæ ¹æ®idå‘èµ·ç¬¬äºŒæ¬¡è¯·æ±‚å¾—åˆ°å…³è”æ•°æ®ã€‚æœ€åå°†è·å¾—åˆ°çš„æ•°æ®è¿›è¡Œå­—æ®µæ‹¼è£…ã€‚&lt;/p&gt;
&lt;h4 id=&quot;è·¨èŠ‚ç‚¹åˆ†é¡µæ’åºå‡½æ•°é—®é¢˜&quot;&gt;3ã€è·¨èŠ‚ç‚¹åˆ†é¡µã€æ’åºã€å‡½æ•°é—®é¢˜&lt;/h4&gt;
&lt;p&gt;è·¨èŠ‚ç‚¹å¤šåº“è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œä¼šå‡ºç°Limitåˆ†é¡µã€Order byæ’åºç­‰é—®é¢˜ã€‚åˆ†é¡µéœ€è¦æŒ‰ç…§æŒ‡å®šå­—æ®µè¿›è¡Œæ’åºï¼Œå½“æ’åºå­—æ®µå°±æ˜¯åˆ†ç‰‡å­—æ®µæ—¶ï¼Œé€šè¿‡åˆ†ç‰‡è§„åˆ™å°±æ¯”è¾ƒå®¹æ˜“å®šä½åˆ°æŒ‡å®šçš„åˆ†ç‰‡ï¼›&lt;/p&gt;
&lt;p&gt;å½“æ’åºå­—æ®µéåˆ†ç‰‡å­—æ®µæ—¶ï¼Œå°±å˜å¾—æ¯”è¾ƒå¤æ‚äº†ã€‚éœ€è¦å…ˆåœ¨ä¸åŒçš„åˆ†ç‰‡èŠ‚ç‚¹ä¸­å°†æ•°æ®è¿›è¡Œæ’åºå¹¶è¿”å›ï¼Œç„¶åå°†ä¸åŒåˆ†ç‰‡è¿”å›çš„ç»“æœé›†è¿›è¡Œæ±‡æ€»å’Œå†æ¬¡æ’åºï¼Œæœ€ç»ˆè¿”å›ç»™ç”¨æˆ·ã€‚&lt;/p&gt;
&lt;h4 id=&quot;å…¨å±€ä¸»é”®é¿é‡é—®é¢˜&quot;&gt;4ã€å…¨å±€ä¸»é”®é¿é‡é—®é¢˜&lt;/h4&gt;
&lt;p&gt;å¦‚æœéƒ½ç”¨&lt;code&gt;ä¸»é”®è‡ªå¢&lt;/code&gt;è‚¯å®šä¸åˆç†ï¼Œå¦‚æœç”¨&lt;code&gt;UUID&lt;/code&gt;é‚£ä¹ˆæ— æ³•åšåˆ°æ ¹æ®ä¸»é”®æ’åºï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è€ƒè™‘é€šè¿‡&lt;code&gt;é›ªèŠ±ID&lt;/code&gt;æ¥ä½œä¸ºæ•°æ®åº“çš„ä¸»é”®ï¼Œ&lt;/p&gt;
&lt;p&gt;æœ‰å…³é›ªèŠ±IDå¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰å†™çš„åšå®¢ï¼š&lt;a href=&quot;https://www.cnblogs.com/qdhxhz/p/11372658.html&quot;&gt;é™æ€å†…éƒ¨ç±»å•ä¾‹æ¨¡å¼å®ç°é›ªèŠ±ç®—æ³•&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&quot;æ•°æ®è¿ç§»é—®é¢˜&quot;&gt;5ã€æ•°æ®è¿ç§»é—®é¢˜&lt;/h4&gt;
&lt;p&gt;é‡‡ç”¨&lt;code&gt;åŒå†™çš„æ–¹å¼&lt;/code&gt;ï¼Œä¿®æ”¹ä»£ç ï¼Œæ‰€æœ‰æ¶‰åŠåˆ°åˆ†åº“åˆ†è¡¨çš„è¡¨çš„å¢ã€åˆ ã€æ”¹çš„ä»£ç ï¼Œéƒ½è¦å¯¹æ–°åº“è¿›è¡Œå¢åˆ æ”¹ã€‚åŒæ—¶ï¼Œå†æœ‰ä¸€ä¸ªæ•°æ®æŠ½å–æœåŠ¡ï¼Œä¸æ–­åœ°ä»è€åº“æŠ½æ•°æ®ï¼Œå¾€æ–°åº“å†™ï¼Œ&lt;/p&gt;
&lt;p&gt;è¾¹å†™è¾¹æŒ‰æ—¶é—´æ¯”è¾ƒæ•°æ®æ˜¯ä¸æ˜¯æœ€æ–°çš„ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å‚è€ƒ&quot;&gt;&lt;span&gt;å‚è€ƒ&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;1ã€&lt;a href=&quot;https://www.jianshu.com/p/89fa2f873afe&quot;&gt;åˆ†åº“åˆ†è¡¨&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;2ã€&lt;a href=&quot;https://baijiahao.baidu.com/s?id=1622441635115622194&amp;amp;wfr=spider&amp;amp;for=pc&quot;&gt;è°ˆè°ˆåˆ†åº“åˆ†è¡¨å§ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;3ã€&lt;a href=&quot;https://www.cnblogs.com/butterfly100/p/9034281.html&quot;&gt;æ•°æ®åº“åˆ†åº“åˆ†è¡¨æ€è·¯&lt;/a&gt;&lt;/p&gt;

&lt;pre&gt;
&lt;code&gt; æˆ‘ç›¸ä¿¡ï¼Œæ— è®ºä»Šåçš„é“è·¯å¤šä¹ˆåå·ï¼Œåªè¦æŠ“ä½ä»Šå¤©ï¼Œè¿Ÿæ—©ä¼šåœ¨å¥‹æ–—ä¸­å°åˆ°äººç”Ÿçš„ç”˜ç”œã€‚æŠ“ä½äººç”Ÿä¸­çš„ä¸€åˆ†ä¸€ç§’ï¼Œèƒœè¿‡è™šåº¦ä¸­çš„ä¸€æœˆä¸€å¹´ï¼(16ï¼‰&lt;/code&gt;
&lt;/pre&gt;

</description>
<pubDate>Sun, 29 Sep 2019 23:17:00 +0000</pubDate>
<dc:creator>é›¨ç‚¹çš„åå­—</dc:creator>
<og:description>åˆ†åº“åˆ†è¡¨ ç†è®º å½“ä¸€å¼ è¡¨çš„æ•°æ®è¾¾åˆ°å‡ åƒä¸‡æ—¶ï¼ŒæŸ¥è¯¢ä¸€æ¬¡æ‰€èŠ±çš„æ—¶é—´ä¼šå˜é•¿ã€‚ä¸šç•Œå…¬è®¤MySQLå•è¡¨å®¹é‡åœ¨ 1åƒä¸‡ ä»¥ä¸‹æ˜¯æœ€ä½³çŠ¶æ€ï¼Œå› ä¸ºè¿™æ—¶å®ƒçš„BTREEç´¢å¼•æ ‘é«˜åœ¨3~5ä¹‹é—´ã€‚ æ•°æ®åˆ‡åˆ†å¯ä»¥åˆ†ä¸ºï¼š å’Œ`æ°´å¹³åˆ‡</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/qdhxhz/p/11608222.html</dc:identifier>
</item>
<item>
<title>.NETä¹‹Hangfireå¿«é€Ÿå…¥é—¨å’Œä½¿ç”¨ - è¿½é€æ—¶å…‰</title>
<link>http://www.cnblogs.com/Can-daydayup/p/11610747.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/Can-daydayup/p/11610747.html</guid>
<description>&lt;h2&gt;å‰è¨€ï¼š&lt;/h2&gt;
&lt;p&gt;ã€€ã€€å®šæ—¶ä»»åŠ¡è°ƒåº¦é—®é¢˜ï¼Œæ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„é—®é¢˜ã€‚ç½‘ä¸Šæœ‰è®¸å¤šå®šæ—¶ä»»åŠ¡è°ƒåº¦çš„è§£å†³æ–¹æ¡ˆï¼Œå¯¹äºæˆ‘è€Œè¨€å¾ˆæ—©ä»¥å‰ä¸»è¦æ˜¯ä½¿ç”¨Windowè®¡åˆ’å’ŒWindowæœåŠ¡æ¥åšä»»åŠ¡å®šæ—¶æ‰§è¡Œï¼Œç„¶åå°±å¼€å§‹ä½¿ç”¨å®šæ—¶ä»»åŠ¡è°ƒåº¦æ¡†æ¶Quartz.Netã€‚ä½†æ˜¯å´ä¸€ç›´æ²¡æœ‰ä¸Šæ‰‹è¿‡Hangfireè¿™ä¸ªè‡ªå¸¦åå°ä»»åŠ¡è°ƒåº¦é¢æ¿ï¼Œå¯ä»¥åœ¨åå°æ‰‹åŠ¨æ‰§è¡Œä»»åŠ¡çš„ç¥å¥‡çš„ä»»åŠ¡è°ƒåº¦æ¡†æ¶ã€‚å‰æ®µæ—¶é—´ç»ˆäºå¼€å§‹å¯¹ä»–ä¸‹æ‰‹äº†ï¼Œé€šè¿‡åœ¨ç½‘ä¸ŠæŸ¥é˜…äº†ä¸€äº›èµ„æ–™å’ŒæŸ¥çœ‹äº†Hangfireåœ¨Githubä¸­çš„demoï¼Œç»ˆäºåœ¨æˆ‘è‡ªå·±çš„é¡¹ç›®ä¸­ç”¨ä¸Šäº†Hangfireã€‚åœ¨è¯¥ç¯‡æ–‡ç« ä¸­ä¸»è¦ç®€å•ä»‹ç»ä¸€ä¸‹ä»€ä¹ˆæ˜¯Hangfireï¼ŒHangfireçš„åŸºæœ¬ç‰¹å¾ä¸ä¼˜ç‚¹å’Œåˆ†åˆ«ä½¿ç”¨MySQLï¼ŒMS SQL Serverä½œä¸ºå­˜å‚¨ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;h2&gt;ä¸€ã€Hangfireæ˜¯ä»€ä¹ˆï¼š&lt;/h2&gt;
&lt;p&gt;ã€€ã€€Hangfireæ˜¯ä¸€ä¸ªå¼€æºçš„.NETä»»åŠ¡è°ƒåº¦æ¡†æ¶ï¼Œæä¾›äº†å†…ç½®é›†æˆåŒ–çš„æ§åˆ¶å°ï¼Œå¯ä»¥ç›´è§‚æ˜äº†çš„æŸ¥çœ‹ä½œä¸šè°ƒåº¦æƒ…å†µï¼Œå¹¶ä¸”Hangfireä¸éœ€è¦ä¾èµ–äºå•ç‹¬çš„åº”ç”¨ç¨‹åºæ‰§è¡Œï¼ˆå¦‚ï¼šwindowsæœåŠ¡ï¼Œwindowè®¡åˆ’ï¼‰ã€‚å¹¶ä¸”æ”¯æŒæŒä¹…æ€§å­˜å‚¨ã€‚&lt;/p&gt;
&lt;h2&gt;äºŒã€Hangfireä½¿ç”¨æ¡ä»¶ï¼š&lt;/h2&gt;
&lt;blockquote readability=&quot;11&quot;&gt;
&lt;p&gt;Hangfireä¸ç‰¹å®šçš„.NETåº”ç”¨ç¨‹åºç±»å‹æ— å…³ã€‚æ‚¨å¯ä»¥åœ¨ASP.NET Webåº”ç”¨ç¨‹åºï¼ŒéASP.NET Webåº”ç”¨ç¨‹åºï¼Œæ§åˆ¶å°åº”ç”¨ç¨‹åºæˆ–WindowsæœåŠ¡ä¸­ä½¿ç”¨å®ƒã€‚ä»¥ä¸‹æ˜¯è¦æ±‚ï¼š&lt;/p&gt;
&lt;p&gt;1.NET Framework 4.5&lt;/p&gt;
&lt;p&gt;2.æ°¸ä¹…å­˜å‚¨ï¼ˆHangfireå°†åå°ä½œä¸šå’Œå…¶ä»–ä¸å¤„ç†æœ‰å…³çš„ä¿¡æ¯ä¿ç•™åœ¨æ°¸ä¹…æ€§å­˜å‚¨å™¨ä¸­ï¼Œæ‰€ä»¥éœ€è¦å­˜å‚¨åº“æ¥å­˜å‚¨å¦‚ï¼šMS SQL Serverï¼ŒRedisï¼ŒMySQLï¼ŒPostgreSqlç­‰ï¼‰&lt;/p&gt;
&lt;p&gt;3.Newtonsoft.Jsonåº“â‰¥5.0.1&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;ä¸‰ã€Hangfireçš„åŸºæœ¬ç‰¹å¾ä¸ä¼˜ç‚¹ï¼š&lt;/h2&gt;
&lt;p&gt;é€šè¿‡å®˜ç½‘ä¸­çš„ä¸€å¼ å›¾ç‰‡ä¾¿å¯çŸ¥é“å®ƒæ˜¯ä¸€ä¸ªå¤šä¹ˆä¼˜ç§€çš„ä»»åŠ¡è°ƒåº¦æ¡†æ¶,å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1336199/201909/1336199-20190930003952822-502302129.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;


&lt;h2&gt;å››ã€Hangfireå®‰è£…å’Œä½¿ç”¨ï¼š&lt;/h2&gt;
&lt;h3&gt;åœ¨NuGetä¸Šæœ‰å…³äºHangfireçš„ ä¸€ç³»åˆ—è½¯ä»¶åŒ…:&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;è¯¦æƒ…åœ°å€ï¼š&lt;/strong&gt;Â &lt;a href=&quot;https://www.nuget.org/packages?q=Hangfire&quot;&gt;https://www.nuget.org/packages?q=Hangfire&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;é€šè¿‡åœ¨ç¨‹åºåŒ…ç®¡ç†æ§åˆ¶å°ä¸­è¾“å…¥å®‰è£…å‘½ä»¤å®‰è£…Hangfireæ‰€éœ€NuGetåŒ…ï¼š&lt;/h3&gt;
&lt;h4&gt;&lt;strong&gt;ä½¿ç”¨MS SQL Serverä½œä¸ºå­˜å‚¨æ—¶æˆ‘ä»¬éœ€è¦å®‰è£…çš„NuGetï¼š&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;Â åœ¨ASP.NET åº”ç”¨ç¨‹åºä¸‹ä½¿ç”¨Hangfireå®‰è£…ï¼šÂ &lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
Install-Package Hangfire
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åœ¨æ§åˆ¶å°åº”ç”¨ç¨‹åºæˆ–è€…window serverä¸­å¤„ç†ä½œä¸šï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
Install-Package Hangfire.Core
Install-Package Hangfire.SqlServer
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;æ³¨æ„ï¼Œåœ¨æ§åˆ¶å°åº”ç”¨ç¨‹åºæˆ–è€…window serverä¸­ä¸æ¨èç›´æ¥å®‰è£…ï¼šInstall-Package Hangfire ï¼Œå› ä¸ºå®ƒåªæ˜¯ä¸€ä¸ªå¿«é€Ÿå¯åŠ¨è½¯ä»¶åŒ…ï¼Œå¹¶åŒ…å«æ‚¨å¯èƒ½ä¸éœ€è¦çš„ä¾èµ–é¡¹ï¼ˆä¾‹å¦‚ï¼ŒMicrosoft.Owin.Host.SystemWebç­‰æ— å…³ä¾èµ–é¡¹ï¼‰ã€‚&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h4&gt;&lt;strong&gt;ä½¿ç”¨MySQLä½œä¸ºå­˜å‚¨æ—¶æˆ‘ä»¬éœ€è¦å®‰è£…çš„NuGetï¼š&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;Â åœ¨ASP.NET åº”ç”¨ç¨‹åºä¸‹ä½¿ç”¨Hangfireå®‰è£…ï¼šÂ &lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
 Install-Package Hangfire.Core 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æˆ‘ä»¬è¿˜éœ€è¦å®‰è£…ä¸€ä¸ªMySqlå­˜å‚¨ï¼ˆHangfire.MySqlStorageï¼‰çš„æ‹“å±•ï¼Œæ³¨æ„å› ä¸ºHangfireæœ¬èº«æ˜¯ä¸æ”¯æŒMySQLå­˜å‚¨çš„ï¼Œè¿™æ˜¯åä¸ºï¼š&lt;span&gt;Arnoldas Gudasä½œè€…æ‹“å±•çš„&lt;/span&gt;ï¼š&lt;/p&gt;
&lt;p&gt;Nugetåœ°å€ï¼š&lt;a href=&quot;https://www.nuget.org/packages/Hangfire.MySqlStorage/&quot;&gt;https://www.nuget.org/packages/Hangfire.MySqlStorage/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å®‰è£…å‘½ä»¤ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;æ³¨æ„ï¼šå› ä¸ºæˆ‘çš„é¡¹ç›®æ˜¯.NET Framework,Version=v4.5.1ç‰ˆæœ¬çš„ï¼Œæ‰€ä»¥åªèƒ½å®‰è£…1.0.7ç‰ˆæœ¬çš„ï¼Œå¤§å®¶çœ‹éœ€æ±‚è€Œå®š&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
Install-Package Hangfire.MySqlStorage -Version 1.0.7
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å½“æˆ‘ä»¬è¦ä½¿ç”¨(å®¿ä¸»)IISæ‰˜ç®¡ASP.NETåº”ç”¨ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®‰è£…ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
Install-Package Microsoft.Owin.Host.SystemWeb -Version 4.0.1
&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;æ·»åŠ å’Œé…ç½®OWIN Startup.csï¼ŒåŠå…¶è¿æ¥å¯¹åº”çš„å­˜å‚¨æ•°æ®åº“ï¼š&lt;/h3&gt;
&lt;h4&gt;æ·»åŠ OWIN Startup.cs&lt;/h4&gt;
&lt;p&gt;ã€€ã€€è¿™é‡Œæ˜¯å½“ä½ çš„é¡¹ç›®ä¸­ä¸å­˜åœ¨Startup.csæ—¶æ‰éœ€è¦æ‰§è¡Œæ·»åŠ çš„æ“ä½œï¼&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1336199/201909/1336199-20190930012558086-1777119302.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h4&gt;&lt;span&gt;ä»€ä¹ˆæ˜¯OWIN Startup.csï¼š&lt;/span&gt;&lt;/h4&gt;
&lt;p&gt;ç®€å•æ¦‚è¿°ï¼šæ˜¯.NET å¹³å°å¼€æ”¾çš„webæ¥å£ï¼ŒStartupåˆ™æ˜¯.Netä¸webé€šè®¯ç®¡é“ï¼Œèµ·åˆ°è½¬å‘ï¼Œæ²Ÿé€šçš„ä½œç”¨ã€‚&lt;/p&gt;
&lt;p&gt;è¯¦æƒ…ä»‹ç»ï¼š&lt;a href=&quot;https://www.cnblogs.com/wj033/p/6065145.html&quot;&gt;https://www.cnblogs.com/wj033/p/6065145.html&lt;/a&gt;&lt;/p&gt;
&lt;h4&gt;åœ¨Startup.csä¸­è¿æ¥éœ€è¦ä½¿ç”¨çš„å­˜å‚¨åº“ï¼š&lt;/h4&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
        public void Configuration(IAppBuilder app)
        {
            //è¿ç”¨SqlServerå­˜å‚¨ï¼Œå¯¹åº”web.configä¸­çš„connectionStringsä¸­çš„name
            GlobalConfiguration.Configuration.UseSqlServerStorage(&quot;sqlserver_connection&quot;);&lt;br/&gt;//æ³¨æ„ï¼Œå½“ä½ ä½¿ç”¨çš„æ˜¯MySqlä½œä¸ºå­˜å‚¨æ—¶ï¼Œéœ€è¦å¦‚ä¸‹é…ç½®
            //è¿ç”¨MySqlå­˜å‚¨ï¼Œå¯¹åº”web.configä¸­çš„connectionStringsä¸­çš„name
            GlobalConfiguration.Configuration.UseStorage(new MySqlStorage(&quot;mysql_connection&quot;));

            app.UseHangfireDashboard();//é…ç½®åå°ä»ªè¡¨ç›˜
            app.UseHangfireServer();//å¼€å§‹ä½¿ç”¨HangfireæœåŠ¡

        }
&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;Web.configæ•°æ®åº“é…ç½®:&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;1.MS SQL Serverä¸­ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
&amp;lt;connectionStrings&amp;gt;
    &amp;lt;add name=&quot;sqlserver_connection&quot; connectionString=&quot;Data Source=.;Initial Catalog=MyFirstDb;Integrated Security=True&quot; providerName=&quot;System.Data.SqlClient&quot; /&amp;gt;&lt;br/&gt;&amp;lt;/connectionStrings&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;2.MySQLä¸­ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;34&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
 &amp;lt;connectionStrings&amp;gt;
    &amp;lt;add name=&quot;mysql_connection&quot; providerName=&quot;System.Data.MySqlClient&quot; connectionString=&quot;Server=123.xxx.xxx.xx;Port=3306;Database=MyFirstDb;Uid=root;&lt;br/&gt;Pwd=youpassword;charset=utf8;SslMode=none;Allow User Variables=True&quot; /&amp;gt;&lt;br/&gt;&amp;lt;/connectionStrings&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;è¿è¡Œç¨‹åºï¼Œè®¿é—®è°ƒåº¦æ§åˆ¶é¢æ¿ï¼š&lt;/h3&gt;
&lt;p&gt;ã€€ã€€å½“æˆ‘ä»¬å·²ç»å®Œæˆäº†ä¸Šé¢çš„ç›¸å…³é…ç½®åï¼Œä¸”ç¨‹åºèƒ½å¤Ÿæ­£å¸¸æ— bugçš„è¿è¡Œæ—¶ï¼Œæˆ‘ä»¬çš„Hangfire Dashboard(ä»ªè¡¨ç›˜)åœ¨æˆ‘ä»¬çš„æœ¬åœ°å°±å¯ä»¥æ­£å¸¸è®¿é—®äº†ï¼ˆHangfireä»ªè¡¨ç›˜é»˜è®¤åªæ”¯æŒæœ¬åœ°è®¿é—®ï¼‰ï¼Œå‡å¦‚éœ€è¦è¿œç¨‹å¯è®¿é—®çš„è¯æˆ‘ä»¬è¿˜éœ€è¦åšå¯¹åº”çš„é…ç½®æˆæƒæ“ä½œï¼ã€€ã€€&lt;/p&gt;
&lt;h4&gt;è¿è¡ŒæˆåŠŸï¼ŒæŸ¥çœ‹æ•°æ®åº“ä¸­æ˜¯å¦ç”Ÿæˆäº†ä¸Hangfireç›¸å…³çš„è¡¨ï¼š&lt;/h4&gt;
&lt;p&gt;ã€€ã€€é¦–æ¬¡è¿è¡ŒæˆåŠŸåï¼Œæ‰“å¼€æ•°æ®åº“å¯ä»¥çœ‹åˆ°Hangfireå·²ç»è‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»ºäº†å®šæ—¶ä»»åŠ¡çš„ä¸€äº›å®šæ—¶ä»»åŠ¡åˆ—è¡¨ï¼Œå®šæ—¶é˜Ÿåˆ—ï¼ŒæœåŠ¡ï¼ŒçŠ¶æ€ç­‰ç›¸å…³çš„æ•°æ®è¡¨ï¼ˆå±•ç°äº†Hangfireä½œç”¨çš„æŒä¹…åŒ–ç‰¹æ€§ï¼‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;a.MS SQL Serverä¸­ç”Ÿæˆçš„è¡¨ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1336199/201909/1336199-20190930015159406-225896067.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Â b.MySQLä¸­ç”Ÿæˆçš„è¡¨ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1336199/201909/1336199-20190930015239389-1347380917.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;h4&gt;Â è®¿é—®è°ƒåº¦æ§åˆ¶é¢æ¿ï¼š&lt;/h4&gt;
&lt;p&gt;æœ¬åœ°è®¿é—®æ–¹å¼ï¼šhttps://localhost:ç«¯å£å·/hangfire/&lt;/p&gt;
&lt;p&gt;è°ƒåº¦æ§åˆ¶é¢æ¿æ•ˆæœå›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1336199/201909/1336199-20190930015547922-1145741350.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;h3&gt;Â åå°å¸¸ç”¨ä»»åŠ¡è°ƒåº¦åˆ›å»ºå’Œä½¿ç”¨ï¼š&lt;/h3&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt;æ”¯æŒåŸºäºé˜Ÿåˆ—çš„ä»»åŠ¡å¤„ç†ï¼šä»»åŠ¡æ‰§è¡Œä¸æ˜¯åŒæ­¥çš„ï¼Œè€Œæ˜¯æ”¾åˆ°ä¸€ä¸ªæŒä¹…åŒ–é˜Ÿåˆ—ä¸­ï¼Œä»¥ä¾¿é©¬ä¸ŠæŠŠè¯·æ±‚æ§åˆ¶æƒè¿”å›ç»™è°ƒç”¨è€…ã€‚&lt;/span&gt;
&lt;span&gt;var&lt;/span&gt; jobId = BackgroundJob.Enqueue(() =&amp;gt; WriteLog(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;é˜Ÿåˆ—ä»»åŠ¡&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;));

&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å»¶è¿Ÿä»»åŠ¡æ‰§è¡Œï¼šä¸æ˜¯é©¬ä¸Šè°ƒç”¨æ–¹æ³•ï¼Œè€Œæ˜¯è®¾å®šä¸€ä¸ªæœªæ¥æ—¶é—´ç‚¹å†æ¥æ‰§è¡Œï¼Œå»¶è¿Ÿä½œä¸šä»…æ‰§è¡Œä¸€æ¬¡&lt;/span&gt;
&lt;span&gt;var&lt;/span&gt; jobId = BackgroundJob .Scheduleï¼ˆ()=&amp;gt; Console .WriteLineï¼ˆ&lt;span&gt;&quot;&quot;&lt;/span&gt;),TimeSpan .FromDays(&lt;span&gt;1&lt;/span&gt;));&lt;span&gt;//&lt;/span&gt;&lt;span&gt;ä¸€å¤©åæ‰§è¡Œè¯¥ä»»åŠ¡

&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å¾ªç¯ä»»åŠ¡æ‰§è¡Œï¼šä¸€è¡Œä»£ç æ·»åŠ é‡å¤æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå…¶å†…ç½®äº†å¸¸è§çš„æ—¶é—´å¾ªç¯æ¨¡å¼ï¼Œä¹Ÿå¯åŸºäºCRONè¡¨è¾¾å¼æ¥è®¾å®šå¤æ‚çš„æ¨¡å¼ã€‚ã€ç”¨çš„æ¯”è¾ƒçš„å¤šã€‘&lt;/span&gt;
RecurringJob.AddOrUpdate(() =&amp;gt; WriteLog(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;æ¯åˆ†é’Ÿæ‰§è¡Œä»»åŠ¡&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;), Cron.Minutely); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;æ³¨æ„æœ€å°å•ä½æ˜¯åˆ†é’Ÿ

&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å»¶ç»­æ€§ä»»åŠ¡æ‰§è¡Œï¼šç±»ä¼¼äº.NETä¸­çš„Task,å¯ä»¥åœ¨ç¬¬ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œä¹‹åç´§æ¥ç€å†æ¬¡æ‰§è¡Œå¦å¤–çš„ä»»åŠ¡&lt;/span&gt;
BackgroundJob.ContinueWith(jobId, () =&amp;gt; WriteLog(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;è¿ç»­ä»»åŠ¡&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;));
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;æ€»ç»“:&lt;/h2&gt;
&lt;p&gt;ã€€ã€€é€šè¿‡æœ¬æ¬¡é¡¹ç›®å®è·µçš„ç¡®è®©æˆ‘æ„Ÿå—åˆ°äº†Hangfireçš„é­…åŠ›æ‰€åœ¨ï¼ŒçœŸçš„å¯ä»¥è¯´æ˜¯ä¸Šæ‰‹ç®€å•ï¼Œå¼€ç®±å³ç”¨çš„ä¸€ä¸ªä»»åŠ¡è°ƒåº¦æ¡†æ¶ã€‚å¹¶ä¸”è¯¥æ¡†æ¶åšçš„æœ€å¥½çš„æ˜¯ï¼Œå®˜æ–¹æ–‡æ¡£è¯¦ç»†ï¼Œå¹¶ä¸”è¿˜æä¾›äº†å®Œæ•´çš„demoç¤ºä¾‹ã€‚æœ€åè¦ä¸ºHangfireçš„ä½œè€…ç‚¹èµï¼&lt;/p&gt;
&lt;h2&gt;Hangfireç›¸å…³ä½¿ç”¨å­¦ä¹ èµ„æ–™ï¼š&lt;/h2&gt;
&lt;p&gt;å®˜ç½‘åœ°å€ï¼š&lt;a href=&quot;https://www.hangfire.io/&quot;&gt;https://www.hangfire.io/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;GitHubæºç ï¼š&lt;a href=&quot;https://github.com/HangfireIO/Hangfire&quot;&gt;https://github.com/HangfireIO/Hangfire&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä¸­æ–‡æ–‡æ¡£ï¼š&lt;a href=&quot;https://www.bookstack.cn/read/Hangfire-zh-official/README.md&quot;&gt;https://www.bookstack.cn/read/Hangfire-zh-official/README.md&lt;/a&gt;Â &lt;/p&gt;
&lt;p&gt;GitHubä½¿ç”¨ç¤ºä¾‹æºç ï¼š&lt;a href=&quot;https://github.com/HangfireIO/Hangfire.Samples&quot;&gt;https://github.com/HangfireIO/Hangfire.Samples&lt;/a&gt;ï¼ˆåŒ…æ‹¬æ§åˆ¶å°åº”ç”¨ç¨‹åºï¼ŒwindowæœåŠ¡ï¼ŒASP.NET MVCï¼ŒWebFormï¼‰&lt;/p&gt;
&lt;p&gt;Hangfireä½¿ç”¨æ–‡ç« æ±‡æ€»ï¼š&lt;a href=&quot;https://www.bbsmax.com/R/xl56E0nrJr/&quot;&gt;https://www.bbsmax.com/R/xl56E0nrJr/&lt;/a&gt;&lt;/p&gt;

</description>
<pubDate>Sun, 29 Sep 2019 18:31:00 +0000</pubDate>
<dc:creator>è¿½é€æ—¶å…‰</dc:creator>
<og:description>å‰è¨€ï¼š å®šæ—¶ä»»åŠ¡è°ƒåº¦é—®é¢˜ï¼Œæ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„é—®é¢˜ã€‚ç½‘ä¸Šæœ‰è®¸å¤šå®šæ—¶ä»»åŠ¡è°ƒåº¦çš„è§£å†³æ–¹æ¡ˆï¼Œå¯¹äºæˆ‘è€Œè¨€å¾ˆæ—©ä»¥å‰ä¸»è¦æ˜¯ä½¿ç”¨Windowè®¡åˆ’å’ŒWindowæœåŠ¡æ¥åšä»»åŠ¡å®šæ—¶æ‰§è¡Œï¼Œç„¶åå°±å¼€å§‹ä½¿ç”¨å®šæ—¶ä»»åŠ¡è°ƒåº¦æ¡†æ¶Quar</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/Can-daydayup/p/11610747.html</dc:identifier>
</item>
<item>
<title>FreeSql å¯¼èˆªå±æ€§çš„è”çº§ä¿å­˜åŠŸèƒ½ - nicye</title>
<link>http://www.cnblogs.com/kellynic/p/11610724.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/kellynic/p/11610724.html</guid>
<description>&lt;h2 id=&quot;å†™åœ¨å‰é¢&quot;&gt;å†™åœ¨å‰é¢&lt;/h2&gt;
&lt;p&gt;FreeSql ä¸€ä¸ªæ¬¾ .net å¹³å°ä¸‹æ”¯æŒ .net framework 4.5+ã€.net core 2.1+ çš„å¼€æº ORMã€‚å•å…ƒæµ‹è¯•è¶…è¿‡3100+ï¼Œæ­£åœ¨ä¸æ–­å¸å¼•æ–°çš„å¼€å‘è€…ï¼Œç”Ÿå‘½ä¸æ¯å¼€å‘ä¸æ­¢ã€‚&lt;/p&gt;
&lt;p&gt;å’Œ EFCore ä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿæœ‰å¯¼èˆªå¯¹è±¡ï¼Œæ”¯æŒã€OneToOneã€‘(ä¸€å¯¹ä¸€)ã€ã€ManyToOneã€‘(å¤šå¯¹ä¸€)ã€ã€OneToManyã€‘(ä¸€å¯¹å¤š)ã€ã€ParentChildã€‘(çˆ¶å­)ã€ã€ManyToManyã€‘(å¤šå¯¹å¤š)ï¼Œå¯ä»¥çº¦å®šé…ç½®æˆ–æ‰‹å·¥é…ç½®å®ä½“é—´çš„å…³è”ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ fluent api è®¾ç½®å…³è”ã€‚&lt;/p&gt;
&lt;p&gt;è”çº§ä¿å­˜åŠŸèƒ½å¯å®ç°ä¿å­˜å¯¹è±¡çš„æ—¶å€™ï¼Œå°†å…¶ã€OneToManyã€‘ã€ã€ManyToManyã€‘å¯¼èˆªå±æ€§é›†åˆä¹Ÿä¸€å¹¶ä¿å­˜ï¼Œæœ¬æ–‡æ¡£è¯´æ˜å®ç°çš„æœºåˆ¶é˜²æ­¢è¯¯ç”¨ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æœºåˆ¶è§„åˆ™&quot;&gt;æœºåˆ¶è§„åˆ™&lt;/h2&gt;
&lt;p&gt;ã€ä¸€å¯¹å¤šã€‘æ¨¡å‹ä¸‹ï¼Œ ä¿å­˜æ—¶å¯è”çº§ä¿å­˜å®ä½“çš„å±æ€§é›†åˆã€‚å‡ºäºä½¿ç”¨å®‰å…¨è€ƒè™‘æˆ‘ä»¬æ²¡åšå®Œæ•´å¯¹æ¯”ï¼Œåªå®ç°å®ä½“å±æ€§é›†åˆçš„æ·»åŠ æˆ–æ›´æ–°æ“ä½œï¼Œæ‰€ä»¥ä¸ä¼šåˆ é™¤å®ä½“å±æ€§é›†åˆçš„æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;å®Œæ•´å¯¹æ¯”çš„åŠŸèƒ½ä½¿ç”¨èµ·æ¥å¤ªå±é™©ï¼Œè¯•æƒ³ä¸‹é¢çš„åœºæ™¯ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä¿å­˜çš„æ—¶å€™ï¼Œå®ä½“çš„å±æ€§é›†åˆæ˜¯ç©ºçš„ï¼Œå¦‚ä½•æ“ä½œï¼Ÿè®°å½•å…¨éƒ¨åˆ é™¤ï¼Ÿ&lt;/li&gt;
&lt;li&gt;ä¿å­˜çš„æ—¶å€™ï¼Œç”±äºæ•°æ®åº“ä¸­è®°å½•éå¸¸ä¹‹å¤šï¼Œé‚£ä¹ˆåªæƒ³ä¿å­˜å­è¡¨çš„éƒ¨åˆ†æ•°æ®ï¼Œæˆ–è€…åªéœ€è¦æ·»åŠ ï¼Œå¦‚ä½•æ“ä½œï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ã€å¤šå¯¹å¤šã€‘æ¨¡å‹ä¸‹ï¼Œæˆ‘ä»¬å¯¹ä¸­é—´è¡¨çš„ä¿å­˜æ˜¯å®Œæ•´å¯¹æ¯”æ“ä½œï¼Œå¯¹å¤–éƒ¨å®ä½“çš„æ“ä½œåªä½œæ–°å¢ï¼ˆæ³¨æ„ä¸ä¼šæ›´æ–°ï¼‰&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å±æ€§é›†åˆä¸ºç©ºæ—¶ï¼Œåˆ é™¤ä»–ä»¬çš„æ‰€æœ‰å…³è”æ•°æ®ï¼ˆä¸­é—´è¡¨ï¼‰&lt;/li&gt;
&lt;li&gt;å±æ€§é›†åˆä¸ä¸ºç©ºæ—¶ï¼Œä¸æ•°æ®åº“å­˜åœ¨çš„å…³è”æ•°æ®ï¼ˆä¸­é—´è¡¨ï¼‰å®Œæ•´å¯¹æ¯”ï¼Œè®¡ç®—å‡ºåº”è¯¥åˆ é™¤å’Œæ·»åŠ çš„è®°å½•&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;åŠŸèƒ½å¼€å¯å’Œå…³é—­&quot;&gt;åŠŸèƒ½å¼€å¯å’Œå…³é—­&lt;/h2&gt;
&lt;pre class=&quot;csharp&quot;&gt;
&lt;code&gt;IFreeSql fsql = new FreeSql.FreeSqlBuilder()

    .UseConnectionString(FreeSql.DataType.Sqlite, &quot;Data Source=|DataDirectory|/document22.db;Pooling=true;Max Pool Size=10&quot;)

    .UseAutoSyncStructure(true) //è‡ªåŠ¨åŒæ­¥ç»“æ„åˆ°æ•°æ®åº“
    .UseMonitorCommand(cmd =&amp;gt; Trace.WriteLine(cmd.CommandText)) //ç›‘å¬SQLå‘½ä»¤å¯¹è±¡ï¼Œåœ¨æ‰§è¡Œå
    .Build();&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½¿ç”¨ FreeSqlBuilder åˆ›å»ºå¥½çš„ IFreeSql å¯¹è±¡ï¼Œè”çº§ä¿å­˜åŠŸèƒ½ï¼Œé»˜è®¤æ˜¯æ‰“å¼€çš„ã€‚&lt;/p&gt;
&lt;p&gt;å…¨å±€å…³é—­ï¼š&lt;/p&gt;
&lt;pre class=&quot;csharp&quot;&gt;
&lt;code&gt;fsql.SetDbContextOptions(opt =&amp;gt; opt.EnableAddOrUpdateNavigateList = false);&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å±€éƒ¨å…³é—­ï¼š&lt;/p&gt;
&lt;pre class=&quot;csharp&quot;&gt;
&lt;code&gt;var repo = fsql.GetRepository&amp;lt;T&amp;gt;();
repo.DbContextOptions.EnableAddOrUpdateNavigateList = false;&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;ä¸€å¯¹å¤šonetomanyä»£ç æµ‹è¯•&quot;&gt;ä¸€å¯¹å¤šï¼ˆOneToManyï¼‰ä»£ç æµ‹è¯•&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†æ–¹ä¾¿å±•ç¤ºï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ª ParentChild å…³ç³»ï¼Œå…¶å®ä»–ä¹Ÿæ˜¯ OneToManyï¼Œåªä¸è¿‡æ˜¯è‡ªå·±æŒ‡å‘è‡ªå·±ã€‚&lt;/p&gt;
&lt;pre class=&quot;csharp&quot;&gt;
&lt;code&gt;[Table(Name = &quot;EAUNL_OTMP_CT&quot;)]
class CagetoryParent
{
    public Guid Id { get; set; }
    public string Name { get; set; }

    public Guid ParentId { get; set; }
    [Navigate(&quot;ParentId&quot;)]
    public List&amp;lt;CagetoryParent&amp;gt; Childs { get; set; }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åˆå§‹åŒ–æµ‹è¯•æ•°æ®ï¼š&lt;/p&gt;
&lt;pre class=&quot;csharp&quot;&gt;
&lt;code&gt;var cts = new[] {
    new CagetoryParent
    {
        Name = &quot;åˆ†ç±»1&quot;,
        Childs = new List&amp;lt;CagetoryParent&amp;gt;(new[]
        {
            new CagetoryParent { Name = &quot;åˆ†ç±»1_1&quot; },
            new CagetoryParent { Name = &quot;åˆ†ç±»1_2&quot; },
            new CagetoryParent { Name = &quot;åˆ†ç±»1_3&quot; }
        })
    },
    new CagetoryParent
    {
        Name = &quot;åˆ†ç±»2&quot;,
        Childs = new List&amp;lt;CagetoryParent&amp;gt;(new[]
        {
            new CagetoryParent { Name = &quot;åˆ†ç±»2_1&quot; },
            new CagetoryParent { Name = &quot;åˆ†ç±»2_2&quot; }
        })
    }
};&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;1ã€æ‰§è¡Œæ‰¹é‡æ’å…¥ï¼š&lt;/p&gt;
&lt;pre class=&quot;csharp&quot;&gt;
&lt;code&gt;var repo = g.sqlite.GetRepository&amp;lt;CagetoryParent&amp;gt;();
repo.Insert(cts);&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åˆå§‹æ‰§è¡Œè¯¥æ–¹æ³•æ—¶ï¼Œä¼šæ‰§è¡Œè‡ªåŠ¨åˆ›å»ºæ•°æ®åº“è¡¨æ“ä½œã€‚å¦‚æœè¡¨å·²å­˜åœ¨ï¼Œåˆ™æ‰§è¡Œå¯¹æ¯”ï¼Œè‹¥æ— å˜åŒ–åˆ™ä¸æ‰§è¡Œæ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;ç»è¿‡æ–­ç‚¹è°ƒè¯•ï¼Œåœ¨æ§åˆ¶å°å¯ä»¥çœ‹åˆ°è¾“å‡º SQL å†…å®¹ä¸ºï¼š&lt;/p&gt;
&lt;pre class=&quot;sql&quot;&gt;
&lt;code&gt;INSERT INTO &quot;EAUNL_OTMP_CT&quot;(&quot;Id&quot;, &quot;Name&quot;, &quot;ParentId&quot;) VALUES('5d90afcb-ed57-f6f4-0082-cb6b78eaaf9f', 'åˆ†ç±»1', '00000000-0000-0000-0000-000000000000'), ('5d90afcb-ed57-f6f4-0082-cb6c5b531b3e', 'åˆ†ç±»2', '00000000-0000-0000-0000-000000000000')

INSERT INTO &quot;EAUNL_OTMP_CT&quot;(&quot;Id&quot;, &quot;Name&quot;, &quot;ParentId&quot;) VALUES('5d90afcb-ed57-f6f4-0082-cb6d0c1c5f1a', 'åˆ†ç±»1_1', '5d90afcb-ed57-f6f4-0082-cb6b78eaaf9f'), ('5d90afcb-ed57-f6f4-0082-cb6e74bd8eef', 'åˆ†ç±»1_2', '5d90afcb-ed57-f6f4-0082-cb6b78eaaf9f'), ('5d90afcb-ed57-f6f4-0082-cb6f6267cc5f', 'åˆ†ç±»1_3', '5d90afcb-ed57-f6f4-0082-cb6b78eaaf9f'), ('5d90afcb-ed57-f6f4-0082-cb7057c41d46', 'åˆ†ç±»2_1', '5d90afcb-ed57-f6f4-0082-cb6c5b531b3e'), ('5d90afcb-ed57-f6f4-0082-cb7156e0375e', 'åˆ†ç±»2_2', '5d90afcb-ed57-f6f4-0082-cb6c5b531b3e')&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;2ã€æµ‹è¯•æ‰¹é‡ä¿®æ”¹ï¼š&lt;/p&gt;
&lt;pre class=&quot;csharp&quot;&gt;
&lt;code&gt;cts[0].Name = &quot;åˆ†ç±»11&quot;;
cts[0].Childs.Clear();
cts[1].Name = &quot;åˆ†ç±»22&quot;;
cts[1].Childs.Clear();
repo.Update(cts);&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ§åˆ¶å°çœ‹åˆ°è¾“å‡º SQL å†…å®¹ä¸ºï¼š&lt;/p&gt;
&lt;pre class=&quot;sql&quot;&gt;
&lt;code&gt;UPDATE &quot;EAUNL_OTMP_CT&quot; SET &quot;Name&quot; = CASE &quot;Id&quot; 
WHEN '5d90afcb-ed57-f6f4-0082-cb6b78eaaf9f' THEN 'åˆ†ç±»11' 
WHEN '5d90afcb-ed57-f6f4-0082-cb6c5b531b3e' THEN 'åˆ†ç±»22' END 
WHERE (&quot;Id&quot; IN ('5d90afcb-ed57-f6f4-0082-cb6b78eaaf9f','5d90afcb-ed57-f6f4-0082-cb6c5b531b3e'))&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Childs.Clear æ‰§è¡Œäº†ï¼Œä½†æ˜¯æ§åˆ¶å°æ²¡æœ‰è¾“å‡ºæ‰§è¡Œåˆ é™¤å­é›†åˆè¯­å¥ï¼Œè¯´æ˜æ²¡æœ‰åšå®Œæ•´çš„å¯¹æ¯”&lt;/p&gt;
&lt;p&gt;3ã€å­é›†åˆè¡¨å·²å­˜åœ¨æ•°æ®ï¼Œç»§ç»­æ·»åŠ æ•°æ®&lt;/p&gt;
&lt;pre class=&quot;csharp&quot;&gt;
&lt;code&gt;cts[0].Name = &quot;åˆ†ç±»111&quot;;
cts[0].Childs.Clear();
cts[0].Childs.Add(new CagetoryParent { Name = &quot;åˆ†ç±»1_33&quot; });
cts[1].Name = &quot;åˆ†ç±»222&quot;;
cts[1].Childs.Clear();
cts[1].Childs.Add(new CagetoryParent { Name = &quot;åˆ†ç±»2_22&quot; });
repo.Update(cts);&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ§åˆ¶å°çœ‹åˆ°è¾“å‡º SQL å†…å®¹ä¸ºï¼š&lt;/p&gt;
&lt;pre class=&quot;sql&quot;&gt;
&lt;code&gt;UPDATE &quot;EAUNL_OTMP_CT&quot; SET &quot;Name&quot; = CASE &quot;Id&quot; 
WHEN '5d90afcb-ed57-f6f4-0082-cb6b78eaaf9f' THEN 'åˆ†ç±»111' 
WHEN '5d90afcb-ed57-f6f4-0082-cb6c5b531b3e' THEN 'åˆ†ç±»222' END 
WHERE (&quot;Id&quot; IN ('5d90afcb-ed57-f6f4-0082-cb6b78eaaf9f','5d90afcb-ed57-f6f4-0082-cb6c5b531b3e'))

INSERT INTO &quot;EAUNL_OTMP_CT&quot;(&quot;Id&quot;, &quot;Name&quot;, &quot;ParentId&quot;) VALUES('5d90afe8-ed57-f6f4-0082-cb725df546ea', 'åˆ†ç±»1_33', '5d90afcb-ed57-f6f4-0082-cb6b78eaaf9f'), ('5d90afe8-ed57-f6f4-0082-cb7338a6214c', 'åˆ†ç±»2_22', '5d90afcb-ed57-f6f4-0082-cb6c5b531b3e')&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å†ä¸€æ¬¡éªŒè¯äº†ã€ä¸€å¯¹å¤šã€‘(OneToMany) ä¸ä¼šä½œå®Œæ•´å¯¹æ¯”ï¼Œåªä¼šæ·»åŠ æˆ–æ›´æ–°ï¼Œæ·»åŠ æµ‹è¯•æ•°æ®çš„æ—¶å€™ç”¨å®ƒèƒ½ç®€åŒ–å¥½å¤šä»£ç ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å¤šå¯¹å¤šmanytomanyä»£ç æµ‹è¯•&quot;&gt;å¤šå¯¹å¤šï¼ˆManyToManyï¼‰ä»£ç æµ‹è¯•&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸‹æˆ‘ä»¬åˆ›å»ºäº†ä¸‰ä¸ªç±»ï¼ŒSong ä¸ºæœ¬ä½“ç±»ï¼ŒTag ä¸ºå¤–éƒ¨ç±»ï¼ŒSongTag ä¸º ä¸­é—´å…³è”æ•°æ®ç±»ï¼Œé‡‡ç”¨å‘½åçº¦å®šçš„æ–¹å¼è¿›è¡Œäº†å¯¼èˆªå…³ç³»è®¾ç½®ã€‚&lt;/p&gt;
&lt;pre class=&quot;csharp&quot;&gt;
&lt;code&gt;[Table(Name = &quot;EAUNL_MTM_SONG&quot;)]
class Song
{
    public Guid Id { get; set; }
    public string Name { get; set; }
    public List&amp;lt;Tag&amp;gt; Tags { get; set; }
}
[Table(Name = &quot;EAUNL_MTM_TAG&quot;)]
class Tag
{
    public Guid Id { get; set; }
    public string TagName { get; set; }
    public List&amp;lt;Song&amp;gt; Songs { get; set; }
}
[Table(Name = &quot;EAUNL_MTM_SONGTAG&quot;)]
class SongTag
{
    public Guid SongId { get; set; }
    public Song Song { get; set; }
    public Guid TagId { get; set; }
    public Tag Tag { get; set; }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åˆå§‹åŒ–æµ‹è¯•æ•°æ®ï¼š&lt;/p&gt;
&lt;pre class=&quot;csharp&quot;&gt;
&lt;code&gt;var tags = new[] {
    new Tag { TagName = &quot;æµè¡Œ&quot; },
    new Tag { TagName = &quot;80å&quot; },
    new Tag { TagName = &quot;00å&quot; },
    new Tag { TagName = &quot;æ‘‡æ»š&quot; }
};
var ss = new[]
{
    new Song
    {
        Name = &quot;çˆ±ä½ ä¸€ä¸‡å¹´.mp3&quot;,
        Tags = new List&amp;lt;Tag&amp;gt;(new[]
        {
            tags[0], tags[1]
        })
    },
    new Song
    {
        Name = &quot;æç™½.mp3&quot;,
        Tags = new List&amp;lt;Tag&amp;gt;(new[]
        {
            tags[0], tags[2]
        })
    }
};&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;1ã€æ‰§è¡Œæ‰¹é‡æ’å…¥ï¼š&lt;/p&gt;
&lt;pre class=&quot;csharp&quot;&gt;
&lt;code&gt;var repo = g.sqlite.GetRepository&amp;lt;Song&amp;gt;();
repo.Insert(ss);&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åˆå§‹æ‰§è¡Œè¯¥æ–¹æ³•æ—¶ï¼Œä¼šæ‰§è¡Œè‡ªåŠ¨åˆ›å»ºæ•°æ®åº“è¡¨æ“ä½œã€‚å¦‚æœè¡¨å·²å­˜åœ¨ï¼Œåˆ™æ‰§è¡Œå¯¹æ¯”ï¼Œè‹¥æ— å˜åŒ–åˆ™ä¸æ‰§è¡Œæ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;ç»è¿‡æ–­ç‚¹è°ƒè¯•ï¼Œåœ¨æ§åˆ¶å°å¯ä»¥çœ‹åˆ°è¾“å‡º SQL å†…å®¹ä¸ºï¼š&lt;/p&gt;
&lt;pre class=&quot;sql&quot;&gt;
&lt;code&gt;INSERT INTO &quot;EAUNL_MTM_SONG&quot;(&quot;Id&quot;, &quot;Name&quot;) VALUES('5d90fdb3-6a6b-2c58-00c8-37974177440d', 'çˆ±ä½ ä¸€ä¸‡å¹´.mp3'), ('5d90fdb3-6a6b-2c58-00c8-37987f29b197', 'æç™½.mp3')

INSERT INTO &quot;EAUNL_MTM_TAG&quot;(&quot;Id&quot;, &quot;TagName&quot;) VALUES('5d90fdb7-6a6b-2c58-00c8-37991ead4f05', 'æµè¡Œ'), ('5d90fdbd-6a6b-2c58-00c8-379a0432a09c', '80å')

INSERT INTO &quot;EAUNL_MTM_SONGTAG&quot;(&quot;SongId&quot;, &quot;TagId&quot;) VALUES('5d90fdb3-6a6b-2c58-00c8-37974177440d', '5d90fdb7-6a6b-2c58-00c8-37991ead4f05'), ('5d90fdb3-6a6b-2c58-00c8-37974177440d', '5d90fdbd-6a6b-2c58-00c8-379a0432a09c')

INSERT INTO &quot;EAUNL_MTM_TAG&quot;(&quot;Id&quot;, &quot;TagName&quot;) VALUES('5d90fdcc-6a6b-2c58-00c8-379b5af59d25', '00å')

INSERT INTO &quot;EAUNL_MTM_SONGTAG&quot;(&quot;SongId&quot;, &quot;TagId&quot;) VALUES('5d90fdb3-6a6b-2c58-00c8-37987f29b197', '5d90fdb7-6a6b-2c58-00c8-37991ead4f05'), ('5d90fdb3-6a6b-2c58-00c8-37987f29b197', '5d90fdcc-6a6b-2c58-00c8-379b5af59d25')&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;2ã€æµ‹è¯•æ‰¹é‡æ›´æ–°ï¼Œå¹¶ä¸”ä¸­é—´è¡¨æ•°æ®æœ‰äº†å˜åŒ–&lt;/p&gt;
&lt;pre class=&quot;csharp&quot;&gt;
&lt;code&gt;ss[0].Name = &quot;çˆ±ä½ ä¸€ä¸‡å¹´.mp5&quot;;
ss[0].Tags.Clear();
ss[0].Tags.Add(tags[0]);
ss[1].Name = &quot;æç™½.mp5&quot;;
ss[1].Tags.Clear();
ss[1].Tags.Add(tags[3]);
repo.Update(ss);&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ§åˆ¶å°çœ‹åˆ°è¾“å‡º SQL å†…å®¹ä¸ºï¼š&lt;/p&gt;
&lt;pre class=&quot;sql&quot;&gt;
&lt;code&gt;UPDATE &quot;EAUNL_MTM_SONG&quot; SET &quot;Name&quot; = CASE &quot;Id&quot; 
WHEN '5d90fdb3-6a6b-2c58-00c8-37974177440d' THEN 'çˆ±ä½ ä¸€ä¸‡å¹´.mp5' 
WHEN '5d90fdb3-6a6b-2c58-00c8-37987f29b197' THEN 'æç™½.mp5' END 
WHERE (&quot;Id&quot; IN ('5d90fdb3-6a6b-2c58-00c8-37974177440d','5d90fdb3-6a6b-2c58-00c8-37987f29b197'))

SELECT a.&quot;SongId&quot;, a.&quot;TagId&quot; 
FROM &quot;EAUNL_MTM_SONGTAG&quot; a 
WHERE (a.&quot;SongId&quot; = '5d90fdb3-6a6b-2c58-00c8-37974177440d')

DELETE FROM &quot;EAUNL_MTM_SONGTAG&quot; WHERE (&quot;SongId&quot; = '5d90fdb3-6a6b-2c58-00c8-37974177440d' AND &quot;TagId&quot; = '5d90fdbd-6a6b-2c58-00c8-379a0432a09c')

INSERT INTO &quot;EAUNL_MTM_TAG&quot;(&quot;Id&quot;, &quot;TagName&quot;) VALUES('5d90febd-6a6b-2c58-00c8-379c21acfc72', 'æ‘‡æ»š')

SELECT a.&quot;SongId&quot;, a.&quot;TagId&quot; 
FROM &quot;EAUNL_MTM_SONGTAG&quot; a 
WHERE (a.&quot;SongId&quot; = '5d90fdb3-6a6b-2c58-00c8-37987f29b197')

DELETE FROM &quot;EAUNL_MTM_SONGTAG&quot; WHERE (&quot;SongId&quot; = '5d90fdb3-6a6b-2c58-00c8-37987f29b197' AND &quot;TagId&quot; = '5d90fdb7-6a6b-2c58-00c8-37991ead4f05' OR &quot;SongId&quot; = '5d90fdb3-6a6b-2c58-00c8-37987f29b197' AND &quot;TagId&quot; = '5d90fdcc-6a6b-2c58-00c8-379b5af59d25')

INSERT INTO &quot;EAUNL_MTM_SONGTAG&quot;(&quot;SongId&quot;, &quot;TagId&quot;) VALUES('5d90fdb3-6a6b-2c58-00c8-37987f29b197', '5d90febd-6a6b-2c58-00c8-379c21acfc72')&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ‰§è¡Œçš„è¿‡ç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ç¬¬ä¸€æ­¥ï¼Œæ‰¹é‡æ›´æ–° song æ•°æ®&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒæ­¥ï¼Œç”±äºæ˜¯ song æ˜¯æ›´æ–°æ“ä½œï¼Œæ‰€ä»¥éœ€è¦å…ˆæŸ¥å‡º song çš„å…³è”æ•°æ®&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸‰æ­¥ï¼Œåˆ é™¤ song çš„å…³è”æ•°æ®ï¼ˆtags[0] é™¤å¤–ï¼‰ï¼Œå› ä¸º tags[0] æ˜¯æœ¬æ¬¡ä¿å­˜æœ‰çš„æ•°æ®ï¼Œç›´ç™½çš„è¯´å°±æ˜¯åˆ é™¤éæœ¬æ¬¡ä¿å­˜çš„æ‰€æœ‰å…³è”æ•°æ®&lt;/li&gt;
&lt;li&gt;ç¬¬å››æ­¥ï¼Œæ·»åŠ  tags[3] æ‘‡æ»šå¤–éƒ¨æ•°æ®ï¼Œå› ä¸ºå®ƒè¿˜ä¸å­˜åœ¨å¤–éƒ¨è¡¨&lt;/li&gt;
&lt;li&gt;ç¬¬äº”æ­¥ï¼Œä¸ç¬¬äºŒæ­¥ç›¸åŒ&lt;/li&gt;
&lt;li&gt;ç¬¬å…­æ­¥ï¼Œä¸ç¬¬ä¸‰æ­¥ç›¸åŒ&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸ƒæ­¥ï¼Œæ’å…¥ä¸­é—´è¡¨æ•°æ®ï¼Œæç™½.mp5 ä¸ æ‘‡æ»š å…³è”&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¹ˆå¤šæ­¥å‘¢ï¼ŸåŸå› æ˜¯ song æµ‹è¯•æ•°æ®æ˜¯ä¸¤æ¡ï¼Œdouble äº†ï¼Œå¦‚æœå•æ¡è®°å½•å¤§æ¦‚æ˜¯ 4-5 æ¡ï¼Œå–å†³äºæ˜¯å¦æœ‰æ–°å¢çš„å…³è”æ•°æ®éœ€è¦æ·»åŠ ã€‚&lt;/p&gt;
&lt;p&gt;3ã€æµ‹è¯•æ¸…ç©ºå…³è”æ•°æ®&lt;/p&gt;
&lt;pre class=&quot;csharp&quot;&gt;
&lt;code&gt;ss[0].Name = &quot;çˆ±ä½ ä¸€ä¸‡å¹´.mp4&quot;;
ss[0].Tags.Clear();
ss[1].Name = &quot;æç™½.mp4&quot;;
ss[1].Tags.Clear();
repo.Update(ss);&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ§åˆ¶å°çœ‹åˆ°è¾“å‡º SQL å†…å®¹ä¸ºï¼š&lt;/p&gt;
&lt;pre class=&quot;sql&quot;&gt;
&lt;code&gt;DELETE FROM &quot;EAUNL_MTM_SONGTAG&quot; WHERE (&quot;SongId&quot; = '5d90fdb3-6a6b-2c58-00c8-37974177440d')

DELETE FROM &quot;EAUNL_MTM_SONGTAG&quot; WHERE (&quot;SongId&quot; = '5d90fdb3-6a6b-2c58-00c8-37987f29b197')

UPDATE &quot;EAUNL_MTM_SONG&quot; SET &quot;Name&quot; = CASE &quot;Id&quot; 
WHEN '5d90fdb3-6a6b-2c58-00c8-37974177440d' THEN 'çˆ±ä½ ä¸€ä¸‡å¹´.mp4' 
WHEN '5d90fdb3-6a6b-2c58-00c8-37987f29b197' THEN 'æç™½.mp4' END 
WHERE (&quot;Id&quot; IN ('5d90fdb3-6a6b-2c58-00c8-37974177440d','5d90fdb3-6a6b-2c58-00c8-37987f29b197'))&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å†ä¸€æ¬¡è¯æ˜ã€ManyToManyã€‘(å¤šå¯¹å¤š) æ¨¡å‹ä¸‹ï¼Œä¸­é—´è¡¨æ˜¯å®Œæ•´çš„å¯¹æ¯”æ“ä½œï¼Œå¤–éƒ¨è¡¨åªä¼šæ’å…¥ï¼Œä¸æ›´æ–°ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å¯¼èˆªå¯¹è±¡&quot;&gt;å¯¼èˆªå¯¹è±¡&lt;/h2&gt;
&lt;p&gt;é™¤äº†è”çº§ä¿å­˜åŠŸèƒ½å¤–ï¼Œå¯¼èˆªå¯¹è±¡çš„ä¸»è¦è®¾è®¡ç›®çš„ä¸ºå¿«é€Ÿåœ¨å®ä½“é—´ç‚¹ç‚¹ç‚¹ç©¿æ’ï¼Œä»¥ä¾¿æ‰§è¡Œ lambda è¡¨è¾¾å¼çš„æŸ¥è¯¢æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;å¦‚ä½•è‡ªå®šä¹‰å¯¼èˆªå…³ç³»ï¼Ÿ&lt;/p&gt;
&lt;pre class=&quot;csharp&quot;&gt;
&lt;code&gt;//å¯¼èˆªå±æ€§ï¼ŒOneToMany
[Navigate(&quot;song_id&quot;)]
public virtual List&amp;lt;song_tag&amp;gt; Obj_song_tag { get; set; }

//å¯¼èˆªå±æ€§ï¼ŒManyToOne/OneToOne
[Navigate(&quot;song_id&quot;)]
public virtual Song Obj_song { get; set; }

//å¯¼èˆªå±æ€§ï¼ŒManyToMany
[Navigate(ManyToMany = typeof(tag_song))]
public virtual List&amp;lt;tag&amp;gt; tags { get; set; }&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;å¯çº¦å®šï¼Œå¯ä¸çº¦å®šï¼›&lt;/li&gt;
&lt;li&gt;ä¸çº¦å®šçš„ï¼Œéœ€æŒ‡å®š Navigate ç‰¹æ€§å…³è”ï¼›&lt;/li&gt;
&lt;li&gt;æ— å…³è”çš„ï¼ŒæŸ¥è¯¢æ—¶å¯ä»¥æŒ‡æ˜ On æ¡ä»¶ï¼ŒLeftJoin(a =&amp;gt; a.Parent.Id == a.ParentId)ï¼›&lt;/li&gt;
&lt;li&gt;å·²å…³è”çš„ï¼Œç›´æ¥ä½¿ç”¨å¯¼èˆªå¯¹è±¡å°±è¡Œï¼ŒOn æ¡ä»¶ä¼šè‡ªåŠ¨é™„ä¸Šï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;hr/&gt;&lt;p&gt;ä¹Ÿå¯ä»¥ä½¿ç”¨ FluentApi åœ¨å¤–éƒ¨è®¾ç½®å¯¼èˆªå…³ç³»ï¼š&lt;/p&gt;
&lt;pre class=&quot;csharp&quot;&gt;
&lt;code&gt;fsql.CodeFirst.ConfigEntity&amp;lt;å®ä½“ç±»&amp;gt;(a =&amp;gt; a
    .Navigate(b =&amp;gt; b.roles, null, typeof(å¤šå¯¹å¤šä¸­é—´å®ä½“ç±»))
    .Navigate(b =&amp;gt; b.users, &quot;uid&quot;)
);&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¼˜å…ˆçº§ï¼Œç‰¹æ€§ &amp;gt; FluentApi&lt;/p&gt;
&lt;h2 id=&quot;å†™åœ¨æœ€å&quot;&gt;å†™åœ¨æœ€å&lt;/h2&gt;
&lt;p&gt;FreeSql å‘å¸ƒå·²ç»10ä¸ªæœˆäº†ï¼Œå…ƒæ—¦å°†å‘å¸ƒ 1.0 æ­£å¼ç‰ˆï¼Œå¸Œæœ›å°†æ¥å¯ä»¥æˆä¸º .net ç¤¾åŒºä¸‹ç»™åŠ›çš„è½®å­ï¼Œä¹Ÿç®—æ˜¯æˆ‘ä¸æ‰åå‡ å¹´å¯¹ .net ä¸ç¦»ä¸å¼ƒçš„ä¸€ç‚¹è´¡çŒ®å§ã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ› FreeSql è¶Šæ¥è¶Šå¥½ï¼Œ&lt;/p&gt;
&lt;p&gt;åŸ .net core è¶Šæ¥è¶Šå¥½ï¼ï¼ˆè™½ç„¶ 3.0 å‡çº§å¾ˆå¤šäººç¿»äº†è½¦ï¼Œæœ‰å¿ƒä¸­é‚£äº›æƒ…æ€€åœ¨ï¼Œç¿»äº†è½¦æœ€å¤šæ˜¯éª‚å‡ å¥è€Œå·²ï¼Œéª‚å®Œè¿˜å¾—æ¥ç€ç”¨å®ƒï¼‰&lt;/p&gt;
&lt;p&gt;æ•™ç¨‹åœ°å€ï¼š&lt;a href=&quot;https://www.cnblogs.com/kellynic/p/11531945.html&quot;&gt;ã€ŠFreeSql æ–°æ‰‹ä¸Šè·¯ç³»åˆ—æ•™ç¨‹å·²å‘å¸ƒåœ¨ cnblogsã€‹&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æºç åœ°å€ï¼š&lt;a href=&quot;https://github.com/2881099&quot; class=&quot;uri&quot;&gt;https://github.com/2881099&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Sun, 29 Sep 2019 17:35:00 +0000</pubDate>
<dc:creator>nicye</dc:creator>
<og:description>å†™åœ¨å‰é¢ FreeSql ä¸€ä¸ªæ¬¾ .net å¹³å°ä¸‹æ”¯æŒ .net framework 4.5+ã€.net core 2.1+ çš„å¼€æº ORMã€‚å•å…ƒæµ‹è¯•è¶…è¿‡3100+ï¼Œæ­£åœ¨ä¸æ–­å¸å¼•æ–°çš„å¼€å‘è€…ï¼Œç”Ÿå‘½ä¸æ¯å¼€</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/kellynic/p/11610724.html</dc:identifier>
</item>
<item>
<title>Micronaut å¾®æœåŠ¡ä¸­ä½¿ç”¨ Kafka - SpringForAll</title>
<link>http://www.cnblogs.com/springforall/p/11610643.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/springforall/p/11610643.html</guid>
<description>&lt;p&gt;ä»Šå¤©ï¼Œæˆ‘ä»¬å°†é€šè¿‡&lt;code&gt;Apache Kafka&lt;/code&gt;topicæ„å»ºä¸€äº›å½¼æ­¤å¼‚æ­¥é€šä¿¡çš„å¾®æœåŠ¡ã€‚æˆ‘ä»¬ä½¿ç”¨&lt;code&gt;Micronaut&lt;/code&gt;æ¡†æ¶ï¼Œå®ƒä¸ºä¸&lt;code&gt;Kafka&lt;/code&gt;é›†æˆæä¾›ä¸“é—¨çš„åº“ã€‚è®©æˆ‘ä»¬ç®€è¦ä»‹ç»ä¸€ä¸‹ç¤ºä¾‹ç³»ç»Ÿçš„æ¶æ„ã€‚æˆ‘ä»¬æœ‰å››ä¸ªå¾®å‹æœåŠ¡ï¼š&lt;code&gt;è®¢å•æœåŠ¡&lt;/code&gt;ï¼Œ&lt;code&gt;è¡Œç¨‹æœåŠ¡&lt;/code&gt;ï¼Œ&lt;code&gt;å¸æœºæœåŠ¡&lt;/code&gt;å’Œ&lt;code&gt;ä¹˜å®¢æœåŠ¡&lt;/code&gt;ã€‚è¿™äº›åº”ç”¨ç¨‹åºçš„å®ç°éå¸¸ç®€å•ã€‚å®ƒä»¬éƒ½æœ‰å†…å­˜å­˜å‚¨ï¼Œå¹¶è¿æ¥åˆ°åŒä¸€ä¸ª&lt;code&gt;Kafka&lt;/code&gt;å®ä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ç³»ç»Ÿçš„ä¸»è¦ç›®æ ‡æ˜¯ä¸ºå®¢æˆ·å®‰æ’è¡Œç¨‹ã€‚è®¢å•æœåŠ¡åº”ç”¨ç¨‹åºè¿˜å……å½“ç½‘å…³ã€‚å®ƒæ¥æ”¶æ¥è‡ªå®¢æˆ·çš„è¯·æ±‚ï¼Œä¿å­˜å†å²è®°å½•å¹¶å°†äº‹ä»¶å‘é€åˆ°&lt;code&gt;orders&lt;/code&gt;topicã€‚æ‰€æœ‰å…¶ä»–å¾®æœåŠ¡éƒ½åœ¨ç›‘å¬&lt;code&gt;orders&lt;/code&gt;è¿™ä¸ªtopicï¼Œå¹¶å¤„ç†&lt;code&gt;order-service&lt;/code&gt;å‘é€çš„è®¢å•ã€‚æ¯ä¸ªå¾®æœåŠ¡éƒ½æœ‰è‡ªå·±çš„ä¸“ç”¨topicï¼Œå…¶ä¸­å‘é€åŒ…å«æ›´æ”¹ä¿¡æ¯çš„äº‹ä»¶ã€‚æ­¤ç±»äº‹ä»¶ç”±å…¶ä»–ä¸€äº›å¾®æœåŠ¡æ¥æ”¶ã€‚æ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1234351/201909/1234351-20190930002631589-1816432052.png&quot; alt=&quot;img&quot;/&gt;&lt;/p&gt;
&lt;p&gt;åœ¨é˜…è¯»æœ¬æ–‡ä¹‹å‰ï¼Œæœ‰å¿…è¦ç†Ÿæ‚‰ä¸€ä¸‹&lt;code&gt;Micronaut&lt;/code&gt;æ¡†æ¶ã€‚æ‚¨å¯ä»¥é˜…è¯»ä¹‹å‰çš„ä¸€ç¯‡æ–‡ç« ï¼Œè¯¥æ–‡ç« æè¿°äº†é€šè¿‡&lt;code&gt;REST APIæ„å»ºå¾®æœåŠ¡é€šä¿¡çš„è¿‡ç¨‹&lt;/code&gt;:&lt;a href=&quot;https://piotrminkowski.wordpress.com/2019/01/25/quick-guide-to-microservices-with-micronaut-framework/&quot;&gt;ä½¿ç”¨microautæ¡†æ¶æ„å»ºå¾®æœåŠ¡çš„å¿«é€ŸæŒ‡å—&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è¿è¡Œkafka&quot;&gt;1. è¿è¡ŒKafka&lt;/h2&gt;
&lt;p&gt;è¦åœ¨æœ¬åœ°æœºå™¨ä¸Šè¿è¡Œ&lt;code&gt;Apache Kafka&lt;/code&gt;ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒçš„Dockeræ˜ åƒã€‚æœ€æ–°çš„é•œåƒæ˜¯ç”±https://hub.docker.com/u/wurstmeisterå…±äº«çš„ã€‚åœ¨å¯åŠ¨&lt;code&gt;Kafka&lt;/code&gt;å®¹å™¨ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»å¯åŠ¨&lt;code&gt;kafka&lt;/code&gt;æ‰€ç”¨ä½¿ç”¨çš„&lt;code&gt;ZooKeeper&lt;/code&gt;æœåŠ¡å™¨ã€‚å¦‚æœåœ¨&lt;code&gt;Windows&lt;/code&gt;ä¸Šè¿è¡Œ&lt;code&gt;Docker&lt;/code&gt;ï¼Œå…¶è™šæ‹Ÿæœºçš„é»˜è®¤åœ°å€æ˜¯&lt;code&gt;192.168.99.100&lt;/code&gt;ã€‚å®ƒè¿˜å¿…é¡»è®¾ç½®ä¸º&lt;code&gt;Kafka&lt;/code&gt;å®¹å™¨çš„ç¯å¢ƒã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Zookeeper&lt;/code&gt;å’Œ&lt;code&gt;Kafka&lt;/code&gt;å®¹å™¨éƒ½å°†åœ¨åŒä¸€ä¸ªç½‘ç»œä¸­å¯åŠ¨ã€‚åœ¨dockerä¸­è¿è¡ŒZookeeperä»¥&lt;code&gt;zookeeper&lt;/code&gt;çš„åç§°æä¾›æœåŠ¡ï¼Œå¹¶åœ¨æš´éœ²&lt;code&gt;2181&lt;/code&gt;ç«¯å£ã€‚&lt;code&gt;Kafka&lt;/code&gt;å®¹å™¨éœ€è¦åœ¨ç¯å¢ƒå˜é‡ä½¿ç”¨&lt;code&gt;KAFKA_ZOOKEEPER_CONNECT&lt;/code&gt;çš„åœ°å€ã€‚&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;$ docker network create kafka
$ docker run -d --name zookeeper --network kafka -p 2181:2181 wurstmeister/zookeeper
$ docker run -d --name kafka -p 9092:9092 --network kafka --env KAFKA_ADVERTISED_HOST_NAME=192.168.99.100 --env KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181 wurstmeister/kafka&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;å¼•å…¥micronaut-kafkaä¾èµ–&quot;&gt;2. å¼•å…¥Micronaut Kafkaä¾èµ–&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨&lt;code&gt;Kafka&lt;/code&gt;æ„å»ºçš„&lt;code&gt;microaut&lt;/code&gt;åº”ç”¨ç¨‹åºå¯ä»¥åœ¨HTTPæœåŠ¡å™¨å­˜åœ¨çš„æƒ…å†µä¸‹å¯åŠ¨ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸å­˜åœ¨HTTPæœåŠ¡å™¨çš„æƒ…å†µä¸‹å¯åŠ¨ã€‚è¦å¯ç”¨&lt;code&gt;Micronaut Kafka&lt;/code&gt;ï¼Œéœ€è¦æ·»åŠ &lt;code&gt;micronaut-kafka&lt;/code&gt;åº“åˆ°ä¾èµ–é¡¹ã€‚å¦‚æœæ‚¨æƒ³æš´éœ²&lt;code&gt;HTTP API&lt;/code&gt;ï¼Œæ‚¨è¿˜åº”è¯¥æ·»åŠ &lt;code&gt;micronaut-http-server-netty&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&quot;xml&quot;&gt;
&lt;code&gt;&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;io.micronaut.configuration&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;micronaut-kafka&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;io.micronaut&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;micronaut-http-server-netty&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;æ„å»ºè®¢å•å¾®æœåŠ¡&quot;&gt;3. æ„å»ºè®¢å•å¾®æœåŠ¡&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;è®¢å•å¾®æœåŠ¡&lt;/code&gt;æ˜¯å”¯ä¸€ä¸€ä¸ªå¯åŠ¨åµŒå…¥å¼HTTPæœåŠ¡å™¨å¹¶æš´éœ²&lt;code&gt;REST API&lt;/code&gt;çš„åº”ç”¨ç¨‹åºã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å¯ä»¥ä¸º&lt;code&gt;Kafka&lt;/code&gt;æä¾›å†…ç½®&lt;code&gt;Micronaut&lt;/code&gt;å¥åº·æ£€æŸ¥ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬é¦–å…ˆåº”è¯¥æ·»åŠ &lt;code&gt;micronaut-management&lt;/code&gt;ä¾èµ–:&lt;/p&gt;
&lt;pre class=&quot;xml&quot;&gt;
&lt;code&gt;&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;io.micronaut&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;micronaut-management&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œæˆ‘ä»¬å°†é€šè¿‡åœ¨&lt;code&gt;application.yml&lt;/code&gt;ä¸­å®šä¹‰ä»¥ä¸‹é…ç½®æ¥å¯ç”¨æ‰€æœ‰ç®¡ç†ç«¯ç‚¹å¹¶ç¦ç”¨å®ƒä»¬çš„HTTPèº«ä»½éªŒè¯ã€‚&lt;/p&gt;
&lt;pre class=&quot;yml&quot;&gt;
&lt;code&gt;endpoints:
  all:
    enabled: true
    sensitive: false&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç°åœ¨ï¼Œå¯ä»¥åœ¨åœ°å€http://localhost:8080/healthä¸‹ä½¿ç”¨&lt;code&gt;health check&lt;/code&gt;ã€‚æˆ‘ä»¬çš„ç¤ºä¾‹åº”ç”¨ç¨‹åºè¿˜å°†æš´éœ²&lt;code&gt;æ·»åŠ æ–°è®¢å•&lt;/code&gt;å’Œ&lt;code&gt;åˆ—å‡ºæ‰€æœ‰ä»¥å‰åˆ›å»ºçš„è®¢å•&lt;/code&gt;çš„ç®€å•&lt;code&gt;REST API&lt;/code&gt;ã€‚ä¸‹é¢æ˜¯æš´éœ²è¿™äº›ç«¯ç‚¹çš„&lt;code&gt;Micronaut&lt;/code&gt;æ§åˆ¶å™¨å®ç°:&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;@Controller(&quot;orders&quot;)
public class OrderController {

    @Inject
    OrderInMemoryRepository repository;
    @Inject
    OrderClient client;

    @Post
    public Order add(@Body Order order) {
        order = repository.add(order);
        client.send(order);
        return order;
    }

    @Get
    public Set&amp;lt;Order&amp;gt; findAll() {
        return repository.findAll();
    }

}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ¯ä¸ªå¾®æœåŠ¡éƒ½ä½¿ç”¨å†…å­˜å­˜å‚¨åº“å®ç°ã€‚ä»¥ä¸‹æ˜¯&lt;code&gt;è®¢å•å¾®æœåŠ¡ï¼ˆOrder-Serviceï¼‰&lt;/code&gt;ä¸­çš„å­˜å‚¨åº“å®ç°ï¼š&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;@Singleton
public class OrderInMemoryRepository {

    private Set&amp;lt;Order&amp;gt; orders = new HashSet&amp;lt;&amp;gt;();

    public Order add(Order order) {
        order.setId((long) (orders.size() + 1));
        orders.add(order);
        return order;
    }

    public void update(Order order) {
        orders.remove(order);
        orders.add(order);
    }

    public Optional&amp;lt;Order&amp;gt; findByTripIdAndType(Long tripId, OrderType type) {
        return orders.stream().filter(order -&amp;gt; order.getTripId().equals(tripId) &amp;amp;&amp;amp; order.getType() == type).findAny();
    }

    public Optional&amp;lt;Order&amp;gt; findNewestByUserIdAndType(Long userId, OrderType type) {
        return orders.stream().filter(order -&amp;gt; order.getUserId().equals(userId) &amp;amp;&amp;amp; order.getType() == type)
                .max(Comparator.comparing(Order::getId));
    }

    public Set&amp;lt;Order&amp;gt; findAll() {
        return orders;
    }

}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å†…å­˜å­˜å‚¨åº“å­˜å‚¨&lt;code&gt;Order&lt;/code&gt;å¯¹è±¡å®ä¾‹ã€‚&lt;code&gt;Order&lt;/code&gt;å¯¹è±¡è¿˜è¢«å‘é€åˆ°åä¸º&lt;code&gt;orders&lt;/code&gt;çš„Kafkatopicã€‚ä¸‹é¢æ˜¯&lt;code&gt;Order&lt;/code&gt;ç±»çš„å®ç°:&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;public class Order {

    private Long id;
    private LocalDateTime createdAt;
    private OrderType type;
    private Long userId;
    private Long tripId;
    private float currentLocationX;
    private float currentLocationY;
    private OrderStatus status;

    // ... GETTERS AND SETTERS
}&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;ä½¿ç”¨kafkaå¼‚æ­¥é€šä¿¡&quot;&gt;4. ä½¿ç”¨Kafkaå¼‚æ­¥é€šä¿¡&lt;/h2&gt;
&lt;p&gt;ç°åœ¨ï¼Œè®©æˆ‘ä»¬æƒ³ä¸€ä¸ªå¯ä»¥é€šè¿‡ç¤ºä¾‹ç³»ç»Ÿå®ç°çš„ç”¨ä¾‹â€”â€”&lt;code&gt;æ·»åŠ æ–°çš„è¡Œç¨‹&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬åˆ›å»ºäº†&lt;code&gt;OrderType.NEW_TRIP&lt;/code&gt;ç±»å‹çš„æ–°è®¢å•ã€‚åœ¨æ­¤ä¹‹åï¼Œ(1)&lt;code&gt;è®¢å•æœåŠ¡&lt;/code&gt;åˆ›å»ºä¸€ä¸ªè®¢å•å¹¶å°†å…¶å‘é€åˆ°&lt;code&gt;orders&lt;/code&gt;topicã€‚è®¢å•ç”±ä¸‰ä¸ªå¾®æœåŠ¡æ¥æ”¶:&lt;code&gt;å¸æœºæœåŠ¡&lt;/code&gt;ã€&lt;code&gt;ä¹˜å®¢æœåŠ¡&lt;/code&gt;å’Œ&lt;code&gt;è¡Œç¨‹æœåŠ¡&lt;/code&gt;ã€‚&lt;br/&gt;(2)æ‰€æœ‰è¿™äº›åº”ç”¨ç¨‹åºéƒ½å¤„ç†è¿™ä¸ªæ–°è®¢å•ã€‚&lt;code&gt;ä¹˜å®¢æœåŠ¡&lt;/code&gt;åº”ç”¨ç¨‹åºæ£€æŸ¥ä¹˜å®¢å¸æˆ·ä¸Šæ˜¯å¦æœ‰è¶³å¤Ÿçš„èµ„é‡‘ã€‚å¦‚æœæ²¡æœ‰ï¼Œå®ƒå°±å–æ¶ˆäº†è¡Œç¨‹ï¼Œå¦åˆ™ä»€ä¹ˆä¹Ÿåšä¸äº†ã€‚&lt;code&gt;å¸æœºæœåŠ¡&lt;/code&gt;æ­£åœ¨å¯»æ‰¾æœ€è¿‘å¯ç”¨çš„å¸æœºï¼Œ(3)&lt;code&gt;è¡Œç¨‹æœåŠ¡&lt;/code&gt;åˆ›å»ºå’Œå­˜å‚¨æ–°çš„è¡Œç¨‹ã€‚&lt;code&gt;å¸æœºæœåŠ¡&lt;/code&gt;å’Œ&lt;code&gt;è¡Œç¨‹æœåŠ¡&lt;/code&gt;éƒ½å°†äº‹ä»¶å‘é€åˆ°å®ƒä»¬çš„topic(&lt;code&gt;drivers&lt;/code&gt;, &lt;code&gt;trips&lt;/code&gt;),å…¶ä¸­åŒ…å«ç›¸å…³æ›´æ”¹çš„ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;æ¯ä¸€ä¸ªäº‹ä»¶å¯ä»¥è¢«å…¶ä»–&lt;code&gt;microservices&lt;/code&gt;è®¿é—®,ä¾‹å¦‚ï¼Œ(4)&lt;code&gt;è¡Œç¨‹æœåŠ¡&lt;/code&gt;ä¾¦å¬æ¥è‡ª&lt;code&gt;å¸æœºæœåŠ¡&lt;/code&gt;çš„äº‹ä»¶ï¼Œä»¥ä¾¿ä¸ºè¡Œç¨‹åˆ†é…ä¸€ä¸ªæ–°çš„å¸æœº&lt;/p&gt;
&lt;p&gt;ä¸‹å›¾è¯´æ˜äº†åœ¨æ·»åŠ æ–°çš„è¡Œç¨‹æ—¶ï¼Œæˆ‘ä»¬çš„å¾®æœåŠ¡ä¹‹é—´çš„é€šä¿¡è¿‡ç¨‹ã€‚&lt;br/&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1234351/201909/1234351-20190930002633017-1440201269.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç»§ç»­è®¨è®ºå®ç°ç»†èŠ‚ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å‘é€è®¢å•&quot;&gt;4.1. å‘é€è®¢å•&lt;/h3&gt;
&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºKafka å®¢æˆ·ç«¯ï¼Œè´Ÿè´£å‘topicå‘é€æ¶ˆæ¯ã€‚æˆ‘ä»¬åˆ›å»ºçš„ä¸€ä¸ªæ¥å£ï¼Œå‘½åä¸º&lt;code&gt;OrderClient&lt;/code&gt;ï¼Œä¸ºå®ƒæ·»åŠ &lt;code&gt;@KafkaClient&lt;/code&gt;å¹¶å£°æ˜ç”¨äºå‘é€æ¶ˆæ¯çš„ä¸€ä¸ªæˆ–å¤šä¸ªæ–¹æ³•ã€‚æ¯ä¸ªæ–¹æ³•éƒ½åº”è¯¥é€šè¿‡&lt;code&gt;@Topic&lt;/code&gt;æ³¨è§£è®¾ç½®ç›®æ ‡topicåç§°ã€‚å¯¹äºæ–¹æ³•å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‰ä¸ªæ³¨è§£&lt;code&gt;@KafkaKey&lt;/code&gt;ã€&lt;code&gt;@Body&lt;/code&gt;æˆ–&lt;code&gt;@Header&lt;/code&gt;ã€‚&lt;code&gt;@KafkaKey&lt;/code&gt;ç”¨äºåˆ†åŒºï¼Œè¿™æ˜¯æˆ‘ä»¬çš„ç¤ºä¾‹åº”ç”¨ç¨‹åºæ‰€éœ€è¦çš„ã€‚åœ¨ä¸‹é¢å¯ç”¨çš„å®¢æˆ·ç«¯å®ç°ä¸­ï¼Œæˆ‘ä»¬åªä½¿ç”¨&lt;code&gt;@Body&lt;/code&gt;æ³¨è§£ã€‚&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;@KafkaClient
public interface OrderClient {

    @Topic(&quot;orders&quot;)
    void send(@Body Order order);

}&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;æ¥æ”¶è®¢å•&quot;&gt;4.2. æ¥æ”¶è®¢å•&lt;/h3&gt;
&lt;p&gt;ä¸€æ—¦å®¢æˆ·ç«¯å‘é€äº†ä¸€ä¸ªè®¢å•ï¼Œå®ƒå°±ä¼šè¢«ç›‘å¬&lt;code&gt;orders&lt;/code&gt;topicçš„æ‰€æœ‰å…¶ä»–å¾®æœåŠ¡æ¥æ”¶ã€‚ä¸‹é¢æ˜¯&lt;code&gt;å¸æœºæœåŠ¡&lt;/code&gt;ä¸­çš„ç›‘å¬å™¨å®ç°ã€‚ç›‘å¬å™¨ç±»&lt;code&gt;OrderListener&lt;/code&gt;åº”è¯¥æ·»åŠ &lt;code&gt;@KafkaListener&lt;/code&gt;æ³¨è§£ã€‚æˆ‘ä»¬å¯ä»¥å£°æ˜&lt;code&gt;groupId&lt;/code&gt;ä½œä¸ºä¸€ä¸ªæ³¨è§£å‚æ•°ï¼Œä»¥é˜²æ­¢å•ä¸ªåº”ç”¨ç¨‹åºçš„å¤šä¸ªå®ä¾‹æ¥æ”¶ç›¸åŒçš„æ¶ˆæ¯ã€‚ç„¶åï¼Œæˆ‘ä»¬å£°æ˜ç”¨äºå¤„ç†ä¼ å…¥æ¶ˆæ¯çš„æ–¹æ³•ã€‚ä¸å®¢æˆ·ç«¯æ–¹æ³•ç›¸åŒï¼Œåº”è¯¥é€šè¿‡&lt;code&gt;@Topic&lt;/code&gt;æ³¨è§£è®¾ç½®ç›®æ ‡topicåç§°ï¼Œå› ä¸ºæˆ‘ä»¬æ­£åœ¨ç›‘å¬&lt;code&gt;Order&lt;/code&gt;å¯¹è±¡ï¼Œæ‰€ä»¥åº”è¯¥ä½¿ç”¨&lt;code&gt;@Body&lt;/code&gt;æ³¨è§£â€”â€”ä¸å¯¹åº”çš„å®¢æˆ·ç«¯æ–¹æ³•ç›¸åŒã€‚&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;@KafkaListener(groupId = &quot;driver&quot;)
public class OrderListener {

    private static final Logger LOGGER = LoggerFactory.getLogger(OrderListener.class);

    private DriverService service;

    public OrderListener(DriverService service) {
        this.service = service;
    }

    @Topic(&quot;orders&quot;)
    public void receive(@Body Order order) {
        LOGGER.info(&quot;Received: {}&quot;, order);
        switch (order.getType()) {
            case NEW_TRIP -&amp;gt; service.processNewTripOrder(order);
        }
    }

}&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;å‘é€åˆ°å…¶ä»–topic&quot;&gt;4.3. å‘é€åˆ°å…¶ä»–topic&lt;/h3&gt;
&lt;p&gt;ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹&lt;code&gt;å¸æœºæœåŠ¡&lt;/code&gt;ä¸­çš„&lt;code&gt;processNewTripOrder&lt;/code&gt;æ–¹æ³•ã€‚&lt;code&gt;DriverService&lt;/code&gt;æ³¨å…¥ä¸¤ä¸ªä¸åŒçš„&lt;code&gt;Kafka Client&lt;/code&gt;&lt;br/&gt;bean: &lt;code&gt;OrderClient&lt;/code&gt;å’Œ&lt;code&gt;DriverClient&lt;/code&gt;ã€‚å½“å¤„ç†æ–°è®¢å•æ—¶ï¼Œå®ƒå°†è¯•å›¾å¯»æ‰¾ä¸å‘é€è®¢å•çš„ä¹˜å®¢æœ€è¿‘çš„å¸æœºã€‚æ‰¾åˆ°ä»–ä¹‹åï¼Œå°†è¯¥å¸æœºçš„çŠ¶æ€æ›´æ”¹ä¸º&lt;code&gt;UNAVAILABLE&lt;/code&gt;ï¼Œå¹¶å°†å¸¦æœ‰&lt;code&gt;Driver&lt;/code&gt;å¯¹è±¡çš„äº‹ä»¶å‘é€åˆ°&lt;code&gt;drivers&lt;/code&gt;topicã€‚&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;@Singleton
public class DriverService {

    private static final Logger LOGGER = LoggerFactory.getLogger(DriverService.class);

    private DriverClient client;
    private OrderClient orderClient;
    private DriverInMemoryRepository repository;

    public DriverService(DriverClient client, OrderClient orderClient, DriverInMemoryRepository repository) {
        this.client = client;
        this.orderClient = orderClient;
        this.repository = repository;
    }

    public void processNewTripOrder(Order order) {
        LOGGER.info(&quot;Processing: {}&quot;, order);
        Optional&amp;lt;Driver&amp;gt; driver = repository.findNearestDriver(order.getCurrentLocationX(), order.getCurrentLocationY());
        driver.ifPresent(driverLocal -&amp;gt; {
            driverLocal.setStatus(DriverStatus.UNAVAILABLE);
            repository.updateDriver(driverLocal);
            client.send(driverLocal, String.valueOf(order.getId()));
            LOGGER.info(&quot;Message sent: {}&quot;, driverLocal);
        });
    }

    // ...
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™æ˜¯&lt;code&gt;Kafka Client&lt;/code&gt;åœ¨&lt;code&gt;å¸æœºæœåŠ¡&lt;/code&gt;ä¸­çš„å®ç°ï¼Œç”¨äºå‘&lt;code&gt;driver&lt;/code&gt;topicå‘é€æ¶ˆæ¯ã€‚å› ä¸ºæˆ‘ä»¬éœ€è¦å°†&lt;code&gt;Driver&lt;/code&gt;ä¸&lt;code&gt;Order&lt;/code&gt; å…³è”èµ·æ¥ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨&lt;code&gt;@Header&lt;/code&gt;æ³¨è§£ çš„&lt;code&gt;orderId&lt;/code&gt;å‚æ•°ã€‚æ²¡æœ‰å¿…è¦æŠŠå®ƒåŒ…æ‹¬åˆ°&lt;code&gt;Driver&lt;/code&gt;ç±»ä¸­ï¼Œå°†å…¶åˆ†é…ç»™ç›‘å¬å™¨ç«¯çš„æ­£ç¡®è¡Œç¨‹ã€‚&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;@KafkaClient
public interface DriverClient {

    @Topic(&quot;drivers&quot;)
    void send(@Body Driver driver, @Header(&quot;Order-Id&quot;) String orderId);

}&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;æœåŠ¡é—´é€šä¿¡&quot;&gt;4.4. æœåŠ¡é—´é€šä¿¡&lt;/h3&gt;
&lt;p&gt;ç”±&lt;code&gt;DriverListener&lt;/code&gt;æ”¶åˆ°&lt;code&gt;@KafkaListener&lt;/code&gt;åœ¨&lt;code&gt;è¡Œç¨‹æœåŠ¡&lt;/code&gt;ä¸­å£°æ˜ã€‚å®ƒç›‘å¬ä¼ å…¥åˆ°&lt;code&gt;trip&lt;/code&gt;topicã€‚æ¥æ”¶æ–¹æ³•çš„å‚æ•°å’Œå®¢æˆ·ç«¯å‘é€æ–¹æ³•çš„ç±»ä¼¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;@KafkaListener(groupId = &quot;trip&quot;)
public class DriverListener {

    private static final Logger LOGGER = LoggerFactory.getLogger(OrderListener.class);

    private TripService service;

    public DriverListener(TripService service) {
        this.service = service;
    }

    @Topic(&quot;drivers&quot;)
    public void receive(@Body Driver driver, @Header(&quot;Order-Id&quot;) String orderId) {
        LOGGER.info(&quot;Received: driver-&amp;gt;{}, header-&amp;gt;{}&quot;, driver, orderId);
        service.processNewDriver(driver);
    }

}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æœ€åä¸€æ­¥ï¼Œå°†&lt;code&gt;orderId&lt;/code&gt;æŸ¥è¯¢åˆ°çš„è¡Œç¨‹&lt;code&gt;Trip&lt;/code&gt;ä¸&lt;code&gt;driverId&lt;/code&gt;å…³è”ï¼Œè¿™æ ·æ•´ä¸ªæµç¨‹å°±ç»“æŸã€‚&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;@Singleton
public class TripService {

    private static final Logger LOGGER = LoggerFactory.getLogger(TripService.class);

    private TripInMemoryRepository repository;
    private TripClient client;

    public TripService(TripInMemoryRepository repository, TripClient client) {
        this.repository = repository;
        this.client = client;
    }


    public void processNewDriver(Driver driver, String orderId) {
        LOGGER.info(&quot;Processing: {}&quot;, driver);
        Optional&amp;lt;Trip&amp;gt; trip = repository.findByOrderId(Long.valueOf(orderId));
        trip.ifPresent(tripLocal -&amp;gt; {
            tripLocal.setDriverId(driver.getId());
            repository.update(tripLocal);
        });
    }

    // ... OTHER METHODS

}&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;è·Ÿè¸ª&quot;&gt;5. è·Ÿè¸ª&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥ä½¿ç”¨&lt;code&gt;Micronaut Kafka&lt;/code&gt;è½»æ¾åœ°å¯ç”¨åˆ†å¸ƒå¼è·Ÿè¸ªã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å¯ç”¨å’Œé…ç½®&lt;code&gt;Micronaut&lt;/code&gt;è·Ÿè¸ªã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œé¦–å…ˆåº”è¯¥æ·»åŠ ä¸€äº›ä¾èµ–é¡¹ï¼š&lt;/p&gt;
&lt;pre class=&quot;xml&quot;&gt;
&lt;code&gt;&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;io.micronaut&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;micronaut-tracing&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;io.zipkin.brave&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;brave-instrumentation-http&amp;lt;/artifactId&amp;gt;
    &amp;lt;scope&amp;gt;runtime&amp;lt;/scope&amp;gt;
&amp;lt;/dependency&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;io.zipkin.reporter2&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;zipkin-reporter&amp;lt;/artifactId&amp;gt;
    &amp;lt;scope&amp;gt;runtime&amp;lt;/scope&amp;gt;
&amp;lt;/dependency&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;io.opentracing.brave&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;brave-opentracing&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;io.opentracing.contrib&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;opentracing-kafka-client&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;0.0.16&amp;lt;/version&amp;gt;
    &amp;lt;scope&amp;gt;runtime&amp;lt;/scope&amp;gt;
&amp;lt;/dependency&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬è¿˜éœ€è¦åœ¨&lt;code&gt;application.yml&lt;/code&gt;é…ç½®æ–‡ä»¶ä¸­ï¼Œé…ç½®Zipkin çš„è¿½è¸ªçš„åœ°å€ç­‰ã€‚&lt;/p&gt;
&lt;pre class=&quot;yml&quot;&gt;
&lt;code&gt;tracing:
  zipkin:
    enabled: true
    http:
      url: http://192.168.99.100:9411
    sampler:
      probability: 1&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨å¯åŠ¨åº”ç”¨ç¨‹åºä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»è¿è¡Œ&lt;code&gt;Zipkin&lt;/code&gt;å®¹å™¨ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;$ docker run -d --name zipkin -p 9411:9411 openzipkin/zipkin&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;æ€»ç»“&quot;&gt;6. æ€»ç»“&lt;/h2&gt;
&lt;p&gt;åœ¨æœ¬æ–‡ä¸­ï¼Œæ‚¨å°†äº†è§£é€šè¿‡&lt;code&gt;Apache Kafka&lt;/code&gt;ä½¿ç”¨å¼‚æ­¥é€šä¿¡æ„å»ºå¾®æœåŠ¡æ¶æ„çš„è¿‡ç¨‹ã€‚æˆ‘å·²ç»å‘å¤§å®¶å±•ç¤ºäº†&lt;code&gt;Microaut Kafka&lt;/code&gt;åº“æœ€é‡è¦çš„ç‰¹æ€§ï¼Œå®ƒå…è®¸æ‚¨è½»æ¾åœ°å£°æ˜&lt;code&gt;Kafka&lt;/code&gt;topicçš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ï¼Œä¸ºæ‚¨çš„å¾®æœåŠ¡å¯ç”¨&lt;code&gt;å¥åº·æ£€æŸ¥&lt;/code&gt;å’Œ&lt;code&gt;åˆ†å¸ƒå¼è·Ÿè¸ª&lt;/code&gt;ã€‚æˆ‘å·²ç»ä¸ºæˆ‘ä»¬çš„ç³»ç»Ÿæè¿°äº†ä¸€ä¸ªç®€å•çš„åœºæ™¯çš„å®ç°ï¼ŒåŒ…æ‹¬æ ¹æ®å®¢æˆ·çš„è¯·æ±‚æ·»åŠ ä¸€ä¸ªæ–°çš„è¡Œç¨‹ã€‚æœ¬ç¤ºä¾‹ç³»ç»Ÿçš„æ•´ä½“å®ç°ï¼Œè¯·æŸ¥çœ‹GitHubä¸Šçš„&lt;a href=&quot;https://github.com/piomin/sample-kafka-micronaut-microservices.git.&quot;&gt;æºä»£ç &lt;/a&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;5.4179104477612&quot;&gt;
&lt;p&gt;åŸæ–‡é“¾æ¥ï¼šhttps://piotrminkowski.wordpress.com/2019/08/06/kafka-in-microservices-with-micronaut/&lt;/p&gt;
&lt;p&gt;ä½œè€…ï¼š&lt;a href=&quot;https://piotrminkowski.wordpress.com/&quot;&gt;Piotr's&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è¯‘è€…ï¼š&lt;a href=&quot;https://blog.csdn.net/u010046908&quot;&gt;æä¸œ&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
<pubDate>Sun, 29 Sep 2019 16:27:00 +0000</pubDate>
<dc:creator>SpringForAll</dc:creator>
<og:description>ä»Šå¤©ï¼Œæˆ‘ä»¬å°†é€šè¿‡ topicæ„å»ºä¸€äº›å½¼æ­¤å¼‚æ­¥é€šä¿¡çš„å¾®æœåŠ¡ã€‚æˆ‘ä»¬ä½¿ç”¨ æ¡†æ¶ï¼Œå®ƒä¸ºä¸ é›†æˆæä¾›ä¸“é—¨çš„åº“ã€‚è®©æˆ‘ä»¬ç®€è¦ä»‹ç»ä¸€ä¸‹ç¤ºä¾‹ç³»ç»Ÿçš„æ¶æ„ã€‚æˆ‘ä»¬æœ‰å››ä¸ªå¾®å‹æœåŠ¡ï¼š ï¼Œ`è¡Œç¨‹æœåŠ¡ å¸æœºæœåŠ¡ ä¹˜å®¢æœåŠ¡ Kafka</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/springforall/p/11610643.html</dc:identifier>
</item>
<item>
<title>åˆ†åº“åˆ†è¡¨ä¹‹åï¼Œid ä¸»é”®å¦‚ä½•å¤„ç†ï¼Ÿ - ç±³å…œJava</title>
<link>http://www.cnblogs.com/midoujava/p/11610492.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/midoujava/p/11610492.html</guid>
<description>&lt;p&gt;&lt;img src=&quot;http://p1.pstatp.com/large/pgc-image/c1864375cefe4961a2c87434d1a0ed5e&quot; title=&quot;å…³æ³¨ç±³å…œJava&quot; alt=&quot;å…³æ³¨ç±³å…œJava.md&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;é¢è¯•é¢˜&quot;&gt;é¢è¯•é¢˜&lt;/h2&gt;
&lt;p&gt;åˆ†åº“åˆ†è¡¨ä¹‹åï¼Œid ä¸»é”®å¦‚ä½•å¤„ç†ï¼Ÿ&lt;/p&gt;
&lt;h2 id=&quot;é¢è¯•å®˜å¿ƒç†åˆ†æ&quot;&gt;é¢è¯•å®˜å¿ƒç†åˆ†æ&lt;/h2&gt;
&lt;p&gt;å…¶å®è¿™æ˜¯åˆ†åº“åˆ†è¡¨ä¹‹åä½ å¿…ç„¶è¦é¢å¯¹çš„ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ id å’‹ç”Ÿæˆï¼Ÿå› ä¸ºè¦æ˜¯åˆ†æˆå¤šä¸ªè¡¨ä¹‹åï¼Œæ¯ä¸ªè¡¨éƒ½æ˜¯ä» 1 å¼€å§‹ç´¯åŠ ï¼Œé‚£è‚¯å®šä¸å¯¹å•Šï¼Œéœ€è¦ä¸€ä¸ª&lt;strong&gt;å…¨å±€å”¯ä¸€&lt;/strong&gt;çš„ id æ¥æ”¯æŒã€‚æ‰€ä»¥è¿™éƒ½æ˜¯ä½ å®é™…ç”Ÿäº§ç¯å¢ƒä¸­å¿…é¡»è€ƒè™‘çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&quot;é¢è¯•é¢˜å‰–æ&quot;&gt;é¢è¯•é¢˜å‰–æ&lt;/h2&gt;
&lt;h3 id=&quot;åŸºäºæ•°æ®åº“çš„å®ç°æ–¹æ¡ˆ&quot;&gt;åŸºäºæ•°æ®åº“çš„å®ç°æ–¹æ¡ˆ&lt;/h3&gt;
&lt;h4 id=&quot;æ•°æ®åº“è‡ªå¢-id&quot;&gt;æ•°æ®åº“è‡ªå¢ id&lt;/h4&gt;
&lt;p&gt;è¿™ä¸ªå°±æ˜¯è¯´ä½ çš„ç³»ç»Ÿé‡Œæ¯æ¬¡å¾—åˆ°ä¸€ä¸ª idï¼Œéƒ½æ˜¯å¾€ä¸€ä¸ªåº“çš„ä¸€ä¸ªè¡¨é‡Œæ’å…¥ä¸€æ¡æ²¡ä»€ä¹ˆä¸šåŠ¡å«ä¹‰çš„æ•°æ®ï¼Œç„¶åè·å–ä¸€ä¸ªæ•°æ®åº“è‡ªå¢çš„ä¸€ä¸ª idã€‚æ‹¿åˆ°è¿™ä¸ª id ä¹‹åå†å¾€å¯¹åº”çš„åˆ†åº“åˆ†è¡¨é‡Œå»å†™å…¥ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªæ–¹æ¡ˆçš„å¥½å¤„å°±æ˜¯æ–¹ä¾¿ç®€å•ï¼Œè°éƒ½ä¼šç”¨ï¼›&lt;strong&gt;ç¼ºç‚¹å°±æ˜¯å•åº“ç”Ÿæˆ&lt;/strong&gt;è‡ªå¢ idï¼Œè¦æ˜¯é«˜å¹¶å‘çš„è¯ï¼Œå°±ä¼šæœ‰ç“¶é¢ˆçš„ï¼›å¦‚æœä½ ç¡¬æ˜¯è¦æ”¹è¿›ä¸€ä¸‹ï¼Œé‚£ä¹ˆå°±ä¸“é—¨å¼€ä¸€ä¸ªæœåŠ¡å‡ºæ¥ï¼Œè¿™ä¸ªæœåŠ¡æ¯æ¬¡å°±æ‹¿åˆ°å½“å‰ id æœ€å¤§å€¼ï¼Œç„¶åè‡ªå·±é€’å¢å‡ ä¸ª idï¼Œä¸€æ¬¡æ€§è¿”å›ä¸€æ‰¹ idï¼Œç„¶åå†æŠŠå½“å‰æœ€å¤§ id å€¼ä¿®æ”¹æˆé€’å¢å‡ ä¸ª id ä¹‹åçš„ä¸€ä¸ªå€¼ï¼›ä½†æ˜¯&lt;strong&gt;æ— è®ºå¦‚ä½•éƒ½æ˜¯åŸºäºå•ä¸ªæ•°æ®åº“&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é€‚åˆçš„åœºæ™¯&lt;/strong&gt;ï¼šä½ åˆ†åº“åˆ†è¡¨å°±ä¿©åŸå› ï¼Œè¦ä¸å°±æ˜¯å•åº“å¹¶å‘å¤ªé«˜ï¼Œè¦ä¸å°±æ˜¯å•åº“æ•°æ®é‡å¤ªå¤§ï¼›é™¤éæ˜¯ä½ &lt;strong&gt;å¹¶å‘ä¸é«˜ï¼Œä½†æ˜¯æ•°æ®é‡å¤ªå¤§&lt;/strong&gt;å¯¼è‡´çš„åˆ†åº“åˆ†è¡¨æ‰©å®¹ï¼Œä½ å¯ä»¥ç”¨è¿™ä¸ªæ–¹æ¡ˆï¼Œå› ä¸ºå¯èƒ½æ¯ç§’æœ€é«˜å¹¶å‘æœ€å¤šå°±å‡ ç™¾ï¼Œé‚£ä¹ˆå°±èµ°å•ç‹¬çš„ä¸€ä¸ªåº“å’Œè¡¨ç”Ÿæˆè‡ªå¢ä¸»é”®å³å¯ã€‚&lt;/p&gt;
&lt;h4 id=&quot;è®¾ç½®æ•°æ®åº“-sequence-æˆ–è€…è¡¨è‡ªå¢å­—æ®µæ­¥é•¿&quot;&gt;è®¾ç½®æ•°æ®åº“ sequence æˆ–è€…è¡¨è‡ªå¢å­—æ®µæ­¥é•¿&lt;/h4&gt;
&lt;p&gt;å¯ä»¥é€šè¿‡è®¾ç½®æ•°æ®åº“ sequence æˆ–è€…è¡¨çš„è‡ªå¢å­—æ®µæ­¥é•¿æ¥è¿›è¡Œæ°´å¹³ä¼¸ç¼©ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚è¯´ï¼Œç°åœ¨æœ‰ 8 ä¸ªæœåŠ¡èŠ‚ç‚¹ï¼Œæ¯ä¸ªæœåŠ¡èŠ‚ç‚¹ä½¿ç”¨ä¸€ä¸ª sequence åŠŸèƒ½æ¥äº§ç”Ÿ IDï¼Œæ¯ä¸ª sequence çš„èµ·å§‹ ID ä¸åŒï¼Œå¹¶ä¸”ä¾æ¬¡é€’å¢ï¼Œæ­¥é•¿éƒ½æ˜¯ 8ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1756639/201909/1756639-20190929231341180-1764461227.jpg&quot; alt=&quot;file&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é€‚åˆçš„åœºæ™¯&lt;/strong&gt;ï¼šåœ¨ç”¨æˆ·é˜²æ­¢äº§ç”Ÿçš„ ID é‡å¤æ—¶ï¼Œè¿™ç§æ–¹æ¡ˆå®ç°èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œä¹Ÿèƒ½è¾¾åˆ°æ€§èƒ½ç›®æ ‡ã€‚ä½†æ˜¯æœåŠ¡èŠ‚ç‚¹å›ºå®šï¼Œæ­¥é•¿ä¹Ÿå›ºå®šï¼Œå°†æ¥å¦‚æœè¿˜è¦å¢åŠ æœåŠ¡èŠ‚ç‚¹ï¼Œå°±ä¸å¥½æäº†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;uuid&quot;&gt;UUID&lt;/h3&gt;
&lt;p&gt;å¥½å¤„å°±æ˜¯æœ¬åœ°ç”Ÿæˆï¼Œä¸è¦åŸºäºæ•°æ®åº“æ¥äº†ï¼›ä¸å¥½ä¹‹å¤„å°±æ˜¯ï¼ŒUUID å¤ªé•¿äº†ã€å ç”¨ç©ºé—´å¤§ï¼Œ&lt;strong&gt;ä½œä¸ºä¸»é”®æ€§èƒ½å¤ªå·®&lt;/strong&gt;äº†ï¼›æ›´é‡è¦çš„æ˜¯ï¼ŒUUID ä¸å…·æœ‰æœ‰åºæ€§ï¼Œä¼šå¯¼è‡´ B+ æ ‘ç´¢å¼•åœ¨å†™çš„æ—¶å€™æœ‰è¿‡å¤šçš„éšæœºå†™æ“ä½œï¼ˆè¿ç»­çš„ ID å¯ä»¥äº§ç”Ÿéƒ¨åˆ†é¡ºåºå†™ï¼‰ï¼Œè¿˜æœ‰ï¼Œç”±äºåœ¨å†™çš„æ—¶å€™ä¸èƒ½äº§ç”Ÿæœ‰é¡ºåºçš„ append æ“ä½œï¼Œè€Œéœ€è¦è¿›è¡Œ insert æ“ä½œï¼Œå°†ä¼šè¯»å–æ•´ä¸ª B+ æ ‘èŠ‚ç‚¹åˆ°å†…å­˜ï¼Œåœ¨æ’å…¥è¿™æ¡è®°å½•åä¼šå°†æ•´ä¸ªèŠ‚ç‚¹å†™å›ç£ç›˜ï¼Œè¿™ç§æ“ä½œåœ¨è®°å½•å ç”¨ç©ºé—´æ¯”è¾ƒå¤§çš„æƒ…å†µä¸‹ï¼Œæ€§èƒ½ä¸‹é™æ˜æ˜¾ã€‚&lt;/p&gt;
&lt;p&gt;é€‚åˆçš„åœºæ™¯ï¼šå¦‚æœä½ æ˜¯è¦éšæœºç”Ÿæˆä¸ªä»€ä¹ˆæ–‡ä»¶åã€ç¼–å·ä¹‹ç±»çš„ï¼Œä½ å¯ä»¥ç”¨ UUIDï¼Œä½†æ˜¯ä½œä¸ºä¸»é”®æ˜¯ä¸èƒ½ç”¨ UUID çš„ã€‚&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;UUID.randomUUID().toString().replace(â€œ-â€, â€œâ€) -&amp;gt; sfsdf23423rr234sfdaf&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;è·å–ç³»ç»Ÿå½“å‰æ—¶é—´&quot;&gt;è·å–ç³»ç»Ÿå½“å‰æ—¶é—´&lt;/h3&gt;
&lt;p&gt;è¿™ä¸ªå°±æ˜¯è·å–å½“å‰æ—¶é—´å³å¯ï¼Œä½†æ˜¯é—®é¢˜æ˜¯ï¼Œ&lt;strong&gt;å¹¶å‘å¾ˆé«˜çš„æ—¶å€™&lt;/strong&gt;ï¼Œæ¯”å¦‚ä¸€ç§’å¹¶å‘å‡ åƒï¼Œ&lt;strong&gt;ä¼šæœ‰é‡å¤çš„æƒ…å†µ&lt;/strong&gt;ï¼Œè¿™ä¸ªæ˜¯è‚¯å®šä¸åˆé€‚çš„ã€‚åŸºæœ¬å°±ä¸ç”¨è€ƒè™‘äº†ã€‚&lt;/p&gt;
&lt;p&gt;é€‚åˆçš„åœºæ™¯ï¼šä¸€èˆ¬å¦‚æœç”¨è¿™ä¸ªæ–¹æ¡ˆï¼Œæ˜¯å°†å½“å‰æ—¶é—´è·Ÿå¾ˆå¤šå…¶ä»–çš„ä¸šåŠ¡å­—æ®µæ‹¼æ¥èµ·æ¥ï¼Œä½œä¸ºä¸€ä¸ª idï¼Œå¦‚æœä¸šåŠ¡ä¸Šä½ è§‰å¾—å¯ä»¥æ¥å—ï¼Œé‚£ä¹ˆä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ä½ å¯ä»¥å°†åˆ«çš„ä¸šåŠ¡å­—æ®µå€¼è·Ÿå½“å‰æ—¶é—´æ‹¼æ¥èµ·æ¥ï¼Œç»„æˆä¸€ä¸ªå…¨å±€å”¯ä¸€çš„ç¼–å·ã€‚&lt;/p&gt;
&lt;h3 id=&quot;snowflake-ç®—æ³•&quot;&gt;snowflake ç®—æ³•&lt;/h3&gt;
&lt;p&gt;snowflake ç®—æ³•æ˜¯ twitter å¼€æºçš„åˆ†å¸ƒå¼ id ç”Ÿæˆç®—æ³•ï¼Œé‡‡ç”¨ Scala è¯­è¨€å®ç°ï¼Œæ˜¯æŠŠä¸€ä¸ª 64 ä½çš„ long å‹çš„ idï¼Œ1 ä¸ª bit æ˜¯ä¸ç”¨çš„ï¼Œç”¨å…¶ä¸­çš„ 41 bit ä½œä¸ºæ¯«ç§’æ•°ï¼Œç”¨ 10 bit ä½œä¸ºå·¥ä½œæœºå™¨ idï¼Œ12 bit ä½œä¸ºåºåˆ—å·ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;1 bitï¼šä¸ç”¨ï¼Œä¸ºå•¥å‘¢ï¼Ÿå› ä¸ºäºŒè¿›åˆ¶é‡Œç¬¬ä¸€ä¸ª bit ä¸ºå¦‚æœæ˜¯ 1ï¼Œé‚£ä¹ˆéƒ½æ˜¯è´Ÿæ•°ï¼Œä½†æ˜¯æˆ‘ä»¬ç”Ÿæˆçš„ id éƒ½æ˜¯æ­£æ•°ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ª bit ç»Ÿä¸€éƒ½æ˜¯ 0ã€‚&lt;/li&gt;
&lt;li&gt;41 bitï¼šè¡¨ç¤ºçš„æ˜¯æ—¶é—´æˆ³ï¼Œå•ä½æ˜¯æ¯«ç§’ã€‚41 bit å¯ä»¥è¡¨ç¤ºçš„æ•°å­—å¤šè¾¾ &lt;code&gt;2^41 - 1&lt;/code&gt;ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥æ ‡è¯† &lt;code&gt;2^41 - 1&lt;/code&gt; ä¸ªæ¯«ç§’å€¼ï¼Œæ¢ç®—æˆå¹´å°±æ˜¯è¡¨ç¤º69å¹´çš„æ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;10 bitï¼šè®°å½•å·¥ä½œæœºå™¨ idï¼Œä»£è¡¨çš„æ˜¯è¿™ä¸ªæœåŠ¡æœ€å¤šå¯ä»¥éƒ¨ç½²åœ¨ 2^10å°æœºå™¨ä¸Šå“ªï¼Œä¹Ÿå°±æ˜¯1024å°æœºå™¨ã€‚ä½†æ˜¯ 10 bit é‡Œ 5 ä¸ª bit ä»£è¡¨æœºæˆ¿ idï¼Œ5 ä¸ª bit ä»£è¡¨æœºå™¨ idã€‚æ„æ€å°±æ˜¯æœ€å¤šä»£è¡¨ &lt;code&gt;2^5&lt;/code&gt;ä¸ªæœºæˆ¿ï¼ˆ32ä¸ªæœºæˆ¿ï¼‰ï¼Œæ¯ä¸ªæœºæˆ¿é‡Œå¯ä»¥ä»£è¡¨ &lt;code&gt;2^5&lt;/code&gt; ä¸ªæœºå™¨ï¼ˆ32å°æœºå™¨ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;12 bitï¼šè¿™ä¸ªæ˜¯ç”¨æ¥è®°å½•åŒä¸€ä¸ªæ¯«ç§’å†…äº§ç”Ÿçš„ä¸åŒ idï¼Œ12 bit å¯ä»¥ä»£è¡¨çš„æœ€å¤§æ­£æ•´æ•°æ˜¯ &lt;code&gt;2^12 - 1 = 4096&lt;/code&gt;ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥ç”¨è¿™ä¸ª 12 bit ä»£è¡¨çš„æ•°å­—æ¥åŒºåˆ†&lt;strong&gt;åŒä¸€ä¸ªæ¯«ç§’å†…&lt;/strong&gt;çš„ 4096 ä¸ªä¸åŒçš„ idã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code&gt;0 | 0001100 10100010 10111110 10001001 01011100 00 | 10001 | 1 1001 | 0000 00000000&lt;/code&gt;
&lt;/pre&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;public class IdWorker {

    private long workerId;
    private long datacenterId;
    private long sequence;

    public IdWorker(long workerId, long datacenterId, long sequence) {
        // sanity check for workerId
        // è¿™å„¿ä¸å°±æ£€æŸ¥äº†ä¸€ä¸‹ï¼Œè¦æ±‚å°±æ˜¯ä½ ä¼ é€’è¿›æ¥çš„æœºæˆ¿idå’Œæœºå™¨idä¸èƒ½è¶…è¿‡32ï¼Œä¸èƒ½å°äº0
        if (workerId &amp;gt; maxWorkerId || workerId &amp;lt; 0) {
            throw new IllegalArgumentException(
                    String.format(&quot;worker Id can't be greater than %d or less than 0&quot;, maxWorkerId));
        }
        if (datacenterId &amp;gt; maxDatacenterId || datacenterId &amp;lt; 0) {
            throw new IllegalArgumentException(
                    String.format(&quot;datacenter Id can't be greater than %d or less than 0&quot;, maxDatacenterId));
        }
        System.out.printf(
                &quot;worker starting. timestamp left shift %d, datacenter id bits %d, worker id bits %d, sequence bits %d, workerid %d&quot;,
                timestampLeftShift, datacenterIdBits, workerIdBits, sequenceBits, workerId);

        this.workerId = workerId;
        this.datacenterId = datacenterId;
        this.sequence = sequence;
    }

    private long twepoch = 1288834974657L;

    private long workerIdBits = 5L;
    private long datacenterIdBits = 5L;

    // è¿™ä¸ªæ˜¯äºŒè¿›åˆ¶è¿ç®—ï¼Œå°±æ˜¯ 5 bitæœ€å¤šåªèƒ½æœ‰31ä¸ªæ•°å­—ï¼Œä¹Ÿå°±æ˜¯è¯´æœºå™¨idæœ€å¤šåªèƒ½æ˜¯32ä»¥å†…
    private long maxWorkerId = -1L ^ (-1L &amp;lt;&amp;lt; workerIdBits);

    // è¿™ä¸ªæ˜¯ä¸€ä¸ªæ„æ€ï¼Œå°±æ˜¯ 5 bitæœ€å¤šåªèƒ½æœ‰31ä¸ªæ•°å­—ï¼Œæœºæˆ¿idæœ€å¤šåªèƒ½æ˜¯32ä»¥å†…
    private long maxDatacenterId = -1L ^ (-1L &amp;lt;&amp;lt; datacenterIdBits);
    private long sequenceBits = 12L;

    private long workerIdShift = sequenceBits;
    private long datacenterIdShift = sequenceBits + workerIdBits;
    private long timestampLeftShift = sequenceBits + workerIdBits + datacenterIdBits;
    private long sequenceMask = -1L ^ (-1L &amp;lt;&amp;lt; sequenceBits);

    private long lastTimestamp = -1L;

    public long getWorkerId() {
        return workerId;
    }

    public long getDatacenterId() {
        return datacenterId;
    }

    public long getTimestamp() {
        return System.currentTimeMillis();
    }

    public synchronized long nextId() {
        // è¿™å„¿å°±æ˜¯è·å–å½“å‰æ—¶é—´æˆ³ï¼Œå•ä½æ˜¯æ¯«ç§’
        long timestamp = timeGen();

        if (timestamp &amp;lt; lastTimestamp) {
            System.err.printf(&quot;clock is moving backwards.  Rejecting requests until %d.&quot;, lastTimestamp);
            throw new RuntimeException(String.format(
                    &quot;Clock moved backwards.  Refusing to generate id for %d milliseconds&quot;, lastTimestamp - timestamp));
        }

        if (lastTimestamp == timestamp) {
            // è¿™ä¸ªæ„æ€æ˜¯è¯´ä¸€ä¸ªæ¯«ç§’å†…æœ€å¤šåªèƒ½æœ‰4096ä¸ªæ•°å­—
            // æ— è®ºä½ ä¼ é€’å¤šå°‘è¿›æ¥ï¼Œè¿™ä¸ªä½è¿ç®—ä¿è¯å§‹ç»ˆå°±æ˜¯åœ¨4096è¿™ä¸ªèŒƒå›´å†…ï¼Œé¿å…ä½ è‡ªå·±ä¼ é€’ä¸ªsequenceè¶…è¿‡äº†4096è¿™ä¸ªèŒƒå›´
            sequence = (sequence + 1) &amp;amp; sequenceMask;
            if (sequence == 0) {
                timestamp = tilNextMillis(lastTimestamp);
            }
        } else {
            sequence = 0;
        }

        // è¿™å„¿è®°å½•ä¸€ä¸‹æœ€è¿‘ä¸€æ¬¡ç”Ÿæˆidçš„æ—¶é—´æˆ³ï¼Œå•ä½æ˜¯æ¯«ç§’
        lastTimestamp = timestamp;

        // è¿™å„¿å°±æ˜¯å°†æ—¶é—´æˆ³å·¦ç§»ï¼Œæ”¾åˆ° 41 bité‚£å„¿ï¼›
        // å°†æœºæˆ¿ idå·¦ç§»æ”¾åˆ° 5 bité‚£å„¿ï¼›
        // å°†æœºå™¨idå·¦ç§»æ”¾åˆ°5 bité‚£å„¿ï¼›å°†åºå·æ”¾æœ€å12 bitï¼›
        // æœ€åæ‹¼æ¥èµ·æ¥æˆä¸€ä¸ª 64 bitçš„äºŒè¿›åˆ¶æ•°å­—ï¼Œè½¬æ¢æˆ 10 è¿›åˆ¶å°±æ˜¯ä¸ª long å‹
        return ((timestamp - twepoch) &amp;lt;&amp;lt; timestampLeftShift) | (datacenterId &amp;lt;&amp;lt; datacenterIdShift)
                | (workerId &amp;lt;&amp;lt; workerIdShift) | sequence;
    }

    private long tilNextMillis(long lastTimestamp) {
        long timestamp = timeGen();
        while (timestamp &amp;lt;= lastTimestamp) {
            timestamp = timeGen();
        }
        return timestamp;
    }

    private long timeGen() {
        return System.currentTimeMillis();
    }

    // ---------------æµ‹è¯•---------------
    public static void main(String[] args) {
        IdWorker worker = new IdWorker(1, 1, 1);
        for (int i = 0; i &amp;lt; 30; i++) {
            System.out.println(worker.nextId());
        }
    }

}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ€ä¹ˆè¯´å‘¢ï¼Œå¤§æ¦‚è¿™ä¸ªæ„æ€å§ï¼Œå°±æ˜¯è¯´ 41 bit æ˜¯å½“å‰æ¯«ç§’å•ä½çš„ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œå°±è¿™æ„æ€ï¼›ç„¶å 5 bit æ˜¯ä½ ä¼ é€’è¿›æ¥çš„ä¸€ä¸ª&lt;strong&gt;æœºæˆ¿&lt;/strong&gt; idï¼ˆä½†æ˜¯æœ€å¤§åªèƒ½æ˜¯ 32 ä»¥å†…ï¼‰ï¼Œå¦å¤– 5 bit æ˜¯ä½ ä¼ é€’è¿›æ¥çš„&lt;strong&gt;æœºå™¨&lt;/strong&gt; idï¼ˆä½†æ˜¯æœ€å¤§åªèƒ½æ˜¯ 32 ä»¥å†…ï¼‰ï¼Œå‰©ä¸‹çš„é‚£ä¸ª 12 bitåºåˆ—å·ï¼Œå°±æ˜¯å¦‚æœè·Ÿä½ ä¸Šæ¬¡ç”Ÿæˆ id çš„æ—¶é—´è¿˜åœ¨ä¸€ä¸ªæ¯«ç§’å†…ï¼Œé‚£ä¹ˆä¼šæŠŠé¡ºåºç»™ä½ ç´¯åŠ ï¼Œæœ€å¤šåœ¨ 4096 ä¸ªåºå·ä»¥å†…ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ä½ è‡ªå·±åˆ©ç”¨è¿™ä¸ªå·¥å…·ç±»ï¼Œè‡ªå·±æä¸€ä¸ªæœåŠ¡ï¼Œç„¶åå¯¹æ¯ä¸ªæœºæˆ¿çš„æ¯ä¸ªæœºå™¨éƒ½åˆå§‹åŒ–è¿™ä¹ˆä¸€ä¸ªä¸œè¥¿ï¼Œåˆšå¼€å§‹è¿™ä¸ªæœºæˆ¿çš„è¿™ä¸ªæœºå™¨çš„åºå·å°±æ˜¯ 0ã€‚ç„¶åæ¯æ¬¡æ¥æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚ï¼Œè¯´è¿™ä¸ªæœºæˆ¿çš„è¿™ä¸ªæœºå™¨è¦ç”Ÿæˆä¸€ä¸ª idï¼Œä½ å°±æ‰¾åˆ°å¯¹åº”çš„ Worker ç”Ÿæˆã€‚&lt;/p&gt;
&lt;p&gt;åˆ©ç”¨è¿™ä¸ª snowflake ç®—æ³•ï¼Œä½ å¯ä»¥å¼€å‘è‡ªå·±å…¬å¸çš„æœåŠ¡ï¼Œç”šè‡³å¯¹äºæœºæˆ¿ id å’Œæœºå™¨ idï¼Œåæ­£ç»™ä½ é¢„ç•™äº† 5 bit + 5 bitï¼Œä½ æ¢æˆåˆ«çš„æœ‰ä¸šåŠ¡å«ä¹‰çš„ä¸œè¥¿ä¹Ÿå¯ä»¥çš„ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ª snowflake ç®—æ³•ç›¸å¯¹æ¥è¯´è¿˜æ˜¯æ¯”è¾ƒé è°±çš„ï¼Œæ‰€ä»¥ä½ è¦çœŸæ˜¯æåˆ†å¸ƒå¼ id ç”Ÿæˆï¼Œå¦‚æœæ˜¯é«˜å¹¶å‘å•¥çš„ï¼Œé‚£ä¹ˆç”¨è¿™ä¸ªåº”è¯¥æ€§èƒ½æ¯”è¾ƒå¥½ï¼Œä¸€èˆ¬æ¯ç§’å‡ ä¸‡å¹¶å‘çš„åœºæ™¯ï¼Œä¹Ÿè¶³å¤Ÿä½ ç”¨äº†ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡åœ¨ç±³å…œå…¬ä¼—å·é“¾æ¥:&lt;br/&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s/mt8bVpM57SsI-nvTRKxSKg&quot; class=&quot;uri&quot;&gt;https://mp.weixin.qq.com/s/mt8bVpM57SsI-nvTRKxSKg&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ¬¢è¿å…³æ³¨ç±³å…œJavaï¼Œä¸€ä¸ªæ³¨åœ¨å…±äº«ã€äº¤æµçš„Javaå­¦ä¹ å¹³å°ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://graph.baidu.com/resource/2127b62307ecaf0bac70201566400691.png&quot; alt=&quot;file&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Sun, 29 Sep 2019 15:14:00 +0000</pubDate>
<dc:creator>ç±³å…œJava</dc:creator>
<og:description>é¢è¯•é¢˜ åˆ†åº“åˆ†è¡¨ä¹‹åï¼Œid ä¸»é”®å¦‚ä½•å¤„ç†ï¼Ÿ é¢è¯•å®˜å¿ƒç†åˆ†æ å…¶å®è¿™æ˜¯åˆ†åº“åˆ†è¡¨ä¹‹åä½ å¿…ç„¶è¦é¢å¯¹çš„ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ id å’‹ç”Ÿæˆï¼Ÿå› ä¸ºè¦æ˜¯åˆ†æˆå¤šä¸ªè¡¨ä¹‹åï¼Œæ¯ä¸ªè¡¨éƒ½æ˜¯ä» 1 å¼€å§‹ç´¯åŠ ï¼Œé‚£è‚¯å®šä¸å¯¹å•Šï¼Œéœ€è¦ä¸€ä¸ª</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/midoujava/p/11610492.html</dc:identifier>
</item>
<item>
<title>Python ç¼–è¯‘å™¨ä¸è§£é‡Šå™¨ - æŒ½æ‰‹è¯´æ¢¦è¯ï¼</title>
<link>http://www.cnblogs.com/jqc6/p/11610435.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/jqc6/p/11610435.html</guid>
<description>&lt;p&gt;Python ç¼–è¯‘å™¨ä¸è§£é‡Šå™¨&lt;/p&gt;
&lt;p&gt;Pythonçš„ç¯å¢ƒæˆ‘ä»¬å·²ç»æ­å»ºå¥½äº†ï¼Œå¯ä»¥å¼€å§‹å­¦ä¹ åŸºç¡€çŸ¥è¯†äº†ã€‚ä½†æ˜¯ï¼Œåœ¨æ­¤ä¹‹å‰ï¼Œè¿˜è¦å…ˆè¯´è¯´ç¼–è¯‘å™¨ä¸è§£é‡Šå™¨ç›¸å…³çš„å†…å®¹ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœè¿™éƒ¨åˆ†å†…å®¹ï¼Œè®©ä½ è§‰å¾—éš¾ä»¥ç†è§£æˆ–ä¸èƒ½å®Œå…¨æ˜ç™½ï¼Œå¯ä»¥æš‚æ—¶è·³è¿‡ï¼Œç­‰ä»¥åå†å›è¿‡å¤´æ¥é‡æ–°è¯»ä¸€éã€‚&lt;/p&gt;
&lt;h2 id=&quot;_1&quot;&gt;ä¸€ã€æ•°æ®çš„è¡¨ç¤ºæ–¹å¼&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œç°å®ç”Ÿæ´»ä¸­ï¼Œæ•°å­—çš„è¡¨ç¤ºæ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œå¸¸è§çš„æœ‰äºŒè¿›åˆ¶ã€å…«è¿›åˆ¶ã€åè¿›åˆ¶å’Œåå…­è¿›åˆ¶ã€‚åè¿›åˆ¶æˆ‘ä»¬éƒ½å¾ˆç†Ÿæ‚‰ï¼ŒåŠ æ³•å£è¯€è¡¨æˆ‘ä»¬éƒ½èƒŒè¿‡ï¼Œä¸»è¦æ˜¯ä½¿ç”¨0~9ï¼Œè¿™10ä¸ªé˜¿æ‹‰ä¼¯æ•°å­—æ¥æ„å»ºæ•´ä¸ªåè¿›åˆ¶çš„ä½“ç³»ï¼Œå…¶ä¸­æœ€æ ¸å¿ƒçš„æ³•åˆ™æ˜¯â€œé€¢åè¿›ä¸€â€ï¼Œå€Ÿä½åˆ™æ˜¯â€œå€Ÿä¸€å½“åâ€ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆå…¨ä¸–ç•Œä¸ç®¡ä»€ä¹ˆå›½å®¶ï¼Œä»€ä¹ˆå†å²ï¼Œä»€ä¹ˆæ–‡åŒ–æ°´å¹³åŸºæœ¬éƒ½æ˜¯ç”¨åè¿›åˆ¶ä½œä¸ºåŸºæœ¬è¿›åˆ¶å‘¢ï¼Ÿæ˜¯å› ä¸ºæˆ‘ä»¬äººæœ‰10ä¸ªæ‰‹æŒ‡å¤´ï¼Œæ°èµ·æ¥æœ€æ–¹ä¾¿ï¼æˆ‘ä»¬å¯¹åè¿›åˆ¶æœ‰ç€å¤©ç„¶çš„å‹å¥½åº¦ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;img-responsive&quot; src=&quot;http://static.zybuluo.com/feixuelove1009/p8cfuwot4k8ixzxs5s5iy6fh/image.png&quot; alt=&quot;image.png-139.9kB&quot;/&gt;&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆå¯¹äºè®¡ç®—æœºå‘¢ï¼Ÿè®¡ç®—æœºä¸æ˜¯äººï¼Œæ²¡æœ‰10ä¸ªæ‰‹æŒ‡å¤´å¯ä»¥æ°ï¼Œæ‰€ä»¥å®ƒç”¨ä¸äº†åè¿›åˆ¶ã€‚é‚£ä¹ˆå®ƒç”¨å‡ è¿›åˆ¶ï¼ŸäºŒè¿›åˆ¶ï¼äºŒè¿›åˆ¶æ˜¯ç”¨0å’Œ1ä¸¤ä¸ªæ•°ç æ¥è¡¨ç¤ºçš„æ•°ï¼Œä¹Ÿå°±æ˜¯å½¢å¦‚010101010çš„æ ·å­ã€‚å®ƒçš„åŸºæ•°ä¸º2ï¼Œè¿›ä½è§„åˆ™æ˜¯â€œé€¢äºŒè¿›ä¸€â€ï¼Œå€Ÿä½è§„åˆ™æ˜¯â€œå€Ÿä¸€å½“äºŒâ€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;img-responsive&quot; src=&quot;http://static.zybuluo.com/feixuelove1009/gi6qsw8crf1z7mo43ohhwssx/image.png&quot; alt=&quot;image.png-246.4kB&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆè®¡ç®—æœºè¦ä½¿ç”¨äºŒè¿›åˆ¶ä½œä¸ºè‡ªå·±çš„æœºå™¨è¯­è¨€ä¹Ÿå°±æ˜¯æ•°æ®çš„è¡¨ç¤ºæ–¹å¼å‘¢ï¼Ÿå› ä¸ºè®¡ç®—æœºæœ€å°çš„è®¡ç®—å•å…ƒæ˜¯æ ¹æ®å¼€å…³çŠ¶æ€é«˜ä½ç”µå¹³æ¥ç¡®å®šçš„ï¼Œå®ƒåªæœ‰å¼€å’Œå…³ï¼Œé«˜å’Œä½çš„æ¦‚å¿µï¼Œæ¢æˆæ•°å­¦å°±æ˜¯0å’Œ1çš„ä¸¤ç§ã€‚åŒæ ·çš„ï¼Œåœ¨ç‰©ç†å­˜å‚¨æ–¹é¢ï¼Œç¡¬ç›˜çš„ç£é“åªèƒ½åŒºåˆ†æ‰“å­”å’Œæœªæ‰“å­”çš„çŠ¶æ€ï¼Œä¹Ÿæ˜¯0å’Œ1ä¸¤ç§ã€‚åŒæ—¶äºŒè¿›åˆ¶ä¾¿äºè¿›è¡ŒåŠ ã€å‡è¿ç®—å’Œè®¡æ•°ç¼–ç ã€‚äºŒè¿›åˆ¶ä¸åè¿›åˆ¶æ•°æ˜“äºäº’ç›¸è½¬æ¢ã€‚äºŒè¿›åˆ¶ä¾¿äºé€»è¾‘åˆ¤æ–­ï¼ˆæ˜¯æˆ–éï¼‰ï¼Œé€»è¾‘åˆ¤æ–­é€šå¸¸ä¹Ÿæ˜¯ä¸¤ç§çŠ¶æ€ï¼Œè¿™å’ŒäºŒè¿›åˆ¶å¾ˆæ­é…ã€‚äºŒè¿›åˆ¶è¡¨ç¤ºæ•°æ®è¿˜å…·æœ‰æŠ—å¹²æ‰°èƒ½åŠ›å¼ºï¼Œå¯é æ€§é«˜çš„ç‰¹ç‚¹ï¼Œå› ä¸ºå½“å—åˆ°ä¸€å®šç¨‹åº¦çš„ç”µç£å¹²æ‰°æ—¶ï¼Œåªè¦å¯ä»¥åˆ†è¾¨å‡ºå®ƒæ˜¯é«˜ç”µå¹³è¿˜æ˜¯ä½ç”µå¹³ï¼Œè‡³äºé«˜å¤šå°‘æˆ–ä½å¤šå°‘å¹¶ä¸é‡è¦ï¼Œå°±èƒ½åŒºåˆ†0å’Œ1ï¼Œè¿™åœ¨ç½‘ç»œä¿¡å·ä¸­ï¼Œå°±æ˜¯å¤©ç”Ÿè‡ªå¸¦æŠ—å¹²æ‰°èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;img-responsive&quot; src=&quot;http://static.zybuluo.com/feixuelove1009/n2jka1wktqd3tl2rj8o8j9r5/image.png&quot; alt=&quot;image.png-46.4kB&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œåœ¨äººæœºäº¤æµä¸Šï¼Œ&lt;strong&gt;äºŒè¿›ä½åˆ¶æœ‰è‡´å‘½çš„å¼±ç‚¹ï¼Œæ•°å­—çš„ä¹¦å†™ç‰¹åˆ«å†—é•¿ï¼Œå¹¶ä¸”æ²¡æœ‰äººç±»å¯è¯»æ€§&lt;/strong&gt;ï¼ä¾‹å¦‚ï¼Œåè¿›ä½åˆ¶çš„100000å†™æˆäºŒè¿›åˆ¶å°±æ˜¯11000011010100000ï¼Œé•¿äº†å¥½å‡ å€ï¼Œè€Œä¸”ä½ èƒ½ä»ä¸€ä¸ªè¿™ä¹ˆé•¿çš„äºŒè¿›åˆ¶æ•°é‡Œè¯»å‡ºå®ƒçš„åè¿›åˆ¶æ•°æ˜¯å¤šå°‘å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;è®¡ç®—æœºä¸èƒ½ç‹¬ç«‹å­˜åœ¨ï¼Œç›®å‰ä¹Ÿæ— æ³•è‡ªæˆ‘åˆ›é€ ï¼Œä¸ç®¡æ˜¯è¾“å…¥è¿˜æ˜¯è¾“å‡ºï¼Œå®ƒçš„ä¸€åˆ‡éƒ½å¿…é¡»å’Œäººäº¤æµã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œäººç±»åªèƒ½è¯»10è¿›åˆ¶å’Œè‹±è¯­ã€æ±‰è¯­ç­‰ï¼Œå¯è®¡ç®—æœºåªä¼š010101ï¼Œè‡³äºè‹±è¯­ã€æ±‰è¯­å¯¹å®ƒè€Œè¨€æ›´æ˜¯å¤©ä¹¦ã€‚é‚£ä¹ˆæˆ‘ä»¬æ˜¯æ€ä¹ˆå’Œè®¡ç®—æœºäº¤æµçš„å‘¢ï¼Ÿæ€ä¹ˆå°†æˆ‘ä»¬çš„è‹±è¯­æˆ–è€…æ±‰è¯­ç¼–ç æˆè®¡ç®—æœºèƒ½å¤Ÿè¯†åˆ«çš„1010101å‘¢ï¼Ÿ&lt;/p&gt;
&lt;h2 id=&quot;_2&quot;&gt;äºŒã€ ç¼–ç¨‹è¯­è¨€å‘å±•å†ç¨‹&lt;/h2&gt;
&lt;h3 id=&quot;1&quot;&gt;1. æ‰“å­”çº¸æ¡&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬å·²ç»çŸ¥é“äº†è®¡ç®—æœºåªæ‡‚æœºå™¨è¯­è¨€ï¼Œä¹Ÿå°±æ˜¯äºŒè¿›åˆ¶çš„æ•°æ®è¡¨ç¤ºæ–¹å¼ï¼Œä»»ä½•å¯¹å®ƒçš„æ“ä½œå’Œç¼–ç ï¼Œæœ€ç»ˆéƒ½è¦ç»Ÿä¸€åˆ°è¿™ä¸Šé¢æ¥ï¼Œç„¶è€Œè¿™æ˜¯ä¸€ä¸ªæ‚²ä¼¤çš„æ•…äº‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;img-responsive&quot; src=&quot;http://static.zybuluo.com/feixuelove1009/evkduns8qfxwszewg8x4hwam/image.png&quot; alt=&quot;image.png-146.2kB&quot;/&gt;&lt;/p&gt;
&lt;p&gt;èµ·åˆï¼Œä¸ºäº†è®©è®¡ç®—æœºæŒ‰æˆ‘ä»¬çš„æƒ³æ³•å·¥ä½œï¼Œç¨‹åºå‘˜ä¸å¾—ä¸ç¼–å†™è®¡ç®—æœºå¯ä»¥è¯»æ‡‚çœ‹æ˜ç™½ç›´æ¥æ‰§è¡Œçš„æœºå™¨ç ï¼Œä¹Ÿå°±æ˜¯01010101çš„æ ·å­ï¼Œæ‰“å­”å­—æ¡å°±æ˜¯è¿™ä¹ˆå¹²çš„ã€‚ç”¨æ‰“æ²¡æ‰“å­”æ¥ä»£è¡¨0å’Œ1ã€‚OKï¼Œè®¡ç®—æœºæ²¡é—®é¢˜ï¼Œå®ƒèƒ½æ— éšœç¢é˜…è¯»ï¼Œå¯ç¨‹åºå‘˜å°±éš¾å—äº†ã€‚æ‹è„‘è¢‹ä¹Ÿèƒ½æƒ³å¾—åˆ°è¿™é‡Œé¢çš„é—®é¢˜ã€‚&lt;strong&gt;å®¹æ˜“å‡ºé”™ï¼Œæ•ˆç‡ä½ï¼Œç¼–å†™å›°éš¾ï¼Œç»´æŠ¤å›°éš¾&lt;/strong&gt;ã€‚å¯èƒ½å°±æ˜¯ä¸ªç®€å•çš„æ‰“å°â€œhello worldâ€ï¼Œä¹Ÿè®¸å°±éœ€è¦å¥½å‡ ç±³é•¿çš„å­—æ¡ã€‚è¿™ç®€ç›´å°±æ˜¯åŸå§‹ç¤¾ä¼šï¼Œç”Ÿäº§æ•ˆç‡ä½ä¸‹çš„ä»¤äººå‘æŒ‡ã€‚å‘ç”Ÿä¸ªç«ç¾ä»€ä¹ˆçš„ï¼Œç›´æ¥Overã€‚å”¯ä¸€çš„å¥½å¤„å°±æ˜¯æ— éœ€è½¬æ¢ï¼Œå¯ç›´æ¥æ‰§è¡Œï¼Œä½†ç›¸å¯¹ç¼ºç‚¹æ¥è®²ï¼Œè¿™ç‚¹å¥½å¤„å®Œå…¨å¯ä»¥è¢«å¿½ç•¥ã€‚&lt;/p&gt;
&lt;h3 id=&quot;2&quot;&gt;2. æ±‡ç¼–è¯­è¨€&lt;/h3&gt;
&lt;p&gt;&lt;img class=&quot;img-responsive&quot; src=&quot;http://static.zybuluo.com/feixuelove1009/nyr7vigh76oghbis1strcee0/image.png&quot; alt=&quot;image.png-357.6kB&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ±‡ç¼–è¯­è¨€æ˜¯ä¸€ç§å¯ç¼–ç¨‹å™¨ä»¶çš„ä½çº§è¯­è¨€ï¼Œäº¦ç§°ä¸ºç¬¦å·è¯­è¨€ã€‚åœ¨æ±‡ç¼–è¯­è¨€ä¸­ï¼Œç”¨åŠ©è®°ç¬¦ä»£æ›¿æœºå™¨æŒ‡ä»¤çš„æ“ä½œç ï¼Œç”¨åœ°å€ç¬¦å·æˆ–æ ‡å·ä»£æ›¿æŒ‡ä»¤æˆ–æ“ä½œæ•°çš„åœ°å€ã€‚åœ¨ä¸åŒçš„è®¾å¤‡ä¸­ï¼Œæ±‡ç¼–è¯­è¨€å¯¹åº”ç€ä¸åŒçš„æœºå™¨è¯­è¨€æŒ‡ä»¤é›†ï¼Œé€šè¿‡æ±‡ç¼–è¿‡ç¨‹è½¬æ¢æˆæœºå™¨æŒ‡ä»¤ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸åŒå¹³å°ä¹‹é—´ä¸å¯ç›´æ¥ç§»æ¤ï¼Œå®ƒæ˜¯å¹³å°ç›¸å…³çš„ï¼Œä½ åœ¨è¿™ä¸ªç¡¬ä»¶å¹³å°å†™çš„æ±‡ç¼–ç¨‹åºï¼Œæ¢åˆ°å¦å¤–ä¸€å¥—ç¡¬ä»¶ä¸Šå»æ˜¯è¿è¡Œä¸äº†çš„ã€‚ å› æ­¤ï¼Œæ±‡ç¼–è¯­è¨€é€šå¸¸è¢«åº”ç”¨åœ¨åº•å±‚ï¼Œç¡¬ä»¶æ“ä½œå’Œé«˜è¦æ±‚çš„ç¨‹åºä¼˜åŒ–çš„åœºåˆã€‚é©±åŠ¨ç¨‹åºã€åµŒå…¥å¼æ“ä½œç³»ç»Ÿå’Œå®æ—¶è¿è¡Œç¨‹åºè¾ƒå¤šä½¿ç”¨æ±‡ç¼–è¯­è¨€ã€‚ç›¸æ¯”äºæœºå™¨ç ï¼Œå®ƒæ›´åå‘äººç±»çš„è¯­è¨€ä¹ æƒ¯ï¼Œæ›´æ˜“äºç¼–å†™å’Œé˜…è¯»ï¼Œä¹Ÿå°±æ˜¯æœ‰ä¸€ç‚¹æŠ½è±¡ç¬¦å·æ¦‚å¿µåŒ–äº†ï¼Œè¿™å¤§å¤§æé«˜äº†ç¼–ç¨‹æ•ˆç‡ã€‚ä½†æ˜¯ï¼Œè¿™ä¾ç„¶æ˜¯ä¸€ç§ä½çº§è¯­è¨€ï¼Œè¿˜æœ‰æ”¹å–„å’Œæé«˜çš„ç©ºé—´ã€‚&lt;/p&gt;
&lt;p&gt;ä¸Šé¢ä¸€æ®µçœ‹å¾—æ™•æ²¡å…³ç³»ï¼Œç®€å•åœ°è¯´å°±æ˜¯æ±‡ç¼–è¯­è¨€ç›¸æ¯”æ‰“å­”çº¸æ¡ï¼Œå¯¹äººç±»æ›´å‹å¥½ä¸€ç‚¹äº†ï¼Œè‡³å°‘èƒ½ç”¨å‡ ä¸ªç±»ä¼¼ADD\CALL\MOVçš„è‹±æ–‡ç¼©å†™äº†ã€‚ä½†æ˜¯ï¼Œå®ƒç‰ºç‰²äº†ä¸€å®šçš„æ€§èƒ½ï¼Œå¹¶ä¸”ä¾ç„¶ä¸å¤Ÿå‹å¥½ã€‚&lt;/p&gt;
&lt;h3 id=&quot;3-c&quot;&gt;3. Cè¯­è¨€&lt;/h3&gt;
&lt;p&gt;åœ¨Cè¯­è¨€ä¹‹å‰å…¶å®è¿˜æœ‰å¾ˆå¤šä½çº§è¯­è¨€ï¼Œæˆ‘ä»¬ä¸å…³å¿ƒå®ƒä»¬ã€‚ä¸ºäº†è®©ç¼–ç¨‹æ›´ç®€å•ï¼Œæ›´é«˜æ•ˆï¼Œèªæ˜çš„è®¡ç®—æœºç¨‹åºå‘˜ï¼Œä¸€æ­¥æ­¥å‘æ˜äº†FORTRANã€BASICã€Bç­‰è®¸å¤šè¯­è¨€ï¼Œç„¶ååœ¨1972å¹´è¯ç”Ÿäº†æ— äººä¸çŸ¥ï¼Œåº”ç”¨æœ€å¹¿ï¼Œå½±å“æœ€æ·±ï¼Œè‡³ä»Šä»ç„¶åœ°ä½ä¸å¯åŠ¨æ‘‡çš„Cè¯­è¨€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;img-responsive&quot; src=&quot;http://static.zybuluo.com/feixuelove1009/4ep969o5viseafa2qxlcwz4j/image.png&quot; alt=&quot;image.png-125.5kB&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Cè¯­è¨€ä¸ºä»€ä¹ˆè¿™ä¹ˆå‰å®³ï¼Ÿå½’æ ¹ç»“åº•æ˜¯ä¸€å¥è¯ï¼šç›´æ¥æ“ä½œç¡¬ä»¶ï¼åŒæ ·çš„ç®—æ³•ï¼Œç”¨Cè¯­è¨€ï¼Œå…¶æ‰§è¡Œæ•ˆç‡è¶…è¿‡JAVAç­‰è¯­è¨€å¾ˆå¤šã€‚é‚£å¯èƒ½æœ‰äººä¼šé—®ï¼ŒCå’Œæ±‡ç¼–å’Œæœºå™¨ç æ¯”å‘¢ï¼Ÿè‚¯å®šæ˜¯Cæ…¢ï¼Œä½†æ˜¯å†™ä¸ªæ±‡ç¼–ç¨‹åºå’Œå†™ä¸ªCç¨‹åºçš„æ•ˆç‡å·®åˆ«é‚£å°±æ›´å¤§äº†ã€‚Cè¯­è¨€åœ¨äººç±»å‹å¥½æ€§å’Œåº•å±‚ç›¸å…³æ€§ä¸Šè¾¾åˆ°äº†ä¸€ä¸ªé«˜åº¦çš„å¹³è¡¡ã€‚è¿™ä¸¤è€…æ˜¯äº’ç›¸çŸ›ç›¾çš„ï¼Œä¸å¯åŒæ—¶å…¼å¾—ã€‚&lt;/p&gt;
&lt;p&gt;Cå¹²äº†äº›ä»€ä¹ˆï¼Ÿå…¶å®å®ƒå°±æ˜¯åœ¨äººç±»å‹å¥½æ€§æ–¹é¢ç›¸æ¯”ä»¥å‰è·¨å‡ºäº†æ›´å¤§ä¸€æ­¥ã€‚äººç±»æ˜¯æ–¹ä¾¿äº†ï¼Œå¯æœºå™¨å°±è¿·ç³Šäº†ï¼ä½ ç»™æˆ‘è¿™ä¹ˆå¤šå­—ç¬¦éƒ½æ˜¯å•¥æ„æ€ï¼Ÿæœºå™¨å®ƒåªæ‡‚äºŒè¿›åˆ¶å•Šï¼é‚£ä¹ˆCçš„ä»£ç æ˜¯å¦‚ä½•è¢«æ‰§è¡Œçš„å‘¢ï¼Ÿè¿™å°±å¾—è¯·å‡ºç¼–è¯‘å™¨äº†ï¼&lt;/p&gt;
&lt;p&gt;ç¼–è¯‘å™¨å°†ç¼–ç¨‹è¯­è¨€å†™çš„ä»£ç ç¿»è¯‘æˆæœºå™¨èƒ½å¤Ÿæ‰§è¡Œæˆ–è€…è¯´â€œçœ‹æ‡‚â€çš„äºŒè¿›åˆ¶æœºå™¨ç ã€‚&lt;/p&gt;
&lt;p&gt;å…¶å®æˆ‘ä»¬å®‰è£…JAVAä¹Ÿå¥½ï¼ŒCä¹Ÿå¥½ï¼ŒPythonä¹Ÿç½¢ï¼Œä¸»è¦å°±æ˜¯å®‰è£…çš„è¿™ä¸ªç¼–ç¨‹è¯­è¨€çš„â€œç¼–è¯‘å™¨â€ã€‚&lt;/p&gt;
&lt;h3 id=&quot;4-python&quot;&gt;4. Pythonè¯­è¨€&lt;/h3&gt;
&lt;p&gt;åœ¨å‡ åå¹´å‰ï¼ŒCè¯­è¨€æ˜¯å½“ä¹‹æ— æ„§çš„é«˜çº§è¯­è¨€ä»£è¡¨ï¼Œç°åœ¨ä¹Ÿä¾ç„¶æ˜¯è¯­è¨€æ’è¡Œæ¦œç¬¬äºŒçš„éœ¸ä¸»ã€‚ç„¶è€Œï¼Œåœ¨å¾ˆå¤šé¢†åŸŸï¼Œå®ƒå·²ç»ä¸å¤ªé€‚ç”¨äº†ï¼Œç°ä»Šæ›´ä¸»æµçš„è¯­è¨€æ˜¯é‚£äº›ä¸Šæ‰‹å¿«ã€ç®€å•æ˜“æ‡‚ï¼Œè¯´ç™½äº†å°±æ˜¯é—¨æ§›ä½çš„è¯­è¨€ï¼Œè®©æ›´å¤šçš„äººèƒ½è¿›å…¥ç¨‹åºå‘˜è¡Œä¸šï¼Œè®©ç¼–ç¨‹èƒ½æ›´å®¹æ˜“ã€æ›´å¿«æ˜¯æœªæ¥çš„å‘å±•è¶‹åŠ¿ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œéœ€è¦è¿›ä¸€æ­¥è®©ç¼–ç¨‹è¯­è¨€æ›´è´´è¿‘äººç±»è¯­è¨€ï¼Œæ›´è¿œç¦»æœºå™¨è¯­è¨€ã€‚&lt;/p&gt;
&lt;p&gt;Pythonå°±æ˜¯è¿™ä¹ˆä¸€ç§è¯­è¨€ã€‚å®ƒçš„è¯­æ³•ç®€å•æ˜äº†ï¼Œæ›´è´´è¿‘äººç±»çš„ä½¿ç”¨ä¹ æƒ¯ã€‚ä½œä¸ºä¸€ç§åŠ¨æ€è§£é‡Šæ€§è¯­è¨€ï¼Œè®©äººä»¬åœ¨å†™ä»£ç çš„æ—¶å€™å¯ä»¥æ›´å¤šçš„å…³æ³¨ä¸šåŠ¡é€»è¾‘ç»†èŠ‚ï¼Œè€Œä¸éœ€è¦èŠ±å¤ªå¤šç²¾åŠ›å»å…³æ³¨æ•°æ®ç±»å‹å®šä¹‰ã€ç¨‹åºè¿è¡Œæ•ˆç‡ç­‰ï¼&lt;/p&gt;
&lt;p&gt;æ—¢ç„¶éƒ½è¯´çš„æ˜¯æœºå™¨ä¸æ‡‚çš„â€œäººè¯â€ï¼Œé‚£å¿…ç„¶ä¹Ÿéœ€è¦ä¸€ä¸ªPythonâ€œç¼–è¯‘å™¨â€ã€‚å¯¹äºPythonè¯­è¨€ï¼Œå¹¿ä¹‰ä¸Šçš„â€œç¼–è¯‘å™¨â€ï¼Œå«åšè§£é‡Šå™¨ã€‚&lt;/p&gt;
&lt;h2 id=&quot;_3&quot;&gt;ä¸‰ã€ ç¼–è¯‘å™¨ä¸è§£é‡Šå™¨&lt;/h2&gt;
&lt;p&gt;ç¼–è¯‘å™¨/è§£é‡Šå™¨ï¼š&lt;strong&gt;é«˜çº§è¯­è¨€ä¸æœºå™¨ä¹‹é—´çš„ç¿»è¯‘å®˜&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;éƒ½æ˜¯å°†ä»£ç ç¿»è¯‘æˆæœºå™¨å¯ä»¥æ‰§è¡Œçš„äºŒè¿›åˆ¶æœºå™¨ç ï¼Œåªä¸è¿‡åœ¨è¿è¡ŒåŸç†å’Œç¿»è¯‘è¿‡ç¨‹æœ‰ä¸åŒè€Œå·²ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;img-responsive&quot; src=&quot;http://static.zybuluo.com/feixuelove1009/u522zy10qfeykmvqpufjhgdk/image.png&quot; alt=&quot;image.png-515.5kB&quot;/&gt;&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;img-responsive&quot; src=&quot;http://static.zybuluo.com/feixuelove1009/x6c0pdl90q1129rgfne1p5gy/image.png&quot; alt=&quot;image.png-182.8kB&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç”¨ä¸€ä¸ªé€šä¿—çš„ä¾‹å­è¿›è¡Œæ¯”å–»ï¼šæˆ‘ä»¬å»é¥­é¦†åƒé¥­ï¼Œç‚¹äº†å…«èœä¸€æ±¤ã€‚ç¼–è¯‘å™¨çš„æ–¹å¼å°±æ˜¯å¨å¸ˆæŠŠæ‰€æœ‰çš„èœç»™ä½ å…¨åšå¥½äº†ï¼Œä¸€èµ·ç»™ä½ ç«¯ä¸Šæ¥ï¼Œè‡³äºä½ åœ¨å“ªåƒï¼Œæ€ä¹ˆåƒï¼Œéšä¾¿ã€‚è§£é‡Šå™¨çš„æ–¹å¼å°±æ˜¯å¨å¸ˆåšå¥½ä¸€ä¸ªèœç»™ä½ ä¸Šä¸€ä¸ªèœï¼Œä½ å°±åƒè¿™ä¸ªèœï¼Œè€Œä¸”å¿…é¡»åœ¨é¥­åº—é‡Œåƒã€‚&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;img-responsive&quot; src=&quot;http://static.zybuluo.com/feixuelove1009/lh7jc5xsx7e38yudllmn40e5/image.png&quot; alt=&quot;image.png-125.7kB&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è‡³äºæ›´æ·±å…¥çš„ç¼–è¯‘å™¨å’Œè§£é‡Šå™¨æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œè¯·å‚è€ƒå²è¯—å·¨è‘—ã€Šç¼–è¯‘åŸç†ã€‹ï¼Œè¿™æœ¬ä¹¦æœ‰ä¸ªå¤–å·ï¼Œå«åšâ€œé¾™ä¹¦â€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;img-responsive&quot; src=&quot;http://static.zybuluo.com/feixuelove1009/w83xu9wpxr1ybp9b47zu47l6/image.png&quot; alt=&quot;image.png-305.4kB&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;python&quot;&gt;å››ã€ Pythonè§£é‡Šå™¨ç§ç±»&lt;/h2&gt;
&lt;p&gt;Pythonæœ‰å¥½å‡ ç§ç‰ˆæœ¬çš„è§£é‡Šå™¨ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;CPython&lt;/strong&gt;ï¼šå®˜æ–¹ç‰ˆæœ¬çš„è§£é‡Šå™¨ã€‚è¿™ä¸ªè§£é‡Šå™¨æ˜¯ç”¨Cè¯­è¨€å¼€å‘çš„ï¼Œæ‰€ä»¥å«CPythonã€‚CPythonæ˜¯ä½¿ç”¨æœ€å¹¿çš„Pythonè§£é‡Šå™¨ã€‚æˆ‘ä»¬é€šå¸¸è¯´çš„ã€ä¸‹è½½çš„ã€è®¨è®ºçš„ã€ä½¿ç”¨çš„éƒ½æ˜¯è¿™ä¸ªè§£é‡Šå™¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Ipython&lt;/strong&gt;ï¼šåŸºäºCPythonä¹‹ä¸Šçš„ä¸€ä¸ªäº¤äº’å¼è§£é‡Šå™¨ï¼Œåœ¨äº¤äº’æ–¹å¼ä¸Šæœ‰æ‰€å¢å¼ºï¼Œæ‰§è¡ŒPythonä»£ç çš„åŠŸèƒ½å’ŒCPythonæ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚CPythonç”¨&amp;gt;&amp;gt;&amp;gt;ä½œä¸ºæç¤ºç¬¦ï¼Œè€ŒIPythonç”¨In [åºå·]:ä½œä¸ºæç¤ºç¬¦ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;PyPy&lt;/strong&gt;ï¼šä¸€ä¸ªè¿½æ±‚æ‰§è¡Œé€Ÿåº¦çš„Pythonè§£é‡Šå™¨ã€‚é‡‡ç”¨JITæŠ€æœ¯ï¼Œå¯¹Pythonä»£ç è¿›è¡ŒåŠ¨æ€ç¼–è¯‘ï¼ˆæ³¨æ„ï¼Œä¸æ˜¯è§£é‡Šï¼‰ï¼Œå¯ä»¥æ˜¾è‘—æé«˜Pythonä»£ç çš„æ‰§è¡Œé€Ÿåº¦ã€‚ç»å¤§éƒ¨åˆ†CPythonä»£ç éƒ½å¯ä»¥åœ¨PyPyä¸‹è¿è¡Œï¼Œä½†è¿˜æ˜¯æœ‰ä¸€äº›ä¸åŒçš„ï¼Œè¿™å°±å¯¼è‡´ç›¸åŒçš„Pythonä»£ç åœ¨ä¸¤ç§è§£é‡Šå™¨ä¸‹æ‰§è¡Œå¯èƒ½ä¼šæœ‰ä¸åŒçš„ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Jython&lt;/strong&gt;ï¼šè¿è¡Œåœ¨Javaå¹³å°ä¸Šçš„Pythonè§£é‡Šå™¨ï¼Œå¯ä»¥ç›´æ¥æŠŠPythonä»£ç ç¼–è¯‘æˆJavaå­—èŠ‚ç æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;IronPython&lt;/strong&gt;ï¼šå’ŒJythonç±»ä¼¼ï¼Œåªä¸è¿‡IronPythonæ˜¯è¿è¡Œåœ¨å¾®è½¯.Netå¹³å°ä¸Šçš„Pythonè§£é‡Šå™¨ï¼Œå¯ä»¥ç›´æ¥æŠŠPythonä»£ç ç¼–è¯‘æˆ.Netçš„å­—èŠ‚ç ã€‚&lt;/p&gt;
&lt;h2 id=&quot;python_1&quot;&gt;äº”ã€ Pythonçš„è¿è¡Œæœºåˆ¶&lt;/h2&gt;
&lt;p&gt;Pythonä½œä¸ºåŠ¨æ€è§£é‡Šæ€§è¯­è¨€ï¼Œå…¶è¿è¡Œæœºåˆ¶å¯å‚è€ƒä¸‹å›¾ï¼ˆå›¾ç‰‡æ¥è‡ªç½‘ç»œï¼Œå…¶ä¸­çš„â€œç¼–è¯‘å™¨â€æ˜¯å¯¹è§£é‡Šå™¨çš„å¹¿ä¹‰ç§°å‘¼ï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;img-responsive&quot; src=&quot;http://static.zybuluo.com/feixuelove1009/b8rpg9on1ms629hl0ldmpcne/image.png&quot; alt=&quot;image.png-157.1kB&quot;/&gt;&lt;/p&gt;
&lt;p&gt;éƒ½è¯´è§£é‡Šå™¨æ…¢ï¼ŒPythonä¹Ÿæœ‰æƒ³åŠæ³•æé«˜ä¸€ä¸‹è¿è¡Œé€Ÿåº¦çš„ï¼Œé‚£å°±æ˜¯ä½¿ç”¨pycæ–‡ä»¶ã€‚è¿™ç‚¹å‚è€ƒäº†JAVAçš„å­—èŠ‚ç åšæ³•ï¼Œä½†å¹¶ä¸å®Œå…¨ç±»åŒã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ç¼–å†™çš„ä»£ç ä¸€èˆ¬éƒ½ä¼šä¿å­˜åœ¨ä»¥.pyä¸ºåç¼€çš„æ–‡ä»¶ä¸­ã€‚åœ¨æ‰§è¡Œç¨‹åºæ—¶ï¼Œè§£é‡Šå™¨é€è¡Œè¯»å–æºä»£ç å¹¶é€è¡Œè§£é‡Šè¿è¡Œã€‚æ¯æ‰§è¡Œä¸€æ¬¡ï¼Œå°±é‡å¤ä¸€æ¬¡è¿™ä¸ªè¿‡ç¨‹ï¼Œè¿™å…¶ä¸­è€—è´¹äº†å¤§é‡çš„é‡å¤æ€§çš„è§£é‡Šå·¥ä½œã€‚ä¸ºäº†å‡å°‘è¿™ä¸€é‡å¤æ€§çš„è§£é‡Šå·¥ä½œï¼ŒPythonå¼•å…¥äº†pycæ–‡ä»¶ï¼Œpycæ–‡ä»¶æ˜¯å°†pyæ–‡ä»¶çš„è§£é‡Šç»“æœä¿å­˜ä¸‹æ¥çš„æ–‡ä»¶ï¼Œè¿™æ ·ï¼Œä¸‹æ¬¡å†è¿è¡Œçš„æ—¶å€™å°±ä¸ç”¨å†è§£é‡Šäº†ï¼Œç›´æ¥ä½¿ç”¨pycæ–‡ä»¶å°±å¯ä»¥äº†ï¼Œè¿™æ— ç–‘å¤§å¤§æé«˜äº†ç¨‹åºè¿è¡Œé€Ÿåº¦ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºpycæ–‡ä»¶ï¼Œä½ å¿…é¡»çŸ¥é“ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;å¯¹äºå½“å‰è°ƒç”¨çš„ä¸»ç¨‹åºä¸ä¼šç”Ÿæˆpycæ–‡ä»¶&lt;/strong&gt;ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»¥import xxxæˆ–from xxx import xxxç­‰æ–¹å¼å¯¼å…¥ä¸»ç¨‹åºçš„æ¨¡å—æ‰ä¼šç”Ÿæˆpycæ–‡ä»¶&lt;/strong&gt;ï¼›&lt;/li&gt;
&lt;li&gt;æ¯æ¬¡ä½¿ç”¨pycæ–‡ä»¶æ—¶ï¼Œéƒ½ä¼šæ ¹æ®pycæ–‡ä»¶çš„åˆ›å»ºæ—¶é—´å’Œæºæ¨¡å—è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœæºæ¨¡å—æœ‰ä¿®æ”¹ï¼Œåˆ™é‡æ–°åˆ›å»ºpycæ–‡ä»¶ï¼Œå¹¶è¦†ç›–å…ˆå‰çš„pycæ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰ä¿®æ”¹ï¼Œç›´æ¥ä½¿ç”¨pycæ–‡ä»¶ä»£æ›¿æ¨¡å—ï¼›&lt;/li&gt;
&lt;li&gt;pycæ–‡ä»¶ç»Ÿä¸€ä¿å­˜åœ¨æ¨¡å—æ‰€åœ¨ç›®å½•çš„__pycache__æ–‡ä»¶å¤¹å†…ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œmodula_aè¢«module_mainå¯¼å…¥åä¼šç”Ÿæˆå¯¹åº”çš„pycæ–‡ä»¶ï¼Œä½†æ˜¯module_mainä¸ä¼šç”Ÿæˆpycæ–‡ä»¶ï¼ï¼&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;img-responsive&quot; src=&quot;http://static.zybuluo.com/feixuelove1009/unsuig1675ezmwqpqd1dptvv/image.png&quot; alt=&quot;image.png-68.9kB&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Sun, 29 Sep 2019 14:58:00 +0000</pubDate>
<dc:creator>æŒ½æ‰‹è¯´æ¢¦è¯ï¼</dc:creator>
<og:description>Python ç¼–è¯‘å™¨ä¸è§£é‡Šå™¨ Pythonçš„ç¯å¢ƒæˆ‘ä»¬å·²ç»æ­å»ºå¥½äº†ï¼Œå¯ä»¥å¼€å§‹å­¦ä¹ åŸºç¡€çŸ¥è¯†äº†ã€‚ä½†æ˜¯ï¼Œåœ¨æ­¤ä¹‹å‰ï¼Œè¿˜è¦å…ˆè¯´è¯´ç¼–è¯‘å™¨ä¸è§£é‡Šå™¨ç›¸å…³çš„å†…å®¹ã€‚ å¦‚æœè¿™éƒ¨åˆ†å†…å®¹ï¼Œè®©ä½ è§‰å¾—éš¾ä»¥ç†è§£æˆ–ä¸èƒ½å®Œå…¨æ˜ç™½ï¼Œå¯ä»¥æš‚æ—¶</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/jqc6/p/11610435.html</dc:identifier>
</item>
</channel>
</rss>