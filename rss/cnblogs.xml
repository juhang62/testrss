<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>åšå®¢å›­_é¦–é¡µ</title>
<link></link>
<description>ä»£ç æ”¹å˜ä¸–ç•Œ</description>
<item>
<title>å°ç™½çš„springbootä¹‹è·¯ï¼ˆåå…­ï¼‰ã€mybatis-plus çš„ä½¿ç”¨ - å¤§å”æ¨</title>
<link>http://www.cnblogs.com/yanghj/p/12446686.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/yanghj/p/12446686.html</guid>
<description>&lt;h2&gt;0-å‰è¨€&lt;/h2&gt;
&lt;p&gt;ã€€ã€€&lt;strong&gt;mybatis plus&lt;/strong&gt;æ˜¯å¯¹mybatisçš„å¢å¼ºï¼Œé›†æˆmybatis plusåï¼Œç®€å•çš„CRUDå’Œåˆ†é¡µå°±ä¸ç”¨å†™äº†ï¼Œéå¸¸æ–¹ä¾¿ï¼Œäº”æ˜Ÿæ¨èï¼›&lt;/p&gt;
&lt;h2&gt;1-é›†æˆ&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;1-1ã€æ·»åŠ ä¾èµ–&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
        &amp;lt;!-- &lt;span&gt;9&lt;/span&gt;ã€é›†æˆmybatis-plus  --&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;com.baomidou&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;mybatis-plus-boot-starter&amp;lt;/artifactId&amp;gt;
            &amp;lt;version&amp;gt;&lt;span&gt;3.2&lt;/span&gt;.&lt;span&gt;0&lt;/span&gt;&amp;lt;/version&amp;gt;
        &amp;lt;/dependency&amp;gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;1-2ã€é…ç½®æ–‡ä»¶å¢åŠ é…ç½®&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
#mybatis-&lt;span&gt;plus
mybatis&lt;/span&gt;-plus.mapper-locations=classpath:mapper&lt;span&gt;/*&lt;/span&gt;&lt;span&gt;Mapper.xml
mybatis-plus.type-aliases-package=com.anson.model
mybatis-plus.configuration.map-underscore-to-camel-case=true&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;1-3ã€é…ç½®ç±»ä¸­å¢åŠ åˆ†é¡µbean&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;    @Bean
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; PaginationInterceptor paginationInterceptor() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;new&lt;/span&gt;&lt;span&gt; PaginationInterceptor();
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;1-4ã€modelï¼ˆå·¥å…·ç”Ÿæˆå³å¯ï¼‰&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package com.anson.model;
import java.io.Serializable;

&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; User implements  Serializable
{
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;----------------------------&lt;/span&gt;
    &lt;span&gt;private&lt;/span&gt;&lt;span&gt; Integer id;
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; String username;
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; String password;
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; String realname;
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;---------------------------&lt;/span&gt;

    &lt;span&gt;public&lt;/span&gt;&lt;span&gt; Integer getId() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; id;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; setId(Integer id) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.id =&lt;span&gt; id;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; String getUsername() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; username;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; setUsername(String username) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.username = username == &lt;span&gt;null&lt;/span&gt; ? &lt;span&gt;null&lt;/span&gt;&lt;span&gt; : username.trim();
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; String getPassword() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; password;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; setPassword(String password) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.password = password == &lt;span&gt;null&lt;/span&gt; ? &lt;span&gt;null&lt;/span&gt;&lt;span&gt; : password.trim();
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; String getRealname() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; realname;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; setRealname(String realname) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.realname = realname == &lt;span&gt;null&lt;/span&gt; ? &lt;span&gt;null&lt;/span&gt;&lt;span&gt; : realname.trim();
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;1-5ã€mapper(XML)&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&amp;lt;?xml version=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;1.0&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; encoding=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;UTF-8&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;?&amp;gt;
&amp;lt;!DOCTYPE mapper PUBLIC &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;-//mybatis.org//DTD Mapper 3.0//EN&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;http://mybatis.org/dtd/mybatis-3-mapper.dtd&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&amp;gt;
&amp;lt;mapper &lt;span&gt;namespace&lt;/span&gt;=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;com.anson.dao.UserMapper&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&amp;gt;
  &amp;lt;resultMap id=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;BaseResultMap&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; type=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;com.anson.model.User&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&amp;gt;
    &amp;lt;id column=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;id&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; jdbcType=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;INTEGER&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; property=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;id&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; /&amp;gt;
    &amp;lt;result column=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;userName&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; jdbcType=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;VARCHAR&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; property=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;username&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; /&amp;gt;
    &amp;lt;result column=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;passWord&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; jdbcType=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;VARCHAR&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; property=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;password&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; /&amp;gt;
    &amp;lt;result column=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;realName&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; jdbcType=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;VARCHAR&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; property=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;realname&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; /&amp;gt;
  &amp;lt;/resultMap&amp;gt;
  &amp;lt;sql id=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Base_Column_List&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&amp;gt;&lt;span&gt;
    id, userName, passWord, realName
  &lt;/span&gt;&amp;lt;/sql&amp;gt;

&amp;lt;/mapper&amp;gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;1-6ã€dao(mapperç±»)ï¼Œç»§æ‰¿Â BaseMapper&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package com.anson.dao;

import com.anson.model.User;
import com.baomidou.mybatisplus.core.mapper.BaseMapper;
import javafx.scene.control.Pagination;
import org.apache.ibatis.annotations.Select;
import org.springframework.stereotype.Repository;
import com.baomidou.mybatisplus.extension.plugins.pagination.Page;
import java.util.List;

@Repository
&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;interface&lt;/span&gt; UserMapper extends BaseMapper&amp;lt;User&amp;gt;&lt;span&gt;
{&lt;/span&gt;&lt;span&gt;
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;1-7ã€service ç»§æ‰¿Â ServiceImpl&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package com.anson.service;

import com.anson.dao.UserMapper;
import com.anson.model.User;
import com.baomidou.mybatisplus.extension.plugins.pagination.Page;
import com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

@Service
&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; UserService extends ServiceImpl&amp;lt;UserMapper, User&amp;gt;&lt;span&gt;
{
    @Autowired
    UserMapper usermapper;&lt;/span&gt;&lt;span&gt;
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;1-8ã€controller&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€çœ‹è§æ²¡ï¼Œä»¥ä¸ŠåŸºæœ¬æ²¡æœ‰ä¸€è¡Œä»£ç ï¼Œä½†æ˜¯åœ¨controlleræˆ‘ä»¬å·²ç»å¯ä»¥ç›´æ¥ä½¿ç”¨å¢åˆ æŸ¥æ”¹å’Œåˆ†é¡µäº†&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt;-----------mybatis plus--------------------
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;1ã€å¢&lt;/span&gt;
&lt;span&gt;
        User user&lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; User();
        user.setId(&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;&lt;span&gt;);
        user.setUsername(&lt;/span&gt;&lt;span&gt;&quot;anson&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
        user.setPassword(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;1236216&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
        user.setRealname(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;ç‹çªçª&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;
&lt;span&gt;        userservice.save(user);
&lt;/span&gt;&lt;span&gt;
    }
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;2ã€åˆ &lt;/span&gt;&lt;br/&gt;&lt;span&gt;        userservice.removeById(id);
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;3ã€æŸ¥&lt;/span&gt;

        User b =&lt;span&gt;userservice.getById(id);
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;4ã€æ”¹&lt;/span&gt;
&lt;span&gt;
        User update &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; User();
        update.setId(&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;&lt;span&gt;);
        update.setUsername(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;alex2266&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;
&lt;span&gt;        userservice.updateById(update);
&lt;/span&gt;&lt;span&gt;}
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;5ã€åˆ†é¡µ&lt;/span&gt;
&lt;span&gt;
        IPage&lt;/span&gt;&amp;lt;User&amp;gt; page=&lt;span&gt;new&lt;/span&gt; Page(&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;3&lt;/span&gt;&lt;span&gt;);
        page &lt;/span&gt;=&lt;span&gt; userservice.page(page);&lt;br/&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;æ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯å¾ˆçˆ½ï¼Œé¡¹ç›®ä¸­ï¼Œåªæœ‰å°‘éƒ¨åˆ†ç‰¹æ®Šçš„æ“ä½œéœ€è¦å•ç‹¬å†™SQLå’Œæ–¹æ³•ï¼Œå¤§éƒ¨åˆ†CRUDéƒ½ä¸éœ€è¦å†™äº†&lt;/strong&gt;&lt;/p&gt;

&lt;h2&gt;2ã€æ³¨æ„çš„åœ°æ–¹&lt;/h2&gt;
&lt;p&gt;ã€€ã€€mybatisä¸­ï¼Œå¯¹äºä¸‹åˆ’çº¿â€œ_â€ï¼Œé»˜è®¤æ˜¯è½¬æ¢æˆå¤§å†™å­—æ¯å¤„ç†çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬æ•°æ®åº“è¡¨å­—æ®µâ€œupdate_timeâ€,mybatisä¼šè½¬æ¢æˆâ€œupdateTimeâ€;&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œ&lt;span&gt;&lt;strong&gt;ä¸ºäº†é¿å‘ï¼Œç›´æ¥ç»™å‡ºå¼ºåˆ¶å»ºè®®ï¼ˆæˆ–è€…è¯´ç»“è®ºï¼‰ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;ã€€ã€€1ã€æ•°æ®åº“è¡¨è®¾è®¡ï¼Œä¸è¦é‡‡ç”¨å¤§å°å†™ï¼Œä¸€å¾‹å°å†™ï¼Œå¤šä¸ªå•è¯ç»„åˆé‡‡ç”¨ä¸‹åˆ’çº¿è¿æ¥ï¼Œå¦‚å­—æ®µâ€œupdate_timeâ€ã€â€œedit_byâ€&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;ã€€ã€€2ã€modelä¸­ï¼Œæ‰€æœ‰é‡‡ç”¨ä¸‹åˆ’çº¿çš„å­—æ®µï¼Œè½¬æ¢æˆé©¼å³°å¤§å°å†™ï¼Œå¦‚ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;ã€€ã€€ã€€ã€€â€œupdate_timeâ€ åœ¨å®ä½“ç±»ä¸­ä¸ºï¼šâ€œupdateTimeâ€ï¼Œ&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;ã€€ã€€ã€€ã€€â€œedit_byâ€ åœ¨å®ä½“ç±»ä¸­ä¸ºï¼š â€œeditByâ€&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

&lt;h2&gt;3ã€mybatis pluså¼ºå¤§çš„æ¡ä»¶æ„é€ å™¨queryWrapperã€updateWrapper&lt;/h2&gt;
&lt;p&gt;ã€€ã€€muybatis plus å¯ä»¥é€šè¿‡æ¡ä»¶æ„é€ å™¨å¢åŠ å„ç§æŸ¥è¯¢å’Œæ›´æ–°æ¡ä»¶ï¼Œæœ‰ä»¥ä¸‹å››ç§æ¡ä»¶æ„é€ å™¨ï¼ˆ&lt;strong&gt;ä¸»è¦ç”¨åä¸¤ç§&lt;/strong&gt;ï¼ŒLambdaåˆ™çœ‹ä¸ªäººå–œå¥½ï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€&lt;strong&gt;LambdaQueryWrapper&lt;/strong&gt; ï¼šçœ‹åç§°ä¹Ÿèƒ½æ˜ç™½å°±æ˜¯ç”¨äºLambdaè¯­æ³•ä½¿ç”¨çš„æŸ¥è¯¢Wrapper&lt;br/&gt;ã€€ã€€ã€€ã€€&lt;strong&gt;LambdaUpdateWrapper&lt;/strong&gt; ï¼š Lambda æ›´æ–°å°è£…Wrapper&lt;br/&gt;ã€€ã€€ã€€ã€€&lt;strong&gt;QueryWrapper&lt;/strong&gt; ï¼š Entity å¯¹è±¡å°è£…æ“ä½œç±»ï¼Œä¸æ˜¯ç”¨lambdaè¯­æ³•&lt;br/&gt;ã€€ã€€ã€€ã€€&lt;strong&gt;UpdateWrapper&lt;/strong&gt; ï¼š Update æ¡ä»¶å°è£…ï¼Œç”¨äºEntityå¯¹è±¡æ›´æ–°æ“ä½œ&lt;/p&gt;
&lt;p&gt;å…ˆè´´å¼ å¸¸ç”¨æ¡ä»¶æ„é€ å™¨å‡½æ•°å›¾ï¼ˆå›¾ç‰‡æ¥æºäºç½‘ç»œï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/i-beta/118906/202003/118906-20200309081134964-1433251131.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;span&gt;Â ä¾‹å­ï¼š&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;42&quot;&gt;
&lt;pre&gt;
        &lt;span&gt;//&lt;/span&gt;&lt;span&gt;1ã€æ ¹æ®æ¡ä»¶åˆ é™¤&lt;/span&gt;
        QueryWrapper&amp;lt;User&amp;gt; queryWrapper = &lt;span&gt;new&lt;/span&gt; QueryWrapper&amp;lt;&amp;gt;&lt;span&gt;();
        queryWrapper
                .isNull(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;username&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
                .ge(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;id&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;12&lt;/span&gt;&lt;span&gt;)
                .isNotNull(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;realname&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
        boolean delete &lt;/span&gt;=&lt;span&gt; userservice.remove(queryWrapper);

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;2ã€æ ¹æ®æ¡ä»¶æŸ¥è¯¢&lt;/span&gt;
        QueryWrapper&amp;lt;User&amp;gt; queryWrapper2 = &lt;span&gt;new&lt;/span&gt; QueryWrapper&amp;lt;&amp;gt;&lt;span&gt;();
        queryWrapper2.eq(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;username&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;eee&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
        User user &lt;/span&gt;=&lt;span&gt; userservice.getOne(queryWrapper2);

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;3ã€æ ¹æ®æ¡ä»¶æŸ¥è¯¢å¹¶åˆ†é¡µ&lt;/span&gt;
        Page&amp;lt;User&amp;gt; page2 = &lt;span&gt;new&lt;/span&gt; Page&amp;lt;&amp;gt;(&lt;span&gt;1&lt;/span&gt;, &lt;span&gt;5&lt;/span&gt;&lt;span&gt;);
        QueryWrapper&lt;/span&gt;&amp;lt;User&amp;gt; queryWrapper3 = &lt;span&gt;new&lt;/span&gt; QueryWrapper&amp;lt;&amp;gt;&lt;span&gt;();
        queryWrapper3.like(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;username&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
        IPage&lt;/span&gt;&amp;lt;User&amp;gt; userIPage =&lt;span&gt; userservice.page(page2, queryWrapper3);

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;4ã€æ ¹æ®æ¡ä»¶æ›´æ–°&lt;/span&gt;
&lt;span&gt;
        User user2 &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; User();
        user2.setRealname(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;zhangsan&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);

        UpdateWrapper&lt;/span&gt;&amp;lt;User&amp;gt; userUpdateWrapper = &lt;span&gt;new&lt;/span&gt; UpdateWrapper&amp;lt;&amp;gt;&lt;span&gt;();
        userUpdateWrapper.eq(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;username&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;eee&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);

        boolean update &lt;/span&gt;= userservice.update(user, userUpdateWrapper);
&lt;/pre&gt;&lt;/div&gt;

</description>
<pubDate>Mon, 09 Mar 2020 00:34:00 +0000</pubDate>
<dc:creator>å¤§å”æ¨</dc:creator>
<og:description>0-å‰è¨€ mybatis plusæ˜¯å¯¹mybatisçš„å¢å¼ºï¼Œé›†æˆmybatis plusåï¼Œç®€å•çš„CRUDå’Œåˆ†é¡µå°±ä¸ç”¨å†™äº†ï¼Œéå¸¸æ–¹ä¾¿ï¼Œäº”æ˜Ÿæ¨èï¼› 1-é›†æˆ 1-1ã€æ·»åŠ ä¾èµ– &amp;lt;!-- 9ã€é›†æˆm</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/yanghj/p/12446686.html</dc:identifier>
</item>
<item>
<title>ç¨‹åºå‘˜è¿‡å…³æ–©å°†--ä»æ¯ç§’6000å†™è¯·æ±‚è°ˆèµ· - æ¶æ„å¸ˆä¿®è¡Œä¹‹è·¯</title>
<link>http://www.cnblogs.com/zhanlang/p/12446675.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/zhanlang/p/12446675.html</guid>
<description>&lt;p&gt;&lt;img src=&quot;https://bdn.135editor.com/files/users/553/5534532/202003/wACNKZQZ_KhvW.png&quot; alt=&quot;image&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;èƒŒæ™¯&quot;&gt;èƒŒæ™¯&lt;/h3&gt;
&lt;p&gt;æ¯ä¸€ä¸ªç‰‡å­çš„å¹•åï¼Œéƒ½ä¿ç•™äº†ä½ çš„è§‚çœ‹è®°å½•ï¼Œè¯¦ç»†çš„è®°ç€ä½ è§‚çœ‹äº†å‡ æ¬¡ï¼Œè·³è¿‡äº†é‚£äº›æ—¶é•¿ ï¼Œæ®è¯´æ ¹æ®è¿™äº›æ•°æ®å¯ä»¥åˆ†æå‡ºä½ å–œæ¬¢å“ªä¸ªæ—¥æœ¬æ˜æ˜Ÿï¼Œä»¥æ­¤æ¥åšå®šå‘æ¨é€......&lt;/p&gt;
&lt;p&gt;è™½ç„¶çœ‹èµ·æ¥å¾ˆç®€å•çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œå…¶å®æ¶‰åŠåˆ°çš„æ•°æ®é‡éå¸¸å¤§ï¼Œæé™æƒ…å†µä¸‹ä¸ºä½ çš„ç”¨æˆ·æ•°*è§†é¢‘æ•°çš„ä¹˜ç§¯ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆåœ¨åªæœ‰ä¸¤ä¸ªç½‘ç«™æœåŠ¡å™¨ï¼Œä¸€å°sqlserverçš„æƒ…å†µä¸‹ï¼Œè¯¥å¦‚ä½•é¢å¯¹è¿™æ ·ä¸ç®—å¤§æ•°æ®é‡çš„å†™è¯·æ±‚å‘¢ï¼Ÿä¸ºä»€ä¹ˆè¯´æ˜¯å†™è¯·æ±‚å‘¢ï¼Ÿå› ä¸ºç”¨æˆ·è§‚çœ‹è§†é¢‘çš„æ¯ä¸€ç§’ä½ éƒ½éœ€è¦è®°å½•ä¸‹æ¥ï¼Œä¾‹å¦‚ï¼šè§†é¢‘çš„ç¬¬åç§’ç”¨æˆ·è§‚çœ‹äº†ã€‚è¦æƒ³æŠŠè¿™ä¸ªåŠŸèƒ½æå®šï¼Œé¦–å…ˆéœ€è¦å®šä¹‰å‡ ä¸ªäº‹æƒ…ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;è®°å½•ç”¨æˆ·è§‚çœ‹è§†é¢‘æƒ…å†µçš„æ•°æ®å®šä¹‰&lt;/li&gt;
&lt;li&gt;å’Œå®¢æˆ·ç«¯äº¤äº’çš„æ•°æ®åè®®&lt;/li&gt;
&lt;li&gt;æ•°æ®åº“ä¸­è®°å½•çš„æ•°æ®æ ¼å¼&lt;/li&gt;
&lt;li&gt;å¦‚ä½•è§£å†³æœåŠ¡å™¨å†™çš„å‹åŠ›ï¼ˆæ¯•ç«Ÿå•å°æœåŠ¡å™¨è¯·æ±‚æ•°è¿˜æ˜¯æ¯”è¾ƒå¤§ï¼‰&lt;/li&gt;
&lt;/ol&gt;&lt;h3 id=&quot;è§£å†³æ–¹æ¡ˆ&quot;&gt;è§£å†³æ–¹æ¡ˆ&lt;/h3&gt;
&lt;h5 id=&quot;ç”¨æˆ·è§‚çœ‹è§†é¢‘è¿›åº¦å®šä¹‰&quot;&gt;ç”¨æˆ·è§‚çœ‹è§†é¢‘è¿›åº¦å®šä¹‰&lt;/h5&gt;
&lt;p&gt;å¯¹äºä¸€ä¸ªè§†é¢‘æ¥è¯´ï¼Œå‡å¦‚æœ‰1ä¸ªå°æ—¶çš„æ—¶é•¿ï¼Œè¿™3600ç§’å¯¹åº”ç€3600ä¸ªæ˜¯å¦å·²ç»è§‚çœ‹çš„çŠ¶æ€ï¼Œå¯¹äºè§‚çœ‹çŠ¶æ€æ¥è¯´ï¼Œåªæœ‰è§‚çœ‹å’Œæœªè§‚çœ‹ä¸¤ç§çŠ¶æ€ï¼Œæ‰€ä»¥ä¸€ä¸ªbitè¶³ä»¥ï¼Œä¸€ä¸ªå­—èŠ‚ï¼ˆbyteï¼‰æœ‰8ä¸ªbitï¼Œæ‰€ä»¥ä¸€ä¸ªbyteå¯ä»¥è¡¨ç¤º8ç§’çš„è§‚çœ‹çŠ¶æ€ï¼Œä»¥æ­¤ä¸ºåŸºç¡€ï¼Œè¿›åˆ¶è¶Šé«˜ï¼ŒåŒæ ·æ•°é‡çš„å­—ç¬¦è¡¨ç¤ºçš„çŠ¶æ€å°±è¶Šå¤šã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;11&quot;&gt;
&lt;p&gt;å®¢æˆ·ç«¯æ¯æ¬¡ä¸Šä¼ æ–°çš„æ•°æ®ï¼Œéœ€è¦å’ŒæœåŠ¡ç«¯å·²ç»å­˜åœ¨çš„æ•°æ®åšä½è¿ç®—ï¼Œä¾‹å¦‚ï¼š 01000 è¡¨ç¤ºç¬¬äºŒç§’è§‚çœ‹äº† ï¼Œå®¢æˆ·ç«¯æ–°ä¸Šä¼ ï¼š00011 è¡¨ç¤ºç¬¬4,5ç§’éƒ½è§‚çœ‹äº†ï¼Œå¯¹äºç”¨æˆ·è€Œè¨€è¿™ä¸ªè§†é¢‘ç¬¬2,4,5 ç§’éƒ½çœ‹è¿‡ï¼Œè™½ç„¶åªæ˜¯ä¸€ä¸ªç®€å•çš„è¿ç®—ï¼Œä½†æ˜¯é‡å¤§çš„æ—¶å€™ï¼Œå¯¹cpuçš„æ¶ˆè€—ä¸å®¹å°è§‘ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;
&lt;code&gt;ç¬¬ä¸€å­—èŠ‚    ç¬¬äºŒå­—èŠ‚
  0 1 2 3 4 5 6 7  0 1 2 3 4 5 6 7 
bitï¼š  1 0 0 0 1 0 0 0  0 1 0 0 0 0 0 0
äºŒè¿›åˆ¶ï¼š  0x88    0x40
å­—ç¬¦ä¸²ï¼š  8840&lt;/code&gt;
&lt;/pre&gt;
&lt;h5 id=&quot;å’Œå®¢æˆ·ç«¯äº¤äº’åè®®&quot;&gt;å’Œå®¢æˆ·ç«¯äº¤äº’åè®®&lt;/h5&gt;
&lt;p&gt;ç”¨æˆ·è§‚çœ‹è§†é¢‘çš„è¿›åº¦å®æ—¶ä¿¡æ¯ï¼Œåªæœ‰å®¢æˆ·ç«¯çŸ¥é“ï¼Œå®¢æˆ·ç«¯éœ€è¦ä¸Šä¼ ç”¨æˆ·çš„è§‚çœ‹è¿›åº¦æ•°æ®ï¼Œå’ŒæœåŠ¡ç«¯äº¤äº’çš„è¿›åˆ¶å¯ä»¥é€‰æ‹©é€šç”¨æ€§æ¯”è¾ƒå¼ºçš„16è¿›åˆ¶ï¼Œå½“ç„¶ä½ é€‰æ‹©100è¿›åˆ¶ä¹Ÿæ— æ‰€è°“ï¼Œåªè¦åŒæ–¹èƒ½åŒæ—¶æ”¯æŒï¼Œå¹¶ä¸”èƒ½æ­£å¸¸è§£æå³å¯&lt;/p&gt;
&lt;h5 id=&quot;æ•°æ®åº“æ•°æ®æ ¼å¼&quot;&gt;æ•°æ®åº“æ•°æ®æ ¼å¼&lt;/h5&gt;
&lt;p&gt;æ¯ç§æ•°æ®åº“æ”¯æŒçš„æ•°æ®ç±»å‹æœ‰å·®å¼‚ï¼Œæ‰€ä»¥è¿™é‡Œä¸åœ¨è¿‡å¤šå™è¿°ï¼Œå½“ç„¶æ— è®ºä»€ä¹ˆæ ¼å¼ï¼Œå ç”¨ç©ºé—´è¶Šå°‘è¶Šå¥½ï¼Œä½†ä¹Ÿè¦æ ¹æ®ä¸šåŠ¡çš„è®¡ç®—é‡æ¥ç»¼åˆè€ƒè™‘ã€‚&lt;/p&gt;
&lt;h3 id=&quot;è§£å†³é—®é¢˜&quot;&gt;è§£å†³é—®é¢˜&lt;/h3&gt;
&lt;h5 id=&quot;cpuæ€§èƒ½é—®é¢˜&quot;&gt;cpuæ€§èƒ½é—®é¢˜&lt;/h5&gt;
&lt;p&gt;æ¯•ç«Ÿè¦æŠŠç”¨æˆ·æ¯æ¬¡æœ€æ–°çš„è§‚çœ‹æ•°æ®å’Œè€æ•°æ®åšåˆå¹¶å·¥ä½œï¼Œåœ¨ç”¨æˆ·é‡å¤§çš„æƒ…å†µä¸‹ä¸å®¹å°è§‘ã€‚åœ¨ç»¼åˆäº†å„ç§æ¡ä»¶ä¹‹åï¼Œæœ€ç»ˆé‡‡ç”¨10è¿›åˆ¶æ¥åšåˆå¹¶å·¥ä½œï¼Œå®¢æˆ·ç«¯ä¸Šä¼ ä¸Šæ¥16è¿›åˆ¶æ•°æ®ï¼Œç„¶åè½¬åŒ–ä¸ºåè¿›åˆ¶ï¼Œç„¶åå’Œè§‚çœ‹è®°å½•ï¼ˆ10è¿›åˆ¶ï¼‰åšåˆå¹¶è¿ç®—ï¼Œè¿™éƒ¨åˆ†cpuçœç•¥ä¸äº†ï¼Œå…·ä½“è½¬åŒ–ç¨‹åºä¸ºï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt; //éœ€è¦æ–°åŠ çš„æ•°æ®
        ConcurrentQueue&amp;lt;UserVideoInfo&amp;gt; AddQueue = new ConcurrentQueue&amp;lt;UserVideoInfo&amp;gt;();

//æŠŠ16è¿›åˆ¶çš„å­—ç¬¦ä¸²æŒ‰ç…§ä¸¤ä½ åˆ†å‰²æˆåè¿›åˆ¶æ•°ç»„
        protected List&amp;lt;int&amp;gt; ConvertToProgressArray(string progressString)
        {
            if (string.IsNullOrWhiteSpace(progressString))
            {
                return null;
            }
            //éªŒè¯æ˜¯å¦ä¸º2çš„å€æ•°é•¿åº¦
            if (progressString.Length % 2 != 0)
            {
                return null;
            }
            var proStrSpan = progressString.AsSpan();
            List&amp;lt;int&amp;gt; ret = new List&amp;lt;int&amp;gt;();
          
            int i = 0;
            while (i &amp;lt; proStrSpan.Length)
            {
                ret.Add(int.Parse(proStrSpan.Slice(i, 2).ToString(), System.Globalization.NumberStyles.HexNumber)); ;
                i = i + 2;
            }
            return ret;
        }&lt;/code&gt;
&lt;/pre&gt;
&lt;h5 id=&quot;å®¢æˆ·ç«¯è¯·æ±‚æ•°é‡é—®é¢˜&quot;&gt;å®¢æˆ·ç«¯è¯·æ±‚æ•°é‡é—®é¢˜&lt;/h5&gt;
&lt;p&gt;å¦‚æœåŒæ—¶ä¸€ä¸‡ç”¨æˆ·åœ¨åŒæ—¶è§‚çœ‹è§†é¢‘ï¼Œä¸Šä¼ æ•°æ®æ—¶é—´é—´éš”ä¸º2ç§’ï¼Œæ„å‘³ç€æ¯ç§’æœ‰5000è¯·æ±‚ã€‚ç”±äºè¿™ä¸ªä¸šåŠ¡åªæ˜¯ä¸€ä¸ªç”¨æˆ·logå‹ä¸šåŠ¡ï¼Œä½•ä¸ºlogå‹ï¼Œå°±æ˜¯è¯´å¯ä»¥å®¹å¿ä¸€éƒ¨åˆ†æ•°æ®ä¸¢å¤±ï¼Œé’ˆå¯¹è¿™ä¸ªæ•°æ®å½¢æ€ï¼Œå®¢æˆ·ç«¯å¯ä»¥å…ˆåœ¨æœ¬åœ°åšç¼“å†²è®°å½•ï¼Œæ²¡æœ‰å¿…è¦ä¸€ç§’ä¸Šä¼ ä¸€æ¬¡è®°å½•ï¼Œä¾‹å¦‚ç°åœ¨çº¦å®šçš„å®¢æˆ·ç«¯30ç§’ä¸Šä¼ ä¸€æ¬¡è®°å½•ï¼Œå¦‚æœç”¨æˆ·å…³æ‰å®¢æˆ·ç«¯ï¼Œä¸‹æ¬¡å¯åŠ¨çš„æ—¶å€™ä¼šé‡æ–°ä¸Šä¼ æœªæˆåŠŸçš„è®°å½•ã€‚&lt;/p&gt;
&lt;h5 id=&quot;æ•°æ®åº“å‹åŠ›&quot;&gt;æ•°æ®åº“å‹åŠ›&lt;/h5&gt;
&lt;p&gt;å¦‚æœæ¯æ¬¡è¯·æ±‚éƒ½å•ç‹¬æ›´æ–°æ•°æ®åº“ï¼ŒæŒ‰ç…§ç¬¬äºŒæ¡çš„è®¡ç®—æ¯ç§’é«˜è¾¾5000æ¬¡updateè¯·æ±‚ã€‚ç”¨æˆ·è§‚çœ‹æ¯æ¬¡è§†é¢‘éƒ½åŠ è½½å†…å­˜ä¸­ç¼“å­˜ï¼Œä»”ç»†åˆ†æè¿™ç§ä¸šåŠ¡ï¼Œç”±äºæ˜¯logå‹æ•°æ®ï¼Œæ‰€ä»¥æ¯æ¬¡ä½ è¯·æ±‚æ²¡æœ‰å¿…è¦éƒ½å»æ›´æ–°æ•°æ®åº“ï¼Œè€Œæ˜¯å…ˆæ›´æ–°äº†ç¼“å­˜ï¼Œç„¶åå®šæ—¶å»æ›´æ–°æ•°æ®åº“ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºæ•°æ®é‡çš„é—®é¢˜ï¼Œæ‰€æœ‰çš„æ›´æ–°æ“ä½œéƒ½ä¼šå‘é€åˆ°ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼Œé˜Ÿåˆ—çš„æ‰§è¡Œè€…ä¼šæ ¹æ®é…ç½®æ‰¹é‡æ›´æ–°æ•°æ®åº“ï¼Œè¿™æ ·æ¯”å•æ¡æ›´æ–°æ•°æ®åº“æ€§èƒ½è¦é«˜å¾ˆå¤šï¼Œå…¶å®è¿™ç§æ–¹æ¡ˆåœ¨å¾ˆå¤šlogå‹çš„ä¸šåŠ¡ä¸­éƒ½æœ‰ä½¿ç”¨ï¼Œæ‰¹é‡æ›´æ–°å¯¹æ•°æ®åº“çš„å‹åŠ›è¦å°å¾ˆå¤š,ä»£ç ç±»ä¼¼ä»¥ä¸‹&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;public async Task&amp;lt;int&amp;gt; AddUserVideoData(UserVideoInfo data, DBProcessEnum processType = DBProcessEnum.Update)
        {
            if(processType== DBProcessEnum.Add)
            {
                AddQueue.Enqueue(data);
            }
           
            return 1;
        }

 void MulProcessData()
        {
            //æ¯æ¬¡æ›´æ–°çš„æ¡æ•°
            int maxNumber = 50;
            List&amp;lt;UserVideoInfo&amp;gt; data = new List&amp;lt;UserVideoInfo&amp;gt;();
            while (true)
            {
                if (data == null)
                {
                    data = new List&amp;lt;UserVideoInfo&amp;gt;();
                }
                try
                {                   
                    if (!AddQueue.Any() &amp;amp;&amp;amp; !UpdateQueue.Any())
                    {
                        System.Threading.Thread.Sleep(500);
                    }                   
                    else
                    {
                        //å…ˆå¤„ç† éœ€è¦æ›´æ–°çš„
                        data.Clear();
                        while (data.Count &amp;lt;= maxNumber &amp;amp;&amp;amp; AddQueue.Any())
                        {
                            if (!AddQueue.TryDequeue(out UserVideoInfo value))
                            {                                
                                continue;
                            }
                            //åˆ¤æ–­æ˜¯å¦æœ‰é‡å¤å¯¹è±¡
                            if (data.Any(s =&amp;gt; s.UserId == value.UserId &amp;amp;&amp;amp; s.VideoId == value.VideoId))
                            {
                                var exsitItem = data.First(s =&amp;gt; s.UserId == value.UserId &amp;amp;&amp;amp; s.VideoId == value.VideoId);
                                exsitItem = value;
                            }
                            else
                            {
                                data.Add(value);
                            }

                        }
                        if (data != null &amp;amp;&amp;amp; data.Any())
                        {
                            var ret = UserVideoProgressProxy.Add(data);
                        }
                        
                    }
                }
                catch (Exception err)
                {
                    
                }


            }
        }&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;å†™åœ¨æœ€å&quot;&gt;å†™åœ¨æœ€å&lt;/h3&gt;
&lt;p&gt;å…¶å®è¿™ç§é«˜IOçš„æ“ä½œç”¨sqlserverè¿™ç§å…³ç³»å‹æ•°æ®åº“åè€Œä¸å¥½ï¼ŒNosqlåœ¨è¿™ç§ç®€å•é«˜IOçš„æƒ…å¢ƒä¸‹è¦å¾ˆå¤šï¼Œæ”¹å¤©å¯ä»¥æ”¹ä¸ºredisè¯•ä¸€è¯•ï¼Œä¼°è®¡ä¼šæ¯”sqlserverè¦å¥½å¾ˆå¤šã€‚&lt;/p&gt;
</description>
<pubDate>Mon, 09 Mar 2020 00:28:00 +0000</pubDate>
<dc:creator>æ¶æ„å¸ˆä¿®è¡Œä¹‹è·¯</dc:creator>
<og:description>èƒŒæ™¯ æ¯ä¸€ä¸ªç‰‡å­çš„å¹•åï¼Œéƒ½ä¿ç•™äº†ä½ çš„è§‚çœ‹è®°å½•ï¼Œè¯¦ç»†çš„è®°ç€ä½ è§‚çœ‹äº†å‡ æ¬¡ï¼Œè·³è¿‡äº†é‚£äº›æ—¶é•¿ ï¼Œæ®è¯´æ ¹æ®è¿™äº›æ•°æ®å¯ä»¥åˆ†æå‡ºä½ å–œæ¬¢å“ªä¸ªæ—¥æœ¬æ˜æ˜Ÿï¼Œä»¥æ­¤æ¥åšå®šå‘æ¨é€...... è™½ç„¶çœ‹èµ·æ¥å¾ˆç®€å•çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œå…¶å®æ¶‰åŠ</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/zhanlang/p/12446675.html</dc:identifier>
</item>
<item>
<title> GitHub çƒ­ç‚¹é€Ÿè§ˆ vol.10ï¼šç–«æƒ…ä¸‹çš„ GitHub  - å‰Šå¾®å¯’</title>
<link>http://www.cnblogs.com/xueweihan/p/12445600.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/xueweihan/p/12445600.html</guid>
<description>&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/759200/202003/759200-20200308222958578-1932475217.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä½œè€…ï¼šHelloGitHub-&lt;strong&gt;å°é±¼å¹²&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;æ‘˜è¦ï¼šå¦‚æœè¯´ä¸Šå‘¨çš„ GitHub æ˜¯è‚¡å¸‚é™„ä½“ star ä½è¿·ä¸æŒ¯ï¼Œé‚£ä¹ˆæœ¬å‘¨çš„ GitHub åƒæäº†å—åˆ°ç–«æƒ…å½±å“è€Œæœªå¼€å­¦çš„é«˜æ ¡ä»¬ï¼Œæ–°ç”Ÿ GitHub é¡¹å°‘ï¼Œèƒ½ä¸Š GitHub Trending çš„æ•°é‡æ›´å°‘ï¼ŒåŸºæœ¬ä¸Šä¸€åªæ‰‹æ•°å¾—è¿‡æ¥çš„æƒ¨æ·¡ï¼Œè€Œå®ƒä»¬çš„ star æˆç»©å•åŒæ ·åƒæ˜¯å°‘äº†è€å¸ˆç›‘ç®¡çš„ä¸­å°å­¦ç”Ÿäº¤ä½œä¸šâ€”â€”è´¨é‡ä¸ä½³ã€è¿Ÿè¿Ÿä¸äº¤ ğŸŒš å¥½åœ¨æ¯å¹´å¼€å­¦æ–°ç”Ÿä¸­æ€»æœ‰è®©äººçœ¼å‰ä¸€äº®çš„é€‰æ‰‹ï¼Œæ¯”å¦‚ï¼Œæœ¬å‘¨åˆšå¼€æºï¼Œå¼€æºå½“æ—¥å¹¶æ–©è· 2k+ star çš„ä¸œäº¬ç–«æƒ…é¡¹ç›®â€¦&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä»¥ä¸‹å†…å®¹æ‘˜å½•è‡ªä¸Šå‘¨ HelloGitHub å¾®åšçš„ GitHub Trendingï¼Œé€‰é¡¹æ ‡å‡†ï¼š&lt;code&gt;æ–°å‘å¸ƒ&lt;/code&gt; | &lt;code&gt;å®ç”¨&lt;/code&gt; | &lt;code&gt;æœ‰è¶£&lt;/code&gt;ï¼Œæ ¹æ®é¡¹ç›® release æ—¶é—´åˆ†ç±»ï¼Œå‘å¸ƒæ—¶é—´è¶…è¿‡ 30 å¤©çš„é¡¹ç›®ä¸€å¾‹ç§°ä¹‹ä¸ºæˆç†Ÿç¨³é‡è€é¡¹ç›®ï¼Œç”±äºæ–‡ç« ç¯‡å¹…é—®é¢˜è¿˜æœ‰éƒ¨åˆ†é¡¹ç›®æœªèƒ½åœ¨æœ¬æ–‡å±•ç¤ºï¼Œæœ›å‘¨çŸ¥ ğŸŒ&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æœ¬æ–‡ç›®å½•
&lt;ul&gt;&lt;li&gt;
&lt;ol&gt;&lt;li&gt;å¯æ€• GitHub æ–°ç”Ÿ&lt;/li&gt;
&lt;/ol&gt;&lt;ul&gt;&lt;li&gt;1.1 è‹¹æœå¼€æºå‚æ•°è§£æå™¨ï¼šSwift Argument Parser&lt;/li&gt;
&lt;li&gt;1.2 fastai è‰ç¨¿ï¼šfastbook&lt;/li&gt;
&lt;li&gt;1.3 æ•°æ®é›†ï¼šCLUEDatasetSearch&lt;/li&gt;
&lt;li&gt;1.4 ç”µå•†ç³»ç»Ÿ+1ï¼šElysiumMall&lt;/li&gt;
&lt;li&gt;1.5 è°·æ­Œå¼€æºï¼šFuzzBench&lt;/li&gt;
&lt;li&gt;1.6 CAA æ£€æµ‹ï¼šlecaa&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;
&lt;ol&gt;&lt;li&gt;å°šèƒ½æ˜Ÿå¦ GitHub è€é¡¹ç›®&lt;/li&gt;
&lt;/ol&gt;&lt;ul&gt;&lt;li&gt;2.1 500+ CSS å›¾æ ‡ï¼šcss.gg&lt;/li&gt;
&lt;li&gt;2.2 å­¦ C++ å—ï¼Ÿï¼šCPlusPlusThings&lt;/li&gt;
&lt;li&gt;2.3 Python ä»£ç æ®µï¼špysheeet&lt;/li&gt;
&lt;li&gt;2.4 äº‘ç›¸å†Œï¼šlsky-pro&lt;/li&gt;
&lt;li&gt;2.5 CSS å®è·µï¼šSimpsons in CSS&lt;/li&gt;
&lt;li&gt;2.6 Go ç‰ˆ Dubboï¼šdubbo-go&lt;/li&gt;
&lt;li&gt;2.7 æ•°æ®ç§‘å­¦ï¼šData-Science--Cheat-Sheet&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;
&lt;ol&gt;&lt;li&gt;æœ¬å‘¨ GitHub Trending #ç–«æƒ…ä¸‹çš„ GitHub #ä¸»é¢˜çš„ä¸»åŠ›å†›&lt;/li&gt;
&lt;/ol&gt;&lt;ul&gt;&lt;li&gt;3.1 å£ç½©é¡¹ç›®ï¼šFaceMaskDetection&lt;/li&gt;
&lt;li&gt;3.2 ä¸œäº¬ç–«æƒ…æ•°æ®ï¼šä¸œäº¬éƒ½æ–°å‹ã‚³ãƒ­ãƒŠã‚¦ã‚¤ãƒ«ã‚¹æ„ŸæŸ“ç—‡å¯¾ç­–ã‚µã‚¤ãƒˆ&lt;/li&gt;
&lt;li&gt;3.3 å¯è§†åŒ–ç–«æƒ…æ•°æ®ï¼šCOVID-19&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;
&lt;ol&gt;&lt;li&gt;æ¨èé˜…è¯»&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;å¯æ€•-github-æ–°ç”Ÿ&quot;&gt;1. å¯æ€• GitHub æ–°ç”Ÿ&lt;/h2&gt;
&lt;h3 id=&quot;è‹¹æœå¼€æºå‚æ•°è§£æå™¨swift-argument-parser&quot;&gt;1.1 è‹¹æœå¼€æºå‚æ•°è§£æå™¨ï¼šSwift Argument Parser&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;æœ¬å‘¨ star å¢é•¿æ•°ï¼š300+&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Swift Argument Parser æ˜¯è‹¹æœå®˜æ–¹å¼€æºçš„å‚æ•°è§£æå™¨ï¼Œå…·æœ‰ç›´è§‚ã€å®‰å…¨çš„ç‰¹ç‚¹ã€‚æ­¤å¤–è‹¹æœä¹Ÿæ¨èäº† 2 ä¸ª ArgumentParser åœ¨ Swift é¡¹ç›®å·¥å…·ä¸­é‡‡ç”¨çš„ç¤ºä¾‹ï¼š&lt;br/&gt;ğŸ¨ indexstore-db æ˜¯ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå‘½ä»¤çš„ç®€å•å®ä¾‹ï¼›&lt;br/&gt;ğŸˆ swift-format åˆ™ç”¨äº†ä¸€äº›é«˜çº§åŠŸèƒ½ï¼Œä¾‹å¦‚è‡ªå®šä¹‰é€‰é¡¹å€¼å’Œéšè—æ ‡å¿—ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;1.2698412698413&quot;&gt;
&lt;p&gt;GitHub åœ°å€â†’&lt;a href=&quot;https://github.com/apple/swift-argument-parsers&quot; class=&quot;uri&quot;&gt;https://github.com/apple/swift-argument-parsers&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/759200/202003/759200-20200308223033684-731547972.jpg&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;fastai-è‰ç¨¿fastbook&quot;&gt;1.2 fastai è‰ç¨¿ï¼šfastbook&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;æœ¬å‘¨ star å¢é•¿æ•°ï¼š3500+&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;AI æœ‰å¤šç«å‘¢ï¼Ÿè¿™ä¸ªä»‹ç»æ·±åº¦å­¦ä¹ ï¼Œfastai å’Œ PyTorch çš„é¡¹ç›®ä¸€å¼€æºç›´é€¼ 2k starï¼Œå½“ç„¶ star å¢é•¿é‡è¿‡ 1,600+ï¼Œå¦‚æœä½ æƒ³å­¦ä¹  fastai è¿™ä¸ªæ·±åº¦å­¦ä¹ å¼€æºåº“ï¼Œä¸å¦¨è¯•è¯•è¿™ä¸ªé¡¹ç›®ï¼Œè¯¥é¡¹ç›®æš‚æ—¶åªæ˜¯ä¸€ä¸ªåˆç¨¿ï¼Œå°†åœ¨ä»Šå¹´ 7 æœˆå·¦å³ä»¥ MOOC çš„å½¢å¼é¢ä¸–ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;1.6&quot;&gt;
&lt;p&gt;GitHub åœ°å€â†’&lt;a href=&quot;https://github.com/fastai/fastbook&quot; class=&quot;uri&quot;&gt;https://github.com/fastai/fastbook&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/759200/202003/759200-20200308223041787-156494018.png&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;æ•°æ®é›†cluedatasetsearch&quot;&gt;1.3 æ•°æ®é›†ï¼šCLUEDatasetSearch&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;æœ¬å‘¨ star å¢é•¿æ•°ï¼š450+&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;CLUEDatasetSearch æ˜¯ä¸€ä¸ªä¸­è‹±æ–‡ NLP æ•°æ®é›†ï¼Œå®ƒæ”¯æŒä½ åœ¨çº¿æœç´¢æŸä¸ªæ•°æ®é›†ï¼Œç›®å‰æ”¶å½•äº†ã€æƒ…æ„Ÿåˆ†æã€‘ã€ã€æ–‡æœ¬åˆ†ç±»ã€‘ã€ã€æ–‡æœ¬åŒ¹é…ã€‘ã€ã€çŸ¥è¯†å›¾è°±ã€‘ã€ã€è¯­æ–™åº“ã€‘ã€ã€æœºå™¨ç¿»è¯‘ã€‘ç­‰æ–¹é¢å†…å®¹ã€‚ â€‹â€‹â€‹â€‹&lt;/p&gt;
&lt;blockquote readability=&quot;1.2121212121212&quot;&gt;
&lt;p&gt;GitHub åœ°å€â†’&lt;a href=&quot;https://github.com/CLUEbenchmark/CLUEDatasetSearch&quot; class=&quot;uri&quot;&gt;https://github.com/CLUEbenchmark/CLUEDatasetSearch&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/759200/202003/759200-20200308223049913-1923350210.gif&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;ç”µå•†ç³»ç»Ÿ1elysiummall&quot;&gt;1.4 ç”µå•†ç³»ç»Ÿ+1ï¼šElysiumMall&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;æœ¬å‘¨ star å¢é•¿æ•°ï¼š500+&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ElysiumMall æ˜¯åˆšå¼€æºçš„ç”µå•†ç³»ç»Ÿï¼Œé‡‡ç”¨æµè¡ŒæŠ€æœ¯å®ç°ï¼Œå®ƒç”±å‰å°å•†åŸå’Œåå°ç®¡ç†ç³»ç»Ÿä¸¤éƒ¨åˆ†ç»„æˆï¼ŒåŸºäº SpringBoot + MyBatis å®ç°ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å‰å°å•†åŸç³»ç»ŸåŒ…å«é¦–é¡µé—¨æˆ·ã€å•†å“æ¨èã€å•†å“æœç´¢ã€å•†å“å±•ç¤ºã€è´­ç‰©è½¦ã€è®¢å•æµç¨‹ã€ä¼šå‘˜ä¸­å¿ƒã€å®¢æˆ·æœåŠ¡ã€å¸®åŠ©ä¸­å¿ƒç­‰æ¨¡å—ã€‚&lt;/li&gt;
&lt;li&gt;åå°ç®¡ç†ç³»ç»ŸåŒ…å«å•†å“ç®¡ç†ã€è®¢å•ç®¡ç†ã€ä¼šå‘˜ç®¡ç†ã€ä¿ƒé”€ç®¡ç†ã€è¿è¥ç®¡ç†ã€å†…å®¹ç®¡ç†ã€ç»Ÿè®¡æŠ¥è¡¨ã€è´¢åŠ¡ç®¡ç†ã€æƒé™ç®¡ç†ã€è®¾ç½®ç­‰æ¨¡å—ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;blockquote readability=&quot;1.4035087719298&quot;&gt;
&lt;p&gt;GitHub åœ°å€â†’&lt;a href=&quot;https://github.com/JackZhu426/ElysiumMall&quot; class=&quot;uri&quot;&gt;https://github.com/JackZhu426/ElysiumMall&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/759200/202003/759200-20200308223059041-887892324.gif&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;è°·æ­Œå¼€æºfuzzbench&quot;&gt;1.5 è°·æ­Œå¼€æºï¼šFuzzBench&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;æœ¬å‘¨ star å¢é•¿æ•°ï¼š300+&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;FuzzBench æ˜¯è°·æ­Œå¼€æºçš„åŸºå‡†æµ‹è¯•æœåŠ¡ï¼Œå¯ç”¨äºæ¨¡ç³Šæµ‹è¯•ï¼Œå®ƒæä¾›äº†&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;é›†æˆæ¨¡ç³Šæµ‹è¯•çš„ API&lt;/li&gt;
&lt;li&gt;åŸºäºçœŸå®æ•°æ®çš„åŸºå‡†ï¼ŒFuzzBench å¯ä»¥ä½¿ç”¨ä»»ä½• OSS-Fuzz é¡¹ç›®ä½œä¸ºåŸºå‡†&lt;/li&gt;
&lt;li&gt;å®ƒä¹Ÿæ˜¯ä¸€ä¸ªå¸¦æœ‰å›¾å½¢å’Œç»Ÿè®¡æµ‹è¯•çš„æŠ¥å‘Šåº“ï¼Œå¯ä»¥å¸®ä½ å¿«é€Ÿç†è§£æµ‹è¯•ç»“æœ&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æ­¤å¤–ï¼Œä½ è¿˜å¯ä»¥å°†ä½ çš„ fuzzer åŒå…¶ä»– fuzzer è¿›è¡Œæ¯”è¾ƒï¼Œä»¥æ–¹ä¾¿ä½ æå‡ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;1.5686274509804&quot;&gt;
&lt;p&gt;GitHub åœ°å€â†’&lt;a href=&quot;https://github.com/google/fuzzbench&quot; class=&quot;uri&quot;&gt;https://github.com/google/fuzzbench&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/759200/202003/759200-20200308223109038-653454748.jpg&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;caa-æ£€æµ‹lecaa&quot;&gt;1.6 CAA æ£€æµ‹ï¼šlecaa&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;æœ¬å‘¨ star å¢é•¿æ•°ï¼š50+&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;3 æœˆ 4 æ—¥ Let's Encrypt åœ¨å…¶è¯ä¹¦æˆæƒ (CAA) ä»£ç ä¸­å‘ç°äº†ä¸€ä¸ª bugï¼Œå¦‚æœå®¢æˆ·ä¸å¼ºåˆ¶æ›´æ–°è¯ä¹¦ï¼Œå°±å¿…é¡»æ’¤é”€æ•°ç™¾ä¸‡ä¸ªè¯ä¹¦ã€‚è€Œ lecaa å°±æ˜¯å½“æ—¥å¼€æºçš„å¯ç”¨äºæ£€æµ‹ Let's Encrypt CAA é—®é¢˜çš„è„šæœ¬ï¼Œå¦‚æœä½ æœ‰è¿™å—çš„éœ€æ±‚ä¸å¦¨è¯•è¯•ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;1.7021276595745&quot;&gt;
&lt;p&gt;GitHub åœ°å€â†’&lt;a href=&quot;https://github.com/hannob/lecaa&quot; class=&quot;uri&quot;&gt;https://github.com/hannob/lecaa&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;å°šèƒ½æ˜Ÿå¦-github-è€é¡¹ç›®&quot;&gt;2. å°šèƒ½æ˜Ÿå¦ GitHub è€é¡¹ç›®&lt;/h2&gt;
&lt;h3 id=&quot;css-å›¾æ ‡css.gg&quot;&gt;2.1 500+ CSS å›¾æ ‡ï¼šcss.gg&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;æœ¬å‘¨ star å¢é•¿æ•°ï¼š1800+&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;css.gg æ˜¯ä»£ç è®¾è®¡è€Œæˆçš„è½»å·§å›¾æ ‡ï¼Œå¯è‡ªå®šä¹‰ï¼Œé€šè¿‡ API å’Œ NPM å¯ç”¨äº Retinaï¼Œä½ å¯ä»¥é€šè¿‡ CSSã€JSONã€XML ç­‰å½¢å¼æ¥ä½¿ç”¨è¿™äº›å›¾æ ‡ã€‚ â€‹â€‹â€‹â€‹&lt;/p&gt;
&lt;blockquote readability=&quot;1.6666666666667&quot;&gt;
&lt;p&gt;GitHub åœ°å€â†’&lt;a href=&quot;https://github.com/astrit/css.gg&quot; class=&quot;uri&quot;&gt;https://github.com/astrit/css.gg&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/759200/202003/759200-20200308223118380-1889197476.png&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;å­¦-c-å—cplusplusthings&quot;&gt;2.2 å­¦ C++ å—ï¼Ÿï¼šCPlusPlusThings&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;æœ¬å‘¨ star å¢é•¿æ•°ï¼š250+&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;lCPlusPlusThingsï¼Œåˆå C++ é‚£äº›äº‹ï¼Œæ”¶å½•äº†å­¦ä¹  C++ å†…å®¹ï¼ŒåŒ…æ‹¬ç†è®ºã€æºç ã€å®è·µã€è¯¾ç¨‹ä»£ç ã€é¡¹ç›®ç­‰ã€‚é¡¹ç›®åˆ†ä¸ºã€åŸºç¡€å­¦ä¹ ã€‘ã€ã€è¿›é˜¶å­¦ä¹ ã€‘ã€ã€è®¾è®¡æ¨¡å¼ã€‘ã€ã€å¤šçº¿ç¨‹ä¸å¤šè¿›ç¨‹ã€‘ã€ã€ç¬¬ä¸‰æ–¹å­¦ä¹ èµ„æ–™ã€‘ã€ã€å·¥å…·ç¯‡ã€‘ç­‰ç¯‡ç« ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;1.3114754098361&quot;&gt;
&lt;p&gt;GitHub åœ°å€â†’&lt;a href=&quot;https://github.com/Light-City/CPlusPlusThings&quot; class=&quot;uri&quot;&gt;https://github.com/Light-City/CPlusPlusThings&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/759200/202003/759200-20200308223126970-62316523.jpg&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;python-ä»£ç æ®µpysheeet&quot;&gt;2.3 Python ä»£ç æ®µï¼špysheeet&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;æœ¬å‘¨ star å¢é•¿æ•°ï¼š100+&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;pysheeet æ˜¯ä¸€ä¸ªæ”¶å½• Python ä»£ç ç‰‡æ®µçš„é¡¹ç›®ï¼Œä½ å¯ä»¥å¿«é€Ÿæ‰¾åˆ°å¯¹åº”çš„ Python ä»£ç ï¼Œæ­¤å¤–é¡¹ç›®ä¹Ÿä»‹ç»äº† Python 3 ä¸­çš„ä¸€äº›é‡è¦ç‰¹æ€§ã€‚ â€‹â€‹â€‹â€‹&lt;/p&gt;
&lt;blockquote readability=&quot;1.4545454545455&quot;&gt;
&lt;p&gt;GitHub åœ°å€â†’&lt;a href=&quot;https://github.com/crazyguitar/pysheeet&quot; class=&quot;uri&quot;&gt;https://github.com/crazyguitar/pysheeet&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/759200/202003/759200-20200308223135919-1181394475.jpg&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;äº‘ç›¸å†Œlsky-pro&quot;&gt;2.4 äº‘ç›¸å†Œï¼šlsky-pro&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;æœ¬å‘¨ star å¢é•¿æ•°ï¼š50+&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;lsky-pro æ˜¯ç”¨ PHP å†™æˆçš„äº‘ç›¸å†Œï¼Œä¸»è¦ç‰¹æ€§&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æ”¯æŒç¬¬ä¸‰æ–¹äº‘å‚¨å­˜ï¼Œæ”¯æŒæœ¬åœ°ã€é˜¿é‡Œäº‘ OSSã€è…¾è®¯äº‘ COSã€ä¸ƒç‰›äº‘ã€åˆæ‹äº‘ã€FTPã€‚&lt;/li&gt;
&lt;li&gt;æ”¯æŒå¤šå›¾ä¸Šä¼ ã€æ‹–æ‹½ä¸Šä¼ ã€ç²˜è´´ä¸Šä¼ ã€ä¸Šä¼ é¢„è§ˆã€å…¨å±é¢„è§ˆã€é¡µé¢å“åº”å¼å¸ƒå±€ã€‚&lt;/li&gt;
&lt;li&gt;ç®€æ´çš„å›¾ç‰‡ç®¡ç†åŠŸèƒ½ï¼Œæ”¯æŒé¼ æ ‡å³é”®ã€å•é€‰å¤šé€‰ã€é‡å‘½åç­‰æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;å¼ºå¤§çš„å›¾ç‰‡é¢„è§ˆåŠŸèƒ½ï¼Œæ”¯æŒå“åº”å¼ã€‚&lt;/li&gt;
&lt;li&gt;æ”¯æŒå…¨å±€é…ç½®ç”¨æˆ·åˆå§‹å‰©ä½™å‚¨å­˜ç©ºé—´ã€æ”¯æŒå•ä¸ªè®¾ç½®ç”¨æˆ·å‰©ä½™å‚¨å­˜ç©ºé—´ã€‚&lt;/li&gt;
&lt;li&gt;æ”¯æŒä¸€é”®å¤åˆ¶å›¾ç‰‡å¤–é“¾ã€äºŒç»´ç æ‰«æé“¾æ¥ã€‚&lt;/li&gt;
&lt;li&gt;æ”¯æŒè®¾ç½®ä¸Šä¼ æ–‡ä»¶ã€æ–‡ä»¶å¤¹è·¯å¾„å‘½åè§„åˆ™ã€‚&lt;/li&gt;
&lt;li&gt;æ”¯æŒå›¾ç‰‡é‰´é»„åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;li&gt;æ”¯æŒæ–‡ä»¶å¤¹åˆ†ç±»åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹å¤–å¼€æ”¾çš„ä¸Šä¼ æ¥å£ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;blockquote readability=&quot;1.6&quot;&gt;
&lt;p&gt;GitHub åœ°å€â†’&lt;a href=&quot;https://github.com/wisp-x/lsky-pro&quot; class=&quot;uri&quot;&gt;https://github.com/wisp-x/lsky-pro&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/759200/202003/759200-20200308223146430-1662092410.png&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;css-å®è·µsimpsons-in-css&quot;&gt;2.5 CSS å®è·µï¼šSimpsons in CSS&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;æœ¬å‘¨ star å¢é•¿æ•°ï¼š300+&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è™½ç„¶æ˜¯ä¸€ä¸ª 5 å¹´å‰çš„è€é¡¹ç›®ï¼Œå½“ä¸å¦¨ç¢å®ƒä¸Šå‘¨åœ¨ GitHub Trending æ¦œå‘†äº†åŠå‘¨ï¼ŒSimpsons in CSS å®ç°äº†ç”¨ CSS åˆ¶ä½œè¾›æ™®æ£®ä¸€å®¶å¤´åƒï¼Œæ¯ä¸ªå¤´åƒæœ‰è‡ªå·±çš„åŠ¨ç”»è¡¨æƒ…ï¼Œå¦‚æœä½ æƒ³å­¦ä¹  CSS ä¸å¦¨ Pick ä¸‹è¿™ä¸ªé¡¹ç›®ï¼Œå¯æŸ¥çœ‹æ¯ä¸ªå¯¹åº”åŠ¨ç”»æ˜¯å¦‚ä½•ç”¨ CSS å®ç°çš„ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;1.4035087719298&quot;&gt;
&lt;p&gt;GitHub åœ°å€â†’&lt;a href=&quot;https://github.com/pattle/simpsons-in-css&quot; class=&quot;uri&quot;&gt;https://github.com/pattle/simpsons-in-css&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/759200/202003/759200-20200308223156677-802422542.jpg&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;go-ç‰ˆ-dubbodubbo-go&quot;&gt;2.6 Go ç‰ˆ Dubboï¼šdubbo-go&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;æœ¬å‘¨ star å¢é•¿æ•°ï¼š200+&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;dubbo-go ä½¿ç”¨ go å®ç°çš„ Dubboï¼Œå®ƒå®ç°äº†åŸºäº Dubbo çš„ extension æ¨¡å—å’Œåˆ†å±‚çš„ä»£ç è®¾è®¡(åŒ…æ‹¬ protocol layer, registry layer, cluster layer, config ç­‰ç­‰)ã€‚&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥å¯¹è¿™äº›åˆ†å±‚æ¥å£è¿›è¡Œæ–°çš„å®ç°ï¼Œå¹¶é€šè¿‡è°ƒç”¨ extension æ¨¡å—çš„â€œ extension.SetXXX â€æ–¹æ³•æ¥è¦†ç›– dubbo-go [åŒ go-for-apache-dubbo ]çš„é»˜è®¤å®ç°ï¼Œä»¥å®Œæˆè‡ªå·±çš„ç‰¹æ®Šéœ€æ±‚è€Œæ— éœ€ä¿®æ”¹æºä»£ç ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;1.6&quot;&gt;
&lt;p&gt;GitHub åœ°å€â†’&lt;a href=&quot;https://github.com/apache/dubbo-go&quot; class=&quot;uri&quot;&gt;https://github.com/apache/dubbo-go&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/759200/202003/759200-20200308223205060-999827538.jpg&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;æ•°æ®ç§‘å­¦data-science--cheat-sheet&quot;&gt;2.7 æ•°æ®ç§‘å­¦ï¼šData-Science--Cheat-Sheet&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;æœ¬å‘¨ star å¢é•¿æ•°ï¼š550+&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Data-Science--Cheat-Sheet æ˜¯ä¸€ä¸ªæ•°æ®ç§‘å­¦é¢†åŸŸçš„é€ŸæŸ¥è¡¨ï¼ŒåŒ…æ‹¬ã€äººå·¥æ™ºèƒ½ã€‘ã€ã€å¤§æ•°æ®ã€‘ã€ã€æ•°æ®æŒ–æ˜ã€‘ã€ã€æ•°æ®å¯è§†åŒ–ã€‘ã€ã€æ•°æ®ä»“åº“ã€‘ã€ã€æœºå™¨å­¦ä¹ ã€‘ç­‰ç­‰ç†è®ºåº”ç”¨æ–¹é¢å†…å®¹ï¼Œä¹ŸåŒ…æ‹¬äº† Python ã€R è¯­è¨€ã€Docker ç­‰ç¼–ç¨‹è¯­è¨€ä¸å·¥å…·ï¼Œå…±è®¡ 30+ ä¸ªåˆ†ç±»å†…å®¹ï¼Œæ˜¯ä¸€ä¸ªå…¨é¢çš„æ•°æ®ç§‘å­¦å­¦ä¹ ä»“ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;1.1594202898551&quot;&gt;
&lt;p&gt;GitHub åœ°å€â†’&lt;a href=&quot;https://github.com/abhat222/Data-Science--Cheat-Sheet&quot; class=&quot;uri&quot;&gt;https://github.com/abhat222/Data-Science--Cheat-Sheet&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/759200/202003/759200-20200308223213389-712250141.jpg&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;æœ¬å‘¨-github-trending-ç–«æƒ…ä¸‹çš„-github-ä¸»é¢˜çš„ä¸»åŠ›å†›&quot;&gt;3. æœ¬å‘¨ GitHub Trending #ç–«æƒ…ä¸‹çš„ GitHub #ä¸»é¢˜çš„ä¸»åŠ›å†›&lt;/h2&gt;
&lt;p&gt;HelloGitHub åœ¨æŸä¸€æœŸçš„ GitHub ä¸»é¢˜ç»™å¤§å®¶åˆ†äº«è¿‡ä¸­å›½ nCoV ç›¸å…³ GitHub é¡¹ç›®ï¼ˆè¯¦è§ï¼š&lt;a href=&quot;https://zhuanlan.zhihu.com/p/107627597&quot;&gt;ã€Šå…±æŠ—ç–«æƒ…çš„å¼€æºé¡¹ç›®ï¼Œè®©æˆ‘ä»¬è´¡çŒ®è‡ªå·±çš„ä¸€ä»½åŠ›é‡ã€‹&lt;/a&gt;ï¼Œéšç€å›½å¤– nCoV è¿›å…¥çˆ†å‘å¼å¢é•¿ï¼ŒGitHub ä¸Šå…³äº nCoV çš„é¡¹ç›®ä¹Ÿè·Ÿç€â€œæ°´æ¶¨èˆ¹é«˜â€ï¼Œåœ¨è¿™é‡Œå°é±¼å¹²ç»™ä½ åˆ†äº« 3 ä¸ªæœ¬å‘¨ GitHub Trending ä¸Šçš„é¡¹ç›®ï¼Œä¸å¦¨æ¥å­¦ä¹ ä¸‹æ•°æ®å¯è§†åŒ–å±•ç¤ºç­‰æ–¹é¢å†…å®¹~&lt;/p&gt;
&lt;h3 id=&quot;å£ç½©é¡¹ç›®facemaskdetection&quot;&gt;3.1 å£ç½©é¡¹ç›®ï¼šFaceMaskDetection&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;æœ¬å‘¨ star å¢é•¿æ•°ï¼š100+&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;FaceMaskDetection æ˜¯å¼€æºäººè„¸å£ç½©æ£€æµ‹æ¨¡å‹å’Œæ•°æ®ï¼Œæä¾›äº† PyTorchã€TensorFlowï¼ˆåŒ…æ‹¬ ftliteã€pb æ¨¡å‹ï¼‰ã€Kerasã€MXNetã€Caffe è¿™äº”å¤§ä¸»æµæ¡†æ¶çš„æ¨ç†ä»£ç ï¼Œå®ƒå¯ä»¥æ£€æµ‹äººè„¸æ˜¯å¦ä½©æˆ´å£ç½©ï¼Œå¹¶é™„æœ‰ 8,000 å¼ äººè„¸å£ç½©æ ‡æ³¨æ•°æ®ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;1.2903225806452&quot;&gt;
&lt;p&gt;GitHub åœ°å€â†’&lt;a href=&quot;https://github.com/AIZOOTech/FaceMaskDetection&quot; class=&quot;uri&quot;&gt;https://github.com/AIZOOTech/FaceMaskDetection&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/759200/202003/759200-20200308223222839-1852635810.jpg&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;ä¸œäº¬ç–«æƒ…æ•°æ®ä¸œäº¬éƒ½æ–°å‹ã‚³ãƒ­ãƒŠã‚¦ã‚¤ãƒ«ã‚¹æ„ŸæŸ“ç—‡å¯¾ç­–ã‚µã‚¤ãƒˆ&quot;&gt;3.2 ä¸œäº¬ç–«æƒ…æ•°æ®ï¼šä¸œäº¬éƒ½æ–°å‹ã‚³ãƒ­ãƒŠã‚¦ã‚¤ãƒ«ã‚¹æ„ŸæŸ“ç—‡å¯¾ç­–ã‚µã‚¤ãƒˆ&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;æœ¬å‘¨ star å¢é•¿æ•°ï¼š3200+&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸œäº¬éƒ½æ–°å‹ã‚³ãƒ­ãƒŠã‚¦ã‚¤ãƒ«ã‚¹æ„ŸæŸ“ç—‡å¯¾ç­–ã‚µã‚¤ãƒˆ æ˜¯æ˜¨æ—¥ GitHub Trending æ¦œçš„æ˜æ˜Ÿé¡¹ç›®ï¼Œå½“ç„¶è·å¾— 2.1k+ starï¼Œå®ƒæ”¶é›†äº†ä¸œäº¬çš„æ–°å† ç—…ä¾‹æ•°æ®ï¼Œå¹¶ä»¥å›¾è¡¨æ˜¾ç¤ºå±•ç¤ºå‡ºæ¥ï¼Œå¯æŸ¥çœ‹åˆ°å½“ç„¶æ–°å¢åŠç´¯è®¡ç—…ä¾‹æ•°ã€‚é™¤äº†ç—…ä¾‹æ•°æ®ä¹‹å¤–ï¼Œå®ƒä¹Ÿæä¾›äº†ä¸€äº›ç—…çŠ¶æ–¹ä¾¿è‡ªæŸ¥æ˜¯å¦æ‚£æœ‰æ–°å† ï¼Œç®€è¨€ä¹‹ï¼Œä½ å¯ä»¥ç†è§£ä¸º ä¸œäº¬éƒ½æ–°å‹ã‚³ãƒ­ãƒŠã‚¦ã‚¤ãƒ«ã‚¹æ„ŸæŸ“ç—‡å¯¾ç­–ã‚µã‚¤ãƒˆ æ˜¯ä¸€ä¸ª Web ç‰ˆçš„ä¸é¦™åŒ»ç”Ÿç–«æƒ…ç³»ç»Ÿã€‚åœ¨çº¿è®¿é—®ï¼š&lt;a href=&quot;https://stopcovid19.metro.tokyo.lg.jp/flow/&quot; class=&quot;uri&quot;&gt;https://stopcovid19.metro.tokyo.lg.jp/flow/&lt;/a&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;1.2307692307692&quot;&gt;
&lt;p&gt;GitHub åœ°å€â†’&lt;a href=&quot;https://github.com/tokyo-metropolitan-gov/covid19&quot; class=&quot;uri&quot;&gt;https://github.com/tokyo-metropolitan-gov/covid19&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/759200/202003/759200-20200308223231486-1082503451.jpg&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;å¯è§†åŒ–ç–«æƒ…æ•°æ®covid-19&quot;&gt;3.3 å¯è§†åŒ–ç–«æƒ…æ•°æ®ï¼šCOVID-19&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;æœ¬å‘¨ star å¢é•¿æ•°ï¼š2200+&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Johns Hopkins å¤§å­¦ç³»ç»Ÿç§‘å­¦ä¸å·¥ç¨‹ä¸­å¿ƒå‡ºå“çš„ COVID-19 ç–«æƒ…å…¨çƒå®æ—¶æ‰©æ•£å›¾ï¼Œæä¾›äº†å¯è§†åŒ–çš„æºä»£ç ï¼Œ&lt;a href=&quot;https://www.arcgis.com/apps/opsdashboard/index.html#/bda7594740fd40299423467b48e9ecf6&quot;&gt;ç‚¹å‡»çº¿è®¿é—®&lt;/a&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;1.3793103448276&quot;&gt;
&lt;p&gt;GitHub åœ°å€â†’&lt;a href=&quot;https://github.com/CSSEGISandData/COVID-19&quot; class=&quot;uri&quot;&gt;https://github.com/CSSEGISandData/COVID-19&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/759200/202003/759200-20200308223247622-791635297.png&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;æ¨èé˜…è¯»&quot;&gt;æ¨èé˜…è¯»&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸Šä¸º 2020 å¹´ç¬¬ 10 ä¸ªå·¥ä½œå‘¨çš„ GitHub Trending ğŸ‰å¦‚æœä½  Pick å…¶ä»–å¥½ç©ã€å®ç”¨çš„ GitHub é¡¹ç›®ï¼Œè®°å¾—æ¥ HelloGitHub issue åŒºå’Œæˆ‘ä»¬åˆ†äº«ä¸‹å“Ÿ ğŸŒ&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;HelloGitHub äº¤æµç¾¤ç°å·²å…¨é¢å¼€æ”¾ï¼Œæ·»åŠ å¾®ä¿¡å·ï¼šHelloGitHub ä¸ºå¥½å‹å¯åŒå‰ç«¯ã€Javaã€Goâ€¦å„ç•Œå¤§ä½¬è°ˆç¬‘é£ç”Ÿã€åˆ‡ç£‹æŠ€æœ¯~&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/759200/202002/759200-20200217165012919-1203910757.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å…³æ³¨å…¬ä¼—å·åŠ å…¥äº¤æµç¾¤&lt;/strong&gt;&lt;/p&gt;
</description>
<pubDate>Mon, 09 Mar 2020 00:21:00 +0000</pubDate>
<dc:creator>å‰Šå¾®å¯’</dc:creator>
<og:description>ä½œè€…ï¼šHelloGitHub å°é±¼å¹² æ‘˜è¦ï¼šå¦‚æœè¯´ä¸Šå‘¨çš„ GitHub æ˜¯è‚¡å¸‚é™„ä½“ star ä½è¿·ä¸æŒ¯ï¼Œé‚£ä¹ˆæœ¬å‘¨çš„ GitHub åƒæäº†å—åˆ°ç–«æƒ…å½±å“è€Œæœªå¼€å­¦çš„é«˜æ ¡ä»¬ï¼Œæ–°ç”Ÿ GitHub é¡¹å°‘ï¼Œèƒ½ä¸Š G</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/xueweihan/p/12445600.html</dc:identifier>
</item>
<item>
<title>200è¡Œä»£ç ï¼Œ7ä¸ªå¯¹è±¡â€”â€”è®©ä½ äº†è§£ASP.NET Coreæ¡†æ¶çš„æœ¬è´¨[3.xç‰ˆ] - Artech</title>
<link>http://www.cnblogs.com/artech/p/mini-asp-net-core-3x.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/artech/p/mini-asp-net-core-3x.html</guid>
<description>&lt;p&gt;2019å¹´1æœˆ19æ—¥ï¼Œå¾®è½¯æŠ€æœ¯ï¼ˆè‹å·ï¼‰ä¿±ä¹éƒ¨æˆç«‹ï¼Œæˆ‘å—é‚€åœ¨æˆç«‹å¤§ä¼šä¸Šä½œäº†ä¸€ä¸ªåä¸ºã€Š&lt;a href=&quot;https://www.cnblogs.com/artech/p/inside-asp-net-core-framework.html&quot;&gt;ASP.NET Coreæ¡†æ¶æ­ç§˜&lt;/a&gt;ã€‹çš„åˆ†äº«ã€‚åœ¨æ­¤æ¬¡åˆ†äº«ä¸­ï¼Œæˆ‘æŒ‰ç…§ASP.NET Coreè‡ªèº«çš„è¿è¡ŒåŸç†å’Œè®¾è®¡æ€æƒ³åˆ›å»ºäº†ä¸€ä¸ª â€œè¿·ä½ ç‰ˆâ€ çš„ASP.NET Coreæ¡†æ¶ï¼Œå¹¶ä¸”åˆ©ç”¨è¿™ä¸ª â€œæç®€â€ çš„æ¨¡æ‹Ÿæ¡†æ¶é˜è¿°äº†ASP.NET Coreæ¡†æ¶æœ€æ ¸å¿ƒã€æœ€æœ¬è´¨çš„ä¸œè¥¿ã€‚æ•´ä¸ªæ¡†æ¶æ¶‰åŠåˆ°çš„æ ¸å¿ƒä»£ç ä¸ä¼šè¶…è¿‡200è¡Œï¼Œæ¶‰åŠåˆ°7ä¸ªæ ¸å¿ƒçš„å¯¹è±¡ã€‚ç”±äºASP.NET Core 3.Xé‡‡ç”¨äº†ä¸åŒçš„åº”ç”¨æ‰¿è½½æ–¹å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†è¿™ä¸ªæ¨¡æ‹Ÿæ¡†æ¶å‡çº§åˆ°3.xç‰ˆæœ¬ã€‚[æœ¬ç¯‡å†…å®¹èŠ‚é€‰è‡ªå³å°†å‡ºç‰ˆçš„ã€ŠASP.NET Core 3æ¡†æ¶è§£å¯†ã€‹ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥é€šè¿‡&lt;a href=&quot;https://www.cnblogs.com/artech/p/inside-aspnet-core-3.html&quot;&gt;ã€Šâ€œASP.NET Core 3æ¡†æ¶æ­ç§˜â€è¯»è€…ç¾¤ï¼Œæ¬¢è¿åŠ å…¥ã€‹&lt;/a&gt;åŠ å…¥æœ¬ä¹¦è¯»è€…ç¾¤ï¼Œä»¥ä¾¿åŠæ—¶äº†è§£æœ¬ä¹¦çš„åŠ¨æ€ã€‚æºä»£ç ä»&lt;a href=&quot;https://files.cnblogs.com/files/artech/mini-asp-net-core-framework.7z&quot;&gt;è¿™é‡Œ&lt;/a&gt;ä¸‹è½½ã€‚]&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;ç›®å½•&lt;br/&gt;ä¸€ã€ä¸­é—´ä»¶å§”æ‰˜é“¾&lt;br/&gt;Â Â Â Â  HttpContext&lt;br/&gt;Â Â Â Â  ä¸­é—´ä»¶&lt;br/&gt;Â Â Â Â  ä¸­é—´ä»¶ç®¡é“çš„æ„å»º&lt;br/&gt;äºŒã€æœåŠ¡å™¨&lt;br/&gt;Â Â Â Â  IServer&lt;br/&gt;Â Â Â Â  é’ˆå¯¹æœåŠ¡å™¨çš„é€‚é…&lt;br/&gt;Â Â Â Â  HttpListenerServer&lt;br/&gt;ä¸‰ã€æ‰¿è½½æœåŠ¡&lt;br/&gt;Â Â Â Â  WebHostedService&lt;br/&gt;Â Â Â Â  WebHostBuilder&lt;br/&gt;Â Â Â Â  åº”ç”¨æ„å»º&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;é€šè¿‡æœ¬ç¯‡æ–‡ç« ï¼Œæˆ‘å°†ç®¡é“æœ€æ ¸å¿ƒçš„éƒ¨åˆ†æå–å‡ºæ¥æ„å»ºä¸€ä¸ªâ€œè¿·ä½ ç‰ˆâ€çš„ASP.NET Coreæ¡†æ¶ã€‚è¾ƒä¹‹çœŸæ­£çš„ASP.NET Coreæ¡†æ¶ï¼Œè™½ç„¶é‡å»ºçš„æ¨¡æ‹Ÿæ¡†æ¶è¦ç®€å•å¾ˆå¤šï¼Œä½†æ˜¯å®ƒä»¬é‡‡ç”¨å®Œå…¨ä¸€è‡´çš„è®¾è®¡ã€‚ä¸ºäº†èƒ½å¤Ÿåœ¨çœŸå®æ¡†æ¶ä¸­æ‰¾åˆ°å¯¹åº”ç‰©ï¼Œåœ¨å®šä¹‰æ¥å£æˆ–è€…ç±»å‹æ—¶ä¼šé‡‡ç”¨çœŸå®çš„åç§°ï¼Œä½†æ˜¯åœ¨APIçš„å®šä¹‰ä¸Šä¼šåšæœ€å¤§é™åº¦çš„ç®€åŒ–ã€‚&lt;/p&gt;
&lt;h2&gt;&lt;span&gt;HttpContext&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;ä¸€ä¸ªHttpContextå¯¹è±¡è¡¨ç¤ºé’ˆå¯¹å½“å‰è¯·æ±‚çš„ä¸Šä¸‹æ–‡ã€‚è¦ç†è§£HttpContextä¸Šä¸‹æ–‡çš„æœ¬è´¨ï¼Œéœ€è¦ä»è¯·æ±‚å¤„ç†ç®¡é“çš„å±‚é¢æ¥è®²ã€‚å¯¹äºç”±ä¸€ä¸ªæœåŠ¡å™¨å’Œå¤šä¸ªä¸­é—´ä»¶æ„æˆçš„ç®¡é“æ¥è¯´ï¼Œé¢å‘ä¼ è¾“å±‚çš„æœåŠ¡å™¨è´Ÿè´£è¯·æ±‚çš„ç›‘å¬ã€æ¥æ”¶å’Œæœ€ç»ˆçš„å“åº”ï¼Œå½“å®ƒæ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚åï¼Œéœ€è¦å°†è¯·æ±‚åˆ†å‘ç»™åç»­ä¸­é—´ä»¶è¿›è¡Œå¤„ç†ã€‚å¯¹äºæŸä¸ªä¸­é—´ä»¶æ¥è¯´ï¼Œå®Œæˆè‡ªèº«çš„è¯·æ±‚å¤„ç†ä»»åŠ¡ä¹‹åï¼Œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹éœ€è¦å°†è¯·æ±‚åˆ†å‘ç»™åç»­çš„ä¸­é—´ä»¶ã€‚è¯·æ±‚åœ¨æœåŠ¡å™¨ä¸ä¸­é—´ä»¶ä¹‹é—´ï¼Œä»¥åŠåœ¨ä¸­é—´ä»¶ä¹‹é—´çš„åˆ†å‘æ˜¯é€šè¿‡å…±äº«ä¸Šä¸‹æ–‡çš„æ–¹å¼å®ç°çš„ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå½“æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚ä¹‹åï¼Œä¼šåˆ›å»ºä¸€ä¸ªé€šè¿‡HttpContextè¡¨ç¤ºçš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œæ‰€æœ‰ä¸­é—´ä»¶éƒ½åœ¨è¿™ä¸ªä¸Šä¸‹æ–‡ä¸­å®Œæˆé’ˆå¯¹è¯·æ±‚çš„å¤„ç†å·¥ä½œã€‚é‚£ä¹ˆä¸€ä¸ªHttpContextå¯¹è±¡ç©¶ç«Ÿä¼šæºå¸¦ä»€ä¹ˆæ ·çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Ÿä¸€ä¸ªHTTPäº‹åŠ¡ï¼ˆTransactionï¼‰å…·æœ‰éå¸¸æ¸…æ™°çš„ç•Œå®šï¼Œå¦‚æœä»æœåŠ¡å™¨çš„è§’åº¦æ¥è¯´å°±æ˜¯å§‹äºè¯·æ±‚çš„æ¥æ”¶ï¼Œè€Œç»ˆäºå“åº”çš„å›å¤ï¼Œæ‰€ä»¥è¯·æ±‚å’Œå“åº”æ˜¯ä¸¤ä¸ªåŸºæœ¬çš„è¦ç´ ï¼Œä¹Ÿæ˜¯HttpContextæ‰¿è½½çš„æœ€æ ¸å¿ƒçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://img2018.cnblogs.com/blog/19327/202003/19327-20200308202658936-850957054.png&quot;&gt;&lt;img width=&quot;488&quot; height=&quot;118&quot; title=&quot;12-1&quot; alt=&quot;12-1&quot; src=&quot;https://img2018.cnblogs.com/blog/19327/202003/19327-20200308202659307-628275088.png&quot; border=&quot;0&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥å°†è¯·æ±‚å’Œå“åº”ç†è§£ä¸ºä¸€ä¸ªWebåº”ç”¨çš„è¾“å…¥ä¸è¾“å‡ºï¼Œæ—¢ç„¶HttpContextä¸Šä¸‹æ–‡æ˜¯é’ˆå¯¹è¯·æ±‚å’Œå“åº”çš„å°è£…ï¼Œé‚£ä¹ˆåº”ç”¨ç¨‹åºå°±å¯ä»¥åˆ©ç”¨è¿™ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡å¾—åˆ°å½“å‰è¯·æ±‚æ‰€æœ‰çš„è¾“å…¥ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨å®ƒå®Œæˆæˆ‘ä»¬æ‰€éœ€çš„æ‰€æœ‰è¾“å‡ºå·¥ä½œã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¸ºASP.NET Coreæ¨¡æ‹Ÿæ¡†æ¶å®šä¹‰äº†å¦‚ä¸‹è¿™ä¸ªæç®€ç‰ˆæœ¬çš„HttpContextç±»å‹ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; HttpListenerFeature : IHttpRequestFeature, IHttpResponseFeature
{
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;readonly&lt;/span&gt;&lt;span&gt; HttpListenerContext _context;
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; HttpListenerFeature(HttpListenerContext context)=&amp;gt; _context =&lt;span&gt; context;

    Uri IHttpRequestFeature.Url&lt;/span&gt;=&amp;gt;&lt;span&gt; _context.Request.Url;
    NameValueCollection IHttpRequestFeature.Headers&lt;/span&gt;=&amp;gt;&lt;span&gt; _context.Request.Headers;
    NameValueCollection IHttpResponseFeature.Headers&lt;/span&gt;=&amp;gt;&lt;span&gt; _context.Response.Headers;
    Stream IHttpRequestFeature.Body&lt;/span&gt;=&amp;gt;&lt;span&gt; _context.Request.InputStream;
    Stream IHttpResponseFeature.Body&lt;/span&gt;=&amp;gt;&lt;span&gt; _context.Response.OutputStream;
    &lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt; IHttpResponseFeature.StatusCode
    {
        &lt;/span&gt;&lt;span&gt;get&lt;/span&gt; =&amp;gt;&lt;span&gt; _context.Response.StatusCode;
        &lt;/span&gt;&lt;span&gt;set&lt;/span&gt; =&amp;gt; _context.Response.StatusCode =&lt;span&gt; value;
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¦‚ä¸Šé¢çš„ä»£ç ç‰‡æ®µæ‰€ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨HttpRequestå¯¹è±¡å¾—åˆ°å½“å‰è¯·æ±‚çš„åœ°å€ã€è¯·æ±‚æ¶ˆæ¯çš„æŠ¥å¤´é›†åˆå’Œä¸»ä½“å†…å®¹ã€‚åˆ©ç”¨HttpResponseå¯¹è±¡ï¼Œæˆ‘ä»¬ä¸ä»…å¯ä»¥è®¾ç½®å“åº”çš„çŠ¶æ€ç ï¼Œè¿˜å¯ä»¥æ·»åŠ ä»»æ„çš„å“åº”æŠ¥å¤´å’Œå†™å…¥ä»»æ„çš„ä¸»ä½“å†…å®¹ã€‚&lt;/p&gt;
&lt;h2&gt;&lt;span&gt;ä¸­é—´ä»¶&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;HttpContextå¯¹è±¡æ‰¿è½½äº†æ‰€æœ‰ä¸å½“å‰è¯·æ±‚ç›¸å…³çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œåº”ç”¨ç¨‹åºé’ˆå¯¹è¯·æ±‚çš„å“åº”ä¹Ÿåˆ©ç”¨å®ƒæ¥å®Œæˆï¼Œæ‰€ä»¥å¯ä»¥åˆ©ç”¨ä¸€ä¸ª&lt;span&gt;Action&amp;lt;HttpContext&amp;gt;&lt;/span&gt;ç±»å‹çš„å§”æ‰˜å¯¹è±¡æ¥è¡¨ç¤ºé’ˆå¯¹è¯·æ±‚çš„å¤„ç†ï¼Œæˆ‘ä»¬å§‘ä¸”å°†å®ƒç§°ä¸ºè¯·æ±‚å¤„ç†å™¨ï¼ˆHandlerï¼‰ã€‚ä½†Action&amp;lt;HttpContext&amp;gt;ä»…ä»…æ˜¯è¯·æ±‚å¤„ç†å™¨é’ˆå¯¹â€œåŒæ­¥â€ç¼–ç¨‹æ¨¡å¼çš„è¡¨ç°å½¢å¼ï¼Œå¯¹äºé¢å‘Taskçš„å¼‚æ­¥ç¼–ç¨‹æ¨¡å¼ï¼Œè¿™ä¸ªå¤„ç†å™¨åº”è¯¥è¡¨ç¤ºæˆç±»å‹ä¸º&lt;span&gt;Func&amp;lt;HttpContext,Task&amp;gt;&lt;/span&gt;çš„å§”æ‰˜å¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºè¿™ä¸ªè¡¨ç¤ºè¯·æ±‚å¤„ç†å™¨çš„å§”æ‰˜å¯¹è±¡å…·æœ‰éå¸¸å¹¿æ³›çš„åº”ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ºå®ƒä¸“é—¨å®šä¹‰äº†å¦‚ä¸‹è¿™ä¸ªRequestDelegateå§”æ‰˜ç±»å‹ï¼Œå¯ä»¥çœ‹å‡ºå®ƒå°±æ˜¯å¯¹Func&amp;lt;HttpContext,Task&amp;gt;å§”æ‰˜çš„è¡¨è¾¾ã€‚ä¸€ä¸ªRequestDelegateå¯¹è±¡è¡¨ç¤ºçš„æ˜¯è¯·æ±‚å¤„ç†å™¨ï¼Œé‚£ä¹ˆä¸­é—´ä»¶åœ¨æ¨¡å‹ä¸­åº”å¦‚ä½•è¡¨è¾¾ï¼Ÿ&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;delegate&lt;/span&gt; Task RequestDelegate(HttpContext context);
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä½œä¸ºè¯·æ±‚å¤„ç†ç®¡é“æ ¸å¿ƒç»„æˆéƒ¨åˆ†çš„ä¸­é—´ä»¶å¯ä»¥è¡¨ç¤ºæˆç±»å‹ä¸ºFunc&amp;lt;RequestDelegate, RequestDelegate&amp;gt;çš„å§”æ‰˜å¯¹è±¡ã€‚æ¢å¥è¯è¯´ï¼Œä¸­é—´ä»¶çš„è¾“å…¥ä¸è¾“å‡ºéƒ½æ˜¯ä¸€ä¸ªRequestDelegateå¯¹è±¡ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥ç†è§£ï¼šå¯¹äºç®¡é“ä¸­çš„æŸä¸ªä¸­é—´ä»¶ï¼ˆä¸‹å›¾æ‰€ç¤ºçš„ç¬¬ä¸€ä¸ªä¸­é—´ä»¶ï¼‰æ¥è¯´ï¼Œåç»­ä¸­é—´ä»¶ç»„æˆçš„ç®¡é“ä½“ç°ä¸ºä¸€ä¸ªRequestDelegateå¯¹è±¡ï¼Œç”±äºå½“å‰ä¸­é—´ä»¶åœ¨å®Œæˆäº†è‡ªèº«çš„è¯·æ±‚å¤„ç†ä»»åŠ¡ä¹‹åï¼Œå¾€å¾€éœ€è¦å°†è¯·æ±‚åˆ†å‘ç»™åç»­ä¸­é—´ä»¶è¿›è¡Œå¤„ç†ï¼Œæ‰€ä»¥å®ƒéœ€è¦å°†åç»­ä¸­é—´ä»¶æ„æˆçš„RequestDelegateå¯¹è±¡ä½œä¸ºè¾“å…¥ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://img2018.cnblogs.com/blog/19327/202003/19327-20200308202659524-1992410873.png&quot;&gt;&lt;img width=&quot;494&quot; height=&quot;136&quot; title=&quot;12-2&quot; alt=&quot;12-2&quot; src=&quot;https://img2018.cnblogs.com/blog/19327/202003/19327-20200308202659773-1718471185.png&quot; border=&quot;0&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å½“ä»£è¡¨å½“å‰ä¸­é—´ä»¶çš„å§”æ‰˜å¯¹è±¡æ‰§è¡Œä¹‹åï¼Œå¦‚æœå°†å®ƒè‡ªå·±â€œçº³å…¥â€è¿™ä¸ªç®¡é“ï¼Œé‚£ä¹ˆä»£è¡¨æ–°ç®¡é“çš„RequestDelegateå¯¹è±¡å°±æˆä¸ºè¯¥å§”æ‰˜å¯¹è±¡æ‰§è¡Œåçš„è¾“å‡ºç»“æœï¼Œæ‰€ä»¥ä¸­é—´ä»¶è‡ªç„¶å°±è¡¨ç¤ºæˆè¾“å…¥å’Œè¾“å‡ºç±»å‹å‡ä¸ºRequestDelegateçš„Func&amp;lt;RequestDelegate, RequestDelegate&amp;gt;å¯¹è±¡ã€‚&lt;/p&gt;
&lt;h2&gt;&lt;span&gt;ä¸­é—´ä»¶ç®¡é“çš„æ„å»º&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;ä»äº‹è½¯ä»¶è¡Œä¸š10å¤šå¹´æ¥ï¼Œç¬”è€…å¯¹æ¶æ„è®¾è®¡è¶Šæ¥è¶Šå…·æœ‰è¿™æ ·çš„è®¤è¯†ï¼šå¥½çš„è®¾è®¡ä¸€å®šæ˜¯â€œç®€å•â€çš„è®¾è®¡ã€‚æ‰€ä»¥åœ¨è®¾è®¡æŸä¸ªå¼€å‘æ¡†æ¶æ—¶ç¬”è€…çš„ç›®æ ‡æ˜¯å†ç®€å•ç‚¹ã€‚ä¸Šé¢ä»‹ç»çš„è¯·æ±‚å¤„ç†ç®¡é“çš„è®¾è®¡å°±å…·æœ‰â€œç®€å•â€çš„ç‰¹è´¨ï¼š&lt;span&gt;Pipeline = Server + Middlewares&lt;/span&gt;ã€‚ä½†æ˜¯â€œå†ç®€å•ç‚¹â€å…¶å®æ˜¯å¯ä»¥çš„ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¤šä¸ªä¸­é—´ä»¶ç»„æˆä¸€ä¸ªå•ä¸€çš„è¯·æ±‚å¤„ç†å™¨ã€‚è¯·æ±‚å¤„ç†å™¨å¯ä»¥é€šè¿‡RequestDelegateå¯¹è±¡æ¥è¡¨ç¤ºï¼Œæ‰€ä»¥æ•´ä¸ªè¯·æ±‚å¤„ç†ç®¡é“å°†å…·æœ‰æ›´åŠ ç®€å•çš„è¡¨è¾¾ï¼š&lt;span&gt;Pipeline = Server + RequestDelegate&lt;/span&gt;ï¼ˆè§ä¸‹å›¾12ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://img2018.cnblogs.com/blog/19327/202003/19327-20200308202659989-1446581360.png&quot;&gt;&lt;img width=&quot;399&quot; height=&quot;158&quot; title=&quot;12-3&quot; alt=&quot;12-3&quot; src=&quot;https://img2018.cnblogs.com/blog/19327/202003/19327-20200308202700229-1384903565.png&quot; border=&quot;0&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è¡¨ç¤ºä¸­é—´ä»¶çš„Func&amp;lt;RequestDelegate, RequestDelegate&amp;gt;å¯¹è±¡å‘è¡¨ç¤ºè¯·æ±‚å¤„ç†å™¨çš„RequestDelegateå¯¹è±¡ä¹‹é—´çš„è½¬æ¢æ˜¯é€šè¿‡&lt;span&gt;IApplicationBuilder&lt;/span&gt;å¯¹è±¡æ¥å®Œæˆçš„ã€‚ä»æ¥å£å‘½åå¯ä»¥çœ‹å‡ºï¼ŒIApplicationBuilderå¯¹è±¡æ˜¯ç”¨æ¥æ„å»ºâ€œåº”ç”¨ç¨‹åºâ€ï¼ˆApplicationï¼‰çš„ï¼Œå®é™…ä¸Šï¼Œç”±æ‰€æœ‰æ³¨å†Œä¸­é—´ä»¶æ„å»ºçš„RequestDelegateå¯¹è±¡å°±æ˜¯å¯¹åº”ç”¨ç¨‹åºçš„è¡¨è¾¾ï¼Œå› ä¸ºåº”ç”¨ç¨‹åºçš„æ„å›¾å®Œå…¨æ˜¯ç”±æ³¨å†Œçš„ä¸­é—´ä»¶è¾¾æˆçš„ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;interface&lt;/span&gt;&lt;span&gt; IApplicationBuilder
{
    RequestDelegate Build();
    IApplicationBuilder Use(Func&lt;/span&gt;&amp;lt;RequestDelegate, RequestDelegate&amp;gt;&lt;span&gt; middleware);
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¦‚ä¸Šæ‰€ç¤ºçš„ä»£ç ç‰‡æ®µæ˜¯æ¨¡æ‹Ÿæ¡†æ¶å¯¹IApplicationBuilderæ¥å£çš„ç®€åŒ–å®šä¹‰ã€‚å®ƒçš„Useæ–¹æ³•ç”¨æ¥æ³¨å†Œä¸­é—´ä»¶ï¼Œè€ŒBuildæ–¹æ³•åˆ™å°†æ‰€æœ‰çš„ä¸­é—´ä»¶æŒ‰ç…§æ³¨å†Œçš„é¡ºåºç»„è£…æˆä¸€ä¸ªRequestDelegateå¯¹è±¡ã€‚å¦‚ä¸‹æ‰€ç¤ºçš„ä»£ç ç‰‡æ®µä¸­ApplicationBuilderç±»å‹æ˜¯å¯¹è¯¥æ¥å£çš„é»˜è®¤å®ç°ã€‚æˆ‘ä»¬ç»™å‡ºçš„ä»£ç ç‰‡æ®µè¿˜ä½“ç°äº†è¿™æ ·ä¸€ä¸ªç»†èŠ‚ï¼šå½“æˆ‘ä»¬å°†æ³¨å†Œçš„ä¸­é—´ä»¶è½¬æ¢æˆä¸€ä¸ªè¡¨ç¤ºè¯·æ±‚å¤„ç†å™¨çš„RequestDelegateå¯¹è±¡æ—¶ï¼Œä¼šåœ¨ç®¡é“çš„å°¾ç«¯æ·»åŠ ä¸€ä¸ªå¤„ç†å™¨ç”¨æ¥å“åº”ä¸€ä¸ªçŠ¶æ€ç ä¸º404çš„å“åº”ã€‚è¿™ä¸ªç»†èŠ‚æ„å‘³ç€å¦‚æœæ²¡æœ‰æ³¨å†Œä»»ä½•çš„ä¸­é—´ä»¶æˆ–è€…æ‰€æœ‰æ³¨å†Œçš„ä¸­é—´ä»¶éƒ½å°†è¯·æ±‚åˆ†å‘ç»™åç»­ç®¡é“ï¼Œé‚£ä¹ˆåº”ç”¨ç¨‹åºä¼šå›å¤ä¸€ä¸ªçŠ¶æ€ç ä¸º404çš„å“åº”ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; ApplicationBuilder : IApplicationBuilder
{
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;readonly&lt;/span&gt; IList&amp;lt;Func&amp;lt;RequestDelegate, RequestDelegate&amp;gt;&amp;gt; _middlewares = &lt;span&gt;new&lt;/span&gt; List&amp;lt;Func&amp;lt;RequestDelegate, RequestDelegate&amp;gt;&amp;gt;&lt;span&gt;();

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; RequestDelegate Build()
    {
        RequestDelegate next &lt;/span&gt;= context =&amp;gt;&lt;span&gt;
        {
            context.Response.StatusCode &lt;/span&gt;= &lt;span&gt;404&lt;/span&gt;&lt;span&gt;;
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; Task.CompletedTask;
        };                    
        &lt;/span&gt;&lt;span&gt;foreach&lt;/span&gt; (&lt;span&gt;var&lt;/span&gt; middleware &lt;span&gt;in&lt;/span&gt;&lt;span&gt; _middlewares.Reverse())
        {
            next &lt;/span&gt;=&lt;span&gt; middleware.Invoke(next);
        }
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; next;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; IApplicationBuilder Use(Func&amp;lt;RequestDelegate, RequestDelegate&amp;gt;&lt;span&gt; middleware)
    {
        _middlewares.Add(middleware);
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;this&lt;/span&gt;&lt;span&gt;;
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;æœåŠ¡å™¨åœ¨ç®¡é“ä¸­çš„èŒè´£éå¸¸æ˜ç¡®ï¼šè´Ÿè´£HTTPè¯·æ±‚çš„ç›‘å¬ã€æ¥æ”¶å’Œæœ€ç»ˆçš„å“åº”ã€‚å…·ä½“æ¥è¯´ï¼Œå¯åŠ¨åçš„æœåŠ¡å™¨ä¼šç»‘å®šåˆ°æŒ‡å®šçš„ç«¯å£è¿›è¡Œè¯·æ±‚ç›‘å¬ã€‚ä¸€æ—¦æœ‰è¯·æ±‚æŠµè¾¾ï¼ŒæœåŠ¡å™¨ä¼šæ ¹æ®è¯¥è¯·æ±‚åˆ›å»ºä»£è¡¨è¯·æ±‚ä¸Šä¸‹æ–‡çš„HttpContextå¯¹è±¡ï¼Œå¹¶å°†è¯¥ä¸Šä¸‹æ–‡åˆ†å‘ç»™æ³¨å†Œçš„ä¸­é—´ä»¶è¿›è¡Œå¤„ç†ã€‚å½“ä¸­é—´ä»¶ç®¡é“å®Œæˆäº†é’ˆå¯¹è¯·æ±‚çš„å¤„ç†ä¹‹åï¼ŒæœåŠ¡å™¨ä¼šå°†æœ€ç»ˆç”Ÿæˆçš„å“åº”å›å¤ç»™å®¢æˆ·ç«¯ã€‚&lt;/p&gt;
&lt;h2&gt;&lt;span&gt;IServer&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;åœ¨æ¨¡æ‹Ÿçš„ASP.NET Coreæ¡†æ¶ä¸­ï¼Œæˆ‘ä»¬å°†æœåŠ¡å™¨å®šä¹‰æˆä¸€ä¸ªæåº¦ç®€åŒ–çš„IServeræ¥å£ã€‚åœ¨å¦‚ä¸‹æ‰€ç¤ºçš„ä»£ç ç‰‡æ®µä¸­ï¼ŒIServeræ¥å£å…·æœ‰å”¯ä¸€çš„StartAsyncæ–¹æ³•æ¥å¯åŠ¨è‡ªèº«ä»£è¡¨çš„æœåŠ¡å™¨ã€‚æœåŠ¡å™¨æœ€ç»ˆéœ€è¦å°†æ¥æ”¶çš„è¯·æ±‚åˆ†å‘ç»™æ³¨å†Œçš„ä¸­é—´ä»¶ï¼Œè€Œæ³¨å†Œçš„ä¸­é—´ä»¶æœ€ç»ˆä¼šè¢«IApplicationBuilderå¯¹è±¡æ„å»ºæˆä¸€ä¸ªä»£è¡¨è¯·æ±‚å¤„ç†å™¨çš„RequestDelegateå¯¹è±¡ï¼ŒStartAsyncæ–¹æ³•çš„å‚æ•°handlerä»£è¡¨çš„å°±æ˜¯è¿™æ ·ä¸€ä¸ªå¯¹è±¡ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;interface&lt;/span&gt;&lt;span&gt; IServer
{
    Task StartAsync(RequestDelegate handler);
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;span&gt;é’ˆå¯¹æœåŠ¡å™¨çš„é€‚é…&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;é¢å‘åº”ç”¨å±‚çš„HttpContextå¯¹è±¡æ˜¯å¯¹è¯·æ±‚å’Œå“åº”çš„æŠ½è±¡ä¸å°è£…ï¼Œä½†æ˜¯è¯·æ±‚æœ€åˆæ˜¯ç”±é¢å‘ä¼ è¾“å±‚çš„æœåŠ¡å™¨æ¥æ”¶çš„ï¼Œæœ€ç»ˆçš„å“åº”ä¹Ÿä¼šç”±æœåŠ¡å™¨å›å¤ç»™å®¢æˆ·ç«¯ã€‚æ‰€æœ‰ASP.NET Coreåº”ç”¨ä½¿ç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ªHttpContextç±»å‹ï¼Œä½†æ˜¯å®ƒä»¬å¯ä»¥æ³¨å†Œä¸åŒç±»å‹çš„æœåŠ¡å™¨ï¼Œåº”å¦‚ä½•è§£å†³ä¸¤è€…ä¹‹é—´çš„é€‚é…é—®é¢˜ï¼Ÿè®¡ç®—æœºé¢†åŸŸæœ‰è¿™æ ·ä¸€å¥è¯ï¼šâ€œä»»ä½•é—®é¢˜éƒ½å¯ä»¥é€šè¿‡æ·»åŠ ä¸€ä¸ªæŠ½è±¡å±‚çš„æ–¹å¼æ¥è§£å†³ï¼Œå¦‚æœè§£å†³ä¸äº†ï¼Œé‚£å°±å†åŠ ä¸€å±‚ã€‚â€åŒä¸€ä¸ªHttpContextç±»å‹ä¸ä¸åŒæœåŠ¡å™¨ç±»å‹ä¹‹é—´çš„é€‚é…é—®é¢˜è‡ªç„¶ä¹Ÿå¯ä»¥é€šè¿‡æ·»åŠ ä¸€ä¸ªæŠ½è±¡å±‚æ¥è§£å†³ã€‚æˆ‘ä»¬å°†å®šä¹‰åœ¨è¯¥æŠ½è±¡å±‚çš„å¯¹è±¡ç§°ä¸º&lt;span&gt;ç‰¹æ€§ï¼ˆFeature&lt;/span&gt;ï¼‰ï¼Œç‰¹æ€§å¯ä»¥è§†ä¸ºå¯¹HttpContextæŸä¸ªæ–¹é¢çš„æŠ½è±¡åŒ–æè¿°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://img2018.cnblogs.com/blog/19327/202003/19327-20200308202700759-273762690.png&quot;&gt;&lt;img width=&quot;439&quot; height=&quot;291&quot; title=&quot;12-4&quot; alt=&quot;12-4&quot; src=&quot;https://img2018.cnblogs.com/blog/19327/202003/19327-20200308202701050-1792137598.png&quot; border=&quot;0&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ç³»åˆ—ç‰¹æ€§æ¥å£æ¥ä¸ºHttpContextæä¾›æŸä¸ªæ–¹é¢çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå…·ä½“çš„æœåŠ¡å™¨åªéœ€è¦å®ç°è¿™äº›Featureæ¥å£å³å¯ã€‚å¯¹äºæ‰€æœ‰ç”¨æ¥å®šä¹‰ç‰¹æ€§çš„æ¥å£ï¼Œæœ€é‡è¦çš„æ˜¯æä¾›è¯·æ±‚ä¿¡æ¯çš„&lt;span&gt;IRequestFeature&lt;/span&gt;æ¥å£å’Œå®Œæˆå“åº”çš„&lt;span&gt;IResponseFeature&lt;/span&gt;æ¥å£ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢é˜è¿°ç”¨æ¥é€‚é…ä¸åŒæœåŠ¡å™¨ç±»å‹çš„ç‰¹æ€§åœ¨ä»£ç å±‚é¢çš„å®šä¹‰ã€‚å¦‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ‰€ç¤ºï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªIFeatureCollectionæ¥å£æ¥è¡¨ç¤ºå­˜æ”¾ç‰¹æ€§çš„é›†åˆã€‚å¯ä»¥çœ‹å‡ºï¼Œè¿™æ˜¯ä¸€ä¸ªä»¥Typeå’ŒObjectä½œä¸ºKeyå’ŒValueçš„å­—å…¸ï¼ŒKeyä»£è¡¨æ³¨å†ŒFeatureæ‰€é‡‡ç”¨çš„ç±»å‹ï¼Œè€ŒValueä»£è¡¨Featureå¯¹è±¡æœ¬èº«ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æä¾›çš„ç‰¹æ€§æœ€ç»ˆæ˜¯ä»¥å¯¹åº”ç±»å‹ï¼ˆä¸€èˆ¬ä¸ºæ¥å£ç±»å‹ï¼‰è¿›è¡Œæ³¨å†Œçš„ã€‚ä¸ºäº†ä¾¿äºç¼–ç¨‹ï¼Œæˆ‘ä»¬å®šä¹‰äº†Set&amp;lt;T&amp;gt;æ–¹æ³•å’ŒGet&amp;lt;T&amp;gt;æ–¹æ³•æ¥è®¾ç½®ä¸è·å–ç‰¹æ€§å¯¹è±¡ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;40&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;interface&lt;/span&gt; IFeatureCollection : IDictionary&amp;lt;Type, &lt;span&gt;object&lt;/span&gt;&amp;gt;&lt;span&gt; { }
&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; FeatureCollection : Dictionary&amp;lt;Type, &lt;span&gt;object&lt;/span&gt;&amp;gt;&lt;span&gt;, IFeatureCollection { }
&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;partial&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; Extensions
{
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; T Get&amp;lt;T&amp;gt;(&lt;span&gt;this&lt;/span&gt; IFeatureCollection features)  =&amp;gt; features.TryGetValue(&lt;span&gt;typeof&lt;/span&gt;(T), &lt;span&gt;out&lt;/span&gt; &lt;span&gt;var&lt;/span&gt; value) ? (T)value : &lt;span&gt;default&lt;/span&gt;&lt;span&gt;(T);
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; IFeatureCollection Set&amp;lt;T&amp;gt;(&lt;span&gt;this&lt;/span&gt;&lt;span&gt; IFeatureCollection features, T feature)
    {
        features[&lt;/span&gt;&lt;span&gt;typeof&lt;/span&gt;(T)] =&lt;span&gt; feature;
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; features;
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æœ€æ ¸å¿ƒçš„ä¸¤ç§ç‰¹æ€§ç±»å‹å°±æ˜¯åˆ†åˆ«ç”¨æ¥è¡¨ç¤ºè¯·æ±‚å’Œå“åº”çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨å¦‚ä¸‹ä¸¤ä¸ªæ¥å£æ¥è¡¨ç¤ºã€‚å¯ä»¥çœ‹å‡ºï¼ŒIHttpRequestFeatureæ¥å£å’ŒIHttpResponseFeatureæ¥å£å…·æœ‰ä¸æŠ½è±¡ç±»å‹HttpRequestå’ŒHttpResponseå®Œå…¨ä¸€è‡´çš„æˆå‘˜å®šä¹‰ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;interface&lt;/span&gt;&lt;span&gt; IHttpRequestFeature
{
    Uri Url { &lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt;; }
    NameValueCollection Headers { &lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt;; }
    Stream Body { &lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt;; }
}
&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;interface&lt;/span&gt;&lt;span&gt; IHttpResponseFeature
{
    &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; StatusCode { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }
    NameValueCollection Headers { &lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt;; }
    Stream Body { &lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt;; }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨å‰é¢ç»™å‡ºäº†ç”¨äºæè¿°è¯·æ±‚ä¸Šä¸‹æ–‡çš„HttpContextç±»å‹çš„æˆå‘˜å®šä¹‰ï¼Œä¸‹é¢ä»‹ç»å…¶å…·ä½“å®ç°ã€‚å¦‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ‰€ç¤ºï¼Œè¡¨ç¤ºè¯·æ±‚å’Œå“åº”çš„HttpRequestä¸HttpResponseåˆ†åˆ«æ˜¯ç”±å¯¹åº”çš„ç‰¹æ€§ï¼ˆIHttpRequestFeatureå¯¹è±¡å’ŒIHttpResponseFeatureå¯¹è±¡ï¼‰åˆ›å»ºçš„ã€‚HttpContextå¯¹è±¡æœ¬èº«åˆ™æ˜¯é€šè¿‡ä¸€ä¸ªè¡¨ç¤ºç‰¹æ€§é›†åˆçš„IFeatureCollection å¯¹è±¡æ¥åˆ›å»ºçš„ï¼Œå®ƒä¼šåœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­ä»è¿™ä¸ªé›†åˆä¸­æå–å‡ºå¯¹åº”çš„ç‰¹æ€§æ¥åˆ›å»ºHttpRequestå¯¹è±¡å’ŒHttpResponseå¯¹è±¡ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; HttpContext
{
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; HttpRequest Request { &lt;span&gt;get&lt;/span&gt;&lt;span&gt;; }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; HttpResponse Response { &lt;span&gt;get&lt;/span&gt;&lt;span&gt;; }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; HttpContext(IFeatureCollection features)
    {
        Request &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; HttpRequest(features);
        Response &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; HttpResponse(features);
    }
}

&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; HttpRequest
{
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;readonly&lt;/span&gt;&lt;span&gt; IHttpRequestFeature _feature;
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; Uri Url=&amp;gt;&lt;span&gt; _feature.Url;
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; NameValueCollection Headers=&amp;gt;&lt;span&gt; _feature.Headers;
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; Stream Body=&amp;gt;&lt;span&gt; _feature.Body;
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; HttpRequest(IFeatureCollection features)=&amp;gt; _feature = features.Get&amp;lt;IHttpRequestFeature&amp;gt;&lt;span&gt;();
}

&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; HttpResponse
{
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;readonly&lt;/span&gt;&lt;span&gt; IHttpResponseFeature _feature;

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; NameValueCollection Headers=&amp;gt;&lt;span&gt; _feature.Headers;
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; Stream Body=&amp;gt;&lt;span&gt; _feature.Body;
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; StatusCode
    {
        &lt;/span&gt;&lt;span&gt;get&lt;/span&gt; =&amp;gt;&lt;span&gt; _feature.StatusCode;
        &lt;/span&gt;&lt;span&gt;set&lt;/span&gt; =&amp;gt; _feature.StatusCode =&lt;span&gt; value;
    }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; HttpResponse(IFeatureCollection features)=&amp;gt; _feature = features.Get&amp;lt;IHttpResponseFeature&amp;gt;&lt;span&gt;();
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬åˆ©ç”¨HttpContextå¯¹è±¡çš„Requestå±æ€§æå–çš„è¯·æ±‚ä¿¡æ¯æœ€åˆæ¥æºäºIHttpRequestFeatureå¯¹è±¡ï¼Œåˆ©ç”¨å®ƒçš„Responseå±æ€§é’ˆå¯¹å“åº”æ‰€åšçš„ä»»æ„æ“ä½œæœ€ç»ˆéƒ½ä¼šä½œç”¨åˆ°IHttpResponseFeatureå¯¹è±¡ä¸Šã€‚è¿™ä¸¤ä¸ªå¯¹è±¡æœ€åˆæ˜¯ç”±æ³¨å†Œçš„æœåŠ¡å™¨æä¾›çš„ï¼Œè¿™æ­£æ˜¯åŒä¸€ä¸ªASP.NET Coreåº”ç”¨å¯ä»¥&lt;span&gt;è‡ªç”±åœ°é€‰æ‹©ä¸åŒæœåŠ¡å™¨ç±»å‹&lt;/span&gt;çš„æ ¹æºæ‰€åœ¨ã€‚&lt;/p&gt;
&lt;h2&gt;&lt;span&gt;HttpListenerServer&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;åœ¨å¯¹æœåŠ¡å™¨çš„èŒè´£å’Œå®ƒä¸HttpContextçš„é€‚é…åŸç†æœ‰äº†æ¸…æ™°çš„è®¤è¯†ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•å®šä¹‰ä¸€ä¸ªæœåŠ¡å™¨ã€‚æˆ‘ä»¬å°†æ¥ä¸‹æ¥å®šä¹‰çš„æœåŠ¡å™¨ç±»å‹å‘½åä¸ºHttpListenerServerï¼Œå› ä¸ºå®ƒå¯¹è¯·æ±‚çš„ç›‘å¬ã€æ¥æ”¶å’Œå“åº”æ˜¯ç”±ä¸€ä¸ªHttpListenerå¯¹è±¡æ¥å®ç°çš„ã€‚ç”±äºæœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚ä¹‹åéœ€è¦å€ŸåŠ©â€œç‰¹æ€§â€çš„é€‚é…æ¥æ„å»ºç»Ÿä¸€çš„è¯·æ±‚ä¸Šä¸‹æ–‡ï¼ˆå³HttpContextå¯¹è±¡ï¼‰ï¼Œè¿™ä¹Ÿæ˜¯ä¸­é—´ä»¶çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œæ‰€ä»¥æä¾›é’ˆå¯¹æ€§çš„ç‰¹æ€§å®ç°æ˜¯è‡ªå®šä¹‰æœåŠ¡ç±»å‹çš„å…³é”®æ‰€åœ¨ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹HttpListeneræœ‰æ‰€äº†è§£çš„è¯»è€…éƒ½çŸ¥é“ï¼Œå½“å®ƒåœ¨æ¥æ”¶åˆ°è¯·æ±‚ä¹‹ååŒæ ·ä¼šåˆ›å»ºä¸€ä¸ªHttpListenerContextå¯¹è±¡è¡¨ç¤ºè¯·æ±‚ä¸Šä¸‹æ–‡ã€‚å¦‚æœä½¿ç”¨HttpListenerå¯¹è±¡ä½œä¸ºASP.NET Coreåº”ç”¨çš„ç›‘å¬å™¨ï¼Œå°±æ„å‘³ç€ä¸ä»…æ‰€æœ‰çš„è¯·æ±‚ä¿¡æ¯ä¼šæ¥æºäºè¿™ä¸ªHttpListenerContextå¯¹è±¡ï¼Œæˆ‘ä»¬é’ˆå¯¹è¯·æ±‚çš„å“åº”æœ€ç»ˆä¹Ÿéœ€è¦åˆ©ç”¨è¿™ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡æ¥å®Œæˆã€‚HttpListenerServerå¯¹åº”ç‰¹æ€§æ‰€èµ·çš„ä½œç”¨å®é™…ä¸Šå°±æ˜¯åœ¨HttpListenerContextå’ŒHttpContextè¿™ä¸¤ç§ä¸Šä¸‹æ–‡ä¹‹é—´æ­å»ºèµ·ä¸€åº§å¦‚ä¸‹å›¾æ‰€ç¤ºçš„æ¡¥æ¢ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://img2018.cnblogs.com/blog/19327/202003/19327-20200308202701279-990544999.png&quot;&gt;&lt;img width=&quot;419&quot; height=&quot;210&quot; title=&quot;12-5&quot; alt=&quot;12-5&quot; src=&quot;https://img2018.cnblogs.com/blog/19327/202003/19327-20200308202701505-1895959417.png&quot; border=&quot;0&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šå›¾ä¸­ç”¨æ¥åœ¨HttpListenerContextå’ŒHttpContextè¿™ä¸¤ä¸ªä¸Šä¸‹æ–‡ç±»å‹ä¹‹é—´å®Œæˆé€‚é…çš„ç‰¹æ€§ç±»å‹è¢«å‘½åä¸º&lt;span&gt;HttpListenerFeature&lt;/span&gt;ã€‚å¦‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ‰€ç¤ºï¼ŒHttpListenerFeatureç±»å‹åŒæ—¶å®ç°äº†é’ˆå¯¹è¯·æ±‚å’Œå“åº”çš„ç‰¹æ€§æ¥å£IHttpRequestFeatureä¸IHttpResponseFeatureã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; HttpListenerFeature : IHttpRequestFeature, IHttpResponseFeature
{
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;readonly&lt;/span&gt;&lt;span&gt; HttpListenerContext _context;
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; HttpListenerFeature(HttpListenerContext context) =&amp;gt; _context =&lt;span&gt; context;
    Uri IHttpRequestFeature.Url &lt;/span&gt;=&amp;gt;&lt;span&gt; _context.Request.Url;
    NameValueCollection IHttpRequestFeature.Headers &lt;/span&gt;=&amp;gt;&lt;span&gt; _context.Request.Headers;
    NameValueCollection IHttpResponseFeature.Headers &lt;/span&gt;=&amp;gt;&lt;span&gt; _context.Response.Headers;
    Stream IHttpRequestFeature.Body &lt;/span&gt;=&amp;gt;&lt;span&gt; _context.Request.InputStream;
    Stream IHttpResponseFeature.Body &lt;/span&gt;=&amp;gt;&lt;span&gt; _context.Response.OutputStream;
    &lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt; IHttpResponseFeature.StatusCode
    {
        &lt;/span&gt;&lt;span&gt;get&lt;/span&gt; =&amp;gt;&lt;span&gt; _context.Response.StatusCode;
        &lt;/span&gt;&lt;span&gt;set&lt;/span&gt; =&amp;gt; _context.Response.StatusCode =&lt;span&gt; value;
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åˆ›å»ºHttpListenerFeatureå¯¹è±¡æ—¶éœ€è¦æä¾›ä¸€ä¸ªHttpListenerContextå¯¹è±¡ï¼ŒIHttpRequestFeatureæ¥å£çš„å®ç°æˆå‘˜æ‰€æä¾›çš„è¯·æ±‚ä¿¡æ¯å…¨éƒ¨æ¥æºäºè¿™ä¸ªHttpListenerContextä¸Šä¸‹æ–‡ï¼ŒIHttpResponseFeatureæ¥å£çš„å®ç°æˆå‘˜é’ˆå¯¹å“åº”çš„æ“ä½œæœ€ç»ˆä¹Ÿè½¬ç§»åˆ°è¿™ä¸ªHttpListenerContextä¸Šä¸‹æ–‡ä¸Šã€‚å¦‚ä¸‹æ‰€ç¤ºçš„ä»£ç ç‰‡æ®µæ˜¯é’ˆå¯¹HttpListenerçš„æœåŠ¡å™¨ç±»å‹HttpListenerServerçš„å®Œæ•´å®šä¹‰ã€‚æˆ‘ä»¬åœ¨åˆ›å»ºHttpListenerServerå¯¹è±¡çš„æ—¶å€™å¯ä»¥æ˜¾å¼æä¾›ä¸€ç»„ç›‘å¬åœ°å€ï¼Œå¦‚æœæ²¡æœ‰æä¾›ï¼Œç›‘å¬åœ°å€ä¼šé»˜è®¤è®¾ç½®â€œlocalhost:5000â€ã€‚åœ¨å®ç°çš„StartAsyncæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯åŠ¨äº†åœ¨æ„é€ å‡½æ•°ä¸­åˆ›å»ºçš„HttpListenerServerå¯¹è±¡ï¼Œå¹¶ä¸”åœ¨ä¸€ä¸ªæ— é™å¾ªç¯ä¸­é€šè¿‡è°ƒç”¨å…¶GetContextAsyncæ–¹æ³•å®ç°äº†é’ˆå¯¹è¯·æ±‚çš„ç›‘å¬å’Œæ¥æ”¶ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; HttpListenerServer : IServer
{
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;readonly&lt;/span&gt;&lt;span&gt; HttpListener _httpListener;
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;readonly&lt;/span&gt; &lt;span&gt;string&lt;/span&gt;&lt;span&gt;[] _urls;
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; HttpListenerServer(&lt;span&gt;params&lt;/span&gt; &lt;span&gt;string&lt;/span&gt;&lt;span&gt;[] urls)
    {
        _httpListener &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; HttpListener();
        _urls &lt;/span&gt;= urls.Any() ? urls : &lt;span&gt;new&lt;/span&gt; &lt;span&gt;string&lt;/span&gt;[] { &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;http://localhost:5000/&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; };
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;async&lt;/span&gt;&lt;span&gt; Task StartAsync(RequestDelegate handler)
    {
        Array.ForEach(_urls, url &lt;/span&gt;=&amp;gt;&lt;span&gt; _httpListener.Prefixes.Add(url));
        _httpListener.Start();
        &lt;/span&gt;&lt;span&gt;while&lt;/span&gt; (&lt;span&gt;true&lt;/span&gt;&lt;span&gt;)
        {
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; listenerContext = &lt;span&gt;await&lt;/span&gt;&lt;span&gt; _httpListener.GetContextAsync();
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; feature = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; HttpListenerFeature(listenerContext);
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; features = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; FeatureCollection()
                .Set&lt;/span&gt;&amp;lt;IHttpRequestFeature&amp;gt;&lt;span&gt;(feature)
                .Set&lt;/span&gt;&amp;lt;IHttpResponseFeature&amp;gt;&lt;span&gt;(feature);
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; httpContext = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; HttpContext(features);
            &lt;/span&gt;&lt;span&gt;await&lt;/span&gt;&lt;span&gt; handler(httpContext);
            listenerContext.Response.Close();
        }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å½“HttpListenerç›‘å¬åˆ°æŠµè¾¾çš„è¯·æ±‚åï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªHttpListenerContextå¯¹è±¡ï¼Œæ­¤æ—¶åªéœ€è¦åˆ©ç”¨å®ƒåˆ›å»ºä¸€ä¸ªHttpListenerFeatureå¯¹è±¡å¹¶ä¸”åˆ†åˆ«ä»¥IHttpRequestFeatureæ¥å£å’ŒIHttpResponseFeatureæ¥å£çš„å½¢å¼æ³¨å†Œåˆ°åˆ›å»ºçš„FeatureCollectioné›†åˆä¸Šã€‚æˆ‘ä»¬æœ€ç»ˆåˆ©ç”¨è¿™ä¸ªFeatureCollectioné›†åˆåˆ›å»ºå‡ºä»£è¡¨è¯·æ±‚ä¸Šä¸‹æ–‡çš„HttpContextå¯¹è±¡ï¼Œå½“å°†å®ƒä½œä¸ºå‚æ•°è°ƒç”¨ç”±æ‰€æœ‰æ³¨å†Œä¸­é—´ä»¶å…±åŒæ„å»ºçš„RequestDelegateå¯¹è±¡æ—¶ï¼Œä¸­é—´ä»¶ç®¡é“å°†æ¥ç®¡å¹¶å¤„ç†è¯¥è¯·æ±‚ã€‚&lt;/p&gt;

&lt;p&gt;åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»äº†è§£æ„æˆASP.NET Coreè¯·æ±‚å¤„ç†ç®¡é“çš„ä¸¤ä¸ªæ ¸å¿ƒè¦ç´ ï¼ˆæœåŠ¡å™¨å’Œä¸­é—´ä»¶ï¼‰ï¼Œç°åœ¨æˆ‘ä»¬çš„ç›®æ ‡æ˜¯åˆ©ç”¨.NET Coreæ‰¿è½½æœåŠ¡ç³»ç»Ÿæ¥æ‰¿è½½è¿™ä¸€ç®¡é“ã€‚æ¯«æ— ç–‘é—®ï¼Œè¿˜éœ€è¦é€šè¿‡å®ç°IHostedServiceæ¥å£æ¥å®šä¹‰å¯¹åº”çš„æ‰¿è½½æœåŠ¡ï¼Œä¸ºæ­¤æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸ºWebHostedServiceçš„æ‰¿è½½æœåŠ¡ã€‚(å…³äº.NET Coreæ‰¿è½½æœåŠ¡ç³»ç»Ÿï¼Œè¯·å‚é˜…æˆ‘çš„ç³»åˆ—æ–‡ç« ã€Š&lt;a href=&quot;https://www.cnblogs.com/artech/p/inside-asp-net-core-09-01.html&quot;&gt;æœåŠ¡æ‰¿è½½ç³»ç»Ÿ&lt;/a&gt;ã€‹)&lt;/p&gt;
&lt;h2&gt;&lt;span&gt;WebHostedService&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;ç”±äºæœåŠ¡å™¨æ˜¯æ•´ä¸ªè¯·æ±‚å¤„ç†ç®¡é“çš„â€œé¾™å¤´â€ï¼Œæ‰€ä»¥ä»æŸç§æ„ä¹‰ä¸Šæ¥è¯´ï¼Œå¯&lt;span&gt;åŠ¨ä¸€ä¸ªASP.NET Coreåº”ç”¨å°±æ˜¯ä¸ºå¯åŠ¨æœåŠ¡å™¨&lt;/span&gt;ï¼Œæ‰€ä»¥å¯ä»¥å°†æœåŠ¡çš„å¯åŠ¨åœ¨WebHostedServiceæ‰¿è½½æœåŠ¡ä¸­å®ç°ã€‚å¦‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ‰€ç¤ºï¼Œåˆ›å»ºä¸€ä¸ªWebHostedServiceå¯¹è±¡æ—¶ï¼Œéœ€è¦æä¾›æœåŠ¡å™¨å¯¹è±¡å’Œç”±æ‰€æœ‰æ³¨å†Œä¸­é—´ä»¶æ„å»ºçš„RequestDelegateå¯¹è±¡ã€‚åœ¨å®ç°çš„StartAsyncæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨æœåŠ¡å™¨å¯¹è±¡çš„StartAsyncæ–¹æ³•å¯åŠ¨å®ƒå³å¯ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; WebHostedService : IHostedService
{
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;readonly&lt;/span&gt;&lt;span&gt; IServer _server;
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;readonly&lt;/span&gt;&lt;span&gt; RequestDelegate _handler;
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; WebHostedService(IServer server, RequestDelegate handler)
    {
        _server &lt;/span&gt;=&lt;span&gt; server;
        _handler &lt;/span&gt;=&lt;span&gt; handler;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; Task StartAsync(CancellationToken cancellationToken) =&amp;gt;&lt;span&gt; _server.StartAsync(_handler);
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; Task StopAsync(CancellationToken cancellationToken) =&amp;gt;&lt;span&gt; Task.CompletedTask;
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åŸºæœ¬ä¸Šå·²ç»å®Œæˆäº†æ‰€æœ‰æ ¸å¿ƒçš„å·¥ä½œï¼Œå¦‚æœèƒ½å¤Ÿå°†ä¸€ä¸ªWebHostedServiceå®ä¾‹æ³¨å†Œåˆ°.NET Coreçš„æ‰¿è½½ç³»ç»Ÿä¸­ï¼Œå®ƒå°±èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å¯åŠ¨ä¸€ä¸ªASP.NET Coreåº”ç”¨ã€‚ä¸ºäº†ä½¿è¿™ä¸ªè¿‡ç¨‹åœ¨ç¼–ç¨‹ä¸Šå˜å¾—æ›´åŠ ä¾¿åˆ©å’Œâ€œä¼˜é›…â€ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªè¾…åŠ©çš„WebHostBuilderç±»å‹ã€‚&lt;/p&gt;
&lt;h2&gt;&lt;span&gt;WebHostBuilder&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;è¦åˆ›å»ºä¸€ä¸ªWebHostedServiceå¯¹è±¡ï¼Œå¿…éœ€æ˜¾å¼åœ°æä¾›ä¸€ä¸ªè¡¨ç¤ºæœåŠ¡å™¨çš„&lt;a&gt;IServe&lt;/a&gt;rå¯¹è±¡ï¼Œä»¥åŠç”±æ‰€æœ‰æ³¨å†Œä¸­é—´ä»¶æ„å»ºè€Œæˆçš„RequestDelegateå¯¹è±¡ï¼ŒWebHostBuilderæä¾›äº†æ›´åŠ ä¾¿åˆ©å’Œâ€œä¼˜é›…â€çš„æœåŠ¡å™¨ä¸ä¸­é—´ä»¶æ³¨å†Œæ–¹å¼ã€‚å¦‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ‰€ç¤ºï¼ŒWebHostBuilderæ˜¯å¯¹é¢å¤–ä¸¤ä¸ªBuilderå¯¹è±¡çš„å°è£…ï¼šä¸€ä¸ªæ˜¯ç”¨æ¥æ„å»ºæœåŠ¡å®¿ä¸»çš„IHostBuilderå¯¹è±¡ï¼Œå¦ä¸€ä¸ªæ˜¯ç”¨æ¥æ³¨å†Œä¸­é—´ä»¶å¹¶æœ€ç»ˆå¸®åŠ©æˆ‘ä»¬åˆ›å»ºRequestDelegateå¯¹è±¡çš„IApplicationBuilderå¯¹è±¡ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; WebHostBuilder
{   
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; IHostBuilder HostBuilder { &lt;span&gt;get&lt;/span&gt;&lt;span&gt;; }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; IApplicationBuilder ApplicationBuilder { &lt;span&gt;get&lt;/span&gt;&lt;span&gt;; }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; WebHostBuilder(IHostBuilder hostBuilder, IApplicationBuilder applicationBuilder)
    {
        HostBuilder &lt;/span&gt;=&lt;span&gt; hostBuilder;
        ApplicationBuilder &lt;/span&gt;=&lt;span&gt; applicationBuilder;
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æˆ‘ä»¬ä¸ºWebHostBuilderå®šä¹‰äº†å¦‚ä¸‹ä¸¤ä¸ªæ‰©å±•æ–¹æ³•ï¼š&lt;span&gt;UseHttpListenerServer&lt;/span&gt;æ–¹æ³•å®Œæˆäº†é’ˆå¯¹è‡ªå®šä¹‰çš„æœåŠ¡å™¨ç±»å‹HttpListenerServerçš„æ³¨å†Œï¼›&lt;span&gt;Configure&lt;/span&gt;æ–¹æ³•æä¾›äº†ä¸€ä¸ªAction&amp;lt;IApplication&lt;br/&gt;Builder&amp;gt;ç±»å‹çš„å‚æ•°ï¼Œåˆ©ç”¨è¯¥å‚æ•°æ¥æ³¨å†Œä»»æ„ä¸­é—´ä»¶ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;partial&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; Extensions
{
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; WebHostBuilder UseHttpListenerServer(&lt;span&gt;this&lt;/span&gt; WebHostBuilder builder, &lt;span&gt;params&lt;/span&gt; &lt;span&gt;string&lt;/span&gt;&lt;span&gt;[] urls)
    {
        builder.HostBuilder.ConfigureServices(svcs &lt;/span&gt;=&amp;gt; svcs.AddSingleton&amp;lt;IServer&amp;gt;(&lt;span&gt;new&lt;/span&gt;&lt;span&gt; HttpListenerServer(urls)));
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; builder;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; WebHostBuilder Configure(&lt;span&gt;this&lt;/span&gt; WebHostBuilder builder, Action&amp;lt;IApplicationBuilder&amp;gt;&lt;span&gt; configure)
    {
        configure&lt;/span&gt;?&lt;span&gt;.Invoke(builder.ApplicationBuilder);
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; builder;
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä»£è¡¨ASP.NET Coreåº”ç”¨çš„è¯·æ±‚å¤„ç†ç®¡é“æœ€ç»ˆæ˜¯åˆ©ç”¨æ‰¿è½½æœåŠ¡WebHostedServiceæ³¨å†Œåˆ°.NET Coreçš„æ‰¿è½½ç³»ç»Ÿä¸­çš„ï¼Œé’ˆå¯¹WebHostedServiceæœåŠ¡çš„åˆ›å»ºå’Œæ³¨å†Œä½“ç°åœ¨ä¸ºIHostBuilderæ¥å£å®šä¹‰çš„&lt;span&gt;ConfigureWebHost&lt;/span&gt;æ‰©å±•æ–¹æ³•ä¸Šã€‚å¦‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ‰€ç¤ºï¼ŒConfigureWebHostæ–¹æ³•å®šä¹‰äº†ä¸€ä¸ªAction&amp;lt;WebHostBuilder&amp;gt;ç±»å‹çš„å‚æ•°ï¼Œåˆ©ç”¨è¯¥å‚æ•°å¯ä»¥æ³¨å†ŒæœåŠ¡å™¨ã€ä¸­é—´ä»¶åŠå…¶ä»–ç›¸å…³æœåŠ¡ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;partial&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; Extensions
{
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; IHostBuilder ConfigureWebHost(&lt;span&gt;this&lt;/span&gt; IHostBuilder builder, Action&amp;lt;WebHostBuilder&amp;gt;&lt;span&gt; configure)
    {
        &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; webHostBuilder = &lt;span&gt;new&lt;/span&gt; WebHostBuilder(builder, &lt;span&gt;new&lt;/span&gt;&lt;span&gt; ApplicationBuilder());
        configure&lt;/span&gt;?&lt;span&gt;.Invoke(webHostBuilder);
        builder.ConfigureServices(svcs &lt;/span&gt;=&amp;gt; svcs.AddSingleton&amp;lt;IHostedService&amp;gt;(provider =&amp;gt;&lt;span&gt; {
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; server = provider.GetRequiredService&amp;lt;IServer&amp;gt;&lt;span&gt;();
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; handler =&lt;span&gt; webHostBuilder.ApplicationBuilder.Build();
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;new&lt;/span&gt;&lt;span&gt; WebHostedService(server, handler);
        }));
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; builder;
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åœ¨ConfigureWebHostæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªApplicationBuilderå¯¹è±¡ï¼Œå¹¶åˆ©ç”¨å®ƒå’Œå½“å‰çš„IHostBuilderå¯¹è±¡åˆ›å»ºäº†ä¸€ä¸ªWebHostBuilderå¯¹è±¡ï¼Œç„¶åå°†è¿™ä¸ªWebHostBuilderå¯¹è±¡ä½œä¸ºå‚æ•°è°ƒç”¨äº†æŒ‡å®šçš„Action&amp;lt;WebHostBuilder&amp;gt;å§”æ‰˜å¯¹è±¡ã€‚åœ¨æ­¤ä¹‹åï¼Œæˆ‘ä»¬è°ƒç”¨IHostBuilderæ¥å£çš„ConfigureServicesæ–¹æ³•åœ¨ä¾èµ–æ³¨å…¥æ¡†æ¶ä¸­æ³¨å†Œäº†ä¸€ä¸ªç”¨äºåˆ›å»ºWebHostedServiceæœåŠ¡çš„å·¥å‚ã€‚å¯¹äºç”±è¯¥å·¥å‚åˆ›å»ºçš„WebHostedServiceå¯¹è±¡æ¥è¯´ï¼ŒæœåŠ¡å™¨æ¥æºäºæ³¨å†Œçš„æœåŠ¡ï¼Œè€Œä½œä¸ºè¯·æ±‚å¤„ç†å™¨çš„RequestDelegateå¯¹è±¡åˆ™ç”±ApplicationBuilderå¯¹è±¡æ ¹æ®æ³¨å†Œçš„ä¸­é—´ä»¶æ„å»ºè€Œæˆã€‚&lt;/p&gt;
&lt;h2&gt;&lt;span&gt;åº”ç”¨æ„å»º&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;åˆ°ç›®å‰ä¸ºæ­¢ï¼Œè¿™ä¸ªç”¨æ¥æ¨¡æ‹ŸASP.NET Coreè¯·æ±‚å¤„ç†ç®¡é“çš„â€œè¿·ä½ ç‰ˆâ€æ¡†æ¶å·²ç»æ„å»ºå®Œæˆï¼Œä¸‹é¢å°è¯•åœ¨å®ƒä¸Šé¢å¼€å‘ä¸€ä¸ªç®€å•çš„åº”ç”¨ã€‚å¦‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ‰€ç¤ºï¼Œæˆ‘ä»¬è°ƒç”¨é™æ€ç±»å‹Hostçš„CreateDefaultBuilderæ–¹æ³•åˆ›å»ºäº†ä¸€ä¸ªIHostBuilderå¯¹è±¡ï¼Œç„¶åè°ƒç”¨ConfigureWebHostæ–¹æ³•å¹¶åˆ©ç”¨æä¾›çš„Action&amp;lt;WebHostBuilder&amp;gt;å¯¹è±¡æ³¨å†Œäº†HttpListenerServeræœåŠ¡å™¨å’Œ3ä¸ªä¸­é—´ä»¶ã€‚åœ¨è°ƒç”¨Buildæ–¹æ³•æ„å»ºå‡ºä½œä¸ºæœåŠ¡å®¿ä¸»çš„IHostå¯¹è±¡ä¹‹åï¼Œæˆ‘ä»¬è°ƒç”¨å…¶Runæ–¹æ³•å¯åŠ¨æ‰€æœ‰æ‰¿è½½çš„IHostedSerivceæœåŠ¡ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; Program
{
    &lt;/span&gt;&lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; Main()
    {
        Host.CreateDefaultBuilder()
            .ConfigureWebHost(builder &lt;/span&gt;=&amp;gt;&lt;span&gt; builder
                .UseHttpListenerServer()
                .Configure(app &lt;/span&gt;=&amp;gt;&lt;span&gt; app
                    .Use(FooMiddleware)
                    .Use(BarMiddleware)
                    .Use(BazMiddleware)))
            .Build()
            .Run();
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt;&lt;span&gt; RequestDelegate FooMiddleware(RequestDelegate next)
        &lt;/span&gt;=&amp;gt; &lt;span&gt;async&lt;/span&gt; context =&amp;gt;&lt;span&gt;{
            &lt;/span&gt;&lt;span&gt;await&lt;/span&gt; context.Response.WriteAsync(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Foo=&amp;gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
            &lt;/span&gt;&lt;span&gt;await&lt;/span&gt;&lt;span&gt; next(context);
        };

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt;&lt;span&gt; RequestDelegate BarMiddleware(RequestDelegate next)
        &lt;/span&gt;=&amp;gt; &lt;span&gt;async&lt;/span&gt; context =&amp;gt;&lt;span&gt;{
            &lt;/span&gt;&lt;span&gt;await&lt;/span&gt; context.Response.WriteAsync(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Bar=&amp;gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
            &lt;/span&gt;&lt;span&gt;await&lt;/span&gt;&lt;span&gt; next(context);
        };

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt;&lt;span&gt; RequestDelegate BazMiddleware(RequestDelegate next)
        &lt;/span&gt;=&amp;gt; context =&amp;gt; context.Response.WriteAsync(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Baz&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç”±äºä¸­é—´ä»¶æœ€ç»ˆä½“ç°ä¸ºä¸€ä¸ªç±»å‹ä¸ºFunc&amp;lt;RequestDelegate, RequestDelegate&amp;gt;çš„å§”æ‰˜å¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥åˆ©ç”¨ä¸ä¹‹åŒ¹é…çš„æ–¹æ³•æ¥å®šä¹‰ä¸­é—´ä»¶ã€‚æ¼”ç¤ºå®ä¾‹ä¸­å®šä¹‰çš„3ä¸ªä¸­é—´ä»¶ï¼ˆFooMiddlewareã€BarMiddlewareå’ŒBazMiddlewareï¼‰å¯¹åº”çš„æ­£æ˜¯3ä¸ªé™æ€æ–¹æ³•ï¼Œå®ƒä»¬è°ƒç”¨WriteAsyncæ‰©å±•æ–¹æ³•åœ¨å“åº”ä¸­å†™äº†ä¸€æ®µæ–‡å­—ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;partial&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; Extensions
{    
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; Task WriteAsync(&lt;span&gt;this&lt;/span&gt; HttpResponse response, &lt;span&gt;string&lt;/span&gt;&lt;span&gt; contents)
    {
        &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; buffer =&lt;span&gt; Encoding.UTF8.GetBytes(contents);
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; response.Body.WriteAsync(buffer, &lt;span&gt;0&lt;/span&gt;&lt;span&gt;, buffer.Length);
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åº”ç”¨å¯åŠ¨ä¹‹åï¼Œå¦‚æœåˆ©ç”¨æµè§ˆå™¨å‘åº”ç”¨ç¨‹åºé‡‡ç”¨çš„é»˜è®¤ç›‘å¬åœ°å€ï¼ˆâ€œhttp://localhost:5000â€ï¼‰å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œå¾—åˆ°çš„è¾“å‡ºç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚æµè§ˆå™¨ä¸Šå‘ˆç°çš„æ–‡å­—æ­£æ˜¯æ³¨å†Œçš„3ä¸ªä¸­é—´ä»¶å†™å…¥çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://img2018.cnblogs.com/blog/19327/202003/19327-20200308202701828-1506221380.png&quot;&gt;&lt;img width=&quot;402&quot; height=&quot;168&quot; title=&quot;12-6&quot; alt=&quot;12-6&quot; src=&quot;https://img2018.cnblogs.com/blog/19327/202003/19327-20200308202702102-1896686672.png&quot; border=&quot;0&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Mon, 09 Mar 2020 00:16:00 +0000</pubDate>
<dc:creator>Artech</dc:creator>
<og:description>2019å¹´1æœˆ19æ—¥ï¼Œå¾®è½¯æŠ€æœ¯ï¼ˆè‹å·ï¼‰ä¿±ä¹éƒ¨æˆç«‹ï¼Œæˆ‘å—é‚€åœ¨æˆç«‹å¤§ä¼šä¸Šä½œäº†ä¸€ä¸ªåä¸ºã€ŠASP.NET Coreæ¡†æ¶æ­ç§˜ã€‹çš„åˆ†äº«ã€‚åœ¨æ­¤æ¬¡åˆ†äº«ä¸­ï¼Œæˆ‘æŒ‰ç…§ASP.NET Coreè‡ªèº«çš„è¿è¡ŒåŸç†å’Œè®¾è®¡æ€æƒ³åˆ›å»ºäº†ä¸€</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/artech/p/mini-asp-net-core-3x.html</dc:identifier>
</item>
<item>
<title>JavaScriptå®ç°æ ‘ç»“æ„ï¼ˆä¸€ï¼‰ - AhuntSun</title>
<link>http://www.cnblogs.com/AhuntSun-blog/p/12446656.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/AhuntSun-blog/p/12446656.html</guid>
<description>&lt;h2 id=&quot;javascriptå®ç°æ ‘ç»“æ„ä¸€&quot;&gt;JavaScriptå®ç°æ ‘ç»“æ„ï¼ˆä¸€ï¼‰&lt;/h2&gt;
&lt;h3 id=&quot;ä¸€æ ‘ç»“æ„ç®€ä»‹&quot;&gt;ä¸€ã€æ ‘ç»“æ„ç®€ä»‹&lt;/h3&gt;
&lt;h4 id=&quot;ç®€å•äº†è§£æ ‘ç»“æ„&quot;&gt;1.1.ç®€å•äº†è§£æ ‘ç»“æ„&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;ä»€ä¹ˆæ˜¯æ ‘ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;çœŸå®çš„æ ‘ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/1.png&quot; alt=&quot;image-20200229205530929&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ ‘çš„ç‰¹ç‚¹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æ ‘ä¸€èˆ¬éƒ½æœ‰ä¸€ä¸ª&lt;strong&gt;æ ¹&lt;/strong&gt;ï¼Œè¿æ¥ç€æ ¹çš„æ˜¯&lt;strong&gt;æ ‘å¹²&lt;/strong&gt;ï¼›&lt;/li&gt;
&lt;li&gt;æ ‘å¹²ä¼šå‘ç”Ÿåˆ†å‰ï¼Œå½¢æˆè®¸å¤š&lt;strong&gt;æ ‘æ&lt;/strong&gt;ï¼Œæ ‘æä¼šç»§ç»­åˆ†åŒ–æˆæ›´å°çš„&lt;strong&gt;æ ‘æ&lt;/strong&gt;ï¼›&lt;/li&gt;
&lt;li&gt;æ ‘æçš„æœ€åæ˜¯&lt;strong&gt;å¶å­&lt;/strong&gt;ï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ç°å®ç”Ÿæ´»ä¸­å¾ˆå¤šç»“æ„éƒ½æ˜¯æ ‘çš„æŠ½è±¡ï¼Œæ¨¡æ‹Ÿçš„æ ‘ç»“æ„ç›¸å½“äºæ—‹è½¬&lt;code&gt;180Â°&lt;/code&gt;çš„æ ‘ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/2.png&quot; alt=&quot;image-20200229205630945&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ ‘ç»“æ„å¯¹æ¯”äºæ•°ç»„/é“¾è¡¨/å“ˆå¸Œè¡¨æœ‰å“ªäº›ä¼˜åŠ¿å‘¢ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ•°ç»„ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä¼˜ç‚¹ï¼šå¯ä»¥é€šè¿‡&lt;strong&gt;ä¸‹æ ‡å€¼è®¿é—®&lt;/strong&gt;ï¼Œæ•ˆç‡é«˜ï¼›&lt;/li&gt;
&lt;li&gt;ç¼ºç‚¹ï¼šæŸ¥æ‰¾æ•°æ®æ—¶éœ€è¦å…ˆå¯¹æ•°æ®è¿›è¡Œ&lt;strong&gt;æ’åº&lt;/strong&gt;ï¼Œç”Ÿæˆ&lt;strong&gt;æœ‰åºæ•°ç»„&lt;/strong&gt;ï¼Œæ‰èƒ½æé«˜æŸ¥æ‰¾æ•ˆç‡ï¼›å¹¶ä¸”åœ¨æ’å…¥å’Œåˆ é™¤å…ƒç´ æ—¶ï¼Œéœ€è¦å¤§é‡çš„&lt;strong&gt;ä½ç§»æ“ä½œ&lt;/strong&gt;ï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;é“¾è¡¨ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä¼˜ç‚¹ï¼šæ•°æ®çš„æ’å…¥å’Œåˆ é™¤æ“ä½œæ•ˆç‡éƒ½å¾ˆé«˜ï¼›&lt;/li&gt;
&lt;li&gt;ç¼ºç‚¹ï¼š&lt;strong&gt;æŸ¥æ‰¾&lt;/strong&gt;æ•ˆç‡ä½ï¼Œéœ€è¦ä»å¤´å¼€å§‹ä¾æ¬¡æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ç›®æ ‡æ•°æ®ä¸ºæ­¢ï¼›å½“éœ€è¦åœ¨é“¾è¡¨ä¸­é—´ä½ç½®æ’å…¥æˆ–åˆ é™¤æ•°æ®æ—¶ï¼Œæ’å…¥æˆ–åˆ é™¤çš„æ•ˆç‡éƒ½ä¸é«˜ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;å“ˆå¸Œè¡¨ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä¼˜ç‚¹ï¼šå“ˆå¸Œè¡¨çš„æ’å…¥/æŸ¥è¯¢/åˆ é™¤æ•ˆç‡éƒ½éå¸¸é«˜ï¼›&lt;/li&gt;
&lt;li&gt;ç¼ºç‚¹ï¼š&lt;strong&gt;ç©ºé—´åˆ©ç”¨ç‡ä¸é«˜&lt;/strong&gt;ï¼Œåº•å±‚ä½¿ç”¨çš„æ•°ç»„ä¸­å¾ˆå¤šå•å…ƒæ²¡æœ‰è¢«åˆ©ç”¨ï¼›å¹¶ä¸”å“ˆå¸Œè¡¨ä¸­çš„å…ƒç´ æ˜¯&lt;strong&gt;æ— åº&lt;/strong&gt;çš„ï¼Œä¸èƒ½æŒ‰ç…§å›ºå®šé¡ºåºéå†å“ˆå¸Œè¡¨ä¸­çš„å…ƒç´ ï¼›è€Œä¸”ä¸èƒ½å¿«é€Ÿæ‰¾å‡ºå“ˆå¸Œè¡¨ä¸­&lt;strong&gt;æœ€å¤§å€¼æˆ–æœ€å°å€¼&lt;/strong&gt;è¿™äº›ç‰¹æ®Šå€¼ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;æ ‘ç»“æ„ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¼˜ç‚¹ï¼šæ ‘ç»“æ„ç»¼åˆäº†ä¸Šè¿°ä¸‰ç§ç»“æ„çš„ä¼˜ç‚¹ï¼ŒåŒæ—¶ä¹Ÿå¼¥è¡¥äº†å®ƒä»¬å­˜åœ¨çš„ç¼ºç‚¹ï¼ˆè™½ç„¶æ•ˆç‡ä¸ä¸€å®šéƒ½æ¯”å®ƒä»¬é«˜ï¼‰ï¼Œæ¯”å¦‚æ ‘ç»“æ„ä¸­æ•°æ®éƒ½æ˜¯æœ‰åºçš„ï¼ŒæŸ¥æ‰¾æ•ˆç‡é«˜ï¼›ç©ºé—´åˆ©ç”¨ç‡é«˜ï¼›å¹¶ä¸”å¯ä»¥å¿«é€Ÿè·å–æœ€å¤§å€¼å’Œæœ€å°å€¼ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;æ€»çš„æ¥è¯´ï¼š&lt;strong&gt;æ¯ç§æ•°æ®ç»“æ„éƒ½æœ‰è‡ªå·±ç‰¹å®šçš„åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ ‘ç»“æ„ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;æ ‘ï¼ˆTreeï¼‰&lt;/strong&gt;:ç”± nï¼ˆn â‰¥ 0ï¼‰ä¸ªèŠ‚ç‚¹æ„æˆçš„&lt;strong&gt;æœ‰é™é›†åˆ&lt;/strong&gt;ã€‚å½“ n = 0 æ—¶ï¼Œç§°ä¸º&lt;strong&gt;ç©ºæ ‘&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å¯¹äºä»»ä¸€æ£µéç©ºæ ‘ï¼ˆn &amp;gt; 0ï¼‰ï¼Œå®ƒå…·å¤‡ä»¥ä¸‹æ€§è´¨ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æ•°ä¸­æœ‰ä¸€ä¸ªç§°ä¸º&lt;strong&gt;æ ¹ï¼ˆRootï¼‰&lt;/strong&gt;çš„ç‰¹æ®ŠèŠ‚ç‚¹ï¼Œç”¨ &lt;strong&gt;r&lt;/strong&gt; è¡¨ç¤ºï¼›&lt;/li&gt;
&lt;li&gt;å…¶ä½™èŠ‚ç‚¹å¯åˆ†ä¸º mï¼ˆm &amp;gt; 0ï¼‰ä¸ªäº’ä¸ç›¸äº¤çš„æœ‰é™é›†åˆ T~1~ï¼ŒT~2~ï¼Œ...ï¼ŒT~m~ï¼Œå…¶ä¸­æ¯ä¸ªé›†åˆæœ¬èº«åˆæ˜¯ä¸€æ£µæ ‘ï¼Œç§°ä¸ºåŸæ¥æ ‘çš„&lt;strong&gt;å­æ ‘ï¼ˆSubTreeï¼‰&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;æ ‘çš„å¸¸ç”¨æœ¯è¯­ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/3.png&quot; alt=&quot;image-20200229221126468&quot;/&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;èŠ‚ç‚¹çš„åº¦ï¼ˆDegreeï¼‰&lt;/strong&gt;ï¼šèŠ‚ç‚¹çš„&lt;strong&gt;å­æ ‘ä¸ªæ•°&lt;/strong&gt;ï¼Œæ¯”å¦‚èŠ‚ç‚¹Bçš„åº¦ä¸º2ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ‘çš„åº¦&lt;/strong&gt;ï¼šæ ‘çš„æ‰€æœ‰èŠ‚ç‚¹ä¸­&lt;strong&gt;æœ€å¤§çš„åº¦æ•°&lt;/strong&gt;ï¼Œå¦‚ä¸Šå›¾æ ‘çš„åº¦ä¸º2ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¶èŠ‚ç‚¹ï¼ˆLeafï¼‰&lt;/strong&gt;ï¼š&lt;strong&gt;åº¦ä¸º0çš„èŠ‚ç‚¹&lt;/strong&gt;ï¼ˆä¹Ÿç§°ä¸ºå¶å­èŠ‚ç‚¹ï¼‰ï¼Œå¦‚ä¸Šå›¾çš„Hï¼ŒIç­‰ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çˆ¶èŠ‚ç‚¹ï¼ˆParentï¼‰&lt;/strong&gt;ï¼šåº¦ä¸ä¸º0çš„èŠ‚ç‚¹ç§°ä¸ºçˆ¶èŠ‚ç‚¹ï¼Œå¦‚ä¸Šå›¾èŠ‚ç‚¹Bæ˜¯èŠ‚ç‚¹Då’ŒEçš„çˆ¶èŠ‚ç‚¹ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­èŠ‚ç‚¹ï¼ˆChildï¼‰&lt;/strong&gt;ï¼šè‹¥Bæ˜¯Dçš„çˆ¶èŠ‚ç‚¹ï¼Œé‚£ä¹ˆDå°±æ˜¯Bçš„å­èŠ‚ç‚¹ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…„å¼ŸèŠ‚ç‚¹ï¼ˆSiblingï¼‰&lt;/strong&gt;ï¼šå…·æœ‰åŒä¸€çˆ¶èŠ‚ç‚¹çš„å„èŠ‚ç‚¹å½¼æ­¤æ˜¯å…„å¼ŸèŠ‚ç‚¹ï¼Œæ¯”å¦‚ä¸Šå›¾çš„Bå’ŒCï¼ŒDå’ŒEäº’ä¸ºå…„å¼ŸèŠ‚ç‚¹ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·¯å¾„å’Œè·¯å¾„é•¿åº¦&lt;/strong&gt;ï¼šè·¯å¾„æŒ‡çš„æ˜¯ä¸€ä¸ªèŠ‚ç‚¹åˆ°å¦ä¸€èŠ‚ç‚¹çš„é€šé“ï¼Œè·¯å¾„æ‰€åŒ…å«è¾¹çš„ä¸ªæ•°ç§°ä¸ºè·¯å¾„é•¿åº¦ï¼Œæ¯”å¦‚A-&amp;gt;Hçš„è·¯å¾„é•¿åº¦ä¸º3ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;èŠ‚ç‚¹çš„å±‚æ¬¡ï¼ˆLevelï¼‰&lt;/strong&gt;ï¼šè§„å®š&lt;strong&gt;æ ¹èŠ‚ç‚¹åœ¨1å±‚&lt;/strong&gt;ï¼Œå…¶ä»–ä»»ä¸€èŠ‚ç‚¹çš„å±‚æ•°æ˜¯å…¶çˆ¶èŠ‚ç‚¹çš„&lt;strong&gt;å±‚æ•°åŠ 1&lt;/strong&gt;ã€‚å¦‚Bå’ŒCèŠ‚ç‚¹çš„å±‚æ¬¡ä¸º2ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ ‘çš„æ·±åº¦ï¼ˆDepthï¼‰&lt;/strong&gt;ï¼šæ ‘ç§æ‰€æœ‰èŠ‚ç‚¹ä¸­çš„&lt;strong&gt;æœ€å¤§å±‚æ¬¡&lt;/strong&gt;æ˜¯è¿™æ£µæ ‘çš„æ·±åº¦ï¼Œå¦‚ä¸Šå›¾æ ‘çš„æ·±åº¦ä¸º4ï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;h4 id=&quot;æ ‘ç»“æ„çš„è¡¨ç¤ºæ–¹å¼&quot;&gt;1.2.æ ‘ç»“æ„çš„è¡¨ç¤ºæ–¹å¼&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;æœ€æ™®é€šçš„è¡¨ç¤ºæ–¹æ³•&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/4.png&quot; alt=&quot;image-20200229230417613&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¦‚å›¾ï¼Œæ ‘ç»“æ„çš„ç»„æˆæ–¹å¼ç±»ä¼¼äºé“¾è¡¨ï¼Œéƒ½æ˜¯ç”±ä¸€ä¸ªä¸ªèŠ‚ç‚¹è¿æ¥æ„æˆã€‚ä¸è¿‡ï¼Œæ ¹æ®æ¯ä¸ªçˆ¶èŠ‚ç‚¹å­èŠ‚ç‚¹æ•°é‡çš„ä¸åŒï¼Œæ¯ä¸€ä¸ªçˆ¶èŠ‚ç‚¹éœ€è¦çš„å¼•ç”¨æ•°é‡ä¹Ÿä¸åŒã€‚æ¯”å¦‚èŠ‚ç‚¹Aéœ€è¦3ä¸ªå¼•ç”¨ï¼Œåˆ†åˆ«æŒ‡å‘å­èŠ‚ç‚¹Bï¼ŒCï¼ŒDï¼›BèŠ‚ç‚¹éœ€è¦2ä¸ªå¼•ç”¨ï¼Œåˆ†åˆ«æŒ‡å‘å­èŠ‚ç‚¹Eå’ŒFï¼›KèŠ‚ç‚¹ç”±äºæ²¡æœ‰å­èŠ‚ç‚¹ï¼Œæ‰€ä»¥ä¸éœ€è¦å¼•ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§æ–¹æ³•ç¼ºç‚¹åœ¨äºæˆ‘ä»¬æ— æ³•ç¡®å®šæŸä¸€ç»“ç‚¹çš„å¼•ç”¨æ•°ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;å„¿å­-å…„å¼Ÿè¡¨ç¤ºæ³•&lt;/strong&gt;ï¼š&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/5.png&quot; alt=&quot;image-20200229232805477&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿™ç§è¡¨ç¤ºæ–¹æ³•å¯ä»¥å®Œæ•´åœ°è®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„æ•°æ®ï¼Œæ¯”å¦‚ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;//èŠ‚ç‚¹A
Node{
  //å­˜å‚¨æ•°æ®
  this.data = data
  //ç»Ÿä¸€åªè®°å½•å·¦è¾¹çš„å­èŠ‚ç‚¹
  this.leftChild = B
  //ç»Ÿä¸€åªè®°å½•å³è¾¹çš„ç¬¬ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹
  this.rightSibling = null
}

//èŠ‚ç‚¹B
Node{
  this.data = data
  this.leftChild = E
  this.rightSibling = C
}

//èŠ‚ç‚¹F
Node{
  this.data = data
  this.leftChild = null
  this.rightSibling = null
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™ç§è¡¨ç¤ºæ³•çš„ä¼˜ç‚¹åœ¨äºæ¯ä¸€ä¸ªèŠ‚ç‚¹ä¸­å¼•ç”¨çš„æ•°é‡éƒ½æ˜¯ç¡®å®šçš„ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;å„¿å­-å…„å¼Ÿè¡¨ç¤ºæ³•æ—‹è½¬&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä»¥ä¸‹ä¸ºå„¿å­-å…„å¼Ÿè¡¨ç¤ºæ³•ç»„æˆçš„æ ‘ç»“æ„ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/6.png&quot; alt=&quot;image-20200229234549049&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å°†å…¶é¡ºæ—¶é’ˆæ—‹è½¬45Â°ä¹‹åï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/7.png&quot; alt=&quot;image-20200229235549522&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ ·å°±æˆä¸ºäº†ä¸€æ£µ&lt;strong&gt;äºŒå‰æ ‘&lt;/strong&gt;ï¼Œç”±æ­¤æˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼š&lt;strong&gt;ä»»ä½•æ ‘éƒ½å¯ä»¥é€šè¿‡äºŒå‰æ ‘è¿›è¡Œæ¨¡æ‹Ÿ&lt;/strong&gt;ã€‚ä½†æ˜¯è¿™æ ·çˆ¶èŠ‚ç‚¹ä¸æ˜¯å˜äº†å—ï¼Ÿå…¶å®ï¼Œçˆ¶èŠ‚ç‚¹çš„è®¾ç½®åªæ˜¯ä¸ºäº†æ–¹ä¾¿æŒ‡å‘å­èŠ‚ç‚¹ï¼Œåœ¨ä»£ç å®ç°ä¸­è°æ˜¯çˆ¶èŠ‚ç‚¹å¹¶æ²¡æœ‰å…³ç³»ï¼Œåªè¦èƒ½æ­£ç¡®æ‰¾åˆ°å¯¹åº”èŠ‚ç‚¹å³å¯ã€‚&lt;/p&gt;
&lt;h3 id=&quot;äºŒäºŒå‰æ ‘&quot;&gt;äºŒã€äºŒå‰æ ‘&lt;/h3&gt;
&lt;h4 id=&quot;äºŒå‰æ ‘ç®€ä»‹&quot;&gt;2.1.äºŒå‰æ ‘ç®€ä»‹&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;äºŒå‰æ ‘çš„æ¦‚å¿µ&lt;/strong&gt;ï¼šå¦‚æœæ ‘ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹æœ€å¤šåªèƒ½ç”±&lt;strong&gt;ä¸¤ä¸ªå­èŠ‚ç‚¹&lt;/strong&gt;ï¼Œè¿™æ ·çš„æ ‘å°±ç§°ä¸º&lt;strong&gt;äºŒå‰æ ‘&lt;/strong&gt;ï¼›&lt;/p&gt;
&lt;p&gt;äºŒå‰æ ‘ååˆ†é‡è¦ï¼Œä¸ä»…ä»…æ˜¯å› ä¸ºç®€å•ï¼Œæ›´æ˜¯å› ä¸ºå‡ ä¹æ‰€æœ‰çš„æ ‘éƒ½å¯ä»¥è¡¨ç¤ºæˆäºŒå‰æ ‘å½¢å¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;äºŒå‰æ ‘çš„ç»„æˆ&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;äºŒå‰æ ‘å¯ä»¥ä¸ºç©ºï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰èŠ‚ç‚¹ï¼›&lt;/li&gt;
&lt;li&gt;è‹¥äºŒå‰æ ‘ä¸ä¸ºç©ºï¼Œåˆ™å®ƒç”±æ ¹èŠ‚ç‚¹å’Œç§°ä¸ºå…¶å·¦å­æ ‘TLå’Œå³å­æ ‘TRçš„ä¸¤ä¸ªä¸ç›¸äº¤çš„äºŒå‰æ ‘ç»„æˆï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;äºŒå‰æ ‘çš„äº”ç§å½¢æ€&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/8.png&quot; alt=&quot;image-20200301001718079&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šå›¾åˆ†åˆ«è¡¨ç¤ºï¼šç©ºçš„äºŒå‰æ ‘ã€åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹çš„äºŒå‰æ ‘ã€åªæœ‰å·¦å­æ ‘TLçš„äºŒå‰æ ‘ã€åªæœ‰å³å­æ ‘TRçš„äºŒå‰æ ‘å’Œæœ‰å·¦å³ä¸¤ä¸ªå­æ ‘çš„äºŒå‰æ ‘ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;äºŒå‰æ ‘çš„ç‰¹æ€§&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä¸€ä¸ªäºŒå‰æ ‘çš„ç¬¬ i å±‚çš„æœ€å¤§èŠ‚ç‚¹æ ‘ä¸ºï¼š2^(i-1)^ï¼Œi &amp;gt;= 1ï¼›&lt;/li&gt;
&lt;li&gt;æ·±åº¦ä¸ºkçš„äºŒå‰æ ‘çš„æœ€å¤§èŠ‚ç‚¹æ€»æ•°ä¸ºï¼š2^k^ - 1 ï¼Œk &amp;gt;= 1ï¼›&lt;/li&gt;
&lt;li&gt;å¯¹ä»»ä½•éç©ºäºŒå‰æ ‘ï¼Œè‹¥ n~0~ è¡¨ç¤ºå¶å­èŠ‚ç‚¹çš„ä¸ªæ•°ï¼Œn~2~è¡¨ç¤ºåº¦ä¸º2çš„éå¶å­èŠ‚ç‚¹ä¸ªæ•°ï¼Œé‚£ä¹ˆä¸¤è€…æ»¡è¶³å…³ç³»ï¼šn~0~ = n~2~ + 1ï¼›å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šHï¼ŒEï¼ŒIï¼ŒJï¼ŒGä¸ºå¶å­èŠ‚ç‚¹ï¼Œæ€»æ•°ä¸º5ï¼›Aï¼ŒBï¼ŒCï¼ŒFä¸ºåº¦ä¸º2çš„éå¶å­èŠ‚ç‚¹ï¼Œæ€»æ•°ä¸º4ï¼›æ»¡è¶³n~0~ = n~2~ + 1çš„è§„å¾‹ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/9.png&quot; alt=&quot;image-20200301092140211&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;ç‰¹æ®Šçš„äºŒå‰æ ‘&quot;&gt;2.2.ç‰¹æ®Šçš„äºŒå‰æ ‘&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;å®Œç¾äºŒå‰æ ‘&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å®Œç¾äºŒå‰æ ‘ï¼ˆPerfect Binary Treeï¼‰ä¹Ÿæˆä¸ºæ»¡äºŒå‰æ ‘ï¼ˆFull Binary Treeï¼‰ï¼Œåœ¨äºŒå‰æ ‘ä¸­ï¼Œé™¤äº†æœ€ä¸‹ä¸€å±‚çš„å¶å­èŠ‚ç‚¹å¤–ï¼Œæ¯å±‚èŠ‚ç‚¹éƒ½æœ‰2ä¸ªå­èŠ‚ç‚¹ï¼Œè¿™å°±æ„æˆäº†å®Œç¾äºŒå‰æ ‘ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/10.png&quot; alt=&quot;image-20200301093237681&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®Œå…¨äºŒå‰æ ‘&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å®Œå…¨äºŒå‰æ ‘ï¼ˆComplete Binary Treeï¼‰:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;é™¤äº†äºŒå‰æ ‘æœ€åä¸€å±‚å¤–ï¼Œå…¶ä»–å„å±‚çš„èŠ‚ç‚¹æ•°éƒ½è¾¾åˆ°äº†æœ€å¤§å€¼ï¼›&lt;/li&gt;
&lt;li&gt;å¹¶ä¸”ï¼Œæœ€åä¸€å±‚çš„å¶å­èŠ‚ç‚¹ä»å·¦å‘å³æ˜¯è¿ç»­å­˜åœ¨ï¼Œåªç¼ºå¤±å³ä¾§è‹¥å¹²å¶å­èŠ‚ç‚¹ï¼›&lt;/li&gt;
&lt;li&gt;å®Œç¾äºŒå‰æ ‘æ˜¯ç‰¹æ®Šçš„å®Œå…¨äºŒå‰æ ‘ï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/11.png&quot; alt=&quot;image-20200301093659373&quot;/&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ä¸Šå›¾ä¸­ï¼Œç”±äºHç¼ºå¤±äº†å³å­èŠ‚ç‚¹ï¼Œæ‰€ä»¥å®ƒä¸æ˜¯å®Œå…¨äºŒå‰æ ‘ã€‚&lt;/p&gt;
&lt;h4 id=&quot;äºŒå‰æ ‘çš„æ•°æ®å­˜å‚¨&quot;&gt;2.3.äºŒå‰æ ‘çš„æ•°æ®å­˜å‚¨&lt;/h4&gt;
&lt;p&gt;å¸¸è§çš„äºŒå‰æ ‘å­˜å‚¨æ–¹å¼ä¸º&lt;strong&gt;æ•°ç»„&lt;/strong&gt;å’Œ&lt;strong&gt;é“¾è¡¨&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨æ•°ç»„ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;å®Œå…¨äºŒå‰æ ‘&lt;/strong&gt;ï¼šæŒ‰ä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦åˆ°å³çš„æ–¹å¼å­˜å‚¨æ•°æ®ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/12.png&quot; alt=&quot;image-20200301094919588&quot;/&gt;&lt;/p&gt;
&lt;table&gt;&lt;thead/&gt;&lt;tbody&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;&lt;strong&gt;åºå·&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;2&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;3&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;4&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;5&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;6&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;7&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;8&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;ä½¿ç”¨æ•°ç»„å­˜å‚¨æ—¶ï¼Œå–æ•°æ®çš„æ—¶å€™ä¹Ÿååˆ†æ–¹ä¾¿ï¼šå·¦å­èŠ‚ç‚¹çš„åºå·ç­‰äºçˆ¶èŠ‚ç‚¹åºå· * 2ï¼Œå³å­èŠ‚ç‚¹çš„åºå·ç­‰äºçˆ¶èŠ‚ç‚¹åºå· * 2 + 1 ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;éå®Œå…¨äºŒå‰æ ‘&lt;/strong&gt;ï¼šéå®Œå…¨äºŒå‰æ ‘éœ€è¦è½¬æ¢æˆå®Œå…¨äºŒå‰æ ‘æ‰èƒ½æŒ‰ç…§ä¸Šé¢çš„æ–¹æ¡ˆå­˜å‚¨ï¼Œè¿™æ ·ä¼šæµªè´¹å¾ˆå¤§çš„å­˜å‚¨ç©ºé—´ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/13.png&quot; alt=&quot;image-20200301100043636&quot;/&gt;&lt;/p&gt;
&lt;table&gt;&lt;thead/&gt;&lt;tbody&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;&lt;strong&gt;åºå·&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;2&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;3&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;4&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;5&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;6&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;7&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;8&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;9&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;10&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;11&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;12&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;13&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;ä½¿ç”¨é“¾è¡¨&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;äºŒå‰æ ‘æœ€å¸¸è§çš„å­˜å‚¨æ–¹å¼ä¸º&lt;strong&gt;é“¾è¡¨&lt;/strong&gt;ï¼šæ¯ä¸€ä¸ªèŠ‚ç‚¹å°è£…æˆä¸€ä¸ªNodeï¼ŒNodeä¸­åŒ…å«å­˜å‚¨çš„æ•°æ®ã€å·¦èŠ‚ç‚¹çš„å¼•ç”¨å’Œå³èŠ‚ç‚¹çš„å¼•ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/14.png&quot; alt=&quot;image-20200301100616105&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;ä¸‰äºŒå‰æœç´¢æ ‘&quot;&gt;ä¸‰ã€äºŒå‰æœç´¢æ ‘&lt;/h3&gt;
&lt;h4 id=&quot;è®¤è¯†äºŒå‰æœç´¢æ ‘&quot;&gt;3.1.è®¤è¯†äºŒå‰æœç´¢æ ‘&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;äºŒå‰æœç´¢æ ‘&lt;/strong&gt;ï¼ˆ&lt;strong&gt;BST&lt;/strong&gt;ï¼ŒBinary Search Treeï¼‰ï¼Œä¹Ÿç§°ä¸º&lt;strong&gt;äºŒå‰æ’åºæ ‘&lt;/strong&gt;å’Œ&lt;strong&gt;äºŒå‰æŸ¥æ‰¾æ ‘&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;äºŒå‰æœç´¢æ ‘æ˜¯ä¸€æ£µäºŒå‰æ ‘ï¼Œå¯ä»¥ä¸ºç©ºï¼›&lt;/p&gt;
&lt;p&gt;å¦‚æœä¸ä¸ºç©ºï¼Œåˆ™æ»¡è¶³ä»¥ä¸‹&lt;strong&gt;æ€§è´¨&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æ¡ä»¶1ï¼šéç©ºå·¦å­æ ‘çš„&lt;strong&gt;æ‰€æœ‰&lt;/strong&gt;é”®å€¼&lt;strong&gt;å°äº&lt;/strong&gt;å…¶æ ¹èŠ‚ç‚¹çš„é”®å€¼ã€‚æ¯”å¦‚ä¸‰ä¸­èŠ‚ç‚¹6çš„æ‰€æœ‰éç©ºå·¦å­æ ‘çš„é”®å€¼éƒ½å°äº6ï¼›&lt;/li&gt;
&lt;li&gt;æ¡ä»¶2ï¼šéç©ºå³å­æ ‘çš„&lt;strong&gt;æ‰€æœ‰&lt;/strong&gt;é”®å€¼&lt;strong&gt;å¤§äº&lt;/strong&gt;å…¶æ ¹èŠ‚ç‚¹çš„é”®å€¼ï¼›æ¯”å¦‚ä¸‰ä¸­èŠ‚ç‚¹6çš„æ‰€æœ‰éç©ºå³å­æ ‘çš„é”®å€¼éƒ½å¤§äº6ï¼›&lt;/li&gt;
&lt;li&gt;æ¡ä»¶3ï¼šå·¦ã€å³å­æ ‘æœ¬èº«ä¹Ÿéƒ½æ˜¯äºŒå‰æœç´¢æ ‘ï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/15.png&quot; alt=&quot;image-20200301103139916&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ ‘äºŒå’Œæ ‘ä¸‰ç¬¦åˆ3ä¸ªæ¡ä»¶å±äºäºŒå‰æ ‘ï¼Œæ ‘ä¸€ä¸æ»¡è¶³æ¡ä»¶3æ‰€ä»¥ä¸æ˜¯äºŒå‰æ ‘ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ€»ç»“ï¼š&lt;/strong&gt;äºŒå‰æœç´¢æ ‘çš„ç‰¹ç‚¹ä¸»è¦æ˜¯&lt;strong&gt;è¾ƒå°çš„å€¼&lt;/strong&gt;æ€»æ˜¯ä¿å­˜åœ¨&lt;strong&gt;å·¦èŠ‚ç‚¹&lt;/strong&gt;ä¸Šï¼Œç›¸å¯¹&lt;strong&gt;è¾ƒå¤§çš„å€¼&lt;/strong&gt;æ€»æ˜¯ä¿å­˜åœ¨&lt;strong&gt;å³èŠ‚ç‚¹&lt;/strong&gt;ä¸Šã€‚è¿™ç§ç‰¹ç‚¹ä½¿å¾—äºŒå‰æœç´¢æ ‘çš„æŸ¥è¯¢æ•ˆç‡éå¸¸é«˜ï¼Œè¿™ä¹Ÿå°±æ˜¯äºŒå‰æœç´¢æ ‘ä¸­&quot;æœç´¢&quot;çš„æ¥æºã€‚&lt;/p&gt;
&lt;h4 id=&quot;äºŒå‰æœç´¢æ ‘åº”ç”¨ä¸¾ä¾‹&quot;&gt;3.2.äºŒå‰æœç´¢æ ‘åº”ç”¨ä¸¾ä¾‹&lt;/h4&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä¸€ä¸ªäºŒå‰æœç´¢æ ‘ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/16.png&quot; alt=&quot;image-20200301111718686&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è‹¥æƒ³åœ¨å…¶ä¸­æŸ¥æ‰¾æ•°æ®10ï¼Œåªéœ€è¦æŸ¥æ‰¾4æ¬¡ï¼ŒæŸ¥æ‰¾æ•ˆç‡éå¸¸é«˜ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ç¬¬1æ¬¡ï¼šå°†10ä¸æ ¹èŠ‚ç‚¹9è¿›è¡Œæ¯”è¾ƒï¼Œç”±äº10 &amp;gt; 9ï¼Œæ‰€ä»¥10ä¸‹ä¸€æ­¥ä¸æ ¹èŠ‚ç‚¹9çš„å³å­èŠ‚ç‚¹13æ¯”è¾ƒï¼›&lt;/li&gt;
&lt;li&gt;ç¬¬2æ¬¡ï¼šç”±äº10 &amp;lt; 13ï¼Œæ‰€ä»¥10ä¸‹ä¸€æ­¥ä¸çˆ¶èŠ‚ç‚¹13çš„å·¦å­èŠ‚ç‚¹11æ¯”è¾ƒï¼›&lt;/li&gt;
&lt;li&gt;ç¬¬3æ¬¡ï¼šç”±äº10 &amp;lt; 11ï¼Œæ‰€ä»¥10ä¸‹ä¸€æ­¥ä¸çˆ¶èŠ‚ç‚¹11çš„å·¦å­èŠ‚ç‚¹10æ¯”è¾ƒï¼›&lt;/li&gt;
&lt;li&gt;ç¬¬4æ¬¡ï¼šç”±äº10 = 10ï¼Œæœ€ç»ˆæŸ¥æ‰¾åˆ°æ•°æ®10 ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/17.png&quot; alt=&quot;image-20200301111751041&quot;/&gt;åŒæ ·æ˜¯15ä¸ªæ•°æ®ï¼Œåœ¨æ’åºå¥½çš„æ•°ç»„ä¸­æŸ¥è¯¢æ•°æ®10ï¼Œéœ€è¦æŸ¥è¯¢10æ¬¡ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/18.png&quot; alt=&quot;image-20200301115348138&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å…¶å®ï¼šå¦‚æœæ˜¯æ’åºå¥½çš„æ•°ç»„ï¼Œå¯ä»¥é€šè¿‡äºŒåˆ†æŸ¥æ‰¾ï¼šç¬¬ä¸€æ¬¡æ‰¾9ï¼Œç¬¬äºŒæ¬¡æ‰¾13ï¼Œç¬¬ä¸‰æ¬¡æ‰¾15...ã€‚æˆ‘ä»¬å‘ç°å¦‚æœæŠŠæ¯æ¬¡äºŒåˆ†çš„æ•°æ®æ‹¿å‡ºæ¥ä»¥æ ‘çš„å½¢å¼è¡¨ç¤ºçš„è¯å°±æ˜¯&lt;strong&gt;äºŒå‰æœç´¢æ ‘&lt;/strong&gt;ã€‚è¿™å°±æ˜¯æ•°ç»„äºŒåˆ†æ³•æŸ¥æ‰¾æ•ˆç‡ä¹‹æ‰€ä»¥é«˜çš„åŸå› ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;1.6304347826087&quot;&gt;
&lt;p&gt;å‚è€ƒèµ„æ–™ï¼š&lt;a href=&quot;https://www.bilibili.com/video/av86801505?from=search&amp;amp;seid=4967761411915016256&quot;&gt;JavaScriptæ•°æ®ç»“æ„ä¸ç®—æ³•&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
<pubDate>Mon, 09 Mar 2020 00:15:00 +0000</pubDate>
<dc:creator>AhuntSun</dc:creator>
<og:description>JavaScriptå®ç°æ ‘ç»“æ„ï¼ˆä¸€ï¼‰ ä¸€ã€æ ‘ç»“æ„ç®€ä»‹ 1.1.ç®€å•äº†è§£æ ‘ç»“æ„ ä»€ä¹ˆæ˜¯æ ‘ï¼Ÿ çœŸå®çš„æ ‘ï¼š æ ‘çš„ç‰¹ç‚¹ï¼š æ ‘ä¸€èˆ¬éƒ½æœ‰ä¸€ä¸ª æ ¹ ï¼Œè¿æ¥ç€æ ¹çš„æ˜¯ æ ‘å¹² ï¼› æ ‘å¹²ä¼šå‘ç”Ÿåˆ†å‰ï¼Œå½¢æˆè®¸å¤š æ ‘æ ï¼Œæ ‘æä¼š</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/AhuntSun-blog/p/12446656.html</dc:identifier>
</item>
<item>
<title>ç¼–ç¨‹è€å¸æœºå¸¦ä½ ç©è½¬ CompletableFuture å¼‚æ­¥ç¼–ç¨‹ - æ¥¼ä¸‹å°é»‘å“¥</title>
<link>http://www.cnblogs.com/goodAndyxublog/p/12446644.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/goodAndyxublog/p/12446644.html</guid>
<description>&lt;p&gt;helloï¼Œå„ä½å°ä¼™ä¼´ä»¬æ—©ä¸Šå¥½ï¼Œä»Šå¤©ç»™å¤§å®¶åˆ†äº«ä¸€ç¯‡å…³äºä½¿ç”¨ CompletableFuture è¿›è¡Œå¼‚æ­¥ç¼–ç¨‹çš„æ–‡ç« ã€‚ CompletableFuture è¿™ä¸ªç±»åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œæ”¯æŒå›è°ƒæ–¹å¼å¤„ç†ä»»åŠ¡ç»“æœï¼Œå¹¶ä¸”æ”¯æŒç¼–æ’å¼‚æ­¥ä»»åŠ¡ï¼Œå®Œæˆä¸€äº›éœ€è¦éœ€è¦ç›¸äº’ä¾èµ–ç»„åˆä»»åŠ¡ã€‚ ä½†æ˜¯äº‹ç‰©éƒ½æœ‰ä¸¤é¢æ€§ï¼ŒCompletableFuture éå¸¸å¤æ‚ï¼Œå…¶æ‹¥æœ‰ 50 å¤šä¸ªæ–¹æ³•ï¼Œä½¿ç”¨éš¾åº¦ç¨å¤§ã€‚ æœ¬æ–‡ä»è¿™ç‚¹å‡ºå‘ï¼Œå½’çº³åˆ†ç±»è¿™äº›æ–¹æ³•ï¼Œå¹¶ä¸”å¢åŠ å¤§é‡çš„ä»£ç ç¤ºä¾‹ï¼Œå¸®æ‰“å¤§å®¶çœ‹å®Œè¿™ç¯‡æ–‡ç« å°±ç†è§£ CompletableFuture ä½¿ç”¨æ–¹æ³•ã€‚ å˜¿å˜¿ï¼Œèµ¶ç´§ç‚¹è¿›æ¥ç…ç…ï¼Œé¡ºä¾¿ç‚¹ä¸ªèµå‘—~&lt;/p&gt;&lt;div id=&quot;cnblogs_post_body&quot; readability=&quot;278.23955735661&quot;&gt;
&lt;p&gt;æœ¬æ–‡ä»å®ä¾‹å‡ºå‘ï¼Œä»‹ç» &lt;code&gt;CompletableFuture&lt;/code&gt; åŸºæœ¬ç”¨æ³•ã€‚ä¸è¿‡è®²çš„å†å¤šï¼Œä¸å¦‚äº²è‡ªä¸Šæ‰‹ç»ƒä¹ ä¸€ä¸‹ã€‚æ‰€ä»¥å»ºè®®å„ä½å°ä¼™ä¼´çœ‹å®Œï¼Œä¸Šæœºç»ƒä¹ ä¸€æŠŠï¼Œå¿«é€ŸæŒæ¡ &lt;code&gt;CompletableFuture&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;ä¸ªäººåšæ–‡åœ°å€ï¼šhttps://sourl.cn/s5MbCm&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;å…¨æ–‡æ‘˜è¦ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;Future&lt;/code&gt; VS &lt;code&gt;CompletableFuture&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;CompletableFuture&lt;/code&gt; åŸºæœ¬ç”¨æ³•&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;x00.-å‰è¨€&quot;&gt;0x00. å‰è¨€&lt;/h2&gt;
&lt;p&gt;ä¸€äº›ä¸šåŠ¡åœºæ™¯æˆ‘ä»¬éœ€è¦ä½¿ç”¨å¤šçº¿ç¨‹å¼‚æ­¥æ‰§è¡Œä»»åŠ¡ï¼ŒåŠ å¿«ä»»åŠ¡æ‰§è¡Œé€Ÿåº¦ã€‚ Java æä¾› &lt;code&gt;Runnable&lt;/code&gt; &lt;code&gt;Future&amp;lt;V&amp;gt;&lt;/code&gt; ä¸¤ä¸ªæ¥å£ç”¨æ¥å®ç°å¼‚æ­¥ä»»åŠ¡é€»è¾‘ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶ &lt;code&gt;Future&amp;lt;V&amp;gt;&lt;/code&gt; å¯ä»¥è·å–ä»»åŠ¡æ‰§è¡Œç»“æœï¼Œä½†æ˜¯è·å–æ–¹å¼åæ–¹ä¸å˜ã€‚æˆ‘ä»¬ä¸å¾—ä¸ä½¿ç”¨&lt;code&gt;Future#get&lt;/code&gt; é˜»å¡è°ƒç”¨çº¿ç¨‹ï¼Œæˆ–è€…ä½¿ç”¨è½®è¯¢æ–¹å¼åˆ¤æ–­ &lt;code&gt;Future#isDone&lt;/code&gt; ä»»åŠ¡æ˜¯å¦ç»“æŸï¼Œå†è·å–ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸¤ç§å¤„ç†æ–¹å¼éƒ½ä¸æ˜¯å¾ˆä¼˜é›…ï¼ŒJDK8 ä¹‹å‰å¹¶å‘ç±»åº“æ²¡æœ‰æä¾›ç›¸å…³çš„å¼‚æ­¥å›è°ƒå®ç°æ–¹å¼ã€‚æ²¡åŠæ³•ï¼Œæˆ‘ä»¬åªå¥½å€ŸåŠ©ç¬¬ä¸‰æ–¹ç±»åº“ï¼Œå¦‚ &lt;code&gt;Guava&lt;/code&gt;ï¼Œæ‰©å±• &lt;code&gt;Future&lt;/code&gt;ï¼Œå¢åŠ æ”¯æŒå›è°ƒåŠŸèƒ½ã€‚ç›¸å…³ä»£ç å¦‚ä¸‹:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202003/1419561-20200309080830077-1051350991.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è™½ç„¶è¿™ç§æ–¹å¼å¢å¼ºäº† Java å¼‚æ­¥ç¼–ç¨‹èƒ½åŠ›ï¼Œä½†æ˜¯è¿˜æ˜¯æ— æ³•è§£å†³å¤šä¸ªå¼‚æ­¥ä»»åŠ¡éœ€è¦ç›¸äº’ä¾èµ–çš„åœºæ™¯ã€‚&lt;/p&gt;
&lt;p&gt;ä¸¾ä¸€ä¸ªç”Ÿæ´»ä¸Šçš„ä¾‹å­ï¼Œå‡å¦‚æˆ‘ä»¬éœ€è¦å‡ºå»æ—…æ¸¸ï¼Œéœ€è¦å®Œæˆä¸‰ä¸ªä»»åŠ¡ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä»»åŠ¡ä¸€ï¼šè®¢è´­èˆªç­&lt;/li&gt;
&lt;li&gt;ä»»åŠ¡äºŒï¼šè®¢è´­é…’åº—&lt;/li&gt;
&lt;li&gt;ä»»åŠ¡ä¸‰ï¼šè®¢è´­ç§Ÿè½¦æœåŠ¡&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å¾ˆæ˜¾ç„¶ä»»åŠ¡ä¸€å’Œä»»åŠ¡äºŒæ²¡æœ‰ç›¸å…³æ€§ï¼Œå¯ä»¥å•ç‹¬æ‰§è¡Œã€‚ä½†æ˜¯ä»»åŠ¡ä¸‰å¿…é¡»ç­‰å¾…ä»»åŠ¡ä¸€ä¸ä»»åŠ¡äºŒç»“æŸä¹‹åï¼Œæ‰èƒ½è®¢è´­ç§Ÿè½¦æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ä½¿ä»»åŠ¡ä¸‰æ—¶æ‰§è¡Œæ—¶èƒ½è·å–åˆ°ä»»åŠ¡ä¸€ä¸ä»»åŠ¡äºŒæ‰§è¡Œç»“æœï¼Œæˆ‘ä»¬è¿˜éœ€è¦å€ŸåŠ© &lt;code&gt;CountDownLatch&lt;/code&gt; ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202003/1419561-20200309080830337-1137184891.jpg&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;x01.-completablefuture&quot;&gt;0x01. CompletableFuture&lt;/h2&gt;
&lt;p&gt;JDK8 ä¹‹åï¼ŒJava æ–°å¢ä¸€ä¸ªåŠŸèƒ½ååˆ†å¼ºå¤§çš„ç±»ï¼š&lt;code&gt;CompletableFuture&lt;/code&gt;ã€‚å•ç‹¬ä½¿ç”¨è¿™ä¸ªç±»å°±å¯ä»¥è½»æ¾çš„å®Œæˆä¸Šé¢çš„éœ€æ±‚:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202003/1419561-20200309080830551-292151003.jpg&quot;/&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;å¤§å®¶å¯ä»¥å…ˆä¸ç”¨ç®¡ &lt;code&gt;CompletableFuture&lt;/code&gt; ç›¸å…³ &lt;code&gt;API&lt;/code&gt;ï¼Œä¸‹é¢å°†ä¼šå…·ä½“è®²è§£ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¯¹æ¯” &lt;code&gt;Future&amp;lt;V&amp;gt;&lt;/code&gt;ï¼Œ&lt;code&gt;CompletableFuture&lt;/code&gt; ä¼˜ç‚¹åœ¨äºï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä¸éœ€è¦æ‰‹å·¥åˆ†é…çº¿ç¨‹ï¼ŒJDK è‡ªåŠ¨åˆ†é…&lt;/li&gt;
&lt;li&gt;ä»£ç è¯­ä¹‰æ¸…æ™°ï¼Œå¼‚æ­¥ä»»åŠ¡é“¾å¼è°ƒç”¨&lt;/li&gt;
&lt;li&gt;æ”¯æŒç¼–æ’å¼‚æ­¥ä»»åŠ¡&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯åŠŸèƒ½å¾ˆå¼ºå¤§ï¼Ÿæ¥ä¸‹æ¥æŠ“ç¨³äº†ï¼Œå°é»‘å“¥è¦å‘è½¦äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202003/1419561-20200309080830724-1604495668.gif&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;æ–¹æ³•ä¸€è§ˆ&quot;&gt;1.1 æ–¹æ³•ä¸€è§ˆ&lt;/h3&gt;
&lt;p&gt;é¦–å…ˆæ¥é€šè¿‡ IDE æŸ¥çœ‹ä¸‹è¿™ä¸ªç±»æä¾›çš„æ–¹æ³•ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202003/1419561-20200309080831082-1756910796.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç¨å¾®æ•°ä¸€ä¸‹ï¼Œè¿™ä¸ªç±»æ€»å…±æœ‰ 50 å¤šä¸ªæ–¹æ³•ï¼Œæˆ‘çš„å¤©ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202003/1419561-20200309080831448-721706481.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¸è¿‡ä¹Ÿä¸è¦æ€•ï¼Œå°é»‘å“¥å¸®ä½ ä»¬å½’çº³å¥½äº†ï¼Œè·Ÿç€å°é»‘å“¥çš„èŠ‚å¥ï¼Œå¸¦ä½ ä»¬æŒæ¡ &lt;code&gt;CompletableFuture&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;è‹¥å›¾ç‰‡ä¸æ¸…æ™°ï¼Œå¯ä»¥å…³æ³¨ã€ç¨‹åºé€šäº‹ã€ï¼Œå›å¤ï¼šã€233ã€ï¼Œè·å–è¯¥æ€ç»´å¯¼å›¾&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202003/1419561-20200309080831612-327784688.jpg&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;åˆ›å»º-completablefuture-å®ä¾‹&quot;&gt;1.2 åˆ›å»º CompletableFuture å®ä¾‹&lt;/h3&gt;
&lt;p&gt;åˆ›å»º &lt;code&gt;CompletableFuture&lt;/code&gt; å¯¹è±¡å®ä¾‹æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‡ ä¸ªæ–¹æ³•ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202003/1419561-20200309080831833-1895207835.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€ä¸ªæ–¹æ³•åˆ›å»ºä¸€ä¸ªå…·æœ‰é»˜è®¤ç»“æœçš„ &lt;code&gt;CompletableFuture&lt;/code&gt;ï¼Œè¿™ä¸ªæ²¡å•¥å¥½è®²ã€‚æˆ‘ä»¬é‡ç‚¹è®²è¿°ä¸‹ä¸‹é¢å››ä¸ªå¼‚æ­¥æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;å‰ä¸¤ä¸ªæ–¹æ³• &lt;code&gt;runAsync&lt;/code&gt; ä¸æ”¯æŒè¿”å›å€¼ï¼Œè€Œ &lt;code&gt;supplyAsync&lt;/code&gt;å¯ä»¥æ”¯æŒè¿”å›ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªä¸¤ä¸ªæ–¹æ³•é»˜è®¤å°†ä¼šä½¿ç”¨å…¬å…±çš„ &lt;code&gt;ForkJoinPool&lt;/code&gt; çº¿ç¨‹æ± æ‰§è¡Œï¼Œè¿™ä¸ªçº¿ç¨‹æ± é»˜è®¤çº¿ç¨‹æ•°æ˜¯ &lt;strong&gt;CPU&lt;/strong&gt; çš„æ ¸æ•°ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;å¯ä»¥è®¾ç½® JVM option:-Djava.util.concurrent.ForkJoinPool.common.parallelism æ¥è®¾ç½® ForkJoinPool çº¿ç¨‹æ± çš„çº¿ç¨‹æ•°&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä½¿ç”¨å…±äº«çº¿ç¨‹æ± å°†ä¼šæœ‰ä¸ªå¼Šç«¯ï¼Œä¸€æ—¦æœ‰ä»»åŠ¡è¢«é˜»å¡ï¼Œå°†ä¼šé€ æˆå…¶ä»–ä»»åŠ¡æ²¡æœºä¼šæ‰§è¡Œã€‚æ‰€ä»¥&lt;strong&gt;å¼ºçƒˆ&lt;/strong&gt;å»ºè®®ä½¿ç”¨åä¸¤ä¸ªæ–¹æ³•ï¼Œæ ¹æ®ä»»åŠ¡ç±»å‹ä¸åŒï¼Œä¸»åŠ¨åˆ›å»ºçº¿ç¨‹æ± ï¼Œè¿›è¡Œèµ„æºéš”ç¦»ï¼Œé¿å…äº’ç›¸å¹²æ‰°ã€‚&lt;/p&gt;
&lt;h3 id=&quot;è®¾ç½®ä»»åŠ¡ç»“æœ&quot;&gt;1.3 è®¾ç½®ä»»åŠ¡ç»“æœ&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;CompletableFuture&lt;/code&gt; æä¾›ä»¥ä¸‹æ–¹æ³•ï¼Œå¯ä»¥ä¸»åŠ¨è®¾ç½®ä»»åŠ¡ç»“æœã€‚&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt; boolean complete(T value)
 boolean completeExceptionally(Throwable ex)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç¬¬ä¸€ä¸ªæ–¹æ³•ï¼Œä¸»åŠ¨è®¾ç½® &lt;code&gt;CompletableFuture&lt;/code&gt; ä»»åŠ¡æ‰§è¡Œç»“æœï¼Œè‹¥è¿”å› &lt;code&gt;true&lt;/code&gt;ï¼Œè¡¨ç¤ºè®¾ç½®æˆåŠŸã€‚å¦‚æœè¿”å› &lt;code&gt;false&lt;/code&gt;ï¼Œè®¾ç½®å¤±è´¥ï¼Œè¿™æ˜¯å› ä¸ºä»»åŠ¡å·²ç»æ‰§è¡Œç»“æŸï¼Œå·²ç»æœ‰äº†æ‰§è¡Œç»“æœã€‚&lt;/p&gt;
&lt;p&gt;ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;// æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡
CompletableFuture cf = CompletableFuture.supplyAsync(() -&amp;gt; {
  System.out.println(&quot;cf ä»»åŠ¡æ‰§è¡Œå¼€å§‹&quot;);
  sleep(10, TimeUnit.SECONDS);
  System.out.println(&quot;cf ä»»åŠ¡æ‰§è¡Œç»“æŸ&quot;);
  return &quot;æ¥¼ä¸‹å°é»‘å“¥&quot;;
});
//
Executors.newSingleThreadScheduledExecutor().execute(() -&amp;gt; {
  sleep(5, TimeUnit.SECONDS);
  System.out.println(&quot;ä¸»åŠ¨è®¾ç½® cf ä»»åŠ¡ç»“æœ&quot;);
  // è®¾ç½®ä»»åŠ¡ç»“æœï¼Œç”±äº cf ä»»åŠ¡æœªæ‰§è¡Œç»“æŸï¼Œç»“æœè¿”å› true
  cf.complete(&quot;ç¨‹åºé€šäº‹&quot;);
});
// ç”±äº cf æœªæ‰§è¡Œç»“æŸï¼Œå°†ä¼šè¢«é˜»å¡ã€‚5 ç§’åï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹ä¸»åŠ¨è®¾ç½®ä»»åŠ¡ç»“æœ
System.out.println(&quot;get:&quot; + cf.get());
// ç­‰å¾… cf ä»»åŠ¡æ‰§è¡Œç»“æŸ
sleep(10, TimeUnit.SECONDS);
// ç”±äºå·²ç»è®¾ç½®ä»»åŠ¡ç»“æœï¼Œcf æ‰§è¡Œç»“æŸä»»åŠ¡ç»“æœå°†ä¼šè¢«æŠ›å¼ƒ
System.out.println(&quot;get:&quot; + cf.get());
/***
   * cf ä»»åŠ¡æ‰§è¡Œå¼€å§‹
   * ä¸»åŠ¨è®¾ç½® cf ä»»åŠ¡ç»“æœ
   * get:ç¨‹åºé€šäº‹
   * cf ä»»åŠ¡æ‰§è¡Œç»“æŸ
   * get:ç¨‹åºé€šäº‹
*/&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œä¸€æ—¦ &lt;code&gt;complete&lt;/code&gt; è®¾ç½®æˆåŠŸï¼Œ&lt;code&gt;CompletableFuture&lt;/code&gt; è¿”å›ç»“æœå°±ä¸ä¼šè¢«æ›´æ”¹ï¼Œå³ä½¿åç»­ &lt;code&gt;CompletableFuture&lt;/code&gt; ä»»åŠ¡æ‰§è¡Œç»“æŸã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒä¸ªæ–¹æ³•ï¼Œç»™ &lt;code&gt;CompletableFuture&lt;/code&gt; è®¾ç½®å¼‚å¸¸å¯¹è±¡ã€‚è‹¥è®¾ç½®æˆåŠŸï¼Œå¦‚æœè°ƒç”¨ &lt;code&gt;get&lt;/code&gt; ç­‰æ–¹æ³•è·å–ç»“æœï¼Œå°†ä¼šæŠ›é”™ã€‚&lt;/p&gt;
&lt;p&gt;ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;// æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡
CompletableFuture cf = CompletableFuture.supplyAsync(() -&amp;gt; {
    System.out.println(&quot;cf ä»»åŠ¡æ‰§è¡Œå¼€å§‹&quot;);
    sleep(10, TimeUnit.SECONDS);
    System.out.println(&quot;cf ä»»åŠ¡æ‰§è¡Œç»“æŸ&quot;);
    return &quot;æ¥¼ä¸‹å°é»‘å“¥&quot;;
});
//
Executors.newSingleThreadScheduledExecutor().execute(() -&amp;gt; {
    sleep(5, TimeUnit.SECONDS);
    System.out.println(&quot;ä¸»åŠ¨è®¾ç½® cf å¼‚å¸¸&quot;);
    // è®¾ç½®ä»»åŠ¡ç»“æœï¼Œç”±äº cf ä»»åŠ¡æœªæ‰§è¡Œç»“æŸï¼Œç»“æœè¿”å› true
    cf.completeExceptionally(new RuntimeException(&quot;å•Šï¼ŒæŒ‚äº†&quot;));
});
// ç”±äº cf æœªæ‰§è¡Œç»“æŸï¼Œå‰ 5 ç§’å°†ä¼šè¢«é˜»å¡ã€‚åç»­ç¨‹åºæŠ›å‡ºå¼‚å¸¸ï¼Œç»“æŸ
System.out.println(&quot;get:&quot; + cf.get());
/***
 * cf ä»»åŠ¡æ‰§è¡Œå¼€å§‹
 * ä¸»åŠ¨è®¾ç½® cf å¼‚å¸¸
 * java.util.concurrent.ExecutionException: java.lang.RuntimeException: å•Šï¼ŒæŒ‚äº†
 * ......
 */&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;completionstage&quot;&gt;1.4 CompletionStage&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;CompletableFuture&lt;/code&gt; åˆ†åˆ«å®ç°ä¸¤ä¸ªæ¥å£ &lt;code&gt;Future&lt;/code&gt;ä¸ &lt;code&gt;CompletionStage&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202003/1419561-20200309080831993-1537839515.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Future&lt;/code&gt; æ¥å£å¤§å®¶éƒ½æ¯”è¾ƒç†Ÿæ‚‰ï¼Œè¿™é‡Œä¸»è¦è®²è®² &lt;code&gt;CompletionStage&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;CompletableFuture&lt;/code&gt; å¤§éƒ¨åˆ†æ–¹æ³•æ¥è‡ª&lt;code&gt;CompletionStage&lt;/code&gt; æ¥å£ï¼Œæ­£æ˜¯å› ä¸ºè¿™ä¸ªæ¥å£ï¼Œ&lt;code&gt;CompletableFuture&lt;/code&gt;æ‰æœ‰å¦‚ä»å¼ºå¤§åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;æƒ³è¦ç†è§£ &lt;code&gt;CompletionStage&lt;/code&gt; æ¥å£ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä»»åŠ¡çš„æ—¶åºå…³ç³»çš„ã€‚æˆ‘ä»¬å¯ä»¥å°†ä»»åŠ¡æ—¶åºå…³ç³»åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä¸²è¡Œæ‰§è¡Œå…³ç³»&lt;/li&gt;
&lt;li&gt;å¹¶è¡Œæ‰§è¡Œå…³ç³»&lt;/li&gt;
&lt;li&gt;AND æ±‡èšå…³ç³»&lt;/li&gt;
&lt;li&gt;OR æ±‡èšå…³ç³»&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;ä¸²è¡Œæ‰§è¡Œå…³ç³»&quot;&gt;1.5 ä¸²è¡Œæ‰§è¡Œå…³ç³»&lt;/h3&gt;
&lt;p&gt;ä»»åŠ¡ä¸²è¡Œæ‰§è¡Œï¼Œä¸‹ä¸€ä¸ªä»»åŠ¡å¿…é¡»ç­‰å¾…ä¸Šä¸€ä¸ªä»»åŠ¡å®Œæˆæ‰å¯ä»¥ç»§ç»­æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202003/1419561-20200309080832143-1617974285.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;CompletionStage&lt;/code&gt; æœ‰å››ç»„æ¥å£å¯ä»¥æè¿°ä¸²è¡Œè¿™ç§å…³ç³»ï¼Œåˆ†åˆ«ä¸º:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202003/1419561-20200309080832377-303208333.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;thenApply&lt;/code&gt; æ–¹æ³•éœ€è¦ä¼ å…¥æ ¸å¿ƒå‚æ•°ä¸º &lt;code&gt;Function&amp;lt;T,R&amp;gt;&lt;/code&gt;ç±»å‹ã€‚è¿™ä¸ªç±»æ ¸å¿ƒæ–¹æ³•ä¸ºï¼š&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt; R apply(T t)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ‰€ä»¥è¿™ä¸ªæ¥å£å°†ä¼šæŠŠä¸Šä¸€ä¸ªä»»åŠ¡è¿”å›ç»“æœå½“åšå…¥å‚ï¼Œæ‰§è¡Œç»“æŸå°†ä¼šè¿”å›ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;thenAccept&lt;/code&gt; æ–¹æ³•éœ€è¦ä¼ å…¥å‚æ•°å¯¹è±¡ä¸º &lt;code&gt;Consumer&amp;lt;T&amp;gt;&lt;/code&gt;ç±»å‹ï¼Œè¿™ä¸ªç±»æ ¸å¿ƒæ–¹æ³•ä¸ºï¼š&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;void accept(T t)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿”å›å€¼ &lt;code&gt;void&lt;/code&gt; å¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ªæ–¹æ³•ä¸æ”¯æŒè¿”å›ç»“æœï¼Œä½†æ˜¯éœ€è¦å°†ä¸Šä¸€ä¸ªä»»åŠ¡æ‰§è¡Œç»“æœå½“åšå‚æ•°ä¼ å…¥ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;thenRun&lt;/code&gt; æ–¹æ³•éœ€è¦ä¼ å…¥å‚æ•°å¯¹è±¡ä¸º &lt;code&gt;Runnable&lt;/code&gt; ç±»å‹ï¼Œè¿™ä¸ªç±»å¤§å®¶åº”è¯¥éƒ½æ¯”è¾ƒç†Ÿæ‚‰ï¼Œæ ¸å¿ƒæ–¹æ³•æ—¢ä¸æ”¯æŒä¼ å…¥å‚æ•°ï¼Œä¹Ÿä¸ä¼šè¿”å›æ‰§è¡Œç»“æœã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;thenCompose&lt;/code&gt; æ–¹æ³•ä½œç”¨ä¸ &lt;code&gt;thenApply&lt;/code&gt; ä¸€æ ·ï¼Œåªä¸è¿‡ &lt;code&gt;thenCompose&lt;/code&gt; éœ€è¦è¿”å›æ–°çš„ &lt;code&gt;CompletionStage&lt;/code&gt;ã€‚è¿™ä¹ˆç†è§£æ¯”è¾ƒæŠ½è±¡ï¼Œå¯ä»¥é›†åˆä»£ç ä¸€èµ·ç†è§£ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202003/1419561-20200309080832532-1535986211.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ–¹æ³•ä¸­å¸¦æœ‰ &lt;strong&gt;Async&lt;/strong&gt; ï¼Œä»£è¡¨å¯ä»¥å¼‚æ­¥æ‰§è¡Œï¼Œè¿™ä¸ªç³»åˆ—è¿˜æœ‰é‡è½½æ–¹æ³•ï¼Œå¯ä»¥ä¼ å…¥è‡ªå®šä¹‰çš„çº¿ç¨‹æ± ï¼Œä¸Šå›¾æœªå±•ç¤ºï¼Œè¯»è€…åªå¯ä»¥è‡ªè¡ŒæŸ¥çœ‹ APIã€‚&lt;/p&gt;
&lt;p&gt;æœ€åæˆ‘ä»¬é€šè¿‡ä»£ç å±•ç¤º &lt;code&gt;thenApply&lt;/code&gt; ä½¿ç”¨æ–¹å¼ï¼š&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;CompletableFuture&amp;lt;String&amp;gt; cf
        = CompletableFuture.supplyAsync(() -&amp;gt; &quot;hello,æ¥¼ä¸‹å°é»‘å“¥&quot;)// 1
        .thenApply(s -&amp;gt; s + &quot;@ç¨‹åºé€šäº‹&quot;) // 2
        .thenApply(String::toUpperCase); // 3
System.out.println(cf.join());
// è¾“å‡ºç»“æœ HELLO,æ¥¼ä¸‹å°é»‘å“¥@ç¨‹åºé€šäº‹&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™æ®µä»£ç æ¯”è¾ƒç®€å•ï¼Œé¦–å…ˆæˆ‘ä»¬å¼€å¯ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œæ¥ç€ä¸²è¡Œæ‰§è¡Œåç»­ä¸¤ä¸ªä»»åŠ¡ã€‚ä»»åŠ¡ 2 éœ€è¦ç­‰å¾…ä»»åŠ¡1 æ‰§è¡Œå®Œæˆï¼Œä»»åŠ¡ 3 éœ€è¦ç­‰å¾…ä»»åŠ¡ 2ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;ä¸Šé¢æ–¹æ³•ï¼Œå¤§å®¶éœ€è¦è®°ä½äº† &lt;code&gt;Function&amp;lt;Tï¼ŒR&amp;gt;&lt;/code&gt;ï¼Œ&lt;code&gt;Consumer&amp;lt;T&amp;gt;&lt;/code&gt;ï¼Œ&lt;code&gt;Runnable&lt;/code&gt; ä¸‰è€…åŒºåˆ«ï¼Œæ ¹æ®åœºæ™¯é€‰æ‹©ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;and-æ±‡èšå…³ç³»&quot;&gt;1.6 AND æ±‡èšå…³ç³»&lt;/h3&gt;
&lt;p&gt;AND æ±‡èšå…³ç³»ä»£è¡¨æ‰€æœ‰ä»»åŠ¡å®Œæˆä¹‹åï¼Œæ‰èƒ½è¿›è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202003/1419561-20200309080832681-1554875019.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¦‚ä¸Šæ‰€ç¤ºï¼Œåªæœ‰ä»»åŠ¡ A ä¸ä»»åŠ¡ B éƒ½å®Œæˆä¹‹åï¼Œä»»åŠ¡ C æ‰ä¼šå¼€å§‹æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;CompletionStage&lt;/code&gt; æœ‰ä»¥ä¸‹æ¥å£æè¿°è¿™ç§å…³ç³»ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202003/1419561-20200309080832840-2047568284.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;thenCombine&lt;/code&gt; æ–¹æ³•æ ¸å¿ƒå‚æ•° &lt;code&gt;BiFunction&lt;/code&gt; ï¼Œä½œç”¨ä¸ &lt;code&gt;Function&lt;/code&gt;ä¸€æ ·ï¼Œåªä¸è¿‡ &lt;code&gt;BiFunction&lt;/code&gt; å¯ä»¥æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œè€Œ &lt;code&gt;Function&lt;/code&gt; åªèƒ½æ¥å—ä¸€ä¸ªå‚æ•°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;thenAcceptBoth&lt;/code&gt; æ–¹æ³•æ ¸å¿ƒå‚æ•°&lt;code&gt;BiConsumer&lt;/code&gt; ä½œç”¨ä¹Ÿä¸ &lt;code&gt;Consumer&lt;/code&gt;ä¸€æ ·ï¼Œä¸è¿‡å…¶éœ€è¦æ¥å—ä¸¤ä¸ªå‚æ•°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;runAfterBoth&lt;/code&gt; æ–¹æ³•æ ¸å¿ƒå‚æ•°æœ€ç®€å•ï¼Œä¸Šé¢å·²ç»ä»‹ç»è¿‡ï¼Œä¸å†ä»‹ç»ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸‰ç»„æ–¹æ³•åªèƒ½å®Œæˆä¸¤ä¸ªä»»åŠ¡ AND æ±‡èšå…³ç³»ï¼Œå¦‚æœéœ€è¦å®Œæˆå¤šä¸ªä»»åŠ¡æ±‡èšå…³ç³»ï¼Œéœ€è¦ä½¿ç”¨ &lt;code&gt;CompletableFuture#allOf&lt;/code&gt;ï¼Œä¸è¿‡è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯ä¸æ”¯æŒè¿”å›ä»»åŠ¡ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;AND æ±‡èšå…³ç³»ç›¸å…³ç¤ºä¾‹ä»£ç ï¼Œå¼€å¤´å·²ç»ä½¿ç”¨è¿‡äº†ï¼Œè¿™é‡Œå†ç²˜è´´ä¸€ä¸‹ï¼Œæ–¹ä¾¿å¤§å®¶ç†è§£ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202003/1419561-20200309080830551-292151003.jpg&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;or-æ±‡èšå…³ç³»&quot;&gt;1.7 OR æ±‡èšå…³ç³»&lt;/h3&gt;
&lt;p&gt;æœ‰ AND æ±‡èšå…³ç³»ï¼Œå½“ç„¶ä¹Ÿå­˜åœ¨ OR æ±‡èšå…³ç³»ã€‚OR æ±‡èšå…³ç³»ä»£è¡¨åªè¦å¤šä¸ªä»»åŠ¡ä¸­ä»»ä¸€ä»»åŠ¡å®Œæˆï¼Œå°±å¯ä»¥æ¥ç€æ¥ç€æ‰§è¡Œä¸‹ä¸€ä»»åŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202003/1419561-20200309080833275-1582656936.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;CompletionStage&lt;/code&gt; æœ‰ä»¥ä¸‹æ¥å£æè¿°è¿™ç§å…³ç³»ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202003/1419561-20200309080833438-320401663.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å‰é¢ä¸‰ç»„æ¥å£æ–¹æ³•ä¼ å‚ä¸ AND æ±‡èšå…³ç³»ä¸€è‡´ï¼Œè¿™é‡Œä¹Ÿä¸å†è¯¦ç»†è§£é‡Šäº†ã€‚&lt;/p&gt;
&lt;p&gt;å½“ç„¶ OR æ±‡èšå…³ç³»å¯ä»¥ä½¿ç”¨ &lt;code&gt;CompletableFuture#anyOf&lt;/code&gt; æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢ç¤ºä¾‹ä»£ç å±•ç¤ºå¦‚ä½•ä½¿ç”¨ &lt;code&gt;applyToEither&lt;/code&gt; å®Œæˆ OR å…³ç³»ã€‚&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;CompletableFuture&amp;lt;String&amp;gt; cf
        = CompletableFuture.supplyAsync(() -&amp;gt; {
    sleep(5, TimeUnit.SECONDS);
    return &quot;hello,æ¥¼ä¸‹å°é»‘å“¥&quot;;
});// 1

CompletableFuture&amp;lt;String&amp;gt; cf2 = cf.supplyAsync(() -&amp;gt; {
    sleep(3, TimeUnit.SECONDS);
    return &quot;helloï¼Œç¨‹åºé€šäº‹&quot;;
});
// æ‰§è¡Œ OR å…³ç³»
CompletableFuture&amp;lt;String&amp;gt; cf3 = cf2.applyToEither(cf, s -&amp;gt; s);

// è¾“å‡ºç»“æœï¼Œç”±äº cf2 åªä¼‘çœ  3 ç§’ï¼Œä¼˜å…ˆæ‰§è¡Œå®Œæ¯•
System.out.println(cf2.join());
// ç»“æœï¼šhelloï¼Œç¨‹åºé€šäº‹&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;å¼‚å¸¸å¤„ç†&quot;&gt;1.8 å¼‚å¸¸å¤„ç†&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;CompletableFuture&lt;/code&gt; æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹è‹¥äº§ç”Ÿå¼‚å¸¸ï¼Œå½“è°ƒç”¨ &lt;code&gt;get&lt;/code&gt;ï¼Œ&lt;code&gt;join&lt;/code&gt;è·å–ä»»åŠ¡ç»“æœæ‰ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202003/1419561-20200309080833701-1718647955.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šé¢ä»£ç æˆ‘ä»¬æ˜¾ç¤ºä½¿ç”¨ &lt;code&gt;try..catch&lt;/code&gt; å¤„ç†ä¸Šé¢çš„å¼‚å¸¸ã€‚ä¸è¿‡è¿™ç§æ–¹å¼ä¸å¤ªä¼˜é›…ï¼Œ&lt;code&gt;CompletionStage&lt;/code&gt; æä¾›å‡ ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ä¼˜é›…å¤„ç†å¼‚å¸¸ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202003/1419561-20200309080833846-944666818.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;exceptionally&lt;/code&gt; ä½¿ç”¨æ–¹å¼ç±»ä¼¼äº &lt;code&gt;try..catch&lt;/code&gt; ä¸­ &lt;code&gt;catch&lt;/code&gt;ä»£ç å—ä¸­å¼‚å¸¸å¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;whenComplete&lt;/code&gt; ä¸ &lt;code&gt;handle&lt;/code&gt; æ–¹æ³•å°±ç±»ä¼¼äº &lt;code&gt;try..catch..finanlly&lt;/code&gt; ä¸­ &lt;code&gt;finally&lt;/code&gt; ä»£ç å—ã€‚æ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œéƒ½å°†ä¼šæ‰§è¡Œçš„ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•åŒºåˆ«åœ¨äº &lt;code&gt;handle&lt;/code&gt; æ”¯æŒè¿”å›ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢ç¤ºä¾‹ä»£ç å±•ç¤º &lt;code&gt;handle&lt;/code&gt; ç”¨æ³•ï¼š&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;CompletableFuture&amp;lt;Integer&amp;gt;
        f0 = CompletableFuture.supplyAsync(() -&amp;gt; (7 / 0))
        .thenApply(r -&amp;gt; r * 10)
        .handle((integer, throwable) -&amp;gt; {
            // å¦‚æœå¼‚å¸¸å­˜åœ¨,æ‰“å°å¼‚å¸¸ï¼Œå¹¶ä¸”è¿”å›é»˜è®¤å€¼
            if (throwable != null) {
                throwable.printStackTrace();
                return 0;
            } else {
                // å¦‚æœ
                return integer;
            }
        });


System.out.println(f0.join());
/**
 *java.util.concurrent.CompletionException: java.lang.ArithmeticException: / by zero
 * .....
 * 
 * 0
 */&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;x02.-æ€»ç»“&quot;&gt;0x02. æ€»ç»“&lt;/h2&gt;
&lt;p&gt;JDK8 æä¾› &lt;code&gt;CompletableFuture&lt;/code&gt; åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œå¯ä»¥ç¼–æ’å¼‚æ­¥ä»»åŠ¡ï¼Œå®Œæˆä¸²è¡Œæ‰§è¡Œï¼Œå¹¶è¡Œæ‰§è¡Œï¼ŒAND æ±‡èšå…³ç³»ï¼ŒOR æ±‡èšå…³ç³»ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡è¿™ä¸ªç±»æ–¹æ³•å®åœ¨å¤ªå¤šï¼Œä¸”æ–¹æ³•è¿˜éœ€è¦ä¼ å…¥å„ç§å‡½æ•°å¼æ¥å£ï¼Œæ–°æ‰‹åˆšå¼€å§‹ä½¿ç”¨ä¼šç›´æ¥ä¼šè¢«å¼„æ‡µé€¼ã€‚è¿™é‡Œå¸®å¤§å®¶åœ¨æ€»ç»“ä¸€ä¸‹ä¸‰ç±»æ ¸å¿ƒå‚æ•°çš„ä½œç”¨&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;Function&lt;/code&gt; è¿™ç±»å‡½æ•°æ¥å£æ—¢æ”¯æŒæ¥æ”¶å‚æ•°ï¼Œä¹Ÿæ”¯æŒè¿”å›å€¼&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Consumer&lt;/code&gt; è¿™ç±»æ¥å£å‡½æ•°åªæ”¯æŒæ¥å—å‚æ•°ï¼Œä¸æ”¯æŒè¿”å›å€¼&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Runnable&lt;/code&gt; è¿™ç±»æ¥å£ä¸æ”¯æŒæ¥å—å‚æ•°ï¼Œä¹Ÿä¸æ”¯æŒè¿”å›å€¼&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ææ¸…æ¥šå‡½æ•°å‚æ•°ä½œç”¨ä»¥åï¼Œç„¶åæ ¹æ®ä¸²è¡Œï¼ŒAND æ±‡èšå…³ç³»ï¼ŒOR æ±‡èšå…³ç³»å½’çº³ä¸€ä¸‹ç›¸å…³æ–¹æ³•ï¼Œè¿™æ ·å°±æ¯”è¾ƒå¥½ç†è§£äº†&lt;/p&gt;
&lt;p&gt;æœ€åå†è´´ä¸€ä¸‹ï¼Œæ–‡ç« å¼€å¤´çš„æ€ç»´å¯¼å›¾ï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202003/1419561-20200309080834023-515296793.jpg&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;x03.-å¸®åŠ©æ–‡æ¡£&quot;&gt;0x03. å¸®åŠ©æ–‡æ¡£&lt;/h2&gt;
&lt;ol&gt;&lt;li&gt;æå®¢æ—¶é—´-å¹¶å‘ç¼–ç¨‹ä¸“æ &lt;/li&gt;
&lt;li&gt;https://colobu.com/2016/02/29/Java-CompletableFuture&lt;/li&gt;
&lt;li&gt;https://www.ibm.com/developerworks/cn/java/j-cf-of-jdk8/index.html&lt;/li&gt;
&lt;/ol&gt;&lt;h2 id=&quot;æœ€åè¯´ä¸€å¥æ±‚å…³æ³¨&quot;&gt;æœ€åè¯´ä¸€å¥ï¼ˆæ±‚å…³æ³¨ï¼‰&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;CompletableFuture&lt;/code&gt; å¾ˆæ—©ä¹‹å‰å°±æœ‰å…³æ³¨ï¼Œæœ¬ä»¥ä¸ºè·Ÿ &lt;code&gt;Future&lt;/code&gt;ä¸€æ ·ï¼Œä½¿ç”¨æŒºç®€å•ï¼Œè°çŸ¥é“å­¦çš„æ—¶å€™æ‰å‘ç°å¥½éš¾ã€‚å„ç§ API æ–¹æ³•çœ‹çš„å¤´æœ‰ç‚¹å¤§ã€‚&lt;/p&gt;
&lt;p&gt;åæ¥çœ‹åˆ°æå®¢æ—¶é—´-ã€å¹¶å‘ç¼–ç¨‹ã€ä¸“æ ä½¿ç”¨å½’çº³æ–¹å¼åˆ†ç±» &lt;code&gt;CompletableFuture&lt;/code&gt; å„ç§æ–¹æ³•ï¼Œä¸€ä¸‹å­å°±çœ‹æ‡‚äº†ã€‚æ‰€è¿™ç¯‡æ–‡ç« ä¹Ÿå‚è€ƒè¿™ç§å½’çº³æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç¯‡æ–‡ç« æ‰¾èµ„æ–™ï¼Œæ•´ç†ä¸€ä¸ªæ˜ŸæœŸï¼Œå¹¸å¥½ä»Šå¤©é¡ºåˆ©äº§å‡ºã€‚&lt;/p&gt;
&lt;p&gt;çœ‹åœ¨å°é»‘å“¥å†™çš„è¿™ä¹ˆè¾›è‹¦çš„ä»½ä¸Šï¼Œç‚¹ä¸ªå…³æ³¨å§ï¼Œèµä¸ªèµå‘—ã€‚åˆ«ä¸‹æ¬¡ä¸€å®šå•Šï¼Œå¤§å“¥ï¼å†™æ–‡ç« å¾ˆè¾›è‹¦çš„ï¼Œéœ€è¦æ¥ç‚¹æ­£åé¦ˆã€‚&lt;/p&gt;
&lt;p&gt;æ‰ç–å­¦æµ…ï¼Œéš¾å…ä¼šæœ‰çº°æ¼ï¼Œå¦‚æœä½ å‘ç°äº†é”™è¯¯çš„åœ°æ–¹ï¼Œè¿˜è¯·ä½ ç•™è¨€ç»™æˆ‘æŒ‡å‡ºæ¥ï¼Œæˆ‘å¯¹å…¶åŠ ä»¥ä¿®æ”¹ã€‚&lt;/p&gt;
&lt;p&gt;æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼Œ&lt;strong&gt;æˆ‘åšæŒåŸåˆ›&lt;/strong&gt;ï¼Œååˆ†æ¬¢è¿å¹¶æ„Ÿè°¢æ‚¨çš„å…³æ³¨~&lt;/p&gt;
&lt;blockquote readability=&quot;5.5384615384615&quot;&gt;
&lt;p&gt;æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šç¨‹åºé€šäº‹ï¼Œè·å¾—æ—¥å¸¸å¹²è´§æ¨é€ã€‚å¦‚æœæ‚¨å¯¹æˆ‘çš„ä¸“é¢˜å†…å®¹æ„Ÿå…´è¶£ï¼Œä¹Ÿå¯ä»¥å…³æ³¨æˆ‘çš„åšå®¢ï¼š&lt;a href=&quot;https://studyidea.cn&quot;&gt;studyidea.cn&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;</description>
<pubDate>Mon, 09 Mar 2020 00:09:00 +0000</pubDate>
<dc:creator>æ¥¼ä¸‹å°é»‘å“¥</dc:creator>
<og:description>helloï¼Œå„ä½å°ä¼™ä¼´ä»¬æ—©ä¸Šå¥½ï¼Œä»Šå¤©ç»™å¤§å®¶åˆ†äº«ä¸€ç¯‡å…³äºä½¿ç”¨ CompletableFuture è¿›è¡Œå¼‚æ­¥ç¼–ç¨‹çš„æ–‡ç« ã€‚  CompletableFuture è¿™ä¸ªç±»åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œæ”¯æŒå›è°ƒæ–¹å¼å¤„ç†ä»»åŠ¡ç»“æœ</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/goodAndyxublog/p/12446644.html</dc:identifier>
</item>
<item>
<title>ã€åŸåˆ›ã€‘ä¸ºä»€ä¹ˆæˆ‘çš„ Kafka æ€»æ˜¯è¿æ¥å¤±è´¥å‘¢ï¼Ÿ - ä¸œåŒ—å°ç‹ç‹¸</title>
<link>http://www.cnblogs.com/hellxz/p/why_cnnect_to_kafka_always_failure.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/hellxz/p/why_cnnect_to_kafka_always_failure.html</guid>
<description>&lt;h2 id=&quot;æå‡ºé—®é¢˜&quot;&gt;æå‡ºé—®é¢˜&lt;/h2&gt;
&lt;p&gt;è¿‘æ—¥åŠ©å‹ &lt;span&gt;Docker éƒ¨ç½² Kafka æœåŠ¡ï¼ŒæœåŠ¡æ—¥å¿—å¯åŠ¨æ­£å¸¸ï¼Œä½†å®¢æˆ·ç«¯å´æ— æ³•è¿æ¥&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;å¾€æ—¥æ›¾è¸©è¿‡æ­¤å‘ï¼Œç„¶æ–¹æ³•å‡æºäºåšå®¢ï¼Œå…¶è¯­ç„‰ä¸è¯¦ï¼Œä¸çŸ¥ä¸ºä½•ä¸è¡Œï¼Œäº¦ä¸çŸ¥ä¸ºä½•è¡Œï¼Œå°è±¡ä¸ç”šæ·±åˆ»ï¼Œè€—è´¹å¤§é‡æ—¶é—´&lt;/p&gt;
&lt;p&gt;ä¸ºé¿æ­¤å‘ï¼Œç‰¹åœ°å­¦ä¹ å®˜æ–¹æ–‡æ¡£ç›¸å…³ç« èŠ‚ï¼Œè®©æˆ‘å¯»åˆ°ç ä¸é©¬è¿¹ï¼Œè¯·å¬æˆ‘å¨“å¨“é“æ¥~&lt;/p&gt;
&lt;p&gt;å¦‚å«Œç¯‡å¹…è¾ƒé•¿ï¼Œå¯è·³è¿‡éªŒè¯ï¼Œç›´å¥”ç»“è®º&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä¸»è¦è®°å½•ä¸ºä½•ä¼šå‡ºç°æ— æ³•è¿æ¥åˆ° Broker çš„åŸå› ï¼Œæƒ³å¿…çœ‹å®Œæœ¬æ–‡ä½ ä¼šçŸ¥é“è¯¥æ€ä¹ˆåšçš„ :)&lt;/p&gt;
&lt;p&gt;è°¨ä»¥æ­¤æ–‡çŒ®ç»™é‚£äº›å› ä¸ºæ— çŸ¥è€Œæµªè´¹çš„æ—¶å…‰ï¼&lt;/p&gt;
&lt;h2 id=&quot;å¤§èƒ†çŒœæµ‹&quot;&gt;å¤§èƒ†çŒœæµ‹&lt;/h2&gt;
&lt;p&gt;Kafkaçš„æœåŠ¡ç«¯ç§°ä¸º &lt;code&gt;Broker&lt;/code&gt;ï¼Œæ¯ä¸ª Broker å¯åŠ¨æ—¶ä¼šå°†è‡ªå·±çš„ Broker é…ç½®ä¿¡æ¯ä¸ŠæŠ¥ç»™ &lt;code&gt;Zookeeper&lt;/code&gt; ï¼Œå¦‚ï¼Œç›‘å¬åœ°å€ä¸ç«¯å£å·ç­‰ï¼ŒKafkaçš„å®¢æˆ·ç«¯ï¼ˆç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…ç»Ÿç§°ï¼‰è¦è¿æ¥ Broker éœ€è¦ç»è¿‡ä¸€å±‚è®¤è¯ï¼Œä¸é€šè¿‡è®¤è¯å°±æ— æ³•è¿æ¥ï¼&lt;/p&gt;
&lt;h2 id=&quot;å°å¿ƒæ±‚è¯&quot;&gt;å°å¿ƒæ±‚è¯&lt;/h2&gt;
&lt;h3 id=&quot;æµ‹è¯•ç¯å¢ƒ&quot;&gt;æµ‹è¯•ç¯å¢ƒï¼š&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;GNU/Linux Debian 10 4.19.0å†…æ ¸&lt;/li&gt;
&lt;li&gt;Dockerï¼š&lt;code&gt;19.03.6&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Docker-composeï¼š&lt;code&gt;1.17.1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;é•œåƒï¼š&lt;code&gt;zookeeper:3.5.5&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;é•œåƒï¼š&lt;code&gt;wurstmeister/kafka:2.12-2.2.1&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;è®¾è®¡å®éªŒ&quot;&gt;è®¾è®¡å®éªŒï¼š&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨ docker é•œåƒéƒ¨ç½²ä¸€å¥—å•èŠ‚ç‚¹çš„ &lt;code&gt;Zookeeper&lt;/code&gt; + &lt;code&gt;Kafka&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è¦æ±‚Brokerç›‘å¬è‡ªå®šä¹‰åŸŸåï¼ˆä¸»æœºåï¼‰ä¸ç«¯å£ï¼ŒæœåŠ¡å¯åŠ¨åå±•ç¤º &lt;code&gt;Zookeeper&lt;/code&gt; ä¸­ &lt;code&gt;Broker&lt;/code&gt; çš„æ³¨å†Œä¿¡æ¯&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨å®¢æˆ·ç«¯è¿æ¥ &lt;code&gt;Broker&lt;/code&gt; ï¼Œä½¿ç”¨ä¸åŒçš„ &lt;code&gt;--bootstrap-server&lt;/code&gt; ç»„åˆæ–¹å¼ï¼Œè¿›è¡ŒéªŒè¯&lt;/p&gt;
&lt;h3 id=&quot;å¼€å§‹å®éªŒ&quot;&gt;å¼€å§‹å®éªŒ&lt;/h3&gt;
&lt;p&gt;ä¸ºäº†æé«˜éƒ¨ç½²æ•ˆç‡ï¼Œè¿™é‡Œæä¾›ä¸€ä¸ªç®€å•å¯å¯åŠ¨çš„ &lt;code&gt;docker-compose-test.yml&lt;/code&gt;&lt;/p&gt;
&lt;pre class=&quot;yaml&quot;&gt;
&lt;code&gt;version: &quot;3.3&quot;
services:
    zookeeper:
        image: zookeeper:3.5.5
        restart: always
        container_name: zookeeper
        ports:
            - &quot;2181:2181&quot;
        expose:
            - &quot;2181&quot;
        environment:
            - ZOO_MY_ID=1
    kafka:
        image: wurstmeister/kafka:2.12-2.2.1
        restart: always
        container_name: kafka
        environment:
            - KAFKA_BROKER_ID=1
            - KAFKA_LISTENERS=PLAINTEXT://kafka:9090
            - KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181
            - KAFKA_MESSAGE_MAX_BYTES=2000000
        ports:
            - &quot;9090:9090&quot;
        depends_on:
            - zookeeper&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å°† &lt;code&gt;docker-compose-test.yml&lt;/code&gt; æ”¾å…¥ä½ çš„ç›®å½•ï¼Œè¿è¡Œéƒ¨ç½²è„šæœ¬&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1149398/202003/1149398-20200309012513269-1982982116.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æŸ¥çœ‹ä¸¤è€…çš„æ—¥å¿—ï¼Œæ£€æŸ¥æ˜¯å¦æ­£å¸¸å¯åŠ¨&lt;/p&gt;
&lt;pre class=&quot;bash&quot;&gt;
&lt;code&gt;docker logs -f zookeeper &lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1149398/202003/1149398-20200309012925576-846797736.png&quot;/&gt;&lt;/p&gt;
&lt;pre class=&quot;bash&quot;&gt;
&lt;code&gt;docker logs -f kafka&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1149398/202003/1149398-20200309013408560-662367560.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ° Kafka å·²ç»æ³¨å†ŒæˆåŠŸ&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹ï¼ŒZookeeper ä¸­æ³¨å†Œçš„ Broker ä¿¡æ¯&lt;/p&gt;
&lt;pre class=&quot;bash&quot;&gt;
&lt;code&gt;docker exec -it zookeeper bash bin/zkCli.sh&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1149398/202003/1149398-20200309014107520-1584005744.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¾“å…¥ &lt;code&gt;quit&lt;/code&gt; é€€å‡º&lt;/p&gt;
&lt;p&gt;æƒ³åˆ°æˆ‘ä»¬å·²ç»å°†Kafkaç›‘å¬çš„ç«¯å£å·å·²ç»æ˜ å°„åˆ°å®¿ä¸»æœºäº†ï¼Œä½¿ç”¨å®¿ä¸»æœº IP è®¿é—®ä¸å°±å¾—äº†ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å…ˆåˆ›å»ºä¸ªTopic&lt;/p&gt;
&lt;pre class=&quot;bash&quot;&gt;
&lt;code&gt;docker run -it --rm --network host wurstmeister/kafka:2.12-2.2.1 \
             bash /opt/kafka/bin/kafka-topics.sh \
             --bootstrap-server 192.168.1.19:9090 \
             --create --topic logsTopic --partitions 1 --replication-factor 1&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1149398/202003/1149398-20200309015353135-668033151.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å™¢ï¼åˆæ˜¯è¿™è¯¥æ­»çš„é”™è¯¯ï¼&lt;/p&gt;
&lt;p&gt;æƒ³åˆ°åˆšæ‰åœ¨ &lt;code&gt;zookeeper&lt;/code&gt; ä¸­çœ‹åˆ°çš„ä¿¡æ¯ï¼Œè¦ä¸æˆ‘æŠŠ IP æ¢æˆ &lt;code&gt;kafka&lt;/code&gt; ä¸å°±ç»“äº†ï¼Ÿ&lt;/p&gt;
&lt;pre class=&quot;bash&quot;&gt;
&lt;code&gt;docker run -it --rm --network host wurstmeister/kafka:2.12-2.2.1 \
             bash /opt/kafka/bin/kafka-topics.sh \
             --bootstrap-server kafka:9090 \
             --create --topic logsTopic --partitions 1 --replication-factor 1&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1149398/202003/1149398-20200309015042025-1764613927.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¸å¯¹ï¼Œå®¿ä¸»æœºæœ¬èº«æ²¡æœ‰å¯¹ &lt;code&gt;kafka&lt;/code&gt; ä½œæ˜ å°„ï¼Œé—®é¢˜ä¸€å®šå‡ºåœ¨è¿™é‡Œï¼&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1149398/202003/1149398-20200309015854775-1057766554.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å†æ¬¡æ‰§è¡Œåˆšæ‰çš„å‘½ä»¤ï¼Œæ²¡æœ‰è¾“å‡ºï¼Œè¯´æ˜åˆ›å»º Topic æˆåŠŸï¼&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1149398/202003/1149398-20200309020104350-1349176194.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç”Ÿäº§ä¸€æ¡æ¶ˆæ¯æµ‹è¯•ä¸‹&lt;/p&gt;
&lt;pre class=&quot;bash&quot;&gt;
&lt;code&gt;docker run -it --rm --network host wurstmeister/kafka:2.12-2.2.1 \
        bash /opt/kafka/bin/kafka-console-producer.sh \
        --broker-list kafka:9090 --topic logsTopic&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1149398/202003/1149398-20200309020612665-412307096.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¾“å…¥å›è½¦ï¼Œå‘é€æ¶ˆæ¯ï¼› ctrl + c æ–­å¼€è¿æ¥&lt;/p&gt;
&lt;p&gt;åˆ›å»ºæ¶ˆè´¹è€…ï¼Œæ¶ˆè´¹æ¶ˆæ¯æµ‹è¯•&lt;/p&gt;
&lt;pre class=&quot;bash&quot;&gt;
&lt;code&gt;docker run -it --rm --network host wurstmeister/kafka:2.12-2.2.1 \
        bash /opt/kafka/bin/kafka-console-consumer.sh \
        --bootstrap-server kafka:9090  --topic logsTopic  --from-beginning&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1149398/202003/1149398-20200309021018678-1101588121.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å—¯ï¼Œæ¶ˆè´¹ä¹ŸæˆåŠŸäº†&lt;/p&gt;
&lt;h2 id=&quot;å½’çº³æ€»ç»“&quot;&gt;å½’çº³æ€»ç»“&lt;/h2&gt;
&lt;p&gt;è¿™ä¸ªå®éªŒè¯´æ˜äº†ä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;span&gt;è¯´æ˜ Kafka å®¢æˆ·ç«¯åœ¨è¿æ¥ Broker çš„æ—¶å€™ï¼ŒBroker å°†å®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚å¸¦çš„ä¿¡æ¯ä¸ Broker å¯åŠ¨æ—¶ä¸ŠæŠ¥ç»™ Zookeeper çš„ä¿¡æ¯ è¿›è¡Œäº†æ¯”å¯¹ï¼Œæ¯”å¯¹ç›¸åŒåˆ™è®¤è¯é€šè¿‡ï¼Œåä¹‹å»ºç«‹è¿æ¥å¤±è´¥ï¼&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;å®˜æ–¹æ–‡æ¡£&quot;&gt;å®˜æ–¹æ–‡æ¡£&lt;/h2&gt;
&lt;p&gt;é€šè¿‡è€å¿ƒåœ°æŸ¥çœ‹ &lt;code&gt;Kafka&lt;/code&gt; çš„å®˜æ–¹æ–‡æ¡£ï¼Œç»ˆäºåœ¨è§’è½é‡Œçœ‹åˆ°å¥¹çš„å½±å­ï¼ï¼ˆå¥½ä¹…ä¸è§å¦¹å­ï¼Œçœ‹æ–‡æ¡£éƒ½çœ‰æ¸…ç›®ç§€çš„~ï¼‰&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚ä¸‹é¢è¿™æ®µï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;From Kafka version 2.0.0 onwards, host name verification of servers is enabled by default for client connections as well as inter-broker connections to prevent man-in-the-middle attacks.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¤§æ„æ˜¯è®²é€šè¿‡è¿™ç§&lt;code&gt;è®¤è¯hostname&lt;/code&gt;çš„æœºåˆ¶ï¼Œæ¥é¿å…ä¸­é—´äººæ”»å‡»&lt;/p&gt;
&lt;p&gt;è¿˜æœ‰è¿™æ®µï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;10&quot;&gt;
&lt;p&gt;&lt;strong&gt;advertised.host.name&lt;/strong&gt;: DEPRECATED: only used when &lt;code&gt;advertised.listeners&lt;/code&gt; or &lt;code&gt;listeners&lt;/code&gt; are not set. Use &lt;code&gt;advertised.listeners&lt;/code&gt; instead. Hostname to publish to ZooKeeper for clients to use. In IaaS environments, this may need to be different from the interface to which the broker binds. &lt;span&gt;If this is not set, it will use the value for &lt;code&gt;host.name&lt;/code&gt; if configured. Otherwise it will use the value returned from java.net.InetAddress.getCanonicalHostName().&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è™½ç„¶è¿™ä¸ªå‚æ•°å·²ç»æ ‡è®°ä¸ºåºŸå¼ƒäº†ï¼Œä½†æ˜¯å¥¹æä¾›äº†ä¸ªä¿¡æ¯ï¼šå¦‚æœè®¾ç½®ä¸»æœºåå¯èƒ½ä¼šè¢«ä¸ŠæŠ¥&lt;/p&gt;
&lt;p&gt;æœ€åçœ‹çœ‹è¿™æ®µ&lt;/p&gt;
&lt;blockquote readability=&quot;11&quot;&gt;
&lt;p&gt;&lt;strong&gt;advertised.listeners&lt;/strong&gt;: &lt;span&gt;Listeners to publish to ZooKeeper for clients to use, if different than the &lt;code&gt;listeners&lt;/code&gt; config property. In IaaS environments, this may need to be different from the interface to which the broker binds. If this is not set, the value for &lt;code&gt;listeners&lt;/code&gt; will be used.&lt;/span&gt; Unlike &lt;code&gt;listeners&lt;/code&gt; it is not valid to advertise the 0.0.0.0 meta-address.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¹Ÿå°±æ˜¯è¯´ï¼Œæ— è®ºè®¾ç½® &lt;code&gt;listeners&lt;/code&gt; è¿˜æ˜¯ &lt;code&gt;advertised.listeners&lt;/code&gt; å®ƒä»¬å…¶ä¸€çš„ä¿¡æ¯ä¼šè¢«ä¸ŠæŠ¥ï¼Œä¾›å®¢æˆ·ç«¯ä½¿ç”¨ï¼›åªæœ‰åœ¨éœ€è¦ç»‘å®šä¸åŒæ¥å£æ—¶ï¼Œæ‰éœ€è¦è®¾ç½® &lt;code&gt;advertised.listeners&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&quot;ç»“è®º&quot;&gt;ç»“è®º&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;Kafka å®¢æˆ·ç«¯åœ¨è¿æ¥ Broker çš„æ—¶å€™ï¼ŒBroker å°†å®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚é™„åŠ ä¿¡æ¯ä¸ Broker å¯åŠ¨æ—¶ä¸ŠæŠ¥ç»™ Zookeeper çš„ listenerså‚æ•°ä¿¡æ¯ã€hostï¼ˆæ¥è‡ªlistenersçš„ä¸­é—´åŸŸåæˆ–ä¸»æœºåéƒ¨åˆ†ï¼‰ã€port (æ¥è‡ªlistenersçš„ç«¯å£éƒ¨åˆ†) è¿›è¡Œäº†éªŒè¯ï¼Œè®¤è¯é€šè¿‡å»ºç«‹è¿æ¥æ‰§è¡Œè¯·æ±‚ï¼Œåä¹‹å»ºç«‹è¿æ¥å¤±è´¥&lt;/span&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;å†™è¿™ç¯‡æ–‡ç« è´¹äº†å¥½å¤§çš„åŠŸå¤«ï¼ŒçŒœæ˜¯ä¸€å›äº‹ï¼Œå¼„æ˜ç™½åˆæ˜¯ä¸€å›äº‹ï¼Œå¦‚æœæœ¬æ–‡å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹æ¨èä¸å…³æ³¨&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¼•ç”¨ï¼š&lt;br/&gt;&lt;a href=&quot;https://kafka.apache.org/documentation.html&quot; class=&quot;uri&quot;&gt;https://kafka.apache.org/documentation.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡é‡‡ç”¨ CC BY 4.0 åè®®è¿›è¡Œæˆæƒï¼Œè½¬è½½è¯·æ ‡æ³¨ä½œè€…ç½²ååŠæ¥æºã€‚&lt;br/&gt;&lt;a href=&quot;https://www.cnblogs.com/hellxz/p/why_cnnect_to_kafka_always_failure.html&quot; class=&quot;uri&quot;&gt;https://www.cnblogs.com/hellxz/p/why_cnnect_to_kafka_always_failure.html&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Mon, 09 Mar 2020 00:02:00 +0000</pubDate>
<dc:creator>ä¸œåŒ—å°ç‹ç‹¸</dc:creator>
<og:description>æå‡ºé—®é¢˜ è¿‘æ—¥åŠ©å‹ Docker éƒ¨ç½² Kafka æœåŠ¡ï¼ŒæœåŠ¡æ—¥å¿—å¯åŠ¨æ­£å¸¸ï¼Œä½†å®¢æˆ·ç«¯å´æ— æ³•è¿æ¥ å¾€æ—¥æ›¾è¸©è¿‡æ­¤å‘ï¼Œç„¶æ–¹æ³•å‡æºäºåšå®¢ï¼Œå…¶è¯­ç„‰ä¸è¯¦ï¼Œä¸çŸ¥ä¸ºä½•ä¸è¡Œï¼Œäº¦ä¸çŸ¥ä¸ºä½•è¡Œï¼Œå°è±¡ä¸ç”šæ·±åˆ»ï¼Œè€—è´¹å¤§é‡æ—¶é—´ ä¸º</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/hellxz/p/why_cnnect_to_kafka_always_failure.html</dc:identifier>
</item>
<item>
<title>ï¼ˆæ•°æ®ç§‘å­¦å­¦ä¹ æ‰‹æœ­79ï¼‰åŸºäºgeopandasçš„ç©ºé—´æ•°æ®åˆ†æâ€”â€”æ·±å…¥æµ…å‡ºåˆ†å±‚è®¾è‰² - è´¹å¼—é‡Œ</title>
<link>http://www.cnblogs.com/feffery/p/12381322.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/feffery/p/12381322.html</guid>
<description>&lt;blockquote readability=&quot;3.196261682243&quot;&gt;
&lt;p&gt;æœ¬æ–‡å¯¹åº”ä»£ç å’Œæ•°æ®å·²ä¸Šä¼ è‡³æˆ‘çš„&lt;code&gt;Github&lt;/code&gt;ä»“åº“&lt;a href=&quot;https://github.com/CNFeffery/DataScienceStudyNotes&quot; class=&quot;uri&quot;&gt;https://github.com/CNFeffery/DataScienceStudyNotes&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ã€€ã€€é€šè¿‡å‰é¢çš„æ–‡ç« ï¼Œæˆ‘ä»¬å·²ç»å¯¹&lt;code&gt;geopandas&lt;/code&gt;ä¸­çš„&lt;strong&gt;æ•°æ®ç»“æ„&lt;/strong&gt;ã€&lt;strong&gt;åæ ‡å‚è€ƒç³»&lt;/strong&gt;ã€&lt;strong&gt;æ–‡ä»¶IO&lt;/strong&gt;ä»¥åŠ&lt;strong&gt;åŸºç¡€å¯è§†åŒ–&lt;/strong&gt;æœ‰äº†è¾ƒä¸ºæ·±å…¥çš„å­¦ä¹ ï¼Œå…¶ä¸­åœ¨&lt;strong&gt;åŸºç¡€å¯è§†åŒ–&lt;/strong&gt;é‚£ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬æåˆ°äº†åˆ†å±‚è®¾è‰²åœ°å›¾ï¼Œå¯ä»¥å¯¹ä¸å¤šè¾¹å½¢å…³è”çš„æ•°å€¼å±æ€§è¿›è¡Œåˆ†å±‚ï¼Œå¹¶åˆ†åˆ«æ˜ å°„ä¸åŒçš„å¡«å……é¢œè‰²ï¼Œä½†åªæ˜¯å¼€äº†ä¸ªå¤´ä¸¾äº†ä¸ªç®€å•çš„ä¾‹å­ï¼Œå®é™…æ•°æ®å¯è§†åŒ–è¿‡ç¨‹ä¸­çš„åˆ†å±‚è®¾è‰²æœ‰ä¸€å¥—ç­–ç•¥æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä½œä¸º&lt;em&gt;åŸºäºgeopandasçš„ç©ºé—´æ•°æ®åˆ†æ&lt;/em&gt;ç³»åˆ—æ–‡ç« çš„ç¬¬äº”ç¯‡ï¼Œé€šè¿‡æœ¬æ–‡ä½ å°†ä¼šå­¦ä¹ åˆ°åŸºäº&lt;code&gt;geopandas&lt;/code&gt;å’Œæœºå™¨å­¦ä¹ çš„&lt;strong&gt;åˆ†å±‚è®¾è‰²&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€&lt;strong&gt;åœ°åŒºåˆ†å¸ƒå›¾&lt;/strong&gt;ï¼ˆ&lt;em&gt;Choropleth maps&lt;/em&gt;ï¼Œåˆå«é¢é‡å›¾ï¼‰ä½œä¸ºå¯èƒ½æ˜¯æœ€å¸¸è§çš„ä¸€ç§åœ°ç†å¯è§†åŒ–æ–¹æ³•ï¼Œå…¶æ ¸å¿ƒæ˜¯å¯¹æŸä¸ªä¸çŸ¢é‡é¢å…³è”çš„æ•°å€¼åºåˆ—è¿›è¡Œæœ‰æ„ä¹‰çš„åˆ†å±‚ï¼Œå¹¶ä¸ºè¿™äº›åˆ†å±‚é€‰æ‹©åˆé€‚ç¾è§‚çš„è‰²å½©ï¼Œæœ€åå®Œæˆå¯¹åœ°å›¾çš„ç€è‰²ï¼Œä¼˜ç‚¹æ˜¯ç¾è§‚ä¸”ç›´è§‚ï¼Œå³ä½¿å¯¹åœ°ç†ä¿¡æ¯ä¸€çªä¸é€šçš„äººï¼Œä¹Ÿèƒ½é€šè¿‡é¢œè‰²åŒºåˆ†å‡ºä¸åŒé¢ä¹‹é—´çš„åŒè´¨æ€§ä¸å¼‚è´¨æ€§ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309014947606-680390211.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾1&lt;/span&gt;&lt;/center&gt;
&lt;p&gt;ã€€ã€€ä½†åŒæ ·åœ°ï¼Œå¦‚æœå¯¹æ•°æ®åˆ†å±‚é‡‡å–çš„æ–¹æ³•æœ‰å¤±ä¸¥è°¨æ²¡æœ‰å¾ˆå¥½çš„éµå¾ªæ•°æ®ç‰¹ç‚¹ï¼Œä¼šå¾ˆå®¹æ˜“è®©çœ‹åˆ°å›¾çš„äººäº§ç”Ÿå‡ºä¸æ­£ç¡®çš„åˆ¤æ–­ï¼Œä¸‹é¢æˆ‘ä»¬æŒ‰ç…§å…ˆåˆ†å±‚ï¼Œåè®¾è‰²çš„é¡ºåºè¿›è¡Œä»‹ç»ã€‚&lt;/p&gt;
&lt;h2 id=&quot;åŸºäºmapclassifyçš„æ•°æ®åˆ†å±‚&quot;&gt;2.1 åŸºäºmapclassifyçš„æ•°æ®åˆ†å±‚&lt;/h2&gt;
&lt;p&gt;ã€€ã€€ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬æåˆ°è¿‡,ï¼Œåœ¨&lt;code&gt;geopandas.GeoDataFrame.plot()&lt;/code&gt;ä¸­ï¼Œå‚æ•°&lt;code&gt;scheme&lt;/code&gt;å¯¹åº”çš„æ•°æ®åˆ†å±‚æ˜¯åŸºäºç¬¬ä¸‰æ–¹åº“&lt;code&gt;mapclassify&lt;/code&gt;å®ç°çš„ï¼Œå› æ­¤è¦æƒ³å¯¹&lt;code&gt;geopandas&lt;/code&gt;ä¸­çš„æ•°æ®åˆ†å±‚æœ‰æ·±å…¥çš„äº†è§£ï¼Œæˆ‘ä»¬å°±å¾—å…ˆæ¥äº†è§£ä¸€ä¸‹&lt;code&gt;mapclassify&lt;/code&gt;ä¸­çš„å„ç§æ•°æ®åˆ†å±‚ç®—æ³•ï¼Œç”¨åˆ°çš„æ•°æ®æ˜¯ç³»åˆ—æ–‡ç« å‰å‡ æœŸä½¿ç”¨åœ°æ»šç“œçƒ‚ç†Ÿçš„æ–°å† è‚ºç‚ç–«æƒ…æ•°æ®ï¼Œæ•°æ®å¤„ç†è¿‡ç¨‹åŒä¸Šä¸€ç¯‡æ–‡ç« ï¼Œè¿™é‡Œä¸å†è§£é‡Šï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309080733759-934443377.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾2&lt;/span&gt;&lt;/center&gt;
&lt;h3 id=&quot;boxplot&quot;&gt;2.1.1 BoxPlot&lt;/h3&gt;
&lt;p&gt;ã€€ã€€&lt;code&gt;BoxPlot&lt;/code&gt;å³ç®±çº¿å›¾ï¼Œæ˜¯ç»Ÿè®¡å­¦ä¸­ä½¿ç”¨åˆ°çš„ä¸€ç§æ–¹æ³•ï¼šå¯¹ä¸ªæ•°ä¸º&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;è§‚æµ‹æ•°æ®ä»å°åˆ°å¤§è¿›è¡Œæ’åºï¼Œåˆ†åˆ«å¾—åˆ°ä½ç½®å¤„äº&lt;span class=&quot;math inline&quot;&gt;\(0.25n\)&lt;/span&gt;ã€&lt;span class=&quot;math inline&quot;&gt;\(0.5n\)&lt;/span&gt;ä»¥åŠ&lt;span class=&quot;math inline&quot;&gt;\(0.75n\)&lt;/span&gt;çš„è§‚æµ‹å€¼ï¼Œç§°ä¸º&lt;span class=&quot;math inline&quot;&gt;\(Q_{1}\)&lt;/span&gt;ã€&lt;span class=&quot;math inline&quot;&gt;\(Median\)&lt;/span&gt;ä»¥åŠ&lt;span class=&quot;math inline&quot;&gt;\(Q_{3}\)&lt;/span&gt;ï¼ˆå³ç¬¬ä¸€å››ä½æ•°ã€ä¸­ä½æ•°å’Œç¬¬ä¸‰å››åˆ†ä½æ•°ï¼‰ï¼Œå¹¶å®šä¹‰&lt;span class=&quot;math inline&quot;&gt;\(Q_{3}-Q_{1}\)&lt;/span&gt;ä¸º&lt;span class=&quot;math inline&quot;&gt;\(IQR\)&lt;/span&gt;ï¼Œä»¥&lt;span class=&quot;math inline&quot;&gt;\(Q_{1}-1.5IQR\)&lt;/span&gt;ä¸ºä¸‹é™ï¼Œä»¥&lt;span class=&quot;math inline&quot;&gt;\(Q3+1.5IQR\)&lt;/span&gt;ä¸ºä¸Šé™ï¼Œå°†å°äºä¸‹é™æˆ–å¤§äºä¸Šé™çš„è§‚æµ‹å€¼ä½œä¸ºç¦»ç¾¤å¼‚å¸¸å€¼ï¼Œæœ€åç”¨å›¾åƒçš„å½¢å¼è¡¨è¾¾ä¸Šè¿°è®¡ç®—ç»“æœï¼Œå¦‚å›¾2çš„ä¸Šå›¾ï¼Œè€Œå›¾2çš„ä¸‹å›¾å¯¹åº”ç€æ¦‚ç‡ä¼°è®¡ï¼Œå¯ä»¥çœ‹å‡ºï¼Œç®±çº¿å›¾æ³•å®é™…ä¸Šæ˜¯åŸºäºæ¦‚ç‡ä¼°è®¡çš„ä¸€ç§å¼‚å¸¸å€¼å‰”é™¤æ–¹æ³•ï¼Œå› ä¸ºç¦»ç¾¤å€¼åªæœ‰&lt;span class=&quot;math inline&quot;&gt;\(0.0035*2=0.007\)&lt;/span&gt;çš„æ¦‚ç‡ä¼šå‡ºç°ï¼Œå³å¦‚æœä½ æƒ³è¦æ‰¾å‡ºæ•°æ®ä¸­çš„å¼‚å¸¸é«˜ä½å€¼ï¼Œ&lt;code&gt;BoxPlot&lt;/code&gt;æ˜¯ä¸é”™çš„é€‰æ‹©ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309014954143-1492026827.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾3&lt;/span&gt;&lt;/center&gt;
&lt;p&gt;ã€€ã€€åœ¨&lt;code&gt;mapclassify&lt;/code&gt;ä¸­æˆ‘ä»¬ä½¿ç”¨&lt;code&gt;BoxPlot()&lt;/code&gt;æ¥ä¸ºæ•°æ®å®ç°ç®±çº¿å›¾åˆ†å±‚ï¼š&lt;/p&gt;
&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;import mapclassify as mc

# å¯¹å„çœ2020-03-08å¯¹åº”çš„ç´¯è®¡ç¡®è¯Šæ•°é‡è¿›è¡Œåˆ†å±‚
bp = mc.BoxPlot(temp['province_confirmedCount'])
# æŸ¥çœ‹æ•°æ®åˆ†å±‚ç»“æœ
bp&lt;/code&gt;
&lt;/pre&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309014956508-651043056.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾4&lt;/span&gt;&lt;/center&gt;
&lt;p&gt;ã€€ã€€å¯ä»¥çœ‹å‡ºé€šè¿‡ç®±çº¿å›¾æ³•å°†æ•°æ®åˆ†æˆäº†äº”ç±»ï¼Œå…¶ä¸­&lt;strong&gt;å¼‚å¸¸å€¼&lt;/strong&gt;åªæœ‰1ä¸ªå³ä¸ºæ¹–åŒ—çœï¼Œä¸‹é¢æˆ‘ä»¬é…åˆ&lt;code&gt;geopandas&lt;/code&gt;æ¥å¯¹ä¸Šè¿°ç»“æœè¿›è¡Œå¯è§†åŒ–ï¼Œå’Œä¸Šä¸€ç¯‡æ–‡ç« ä¸€æ ·ï¼ŒæŒ‰ç…§çœçº§å•ä½åç§°è¿æ¥æˆ‘ä»¬çš„ç–«æƒ…æ•°æ®ä¸çŸ¢é‡æ•°æ®ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309014958615-381354321.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾5&lt;/span&gt;&lt;/center&gt;
&lt;p&gt;ã€€ã€€æ¥ç€å¯¹å…¶è¿›è¡Œå¯è§†åŒ–ï¼Œåœ¨ä¸Šä¸€ç¯‡æ–‡ç« å›¾28çš„åŸºç¡€ä¸Šï¼Œå°†&lt;code&gt;scheme&lt;/code&gt;å‚æ•°æ”¹ä¸º&lt;code&gt;BoxPlot&lt;/code&gt;ï¼Œåˆå› ä¸ºç®±çº¿å›¾å¯ä»¥çœ‹ä½œæ— ç›‘ç£é—®é¢˜ï¼Œæ•…åˆ†å±‚æ•°é‡&lt;code&gt;k&lt;/code&gt;åœ¨è¿™é‡Œæ— æ•ˆï¼Œåˆ å»ï¼š&lt;/p&gt;
&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;fig, ax = plt.subplots(figsize=(10, 10))

ax = data_with_geometry.to_crs(albers_proj).plot(ax=ax,
                                                 column='province_confirmedCount',
                                                 cmap='Reds',
                                                 missing_kwds={
                                                     &quot;color&quot;: &quot;lightgrey&quot;,
                                                     &quot;edgecolor&quot;: &quot;black&quot;,
                                                     &quot;hatch&quot;: &quot;////&quot;,
                                                     &quot;label&quot;: &quot;ç¼ºå¤±å€¼&quot;
                                                 },
                                                 legend=True,
                                                 scheme='BoxPlot',
                                                 legend_kwds={
                                                     'loc': 'lower left',
                                                     'title': 'ç¡®è¯Šæ•°é‡åˆ†çº§',
                                                     'shadow': True
                                                 })

ax = nine_lines.geometry.to_crs(albers_proj).plot(ax=ax,
                                                  edgecolor='grey',
                                                  linewidth=3,
                                                  alpha=0.4)

ax.axis('off')
plt.suptitle('æ–°å‹å† çŠ¶è‚ºç‚ç´¯è®¡ç¡®è¯Šæ•°é‡åœ°åŒºåˆ†å¸ƒ', fontsize=24) # æ·»åŠ æœ€é«˜çº§åˆ«æ ‡é¢˜
plt.tight_layout(pad=4.5) # è°ƒæ•´ä¸åŒæ ‡é¢˜ä¹‹é—´é—´è·
ax.text(-2800000, 1300000, '* åŸå§‹æ•°æ®æ¥æºï¼šä¸é¦™å›­ï¼Œ\nå…¶ä¸­å°æ¹¾åŠé¦™æ¸¯æ•°æ®ç¼ºå¤±') # æ·»åŠ æ•°æ®è¯´æ˜

fig.savefig('å›¾6.png', dpi=300)&lt;/code&gt;
&lt;/pre&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309015002778-576035073.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾6&lt;/span&gt;&lt;/center&gt;
&lt;p&gt;ã€€ã€€å’‹çœ‹èµ·æ¥æ²¡é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœä½ ä»”ç»†è§‚å¯Ÿå·¦ä¸‹è§’çš„å›¾ä¾‹ä¼šå‘ç°å‰ä¸¤è¡ŒèŒƒå›´é¢œè‰²æ˜¯é‡å¤çš„ï¼Œä¸”æ•°å€¼èŒƒå›´æ˜¯é”™ä¹±çš„ï¼Œè¿™æ˜¯&lt;code&gt;geopandas.GeoDataFrame.plot()&lt;/code&gt;ä¸­æ¶‰åŠç®±çº¿å›¾æ³•çš„ä¸€ä¸ªå°&lt;code&gt;bug&lt;/code&gt;ï¼Œé‡åˆ°è¿™ç§é—®é¢˜ä¸ç”¨æ…Œï¼Œå¦‚æœä½ åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­å»æˆ‘çš„&lt;code&gt;Github&lt;/code&gt;ä»“åº“æŸ¥çœ‹è¿‡åˆ›ä½œå›¾29å¯¹åº”çš„ä»£ç ï¼Œä¸€å®šä¼šæƒ³åˆ°æ—¢ç„¶&lt;code&gt;geopandas&lt;/code&gt;è‡ªèº«æœ‰&lt;strong&gt;bug&lt;/strong&gt;ï¼Œé‚£æˆ‘ä»¬ç”¨&lt;code&gt;matplotlib&lt;/code&gt;ä¸­çš„&lt;code&gt;mpatches&lt;/code&gt;å’Œ&lt;code&gt;legend&lt;/code&gt;è‡ªå®šä¹‰å›¾ä¾‹å°±å¯ä»¥å•¦ï¼Œè€Œä¸ºäº†è‡ªå®šä¹‰çš„å›¾ä¾‹è‰²å½©ä¸&lt;code&gt;geopandas&lt;/code&gt;æ˜ å°„å‡ºçš„ä¿æŒä¸€è‡´ï¼Œæˆ‘ä»¬éœ€è¦é¢å¤–ä½¿ç”¨åˆ°&lt;code&gt;matplotlib&lt;/code&gt;ä¸­çš„&lt;code&gt;get_cmap(cmap)&lt;/code&gt;æ¥åˆ¶ä½œå¯ç‹¬ç«‹å¯¼å‡ºé¢œè‰²çš„&lt;strong&gt;cmap&lt;/strong&gt;æ–¹æ¡ˆå®ä¾‹ï¼Œè­¬å¦‚æˆ‘ä»¬è¿™é‡Œæ˜¯&lt;code&gt;Reds&lt;/code&gt;ï¼Œå°±éœ€è¦æŒ‰ç…§å‰é¢&lt;code&gt;bp&lt;/code&gt;çš„æœ‰è®°å½•æ•°é‡çš„åˆ†å±‚ç»“æœï¼Œä»&lt;code&gt;Reds&lt;/code&gt;ä¸­äº§ç”ŸåŒæ ·5ä¸ªæ¡£æ¬¡çš„é¢œè‰²ï¼Œå…·ä½“æ“ä½œè¿‡ç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;import matplotlib.patches as mpatches

fig, ax = plt.subplots(figsize=(10, 10))

ax = data_with_geometry.to_crs(albers_proj).plot(ax=ax,
                                                 column='province_confirmedCount',
                                                 cmap='Reds',
                                                 missing_kwds={
                                                     &quot;color&quot;: &quot;lightgrey&quot;,
                                                     &quot;edgecolor&quot;: &quot;black&quot;,
                                                     &quot;hatch&quot;: &quot;////&quot;,
                                                     &quot;label&quot;: &quot;ç¼ºå¤±å€¼&quot;
                                                 },
                                                 scheme='BoxPlot')

handles, labels = ax.get_legend_handles_labels() #get existing legend item handles and labels

ax = nine_lines.geometry.to_crs(albers_proj).plot(ax=ax,
                                                  edgecolor='grey',
                                                  linewidth=3,
                                                  alpha=0.4)

# å®ä¾‹åŒ–cmapæ–¹æ¡ˆ
cmap = plt.get_cmap('Reds')

# å¾—åˆ°mapclassifyä¸­BoxPlotçš„æ•°æ®åˆ†å±‚ç‚¹
bp = mc.BoxPlot(temp['province_confirmedCount'])
bins = bp.bins

# åˆ¶ä½œå›¾ä¾‹æ˜ å°„å¯¹è±¡åˆ—è¡¨
LegendElement = [mpatches.Patch(facecolor=cmap(_*0.25), label=f'{int(max(bins[_], 0))} - {int(bins[_+1])}') 
                 for _ in range(5)] + \
                [mpatches.Patch(facecolor='lightgrey', edgecolor='black', hatch='////', label='ç¼ºå¤±å€¼')]

# å°†åˆ¶ä½œå¥½çš„å›¾ä¾‹æ˜ å°„å¯¹è±¡åˆ—è¡¨å¯¼å…¥legend()ä¸­ï¼Œå¹¶é…ç½®ç›¸å…³å‚æ•°
ax.legend(handles = LegendElement, loc='lower left', fontsize=10, title='ç¡®è¯Šæ•°é‡åˆ†çº§', shadow=True, borderpad=0.6)

ax.axis('off')
plt.suptitle('æ–°å‹å† çŠ¶è‚ºç‚ç´¯è®¡ç¡®è¯Šæ•°é‡åœ°åŒºåˆ†å¸ƒ(æˆªè‡³2020å¹´03æœˆ04æ—¥)', fontsize=24) # æ·»åŠ æœ€é«˜çº§åˆ«æ ‡é¢˜
plt.title('æ•°æ®åˆ†å±‚æ–¹æ³•ï¼šBoxPlot', fontsize=18)
plt.tight_layout(pad=4.5) # è°ƒæ•´ä¸åŒæ ‡é¢˜ä¹‹é—´é—´è·
ax.text(-2900000, 1250000, '* åŸå§‹æ•°æ®æ¥æºï¼šä¸é¦™å›­ï¼Œ\nå…¶ä¸­å°æ¹¾åŠé¦™æ¸¯æ•°æ®ç¼ºå¤±') # æ·»åŠ æ•°æ®è¯´æ˜

fig.savefig('å›¾7.png', dpi=300)&lt;/code&gt;
&lt;/pre&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309015007208-792688777.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾7&lt;/span&gt;&lt;/center&gt;
&lt;p&gt;ã€€ã€€å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡è‡ªå®šä¹‰å›¾ä¾‹çš„æ–¹å¼ï¼Œè™½ç„¶éº»çƒ¦äº†ä¸€ç‚¹ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸ä»…ä¿®å¤äº†å›¾ä¾‹çš„&lt;strong&gt;bug&lt;/strong&gt;ï¼Œè¿˜ä¸ºå…¶æ·»åŠ äº†æ›´åŠ å®Œå–„çš„ç»†èŠ‚ï¼Œå¦‚å›¾å½¢ä¿®æ”¹ä¸ºçŸ©å½¢ï¼ŒèŒƒå›´ä¿®æ”¹ä¸ºæ•´æ•°ã€‚&lt;/p&gt;
&lt;h3 id=&quot;equalinterval&quot;&gt;2.1.2 EqualInterval&lt;/h3&gt;
&lt;p&gt;ã€€ã€€&lt;code&gt;EqualInterval&lt;/code&gt;å³ç­‰é—´è·ï¼Œæ˜¯æœ€ç®€å•çš„ä¸€ç§åˆ†å±‚æ–¹æ³•ï¼Œå®ƒåœ¨åŸæ•°æ®æœ€å°å€¼ä¸æœ€å¤§å€¼é—´ä»¥ç­‰é—´è·çš„æ–¹å¼åˆ’åˆ†å‡º&lt;code&gt;k&lt;/code&gt;ä¸ªå±‚æ¬¡ï¼Œ&lt;code&gt;mapclassify&lt;/code&gt;ä¸­å¯¹åº”ç­‰é—´è·æ³•çš„ç±»ä¸º&lt;code&gt;EqualInterval()&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;bp = mc.EqualInterval(temp['province_confirmedCount'])
# æŸ¥çœ‹æ•°æ®åˆ†å±‚ç»“æœ
bp&lt;/code&gt;
&lt;/pre&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309015008780-891772349.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾8&lt;/span&gt;&lt;/center&gt;
&lt;p&gt;ã€€ã€€å¯ä»¥çœ‹åˆ°å¯¹äºåˆ†å¸ƒéå¸¸ä¸å‡åŒ€çš„æ–°å† è‚ºç‚ç¡®è¯Šæ•°é‡æ•°æ®æ¥è¯´ï¼Œè¿™ç§æ–¹æ³•è¡¨ç°å¾—ååˆ†ç³Ÿç³•ï¼Œä¸­é—´ä¸‰ä¸ªç±»éƒ½æ²¡æœ‰è®°å½•è½å…¥ï¼Œå¦‚æœä½¿ç”¨è¿™ç§æ–¹æ³•å¼ºè¡Œç»˜å›¾ï¼Œæ•ˆæœå°±ä¼šç±»ä¼¼ä¸Šä¸€ç¯‡æ–‡ç« ä¸­åœ°åŒºåˆ†å¸ƒå›¾éƒ¨åˆ†ï¼Œæœ€å¼€å§‹é‚£ä¸ªç³Ÿç³•çš„æ•ˆæœé‚£æ ·åªæœ‰æ¹–åŒ—ä¸€ä¸ªåœ°æ–¹æ˜¯æœ€æ·±çš„æš—çº¢è‰²ï¼Œè€Œå…¶ä»–åœ°æ–¹çš†ä¸ºæœ€æ·¡çš„è‰²é˜¶ï¼Œè¿™é‡Œå°±ä¸é‡å¤æ¼”ç¤ºã€‚&lt;/p&gt;
&lt;h3 id=&quot;fisherjenks&quot;&gt;2.1.3 FisherJenks&lt;/h3&gt;
&lt;p&gt;ã€€ã€€åœ¨äº†è§£&lt;code&gt;mapclassify&lt;/code&gt;ä¸­çš„&lt;code&gt;FisherJenks&lt;/code&gt;ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯&lt;em&gt;Jenks Natural Breaks&lt;/em&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;em&gt;Jenks Natural Breaks&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ã€€ã€€&lt;em&gt;Jenks Natural Breaks&lt;/em&gt;æ—¨åœ¨ä¸º1ç»´æ•°æ®è®¡ç®—åˆé€‚çš„åˆ’åˆ†ç‚¹ï¼Œä½¿å¾—ä¸åŒç»„ä¹‹é—´çš„å·®è·å°½å¯èƒ½å¤§çš„åŒæ—¶ç»„å†…å·®è·å°½å¯èƒ½å°ï¼Œå…¶æ€è·¯éå¸¸ç®€å•ï¼Œä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­è¿›è¡Œè¯´æ˜ï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€å¯¹äºä¸€ç»„å¾…åˆ†å‰²çš„åºåˆ—&lt;span class=&quot;math inline&quot;&gt;\(X=[4, 5, 9, 10]\)&lt;/span&gt;ï¼Œç°åœ¨éœ€è¦ä¸ºå…¶æ‰¾åˆ°å°†åŸå§‹æ•°æ®åˆ†ä¸º&lt;span class=&quot;math inline&quot;&gt;\(k=2\)&lt;/span&gt;éƒ¨åˆ†çš„æ–¹æ³•ï¼Œé‚£ä¹ˆå®é™…ä¸Šå°±æœ‰&lt;span class=&quot;math inline&quot;&gt;\([4], [5, 9, 10]\)&lt;/span&gt;ã€&lt;span class=&quot;math inline&quot;&gt;\([4, 5], [9, 10]\)&lt;/span&gt;ä»¥åŠ&lt;span class=&quot;math inline&quot;&gt;\([4, 5, 9],[10]\)&lt;/span&gt;è¿™ä¸‰ç§åˆ‡åˆ†æ–¹æ³•ï¼Œç°å®šä¹‰&lt;em&gt;sum of squared deviations for array mean&lt;/em&gt;ï¼ˆç®€ç§°&lt;em&gt;SDAM&lt;/em&gt;ï¼‰ï¼š&lt;br/&gt;&lt;span class=&quot;math display&quot;&gt;\[ SDAM=\sum_{i=1}^{n}(X_{i}-\bar{X})^{2} \]&lt;/span&gt;&lt;br/&gt;ã€€ã€€ä»¥åŠé’ˆå¯¹æ¯ä¸€ç§æ•°æ®åˆ†å±‚æ–¹æ³•ï¼Œåœ¨å…¶åˆ†å‡ºçš„æ¯ä¸€ç»„&lt;span class=&quot;math inline&quot;&gt;\(G_{i}\)&lt;/span&gt;ä¸Šè®¡ç®—ç»„å†…ç¦»å·®å¹³æ–¹å’Œå¹¶ç´¯åŠ æ‰€æœ‰ç»„çš„ç»“æœï¼Œå®šä¹‰ä¸º&lt;em&gt;sum of squared deviations for class means&lt;/em&gt;ï¼ˆç®€ç§°&lt;em&gt;SDCM_ALL&lt;/em&gt;ï¼‰ï¼š&lt;br/&gt;&lt;span class=&quot;math display&quot;&gt;\[ SDCM\_ALL=\sum_{i=1}^{k}\sum_{j=1}^{|G_{i}|}(G_{ij}-\bar{G_{i}})^2 \]&lt;/span&gt;&lt;br/&gt;ã€€ã€€æœ‰äº†&lt;span class=&quot;math inline&quot;&gt;\(SDAM\)&lt;/span&gt;å’Œ&lt;span class=&quot;math inline&quot;&gt;\(SDAM\_ALL\)&lt;/span&gt;ï¼Œç°åœ¨å¯¹åˆ†ç»„ä¼˜åŠ£å®šä¹‰ä¸€ä¸ªè¯„åˆ¤æŒ‡æ ‡&lt;em&gt;goodness of variance fit&lt;/em&gt;ï¼ˆç®€ç§°&lt;em&gt;GVF&lt;/em&gt;ï¼‰ï¼Œå–å€¼èŒƒå›´ä¸º&lt;span class=&quot;math inline&quot;&gt;\([0,1]\)&lt;/span&gt;ï¼Œè¶Šé«˜è¶Šå¥½ï¼š&lt;br/&gt;&lt;span class=&quot;math display&quot;&gt;\[ GVF=(SDAM-SCDM)/SDAM \]&lt;/span&gt;&lt;br/&gt;ã€€ã€€è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¯¹æ¯ä¸€ç§åˆ†ç»„æ–¹æ¡ˆè¿›è¡Œè¯„ä»·ï¼Œè­¬å¦‚å¯¹æˆ‘ä»¬ä¸Šé¢ç®€å•çš„ä¾‹å­ï¼š&lt;br/&gt;&lt;span class=&quot;math display&quot;&gt;\[ SDAM=(4-7)^2+(5-7)^2+(9-7)^2+(10-7)^2=26 \\ SDCM_{1}=[(4-4)^2]+[(5-8)^2+(9-8)^2+(10-8)^2]=14 \\ SDCM_{2}=[(4-4.5)^2+(5-4.5)^2]+[(9-9.5)^2+(10-9.5)^2]=1 \\ SDCM_{3}=[(4-6)^2+(5-6)^2+(9-6)^2]+[(10-10)^2]=14 \]&lt;/span&gt;&lt;br/&gt;ã€€ã€€åˆ™å¯¹åº”å„ç§æ–¹æ¡ˆçš„&lt;em&gt;GVF&lt;/em&gt;è®¡ç®—å¦‚ä¸‹ï¼š&lt;br/&gt;&lt;span class=&quot;math display&quot;&gt;\[ GVF_{1}=GVF_{3}=(26-14)/26=0.46 \\ GVF_{2}=(26-1)/26=0.96 \]&lt;/span&gt;&lt;br/&gt;ã€€ã€€å¯ä»¥çœ‹å‡ºç¬¬ä¸‰ç§æ–¹æ¡ˆ&lt;span class=&quot;math inline&quot;&gt;\([4, 5], [9, 10]\)&lt;/span&gt;çš„åˆ†å±‚æ–¹æ³•æ•ˆæœæœ€å¥½ï¼Œä¹Ÿä¸æˆ‘ä»¬å¯¹æ•°æ®çš„ç›´è§‚æ„Ÿè§‰ç›¸è´´åˆï¼Œè¿™å°±æ˜¯&lt;em&gt;Jenks Natural Breaks&lt;/em&gt;çš„åŸºæœ¬æ€è·¯ï¼Œä½†è¿™ç§æš´åŠ›éå†æ‰€æœ‰åˆ†ç»„æ–¹æ¡ˆçš„åšæ³•å¯¹æ•°æ®æ•°é‡åŠé€‰æ‹©åˆ†ç»„çš„ä¸ªæ•°å¾ˆæ•æ„Ÿï¼Œå°¤å…¶æ˜¯å¯¹åˆ†ç»„æ•°é‡ï¼Œä¸€æ—¦åˆ†ç»„æ•°é‡è¿‡äºå¤šï¼Œå¾…ç­›é€‰è®¡ç®—çš„æ–¹æ¡ˆæ•°é‡å°±å˜æˆäº†å¤©æ–‡æ•°å­—ï¼Œä¸‹é¢æˆ‘æ¥å‘Šè¯‰å¤§å®¶ä¸ºä»€ä¹ˆï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€å®šä¹‰é•¿åº¦ä¸º&lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt;çš„åºåˆ—&lt;span class=&quot;math inline&quot;&gt;\(X=[x_{1},x_{2},...,x_{n}]\)&lt;/span&gt;ã€‚ä¸”æ»¡è¶³&lt;span class=&quot;math inline&quot;&gt;\(i\leq{j}\)&lt;/span&gt;æ—¶&lt;span class=&quot;math inline&quot;&gt;\(x_{i}\leq{x_{j}}\)&lt;/span&gt;ï¼Œå³æ•´ä¸ªåºåˆ—ä»å°åˆ°å¤§å•è°ƒé€’å¢ï¼Œé‚£ä¹ˆå°†å…¶åˆ†æˆ&lt;span class=&quot;math inline&quot;&gt;\(k\)&lt;/span&gt;ç»„çš„è¿‡ç¨‹ï¼Œå¯ä»¥åˆ†è§£ä¸ºå…ˆé€‰æ‹©ç¬¬ä¸€ç»„ï¼Œä¸”ä¸ºäº†ä¿è¯å³è¾¹å‰©ä½™&lt;span class=&quot;math inline&quot;&gt;\(k-1\)&lt;/span&gt;ä¸ªç»„æ¯ç»„è‡³å°‘æœ‰1ä¸ªæ•°æ®åˆ†é…ï¼Œåˆ™ç¬¬ä¸€ç»„æœ‰&lt;span class=&quot;math inline&quot;&gt;\(n-k+1\)&lt;/span&gt;ç§åˆ†é…æ–¹å¼ï¼Œè€Œç¬¬ä¸€ç»„åŒ…å«çš„æ•°å­—æ•°é‡&lt;span class=&quot;math inline&quot;&gt;\(n_{1}\)&lt;/span&gt;ç¡®å®šä¹‹åï¼Œå‰©ä½™&lt;span class=&quot;math inline&quot;&gt;\(n-n_{1}\)&lt;/span&gt;ä¸ªæ•°æ®çš„ç»§ç»­åˆ†ç»„åˆå¯ä»¥è§†ä¸ºç‹¬ç«‹çš„é€’å½’åˆ†ç»„è¿‡ç¨‹ï¼Œå› æ­¤æœ€ç»ˆéœ€è¦è€ƒè™‘çš„æ–¹æ¡ˆä¸ªæ•°ç”¨å…¬å¼è¡¨è¾¾èµ·æ¥æœ‰äº›å¤æ‚ï¼Œä½†æ˜¯æ¢æˆè®¡ç®—æœºä¸­çš„&lt;em&gt;é€’å½’&lt;/em&gt;è¿‡ç¨‹å°±å˜å¾—ä¸€ç›®äº†ç„¶ï¼Œæˆ‘ç»è¿‡æ€è€ƒå’Œçº¸ä¸Šçš„æ¨æ¼”ï¼Œå†™å‡ºäº†ä¸‹é¢æ‰€ç¤ºçš„é€’å½’å‡½æ•°&lt;code&gt;f(n, k)&lt;/code&gt;æ¥å®ç°æ–¹æ¡ˆæ€»æ•°çš„è®¡ç®—ï¼š&lt;/p&gt;
&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;def f(n, k):

    # è‹¥ké€€åŒ–ä¸º2ï¼Œåˆ™æ˜¾ç„¶éœ€è¦n - 1ç§æ–¹æ¡ˆï¼Œè­¬å¦‚4ä¸ªæ•°å­—åˆ†2ç»„æœ‰3ç§æ–¹æ¡ˆ
    if k == 2:
        return n - 1

    else:
        # è‹¥kæœªé€€åŒ–ä¸º2ï¼Œåˆ™ç»§ç»­é€’å½’è¿‡ç¨‹
        return sum([f(n-_, k-1) for _ in range(1, n - k + 2)])&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€æœ‰äº†è¿™ä¸ªé€’å½’å‡½æ•°ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¥ç›´è§‚çš„çœ‹ä¸€çœ‹ä¸ºä»€ä¹ˆä¸èƒ½é€‰æ‹©å¤ªå¤šåˆ†ç»„ï¼Œé¦–å…ˆæˆ‘ä»¬å¯¹é•¿åº¦ä¸º100çš„åºåˆ—åˆ†ä¸º5ç»„è¯•è¯•ï¼š&lt;/p&gt;
&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;f(100, 3)
Out[11]: 4851&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€å¯ä»¥çœ‹åˆ°å¾…é€‰æ‹©çš„æ–¹æ¡ˆæ‰4851ä¸ªï¼Œè¿˜æ˜¯å¾ˆå°‘çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥ä¸‹æ¥å°†ç»„æ•°æé«˜åˆ°5ï¼š&lt;/p&gt;
&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;f(100, 5)
Out[12]: 3764376&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿéšç€é€’å½’æ·±åº¦çš„å¢å¤§ï¼Œå¾…é€‰æ‹©æ–¹æ¡ˆæ•°é‡ä¸€ä¸‹å­å°±æé«˜åˆ°ä¸‰ç™¾å¤šä¸‡ä¸ªï¼å†åˆ‡æ¢æˆ7è¯•ä¸€ä¸‹ï¼š&lt;/p&gt;
&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;f(100, 7)
Out[13]: 1120529256&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ã€€ã€€åœ¨è·‘ä¸Šè¿°ä»£ç æ—¶ï¼Œæ˜æ˜¾èƒ½æ„Ÿå—åˆ°è®¡ç®—èŠ±è´¹æ—¶é—´çš„æ¿€å¢ï¼Œæœ€ç»ˆç»“æœä¹Ÿè¾¾åˆ°æƒŠäººçš„11äº¿å¤šï¼çœ‹åˆ°è¿™ï¼Œæˆ‘ä»¬å°±æ˜ç™½äº†ï¼ŒåŸå§‹çš„&lt;em&gt;Jenks Natural Breaks&lt;/em&gt;ç®—æ³•è™½ç„¶å¾ˆæœ‰æ•ˆï¼Œä½†å¦‚æœä»¥æš´åŠ›éå†çš„æ–¹å¼è®¡ç®—ï¼Œå…¶å¤æ‚åº¦æ˜¯éš¾ä»¥åº”ä»˜æ—¥å¸¸éœ€æ±‚çš„ï¼Œä¸ºäº†å¯¹å…¶è¿›è¡Œä¼˜åŒ–ï¼Œä»¥åœ¨å°‘é‡çš„è®¡ç®—æ—¶é—´å†…è®¡ç®—å‡ºå°½å¯èƒ½é è°±çš„åˆ†ç»„ç»“æœï¼Œä¸€ç³»åˆ—æ”¹è‰¯åŠ é€Ÿæ–¹æ³•è¢«æå‡ºï¼Œè€Œ&lt;code&gt;mapclassify&lt;/code&gt;ä¸­çš„&lt;code&gt;FisherJenks&lt;/code&gt;ï¼Œå³ä¸º&lt;em&gt;jenks&lt;/em&gt;æ•™æˆåœ¨è®ºæ–‡&lt;em&gt;Fisher, W. D., 1958, On grouping for maximum homogeneity.&lt;/em&gt;çš„åŸºç¡€ä¸Šæå‡ºçš„æ”¹è‰¯ç®—æ³•ï¼Œä½†è¿™æ˜¯ä¸€ä¸ªå¾ˆç¥ç§˜çš„ç®—æ³•ï¼Œæ ¹æ®https://macwright.org/2013/02/18/literate-jenks.html ä¸­çš„ä»‹ç»ï¼Œ&lt;em&gt;jenks&lt;/em&gt;æ•™æˆçš„åŸå§‹è®ºæ–‡æ²¡æœ‰ç•™ä¸‹æ•°å­—åŒ–èµ„æ–™ï¼Œä¸€ç›´ä¸ºå ªè¨æ–¯å¤§å­¦åœ°ç†å­¦ç³»æ‰€ç§æœ‰ï¼Œè€Œéšç€1996å¹´&lt;em&gt;jenks&lt;/em&gt;æ•™æˆçš„ç¦»ä¸–ï¼ŒåŸè®ºæ–‡éœ€è¦åˆ°2072å¹´ç‰ˆæƒæ‰èƒ½åˆ°æœŸå…¬å¼€ï¼Œæ‰€ä»¥æˆ‘ä»¬ç°åœ¨åœ¨å„ç§&lt;code&gt;GIS&lt;/code&gt;ç±»è½¯ä»¶ä»¥åŠå„ç§å¼€æºè½¯ä»¶åŒ…ä¸­ä½¿ç”¨åˆ°çš„&lt;code&gt;fisher jenks&lt;/code&gt;ç®—æ³•ï¼Œå‡æ˜¯å¯¹æœ€åˆçš„ä¸€æ®µ&lt;code&gt;Fortran&lt;/code&gt;ä»£ç çš„ç§»æ¤å’Œæ”¹é€ ï¼Œè¿™ä¹Ÿæˆäº†ä¸€æ®µæœªè§£ä¹‹è°œï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥å»https://stat.ethz.ch/pipermail/r-sig-geo/2006-March/000811.html äº†è§£æ›´å¤šã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€å›åˆ°æˆ‘ä»¬çš„ä¸»é¢˜ï¼Œææ¸…æ¥šäº†&lt;code&gt;FisherJenks&lt;/code&gt;çš„è®¡ç®—ç›®æ ‡ä¹‹åï¼Œæˆ‘ä»¬åŒæ ·åˆ©ç”¨&lt;code&gt;mapclassify&lt;/code&gt;è®¡ç®—åˆ†å±‚ç»“æœï¼Œå…¶é»˜è®¤åˆ†å±‚ä¸º5ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309015011263-1779893842.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾9&lt;/span&gt;&lt;/center&gt;
&lt;p&gt;ã€€ã€€å¯ä»¥çœ‹åˆ°ï¼Œåœ¨è¿™ç§æ–¹å¼ä¸‹ï¼Œæ•°æ®çš„åˆ†ç»„è¾ƒä¸ºåˆç†ï¼ŒåŒæ ·å°†&lt;code&gt;geopandas.GeoDataFrame.plot()&lt;/code&gt;ä¸­çš„å‚æ•°è®¾ç½®ä¸º&lt;code&gt;FisherJenks&lt;/code&gt;ç»˜åˆ¶å‡ºå›¾10ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309015020468-715021201.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾10&lt;/span&gt;&lt;/center&gt;
&lt;p&gt;ã€€ã€€ä¸&lt;code&gt;BoxPlot&lt;/code&gt;ç›¸æ¯”å·®è·è¿˜æ˜¯æ¯”è¾ƒæ˜æ˜¾ï¼Œå¤„äºç¬¬äºŒçº§ä¸¥é‡ç¨‹åº¦çš„çœä»½åªæœ‰æ²³å—ã€å¹¿ä¸œåŠæµ™æ±Ÿï¼Œæ›´è´´è¿‘æ•°æ®çš„è‡ªç„¶å±‚æ¬¡ç»“æ„ã€‚&lt;/p&gt;
&lt;h3 id=&quot;naturalbreaks&quot;&gt;2.1.4 NaturalBreaks&lt;/h3&gt;
&lt;p&gt;ã€€ã€€ç­‰ä¸‹ï¼ä¸Šä¸€å°ç»“ä¸­çš„&lt;code&gt;FisherJenks&lt;/code&gt;ä¸å°±æ˜¯æˆ‘ä»¬ä¿—ç§°çš„è‡ªç„¶æ–­ç‚¹æ³•å—ï¼Œæ€ä¹ˆåˆæ¥äº†ä¸ª&lt;code&gt;NaturalBreaks&lt;/code&gt;ï¼Ÿå…¶å®æˆ‘åœ¨ç¿»çœ‹&lt;code&gt;mapclassify&lt;/code&gt;çš„å®˜æ–¹æ–‡æ¡£çœ‹åˆ°è¿™é‡Œæ—¶ï¼Œä¹Ÿå¾ˆç–‘æƒ‘ï¼Œäºæ˜¯æˆ‘ä»”ç»†ç ”ç©¶äº†&lt;code&gt;NaturalBreaks&lt;/code&gt;å¯¹åº”çš„æºä»£ç ï¼Œè¿½æ ¹æº¯æºï¼ŒWHAT?ï¼Œç«Ÿç„¶æ˜¯&lt;code&gt;k-mean&lt;/code&gt;ç®—æ³•ï¼Œè€Œä¸”ç›´æ¥è°ƒç”¨çš„&lt;code&gt;scikit-learn&lt;/code&gt;çš„&lt;code&gt;KMEANS&lt;/code&gt;ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309015038239-531320710.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾11&lt;/span&gt;&lt;/center&gt;
&lt;p&gt;ã€€ã€€ä¸è¿‡ä¹Ÿå¯ä»¥ç†è§£ï¼Œæ¯•ç«Ÿ&lt;code&gt;k-means&lt;/code&gt;å°±æ˜¯åœ¨æ‰¾æ•°æ®ä¸­ç»„å†…ç›¸ä¼¼åº¦å°½å¯èƒ½é«˜ä¸”ç»„é—´å·®å¼‚å°½é‡å¤§çš„ç°‡ï¼Œå…³äº&lt;code&gt;k-means&lt;/code&gt;æˆ‘æƒ³æˆ‘å°±ä¸éœ€è¦èµ˜è¿°äº†ï¼Œæ¯•ç«Ÿæ˜¯æœ€åŸºç¡€çš„æ•°æ®æŒ–æ˜ç®—æ³•ä¹‹ä¸€ï¼Œè€Œ&lt;code&gt;scikit-learn&lt;/code&gt;é‡Œé»˜è®¤çš„&lt;code&gt;KMEANS&lt;/code&gt;ä½¿ç”¨çš„&lt;code&gt;k-means++&lt;/code&gt;åˆå§‹æ–¹å¼ï¼Œåªæ˜¯åœ¨åŸå§‹&lt;code&gt;k-means&lt;/code&gt;åŸºç¡€ä¸Šï¼Œä¿®æ”¹äº†åç»­åˆå§‹ç‚¹çš„æ¦‚ç‡å¯†åº¦ï¼Œä½¿å¾—&lt;code&gt;k-means&lt;/code&gt;ç®—æ³•æ›´åŠ é²æ£’ç¨³å®šï¼Œä¸‹é¢ç›´æ¥æ¥çœ‹&lt;code&gt;NaturalBreaks&lt;/code&gt;çš„æ•°æ®åˆ†å±‚ç»“æœï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309015023169-2083136038.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾12&lt;/span&gt;&lt;/center&gt;
&lt;p&gt;ã€€ã€€å’Œ&lt;code&gt;FisherJenks&lt;/code&gt;çš„ç»“æœç«Ÿç„¶ä¸€æ ·ï¼Œä½†å¦‚æœä½ å¤šè¿è¡Œå‡ æ¬¡ä¼šå‘ç°è¿™ä¸ªç»“æœä¸æ˜¯å®Œå…¨å›ºå®šçš„ï¼Œç”±äº&lt;code&gt;k-means&lt;/code&gt;éšæœºåˆå§‹è¿­ä»£èµ·ç‚¹ï¼Œå› æ­¤ä¸åŒæ¬¡è¿è¡Œçš„ç»“æœå¯èƒ½ä¼šæœ‰è½»å¾®å·®åˆ«ï¼ˆå›¾13ï¼‰ï¼Œåœ¨æ•°æ®é‡å¾ˆå¤§æ—¶ï¼ŒåŸºäºå¿«é€Ÿèšç±»æ³•çš„&lt;code&gt;NaturalBreaks&lt;/code&gt;æ˜¯è¾ƒä¸ºç†æƒ³çš„æ•°æ®åˆ†å±‚é€‰æ‹©ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309015041660-609558970.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾13&lt;/span&gt;&lt;/center&gt;
&lt;p&gt;ã€€ã€€é…åˆ&lt;code&gt;geopandas&lt;/code&gt;ç»˜å›¾åªéœ€è¦æŠŠ&lt;code&gt;scheme&lt;/code&gt;å‚æ•°ä¿®æ”¹ä¸º&lt;code&gt;NaturalBreaks&lt;/code&gt;å³å¯ï¼Œå› ä¸ºè·Ÿ&lt;code&gt;FisherJenks&lt;/code&gt;ç±»ä¼¼ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚&lt;/p&gt;
&lt;h3 id=&quot;jenkscaspall&quot;&gt;2.1.5 JenksCaspall&lt;/h3&gt;
&lt;p&gt;ã€€ã€€&lt;code&gt;mapclassify&lt;/code&gt;ä¸­çš„&lt;code&gt;JenksCaspall&lt;/code&gt;æœ¬è´¨ä¸Šä¸º&lt;code&gt;k-medians&lt;/code&gt;èšç±»ï¼Œå…¶é¦–å…ˆæ ¹æ®åˆ†å±‚å±‚æ•°&lt;span class=&quot;math inline&quot;&gt;\(k\)&lt;/span&gt;åœ¨æ•°æ®ä¸­æ‰¾åˆ°&lt;span class=&quot;math inline&quot;&gt;\(k-1\)&lt;/span&gt;ä¸ªåˆ†ä½æ•°ç‚¹ï¼Œå°†åŸå§‹æ•°æ®ç­‰åˆ†ä¸ºæ•°é‡å°½å¯èƒ½ç›¸åŒçš„&lt;span class=&quot;math inline&quot;&gt;\(k\)&lt;/span&gt;ä»½å¹¶ä»¥è¿™&lt;span class=&quot;math inline&quot;&gt;\(k\)&lt;/span&gt;ä»½æ•°æ®çš„ä¸­ä½æ•°ä½œä¸ºå„è‡ªçš„åˆå§‹ç‚¹ï¼Œæ¥ç€åŸºäº&lt;code&gt;k-medians&lt;/code&gt;çš„æ€æƒ³ï¼Œè¿­ä»£è®¡ç®—ä¸ºæ¯ä¸ªæ ·æœ¬ç‚¹æ‰¾åˆ°ä¸å…¶è·ç¦»æ›´è¿‘çš„ä¸­ä½æ•°ç‚¹ï¼Œå¹¶ä»¥æ­¤é‡æ–°åˆ’åˆ†åˆ†å±‚ä»¥åŠé‡æ–°è®¡ç®—å„åˆ†å±‚ä¸­ä½æ•°ç‚¹ï¼Œç›´è‡³æ¯ä¸ªæ•°æ®å¯¹åº”çš„åˆ†å±‚æ ‡ç­¾ä¸å†å˜åŒ–ï¼Œå†å°†æ¯ä¸ªåˆ†å±‚ä¸­æ•°æ®çš„æœ€å¤§å€¼ä½œä¸ºé—´æ–­ç‚¹ï¼Œä¸‹é¢æˆ‘ä»¬ä»&lt;code&gt;mapclassify&lt;/code&gt;æºä»£ç ä¸­æŠ½å‡ºè¯¥éƒ¨åˆ†ä»£ç ï¼Œå¯¹å…¶è¿­ä»£è¿‡ç¨‹å¯è§†åŒ–ï¼Œå…·ä½“çš„ä»£ç è¾ƒå¤šï¼Œè¯·åœ¨æ–‡ç« å¼€å¤´çš„&lt;code&gt;Github&lt;/code&gt;ä»“åº“ä¸­å¯¹åº”æœ¬æ–‡è·¯å¾„ä¸‹æŸ¥çœ‹ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309015046198-1538994121.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾14&lt;/span&gt;&lt;/center&gt;
&lt;p&gt;ã€€ã€€å…¶ä¸­é¢œè‰²åŒºåˆ†å¯¹åº”è¿­ä»£è½®æ¬¡çš„æ•°æ®åˆ†å±‚å½’å±ï¼Œè™šçº¿ä»£è¡¨å¯¹åº”è¿­ä»£è½®æ¬¡çš„é—´æ–­ç‚¹ï¼Œä»”ç»†å¯ä»¥çœ‹å‡ºåœ¨è¿­ä»£è¿‡ç¨‹ä¸­æ•°æ®åˆ†å±‚çš„å˜åŒ–æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ç”¨&lt;code&gt;JenksCaspall&lt;/code&gt;æ•°æ®åˆ†å±‚å‡ºæ¥çš„ç»“æœï¼Œæ— è®ºæ•°æ®åˆ†å¸ƒå¦‚ä½•ï¼Œæ¯ä¸ªåˆ†å±‚å†…éƒ¨çš„æ•°æ®ä¸ªæ•°éƒ½è¾ƒä¸ºå‡åŒ€ï¼Œä¸‹é¢æˆ‘ä»¬ç”¨&lt;code&gt;JenksCaspall&lt;/code&gt;æ¥åˆ’åˆ†çœä»½ç–«æƒ…ä¸¥é‡æƒ…å†µï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309015052038-2044406604.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾15&lt;/span&gt;&lt;/center&gt;
&lt;p&gt;ã€€ã€€å¯ä»¥çœ‹åˆ°è¢«åˆ†åˆ°æœ€ä¸¥é‡çº§åˆ«çš„ä¸å†åªæœ‰æ¹–åŒ—çœï¼Œå½“ä½ å¸Œæœ›æ•°æ®åˆ†å±‚ä¸ªæ•°è¾ƒä¸ºå‡åŒ€æ—¶ï¼Œ&lt;code&gt;JenksCaspall&lt;/code&gt;æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;h3 id=&quot;headtailbreaks&quot;&gt;2.1.6 HeadTailBreaks&lt;/h3&gt;
&lt;p&gt;ã€€ã€€&lt;code&gt;HeadTailBreaks&lt;/code&gt;æ˜¯ä¸€ç§è¾ƒä¸ºå´­æ–°çš„æ•°æ®åˆ†å±‚æ–¹æ³•ï¼Œå‡ºè‡ª&lt;em&gt;Head/Tail Breaks: A New Classification Scheme for Data with a Heavy-Tailed Distribution&lt;/em&gt;ï¼ˆ&lt;a href=&quot;https://www.tandfonline.com/doi/abs/10.1080/00330124.2012.700499&quot; class=&quot;uri&quot;&gt;https://www.tandfonline.com/doi/abs/10.1080/00330124.2012.700499&lt;/a&gt;ï¼‰ï¼Œä¸“é—¨ç”¨äºå¯¹å…·æœ‰é‡å°¾ç‰¹ç‚¹çš„æ•°æ®è¿›è¡Œåˆ†å±‚ï¼Œæ‰€è°“é‡å°¾å³åœ¨æ•´ä¸ªæ•°æ®ä¸­ï¼Œè¾ƒå°çš„å€¼æ•°é‡å¾€å¾€è¾ƒå¤šï¼Œè€Œæœ€å¤§çš„ä½äºå¤´éƒ¨çš„å€¼æ•°é‡å¾ˆå°‘ï¼Œå…¶æ•°æ®åˆ†å¸ƒå‘ˆç°å‡ºâ€œå°¾é‡å¤´è½»â€çš„ç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309015100358-958508288.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾16&lt;/span&gt;&lt;/center&gt;
&lt;p&gt;ã€€ã€€è¿™ç§å…¸å‹å¦‚äººå£å¯†åº¦åˆ†å¸ƒæ•°æ®ï¼Œæ•°å€¼è¾ƒä½çš„ç‚¹å¾€å¾€æ•°é‡ä¼—å¤šï¼Œèšé›†åœ¨å°¾éƒ¨ï¼Œå½¢æˆé‡å°¾ï¼Œ&lt;code&gt;HeadTailBreaks&lt;/code&gt;çš„ä¼˜ç‚¹æ˜¯å¯ä»¥å°½é‡åœ¨åœ°åŒºåˆ†å¸ƒå›¾ä¸­çœŸå®åæ˜ åŸå§‹æ•°æ®çš„åˆ†å¸ƒç‰¹ç‚¹ï¼Œå¦‚å›¾17ï¼ˆ&lt;a href=&quot;https://sites.google.com/site/thepowerofcartography/head-tail-breaks&quot; class=&quot;uri&quot;&gt;https://sites.google.com/site/thepowerofcartography/head-tail-breaks&lt;/a&gt;ï¼‰ï¼Œå·¦è¾¹æ˜¯&lt;code&gt;FisherJenks&lt;/code&gt;ï¼Œå³è¾¹æ˜¯&lt;code&gt;HeadTailBreaks&lt;/code&gt;ï¼Œå¯ä»¥çœ‹å‡ºï¼Œå³å›¾ç›¸å¯¹äºå·¦å›¾æ›´å¥½åœ°ä½“ç°äº†åŸå§‹æ•°æ®çš„é‡å°¾ç‰¹ç‚¹ï¼Œæœ€æµ…è‰²çš„å›¾æ–‘æ•°é‡æ˜æ˜¾å¤šäºæ¬¡æµ…è‰²çš„å›¾æ–‘ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309015106363-1687908950.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾17&lt;/span&gt;&lt;/center&gt;
&lt;p&gt;ã€€ã€€åœ¨&lt;code&gt;geopandas&lt;/code&gt;ä¸­ä½¿ç”¨æ—¶ä¼ å…¥&lt;code&gt;scheme='HeadTailBreaks'&lt;/code&gt;å³å¯ï¼ˆç”±äºæ–°å† è‚ºç‚å„çœä»½ç¡®è¯Šæ•°é‡æ•°æ®å°¾éƒ¨å’Œå¤´éƒ¨æœ€å¤§å€¼ä¹‹é—´æ²¡æœ‰è¾ƒä¸ºè¿ç»­çš„ä¸­é—´å€¼è¿‡æ¸¡ï¼Œä¸å¤ªé€‚åˆç”¨æ­¤æ–¹æ³•æ•…ä¸ä½œæ¼”ç¤ºï¼‰ã€‚&lt;/p&gt;
&lt;h3 id=&quot;quantiles&quot;&gt;2.1.7 Quantiles&lt;/h3&gt;
&lt;p&gt;ã€€ã€€&lt;code&gt;Quantiles&lt;/code&gt;å³åˆ†ä½æ•°ï¼ŒåŸç†å¾ˆç®€å•ï¼Œæ ¹æ®åˆ†ä½æ•°ç‚¹å¯¹åŸæ•°æ®è¿›è¡Œç­‰åˆ†ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309015110189-1285467204.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾18&lt;/span&gt;&lt;/center&gt;
&lt;p&gt;ã€€ã€€åˆ©ç”¨&lt;code&gt;Quantiles&lt;/code&gt;å¯¹ç¡®è¯Šæ•°é‡åˆ†ç»„å¯è§†åŒ–ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309015116923-507690064.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾19&lt;/span&gt;&lt;/center&gt;
&lt;h3 id=&quot;percentiles&quot;&gt;2.1.8 Percentiles&lt;/h3&gt;
&lt;p&gt;ã€€ã€€åŒæ ·æ˜¯ä½¿ç”¨åˆ†ä½æ•°å¯¹æ•°æ®è¿›è¡Œåˆ†å±‚ï¼Œ&lt;code&gt;Percentiles&lt;/code&gt;æä¾›äº†å‚æ•°&lt;code&gt;pct&lt;/code&gt;ä»¥å…è®¸ç”¨æˆ·ä»¥ç™¾åˆ†ä½æ•°çš„å½¢å¼ä¼ å…¥è‡ªå®šä¹‰åˆ†éš”ç‚¹ï¼Œè­¬å¦‚æˆ‘ä»¬å°†&lt;code&gt;[1, 50, 99, 100]&lt;/code&gt;ä½œä¸º&lt;code&gt;pct&lt;/code&gt;çš„ä¼ å…¥å€¼ï¼Œåˆ™åˆ†ç»„ç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309015123530-1687884006.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾20&lt;/span&gt;&lt;/center&gt;
&lt;p&gt;ã€€ã€€æ¯ä¸ªä¼ å…¥çš„ç™¾åˆ†ä½ç‚¹å…¶å·¦è¾¹åˆ°ä¸Šä¸€ä¸ªåˆ†éš”ç‚¹ä¸ºæ­¢ï¼ŒåŒ…æ‹¬å…¶æœ¬èº«ï¼Œå°†è¢«åˆ†åˆ°åŒä¸€ç»„ï¼Œå¯¹åº”çš„å›¾åƒå¦‚å›¾21ï¼Œåœ¨&lt;code&gt;geopandas&lt;/code&gt;ä¸­ä½¿ç”¨æ—¶é™¤äº†è®¾ç½®&lt;code&gt;scheme='Percentiles'&lt;/code&gt;ä¹‹å¤–ï¼Œè¿˜è¦åœ¨å¦ä¸€ä¸ªå­—å…¸å‹å‚æ•°&lt;code&gt;classification_kwds&lt;/code&gt;ä¸­ä¼ å…¥&lt;code&gt;{'pct': ç™¾åˆ†ä½æ•°åˆ—è¡¨}&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309015128288-672011178.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾21&lt;/span&gt;&lt;/center&gt;
&lt;h3 id=&quot;stdmean&quot;&gt;2.1.9 StdMean&lt;/h3&gt;
&lt;p&gt;ã€€ã€€&lt;code&gt;StdMean&lt;/code&gt;çš„æ€æƒ³ç±»ä¼¼å‰é¢çš„ç®±çº¿å›¾ï¼Œä¸åŒçš„æ˜¯ç®±çº¿å›¾å±äºéå‚æ•°æ–¹æ³•ï¼Œè€Œ&lt;code&gt;StdMean&lt;/code&gt;å»ºç«‹åœ¨æ­£æ€åˆ†å¸ƒä¸ºåŸºç¡€çš„ç»éªŒæ³•åˆ™ä¹‹ä¸Šï¼Œå³å¯¹äºæ­£æ€åˆ†å¸ƒè€Œè¨€ï¼Œ&lt;strong&gt;68%çš„æ•°æ®å°†åˆ†å¸ƒåœ¨è·ç¦»å‡å€¼1ä¸ªæ ‡å‡†å·®ä¹‹å†…ï¼Œ95%çš„æ•°æ®åœ¨2ä¸ªæ ‡å‡†å·®ä¹‹å†…ï¼Œ99.7%çš„æ•°æ®åœ¨3ä¸ªæ ‡å‡†å·®ä¹‹å†…&lt;/strong&gt;ï¼Œå³å¯¹åŸå§‹æ•°æ®æ ‡å‡†åŒ–ä¹‹åï¼Œæ ¹æ®è·ç¦»æ ·æœ¬å‡å€¼çš„ä¸åŒæ ‡å‡†å·®èŒƒå›´æ¥åˆ’åˆ†æ•°æ®ï¼Œ&lt;code&gt;mapclassify&lt;/code&gt;ä¸­çš„&lt;code&gt;StdMean&lt;/code&gt;é»˜è®¤æŒ‰ç…§&lt;code&gt;[-2, -1, 1, 2]&lt;/code&gt;æ¥åˆ’åˆ†ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309015132513-736624182.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾22&lt;/span&gt;&lt;/center&gt;
&lt;h3 id=&quot;userdefined&quot;&gt;2.1.10 UserDefined&lt;/h3&gt;
&lt;p&gt;ã€€ã€€å…³äºæ•°æ®åˆ†å±‚æœ€åè¦ä»‹ç»çš„æ˜¯è‡ªå®šä¹‰åˆ†å±‚ï¼Œå³æŒ‰ç…§ç”¨æˆ·è¾“å…¥çš„åˆ†éš”ç‚¹æ¥è‡ªç”±åˆ’åˆ†æ•°æ®é›†ï¼Œè­¬å¦‚æˆ‘ä»¬æŒ‰ç…§æ–°æµªæ–°é—»ç–«æƒ…åœ°å›¾çš„åˆ’åˆ†æ–¹å¼ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309015136754-277644150.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾23&lt;/span&gt;&lt;/center&gt;
&lt;p&gt;ã€€ã€€ç»“åˆ&lt;code&gt;geopandas&lt;/code&gt;ä½¿ç”¨æ—¶é™¤äº†è®¾ç½®&lt;code&gt;scheme='UserDefined'&lt;/code&gt;ä»¥å¤–ï¼Œè¿˜è¦è®¾ç½®&lt;code&gt;classification_kwds&lt;/code&gt;ä¸­çš„&lt;code&gt;bins=åˆ†éš”ç‚¹åˆ—è¡¨&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;fig, ax = plt.subplots(figsize=(10, 10))

ax = data_with_geometry.to_crs(albers_proj).plot(ax=ax,
                                                 column='province_confirmedCount',
                                                 cmap='Reds',
                                                 missing_kwds={
                                                     &quot;color&quot;: &quot;lightgrey&quot;,
                                                     &quot;edgecolor&quot;: &quot;black&quot;,
                                                     &quot;hatch&quot;: &quot;////&quot;,
                                                     &quot;label&quot;: &quot;ç¼ºå¤±å€¼&quot;
                                                 },
                                                 legend=True,
                                                 scheme='UserDefined',
                                                 classification_kwds={
                                                     'bins': [9, 99, 499, 999, 9999]
                                                 },
                                                 legend_kwds={
                                                     'loc': 'lower left',
                                                     'title': 'ç¡®è¯Šæ•°é‡åˆ†çº§',
                                                     'shadow': True
                                                 })

ax = nine_lines.geometry.to_crs(albers_proj).plot(ax=ax,
                                                  edgecolor='grey',
                                                  linewidth=3,
                                                  alpha=0.4)

ax.axis('off')
plt.suptitle('æ–°å‹å† çŠ¶è‚ºç‚ç´¯è®¡ç¡®è¯Šæ•°é‡åœ°åŒºåˆ†å¸ƒ', fontsize=24) # æ·»åŠ æœ€é«˜çº§åˆ«æ ‡é¢˜
plt.tight_layout(pad=4.5) # è°ƒæ•´ä¸åŒæ ‡é¢˜ä¹‹é—´é—´è·
ax.text(-2800000, 1300000, '* åŸå§‹æ•°æ®æ¥æºï¼šä¸é¦™å›­ï¼Œ\nå…¶ä¸­å°æ¹¾åŠé¦™æ¸¯æ•°æ®ç¼ºå¤±') # æ·»åŠ æ•°æ®è¯´æ˜

fig.savefig('å›¾24.png', dpi=300)&lt;/code&gt;
&lt;/pre&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309015142043-704330219.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾24&lt;/span&gt;&lt;/center&gt;
&lt;h2 id=&quot;è‰²å½©æ–¹æ¡ˆçš„é€‰æ‹©&quot;&gt;2.2 è‰²å½©æ–¹æ¡ˆçš„é€‰æ‹©&lt;/h2&gt;
&lt;p&gt;ã€€ã€€å‰é¢å·²ç»è¯¦ç»†ä»‹ç»äº†æ•°æ®åˆ†å±‚å¸¸ç”¨çš„å„ç§æ–¹æ³•åŠä½¿ç”¨åœºæ™¯ï¼Œâ€œåˆ†å±‚â€çš„éƒ¨åˆ†åšå®Œä¹‹åï¼Œå°±åˆ°äº†è®¾è‰²çš„éƒ¨åˆ†ï¼Œå…¶å®è‰²å½©æ­é…æ˜¯æ¯”è¾ƒä¸»è§‚çš„äº‹æƒ…ï¼Œä½†æƒ³è¦è‡ªå·±åˆ›é€ å‡ºç¾è§‚åˆç†çš„é…è‰²æ–¹æ¡ˆå¹¶ä¸æ˜¯å®¹æ˜“çš„äº‹æƒ…ï¼Œä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»ä¸¤ç§é€‰æ‹©é…è‰²æ–¹æ¡ˆçš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h3 id=&quot;åŸºäºpalettableçš„é…è‰²&quot;&gt;2.2.1 åŸºäºpalettableçš„é…è‰²&lt;/h3&gt;
&lt;p&gt;ã€€ã€€ä¸‹é¢æˆ‘è¦ç»™å¤§å®¶ä»‹ç»çš„&lt;code&gt;Python&lt;/code&gt;ç¬¬ä¸‰æ–¹åº“&lt;code&gt;palettable&lt;/code&gt;åœ¨æˆ‘ä¹‹å‰å…³äºè¯äº‘å›¾çš„ä¸€ç¯‡æ–‡ç« ä¸­ä»‹ç»&lt;code&gt;stylecloud&lt;/code&gt;æ—¶ä»‹ç»è¿‡ï¼Œæ˜¯ä¸“é—¨å¸®åŠ©æˆ‘ä»¬ä¸ºå¯è§†åŒ–ä½œå“é…è‰²çš„ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€&lt;code&gt;palettable&lt;/code&gt;ä¸ä¾èµ–å…¶ä»–ä¸‰æ–¹åº“ï¼Œçº¯&lt;code&gt;Python&lt;/code&gt;å®ç°ï¼Œå…¶å¼ºå¤§ä¹‹å¤„åœ¨äºå†…ç½®äº†æ•°é‡æƒŠäººçš„ç»å…¸é…è‰²æ–¹æ¡ˆï¼Œå›Šæ‹¬äº†&lt;em&gt;CartoColors&lt;/em&gt;ã€&lt;em&gt;cmocean&lt;/em&gt;ã€&lt;em&gt;Colorbrewer2&lt;/em&gt;ã€&lt;em&gt;Cubehelix&lt;/em&gt;ã€&lt;em&gt;Light &amp;amp; Bartlein&lt;/em&gt;ã€&lt;em&gt;matplotlib&lt;/em&gt;ã€&lt;em&gt;MyCarta&lt;/em&gt;ã€&lt;em&gt;Scientific&lt;/em&gt;ã€&lt;em&gt;Tableau&lt;/em&gt;ä»¥åŠ&lt;em&gt;The Wes Anderson Palettes blog&lt;/em&gt;ä¸­çš„å¤§é‡ç»å…¸é…è‰²æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä½¿ç”¨èµ·æ¥éå¸¸ç®€å•ï¼Œè­¬å¦‚å¦‚æœæˆ‘ä»¬æƒ³è¦ä½¿ç”¨&lt;code&gt;palettable.cmocean.sequential&lt;/code&gt;ä¸­çš„è‰²å½©ï¼Œå…¶ä¸­&lt;code&gt;cmocean&lt;/code&gt;è¡¨ç¤ºè‰²å½©æ¥æºï¼Œ&lt;code&gt;sequential&lt;/code&gt;è¡¨ç¤ºè¿ç»­å‹è‰²å½©ï¼Œå°±å¯ä»¥å…ˆåœ¨å¯¹åº”çš„&lt;a href=&quot;https://jiffyclub.github.io/palettable/cmocean/sequential/&quot;&gt;ç¤ºä¾‹ç½‘é¡µ&lt;/a&gt;ä¸‹æŸ¥çœ‹æ‰€æœ‰æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309015146588-1147561697.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾25&lt;/span&gt;&lt;/center&gt;
&lt;p&gt;ã€€ã€€æ¯”å¦‚æˆ‘å¯¹å…¶ä¸­çš„&lt;code&gt;Dense&lt;/code&gt;æ–¹æ¡ˆå¾ˆä¸­æ„ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309015149732-1822314769.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾26&lt;/span&gt;&lt;/center&gt;
&lt;p&gt;ã€€ã€€å°±å¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ–¹å¼ï¼Œå…ˆä»&lt;code&gt;palettable&lt;/code&gt;ä¸­å¯¼å…¥å¯¹åº”é¢œè‰²ï¼Œè­¬å¦‚æˆ‘ä»¬å¯¼å…¥&lt;code&gt;Dense_20&lt;/code&gt;ï¼Œ20è¡¨ç¤ºå…¶è‡ªå¸¦çš„ç¦»æ•£è‰²å½©æ•°é‡ï¼Œå¹¶æŸ¥çœ‹å…¶è‡ªå¸¦çš„ç¦»æ•£è‰²å½©RGBå€¼ã€ç¦»æ•£è‰²ç›˜ä»¥åŠè¿ç»­è‰²ç›˜ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;from palettable.cmocean.sequential import Dense_20
from pprint import pprint

print('å¯¹åº”ç¦»æ•£é¢œè‰²ï¼š')
pprint(Dense_20.colors)
print('ç¦»æ•£ï¼š')
Dense_20.show_discrete_image()
print('è¿ç»­:')
Dense_20.show_continuous_image()&lt;/code&gt;
&lt;/pre&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309015153958-1998393516.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾27&lt;/span&gt;&lt;/center&gt;
&lt;p&gt;ã€€ã€€ä½¿ç”¨&lt;code&gt;.mpl_colormap&lt;/code&gt;å°†å…¶è½¬æ¢ä¸º&lt;code&gt;matplotlib&lt;/code&gt;å¯æ¥å—çš„cmapæ•°æ®ç»“æ„ï¼Œä½œä¸º&lt;code&gt;cmap&lt;/code&gt;å‚æ•°å€¼ä¼ å…¥ç»˜å›¾éƒ¨åˆ†å³å¯ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309015159678-162974612.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾28&lt;/span&gt;&lt;/center&gt;
&lt;p&gt;ã€€ã€€å¦‚æœæƒ³è¦ç¿»è½¬æ˜ å°„æ–¹å‘ï¼Œæ¢æˆ&lt;code&gt;Dense_20_r&lt;/code&gt;å†é‡å¤ä¸Šè¿°æ“ä½œå³å¯ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309015204618-228405999.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾29&lt;/span&gt;&lt;/center&gt;
&lt;p&gt;ã€€ã€€æ›´å¤š&lt;code&gt;palettable&lt;/code&gt;è‡ªå¸¦è‰²å½©æ–¹æ¡ˆï¼Œå¯ä»¥åœ¨https://jiffyclub.github.io/palettable/ ä¸‹æŸ¥çœ‹æ¢ç´¢ã€‚&lt;/p&gt;
&lt;h3 id=&quot;åŸºäºå›¾ç‰‡ä¸»è‰²çš„é…è‰²&quot;&gt;2.2.2 åŸºäºå›¾ç‰‡ä¸»è‰²çš„é…è‰²&lt;/h3&gt;
&lt;p&gt;ã€€ã€€æˆ‘ä»¬åœ¨ç”Ÿæ´»ä¸­å¶ç„¶ä¼šçœ‹åˆ°é…è‰²æ–¹æ¡ˆè®©äººçœ¼å‰ä¸€äº®çš„æµ·æŠ¥æˆ–ç”»ä½œï¼Œè¿™æ—¶å¦‚æœä½ æƒ³å°†è¿™äº›ä½œå“ä¸­çš„ä¸»è¦é¢œè‰²ä¹Ÿåº”ç”¨åˆ°è‡ªå·±çš„å¯è§†åŒ–ä½œå“ä¸Šï¼Œå¯ä»¥å‚è€ƒæˆ‘ä¸‹é¢çš„åšæ³•ï¼Œè¿™é‡Œä»¥æˆ‘å¾ˆå–œæ¬¢çš„è´¾æ¨ŸæŸ¯å¯¼æ¼”çš„ã€Šä¸€ç›´æ¸¸åˆ°æµ·æ°´å˜è“ã€‹ä¸­æ–‡ç‰ˆæµ·æŠ¥ä¸ºä¾‹ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309015210238-2059611246.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾30&lt;/span&gt;&lt;/center&gt;
&lt;p&gt;ã€€ã€€æ€è·¯æ˜¯æŠ½å–æ‰€æœ‰åƒç´ ç‚¹çš„RGBä¸‰é€šé“å€¼ï¼Œåˆ†åˆ«ä½œä¸ºä¸‰ä¸ªç‰¹å¾ï¼Œè¾“å…¥&lt;code&gt;k-means&lt;/code&gt;ä¸­è¿›è¡Œèšç±»ï¼Œå°†èšç±»æ•°é‡è®¾ç½®ä¸ºä½ æƒ³è¦æå–å‡ºçš„ä¸»è‰²æ•°é‡ï¼š&lt;/p&gt;
&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;from sklearn.cluster import KMeans

# æ„å»ºç‰¹å¾
rgb = pd.DataFrame([sea[x][y] for x in range(sea.shape[0]) for y in range(sea.shape[1])],
             columns=['r', 'g', 'b'])

# k-meansèšç±»ï¼Œå…¶ä¸­n_clustersè¡¨ç¤ºèšç±»æ•°é‡ï¼Œn_jobs=-1è¡¨ç¤ºå¼€å¯æ‰€æœ‰æ ¸å¿ƒå¹¶è¡Œè¿ç®—
model = KMeans(n_clusters=5, n_jobs=-1)
model.fit(rgb) # è®­ç»ƒæ¨¡å‹

# æå–èšç±»ç°‡é‡å¿ƒï¼Œå³æˆ‘ä»¬éœ€è¦çš„ä¸»è‰²ï¼Œç»˜åˆ¶è°ƒè‰²æ¿
plt.bar([i for i in range(model.cluster_centers_.__len__())], 
        height=[1 for i in range(model.cluster_centers_.__len__())],
        color=[tuple(c) for c in (model.cluster_centers_ / 255.)],
        width=1)
plt.axis('off')&lt;/code&gt;
&lt;/pre&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309015214538-174285938.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾31&lt;/span&gt;&lt;/center&gt;
&lt;p&gt;ã€€ã€€å†æ¥ä¸ªä¾‹å­ï¼Œæå–ã€Šä¸€ç›´æ¸¸åˆ°æµ·æ°´å˜è“ã€‹æµ·å¤–ç‰ˆæµ·æŠ¥ä¸»è‰²ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309015219098-66164482.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾32&lt;/span&gt;&lt;/center&gt;
&lt;p&gt;ã€€ã€€å¯¹åº”æå–åˆ°çš„5ç§ä¸»è‰²å¦‚å›¾33ï¼š&lt;br/&gt;ã€€ã€€&lt;br/&gt;&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1344061/202003/1344061-20200309015222710-1762089105.png&quot;/&gt;&lt;/center&gt;
&lt;center&gt;&lt;span&gt;å›¾33&lt;/span&gt;&lt;/center&gt;
&lt;br/&gt;ã€€ã€€ç±»ä¼¼çš„ï¼Œä½ å¯ä»¥è¯•ç€æå–ä½ å–œçˆ±çš„å¹³é¢ä½œå“çš„ä¸»è‰²ã€‚
&lt;p&gt;ã€€ã€€ä»¥ä¸Šå°±æ˜¯æœ¬æ–‡çš„å…¨éƒ¨å†…å®¹ï¼Œå¦‚æœ‰ç¬”è¯¯æœ›æŒ‡å‡ºã€‚&lt;/p&gt;
</description>
<pubDate>Mon, 09 Mar 2020 00:01:00 +0000</pubDate>
<dc:creator>è´¹å¼—é‡Œ</dc:creator>
<og:description>æœ¬æ–‡å¯¹åº”ä»£ç å’Œæ•°æ®å·²ä¸Šä¼ è‡³æˆ‘çš„ ä»“åº“ &amp;quot;https://github.com/CNFeffery/DataScienceStudyNotes&amp;quot; 1 ç®€ä»‹ é€šè¿‡å‰é¢çš„æ–‡ç« ï¼Œæˆ‘ä»¬å·²ç»å¯¹</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/feffery/p/12381322.html</dc:identifier>
</item>
<item>
<title>èŠèŠ.netcoreé‡‡å‘é‚£ä¸€äº›äº‹ä¹‹ç³»ç»Ÿæ—¶é—´andæ–‡ä»¶è·¯å¾„ - ç¨‹åºå‘˜ä¿®ç‚¼ä¹‹æ—…</title>
<link>http://www.cnblogs.com/xiaoXuZhi/p/netcoredatetime.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/xiaoXuZhi/p/netcoredatetime.html</guid>
<description>&lt;p&gt;.netcoreå®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå…ˆæ€»ç»“ä¸¤ä¸ªå‘ï¼Œè¿™ä¸¤ä¸ªå‘éƒ½æ˜¯å…³äºLinuxï¼ˆCentOSï¼‰å’Œwindowsä¸‹çš„å…¼å®¹æ€§é—®é¢˜ã€‚Linuxï¼ˆCentOSï¼‰ç¯å¢ƒä¸‹ï¼Œè·å–ç³»ç»Ÿæ—¶é—´ï¼Œå®é™…æ—¶é—´å°‘äº†8ä¸ªå°æ—¶ï¼›æ–‡ä»¶è·¯å¾„â€‹è¢«è¯†åˆ«ä¸ºäº†æ–‡ä»¶åã€‚ä¸‹é¢å°±ç®€å•åˆ†äº«ä¸€ä¸‹è§£å†³æ–¹å¼ï¼Œå…¶å®åªè¦ä½ ä¸€çœ‹ï¼Œå‘ç°å¾ˆç®€å•çš„ï¼Œä¹‹æ‰€ä»¥åˆ†äº«å‡ºæ¥ï¼Œå½“ä½ æ‰å¼€å§‹ç”¨æˆ·.netcoreæ—¶ï¼Œå¯ä»¥æœ‰ä¸€ä¸ªæç¤ºä½œç”¨ï¼Œå˜¿å˜¿ï¼&lt;/p&gt;&lt;div id=&quot;cnblogs_post_body&quot; readability=&quot;112&quot;&gt;

&lt;h2&gt;&lt;span&gt;Hi,å°ä¼™ä¼´å¤§å®¶å¥½ï¼Œæœ€è¿‘å·¥ä½œæ¯”è¾ƒå¿™ï¼Œå¾ˆä¹…æ²¡æœ‰å’Œå¤§å®¶åˆ†äº«ç‚¹ä¸œè¥¿äº†ã€‚è¿™ä¸ªå‘¨æœ«éƒ½åŠ äº†ä¸¤å¤©ç­ã€‚å…¬å¸çš„æ–°é¡¹ç›®éƒ½æ˜¯é‡‡ç”¨.netcoreæ¥å¼€å‘ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¹Ÿè¸©åˆ°äº†ä¸€äº›å‘ï¼Œåœ¨æ­¤å…ˆæ€»ç»“ä¸¤ä¸ªå‘ï¼Œè¿™ä¸¤ä¸ªå‘éƒ½æ˜¯å…³äºLinuxï¼ˆCentOSï¼‰å’Œwindowsä¸‹çš„å…¼å®¹æ€§é—®é¢˜ã€‚æˆ‘ä»¬æœ€å¼€å§‹çš„å¼€å‘ç¯å¢ƒæ¥å£è°ƒç”¨ä¸€ç›´æ˜¯éƒ¨ç½²åœ¨windowsç¯å¢ƒè¿è¡Œä¸€åˆ‡æ­£å¸¸ï¼Œä½†æ˜¯éƒ¨ç½²åˆ°Linuxï¼ˆCentOSï¼‰ç¯å¢ƒä¸‹ï¼Œå°±å‡ºç°äº†è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œå…¶å®é—®é¢˜ä¹Ÿç®€å•ï¼šè·å–ç³»ç»Ÿæ—¶é—´ï¼Œå®é™…æ—¶é—´å°‘äº†8ä¸ªå°æ—¶ï¼›æ–‡ä»¶è·¯å¾„â€‹è¢«è¯†åˆ«ä¸ºäº†æ–‡ä»¶åã€‚ä¸‹é¢å°±ç®€å•åˆ†äº«ä¸€ä¸‹è§£å†³æ–¹å¼ï¼Œå…¶å®åªè¦ä½ ä¸€çœ‹ï¼Œå‘ç°å¾ˆç®€å•çš„ï¼Œä¹‹æ‰€ä»¥åˆ†äº«å‡ºæ¥ï¼Œå½“ä½ æ‰å¼€å§‹ç”¨æˆ·.netcoreæ—¶ï¼Œå¯ä»¥æœ‰ä¸€ä¸ªæç¤ºä½œç”¨ï¼Œå˜¿å˜¿ï¼&lt;/span&gt;&lt;/h2&gt;
&lt;h2&gt;Â &lt;/h2&gt;
&lt;h2&gt;ä¸€ã€&lt;strong&gt;DateTime.Nowè·å–ç³»ç»Ÿæ—¶é—´å°‘äº†8ä¸ªå°æ—¶&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;.net coreé¡¹ç›®ï¼Œéƒ¨ç½²åˆ°Linux&lt;span&gt;ï¼ˆ&lt;/span&gt;CentOSï¼‰ä¸Šçš„æ—¶å€™ï¼Œå‘ç°DateTime.Nowè·å–çš„æ—¶é—´ä¸Windowsä¸ä¸€è‡´ï¼Œè·å–åˆ°ç³»ç»Ÿæ—¶é—´æ¯”ç³»ç»Ÿçš„æ—¶é—´å®é™…å°‘äº†8ä¸ªå°æ—¶ï¼Œå‘ç°è¿™ä¸€ä¸ªé—®é¢˜ï¼Œå¤§å®¶ç¬¬ä¸€æ—¶é—´æƒ³åˆ°çš„æ˜¯æ—¶åŒºå·®å¼‚ã€‚ç½‘ä¸Šæœäº†ä¸€ä¸‹ï¼Œå‘ç°è¿˜æœ‰ä¸å°‘çš„å°ä¼™ä¼´é‡åˆ°äº†åŒæ ·çš„é—®é¢˜ï¼Œæœ‰ç»™å‡ºäº†å¯¹åº”çš„è§£å†³æ–¹å¼ï¼Œå…·ä½“å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å…·ä½“åŸå› å°±æ˜¯ï¼š&lt;/span&gt;Linuxå’ŒWindowsä¸¤è€…æ‰€é‡‡ç”¨çš„æ—¶åŒºä¸åŒï¼Œä¸¤è€…çš„æ—¶åŒºåˆ†åˆ«ä¸ºï¼šLinuxï¼šIANA&lt;span&gt;ï¼Œ&lt;/span&gt;Windows:Windows time zone IDsã€‚è¿™å°±æ˜¯æœ€ç»ˆå…ƒå‡¶å•¦ï¼&lt;/p&gt;
&lt;p&gt;æ‰¾åˆ°åŸå› åï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•è§£å†³å‘¢ï¼Ÿæ–¹å¼å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸¤è€…é‡‡ç”¨åŒä¸€ä¸ªæ—¶åŒºä¸å°±å®Œäº‹äº†å˜›ï¼Œæœ€ç»ˆç»Ÿä¸€é‡‡ç”¨IANAï¼Œåœ¨å®ç°ä¸Šå¯ä»¥å€ŸåŠ©ç¬¬ä¸‰æ–¹åº“ï¼šNodaTimeã€‚å…·ä½“å®ç°ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
 /// &amp;lt;summary&amp;gt;

        /// è·å–ç³»ç»Ÿå½“å‰æ—¶é—´

        /// &amp;lt;/summary&amp;gt;

        /// &amp;lt;returns&amp;gt;ç³»ç»Ÿå½“å‰æ—¶é—´&amp;lt;/returns&amp;gt;

        public static DateTime GetSysDateTimeNow()

        {

            Instant now = SystemClock.Instance.GetCurrentInstant();

            var shanghaiZone = DateTimeZoneProviders.Tzdb[&quot;Asia/Shanghai&quot;];

            return now.InZone(shanghaiZone).ToDateTimeUnspecified();

      }
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;æ˜¯ä¸æ˜¯&lt;/span&gt;so easyï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å…¶å®æˆ‘ä»¬ä½¿ç”¨æ—¶é—´çš„æ—¶å€™ï¼Œä¼šæœ‰å¾ˆå¤šç§æ–¹å¼ï¼Œä¹Ÿä¼šå¯¹æ—¶é—´åšå¾ˆå¤šæ ¼å¼è½¬æ¢ï¼Œæ¯”å¦‚ï¼š&lt;/span&gt;yyyy-MM-dd HH:mm:ssæ ¼å¼åŒ–æ—¶é—´ï¼Œæ—¶é—´å’Œæ—¶é—´æˆ³çš„ç›¸äº’è½¬æ¢ç­‰ç­‰ã€‚ä¸ºäº†ç»Ÿä¸€è§„èŒƒæ“ä½œï¼Œåœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯¹æ—¶é—´çš„æ“ä½œæ ¹æ®å®é™…éœ€è¦åšäº†ä¸€ä¸ªç»Ÿä¸€å°è£…ï¼Œå½“ç„¶äº†åœ¨å¾ˆå¤šäººçœ‹æ¥æ˜¯æ²¡æœ‰å¤šå¤§æŠ€æœ¯å«é‡çš„ï¼Œä¹Ÿæ˜¯å“¦ï¼Œå…¶ç›®çš„æ˜¯ä¸ºäº†å®ç°ç»Ÿä¸€æ§åˆ¶ï¼Œæ–¹ä¾¿ç®¡ç†ï¼Œæé«˜ä»£ç çš„å¤ç”¨æ€§ã€‚ç°åœ¨æˆ‘ä¹ŸæŠŠä»£ç è´´å‡ºï¼Œå¦‚æœæœ‰éœ€è¦çš„ï¼Œä½ å¯ä»¥å‚è€ƒä¸€ä¸‹ï¼ŒåŒæ—¶æˆ‘ä¹Ÿç”Ÿæˆäº†ä¸€ä¸ªåŒ…ï¼Œæ”¾åˆ°Nugetä¸Šï¼ŒåŒ…åä¸ºï¼ˆXYH.Tools.DateTimeToolsï¼‰ï¼Œå¦‚æœæœ‰éœ€è¦çš„ï¼Œå¯ä»¥æŒ¡ä¸‹æ¥ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p class=&quot;p&quot;&gt;&lt;span&gt;æˆ‘å·²ç»å°†æºç ä¸Šä¼ åˆ°&lt;/span&gt;GitHubä¸Šï¼Œæœ‰å…´è¶£çš„å¯ä»¥æ¡£ä¸‹æ¥&lt;/p&gt;
&lt;p class=&quot;p&quot;&gt;&lt;span&gt;æºç åœ°å€ï¼š&lt;/span&gt;https://github.com/xuyuanhong0902/XYH.Tools.git&lt;/p&gt;
&lt;p&gt;æºç ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;61&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
/* ==============================================================================
 * åŠŸèƒ½æè¿°ï¼šæ‰€æœ‰æ—¶é—´çš„ç›¸å…³æ“ä½œé›†åˆ  
 * åˆ› å»º è€…ï¼šç¨‹åºä¿®ç‚¼ä¹‹æ—… äº¤æµå¾®ä¿¡å·ï¼š15908150902
 * åˆ›å»ºæ—¥æœŸï¼š 2020-03-08
 * CLR Version :1.0
 * ==============================================================================*/

using NodaTime;
using System;

/// &amp;lt;summary&amp;gt;
/// å…¬ç”¨å¸®åŠ©ç±»
/// &amp;lt;/summary&amp;gt;
namespace XYH.Tools.DateTimeTools
{
    /// &amp;lt;summary&amp;gt;
    /// æ—¶é—´ç›¸å…³çš„æ“ä½œç±»
    /// &amp;lt;/summary&amp;gt;
    public static class DateTimeTools
    {
        #region è·å–ç³»ç»Ÿå½“å‰æ—¶é—´çš„å‡ ä¸ªæ–¹æ³•ï¼ˆè¿”å›æ—¶é—´+æ ¼å¼åŒ–åçš„æ—¶é—´å­—ç¬¦ä¸²ï¼‰

        /// &amp;lt;summary&amp;gt;
        /// è·å–ç³»ç»Ÿå½“å‰æ—¶é—´
        /// &amp;lt;/summary&amp;gt;
        /// &amp;lt;returns&amp;gt;ç³»ç»Ÿå½“å‰æ—¶é—´&amp;lt;/returns&amp;gt;
        public static DateTime GetSysDateTimeNow()
        {
            Instant now = SystemClock.Instance.GetCurrentInstant();
            var shanghaiZone = DateTimeZoneProviders.Tzdb[&quot;Asia/Shanghai&quot;];
            return now.InZone(shanghaiZone).ToDateTimeUnspecified();
        }

        /// &amp;lt;summary&amp;gt;
        /// è·å–ç³»ç»Ÿå½“å‰æ—¶é—´æ ¼å¼åŒ–å­—ç¬¦ä¸² 24å°æ—¶åˆ¶ è¢«æ ¼å¼åŒ–ä¸º (yyyy-MM-dd HH:mm:ss.fff)
        /// &amp;lt;/summary&amp;gt;
        /// &amp;lt;returns&amp;gt;ç³»ç»Ÿå½“å‰æ ¼å¼åŒ–çš„æ—¶é—´å­—ç¬¦ä¸²(yyyy-MM-dd HH:mm:ss.fff)&amp;lt;/returns&amp;gt;
        public static string GetSysDateTimeNowStringYMD24HMSF()
        {
            return GetSysDateTimeNow().ToStringYMD24HMSF();
        }

        /// &amp;lt;summary&amp;gt;
        /// è·å–ç³»ç»Ÿå½“å‰æ—¶é—´æ ¼å¼åŒ–å­—ç¬¦ä¸² 12å°æ—¶åˆ¶ è¢«æ ¼å¼åŒ–ä¸º (yyyy-MM-dd hh:mm:ss.fff)
        /// &amp;lt;/summary&amp;gt;
        /// &amp;lt;returns&amp;gt;ç³»ç»Ÿå½“å‰æ ¼å¼åŒ–çš„æ—¶é—´å­—ç¬¦ä¸²(yyyy-MM-dd hh:mm:ss.fff)&amp;lt;/returns&amp;gt;
        public static string GetSysDateTimeNowStringYMD12HMSF(this DateTime time)
        {
            return GetSysDateTimeNow().ToStringYMD12HMSF();
        }

        /// &amp;lt;summary&amp;gt;
        /// è·å–ç³»ç»Ÿå½“å‰æ—¶é—´æ ¼å¼åŒ–å­—ç¬¦ä¸² 24å°æ—¶åˆ¶ è¢«æ ¼å¼åŒ–ä¸º (yyyy-MM-dd HH:mm:ss)
        /// &amp;lt;/summary&amp;gt;
        /// &amp;lt;returns&amp;gt;ç³»ç»Ÿå½“å‰æ ¼å¼åŒ–çš„æ—¶é—´å­—ç¬¦ä¸²(yyyy-MM-dd HH:mm:ss)&amp;lt;/returns&amp;gt;
        public static string GetSysDateTimeNowStringYMD24HMS(this DateTime time)
        {
            return GetSysDateTimeNow().ToStringYMD24HMS();
        }

        /// &amp;lt;summary&amp;gt;
        /// è·å–ç³»ç»Ÿå½“å‰æ—¶é—´æ ¼å¼åŒ–å­—ç¬¦ä¸² 12å°æ—¶åˆ¶ è¢«æ ¼å¼åŒ–ä¸º (yyyy-MM-dd hh:mm:ss)
        /// &amp;lt;/summary&amp;gt;
        /// &amp;lt;returns&amp;gt;ç³»ç»Ÿå½“å‰æ ¼å¼åŒ–çš„æ—¶é—´å­—ç¬¦ä¸²(yyyy-MM-dd hh:mm:ss)&amp;lt;/returns&amp;gt;
        public static string GetSysDateTimeNowStringYMD12HMS(this DateTime time)
        {
            return GetSysDateTimeNow().ToStringYMD12HMS();
        }

        /// &amp;lt;summary&amp;gt;
        /// è·å–ç³»ç»Ÿå½“å‰æ—¶é—´æ ¼å¼åŒ–å­—ç¬¦ä¸²  è¢«æ ¼å¼åŒ–ä¸º (yyyy-MM-dd)
        /// &amp;lt;/summary&amp;gt;
        /// &amp;lt;returns&amp;gt;ç³»ç»Ÿå½“å‰æ ¼å¼åŒ–çš„æ—¶é—´å­—ç¬¦ä¸²(yyyy-MM-dd)&amp;lt;/returns&amp;gt;
        public static string GetSysDateTimeNowStringYMD(this DateTime time)
        {
            return GetSysDateTimeNow().ToStringYMD();
        }

        #endregion

        #region DateTime æ‰©å±•å‡ ä¸ª æ ¼å¼æ–¹æ³•

        /// &amp;lt;summary&amp;gt;
        /// æ—¶é—´ æ ¼å¼åŒ– 24å°æ—¶åˆ¶ è¢«æ ¼å¼åŒ–ä¸º  (yyyy-MM-dd HH:mm:ss.fff)
        /// &amp;lt;/summary&amp;gt;
        /// &amp;lt;param name=&quot;time&quot;&amp;gt;è¢«æ ¼å¼çš„æ—¶é—´&amp;lt;/param&amp;gt;
        /// &amp;lt;returns&amp;gt;æ ¼å¼åŒ–åçš„æ—¶é—´å­—ç¬¦ä¸²(yyyy-MM-dd HH:mm:ss.fff)&amp;lt;/returns&amp;gt;
        public static string ToStringYMD24HMSF(this DateTime time)
        {
            return time.ToString(&quot;yyyy-MM-dd HH:mm:ss.fff&quot;);
        }

        /// &amp;lt;summary&amp;gt;
        /// æ—¶é—´ æ ¼å¼åŒ– 12å°æ—¶åˆ¶ è¢«æ ¼å¼åŒ–ä¸º  (yyyy-MM-dd hh:mm:ss.fff)
        /// &amp;lt;/summary&amp;gt;
        /// &amp;lt;param name=&quot;time&quot;&amp;gt;è¢«æ ¼å¼åŒ–æ—¶é—´&amp;lt;/param&amp;gt;
        /// &amp;lt;returns&amp;gt;æ ¼å¼åŒ–åçš„æ—¶é—´å­—ç¬¦ä¸²(yyyy-MM-dd hh:mm:ss.fff)&amp;lt;/returns&amp;gt;
        public static string ToStringYMD12HMSF(this DateTime time)
        {
            return time.ToString(&quot;yyyy-MM-dd hh:mm:ss.fff&quot;);
        }

        /// &amp;lt;summary&amp;gt;
        /// æ—¶é—´ æ ¼å¼åŒ– 24å°æ—¶åˆ¶ è¢«æ ¼å¼åŒ–ä¸º  (yyyy-MM-dd HH:mm:ss)
        /// &amp;lt;/summary&amp;gt;
        /// &amp;lt;param name=&quot;time&quot;&amp;gt;è¢«æ ¼å¼åŒ–æ—¶é—´&amp;lt;/param&amp;gt;
        /// &amp;lt;returns&amp;gt;æ ¼å¼åŒ–åçš„æ—¶é—´å­—ç¬¦ä¸²(yyyy-MM-dd HH:mm:ss)&amp;lt;/returns&amp;gt;
        public static string ToStringYMD24HMS(this DateTime time)
        {
            return time.ToString(&quot;yyyy-MM-dd HH:mm:ss&quot;);
        }

        /// &amp;lt;summary&amp;gt;
        /// æ—¶é—´ æ ¼å¼åŒ– 12å°æ—¶åˆ¶ è¢«æ ¼å¼åŒ–ä¸º  (yyyy-MM-dd hh:mm:ss)
        /// &amp;lt;/summary&amp;gt;
        /// &amp;lt;param name=&quot;time&quot;&amp;gt;è¢«æ ¼å¼åŒ–æ—¶é—´&amp;lt;/param&amp;gt;
        /// &amp;lt;returns&amp;gt;æ ¼å¼åŒ–åçš„æ—¶é—´å­—ç¬¦ä¸²(yyyy-MM-dd hh:mm:ss)&amp;lt;/returns&amp;gt;
        public static string ToStringYMD12HMS(this DateTime time)
        {
            return time.ToString(&quot;yyyy-MM-dd hh:mm:ss&quot;);
        }

        /// &amp;lt;summary&amp;gt;
        /// æ—¶é—´ æ ¼å¼åŒ–  è¢«æ ¼å¼åŒ–ä¸º  (yyyy-MM-dd)
        /// &amp;lt;/summary&amp;gt;
        /// &amp;lt;param name=&quot;time&quot;&amp;gt;è¢«æ ¼å¼åŒ–æ—¶é—´&amp;lt;/param&amp;gt;
        /// &amp;lt;returns&amp;gt;æ ¼å¼åŒ–åçš„æ—¶é—´å­—ç¬¦ä¸²(yyyy-MM-dd)&amp;lt;/returns&amp;gt;
        public static string ToStringYMD(this DateTime time)
        {
            return time.ToString(&quot;yyyy-MM-dd&quot;);
        }

        #endregion

        #region è·å–æ—¶é—´æˆ³

        /// &amp;lt;summary&amp;gt;
        /// è·å–æ—¶é—´æˆ³(ç§’)
        /// &amp;lt;/summary&amp;gt;
        /// &amp;lt;returns&amp;gt;ç§’æ—¶é—´æˆ³&amp;lt;/returns&amp;gt;
        public static long GetSecondTimestamp()
        {
            // ä»¥1970-1-1 ä¸ºæ—¶é—´å¼€å§‹ åŒç³»ç»Ÿå½“å‰æ—¶é—´çš„ç§’å·®å€¼å³ä¸ºç§’æ—¶é—´æˆ³
            TimeSpan ts = GetSysDateTimeNow() - new DateTime(1970, 1, 1, 0, 0, 0, 0);
            return Convert.ToInt64(ts.TotalSeconds);
        }

        /// &amp;lt;summary&amp;gt;
        /// è·å–æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
        /// &amp;lt;/summary&amp;gt;
        /// &amp;lt;returns&amp;gt;æ¯«ç§’æ—¶é—´æˆ³&amp;lt;/returns&amp;gt;
        public static long GetMilliSecondTimestamp()
        {
            // ä»¥1970-1-1 ä¸ºæ—¶é—´å¼€å§‹ åŒç³»ç»Ÿå½“å‰æ—¶é—´çš„æ¯«ç§’å·®å€¼å³ä¸ºæ¯«ç§’æ—¶é—´æˆ³
            TimeSpan ts = GetSysDateTimeNow() - new DateTime(1970, 1, 1, 0, 0, 0, 0);
            return Convert.ToInt64(ts.TotalMilliseconds);
        }

        #endregion

        #region å°†ä¸€ä¸ªæ—¶é—´æˆ³è½¬æ¢ä¸ºä¸€ä¸ªæ—¶é—´

        /// &amp;lt;summary&amp;gt;
        /// å°†ä¸€ä¸ªç§’æ—¶é—´æˆ³è½¬æ¢ä¸ºæ—¶é—´æ ¼å¼(ç§’)
        /// &amp;lt;/summary&amp;gt;
        /// &amp;lt;param name=&quot;secondTimestamp&quot;&amp;gt;ç§’æ—¶é—´æˆ³&amp;lt;/param&amp;gt;
        /// &amp;lt;returns&amp;gt;è½¬æ¢åçš„æ—¶é—´&amp;lt;/returns&amp;gt;
        public static DateTime? SecondStampToDateTime(long secondTimestamp)
        {
            //  åšä¸€ä¸ªç®€å•çš„åˆ¤æ–­
            if (secondTimestamp &amp;lt;= 0)
            {
                return null;
            }

            // ä»¥1970-1-1 ä¸ºæ—¶é—´å¼€å§‹ï¼Œé€šè¿‡è®¡ç®—ä¸ä¹‹çš„æ—¶é—´å·®ï¼Œæ¥è®¡ç®—å…¶å¯¹åº”çš„æ—¶é—´
            DateTime dateTime = new System.DateTime(1970, 1, 1, 0, 0, 0, 0);
            dateTime = dateTime.AddSeconds(secondTimestamp).ToLocalTime();
            return dateTime;
        }

        /// &amp;lt;summary&amp;gt;
        /// å°†ä¸€ä¸ªå­—ç¬¦ä¸²ç§’æ—¶é—´æˆ³è½¬æ¢ä¸ºæ—¶é—´æ ¼å¼(ç§’)
        /// &amp;lt;/summary&amp;gt;
        /// &amp;lt;param name=&quot;secondTimestampStr&quot;&amp;gt;å­—ç¬¦ä¸²ç§’æ—¶é—´æˆ³&amp;lt;/param&amp;gt;
        /// &amp;lt;returns&amp;gt;è½¬æ¢åçš„æ—¶é—´&amp;lt;/returns&amp;gt;
        public static DateTime? SecondStampToDateTime(string secondTimestampStr)
        {
            // å¦‚æœä¸ºç©ºï¼Œé‚£ä¹ˆç›´æ¥è¿”å›null
            if (string.IsNullOrEmpty(secondTimestampStr))
            {
                return null;
            }

            // é¦–å…ˆå°†å­—ç¬¦ä¸²æ—¶é—´æˆ³è½¬æ¢ä¸ºæ•°å­—
            long secondTimestamp = 0;
            long.TryParse(secondTimestampStr, out secondTimestamp);

            // è°ƒç”¨
            return SecondStampToDateTime(secondTimestamp);
        }

        /// &amp;lt;summary&amp;gt;
        /// å°†ä¸€ä¸ªå­—ç¬¦ä¸²æ¯«ç§’æ—¶é—´æˆ³è½¬æ¢ä¸ºæ—¶é—´æ ¼å¼(æ¯«ç§’)
        /// &amp;lt;/summary&amp;gt;
        /// &amp;lt;param name=&quot;secondTimestampStr&quot;&amp;gt;å­—ç¬¦ä¸²æ¯«ç§’æ—¶é—´æˆ³&amp;lt;/param&amp;gt;
        /// &amp;lt;returns&amp;gt;è½¬æ¢åçš„æ—¶é—´&amp;lt;/returns&amp;gt;
        public static DateTime? MilliSecondStampToDateTime(long secondTimestamp)
        {
            //  åšä¸€ä¸ªç®€å•çš„åˆ¤æ–­
            if (secondTimestamp &amp;lt;= 0)
            {
                return null;
            }

            // ä»¥1970-1-1 ä¸ºæ—¶é—´å¼€å§‹ï¼Œé€šè¿‡è®¡ç®—ä¸ä¹‹çš„æ—¶é—´å·®ï¼Œæ¥è®¡ç®—å…¶å¯¹åº”çš„æ—¶é—´
            DateTime dateTime = new System.DateTime(1970, 1, 1, 0, 0, 0, 0);
            dateTime = dateTime.AddMilliseconds(secondTimestamp).ToLocalTime();

            return dateTime;
        }

        /// &amp;lt;summary&amp;gt;
        /// å°†ä¸€ä¸ªæ¯«ç§’æ—¶é—´æˆ³è½¬æ¢ä¸ºæ—¶é—´æ ¼å¼(æ¯«ç§’)
        /// &amp;lt;/summary&amp;gt;
        /// &amp;lt;param name=&quot;milliSecondStampStr&quot;&amp;gt;æ¯«ç§’æ—¶é—´æˆ³&amp;lt;/param&amp;gt;
        /// &amp;lt;returns&amp;gt;è½¬æ¢åçš„æ—¶é—´&amp;lt;/returns&amp;gt;
        public static DateTime? MilliSecondStampToDateTime(string milliSecondStampStr)
        {
            // å¦‚æœä¸ºç©ºï¼Œé‚£ä¹ˆç›´æ¥è¿”å›null
            if (string.IsNullOrEmpty(milliSecondStampStr))
            {
                return null;
            }

            // é¦–å…ˆå°†å­—ç¬¦ä¸²æ—¶é—´æˆ³è½¬æ¢ä¸ºæ•°å­—
            long milliSecondStamp = 0;
            long.TryParse(milliSecondStampStr, out milliSecondStamp);

            // è°ƒç”¨
            return MilliSecondStampToDateTime(milliSecondStamp);
        }

        #endregion
    }
}
&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;äºŒã€&lt;strong&gt;æ–‡ä»¶è·¯å¾„è¢«è¯†åˆ«ä¸ºäº†æ–‡ä»¶å&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;å“ˆå“ˆï¼Œæœ€è¿‘è¿˜é‡åˆ°ä¸€ä¸ªæœ‰è¶£çš„äº‹æƒ…ï¼Œå°±æ˜¯åœ¨&lt;/span&gt;Windowsä¸Šï¼Œæ–‡ä»¶è·¯å¾„çš„åˆ›å»ºï¼Œéƒ½æ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯éƒ¨ç½²åˆ°CentOS,æ‰€åˆ›å»ºçš„æ–‡ä»¶ï¼Œæ‰€æœ‰è·¯å¾„éƒ½å˜æˆäº†æ–‡ä»¶åç§°ï¼Œæ‰€æœ‰æ–‡ä»¶éƒ½åœ¨æ ¹ç›®å½•ä¸‹äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ç½‘ä¸Šæ‰¾äº†ä¸€ä¸‹åŸå› ï¼Œå°±æ˜¯æ–‡ä»¶è·¯å¾„å·¦æ–œæ å’Œå³æ–œæ çš„é—®é¢˜ã€‚åœ¨&lt;/span&gt;Windowsä¸Šæ— è®ºæ˜¯å·¦æ–œæ è¿˜æ˜¯å³æ–œæ éƒ½æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯åœ¨linuxä¸­åªæ”¯æŒå³æ–œæ ï¼Œå°†ä»£ç ä¸­æ‰€ç”¨åˆ°çš„è·¯å¾„æ“ä½œï¼Œéƒ½ç»Ÿä¸€ä¿®æ”¹ä¸ºå³æ–œæ ï¼Œé—®é¢˜å°±è§£å†³äº†ã€‚æ–‡ä»¶è·¯å¾„1/æ–‡ä»¶è·¯å¾„2/æ–‡ä»¶å&lt;/p&gt;
&lt;h2&gt;ä¸‰ã€&lt;strong&gt;æ€»ç»“&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;å›å¤´æ¥çœ‹è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œéƒ½æ˜¯ç³»ç»Ÿçš„å…¼å®¹æ€§é—®é¢˜ï¼Œåœ¨ä»”ç»†æƒ³ä¸€ä¸‹ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¹ æƒ¯æ€§é—®é¢˜ï¼Œå°¤å…¶æ˜¯æ–‡ä»¶è·¯å¾„è¿™é—®é¢˜ï¼Œæˆ‘ä»¬è¦ä¹ æƒ¯çš„ç”¨å³æ–œæ ã€‚&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æˆ‘ä»¬ä»¥ååœ¨å†™&lt;/span&gt;.netç¨‹åºçš„æ—¶å€™ï¼Œæ— è®ºæ˜¯å¦ä¼šé‡‡ç”¨.netcoreå®ç°linuxç³»ç»Ÿéƒ¨ç½²ï¼Œæˆ‘ä»¬éƒ½ä¹Ÿè¯¥æƒ³åˆ°ä¸åŒç³»ç»Ÿçš„å…¼å®¹æ€§é—®é¢˜ï¼Œåœ¨å®ç°ä¸Šéƒ½é‡‡ç”¨ä¸€ä¸ªé€šç”¨çš„æ–¹å¼æ¥å®ç°ï¼Œé‚£ä¹ˆä»¥ååœ¨åšé¡¹ç›®å‡çº§ï¼Œç³»ç»Ÿè¿ç§»çš„æ—¶å€™ï¼Œå°±ä¼šå°‘ä¸€äº›éº»çƒ¦ã€‚å˜¿å˜¿ï¼Œä»Šå¤©å°±å…ˆåˆ°è¿™ï¼Œåç»­æˆ‘åœ¨åˆ†äº«ä¸€ä¸‹å…¶å®ƒ.netcoreå®æˆ˜æ‰€è¸©çš„å‘ã€‚è°¢è°¢æ‚¨çš„é˜…è¯»ã€‚&lt;/p&gt;


&lt;h2&gt;&lt;span&gt;Hi,å°ä¼™ä¼´å¤§å®¶å¥½ï¼Œæœ€è¿‘å·¥ä½œæ¯”è¾ƒå¿™ï¼Œå¾ˆä¹…æ²¡æœ‰å’Œå¤§å®¶åˆ†äº«ç‚¹ä¸œè¥¿äº†ã€‚è¿™ä¸ªå‘¨æœ«éƒ½åŠ äº†ä¸¤å¤©ç­ã€‚å…¬å¸çš„æ–°é¡¹ç›®éƒ½æ˜¯é‡‡ç”¨.netcoreæ¥å¼€å‘ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¹Ÿè¸©åˆ°äº†ä¸€äº›å‘ï¼Œåœ¨æ­¤å…ˆæ€»ç»“ä¸¤ä¸ªå‘ï¼Œè¿™ä¸¤ä¸ªå‘éƒ½æ˜¯å…³äºLinuxï¼ˆCentOSï¼‰å’Œwindowsä¸‹çš„å…¼å®¹æ€§é—®é¢˜ã€‚æˆ‘ä»¬æœ€å¼€å§‹çš„å¼€å‘ç¯å¢ƒæ¥å£è°ƒç”¨ä¸€ç›´æ˜¯éƒ¨ç½²åœ¨windowsç¯å¢ƒè¿è¡Œä¸€åˆ‡æ­£å¸¸ï¼Œä½†æ˜¯éƒ¨ç½²åˆ°Linuxï¼ˆCentOSï¼‰ç¯å¢ƒä¸‹ï¼Œå°±å‡ºç°äº†è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œå…¶å®é—®é¢˜ä¹Ÿç®€å•ï¼šè·å–ç³»ç»Ÿæ—¶é—´ï¼Œå®é™…æ—¶é—´å°‘äº†8ä¸ªå°æ—¶ï¼›æ–‡ä»¶è·¯å¾„â€‹è¢«è¯†åˆ«ä¸ºäº†æ–‡ä»¶åã€‚ä¸‹é¢å°±ç®€å•åˆ†äº«ä¸€ä¸‹è§£å†³æ–¹å¼ï¼Œå…¶å®åªè¦ä½ ä¸€çœ‹ï¼Œå‘ç°å¾ˆç®€å•çš„ï¼Œä¹‹æ‰€ä»¥åˆ†äº«å‡ºæ¥ï¼Œå½“ä½ æ‰å¼€å§‹ç”¨æˆ·.netcoreæ—¶ï¼Œå¯ä»¥æœ‰ä¸€ä¸ªæç¤ºä½œç”¨ï¼Œå˜¿å˜¿ï¼&lt;/span&gt;&lt;/h2&gt;
&lt;/div&gt;</description>
<pubDate>Sun, 08 Mar 2020 23:26:00 +0000</pubDate>
<dc:creator>ç¨‹åºå‘˜ä¿®ç‚¼ä¹‹æ—…</dc:creator>
<og:description>.netcoreå®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå…ˆæ€»ç»“ä¸¤ä¸ªå‘ï¼Œè¿™ä¸¤ä¸ªå‘éƒ½æ˜¯å…³äºLinuxï¼ˆCentOSï¼‰å’Œwindowsä¸‹çš„å…¼å®¹æ€§é—®é¢˜ã€‚Linuxï¼ˆCentOSï¼‰ç¯å¢ƒä¸‹ï¼Œè·å–ç³»ç»Ÿæ—¶é—´ï¼Œå®é™…æ—¶é—´å°‘äº†8ä¸ªå°æ—¶ï¼›æ–‡ä»¶è·¯å¾„â€‹</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/xiaoXuZhi/p/netcoredatetime.html</dc:identifier>
</item>
<item>
<title>SSMåŠ¨æ€åˆ‡æ¢æ•°æ®æº - Howlet</title>
<link>http://www.cnblogs.com/Howlet/p/12446603.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/Howlet/p/12446603.html</guid>
<description>&lt;hr/&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;æœ‰éœ€æ±‚å°±è¦æƒ³åŠæ³•è§£å†³ï¼Œæœ€è¿‘å‚ä¸çš„é¡¹ç›®å…¶æ¶‰åŠçš„ä¸‰ä¸ªæ•°æ®è¡¨åˆ†åˆ«åœ¨ä¸‰å°ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œè¿™å°±æœ‰ç‚¹çªå…€äº†ï¼Œç¬¬ä¸€æ¬¡é‡åˆ°è¿™ç§æƒ…å†µï¼Œå¯è¿™éš¾ä¸å€’ç¬”è€…ï¼Œèµ„æ–™ä¸€æŸ¥ï¼Œä»£ç ä¸€æ‰“ï¼Œå›å¤´çœ‹çœ‹æºç ï¼Œä¸‡äº‹å¤§å‰&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;é¢„å¤‡çŸ¥è¯†&quot;&gt;1. é¢„å¤‡çŸ¥è¯†&lt;/h2&gt;
&lt;p&gt;è¿™é‡Œé»˜è®¤å¤§å®¶éƒ½ä¼šSSMæ¡†æ¶äº†ï¼Œä½¿ç”¨æ—¶æˆ‘ä»¬è¦å¾€sqlSessionFactoryé‡Œæ³¨å…¥æ•°æ®æºã€‚é‚£ä¹ˆçŒœæµ‹ï¼š1ã€å¯ä»¥å¾€sqlSessionFactoryé‡Œæ³¨å…¥å¤šæ•°æ®æºæ¥å®ç°åˆ‡æ¢ï¼›2ã€å°†å¤šä¸ªæ•°æ®æºå°è£…æˆä¸€ä¸ª&lt;code&gt;æ€»æº&lt;/code&gt;ï¼Œå†æŠŠè¿™ä¸ª&lt;code&gt;æ€»æº&lt;/code&gt;æ³¨å…¥åˆ°sqlSessionFactoryé‡Œå®ç°åˆ‡æ¢ã€‚ç­”æ¡ˆæ˜¯ä½¿ç”¨åè€…ï¼Œå³å°è£…æˆ&lt;code&gt;æ€»æº&lt;/code&gt;çš„å½¢å¼ã€‚Springæä¾›äº†åŠ¨æ€åˆ‡æ¢æ•°æ®æºçš„åŠŸèƒ½ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹çœ‹å…¶å®ç°åŸç†&lt;/p&gt;

&lt;h2 id=&quot;å®ç°åŸç†&quot;&gt;2. å®ç°åŸç†&lt;/h2&gt;
&lt;p&gt;ç¬”è€…æ˜¯æ ¹æ®æºç è®²è§£çš„ï¼Œè¿™äº›æ­¥éª¤è®²å®Œä¼šè´´å‡ºæºç å†…å®¹&lt;/p&gt;

&lt;h3 id=&quot;ä¸€&quot;&gt;ä¸€ã€&lt;/h3&gt;
&lt;p&gt;Springæä¾›äº†AbstractRoutingDataSourceæŠ½è±¡ç±»ï¼Œå…¶ç»§æ‰¿äº†AbstractDataSourceã€‚è€ŒAbstractDataSourceåˆå®ç°äº†DataSourceã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥å°†AbstractRoutingDataSourceçš„å®ç°ç±»æ³¨å…¥åˆ°sqlSessionFactoryä¸­æ¥å®ç°åˆ‡æ¢æ•°æ®æº&lt;/p&gt;

&lt;h3 id=&quot;äºŒ&quot;&gt;äºŒã€&lt;/h3&gt;
&lt;p&gt;åˆšæ‰æˆ‘ä»¬å°†å¤šä¸ªæ•°æ®æºå°è£…æˆ&lt;code&gt;æ€»æº&lt;/code&gt;çš„æƒ³æ³•åœ¨AbstractRoutingDataSourceä¸­æœ‰ä½“ç°ï¼Œå…¶å†…éƒ¨ç”¨ä¸€ä¸ªMapé›†åˆå°è£…å¤šä¸ªæ•°æ®æºï¼Œå³ &lt;code&gt;private Map&amp;lt;Object, DataSource&amp;gt; resolvedDataSources;&lt;/code&gt; ï¼Œé‚£ä¹ˆè¦ä½¿ç”¨æ—¶ä»è¯¥Mapé›†åˆä¸­è·å–å³å¯&lt;/p&gt;

&lt;h3 id=&quot;ä¸‰&quot;&gt;ä¸‰ã€&lt;/h3&gt;
&lt;p&gt;AbstractRoutingDataSourceä¸­æœ‰ä¸ªdetermineTargetDataSource()æ–¹æ³•ï¼Œå…¶ä½œç”¨æ˜¯å†³å®šä½¿ç”¨å“ªä¸ªæ•°æ®æºã€‚æˆ‘ä»¬é€šè¿‡determineTargetDataSource()æ–¹æ³•ä»Mapé›†åˆä¸­è·å–æ•°æ®æºï¼Œé‚£ä¹ˆå¿…é¡»æœ‰ä¸ªkeyå€¼æŒ‡å®šæ‰è¡Œã€‚æ‰€ä»¥determineTargetDataSource()æ–¹æ³•å†…éƒ¨é€šè¿‡è°ƒç”¨determineCurrentLookupKey()æ–¹æ³•æ¥è·å–keyå€¼ï¼ŒSpringå°†determineCurrentLookupKey()æ–¹æ³•æŠ½è±¡å‡ºæ¥ç»™ç”¨æˆ·å®ç°ï¼Œä»è€Œè®©ç”¨æˆ·å†³å®šä½¿ç”¨å“ªä¸ªæ•°æ®æº&lt;/p&gt;

&lt;h3 id=&quot;å››&quot;&gt;å››ã€&lt;/h3&gt;
&lt;p&gt;æ—¢ç„¶çŸ¥é“æˆ‘ä»¬éœ€è¦é‡å†™determineCurrentLookupKey()æ–¹æ³•ï¼Œé‚£ä¹ˆå°±å¼€å§‹æŠŠã€‚å®ç°æ—¶å‘ç°è¯¥æ–¹æ³•æ²¡æœ‰å‚æ•°ï¼Œæˆ‘ä»¬æ— æ³•ä¼ å‚æ¥å†³å®šè¿”å›çš„keyå€¼ï¼Œåˆä¸èƒ½æ”¹åŠ¨æ–¹æ³•ï¼ˆå› ä¸ºæ˜¯é‡å†™ï¼‰ï¼Œæ‰€ä»¥æ–¹æ³•å†…éƒ¨è°ƒç”¨æˆ‘ä»¬è‡ªå®šä¹‰ç±»çš„é™æ€æ–¹æ³•å³å¯è§£å†³é—®é¢˜&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;public class DynamicDataSource extends AbstractRoutingDataSource {
    @Override
    protected Object determineCurrentLookupKey() {
        return DynamicDataSourceHolder.getDataSourceKey();
    }
}&lt;/code&gt;
&lt;/pre&gt;

&lt;h3 id=&quot;äº”&quot;&gt;äº”ã€&lt;/h3&gt;
&lt;p&gt;è‡ªå®šä¹‰ç±»ï¼Œä½œç”¨æ˜¯è®©æˆ‘ä»¬ä¼ å…¥keyå€¼æ¥å†³å®šä½¿ç”¨å“ªä¸ªkey&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;public class DynamicDataSourceHolder {

    // ThreadLocalæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œç»‘å®šå½“å‰çº¿ç¨‹
    private static final ThreadLocal&amp;lt;String&amp;gt; dataSourceKey = new ThreadLocal&amp;lt;String&amp;gt;();

    public static String getDataSourceKey(){
        return dataSourceKey.get();
    }

    public static void setDataSourceKey(String key){
        dataSourceKey.set(key);
    }

    public static void clearDataSourceKey(){
        dataSourceKey.remove();
    }
}&lt;/code&gt;
&lt;/pre&gt;

&lt;h3 id=&quot;å…­&quot;&gt;å…­ã€&lt;/h3&gt;
&lt;p&gt;AbstractRoutingDataSourceæŠ½è±¡ç±»æºç ï¼ˆ&lt;strong&gt;ä¸å–œå¯è·³&lt;/strong&gt;ï¼‰&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;public abstract class AbstractRoutingDataSource extends AbstractDataSource implements InitializingBean {
    @Nullable
    private Map&amp;lt;Object, Object&amp;gt; targetDataSources;
    @Nullable
    private Object defaultTargetDataSource;
    private boolean lenientFallback = true;
    private DataSourceLookup dataSourceLookup = new JndiDataSourceLookup();
    @Nullable
    private Map&amp;lt;Object, DataSource&amp;gt; resolvedDataSources;
    @Nullable
    private DataSource resolvedDefaultDataSource;

    public AbstractRoutingDataSource() {
    }

    public void setTargetDataSources(Map&amp;lt;Object, Object&amp;gt; targetDataSources) {
        this.targetDataSources = targetDataSources;
    }

    public void setDefaultTargetDataSource(Object defaultTargetDataSource) {
        this.defaultTargetDataSource = defaultTargetDataSource;
    }

    public void setLenientFallback(boolean lenientFallback) {
        this.lenientFallback = lenientFallback;
    }

    public void setDataSourceLookup(@Nullable DataSourceLookup dataSourceLookup) {
        this.dataSourceLookup = (DataSourceLookup)(dataSourceLookup != null ? dataSourceLookup : new JndiDataSourceLookup());
    }

    public void afterPropertiesSet() {
        if (this.targetDataSources == null) {
            throw new IllegalArgumentException(&quot;Property 'targetDataSources' is required&quot;);
        } else {
            this.resolvedDataSources = new HashMap(this.targetDataSources.size());
            this.targetDataSources.forEach((key, value) -&amp;gt; {
                Object lookupKey = this.resolveSpecifiedLookupKey(key);
                DataSource dataSource = this.resolveSpecifiedDataSource(value);
                this.resolvedDataSources.put(lookupKey, dataSource);
            });
            if (this.defaultTargetDataSource != null) {
                this.resolvedDefaultDataSource = this.resolveSpecifiedDataSource(this.defaultTargetDataSource);
            }

        }
    }

    protected Object resolveSpecifiedLookupKey(Object lookupKey) {
        return lookupKey;
    }

    protected DataSource resolveSpecifiedDataSource(Object dataSource) throws IllegalArgumentException {
        if (dataSource instanceof DataSource) {
            return (DataSource)dataSource;
        } else if (dataSource instanceof String) {
            return this.dataSourceLookup.getDataSource((String)dataSource);
        } else {
            throw new IllegalArgumentException(&quot;Illegal data source value - only [javax.sql.DataSource] and String supported: &quot; + dataSource);
        }
    }

    public Connection getConnection() throws SQLException {
        return this.determineTargetDataSource().getConnection();
    }

    public Connection getConnection(String username, String password) throws SQLException {
        return this.determineTargetDataSource().getConnection(username, password);
    }

    public &amp;lt;T&amp;gt; T unwrap(Class&amp;lt;T&amp;gt; iface) throws SQLException {
        return iface.isInstance(this) ? this : this.determineTargetDataSource().unwrap(iface);
    }

    public boolean isWrapperFor(Class&amp;lt;?&amp;gt; iface) throws SQLException {
        return iface.isInstance(this) || this.determineTargetDataSource().isWrapperFor(iface);
    }

    protected DataSource determineTargetDataSource() {
        Assert.notNull(this.resolvedDataSources, &quot;DataSource router not initialized&quot;);
        Object lookupKey = this.determineCurrentLookupKey();
        DataSource dataSource = (DataSource)this.resolvedDataSources.get(lookupKey);
        if (dataSource == null &amp;amp;&amp;amp; (this.lenientFallback || lookupKey == null)) {
            dataSource = this.resolvedDefaultDataSource;
        }

        if (dataSource == null) {
            throw new IllegalStateException(&quot;Cannot determine target DataSource for lookup key [&quot; + lookupKey + &quot;]&quot;);
        } else {
            return dataSource;
        }
    }

    @Nullable
    protected abstract Object determineCurrentLookupKey();
}&lt;/code&gt;
&lt;/pre&gt;

&lt;h2 id=&quot;é…ç½®&quot;&gt;3. é…ç½®&lt;/h2&gt;

&lt;h3 id=&quot;é…ç½®db.properties&quot;&gt;3.1 é…ç½®db.properties&lt;/h3&gt;
&lt;p&gt;è¿™é‡Œé…ç½®ä¸¤ä¸ªæ•°æ®åº“ï¼Œä¸€ä¸ªè¯„è®ºåº“ï¼Œä¸€ä¸ªç”¨æˆ·åº“&lt;/p&gt;
&lt;pre class=&quot;properties&quot;&gt;
&lt;code&gt;# é—®é¢˜åº“
howl.comments.driverClassName = com.mysql.jdbc.Driver
howl.comments.url = jdbc:mysql://127.0.0.1:3306/comment
howl.comments.username = root
howl.comments.password =

# ç”¨æˆ·åº“
howl.users.driverClassName = com.mysql.jdbc.Driver
howl.users.url = jdbc:mysql://127.0.0.1:3306/user
howl.users.username = root
howl.users.password =&lt;/code&gt;
&lt;/pre&gt;

&lt;h3 id=&quot;é…ç½®applicationcontext.xml&quot;&gt;3.2 é…ç½®applicationContext.xml&lt;/h3&gt;
&lt;pre class=&quot;xml&quot;&gt;
&lt;code&gt;&amp;lt;!--  åŠ è½½propertiesæ–‡ä»¶  --&amp;gt;
&amp;lt;context:property-placeholder location=&quot;classpath:db.properties&quot;&amp;gt;&amp;lt;/context:property-placeholder&amp;gt;


&amp;lt;!--  é—®é¢˜çš„æ•°æ®æº  --&amp;gt;
&amp;lt;bean id=&quot;commentsDataSource&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&amp;gt;
    &amp;lt;property name=&quot;driverClassName&quot; value=&quot;${howl.comments.driverClassName}&quot;&amp;gt;&amp;lt;/property&amp;gt;
    &amp;lt;property name=&quot;url&quot; value=&quot;${howl.comments.url}&quot;&amp;gt;&amp;lt;/property&amp;gt;
    &amp;lt;property name=&quot;username&quot; value=&quot;${howl.comments.username}&quot;&amp;gt;&amp;lt;/property&amp;gt;
    &amp;lt;property name=&quot;password&quot; value=&quot;${howl.comments.password}&quot;&amp;gt;&amp;lt;/property&amp;gt;
&amp;lt;/bean&amp;gt;


&amp;lt;!--  ç”¨æˆ·çš„æ•°æ®æº  --&amp;gt;
&amp;lt;bean id=&quot;usersDataSource&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&amp;gt;
    &amp;lt;property name=&quot;driverClassName&quot; value=&quot;${howl.users.driverClassName}&quot;&amp;gt;&amp;lt;/property&amp;gt;
    &amp;lt;property name=&quot;url&quot; value=&quot;${howl.users.url}&quot;&amp;gt;&amp;lt;/property&amp;gt;
    &amp;lt;property name=&quot;username&quot; value=&quot;${howl.users.username}&quot;&amp;gt;&amp;lt;/property&amp;gt;
    &amp;lt;property name=&quot;password&quot; value=&quot;${howl.users.password}&quot;&amp;gt;&amp;lt;/property&amp;gt;
&amp;lt;/bean&amp;gt;


&amp;lt;!--  é€šè¿‡setteræ–¹æ³•ï¼Œå¾€DynamicDataSourceçš„Mapé›†åˆä¸­æ³¨å…¥æ•°æ®  --&amp;gt;
&amp;lt;!--  å…·ä½“å‚æ•°ï¼Œçœ‹åå­—å¯ä»¥æ˜ç™½  --&amp;gt;
&amp;lt;bean id=&quot;dynamicDataSource&quot; class=&quot;com.howl.util.DynamicDataSource&quot;&amp;gt;
    &amp;lt;property name=&quot;targetDataSources&quot;&amp;gt;
        &amp;lt;map key-type=&quot;java.lang.String&quot;&amp;gt;
            &amp;lt;entry key=&quot;cds&quot; value-ref=&quot;commentsDataSource&quot;/&amp;gt;
            &amp;lt;entry key=&quot;uds&quot; value-ref=&quot;usersDataSource&quot;/&amp;gt;
        &amp;lt;/map&amp;gt;
    &amp;lt;/property&amp;gt;
    &amp;lt;property name=&quot;defaultTargetDataSource&quot; ref=&quot;commentsDataSource&quot;&amp;gt;&amp;lt;/property&amp;gt;
&amp;lt;/bean&amp;gt;


&amp;lt;!--  å°†`æ€»æº`æ³¨å…¥SqlSessionFactoryå·¥å‚  --&amp;gt;
&amp;lt;bean id=&quot;sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&amp;gt;
    &amp;lt;property name=&quot;configLocation&quot; value=&quot;classpath:mybatis-config.xml&quot;&amp;gt;&amp;lt;/property&amp;gt;
    &amp;lt;property name=&quot;dataSource&quot; ref=&quot;dynamicDataSource&quot;&amp;gt;&amp;lt;/property&amp;gt;
&amp;lt;/bean&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å› ä¸ºdynamicDataSourceæ˜¯ç»§æ‰¿AbstractRoutingDataSourceï¼Œæ‰€ä»¥setteræ³¨å…¥æ–¹æ³•å¾—å»çˆ¶ç±»é‡Œé¢å»æ‰¾ï¼Œå¼€å§‹ç¬”è€…ä¹Ÿæ˜¯æ‡µäº†ä¸€ä¸‹&lt;/p&gt;

&lt;h3 id=&quot;åˆ‡æ¢æ•°æ®æº&quot;&gt;3.3 åˆ‡æ¢æ•°æ®æº&lt;/h3&gt;
&lt;p&gt;æ•°æ®æºæ˜¯åœ¨Serviceå±‚åˆ‡æ¢çš„&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;UserService&lt;/strong&gt;&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;@Service
public class UserService {

    @Autowired
    private UserDao userDao;

    public User selectUserById(int id) {

        // è¡¨æ˜ä½¿ç”¨usersDataSourceåº“
        DynamicDataSourceHolder.setDataSourceKey(&quot;uds&quot;);
        return userDao.selectUserById(id);
    }
}&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;CommentService&lt;/strong&gt;&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;@Service
public class CommentService {

    @Autowired
    CommentDao commentDao;

    public List&amp;lt;Comment&amp;gt; selectCommentById(int blogId) {

        // è¡¨æ˜ä½¿ç”¨è¯„è®ºåº“
        DynamicDataSourceHolder.setDataSourceKey(&quot;cds&quot;);
        return commentDao.selectCommentById(blogId, -1);
    }
}&lt;/code&gt;
&lt;/pre&gt;

&lt;h3 id=&quot;è‡ªåŠ¨åˆ‡æ¢&quot;&gt;3.4 è‡ªåŠ¨åˆ‡æ¢&lt;/h3&gt;
&lt;p&gt;æ‰‹åŠ¨åˆ‡æ¢å®¹æ˜“å¿˜è®°ï¼Œæˆ‘ä»¬å­¦äº†AOPå¯ä»¥ä½¿ç”¨AOPæ¥åˆ‡æ¢ï¼Œè¿™é‡Œä½¿ç”¨æ³¨è§£å®ç°&lt;/p&gt;

&lt;pre class=&quot;xml&quot;&gt;
&lt;code&gt;&amp;lt;!-- å¼€å¯AOPæ³¨è§£æ”¯æŒ --&amp;gt;
&amp;lt;aop:aspectj-autoproxy&amp;gt;&amp;lt;/aop:aspectj-autoproxy&amp;gt;&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;åˆ‡é¢ç±»&lt;/strong&gt;&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;@Component
@Aspect
public class DataSourceAspect {

    @Pointcut(&quot;execution(* com.howl.service.impl.*(..))&quot;)
    private void pt1() {
    }

    @Around(&quot;pt1()&quot;)
    public Object around(ProceedingJoinPoint pjp) {

        Object rtValue = null;
        try {
            String name = pjp.getTarget().getClass().getName();
            if (name.equals(&quot;com.howl.service.UserService&quot;)) {
                DynamicDataSourceHolder.setDataSourceKey(&quot;uds&quot;);
            }
            if (name.equals(&quot;com.howl.service.CommentService&quot;)){
                DynamicDataSourceHolder.setDataSourceKey(&quot;cds&quot;);
            }
            // è°ƒç”¨ä¸šåŠ¡å±‚æ–¹æ³•
            rtValue = pjp.proceed();

            System.out.println(&quot;åç½®é€šçŸ¥&quot;);
        } catch (Throwable t) {
            System.out.println(&quot;å¼‚å¸¸é€šçŸ¥&quot;);
            t.printStackTrace();
        } finally {
            System.out.println(&quot;æœ€ç»ˆé€šçŸ¥&quot;);
        }
        return rtValue;
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½¿ç”¨ç¯ç»•é€šçŸ¥å®ç°åˆ‡å…¥com.howl.service.implé‡Œçš„æ‰€æœ‰æ–¹æ³•ï¼Œåœ¨é‡åˆ°UserServiceã€CommentServiceæ—¶ï¼Œå‰ç½®é€šçŸ¥åŠ¨æ€åˆ‡æ¢å¯¹åº”çš„æ•°æ®æº&lt;/p&gt;

&lt;h2 id=&quot;æ€»ç»“&quot;&gt;4. æ€»ç»“&lt;/h2&gt;
&lt;ol&gt;&lt;li&gt;ä»¥å‰ç¬”è€…è®¤ä¸ºServiceå±‚å¤šäº†implåŒ…å’Œæ¥å£æ˜¯å¤šä½™çš„ï¼Œç°åœ¨è¦ç”¨åˆ°AOPçš„æ—¶å€™åæ‚”è«åŠï¼Œæ‰€ä»¥é»˜è®¤ç»“æ„å¦‚æ­¤è‚¯å®šæœ‰é“ç†çš„&lt;/li&gt;
&lt;li&gt;å‡ºbugçš„æ—¶å€™ï¼Œæ‰çŸ¥é“åˆ†æ­¥æµ‹è¯•å“ªé‡Œå‡ºé—®é¢˜äº†ï¼Œå¦‚æœTDDæ¨åŠ¨é‚£ä¹ˆèƒ½å¿«é€Ÿå®šä½æŠ¥é”™åœ°æ–¹ï¼Œæ—¥å¿—ä¹Ÿå¾ˆé‡è¦&lt;/li&gt;
&lt;/ol&gt;
&lt;hr/&gt;&lt;p&gt;å‚è€ƒ&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.jianshu.com/p/d97cd60e404f&quot; class=&quot;uri&quot;&gt;https://www.jianshu.com/p/d97cd60e404f&lt;/a&gt;&lt;/p&gt;

</description>
<pubDate>Sun, 08 Mar 2020 23:13:00 +0000</pubDate>
<dc:creator>Howlet</dc:creator>
<og:description>æœ‰éœ€æ±‚å°±è¦æƒ³åŠæ³•è§£å†³ï¼Œæœ€è¿‘å‚ä¸çš„é¡¹ç›®å…¶æ¶‰åŠçš„ä¸‰ä¸ªæ•°æ®è¡¨åˆ†åˆ«åœ¨ä¸‰å°ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œè¿™å°±æœ‰ç‚¹çªå…€äº†ï¼Œç¬¬ä¸€æ¬¡é‡åˆ°è¿™ç§æƒ…å†µï¼Œå¯è¿™éš¾ä¸å€’ç¬”è€…ï¼Œèµ„æ–™ä¸€æŸ¥ï¼Œä»£ç ä¸€æ‰“ï¼Œå›å¤´çœ‹çœ‹æºç ï¼Œä¸‡äº‹å¤§å‰ 1. é¢„å¤‡çŸ¥è¯† è¿™é‡Œé»˜è®¤</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/Howlet/p/12446603.html</dc:identifier>
</item>
</channel>
</rss>