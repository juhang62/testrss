<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>åšå®¢å›­_é¦–é¡µ</title>
<link></link>
<description>ä»£ç æ”¹å˜ä¸–ç•Œ</description>
<item>
<title>Denoä¼šåœ¨çŸ­æœŸå†…å–ä»£Nodeå—ï¼Ÿ - è‘¡è„åŸæŠ€æœ¯å›¢é˜Ÿ</title>
<link>http://www.cnblogs.com/powertoolsteam/p/12935115.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/powertoolsteam/p/12935115.html</guid>
<description>&lt;blockquote readability=&quot;7.4690265486726&quot;&gt;
&lt;p&gt;è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼š&lt;a href=&quot;https://www.grapecity.com.cn/&quot; target=&quot;_blank&quot;&gt;è‘¡è„åŸå®˜ç½‘&lt;/a&gt;ï¼Œè‘¡è„åŸä¸ºå¼€å‘è€…æä¾›ä¸“ä¸šçš„å¼€å‘å·¥å…·ã€è§£å†³æ–¹æ¡ˆå’ŒæœåŠ¡ï¼Œèµ‹èƒ½å¼€å‘è€…ã€‚&lt;/p&gt;
&lt;p&gt;åŸæ–‡å‡ºå¤„ï¼šhttps://blog.bitsrc.io/what-is-deno-and-will-it-replace-nodejs-a13aa1734a74&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div readability=&quot;102&quot;&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/139239/202005/139239-20200522085338207-1610429505.png&quot; alt=&quot;&quot;/&gt;Â &lt;/p&gt;
&lt;h3&gt;Denoæ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h3&gt;
&lt;p&gt;Deno v1.0.0å·²äº5æœˆ13æ—¥æ­£å¼å‘å¸ƒã€‚&lt;/p&gt;
&lt;p&gt;å…¶å¼€å‘è€…ä¸ºRyan Dahlï¼Œä»–çš„ä¸Šä¸€ä¸ªé¡¹ç›®æ˜¯Nodeï¼Œç›¸ä¿¡æˆ‘ä»¬å¤§éƒ¨åˆ†äººéƒ½äº†è§£ã€‚&lt;/p&gt;
&lt;p&gt;ä½œä¸ºNodeä¹‹çˆ¶ï¼ŒRyan Dahlè®¤ä¸ºNodeè‡ªä»ä»–æŠŠé¡¹ç›®ç§»äº¤å‡ºå»åï¼ŒNodeçš„èµ°å‘è¶Šæ¥è¶ŠèƒŒç¦»äº†ä»–çš„åˆè¡·ï¼Œå¹¶ä¸”å­˜åœ¨ç€å¾ˆå¤šæ— æ³•è§£å†³çš„é—®é¢˜ï¼Œæ‰€ä»¥ä»–å†³å¿ƒé‡æ–°å¼€å‘ä¸€ä¸ªæ–°çš„é¡¹ç›®å»è§£å†³è¿™äº›é—®é¢˜ï¼Œè¿™ä¸ªé¡¹ç›®å°±åä¸ºDenoã€‚ç›®æ ‡åˆ™æ˜¯&lt;strong&gt;De&lt;/strong&gt;stroy-&lt;strong&gt;no&lt;/strong&gt;deã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆï¼Œè¿™æ ·æ˜¯ä¸æ˜¯å°±æ„å‘³ç€Denoå³å°†æ›¿ä»£Nodeï¼Œæˆä¸ºNodeçš„ä¸‹ä¸€ä»£äº§å“ï¼Ÿæˆ‘ä»¬åº”ä¸åº”è¯¥ä»ç°åœ¨å°±å¼€å§‹æ”¾å¼ƒNodeå¼€å§‹ä½¿ç”¨Denoå‘¢ï¼Ÿ è®©æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹ã€‚&lt;/p&gt;
&lt;h3&gt;èµ·æº&lt;/h3&gt;
&lt;p class=&quot;ht&quot;&gt;åœ¨2018å¹´ï¼ŒRyanåœ¨æŸæ—è¿›è¡Œäº†ä¸€æ¬¡æ¼”è®²ï¼Œè¿™æ˜¯ä»–ç¬¬äºŒæ¬¡å…³äºJSçš„å…¬å¼€æ¼”è®²ï¼Œç¬¬ä¸€æ¬¡å†2009ï¼Œé‚£æ¬¡æ˜¯å®£å¸ƒNodeé¡¹ç›®çš„è¯ç”Ÿã€‚&lt;/p&gt;
&lt;p class=&quot;ht&quot;&gt;åœ¨è¿™æ¬¡æ¼”è®²ä¸­ï¼Œé™¤äº†ä¸»è¦ä»‹ç»ä»–è®¤ä¸ºNode.jsçš„å‡ å¤§é—®é¢˜å’Œä¸å¯é¿å…çš„è®¸å¤šBugå¤–ï¼Œåœ¨æ¼”è®²å¿«ç»“æŸæ—¶ï¼Œä»–æ­å¼€äº†å½“æ—¶è¿˜æ˜¯ä¸ªå°é¡¹ç›®åä¸ºDenoçš„é¢çº±ï¼Œå› ä¸ºå’Œnodeå‘½åæœ‰ç€åƒä¸ä¸‡ç¼•çš„è”ç³»ï¼Œé‚£æ—¶å¤§å®¶è®¤ä¸ºè¿™ä¸ªé¡¹ç›®å°±æ˜¯Node.js v2ï¼Œå®ƒå°†ä¼šè§£å†³å’Œå®Œå–„ryæåˆ°é‚£äº›é—®é¢˜ã€‚&lt;/p&gt;
&lt;p class=&quot;ht&quot;&gt;ä¸¤å¹´åçš„5æœˆ13æ—¥ï¼Œ Deno 1.0ç»ˆäºæ­£å¼å‘å¸ƒäº†ï¼Œå®ƒæ˜¯ä¸€ä¸ªå…¨æ–°çš„æœåŠ¡ç«¯JavaScriptè¿è¡Œæ—¶ï¼Œä½¿ç”¨Rustè€Œä¸æ˜¯C++å¼€å‘ï¼Œç”±äºRuståŸç”Ÿæ”¯æŒWebAssemblyï¼Œæ‰€ä»¥å®ƒä¹Ÿèƒ½ç›´æ¥è¿è¡ŒWebAssemblyã€‚åŸºäºTokioå¹³å°(å®ƒæä¾›äº†æ‰€æœ‰JavaScriptæ‰€éœ€çš„å¼‚æ­¥æ“ä½œ)ï¼Œå†…ç½®V8å’Œtscå¼•æ“ï¼Œå¯ç›´æ¥è§£é‡ŠJavaScriptå’ŒTypeScriptã€‚&lt;/p&gt;
&lt;h3&gt;å®‰å…¨é›†æˆ&lt;/h3&gt;
&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼ŒNode.jsç»™ä½ çš„è®¿é—®æƒé™æ¯”è¾ƒé«˜ï¼Œè¿™æ„å‘³ç€ä½ æ‹¥æœ‰è¯»å†™æ–‡ä»¶ç³»ç»Ÿã€å¯¹å¤–å‘å‡ºè¯·æ±‚ã€è®¿é—®ç¯å¢ƒå˜é‡ç­‰è¡Œä¸ºã€‚è™½ç„¶ä½œä¸ºå¼€å‘äººå‘˜ï¼Œæ‹¥æœ‰è¿™ç§çº§åˆ«çš„è®¿é—®æƒé™å¯¹å¼€å‘è¿‡ç¨‹éå¸¸å¥½ï¼Œä½†å¦‚æœä½ åœ¨å¼€å‘è¿‡ç¨‹ä¸­æœ‰ä¸€ç‚¹ç–æ¼ï¼Œå°†æ¥å¯¹ä½ çš„åº”ç”¨ä¹Ÿä¼šäº§ç”Ÿå®‰å…¨é£é™©ã€‚&lt;/p&gt;
&lt;p&gt;è€Œåœ¨Denoè¿™ï¼Œé»˜è®¤æƒ…å†µä¸‹è„šæœ¬ä¸å…·æœ‰è¯»å†™æƒé™ï¼Œå¿…é¡»æ˜¾å¼é€šè¿‡å‘½ä»¤è¡Œå‚æ•°æ¥å¯ç”¨æˆ–ç¦ç”¨å¯¹ä¸åŒå®‰å…¨åŠŸèƒ½çš„è®¿é—®ã€‚å› æ­¤ï¼Œå¦‚æœéœ€è¦è„šæœ¬èƒ½å¤Ÿè®¿é—®/etcæ–‡ä»¶å¤¹ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢å‘½ä»¤è¡Œæ‰§è¡Œï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
deno --allow-read = / etc myscript.ts
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;è¿™å°±ç±»ä¼¼äºå…¶ä»–å¹³å°å¤„ç†å®‰å…¨æ€§çš„æ–¹å¼ã€‚å¦‚æœä½ æ˜¯Androidç”¨æˆ·ï¼Œé‚£ä¹ˆè‚¯å®šæœ‰å¾ˆå¤šåº”ç”¨ç¨‹åºè¦æ±‚ä½ å…è®¸å®ƒä»¬è®¿é—®ä½ æ‰‹æœºå†…çš„ä¸åŒèµ„æºï¼Œä¾‹å¦‚è”ç³»äººã€ç”µè¯ã€æ–‡ä»¶å¤¹ç­‰ï¼ŒåŒæ ·çš„æ¦‚å¿µä¹Ÿå¯ä»¥åœ¨è¿™é‡Œåº”ç”¨ã€‚é€šè¿‡å°†è¿™äº›æ ‡å¿—ç”¨ä½œæ‰§è¡Œè„šæœ¬çš„å‘½ä»¤è¡Œçš„ä¸€éƒ¨åˆ†ï¼Œä½ å¯ä»¥æä¾›ä»£ç æ‰€éœ€çš„æƒé™ã€‚&lt;/p&gt;
&lt;h3&gt;æ›´å®Œæ•´çš„æ ‡å‡†åº“&lt;/h3&gt;
&lt;p&gt;è‡ªä»Nodeçš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å‘å¸ƒä»¥æ¥ï¼ŒJavaScriptå·²ç»æ”¹è¿›äº†å®ƒçš„æ ‡å‡†åº“ï¼Œä½†ä¸å…¶ä»–è¯­è¨€ç›¸æ¯”ï¼Œå®ƒä»æœ‰ç›¸å½“é•¿çš„è·¯è¦èµ°ã€‚Denoä¹Ÿè¯•å›¾æ”¹è¿›è¿™ä¸€ç‚¹ï¼Œå®ƒå£°ç§°æ‹¥æœ‰ä¸€ä¸ªéå¸¸å®Œæ•´çš„æ ‡å‡†åº“ï¼Œå…è®¸å¼€å‘äººå‘˜ä½¿ç”¨å®˜æ–¹å·¥å…·æ‰§è¡ŒåŸºæœ¬ä»»åŠ¡ï¼Œè€Œåªéœ€è¦å¯¹å¤æ‚ä»»åŠ¡ä½¿ç”¨å¤–éƒ¨åº“(ala NPM)ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬è´¨ä¸Šï¼ŒDenoå¼€ç®±å³ç”¨å·¥å…·ä¸ºç»ˆç«¯æ–‡æœ¬æ·»åŠ é¢œè‰²ï¼Œå¤„ç†å¤–éƒ¨æ•°æ®ç»“æ„(å¦‚Binaryã€CSVã€YAMLå’Œå…¶ä»–)ï¼Œç”ŸæˆUUIDï¼Œç”šè‡³ç¼–å†™WebSocketã€‚è¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–æ›´åŸºæœ¬çš„æ¨¡å—ï¼Œä¾‹å¦‚æ–‡ä»¶ç³»ç»Ÿè®¿é—®ã€æ—¥æœŸåŠ©æ‰‹å‡½æ•°ã€httpç›¸å…³å‡½æ•°ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;h3&gt;é›†æˆTypeScript&lt;/h3&gt;
&lt;p&gt;å¦‚æœä½ å¯¹TypeScriptéå¸¸ç†Ÿæ‚‰ï¼Œé‚£ä¹ˆä½¿ç”¨Denoå°†ä¼šæ›´åŠ å®¹æ˜“ä¸Šæ‰‹ï¼Œå› ä¸ºå®ƒåŸç”Ÿå¯ä»¥ç›´æ¥è¿è¡ŒTSã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–ï¼ŒDenoä¸éœ€è¦ä»»ä½•å¤–éƒ¨å·¥å…·å»æ”¯æŒå¤šè¯­è¨€ï¼Œå®ƒå†…éƒ¨ä¼šæ ¹æ®æ–‡ä»¶åç¼€è‡ªåŠ¨åˆ¤æ–­å…¶ä½¿ç”¨çš„è¯­è¨€è§£é‡Šå¼•æ“ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶é»˜è®¤æƒ…å†µä¸‹Denoä¼šå¤„ç†å¾ˆå¤šäº‹æƒ…ï¼Œä½†æ‚¨å¯ä»¥ä½¿ç”¨è‡ªå·±çš„tsconfig.jsonæ–‡ä»¶è¦†ç›–é…ç½®ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
deno run -c tsconfig.json [your-script.ts]
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;é»˜è®¤é…ç½®ä½¿ç”¨çš„æ˜¯ä¸¥æ ¼æ¨¡å¼ï¼Œå› æ­¤å¦‚æœå‘ç°ä»»ä½•ä¸åˆæ ¼çš„ä»£ç éƒ½ä¼šç«‹å³å¾—åˆ°æç¤ºã€‚&lt;/p&gt;
&lt;h3&gt;æ”¾å¼ƒNPMå’Œnode_modules&lt;/h3&gt;
&lt;p&gt;Denoå†³å®šå®Œå…¨æ”¾å¼ƒNPMå’Œnode_modulesï¼Œ å› ä¸ºnpmé€»è¾‘è¶Šæ¥è¶Šå¤æ‚ï¼Œnode.jså¯¹å¤–éƒ¨æ¨¡å—å‡ ä¹æ²¡æœ‰ä»»ä½•å®‰å…¨éªŒè¯æªæ–½ï¼Œå¦å¤–node_modulesä¹Ÿè¶Šæ¥è¶Šè‡ƒè‚¿ä¸”éš¾ä»¥ç®¡ç†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/139239/202005/139239-20200522085504752-612539459.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;é‚£ä¹ˆï¼ŒDenoæ˜¯å¦‚ä½•å¤„ç†ä¾èµ–å…³ç³»å‘¢ï¼Ÿå®ƒæ˜¯é€šè¿‡urlåŠ è½½æ‰€æœ‰æ¨¡å—çš„ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
import * as log from &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;https://deno.land/std/log/mod.ts&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ‰€ä»¥ï¼ŒDenoä¸å†éœ€è¦æ‹¥æœ‰ä¸€ä¸ªé›†ä¸­çš„å­˜å‚¨åº“ï¼Œä¹‹å‰çš„package.jsonä¹Ÿä¸å†éœ€è¦äº†ï¼Œç°åœ¨é€šè¿‡åœ¨åä¸ºdeps.tsçš„æ–‡ä»¶ä¸­åŒ…å«äº†æ¨¡å—åˆ—è¡¨åŠå…¶å„è‡ªçš„URLï¼Œç®€åŒ–äº†ä¾èµ–ç®¡ç†ã€‚ä½†ç‰ˆæœ¬ç®¡ç†æ§åˆ¶æ€ä¹ˆåŠå‘¢ï¼Ÿä½œè€…å·²ç»æƒ³åˆ°äº†ï¼Œå¯åœ¨URLä¸ŠæŒ‡å®šåŒ…çš„ç‰ˆæœ¬ï¼Œdeps.tsçš„æ–‡ä»¶ç¤ºæ„ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
export { assert } from &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;https://deno.land/std@v0.39.0/testing/asserts.ts&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
export { green, bold } from &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;https://deno.land/std@v0.39.0/fmt/colors.ts&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;;
&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;ht&quot;&gt;ç”±äºè¿™ä¸ªæ–‡ä»¶çš„å­˜åœ¨ï¼Œåœ¨å†…éƒ¨è¿è¡Œæ—¶ï¼Œä¾èµ–é¡¹å°†è¢«é‡æ–°å¯¼å‡ºï¼Œè¿™å°±èƒ½è®©åº”ç”¨ç¨‹åºçš„ä¸åŒæ¨¡å—éƒ½å¼•ç”¨ç›¸åŒçš„æºã€‚&lt;/p&gt;
&lt;p class=&quot;ht&quot;&gt;å¦‚æœæ‚¨æƒ³æ›´æ–°ä»»ä½•æ¨¡å—çš„ç‰ˆæœ¬ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹deps.tsä¸­URLçš„ç‰ˆæœ¬ä¿¡æ¯ã€‚å¦å¤–ï¼Œè™½ç„¶æ²¡æœ‰äº†node_modeulesç›®å½•ï¼Œä½†ä¾èµ–é¡¹ä»ç„¶ä¼šä¸‹è½½å¹¶éšè—åœ¨ä½ çš„ç¡¬ç›˜ä¸­ï¼Œä¾›ä½ ç¦»çº¿ä½¿ç”¨ï¼Œå¦‚é€šè¿‡éœ€è¦é‡æ–°ä¸‹è½½ï¼Œåªéœ€åœ¨å‘½ä»¤ä¸­æ·»åŠ â€”reloadå‘½ä»¤å³å¯ã€‚&lt;/p&gt;

&lt;h3&gt;è¿˜æœ‰ä»€ä¹ˆï¼Ÿ&lt;/h3&gt;
&lt;p&gt;Denoè¿˜åŒ…æ‹¬å…¶ä»–ç‰¹æ€§ï¼Œæ¯”å¦‚è‡ªåŠ¨æµ‹è¯•å™¨ã€è°ƒè¯•å™¨ã€æ–‡ä»¶ç›‘è§†å™¨ç­‰å¼€ç®±å³ç”¨çš„å·¥å…·ã€‚ä½†å…¶ä¸­ä¸€äº›åªæ˜¯è¯­è¨€æä¾›çš„APIï¼Œæ‚¨éœ€è¦ç¼–å†™è‡ªå·±çš„å·¥å…·æ‰èƒ½ä½¿ç”¨å®ƒä»¬ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥Deno.watchFSå‘æ‚¨æä¾›çš„æ–‡ä»¶ç›‘è§†å™¨APIä¸ºä¾‹ï¼Œå¦‚æœä½ æ­£åœ¨å¯»æ‰¾ç±»ä¼¼äºnodemonçš„è§£å†³æ–¹æ¡ˆï¼Œé‚£ä¹ˆä½ å¯ä»¥è‡ªå·±æ„å»ºå®ƒã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªè§£å†³ç±»ä¼¼é—®é¢˜çš„23è¡Œè„šæœ¬ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/139239/202005/139239-20200522085544155-1503453216.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;h3&gt;æœ€åï¼Œå®ƒä¼šåœ¨çŸ­æœŸå†…å–ä»£Node.jså—ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;è™½ç„¶Denoçš„å¾ˆå¤šæƒ³æ³•å’Œç†å¿µéå¸¸å¥½ï¼Œä¹Ÿç¡®å®è§£å†³äº†å¾ˆå¤šé—®é¢˜ã€‚ä½†ä½œä¸ºä¸€ä¸ªä»Nodeå‘å¸ƒä¹‹åˆå°±å¼€å§‹ç”¨çš„å›¢é˜Ÿï¼Œæˆ‘è®¤ä¸ºPHPã€Pythonç”šè‡³Ruby(æ›´ä¸ç”¨è¯´Javaæˆ–.NET)éƒ½ä¸èƒ½ä¸åœ¨åç«¯æ‹¥æœ‰JavaScriptå’Œå¼‚æ­¥I/Oæ¨¡å‹ç›¸æå¹¶è®ºã€‚è¿™äº›å¹´æ¥ï¼ŒNode(å’ŒJavaScript)ä¸æ–­å‘å±•ï¼Œä»¥æ»¡è¶³ä¸šç•Œçš„éœ€æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æˆ‘çœ‹æ¥ï¼Œè™½ç„¶Denoæ˜¯ä»¥Destroy-nodeä¸ºå·±ä»»è€Œå¼€å‘çš„ï¼Œä½†å°±ç›®å‰æ¥è®²ï¼ŒDenoå–ä»£Nodeä»ä¸å¯èƒ½ï¼ŒNodeçš„å æœ‰ç‡å¤ªé«˜äº†ï¼Œç”Ÿæ€ä¹Ÿè¶³å¤Ÿå®Œå–„ï¼ŒåŸºæœ¬å±äºæƒ³è¦ä»€ä¹ˆåŠŸèƒ½éƒ½èƒ½åœ¨ç¤¾åŒºä¸­æ‰¾åˆ°ï¼Œæ‰€ä»¥åŸºæœ¬æ— éœ€æ‹…å¿ƒã€‚è€ŒDenoè¿˜åœ¨å­µåŒ–åˆæœŸï¼Œä¼ä¸šå¾ˆéš¾å»æ”¾å¼ƒå·²ç»æˆç†Ÿçš„æŠ€æœ¯è½¬è€ŒæŠ•å…¥æ›´å¤§çš„ç²¾åŠ›ä½¿ç”¨å®ƒã€‚ä½†å®ƒæœªæ¥çš„å‰æ™¯è¿˜æ˜¯ä»¤äººæœŸå¾…çš„ï¼Œ ä¹Ÿè®¸åœ¨è¶Šæ¥è¶Šå¤šçš„è¡Œä¸šå¤´éƒ¨ä¼ä¸šåˆ†äº«è¿‡å®ƒä»¬çš„ä½¿ç”¨ç»éªŒåï¼ŒDenoçš„å­˜åœ¨ä¹Ÿä¼šè¶Šæ¥è¶Šä¸ºäººæ‰€çŸ¥ã€‚&lt;/p&gt;

&lt;/div&gt;
</description>
<pubDate>Fri, 22 May 2020 00:57:00 +0000</pubDate>
<dc:creator>è‘¡è„åŸæŠ€æœ¯å›¢é˜Ÿ</dc:creator>
<og:description>è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼šè‘¡è„åŸå®˜ç½‘ï¼Œè‘¡è„åŸä¸ºå¼€å‘è€…æä¾›ä¸“ä¸šçš„å¼€å‘å·¥å…·ã€è§£å†³æ–¹æ¡ˆå’ŒæœåŠ¡ï¼Œèµ‹èƒ½å¼€å‘è€…ã€‚ åŸæ–‡å‡ºå¤„ï¼šhttps://blog.bitsrc.io/what-is-deno-and-will-it-r</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/powertoolsteam/p/12935115.html</dc:identifier>
</item>
<item>
<title>ç¬¬ 6 ç¯‡ï¼šåˆ†é¡µæ¥å£ - å‰Šå¾®å¯’</title>
<link>http://www.cnblogs.com/xueweihan/p/12930845.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/xueweihan/p/12930845.html</guid>
<description>&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/759200/202004/759200-20200415161158343-1662112908.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä½œè€…ï¼š&lt;a href=&quot;https://www.zmrenwu.com&quot;&gt;HelloGitHub-è¿½æ¢¦äººç‰©&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœæ²¡æœ‰è®¾ç½®åˆ†é¡µï¼Œdjango-rest-framework ä¼šå°†æ‰€æœ‰èµ„æºç±»è¡¨åºåˆ—åŒ–åè¿”å›ï¼Œå¦‚æœèµ„æºå¾ˆå¤šï¼Œå°±ä¼šå¯¹ç½‘ç«™æ€§èƒ½é€ æˆå½±å“ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬æ¥ç»™åšå®¢æ–‡ç« åˆ—è¡¨ API æ·»åŠ åˆ†é¡µåŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;django-rest-framework ä¸ºåˆ†é¡µåŠŸèƒ½æä¾›äº†å¤šä¸ªè¾…åŠ©ç±»ï¼Œå¸¸ç”¨çš„æœ‰ï¼š&lt;/p&gt;
&lt;ul readability=&quot;0.5&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;code&gt;PageNumberPagination&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å°†èµ„æºåˆ†ä¸ºç¬¬ 1 é¡µã€ç¬¬ 2 é¡µ...ç¬¬ n é¡µï¼Œä½¿ç”¨é¡µç å·è¯·æ±‚åˆ†é¡µç»“æœã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;&lt;code&gt;LimitOffsetPagination&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;é€šè¿‡ &lt;code&gt;limit&lt;/code&gt; å’Œ &lt;code&gt;offset&lt;/code&gt; ä¸¤ä¸ªå‚æ•°æ¥æ§åˆ¶è¯·æ±‚çš„èµ„æºã€‚ä¾‹å¦‚é€šè¿‡å‘é€ API è¯·æ±‚ï¼š/posts/?offset=20&amp;amp;limit=5ï¼Œå°†è·å–æ–‡ç« èµ„æºåˆ—è¡¨ç¬¬ 20 ç¯‡åçš„ 5 ç¯‡æ–‡ç« ã€‚å¦‚æœ offset ä»¥ç­‰å·®æ•°åˆ—é€’å¢ï¼Œlimit ä¿æŒä¸å˜ï¼Œåˆ™ç­‰ä»·äºæŒ‰é¡µç åˆ†é¡µã€‚ä½† offset å’Œ limit å¯ä»¥ä¸ºä»»æ„å€¼ï¼Œå› æ­¤è¿™ç§åˆ†é¡µæ¯” &lt;code&gt;PageNumberPagination&lt;/code&gt; æ›´åŠ çµæ´»ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;è¦ä½¿ç”¨åˆ†é¡µåŠŸèƒ½éå¸¸ç®€å•ï¼Œåªéœ€åœ¨é¡¹ç›®çš„é…ç½®æ–‡ä»¶ä¸­é…ç½®å¥½åˆ†é¡µé€‰é¡¹ï¼Œå³å¯å…¨å±€å¯ç”¨åˆ†é¡µåŠŸèƒ½ã€‚æ‰“å¼€ config/common.py é…ç½®æ–‡ä»¶ï¼Œå†™å…¥å¦‚ä¸‹çš„åˆ†é¡µé…ç½®ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;REST_FRAMEWORK = {
    # è®¾ç½® DEFAULT_PAGINATION_CLASS åï¼Œå°†å…¨å±€å¯ç”¨åˆ†é¡µï¼Œæ‰€æœ‰ List æ¥å£çš„è¿”å›ç»“æœéƒ½ä¼šè¢«åˆ†é¡µã€‚
    # å¦‚æœæƒ³å•ç‹¬æ§åˆ¶æ¯ä¸ªæ¥å£çš„åˆ†é¡µæƒ…å†µï¼Œå¯ä¸è®¾ç½®è¿™ä¸ªé€‰é¡¹ï¼Œè€Œæ˜¯åœ¨è§†å›¾å‡½æ•°ä¸­è¿›è¡Œé…ç½®
    &quot;DEFAULT_PAGINATION_CLASS&quot;: &quot;rest_framework.pagination.PageNumberPagination&quot;,
    # è¿™ä¸ªé€‰é¡¹æ§åˆ¶åˆ†é¡µåæ¯é¡µçš„èµ„æºä¸ªæ•°
    &quot;PAGE_SIZE&quot;: 10,
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é…ç½®å®Œæˆä¹‹åï¼Œæ‰€æœ‰é€šç”¨è§†å›¾å‡½æ•°æˆ–è€…è§†å›¾é›†ç”Ÿæˆçš„èµ„æºåˆ—è¡¨ APIï¼Œè¿”å›çš„èµ„æºåˆ—è¡¨éƒ½ä¼šè¢«åˆ†é¡µã€‚é…ç½®æ–‡ä»¶ä¸­çš„åˆ†é¡µè®¾ç½®å°†ä½œç”¨äºå…¨å±€ï¼Œå¦‚æœæŸä¸ªè§†å›¾å‡½æ•°æˆ–è€…è§†å›¾é›†ä¸æƒ³ä½¿ç”¨å…¨å±€é…ç½®æ€ä¹ˆåŠå‘¢ï¼Ÿå¯ä»¥åœ¨è§†å›¾å‡½æ•°æˆ–è€…è§†å›¾é›†ä¸­è®¾ç½® pagination_class å±æ€§ï¼ŒæŒ‡å®šéœ€è¦ä½¿ç”¨çš„åˆ†é¡µè¾…åŠ©ç±»å³å¯ã€‚ä¾‹å¦‚å°†åšå®¢æ–‡ç« åˆ—è¡¨åˆ†é¡µæ›¿æ¢ä¸º limit offset çš„åˆ†é¡µæ–¹å¼ï¼Œå¯ä»¥è¿™æ ·è®¾ç½®ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;from rest_framewrok.pagination import PageNumberPagination

class PostViewSet(viewsets.GenericViewSet):
    pagination_class = LimitOffsetPagination
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™æ ·ï¼Œ&lt;code&gt;PostViewSet&lt;/code&gt; è§†å›¾é›†å°†è¿”å› limit offset åˆ†é¡µå½¢å¼çš„æ–‡ç« åˆ—è¡¨ï¼Œè€Œå…¶ä»–è§†å›¾æˆ–è€…è§†å›¾é›†ä»å°†ä½¿ç”¨å…¨å±€çš„åˆ†é¡µé…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;è¯·æ±‚æ–‡ç«  apiï¼Œè¿”å›ç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://blog-1253812787.cos.ap-chengdu.myqcloud.com/page_number_pagination.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¯¹è¿”å›ç»“æœçš„è§£é‡Šï¼š&lt;/p&gt;
&lt;p&gt;countï¼šæ€»èµ„æºæ•°ç›®&lt;/p&gt;
&lt;p&gt;nextï¼šä¸‹ä¸€é¡µèµ„æºçš„é“¾æ¥&lt;/p&gt;
&lt;p&gt;previousï¼šä¸Šä¸€é¡µèµ„æºçš„é“¾æ¥&lt;/p&gt;
&lt;p&gt;resultsï¼šå½“å‰é¡µçš„èµ„æºåˆ—è¡¨&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/759200/202002/759200-20200213201956024-782757549.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å…³æ³¨å…¬ä¼—å·åŠ å…¥äº¤æµç¾¤&lt;/strong&gt;&lt;/p&gt;
</description>
<pubDate>Fri, 22 May 2020 00:48:00 +0000</pubDate>
<dc:creator>å‰Šå¾®å¯’</dc:creator>
<og:description>ä½œè€…ï¼š &amp;quot;HelloGitHub è¿½æ¢¦äººç‰©&amp;quot; å¦‚æœæ²¡æœ‰è®¾ç½®åˆ†é¡µï¼Œdjango rest framework ä¼šå°†æ‰€æœ‰èµ„æºç±»è¡¨åºåˆ—åŒ–åè¿”å›ï¼Œå¦‚æœèµ„æºå¾ˆå¤šï¼Œå°±ä¼šå¯¹ç½‘ç«™æ€§èƒ½é€ æˆå½±å“ã€‚ä¸ºæ­¤</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/xueweihan/p/12930845.html</dc:identifier>
</item>
<item>
<title>React Native æ¶æ„æ¼”è¿› - æ¢¦çƒ¬</title>
<link>http://www.cnblogs.com/ayqy/p/react-native-new-architecture.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/ayqy/p/react-native-new-architecture.html</guid>
<description>&lt;p&gt;ä¸Šä¸€ç¯‡ï¼ˆ&lt;a href=&quot;http://www.ayqy.net/blog/react-native-architecture-overview/&quot;&gt;React Native æ¶æ„ä¸€è§ˆ&lt;/a&gt;ï¼‰ä»è®¾è®¡ã€çº¿ç¨‹æ¨¡å‹ç­‰æ–¹é¢ä»‹ç»äº† React Native çš„ç°æœ‰æ¶æ„ï¼Œæœ¬ç¯‡å°†åˆ†æè¿™ç§æ¶æ„çš„å±€é™æ€§ï¼Œä»¥åŠ React Native æ­£åœ¨è¿›è¡Œçš„æ¶æ„å‡çº§è®¡åˆ’&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;4&quot;&gt;Â &lt;/p&gt;

&lt;p&gt;æœ€åˆçš„è®¾è®¡ä¹Ÿå¸¦æ¥äº†ä¸€äº›é™åˆ¶ï¼š&lt;/p&gt;
&lt;ul readability=&quot;0&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;å¼‚æ­¥ï¼šæ— æ³•å°† JavaScript é€»è¾‘ç›´æ¥ä¸è®¸å¤šéœ€è¦åŒæ­¥ç­”æ¡ˆçš„ Native API é›†æˆ&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;æ‰¹å¤„ç†ï¼šå¾ˆéš¾è®© React Native åº”ç”¨è°ƒç”¨ Native å®ç°çš„å‡½æ•°&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;å¯åºåˆ—åŒ–ï¼šå­˜åœ¨ä¸å¿…è¦çš„ copyï¼Œè€Œä¸æ˜¯ç›´æ¥å…±äº«å†…å­˜&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;è¿™äº›é—®é¢˜åœ¨ Native + React Native çš„æ··åˆåº”ç”¨ä¸­å°¤å…¶çªå‡ºï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;For apps that are entirely built in React Native, these restrictions are usually bearable. But for apps with complex integration between React Native and existing app code, they are frustrating.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;18&quot;&gt;Â &lt;/p&gt;

&lt;p&gt;å› æ­¤ï¼Œ2018 å¹´ 6 æœˆæå‡ºå¤§è§„æ¨¡é‡æ„çš„è®¡åˆ’ï¼Œç›®çš„æ˜¯æ›´å¥½åœ°æ”¯æŒæ··åˆåº”ç”¨ï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;We're working on a large-scale rearchitecture of React Native to make the framework more flexible and integrate better with native infrastructure in hybrid JavaScript/native apps.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;24&quot;&gt;Â &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://miro.medium.com/max/1600/1*mSGPH9SIopScxnpF7Wimdg.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;25&quot;&gt;Â &lt;/p&gt;
&lt;p&gt;å…·ä½“çš„ï¼Œæœ‰ 3 ç‚¹é‡å¤§æ”¹åŠ¨ï¼š&lt;/p&gt;
&lt;ul readability=&quot;0.47491638795987&quot;&gt;&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;çº¿ç¨‹æ¨¡å‹ï¼šå…è®¸&lt;strong&gt;åœ¨ä»»æ„çº¿ç¨‹ä¸­åŒæ­¥è°ƒç”¨ JavaScript&lt;/strong&gt;æ‰§è¡Œé«˜ä¼˜å…ˆçº§çš„æ›´æ–°ï¼ŒUI æ›´æ–°ä¸å†éè¦è·¨ 3 ä¸ªçº¿ç¨‹æ‰èƒ½è¿›è¡Œ&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-0.81927710843373&quot;&gt;
&lt;p&gt;Reactï¼šæ”¯æŒ React 16+çš„æ–°ç‰¹æ€§ï¼ŒåŒ…æ‹¬&lt;a href=&quot;https://reactjs.org/blog/2018/03/01/sneak-peek-beyond-react-16.html&quot;&gt;async rendering&lt;/a&gt;ã€Data Fetching ç­‰ç­‰&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;Bridgeï¼šç²¾ç®€ä¼˜åŒ–ï¼Œå…è®¸ Native ä¸ JavaScript ä¹‹é—´çš„ç›´æ¥è°ƒç”¨&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æ”¯æŒåŒæ­¥è°ƒç”¨è®©ä¹‹å‰å¾ˆéš¾å®ç°çš„ä¸€äº›ä¸œè¥¿æˆä¸ºäº†å¯èƒ½ï¼Œä¾‹å¦‚è·¨è¯­è¨€çš„è°ƒç”¨æ ˆè¿½è¸ª&lt;/p&gt;
&lt;p&gt;å¯¹åº”åˆ°æ¶æ„å›¾ä¸­ï¼Œç›¸å½“äºå¯¹æ¯ä¸€å±‚è¿›è¡Œå•ç‹¬ä¼˜åŒ–ï¼š&lt;/p&gt;
&lt;ul readability=&quot;1.5&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;React å±‚ï¼šå¢å¼º JavaScript ç±»å‹å®‰å…¨ï¼Œå¹¶æ”¯æŒ React 16+æ–°ç‰¹æ€§&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;JavaScript å±‚ï¼šå¼•å…¥ JSIï¼Œå…è®¸æ›¿æ¢ä¸åŒçš„ JavaScript å¼•æ“&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;Bridge å±‚ï¼šåˆ’åˆ†æˆ Fabric å’Œ TurboModules ä¸¤éƒ¨åˆ†ï¼Œåˆ†åˆ«è´Ÿè´£ UI æ¸²æŸ“ä¸ Native æ¨¡å—&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;Native å±‚ï¼šç²¾ç®€æ ¸å¿ƒæ¨¡å—ï¼Œå°†éæ ¸å¿ƒéƒ¨åˆ†æ‹†åˆ†å‡ºå»ä½œä¸ºç¤¾åŒºæ¨¡å—ç‹¬ç«‹æ›´æ–°ç»´æŠ¤&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;åˆæ­¥ä¼°è®¡ï¼Œè¿™äº›é‡æ„å·¥ä½œé¢„æœŸåœ¨ 2019 å¹´åº•æˆ– 2020 å¹´åˆå®Œæˆï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;Itâ€™s likely this massive piece of work will reach its conclusion around Q4 2019 or Q1 2020, but there are no confirmed dates.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;P.S.ç›®å‰ï¼ˆ2019/9/8ï¼‰é™¤å·²å®Œæˆçš„ JSI å¤–ï¼Œå…¶ä½™é‡æ„è®¡åˆ’ä»åœ¨è¿›è¡Œä¸­ï¼Œå…·ä½“è§&lt;a href=&quot;https://formidable.com/blog/2019/lean-core-part-4/&quot;&gt;The New React Native Architecture Explained: Part Four&lt;/a&gt;&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;52&quot;&gt;Â &lt;/p&gt;

&lt;p class=&quot;sync-line&quot; data-line=&quot;54&quot;&gt;Â &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://formidable.com/uploads/new-1.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;55&quot;&gt;Â &lt;/p&gt;
&lt;p&gt;ä¸»è¦å˜åŒ–åœ¨äºï¼Œæä¾› CodeGen å·¥å…·æ¥ä¿è¯æ¶ˆæ¯é€šä¿¡çš„ç±»å‹å®‰å…¨ï¼Œä»¥è§£å†³ JavaScript ä¸ Native é€šä¿¡ä¸­è¢«å¹¿ä¸ºè¯Ÿç—…çš„ Bridge API æ•°æ®ç±»å‹é—®é¢˜ï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;10&quot;&gt;
&lt;p&gt;We also experienced many issues in which the types coming from JavaScript were unexpected. For example, integers were often wrapped by strings, an issue that isnâ€™t realized until it is passed over a bridge. To make matters worse, sometimes iOS will fail silently while Android will crash.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ï¼ˆæ‘˜è‡ª&lt;a href=&quot;https://medium.com/airbnb-engineering/react-native-at-airbnb-the-technology-dafd0b43838#992a&quot;&gt;React Native at Airbnb: The Technology&lt;/a&gt;ï¼‰&lt;/p&gt;
&lt;p&gt;å¦ä¸€æ–¹é¢ï¼Œç±»å‹çº¦æŸå¯¹é€šä¿¡æ€§èƒ½ä¹Ÿæœ‰ä¸€å®šå¸®åŠ©ï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;This automation will speed up the communication too, as itâ€™s not necessary to validate the data every time.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;66&quot;&gt;Â &lt;/p&gt;

&lt;p class=&quot;sync-line&quot; data-line=&quot;68&quot;&gt;Â &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://formidable.com/uploads/new-2.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;69&quot;&gt;Â &lt;/p&gt;
&lt;p&gt;ä¸Šå±‚ JavaScript ä»£ç éœ€è¦ä¸€ä¸ªè¿è¡Œæ—¶ç¯å¢ƒï¼Œåœ¨ React Native ä¸­è¿™ä¸ªç¯å¢ƒæ˜¯ JSCï¼ˆJavaScriptCoreï¼‰ã€‚ä¸åŒäºä¹‹å‰ç›´æ¥å°† JavaScript ä»£ç è¾“å…¥ç»™ JSCï¼Œæ–°çš„æ¶æ„ä¸­å¼•å…¥äº†ä¸€å±‚ JSIï¼ˆJavaScript Interfaceï¼‰ï¼Œä½œä¸º JSC ä¹‹ä¸Šçš„æŠ½è±¡ï¼Œ&lt;em&gt;ç”¨æ¥å±è”½ JavaScript å¼•æ“çš„å·®å¼‚ï¼Œå…è®¸æ¢ç”¨ä¸åŒçš„ JavaScript å¼•æ“&lt;/em&gt;ï¼ˆå¦‚æœ€è¿‘æ¨å‡ºçš„&lt;a href=&quot;https://engineering.fb.com/android/hermes/&quot;&gt;Hermes&lt;/a&gt;ï¼‰&lt;/p&gt;
&lt;p&gt;æ›´é‡è¦çš„ï¼Œæœ‰äº† JSI ä¹‹åï¼ŒJavaScript è¿˜èƒ½æŒæœ‰ C++å¯¹è±¡çš„å¼•ç”¨ï¼Œå¹¶è°ƒç”¨å…¶æ–¹æ³•ï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;By using JSI, JavaScript can hold reference to C++ Host Objects and invoke methods on them.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä»è€Œå…è®¸ JavaScript ä¸ Native çš„ç›´æ¥è°ƒç”¨ï¼Œè€Œä¸å¿…é€šè¿‡è·¨çº¿ç¨‹æ¶ˆæ¯é€šä¿¡ï¼Œçœå»åºåˆ—åŒ–/ååºåˆ—åŒ–çš„æˆæœ¬ï¼Œè¿˜èƒ½å‡è½» Bridge çš„é€šä¿¡å‹åŠ›ï¼ˆå¦‚å¤§é‡æ¶ˆæ¯æ’é˜Ÿå µè½¦ï¼‰&lt;/p&gt;
&lt;p&gt;åŒæ—¶&lt;strong&gt;JSI æ‰€åœ¨çš„ C++å±‚ä¹Ÿå¯ä»¥ä½œä¸ºå¤ç”¨ Native ä»£ç çš„ä¸€ç§æ–¹å¼&lt;/strong&gt;ï¼Œæ‹¥æœ‰ Native çš„å¤©ç„¶æ”¯æŒï¼š&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;84&quot;&gt;Â &lt;/p&gt;

&lt;p class=&quot;sync-line&quot; data-line=&quot;86&quot;&gt;Â &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://formidable.com/uploads/new-5.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;87&quot;&gt;Â &lt;/p&gt;
&lt;p&gt;æ–°çš„ Bridge å±‚è¢«åˆ’åˆ†æˆ Fabric å’Œ TurboModules ä¸¤éƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;p&gt;Fabric æœŸæœ›ä»¥æ›´ç°ä»£åŒ–çš„æ–¹å¼å»å®ç° React Native çš„æ¸²æŸ“å±‚ï¼Œç®€åŒ–ä¹‹å‰æ¸²æŸ“æµç¨‹ä¸­å¤æ‚è·¨çº¿ç¨‹äº¤äº’ï¼ˆReact -&amp;gt; Native -&amp;gt; Shadow Tree -&amp;gt; Native UIï¼‰ã€‚å…·ä½“çš„ï¼Œç›´æ¥åœ¨ C++å±‚åˆ›å»º JavaScript ä¸ Native å…±äº«çš„ Shadow Treeï¼Œå¹¶é€šè¿‡ JSI å±‚å°† UI æ“ä½œæ¥å£æš´éœ²ç»™ JavaScriptï¼Œå…è®¸ JavaScript ç›´æ¥æ§åˆ¶é«˜ä¼˜å…ˆçº§çš„ UI æ“ä½œï¼Œç”šè‡³å…è®¸åŒæ­¥è°ƒç”¨ï¼ˆåº”å¯¹åˆ—è¡¨å¿«é€Ÿæ»šåŠ¨ã€é¡µé¢åˆ‡æ¢ã€æ‰‹åŠ¿å¤„ç†ç­‰åœºæ™¯ï¼‰&lt;/p&gt;
&lt;p&gt;ä¹‹å‰æ‰€æœ‰ Native Modulesï¼ˆæ— è®ºæ˜¯å¦éœ€è¦ç”¨åˆ°ï¼‰éƒ½è¦åœ¨åº”ç”¨å¯åŠ¨æ—¶è¿›è¡Œåˆå§‹åŒ–ï¼Œå› ä¸º Native ä¸çŸ¥é“ JavaScript å°†ä¼šè°ƒç”¨å“ªäº›åŠŸèƒ½æ¨¡å—ã€‚è€Œæ–°çš„&lt;strong&gt;TurboModules å…è®¸æŒ‰éœ€åŠ è½½ Native æ¨¡å—&lt;/strong&gt;ï¼Œå¹¶åœ¨æ¨¡å—åˆå§‹åŒ–ä¹‹åç›´æ¥æŒæœ‰å…¶å¼•ç”¨ï¼Œä¸å†ä¾é æ¶ˆæ¯é€šä¿¡æ¥è°ƒç”¨æ¨¡å—åŠŸèƒ½ã€‚å› æ­¤ï¼Œåº”ç”¨çš„å¯åŠ¨æ—¶é—´ä¹Ÿä¼šæœ‰æ‰€æå‡&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;98&quot;&gt;Â &lt;/p&gt;

&lt;p class=&quot;sync-line&quot; data-line=&quot;100&quot;&gt;Â &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://formidable.com/uploads/new-diagram-full.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;101&quot;&gt;Â &lt;/p&gt;
&lt;p&gt;ç†è®ºä¸Šï¼ŒReact Native åº”è¯¥æ˜¯é€šç”¨çš„ï¼Œå¯¹å¹³å°æ— æ„ŸçŸ¥ï¼Œè¿™æ˜¯èƒ½å¤Ÿæ”¯æŒ&lt;a href=&quot;https://github.com/necolas/react-native-web&quot;&gt;Web&lt;/a&gt;ã€&lt;a href=&quot;https://github.com/Microsoft/react-native-windows&quot;&gt;Windows&lt;/a&gt;ç­‰ä¸åŒå¹³å°çš„å…³é”®&lt;/p&gt;
&lt;p&gt;è™½ç„¶ Native ä¸åœ¨ React Native çš„æŒæ§ä¸­ï¼Œæ— æ³•å‚ç›´åœ°æ·±å…¥ä¼˜åŒ–ï¼Œä½†å¯ä»¥è¿›è¡Œæ¨ªå‘çš„ç²¾ç®€ï¼Œå°†éæ ¸å¿ƒçš„éƒ¨åˆ†ä»£ç æ‹†åˆ†å‡ºå»ä½œä¸ºç¤¾åŒºæ¨¡å—ï¼Œå¦‚ AsyncStorageã€ImageStoreã€MaskedViewIOSã€NetInfo ç­‰ç­‰ã€‚ä¸€æ–¹é¢ç¼©å‡åŒ…ä½“ç§¯ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿæœ‰åˆ©äºè¿™äº›æ¨¡å—çš„ç‹¬ç«‹æ›´æ–°ç»´æŠ¤&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;106&quot;&gt;Â &lt;/p&gt;

</description>
<pubDate>Fri, 22 May 2020 00:48:00 +0000</pubDate>
<dc:creator>æ¢¦çƒ¬</dc:creator>
<og:description>React Native æœ€åˆçš„è®¾è®¡å­˜åœ¨ä»€ä¹ˆé—®é¢˜ï¼Œæ‰“ç®—æ€æ ·æ”¹è¿›ï¼Ÿ</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/ayqy/p/react-native-new-architecture.html</dc:identifier>
</item>
<item>
<title>[ç¿»è¯‘]ç”¨äº.NET Coreçš„Windowsçª—ä½“è®¾è®¡å™¨å‘å¸ƒ - å¼€å‘è€…ç²¾é€‰èµ„è®¯</title>
<link>http://www.cnblogs.com/MrHuo/p/windows-forms-designer-for-net-core-released.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/MrHuo/p/windows-forms-designer-for-net-core-released.html</guid>
<description>&lt;div id=&quot;cnblogs_post_description&quot; readability=&quot;34&quot;&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/316520/202005/316520-20200522025457062-1963045946.png&quot; class=&quot;desc_img&quot;/&gt;ä»Šå¤©æˆ‘ä»¬å¾ˆé«˜å…´åœ°å®£å¸ƒï¼Œ.NET Coreé¡¹ç›®çš„Windowsçª—ä½“è®¾è®¡å™¨ç°åœ¨å¯ä»¥åœ¨ Visual Studio 2019 16.6 ç‰ˆä¸­ä½œä¸ºé¢„è§ˆä½¿ç”¨ï¼æˆ‘ä»¬åœ¨Visual Studio 16.7 é¢„è§ˆç‰ˆ1ä¸­ä¹Ÿæä¾›äº†æ›´æ–°çš„è®¾è®¡å™¨ç‰ˆæœ¬ï¼&lt;/div&gt;&lt;div id=&quot;cnblogs_post_body&quot; readability=&quot;85.331898800209&quot;&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;æœ¬æ–‡ç”±å¾®ä¿¡å…¬ä¼—å·ã€Šå¼€å‘è€…ç²¾é€‰èµ„è®¯ã€‹ç¿»è¯‘é¦–å‘ï¼Œè½¬è½½è¯·æ³¨æ˜æ¥æº&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä»Šå¤©æˆ‘ä»¬å¾ˆé«˜å…´åœ°å®£å¸ƒï¼Œ.NET Coreé¡¹ç›®çš„Windowsçª—ä½“è®¾è®¡å™¨ç°åœ¨å¯ä»¥åœ¨ Visual Studio 2019 16.6 ç‰ˆä¸­ä½œä¸ºé¢„è§ˆä½¿ç”¨ï¼æˆ‘ä»¬åœ¨Visual Studio 16.7 é¢„è§ˆç‰ˆ1ä¸­ä¹Ÿæä¾›äº†æ›´æ–°çš„è®¾è®¡å™¨ç‰ˆæœ¬ï¼&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/316520/202005/316520-20200522025457062-1963045946.png&quot; alt=&quot;Visual Studioä¸­çš„.NET Core Windowsçª—ä½“è®¾è®¡å™¨&quot;/&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;ä¸è¦å¿˜è®°åœ¨â€œå·¥å…·â€ &amp;gt; â€œé€‰é¡¹â€ &amp;gt; â€œç¯å¢ƒâ€ &amp;gt; â€œé¢„è§ˆåŠŸèƒ½â€ä¸­å¯ç”¨è®¾è®¡å™¨ ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è®¸å¤šäººå¯èƒ½è¿˜è®°å¾—æˆ‘ä»¬åœ¨ &lt;a href=&quot;https://blogs.windows.com/windowsdeveloper/2018/12/04/announcing-open-source-of-wpf-windows-forms-and-winui-at-microsoft-connect-2018/&quot;&gt;å¼€æºWindowsçª—ä½“&lt;/a&gt; å¹¶å°†å…¶ç§»æ¤åˆ°.NET Core 3.0çš„.NET Coreä¸­ã€‚ä»é‚£æ—¶èµ·ï¼Œæˆ‘ä»¬ä¸€ç›´ &lt;a href=&quot;https://devblogs.microsoft.com/dotnet/updates-to-net-core-windows-forms-designer-in-visual-studio-16-5-preview-1/#under-the-hood&quot;&gt;åœ¨åŠªåŠ›&lt;/a&gt; å°†Windows çª—ä½“è®¾è®¡å™¨çš„å¼•å…¥.NET Coreã€‚å½“æˆ‘ä»¬æ¥è¿‘å®Œæˆæ—¶ï¼Œæˆ‘ä»¬ç»§ç»­è®¾è®¡å™¨å¼€å‘ï¼Œå¹¶è®¡åˆ’åœ¨ä¸ä¹…çš„å°†æ¥å¸¦æ¥æ›´å¤šçš„åŠŸèƒ½å’Œæ€§èƒ½æ”¹è¿›ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å¦‚ä½•ä½¿ç”¨çª—ä½“è®¾è®¡å™¨&quot;&gt;å¦‚ä½•ä½¿ç”¨çª—ä½“è®¾è®¡å™¨&lt;/h2&gt;
&lt;p&gt;å®‰è£… &lt;a href=&quot;https://visualstudio.microsoft.com/downloads/&quot;&gt;Visual Studio 2019ç‰ˆæœ¬16.6&lt;/a&gt; æˆ– Visual Studio 2019ç‰ˆæœ¬16.7é¢„è§ˆç‰ˆ1ã€‚&lt;br/&gt;è¦åœ¨Visual Studioä¸­å¯ç”¨è®¾è®¡å™¨ï¼Œè¯·è½¬åˆ°â€œå·¥å…·â€ &amp;gt; â€œé€‰é¡¹â€ &amp;gt; â€œç¯å¢ƒâ€ &amp;gt; â€œé¢„è§ˆåŠŸèƒ½â€ï¼Œ ç„¶åé€‰æ‹© â€œå°†Windows Formsé¢„è§ˆè®¾è®¡å™¨ç”¨äº.NET Coreåº”ç”¨ç¨‹åºâ€ é€‰é¡¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/316520/202005/316520-20200522025543379-1940373521.png&quot; alt=&quot;åœ¨Visual Studioè®¾ç½®ä¸­å¯ç”¨.NET Core Windowsçª—ä½“è®¾è®¡å™¨&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å®Œæˆè¿™äº›æ­¥éª¤åï¼Œåœ¨è§£å†³æ–¹æ¡ˆèµ„æºç®¡ç†å™¨ä¸­åŒå‡»çª—ä½“åï¼Œè®¾è®¡å™¨å°†è‡ªåŠ¨ä»¥ä¸.NET Frameworkåº”ç”¨ç¨‹åºç›¸åŒçš„æ–¹å¼æ‰“å¼€ã€‚&lt;/p&gt;
&lt;p&gt;å®ŒæˆåŠŸèƒ½å·¥ä½œåï¼Œæé«˜æ€§èƒ½æ˜¯æˆ‘ä»¬çš„ä¸‹ä¸€ä¸ªç›®æ ‡ï¼Œå› æ­¤ï¼Œå¦‚æœè®¾è®¡è€…é¢„è§ˆæ—¶çš„é€Ÿåº¦ä¸å¦‚æ‚¨æƒ³è±¡çš„é‚£ä¹ˆå¿«ï¼Œè¯·ä¸è¦æ„Ÿåˆ°çƒ¦æ¼ï¼Œè¿™æ˜¯æˆ‘ä»¬å°†æ¥ä¼šæ”¹è¿›çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å½“å‰ï¼Œæ–°çš„Windowsçª—ä½“è®¾è®¡å™¨ä»…åœ¨Windows 10ä¸Šæœ‰æ•ˆã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;è®¾è®¡å™¨ä¸­å¯ç”¨çš„åŠŸèƒ½&quot;&gt;è®¾è®¡å™¨ä¸­å¯ç”¨çš„åŠŸèƒ½&lt;/h2&gt;
&lt;ul readability=&quot;4.8034274193548&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;é™¤äº† DataGridView å’Œ ToolStripContainer ä¹‹å¤–çš„æ‰€æœ‰Windowsçª—ä½“æ§ä»¶ï¼ˆå³å°†æ¨å‡ºï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;UserControlå’Œè‡ªå®šä¹‰æ§ä»¶åŸºç¡€ç»“æ„ï¼ˆä»…Visual Studio 16.7 Preview 1ç‰ˆæœ¬å¯ç”¨ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;æ‰€æœ‰è®¾è®¡å™¨åŠŸèƒ½ï¼Œä¾‹å¦‚&lt;br/&gt;Â· æ‹–æ”¾&lt;br/&gt;Â· é€‰æ‹©ï¼Œç§»åŠ¨å’Œè°ƒæ•´å¤§å°&lt;br/&gt;Â· å‰ªåˆ‡/å¤åˆ¶/ç²˜è´´/åˆ é™¤&lt;br/&gt;Â· ä¸å±æ€§çª—å£é›†æˆ&lt;br/&gt;Â· äº‹ä»¶ç”Ÿæˆç­‰&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1.7745664739884&quot;&gt;
&lt;p&gt;æ–°å¢ WebView2 æ§ä»¶&lt;br/&gt;åŸºäºchromiumçš„åµŒå…¥å¼æµè§ˆå™¨æ§ä»¶ï¼Œå…è®¸å‘ˆç°.NETåº”ç”¨ç¨‹åºçš„Webå†…å®¹ï¼ˆHTML / CSS / JavaScriptï¼‰ã€‚Windowsçª—ä½“å’ŒWPFåº”ç”¨ç¨‹åºçš„.NET Coreå’Œ.NET Frameworkå¹³å°å‡æ”¯æŒã€‚æ‚¨å¯ä»¥ &lt;a href=&quot;https://docs.microsoft.com/microsoft-edge/webview2/gettingstarted/winforms&quot;&gt;åœ¨Microsoftå…¥é—¨æŒ‡å—æ–‡æ¡£ä¸­æ‰¾åˆ°&lt;/a&gt;ï¼Œæˆ‘ä»¬å°†åœ¨ä¸ä¹…çš„å°†æ¥å‘å¸ƒä¸“é—¨é’ˆå¯¹WebView2æ§ä»¶çš„åšå®¢æ–‡ç« ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æœ¬åœ°èµ„æº&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;å¯¹æœ¬åœ°åŒ–çš„éƒ¨åˆ†æ”¯æŒ&lt;br/&gt;Â· æ§ä»¶å’ŒUserControlçš„å¯æœ¬åœ°åŒ–å±æ€§å¯ä»¥åºåˆ—åŒ–ä¸ºResxæ–‡ä»¶ï¼ˆé€šè¿‡å°†Localizable å±æ€§è®¾ç½® ä¸º trueï¼‰ã€‚&lt;br/&gt;Â· é€šè¿‡æ›´æ”¹Language å±æ€§æ”¯æŒä¸åŒçš„è¯­è¨€ã€‚&lt;br/&gt;Â· æ ¹æ®Unicodeæ ‡å‡†å›½é™…ç»„ä»¶ï¼ˆICUï¼‰åœ¨.NET 5çš„é¢„è§ˆä¸­æ·»åŠ äº†å…¶ä»–åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;æ¥ä¸‹æ¥ä¼šå‘ç”Ÿä»€ä¹ˆ&quot;&gt;æ¥ä¸‹æ¥ä¼šå‘ç”Ÿä»€ä¹ˆ&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;é¡¹ç›®èµ„æº&lt;/li&gt;
&lt;li&gt;å®Œå…¨æœ¬åœ°åŒ–&lt;/li&gt;
&lt;li&gt;å¯ç»§æ‰¿çš„å¯¹è¯æ¡†æ”¯æŒ&lt;/li&gt;
&lt;li&gt;æ•°æ®ç»‘å®šæ–¹æ¡ˆ&lt;br/&gt;è¿™é¡¹å·¥ä½œæ­£åœ¨è¿›è¡Œä¸­ï¼Œæ‚¨å·²ç»å¯ä»¥åœ¨Visual Studio 16.7 Preview 1è®¾è®¡å™¨ä¸­çœ‹åˆ°è¿™äº›ç»“æœã€‚&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸‰æ–¹æ§ä»¶ä¾›åº”å•†æ”¯æŒ&lt;br/&gt;æˆ‘ä»¬æ­£åœ¨ä¸Progress Telerikï¼ŒDevExpresså’ŒGrapeCityç­‰æ§ä»¶ä¾›åº”å•†ç´§å¯†åˆä½œï¼Œä»¥åœ¨ä¸ä¹…çš„å°†æ¥ä¸º.NET Coreå’Œ.NET 5é¡¹ç›®åœ¨Windows Formsè®¾è®¡å™¨ä¸­æ”¯æŒå…¶æ§ä»¶ã€‚æˆ‘ä»¬è¿˜ä¸ActiProï¼ŒInfragisticså’ŒSyncFusionåˆä½œã€‚åœ¨ä¸‹å›¾ä¸Šï¼Œæ‚¨å¯ä»¥çœ‹åˆ°Windowsçª—ä½“åº”ç”¨ç¨‹åºä¸­é’ˆå¯¹.NET 5çš„Progress Telerikæ§ä»¶ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/316520/202005/316520-20200522025606884-1731903990.png&quot; alt=&quot;åœ¨.NET 5ä¸­ä½¿ç”¨Progress Telerik RadGridViewæ§ä»¶&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;166-gaç‰ˆæœ¬ä¸­çš„æ–°åŠŸèƒ½&quot;&gt;16.6 GAç‰ˆæœ¬ä¸­çš„æ–°åŠŸèƒ½&lt;/h2&gt;
&lt;p&gt;åœ¨16.6ç‰ˆæœ¬ä¸­ï¼Œè¿›è¡Œäº†ä»¥ä¸‹æ§ä»¶æ”¯æŒå’Œæ”¹è¿›ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æ‰€æœ‰å¯¹è¯æ¡†æ§ä»¶&lt;/li&gt;
&lt;li&gt;PropertyGrid&lt;/li&gt;
&lt;li&gt;HScrollBar&lt;/li&gt;
&lt;li&gt;VScrollBar&lt;/li&gt;
&lt;li&gt;DomainUpDown&lt;/li&gt;
&lt;li&gt;TrackBar&lt;/li&gt;
&lt;li&gt;æ‹–æ”¾æ”¹è¿›&lt;/li&gt;
&lt;li&gt;é€‰ä¸­æ”¹è¿›&lt;/li&gt;
&lt;li&gt;ç¨³å®šæ€§å’Œé”™è¯¯ä¿®å¤&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;167-preview-1ç‰ˆæœ¬ä¸­çš„æ–°åŠŸèƒ½&quot;&gt;16.7 Preview 1ç‰ˆæœ¬ä¸­çš„æ–°åŠŸèƒ½&lt;/h2&gt;
&lt;p&gt;åœ¨ 16.7 Preview 1å‘è¡Œç‰ˆä¸­è¿›è¡Œäº†ä»¥ä¸‹æ§ä»¶æ”¯æŒå’Œæ”¹è¿›ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;UserControl å’Œè‡ªå®šä¹‰æ§ä»¶åŸºç¡€ç»“æ„&lt;/li&gt;
&lt;li&gt;TableLayoutPanel&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸‰æ–¹æ§ä»¶æ”¯æŒåŸºç¡€&lt;/li&gt;
&lt;li&gt;æ•°æ®ç»‘å®šæ”¯æŒåŸºç¡€&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ TableLayoutPanel æ”¹è¿›çš„è®¾è®¡å™¨&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;ç»™æˆ‘ä»¬æäº¤åé¦ˆ&quot;&gt;ç»™æˆ‘ä»¬æäº¤åé¦ˆ&lt;/h2&gt;
&lt;p&gt;æ‚¨çš„åé¦ˆæ„è§å¯¹æˆ‘ä»¬å¾ˆé‡è¦ï¼è¯·æŠ¥å‘Šé—®é¢˜å¹¶é€šè¿‡Visual Studioåé¦ˆé€šé“å‘é€åŠŸèƒ½è¯·æ±‚ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä½¿ç”¨Visual Studioå³ä¸Šè§’çš„â€œå‘é€åé¦ˆâ€å›¾æ ‡ï¼Œå¹¶æŒ‡å®šå®ƒä¸â€œ WinForms .NET Coreâ€åŒºåŸŸã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/316520/202005/316520-20200522031601809-534190903.png&quot; alt=&quot;ç›´æ¥ä»Visual Studioæä¾›åé¦ˆ&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/316520/202005/316520-20200522031918924-278182228.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€Šå¼€å‘è€…ç²¾é€‰èµ„è®¯ã€‹&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;</description>
<pubDate>Fri, 22 May 2020 00:42:00 +0000</pubDate>
<dc:creator>å¼€å‘è€…ç²¾é€‰èµ„è®¯</dc:creator>
<og:description>æœ¬æ–‡ç”±å¾®ä¿¡å…¬ä¼—å·ã€Šå¼€å‘è€…ç²¾é€‰èµ„è®¯ã€‹ç¿»è¯‘é¦–å‘ï¼Œè½¬è½½è¯·æ³¨æ˜æ¥æº ä»Šå¤©æˆ‘ä»¬å¾ˆé«˜å…´åœ°å®£å¸ƒï¼Œ.NET Coreé¡¹ç›®çš„Windowsçª—ä½“è®¾è®¡å™¨ç°åœ¨å¯ä»¥åœ¨ Visual Studio 2019 16.6 ç‰ˆä¸­ä½œä¸ºé¢„</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/MrHuo/p/windows-forms-designer-for-net-core-released.html</dc:identifier>
</item>
<item>
<title>C# æ•°æ®æ“ä½œç³»åˆ— - 12 NHibernateçš„å¢åˆ æ”¹æŸ¥ - æœˆå½±è¥¿ä¸‹</title>
<link>http://www.cnblogs.com/c7jie/p/12934996.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/c7jie/p/12934996.html</guid>
<description>&lt;p&gt;ä¸Šä¸€ç¯‡ã€ŠC# æ•°æ®æ“ä½œç³»åˆ— - 11 NHibernate é…ç½®å’Œç»“æ„ä»‹ç»ã€‹ ä»‹ç»äº†Nhibernateé‡Œçš„é…ç½®å†…å®¹ã€‚è¿™ä¸€ç¯‡å°†å¸¦é¢†å¤§å®¶äº†è§£ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨NHIbernateã€‚ä¹‹å‰æåˆ°NHibernateç»§æ‰¿äº†Hibernateçš„ä¸€äº›ä¼ ç»Ÿï¼šä½¿ç”¨XMLæ–‡ä»¶è¿›è¡Œé…ç½®ï¼Œè¿™ä¸€ç‚¹ä¹Ÿæ˜¯å¤‡å—äº‰è®®ã€‚ä¸è¿‡ï¼Œæœ‰ç¤¾åŒºçˆ±å¥½è€…å¼€å‘äº†ä¸€ä¸ªåä¸ºã€ŠFluent NHibernateã€‹çš„é¡¹ç›®ï¼Œç”¨æ¥æ”¯æŒNHibernateçš„æµå¼é…ç½®ã€‚å½“ç„¶ï¼ŒNHibernateæœ¬èº«ä¹Ÿæä¾›äº†&lt;code&gt;NHibernate.Mapping.ByCode&lt;/code&gt;æ¨¡å¼ã€‚ä¸è¿‡è¿™ä¸€ç¯‡æš‚ä¸”ç•¥è¿‡ï¼Œç•™å¾…ä¸‹æ–‡ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹äºNHibernateçš„æ˜ å°„æ–‡ä»¶æœ‰ä¸ªçº¦å®šçš„åå­—ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;lt;ç±»å&amp;gt;.hbm.xml&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™é‡Œå…ˆä¸ºå¤§å®¶ä»‹ç»ä¸€ä¸‹æ˜ å°„æ–‡ä»¶çš„æ ¼å¼ï¼š&lt;/p&gt;
&lt;h2 id=&quot;11-hibernate-mapping-çš„è¯´æ˜&quot;&gt;1.1 hibernate-mapping çš„è¯´æ˜&lt;/h2&gt;
&lt;pre&gt;
&lt;code class=&quot;language-xml&quot;&gt;&amp;lt;hibernate-mapping
schema=&quot;schemaName&quot;                                                                   (1)
default-cascade=&quot;none|save-update&quot;                                            (2)
auto-import=&quot;true|false&quot;                                                              (3)
assembly=&quot;Eg&quot;                                                                                         (4)
namespace=&quot;Eg&quot;                                                                                        (5)
default-access=&quot;field|property|field.camecase...&quot;             (6)
default-lazy=&quot;true|false&quot;                                                             (7)
/&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;ol&gt;&lt;li&gt;schema: æ•°æ®åº“schemaçš„åç§°&lt;/li&gt;
&lt;li&gt;default-cascadeï¼šå¯é€‰é¡¹ï¼Œé»˜è®¤æ˜¯noneï¼Œä¸€ç§é»˜è®¤çš„çº§è”é£æ ¼&lt;/li&gt;
&lt;li&gt;auto-importï¼šæ˜ç¡®æ˜¯å¦å¯ä»¥åœ¨æŸ¥è¯¢ä¸­ä½¿ç”¨éé™å®šç±»åã€‚&lt;/li&gt;
&lt;li&gt;assemblyï¼šæŒ‡å®šæ˜ å°„å¯¹è±¡æ‰€åœ¨çš„assemblyï¼Œä¸€èˆ¬æƒ…å†µæŒ‡çš„æ˜¯é¡¹ç›®åç§°&lt;/li&gt;
&lt;li&gt;namespaceï¼šæ‰€åœ¨å‘½åç©ºé—´&lt;/li&gt;
&lt;li&gt;default-accessï¼šå¯é€‰çš„ï¼Œé»˜è®¤æ˜¯propertyï¼Œè¡¨ç¤ºNHibernateçš„è¯»å–æ•°æ®åˆ—çš„ç­–ç•¥ï¼Œé»˜è®¤æƒ…å†µä»Property ä¸­è¯»å–&lt;/li&gt;
&lt;li&gt;default-lazyï¼šå¯é€‰çš„ï¼Œé»˜è®¤æ˜¯trueï¼Œæ˜¯å¦å¯åŠ¨å»¶è¿ŸåŠ è½½&lt;/li&gt;
&lt;/ol&gt;&lt;h2 id=&quot;12-classçš„é…ç½®&quot;&gt;1.2 classçš„é…ç½®&lt;/h2&gt;
&lt;p&gt;ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒclassèŠ‚ç‚¹åªéœ€è¦æŒ‡å®šnameå’Œtableå°±å¯ä»¥äº†ã€‚æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æ¢ç´¢classå¦‚ä½•æ˜ å°„æˆçš„ã€‚&lt;/p&gt;
&lt;h3 id=&quot;121-id&quot;&gt;1.2.1 id&lt;/h3&gt;
&lt;p&gt;ä»»ä½•ä¸€ä¸ªæ˜ å°„éƒ½å¿…é¡»å£°æ˜ä¸€ä¸ªæ•°æ®è¡¨çš„ä¸»é”®ï¼Œå¤§å¤šæ•°ç±»ä¹Ÿå¿…é¡»æœ‰ä¸€ä¸ªå”¯ä¸€æ ‡ç¤ºå­—æ®µç”¨æ¥åŒºåˆ†ä¸åŒçš„å®ä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œä»‹ç»ä¸€ä¸‹ id èŠ‚ç‚¹çš„é…ç½®ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-xml&quot;&gt;&amp;lt;id 
    name=&quot;PropertyName&quot;
    type=&quot;typename&quot;
    column=&quot;column_name&quot;&amp;gt;
    &amp;lt;generator class=&quot;generatorClass&quot;/&amp;gt;
&amp;lt;/id&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;name : å¯¹åº”çš„å±æ€§å&lt;/li&gt;
&lt;li&gt;typeï¼šå¯¹åº”çš„NHibernateç±»å‹&lt;/li&gt;
&lt;li&gt;columnï¼šåˆ—å&lt;/li&gt;
&lt;li&gt;generatorï¼šä¸»é”®ç”Ÿæˆå™¨ï¼Œå¦‚æœä¸éœ€è¦å‚æ•°å¯ä»¥ç›´æ¥åœ¨ idèŠ‚ç‚¹å¤„æ·»åŠ ï¼Œæœ€å¸¸ç”¨çš„æ˜¯nativeã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;122-property&quot;&gt;1.2.2 property&lt;/h3&gt;
&lt;p&gt;æ˜ å°„ä¸€ä¸ªæ™®é€šå±æ€§å°±ç®€å•å¤šäº†ï¼Œåªéœ€è¦è¿›è¡Œä»¥ä¸‹é…ç½®å³å¯ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-xml&quot;&gt;&amp;lt;property
          name=&quot;propertyName&quot;
          column=&quot;column_name&quot;
          type=&quot;typename&quot;
/&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;name ï¼šç±»é‡Œçš„å±æ€§å&lt;/li&gt;
&lt;li&gt;columnï¼šå¯¹åº”æ•°æ®è¡¨çš„åˆ—å&lt;/li&gt;
&lt;li&gt;typeï¼šæ•°æ®åº“ä¸­çš„ç±»å‹&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;123-many-to-one&quot;&gt;1.2.3 many-to-one&lt;/h3&gt;
&lt;p&gt;åœ¨Nhibernateä¸­ï¼Œå¤šå¯¹ä¸€çš„é…ç½®æ˜¯åœ¨ä¸€çš„ä¸€ç«¯ï¼Œè¡¨ç¤ºè¯¥ç±»æœ‰ä¸€ä¸ªå¤–é”®å¯¼èˆªã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-xml&quot;&gt;&amp;lt;many-to-one
             name=&quot;PropertyInOne&quot;
             class=&quot;ManyClass&quot;
             column=&quot;Column&quot;
             &amp;gt;&amp;lt;/many-to-one&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;124-one-to-one&quot;&gt;1.2.4 one-to-one&lt;/h3&gt;
&lt;p&gt;ä¸€å¯¹ä¸€çš„å…³ç³»ä¸å¤šå¯¹ä¸€çš„å…³ç³»æ¯”è¾ƒç›¸ä¼¼ï¼Œä¸åŒçš„åœ°æ–¹åœ¨äºä¸€å¯¹ä¸€éœ€è¦åœ¨åŒæ–¹çš„æ˜ å°„å…³ç³»é‡Œå‡è¦ç»´æŠ¤ï¼Œåœ¨æœ‰å¤–é”®çš„è¡¨/å®ä½“ä¸­ æ·»åŠ  constrained=â€œtrueâ€ã€‚&lt;/p&gt;
&lt;p&gt;ç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-xml&quot;&gt;&amp;lt;one-to-one name=&quot;Person&quot; class=&quot;Person&quot;/&amp;gt;
&amp;lt;one-to-one name=&quot;Employee&quot; class=&quot;Employee&quot; constrained=&quot;true&quot;/&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;Nhibernateçš„æ¯æ¬¡æ“ä½œéƒ½åŸºäºä¸€ä¸ªSessionï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æ“ä½œæ•°æ®åº“çš„æ—¶å€™æœ€å¥½å…ˆæŒæœ‰ä¸€ä¸ªå¯ç”¨çš„Sessionã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ä¸€ä¸ªé€šç”¨æ•°æ®åº“æ“ä½œç±»ä¸ºåŸºç¡€ï¼Œå‘å¤§å®¶åˆ†äº«ä¸€ä¸‹æˆ‘çš„æƒ³æ³•ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæ³›å‹æ¨¡æ¿ç±»ï¼Œå¹¶çº¦æŸæ³›å‹ä¸ºç±»ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c#&quot;&gt;public class Repository&amp;lt;T&amp;gt; where T: class
{

}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ·»åŠ ä¸€ä¸ªISessionå±æ€§ï¼Œç”¨æ¥åç»­è®¿é—®æ“ä½œï¼Œå¹¶ç”±æ„é€ æ–¹æ³•èµ‹å€¼ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c#&quot;&gt;public Repository(ISession session)
{
    Session = session;
}

public ISession Session { get; }
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;21-æ–°å¢&quot;&gt;2.1 æ–°å¢&lt;/h2&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬å†™ä¸€ä¸‹æ–°å¢æ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c#&quot;&gt;public object Add(T entity)
{
    var key= Session.Save(entity);
    return key;
}

public void Add(params T[] entities)
{
    foreach (var entity in entities)
    {
        Session.Save(entity);
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æŸ¥äº†ä¸‹ï¼ŒSaveä¼šè¿”å›å½“å‰æŒä¹…åŒ–å¯¹è±¡æ’å…¥æ—¶ç”Ÿæˆçš„ä¸»é”®ã€‚&lt;/p&gt;
&lt;h2 id=&quot;22-ä¿®æ”¹&quot;&gt;2.2 ä¿®æ”¹&lt;/h2&gt;
&lt;p&gt;NHibernateçš„ä¿®æ”¹ä¸EFç±»ä¼¼ï¼Œä¹Ÿæ˜¯ç”±ISessionç›‘æ§äº†ä¿®æ”¹ï¼Œä¸ç”¨åšè¿‡å¤šçš„æ“ä½œã€‚&lt;/p&gt;
&lt;h2 id=&quot;23-åˆ é™¤&quot;&gt;2.3 åˆ é™¤&lt;/h2&gt;
&lt;p&gt;NHibernateçš„åˆ é™¤ä¹Ÿååˆ†ç®€å•ï¼Œç›´æ¥é€šçŸ¥ISessionåˆ é™¤æŸä¸ªæŒä¹…åŒ–å¯¹è±¡ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c#&quot;&gt;public void Delete(T entity)
{
    Session.Delete(entity);
}
public void Delete(params T[] entities)
{
    foreach (var entity in entities)
    {
        Session.Delete(entity);
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;24-æŸ¥è¯¢&quot;&gt;2.4 æŸ¥è¯¢&lt;/h2&gt;
&lt;p&gt;é€šå¸¸æƒ…å†µä¸‹ï¼ŒæŸ¥è¯¢éœ€è¦ç»“åˆå®é™…ä¸šåŠ¡æ¥è¿›è¡Œå¼€å‘ï¼Œå½“ç„¶ä¸ºäº†é€šç”¨ï¼Œæˆ‘åœ¨è¿™é‡Œé€‰æ‹©ç»™è°ƒç”¨æ–¹å¼€æ”¾ä¸€ä¸ªæŸ¥è¯¢å¯¹è±¡ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c#&quot;&gt;public IQueryable&amp;lt;T&amp;gt; IqQueryable()
{
    return Session.Query&amp;lt;T&amp;gt;();
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…¶ä¸­ IQueryableæ˜¯ä¸€ä¸ªæ¥å£ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå¯æŸ¥è¯¢å¯¹è±¡ï¼Œé€šè¿‡Linqå¯ä»¥å¿«æ·çš„æŸ¥è¯¢ã€‚&lt;/p&gt;

&lt;p&gt;å—¯ï¼ŒNHibernateåŸºç¡€ä½¿ç”¨ç¯‡åˆ°è¿™é‡Œå¯ä»¥æš‚å‘Šä¸€æ®µè½äº†ã€‚åç»­çš„å†…å®¹æœ‰æœºä¼šå†æ·±æŒ–ï¼Œå½“ç„¶å¹¶ä¸ä»£è¡¨EF Coreå°±æ²¡æœ‰äº†ã€‚å—¯å—¯ï¼Œæ²¡æ¯›ç—…ã€‚ä¸‹ä¸€ç¯‡å°±è®©æˆ‘æ¥å…ˆæ›¿å¤§ä¼™çœ‹çœ‹SugarSQLæ˜¯ä»€ä¹ˆæƒ…å†µå§ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡åœ¨æœ¬ç¯‡å†…å®¹å®Œç»“ä¹‹å‰ï¼Œå…ˆè¡¥å……ä¸€ä¸ªNHibernateçš„SqlDialecté€‰å€¼ï¼š&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;æ•°æ®åº“&lt;/th&gt;
&lt;th&gt;Dialect&lt;/th&gt;
&lt;th&gt;å¤‡æ³¨&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody readability=&quot;48&quot;&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;DB2&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.DB2Dialect&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;DB2 for iSeries(OS/400)&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.DB2400Dialect&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td&gt;Firebird&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.FirebirdDialect&lt;/td&gt;
&lt;td&gt;éœ€è¦è®¾ç½®driver_classä¸ºNHibernate.Driver.FirebirdClientDriver&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;Informix&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.InformixDialect&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;Informix 9.40&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.InformixDialect0940&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;Informix 10.00&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.InformixDialect1000&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;Ingres&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.IngresDialect&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;Ingres 9&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.Ingres9Dialect&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;Microsoft SQL Server 7&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.MsSql7Dialect&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td&gt;Microsoft SQL Server 2000&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.MsSql2000Dialect&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td&gt;Microsoft SQL Server 2005&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.MsSql2005Dialect&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td&gt;Microsoft SQL Server 2008&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.MsSql2008Dialect&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td&gt;Microsoft SQL Azure Server 2008&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.MsSqlAzure2008Dialect&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td&gt;Microsoft SQL Server 2012&lt;/td&gt;
&lt;td&gt;Hibernate.Dialect.MsSql2012Dialect&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td&gt;Microsoft SQL Server Compact Edition&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.MsSqlCeDialect&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td&gt;Microsoft SQL Server Compact Edition 4.0&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.MsSqlCe40Dialect&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;MySQL 3 or 4&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.MySQLDialect&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;MySQL 5&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.MySQL5Dialect&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;MySQL 5 InnoDB&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.MySQL5InnoDBDialect&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;MySQL 5.5&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.MySQL55Dialect&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;MySQL 5.5 Inno DB&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.MySQL55InnoDBDialect&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;Oracle&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.Oracle8iDialect&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;Oracle 9i&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.Oracle9iDialect&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;Oracle 10g, Oracle 11g&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.Oracle10gDialect&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;Oracle 12c&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.Oracle12cDialect&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;PostgreSQL&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.PostgreSQLDialect&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td&gt;PostgreSQL 8.1&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.PostgreSQL81Dialect&lt;/td&gt;
&lt;td&gt;æ”¯æŒ8.1 çš„ FOR UPDATE NOWAIT&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td&gt;PostgreSQL 8.2&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.PostgreSQL82Dialect&lt;/td&gt;
&lt;td&gt;åœ¨DROP TABLEå’ŒDROP SEQUENCE è¯­å¥ä¸­æ”¯æŒ IF EXISTSå…³é”®å­—&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;PostgreSQL 8.3&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.PostgreSQL83Dialect&lt;/td&gt;
&lt;td&gt;æ”¯æŒXMLç±»å‹&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td&gt;SQLite&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.SQLiteDialect&lt;/td&gt;
&lt;td&gt;è®¾ç½®driver_classä¸ºNHibernate.Driver.SQLite20Driver&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td&gt;Sybase Adaptive Server Anywhere 9&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.SybaseASA9Dialect&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td&gt;Sybase Adaptive Server Enterprise 15&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.SybaseASE15Dialect&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;Sybase SQL Anywhere 10&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.SybaseSQLAnywhere10Dialect&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;Sybase SQL Anywhere 11&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.SybaseSQLAnywhere11Dialect&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;Sybase SQL Anywhere 12&lt;/td&gt;
&lt;td&gt;NHibernate.Dialect.SybaseSQLAnywhere12Dialect&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;blockquote readability=&quot;2.1052631578947&quot;&gt;
&lt;p&gt;æ›´å¤šå†…å®¹çƒ¦è¯·å…³æ³¨&lt;a href=&quot;https://www.attachie.club&quot;&gt;æˆ‘çš„åšå®¢ã€Šé«˜å…ˆç”Ÿå°å±‹ã€‹&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1266612/202005/1266612-20200522080656380-1887334291.png&quot; alt=&quot;file&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Fri, 22 May 2020 00:07:00 +0000</pubDate>
<dc:creator>æœˆå½±è¥¿ä¸‹</dc:creator>
<og:description>0. å‰è¨€ ä¸Šä¸€ç¯‡ã€ŠC æ•°æ®æ“ä½œç³»åˆ— 11 NHibernate é…ç½®å’Œç»“æ„ä»‹ç»ã€‹ ä»‹ç»äº†Nhibernateé‡Œçš„é…ç½®å†…å®¹ã€‚è¿™ä¸€ç¯‡å°†å¸¦é¢†å¤§å®¶äº†è§£ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨NHIbernateã€‚ä¹‹å‰æåˆ°NHibern</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/c7jie/p/12934996.html</dc:identifier>
</item>
<item>
<title>BitArrayè™½å¥½ï¼Œä½†è¯·ä¸è¦æ»¥ç”¨ï¼Œåˆä¸€æ¬¡çº¿ä¸Šå†…å­˜æš´å¢æ’æŸ¥ - ä¸€çº¿ç å†œ</title>
<link>http://www.cnblogs.com/huangxincheng/p/12934975.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/huangxincheng/p/12934975.html</guid>
<description>&lt;h2 id=&quot;ä¸€ï¼šèƒŒæ™¯&quot;&gt;ä¸€ï¼šèƒŒæ™¯&lt;/h2&gt;
&lt;h3 id=&quot;1-è®²æ•…äº‹&quot;&gt;1. è®²æ•…äº‹&lt;/h3&gt;
&lt;p&gt;å‰å¤©å†™äº†ä¸€ç¯‡å¤§å†…å­˜æ’æŸ¥åœ¨å›­å­é‡ŒæŒºç«ï¼Œè¿™æ˜¯åšè‡ªåª’ä½“æœ€å¼€å¿ƒçš„äº‹æ‹‰ï¼Œå¹²è„†å†æ¥ä¸€ç¯‡æ»¡è¶³å¤§å®¶èƒƒå£ï¼Œä¸Šä¸ªæœˆæˆ‘å†™äº†ä¸€ç¯‡åšå®¢æåˆ°è¿‡ä½¿ç”¨&lt;code&gt;bitmap&lt;/code&gt;å¯¹åŸæ¥çš„&lt;code&gt;List&amp;lt;CustomerID&amp;gt;&lt;/code&gt;è¿›è¡Œé«˜å¼ºåº¦å‹ç¼©ï¼Œå°†åŸæ¥çš„Listå†…å­˜å‹ç¼©äº†å°†è¿‘106å€ï¼Œä½†æ˜¯bitmapä¸æ˜¯ä¸€å‘³çš„å¥½ï¼Œä½ å¿…é¡»åœ¨æ­£ç¡®çš„åœºæ™¯ä¸­ä½¿ç”¨ï¼Œè€Œä¸æ˜¯é—­ç€çœ¼ç›æ»¥ç”¨ï¼Œbitmapåœ¨C#ä¸­å¯¹åº”çš„é›†åˆæ˜¯BitArrayã€‚&lt;/p&gt;
&lt;p&gt;å¥½åƒå‰§é€äº†ğŸ˜„ğŸ˜„ğŸ˜„ï¼Œç»“æœå°±æ˜¯BitArrayçš„æ»¥ç”¨å¯¼è‡´å†…å­˜å°10Gçš„æ¶¨è·Œï¼Œä¸è¿‡è¿™ç§ä¸œè¥¿é‡ç‚¹è¿˜æ˜¯çœ‹è§£å†³æ€è·¯ï¼Œå†™ç»™ä»¥åçš„è‡ªå·±ï¼Œå¯ä¸èƒ½è®©è¿™éš¾å¾—çš„å®è·µç»éªŒè’¸å‘å•¦~~~&lt;/p&gt;
&lt;h2 id=&quot;äºŒï¼šè§£å†³æ€è·¯&quot;&gt;äºŒï¼šè§£å†³æ€è·¯&lt;/h2&gt;
&lt;h3 id=&quot;1-ä¸€çœ‹æ‰˜ç®¡å †&quot;&gt;1. ä¸€çœ‹æ‰˜ç®¡å †&lt;/h3&gt;
&lt;p&gt;çœ‹æ‰˜ç®¡å †è™½ç„¶æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œä½†ä¹Ÿä¸æ˜¯æ¯æ¬¡éƒ½å‡‘æ•ˆï¼Œæ¯•ç«Ÿé€ æˆå†…å­˜æš´æ¶¨æš´è·Œçš„åŸå› å„ç§å„æ ·ï¼Œå°±åƒäººæ„Ÿå†’æœ‰é£å¯’ï¼Œé£çƒ­å’Œç—…æ¯’æ€§ï¼Œå¯¹å§ğŸ˜ï¼Œè¿˜æ˜¯ä½¿ç”¨è€å‘½ä»¤ï¼š &lt;code&gt;!dumpheap -stat -min 102400&lt;/code&gt; ï¼Œåœ¨æ‰˜ç®¡å †ä¸Šæ‰¾å¤§äº&lt;code&gt;100M&lt;/code&gt;çš„å¯¹è±¡ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-C#&quot;&gt;
0:030&amp;gt; !dumpheap -stat -min 102400
Statistics:
              MT    Count    TotalSize Class Name
00007ffe094ec988        1      1438413 System.Byte[]
00007ffdab934c48        1      1810368 System.Collections.Generic.Dictionary`2+Entry[[System.Int32, mscorlib],[System.Collections.Generic.HashSet`1[[System.Int64, mscorlib]], System.Core]][]
00007ffe094e6948        1      2527996 System.String
00007ffdab9ace78        4     29499552 System.Collections.Generic.Dictionary`2+Entry[[System.Int64, mscorlib],[System.DateTime, mscorlib]][]
00007ffe094e4078        4    267342240 System.String[]
00007ffe094e9220      135    452683336 System.Int32[]
00007ffdab8cd620      123   1207931808 System.Collections.Generic.HashSet`1+Slot[[System.Int64, mscorlib]][]
00007ffe094c8510      185   1579292760 System.Int64[]
00007ffdab9516b0      154   1934622720 System.Linq.Set`1+Slot[[System.Int64, mscorlib]][]
000001cc882de970      347   3660623866      Free
Total 1371 objects

&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å»æ‰ä¸€äº›æ•æ„Ÿç±»åï¼Œå†è§‚å¯Ÿå¥½åƒæ²¡æœ‰ç‰¹åˆ«æ˜¾çœ¼çš„é›†åˆï¼Œåƒ &lt;code&gt;System.Int64[] ,System.Linq.Set1+Slot[[System.Int64, mscorlib]][]&lt;/code&gt; ä¸€èˆ¬éƒ½æ˜¯ç”¨ä½œå…¶ä»–é›†åˆçš„å†…å­˜å­˜å‚¨ï¼Œå¾ˆå¤šæ—¶å€™ç”¨&lt;code&gt;!gcroort&lt;/code&gt; æŠ“ä¸å‡ºæ¥ï¼Œæœ€å¤§çš„åè€Œæ˜¯Freeåˆ—ï¼Œæœ‰347ä¸ªç¢ç‰‡ï¼Œé«˜è¾¾ &lt;code&gt;3.5G&lt;/code&gt;ï¼Œè¯´æ˜æ­¤æ—¶çš„å¤§å¯¹è±¡å †æ˜¯ä¸€å¡Œç³Šæ¶‚å•Šï¼Œè¦æ˜¯GCèƒ½å¸®å¿™å‹ç¼©ä¸€ä¸‹è¯¥å¤šå¥½ğŸ˜„ã€‚&lt;/p&gt;
&lt;h3 id=&quot;2-æŸ¥çœ‹æ¯ä¸€ä¸ªçº¿ç¨‹çš„è°ƒç”¨æ ˆ&quot;&gt;2. æŸ¥çœ‹æ¯ä¸€ä¸ªçº¿ç¨‹çš„è°ƒç”¨æ ˆ&lt;/h3&gt;
&lt;p&gt;å…ˆæƒ¯æ€§çš„å·çª¥ä¸€ä¸‹ç¨‹åºä¸­æœ‰å¤šå°‘ä¸ªçº¿ç¨‹ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-C#&quot;&gt;
0:000&amp;gt; !threads
ThreadCount:      74
UnstartedThread:  0
BackgroundThread: 72
PendingThread:    0
DeadThread:       0
Hosted Runtime:   no
                                                                                                        Lock  
       ID OSID ThreadOBJ           State GC Mode     GC Alloc Context                  Domain           Count Apt Exception
   0    1 2958 000001cc882e5a40    2a020 Preemptive  0000000000000000:0000000000000000 000001cc882d8db0 1     MTA 
   2    2 2358 000001cc883122c0    2b220 Preemptive  000001D41B132930:000001D41B1348A0 000001cc882d8db0 0     MTA (Finalizer) 
   3    4 2204 000001cc883ae5d0  102a220 Preemptive  0000000000000000:0000000000000000 000001cc882d8db0 0     MTA (Threadpool Worker) 
   5    7 278c 000001cca29d8ef0  202b220 Preemptive  000001D41AB53A98:000001D41AB55A58 000001cc882d8db0 1     MTA 
   6   40 2a64 000001cca3048f10  1020220 Preemptive  0000000000000000:0000000000000000 000001cc882d8db0 0     Ukn (Threadpool Worker) 
   7   46  e34 000001cca311c390  202b220 Preemptive  0000000000000000:0000000000000000 000001cc882d8db0 0     MTA 
   8   47 27d8 000001cca3115e00    2b220 Preemptive  0000000000000000:0000000000000000 000001cc882d8db0 0     MTA 

...

&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°å½“å‰æœ‰74ä¸ªçº¿ç¨‹ï¼Œåå°çº¿ç¨‹æœ‰72ä¸ªï¼Œæ¥ä¸‹æ¥ç”¨ &lt;code&gt;~*e !clrstack&lt;/code&gt; æŸ¥çœ‹æ¯ä¸ªæ‰˜ç®¡çº¿ç¨‹éƒ½åœ¨åšä»€ä¹ˆï¼Œç”±äºå†…å®¹å¤ªå¤šï¼Œæˆ‘å°±èŠ‚é€‰ä¸€ä¸‹äº†å“ˆã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-C#&quot;&gt;0:000&amp;gt; ~*e !clrstack
OS Thread Id: 0x2d64 (29)
        Child SP               IP Call Site
000000d908cfe698 00007ffe28646bf4 [GCFrame: 000000d908cfe698] 
000000d908cfe768 00007ffe28646bf4 [HelperMethodFrame_1OBJ: 000000d908cfe768] System.Threading.Monitor.ObjWait(Boolean, Int32, System.Object)

OS Thread Id: 0x214c (30)
        Child SP               IP Call Site
000000d90957e6e8 00007ffe28646bf4 [GCFrame: 000000d90957e6e8] 
000000d90957e7b8 00007ffe28646bf4 [HelperMethodFrame_1OBJ: 000000d90957e7b8] System.Threading.Monitor.ObjWait(Boolean, Int32, System.Object)

OS Thread Id: 0x1dc0 (40)
        Child SP               IP Call Site
000000d950ebe878 00007ffe28646bf4 [GCFrame: 000000d950ebe878] 
000000d950ebe948 00007ffe28646bf4 [HelperMethodFrame_1OBJ: 000000d950ebe948] System.Threading.Monitor.ObjWait(Boolean, Int32, System.Object)

OS Thread Id: 0x274c (53)
        Child SP               IP Call Site
000000d9693fe518 00007ffe28646bf4 [GCFrame: 000000d9693fe518] 
000000d9693fe5e8 00007ffe28646bf4 [HelperMethodFrame_1OBJ: 000000d9693fe5e8] System.Threading.Monitor.ObjWait(Boolean, Int32, System.Object)
000000d9693fe700 00007ffe09314d05 System.Threading.ManualResetEventSlim.Wait(Int32, System.Threading.CancellationToken)
000000d9693fe790 00007ffe0930d996 System.Threading.Tasks.Task.SpinThenBlockingWait(Int32, System.Threading.CancellationToken)
000000d9693fe800 00007ffe09c9b7a1 System.Threading.Tasks.Task.InternalWait(Int32, System.Threading.CancellationToken)

&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/214741/202005/214741-20200522075313044-2048452876.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å‘ç°ä¸€ä¸ªå¥‡æ€ªçš„ç°è±¡ï¼Œæœ‰4ä¸ªçº¿ç¨‹ &lt;code&gt;29,30,40,53&lt;/code&gt; åœ¨ &lt;code&gt;Monitor.ObjWait&lt;/code&gt; å¤„å¡ä½äº†ï¼Œä»è°ƒç”¨æ ˆæ¥çœ‹è¿™å››ä¸ªå®¶ä¼™æ­£åœ¨å‡†å¤‡å‘Mongodbæ‰¹é‡æ’å…¥æ•°æ®[InsertBatch]ï¼Œæ­¤æ—¶åº”è¯¥æœ‰å…¶ä»–çš„ä¸€ä¸ªçº¿ç¨‹å…ˆè¡Œè·å–åˆ°äº†lockæ­£åœ¨åšInsertBatchï¼Œè¿™å››ä¸ªçº¿ç¨‹åœ¨ç­‰å¾…ï¼Œå¦‚ä½•è§‰å¾—æŠ½è±¡äº†ï¼Œæˆ‘ç”»ä¸€å¼ å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/214741/202005/214741-20200522075313346-61488258.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;3-å¯»æ‰¾insertbatchå¤„çš„é›†åˆ&quot;&gt;3. å¯»æ‰¾insertbatchå¤„çš„é›†åˆ&lt;/h3&gt;
&lt;p&gt;è¿™é‡Œæˆ‘å°±æ‹¿ &lt;code&gt;30&lt;/code&gt;å·çº¿ç¨‹è¯´äº‹ï¼Œä»ä¸Šå›¾è°ƒç”¨æ ˆä¸­ä½ åº”è¯¥çœ‹åˆ°ä¸€ä¸ª&lt;code&gt;System.Collections.Generic.IEnumerable1&amp;lt;System.__Canon&amp;gt;&lt;/code&gt;ï¼Œä»IEnumerableä¸­å¯ä»¥çŒœæµ‹å®ç°ç±»åº”è¯¥æ˜¯Listæˆ–è€…HashSetè¿™æ ·çš„é›†åˆï¼Œæ¥ä¸‹æ¥ç”¨ &lt;code&gt;!dso&lt;/code&gt; æŠŠ30å·çº¿ç¨‹æ ˆä¸Šçš„å¯¹è±¡å…¨éƒ¨dumpå‡ºæ¥ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/214741/202005/214741-20200522075313563-1688657449.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä»å›¾ä¸­çœ‹åº”è¯¥å°±æ˜¯è¿™ä¸ª &lt;code&gt;List&amp;lt;xxx.Common.GroupConditionCustomerIDCacheModel&amp;gt;&lt;/code&gt;ï¼Œç„¶åç”¨&lt;code&gt;!objsize&lt;/code&gt; â•&lt;code&gt;!do&lt;/code&gt; ç»™Listé‡ä¸ªå°ºå¯¸å¹¶ä¸”dumpä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-C#&quot;&gt;
0:030&amp;gt; !objsize 000001d3fa581518 
sizeof(000001d3fa581518) = 1487587080 (0x58aac708) bytes (System.Collections.Generic.List`1[[DataMipCRM.Common.GroupConditionCustomerIDCacheModel, DataMipCRM.Common]])
0:030&amp;gt; !do 000001d3fa581518
Name:        System.Collections.Generic.List`1[[DataMipCRM.Common.GroupConditionCustomerIDCacheModel, DataMipCRM.Common]]
MethodTable: 00007ffdab9557d0
EEClass:     00007ffe08eb22a0
Size:        40(0x28) bytes
File:        C:\Windows\Microsoft.Net\assembly\GAC_64\mscorlib\v4.0_4.0.0.0__b77a5c561934e089\mscorlib.dll
Fields:
              MT    Field   Offset                 Type VT     Attr            Value Name
00007ffe09478740  4001871        8     System.__Canon[]  0 instance 000001d3fa5b9bf8 _items
00007ffe094e9288  4001872       18         System.Int32  1 instance             1520 _size
00007ffe094e9288  4001873       1c         System.Int32  1 instance             1520 _version
00007ffe094e6f28  4001874       10        System.Object  0 instance 0000000000000000 _syncRoot
00007ffe09478740  4001875        8     System.__Canon[]  0   static  &amp;lt;no information&amp;gt;


&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯ä»¥çœ‹å‡ºlistå ç”¨ &lt;code&gt;1487587080/1024/1024=1.4G&lt;/code&gt;ï¼Œå°¼ç›è¿™ä¹ˆå¤§ï¼Œå“äººå“ˆï¼Œä»&lt;code&gt;_size&lt;/code&gt;çœ‹ä¹Ÿå°±1520ä¸ªï¼Œè¯´æ˜é‡ç‚¹éƒ½åœ¨ &lt;code&gt;_items&lt;/code&gt; æ•°ç»„é‡Œå•¦ï¼Œæ¥ä¸‹é‡Œç”¨ &lt;code&gt;da&lt;/code&gt; æŠŠç¬¬ä¸€ä¸ªitemæ‹¿å‡ºæ¥è§£å‰–ä¸‹ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-C#&quot;&gt;
0:030&amp;gt; !da -length 1 -details 000001d3fa5b9bf8
Name:        DataMipCRM.Common.GroupConditionCustomerIDCacheModel[]
MethodTable: 00007ffdab955e10
EEClass:     00007ffe08eaaa00
Size:        16408(0x4018) bytes
Array:       Rank 1, Number of elements 2048, Type CLASS
Element Methodtable: 00007ffdab955740
[0] 000001d3fa581540
    Name:        DataMipCRM.Common.GroupConditionCustomerIDCacheModel
    MethodTable: 00007ffdab955740
    EEClass:     00007ffdab94b9e8
    Size:        64(0x40) bytes
    File:        D:\LuneceService\DataMipCRM.Common.dll
    Fields:
                      MT    Field   Offset                 Type VT     Attr            Value Name
        00007ffdaac69258  4000589       28     ...oDB.Bson.ObjectId      1     instance     000001d3fa581568     &amp;lt;_id&amp;gt;k__BackingField
        00007ffe094e9288  400058a       20             System.Int32      1     instance                 1901     &amp;lt;ShopId&amp;gt;k__BackingField
        00007ffe094e6948  400058b        8            System.String      0     instance     000001d3f7154070     &amp;lt;GroupConditionHasCode&amp;gt;k__BackingField
        00007ffe094e6948  400058c       10            System.String      0     instance     000001cca7b46ac0     &amp;lt;unit&amp;gt;k__BackingField
        00007ffe094f1cb0  400058d       18     ...lections.BitArray      0     instance     000001d3fa581580     &amp;lt;customeridArray&amp;gt;k__BackingField

&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä»æœ€åä¸€è¡Œçš„Typeåˆ—å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ª &lt;code&gt;BitArray&lt;/code&gt; ç±»ï¼Œè¿˜æ˜¯ä¸€æ ·ï¼Œå…ˆé‡ä¸ªå°ºå¯¸å†æ‰“å‡ºæ¥ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-C#&quot;&gt;
0:030&amp;gt; !objsize 000001d3fa581580     
sizeof(000001d3fa581580) = 956008 (0xe9668) bytes (System.Collections.BitArray)
0:030&amp;gt; !do 000001d3fa581580     
Name:        System.Collections.BitArray
MethodTable: 00007ffe094f1cb0
EEClass:     00007ffe08ead968
Size:        40(0x28) bytes
File:        C:\Windows\Microsoft.Net\assembly\GAC_64\mscorlib\v4.0_4.0.0.0__b77a5c561934e089\mscorlib.dll
Fields:
              MT    Field   Offset                 Type VT     Attr            Value Name
00007ffe094e9220  40017e2        8       System.Int32[]  0 instance 000001d5320c6d18 m_array
00007ffe094e9288  40017e3       18         System.Int32  1 instance          7647524 m_length
00007ffe094e9288  40017e4       1c         System.Int32  1 instance                2 _version
00007ffe094e6f28  40017e5       10        System.Object  0 instance 0000000000000000 _syncRoot

&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä»outputä¸­çœ‹ï¼Œè¿™ä¸ªbitarrayå ç”¨ &lt;code&gt;956008/1024/1024 = 0.91M&lt;/code&gt;ï¼ŒçœŸtmdçš„å¤§ï¼Œçœ‹bitä½æœ‰ &lt;code&gt;764w&lt;/code&gt; ä¸ªï¼Œè¯´æ˜æœ‰ä¸€ä¸ªCustomerID=7647524-1æ”¾åœ¨è¿™é‡Œé¢ï¼Œé—®é¢˜åŸºæœ¬ä¸Šå°±ç®—æ‰¾åˆ°äº†ï¼Œç°åœ¨ç»ˆäºçŸ¥é“å†…å­˜ä¸ºä»€ä¹ˆè¿™ä¹ˆå¤§ï¼Œç®—ä¸€ä¸‹å°±å‡ºæ¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/214741/202005/214741-20200522075313780-45571140.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;å››ï¼šæ€»ç»“&quot;&gt;å››ï¼šæ€»ç»“&lt;/h2&gt;
&lt;p&gt;æœ€åå»é—®äº†ä¸‹æ¬ç –çš„ä¸ºä»€ä¹ˆè¿™ä¹ˆå†™ï¼Œæ˜¯å› ä¸ºç»™å®¢æˆ·å±•ç¤ºçš„ä¸€å¼ æŠ¥è¡¨ï¼Œä¸ºäº†åŠ é€Ÿã€‚ã€‚ã€‚å°†æ¯ä¸€ä¸ªç‚¹ä¸Šçš„äººç¾¤ä¿å­˜èµ·æ¥æ”¾åœ¨BitArrayä¸Šç„¶åè¿›å…¥Monogdbç¼“å­˜ï¼Œè¿™æ ·å®¢æˆ·åç»­é€‰æ‹©æŸä¸€ä¸ªç‚¹è¿›è¡Œ ä¸‹é’» æ“ä½œçš„è¯ï¼Œå¯ä»¥ç›´æ¥ä»mongodbä¸­å°†BitArrayçš„äººç¾¤å¤åŸå‡ºæ¥ï¼Œå…å»ç¨‹åºé‡å¤è®¡ç®—ä¹‹è‹¦ï¼Œå› ä¸ºæ¯ä¸ªç‚¹çš„äººç¾¤å…·æœ‰æ’ä»–æ€§ï¼Œè½åœ¨æ¯ä¸ªç‚¹ä¸Šçš„äººå¯èƒ½åªæœ‰å‡ åï¼Œå‡ ç™¾ï¼Œå‡ åƒï¼Œè€Œååè¿™å®¶å®¢æˆ·æœ‰800wä¹‹å¤šï¼Œè‡ªç„¶è¿™ä¸ªCustomerIDå°±ç‰¹åˆ«å¤§äº†ï¼Œæ›´ä¸å·§çš„å°±ç”¨äº†bitArrayå­˜å°‘é‡çš„å¤§æ•°å­—ï¼Œè¿™äº›èµ¶åœ¨ä¸€èµ·ä¹‹åï¼Œå°±æ˜¯ä¸€ä¸ªå…¸å‹çš„æ»¥ç”¨bitarrayï¼Œæ‚¨è¯´çš„ï¼Ÿ&lt;/p&gt;
&lt;hr/&gt;&lt;h3 id=&quot;å¦‚æ‚¨æœ‰æ›´å¤šé—®é¢˜ä¸æˆ‘äº’åŠ¨ï¼Œæ‰«æä¸‹æ–¹è¿›æ¥å§&quot;&gt;å¦‚æ‚¨æœ‰æ›´å¤šé—®é¢˜ä¸æˆ‘äº’åŠ¨ï¼Œæ‰«æä¸‹æ–¹è¿›æ¥å§~&lt;/h3&gt;
&lt;hr/&gt;&lt;p&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/huangxincheng/345039/o_200414062434170x170.jpg&quot; alt=&quot;&quot;/&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/huangxincheng/345039/o_200414065053baijiahao.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Thu, 21 May 2020 23:53:00 +0000</pubDate>
<dc:creator>ä¸€çº¿ç å†œ</dc:creator>
<og:description>ä¸€ï¼šèƒŒæ™¯ 1. è®²æ•…äº‹ å‰å¤©å†™äº†ä¸€ç¯‡å¤§å†…å­˜æ’æŸ¥åœ¨å›­å­é‡ŒæŒºç«ï¼Œè¿™æ˜¯åšè‡ªåª’ä½“æœ€å¼€å¿ƒçš„äº‹æ‹‰ï¼Œå¹²è„†å†æ¥ä¸€ç¯‡æ»¡è¶³å¤§å®¶èƒƒå£ï¼Œä¸Šä¸ªæœˆæˆ‘å†™äº†ä¸€ç¯‡åšå®¢æåˆ°è¿‡ä½¿ç”¨ å¯¹åŸæ¥çš„ è¿›è¡Œé«˜å¼ºåº¦å‹ç¼©ï¼Œå°†åŸæ¥çš„Listå†…å­˜å‹ç¼©äº†å°†è¿‘</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/huangxincheng/p/12934975.html</dc:identifier>
</item>
<item>
<title>ç”¨äº†è¿™ä¹ˆå¤šå¹´çš„ Java æ³›å‹ï¼Œä½ å¯¹å®ƒåˆ°åº•æœ‰å¤šäº†è§£ï¼Ÿ - æ¥¼ä¸‹å°é»‘å“¥</title>
<link>http://www.cnblogs.com/goodAndyxublog/p/12934938.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/goodAndyxublog/p/12934938.html</guid>
<description>&lt;blockquote readability=&quot;5.9039301310044&quot;&gt;
&lt;p&gt;æœ¬ç¯‡æ–‡ç«  idea æ¥è‡ª&lt;a href=&quot;https://www.cnblogs.com/huangxincheng/p/12764925.html&quot;&gt;ç”¨äº†è¿™ä¹ˆå¤šå¹´çš„æ³›å‹ï¼Œä½ å¯¹å®ƒåˆ°åº•æœ‰å¤šäº†è§£ï¼Ÿ&lt;/a&gt;,æ°å¥½å½“æ—¶çœ‹äº†ã€Œæ·±å…¥ Java è™šæ‹Ÿæœºçš„ç¬¬ä¸‰ç‰ˆã€äº†è§£æ³›å‹çš„ä¸€äº›å†å²ï¼Œæ„Ÿè§‰æŒºæœ‰æ„æ€çš„ï¼Œå°±å†™äº†å†™ Java ç‰ˆçš„æ³›å‹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä½œä¸ºä¸€ä¸ª Java ç¨‹åºå‘˜ï¼Œæ—¥å¸¸ç¼–ç¨‹æ—©å°±ç¦»ä¸å¼€æ³›å‹ã€‚æ³›å‹è‡ªä» JDK1.5 å¼•è¿›ä¹‹åï¼ŒçœŸçš„éå¸¸æé«˜ç”Ÿäº§åŠ›ã€‚ä¸€ä¸ªç®€å•çš„æ³›å‹ &lt;strong&gt;T&lt;/strong&gt;ï¼Œå¯¥å¯¥å‡ è¡Œä»£ç ï¼Œ å°±å¯ä»¥è®©æˆ‘ä»¬åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­åŠ¨æ€æ›¿æ¢æˆä»»ä½•æƒ³è¦çš„ç±»å‹ï¼Œå†ä¹Ÿä¸ç”¨å®ç°ç¹ççš„ç±»å‹è½¬æ¢æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶æˆ‘ä»¬æ¯å¤©éƒ½åœ¨ç”¨ï¼Œä½†æ˜¯è¿˜æœ‰å¾ˆå¤šåŒå­¦å¯èƒ½å¹¶ä¸äº†è§£å…¶ä¸­çš„å®ç°åŸç†ã€‚ä»Šå¤©è¿™ç¯‡æˆ‘ä»¬ä»ä»¥ä¸‹å‡ ç‚¹èŠèŠ Java æ³›å‹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Java æ³›å‹å®ç°æ–¹å¼&lt;/li&gt;
&lt;li&gt;ç±»å‹æ“¦é™¤å¸¦æ¥çš„ç¼ºé™·&lt;/li&gt;
&lt;li&gt;Java æ³›å‹å‘å±•å²&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202005/1419561-20200522071801220-685847296.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;3.3870967741935&quot;&gt;
&lt;p&gt;ç‚¹èµå†çœ‹ï¼Œå…»æˆä¹ æƒ¯ï¼Œå¾®ä¿¡æœç´¢ã€ç¨‹åºé€šäº‹ã€ã€‚&lt;br/&gt;&lt;a href=&quot;https://sourl.cn/WhjNLb&quot;&gt;ç‚¹å‡»æŸ¥çœ‹æ›´å¤šç›¸å…³æ–‡ç« &lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;java-æ³›å‹å®ç°æ–¹å¼&quot;&gt;Java æ³›å‹å®ç°æ–¹å¼&lt;/h2&gt;
&lt;p&gt;Java é‡‡ç”¨&lt;strong&gt;ç±»å‹æ“¦é™¤ï¼ˆType erasure genericsï¼‰&lt;/strong&gt;çš„æ–¹å¼å®ç°æ³›å‹ã€‚ç”¨å¤§ç™½è¯è®²å°±æ˜¯è¿™ä¸ªæ³›å‹åªå­˜åœ¨æºç ä¸­ï¼Œç¼–è¯‘å™¨å°†æºç ç¼–è¯‘æˆå­—èŠ‚ç ä¹‹æ—¶ï¼Œå°±ä¼šæŠŠæ³›å‹ã€&lt;strong&gt;æ“¦é™¤&lt;/strong&gt;ã€ï¼Œæ‰€ä»¥å­—èŠ‚ç ä¸­å¹¶ä¸å­˜åœ¨æ³›å‹ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºä¸‹é¢è¿™æ®µä»£ç ï¼Œç¼–è¯‘ä¹‹åï¼Œæˆ‘ä»¬ä½¿ç”¨ &lt;code&gt;javap -s class&lt;/code&gt; æŸ¥çœ‹å­—èŠ‚ç ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202005/1419561-20200522071801441-336325336.jpg&quot; alt=&quot;æ–¹æ³•æºç &quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202005/1419561-20200522071801646-1183272088.jpg&quot; alt=&quot;å­—èŠ‚ç &quot;/&gt;&lt;/p&gt;
&lt;p&gt;è§‚å¯Ÿ&lt;code&gt;setParam&lt;/code&gt; éƒ¨åˆ†çš„å­—èŠ‚ç ï¼Œä» &lt;code&gt;descriptor&lt;/code&gt; å¯ä»¥çœ‹åˆ°ï¼Œæ³›å‹ &lt;strong&gt;T&lt;/strong&gt; å·²è¢«æ“¦é™¤ï¼Œæœ€ç»ˆæ›¿æ¢æˆäº† &lt;code&gt;Object&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;ps:å¹¶ä¸æ˜¯æ¯ä¸€ä¸ªæ³›å‹å‚æ•°è¢«æ“¦é™¤ç±»å‹åéƒ½ä¼šå˜æˆ Object ç±»ï¼Œå¦‚æœæ³›å‹ç±»å‹ä¸º T extends String è¿™ç§æ–¹å¼ï¼Œæœ€ç»ˆæ³›å‹æ“¦é™¤ä¹‹åå°†ä¼šå˜æˆ Stringã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åŒç†&lt;code&gt;getParam&lt;/code&gt; æ–¹æ³•ï¼Œæ³›å‹è¿”å›å€¼ä¹Ÿè¢«æ›¿æ¢æˆäº† &lt;code&gt;Object&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ä¿è¯ &lt;code&gt;String param = genericType.getParam();&lt;/code&gt; ä»£ç çš„æ­£ç¡®æ€§ï¼Œç¼–è¯‘å™¨è¿˜å¾—åœ¨è¿™é‡Œæ’å…¥ç±»å‹è½¬æ¢ã€‚&lt;/p&gt;
&lt;p&gt;é™¤æ­¤ä¹‹å¤–ï¼Œç¼–è¯‘å™¨è¿˜ä¼šå¯¹æ³›å‹å®‰å…¨æ€§é˜²å¾¡ï¼Œå¦‚æœæˆ‘ä»¬å¾€ &lt;code&gt;ArrayList&amp;lt;String&amp;gt;&lt;/code&gt; æ·»åŠ  &lt;code&gt;Integer&lt;/code&gt;,ç¨‹åºç¼–è¯‘æœŸé—´å°±ä¼šæŠ¥é”™ã€‚&lt;/p&gt;
&lt;p&gt;æœ€ç»ˆç±»å‹æ“¦é™¤åçš„ä»£ç ç­‰åŒä¸å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202005/1419561-20200522071801872-436022436.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;ç±»å‹æ“¦é™¤å¸¦æ¥çš„ç¼ºé™·&quot;&gt;ç±»å‹æ“¦é™¤å¸¦æ¥çš„ç¼ºé™·&lt;/h2&gt;
&lt;p&gt;ä½œä¸ºå¯¹æ¯”ï¼Œæˆ‘ä»¬å†æ¥ç®€å•èŠä¸‹ &lt;strong&gt;C#&lt;/strong&gt; æ³›å‹çš„å®ç°æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;C#&lt;/strong&gt;æ³›å‹å®ç°æ–¹å¼ä¸ºã€Œ&lt;strong&gt;å…·ç°åŒ–å¼æ³›å‹ï¼ˆReifiable genericsï¼‰&lt;/strong&gt;ã€ï¼Œä¸ç†Ÿæ‚‰çš„ &lt;strong&gt;C#&lt;/strong&gt;å°ä¼™ä¼´å¯ä»¥ä¸ç”¨çº ç»“&lt;strong&gt;å…·ç°åŒ–&lt;/strong&gt;æŠ€æœ¯æ¦‚å¿µï¼Œæˆ‘ä¹Ÿä¸äº†è§£è¿™äº›ç‰¹æ€§--ï¼&lt;/p&gt;
&lt;p&gt;ç®€å•ç‚¹æ¥è®²ï¼Œ&lt;strong&gt;C#&lt;/strong&gt;å®ç°çš„æ³›å‹ï¼Œæ— è®ºæ˜¯åœ¨ç¨‹åºæºç ï¼Œè¿˜æ˜¯åœ¨ç¼–è¯‘ä¹‹åçš„ï¼Œç”šè‡³æ˜¯è¿è¡ŒæœŸé—´éƒ½æ˜¯åˆ‡å®å­˜åœ¨çš„ã€‚&lt;/p&gt;
&lt;p&gt;ç›¸å¯¹æ¯”ä¸ &lt;strong&gt;C#&lt;/strong&gt; æ³›å‹ï¼ŒJava æ³›å‹çœ‹èµ·æ¥å°±åƒæ˜¯ä¸ªã€Œ&lt;strong&gt;ä¼ª&lt;/strong&gt;ã€æ³›å‹ã€‚Java æ³›å‹åªå­˜åœ¨ç¨‹åºæºç ä¸­ï¼Œç¼–è¯‘ä¹‹åå°±è¢«æ“¦é™¤ï¼Œè¿™ç§ç¼ºé™·ç›¸åº”çš„ä¼šå¸¦æ¥ä¸€äº›é—®é¢˜ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ä¸æ”¯æŒåŸºæœ¬æ•°æ®ç±»å‹&quot;&gt;ä¸æ”¯æŒåŸºæœ¬æ•°æ®ç±»å‹&lt;/h3&gt;
&lt;p&gt;æ³›å‹å‚æ•°è¢«æ“¦é™¤ä¹‹åï¼Œå¼ºåˆ¶å˜æˆäº† &lt;code&gt;Object&lt;/code&gt; ç±»å‹ã€‚è¿™ä¹ˆåšå¯¹äºå¼•ç”¨ç±»å‹æ¥è¯´æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ¯•ç«Ÿ &lt;code&gt;Object&lt;/code&gt; æ˜¯æ‰€æœ‰ç±»å‹çš„çˆ¶ç±»å‹ã€‚ä½†æ˜¯å¯¹äº &lt;code&gt;int/long&lt;/code&gt; ç­‰å…«ä¸ªåŸºæœ¬æ•°æ®ç±»å‹è¯´ï¼Œè¿™å°±éš¾åŠäº†ã€‚å› ä¸º Java æ²¡åŠæ³•åšåˆ°&lt;code&gt;int/long&lt;/code&gt; ä¸ &lt;code&gt;Object&lt;/code&gt; çš„å¼ºåˆ¶è½¬æ¢ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœè¦å®ç°è¿™ç§è½¬æ¢ï¼Œéœ€è¦è¿›è¡Œä¸€ç³»åˆ—æ”¹é€ ï¼Œæ”¹åŠ¨éš¾åº¦è¿˜ä¸å°ã€‚æ‰€ä»¥å½“æ—¶ Java ç»™å‡ºä¸€ä¸ªç®€å•ç²—æš´çš„è§£å†³æ–¹æ¡ˆï¼šæ—¢ç„¶æ²¡åŠæ³•åšåˆ°è½¬æ¢ï¼Œé‚£å°±ç´¢æ€§ä¸æ”¯æŒåŸå§‹ç±»å‹æ³›å‹äº†ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœéœ€è¦ä½¿ç”¨ï¼Œé‚£å°±è§„å®šä½¿ç”¨ç›¸å…³åŒ…è£…ç±»çš„æ³›å‹ï¼Œæ¯”å¦‚ &lt;code&gt;ArrayList&amp;lt;Integer&amp;gt;&lt;/code&gt;ã€‚å¦å¤–ä¸ºäº†å¼€å‘äººå‘˜æ–¹ä¾¿ï¼Œé¡ºä¾¿å¢åŠ äº†åŸç”Ÿæ•°æ®ç±»å‹çš„&lt;strong&gt;è‡ªåŠ¨æ‹†ç®±/è£…ç®±&lt;/strong&gt;çš„ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;p&gt;æ­£æ˜¯è¿™ç§ã€Œå·æ‡’ã€çš„åšæ³•ï¼Œå¯¼è‡´ç°åœ¨æˆ‘ä»¬æ²¡åŠæ³•ä½¿ç”¨åŸå§‹ç±»å‹æ³›å‹ï¼Œåˆè¦å¿å—åŒ…è£…ç±»è£…ç®±/æ‹†ç®±å¸¦æ¥çš„å¼€é”€ï¼Œä»è€Œåˆå¸¦æ¥è¿è¡Œæ•ˆç‡çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;h3 id=&quot;è¿è¡Œæ•ˆç‡&quot;&gt;è¿è¡Œæ•ˆç‡&lt;/h3&gt;
&lt;p&gt;ä¸Šé¢å­—èŠ‚ç ä¾‹å­æˆ‘ä»¬å·²ç»çœ‹åˆ°ï¼Œæ³›å‹æ“¦é™¤ä¹‹åç±»å‹å°†ä¼šå˜æˆ &lt;code&gt;Object&lt;/code&gt;ã€‚å½“æ³›å‹å‡ºç°åœ¨æ–¹æ³•è¾“å…¥ä½ç½®çš„æ—¶å€™ï¼Œç”±äº Java æ˜¯å¯ä»¥å‘ä¸Šè½¬å‹çš„ï¼Œè¿™é‡Œå¹¶ä¸éœ€è¦å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œæ‰€ä»¥æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯å½“æ³›å‹å‚æ•°å‡ºç°åœ¨æ–¹æ³•çš„è¾“å‡ºä½ç½®ï¼ˆè¿”å›å€¼ï¼‰çš„æ—¶å€™ï¼Œè°ƒç”¨è¯¥æ–¹æ³•çš„åœ°æ–¹å°±éœ€è¦è¿›è¡Œå‘ä¸‹è½¬æ¢ï¼Œå°† &lt;code&gt;Object&lt;/code&gt; å¼ºåˆ¶è½¬æ¢æˆæ‰€éœ€ç±»å‹,æ‰€ä»¥ç¼–è¯‘å™¨ä¼šæ’å…¥ä¸€å¥ &lt;code&gt;checkcast&lt;/code&gt; å­—èŠ‚ç ã€‚&lt;/p&gt;
&lt;p&gt;é™¤äº†è¿™ä¸ªï¼Œä¸Šé¢æˆ‘ä»¬è¿˜è¯´åˆ°åŸå§‹åŸºæœ¬æ•°æ®ç±»å‹ï¼Œç¼–è¯‘å™¨è¿˜éœ€å¸®åŠ©æˆ‘ä»¬è¿›è¡Œè£…ç®±/æ‹†ç®±ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥å¯¹äºä¸‹é¢è¿™æ®µä»£ç æ¥è¯´ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;List&amp;lt;Integer&amp;gt; list = new ArrayList&amp;lt;Integer&amp;gt;();
list.add(66); // 1
int num = list.get(0); // 2
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯¹äºâ‘ å¤„ï¼Œç¼–è¯‘å™¨è¦åšå°±æ˜¯å¢åŠ åŸºæœ¬ç±»å‹çš„è£…ç®±å³å¯ã€‚ä½†æ˜¯å¯¹äºç¬¬äºŒæ­¥æ¥è¯´ï¼Œç¼–è¯‘å™¨é¦–å…ˆéœ€è¦å°† &lt;code&gt;Object&lt;/code&gt; å¼ºåˆ¶è½¬æ¢æˆ &lt;code&gt;Integer&lt;/code&gt;ï¼Œæ¥ç€ç¼–è¯‘å™¨è¿˜éœ€è¦è¿›è¡Œæ‹†ç®±ã€‚&lt;/p&gt;
&lt;p&gt;ç±»å‹æ“¦é™¤ä¹‹åï¼Œä¸Šé¢ä»£ç ç­‰åŒäºï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;List list = new ArrayList();
list.add(Integer.valueOf(66));
int num = ((Integer) list.get(0)).intValue();
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚æœä¸Šé¢æ³›å‹ä»£ç åœ¨ C# å®ç°ï¼Œå°±ä¸ä¼šæœ‰è¿™ä¹ˆå¤šé¢å¤–æ­¥éª¤ã€‚æ‰€ä»¥ Java è¿™ç§ç±»å‹æ“¦é™¤å¼æ³›å‹å®ç°æ–¹å¼æ— è®ºä½¿ç”¨æ•ˆæœä¸è¿è¡Œæ•ˆç‡ï¼Œè¿˜æ˜¯å…¨é¢è½åäº C# çš„å…·ç°åŒ–å¼æ³›å‹ã€‚&lt;/p&gt;
&lt;h3 id=&quot;è¿è¡ŒæœŸé—´æ— æ³•è·å–æ³›å‹å®é™…ç±»å‹&quot;&gt;è¿è¡ŒæœŸé—´æ— æ³•è·å–æ³›å‹å®é™…ç±»å‹&lt;/h3&gt;
&lt;p&gt;ç”±äºç¼–è¯‘ä¹‹åï¼Œæ³›å‹å°±è¢«æ“¦é™¤ï¼Œæ‰€ä»¥åœ¨ä»£ç è¿è¡ŒæœŸé—´ï¼ŒJava è™šæ‹Ÿæœºæ— æ³•è·å–æ³›å‹çš„å®é™…ç±»å‹ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™æ®µä»£ç ï¼Œä»æºç ä¸Šä¸¤ä¸ª List çœ‹èµ·æ¥æ˜¯ä¸åŒç±»å‹çš„é›†åˆï¼Œä½†æ˜¯ç»è¿‡æ³›å‹æ“¦é™¤ä¹‹åï¼Œé›†åˆéƒ½å˜ä¸º &lt;code&gt;ArrayList&lt;/code&gt;ã€‚æ‰€ä»¥ &lt;code&gt;if&lt;/code&gt;è¯­å¥ä¸­ä»£ç å°†ä¼šè¢«æ‰§è¡Œã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;ArrayList&amp;lt;Integer&amp;gt; li = new ArrayList&amp;lt;Integer&amp;gt;();
ArrayList&amp;lt;Float&amp;gt; lf = new ArrayList&amp;lt;Float&amp;gt;();
if (li.getClass() == lf.getClass()) { // æ³›å‹æ“¦é™¤ï¼Œä¸¤ä¸ª List ç±»å‹æ˜¯ä¸€æ ·çš„
    System.out.println(&quot;6666&quot;);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™æ ·ä»£ç çœ‹èµ·æ¥å°±æœ‰ç‚¹åç›´è§‰ï¼Œè¿™å¯¹æ–°æ‰‹æ¥è¯´ä¸æ˜¯å¾ˆå‹å¥½ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–è¿˜ä¼šç»™æˆ‘ä»¬åœ¨å®é™…ä½¿ç”¨ä¸­å¸¦æ¥ä¸€äº›é™åˆ¶ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬æ²¡åŠæ³•ç›´æ¥å®ç°ä»¥ä¸‹ä»£ç ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202005/1419561-20200522071802013-650189725.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æœ€åå†ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªæ³›å‹ &lt;code&gt;List&lt;/code&gt; è½¬æ¢æˆæ•°ç»„çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å°±æ²¡åŠæ³•ç›´æ¥ä» List å»è·å–æ³›å‹å®é™…ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¾—ä¸é¢å¤–å†ä¼ å…¥ä¸€ä¸ª Class ç±»å‹ï¼ŒæŒ‡å®šæ•°ç»„çš„ç±»å‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public static &amp;lt;E&amp;gt; E[] convert(List&amp;lt;E&amp;gt; list, Class&amp;lt;E&amp;gt; componentType) {
    E[] array = (E[]) Array.newInstance(componentType, list.size());
    ....
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä»ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒJava é‡‡ç”¨ç±»å‹æ“¦é™¤å¼å®ç°æ³›å‹ï¼Œç¼ºé™·å¾ˆå¤šã€‚é‚£ä¸ºä»€ä¹ˆ Java ä¸é‡‡ç”¨ C# çš„é‚£ç§æ³›å‹å®ç°æ–¹å¼ï¼Ÿæˆ–è€…è¯´é‡‡ç”¨ä¸€ç§æ›´å¥½å®ç°æ–¹å¼ï¼Ÿ&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªé—®é¢˜ç­‰æˆ‘ä»¬äº†è§£ Java æ³›å‹æœºåˆ¶çš„å†å²ï¼Œä»¥åŠå½“æ—¶ Java è¯­è¨€çš„ç°çŠ¶ï¼Œæˆ‘ä»¬æ‰èƒ½åˆ‡èº«ä½“ä¼šåˆ°å½“æ—¶ Java é‡‡ç”¨è¿™ç§æ³›å‹å®ç°æ–¹å¼çš„åŸå› ã€‚&lt;/p&gt;
&lt;h2 id=&quot;java-æ³›å‹å†å²èƒŒæ™¯&quot;&gt;Java æ³›å‹å†å²èƒŒæ™¯&lt;/h2&gt;
&lt;p&gt;Java æ³›å‹æœ€æ—©æ˜¯åœ¨ JDK5 çš„æ—¶å€™æ‰è¢«å¼•å…¥ï¼Œä½†æ˜¯æ³›å‹æ€æƒ³æœ€æ—©æ¥è‡ªæ¥è‡ª C++ æ¨¡æ¿ï¼ˆtemplateï¼‰ã€‚1996 å¹´ Martin Oderskyï¼ˆScala è¯­è¨€ç¼”é€ è€…ï¼‰ åœ¨åˆšå‘å¸ƒçš„ Java çš„åŸºç¡€ä¸Šæ‰©å±•äº†æ³›å‹ã€å‡½æ•°å¼ç¼–ç¨‹ç­‰åŠŸèƒ½ï¼Œå½¢æˆä¸€é—¨æ–°çš„è¯­è¨€-ã€Œ&lt;strong&gt;Pizza&lt;/strong&gt;ã€ã€‚&lt;/p&gt;
&lt;p&gt;åæ¥ï¼ŒJava æ ¸å¿ƒå¼€å‘å›¢é˜Ÿå¯¹ &lt;strong&gt;Pizza&lt;/strong&gt; çš„æ³›å‹è®¾è®¡æ·±æ„Ÿå…´è¶£ï¼Œä¸ Martin åˆä½œï¼Œä¸€èµ·åˆä½œå¼€å‘çš„ä¸€ä¸ªæ–°çš„é¡¹ç›®ã€Œ&lt;strong&gt;Generic Java&lt;/strong&gt;ã€ã€‚è¿™ä¸ªé¡¹ç›®çš„ç›®çš„æ˜¯ä¸ºäº†ç»™ Java å¢åŠ æ³›å‹æ”¯æŒï¼Œä½†æ˜¯ä¸å¼•å…¥å‡½æ•°å¼ç¼–ç¨‹ç­‰åŠŸèƒ½ã€‚æœ€ç»ˆæˆåŠŸåœ¨ Java5 ä¸­æ­£å¼å¼•å…¥æ³›å‹æ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202005/1419561-20200522071802173-1703805257.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ³›å‹ç§»æ¤è¿‡ç¨‹ï¼Œä¸€å¼€å§‹å¹¶ä¸æ˜¯æœç€ç±»å‹æ“¦é™¤çš„æ–¹å‘å‰è¿›ï¼Œäº‹å® &lt;strong&gt;Pizza&lt;/strong&gt; ä¸­æ³›å‹æ›´åŠ ç±»ä¼¼äº &lt;strong&gt;C#&lt;/strong&gt; ä¸­çš„æ³›å‹ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ç”±äº Java è‡ªèº«ç‰¹æ€§ï¼Œè‡ªå¸¦ä¸¥æ ¼çš„çº¦æŸï¼Œè®© Martin åœ¨&lt;strong&gt;Generic Java&lt;/strong&gt; å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸å¾—ä¸æ”¾å¼ƒäº† Pizza ä¸­æ³›å‹è®¾è®¡ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªç‰¹æ€§å°±æ˜¯ï¼ŒJava éœ€è¦åšåˆ°&lt;strong&gt;ä¸¥æ ¼çš„å‘åå…¼å®¹æ€§&lt;/strong&gt;ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªåœ¨ JDK1.2 ç¼–è¯‘å‡ºæ¥ Class æ–‡ä»¶ï¼Œä¸ä»…èƒ½åœ¨ JDK 1.2 èƒ½æ­£å¸¸è¿è¡Œï¼Œè¿˜å¾—å¿…é¡»ä¿è¯åœ¨åç»­ JDKï¼Œæ¯”å¦‚ JDK12 ä¸­ä¹Ÿèƒ½ä¿è¯æ­£å¸¸çš„è¿è¡Œã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§ç‰¹æ€§æ˜¯æ˜ç¡®å†™å…¥ Java è¯­è¨€è§„èŒƒçš„ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯¹ Java ä½¿ç”¨è€…çš„ä¸€ä¸ªä¸¥è‚ƒæ‰¿è¯ºã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;è¿™é‡Œå¼ºè°ƒä¸€ä¸‹ï¼Œè¿™é‡Œçš„å‘åå…¼å®¹æ€§æŒ‡çš„æ˜¯äºŒè¿›åˆ¶å…¼å®¹æ€§ï¼Œå¹¶ä¸æ˜¯æºç å…¼å®¹æ€§ã€‚ä¹Ÿä¸ä¿è¯é«˜ç‰ˆæœ¬çš„ Class æ–‡ä»¶èƒ½å¤Ÿè¿è¡Œåœ¨ä½ç‰ˆæœ¬çš„ JDK ä¸Šã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç°åœ¨å›°éš¾ç‚¹åœ¨äºï¼ŒJava 1.4.2 ä¹‹å‰éƒ½æ²¡æœ‰æ”¯æŒæ³›å‹ï¼Œè€Œ Java5 ä¹‹åçªç„¶è¦æ”¯æŒæ³›å‹ï¼Œè¿˜è¦è®© JDK1.4 ä¹‹å‰ç¼–è¯‘çš„ç¨‹åºèƒ½åœ¨æ–°ç‰ˆæœ¬ä¸­æ­£å¸¸è¿è¡Œï¼Œè¿™å°±æ„å‘³ç€ä»¥å‰æ²¡æœ‰çš„é™åˆ¶ï¼Œå°±ä¸èƒ½çªç„¶å¢åŠ ã€‚&lt;/p&gt;
&lt;p&gt;ä¸¾ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;ArrayList arrayList=new ArrayList();
arrayList.add(&quot;6666&quot;);
arrayList.add(Integer.valueOf(666));
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ²¡æœ‰æ³›å‹ä¹‹å‰ï¼Œ List é›†åˆæ˜¯å¯ä»¥å­˜å‚¨ä¸åŒç±»å‹çš„æ•°æ®ï¼Œé‚£ä¹ˆå¼•å…¥æ³›å‹ä¹‹åï¼Œè¿™æ®µä»£ç å¿…é¡»çš„èƒ½æ­£ç¡®è¿è¡Œã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ä¿è¯è¿™äº›æ—§çš„ Clas æ–‡ä»¶èƒ½åœ¨ Java5 ä¹‹åæ­£å¸¸è¿è¡Œï¼Œè®¾è®¡è€…åŸºæœ¬æœ‰ä¸¤æ¡è·¯ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;éœ€è¦æ³›å‹åŒ–çš„å®¹å™¨ï¼ˆä¸»è¦æ˜¯å®¹å™¨ç±»å‹ï¼‰ï¼Œä»¥å‰æœ‰çš„ä¿æŒä¸å˜ï¼Œå¹³è¡Œå¢åŠ ä¸€å¥—æ–°çš„æ³›å‹åŒ–çš„ç‰ˆæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;ç›´æ¥æŠŠå·²æœ‰çš„ç±»å‹åŸåœ°æ³›å‹åŒ–ï¼Œä¸å¢åŠ ä»»ä½•æ–°çš„å·²æœ‰ç±»å‹çš„æ³›å‹ç‰ˆæœ¬ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;å¦‚æœ Java é‡‡ç”¨ç¬¬ä¸€æ¡è·¯å®ç°æ–¹å¼ï¼Œé‚£ä¹ˆç°åœ¨æˆ‘ä»¬å¯èƒ½å°±ä¼šæœ‰ä¸¤å¥—é›†åˆç±»å‹ã€‚ä»¥ &lt;code&gt;ArrayList&lt;/code&gt; ä¸ºä¾‹,ä¸€å¥—ä¸ºæ™®é€šçš„ &lt;code&gt;java.util.ArrayList&lt;/code&gt;ï¼Œä¸€å¥—å¯èƒ½ä¸º &lt;code&gt;java.util.generic.ArrayList&amp;lt;T&amp;gt;&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;é‡‡ç”¨è¿™ç§æ–¹æ¡ˆä¹‹åï¼Œå¦‚æœå¼€å‘ä¸­éœ€è¦ä½¿ç”¨æ³›å‹ç‰¹æ€§ï¼Œé‚£ä¹ˆç›´æ¥ä½¿ç”¨æ–°çš„ç±»å‹ã€‚å¦å¤–æ—§çš„ä»£ç ä¸æ”¹åŠ¨ï¼Œä¹Ÿå¯ä»¥ç›´æ¥è¿è¡Œåœ¨æ–°ç‰ˆæœ¬ JDK ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;è¿™å¥—æ–¹æ¡ˆçœ‹èµ·æ¥æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œå®é™…ä¸ŠC# å°±æ˜¯é‡‡ç”¨è¿™å¥—æ–¹æ¡ˆã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆ Java å´æ²¡æœ‰ä½¿ç”¨è¿™å¥—æ–¹æ¡ˆé‚£?&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯å› ä¸ºå½“æ—¶ C# æ‰å‘å¸ƒä¸¤å¹´ï¼Œå†å²ä»£ç å¹¶ä¸å¤šï¼Œå¦‚æœæ—§ä»£ç éœ€è¦ä½¿ç”¨æ³›å‹ç‰¹æ€§ï¼Œæ”¹é€ èµ·æ¥ä¹Ÿå¾ˆå¿«ã€‚ä½†æ˜¯ Java ä¸ä¸€æ ·ï¼Œå½“æ—¶ Java å·²ç»å‘å¸ƒåå¹´äº†ï¼Œå·²ç»æœ‰å¾ˆå¤šç¨‹åºå·²ç»è¿è¡Œéƒ¨ç½²åœ¨ç”Ÿäº§ç¯å¢ƒï¼Œå¯ä»¥æƒ³è±¡å†å²ä»£ç éå¸¸å¤šã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœè¿™äº›åº”ç”¨åœ¨æ–°ç‰ˆæœ¬ Java éœ€è¦ä½¿ç”¨æ³›å‹ï¼Œé‚£å°±éœ€è¦åšå¤§é‡æºç æ”¹åŠ¨ï¼Œå¯ä»¥æƒ³è±¡è¿™ä¸ªå¼€å‘å·¥ä½œé‡ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤– Java 5 ä¹‹å‰ï¼Œå…¶å®æˆ‘ä»¬å°±å·²ç»æœ‰äº†ä¸¤å¥—é›†åˆå®¹å™¨ï¼Œä¸€å¥—ä¸º &lt;code&gt;Vector/Hashtable&lt;/code&gt; ç­‰å®¹å™¨ï¼Œä¸€å¥—ä¸º &lt;code&gt;ArrayList/ HashMap&lt;/code&gt;ã€‚è¿™ä¸¤å¥—å®¹å™¨çš„å­˜åœ¨ï¼Œå…¶å®å·²ç»å¼•æ¥ä¸€äº›ä¸ä¾¿ï¼Œå¯¹äºæ–°æ¥è§¦çš„ Java çš„å¼€å‘äººå‘˜æ¥è¯´ï¼Œè¿˜å¾—å­¦ä¹ è¿™ä¸¤è€…çš„åŒºåˆ«ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæ­¤æ—¶ä¸ºäº†æ³›å‹å†å¼•å…¥æ–°ç±»å‹ï¼Œé‚£ä¹ˆå°±ä¼šæœ‰å››å¥—å®¹å™¨åŒæ—¶å¹¶å­˜ã€‚æƒ³æƒ³è¿™ä¸ªç”»é¢ï¼Œä¸€ä¸ªæ–°æ¥è§¦å¼€å‘äººå‘˜ï¼Œé¢å¯¹å››å¥—å®¹å™¨ï¼Œå®Œå…¨ä¸çŸ¥é“å¦‚ä½•ä¸‹æ‰‹é€‰æ‹©ã€‚å¦‚ä½• Java çœŸçš„è¿™ä¹ˆå®ç°äº†ï¼Œæƒ³å¿…ä¼šæœ‰æ›´å¤šäººåæ§½ Javaã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ Java é€‰æ‹©ç¬¬äºŒæ¡è·¯ï¼Œé‡‡ç”¨ç±»å‹æ“¦é™¤ï¼Œåªéœ€è¦æ”¹åŠ¨ Javac ç¼–è¯‘å™¨ï¼Œä¸éœ€è¦æ”¹åŠ¨å­—èŠ‚ç ï¼Œä¸éœ€è¦æ”¹åŠ¨è™šæ‹Ÿæœºï¼Œä¹Ÿä¿è¯äº†ä¹‹å‰å†å²æ²¡æœ‰æ³›å‹çš„ä»£ç è¿˜å¯ä»¥åœ¨æ–°çš„ JDK ä¸­è¿è¡Œã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ç¬¬äºŒæ¡è·¯ï¼Œå¹¶ä¸ä»£è¡¨ä¸€å®šéœ€è¦ä½¿ç”¨ç±»å‹æ“¦é™¤å®ç°ï¼Œå¦‚æœæœ‰è¶³å¤Ÿæ—¶é—´å¥½å¥½è®¾è®¡ï¼Œä¹Ÿè®¸ä¼šæœ‰æ›´å¥½çš„æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;å½“å¹´ç•™ä¸‹çš„æŠ€æœ¯å€ºï¼Œç°åœ¨åªèƒ½é  &lt;strong&gt;Valhalla&lt;/strong&gt; é¡¹ç›®æ¥è¿˜äº†ã€‚è¿™ä¸ªé¡¹ç›®ä»2014 å¹´å¼€å§‹ç«‹é¡¹ï¼ŒåŸæœ¬è®¡åˆ’åœ¨ JDK10 ä¸­è§£å†³ç°æœ‰è¯­è¨€çš„å„ç§ç¼ºé™·ã€‚ä½†æ˜¯ç»“æœæˆ‘ä»¬ä¹ŸçŸ¥é“äº†ï¼Œç°åœ¨éƒ½ JDK14 äº†ï¼Œè¿˜åªæ˜¯å®Œæˆå°‘éƒ¨åˆ†æœ¨ç›®æ ‡ï¼Œå¹¶æ²¡æœ‰è§£å†³æ ¸å¿ƒç›®æ ‡ï¼Œå¯è§è¿™ä¸ªæ”¹åŠ¨çš„éš¾åº¦å•Šã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡æˆ‘ä»¬å…ˆä» Java æ³›å‹åº•å±‚å®ç°æ–¹å¼å¼€å§‹èŠèµ·ï¼Œæ¥ç€ä¸¾äº†å‡ ä¸ªä¾‹å­ï¼Œè®©å¤§å®¶äº†è§£ç°åœ¨æ³›å‹å®ç°æ–¹å¼å­˜åœ¨ä¸€äº›ç¼ºé™·ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åæˆ‘ä»¬å¸¦å…¥ Java æ³›å‹å†å²èƒŒæ™¯ï¼Œç«™åœ¨ Java æ ¸å¿ƒå¼€å‘è€…çš„è§’åº¦ï¼Œæ‰èƒ½äº†è§£ Java æ³›å‹è¿™ä¹ˆç°å®æ— å¥ˆåŸå› ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åä½œä¸º Java å¼€å‘è€…ï¼Œè®©æˆ‘ä»¬å¯¹äºç°åœ¨ Java ä¸€äº›ä¸è¶³ï¼Œå°‘äº›æŠ±æ€¨ï¼Œå¤šä¸€äº›ç†è§£å§ã€‚ç›¸ä¿¡ä¹‹å Java æ ¸å¿ƒå¼€å‘äººå‘˜è‚¯å®šä¼šè§£å†³æ³›å‹ç°æœ‰çš„ç¼ºé™·ï¼Œè®©æˆ‘ä»¬æ‹­ç›®ä»¥å¾…ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å¸®åŠ©èµ„æ–™&quot;&gt;å¸®åŠ©èµ„æ–™&lt;/h2&gt;
&lt;ol&gt;&lt;li&gt;&lt;a href=&quot;https://www.zhihu.com/question/38940308&quot;&gt;https://www.zhihu.com/question/38940308&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.zhihu.com/question/28665443&quot;&gt;https://www.zhihu.com/question/28665443&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://hllvm-group.iteye.com/group/topic/25910&quot;&gt;https://hllvm-group.iteye.com/group/topic/25910&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://blog.zhaojie.me/2010/05/why-java-sucks-and-csharp-rocks-4-generics.html&quot;&gt;http://blog.zhaojie.me/2010/05/why-java-sucks-and-csharp-rocks-4-generics.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://blog.zhaojie.me/2010/04/why-java-sucks-and-csharp-rocks-2-primitive-types-and-object-orientation.html&quot;&gt;http://blog.zhaojie.me/2010/04/why-java-sucks-and-csharp-rocks-2-primitive-types-and-object-orientation.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Generics_in_Java&quot;&gt;https://en.wikipedia.org/wiki/Generics_in_Java&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.zhihu.com/question/34621277/answer/59440954&quot;&gt;https://www.zhihu.com/question/34621277/answer/59440954&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.artima.com/scalazine/articles/origins_of_scala.html&quot;&gt;https://www.artima.com/scalazine/articles/origins_of_scala.html&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;h2 id=&quot;æœ€åï¼ˆæ±‚å…³æ³¨ï¼Œæ±‚ç‚¹èµï¼Œæ±‚è½¬å‘ï¼‰&quot;&gt;æœ€åï¼ˆæ±‚å…³æ³¨ï¼Œæ±‚ç‚¹èµï¼Œæ±‚è½¬å‘ï¼‰&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡æ˜¯åœ¨çœ‹äº†ã€æ·±å…¥ Javaè™šæ‹Ÿæœºï¼ˆç¬¬ä¸‰ç‰ˆï¼‰ã€ä¹‹åï¼ŒçŸ¥é“ Java æ³›å‹è¿™äº›æ•…äº‹ï¼Œæ‰æœ‰æœ¬ç¯‡æ–‡ç« ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆæ„Ÿè°¢ä¸€ä¸‹æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾çš„å°å“¥å“¥çš„èµ ä¹¦ã€‚&lt;/p&gt;
&lt;p&gt;åˆšå¼€å§‹çŸ¥é“ã€æ·±å…¥ Javaè™šæ‹Ÿæœºï¼ˆç¬¬ä¸‰ç‰ˆï¼‰ã€å‘å¸ƒçš„æ—¶å€™ï¼Œæœ¬æ¥ä»¥ä¸ºåªæ˜¯å¯¹ç¬¬äºŒç‰ˆç¨å¾®è¡¥å……è€Œå·²ã€‚ç­‰æ”¶åˆ°è¿™æœ¬ä¹¦çš„æ—¶å€™ï¼Œæ‰å‘ç°è‡ªå·±é”™äº†ã€‚ä¸¤æœ¬ä¹¦æ”¾åœ¨ä¸€èµ·ï¼Œå®Œå…¨å°±ä¸æ˜¯ä¸€ä¸ªé‡çº§çš„ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;ps:ç›—å–ä¸€å¼  Why ç¥çš„å›¾&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202005/1419561-20200522071802463-1715665335.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸‰æœ¬åœ¨ç¬¬äºŒç‰ˆçš„åŸºç¡€å¢åŠ å¤§é‡è¡¥å……ï¼Œä¹Ÿè§£å†³äº†ç¬¬äºŒç‰ˆç•™ä¸‹ä¸€äº›æ²¡è§£é‡Šçš„é—®é¢˜ã€‚æ‰€ä»¥æ²¡ä¹°çš„åŒå­¦ï¼Œæ¨èç›´æ¥è´­ä¹°ç¬¬ä¸‰ç‰ˆã€‚&lt;/p&gt;
&lt;p&gt;ä¸¤ä¸ªç‰ˆæœ¬çš„å…·ä½“åŒºåˆ«ï¼Œå¤§å®¶å¯ä»¥çœ‹ä¸‹ Why ç¥çš„çš„æ–‡ç« ï¼Œè¿™ç¯‡æ–‡ç« è¿˜è¢«æœ¬ä¹¦çš„ä½œè€…æ‰“èµè¿‡å“¦ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s/rYVDgttWw9WQA1IF3KJjUQ&quot;&gt;æ·±å…¥ Javaè™šæ‹Ÿæœºä¸¤ç‰ˆæ¯”è¾ƒ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘æ˜¯æ¥¼ä¸‹å°é»‘å“¥ï¼Œä¸€ä¸ªè¿˜æœªç§ƒçš„ç¨‹åºçŒ¿ï¼Œæˆ‘ä»¬ä¸‹å‘¨ä¸‰è§~&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1419561/202005/1419561-20200522071802698-675131007.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;5.5384615384615&quot;&gt;
&lt;p&gt;æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šç¨‹åºé€šäº‹ï¼Œè·å¾—æ—¥å¸¸å¹²è´§æ¨é€ã€‚å¦‚æœæ‚¨å¯¹æˆ‘çš„ä¸“é¢˜å†…å®¹æ„Ÿå…´è¶£ï¼Œä¹Ÿå¯ä»¥å…³æ³¨æˆ‘çš„åšå®¢ï¼š&lt;a href=&quot;https://studyidea.cn&quot;&gt;studyidea.cn&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
<pubDate>Thu, 21 May 2020 23:18:00 +0000</pubDate>
<dc:creator>æ¥¼ä¸‹å°é»‘å“¥</dc:creator>
<og:description>æœ¬ç¯‡æ–‡ç«  idea æ¥è‡ª &amp;quot;ç”¨äº†è¿™ä¹ˆå¤šå¹´çš„æ³›å‹ï¼Œä½ å¯¹å®ƒåˆ°åº•æœ‰å¤šäº†è§£ï¼Ÿ&amp;quot; ,æ°å¥½å½“æ—¶çœ‹äº†ã€Œæ·±å…¥ Java è™šæ‹Ÿæœºçš„ç¬¬ä¸‰ç‰ˆã€äº†è§£æ³›å‹çš„ä¸€äº›å†å²ï¼Œæ„Ÿè§‰æŒºæœ‰æ„æ€çš„ï¼Œå°±å†™äº†å†™ Java ç‰ˆçš„</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/goodAndyxublog/p/12934938.html</dc:identifier>
</item>
<item>
<title>Rediså­¦ä¹ ç¬”è®°ï¼ˆåä¸‰ï¼‰ å¤åˆ¶ï¼ˆä¸‹ï¼‰ - æ¸©æš–å¦‚å¤ªé˜³</title>
<link>http://www.cnblogs.com/xtt321/p/12934441.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/xtt321/p/12934441.html</guid>
<description>&lt;p&gt;ä¸Šä¸€ç¯‡å†™äº†Rediså¤åˆ¶åŠŸèƒ½çš„ç®€å•åº”ç”¨ï¼Œä¸‹é¢æˆ‘ä»¬çœ‹ä¸‹Rediså¤åˆ¶åŠŸèƒ½çš„å®ç°è¿‡ç¨‹ã€‚ä¸‹é¢åŸºæœ¬ä¸Šæ˜¯ç†è®ºéƒ¨åˆ†ï¼Œæ¯ç‡¥ä¹å‘³ï¼Œä½†å¸Œæœ›å¤§å®¶èƒ½çœ‹çœ‹ï¼Œæ¯•ç«ŸçŸ¥è¯†ä¸éƒ½æ˜¯æ„Ÿå…´è¶£çš„.&lt;br/&gt;&lt;strong&gt;è€å¾—ä½å¯‚å¯,ç»å¾—èµ·è¯±æƒ‘,æ–¹èƒ½å®ˆå¾—ä½ç¹å ~.~&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;æ—§ç‰ˆå¤åˆ¶åŠŸèƒ½çš„å®ç°&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Redisçš„å¤åˆ¶åŠŸèƒ½åˆ†ä¸ºåŒæ­¥å’Œå‘½ä»¤ä¼ æ’­ä¸¤ä¸ªæ“ä½œï¼š&lt;/p&gt;
&lt;p&gt;1ã€åŒæ­¥æ“ä½œç”¨äºå°†ä»æœåŠ¡å™¨çš„æ•°æ®åº“çŠ¶æ€æ›´æ–°è‡³ä¸»æœåŠ¡å™¨å½“å‰æ‰€å¤„çš„æ•°æ®åº“çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;2ã€å‘½ä»¤ä¼ æ’­æ“ä½œåˆ™ç”¨äºåœ¨ä¸»æœåŠ¡å™¨ çš„æ•°æ®åº“çŠ¶æ€è¢«ä¿®æ”¹ï¼Œå¯¼è‡´ä»æœåŠ¡å™¨çš„æ•°æ®åº“çŠ¶æ€å‡ºç°ä¸ä¸€è‡´æ—¶ï¼Œè®©ä¸»æœåŠ¡å™¨çš„æ•°æ®åº“é‡æ–°å›åˆ°ä¸€è‡´çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;ä»æœåŠ¡å™¨å¯¹ä¸»æœåŠ¡å™¨çš„åŒæ­¥æ“ä½œéœ€è¦é€šè¿‡å‘ä¸»æœåŠ¡å‘é€syncå‘½ä»¤æ¥å®Œæˆï¼Œä»¥ä¸‹æ˜¯syncå‘½ä»¤çš„æ‰§è¡Œæ­¥éª¤ï¼š&lt;/p&gt;
&lt;p&gt;ï¼ˆ1ï¼‰ä»æœåŠ¡å™¨å‘ä¸»æœåŠ¡å™¨å‘é€SYNCå‘½ä»¤&lt;/p&gt;
&lt;p&gt;ï¼ˆ2ï¼‰æ”¶åˆ°SYNCå‘½ä»¤çš„ä¸»æœåŠ¡å™¨æ‰§è¡ŒBGSAVEå‘½ä»¤ï¼Œåœ¨åå°ç”Ÿæˆä¸€ä¸ªRDBæ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨ä¸€ä¸ªç¼“å†²åŒºè®°å½•ç°åœ¨å¼€å§‹æ‰§è¡Œçš„æ‰€æœ‰å†™å‘½ä»¤ã€‚&lt;/p&gt;
&lt;p&gt;ï¼ˆ3ï¼‰å½“ä¸»æœåŠ¡å™¨çš„BGSAVEå‘½ä»¤æ‰§è¡Œå®Œæ¯•æ—¶ï¼Œä¸»æœåŠ¡å™¨ä¼šBGSAVEå‘½ä»¤ç”Ÿæˆçš„RDBæ–‡ä»¶å‘é€ç»™ä»æœåŠ¡å™¨ï¼Œä»æœåŠ¡å™¨æ¥æ”¶å¹¶è½½å…¥è¿™ä¸ªRDBæ–‡ä»¶ï¼Œå°†è‡ªå·±çš„æ•°æ®åº“çŠ¶æ€æ›´æ–°è‡³ä¸»æœåŠ¡å™¨æ‰§è¡ŒBGSAVEå‘½ä»¤æ—¶çš„æ•°æ®åº“çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;ï¼ˆ4ï¼‰ä¸»æœåŠ¡å™¨å°†è®°å½•åœ¨ç¼“å†²åŒºçš„æ‰€æœ‰å†™å‘½ä»¤å‘é€ç»™ä»æœåŠ¡å™¨ï¼Œä»æœåŠ¡å™¨æ‰§è¡Œè¿™äº›å†™å‘½ä»¤ï¼Œå°†è‡ªå·±çš„æ•°æ®åº“çŠ¶æ€æ›´æ–°è‡³ä¸»æœåŠ¡å™¨æ•°æ®åº“å½“å‰æ‰€å¤„çš„çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;å‘½ä»¤ä¼ æ’­ï¼šå½“ä¸»æœåŠ¡å™¨æ‰§è¡Œå®¢æˆ·ç«¯å†™å‘½ä»¤æ—¶ï¼Œä¸»æœåŠ¡å™¨çš„æ•°æ®åº“å°±æœ‰å¯èƒ½è¢«ä¿®æ”¹ï¼Œå¹¶å¯¼è‡´ä¸»ä»ä¸ä¸€è‡´ã€‚æ­¤æ—¶ä¸»æœåŠ¡å™¨ä¼šå°†è‡ªå·±æ‰§è¡Œçš„å†™å‘½ä»¤å‘é€ç»™ä»æœåŠ¡å™¨æ‰§è¡Œï¼Œå½“ä»æœåŠ¡å™¨æ‰§è¡Œäº†ç›¸åŒçš„å†™å‘½ä»¤åï¼Œä¸»ä»æœåŠ¡å™¨å†æ¬¡å›åˆ°ä¸€è‡´çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¼ºé™·&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;1ã€åˆå§‹å¤åˆ¶ä»æœåŠ¡å™¨ä»æ¥æ²¡æœ‰å¤åˆ¶è¿‡ä»»ä½•ä¸»æœåŠ¡å™¨æˆ–è€…ä»æœåŠ¡å™¨å½“å‰è¦å¤åˆ¶çš„ä¸»æœåŠ¡å™¨å’Œä¸Šæ¬¡å¤åˆ¶çš„ä¸»æœåŠ¡å™¨ä¸åŒã€‚&lt;/p&gt;
&lt;p&gt;2ã€æ–­çº¿åé‡å¤åˆ¶ï¼šå¤„äºå‘½ä»¤ä¼ æ’­é˜¶æ®µçš„ä¸»ä»æœåŠ¡å™¨å› ä¸ºç½‘ç»œåŸå› è€Œä¸­æ–­äº†å¤åˆ¶ï¼Œä½†ä»æœåŠ¡å™¨é€šè¿‡è‡ªåŠ¨è¿æ¥ä»æ–°è¿ä¸Šä¸»æœåŠ¡å™¨ï¼Œå¹¶ç»§ç»­å¤åˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;br/&gt;&lt;strong&gt;æ–°ç‰ˆå¤åˆ¶åŠŸèƒ½çš„å®ç°ï¼ˆPSYNCä»£æ›¿SYNCï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;PSYNCå‘½ä»¤å…·æœ‰å®Œæ•´é‡åŒæ­¥å’Œéƒ¨åˆ†é‡åŒæ­¥ä¸¤ç§æ¨¡å¼ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ï¼ˆ1ï¼‰å®Œæ•´é‡åŒæ­¥ç”¨äºå¤„ç†åˆæ¬¡å¤åˆ¶åŠŸèƒ½ï¼Œä¸SYNCåŠŸèƒ½åŸºæœ¬ä¸€è‡´ï¼›&lt;/p&gt;
&lt;p&gt;ï¼ˆ2ï¼‰éƒ¨åˆ†é‡åŒæ­¥ç”¨äºå¤„ç†æ–­çº¿åé‡å¤å€¼çš„æƒ…å†µï¼Œè§£å†³æ—§ç‰ˆæ•ˆç‡ä½çš„é—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;éƒ¨åˆ†é‡åŒæ­¥çš„å®ç°ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ï¼ˆ1ï¼‰ä¸»æœåŠ¡å™¨ä¸ä»æœåŠ¡å™¨éƒ½ä¼šç»´æŠ¤ä¸€ä¸ªå¤åˆ¶åç§»é‡&lt;/p&gt;
&lt;p&gt;ï¼ˆ2ï¼‰å¤åˆ¶ç§¯å‹ç¼“å†²åŒºæ˜¯ç”±ä¸»æœåŠ¡å™¨ç»´æŠ¤çš„ä¸€ä¸ªå›ºå®šé•¿åº¦å…ˆè¿›å…ˆå‡ºçš„é˜Ÿåˆ—é»˜è®¤ï¼ˆ1MBï¼‰ï¼Œå‘ç”Ÿæ–­çº¿ä»è¿æ—¶ï¼Œä½†ä»æœåŠ¡å™¨é‡è¿ä¸Šä¸»æœåŠ¡å™¨ï¼Œä»æœåŠ¡å™¨ä¼šé€šè¿‡PSYNCå‘½ä»¤å°†è‡ªå·±çš„å¤åˆ¶åç§»é‡offsetå‘é€ç»™ä¸»æœåŠ¡å™¨ï¼Œä¸»æœåŠ¡å™¨æ ¹æ®è¿™ä¸ªå¤åˆ¶åç§»é‡æ¥å†³å®šå¯¹ä»æœåŠ¡å™¨æ‰§è¡Œä½•ç§åŒæ­¥æ“ä½œï¼šå¦‚æœoffsetåç§»é‡ä¹‹åçš„æ•°æ®ä»ç„¶å­˜åœ¨äºå¤åˆ¶ç§¯å‹ç¼“å†²åŒºé‡Œé¢ï¼Œé‚£ä¹ˆä¸»æœåŠ¡å™¨å°†å¯¹ä»æœåŠ¡å™¨æ‰§è¡Œéƒ¨åˆ†é‡åŒæ­¥,åä¹‹ï¼Œæ‰§è¡Œå®Œæ•´é‡åŒæ­¥æ“ä½œã€‚é™¤äº†å¤åˆ¶åç§»é‡å’Œå¤åˆ¶ç§¯å‹ç¼“å†²ä¹‹å¤–ï¼Œå®ç°éƒ¨åˆ†é‡åŒæ­¥è¿˜éœ€è¦ç”¨åˆ°æœåŠ¡å™¨è¿è¡ŒIDï¼šæ¯ä¸ªRedisæœåŠ¡å™¨éƒ½æœ‰è‡ªå·±å¯åŠ¨æ—¶ç”Ÿæˆçš„ç”±40ä¸ªéšæœº16è¿›åˆ¶å­—ç¬¦ç»„æˆçš„è¿è¡ŒIDã€‚å½“æœåŠ¡å™¨å¯¹ä¸»æœåŠ¡å™¨è¿›è¡Œåˆæ¬¡å¤åˆ¶æ—¶ï¼Œä¸»æœåŠ¡å™¨ä¼šå°†è‡ªå·±çš„è¿è¡ŒIDä¼ é€ç»™ä»æœåŠ¡å™¨ï¼Œè€Œä»æœåŠ¡å™¨åˆ™ä¼šå°†è¿™ä¸ªè¿è¡ŒIDä¿å­˜èµ·æ¥ã€‚å½“æœåŠ¡å™¨æ–­çº¿é‡è¿æ—¶ï¼Œä»æœåŠ¡å™¨å‘ä¸»æœåŠ¡å™¨å‘é€ä¿å­˜çš„è¿è¡ŒIDï¼Œå¦‚æœIDä¸€æ ·ï¼Œåˆ™ä¸»æœåŠ¡å™¨å°è¯•éƒ¨åˆ†é‡åŒæ­¥æ“ä½œï¼Œå¦‚æœä¸åŒï¼Œåˆ™æ‰§è¡Œå®Œæ•´é‡åŒæ­¥æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;strong&gt;PSYNCå‘½ä»¤çš„å®ç°&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em id=&quot;__mceDel&quot;&gt;PSYNCå‘½ä»¤çš„å®ç°æ–¹æ³•æœ‰ä¸¤ç§ï¼š&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em id=&quot;__mceDel&quot;&gt;ï¼ˆ&lt;/em&gt;1ï¼‰å¦‚æœä»æœåŠ¡å™¨ä»¥å‰æ²¡æœ‰å¤åˆ¶è¿‡ä»»ä½•ä¸»æœåŠ¡å™¨ï¼Œæˆ–è€…ä¹‹å‰æ‰§è¡Œè¿‡SLAVEOF no oneå‘½ä»¤ï¼Œé‚£ä¹ˆä»æœåŠ¡å™¨åœ¨å¼€å§‹æ–°çš„å¤åˆ¶æ—¶å°†å‘ä¸»æœåŠ¡å™¨å‘é€PSYNC? -1 å‘½ä»¤ï¼Œä¸»åŠ¨è¯·æ±‚è¿›è¡Œå®Œæ•´é‡åŒæ­¥ã€‚&lt;/p&gt;
&lt;p&gt;ï¼ˆ2ï¼‰å¦‚æœä¹‹å‰å¤åˆ¶è¿‡æŸä¸ªä¸»æœåŠ¡å™¨ï¼Œé‚£ä¹ˆä»æœåŠ¡åœ¨å¼€å§‹ä¸€æ¬¡æ–°çš„å¤åˆ¶æ—¶å‘ä¸»æœåŠ¡å™¨å‘é€PSYNC &amp;lt;runid&amp;gt; &amp;lt;offset&amp;gt;ã€‚ç”±ä¸»æœåŠ¡å™¨æ¥åˆ¤æ–­è¯¥ç”¨é‚£ç§æ–¹å¼åŒæ­¥ã€‚&lt;/p&gt;
&lt;p&gt;ï¼ˆ3ï¼‰å¦‚æœä¸»æœåŠ¡å™¨è¿”å›+FULLRESYNCå›å¤ï¼Œåˆ™è¡¨ç¤ºä¸»æœåŠ¡å™¨å°†ä¸ä»æœåŠ¡å™¨æ‰§è¡Œå®Œæ•´é‡åŒæ­¥ã€‚&lt;/p&gt;
&lt;p&gt;ï¼ˆ4ï¼‰å¦‚æœä¸»æœåŠ¡å™¨è¿”å›+CONTINUEå›å¤ï¼Œåˆ™è¡¨ç¤ºéƒ¨åˆ†é‡åŒæ­¥ï¼Œä»æœåŠ¡å™¨åªéœ€ç­‰å¾…æ¥æ”¶æ•°æ®å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;ï¼ˆ5ï¼‰ä¸»æœåŠ¡å™¨è¿”å›-ERRå›å¤ï¼Œåˆ™è¡¨ç¤ºä¸»æœåŠ¡å™¨ç‰ˆæœ¬ä½äº2.8ä¸è¯†åˆ«PSYNCå‘½ä»¤ä»æœåŠ¡å™¨å°†å‘ä¸»æœåŠ¡å™¨å‘é€SYNCå‘½ä»¤å®ŒæˆåŒæ­¥æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¤åˆ¶çš„å®ç°&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1ã€æ‰§è¡ŒSLAVEOF ip portå‘½ä»¤ï¼Œæ­¤æ—¶ä»æœåŠ¡å™¨é¦–å…ˆå°†ipä¸ç«¯å£ä¿å­˜åˆ°æœåŠ¡å™¨çŠ¶æ€çš„masterhostå±æ€§ä¸masterportå±æ€§é‡Œé¢ï¼Œå¹¶å‘å®¢æˆ·ç«¯è¿”å›â€œOKâ€ï¼Œè¡¨ç¤ºå‘½ä»¤å·²ç»è¢«æ¥æ”¶ã€‚&lt;/p&gt;
&lt;p&gt;2ã€å»ºç«‹å¥—æ¥å­—è¿æ¥&lt;/p&gt;
&lt;p&gt;ä»æœåŠ¡å™¨æ ¹æ®ipä¸ç«¯å£åˆ›å»ºè¿å‘ä¸»æœåŠ¡å™¨çš„å¥—æ¥å­—ï¼Œå¦‚æœå¥—æ¥å­—è¿æ¥åˆ°ä¸»æœåŠ¡å™¨ï¼Œé‚£ä¹ˆä»æœåŠ¡å™¨å°†ä¸ºè¿™ä¸ªå¥—æ¥å­—å…³è”ä¸€ä¸ª ä¸“é—¨ç”¨äºå¤„ç†å¤åˆ¶å·¥ä½œçš„æ–‡ä»¶äº‹ä»¶å¤„ç†å™¨ï¼Œè¿™ä¸ªäº‹ä»¶å¤„ç†å™¨è´Ÿè´£æ‰§è¡Œåç»­å¤åˆ¶å·¥ä½œã€‚ä¸»æœåŠ¡å™¨åœ¨æ¥å—ä»æœåŠ¡å™¨çš„å¥—æ¥å­—è¿æ¥åï¼Œå°†ä¸ºè¯¥å¥—æ¥å­—åˆ›å»ºç›¸åº”çš„å®¢æˆ·ç«¯çŠ¶æ€ï¼Œå¹¶å°†ä»æœåŠ¡å™¨çœ‹ä½œä¸€ä¸ªè¿æ¥åˆ°ä¸»æœåŠ¡å™¨çš„å®¢æˆ·ç«¯å¯¹å¾…ï¼Œ&lt;/p&gt;
&lt;p&gt;3ã€å‘é€PINGå‘½ä»¤&lt;/p&gt;
&lt;p&gt;ä½œç”¨ï¼š&lt;/p&gt;
&lt;p&gt;ï¼ˆ1ï¼‰è™½ç„¶ä¸ä¸»æœåŠ¡å™¨å»ºç«‹å¥—æ¥å­—è¿æ¥ï¼Œä½†åŒæ–¹å¹¶æœªä½¿ç”¨è¯¥å¥—æ¥å­—è¿›è¡Œä»»ä½•é€šä¿¡ï¼Œæ£€æŸ¥å¥—æ¥å­—è¯»å†™æ˜¯å¦æ­£å¸¸ã€‚&lt;/p&gt;
&lt;p&gt;ï¼ˆ2ï¼‰æ£€æŸ¥ä¸»æœåŠ¡å™¨æ˜¯å¦èƒ½å¤Ÿæ­£å¸¸å¤„ç†å‘½ä»¤è¯·æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;å‘é€å‘½ä»¤åå¯èƒ½é‡åˆ°çš„ä¸‰ç§æƒ…å†µï¼š&lt;/p&gt;
&lt;p&gt;ï¼ˆ1ï¼‰è¶…æ—¶ï¼Œåœ¨è§„å®šçš„æ—¶é—´é™åˆ¶å†…ä»æœåŠ¡å™¨æœªæ”¶åˆ°å›å¤å†…å®¹ï¼Œæ­¤æ—¶ä»æœåŠ¡å™¨æ–­çº¿é‡è¿ã€‚&lt;/p&gt;
&lt;p&gt;ï¼ˆ2ï¼‰å¦‚æœä¸»æœåŠ¡å™¨å‘ä»æœåŠ¡å™¨å›å¤ä¸€ä¸ªé”™è¯¯ï¼Œè¡¨ç¤ºä¸»æœåŠ¡å™¨æš‚æ—¶æ— æ³•å¤„ç†ä»æœåŠ¡å™¨çš„å‘½ä»¤è¯·æ±‚ï¼Œä»æœåŠ¡å™¨æ–­çº¿é‡è¿ã€‚&lt;/p&gt;
&lt;p&gt;ï¼ˆ3ï¼‰æ”¶åˆ°æ­£å¸¸å›å¤å†…å®¹ï¼Œåˆ™å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;4ã€èº«ä»½éªŒè¯ï¼ˆå¦‚æœä»æœåŠ¡å™¨è®¾ç½®äº†masterauthé€‰é¡¹ï¼‰&lt;/p&gt;
&lt;p&gt;ä»æœåŠ¡å™¨å‘ä¸»æœåŠ¡å™¨å‘é€ä¸€æ¡AUTHå‘½ä»¤ï¼Œæ­¤æ—¶ä»æœåŠ¡å™¨å¯èƒ½é‡åˆ°çš„æƒ…å†µæœ‰ï¼š&lt;/p&gt;
&lt;p&gt;ï¼ˆ1ï¼‰ä¸»æœåŠ¡å™¨æ²¡æœ‰è®¾ç½®requirepassé€‰é¡¹ï¼Œå¹¶ä¸”ä»æœåŠ¡å™¨æ²¡æœ‰è®¾ç½®masteré€‰é¡¹ï¼Œé‚£ä¹ˆä»æœåŠ¡å™¨å°†ç»§ç»­æ‰§è¡Œä»æœåŠ¡å‘é€çš„å‘½ä»¤ï¼Œå¤åˆ¶æ“ä½œç»§ç»­ã€‚&lt;/p&gt;
&lt;p&gt;ï¼ˆ2ï¼‰å¦‚æœä»æœåŠ¡å™¨é€šè¿‡AUTHå‘½ä»¤å‘é€çš„å¯†ç ä¸ä¸»æœåŠ¡å™¨requirepassè®¾ç½®çš„å¯†ç ç›¸åŒï¼Œé‚£ä¹ˆä¸»æœåŠ¡å™¨å°†ç»§ç»­æ‰§è¡Œä»æœåŠ¡å™¨å‘é€çš„å‘½ä»¤ï¼Œå¦‚æœä¸åŒåˆ™ä¸»æœåŠ¡å™¨è¿”å›ä¸€ä¸ªinvalid passwordé”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;ï¼ˆ3ï¼‰å¦‚æœä¸»æœåŠ¡å™¨è®¾ç½®äº†requirepassé€‰é¡¹ï¼Œä½†ä»æœåŠ¡å™¨æ²¡æœ‰è®¾ç½®masterauthé€‰é¡¹ï¼Œé‚£ä¹ˆä¸»æœåŠ¡å™¨å°†è¿”å›ä¸€ä¸ªNOAUTHé€‰é¡¹ã€‚å¦ä¸€æ–¹é¢å¦‚æœä¸»æœåŠ¡å™¨æ²¡æœ‰è®¾ç½®requirepassé€‰é¡¹ï¼Œä½†æœåŠ¡å™¨è®¾ç½®äº†masterauthé€‰é¡¹ï¼Œé‚£ä¹ˆä¸»æœåŠ¡å™¨å°†è¿”å›ä¸€ä¸ªno password is set é”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;5ã€å‘é€ç«¯å£ä¿¡æ¯ï¼Œä»æœåŠ¡å™¨å°†æ‰§è¡ŒREPLCONF listening-port portå‘½ä»¤ï¼Œå‘ä¸»æœåŠ¡å™¨å‘é€ä»æœåŠ¡å™¨çš„ç›‘å¬ç«¯å£å·ï¼Œä¸»æœåŠ¡å™¨å°†ç«¯å£å·ä¿å­˜åœ¨å¯¹åº”çš„å®¢æˆ·ç«¯çŠ¶æ€slave_listening_portå±æ€§ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;6ã€åŒæ­¥&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/404258/202005/404258-20200521233802524-1405066771.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;7ã€å‘½ä»¤ä¼ æ’­&lt;/p&gt;
&lt;p&gt;ä¸»æœåŠ¡å™¨å°†è‡ªå·±æ‰§è¡Œçš„å†™å‘½ä»¤å‘é€ç»™ä»æœåŠ¡å™¨ï¼Œä»æœåŠ¡å™¨åªè¦ä¸€ç›´æ‰§è¡Œä¸»æœåŠ¡å™¨å‘æ¥çš„å‘½ä»¤å³å¯ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¿ƒè·³æ£€æµ‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å‘½ä»¤ä¼ æ’­é˜¶æ®µï¼Œä»æœåŠ¡å™¨é»˜è®¤ä»¥æ¯ç§’ä¸€æ¬¡çš„é¢‘ç‡å‘ä¸»æœåŠ¡å™¨å‘é€å‘½ä»¤ï¼š&lt;/p&gt;
&lt;p&gt;REPLCONF ACK &amp;lt;replication_offset&amp;gt;&lt;/p&gt;
&lt;p&gt;ä½œç”¨ï¼šæ£€æµ‹ä¸»æœåŠ¡å™¨çš„ç½‘ç»œè¿æ¥çŠ¶æ€ï¼›è¾…åŠ©å®ç°min-slavesé€‰é¡¹ï¼›æ£€æµ‹å‘½ä»¤ä¸¢å¤±ã€‚&lt;/p&gt;
&lt;p&gt;Redisçš„min-slaves-to-writeå’Œmin-slaves-max-lagä¸¤ä¸ªé€‰é¡¹é˜²æ­¢ä¸»æœåŠ¡å™¨åœ¨ä¸å®‰å…¨çš„æƒ…å†µä¸‹æ‰§è¡Œå†™å‘½ä»¤ã€‚&lt;/p&gt;
&lt;p&gt;å½“ä»æœåŠ¡å™¨å°äºmin-slaves-to-writeæˆ–è€…min-slaves-to-writeä¸ªæ•°é‡çš„æœåŠ¡å™¨å»¶è¿Ÿlagå€¼éƒ½å¤§äºç­‰äºmin-slaves-max-lagæ—¶ï¼Œä¸»æœåŠ¡å™¨å°†æ‹’ç»æ‰§è¡Œå†™å‘½ä»¤ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœå› ä¸ºç½‘ç»œæ•…éšœï¼Œä¸»æœåŠ¡å™¨ä¼ æ’­ç»™ä»æœåŠ¡å™¨çš„å†™å‘½ä»¤åŠè·¯ä¸¢å¤±ï¼Œé‚£ä¹ˆå½“ä»æœåŠ¡å™¨å‘ä¸»æœåŠ¡å™¨å‘é€REPLCONF ACKå‘½ä»¤æ—¶ï¼Œä¸»æœåŠ¡å™¨å°†å‘è§‰ä»æœåŠ¡å™¨å½“å‰çš„å¤åˆ¶åç§»é‡å°‘äºè‡ªå·±çš„åç§»é‡ï¼Œä¸»æœåŠ¡å™¨å°±ä¼šæ ¹æ®ä»æœåŠ¡å™¨æäº¤çš„å¤åˆ¶åç§»é‡ï¼Œåœ¨å¤åˆ¶ç§¯å‹ç¼“å†²åŒºé‡Œé¢æ‰¾åˆ°ä»æœåŠ¡å™¨ç¼ºå°‘çš„æ•°æ®ï¼Œå¹¶å°†è¿™äº›æ•°æ®é‡æ–°å‘é€ç»™ä»æœåŠ¡å™¨ã€‚&lt;/p&gt;

&lt;hr/&gt;

&lt;p&gt;æ¯å¤©å­¦ä¸€ç‚¹ï¼Œæ€»ä¼šæœ‰æ”¶è·ã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹ä¸€æ­¥æˆ‘ä»¬çœ‹ä¸‹Redisçš„Sentinel(å“¨å…µ)&lt;/p&gt;

&lt;p&gt;è¯´æ˜ï¼šå°Šé‡ä½œè€…çŸ¥è¯†äº§æƒï¼Œæ–‡ä¸­å†…å®¹å‚è€ƒã€ŠRedisè®¾è®¡ä¸å®ç°ã€‹ï¼Œä»…åœ¨æ­¤åšå­¦ä¹ ä¸å¤§å®¶åˆ†äº«ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/404258/202005/404258-20200521233901856-252437475.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

</description>
<pubDate>Thu, 21 May 2020 22:37:00 +0000</pubDate>
<dc:creator>æ¸©æš–å¦‚å¤ªé˜³</dc:creator>
<og:description>ä¸Šä¸€ç¯‡å†™äº†Rediså¤åˆ¶åŠŸèƒ½çš„ç®€å•åº”ç”¨ï¼Œä¸‹é¢æˆ‘ä»¬çœ‹ä¸‹Rediså¤åˆ¶åŠŸèƒ½çš„å®ç°è¿‡ç¨‹ã€‚ä¸‹é¢åŸºæœ¬ä¸Šæ˜¯ç†è®ºéƒ¨åˆ†ï¼Œæ¯ç‡¥ä¹å‘³ï¼Œä½†å¸Œæœ›å¤§å®¶èƒ½çœ‹çœ‹ï¼Œæ¯•ç«ŸçŸ¥è¯†ä¸éƒ½æ˜¯æ„Ÿå…´è¶£çš„.è€å¾—ä½å¯‚å¯,ç»å¾—èµ·è¯±æƒ‘,æ–¹èƒ½å®ˆå¾—ä½ç¹å ~.</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/xtt321/p/12934441.html</dc:identifier>
</item>
<item>
<title>æ‹¥æŠ±å¹¶è¡Œæµï¼Œæé«˜ç¨‹åºæ‰§è¡Œé€Ÿåº¦ - åé’æ˜¥æœŸçš„Keats</title>
<link>http://www.cnblogs.com/keatsCoder/p/12934394.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/keatsCoder/p/12934394.html</guid>
<description>&lt;h2 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;åœ¨ Java7 ä¹‹å‰ï¼Œå¦‚æœæƒ³è¦å¹¶è¡Œå¤„ç†ä¸€ä¸ªé›†åˆï¼Œæˆ‘ä»¬éœ€è¦ä»¥ä¸‹å‡ æ­¥ 1. æ‰‹åŠ¨åˆ†æˆå‡ éƒ¨åˆ† 2. ä¸ºæ¯éƒ¨åˆ†åˆ›å»ºçº¿ç¨‹ 3. åœ¨é€‚å½“çš„æ—¶å€™åˆå¹¶ã€‚å¹¶ä¸”è¿˜éœ€è¦å…³æ³¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´å…±äº«å˜é‡çš„ä¿®æ”¹é—®é¢˜ã€‚è€Œ Java8 ä¸ºæˆ‘ä»¬æä¾›äº†å¹¶è¡Œæµï¼Œå¯ä»¥ä¸€é”®å¼€å¯å¹¶è¡Œæ¨¡å¼ã€‚æ˜¯ä¸æ˜¯å¾ˆé…·å‘¢ï¼Ÿè®©æˆ‘ä»¬æ¥çœ‹çœ‹å§&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å£°æ˜ï¼šæœ¬æ–‡é¦–å‘äºåšå®¢å›­ï¼Œä½œè€…ï¼šåé’æ˜¥æœŸçš„Keatsï¼›åœ°å€ï¼š&lt;a href=&quot;https://www.cnblogs.com/keatsCoder/&quot;&gt;https://www.cnblogs.com/keatsCoder/&lt;/a&gt; è½¬è½½è¯·æ³¨æ˜ï¼Œè°¢è°¢ï¼&lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;å¹¶è¡Œæµ&quot;&gt;å¹¶è¡Œæµ&lt;/h2&gt;
&lt;h3 id=&quot;è®¤è¯†å’Œå¼€å¯å¹¶è¡Œæµ&quot;&gt;è®¤è¯†å’Œå¼€å¯å¹¶è¡Œæµ&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;ä»€ä¹ˆæ˜¯å¹¶è¡Œæµï¼š&lt;/strong&gt;å¹¶è¡Œæµå°±æ˜¯å°†ä¸€ä¸ªæµçš„å†…å®¹åˆ†æˆå¤šä¸ªæ•°æ®å—ï¼Œå¹¶ç”¨ä¸åŒçš„çº¿ç¨‹åˆ†åˆ«å¤„ç†æ¯ä¸ªä¸åŒæ•°æ®å—çš„æµã€‚ä¾‹å¦‚æœ‰è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚ï¼š&lt;/p&gt;
&lt;p&gt;æœ‰ä¸€ä¸ª List é›†åˆï¼Œè€Œ list ä¸­æ¯ä¸ª apple å¯¹è±¡åªæœ‰é‡é‡ï¼Œæˆ‘ä»¬ä¹ŸçŸ¥é“ apple çš„å•ä»·æ˜¯ 5å…ƒ/kgï¼Œç°åœ¨éœ€è¦è®¡ç®—å‡ºæ¯ä¸ª apple çš„å•ä»·ï¼Œä¼ ç»Ÿçš„æ–¹å¼æ˜¯è¿™æ ·ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;List&amp;lt;Apple&amp;gt; appleList = new ArrayList&amp;lt;&amp;gt;(); // å‡è£…æ•°æ®æ˜¯ä»åº“é‡ŒæŸ¥å‡ºæ¥çš„

for (Apple apple : appleList) {
    apple.setPrice(5.0 * apple.getWeight() / 1000);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬é€šè¿‡è¿­ä»£å™¨éå† list ä¸­çš„ apple å¯¹è±¡ï¼Œå®Œæˆäº†æ¯ä¸ª apple ä»·æ ¼çš„è®¡ç®—ã€‚è€Œè¿™ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(list.size()) éšç€ list å¤§å°çš„å¢åŠ ï¼Œè€—æ—¶ä¹Ÿä¼šè·Ÿç€çº¿æ€§å¢åŠ ã€‚å¹¶è¡Œæµ&lt;/p&gt;
&lt;p&gt;å¯ä»¥å¤§å¤§ç¼©çŸ­è¿™ä¸ªæ—¶é—´ã€‚å¹¶è¡Œæµå¤„ç†è¯¥é›†åˆçš„æ–¹æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;appleList.parallelStream().forEach(apple -&amp;gt; apple.setPrice(5.0 * apple.getWeight() / 1000));
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å’Œæ™®é€šæµçš„åŒºåˆ«æ˜¯è¿™é‡Œè°ƒç”¨çš„ &lt;code&gt;parallelStream()&lt;/code&gt; æ–¹æ³•ã€‚å½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡ stream.parallel() å°†æ™®é€šæµè½¬æ¢æˆå¹¶è¡Œæµã€‚å¹¶è¡Œæµä¹Ÿèƒ½é€šè¿‡ sequential() æ–¹æ³•è½¬æ¢ä¸ºé¡ºåºæµï¼Œä½†è¦æ³¨æ„ï¼š&lt;strong&gt;æµçš„å¹¶è¡Œå’Œé¡ºåºè½¬æ¢ä¸ä¼šå¯¹æµæœ¬èº«åšä»»ä½•å®é™…çš„å˜åŒ–ï¼Œä»…ä»…æ˜¯æ‰“äº†ä¸ªæ ‡è®°è€Œå·²ã€‚å¹¶ä¸”åœ¨ä¸€æ¡æµæ°´çº¿ä¸Šå¯¹æµè¿›è¡Œå¤šæ¬¡å¹¶è¡Œ / é¡ºåºçš„è½¬æ¢ï¼Œç”Ÿæ•ˆçš„æ˜¯æœ€åä¸€æ¬¡çš„æ–¹æ³•è°ƒç”¨&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¹¶è¡Œæµå¦‚æ­¤æ–¹ä¾¿ï¼Œå®ƒçš„çº¿ç¨‹ä»é‚£é‡Œæ¥å‘¢ï¼Ÿæœ‰å¤šå°‘ä¸ªï¼Ÿæ€ä¹ˆé…ç½®å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å¹¶è¡Œæµå†…éƒ¨ä½¿ç”¨äº†é»˜è®¤çš„ ForkJoinPool çº¿ç¨‹æ± ã€‚&lt;strong&gt;é»˜è®¤çš„çº¿ç¨‹æ•°é‡å°±æ˜¯å¤„ç†å™¨çš„æ ¸å¿ƒæ•°&lt;/strong&gt;ï¼Œè€Œé…ç½®ç³»ç»Ÿæ ¸å¿ƒå±æ€§ï¼š java.util.concurrent.ForkJoinPool.common.parallelism å¯ä»¥æ”¹å˜çº¿ç¨‹æ± å¤§å°ã€‚ä¸è¿‡è¯¥å€¼æ˜¯å…¨å±€å˜é‡ã€‚æ”¹å˜ä»–ä¼šå½±å“æ‰€æœ‰å¹¶è¡Œæµã€‚ç›®å‰è¿˜æ— æ³•ä¸ºæ¯ä¸ªæµé…ç½®ä¸“å±çš„çº¿ç¨‹æ•°ã€‚ä¸€èˆ¬æ¥è¯´é‡‡ç”¨å¤„ç†å™¨æ ¸å¿ƒæ•°æ˜¯ä¸é”™çš„é€‰æ‹©&lt;/p&gt;
&lt;h3 id=&quot;æµ‹è¯•å¹¶è¡Œæµçš„æ€§èƒ½&quot;&gt;æµ‹è¯•å¹¶è¡Œæµçš„æ€§èƒ½&lt;/h3&gt;
&lt;p&gt;ä¸ºäº†æ›´å®¹æ˜“çš„æµ‹è¯•æ€§èƒ½ï¼Œæˆ‘ä»¬åœ¨æ¯æ¬¡è®¡ç®—å®Œè‹¹æœä»·æ ¼åï¼Œè®©çº¿ç¨‹ç¡ 1sï¼Œè¡¨ç¤ºåœ¨è¿™æœŸé—´æ‰§è¡Œäº†å…¶ä»– IO ç›¸å…³çš„æ“ä½œï¼Œå¹¶è¾“å‡ºç¨‹åºæ‰§è¡Œè€—æ—¶,é¡ºåºæ‰§è¡Œçš„è€—æ—¶ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public static void main(String[] args) throws InterruptedException {
    List&amp;lt;Apple&amp;gt; appleList = initAppleList();

    Date begin = new Date();
    for (Apple apple : appleList) {
        apple.setPrice(5.0 * apple.getWeight() / 1000);
        Thread.sleep(1000);
    }
    Date end = new Date();
    log.info(&quot;è‹¹æœæ•°é‡ï¼š{}ä¸ª, è€—æ—¶ï¼š{}s&quot;, appleList.size(), (end.getTime() - begin.getTime()) /1000);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1654189/202005/1654189-20200521232706449-1060282129.jpg&quot; alt=&quot;Snipaste_2020-05-21_21-49-44&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¹¶è¡Œç‰ˆæœ¬&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;List&amp;lt;Apple&amp;gt; appleList = initAppleList();

Date begin = new Date();
appleList.parallelStream().forEach(apple -&amp;gt;
                                   {
                                       apple.setPrice(5.0 * apple.getWeight() / 1000);
                                       try {
                                           Thread.sleep(1000);
                                       } catch (InterruptedException e) {
                                           e.printStackTrace();
                                       }
                                   }
                                  );
Date end = new Date();
log.info(&quot;è‹¹æœæ•°é‡ï¼š{}ä¸ª, è€—æ—¶ï¼š{}s&quot;, appleList.size(), (end.getTime() - begin.getTime()) /1000);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è€—æ—¶æƒ…å†µ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1654189/202005/1654189-20200521232706020-1662215086.jpg&quot; alt=&quot;Snipaste_2020-05-21_22-16-08&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è·Ÿæˆ‘ä»¬çš„é¢„æµ‹ä¸€è‡´ï¼Œæˆ‘çš„ç”µè„‘æ˜¯ å››æ ¸I5 å¤„ç†å™¨ï¼Œå¼€å¯å¹¶è¡Œåå››ä¸ªå¤„ç†å™¨æ¯äººæ‰§è¡Œä¸€ä¸ªçº¿ç¨‹ï¼Œæœ€å 1s å®Œæˆäº†ä»»åŠ¡ï¼&lt;/p&gt;
&lt;h3 id=&quot;å¹¶è¡Œæµå¯ä»¥éšä¾¿ç”¨å—ï¼Ÿ&quot;&gt;å¹¶è¡Œæµå¯ä»¥éšä¾¿ç”¨å—ï¼Ÿ&lt;/h3&gt;
&lt;h4 id=&quot;å¯æ‹†åˆ†æ€§å½±å“æµçš„é€Ÿåº¦&quot;&gt;å¯æ‹†åˆ†æ€§å½±å“æµçš„é€Ÿåº¦&lt;/h4&gt;
&lt;p&gt;é€šè¿‡ä¸Šé¢çš„æµ‹è¯•ï¼Œæœ‰çš„äººä¼šè½»æ˜“å¾—åˆ°ä¸€ä¸ªç»“è®ºï¼šå¹¶è¡Œæµå¾ˆå¿«ï¼Œæˆ‘ä»¬å¯ä»¥å®Œå…¨æ”¾å¼ƒ foreach/fori/iter å¤–éƒ¨è¿­ä»£ï¼Œä½¿ç”¨ Stream æä¾›çš„å†…éƒ¨è¿­ä»£æ¥å®ç°äº†ã€‚äº‹å®çœŸçš„æ˜¯è¿™æ ·å—ï¼Ÿå¹¶è¡ŒæµçœŸçš„å¦‚æ­¤å®Œç¾å—ï¼Ÿç­”æ¡ˆå½“ç„¶æ˜¯å¦å®šçš„ã€‚å¤§å®¶å¯ä»¥å¤åˆ¶ä¸‹é¢çš„ä»£ç ï¼Œåœ¨è‡ªå·±çš„ç”µè„‘ä¸Šæµ‹è¯•ã€‚æµ‹è¯•å®Œåå¯ä»¥å‘ç°ï¼Œå¹¶è¡Œæµå¹¶ä¸æ€»æ˜¯æœ€å¿«çš„å¤„ç†æ–¹å¼ã€‚&lt;/p&gt;
&lt;ol readability=&quot;1.5&quot;&gt;&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;å¯¹äº iterate æ–¹æ³•æ¥å¤„ç†çš„å‰ n ä¸ªæ•°å­—æ¥è¯´ï¼Œä¸ç®¡å¹¶è¡Œä¸å¦ï¼Œå®ƒæ€»æ˜¯æ…¢äºå¾ªç¯çš„ï¼Œéå¹¶è¡Œç‰ˆæœ¬å¯ä»¥ç†è§£ä¸ºæµåŒ–æ“ä½œæ²¡æœ‰å¾ªç¯æ›´åå‘åº•å±‚å¯¼è‡´çš„æ…¢ã€‚å¯å¹¶è¡Œç‰ˆæœ¬æ˜¯ä¸ºä»€ä¹ˆæ…¢å‘¢ï¼Ÿè¿™é‡Œæœ‰ä¸¤ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹ï¼š&lt;/p&gt;
&lt;ol readability=&quot;1.5&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;iterate ç”Ÿæˆçš„æ˜¯è£…ç®±çš„å¯¹è±¡ï¼Œå¿…é¡»æ‹†ç®±æˆæ•°å­—æ‰èƒ½æ±‚å’Œ&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;4&quot;&gt;
&lt;p&gt;æˆ‘ä»¬å¾ˆéš¾æŠŠ iterate åˆ†æˆå¤šä¸ªç‹¬ç«‹çš„å—æ¥å¹¶è¡Œæ‰§è¡Œ&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªé—®é¢˜å¾ˆæœ‰æ„æ€ï¼Œæˆ‘ä»¬å¿…é¡»æ„è¯†åˆ°æŸäº›æµæ“ä½œæ¯”å…¶ä»–æ“ä½œæ›´å®¹æ˜“å¹¶è¡ŒåŒ–ã€‚å¯¹äº iterate æ¥è¯´ï¼Œæ¯æ¬¡åº”ç”¨è¿™ä¸ªå‡½æ•°éƒ½è¦ä¾èµ–äºå‰ä¸€æ¬¡åº”ç”¨çš„ç»“æœã€‚å› æ­¤åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸ä»…ä¸èƒ½æœ‰æ•ˆçš„å°†æµåˆ’åˆ†æˆå°å—å¤„ç†ã€‚åè€Œè¿˜å› ä¸ºå¹¶è¡ŒåŒ–å†æ¬¡å¢åŠ äº†å¼€æ”¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;è€Œå¯¹äº LongStream.rangeClosed() æ–¹æ³•æ¥è¯´ï¼Œå°±ä¸å­˜åœ¨ iterate çš„ç¬¬ä¸¤ä¸ªç—›ç‚¹äº†ã€‚å®ƒç”Ÿæˆçš„æ˜¯åŸºæœ¬ç±»å‹çš„å€¼ï¼Œä¸ç”¨æ‹†è£…ç®±æ“ä½œï¼Œå¦å¤–å®ƒå¯ä»¥ç›´æ¥å°†è¦ç”Ÿæˆçš„æ•°å­— 1 - n æ‹†åˆ†æˆ 1 - n/4ï¼Œ 1n/4 - 2n/4ï¼Œ ... 3n/4 - n è¿™æ ·å››éƒ¨åˆ†ã€‚å› æ­¤å¹¶è¡ŒçŠ¶æ€ä¸‹çš„ rangeClosed() æ˜¯å¿«äº for å¾ªç¯å¤–éƒ¨è¿­ä»£çš„&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;package lambdasinaction.chap7;

import java.util.stream.*;

public class ParallelStreams {

    public static long iterativeSum(long n) {
        long result = 0;
        for (long i = 0; i &amp;lt;= n; i++) {
            result += i;
        }
        return result;
    }

    public static long sequentialSum(long n) {
        return Stream.iterate(1L, i -&amp;gt; i + 1).limit(n).reduce(Long::sum).get();
    }

    public static long parallelSum(long n) {
        return Stream.iterate(1L, i -&amp;gt; i + 1).limit(n).parallel().reduce(Long::sum).get();
    }

    public static long rangedSum(long n) {
        return LongStream.rangeClosed(1, n).reduce(Long::sum).getAsLong();
    }

    public static long parallelRangedSum(long n) {
        return LongStream.rangeClosed(1, n).parallel().reduce(Long::sum).getAsLong();
    }

}

&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;package lambdasinaction.chap7;

import java.util.concurrent.*;
import java.util.function.*;

public class ParallelStreamsHarness {

    public static final ForkJoinPool FORK_JOIN_POOL = new ForkJoinPool();

    public static void main(String[] args) {
        System.out.println(&quot;Iterative Sum done in: &quot; + measurePerf(ParallelStreams::iterativeSum, 10_000_000L) + &quot; msecs&quot;);
        System.out.println(&quot;Sequential Sum done in: &quot; + measurePerf(ParallelStreams::sequentialSum, 10_000_000L) + &quot; msecs&quot;);
        System.out.println(&quot;Parallel forkJoinSum done in: &quot; + measurePerf(ParallelStreams::parallelSum, 10_000_000L) + &quot; msecs&quot; );
        System.out.println(&quot;Range forkJoinSum done in: &quot; + measurePerf(ParallelStreams::rangedSum, 10_000_000L) + &quot; msecs&quot;);
        System.out.println(&quot;Parallel range forkJoinSum done in: &quot; + measurePerf(ParallelStreams::parallelRangedSum, 10_000_000L) + &quot; msecs&quot; );
    }

    public static &amp;lt;T, R&amp;gt; long measurePerf(Function&amp;lt;T, R&amp;gt; f, T input) {
        long fastest = Long.MAX_VALUE;
        for (int i = 0; i &amp;lt; 10; i++) {
            long start = System.nanoTime();
            R result = f.apply(input);
            long duration = (System.nanoTime() - start) / 1_000_000;
            System.out.println(&quot;Result: &quot; + result);
            if (duration &amp;lt; fastest) fastest = duration;
        }
        return fastest;
    }
}

&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;å…±äº«å˜é‡ä¿®æ”¹çš„é—®é¢˜&quot;&gt;å…±äº«å˜é‡ä¿®æ”¹çš„é—®é¢˜&lt;/h4&gt;
&lt;p&gt;å¹¶è¡Œæµè™½ç„¶è½»æ˜“çš„å®ç°äº†å¤šçº¿ç¨‹ï¼Œä½†æ˜¯ä»æœªè§£å†³å¤šçº¿ç¨‹ä¸­å…±äº«å˜é‡çš„ä¿®æ”¹é—®é¢˜ã€‚ä¸‹é¢ä»£ç ä¸­å­˜åœ¨å…±äº«å˜é‡ totalï¼Œåˆ†åˆ«ä½¿ç”¨é¡ºåºæµå’Œå¹¶è¡Œæµè®¡ç®—å‰nä¸ªè‡ªç„¶æ•°çš„å’Œ&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public static long sideEffectSum(long n) {
    Accumulator accumulator = new Accumulator();
    LongStream.rangeClosed(1, n).forEach(accumulator::add);
    return accumulator.total;
}

public static long sideEffectParallelSum(long n) {
    Accumulator accumulator = new Accumulator();
    LongStream.rangeClosed(1, n).parallel().forEach(accumulator::add);
    return accumulator.total;
}

public static class Accumulator {
    private long total = 0;

    public void add(long value) {
        total += value;
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é¡ºåºæ‰§è¡Œæ¯æ¬¡è¾“å‡ºçš„ç»“æœéƒ½æ˜¯ï¼š50000005000000ï¼Œè€Œå¹¶è¡Œæ‰§è¡Œçš„ç»“æœå´äº”èŠ±å…«é—¨äº†ã€‚è¿™æ˜¯å› ä¸ºæ¯æ¬¡è®¿é—® totle éƒ½ä¼šå­˜åœ¨æ•°æ®ç«äº‰ï¼Œå…³äºæ•°æ®ç«äº‰çš„åŸå› ï¼Œå¤§å®¶å¯ä»¥çœ‹çœ‹å…³äº volatile çš„åšå®¢ã€‚å› æ­¤å½“ä»£ç ä¸­å­˜åœ¨ä¿®æ”¹å…±äº«å˜é‡çš„æ“ä½œæ—¶ï¼Œæ˜¯ä¸å»ºè®®ä½¿ç”¨å¹¶è¡Œæµçš„ã€‚&lt;/p&gt;
&lt;h4 id=&quot;å¹¶è¡Œæµçš„ä½¿ç”¨æ³¨æ„&quot;&gt;å¹¶è¡Œæµçš„ä½¿ç”¨æ³¨æ„&lt;/h4&gt;
&lt;p&gt;åœ¨å¹¶è¡Œæµçš„ä½¿ç”¨ä¸Šæœ‰ä¸‹é¢å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š&lt;/p&gt;
&lt;ul readability=&quot;5&quot;&gt;&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;å°½é‡ä½¿ç”¨ LongStream / IntStream / DoubleStream ç­‰åŸå§‹æ•°æ®æµä»£æ›¿ Stream æ¥å¤„ç†æ•°å­—ï¼Œä»¥é¿å…é¢‘ç¹æ‹†è£…ç®±å¸¦æ¥çš„é¢å¤–å¼€é”€&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;6&quot;&gt;
&lt;p&gt;è¦è€ƒè™‘æµçš„æ“ä½œæµæ°´çº¿çš„æ€»è®¡ç®—æˆæœ¬ï¼Œå‡è®¾ N æ˜¯è¦æ“ä½œçš„ä»»åŠ¡æ€»æ•°ï¼ŒQ æ˜¯æ¯æ¬¡æ“ä½œçš„æ—¶é—´ã€‚N * Q å°±æ˜¯æ“ä½œçš„æ€»æ—¶é—´ï¼ŒQ å€¼è¶Šå¤§å°±æ„å‘³ç€ä½¿ç”¨å¹¶è¡Œæµå¸¦æ¥æ”¶ç›Šçš„å¯èƒ½æ€§è¶Šå¤§&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼šå‰ç«¯ä¼ æ¥å‡ ç§ç±»å‹çš„èµ„æºï¼Œéœ€è¦å­˜å‚¨åˆ°æ•°æ®åº“ã€‚æ¯ç§èµ„æºå¯¹åº”ä¸åŒçš„è¡¨ã€‚æˆ‘ä»¬å¯ä»¥è§†ä½œç±»å‹æ•°ä¸º Nï¼Œå­˜å‚¨æ•°æ®åº“çš„ç½‘ç»œè€—æ—¶ + æ’å…¥æ“ä½œè€—æ—¶ä¸º Qã€‚ä¸€èˆ¬æƒ…å†µä¸‹ç½‘ç»œè€—æ—¶éƒ½æ˜¯æ¯”è¾ƒå¤§çš„ã€‚å› æ­¤è¯¥æ“ä½œå°±æ¯”è¾ƒé€‚åˆå¹¶è¡Œå¤„ç†ã€‚å½“ç„¶å½“ç±»å‹æ•°ç›®å¤§äºæ ¸å¿ƒæ•°æ—¶ï¼Œè¯¥æ“ä½œçš„æ€§èƒ½æå‡å°±ä¼šæ‰“ä¸€å®šçš„æŠ˜æ‰£äº†ã€‚æ›´å¥½çš„ä¼˜åŒ–æ–¹æ³•åœ¨æ—¥åçš„åšå®¢ä¼šä¸ºå¤§å®¶å¥‰ä¸Š&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;å¯¹äºè¾ƒå°‘çš„æ•°æ®é‡ï¼Œä¸å»ºè®®ä½¿ç”¨å¹¶è¡Œæµ&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;å®¹æ˜“æ‹†åˆ†æˆå—çš„æµæ•°æ®ï¼Œå»ºè®®ä½¿ç”¨å¹¶è¡Œæµ&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„é›†åˆæ¡†æ¶å¯¹åº”æµçš„å¯æ‹†åˆ†æ€§èƒ½è¡¨&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;æº&lt;/th&gt;
&lt;th&gt;å¯æ‹†åˆ†æ€§&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;ArrayList&lt;/td&gt;
&lt;td&gt;æä½³&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;LinkedList&lt;/td&gt;
&lt;td&gt;å·®&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;IntStream.range&lt;/td&gt;
&lt;td&gt;æä½³&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Stream.iterate&lt;/td&gt;
&lt;td&gt;å·®&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;HashSet&lt;/td&gt;
&lt;td&gt;å¥½&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;TreeSet&lt;/td&gt;
&lt;td&gt;å¥½&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;span&gt;ç å­—ä¸æ˜“ï¼Œå¦‚æœä½ è§‰å¾—è¯»å®Œä»¥åæœ‰æ”¶è·ï¼Œä¸å¦¨ç‚¹ä¸ªæ¨èè®©æ›´å¤šçš„äººçœ‹åˆ°å§ï¼&lt;/span&gt;&lt;/p&gt;
</description>
<pubDate>Thu, 21 May 2020 15:28:00 +0000</pubDate>
<dc:creator>åé’æ˜¥æœŸçš„Keats</dc:creator>
<og:description>å‰è¨€ åœ¨ Java7 ä¹‹å‰ï¼Œå¦‚æœæƒ³è¦å¹¶è¡Œå¤„ç†ä¸€ä¸ªé›†åˆï¼Œæˆ‘ä»¬éœ€è¦ä»¥ä¸‹å‡ æ­¥ 1. æ‰‹åŠ¨åˆ†æˆå‡ éƒ¨åˆ† 2. ä¸ºæ¯éƒ¨åˆ†åˆ›å»ºçº¿ç¨‹ 3. åœ¨é€‚å½“çš„æ—¶å€™åˆå¹¶ã€‚å¹¶ä¸”è¿˜éœ€è¦å…³æ³¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´å…±äº«å˜é‡çš„ä¿®æ”¹é—®é¢˜ã€‚è€Œ Java</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/keatsCoder/p/12934394.html</dc:identifier>
</item>
<item>
<title>ã€K8Sã€‘åŸºäºDocker+K8S+GitLab/SVN+Jenkins+Harboræ­å»ºæŒç»­é›†æˆäº¤ä»˜ç¯å¢ƒï¼ˆç¯å¢ƒæ­å»ºç¯‡ï¼‰ - å†°æ²³å›¢é˜Ÿ</title>
<link>http://www.cnblogs.com/binghe001/p/12934192.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/binghe001/p/12934192.html</guid>
<description>&lt;h2 id=&quot;å†™åœ¨å‰é¢&quot;&gt;å†™åœ¨å‰é¢&lt;/h2&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;æœ€è¿‘åœ¨ K8S 1.18.2 ç‰ˆæœ¬çš„é›†ç¾¤ä¸Šæ­å»ºDevOpsç¯å¢ƒï¼ŒæœŸé—´é‡åˆ°äº†å„ç§å‘ã€‚ç›®å‰ï¼Œæ­å»ºç¯å¢ƒçš„è¿‡ç¨‹ä¸­å‡ºç°çš„å„ç§å‘å‡å·²è¢«å¡«å¹³ï¼Œç‰¹æ­¤è®°å½•ï¼Œå¹¶åˆ†äº«ç»™å¤§å®¶ï¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;æœåŠ¡å™¨è§„åˆ’&quot;&gt;æœåŠ¡å™¨è§„åˆ’&lt;/h2&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;IP&lt;/th&gt;
&lt;th&gt;ä¸»æœºå&lt;/th&gt;
&lt;th&gt;èŠ‚ç‚¹&lt;/th&gt;
&lt;th&gt;æ“ä½œç³»ç»Ÿ&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;192.168.175.101&lt;/td&gt;
&lt;td&gt;binghe101&lt;/td&gt;
&lt;td&gt;K8S Master&lt;/td&gt;
&lt;td&gt;CentOS 8.0.1905&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;192.168.175.102&lt;/td&gt;
&lt;td&gt;binghe102&lt;/td&gt;
&lt;td&gt;K8S Worker&lt;/td&gt;
&lt;td&gt;CentOS 8.0.1905&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;192.168.175.103&lt;/td&gt;
&lt;td&gt;binghe103&lt;/td&gt;
&lt;td&gt;K8S Worker&lt;/td&gt;
&lt;td&gt;CentOS 8.0.1905&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h2 id=&quot;å®‰è£…ç¯å¢ƒç‰ˆæœ¬&quot;&gt;å®‰è£…ç¯å¢ƒç‰ˆæœ¬&lt;/h2&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;è½¯ä»¶åç§°&lt;/th&gt;
&lt;th&gt;è½¯ä»¶ç‰ˆæœ¬&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody readability=&quot;6.5&quot;&gt;&lt;tr&gt;&lt;td&gt;Docker&lt;/td&gt;
&lt;td&gt;19.03.8&lt;/td&gt;
&lt;td&gt;æä¾›å®¹å™¨ç¯å¢ƒ&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;docker-compose&lt;/td&gt;
&lt;td&gt;1.25.5&lt;/td&gt;
&lt;td&gt;å®šä¹‰å’Œè¿è¡Œç”±å¤šä¸ªå®¹å™¨ç»„æˆçš„åº”ç”¨&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td&gt;K8S&lt;/td&gt;
&lt;td&gt;1.8.12&lt;/td&gt;
&lt;td&gt;æ˜¯ä¸€ä¸ªå¼€æºçš„ï¼Œç”¨äºç®¡ç†äº‘å¹³å°ä¸­å¤šä¸ªä¸»æœºä¸Šçš„å®¹å™¨åŒ–çš„åº”ç”¨ï¼ŒKubernetesçš„ç›®æ ‡æ˜¯è®©éƒ¨ç½²å®¹å™¨åŒ–çš„åº”ç”¨ç®€å•å¹¶ä¸”é«˜æ•ˆï¼ˆpowerfulï¼‰,Kubernetesæä¾›äº†åº”ç”¨éƒ¨ç½²ï¼Œè§„åˆ’ï¼Œæ›´æ–°ï¼Œç»´æŠ¤çš„ä¸€ç§æœºåˆ¶ã€‚&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;GitLab&lt;/td&gt;
&lt;td&gt;12.1.6&lt;/td&gt;
&lt;td&gt;ä»£ç ä»“åº“ï¼ˆä¸SVNå®‰è£…ä¸€ä¸ªå³å¯ï¼‰&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Harbor&lt;/td&gt;
&lt;td&gt;1.10.2&lt;/td&gt;
&lt;td&gt;ç§æœ‰é•œåƒä»“åº“&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Jenkins&lt;/td&gt;
&lt;td&gt;2.89.3&lt;/td&gt;
&lt;td&gt;æŒç»­é›†æˆäº¤ä»˜&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;SVN&lt;/td&gt;
&lt;td&gt;1.10.2&lt;/td&gt;
&lt;td&gt;ä»£ç ä»“åº“ï¼ˆä¸GitLabå®‰è£…ä¸€ä¸ªå³å¯ï¼‰&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;JDK&lt;/td&gt;
&lt;td&gt;1.8.0_202&lt;/td&gt;
&lt;td&gt;Javaè¿è¡ŒåŸºç¡€ç¯å¢ƒ&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;maven&lt;/td&gt;
&lt;td&gt;3.6.3&lt;/td&gt;
&lt;td&gt;æ„å»ºé¡¹ç›®çš„åŸºç¡€æ’ä»¶&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h2 id=&quot;æœåŠ¡å™¨å…å¯†ç ç™»å½•&quot;&gt;æœåŠ¡å™¨å…å¯†ç ç™»å½•&lt;/h2&gt;
&lt;p&gt;åœ¨å„æœåŠ¡å™¨æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;ssh-keygen -t rsa
cat ~/.ssh/id_rsa.pub &amp;gt;&amp;gt; ~/.ssh/authorized_keys 
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å°†binghe102å’Œbinghe103æœåŠ¡å™¨ä¸Šçš„id_rsa.pubæ–‡ä»¶å¤åˆ¶åˆ°binghe101æœåŠ¡å™¨ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@binghe102 ~]# scp .ssh/id_rsa.pub binghe101:/root/.ssh/102
[root@binghe103 ~]# scp .ssh/id_rsa.pub binghe101:/root/.ssh/103
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨binghe101æœåŠ¡å™¨ä¸Šæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;cat ~/.ssh/102 &amp;gt;&amp;gt; ~/.ssh/authorized_keys
cat ~/.ssh/103 &amp;gt;&amp;gt; ~/.ssh/authorized_keys
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç„¶åå°†authorized_keysæ–‡ä»¶åˆ†åˆ«å¤åˆ¶åˆ°binghe102ã€binghe103æœåŠ¡å™¨ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@binghe101 ~]# scp .ssh/authorized_keys binghe102:/root/.ssh/authorized_keys
[root@binghe101 ~]# scp .ssh/authorized_keys binghe103:/root/.ssh/authorized_keys
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åˆ é™¤binghe101èŠ‚ç‚¹ä¸Š~/.sshä¸‹çš„102å’Œ103æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;rm ~/.ssh/102
rm ~/.ssh/103
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;å®‰è£…jdk&quot;&gt;å®‰è£…JDK&lt;/h2&gt;
&lt;p&gt;éœ€è¦åœ¨æ¯å°æœåŠ¡å™¨ä¸Šå®‰è£…JDKç¯å¢ƒã€‚åˆ°Oracleå®˜æ–¹ä¸‹è½½JDKï¼Œæˆ‘è¿™é‡Œä¸‹çš„JDKç‰ˆæœ¬ä¸º1.8.0_202ï¼Œä¸‹è½½åè§£å‹å¹¶é…ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;tar -zxvf jdk1.8.0_212.tar.gz
mv jdk1.8.0_212 /usr/local
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œé…ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;vim /etc/profile
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é…ç½®é¡¹å†…å®¹å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;JAVA_HOME=/usr/local/jdk1.8.0_212
CLASS_PATH=.:$JAVA_HOME/lib
PATH=$JAVA_HOME/bin:$PATH
export JAVA_HOME CLASS_PATH PATH
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ¥ä¸‹æ¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ä½¿ç³»ç»Ÿç¯å¢ƒå˜é‡ç”Ÿæ•ˆã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;source /etc/profile
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;å®‰è£…maven&quot;&gt;å®‰è£…Maven&lt;/h2&gt;
&lt;p&gt;åˆ°Apacheå®˜æ–¹ä¸‹è½½Mavenï¼Œæˆ‘è¿™é‡Œä¸‹è½½çš„Mavenç‰ˆæœ¬ä¸º3.6.3ã€‚ä¸‹è½½åç›´æ¥è§£å‹å¹¶é…ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;tar -zxvf apache-maven-3.6.3-bin.tar.gz
mv apache-maven-3.6.3-bin /usr/local
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œå°±æ˜¯é…ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;vim /etc/profile
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é…ç½®é¡¹å†…å®¹å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;JAVA_HOME=/usr/local/jdk1.8.0_212
MAVEN_HOME=/usr/local/apache-maven-3.6.3-bin
CLASS_PATH=.:$JAVA_HOME/lib
PATH=$MAVEN_HOME/bin:$JAVA_HOME/bin:$PATH
export JAVA_HOME CLASS_PATH MAVEN_HOME PATH
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ¥ä¸‹æ¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ä½¿ç³»ç»Ÿç¯å¢ƒå˜é‡ç”Ÿæ•ˆã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;source /etc/profile
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œä¿®æ”¹Mavençš„é…ç½®æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-xml&quot;&gt;&amp;lt;localRepository&amp;gt;/home/repository&amp;lt;/localRepository&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å°†Mavenä¸‹è½½çš„JaråŒ…å­˜å‚¨åˆ°/home/repositoryç›®å½•ä¸‹ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å®‰è£…dockerç¯å¢ƒ&quot;&gt;å®‰è£…Dockerç¯å¢ƒ&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;æœ¬æ–‡æ¡£åŸºäºDocker 19.03.8 ç‰ˆæœ¬æ­å»ºDockerç¯å¢ƒã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨æ‰€æœ‰æœåŠ¡å™¨ä¸Šåˆ›å»ºinstall_docker.shè„šæœ¬ï¼Œè„šæœ¬å†…å®¹å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;export REGISTRY_MIRROR=https://registry.cn-hangzhou.aliyuncs.com
dnf install yum*
yum install -y yum-utils device-mapper-persistent-data lvm2
yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
dnf install https://mirrors.aliyun.com/docker-ce/linux/centos/7/x86_64/stable/Packages/containerd.io-1.2.13-3.1.el7.x86_64.rpm
yum install -y docker-ce-19.03.8 docker-ce-cli-19.03.8
systemctl enable docker.service
systemctl start docker.service
docker version
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨æ¯å°æœåŠ¡å™¨ä¸Šä¸ºinstall_docker.shè„šæœ¬èµ‹äºˆå¯æ‰§è¡Œæƒé™ï¼Œå¹¶æ‰§è¡Œè„šæœ¬å³å¯ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å®‰è£…docker-compose&quot;&gt;å®‰è£…docker-compose&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼šåœ¨æ¯å°æœåŠ¡å™¨ä¸Šå®‰è£…docker-compose&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.ä¸‹è½½docker-composeæ–‡ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;curl -L https://github.com/docker/compose/releases/download/1.25.5/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose 
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;2ä¸ºdocker-composeæ–‡ä»¶èµ‹äºˆå¯æ‰§è¡Œæƒé™&quot;&gt;2.ä¸ºdocker-composeæ–‡ä»¶èµ‹äºˆå¯æ‰§è¡Œæƒé™&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;chmod a+x /usr/local/bin/docker-compose
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;3æŸ¥çœ‹docker-composeç‰ˆæœ¬&quot;&gt;3.æŸ¥çœ‹docker-composeç‰ˆæœ¬&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@binghe ~]# docker-compose version
docker-compose version 1.25.5, build 8a1c60f6
docker-py version: 4.1.0
CPython version: 3.7.5
OpenSSL version: OpenSSL 1.1.0l  10 Sep 2019
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;å®‰è£…k8sé›†ç¾¤ç¯å¢ƒ&quot;&gt;å®‰è£…K8Sé›†ç¾¤ç¯å¢ƒ&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;æœ¬æ–‡æ¡£åŸºäºK8S 1.8.12ç‰ˆæœ¬æ¥æ­å»ºK8Sé›†ç¾¤&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;å®‰è£…k8såŸºç¡€ç¯å¢ƒ&quot;&gt;å®‰è£…K8SåŸºç¡€ç¯å¢ƒ&lt;/h3&gt;
&lt;p&gt;åœ¨æ‰€æœ‰æœåŠ¡å™¨ä¸Šåˆ›å»ºinstall_k8s.shè„šæœ¬æ–‡ä»¶ï¼Œè„šæœ¬æ–‡ä»¶çš„å†…å®¹å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;#é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿå™¨
mkdir -p /etc/docker
tee /etc/docker/daemon.json &amp;lt;&amp;lt;-'EOF'
{
  &quot;registry-mirrors&quot;: [&quot;https://zz3sblpi.mirror.aliyuncs.com&quot;]
}
EOF
systemctl daemon-reload
systemctl restart docker

#å®‰è£…nfs-utils
yum install -y nfs-utils
yum install -y wget

#å¯åŠ¨nfs-server
systemctl start nfs-server
systemctl enable nfs-server

#å…³é—­é˜²ç«å¢™
systemctl stop firewalld
systemctl disable firewalld

#å…³é—­SeLinux
setenforce 0
sed -i &quot;s/SELINUX=enforcing/SELINUX=disabled/g&quot; /etc/selinux/config

# å…³é—­ swap
swapoff -a
yes | cp /etc/fstab /etc/fstab_bak
cat /etc/fstab_bak |grep -v swap &amp;gt; /etc/fstab

#ä¿®æ”¹ /etc/sysctl.conf
# å¦‚æœæœ‰é…ç½®ï¼Œåˆ™ä¿®æ”¹
sed -i &quot;s#^net.ipv4.ip_forward.*#net.ipv4.ip_forward=1#g&quot;  /etc/sysctl.conf
sed -i &quot;s#^net.bridge.bridge-nf-call-ip6tables.*#net.bridge.bridge-nf-call-ip6tables=1#g&quot;  /etc/sysctl.conf
sed -i &quot;s#^net.bridge.bridge-nf-call-iptables.*#net.bridge.bridge-nf-call-iptables=1#g&quot;  /etc/sysctl.conf
sed -i &quot;s#^net.ipv6.conf.all.disable_ipv6.*#net.ipv6.conf.all.disable_ipv6=1#g&quot;  /etc/sysctl.conf
sed -i &quot;s#^net.ipv6.conf.default.disable_ipv6.*#net.ipv6.conf.default.disable_ipv6=1#g&quot;  /etc/sysctl.conf
sed -i &quot;s#^net.ipv6.conf.lo.disable_ipv6.*#net.ipv6.conf.lo.disable_ipv6=1#g&quot;  /etc/sysctl.conf
sed -i &quot;s#^net.ipv6.conf.all.forwarding.*#net.ipv6.conf.all.forwarding=1#g&quot;  /etc/sysctl.conf
# å¯èƒ½æ²¡æœ‰ï¼Œè¿½åŠ 
echo &quot;net.ipv4.ip_forward = 1&quot; &amp;gt;&amp;gt; /etc/sysctl.conf
echo &quot;net.bridge.bridge-nf-call-ip6tables = 1&quot; &amp;gt;&amp;gt; /etc/sysctl.conf
echo &quot;net.bridge.bridge-nf-call-iptables = 1&quot; &amp;gt;&amp;gt; /etc/sysctl.conf
echo &quot;net.ipv6.conf.all.disable_ipv6 = 1&quot; &amp;gt;&amp;gt; /etc/sysctl.conf
echo &quot;net.ipv6.conf.default.disable_ipv6 = 1&quot; &amp;gt;&amp;gt; /etc/sysctl.conf
echo &quot;net.ipv6.conf.lo.disable_ipv6 = 1&quot; &amp;gt;&amp;gt; /etc/sysctl.conf
echo &quot;net.ipv6.conf.all.forwarding = 1&quot;  &amp;gt;&amp;gt; /etc/sysctl.conf
# æ‰§è¡Œå‘½ä»¤ä»¥åº”ç”¨
sysctl -p

# é…ç½®K8Sçš„yumæº
cat &amp;lt;&amp;lt;EOF &amp;gt; /etc/yum.repos.d/kubernetes.repo
[kubernetes]
name=Kubernetes
baseurl=http://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64
enabled=1
gpgcheck=0
repo_gpgcheck=0
gpgkey=http://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg
       http://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg
EOF

# å¸è½½æ—§ç‰ˆæœ¬K8S
yum remove -y kubelet kubeadm kubectl

# å®‰è£…kubeletã€kubeadmã€kubectlï¼Œè¿™é‡Œæˆ‘å®‰è£…çš„æ˜¯1.18.2ç‰ˆæœ¬ï¼Œä½ ä¹Ÿå¯ä»¥å®‰è£…1.17.2ç‰ˆæœ¬
yum install -y kubelet-1.18.2 kubeadm-1.18.2 kubectl-1.18.2

# ä¿®æ”¹docker Cgroup Driverä¸ºsystemd
# # å°†/usr/lib/systemd/system/docker.serviceæ–‡ä»¶ä¸­çš„è¿™ä¸€è¡Œ ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock
# # ä¿®æ”¹ä¸º ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock --exec-opt native.cgroupdriver=systemd
# å¦‚æœä¸ä¿®æ”¹ï¼Œåœ¨æ·»åŠ  worker èŠ‚ç‚¹æ—¶å¯èƒ½ä¼šç¢°åˆ°å¦‚ä¸‹é”™è¯¯
# [WARNING IsDockerSystemdCheck]: detected &quot;cgroupfs&quot; as the Docker cgroup driver. The recommended driver is &quot;systemd&quot;. 
# Please follow the guide at https://kubernetes.io/docs/setup/cri/
sed -i &quot;s#^ExecStart=/usr/bin/dockerd.*#ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock --exec-opt native.cgroupdriver=systemd#g&quot; /usr/lib/systemd/system/docker.service

# è®¾ç½® docker é•œåƒï¼Œæé«˜ docker é•œåƒä¸‹è½½é€Ÿåº¦å’Œç¨³å®šæ€§
# å¦‚æœè®¿é—® https://hub.docker.io é€Ÿåº¦éå¸¸ç¨³å®šï¼Œäº¦å¯ä»¥è·³è¿‡è¿™ä¸ªæ­¥éª¤
# curl -sSL https://kuboard.cn/install-script/set_mirror.sh | sh -s ${REGISTRY_MIRROR}

# é‡å¯ dockerï¼Œå¹¶å¯åŠ¨ kubelet
systemctl daemon-reload
systemctl restart docker
systemctl enable kubelet &amp;amp;&amp;amp; systemctl start kubelet

docker version
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨æ¯å°æœåŠ¡å™¨ä¸Šä¸ºinstall_k8s.shè„šæœ¬èµ‹äºˆå¯æ‰§è¡Œæƒé™ï¼Œå¹¶æ‰§è¡Œè„šæœ¬å³å¯ã€‚&lt;/p&gt;
&lt;h3 id=&quot;åˆå§‹åŒ–masterèŠ‚ç‚¹&quot;&gt;åˆå§‹åŒ–MasterèŠ‚ç‚¹&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;åªåœ¨binghe101æœåŠ¡å™¨ä¸Šæ‰§è¡Œçš„æ“ä½œã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.åˆå§‹åŒ–MasterèŠ‚ç‚¹çš„ç½‘ç»œç¯å¢ƒ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼šä¸‹é¢çš„å‘½ä»¤éœ€è¦åœ¨å‘½ä»¤è¡Œæ‰‹åŠ¨æ‰§è¡Œã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;# åªåœ¨ master èŠ‚ç‚¹æ‰§è¡Œ
# export å‘½ä»¤åªåœ¨å½“å‰ shell ä¼šè¯ä¸­æœ‰æ•ˆï¼Œå¼€å¯æ–°çš„ shell çª—å£åï¼Œå¦‚æœè¦ç»§ç»­å®‰è£…è¿‡ç¨‹ï¼Œè¯·é‡æ–°æ‰§è¡Œæ­¤å¤„çš„ export å‘½ä»¤
export MASTER_IP=192.168.175.101
# æ›¿æ¢ k8s.master ä¸º æ‚¨æƒ³è¦çš„ dnsName
export APISERVER_NAME=k8s.master
# Kubernetes å®¹å™¨ç»„æ‰€åœ¨çš„ç½‘æ®µï¼Œè¯¥ç½‘æ®µå®‰è£…å®Œæˆåï¼Œç”± kubernetes åˆ›å»ºï¼Œäº‹å…ˆå¹¶ä¸å­˜åœ¨äºç‰©ç†ç½‘ç»œä¸­
export POD_SUBNET=172.18.0.1/16
echo &quot;${MASTER_IP}    ${APISERVER_NAME}&quot; &amp;gt;&amp;gt; /etc/hosts
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;2.åˆå§‹åŒ–MasterèŠ‚ç‚¹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨binghe101æœåŠ¡å™¨ä¸Šåˆ›å»ºinit_master.shè„šæœ¬æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;#!/bin/bash
# è„šæœ¬å‡ºé”™æ—¶ç»ˆæ­¢æ‰§è¡Œ
set -e

if [ ${#POD_SUBNET} -eq 0 ] || [ ${#APISERVER_NAME} -eq 0 ]; then
  echo -e &quot;\033[31;1mè¯·ç¡®ä¿æ‚¨å·²ç»è®¾ç½®äº†ç¯å¢ƒå˜é‡ POD_SUBNET å’Œ APISERVER_NAME \033[0m&quot;
  echo å½“å‰POD_SUBNET=$POD_SUBNET
  echo å½“å‰APISERVER_NAME=$APISERVER_NAME
  exit 1
fi


# æŸ¥çœ‹å®Œæ•´é…ç½®é€‰é¡¹ https://godoc.org/k8s.io/kubernetes/cmd/kubeadm/app/apis/kubeadm/v1beta2
rm -f ./kubeadm-config.yaml
cat &amp;lt;&amp;lt;EOF &amp;gt; ./kubeadm-config.yaml
apiVersion: kubeadm.k8s.io/v1beta2
kind: ClusterConfiguration
kubernetesVersion: v1.18.2
imageRepository: registry.cn-hangzhou.aliyuncs.com/google_containers
controlPlaneEndpoint: &quot;${APISERVER_NAME}:6443&quot;
networking:
  serviceSubnet: &quot;10.96.0.0/16&quot;
  podSubnet: &quot;${POD_SUBNET}&quot;
  dnsDomain: &quot;cluster.local&quot;
EOF

# kubeadm init
# æ ¹æ®æœåŠ¡å™¨ç½‘é€Ÿçš„æƒ…å†µï¼Œæ‚¨éœ€è¦ç­‰å€™ 3 - 10 åˆ†é’Ÿ
kubeadm init --config=kubeadm-config.yaml --upload-certs

# é…ç½® kubectl
rm -rf /root/.kube/
mkdir /root/.kube/
cp -i /etc/kubernetes/admin.conf /root/.kube/config

# å®‰è£… calico ç½‘ç»œæ’ä»¶
# å‚è€ƒæ–‡æ¡£ https://docs.projectcalico.org/v3.13/getting-started/kubernetes/self-managed-onprem/onpremises
echo &quot;å®‰è£…calico-3.13.1&quot;
rm -f calico-3.13.1.yaml
wget https://kuboard.cn/install-script/calico/calico-3.13.1.yaml
kubectl apply -f calico-3.13.1.yaml
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;èµ‹äºˆinit_master.shè„šæœ¬æ–‡ä»¶å¯æ‰§è¡Œæƒé™å¹¶æ‰§è¡Œè„šæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.æŸ¥çœ‹MasterèŠ‚ç‚¹çš„åˆå§‹åŒ–ç»“æœ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ï¼ˆ1ï¼‰ç¡®ä¿æ‰€æœ‰å®¹å™¨ç»„å¤„äºRunningçŠ¶æ€&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;# æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œç­‰å¾… 3-10 åˆ†é’Ÿï¼Œç›´åˆ°æ‰€æœ‰çš„å®¹å™¨ç»„å¤„äº Running çŠ¶æ€
watch kubectl get pod -n kube-system -o wide
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…·ä½“æ‰§è¡Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@binghe101 ~]# watch kubectl get pod -n kube-system -o wide
Every 2.0s: kubectl get pod -n kube-system -o wide                                                                                                                          binghe101: Sun May 10 11:01:32 2020

NAME                                       READY   STATUS    RESTARTS   AGE    IP                NODE        NOMINATED NODE   READINESS GATES          
calico-kube-controllers-5b8b769fcd-5dtlp   1/1     Running   0          118s   172.18.203.66     binghe101   &amp;lt;none&amp;gt;           &amp;lt;none&amp;gt;          
calico-node-fnv8g                          1/1     Running   0          118s   192.168.175.101   binghe101   &amp;lt;none&amp;gt;           &amp;lt;none&amp;gt;          
coredns-546565776c-27t7h                   1/1     Running   0          2m1s   172.18.203.67     binghe101   &amp;lt;none&amp;gt;           &amp;lt;none&amp;gt;          
coredns-546565776c-hjb8z                   1/1     Running   0          2m1s   172.18.203.65     binghe101   &amp;lt;none&amp;gt;           &amp;lt;none&amp;gt;          
etcd-binghe101                             1/1     Running   0          2m7s   192.168.175.101   binghe101   &amp;lt;none&amp;gt;           &amp;lt;none&amp;gt;          
kube-apiserver-binghe101                   1/1     Running   0          2m7s   192.168.175.101   binghe101   &amp;lt;none&amp;gt;           &amp;lt;none&amp;gt;          
kube-controller-manager-binghe101          1/1     Running   0          2m7s   192.168.175.101   binghe101   &amp;lt;none&amp;gt;           &amp;lt;none&amp;gt;          
kube-proxy-dvgsr                           1/1     Running   0          2m1s   192.168.175.101   binghe101   &amp;lt;none&amp;gt;           &amp;lt;none&amp;gt;          
kube-scheduler-binghe101                   1/1     Running   0          2m7s   192.168.175.101   binghe101   &amp;lt;none&amp;gt;           &amp;lt;none&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;ï¼ˆ2ï¼‰ æŸ¥çœ‹ Master èŠ‚ç‚¹åˆå§‹åŒ–ç»“æœ&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;kubectl get nodes -o wide
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…·ä½“æ‰§è¡Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@binghe101 ~]# kubectl get nodes -o wide
NAME        STATUS   ROLES    AGE     VERSION   INTERNAL-IP       EXTERNAL-IP   OS-IMAGE                KERNEL-VERSION         CONTAINER-RUNTIME
binghe101   Ready    master   3m28s   v1.18.2   192.168.175.101   &amp;lt;none&amp;gt;        CentOS Linux 8 (Core)   4.18.0-80.el8.x86_64   docker://19.3.8
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;åˆå§‹åŒ–workerèŠ‚ç‚¹&quot;&gt;åˆå§‹åŒ–WorkerèŠ‚ç‚¹&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;1.è·å–joinå‘½ä»¤å‚æ•°&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨MasterèŠ‚ç‚¹ï¼ˆbinghe101æœåŠ¡å™¨ï¼‰ä¸Šæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤è·å–joinå‘½ä»¤å‚æ•°ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;kubeadm token create --print-join-command
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…·ä½“æ‰§è¡Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@binghe101 ~]# kubeadm token create --print-join-command
W0510 11:04:34.828126   56132 configset.go:202] WARNING: kubeadm cannot validate component configs for API groups [kubelet.config.k8s.io kubeproxy.config.k8s.io]
kubeadm join k8s.master:6443 --token 8nblts.62xytoqufwsqzko2     --discovery-token-ca-cert-hash sha256:1717cc3e34f6a56b642b5751796530e367aa73f4113d09994ac3455e33047c0d 
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…¶ä¸­ï¼Œæœ‰å¦‚ä¸‹ä¸€è¡Œè¾“å‡ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;kubeadm join k8s.master:6443 --token 8nblts.62xytoqufwsqzko2     --discovery-token-ca-cert-hash sha256:1717cc3e34f6a56b642b5751796530e367aa73f4113d09994ac3455e33047c0d 
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™è¡Œä»£ç å°±æ˜¯è·å–åˆ°çš„joinå‘½ä»¤ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;æ³¨æ„ï¼šjoinå‘½ä»¤ä¸­çš„tokençš„æœ‰æ•ˆæ—¶é—´ä¸º 2 ä¸ªå°æ—¶ï¼Œ2å°æ—¶å†…ï¼Œå¯ä»¥ä½¿ç”¨æ­¤ token åˆå§‹åŒ–ä»»æ„æ•°é‡çš„ worker èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;2.åˆå§‹åŒ–WorkerèŠ‚ç‚¹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é’ˆå¯¹æ‰€æœ‰çš„ worker èŠ‚ç‚¹æ‰§è¡Œï¼Œåœ¨è¿™é‡Œï¼Œå°±æ˜¯åœ¨binghe102æœåŠ¡å™¨å’Œbinghe103æœåŠ¡å™¨ä¸Šæ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å‘½ä»¤åˆ†åˆ«æ‰‹åŠ¨æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;# åªåœ¨ worker èŠ‚ç‚¹æ‰§è¡Œ
# 192.168.175.101 ä¸º master èŠ‚ç‚¹çš„å†…ç½‘ IP
export MASTER_IP=192.168.175.101
# æ›¿æ¢ k8s.master ä¸ºåˆå§‹åŒ– master èŠ‚ç‚¹æ—¶æ‰€ä½¿ç”¨çš„ APISERVER_NAME
export APISERVER_NAME=k8s.master
echo &quot;${MASTER_IP}    ${APISERVER_NAME}&quot; &amp;gt;&amp;gt; /etc/hosts

# æ›¿æ¢ä¸º master èŠ‚ç‚¹ä¸Š kubeadm token create å‘½ä»¤è¾“å‡ºçš„join
kubeadm join k8s.master:6443 --token 8nblts.62xytoqufwsqzko2     --discovery-token-ca-cert-hash sha256:1717cc3e34f6a56b642b5751796530e367aa73f4113d09994ac3455e33047c0d 
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…·ä½“æ‰§è¡Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@binghe102 ~]# export MASTER_IP=192.168.175.101
[root@binghe102 ~]# export APISERVER_NAME=k8s.master
[root@binghe102 ~]# echo &quot;${MASTER_IP}    ${APISERVER_NAME}&quot; &amp;gt;&amp;gt; /etc/hosts
[root@binghe102 ~]# kubeadm join k8s.master:6443 --token 8nblts.62xytoqufwsqzko2     --discovery-token-ca-cert-hash sha256:1717cc3e34f6a56b642b5751796530e367aa73f4113d09994ac3455e33047c0d 
W0510 11:08:27.709263   42795 join.go:346] [preflight] WARNING: JoinControlPane.controlPlane settings will be ignored when control-plane flag is not set.
[preflight] Running pre-flight checks
        [WARNING FileExisting-tc]: tc not found in system path
[preflight] Reading configuration from the cluster...
[preflight] FYI: You can look at this config file with 'kubectl -n kube-system get cm kubeadm-config -oyaml'
[kubelet-start] Downloading configuration for the kubelet from the &quot;kubelet-config-1.18&quot; ConfigMap in the kube-system namespace
[kubelet-start] Writing kubelet configuration to file &quot;/var/lib/kubelet/config.yaml&quot;
[kubelet-start] Writing kubelet environment file with flags to file &quot;/var/lib/kubelet/kubeadm-flags.env&quot;
[kubelet-start] Starting the kubelet
[kubelet-start] Waiting for the kubelet to perform the TLS Bootstrap...

This node has joined the cluster:
* Certificate signing request was sent to apiserver and a response was received.
* The Kubelet was informed of the new secure connection details.

Run 'kubectl get nodes' on the control-plane to see this node join the cluster.
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ ¹æ®è¾“å‡ºç»“æœå¯ä»¥çœ‹å‡ºï¼ŒWorkerèŠ‚ç‚¹åŠ å…¥äº†K8Sé›†ç¾¤ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;æ³¨æ„ï¼škubeadm joinâ€¦å°±æ˜¯master èŠ‚ç‚¹ä¸Š kubeadm token create å‘½ä»¤è¾“å‡ºçš„joinã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;3.æŸ¥çœ‹åˆå§‹åŒ–ç»“æœ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨MasterèŠ‚ç‚¹ï¼ˆbinghe101æœåŠ¡å™¨ï¼‰æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹åˆå§‹åŒ–ç»“æœã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;kubectl get nodes -o wide
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…·ä½“æ‰§è¡Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@binghe101 ~]# kubectl get nodes
NAME        STATUS   ROLES    AGE     VERSION
binghe101   Ready    master   20m     v1.18.2
binghe102   Ready    &amp;lt;none&amp;gt;   2m46s   v1.18.2
binghe103   Ready    &amp;lt;none&amp;gt;   2m46s   v1.18.2
&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;æ³¨æ„ï¼škubectl get nodeså‘½ä»¤åé¢åŠ ä¸Š-o wideå‚æ•°å¯ä»¥è¾“å‡ºæ›´å¤šçš„ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;é‡å¯k8sé›†ç¾¤å¼•èµ·çš„é—®é¢˜&quot;&gt;é‡å¯K8Sé›†ç¾¤å¼•èµ·çš„é—®é¢˜&lt;/h2&gt;
&lt;h3 id=&quot;1workerèŠ‚ç‚¹æ•…éšœä¸èƒ½å¯åŠ¨&quot;&gt;1.WorkerèŠ‚ç‚¹æ•…éšœä¸èƒ½å¯åŠ¨&lt;/h3&gt;
&lt;p&gt;Master èŠ‚ç‚¹çš„ IP åœ°å€å‘ç”Ÿå˜åŒ–ï¼Œå¯¼è‡´ worker èŠ‚ç‚¹ä¸èƒ½å¯åŠ¨ã€‚éœ€è¦é‡æ–°å®‰è£…K8Sé›†ç¾¤ï¼Œå¹¶ç¡®ä¿æ‰€æœ‰èŠ‚ç‚¹éƒ½æœ‰å›ºå®šçš„å†…ç½‘ IP åœ°å€ã€‚&lt;/p&gt;
&lt;h3 id=&quot;2podå´©æºƒæˆ–ä¸èƒ½æ­£å¸¸è®¿é—®&quot;&gt;2.Podå´©æºƒæˆ–ä¸èƒ½æ­£å¸¸è®¿é—®&lt;/h3&gt;
&lt;p&gt;é‡å¯æœåŠ¡å™¨åä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹Podçš„è¿è¡ŒçŠ¶æ€ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;kubectl get pods --all-namespaces
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å‘ç°å¾ˆå¤š Pod ä¸åœ¨ Running çŠ¶æ€ï¼Œæ­¤æ—¶ï¼Œéœ€è¦ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤åˆ é™¤è¿è¡Œä¸æ­£å¸¸çš„Podã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;kubectl delete pod &amp;lt;pod-name&amp;gt; -n &amp;lt;pod-namespece&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;æ³¨æ„ï¼šå¦‚æœPod æ˜¯ä½¿ç”¨ Deploymentã€StatefulSet ç­‰æ§åˆ¶å™¨åˆ›å»ºçš„ï¼ŒK8S å°†åˆ›å»ºæ–°çš„ Pod ä½œä¸ºæ›¿ä»£ï¼Œé‡æ–°å¯åŠ¨çš„ Pod é€šå¸¸èƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;k8så®‰è£…ingress-nginx&quot;&gt;K8Så®‰è£…ingress-nginx&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼šåœ¨MasterèŠ‚ç‚¹ï¼ˆbinghe101æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;1åˆ›å»ºingress-nginxå‘½åç©ºé—´&quot;&gt;1.åˆ›å»ºingress-nginxå‘½åç©ºé—´&lt;/h3&gt;
&lt;p&gt;åˆ›å»ºingress-nginx-namespace.yamlæ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-yaml&quot;&gt;apiVersion: v1
kind: Namespace
metadata:
  name: ingress-nginx
  labels:
    name: ingress-nginx
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤åˆ›å»ºingress-nginxå‘½åç©ºé—´ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;kubectl apply -f ingress-nginx-namespace.yaml
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;2å®‰è£…ingress-controller&quot;&gt;2.å®‰è£…ingress controller&lt;/h3&gt;
&lt;p&gt;åˆ›å»ºingress-nginx-mandatory.yamlæ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-yaml&quot;&gt;apiVersion: v1
kind: Namespace
metadata:
  name: ingress-nginx

---

apiVersion: apps/v1
kind: Deployment
metadata:
  name: default-http-backend
  labels:
    app.kubernetes.io/name: default-http-backend
    app.kubernetes.io/part-of: ingress-nginx
  namespace: ingress-nginx
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: default-http-backend
      app.kubernetes.io/part-of: ingress-nginx
  template:
    metadata:
      labels:
        app.kubernetes.io/name: default-http-backend
        app.kubernetes.io/part-of: ingress-nginx
    spec:
      terminationGracePeriodSeconds: 60
      containers:
        - name: default-http-backend
          # Any image is permissible as long as:
          # 1. It serves a 404 page at /
          # 2. It serves 200 on a /healthz endpoint
          image: registry.cn-qingdao.aliyuncs.com/kubernetes_xingej/defaultbackend-amd64:1.5
          livenessProbe:
            httpGet:
              path: /healthz
              port: 8080
              scheme: HTTP
            initialDelaySeconds: 30
            timeoutSeconds: 5
          ports:
            - containerPort: 8080
          resources:
            limits:
              cpu: 10m
              memory: 20Mi
            requests:
              cpu: 10m
              memory: 20Mi

---
apiVersion: v1
kind: Service
metadata:
  name: default-http-backend
  namespace: ingress-nginx
  labels:
    app.kubernetes.io/name: default-http-backend
    app.kubernetes.io/part-of: ingress-nginx
spec:
  ports:
    - port: 80
      targetPort: 8080
  selector:
    app.kubernetes.io/name: default-http-backend
    app.kubernetes.io/part-of: ingress-nginx

---

kind: ConfigMap
apiVersion: v1
metadata:
  name: nginx-configuration
  namespace: ingress-nginx
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx

---

kind: ConfigMap
apiVersion: v1
metadata:
  name: tcp-services
  namespace: ingress-nginx
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx

---

kind: ConfigMap
apiVersion: v1
metadata:
  name: udp-services
  namespace: ingress-nginx
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx

---

apiVersion: v1
kind: ServiceAccount
metadata:
  name: nginx-ingress-serviceaccount
  namespace: ingress-nginx
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx

---
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: ClusterRole
metadata:
  name: nginx-ingress-clusterrole
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
rules:
  - apiGroups:
      - &quot;&quot;
    resources:
      - configmaps
      - endpoints
      - nodes
      - pods
      - secrets
    verbs:
      - list
      - watch
  - apiGroups:
      - &quot;&quot;
    resources:
      - nodes
    verbs:
      - get
  - apiGroups:
      - &quot;&quot;
    resources:
      - services
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - &quot;extensions&quot;
    resources:
      - ingresses
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - &quot;&quot;
    resources:
      - events
    verbs:
      - create
      - patch
  - apiGroups:
      - &quot;extensions&quot;
    resources:
      - ingresses/status
    verbs:
      - update

---
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: Role
metadata:
  name: nginx-ingress-role
  namespace: ingress-nginx
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
rules:
  - apiGroups:
      - &quot;&quot;
    resources:
      - configmaps
      - pods
      - secrets
      - namespaces
    verbs:
      - get
  - apiGroups:
      - &quot;&quot;
    resources:
      - configmaps
    resourceNames:
      # Defaults to &quot;&amp;lt;election-id&amp;gt;-&amp;lt;ingress-class&amp;gt;&quot;
      # Here: &quot;&amp;lt;ingress-controller-leader&amp;gt;-&amp;lt;nginx&amp;gt;&quot;
      # This has to be adapted if you change either parameter
      # when launching the nginx-ingress-controller.
      - &quot;ingress-controller-leader-nginx&quot;
    verbs:
      - get
      - update
  - apiGroups:
      - &quot;&quot;
    resources:
      - configmaps
    verbs:
      - create
  - apiGroups:
      - &quot;&quot;
    resources:
      - endpoints
    verbs:
      - get

---
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: RoleBinding
metadata:
  name: nginx-ingress-role-nisa-binding
  namespace: ingress-nginx
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: nginx-ingress-role
subjects:
  - kind: ServiceAccount
    name: nginx-ingress-serviceaccount
    namespace: ingress-nginx

---
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: ClusterRoleBinding
metadata:
  name: nginx-ingress-clusterrole-nisa-binding
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: nginx-ingress-clusterrole
subjects:
  - kind: ServiceAccount
    name: nginx-ingress-serviceaccount
    namespace: ingress-nginx

---

apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-ingress-controller
  namespace: ingress-nginx
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: ingress-nginx
      app.kubernetes.io/part-of: ingress-nginx
  template:
    metadata:
      labels:
        app.kubernetes.io/name: ingress-nginx
        app.kubernetes.io/part-of: ingress-nginx
      annotations:
        prometheus.io/port: &quot;10254&quot;
        prometheus.io/scrape: &quot;true&quot;
    spec:
      serviceAccountName: nginx-ingress-serviceaccount
      containers:
        - name: nginx-ingress-controller
          image: registry.cn-qingdao.aliyuncs.com/kubernetes_xingej/nginx-ingress-controller:0.20.0
          args:
            - /nginx-ingress-controller
            - --default-backend-service=$(POD_NAMESPACE)/default-http-backend
            - --configmap=$(POD_NAMESPACE)/nginx-configuration
            - --tcp-services-configmap=$(POD_NAMESPACE)/tcp-services
            - --udp-services-configmap=$(POD_NAMESPACE)/udp-services
            - --publish-service=$(POD_NAMESPACE)/ingress-nginx
            - --annotations-prefix=nginx.ingress.kubernetes.io
          securityContext:
            capabilities:
              drop:
                - ALL
              add:
                - NET_BIND_SERVICE
            # www-data -&amp;gt; 33
            runAsUser: 33
          env:
            - name: POD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
            - name: POD_NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
          ports:
            - name: http
              containerPort: 80
            - name: https
              containerPort: 443
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /healthz
              port: 10254
              scheme: HTTP
            initialDelaySeconds: 10
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /healthz
              port: 10254
              scheme: HTTP
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1

---
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…ingress controllerã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;kubectl apply -f ingress-nginx-mandatory.yaml
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;3å®‰è£…k8s-svcï¼šingress-nginx&quot;&gt;3.å®‰è£…K8S SVCï¼šingress-nginx&lt;/h3&gt;
&lt;p&gt;ä¸»è¦æ˜¯ç”¨æ¥ç”¨äºæš´éœ²podï¼šnginx-ingress-controllerã€‚&lt;/p&gt;
&lt;p&gt;åˆ›å»ºservice-nodeport.yamlæ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-yaml&quot;&gt;apiVersion: v1
kind: Service
metadata:
  name: ingress-nginx
  namespace: ingress-nginx
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
spec:
  type: NodePort
  ports:
    - name: http
      port: 80
      targetPort: 80
      protocol: TCP
      nodePort: 30080
    - name: https
      port: 443
      targetPort: 443
      protocol: TCP
      nodePort: 30443
  selector:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;kubectl apply -f service-nodeport.yaml
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;4è®¿é—®k8s-svcï¼šingress-nginx&quot;&gt;4.è®¿é—®K8S SVCï¼šingress-nginx&lt;/h3&gt;
&lt;p&gt;æŸ¥çœ‹ingress-nginxå‘½åç©ºé—´çš„éƒ¨ç½²æƒ…å†µï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@binghe101 k8s]# kubectl get pod -n ingress-nginx
NAME                                        READY   STATUS    RESTARTS   AGE
default-http-backend-796ddcd9b-vfmgn        1/1     Running   1          10h
nginx-ingress-controller-58985cc996-87754   1/1     Running   2          10h
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨å‘½ä»¤è¡ŒæœåŠ¡å™¨å‘½ä»¤è¡Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹ingress-nginxçš„ç«¯å£æ˜ å°„æƒ…å†µã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;kubectl get svc -n ingress-nginx 
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…·ä½“å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@binghe101 k8s]# kubectl get svc -n ingress-nginx 
NAME                   TYPE        CLUSTER-IP    EXTERNAL-IP   PORT(S)                      AGE
default-http-backend   ClusterIP   10.96.247.2   &amp;lt;none&amp;gt;        80/TCP                       7m3s
ingress-nginx          NodePort    10.96.40.6    &amp;lt;none&amp;gt;        80:30080/TCP,443:30443/TCP   4m35s
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œå¯ä»¥é€šè¿‡MasterèŠ‚ç‚¹ï¼ˆbinghe101æœåŠ¡å™¨ï¼‰çš„IPåœ°å€å’Œ30080ç«¯å£å·æ¥è®¿é—®ingress-nginxï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@binghe101 k8s]# curl 192.168.175.101:30080       
default backend - 404
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¹Ÿå¯ä»¥åœ¨æµè§ˆå™¨æ‰“å¼€http://192.168.175.101:30080 æ¥è®¿é—®ingress-nginxï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20200521003920255.jpg#pic_center&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;k8så®‰è£…gitlabä»£ç ä»“åº“&quot;&gt;K8Så®‰è£…gitlabä»£ç ä»“åº“&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼šåœ¨MasterèŠ‚ç‚¹ï¼ˆbinghe101æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;1åˆ›å»ºk8s-opså‘½åç©ºé—´&quot;&gt;1.åˆ›å»ºk8s-opså‘½åç©ºé—´&lt;/h3&gt;
&lt;p&gt;åˆ›å»ºk8s-ops-namespace.yamlæ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-yaml&quot;&gt;apiVersion: v1
kind: Namespace
metadata:
  name: k8s-ops
  labels:
    name: k8s-ops
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤åˆ›å»ºå‘½åç©ºé—´ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;kubectl apply -f k8s-ops-namespace.yaml 
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;2å®‰è£…gitlab-redis&quot;&gt;2.å®‰è£…gitlab-redis&lt;/h3&gt;
&lt;p&gt;åˆ›å»ºgitlab-redis.yamlæ–‡ä»¶ï¼Œæ–‡ä»¶çš„å†…å®¹å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-yaml&quot;&gt;apiVersion: apps/v1
kind: Deployment
metadata:
  name: redis
  namespace: k8s-ops
  labels:
    name: redis
spec:
  selector:
    matchLabels:
      name: redis
  template:
    metadata:
      name: redis
      labels:
        name: redis
    spec:
      containers:
      - name: redis
        image: sameersbn/redis
        imagePullPolicy: IfNotPresent
        ports:
        - name: redis
          containerPort: 6379
        volumeMounts:
        - mountPath: /var/lib/redis
          name: data
        livenessProbe:
          exec:
            command:
            - redis-cli
            - ping
          initialDelaySeconds: 30
          timeoutSeconds: 5
        readinessProbe:
          exec:
            command:
            - redis-cli
            - ping
          initialDelaySeconds: 10
          timeoutSeconds: 5
      volumes:
      - name: data
        hostPath:
          path: /data1/docker/xinsrv/redis

---
apiVersion: v1
kind: Service
metadata:
  name: redis
  namespace: k8s-ops
  labels:
    name: redis
spec:
  ports:
    - name: redis
      port: 6379
      targetPort: redis
  selector:
    name: redis
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é¦–å…ˆï¼Œåœ¨å‘½ä»¤è¡Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤åˆ›å»º/data1/docker/xinsrv/redisç›®å½•ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;mkdir -p /data1/docker/xinsrv/redis
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…gitlab-redisã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;kubectl apply -f gitlab-redis.yaml 
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;3å®‰è£…gitlab-postgresql&quot;&gt;3.å®‰è£…gitlab-postgresql&lt;/h3&gt;
&lt;p&gt;åˆ›å»ºgitlab-postgresql.yamlï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;apiVersion: apps/v1
kind: Deployment
metadata:
  name: postgresql
  namespace: k8s-ops
  labels:
    name: postgresql
spec:
  selector:
    matchLabels:
      name: postgresql
  template:
    metadata:
      name: postgresql
      labels:
        name: postgresql
    spec:
      containers:
      - name: postgresql
        image: sameersbn/postgresql
        imagePullPolicy: IfNotPresent
        env:
        - name: DB_USER
          value: gitlab
        - name: DB_PASS
          value: passw0rd
        - name: DB_NAME
          value: gitlab_production
        - name: DB_EXTENSION
          value: pg_trgm
        ports:
        - name: postgres
          containerPort: 5432
        volumeMounts:
        - mountPath: /var/lib/postgresql
          name: data
        livenessProbe:
          exec:
            command:
            - pg_isready
            - -h
            - localhost
            - -U
            - postgres
          initialDelaySeconds: 30
          timeoutSeconds: 5
        readinessProbe:
          exec:
            command:
            - pg_isready
            - -h
            - localhost
            - -U
            - postgres
          initialDelaySeconds: 5
          timeoutSeconds: 1
      volumes:
      - name: data
        hostPath:
          path: /data1/docker/xinsrv/postgresql
---
apiVersion: v1
kind: Service
metadata:
  name: postgresql
  namespace: k8s-ops
  labels:
    name: postgresql
spec:
  ports:
    - name: postgres
      port: 5432
      targetPort: postgres
  selector:
    name: postgresql
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é¦–å…ˆï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤åˆ›å»º/data1/docker/xinsrv/postgresqlç›®å½•ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;mkdir -p /data1/docker/xinsrv/postgresql
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œå®‰è£…gitlab-postgresqlï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;kubectl apply -f gitlab-postgresql.yaml
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;4å®‰è£…gitlab&quot;&gt;4.å®‰è£…gitlab&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;ï¼ˆ1ï¼‰é…ç½®ç”¨æˆ·åå’Œå¯†ç &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œåœ¨å‘½ä»¤è¡Œä½¿ç”¨base64ç¼–ç ä¸ºç”¨æˆ·åå’Œå¯†ç è¿›è¡Œè½¬ç ï¼Œæœ¬ç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨çš„ç”¨æˆ·åä¸ºadminï¼Œå¯†ç ä¸ºadmin.1231&lt;/p&gt;
&lt;p&gt;è½¬ç æƒ…å†µå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@binghe101 k8s]# echo -n 'admin' | base64 
YWRtaW4=
[root@binghe101 k8s]# echo -n 'admin.1231' | base64 
YWRtaW4uMTIzMQ==
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è½¬ç åçš„ç”¨æˆ·åä¸ºï¼šYWRtaW4= å¯†ç ä¸ºï¼šYWRtaW4uMTIzMQ==&lt;/p&gt;
&lt;p&gt;ä¹Ÿå¯ä»¥å¯¹base64ç¼–ç åçš„å­—ç¬¦ä¸²è§£ç ï¼Œä¾‹å¦‚ï¼Œå¯¹å¯†ç å­—ç¬¦ä¸²è§£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@binghe101 k8s]# echo 'YWRtaW4uMTIzMQ==' | base64 --decode 
admin.1231
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œåˆ›å»ºsecret-gitlab.yamlæ–‡ä»¶ï¼Œä¸»è¦æ˜¯ç”¨æˆ·æ¥é…ç½®GitLabçš„ç”¨æˆ·åå’Œå¯†ç ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;apiVersion: v1
kind: Secret
metadata:
  namespace: k8s-ops
  name: git-user-pass
type: Opaque
data:
  username: YWRtaW4=
  password: YWRtaW4uMTIzMQ==
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ‰§è¡Œé…ç½®æ–‡ä»¶çš„å†…å®¹ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;kubectl create -f ./secret-gitlab.yaml
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;ï¼ˆ2ï¼‰å®‰è£…GitLab&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åˆ›å»ºgitlab.yamlæ–‡ä»¶ï¼Œæ–‡ä»¶çš„å†…å®¹å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-yaml&quot;&gt;apiVersion: apps/v1
kind: Deployment
metadata:
  name: gitlab
  namespace: k8s-ops
  labels:
    name: gitlab
spec:
  selector:
    matchLabels:
      name: gitlab
  template:
    metadata:
      name: gitlab
      labels:
        name: gitlab
    spec:
      containers:
      - name: gitlab
        image: sameersbn/gitlab:12.1.6
        imagePullPolicy: IfNotPresent
        env:
        - name: TZ
          value: Asia/Shanghai
        - name: GITLAB_TIMEZONE
          value: Beijing
        - name: GITLAB_SECRETS_DB_KEY_BASE
          value: long-and-random-alpha-numeric-string
        - name: GITLAB_SECRETS_SECRET_KEY_BASE
          value: long-and-random-alpha-numeric-string
        - name: GITLAB_SECRETS_OTP_KEY_BASE
          value: long-and-random-alpha-numeric-string
        - name: GITLAB_ROOT_PASSWORD
          valueFrom:
            secretKeyRef:
              name: git-user-pass
              key: password
        - name: GITLAB_ROOT_EMAIL
          value: 12345678@qq.com
        - name: GITLAB_HOST
          value: gitlab.binghe.com
        - name: GITLAB_PORT
          value: &quot;80&quot;
        - name: GITLAB_SSH_PORT
          value: &quot;30022&quot;
        - name: GITLAB_NOTIFY_ON_BROKEN_BUILDS
          value: &quot;true&quot;
        - name: GITLAB_NOTIFY_PUSHER
          value: &quot;false&quot;
        - name: GITLAB_BACKUP_SCHEDULE
          value: daily
        - name: GITLAB_BACKUP_TIME
          value: 01:00
        - name: DB_TYPE
          value: postgres
        - name: DB_HOST
          value: postgresql
        - name: DB_PORT
          value: &quot;5432&quot;
        - name: DB_USER
          value: gitlab
        - name: DB_PASS
          value: passw0rd
        - name: DB_NAME
          value: gitlab_production
        - name: REDIS_HOST
          value: redis
        - name: REDIS_PORT
          value: &quot;6379&quot;
        ports:
        - name: http
          containerPort: 80
        - name: ssh
          containerPort: 22
        volumeMounts:
        - mountPath: /home/git/data
          name: data
        livenessProbe:
          httpGet:
            path: /
            port: 80
          initialDelaySeconds: 180
          timeoutSeconds: 5
        readinessProbe:
          httpGet:
            path: /
            port: 80
          initialDelaySeconds: 5
          timeoutSeconds: 1
      volumes:
      - name: data
        hostPath:
          path: /data1/docker/xinsrv/gitlab
---
apiVersion: v1
kind: Service
metadata:
  name: gitlab
  namespace: k8s-ops
  labels:
    name: gitlab
spec:
  ports:
    - name: http
      port: 80
      nodePort: 30088
    - name: ssh
      port: 22
      targetPort: ssh
      nodePort: 30022
  type: NodePort
  selector:
    name: gitlab

---
apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  name: gitlab
  namespace: k8s-ops
  annotations:
    kubernetes.io/ingress.class: traefik
spec:
  rules:
  - host: gitlab.binghe.com
    http:
      paths:
      - backend:
          serviceName: gitlab
          servicePort: http
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼šåœ¨é…ç½®GitLabæ—¶ï¼Œç›‘å¬ä¸»æœºæ—¶ï¼Œä¸èƒ½ä½¿ç”¨IPåœ°å€ï¼Œéœ€è¦ä½¿ç”¨ä¸»æœºåæˆ–è€…åŸŸåï¼Œä¸Šè¿°é…ç½®ä¸­ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯gitlab.binghe.comä¸»æœºåã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å‘½ä»¤è¡Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤åˆ›å»º/data1/docker/xinsrv/gitlabç›®å½•ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;mkdir -p /data1/docker/xinsrv/gitlab
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å®‰è£…GitLabï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;kubectl apply -f gitlab.yaml
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;5å®‰è£…å®Œæˆ&quot;&gt;5.å®‰è£…å®Œæˆ&lt;/h3&gt;
&lt;p&gt;æŸ¥çœ‹k8s-opså‘½åç©ºé—´éƒ¨ç½²æƒ…å†µï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@binghe101 k8s]# kubectl get pod -n k8s-ops
NAME                          READY   STATUS    RESTARTS   AGE
gitlab-7b459db47c-5vk6t       0/1     Running   0          11s
postgresql-79567459d7-x52vx   1/1     Running   0          30m
redis-67f4cdc96c-h5ckz        1/1     Running   1          10h
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¹Ÿå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@binghe101 k8s]# kubectl get pod --namespace=k8s-ops
NAME                          READY   STATUS    RESTARTS   AGE
gitlab-7b459db47c-5vk6t       0/1     Running   0          36s
postgresql-79567459d7-x52vx   1/1     Running   0          30m
redis-67f4cdc96c-h5ckz        1/1     Running   1          10h
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;äºŒè€…æ•ˆæœä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼ŒæŸ¥çœ‹GitLabçš„ç«¯å£æ˜ å°„ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@binghe101 k8s]# kubectl get svc -n k8s-ops
NAME         TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)                     AGE
gitlab       NodePort    10.96.153.100   &amp;lt;none&amp;gt;        80:30088/TCP,22:30022/TCP   2m42s
postgresql   ClusterIP   10.96.203.119   &amp;lt;none&amp;gt;        5432/TCP                    32m
redis        ClusterIP   10.96.107.150   &amp;lt;none&amp;gt;        6379/TCP                    10h
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ­¤æ—¶ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå¯ä»¥é€šè¿‡MasterèŠ‚ç‚¹ï¼ˆbinghe101ï¼‰çš„ä¸»æœºågitlab.binghe.comå’Œç«¯å£30088å°±èƒ½å¤Ÿè®¿é—®GitLabã€‚ç”±äºæˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯è™šæ‹Ÿæœºæ¥æ­å»ºç›¸å…³çš„ç¯å¢ƒï¼Œåœ¨æœ¬æœºè®¿é—®è™šæ‹Ÿæœºæ˜ å°„çš„gitlab.binghe.comæ—¶ï¼Œéœ€è¦é…ç½®æœ¬æœºçš„hostsæ–‡ä»¶ï¼Œåœ¨æœ¬æœºçš„hostsæ–‡ä»¶ä¸­åŠ å…¥å¦‚ä¸‹é…ç½®é¡¹ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;192.168.175.101 gitlab.binghe.com
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ³¨æ„ï¼šåœ¨Windowsæ“ä½œç³»ç»Ÿä¸­ï¼Œhostsæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•å¦‚ä¸‹ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;C:\Windows\System32\drivers\etc
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œå°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸­é€šè¿‡é“¾æ¥ï¼š&lt;a href=&quot;http://gitlab.binghe.com:30088&quot;&gt;http://gitlab.binghe.com:30088&lt;/a&gt; æ¥è®¿é—®GitLabäº†ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20200521004033845.jpg&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶ï¼Œå¯ä»¥é€šè¿‡ç”¨æˆ·årootå’Œå¯†ç admin.1231æ¥ç™»å½•GitLabäº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼šè¿™é‡Œçš„ç”¨æˆ·åæ˜¯rootè€Œä¸æ˜¯adminï¼Œå› ä¸ºrootæ˜¯GitLabé»˜è®¤çš„è¶…çº§ç”¨æˆ·ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20200521004046470.jpg&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç™»å½•åçš„ç•Œé¢å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/2020052100410037.jpg&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;p&gt;åˆ°æ­¤ï¼ŒK8Så®‰è£…gitlabå®Œæˆã€‚&lt;/p&gt;
&lt;h2 id=&quot;å®‰è£…harborç§æœ‰ä»“åº“&quot;&gt;å®‰è£…Harborç§æœ‰ä»“åº“&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼šè¿™é‡Œå°†Harborç§æœ‰ä»“åº“å®‰è£…åœ¨MasterèŠ‚ç‚¹ï¼ˆbinghe101æœåŠ¡å™¨ï¼‰ä¸Šï¼Œå®é™…ç”Ÿäº§ç¯å¢ƒä¸­å»ºè®®å®‰è£…åœ¨å…¶ä»–æœåŠ¡å™¨ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;1ä¸‹è½½harborçš„ç¦»çº¿å®‰è£…ç‰ˆæœ¬&quot;&gt;1.ä¸‹è½½Harborçš„ç¦»çº¿å®‰è£…ç‰ˆæœ¬&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;wget https://github.com/goharbor/harbor/releases/download/v1.10.2/harbor-offline-installer-v1.10.2.tgz
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;2è§£å‹harborçš„å®‰è£…åŒ…&quot;&gt;2.è§£å‹Harborçš„å®‰è£…åŒ…&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;tar -zxvf harbor-offline-installer-v1.10.2.tgz
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è§£å‹æˆåŠŸåï¼Œä¼šåœ¨æœåŠ¡å™¨å½“å‰ç›®å½•ç”Ÿæˆä¸€ä¸ªharborç›®å½•ã€‚&lt;/p&gt;
&lt;h3 id=&quot;3é…ç½®harbor&quot;&gt;3.é…ç½®Harbor&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼šè¿™é‡Œï¼Œæˆ‘å°†Harborçš„ç«¯å£ä¿®æ”¹æˆäº†1180ï¼Œå¦‚æœä¸ä¿®æ”¹Harborçš„ç«¯å£ï¼Œé»˜è®¤çš„ç«¯å£æ˜¯80ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ï¼ˆ1ï¼‰ä¿®æ”¹harbor.ymlæ–‡ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;cd harbor
vim harbor.yml
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¿®æ”¹çš„é…ç½®é¡¹å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;hostname: 192.168.175.101
http:
  port: 1180
harbor_admin_password: binghe123
###å¹¶æŠŠhttpsæ³¨é‡Šæ‰ï¼Œä¸ç„¶åœ¨å®‰è£…çš„æ—¶å€™ä¼šæŠ¥é”™ï¼šERROR:root:Error: The protocol is https but attribute ssl_cert is not set
#https:
  #port: 443
  #certificate: /your/certificate/path
  #private_key: /your/private/key/path
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;ï¼ˆ2ï¼‰ä¿®æ”¹daemon.jsonæ–‡ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¿®æ”¹/etc/docker/daemon.jsonæ–‡ä»¶ï¼Œæ²¡æœ‰çš„è¯å°±åˆ›å»ºï¼Œåœ¨/etc/docker/daemon.jsonæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@binghe~]# cat /etc/docker/daemon.json
{
  &quot;registry-mirrors&quot;: [&quot;https://zz3sblpi.mirror.aliyuncs.com&quot;],
  &quot;insecure-registries&quot;:[&quot;192.168.175.101:1180&quot;]
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¹Ÿå¯ä»¥åœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨ &lt;strong&gt;ip addr&lt;/strong&gt; å‘½ä»¤æŸ¥çœ‹æœ¬æœºæ‰€æœ‰çš„IPåœ°å€æ®µï¼Œå°†å…¶é…ç½®åˆ°/etc/docker/daemon.jsonæ–‡ä»¶ä¸­ã€‚è¿™é‡Œï¼Œæˆ‘é…ç½®åçš„æ–‡ä»¶å†…å®¹å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;{
    &quot;registry-mirrors&quot;: [&quot;https://zz3sblpi.mirror.aliyuncs.com&quot;],
    &quot;insecure-registries&quot;:[&quot;192.168.175.0/16&quot;,&quot;172.17.0.0/16&quot;, &quot;172.18.0.0/16&quot;, &quot;172.16.29.0/16&quot;, &quot;192.168.175.101:1180&quot;]
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;4å®‰è£…å¹¶å¯åŠ¨harbor&quot;&gt;4.å®‰è£…å¹¶å¯åŠ¨harbor&lt;/h3&gt;
&lt;p&gt;é…ç½®å®Œæˆåï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤å³å¯å®‰è£…å¹¶å¯åŠ¨Harbor&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@binghe harbor]# ./install.sh 
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;5ç™»å½•harborå¹¶æ·»åŠ è´¦æˆ·&quot;&gt;5.ç™»å½•Harborå¹¶æ·»åŠ è´¦æˆ·&lt;/h3&gt;
&lt;p&gt;å®‰è£…æˆåŠŸåï¼Œåœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥http://192.168.175.101:1180æ‰“å¼€é“¾æ¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20200521004111497.jpg&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¾“å…¥ç”¨æˆ·åadminå’Œå¯†ç binghe123ï¼Œç™»å½•ç³»ç»Ÿï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20200521004122673.jpg&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€‰æ‹©ç”¨æˆ·ç®¡ç†ï¼Œæ·»åŠ ä¸€ä¸ªç®¡ç†å‘˜è´¦æˆ·ï¼Œä¸ºåç»­æ‰“åŒ…Dockeré•œåƒå’Œä¸Šä¼ Dockeré•œåƒåšå‡†å¤‡ã€‚æ·»åŠ è´¦æˆ·çš„æ­¥éª¤å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20200521004138579.jpg&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20200521004149568.jpg&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ­¤å¤„å¡«å†™çš„å¯†ç ä¸ºBinghe123ã€‚&lt;/p&gt;
&lt;p&gt;ç‚¹å‡»ç¡®å®šåï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20200521004202656.jpg&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶ï¼Œè´¦æˆ·bingheè¿˜ä¸æ˜¯ç®¡ç†å‘˜ï¼Œæ­¤æ—¶é€‰ä¸­bingheè´¦æˆ·ï¼Œç‚¹å‡»â€œè®¾ç½®ä¸ºç®¡ç†å‘˜â€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20200521004213623.jpg&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20200521004223621.jpg&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶ï¼Œbingheè´¦æˆ·å°±è¢«è®¾ç½®ä¸ºç®¡ç†å‘˜äº†ã€‚åˆ°æ­¤ï¼ŒHarborçš„å®‰è£…å°±å®Œæˆäº†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;6ä¿®æ”¹harborç«¯å£&quot;&gt;6.ä¿®æ”¹Harborç«¯å£&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;å¦‚æœå®‰è£…Harboråï¼Œå¤§å®¶éœ€è¦ä¿®æ”¹Harborçš„ç«¯å£ï¼Œå¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ­¥éª¤ä¿®æ”¹Harborçš„ç«¯å£ï¼Œè¿™é‡Œï¼Œæˆ‘ä»¥å°†80ç«¯å£ä¿®æ”¹ä¸º1180ç«¯å£ä¸ºä¾‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ï¼ˆ1ï¼‰ä¿®æ”¹harbor.ymlæ–‡ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;cd harbor
vim harbor.yml
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¿®æ”¹çš„é…ç½®é¡¹å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;hostname: 192.168.175.101
http:
  port: 1180
harbor_admin_password: binghe123
###å¹¶æŠŠhttpsæ³¨é‡Šæ‰ï¼Œä¸ç„¶åœ¨å®‰è£…çš„æ—¶å€™ä¼šæŠ¥é”™ï¼šERROR:root:Error: The protocol is https but attribute ssl_cert is not set
#https:
  #port: 443
  #certificate: /your/certificate/path
  #private_key: /your/private/key/path
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;ï¼ˆ2ï¼‰ä¿®æ”¹docker-compose.ymlæ–‡ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;vim docker-compose.yml
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¿®æ”¹çš„é…ç½®é¡¹å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;ports:
      - 1180:80
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;ï¼ˆ3ï¼‰ä¿®æ”¹config.ymlæ–‡ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;cd common/config/registry
vim config.yml
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¿®æ”¹çš„é…ç½®é¡¹å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;realm: http://192.168.175.101:1180/service/token
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;ï¼ˆ4ï¼‰é‡å¯Docker&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;systemctl daemon-reload
systemctl restart docker.service
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;ï¼ˆ5ï¼‰é‡å¯Harbor&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@binghe harbor]# docker-compose down
Stopping harbor-log ... done
Removing nginx             ... done
Removing harbor-portal     ... done
Removing harbor-jobservice ... done
Removing harbor-core       ... done
Removing redis             ... done
Removing registry          ... done
Removing registryctl       ... done
Removing harbor-db         ... done
Removing harbor-log        ... done
Removing network harbor_harbor
 
[root@binghe harbor]# ./prepare
prepare base dir is set to /mnt/harbor
Clearing the configuration file: /config/log/logrotate.conf
Clearing the configuration file: /config/nginx/nginx.conf
Clearing the configuration file: /config/core/env
Clearing the configuration file: /config/core/app.conf
Clearing the configuration file: /config/registry/root.crt
Clearing the configuration file: /config/registry/config.yml
Clearing the configuration file: /config/registryctl/env
Clearing the configuration file: /config/registryctl/config.yml
Clearing the configuration file: /config/db/env
Clearing the configuration file: /config/jobservice/env
Clearing the configuration file: /config/jobservice/config.yml
Generated configuration file: /config/log/logrotate.conf
Generated configuration file: /config/nginx/nginx.conf
Generated configuration file: /config/core/env
Generated configuration file: /config/core/app.conf
Generated configuration file: /config/registry/config.yml
Generated configuration file: /config/registryctl/env
Generated configuration file: /config/db/env
Generated configuration file: /config/jobservice/env
Generated configuration file: /config/jobservice/config.yml
loaded secret from file: /secret/keys/secretkey
Generated configuration file: /compose_location/docker-compose.yml
Clean up the input dir
 
[root@binghe harbor]# docker-compose up -d
Creating network &quot;harbor_harbor&quot; with the default driver
Creating harbor-log ... done
Creating harbor-db   ... done
Creating redis       ... done
Creating registry    ... done
Creating registryctl ... done
Creating harbor-core ... done
Creating harbor-jobservice ... done
Creating harbor-portal     ... done
Creating nginx             ... done
 
[root@binghe harbor]# docker ps -a
CONTAINER ID        IMAGE                                               COMMAND                  CREATED             STATUS                             PORTS
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;å®‰è£…jenkinsï¼ˆä¸€èˆ¬çš„åšæ³•ï¼‰&quot;&gt;å®‰è£…Jenkinsï¼ˆä¸€èˆ¬çš„åšæ³•ï¼‰&lt;/h2&gt;
&lt;h3 id=&quot;1å®‰è£…nfsï¼ˆä¹‹å‰å®‰è£…è¿‡çš„è¯ï¼Œå¯ä»¥çœç•¥æ­¤æ­¥ï¼‰&quot;&gt;1.å®‰è£…nfsï¼ˆä¹‹å‰å®‰è£…è¿‡çš„è¯ï¼Œå¯ä»¥çœç•¥æ­¤æ­¥ï¼‰&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨ nfs æœ€å¤§çš„é—®é¢˜å°±æ˜¯å†™æƒé™ï¼Œå¯ä»¥ä½¿ç”¨ kubernetes çš„ securityContext/runAsUser æŒ‡å®š jenkins å®¹å™¨ä¸­è¿è¡Œ jenkins çš„ç”¨æˆ· uidï¼Œä»¥æ­¤æ¥æŒ‡å®š nfs ç›®å½•çš„æƒé™ï¼Œè®© jenkins å®¹å™¨å¯å†™ï¼›ä¹Ÿå¯ä»¥ä¸é™åˆ¶ï¼Œè®©æ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥å†™ã€‚è¿™é‡Œä¸ºäº†ç®€å•ï¼Œå°±è®©æ‰€æœ‰ç”¨æˆ·å¯å†™äº†ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä¹‹å‰å·²ç»å®‰è£…è¿‡nfsï¼Œåˆ™è¿™ä¸€æ­¥å¯ä»¥çœç•¥ã€‚æ‰¾ä¸€å°ä¸»æœºï¼Œå®‰è£… nfsï¼Œè¿™é‡Œï¼Œæˆ‘ä»¥åœ¨MasterèŠ‚ç‚¹ï¼ˆbinghe101æœåŠ¡å™¨ï¼‰ä¸Šå®‰è£…nfsä¸ºä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å‘½ä»¤è¡Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤å®‰è£…å¹¶å¯åŠ¨nfsã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;yum install nfs-utils -y
systemctl start nfs-server
systemctl enable nfs-server
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;2åˆ›å»ºnfså…±äº«ç›®å½•&quot;&gt;2.åˆ›å»ºnfså…±äº«ç›®å½•&lt;/h3&gt;
&lt;p&gt;åœ¨MasterèŠ‚ç‚¹ï¼ˆbinghe101æœåŠ¡å™¨ï¼‰ä¸Šåˆ›å»º &lt;code&gt;/opt/nfs/jenkins-data&lt;/code&gt;ç›®å½•ä½œä¸ºnfsçš„å…±äº«ç›®å½•ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;mkdir -p /opt/nfs/jenkins-data
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œç¼–è¾‘/etc/exportsæ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;vim /etc/exports
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨/etc/exportsæ–‡ä»¶æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä¸€è¡Œé…ç½®ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;/opt/nfs/jenkins-data 192.168.175.0/24(rw,all_squash)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œçš„ ip ä½¿ç”¨ kubernetes node èŠ‚ç‚¹çš„ ip èŒƒå›´ï¼Œåé¢çš„ &lt;code&gt;all_squash&lt;/code&gt; é€‰é¡¹ä¼šå°†æ‰€æœ‰è®¿é—®çš„ç”¨æˆ·éƒ½æ˜ å°„æˆ nfsnobody ç”¨æˆ·ï¼Œä¸ç®¡ä½ æ˜¯ä»€ä¹ˆç”¨æˆ·è®¿é—®ï¼Œæœ€ç»ˆéƒ½ä¼šå‹ç¼©æˆ nfsnobodyï¼Œæ‰€ä»¥åªè¦å°† &lt;code&gt;/opt/nfs/jenkins-data&lt;/code&gt; çš„å±ä¸»æ”¹ä¸º nfsnobodyï¼Œé‚£ä¹ˆæ— è®ºä»€ä¹ˆç”¨æˆ·æ¥è®¿é—®éƒ½å…·æœ‰å†™æƒé™ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªé€‰é¡¹åœ¨å¾ˆå¤šæœºå™¨ä¸Šç”±äºç”¨æˆ· uid ä¸è§„èŒƒå¯¼è‡´å¯åŠ¨è¿›ç¨‹çš„ç”¨æˆ·ä¸åŒï¼Œä½†æ˜¯åŒæ—¶è¦å¯¹ä¸€ä¸ªå…±äº«ç›®å½•å…·æœ‰å†™æƒé™æ—¶å¾ˆæœ‰æ•ˆã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œä¸º &lt;code&gt;/opt/nfs/jenkins-data&lt;/code&gt;ç›®å½•æˆæƒï¼Œå¹¶é‡æ–°åŠ è½½nfsï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;chown -R 1000 /opt/nfs/jenkins-data/
systemctl reload nfs-server
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨K8Sé›†ç¾¤ä¸­ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ä¸Šä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡ŒéªŒè¯ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;showmount -e NFS_IP
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚æœèƒ½å¤Ÿçœ‹åˆ° /opt/nfs/jenkins-data å°±è¡¨ç¤º ok äº†ã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@binghe101 ~]# showmount -e 192.168.175.101
Export list for 192.168.175.101:
/opt/nfs/jenkins-data 192.168.175.0/24

[root@binghe102 ~]# showmount -e 192.168.175.101
Export list for 192.168.175.101:
/opt/nfs/jenkins-data 192.168.175.0/24
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;3åˆ›å»ºpv&quot;&gt;3.åˆ›å»ºPV&lt;/h3&gt;
&lt;p&gt;Jenkins å…¶å®åªè¦åŠ è½½å¯¹åº”çš„ç›®å½•å°±å¯ä»¥è¯»å–ä¹‹å‰çš„æ•°æ®ï¼Œä½†æ˜¯ç”±äº deployment æ— æ³•å®šä¹‰å­˜å‚¨å·ï¼Œå› æ­¤æˆ‘ä»¬åªèƒ½ä½¿ç”¨ StatefulSetã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆåˆ›å»º pvï¼Œpv æ˜¯ç»™ StatefulSet ä½¿ç”¨çš„ï¼Œæ¯æ¬¡ StatefulSet å¯åŠ¨éƒ½ä¼šé€šè¿‡ volumeClaimTemplates è¿™ä¸ªæ¨¡æ¿å»åˆ›å»º pvcï¼Œå› æ­¤å¿…é¡»å¾—æœ‰ pvï¼Œæ‰èƒ½ä¾› pvc ç»‘å®šã€‚&lt;/p&gt;
&lt;p&gt;åˆ›å»ºjenkins-pv.yamlæ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-yaml&quot;&gt;apiVersion: v1
kind: PersistentVolume
metadata:
  name: jenkins
spec:
  nfs:
    path: /opt/nfs/jenkins-data
    server: 192.168.175.101
  accessModes: [&quot;ReadWriteOnce&quot;]
  capacity:
    storage: 1Ti
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æˆ‘è¿™é‡Œç»™äº† 1Tå­˜å‚¨ç©ºé—´ï¼Œå¯ä»¥æ ¹æ®å®é™…é…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤åˆ›å»ºpvã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;kubectl apply -f jenkins-pv.yaml 
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;4åˆ›å»ºserviceaccount&quot;&gt;4.åˆ›å»ºserviceAccount&lt;/h3&gt;
&lt;p&gt;åˆ›å»ºservice accountï¼Œå› ä¸º jenkins åé¢éœ€è¦èƒ½å¤ŸåŠ¨æ€åˆ›å»º slaveï¼Œå› æ­¤å®ƒå¿…é¡»å…·å¤‡ä¸€äº›æƒé™ã€‚&lt;/p&gt;
&lt;p&gt;åˆ›å»ºjenkins-service-account.yamlæ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-yaml&quot;&gt;apiVersion: v1
kind: ServiceAccount
metadata:
  name: jenkins

---
kind: Role
apiVersion: rbac.authorization.k8s.io/v1beta1
metadata:
  name: jenkins
rules:
  - apiGroups: [&quot;&quot;]
    resources: [&quot;pods&quot;]
    verbs: [&quot;create&quot;, &quot;delete&quot;, &quot;get&quot;, &quot;list&quot;, &quot;patch&quot;, &quot;update&quot;, &quot;watch&quot;]
  - apiGroups: [&quot;&quot;]
    resources: [&quot;pods/exec&quot;]
    verbs: [&quot;create&quot;, &quot;delete&quot;, &quot;get&quot;, &quot;list&quot;, &quot;patch&quot;, &quot;update&quot;, &quot;watch&quot;]
  - apiGroups: [&quot;&quot;]
    resources: [&quot;pods/log&quot;]
    verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;]
  - apiGroups: [&quot;&quot;]
    resources: [&quot;secrets&quot;]
    verbs: [&quot;get&quot;]

---
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: RoleBinding
metadata:
  name: jenkins
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: jenkins
subjects:
  - kind: ServiceAccount
    name: jenkins
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸Šè¿°é…ç½®ä¸­ï¼Œåˆ›å»ºäº†ä¸€ä¸ª RoleBinding å’Œä¸€ä¸ª ServiceAccountï¼Œå¹¶ä¸”å°† RoleBinding çš„æƒé™ç»‘å®šåˆ°è¿™ä¸ªç”¨æˆ·ä¸Šã€‚æ‰€ä»¥ï¼Œjenkins å®¹å™¨å¿…é¡»ä½¿ç”¨è¿™ä¸ª ServiceAccount è¿è¡Œæ‰è¡Œï¼Œä¸ç„¶ RoleBinding çš„æƒé™å®ƒå°†ä¸å…·å¤‡ã€‚&lt;/p&gt;
&lt;p&gt;RoleBinding çš„æƒé™å¾ˆå®¹æ˜“å°±çœ‹æ‡‚äº†ï¼Œå› ä¸º jenkins éœ€è¦åˆ›å»ºå’Œåˆ é™¤ slaveï¼Œæ‰€ä»¥æ‰éœ€è¦ä¸Šé¢è¿™äº›æƒé™ã€‚è‡³äº secrets æƒé™ï¼Œåˆ™æ˜¯ https è¯ä¹¦ã€‚&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤åˆ›å»ºserviceAccountã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;kubectl apply -f jenkins-service-account.yaml 
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;5å®‰è£…jenkins&quot;&gt;5.å®‰è£…Jenkins&lt;/h3&gt;
&lt;p&gt;åˆ›å»ºjenkins-statefulset.yamlæ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-yaml&quot;&gt;apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: jenkins
  labels:
    name: jenkins
spec:
  selector:
    matchLabels:
      name: jenkins
  serviceName: jenkins
  replicas: 1
  updateStrategy:
    type: RollingUpdate
  template:
    metadata:
      name: jenkins
      labels:
        name: jenkins
    spec:
      terminationGracePeriodSeconds: 10
      serviceAccountName: jenkins
      containers:
        - name: jenkins
          image: docker.io/jenkins/jenkins:lts
          imagePullPolicy: IfNotPresent
          ports:
            - containerPort: 8080
            - containerPort: 32100
          resources:
            limits:
              cpu: 4
              memory: 4Gi
            requests:
              cpu: 4
              memory: 4Gi
          env:
            - name: LIMITS_MEMORY
              valueFrom:
                resourceFieldRef:
                  resource: limits.memory
                  divisor: 1Mi
            - name: JAVA_OPTS
              # value: -XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap -XX:MaxRAMFraction=1 -XshowSettings:vm -Dhudson.slaves.NodeProvisioner.initialDelay=0 -Dhudson.slaves.NodeProvisioner.MARGIN=50 -Dhudson.slaves.NodeProvisioner.MARGIN0=0.85
              value: -Xmx$(LIMITS_MEMORY)m -XshowSettings:vm -Dhudson.slaves.NodeProvisioner.initialDelay=0 -Dhudson.slaves.NodeProvisioner.MARGIN=50 -Dhudson.slaves.NodeProvisioner.MARGIN0=0.85
          volumeMounts:
            - name: jenkins-home
              mountPath: /var/jenkins_home
          livenessProbe:
            httpGet:
              path: /login
              port: 8080
            initialDelaySeconds: 60
            timeoutSeconds: 5
            failureThreshold: 12 # ~2 minutes
          readinessProbe:
            httpGet:
              path: /login
              port: 8080
            initialDelaySeconds: 60
            timeoutSeconds: 5
            failureThreshold: 12 # ~2 minutes
  # pvc æ¨¡æ¿ï¼Œå¯¹åº”ä¹‹å‰çš„ pv
  volumeClaimTemplates:
    - metadata:
        name: jenkins-home
      spec:
        accessModes: [&quot;ReadWriteOnce&quot;]
        resources:
          requests:
            storage: 1Ti
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;jenkins éƒ¨ç½²æ—¶éœ€è¦æ³¨æ„å®ƒçš„å‰¯æœ¬æ•°ï¼Œä½ çš„å‰¯æœ¬æ•°æœ‰å¤šå°‘å°±è¦æœ‰å¤šå°‘ä¸ª pvï¼ŒåŒæ ·ï¼Œå­˜å‚¨ä¼šæœ‰å¤šå€æ¶ˆè€—ã€‚è¿™é‡Œæˆ‘åªä½¿ç”¨äº†ä¸€ä¸ªå‰¯æœ¬ï¼Œå› æ­¤å‰é¢ä¹Ÿåªåˆ›å»ºäº†ä¸€ä¸ª pvã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…Jenkinsã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;kubectl apply -f jenkins-statefulset.yaml 
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;6åˆ›å»ºservice&quot;&gt;6.åˆ›å»ºService&lt;/h3&gt;
&lt;p&gt;åˆ›å»ºjenkins-service.yamlæ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-yaml&quot;&gt;apiVersion: v1
kind: Service
metadata:
  name: jenkins
spec:
  # type: LoadBalancer
  selector:
    name: jenkins
  # ensure the client ip is propagated to avoid the invalid crumb issue when using LoadBalancer (k8s &amp;gt;=1.7)
  #externalTrafficPolicy: Local
  ports:
    - name: http
      port: 80
      nodePort: 31888
      targetPort: 8080
      protocol: TCP
    - name: jenkins-agent
      port: 32100
      nodePort: 32100
      targetPort: 32100
      protocol: TCP
  type: NodePort
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…Serviceã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;kubectl apply -f jenkins-service.yaml 
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;7å®‰è£…-ingress&quot;&gt;7.å®‰è£… ingress&lt;/h3&gt;
&lt;p&gt;jenkins çš„ web ç•Œé¢éœ€è¦ä»é›†ç¾¤å¤–è®¿é—®ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©çš„æ˜¯ä½¿ç”¨ ingressã€‚åˆ›å»ºjenkins-ingress.yamlæ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-yaml&quot;&gt;apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  name: jenkins
spec:
  rules:
    - http:
        paths:
          - path: /
            backend:
              serviceName: jenkins
              servicePort: 31888
      host: jekins.binghe.com
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;è¿™é‡Œï¼Œéœ€è¦æ³¨æ„çš„æ˜¯hostå¿…é¡»é…ç½®ä¸ºåŸŸåæˆ–è€…ä¸»æœºåï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;The Ingress &quot;jenkins&quot; is invalid: spec.rules[0].host: Invalid value: &quot;192.168.175.101&quot;: must be a DNS name, not an IP address
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…ingressã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;kubectl apply -f jenkins-ingress.yaml 
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æœ€åï¼Œç”±äºæˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯è™šæ‹Ÿæœºæ¥æ­å»ºç›¸å…³çš„ç¯å¢ƒï¼Œåœ¨æœ¬æœºè®¿é—®è™šæ‹Ÿæœºæ˜ å°„çš„jekins.binghe.comæ—¶ï¼Œéœ€è¦é…ç½®æœ¬æœºçš„hostsæ–‡ä»¶ï¼Œåœ¨æœ¬æœºçš„hostsæ–‡ä»¶ä¸­åŠ å…¥å¦‚ä¸‹é…ç½®é¡¹ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;192.168.175.101 jekins.binghe.com
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ³¨æ„ï¼šåœ¨Windowsæ“ä½œç³»ç»Ÿä¸­ï¼Œhostsæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•å¦‚ä¸‹ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;C:\Windows\System32\drivers\etc
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œå°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸­é€šè¿‡é“¾æ¥ï¼š&lt;a href=&quot;http://jekins.binghe.com:31888&quot;&gt;http://jekins.binghe.com:31888&lt;/a&gt; æ¥è®¿é—®Jekinsäº†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç‰©ç†æœºå®‰è£…svn&quot;&gt;ç‰©ç†æœºå®‰è£…SVN&lt;/h2&gt;
&lt;p&gt;è¿™é‡Œï¼Œä»¥åœ¨MasterèŠ‚ç‚¹ï¼ˆbinghe101æœåŠ¡å™¨ï¼‰ä¸Šå®‰è£…SVNä¸ºä¾‹ã€‚&lt;/p&gt;
&lt;h3 id=&quot;1ä½¿ç”¨yumå®‰è£…svn&quot;&gt;1.ä½¿ç”¨yumå®‰è£…SVN&lt;/h3&gt;
&lt;p&gt;åœ¨å‘½ä»¤è¡Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…SVNã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;yum -y install subversion 
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;2åˆ›å»ºsvnåº“&quot;&gt;2.åˆ›å»ºSVNåº“&lt;/h3&gt;
&lt;p&gt;ä¾æ¬¡æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;#åˆ›å»º/data/svn
mkdir -p /data/svn 
#åˆå§‹åŒ–svn
svnserve -d -r /data/svn
#åˆ›å»ºä»£ç ä»“åº“
svnadmin create /data/svn/test
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;3é…ç½®svn&quot;&gt;3.é…ç½®SVN&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;mkdir /data/svn/conf
cp /data/svn/test/conf/* /data/svn/conf/
cd /data/svn/conf/
[root@binghe101 conf]# ll
æ€»ç”¨é‡ 20
-rw-r--r-- 1 root root 1080 5æœˆ  12 02:17 authz
-rw-r--r-- 1 root root  885 5æœˆ  12 02:17 hooks-env.tmpl
-rw-r--r-- 1 root root  309 5æœˆ  12 02:17 passwd
-rw-r--r-- 1 root root 4375 5æœˆ  12 02:17 svnserve.conf
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;é…ç½®authzæ–‡ä»¶ï¼Œ&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;vim authz
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é…ç½®åçš„å†…å®¹å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[aliases]
# joe = /C=XZ/ST=Dessert/L=Snake City/O=Snake Oil, Ltd./OU=Research Institute/CN=Joe Average

[groups]
# harry_and_sally = harry,sally
# harry_sally_and_joe = harry,sally,&amp;amp;joe
SuperAdmin = admin
binghe = admin,binghe

# [/foo/bar]
# harry = rw
# &amp;amp;joe = r
# * =

# [repository:/baz/fuz]
# @harry_and_sally = rw
# * = r

[test:/]
@SuperAdmin=rw
@binghe=rw
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;é…ç½®passwdæ–‡ä»¶&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;vim passwd
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é…ç½®åçš„å†…å®¹å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[users]
# harry = harryssecret
# sally = sallyssecret
admin = admin123
binghe = binghe123
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;é…ç½® svnserve.conf&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;vim svnserve.conf
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é…ç½®åçš„æ–‡ä»¶å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;### This file controls the configuration of the svnserve daemon, if you
### use it to allow access to this repository.  (If you only allow
### access through http: and/or file: URLs, then this file is
### irrelevant.)

### Visit http://subversion.apache.org/ for more information.

[general]
### The anon-access and auth-access options control access to the
### repository for unauthenticated (a.k.a. anonymous) users and
### authenticated users, respectively.
### Valid values are &quot;write&quot;, &quot;read&quot;, and &quot;none&quot;.
### Setting the value to &quot;none&quot; prohibits both reading and writing;
### &quot;read&quot; allows read-only access, and &quot;write&quot; allows complete 
### read/write access to the repository.
### The sample settings below are the defaults and specify that anonymous
### users have read-only access to the repository, while authenticated
### users have read and write access to the repository.
anon-access = none
auth-access = write
### The password-db option controls the location of the password
### database file.  Unless you specify a path starting with a /,
### the file's location is relative to the directory containing
### this configuration file.
### If SASL is enabled (see below), this file will NOT be used.
### Uncomment the line below to use the default password file.
password-db = /data/svn/conf/passwd
### The authz-db option controls the location of the authorization
### rules for path-based access control.  Unless you specify a path
### starting with a /, the file's location is relative to the
### directory containing this file.  The specified path may be a
### repository relative URL (^/) or an absolute file:// URL to a text
### file in a Subversion repository.  If you don't specify an authz-db,
### no path-based access control is done.
### Uncomment the line below to use the default authorization file.
authz-db = /data/svn/conf/authz
### The groups-db option controls the location of the file with the
### group definitions and allows maintaining groups separately from the
### authorization rules.  The groups-db file is of the same format as the
### authz-db file and should contain a single [groups] section with the
### group definitions.  If the option is enabled, the authz-db file cannot
### contain a [groups] section.  Unless you specify a path starting with
### a /, the file's location is relative to the directory containing this
### file.  The specified path may be a repository relative URL (^/) or an
### absolute file:// URL to a text file in a Subversion repository.
### This option is not being used by default.
# groups-db = groups
### This option specifies the authentication realm of the repository.
### If two repositories have the same authentication realm, they should
### have the same password database, and vice versa.  The default realm
### is repository's uuid.
realm = svn
### The force-username-case option causes svnserve to case-normalize
### usernames before comparing them against the authorization rules in the
### authz-db file configured above.  Valid values are &quot;upper&quot; (to upper-
### case the usernames), &quot;lower&quot; (to lowercase the usernames), and
### &quot;none&quot; (to compare usernames as-is without case conversion, which
### is the default behavior).
# force-username-case = none
### The hooks-env options specifies a path to the hook script environment 
### configuration file. This option overrides the per-repository default
### and can be used to configure the hook script environment for multiple 
### repositories in a single file, if an absolute path is specified.
### Unless you specify an absolute path, the file's location is relative
### to the directory containing this file.
# hooks-env = hooks-env

[sasl]
### This option specifies whether you want to use the Cyrus SASL
### library for authentication. Default is false.
### Enabling this option requires svnserve to have been built with Cyrus
### SASL support; to check, run 'svnserve --version' and look for a line
### reading 'Cyrus SASL authentication is available.'
# use-sasl = true
### These options specify the desired strength of the security layer
### that you want SASL to provide. 0 means no encryption, 1 means
### integrity-checking only, values larger than 1 are correlated
### to the effective key length for encryption (e.g. 128 means 128-bit
### encryption). The values below are the defaults.
# min-encryption = 0
# max-encryption = 256
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œå°†/data/svn/confç›®å½•ä¸‹çš„svnserve.confæ–‡ä»¶å¤åˆ¶åˆ°/data/svn/test/conf/ç›®å½•ä¸‹ã€‚å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@binghe101 conf]# cp /data/svn/conf/svnserve.conf /data/svn/test/conf/
cpï¼šæ˜¯å¦è¦†ç›–'/data/svn/test/conf/svnserve.conf'ï¼Ÿ y
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;4å¯åŠ¨svnæœåŠ¡&quot;&gt;4.å¯åŠ¨SVNæœåŠ¡&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;ï¼ˆ1ï¼‰åˆ›å»ºsvnserve.serviceæœåŠ¡&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åˆ›å»ºsvnserve.serviceæ–‡ä»¶&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;vim /usr/lib/systemd/system/svnserve.service
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ–‡ä»¶çš„å†…å®¹å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[Unit]
Description=Subversion protocol daemon
After=syslog.target network.target
Documentation=man:svnserve(8)

[Service]
Type=forking
EnvironmentFile=/etc/sysconfig/svnserve
#ExecStart=/usr/bin/svnserve --daemon --pid-file=/run/svnserve/svnserve.pid $OPTIONS
ExecStart=/usr/bin/svnserve --daemon $OPTIONS
PrivateTmp=yes

[Install]
WantedBy=multi-user.target
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ¥ä¸‹æ¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ä½¿é…ç½®ç”Ÿæ•ˆã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;systemctl daemon-reload
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å‘½ä»¤æ‰§è¡ŒæˆåŠŸåï¼Œä¿®æ”¹ /etc/sysconfig/svnserve æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;vim /etc/sysconfig/svnserve 
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¿®æ”¹åçš„æ–‡ä»¶å†…å®¹å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;# OPTIONS is used to pass command-line arguments to svnserve.
# 
# Specify the repository location in -r parameter:
OPTIONS=&quot;-r /data/svn&quot;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;ï¼ˆ2ï¼‰å¯åŠ¨SVN&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆæŸ¥çœ‹SVNçŠ¶æ€ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@itence10 conf]# systemctl status svnserve.service
â— svnserve.service - Subversion protocol daemon
   Loaded: loaded (/usr/lib/systemd/system/svnserve.service; disabled; vendor preset: disabled)
   Active: inactive (dead)
     Docs: man:svnserve(8)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œæ­¤æ—¶SVNå¹¶æ²¡æœ‰å¯åŠ¨ï¼Œæ¥ä¸‹æ¥ï¼Œéœ€è¦å¯åŠ¨SVNã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;systemctl start svnserve.service
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è®¾ç½®SVNæœåŠ¡å¼€æœºè‡ªå¯åŠ¨ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;systemctl enable svnserve.service
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œå°±å¯ä»¥ä¸‹è½½å®‰è£…TortoiseSVNï¼Œè¾“å…¥é“¾æ¥svn://192.168.0.10/test å¹¶è¾“å…¥ç”¨æˆ·åbingheï¼Œå¯†ç binghe123æ¥è¿æ¥SVNäº†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç‰©ç†æœºå®‰è£…jenkins&quot;&gt;ç‰©ç†æœºå®‰è£…Jenkins&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼šå®‰è£…Jenkinsä¹‹å‰éœ€è¦å®‰è£…JDKå’ŒMavenï¼Œæˆ‘è¿™é‡ŒåŒæ ·å°†Jenkinså®‰è£…åœ¨MasterèŠ‚ç‚¹ï¼ˆbinghe101æœåŠ¡å™¨ï¼‰ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;1å¯ç”¨jenkinsåº“&quot;&gt;1.å¯ç”¨Jenkinsåº“&lt;/h3&gt;
&lt;p&gt;è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥ä¸‹è½½repoæ–‡ä»¶å¹¶å¯¼å…¥GPGå¯†é’¥ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;wget -O /etc/yum.repos.d/jenkins.repo http://pkg.jenkins-ci.org/redhat-stable/jenkins.repo
rpm --import https://jenkins-ci.org/redhat/jenkins-ci.org.key
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;2å®‰è£…jenkins&quot;&gt;2.å®‰è£…Jenkins&lt;/h3&gt;
&lt;p&gt;æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…Jenkisã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;yum install jenkins
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œä¿®æ”¹Jenkinsé»˜è®¤ç«¯å£ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;vim /etc/sysconfig/jenkins
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¿®æ”¹åçš„ä¸¤é¡¹é…ç½®å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;JENKINS_JAVA_CMD=&quot;/usr/local/jdk1.8.0_212/bin/java&quot;
JENKINS_PORT=&quot;18080&quot;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ­¤æ—¶ï¼Œå·²ç»å°†Jenkinsçš„ç«¯å£ç”±8080ä¿®æ”¹ä¸º18080&lt;/p&gt;
&lt;h3 id=&quot;3å¯åŠ¨jenkins&quot;&gt;3.å¯åŠ¨Jenkins&lt;/h3&gt;
&lt;p&gt;åœ¨å‘½ä»¤è¡Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤å¯åŠ¨Jenkinsã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;systemctl start jenkins
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é…ç½®Jenkinså¼€æœºè‡ªå¯åŠ¨ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;systemctl enable jenkins
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æŸ¥çœ‹Jenkinsçš„è¿è¡ŒçŠ¶æ€ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@itence10 ~]# systemctl status jenkins
â— jenkins.service - LSB: Jenkins Automation Server
   Loaded: loaded (/etc/rc.d/init.d/jenkins; generated)
   Active: active (running) since Tue 2020-05-12 04:33:40 EDT; 28s ago
     Docs: man:systemd-sysv-generator(8)
    Tasks: 71 (limit: 26213)
   Memory: 550.8M
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¯´æ˜ï¼ŒJenkinså¯åŠ¨æˆåŠŸã€‚&lt;/p&gt;
&lt;h2 id=&quot;é…ç½®jenkinsè¿è¡Œç¯å¢ƒ&quot;&gt;é…ç½®Jenkinsè¿è¡Œç¯å¢ƒ&lt;/h2&gt;
&lt;h3 id=&quot;1ç™»å½•jenkins&quot;&gt;1.ç™»å½•Jenkins&lt;/h3&gt;
&lt;p&gt;é¦–æ¬¡å®‰è£…åï¼Œéœ€è¦é…ç½®Jenkinsçš„è¿è¡Œç¯å¢ƒã€‚é¦–å…ˆï¼Œåœ¨æµè§ˆå™¨åœ°å€æ è®¿é—®é“¾æ¥http://192.168.0.10:18080ï¼Œæ‰“å¼€Jenkinsç•Œé¢ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20200521004241581.jpg&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ ¹æ®æç¤ºä½¿ç”¨å¦‚ä¸‹å‘½ä»¤åˆ°æœåŠ¡å™¨ä¸Šæ‰¾å¯†ç å€¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@binghe101 ~]# cat /var/lib/jenkins/secrets/initialAdminPassword
71af861c2ab948a1b6efc9f7dde90776
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å°†å¯†ç 71af861c2ab948a1b6efc9f7dde90776å¤åˆ¶åˆ°æ–‡æœ¬æ¡†ï¼Œç‚¹å‡»ç»§ç»­ã€‚ä¼šè·³è½¬åˆ°è‡ªå®šä¹‰Jenkinsé¡µé¢ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20200521004255645.jpg&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œï¼Œå¯ä»¥ç›´æ¥é€‰æ‹©â€œå®‰è£…æ¨èçš„æ’ä»¶â€ã€‚ä¹‹åä¼šè·³è½¬åˆ°ä¸€ä¸ªå®‰è£…æ’ä»¶çš„é¡µé¢ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20200521004304953.jpg&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ­¤æ­¥éª¤å¯èƒ½æœ‰ä¸‹è½½å¤±è´¥çš„æƒ…å†µï¼Œå¯ç›´æ¥å¿½ç•¥ã€‚&lt;/p&gt;
&lt;h3 id=&quot;2å®‰è£…æ’ä»¶&quot;&gt;2.å®‰è£…æ’ä»¶&lt;/h3&gt;
&lt;p&gt;éœ€è¦å®‰è£…çš„æ’ä»¶&lt;/p&gt;
&lt;ul readability=&quot;0&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;Kubernetes Cli Pluginï¼šè¯¥æ’ä»¶å¯ç›´æ¥åœ¨Jenkinsä¸­ä½¿ç”¨kuberneteså‘½ä»¤è¡Œè¿›è¡Œæ“ä½œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;Kubernetes pluginï¼š ä½¿ç”¨kubernetesåˆ™éœ€è¦å®‰è£…è¯¥æ’ä»¶&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;Kubernetes Continuous Deploy Pluginï¼škuberneteséƒ¨ç½²æ’ä»¶ï¼Œå¯æ ¹æ®éœ€è¦ä½¿ç”¨&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;è¿˜æœ‰æ›´å¤šçš„æ’ä»¶å¯ä¾›é€‰æ‹©ï¼Œå¯ç‚¹å‡» ç³»ç»Ÿç®¡ç†-&amp;gt;ç®¡ç†æ’ä»¶è¿›è¡Œç®¡ç†å’Œæ·»åŠ ï¼Œå®‰è£…ç›¸åº”çš„Dockeræ’ä»¶ã€SSHæ’ä»¶ã€Mavenæ’ä»¶ã€‚å…¶ä»–çš„æ’ä»¶å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œå®‰è£…ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/2020052100431619.jpg&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20200521004326575.jpg&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;3é…ç½®jenkins&quot;&gt;3.é…ç½®Jenkins&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;ï¼ˆ1ï¼‰é…ç½®JDKå’ŒMaven&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨Global Tool Configurationä¸­é…ç½®JDKå’ŒMavenï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œæ‰“å¼€Global Tool Configurationç•Œé¢ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20200521004340563.jpg&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥å°±å¼€å§‹é…ç½®JDKå’ŒMavenäº†ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºæˆ‘åœ¨æœåŠ¡å™¨ä¸Šå°†Mavenå®‰è£…åœ¨/usr/local/maven-3.6.3ç›®å½•ä¸‹ï¼Œæ‰€ä»¥ï¼Œéœ€è¦åœ¨â€œMaven é…ç½®â€ä¸­è¿›è¡Œé…ç½®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20200521004351904.jpg&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œé…ç½®JDKï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/2020052100440247.jpg&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼šä¸è¦å‹¾é€‰â€œInstall automaticallyâ€&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œé…ç½®Mavenï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20200521004411716.jpg&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼šä¸è¦å‹¾é€‰â€œInstall automaticallyâ€&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ï¼ˆ2ï¼‰é…ç½®SSH&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿›å…¥Jenkinsçš„Configure Systemç•Œé¢é…ç½®SSHï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20200521004422607.jpg&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ‰¾åˆ° SSH remote hosts è¿›è¡Œé…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20200521004432606.jpg&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20200521004445781.jpg&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;p&gt;é…ç½®å®Œæˆåï¼Œç‚¹å‡»Check connectionæŒ‰é’®ï¼Œä¼šæ˜¾ç¤º Successfull connectionã€‚å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/202005210044581.jpg&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è‡³æ­¤ï¼ŒJenkinsçš„åŸºæœ¬é…ç½®å°±å®Œæˆäº†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å†™åœ¨æœ€å&quot;&gt;å†™åœ¨æœ€å&lt;/h2&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;å¦‚æœè§‰å¾—æ–‡ç« å¯¹ä½ æœ‰ç‚¹å¸®åŠ©ï¼Œè¯·å¾®ä¿¡æœç´¢å¹¶å…³æ³¨ã€Œ å†°æ²³æŠ€æœ¯ ã€å¾®ä¿¡å…¬ä¼—å·ï¼Œè·Ÿå†°æ²³å­¦ä¹ å„ç§ç¼–ç¨‹æŠ€æœ¯ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æœ€åé™„ä¸ŠK8Sæœ€å…¨çŸ¥è¯†å›¾è°±é“¾æ¥ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.processon.com/view/link/5ac64532e4b00dc8a02f05eb?spm=a2c4e.10696291.0.0.6ec019a4bYSFIw#map&quot;&gt;https://www.processon.com/view/link/5ac64532e4b00dc8a02f05eb?spm=a2c4e.10696291.0.0.6ec019a4bYSFIw#map&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç¥å¤§å®¶åœ¨å­¦ä¹ K8Sæ—¶ï¼Œå°‘èµ°å¼¯è·¯ã€‚&lt;/p&gt;
</description>
<pubDate>Thu, 21 May 2020 14:53:00 +0000</pubDate>
<dc:creator>å†°æ²³å›¢é˜Ÿ</dc:creator>
<og:description>å†™åœ¨å‰é¢ æœ€è¿‘åœ¨ K8S 1.18.2 ç‰ˆæœ¬çš„é›†ç¾¤ä¸Šæ­å»ºDevOpsç¯å¢ƒï¼ŒæœŸé—´é‡åˆ°äº†å„ç§å‘ã€‚ç›®å‰ï¼Œæ­å»ºç¯å¢ƒçš„è¿‡ç¨‹ä¸­å‡ºç°çš„å„ç§å‘å‡å·²è¢«å¡«å¹³ï¼Œç‰¹æ­¤è®°å½•ï¼Œå¹¶åˆ†äº«ç»™å¤§å®¶ï¼ æœåŠ¡å™¨è§„åˆ’ | IP | ä¸»æœºå |</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/binghe001/p/12934192.html</dc:identifier>
</item>
</channel>
</rss>