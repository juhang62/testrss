<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>åšå®¢å›­_é¦–é¡µ</title>
<link></link>
<description>ä»£ç æ”¹å˜ä¸–ç•Œ</description>
<item>
<title>ä¹ç§é«˜æ€§èƒ½å¯ç”¨é«˜å¹¶å‘çš„æŠ€æœ¯æ¶æ„ - èŒèŒä¸¶å°é­”ç‹</title>
<link>http://www.cnblogs.com/xiaomowang/p/13051101.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/xiaomowang/p/13051101.html</guid>
<description>&lt;p&gt;åˆ†å±‚æ¶æ„æ˜¯é€»è¾‘ä¸Šçš„ï¼Œåœ¨ç‰©ç†éƒ¨ç½²ä¸Šï¼Œä¸‰å±‚æ¶æ„å¯ä»¥éƒ¨ç½²åœ¨åŒä¸€ä¸ªç‰©ç†æœºå™¨ä¸Šï¼Œä½†æ˜¯éšç€ç½‘ç«™ä¸šåŠ¡çš„å‘å±•ï¼Œå¿…ç„¶éœ€è¦å¯¹å·²ç»åˆ†å±‚çš„æ¨¡å—åˆ†ç¦»éƒ¨ç½²ï¼Œå³ä¸‰å±‚ç»“æ„åˆ†åˆ«éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œæ˜¯ç½‘ç«™æ‹¥æœ‰æ›´å¤šçš„è®¡ç®—èµ„æºä»¥åº”å¯¹è¶Šæ¥è¶Šå¤šçš„ç”¨æˆ·è®¿é—®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Â 1ã€åˆ†å±‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åˆ†å±‚æ˜¯ä¼ä¸šåº”ç”¨ç³»ç»Ÿä¸­æœ€å¸¸è§çš„ä¸€ç§æ¶æ„æ¨¡å¼ï¼Œå°†ç³»ç»Ÿåœ¨æ¨ªå‘ç»´åº¦ä¸Šåˆ‡åˆ†æˆå‡ ä¸ªéƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†è´Ÿè´£ä¸€éƒ¨åˆ†ç›¸å¯¹ç®€å•å¹¶æ¯”è¾ƒå•ä¸€çš„èŒè´£ï¼Œç„¶åé€šè¿‡ä¸Šå±‚å¯¹ä¸‹å±‚çš„ä¾èµ–å’Œç»´åº¦ç»„æˆä¸€ä¸ªå®Œæ•´çš„ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç½‘ç«™çš„åˆ†å±‚æ¶æ„ä¸­ï¼Œå¸¸è§çš„ä¸º3å±‚ï¼Œå³åº”ç”¨å±‚ã€æœåŠ¡å±‚ã€æ•°æ®å±‚ã€‚åº”ç”¨å±‚å…·ä½“è´Ÿè´£ä¸šåŠ¡å’Œè§†å›¾çš„å±•ç¤ºï¼›æœåŠ¡å±‚ä¸ºåº”ç”¨å±‚æä¾›æœåŠ¡æ”¯æŒï¼›æ•°æ®åº“æä¾›æ•°æ®å­˜å‚¨è®¿é—®æœåŠ¡ï¼Œå¦‚æ•°æ®åº“ã€ç¼“å­˜ã€æ–‡ä»¶ã€æœç´¢å¼•æ“ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;åˆ†å±‚æ¶æ„æ˜¯é€»è¾‘ä¸Šçš„ï¼Œåœ¨ç‰©ç†éƒ¨ç½²ä¸Šï¼Œä¸‰å±‚æ¶æ„å¯ä»¥éƒ¨ç½²åœ¨åŒä¸€ä¸ªç‰©ç†æœºä¸Šï¼Œä½†æ˜¯éšç€ç½‘ç«™ä¸šåŠ¡çš„å‘å±•ï¼Œå¿…ç„¶éœ€è¦å¯¹å·²ç»åˆ†å±‚çš„æ¨¡å—åˆ†ç¦»éƒ¨ç½²ï¼Œå³ä¸‰å±‚ç»“æ„åˆ†åˆ«éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œä½¿ç½‘ç«™æ‹¥æœ‰æ›´å¤šçš„è®¡ç®—èµ„æºä»¥åº”å¯¹è¶Šæ¥è¶Šå¤šçš„ç”¨æˆ·è®¿é—®ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œè™½ç„¶åˆ†å±‚æ¶æ„æ¨¡å¼æœ€åˆçš„ç›®çš„æ˜¯è§„åˆ’è½¯ä»¶æ¸…æ™°çš„é€»è¾‘ç»“æ„ä»¥ä¾¿äºå¼€å‘ç»´æŠ¤ï¼Œä½†åœ¨ç½‘ç«™çš„å‘å±•è¿‡ç¨‹ä¸­ï¼Œåˆ†å±‚ç»“æ„å¯¹ç½‘ç«™æ”¯æŒé«˜å¹¶å‘å‘åˆ†å¸ƒå¼æ–¹å‘çš„å‘å±•è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/799221/202006/799221-20200605171422392-1754530218.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â &lt;strong&gt;2ã€å†—ä½™&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç½‘ç«™éœ€è¦7*24å°æ—¶è¿ç»­è¿è¡Œï¼Œé‚£ä¹ˆå°±å¾—æœ‰ç›¸åº”çš„å†—ä½™æœºåˆ¶ï¼Œä»¥é˜²æ­¢æŸå°æœºå™¨å®•æ‰æ—¶æ— æ³•è®¿é—®ï¼Œè€Œå†—ä½™åˆ™å¯ä»¥é€šè¿‡éƒ¨ç½²è‡³å°‘ä¸¤å°æœåŠ¡å™¨æ„æˆä¸€ä¸ªé›†ç¾¤å®ç°æœåŠ¡é«˜å¯ç”¨ã€‚æ•°æ®åº“é™¤äº†å®šæœŸå¤‡ä»½è¿˜éœ€è¦å®ç°å†·çƒ­å¤‡ä»½ã€‚ç”šè‡³å¯ä»¥åœ¨å…¨çƒèŒƒå›´å†…éƒ¨ç½²ç¾å¤‡æ•°æ®ä¸­å¿ƒã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3ã€åˆ†ç¦»&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœè¯´åˆ†å±‚å°†è½¯ä»¶æ¨ªå‘æ–¹é¢è¿›è¡Œåˆ‡åˆ†ï¼Œé‚£ä¹ˆåˆ†éš”å°±æ˜¯åœ¨çºµå‘æ–¹é¢å¯¹è½¯ä»¶è¿›è¡Œåˆ‡åˆ†ã€‚ç½‘ç«™è¶Šå¤§ï¼ŒåŠŸèƒ½è¶Šå¤æ‚ï¼ŒæœåŠ¡å’Œæ•°æ®å¤„ç†çš„ç§ç±»ä¹Ÿè¶Šå¤šï¼Œå°†è¿™äº›ä¸åŒçš„åŠŸèƒ½å’ŒæœåŠ¡åˆ†ç¦»å¼€æ¥ï¼ŒåŒ…è£…æˆé«˜å†…èšä½è€¦åˆçš„æ¨¡å—å•å…ƒï¼Œä¸ä»…æœ‰åŠ©äºè½¯ä»¶çš„å¼€å‘ç»´æŠ¤ï¼Œä¹Ÿä¾¿äºä¸åŒæ¨¡å—çš„åˆ†å¸ƒå¼éƒ¨ç½²ï¼Œæé«˜ç½‘ç«™çš„å¹¶å‘å¤„ç†èƒ½åŠ›å’ŒåŠŸèƒ½æ‰©å±•èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;å¤§å‹ç½‘ç«™åˆ†éš”çš„ç²’åº¦å¯èƒ½ä¼šå¾ˆå°ã€‚æ¯”å¦‚åœ¨åº”ç”¨å±‚ï¼Œå°†ä¸åŒä¸šåŠ¡è¿›è¡Œåˆ†éš”ï¼Œä¾‹å¦‚å°†è´­ç‰©ã€è®ºå›ã€æœç´¢ã€å¹¿å‘Šåˆ†éš”æˆä¸åŒçš„åº”ç”¨ï¼Œæœ‰ç‹¬ç«‹çš„å›¢é˜Ÿè´Ÿè´£ï¼Œéƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4ã€å¼‚æ­¥&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨å¼‚æ­¥ï¼Œä¸šåŠ¡ä¹‹é—´çš„æ¶ˆæ¯ä¼ é€’ä¸æ˜¯åŒæ­¥è°ƒç”¨ï¼Œè€Œæ˜¯å°†ä¸€ä¸ªä¸šåŠ¡æ“ä½œåˆ†æˆå¤šä¸ªé˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µä¹‹é—´é€šè¿‡å…±äº«æ•°æ®çš„æ–¹æ³•å¼‚æ­¥æ‰§è¡Œè¿›è¡Œåä½œã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“å®ç°åˆ™åœ¨å•ä¸€æœåŠ¡å™¨å†…éƒ¨å¯ç”¨é€šè¿‡å¤šçº¿ç¨‹å…±äº«å†…å­˜çš„æ–¹å¼å¤„ç†ã€‚åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå¯ç”¨é€šè¿‡åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—æ¥å®ç°å¼‚æ­¥ã€‚&lt;/p&gt;
&lt;p&gt;å¼‚æ­¥æ¶æ„çš„å…¸å‹å°±æ˜¯ç”Ÿäº§è€…æ¶ˆè´¹è€…æ–¹å¼ï¼Œä¸¤è€…ä¸å­˜åœ¨ç›´æ¥è°ƒç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;5ã€åˆ†å¸ƒå¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¯¹äºå¤§å‹ç½‘ç«™ï¼Œåˆ†å±‚å’Œåˆ†éš”çš„ä¸€ä¸ªä¸»è¦ç›®çš„æ—¶ä¸ºäº†åˆ‡åˆ†åçš„æ¨¡å—ä¾¿äºåˆ†å¸ƒå¼éƒ¨ç½²ï¼Œå³å°†ä¸åŒæ¨¡å—éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œé€šè¿‡è¿œç¨‹è°ƒç”¨ååŒå·¥ä½œã€‚åˆ†å¸ƒå¼ä»¥ä¸ºç€å¯ä»¥ä½¿ç”¨æ›´å¤šçš„è®¡ç®—æœºå®ŒæˆåŒæ ·çš„å·¥ä½œï¼Œè®¡ç®—æœºè¶Šå¤šï¼ŒCPUã€å†…å­˜ã€å­˜å‚¨èµ„æºå°±è¶Šå¤šï¼Œèƒ½å¤„ç†çš„é«˜å¹¶å‘è®¿é—®å’Œæ•°æ®é‡å°±è¶Šå¤§ï¼Œè¿›è€Œèƒ½å¤Ÿä¸ºæ›´å¤šçš„ç”¨æˆ·æä¾›æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç½‘ç«™åº”ç”¨ä¸­ï¼Œå¸¸ç”¨çš„åˆ†å¸ƒå¼æ–¹æ¡ˆæœ‰ä»¥ä¸‹å‡ ç§ï¼š&lt;/p&gt;
&lt;p&gt;åˆ†å¸ƒå¼åº”ç”¨å’ŒæœåŠ¡ï¼šå°†åˆ†å±‚å’Œåˆ†éš”åçš„åº”ç”¨å’ŒæœåŠ¡æ¨¡å—åˆ†å¸ƒå¼éƒ¨ç½²ï¼Œå¯ä»¥æ”¹å–„ç½‘ç»œæ€§èƒ½å’Œå¹¶å‘æ€§ã€åŠ å¿«å¼€å‘å’Œå‘å¸ƒé€Ÿåº¦ã€å‡å°‘æ•°æ®åº“è¿æ¥èµ„æºæ¶ˆè€—ã€‚&lt;/p&gt;
&lt;p&gt;åˆ†å¸ƒå¼é™æ€èµ„æºï¼šç½‘ç«™çš„é™æ€èµ„æºå¦‚JSã€CSSã€logoå›¾ç‰‡ç­‰èµ„æºç‹¬ç«‹åˆ†å¸ƒéƒ¨ç½²ï¼Œå¹¶é‡‡ç”¨ç‹¬ç«‹çš„åŸŸåï¼Œå³äººä»¬é•¿å¤šçš„åŠ¨é™åˆ†ç¦»ã€‚é™æ€èµ„æºåˆ†å¸ƒå¼éƒ¨ç½²å¯ä»¥å‡è½»åº”ç”¨æœåŠ¡å™¨çš„è´Ÿè½½å‹åŠ›ï¼›é€šè¿‡ä½¿ç”¨ç‹¬ç«‹åŸŸååŠ å¿«æµè§ˆå™¨å¹¶å‘åŠ è½½é€Ÿåº¦ã€‚&lt;/p&gt;
&lt;p&gt;åˆ†å¸ƒå¼æ•°æ®å’Œå­˜å‚¨ï¼šå¤§å‹ç½‘ç«™éœ€è¦å¤„ç†ä»¥Pä¸ºå•ä½çš„æµ·é‡æ•°æ®ï¼Œå•å°è®¡ç®—æœºæ— æ³•æä¾›å¦‚æ­¤å¤§çš„å­˜å‚¨æ§ä»¶ï¼Œè¿™äº›æ•°æ®éœ€è¦åˆ†å¸ƒå¼å­˜å‚¨ã€‚&lt;/p&gt;
&lt;p&gt;åˆ†å¸ƒå¼è®¡ç®—ï¼šç›®å‰ç½‘ç«™æ™®éä½¿ç”¨Hadoopå’ŒMapReduceåˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶è¿›è¡Œæ­¤ç±»æ‰¹å¤„ç†è®¡ç®—ï¼Œå…¶ç‰¹ç‚¹æ˜¯ç§»åŠ¨è®¡ç®—è€Œä¸æ˜¯ç§»åŠ¨æ•°æ®ï¼Œå°†è®¡ç®—ç¨‹åºåˆ†å‘åˆ°æ•°æ®æ‰€åœ¨çš„ä½ç½®ä»¥åŠ é€Ÿè®¡ç®—å’Œåˆ†å¸ƒå¼è®¡ç®—ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/799221/202006/799221-20200605173432720-1018693988.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â &lt;strong&gt;6ã€å®‰å…¨&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç½‘ç«™åœ¨å®‰å…¨æ¶æ„æ–¹é¢æœ‰è®¸å¤šæ¨¡å¼ï¼šé€šè¿‡å¯†ç å’Œæ‰‹æœºæ ¡éªŒç è¿›è¡Œèº«ä»½è®¤è¯ï¼›ç™»å½•ã€äº¤ä»¥éœ€è¦å¯¹ç½‘ç»œé€šä¿¡è¿›è¡ŒåŠ å¯†ï¼›ä¸ºäº†é˜²æ­¢æœºå™¨äººç¨‹åºæ»¥ç”¨èµ„æºï¼Œéœ€è¦ä½¿ç”¨éªŒè¯ç è¿›è¡Œè¯†åˆ«ï¼›å¯¹å¸¸è§çš„XSSå·¥å³ã€SQLæ³¨å…¥éœ€è¦ç¼–ç è½¬æ¢ï¼›åƒåœ¾ä¿¡æ¯éœ€è¦è¿‡æ»¤ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;7ã€è‡ªåŠ¨åŒ–&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å…·ä½“ç”±è‡ªåŠ¨åŒ–å‘å¸ƒè¿‡ç¨‹ï¼Œè‡ªåŠ¨åŒ–ä»£ç ç®¡ç†ã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€è‡ªåŠ¨åŒ–å®‰å…¨æ£€æµ‹ã€è‡ªåŠ¨åŒ–éƒ¨ç½²ã€è‡ªåŠ¨åŒ–ç›‘æ§ã€è‡ªåŠ¨åŒ–æŠ¥è­¦ã€è‡ªåŠ¨åŒ–å¤±æ•ˆè½¬ç§»ã€è‡ªåŠ¨åŒ–å¤±æ•ˆæ¢å¤ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;8ã€é›†ç¾¤&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¯¹äºç”¨æˆ·è®¿é—®é›†ä¸­çš„æ¨¡å—éœ€è¦å°†ç‹¬ç«‹éƒ¨ç½²çš„æœåŠ¡å™¨é›†ç¾¤åŒ–ï¼Œå³å¤šå°æœåŠ¡å™¨éƒ¨ç½²ç›¸åŒçš„åº”ç”¨å¤Ÿæˆä¸€ä¸ªé›†ç¾¤ï¼Œé€šè¿‡è´Ÿè½½å‡è¡¡è®¾å¤‡å…±åŒå¯¹å¤–æä¾›æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;æœåŠ¡å™¨é›†ç¾¤èƒ½å¤Ÿä¸ºç›¸åŒçš„æœåŠ¡æä¾›æ›´å¤šçš„å¹¶å‘æ”¯æŒï¼Œå› æ­¤å½“æœ‰æ›´å¤šçš„ç”¨æˆ·è®¿é—®æ—¶ï¼Œåªéœ€è¦å‘é›†ç¾¤ä¸­åŠ å…¥æ–°çš„æœºå™¨å³å¯ï¼›å¦å¤–å¯ä»¥å®ç°å½“å…¶ä¸­çš„æŸå°æœåŠ¡å™¨å‘ç”Ÿæ•…éšœæ—¶ï¼Œå¯ä»¥é€šè¿‡è´Ÿè½½å‡è¡¡çš„å¤±æ•ˆè½¬ç§»æœºåˆ¶å°†è¯·æ±‚è½¬ç§»è‡³é›†ç¾¤ä¸­å…¶ä»–çš„æœåŠ¡å™¨ä¸Šï¼Œå› æ­¤å¯ä»¥æé«˜ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/799221/202006/799221-20200605174341577-1380650803.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Â 9ã€ç¼“å­˜&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç¼“å­˜ç›®çš„å°±æ˜¯å‡è½»æœåŠ¡å™¨çš„è®¡ç®—ï¼Œä½¿æ•°æ®ç›´æ¥è¿”å›ç»™ç”¨æˆ·ï¼Œåœ¨ç°åœ¨çš„è½¯ä»¶è®¾è®¡ä¸­ï¼Œç¼“å­˜å·²ç»æ— å¤„ä¸å†ï¼Œå…·ä½“å®ç°æœ‰CDNã€åå‘ä»£ç†ã€æœ¬åœ°ç¼“å­˜ã€åˆ†å¸ƒå¼ç¼“å­˜ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ç¼“å­˜æœ‰ä¸¤ä¸ªæ¡ä»¶ï¼šè®¿é—®æ•°æ®çƒ­ç‚¹ä¸å‡è¡¡ï¼Œå³æŸäº›é¢‘ç¹è®¿é—®çš„æ•°æ®éœ€è¦æ”¾åœ¨ç¼“å­˜ä¸­ï¼›æ•°æ®åœ¨æŸä¸ªæ—¶é—´æ®µå†…æœ‰æ•ˆï¼Œä¸ä¼šå¾ˆå¿«è¿‡æœŸï¼Œä¸ä¼šå› ä¸ºæ•°æ®è¿‡æœŸè€Œè„è¯»ï¼Œå½±å“æ•°æ®çš„æ­£ç¡®æ€§ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/799221/202006/799221-20200605174705120-150010776.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;


&lt;p&gt;ä»¥ä¸Šä¸ºæ€»ç»“çš„9ä¸­é«˜å¯ç”¨æ¡†æ¶ã€‚&lt;/p&gt;
</description>
<pubDate>Sat, 06 Jun 2020 00:31:00 +0000</pubDate>
<dc:creator>èŒèŒä¸¶å°é­”ç‹</dc:creator>
<og:description>åˆ†å±‚æ¶æ„æ˜¯é€»è¾‘ä¸Šçš„ï¼Œåœ¨ç‰©ç†éƒ¨ç½²ä¸Šï¼Œä¸‰å±‚æ¶æ„å¯ä»¥éƒ¨ç½²åœ¨åŒä¸€ä¸ªç‰©ç†æœºå™¨ä¸Šï¼Œä½†æ˜¯éšç€ç½‘ç«™ä¸šåŠ¡çš„å‘å±•ï¼Œå¿…ç„¶éœ€è¦å¯¹å·²ç»åˆ†å±‚çš„æ¨¡å—åˆ†ç¦»éƒ¨ç½²ï¼Œå³ä¸‰å±‚ç»“æ„åˆ†åˆ«éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œæ˜¯ç½‘ç«™æ‹¥æœ‰æ›´å¤šçš„è®¡ç®—èµ„æºä»¥åº”å¯¹è¶Šæ¥è¶Š</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/xiaomowang/p/13051101.html</dc:identifier>
</item>
<item>
<title>ã€JVMæ•…äº‹ã€‘äº†è§£JVMçš„ç»“æ„ï¼Œå¥½åœ¨é¢è¯•æ—¶å¹ç‰› - ç¼–ç¨‹æ–°è¯´(ææ–°æ°)</title>
<link>http://www.cnblogs.com/lixinjie/p/everyone-should-know-about-jvm-for-interview.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/lixinjie/p/everyone-should-know-about-jvm-for-interview.html</guid>
<description>&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;&lt;br class=&quot;Apple-interchange-newline&quot;/&gt;
classæ–‡ä»¶æ ¼å¼&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å‚è€ƒä¸Šä¸€ç¯‡æ–‡ç« ã€Š&lt;/span&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NzY1Nzc1OQ==&amp;amp;mid=2247484277&amp;amp;idx=1&amp;amp;sn=502f986271edf08e0ddcb20d369d0038&amp;amp;chksm=fc333885cb44b1935ffc0d56ea063f7e8da1b1306bc479f59ef4b97a537fc28ff959976c453e&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot; data-itemshowtype=&quot;0&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;ã€JVMæ•…äº‹ã€‘ä¸€ä¸ªJavaå­—èŠ‚ç æ–‡ä»¶çš„è¯ç”Ÿè®°&lt;/span&gt;&lt;/a&gt;&lt;span&gt;ã€‹ï¼Œåç»­è¿˜ä¼šä¸“é—¨è®²è§£classæ–‡ä»¶çš„å†…éƒ¨ç»“æ„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;æ•°æ®ç±»å‹&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;jvmåŒ…æ‹¬ä¸¤ç§æ•°æ®ç±»å‹ï¼ŒåŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;åŸºæœ¬ç±»å‹&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;åŒ…æ‹¬ï¼Œæ•°å€¼ç±»å‹ï¼Œbooleanç±»å‹ï¼Œå’ŒreturnAddressç±»å‹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ•°å€¼ç±»å‹åŒ…æ‹¬ï¼Œæ•´å‹ï¼Œæµ®ç‚¹å‹ï¼Œå’Œcharç±»å‹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;booleanç±»å‹åŒæ ·åªæœ‰trueå’Œfalseã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;returnAddressç±»å‹æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘jvmæŒ‡ä»¤çš„æ“ä½œç ï¼Œåœ¨Javaä¸­æ²¡æœ‰ä¸ä¹‹å¯¹åº”çš„ç±»å‹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;booleanç±»å‹çš„æ“ä½œä¼šè¢«è½¬åŒ–ä¸ºintç±»å‹çš„æ“ä½œè¿›è¡Œï¼Œbooleanæ•°ç»„ä¼šå½“æˆbyteæ•°ç»„å»æ“ä½œã€‚&lt;/span&gt;&lt;span&gt;1è¡¨ç¤ºtrueï¼Œ0è¡¨ç¤ºfalseã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;å¼•ç”¨ç±»å‹&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;åŒ…æ‹¬ä¸‰ç§ï¼Œç±»ç±»å‹ï¼Œæ•°ç»„ç±»å‹ï¼Œå’Œæ¥å£ç±»å‹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å®ƒä»¬çš„å€¼æ˜¯åŠ¨æ€åˆ›å»ºçš„ç±»å®ä¾‹ï¼Œæ•°ç»„ï¼Œæˆ–å®ç°æ¥å£çš„ç±»å®ä¾‹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ•°ç»„æœ‰componentç±»å‹å’Œelementç±»å‹ï¼Œcomponentç±»å‹å°±æ˜¯æ•°ç»„å»æ‰æœ€å¤–å±‚ç»´åº¦åå‰©ä¸‹çš„ç±»å‹ï¼Œå¯èƒ½è¿˜æ˜¯ä¸€ä¸ªæ•°ç»„ç±»å‹ï¼ˆå¯¹äºå¤šç»´æ•°ç»„ï¼‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;elementç±»å‹å°±æ˜¯æ•°ç»„é‡Œé¢å­˜å‚¨çš„æœ€å°æ•°æ®çš„ç±»å‹ï¼Œå®ƒå¿…é¡»æ˜¯ä¸€ä¸ªåŸºæœ¬ç±»å‹ï¼Œç±»ç±»å‹ï¼Œæˆ–æ¥å£ç±»å‹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¯¹äºä¸€ç»´æ•°ç»„çš„è¯ï¼Œcomponentç±»å‹å’Œelementç±»å‹æ˜¯ç›¸åŒçš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¼•ç”¨ç±»å‹è¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šå€¼ï¼Œå°±æ˜¯nullï¼Œè¡¨ç¤ºæ²¡æœ‰å¼•ç”¨ä»»ä½•å¯¹è±¡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;è¿è¡Œæ—¶å…¬æœ‰æ•°æ®åŒº&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;å †&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;jvmæœ‰ä¸€ä¸ªå †ï¼Œåœ¨æ‰€æœ‰jvmçº¿ç¨‹é—´å…±äº«ï¼Œå †æ˜¯ä¸€ä¸ªè¿è¡Œæ—¶æ•°æ®åŒºåŸŸï¼Œæ‰€æœ‰ä¸ºç±»å®ä¾‹å’Œæ•°ç»„åˆ†é…çš„å†…å­˜éƒ½æ¥è‡ªäºå®ƒã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å †åœ¨jvmå¯åŠ¨æ—¶åˆ›å»ºï¼Œå †ä¸­å¯¹è±¡ä¸ç”¨æ˜¾å¼é‡Šæ”¾ï¼Œgcä¼šå¸®æˆ‘ä»¬é‡Šæ”¾å¹¶å›æ”¶å†…å­˜ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;æ–¹æ³•åŒº&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;jvmæœ‰ä¸€ä¸ªæ–¹æ³•åŒºï¼Œåœ¨æ‰€æœ‰jvmçº¿ç¨‹é—´å…±äº«ï¼Œå®ƒå­˜å‚¨æ¯ä¸€ä¸ªç±»çš„ç»“æ„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åƒè¿è¡Œæ—¶å¸¸é‡æ± ï¼Œå­—æ®µå’Œæ–¹æ³•æ•°æ®ï¼Œæ–¹æ³•å’Œæ„é€ å‡½æ•°çš„ä»£ç ï¼Œè¿˜æœ‰ç‰¹æ®Šçš„æ–¹æ³•ç”¨äºç±»å’Œå®ä¾‹çš„åˆå§‹åŒ–ï¼Œä»¥åŠæ¥å£çš„åˆå§‹åŒ–ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ–¹æ³•åŒºåœ¨jvmå¯åŠ¨æ—¶åˆ›å»ºï¼Œè™½ç„¶æ–¹æ³•åŒºåœ¨é€»è¾‘ä¸Šæ˜¯å †çš„ä¸€éƒ¨åˆ†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä½†ç®€å•å®ç°æ—¶å¯ä»¥é€‰æ‹©ä¸è¿›è¡Œgcå’Œå‹ç¼©ï¼Œæœ¬è§„èŒƒæ²¡æœ‰å¼ºåˆ¶è¦æ±‚æ–¹æ³•åŒºçš„ä½ç½®ï¼Œä¹Ÿæ²¡æœ‰è¦æ±‚ç®¡ç†å·²ç¼–è¯‘ä»£ç çš„ç­–ç•¥ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;è¿è¡Œæ—¶å¸¸é‡æ± &lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿è¡Œæ—¶å¸¸é‡æ± å°±æ˜¯ç±»æˆ–æ¥å£çš„å­—èŠ‚ç æ–‡ä»¶é‡Œçš„å¸¸é‡æ± çš„è¿è¡Œæ—¶è¡¨ç¤ºå½¢å¼ï¼Œå®ƒåŒ…å«å‡ ç§å¸¸é‡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¦‚åœ¨ç¼–è¯‘æ—¶å°±å·²ç»çŸ¥é“çš„æ•°å­—å­—é¢é‡å€¼ï¼Œå’Œå¿…é¡»åœ¨è¿è¡Œæ—¶è§£æçš„æ–¹æ³•å’Œå­—æ®µçš„å¼•ç”¨ï¼Œè¿è¡Œæ—¶å¸¸é‡æ± çš„åŠŸèƒ½ç±»ä¼¼äºä¼ ç»Ÿè¯­è¨€çš„ç¬¦å·è¡¨ï¼Œä¸è¿‡å®ƒåŒ…å«çš„æ•°æ®ä¼šæ›´åŠ å®½æ³›ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿è¡Œæ—¶å¸¸é‡æ± åˆ†é…åœ¨jvmçš„æ–¹æ³•åŒºï¼Œç±»æˆ–æ¥å£çš„è¿è¡Œæ—¶å¸¸é‡æ± åœ¨ç±»æˆ–æ¥å£è¢«jvmåˆ›å»ºæ—¶æ‰ä¼šæ„å»ºã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;è¿è¡Œæ—¶ç§æœ‰æ•°æ®åŒº&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;pcå¯„å­˜å™¨&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;jvmæ”¯æŒä¸€æ¬¡è¿è¡Œå¤šä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„pcå¯„å­˜å™¨ï¼Œä»»ä½•æ—¶å€™ä¸€ä¸ªçº¿ç¨‹åªèƒ½è¿è¡Œä¸€ä¸ªæ–¹æ³•çš„ä»£ç ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¦‚æœæ–¹æ³•ä¸æ˜¯nativeçš„ï¼Œpcå¯„å­˜å™¨åŒ…å«å½“å‰æ­£åœ¨è¢«æ‰§è¡Œçš„jvmæŒ‡ä»¤åœ°å€ï¼Œå¦‚æœæ–¹æ³•æ˜¯nativeçš„ï¼Œpcå¯„å­˜å™¨çš„å€¼æ˜¯æœªå®šä¹‰çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;jvmæ ˆ&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ¯ä¸€ä¸ªjvmçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªç§æœ‰çš„jvmæ ˆï¼Œéšç€çº¿ç¨‹çš„åˆ›å»ºè€Œåˆ›å»ºï¼Œæ ˆä¸­å­˜å‚¨çš„æ˜¯å¸§ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;jvmæ ˆå’Œä¼ ç»Ÿè¯­è¨€å¦‚Cçš„æ ˆç›¸ä¼¼ï¼Œä¿å­˜å±€éƒ¨å˜é‡å’Œéƒ¨åˆ†è®¡ç®—ç»“æœï¼Œå‚ä¸æ–¹æ³•çš„è°ƒç”¨å’Œè¿”å›ã€‚&lt;/span&gt;&lt;span&gt;jvmæ ˆä¸»è¦ç”¨äºå¸§çš„å‡ºæ ˆå’Œå…¥æ ˆï¼Œé™¤æ­¤ä¹‹å¤–æ²¡æœ‰å…¶å®ƒæ“ä½œï¼Œ&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¸§å¯èƒ½æ˜¯åœ¨å †ä¸Šåˆ†é…çš„ï¼Œæ‰€ä»¥jvmæ ˆä½¿ç”¨çš„å†…å­˜ä¸å¿…æ˜¯è¿ç»­çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;nativeæ–¹æ³•æ ˆ&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;nativeæ–¹æ³•ä¸æ˜¯ç”¨Javaè¯­è¨€å†™çš„ï¼Œä¸ºäº†æ”¯æŒå®ƒéœ€è¦ä½¿ç”¨ä¼ ç»Ÿæ ˆï¼Œå¦‚Cè¯­è¨€æ ˆã€‚&lt;/span&gt;&lt;span&gt;ä¸è¿‡jvmä¸èƒ½åŠ è½½nativeæ–¹æ³•ï¼Œæ‰€ä»¥ä¹Ÿä¸éœ€è¦æä¾›nativeæ–¹æ³•éœ€è¦çš„æ ˆã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å¸§&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ¯æ¬¡å½“ä¸€ä¸ªæ–¹æ³•è¢«è°ƒç”¨æ—¶ä¸€ä¸ªæ–°çš„å¸§ä¼šè¢«åˆ›å»ºã€‚&lt;/span&gt;&lt;span&gt;å½“æ–¹æ³•è°ƒç”¨å®Œæˆæ—¶ï¼Œä¸ä¹‹å¯¹åº”çš„å¸§ä¼šè¢«é”€æ¯ï¼Œæ— è®ºæ˜¯æ­£å¸¸å®Œæˆè¿˜æ˜¯æŠ›å¼‚å¸¸ç»“æŸã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ‰€ä»¥å¸§æ˜¯æ–¹æ³•è°ƒç”¨çš„å…·ä½“ä½“ç°å½¢å¼ï¼Œæˆ–ç§°æ–¹æ³•è°ƒç”¨æ˜¯ä»¥å¸§çš„å½¢å¼è¿›è¡Œçš„ã€‚&lt;/span&gt;&lt;span&gt;å¸§ç”¨æ¥å­˜å‚¨æ•°æ®å’Œéƒ¨åˆ†è®¡ç®—ç»“æœï¼Œå’Œæ‰§è¡ŒåŠ¨æ€é“¾æ¥ï¼Œæ–¹æ³•è¿”å›å€¼ï¼Œåˆ†å‘å¼‚å¸¸ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¸§åˆ†é…åœ¨åˆ›å»ºå¸§çš„çº¿ç¨‹çš„jvmæ ˆä¸Šï¼Œæ¯ä¸€ä¸ªå¸§éƒ½æœ‰è‡ªå·±çš„æœ¬åœ°å˜é‡æ•°ç»„ï¼Œè‡ªå·±çš„æ“ä½œæ•°æ®æ ˆï¼Œå’Œä¸€ä¸ªå¯¹å½“å‰æ–¹æ³•æ‰€åœ¨ç±»çš„è¿è¡Œæ—¶å¸¸é‡æ± çš„å¼•ç”¨ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æœ¬åœ°å˜é‡æ•°ç»„å’Œæ“ä½œæ•°æ ˆçš„å¤§å°åœ¨ç¼–è¯‘æ—¶å°±ç¡®å®šäº†ï¼Œå®ƒä»¬éšç€å’Œå¸§å…³è”çš„æ–¹æ³•ç¼–è¯‘åçš„ä»£ç ä¸€èµ·è¢«æä¾›ï¼Œå› æ­¤å¸§è¿™ç§æ•°æ®ç»“æ„çš„å¤§å°åªä¾èµ–äºjvmçš„å®ç°ï¼Œè¿™äº›ç»“æ„æ‰€éœ€çš„å†…å­˜å¯ä»¥åœ¨æ–¹æ³•è°ƒç”¨æ—¶åŒæ—¶è¢«åˆ†é…ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œçš„ä»»ä½•æ—¶åˆ»ï¼Œéƒ½åªä¼šæœ‰ä¸€ä¸ªå¸§æ˜¯å¤„äºæ¿€æ´»çš„ã€‚&lt;/span&gt;&lt;span&gt;è¿™ä¸ªå¸§è¢«ç§°ä¸ºå½“å‰å¸§ï¼Œä¸ä¹‹å¯¹åº”çš„æ–¹æ³•è¢«ç§°ä¸ºå½“å‰æ–¹æ³•ï¼Œæ–¹æ³•æ‰€åœ¨çš„ç±»è¢«ç§°ä¸ºå½“å‰ç±»ï¼Œæ­¤æ—¶ç”¨åˆ°çš„æœ¬åœ°å˜é‡æ•°ç»„å’Œæ“ä½œæ•°æ ˆä¹Ÿéƒ½æ˜¯å½“å‰å¸§çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸€ä¸ªå¸§å°†ä¸åœ¨ç»§ç»­æ˜¯å½“å‰å¸§ï¼Œå¦‚æœå®ƒçš„æ–¹æ³•è°ƒç”¨äº†å¦ä¸€ä¸ªæ–¹æ³•ï¼Œæˆ–è€…å®ƒçš„æ–¹æ³•ç»“æŸäº†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å½“ä¸€ä¸ªæ–¹æ³•è¢«è°ƒç”¨ï¼Œä¸€ä¸ªæ–°çš„å¸§è¢«åˆ›å»ºï¼Œå½“æ‰§è¡Œæ§åˆ¶ç”±åŸæ¥çš„æ–¹æ³•ä¼ é€’åˆ°æ–°çš„æ–¹æ³•æ—¶ï¼Œè¿™ä¸ªæ–°çš„å¸§å˜ä¸ºå½“å‰å¸§ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å½“æ–¹æ³•è¿”å›æ—¶ï¼Œå½“å‰å¸§æŠŠæ–¹æ³•æ‰§è¡Œçš„ç»“æœä¼ å›åˆ°ä¸Šä¸€å¸§ï¼Œå½“ä¸Šä¸€å¸§è¢«æ¿€æ´»çš„åŒæ—¶å½“å‰å¸§ä¼šè¢«ä¸¢å¼ƒã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;æœ¬åœ°å˜é‡æ•°ç»„&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ¯ä¸€å¸§éƒ½åŒ…å«ä¸€ä¸ªå˜é‡æ•°ç»„ï¼Œå°±æ˜¯éƒ½ç†ŸçŸ¥çš„æœ¬åœ°å˜é‡å­˜å‚¨çš„åœ°æ–¹ã€‚&lt;/span&gt;&lt;span&gt;è¿™ä¸ªæœ¬åœ°å˜é‡æ•°ç»„çš„é•¿åº¦åœ¨ç¼–è¯‘æ—¶ç¡®å®šï¼Œéšç€ç¼–è¯‘åçš„æ–¹æ³•ä»£ç ä¸€èµ·æä¾›ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é€šå¸¸ä¸€ä¸ªæœ¬åœ°å˜é‡ï¼ˆçš„ä½ç½®ï¼‰èƒ½å¤Ÿå­˜å‚¨ä¸€ä¸ªç±»å‹çš„å€¼ï¼Œä½†æ˜¯longå’Œdoubleç±»å‹å´éœ€è¦ä¸¤ä¸ªæœ¬åœ°å˜é‡ï¼ˆçš„ä½ç½®ï¼‰æ‰èƒ½å­˜ä¸€ä¸ªå€¼ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æœ¬åœ°å˜é‡æŒ‰ç´¢å¼•å¯»å€ï¼Œç¬¬ä¸€ä¸ªæœ¬åœ°å˜é‡çš„ç´¢å¼•æ˜¯0ã€‚&lt;/span&gt;&lt;span&gt;longå’Œdoubleéœ€è¦æ¶ˆè€—ä¸¤ä¸ªè¿ç»­çš„ç´¢å¼•ï¼Œä½†å´æ˜¯æŒ‰ç…§è¾ƒå°çš„è¿™ä¸ªç´¢å¼•å¯»å€çš„ã€‚&lt;/span&gt;&lt;span&gt;ä¸èƒ½æŒ‰ç…§è¾ƒå¤§çš„é‚£ä¸ªç´¢å¼•å»è¯»æ•°æ®ï¼Œä½†æ˜¯å¯ä»¥å†™å…¥ï¼Œå½“ç„¶è¿™æ ·å°†ä½¿æœ¬åœ°å˜é‡å†…å®¹é”™ä¹±ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œjvmä½¿ç”¨æœ¬åœ°å˜é‡æ¥æ¥æ”¶ä¼ é€’è¿›æ¥çš„å‚æ•°å€¼ã€‚&lt;/span&gt;&lt;span&gt;åœ¨ç±»ï¼ˆé™æ€ï¼‰æ–¹æ³•è°ƒç”¨æ—¶ï¼Œæ‰€æœ‰å‚æ•°è¢«ä¼ å…¥ä»ç´¢å¼•0å¼€å§‹çš„è¿è´¯çš„æœ¬åœ°å˜é‡æ•°ç»„é‡Œã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨å®ä¾‹ï¼ˆéé™æ€ï¼‰æ–¹æ³•è°ƒç”¨æ—¶ï¼Œç´¢å¼•0å¤„æ€»æ˜¯ä¼ å…¥æ­£åœ¨å…¶ä¸Šæ‰§è¡Œæ–¹æ³•è°ƒç”¨çš„é‚£ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œï¼ˆå°±æ˜¯Javaä¸­çš„thisäº†ï¼‰ï¼Œæ‰€æœ‰å‚æ•°è¢«ä¼ å…¥ä»1å¼€å§‹çš„è¿è´¯çš„æœ¬åœ°å˜é‡æ•°ç»„é‡Œã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;æ“ä½œæ•°æ ˆ&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ¯ä¸ªå¸§åŒ…å«ä¸€ä¸ªåè¿›å…ˆå‡ºçš„æ ˆï¼Œç”¨äºå­˜å‚¨æ­£åœ¨æ‰§è¡Œçš„jvmæŒ‡ä»¤çš„æ“ä½œæ•°ï¼Œå°±æ˜¯éƒ½ç†ŸçŸ¥çš„æ“ä½œæ•°æ ˆï¼Œè¿™ä¸ªæ ˆçš„æœ€å¤§æ·±åº¦åœ¨ç¼–è¯‘æ—¶å°±å·²ç¡®å®šï¼Œéšç€ç¼–è¯‘åçš„æ–¹æ³•ä»£ç ä¸€èµ·æä¾›ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å½“å¸§è¢«åˆ›å»ºæ—¶ï¼Œæ“ä½œæ•°æ ˆæ˜¯ç©ºçš„ï¼Œjvmæä¾›ä¸€äº›æŒ‡ä»¤ç”¨äºåŠ è½½å¸¸é‡å€¼ï¼Œæœ¬åœ°å˜é‡å€¼ï¼Œå­—æ®µå€¼åˆ°æ“ä½œæ•°æ ˆä¸Šï¼Œå¦ä¸€äº›jvmæŒ‡ä»¤é‡‡ç”¨æ“ä½œæ•°æ ˆä¸Šçš„æ“ä½œæ•°è¿›è¡Œæ“ä½œï¼Œå¹¶æŠŠç»“æœæ”¾å›åˆ°æ“ä½œæ•°æ ˆä¸Šã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ“ä½œæ•°æ ˆä¹Ÿç”¨äºå‡†å¤‡å°†è¦ä¼ é€’ç»™æ–¹æ³•è°ƒç”¨çš„å‚æ•°å’Œæ¥æ”¶æ–¹æ³•è°ƒç”¨è¿”å›çš„ç»“æœã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;longå’Œdoubleç±»å‹çš„å€¼å ç”¨ä¸¤ä¸ªå•ä½çš„æ ˆæ·±åº¦ï¼Œå…¶å®ƒç±»å‹çš„å€¼å ç”¨ä¸€ä¸ªå•ä½çš„æ ˆæ·±åº¦ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;åŠ¨æ€é“¾æ¥&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ¯ä¸€ä¸ªå¸§éƒ½åŒ…å«äº†å¯¹å½“å‰æ–¹æ³•æ‰€å±ç±»å‹çš„è¿è¡Œæ—¶å¸¸é‡æ± çš„å¼•ç”¨ã€‚&lt;/span&gt;&lt;span&gt;ç›®çš„æ˜¯ä¸ºäº†æ”¯æŒæ–¹æ³•ä»£ç çš„åŠ¨æ€é“¾æ¥ã€‚&lt;/span&gt;&lt;span&gt;classæ–‡ä»¶ä¸­æè¿°ä¸€ä¸ªæ–¹æ³•å¼•ç”¨è¢«è°ƒç”¨çš„æ–¹æ³•å’Œè¢«è®¿é—®çš„å˜é‡çš„ä»£ç ï¼Œæ˜¯é‡‡ç”¨ç¬¦å·å¼•ç”¨çš„å½¢å¼å®ç°çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç¬¦å·å¼•ç”¨çš„å½¢å¼å¯ä»¥ç²—ç•¥çš„è®¤ä¸ºæ˜¯å­—ç¬¦ä¸²çš„å½¢å¼ï¼Œå°±æ˜¯ç”¨å­—ç¬¦ä¸²æ ‡æ˜éœ€è¦è°ƒç”¨å“ªä¸ªç±»çš„å“ªä¸ªæ–¹æ³•æˆ–è®¿é—®å“ªä¸ªå­—æ®µæˆ–å˜é‡ã€‚&lt;/span&gt;&lt;span&gt;å°±åƒç¬¦å·å¼•ç”¨è¿™ä¸ªåå­—ä¸€æ ·ï¼Œè¿™äº›ä»…ä»…æ˜¯ç¬¦å·ï¼Œæ˜¯æ‹¿ä¸åˆ°å…·ä½“å€¼çš„ï¼Œæ‰€ä»¥å¿…é¡»è¦è¿›è¡Œè½¬æ¢ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åŠ¨æ€é“¾æ¥å°±æ˜¯æŠŠè¿™äº›ç¬¦å·æ–¹æ³•å¼•ç”¨è½¬æ¢ä¸ºå…·ä½“çš„æ–¹æ³•å¼•ç”¨ï¼Œåœ¨å¿…è¦æ—¶åŠ è½½ç±»æ¥è§£æå°šæœªæ˜ç¡®çš„ç¬¦å·ï¼ŒæŠŠç¬¦å·å˜é‡çš„è®¿é—®è½¬æ¢ä¸ºè¿™äº›å˜é‡è¿è¡Œæ—¶æ‰€åœ¨å­˜å‚¨ç»“æ„çš„é€‚åˆçš„åç§»é‡ï¼ˆç´¢å¼•ï¼‰ã€‚&lt;/span&gt;&lt;span&gt;è¿™æ ·çš„æ–¹å¼åˆç§°ä¸ºåæœŸç»‘å®šã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;æ–¹æ³•è°ƒç”¨&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸€ä¸ªæ–¹æ³•è°ƒç”¨æ­£å¸¸å®Œæˆï¼ˆå³æ²¡æœ‰æŠ›å¼‚å¸¸ï¼‰æ—¶ï¼Œä¼šæ ¹æ®æ‰€è¿”å›çš„å€¼çš„ç±»å‹æ‰§è¡Œä¸€ä¸ªé€‚åˆçš„returnæŒ‡ä»¤ï¼Œå½“å‰å¸§ä¼šå»æ¢å¤è°ƒç”¨è€…çš„çŠ¶æ€ï¼ŒåŒ…æ‹¬å®ƒçš„æœ¬åœ°å˜é‡å’Œæ“ä½œæ•°æ ˆï¼Œä½¿è°ƒç”¨è€…çš„ç¨‹åºè®¡æ•°å™¨é€‚åˆçš„é€’å¢æ¥è·³è¿‡åˆšåˆšçš„é‚£ä¸ªæ–¹æ³•è°ƒç”¨æŒ‡ä»¤ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿”å›å€¼ä¼šè¢«æ”¾åˆ°è°ƒç”¨è€…å¸§çš„æ“ä½œæ•°æ ˆä¸Šï¼Œç„¶åç»§ç»­æ‰§è¡Œè°ƒç”¨è€…æ–¹æ³•çš„å¸§ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸€ä¸ªæ–¹æ³•åœ¨è°ƒç”¨æ—¶æŠ›å‡ºäº†å¼‚å¸¸ï¼Œä¸”è¿™ä¸ªå¼‚å¸¸æ²¡æœ‰åœ¨è¿™ä¸ªæ–¹æ³•å†…è¢«æ•è·å¤„ç†ï¼Œå°†ä¼šå¯¼è‡´è¿™ä¸ªæ–¹æ³•è°ƒç”¨çš„çªç„¶ç»“æŸï¼Œè¿™ç§æƒ…å†µä¸‹æ°¸è¿œä¸ä¼šå‘æ–¹æ³•çš„è°ƒç”¨è€…è¿”å›ä¸€ä¸ªå€¼ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;ç‰¹æ®Šæ–¹æ³•&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç«™åœ¨jvmçš„çº§åˆ«ï¼Œæ¯ä¸€ä¸ªç”¨Javaå†™çš„æ„é€ å‡½æ•°éƒ½ä»¥ä¸€ä¸ªå®ä¾‹åˆå§‹åŒ–æ–¹æ³•å‡ºç°ï¼Œä¸”éƒ½æ˜¯ç‰¹æ®Šçš„åå­—ï¼Œå°±æ˜¯&lt;/span&gt;&lt;span&gt;&amp;lt;init&amp;gt;&lt;/span&gt;&lt;span&gt;ï¼Œè¿™ä¸ªåå­—æ˜¯ç¼–è¯‘å™¨æä¾›çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å®ä¾‹åˆå§‹åŒ–æ–¹æ³•åªèƒ½åœ¨jvmå†…éƒ¨ä½¿ç”¨&lt;em&gt;invokespecial&lt;/em&gt;è¿™ä¸ªæŒ‡ä»¤è°ƒç”¨ï¼Œä¸”åªèƒ½åœ¨å°šæœªåˆå§‹åŒ–çš„ç±»å®ä¾‹ä¸Šè°ƒç”¨ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸€ä¸ªç±»æˆ–æ¥å£æœ€å¤šå¯ä»¥æœ‰ä¸€ä¸ªç±»æˆ–æ¥å£åˆå§‹åŒ–æ–¹æ³•ï¼Œé€šè¿‡è°ƒç”¨è¿™ä¸ªæ–¹æ³•è¢«åˆå§‹åŒ–ã€‚&lt;/span&gt;&lt;span&gt;ç±»æˆ–æ¥å£çš„åˆå§‹åŒ–æ–¹æ³•ä¹Ÿæœ‰ç‰¹æ®Šçš„åå­—ï¼Œå°±æ˜¯&lt;/span&gt;&lt;span&gt;&amp;lt;clinit&amp;gt;&lt;/span&gt;&lt;span&gt;ï¼Œè¯¥æ–¹æ³•æ²¡æœ‰å‚æ•°ï¼Œä¸”è¿”å›å€¼æ˜¯voidã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ–¹æ³•åç§°ä¹Ÿæ˜¯ç”±ç¼–è¯‘å™¨æä¾›çš„ï¼Œä»Java7å¼€å§‹ï¼Œåœ¨å­—èŠ‚ç ä¸­è¿™ä¸ªæ–¹æ³•å¿…é¡»è¢«æ ‡è®°ä¸ºé™æ€çš„æ‰è¡Œã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™ä¸ªåˆå§‹åŒ–æ–¹æ³•æ˜¯è¢«jvméšå¼è°ƒç”¨çš„ï¼Œå®ƒä»¬ç»å¯¹ä¸ä¼šç›´æ¥è¢«ç”¨ä»»ä½•jvmæŒ‡ä»¤è°ƒç”¨ï¼Œä»…ä½œä¸ºç±»åˆå§‹åŒ–è¿›ç¨‹çš„ä¸€éƒ¨åˆ†è¢«é—´æ¥çš„è°ƒç”¨ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;Javaç±»åº“&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;jvmå¿…é¡»ä¸ºJavaç±»åº“çš„å®ç°æä¾›è¶³å¤Ÿçš„æ”¯æŒã€‚&lt;/span&gt;&lt;span&gt;ä¸€äº›ç±»åº“ä¸­çš„ç±»å¦‚æœæ²¡æœ‰jvmååŠ©æ˜¯æ— æ³•å®ç°çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åå°„ï¼Œå°±æ˜¯åœ¨è¿è¡Œæ—¶è·å–æŸä¸ªç±»çš„ç±»å‹ç›¸å…³ä¿¡æ¯ï¼Œå¦‚å®ƒçš„å­—æ®µä¿¡æ¯ï¼Œæ–¹æ³•ä¿¡æ¯ï¼Œæ„é€ å‡½æ•°ä¿¡æ¯ï¼Œçˆ¶ç±»ä¿¡æ¯ï¼Œå®ç°çš„æ¥å£ä¿¡æ¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™äº›ä¿¡æ¯éƒ½å¿…é¡»æ˜¯æŠŠä¸€ä¸ªç±»åŠ è½½å®Œä¹‹åæ‰å¯ä»¥çŸ¥é“çš„ï¼Œåªæœ‰jvmæ‰å¯ä»¥åŠ è½½ç±»ã€‚&lt;/span&gt;&lt;span&gt;å¦‚java.lang.reflectè¿™ä¸ªåŒ…ä¸‹çš„ç±»å’ŒClassè¿™ä¸ªç±»ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨Javaä¸­åŠ è½½ä¸€ä¸ªç±»æˆ–æ¥å£ç”¨ç±»åŠ è½½å™¨ï¼Œå³ClassLoaderï¼ŒèƒŒåè¿˜æ˜¯å§”æ‰˜ç»™jvmæ¥å®ç°çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é“¾æ¥å’Œåˆå§‹åŒ–ä¸€ä¸ªç±»æˆ–æ¥å£ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å®‰å…¨ï¼Œå¦‚java.securityåŒ…ä¸‹çš„ç±»ï¼Œè¿˜æœ‰å…¶å®ƒç±»åƒSecurityManagerã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¤šçº¿ç¨‹ï¼Œå¦‚çº¿ç¨‹è¿™ä¸ªç±»Threadã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¼±å¼•ç”¨ï¼Œåƒjava.lang.refåŒ…ä¸‹çš„ç±»ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å…¬æœ‰è®¾è®¡ï¼Œç§æœ‰å®ç°&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä»¥ä¸Šå†…å®¹åªæ˜¯jvmçš„ä¸€ä¸ªâ€œç›¸å¯¹å®½æ³›â€çš„è§„èŒƒï¼Œå®ƒå¹¶ä¸æ˜¯å®ç°æ–¹æ¡ˆï¼Œä¹Ÿä¸æ˜¯å®ç°ç»†èŠ‚ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å®ç°è€…å¯ä»¥æ ¹æ®è‡ªèº«çš„éœ€è¦æ¥å®ç°jvmï¼Œå¦‚è¿è¡Œåœ¨åç«¯æœåŠ¡å™¨ä¸Šçš„jvmå’Œè¿è¡Œåœ¨ç§»åŠ¨è®¾å¤‡ä¸Šçš„jvmè‚¯å®šä¾§é‡ç‚¹æœ‰æ‰€ä¸åŒã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä»äº‹Javaçš„äººéƒ½çŸ¥é“ï¼Œäº‹å®ä¸Šjvmæ˜¯æœ‰è¾ƒå¤šçš„å®ç°ç‰ˆæœ¬ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç”±äºjvmæ˜¯å¤„åœ¨Javaè¯­è¨€å’Œæ“ä½œç³»ç»Ÿä¹‹é—´çš„ï¼Œæ‰€ä»¥å®ƒè¦å‘ä¸Šæä¾›å¯¹Javaçš„æ”¯æŒï¼Œå‘ä¸‹ä¸æ“ä½œç³»ç»Ÿè‰¯å¥½äº¤äº’ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å†™åœ¨æœ€å&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é«˜çº§è¯­è¨€ï¼ˆJavaï¼ŒC#ï¼‰ä¸­çš„å¾ˆå¤šæ“ä½œå¦‚æ–‡ä»¶æ“ä½œï¼Œç½‘ç»œæ“ä½œï¼Œå†…å­˜æ“ä½œï¼Œçº¿ç¨‹æ“ä½œï¼ŒI/Oæ“ä½œç­‰ï¼Œéƒ½ä¸æ˜¯é«˜çº§è¯­è¨€è‡ªèº«èƒ½å¤Ÿå®ç°çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¹Ÿä¸æ˜¯å®ƒä»¬çš„è™šæ‹Ÿæœºï¼ˆJVMï¼ŒCLRï¼‰èƒ½å¤Ÿå®ç°çš„ï¼Œå®é™…æœ€ç»ˆæ˜¯ç”±æ“ä½œç³»ç»Ÿå®ç°çš„ï¼Œå› ä¸ºè¿™äº›éƒ½æ˜¯ç³»ç»Ÿèµ„æºï¼Œåªæœ‰æ“ä½œç³»ç»Ÿæ‰æœ‰æƒé™è®¿é—®ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¦‚æœä½ ç”¨Javaæˆ–C#ä»£ç åˆ›å»ºäº†ä¸€ä¸ªæ–‡ä»¶ï¼Œåƒä¸‡ä¸è¦ä»¥ä¸ºæ˜¯Javaæˆ–C#åˆ›å»ºäº†è¿™ä¸ªæ–‡ä»¶ï¼Œå®ƒä»¬åªæ˜¯å±‚å±‚å‘ä¸‹è°ƒç”¨äº†æ“ä½œç³»ç»Ÿçš„APIï¼Œç„¶ååˆ°æ–‡ä»¶ç³»ç»ŸAPIï¼Œæœ€åå¯èƒ½åˆ°ç£ç›˜é©±åŠ¨ç¨‹åºã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç”±æ­¤å¯ä»¥çœ‹å‡ºï¼Œè¦æƒ³è®¾è®¡ä¸€é—¨è¯­è¨€ï¼Œä¸å•å•æ˜¯å…³é”®å­—ã€è¯­æ³•ã€ç¼–è¯‘å™¨ï¼Œç±»åº“ï¼Œè™šæ‹Ÿæœºè¿™äº›ï¼Œè¿˜è¦æ·±åº¦äº†è§£æ“ä½œç³»ç»Ÿï¼Œç”šè‡³æ˜¯ç¡¬ä»¶ï¼Œå¦‚CPUæ¶æ„å’ŒCPUæŒ‡ä»¤é›†ç­‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ‰€ä»¥ï¼Œå’Œè¯­è¨€ç›¸å…³çš„äº‹æƒ…ï¼Œæ¯ä¸€é¡¹éƒ½æ˜¯å¼‚å¸¸çš„ç¹çå¤æ‚ï¼Œéƒ½éœ€è¦æŠ•å…¥å¤§é‡çš„äººåŠ›ã€è´¢åŠ›ã€æ—¶é—´å»ç ”ç©¶ï¼Œæœ€åå³ä½¿ç ”ç©¶æˆåŠŸäº†ï¼Œå¯èƒ½æ²¡æœ‰ç”Ÿæ€ï¼Œæ²¡äººä½¿ç”¨ï¼Œè‡ªç„¶ä¹Ÿæ— æ³•èµšé’±ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å› æ­¤ï¼Œå›½äººç°åœ¨è¿˜æ²¡æœ‰ä¸€é—¨å±äºè‡ªå·±çš„çœŸæ­£è¯­è¨€ã€‚&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;&amp;gt;&amp;gt;&amp;gt; çƒ­é—¨æ–‡ç« é›†é”¦ &amp;lt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NzY1Nzc1OQ==&amp;amp;mid=2247484219&amp;amp;idx=1&amp;amp;sn=e6c39138e44ce8f0c91aba4873fb42cd&amp;amp;chksm=fc3338cbcb44b1dde7ae372ed66b40bdf4f755d711008810eb837a8f78d884f00956ae7ce7a7&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot; data-itemshowtype=&quot;0&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;æ¯•ä¸š10å¹´ï¼Œæˆ‘æœ‰è¯è¯´&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NzY1Nzc1OQ==&amp;amp;mid=2247483949&amp;amp;idx=1&amp;amp;sn=200c9ac4f8e4e877b0b253d45205712a&amp;amp;chksm=fc3339ddcb44b0cb5ac2957dbed41b2f9e11fbba14967d00f97012806a9d6af364b0f8135eee&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot; data-itemshowtype=&quot;0&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;ã€é¢è¯•ã€‘æˆ‘æ˜¯å¦‚ä½•é¢è¯•åˆ«äººListç›¸å…³çŸ¥è¯†çš„ï¼Œæ·±åº¦æœ‰ç‚¹é•¿æ–‡&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NzY1Nzc1OQ==&amp;amp;mid=2247483989&amp;amp;idx=1&amp;amp;sn=cf9ce5c3f7981c16b71047b868b1c1ab&amp;amp;chksm=fc3339a5cb44b0b3df524ce684e8cd76ab6d15a2ccf26ec2425ecbcdd26bc777b95a06994189&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot; data-itemshowtype=&quot;0&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;æˆ‘æ˜¯å¦‚ä½•åœ¨æ¯•ä¸šä¸ä¹…åªç”¨1å¹´å°±å‡ä¸ºå¼€å‘ç»„é•¿çš„&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NzY1Nzc1OQ==&amp;amp;mid=2247483994&amp;amp;idx=1&amp;amp;sn=fb09e943331e89abcb99d8304ea6b677&amp;amp;chksm=fc3339aacb44b0bc2a120c79efebb46a43ce5b4d3148992d86b2841a89bb46bf5d8863e065ea&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot; data-itemshowtype=&quot;0&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;çˆ¸çˆ¸åˆç»™Spring MVCç”Ÿäº†ä¸ªå¼Ÿå¼Ÿå«Spring WebFlux&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NzY1Nzc1OQ==&amp;amp;mid=2247484017&amp;amp;idx=1&amp;amp;sn=a2055640b142fc4cfa5a9901d22ec57f&amp;amp;chksm=fc333981cb44b09782c196da25dc613b38a9ede52de073bfaaaef6214a9deb294b6527091892&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot; data-itemshowtype=&quot;0&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;ã€é¢è¯•ã€‘æˆ‘æ˜¯å¦‚ä½•åœ¨é¢è¯•åˆ«äººSpringäº‹åŠ¡æ—¶â€œå¥—è·¯â€å¯¹æ–¹çš„&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NzY1Nzc1OQ==&amp;amp;mid=2247484029&amp;amp;idx=1&amp;amp;sn=44b05473af37fe008bb9659a35d1a9de&amp;amp;chksm=fc33398dcb44b09bbd25a7e14e7100419988479fbeb4bda7787f1b93dd932ec699dfd793df04&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot; data-itemshowtype=&quot;0&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;ã€é¢è¯•ã€‘Springäº‹åŠ¡é¢è¯•è€ƒç‚¹åè¡€æ•´ç†ï¼ˆå»ºè®®çè—ï¼‰&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NzY1Nzc1OQ==&amp;amp;mid=2247484158&amp;amp;idx=1&amp;amp;sn=1ca952ba9166c5ccf0e3f40622335fc5&amp;amp;chksm=fc33390ecb44b01898bb2500ba61a15e38487a23f5c0405d738cc4c272cd705d2dbbf1a3f8e7&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot; data-itemshowtype=&quot;0&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;ã€é¢è¯•ã€‘æˆ‘æ˜¯å¦‚ä½•åœ¨é¢è¯•åˆ«äººRedisç›¸å…³çŸ¥è¯†æ—¶â€œè½¯æ€¼â€ä»–çš„&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NzY1Nzc1OQ==&amp;amp;mid=2247484164&amp;amp;idx=1&amp;amp;sn=390d911b19812d22aebd3f0f6522004c&amp;amp;chksm=fc3338f4cb44b1e20bc2344474586934a2b148f92eefdaecf134d57af10f64310579e196904a&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot; data-itemshowtype=&quot;0&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;ã€é¢è¯•ã€‘åƒé€äº†è¿™äº›RedisçŸ¥è¯†ç‚¹ï¼Œé¢è¯•å®˜ä¸€å®šè§‰å¾—ä½ å¾ˆNBï¼ˆå¹²è´§ | å»ºè®®çè—ï¼‰&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NzY1Nzc1OQ==&amp;amp;mid=2247484184&amp;amp;idx=1&amp;amp;sn=37007efde0cc93e48c55a133dc9cc8d4&amp;amp;chksm=fc3338e8cb44b1fea0ed4af7f01de658e8a1bc7f573cb5bde2701d9b09ba14747139d2bcea39&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot; data-itemshowtype=&quot;0&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;ã€é¢è¯•ã€‘å¦‚æœä½ è¿™æ ·å›ç­”â€œä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨â€ï¼Œé¢è¯•å®˜éƒ½ä¼šå¯¹ä½ åˆ®ç›®ç›¸çœ‹ï¼ˆå»ºè®®çè—ï¼‰&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NzY1Nzc1OQ==&amp;amp;mid=2247484195&amp;amp;idx=1&amp;amp;sn=95c3acdaeb0f6a1d61f152550c3d2669&amp;amp;chksm=fc3338d3cb44b1c55f6046f6280da863d3514cca3ce50ef29e2d53b0eafe2b7efef062c51c27&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot; data-itemshowtype=&quot;0&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;ã€é¢è¯•ã€‘è¿„ä»Šä¸ºæ­¢æŠŠåŒæ­¥/å¼‚æ­¥/é˜»å¡/éé˜»å¡/BIO/NIO/AIOè®²çš„è¿™ä¹ˆæ¸…æ¥šçš„å¥½æ–‡ç« ï¼ˆå¿«å¿«çè—ï¼‰&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NzY1Nzc1OQ==&amp;amp;mid=2247484201&amp;amp;idx=1&amp;amp;sn=7cf45aff64eecdff58d2acea8fb7c9fa&amp;amp;chksm=fc3338d9cb44b1cfc6b5c797a005c91ed19b0dd06587fdfb2e7b553e2b03104a145380a7a990&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot; data-itemshowtype=&quot;0&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;ã€é¢è¯•ã€‘ä¸€ç¯‡æ–‡ç« å¸®ä½ å½»åº•ææ¸…æ¥šâ€œI/Oå¤šè·¯å¤ç”¨â€å’Œâ€œå¼‚æ­¥I/Oâ€çš„å‰ä¸–ä»Šç”Ÿï¼ˆæ·±åº¦å¥½æ–‡ï¼Œå»ºè®®çè—ï¼‰&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NzY1Nzc1OQ==&amp;amp;mid=2247484206&amp;amp;idx=1&amp;amp;sn=9547fdad111ac1a8ac9311cb9e76b9dc&amp;amp;chksm=fc3338decb44b1c89aee789e80e32989ea43232321397cc265c99b1d0ce4057e6563bc00a3d3&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot; data-itemshowtype=&quot;0&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;ã€é¢è¯•ã€‘å¦‚æœæŠŠçº¿ç¨‹å½“ä½œä¸€ä¸ªäººæ¥å¯¹å¾…ï¼Œæ‰€æœ‰é—®é¢˜éƒ½ç¬é—´æ˜ç™½äº†&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NzY1Nzc1OQ==&amp;amp;mid=2247484214&amp;amp;idx=1&amp;amp;sn=0f677e8b0d61b5a5317a274cc8b33cbc&amp;amp;chksm=fc3338c6cb44b1d06aa20533aafb0b7b709b3bd88dbf6af6b8f3cb91288e4afc585ecb77489a&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot; data-itemshowtype=&quot;0&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;Javaå¤šçº¿ç¨‹é€šå…³â€”â€”â€”åŸºç¡€çŸ¥è¯†æŒ‘æˆ˜&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU1NzY1Nzc1OQ==&amp;amp;mid=2247484224&amp;amp;idx=1&amp;amp;sn=78a994d8311dd0abf3f9419108ff363a&amp;amp;chksm=fc3338b0cb44b1a6803dbeb8540c17ce753f1878e3b7cc86cf6508e81dc32736f84d7224f166&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot; data-itemshowtype=&quot;0&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;å“Springï¼šå¸å›½çš„åŸºçŸ³&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;ä½œè€…&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;æ˜¯å·¥ä½œè¶…è¿‡&lt;/span&gt;&lt;span&gt;&lt;strong&gt;10å¹´&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;çš„ç å†œï¼Œç°åœ¨ä»»æ¶æ„å¸ˆã€‚å–œæ¬¢ç ”ç©¶æŠ€æœ¯ï¼Œå´‡å°šç®€å•å¿«ä¹ã€‚&lt;/span&gt;&lt;span&gt;&lt;strong&gt;è¿½æ±‚ä»¥é€šä¿—æ˜“æ‡‚çš„è¯­è¨€è§£è¯´æŠ€æœ¯ï¼Œå¸Œæœ›æ‰€æœ‰çš„è¯»è€…éƒ½èƒ½çœ‹æ‡‚å¹¶è®°ä½ã€‚&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;ä¸‹é¢æ˜¯å…¬ä¼—å·çš„äºŒç»´ç ï¼Œæ¬¢è¿å…³æ³¨ï¼&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/76066/201912/76066-20191215143847687-627992625.jpg&quot; alt=&quot;&quot;/&gt;Â &lt;/p&gt;
</description>
<pubDate>Fri, 05 Jun 2020 23:58:00 +0000</pubDate>
<dc:creator>ç¼–ç¨‹æ–°è¯´(ææ–°æ°)</dc:creator>
<og:description>classæ–‡ä»¶æ ¼å¼å‚è€ƒä¸Šä¸€ç¯‡æ–‡ç« ã€Šã€JVMæ•…äº‹ã€‘ä¸€ä¸ªJavaå­—èŠ‚ç æ–‡ä»¶çš„è¯ç”Ÿè®°ã€‹ï¼Œåç»­è¿˜ä¼šä¸“é—¨è®²è§£classæ–‡ä»¶çš„å†…éƒ¨ç»“æ„ã€‚æ•°æ®ç±»å‹jvmåŒ…æ‹¬ä¸¤ç§æ•°æ®ç±»å‹ï¼ŒåŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹ã€‚åŸºæœ¬ç±»å‹åŒ…æ‹¬ï¼Œæ•°å€¼ç±»å‹ï¼Œ</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/lixinjie/p/everyone-should-know-about-jvm-for-interview.html</dc:identifier>
</item>
<item>
<title>åšå®¢å›­æ–‡ç« è‡ªåŠ¨æ·»åŠ ç›®å½•-3çº§ - è¿½é€æ—¶å…‰è€…</title>
<link>http://www.cnblogs.com/Can-daydayup/p/13053213.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/Can-daydayup/p/13053213.html</guid>
<description>&lt;h2&gt;å±•ç¤ºæ•ˆæœ&lt;/h2&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;æ³¨æ„ï¼Œåœ¨è¿™é‡Œæ ‡é¢˜äºŒä»£è¡¨ä¸€çº§ï¼Œæ ‡é¢˜ä¸‰ä»£è¡¨äºŒçº§ï¼Œæ ‡é¢˜å››ä»£è¡¨ä¸‰çº§ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1336199/202006/1336199-20200606020004943-900929374.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h2&gt;è®¾ç½®æ–¹å¼&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆæˆ‘ä»¬éœ€è¦ç”³è¯·å¼€é€šjsæƒé™ï¼Œç„¶åå°†ç›®å½•jsä»£ç å¤åˆ¶åˆ°åšå®¢ä¾§è¾¹æ å…¬å‘Šï¼ˆæ”¯æŒHTMLä»£ç ï¼‰Â &lt;span class=&quot;ng-star-inserted&quot;&gt;ï¼ˆæ”¯æŒ JS ä»£ç ï¼‰ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1336199/202006/1336199-20200606020321257-1947437326.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h2&gt;ç”Ÿæˆç›®å½•JSä»£ç &lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;47&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ç”Ÿæˆç›®å½•ç´¢å¼•åˆ—è¡¨&lt;/span&gt;
&lt;span&gt;function&lt;/span&gt;&lt;span&gt; GenerateContentList()
{
    &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; mainContent = $('#cnblogs_post_body'&lt;span&gt;);
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;h2ï¼Œå¤§æ ‡æ ‡é¢˜å†…å®¹&lt;/span&gt;
    &lt;span&gt;var&lt;/span&gt; h2_list = $('#cnblogs_post_body h2');&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å¦‚æœä½ çš„ç« èŠ‚æ ‡é¢˜ä¸æ˜¯h2,åªéœ€è¦å°†è¿™é‡Œçš„h2æ¢æ‰å³å¯&lt;/span&gt;

    &lt;span&gt;if&lt;/span&gt;(mainContent.length &amp;lt; 1&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt;;
 
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;(h2_list.length&amp;gt;0&lt;span&gt;)
    {
        &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; content = '&amp;lt;a name=&quot;_labelTop&quot;&amp;gt;&amp;lt;/a&amp;gt;'&lt;span&gt;;
        content &lt;/span&gt;+= '&amp;lt;div id=&quot;navCategory&quot;&amp;gt;'&lt;span&gt;;
        content &lt;/span&gt;+= '&amp;lt;p style=&quot;font-size:18px&quot;&amp;gt;&amp;lt;b&amp;gt;æ€ç»´å¯¼èˆªï¼š&amp;lt;/b&amp;gt;&amp;lt;/p&amp;gt;'&lt;span&gt;;
        content &lt;/span&gt;+= '&amp;lt;ul&amp;gt;'&lt;span&gt;;
         
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;ç›®å½•éå†&lt;/span&gt;
        &lt;span&gt;for&lt;/span&gt;(&lt;span&gt;var&lt;/span&gt; i=0; i&amp;lt;h2_list.length; i++&lt;span&gt;)
        {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å›åˆ°é¡¶éƒ¨&lt;/span&gt;
            &lt;span&gt;var&lt;/span&gt; go_to_top = '&amp;lt;div style=&quot;text-align: right;&quot;&amp;gt;&amp;lt;a href=&quot;#_labelTop&quot;&amp;gt;&amp;lt;b style=&quot;font-family: &quot;Arial&quot;,&quot;Microsoft YaHei&quot;,&quot;é»‘ä½“&quot;,&quot;å®‹ä½“&quot;,sans-serif;&quot;&amp;gt;ğŸš€å›åˆ°é¡¶éƒ¨&amp;lt;/b&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;a name=&quot;_label' + i + '&quot;&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/div&amp;gt;'&lt;span&gt;;
            
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å›åˆ°é¡¶éƒ¨æ·»åŠ &lt;/span&gt;
&lt;span&gt;            $(h2_list[i]).before(go_to_top);
            
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;h3åˆ—è¡¨æ•°æ®&lt;/span&gt;
             &lt;span&gt;var&lt;/span&gt; h3_list = $(h2_list[i]).nextAll(&quot;h3&quot;&lt;span&gt;);
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;console.log(&quot;h3låˆ—è¡¨æ•°æ®&quot;);&lt;/span&gt;
            &lt;span&gt;var&lt;/span&gt; li3_content = ''&lt;span&gt;;
            &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;(&lt;span&gt;var&lt;/span&gt; j=0; j&amp;lt;h3_list.length; j++&lt;span&gt;)
            {
              &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;h3å†…å®¹&lt;/span&gt;
              &lt;span&gt;var&lt;/span&gt; tmp = $(h3_list[j]).prevAll('h2'&lt;span&gt;).first();
            
              &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;(!&lt;span&gt;tmp.is(h2_list[i]))
                 &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
              &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; li3_anchor = '&amp;lt;a name=&quot;_label' + i + '_' + j + '&quot;&amp;gt;&amp;lt;/a&amp;gt;'&lt;span&gt;;
              $(h3_list[j]).before(li3_anchor);
              li3_content &lt;/span&gt;+= '&amp;lt;li  style=&quot;list-style-type:decimal;font-family: &quot;Arial&quot;,&quot;Microsoft YaHei&quot;,&quot;é»‘ä½“&quot;,&quot;å®‹ä½“&quot;,sans-serif;&quot;&amp;gt;&amp;lt;a href=&quot;#_label' + i + '_' + j + '&quot;&amp;gt;' + $(h3_list[j]).text().replace(/ï¼š/g,&quot;&quot;)+'&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;'&lt;span&gt;;

              &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;æŸ¥è¯¢h4å¯¼èˆªå†…å®¹éå†----2020-06-06\(^o^)/~&lt;/span&gt;
              &lt;span&gt;var&lt;/span&gt; li4_content=&quot;&quot;;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;h4éå†çš„åˆ—è¡¨æ•°æ®&lt;/span&gt;
              &lt;span&gt;var&lt;/span&gt; h4_list = $(h3_list[j]).nextAll(&quot;h4&quot;&lt;span&gt;);
              &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;æ•°æ®éå†&lt;/span&gt;
              &lt;span&gt;for&lt;/span&gt;(&lt;span&gt;var&lt;/span&gt; y=0;y&amp;lt;h4_list.length;y++&lt;span&gt;)
              {
                 &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è·å–ç¬¬ä¸€ç»„h4çš„å€¼&lt;/span&gt;
                &lt;span&gt;var&lt;/span&gt; tmp4= $(h4_list[y]).prevAll('h3'&lt;span&gt;).first();
                     
                   &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å½“éå†å†…å®¹ä¸ç­‰äºè¯¥h3ç›®å½•ä¸‹çš„å€¼æ—¶&lt;/span&gt;
                &lt;span&gt;if&lt;/span&gt;(!&lt;span&gt;tmp4.is(h3_list[j]))
                   &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;&lt;span&gt;;

                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; li4_anchor = '&amp;lt;a name=&quot;_label' +i+'_'+j+ '_' +y+ '&quot;&amp;gt;&amp;lt;/a&amp;gt;'&lt;span&gt;;
                 &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;æ’å…¥å¯¹åº”çš„ç´¢å¼•&lt;/span&gt;
&lt;span&gt;                $(h4_list[y]).before(li4_anchor);
                li4_content &lt;/span&gt;+= '&amp;lt;li style=&quot;list-style-type:lower-alpha&quot;&amp;gt;&amp;lt;a href=&quot;#_label' +i+'_' +j+ '_' + y+ '&quot;&amp;gt;' + $(h4_list[y]).text() + '&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;'&lt;span&gt;;
               }

              &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;console.log(&quot;h4éå†ç»“æŸäº†&quot;);&lt;/span&gt;
              &lt;span&gt;//&lt;/span&gt;&lt;span&gt;h4éå†æŸ¥è¯¢ç»“æŸ&lt;/span&gt;
              &lt;span&gt;if&lt;/span&gt;(li4_content.length&amp;gt;0&lt;span&gt;)
              {
                li3_content&lt;/span&gt;+=&quot;&amp;lt;ul&amp;gt;&quot;+li4_content+&quot;&amp;lt;/ul&amp;gt;&amp;lt;/li&amp;gt;&quot;&lt;span&gt;;
              }
              &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;
              {
                 li3_content&lt;/span&gt;+=&quot;&amp;lt;/li&amp;gt;&quot;&lt;span&gt;;
              }&lt;/span&gt;
&lt;span&gt;            }
            
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; li2_content = ''&lt;span&gt;;
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;(li3_content.length &amp;gt; 0&lt;span&gt;)
                li2_content &lt;/span&gt;= '&amp;lt;li style=&quot;list-style-type:square&quot;&amp;gt;&amp;lt;a href=&quot;#_label' + i + '&quot;&amp;gt;' + $(h2_list[i]).text().replace(/ï¼š/g,&quot;&quot;)+'&amp;lt;/a&amp;gt;&amp;lt;ul&amp;gt;' + li3_content + '&amp;lt;/ul&amp;gt;&amp;lt;/li&amp;gt;'&lt;span&gt;;
            &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;
                li2_content &lt;/span&gt;= '&amp;lt;li style=&quot;list-style-type:square&quot;&amp;gt;&amp;lt;a href=&quot;#_label' + i + '&quot;&amp;gt;' + $(h2_list[i]).text().replace(/ï¼š/g,&quot;&quot;)+'&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;'&lt;span&gt;;
            content &lt;/span&gt;+=&lt;span&gt; li2_content;
        }

        content &lt;/span&gt;+= '&amp;lt;/ul&amp;gt;'&lt;span&gt;;
        content &lt;/span&gt;+= '&amp;lt;/div&amp;gt;&amp;lt;p&amp;gt;&amp;amp;nbsp;&amp;lt;/p&amp;gt;'&lt;span&gt;;
        content&lt;/span&gt;+='&amp;lt;p style=&quot;font-size:18px&quot;&amp;gt;&amp;lt;b&amp;gt;æ–‡ç« æ­£æ–‡ï¼š&amp;lt;/b&amp;gt;&amp;lt;/p&amp;gt;'&lt;span&gt;;
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;($('#cnblogs_post_body').length != 0&lt;span&gt; )
        {
            $($(&lt;/span&gt;'#cnblogs_post_body')[0&lt;span&gt;]).prepend(content);
        }
    }   
}

GenerateContentList();
console.warn(&lt;/span&gt;&quot;æƒ³è¦çªç ´è‡ªå·±ï¼Œå°±è¦æ—¶åˆ»çš„é­ç­–è‡ªå·±ï¼Œæˆ‘æ˜¯å¤§å§šï¼Œä¸€ä¸ªæ°¸ä¸è®¤è¾“çš„ç”·äººï¼ï¼&quot;&lt;span&gt;);
&lt;/span&gt;&amp;lt;/script&amp;gt;
&lt;/pre&gt;&lt;/div&gt;

</description>
<pubDate>Fri, 05 Jun 2020 18:07:00 +0000</pubDate>
<dc:creator>è¿½é€æ—¶å…‰è€…</dc:creator>
<og:description>å±•ç¤ºæ•ˆæœ æ³¨æ„ï¼Œåœ¨è¿™é‡Œæ ‡é¢˜äºŒä»£è¡¨ä¸€çº§ï¼Œæ ‡é¢˜ä¸‰ä»£è¡¨äºŒçº§ï¼Œæ ‡é¢˜å››ä»£è¡¨ä¸‰çº§ã€‚ è®¾ç½®æ–¹å¼ é¦–å…ˆæˆ‘ä»¬éœ€è¦ç”³è¯·å¼€é€šjsæƒé™ï¼Œç„¶åå°†ç›®å½•jsä»£ç å¤åˆ¶åˆ°åšå®¢ä¾§è¾¹æ å…¬å‘Šï¼ˆæ”¯æŒHTMLä»£ç ï¼‰&amp;#160;ï¼ˆæ”¯æŒ JS ä»£ç </og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/Can-daydayup/p/13053213.html</dc:identifier>
</item>
<item>
<title>ä¸å¯ä¸çŸ¥çš„JSONå¤„ç†åº“ï¼ˆcJSONï¼‰ - ä¸œå°ä¸œ</title>
<link>http://www.cnblogs.com/dongxiaodong/p/13053208.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/dongxiaodong/p/13053208.html</guid>
<description>&lt;pre&gt;
&lt;span&gt;   1&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;
&lt;span&gt;   2&lt;/span&gt; &lt;span&gt;  Copyright (c) 2009-2017 Dave Gamble and cJSON contributors
&lt;/span&gt;&lt;span&gt;   3&lt;/span&gt; 
&lt;span&gt;   4&lt;/span&gt; &lt;span&gt;  Permission is hereby granted, free of charge, to any person obtaining a copy
&lt;/span&gt;&lt;span&gt;   5&lt;/span&gt; &lt;span&gt;  of this software and associated documentation files (the &quot;Software&quot;), to deal
&lt;/span&gt;&lt;span&gt;   6&lt;/span&gt; &lt;span&gt;  in the Software without restriction, including without limitation the rights
&lt;/span&gt;&lt;span&gt;   7&lt;/span&gt; &lt;span&gt;  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
&lt;/span&gt;&lt;span&gt;   8&lt;/span&gt; &lt;span&gt;  copies of the Software, and to permit persons to whom the Software is
&lt;/span&gt;&lt;span&gt;   9&lt;/span&gt; &lt;span&gt;  furnished to do so, subject to the following conditions:
&lt;/span&gt;&lt;span&gt;  10&lt;/span&gt; 
&lt;span&gt;  11&lt;/span&gt; &lt;span&gt;  The above copyright notice and this permission notice shall be included in
&lt;/span&gt;&lt;span&gt;  12&lt;/span&gt; &lt;span&gt;  all copies or substantial portions of the Software.
&lt;/span&gt;&lt;span&gt;  13&lt;/span&gt; 
&lt;span&gt;  14&lt;/span&gt; &lt;span&gt;  THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
&lt;/span&gt;&lt;span&gt;  15&lt;/span&gt; &lt;span&gt;  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
&lt;/span&gt;&lt;span&gt;  16&lt;/span&gt; &lt;span&gt;  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
&lt;/span&gt;&lt;span&gt;  17&lt;/span&gt; &lt;span&gt;  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
&lt;/span&gt;&lt;span&gt;  18&lt;/span&gt; &lt;span&gt;  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
&lt;/span&gt;&lt;span&gt;  19&lt;/span&gt; &lt;span&gt;  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
&lt;/span&gt;&lt;span&gt;  20&lt;/span&gt; &lt;span&gt;  THE SOFTWARE.
&lt;/span&gt;&lt;span&gt;  21&lt;/span&gt; &lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;  22&lt;/span&gt; 
&lt;span&gt;  23&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; cJSON &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;  24&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; JSON parser in C. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;  25&lt;/span&gt; 
&lt;span&gt;  26&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; disable warnings about old C89 functions in MSVC &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;  27&lt;/span&gt; &lt;span&gt;#if&lt;/span&gt; !defined(_CRT_SECURE_NO_DEPRECATE) &amp;amp;&amp;amp; defined(_MSC_VER)
&lt;span&gt;  28&lt;/span&gt; &lt;span&gt;#define&lt;/span&gt; _CRT_SECURE_NO_DEPRECATE
&lt;span&gt;  29&lt;/span&gt; &lt;span&gt;#endif&lt;/span&gt;
&lt;span&gt;  30&lt;/span&gt; 
&lt;span&gt;  31&lt;/span&gt; &lt;span&gt;#ifdef __GNUC__
&lt;/span&gt;&lt;span&gt;  32&lt;/span&gt; &lt;span&gt;#pragma&lt;/span&gt; GCC visibility push(default)
&lt;span&gt;  33&lt;/span&gt; &lt;span&gt;#endif&lt;/span&gt;
&lt;span&gt;  34&lt;/span&gt; &lt;span&gt;#if&lt;/span&gt; defined(_MSC_VER)
&lt;span&gt;  35&lt;/span&gt; &lt;span&gt;#pragma&lt;/span&gt; warning (push)
&lt;span&gt;  36&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; disable warning about single line comments in system headers &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;  37&lt;/span&gt; &lt;span&gt;#pragma&lt;/span&gt; warning (disable : 4001)
&lt;span&gt;  38&lt;/span&gt; &lt;span&gt;#endif&lt;/span&gt;
&lt;span&gt;  39&lt;/span&gt; 
&lt;span&gt;  40&lt;/span&gt; #include &amp;lt;&lt;span&gt;string&lt;/span&gt;.h&amp;gt;
&lt;span&gt;  41&lt;/span&gt; #include &amp;lt;stdio.h&amp;gt;
&lt;span&gt;  42&lt;/span&gt; #include &amp;lt;math.h&amp;gt;
&lt;span&gt;  43&lt;/span&gt; #include &amp;lt;stdlib.h&amp;gt;
&lt;span&gt;  44&lt;/span&gt; #include &amp;lt;limits.h&amp;gt;
&lt;span&gt;  45&lt;/span&gt; #include &amp;lt;ctype.h&amp;gt;
&lt;span&gt;  46&lt;/span&gt; #include &amp;lt;&lt;span&gt;float&lt;/span&gt;.h&amp;gt;
&lt;span&gt;  47&lt;/span&gt; 
&lt;span&gt;  48&lt;/span&gt; &lt;span&gt;#ifdef ENABLE_LOCALES
&lt;/span&gt;&lt;span&gt;  49&lt;/span&gt; #include &amp;lt;locale.h&amp;gt;
&lt;span&gt;  50&lt;/span&gt; &lt;span&gt;#endif&lt;/span&gt;
&lt;span&gt;  51&lt;/span&gt; 
&lt;span&gt;  52&lt;/span&gt; &lt;span&gt;#if&lt;/span&gt; defined(_MSC_VER)
&lt;span&gt;  53&lt;/span&gt; &lt;span&gt;#pragma&lt;/span&gt; warning (pop)
&lt;span&gt;  54&lt;/span&gt; &lt;span&gt;#endif&lt;/span&gt;
&lt;span&gt;  55&lt;/span&gt; &lt;span&gt;#ifdef __GNUC__
&lt;/span&gt;&lt;span&gt;  56&lt;/span&gt; &lt;span&gt;#pragma&lt;/span&gt; GCC visibility pop
&lt;span&gt;  57&lt;/span&gt; &lt;span&gt;#endif&lt;/span&gt;
&lt;span&gt;  58&lt;/span&gt; 
&lt;span&gt;  59&lt;/span&gt; #include &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;cJSON.h&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
&lt;span&gt;  60&lt;/span&gt; 
&lt;span&gt;  61&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; define our own boolean type &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;  62&lt;/span&gt; #ifdef &lt;span&gt;true&lt;/span&gt;
&lt;span&gt;  63&lt;/span&gt; &lt;span&gt;#undef&lt;/span&gt; true
&lt;span&gt;  64&lt;/span&gt; &lt;span&gt;#endif&lt;/span&gt;
&lt;span&gt;  65&lt;/span&gt; &lt;span&gt;#define&lt;/span&gt; true ((cJSON_bool)1)
&lt;span&gt;  66&lt;/span&gt; 
&lt;span&gt;  67&lt;/span&gt; #ifdef &lt;span&gt;false&lt;/span&gt;
&lt;span&gt;  68&lt;/span&gt; &lt;span&gt;#undef&lt;/span&gt; false
&lt;span&gt;  69&lt;/span&gt; &lt;span&gt;#endif&lt;/span&gt;
&lt;span&gt;  70&lt;/span&gt; &lt;span&gt;#define&lt;/span&gt; false ((cJSON_bool)0)
&lt;span&gt;  71&lt;/span&gt; 
&lt;span&gt;  72&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; define isnan and isinf for ANSI C, if in C99 or above, isnan and isinf has been defined in math.h &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;  73&lt;/span&gt; &lt;span&gt;#ifndef isinf
&lt;/span&gt;&lt;span&gt;  74&lt;/span&gt; &lt;span&gt;#define&lt;/span&gt; isinf(d) (isnan((d - d)) &amp;amp;&amp;amp; !isnan(d))
&lt;span&gt;  75&lt;/span&gt; &lt;span&gt;#endif&lt;/span&gt;
&lt;span&gt;  76&lt;/span&gt; &lt;span&gt;#ifndef isnan
&lt;/span&gt;&lt;span&gt;  77&lt;/span&gt; &lt;span&gt;#define&lt;/span&gt; isnan(d) (d != d)
&lt;span&gt;  78&lt;/span&gt; &lt;span&gt;#endif&lt;/span&gt;
&lt;span&gt;  79&lt;/span&gt; 
&lt;span&gt;  80&lt;/span&gt; &lt;span&gt;#ifndef NAN
&lt;/span&gt;&lt;span&gt;  81&lt;/span&gt; &lt;span&gt;#define&lt;/span&gt; NAN 0.0/0.0
&lt;span&gt;  82&lt;/span&gt; &lt;span&gt;#endif&lt;/span&gt;
&lt;span&gt;  83&lt;/span&gt; 
&lt;span&gt;  84&lt;/span&gt; typedef &lt;span&gt;struct&lt;/span&gt;&lt;span&gt; {
&lt;/span&gt;&lt;span&gt;  85&lt;/span&gt;     &lt;span&gt;const&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt; *&lt;span&gt;json;
&lt;/span&gt;&lt;span&gt;  86&lt;/span&gt; &lt;span&gt;    size_t position;
&lt;/span&gt;&lt;span&gt;  87&lt;/span&gt; &lt;span&gt;} error;
&lt;/span&gt;&lt;span&gt;  88&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; error global_error = { NULL, &lt;span&gt;0&lt;/span&gt;&lt;span&gt; };
&lt;/span&gt;&lt;span&gt;  89&lt;/span&gt; 
&lt;span&gt;  90&lt;/span&gt; CJSON_PUBLIC(&lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; *) cJSON_GetErrorPtr(&lt;span&gt;void&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;  91&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;  92&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; (&lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt;*) (global_error.json +&lt;span&gt; global_error.position);
&lt;/span&gt;&lt;span&gt;  93&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;  94&lt;/span&gt; 
&lt;span&gt;  95&lt;/span&gt; CJSON_PUBLIC(&lt;span&gt;char&lt;/span&gt; *) cJSON_GetStringValue(cJSON *&lt;span&gt;item) 
&lt;/span&gt;&lt;span&gt;  96&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;  97&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;cJSON_IsString(item)) 
&lt;/span&gt;&lt;span&gt;  98&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;  99&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt; 100&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 101&lt;/span&gt; 
&lt;span&gt; 102&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; item-&amp;gt;&lt;span&gt;valuestring;
&lt;/span&gt;&lt;span&gt; 103&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 104&lt;/span&gt; 
&lt;span&gt; 105&lt;/span&gt; CJSON_PUBLIC(&lt;span&gt;double&lt;/span&gt;) cJSON_GetNumberValue(cJSON *&lt;span&gt;item) 
&lt;/span&gt;&lt;span&gt; 106&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt; 107&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;cJSON_IsNumber(item)) 
&lt;/span&gt;&lt;span&gt; 108&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 109&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NAN;
&lt;/span&gt;&lt;span&gt; 110&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 111&lt;/span&gt; 
&lt;span&gt; 112&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; item-&amp;gt;&lt;span&gt;valuedouble;
&lt;/span&gt;&lt;span&gt; 113&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 114&lt;/span&gt; 
&lt;span&gt; 115&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; This is a safeguard to prevent copy-pasters from using incompatible C and header files &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 116&lt;/span&gt; &lt;span&gt;#if&lt;/span&gt; (CJSON_VERSION_MAJOR != 1) || (CJSON_VERSION_MINOR != 7) || (CJSON_VERSION_PATCH != 13)
&lt;span&gt; 117&lt;/span&gt;     &lt;span&gt;#error&lt;/span&gt; cJSON.h and cJSON.c have different versions. Make sure that both have the same.
&lt;span&gt; 118&lt;/span&gt; &lt;span&gt;#endif&lt;/span&gt;
&lt;span&gt; 119&lt;/span&gt; 
&lt;span&gt; 120&lt;/span&gt; CJSON_PUBLIC(&lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt;*) cJSON_Version(&lt;span&gt;void&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 121&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt; 122&lt;/span&gt;     &lt;span&gt;static&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; version[&lt;span&gt;15&lt;/span&gt;&lt;span&gt;];
&lt;/span&gt;&lt;span&gt; 123&lt;/span&gt;     sprintf(version, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;%i.%i.%i&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, CJSON_VERSION_MAJOR, CJSON_VERSION_MINOR, CJSON_VERSION_PATCH);
&lt;/span&gt;&lt;span&gt; 124&lt;/span&gt; 
&lt;span&gt; 125&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; version;
&lt;/span&gt;&lt;span&gt; 126&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 127&lt;/span&gt; 
&lt;span&gt; 128&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Case insensitive string comparison, doesn't consider two NULL pointers equal though &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 129&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; case_insensitive_strcmp(&lt;span&gt;const&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt; *string1, &lt;span&gt;const&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt; *&lt;span&gt;string2)
&lt;/span&gt;&lt;span&gt; 130&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt; 131&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; ((string1 == NULL) || (string2 ==&lt;span&gt; NULL))
&lt;/span&gt;&lt;span&gt; 132&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 133&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 134&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 135&lt;/span&gt; 
&lt;span&gt; 136&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (string1 ==&lt;span&gt; string2)
&lt;/span&gt;&lt;span&gt; 137&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 138&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 139&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 140&lt;/span&gt; 
&lt;span&gt; 141&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt;(; tolower(*string1) == tolower(*string2); (&lt;span&gt;void&lt;/span&gt;)string1++, string2++&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 142&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 143&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (*string1 == &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\0&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 144&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 145&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt; &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 146&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 147&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 148&lt;/span&gt; 
&lt;span&gt; 149&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; tolower(*string1) - tolower(*&lt;span&gt;string2);
&lt;/span&gt;&lt;span&gt; 150&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 151&lt;/span&gt; 
&lt;span&gt; 152&lt;/span&gt; typedef &lt;span&gt;struct&lt;/span&gt;&lt;span&gt; internal_hooks
&lt;/span&gt;&lt;span&gt; 153&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt; 154&lt;/span&gt;     &lt;span&gt;void&lt;/span&gt; *(CJSON_CDECL *&lt;span&gt;allocate)(size_t size);
&lt;/span&gt;&lt;span&gt; 155&lt;/span&gt;     &lt;span&gt;void&lt;/span&gt; (CJSON_CDECL *deallocate)(&lt;span&gt;void&lt;/span&gt; *&lt;span&gt;pointer);
&lt;/span&gt;&lt;span&gt; 156&lt;/span&gt;     &lt;span&gt;void&lt;/span&gt; *(CJSON_CDECL *reallocate)(&lt;span&gt;void&lt;/span&gt; *&lt;span&gt;pointer, size_t size);
&lt;/span&gt;&lt;span&gt; 157&lt;/span&gt; &lt;span&gt;} internal_hooks;
&lt;/span&gt;&lt;span&gt; 158&lt;/span&gt; 
&lt;span&gt; 159&lt;/span&gt; &lt;span&gt;#if&lt;/span&gt; defined(_MSC_VER)
&lt;span&gt; 160&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; work around MSVC error C2322: '...' address of dllimport '...' is not static &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 161&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; *&lt;span&gt; CJSON_CDECL internal_malloc(size_t size)
&lt;/span&gt;&lt;span&gt; 162&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt; 163&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;malloc&lt;/span&gt;&lt;span&gt;(size);
&lt;/span&gt;&lt;span&gt; 164&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 165&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; CJSON_CDECL internal_free(&lt;span&gt;void&lt;/span&gt; *&lt;span&gt;pointer)
&lt;/span&gt;&lt;span&gt; 166&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt; 167&lt;/span&gt;     &lt;span&gt;free&lt;/span&gt;&lt;span&gt;(pointer);
&lt;/span&gt;&lt;span&gt; 168&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 169&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; * CJSON_CDECL internal_realloc(&lt;span&gt;void&lt;/span&gt; *&lt;span&gt;pointer, size_t size)
&lt;/span&gt;&lt;span&gt; 170&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt; 171&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;realloc&lt;/span&gt;&lt;span&gt;(pointer, size);
&lt;/span&gt;&lt;span&gt; 172&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 173&lt;/span&gt; &lt;span&gt;#else&lt;/span&gt;
&lt;span&gt; 174&lt;/span&gt; &lt;span&gt;#define&lt;/span&gt; internal_malloc malloc
&lt;span&gt; 175&lt;/span&gt; &lt;span&gt;#define&lt;/span&gt; internal_free free
&lt;span&gt; 176&lt;/span&gt; &lt;span&gt;#define&lt;/span&gt; internal_realloc realloc
&lt;span&gt; 177&lt;/span&gt; &lt;span&gt;#endif&lt;/span&gt;
&lt;span&gt; 178&lt;/span&gt; 
&lt;span&gt; 179&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; strlen of character literals resolved at compile time &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 180&lt;/span&gt; &lt;span&gt;#define&lt;/span&gt; static_strlen(string_literal) (sizeof(string_literal) - sizeof(&quot;&quot;))
&lt;span&gt; 181&lt;/span&gt; 
&lt;span&gt; 182&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; internal_hooks global_hooks =&lt;span&gt; { internal_malloc, internal_free, internal_realloc };
&lt;/span&gt;&lt;span&gt; 183&lt;/span&gt; 
&lt;span&gt; 184&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt;* cJSON_strdup(&lt;span&gt;const&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt;* &lt;span&gt;string&lt;/span&gt;, &lt;span&gt;const&lt;/span&gt; internal_hooks * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; hooks)
&lt;/span&gt;&lt;span&gt; 185&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt; 186&lt;/span&gt;     size_t length = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 187&lt;/span&gt;     unsigned &lt;span&gt;char&lt;/span&gt; *copy =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt; 188&lt;/span&gt; 
&lt;span&gt; 189&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (&lt;span&gt;string&lt;/span&gt; ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt; 190&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 191&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt; 192&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 193&lt;/span&gt; 
&lt;span&gt; 194&lt;/span&gt;     length = strlen((&lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt;*)&lt;span&gt;string&lt;/span&gt;) + &lt;span&gt;sizeof&lt;/span&gt;(&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 195&lt;/span&gt;     copy = (unsigned &lt;span&gt;char&lt;/span&gt;*)hooks-&amp;gt;&lt;span&gt;allocate(length);
&lt;/span&gt;&lt;span&gt; 196&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (copy ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt; 197&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 198&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt; 199&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 200&lt;/span&gt;     memcpy(copy, &lt;span&gt;string&lt;/span&gt;&lt;span&gt;, length);
&lt;/span&gt;&lt;span&gt; 201&lt;/span&gt; 
&lt;span&gt; 202&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; copy;
&lt;/span&gt;&lt;span&gt; 203&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 204&lt;/span&gt; 
&lt;span&gt; 205&lt;/span&gt; CJSON_PUBLIC(&lt;span&gt;void&lt;/span&gt;) cJSON_InitHooks(cJSON_Hooks*&lt;span&gt; hooks)
&lt;/span&gt;&lt;span&gt; 206&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt; 207&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (hooks ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt; 208&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 209&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Reset hooks &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 210&lt;/span&gt;         global_hooks.allocate = &lt;span&gt;malloc&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 211&lt;/span&gt;         global_hooks.deallocate = &lt;span&gt;free&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 212&lt;/span&gt;         global_hooks.reallocate = &lt;span&gt;realloc&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 213&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 214&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 215&lt;/span&gt; 
&lt;span&gt; 216&lt;/span&gt;     global_hooks.allocate = &lt;span&gt;malloc&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 217&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (hooks-&amp;gt;malloc_fn !=&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt; 218&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 219&lt;/span&gt;         global_hooks.allocate = hooks-&amp;gt;&lt;span&gt;malloc_fn;
&lt;/span&gt;&lt;span&gt; 220&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 221&lt;/span&gt; 
&lt;span&gt; 222&lt;/span&gt;     global_hooks.deallocate = &lt;span&gt;free&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 223&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (hooks-&amp;gt;free_fn !=&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt; 224&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 225&lt;/span&gt;         global_hooks.deallocate = hooks-&amp;gt;&lt;span&gt;free_fn;
&lt;/span&gt;&lt;span&gt; 226&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 227&lt;/span&gt; 
&lt;span&gt; 228&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; use realloc only if both free and malloc are used &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 229&lt;/span&gt;     global_hooks.reallocate =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt; 230&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; ((global_hooks.allocate == &lt;span&gt;malloc&lt;/span&gt;) &amp;amp;&amp;amp; (global_hooks.deallocate == &lt;span&gt;free&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt; 231&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 232&lt;/span&gt;         global_hooks.reallocate = &lt;span&gt;realloc&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 233&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 234&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 235&lt;/span&gt; 
&lt;span&gt; 236&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Internal constructor. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 237&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; cJSON *cJSON_New_Item(&lt;span&gt;const&lt;/span&gt; internal_hooks * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; hooks)
&lt;/span&gt;&lt;span&gt; 238&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt; 239&lt;/span&gt;     cJSON* node = (cJSON*)hooks-&amp;gt;allocate(&lt;span&gt;sizeof&lt;/span&gt;&lt;span&gt;(cJSON));
&lt;/span&gt;&lt;span&gt; 240&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt;&lt;span&gt; (node)
&lt;/span&gt;&lt;span&gt; 241&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 242&lt;/span&gt;         memset(node, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\0&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;sizeof&lt;/span&gt;&lt;span&gt;(cJSON));
&lt;/span&gt;&lt;span&gt; 243&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 244&lt;/span&gt; 
&lt;span&gt; 245&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; node;
&lt;/span&gt;&lt;span&gt; 246&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 247&lt;/span&gt; 
&lt;span&gt; 248&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Delete a cJSON structure. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 249&lt;/span&gt; CJSON_PUBLIC(&lt;span&gt;void&lt;/span&gt;) cJSON_Delete(cJSON *&lt;span&gt;item)
&lt;/span&gt;&lt;span&gt; 250&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt; 251&lt;/span&gt;     cJSON *next =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt; 252&lt;/span&gt;     &lt;span&gt;while&lt;/span&gt; (item !=&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt; 253&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 254&lt;/span&gt;         next = item-&amp;gt;&lt;span&gt;next;
&lt;/span&gt;&lt;span&gt; 255&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (!(item-&amp;gt;type &amp;amp; cJSON_IsReference) &amp;amp;&amp;amp; (item-&amp;gt;child !=&lt;span&gt; NULL))
&lt;/span&gt;&lt;span&gt; 256&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 257&lt;/span&gt;             cJSON_Delete(item-&amp;gt;&lt;span&gt;child);
&lt;/span&gt;&lt;span&gt; 258&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 259&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (!(item-&amp;gt;type &amp;amp; cJSON_IsReference) &amp;amp;&amp;amp; (item-&amp;gt;valuestring !=&lt;span&gt; NULL))
&lt;/span&gt;&lt;span&gt; 260&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 261&lt;/span&gt;             global_hooks.deallocate(item-&amp;gt;&lt;span&gt;valuestring);
&lt;/span&gt;&lt;span&gt; 262&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 263&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (!(item-&amp;gt;type &amp;amp; cJSON_StringIsConst) &amp;amp;&amp;amp; (item-&amp;gt;&lt;span&gt;string&lt;/span&gt; !=&lt;span&gt; NULL))
&lt;/span&gt;&lt;span&gt; 264&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 265&lt;/span&gt;             global_hooks.deallocate(item-&amp;gt;&lt;span&gt;string&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 266&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 267&lt;/span&gt; &lt;span&gt;        global_hooks.deallocate(item);
&lt;/span&gt;&lt;span&gt; 268&lt;/span&gt;         item =&lt;span&gt; next;
&lt;/span&gt;&lt;span&gt; 269&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 270&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 271&lt;/span&gt; 
&lt;span&gt; 272&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; get the decimal point character of the current locale &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 273&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt; get_decimal_point(&lt;span&gt;void&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 274&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt; 275&lt;/span&gt; &lt;span&gt;#ifdef ENABLE_LOCALES
&lt;/span&gt;&lt;span&gt; 276&lt;/span&gt;     &lt;span&gt;struct&lt;/span&gt; lconv *lconv =&lt;span&gt; localeconv();
&lt;/span&gt;&lt;span&gt; 277&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; (unsigned &lt;span&gt;char&lt;/span&gt;) lconv-&amp;gt;decimal_point[&lt;span&gt;0&lt;/span&gt;&lt;span&gt;];
&lt;/span&gt;&lt;span&gt; 278&lt;/span&gt; &lt;span&gt;#else&lt;/span&gt;
&lt;span&gt; 279&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 280&lt;/span&gt; &lt;span&gt;#endif&lt;/span&gt;
&lt;span&gt; 281&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 282&lt;/span&gt; 
&lt;span&gt; 283&lt;/span&gt; typedef &lt;span&gt;struct&lt;/span&gt;
&lt;span&gt; 284&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt; 285&lt;/span&gt;     &lt;span&gt;const&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt; *&lt;span&gt;content;
&lt;/span&gt;&lt;span&gt; 286&lt;/span&gt; &lt;span&gt;    size_t length;
&lt;/span&gt;&lt;span&gt; 287&lt;/span&gt; &lt;span&gt;    size_t offset;
&lt;/span&gt;&lt;span&gt; 288&lt;/span&gt;     size_t depth; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; How deeply nested (in arrays/objects) is the input at the current offset. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 289&lt;/span&gt; &lt;span&gt;    internal_hooks hooks;
&lt;/span&gt;&lt;span&gt; 290&lt;/span&gt; &lt;span&gt;} parse_buffer;
&lt;/span&gt;&lt;span&gt; 291&lt;/span&gt; 
&lt;span&gt; 292&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; check if the given size is left to read in a given parse buffer (starting with 1) &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 293&lt;/span&gt; &lt;span&gt;#define&lt;/span&gt; can_read(buffer, size) ((buffer != NULL) &amp;amp;&amp;amp; (((buffer)-&amp;gt;offset + size) &amp;lt;= (buffer)-&amp;gt;length))
&lt;span&gt; 294&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; check if the buffer can be accessed at the given index (starting with 0) &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 295&lt;/span&gt; &lt;span&gt;#define&lt;/span&gt; can_access_at_index(buffer, index) ((buffer != NULL) &amp;amp;&amp;amp; (((buffer)-&amp;gt;offset + index) &amp;lt; (buffer)-&amp;gt;length))
&lt;span&gt; 296&lt;/span&gt; &lt;span&gt;#define&lt;/span&gt; cannot_access_at_index(buffer, index) (!can_access_at_index(buffer, index))
&lt;span&gt; 297&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; get a pointer to the buffer at the position &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 298&lt;/span&gt; &lt;span&gt;#define&lt;/span&gt; buffer_at_offset(buffer) ((buffer)-&amp;gt;content + (buffer)-&amp;gt;offset)
&lt;span&gt; 299&lt;/span&gt; 
&lt;span&gt; 300&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Parse the input text to generate a number, and populate the result into item. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 301&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; cJSON_bool parse_number(cJSON * &lt;span&gt;const&lt;/span&gt; item, parse_buffer * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; input_buffer)
&lt;/span&gt;&lt;span&gt; 302&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt; 303&lt;/span&gt;     &lt;span&gt;double&lt;/span&gt; number = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 304&lt;/span&gt;     unsigned &lt;span&gt;char&lt;/span&gt; *after_end =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt; 305&lt;/span&gt;     unsigned &lt;span&gt;char&lt;/span&gt; number_c_string[&lt;span&gt;64&lt;/span&gt;&lt;span&gt;];
&lt;/span&gt;&lt;span&gt; 306&lt;/span&gt;     unsigned &lt;span&gt;char&lt;/span&gt; decimal_point =&lt;span&gt; get_decimal_point();
&lt;/span&gt;&lt;span&gt; 307&lt;/span&gt;     size_t i = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 308&lt;/span&gt; 
&lt;span&gt; 309&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; ((input_buffer == NULL) || (input_buffer-&amp;gt;content ==&lt;span&gt; NULL))
&lt;/span&gt;&lt;span&gt; 310&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 311&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 312&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 313&lt;/span&gt; 
&lt;span&gt; 314&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; copy the number into a temporary buffer and replace '.' with the decimal point
&lt;/span&gt;&lt;span&gt; 315&lt;/span&gt; &lt;span&gt;     * of the current locale (for strtod)
&lt;/span&gt;&lt;span&gt; 316&lt;/span&gt; &lt;span&gt;     * This also takes care of '\0' not necessarily being available for marking the end of the input &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 317&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; (i = &lt;span&gt;0&lt;/span&gt;; (i &amp;lt; (&lt;span&gt;sizeof&lt;/span&gt;(number_c_string) - &lt;span&gt;1&lt;/span&gt;)) &amp;amp;&amp;amp; can_access_at_index(input_buffer, i); i++&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 318&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 319&lt;/span&gt;         &lt;span&gt;switch&lt;/span&gt;&lt;span&gt; (buffer_at_offset(input_buffer)[i])
&lt;/span&gt;&lt;span&gt; 320&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 321&lt;/span&gt;             &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 322&lt;/span&gt;             &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 323&lt;/span&gt;             &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 324&lt;/span&gt;             &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 325&lt;/span&gt;             &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 326&lt;/span&gt;             &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 327&lt;/span&gt;             &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 328&lt;/span&gt;             &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;7&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 329&lt;/span&gt;             &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 330&lt;/span&gt;             &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;9&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 331&lt;/span&gt;             &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 332&lt;/span&gt;             &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 333&lt;/span&gt;             &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;e&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 334&lt;/span&gt;             &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;E&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 335&lt;/span&gt;                 number_c_string[i] =&lt;span&gt; buffer_at_offset(input_buffer)[i];
&lt;/span&gt;&lt;span&gt; 336&lt;/span&gt;                 &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 337&lt;/span&gt; 
&lt;span&gt; 338&lt;/span&gt;             &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 339&lt;/span&gt;                 number_c_string[i] =&lt;span&gt; decimal_point;
&lt;/span&gt;&lt;span&gt; 340&lt;/span&gt;                 &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 341&lt;/span&gt; 
&lt;span&gt; 342&lt;/span&gt;             &lt;span&gt;default&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 343&lt;/span&gt;                 &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; loop_end;
&lt;/span&gt;&lt;span&gt; 344&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 345&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 346&lt;/span&gt; &lt;span&gt;loop_end:
&lt;/span&gt;&lt;span&gt; 347&lt;/span&gt;     number_c_string[i] = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\0&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 348&lt;/span&gt; 
&lt;span&gt; 349&lt;/span&gt;     number = strtod((&lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt;*)number_c_string, (&lt;span&gt;char&lt;/span&gt;**)&amp;amp;&lt;span&gt;after_end);
&lt;/span&gt;&lt;span&gt; 350&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (number_c_string ==&lt;span&gt; after_end)
&lt;/span&gt;&lt;span&gt; 351&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 352&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; parse_error &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 353&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 354&lt;/span&gt; 
&lt;span&gt; 355&lt;/span&gt;     item-&amp;gt;valuedouble =&lt;span&gt; number;
&lt;/span&gt;&lt;span&gt; 356&lt;/span&gt; 
&lt;span&gt; 357&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; use saturation in case of overflow &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 358&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (number &amp;gt;=&lt;span&gt; INT_MAX)
&lt;/span&gt;&lt;span&gt; 359&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 360&lt;/span&gt;         item-&amp;gt;valueint =&lt;span&gt; INT_MAX;
&lt;/span&gt;&lt;span&gt; 361&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 362&lt;/span&gt;     &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (number &amp;lt;= (&lt;span&gt;double&lt;/span&gt;&lt;span&gt;)INT_MIN)
&lt;/span&gt;&lt;span&gt; 363&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 364&lt;/span&gt;         item-&amp;gt;valueint =&lt;span&gt; INT_MIN;
&lt;/span&gt;&lt;span&gt; 365&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 366&lt;/span&gt;     &lt;span&gt;else&lt;/span&gt;
&lt;span&gt; 367&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 368&lt;/span&gt;         item-&amp;gt;valueint = (&lt;span&gt;int&lt;/span&gt;&lt;span&gt;)number;
&lt;/span&gt;&lt;span&gt; 369&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 370&lt;/span&gt; 
&lt;span&gt; 371&lt;/span&gt;     item-&amp;gt;type =&lt;span&gt; cJSON_Number;
&lt;/span&gt;&lt;span&gt; 372&lt;/span&gt; 
&lt;span&gt; 373&lt;/span&gt;     input_buffer-&amp;gt;offset += (size_t)(after_end -&lt;span&gt; number_c_string);
&lt;/span&gt;&lt;span&gt; 374&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 375&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 376&lt;/span&gt; 
&lt;span&gt; 377&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; don't ask me, but the original cJSON_SetNumberValue returns an integer or double &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 378&lt;/span&gt; CJSON_PUBLIC(&lt;span&gt;double&lt;/span&gt;) cJSON_SetNumberHelper(cJSON *&lt;span&gt;object&lt;/span&gt;, &lt;span&gt;double&lt;/span&gt;&lt;span&gt; number)
&lt;/span&gt;&lt;span&gt; 379&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt; 380&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (number &amp;gt;=&lt;span&gt; INT_MAX)
&lt;/span&gt;&lt;span&gt; 381&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 382&lt;/span&gt;         &lt;span&gt;object&lt;/span&gt;-&amp;gt;valueint =&lt;span&gt; INT_MAX;
&lt;/span&gt;&lt;span&gt; 383&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 384&lt;/span&gt;     &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (number &amp;lt;= (&lt;span&gt;double&lt;/span&gt;&lt;span&gt;)INT_MIN)
&lt;/span&gt;&lt;span&gt; 385&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 386&lt;/span&gt;         &lt;span&gt;object&lt;/span&gt;-&amp;gt;valueint =&lt;span&gt; INT_MIN;
&lt;/span&gt;&lt;span&gt; 387&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 388&lt;/span&gt;     &lt;span&gt;else&lt;/span&gt;
&lt;span&gt; 389&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 390&lt;/span&gt;         &lt;span&gt;object&lt;/span&gt;-&amp;gt;valueint = (&lt;span&gt;int&lt;/span&gt;&lt;span&gt;)number;
&lt;/span&gt;&lt;span&gt; 391&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 392&lt;/span&gt; 
&lt;span&gt; 393&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;object&lt;/span&gt;-&amp;gt;valuedouble =&lt;span&gt; number;
&lt;/span&gt;&lt;span&gt; 394&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 395&lt;/span&gt; 
&lt;span&gt; 396&lt;/span&gt; CJSON_PUBLIC(&lt;span&gt;char&lt;/span&gt;*) cJSON_SetValuestring(cJSON *&lt;span&gt;object&lt;/span&gt;, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; *&lt;span&gt;valuestring)
&lt;/span&gt;&lt;span&gt; 397&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt; 398&lt;/span&gt;     &lt;span&gt;char&lt;/span&gt; *copy =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt; 399&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; if object's type is not cJSON_String or is cJSON_IsReference, it should not set valuestring &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 400&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (!(&lt;span&gt;object&lt;/span&gt;-&amp;gt;type &amp;amp; cJSON_String) || (&lt;span&gt;object&lt;/span&gt;-&amp;gt;type &amp;amp;&lt;span&gt; cJSON_IsReference))
&lt;/span&gt;&lt;span&gt; 401&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 402&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt; 403&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 404&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (strlen(valuestring) &amp;lt;= strlen(&lt;span&gt;object&lt;/span&gt;-&amp;gt;&lt;span&gt;valuestring))
&lt;/span&gt;&lt;span&gt; 405&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 406&lt;/span&gt;         strcpy(&lt;span&gt;object&lt;/span&gt;-&amp;gt;&lt;span&gt;valuestring, valuestring);
&lt;/span&gt;&lt;span&gt; 407&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;object&lt;/span&gt;-&amp;gt;&lt;span&gt;valuestring;
&lt;/span&gt;&lt;span&gt; 408&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 409&lt;/span&gt;     copy = (&lt;span&gt;char&lt;/span&gt;*) cJSON_strdup((&lt;span&gt;const&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt;*)valuestring, &amp;amp;&lt;span&gt;global_hooks);
&lt;/span&gt;&lt;span&gt; 410&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (copy ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt; 411&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 412&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt; 413&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 414&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (&lt;span&gt;object&lt;/span&gt;-&amp;gt;valuestring !=&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt; 415&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 416&lt;/span&gt;         cJSON_free(&lt;span&gt;object&lt;/span&gt;-&amp;gt;&lt;span&gt;valuestring);
&lt;/span&gt;&lt;span&gt; 417&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 418&lt;/span&gt;     &lt;span&gt;object&lt;/span&gt;-&amp;gt;valuestring =&lt;span&gt; copy;
&lt;/span&gt;&lt;span&gt; 419&lt;/span&gt; 
&lt;span&gt; 420&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; copy;
&lt;/span&gt;&lt;span&gt; 421&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 422&lt;/span&gt; 
&lt;span&gt; 423&lt;/span&gt; typedef &lt;span&gt;struct&lt;/span&gt;
&lt;span&gt; 424&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt; 425&lt;/span&gt;     unsigned &lt;span&gt;char&lt;/span&gt; *&lt;span&gt;buffer;
&lt;/span&gt;&lt;span&gt; 426&lt;/span&gt; &lt;span&gt;    size_t length;
&lt;/span&gt;&lt;span&gt; 427&lt;/span&gt; &lt;span&gt;    size_t offset;
&lt;/span&gt;&lt;span&gt; 428&lt;/span&gt;     size_t depth; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; current nesting depth (for formatted printing) &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 429&lt;/span&gt; &lt;span&gt;    cJSON_bool noalloc;
&lt;/span&gt;&lt;span&gt; 430&lt;/span&gt;     cJSON_bool format; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; is this print a formatted print &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 431&lt;/span&gt; &lt;span&gt;    internal_hooks hooks;
&lt;/span&gt;&lt;span&gt; 432&lt;/span&gt; &lt;span&gt;} printbuffer;
&lt;/span&gt;&lt;span&gt; 433&lt;/span&gt; 
&lt;span&gt; 434&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; realloc printbuffer if necessary to have at least &quot;needed&quot; bytes more &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 435&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt;* ensure(printbuffer * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; p, size_t needed)
&lt;/span&gt;&lt;span&gt; 436&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt; 437&lt;/span&gt;     unsigned &lt;span&gt;char&lt;/span&gt; *newbuffer =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt; 438&lt;/span&gt;     size_t newsize = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 439&lt;/span&gt; 
&lt;span&gt; 440&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; ((p == NULL) || (p-&amp;gt;buffer ==&lt;span&gt; NULL))
&lt;/span&gt;&lt;span&gt; 441&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 442&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt; 443&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 444&lt;/span&gt; 
&lt;span&gt; 445&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; ((p-&amp;gt;length &amp;gt; &lt;span&gt;0&lt;/span&gt;) &amp;amp;&amp;amp; (p-&amp;gt;offset &amp;gt;= p-&amp;gt;&lt;span&gt;length))
&lt;/span&gt;&lt;span&gt; 446&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 447&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; make sure that offset is valid &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 448&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt; 449&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 450&lt;/span&gt; 
&lt;span&gt; 451&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (needed &amp;gt;&lt;span&gt; INT_MAX)
&lt;/span&gt;&lt;span&gt; 452&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 453&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; sizes bigger than INT_MAX are currently not supported &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 454&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt; 455&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 456&lt;/span&gt; 
&lt;span&gt; 457&lt;/span&gt;     needed += p-&amp;gt;offset + &lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 458&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (needed &amp;lt;= p-&amp;gt;&lt;span&gt;length)
&lt;/span&gt;&lt;span&gt; 459&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 460&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; p-&amp;gt;buffer + p-&amp;gt;&lt;span&gt;offset;
&lt;/span&gt;&lt;span&gt; 461&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 462&lt;/span&gt; 
&lt;span&gt; 463&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (p-&amp;gt;&lt;span&gt;noalloc) {
&lt;/span&gt;&lt;span&gt; 464&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt; 465&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 466&lt;/span&gt; 
&lt;span&gt; 467&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; calculate new buffer size &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 468&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (needed &amp;gt; (INT_MAX / &lt;span&gt;2&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt; 469&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 470&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; overflow of int, use INT_MAX if possible &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 471&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (needed &amp;lt;=&lt;span&gt; INT_MAX)
&lt;/span&gt;&lt;span&gt; 472&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 473&lt;/span&gt;             newsize =&lt;span&gt; INT_MAX;
&lt;/span&gt;&lt;span&gt; 474&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 475&lt;/span&gt;         &lt;span&gt;else&lt;/span&gt;
&lt;span&gt; 476&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 477&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt; 478&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 479&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 480&lt;/span&gt;     &lt;span&gt;else&lt;/span&gt;
&lt;span&gt; 481&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 482&lt;/span&gt;         newsize = needed * &lt;span&gt;2&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 483&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 484&lt;/span&gt; 
&lt;span&gt; 485&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (p-&amp;gt;hooks.reallocate !=&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt; 486&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 487&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; reallocate with realloc if available &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 488&lt;/span&gt;         newbuffer = (unsigned &lt;span&gt;char&lt;/span&gt;*)p-&amp;gt;hooks.reallocate(p-&amp;gt;&lt;span&gt;buffer, newsize);
&lt;/span&gt;&lt;span&gt; 489&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (newbuffer ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt; 490&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 491&lt;/span&gt;             p-&amp;gt;hooks.deallocate(p-&amp;gt;&lt;span&gt;buffer);
&lt;/span&gt;&lt;span&gt; 492&lt;/span&gt;             p-&amp;gt;length = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 493&lt;/span&gt;             p-&amp;gt;buffer =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt; 494&lt;/span&gt; 
&lt;span&gt; 495&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt; 496&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 497&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 498&lt;/span&gt;     &lt;span&gt;else&lt;/span&gt;
&lt;span&gt; 499&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 500&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; otherwise reallocate manually &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 501&lt;/span&gt;         newbuffer = (unsigned &lt;span&gt;char&lt;/span&gt;*)p-&amp;gt;&lt;span&gt;hooks.allocate(newsize);
&lt;/span&gt;&lt;span&gt; 502&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;newbuffer)
&lt;/span&gt;&lt;span&gt; 503&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 504&lt;/span&gt;             p-&amp;gt;hooks.deallocate(p-&amp;gt;&lt;span&gt;buffer);
&lt;/span&gt;&lt;span&gt; 505&lt;/span&gt;             p-&amp;gt;length = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 506&lt;/span&gt;             p-&amp;gt;buffer =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt; 507&lt;/span&gt; 
&lt;span&gt; 508&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt; 509&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 510&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt;&lt;span&gt; (newbuffer)
&lt;/span&gt;&lt;span&gt; 511&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 512&lt;/span&gt;             memcpy(newbuffer, p-&amp;gt;buffer, p-&amp;gt;offset + &lt;span&gt;1&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 513&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 514&lt;/span&gt;         p-&amp;gt;hooks.deallocate(p-&amp;gt;&lt;span&gt;buffer);
&lt;/span&gt;&lt;span&gt; 515&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 516&lt;/span&gt;     p-&amp;gt;length =&lt;span&gt; newsize;
&lt;/span&gt;&lt;span&gt; 517&lt;/span&gt;     p-&amp;gt;buffer =&lt;span&gt; newbuffer;
&lt;/span&gt;&lt;span&gt; 518&lt;/span&gt; 
&lt;span&gt; 519&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; newbuffer + p-&amp;gt;&lt;span&gt;offset;
&lt;/span&gt;&lt;span&gt; 520&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 521&lt;/span&gt; 
&lt;span&gt; 522&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; calculate the new length of the string in a printbuffer and update the offset &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 523&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; update_offset(printbuffer * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; buffer)
&lt;/span&gt;&lt;span&gt; 524&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt; 525&lt;/span&gt;     &lt;span&gt;const&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt; *buffer_pointer =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt; 526&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; ((buffer == NULL) || (buffer-&amp;gt;buffer ==&lt;span&gt; NULL))
&lt;/span&gt;&lt;span&gt; 527&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 528&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 529&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 530&lt;/span&gt;     buffer_pointer = buffer-&amp;gt;buffer + buffer-&amp;gt;&lt;span&gt;offset;
&lt;/span&gt;&lt;span&gt; 531&lt;/span&gt; 
&lt;span&gt; 532&lt;/span&gt;     buffer-&amp;gt;offset += strlen((&lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt;*&lt;span&gt;)buffer_pointer);
&lt;/span&gt;&lt;span&gt; 533&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 534&lt;/span&gt; 
&lt;span&gt; 535&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; securely comparison of floating-point variables &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 536&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; cJSON_bool compare_double(&lt;span&gt;double&lt;/span&gt; a, &lt;span&gt;double&lt;/span&gt;&lt;span&gt; b)
&lt;/span&gt;&lt;span&gt; 537&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt; 538&lt;/span&gt;     &lt;span&gt;double&lt;/span&gt; maxVal = fabs(a) &amp;gt; fabs(b) ?&lt;span&gt; fabs(a) : fabs(b);
&lt;/span&gt;&lt;span&gt; 539&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; (fabs(a - b) &amp;lt;= maxVal *&lt;span&gt; DBL_EPSILON);
&lt;/span&gt;&lt;span&gt; 540&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 541&lt;/span&gt; 
&lt;span&gt; 542&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Render the number nicely from the given item into a string. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 543&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; cJSON_bool print_number(&lt;span&gt;const&lt;/span&gt; cJSON * &lt;span&gt;const&lt;/span&gt; item, printbuffer * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; output_buffer)
&lt;/span&gt;&lt;span&gt; 544&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt; 545&lt;/span&gt;     unsigned &lt;span&gt;char&lt;/span&gt; *output_pointer =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt; 546&lt;/span&gt;     &lt;span&gt;double&lt;/span&gt; d = item-&amp;gt;&lt;span&gt;valuedouble;
&lt;/span&gt;&lt;span&gt; 547&lt;/span&gt;     &lt;span&gt;int&lt;/span&gt; length = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 548&lt;/span&gt;     size_t i = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 549&lt;/span&gt;     unsigned &lt;span&gt;char&lt;/span&gt; number_buffer[&lt;span&gt;26&lt;/span&gt;] = {&lt;span&gt;0&lt;/span&gt;}; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; temporary buffer to print the number into &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 550&lt;/span&gt;     unsigned &lt;span&gt;char&lt;/span&gt; decimal_point =&lt;span&gt; get_decimal_point();
&lt;/span&gt;&lt;span&gt; 551&lt;/span&gt;     &lt;span&gt;double&lt;/span&gt; test = &lt;span&gt;0.0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 552&lt;/span&gt; 
&lt;span&gt; 553&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (output_buffer ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt; 554&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 555&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 556&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 557&lt;/span&gt; 
&lt;span&gt; 558&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; This checks for NaN and Infinity &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 559&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (isnan(d) ||&lt;span&gt; isinf(d))
&lt;/span&gt;&lt;span&gt; 560&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 561&lt;/span&gt;         length = sprintf((&lt;span&gt;char&lt;/span&gt;*)number_buffer, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;null&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 562&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 563&lt;/span&gt;     &lt;span&gt;else&lt;/span&gt;
&lt;span&gt; 564&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 565&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Try 15 decimal places of precision to avoid nonsignificant nonzero digits &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 566&lt;/span&gt;         length = sprintf((&lt;span&gt;char&lt;/span&gt;*)number_buffer, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;%1.15g&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, d);
&lt;/span&gt;&lt;span&gt; 567&lt;/span&gt; 
&lt;span&gt; 568&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Check whether the original double can be recovered &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 569&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; ((sscanf((&lt;span&gt;char&lt;/span&gt;*)number_buffer, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;%lg&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &amp;amp;test) != &lt;span&gt;1&lt;/span&gt;) || !compare_double((&lt;span&gt;double&lt;/span&gt;&lt;span&gt;)test, d))
&lt;/span&gt;&lt;span&gt; 570&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 571&lt;/span&gt;             &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; If not, print with 17 decimal places of precision &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 572&lt;/span&gt;             length = sprintf((&lt;span&gt;char&lt;/span&gt;*)number_buffer, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;%1.17g&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, d);
&lt;/span&gt;&lt;span&gt; 573&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 574&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 575&lt;/span&gt; 
&lt;span&gt; 576&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; sprintf failed or buffer overrun occurred &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 577&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; ((length &amp;lt; &lt;span&gt;0&lt;/span&gt;) || (length &amp;gt; (&lt;span&gt;int&lt;/span&gt;)(&lt;span&gt;sizeof&lt;/span&gt;(number_buffer) - &lt;span&gt;1&lt;/span&gt;&lt;span&gt;)))
&lt;/span&gt;&lt;span&gt; 578&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 579&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 580&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 581&lt;/span&gt; 
&lt;span&gt; 582&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; reserve appropriate space in the output &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 583&lt;/span&gt;     output_pointer = ensure(output_buffer, (size_t)length + &lt;span&gt;sizeof&lt;/span&gt;(&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;));
&lt;/span&gt;&lt;span&gt; 584&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (output_pointer ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt; 585&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 586&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 587&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 588&lt;/span&gt; 
&lt;span&gt; 589&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; copy the printed number to the output and replace locale
&lt;/span&gt;&lt;span&gt; 590&lt;/span&gt; &lt;span&gt;     * dependent decimal point with '.' &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 591&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; (i = &lt;span&gt;0&lt;/span&gt;; i &amp;lt; ((size_t)length); i++&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 592&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 593&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (number_buffer[i] ==&lt;span&gt; decimal_point)
&lt;/span&gt;&lt;span&gt; 594&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 595&lt;/span&gt;             output_pointer[i] = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 596&lt;/span&gt;             &lt;span&gt;continue&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 597&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 598&lt;/span&gt; 
&lt;span&gt; 599&lt;/span&gt;         output_pointer[i] =&lt;span&gt; number_buffer[i];
&lt;/span&gt;&lt;span&gt; 600&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 601&lt;/span&gt;     output_pointer[i] = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\0&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 602&lt;/span&gt; 
&lt;span&gt; 603&lt;/span&gt;     output_buffer-&amp;gt;offset +=&lt;span&gt; (size_t)length;
&lt;/span&gt;&lt;span&gt; 604&lt;/span&gt; 
&lt;span&gt; 605&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 606&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 607&lt;/span&gt; 
&lt;span&gt; 608&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; parse 4 digit hexadecimal number &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 609&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; unsigned parse_hex4(&lt;span&gt;const&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt; * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; input)
&lt;/span&gt;&lt;span&gt; 610&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt; 611&lt;/span&gt;     unsigned &lt;span&gt;int&lt;/span&gt; h = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 612&lt;/span&gt;     size_t i = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 613&lt;/span&gt; 
&lt;span&gt; 614&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; (i = &lt;span&gt;0&lt;/span&gt;; i &amp;lt; &lt;span&gt;4&lt;/span&gt;; i++&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 615&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 616&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; parse digit &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 617&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; ((input[i] &amp;gt;= &lt;span&gt;'&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;) &amp;amp;&amp;amp; (input[i] &amp;lt;= &lt;span&gt;'&lt;/span&gt;&lt;span&gt;9&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt; 618&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 619&lt;/span&gt;             h += (unsigned &lt;span&gt;int&lt;/span&gt;) input[i] - &lt;span&gt;'&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 620&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 621&lt;/span&gt;         &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; ((input[i] &amp;gt;= &lt;span&gt;'&lt;/span&gt;&lt;span&gt;A&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;) &amp;amp;&amp;amp; (input[i] &amp;lt;= &lt;span&gt;'&lt;/span&gt;&lt;span&gt;F&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt; 622&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 623&lt;/span&gt;             h += (unsigned &lt;span&gt;int&lt;/span&gt;) &lt;span&gt;10&lt;/span&gt; + input[i] - &lt;span&gt;'&lt;/span&gt;&lt;span&gt;A&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 624&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 625&lt;/span&gt;         &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; ((input[i] &amp;gt;= &lt;span&gt;'&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;) &amp;amp;&amp;amp; (input[i] &amp;lt;= &lt;span&gt;'&lt;/span&gt;&lt;span&gt;f&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt; 626&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 627&lt;/span&gt;             h += (unsigned &lt;span&gt;int&lt;/span&gt;) &lt;span&gt;10&lt;/span&gt; + input[i] - &lt;span&gt;'&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 628&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 629&lt;/span&gt;         &lt;span&gt;else&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; invalid &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 630&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 631&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt; &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 632&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 633&lt;/span&gt; 
&lt;span&gt; 634&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (i &amp;lt; &lt;span&gt;3&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 635&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 636&lt;/span&gt;             &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; shift left to make place for the next nibble &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 637&lt;/span&gt;             h = h &amp;lt;&amp;lt; &lt;span&gt;4&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 638&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 639&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 640&lt;/span&gt; 
&lt;span&gt; 641&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; h;
&lt;/span&gt;&lt;span&gt; 642&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 643&lt;/span&gt; 
&lt;span&gt; 644&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; converts a UTF-16 literal to UTF-8
&lt;/span&gt;&lt;span&gt; 645&lt;/span&gt; &lt;span&gt; * A literal can be one or two sequences of the form \uXXXX &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 646&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt; utf16_literal_to_utf8(&lt;span&gt;const&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt; * &lt;span&gt;const&lt;/span&gt; input_pointer, &lt;span&gt;const&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt; * &lt;span&gt;const&lt;/span&gt; input_end, unsigned &lt;span&gt;char&lt;/span&gt; **&lt;span&gt;output_pointer)
&lt;/span&gt;&lt;span&gt; 647&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt; 648&lt;/span&gt;     &lt;span&gt;long&lt;/span&gt; unsigned &lt;span&gt;int&lt;/span&gt; codepoint = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 649&lt;/span&gt;     unsigned &lt;span&gt;int&lt;/span&gt; first_code = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 650&lt;/span&gt;     &lt;span&gt;const&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt; *first_sequence =&lt;span&gt; input_pointer;
&lt;/span&gt;&lt;span&gt; 651&lt;/span&gt;     unsigned &lt;span&gt;char&lt;/span&gt; utf8_length = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 652&lt;/span&gt;     unsigned &lt;span&gt;char&lt;/span&gt; utf8_position = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 653&lt;/span&gt;     unsigned &lt;span&gt;char&lt;/span&gt; sequence_length = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 654&lt;/span&gt;     unsigned &lt;span&gt;char&lt;/span&gt; first_byte_mark = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 655&lt;/span&gt; 
&lt;span&gt; 656&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; ((input_end - first_sequence) &amp;lt; &lt;span&gt;6&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 657&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 658&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; input ends unexpectedly &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 659&lt;/span&gt;         &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; fail;
&lt;/span&gt;&lt;span&gt; 660&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 661&lt;/span&gt; 
&lt;span&gt; 662&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; get the first utf16 sequence &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 663&lt;/span&gt;     first_code = parse_hex4(first_sequence + &lt;span&gt;2&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 664&lt;/span&gt; 
&lt;span&gt; 665&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; check that the code is valid &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 666&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (((first_code &amp;gt;= &lt;span&gt;0xDC00&lt;/span&gt;) &amp;amp;&amp;amp; (first_code &amp;lt;= &lt;span&gt;0xDFFF&lt;/span&gt;&lt;span&gt;)))
&lt;/span&gt;&lt;span&gt; 667&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 668&lt;/span&gt;         &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; fail;
&lt;/span&gt;&lt;span&gt; 669&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 670&lt;/span&gt; 
&lt;span&gt; 671&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; UTF16 surrogate pair &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 672&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; ((first_code &amp;gt;= &lt;span&gt;0xD800&lt;/span&gt;) &amp;amp;&amp;amp; (first_code &amp;lt;= &lt;span&gt;0xDBFF&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt; 673&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 674&lt;/span&gt;         &lt;span&gt;const&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt; *second_sequence = first_sequence + &lt;span&gt;6&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 675&lt;/span&gt;         unsigned &lt;span&gt;int&lt;/span&gt; second_code = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 676&lt;/span&gt;         sequence_length = &lt;span&gt;12&lt;/span&gt;; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; \uXXXX\uXXXX &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 677&lt;/span&gt; 
&lt;span&gt; 678&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; ((input_end - second_sequence) &amp;lt; &lt;span&gt;6&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 679&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 680&lt;/span&gt;             &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; input ends unexpectedly &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 681&lt;/span&gt;             &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; fail;
&lt;/span&gt;&lt;span&gt; 682&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 683&lt;/span&gt; 
&lt;span&gt; 684&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; ((second_sequence[&lt;span&gt;0&lt;/span&gt;] != &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\\&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;) || (second_sequence[&lt;span&gt;1&lt;/span&gt;] != &lt;span&gt;'&lt;/span&gt;&lt;span&gt;u&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt; 685&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 686&lt;/span&gt;             &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; missing second half of the surrogate pair &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 687&lt;/span&gt;             &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; fail;
&lt;/span&gt;&lt;span&gt; 688&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 689&lt;/span&gt; 
&lt;span&gt; 690&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; get the second utf16 sequence &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 691&lt;/span&gt;         second_code = parse_hex4(second_sequence + &lt;span&gt;2&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 692&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; check that the code is valid &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 693&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; ((second_code &amp;lt; &lt;span&gt;0xDC00&lt;/span&gt;) || (second_code &amp;gt; &lt;span&gt;0xDFFF&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt; 694&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 695&lt;/span&gt;             &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; invalid second half of the surrogate pair &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 696&lt;/span&gt;             &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; fail;
&lt;/span&gt;&lt;span&gt; 697&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 698&lt;/span&gt; 
&lt;span&gt; 699&lt;/span&gt; 
&lt;span&gt; 700&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; calculate the unicode codepoint from the surrogate pair &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 701&lt;/span&gt;         codepoint = &lt;span&gt;0x10000&lt;/span&gt; + (((first_code &amp;amp; &lt;span&gt;0x3FF&lt;/span&gt;) &amp;lt;&amp;lt; &lt;span&gt;10&lt;/span&gt;) | (second_code &amp;amp; &lt;span&gt;0x3FF&lt;/span&gt;&lt;span&gt;));
&lt;/span&gt;&lt;span&gt; 702&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 703&lt;/span&gt;     &lt;span&gt;else&lt;/span&gt;
&lt;span&gt; 704&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 705&lt;/span&gt;         sequence_length = &lt;span&gt;6&lt;/span&gt;; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; \uXXXX &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 706&lt;/span&gt;         codepoint =&lt;span&gt; first_code;
&lt;/span&gt;&lt;span&gt; 707&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 708&lt;/span&gt; 
&lt;span&gt; 709&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; encode as UTF-8
&lt;/span&gt;&lt;span&gt; 710&lt;/span&gt; &lt;span&gt;     * takes at maximum 4 bytes to encode:
&lt;/span&gt;&lt;span&gt; 711&lt;/span&gt; &lt;span&gt;     * 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 712&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (codepoint &amp;lt; &lt;span&gt;0x80&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 713&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 714&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; normal ascii, encoding 0xxxxxxx &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 715&lt;/span&gt;         utf8_length = &lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 716&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 717&lt;/span&gt;     &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (codepoint &amp;lt; &lt;span&gt;0x800&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 718&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 719&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; two bytes, encoding 110xxxxx 10xxxxxx &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 720&lt;/span&gt;         utf8_length = &lt;span&gt;2&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 721&lt;/span&gt;         first_byte_mark = &lt;span&gt;0xC0&lt;/span&gt;; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; 11000000 &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 722&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 723&lt;/span&gt;     &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (codepoint &amp;lt; &lt;span&gt;0x10000&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 724&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 725&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; three bytes, encoding 1110xxxx 10xxxxxx 10xxxxxx &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 726&lt;/span&gt;         utf8_length = &lt;span&gt;3&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 727&lt;/span&gt;         first_byte_mark = &lt;span&gt;0xE0&lt;/span&gt;; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; 11100000 &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 728&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 729&lt;/span&gt;     &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (codepoint &amp;lt;= &lt;span&gt;0x10FFFF&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 730&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 731&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; four bytes, encoding 1110xxxx 10xxxxxx 10xxxxxx 10xxxxxx &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 732&lt;/span&gt;         utf8_length = &lt;span&gt;4&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 733&lt;/span&gt;         first_byte_mark = &lt;span&gt;0xF0&lt;/span&gt;; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; 11110000 &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 734&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 735&lt;/span&gt;     &lt;span&gt;else&lt;/span&gt;
&lt;span&gt; 736&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 737&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; invalid unicode codepoint &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 738&lt;/span&gt;         &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; fail;
&lt;/span&gt;&lt;span&gt; 739&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 740&lt;/span&gt; 
&lt;span&gt; 741&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; encode as utf8 &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 742&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; (utf8_position = (unsigned &lt;span&gt;char&lt;/span&gt;)(utf8_length - &lt;span&gt;1&lt;/span&gt;); utf8_position &amp;gt; &lt;span&gt;0&lt;/span&gt;; utf8_position--&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 743&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 744&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; 10xxxxxx &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 745&lt;/span&gt;         (*output_pointer)[utf8_position] = (unsigned &lt;span&gt;char&lt;/span&gt;)((codepoint | &lt;span&gt;0x80&lt;/span&gt;) &amp;amp; &lt;span&gt;0xBF&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 746&lt;/span&gt;         codepoint &amp;gt;&amp;gt;= &lt;span&gt;6&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 747&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 748&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; encode first byte &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 749&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (utf8_length &amp;gt; &lt;span&gt;1&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 750&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 751&lt;/span&gt;         (*output_pointer)[&lt;span&gt;0&lt;/span&gt;] = (unsigned &lt;span&gt;char&lt;/span&gt;)((codepoint | first_byte_mark) &amp;amp; &lt;span&gt;0xFF&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 752&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 753&lt;/span&gt;     &lt;span&gt;else&lt;/span&gt;
&lt;span&gt; 754&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 755&lt;/span&gt;         (*output_pointer)[&lt;span&gt;0&lt;/span&gt;] = (unsigned &lt;span&gt;char&lt;/span&gt;)(codepoint &amp;amp; &lt;span&gt;0x7F&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 756&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 757&lt;/span&gt; 
&lt;span&gt; 758&lt;/span&gt;     *output_pointer +=&lt;span&gt; utf8_length;
&lt;/span&gt;&lt;span&gt; 759&lt;/span&gt; 
&lt;span&gt; 760&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; sequence_length;
&lt;/span&gt;&lt;span&gt; 761&lt;/span&gt; 
&lt;span&gt; 762&lt;/span&gt; &lt;span&gt;fail:
&lt;/span&gt;&lt;span&gt; 763&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 764&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 765&lt;/span&gt; 
&lt;span&gt; 766&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Parse the input text into an unescaped cinput, and populate item. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 767&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; cJSON_bool parse_string(cJSON * &lt;span&gt;const&lt;/span&gt; item, parse_buffer * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; input_buffer)
&lt;/span&gt;&lt;span&gt; 768&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt; 769&lt;/span&gt;     &lt;span&gt;const&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt; *input_pointer = buffer_at_offset(input_buffer) + &lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 770&lt;/span&gt;     &lt;span&gt;const&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt; *input_end = buffer_at_offset(input_buffer) + &lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 771&lt;/span&gt;     unsigned &lt;span&gt;char&lt;/span&gt; *output_pointer =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt; 772&lt;/span&gt;     unsigned &lt;span&gt;char&lt;/span&gt; *output =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt; 773&lt;/span&gt; 
&lt;span&gt; 774&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; not a string &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 775&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (buffer_at_offset(input_buffer)[&lt;span&gt;0&lt;/span&gt;] != &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 776&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 777&lt;/span&gt;         &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; fail;
&lt;/span&gt;&lt;span&gt; 778&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 779&lt;/span&gt; 
&lt;span&gt; 780&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 781&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; calculate approximate size of the output (overestimate) &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 782&lt;/span&gt;         size_t allocation_length = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 783&lt;/span&gt;         size_t skipped_bytes = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 784&lt;/span&gt;         &lt;span&gt;while&lt;/span&gt; (((size_t)(input_end - input_buffer-&amp;gt;content) &amp;lt; input_buffer-&amp;gt;length) &amp;amp;&amp;amp; (*input_end != &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt; 785&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 786&lt;/span&gt;             &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; is escape sequence &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 787&lt;/span&gt;             &lt;span&gt;if&lt;/span&gt; (input_end[&lt;span&gt;0&lt;/span&gt;] == &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\\&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 788&lt;/span&gt; &lt;span&gt;            {
&lt;/span&gt;&lt;span&gt; 789&lt;/span&gt;                 &lt;span&gt;if&lt;/span&gt; ((size_t)(input_end + &lt;span&gt;1&lt;/span&gt; - input_buffer-&amp;gt;content) &amp;gt;= input_buffer-&amp;gt;&lt;span&gt;length)
&lt;/span&gt;&lt;span&gt; 790&lt;/span&gt; &lt;span&gt;                {
&lt;/span&gt;&lt;span&gt; 791&lt;/span&gt;                     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; prevent buffer overflow when last input character is a backslash &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 792&lt;/span&gt;                     &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; fail;
&lt;/span&gt;&lt;span&gt; 793&lt;/span&gt; &lt;span&gt;                }
&lt;/span&gt;&lt;span&gt; 794&lt;/span&gt;                 skipped_bytes++&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 795&lt;/span&gt;                 input_end++&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 796&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt; 797&lt;/span&gt;             input_end++&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 798&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 799&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (((size_t)(input_end - input_buffer-&amp;gt;content) &amp;gt;= input_buffer-&amp;gt;length) || (*input_end != &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt; 800&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 801&lt;/span&gt;             &lt;span&gt;goto&lt;/span&gt; fail; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; string ended unexpectedly &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 802&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 803&lt;/span&gt; 
&lt;span&gt; 804&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; This is at most how much we need for the output &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 805&lt;/span&gt;         allocation_length = (size_t) (input_end - buffer_at_offset(input_buffer)) -&lt;span&gt; skipped_bytes;
&lt;/span&gt;&lt;span&gt; 806&lt;/span&gt;         output = (unsigned &lt;span&gt;char&lt;/span&gt;*)input_buffer-&amp;gt;hooks.allocate(allocation_length + &lt;span&gt;sizeof&lt;/span&gt;(&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;));
&lt;/span&gt;&lt;span&gt; 807&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (output ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt; 808&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 809&lt;/span&gt;             &lt;span&gt;goto&lt;/span&gt; fail; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; allocation failure &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 810&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 811&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 812&lt;/span&gt; 
&lt;span&gt; 813&lt;/span&gt;     output_pointer =&lt;span&gt; output;
&lt;/span&gt;&lt;span&gt; 814&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; loop through the string literal &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 815&lt;/span&gt;     &lt;span&gt;while&lt;/span&gt; (input_pointer &amp;lt;&lt;span&gt; input_end)
&lt;/span&gt;&lt;span&gt; 816&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 817&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (*input_pointer != &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\\&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 818&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 819&lt;/span&gt;             *output_pointer++ = *input_pointer++&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 820&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 821&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; escape sequence &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 822&lt;/span&gt;         &lt;span&gt;else&lt;/span&gt;
&lt;span&gt; 823&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 824&lt;/span&gt;             unsigned &lt;span&gt;char&lt;/span&gt; sequence_length = &lt;span&gt;2&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 825&lt;/span&gt;             &lt;span&gt;if&lt;/span&gt; ((input_end - input_pointer) &amp;lt; &lt;span&gt;1&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 826&lt;/span&gt; &lt;span&gt;            {
&lt;/span&gt;&lt;span&gt; 827&lt;/span&gt;                 &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; fail;
&lt;/span&gt;&lt;span&gt; 828&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt; 829&lt;/span&gt; 
&lt;span&gt; 830&lt;/span&gt;             &lt;span&gt;switch&lt;/span&gt; (input_pointer[&lt;span&gt;1&lt;/span&gt;&lt;span&gt;])
&lt;/span&gt;&lt;span&gt; 831&lt;/span&gt; &lt;span&gt;            {
&lt;/span&gt;&lt;span&gt; 832&lt;/span&gt;                 &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;b&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 833&lt;/span&gt;                     *output_pointer++ = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\b&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 834&lt;/span&gt;                     &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 835&lt;/span&gt;                 &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;f&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 836&lt;/span&gt;                     *output_pointer++ = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\f&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 837&lt;/span&gt;                     &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 838&lt;/span&gt;                 &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;n&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 839&lt;/span&gt;                     *output_pointer++ = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 840&lt;/span&gt;                     &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 841&lt;/span&gt;                 &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;r&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 842&lt;/span&gt;                     *output_pointer++ = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\r&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 843&lt;/span&gt;                     &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 844&lt;/span&gt;                 &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;t&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 845&lt;/span&gt;                     *output_pointer++ = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\t&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 846&lt;/span&gt;                     &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 847&lt;/span&gt;                 &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 848&lt;/span&gt;                 &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\\&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 849&lt;/span&gt;                 &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 850&lt;/span&gt;                     *output_pointer++ = input_pointer[&lt;span&gt;1&lt;/span&gt;&lt;span&gt;];
&lt;/span&gt;&lt;span&gt; 851&lt;/span&gt;                     &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 852&lt;/span&gt; 
&lt;span&gt; 853&lt;/span&gt;                 &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; UTF-16 literal &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 854&lt;/span&gt;                 &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;u&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 855&lt;/span&gt;                     sequence_length = utf16_literal_to_utf8(input_pointer, input_end, &amp;amp;&lt;span&gt;output_pointer);
&lt;/span&gt;&lt;span&gt; 856&lt;/span&gt;                     &lt;span&gt;if&lt;/span&gt; (sequence_length == &lt;span&gt;0&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 857&lt;/span&gt; &lt;span&gt;                    {
&lt;/span&gt;&lt;span&gt; 858&lt;/span&gt;                         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; failed to convert UTF16-literal to UTF-8 &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 859&lt;/span&gt;                         &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; fail;
&lt;/span&gt;&lt;span&gt; 860&lt;/span&gt; &lt;span&gt;                    }
&lt;/span&gt;&lt;span&gt; 861&lt;/span&gt;                     &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 862&lt;/span&gt; 
&lt;span&gt; 863&lt;/span&gt;                 &lt;span&gt;default&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 864&lt;/span&gt;                     &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; fail;
&lt;/span&gt;&lt;span&gt; 865&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt; 866&lt;/span&gt;             input_pointer +=&lt;span&gt; sequence_length;
&lt;/span&gt;&lt;span&gt; 867&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 868&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 869&lt;/span&gt; 
&lt;span&gt; 870&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; zero terminate the output &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 871&lt;/span&gt;     *output_pointer = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\0&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 872&lt;/span&gt; 
&lt;span&gt; 873&lt;/span&gt;     item-&amp;gt;type =&lt;span&gt; cJSON_String;
&lt;/span&gt;&lt;span&gt; 874&lt;/span&gt;     item-&amp;gt;valuestring = (&lt;span&gt;char&lt;/span&gt;*&lt;span&gt;)output;
&lt;/span&gt;&lt;span&gt; 875&lt;/span&gt; 
&lt;span&gt; 876&lt;/span&gt;     input_buffer-&amp;gt;offset = (size_t) (input_end - input_buffer-&amp;gt;&lt;span&gt;content);
&lt;/span&gt;&lt;span&gt; 877&lt;/span&gt;     input_buffer-&amp;gt;offset++&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 878&lt;/span&gt; 
&lt;span&gt; 879&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 880&lt;/span&gt; 
&lt;span&gt; 881&lt;/span&gt; &lt;span&gt;fail:
&lt;/span&gt;&lt;span&gt; 882&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (output !=&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt; 883&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 884&lt;/span&gt;         input_buffer-&amp;gt;&lt;span&gt;hooks.deallocate(output);
&lt;/span&gt;&lt;span&gt; 885&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 886&lt;/span&gt; 
&lt;span&gt; 887&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (input_pointer !=&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt; 888&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 889&lt;/span&gt;         input_buffer-&amp;gt;offset = (size_t)(input_pointer - input_buffer-&amp;gt;&lt;span&gt;content);
&lt;/span&gt;&lt;span&gt; 890&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 891&lt;/span&gt; 
&lt;span&gt; 892&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 893&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 894&lt;/span&gt; 
&lt;span&gt; 895&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Render the cstring provided to an escaped version that can be printed. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 896&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; cJSON_bool print_string_ptr(&lt;span&gt;const&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt; * &lt;span&gt;const&lt;/span&gt; input, printbuffer * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; output_buffer)
&lt;/span&gt;&lt;span&gt; 897&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt; 898&lt;/span&gt;     &lt;span&gt;const&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt; *input_pointer =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt; 899&lt;/span&gt;     unsigned &lt;span&gt;char&lt;/span&gt; *output =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt; 900&lt;/span&gt;     unsigned &lt;span&gt;char&lt;/span&gt; *output_pointer =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt; 901&lt;/span&gt;     size_t output_length = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 902&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; numbers of additional characters needed for escaping &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 903&lt;/span&gt;     size_t escape_characters = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 904&lt;/span&gt; 
&lt;span&gt; 905&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (output_buffer ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt; 906&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 907&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 908&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 909&lt;/span&gt; 
&lt;span&gt; 910&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; empty string &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 911&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (input ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt; 912&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 913&lt;/span&gt;         output = ensure(output_buffer, &lt;span&gt;sizeof&lt;/span&gt;(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\&quot;\&quot;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;));
&lt;/span&gt;&lt;span&gt; 914&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (output ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt; 915&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 916&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 917&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 918&lt;/span&gt;         strcpy((&lt;span&gt;char&lt;/span&gt;*)output, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\&quot;\&quot;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 919&lt;/span&gt; 
&lt;span&gt; 920&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 921&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 922&lt;/span&gt; 
&lt;span&gt; 923&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; set &quot;flag&quot; to 1 if something needs to be escaped &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 924&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; (input_pointer = input; *input_pointer; input_pointer++&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 925&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 926&lt;/span&gt;         &lt;span&gt;switch&lt;/span&gt; (*&lt;span&gt;input_pointer)
&lt;/span&gt;&lt;span&gt; 927&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 928&lt;/span&gt;             &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 929&lt;/span&gt;             &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\\&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 930&lt;/span&gt;             &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\b&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 931&lt;/span&gt;             &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\f&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 932&lt;/span&gt;             &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 933&lt;/span&gt;             &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\r&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 934&lt;/span&gt;             &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\t&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 935&lt;/span&gt;                 &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; one character escape sequence &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 936&lt;/span&gt;                 escape_characters++&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 937&lt;/span&gt;                 &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 938&lt;/span&gt;             &lt;span&gt;default&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 939&lt;/span&gt;                 &lt;span&gt;if&lt;/span&gt; (*input_pointer &amp;lt; &lt;span&gt;32&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 940&lt;/span&gt; &lt;span&gt;                {
&lt;/span&gt;&lt;span&gt; 941&lt;/span&gt;                     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; UTF-16 escape sequence uXXXX &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 942&lt;/span&gt;                     escape_characters += &lt;span&gt;5&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 943&lt;/span&gt; &lt;span&gt;                }
&lt;/span&gt;&lt;span&gt; 944&lt;/span&gt;                 &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 945&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 946&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 947&lt;/span&gt;     output_length = (size_t)(input_pointer - input) +&lt;span&gt; escape_characters;
&lt;/span&gt;&lt;span&gt; 948&lt;/span&gt; 
&lt;span&gt; 949&lt;/span&gt;     output = ensure(output_buffer, output_length + &lt;span&gt;sizeof&lt;/span&gt;(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\&quot;\&quot;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;));
&lt;/span&gt;&lt;span&gt; 950&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (output ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt; 951&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 952&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 953&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 954&lt;/span&gt; 
&lt;span&gt; 955&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; no characters have to be escaped &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 956&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (escape_characters == &lt;span&gt;0&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 957&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 958&lt;/span&gt;         output[&lt;span&gt;0&lt;/span&gt;] = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 959&lt;/span&gt;         memcpy(output + &lt;span&gt;1&lt;/span&gt;&lt;span&gt;, input, output_length);
&lt;/span&gt;&lt;span&gt; 960&lt;/span&gt;         output[output_length + &lt;span&gt;1&lt;/span&gt;] = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 961&lt;/span&gt;         output[output_length + &lt;span&gt;2&lt;/span&gt;] = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\0&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 962&lt;/span&gt; 
&lt;span&gt; 963&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 964&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 965&lt;/span&gt; 
&lt;span&gt; 966&lt;/span&gt;     output[&lt;span&gt;0&lt;/span&gt;] = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 967&lt;/span&gt;     output_pointer = output + &lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 968&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; copy the string &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 969&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; (input_pointer = input; *input_pointer != &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\0&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;; (&lt;span&gt;void&lt;/span&gt;)input_pointer++, output_pointer++&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 970&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 971&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; ((*input_pointer &amp;gt; &lt;span&gt;31&lt;/span&gt;) &amp;amp;&amp;amp; (*input_pointer != &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;) &amp;amp;&amp;amp; (*input_pointer != &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\\&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt; 972&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 973&lt;/span&gt;             &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; normal character, copy &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 974&lt;/span&gt;             *output_pointer = *&lt;span&gt;input_pointer;
&lt;/span&gt;&lt;span&gt; 975&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 976&lt;/span&gt;         &lt;span&gt;else&lt;/span&gt;
&lt;span&gt; 977&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 978&lt;/span&gt;             &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; character needs to be escaped &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 979&lt;/span&gt;             *output_pointer++ = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\\&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 980&lt;/span&gt;             &lt;span&gt;switch&lt;/span&gt; (*&lt;span&gt;input_pointer)
&lt;/span&gt;&lt;span&gt; 981&lt;/span&gt; &lt;span&gt;            {
&lt;/span&gt;&lt;span&gt; 982&lt;/span&gt;                 &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\\&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 983&lt;/span&gt;                     *output_pointer = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\\&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 984&lt;/span&gt;                     &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 985&lt;/span&gt;                 &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 986&lt;/span&gt;                     *output_pointer = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 987&lt;/span&gt;                     &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 988&lt;/span&gt;                 &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\b&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 989&lt;/span&gt;                     *output_pointer = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;b&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 990&lt;/span&gt;                     &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 991&lt;/span&gt;                 &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\f&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 992&lt;/span&gt;                     *output_pointer = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;f&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 993&lt;/span&gt;                     &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 994&lt;/span&gt;                 &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 995&lt;/span&gt;                     *output_pointer = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;n&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 996&lt;/span&gt;                     &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 997&lt;/span&gt;                 &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\r&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt; 998&lt;/span&gt;                     *output_pointer = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;r&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 999&lt;/span&gt;                     &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1000&lt;/span&gt;                 &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\t&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt;1001&lt;/span&gt;                     *output_pointer = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;t&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1002&lt;/span&gt;                     &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1003&lt;/span&gt;                 &lt;span&gt;default&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt;1004&lt;/span&gt;                     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; escape and print as unicode codepoint &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1005&lt;/span&gt;                     sprintf((&lt;span&gt;char&lt;/span&gt;*)output_pointer, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;u%04x&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, *&lt;span&gt;input_pointer);
&lt;/span&gt;&lt;span&gt;1006&lt;/span&gt;                     output_pointer += &lt;span&gt;4&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1007&lt;/span&gt;                     &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1008&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;1009&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1010&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1011&lt;/span&gt;     output[output_length + &lt;span&gt;1&lt;/span&gt;] = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1012&lt;/span&gt;     output[output_length + &lt;span&gt;2&lt;/span&gt;] = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\0&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1013&lt;/span&gt; 
&lt;span&gt;1014&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1015&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1016&lt;/span&gt; 
&lt;span&gt;1017&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Invoke print_string_ptr (which is useful) on an item. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1018&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; cJSON_bool print_string(&lt;span&gt;const&lt;/span&gt; cJSON * &lt;span&gt;const&lt;/span&gt; item, printbuffer * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; p)
&lt;/span&gt;&lt;span&gt;1019&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1020&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; print_string_ptr((unsigned &lt;span&gt;char&lt;/span&gt;*)item-&amp;gt;&lt;span&gt;valuestring, p);
&lt;/span&gt;&lt;span&gt;1021&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1022&lt;/span&gt; 
&lt;span&gt;1023&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Predeclare these prototypes. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1024&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; cJSON_bool parse_value(cJSON * &lt;span&gt;const&lt;/span&gt; item, parse_buffer * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; input_buffer);
&lt;/span&gt;&lt;span&gt;1025&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; cJSON_bool print_value(&lt;span&gt;const&lt;/span&gt; cJSON * &lt;span&gt;const&lt;/span&gt; item, printbuffer * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; output_buffer);
&lt;/span&gt;&lt;span&gt;1026&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; cJSON_bool parse_array(cJSON * &lt;span&gt;const&lt;/span&gt; item, parse_buffer * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; input_buffer);
&lt;/span&gt;&lt;span&gt;1027&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; cJSON_bool print_array(&lt;span&gt;const&lt;/span&gt; cJSON * &lt;span&gt;const&lt;/span&gt; item, printbuffer * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; output_buffer);
&lt;/span&gt;&lt;span&gt;1028&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; cJSON_bool parse_object(cJSON * &lt;span&gt;const&lt;/span&gt; item, parse_buffer * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; input_buffer);
&lt;/span&gt;&lt;span&gt;1029&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; cJSON_bool print_object(&lt;span&gt;const&lt;/span&gt; cJSON * &lt;span&gt;const&lt;/span&gt; item, printbuffer * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; output_buffer);
&lt;/span&gt;&lt;span&gt;1030&lt;/span&gt; 
&lt;span&gt;1031&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Utility to jump whitespace and cr/lf &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1032&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; parse_buffer *buffer_skip_whitespace(parse_buffer * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; buffer)
&lt;/span&gt;&lt;span&gt;1033&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1034&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; ((buffer == NULL) || (buffer-&amp;gt;content ==&lt;span&gt; NULL))
&lt;/span&gt;&lt;span&gt;1035&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1036&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1037&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1038&lt;/span&gt; 
&lt;span&gt;1039&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (cannot_access_at_index(buffer, &lt;span&gt;0&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;1040&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1041&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; buffer;
&lt;/span&gt;&lt;span&gt;1042&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1043&lt;/span&gt; 
&lt;span&gt;1044&lt;/span&gt;     &lt;span&gt;while&lt;/span&gt; (can_access_at_index(buffer, &lt;span&gt;0&lt;/span&gt;) &amp;amp;&amp;amp; (buffer_at_offset(buffer)[&lt;span&gt;0&lt;/span&gt;] &amp;lt;= &lt;span&gt;32&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;1045&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1046&lt;/span&gt;        buffer-&amp;gt;offset++&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1047&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1048&lt;/span&gt; 
&lt;span&gt;1049&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (buffer-&amp;gt;offset == buffer-&amp;gt;&lt;span&gt;length)
&lt;/span&gt;&lt;span&gt;1050&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1051&lt;/span&gt;         buffer-&amp;gt;offset--&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1052&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1053&lt;/span&gt; 
&lt;span&gt;1054&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; buffer;
&lt;/span&gt;&lt;span&gt;1055&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1056&lt;/span&gt; 
&lt;span&gt;1057&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; skip the UTF-8 BOM (byte order mark) if it is at the beginning of a buffer &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1058&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; parse_buffer *skip_utf8_bom(parse_buffer * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; buffer)
&lt;/span&gt;&lt;span&gt;1059&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1060&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; ((buffer == NULL) || (buffer-&amp;gt;content == NULL) || (buffer-&amp;gt;offset != &lt;span&gt;0&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;1061&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1062&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1063&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1064&lt;/span&gt; 
&lt;span&gt;1065&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (can_access_at_index(buffer, &lt;span&gt;4&lt;/span&gt;) &amp;amp;&amp;amp; (strncmp((&lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt;*)buffer_at_offset(buffer), &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\xEF\xBB\xBF&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;3&lt;/span&gt;) == &lt;span&gt;0&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;1066&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1067&lt;/span&gt;         buffer-&amp;gt;offset += &lt;span&gt;3&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1068&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1069&lt;/span&gt; 
&lt;span&gt;1070&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; buffer;
&lt;/span&gt;&lt;span&gt;1071&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1072&lt;/span&gt; 
&lt;span&gt;1073&lt;/span&gt; CJSON_PUBLIC(cJSON *) cJSON_ParseWithOpts(&lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; *value, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; **&lt;span&gt;return_parse_end, cJSON_bool require_null_terminated)
&lt;/span&gt;&lt;span&gt;1074&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1075&lt;/span&gt; &lt;span&gt;    size_t buffer_length;
&lt;/span&gt;&lt;span&gt;1076&lt;/span&gt; 
&lt;span&gt;1077&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (NULL ==&lt;span&gt; value)
&lt;/span&gt;&lt;span&gt;1078&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1079&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1080&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1081&lt;/span&gt; 
&lt;span&gt;1082&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Adding null character size due to require_null_terminated. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1083&lt;/span&gt;     buffer_length = strlen(value) + &lt;span&gt;sizeof&lt;/span&gt;(&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;1084&lt;/span&gt; 
&lt;span&gt;1085&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; cJSON_ParseWithLengthOpts(value, buffer_length, return_parse_end, require_null_terminated);
&lt;/span&gt;&lt;span&gt;1086&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1087&lt;/span&gt; 
&lt;span&gt;1088&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Parse an object - create a new root, and populate. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1089&lt;/span&gt; CJSON_PUBLIC(cJSON *) cJSON_ParseWithLengthOpts(&lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; *value, size_t buffer_length, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; **&lt;span&gt;return_parse_end, cJSON_bool require_null_terminated)
&lt;/span&gt;&lt;span&gt;1090&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1091&lt;/span&gt;     parse_buffer buffer = { &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;, { &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;&lt;span&gt; } };
&lt;/span&gt;&lt;span&gt;1092&lt;/span&gt;     cJSON *item =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1093&lt;/span&gt; 
&lt;span&gt;1094&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; reset error position &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1095&lt;/span&gt;     global_error.json =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1096&lt;/span&gt;     global_error.position = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1097&lt;/span&gt; 
&lt;span&gt;1098&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (value == NULL || &lt;span&gt;0&lt;/span&gt; ==&lt;span&gt; buffer_length)
&lt;/span&gt;&lt;span&gt;1099&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1100&lt;/span&gt;         &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; fail;
&lt;/span&gt;&lt;span&gt;1101&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1102&lt;/span&gt; 
&lt;span&gt;1103&lt;/span&gt;     buffer.content = (&lt;span&gt;const&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt;*&lt;span&gt;)value;
&lt;/span&gt;&lt;span&gt;1104&lt;/span&gt;     buffer.length =&lt;span&gt; buffer_length; 
&lt;/span&gt;&lt;span&gt;1105&lt;/span&gt;     buffer.offset = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1106&lt;/span&gt;     buffer.hooks =&lt;span&gt; global_hooks;
&lt;/span&gt;&lt;span&gt;1107&lt;/span&gt; 
&lt;span&gt;1108&lt;/span&gt;     item = cJSON_New_Item(&amp;amp;&lt;span&gt;global_hooks);
&lt;/span&gt;&lt;span&gt;1109&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (item == NULL) &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; memory fail &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1110&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1111&lt;/span&gt;         &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; fail;
&lt;/span&gt;&lt;span&gt;1112&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1113&lt;/span&gt; 
&lt;span&gt;1114&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (!parse_value(item, buffer_skip_whitespace(skip_utf8_bom(&amp;amp;&lt;span&gt;buffer))))
&lt;/span&gt;&lt;span&gt;1115&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1116&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; parse failure. ep is set. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1117&lt;/span&gt;         &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; fail;
&lt;/span&gt;&lt;span&gt;1118&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1119&lt;/span&gt; 
&lt;span&gt;1120&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; if we require null-terminated JSON without appended garbage, skip and then check for a null terminator &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1121&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt;&lt;span&gt; (require_null_terminated)
&lt;/span&gt;&lt;span&gt;1122&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1123&lt;/span&gt;         buffer_skip_whitespace(&amp;amp;&lt;span&gt;buffer);
&lt;/span&gt;&lt;span&gt;1124&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; ((buffer.offset &amp;gt;= buffer.length) || buffer_at_offset(&amp;amp;buffer)[&lt;span&gt;0&lt;/span&gt;] != &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\0&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;1125&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1126&lt;/span&gt;             &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; fail;
&lt;/span&gt;&lt;span&gt;1127&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1128&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1129&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt;&lt;span&gt; (return_parse_end)
&lt;/span&gt;&lt;span&gt;1130&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1131&lt;/span&gt;         *return_parse_end = (&lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt;*)buffer_at_offset(&amp;amp;&lt;span&gt;buffer);
&lt;/span&gt;&lt;span&gt;1132&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1133&lt;/span&gt; 
&lt;span&gt;1134&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; item;
&lt;/span&gt;&lt;span&gt;1135&lt;/span&gt; 
&lt;span&gt;1136&lt;/span&gt; &lt;span&gt;fail:
&lt;/span&gt;&lt;span&gt;1137&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (item !=&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1138&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1139&lt;/span&gt; &lt;span&gt;        cJSON_Delete(item);
&lt;/span&gt;&lt;span&gt;1140&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1141&lt;/span&gt; 
&lt;span&gt;1142&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (value !=&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1143&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1144&lt;/span&gt; &lt;span&gt;        error local_error;
&lt;/span&gt;&lt;span&gt;1145&lt;/span&gt;         local_error.json = (&lt;span&gt;const&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt;*&lt;span&gt;)value;
&lt;/span&gt;&lt;span&gt;1146&lt;/span&gt;         local_error.position = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1147&lt;/span&gt; 
&lt;span&gt;1148&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (buffer.offset &amp;lt;&lt;span&gt; buffer.length)
&lt;/span&gt;&lt;span&gt;1149&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1150&lt;/span&gt;             local_error.position =&lt;span&gt; buffer.offset;
&lt;/span&gt;&lt;span&gt;1151&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1152&lt;/span&gt;         &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (buffer.length &amp;gt; &lt;span&gt;0&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;1153&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1154&lt;/span&gt;             local_error.position = buffer.length - &lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1155&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1156&lt;/span&gt; 
&lt;span&gt;1157&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (return_parse_end !=&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1158&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1159&lt;/span&gt;             *return_parse_end = (&lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt;*)local_error.json +&lt;span&gt; local_error.position;
&lt;/span&gt;&lt;span&gt;1160&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1161&lt;/span&gt; 
&lt;span&gt;1162&lt;/span&gt;         global_error =&lt;span&gt; local_error;
&lt;/span&gt;&lt;span&gt;1163&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1164&lt;/span&gt; 
&lt;span&gt;1165&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1166&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1167&lt;/span&gt; 
&lt;span&gt;1168&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Default options for cJSON_Parse &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1169&lt;/span&gt; CJSON_PUBLIC(cJSON *) cJSON_Parse(&lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; *&lt;span&gt;value)
&lt;/span&gt;&lt;span&gt;1170&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1171&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; cJSON_ParseWithOpts(value, &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;1172&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1173&lt;/span&gt; 
&lt;span&gt;1174&lt;/span&gt; CJSON_PUBLIC(cJSON *) cJSON_ParseWithLength(&lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; *&lt;span&gt;value, size_t buffer_length)
&lt;/span&gt;&lt;span&gt;1175&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1176&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; cJSON_ParseWithLengthOpts(value, buffer_length, &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;1177&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1178&lt;/span&gt; 
&lt;span&gt;1179&lt;/span&gt; &lt;span&gt;#define&lt;/span&gt; cjson_min(a, b) (((a) &amp;lt; (b)) ? (a) : (b))
&lt;span&gt;1180&lt;/span&gt; 
&lt;span&gt;1181&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt; *print(&lt;span&gt;const&lt;/span&gt; cJSON * &lt;span&gt;const&lt;/span&gt; item, cJSON_bool format, &lt;span&gt;const&lt;/span&gt; internal_hooks * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; hooks)
&lt;/span&gt;&lt;span&gt;1182&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1183&lt;/span&gt;     &lt;span&gt;static&lt;/span&gt; &lt;span&gt;const&lt;/span&gt; size_t default_buffer_size = &lt;span&gt;256&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1184&lt;/span&gt;     printbuffer buffer[&lt;span&gt;1&lt;/span&gt;&lt;span&gt;];
&lt;/span&gt;&lt;span&gt;1185&lt;/span&gt;     unsigned &lt;span&gt;char&lt;/span&gt; *printed =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1186&lt;/span&gt; 
&lt;span&gt;1187&lt;/span&gt;     memset(buffer, &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;sizeof&lt;/span&gt;&lt;span&gt;(buffer));
&lt;/span&gt;&lt;span&gt;1188&lt;/span&gt; 
&lt;span&gt;1189&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; create buffer &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1190&lt;/span&gt;     buffer-&amp;gt;buffer = (unsigned &lt;span&gt;char&lt;/span&gt;*) hooks-&amp;gt;&lt;span&gt;allocate(default_buffer_size);
&lt;/span&gt;&lt;span&gt;1191&lt;/span&gt;     buffer-&amp;gt;length =&lt;span&gt; default_buffer_size;
&lt;/span&gt;&lt;span&gt;1192&lt;/span&gt;     buffer-&amp;gt;format =&lt;span&gt; format;
&lt;/span&gt;&lt;span&gt;1193&lt;/span&gt;     buffer-&amp;gt;hooks = *&lt;span&gt;hooks;
&lt;/span&gt;&lt;span&gt;1194&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (buffer-&amp;gt;buffer ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1195&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1196&lt;/span&gt;         &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; fail;
&lt;/span&gt;&lt;span&gt;1197&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1198&lt;/span&gt; 
&lt;span&gt;1199&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; print the value &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1200&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;print_value(item, buffer))
&lt;/span&gt;&lt;span&gt;1201&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1202&lt;/span&gt;         &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; fail;
&lt;/span&gt;&lt;span&gt;1203&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1204&lt;/span&gt; &lt;span&gt;    update_offset(buffer);
&lt;/span&gt;&lt;span&gt;1205&lt;/span&gt; 
&lt;span&gt;1206&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; check if reallocate is available &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1207&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (hooks-&amp;gt;reallocate !=&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1208&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1209&lt;/span&gt;         printed = (unsigned &lt;span&gt;char&lt;/span&gt;*) hooks-&amp;gt;reallocate(buffer-&amp;gt;buffer, buffer-&amp;gt;offset + &lt;span&gt;1&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;1210&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (printed ==&lt;span&gt; NULL) {
&lt;/span&gt;&lt;span&gt;1211&lt;/span&gt;             &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; fail;
&lt;/span&gt;&lt;span&gt;1212&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1213&lt;/span&gt;         buffer-&amp;gt;buffer =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1214&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1215&lt;/span&gt;     &lt;span&gt;else&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; otherwise copy the JSON over to a new buffer &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1216&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1217&lt;/span&gt;         printed = (unsigned &lt;span&gt;char&lt;/span&gt;*) hooks-&amp;gt;allocate(buffer-&amp;gt;offset + &lt;span&gt;1&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;1218&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (printed ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1219&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1220&lt;/span&gt;             &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; fail;
&lt;/span&gt;&lt;span&gt;1221&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1222&lt;/span&gt;         memcpy(printed, buffer-&amp;gt;buffer, cjson_min(buffer-&amp;gt;length, buffer-&amp;gt;offset + &lt;span&gt;1&lt;/span&gt;&lt;span&gt;));
&lt;/span&gt;&lt;span&gt;1223&lt;/span&gt;         printed[buffer-&amp;gt;offset] = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\0&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; just to be sure &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1224&lt;/span&gt; 
&lt;span&gt;1225&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; free the buffer &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1226&lt;/span&gt;         hooks-&amp;gt;deallocate(buffer-&amp;gt;&lt;span&gt;buffer);
&lt;/span&gt;&lt;span&gt;1227&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1228&lt;/span&gt; 
&lt;span&gt;1229&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; printed;
&lt;/span&gt;&lt;span&gt;1230&lt;/span&gt; 
&lt;span&gt;1231&lt;/span&gt; &lt;span&gt;fail:
&lt;/span&gt;&lt;span&gt;1232&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (buffer-&amp;gt;buffer !=&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1233&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1234&lt;/span&gt;         hooks-&amp;gt;deallocate(buffer-&amp;gt;&lt;span&gt;buffer);
&lt;/span&gt;&lt;span&gt;1235&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1236&lt;/span&gt; 
&lt;span&gt;1237&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (printed !=&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1238&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1239&lt;/span&gt;         hooks-&amp;gt;&lt;span&gt;deallocate(printed);
&lt;/span&gt;&lt;span&gt;1240&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1241&lt;/span&gt; 
&lt;span&gt;1242&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1243&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1244&lt;/span&gt; 
&lt;span&gt;1245&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Render a cJSON item/entity/structure to text. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1246&lt;/span&gt; CJSON_PUBLIC(&lt;span&gt;char&lt;/span&gt; *) cJSON_Print(&lt;span&gt;const&lt;/span&gt; cJSON *&lt;span&gt;item)
&lt;/span&gt;&lt;span&gt;1247&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1248&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; (&lt;span&gt;char&lt;/span&gt;*)print(item, &lt;span&gt;true&lt;/span&gt;, &amp;amp;&lt;span&gt;global_hooks);
&lt;/span&gt;&lt;span&gt;1249&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1250&lt;/span&gt; 
&lt;span&gt;1251&lt;/span&gt; CJSON_PUBLIC(&lt;span&gt;char&lt;/span&gt; *) cJSON_PrintUnformatted(&lt;span&gt;const&lt;/span&gt; cJSON *&lt;span&gt;item)
&lt;/span&gt;&lt;span&gt;1252&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1253&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; (&lt;span&gt;char&lt;/span&gt;*)print(item, &lt;span&gt;false&lt;/span&gt;, &amp;amp;&lt;span&gt;global_hooks);
&lt;/span&gt;&lt;span&gt;1254&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1255&lt;/span&gt; 
&lt;span&gt;1256&lt;/span&gt; CJSON_PUBLIC(&lt;span&gt;char&lt;/span&gt; *) cJSON_PrintBuffered(&lt;span&gt;const&lt;/span&gt; cJSON *item, &lt;span&gt;int&lt;/span&gt;&lt;span&gt; prebuffer, cJSON_bool fmt)
&lt;/span&gt;&lt;span&gt;1257&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1258&lt;/span&gt;     printbuffer p = { &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;, { &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;&lt;span&gt; } };
&lt;/span&gt;&lt;span&gt;1259&lt;/span&gt; 
&lt;span&gt;1260&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (prebuffer &amp;lt; &lt;span&gt;0&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;1261&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1262&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1263&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1264&lt;/span&gt; 
&lt;span&gt;1265&lt;/span&gt;     p.buffer = (unsigned &lt;span&gt;char&lt;/span&gt;*&lt;span&gt;)global_hooks.allocate((size_t)prebuffer);
&lt;/span&gt;&lt;span&gt;1266&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;p.buffer)
&lt;/span&gt;&lt;span&gt;1267&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1268&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1269&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1270&lt;/span&gt; 
&lt;span&gt;1271&lt;/span&gt;     p.length =&lt;span&gt; (size_t)prebuffer;
&lt;/span&gt;&lt;span&gt;1272&lt;/span&gt;     p.offset = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1273&lt;/span&gt;     p.noalloc = &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1274&lt;/span&gt;     p.format =&lt;span&gt; fmt;
&lt;/span&gt;&lt;span&gt;1275&lt;/span&gt;     p.hooks =&lt;span&gt; global_hooks;
&lt;/span&gt;&lt;span&gt;1276&lt;/span&gt; 
&lt;span&gt;1277&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (!print_value(item, &amp;amp;&lt;span&gt;p))
&lt;/span&gt;&lt;span&gt;1278&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1279&lt;/span&gt; &lt;span&gt;        global_hooks.deallocate(p.buffer);
&lt;/span&gt;&lt;span&gt;1280&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1281&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1282&lt;/span&gt; 
&lt;span&gt;1283&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; (&lt;span&gt;char&lt;/span&gt;*&lt;span&gt;)p.buffer;
&lt;/span&gt;&lt;span&gt;1284&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1285&lt;/span&gt; 
&lt;span&gt;1286&lt;/span&gt; CJSON_PUBLIC(cJSON_bool) cJSON_PrintPreallocated(cJSON *item, &lt;span&gt;char&lt;/span&gt; *buffer, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; length, &lt;span&gt;const&lt;/span&gt;&lt;span&gt; cJSON_bool format)
&lt;/span&gt;&lt;span&gt;1287&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1288&lt;/span&gt;     printbuffer p = { &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;, { &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;&lt;span&gt; } };
&lt;/span&gt;&lt;span&gt;1289&lt;/span&gt; 
&lt;span&gt;1290&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; ((length &amp;lt; &lt;span&gt;0&lt;/span&gt;) || (buffer ==&lt;span&gt; NULL))
&lt;/span&gt;&lt;span&gt;1291&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1292&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1293&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1294&lt;/span&gt; 
&lt;span&gt;1295&lt;/span&gt;     p.buffer = (unsigned &lt;span&gt;char&lt;/span&gt;*&lt;span&gt;)buffer;
&lt;/span&gt;&lt;span&gt;1296&lt;/span&gt;     p.length =&lt;span&gt; (size_t)length;
&lt;/span&gt;&lt;span&gt;1297&lt;/span&gt;     p.offset = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1298&lt;/span&gt;     p.noalloc = &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1299&lt;/span&gt;     p.format =&lt;span&gt; format;
&lt;/span&gt;&lt;span&gt;1300&lt;/span&gt;     p.hooks =&lt;span&gt; global_hooks;
&lt;/span&gt;&lt;span&gt;1301&lt;/span&gt; 
&lt;span&gt;1302&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; print_value(item, &amp;amp;&lt;span&gt;p);
&lt;/span&gt;&lt;span&gt;1303&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1304&lt;/span&gt; 
&lt;span&gt;1305&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Parser core - when encountering text, process appropriately. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1306&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; cJSON_bool parse_value(cJSON * &lt;span&gt;const&lt;/span&gt; item, parse_buffer * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; input_buffer)
&lt;/span&gt;&lt;span&gt;1307&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1308&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; ((input_buffer == NULL) || (input_buffer-&amp;gt;content ==&lt;span&gt; NULL))
&lt;/span&gt;&lt;span&gt;1309&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1310&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; no input &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1311&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1312&lt;/span&gt; 
&lt;span&gt;1313&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; parse the different types of values &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1314&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; null &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1315&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (can_read(input_buffer, &lt;span&gt;4&lt;/span&gt;) &amp;amp;&amp;amp; (strncmp((&lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt;*)buffer_at_offset(input_buffer), &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;null&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;4&lt;/span&gt;) == &lt;span&gt;0&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;1316&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1317&lt;/span&gt;         item-&amp;gt;type =&lt;span&gt; cJSON_NULL;
&lt;/span&gt;&lt;span&gt;1318&lt;/span&gt;         input_buffer-&amp;gt;offset += &lt;span&gt;4&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1319&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1320&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1321&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; false &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1322&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (can_read(input_buffer, &lt;span&gt;5&lt;/span&gt;) &amp;amp;&amp;amp; (strncmp((&lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt;*)buffer_at_offset(input_buffer), &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;5&lt;/span&gt;) == &lt;span&gt;0&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;1323&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1324&lt;/span&gt;         item-&amp;gt;type =&lt;span&gt; cJSON_False;
&lt;/span&gt;&lt;span&gt;1325&lt;/span&gt;         input_buffer-&amp;gt;offset += &lt;span&gt;5&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1326&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1327&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1328&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; true &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1329&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (can_read(input_buffer, &lt;span&gt;4&lt;/span&gt;) &amp;amp;&amp;amp; (strncmp((&lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt;*)buffer_at_offset(input_buffer), &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;4&lt;/span&gt;) == &lt;span&gt;0&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;1330&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1331&lt;/span&gt;         item-&amp;gt;type =&lt;span&gt; cJSON_True;
&lt;/span&gt;&lt;span&gt;1332&lt;/span&gt;         item-&amp;gt;valueint = &lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1333&lt;/span&gt;         input_buffer-&amp;gt;offset += &lt;span&gt;4&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1334&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1335&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1336&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; string &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1337&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (can_access_at_index(input_buffer, &lt;span&gt;0&lt;/span&gt;) &amp;amp;&amp;amp; (buffer_at_offset(input_buffer)[&lt;span&gt;0&lt;/span&gt;] == &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;1338&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1339&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; parse_string(item, input_buffer);
&lt;/span&gt;&lt;span&gt;1340&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1341&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; number &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1342&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (can_access_at_index(input_buffer, &lt;span&gt;0&lt;/span&gt;) &amp;amp;&amp;amp; ((buffer_at_offset(input_buffer)[&lt;span&gt;0&lt;/span&gt;] == &lt;span&gt;'&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;) || ((buffer_at_offset(input_buffer)[&lt;span&gt;0&lt;/span&gt;] &amp;gt;= &lt;span&gt;'&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;) &amp;amp;&amp;amp; (buffer_at_offset(input_buffer)[&lt;span&gt;0&lt;/span&gt;] &amp;lt;= &lt;span&gt;'&lt;/span&gt;&lt;span&gt;9&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;))))
&lt;/span&gt;&lt;span&gt;1343&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1344&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; parse_number(item, input_buffer);
&lt;/span&gt;&lt;span&gt;1345&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1346&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; array &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1347&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (can_access_at_index(input_buffer, &lt;span&gt;0&lt;/span&gt;) &amp;amp;&amp;amp; (buffer_at_offset(input_buffer)[&lt;span&gt;0&lt;/span&gt;] == &lt;span&gt;'&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;1348&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1349&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; parse_array(item, input_buffer);
&lt;/span&gt;&lt;span&gt;1350&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1351&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; object &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1352&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (can_access_at_index(input_buffer, &lt;span&gt;0&lt;/span&gt;) &amp;amp;&amp;amp; (buffer_at_offset(input_buffer)[&lt;span&gt;0&lt;/span&gt;] == &lt;span&gt;'&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;1353&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1354&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; parse_object(item, input_buffer);
&lt;/span&gt;&lt;span&gt;1355&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1356&lt;/span&gt; 
&lt;span&gt;1357&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1358&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1359&lt;/span&gt; 
&lt;span&gt;1360&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Render a value to text. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1361&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; cJSON_bool print_value(&lt;span&gt;const&lt;/span&gt; cJSON * &lt;span&gt;const&lt;/span&gt; item, printbuffer * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; output_buffer)
&lt;/span&gt;&lt;span&gt;1362&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1363&lt;/span&gt;     unsigned &lt;span&gt;char&lt;/span&gt; *output =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1364&lt;/span&gt; 
&lt;span&gt;1365&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; ((item == NULL) || (output_buffer ==&lt;span&gt; NULL))
&lt;/span&gt;&lt;span&gt;1366&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1367&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1368&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1369&lt;/span&gt; 
&lt;span&gt;1370&lt;/span&gt;     &lt;span&gt;switch&lt;/span&gt; ((item-&amp;gt;type) &amp;amp; &lt;span&gt;0xFF&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;1371&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1372&lt;/span&gt;         &lt;span&gt;case&lt;/span&gt;&lt;span&gt; cJSON_NULL:
&lt;/span&gt;&lt;span&gt;1373&lt;/span&gt;             output = ensure(output_buffer, &lt;span&gt;5&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;1374&lt;/span&gt;             &lt;span&gt;if&lt;/span&gt; (output ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1375&lt;/span&gt; &lt;span&gt;            {
&lt;/span&gt;&lt;span&gt;1376&lt;/span&gt;                 &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1377&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;1378&lt;/span&gt;             strcpy((&lt;span&gt;char&lt;/span&gt;*)output, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;null&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;1379&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1380&lt;/span&gt; 
&lt;span&gt;1381&lt;/span&gt;         &lt;span&gt;case&lt;/span&gt;&lt;span&gt; cJSON_False:
&lt;/span&gt;&lt;span&gt;1382&lt;/span&gt;             output = ensure(output_buffer, &lt;span&gt;6&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;1383&lt;/span&gt;             &lt;span&gt;if&lt;/span&gt; (output ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1384&lt;/span&gt; &lt;span&gt;            {
&lt;/span&gt;&lt;span&gt;1385&lt;/span&gt;                 &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1386&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;1387&lt;/span&gt;             strcpy((&lt;span&gt;char&lt;/span&gt;*)output, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;1388&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1389&lt;/span&gt; 
&lt;span&gt;1390&lt;/span&gt;         &lt;span&gt;case&lt;/span&gt;&lt;span&gt; cJSON_True:
&lt;/span&gt;&lt;span&gt;1391&lt;/span&gt;             output = ensure(output_buffer, &lt;span&gt;5&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;1392&lt;/span&gt;             &lt;span&gt;if&lt;/span&gt; (output ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1393&lt;/span&gt; &lt;span&gt;            {
&lt;/span&gt;&lt;span&gt;1394&lt;/span&gt;                 &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1395&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;1396&lt;/span&gt;             strcpy((&lt;span&gt;char&lt;/span&gt;*)output, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;1397&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1398&lt;/span&gt; 
&lt;span&gt;1399&lt;/span&gt;         &lt;span&gt;case&lt;/span&gt;&lt;span&gt; cJSON_Number:
&lt;/span&gt;&lt;span&gt;1400&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt;&lt;span&gt; print_number(item, output_buffer);
&lt;/span&gt;&lt;span&gt;1401&lt;/span&gt; 
&lt;span&gt;1402&lt;/span&gt;         &lt;span&gt;case&lt;/span&gt;&lt;span&gt; cJSON_Raw:
&lt;/span&gt;&lt;span&gt;1403&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1404&lt;/span&gt;             size_t raw_length = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1405&lt;/span&gt;             &lt;span&gt;if&lt;/span&gt; (item-&amp;gt;valuestring ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1406&lt;/span&gt; &lt;span&gt;            {
&lt;/span&gt;&lt;span&gt;1407&lt;/span&gt;                 &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1408&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;1409&lt;/span&gt; 
&lt;span&gt;1410&lt;/span&gt;             raw_length = strlen(item-&amp;gt;valuestring) + &lt;span&gt;sizeof&lt;/span&gt;(&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;1411&lt;/span&gt;             output =&lt;span&gt; ensure(output_buffer, raw_length);
&lt;/span&gt;&lt;span&gt;1412&lt;/span&gt;             &lt;span&gt;if&lt;/span&gt; (output ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1413&lt;/span&gt; &lt;span&gt;            {
&lt;/span&gt;&lt;span&gt;1414&lt;/span&gt;                 &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1415&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;1416&lt;/span&gt;             memcpy(output, item-&amp;gt;&lt;span&gt;valuestring, raw_length);
&lt;/span&gt;&lt;span&gt;1417&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1418&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1419&lt;/span&gt; 
&lt;span&gt;1420&lt;/span&gt;         &lt;span&gt;case&lt;/span&gt;&lt;span&gt; cJSON_String:
&lt;/span&gt;&lt;span&gt;1421&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt;&lt;span&gt; print_string(item, output_buffer);
&lt;/span&gt;&lt;span&gt;1422&lt;/span&gt; 
&lt;span&gt;1423&lt;/span&gt;         &lt;span&gt;case&lt;/span&gt;&lt;span&gt; cJSON_Array:
&lt;/span&gt;&lt;span&gt;1424&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt;&lt;span&gt; print_array(item, output_buffer);
&lt;/span&gt;&lt;span&gt;1425&lt;/span&gt; 
&lt;span&gt;1426&lt;/span&gt;         &lt;span&gt;case&lt;/span&gt;&lt;span&gt; cJSON_Object:
&lt;/span&gt;&lt;span&gt;1427&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt;&lt;span&gt; print_object(item, output_buffer);
&lt;/span&gt;&lt;span&gt;1428&lt;/span&gt; 
&lt;span&gt;1429&lt;/span&gt;         &lt;span&gt;default&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt;1430&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1431&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1432&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1433&lt;/span&gt; 
&lt;span&gt;1434&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Build an array from input text. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1435&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; cJSON_bool parse_array(cJSON * &lt;span&gt;const&lt;/span&gt; item, parse_buffer * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; input_buffer)
&lt;/span&gt;&lt;span&gt;1436&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1437&lt;/span&gt;     cJSON *head = NULL; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; head of the linked list &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1438&lt;/span&gt;     cJSON *current_item =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1439&lt;/span&gt; 
&lt;span&gt;1440&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (input_buffer-&amp;gt;depth &amp;gt;=&lt;span&gt; CJSON_NESTING_LIMIT)
&lt;/span&gt;&lt;span&gt;1441&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1442&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; to deeply nested &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1443&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1444&lt;/span&gt;     input_buffer-&amp;gt;depth++&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1445&lt;/span&gt; 
&lt;span&gt;1446&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (buffer_at_offset(input_buffer)[&lt;span&gt;0&lt;/span&gt;] != &lt;span&gt;'&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;1447&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1448&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; not an array &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1449&lt;/span&gt;         &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; fail;
&lt;/span&gt;&lt;span&gt;1450&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1451&lt;/span&gt; 
&lt;span&gt;1452&lt;/span&gt;     input_buffer-&amp;gt;offset++&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1453&lt;/span&gt; &lt;span&gt;    buffer_skip_whitespace(input_buffer);
&lt;/span&gt;&lt;span&gt;1454&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (can_access_at_index(input_buffer, &lt;span&gt;0&lt;/span&gt;) &amp;amp;&amp;amp; (buffer_at_offset(input_buffer)[&lt;span&gt;0&lt;/span&gt;] == &lt;span&gt;'&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;1455&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1456&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; empty array &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1457&lt;/span&gt;         &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; success;
&lt;/span&gt;&lt;span&gt;1458&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1459&lt;/span&gt; 
&lt;span&gt;1460&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; check if we skipped to the end of the buffer &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1461&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (cannot_access_at_index(input_buffer, &lt;span&gt;0&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;1462&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1463&lt;/span&gt;         input_buffer-&amp;gt;offset--&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1464&lt;/span&gt;         &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; fail;
&lt;/span&gt;&lt;span&gt;1465&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1466&lt;/span&gt; 
&lt;span&gt;1467&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; step back to character in front of the first element &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1468&lt;/span&gt;     input_buffer-&amp;gt;offset--&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1469&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; loop through the comma separated array elements &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1470&lt;/span&gt;     &lt;span&gt;do&lt;/span&gt;
&lt;span&gt;1471&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1472&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; allocate next item &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1473&lt;/span&gt;         cJSON *new_item = cJSON_New_Item(&amp;amp;(input_buffer-&amp;gt;&lt;span&gt;hooks));
&lt;/span&gt;&lt;span&gt;1474&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (new_item ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1475&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1476&lt;/span&gt;             &lt;span&gt;goto&lt;/span&gt; fail; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; allocation failure &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1477&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1478&lt;/span&gt; 
&lt;span&gt;1479&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; attach next item to list &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1480&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (head ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1481&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1482&lt;/span&gt;             &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; start the linked list &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1483&lt;/span&gt;             current_item = head =&lt;span&gt; new_item;
&lt;/span&gt;&lt;span&gt;1484&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1485&lt;/span&gt;         &lt;span&gt;else&lt;/span&gt;
&lt;span&gt;1486&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1487&lt;/span&gt;             &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; add to the end and advance &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1488&lt;/span&gt;             current_item-&amp;gt;next =&lt;span&gt; new_item;
&lt;/span&gt;&lt;span&gt;1489&lt;/span&gt;             new_item-&amp;gt;prev =&lt;span&gt; current_item;
&lt;/span&gt;&lt;span&gt;1490&lt;/span&gt;             current_item =&lt;span&gt; new_item;
&lt;/span&gt;&lt;span&gt;1491&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1492&lt;/span&gt; 
&lt;span&gt;1493&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; parse next value &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1494&lt;/span&gt;         input_buffer-&amp;gt;offset++&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1495&lt;/span&gt; &lt;span&gt;        buffer_skip_whitespace(input_buffer);
&lt;/span&gt;&lt;span&gt;1496&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;parse_value(current_item, input_buffer))
&lt;/span&gt;&lt;span&gt;1497&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1498&lt;/span&gt;             &lt;span&gt;goto&lt;/span&gt; fail; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; failed to parse value &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1499&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1500&lt;/span&gt; &lt;span&gt;        buffer_skip_whitespace(input_buffer);
&lt;/span&gt;&lt;span&gt;1501&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1502&lt;/span&gt;     &lt;span&gt;while&lt;/span&gt; (can_access_at_index(input_buffer, &lt;span&gt;0&lt;/span&gt;) &amp;amp;&amp;amp; (buffer_at_offset(input_buffer)[&lt;span&gt;0&lt;/span&gt;] == &lt;span&gt;'&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;));
&lt;/span&gt;&lt;span&gt;1503&lt;/span&gt; 
&lt;span&gt;1504&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (cannot_access_at_index(input_buffer, &lt;span&gt;0&lt;/span&gt;) || buffer_at_offset(input_buffer)[&lt;span&gt;0&lt;/span&gt;] != &lt;span&gt;'&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;1505&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1506&lt;/span&gt;         &lt;span&gt;goto&lt;/span&gt; fail; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; expected end of array &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1507&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1508&lt;/span&gt; 
&lt;span&gt;1509&lt;/span&gt; &lt;span&gt;success:
&lt;/span&gt;&lt;span&gt;1510&lt;/span&gt;     input_buffer-&amp;gt;depth--&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1511&lt;/span&gt; 
&lt;span&gt;1512&lt;/span&gt;     item-&amp;gt;type =&lt;span&gt; cJSON_Array;
&lt;/span&gt;&lt;span&gt;1513&lt;/span&gt;     item-&amp;gt;child =&lt;span&gt; head;
&lt;/span&gt;&lt;span&gt;1514&lt;/span&gt; 
&lt;span&gt;1515&lt;/span&gt;     input_buffer-&amp;gt;offset++&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1516&lt;/span&gt; 
&lt;span&gt;1517&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1518&lt;/span&gt; 
&lt;span&gt;1519&lt;/span&gt; &lt;span&gt;fail:
&lt;/span&gt;&lt;span&gt;1520&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (head !=&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1521&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1522&lt;/span&gt; &lt;span&gt;        cJSON_Delete(head);
&lt;/span&gt;&lt;span&gt;1523&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1524&lt;/span&gt; 
&lt;span&gt;1525&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1526&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1527&lt;/span&gt; 
&lt;span&gt;1528&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Render an array to text &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1529&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; cJSON_bool print_array(&lt;span&gt;const&lt;/span&gt; cJSON * &lt;span&gt;const&lt;/span&gt; item, printbuffer * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; output_buffer)
&lt;/span&gt;&lt;span&gt;1530&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1531&lt;/span&gt;     unsigned &lt;span&gt;char&lt;/span&gt; *output_pointer =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1532&lt;/span&gt;     size_t length = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1533&lt;/span&gt;     cJSON *current_element = item-&amp;gt;&lt;span&gt;child;
&lt;/span&gt;&lt;span&gt;1534&lt;/span&gt; 
&lt;span&gt;1535&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (output_buffer ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1536&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1537&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1538&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1539&lt;/span&gt; 
&lt;span&gt;1540&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Compose the output array. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1541&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; opening square bracket &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1542&lt;/span&gt;     output_pointer = ensure(output_buffer, &lt;span&gt;1&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;1543&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (output_pointer ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1544&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1545&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1546&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1547&lt;/span&gt; 
&lt;span&gt;1548&lt;/span&gt;     *output_pointer = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1549&lt;/span&gt;     output_buffer-&amp;gt;offset++&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1550&lt;/span&gt;     output_buffer-&amp;gt;depth++&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1551&lt;/span&gt; 
&lt;span&gt;1552&lt;/span&gt;     &lt;span&gt;while&lt;/span&gt; (current_element !=&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1553&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1554&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;print_value(current_element, output_buffer))
&lt;/span&gt;&lt;span&gt;1555&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1556&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1557&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1558&lt;/span&gt; &lt;span&gt;        update_offset(output_buffer);
&lt;/span&gt;&lt;span&gt;1559&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (current_element-&amp;gt;&lt;span&gt;next)
&lt;/span&gt;&lt;span&gt;1560&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1561&lt;/span&gt;             length = (size_t) (output_buffer-&amp;gt;format ? &lt;span&gt;2&lt;/span&gt; : &lt;span&gt;1&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;1562&lt;/span&gt;             output_pointer = ensure(output_buffer, length + &lt;span&gt;1&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;1563&lt;/span&gt;             &lt;span&gt;if&lt;/span&gt; (output_pointer ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1564&lt;/span&gt; &lt;span&gt;            {
&lt;/span&gt;&lt;span&gt;1565&lt;/span&gt;                 &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1566&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;1567&lt;/span&gt;             *output_pointer++ = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1568&lt;/span&gt;             &lt;span&gt;if&lt;/span&gt;(output_buffer-&amp;gt;&lt;span&gt;format)
&lt;/span&gt;&lt;span&gt;1569&lt;/span&gt; &lt;span&gt;            {
&lt;/span&gt;&lt;span&gt;1570&lt;/span&gt;                 *output_pointer++ = &lt;span&gt;'&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1571&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;1572&lt;/span&gt;             *output_pointer = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\0&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1573&lt;/span&gt;             output_buffer-&amp;gt;offset +=&lt;span&gt; length;
&lt;/span&gt;&lt;span&gt;1574&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1575&lt;/span&gt;         current_element = current_element-&amp;gt;&lt;span&gt;next;
&lt;/span&gt;&lt;span&gt;1576&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1577&lt;/span&gt; 
&lt;span&gt;1578&lt;/span&gt;     output_pointer = ensure(output_buffer, &lt;span&gt;2&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;1579&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (output_pointer ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1580&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1581&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1582&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1583&lt;/span&gt;     *output_pointer++ = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1584&lt;/span&gt;     *output_pointer = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\0&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1585&lt;/span&gt;     output_buffer-&amp;gt;depth--&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1586&lt;/span&gt; 
&lt;span&gt;1587&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1588&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1589&lt;/span&gt; 
&lt;span&gt;1590&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Build an object from the text. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1591&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; cJSON_bool parse_object(cJSON * &lt;span&gt;const&lt;/span&gt; item, parse_buffer * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; input_buffer)
&lt;/span&gt;&lt;span&gt;1592&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1593&lt;/span&gt;     cJSON *head = NULL; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; linked list head &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1594&lt;/span&gt;     cJSON *current_item =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1595&lt;/span&gt; 
&lt;span&gt;1596&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (input_buffer-&amp;gt;depth &amp;gt;=&lt;span&gt; CJSON_NESTING_LIMIT)
&lt;/span&gt;&lt;span&gt;1597&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1598&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; to deeply nested &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1599&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1600&lt;/span&gt;     input_buffer-&amp;gt;depth++&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1601&lt;/span&gt; 
&lt;span&gt;1602&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (cannot_access_at_index(input_buffer, &lt;span&gt;0&lt;/span&gt;) || (buffer_at_offset(input_buffer)[&lt;span&gt;0&lt;/span&gt;] != &lt;span&gt;'&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;1603&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1604&lt;/span&gt;         &lt;span&gt;goto&lt;/span&gt; fail; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; not an object &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1605&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1606&lt;/span&gt; 
&lt;span&gt;1607&lt;/span&gt;     input_buffer-&amp;gt;offset++&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1608&lt;/span&gt; &lt;span&gt;    buffer_skip_whitespace(input_buffer);
&lt;/span&gt;&lt;span&gt;1609&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (can_access_at_index(input_buffer, &lt;span&gt;0&lt;/span&gt;) &amp;amp;&amp;amp; (buffer_at_offset(input_buffer)[&lt;span&gt;0&lt;/span&gt;] == &lt;span&gt;'&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;1610&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1611&lt;/span&gt;         &lt;span&gt;goto&lt;/span&gt; success; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; empty object &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1612&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1613&lt;/span&gt; 
&lt;span&gt;1614&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; check if we skipped to the end of the buffer &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1615&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (cannot_access_at_index(input_buffer, &lt;span&gt;0&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;1616&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1617&lt;/span&gt;         input_buffer-&amp;gt;offset--&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1618&lt;/span&gt;         &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; fail;
&lt;/span&gt;&lt;span&gt;1619&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1620&lt;/span&gt; 
&lt;span&gt;1621&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; step back to character in front of the first element &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1622&lt;/span&gt;     input_buffer-&amp;gt;offset--&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1623&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; loop through the comma separated array elements &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1624&lt;/span&gt;     &lt;span&gt;do&lt;/span&gt;
&lt;span&gt;1625&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1626&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; allocate next item &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1627&lt;/span&gt;         cJSON *new_item = cJSON_New_Item(&amp;amp;(input_buffer-&amp;gt;&lt;span&gt;hooks));
&lt;/span&gt;&lt;span&gt;1628&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (new_item ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1629&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1630&lt;/span&gt;             &lt;span&gt;goto&lt;/span&gt; fail; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; allocation failure &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1631&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1632&lt;/span&gt; 
&lt;span&gt;1633&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; attach next item to list &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1634&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (head ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1635&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1636&lt;/span&gt;             &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; start the linked list &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1637&lt;/span&gt;             current_item = head =&lt;span&gt; new_item;
&lt;/span&gt;&lt;span&gt;1638&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1639&lt;/span&gt;         &lt;span&gt;else&lt;/span&gt;
&lt;span&gt;1640&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1641&lt;/span&gt;             &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; add to the end and advance &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1642&lt;/span&gt;             current_item-&amp;gt;next =&lt;span&gt; new_item;
&lt;/span&gt;&lt;span&gt;1643&lt;/span&gt;             new_item-&amp;gt;prev =&lt;span&gt; current_item;
&lt;/span&gt;&lt;span&gt;1644&lt;/span&gt;             current_item =&lt;span&gt; new_item;
&lt;/span&gt;&lt;span&gt;1645&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1646&lt;/span&gt; 
&lt;span&gt;1647&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; parse the name of the child &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1648&lt;/span&gt;         input_buffer-&amp;gt;offset++&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1649&lt;/span&gt; &lt;span&gt;        buffer_skip_whitespace(input_buffer);
&lt;/span&gt;&lt;span&gt;1650&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;parse_string(current_item, input_buffer))
&lt;/span&gt;&lt;span&gt;1651&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1652&lt;/span&gt;             &lt;span&gt;goto&lt;/span&gt; fail; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; failed to parse name &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1653&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1654&lt;/span&gt; &lt;span&gt;        buffer_skip_whitespace(input_buffer);
&lt;/span&gt;&lt;span&gt;1655&lt;/span&gt; 
&lt;span&gt;1656&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; swap valuestring and string, because we parsed the name &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1657&lt;/span&gt;         current_item-&amp;gt;&lt;span&gt;string&lt;/span&gt; = current_item-&amp;gt;&lt;span&gt;valuestring;
&lt;/span&gt;&lt;span&gt;1658&lt;/span&gt;         current_item-&amp;gt;valuestring =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1659&lt;/span&gt; 
&lt;span&gt;1660&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (cannot_access_at_index(input_buffer, &lt;span&gt;0&lt;/span&gt;) || (buffer_at_offset(input_buffer)[&lt;span&gt;0&lt;/span&gt;] != &lt;span&gt;'&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;1661&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1662&lt;/span&gt;             &lt;span&gt;goto&lt;/span&gt; fail; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; invalid object &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1663&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1664&lt;/span&gt; 
&lt;span&gt;1665&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; parse the value &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1666&lt;/span&gt;         input_buffer-&amp;gt;offset++&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1667&lt;/span&gt; &lt;span&gt;        buffer_skip_whitespace(input_buffer);
&lt;/span&gt;&lt;span&gt;1668&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;parse_value(current_item, input_buffer))
&lt;/span&gt;&lt;span&gt;1669&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1670&lt;/span&gt;             &lt;span&gt;goto&lt;/span&gt; fail; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; failed to parse value &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1671&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1672&lt;/span&gt; &lt;span&gt;        buffer_skip_whitespace(input_buffer);
&lt;/span&gt;&lt;span&gt;1673&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1674&lt;/span&gt;     &lt;span&gt;while&lt;/span&gt; (can_access_at_index(input_buffer, &lt;span&gt;0&lt;/span&gt;) &amp;amp;&amp;amp; (buffer_at_offset(input_buffer)[&lt;span&gt;0&lt;/span&gt;] == &lt;span&gt;'&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;));
&lt;/span&gt;&lt;span&gt;1675&lt;/span&gt; 
&lt;span&gt;1676&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (cannot_access_at_index(input_buffer, &lt;span&gt;0&lt;/span&gt;) || (buffer_at_offset(input_buffer)[&lt;span&gt;0&lt;/span&gt;] != &lt;span&gt;'&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;1677&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1678&lt;/span&gt;         &lt;span&gt;goto&lt;/span&gt; fail; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; expected end of object &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1679&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1680&lt;/span&gt; 
&lt;span&gt;1681&lt;/span&gt; &lt;span&gt;success:
&lt;/span&gt;&lt;span&gt;1682&lt;/span&gt;     input_buffer-&amp;gt;depth--&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1683&lt;/span&gt; 
&lt;span&gt;1684&lt;/span&gt;     item-&amp;gt;type =&lt;span&gt; cJSON_Object;
&lt;/span&gt;&lt;span&gt;1685&lt;/span&gt;     item-&amp;gt;child =&lt;span&gt; head;
&lt;/span&gt;&lt;span&gt;1686&lt;/span&gt; 
&lt;span&gt;1687&lt;/span&gt;     input_buffer-&amp;gt;offset++&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1688&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1689&lt;/span&gt; 
&lt;span&gt;1690&lt;/span&gt; &lt;span&gt;fail:
&lt;/span&gt;&lt;span&gt;1691&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (head !=&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1692&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1693&lt;/span&gt; &lt;span&gt;        cJSON_Delete(head);
&lt;/span&gt;&lt;span&gt;1694&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1695&lt;/span&gt; 
&lt;span&gt;1696&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1697&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1698&lt;/span&gt; 
&lt;span&gt;1699&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Render an object to text. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1700&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; cJSON_bool print_object(&lt;span&gt;const&lt;/span&gt; cJSON * &lt;span&gt;const&lt;/span&gt; item, printbuffer * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; output_buffer)
&lt;/span&gt;&lt;span&gt;1701&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1702&lt;/span&gt;     unsigned &lt;span&gt;char&lt;/span&gt; *output_pointer =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1703&lt;/span&gt;     size_t length = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1704&lt;/span&gt;     cJSON *current_item = item-&amp;gt;&lt;span&gt;child;
&lt;/span&gt;&lt;span&gt;1705&lt;/span&gt; 
&lt;span&gt;1706&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (output_buffer ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1707&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1708&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1709&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1710&lt;/span&gt; 
&lt;span&gt;1711&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Compose the output: &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1712&lt;/span&gt;     length = (size_t) (output_buffer-&amp;gt;format ? &lt;span&gt;2&lt;/span&gt; : &lt;span&gt;1&lt;/span&gt;); &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; fmt: {\n &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1713&lt;/span&gt;     output_pointer = ensure(output_buffer, length + &lt;span&gt;1&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;1714&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (output_pointer ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1715&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1716&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1717&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1718&lt;/span&gt; 
&lt;span&gt;1719&lt;/span&gt;     *output_pointer++ = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1720&lt;/span&gt;     output_buffer-&amp;gt;depth++&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1721&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (output_buffer-&amp;gt;&lt;span&gt;format)
&lt;/span&gt;&lt;span&gt;1722&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1723&lt;/span&gt;         *output_pointer++ = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1724&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1725&lt;/span&gt;     output_buffer-&amp;gt;offset +=&lt;span&gt; length;
&lt;/span&gt;&lt;span&gt;1726&lt;/span&gt; 
&lt;span&gt;1727&lt;/span&gt;     &lt;span&gt;while&lt;/span&gt;&lt;span&gt; (current_item)
&lt;/span&gt;&lt;span&gt;1728&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1729&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (output_buffer-&amp;gt;&lt;span&gt;format)
&lt;/span&gt;&lt;span&gt;1730&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1731&lt;/span&gt; &lt;span&gt;            size_t i;
&lt;/span&gt;&lt;span&gt;1732&lt;/span&gt;             output_pointer = ensure(output_buffer, output_buffer-&amp;gt;&lt;span&gt;depth);
&lt;/span&gt;&lt;span&gt;1733&lt;/span&gt;             &lt;span&gt;if&lt;/span&gt; (output_pointer ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1734&lt;/span&gt; &lt;span&gt;            {
&lt;/span&gt;&lt;span&gt;1735&lt;/span&gt;                 &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1736&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;1737&lt;/span&gt;             &lt;span&gt;for&lt;/span&gt; (i = &lt;span&gt;0&lt;/span&gt;; i &amp;lt; output_buffer-&amp;gt;depth; i++&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;1738&lt;/span&gt; &lt;span&gt;            {
&lt;/span&gt;&lt;span&gt;1739&lt;/span&gt;                 *output_pointer++ = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\t&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1740&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;1741&lt;/span&gt;             output_buffer-&amp;gt;offset += output_buffer-&amp;gt;&lt;span&gt;depth;
&lt;/span&gt;&lt;span&gt;1742&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1743&lt;/span&gt; 
&lt;span&gt;1744&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; print key &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1745&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (!print_string_ptr((unsigned &lt;span&gt;char&lt;/span&gt;*)current_item-&amp;gt;&lt;span&gt;string&lt;/span&gt;&lt;span&gt;, output_buffer))
&lt;/span&gt;&lt;span&gt;1746&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1747&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1748&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1749&lt;/span&gt; &lt;span&gt;        update_offset(output_buffer);
&lt;/span&gt;&lt;span&gt;1750&lt;/span&gt; 
&lt;span&gt;1751&lt;/span&gt;         length = (size_t) (output_buffer-&amp;gt;format ? &lt;span&gt;2&lt;/span&gt; : &lt;span&gt;1&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;1752&lt;/span&gt;         output_pointer =&lt;span&gt; ensure(output_buffer, length);
&lt;/span&gt;&lt;span&gt;1753&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (output_pointer ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1754&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1755&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1756&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1757&lt;/span&gt;         *output_pointer++ = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1758&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (output_buffer-&amp;gt;&lt;span&gt;format)
&lt;/span&gt;&lt;span&gt;1759&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1760&lt;/span&gt;             *output_pointer++ = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\t&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1761&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1762&lt;/span&gt;         output_buffer-&amp;gt;offset +=&lt;span&gt; length;
&lt;/span&gt;&lt;span&gt;1763&lt;/span&gt; 
&lt;span&gt;1764&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; print value &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1765&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;print_value(current_item, output_buffer))
&lt;/span&gt;&lt;span&gt;1766&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1767&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1768&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1769&lt;/span&gt; &lt;span&gt;        update_offset(output_buffer);
&lt;/span&gt;&lt;span&gt;1770&lt;/span&gt; 
&lt;span&gt;1771&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; print comma if not last &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1772&lt;/span&gt;         length = ((size_t)(output_buffer-&amp;gt;format ? &lt;span&gt;1&lt;/span&gt; : &lt;span&gt;0&lt;/span&gt;) + (size_t)(current_item-&amp;gt;next ? &lt;span&gt;1&lt;/span&gt; : &lt;span&gt;0&lt;/span&gt;&lt;span&gt;));
&lt;/span&gt;&lt;span&gt;1773&lt;/span&gt;         output_pointer = ensure(output_buffer, length + &lt;span&gt;1&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;1774&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (output_pointer ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1775&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1776&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1777&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1778&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (current_item-&amp;gt;&lt;span&gt;next)
&lt;/span&gt;&lt;span&gt;1779&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1780&lt;/span&gt;             *output_pointer++ = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1781&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1782&lt;/span&gt; 
&lt;span&gt;1783&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (output_buffer-&amp;gt;&lt;span&gt;format)
&lt;/span&gt;&lt;span&gt;1784&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1785&lt;/span&gt;             *output_pointer++ = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1786&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1787&lt;/span&gt;         *output_pointer = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\0&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1788&lt;/span&gt;         output_buffer-&amp;gt;offset +=&lt;span&gt; length;
&lt;/span&gt;&lt;span&gt;1789&lt;/span&gt; 
&lt;span&gt;1790&lt;/span&gt;         current_item = current_item-&amp;gt;&lt;span&gt;next;
&lt;/span&gt;&lt;span&gt;1791&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1792&lt;/span&gt; 
&lt;span&gt;1793&lt;/span&gt;     output_pointer = ensure(output_buffer, output_buffer-&amp;gt;format ? (output_buffer-&amp;gt;depth + &lt;span&gt;1&lt;/span&gt;) : &lt;span&gt;2&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;1794&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (output_pointer ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1795&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1796&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1797&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1798&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (output_buffer-&amp;gt;&lt;span&gt;format)
&lt;/span&gt;&lt;span&gt;1799&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1800&lt;/span&gt; &lt;span&gt;        size_t i;
&lt;/span&gt;&lt;span&gt;1801&lt;/span&gt;         &lt;span&gt;for&lt;/span&gt; (i = &lt;span&gt;0&lt;/span&gt;; i &amp;lt; (output_buffer-&amp;gt;depth - &lt;span&gt;1&lt;/span&gt;); i++&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;1802&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1803&lt;/span&gt;             *output_pointer++ = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\t&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1804&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1805&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1806&lt;/span&gt;     *output_pointer++ = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1807&lt;/span&gt;     *output_pointer = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\0&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1808&lt;/span&gt;     output_buffer-&amp;gt;depth--&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1809&lt;/span&gt; 
&lt;span&gt;1810&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1811&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1812&lt;/span&gt; 
&lt;span&gt;1813&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Get Array size/item / object item. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1814&lt;/span&gt; CJSON_PUBLIC(&lt;span&gt;int&lt;/span&gt;) cJSON_GetArraySize(&lt;span&gt;const&lt;/span&gt; cJSON *&lt;span&gt;array)
&lt;/span&gt;&lt;span&gt;1815&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1816&lt;/span&gt;     cJSON *child =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1817&lt;/span&gt;     size_t size = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1818&lt;/span&gt; 
&lt;span&gt;1819&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (array ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1820&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1821&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1822&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1823&lt;/span&gt; 
&lt;span&gt;1824&lt;/span&gt;     child = array-&amp;gt;&lt;span&gt;child;
&lt;/span&gt;&lt;span&gt;1825&lt;/span&gt; 
&lt;span&gt;1826&lt;/span&gt;     &lt;span&gt;while&lt;/span&gt;(child !=&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1827&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1828&lt;/span&gt;         size++&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1829&lt;/span&gt;         child = child-&amp;gt;&lt;span&gt;next;
&lt;/span&gt;&lt;span&gt;1830&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1831&lt;/span&gt; 
&lt;span&gt;1832&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; FIXME: Can overflow here. Cannot be fixed without breaking the API &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1833&lt;/span&gt; 
&lt;span&gt;1834&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt;&lt;span&gt;)size;
&lt;/span&gt;&lt;span&gt;1835&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1836&lt;/span&gt; 
&lt;span&gt;1837&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; cJSON* get_array_item(&lt;span&gt;const&lt;/span&gt; cJSON *&lt;span&gt;array, size_t index)
&lt;/span&gt;&lt;span&gt;1838&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1839&lt;/span&gt;     cJSON *current_child =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1840&lt;/span&gt; 
&lt;span&gt;1841&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (array ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1842&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1843&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1844&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1845&lt;/span&gt; 
&lt;span&gt;1846&lt;/span&gt;     current_child = array-&amp;gt;&lt;span&gt;child;
&lt;/span&gt;&lt;span&gt;1847&lt;/span&gt;     &lt;span&gt;while&lt;/span&gt; ((current_child != NULL) &amp;amp;&amp;amp; (index &amp;gt; &lt;span&gt;0&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;1848&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1849&lt;/span&gt;         index--&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1850&lt;/span&gt;         current_child = current_child-&amp;gt;&lt;span&gt;next;
&lt;/span&gt;&lt;span&gt;1851&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1852&lt;/span&gt; 
&lt;span&gt;1853&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; current_child;
&lt;/span&gt;&lt;span&gt;1854&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1855&lt;/span&gt; 
&lt;span&gt;1856&lt;/span&gt; CJSON_PUBLIC(cJSON *) cJSON_GetArrayItem(&lt;span&gt;const&lt;/span&gt; cJSON *array, &lt;span&gt;int&lt;/span&gt;&lt;span&gt; index)
&lt;/span&gt;&lt;span&gt;1857&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1858&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (index &amp;lt; &lt;span&gt;0&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;1859&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1860&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1861&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1862&lt;/span&gt; 
&lt;span&gt;1863&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; get_array_item(array, (size_t)index);
&lt;/span&gt;&lt;span&gt;1864&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1865&lt;/span&gt; 
&lt;span&gt;1866&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; cJSON *get_object_item(&lt;span&gt;const&lt;/span&gt; cJSON * &lt;span&gt;const&lt;/span&gt; &lt;span&gt;object&lt;/span&gt;, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; * &lt;span&gt;const&lt;/span&gt; name, &lt;span&gt;const&lt;/span&gt;&lt;span&gt; cJSON_bool case_sensitive)
&lt;/span&gt;&lt;span&gt;1867&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1868&lt;/span&gt;     cJSON *current_element =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1869&lt;/span&gt; 
&lt;span&gt;1870&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; ((&lt;span&gt;object&lt;/span&gt; == NULL) || (name ==&lt;span&gt; NULL))
&lt;/span&gt;&lt;span&gt;1871&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1872&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1873&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1874&lt;/span&gt; 
&lt;span&gt;1875&lt;/span&gt;     current_element = &lt;span&gt;object&lt;/span&gt;-&amp;gt;&lt;span&gt;child;
&lt;/span&gt;&lt;span&gt;1876&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt;&lt;span&gt; (case_sensitive)
&lt;/span&gt;&lt;span&gt;1877&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1878&lt;/span&gt;         &lt;span&gt;while&lt;/span&gt; ((current_element != NULL) &amp;amp;&amp;amp; (current_element-&amp;gt;&lt;span&gt;string&lt;/span&gt; != NULL) &amp;amp;&amp;amp; (strcmp(name, current_element-&amp;gt;&lt;span&gt;string&lt;/span&gt;) != &lt;span&gt;0&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;1879&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1880&lt;/span&gt;             current_element = current_element-&amp;gt;&lt;span&gt;next;
&lt;/span&gt;&lt;span&gt;1881&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1882&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1883&lt;/span&gt;     &lt;span&gt;else&lt;/span&gt;
&lt;span&gt;1884&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1885&lt;/span&gt;         &lt;span&gt;while&lt;/span&gt; ((current_element != NULL) &amp;amp;&amp;amp; (case_insensitive_strcmp((&lt;span&gt;const&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt;*)name, (&lt;span&gt;const&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt;*)(current_element-&amp;gt;&lt;span&gt;string&lt;/span&gt;)) != &lt;span&gt;0&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;1886&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1887&lt;/span&gt;             current_element = current_element-&amp;gt;&lt;span&gt;next;
&lt;/span&gt;&lt;span&gt;1888&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1889&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1890&lt;/span&gt; 
&lt;span&gt;1891&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; ((current_element == NULL) || (current_element-&amp;gt;&lt;span&gt;string&lt;/span&gt; ==&lt;span&gt; NULL)) {
&lt;/span&gt;&lt;span&gt;1892&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1893&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1894&lt;/span&gt; 
&lt;span&gt;1895&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; current_element;
&lt;/span&gt;&lt;span&gt;1896&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1897&lt;/span&gt; 
&lt;span&gt;1898&lt;/span&gt; CJSON_PUBLIC(cJSON *) cJSON_GetObjectItem(&lt;span&gt;const&lt;/span&gt; cJSON * &lt;span&gt;const&lt;/span&gt; &lt;span&gt;object&lt;/span&gt;, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; * &lt;span&gt;const&lt;/span&gt; &lt;span&gt;string&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;1899&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1900&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; get_object_item(&lt;span&gt;object&lt;/span&gt;, &lt;span&gt;string&lt;/span&gt;, &lt;span&gt;false&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;1901&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1902&lt;/span&gt; 
&lt;span&gt;1903&lt;/span&gt; CJSON_PUBLIC(cJSON *) cJSON_GetObjectItemCaseSensitive(&lt;span&gt;const&lt;/span&gt; cJSON * &lt;span&gt;const&lt;/span&gt; &lt;span&gt;object&lt;/span&gt;, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; * &lt;span&gt;const&lt;/span&gt; &lt;span&gt;string&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;1904&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1905&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; get_object_item(&lt;span&gt;object&lt;/span&gt;, &lt;span&gt;string&lt;/span&gt;, &lt;span&gt;true&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;1906&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1907&lt;/span&gt; 
&lt;span&gt;1908&lt;/span&gt; CJSON_PUBLIC(cJSON_bool) cJSON_HasObjectItem(&lt;span&gt;const&lt;/span&gt; cJSON *&lt;span&gt;object&lt;/span&gt;, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; *&lt;span&gt;string&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;1909&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1910&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; cJSON_GetObjectItem(&lt;span&gt;object&lt;/span&gt;, &lt;span&gt;string&lt;/span&gt;) ? &lt;span&gt;1&lt;/span&gt; : &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1911&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1912&lt;/span&gt; 
&lt;span&gt;1913&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Utility for array list handling. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1914&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; suffix_object(cJSON *prev, cJSON *&lt;span&gt;item)
&lt;/span&gt;&lt;span&gt;1915&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1916&lt;/span&gt;     prev-&amp;gt;next =&lt;span&gt; item;
&lt;/span&gt;&lt;span&gt;1917&lt;/span&gt;     item-&amp;gt;prev =&lt;span&gt; prev;
&lt;/span&gt;&lt;span&gt;1918&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1919&lt;/span&gt; 
&lt;span&gt;1920&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Utility for handling references. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1921&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; cJSON *create_reference(&lt;span&gt;const&lt;/span&gt; cJSON *item, &lt;span&gt;const&lt;/span&gt; internal_hooks * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; hooks)
&lt;/span&gt;&lt;span&gt;1922&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1923&lt;/span&gt;     cJSON *reference =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1924&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (item ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1925&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1926&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1927&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1928&lt;/span&gt; 
&lt;span&gt;1929&lt;/span&gt;     reference =&lt;span&gt; cJSON_New_Item(hooks);
&lt;/span&gt;&lt;span&gt;1930&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (reference ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1931&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1932&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1933&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1934&lt;/span&gt; 
&lt;span&gt;1935&lt;/span&gt;     memcpy(reference, item, &lt;span&gt;sizeof&lt;/span&gt;&lt;span&gt;(cJSON));
&lt;/span&gt;&lt;span&gt;1936&lt;/span&gt;     reference-&amp;gt;&lt;span&gt;string&lt;/span&gt; =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1937&lt;/span&gt;     reference-&amp;gt;type |=&lt;span&gt; cJSON_IsReference;
&lt;/span&gt;&lt;span&gt;1938&lt;/span&gt;     reference-&amp;gt;next = reference-&amp;gt;prev =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1939&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; reference;
&lt;/span&gt;&lt;span&gt;1940&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1941&lt;/span&gt; 
&lt;span&gt;1942&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; cJSON_bool add_item_to_array(cJSON *array, cJSON *&lt;span&gt;item)
&lt;/span&gt;&lt;span&gt;1943&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1944&lt;/span&gt;     cJSON *child =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1945&lt;/span&gt; 
&lt;span&gt;1946&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; ((item == NULL) || (array == NULL) || (array ==&lt;span&gt; item))
&lt;/span&gt;&lt;span&gt;1947&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1948&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1949&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1950&lt;/span&gt; 
&lt;span&gt;1951&lt;/span&gt;     child = array-&amp;gt;&lt;span&gt;child;
&lt;/span&gt;&lt;span&gt;1952&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;
&lt;span&gt;1953&lt;/span&gt; &lt;span&gt;     * To find the last item in array quickly, we use prev in array
&lt;/span&gt;&lt;span&gt;1954&lt;/span&gt;      &lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1955&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (child ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;1956&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1957&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; list is empty, start new one &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1958&lt;/span&gt;         array-&amp;gt;child =&lt;span&gt; item;
&lt;/span&gt;&lt;span&gt;1959&lt;/span&gt;         item-&amp;gt;prev =&lt;span&gt; item;
&lt;/span&gt;&lt;span&gt;1960&lt;/span&gt;         item-&amp;gt;next =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;1961&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1962&lt;/span&gt;     &lt;span&gt;else&lt;/span&gt;
&lt;span&gt;1963&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;1964&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; append to the end &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1965&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (child-&amp;gt;&lt;span&gt;prev)
&lt;/span&gt;&lt;span&gt;1966&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1967&lt;/span&gt;             suffix_object(child-&amp;gt;&lt;span&gt;prev, item);
&lt;/span&gt;&lt;span&gt;1968&lt;/span&gt;             array-&amp;gt;child-&amp;gt;prev =&lt;span&gt; item;
&lt;/span&gt;&lt;span&gt;1969&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1970&lt;/span&gt;         &lt;span&gt;else&lt;/span&gt;
&lt;span&gt;1971&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;1972&lt;/span&gt;             &lt;span&gt;while&lt;/span&gt; (child-&amp;gt;&lt;span&gt;next)
&lt;/span&gt;&lt;span&gt;1973&lt;/span&gt; &lt;span&gt;            {
&lt;/span&gt;&lt;span&gt;1974&lt;/span&gt;                 child = child-&amp;gt;&lt;span&gt;next;
&lt;/span&gt;&lt;span&gt;1975&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;1976&lt;/span&gt; &lt;span&gt;            suffix_object(child, item);
&lt;/span&gt;&lt;span&gt;1977&lt;/span&gt;             array-&amp;gt;child-&amp;gt;prev =&lt;span&gt; item;
&lt;/span&gt;&lt;span&gt;1978&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;1979&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;1980&lt;/span&gt; 
&lt;span&gt;1981&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;1982&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1983&lt;/span&gt; 
&lt;span&gt;1984&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Add item to array/object. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1985&lt;/span&gt; CJSON_PUBLIC(cJSON_bool) cJSON_AddItemToArray(cJSON *array, cJSON *&lt;span&gt;item)
&lt;/span&gt;&lt;span&gt;1986&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1987&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; add_item_to_array(array, item);
&lt;/span&gt;&lt;span&gt;1988&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;1989&lt;/span&gt; 
&lt;span&gt;1990&lt;/span&gt; &lt;span&gt;#if&lt;/span&gt; defined(__clang__) || (defined(__GNUC__)  &amp;amp;&amp;amp; ((__GNUC__ &amp;gt; 4) || ((__GNUC__ == 4) &amp;amp;&amp;amp; (__GNUC_MINOR__ &amp;gt; 5))))
&lt;span&gt;1991&lt;/span&gt;     &lt;span&gt;#pragma&lt;/span&gt; GCC diagnostic push
&lt;span&gt;1992&lt;/span&gt; &lt;span&gt;#endif&lt;/span&gt;
&lt;span&gt;1993&lt;/span&gt; &lt;span&gt;#ifdef __GNUC__
&lt;/span&gt;&lt;span&gt;1994&lt;/span&gt; &lt;span&gt;#pragma&lt;/span&gt; GCC diagnostic ignored &quot;-Wcast-qual&quot;
&lt;span&gt;1995&lt;/span&gt; &lt;span&gt;#endif&lt;/span&gt;
&lt;span&gt;1996&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; helper function to cast away const &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;1997&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;* cast_away_const(&lt;span&gt;const&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;* &lt;span&gt;string&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;1998&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;1999&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; (&lt;span&gt;void&lt;/span&gt;*)&lt;span&gt;string&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2000&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2001&lt;/span&gt; &lt;span&gt;#if&lt;/span&gt; defined(__clang__) || (defined(__GNUC__)  &amp;amp;&amp;amp; ((__GNUC__ &amp;gt; 4) || ((__GNUC__ == 4) &amp;amp;&amp;amp; (__GNUC_MINOR__ &amp;gt; 5))))
&lt;span&gt;2002&lt;/span&gt;     &lt;span&gt;#pragma&lt;/span&gt; GCC diagnostic pop
&lt;span&gt;2003&lt;/span&gt; &lt;span&gt;#endif&lt;/span&gt;
&lt;span&gt;2004&lt;/span&gt; 
&lt;span&gt;2005&lt;/span&gt; 
&lt;span&gt;2006&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; cJSON_bool add_item_to_object(cJSON * &lt;span&gt;const&lt;/span&gt; &lt;span&gt;object&lt;/span&gt;, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; * &lt;span&gt;const&lt;/span&gt; &lt;span&gt;string&lt;/span&gt;, cJSON * &lt;span&gt;const&lt;/span&gt; item, &lt;span&gt;const&lt;/span&gt; internal_hooks * &lt;span&gt;const&lt;/span&gt; hooks, &lt;span&gt;const&lt;/span&gt;&lt;span&gt; cJSON_bool constant_key)
&lt;/span&gt;&lt;span&gt;2007&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2008&lt;/span&gt;     &lt;span&gt;char&lt;/span&gt; *new_key =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2009&lt;/span&gt;     &lt;span&gt;int&lt;/span&gt; new_type =&lt;span&gt; cJSON_Invalid;
&lt;/span&gt;&lt;span&gt;2010&lt;/span&gt; 
&lt;span&gt;2011&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; ((&lt;span&gt;object&lt;/span&gt; == NULL) || (&lt;span&gt;string&lt;/span&gt; == NULL) || (item == NULL) || (&lt;span&gt;object&lt;/span&gt; ==&lt;span&gt; item))
&lt;/span&gt;&lt;span&gt;2012&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2013&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2014&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2015&lt;/span&gt; 
&lt;span&gt;2016&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt;&lt;span&gt; (constant_key)
&lt;/span&gt;&lt;span&gt;2017&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2018&lt;/span&gt;         new_key = (&lt;span&gt;char&lt;/span&gt;*)cast_away_const(&lt;span&gt;string&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;2019&lt;/span&gt;         new_type = item-&amp;gt;type |&lt;span&gt; cJSON_StringIsConst;
&lt;/span&gt;&lt;span&gt;2020&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2021&lt;/span&gt;     &lt;span&gt;else&lt;/span&gt;
&lt;span&gt;2022&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2023&lt;/span&gt;         new_key = (&lt;span&gt;char&lt;/span&gt;*)cJSON_strdup((&lt;span&gt;const&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt;*)&lt;span&gt;string&lt;/span&gt;&lt;span&gt;, hooks);
&lt;/span&gt;&lt;span&gt;2024&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (new_key ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;2025&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;2026&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2027&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;2028&lt;/span&gt; 
&lt;span&gt;2029&lt;/span&gt;         new_type = item-&amp;gt;type &amp;amp; ~&lt;span&gt;cJSON_StringIsConst;
&lt;/span&gt;&lt;span&gt;2030&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2031&lt;/span&gt; 
&lt;span&gt;2032&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (!(item-&amp;gt;type &amp;amp; cJSON_StringIsConst) &amp;amp;&amp;amp; (item-&amp;gt;&lt;span&gt;string&lt;/span&gt; !=&lt;span&gt; NULL))
&lt;/span&gt;&lt;span&gt;2033&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2034&lt;/span&gt;         hooks-&amp;gt;deallocate(item-&amp;gt;&lt;span&gt;string&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;2035&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2036&lt;/span&gt; 
&lt;span&gt;2037&lt;/span&gt;     item-&amp;gt;&lt;span&gt;string&lt;/span&gt; =&lt;span&gt; new_key;
&lt;/span&gt;&lt;span&gt;2038&lt;/span&gt;     item-&amp;gt;type =&lt;span&gt; new_type;
&lt;/span&gt;&lt;span&gt;2039&lt;/span&gt; 
&lt;span&gt;2040&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; add_item_to_array(&lt;span&gt;object&lt;/span&gt;&lt;span&gt;, item);
&lt;/span&gt;&lt;span&gt;2041&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2042&lt;/span&gt; 
&lt;span&gt;2043&lt;/span&gt; CJSON_PUBLIC(cJSON_bool) cJSON_AddItemToObject(cJSON *&lt;span&gt;object&lt;/span&gt;, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; *&lt;span&gt;string&lt;/span&gt;, cJSON *&lt;span&gt;item)
&lt;/span&gt;&lt;span&gt;2044&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2045&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; add_item_to_object(&lt;span&gt;object&lt;/span&gt;, &lt;span&gt;string&lt;/span&gt;, item, &amp;amp;global_hooks, &lt;span&gt;false&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;2046&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2047&lt;/span&gt; 
&lt;span&gt;2048&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Add an item to an object with constant string as key &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;2049&lt;/span&gt; CJSON_PUBLIC(cJSON_bool) cJSON_AddItemToObjectCS(cJSON *&lt;span&gt;object&lt;/span&gt;, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; *&lt;span&gt;string&lt;/span&gt;, cJSON *&lt;span&gt;item)
&lt;/span&gt;&lt;span&gt;2050&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2051&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; add_item_to_object(&lt;span&gt;object&lt;/span&gt;, &lt;span&gt;string&lt;/span&gt;, item, &amp;amp;global_hooks, &lt;span&gt;true&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;2052&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2053&lt;/span&gt; 
&lt;span&gt;2054&lt;/span&gt; CJSON_PUBLIC(cJSON_bool) cJSON_AddItemReferenceToArray(cJSON *array, cJSON *&lt;span&gt;item)
&lt;/span&gt;&lt;span&gt;2055&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2056&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (array ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;2057&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2058&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2059&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2060&lt;/span&gt; 
&lt;span&gt;2061&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; add_item_to_array(array, create_reference(item, &amp;amp;&lt;span&gt;global_hooks));
&lt;/span&gt;&lt;span&gt;2062&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2063&lt;/span&gt; 
&lt;span&gt;2064&lt;/span&gt; CJSON_PUBLIC(cJSON_bool) cJSON_AddItemReferenceToObject(cJSON *&lt;span&gt;object&lt;/span&gt;, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; *&lt;span&gt;string&lt;/span&gt;, cJSON *&lt;span&gt;item)
&lt;/span&gt;&lt;span&gt;2065&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2066&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; ((&lt;span&gt;object&lt;/span&gt; == NULL) || (&lt;span&gt;string&lt;/span&gt; ==&lt;span&gt; NULL))
&lt;/span&gt;&lt;span&gt;2067&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2068&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2069&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2070&lt;/span&gt; 
&lt;span&gt;2071&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; add_item_to_object(&lt;span&gt;object&lt;/span&gt;, &lt;span&gt;string&lt;/span&gt;, create_reference(item, &amp;amp;global_hooks), &amp;amp;global_hooks, &lt;span&gt;false&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;2072&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2073&lt;/span&gt; 
&lt;span&gt;2074&lt;/span&gt; CJSON_PUBLIC(cJSON*) cJSON_AddNullToObject(cJSON * &lt;span&gt;const&lt;/span&gt; &lt;span&gt;object&lt;/span&gt;, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; name)
&lt;/span&gt;&lt;span&gt;2075&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2076&lt;/span&gt;     cJSON *&lt;span&gt;null&lt;/span&gt; =&lt;span&gt; cJSON_CreateNull();
&lt;/span&gt;&lt;span&gt;2077&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (add_item_to_object(&lt;span&gt;object&lt;/span&gt;, name, &lt;span&gt;null&lt;/span&gt;, &amp;amp;global_hooks, &lt;span&gt;false&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;2078&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2079&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2080&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2081&lt;/span&gt; 
&lt;span&gt;2082&lt;/span&gt;     cJSON_Delete(&lt;span&gt;null&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;2083&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2084&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2085&lt;/span&gt; 
&lt;span&gt;2086&lt;/span&gt; CJSON_PUBLIC(cJSON*) cJSON_AddTrueToObject(cJSON * &lt;span&gt;const&lt;/span&gt; &lt;span&gt;object&lt;/span&gt;, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; name)
&lt;/span&gt;&lt;span&gt;2087&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2088&lt;/span&gt;     cJSON *true_item =&lt;span&gt; cJSON_CreateTrue();
&lt;/span&gt;&lt;span&gt;2089&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (add_item_to_object(&lt;span&gt;object&lt;/span&gt;, name, true_item, &amp;amp;global_hooks, &lt;span&gt;false&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;2090&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2091&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; true_item;
&lt;/span&gt;&lt;span&gt;2092&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2093&lt;/span&gt; 
&lt;span&gt;2094&lt;/span&gt; &lt;span&gt;    cJSON_Delete(true_item);
&lt;/span&gt;&lt;span&gt;2095&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2096&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2097&lt;/span&gt; 
&lt;span&gt;2098&lt;/span&gt; CJSON_PUBLIC(cJSON*) cJSON_AddFalseToObject(cJSON * &lt;span&gt;const&lt;/span&gt; &lt;span&gt;object&lt;/span&gt;, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; name)
&lt;/span&gt;&lt;span&gt;2099&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2100&lt;/span&gt;     cJSON *false_item =&lt;span&gt; cJSON_CreateFalse();
&lt;/span&gt;&lt;span&gt;2101&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (add_item_to_object(&lt;span&gt;object&lt;/span&gt;, name, false_item, &amp;amp;global_hooks, &lt;span&gt;false&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;2102&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2103&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; false_item;
&lt;/span&gt;&lt;span&gt;2104&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2105&lt;/span&gt; 
&lt;span&gt;2106&lt;/span&gt; &lt;span&gt;    cJSON_Delete(false_item);
&lt;/span&gt;&lt;span&gt;2107&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2108&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2109&lt;/span&gt; 
&lt;span&gt;2110&lt;/span&gt; CJSON_PUBLIC(cJSON*) cJSON_AddBoolToObject(cJSON * &lt;span&gt;const&lt;/span&gt; &lt;span&gt;object&lt;/span&gt;, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; * &lt;span&gt;const&lt;/span&gt; name, &lt;span&gt;const&lt;/span&gt;&lt;span&gt; cJSON_bool boolean)
&lt;/span&gt;&lt;span&gt;2111&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2112&lt;/span&gt;     cJSON *bool_item =&lt;span&gt; cJSON_CreateBool(boolean);
&lt;/span&gt;&lt;span&gt;2113&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (add_item_to_object(&lt;span&gt;object&lt;/span&gt;, name, bool_item, &amp;amp;global_hooks, &lt;span&gt;false&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;2114&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2115&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; bool_item;
&lt;/span&gt;&lt;span&gt;2116&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2117&lt;/span&gt; 
&lt;span&gt;2118&lt;/span&gt; &lt;span&gt;    cJSON_Delete(bool_item);
&lt;/span&gt;&lt;span&gt;2119&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2120&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2121&lt;/span&gt; 
&lt;span&gt;2122&lt;/span&gt; CJSON_PUBLIC(cJSON*) cJSON_AddNumberToObject(cJSON * &lt;span&gt;const&lt;/span&gt; &lt;span&gt;object&lt;/span&gt;, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; * &lt;span&gt;const&lt;/span&gt; name, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;double&lt;/span&gt;&lt;span&gt; number)
&lt;/span&gt;&lt;span&gt;2123&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2124&lt;/span&gt;     cJSON *number_item =&lt;span&gt; cJSON_CreateNumber(number);
&lt;/span&gt;&lt;span&gt;2125&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (add_item_to_object(&lt;span&gt;object&lt;/span&gt;, name, number_item, &amp;amp;global_hooks, &lt;span&gt;false&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;2126&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2127&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; number_item;
&lt;/span&gt;&lt;span&gt;2128&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2129&lt;/span&gt; 
&lt;span&gt;2130&lt;/span&gt; &lt;span&gt;    cJSON_Delete(number_item);
&lt;/span&gt;&lt;span&gt;2131&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2132&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2133&lt;/span&gt; 
&lt;span&gt;2134&lt;/span&gt; CJSON_PUBLIC(cJSON*) cJSON_AddStringToObject(cJSON * &lt;span&gt;const&lt;/span&gt; &lt;span&gt;object&lt;/span&gt;, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; * &lt;span&gt;const&lt;/span&gt; name, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; * &lt;span&gt;const&lt;/span&gt; &lt;span&gt;string&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2135&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2136&lt;/span&gt;     cJSON *string_item = cJSON_CreateString(&lt;span&gt;string&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;2137&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (add_item_to_object(&lt;span&gt;object&lt;/span&gt;, name, string_item, &amp;amp;global_hooks, &lt;span&gt;false&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;2138&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2139&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; string_item;
&lt;/span&gt;&lt;span&gt;2140&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2141&lt;/span&gt; 
&lt;span&gt;2142&lt;/span&gt; &lt;span&gt;    cJSON_Delete(string_item);
&lt;/span&gt;&lt;span&gt;2143&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2144&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2145&lt;/span&gt; 
&lt;span&gt;2146&lt;/span&gt; CJSON_PUBLIC(cJSON*) cJSON_AddRawToObject(cJSON * &lt;span&gt;const&lt;/span&gt; &lt;span&gt;object&lt;/span&gt;, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; * &lt;span&gt;const&lt;/span&gt; name, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; raw)
&lt;/span&gt;&lt;span&gt;2147&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2148&lt;/span&gt;     cJSON *raw_item =&lt;span&gt; cJSON_CreateRaw(raw);
&lt;/span&gt;&lt;span&gt;2149&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (add_item_to_object(&lt;span&gt;object&lt;/span&gt;, name, raw_item, &amp;amp;global_hooks, &lt;span&gt;false&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;2150&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2151&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; raw_item;
&lt;/span&gt;&lt;span&gt;2152&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2153&lt;/span&gt; 
&lt;span&gt;2154&lt;/span&gt; &lt;span&gt;    cJSON_Delete(raw_item);
&lt;/span&gt;&lt;span&gt;2155&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2156&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2157&lt;/span&gt; 
&lt;span&gt;2158&lt;/span&gt; CJSON_PUBLIC(cJSON*) cJSON_AddObjectToObject(cJSON * &lt;span&gt;const&lt;/span&gt; &lt;span&gt;object&lt;/span&gt;, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; name)
&lt;/span&gt;&lt;span&gt;2159&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2160&lt;/span&gt;     cJSON *object_item =&lt;span&gt; cJSON_CreateObject();
&lt;/span&gt;&lt;span&gt;2161&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (add_item_to_object(&lt;span&gt;object&lt;/span&gt;, name, object_item, &amp;amp;global_hooks, &lt;span&gt;false&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;2162&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2163&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; object_item;
&lt;/span&gt;&lt;span&gt;2164&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2165&lt;/span&gt; 
&lt;span&gt;2166&lt;/span&gt; &lt;span&gt;    cJSON_Delete(object_item);
&lt;/span&gt;&lt;span&gt;2167&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2168&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2169&lt;/span&gt; 
&lt;span&gt;2170&lt;/span&gt; CJSON_PUBLIC(cJSON*) cJSON_AddArrayToObject(cJSON * &lt;span&gt;const&lt;/span&gt; &lt;span&gt;object&lt;/span&gt;, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; name)
&lt;/span&gt;&lt;span&gt;2171&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2172&lt;/span&gt;     cJSON *array =&lt;span&gt; cJSON_CreateArray();
&lt;/span&gt;&lt;span&gt;2173&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (add_item_to_object(&lt;span&gt;object&lt;/span&gt;, name, array, &amp;amp;global_hooks, &lt;span&gt;false&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;2174&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2175&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; array;
&lt;/span&gt;&lt;span&gt;2176&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2177&lt;/span&gt; 
&lt;span&gt;2178&lt;/span&gt; &lt;span&gt;    cJSON_Delete(array);
&lt;/span&gt;&lt;span&gt;2179&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2180&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2181&lt;/span&gt; 
&lt;span&gt;2182&lt;/span&gt; CJSON_PUBLIC(cJSON *) cJSON_DetachItemViaPointer(cJSON *parent, cJSON * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; item)
&lt;/span&gt;&lt;span&gt;2183&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2184&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; ((parent == NULL) || (item ==&lt;span&gt; NULL))
&lt;/span&gt;&lt;span&gt;2185&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2186&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2187&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2188&lt;/span&gt; 
&lt;span&gt;2189&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (item != parent-&amp;gt;&lt;span&gt;child)
&lt;/span&gt;&lt;span&gt;2190&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2191&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; not the first element &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;2192&lt;/span&gt;         item-&amp;gt;prev-&amp;gt;next = item-&amp;gt;&lt;span&gt;next;
&lt;/span&gt;&lt;span&gt;2193&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2194&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (item-&amp;gt;next !=&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;2195&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2196&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; not the last element &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;2197&lt;/span&gt;         item-&amp;gt;next-&amp;gt;prev = item-&amp;gt;&lt;span&gt;prev;
&lt;/span&gt;&lt;span&gt;2198&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2199&lt;/span&gt; 
&lt;span&gt;2200&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (item == parent-&amp;gt;&lt;span&gt;child)
&lt;/span&gt;&lt;span&gt;2201&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2202&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; first element &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;2203&lt;/span&gt;         parent-&amp;gt;child = item-&amp;gt;&lt;span&gt;next;
&lt;/span&gt;&lt;span&gt;2204&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2205&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; make sure the detached item doesn't point anywhere anymore &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;2206&lt;/span&gt;     item-&amp;gt;prev =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2207&lt;/span&gt;     item-&amp;gt;next =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2208&lt;/span&gt; 
&lt;span&gt;2209&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; item;
&lt;/span&gt;&lt;span&gt;2210&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2211&lt;/span&gt; 
&lt;span&gt;2212&lt;/span&gt; CJSON_PUBLIC(cJSON *) cJSON_DetachItemFromArray(cJSON *array, &lt;span&gt;int&lt;/span&gt;&lt;span&gt; which)
&lt;/span&gt;&lt;span&gt;2213&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2214&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (which &amp;lt; &lt;span&gt;0&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2215&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2216&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2217&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2218&lt;/span&gt; 
&lt;span&gt;2219&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; cJSON_DetachItemViaPointer(array, get_array_item(array, (size_t)which));
&lt;/span&gt;&lt;span&gt;2220&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2221&lt;/span&gt; 
&lt;span&gt;2222&lt;/span&gt; CJSON_PUBLIC(&lt;span&gt;void&lt;/span&gt;) cJSON_DeleteItemFromArray(cJSON *array, &lt;span&gt;int&lt;/span&gt;&lt;span&gt; which)
&lt;/span&gt;&lt;span&gt;2223&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2224&lt;/span&gt; &lt;span&gt;    cJSON_Delete(cJSON_DetachItemFromArray(array, which));
&lt;/span&gt;&lt;span&gt;2225&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2226&lt;/span&gt; 
&lt;span&gt;2227&lt;/span&gt; CJSON_PUBLIC(cJSON *) cJSON_DetachItemFromObject(cJSON *&lt;span&gt;object&lt;/span&gt;, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; *&lt;span&gt;string&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2228&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2229&lt;/span&gt;     cJSON *to_detach = cJSON_GetObjectItem(&lt;span&gt;object&lt;/span&gt;, &lt;span&gt;string&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;2230&lt;/span&gt; 
&lt;span&gt;2231&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; cJSON_DetachItemViaPointer(&lt;span&gt;object&lt;/span&gt;&lt;span&gt;, to_detach);
&lt;/span&gt;&lt;span&gt;2232&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2233&lt;/span&gt; 
&lt;span&gt;2234&lt;/span&gt; CJSON_PUBLIC(cJSON *) cJSON_DetachItemFromObjectCaseSensitive(cJSON *&lt;span&gt;object&lt;/span&gt;, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; *&lt;span&gt;string&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2235&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2236&lt;/span&gt;     cJSON *to_detach = cJSON_GetObjectItemCaseSensitive(&lt;span&gt;object&lt;/span&gt;, &lt;span&gt;string&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;2237&lt;/span&gt; 
&lt;span&gt;2238&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; cJSON_DetachItemViaPointer(&lt;span&gt;object&lt;/span&gt;&lt;span&gt;, to_detach);
&lt;/span&gt;&lt;span&gt;2239&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2240&lt;/span&gt; 
&lt;span&gt;2241&lt;/span&gt; CJSON_PUBLIC(&lt;span&gt;void&lt;/span&gt;) cJSON_DeleteItemFromObject(cJSON *&lt;span&gt;object&lt;/span&gt;, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; *&lt;span&gt;string&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2242&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2243&lt;/span&gt;     cJSON_Delete(cJSON_DetachItemFromObject(&lt;span&gt;object&lt;/span&gt;, &lt;span&gt;string&lt;/span&gt;&lt;span&gt;));
&lt;/span&gt;&lt;span&gt;2244&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2245&lt;/span&gt; 
&lt;span&gt;2246&lt;/span&gt; CJSON_PUBLIC(&lt;span&gt;void&lt;/span&gt;) cJSON_DeleteItemFromObjectCaseSensitive(cJSON *&lt;span&gt;object&lt;/span&gt;, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; *&lt;span&gt;string&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2247&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2248&lt;/span&gt;     cJSON_Delete(cJSON_DetachItemFromObjectCaseSensitive(&lt;span&gt;object&lt;/span&gt;, &lt;span&gt;string&lt;/span&gt;&lt;span&gt;));
&lt;/span&gt;&lt;span&gt;2249&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2250&lt;/span&gt; 
&lt;span&gt;2251&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Replace array/object items with new ones. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;2252&lt;/span&gt; CJSON_PUBLIC(cJSON_bool) cJSON_InsertItemInArray(cJSON *array, &lt;span&gt;int&lt;/span&gt; which, cJSON *&lt;span&gt;newitem)
&lt;/span&gt;&lt;span&gt;2253&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2254&lt;/span&gt;     cJSON *after_inserted =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2255&lt;/span&gt; 
&lt;span&gt;2256&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (which &amp;lt; &lt;span&gt;0&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2257&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2258&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2259&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2260&lt;/span&gt; 
&lt;span&gt;2261&lt;/span&gt;     after_inserted =&lt;span&gt; get_array_item(array, (size_t)which);
&lt;/span&gt;&lt;span&gt;2262&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (after_inserted ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;2263&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2264&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; add_item_to_array(array, newitem);
&lt;/span&gt;&lt;span&gt;2265&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2266&lt;/span&gt; 
&lt;span&gt;2267&lt;/span&gt;     newitem-&amp;gt;next =&lt;span&gt; after_inserted;
&lt;/span&gt;&lt;span&gt;2268&lt;/span&gt;     newitem-&amp;gt;prev = after_inserted-&amp;gt;&lt;span&gt;prev;
&lt;/span&gt;&lt;span&gt;2269&lt;/span&gt;     after_inserted-&amp;gt;prev =&lt;span&gt; newitem;
&lt;/span&gt;&lt;span&gt;2270&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (after_inserted == array-&amp;gt;&lt;span&gt;child)
&lt;/span&gt;&lt;span&gt;2271&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2272&lt;/span&gt;         array-&amp;gt;child =&lt;span&gt; newitem;
&lt;/span&gt;&lt;span&gt;2273&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2274&lt;/span&gt;     &lt;span&gt;else&lt;/span&gt;
&lt;span&gt;2275&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2276&lt;/span&gt;         newitem-&amp;gt;prev-&amp;gt;next =&lt;span&gt; newitem;
&lt;/span&gt;&lt;span&gt;2277&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2278&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2279&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2280&lt;/span&gt; 
&lt;span&gt;2281&lt;/span&gt; CJSON_PUBLIC(cJSON_bool) cJSON_ReplaceItemViaPointer(cJSON * &lt;span&gt;const&lt;/span&gt; parent, cJSON * &lt;span&gt;const&lt;/span&gt; item, cJSON *&lt;span&gt; replacement)
&lt;/span&gt;&lt;span&gt;2282&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2283&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; ((parent == NULL) || (replacement == NULL) || (item ==&lt;span&gt; NULL))
&lt;/span&gt;&lt;span&gt;2284&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2285&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2286&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2287&lt;/span&gt; 
&lt;span&gt;2288&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (replacement ==&lt;span&gt; item)
&lt;/span&gt;&lt;span&gt;2289&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2290&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2291&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2292&lt;/span&gt; 
&lt;span&gt;2293&lt;/span&gt;     replacement-&amp;gt;next = item-&amp;gt;&lt;span&gt;next;
&lt;/span&gt;&lt;span&gt;2294&lt;/span&gt;     replacement-&amp;gt;prev = item-&amp;gt;&lt;span&gt;prev;
&lt;/span&gt;&lt;span&gt;2295&lt;/span&gt; 
&lt;span&gt;2296&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (replacement-&amp;gt;next !=&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;2297&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2298&lt;/span&gt;         replacement-&amp;gt;next-&amp;gt;prev =&lt;span&gt; replacement;
&lt;/span&gt;&lt;span&gt;2299&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2300&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (parent-&amp;gt;child ==&lt;span&gt; item)
&lt;/span&gt;&lt;span&gt;2301&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2302&lt;/span&gt;         parent-&amp;gt;child =&lt;span&gt; replacement;
&lt;/span&gt;&lt;span&gt;2303&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2304&lt;/span&gt;     &lt;span&gt;else&lt;/span&gt;
&lt;span&gt;2305&lt;/span&gt;     {   &lt;span&gt;/*&lt;/span&gt;
&lt;span&gt;2306&lt;/span&gt; &lt;span&gt;         * To find the last item in array quickly, we use prev in array.
&lt;/span&gt;&lt;span&gt;2307&lt;/span&gt; &lt;span&gt;         * We can't modify the last item's next pointer where this item was the parent's child
&lt;/span&gt;&lt;span&gt;2308&lt;/span&gt;          &lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;2309&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (replacement-&amp;gt;prev !=&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;2310&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;2311&lt;/span&gt;             replacement-&amp;gt;prev-&amp;gt;next =&lt;span&gt; replacement;
&lt;/span&gt;&lt;span&gt;2312&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;2313&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2314&lt;/span&gt; 
&lt;span&gt;2315&lt;/span&gt;     item-&amp;gt;next =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2316&lt;/span&gt;     item-&amp;gt;prev =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2317&lt;/span&gt; &lt;span&gt;    cJSON_Delete(item);
&lt;/span&gt;&lt;span&gt;2318&lt;/span&gt; 
&lt;span&gt;2319&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2320&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2321&lt;/span&gt; 
&lt;span&gt;2322&lt;/span&gt; CJSON_PUBLIC(cJSON_bool) cJSON_ReplaceItemInArray(cJSON *array, &lt;span&gt;int&lt;/span&gt; which, cJSON *&lt;span&gt;newitem)
&lt;/span&gt;&lt;span&gt;2323&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2324&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (which &amp;lt; &lt;span&gt;0&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2325&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2326&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2327&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2328&lt;/span&gt; 
&lt;span&gt;2329&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; cJSON_ReplaceItemViaPointer(array, get_array_item(array, (size_t)which), newitem);
&lt;/span&gt;&lt;span&gt;2330&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2331&lt;/span&gt; 
&lt;span&gt;2332&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; cJSON_bool replace_item_in_object(cJSON *&lt;span&gt;object&lt;/span&gt;, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; *&lt;span&gt;string&lt;/span&gt;, cJSON *&lt;span&gt;replacement, cJSON_bool case_sensitive)
&lt;/span&gt;&lt;span&gt;2333&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2334&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; ((replacement == NULL) || (&lt;span&gt;string&lt;/span&gt; ==&lt;span&gt; NULL))
&lt;/span&gt;&lt;span&gt;2335&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2336&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2337&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2338&lt;/span&gt; 
&lt;span&gt;2339&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; replace the name in the replacement &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;2340&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (!(replacement-&amp;gt;type &amp;amp; cJSON_StringIsConst) &amp;amp;&amp;amp; (replacement-&amp;gt;&lt;span&gt;string&lt;/span&gt; !=&lt;span&gt; NULL))
&lt;/span&gt;&lt;span&gt;2341&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2342&lt;/span&gt;         cJSON_free(replacement-&amp;gt;&lt;span&gt;string&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;2343&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2344&lt;/span&gt;     replacement-&amp;gt;&lt;span&gt;string&lt;/span&gt; = (&lt;span&gt;char&lt;/span&gt;*)cJSON_strdup((&lt;span&gt;const&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt;*)&lt;span&gt;string&lt;/span&gt;, &amp;amp;&lt;span&gt;global_hooks);
&lt;/span&gt;&lt;span&gt;2345&lt;/span&gt;     replacement-&amp;gt;type &amp;amp;= ~&lt;span&gt;cJSON_StringIsConst;
&lt;/span&gt;&lt;span&gt;2346&lt;/span&gt; 
&lt;span&gt;2347&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; cJSON_ReplaceItemViaPointer(&lt;span&gt;object&lt;/span&gt;, get_object_item(&lt;span&gt;object&lt;/span&gt;, &lt;span&gt;string&lt;/span&gt;&lt;span&gt;, case_sensitive), replacement);
&lt;/span&gt;&lt;span&gt;2348&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2349&lt;/span&gt; 
&lt;span&gt;2350&lt;/span&gt; CJSON_PUBLIC(cJSON_bool) cJSON_ReplaceItemInObject(cJSON *&lt;span&gt;object&lt;/span&gt;, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; *&lt;span&gt;string&lt;/span&gt;, cJSON *&lt;span&gt;newitem)
&lt;/span&gt;&lt;span&gt;2351&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2352&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; replace_item_in_object(&lt;span&gt;object&lt;/span&gt;, &lt;span&gt;string&lt;/span&gt;, newitem, &lt;span&gt;false&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;2353&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2354&lt;/span&gt; 
&lt;span&gt;2355&lt;/span&gt; CJSON_PUBLIC(cJSON_bool) cJSON_ReplaceItemInObjectCaseSensitive(cJSON *&lt;span&gt;object&lt;/span&gt;, &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; *&lt;span&gt;string&lt;/span&gt;, cJSON *&lt;span&gt;newitem)
&lt;/span&gt;&lt;span&gt;2356&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2357&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; replace_item_in_object(&lt;span&gt;object&lt;/span&gt;, &lt;span&gt;string&lt;/span&gt;, newitem, &lt;span&gt;true&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;2358&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2359&lt;/span&gt; 
&lt;span&gt;2360&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Create basic types: &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;2361&lt;/span&gt; CJSON_PUBLIC(cJSON *) cJSON_CreateNull(&lt;span&gt;void&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2362&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2363&lt;/span&gt;     cJSON *item = cJSON_New_Item(&amp;amp;&lt;span&gt;global_hooks);
&lt;/span&gt;&lt;span&gt;2364&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt;&lt;span&gt;(item)
&lt;/span&gt;&lt;span&gt;2365&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2366&lt;/span&gt;         item-&amp;gt;type =&lt;span&gt; cJSON_NULL;
&lt;/span&gt;&lt;span&gt;2367&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2368&lt;/span&gt; 
&lt;span&gt;2369&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; item;
&lt;/span&gt;&lt;span&gt;2370&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2371&lt;/span&gt; 
&lt;span&gt;2372&lt;/span&gt; CJSON_PUBLIC(cJSON *) cJSON_CreateTrue(&lt;span&gt;void&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2373&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2374&lt;/span&gt;     cJSON *item = cJSON_New_Item(&amp;amp;&lt;span&gt;global_hooks);
&lt;/span&gt;&lt;span&gt;2375&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt;&lt;span&gt;(item)
&lt;/span&gt;&lt;span&gt;2376&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2377&lt;/span&gt;         item-&amp;gt;type =&lt;span&gt; cJSON_True;
&lt;/span&gt;&lt;span&gt;2378&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2379&lt;/span&gt; 
&lt;span&gt;2380&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; item;
&lt;/span&gt;&lt;span&gt;2381&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2382&lt;/span&gt; 
&lt;span&gt;2383&lt;/span&gt; CJSON_PUBLIC(cJSON *) cJSON_CreateFalse(&lt;span&gt;void&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2384&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2385&lt;/span&gt;     cJSON *item = cJSON_New_Item(&amp;amp;&lt;span&gt;global_hooks);
&lt;/span&gt;&lt;span&gt;2386&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt;&lt;span&gt;(item)
&lt;/span&gt;&lt;span&gt;2387&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2388&lt;/span&gt;         item-&amp;gt;type =&lt;span&gt; cJSON_False;
&lt;/span&gt;&lt;span&gt;2389&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2390&lt;/span&gt; 
&lt;span&gt;2391&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; item;
&lt;/span&gt;&lt;span&gt;2392&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2393&lt;/span&gt; 
&lt;span&gt;2394&lt;/span&gt; CJSON_PUBLIC(cJSON *&lt;span&gt;) cJSON_CreateBool(cJSON_bool boolean)
&lt;/span&gt;&lt;span&gt;2395&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2396&lt;/span&gt;     cJSON *item = cJSON_New_Item(&amp;amp;&lt;span&gt;global_hooks);
&lt;/span&gt;&lt;span&gt;2397&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt;&lt;span&gt;(item)
&lt;/span&gt;&lt;span&gt;2398&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2399&lt;/span&gt;         item-&amp;gt;type = boolean ?&lt;span&gt; cJSON_True : cJSON_False;
&lt;/span&gt;&lt;span&gt;2400&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2401&lt;/span&gt; 
&lt;span&gt;2402&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; item;
&lt;/span&gt;&lt;span&gt;2403&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2404&lt;/span&gt; 
&lt;span&gt;2405&lt;/span&gt; CJSON_PUBLIC(cJSON *) cJSON_CreateNumber(&lt;span&gt;double&lt;/span&gt;&lt;span&gt; num)
&lt;/span&gt;&lt;span&gt;2406&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2407&lt;/span&gt;     cJSON *item = cJSON_New_Item(&amp;amp;&lt;span&gt;global_hooks);
&lt;/span&gt;&lt;span&gt;2408&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt;&lt;span&gt;(item)
&lt;/span&gt;&lt;span&gt;2409&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2410&lt;/span&gt;         item-&amp;gt;type =&lt;span&gt; cJSON_Number;
&lt;/span&gt;&lt;span&gt;2411&lt;/span&gt;         item-&amp;gt;valuedouble =&lt;span&gt; num;
&lt;/span&gt;&lt;span&gt;2412&lt;/span&gt; 
&lt;span&gt;2413&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; use saturation in case of overflow &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;2414&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (num &amp;gt;=&lt;span&gt; INT_MAX)
&lt;/span&gt;&lt;span&gt;2415&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;2416&lt;/span&gt;             item-&amp;gt;valueint =&lt;span&gt; INT_MAX;
&lt;/span&gt;&lt;span&gt;2417&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;2418&lt;/span&gt;         &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (num &amp;lt;= (&lt;span&gt;double&lt;/span&gt;&lt;span&gt;)INT_MIN)
&lt;/span&gt;&lt;span&gt;2419&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;2420&lt;/span&gt;             item-&amp;gt;valueint =&lt;span&gt; INT_MIN;
&lt;/span&gt;&lt;span&gt;2421&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;2422&lt;/span&gt;         &lt;span&gt;else&lt;/span&gt;
&lt;span&gt;2423&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;2424&lt;/span&gt;             item-&amp;gt;valueint = (&lt;span&gt;int&lt;/span&gt;&lt;span&gt;)num;
&lt;/span&gt;&lt;span&gt;2425&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;2426&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2427&lt;/span&gt; 
&lt;span&gt;2428&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; item;
&lt;/span&gt;&lt;span&gt;2429&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2430&lt;/span&gt; 
&lt;span&gt;2431&lt;/span&gt; CJSON_PUBLIC(cJSON *) cJSON_CreateString(&lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; *&lt;span&gt;string&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2432&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2433&lt;/span&gt;     cJSON *item = cJSON_New_Item(&amp;amp;&lt;span&gt;global_hooks);
&lt;/span&gt;&lt;span&gt;2434&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt;&lt;span&gt;(item)
&lt;/span&gt;&lt;span&gt;2435&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2436&lt;/span&gt;         item-&amp;gt;type =&lt;span&gt; cJSON_String;
&lt;/span&gt;&lt;span&gt;2437&lt;/span&gt;         item-&amp;gt;valuestring = (&lt;span&gt;char&lt;/span&gt;*)cJSON_strdup((&lt;span&gt;const&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt;*)&lt;span&gt;string&lt;/span&gt;, &amp;amp;&lt;span&gt;global_hooks);
&lt;/span&gt;&lt;span&gt;2438&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt;(!item-&amp;gt;&lt;span&gt;valuestring)
&lt;/span&gt;&lt;span&gt;2439&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;2440&lt;/span&gt; &lt;span&gt;            cJSON_Delete(item);
&lt;/span&gt;&lt;span&gt;2441&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2442&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;2443&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2444&lt;/span&gt; 
&lt;span&gt;2445&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; item;
&lt;/span&gt;&lt;span&gt;2446&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2447&lt;/span&gt; 
&lt;span&gt;2448&lt;/span&gt; CJSON_PUBLIC(cJSON *) cJSON_CreateStringReference(&lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; *&lt;span&gt;string&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2449&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2450&lt;/span&gt;     cJSON *item = cJSON_New_Item(&amp;amp;&lt;span&gt;global_hooks);
&lt;/span&gt;&lt;span&gt;2451&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (item !=&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;2452&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2453&lt;/span&gt;         item-&amp;gt;type = cJSON_String |&lt;span&gt; cJSON_IsReference;
&lt;/span&gt;&lt;span&gt;2454&lt;/span&gt;         item-&amp;gt;valuestring = (&lt;span&gt;char&lt;/span&gt;*)cast_away_const(&lt;span&gt;string&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;2455&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2456&lt;/span&gt; 
&lt;span&gt;2457&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; item;
&lt;/span&gt;&lt;span&gt;2458&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2459&lt;/span&gt; 
&lt;span&gt;2460&lt;/span&gt; CJSON_PUBLIC(cJSON *) cJSON_CreateObjectReference(&lt;span&gt;const&lt;/span&gt; cJSON *&lt;span&gt;child)
&lt;/span&gt;&lt;span&gt;2461&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2462&lt;/span&gt;     cJSON *item = cJSON_New_Item(&amp;amp;&lt;span&gt;global_hooks);
&lt;/span&gt;&lt;span&gt;2463&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (item !=&lt;span&gt; NULL) {
&lt;/span&gt;&lt;span&gt;2464&lt;/span&gt;         item-&amp;gt;type = cJSON_Object |&lt;span&gt; cJSON_IsReference;
&lt;/span&gt;&lt;span&gt;2465&lt;/span&gt;         item-&amp;gt;child = (cJSON*&lt;span&gt;)cast_away_const(child);
&lt;/span&gt;&lt;span&gt;2466&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2467&lt;/span&gt; 
&lt;span&gt;2468&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; item;
&lt;/span&gt;&lt;span&gt;2469&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2470&lt;/span&gt; 
&lt;span&gt;2471&lt;/span&gt; CJSON_PUBLIC(cJSON *) cJSON_CreateArrayReference(&lt;span&gt;const&lt;/span&gt; cJSON *&lt;span&gt;child) {
&lt;/span&gt;&lt;span&gt;2472&lt;/span&gt;     cJSON *item = cJSON_New_Item(&amp;amp;&lt;span&gt;global_hooks);
&lt;/span&gt;&lt;span&gt;2473&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (item !=&lt;span&gt; NULL) {
&lt;/span&gt;&lt;span&gt;2474&lt;/span&gt;         item-&amp;gt;type = cJSON_Array |&lt;span&gt; cJSON_IsReference;
&lt;/span&gt;&lt;span&gt;2475&lt;/span&gt;         item-&amp;gt;child = (cJSON*&lt;span&gt;)cast_away_const(child);
&lt;/span&gt;&lt;span&gt;2476&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2477&lt;/span&gt; 
&lt;span&gt;2478&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; item;
&lt;/span&gt;&lt;span&gt;2479&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2480&lt;/span&gt; 
&lt;span&gt;2481&lt;/span&gt; CJSON_PUBLIC(cJSON *) cJSON_CreateRaw(&lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; *&lt;span&gt;raw)
&lt;/span&gt;&lt;span&gt;2482&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2483&lt;/span&gt;     cJSON *item = cJSON_New_Item(&amp;amp;&lt;span&gt;global_hooks);
&lt;/span&gt;&lt;span&gt;2484&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt;&lt;span&gt;(item)
&lt;/span&gt;&lt;span&gt;2485&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2486&lt;/span&gt;         item-&amp;gt;type =&lt;span&gt; cJSON_Raw;
&lt;/span&gt;&lt;span&gt;2487&lt;/span&gt;         item-&amp;gt;valuestring = (&lt;span&gt;char&lt;/span&gt;*)cJSON_strdup((&lt;span&gt;const&lt;/span&gt; unsigned &lt;span&gt;char&lt;/span&gt;*)raw, &amp;amp;&lt;span&gt;global_hooks);
&lt;/span&gt;&lt;span&gt;2488&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt;(!item-&amp;gt;&lt;span&gt;valuestring)
&lt;/span&gt;&lt;span&gt;2489&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;2490&lt;/span&gt; &lt;span&gt;            cJSON_Delete(item);
&lt;/span&gt;&lt;span&gt;2491&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2492&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;2493&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2494&lt;/span&gt; 
&lt;span&gt;2495&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; item;
&lt;/span&gt;&lt;span&gt;2496&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2497&lt;/span&gt; 
&lt;span&gt;2498&lt;/span&gt; CJSON_PUBLIC(cJSON *) cJSON_CreateArray(&lt;span&gt;void&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2499&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2500&lt;/span&gt;     cJSON *item = cJSON_New_Item(&amp;amp;&lt;span&gt;global_hooks);
&lt;/span&gt;&lt;span&gt;2501&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt;&lt;span&gt;(item)
&lt;/span&gt;&lt;span&gt;2502&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2503&lt;/span&gt;         item-&amp;gt;type=&lt;span&gt;cJSON_Array;
&lt;/span&gt;&lt;span&gt;2504&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2505&lt;/span&gt; 
&lt;span&gt;2506&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; item;
&lt;/span&gt;&lt;span&gt;2507&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2508&lt;/span&gt; 
&lt;span&gt;2509&lt;/span&gt; CJSON_PUBLIC(cJSON *) cJSON_CreateObject(&lt;span&gt;void&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2510&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2511&lt;/span&gt;     cJSON *item = cJSON_New_Item(&amp;amp;&lt;span&gt;global_hooks);
&lt;/span&gt;&lt;span&gt;2512&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt;&lt;span&gt; (item)
&lt;/span&gt;&lt;span&gt;2513&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2514&lt;/span&gt;         item-&amp;gt;type =&lt;span&gt; cJSON_Object;
&lt;/span&gt;&lt;span&gt;2515&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2516&lt;/span&gt; 
&lt;span&gt;2517&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; item;
&lt;/span&gt;&lt;span&gt;2518&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2519&lt;/span&gt; 
&lt;span&gt;2520&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Create Arrays: &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;2521&lt;/span&gt; CJSON_PUBLIC(cJSON *) cJSON_CreateIntArray(&lt;span&gt;const&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; *numbers, &lt;span&gt;int&lt;/span&gt;&lt;span&gt; count)
&lt;/span&gt;&lt;span&gt;2522&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2523&lt;/span&gt;     size_t i = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2524&lt;/span&gt;     cJSON *n =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2525&lt;/span&gt;     cJSON *p =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2526&lt;/span&gt;     cJSON *a =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2527&lt;/span&gt; 
&lt;span&gt;2528&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; ((count &amp;lt; &lt;span&gt;0&lt;/span&gt;) || (numbers ==&lt;span&gt; NULL))
&lt;/span&gt;&lt;span&gt;2529&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2530&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2531&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2532&lt;/span&gt; 
&lt;span&gt;2533&lt;/span&gt;     a =&lt;span&gt; cJSON_CreateArray();
&lt;/span&gt;&lt;span&gt;2534&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt;(i = &lt;span&gt;0&lt;/span&gt;; a &amp;amp;&amp;amp; (i &amp;lt; (size_t)count); i++&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2535&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2536&lt;/span&gt;         n =&lt;span&gt; cJSON_CreateNumber(numbers[i]);
&lt;/span&gt;&lt;span&gt;2537&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;n)
&lt;/span&gt;&lt;span&gt;2538&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;2539&lt;/span&gt; &lt;span&gt;            cJSON_Delete(a);
&lt;/span&gt;&lt;span&gt;2540&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2541&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;2542&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt;(!&lt;span&gt;i)
&lt;/span&gt;&lt;span&gt;2543&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;2544&lt;/span&gt;             a-&amp;gt;child =&lt;span&gt; n;
&lt;/span&gt;&lt;span&gt;2545&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;2546&lt;/span&gt;         &lt;span&gt;else&lt;/span&gt;
&lt;span&gt;2547&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;2548&lt;/span&gt; &lt;span&gt;            suffix_object(p, n);
&lt;/span&gt;&lt;span&gt;2549&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;2550&lt;/span&gt;         p =&lt;span&gt; n;
&lt;/span&gt;&lt;span&gt;2551&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2552&lt;/span&gt; 
&lt;span&gt;2553&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; a;
&lt;/span&gt;&lt;span&gt;2554&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2555&lt;/span&gt; 
&lt;span&gt;2556&lt;/span&gt; CJSON_PUBLIC(cJSON *) cJSON_CreateFloatArray(&lt;span&gt;const&lt;/span&gt; &lt;span&gt;float&lt;/span&gt; *numbers, &lt;span&gt;int&lt;/span&gt;&lt;span&gt; count)
&lt;/span&gt;&lt;span&gt;2557&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2558&lt;/span&gt;     size_t i = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2559&lt;/span&gt;     cJSON *n =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2560&lt;/span&gt;     cJSON *p =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2561&lt;/span&gt;     cJSON *a =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2562&lt;/span&gt; 
&lt;span&gt;2563&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; ((count &amp;lt; &lt;span&gt;0&lt;/span&gt;) || (numbers ==&lt;span&gt; NULL))
&lt;/span&gt;&lt;span&gt;2564&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2565&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2566&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2567&lt;/span&gt; 
&lt;span&gt;2568&lt;/span&gt;     a =&lt;span&gt; cJSON_CreateArray();
&lt;/span&gt;&lt;span&gt;2569&lt;/span&gt; 
&lt;span&gt;2570&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt;(i = &lt;span&gt;0&lt;/span&gt;; a &amp;amp;&amp;amp; (i &amp;lt; (size_t)count); i++&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2571&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2572&lt;/span&gt;         n = cJSON_CreateNumber((&lt;span&gt;double&lt;/span&gt;&lt;span&gt;)numbers[i]);
&lt;/span&gt;&lt;span&gt;2573&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt;(!&lt;span&gt;n)
&lt;/span&gt;&lt;span&gt;2574&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;2575&lt;/span&gt; &lt;span&gt;            cJSON_Delete(a);
&lt;/span&gt;&lt;span&gt;2576&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2577&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;2578&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt;(!&lt;span&gt;i)
&lt;/span&gt;&lt;span&gt;2579&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;2580&lt;/span&gt;             a-&amp;gt;child =&lt;span&gt; n;
&lt;/span&gt;&lt;span&gt;2581&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;2582&lt;/span&gt;         &lt;span&gt;else&lt;/span&gt;
&lt;span&gt;2583&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;2584&lt;/span&gt; &lt;span&gt;            suffix_object(p, n);
&lt;/span&gt;&lt;span&gt;2585&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;2586&lt;/span&gt;         p =&lt;span&gt; n;
&lt;/span&gt;&lt;span&gt;2587&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2588&lt;/span&gt; 
&lt;span&gt;2589&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; a;
&lt;/span&gt;&lt;span&gt;2590&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2591&lt;/span&gt; 
&lt;span&gt;2592&lt;/span&gt; CJSON_PUBLIC(cJSON *) cJSON_CreateDoubleArray(&lt;span&gt;const&lt;/span&gt; &lt;span&gt;double&lt;/span&gt; *numbers, &lt;span&gt;int&lt;/span&gt;&lt;span&gt; count)
&lt;/span&gt;&lt;span&gt;2593&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2594&lt;/span&gt;     size_t i = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2595&lt;/span&gt;     cJSON *n =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2596&lt;/span&gt;     cJSON *p =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2597&lt;/span&gt;     cJSON *a =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2598&lt;/span&gt; 
&lt;span&gt;2599&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; ((count &amp;lt; &lt;span&gt;0&lt;/span&gt;) || (numbers ==&lt;span&gt; NULL))
&lt;/span&gt;&lt;span&gt;2600&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2601&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2602&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2603&lt;/span&gt; 
&lt;span&gt;2604&lt;/span&gt;     a =&lt;span&gt; cJSON_CreateArray();
&lt;/span&gt;&lt;span&gt;2605&lt;/span&gt; 
&lt;span&gt;2606&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt;(i = &lt;span&gt;0&lt;/span&gt;;a &amp;amp;&amp;amp; (i &amp;lt; (size_t)count); i++&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2607&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2608&lt;/span&gt;         n =&lt;span&gt; cJSON_CreateNumber(numbers[i]);
&lt;/span&gt;&lt;span&gt;2609&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt;(!&lt;span&gt;n)
&lt;/span&gt;&lt;span&gt;2610&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;2611&lt;/span&gt; &lt;span&gt;            cJSON_Delete(a);
&lt;/span&gt;&lt;span&gt;2612&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2613&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;2614&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt;(!&lt;span&gt;i)
&lt;/span&gt;&lt;span&gt;2615&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;2616&lt;/span&gt;             a-&amp;gt;child =&lt;span&gt; n;
&lt;/span&gt;&lt;span&gt;2617&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;2618&lt;/span&gt;         &lt;span&gt;else&lt;/span&gt;
&lt;span&gt;2619&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;2620&lt;/span&gt; &lt;span&gt;            suffix_object(p, n);
&lt;/span&gt;&lt;span&gt;2621&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;2622&lt;/span&gt;         p =&lt;span&gt; n;
&lt;/span&gt;&lt;span&gt;2623&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2624&lt;/span&gt; 
&lt;span&gt;2625&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; a;
&lt;/span&gt;&lt;span&gt;2626&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2627&lt;/span&gt; 
&lt;span&gt;2628&lt;/span&gt; CJSON_PUBLIC(cJSON *) cJSON_CreateStringArray(&lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; *&lt;span&gt;const&lt;/span&gt; *strings, &lt;span&gt;int&lt;/span&gt;&lt;span&gt; count)
&lt;/span&gt;&lt;span&gt;2629&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2630&lt;/span&gt;     size_t i = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2631&lt;/span&gt;     cJSON *n =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2632&lt;/span&gt;     cJSON *p =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2633&lt;/span&gt;     cJSON *a =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2634&lt;/span&gt; 
&lt;span&gt;2635&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; ((count &amp;lt; &lt;span&gt;0&lt;/span&gt;) || (strings ==&lt;span&gt; NULL))
&lt;/span&gt;&lt;span&gt;2636&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2637&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2638&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2639&lt;/span&gt; 
&lt;span&gt;2640&lt;/span&gt;     a =&lt;span&gt; cJSON_CreateArray();
&lt;/span&gt;&lt;span&gt;2641&lt;/span&gt; 
&lt;span&gt;2642&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; (i = &lt;span&gt;0&lt;/span&gt;; a &amp;amp;&amp;amp; (i &amp;lt; (size_t)count); i++&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2643&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2644&lt;/span&gt;         n =&lt;span&gt; cJSON_CreateString(strings[i]);
&lt;/span&gt;&lt;span&gt;2645&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt;(!&lt;span&gt;n)
&lt;/span&gt;&lt;span&gt;2646&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;2647&lt;/span&gt; &lt;span&gt;            cJSON_Delete(a);
&lt;/span&gt;&lt;span&gt;2648&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2649&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;2650&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt;(!&lt;span&gt;i)
&lt;/span&gt;&lt;span&gt;2651&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;2652&lt;/span&gt;             a-&amp;gt;child =&lt;span&gt; n;
&lt;/span&gt;&lt;span&gt;2653&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;2654&lt;/span&gt;         &lt;span&gt;else&lt;/span&gt;
&lt;span&gt;2655&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;2656&lt;/span&gt; &lt;span&gt;            suffix_object(p,n);
&lt;/span&gt;&lt;span&gt;2657&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;2658&lt;/span&gt;         p =&lt;span&gt; n;
&lt;/span&gt;&lt;span&gt;2659&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2660&lt;/span&gt; 
&lt;span&gt;2661&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; a;
&lt;/span&gt;&lt;span&gt;2662&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2663&lt;/span&gt; 
&lt;span&gt;2664&lt;/span&gt; &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Duplication &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;2665&lt;/span&gt; CJSON_PUBLIC(cJSON *) cJSON_Duplicate(&lt;span&gt;const&lt;/span&gt; cJSON *&lt;span&gt;item, cJSON_bool recurse)
&lt;/span&gt;&lt;span&gt;2666&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2667&lt;/span&gt;     cJSON *newitem =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2668&lt;/span&gt;     cJSON *child =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2669&lt;/span&gt;     cJSON *next =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2670&lt;/span&gt;     cJSON *newchild =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2671&lt;/span&gt; 
&lt;span&gt;2672&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Bail on bad ptr &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;2673&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;item)
&lt;/span&gt;&lt;span&gt;2674&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2675&lt;/span&gt;         &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; fail;
&lt;/span&gt;&lt;span&gt;2676&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2677&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Create new item &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;2678&lt;/span&gt;     newitem = cJSON_New_Item(&amp;amp;&lt;span&gt;global_hooks);
&lt;/span&gt;&lt;span&gt;2679&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;newitem)
&lt;/span&gt;&lt;span&gt;2680&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2681&lt;/span&gt;         &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; fail;
&lt;/span&gt;&lt;span&gt;2682&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2683&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Copy over all vars &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;2684&lt;/span&gt;     newitem-&amp;gt;type = item-&amp;gt;type &amp;amp; (~&lt;span&gt;cJSON_IsReference);
&lt;/span&gt;&lt;span&gt;2685&lt;/span&gt;     newitem-&amp;gt;valueint = item-&amp;gt;&lt;span&gt;valueint;
&lt;/span&gt;&lt;span&gt;2686&lt;/span&gt;     newitem-&amp;gt;valuedouble = item-&amp;gt;&lt;span&gt;valuedouble;
&lt;/span&gt;&lt;span&gt;2687&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (item-&amp;gt;&lt;span&gt;valuestring)
&lt;/span&gt;&lt;span&gt;2688&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2689&lt;/span&gt;         newitem-&amp;gt;valuestring = (&lt;span&gt;char&lt;/span&gt;*)cJSON_strdup((unsigned &lt;span&gt;char&lt;/span&gt;*)item-&amp;gt;valuestring, &amp;amp;&lt;span&gt;global_hooks);
&lt;/span&gt;&lt;span&gt;2690&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (!newitem-&amp;gt;&lt;span&gt;valuestring)
&lt;/span&gt;&lt;span&gt;2691&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;2692&lt;/span&gt;             &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; fail;
&lt;/span&gt;&lt;span&gt;2693&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;2694&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2695&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (item-&amp;gt;&lt;span&gt;string&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2696&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2697&lt;/span&gt;         newitem-&amp;gt;&lt;span&gt;string&lt;/span&gt; = (item-&amp;gt;type&amp;amp;cJSON_StringIsConst) ? item-&amp;gt;&lt;span&gt;string&lt;/span&gt; : (&lt;span&gt;char&lt;/span&gt;*)cJSON_strdup((unsigned &lt;span&gt;char&lt;/span&gt;*)item-&amp;gt;&lt;span&gt;string&lt;/span&gt;, &amp;amp;&lt;span&gt;global_hooks);
&lt;/span&gt;&lt;span&gt;2698&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (!newitem-&amp;gt;&lt;span&gt;string&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2699&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;2700&lt;/span&gt;             &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; fail;
&lt;/span&gt;&lt;span&gt;2701&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;2702&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2703&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; If non-recursive, then we're done! &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;2704&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;recurse)
&lt;/span&gt;&lt;span&gt;2705&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2706&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; newitem;
&lt;/span&gt;&lt;span&gt;2707&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2708&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Walk the -&amp;gt;next chain for the child. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;2709&lt;/span&gt;     child = item-&amp;gt;&lt;span&gt;child;
&lt;/span&gt;&lt;span&gt;2710&lt;/span&gt;     &lt;span&gt;while&lt;/span&gt; (child !=&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;2711&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2712&lt;/span&gt;         newchild = cJSON_Duplicate(child, &lt;span&gt;true&lt;/span&gt;); &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Duplicate (with recurse) each item in the -&amp;gt;next chain &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;2713&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;newchild)
&lt;/span&gt;&lt;span&gt;2714&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;2715&lt;/span&gt;             &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; fail;
&lt;/span&gt;&lt;span&gt;2716&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;2717&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (next !=&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;2718&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;2719&lt;/span&gt;             &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; If newitem-&amp;gt;child already set, then crosswire -&amp;gt;prev and -&amp;gt;next and move on &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;2720&lt;/span&gt;             next-&amp;gt;next =&lt;span&gt; newchild;
&lt;/span&gt;&lt;span&gt;2721&lt;/span&gt;             newchild-&amp;gt;prev =&lt;span&gt; next;
&lt;/span&gt;&lt;span&gt;2722&lt;/span&gt;             next =&lt;span&gt; newchild;
&lt;/span&gt;&lt;span&gt;2723&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;2724&lt;/span&gt;         &lt;span&gt;else&lt;/span&gt;
&lt;span&gt;2725&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;2726&lt;/span&gt;             &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Set newitem-&amp;gt;child and move to it &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;2727&lt;/span&gt;             newitem-&amp;gt;child =&lt;span&gt; newchild;
&lt;/span&gt;&lt;span&gt;2728&lt;/span&gt;             next =&lt;span&gt; newchild;
&lt;/span&gt;&lt;span&gt;2729&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;2730&lt;/span&gt;         child = child-&amp;gt;&lt;span&gt;next;
&lt;/span&gt;&lt;span&gt;2731&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2732&lt;/span&gt; 
&lt;span&gt;2733&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; newitem;
&lt;/span&gt;&lt;span&gt;2734&lt;/span&gt; 
&lt;span&gt;2735&lt;/span&gt; &lt;span&gt;fail:
&lt;/span&gt;&lt;span&gt;2736&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (newitem !=&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;2737&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2738&lt;/span&gt; &lt;span&gt;        cJSON_Delete(newitem);
&lt;/span&gt;&lt;span&gt;2739&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2740&lt;/span&gt; 
&lt;span&gt;2741&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;2742&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2743&lt;/span&gt; 
&lt;span&gt;2744&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; skip_oneline_comment(&lt;span&gt;char&lt;/span&gt; **&lt;span&gt;input)
&lt;/span&gt;&lt;span&gt;2745&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2746&lt;/span&gt;     *input += static_strlen(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;2747&lt;/span&gt; 
&lt;span&gt;2748&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; (; (*input)[&lt;span&gt;0&lt;/span&gt;] != &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\0&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;; ++(*&lt;span&gt;input))
&lt;/span&gt;&lt;span&gt;2749&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2750&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; ((*input)[&lt;span&gt;0&lt;/span&gt;] == &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;) {
&lt;/span&gt;&lt;span&gt;2751&lt;/span&gt;             *input += static_strlen(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;2752&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2753&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;2754&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2755&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2756&lt;/span&gt; 
&lt;span&gt;2757&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; skip_multiline_comment(&lt;span&gt;char&lt;/span&gt; **&lt;span&gt;input)
&lt;/span&gt;&lt;span&gt;2758&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2759&lt;/span&gt;     *input += static_strlen(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;2760&lt;/span&gt; 
&lt;span&gt;2761&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; (; (*input)[&lt;span&gt;0&lt;/span&gt;] != &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\0&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;; ++(*&lt;span&gt;input))
&lt;/span&gt;&lt;span&gt;2762&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2763&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (((*input)[&lt;span&gt;0&lt;/span&gt;] == &lt;span&gt;'&lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;) &amp;amp;&amp;amp; ((*input)[&lt;span&gt;1&lt;/span&gt;] == &lt;span&gt;'&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;2764&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;2765&lt;/span&gt;             *input += static_strlen(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;2766&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2767&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;2768&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2769&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2770&lt;/span&gt; 
&lt;span&gt;2771&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; minify_string(&lt;span&gt;char&lt;/span&gt; **input, &lt;span&gt;char&lt;/span&gt; **&lt;span&gt;output) {
&lt;/span&gt;&lt;span&gt;2772&lt;/span&gt;     (*output)[&lt;span&gt;0&lt;/span&gt;] = (*input)[&lt;span&gt;0&lt;/span&gt;&lt;span&gt;];
&lt;/span&gt;&lt;span&gt;2773&lt;/span&gt;     *input += static_strlen(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;2774&lt;/span&gt;     *output += static_strlen(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;2775&lt;/span&gt; 
&lt;span&gt;2776&lt;/span&gt; 
&lt;span&gt;2777&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; (; (*input)[&lt;span&gt;0&lt;/span&gt;] != &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\0&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;; (&lt;span&gt;void&lt;/span&gt;)++(*input), ++(*&lt;span&gt;output)) {
&lt;/span&gt;&lt;span&gt;2778&lt;/span&gt;         (*output)[&lt;span&gt;0&lt;/span&gt;] = (*input)[&lt;span&gt;0&lt;/span&gt;&lt;span&gt;];
&lt;/span&gt;&lt;span&gt;2779&lt;/span&gt; 
&lt;span&gt;2780&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; ((*input)[&lt;span&gt;0&lt;/span&gt;] == &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;) {
&lt;/span&gt;&lt;span&gt;2781&lt;/span&gt;             (*output)[&lt;span&gt;0&lt;/span&gt;] = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2782&lt;/span&gt;             *input += static_strlen(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;2783&lt;/span&gt;             *output += static_strlen(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;2784&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2785&lt;/span&gt;         } &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (((*input)[&lt;span&gt;0&lt;/span&gt;] == &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\\&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;) &amp;amp;&amp;amp; ((*input)[&lt;span&gt;1&lt;/span&gt;] == &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)) {
&lt;/span&gt;&lt;span&gt;2786&lt;/span&gt;             (*output)[&lt;span&gt;1&lt;/span&gt;] = (*input)[&lt;span&gt;1&lt;/span&gt;&lt;span&gt;];
&lt;/span&gt;&lt;span&gt;2787&lt;/span&gt;             *input += static_strlen(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;2788&lt;/span&gt;             *output += static_strlen(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;2789&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;2790&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2791&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2792&lt;/span&gt; 
&lt;span&gt;2793&lt;/span&gt; CJSON_PUBLIC(&lt;span&gt;void&lt;/span&gt;) cJSON_Minify(&lt;span&gt;char&lt;/span&gt; *&lt;span&gt;json)
&lt;/span&gt;&lt;span&gt;2794&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2795&lt;/span&gt;     &lt;span&gt;char&lt;/span&gt; *into =&lt;span&gt; json;
&lt;/span&gt;&lt;span&gt;2796&lt;/span&gt; 
&lt;span&gt;2797&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (json ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;2798&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2799&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2800&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2801&lt;/span&gt; 
&lt;span&gt;2802&lt;/span&gt;     &lt;span&gt;while&lt;/span&gt; (json[&lt;span&gt;0&lt;/span&gt;] != &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\0&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2803&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2804&lt;/span&gt;         &lt;span&gt;switch&lt;/span&gt; (json[&lt;span&gt;0&lt;/span&gt;&lt;span&gt;])
&lt;/span&gt;&lt;span&gt;2805&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;2806&lt;/span&gt;             &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt;2807&lt;/span&gt;             &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\t&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt;2808&lt;/span&gt;             &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\r&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt;2809&lt;/span&gt;             &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt;2810&lt;/span&gt;                 json++&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2811&lt;/span&gt;                 &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2812&lt;/span&gt; 
&lt;span&gt;2813&lt;/span&gt;             &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt;2814&lt;/span&gt;                 &lt;span&gt;if&lt;/span&gt; (json[&lt;span&gt;1&lt;/span&gt;] == &lt;span&gt;'&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2815&lt;/span&gt; &lt;span&gt;                {
&lt;/span&gt;&lt;span&gt;2816&lt;/span&gt;                     skip_oneline_comment(&amp;amp;&lt;span&gt;json);
&lt;/span&gt;&lt;span&gt;2817&lt;/span&gt; &lt;span&gt;                }
&lt;/span&gt;&lt;span&gt;2818&lt;/span&gt;                 &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (json[&lt;span&gt;1&lt;/span&gt;] == &lt;span&gt;'&lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2819&lt;/span&gt; &lt;span&gt;                {
&lt;/span&gt;&lt;span&gt;2820&lt;/span&gt;                     skip_multiline_comment(&amp;amp;&lt;span&gt;json);
&lt;/span&gt;&lt;span&gt;2821&lt;/span&gt;                 } &lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
&lt;/span&gt;&lt;span&gt;2822&lt;/span&gt;                     json++&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2823&lt;/span&gt; &lt;span&gt;                }
&lt;/span&gt;&lt;span&gt;2824&lt;/span&gt;                 &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2825&lt;/span&gt; 
&lt;span&gt;2826&lt;/span&gt;             &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\&quot;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt;2827&lt;/span&gt;                 minify_string(&amp;amp;json, (&lt;span&gt;char&lt;/span&gt;**)&amp;amp;&lt;span&gt;into);
&lt;/span&gt;&lt;span&gt;2828&lt;/span&gt;                 &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2829&lt;/span&gt; 
&lt;span&gt;2830&lt;/span&gt;             &lt;span&gt;default&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt;2831&lt;/span&gt;                 into[&lt;span&gt;0&lt;/span&gt;] = json[&lt;span&gt;0&lt;/span&gt;&lt;span&gt;];
&lt;/span&gt;&lt;span&gt;2832&lt;/span&gt;                 json++&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2833&lt;/span&gt;                 into++&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2834&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;2835&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2836&lt;/span&gt; 
&lt;span&gt;2837&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; and null-terminate. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;2838&lt;/span&gt;     *into = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\0&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2839&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2840&lt;/span&gt; 
&lt;span&gt;2841&lt;/span&gt; CJSON_PUBLIC(cJSON_bool) cJSON_IsInvalid(&lt;span&gt;const&lt;/span&gt; cJSON * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; item)
&lt;/span&gt;&lt;span&gt;2842&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2843&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (item ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;2844&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2845&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2846&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2847&lt;/span&gt; 
&lt;span&gt;2848&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; (item-&amp;gt;type &amp;amp; &lt;span&gt;0xFF&lt;/span&gt;) ==&lt;span&gt; cJSON_Invalid;
&lt;/span&gt;&lt;span&gt;2849&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2850&lt;/span&gt; 
&lt;span&gt;2851&lt;/span&gt; CJSON_PUBLIC(cJSON_bool) cJSON_IsFalse(&lt;span&gt;const&lt;/span&gt; cJSON * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; item)
&lt;/span&gt;&lt;span&gt;2852&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2853&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (item ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;2854&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2855&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2856&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2857&lt;/span&gt; 
&lt;span&gt;2858&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; (item-&amp;gt;type &amp;amp; &lt;span&gt;0xFF&lt;/span&gt;) ==&lt;span&gt; cJSON_False;
&lt;/span&gt;&lt;span&gt;2859&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2860&lt;/span&gt; 
&lt;span&gt;2861&lt;/span&gt; CJSON_PUBLIC(cJSON_bool) cJSON_IsTrue(&lt;span&gt;const&lt;/span&gt; cJSON * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; item)
&lt;/span&gt;&lt;span&gt;2862&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2863&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (item ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;2864&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2865&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2866&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2867&lt;/span&gt; 
&lt;span&gt;2868&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; (item-&amp;gt;type &amp;amp; &lt;span&gt;0xff&lt;/span&gt;) ==&lt;span&gt; cJSON_True;
&lt;/span&gt;&lt;span&gt;2869&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2870&lt;/span&gt; 
&lt;span&gt;2871&lt;/span&gt; 
&lt;span&gt;2872&lt;/span&gt; CJSON_PUBLIC(cJSON_bool) cJSON_IsBool(&lt;span&gt;const&lt;/span&gt; cJSON * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; item)
&lt;/span&gt;&lt;span&gt;2873&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2874&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (item ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;2875&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2876&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2877&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2878&lt;/span&gt; 
&lt;span&gt;2879&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; (item-&amp;gt;type &amp;amp; (cJSON_True | cJSON_False)) != &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2880&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2881&lt;/span&gt; CJSON_PUBLIC(cJSON_bool) cJSON_IsNull(&lt;span&gt;const&lt;/span&gt; cJSON * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; item)
&lt;/span&gt;&lt;span&gt;2882&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2883&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (item ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;2884&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2885&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2886&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2887&lt;/span&gt; 
&lt;span&gt;2888&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; (item-&amp;gt;type &amp;amp; &lt;span&gt;0xFF&lt;/span&gt;) ==&lt;span&gt; cJSON_NULL;
&lt;/span&gt;&lt;span&gt;2889&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2890&lt;/span&gt; 
&lt;span&gt;2891&lt;/span&gt; CJSON_PUBLIC(cJSON_bool) cJSON_IsNumber(&lt;span&gt;const&lt;/span&gt; cJSON * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; item)
&lt;/span&gt;&lt;span&gt;2892&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2893&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (item ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;2894&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2895&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2896&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2897&lt;/span&gt; 
&lt;span&gt;2898&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; (item-&amp;gt;type &amp;amp; &lt;span&gt;0xFF&lt;/span&gt;) ==&lt;span&gt; cJSON_Number;
&lt;/span&gt;&lt;span&gt;2899&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2900&lt;/span&gt; 
&lt;span&gt;2901&lt;/span&gt; CJSON_PUBLIC(cJSON_bool) cJSON_IsString(&lt;span&gt;const&lt;/span&gt; cJSON * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; item)
&lt;/span&gt;&lt;span&gt;2902&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2903&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (item ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;2904&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2905&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2906&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2907&lt;/span&gt; 
&lt;span&gt;2908&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; (item-&amp;gt;type &amp;amp; &lt;span&gt;0xFF&lt;/span&gt;) ==&lt;span&gt; cJSON_String;
&lt;/span&gt;&lt;span&gt;2909&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2910&lt;/span&gt; 
&lt;span&gt;2911&lt;/span&gt; CJSON_PUBLIC(cJSON_bool) cJSON_IsArray(&lt;span&gt;const&lt;/span&gt; cJSON * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; item)
&lt;/span&gt;&lt;span&gt;2912&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2913&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (item ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;2914&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2915&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2916&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2917&lt;/span&gt; 
&lt;span&gt;2918&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; (item-&amp;gt;type &amp;amp; &lt;span&gt;0xFF&lt;/span&gt;) ==&lt;span&gt; cJSON_Array;
&lt;/span&gt;&lt;span&gt;2919&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2920&lt;/span&gt; 
&lt;span&gt;2921&lt;/span&gt; CJSON_PUBLIC(cJSON_bool) cJSON_IsObject(&lt;span&gt;const&lt;/span&gt; cJSON * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; item)
&lt;/span&gt;&lt;span&gt;2922&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2923&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (item ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;2924&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2925&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2926&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2927&lt;/span&gt; 
&lt;span&gt;2928&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; (item-&amp;gt;type &amp;amp; &lt;span&gt;0xFF&lt;/span&gt;) ==&lt;span&gt; cJSON_Object;
&lt;/span&gt;&lt;span&gt;2929&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2930&lt;/span&gt; 
&lt;span&gt;2931&lt;/span&gt; CJSON_PUBLIC(cJSON_bool) cJSON_IsRaw(&lt;span&gt;const&lt;/span&gt; cJSON * &lt;span&gt;const&lt;/span&gt;&lt;span&gt; item)
&lt;/span&gt;&lt;span&gt;2932&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2933&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (item ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;2934&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2935&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2936&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2937&lt;/span&gt; 
&lt;span&gt;2938&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; (item-&amp;gt;type &amp;amp; &lt;span&gt;0xFF&lt;/span&gt;) ==&lt;span&gt; cJSON_Raw;
&lt;/span&gt;&lt;span&gt;2939&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;2940&lt;/span&gt; 
&lt;span&gt;2941&lt;/span&gt; CJSON_PUBLIC(cJSON_bool) cJSON_Compare(&lt;span&gt;const&lt;/span&gt; cJSON * &lt;span&gt;const&lt;/span&gt; a, &lt;span&gt;const&lt;/span&gt; cJSON * &lt;span&gt;const&lt;/span&gt; b, &lt;span&gt;const&lt;/span&gt;&lt;span&gt; cJSON_bool case_sensitive)
&lt;/span&gt;&lt;span&gt;2942&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2943&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; ((a == NULL) || (b == NULL) || ((a-&amp;gt;type &amp;amp; &lt;span&gt;0xFF&lt;/span&gt;) != (b-&amp;gt;type &amp;amp; &lt;span&gt;0xFF&lt;/span&gt;)) ||&lt;span&gt; cJSON_IsInvalid(a))
&lt;/span&gt;&lt;span&gt;2944&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2945&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2946&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2947&lt;/span&gt; 
&lt;span&gt;2948&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; check if type is valid &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;2949&lt;/span&gt;     &lt;span&gt;switch&lt;/span&gt; (a-&amp;gt;type &amp;amp; &lt;span&gt;0xFF&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2950&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2951&lt;/span&gt;         &lt;span&gt;case&lt;/span&gt;&lt;span&gt; cJSON_False:
&lt;/span&gt;&lt;span&gt;2952&lt;/span&gt;         &lt;span&gt;case&lt;/span&gt;&lt;span&gt; cJSON_True:
&lt;/span&gt;&lt;span&gt;2953&lt;/span&gt;         &lt;span&gt;case&lt;/span&gt;&lt;span&gt; cJSON_NULL:
&lt;/span&gt;&lt;span&gt;2954&lt;/span&gt;         &lt;span&gt;case&lt;/span&gt;&lt;span&gt; cJSON_Number:
&lt;/span&gt;&lt;span&gt;2955&lt;/span&gt;         &lt;span&gt;case&lt;/span&gt;&lt;span&gt; cJSON_String:
&lt;/span&gt;&lt;span&gt;2956&lt;/span&gt;         &lt;span&gt;case&lt;/span&gt;&lt;span&gt; cJSON_Raw:
&lt;/span&gt;&lt;span&gt;2957&lt;/span&gt;         &lt;span&gt;case&lt;/span&gt;&lt;span&gt; cJSON_Array:
&lt;/span&gt;&lt;span&gt;2958&lt;/span&gt;         &lt;span&gt;case&lt;/span&gt;&lt;span&gt; cJSON_Object:
&lt;/span&gt;&lt;span&gt;2959&lt;/span&gt;             &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2960&lt;/span&gt; 
&lt;span&gt;2961&lt;/span&gt;         &lt;span&gt;default&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt;2962&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2963&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2964&lt;/span&gt; 
&lt;span&gt;2965&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; identical objects are equal &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;2966&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; (a ==&lt;span&gt; b)
&lt;/span&gt;&lt;span&gt;2967&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2968&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2969&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;2970&lt;/span&gt; 
&lt;span&gt;2971&lt;/span&gt;     &lt;span&gt;switch&lt;/span&gt; (a-&amp;gt;type &amp;amp; &lt;span&gt;0xFF&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2972&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;2973&lt;/span&gt;         &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; in these cases and equal type is enough &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;2974&lt;/span&gt;         &lt;span&gt;case&lt;/span&gt;&lt;span&gt; cJSON_False:
&lt;/span&gt;&lt;span&gt;2975&lt;/span&gt;         &lt;span&gt;case&lt;/span&gt;&lt;span&gt; cJSON_True:
&lt;/span&gt;&lt;span&gt;2976&lt;/span&gt;         &lt;span&gt;case&lt;/span&gt;&lt;span&gt; cJSON_NULL:
&lt;/span&gt;&lt;span&gt;2977&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2978&lt;/span&gt; 
&lt;span&gt;2979&lt;/span&gt;         &lt;span&gt;case&lt;/span&gt;&lt;span&gt; cJSON_Number:
&lt;/span&gt;&lt;span&gt;2980&lt;/span&gt;             &lt;span&gt;if&lt;/span&gt; (compare_double(a-&amp;gt;valuedouble, b-&amp;gt;&lt;span&gt;valuedouble))
&lt;/span&gt;&lt;span&gt;2981&lt;/span&gt; &lt;span&gt;            {
&lt;/span&gt;&lt;span&gt;2982&lt;/span&gt;                 &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2983&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;2984&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2985&lt;/span&gt; 
&lt;span&gt;2986&lt;/span&gt;         &lt;span&gt;case&lt;/span&gt;&lt;span&gt; cJSON_String:
&lt;/span&gt;&lt;span&gt;2987&lt;/span&gt;         &lt;span&gt;case&lt;/span&gt;&lt;span&gt; cJSON_Raw:
&lt;/span&gt;&lt;span&gt;2988&lt;/span&gt;             &lt;span&gt;if&lt;/span&gt; ((a-&amp;gt;valuestring == NULL) || (b-&amp;gt;valuestring ==&lt;span&gt; NULL))
&lt;/span&gt;&lt;span&gt;2989&lt;/span&gt; &lt;span&gt;            {
&lt;/span&gt;&lt;span&gt;2990&lt;/span&gt;                 &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2991&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;2992&lt;/span&gt;             &lt;span&gt;if&lt;/span&gt; (strcmp(a-&amp;gt;valuestring, b-&amp;gt;valuestring) == &lt;span&gt;0&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2993&lt;/span&gt; &lt;span&gt;            {
&lt;/span&gt;&lt;span&gt;2994&lt;/span&gt;                 &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2995&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;2996&lt;/span&gt; 
&lt;span&gt;2997&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;2998&lt;/span&gt; 
&lt;span&gt;2999&lt;/span&gt;         &lt;span&gt;case&lt;/span&gt;&lt;span&gt; cJSON_Array:
&lt;/span&gt;&lt;span&gt;3000&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;3001&lt;/span&gt;             cJSON *a_element = a-&amp;gt;&lt;span&gt;child;
&lt;/span&gt;&lt;span&gt;3002&lt;/span&gt;             cJSON *b_element = b-&amp;gt;&lt;span&gt;child;
&lt;/span&gt;&lt;span&gt;3003&lt;/span&gt; 
&lt;span&gt;3004&lt;/span&gt;             &lt;span&gt;for&lt;/span&gt; (; (a_element != NULL) &amp;amp;&amp;amp; (b_element !=&lt;span&gt; NULL);)
&lt;/span&gt;&lt;span&gt;3005&lt;/span&gt; &lt;span&gt;            {
&lt;/span&gt;&lt;span&gt;3006&lt;/span&gt;                 &lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;cJSON_Compare(a_element, b_element, case_sensitive))
&lt;/span&gt;&lt;span&gt;3007&lt;/span&gt; &lt;span&gt;                {
&lt;/span&gt;&lt;span&gt;3008&lt;/span&gt;                     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;3009&lt;/span&gt; &lt;span&gt;                }
&lt;/span&gt;&lt;span&gt;3010&lt;/span&gt; 
&lt;span&gt;3011&lt;/span&gt;                 a_element = a_element-&amp;gt;&lt;span&gt;next;
&lt;/span&gt;&lt;span&gt;3012&lt;/span&gt;                 b_element = b_element-&amp;gt;&lt;span&gt;next;
&lt;/span&gt;&lt;span&gt;3013&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;3014&lt;/span&gt; 
&lt;span&gt;3015&lt;/span&gt;             &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; one of the arrays is longer than the other &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;3016&lt;/span&gt;             &lt;span&gt;if&lt;/span&gt; (a_element !=&lt;span&gt; b_element) {
&lt;/span&gt;&lt;span&gt;3017&lt;/span&gt;                 &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;3018&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;3019&lt;/span&gt; 
&lt;span&gt;3020&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;3021&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;3022&lt;/span&gt; 
&lt;span&gt;3023&lt;/span&gt;         &lt;span&gt;case&lt;/span&gt;&lt;span&gt; cJSON_Object:
&lt;/span&gt;&lt;span&gt;3024&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;3025&lt;/span&gt;             cJSON *a_element =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;3026&lt;/span&gt;             cJSON *b_element =&lt;span&gt; NULL;
&lt;/span&gt;&lt;span&gt;3027&lt;/span&gt; &lt;span&gt;            cJSON_ArrayForEach(a_element, a)
&lt;/span&gt;&lt;span&gt;3028&lt;/span&gt; &lt;span&gt;            {
&lt;/span&gt;&lt;span&gt;3029&lt;/span&gt;                 &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; TODO This has O(n^2) runtime, which is horrible! &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;3030&lt;/span&gt;                 b_element = get_object_item(b, a_element-&amp;gt;&lt;span&gt;string&lt;/span&gt;&lt;span&gt;, case_sensitive);
&lt;/span&gt;&lt;span&gt;3031&lt;/span&gt;                 &lt;span&gt;if&lt;/span&gt; (b_element ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;3032&lt;/span&gt; &lt;span&gt;                {
&lt;/span&gt;&lt;span&gt;3033&lt;/span&gt;                     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;3034&lt;/span&gt; &lt;span&gt;                }
&lt;/span&gt;&lt;span&gt;3035&lt;/span&gt; 
&lt;span&gt;3036&lt;/span&gt;                 &lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;cJSON_Compare(a_element, b_element, case_sensitive))
&lt;/span&gt;&lt;span&gt;3037&lt;/span&gt; &lt;span&gt;                {
&lt;/span&gt;&lt;span&gt;3038&lt;/span&gt;                     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;3039&lt;/span&gt; &lt;span&gt;                }
&lt;/span&gt;&lt;span&gt;3040&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;3041&lt;/span&gt; 
&lt;span&gt;3042&lt;/span&gt;             &lt;span&gt;/*&lt;/span&gt;&lt;span&gt; doing this twice, once on a and b to prevent true comparison if a subset of b
&lt;/span&gt;&lt;span&gt;3043&lt;/span&gt; &lt;span&gt;             * TODO: Do this the proper way, this is just a fix for now &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;3044&lt;/span&gt; &lt;span&gt;            cJSON_ArrayForEach(b_element, b)
&lt;/span&gt;&lt;span&gt;3045&lt;/span&gt; &lt;span&gt;            {
&lt;/span&gt;&lt;span&gt;3046&lt;/span&gt;                 a_element = get_object_item(a, b_element-&amp;gt;&lt;span&gt;string&lt;/span&gt;&lt;span&gt;, case_sensitive);
&lt;/span&gt;&lt;span&gt;3047&lt;/span&gt;                 &lt;span&gt;if&lt;/span&gt; (a_element ==&lt;span&gt; NULL)
&lt;/span&gt;&lt;span&gt;3048&lt;/span&gt; &lt;span&gt;                {
&lt;/span&gt;&lt;span&gt;3049&lt;/span&gt;                     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;3050&lt;/span&gt; &lt;span&gt;                }
&lt;/span&gt;&lt;span&gt;3051&lt;/span&gt; 
&lt;span&gt;3052&lt;/span&gt;                 &lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;cJSON_Compare(b_element, a_element, case_sensitive))
&lt;/span&gt;&lt;span&gt;3053&lt;/span&gt; &lt;span&gt;                {
&lt;/span&gt;&lt;span&gt;3054&lt;/span&gt;                     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;3055&lt;/span&gt; &lt;span&gt;                }
&lt;/span&gt;&lt;span&gt;3056&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;3057&lt;/span&gt; 
&lt;span&gt;3058&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;3059&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;3060&lt;/span&gt; 
&lt;span&gt;3061&lt;/span&gt;         &lt;span&gt;default&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt;3062&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;3063&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;3064&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;3065&lt;/span&gt; 
&lt;span&gt;3066&lt;/span&gt; CJSON_PUBLIC(&lt;span&gt;void&lt;/span&gt; *&lt;span&gt;) cJSON_malloc(size_t size)
&lt;/span&gt;&lt;span&gt;3067&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;3068&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; global_hooks.allocate(size);
&lt;/span&gt;&lt;span&gt;3069&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;3070&lt;/span&gt; 
&lt;span&gt;3071&lt;/span&gt; CJSON_PUBLIC(&lt;span&gt;void&lt;/span&gt;) cJSON_free(&lt;span&gt;void&lt;/span&gt; *&lt;span&gt;object&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;3072&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;3073&lt;/span&gt;     global_hooks.deallocate(&lt;span&gt;object&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;3074&lt;/span&gt; }
&lt;/pre&gt;</description>
<pubDate>Fri, 05 Jun 2020 17:55:00 +0000</pubDate>
<dc:creator>ä¸œå°ä¸œ</dc:creator>
<og:description>ANSI Cä¸­çš„è¶…è½»é‡çº§JSONè§£æå™¨ JSONï¼ˆJavaScriptå¯¹è±¡è¡¨ç¤ºæ³•ï¼‰æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚äººç±»æ˜“äºé˜…è¯»å’Œä¹¦å†™ã€‚æœºå™¨å¾ˆå®¹æ˜“è§£æå’Œç”Ÿæˆã€‚å®ƒåŸºäºJavaScriptç¼–ç¨‹è¯­è¨€æ ‡å‡†ECMA-</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/dongxiaodong/p/13053208.html</dc:identifier>
</item>
<item>
<title>ä¸º.netcoreåŠ©åŠ›--WebApiClientæ­£å¼å‘å¸ƒcoreç‰ˆæœ¬ - jiulang</title>
<link>http://www.cnblogs.com/kewei/p/13052978.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/kewei/p/13052978.html</guid>
<description>&lt;h3 id=&quot;1-å‰è¨€&quot;&gt;1 å‰è¨€&lt;/h3&gt;
&lt;p&gt;WebApiClientå·²æˆç†Ÿç¨³å®šï¼Œå‘å¸ƒäº†WebApiClient.JITå’ŒWebApiClient.AOTä¸¤ä¸ªnugetåŒ…ï¼Œç´¯è®¡è¿‘10wæ¬¡ä¸‹è½½ã€‚æˆ‘å¯¹å®ƒçš„é«˜å¯æ‰©å±•æ€§è®¾è®¡ç›¸å½“æ»¡æ„å’Œè‡ªè±ªï¼Œä½†WebApiClientå¹¶ä¸å› æ­¤è€Œåœä¸‹è„šæ­¥ï¼Œåœ¨ä¸€å¹´å‰ï¼Œæˆ‘äº§ç”Ÿäº†ç¼–å†™å…¶coreç‰ˆæœ¬çš„æƒ³æ³•ï¼Œå°†asp.netcoreæœåŠ¡ç«¯å…ˆè¿›çš„æ€æƒ³èå…¥åˆ°coreç‰ˆæœ¬ï¼Œåœ¨æ€§èƒ½ä¸æ‰©å±•æ€§ä¸Šå¾—åˆ°è¿›ä¸€æ­¥å‡åã€‚&lt;br/&gt;å¯¹åº”çš„ï¼Œç»™å®ƒå«äº†WebApiClientCoreçš„åå­—ï¼Œä¸ºäº†å¯¹å¾—èµ·åå­—é‡Œé¢çš„Coreå­—ï¼Œæˆ‘åœ¨æ¡†æ¶è®¾è®¡ã€æ€§èƒ½ä¼˜åŒ–ä¸Šå ç”¨æ•´ä½“å¼€å‘æ—¶é—´ä¸€åŠä»¥ä¸Šã€‚&lt;/p&gt;
&lt;h3 id=&quot;2-æ¡†æ¶è®¾è®¡&quot;&gt;2 æ¡†æ¶è®¾è®¡&lt;/h3&gt;
&lt;h4 id=&quot;iactioninvoker&quot;&gt;IActionInvoker&lt;/h4&gt;
&lt;p&gt;WebApiClientæ—¶è¿˜æ²¡æœ‰IActionInvokeræ¦‚å¿µï¼Œå¯¹åº”çš„æ‰§è¡Œé€»è¾‘ç›´æ¥åœ¨ApiActionContextä¸Šå®ç°ã€‚ç°åœ¨æˆ‘è§‰å¾—ï¼ŒContextåº”è¯¥æ˜¯ä¸€ä¸ªçŠ¶æ€æ•°æ®ç±»ï¼Œè€Œä¸èƒ½ä¹Ÿæˆä¸ºä¸€ä¸ªæ‰§è¡Œè€…ï¼Œå› ä¸ºä¸€ä¸ªæ‰§è¡Œè€…çš„å®ä¾‹å¯ä»¥æ— é™æ¬¡åœ°æ‰§è¡Œå¤šä¸ªContextå®ä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;Refitåˆ™æ›´ç®€å•ç²—æš´ï¼Œå°†æ‰€æœ‰å®ç°éƒ½åœ¨ä¸€ä¸ªRequestBuilderImplementationçš„ç±»ä¸Šï¼šä½ ä»¬åªè¦ä¹Ÿåªèƒ½ä½¿ç”¨æˆ‘å†…ç½®çš„Attributeå£°æ˜ï¼Œä¸€åˆ‡æ‰§è¡Œåœ¨æˆ‘è¿™ä¸ªç±»é‡Œé¢åŒ…åŠï¼Œå› ä¸ºæˆ‘æ˜¯ä¸€ä¸ªä¸‡èƒ½ç±»ã€‚&lt;/p&gt;
&lt;p&gt;Coreç‰ˆæœ¬å¢åŠ äº†IActionInvokeræ¦‚å¿µï¼Œä»ä¸­Contextåˆ†å¼€ï¼Œç”¨äºæ‰§è¡ŒContextï¼ŒèŒè´£åˆ†æ˜ã€‚åœ¨å®ç°ä¸Šåˆåˆ†ä¸ºå¤šç§Invokerï¼šTaskå£°æ˜è¿”å›æ‰§è¡Œè€…ActionInvokerã€ITaskå£°æ˜è¿”å›å¤„ç†å¤„ç†è€…ActionTaskï¼Œä»¥åŠèšåˆçš„MultiplexedActionInvokerã€‚&lt;/p&gt;
&lt;h4 id=&quot;middlewareæ€æƒ³&quot;&gt;Middlewareæ€æƒ³&lt;/h4&gt;
&lt;p&gt;WebApiClientæ—¶åœ¨å¤„ç†å„ä¸ªç‰¹æ€§ã€å‚æ•°éªŒè¯ã€è¿”å›å€¼éªŒè¯æ—¶æ²¡æœ‰ä½¿ç”¨Middlewareæ€æƒ³ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å“åº”ç»“æœå’Œå¼‚å¸¸çŸ­è·¯é€»è¾‘éš¾ä»¥ç»´æŠ¤ã€‚&lt;/p&gt;
&lt;p&gt;Refitè¿˜æ˜¯ç®€å•ç²—æš´ï¼Œå°†æ‰€æœ‰ç‰¹æ€§çš„è§£é‡Šå®ç°éƒ½åœ¨è¿™ä¸ªRequestBuilderImplementationçš„ç±»ä¸Šï¼Œå› ä¸ºæˆ‘è¿˜æ˜¯ä¸€ä¸ªä¸‡èƒ½ç±»ã€‚&lt;/p&gt;
&lt;p&gt;Coreç‰ˆæœ¬å¢åŠ ä¸­é—´ä»¶Builderï¼Œå°†è¯·æ±‚å‰çš„ç›¸å…³Attributeçš„æ‰§è¡Œç¼–æ’Buildä¸ºä¸€ä¸ªè¯·æ±‚å¤„ç†å§”æ‰˜ï¼Œå°†è¯·æ±‚åç›¸å…³Attributeçš„æ‰§è¡Œç¼–æ’Buildä¸ºä¸€ä¸ªå“åº”å¤„ç†å§”æ‰˜ï¼Œç„¶åæŠŠä¸¤ä¸ªå§”æ‰˜ä¸çœŸå®httpè¯·æ±‚ä¸²åœ¨ä¸€èµ·ï¼ŒBuildå‡ºä¸€ä¸ªå®Œæ•´çš„è¯·æ±‚å“åº”å§”æ‰˜ã€‚&lt;/p&gt;
&lt;p&gt;å¾—ç›ŠäºMiddlewareï¼Œæµç¨‹ä¸­çš„è¯·æ±‚å‰å‚æ•°å€¼éªŒè¯ã€ç»“æœå¤„ç†ç‰¹æ€§çŸ­è·¯ã€å¼‚å¸¸çŸ­è·¯ã€è¯·æ±‚åç»“æœå€¼éªŒå’Œæ— æ¡ä»¶æ‰§è¡ŒIApiFilterAtrribueç­‰è¿™äº›å¤æ‚çš„æµç¨‹å˜æˆç®€å•çš„ç®¡é“å¤„ç†ï¼›å¦å¤–æ¥å£ä¹Ÿå˜æˆæ”¯æŒæœåŠ¡ç«¯å“åº”å¤šç§æ ¼å¼å†…å®¹ï¼Œæ¯ç§æ ¼å¼å†…å®¹åœ¨ä¸€ä¸ªIApiReturnAttributeä¸Šå®ç°å’Œå¤„ç†ï¼Œæ¯”å¦‚è¯·æ±‚ä¸º&lt;code&gt;Accept: application/json, application/xml&lt;/code&gt;ï¼Œä¸ç®¡æœåŠ¡å™¨è¿”å›xmlæˆ–jsonéƒ½èƒ½å¤„ç†ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;/// &amp;lt;summary&amp;gt;
/// åˆ›å»ºæ‰§è¡Œå§”æ‰˜
/// &amp;lt;/summary&amp;gt;
/// &amp;lt;param name=&quot;apiAction&quot;&amp;gt;actionæè¿°å™¨&amp;lt;/param&amp;gt;
/// &amp;lt;returns&amp;gt;&amp;lt;/returns&amp;gt;
public static Func&amp;lt;ApiRequestContext, Task&amp;lt;ApiResponseContext&amp;gt;&amp;gt; Build(ApiActionDescriptor apiAction)
{
    var requestHandler = BuildRequestHandler(apiAction);
    var responseHandler = BuildResponseHandler(apiAction);

    return async request =&amp;gt;
    {
        await requestHandler(request).ConfigureAwait(false);
        var response = await HttpRequest.SendAsync(request).ConfigureAwait(false);
        await responseHandler(response).ConfigureAwait(false);
        return response;
    };
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;contextæ€æƒ³&quot;&gt;Contextæ€æƒ³&lt;/h4&gt;
&lt;p&gt;WebApiClientåªæœ‰ä¸€ä¸ªApiActionContextï¼Œå…¶Resultå’ŒExceptionå±æ€§åœ¨è¯·æ±‚å‰å°±å¯ä»¥è®¿é—®æˆ–è®¾ç½®ï¼Œä½†å®é™…ä¸Šå°±ç®—è®¾ç½®äº†å€¼ï¼Œæµç¨‹ä¹Ÿä¸ä¼šçŸ­è·¯å’Œä¸­æ–­ï¼Œå±äºè®¾è®¡å¤±è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;Refitæ²¡æœ‰ç›¸å…³Contextæ¦‚å¿µï¼Œå› ä¸ºå®ƒä¸æä¾›ç»™ç”¨æˆ·è‡ªå®šä¹‰æ‰©å±•Attributeçš„èƒ½åŠ›ï¼Œå®ƒå†…ç½®çš„Attributeä¹Ÿæ²¡æœ‰æ‰§è¡Œèƒ½åŠ›ï¼Œä¸€ä¸ªRequestBuilderImplementationç±»å¤Ÿäº†ã€‚&lt;/p&gt;
&lt;p&gt;Coreç‰ˆæœ¬å°†è®¾è®¡äº†å¤šä¸ªContextæ¦‚å¿µï¼Œä¸åŒé˜¶æ®µæœ‰ä¸åŒçš„Contextï¼Œå¦‚åŒasp.netcoreä¸åŒFilterçš„Contextä¹Ÿä¸åŒä¸€æ ·ã€‚å¯¹äºä¸€ä¸ªActionï¼Œè¯·æ±‚é˜¶æ®µå¯¹åº”æ˜¯ApiRequestContextï¼Œå“åº”é˜¶æ®µæ˜¯ApiResponseContextï¼›å¯¹äºActionçš„å‚æ•°ï¼Œå¯¹åº”æ˜¯ApiParameterContextã€‚æ¯ç§Contexté‡Œé¢éƒ½åŒ…å«æ ¸å¿ƒçš„HttpContextå±æ€§ï¼ŒHttpContextåŒ…å«è¯·æ±‚æ¶ˆæ¯ã€å“åº”æ¶ˆæ¯å’Œæ¥å£é…ç½®é€‰é¡¹ç­‰ã€‚&lt;/p&gt;
&lt;h4 id=&quot;interfaceæ€æƒ³&quot;&gt;Interfaceæ€æƒ³&lt;/h4&gt;
&lt;p&gt;è¾“å…¥WebApiClientCoreå‘½åç©ºé—´ï¼Œä¼šå‘ç°å®šä¹‰äº†å¾ˆå¤šInterfaceï¼Œè¿™äº›Interfaceéƒ½æ˜¯ä¸ºäº†ç”¨æˆ·å®ç°è‡ªå®šä¹‰ç‰¹æ€§ç”¨çš„ï¼Œå½“ç„¶å†…ç½®çš„æ‰€æœ‰ç‰¹æ€§ï¼Œéƒ½æ˜¯å®ç°äº†è¿™äº›æ¥å£è€Œå·²ã€‚å¦‚æœä¸€ä¸ªç‰¹æ€§å®ç°äº†å¤šä¸ªæ¥å£ï¼Œå®ƒå°±æœ‰å¤šç§èƒ½åŠ›ï¼Œæ¯”å¦‚å†…ç½®çš„HeaderAttributeï¼Œå®ƒæ—¢å¯ä»¥ä¿®é¥°äºInterfaceå’ŒMethodï¼Œä¹Ÿå¯ä»¥ä¿®é¥°å‚æ•°ã€‚&lt;/p&gt;
&lt;p&gt;WebApiClientCoreçš„Attributeæè¿°çš„é€»è¾‘ï¼Œæ˜¯ç”±Attributeè‡ªæˆ‘å®ç°ï¼Œæ‰€ä»¥æ•´ä¸ªè¯·æ±‚çš„æ•°æ®è£…é…é€»è¾‘æ˜¯åˆ†æ•£ä¸ºå„ä¸ªAttributeä¸Šï¼Œç”¨ä»€ä¹ˆAttributeå°±æœ‰ä»€ä¹ˆé€»è¾‘ï¼ŒåŒ…å«æ¡†æ¶ä¹‹å¤–çš„éå†…ç½®çš„è‡ªå®šä¹‰Attributeã€‚&lt;/p&gt;
&lt;p&gt;Refitçš„å†…ç½®Attributeåªæœ‰æ¬²æè¿°é€»è¾‘ï¼Œæ²¡æœ‰å®ç°é€»è¾‘ï¼Œå®ç°é€»è¾‘ç”±RequestBuilderImplementationåŒ…åŠï¼Œæ‰€ä»¥å®ƒä¸éœ€è¦æ¥å£ä¹Ÿæ²¡æœ‰æ¥å£ã€‚&lt;/p&gt;
&lt;h3 id=&quot;3-æ€§èƒ½ä¼˜åŒ–&quot;&gt;3 æ€§èƒ½ä¼˜åŒ–&lt;/h3&gt;
&lt;h4 id=&quot;æ›´å¿«çš„å­—ç¬¦ä¸²æ›¿æ¢&quot;&gt;æ›´å¿«çš„å­—ç¬¦ä¸²æ›¿æ¢&lt;/h4&gt;
&lt;p&gt;åƒ[HttpGet(&quot;objects/{id}&quot;)]è¿™æ ·çš„pathå‚æ•°ï¼Œåœ¨restfulä¸­å¸¸å¸¸é‡åˆ°ï¼Œé€šè¿‡Spanä¼˜åŒ–ï¼ŒCoreç‰ˆæœ¬åœ¨æ›¿æ¢pathå‚æ•°å€¼cpuå ç”¨æ—¶é—´é™ä½ä¸ºåŸç‰ˆæœ¬çš„ååˆ†ä¹‹ä¸€ã€‚&lt;/p&gt;
&lt;h4 id=&quot;æ›´å¿«çš„jsonåºåˆ—åŒ–&quot;&gt;æ›´å¿«çš„jsonåºåˆ—åŒ–&lt;/h4&gt;
&lt;p&gt;å¾—ç›ŠäºSytem.Text.Jsonï¼Œjsonåºåˆ—åŒ–å’Œååºåˆ—åŒ–ä¸Šæ€§èƒ½æ˜¾æ˜æå‡ã€‚&lt;/p&gt;
&lt;h4 id=&quot;æ›´å°‘çš„ç¼“å†²åŒºåˆ†é…&quot;&gt;æ›´å°‘çš„ç¼“å†²åŒºåˆ†é…&lt;/h4&gt;
&lt;p&gt;WebApiClientCoreä½¿ç”¨äº†å¯å›æ”¶å¤ç”¨çš„IBufferWriterï¼Œåœ¨jsonåºåˆ—åŒ–å¾—åˆ°jsonã€jsonè£…é…ä¸ºHttpContentåªç”³è¯·ä¸€æ¬¡Bufferï¼Œè€Œä¸”HttpContentåœ¨å‘é€ä¹‹åï¼Œè¿™ä¸ªBufferè¢«å›æ”¶å¤ç”¨ã€‚IBufferWriterè¿˜äºç”¨è¡¨å•çš„uriç¼–ç ï¼Œç¼–ç äº§ç”Ÿçš„Bufferä¸ç”¨ç”³è¯·æ–°çš„å†…å­˜å†…å®¹ï¼Œç›´æ¥å†™å…¥è¡¨å•çš„HttpContentã€‚&lt;/p&gt;
&lt;h4 id=&quot;æ›´å°‘çš„ç¼–ç æ“ä½œ&quot;&gt;æ›´å°‘çš„ç¼–ç æ“ä½œ&lt;/h4&gt;
&lt;p&gt;WebApiClientCoreçš„jsonä¸å†ä½¿ç”¨utf16çš„stringä¸­é—´ç±»å‹ï¼Œç›´æ¥å°†å¯¹è±¡åºåˆ—åŒ–ä¸ºç½‘ç»œè¯·æ±‚éœ€è¦çš„utf8ç¼–ç äºŒè¿›åˆ¶jsonï¼›è¡¨å•çš„keyå’ŒValueç¼–ç æ—¶ï¼Œä¹Ÿä¸äº§ç”Ÿstringä¸­é—´ç±»å‹ï¼Œè€Œæ˜¯ç¼–ç åçš„äºŒè¿›åˆ¶æ•°æ®å†…å®¹ï¼Œç„¶åå†™å…¥è¡¨å•çš„IBufferWriterã€‚&lt;/p&gt;
&lt;h4 id=&quot;æ›´å¿«çš„ç¼“å­˜æŸ¥æ‰¾&quot;&gt;æ›´å¿«çš„ç¼“å­˜æŸ¥æ‰¾&lt;/h4&gt;
&lt;p&gt;WebApiClientåˆ›å»ºä»£ç†ç±»å®ä¾‹æ¥æ‰§è¡Œä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œè¦æŸ¥æ‰¾ä¸¤æ¬¡ç¼“å­˜ï¼šé€šè¿‡æ¥å£ç±»å‹æŸ¥æ‰¾å­—å…¸ç¼“å­˜çš„æ¥å£ä»£ç†ç±»ï¼Œç„¶åå®ä¾‹åŒ–ä»£ç†ç±»ï¼›åœ¨ApiInterceptoré‡Œé¢é€šè¿‡MethodInfoæŸ¥æ‰¾å­—å…¸ç¼“å­˜çš„ApiActionDescriptorã€‚&lt;/p&gt;
&lt;p&gt;Refitæ‰§è¡ŒåŒæ ·é€»è¾‘ä¹Ÿä½¿ç”¨äº†ä¸¤æ¬¡å­—å…¸ç¼“å­˜ï¼Œæ¥å£å’Œæ¥å£ä»£ç†ç±»å®‰å…¨å­—å…¸ç¼“å­˜TypeMappingï¼Œæ¥å£å’Œæ¥å£æ–¹æ³•æè¿°çš„å­—å…¸ç¼“å­˜interfaceHttpMethodsã€‚&lt;/p&gt;
&lt;p&gt;WebApiClientCoreå–æ¶ˆäº†å­—å…¸ç¼“å­˜ï¼Œä½¿ç”¨é™æ€æ³›å‹ç±»çš„å­—æ®µä½œç¼“å­˜ï¼Œå› ä¸ºå­—æ®µè®¿é—®è¿œæ¯”å­—å…¸æŸ¥æ‰¾é«˜æ•ˆã€‚åŒæ—¶é€šè¿‡å·§å¦™çš„è®¾è®¡ï¼Œåœ¨ä»£ç†ç±»æ‹¦æˆªæ–¹æ³•æ‰§è¡Œæ—¶ï¼Œç›´æ¥å›ä¼ IActionInvokeræ›¿æ¢åŸæ¥çš„MethodInfoï¼ŒIActionInvokeråŒ…å«äº†ApiActionDescriptorï¼Œè€ŒIActionInvokerä¸ä»£ç†ç±»å‹éƒ½ä¸€èµ·ç¼“å­˜åœ¨é™æ€æ³›å‹ç±»çš„å­—æ®µï¼Œå‡å°‘äº†ä¸€æ¬¡å¿…é¡»çš„å­—å…¸ç¼“å­˜æŸ¥æ‰¾è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;h4 id=&quot;æ€§èƒ½å¯¹æ¯”&quot;&gt;æ€§èƒ½å¯¹æ¯”&lt;/h4&gt;
&lt;p&gt;æ’é™¤æ‰çœŸå®çš„ç½‘ç»œè¯·æ±‚IOç­‰å¾…æ—¶é—´ï¼ŒWebApiClientCoreä½¿ç”¨çš„cpuæ—¶é—´ä»…ä»…ä¸ºWebApiClient.JITå’ŒRefitçš„ä¸‰åˆ†ä¹‹ä¸€ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-ini&quot;&gt;BenchmarkDotNet=v0.12.1, OS=Windows 10.0.18362.836 (1903/May2019Update/19H1)
Intel Core i3-4150 CPU 3.50GHz (Haswell), 1 CPU, 4 logical and 2 physical cores
.NET Core SDK=3.1.202
  [Host]     : .NET Core 3.1.4 (CoreCLR 4.700.20.20201, CoreFX 4.700.20.22101), X64 RyuJIT
  DefaultJob : .NET Core 3.1.4 (CoreCLR 4.700.20.20201, CoreFX 4.700.20.22101), X64 RyuJIT
&lt;/code&gt;
&lt;/pre&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Method&lt;/th&gt;
&lt;th&gt;Mean&lt;/th&gt;
&lt;th&gt;Error&lt;/th&gt;
&lt;th&gt;StdDev&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody readability=&quot;1&quot;&gt;&lt;tr&gt;&lt;td&gt;HttpClient_GetAsync&lt;/td&gt;
&lt;td&gt;3.146 Î¼s&lt;/td&gt;
&lt;td&gt;0.0396 Î¼s&lt;/td&gt;
&lt;td&gt;0.0370 Î¼s&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;WebApiClientCore_GetAsync&lt;/td&gt;
&lt;td&gt;12.421 Î¼s&lt;/td&gt;
&lt;td&gt;0.2324 Î¼s&lt;/td&gt;
&lt;td&gt;0.2174 Î¼s&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Refit_GetAsync&lt;/td&gt;
&lt;td&gt;43.241 Î¼s&lt;/td&gt;
&lt;td&gt;0.6713 Î¼s&lt;/td&gt;
&lt;td&gt;0.6279 Î¼s&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Method&lt;/th&gt;
&lt;th&gt;Mean&lt;/th&gt;
&lt;th&gt;Error&lt;/th&gt;
&lt;th&gt;StdDev&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody readability=&quot;1&quot;&gt;&lt;tr&gt;&lt;td&gt;HttpClient_PostJsonAsync&lt;/td&gt;
&lt;td&gt;5.263 Î¼s&lt;/td&gt;
&lt;td&gt;0.0784 Î¼s&lt;/td&gt;
&lt;td&gt;0.0733 Î¼s&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;WebApiClientCore_PostJsonAsync&lt;/td&gt;
&lt;td&gt;13.823 Î¼s&lt;/td&gt;
&lt;td&gt;0.1874 Î¼s&lt;/td&gt;
&lt;td&gt;0.1753 Î¼s&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Refit_PostJsonAsync&lt;/td&gt;
&lt;td&gt;45.218 Î¼s&lt;/td&gt;
&lt;td&gt;0.8166 Î¼s&lt;/td&gt;
&lt;td&gt;0.7639 Î¼s&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3 id=&quot;4-nugetåŒ…ä¸æ–‡æ¡£&quot;&gt;4 NugetåŒ…ä¸æ–‡æ¡£&lt;/h3&gt;
&lt;h4 id=&quot;nugetåŒ…&quot;&gt;NugetåŒ…&lt;/h4&gt;
&lt;pre&gt;
&lt;code&gt;&amp;lt;PackageReference Include=&quot;WebApiClientCore&quot; Version=&quot;1.0.0&quot; /&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;é¡¹ç›®åœ°å€ä¸æ–‡æ¡£&quot;&gt;é¡¹ç›®åœ°å€ä¸æ–‡æ¡£&lt;/h4&gt;
&lt;p&gt;ç‚¹å‡»é¡¹ç›®é“¾æ¥ï¼Œå¸¦ä½ GETåˆ°Nç§ä½¿ç”¨æŠ€èƒ½ï¼Œä¸æ±‚starï¼Œåªæ±‚æä¾›è‰¯å¥½å»ºè®®ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;0&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/dotnetcore/WebApiClient&quot;&gt;https://github.com/dotnetcore/WebApiClient&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
<pubDate>Fri, 05 Jun 2020 15:50:00 +0000</pubDate>
<dc:creator>jiulang</dc:creator>
<og:description>1 å‰è¨€ WebApiClientå·²æˆç†Ÿç¨³å®šï¼Œå‘å¸ƒäº†WebApiClient.JITå’ŒWebApiClient.AOTä¸¤ä¸ªnugetåŒ…ï¼Œç´¯è®¡è¿‘10wæ¬¡ä¸‹è½½ã€‚æˆ‘å¯¹å®ƒçš„é«˜å¯æ‰©å±•æ€§è®¾è®¡ç›¸å½“æ»¡æ„å’Œè‡ªè±ªï¼Œä½†We</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/kewei/p/13052978.html</dc:identifier>
</item>
<item>
<title>ã€åŸåˆ›ã€‘Linuxä¸­æ–­å­ç³»ç»Ÿï¼ˆäºŒï¼‰-é€šç”¨æ¡†æ¶å¤„ç† - LoyenWang</title>
<link>http://www.cnblogs.com/LoyenWang/p/13052677.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/LoyenWang/p/13052677.html</guid>
<description>&lt;ul&gt;&lt;li&gt;&lt;code&gt;Read the fucking source code!&lt;/code&gt; --By é²è¿…&lt;/li&gt;
&lt;li&gt;&lt;code&gt;A picture is worth a thousand words.&lt;/code&gt; --By é«˜å°”åŸº&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;è¯´æ˜ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;Kernelç‰ˆæœ¬ï¼š4.14&lt;/li&gt;
&lt;li&gt;ARM64å¤„ç†å™¨ï¼ŒContex-A53ï¼ŒåŒæ ¸&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨å·¥å…·ï¼šSource Insight 3.5ï¼Œ Visio&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;a href=&quot;https://www.cnblogs.com/LoyenWang/p/12996812.html&quot;&gt;ã€åŸåˆ›ã€‘Linuxä¸­æ–­å­ç³»ç»Ÿï¼ˆä¸€ï¼‰-ä¸­æ–­æ§åˆ¶å™¨åŠé©±åŠ¨åˆ†æ&lt;/a&gt;è®²åˆ°äº†åº•å±‚ç¡¬ä»¶GICé©±åŠ¨ï¼Œä»¥åŠArch-Specificçš„ä¸­æ–­ä»£ç ï¼Œæœ¬æ–‡å°†ç ”ç©¶ä¸‹é€šç”¨çš„ä¸­æ–­å¤„ç†çš„è¿‡ç¨‹ï¼Œå±äºç¡¬ä»¶æ— å…³å±‚ã€‚å½“ç„¶ï¼Œæˆ‘è¿˜æ˜¯å»ºè®®ä½ çœ‹ä¸€ä¸‹ä¸Šç¯‡æ–‡ç« ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç¯‡æ–‡ç« ä¼šè§£ç­”ä¸¤ä¸ªé—®é¢˜ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;ç”¨æˆ·æ˜¯æ€ä¹ˆä½¿ç”¨ä¸­æ–­çš„ï¼ˆ&lt;code&gt;ä¸­æ–­æ³¨å†Œ&lt;/code&gt;ï¼‰ï¼Ÿ&lt;/li&gt;
&lt;li&gt;å¤–è®¾è§¦å‘ä¸­æ–­ä¿¡å·æ—¶ï¼Œæœ€ç»ˆæ˜¯æ€ä¹ˆè°ƒç”¨åˆ°ä¸­æ–­handlerçš„ï¼ˆ&lt;code&gt;ä¸­æ–­å¤„ç†&lt;/code&gt;ï¼‰ï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å…ˆæ¥çœ‹ä¸€ä¸‹æ€»çš„æ•°æ®ç»“æ„ï¼Œæ ¸å¿ƒæ˜¯å›´ç»•ç€&lt;code&gt;struct irq_desc&lt;/code&gt;æ¥å±•å¼€ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1771657/202006/1771657-20200605223624401-1747243848.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;ul readability=&quot;4&quot;&gt;&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;Linuxå†…æ ¸çš„ä¸­æ–­å¤„ç†ï¼Œå›´ç»•ç€ä¸­æ–­æè¿°ç¬¦ç»“æ„&lt;code&gt;struct irq_desc&lt;/code&gt;å±•å¼€ï¼Œå†…æ ¸æä¾›äº†ä¸¤ç§ä¸­æ–­æè¿°ç¬¦ç»„ç»‡å½¢å¼ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;æ‰“å¼€&lt;code&gt;CONFIG_SPARSE_IRQ&lt;/code&gt;å®ï¼ˆä¸­æ–­ç¼–å·ä¸è¿ç»­ï¼‰ï¼Œä¸­æ–­æè¿°ç¬¦ä»¥&lt;code&gt;radix-tree&lt;/code&gt;æ¥ç»„ç»‡ï¼Œç”¨æˆ·åœ¨åˆå§‹åŒ–æ—¶è¿›è¡ŒåŠ¨æ€åˆ†é…ï¼Œç„¶åå†æ’å…¥&lt;code&gt;radix-tree&lt;/code&gt;ä¸­ï¼›&lt;/li&gt;
&lt;li&gt;å…³é—­&lt;code&gt;CONFIG_SPARSE_IRQ&lt;/code&gt;å®ï¼ˆä¸­æ–­ç¼–å·è¿ç»­ï¼‰ï¼Œä¸­æ–­æè¿°ç¬¦ä»¥æ•°ç»„çš„å½¢å¼ç»„ç»‡ï¼Œå¹¶ä¸”å·²ç»åˆ†é…å¥½ï¼›&lt;/li&gt;
&lt;li&gt;ä¸ç®¡å“ªç§å½¢å¼ï¼Œæœ€ç»ˆéƒ½å¯ä»¥é€šè¿‡&lt;code&gt;linux irq&lt;/code&gt;å·æ¥æ‰¾åˆ°å¯¹åº”çš„ä¸­æ–­æè¿°ç¬¦ï¼›&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;å›¾çš„å·¦ä¾§ç°è‰²éƒ¨åˆ†ï¼Œä¸»è¦åœ¨ä¸­æ–­æ§åˆ¶å™¨é©±åŠ¨ä¸­è¿›è¡Œåˆå§‹åŒ–è®¾ç½®ï¼ŒåŒ…æ‹¬å„ä¸ªç»“æ„ä¸­å‡½æ•°æŒ‡é’ˆçš„æŒ‡å‘ç­‰ï¼Œå…¶ä¸­&lt;code&gt;struct irq_chip&lt;/code&gt;ç”¨äºå¯¹ä¸­æ–­æ§åˆ¶å™¨çš„ç¡¬ä»¶æ“ä½œï¼Œ&lt;code&gt;struct irq_domain&lt;/code&gt;ä¸ä¸­æ–­æ§åˆ¶å™¨å¯¹åº”ï¼Œå®Œæˆçš„å·¥ä½œæ˜¯ç¡¬ä»¶ä¸­æ–­å·åˆ°&lt;code&gt;Linux irq&lt;/code&gt;çš„æ˜ å°„ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;å›¾çš„ä¸Šä¾§ç°è‰²éƒ¨åˆ†ï¼Œä¸­æ–­æè¿°ç¬¦çš„åˆ›å»ºï¼ˆè¿™é‡ŒæŒ‡&lt;code&gt;CONFIG_SPARSE_IRQ&lt;/code&gt;ï¼‰ï¼Œä¸»è¦åœ¨è·å–è®¾å¤‡ä¸­æ–­ä¿¡æ¯çš„è¿‡ç¨‹ä¸­å®Œæˆçš„ï¼Œä»è€Œè®©è®¾å¤‡æ ‘ä¸­çš„ä¸­æ–­èƒ½ä¸å…·ä½“çš„ä¸­æ–­æè¿°ç¬¦&lt;code&gt;irq_desc&lt;/code&gt;åŒ¹é…ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;å›¾ä¸­å‰©ä½™éƒ¨åˆ†ï¼Œåœ¨è®¾å¤‡ç”³è¯·æ³¨å†Œä¸­æ–­çš„è¿‡ç¨‹ä¸­è¿›è¡Œè®¾ç½®ï¼Œæ¯”å¦‚&lt;code&gt;struct irqaction&lt;/code&gt;ä¸­&lt;code&gt;handler&lt;/code&gt;çš„è®¾ç½®ï¼Œè¿™ä¸ªç”¨äºæŒ‡å‘æˆ‘ä»¬è®¾å¤‡é©±åŠ¨ç¨‹åºä¸­çš„ä¸­æ–­å¤„ç†å‡½æ•°äº†ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä¸­æ–­çš„å¤„ç†ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªåŠŸèƒ½æ¨¡å—ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;ç¡¬ä»¶ä¸­æ–­å·åˆ°&lt;code&gt;Linux irq&lt;/code&gt;ä¸­æ–­å·çš„æ˜ å°„ï¼Œå¹¶åˆ›å»ºå¥½&lt;code&gt;irq_desc&lt;/code&gt;ä¸­æ–­æè¿°ç¬¦ï¼›&lt;/li&gt;
&lt;li&gt;ä¸­æ–­æ³¨å†Œæ—¶ï¼Œå…ˆè·å–è®¾å¤‡çš„ä¸­æ–­å·ï¼Œæ ¹æ®ä¸­æ–­å·æ‰¾åˆ°å¯¹åº”çš„&lt;code&gt;irq_desc&lt;/code&gt;ï¼Œå¹¶å°†è®¾å¤‡çš„ä¸­æ–­å¤„ç†å‡½æ•°æ·»åŠ åˆ°&lt;code&gt;irq_desc&lt;/code&gt;ä¸­ï¼›&lt;/li&gt;
&lt;li&gt;è®¾å¤‡è§¦å‘ä¸­æ–­ä¿¡å·æ—¶ï¼Œæ ¹æ®ç¡¬ä»¶ä¸­æ–­å·å¾—åˆ°&lt;code&gt;Linux irq&lt;/code&gt;ä¸­æ–­å·ï¼Œæ‰¾åˆ°å¯¹åº”çš„&lt;code&gt;irq_desc&lt;/code&gt;ï¼Œæœ€ç»ˆè°ƒç”¨åˆ°è®¾å¤‡çš„ä¸­æ–­å¤„ç†å‡½æ•°ï¼›&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;ä¸Šè¿°çš„æè¿°æ¯”è¾ƒç®€å•ï¼Œæ›´è¯¦ç»†çš„è¿‡ç¨‹ï¼Œå¾€ä¸‹çœ‹å§ã€‚&lt;/p&gt;

&lt;h2 id=&quot;31-ä¸­æ–­æ³¨å†Œ&quot;&gt;3.1 ä¸­æ–­æ³¨å†Œ&lt;/h2&gt;
&lt;p&gt;è¿™ä¸€æ¬¡ï¼Œè®©æˆ‘ä»¬ä»¥é—®é¢˜çš„æ–¹å¼æ¥å±•å¼€ï¼š&lt;br/&gt;å…ˆæ¥è®©æˆ‘ä»¬å›ç­”ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šç”¨æˆ·æ˜¯æ€ä¹ˆä½¿ç”¨ä¸­æ–­çš„ï¼Ÿ&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;ç†Ÿæ‚‰è®¾å¤‡é©±åŠ¨çš„åŒå­¦åº”è¯¥éƒ½æ¸…æ¥šï¼Œç»å¸¸ä¼šåœ¨é©±åŠ¨ç¨‹åºä¸­è°ƒç”¨&lt;code&gt;request_irq()&lt;/code&gt;æ¥å£æˆ–è€…&lt;code&gt;request_threaded_irq()&lt;/code&gt;æ¥å£æ¥æ³¨å†Œè®¾å¤‡çš„ä¸­æ–­å¤„ç†å‡½æ•°ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;request_irq()/request_threaded_irq&lt;/code&gt;æ¥å£ä¸­ï¼Œéƒ½éœ€è¦ç”¨åˆ°&lt;code&gt;irq&lt;/code&gt;ï¼Œä¹Ÿå°±æ˜¯ä¸­æ–­å·ï¼Œé‚£ä¹ˆè¿™ä¸ªä¸­æ–­å·æ˜¯ä»å“ªé‡Œæ¥çš„å‘¢ï¼Ÿå®ƒæ˜¯&lt;code&gt;Linux irq&lt;/code&gt;ï¼Œå®ƒåˆæ˜¯å¦‚ä½•æ˜ å°„åˆ°å…·ä½“çš„ç¡¬ä»¶è®¾å¤‡çš„ä¸­æ–­å·çš„å‘¢ï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;å…ˆæ¥çœ‹ç¬¬äºŒä¸ªé—®é¢˜ï¼šè®¾å¤‡ç¡¬ä»¶ä¸­æ–­å·åˆ°&lt;code&gt;Linux irq&lt;/code&gt;ä¸­æ–­å·çš„æ˜ å°„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1771657/202006/1771657-20200605222653356-1874117507.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ç¡¬ä»¶è®¾å¤‡çš„ä¸­æ–­ä¿¡æ¯éƒ½åœ¨è®¾å¤‡æ ‘&lt;code&gt;device tree&lt;/code&gt;ä¸­è¿›è¡Œäº†æè¿°ï¼Œåœ¨ç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹ä¸­ï¼Œè¿™äº›ä¿¡æ¯éƒ½å·²ç»åŠ è½½åˆ°å†…å­˜ä¸­å¹¶å¾—åˆ°äº†è§£æï¼›&lt;/li&gt;
&lt;li&gt;é©±åŠ¨ä¸­é€šå¸¸ä¼šä½¿ç”¨&lt;code&gt;platform_get_irq&lt;/code&gt;æˆ–&lt;code&gt;irq_of_parse_and_map&lt;/code&gt;æ¥å£ï¼Œå»æ ¹æ®è®¾å¤‡æ ‘çš„ä¿¡æ¯å»åˆ›å»ºæ˜ å°„å…³ç³»ï¼ˆç¡¬ä»¶ä¸­æ–­å·åˆ°&lt;code&gt;linux irq&lt;/code&gt;ä¸­æ–­å·æ˜ å°„ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.cnblogs.com/LoyenWang/p/12996812.html&quot;&gt;ã€åŸåˆ›ã€‘Linuxä¸­æ–­å­ç³»ç»Ÿï¼ˆä¸€ï¼‰-ä¸­æ–­æ§åˆ¶å™¨åŠé©±åŠ¨åˆ†æ&lt;/a&gt;æåˆ°è¿‡&lt;code&gt;struct irq_domain&lt;/code&gt;ç”¨äºå®Œæˆæ˜ å°„å·¥ä½œï¼Œå› æ­¤åœ¨&lt;code&gt;irq_create_fwspec_mapping&lt;/code&gt;æ¥å£ä¸­ï¼Œä¼šå…ˆå»æ‰¾åˆ°åŒ¹é…çš„&lt;code&gt;irq domain&lt;/code&gt;ï¼Œå†å»å›è°ƒè¯¥&lt;code&gt;irq domain&lt;/code&gt;ä¸­çš„å‡½æ•°é›†ï¼Œé€šå¸¸&lt;code&gt;irq domain&lt;/code&gt;éƒ½æ˜¯åœ¨ä¸­æ–­æ§åˆ¶å™¨é©±åŠ¨ä¸­åˆå§‹åŒ–çš„ï¼Œä»¥&lt;code&gt;ARM GICv2&lt;/code&gt;ä¸ºä¾‹ï¼Œæœ€ç»ˆå›è°ƒåˆ°&lt;code&gt;gic_irq_domain_hierarchy_ops&lt;/code&gt;ä¸­çš„å‡½æ•°ï¼›&lt;/li&gt;
&lt;li&gt;å¦‚æœå·²ç»åˆ›å»ºå¥½äº†æ˜ å°„ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥è¿›è¡Œè¿”å›&lt;code&gt;linux irq&lt;/code&gt;ä¸­æ–­å·äº†ï¼Œå¦åˆ™çš„è¯éœ€è¦&lt;code&gt;irq_domain_alloc_irqs&lt;/code&gt;æ¥åˆ›å»ºæ˜ å°„å…³ç³»ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;irq_domain_alloc_irqs&lt;/code&gt;å®Œæˆä¸¤ä¸ªå·¥ä½œï¼š
&lt;ol&gt;&lt;li&gt;é’ˆå¯¹&lt;code&gt;linux irq&lt;/code&gt;ä¸­æ–­å·åˆ›å»ºä¸€ä¸ª&lt;code&gt;irq_desc&lt;/code&gt;ä¸­æ–­æè¿°ç¬¦ï¼›&lt;/li&gt;
&lt;li&gt;è°ƒç”¨&lt;code&gt;domain-&amp;gt;ops-&amp;gt;alloc&lt;/code&gt;å‡½æ•°æ¥å®Œæˆæ˜ å°„ï¼Œåœ¨&lt;code&gt;ARM GICv2&lt;/code&gt;é©±åŠ¨ä¸­å¯¹åº”&lt;code&gt;gic_irq_domain_alloc&lt;/code&gt;å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¾ˆå…³é”®ï¼Œæ‰€ä»¥ä¸‹æ–‡ä»‹ç»ä¸€ä¸‹ï¼›&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;code&gt;gic_irq_domain_alloc&lt;/code&gt;å‡½æ•°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1771657/202006/1771657-20200605222839660-1799351554.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;gic_irq_domain_translate&lt;/code&gt;ï¼šè´Ÿè´£è§£æå‡ºè®¾å¤‡æ ‘ä¸­æè¿°çš„ä¸­æ–­å·å’Œä¸­æ–­è§¦å‘ç±»å‹ï¼ˆè¾¹ç¼˜è§¦å‘ã€ç”µå¹³è§¦å‘ç­‰ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;gic_irq_domain_map&lt;/code&gt;ï¼šå°†ç¡¬ä»¶ä¸­æ–­å·å’Œlinuxä¸­æ–­å·ç»‘å®šåˆ°ä¸€ä¸ªç»“æ„ä¸­ï¼Œä¹Ÿå°±å®Œæˆäº†æ˜ å°„ï¼Œæ­¤å¤–è¿˜ç»‘å®šäº†&lt;code&gt;irq_desc&lt;/code&gt;ç»“æ„ä¸­çš„å…¶ä»–å­—æ®µï¼Œæœ€é‡è¦çš„æ˜¯è®¾ç½®äº†&lt;code&gt;irq_desc-&amp;gt;handle_irq&lt;/code&gt;çš„å‡½æ•°æŒ‡é’ˆï¼Œè¿™ä¸ªæœ€ç»ˆæ˜¯ä¸­æ–­å“åº”æ—¶å¾€ä¸Šæ‰§è¡Œçš„å…¥å£ï¼Œè¿™ä¸ªæ˜¯å…³é”®ï¼Œä¸‹æ–‡è®²è¿°ä¸­æ–­å¤„ç†è¿‡ç¨‹æ—¶è¿˜ä¼šæåˆ°ï¼›&lt;/li&gt;
&lt;li&gt;æ ¹æ®ç¡¬ä»¶ä¸­æ–­å·çš„èŒƒå›´è®¾ç½®&lt;code&gt;irq_desc-&amp;gt;handle_irq&lt;/code&gt;çš„æŒ‡é’ˆï¼Œå…±äº«ä¸­æ–­å…¥å£ä¸º&lt;code&gt;handle_fasteoi_irq&lt;/code&gt;ï¼Œç§æœ‰ä¸­æ–­å…¥å£ä¸º&lt;code&gt;handle_percpu_devid_irq&lt;/code&gt;ï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä¸Šè¿°å‡½æ•°æ‰§è¡Œå®Œæˆåï¼Œå®Œæˆäº†ä¸¤å¤§å·¥ä½œï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;ç¡¬ä»¶ä¸­æ–­å·ä¸Linuxä¸­æ–­å·å®Œæˆæ˜ å°„ï¼Œå¹¶ä¸ºLinuxä¸­æ–­å·åˆ›å»ºäº†&lt;code&gt;irq_desc&lt;/code&gt;ä¸­æ–­æè¿°ç¬¦ï¼›&lt;/li&gt;
&lt;li&gt;æ•°æ®ç»“æ„çš„ç»‘å®šåŠåˆå§‹åŒ–ï¼Œå…³é”®çš„åœ°æ–¹æ˜¯è®¾ç½®äº†ä¸­æ–­å¤„ç†å¾€ä¸Šæ‰§è¡Œçš„å…¥å£ï¼›&lt;/li&gt;
&lt;/ol&gt;&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;å†çœ‹ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šä¸­æ–­æ˜¯æ€ä¹ˆæ¥æ³¨å†Œçš„ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è®¾å¤‡é©±åŠ¨ä¸­ï¼Œè·å–åˆ°äº†&lt;code&gt;irq&lt;/code&gt;ä¸­æ–­å·åï¼Œé€šå¸¸å°±ä¼šé‡‡ç”¨&lt;code&gt;request_irq/request_threaded_irq&lt;/code&gt;æ¥æ³¨å†Œä¸­æ–­ï¼Œå…¶ä¸­&lt;code&gt;request_irq&lt;/code&gt;ç”¨äºæ³¨å†Œæ™®é€šå¤„ç†çš„ä¸­æ–­ï¼Œ&lt;code&gt;request_threaded_irq&lt;/code&gt;ç”¨äºæ³¨å†Œçº¿ç¨‹åŒ–å¤„ç†çš„ä¸­æ–­ï¼›&lt;/p&gt;
&lt;p&gt;åœ¨è®²å…·ä½“çš„æ³¨å†Œæµç¨‹å‰ï¼Œå…ˆçœ‹ä¸€ä¸‹ä¸»è¦çš„ä¸­æ–­æ ‡å¿—ä½ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c&quot;&gt;#define IRQF_SHARED               0x00000080              //å¤šä¸ªè®¾å¤‡å…±äº«ä¸€ä¸ªä¸­æ–­å·ï¼Œéœ€è¦å¤–è®¾ç¡¬ä»¶æ”¯æŒ
#define IRQF_PROBE_SHARED       0x00000100              //ä¸­æ–­å¤„ç†ç¨‹åºå…è®¸sharing mismatchå‘ç”Ÿ
#define __IRQF_TIMER            0x00000200              //æ—¶é’Ÿä¸­æ–­
#define IRQF_PERCPU             0x00000400              //å±äºç‰¹å®šCPUçš„ä¸­æ–­
#define IRQF_NOBALANCING        0x00000800              //ç¦æ­¢åœ¨CPUä¹‹é—´è¿›è¡Œä¸­æ–­å‡è¡¡å¤„ç†
#define IRQF_IRQPOLL            0x00001000              //ä¸­æ–­è¢«ç”¨ä½œè½®è®­
#define IRQF_ONESHOT            0x00002000              //ä¸€æ¬¡æ€§è§¦å‘çš„ä¸­æ–­ï¼Œä¸èƒ½åµŒå¥—ï¼Œ1ï¼‰åœ¨ç¡¬ä»¶ä¸­æ–­å¤„ç†å®Œæˆåæ‰èƒ½æ‰“å¼€ä¸­æ–­ï¼›2ï¼‰åœ¨ä¸­æ–­çº¿ç¨‹åŒ–ä¸­ä¿æŒå…³é—­çŠ¶æ€ï¼Œç›´åˆ°è¯¥ä¸­æ–­æºä¸Šçš„æ‰€æœ‰thread_fnå‡½æ•°éƒ½æ‰§è¡Œå®Œ
#define IRQF_NO_SUSPEND         0x00004000              //ç³»ç»Ÿä¼‘çœ å”¤é†’æ“ä½œä¸­ï¼Œä¸å…³é—­è¯¥ä¸­æ–­
#define IRQF_FORCE_RESUME       0x00008000              //ç³»ç»Ÿå”¤é†’è¿‡ç¨‹ä¸­å¿…é¡»å¼ºåˆ¶æ‰“å¼€è¯¥ä¸­æ–­
#define IRQF_NO_THREAD          0x00010000              //ç¦æ­¢ä¸­æ–­çº¿ç¨‹åŒ–
#define IRQF_EARLY_RESUME       0x00020000              //ç³»ç»Ÿå”¤é†’è¿‡ç¨‹ä¸­åœ¨syscoreé˜¶æ®µresumeï¼Œè€Œä¸ç”¨ç­‰åˆ°è®¾å¤‡resumeé˜¶æ®µ
#define IRQF_COND_SUSPEND       0x00040000              //ä¸NO_SUSPENDçš„ç”¨æˆ·å…±äº«ä¸­æ–­æ—¶ï¼Œæ‰§è¡Œæœ¬è®¾å¤‡çš„ä¸­æ–­å¤„ç†å‡½æ•°
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1771657/202006/1771657-20200605223042609-247616444.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;request_irq&lt;/code&gt;ä¹Ÿæ˜¯è°ƒç”¨&lt;code&gt;request_threaded_irq&lt;/code&gt;ï¼Œåªæ˜¯åœ¨ä¼ å‚çš„æ—¶å€™ï¼Œçº¿ç¨‹å¤„ç†å‡½æ•°&lt;code&gt;thread_fn&lt;/code&gt;å‡½æ•°è®¾ç½®æˆNULLï¼›&lt;/li&gt;
&lt;li&gt;ç”±äºåœ¨ç¡¬ä»¶ä¸­æ–­å·å’ŒLinuxä¸­æ–­å·å®Œæˆæ˜ å°„åï¼Œ&lt;code&gt;irq_desc&lt;/code&gt;å·²ç»åˆ›å»ºå¥½ï¼Œå¯ä»¥é€šè¿‡&lt;code&gt;irq_to_desc&lt;/code&gt;æ¥å£å»è·å–å¯¹åº”çš„&lt;code&gt;irq_desc&lt;/code&gt;ï¼›&lt;/li&gt;
&lt;li&gt;åˆ›å»º&lt;code&gt;irqaction&lt;/code&gt;ï¼Œå¹¶åˆå§‹åŒ–è¯¥ç»“æ„ä½“ä¸­çš„å„ä¸ªå­—æ®µï¼Œå…¶ä¸­åŒ…æ‹¬ä¼ å…¥çš„ä¸­æ–­å¤„ç†å‡½æ•°èµ‹å€¼ç»™å¯¹åº”çš„å­—æ®µï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;__setup_irq&lt;/code&gt;ç”¨äºå®Œæˆä¸­æ–­çš„ç›¸å…³è®¾ç½®ï¼ŒåŒ…æ‹¬ä¸­æ–­çº¿ç¨‹åŒ–çš„å¤„ç†ï¼š
&lt;ol&gt;&lt;li&gt;ä¸­æ–­çº¿ç¨‹åŒ–ç”¨äºå‡å°‘ç³»ç»Ÿå…³ä¸­æ–­çš„æ—¶é—´ï¼Œå¢å¼ºç³»ç»Ÿçš„å®æ—¶æ€§ï¼›&lt;/li&gt;
&lt;li&gt;ARM64é»˜è®¤å¼€å¯äº†&lt;code&gt;CONFIG_IRQ_FORCED_THREADING&lt;/code&gt;ï¼Œå¼•å¯¼å‚æ•°ä¼ å…¥&lt;code&gt;threadirqs&lt;/code&gt;æ—¶ï¼Œåˆ™é™¤äº†&lt;code&gt;IRQF_NO_THREAD&lt;/code&gt;å¤–çš„ä¸­æ–­ï¼Œå…¶ä»–çš„éƒ½å°†å¼ºåˆ¶çº¿ç¨‹åŒ–å¤„ç†ï¼›&lt;/li&gt;
&lt;li&gt;ä¸­æ–­çº¿ç¨‹åŒ–ä¼šä¸ºæ¯ä¸ªä¸­æ–­éƒ½åˆ›å»ºä¸€ä¸ªå†…æ ¸çº¿ç¨‹ï¼Œå¦‚æœä¸­æ–­è¿›è¡Œå…±äº«ï¼Œå¯¹åº”&lt;code&gt;irqaction&lt;/code&gt;å°†è¿æ¥æˆé“¾è¡¨ï¼Œæ¯ä¸ª&lt;code&gt;irqaction&lt;/code&gt;éƒ½æœ‰&lt;code&gt;thread_mask&lt;/code&gt;ä½å›¾å­—æ®µï¼Œå½“æ‰€æœ‰å…±äº«ä¸­æ–­éƒ½å¤„ç†å®Œæˆåæ‰èƒ½&lt;code&gt;unmask&lt;/code&gt;ä¸­æ–­ï¼Œè§£é™¤ä¸­æ–­å±è”½ï¼›&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;32-ä¸­æ–­å¤„ç†&quot;&gt;3.2 ä¸­æ–­å¤„ç†&lt;/h2&gt;
&lt;p&gt;å½“å®Œæˆä¸­æ–­çš„æ³¨å†Œåï¼Œæ‰€æœ‰ç»“æ„çš„ç»„ç»‡å…³ç³»éƒ½å·²ç»å»ºç«‹å¥½ï¼Œå‰©ä¸‹çš„å·¥ä½œå°±æ˜¯å½“ä¿¡å·æ¥ä¸´æ—¶ï¼Œè¿›è¡Œä¸­æ–­çš„å¤„ç†å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;æ¥å›é¡¾ä¸€ä¸‹&lt;a href=&quot;https://www.cnblogs.com/LoyenWang/p/12996812.html&quot;&gt;ã€åŸåˆ›ã€‘Linuxä¸­æ–­å­ç³»ç»Ÿï¼ˆä¸€ï¼‰-ä¸­æ–­æ§åˆ¶å™¨åŠé©±åŠ¨åˆ†æ&lt;/a&gt;ä¸­çš„Arch-specificå¤„ç†æµç¨‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1771657/202006/1771657-20200605223246669-1755658498.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä¸­æ–­æ”¶åˆ°ä¹‹åï¼Œé¦–å…ˆä¼šè·³è½¬åˆ°å¼‚å¸¸å‘é‡è¡¨çš„å…¥å£å¤„ï¼Œè¿›è€Œé€çº§è¿›è¡Œå›è°ƒå¤„ç†ï¼Œæœ€ç»ˆè°ƒç”¨åˆ°&lt;code&gt;generic_handle_irq&lt;/code&gt;æ¥è¿›è¡Œä¸­æ–­å¤„ç†ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;code&gt;generic_handle_irq&lt;/code&gt;å¤„ç†å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1771657/202006/1771657-20200605223306409-238446169.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;generic_handle_irq&lt;/code&gt;å‡½æ•°æœ€ç»ˆä¼šè°ƒç”¨åˆ°&lt;code&gt;desc-&amp;gt;handle_irq()&lt;/code&gt;ï¼Œè¿™ä¸ªä¹Ÿå°±æ˜¯å¯¹åº”åˆ°ä¸Šæ–‡ä¸­åœ¨å»ºç«‹æ˜ å°„å…³ç³»çš„è¿‡ç¨‹ä¸­ï¼Œè°ƒç”¨&lt;code&gt;irq_domain_set_info&lt;/code&gt;å‡½æ•°ï¼Œè®¾ç½®å¥½äº†å‡½æ•°æŒ‡é’ˆï¼Œä¹Ÿå°±æ˜¯&lt;code&gt;handle_fasteoi_irq&lt;/code&gt;å’Œ&lt;code&gt;handle_percpu_devid_irq&lt;/code&gt;ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;handle_fasteoi_irq&lt;/code&gt;ï¼šå¤„ç†å…±äº«ä¸­æ–­ï¼Œå¹¶ä¸”éå†&lt;code&gt;irqaction&lt;/code&gt;é“¾è¡¨ï¼Œé€ä¸ªè°ƒç”¨&lt;code&gt;action-&amp;gt;handler()&lt;/code&gt;å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ­£æ˜¯è®¾å¤‡é©±åŠ¨ç¨‹åºè°ƒç”¨&lt;code&gt;request_irq/request_threaded_irq&lt;/code&gt;æ¥å£æ³¨å†Œçš„ä¸­æ–­å¤„ç†å‡½æ•°ï¼Œæ­¤å¤–å¦‚æœä¸­æ–­çº¿ç¨‹åŒ–å¤„ç†çš„è¯ï¼Œè¿˜ä¼šè°ƒç”¨&lt;code&gt;__irq_wake_thread()&lt;/code&gt;å”¤é†’å†…æ ¸çº¿ç¨‹ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;handle_percpu_devid_irq&lt;/code&gt;ï¼šå¤„ç†per-CPUä¸­æ–­å¤„ç†ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¼šåˆ†åˆ«è°ƒç”¨ä¸­æ–­æ§åˆ¶å™¨çš„å¤„ç†å‡½æ•°è¿›è¡Œç¡¬ä»¶æ“ä½œï¼Œè¯¥å‡½æ•°è°ƒç”¨&lt;code&gt;action-&amp;gt;handler()&lt;/code&gt;æ¥è¿›è¡Œä¸­æ–­å¤„ç†ï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æ¥çœ‹çœ‹ä¸­æ–­çº¿ç¨‹åŒ–å¤„ç†åçš„å”¤é†’æµç¨‹å§&lt;code&gt;__handle_irq_event_percpu-&amp;gt;__irq_wake_thread&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1771657/202006/1771657-20200605223341892-243579938.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;__handle_irq_event_percpu-&amp;gt;__irq_wake_thread&lt;/code&gt;å°†å”¤é†’&lt;code&gt;irq_thread&lt;/code&gt;ä¸­æ–­å†…æ ¸çº¿ç¨‹ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;irq_thread&lt;/code&gt;å†…æ ¸çº¿ç¨‹ï¼Œå°†æ ¹æ®æ˜¯å¦ä¸ºå¼ºåˆ¶ä¸­æ–­çº¿ç¨‹åŒ–å¯¹å‡½æ•°æŒ‡é’ˆ&lt;code&gt;handler_fn&lt;/code&gt;è¿›è¡Œåˆå§‹åŒ–ï¼Œä»¥ä¾¿åç»­è¿›è¡Œè°ƒç”¨ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;irq_thread&lt;/code&gt;å†…æ ¸çº¿ç¨‹å°†&lt;code&gt;while(!irq_wait_for_interrupt)&lt;/code&gt;å¾ªç¯è¿›è¡Œä¸­æ–­çš„å¤„ç†ï¼Œå½“æ»¡è¶³æ¡ä»¶æ—¶ï¼Œæ‰§è¡Œ&lt;code&gt;handler_fn&lt;/code&gt;ï¼Œåœ¨è¯¥å‡½æ•°ä¸­æœ€ç»ˆè°ƒç”¨&lt;code&gt;action-&amp;gt;thread_fn&lt;/code&gt;ï¼Œä¹Ÿå°±æ˜¯å®Œæˆäº†ä¸­æ–­çš„å¤„ç†ï¼›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;irq_wait_for_interrupt&lt;/code&gt;å‡½æ•°ï¼Œå°†ä¼šåˆ¤æ–­ä¸­æ–­çº¿ç¨‹çš„å”¤é†’æ¡ä»¶ï¼Œå¦‚æœæ»¡è¶³äº†ï¼Œåˆ™å°†å½“å‰ä»»åŠ¡è®¾ç½®æˆ&lt;code&gt;TASK_RUNNING&lt;/code&gt;çŠ¶æ€ï¼Œå¹¶è¿”å›0ï¼Œè¿™æ ·å°±èƒ½æ‰§è¡Œä¸­æ–­çš„å¤„ç†ï¼Œå¦åˆ™å°±è°ƒç”¨&lt;code&gt;schedule()&lt;/code&gt;è¿›è¡Œè°ƒåº¦ï¼Œè®©å‡ºCPUï¼Œå¹¶å°†ä»»åŠ¡è®¾ç½®æˆ&lt;code&gt;TASK_INTERRUPTIBLE&lt;/code&gt;å¯ä¸­æ–­ç¡çœ çŠ¶æ€ï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;33-æ€»ç»“&quot;&gt;3.3 æ€»ç»“&lt;/h2&gt;
&lt;p&gt;ä¸­æ–­çš„å¤„ç†ï¼Œæ€»ä½“æ¥è¯´å¯ä»¥åˆ†ä¸ºä¸¤éƒ¨åˆ†æ¥çœ‹ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;ä»ä¸Šåˆ°ä¸‹ï¼šå›´ç»•&lt;code&gt;irq_desc&lt;/code&gt;ä¸­æ–­æè¿°ç¬¦å»ºç«‹å¥½è¿æ¥å…³ç³»ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±åŒ…æ‹¬ï¼šä¸­æ–­æºä¿¡æ¯çš„è§£æï¼ˆè®¾å¤‡æ ‘ï¼‰ï¼Œç¡¬ä»¶ä¸­æ–­å·åˆ°Linuxä¸­æ–­å·çš„æ˜ å°„å…³ç³»ã€&lt;code&gt;irq_desc&lt;/code&gt;ç»“æ„çš„åˆ†é…åŠåˆå§‹åŒ–ï¼ˆå†…éƒ¨å„ä¸ªç»“æ„çš„ç»„ç»‡å…³ç³»ï¼‰ã€ä¸­æ–­çš„æ³¨å†Œï¼ˆå¡«å……&lt;code&gt;irq_desc&lt;/code&gt;ç»“æ„ï¼ŒåŒ…æ‹¬handlerå¤„ç†å‡½æ•°ï¼‰ç­‰ï¼Œæ€»è€Œè¨€ä¹‹ï¼Œå°±æ˜¯å®Œæˆé™æ€å…³ç³»åˆ›å»ºï¼Œä¸ºä¸­æ–­å¤„ç†åšå¥½å‡†å¤‡ï¼›&lt;/li&gt;
&lt;li&gt;ä»ä¸‹åˆ°ä¸Šï¼Œå½“å¤–è®¾è§¦å‘ä¸­æ–­ä¿¡å·æ—¶ï¼Œä¸­æ–­æ§åˆ¶å™¨æ¥æ”¶åˆ°ä¿¡å·å¹¶å‘é€åˆ°å¤„ç†å™¨ï¼Œæ­¤æ—¶å¤„ç†å™¨è¿›è¡Œå¼‚å¸¸æ¨¡å¼åˆ‡æ¢ï¼Œå¹¶é€æ­¥ä»å¤„ç†å™¨æ¶æ„ç›¸å…³ä»£ç é€çº§å›è°ƒã€‚å¦‚æœæ¶‰åŠåˆ°ä¸­æ–­çº¿ç¨‹åŒ–ï¼Œåˆ™è¿˜éœ€è¦è¿›è¡Œä¸­æ–­å†…æ ¸çº¿ç¨‹çš„å”¤é†’æ“ä½œï¼Œæœ€ç»ˆå®Œæˆä¸­æ–­å¤„ç†å‡½æ•°çš„æ‰§è¡Œã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;æ¬¢è¿å…³æ³¨ä¸ªäººå…¬ä¼—å·ï¼Œä¸å®šæœŸåˆ†äº«Linuxå†…æ ¸æœºåˆ¶æ–‡ç« &lt;br/&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1771657/202006/1771657-20200605223526643-1362366537.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Fri, 05 Jun 2020 14:39:00 +0000</pubDate>
<dc:creator>LoyenWang</dc:creator>
<og:description>èƒŒæ™¯ Read the fucking source code! --By é²è¿… A picture is worth a thousand words. --By é«˜å°”åŸº è¯´æ˜ï¼š Kernelç‰ˆæœ¬ï¼š</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/LoyenWang/p/13052677.html</dc:identifier>
</item>
<item>
<title>Goæ–‡ä»¶æ“ä½œ - itbsl</title>
<link>http://www.cnblogs.com/itbsl/p/13052631.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/itbsl/p/13052631.html</guid>
<description>&lt;p&gt;å¯¹äºæ–‡ä»¶ï¼Œæˆ‘ä»¬å¹¶ä¸é™Œç”Ÿï¼Œæ–‡ä»¶æ˜¯æ•°æ®æº(ä¿å­˜æ•°æ®çš„åœ°æ–¹)çš„ä¸€ç§ï¼Œæ¯”å¦‚å¤§å®¶ç»å¸¸ä½¿ç”¨çš„wordæ–‡æ¡£ï¼Œtxtæ–‡ä»¶,Excelæ–‡ä»¶...ç­‰ç­‰éƒ½æ˜¯æ–‡ä»¶ã€‚æ–‡ä»¶æœ€ä¸»è¦çš„ä½œç”¨å°±æ˜¯ä¿å­˜æ•°æ®ï¼Œå®ƒæ—¢å¯ä»¥ä¿å­˜ä¸€å¼ å›¾ç‰‡ï¼Œä¹Ÿå¯ä»¥ä¿å­˜è§†é¢‘ï¼Œå£°éŸ³......&lt;br/&gt;æ–‡ä»¶åœ¨ç¨‹åºä¸­æ˜¯ä»¥æµçš„å½¢å¼æ¥æ“ä½œçš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/720430/202006/720430-20200605222309306-1647050472.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æµ&lt;/strong&gt;ï¼šæ•°æ®åœ¨æ•°æ®æº(æ–‡ä»¶)å’Œç¨‹åº(å†…å­˜)ä¹‹é—´ç»å†çš„è·¯å¾„&lt;br/&gt;è¾“å‡ºæµï¼šæ•°æ®ä»ç¨‹åº(å†…å­˜)åˆ°æ•°æ®æº(æ–‡ä»¶)çš„è·¯å¾„&lt;br/&gt;è¾“å…¥æµï¼šæ•°æ®ä»æ•°æ®æº(æ–‡ä»¶)åˆ°ç¨‹åº(å†…å­˜)çš„è·¯å¾„&lt;br/&gt;è¾“å…¥ä¸è¾“å‡ºéƒ½æ˜¯ç›¸å¯¹äºå†…å­˜è€Œè¨€çš„ï¼Œä»å†…å­˜å‘å¤–æµå°±æ˜¯è¾“å‡ºï¼Œä»å¤–éƒ¨å‘å†…å­˜æµå°±æ˜¯è¾“å…¥&lt;/p&gt;
&lt;p&gt;åœ¨Goä¸­ï¼Œæˆ‘ä»¬æ“ä½œæ–‡ä»¶çš„æ–¹æ³•åœ¨osåŒ…ä¸­ï¼Œä¼šç»å¸¸ä½¿ç”¨åˆ°os.Fileç»“æ„ä½“ &lt;a href=&quot;https://studygolang.com/pkgdoc&quot;&gt;Goè¯­è¨€æ ‡å‡†åº“æ–‡æ¡£&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/720430/202006/720430-20200605222403814-1175317630.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/720430/202006/720430-20200605222435222-1135705862.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/720430/202006/720430-20200605222524234-1665009916.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;ç¤ºä¾‹1-æ‰“å¼€å’Œå…³é—­æ–‡ä»¶&quot;&gt;ç¤ºä¾‹1: æ‰“å¼€å’Œå…³é—­æ–‡ä»¶&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;package main

import (
    &quot;fmt&quot;
    &quot;os&quot;
)

func main() {

    //æ‰“å¼€æ–‡ä»¶(/Users/xxx/Go/src/file.txt)
    //æ¦‚å¿µè¯´æ˜:fileçš„å«æ³•
    //1.file å« fileå¯¹è±¡
    //2.file å« fileæŒ‡é’ˆ
    //3.file å« fileæ–‡ä»¶å¥æŸ„
    file, err := os.Open(&quot;/Users/itbsl/Go/src/file.txt&quot;)
    if err != nil {
        fmt.Println(&quot;æ–‡ä»¶æ‰“å¼€å¤±è´¥,åŸå› æ˜¯:&quot;, err)
        //os.Exit(0)
    }
    defer func() {
        //æ–‡ä»¶åŠæ—¶å…³é—­
        err = file.Close()
        if err != nil {
            fmt.Println(&quot;æ–‡ä»¶å…³é—­å¤±è´¥,åŸå› æ˜¯&quot;, err)
        }
    }()
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;ç¤ºä¾‹2-æ‰“å¼€æ–‡ä»¶å¹¶è¯»å–å†…å®¹&quot;&gt;ç¤ºä¾‹2: æ‰“å¼€æ–‡ä»¶å¹¶è¯»å–å†…å®¹&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨Read()å‡½æ•°æŒ‰ç…§å­—èŠ‚è¯»&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;package main

import (
        &quot;fmt&quot;
        &quot;io&quot;
        &quot;os&quot;
)

func main() {

        file, err := os.Open(&quot;./test.txt&quot;)
        if err != nil {
                fmt.Printf(&quot;open file failed, err:%v\n&quot;, err)
                return
        }
        defer func() {
                err = file.Close()
                if err != nil {
                        fmt.Printf(&quot;close file failed, err:%v\n&quot;, err)
                }
        }()

        var content []byte
        var tmp = make([]byte, 128)
        for {
                n, err := file.Read(tmp)
                //ä¸ºä»€ä¹ˆæ˜¯tmp[:n]è€Œä¸æ˜¯tmp[:]?
                //å› ä¸ºå½“è¯»å–åˆ°æœ€åä¸€è¡Œçš„å†…å®¹é•¿åº¦ä¸è¶³tmpçš„é•¿åº¦çš„æ—¶å€™
                //æ–°è¯»å–çš„å†…å®¹åªä¼šè¦†ç›–å‰åŠéƒ¨åˆ†ä¸Šæ¬¡è¯»å–åˆ°çš„tmpçš„å†…å®¹,
                //ååŠéƒ¨åˆ†è¿˜æ˜¯ä¸Šä¸€æ¬¡è¯»å–çš„å†…å®¹,å¦‚æœç”¨tmp[:]å°±ä¼šå¯¼è‡´
                //ååŠéƒ¨åˆ†ä¹…å†…å®¹åˆä¼šè¢«é‡æ–°èµ‹å€¼ä¸€æ¬¡,è¿™å…¶å®æ˜¯é”™è¯¯çš„
                content = append(content, tmp[:n]...)
                if err == io.EOF {//è¯»åˆ°æ–‡ä»¶æœ«å°¾
                        break
                }
        }
        fmt.Printf(&quot;è¯»å–å‡ºæ¥çš„å†…å®¹ä¸º:\n&quot;)
        fmt.Printf(&quot;%q\n&quot;, string(content))
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;ç¤ºä¾‹3-ä¸€æ¬¡æ€§è¯»å–æ–‡ä»¶&quot;&gt;ç¤ºä¾‹3: ä¸€æ¬¡æ€§è¯»å–æ–‡ä»¶&lt;/h3&gt;
&lt;p&gt;è¯»å–æ–‡ä»¶å†…å®¹å¹¶æ˜¾ç¤ºåœ¨ç»ˆç«¯ï¼Œå°†æ–‡ä»¶å†…å®¹ä¸€æ¬¡æ€§è¯»å–åˆ°ç»ˆç«¯ï¼Œé€‚ç”¨äºæ–‡ä»¶ä¸å¤§çš„æƒ…å†µã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;package main

import (
    &quot;fmt&quot;
    &quot;io/ioutil&quot;
)

func main() {

    //æ‰“å¼€æ–‡ä»¶,æ–‡ä»¶è·¯å¾„ç›¸å¯¹äºGOPATHå¼€å§‹,æˆ–è€…å†™å…¨è·¯å¾„(/Users/xxx/Go/src/file.txt)
    file, err := ioutil.ReadFile(&quot;src/file.txt&quot;)
    if err != nil {
        fmt.Println(&quot;æ–‡ä»¶æ‰“å¼€å¤±è´¥,åŸå› æ˜¯:&quot;, err)
    }

    fmt.Printf(&quot;%s&quot;, string(file))
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;ç¤ºä¾‹4-å¸¦ç¼“å†²çš„readerè¯»æ–‡ä»¶&quot;&gt;ç¤ºä¾‹4: å¸¦ç¼“å†²çš„Readerè¯»æ–‡ä»¶&lt;/h3&gt;
&lt;p&gt;è¯»å–æ–‡ä»¶çš„å†…å®¹å¹¶æ˜¾ç¤ºåœ¨ç»ˆç«¯(å¸¦ç¼“å†²åŒºçš„æ–¹å¼),ä½¿ç”¨&lt;code&gt;os.Open&lt;/code&gt;, &lt;code&gt;file.Close&lt;/code&gt;,&lt;code&gt;bufio.NewReader&lt;/code&gt;,&lt;code&gt;reader.ReadString&lt;/code&gt;å‡½æ•°å’Œæ–¹æ³•ã€‚é€‚åˆè¯»å–å¤§æ–‡ä»¶&lt;br/&gt;1.ä½¿ç”¨ReadBytesæ–¹æ³•&lt;br/&gt;ä»£ç 1:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;package main

import (
        &quot;bufio&quot;
        &quot;fmt&quot;
        &quot;io&quot;
        &quot;log&quot;
        &quot;os&quot;
)

func main() {

        file, err := os.Open(&quot;./test.txt&quot;)
        if err != nil {
                log.Fatalf(&quot;open file failed, err: %v\n&quot;, err)
        }
        defer func() {
                err = file.Close()
                if err != nil {
                        log.Fatalf(&quot;close file failed, err: %v\n&quot;, err)
                }
        }()

        //å®šä¹‰å˜é‡resultç”¨æ¥å­˜å‚¨è¯»å–ç»“æœ
        var result string
        //åˆ›å»ºä¸€ä¸ªå¸¦æœ‰ç¼“å†²åŒºçš„reader
        reader := bufio.NewReader(file)
        for {
                buf, err := reader.ReadBytes('\n')
                if err != nil &amp;amp;&amp;amp; err == io.EOF { //EOFä»£è¡¨æ–‡ä»¶çš„æœ«å°¾
                        //æ³¨æ„:ä¸ºä»€ä¹ˆè¦åˆ¤æ–­erræ˜¯å¦ç­‰äºio.EOF?
                        //å› ä¸ºå­˜åœ¨è¿™ç§æƒ…å†µ,æ–‡ä»¶æœ‰å†…å®¹çš„æœ€åé‚£ä¸€è¡Œå°¾éƒ¨æ²¡æœ‰æ¢è¡Œ
                        //å½“ä½¿ç”¨ReadBytesæˆ–è€…ReadStringæ–¹æ³•æŒ‰ç…§'\n'æ¢è¡Œè¯»å–æ—¶,è¯»åˆ°å°¾éƒ¨æ²¡æœ‰æ¢è¡Œçš„è¿™ç§æƒ…å†µæ—¶å°±ä¼šæŠ¥io.EOFé”™è¯¯
                        //æ­¤æ—¶bufæ˜¯è¯»å–åˆ°äº†å†…å®¹çš„,å¦‚æœå¿½ç•¥æ‰äº†,é‚£ä¹ˆæœ€ç»ˆçš„è¯»å–ç»“æœä¼šå°‘äº†æœ€åä¸€è¡Œçš„å†…å®¹
                        result += string(buf)
                        break
                }
                result += string(buf)
        }
        fmt.Println(result)
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä»£ç 2:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;package main

import (
        &quot;bufio&quot;
        &quot;fmt&quot;
        &quot;io&quot;
        &quot;log&quot;
        &quot;os&quot;
)

func main() {

        file, err := os.Open(&quot;./test.txt&quot;)
        if err != nil {
                log.Fatalf(&quot;open file failed, err: %v\n&quot;, err)
        }
        defer func() {
                err = file.Close()
                if err != nil {
                        log.Fatalf(&quot;close file failed, err: %v\n&quot;, err)
                }
        }()

        //å®šä¹‰å˜é‡resultç”¨æ¥å­˜å‚¨è¯»å–ç»“æœ
        var result string
        //åˆ›å»ºä¸€ä¸ªå¸¦æœ‰ç¼“å†²åŒºçš„reader
        reader := bufio.NewReader(file)
        for {
                buf, err := reader.ReadBytes('\n')
                if err != nil {
                        if err == io.EOF { //EOFä»£è¡¨æ–‡ä»¶çš„æœ«å°¾
                        //æ³¨æ„:ä¸ºä»€ä¹ˆè¦åˆ¤æ–­erræ˜¯å¦ç­‰äºio.EOF?
                        //å› ä¸ºå­˜åœ¨è¿™ç§æƒ…å†µ,æ–‡ä»¶æœ‰å†…å®¹çš„æœ€åé‚£ä¸€è¡Œå°¾éƒ¨æ²¡æœ‰æ¢è¡Œ
                        //å½“ä½¿ç”¨ReadBytesæˆ–è€…ReadStringæ–¹æ³•æŒ‰ç…§'\n'æ¢è¡Œè¯»å–æ—¶,è¯»åˆ°å°¾éƒ¨æ²¡æœ‰æ¢è¡Œçš„è¿™ç§æƒ…å†µæ—¶å°±ä¼šæŠ¥io.EOFé”™è¯¯
                        //æ­¤æ—¶bufæ˜¯è¯»å–åˆ°äº†å†…å®¹çš„,å¦‚æœå¿½ç•¥æ‰äº†,é‚£ä¹ˆæœ€ç»ˆçš„è¯»å–ç»“æœä¼šå°‘äº†æœ€åä¸€è¡Œçš„å†…å®¹
                                result += string(buf)
                                break
                        } else {
                                log.Fatalf(&quot;ReadBytes failed, err: %v\n&quot;, err)
                        }
                }
                result += string(buf)
        }
        fmt.Println(result)
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;2.ReadStringæ–¹æ³•&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;package main

import (
    &quot;bufio&quot;
    &quot;fmt&quot;
    &quot;io&quot;
    &quot;os&quot;
)

func main() {

    //æ‰“å¼€æ–‡ä»¶
    file, err := os.Open(&quot;./files/test.txt&quot;)
    if err != nil {
        fmt.Println(&quot;æ–‡ä»¶æ‰“å¼€å¤±è´¥,åŸå› æ˜¯:&quot;, err)
        return
    }

    //å½“å‡½æ•°é€€å‡ºæ—¶,è¦åŠæ—¶çš„å…³é—­file
    defer func() {
        //æ–‡ä»¶åŠæ—¶å…³é—­
        err = file.Close()
        if err != nil {
            fmt.Println(&quot;æ–‡ä»¶å…³é—­å¤±è´¥,åŸå› æ˜¯&quot;, err)
        }
    }()

    //åˆ›å»ºä¸€ä¸ª *Reader,æ˜¯å¸¦ç¼“å†²çš„
    reader := bufio.NewReader(file)
    var result string
    //å¾ªç¯è¯»å–æ–‡ä»¶å†…å®¹
    for {
        str, err := reader.ReadString('\n') //è¯»åˆ°ä¸€ä¸ªæ¢è¡Œå°±ç»“æŸ
        result += str
        if err == io.EOF {//io.EOFä»£è¡¨æ–‡ä»¶çš„æœ«å°¾
            //æ³¨æ„:å¦‚æœæ–‡ä»¶æœ€åä¸€è¡Œæ–‡å­—æ²¡æœ‰æ¢è¡Œ,åˆ™ä¼šä¸€ç›´è¯»å–åˆ°æ–‡ä»¶æœ«å°¾,
            //æ‰€ä»¥å³ä½¿æ˜¯åˆ¤æ–­è¯»åˆ°äº†æ–‡ä»¶æœ«å°¾,ä¹Ÿè¦æŠŠè¯»å–çš„å†…å®¹è¾“å‡ºä¸€ä¸‹
            break
        }
    }
    fmt.Println(result)
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;ç¤ºä¾‹5-åˆ›å»ºæ–‡ä»¶å¹¶å†™å…¥å†…å®¹&quot;&gt;ç¤ºä¾‹5: åˆ›å»ºæ–‡ä»¶å¹¶å†™å…¥å†…å®¹&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/720430/202006/720430-20200605222628825-589104591.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒä¸ªå‚æ•°:æ–‡ä»¶ä»£å¼€æ¨¡å¼(å¯ä»¥ç»„åˆ)ï¼›ç¬¬ä¸‰ä¸ªå‚æ•°:æƒé™æ§åˆ¶(å¦‚0755)&lt;br/&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/720430/202006/720430-20200605222639678-1763642532.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;package main

import (
        &quot;fmt&quot;
        &quot;os&quot;
)

func main() {

        //1.åˆ›å»ºæ–‡ä»¶file.txt
        file, err := os.OpenFile(&quot;src/file.txt&quot;, os.O_WRONLY | os.O_CREATE, 0755)
        if err != nil {
                fmt.Println(&quot;æ–‡ä»¶æ‰“å¼€/åˆ›å»ºå¤±è´¥,åŸå› æ˜¯:&quot;, err)
                return
        }

        defer func() {
                err  = file.Close()
                if err != nil {
                        fmt.Println(&quot;æ–‡ä»¶å…³é—­å¤±è´¥,åŸå› æ˜¯:&quot;, err)
                }
        }()

        //å†™å…¥æ•°æ®
        var str = &quot;æš—é»‘è¥¿æ¸¸ç‹®é©¼å²­ï¼Œæ–—æˆ˜èƒœä½›å­™æ‚Ÿç©ºã€‚\n&quot;

        for i := 0; i &amp;lt; 5; i++ {
                file.WriteString(str)
        }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;ç¤ºä¾‹6-å†™æ–‡ä»¶çš„å››ç§æ–¹å¼&quot;&gt;ç¤ºä¾‹6: å†™æ–‡ä»¶çš„å››ç§æ–¹å¼&lt;/h3&gt;
&lt;p&gt;1.ä½¿ç”¨WriteAt()æ­é…Seek()æ–¹æ³•å®ç°å†™æ–‡ä»¶åŠŸèƒ½&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;package main

import (
        &quot;io&quot;
        &quot;log&quot;
        &quot;os&quot;
)

func main() {

        file, err := os.OpenFile(&quot;./test.txt&quot;, os.O_RDWR|os.O_CREATE, 0755)
        if err != nil {
                log.Fatalf(&quot;open file failed, err: %v\n&quot;, err)
        }
        defer func() {
                err = file.Close()
                if err != nil {
                        log.Fatalf(&quot;close file failed, err: %v\n&quot;, err)
                }
        }()
    //Seek(): ä¿®æ”¹æ–‡ä»¶çš„è¯»å†™æŒ‡é’ˆä½ç½®.
    //å‚æ•°1: åç§»é‡. æ­£:å‘æ–‡ä»¶å°¾éƒ¨åç§», è´Ÿ:å‘æ–‡ä»¶å¤´éƒ¨åç§»
    //å‚æ•°2: åç§»èµ·å§‹ä½ç½®
    //       io.SeekStart: æ–‡ä»¶èµ·å§‹ä½ç½®
    //       io.SeekCurrent: æ–‡ä»¶å½“å‰ä½ç½®
    //       io.SeekEnd: æ–‡ä»¶ç»“å°¾ä½ç½®
    //è¿”å›å€¼ï¼šè¡¨ç¤ºä»æ–‡ä»¶èµ·å§‹ä½ç½®ï¼Œåˆ°å½“å‰æ–‡ä»¶è¯»å†™æŒ‡é’ˆä½ç½®çš„åç§»é‡ã€‚
    //WriteAt(): åœ¨æ–‡ä»¶æŒ‡å®šåç§»ä½ç½®,å†™å…¥[]byte,é€šå¸¸æ­é…Seek()
    //å‚æ•°1: å¾…å†™å…¥çš„æ•°æ®
    //å‚æ•°2: åç§»é‡
    //è¿”å›: å®é™…å†™å‡ºçš„å­—èŠ‚æ•°
        for i := 0; i &amp;lt; 5; i++ {
                offset, _ := file.Seek(-3, io.SeekEnd)
                _, _ = file.WriteAt([]byte(&quot;ä½ å¥½&quot;), offset)
        }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;: ç”±äºä½¿ç”¨çš„OpenFileå‡½æ•°æ‰“å¼€çš„æ–‡ä»¶ï¼Œæ‰€ä»¥åœ¨é€‰æ‹©æ‰“å¼€æ¨¡å¼çš„æ—¶å€™ä¸èƒ½é€‰æ‹©&lt;code&gt;os.O_APPEND&lt;/code&gt;æ¨¡å¼ï¼Œå› ä¸ºè¯¥æ¨¡å¼è¡¨ç¤ºçš„æ˜¯åœ¨æ–‡ä»¶æœ«å°¾è¿½åŠ ï¼Œè¿™ä¸WriteAtåœ¨æŒ‡å®šçš„ä½ç½®å†™æ˜¯æƒ³å†²çªçš„ï¼Œè™½ç„¶æˆ‘åœ¨æµ‹è¯•çš„æ—¶å€™åŠ ä¸Š&lt;code&gt;os.O_APPEND&lt;/code&gt;æ¨¡å¼å¹¶æ²¡æœ‰æŠ¥é”™ï¼Œä½†æ˜¯ä»£ç æ‰§è¡Œå®Œä¹‹åå‘ç°ï¼Œæƒ³è¦å†™å…¥çš„å†…å®¹å¹¶æ²¡æœ‰çœŸæ­£çš„å†™å…¥åˆ°æ–‡ä»¶ä¸­ã€‚&lt;br/&gt;å†™å…¥å‰&lt;br/&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/720430/202006/720430-20200605222701905-679738111.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å†™å…¥å&lt;br/&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/720430/202006/720430-20200605222711489-1916066275.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;2.ä¸€æ¬¡æ€§å†™æ–‡ä»¶&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;package main

import (
        &quot;io/ioutil&quot;
        &quot;log&quot;
)

func main() {
        str := &quot;helloæ ‘å…ˆç”Ÿ&quot;
        //å¦‚æœæ–‡ä»¶å·²å­˜åœ¨,åˆ™ä¼šæ¸…ç©ºåŸæ¥çš„å†…å®¹,å†™å…¥æ–°å†…å®¹,å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨,åˆ™ä¼šåˆ›å»ºæ–‡ä»¶å¹¶å†™å…¥å†…å®¹
        err := ioutil.WriteFile(&quot;./test.txt&quot;, []byte(str), 0755)
        if err != nil {
                log.Fatalf(&quot;å†™å…¥æ–‡ä»¶é”™è¯¯,é”™è¯¯ä¸º:%v\n&quot;, err)
        }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;3.ä½¿ç”¨å¸¦ç¼“å†²çš„æ–¹å¼å†™æ–‡ä»¶&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;package main

import (
        &quot;bufio&quot;
        &quot;fmt&quot;
        &quot;os&quot;
)

func main() {

        //1.åˆ›å»ºæ–‡ä»¶file.txt
        file, err := os.OpenFile(&quot;src/file.txt&quot;, os.O_WRONLY | os.O_CREATE | os.O_TRUNC, 0755)
        defer func() {
                err  = file.Close()
                if err != nil {
                        fmt.Println(&quot;æ–‡ä»¶å…³é—­å¤±è´¥,åŸå› æ˜¯:&quot;, err)
                }
        }()

        if err != nil {
                fmt.Println(&quot;æ–‡ä»¶åˆ›å»ºå¤±è´¥,åŸå› æ˜¯:&quot;, err)
                return
        }

        //å†™å…¥æ•°æ®
        var str = &quot;ä½ å¥½,ä¸–ç•Œ\n&quot;

        //å†™å…¥æ—¶ï¼Œä½¿ç”¨å¸¦ç¼“å­˜çš„*Writer
        writer := bufio.NewWriter(file)

        for i := 0; i &amp;lt; 5; i++ {
                writer.WriteString(str)
        }

        //å› ä¸ºwriteræ˜¯å¸¦ç¼“å­˜çš„ï¼Œå› æ­¤åœ¨è°ƒç”¨writeStringæ–¹æ³•æ—¶ï¼Œå…¶å®å†…å®¹æ˜¯å…ˆå†™å…¥åˆ°ç¼“å­˜
        //å› æ­¤éœ€è¦è°ƒç”¨Flushæ–¹æ³•ï¼Œå°†ç¼“å­˜æ•°æ®å†™å…¥åˆ°æ–‡ä»¶ä¸­ï¼Œå¦åˆ™æ–‡ä»¶ä¸­ä¼šä¸¢å¤±æ•°æ®
        writer.Flush()
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;ç¤ºä¾‹7-æŠŠä¸€ä¸ªæ–‡ä»¶å†…å®¹å†™å…¥åˆ°å¦ä¸€ä¸ªæ–‡ä»¶&quot;&gt;ç¤ºä¾‹7: æŠŠä¸€ä¸ªæ–‡ä»¶å†…å®¹å†™å…¥åˆ°å¦ä¸€ä¸ªæ–‡ä»¶&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;package main

import (
    &quot;fmt&quot;
    &quot;io/ioutil&quot;
)

func main() {

    //æ‰“å¼€æ–‡ä»¶,æ–‡ä»¶è·¯å¾„ç›¸å¯¹äºGOPATHå¼€å§‹,æˆ–è€…å†™å…¨è·¯å¾„(/Users/xxx/Go/src/file.txt)
    data, err := ioutil.ReadFile(&quot;src/1.txt&quot;)
    if err != nil {
        fmt.Println(&quot;æ–‡ä»¶æ‰“å¼€å¤±è´¥,åŸå› æ˜¯:&quot;, err)
    }

    err = ioutil.WriteFile(&quot;src/2.txt&quot;, data, 0755)

    if err != nil {
        fmt.Println(&quot;æ–‡ä»¶å†™å…¥å¤±è´¥,åŸå› æ˜¯:&quot;, err)
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;ç¤ºä¾‹8ï¼šä½¿ç”¨bufioè·å–ç”¨æˆ·è¾“å…¥&quot;&gt;ç¤ºä¾‹8ï¼šä½¿ç”¨bufioè·å–ç”¨æˆ·è¾“å…¥&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;package main

import (
    &quot;bufio&quot;
    &quot;fmt&quot;
    &quot;os&quot;
)

func main() {
    var s string
    var reader = bufio.NewReader(os.Stdin)
    s, _ = reader.ReadString('\n')
    fmt.Printf(&quot;è¯»å–åˆ°çš„å†…å®¹ä¸º:%s\n&quot;, s)
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;ç¤ºä¾‹9-åˆ¤æ–­æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å­˜åœ¨&quot;&gt;ç¤ºä¾‹9: åˆ¤æ–­æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å­˜åœ¨&lt;/h3&gt;
&lt;p&gt;Goåˆ¤æ–­æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨çš„æ–¹æ³•ä¸ºä½¿ç”¨os.Stat()å‡½æ•°è¿”å›çš„é”™è¯¯å€¼è¿›è¡Œåˆ¤æ–­:&lt;br/&gt;(1)å¦‚æœè¿”å›çš„é”™è¯¯ä¸ºnil,è¯´æ˜æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹å­˜åœ¨&lt;br/&gt;(2)å¦‚æœè¿”å›çš„ç±»å‹ä½¿ç”¨os.IsNotExist()åˆ¤æ–­ä¸ºtrue,è¯´æ˜æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ä¸å­˜åœ¨&lt;br/&gt;(3)å¦‚æœè¿”å›çš„é”™è¯¯ä¸ºå…¶å®ƒç±»å‹ï¼Œåˆ™ä¸ç¡®å®šæ˜¯å¦å­˜åœ¨&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;package main

import (
        &quot;fmt&quot;
        &quot;os&quot;
)

func main() {

        isExist, err := isFileExists(&quot;src/sfile.txt&quot;)
        if err != nil {
                fmt.Println(&quot;å‘ç”Ÿé”™è¯¯:&quot;, err)
        }

        if isExist {
                fmt.Println(&quot;å­˜åœ¨&quot;)
        } else {
                fmt.Println(&quot;ä¸å­˜åœ¨&quot;)
        }
}

//åˆ¤æ–­æ–‡ä»¶æˆ–è€…ç›®å½•æ˜¯å¦å­˜åœ¨
func isFileExists(path string) (bool, error) {

        _, err := os.Stat(path)
        if err == nil {
                return true, nil
        }
        if os.IsNotExist(err) {
                return false, nil
        }
        return false, err
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;ç¤ºä¾‹10-æ‹·è´æ–‡ä»¶ã€å›¾ç‰‡éŸ³è§†é¢‘&quot;&gt;ç¤ºä¾‹10: æ‹·è´æ–‡ä»¶ã€å›¾ç‰‡éŸ³è§†é¢‘&lt;/h3&gt;
&lt;p&gt;io.Copyæ–¹æ³•&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;package main

import (
        &quot;fmt&quot;
        &quot;io&quot;
        &quot;os&quot;
)
func CopyFile(srcFileName string, dstFileName string) (int64, error) {

        //æºæ–‡ä»¶å¤„ç†
        srcFile, err := os.Open(srcFileName)
        defer func() {
                err = srcFile.Close()
                if err != nil {
                        fmt.Println(&quot;æºæ–‡ä»¶å…³é—­å¤±è´¥,åŸå› æ˜¯:&quot;, err)
                }
        }()

        if err != nil {
                fmt.Println(&quot;æºæ–‡ä»¶æ‰“å¼€å¤±è´¥,åŸå› æ˜¯:&quot;, err)
                return 0, err
        }

        //ç›®æ ‡æ–‡ä»¶å¤„ç†
        dstFile, err := os.OpenFile(dstFileName, os.O_CREATE | os.O_WRONLY, 0755)
        defer func() {
                err = dstFile.Close()
                if err != nil {
                        fmt.Println(&quot;ç›®æ ‡æ–‡ä»¶å…³é—­å¤±è´¥,åŸå› æ˜¯:&quot;, err)
                }
        }()
        if err != nil {
                fmt.Println(&quot;ç›®æ ‡æ–‡ä»¶æ‰“å¼€å¤±è´¥,åŸå› æ˜¯:&quot;, err)
                return 0, err
        }

        return io.Copy(dstFile, srcFile)
}

func main() {

        result, err := CopyFile(&quot;src/dst.jpeg&quot;, &quot;src/å“ˆå“ˆ.jpeg&quot;)

        if err == nil {
                fmt.Println(&quot;æ‹·è´æˆåŠŸ!æ‹·è´çš„å­—èŠ‚æ•°ä¸º: &quot;, result)
        }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯¹äºå¤§æ–‡ä»¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é‡‡ç”¨ä¸‹é¢çš„æ–¹å¼&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;package main

import (
        &quot;io&quot;
        &quot;log&quot;
        &quot;os&quot;
)

func CopyFile(srcFileName string, dstFileName string) {
        //æ‰“å¼€æºæ–‡ä»¶
        srcFile, err := os.Open(srcFileName)
        if err != nil {
                log.Fatalf(&quot;æºæ–‡ä»¶è¯»å–å¤±è´¥,åŸå› æ˜¯:%v\n&quot;, err)
        }
        defer func() {
                err = srcFile.Close()
                if err != nil {
                        log.Fatalf(&quot;æºæ–‡ä»¶å…³é—­å¤±è´¥,åŸå› æ˜¯:%v\n&quot;, err)
                }
        }()

        //åˆ›å»ºç›®æ ‡æ–‡ä»¶,ç¨åä¼šå‘è¿™ä¸ªç›®æ ‡æ–‡ä»¶å†™å…¥æ‹·è´å†…å®¹
        distFile, err := os.Create(dstFileName)
        if err != nil {
                log.Fatalf(&quot;ç›®æ ‡æ–‡ä»¶åˆ›å»ºå¤±è´¥,åŸå› æ˜¯:%v\n&quot;, err)
        }
        defer func() {
                err = distFile.Close()
                if err != nil {
                        log.Fatalf(&quot;ç›®æ ‡æ–‡ä»¶å…³é—­å¤±è´¥,åŸå› æ˜¯:%v\n&quot;, err)
                }
        }()
        //å®šä¹‰æŒ‡å®šé•¿åº¦çš„å­—èŠ‚åˆ‡ç‰‡,æ¯æ¬¡æœ€å¤šè¯»å–æŒ‡å®šé•¿åº¦
        var tmp = make([]byte, 1024*4)
        //å¾ªç¯è¯»å–å¹¶å†™å…¥
        for {
                n, err := srcFile.Read(tmp)
                n, _ = distFile.Write(tmp[:n])
                if err != nil {
                        if err == io.EOF {//è¯»åˆ°äº†æ–‡ä»¶æœ«å°¾,å¹¶ä¸”å†™å…¥å®Œæ¯•,ä»»åŠ¡å®Œæˆè¿”å›(å…³é—­æ–‡ä»¶çš„æ“ä½œç”±deferæ¥å®Œæˆ)
                                return
                        } else {
                                log.Fatalf(&quot;æ‹·è´è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯,é”™è¯¯åŸå› ä¸º:%v\n&quot;, err)
                        }
                }
        }
}

func main() {
        CopyFile(&quot;./worm.mp4&quot;, &quot;./dist.mp4&quot;)
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;ç¤ºä¾‹11-éå†ç›®å½•&quot;&gt;ç¤ºä¾‹11: éå†ç›®å½•&lt;/h3&gt;
&lt;h4 id=&quot;éå†ç›®å½•&quot;&gt;éå†ç›®å½•&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;package main

//æˆ‘ä»¬è¯»å†™çš„æ–‡ä»¶ä¸€èˆ¬å­˜æ”¾äºç›®å½•ä¸­.å› æ­¤,æœ‰æ—¶éœ€è¦æŒ‡å®šåˆ°æŸä¸€ä¸ªç›®å½•ä¸‹,æ ¹æ®ç›®å½•å­˜å‚¨çš„çŠ¶å†µ
//å†è¿›è¡Œæ–‡ä»¶çš„ç‰¹å®šæ“ä½œ.æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹ç›®å½•çš„åŸºæœ¬æ“ä½œæ–¹æ³•.
import (
        &quot;fmt&quot;
        &quot;log&quot;
        &quot;os&quot;
)
//æ‰“å¼€ç›®å½•
//æ‰“å¼€ç›®å½•æˆ‘ä»¬ä¹Ÿä½¿ç”¨OpenFileå‡½æ•°,ä½†è¦æŒ‡å®šä¸åŒçš„å‚æ•°æ¥é€šçŸ¥ç³»ç»Ÿ,è¦æ‰“å¼€çš„æ˜¯ä¸€ä¸ªç›®å½•æ–‡ä»¶.
//func OpenFile(name string, flag int, perm FileMode) (file *File, err error)
//å‚æ•°1: name,è¡¨ç¤ºè¦æ‰“å¼€çš„ç›®å½•åç§°.ä½¿ç”¨ç»å¯¹è·¯å¾„è¾ƒå¤š
//å‚æ•°2: flag,è¡¨ç¤ºæ‰“å¼€æ–‡ä»¶çš„è¯»å†™æ¨¡å¼
//å‚æ•°3: perm,è¡¨ç¤ºæ‰“å¼€æƒé™.ä½†å¯¹äºç›®å½•æ¥è¯´æœ‰æ‰€ä¸åŒ,é€šå¸¸ä¼ os.ModeDir.
//è¿”å›å€¼:ç”±äºæ˜¯æ“ä½œç›®å½•,æ‰€ä»¥fileæ˜¯æŒ‡å‘ç›®å½•çš„æ–‡ä»¶æŒ‡é’ˆ.errä¸­ä¿å­˜é”™è¯¯ä¿¡æ¯

//è¯»ç›®å½•å†…å®¹
//è¿™ä¸è¯»æ–‡ä»¶æœ‰æ‰€ä¸åŒ.ç›®å½•ä¸­å­˜æ”¾çš„æ˜¯æ–‡ä»¶åå’Œå­ç›®å½•å.æ‰€ä»¥ä½¿ç”¨Readdirå‡½æ•°
//func (f *File) Readdir(n int) (fi []FileInfo, err error)
//å¦‚æœn&amp;gt;0ï¼ŒReaddirå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªæœ€å¤šnä¸ªæˆå‘˜çš„åˆ‡ç‰‡ã€‚è¿™æ—¶ï¼Œå¦‚æœReaddirè¿”å›ä¸€ä¸ªç©ºåˆ‡ç‰‡ï¼Œ
//å®ƒä¼šè¿”å›ä¸€ä¸ªénilçš„é”™è¯¯è¯´æ˜åŸå› ã€‚å¦‚æœåˆ°è¾¾äº†ç›®å½•fçš„ç»“å°¾ï¼Œè¿”å›å€¼errä¼šæ˜¯io.EOFã€‚
//
//å¦‚æœn&amp;lt;=0ï¼ŒReaddirå‡½æ•°è¿”å›ç›®å½•ä¸­å‰©ä½™æ‰€æœ‰æ–‡ä»¶å¯¹è±¡çš„FileInfoæ„æˆçš„åˆ‡ç‰‡ã€‚
//æ­¤æ—¶ï¼Œå¦‚æœReaddirè°ƒç”¨æˆåŠŸï¼ˆè¯»å–æ‰€æœ‰å†…å®¹ç›´åˆ°ç»“å°¾ï¼‰ï¼Œå®ƒä¼šè¿”å›è¯¥åˆ‡ç‰‡å’Œnilçš„é”™è¯¯å€¼ã€‚
//å¦‚æœåœ¨åˆ°è¾¾ç»“å°¾å‰é‡åˆ°é”™è¯¯ï¼Œä¼šè¿”å›ä¹‹å‰æˆåŠŸè¯»å–çš„FileInfoæ„æˆçš„åˆ‡ç‰‡å’Œè¯¥é”™è¯¯ã€‚

func main() {
        //ä¸æ¨è,å› ä¸ºé€šè¿‡æŸ¥çœ‹ioutil.ReadDir()å‡½æ•°å¯çŸ¥,å®˜æ–¹ä½¿ç”¨çš„æ˜¯os.Open()å‡½æ•°æ‰“å¼€çš„ç›®å½•
        //file, err := os.OpenFile(&quot;./dir&quot;, os.O_RDWR, os.ModeDir)
        file, err := os.Open(&quot;./dir&quot;)
        if err != nil {
                log.Fatalf(&quot;æ–‡ä»¶æ‰“å¼€å¤±è´¥,åŸå› æ˜¯:%v\n&quot;, err)
        }
        defer func() {
                err = file.Close()
                if err != nil {
                        log.Fatalf(&quot;æ–‡ä»¶å…³é—­å¤±è´¥,åŸå› æ˜¯:%v\n&quot;, err)
                }
        }()
        //Readdiræ–¹æ³•è¿”å›ä¸€ä¸ªFileInfoæ¥å£ç±»å‹çš„åˆ‡ç‰‡å’Œä¸€ä¸ªerrorç±»å‹çš„é”™è¯¯
        infos, err := file.Readdir(-1)
        for _, info := range infos {
                fmt.Printf(&quot;%v, %v\n&quot;, info.Name(), info.IsDir())
        }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;ä»…éå†ç›®å½•ï¼Œå¿½ç•¥æ–‡ä»¶&quot;&gt;ä»…éå†ç›®å½•ï¼Œå¿½ç•¥æ–‡ä»¶&lt;/h4&gt;
&lt;p&gt;æ–¹æ³•1ï¼šä½¿ç”¨osåŒ…&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;package main

import (
    &quot;fmt&quot;
    &quot;os&quot;
)

var dirNames = make([]string, 0, 50)
var pathSeparator = string(os.PathSeparator)
func traverseDir(filePath string) error {
    file, err := os.Open(filePath)
    if err != nil {
        return err
    }
    fileInfo, err := file.Readdir(0)
    if err != nil {
        return err
    }

    for _, value := range fileInfo {
        if value.IsDir() {
            dirNames = append(dirNames, value.Name())
            err = traverseDir(filePath+pathSeparator+value.Name())
            if err != nil {
                return err
            }
        }
    }
    return err
}

func main() {

    var filePath = &quot;./dir&quot;
    err := traverseDir(filePath)
    if err != nil {
        fmt.Println(err)
    }
    fmt.Println(dirNames)
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ–¹æ³•2:ä½¿ç”¨ioutilåŒ…&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;package main

import (
    &quot;fmt&quot;
    &quot;io/ioutil&quot;
    &quot;os&quot;
)

var dirNames = make([]string, 0, 50)
var pathSeparator = string(os.PathSeparator)
func traverseDir(filePath string) error {
    fileInfos, err := ioutil.ReadDir(filePath)
    if err != nil {
        return err
    }
    for _, fileInfo :=range fileInfos {
        if fileInfo.IsDir() {
            dirNames = append(dirNames, fileInfo.Name())
            err =  traverseDir(filePath+pathSeparator+fileInfo.Name())
            if err != nil {
                return err
            }
        }
    }
    return err
}

func main() {

    var filePath = &quot;./dir&quot;
    err := traverseDir(filePath)
    if err != nil {
        fmt.Println(err)
    }
    fmt.Println(dirNames)
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;ç¤ºä¾‹12-ä¿®æ”¹æ–‡ä»¶å&quot;&gt;ç¤ºä¾‹12: ä¿®æ”¹æ–‡ä»¶å&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;package main

import (
    &quot;fmt&quot;
    &quot;io/ioutil&quot;
    &quot;os&quot;
    &quot;strings&quot;
)

var pathSeparator = string(os.PathSeparator)
//é‡å‘½åæ–‡ä»¶
func renameFileName(filePath string, old string, new string) error {
    files, err := ioutil.ReadDir(filePath)
    if err != nil {
        return err
    }
    for _, fileInfo := range files {
        if !fileInfo.IsDir() {
            err = os.Rename(filePath + pathSeparator + fileInfo.Name(),
                filePath + pathSeparator + strings.Replace(fileInfo.Name(), old, new, -1),
            )
            if err != nil {
                return err
            }
        }
    }
    return err
}

func main() {
    var filePath = &quot;./dir&quot;
    err := renameFileName(filePath, &quot;f&quot;, &quot;kkk&quot;)
    if err != nil {
        fmt.Printf(&quot;é”™è¯¯: %v\n&quot;, err)
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;ç¤ºä¾‹13ï¼šåˆ›å»ºç›®å½•&quot;&gt;ç¤ºä¾‹13ï¼šåˆ›å»ºç›®å½•&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;package main

import (
        &quot;fmt&quot;
        &quot;os&quot;
)

func main() {
        //Mkdirä½¿ç”¨æŒ‡å®šçš„æƒé™å’Œåç§°åˆ›å»ºä¸€ä¸ªç›®å½•ã€‚å¦‚æœå‡ºé”™ï¼Œä¼šè¿”å›*PathErroråº•å±‚ç±»å‹çš„é”™è¯¯ã€‚
        err := os.Mkdir(&quot;./foo&quot;, 0755)
        if os.IsExist(err) {
                fmt.Println(&quot;ç›®å½•å·²å­˜åœ¨&quot;)
                return
        }

        //MkdirAllä½¿ç”¨æŒ‡å®šçš„æƒé™å’Œåç§°åˆ›å»ºä¸€ä¸ªç›®å½•ï¼ŒåŒ…æ‹¬ä»»ä½•å¿…è¦çš„ä¸Šçº§ç›®å½•ï¼Œå¹¶è¿”å›nilï¼Œå¦åˆ™è¿”å›é”™è¯¯ã€‚
        //æƒé™ä½permä¼šåº”ç”¨åœ¨æ¯ä¸€ä¸ªè¢«æœ¬å‡½æ•°åˆ›å»ºçš„ç›®å½•ä¸Šã€‚å¦‚æœpathæŒ‡å®šäº†ä¸€ä¸ªå·²ç»å­˜åœ¨çš„ç›®å½•ï¼ŒMkdirAllä¸åšä»»ä½•æ“ä½œå¹¶è¿”å›nilã€‚
        err = os.MkdirAll(&quot;./foo/bar&quot;, 0755)
        if err != nil {
                fmt.Printf(&quot;%v\n&quot;, err)
                return
        }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;ç¤ºä¾‹14ï¼šåˆ é™¤æ–‡ä»¶&quot;&gt;ç¤ºä¾‹14ï¼šåˆ é™¤æ–‡ä»¶&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;package main

import (
        &quot;fmt&quot;
        &quot;os&quot;
)

func main() {
        //Removeåˆ é™¤nameæŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•ã€‚å¦‚æœå‡ºé”™ï¼Œä¼šè¿”å›*PathErroråº•å±‚ç±»å‹çš„é”™è¯¯ã€‚
        //è¯¥æ–¹æ³•ä¸èƒ½åˆ é™¤éç©ºç›®å½•ï¼Œå¦‚æœæƒ³åˆ é™¤ç›®å½•ä»¥åŠç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨RemoveAll
        err := os.Remove(&quot;./def&quot;)
        if os.IsNotExist(err) {
                fmt.Println(&quot;æ‚¨è¦åˆ é™¤çš„æ–‡ä»¶æˆ–ç›®å½•ä¸å­˜åœ¨&quot;)
                return
        }
        if err != nil {
                fmt.Println(err)
        }

        //RemoveAllåˆ é™¤pathæŒ‡å®šçš„æ–‡ä»¶ï¼Œæˆ–ç›®å½•åŠå®ƒåŒ…å«çš„ä»»ä½•ä¸‹çº§å¯¹è±¡ã€‚
        //å®ƒä¼šå°è¯•åˆ é™¤æ‰€æœ‰ä¸œè¥¿ï¼Œé™¤éé‡åˆ°é”™è¯¯å¹¶è¿”å›ã€‚
        //å¦‚æœpathæŒ‡å®šçš„å¯¹è±¡ä¸å­˜åœ¨ï¼ŒRemoveAllä¼šè¿”å›nilè€Œä¸è¿”å›é”™è¯¯ã€‚
        err = os.RemoveAll(&quot;./def&quot;)
        if err != nil {
                fmt.Println(err)
        }
}
&lt;/code&gt;
&lt;/pre&gt;</description>
<pubDate>Fri, 05 Jun 2020 14:28:00 +0000</pubDate>
<dc:creator>itbsl</dc:creator>
<og:description>å¯¹äºæ–‡ä»¶ï¼Œæˆ‘ä»¬å¹¶ä¸é™Œç”Ÿï¼Œæ–‡ä»¶æ˜¯æ•°æ®æº(ä¿å­˜æ•°æ®çš„åœ°æ–¹)çš„ä¸€ç§ï¼Œæ¯”å¦‚å¤§å®¶ç»å¸¸ä½¿ç”¨çš„wordæ–‡æ¡£ï¼Œtxtæ–‡ä»¶,Excelæ–‡ä»¶...ç­‰ç­‰éƒ½æ˜¯æ–‡ä»¶ã€‚æ–‡ä»¶æœ€ä¸»è¦çš„ä½œç”¨å°±æ˜¯ä¿å­˜æ•°æ®ï¼Œå®ƒæ—¢å¯ä»¥ä¿å­˜ä¸€å¼ å›¾ç‰‡ï¼Œä¹Ÿå¯ä»¥ä¿</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/itbsl/p/13052631.html</dc:identifier>
</item>
<item>
<title>kubernetes podå†…æŠ“åŒ…ï¼Œtelnetæ£€æŸ¥ç½‘ç»œè¿æ¥çš„å‡ ç§æ–¹å¼ - 360linux</title>
<link>http://www.cnblogs.com/360linux/p/13052590.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/360linux/p/13052590.html</guid>
<description>&lt;p&gt;åœ¨æ—¥å¸¸kubernetesçš„è¿ç»´ä¸­ï¼Œç»å¸¸é‡åˆ°podçš„ç½‘ç»œé—®é¢˜ï¼Œå¦‚podé—´ç½‘ç»œä¸é€šï¼Œæˆ–è€…ç«¯å£ä¸é€šï¼Œæ›´å¤æ‚çš„ï¼Œéœ€è¦åœ¨å®¹å™¨é‡Œé¢æŠ“åŒ…åˆ†ææ‰èƒ½å®šä½ã€‚è€Œkubertnetsçš„åœºæ™¯ï¼Œpodä½¿ç”¨çš„é•œåƒä¸€èˆ¬éƒ½æ˜¯å°½é‡ç²¾ç®€ï¼Œå¾ˆå¤šéƒ½æ˜¯åŸºäºalpineåŸºç¡€é•œåƒåˆ¶ä½œçš„ï¼Œå› è€Œpodå†…æ²¡æœ‰pingï¼Œtelnetï¼Œncï¼Œcurlå‘½ä»¤ï¼Œæ›´åˆ«è¯´tcpdumpè¿™ç§å¤æ‚çš„å·¥å…·äº†ã€‚é™¤äº†åœ¨å®¹å™¨æˆ–è€…é•œåƒå†…ç›´æ¥å®‰è£…è¿™äº›å·¥å…·è¿™ç§æœ€åŸå§‹çš„æ³•å­ï¼Œæˆ‘ä»¬æ¢è®¨ä¸‹å…¶ä»–æ³•å­ã€‚&lt;/p&gt;

&lt;h2 id=&quot;kubectl-debugæ’ä»¶æ–¹å¼&quot;&gt;kubectl debugæ’ä»¶æ–¹å¼&lt;/h2&gt;
&lt;p&gt;é¡¹ç›®åœ°å€ &lt;a href=&quot;%5Bhttps://github.com/aylei/kubectl-debug%5D(https://mp.weixin.qq.com/s/OeJFOWrewIlRoaJZXsfrgw)&quot;&gt;kubect debug&lt;/a&gt;ï¼Œ&lt;a href=&quot;https://mp.weixin.qq.com/s/OeJFOWrewIlRoaJZXsfrgw&quot;&gt;https://github.com/aylei/kubectl-debug&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;kubectl-debug&lt;/code&gt; æ˜¯ä¸€ä¸ªç®€å•çš„ kubectl æ’ä»¶ï¼Œèƒ½å¤Ÿå¸®åŠ©ä½ ä¾¿æ·åœ°è¿›è¡Œ Kubernetes ä¸Šçš„ Pod æ’éšœè¯Šæ–­ã€‚èƒŒååšçš„äº‹æƒ…å¾ˆç®€å•: åœ¨è¿è¡Œä¸­çš„ Pod ä¸Šé¢å¤–èµ·ä¸€ä¸ªæ–°å®¹å™¨ï¼Œå¹¶å°†æ–°å®¹å™¨åŠ å…¥åˆ°ç›®æ ‡å®¹å™¨çš„ &lt;code&gt;pid&lt;/code&gt;, &lt;code&gt;network&lt;/code&gt;, &lt;code&gt;user&lt;/code&gt; ä»¥åŠ &lt;code&gt;ipc&lt;/code&gt; namespace ä¸­ï¼Œè¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥åœ¨æ–°å®¹å™¨ä¸­ç›´æ¥ç”¨ &lt;code&gt;netstat&lt;/code&gt;, &lt;code&gt;tcpdump&lt;/code&gt; è¿™äº›ç†Ÿæ‚‰çš„å·¥å…·æ¥è§£å†³é—®é¢˜äº†, è€Œæ—§å®¹å™¨å¯ä»¥ä¿æŒæœ€å°åŒ–ï¼Œä¸éœ€è¦é¢„è£…ä»»ä½•é¢å¤–çš„æ’éšœå·¥å…·ã€‚æ“ä½œæµç¨‹å¯ä»¥å‚è§å®˜æ–¹é¡¹ç›®åœ°å€æ–‡æ¡£ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€æ¡ kubectl debugå‘½ä»¤èƒŒåæ˜¯è¿™æ ·çš„&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://360linux.oss-cn-hangzhou.aliyuncs.com/img/image-20200605194618522.png&quot; alt=&quot;image-20200605194618522&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ­¥éª¤åˆ†åˆ«æ˜¯ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;æ’ä»¶æŸ¥è¯¢ ApiServerï¼šdemo-pod æ˜¯å¦å­˜åœ¨ï¼Œæ‰€åœ¨èŠ‚ç‚¹æ˜¯ä»€ä¹ˆ&lt;/li&gt;
&lt;li&gt;ApiServer è¿”å› demo-pod æ‰€åœ¨æ‰€åœ¨èŠ‚ç‚¹&lt;/li&gt;
&lt;li&gt;æ’ä»¶è¯·æ±‚åœ¨ç›®æ ‡èŠ‚ç‚¹ä¸Šåˆ›å»º Debug Agent Pod&lt;/li&gt;
&lt;li&gt;Kubelet åˆ›å»º Debug Agent Pod&lt;/li&gt;
&lt;li&gt;æ’ä»¶å‘ç° Debug Agent å·²ç» Readyï¼Œå‘èµ· debug è¯·æ±‚ï¼ˆé•¿è¿æ¥ï¼‰&lt;/li&gt;
&lt;li&gt;Debug Agent æ”¶åˆ° debug è¯·æ±‚ï¼Œåˆ›å»º Debug å®¹å™¨å¹¶åŠ å…¥ç›®æ ‡å®¹å™¨çš„å„ä¸ª Namespace ä¸­ï¼Œåˆ›å»ºå®Œæˆåï¼Œä¸ Debug å®¹å™¨çš„ tty å»ºç«‹è¿æ¥&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;æ¥ä¸‹æ¥ï¼Œå®¢æˆ·ç«¯å°±å¯ä»¥å¼€å§‹é€šè¿‡ 5ï¼Œ6 è¿™ä¸¤ä¸ªè¿æ¥å¼€å§‹ debug æ“ä½œã€‚æ“ä½œç»“æŸåï¼ŒDebug Agent æ¸…ç† Debug å®¹å™¨ï¼Œæ’ä»¶æ¸…ç† Debug Agentï¼Œä¸€æ¬¡ Debug å®Œæˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://360linux.oss-cn-hangzhou.aliyuncs.com/img/640.gif&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;ç›´æ¥è¿›å…¥å®¹å™¨net-nsæ–¹å¼&quot;&gt;ç›´æ¥è¿›å…¥å®¹å™¨net nsæ–¹å¼&lt;/h2&gt;
&lt;p&gt;æœ‰2ç§è¿›å…¥pod æ‰€åœ¨net nsçš„æ–¹å¼ï¼Œå‰æéƒ½æ˜¯éœ€è¦ç™»å½•åˆ°podæ‰€åœ¨å®¿ä¸»æœºï¼Œä¸”éœ€è¦æ‰¾å‡ºpodå¯¹åº”çš„å®¹å™¨IDæˆ–è€…åå­—ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ip-netnsæ–¹å¼&quot;&gt;ip netnsæ–¹å¼&lt;/h3&gt;
&lt;ul readability=&quot;7&quot;&gt;&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;è·å–podå¯¹åº”å®¹å™¨çš„IDæˆ–è€…name&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;pid=&quot;$(docker inspect -f '{{.State.Pid}}' &amp;lt;container_name | uuid&amp;gt;)&quot; #æ›¿æ¢ä¸ºç¯å¢ƒå®é™…çš„å®¹å™¨åå­—æˆ–è€…uuid
&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li readability=&quot;5&quot;&gt;
&lt;p&gt;åˆ›å»ºå®¹å™¨å¯¹åº”netns&lt;/p&gt;
&lt;p&gt;ip netnsä¼šåˆ°/var/run/netnsç›®å½•ä¸‹å¯»æ‰¾network namespaceï¼ŒæŠŠå®¹å™¨è¿›ç¨‹ä¸­netnsè¿æ¥åˆ°è¿™ä¸ªç›®å½•ä¸­åï¼Œip netnsæ‰ä¼šæ„ŸçŸ¥åˆ°&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;$ sudo mkdir -p /var/run/netns

#dockeré»˜è®¤ä¸ä¼šåˆ›å»ºè¿™ä¸ªé“¾æ¥ï¼Œéœ€è¦æ‰‹åŠ¨åˆ›å»º,è¿™æ—¶å€™æ‰§è¡Œip netnsï¼Œå°±åº”å½“çœ‹åˆ°é“¾æ¥è¿‡æ¥çš„network namespace
$ sudo ln -sf /proc/$pid/ns/net &quot;/var/run/netns/&amp;lt;container_name|uuid&amp;gt;&quot; 
&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;æ‰§è¡Œip netns &amp;lt;&amp;lt;container_name|uuid &amp;gt; bash,è¿›å…¥å®¹å™¨ns&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;ip netns exec &amp;lt;container_name|uuid&amp;gt;  bash
&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;æ‰§è¡Œtelnetï¼Œtcpdumpç­‰å‘½ä»¤ï¼Œæ­¤æ—¶æ‰§è¡Œip aæˆ–è€…ifconfigï¼Œåªèƒ½çœ‹åˆ°å®¹å™¨æœ¬èº«çš„IP&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://360linux.oss-cn-hangzhou.aliyuncs.com/img/image-20200605211648653.png&quot; alt=&quot;image-20200605211648653&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://360linux.oss-cn-hangzhou.aliyuncs.com/img/image-20200605212230963.png&quot; alt=&quot;image-20200605212230963&quot;/&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;å¦‚ä¸‹å›¾ï¼Œæ‰§è¡Œifconfigï¼Œåªçœ‹åˆ°å®¹å™¨æœ¬èº«çš„IPï¼Œæ­¤æ—¶æ‰§è¡Œtelnetï¼Œtcpdumpç­‰äºç›´æ¥åœ¨å®¹å™¨å†…æ“ä½œ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://360linux.oss-cn-hangzhou.aliyuncs.com/img/image-20200605212401419.png&quot; alt=&quot;image-20200605212401419&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;nsenteræ–¹å¼&quot;&gt;nsenteræ–¹å¼&lt;/h3&gt;
&lt;p&gt;nsenterä¸ºutil-linuxé‡Œé¢çš„ä¸€ä¸ªå·¥å…·ï¼Œé™¤äº†è¿›å…¥å®¹å™¨net nsï¼Œè¿˜æ”¯æŒå…¶ä»–å¾ˆå¤šæ“ä½œï¼Œå¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;pid=&quot;$(docker inspect -f '{{.State.Pid}}' &amp;lt;container_name | uuid&amp;gt;)&quot;
nsenter -t $pid -n /bin/bash
tcpdump -i eth0 -nn  #æ­¤æ—¶åˆ©ç”¨å®¿ä¸»æœºçš„tcpdumpæ‰§è¡ŒæŠ“åŒ…æ“ä½œï¼Œç­‰äºåœ¨å®¹å™¨å†…æŠ“åŒ…
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://360linux.oss-cn-hangzhou.aliyuncs.com/img/image-20200605214331582.png&quot; alt=&quot;image-20200605214331582&quot;/&gt;&lt;/p&gt;

&lt;ol&gt;&lt;li&gt;kubectl debugæ–¹å¼åŠŸèƒ½æ›´å¼ºå¤§ï¼Œç¼ºç‚¹æ˜¯éœ€è¦é™„åŠ é•œåƒï¼Œè¦åœ¨ç›®æ ‡podåˆ›å»ºdebug agentçš„å®¹å™¨ï¼Œæ¯”è¾ƒç¬¨é‡ï¼Œä½†æ˜¯ä¼˜ç‚¹æ˜¯èƒ½ä½¿ç”¨çš„å·¥å…·æ›´å¤šï¼Œä¸éœ€è¦sshåˆ°podæ‰€åœ¨èŠ‚ç‚¹ï¼Œé™¤äº†netstatï¼Œtcpdumpå·¥å…·ï¼Œè¿˜èƒ½ä½¿ç”¨htopï¼Œiostatç­‰å…¶ä»–é«˜çº§å·¥å…·ï¼Œä¸ä»…èƒ½å¯¹ç½‘ç»œè¿›è¡Œdebugï¼Œè¿˜èƒ½å¯¹IOç­‰å…¶ä»–åœºæ™¯è¿›è¡Œè¯Šæ–­ï¼Œé€‚ç”¨æ›´å¤æ‚çš„debugåœºæ™¯ã€‚&lt;/li&gt;
&lt;li&gt;ç›´æ¥è¿›å…¥å®¹å™¨net nsæ–¹å¼ç›¸å¯¹æ¯”è¾ƒè½»é‡ï¼Œå¤ç”¨podæ‰€åœ¨å®¿ä¸»æœºå·¥å…·ï¼Œä½†é±¼å’Œç†ŠæŒä¸å¯å…¼å¾—ï¼Œç¼ºç‚¹æ˜¯åªèƒ½è¿›è¡Œç½‘ç»œæ–¹é¢çš„debugï¼Œä¸”éœ€è¦sshç™»å½•åˆ°podæ‰€åœ¨èŠ‚ç‚¹æ“ä½œã€‚&lt;/li&gt;
&lt;/ol&gt;</description>
<pubDate>Fri, 05 Jun 2020 14:16:00 +0000</pubDate>
<dc:creator>360linux</dc:creator>
<og:description>èƒŒæ™¯ åœ¨æ—¥å¸¸kubernetesçš„è¿ç»´ä¸­ï¼Œç»å¸¸é‡åˆ°podçš„ç½‘ç»œé—®é¢˜ï¼Œå¦‚podé—´ç½‘ç»œä¸é€šï¼Œæˆ–è€…ç«¯å£ä¸é€šï¼Œæ›´å¤æ‚çš„ï¼Œéœ€è¦åœ¨å®¹å™¨é‡Œé¢æŠ“åŒ…åˆ†ææ‰èƒ½å®šä½ã€‚è€Œkubertnetsçš„åœºæ™¯ï¼Œpodä½¿ç”¨çš„é•œåƒä¸€èˆ¬éƒ½æ˜¯å°½</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/360linux/p/13052590.html</dc:identifier>
</item>
<item>
<title>Alinkæ¼«è°ˆ(å…­) : TF-IDFç®—æ³•çš„å®ç° - ç½—è¥¿çš„æ€è€ƒ</title>
<link>http://www.cnblogs.com/rossiXYZ/p/13052449.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/rossiXYZ/p/13052449.html</guid>
<description>&lt;p&gt;Alink æ˜¯é˜¿é‡Œå·´å·´åŸºäºå®æ—¶è®¡ç®—å¼•æ“ Flink ç ”å‘çš„æ–°ä¸€ä»£æœºå™¨å­¦ä¹ ç®—æ³•å¹³å°ï¼Œæ˜¯ä¸šç•Œé¦–ä¸ªåŒæ—¶æ”¯æŒæ‰¹å¼ç®—æ³•ã€æµå¼ç®—æ³•çš„æœºå™¨å­¦ä¹ å¹³å°ã€‚TF-IDFï¼ˆterm frequencyâ€“inverse document frequencyï¼‰æ˜¯ä¸€ç§ç”¨äºä¿¡æ¯æ£€ç´¢ä¸æ•°æ®æŒ–æ˜çš„å¸¸ç”¨åŠ æƒæŠ€æœ¯ã€‚æœ¬æ–‡å°†ä¸ºå¤§å®¶å±•ç°Alinkå¦‚ä½•å®ç°TF-IDFã€‚&lt;/p&gt;&lt;div id=&quot;cnblogs_post_body&quot; readability=&quot;681.0399897556&quot;&gt;


&lt;h2 id=&quot;0x00-æ‘˜è¦&quot;&gt;0x00 æ‘˜è¦&lt;/h2&gt;
&lt;p&gt;Alink æ˜¯é˜¿é‡Œå·´å·´åŸºäºå®æ—¶è®¡ç®—å¼•æ“ Flink ç ”å‘çš„æ–°ä¸€ä»£æœºå™¨å­¦ä¹ ç®—æ³•å¹³å°ï¼Œæ˜¯ä¸šç•Œé¦–ä¸ªåŒæ—¶æ”¯æŒæ‰¹å¼ç®—æ³•ã€æµå¼ç®—æ³•çš„æœºå™¨å­¦ä¹ å¹³å°ã€‚TF-IDFï¼ˆterm frequencyâ€“inverse document frequencyï¼‰æ˜¯ä¸€ç§ç”¨äºä¿¡æ¯æ£€ç´¢ä¸æ•°æ®æŒ–æ˜çš„å¸¸ç”¨åŠ æƒæŠ€æœ¯ã€‚æœ¬æ–‡å°†ä¸ºå¤§å®¶å±•ç°Alinkå¦‚ä½•å®ç°TF-IDFã€‚&lt;/p&gt;
&lt;h2 id=&quot;0x01-tf-idf&quot;&gt;0x01 TF-IDF&lt;/h2&gt;
&lt;p&gt;TF-IDFï¼ˆterm frequencyâ€“inverse document frequencyï¼‰æ˜¯ä¸€ç§ç»Ÿè®¡æ–¹æ³•ï¼Œä¸€ç§ç”¨äºä¿¡æ¯æ£€ç´¢ä¸æ•°æ®æŒ–æ˜çš„å¸¸ç”¨åŠ æƒæŠ€æœ¯ã€‚&lt;/p&gt;
&lt;p&gt;TFæ˜¯è¯é¢‘(Term Frequency)ï¼ŒIDFæ˜¯é€†æ–‡æœ¬é¢‘ç‡æŒ‡æ•°(Inverse Document Frequency)ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆè¦ç”¨TF-IDFï¼Ÿ&lt;strong&gt;å› ä¸ºè®¡ç®—æœºåªèƒ½è¯†åˆ«æ•°å­—ï¼Œå¯¹äºä¸€ä¸ªä¸€ä¸ªçš„å•è¯ï¼Œè®¡ç®—æœºæ˜¯çœ‹ä¸æ‡‚çš„&lt;/strong&gt;ï¼Œæ›´åˆ«è¯´æ˜¯ä¸€å¥è¯ï¼Œæˆ–æ˜¯ä¸€ç¯‡æ–‡ç« ã€‚&lt;strong&gt;è€ŒTF-IDFå°±æ˜¯ç”¨æ¥å°†æ–‡æœ¬è½¬æ¢æˆè®¡ç®—æœºçœ‹å¾—æ‡‚çš„è¯­è¨€ï¼Œæˆ–è€…è¯´æ˜¯æœºå™¨å­¦ä¹ æˆ–æ·±åº¦å­¦ä¹ æ¨¡å‹èƒ½å¤Ÿè¿›è¡Œå­¦ä¹ è®­ç»ƒçš„æ•°æ®é›†&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&quot;11-åŸç†&quot;&gt;1.1 åŸç†&lt;/h3&gt;
&lt;p&gt;TF-IDFç”¨ä»¥è¯„ä¼°ä¸€ä¸ªè¯å¯¹äºä¸€ä¸ªæ–‡ä»¶é›†æˆ–ä¸€ä¸ªè¯­æ–™åº“ä¸­çš„å…¶ä¸­ä¸€ä»½æ–‡ä»¶çš„é‡è¦ç¨‹åº¦ã€‚å­—è¯çš„é‡è¦æ€§éšç€å®ƒåœ¨æ–‡ä»¶ä¸­å‡ºç°çš„æ¬¡æ•°æˆæ­£æ¯”å¢åŠ ï¼Œä½†åŒæ—¶ä¼šéšç€å®ƒåœ¨è¯­æ–™åº“ä¸­å‡ºç°çš„é¢‘ç‡æˆåæ¯”ä¸‹é™ã€‚&lt;/p&gt;
&lt;p&gt;TF-IDFçš„ä¸»è¦æ€æƒ³æ˜¯ï¼šå¦‚æœæŸä¸ªè¯æˆ–çŸ­è¯­åœ¨ä¸€ç¯‡æ–‡ç« ä¸­å‡ºç°çš„é¢‘ç‡TFé«˜ï¼Œå¹¶ä¸”åœ¨å…¶ä»–æ–‡ç« ä¸­å¾ˆå°‘å‡ºç°ï¼Œåˆ™è®¤ä¸ºæ­¤è¯æˆ–è€…çŸ­è¯­å…·æœ‰å¾ˆå¥½çš„ç±»åˆ«åŒºåˆ†èƒ½åŠ›ï¼Œé€‚åˆç”¨æ¥åˆ†ç±»ã€‚&lt;/p&gt;
&lt;p&gt;TF-IDFå®é™…ä¸Šæ˜¯ï¼šTF * IDFï¼ŒTFè¯é¢‘(Term Frequency)ï¼ŒIDFé€†å‘æ–‡ä»¶é¢‘ç‡(Inverse Document Frequency)ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¯é¢‘&lt;/strong&gt;ï¼ˆterm frequencyï¼ŒTFï¼‰æŒ‡çš„æ˜¯æŸä¸€ä¸ªç»™å®šçš„è¯è¯­åœ¨è¯¥æ–‡ä»¶ä¸­å‡ºç°çš„é¢‘ç‡ã€‚è¿™ä¸ªæ•°å­—æ˜¯å¯¹&lt;strong&gt;è¯æ•°&lt;/strong&gt;(term count)çš„å½’ä¸€åŒ–ï¼Œä»¥é˜²æ­¢å®ƒåå‘é•¿çš„æ–‡ä»¶ï¼ˆåŒä¸€ä¸ªè¯è¯­åœ¨é•¿æ–‡ä»¶é‡Œå¯èƒ½ä¼šæ¯”çŸ­æ–‡ä»¶æœ‰æ›´é«˜çš„è¯æ•°ï¼Œè€Œä¸ç®¡è¯¥è¯è¯­é‡è¦ä¸å¦ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è€Œ&lt;strong&gt;IDFé€†å‘æ–‡ä»¶é¢‘ç‡ (inverse document frequency, IDF)&lt;/strong&gt;ååº”äº†ä¸€ä¸ªè¯åœ¨&lt;strong&gt;æ‰€æœ‰æ–‡æœ¬ï¼ˆæ•´ä¸ªæ–‡æ¡£ï¼‰&lt;/strong&gt;ä¸­å‡ºç°çš„é¢‘ç‡ï¼Œ&lt;strong&gt;å¦‚æœä¸€ä¸ªè¯åœ¨å¾ˆå¤šçš„æ–‡æœ¬ä¸­å‡ºç°ï¼Œé‚£ä¹ˆå®ƒçš„IDFå€¼åº”è¯¥ä½ã€‚è€Œåè¿‡æ¥å¦‚æœä¸€ä¸ªè¯åœ¨æ¯”è¾ƒå°‘çš„æ–‡æœ¬ä¸­å‡ºç°ï¼Œé‚£ä¹ˆå®ƒçš„IDFå€¼åº”è¯¥é«˜&lt;/strong&gt;ã€‚æ¯”å¦‚ä¸€äº›ä¸“ä¸šçš„åè¯å¦‚â€œMachine Learningâ€ã€‚è¿™æ ·çš„è¯IDFå€¼åº”è¯¥é«˜ã€‚ä¸€ä¸ªæç«¯çš„æƒ…å†µï¼Œå¦‚æœä¸€ä¸ªè¯åœ¨æ‰€æœ‰çš„æ–‡æœ¬ä¸­éƒ½å‡ºç°ï¼Œé‚£ä¹ˆå®ƒçš„IDFå€¼åº”è¯¥ä¸º0ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœå•å•ä»¥TFæˆ–è€…IDFæ¥è®¡ç®—ä¸€ä¸ªè¯çš„é‡è¦ç¨‹åº¦éƒ½æ˜¯ç‰‡é¢çš„ï¼Œå› æ­¤TF-IDFç»¼åˆäº†TFå’ŒIDFä¸¤è€…çš„ä¼˜ç‚¹ï¼Œç”¨ä»¥è¯„ä¼°&lt;strong&gt;ä¸€å­—è¯&lt;/strong&gt;å¯¹äºä¸€ä¸ªæ–‡ä»¶é›†æˆ–ä¸€ä¸ªè¯­æ–™åº“ä¸­çš„å…¶ä¸­ä¸€ä»½æ–‡ä»¶çš„é‡è¦ç¨‹åº¦ã€‚å­—è¯çš„é‡è¦æ€§éšç€å®ƒåœ¨æ–‡ä»¶ä¸­å‡ºç°çš„æ¬¡æ•°æˆæ­£æ¯”å¢åŠ ï¼Œä½†åŒæ—¶ä¼šéšç€å®ƒåœ¨è¯­æ–™åº“ä¸­å‡ºç°çš„é¢‘ç‡æˆåæ¯”ä¸‹é™ã€‚ä¸Šè¿°å¼•ç”¨æ€»ç»“å°±æ˜¯ï¼š&lt;strong&gt;ä¸€ä¸ªè¯è¯­åœ¨ä¸€ç¯‡æ–‡ç« ä¸­å‡ºç°æ¬¡æ•°è¶Šå¤š, åŒæ—¶åœ¨æ‰€æœ‰æ–‡æ¡£ä¸­å‡ºç°æ¬¡æ•°è¶Šå°‘, è¶Šèƒ½å¤Ÿä»£è¡¨è¯¥æ–‡ç« ï¼Œè¶Šèƒ½ä¸å…¶å®ƒæ–‡ç« åŒºåˆ†å¼€æ¥ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;12-è®¡ç®—æ–¹æ³•&quot;&gt;1.2 è®¡ç®—æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;TFçš„è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;\[TF_w = \frac {N_w}{N} \]&lt;/p&gt;
&lt;p&gt;å…¶ä¸­ N_w æ˜¯åœ¨æŸä¸€æ–‡æœ¬ä¸­è¯æ¡wå‡ºç°çš„æ¬¡æ•°ï¼ŒN æ˜¯è¯¥æ–‡æœ¬æ€»è¯æ¡æ•°ã€‚&lt;/p&gt;
&lt;p&gt;IDFçš„è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;\[IDF_w = log(\frac {Y}{Y_w + 1}) \]&lt;/p&gt;
&lt;p&gt;å…¶ä¸­ Y æ˜¯è¯­æ–™åº“çš„æ–‡æ¡£æ€»æ•°ï¼ŒY_w æ˜¯åŒ…å«è¯æ¡wçš„æ–‡æ¡£æ•°ï¼Œåˆ†æ¯åŠ ä¸€æ˜¯ä¸ºäº†é¿å…w æœªå‡ºç°åœ¨ä»»ä½•æ–‡æ¡£ä¸­ä»è€Œå¯¼è‡´åˆ†æ¯ä¸º0 çš„æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;TF-IDF å°±æ˜¯å°†TFå’ŒIDFç›¸ä¹˜ :&lt;/p&gt;
&lt;p&gt;\[TF-IDF_w = TF_w * IDF_w \]&lt;/p&gt;
&lt;p&gt;ä»ä»¥ä¸Šè®¡ç®—å…¬å¼ä¾¿å¯ä»¥çœ‹å‡ºï¼ŒæŸä¸€ç‰¹å®šæ–‡ä»¶å†…çš„é«˜è¯è¯­é¢‘ç‡ï¼Œä»¥åŠè¯¥è¯è¯­åœ¨æ•´ä¸ªæ–‡ä»¶é›†åˆä¸­çš„ä½æ–‡ä»¶é¢‘ç‡ï¼Œå¯ä»¥äº§ç”Ÿå‡ºé«˜æƒé‡çš„TF-IDFã€‚å› æ­¤ï¼Œ&lt;strong&gt;TF-IDFå€¾å‘äºè¿‡æ»¤æ‰å¸¸è§çš„è¯è¯­ï¼Œä¿ç•™é‡è¦çš„è¯è¯­ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;0x02-alinkç¤ºä¾‹ä»£ç &quot;&gt;0x02 Alinkç¤ºä¾‹ä»£ç &lt;/h2&gt;
&lt;h3 id=&quot;21-ç¤ºä¾‹ä»£ç &quot;&gt;2.1 ç¤ºä¾‹ä»£ç &lt;/h3&gt;
&lt;p&gt;é¦–å…ˆæˆ‘ä»¬ç»™å‡ºç¤ºä¾‹ä»£ç ï¼Œä¸‹æ–‡æ˜¯é€šè¿‡ä¸€äº›è¯­æ–™æ¥è®­ç»ƒå‡ºä¸€ä¸ªæ¨¡å‹ï¼Œç„¶åç”¨è¿™ä¸ªæ¨¡å‹æ¥åšé¢„æµ‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class DocCountVectorizerExample {

    AlgoOperator getData(boolean isBatch) {
        Row[] rows = new Row[]{
                Row.of(0, &quot;äºŒæ‰‹æ—§ä¹¦:åŒ»å­¦ç”µç£æˆåƒ&quot;),
                Row.of(1, &quot;äºŒæ‰‹ç¾å›½æ–‡å­¦é€‰è¯»ï¼ˆ ä¸‹å†Œ ï¼‰æå®œç‡®å—å¼€å¤§å­¦å‡ºç‰ˆç¤¾ 9787310003969&quot;),
                Row.of(2, &quot;äºŒæ‰‹æ­£ç‰ˆå›¾è§£è±¡æ£‹å…¥é—¨/è°¢æ©æ€ä¸»ç¼–/åé¾„å‡ºç‰ˆç¤¾&quot;),
                Row.of(3, &quot;äºŒæ‰‹ä¸­å›½ç³–å°¿ç—…æ–‡çŒ®ç´¢å¼•&quot;),
                Row.of(4, &quot;äºŒæ‰‹éƒè¾¾å¤«æ–‡é›†ï¼ˆ å›½å†…ç‰ˆ ï¼‰å…¨åäºŒå†Œé¦†è—ä¹¦&quot;)
        };

        String[] schema = new String[]{&quot;id&quot;, &quot;text&quot;};

        if (isBatch) {
            return new MemSourceBatchOp(rows, schema);
        } else {
            return new MemSourceStreamOp(rows, schema);
        }
    }

    public static void main(String[] args) throws Exception {
        DocCountVectorizerExample test = new DocCountVectorizerExample();
        BatchOperator batchData = (BatchOperator) test.getData(true);

         // åˆ†è¯
        SegmentBatchOp segment = new SegmentBatchOp() 
                                                .setSelectedCol(&quot;text&quot;)
                                                .linkFrom(batchData);
        // TF-IDFè®­ç»ƒ
        DocCountVectorizerTrainBatchOp model = new DocCountVectorizerTrainBatchOp()
                                                .setSelectedCol(&quot;text&quot;)
                                                .linkFrom(segment);
        // TF-IDFé¢„æµ‹
        DocCountVectorizerPredictBatchOp predictBatch = new 
                                                                                                                                                        DocCountVectorizerPredictBatchOp()
                                                .setSelectedCol(&quot;text&quot;)
                                                .linkFrom(model, segment);
        model.print();
        predictBatch.print();
    }
}

&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;22-tf-idfæ¨¡å‹&quot;&gt;2.2 TF-IDFæ¨¡å‹&lt;/h3&gt;
&lt;p&gt;TF-IDFæ¨¡å‹æ‰“å°å‡ºæ¥å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;model_id|model_info
--------|----------
0|{&quot;minTF&quot;:&quot;1.0&quot;,&quot;featureType&quot;:&quot;\&quot;WORD_COUNT\&quot;&quot;}
1048576|{&quot;f0&quot;:&quot;äºŒæ‰‹&quot;,&quot;f1&quot;:0.0,&quot;f2&quot;:0}
2097152|{&quot;f0&quot;:&quot;/&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:1}
3145728|{&quot;f0&quot;:&quot;å‡ºç‰ˆç¤¾&quot;,&quot;f1&quot;:0.6931471805599453,&quot;f2&quot;:2}
4194304|{&quot;f0&quot;:&quot;ï¼‰&quot;,&quot;f1&quot;:0.6931471805599453,&quot;f2&quot;:3}
5242880|{&quot;f0&quot;:&quot;ï¼ˆ&quot;,&quot;f1&quot;:0.6931471805599453,&quot;f2&quot;:4}
6291456|{&quot;f0&quot;:&quot;å…¥é—¨&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:5}
......
36700160|{&quot;f0&quot;:&quot;ç¾å›½&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:34}
37748736|{&quot;f0&quot;:&quot;è°¢æ©&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:35}
38797312|{&quot;f0&quot;:&quot;è±¡æ£‹&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:36}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;23-tf-idfé¢„æµ‹&quot;&gt;2.3 TF-IDFé¢„æµ‹&lt;/h3&gt;
&lt;p&gt;TF-IDFé¢„æµ‹ç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;id|text
--|----
0|$37$0:1.0 6:1.0 10:1.0 25:1.0 26:1.0 28:1.0
1|$37$0:1.0 1:1.0 2:1.0 4:1.0 11:1.0 15:1.0 16:1.0 19:1.0 20:1.0 32:1.0 34:1.0
2|$37$0:1.0 3:2.0 4:1.0 5:1.0 8:1.0 22:1.0 23:1.0 24:1.0 29:1.0 35:1.0 36:1.0
3|$37$0:1.0 12:1.0 27:1.0 31:1.0 33:1.0
4|$37$0:1.0 1:1.0 2:1.0 7:1.0 9:1.0 13:1.0 14:1.0 17:1.0 18:1.0 21:1.0 30:1.0
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;0x03-åˆ†è¯-segment&quot;&gt;0x03 åˆ†è¯ Segment&lt;/h2&gt;
&lt;p&gt;ä¸­æ–‡åˆ†è¯(Chinese Word Segmentation) æŒ‡çš„æ˜¯å°†ä¸€ä¸ªæ±‰å­—åºåˆ—åˆ‡åˆ†æˆä¸€ä¸ªä¸€ä¸ªå•ç‹¬çš„è¯ã€‚åˆ†è¯å°±æ˜¯å°†è¿ç»­çš„å­—åºåˆ—æŒ‰ç…§ä¸€å®šçš„è§„èŒƒé‡æ–°ç»„åˆæˆè¯åºåˆ—çš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;ç¤ºä¾‹ä»£ç ä¸­ï¼Œåˆ†è¯éƒ¨åˆ†å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;    SegmentBatchOp segment = new SegmentBatchOp() 
                                            .setSelectedCol(&quot;text&quot;)
                                            .linkFrom(batchData);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åˆ†è¯ä¸»è¦æ˜¯å¦‚ä¸‹ä¸¤ä¸ªç±»ï¼Œå…¶ä½œç”¨å°±æ˜¯æŠŠä¸­æ–‡æ–‡æ¡£åˆ†å‰²æˆå•è¯ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public final class SegmentBatchOp extends MapBatchOp &amp;lt;SegmentBatchOp&amp;gt;
        implements SegmentParams &amp;lt;SegmentBatchOp&amp;gt; {

        public SegmentBatchOp(Params params) {
                super(SegmentMapper::new, params);
        }
}

public class SegmentMapper extends SISOMapper {
        private JiebaSegmenter segmentor;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;31-ç»“å·´åˆ†è¯&quot;&gt;3.1 ç»“å·´åˆ†è¯&lt;/h3&gt;
&lt;p&gt;æœ‰ç»éªŒçš„åŒå­¦çœ‹åˆ°è¿™é‡Œå°±ä¼šéœ²å‡ºå¾®ç¬‘ï¼šç»“å·´åˆ†è¯ã€‚&lt;/p&gt;
&lt;p&gt;jiebaåˆ†è¯æ˜¯å›½å†…ä½¿ç”¨äººæ•°æœ€å¤šçš„ä¸­æ–‡åˆ†è¯å·¥å…·https://github.com/fxsjy/jiebaã€‚jiebaåˆ†è¯æ”¯æŒå››ç§åˆ†è¯æ¨¡å¼ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ç²¾ç¡®æ¨¡å¼ï¼Œè¯•å›¾å°†å¥å­æœ€ç²¾ç¡®åœ°åˆ‡å¼€ï¼Œé€‚åˆæ–‡æœ¬åˆ†æï¼›&lt;/li&gt;
&lt;li&gt;å…¨æ¨¡å¼ï¼ŒæŠŠå¥å­ä¸­æ‰€æœ‰çš„å¯ä»¥æˆè¯çš„è¯è¯­éƒ½æ‰«æå‡ºæ¥, é€Ÿåº¦éå¸¸å¿«ï¼Œä½†æ˜¯ä¸èƒ½è§£å†³æ­§ä¹‰ï¼›&lt;/li&gt;
&lt;li&gt;æœç´¢å¼•æ“æ¨¡å¼ï¼Œåœ¨ç²¾ç¡®æ¨¡å¼çš„åŸºç¡€ä¸Šï¼Œå¯¹é•¿è¯å†æ¬¡åˆ‡åˆ†ï¼Œæé«˜å¬å›ç‡ï¼Œé€‚åˆç”¨äºæœç´¢å¼•æ“åˆ†è¯ã€‚&lt;/li&gt;
&lt;li&gt;paddleæ¨¡å¼ï¼Œåˆ©ç”¨PaddlePaddleæ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œè®­ç»ƒåºåˆ—æ ‡æ³¨ï¼ˆåŒå‘GRUï¼‰ç½‘ç»œæ¨¡å‹å®ç°åˆ†è¯ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Alinkä½¿ç”¨äº†&lt;code&gt;com.alibaba.alink.operator.common.nlp.jiebasegment.viterbi.FinalSeg;&lt;/code&gt;æ¥ å®Œæˆåˆ†è¯ã€‚å…·ä½“æ˜¯åœ¨https://github.com/huaban/jieba-analysisçš„åŸºç¡€ä¸Šç¨å¾®åšäº†è°ƒæ•´ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class JiebaSegmenter implements Serializable {
    private static FinalSeg finalSeg = FinalSeg.getInstance();
    private WordDictionary wordDict;
    ......
    private Map&amp;lt;Integer, List&amp;lt;Integer&amp;gt;&amp;gt; createDAG(String sentence) 
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä»Alinkä»£ç ä¸­çœ‹ï¼Œå®ç°äº†ç´¢å¼•åˆ†è¯å’ŒæŸ¥è¯¢åˆ†è¯ä¸¤ç§æ¨¡å¼ï¼Œåº”è¯¥æ˜¯æœ‰åˆ†è¯ç²’åº¦ç²—ç»†ä¹‹åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;createDAGå‡½æ•°çš„ä½œç”¨æ˜¯ ï¼šåœ¨å¤„ç†å¥å­è¿‡ç¨‹ä¸­ï¼ŒåŸºäºå‰ç¼€è¯å…¸å®ç°é«˜æ•ˆçš„è¯å›¾æ‰«æï¼Œç”Ÿæˆå¥å­ä¸­æ±‰å­—æ‰€æœ‰å¯èƒ½æˆè¯æƒ…å†µæ‰€æ„æˆçš„æœ‰å‘æ— ç¯å›¾ (DAG)ã€‚&lt;/p&gt;
&lt;p&gt;ç»“å·´åˆ†è¯å¯¹äºæœªç™»å½•è¯ï¼Œé‡‡ç”¨äº†åŸºäºæ±‰å­—æˆè¯èƒ½åŠ›çš„ HMM æ¨¡å‹ï¼Œä½¿ç”¨äº† Viterbi ç®—æ³•ã€‚&lt;/p&gt;
&lt;h3 id=&quot;32-åˆ†è¯è¿‡ç¨‹&quot;&gt;3.2 åˆ†è¯è¿‡ç¨‹&lt;/h3&gt;
&lt;p&gt;åˆ†è¯è¿‡ç¨‹ä¸»è¦æ˜¯åœ¨SegmentMapper.mapColumnå‡½æ•°ä¸­å®Œæˆçš„ï¼Œå½“è¾“å…¥æ˜¯ &quot;äºŒæ‰‹æ—§ä¹¦:åŒ»å­¦ç”µç£æˆåƒ&quot;ï¼Œç»“å·´åˆ†è¯å°†è¿™ä¸ªå¥å­åˆ†æˆäº†å…­ä¸ªå•è¯ã€‚å…·ä½“å‚è§å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;input = &quot;äºŒæ‰‹æ—§ä¹¦:åŒ»å­¦ç”µç£æˆåƒ&quot;
tokens = {ArrayList@9619}  size = 6
 0 = {SegToken@9630} &quot;[äºŒæ‰‹, 0, 2]&quot;
 1 = {SegToken@9631} &quot;[æ—§ä¹¦, 2, 4]&quot;
 2 = {SegToken@9632} &quot;[:, 4, 5]&quot;
 3 = {SegToken@9633} &quot;[åŒ»å­¦, 5, 7]&quot;
 4 = {SegToken@9634} &quot;[ç”µç£, 7, 9]&quot;
 5 = {SegToken@9635} &quot;[æˆåƒ, 9, 11]&quot;
 
mapColumn:44, SegmentMapper (com.alibaba.alink.operator.common.nlp)
apply:-1, 35206803 (com.alibaba.alink.common.mapper.SISOMapper$$Lambda$646)
handleMap:75, SISOColsHelper (com.alibaba.alink.common.mapper)
map:52, SISOMapper (com.alibaba.alink.common.mapper)
map:21, MapperAdapter (com.alibaba.alink.common.mapper)
map:11, MapperAdapter (com.alibaba.alink.common.mapper)
collect:79, ChainedMapDriver (org.apache.flink.runtime.operators.chaining)
collect:35, CountingCollector (org.apache.flink.runtime.operators.util.metrics)
invoke:196, DataSourceTask (org.apache.flink.runtime.operators)
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;0x04-è®­ç»ƒ&quot;&gt;0x04 è®­ç»ƒ&lt;/h2&gt;
&lt;p&gt;è®­ç»ƒæ˜¯åœ¨DocCountVectorizerTrainBatchOpç±»å®Œæˆçš„ï¼Œå…¶é€šè¿‡linkFromå®Œæˆäº†æ¨¡å‹çš„æ„å»ºã€‚å…¶å®è®¡ç®—TF IDFç›¸å¯¹ ç®€å•ï¼Œå¤æ‚ä¹‹å¤„åœ¨äºä¹‹åçš„å¤§è§„æ¨¡æ’åºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public DocCountVectorizerTrainBatchOp linkFrom(BatchOperator&amp;lt;?&amp;gt;... inputs) {
        BatchOperator&amp;lt;?&amp;gt; in = checkAndGetFirst(inputs);
  
        DataSet&amp;lt;DocCountVectorizerModelData&amp;gt; resDocCountModel = generateDocCountModel(getParams(), in);

        DataSet&amp;lt;Row&amp;gt; res = resDocCountModel.mapPartition(new MapPartitionFunction&amp;lt;DocCountVectorizerModelData, Row&amp;gt;() {
            @Override
            public void mapPartition(Iterable&amp;lt;DocCountVectorizerModelData&amp;gt; modelDataList, Collector&amp;lt;Row&amp;gt; collector) {
                new DocCountVectorizerModelDataConverter().save(modelDataList.iterator().next(), collector);
            }
        });
        this.setOutput(res, new DocCountVectorizerModelDataConverter().getModelSchema());
        return this;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;41-è®¡ç®—idf&quot;&gt;4.1 è®¡ç®—IDF&lt;/h3&gt;
&lt;p&gt;è®¡ç®— IDF çš„å·¥ä½œæ˜¯åœ¨generateDocCountModelå®Œæˆçš„ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€æ­¥ é€šè¿‡DocWordSplitCountå’ŒUDTFçš„æ··åˆä½¿ç”¨å¾—åˆ°äº†&lt;strong&gt;æ–‡æ¡£ä¸­çš„å•è¯æ•°ç›®docWordCnt&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;BatchOperator&amp;lt;?&amp;gt; docWordCnt = in.udtf(
        params.get(SELECTED_COL),
        new String[] {WORD_COL_NAME, DOC_WORD_COUNT_COL_NAME},
        new DocWordSplitCount(NLPConstant.WORD_DELIMITER),
        new String[] {});
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;DocWordSplitCount.eval&lt;/code&gt;çš„è¾“å…¥æ˜¯å·²ç»åˆ†è¯çš„å¥å­ï¼Œç„¶åæŒ‰ç…§ç©ºæ ¼åˆ†è¯ï¼ŒæŒ‰ç…§å•è¯è®¡æ•°ã€‚å…¶ç»“æœæ˜¯ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;map = {HashMap@9816}  size = 6
 &quot;åŒ»å­¦&quot; -&amp;gt; {Long@9833} 1
 &quot;ç”µç£&quot; -&amp;gt; {Long@9833} 1
 &quot;:&quot; -&amp;gt; {Long@9833} 1
 &quot;æˆåƒ&quot; -&amp;gt; {Long@9833} 1
 &quot;æ—§ä¹¦&quot; -&amp;gt; {Long@9833} 1
 &quot;äºŒæ‰‹&quot; -&amp;gt; {Long@9833} 1
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç¬¬äºŒæ­¥ å¾—åˆ°äº†&lt;strong&gt;æ–‡æ¡£æ•°ç›®docCnt&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;BatchOperator docCnt = in.select(&quot;COUNT(1) AS &quot; + DOC_COUNT_COL_NAME);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™ä¸ªæ•°ç›®ä¼šå¹¿æ’­å‡ºå» &lt;code&gt;.withBroadcastSet(docCnt.getDataSet(), &quot;docCnt&quot;);ï¼Œ&lt;/code&gt;åé¢çš„CalcIdfä¼šç»§ç»­ä½¿ç”¨ï¼Œè¿›è¡Œ è¡Œæ•°ç»Ÿè®¡ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸‰æ­¥ ä¼šé€šè¿‡CalcIdf&lt;strong&gt;è®¡ç®—å‡ºæ¯ä¸€ä¸ªå•è¯çš„DFå’ŒIDF&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;openæ—¶å€™ä¼šè·å–docCntã€‚ç„¶åreduceä¼šè®¡ç®—IDFï¼Œå…·ä½“è®¡ç®—å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;double idf = Math.log((1.0 + docCnt) / (1.0 + df));
collector.collect(Row.of(featureName, -wordCount, idf));
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…·ä½“å¾—åˆ°å¦‚ä¸‹&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;df = 1.0
wordCount = 1.0
featureName = &quot;ä¸­å›½&quot;
idf = 1.0986122886681098
docCnt = 5
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œä¸€ä¸ªé‡ç‚¹æ˜¯ï¼š&lt;u&gt;è¿”å›å€¼ä¸­ï¼Œæ˜¯ -wordCountï¼Œå› ä¸ºå•è¯è¶Šå¤šæƒé‡è¶Šå°ï¼Œä¸ºäº†æ¯”è¾ƒæ‰€ä»¥å–è´Ÿ&lt;/u&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&quot;42-æ’åº&quot;&gt;4.2 æ’åº&lt;/h3&gt;
&lt;p&gt;å¾—åˆ°æ‰€æœ‰å•è¯çš„IDFä¹‹åï¼Œå°±å¾—åˆ°äº†ä¸€ä¸ªIDFå­—å…¸ï¼Œ&lt;u&gt;è¿™æ—¶å€™éœ€è¦å¯¹å­—å…¸æŒ‰ç…§æƒé‡è¿›è¡Œæ’åº&lt;/u&gt;ã€‚æ’åºå…·ä½“åˆ†ä¸ºä¸¤æ­¥ã€‚&lt;/p&gt;
&lt;h4 id=&quot;421--sortutilspsort&quot;&gt;4.2.1 SortUtils.pSort&lt;/h4&gt;
&lt;p&gt;ç¬¬ä¸€æ­¥æ˜¯SortUtils.pSortï¼Œå¤§è§„æ¨¡å¹¶è¡ŒæŠ½æ ·æ’åºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;Tuple2&amp;lt;DataSet&amp;lt;Tuple2&amp;lt;Integer, Row&amp;gt;&amp;gt;, DataSet&amp;lt;Tuple2&amp;lt;Integer, Long&amp;gt;&amp;gt;&amp;gt; partitioned = SortUtils.pSort(sortInput, 1);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™æ­¥éå¸¸å¤æ‚ï¼ŒAlinkå‚è€ƒäº†è®ºæ–‡ï¼Œå¦‚æœæœ‰å…´è¶£çš„å…„å¼Ÿå¯ä»¥æ·±å…¥äº†è§£ä¸‹ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;* reference: Yang, X. (2014). Chong gou da shu ju tong ji (1st ed., pp. 25-29).
* Note: This algorithm is improved on the base of the parallel sorting by regular sampling(PSRS).
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;pSortè¿”å›å€¼æ˜¯ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;* @return f0: dataset which is indexed by partition id, f1: dataset which has partition id and count.
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;pSortä¸­åˆåˆ†å¦‚ä¸‹å‡ æ­¥&lt;/p&gt;
&lt;h5 id=&quot;é‡‡æ ·samplesplitpoint&quot;&gt;é‡‡æ ·SampleSplitPoint&lt;/h5&gt;
&lt;p&gt;SortUtils.SampleSplitPoint.mapPartitionè¿™é‡Œå®Œæˆäº†é‡‡æ ·ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;DataSet &amp;lt;Tuple2 &amp;lt;Object, Integer&amp;gt;&amp;gt; splitPoints = input
   .mapPartition(new SampleSplitPoint(index))
   .reduceGroup(new SplitPointReducer());
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œçš„è¾“å…¥rowå°±æ˜¯ä¸Šæ–‡IDFçš„è¿”å›æ•°å€¼ã€‚&lt;/p&gt;
&lt;p&gt;ç”¨allValuesè®°å½•äº†æœ¬taskç›®å‰å¤„ç†çš„å¥å­æœ‰å¤šå°‘ä¸ªå•è¯ã€‚&lt;/p&gt;
&lt;p&gt;ç”¨splitPointsåšäº†é‡‡æ ·ã€‚å¦‚ä½•é€‰æ‹©å‘¢ï¼Œé€šè¿‡genSampleIndexå‡½æ•°ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public static Long genSampleIndex(Long splitPointIdx, Long count, Long splitPointSize) {
   splitPointIdx++;
   splitPointSize++;

   Long div = count / splitPointSize;
   Long mod = count % splitPointSize;

   return div * splitPointIdx + ((mod &amp;gt; splitPointIdx) ? splitPointIdx : mod) - 1;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åç»­æ“ä½œä¹Ÿä½¿ç”¨åŒæ ·çš„genSampleIndexå‡½æ•°æ¥åšé€‰æ‹©ï¼Œè¿™æ ·ä¿è¯åœ¨æ“ä½œæ‰€æœ‰åºåˆ—ä¸Šå¯ä»¥é€‰å–åŒæ ·çš„é‡‡æ ·ç‚¹ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;allValues = {ArrayList@10264}  size = 8  //æœ¬taskæœ‰å¤šå°‘å•è¯
 0 = {Double@10266} -2.0
 1 = {Double@10271} -1.0
 2 = {Double@10272} -1.0
 3 = {Double@10273} -1.0
 4 = {Double@10274} -1.0
 5 = {Double@10275} -1.0
 6 = {Double@10276} -1.0
 7 = {Double@10277} -1.0
 
splitPoints = {ArrayList@10265}  size = 7 //é‡‡æ ·äº†7ä¸ª
 0 = {Double@10266} -2.0
 1 = {Double@10271} -1.0
 2 = {Double@10272} -1.0
 3 = {Double@10273} -1.0
 4 = {Double@10274} -1.0
 5 = {Double@10275} -1.0
 6 = {Double@10276} -1.0
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æœ€åè¿”å›é‡‡æ ·æ•°æ®ï¼Œè¿”å›æ—¶å€™é™„å¸¦å½“å‰taskID&lt;code&gt;new Tuple2 &amp;lt;Object, Integer&amp;gt;(obj,taskId)&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæœ‰ä¸€ä¸ªtrickç‚¹&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;  for (Object obj : splitPoints) {
     Tuple2 &amp;lt;Object, Integer&amp;gt; cur
        = new Tuple2 &amp;lt;Object, Integer&amp;gt;(
        obj,
        taskId); //è¿™é‡Œè¿”å›çš„æ˜¯ç±»ä¼¼ (-5.0,2) ï¼šå…¶ä¸­2å°±æ˜¯task idï¼Œ-5.0æ˜¯-wordcountã€‚
     out.collect(cur);
  }

  out.collect(new Tuple2(
     getRuntimeContext().getNumberOfParallelSubtasks(),
     -taskId - 1));//è¿™é‡Œè¿”å›çš„æ˜¯ä¸€ä¸ªç‰¹æ®Šå…ƒç´ ï¼Œç±»ä¼¼(4,-2) ï¼šå…¶ä¸­4æ˜¯æœ¬åº”ç”¨ä¸­å¹¶è¡Œtaskæ•°ç›®ï¼Œ-2æ˜¯å½“å‰-taskId - 1ã€‚è¿™ä¸ªtaskæ•°ç›®åç»­å°±ä¼šç”¨åˆ°ã€‚
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…·ä½“æ•°æ®å‚è§å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;row = {Row@10211} &quot;ä¸­å›½,-1.0,1.0986122886681098&quot;
 fields = {Object[3]@10214} 
 
cur = {Tuple2@10286} &quot;(-5.0,2)&quot; // è¿”å›é‡‡æ ·æ•°æ®ï¼Œè¿”å›æ—¶å€™é™„å¸¦å½“å‰taskID
 f0 = {Double@10285} -5.0 // -wordcountã€‚
 f1 = {Integer@10300} 2 // å½“å‰taskID
&lt;/code&gt;
&lt;/pre&gt;
&lt;h5 id=&quot;å½’å¹¶-splitpointreducer&quot;&gt;å½’å¹¶ SplitPointReducer&lt;/h5&gt;
&lt;p&gt;&lt;u&gt;å½’å¹¶æ‰€æœ‰taskç”Ÿæˆçš„sampleã€‚ç„¶åå†æ¬¡sampleï¼ŒæŠŠsampleæ•°æ®ç»„æˆä¸€ä¸ªæ•°æ®å—ï¼Œè¿™ä¸ªæ•°æ®å—é€‰æ‹©çš„åŸåˆ™æ˜¯ï¼šæ¯ä¸ªtaskéƒ½å°½é‡é€‰æ‹©è‹¥å¹²sample&lt;/u&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¿™é‡Œå…¶å®æ˜¯æœ‰ä¸€ä¸ªè½¬æ¢ï¼Œå°±æ˜¯ä»æ­£å¸¸å•è¯çš„æŠ½æ · è½¬æ¢åˆ° æŸä¸€ç±»å•è¯çš„æŠ½æ ·ï¼Œè¿™æŸä¸€ç±»çš„æ„æ€ä¸¾ä¾‹æ˜¯ï¼šå‡ºç°æ¬¡æ•°ä¸ºä¸€ï¼Œæˆ–è€…å‡ºç°æ¬¡æ•°ä¸ºäº” è¿™ç§å•è¯&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œallæ˜¯æ‰€æœ‰é‡‡æ ·æ•°æ®ï¼Œå…¶ä¸­ä¸€ä¸ªå…ƒç´ å†…å®¹ä¸¾ä¾‹ (-5.0,2) ï¼šå…¶ä¸­2å°±æ˜¯task idï¼Œ-5.0æ˜¯-wordcountã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œç”¨ &lt;code&gt;Collections.sort(all, new PairComparator());&lt;/code&gt; æ¥å¯¹æ‰€æœ‰é‡‡æ ·æ•°æ®åšæ’åºã€‚æ’åºåŸºå‡†æ˜¯é¦–å…ˆå¯¹ -wordcountï¼Œç„¶åå¯¹task IDã€‚&lt;/p&gt;
&lt;p&gt;SplitPointReducerçš„è¿”å›é‡‡æ ·æ•°å€¼å°±ä½œä¸ºå¹¿æ’­å˜é‡å­˜å‚¨èµ·æ¥ï¼š&lt;code&gt;.withBroadcastSet(splitPoints, &quot;splitPoints&quot;);&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œçš„trickç‚¹æ˜¯ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;for (Tuple2 &amp;lt;Object, Integer&amp;gt; value : values) {
   if (value.f1 &amp;lt; 0) { 
      instanceCount = (int) value.f0;  // ç‰¹æ®Šæ•°æ®ï¼Œç±»ä¼¼(4,-2) ï¼šå…¶ä¸­4æ˜¯æœ¬åº”ç”¨ä¸­taskæ•°ç›®ï¼Œè¿™ä¸ªå°±æ˜¯åç»­é€‰æ‹©å“ªäº›taskidçš„åŸºå‡†
      continue;
   }
   all.add(new Tuple2 &amp;lt;&amp;gt;(value.f0, value.f1)); // (-5.0,2) æ­£å¸¸æ•°æ®
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é€‰æ‹©sample index &lt;code&gt;splitPoints.add(allValues.get(index));&lt;/code&gt;ä¹Ÿä½¿ç”¨äº†åŒæ ·çš„genSampleIndexã€‚&lt;/p&gt;
&lt;p&gt;è®¡ç®—ä¸­å…·ä½“æ•°æ®å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;for (int i = 0; i &amp;lt; splitPointSize; ++i) {
                int index = genSampleIndex(
                                        Long.valueOf(i),
                                        Long.valueOf(count),
                                        Long.valueOf(splitPointSize))
                                        .intValue();
                spliters.add(all.get(index));
}
for (Tuple2 &amp;lt;Object, Integer&amp;gt; spliter : spliters) {
                out.collect(spliter);
}

count = 33
all = {ArrayList@10245}  size = 33 // æ‰€æœ‰é‡‡æ ·æ•°æ®ï¼Œ
0 = {Tuple2@10256} &quot;(-5.0,2)&quot;// 2å°±æ˜¯task idï¼Œ-5.0æ˜¯-wordcountã€‚
1 = {Tuple2@10285} &quot;(-2.0,0)&quot;
......
6 = {Tuple2@10239} &quot;(-1.0,0)&quot;
7 = {Tuple2@10240} &quot;(-1.0,0)&quot;
8 = {Tuple2@10241} &quot;(-1.0,0)&quot;
9 = {Tuple2@10242} &quot;(-1.0,0)&quot;
10 = {Tuple2@10243} &quot;(-1.0,0)&quot;
11 = {Tuple2@10244} &quot;(-1.0,1)&quot;
......
16 = {Tuple2@10278} &quot;(-1.0,1)&quot;
......
24 = {Tuple2@10279} &quot;(-1.0,2)&quot;
......
32 = {Tuple2@10313} &quot;(-1.0,3)&quot;
  
// splitersæ˜¯è¿”å›ç»“æœï¼Œè¿™é‡Œåˆ†åˆ«é€‰å–äº†allä¸­indexä¸º8,16,24è¿™ä¸ªä¸‰ä¸ªrecordã€‚æ¯ä¸ªtaskéƒ½é€‰æ‹©äº†ä¸€ä¸ªå…ƒç´ ã€‚
spliters = {HashSet@10246}  size = 3
 0 = {Tuple2@10249} &quot;(-1.0,0)&quot; // task 0 è¢«é€‰æ‹©ã€‚å°±æ˜¯è¯´ï¼Œè¿™é‡Œä»task 0ä¸­é€‰æ‹©äº†ä¸€ä¸ªcountæ˜¯1çš„å…ƒç´ ï¼Œå…·ä½“é€‰æ‹©å“ªä¸ªå•è¯å…¶å®ä¸é‡è¦ï¼Œå°±æ˜¯ä¸ºäº†é€‰æ‹©countæ˜¯1çš„è¿™ç§å³å¯ã€‚
 1 = {Tuple2@10250} &quot;(-1.0,1)&quot; // task 1 è¢«é€‰æ‹©ã€‚å…·ä½“åŒä¸Šã€‚
 2 = {Tuple2@10251} &quot;(-1.0,2)&quot; // task 2 è¢«é€‰æ‹©ã€‚å…·ä½“åŒä¸Šã€‚
&lt;/code&gt;
&lt;/pre&gt;
&lt;h5 id=&quot;splitdataæŠŠçœŸå®æ•°æ®idfæ’å…¥&quot;&gt;SplitDataæŠŠçœŸå®æ•°æ®IDFæ’å…¥&lt;/h5&gt;
&lt;p&gt;use binary search to partition data into sorted subsetsã€‚å‰é¢å‡½æ•°ç»™å‡ºçš„æ˜¯è¯çš„countï¼Œä½†æ˜¯æ²¡æœ‰IDFã€‚è¿™é‡Œå°†ç”¨äºŒåˆ†æ³•æŸ¥æ‰¾ æ‰¾åˆ°IDFï¼Œç„¶åæŠŠIDFæ’å…¥åˆ°partition dataä¸­ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆè¦æ³¨æ„ä¸€ç‚¹ï¼š&lt;u&gt;splitDataçš„è¾“å…¥å°±æ˜¯åŸå§‹è¾“å…¥input, å’ŒsplitPointsçš„è¾“å…¥æ˜¯ä¸€æ · çš„&lt;/u&gt;ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;DataSet &amp;lt;Tuple2 &amp;lt;Integer, Row&amp;gt;&amp;gt; splitData = input
   .mapPartition(new SplitData(index))
   .withBroadcastSet(splitPoints, &quot;splitPoints&quot;);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;openå‡½æ•°ä¸­ä¼šå–å‡ºå¹¿æ’­å˜é‡ splitPointsã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;splitPoints = {ArrayList@10248}  size = 3
 0 = {Tuple2@10257} &quot;(-1.0,0)&quot;
 1 = {Tuple2@10258} &quot;(-1.0,1)&quot;
 2 = {Tuple2@10259} &quot;(-1.0,2)&quot;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æœ¬å‡½æ•°çš„è¾“å…¥ä¸¾ä¾‹&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;row = {Row@10232} &quot;å…¥é—¨,-1.0,1.0986122886681098&quot;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¼šåœ¨splitPointsä¸­äºŒåˆ†æ³•æŸ¥æ‰¾ï¼Œå¾—åˆ°splitsä¸­æ¯ä¸€ä¸ª sample å¯¹åº”çš„çœŸå®IDFã€‚ç„¶åå‘é€å‡ºå»ã€‚&lt;/p&gt;
&lt;p&gt;&lt;u&gt;&lt;strong&gt;è¿™é‡Œéœ€è¦ç‰¹æ®Šè¯´æ˜ä¸‹ï¼Œè¿™ä¸ªäºŒåˆ†æ³•æŸ¥æ‰¾æŸ¥æ‰¾çš„æ˜¯IDFæ•°å€¼ï¼Œæ¯”å¦‚countä¸º1çš„è¿™ç§å•è¯å¯¹åº”çš„IDFæ•°å€¼ï¼Œå¯èƒ½å¾ˆå¤šå•è¯éƒ½æ˜¯countä¸º1ï¼Œæ‰€ä»¥æ‰¾åˆ°ä¸€ä¸ªè¿™æ ·å•è¯çš„IDFå³å¯&lt;/strong&gt;&lt;/u&gt;ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;splitPoints = {ArrayList@10223}  size = 3
 0 = {Tuple2@10229} &quot;(-1.0,0)&quot;
 1 = {Tuple2@10230} &quot;(-1.0,1)&quot;
 2 = {Tuple2@10231} &quot;(-1.0,2)&quot;
curTuple.f0 = {Double@10224} -1.0
  
int bsIndex = Collections.binarySearch(splitPoints, curTuple, new PairComparator());

                int curIndex;
                if (bsIndex &amp;gt;= 0) {
                        curIndex = bsIndex;
                } else {
                        curIndex = -bsIndex - 1;
                }

// å‡è®¾å•è¯æ˜¯ &quot;å…¥é—¨&quot;ï¼Œåˆ™å‘é€çš„æ˜¯ &quot;å…¥é—¨&quot; è¿™ç±»å•è¯åœ¨æœ¬partitionçš„indexï¼Œå’Œ &quot;å…¥é—¨&quot; çš„å•è¯æœ¬èº«
// å…¶å®ï¼Œä»è°ƒè¯•è¿‡ç¨‹çœ‹ï¼Œæ˜¯å¦å‘é€å•è¯ä¿¡æ¯æœ¬èº«å¹¶ä¸é‡è¦ï¼Œå› ä¸ºæ¥ä¸‹æ¥çš„é‚£ä¸€æ­¥æ“ä½œä¸­ï¼Œå¹¶æ²¡æœ‰ç”¨åˆ°å•è¯æœ¬èº«ä¿¡æ¯
out.collect(new Tuple2 &amp;lt;&amp;gt;(curIndex, row)); 
&lt;/code&gt;
&lt;/pre&gt;
&lt;h5 id=&quot;reducegroupè®¡ç®—åŒç±»å‹å•è¯æ•°ç›®&quot;&gt;reduceGroupè®¡ç®—åŒç±»å‹å•è¯æ•°ç›®&lt;/h5&gt;
&lt;p&gt;&lt;u&gt;&lt;strong&gt;è¿™é‡Œæ˜¯è®¡ç®—åœ¨æŸä¸€partitionä¸­ï¼ŒæŸä¸€ç§ç±»å•è¯çš„æ•°ç›®ã€‚æ¯”å¦‚countä¸º1çš„å•è¯ï¼Œè¿™ç§å•è¯æ€»å…±æœ‰å¤šå°‘ä¸ª&lt;/strong&gt;&lt;/u&gt;ã€‚&lt;/p&gt;
&lt;p&gt;åç»­ä¼šæŠŠ&lt;code&gt;new Tuple2 &amp;lt;&amp;gt;(id, count)&lt;/code&gt;ä½œä¸ºpartitionCntå¹¿æ’­å˜é‡å­˜èµ·æ¥ã€‚&lt;/p&gt;
&lt;p&gt;idå°±æ˜¯è¿™ç±»å•è¯åœ¨è¿™partitionä¸­é—´çš„indexï¼Œæˆ‘ä»¬æš‚æ—¶ç§°ä¹‹ä¸ºpartition indexã€‚countå°±æ˜¯è¿™ç±»å•è¯åœ¨æœ¬partitionçš„æ•°ç›®ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;// è¾“å…¥ä¸¾ä¾‹
value = {Tuple2@10312} &quot;(0,å…¥é—¨,-1.0,1.0986122886681098)&quot;
 f0 = {Integer@10313} 0
 
// è®¡ç®—æ•°ç›®
for (Tuple2 &amp;lt;Integer, Row&amp;gt; value : values) {
                id = value.f0;
                count++;
}

out.collect(new Tuple2 &amp;lt;&amp;gt;(id, count));  
  
// è¾“å‡ºä¸¾ä¾‹ï¼Œå‡å¦‚æ˜¯åºå·ä¸º0çš„è¿™ç±»å•è¯ï¼Œå…¶æ€»ä½“æ•°ç›®æ˜¯12ã€‚è¿™ä¸ªåºå·0å°±æ˜¯è¿™ç±»å•è¯åœ¨æŸä¸€partitionä¸­çš„åºå·ã€‚å°±æ˜¯ä¸Šé¢çš„ curIndexã€‚
id = {Integer@10313} 0
count = {Long@10338} 12
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;422-localsort&quot;&gt;4.2.2 localSort&lt;/h4&gt;
&lt;p&gt;ç¬¬äºŒæ­¥æ˜¯localSortã€‚Sort a partitioned dataset. æœ€ç»ˆæ’åºå¹¶ä¸”ä¼šè¿”å›æœ€ç»ˆæ•°å€¼ï¼Œæ¯”å¦‚ (29, &quot;ä¸»ç¼–,-1.0,1.0986122886681098&quot;)ï¼Œ 29å°±æ˜¯&quot;ä¸»ç¼–&quot; è¿™ä¸ªå•è¯åœ¨ IDFå­—å…¸ä¸­çš„åºå·ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;DataSet&amp;lt;Tuple2&amp;lt;Long, Row&amp;gt;&amp;gt; ordered = localSort(partitioned.f0, partitioned.f1, 1);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;openå‡½æ•°ä¸­ä¼šè·å–partitionCntã€‚ç„¶åè®¡ç®—å‡ºæŸä¸€ç§ç±»å•è¯ï¼Œå…¶åœ¨æœ¬partitionä¹‹å‰æ‰€æœ‰partitionä¸­ï¼Œè¿™ç±»å•è¯æ•°ç›®ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public void open(Configuration parameters) throws Exception {
                List &amp;lt;Tuple2 &amp;lt;Integer, Long&amp;gt;&amp;gt; bc = getRuntimeContext().getBroadcastVariable(&quot;partitionCnt&quot;);
                startIdx = 0L;
                int taskId = getRuntimeContext().getIndexOfThisSubtask();
                for (Tuple2 &amp;lt;Integer, Long&amp;gt; pcnt : bc) {
                        if (pcnt.f0 &amp;lt; taskId) {
                                        startIdx += pcnt.f1;
                        }
                }
}

bc = {ArrayList@10303}  size = 4
 0 = {Tuple2@10309} &quot;(0,12)&quot;  // å°±æ˜¯task0é‡Œé¢ï¼Œè¿™ç§å•è¯æœ‰12ä¸ª
 1 = {Tuple2@10310} &quot;(2,9)&quot;// å°±æ˜¯task1é‡Œé¢ï¼Œè¿™ç§å•è¯æœ‰2ä¸ª
 2 = {Tuple2@10311} &quot;(1,7)&quot;// å°±æ˜¯task2é‡Œé¢ï¼Œè¿™ç§å•è¯æœ‰1ä¸ª
 3 = {Tuple2@10312} &quot;(3,9)&quot;// å°±æ˜¯task3é‡Œé¢ï¼Œè¿™ç§å•è¯æœ‰3ä¸ª
// å¦‚æœæœ¬task idæ˜¯4,åˆ™å…¶startIdxä¸º30ã€‚å°±æ˜¯æ‰€æœ‰partitionä¹‹ä¸­ï¼Œå®ƒå‰é¢indexæ‰€æœ‰å•è¯çš„å’Œã€‚  
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç„¶åè¿›è¡Œæ’åºã€‚&lt;code&gt;Collections.sort(valuesList, new RowComparator(field));&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;valuesList = {ArrayList@10405}  size = 9
 0 = {Row@10421} &quot;:,-1.0,1.0986122886681098&quot;
 1 = {Row@10422} &quot;ä¸»ç¼–,-1.0,1.0986122886681098&quot;
 2 = {Row@10423} &quot;å›½å†…,-1.0,1.0986122886681098&quot;
 3 = {Row@10424} &quot;æ–‡çŒ®,-1.0,1.0986122886681098&quot;
 4 = {Row@10425} &quot;æå®œç‡®,-1.0,1.0986122886681098&quot;
 5 = {Row@10426} &quot;ç³–å°¿ç—…,-1.0,1.0986122886681098&quot;
 6 = {Row@10427} &quot;ç¾å›½,-1.0,1.0986122886681098&quot;
 7 = {Row@10428} &quot;è°¢æ©,-1.0,1.0986122886681098&quot;
 8 = {Row@10429} &quot;è±¡æ£‹,-1.0,1.0986122886681098&quot;
  
  
// æœ€åè¿”å›æ—¶å€™ï¼Œå°±æ˜¯  (29, &quot;ä¸»ç¼–,-1.0,1.0986122886681098&quot;)ï¼Œ29å°±æ˜¯â€œä¸»ç¼–â€è¿™ä¸ªå•è¯åœ¨æœ€ç»ˆå­—å…¸ä¸­çš„åºå·ã€‚
// è¿™ä¸ªåºå·æ˜¯startIdx + cntï¼ŒstartIdxæ˜¯æŸä¸€ç§ç±»å•è¯ï¼Œå…¶åœ¨æœ¬partitionä¹‹å‰æ‰€æœ‰partitionä¸­ï¼Œè¿™ç±»å•è¯æ•°ç›®ã€‚æ¯”å¦‚åœ¨æœ¬partitionä¹‹å‰ï¼Œè¿™ç±»å•è¯æœ‰28ä¸ªï¼Œåˆ™æœ¬partitionä¸­ï¼Œä»29å¼€å§‹è®¡æ•°ã€‚å°±æ˜¯æœ€ç»ˆåºåˆ—å·
        for (Row row : valuesList) {
                out.collect(Tuple2.of(startIdx + cnt, row));
                cnt++; // è¿™é‡Œå°±æ˜¯åœ¨æŸä¸€ç±»å•è¯ä¸­ï¼Œå•è°ƒé€’å¢ï¼Œç„¶åèµ‹å€¼ä¸€ä¸ªå­—å…¸åºåˆ—è€Œå·²
        }  
cnt = 1
row = {Row@10336} &quot;ä¸»ç¼–,-1.0,1.0986122886681098&quot;
 fields = {Object[3]@10339} 
startIdx = 28
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;43-è¿‡æ»¤&quot;&gt;4.3 è¿‡æ»¤&lt;/h3&gt;
&lt;p&gt;æœ€åè¿˜è¦è¿›è¡Œè¿‡æ»¤ï¼Œå¦‚æœæ–‡å­—ä¸ªæ•°è¶…å‡ºäº†å­—å…¸å¤§å°ï¼Œå°±æŠ›å¼ƒå¤šä½™æ–‡å­—ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;ordered.filter(new FilterFunction&amp;lt;Tuple2&amp;lt;Long, Row&amp;gt;&amp;gt;() {
    @Override
    public boolean filter(Tuple2&amp;lt;Long, Row&amp;gt; value) {
        return value.f0 &amp;lt; vocabSize;
    }
})
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;0x05-ç”Ÿæˆæ¨¡å‹&quot;&gt;0x05 ç”Ÿæˆæ¨¡å‹&lt;/h2&gt;
&lt;p&gt;å…·ä½“ç”Ÿæˆæ¨¡å‹ä»£ç å¦‚ä¸‹ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;DataSet&amp;lt;DocCountVectorizerModelData&amp;gt; resDocCountModel = ordered.filter(new FilterFunction&amp;lt;Tuple2&amp;lt;Long, Row&amp;gt;&amp;gt;() {
    @Override
    public boolean filter(Tuple2&amp;lt;Long, Row&amp;gt; value) {
        return value.f0 &amp;lt; vocabSize;
    }
}).mapPartition(new BuildDocCountModel(params)).setParallelism(1);
return resDocCountModel;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…¶ä¸­å…³é”®ç±»æ˜¯ DocCountVectorizerModelData å’Œ BuildDocCountModelã€‚&lt;/p&gt;
&lt;h3 id=&quot;51-doccountvectorizermodeldata&quot;&gt;5.1 DocCountVectorizerModelData&lt;/h3&gt;
&lt;p&gt;è¿™æ˜¯å‘é‡ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;/**
 * Save the data for DocHashIDFVectorizer.
 *
 * Save a HashMap: index(MurMurHash3 value of the word), value(Inverse document frequency of the word).
 */
public class DocCountVectorizerModelData {
    public List&amp;lt;String&amp;gt; list;
    public String featureType;
    public double minTF;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;52-builddoccountmodel&quot;&gt;5.2 BuildDocCountModel&lt;/h3&gt;
&lt;p&gt;æœ€ç»ˆç”Ÿæˆçš„æ¨¡å‹ä¿¡æ¯å¦‚ä¸‹ï¼Œè¿™ä¸ªä¹Ÿå°±æ˜¯ä¹‹å‰æ ·ä¾‹ä»£ç ç»™å‡ºçš„è¾“å‡ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;modelData = {DocCountVectorizerModelData@10411} 
 list = {ArrayList@10409}  size = 37
  0 = &quot;{&quot;f0&quot;:&quot;9787310003969&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:19}&quot;
  1 = &quot;{&quot;f0&quot;:&quot;ä¸‹å†Œ&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:20}&quot;
  2 = &quot;{&quot;f0&quot;:&quot;å…¨&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:21}&quot;
  3 = &quot;{&quot;f0&quot;:&quot;åé¾„&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:22}&quot;
  4 = &quot;{&quot;f0&quot;:&quot;å›¾è§£&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:23}&quot;
  5 = &quot;{&quot;f0&quot;:&quot;æ€&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:24}&quot;
  6 = &quot;{&quot;f0&quot;:&quot;æˆåƒ&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:25}&quot;
  7 = &quot;{&quot;f0&quot;:&quot;æ—§ä¹¦&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:26}&quot;
  8 = &quot;{&quot;f0&quot;:&quot;ç´¢å¼•&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:27}&quot;
  9 = &quot;{&quot;f0&quot;:&quot;:&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:28}&quot;
  10 = &quot;{&quot;f0&quot;:&quot;ä¸»ç¼–&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:29}&quot;
  11 = &quot;{&quot;f0&quot;:&quot;å›½å†…&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:30}&quot;
  12 = &quot;{&quot;f0&quot;:&quot;æ–‡çŒ®&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:31}&quot;
  13 = &quot;{&quot;f0&quot;:&quot;æå®œç‡®&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:32}&quot;
  14 = &quot;{&quot;f0&quot;:&quot;ç³–å°¿ç—…&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:33}&quot;
  15 = &quot;{&quot;f0&quot;:&quot;ç¾å›½&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:34}&quot;
  16 = &quot;{&quot;f0&quot;:&quot;è°¢æ©&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:35}&quot;
  17 = &quot;{&quot;f0&quot;:&quot;è±¡æ£‹&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:36}&quot;
  18 = &quot;{&quot;f0&quot;:&quot;äºŒæ‰‹&quot;,&quot;f1&quot;:0.0,&quot;f2&quot;:0}&quot;
  19 = &quot;{&quot;f0&quot;:&quot;ï¼‰&quot;,&quot;f1&quot;:0.6931471805599453,&quot;f2&quot;:1}&quot;
  20 = &quot;{&quot;f0&quot;:&quot;/&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:2}&quot;
  21 = &quot;{&quot;f0&quot;:&quot;å‡ºç‰ˆç¤¾&quot;,&quot;f1&quot;:0.6931471805599453,&quot;f2&quot;:3}&quot;
  22 = &quot;{&quot;f0&quot;:&quot;ï¼ˆ&quot;,&quot;f1&quot;:0.6931471805599453,&quot;f2&quot;:4}&quot;
  23 = &quot;{&quot;f0&quot;:&quot;å…¥é—¨&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:5}&quot;
  24 = &quot;{&quot;f0&quot;:&quot;åŒ»å­¦&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:6}&quot;
  25 = &quot;{&quot;f0&quot;:&quot;æ–‡é›†&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:7}&quot;
  26 = &quot;{&quot;f0&quot;:&quot;æ­£ç‰ˆ&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:8}&quot;
  27 = &quot;{&quot;f0&quot;:&quot;ç‰ˆ&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:9}&quot;
  28 = &quot;{&quot;f0&quot;:&quot;ç”µç£&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:10}&quot;
  29 = &quot;{&quot;f0&quot;:&quot;é€‰è¯»&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:11}&quot;
  30 = &quot;{&quot;f0&quot;:&quot;ä¸­å›½&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:12}&quot;
  31 = &quot;{&quot;f0&quot;:&quot;ä¹¦&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:13}&quot;
  32 = &quot;{&quot;f0&quot;:&quot;åäºŒå†Œ&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:14}&quot;
  33 = &quot;{&quot;f0&quot;:&quot;å—å¼€å¤§å­¦&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:15}&quot;
  34 = &quot;{&quot;f0&quot;:&quot;æ–‡å­¦&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:16}&quot;
  35 = &quot;{&quot;f0&quot;:&quot;éƒè¾¾å¤«&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:17}&quot;
  36 = &quot;{&quot;f0&quot;:&quot;é¦†è—&quot;,&quot;f1&quot;:1.0986122886681098,&quot;f2&quot;:18}&quot;
 featureType = &quot;WORD_COUNT&quot;
 minTF = 1.0
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;0x06-é¢„æµ‹&quot;&gt;0x06 é¢„æµ‹&lt;/h2&gt;
&lt;p&gt;é¢„æµ‹ä¸šåŠ¡é€»è¾‘æ˜¯DocCountVectorizerModelMapper&lt;/p&gt;
&lt;p&gt;é¦–å…ˆæˆ‘ä»¬å¯ä»¥çœ‹åˆ° FeatureTypeï¼Œè¿™ä¸ªå¯ä»¥ç”¨æ¥é…ç½®è¾“å‡ºå“ªç§ä¿¡æ¯ã€‚æ¯”å¦‚å¯ä»¥è¾“å‡ºä»¥ä¸‹è‹¥å¹²ç§ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public enum FeatureType implements Serializable {
    /**
     * IDF type, the output value is inverse document frequency.
     */
    IDF(
        (idf, termFrequency, tokenRatio) -&amp;gt; idf
    ),
    /**
     * WORD_COUNT type, the output value is the word count.
     */
    WORD_COUNT(
        (idf, termFrequency, tokenRatio) -&amp;gt; termFrequency
    ),
    /**
     * TF_IDF type, the output value is term frequency * inverse document frequency.
     */
    TF_IDF(
        (idf, termFrequency, tokenRatio) -&amp;gt; idf * termFrequency * tokenRatio
    ),
    /**
     * BINARY type, the output value is 1.0.
     */
    BINARY(
        (idf, termFrequency, tokenRatio) -&amp;gt; 1.0
    ),
    /**
     * TF type, the output value is term frequency.
     */
    TF(
        (idf, termFrequency, tokenRatio) -&amp;gt; termFrequency * tokenRatio
    );
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…¶æ¬¡ï¼Œåœ¨openå‡½æ•°ä¸­ï¼Œä¼šåŠ è½½æ¨¡å‹ï¼Œæ¯”å¦‚ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;wordIdWeight = {HashMap@10838}  size = 37
 &quot;åŒ»å­¦&quot; -&amp;gt; {Tuple2@10954} &quot;(6,1.0986122886681098)&quot;
 &quot;é€‰è¯»&quot; -&amp;gt; {Tuple2@10956} &quot;(11,1.0986122886681098)&quot;
 &quot;åäºŒå†Œ&quot; -&amp;gt; {Tuple2@10958} &quot;(14,1.0986122886681098)&quot;
...
 &quot;åé¾„&quot; -&amp;gt; {Tuple2@11022} &quot;(22,1.0986122886681098)&quot;
 &quot;ç´¢å¼•&quot; -&amp;gt; {Tuple2@11024} &quot;(27,1.0986122886681098)&quot;
featureType = {DocCountVectorizerModelMapper$FeatureType@10834} &quot;WORD_COUNT&quot;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æœ€åï¼Œé¢„æµ‹æ—¶å€™è°ƒç”¨predictSparseVectorå‡½æ•°ï¼Œä¼šé’ˆå¯¹è¾“å…¥ &lt;code&gt;äºŒæ‰‹ æ—§ä¹¦ : åŒ»å­¦ ç”µç£ æˆåƒ&lt;/code&gt;æ¥è¿›è¡ŒåŒ¹é…ã€‚ç”Ÿæˆç¨€ç–å‘é‡SparseVectorã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;0|$37$0:1.0 6:1.0 10:1.0 25:1.0 26:1.0 28:1.0
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä»¥ä¸Šè¡¨ç¤ºé‚£å‡ ä¸ªå•è¯ åˆ†åˆ«å¯¹åº”0 6 10 25 26 28 è¿™å‡ ä¸ªå­—å…¸ä¸­å¯¹åº”åºå·çš„å•è¯ï¼Œå…¶åœ¨æœ¬å¥å¯¹åº”çš„å‡ºç°æ•°ç›®éƒ½æ˜¯ä¸€ä¸ªã€‚&lt;/p&gt;
&lt;h2 id=&quot;0x07-å‚è€ƒ&quot;&gt;0x07 å‚è€ƒ&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://www.jianshu.com/p/091383e86825&quot;&gt;Tf-Idfè¯¦è§£åŠåº”ç”¨&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/fxsjy/jieba&quot;&gt;https://github.com/fxsjy/jieba&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;</description>
<pubDate>Fri, 05 Jun 2020 13:52:00 +0000</pubDate>
<dc:creator>ç½—è¥¿çš„æ€è€ƒ</dc:creator>
<og:description>Alink æ˜¯é˜¿é‡Œå·´å·´åŸºäºå®æ—¶è®¡ç®—å¼•æ“ Flink ç ”å‘çš„æ–°ä¸€ä»£æœºå™¨å­¦ä¹ ç®—æ³•å¹³å°ï¼Œæ˜¯ä¸šç•Œé¦–ä¸ªåŒæ—¶æ”¯æŒæ‰¹å¼ç®—æ³•ã€æµå¼ç®—æ³•çš„æœºå™¨å­¦ä¹ å¹³å°ã€‚TF-IDFï¼ˆterm frequencyâ€“inverse doc</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/rossiXYZ/p/13052449.html</dc:identifier>
</item>
<item>
<title>â€œé€ è½®è¿åŠ¨â€ä¹‹ ORMæ¡†æ¶ç³»åˆ—ï¼ˆä¸‰ï¼‰~ å¹²è´§å‘ˆä¸Š - æ”»åŸçš„ç‹®</title>
<link>http://www.cnblogs.com/MaMaNongNong/p/12896787.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/MaMaNongNong/p/12896787.html</guid>
<description>&lt;pre&gt;
&lt;span&gt;  1&lt;/span&gt;     &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;
&lt;span&gt;  2&lt;/span&gt;     &lt;span&gt;///&lt;/span&gt;&lt;span&gt; Auto Fill Adapter
&lt;/span&gt;&lt;span&gt;  3&lt;/span&gt;     &lt;span&gt;///&lt;/span&gt;&lt;span&gt; =&amp;gt; Fill DataRow to Entity
&lt;/span&gt;&lt;span&gt;  4&lt;/span&gt;     &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;
&lt;span&gt;  5&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; EntityFillAdapter&amp;lt;Entity&amp;gt;
&lt;span&gt;  6&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;  7&lt;/span&gt;         &lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;readonly&lt;/span&gt; Func&amp;lt;DataRow, Entity&amp;gt; funcCache =&lt;span&gt; GetFactory();
&lt;/span&gt;&lt;span&gt;  8&lt;/span&gt; 
&lt;span&gt;  9&lt;/span&gt;         &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt;&lt;span&gt; Entity AutoFill(DataRow row)
&lt;/span&gt;&lt;span&gt; 10&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 11&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt;&lt;span&gt; funcCache(row);
&lt;/span&gt;&lt;span&gt; 12&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 13&lt;/span&gt; 
&lt;span&gt; 14&lt;/span&gt;         &lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; Func&amp;lt;DataRow, Entity&amp;gt;&lt;span&gt; GetFactory()
&lt;/span&gt;&lt;span&gt; 15&lt;/span&gt; &lt;span&gt;        {
&lt;/span&gt;&lt;span&gt; 16&lt;/span&gt;             &lt;span&gt;#region&lt;/span&gt; get Info through Reflection
&lt;span&gt; 17&lt;/span&gt;             &lt;span&gt;var&lt;/span&gt; entityType = &lt;span&gt;typeof&lt;/span&gt;&lt;span&gt;(Entity);
&lt;/span&gt;&lt;span&gt; 18&lt;/span&gt;             &lt;span&gt;var&lt;/span&gt; rowType = &lt;span&gt;typeof&lt;/span&gt;&lt;span&gt;(DataRow);
&lt;/span&gt;&lt;span&gt; 19&lt;/span&gt;             &lt;span&gt;var&lt;/span&gt; convertType = &lt;span&gt;typeof&lt;/span&gt;&lt;span&gt;(Convert);
&lt;/span&gt;&lt;span&gt; 20&lt;/span&gt;             &lt;span&gt;var&lt;/span&gt; typeType = &lt;span&gt;typeof&lt;/span&gt;&lt;span&gt;(Type);
&lt;/span&gt;&lt;span&gt; 21&lt;/span&gt;             &lt;span&gt;var&lt;/span&gt; columnCollectionType = &lt;span&gt;typeof&lt;/span&gt;&lt;span&gt;(DataColumnCollection);
&lt;/span&gt;&lt;span&gt; 22&lt;/span&gt;             &lt;span&gt;var&lt;/span&gt; getTypeMethod = typeType.GetMethod(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;GetType&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, BindingFlags.Static | BindingFlags.Public, &lt;span&gt;null&lt;/span&gt;, &lt;span&gt;new&lt;/span&gt;[] { &lt;span&gt;typeof&lt;/span&gt;(&lt;span&gt;string&lt;/span&gt;) }, &lt;span&gt;null&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 23&lt;/span&gt;             &lt;span&gt;var&lt;/span&gt; changeTypeMethod = convertType.GetMethod(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;ChangeType&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, BindingFlags.Static | BindingFlags.Public, &lt;span&gt;null&lt;/span&gt;, &lt;span&gt;new&lt;/span&gt;[] { &lt;span&gt;typeof&lt;/span&gt;(&lt;span&gt;object&lt;/span&gt;), &lt;span&gt;typeof&lt;/span&gt;(Type) }, &lt;span&gt;null&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 24&lt;/span&gt;             &lt;span&gt;var&lt;/span&gt; containsMethod = columnCollectionType.GetMethod(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Contains&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 25&lt;/span&gt;             &lt;span&gt;var&lt;/span&gt; rowIndexerGetMethod = rowType.GetMethod(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;get_Item&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, BindingFlags.Instance | BindingFlags.Public, &lt;span&gt;null&lt;/span&gt;, &lt;span&gt;new&lt;/span&gt;[] { &lt;span&gt;typeof&lt;/span&gt;(&lt;span&gt;string&lt;/span&gt;) }, &lt;span&gt;new&lt;/span&gt;[] { &lt;span&gt;new&lt;/span&gt; ParameterModifier(&lt;span&gt;1&lt;/span&gt;&lt;span&gt;) });
&lt;/span&gt;&lt;span&gt; 26&lt;/span&gt;             &lt;span&gt;var&lt;/span&gt; columnCollectionIndexerGetMethod = columnCollectionType.GetMethod(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;get_Item&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, BindingFlags.Instance | BindingFlags.Public, &lt;span&gt;null&lt;/span&gt;, &lt;span&gt;new&lt;/span&gt;[] { &lt;span&gt;typeof&lt;/span&gt;(&lt;span&gt;int&lt;/span&gt;) }, &lt;span&gt;new&lt;/span&gt;[] { &lt;span&gt;new&lt;/span&gt; ParameterModifier(&lt;span&gt;1&lt;/span&gt;&lt;span&gt;) });
&lt;/span&gt;&lt;span&gt; 27&lt;/span&gt;             &lt;span&gt;var&lt;/span&gt; entityIndexerSetMethod = entityType.GetMethod(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;set_Item&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, BindingFlags.Instance | BindingFlags.NonPublic, &lt;span&gt;null&lt;/span&gt;, &lt;span&gt;new&lt;/span&gt;[] { &lt;span&gt;typeof&lt;/span&gt;(&lt;span&gt;string&lt;/span&gt;), &lt;span&gt;typeof&lt;/span&gt;(&lt;span&gt;object&lt;/span&gt;) }, &lt;span&gt;null&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 28&lt;/span&gt;             &lt;span&gt;var&lt;/span&gt; properties = entityType.GetProperties(BindingFlags.Instance |&lt;span&gt; BindingFlags.Public);
&lt;/span&gt;&lt;span&gt; 29&lt;/span&gt;             &lt;span&gt;#endregion&lt;/span&gt;
&lt;span&gt; 30&lt;/span&gt; 
&lt;span&gt; 31&lt;/span&gt;             &lt;span&gt;#region&lt;/span&gt; some Expression class that can be repeat used
&lt;span&gt; 32&lt;/span&gt;             &lt;span&gt;//&lt;/span&gt;&lt;span&gt;DataRow row&lt;/span&gt;
&lt;span&gt; 33&lt;/span&gt;             &lt;span&gt;var&lt;/span&gt; rowDeclare = Expression.Parameter(rowType, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;row&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 34&lt;/span&gt;             &lt;span&gt;//&lt;/span&gt;&lt;span&gt;Student entity&lt;/span&gt;
&lt;span&gt; 35&lt;/span&gt;             &lt;span&gt;var&lt;/span&gt; entityDeclare = Expression.Parameter(entityType, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;entity&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 36&lt;/span&gt;             &lt;span&gt;//&lt;/span&gt;&lt;span&gt;Type propertyType&lt;/span&gt;
&lt;span&gt; 37&lt;/span&gt;             &lt;span&gt;var&lt;/span&gt; propertyTypeDeclare = Expression.Parameter(&lt;span&gt;typeof&lt;/span&gt;(Type), &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;propertyType&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 38&lt;/span&gt;             &lt;span&gt;//&lt;/span&gt;&lt;span&gt;new Student()&lt;/span&gt;
&lt;span&gt; 39&lt;/span&gt;             &lt;span&gt;var&lt;/span&gt; newEntityExpression =&lt;span&gt; Expression.New(entityType);
&lt;/span&gt;&lt;span&gt; 40&lt;/span&gt;             &lt;span&gt;//&lt;/span&gt;&lt;span&gt;row == null&lt;/span&gt;
&lt;span&gt; 41&lt;/span&gt;             &lt;span&gt;var&lt;/span&gt; rowEqualnullExpression = Expression.Equal(rowDeclare, Expression.Constant(&lt;span&gt;null&lt;/span&gt;&lt;span&gt;));
&lt;/span&gt;&lt;span&gt; 42&lt;/span&gt;             &lt;span&gt;//&lt;/span&gt;&lt;span&gt;row.Table.Columns&lt;/span&gt;
&lt;span&gt; 43&lt;/span&gt;             &lt;span&gt;var&lt;/span&gt; rowTableColumns = Expression.Property(Expression.Property(rowDeclare, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Table&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;), &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Columns&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 44&lt;/span&gt;             &lt;span&gt;//&lt;/span&gt;&lt;span&gt;int loopIndex&lt;/span&gt;
&lt;span&gt; 45&lt;/span&gt;             &lt;span&gt;var&lt;/span&gt; loopIndexDeclare = Expression.Parameter(&lt;span&gt;typeof&lt;/span&gt;(&lt;span&gt;int&lt;/span&gt;), &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;loopIndex&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 46&lt;/span&gt;             &lt;span&gt;//&lt;/span&gt;&lt;span&gt;row.Table.Columns[loopIndex].ColumnName&lt;/span&gt;
&lt;span&gt; 47&lt;/span&gt;             &lt;span&gt;var&lt;/span&gt; columnNameExpression = Expression.Property(Expression.Call(rowTableColumns, columnCollectionIndexerGetMethod, loopIndexDeclare), &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;ColumnName&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 48&lt;/span&gt;             &lt;span&gt;//&lt;/span&gt;&lt;span&gt;break;&lt;/span&gt;
&lt;span&gt; 49&lt;/span&gt;             LabelTarget labelBreak =&lt;span&gt; Expression.Label();
&lt;/span&gt;&lt;span&gt; 50&lt;/span&gt;             &lt;span&gt;//&lt;/span&gt;&lt;span&gt;default(Student)&lt;/span&gt;
&lt;span&gt; 51&lt;/span&gt;             &lt;span&gt;var&lt;/span&gt; defaultEntityValue =&lt;span&gt; Expression.Default(entityType);
&lt;/span&gt;&lt;span&gt; 52&lt;/span&gt;             &lt;span&gt;#endregion&lt;/span&gt;
&lt;span&gt; 53&lt;/span&gt; 
&lt;span&gt; 54&lt;/span&gt;             &lt;span&gt;var&lt;/span&gt; setRowNotNullBlockExpressions = &lt;span&gt;new&lt;/span&gt; List&amp;lt;Expression&amp;gt;&lt;span&gt;();
&lt;/span&gt;&lt;span&gt; 55&lt;/span&gt;                         
&lt;span&gt; 56&lt;/span&gt;             &lt;span&gt;#region&lt;/span&gt; entity = new Student();loopIndex = 0;
&lt;span&gt; 57&lt;/span&gt; &lt;span&gt;            setRowNotNullBlockExpressions.Add(Expression.Assign(entityDeclare, newEntityExpression));
&lt;/span&gt;&lt;span&gt; 58&lt;/span&gt;             setRowNotNullBlockExpressions.Add(Expression.Assign(loopIndexDeclare, Expression.Constant(&lt;span&gt;0&lt;/span&gt;&lt;span&gt;)));
&lt;/span&gt;&lt;span&gt; 59&lt;/span&gt; 
&lt;span&gt; 60&lt;/span&gt;             &lt;span&gt;#endregion&lt;/span&gt;
&lt;span&gt; 61&lt;/span&gt; 
&lt;span&gt; 62&lt;/span&gt;             &lt;span&gt;#region&lt;/span&gt; loop Fill DataRow's field to Entity Indexer
&lt;span&gt; 63&lt;/span&gt;             &lt;span&gt;/*&lt;/span&gt;
&lt;span&gt; 64&lt;/span&gt; &lt;span&gt;             * while (true)
&lt;/span&gt;&lt;span&gt; 65&lt;/span&gt; &lt;span&gt;             * {
&lt;/span&gt;&lt;span&gt; 66&lt;/span&gt; &lt;span&gt;             *     if (loopIndex &amp;lt; row.Table.Columns.Count)
&lt;/span&gt;&lt;span&gt; 67&lt;/span&gt; &lt;span&gt;             *     {
&lt;/span&gt;&lt;span&gt; 68&lt;/span&gt; &lt;span&gt;             *         entity[row.Table.Columns[loopIndex].ColumnName] = row[row.Table.Columns[loopIndex].ColumnName];
&lt;/span&gt;&lt;span&gt; 69&lt;/span&gt; &lt;span&gt;             *         loopIndex++;
&lt;/span&gt;&lt;span&gt; 70&lt;/span&gt; &lt;span&gt;             *     }
&lt;/span&gt;&lt;span&gt; 71&lt;/span&gt; &lt;span&gt;             *     else break;
&lt;/span&gt;&lt;span&gt; 72&lt;/span&gt; &lt;span&gt;             * } 
&lt;/span&gt;&lt;span&gt; 73&lt;/span&gt;              &lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 74&lt;/span&gt; 
&lt;span&gt; 75&lt;/span&gt; &lt;span&gt;            setRowNotNullBlockExpressions.Add(
&lt;/span&gt;&lt;span&gt; 76&lt;/span&gt; 
&lt;span&gt; 77&lt;/span&gt; &lt;span&gt;                Expression.Loop(
&lt;/span&gt;&lt;span&gt; 78&lt;/span&gt; &lt;span&gt;                    Expression.IfThenElse(
&lt;/span&gt;&lt;span&gt; 79&lt;/span&gt;                         Expression.LessThan(loopIndexDeclare, Expression.Property(rowTableColumns, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Count&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)),
&lt;/span&gt;&lt;span&gt; 80&lt;/span&gt; &lt;span&gt;                        Expression.Block(
&lt;/span&gt;&lt;span&gt; 81&lt;/span&gt; &lt;span&gt;                            Expression.Call(entityDeclare, entityIndexerSetMethod, columnNameExpression, Expression.Call(rowDeclare, rowIndexerGetMethod, columnNameExpression)),
&lt;/span&gt;&lt;span&gt; 82&lt;/span&gt; &lt;span&gt;                            Expression.PostIncrementAssign(loopIndexDeclare)
&lt;/span&gt;&lt;span&gt; 83&lt;/span&gt; &lt;span&gt;                        ),
&lt;/span&gt;&lt;span&gt; 84&lt;/span&gt; &lt;span&gt;                        Expression.Break(labelBreak)
&lt;/span&gt;&lt;span&gt; 85&lt;/span&gt; &lt;span&gt;                    ),
&lt;/span&gt;&lt;span&gt; 86&lt;/span&gt; &lt;span&gt;                    labelBreak
&lt;/span&gt;&lt;span&gt; 87&lt;/span&gt; &lt;span&gt;                )
&lt;/span&gt;&lt;span&gt; 88&lt;/span&gt; &lt;span&gt;            );
&lt;/span&gt;&lt;span&gt; 89&lt;/span&gt;             &lt;span&gt;#endregion&lt;/span&gt;
&lt;span&gt; 90&lt;/span&gt; 
&lt;span&gt; 91&lt;/span&gt;             &lt;span&gt;#region&lt;/span&gt; assign for Entity property
&lt;span&gt; 92&lt;/span&gt;             &lt;span&gt;foreach&lt;/span&gt; (&lt;span&gt;var&lt;/span&gt; propertyInfo &lt;span&gt;in&lt;/span&gt;&lt;span&gt; properties)
&lt;/span&gt;&lt;span&gt; 93&lt;/span&gt; &lt;span&gt;            {
&lt;/span&gt;&lt;span&gt; 94&lt;/span&gt;                 &lt;span&gt;var&lt;/span&gt; columnAttr = propertyInfo.GetCustomAttribute(&lt;span&gt;typeof&lt;/span&gt;(ColumnAttribute), &lt;span&gt;true&lt;/span&gt;) &lt;span&gt;as&lt;/span&gt;&lt;span&gt; ColumnAttribute;
&lt;/span&gt;&lt;span&gt; 95&lt;/span&gt; 
&lt;span&gt; 96&lt;/span&gt;                 &lt;span&gt;//&lt;/span&gt;&lt;span&gt; no column , no translation&lt;/span&gt;
&lt;span&gt; 97&lt;/span&gt;                 &lt;span&gt;if&lt;/span&gt; (&lt;span&gt;null&lt;/span&gt; == columnAttr) &lt;span&gt;continue&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 98&lt;/span&gt; 
&lt;span&gt; 99&lt;/span&gt;                 &lt;span&gt;if&lt;/span&gt;&lt;span&gt; (propertyInfo.CanWrite)
&lt;/span&gt;&lt;span&gt;100&lt;/span&gt; &lt;span&gt;                {
&lt;/span&gt;&lt;span&gt;101&lt;/span&gt;                     &lt;span&gt;var&lt;/span&gt; columnName = Expression.Constant(columnAttr.GetName(propertyInfo.Name), &lt;span&gt;typeof&lt;/span&gt;(&lt;span&gt;string&lt;/span&gt;&lt;span&gt;));
&lt;/span&gt;&lt;span&gt;102&lt;/span&gt; 
&lt;span&gt;103&lt;/span&gt;                     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;entity.Id&lt;/span&gt;
&lt;span&gt;104&lt;/span&gt;                     &lt;span&gt;var&lt;/span&gt; propertyExpression =&lt;span&gt; Expression.Property(entityDeclare, propertyInfo);
&lt;/span&gt;&lt;span&gt;105&lt;/span&gt;                     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;row[&quot;Id&quot;]&lt;/span&gt;
&lt;span&gt;106&lt;/span&gt;                     &lt;span&gt;var&lt;/span&gt; value =&lt;span&gt; Expression.Call(rowDeclare, rowIndexerGetMethod, columnName);
&lt;/span&gt;&lt;span&gt;107&lt;/span&gt;                     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;default(string)&lt;/span&gt;
&lt;span&gt;108&lt;/span&gt;                     &lt;span&gt;var&lt;/span&gt; defaultValue =&lt;span&gt; Expression.Default(propertyInfo.PropertyType);
&lt;/span&gt;&lt;span&gt;109&lt;/span&gt;                     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;row.Table.Columns.Contains(&quot;Id&quot;)&lt;/span&gt;
&lt;span&gt;110&lt;/span&gt;                     &lt;span&gt;var&lt;/span&gt; checkIfContainsColumn =&lt;span&gt; Expression.Call(rowTableColumns, containsMethod, columnName);
&lt;/span&gt;&lt;span&gt;111&lt;/span&gt;                     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;!row[&quot;Id&quot;].Equals(DBNull.Value)&lt;/span&gt;
&lt;span&gt;112&lt;/span&gt;                     &lt;span&gt;var&lt;/span&gt; checkDBNull =&lt;span&gt; Expression.NotEqual(value, Expression.Constant(System.DBNull.Value));
&lt;/span&gt;&lt;span&gt;113&lt;/span&gt;                     
&lt;span&gt;114&lt;/span&gt;                     &lt;span&gt;var&lt;/span&gt; propertyTypeName = Expression.Constant(propertyInfo.PropertyType.ToString(), &lt;span&gt;typeof&lt;/span&gt;(&lt;span&gt;string&lt;/span&gt;&lt;span&gt;));
&lt;/span&gt;&lt;span&gt;115&lt;/span&gt; 
&lt;span&gt;116&lt;/span&gt;                     &lt;span&gt;/*&lt;/span&gt;
&lt;span&gt;117&lt;/span&gt; &lt;span&gt;                     * if (row.Table.Columns.Contains(&quot;Id&quot;) &amp;amp;&amp;amp; !row[&quot;Id&quot;].Equals(DBNull.Value))
&lt;/span&gt;&lt;span&gt;118&lt;/span&gt; &lt;span&gt;                     * {
&lt;/span&gt;&lt;span&gt;119&lt;/span&gt; &lt;span&gt;                     *     propertyType = Type.GetType(&quot;System.String&quot;);
&lt;/span&gt;&lt;span&gt;120&lt;/span&gt; &lt;span&gt;                     *     entity.Id = (string)Convert.ChangeType(row[&quot;Id&quot;], propertyType);
&lt;/span&gt;&lt;span&gt;121&lt;/span&gt; &lt;span&gt;                     * }
&lt;/span&gt;&lt;span&gt;122&lt;/span&gt; &lt;span&gt;                     * else
&lt;/span&gt;&lt;span&gt;123&lt;/span&gt; &lt;span&gt;                     *     entity.Id = default(string);
&lt;/span&gt;&lt;span&gt;124&lt;/span&gt;                      &lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;125&lt;/span&gt; &lt;span&gt;                    setRowNotNullBlockExpressions.Add(
&lt;/span&gt;&lt;span&gt;126&lt;/span&gt; 
&lt;span&gt;127&lt;/span&gt; &lt;span&gt;                        Expression.IfThenElse(
&lt;/span&gt;&lt;span&gt;128&lt;/span&gt; &lt;span&gt;                            Expression.AndAlso(checkIfContainsColumn, checkDBNull),
&lt;/span&gt;&lt;span&gt;129&lt;/span&gt; &lt;span&gt;                            Expression.Block(
&lt;/span&gt;&lt;span&gt;130&lt;/span&gt; &lt;span&gt;                                Expression.Assign(propertyTypeDeclare, Expression.Call(getTypeMethod, propertyTypeName)),
&lt;/span&gt;&lt;span&gt;131&lt;/span&gt; &lt;span&gt;                                Expression.Assign(propertyExpression, Expression.Convert(Expression.Call(changeTypeMethod, value, propertyTypeDeclare), propertyInfo.PropertyType))
&lt;/span&gt;&lt;span&gt;132&lt;/span&gt; &lt;span&gt;                            ),
&lt;/span&gt;&lt;span&gt;133&lt;/span&gt; &lt;span&gt;                            Expression.Assign(propertyExpression, defaultValue)
&lt;/span&gt;&lt;span&gt;134&lt;/span&gt; &lt;span&gt;                        )
&lt;/span&gt;&lt;span&gt;135&lt;/span&gt; &lt;span&gt;                    );
&lt;/span&gt;&lt;span&gt;136&lt;/span&gt; &lt;span&gt;                }
&lt;/span&gt;&lt;span&gt;137&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;138&lt;/span&gt; 
&lt;span&gt;139&lt;/span&gt;             &lt;span&gt;#endregion&lt;/span&gt;
&lt;span&gt;140&lt;/span&gt; 
&lt;span&gt;141&lt;/span&gt;             &lt;span&gt;var&lt;/span&gt; checkIfRowIsNull =&lt;span&gt; Expression.IfThenElse(
&lt;/span&gt;&lt;span&gt;142&lt;/span&gt; &lt;span&gt;                rowEqualnullExpression,
&lt;/span&gt;&lt;span&gt;143&lt;/span&gt; &lt;span&gt;                Expression.Assign(entityDeclare, defaultEntityValue),
&lt;/span&gt;&lt;span&gt;144&lt;/span&gt; &lt;span&gt;                Expression.Block(setRowNotNullBlockExpressions)
&lt;/span&gt;&lt;span&gt;145&lt;/span&gt; &lt;span&gt;            );
&lt;/span&gt;&lt;span&gt;146&lt;/span&gt; 
&lt;span&gt;147&lt;/span&gt;             &lt;span&gt;var&lt;/span&gt; body =&lt;span&gt; Expression.Block(
&lt;/span&gt;&lt;span&gt;148&lt;/span&gt; 
&lt;span&gt;149&lt;/span&gt;                 &lt;span&gt;new&lt;/span&gt;&lt;span&gt;[] { entityDeclare, loopIndexDeclare, propertyTypeDeclare },
&lt;/span&gt;&lt;span&gt;150&lt;/span&gt; &lt;span&gt;                checkIfRowIsNull,
&lt;/span&gt;&lt;span&gt;151&lt;/span&gt;                 entityDeclare   &lt;span&gt;//&lt;/span&gt;&lt;span&gt;return Student;&lt;/span&gt;
&lt;span&gt;152&lt;/span&gt; &lt;span&gt;            );
&lt;/span&gt;&lt;span&gt;153&lt;/span&gt; 
&lt;span&gt;154&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt; Expression.Lambda&amp;lt;Func&amp;lt;DataRow, Entity&amp;gt;&amp;gt;&lt;span&gt;(body, rowDeclare).Compile();
&lt;/span&gt;&lt;span&gt;155&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;156&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;157&lt;/span&gt; 
&lt;span&gt;158&lt;/span&gt;     &lt;span&gt;#region&lt;/span&gt;
&lt;span&gt;159&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;public class Student : EntityDesign.EntityBase
&lt;/span&gt;&lt;span&gt;160&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;{
&lt;/span&gt;&lt;span&gt;161&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;    [Column]
&lt;/span&gt;&lt;span&gt;162&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;    public string Id { get; set; }
&lt;/span&gt;&lt;span&gt;163&lt;/span&gt; 
&lt;span&gt;164&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;    [Column(&quot;StudentName&quot;)]
&lt;/span&gt;&lt;span&gt;165&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;    public string Name { get; set; }
&lt;/span&gt;&lt;span&gt;166&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;
&lt;span&gt;167&lt;/span&gt;     &lt;span&gt;///&lt;/span&gt;&lt;span&gt;/this is the template of &quot;GetFactory()&quot; created.&lt;/span&gt;
&lt;span&gt;168&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;public static Student StudentFillAdapter(DataRow row)
&lt;/span&gt;&lt;span&gt;169&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;{
&lt;/span&gt;&lt;span&gt;170&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;    Student entity;
&lt;/span&gt;&lt;span&gt;171&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;    int loopIndex;
&lt;/span&gt;&lt;span&gt;172&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;    Type propertyType;
&lt;/span&gt;&lt;span&gt;173&lt;/span&gt; 
&lt;span&gt;174&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;    if (row == null)
&lt;/span&gt;&lt;span&gt;175&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;        entity = default(Student);
&lt;/span&gt;&lt;span&gt;176&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;    else
&lt;/span&gt;&lt;span&gt;177&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;178&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;        entity = new Student();
&lt;/span&gt;&lt;span&gt;179&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;        loopIndex = 0;
&lt;/span&gt;&lt;span&gt;180&lt;/span&gt; 
&lt;span&gt;181&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;        while (true)
&lt;/span&gt;&lt;span&gt;182&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;183&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;            if (loopIndex &amp;lt; row.Table.Columns.Count)
&lt;/span&gt;&lt;span&gt;184&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;            {
&lt;/span&gt;&lt;span&gt;185&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;                entity[row.Table.Columns[loopIndex].ColumnName] = row[row.Table.Columns[loopIndex].ColumnName];
&lt;/span&gt;&lt;span&gt;186&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;                loopIndex++;
&lt;/span&gt;&lt;span&gt;187&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;188&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;            else break;
&lt;/span&gt;&lt;span&gt;189&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;190&lt;/span&gt; 
&lt;span&gt;191&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;        if (row.Table.Columns.Contains(&quot;Id&quot;) &amp;amp;&amp;amp; !row[&quot;Id&quot;].Equals(DBNull.Value))
&lt;/span&gt;&lt;span&gt;192&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;193&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;            propertyType = Type.GetType(&quot;System.String&quot;);
&lt;/span&gt;&lt;span&gt;194&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;            entity.Id = (string)Convert.ChangeType(row[&quot;Id&quot;], propertyType);
&lt;/span&gt;&lt;span&gt;195&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;196&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;        else
&lt;/span&gt;&lt;span&gt;197&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;            entity.Id = default(string);
&lt;/span&gt;&lt;span&gt;198&lt;/span&gt; 
&lt;span&gt;199&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;        if (row.Table.Columns.Contains(&quot;StudentName&quot;) &amp;amp;&amp;amp; !row[&quot;StudentName&quot;].Equals(DBNull.Value))
&lt;/span&gt;&lt;span&gt;200&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;        {
&lt;/span&gt;&lt;span&gt;201&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;            propertyType = Type.GetType(&quot;System.String&quot;);
&lt;/span&gt;&lt;span&gt;202&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;            entity.Name = (string)Convert.ChangeType(row[&quot;StudentName&quot;], propertyType);
&lt;/span&gt;&lt;span&gt;203&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;204&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;        else
&lt;/span&gt;&lt;span&gt;205&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;            entity.Name = default(string);
&lt;/span&gt;&lt;span&gt;206&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;207&lt;/span&gt; 
&lt;span&gt;208&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;    return entity;
&lt;/span&gt;&lt;span&gt;209&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;
&lt;span&gt;210&lt;/span&gt;     &lt;span&gt;#endregion&lt;/span&gt;
&lt;/pre&gt;</description>
<pubDate>Fri, 05 Jun 2020 13:13:00 +0000</pubDate>
<dc:creator>æ”»åŸçš„ç‹®</dc:creator>
<og:description>è¿™ä¸€è¶´é‡Œé¢ï¼Œæˆ‘å°±æ¥æ­£å¼ä»‹ç»ä¸€ä¸‹CoffeeSQLçš„å¹²è´§ã€‚ é¦–å…ˆè¦ç»™CoffeeSQLæ¥ä¸ªå®šä½ï¼šæœ€å¼€å§‹å°±æ˜¯ç”±äºæœ¬äººæƒ³è¦äº†è§£ORMæ¡†æ¶å†…éƒ¨çš„åŸç†ï¼Œæ‰€ä»¥å°±å››å¤„æœå¯»æœ‰å…³çš„åšå®¢ä¸å­¦ä¹ èµ„æ–™ï¼Œå°±æ˜¯åœ¨é‚£ä¸ªå¤å¤©ï¼Œåœ¨åšå®¢</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/MaMaNongNong/p/12896787.html</dc:identifier>
</item>
</channel>
</rss>