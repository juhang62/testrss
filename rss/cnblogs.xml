<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>åšå®¢å›­_é¦–é¡µ</title>
<link></link>
<description>ä»£ç æ”¹å˜ä¸–ç•Œ</description>
<item>
<title>èŠèŠ API ç­¾åæ–¹å¼ - Fururur</title>
<link>http://www.cnblogs.com/Sinte-Beuve/p/12093307.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/Sinte-Beuve/p/12093307.html</guid>
<description>&lt;h2 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;ç°åœ¨è¶Šæ¥è¶Šå¤šçš„å…¬å¸ä»¥ API çš„å½¢å¼å¯¹å¤–æä¾›æœåŠ¡ï¼Œè¿™äº› API æ¥å£å¤§å¤šæš´éœ²åœ¨å…¬ç½‘ä¸Šï¼Œæ‰€ä»¥å®‰å…¨æ€§å°±å˜çš„å¾ˆé‡è¦äº†ã€‚æœ€ç›´æ¥çš„é£é™©å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;éæ³•ä½¿ç”¨ API æœåŠ¡ã€‚ï¼ˆæ”¶è´¹æ¥å£éæ³•è°ƒç”¨ï¼‰&lt;/li&gt;
&lt;li&gt;æ¶æ„æ”»å‡»å’Œç ´åã€‚ï¼ˆæ•°æ®ç¯¡æ”¹ã€DOSï¼‰&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å› æ­¤éœ€è¦è®¾è®¡ä¸€äº›æ¥å£å®‰å…¨ä¿æŠ¤çš„æ–¹å¼æ¥å¢å¼ºæ¥å£å®‰å…¨ï¼Œåœ¨è¿è¾“å±‚å¯æ·»åŠ  SSL è¯ä¹¦ï¼Œä¸Š HTTPSï¼Œåœ¨åº”ç”¨å±‚ä¸»è¦æ˜¯é€šè¿‡ä¸€äº›åŠ å¯†é€»è¾‘æ¥å®ç°ã€‚ç›®å‰ä¸»æµçš„ä¸¤ç§æ˜¯åœ¨ HTTP Header é‡ŒåŠ è®¤è¯ä¿¡æ¯å’Œ API ç­¾åã€‚&lt;/p&gt;
&lt;h2 id=&quot;http-ç®€å•èº«ä»½è®¤è¯&quot;&gt;HTTP ç®€å•èº«ä»½è®¤è¯&lt;/h2&gt;
&lt;p&gt;åœ¨ HTTP è¯·æ±‚çš„ Header ä¸­æ·»åŠ è®¤è¯å­—æ®µä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Authorization: 3F2504E04F8911D39A0C0305E82C3301&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æœåŠ¡å™¨å¤„ç†å‰å–å‡ºè¯¥å­—æ®µè¿›è¡Œæ ¡éªŒå³å¯ã€‚&lt;/p&gt;
&lt;p&gt;Spring Boot é¡¹ç›®ç›´æ¥å®ç°ä¸€ä¸ªæ‹¦æˆªå™¨å°±å¯è¿›è¡Œåˆ¤æ–­ï¼š&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;String token = request.getHeader(&quot;Authorization&quot;);
if (!Strings.isNullOrEmpty(token)) {
    hasAuth = redisTemplate.hasKey(&quot;userToken:&quot; + token);
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™ç±»æ–¹æ³•å®ç°æ¯”è¾ƒç®€å•ï¼Œå¯ä»¥åšåŸºæœ¬çš„èº«ä»½è®¤è¯ï¼Œé˜²å›å­ä¸é˜²å°äººï¼Œå¯é€šè¿‡ä¸­é—´äººæ”»å‡»è·å¾— Authorizationã€‚ä½¿ç”¨ HTTPS å®‰å…¨æ€§ä¼šå¾—åˆ°æé«˜ï¼Œä½†æ˜¯æ— æ³•æŠµå¾¡é‡æ”¾æ”»å‡»é€ æˆçš„å½±å“ï¼Œä¾‹å¦‚ DDOSã€‚&lt;/p&gt;
&lt;h2 id=&quot;api-ç­¾åè®¤è¯&quot;&gt;API ç­¾åè®¤è¯&lt;/h2&gt;
&lt;p&gt;API ç­¾åçš„æ–¹å¼è¾ƒå‰ä¸€ç§è¦å¤æ‚çš„å¤šï¼Œä½†æ˜¯å¯è§£å†³çš„å®‰å…¨é—®é¢˜ä¹Ÿæ›´å¤šï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å¯æ ¡éªŒè¯·æ±‚è€…çš„åˆæ³•æ€§ã€‚&lt;/li&gt;
&lt;li&gt;å¯ä»¥æ ¡éªŒå‚æ•°çš„å®Œæ•´æ€§å’Œæ˜¯å¦è¢«ç¯¡æ”¹ã€‚&lt;/li&gt;
&lt;li&gt;å¯ä»¥é˜²æ­¢é‡æ”¾æ”»å‡»ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;part1ï¼šè¯·æ±‚ç«¯åŠ å¯†&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;API ä½¿ç”¨è€…ä¼šè·å–åˆ°æœåŠ¡å™¨é¢å‘çš„ ak å’Œ sk ä¸¤ä¸ªç§˜é’¥ï¼Œak ä¸ºå…¬é’¥ï¼Œsk ä¸ºç§é’¥ã€‚&lt;/p&gt;
&lt;p&gt;ç­¾åæœ‰ä»¥ä¸‹è§„åˆ™ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;çº¦å®šè¯·æ±‚æ—¶ä¼šæºå¸¦ ak ä½œä¸ºå‚æ•°å¹¶æ”¾å…¥ HTTP Headerã€‚&lt;/li&gt;
&lt;li&gt;è¯·æ±‚å‚æ•°å¤„ç†ï¼š
&lt;ul&gt;&lt;li&gt;GETï¼šå–å‡ºæ‰€æœ‰çš„å‚æ•°ï¼Œå¹¶æ ¹æ® key è¿›è¡Œå­—å…¸æ’åºï¼Œæ‹¼è£…æˆå¦‚ä¸‹æ ¼å¼ã€‚&lt;/li&gt;
&lt;li&gt;POSTï¼šå¦‚æœæ˜¯ &lt;code&gt;application/x-www-form-urlencoded&lt;/code&gt;ï¼Œç›´æ¥å–å‡ºå’Œ GET å‚æ•°è¿›è¡Œæ’åºæ‹¼æ¥ï¼Œå¦‚æœæ˜¯ &lt;code&gt;application/json&lt;/code&gt;ï¼Œåˆ™ç›´æ¥å°†æ•´ä¸ª json ä¸² md5 åŠ å¯†åå† base64ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;pre&gt;
&lt;code&gt;GET:
strToSign = uri + &quot;\n&quot; + k1=v1Z&amp;amp;k2=v2&amp;amp;k3=v3
POST:
strToSign = uri + &quot;\n&quot; + k1=v1Z&amp;amp;k2=v2&amp;amp;k3=v3 + &quot;\n&quot; + base64(md5(json_body))&lt;/code&gt;
&lt;/pre&gt;
&lt;ol&gt;&lt;li&gt;ä½¿ç”¨ HmacSHA256 ç®—æ³•ï¼Œä¼ å…¥ sk è¿›è¡Œç­¾åè®¡ç®—ï¼Œ&lt;code&gt;sign = HmacSHA256(K,strToSign)&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç»„è£… HTTP è¯·æ±‚ï¼Œå°† &lt;code&gt;X-Ca-Key=ak,X-Ca-Signature=sign&lt;/code&gt; æ·»åŠ åˆ° HTTP Header ä¸­è¿›è¡Œè¯·æ±‚ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;ä¸€ä¸ªç®€å•å®ä¾‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/697102/201912/697102-20191224200438391-700977733.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;part2ï¼šæœåŠ¡ç«¯è§£å¯†&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åŒæ ·çš„ï¼ŒæœåŠ¡ç«¯è·å–åˆ°è¯·æ±‚çš„ ak åï¼ŒæŸ¥è¯¢å‡ºå¯¹åº”çš„ skï¼Œä½¿ç”¨ç›¸åŒçš„è§„åˆ™è¿›è¡Œç­¾åè®¡ç®—ï¼Œè®¡ç®—å‡ºçš„ sign å’Œä¼ å…¥çš„ sign æ¯”å¯¹ï¼Œå°±èƒ½å¤ŸçŸ¥é“å‚æ•°æ˜¯å¦è¢«ç¯¡æ”¹ã€‚&lt;/p&gt;
&lt;p&gt;ç»è¿‡è¿™æ ·ç­¾åæ–¹å¼åï¼Œå¯ä»¥ä¿è¯ä¸Šæ–‡æåˆ°çš„ï¼Œæ ¡éªŒè¯·æ±‚è€…çš„åˆæ³•æ€§å’Œæ ¡éªŒå‚æ•°çš„å®Œæ•´æ€§å’Œæ˜¯å¦è¢«ç¯¡æ”¹ã€‚ä½†æ˜¯å¦‚æœæœ‰äººæ–½åŠ ä¸€ä¸ªä¸­é—´äººæ”»å‡»ï¼Œå°±å¯ä»¥è·å–åˆ°è¯·æ±‚æŠ¥æ–‡ï¼Œå³ä¾¿æ”»å‡»è€…æ— æ³•ç ´è¯‘å‡ºç­¾åè§„åˆ™ï¼Œä¹Ÿå¯ä»¥å°†è¯·æ±‚é‡æ”¾ï¼Œä¹Ÿå°±æ˜¯åŸå°ä¸åŠ¨æäº¤ç»™æœåŠ¡å™¨ï¼Œé‚£ä¹ˆå¦‚æœå‘èµ·æ¶æ„å¤§è§„æ¨¡æ”»å‡»ï¼Œå°±ä¼šä½¿æœåŠ¡å™¨äº§ç”Ÿæ‹’ç»æœåŠ¡ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ›´è¿›ä¸€æ­¥&quot;&gt;æ›´è¿›ä¸€æ­¥&lt;/h3&gt;
&lt;p&gt;å¦‚æœéœ€è¦çš„å®‰å…¨æ€§æ›´é«˜ï¼Œå¯ä»¥é‡‡ç”¨ timestamp å’Œ nonce æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;timestampï¼šå¾ˆå¥½ç†è§£ï¼Œè°ƒç”¨è€…ä¼ å…¥ï¼ŒæœåŠ¡ç«¯åˆ¤æ–­ï¼Œä¸€æ®µæ—¶é—´å¤±æ•ˆã€‚&lt;/li&gt;
&lt;li&gt;nonceï¼šåœ¨ä¿¡æ¯å®‰å…¨ä¸­ï¼Œnonce æ˜¯ä¸€ä¸ªåœ¨åŠ å¯†é€šä¿¡åªèƒ½ä½¿ç”¨ä¸€æ¬¡çš„æ•°å­—ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å•ä¸€ä½¿ç”¨ timestampï¼Œå¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šå‡å°‘é‡æ”¾æ”»å‡»çš„é¢‘ç‡ï¼Œä½†æ˜¯æ— æ³•å®Œå…¨éåˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;å•ä¸€ä½¿ç”¨ nonceï¼Œå’‹ä¸€çœ¼çœ‹å¯ä»¥ä¿è¯è¯·æ±‚çš„å”¯ä¸€æ€§ï¼Œä½†å®é™…ä¸ŠæœåŠ¡ç«¯ï¼Œéšç€æ—¶é—´æ¨ç§»æœåŠ¡ç«¯æ— æ³•å­˜å‚¨å¤§é‡çš„ nonceï¼Œéœ€è¦è¿›å…¥æ·˜æ±°ç¯èŠ‚ï¼Œä¸€æ—¦æ—§çš„ nonce è¢«æ·˜æ±°ï¼Œé‚£ä¹ˆæ”»å‡»è€…ä¾æ—§å¯ä»¥å·åœŸé‡æ¥è¿›è¡Œé‡æ”¾æ”»å‡»ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œå°†ä¸¤è€…ç»“åˆä¸€èµ·æ¥å°±æ˜¯æœ€ç»ˆçš„æ–¹æ¡ˆï¼ŒæœåŠ¡ç«¯é¦–å…ˆéªŒè¯ nonce æ˜¯å¦å­˜åœ¨ï¼Œå†æ ¡éªŒæ—¶é—´æˆ³æ˜¯å¦åœ¨è§„å®šçš„æœŸé™å†…ã€‚å¦‚æœæ—§ nonce è¢«æ¸…ç†ï¼Œä¹Ÿæœ‰æ—¶é—´æˆ³è¿›è¡ŒæŠŠå…³ï¼Œä½¿å¾—è¯·æ±‚æ— æ³•è¢«é‡æ”¾ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;part1ï¼šè¯·æ±‚ç«¯ç”Ÿæˆ timestamp å’Œ nonce&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç”Ÿæˆæ—¶éœ€è¦ä¿è¯çŸ­æ—¶é—´å†…ç”Ÿæˆ nonce çš„å”¯ä¸€æ€§ã€‚&lt;/p&gt;
&lt;p&gt;å°† timestamp å’Œ nonce å†™å…¥ HTTP Header ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;part2ï¼šæœåŠ¡ç«¯æ ¡éªŒ&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;æ•°æ®åº“æŸ¥è¯¢è¯·æ±‚å¸¦ä¸Šçš„ nonce æ˜¯å¦å­˜åœ¨ï¼ˆæ¨èä½¿ç”¨Redisï¼Œè‡ªå¸¦TTLåŠŸèƒ½ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸å­˜åœ¨ï¼Œä¸”è¯·æ±‚æ—¶é—´æœ‰æ•ˆåˆ™ä¸ºåˆæ³•è¯·æ±‚ï¼ŒåŒæ—¶å°† nonce å†™å…¥ï¼Œå¹¶è®°å½•æ—¶é—´ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œä¸”è¯·æ±‚æ—¶é—´è¶…å‡ºè§„å®šæ—¶é™ï¼Œåˆ¤æ–­ä¸ºæ¶æ„è¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœå·²ç»å­˜åœ¨ï¼Œåˆ¤æ–­ä¸ºæ¶æ„è¯·æ±‚ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;åšè¶³ä»¥ä¸Šè¿™å‡ éƒ¨åŸºæœ¬ä¸Šå·²ç»å¯ä»¥ä¿è¯ä¸€å®šçš„å®‰å…¨æ€§ã€‚å½“ç„¶è¿˜æœ‰æ›´å¤æ‚çš„ï¼Œå¯ä»¥é˜…è¯»é˜¿é‡Œçš„ &lt;a href=&quot;https://help.aliyun.com/document_detail/29475.html?spm=a2c4g.11186623.2.13.2aa44ae01LxLfD&quot;&gt;Open API ç­¾åæ–‡æ¡£&lt;/a&gt;ï¼Œæ ¹æ®é¡¹ç›®è‡ªèº«å¯¹äºå®‰å…¨æ€§çš„éœ€æ±‚å¯ä»¥é€‚å½“è¿›è¡Œç®€åŒ–ã€‚æœ¬æ–‡è®²åˆ°çš„åŸºæœ¬é€»è¾‘å°±æ˜¯æ ¹æ®é˜¿é‡Œçš„æ¥çš„ã€‚&lt;/p&gt;
&lt;h2 id=&quot;api-ç­¾åä¸-https&quot;&gt;API ç­¾åä¸ HTTPS&lt;/h2&gt;
&lt;p&gt;è¿™è¾¹è¿˜æƒ³æä¸€ä¸‹ HTTPSã€‚ä¹‹å‰çœ‹åˆ°ä¸€åˆ™çŸ¥ä¹ä¸Šçš„æé—®ï¼š&lt;a href=&quot;https://www.zhihu.com/question/52392988&quot;&gt;ä½¿ç”¨äº† https åï¼Œè¿˜æœ‰å¿…è¦å¯¹æ•°æ®è¿›è¡Œç­¾åæ¥ç¡®ä¿æ•°æ®æ²¡æœ‰è¢«ç¯¡æ”¹å—ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼š&lt;/p&gt;
&lt;ul readability=&quot;-0.5&quot;&gt;&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;API ç­¾åä¿è¯çš„æ˜¯åº”ç”¨çš„æ•°æ®å®‰å…¨å’Œé˜²ç¯¡æ”¹ï¼Œå¹¶ä¸”å¯ä»¥ä½œä¸ºä¸šåŠ¡çš„å‚æ•°æ ¡éªŒå’Œå¤„ç†é‡æ”¾æ”»å‡»ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;HTTPS ä¿è¯çš„æ˜¯è¿è¾“å±‚çš„åŠ å¯†ä¼ è¾“ï¼Œä½†æ˜¯æ— æ³•é˜²å¾¡é‡æ”¾æ”»å‡»ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æ¢å¥è¯è¯´ï¼ŒHTTPS ä¿è¯é€šè¿‡ä¸­é—´äººæ”»å‡»æŠ“åˆ°çš„æŠ¥æ–‡æ˜¯å¯†æ–‡ï¼Œæ— æ³•å¾ˆéš¾ç ´è§£ã€‚ä½†ä»ç„¶å¯ä»¥å°†æŠ¥æ–‡é‡å‘ï¼Œå½¢æˆ DDOSã€‚åŒæ—¶ï¼Œå¦‚æœä¸ç­¾åï¼Œåªç”¨ HTTP ç®€å•è®¤è¯ï¼Œé€šè¿‡æŠ“åŒ…ï¼Œç›´æ¥å¯ä»¥è·å–åˆ° Authorizationï¼Œå°±å¯ä»¥éšæ„å‘èµ·è¯·æ±‚äº†ã€‚å› æ­¤æœ€å®‰å…¨çš„æ–¹æ³•å°±æ˜¯ç»“åˆ HTTPS å’Œ API ç­¾åã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ä¸»è¦ä»‹ç»äº†å½“å‰ä¸»æµ API ç­¾åæ–¹å¼ï¼Œå¯ä»¥æ ¹æ®é¡¹ç›®åœºæ™¯å»æŒ‘é€‰ç»„åˆåˆé€‚çš„æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;åšå®¢è¿˜é™„å¸¦å®ç°äº†ä¸€ä¸ªæ ¹æ®ä¸Šæ–‡è§„åˆ™æè¿°çš„å·¥å…·ç±»ï¼Œå¯ä»¥ç”¨äºAPIç­¾åï¼Œå¯è§ä¸‹é¢æºç é“¾æ¥ã€‚å¦‚æœéœ€è¦ä½¿ç”¨ timestamp å’Œ nonce çš„å¯åœ¨æ­¤åŸºç¡€ä¸Šå°†è¿™ä¸¤ä¸ªå­—æ®µæ·»åŠ åˆ° sortedMap ä¸­ä¸€èµ·æ‹¼æ¥ï¼Œå¹¶é›†æˆRedisã€‚&lt;/p&gt;

&lt;h2 id=&quot;å‚è€ƒæ–‡çŒ®&quot;&gt;å‚è€ƒæ–‡çŒ®&lt;/h2&gt;
</description>
<pubDate>Wed, 25 Dec 2019 00:38:00 +0000</pubDate>
<dc:creator>Fururur</dc:creator>
<og:description>å‰è¨€ ç°åœ¨è¶Šæ¥è¶Šå¤šçš„å…¬å¸ä»¥ API çš„å½¢å¼å¯¹å¤–æä¾›æœåŠ¡ï¼Œè¿™äº› API æ¥å£å¤§å¤šæš´éœ²åœ¨å…¬ç½‘ä¸Šï¼Œæ‰€ä»¥å®‰å…¨æ€§å°±å˜çš„å¾ˆé‡è¦äº†ã€‚æœ€ç›´æ¥çš„é£é™©å¦‚ä¸‹ï¼š éæ³•ä½¿ç”¨ API æœåŠ¡ã€‚ï¼ˆæ”¶è´¹æ¥å£éæ³•è°ƒç”¨ï¼‰ æ¶æ„æ”»å‡»å’Œç ´åã€‚</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/Sinte-Beuve/p/12093307.html</dc:identifier>
</item>
<item>
<title>TypeScriptèº¬è¡Œè®°ï¼ˆ5ï¼‰â€”â€”ç±»å‹å…¼å®¹æ€§ - å’–å•¡æœºï¼ˆK.F.Jï¼‰</title>
<link>http://www.cnblogs.com/strick/p/11726848.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/strick/p/11726848.html</guid>
<description>&lt;p&gt;ã€€ã€€TypeScriptæ˜¯ä¸€ç§åŸºäºç»“æ„ç±»å‹çš„è¯­è¨€ï¼Œå¯æ ¹æ®å…¶æˆå‘˜æ¥æè¿°ç±»å‹ã€‚ä»¥ç»“æ„ç›¸åŒçš„Personæ¥å£å’ŒProgrammerç±»ä¸ºä¾‹ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;interface&lt;/span&gt;&lt;span&gt; Person {
  name: &lt;/span&gt;&lt;span&gt;string&lt;/span&gt;&lt;span&gt;;
}
&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; Programmer {
  name: &lt;/span&gt;&lt;span&gt;string&lt;/span&gt;&lt;span&gt;;
}
let person: Person &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; Programmer();
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€ç”±äºç»“æ„ç±»å‹çš„å…³ç³»ï¼Œå› æ­¤å½“å˜é‡å£°æ˜ä¸ºPersonç±»å‹æ—¶ï¼Œå¯é€šè¿‡Programmerç±»å®ä¾‹åŒ–ã€‚ç”±æ­¤å¯çŸ¥ï¼Œç»“æ„ç±»å‹åªå…³æ³¨ç±»å‹çš„ç»„æˆç»“æ„ï¼Œè€Œåç§°å¹¶ä¸é‡è¦ã€‚&lt;/p&gt;

&lt;p&gt;ã€€ã€€åœ¨åˆ¤æ–­ä¸¤ä¸ªå‡½æ•°çš„å…¼å®¹æ€§æ—¶ï¼Œéœ€è¦è€ƒè™‘å‚æ•°æ•°é‡ã€è¿”å›å€¼ç±»å‹ç­‰å¤šä¸ªæ–¹é¢ã€‚&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;1ï¼‰å‚æ•°æ•°é‡&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€å‡è®¾æœ‰ä¸¤ä¸ªå‡½æ•°add()å’Œsum()ï¼Œå®ƒä»¬çš„å‚æ•°æ•°é‡ä¸åŒï¼Œåè€…æ¯”å‰è€…å¤šä¸€ä¸ªå‚æ•°ï¼Œè€Œå‡½æ•°çš„è¿”å›å€¼ç±»å‹ç›¸åŒï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
let add = (x: number) =&amp;gt; 0&lt;span&gt;;
let sum &lt;/span&gt;= (y: number, z: number) =&amp;gt; 0;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€å½“æŠŠaddèµ‹ç»™sumæ—¶ï¼Œç¼–è¯‘èƒ½æˆåŠŸæ‰§è¡Œï¼›è€Œåä¹‹ï¼Œåˆ™ä¼šæŠ¥é”™ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
sum = add;        &lt;span&gt;//&lt;/span&gt;&lt;span&gt;æ­£ç¡®&lt;/span&gt;
add = sum;        &lt;span&gt;//&lt;/span&gt;&lt;span&gt;é”™è¯¯&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€ç”±æ­¤å¯çŸ¥ï¼Œå‚æ•°å°‘çš„å‡½æ•°ä¸èƒ½èµ‹ç»™å‚æ•°å¤šçš„ï¼›è€Œåè¿‡æ¥æ—¶ï¼Œéœ€è¦ç¡®ä¿æ¯ä¸ªä½ç½®æ‰€å¯¹åº”çš„å‚æ•°ç±»å‹ä¿æŒä¸€è‡´ï¼Œä¸è¿‡å‚æ•°åç§°å¯ä»¥ä¸åŒã€‚&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;2ï¼‰è¿”å›å€¼ç±»å‹&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€å‡è®¾æœ‰ä¸¤ä¸ªå‡½æ•°add()å’Œsum()ï¼Œå®ƒä»¬æ²¡æœ‰å‚æ•°ï¼Œåè€…çš„è¿”å›å€¼æ¯”å‰è€…å¤šä¸€ä¸ªå±æ€§ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
let add = () =&amp;gt; ({ x: 1&lt;span&gt; });
let sum &lt;/span&gt;= () =&amp;gt; ({ x: 1, y: 2});
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€å½“æŠŠsumèµ‹ç»™addæ—¶ï¼Œç¼–è¯‘èƒ½æˆåŠŸæ‰§è¡Œï¼›è€Œåä¹‹ï¼Œåˆ™ä¼šæŠ¥é”™ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
add = sum;        &lt;span&gt;//&lt;/span&gt;&lt;span&gt;æ­£ç¡®&lt;/span&gt;
sum = add;        &lt;span&gt;//&lt;/span&gt;&lt;span&gt;é”™è¯¯&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€ç”±æ­¤å¯çŸ¥ï¼Œæºå‡½æ•°çš„è¿”å›å€¼ç±»å‹å¾—æ˜¯ç›®æ ‡å‡½æ•°è¿”å›å€¼çš„å­ç±»å‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;3ï¼‰å‚æ•°ç±»å‹&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€TypeScriptä¸­çš„å‚æ•°ç±»å‹éœ€è¦åŒæ—¶æ»¡è¶³åå˜å’Œé€†å˜ï¼Œå³åŒå‘åå˜ã€‚åå˜æ¯”è¾ƒå¥½ç†è§£ï¼Œæ˜¯æŒ‡å­ç±»å‹å…¼å®¹çˆ¶ç±»å‹ï¼Œè€Œé€†å˜æ­£å¥½ä¸åå˜ç›¸åã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œå®šä¹‰äº†çˆ¶ç±»Personå’Œå­ç±»Programmerï¼ŒProgrammerç±»è¦†ç›–äº†Personç±»ä¸­çš„work()æ–¹æ³•ï¼Œå¹¶ä¸”å…¶å‚æ•°ç±»å‹å£°æ˜çš„æ›´åŠ å®½æ³›ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; Person {
  work(msg: &lt;/span&gt;&lt;span&gt;string&lt;/span&gt; |&lt;span&gt; undefined) { }
}
&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; Programmer extends Person {
  work(msg: &lt;/span&gt;&lt;span&gt;string&lt;/span&gt;&lt;span&gt;) { }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æ¥ä¸‹æ¥å£°æ˜ä¸¤ä¸ªå‡½æ•°ï¼Œå®ƒä»¬çš„å‚æ•°ç±»å‹åˆ†åˆ«æ˜¯Personå’ŒProgrammerä¸¤ä¸ªç±»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œå…¶ä¸­person()å‡½æ•°æ˜¯programmer()å‡½æ•°çš„å­ç±»å‹ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
let person = (x: Person) =&amp;gt; 0&lt;span&gt;;
let programmer &lt;/span&gt;= (x: Programmer) =&amp;gt; 0;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€ç”±äºå‚æ•°ç±»å‹æ˜¯åŒå‘åå˜çš„ï¼Œå› æ­¤ä¸¤ä¸ªå˜é‡ä¹‹é—´å¯ç›¸äº’èµ‹å€¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
person =&lt;span&gt; programmer;
programmer &lt;/span&gt;= person;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;4ï¼‰å¯é€‰å‚æ•°å’Œå‰©ä½™å‚æ•°&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€åœ¨æ¯”è¾ƒå‡½æ•°çš„å…¼å®¹æ€§æ—¶ï¼Œä¸éœ€è¦åŒ¹é…å¯é€‰å‚æ•°ã€‚ä»¥ä¸‹é¢çš„pls()å’Œadd()ä¸¤ä¸ªå‡½æ•°ä¸ºä¾‹ï¼Œpls()ä¸­çš„ä¸¤ä¸ªå‚æ•°å¿…ä¼ ï¼Œè€Œadd()ä¸­çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯é€‰çš„ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
let pls = (x: number, y: number) =&amp;gt; 0&lt;span&gt;;
let add &lt;/span&gt;= (x: number, y?: number) =&amp;gt; 0&lt;span&gt;;
pls &lt;/span&gt;=&lt;span&gt; add;
add &lt;/span&gt;= pls;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€è™½ç„¶å‚æ•°ä¸åŒï¼Œä½†æ˜¯ä¸¤ä¸ªå‡½æ•°ä»ç„¶æ˜¯å…¼å®¹çš„ï¼Œå¹¶ä¸”å¯ä»¥ç›¸äº’èµ‹å€¼ã€‚å‰©ä½™å‚æ•°ç›¸å½“äºæ— é™ä¸ªå¯é€‰å‚æ•°ï¼Œä¹Ÿä¸ä¼šè¢«åŒ¹é…ã€‚ä¸‹é¢ç¤ºä¾‹ä¸­çš„sum()å‡½æ•°åªå£°æ˜äº†å‰©ä½™å‚æ•°ï¼Œå®ƒä¸pls()å’Œadd()ä¸¤ä¸ªå‡½æ•°éƒ½æ˜¯å…¼å®¹çš„ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
let sum = (...args: number[]) =&amp;gt; 0&lt;span&gt;;
pls &lt;/span&gt;=&lt;span&gt; sum;
sum &lt;/span&gt;=&lt;span&gt; pls;

add &lt;/span&gt;=&lt;span&gt; sum;
sum &lt;/span&gt;= add;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;5ï¼‰å‡½æ•°é‡è½½&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€å½“æ¯”è¾ƒå­˜åœ¨å¤šä¸ªé‡è½½çš„å‡½æ•°æ—¶ï¼Œå…¶æ¯ä¸ªé‡è½½éƒ½è¦åœ¨ç›®æ ‡å‡½æ•°ä¸Šæ‰¾åˆ°å¯¹åº”çš„å‡½æ•°ç­¾åï¼Œä»¥æ­¤ç¡®ä¿ç›®æ ‡å‡½æ•°èƒ½åœ¨æºå‡½æ•°æ‰€æœ‰å¯è°ƒç”¨çš„åœ°æ–¹è°ƒç”¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;interface add {
  (x: number, y: string): any;
  (x: number, y: number): number;
}
&lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; sum(x: number, y: string): any;
&lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; sum(x: number, y: number): number;
let func: add &lt;/span&gt;= sum;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ã€€ã€€æ¥è‡ªäºä¸åŒæšä¸¾ç±»å‹çš„æšä¸¾å€¼ï¼Œè¢«è®¤ä¸ºæ˜¯ä¸å…¼å®¹çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œå½“æŠŠDirection.Upèµ‹ç»™colorå˜é‡æ—¶ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µä¼šæŠ¥é”™ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt;enum&lt;/span&gt;&lt;span&gt; Color { Red, Green, Blue }
&lt;/span&gt;&lt;span&gt;enum&lt;/span&gt;&lt;span&gt; Direction { Up, Down, Left, Right }
let color &lt;/span&gt;= Color.Red;        &lt;span&gt;//&lt;/span&gt;&lt;span&gt;æ­£ç¡®&lt;/span&gt;
color = Direction.Up;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt;é”™è¯¯&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æ•°å­—æšä¸¾å’Œæ•°å­—ç±»å‹ç›¸äº’å…¼å®¹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œcolorå˜é‡è¢«èµ‹äºˆäº†æšä¸¾æˆå‘˜ï¼Œdigitå˜é‡æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå®ƒä»¬ä¹‹é—´å¯ä»¥ç›¸äº’èµ‹å€¼ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
let color =&lt;span&gt; Color.Red;
let digit &lt;/span&gt;= 1&lt;span&gt;;
color &lt;/span&gt;=&lt;span&gt; digit;
digit &lt;/span&gt;= color;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€å­—ç¬¦ä¸²æšä¸¾æ— æ³•å…¼å®¹å­—ç¬¦ä¸²ç±»å‹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œå½“æŠŠfieldå˜é‡èµ‹ç»™Colorçš„æšä¸¾æˆå‘˜æ—¶ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µä¼šæŠ¥é”™ï¼Œä½†åè¿‡æ¥å¯ä»¥æ­£ç¡®æ‰§è¡Œã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;enum&lt;/span&gt; Color { Red = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;RED&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, Green = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;GREEN&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, Blue = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;BLUE&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; }
let color &lt;/span&gt;=&lt;span&gt; Color.Red;
let field &lt;/span&gt;= &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;PURPLE&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
color &lt;/span&gt;= field;            &lt;span&gt;//&lt;/span&gt;&lt;span&gt;é”™è¯¯&lt;/span&gt;
field = color;            &lt;span&gt;//&lt;/span&gt;&lt;span&gt;æ­£ç¡®&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ã€€ã€€ç±»ä¸å¯¹è±¡å­—é¢é‡å’Œæ¥å£ç±»ä¼¼ï¼Œä½†ç±»åŒ…å«é™æ€å’Œå®ä¾‹ä¸¤éƒ¨åˆ†ã€‚åœ¨æ¯”è¾ƒä¸¤ä¸ªç±»å®ä¾‹æ—¶ï¼Œä»…åŒ¹é…å®ƒä»¬çš„å®ä¾‹æˆå‘˜ï¼Œè€Œé™æ€æˆå‘˜å’Œæ„é€ å‡½æ•°ä¸å½±å“å…¼å®¹æ€§ï¼Œå› ä¸ºå®ƒä»¬åœ¨æ¯”è¾ƒæ—¶ä¼šè¢«å¿½ç•¥ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œåˆ›å»ºäº†Personå’ŒProgrammerä¸¤ä¸ªç±»ï¼Œè™½ç„¶Programmerç±»åŒ…å«äº†ä¸€ä¸ªé™æ€å±æ€§ï¼Œå¹¶ä¸”å…¶æ„é€ å‡½æ•°ä¸Personç±»ä¸åŒï¼Œä½†æ˜¯å®ƒä»¬ä¹‹é—´å¯ä»¥ç›¸äº’å…¼å®¹ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; Person {
  name: &lt;/span&gt;&lt;span&gt;string&lt;/span&gt;&lt;span&gt;;
  constructor(name: &lt;/span&gt;&lt;span&gt;string&lt;/span&gt;&lt;span&gt;) { }
}
&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; Programmer {
  name: &lt;/span&gt;&lt;span&gt;string&lt;/span&gt;&lt;span&gt;;
  &lt;/span&gt;&lt;span&gt;static&lt;/span&gt;&lt;span&gt; age: number;
  constructor(name: &lt;/span&gt;&lt;span&gt;string&lt;/span&gt;&lt;span&gt;, age: number) { }
}

let person: Person;
let programmer: Programmer;
person &lt;/span&gt;=&lt;span&gt; programmer;
programmer &lt;/span&gt;= person;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€ç±»çš„ç§æœ‰æˆå‘˜å’Œå—ä¿æŠ¤æˆå‘˜ä¼šå½±å“å…¼å®¹æ€§ï¼ŒTypeScriptè¦æ±‚å®ƒä»¬å¿…é¡»æ¥æºäºåŒä¸€ä¸ªç±»ï¼Œä»è€Œæ—¢èƒ½ä¿è¯çˆ¶ç±»å…¼å®¹å­ç±»ï¼Œä¹Ÿèƒ½é¿å…ä¸å…¶å®ƒç›¸åŒç»“æ„çš„ç±»å…¼å®¹ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼ŒPersonå’ŒTeacherä¸¤ä¸ªç±»éƒ½åŒ…å«ä¸€ä¸ªåŒåçš„ç§æœ‰å±æ€§ï¼ŒProgrammeræ˜¯Personçš„å­ç±»ï¼Œä¸‰ä¸ªå˜é‡çš„ç±»å‹å¯¹åº”è¿™ä¸‰ä¸ªç±»ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; Person {
  &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; name: &lt;span&gt;string&lt;/span&gt;&lt;span&gt;;
}
&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; Teacher {
  &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; name: &lt;span&gt;string&lt;/span&gt;&lt;span&gt;;
}
&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; Programmer extends Person { }

let person: Person;
let programmer: Programmer;
let teacher: Teacher;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€personå’Œprogrammerä¸¤ä¸ªå˜é‡å¯ç›¸äº’èµ‹å€¼ï¼Œå› ä¸ºå®ƒä»¬çš„ç§æœ‰æˆå‘˜æ¥æºäºåŒä¸€ä¸ªç±»ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
person =&lt;span&gt; programmer;
programmer &lt;/span&gt;= person;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€è™½ç„¶personå’Œteacherä¸¤ä¸ªå˜é‡çš„ç»“æ„ç›¸åŒï¼Œä½†æ˜¯å®ƒä»¬çš„ç§æœ‰æˆå‘˜æ¥æºäºä¸¤ä¸ªä¸åŒçš„ç±»ï¼Œå› æ­¤æ— æ³•ç›¸äº’èµ‹å€¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
person = teacher;        &lt;span&gt;//&lt;/span&gt;&lt;span&gt;é”™è¯¯&lt;/span&gt;
teacher = person;        &lt;span&gt;//&lt;/span&gt;&lt;span&gt;é”™è¯¯&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ã€€ã€€å½“æ³›å‹æ¥å£ä¸­çš„ç±»å‹å‚æ•°æœªä½¿ç”¨æ—¶ï¼Œä¸ä¼šå½±å“å…¶å…¼å®¹æ€§ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œxå’Œyä¸¤ä¸ªå˜é‡å¯ç›¸äº’èµ‹å€¼ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;interface&lt;/span&gt; Person&amp;lt;T&amp;gt;&lt;span&gt; { }
let x: Person&lt;/span&gt;&amp;lt;number&amp;gt;&lt;span&gt;;
let y: Person&lt;/span&gt;&amp;lt;&lt;span&gt;string&lt;/span&gt;&amp;gt;&lt;span&gt;;

x &lt;/span&gt;=&lt;span&gt; y;
y &lt;/span&gt;= x;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€å½“æ³›å‹æ¥å£ä¸­çš„ç±»å‹å‚æ•°è¢«ä¸€ä¸ªæˆå‘˜ä½¿ç”¨æ—¶ï¼Œå°±ä¼šå½±å“å…¶å…¼å®¹æ€§ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œxå’Œyä¸¤ä¸ªå˜é‡ä¸å¯ç›¸äº’èµ‹å€¼ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;interface&lt;/span&gt; Person&amp;lt;T&amp;gt;&lt;span&gt; {
  data: T;
}
let x: Person&lt;/span&gt;&amp;lt;number&amp;gt;&lt;span&gt;;
let y: Person&lt;/span&gt;&amp;lt;&lt;span&gt;string&lt;/span&gt;&amp;gt;&lt;span&gt;;

x &lt;/span&gt;= y;        &lt;span&gt;//&lt;/span&gt;&lt;span&gt;é”™è¯¯&lt;/span&gt;
y = x;        &lt;span&gt;//&lt;/span&gt;&lt;span&gt;é”™è¯¯&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€å½“æ¯”è¾ƒæœªæŒ‡å®šå‚æ•°ç±»å‹çš„æ³›å‹å‡½æ•°æ—¶ï¼Œåœ¨æ£€æŸ¥å…¼å®¹æ€§ä¹‹å‰ä¼šå°†å…¶æ›¿æ¢æˆanyç±»å‹ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä¸¤ä¸ªå‡½æ•°ï¼Œç›¸å½“äºå¯¹â€œ(x: any)=&amp;gt;anyâ€å’Œâ€œ(y: any)=&amp;gt;anyâ€è¿›è¡ŒåŒ¹é…ï¼Œå› æ­¤å¯ç›¸äº’èµ‹å€¼ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
let send = &lt;span&gt;function&lt;/span&gt;&amp;lt;T&amp;gt;&lt;span&gt;(x: T): T {
  &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; x;
}
let func &lt;/span&gt;= &lt;span&gt;function&lt;/span&gt;&amp;lt;U&amp;gt;&lt;span&gt;(y: U): U {
  &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; y;
}

send &lt;/span&gt;=&lt;span&gt; func;
func &lt;/span&gt;= send;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Â ã€€ã€€æ³›å‹ç±»çš„å…¼å®¹æ€§è§„åˆ™ä¸ä¹‹å‰æ‰€è¿°ä¸€è‡´ã€‚&lt;/p&gt;
</description>
<pubDate>Wed, 25 Dec 2019 00:01:00 +0000</pubDate>
<dc:creator>å’–å•¡æœºï¼ˆK.F.Jï¼‰</dc:creator>
<og:description>TypeScriptæ˜¯ä¸€ç§åŸºäºç»“æ„ç±»å‹çš„è¯­è¨€ï¼Œå¯æ ¹æ®å…¶æˆå‘˜æ¥æè¿°ç±»å‹ã€‚ä»¥ç»“æ„ç›¸åŒçš„Personæ¥å£å’ŒProgrammerç±»ä¸ºä¾‹ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ ç”±äºç»“æ„ç±»å‹çš„å…³ç³»ï¼Œå› æ­¤å½“å˜é‡å£°æ˜ä¸ºPersonç±»å‹æ—¶ï¼Œå¯é€š</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/strick/p/11726848.html</dc:identifier>
</item>
<item>
<title>åšä¸ªåˆ«å‡ºå¿ƒè£çš„åœ£è¯ç¤¼ç‰© - jerry_fuyi</title>
<link>http://www.cnblogs.com/jerry-fuyi/p/oled_gif.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/jerry-fuyi/p/oled_gif.html</guid>
<description>&lt;p&gt;å¿™æ´»äº†å°åŠå¹´ï¼Œè½¬çœ¼é—´åœ£è¯å°†è‡³ã€‚è¿™æ¬¡æˆ‘æ˜¯æ²¡æ—¶é—´åƒä»¥å‰é‚£æ ·ï¼Œèµ°ä¸€å¥—æ–¹æ¡ˆã€PCBã€ç„Šæ¥ã€ç¨‹åºã€è°ƒè¯•çš„æµç¨‹äº†ï¼Œåªå¥½åœ¨ç°æœ‰çš„å¼€å‘æ¿ä¸Šå†™ä»£ç äº†ã€‚&lt;/p&gt;
&lt;p&gt;å½“æˆ‘åšå‡ºè¿™ä¸ªå†³å®šæ—¶ï¼Œæˆ‘çš„æƒ³æ³•åªæ˜¯ç”¨EasyElectronicsæ¿åœ¨0.96å¯¸OLEDæ˜¾ç¤ºå±ä¸Šç”»ä¸€é¢—çˆ±å¿ƒã€‚ä½†æ˜¯å†™ç€å†™ç€æˆ‘å°±è§‰å¾—è¿™ä¸ªçˆ±å¿ƒéš¾ç”»â€”â€”&lt;/p&gt;
&lt;ul readability=&quot;-0.5&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;æˆ‘æ‰¾ä¸åˆ°ä¸€ä¸ªå«è“„ä¹‹ä¸­å¸¦æœ‰ä¸‰åˆ†æ´»æ³¼ä¸‰åˆ†ä¿çš®å››åˆ†å¯çˆ±çš„çˆ±å¿ƒå½¢çŠ¶ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;ç›¸æ¯”ä»¥å‰åšè¿‡çš„åŒè‰²666å…‰ç«‹æ–¹ï¼ˆä¹Ÿè®¸ä»¥åä¼šå†™å§ï¼‰ï¼Œç”»ä¸ªçˆ±å¿ƒå®åœ¨å…¥ä¸äº†æˆ‘çš„æ³•çœ¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;äºæ˜¯æ€’æ”¹æ–¹æ¡ˆï¼ŒæŠŠæŠ åˆ°ä¸€åŠçš„çˆ±å¿ƒå›¾æ‰”è¿›äº†å›æ”¶ç«™ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ç”»ä»€ä¹ˆå‘¢ï¼Ÿé™æ€çš„çˆ±å¿ƒä¸è¡Œï¼Œè¦ç”»ä¸ªä¼šåŠ¨çš„ã€‚ä»€ä¹ˆä¼šåŠ¨å‘¢ï¼ŸGIFï¼ä¸–ä¸ŠGIFåƒåƒä¸‡ï¼Œé€‰å“ªä¸ªå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æˆ‘é€‰äº†å¾®ä¿¡è¡¨æƒ…åŒ…â€œé•¿è‰é¢œå›¢å­è¿‡å¹´å•¦â€ç¬¬ä¸€è¡Œç¬¬äºŒä¸ªâ€œå–œæ¬¢ä½ â€ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ä¸€è·å–æ¯ä¸€å¸§å›¾åƒ&quot;&gt;ä¸€ã€è·å–æ¯ä¸€å¸§å›¾åƒ&lt;/h3&gt;
&lt;p&gt;ç½‘ä¸ŠæŸ¥é˜…äº†ä¸€ä¸‹ç›¸å…³èµ„æ–™ï¼Œå‘å¸ƒçš„è¡¨æƒ…æƒ³è¦è·å¾—GIFæ˜¯åŸºæœ¬æ²¡æˆçš„ã€‚åªæœ‰æš´åŠ›æˆªå±äº†ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;å·¥å…·ï¼šæ‰‹æœºã€‚&lt;br/&gt;æ“ä½œï¼šå½•å±ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¹¶ä¼ è¾“åˆ°ç”µè„‘ï¼Œæ­¤æ­¥éª¤çœç•¥ã€‚ç„¶åæŠŠæ¯ä¸€å¸§æŒ–å‡ºæ¥ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;6.5531914893617&quot;&gt;
&lt;p&gt;å·¥å…·ï¼š&lt;a href=&quot;https://potplayer.daum.net/&quot; target=&quot;_blank&quot;&gt;PotPlayer&lt;/a&gt;ï¼ˆä¹Ÿå¯ä»¥ç”¨å…¶ä»–è½¯ä»¶ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æ“ä½œï¼šå¯¹äºæ¯ä¸€å¸§ï¼ˆç”¨Dä¸Fæ¥é€å¸§æ’­æ”¾ï¼‰ï¼Œä¿å­˜å½“å‰å¸§ï¼ˆpngæ ¼å¼ï¼‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸€å…±è·å¾—19å¼ ä¸åŒçš„å›¾ç‰‡ã€‚æˆ‘æ²¡æ‰¾åˆ°å¯ä»¥æ‰¹é‡è£å‰ªå›¾ç‰‡çš„è½¯ä»¶ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;å·¥å…·ï¼šç”»å›¾ã€‚&lt;/p&gt;
&lt;p&gt;æ“ä½œï¼šå¯¹äºæ¯ä¸€å¸§ï¼Œè£å‰ªå‡ºè¡¨æƒ…éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;äºŒæè‡´è‰²å½©-ç®€çº¦çº¿æ¡&quot;&gt;äºŒã€æè‡´è‰²å½©-&amp;gt;ç®€çº¦çº¿æ¡&lt;/h3&gt;
&lt;p&gt;ç°åœ¨æœ‰äº†è¡¨æƒ…çš„æ¯ä¸€å¸§ï¼ˆä¸è¿‡èƒŒæ™¯æ˜¯ç°è‰²çš„ï¼‰ï¼Œä½†åœ¨è½¬æ¢ä¸ºOLEDå¯ä»¥æ¥å—çš„æ ¼å¼ä¹‹å‰ï¼Œè¿˜éœ€è¦å…ˆæŠŠå½©è‰²å›¾ç‰‡è½¬æ¢ä¸ºé»‘ç™½ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœç›´æ¥ç”¨ç”»å›¾ä¿å­˜ä¸ºå•è‰²ä½å›¾ï¼Œä¸­é—´çš„çˆ±å¿ƒä¼šæ¶ˆå¤±ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;å·¥å…·ï¼šWord 2019ï¼ˆä¸å¤ªè€çš„ç‰ˆæœ¬åº”è¯¥éƒ½è¡Œå§ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æ“ä½œï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;
&lt;p&gt;å¯¹äºæ¯ä¸€å¸§ï¼š&lt;/p&gt;
&lt;ol readability=&quot;-2&quot;&gt;&lt;li&gt;
&lt;p&gt;æ’å…¥å›¾ç‰‡ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;å›¾ç‰‡æ ¼å¼-&amp;gt;é¢œè‰²-&amp;gt;é‡æ–°ç€è‰²-&amp;gt;é»‘ç™½50%ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦å­˜ä¸ºPDFï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;/blockquote&gt;
&lt;p&gt;åœ¨Wordä¸­ä¿å­˜å›¾ç‰‡ï¼Œè¾“å‡ºçš„æ˜¯åŸå§‹å›¾ç‰‡ã€‚æ¢ä¸ªå·¥å…·ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;å·¥å…·ï¼šAdobe Acrobat Pro DCã€‚&lt;/p&gt;
&lt;p&gt;æ“ä½œï¼šå¯¹äºæ¯ä¸€å¸§ï¼Œä¿å­˜å›¾ç‰‡ä¸ºbmpã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç°åœ¨æœ‰äº†é»‘ç™½å›¾ç‰‡ï¼Œä½†å°ºå¯¸æ˜¯æ‰‹æœºä¸Šæ˜¾ç¤ºçš„å¤§å°ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;å·¥å…·ï¼šç”»å›¾ï¼ˆæ²¡é”™åˆæ˜¯ç”»å›¾ï¼Œä¸‡èƒ½çš„ç”»å›¾ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æ“ä½œï¼šå¯¹äºæ¯ä¸€å¸§ï¼š&lt;/p&gt;
&lt;ol readability=&quot;0&quot;&gt;&lt;li&gt;
&lt;p&gt;å¦å­˜ä¸ºå•è‰²ä½å›¾ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;å¦‚æœå›¾ä¸­æœ‰çˆ±å¿ƒï¼Œå…ˆè¡¥å…¨è¾¹æ¡†ï¼ˆå¦‚æœè¾¹æ¡†ä¸å®Œæ•´ï¼‰ï¼Œå†å¡«å……é¢œè‰²ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;é‡æ–°è°ƒæ•´å¤§å°ï¼Œé«˜åº¦64ï¼ˆé•¿åº¦è‡ªåŠ¨70ï¼‰ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;è°ƒæ•´ä¸€äº›çœ‹å¾—ä¸é¡ºçœ¼çš„åƒç´ ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;/blockquote&gt;
&lt;h3 id=&quot;ä¸‰ç¿»è¯‘ä¸ºä»£ç &quot;&gt;ä¸‰ã€ç¿»è¯‘ä¸ºä»£ç &lt;/h3&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;å·¥å…·ï¼šPCtoLCD2002ï¼ˆç½‘ä¸Šå¾ˆå®¹æ˜“æ‰¾åˆ°ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æ“ä½œï¼šå¯¹äºæ¯ä¸€å¸§ï¼š&lt;/p&gt;
&lt;ol readability=&quot;-1&quot;&gt;&lt;li&gt;
&lt;p&gt;æ‰“å¼€å›¾ç‰‡ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;ç”Ÿæˆå­—æ¨¡ï¼ˆå³ä¸‹è§’ï¼›æ ¼å¼è‡ªå·±æ£é¼“å§ï¼‰ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¿å­˜å­—æ¨¡ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;æŠŠtxtæ–‡ä»¶çš„å†…å®¹å¤åˆ¶åˆ°ä»£ç ä¸­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;/blockquote&gt;
&lt;p&gt;ä¸€å…±19å¼ å›¾ï¼Œæœ€åä¸€å¼ å¤åˆ¶ä¸€éï¼Œæœ‰å®šæ ¼çš„æ•ˆæœã€‚&lt;/p&gt;

&lt;p&gt;å…ˆæ”¾&lt;a href=&quot;https://files.cnblogs.com/files/jerry-fuyi/heart.7z&quot; target=&quot;_blank&quot;&gt;é“¾æ¥&lt;/a&gt;ï¼ŒæŠŠ&lt;code&gt;Release\heart.hex&lt;/code&gt;çƒ§å†™è¿›å•ç‰‡æœºå°±å¯ä»¥è¿è¡Œå•¦ï¼&lt;/p&gt;
&lt;p&gt;ç¨‹åºç”¨Cè¯­è¨€å†™æˆï¼Œåˆ†æˆ4ä¸ªæ–‡ä»¶ï¼š&lt;/p&gt;
&lt;ul readability=&quot;1.5&quot;&gt;&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;&lt;code&gt;data.h&lt;/code&gt;ï¼Œä¿å­˜å›¾ç‰‡æ•°æ®ï¼ˆæƒ³æƒ³æŠŠå£°æ˜å’Œå®šä¹‰éƒ½æ”¾åœ¨&lt;code&gt;.h&lt;/code&gt;æ–‡ä»¶é‡Œä¼šå‡ºä»€ä¹ˆé—®é¢˜ï¼Ÿï¼‰ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;code&gt;driver.h&lt;/code&gt;ï¼ŒOLEDä¸å®šæ—¶å™¨ç›¸å…³å‡½æ•°å£°æ˜ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;code&gt;driver.c&lt;/code&gt;ï¼ŒSPIå‘é€ã€OLEDæŒ‡ä»¤ã€å®šæ—¶å™¨ä¸­æ–­ç­‰å®ç°ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;code&gt;main.c&lt;/code&gt;ï¼Œå®šæ—¶å™¨å›è°ƒå‡½æ•°ä¸ç¨‹åºå…¥å£ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å¤§è‡´æ€è·¯æ˜¯åœ¨&lt;code&gt;main&lt;/code&gt;ä¸­åˆå§‹åŒ–ï¼Œåœ¨å®šæ—¶å™¨ä¸­æ–­ä¸­è¯»å–å¹¶æ˜¾ç¤ºå›¾ç‰‡ã€‚&lt;/p&gt;
&lt;p&gt;å›¾ç‰‡ä¸º70*64åƒç´ ï¼Œæ¯ä¸€åƒç´ ç”¨ä¸€ä¸ªbitå­˜å‚¨ï¼Œä¸€å¼ å›¾ç‰‡éœ€è¦560å­—èŠ‚ï¼Œ20å¼ å°±æ˜¯11KBï¼Œå†…å­˜é‡Œæ”¾ä¸ä¸‹ã€‚&lt;code&gt;&amp;lt;avr/pgmspace.h&amp;gt;&lt;/code&gt;æä¾›äº†æŠŠæ•°æ®æ”¾åœ¨ç¨‹åºç©ºé—´ï¼ˆprogram spaceï¼Œå³flashï¼‰çš„å®&lt;code&gt;PROGMEM&lt;/code&gt;ï¼Œä»¥åŠå‡½æ•°&lt;code&gt;memcpy_P&lt;/code&gt;ï¼Œä¸&lt;code&gt;memcpy&lt;/code&gt;ç±»ä¼¼ï¼Œä¸è¿‡æ˜¯ä»flashä¸­æ‹·è´åˆ°å†…å­˜ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºè¿›å…¥ä¸é€€å‡ºä¸­æ–­éœ€è¦pushä¸popæ‰€æœ‰ä½¿ç”¨çš„å¯„å­˜å™¨ï¼Œç›¸æ¯”12.5MHzçš„SPIä¸3usçš„é—´éš”ï¼ˆå¦åˆ™OLEDä¸èƒ½æ­£å¸¸å·¥ä½œï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼‰æ‰€èŠ±çš„æ—¶é—´ç›¸å½“ï¼Œåœ¨ä¸­æ–­ä¸­å‘é€æ•°æ®æ²¡æœ‰æ„ä¹‰ï¼Œæ‰€ä»¥æ•°æ®æ˜¯é˜»å¡å‘é€çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ä¼˜é›…ï¼Œé©±åŠ¨åº“ä¸å®¢æˆ·ä¹‹é—´ç”¨å›è°ƒå‡½æ•°è§£è€¦ï¼šå®¢æˆ·å®šä¹‰å‡½æ•°&lt;code&gt;display&lt;/code&gt;ï¼Œåœ¨&lt;code&gt;main&lt;/code&gt;çš„åˆå§‹åŒ–ä¸­æŠŠ&lt;code&gt;display&lt;/code&gt;çš„æŒ‡é’ˆä½œä¸ºå‚æ•°ï¼Œæ³¨å†Œå›è°ƒï¼›é©±åŠ¨åº“åœ¨ä¸­æ–­ä¸­é€šè¿‡å‡½æ•°æŒ‡é’ˆè°ƒç”¨&lt;code&gt;display&lt;/code&gt;å‡½æ•°ï¼ˆå‡½æ•°æŒ‡é’ˆå¯ä»¥ä¸å†™å–åœ°å€å’Œè§£å¼•ç”¨ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å®ç°ç»†èŠ‚å°±å†™è¿™ä¹ˆå¤šå§ï¼Œå…¶ä½™çš„çœ‹ä»£ç å’Œdatasheetå³å¯ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åæ”¾ä¸€å¼ æ•ˆæœå›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1734552/201912/1734552-20191222221244801-2135847558.gif&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 24 Dec 2019 16:02:00 +0000</pubDate>
<dc:creator>jerry_fuyi</dc:creator>
<og:description>å¿™æ´»äº†å°åŠå¹´ï¼Œè½¬çœ¼é—´åœ£è¯å°†è‡³ã€‚è¿™æ¬¡æˆ‘æ˜¯æ²¡æ—¶é—´åƒä»¥å‰é‚£æ ·ï¼Œèµ°ä¸€å¥—æ–¹æ¡ˆã€PCBã€ç„Šæ¥ã€ç¨‹åºã€è°ƒè¯•çš„æµç¨‹äº†ï¼Œåªå¥½åœ¨ç°æœ‰çš„å¼€å‘æ¿ä¸Šå†™ä»£ç äº†ã€‚ å½“æˆ‘åšå‡ºè¿™ä¸ªå†³å®šæ—¶ï¼Œæˆ‘çš„æƒ³æ³•åªæ˜¯ç”¨EasyElectronicsæ¿</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/jerry-fuyi/p/oled_gif.html</dc:identifier>
</item>
<item>
<title>UWP è·å–åšå®¢å›­ç§¯åˆ†ï¼Œå¹¶ä»¥å›¾è¡¨å½¢å¼å‘ˆç°å˜åŒ–è¶‹åŠ¿ - æ˜ŸæœŸå…«å†å¨¶ä½ </title>
<link>http://www.cnblogs.com/hupo376787/p/12094009.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/hupo376787/p/12094009.html</guid>
<description>&lt;p&gt;å…ˆçœ‹ä¸€ä¸‹æ•ˆæœå§&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/298986/201912/298986-20191224201109134-805256605.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;


&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;1. åˆ†æ&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;è¯´å®è¯ï¼Œä¹‹å‰è¿˜çœŸæ²¡åœ¨ä¹è¿‡åšå®¢å›­çš„æ’åå’Œç§¯åˆ†ï¼Œåšå®¢å›­é»˜è®¤ä¹Ÿä¸ç»™æ˜¾ç¤ºã€‚éœ€è¦è‡ªå·±åˆ°é€‰é¡¹é‡Œé¢å‹¾é€‰æ‰å¯ä»¥ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/298986/201912/298986-20191224210244623-656205642.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â ä¹‹å‰ä¹Ÿæœ‰å‡ ä¸ªå¤§ä½¬å†™è¿‡ç±»ä¼¼çš„æ–‡ç« ï¼Œä¸è¿‡æ˜¯å¾ˆæ—©äº†ã€‚åšå®¢å›­å…³äºè·å–ç§¯åˆ†çš„apiå·²ç»å˜äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä¹Ÿä¸ç®—æ˜¯apiå§ï¼Œæ¯•ç«Ÿä¸æ˜¯å®˜æ–¹å…¬å¼€çš„ã€‚ä¸è¿‡è‡ªå·±å¯ä»¥é€šè¿‡æŸ¥çœ‹é¡µé¢å…ƒç´ ï¼Œæ‰¾åˆ°åšå®¢å›­çš„ç§¯åˆ†urlã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ä½ å‹¾é€‰âœ”äº†ä¸Šé¢çš„é€‰é¡¹ä¹‹åï¼Œæ‰“å¼€ä½ çš„åšå®¢ä¸»é¡µï¼Œæ¯”å¦‚æˆ‘çš„å°±æ˜¯&lt;a href=&quot;https://www.cnblogs.com/hupo376787/&quot;&gt;https://www.cnblogs.com/hupo376787/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æŒ‰F12ï¼Œè°ƒå‡ºå¼€å‘è€…å·¥å…·ï¼Œè¿›å…¥Networké€‰é¡¹å¡ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœåœ¨ä¸‹é¢çš„åˆ—è¡¨é‡Œé¢æ²¡æœ‰æ•°æ®ï¼ŒF5åˆ·æ–°ä¸€ä¸‹é¡µé¢å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/298986/201912/298986-20191224210617420-2015778716.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;


&lt;p&gt;ç„¶åï¼Œç‚¹å‡»ã€sidecolumn.aspxã€‘ï¼Œå³ä¾§å°±ä¼šå‡ºç°ç›¸ä¿¡çš„ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;å³å‡»ã€sidecolumn.aspxã€‘ï¼Œã€copy link addressã€‘ï¼Œè¿™ä¸ªurlå°±æ˜¯æˆ‘ä»¬è¦æ‰¾çš„ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åæ ¹æ®è¿™ä¸ªurlè¿”å›çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼æˆ–è€…å…¶ä»–æ‰‹æ®µæ‰¾åˆ°ç§¯åˆ†å’Œæ’åçš„æ•°æ®å³å¯ã€‚&lt;/p&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;2. å†™Xamlç•Œé¢&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;æ—¢ç„¶æ ¹æ®ä¸Šé¢çš„åˆ†æï¼Œå¯ä»¥æ‹¿åˆ°ç§¯åˆ†å’Œæ’åçš„æ•°æ®ï¼Œé‚£ä¹ˆå†™ä»£ç å°±ç®€å•å¤šäº†ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘è¿™é‡Œä½¿ç”¨C#æ¥å†™çš„ï¼Œè¯­è¨€åªæ˜¯ä¸€ç§å·¥å…·ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨Javaã€Swiftã€JavaScriptã€Flutterç­‰ï¼Œè¿˜å¯ä»¥ç”¨Pythonå†™ã€‚&lt;/p&gt;
&lt;p&gt;æ— è®ºå“ªä¸€ç§ï¼Œåªè¦èƒ½æ‹¿åˆ°æ•°æ®ï¼Œç”¨å›¾è¡¨å±•ç¤ºå‡ºæ¥å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨xamlä¸­ï¼Œå®šä¹‰ä¸€ä¸‹ç”¨æˆ·åè¾“å…¥æ¡†ï¼Œè¿˜æœ‰ä¸€ä¸ªå›¾è¡¨æ§ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;å›¾è¡¨ä½¿ç”¨çš„Microchartsã€‚è¿™æ˜¯ä¸€ä¸ªå¼€æºçš„å›¾è¡¨æ§ä»¶ï¼ŒGithubä¸Šå·²ç»æ–©è·1000å¤šä¸ªâœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&amp;lt;StackPanel&amp;gt;
            &amp;lt;&lt;span&gt;TextBox 
                x:Name&lt;/span&gt;=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;textBlockUser&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; 
                Background&lt;/span&gt;=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Transparent&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
                Padding&lt;/span&gt;=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;0, 5&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
                BorderThickness&lt;/span&gt;=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
                Width&lt;/span&gt;=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;200&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
                HorizontalAlignment&lt;/span&gt;=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Left&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
                PlaceholderText&lt;/span&gt;=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;hupo376787&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
                TextChanged&lt;/span&gt;=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;User_TextChanged&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;/&amp;gt;
            &amp;lt;TextBlock x:Name=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;textBlockDate&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;/&amp;gt;
            &amp;lt;TextBlock x:Name=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;textBlockScore&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;/&amp;gt;
            &amp;lt;TextBlock x:Name=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;textBlockRank&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;/&amp;gt;

            &amp;lt;charts:ChartView x:Name=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;microChart&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
                              Height&lt;/span&gt;=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;300&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;/StackPanel&amp;gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;3. è·å–ç½‘é¡µæ•°æ®&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;åˆ©ç”¨HttpClientå†™ä»£ç ï¼Œè·å–æŒ‡å®šurlçš„ç½‘é¡µæºä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;useræ˜¯æ–‡æœ¬æ¡†å¯ä»¥è¾“å…¥çš„ç”¨æˆ·idã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åæ ¹æ®Httpè¿”å›æ¥çš„æ•°æ®ï¼Œåšæˆä¸€ä¸ªList&amp;lt;string&amp;gt;ã€‚è¿™æ ·å°±ä¸ç”¨å†™æ­£åˆ™è¡¨è¾¾å¼æŸ¥æ‰¾ğŸ”äº†ã€‚&lt;/p&gt;
&lt;p&gt;å…¶å®ä¸»è¦æ˜¯æˆ‘ä¸å¤§ä¼šå†™æ­£åˆ™è¡¨è¾¾å¼è€Œå·²ã€‚&lt;img src=&quot;https://img2018.cnblogs.com/blog/298986/201912/298986-20191224222738193-648461686.png&quot; alt=&quot;&quot; width=&quot;202&quot; height=&quot;112&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â ä¸å¥½æ„æ€æš´éœ²äº†ã€‚&lt;/p&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
 string url = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;https://www.cnblogs.com/&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; + user + &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/ajax/sidecolumn.aspx&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
                HttpClient client &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; HttpClient();
                HttpResponseMessage message &lt;/span&gt;= &lt;span&gt;await&lt;/span&gt;&lt;span&gt; client.GetAsync(url);
                &lt;/span&gt;&lt;span&gt;string&lt;/span&gt; content = &lt;span&gt;await&lt;/span&gt;&lt;span&gt; message.Content.ReadAsStringAsync();
                List&lt;/span&gt;&amp;lt;&lt;span&gt;string&lt;/span&gt;&amp;gt; lines = content.Replace(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;ç§¯åˆ†ä¸æ’å&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&quot;&lt;/span&gt;).Split(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;).ToList();

                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; scoreHeaderIndex = lines.FindIndex(x =&amp;gt; x.Contains(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;ç§¯åˆ†&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;));
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; rankHeaderIndex = lines.FindIndex(x =&amp;gt; x.Contains(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;æ’å&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;));

                &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; score = Convert.ToInt32(lines[scoreHeaderIndex + &lt;span&gt;1&lt;/span&gt;&lt;span&gt;]);
                &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; rank = Convert.ToInt32(lines[rankHeaderIndex + &lt;span&gt;1&lt;/span&gt;]);
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;4. ç”Ÿæˆå›¾è¡¨&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;å› ä¸ºè¦åšæˆè¶‹åŠ¿å›¾ï¼Œå¹¶ä¸”åšå®¢å›­è¿”å›çš„æ•°æ®åªæ˜¯å½“å¤©çš„ä¿¡æ¯ï¼Œå¹¶ä¸ä¸åŒ…å«å†å²è®°å½•ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥éœ€è¦æ‰‹åŠ¨è®°å½•æ•°æ®ï¼Œå¹¶å­˜æ”¾åœ¨æœ¬åœ°ã€‚&lt;/p&gt;
&lt;p&gt;ä¹‹å‰é‚£å‡ ä¸ªå¤§ä½¬ä¹Ÿæ˜¯è¿™æ ·å­ï¼Œå†™æˆäº†pythonæˆ–è€…jsï¼Œæ¯å¤©è‡ªåŠ¨è¿è¡Œä¸€æ¬¡ï¼Œä¿å­˜æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;UWPæƒ³è¦è®°å½•æ•°æ®ï¼Œéœ€è¦ä¸€ç‚¹é¢å¤–çš„æƒé™ã€‚&lt;/p&gt;
&lt;p&gt;å› ä¸ºéœ€è¦è®°å½•txtæ–‡ä»¶ï¼Œè€Œè¿™æ ·çš„æ–‡æœ¬æ–‡ä»¶æœ€å¥½æ”¾åœ¨user/documentæ–‡ä»¶å¤¹ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œç”¨è®°äº‹æœ¬æ‰“å¼€Package.appxmanifestï¼ŒåŠ ä¸Š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&amp;lt;Capabilities&amp;gt;
   &amp;lt;uap:Capability Name=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;documentsLibrary&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; /&amp;gt;
&amp;lt;/Capabilities&amp;gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ç„¶ååœ¨vsä¸­æ‰“å¼€Package.appxmanifestï¼Œæ·»åŠ å£°æ˜ã€‚æŒ‰ç…§å›¾ç¤ºè®¾ç½®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/298986/201912/298986-20191224223611378-1138035189.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;è¿™æ ·å°±æœ‰æƒé™å†™å…¥txtåˆ°æ–‡æ¡£æ–‡ä»¶å¤¹äº†ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
                StorageFolder storageFolder =&lt;span&gt; KnownFolders.DocumentsLibrary;
                StorageFile file &lt;/span&gt;= &lt;span&gt;await&lt;/span&gt; storageFolder.CreateFileAsync(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;cnBlogs.txt&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, CreationCollisionOption.OpenIfExists);
                &lt;/span&gt;&lt;span&gt;string&lt;/span&gt; existData = &lt;span&gt;await&lt;/span&gt;&lt;span&gt; FileIO.ReadTextAsync(file);
                List&lt;/span&gt;&amp;lt;&lt;span&gt;string&lt;/span&gt;&amp;gt; list = existData.Split(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;).ToList();
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;æˆ‘è¿™å„¿é¦–å…ˆè¯»å–äº†txté‡Œé¢çš„æ•°æ®ï¼Œå¦‚æœè¿™ä¸ªtxtä¸å­˜åœ¨ï¼Œå°±åˆ›å»ºã€‚å·²ç»å­˜åœ¨çš„è¯ï¼Œç›´æ¥æ‰“å¼€è¯»å–æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åç»˜å›¾&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;41&quot;&gt;
&lt;pre&gt;
                Random rnd = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Random();
                List&lt;/span&gt;&amp;lt;ChartEntry&amp;gt; entries = &lt;span&gt;new&lt;/span&gt; List&amp;lt;ChartEntry&amp;gt;&lt;span&gt;();
                &lt;/span&gt;&lt;span&gt;foreach&lt;/span&gt;(&lt;span&gt;var&lt;/span&gt; item &lt;span&gt;in&lt;/span&gt;&lt;span&gt; list)
                {
                    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (item.Trim() == &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;)
                        &lt;/span&gt;&lt;span&gt;continue&lt;/span&gt;&lt;span&gt;;

                    &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; singleLineArray = item.Split(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
                    &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; entry = &lt;span&gt;new&lt;/span&gt; ChartEntry((&lt;span&gt;float&lt;/span&gt;)Convert.ToDouble(singleLineArray[&lt;span&gt;1&lt;/span&gt;&lt;span&gt;]))
                    {
                        Label &lt;/span&gt;= singleLineArray[&lt;span&gt;0&lt;/span&gt;&lt;span&gt;],
                        ValueLabel &lt;/span&gt;= singleLineArray[&lt;span&gt;1&lt;/span&gt;&lt;span&gt;],
                        Color &lt;/span&gt;= SKColor.Parse(String.Format(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;#{0:X6}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, rnd.Next(&lt;span&gt;0x1000000&lt;/span&gt;&lt;span&gt;)))
                    };
                    entries.Add(entry);
                }&lt;/span&gt;&lt;span&gt;var&lt;/span&gt; chart = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; LineChart {
                    Entries &lt;/span&gt;=&lt;span&gt; entries,
                    MinValue &lt;/span&gt;= &lt;span&gt;100000&lt;/span&gt;&lt;span&gt;,
                    BackgroundColor &lt;/span&gt;=&lt;span&gt; SKColors.Transparent
                };
                &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.microChart.Chart = chart;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;å¦‚æœåœ¨ç”ŸæˆæŠ˜çº¿å›¾çš„æ—¶å€™ï¼Œä¸åŠ ä¸Š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
BackgroundColor = SKColors.Transparent
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç”Ÿæˆçš„å›¾è¡¨é»˜è®¤ç™½è‰²ã€‚ä½†æ˜¯èƒŒæ™¯é€æ˜å¥½çœ‹ã€‚&lt;/p&gt;


&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;5.Â è®°å½•è·å–çš„ç§¯åˆ†å’Œæ’åæ•°æ®&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Â ä¸ºäº†é˜²æ­¢ä¸€å¤©å†…å¤šæ¬¡æ‰“å¼€appï¼Œé‡å¤è®°å½•ï¼Œæ‰€ä»¥æˆ‘åšäº†ä¸€ä¸ªæ£€æŸ¥ã€‚&lt;/p&gt;
&lt;p&gt;åˆ©ç”¨System.IOå†™å…¥æ•°æ®ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;41&quot;&gt;
&lt;pre&gt;
&lt;span&gt;                string&lt;/span&gt; contentToWrite = &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;;
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;Add Today&lt;/span&gt;
                &lt;span&gt;if&lt;/span&gt; (!existData.Contains(DateTime.Now.ToString(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;yyyy-MM-dd&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)))
                {
                    &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; entryToday = &lt;span&gt;new&lt;/span&gt; ChartEntry((&lt;span&gt;float&lt;/span&gt;&lt;span&gt;)Convert.ToDouble(score))
                    {
                        Label &lt;/span&gt;=&lt;span&gt; score.ToString(),
                        ValueLabel &lt;/span&gt;= DateTime.Now.ToString(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;yyyy-MM-dd&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;),
                        Color &lt;/span&gt;= SKColor.Parse(&lt;span&gt;string&lt;/span&gt;.Format(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;#{0:X6}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, rnd.Next(&lt;span&gt;0x1000000&lt;/span&gt;&lt;span&gt;)))
                    };
                    entries.Append(entryToday);

                    contentToWrite &lt;/span&gt;= existData + &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; + DateTime.Now.ToString(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;yyyy-MM-dd&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;) + &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; + score + &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; +&lt;span&gt; rank;
                }
                &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;
                    contentToWrite &lt;/span&gt;=&lt;span&gt; existData;

                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;Write&lt;/span&gt;
                &lt;span&gt;await&lt;/span&gt; FileIO.WriteTextAsync(file, contentToWrite);
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;6. å®Œæˆçš„ä»£ç &lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;49&quot;&gt;
&lt;pre&gt;
&lt;span&gt;        private&lt;/span&gt; &lt;span&gt;async&lt;/span&gt; Task GetData(&lt;span&gt;string&lt;/span&gt;&lt;span&gt; user)
        {
            &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt;
            {
                &lt;/span&gt;&lt;span&gt;string&lt;/span&gt; url = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;https://www.cnblogs.com/&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; + user + &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/ajax/sidecolumn.aspx&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
                HttpClient client &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; HttpClient();
                HttpResponseMessage message &lt;/span&gt;= &lt;span&gt;await&lt;/span&gt;&lt;span&gt; client.GetAsync(url);
                &lt;/span&gt;&lt;span&gt;string&lt;/span&gt; content = &lt;span&gt;await&lt;/span&gt;&lt;span&gt; message.Content.ReadAsStringAsync();
                List&lt;/span&gt;&amp;lt;&lt;span&gt;string&lt;/span&gt;&amp;gt; lines = content.Replace(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;ç§¯åˆ†ä¸æ’å&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&quot;&lt;/span&gt;).Split(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;).ToList();

                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; scoreHeaderIndex = lines.FindIndex(x =&amp;gt; x.Contains(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;ç§¯åˆ†&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;));
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; rankHeaderIndex = lines.FindIndex(x =&amp;gt; x.Contains(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;æ’å&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;));

                &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; score = Convert.ToInt32(lines[scoreHeaderIndex + &lt;span&gt;1&lt;/span&gt;&lt;span&gt;]);
                &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; rank = Convert.ToInt32(lines[rankHeaderIndex + &lt;span&gt;1&lt;/span&gt;&lt;span&gt;]);

                textBlockDate.Text &lt;/span&gt;= DateTime.Now.ToString(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;yyyy-MM-dd&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
                textBlockScore.Text &lt;/span&gt;=&lt;span&gt; score.ToString();
                textBlockRank.Text &lt;/span&gt;=&lt;span&gt; rank.ToString();

                StorageFolder storageFolder &lt;/span&gt;=&lt;span&gt; KnownFolders.DocumentsLibrary;
                StorageFile file &lt;/span&gt;= &lt;span&gt;await&lt;/span&gt; storageFolder.CreateFileAsync(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;cnBlogs.txt&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, CreationCollisionOption.OpenIfExists);
                &lt;/span&gt;&lt;span&gt;string&lt;/span&gt; existData = &lt;span&gt;await&lt;/span&gt;&lt;span&gt; FileIO.ReadTextAsync(file);
                List&lt;/span&gt;&amp;lt;&lt;span&gt;string&lt;/span&gt;&amp;gt; list = existData.Split(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;).ToList();

                Random rnd &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Random();
                List&lt;/span&gt;&amp;lt;ChartEntry&amp;gt; entries = &lt;span&gt;new&lt;/span&gt; List&amp;lt;ChartEntry&amp;gt;&lt;span&gt;();
                &lt;/span&gt;&lt;span&gt;foreach&lt;/span&gt;(&lt;span&gt;var&lt;/span&gt; item &lt;span&gt;in&lt;/span&gt;&lt;span&gt; list)
                {
                    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (item.Trim() == &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;)
                        &lt;/span&gt;&lt;span&gt;continue&lt;/span&gt;&lt;span&gt;;

                    &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; singleLineArray = item.Split(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
                    &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; entry = &lt;span&gt;new&lt;/span&gt; ChartEntry((&lt;span&gt;float&lt;/span&gt;)Convert.ToDouble(singleLineArray[&lt;span&gt;1&lt;/span&gt;&lt;span&gt;]))
                    {
                        Label &lt;/span&gt;= singleLineArray[&lt;span&gt;0&lt;/span&gt;&lt;span&gt;],
                        ValueLabel &lt;/span&gt;= singleLineArray[&lt;span&gt;1&lt;/span&gt;&lt;span&gt;],
                        Color &lt;/span&gt;= SKColor.Parse(String.Format(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;#{0:X6}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, rnd.Next(&lt;span&gt;0x1000000&lt;/span&gt;&lt;span&gt;)))
                    };
                    entries.Add(entry);
                }

                &lt;/span&gt;&lt;span&gt;string&lt;/span&gt; contentToWrite = &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;;
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;Add Today&lt;/span&gt;
                &lt;span&gt;if&lt;/span&gt; (!existData.Contains(DateTime.Now.ToString(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;yyyy-MM-dd&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)))
                {
                    &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; entryToday = &lt;span&gt;new&lt;/span&gt; ChartEntry((&lt;span&gt;float&lt;/span&gt;&lt;span&gt;)Convert.ToDouble(score))
                    {
                        Label &lt;/span&gt;=&lt;span&gt; score.ToString(),
                        ValueLabel &lt;/span&gt;= DateTime.Now.ToString(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;yyyy-MM-dd&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;),
                        Color &lt;/span&gt;= SKColor.Parse(&lt;span&gt;string&lt;/span&gt;.Format(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;#{0:X6}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, rnd.Next(&lt;span&gt;0x1000000&lt;/span&gt;&lt;span&gt;)))
                    };
                    entries.Append(entryToday);

                    contentToWrite &lt;/span&gt;= existData + &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; + DateTime.Now.ToString(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;yyyy-MM-dd&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;) + &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; + score + &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; +&lt;span&gt; rank;
                }
                &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;
                    contentToWrite &lt;/span&gt;=&lt;span&gt; existData;

                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; chart = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; LineChart {
                    Entries &lt;/span&gt;=&lt;span&gt; entries,
                    MinValue &lt;/span&gt;= &lt;span&gt;100000&lt;/span&gt;&lt;span&gt;,
                    BackgroundColor &lt;/span&gt;=&lt;span&gt; SKColors.Transparent
                };
                &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.microChart.Chart =&lt;span&gt; chart;

                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;Write&lt;/span&gt;
                &lt;span&gt;await&lt;/span&gt;&lt;span&gt; FileIO.WriteTextAsync(file, contentToWrite);
            }
            &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt;
            {

            }
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ä¹‹æ‰€ä»¥åŠ äº†try{ ... } catch{ ... }ï¼Œæ˜¯å› ä¸ºåœ¨è¾“å…¥ç”¨æˆ·åçš„æ—¶å€™ï¼Œå¯ä»¥æ ¹æ®æ–‡æœ¬å˜åŒ–ï¼Œå®æ—¶æ£€æµ‹æ˜¯ä¸æ˜¯æœ‰æ•ˆçš„ç”¨æˆ·ï¼Œå¹¶ç”Ÿæˆå›¾è¡¨ã€‚&lt;/p&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;7. æ€»ç»“&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;è·å–å¹¶æ˜¾ç¤ºæ•°æ®ï¼Œæœ¬èº«ä¸æ˜¯ä¸€ä»¶å¾ˆéš¾çš„äº‹æƒ…ï¼Œå…³é”®æ˜¯æ€ä¹ˆåˆ©ç”¨å¾—åˆ°çš„æ•°æ®ï¼Œå¹¶æŠŠå®ƒå¾ˆæœ‰çš„å‘ˆç°å‡ºæ¥ã€‚&lt;/p&gt;
&lt;p&gt;å½“ç„¶ï¼Œæˆ‘è¿™é‡Œä¹Ÿå°‘åšäº†ä¸€æ­¥ï¼Œå°±æ˜¯è®©åº”ç”¨è‡ªå¯åŠ¨ï¼Œå¼€æœºçš„æ—¶å€™è·å–ä¸€æ¬¡æ•°æ®ï¼Œè¿™æ ·å°±å¯ä»¥é˜²æ­¢æŸå¤©å¿˜è®°æ‰“å¼€ï¼Œå¯¼è‡´æ•°æ®æ–­å±‚çš„é—®é¢˜äº†ã€‚&lt;/p&gt;
&lt;p&gt;å…³äºuwpå¦‚ä½•éšå¼€æœºå¯åŠ¨ï¼Œæˆ‘è¿˜æ²¡ç ”ç©¶è¿‡ï¼Œä»¥åæœ‰æ—¶é—´çš„å†™ä¸€äº›åˆ†äº«å¿ƒå¾—ã€‚&lt;/p&gt;

&lt;p&gt;OKï¼ŒMerry Christmasï¼Lonely Christiansï¼&lt;/p&gt;
&lt;p&gt;â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸â„ï¸&lt;/p&gt;
&lt;p&gt;â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„&lt;/p&gt;
&lt;p&gt;ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„&lt;/p&gt;
&lt;p&gt;ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…ğŸ…&lt;/p&gt;
&lt;p&gt;ğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸ&lt;/p&gt;
&lt;p&gt;Â ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦ğŸ§¦&lt;/p&gt;

</description>
<pubDate>Tue, 24 Dec 2019 14:58:00 +0000</pubDate>
<dc:creator>æ˜ŸæœŸå…«å†å¨¶ä½ </dc:creator>
<og:description>å…ˆçœ‹ä¸€ä¸‹æ•ˆæœå§ 1. åˆ†æ è¯´å®è¯ï¼Œä¹‹å‰è¿˜çœŸæ²¡åœ¨ä¹è¿‡åšå®¢å›­çš„æ’åå’Œç§¯åˆ†ï¼Œåšå®¢å›­é»˜è®¤ä¹Ÿä¸ç»™æ˜¾ç¤ºã€‚éœ€è¦è‡ªå·±åˆ°é€‰é¡¹é‡Œé¢å‹¾é€‰æ‰å¯ä»¥ã€‚ ä¹‹å‰ä¹Ÿæœ‰å‡ ä¸ªå¤§ä½¬å†™è¿‡ç±»ä¼¼çš„æ–‡ç« ï¼Œä¸è¿‡æ˜¯å¾ˆæ—©äº†ã€‚åšå®¢å›­å…³äºè·å–ç§¯åˆ†çš„apiå·²</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/hupo376787/p/12094009.html</dc:identifier>
</item>
<item>
<title>æ›¹å·¥è¯´Spring Bootæºç ï¼ˆ5ï¼‰-- æ€ä¹ˆä»propertiesæ–‡ä»¶è¯»å–bean - ä¸‰å›½æ¢¦å›</title>
<link>http://www.cnblogs.com/grey-wolf/p/12093929.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/grey-wolf/p/12093929.html</guid>
<description>&lt;p&gt;ç›¸å…³èƒŒæ™¯åŠèµ„æºï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.cnblogs.com/grey-wolf/p/12044199.html&quot;&gt;æ›¹å·¥è¯´Spring Bootæºç ï¼ˆ1ï¼‰-- Bean Definitionåˆ°åº•æ˜¯ä»€ä¹ˆï¼Œé™„springæ€ç»´å¯¼å›¾åˆ†äº«&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.cnblogs.com/grey-wolf/p/12051957.html&quot;&gt;æ›¹å·¥è¯´Spring Bootæºç ï¼ˆ2ï¼‰-- Bean Definitionåˆ°åº•æ˜¯ä»€ä¹ˆï¼Œå’±ä»¬å¯¹ç€æ¥å£ï¼Œé€ä¸ªæ–¹æ³•è®²è§£&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.cnblogs.com/grey-wolf/p/12070377.html&quot;&gt;æ›¹å·¥è¯´Spring Bootæºç ï¼ˆ3ï¼‰-- æ‰‹åŠ¨æ³¨å†ŒBean Definitionä¸æ¯”æ¸¸æˆå¥½ç©å—ï¼Œæˆ‘ä»¬æ¥è¯•ä¸€ä¸‹&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.cnblogs.com/grey-wolf/p/12078673.html&quot;&gt;æ›¹å·¥è¯´Spring Bootæºç ï¼ˆ4ï¼‰-- æˆ‘æ˜¯æ€ä¹ˆè‡ªå®šä¹‰ApplicationContextï¼Œä»jsonæ–‡ä»¶è¯»å–bean definitionçš„ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://gitee.com/ckl111/spring-boot-first-version-learn&quot;&gt;å·¥ç¨‹ä»£ç åœ°å€&lt;/a&gt; &lt;a href=&quot;https://www.processon.com/view/link/5deeefdee4b0e2c298aa5596&quot;&gt;æ€ç»´å¯¼å›¾åœ°å€&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å·¥ç¨‹ç»“æ„å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/519126/201912/519126-20191215144930717-1919774390.png&quot;/&gt;&lt;/p&gt;

&lt;p&gt;bean definitionå®åœ¨å¤ªè¿‡é‡è¦ï¼Œå¯ä»¥è¯´æ˜¯åŸºç¡€ä¸­çš„åŸºç¡€ï¼Œæ‰€ä»¥æˆ‘ä»¬èŠ±äº†å¾ˆå¤šè®²åœ¨è¿™ä¸Šé¢ï¼Œæœ¬è®²çš„ä¸»é¢˜ï¼Œè¿˜æ˜¯è¿™ä¸ªã€‚è¿™æ¬¡ï¼Œæˆ‘ä»¬æ˜¯ä»propertiesæ–‡ä»¶é‡Œè¯»å–&lt;code&gt;bean definition&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œä¸Šæ¬¡ï¼Œä»jsonè¯»å–ï¼Œæˆ‘ä»¬è‡ªå·±å®ç°äº†&lt;code&gt;org.springframework.beans.factory.support.AbstractBeanDefinitionReader&lt;/code&gt;ï¼Œä½¿ç”¨fastjsonä»jsonæ–‡ä»¶å†…è¯»å–ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ¬¡ï¼Œæˆ‘ä»¬ä¸éœ€è¦è‡ªå·±å®ç°ï¼Œæ˜¯å› ä¸ºspring-beansåŒ…å†…ï¼Œå±…ç„¶è‡ªå¸¦äº†ä»propertiesæ–‡ä»¶è¯»å–beançš„å®ç°ç±»ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/519126/201912/519126-20191224210313144-673386379.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œè¿™æ ·å°±å˜å¾—å¾ˆç®€å•äº†ï¼Œæˆ‘ä»¬åªéœ€è¦å®šä¹‰ä¸€ä¸ª&lt;code&gt;applicationContext&lt;/code&gt;ï¼Œè®©å®ƒä½¿ç”¨è¿™ä¸ªå¼€ç®±å³ç”¨çš„readerå³å¯ã€‚&lt;/p&gt;
&lt;p&gt;é—²è¨€å°‘å™ï¼Œlet's codeï¼&lt;/p&gt;

&lt;p&gt;æœ¬ç±»çš„&lt;code&gt;javadoc&lt;/code&gt;å¦‚æ˜¯è¯´ï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;pre&gt;
&lt;code&gt;* Bean definition reader for a simple properties format.
*
* &amp;lt;p&amp;gt;Provides bean definition registration methods for Map/Properties and
* ResourceBundle. Typically applied to a DefaultListableBeanFactory.&lt;/code&gt;
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p&gt;è¿™é‡Œè¯´ï¼Œå°±æ˜¯ä¸€ä¸ªä»propertiesæ ¼å¼çš„æ–‡ä»¶è¯»å–&lt;code&gt;bean definition&lt;/code&gt;çš„ï¼Œé‚£ä¹ˆï¼Œæ˜¯ä¸æ˜¯&lt;code&gt;properties&lt;/code&gt;å¯ä»¥éšä¾¿æ€ä¹ˆå†™å‘¢ï¼Ÿå—¯ï¼ŒæŒ‰ç†è¯´ï¼Œæ˜¯å¯ä»¥éšä¾¿å†™ï¼Œä½ åˆ«ç®¡æˆ‘æ€ä¹ˆå†™ï¼Œå½¢å¼é‡è¦å—ï¼Œé‡è¦çš„æ˜¯ï¼Œæœ‰è¿™ä¸ªæ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;bean definitionçš„æ ¸å¿ƒæ•°æ®æœ‰å“ªäº›ï¼Ÿå†å›å¿†ä¸€ä¸‹ï¼ŒbeanClassNameã€scopeã€lazy-initã€parentã€abstractç­‰ã€‚&lt;/p&gt;
&lt;p&gt;parentå’Œabstractï¼Œæ˜¯ä¸ªæ–°æ¦‚å¿µï¼Œå‰é¢æˆ‘ä¹Ÿæ²¡æœ‰æï¼Œå¤§å®¶çœ‹ä¸‹é¢çš„ä¾‹å­å¯èƒ½å°±æ‡‚äº†ï¼ˆæ¥è‡ªäº&lt;code&gt;PropertiesBeanDefinitionReader&lt;/code&gt;çš„æ³¨é‡Šï¼Œæˆ‘è‡ªå·±æ¢³ç†äº†ä¸€ä¸‹ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªreaderï¼Œå¯¹propertiesçš„æ ¼å¼æ˜¯æœ‰è¦æ±‚çš„ï¼Œå‚è€ƒä¸‹é¢è¿™ä»½ï¼š&lt;/p&gt;
&lt;pre class=&quot;properties&quot;&gt;
&lt;code&gt;//å®šä¹‰ä¸€ä¸ªæŠ½è±¡beanï¼Œåç§°ä¸ºemployeeï¼ˆå¥å·å‰é¢ä¸ºbeançš„åç§°ï¼‰ï¼Œè¡¨ç¤ºä¸ºå‘˜å·¥ï¼Œç±»å‹ä¸ºEmployeeï¼Œä¸¤ä¸ªå±æ€§ï¼šç»„åï¼šInsuranceï¼›useDialUpï¼ˆæˆ‘ç†è§£ä¸ºå·¥ä½æ˜¯å¦é…ç”µè¯ï¼‰ï¼štrue
employee.(class)=org.springframework.simple.Employee
employee.(abstract)=true
employee.group=Insurance
employee.usesDialUp=false

//å®šä¹‰ä¸€ä¸ªéæŠ½è±¡beanï¼Œparentä¸ºæŠ½è±¡çš„employeeï¼Œdepartmentå±æ€§ä¸ºCEOdepartmentï¼ŒusesDialUpä¸ºtrueï¼Œè¦†ç›–äº†parentçš„false
ceo.(parent)=employee
ceo.department=ceo department
ceo.usesDialUp=true

//å®šä¹‰å¦ä¸€ä¸ªéæŠ½è±¡beanï¼Œè¡¨ç¤ºé”€å”®äººå‘˜ï¼Œlazy-initï¼Œç»ç†å­—æ®µï¼šå¼•ç”¨äº†å¦ä¸€ä¸ªbeanï¼Œnameä¸ºceoï¼›éƒ¨é—¨ä¸ºSales
salesrep.(parent)=employee
salesrep.(lazy-init)=true
salesrep.manager(ref)=ceo
salesrep.department=Sales

//è¿™ä¸ªç±»ä¼¼
techie.(parent)=employee
techie.(scope)=prototype
techie.department=Engineering
techie.usesDialUp=true
techie.manager(ref)=ceo&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è´´å¿ƒçš„æˆ‘ç»™å¤§å®¶èŠ±äº†ä¸ªå›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/519126/201912/519126-20191224213331358-1264747351.png&quot;/&gt;&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¿˜æ˜¯å…ˆçœ‹çœ‹è¿™ä¸ªç±»ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/519126/201912/519126-20191224210313144-673386379.png&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;å®ç°æ¥å£&quot;&gt;å®ç°æ¥å£&lt;/h2&gt;
&lt;p&gt;çœ‹ä¸€ä¸ªç±»ï¼Œå…¶å®ä¸»è¦çœ‹æ¥å£ï¼Œæ‰èƒ½å¿«é€Ÿäº†è§£ä¸€ä¸ªç±»çš„ç”¨é€”ï¼Œè¿™é‡Œï¼Œå®ƒå®ç°äº†&lt;code&gt;org.springframework.beans.factory.support.BeanDefinitionReader&lt;/code&gt;æ¥å£ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªæ¥å£çš„æ–¹æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;public interface BeanDefinitionReader {

    //è·å–bean definition æ³¨å†Œä¸­å¿ƒï¼Œè€æœ‹å‹DefaultListableBeanFactoryå®ç°äº†è¯¥æ¥å£
    BeanDefinitionRegistry getRegistry();

    // è·å–èµ„æºåŠ è½½å™¨
    ResourceLoader getResourceLoader();
    
    //è·å–classloader
    ClassLoader getBeanClassLoader();

    //è·å–beanåç§°ç”Ÿæˆå™¨
    BeanNameGenerator getBeanNameGenerator();

    //ä»æŒ‡å®šèµ„æºå……ï¼ŒåŠ è½½bean definition
    int loadBeanDefinitions(Resource resource) throws BeanDefinitionStoreException;
    
    //é‡è½½
    int loadBeanDefinitions(Resource... resources) throws BeanDefinitionStoreException;
    
    //é‡è½½
    int loadBeanDefinitions(String location) throws BeanDefinitionStoreException;
    
    //é‡è½½
    int loadBeanDefinitions(String... locations) throws BeanDefinitionStoreException;
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¤§ä½“ï¼Œå¯ä»¥çœ‹å‡ºæ¥ï¼Œè¿™ä¸ª&lt;code&gt;bean definition reader&lt;/code&gt;æ¥å£ï¼Œå°±æ˜¯ä½¿ç”¨æŒ‡å®šçš„classloaderï¼Œä»æŒ‡å®šçš„resourceï¼Œå»åŠ è½½bean definitionã€‚&lt;/p&gt;
&lt;h2 id=&quot;åŠ è½½bean-definition&quot;&gt;åŠ è½½bean definition&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬å…ˆçœ‹çœ‹&lt;code&gt;PropertiesBeanDefinitionReader&lt;/code&gt;æ€ä¹ˆæ„é€ ï¼š&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;    //è°ƒç”¨çˆ¶ç±»ï¼Œå‚æ•°ä¼ å…¥äº†bean definition æ³¨å†Œè¡¨
    public PropertiesBeanDefinitionReader(BeanDefinitionRegistry registry) {
        super(registry);
    }

    //æ„é€ é»˜è®¤çš„èµ„æºåŠ è½½å™¨ã€environment
    protected AbstractBeanDefinitionReader(BeanDefinitionRegistry registry) {
        this.registry = registry;

        // Determine ResourceLoader to use.
        if (this.registry instanceof ResourceLoader) {
            this.resourceLoader = (ResourceLoader) this.registry;
        }
        else {
            this.resourceLoader = new PathMatchingResourcePatternResolver();
        }

        // Inherit Environment if possible
        if (this.registry instanceof EnvironmentCapable) {
            this.environment = ((EnvironmentCapable)this.registry).getEnvironment();
        }
        else {
            this.environment = new StandardEnvironment();
        }
    }&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å†çœ‹ä¸»è¦çš„&lt;code&gt;loadBeanDefinition&lt;/code&gt;æ–¹æ³•ï¼Œæ˜¯æ€ä¹ˆå®ç°çš„ï¼š&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;    public int loadBeanDefinitions(Resource resource) throws BeanDefinitionStoreException {
        return loadBeanDefinitions(new EncodedResource(resource), null);
    }&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è°ƒç”¨äº†å†…éƒ¨çš„ï¼š&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;//åŠ è½½bean definition
public int loadBeanDefinitions(EncodedResource encodedResource, String prefix)
            throws BeanDefinitionStoreException {
    //è¯»å–propertiesæ–‡ä»¶å†…å®¹åˆ°propså˜é‡
    Properties props = new Properties();
    InputStream is = encodedResource.getResource().getInputStream();
    if (encodedResource.getEncoding() != null) {
        InputStreamReader reader = new InputStreamReader(is, encodedResource.getEncoding());
        props.load(reader);
    }
    else {
        props.load(is);
    }
    //æ³¨å†Œbean definition
    return registerBeanDefinitions(props, prefix, null);
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç»§ç»­æ·±å…¥ä¸Šé¢çš„å€’æ•°ç¬¬äºŒè¡Œçš„å‡½æ•°ï¼š&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;public int registerBeanDefinitions(Map map, String prefix, String resourceDescription)
            throws BeansException {

        if (prefix == null) {
            prefix = &quot;&quot;;
        }
        int beanCount = 0;

        for (Object key : map.keySet()) {
            String keyString = (String) key;
            if (keyString.startsWith(prefix)) {
                // Key is of form: prefix&amp;lt;name&amp;gt;.property
                String nameAndProperty = keyString.substring(prefix.length());
                // Find dot before property name, ignoring dots in property keys.
                int sepIdx = nameAndProperty.lastIndexOf(SEPARATOR);
                
                if (sepIdx != -1) {
                    String beanName = nameAndProperty.substring(0, sepIdx);
                    if (!getRegistry().containsBeanDefinition(beanName)) {
                        // å¦‚æœä¹‹å‰æ²¡æ³¨å†Œè¿™ä¸ªbeanï¼Œåˆ™æ³¨å†Œä¹‹ï¼Œè¿™é‡Œçš„prefixï¼šprefix+beanNameï¼Œå…¶å®å°±æ˜¯ä»propertiesæ–‡ä»¶ä¸­ç­›é€‰å‡ºbeanNameä¸€è‡´çš„key-value
                        registerBeanDefinition(beanName, map, prefix + beanName, resourceDescription);
                        ++beanCount;
                    }
                }
            }
        }

        return beanCount;
    }&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸»è¦å°±æ˜¯éå†mapï¼Œå°†propertyçš„keyç”¨.åˆ†å‰²ï¼Œå‰é¢çš„å°±æ˜¯beanNameï¼Œç”¨beanNameä½œä¸ºå‰ç¼€ï¼Œç„¶åè°ƒç”¨ä¸‹ä¸€å±‚å‡½æ•°ï¼š&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;public static final String CLASS_KEY = &quot;(class)&quot;;
public static final String PARENT_KEY = &quot;(parent)&quot;;
public static final String SCOPE_KEY = &quot;(scope)&quot;;
public static final String SINGLETON_KEY = &quot;(singleton)&quot;;
public static final String ABSTRACT_KEY = &quot;(abstract)&quot;;
public static final String LAZY_INIT_KEY = &quot;(lazy-init)&quot;;
public static final String REF_SUFFIX = &quot;(ref)&quot;;

protected void registerBeanDefinition(String beanName, Map&amp;lt;?, ?&amp;gt; map, String prefix, String resourceDescription)
            throws BeansException {

        String className = null;
        String parent = null;
        String scope = GenericBeanDefinition.SCOPE_SINGLETON;
        boolean isAbstract = false;
        boolean lazyInit = false;

        ConstructorArgumentValues cas = new ConstructorArgumentValues();
        MutablePropertyValues pvs = new MutablePropertyValues();

        for (Map.Entry entry : map.entrySet()) {
            String key = StringUtils.trimWhitespace((String) entry.getKey());
            if (key.startsWith(prefix + SEPARATOR)) {
                String property = key.substring(prefix.length() + SEPARATOR.length());
                  //æ ¸å¿ƒå±æ€§ï¼Œbeançš„ClassName
                if (CLASS_KEY.equals(property)) {
                    className = StringUtils.trimWhitespace((String) entry.getValue());
                }//parentå±æ€§
                else if (PARENT_KEY.equals(property)) {
                    parent = StringUtils.trimWhitespace((String) entry.getValue());
                }//æ˜¯å¦æŠ½è±¡bean definition
                else if (ABSTRACT_KEY.equals(property)) {
                    String val = StringUtils.trimWhitespace((String) entry.getValue());
                    isAbstract = TRUE_VALUE.equals(val);
                }//scope
                  ...æ­¤å¤„ä¸é‡è¦çš„å±æ€§ä»£ç è¿›è¡Œçœç•¥
                //é€šè¿‡æ„é€ å™¨æ³¨å…¥å…¶ä»–beanï¼Œæˆ‘ä»¬ä¾‹å­é‡Œæ²¡æ¶‰åŠ
                else if (property.startsWith(CONSTRUCTOR_ARG_PREFIX)) {
                    if (property.endsWith(REF_SUFFIX)) {
                        int index = Integer.parseInt(property.substring(1, property.length() - REF_SUFFIX.length()));
                        cas.addIndexedArgumentValue(index, new RuntimeBeanReference(entry.getValue().toString()));
                    }
                    else {
                        int index = Integer.parseInt(property.substring(1));
                        cas.addIndexedArgumentValue(index, readValue(entry));
                    }
                }
                // è¿™é‡Œå¼•ç”¨å…¶ä»–beanï¼Œè¯­æ³•æ˜¯æˆ‘ä»¬ä¾‹å­ç”¨åˆ°çš„ï¼Œ(ref)
                else if (property.endsWith(REF_SUFFIX)) {
                    property = property.substring(0, property.length() - REF_SUFFIX.length());
                    String ref = StringUtils.trimWhitespace((String) entry.getValue());
                    Object val = new RuntimeBeanReference(ref);
                    pvs.add(property, val);
                }
                else {
                    // It's a normal bean property.
                    pvs.add(property, readValue(entry));
                }
            }
        }
        //æ„é€ ä¸€ä¸ªbean definition
        AbstractBeanDefinition bd = BeanDefinitionReaderUtils.createBeanDefinition(
            parent, className, getBeanClassLoader());
        bd.setScope(scope);
        bd.setAbstract(isAbstract);
        bd.setLazyInit(lazyInit);
        //ä¸‹é¢è¿™ä¸¤è¡Œï¼Œè¿›è¡Œæ„é€ å™¨æ³¨å…¥å’Œå±æ€§æ³¨å…¥
        bd.setConstructorArgumentValues(cas);
        bd.setPropertyValues(pvs);
        //æ³¨å†Œ
        getRegistry().registerBeanDefinition(beanName, bd);
    }&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æœ¬ç±»çš„ä¸»è¦ä»£ç å°±è¿™äº›ï¼Œåˆ å‡äº†éƒ¨åˆ†ï¼Œä¸»è¦æ˜¯é¿å…å¤ªå†—ä½™ï¼Œä»£ç æœ‰åˆ å‡å°±ä¼šä½¿ç”¨...è¡¨ç¤ºã€‚&lt;/p&gt;

&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;package org.springframework.beans.extend.properties.applicationcontext;

import org.springframework.beans.BeansException;
import org.springframework.beans.factory.support.DefaultListableBeanFactory;
import org.springframework.beans.factory.support.PropertiesBeanDefinitionReader;
import org.springframework.beans.factory.xml.XmlBeanDefinitionReader;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.AbstractRefreshableConfigApplicationContext;
import java.io.IOException;


public class ClassPathPropertyFileApplicationContext extends AbstractRefreshableConfigApplicationContext {



    /**
     * Loads the bean definitions via an XmlBeanDefinitionReader.
     * @see XmlBeanDefinitionReader
     * @see #loadBeanDefinitions
     */
    @Override
    protected void loadBeanDefinitions(DefaultListableBeanFactory beanFactory) throws BeansException, IOException {
        // æ„é€ ä¸€ä¸ªpropertiesBeanDefinitionReaderï¼Œå°±æ˜¯å‰é¢æˆ‘ä»¬çš„ä¸»è§’
        PropertiesBeanDefinitionReader beanDefinitionReader = new PropertiesBeanDefinitionReader(beanFactory);

        beanDefinitionReader.setEnvironment(this.getEnvironment());
        beanDefinitionReader.setResourceLoader(this);

        // Allow a subclass to provide custom initialization of the reader,
        // then proceed with actually loading the bean definitions.
        loadBeanDefinitions(beanDefinitionReader);
    }

    //ä½¿ç”¨readerï¼ŒåŠ è½½bean definition
    protected void loadBeanDefinitions(PropertiesBeanDefinitionReader reader) throws BeansException, IOException {
        String[] configResources = getConfigLocations();
        if (configResources != null) {
            //çœ‹è¿™ï¼Œå…„å¼Ÿ
            reader.loadBeanDefinitions(configResources);
        }
    }

    public ClassPathPropertyFileApplicationContext(String[] configLocations, boolean refresh, ApplicationContext parent)
            throws BeansException {

        super(parent);
        setConfigLocations(configLocations);
        if (refresh) {
            refresh();
        }
    }


}
&lt;/code&gt;
&lt;/pre&gt;

&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;@Slf4j
public class BootStrap {
    public static void main(String[] args) {
        ClassPathPropertyFileApplicationContext context = new ClassPathPropertyFileApplicationContext(&quot;beanDefinition.properties&quot;);
        Map&amp;lt;String, Employee&amp;gt; beansOfType = context.getBeansOfType(Employee.class);
        for (Map.Entry&amp;lt;String, Employee&amp;gt; entry : beansOfType.entrySet()) {
            log.info(&quot;bean name:{},bean:{}&quot;,entry.getKey(),entry.getValue());
        }

    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;outputï¼š&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;22:17:26.083 [main] INFO  o.s.b.extend.properties.BootStrap - bean name:techie,bean:Employee(group=Insurance, usesDialUp=true, department=Engineering, manager=Employee(group=Insurance, usesDialUp=true, department=ceo department, manager=null))
    
22:17:26.083 [main] INFO  o.s.b.extend.properties.BootStrap - bean name:salesrep,bean:Employee(group=Insurance, usesDialUp=false, department=Sales, manager=Employee(group=Insurance, usesDialUp=true, department=ceo department, manager=null))
    
22:17:26.083 [main] INFO  o.s.b.extend.properties.BootStrap - bean name:ceo,bean:Employee(group=Insurance, usesDialUp=true, department=ceo department, manager=null)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œå¯ä»¥çœ‹å‡ºæ¥ï¼Œå­beanæ˜¯ç»§æ‰¿äº†çˆ¶beançš„bean definitionï¼Œå¹¶overrideäº†çˆ¶beanä¸­å·²ç»å­˜åœ¨çš„å±æ€§ã€‚&lt;/p&gt;

&lt;p&gt;å·¥ç¨‹æºç ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://gitee.com/ckl111/spring-boot-first-version-learn/tree/master/all-demo-in-spring-learning/spring-beans-load-bean-definition-from-properties&quot; class=&quot;uri&quot;&gt;https://gitee.com/ckl111/spring-boot-first-version-learn/tree/master/all-demo-in-spring-learning/spring-beans-load-bean-definition-from-properties&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸€è®²ï¼Œä¸»è¦æ˜¯è®²è§£äº†å¦ä¸€ç§è¯»å–&lt;code&gt;bean definition&lt;/code&gt;çš„æ–¹å¼ï¼Œå…¶å®å°±æ˜¯å‘Šè¯‰æˆ‘ä»¬è¦æ‰“ç ´æ€æƒ³æŸç¼šï¼Œbeançš„æ¥æºå¯ä»¥ç”¨å¾ˆå¤šï¼Œä¸ä¸€å®šåªæœ‰xmlå’Œæ³¨è§£ã€‚å¦å¤–ï¼Œä¹Ÿæ˜¯åŸ¹å…»æˆ‘ä»¬çš„æŠ½è±¡æ€ç»´ï¼Œè‡³å°‘bean definition readerè¿™ä¸ªæ¥å£ï¼Œç»™æˆ‘ä»¬çš„æ„Ÿè§‰å°±æ˜¯å¦‚æ­¤ï¼Œæˆ‘ä¸ç®¡ä½ &lt;code&gt;resource&lt;/code&gt;æ¥è‡ªå“ªé‡Œï¼Œåªè¦èƒ½è¯»å–&lt;code&gt;bean definition&lt;/code&gt;å³å¯ï¼Œæ­£æ‰€è°“ï¼šè‹±é›„ä¸é—®å‡ºå¤„ï¼&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä½œä¸ºæŠ€æœ¯ä»ä¸šäººå‘˜ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œåªè¦æŠ€æœ¯å¤Ÿokï¼Œåˆ°å“ªéƒ½èƒ½æ··å¾—èµ°ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹ä¸€è®²ï¼Œæˆ‘ä»¬å°†ç»§ç»­è®²è§£&lt;code&gt;bean definition&lt;/code&gt;ï¼Œä¸»è¦æ˜¯&lt;code&gt;bean definition&lt;/code&gt;çš„ç»§æ‰¿å’Œ&lt;code&gt;override&lt;/code&gt;ç›¸å…³å†…å®¹ã€‚&lt;/p&gt;
&lt;p&gt;è§‰å¾—æœ‰å¸®åŠ©çš„è¯ï¼Œå¤§å®¶ç‚¹ä¸ªèµå“ˆ&lt;/p&gt;
</description>
<pubDate>Tue, 24 Dec 2019 14:28:00 +0000</pubDate>
<dc:creator>ä¸‰å›½æ¢¦å›</dc:creator>
<og:description>å†™åœ¨å‰é¢çš„è¯ ç›¸å…³èƒŒæ™¯åŠèµ„æºï¼š &amp;quot;æ›¹å·¥è¯´Spring Bootæºç ï¼ˆ1ï¼‰ Bean Definitionåˆ°åº•æ˜¯ä»€ä¹ˆï¼Œé™„springæ€ç»´å¯¼å›¾åˆ†äº«&amp;quot; &amp;quot;æ›¹å·¥è¯´Spring B</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/grey-wolf/p/12093929.html</dc:identifier>
</item>
<item>
<title>ElasticSearchå®æˆ˜ç³»åˆ—å››: ElasticSearchç†è®ºçŸ¥è¯†ä»‹ç» - è™šæ— å¢ƒ</title>
<link>http://www.cnblogs.com/xuwujing/p/12093933.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/xuwujing/p/12093933.html</guid>
<description>&lt;h2 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;åœ¨å‰å‡ ç¯‡å…³äº&lt;a href=&quot;https://www.cnblogs.com/xuwujing/category/1530849.html&quot;&gt;ElasticSearch&lt;/a&gt;çš„æ–‡ç« ä¸­ï¼Œç®€å•çš„è®²äº†ä¸‹æœ‰å…³ElasticSearchçš„ä¸€äº›ä½¿ç”¨ï¼Œè¿™ç¯‡æ–‡ç« è®²ä¸€ä¸‹æœ‰å…³ ElasticSearchçš„ä¸€äº›ç†è®ºçŸ¥è¯†ä»¥åŠè‡ªå·±çš„ä¸€äº›è§è§£ã€‚&lt;br/&gt;è™½ç„¶æœ¬äººæ˜¯ä¸€ä¸ªå®æˆ˜æ´¾ï¼Œä¸å¤ªå–œæ¬¢è®²è¿™äº›ç†è®ºçŸ¥è¯†ï¼Œå› ä¸ºè¿™å—å¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œé‚£é‡Œä¼šå†™å¾—éå¸¸è¯¦ç»†ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨äº†ElasticSearchä¹‹åï¼Œå‘ç°æœ‰çš„çŸ¥è¯†ç‚¹éœ€è¦æŒæ¡ä¸€å®šçš„ç†è®ºçŸ¥è¯†æ‰èƒ½ç†è§£ï¼Œå¯¹äºåˆå­¦è€…æ¥è¯´æœ‰çš„ä¸å¥½ç†è§£ï¼Œå› æ­¤å†™ä¸‹è¯¥ç¯‡æ–‡ç« ï¼Œå¸Œæœ›è¯»è€…åœ¨çœ‹å®Œä¹‹åèƒ½å¤Ÿæœ‰æ‰€å¸®åŠ©ã€‚&lt;/p&gt;
&lt;h2 id=&quot;elasticsearch-ç†è®ºçŸ¥è¯†ä»‹ç»&quot;&gt;ElasticSearch ç†è®ºçŸ¥è¯†ä»‹ç»&lt;/h2&gt;
&lt;h3 id=&quot;elasticsearchæ˜¯ä»€ä¹ˆ&quot;&gt;&lt;strong&gt;ElasticSearchæ˜¯ä»€ä¹ˆ&lt;/strong&gt;&lt;/h3&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;Elasticsearch æ˜¯ä¸€ä¸ªåŸºäºJSONçš„åˆ†å¸ƒå¼æœç´¢å’Œåˆ†æå¼•æ“ã€‚å®ƒå¯ä»¥ä»RESTful WebæœåŠ¡æ¥å£è®¿é—®ï¼Œå¹¶ä½¿ç”¨æ¨¡å¼å°‘JSON(JavaScriptå¯¹è±¡ç¬¦å·)æ–‡æ¡£æ¥å­˜å‚¨æ•°æ®ã€‚å®ƒæ˜¯åŸºäºJavaç¼–ç¨‹è¯­è¨€ï¼Œè¿™ä½¿Elasticsearchèƒ½å¤Ÿåœ¨ä¸åŒçš„å¹³å°ä¸Šè¿è¡Œã€‚ä½¿ç”¨æˆ·èƒ½å¤Ÿä»¥éå¸¸å¿«çš„é€Ÿåº¦æ¥æœç´¢éå¸¸å¤§çš„æ•°æ®é‡ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;elasticsearchå¯ä»¥åšä»€ä¹ˆ&quot;&gt;&lt;strong&gt;ElasticSearchå¯ä»¥åšä»€ä¹ˆ&lt;/strong&gt;&lt;/h3&gt;
&lt;blockquote&gt;
&lt;ul&gt;&lt;li&gt;åˆ†å¸ƒå¼çš„å®æ—¶æ–‡ä»¶å­˜å‚¨ï¼Œæ¯ä¸ªå­—æ®µéƒ½è¢«ç´¢å¼•å¹¶å¯è¢«æœç´¢&lt;/li&gt;
&lt;li&gt;åˆ†å¸ƒå¼çš„å®æ—¶åˆ†ææœç´¢å¼•æ“&lt;/li&gt;
&lt;li&gt;å¯ä»¥æ‰©å±•åˆ°ä¸Šç™¾å°æœåŠ¡å™¨ï¼Œå¤„ç†PBçº§ç»“æ„åŒ–æˆ–éç»“æ„åŒ–æ•°æ®&lt;/li&gt;
&lt;/ul&gt;&lt;/blockquote&gt;
&lt;h3 id=&quot;luceneæ˜¯ä»€ä¹ˆ&quot;&gt;&lt;strong&gt;Luceneæ˜¯ä»€ä¹ˆ&lt;/strong&gt;&lt;/h3&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;ApacheLuceneå°†å†™å…¥ç´¢å¼•çš„æ‰€æœ‰ä¿¡æ¯ç»„ç»‡æˆä¸€ç§å€’æ’ç´¢å¼•ï¼ˆInverted Indexï¼‰çš„ç»“æ„ä¹‹ä¸­ï¼Œè¯¥ç»“æ„æ˜¯ç§å°†è¯é¡¹æ˜ å°„åˆ°æ–‡æ¡£çš„æ•°æ®ç»“æ„ã€‚å…¶å·¥ä½œæ–¹å¼ä¸ä¼ ç»Ÿçš„å…³ç³»æ•°æ®åº“ä¸åŒï¼Œå¤§è‡´æ¥è¯´å€’æ’ç´¢å¼•æ˜¯é¢å‘è¯é¡¹è€Œä¸æ˜¯é¢å‘æ–‡æ¡£çš„ã€‚ä¸”Luceneç´¢å¼•ä¹‹ä¸­è¿˜å­˜å‚¨äº†å¾ˆå¤šå…¶ä»–çš„ä¿¡æ¯ï¼Œå¦‚è¯å‘é‡ç­‰ç­‰ï¼Œæ¯ä¸ªLuceneéƒ½æ˜¯ç”±å¤šä¸ªæ®µæ„æˆçš„ï¼Œæ¯ä¸ªæ®µåªä¼šè¢«åˆ›å»ºä¸€æ¬¡ä½†ä¼šè¢«æŸ¥è¯¢å¤šæ¬¡ï¼Œæ®µä¸€æ—¦åˆ›å»ºå°±ä¸ä¼šå†è¢«ä¿®æ”¹ã€‚å¤šä¸ªæ®µä¼šåœ¨æ®µåˆå¹¶çš„é˜¶æ®µåˆå¹¶åœ¨ä¸€èµ·ï¼Œä½•æ—¶åˆå¹¶ç”±Luceneçš„å†…åœ¨æœºåˆ¶å†³å®šï¼Œæ®µåˆå¹¶åæ•°é‡ä¼šå˜å°‘ï¼Œä½†æ˜¯ç›¸åº”çš„æ®µæœ¬èº«ä¼šå˜å¤§ã€‚æ®µåˆå¹¶çš„è¿‡ç¨‹æ˜¯éå¸¸æ¶ˆè€—I/Oçš„ï¼Œä¸”ä¸ä¹‹åŒæ—¶ä¼šæœ‰äº›ä¸å†ä½¿ç”¨çš„ä¿¡æ¯è¢«æ¸…ç†æ‰ã€‚åœ¨Luceneä¸­ï¼Œå°†æ•°æ®è½¬åŒ–ä¸ºå€’æ’ç´¢å¼•ï¼Œå°†å®Œæ•´ä¸²è½¬åŒ–ä¸ºå¯ç”¨äºæœç´¢çš„è¯é¡¹çš„è¿‡ç¨‹å«åšåˆ†æã€‚æ–‡æœ¬åˆ†æç”±åˆ†æå™¨ï¼ˆAnalyzerï¼‰æ¥æ‰§è¡Œï¼Œåˆ†æå…¶ç”±åˆ†è¯å™¨ï¼ˆTokenizerï¼‰ï¼Œè¿‡æ»¤å™¨ï¼ˆFilterï¼‰å’Œå­—ç¬¦æ˜ å°„å™¨ï¼ˆCharacter Mapperï¼‰ç»„æˆï¼Œå…¶å„ä¸ªåŠŸèƒ½æ˜¾è€Œæ˜“è§ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;elkæ¶æ„&quot;&gt;&lt;strong&gt;Elkæ¶æ„&lt;/strong&gt;&lt;/h3&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;â€œELKâ€æ˜¯ä¸‰ä¸ªå¼€æºé¡¹ç›®çš„é¦–å­—æ¯ç¼©å†™ï¼Œè¿™ä¸‰ä¸ªé¡¹ç›®åˆ†åˆ«æ˜¯ï¼šElasticsearchã€Logstash å’Œ Kibanaã€‚Elasticsearch æ˜¯ä¸€ä¸ªæœç´¢å’Œåˆ†æå¼•æ“ã€‚Logstash æ˜¯æœåŠ¡å™¨ç«¯æ•°æ®å¤„ç†ç®¡é“ï¼Œèƒ½å¤ŸåŒæ—¶ä»å¤šä¸ªæ¥æºé‡‡é›†æ•°æ®ï¼Œè½¬æ¢æ•°æ®ï¼Œç„¶åå°†æ•°æ®å‘é€åˆ°è¯¸å¦‚ Elasticsearch ç­‰â€œå­˜å‚¨åº“â€ä¸­ã€‚Kibana åˆ™å¯ä»¥è®©ç”¨æˆ·åœ¨ Elasticsearch ä¸­ä½¿ç”¨å›¾å½¢å’Œå›¾è¡¨å¯¹æ•°æ®è¿›è¡Œå¯è§†åŒ–ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;elasticsearchåè¯&quot;&gt;&lt;strong&gt;ElasticSearchåè¯&lt;/strong&gt;&lt;/h3&gt;
&lt;h4 id=&quot;é›†ç¾¤cluster&quot;&gt;é›†ç¾¤(cluster)&lt;/h4&gt;
&lt;p&gt;ä¸€ä¸ªé›†ç¾¤ç”±ä¸€ä¸ªæˆ–å¤šä¸ªå…±äº«ç›¸åŒçš„ç¾¤é›†åç§°çš„èŠ‚ç‚¹ç»„æˆã€‚æ¯ä¸ªç¾¤é›†æœ‰ä¸€ä¸ªå•ç‹¬çš„ä¸»èŠ‚ç‚¹ï¼Œè¿™æ˜¯ç”±ç¨‹åºè‡ªåŠ¨é€‰æ‹©ï¼Œå¦‚æœå½“å‰ä¸»èŠ‚ç‚¹å¤±è´¥ï¼Œç¨‹åºä¼šè‡ªåŠ¨é€‰æ‹©å…¶ä»–èŠ‚ç‚¹ä½œä¸ºä¸»èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;h4 id=&quot;èŠ‚ç‚¹node&quot;&gt;èŠ‚ç‚¹(node)&lt;/h4&gt;
&lt;p&gt;ä¸€ä¸ªèŠ‚ç‚¹å±äºä¸€ä¸ªé›†ç¾¤ã€‚é€šå¸¸æƒ…å†µä¸‹ä¸€ä¸ªæœåŠ¡å™¨æœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä½†æœ‰æ—¶å€™ä¸ºäº†æµ‹è¯•æ–¹ä¾¿ï¼Œä¸€å°æœåŠ¡å™¨ä¹Ÿå¯ä»¥æœ‰å¤šä¸ªèŠ‚ç‚¹ã€‚åœ¨å¯åŠ¨æ—¶ï¼Œä¸€ä¸ªèŠ‚ç‚¹å°†ä½¿ç”¨å¹¿æ’­æ¥å‘ç°å…·æœ‰ç›¸åŒç¾¤é›†åç§°çš„ç°æœ‰ç¾¤é›†ï¼Œå¹¶å°†å°è¯•åŠ å…¥è¯¥ç¾¤é›†ã€‚&lt;strong&gt;èŠ‚ç‚¹å±æ€§æ ¹æ®elasticsearch.ymlçš„ä¸€äº›é…ç½®æ¥å†³å®šï¼å…¶ä¸­masterå’Œdatanodeæ˜¯å¿…ä¸å¯å°‘çš„ï¼Œå…¶ä»–çš„å¯ä»¥æŒ‰ç…§æƒ…å†µæ¥è¿›è¡Œæ·»åŠ ï¼ä¸ºäº†é˜²æ­¢è„‘è£‚ä»¥åŠåç»­ç»´æŠ¤ï¼Œå»ºè®®å°†èŠ‚ç‚¹å±æ€§åˆ†ç¦»ï¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;elasticsearch.ymlé…ç½®:&lt;/strong&gt;&lt;/p&gt;
&lt;ol readability=&quot;8&quot;&gt;&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;node.master: true å¹¶ä¸” node.data: true&lt;br/&gt;è¿™ç§ç»„åˆè¡¨ç¤ºè¿™ä¸ªèŠ‚ç‚¹å³æœ‰æˆä¸ºä¸»èŠ‚ç‚¹çš„èµ„æ ¼ï¼Œåˆå­˜å‚¨æ•°æ®ã€‚&lt;br/&gt;å¦‚æœæŸä¸ªèŠ‚ç‚¹è¢«é€‰ä¸¾æˆä¸ºäº†çœŸæ­£çš„ä¸»èŠ‚ç‚¹ï¼Œé‚£ä¹ˆä»–è¿˜è¦å­˜å‚¨æ•°æ®ï¼Œè¿™æ ·å¯¹äºè¿™ä¸ªèŠ‚ç‚¹çš„å‹åŠ›å°±æ¯”è¾ƒå¤§äº†ã€‚ElasticSearché»˜è®¤æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯è¿™æ ·çš„é…ç½®ï¼Œåœ¨æµ‹è¯•ç¯å¢ƒä¸‹è¿™æ ·åšæ²¡é—®é¢˜ã€‚å®é™…å·¥ä½œä¸­å»ºè®®ä¸è¦è¿™æ ·è®¾ç½®ï¼Œå› ä¸ºè¿™æ ·ç›¸å½“äºä¸»èŠ‚ç‚¹å’Œæ•°æ®èŠ‚ç‚¹çš„è§’è‰²æ··åˆåˆ°ä¸€å—äº†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;node.master: false å¹¶ä¸” node.data: true&lt;br/&gt;è¿™ç§ç»„åˆè¡¨ç¤ºè¿™ä¸ªèŠ‚ç‚¹æ²¡æœ‰æˆä¸ºä¸»èŠ‚ç‚¹çš„èµ„æ ¼ï¼Œä¹Ÿå°±ä¸å‚ä¸é€‰ä¸¾ï¼Œåªä¼šå­˜å‚¨æ•°æ®ã€‚ è¿™ä¸ªèŠ‚ç‚¹æˆ‘ä»¬ç§°ä¸ºdata(æ•°æ®)èŠ‚ç‚¹ã€‚åœ¨é›†ç¾¤ä¸­éœ€è¦å•ç‹¬è®¾ç½®å‡ ä¸ªè¿™æ ·çš„èŠ‚ç‚¹è´Ÿè´£å­˜å‚¨æ•°æ®ï¼ŒåæœŸæä¾›å­˜å‚¨å’ŒæŸ¥è¯¢æœåŠ¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;node.master: true å¹¶ä¸” node.data: false&lt;br/&gt;è¿™ç§ç»„åˆè¡¨ç¤ºè¿™ä¸ªèŠ‚ç‚¹ä¸ä¼šå­˜å‚¨æ•°æ®ï¼Œæœ‰æˆä¸ºä¸»èŠ‚ç‚¹çš„èµ„æ ¼ï¼Œå¯ä»¥å‚ä¸é€‰ä¸¾ï¼Œæœ‰å¯èƒ½æˆä¸ºçœŸæ­£çš„ä¸»èŠ‚ç‚¹ï¼Œè¿™ä¸ªèŠ‚ç‚¹æˆ‘ä»¬ç§°ä¸ºmasterèŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;node.master: false node.data: false&lt;br/&gt;è¿™ç§ç»„åˆè¡¨ç¤ºè¿™ä¸ªèŠ‚ç‚¹å³ä¸ä¼šæˆä¸ºä¸»èŠ‚ç‚¹ï¼Œä¹Ÿä¸ä¼šå­˜å‚¨æ•°æ®ï¼Œè¿™ä¸ªèŠ‚ç‚¹çš„æ„ä¹‰æ˜¯ä½œä¸ºä¸€ä¸ªclient(å®¢æˆ·ç«¯)èŠ‚ç‚¹ï¼Œä¸»è¦æ˜¯é’ˆå¯¹æµ·é‡è¯·æ±‚çš„æ—¶å€™å¯ä»¥è¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;node.ingest: true&lt;br/&gt;æ‰§è¡Œé¢„å¤„ç†ç®¡é“ï¼Œä¸è´Ÿè´£æ•°æ®å’Œé›†ç¾¤ç›¸å…³çš„äº‹ç‰©ã€‚&lt;br/&gt;å®ƒåœ¨ç´¢å¼•ä¹‹å‰é¢„å¤„ç†æ–‡æ¡£ï¼Œæ‹¦æˆªæ–‡æ¡£çš„bulkå’Œindexè¯·æ±‚ï¼Œç„¶ååŠ ä»¥è½¬æ¢ã€‚&lt;br/&gt;å°†æ–‡æ¡£ä¼ å›ç»™bulkå’Œindex APIï¼Œç”¨æˆ·å¯ä»¥å®šä¹‰ä¸€ä¸ªç®¡é“ï¼ŒæŒ‡å®šä¸€ç³»åˆ—çš„é¢„å¤„ç†å™¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;ç¤ºä¾‹å›¾:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20191224190134936.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly94dXd1amluZy5ibG9nLmNzZG4ubmV0,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šè¿°çš„èŠ‚ç‚¹å±æ€§å¯ä»¥æ ¹æ®å®é™…çš„æƒ…å†µæ¥è¿›è¡Œé…ç½®ã€‚å¦‚æœåªæœ‰ä¸‰å°é…ç½®ä¸€èˆ¬çš„æœåŠ¡å™¨ï¼Œåœ¨æµ‹è¯•ç¯å¢ƒå¯ä»¥å°†masterèŠ‚ç‚¹å’ŒdatanodeèŠ‚ç‚¹å…±ç”¨ï¼Œä¹Ÿå°±æ˜¯ &lt;code&gt;node.master: true&lt;/code&gt; å¹¶ä¸” &lt;code&gt;node.data: true&lt;/code&gt; ï¼›åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæœ€å¥½å°†èŠ‚ç‚¹åˆ†ç¦»ï¼Œç‰¹åˆ«æ˜¯masternodeå’Œdatanodeï¼Œå“ªæ€•æ˜¯ç”¨é…ç½®éå¸¸å·®çš„æœåŠ¡å™¨å®‰è£…masternodeã€‚è‡³äºclientnodeåˆ™éœ€è¦çœ‹æƒ…å†µï¼Œå¦‚æœæœ‰å¤§é‡çš„æŸ¥è¯¢ï¼Œå¹¶ä¸”æœ‰å¾ˆå¤šçš„èšåˆåˆ†ææŸ¥è¯¢çš„è¯ï¼Œå¯ä»¥éƒ¨ç½²ï¼›ingestnodeè¿™ä¸ªä¹Ÿæ˜¯çœ‹å…·ä½“çš„æƒ…å†µï¼Œå¦‚æœæœ‰ä½¿ç”¨ingestç­‰apiçš„æƒ…å†µï¼Œä¹Ÿå¯ä»¥è¿›è¡Œéƒ¨ç½²ã€‚è‡³äº&lt;strong&gt;é›†ç¾¤è§„åˆ’&lt;/strong&gt;è¿™ä¸ªæˆ‘ä»¬åœ¨åç»­çš„æ–‡ç« ä¸­å†æ¥è®²è§£ã€‚&lt;/p&gt;
&lt;h4 id=&quot;ç´¢å¼•index&quot;&gt;ç´¢å¼•ï¼ˆindexï¼‰&lt;/h4&gt;
&lt;p&gt;ç´¢å¼•æ˜¯Elasticsearchå¯¹é€»è¾‘æ•°æ®çš„é€»è¾‘å­˜å‚¨ï¼Œæ‰€ä»¥å®ƒå¯ä»¥åˆ†ä¸ºæ›´å°çš„éƒ¨åˆ†ã€‚ä½ å¯ä»¥æŠŠç´¢å¼•çœ‹æˆå…³ç³»å‹æ•°æ®åº“çš„è¡¨ã€‚ç„¶è€Œï¼Œç´¢å¼•çš„ç»“æ„æ˜¯ä¸ºå¿«é€Ÿæœ‰æ•ˆçš„å…¨æ–‡ç´¢å¼•å‡†å¤‡çš„ï¼Œç‰¹åˆ«æ˜¯å®ƒä¸å­˜å‚¨åŸå§‹å€¼ã€‚å¦‚æœä½ çŸ¥é“MongoDBï¼Œå¯ä»¥Elasticsearchçš„ç´¢å¼•çœ‹æˆMongoDBé‡Œçš„ä¸€ä¸ªé›†åˆã€‚å¦‚æœä½ ç†Ÿæ‚‰CouchDBï¼Œå¯ä»¥æŠŠç´¢å¼•çœ‹æˆCouchDBæ•°æ®åº“ç´¢å¼•ã€‚Elasticsearchå¯ä»¥æŠŠç´¢å¼•å­˜æ”¾åœ¨ä¸€å°æœºå™¨æˆ–è€…åˆ†æ•£åœ¨å¤šå°æœåŠ¡å™¨ä¸Šï¼Œæ¯ä¸ªç´¢å¼•æœ‰ä¸€æˆ–å¤šä¸ªåˆ†ç‰‡ï¼ˆshardï¼‰ï¼Œæ¯ä¸ªåˆ†ç‰‡å¯ä»¥æœ‰å¤šä¸ªå‰¯æœ¬ï¼ˆreplicaï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æ ¹æ®å°†ElasticSearchå’Œä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“ä½œæ¯”è¾ƒçš„è¯å¦‚ä¸‹ç±»æ¯”è¡¨:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Relational DB -&amp;gt; Databases -&amp;gt; Tables -&amp;gt; Rows -&amp;gt; Columns
Elasticsearch -&amp;gt; Indices -&amp;gt; Types -&amp;gt; Documents -&amp;gt; Fields&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½†æ˜¯æ ¹æ®æœ€æ–°çš„ElasticSearch7.xä¸­å·²ç»å°†Typesç§»é™¤äº†ï¼Œå¹¶ä¸”åœ¨æ—¥å¸¸çš„ä½¿ç”¨ä¸­ï¼Œæˆ‘å»ºè®®æœ€å¥½æŠŠä¸€ä¸ªç´¢å¼•(index)å½“åšæ•°æ®åº“çš„ä¸€å¼ è¡¨æ¥ä½¿ç”¨ï¼Œç±»å‹(type)é™¤äº†å¿…è¦çš„æƒ…å†µï¼Œæœ€å¥½æ— è§†å®ƒï¼Œå°†å®ƒå’Œç´¢å¼•åº“åè®¾ç½®ä¸€æ ·å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œé¡ºä¾¿å†æ¥è¯´ä¸‹åˆ›å»ºç´¢å¼•åº“çš„ç»“æ„ã€‚æˆ‘ä»¬çŸ¥é“åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­éœ€è¦åˆ›å»ºè¡¨æ‰èƒ½æ·»åŠ æ•°æ®ï¼Œä½†æ˜¯åœ¨ElasticSearchä¸­å¯ä»¥ç›´æ¥æ’å…¥æ•°æ®ï¼Œå®ƒä¼šæ ¹æ®ä½ çš„ç¬¬ä¸€æ¡æ•°æ®æ¥è‡ªåŠ¨åˆ›å»ºç´¢å¼•åº“çš„ç»“æ„ï¼Œ ä½†æ˜¯è¿™ç§åœ¨å¾ˆå¤šæƒ…å†µä¸‹æ˜¯ä¸ç¬¦åˆæˆ‘ä»¬è¦æ±‚çš„ã€‚å¦‚æœæˆ‘ä»¬æƒ³è‡ªå·±è¿›è¡Œåˆ›å»ºçš„è¯ï¼Œé‚£ä¹ˆå°±æœ‰å¿…è¦äº†è§£ä¸€ä¸‹indexçš„settingå’Œmappingäº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;setting&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;settingå¯ä»¥ç†è§£ä¸ºç®¡ç†è¿™ä¸ªindexçš„ä¸€äº›é‡è¦å±æ€§çš„ï¼Œæ¯”å¦‚åˆ†ç‰‡(shard)å’Œå‰¯æœ¬(replica)ï¼Œå®ƒå†³å®šè¿™ä¸ªç´¢å¼•åº“æœ€ç»ˆçš„é…ç½®å½¢æ€ã€‚åˆå­¦è€…çš„è¯ï¼Œå¯ä»¥åªç”¨ç®¡è¿™ä¸‰ä¸ªé…ç½®å‚æ•°å³å¯:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;number_of_shards: æ˜¯è®¾ç½®çš„åˆ†ç‰‡æ•°ï¼Œè®¾ç½®ä¹‹åæ— æ³•æ›´æ”¹ï¼&lt;/li&gt;
&lt;li&gt;refresh_interval: æ˜¯è®¾ç½®esç¼“å­˜çš„åˆ·æ–°æ—¶é—´ï¼Œå¦‚æœå†™å…¥è¾ƒä¸ºé¢‘ç¹ï¼Œä½†æ˜¯æŸ¥è¯¢å¯¹å®æ—¶æ€§è¦æ±‚ä¸é‚£ä¹ˆé«˜çš„è¯ï¼Œå¯ä»¥è®¾ç½®é«˜ä¸€äº›æ¥æå‡æ€§èƒ½ã€‚å¯ä»¥æ›´æ”¹&lt;/li&gt;
&lt;li&gt;number_of_replicas : æ˜¯è®¾ç½®è¯¥ç´¢å¼•åº“çš„å‰¯æœ¬æ•°ï¼Œå»ºè®®è®¾ç½®ä¸º1ä»¥ä¸Šã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;mapping&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;mappingå¯ä»¥ç†è§£ä¸ºå…³ç³»å‹æ•°æ®åº“çš„è¡¨ç»“æ„ï¼ŒæŒ‡å®šå­—æ®µçš„ç±»å‹ã€‚åˆå­¦è€…å¯ä»¥å…ˆåªç”¨å…³å¿ƒ&lt;code&gt;textã€keywordã€byteã€shortã€integerã€longã€floatã€doubleã€booleanã€date&lt;/code&gt;è¿™å‡ ä¸ªå­—æ®µï¼Œå…¶ä¸­textå’Œkeywordéƒ½æ˜¯stringç±»å‹ï¼Œé€‰æ‹©åŒºåˆ†å¾ˆç®€å•ï¼Œéœ€è¦è¿›è¡Œåˆ†è¯ç”¨textï¼Œä¸éœ€è¦å¹¶ä¸”è¿›è¡Œæ’åºæˆ–èšåˆçš„å¯ä»¥ç”¨keywordã€‚&lt;/p&gt;
&lt;h4 id=&quot;åˆ†ç‰‡shard&quot;&gt;åˆ†ç‰‡(shard)&lt;/h4&gt;
&lt;p&gt;åˆ†ç‰‡æ˜¯ä¸€ä¸ªå•ä¸€çš„Luceneå®ä¾‹ã€‚è¿™ä¸ªæ˜¯ç”±Elasticsearchç®¡ç†çš„æ¯”è¾ƒåº•å±‚çš„åŠŸèƒ½ã€‚ç´¢å¼•æ˜¯æŒ‡å‘ä¸»åˆ†ç‰‡å’Œå‰¯æœ¬åˆ†ç‰‡çš„é€»è¾‘ç©ºé—´ã€‚å¯¹äºä½¿ç”¨ï¼Œåªéœ€è¦æŒ‡å®šåˆ†ç‰‡çš„æ•°é‡ï¼Œå…¶ä»–ä¸éœ€è¦åšè¿‡å¤šçš„äº‹æƒ…ã€‚åœ¨å¼€å‘ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯¹åº”çš„å¯¹è±¡éƒ½æ˜¯ç´¢å¼•ï¼ŒElasticsearchä¼šè‡ªåŠ¨ç®¡ç†é›†ç¾¤ä¸­æ‰€æœ‰çš„åˆ†ç‰‡ï¼Œå½“å‘ç”Ÿæ•…éšœçš„æ—¶å€™ï¼Œä¸€ä¸ªElasticsearchä¼šæŠŠåˆ†ç‰‡ç§»åŠ¨åˆ°ä¸åŒçš„èŠ‚ç‚¹æˆ–è€…æ·»åŠ æ–°çš„èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;ul readability=&quot;3.5&quot;&gt;&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;ä¸»åˆ†ç‰‡(primary shard):æ¯ä¸ªæ–‡æ¡£éƒ½å­˜å‚¨åœ¨ä¸€ä¸ªåˆ†ç‰‡ä¸­ï¼Œå½“ä½ å­˜å‚¨ä¸€ä¸ªæ–‡æ¡£çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šé¦–å…ˆå­˜å‚¨åœ¨ä¸»åˆ†ç‰‡ä¸­ï¼Œç„¶åä¼šå¤åˆ¶åˆ°ä¸åŒçš„å‰¯æœ¬ä¸­ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªç´¢å¼•æœ‰5ä¸ªä¸»åˆ†ç‰‡ã€‚ä½ å¯ä»¥åœ¨äº‹å…ˆåˆ¶å®šåˆ†ç‰‡çš„æ•°é‡ï¼Œå½“åˆ†ç‰‡ä¸€æ—¦å»ºç«‹ï¼Œåˆ†ç‰‡çš„æ•°é‡åˆ™ä¸èƒ½ä¿®æ”¹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;5&quot;&gt;
&lt;p&gt;å‰¯æœ¬åˆ†ç‰‡(replica shard):æ¯ä¸€ä¸ªåˆ†ç‰‡æœ‰é›¶ä¸ªæˆ–å¤šä¸ªå‰¯æœ¬ã€‚å‰¯æœ¬ä¸»è¦æ˜¯ä¸»åˆ†ç‰‡çš„å¤åˆ¶ï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ªç›®çš„ï¼š&lt;/p&gt;
&lt;p&gt;1ã€å¢åŠ é«˜å¯ç”¨æ€§ï¼šå½“ä¸»åˆ†ç‰‡å¤±è´¥çš„æ—¶å€™ï¼Œå¯ä»¥ä»å‰¯æœ¬åˆ†ç‰‡ä¸­é€‰æ‹©ä¸€ä¸ªä½œä¸ºä¸»åˆ†ç‰‡ã€‚&lt;br/&gt;2ã€æé«˜æ€§èƒ½ï¼šå½“æŸ¥è¯¢çš„æ—¶å€™å¯ä»¥åˆ°ä¸»åˆ†ç‰‡æˆ–è€…å‰¯æœ¬åˆ†ç‰‡ä¸­è¿›è¡ŒæŸ¥è¯¢ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªä¸»åˆ†é…æœ‰ä¸€ä¸ªå‰¯æœ¬ï¼Œä½†å‰¯æœ¬çš„æ•°é‡å¯ä»¥åœ¨åé¢åŠ¨æ€çš„é…ç½®å¢åŠ ã€‚å‰¯æœ¬å¿…é¡»éƒ¨ç½²åœ¨ä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œä¸èƒ½éƒ¨ç½²åœ¨å’Œä¸»åˆ†ç‰‡ç›¸åŒçš„èŠ‚ç‚¹ä¸Šã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;åˆ†ç‰‡è®¾ç½®å¾ˆé‡è¦ï¼ä¸€ä¸ªindexæŒ‡å®šäº†åˆ†ç‰‡ä¹‹åæ˜¯æ— æ³•ä¿®æ”¹çš„ï¼Œå› æ­¤åœ¨è®¾ç½®åˆ†ç‰‡çš„æ—¶å€™ä¸€å®šè¦äº‹å‰åšå¥½è§„åˆ’ï¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç¤ºä¾‹å›¾:&lt;img src=&quot;https://img-blog.csdnimg.cn/20191224190111552.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly94dXd1amluZy5ibG9nLmNzZG4ubmV0,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;æ–‡æ¡£&quot;&gt;æ–‡æ¡£&lt;/h4&gt;
&lt;p&gt;å­˜å‚¨åœ¨Elasticsearchä¸­çš„ä¸»è¦å®ä½“å«æ–‡æ¡£ï¼ˆdocumentï¼‰ã€‚ç”¨å…³ç³»å‹æ•°æ®åº“æ¥ç±»æ¯”çš„è¯ï¼Œä¸€ä¸ªæ–‡æ¡£ç›¸å½“äºæ•°æ®åº“è¡¨ä¸­çš„ä¸€è¡Œè®°å½•ã€‚å½“æ¯”è¾ƒElasticsearchä¸­çš„æ–‡æ¡£å’ŒMongoDBä¸­çš„æ–‡æ¡£ï¼Œä½ ä¼šå‘ç°ä¸¤è€…éƒ½å¯ä»¥æœ‰ä¸åŒçš„ç»“æ„ï¼Œä½†Elasticsearchçš„æ–‡æ¡£ä¸­ï¼Œç›¸åŒå­—æ®µå¿…é¡»æœ‰ç›¸åŒç±»å‹ã€‚è¿™æ„å‘³ç€ï¼Œæ‰€æœ‰åŒ…å« title å­—æ®µçš„æ–‡æ¡£ï¼Œ title å­—æ®µç±»å‹éƒ½å¿…é¡»ä¸€æ ·ï¼Œæ¯”å¦‚ string ã€‚&lt;br/&gt;æ–‡æ¡£ç”±å¤šä¸ªå­—æ®µç»„æˆï¼Œæ¯ä¸ªå­—æ®µå¯èƒ½å¤šæ¬¡å‡ºç°åœ¨ä¸€ä¸ªæ–‡æ¡£é‡Œï¼Œè¿™æ ·çš„å­—æ®µå«å¤šå€¼å­—æ®µï¼ˆmultivaluedï¼‰ã€‚æ¯ä¸ªå­—æ®µæœ‰ç±»å‹ï¼Œå¦‚æ–‡æœ¬ã€æ•°å€¼ã€æ—¥æœŸç­‰ã€‚å­—æ®µç±»å‹ä¹Ÿå¯ä»¥æ˜¯å¤æ‚ç±»å‹ï¼Œä¸€ä¸ªå­—æ®µåŒ…å«å…¶ä»–å­æ–‡æ¡£æˆ–è€…æ•°ç»„ã€‚å­—æ®µç±»å‹åœ¨Elasticsearchä¸­å¾ˆé‡è¦ï¼Œå› ä¸ºå®ƒç»™å‡ºäº†å„ç§æ“ä½œï¼ˆå¦‚åˆ†ææˆ–æ’åºï¼‰å¦‚ä½•è¢«æ‰§è¡Œçš„ä¿¡æ¯ã€‚å¹¸å¥½ï¼Œè¿™å¯ä»¥è‡ªåŠ¨ç¡®å®šï¼Œç„¶è€Œï¼Œæˆ‘ä»¬ä»ç„¶å»ºè®®ä½¿ç”¨æ˜ å°„ã€‚ä¸å…³ç³»å‹æ•°æ®åº“ä¸åŒï¼Œæ–‡æ¡£ä¸éœ€è¦æœ‰å›ºå®šçš„ç»“æ„ï¼Œæ¯ä¸ªæ–‡æ¡£å¯ä»¥æœ‰ä¸åŒçš„å­—æ®µï¼Œæ­¤å¤–ï¼Œåœ¨ç¨‹åºå¼€å‘æœŸé—´ï¼Œä¸å¿…ç¡®å®šæœ‰å“ªäº›å­—æ®µã€‚å½“ç„¶ï¼Œå¯ä»¥ç”¨æ¨¡å¼å¼ºè¡Œè§„å®šæ–‡æ¡£ç»“æ„ã€‚ä»å®¢æˆ·ç«¯çš„è§’åº¦çœ‹ï¼Œæ–‡æ¡£æ˜¯ä¸€ä¸ªJSONå¯¹è±¡ã€‚æ¯ä¸ªæ–‡æ¡£å­˜å‚¨åœ¨ä¸€ä¸ªç´¢å¼•ä¸­å¹¶æœ‰ä¸€ä¸ªElasticsearchè‡ªåŠ¨ç”Ÿæˆçš„å”¯ä¸€æ ‡è¯†ç¬¦å’Œæ–‡æ¡£ç±»å‹ã€‚æ–‡æ¡£éœ€è¦æœ‰å¯¹åº”æ–‡æ¡£ç±»å‹çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œè¿™æ„å‘³ç€åœ¨ä¸€ä¸ªç´¢å¼•ä¸­ï¼Œä¸¤ä¸ªä¸åŒç±»å‹çš„æ–‡æ¡£å¯ä»¥æœ‰ç›¸åŒçš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æ–‡æ¡£ç±»å‹:&lt;br/&gt;åœ¨Elasticsearchä¸­ï¼Œä¸€ä¸ªç´¢å¼•å¯¹è±¡å¯ä»¥å­˜å‚¨å¾ˆå¤šä¸åŒç”¨é€”çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªåšå®¢åº”ç”¨ç¨‹åºå¯ä»¥ä¿å­˜æ–‡ç« å’Œè¯„è®ºã€‚æ–‡æ¡£ç±»å‹è®©æˆ‘ä»¬è½»æ˜“åœ°åŒºåˆ†å•ä¸ªç´¢å¼•ä¸­çš„ä¸åŒå¯¹è±¡ã€‚æ¯ä¸ªæ–‡æ¡£å¯ä»¥æœ‰ä¸åŒçš„ç»“æ„ï¼Œä½†åœ¨å®é™…éƒ¨ç½²ä¸­ï¼Œå°†æ–‡ä»¶æŒ‰ç±»å‹åŒºåˆ†å¯¹æ•°æ®æ“ä½œæœ‰å¾ˆå¤§å¸®åŠ©ã€‚å½“ç„¶ï¼Œéœ€è¦è®°ä½ä¸€ä¸ªé™åˆ¶ï¼Œä¸åŒçš„æ–‡æ¡£ç±»å‹ä¸èƒ½ä¸ºç›¸åŒçš„å±æ€§è®¾ç½®ä¸åŒçš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œåœ¨åŒä¸€ç´¢å¼•ä¸­çš„æ‰€æœ‰æ–‡æ¡£ç±»å‹ä¸­ï¼Œä¸€ä¸ªå« title çš„å­—æ®µå¿…é¡»å…·æœ‰ç›¸åŒçš„ç±»å‹ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;blockquote&gt;
&lt;ul readability=&quot;3.5&quot;&gt;&lt;li&gt;æ ¸å¿ƒæ•°æ®ç±»å‹&lt;br/&gt;text å’Œ keyword&lt;/li&gt;
&lt;li&gt;æ•°å€¼æ•°æ®ç±»å‹&lt;br/&gt;longï¼Œintegerï¼Œshortï¼Œbyteï¼Œdoubleï¼Œfloatï¼Œhalf_floatï¼Œscaled_float&lt;/li&gt;
&lt;li&gt;æ—¥æœŸæ•°æ®ç±»å‹&lt;br/&gt;date&lt;/li&gt;
&lt;li&gt;å¸ƒå°”æ•°æ®ç±»å‹&lt;br/&gt;boolean&lt;/li&gt;
&lt;li&gt;äºŒè¿›åˆ¶æ•°æ®ç±»å‹&lt;br/&gt;binary&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;èŒƒå›´æ•°æ®ç±»å‹&lt;br/&gt;integer_rangeï¼Œfloat_rangeï¼Œlong_rangeï¼Œdouble_rangeï¼Œdate_range&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤æ‚æ•°æ®ç±»å‹&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;å¯¹è±¡æ•°æ®ç±»å‹&lt;br/&gt;object ç”¨äºå•ä¸ªJSONå¯¹è±¡&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;åµŒå¥—æ•°æ®ç±»å‹&lt;br/&gt;nested ç”¨äºJSONå¯¹è±¡æ•°ç»„&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœ°ç†æ•°æ®ç±»å‹&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;åœ°ç†ä½ç½®æ•°æ®ç±»å‹&lt;br/&gt;geo_point çº¬åº¦/ç»åº¦ç§¯åˆ†&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;åœ°ç†å½¢çŠ¶æ•°æ®ç±»å‹&lt;br/&gt;geo_shape ç”¨äºå¤šè¾¹å½¢ç­‰å¤æ‚å½¢çŠ¶&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸“ä¸šæ•°æ®ç±»å‹&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;IPæ•°æ®ç±»å‹&lt;br/&gt;ip ç”¨äºIPv4å’ŒIPv6åœ°å€&lt;/li&gt;
&lt;li&gt;å®Œæˆæ•°æ®ç±»å‹&lt;br/&gt;completion æä¾›è‡ªåŠ¨å®Œæˆå»ºè®®&lt;/li&gt;
&lt;li&gt;ä»¤ç‰Œè®¡æ•°æ•°æ®ç±»å‹&lt;br/&gt;token_count è®¡ç®—å­—ç¬¦ä¸²ä¸­ä»¤ç‰Œçš„æ•°é‡&lt;br/&gt;mapper-murmur3&lt;br/&gt;murmur3 åœ¨ç´¢å¼•æ—¶è®¡ç®—å€¼çš„å“ˆå¸Œå¹¶å°†å…¶å­˜å‚¨åœ¨ç´¢å¼•ä¸­&lt;br/&gt;mapper-annotated-text&lt;br/&gt;annotated-text ç´¢å¼•åŒ…å«ç‰¹æ®Šæ ‡è®°çš„æ–‡æœ¬ï¼ˆé€šå¸¸ç”¨äºæ ‡è¯†å‘½åå®ä½“ï¼‰&lt;/li&gt;
&lt;li&gt;æ¸—æ»¤å™¨ç±»å‹&lt;br/&gt;æ¥å—æ¥è‡ªquery-dslçš„æŸ¥è¯¢&lt;/li&gt;
&lt;li&gt;join æ•°æ®ç±»å‹&lt;br/&gt;ä¸ºåŒä¸€ç´¢å¼•å†…çš„æ–‡æ¡£å®šä¹‰çˆ¶/å­å…³ç³»&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;åˆ«åæ•°æ®ç±»å‹&lt;br/&gt;ä¸ºç°æœ‰å­—æ®µå®šä¹‰åˆ«åã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;å¤šå­—æ®µ:&lt;br/&gt;ä¸ºä¸åŒçš„ç›®çš„ä»¥ä¸åŒçš„æ–¹å¼å¯¹åŒä¸€å­—æ®µå»ºç«‹ç´¢å¼•é€šå¸¸å¾ˆæœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªstringå­—æ®µå¯ä»¥æ˜ å°„ä¸ºtextç”¨äºå…¨æ–‡æœç´¢çš„å­—æ®µï¼Œä¹Ÿå¯ä»¥æ˜ å°„ä¸ºkeywordç”¨äºæ’åºæˆ–èšåˆçš„å­—æ®µã€‚æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨standardåˆ†æä»ªï¼Œ englishåˆ†æä»ªå’Œ frenchåˆ†æä»ªç´¢å¼•æ–‡æœ¬å­—æ®µã€‚&lt;br/&gt;è¿™æ˜¯å¤šé¢†åŸŸçš„ç›®çš„ã€‚å¤§å¤šæ•°æ•°æ®ç±»å‹é€šè¿‡fieldså‚æ•°æ”¯æŒå¤šå­—æ®µã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/blockquote&gt;
&lt;ul readability=&quot;1.5&quot;&gt;&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;æ˜ å°„ï¼š&lt;br/&gt;åœ¨æœ‰å…³å…¨æ–‡æœç´¢åŸºç¡€çŸ¥è¯†éƒ¨åˆ†ï¼Œæˆ‘ä»¬æåˆ°äº†åˆ†æçš„è¿‡ç¨‹ï¼šä¸ºå»ºç´¢å¼•å’Œæœç´¢å‡†å¤‡è¾“å…¥æ–‡æœ¬ã€‚æ–‡æ¡£ä¸­çš„æ¯ä¸ªå­—æ®µéƒ½å¿…é¡»æ ¹æ®ä¸åŒç±»å‹åšç›¸åº”çš„åˆ†æã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¯¹æ•°å€¼å­—æ®µå’Œä»ç½‘é¡µæŠ“å–çš„æ–‡æœ¬å­—æ®µæœ‰ä¸åŒçš„åˆ†æï¼Œæ¯”å¦‚å‰è€…çš„æ•°å­—ä¸åº”è¯¥æŒ‰å­—æ¯é¡ºåºæ’åºï¼Œåè€…çš„ç¬¬ä¸€æ­¥æ˜¯å¿½ç•¥HTMLæ ‡ç­¾ï¼Œå› ä¸ºå®ƒä»¬æ˜¯æ— ç”¨çš„ä¿¡æ¯å™ªéŸ³ã€‚Elasticsearchåœ¨æ˜ å°„ä¸­å­˜å‚¨æœ‰å…³å­—æ®µçš„ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;è·¯ç”±(routing):&lt;br/&gt;å½“å­˜å‚¨ä¸€ä¸ªæ–‡æ¡£çš„æ—¶å€™ï¼Œä»–ä¼šå­˜å‚¨åœ¨ä¸€ä¸ªå”¯ä¸€çš„ä¸»åˆ†ç‰‡ä¸­ï¼Œå…·ä½“å“ªä¸ªåˆ†ç‰‡æ˜¯é€šè¿‡æ•£åˆ—å€¼çš„è¿›è¡Œé€‰æ‹©ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå€¼æ˜¯ç”±æ–‡æ¡£çš„idç”Ÿæˆã€‚å¦‚æœæ–‡æ¡£æœ‰ä¸€ä¸ªæŒ‡å®šçš„çˆ¶æ–‡æ¡£ï¼Œä»çˆ¶æ–‡æ¡£IDä¸­ç”Ÿæˆï¼Œè¯¥å€¼å¯ä»¥åœ¨å­˜å‚¨æ–‡æ¡£çš„æ—¶å€™è¿›è¡Œä¿®æ”¹ã€‚&lt;br/&gt;è¿™ä¸ªå±æ€§åœ¨å­¦ä¹ åˆæœŸå¯ä»¥ä¸å¿…ç†ä¼šï¼Œä½¿ç”¨é»˜è®¤å³å¯ã€‚åœ¨æœ‰ä¸€å®šäº†è§£ElasticSearchä¹‹åå¯ä»¥åœ¨è¿›è¡Œäº†è§£å­¦ä¹ ã€‚&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;åˆ«å(alias):&lt;br/&gt;å®ƒæ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªç´¢å¼•çš„ä¸€ä¸ªé™„åŠ åç§°ï¼Œå…è®¸ä½¿ç”¨è¿™ä¸ªåç§°æ¥æŸ¥è¯¢ç´¢å¼•ã€‚ä¸€ä¸ªåˆ«åå¯ä»¥å¯¹åº”å¤šä¸ªç´¢å¼•ï¼Œåä¹‹äº¦ç„¶ï¼Œä¸€ä¸ªç´¢å¼•å¯ä»¥æ˜¯å¤šä¸ªåˆ«åçš„ä¸€éƒ¨åˆ†ã€‚åˆ«ååªèƒ½ç”¨ä½œæŸ¥è¯¢ï¼Œä¸èƒ½è¿›è¡Œæ•°æ®æ“ä½œï¼&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ç¤ºä¾‹å›¾:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20191224190118715.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly94dXd1amluZy5ibG9nLmNzZG4ubmV0,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20191224190119688.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly94dXd1amluZy5ibG9nLmNzZG4ubmV0,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;å…¶å®ƒ&quot;&gt;å…¶å®ƒ&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ä¸»è¦ä»‹ç»äº†ElasticSearchçš„ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼Œå…¶ä¸­ElasticSearchçš„ç†è®ºçŸ¥è¯†è¿œè¿œä¸æ­¢è¿™äº›ï¼Œä½†æ˜¯ä»‹ç»çš„å¤ªå¤šçš„è¯å¸æ”¶ä¸è¿‡æ¥ï¼Œå…¶å®å¾ˆå¤šçš„çŸ¥è¯†æœ€å¥½æ˜¯è¾¹å­¦è¾¹ç”¨ä¸­åœ¨æŒæ¡ã€‚å­¦ä¹ ElasticSearchçŸ¥è¯†ç†è®ºå¯ä»¥å»å®˜ç½‘å­¦ä¹ ï¼Œé‚£é‡Œæœ‰éå¸¸è¯¦ç»†çš„çŸ¥è¯†ã€‚&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/2019122422240928.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly94dXd1amluZy5ibG9nLmNzZG4ubmV0,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¹‹åæˆ–è®¸ä¼šå†™ä¸€ç¯‡å…³äºElasticSearchçš„é›†ç¾¤è§„åˆ’ï¼Œä¼šä»æ¡ˆä¾‹ä¸­è¿›è¡Œè®²è§£ï¼ŒåŒ…æ‹¬æœºå™¨ã€èŠ‚ç‚¹ã€ç´¢å¼•åº“ã€åˆ†ç‰‡å‰¯æœ¬ä¸€äº›é€‰æ‹©å’Œé…ç½®çš„ä¸€äº›å…·ä½“çŸ¥è¯†ã€‚&lt;/p&gt;
&lt;p&gt;å‚è€ƒï¼š&lt;br/&gt;&lt;a href=&quot;https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html&quot; class=&quot;uri&quot;&gt;https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å‚è€ƒä¹¦ç±:&lt;br/&gt;ã€ŠElasticSearchæƒå¨æŒ‡å—ã€‹&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.cnblogs.com/xuwujing/tag/elasticsearch/&quot;&gt;ElasticSearchå®æˆ˜ç³»åˆ—&lt;/a&gt;:&lt;br/&gt;&lt;a href=&quot;https://www.cnblogs.com/xuwujing/p/11385255.html&quot;&gt;ElasticSearchå®æˆ˜ç³»åˆ—ä¸€: ElasticSearché›†ç¾¤+Kinabaå®‰è£…æ•™ç¨‹&lt;/a&gt;&lt;br/&gt;&lt;a href=&quot;https://www.cnblogs.com/xuwujing/p/11567053.html&quot;&gt;ElasticSearchå®æˆ˜ç³»åˆ—äºŒ: ElasticSearchçš„DSLè¯­å¥ä½¿ç”¨æ•™ç¨‹---å›¾æ–‡è¯¦è§£&lt;/a&gt;&lt;br/&gt;&lt;a href=&quot;https://www.cnblogs.com/xuwujing/p/11645630.html&quot;&gt;ElasticSearchå®æˆ˜ç³»åˆ—ä¸‰: ElasticSearchçš„JAVA APIä½¿ç”¨æ•™ç¨‹&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;éŸ³ä¹æ¨è&quot;&gt;éŸ³ä¹æ¨è&lt;/h3&gt;

&lt;p&gt;åŸåˆ›ä¸æ˜“ï¼Œå¦‚æœæ„Ÿè§‰ä¸é”™ï¼Œå¸Œæœ›ç»™ä¸ªæ¨èï¼æ‚¨çš„æ”¯æŒæ˜¯æˆ‘å†™ä½œçš„æœ€å¤§åŠ¨åŠ›ï¼&lt;br/&gt;ç‰ˆæƒå£°æ˜:&lt;br/&gt;ä½œè€…ï¼šè™šæ— å¢ƒ&lt;br/&gt;åšå®¢å›­å‡ºå¤„ï¼š&lt;a href=&quot;http://www.cnblogs.com/xuwujing&quot; class=&quot;uri&quot;&gt;http://www.cnblogs.com/xuwujing&lt;/a&gt;&lt;br/&gt;CSDNå‡ºå¤„ï¼š&lt;a href=&quot;http://blog.csdn.net/qazwsxpcm&quot; class=&quot;uri&quot;&gt;http://blog.csdn.net/qazwsxpcm&lt;/a&gt;ã€€ã€€ã€€ã€€&lt;br/&gt;æ˜é‡‘å‡ºå¤„ï¼š&lt;a href=&quot;https://juejin.im/user/5ae45d5bf265da0b8a6761e4&quot; class=&quot;uri&quot;&gt;https://juejin.im/user/5ae45d5bf265da0b8a6761e4&lt;/a&gt;&lt;br/&gt;ä¸ªäººåšå®¢å‡ºå¤„ï¼š&lt;a href=&quot;http://www.panchengming.com&quot; class=&quot;uri&quot;&gt;http://www.panchengming.com&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 24 Dec 2019 14:27:00 +0000</pubDate>
<dc:creator>è™šæ— å¢ƒ</dc:creator>
<og:description>å‰è¨€ åœ¨å‰å‡ ç¯‡å…³äº &amp;quot;ElasticSearch&amp;quot; çš„æ–‡ç« ä¸­ï¼Œç®€å•çš„è®²äº†ä¸‹æœ‰å…³ElasticSearchçš„ä¸€äº›ä½¿ç”¨ï¼Œè¿™ç¯‡æ–‡ç« è®²ä¸€ä¸‹æœ‰å…³ ElasticSearchçš„ä¸€äº›ç†è®ºçŸ¥è¯†ä»¥åŠ</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/xuwujing/p/12093933.html</dc:identifier>
</item>
<item>
<title>åŸºäºGraylogçš„å®¹å™¨æ—¥å¿—ç›‘æ§ - CodingDiary</title>
<link>http://www.cnblogs.com/coding-diary/p/12093294.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/coding-diary/p/12093294.html</guid>
<description>&lt;div class=&quot;markdown-here-wrapper&quot; data-md-url=&quot;https://i-beta.cnblogs.com/posts/edit&quot; readability=&quot;86.763813448211&quot;&gt;
&lt;h3 id=&quot;docker-&quot;&gt;Dockeræ—¥å¿—&lt;/h3&gt;
&lt;p&gt;å½“ä¸€ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™ï¼Œå®ƒå…¶å®æ˜¯docker deamonçš„ä¸€ä¸ªå­è¿›ç¨‹ï¼Œdocker daemonå¯ä»¥æ‹¿åˆ°å®¹å™¨é‡Œé¢è¿›ç¨‹çš„æ ‡å‡†è¾“å‡ºï¼Œç„¶åé€šè¿‡è‡ªèº«çš„LogDriveræ¨¡å—æ¥å¤„ç†ï¼ŒLogDriveræ”¯æŒçš„æ–¹å¼å¾ˆå¤šï¼Œé»˜è®¤å†™åˆ°æœ¬åœ°æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥å‘é€åˆ°syslogç­‰ã€‚Â &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/mo-se-de-feng/notes/raw/master/%E5%AE%B9%E5%99%A8%E5%8C%96%E4%B8%93%E9%A2%98/images/1.3.2%20docker%20log%20driver.PNG&quot; alt=&quot;img&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Dockerä¼šé»˜è®¤æ”¶é›†åº”ç”¨ç¨‹åºçš„æ ‡å‡†è¾“å‡ºåˆ°ä¸€ä¸ªjson.logæ–‡ä»¶ä¸­ï¼Œä»¥ä¸€è¡Œä¸€æ¡JSONå­˜å‚¨æ•°æ®ï¼Œæ–‡ä»¶çš„æ ¼å¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;{&quot;log&quot;:&quot;root@74205cdc7b53dd:/#ls\r\n&quot;,&quot;stream&quot;:&quot;stdout&quot;,&quot;time&quot;:&quot;xxx.155834526Z&quot;}
{&quot;log&quot;:&quot;root@74205cdc7b53dd:/#ls\r\n&quot;,&quot;stream&quot;:&quot;stdout&quot;,&quot;time&quot;:&quot;xxx.255834528Z&quot;}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Dockerçš„è¿™ç§æ—¥å¿—å­˜å‚¨æ–¹å¼å¯ä»¥åœ¨å®¹å™¨å¯åŠ¨æ—¶é€šè¿‡æŒ‡å®šlog-driverè¿›è¡Œé…ç½®ï¼Œæ”¯æŒçš„log driverå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/mo-se-de-feng/notes/raw/master/%E5%AE%B9%E5%99%A8%E5%8C%96%E4%B8%93%E9%A2%98/images/1.3.2%20log%20drivers.PNG&quot; alt=&quot;img&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;graylog-&quot;&gt;Graylogæ—¥å¿—ç®¡ç†&lt;/h3&gt;
&lt;p&gt;Graylogæ˜¯ä¸€ä¸ªå¼€æºçš„å®Œæ•´çš„æ—¥å¿—ç®¡ç†å·¥å…·ï¼ŒåŠŸèƒ½å’ŒELKç±»ä¼¼ã€‚DockeråŸç”Ÿæ”¯æŒgraylogåè®®ï¼ŒGraylogå®˜æ–¹ä¹Ÿæä¾›äº†å¯¹Dockerçš„æ”¯æŒï¼ŒäºŒè€…å¯ä»¥æ— ç¼è¡”æ¥ã€‚Graylogå®˜æ–¹æä¾›äº†Dockerfileå¯ä»¥åœ¨Dockerä¸Šéƒ¨ç½²æ—¥å¿—ç³»ç»Ÿï¼ŒåŒæ—¶ä¹Ÿæä¾›äº†docker-compose.ymlæ–‡ä»¶æ¥å¿«é€Ÿéƒ¨ç½²æ•´ä¸ªgraylogæ ˆã€‚&lt;br/&gt;è¯¦ç»†å†…å®¹å¯ä»¥é€šè¿‡&lt;a href=&quot;http://docs.graylog.org/en/3.1/pages/installation/docker.html&quot;&gt;http://docs.graylog.org/en/3.1/pages/installation/docker.html&lt;/a&gt; æ¥æŸ¥çœ‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/mo-se-de-feng/notes/raw/master/%E5%AE%B9%E5%99%A8%E5%8C%96%E4%B8%93%E9%A2%98/images/1.3.2%20graylog.PNG&quot; alt=&quot;img&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;graylog-&quot;&gt;Graylogéƒ¨ç½²&lt;/h3&gt;
&lt;p&gt;1.åœ¨å½“å‰ç”¨æˆ·ç›®å½•ä¸‹åˆ›å»ºgraylogç›®å½•ä½œä¸ºéƒ¨ç½²çš„å·¥ä½œç›®å½•ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;$ mkdir graylog
$ cd graylog
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;2.åˆå§‹åŒ–ç›®å½•å’Œé…ç½®æ–‡ä»¶&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;$ mkdir -p ./graylog/config
$ cd ./graylog/config
$ wget https://raw.githubusercontent.com/Graylog2/graylog-docker/3.1/config/graylog.conf
$ wget https://raw.githubusercontent.com/Graylog2/graylog-docker/3.1/config/log4j2.xml

#å¦å¤–ç”±äºGraylogä»¥ID 1100 å®šä¹‰äº†ç”¨æˆ·å’Œç”¨æˆ·ç»„ï¼Œ
#å¯¼è‡´Graylogåœ¨å¯åŠ¨çš„æ—¶å€™å¯èƒ½ä¼šæŠ¥configç›®å½•æƒé™ä¸è¶³çš„é”™è¯¯ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥è§£å†³
chown -R 1100:1100 ./graylog/config
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;3.ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œ ä¸Šä¸€æ­¥è·å¾—çš„graylog.confæ–‡ä»¶æ˜¯å®˜æ–¹æä¾›çš„é»˜è®¤é…ç½®ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œé…ç½®ï¼Œæ¯”å¦‚é…ç½®ä¸­æ—¶åŒºé»˜è®¤ä¸ºUTCæ—¶åŒºï¼Œå¯ä»¥å°†å…¶æ”¹ä¸ºä¸­å›½æ—¶åŒº&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;root_timezone = Asia/Shanghai
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;4.å‡†å¤‡docker-compose.ymlæ–‡ä»¶&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;version: '3'
services:
  # MongoDB: https://hub.docker.com/_/mongo/
  mongo:
    image: mongo:3
    networks:
      - graylog
    volumes:
      - mongo_data:/data/db
  # Elasticsearch: https://www.elastic.co/guide/en/elasticsearch/reference/6.x/docker.html
  elasticsearch:
    image: docker.elastic.co/elasticsearch/elasticsearch:7.5.0
    volumes:
      - es_data:/usr/share/elasticsearch/data
    environment:
      - http.host=0.0.0.0
      - transport.host=localhost
      - network.host=0.0.0.0
      - &quot;ES_JAVA_OPTS=-Xms512m -Xmx512m&quot;
    ulimits:
      memlock:
        soft: -1
        hard: -1
    deploy:
      resources:
        limits:
          memory: 1g
    networks:
      - graylog
  # Graylog: https://hub.docker.com/r/graylog/graylog/
  graylog:
    image: graylog/graylog:3.1
    volumes:
      - graylog_journal:/usr/share/graylog/data/journal
      - ./graylog/config:/usr/share/graylog/data/config
    environment:
      # CHANGE ME (must be at least 16 characters)!
      - GRAYLOG_PASSWORD_SECRET=somepasswordpepper
      # Password: admin
      - GRAYLOG_ROOT_PASSWORD_SHA2=8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918
      - GRAYLOG_HTTP_EXTERNAL_URI=http://192.168.0.103:9000/
    networks:
      - graylog
    depends_on:
      - mongo
      - elasticsearch
    ports:
      # Graylog web interface and REST API
      - 9000:9000
      # Syslog TCP
      - 1514:1514
      # Syslog UDP
      - 1514:1514/udp
      # GELF TCP
      - 12201:12201
      # GELF UDP
      - 12201:12201/udp
networks:
  graylog:
    driver: bridge
# Volumes for persisting data, see https://docs.docker.com/engine/admin/volumes/volumes/
volumes:
  mongo_data:
    driver: local
  es_data:
    driver: local
  graylog_journal:
    driver: local
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;5.è¿è¡Œ â€œdocker-compose upâ€å¯åŠ¨æœåŠ¡ï¼Œ æœåŠ¡æ­£å¸¸å¯åŠ¨åå°±å¯ä»¥é€šè¿‡&lt;a href=&quot;http://ip:9000&quot;&gt;http://ip:9000&lt;/a&gt; è¿›è¡Œè®¿é—®graylogçš„Webç•Œé¢ï¼Œé»˜è®¤ç”¨æˆ·admin/adminã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/mo-se-de-feng/notes/raw/master/%E5%AE%B9%E5%99%A8%E5%8C%96%E4%B8%93%E9%A2%98/images/1.3.2%20graylog%E9%A1%B5%E9%9D%A2.PNG&quot; alt=&quot;img&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;graylog-&quot;&gt;Graylogé…ç½®æ—¥å¿—æ”¶é›†&lt;/h3&gt;
&lt;p&gt;Graylogçš„æ—¥å¿—æ”¶é›†é€šè¿‡å®šä¹‰inputæ¥å®Œæˆï¼Œåœ¨Graylogçš„Webç®¡ç†é¡µé¢çš„System tabä¸‹å¯ä»¥é€‰æ‹©å®šä¹‰inputæ¥å¯¹æ—¥å¿—è¿›è¡Œæ”¶é›†&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/mo-se-de-feng/notes/raw/master/%E5%AE%B9%E5%99%A8%E5%8C%96%E4%B8%93%E9%A2%98/images/1.3.2%20%E9%80%89%E6%8B%A9input.PNG&quot; alt=&quot;img&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿›å…¥inputé¡µé¢åé€‰æ‹©inputçš„ç±»å‹ï¼Œæ¯”å¦‚å®šä¹‰GELF UDPçš„input:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/mo-se-de-feng/notes/raw/master/%E5%AE%B9%E5%99%A8%E5%8C%96%E4%B8%93%E9%A2%98/images/1.3.2%20%E9%80%89%E6%8B%A9GELF.PNG&quot; alt=&quot;img&quot;/&gt;&lt;/p&gt;
&lt;p&gt;é€‰æ‹©å®Œæˆåç‚¹å‡» â€œLanch new inputâ€ï¼Œå°±ä¼šè¿›å…¥è¯¦ç»†çš„inputé…ç½®ï¼Œé…ç½®å®Œæˆåä¿å­˜å°±å¯ä»¥äº†&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/mo-se-de-feng/notes/raw/master/%E5%AE%B9%E5%99%A8%E5%8C%96%E4%B8%93%E9%A2%98/images/1.3.2%20%E9%85%8D%E7%BD%AEinput.PNG&quot; alt=&quot;img&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¿å­˜åä¸€åˆ‡æ­£å¸¸çš„è¯ï¼Œinputå°±ä¼šè¿›å…¥RUNNINGçŠ¶æ€ï¼Œè¿™æ—¶å°±å¯ä»¥å¾€è¿™ä¸ªinputé‡Œé¢å‘é€æ•°æ®äº†ï¼Œç‚¹å‡»â€œStop inputâ€ï¼Œinputå°±ä¼šåœæ­¢ï¼Œæ•°æ®çš„æ¥æ”¶ä¹Ÿä¼šåœæ­¢ï¼Œâ€œStop inputâ€ä¼šå˜æˆâ€œStart inputâ€ï¼Œéœ€è¦æ¥å—æ•°æ®çš„æ—¶ç‚¹å‡»å¯åŠ¨å°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/mo-se-de-feng/notes/raw/master/%E5%AE%B9%E5%99%A8%E5%8C%96%E4%B8%93%E9%A2%98/images/1.3.2%20input%E8%BF%90%E8%A1%8C.PNG&quot; alt=&quot;img&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;-docker-graylog&quot;&gt;é…ç½®Dockerå®¹å™¨å‘é€æ•°æ®åˆ°Graylog&lt;/h3&gt;
&lt;p&gt;é…ç½®Dockerå®¹å™¨å‘é€æ•°æ®åˆ°Graylogæ—¶å¯ä»¥åœ¨è¿è¡Œdocker runå‘½ä»¤å¯åŠ¨å®¹å™¨çš„æ—¶å€™åŠ ä¸Šå¦‚ä¸‹å‚æ•°ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;docker run --log-driver=gelf \
--log-opt gelf-address=udp://graylogæœåŠ¡å™¨åœ°å€:12201 \
--log-opt tag=&amp;lt;å½“å‰å®¹å™¨æœåŠ¡æ ‡ç­¾ï¼Œç”¨æ¥ä¾›graylogæŸ¥è¯¢çš„æ—¶å€™è¿›è¡Œåˆ†ç±»&amp;gt; \
&amp;lt;IMAGE&amp;gt; &amp;lt;COMMAND&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…·ä½“ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;docker run -d \
--log-driver=gelf \
--log-opt gelf-address=udp://localhost:12201 \
--log-opt tag=&quot;{{.ImageName}}/{{.Name}}/{{.ID}}&quot; \
busybox sh -c 'while true; do echo &quot;Graylog test message&quot;; sleep 10; done;'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚æœå®¹å™¨é€šè¿‡docker-composeå‘½ä»¤å¯åŠ¨å¯ä»¥åœ¨docker-compose.ymlæ–‡ä»¶ä¸­åŠ å…¥ä»¥ä¸‹é…ç½®ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;logging:
  driver:&quot;gelf&quot;
  options:
    gelf-address:&quot;udp://graylogæœåŠ¡å™¨åœ°å€:12201&quot;
    tag:&quot;å®¹å™¨æœåŠ¡æ ‡ç­¾&quot;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…·ä½“ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;version: '2'
services:
  nginx:
    image: nginx:latest
    ports:
      - &quot;80:80&quot;
    logging:
      driver: &quot;gelf&quot;
      options:
        gelf-address: &quot;udp://localhost:12201&quot;
        tag: nginx-service
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ—¥å¿—å‘é€é…ç½®å¥½ä¹‹åå°±å¯ä»¥åœ¨çš„Search tabä¸‹æœç´¢äº§çœ‹æ—¥å¿—ä¿¡æ¯&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/mo-se-de-feng/notes/raw/master/%E5%AE%B9%E5%99%A8%E5%8C%96%E4%B8%93%E9%A2%98/images/1.3.2%20graylog%E6%97%A5%E5%BF%97%E6%98%BE%E7%A4%BA.PNG&quot; alt=&quot;img&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/common/1735841/201912/1735841-20191224200139471-2119361415.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;â€‹&lt;/p&gt;
&lt;/div&gt;
</description>
<pubDate>Tue, 24 Dec 2019 12:02:00 +0000</pubDate>
<dc:creator>CodingDiary</dc:creator>
<og:description>Dockeræ—¥å¿— å½“ä¸€ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™ï¼Œå®ƒå…¶å®æ˜¯docker deamonçš„ä¸€ä¸ªå­è¿›ç¨‹ï¼Œdocker daemonå¯ä»¥æ‹¿åˆ°å®¹å™¨é‡Œé¢è¿›ç¨‹çš„æ ‡å‡†è¾“å‡ºï¼Œç„¶åé€šè¿‡è‡ªèº«çš„LogDriveræ¨¡å—æ¥å¤„ç†ï¼ŒLogDr</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/coding-diary/p/12093294.html</dc:identifier>
</item>
<item>
<title>Linuxæ–‡æ¡£æ•´ç†ä¹‹ã€Jenkins+Dockerè‡ªåŠ¨åŒ–éƒ¨ç½².Net Coreã€‘ - Cfan1236</title>
<link>http://www.cnblogs.com/rui1236/p/12092775.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/rui1236/p/12092775.html</guid>
<description>&lt;p&gt;è¿™æ¬¡æ•´ç†çš„æ–‡æ¡£æ˜¯Jenkins+Dockerå®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œå¾ˆæ—©ä¹‹å‰å°±å†™çš„ï¼Œä»Šå¤©æœ‰æ—¶é—´å°±æ¬åˆ°åšå®¢å›­åšä¸ªè®°å½•ã€‚&lt;/p&gt;
&lt;p&gt;Jenkinsæ˜¯åŸºäºJavaå¼€å‘çš„ä¸€ç§æŒç»­é›†æˆå·¥å…·ï¼Œä¸»è¦ç”¨äºæŒç»­ã€è‡ªåŠ¨çš„æ„å»º/æµ‹è¯•è½¯ä»¶ç­‰ç›¸å…³é¡¹ç›®ã€‚åœ¨Javaå¼€å‘ä¸­æˆ‘ä»¬ç»å¸¸èƒ½çœ‹åˆ°ä½¿ç”¨jenkinsæ¥éƒ¨ç½²ï¼Œ.Net coreç›®å‰è¿˜æ˜¯æ¯”è¾ƒå°‘è§çš„ï¼Œä½†æ˜¯å¥½çš„ä¸œè¥¿æˆ‘ä»¬å°±åº”è¯¥è¦æ‹¿æ¥ä½¿ç”¨ã€å€Ÿé‰´ã€‚&lt;/p&gt;

&lt;p&gt;&lt;span&gt;&lt;em&gt;è¿™é‡Œä½¿ç”¨Dockeræ¥å®‰è£…&lt;/em&gt;&lt;/span&gt;JenKinsï¼Œ&lt;span&gt;&lt;em&gt;å½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥å®‰è£…åˆ°Linuxä¸­ã€‚&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;åˆ›å»ºjenkinså·¥ä½œç›®å½•&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;mkdir /usr/local/jenkins&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æ‹‰å–jenkinsé•œåƒ&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;docker pull jenkins&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;è¿™é‡Œæœ‰ä¸ªå°æ’æ›²ï¼Œæˆ‘ç”¨çš„æ˜¯jenkinsé•œåƒï¼Œé»˜è®¤ä¹Ÿæ˜¯latestä¸€èˆ¬æ„å‘³ç€æœ€åæœ€æ–°ç‰ˆæœ¬ã€‚å¾ˆå¤šå®˜æ–¹æœ€æ–°é•œåƒä¹Ÿéƒ½æ˜¯å¦‚æ­¤å‘½åï¼›ç›´åˆ°åæ¥å®‰è£…é…ç½®å®Œæˆåï¼Œç™»å½•è¿›å»æç¤ºæˆ‘ä¸æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œè®©æˆ‘æ›´æ–°ï¼Œå¹¶ä¸”å¾ˆå¤šæ’ä»¶å·²ç»ä¸æ”¯æŒæ­¤ç‰ˆæœ¬äº†ã€‚å‘ç°å½“å‰ç‰ˆæœ¬å’Œæœ€æ–°ç‰ˆæœ¬è¿˜ç›¸å·®å¥½å‡ ä¸ªã€‚å¿ƒæƒ³è¿™ä¸æ˜¯å®˜æ–¹é•œåƒå— æ€ä¹ˆè¿˜æ˜¯è¿™ä¹ˆæ—§çš„ç‰ˆæœ¬ï¼Œæœ€åé€šè¿‡æœç´¢å‘ç°ï¼ŒJenkinså®˜æ–¹æœ€æ–°é•œåƒç°åœ¨å·²æ”¹ä¸ºjenkins/jenkinsçš„äº†ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æ‰€ä»¥æœ€æ–°ç‰ˆæ˜¯:&lt;strong&gt;jenkins/jenkins&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224190808051-1722628861.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;æˆ‘ä»¬æ‹‰å–æœ€æ–°ltsç‰ˆæœ¬ã€‚&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;docker pull jenkins/jenkins:lts&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224190835971-1044844142.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;çœ‹å¦‚ä¸‹å›¾&lt;strong&gt;jenkins&lt;/strong&gt;å’Œ&lt;strong&gt;jenkins/jenkins&lt;/strong&gt;ä¸¤ä¸ªé•œåƒçš„å·®åˆ«ï¼Œå‘ç°å¸¸è§„ä¸‹çš„latestç‰ˆæœ¬å¹¶ä¸æœ€æ–°çš„äº†ï¼Œå®ƒä»¬çš„åˆ›å»ºæ—¶é—´å·²ç»æ˜¯1å¹´ä»¥å‰äº†ã€‚è€Œjenkins/jenkins åˆ™åˆ›å»ºæ—¶é—´åœ¨2å¤©ä¸åˆ°ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æ‰€ä»¥å¸¸è§„çš„latestå¹¶ä¸æ„å‘³ç€æœ€æ–°ç‰ˆæœ¬ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224174115642-2146719765.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ä¿®æ”¹jenkinsç›®å½•å’Œdockerç›®å½•æƒé™,è¿™é‡Œ1000æ˜¯å®¹å™¨ä¸­Jenkins çš„ç”¨æˆ· uid&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;chown -R 1000:1000 /usr/local/Jenkins&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;sudo chown -R 1000:1000 /var/run/docker.sock&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å°¤å…¶docker.sock è¿™ä¸ªæƒé™å¾ˆé‡è¦ï¼Œåˆ°æ—¶å€™å®¹å™¨é‡Œçš„Jenkinséœ€è¦æ‰§è¡Œdockerå‘½ä»¤éœ€è¦çš„&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;è¿è¡ŒJenkins æ³¨æ„åé¢çš„é•œåƒåç§°å’Œç‰ˆæœ¬lts&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;docker run -itd -p 8080:8080 -p 50000:50000 --name jenkins --privileged=trueÂ  -v /usr/local/jenkins:/var/jenkins_home -v /usr/bin/docker:/bin/dockerÂ  -v /var/run/docker.sock:/var/run/docker.sock jenkins/jenkins:ltsÂ &lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;em&gt;å‚æ•°è§£é‡Šï¼š&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;-p 8080:8080 -p 50000:50000 --&lt;/strong&gt;æ˜ å°„jenkinsç«¯å£&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;--name jenkins --&lt;/strong&gt;å®¹å™¨åç§°è‡ªå·±å‘½å&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;privileged=true --&lt;/strong&gt;æˆäºˆå®¹å™¨ç®¡ç†å‘˜æƒé™&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;-v /usr/local/jenkins:/var/jenkins_home --&lt;/strong&gt;æ˜ å°„jenkinsç›®å½•&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;-v /usr/bin/docker:/bin/docker --&lt;/strong&gt;æ˜ å°„dockeç›®å½• åˆ°æ—¶å€™éœ€è¦åœ¨å®¹å™¨é‡Œæ‰§è¡Œdockerå‘½ä»¤&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;-v /var/run/docker.sock:/var/run/docker.sock --&lt;/strong&gt;æ˜ å°„dockeræ‰§è¡Œå‘½ä»¤ åˆ°æ—¶å€™éœ€è¦å®¹å™¨é‡Œæ‰§è¡Œdockerå‘½ä»¤ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224174403931-604302911.png&quot; alt=&quot;&quot; width=&quot;1564&quot; height=&quot;62&quot;/&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;å®¹å™¨æ˜¯å¦å¯åŠ¨æˆåŠŸæœ€å¥½è¿˜æ˜¯é€šè¿‡docker ps æˆ–è€…netstat â€“ntlp |grep 8080 (æŸ¥çœ‹æˆ‘ä»¬å®¹å™¨æ˜ å°„çš„ç«¯å£æ˜¯å¦ç›‘å¬æˆåŠŸ) æŸ¥çœ‹å½“å‰å®¹å™¨æ˜¯å¦è¿è¡ŒæˆåŠŸã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æŸäº›æƒ…å†µä¸‹ï¼Œå¦‚æƒé™æ²¡æœ‰é…å¯¹ï¼Œå¯åŠ¨ä¼šä¸æˆåŠŸçš„ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;docker ps&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224174511669-1373086749.png&quot; alt=&quot;&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;


&lt;p&gt;&lt;span&gt;æŸ¥çœ‹å®¹å™¨å¯åŠ¨æˆåŠŸåï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ°å€+ç«¯å£è®¿é—®åˆšåˆšè¿è¡Œçš„Jenkins&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ä¾‹å¦‚http://192.168.1.101:8080Â  Â &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å®‰è£…æˆåŠŸè®¿é—®åä¼šå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224190855343-1092075801.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æç¤ºé¦–æ¬¡è®¿é—®éœ€è¦å¯†ç ï¼Œæˆ‘ä»¬é€šè¿‡åˆšåˆšæ˜ å°„çš„Jenkinsç›®å½•é‡ŒæŸ¥çœ‹è¿™ä¸ªé»˜è®¤å¯†ç ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;é»˜è®¤å¯†ç è·¯å¾„ï¼š&lt;strong&gt;/usr/local/jenkins/secrets/&lt;/strong&gt; Â &lt;em&gt;(&lt;/em&gt;&lt;em&gt;æ³¨æ„å‰é¢usr/local/jenkinsè·¯å¾„å°±æ˜¯åˆšåˆšè‡ªå·±æ˜ å°„çš„ç›®å½•)&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;em&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224174807164-93094199.png&quot; alt=&quot;&quot;/&gt;&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æŸ¥çœ‹å¯†ç æ–‡ä»¶&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;cat initialAdminPassword&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224174836497-1910904952.png&quot; alt=&quot;&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;è¾“å…¥å¯†ç ç„¶åç»§ç»­ä¸‹ä¸€æ­¥ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224184616857-1732290197.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ä¸‹ä¸€æ­¥å¦‚æœæœ‰å‡ºç°404çš„ï¼Œå¦‚ä¸‹å›¾&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ç½‘ä¸Šæœç´¢äº†è§£å¬è¯´æ˜¯Jenkinsçš„ä¸€ä¸ªbugï¼›éƒ¨åˆ†ç‰ˆæœ¬å­˜åœ¨ã€‚&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Â &lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224190907282-1056005613.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;è§£å†³åŠæ³•(&lt;em&gt;ä»¥ä¸‹æ­¥éª¤æ˜¯è§£å†³ç™»å½•404çš„ï¼›å¦‚æœæ²¡æœ‰404åˆ™å¯ä»¥è·³è¿‡&lt;/em&gt;)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;é¦–å…ˆå›åˆ°Jenkinsä¸»ç›®å½•æ‰¾åˆ°config.xmlæ–‡ä»¶å¹¶æ‰“å¼€ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224175152954-1668664736.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å°†&amp;lt;useSecurity&amp;gt; ä¿®æ”¹ä¸ºfalse&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224175211920-651412827.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;åœæ­¢å¹¶é‡æ–°è¿è¡Œjenkins&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224175231998-515860862.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;em&gt;é‡å¯åä¸€å®šè¦é‡æ–°æŸ¥çœ‹é»˜è®¤å¯†ç ï¼Œå¦åˆ™æ—§å¯†ç æ˜¯ç™»å½•ä¸æˆåŠŸçš„ã€‚&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ç™»å½•è¿›å»ä»¥åè¿™é‡Œé»˜è®¤é€‰æ‹©æ¨èçš„æ’ä»¶ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224191109214-116616822.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æ¥ä¸‹æ¥å°±æ˜¯ç­‰å¾…å®‰è£…ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„ï¼Œå¦‚æœjenkinsç‰ˆæœ¬æ¯”è¾ƒè€ï¼Œåˆ™å¯èƒ½å¾ˆå¤šæ’ä»¶å®‰è£…å¤±è´¥ï¼Œç›´æ¥çº¢è‰²çš„ã€‚æ­¤æ—¶å¯ä»¥è·³è¿‡è¯¥ç•Œé¢è¿›å…¥é¦–é¡µã€‚ä¼šæœ‰æç¤ºè®©ä½ å‡çº§æœ€æ–°Jenkinsç‰ˆæœ¬ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224191208813-565584678.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å®‰è£…å®Œæˆååˆ›å»ºä¸€ä¸ªç”¨æˆ·åå’Œå¯†ç ï¼Œå³å¯å®Œæˆå®‰è£…è¿›å…¥é¦–é¡µã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224191244546-892993301.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;


&lt;p&gt;&lt;strong&gt;&lt;span&gt;1ã€æºä»£ç ç¼–è¯‘å‘å¸ƒå·¥ç¨‹&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æºä»£ç å‘å¸ƒå·¥ç¨‹å³å°†æºä»£ç æäº¤åˆ°gitæœåŠ¡å™¨ï¼Œjenkinsé€šè¿‡gitæ‹‰å–æœ€æ–°çš„æºä»£ç ï¼Œå¹¶é€šè¿‡Dockerfileé‡Œçš„é…ç½®è¿›è¡Œç¼–è¯‘å‘å¸ƒè¿‡ç¨‹ã€‚ç„¶åé€šè¿‡Dockeræ„å»ºæ­¤é•œåƒå¹¶è¿è¡Œåˆ°å®¹å™¨ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;åˆ›å»ºä¸€ä¸ª.Net Core Webé¡¹ç›®ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;åˆ›å»ºé¡¹ç›®çš„æ—¶å€™å¯ä»¥é€‰æ‹©å¯ç”¨Dockeræ”¯æŒã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224181346110-1056232026.png&quot; alt=&quot;&quot; width=&quot;759&quot; height=&quot;506&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å¯¹äºä¹‹å‰çš„é¡¹ç›®å¯ä»¥å³é”®æ·»åŠ Dockeræ”¯æŒã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;é¡¹ç›®ç›®å½•&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224181439744-755223529.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;é»˜è®¤çš„Dockerfileæ˜¯æœ‰å¸®æˆ‘ä»¬è¿›è¡Œä»£ç ç¼–è¯‘å¹¶å‘å¸ƒåŠ¨ä½œçš„ã€‚æ‰€ä»¥é»˜è®¤çš„Dockerfileæ–‡ä»¶æ˜¯é€‚åˆå’Œä»£ç ä¸€èµ·æäº¤åˆ°æœåŠ¡å™¨ç„¶åä½¿ç”¨Dockerè¿›è¡Œæ„å»ºé•œåƒã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224181525910-626093647.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;é¡¹ç›®åˆ›å»ºå®Œæˆåéšä»£ç ä¸€èµ·æäº¤åˆ°gitæœåŠ¡å™¨ã€‚(svnç­‰ä¹Ÿéƒ½å¯ä»¥)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;gité¡¹ç›®ç›®å½•ï¼Œæ³¨æ„å°†Dockerfileå¤åˆ¶åˆ°æ ¹ç›®å½•ã€‚ç”±äºåˆ°æ—¶å€™æ„å»ºé•œåƒçš„æ—¶å€™å°±æ˜¯ä»æ ¹ç›®å½•æ‰§è¡Œçš„ã€‚gitç›®å½•å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224182724857-1255729928.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;span&gt;2ã€å·²ç¼–è¯‘çš„&lt;span lang=&quot;EN-US&quot;&gt;Releaseå·¥ç¨‹&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å·²ç¼–è¯‘çš„Releaseå·¥ç¨‹ï¼Œæ­¤ç§æ–¹å¼é€‚åˆgitæˆ–svnåœ¨å±€åŸŸç½‘çš„ï¼›åˆä¸å¸Œæœ›æºä»£ç ä¸æš´éœ²åˆ°å¤–ç½‘çš„éœ€è¦ã€‚æ­¤ç§æ–¹å¼æ˜¯å°†é¡¹ç›®å·¥ç¨‹è¿›è¡Œè¿›è¡Œå‘å¸ƒæ‰“åŒ…æ“ä½œã€‚ä¾‹å¦‚javaå¸¸è§çš„æ‰“åŒ…æˆä¸€ä¸ªwaråŒ…æ–‡ä»¶ã€‚.Net å°±æ˜¯ç”Ÿæˆå¯¹åº”çš„DLL æ–‡ä»¶ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;é¡¹ç›®åœ¨å‘å¸ƒä¹‹å‰æˆ‘ä»¬å¯¹é¡¹ç›®çš„Dockerfileæ–‡ä»¶å±æ€§åšä¸ªæ›´æ”¹ï¼Œä»¥ä¾¿åœ¨å‘å¸ƒæ—¶å°†æ­¤æ–‡ä»¶å¤åˆ¶åˆ°å‘å¸ƒæ—¶çš„ç›®å½•ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224182634862-326086930.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;é€‰æ‹©ä¸Šé¢å»ºç«‹çš„WebTesté¡¹ç›®å³é”®å‘å¸ƒï¼Œé€‰æ‹©å‘å¸ƒåˆ°æŒ‡å®šæ–‡ä»¶å¤¹ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å°†å‘å¸ƒæ–‡ä»¶å‘å¸ƒåˆ°è‡ªå·±çš„git(æˆ–svn)ç›®å½•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºçš„ï¼Œä¸€å®šè¦åŒ…å«Dockerfileæ–‡ä»¶ã€‚å‘å¸ƒåçš„æ–‡ä»¶ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±éœ€è¦å°†æ²¡æœ‰æ›´æ–°DLLæˆ–è€…appsetting.jsonç­‰æ–‡ä»¶å‰”é™¤æ‰ã€‚åªä¿ç•™æœ¬æ¬¡è¦æ›´æ–°çš„æ–‡ä»¶å³å¯ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224182538878-810525913.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ä¿®æ”¹Dockerfileæ–‡ä»¶ï¼Œå› ä¸ºé»˜è®¤çš„Dockerfileæ–‡ä»¶æ˜¯åŒ…å«ç¼–è¯‘å‘å¸ƒçš„å‘½ä»¤ï¼Œæ‰€ä»¥è¿™é‡Œè¦å°†è¿™äº›ç›¸å…³å‘½ä»¤æ“ä½œåˆ é™¤æ‰ï¼›ä¿ç•™å¦‚ä¸‹å‘½ä»¤é…ç½®å³å¯ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224183009915-1313902784.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ä¿å­˜ç„¶åæäº¤åˆ°æ‰€æœ‰æ–‡ä»¶åˆ°gitæœåŠ¡å™¨ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æäº¤åçš„gitç›®å½•ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224183156750-1456602101.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å»ºè®®ï¼šæ— è®ºæ˜¯ä»£ç ç¼–è¯‘å‘å¸ƒå·¥ç¨‹è¿˜æ˜¯å·²ç¼–è¯‘çš„Releaseå·¥ç¨‹ï¼Œç¬¬ä¸€æ¬¡ä½¿ç”¨Dockeréƒ¨ç½²æ—¶æœ€å¥½å…ˆè‡ªå·±æ‰‹åŠ¨å°†è¿™äº›æ–‡ä»¶æ‹·è´åˆ°æœåŠ¡å™¨ï¼Œå¹¶æ‰‹åŠ¨æ„å»ºå¯¹è±¡å¹¶è¿è¡Œå®¹å™¨çœ‹æ˜¯å¦æˆåŠŸï¼›èƒ½å¦è®¿é—®ç½‘ç«™ã€‚ä¹Ÿå°±æ˜¯å…ˆä¸ç”¨Jenkinså°†è¿™äº›æµç¨‹è‡ªå·±æ‰‹åŠ¨èµ°ä¸€éï¼Œç¡®ä¿ä¸€äº›ç›®å½•åŒ…æ‹¬Dockerfileç­‰éƒ½æ˜¯é…ç½®æ­£ç¡®çš„ã€‚&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;é¡¹ç›®å·¥ç¨‹åˆ›å»ºå®Œæˆå¹¶æäº¤åˆ°gitæœåŠ¡å™¨åï¼Œå¼€å§‹åœ¨Jenkinsé‡Œé¢åˆ›å»ºä»»åŠ¡ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224193149311-865244008.png&quot; alt=&quot;&quot; width=&quot;704&quot; height=&quot;482&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;è¾“å…¥é¡¹ç›®æè¿°ï¼Œæºä»£ç ç®¡ç†é€‰æ‹©è‡ªå·±å¯¹åº”çš„å³å¯ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224193225394-1814339235.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;æˆ‘è¿™é‡Œé€‰æ‹©çš„gitã€‚ç¬¬ä¸€æ¬¡æ·»åŠ é¡¹ç›®æ—¶éœ€è¦æ·»åŠ ä¸€ç§æˆæƒæ–¹å¼ç‚¹å‡»å³è¾¹æ·»åŠ æŒ‰é’®å³å¯ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224183752139-1109237736.png&quot; alt=&quot;&quot; width=&quot;687&quot; height=&quot;234&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;é€‰æ‹©æ·»åŠ æˆæƒæ–¹å¼ å¸¸ç”¨çš„å°±æ˜¯ç”¨æˆ·ååŠ å¯†ç æˆ–è€…SSHæ–¹å¼ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224183858474-1672407212.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;ä¸‹ä¸€æ­¥è®¾ç½®æ„å»ºç¯å¢ƒ&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224183957636-966022869.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;è®¾ç½®è§¦å‘å™¨ï¼Œè¿™é‡Œä¸»è¦æ˜¯è®¾ç½®è‡ªåŠ¨è§¦å‘æ¡ä»¶ï¼Œæœ‰å®šæ—¶æ„å»ºã€è¿œç¨‹è§¦å‘æ„å»ºã€è½®è¯¢SCMã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;è¿™é‡Œåªè®¾ç½®è½®è¯¢SCMå½¢å¼çš„ï¼Œå¾ˆç®€å•çš„æ–¹å¼ã€‚æ„æ€æ˜¯åœ¨æŒ‡å®šé—´éš”æ—¶é—´å†…ä¼šå»è½®è¯¢gitæˆ–svnä¸­ç‰ˆæœ¬æ˜¯å¦æœ‰å˜åŒ–ã€‚å¦‚æœæœ‰å°±ç«‹å³æ„å»ºè¯¥é¡¹ç›®ã€‚å…¶å®å°±æ˜¯åšåˆ°åªè¦ä»£ç æäº¤äº† åˆ™ç«‹åˆ»å°±èƒ½è‡ªåŠ¨æ„å»ºé¡¹ç›®è¿›è¡Œå‘å¸ƒï¼›ä¸åœ¨éœ€è¦å…¶ä»–ä»»ä½•æ“ä½œäº†ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224184205222-847025462.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;é€‰æ‹©æ„å»ºâ€”&amp;gt;æ‰§è¡Œshell;å½“ç„¶æˆ‘ä»¬è¿™é‡Œæ˜¯linuxæœåŠ¡å™¨æ‰€æœ‰å¤šæ•°é€‰æ‹©æ‰§è¡Œshellã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224184756535-1693912725.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æ·»åŠ shell å‘½ä»¤ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224184840972-1685252577.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;æ³¨æ„ä¸‹é¢çš„webtest æ”¹ä¸ºè‡ªå·±çš„å®¹å™¨åç§°å’Œå¯¹åº”é•œåƒåç§°å³å¯ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
#!/bin/&lt;span&gt;bash
# è·å–çŸ­ç‰ˆæœ¬å·
GITHASH&lt;/span&gt;=`git rev-parse --&lt;span&gt;short&lt;/span&gt;&lt;span&gt; HEAD`
docker stop webtest
docker &lt;/span&gt;&lt;span&gt;rm&lt;/span&gt;&lt;span&gt; webtest
&lt;/span&gt;&lt;span&gt;echo&lt;/span&gt; ---------------Building Docker Image...------------------&lt;span&gt;
docker build &lt;/span&gt;-&lt;span&gt;t webtest:$GITHASH .
docker tag webtest:$GITHASH webtest:latest
&lt;/span&gt;&lt;span&gt;echo&lt;/span&gt; ---------------Launching Container...------------------&lt;span&gt;
docker run &lt;/span&gt;--name webtest -d -p &lt;span&gt;8005&lt;/span&gt;:&lt;span&gt;80&lt;/span&gt; webtest:latest 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;ä½¿ç”¨gitæäº¤ä»£ç è¿›è¡Œæµ‹è¯•ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224185241042-500183426.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;è‡ªåŠ¨å¼€å§‹æ„å»ºäº† æ³¨æ„jenkinsè¿™é‡Œæ—¶é—´æ˜¯é»˜è®¤æ˜¯utcæ—¶é—´ã€‚utcæ—¶é—´è½¬æ¢æˆ‘ä»¬åŒ—äº¬æ—¶é—´æ˜¯è¦+8å°æ—¶çš„ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224185456799-637738902.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;è“è‰²å›¾æ ‡ä»£è¡¨æ„å»ºæˆåŠŸï¼Œå¦‚æœå¤±è´¥ä¼šæ˜¯çº¢è‰²&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Â &lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224185614436-1159409259.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºä¿¡æ¯ï¼Œå°¤å…¶æ„å»ºå¤±è´¥æ—¶èƒ½å¤Ÿä»é‡Œé¢è·å–åˆ°å¤±è´¥åŸå› ç­‰ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224185720268-1225603920.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æ§åˆ¶è¾“å‡ºå¦‚ä¸‹å›¾æ‰€ç¤º&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224185811245-1479416886.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æ„å»ºæˆåŠŸåæˆ‘ä»¬åˆ°æœåŠ¡å™¨æ£€æŸ¥ä¸‹æ˜¯å¦æœ‰åˆšåˆšæ„å»ºçš„é•œåƒå’Œè¿è¡Œçš„å®¹å™¨ã€‚(å½“ç„¶ä¸€èˆ¬æƒ…å†µä¸‹åªè¦æ„å»ºæˆåŠŸè¿™ä¸¤æ­¥å¯ä»¥ä¸ç”¨æ£€æŸ¥)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æŸ¥çœ‹é•œåƒ&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224185839300-1405877496.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æŸ¥çœ‹è¿è¡Œçš„å®¹å™¨&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224185854685-1606274176.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;è®¿é—®ç«™ç‚¹çœ‹èƒ½å¦è®¿é—®æˆåŠŸã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/554879/201912/554879-20191224190057323-1761894863.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;

</description>
<pubDate>Tue, 24 Dec 2019 11:39:00 +0000</pubDate>
<dc:creator>Cfan1236</dc:creator>
<og:description>è¿™æ¬¡æ•´ç†çš„æ–‡æ¡£æ˜¯Jenkins+Dockerå®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œå¾ˆæ—©ä¹‹å‰å°±å†™çš„ï¼Œä»Šå¤©æœ‰æ—¶é—´å°±æ¬åˆ°åšå®¢å›­åšä¸ªè®°å½•ã€‚ Jenkinsæ˜¯åŸºäºJavaå¼€å‘çš„ä¸€ç§æŒç»­é›†æˆå·¥å…·ï¼Œä¸»è¦ç”¨äºæŒç»­ã€è‡ªåŠ¨çš„æ„å»º/æµ‹è¯•è½¯ä»¶ç­‰ç›¸</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/rui1236/p/12092775.html</dc:identifier>
</item>
<item>
<title>AWS EC2 æ­å»º Hadoop å’Œ Spark é›†ç¾¤ - massquantity</title>
<link>http://www.cnblogs.com/massquantity/p/12088449.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/massquantity/p/12088449.html</guid>
<description>&lt;h2 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;æœ¬ç¯‡æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ AWS EC2 äº‘æœåŠ¡æ­å»ºé›†ç¾¤ã€‚å½“ç„¶åœ¨åªæœ‰ä¸€å°è®¡ç®—æœºçš„æƒ…å†µä¸‹æ­å»ºå®Œå…¨åˆ†å¸ƒå¼é›†ç¾¤ï¼Œè¿˜æœ‰å¦å¤–å‡ ç§æ–¹æ³•ï¼šä¸€ç§æ˜¯æœ¬åœ°æ­å»ºå¤šå°è™šæ‹Ÿæœºï¼Œå¥½å¤„æ˜¯å…è´¹æ˜“æ“æ§ï¼Œåå¤„æ˜¯è™šæ‹Ÿæœºå¯¹å®¿ä¸»æœºé…ç½®è¦æ±‚è¾ƒé«˜ï¼Œæˆ‘å°±ä¸€å°æ™®é€šçš„ç¬”è®°æœ¬ï¼Œå¼€ä¸¤ä¸‰ä¸ªè™šæ‹Ÿæœºå®åœ¨æ‰¿å—ä¸èµ·ï¼› å¦ä¸€ç§æ–¹æ¡ˆæ˜¯ä½¿ç”¨ &lt;a href=&quot;https://docs.aws.amazon.com/zh_cn/emr/latest/ManagementGuide/emr-overview.html&quot;&gt;&lt;span&gt;AWS EMR&lt;/span&gt;&lt;/a&gt; ï¼Œæ˜¯äºšé©¬é€Šä¸“é—¨è®¾è®¡çš„é›†ç¾¤å¹³å°ï¼Œèƒ½å¿«é€Ÿå¯åŠ¨é›†ç¾¤ï¼Œä¸”å…·æœ‰è¾ƒé«˜çš„çµæ´»æ€§å’Œæ‰©å±•æ€§ï¼Œèƒ½æ–¹ä¾¿åœ°å¢åŠ æœºå™¨ã€‚ç„¶è€Œå…¶ç¼ºç‚¹æ˜¯åªèƒ½ä½¿ç”¨é¢„è®¾çš„è½¯ä»¶ï¼Œå¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;p&gt;å¦‚æœè¦å¦å¤–è£…è½¯ä»¶ï¼Œåˆ™éœ€è¦ä½¿ç”¨ Bootstrap è„šæœ¬ï¼Œè¯¦è§ &lt;a href=&quot;https://docs.aws.amazon.com/zh_cn/emr/latest/ManagementGuide/emr-plan-software.html?shortFooter=true&quot;&gt;&lt;span&gt;https://docs.aws.amazon.com/zh_cn/emr/latest/ManagementGuide/emr-plan-software.html?shortFooter=true&lt;/span&gt;&lt;/a&gt; ï¼Œå¯è¿™å¹¶ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹æƒ…ï¼Œè®°å¾—ä¹‹å‰æƒ³åœ¨ä¸Šé¢è£…è…¾è®¯çš„ &lt;a href=&quot;https://github.com/Angel-ML/angel&quot;&gt;&lt;span&gt;Angel&lt;/span&gt;&lt;/a&gt; å°±æ˜¯æ­»æ´»éƒ½è£…ä¸ä¸Šå»ã€‚ å¦å¤–ï¼Œå¦‚æœåœ¨ EMR ä¸Šå…³é—­äº†é›†ç¾¤ï¼Œåˆ™é‡Œé¢çš„æ–‡ä»¶å’Œé…ç½®éƒ½ä¸ä¼šä¿å­˜ï¼Œä¸‹æ¬¡ä½¿ç”¨æ—¶å…¨éƒ¨è¦é‡æ–°è®¾ç½®ï¼Œå¯è§å…¶æ¯”è¾ƒé€‚ç”¨äºä¸€æ¬¡æ€§ä½¿ç”¨çš„åœºæ™¯ã€‚&lt;/p&gt;
&lt;p&gt;ç»¼ä¸Šæ‰€è¿°ï¼Œå¦‚æœä½¿ç”¨çº¯ EC2 è¿›è¡Œæ‰‹å·¥æ­å»ºï¼Œåˆ™æ—¢ä¸ä¼šå—æœ¬åœ°èµ„æºé™åˆ¶ï¼Œä¹Ÿå…·æœ‰è¾ƒé«˜çš„çµæ´»æ€§ï¼Œå¯ä»¥éšæ„é…ç½®å®‰è£…è½¯ä»¶ã€‚è€Œå…¶ç¼ºç‚¹å°±æ˜¯è¦æ‰‹å·¥æ­å»ºè¦è€—è´¹è¾ƒå¤šæ—¶é—´ï¼Œè€Œä¸”åœ¨äº‘ä¸Šæ“ä½œå’Œåœ¨æœ¬åœ°æ“ä½œæœ‰äº›åœ°æ–¹æ˜¯ä¸ä¸€æ ·çš„ï¼Œåªè¦æœ‰ä¸€æ­¥å‡ºé”™å¯èƒ½å°±è¦å¡å£³å¾ˆä¹…ï¼Œé‰´äºç½‘ä¸Šç”¨ EC2 æ­å»ºè¿™æ–¹é¢èµ„æ–™å¾ˆå°‘ï¼Œå› æ­¤è¿™é‡Œå†™ä¸€ç¯‡æ–‡ç« æŠŠä¸»è¦æµç¨‹è®°å½•ä¸‹æ¥ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä¹‹å‰æ²¡æœ‰ä½¿ç”¨è¿‡ EC2ï¼Œå¯èƒ½éœ€è¦èŠ±ä¸€æ®µæ—¶é—´ç†Ÿæ‚‰ï¼Œæ¯”å¦‚æ³¨å†Œä»¥åŠåˆ›å»ºå¯†é’¥å¯¹ç­‰æ­¥éª¤ï¼Œå®˜æ–¹æä¾›äº†ç›¸å…³&lt;a href=&quot;https://aws.amazon.com/cn/getting-started/tutorials/launch-a-virtual-machine/?trk=gs_card&amp;amp;e=gs&amp;amp;p=gsrc&quot;&gt;&lt;span&gt;æ•™ç¨‹&lt;/span&gt;&lt;/a&gt; ã€‚å¦å¤–æˆ‘çš„æœ¬åœ°æœºå’Œäº‘ç«¯æœºä½¿ç”¨çš„éƒ½æ˜¯ Ubuntu 16.04 LTS 64ä½ï¼Œå¦‚æœä½ çš„æœ¬åœ°æœºæ˜¯ Windowsï¼Œåˆ™éœ€è¦ç”¨ Git æˆ– PuTTY è¿æ¥äº‘ç«¯æœºï¼Œè¯¦æƒ…å‚é˜… &lt;a href=&quot;https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/putty.html&quot;&gt;&lt;span&gt;https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/putty.html&lt;/span&gt;&lt;/a&gt; ã€‚&lt;/p&gt;

&lt;h2 id=&quot;åˆ›å»º-ec2-å®ä¾‹&quot;&gt;åˆ›å»º EC2 å®ä¾‹&lt;/h2&gt;
&lt;p&gt;ä¸‹é¢æ­£å¼å¼€å§‹ï¼Œè¿™é‡Œè®¾ç«‹ä¸‰å°æœºå™¨ (å®ä¾‹)ï¼Œä¸€å°ä½œä¸»èŠ‚ç‚¹ (master node)ï¼Œä¸¤å°ä½œä»èŠ‚ç‚¹ (slaves node)ã€‚é¦–å…ˆåˆ›å»ºå®ä¾‹ï¼Œé€‰æ‹© &lt;code&gt;Ubuntu Server 16.04 LTS (HVM)&lt;/code&gt; ï¼Œå®ä¾‹ç±»å‹é€‰æ‹©ä»·æ ¼ä½å»‰çš„ &lt;code&gt;t2.medium&lt;/code&gt; ã€‚å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ç”¨ï¼Œå°±ä¸è¦é€‰ä»·æ ¼å¤ªé«˜çš„ç±»å‹äº†ï¼Œä¸ç„¶ä¸‡ä¸€æ“ä½œå¤±è¯¯äº†æ¯æœˆè´¦å•å¯æ‰¿å—ä¸èµ·ã€‚&lt;/p&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;center&gt;

&lt;/center&gt;

&lt;p&gt;åœ¨ç¬¬ 3 æ­¥ä¸­ï¼Œå› ä¸ºè¦åŒæ—¶å¼€ä¸‰å°æœºå™¨ï¼Œ&lt;code&gt;Number of Instances&lt;/code&gt; å¯ä»¥ç›´æ¥é€‰æ‹©3ã€‚ä½†å¦‚æœæ˜¯æ¯å°åˆ†åˆ«å¼€çš„è¯ï¼Œä¸‹é¢çš„ Subnet éƒ½è¦é€‰æ‹©åŒä¸€ä¸ªåŒºåŸŸï¼Œä¸ç„¶æœºå™¨é—´æ— æ³•é€šä¿¡ï¼Œè¯¦æƒ…å‚é˜… &lt;a href=&quot;https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/using-regions-availability-zones.html&quot;&gt;&lt;span&gt;https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/using-regions-availability-zones.html&lt;/span&gt;&lt;/a&gt; ã€‚&lt;/p&gt;
&lt;center&gt;

&lt;/center&gt;

&lt;p&gt;ç¬¬ 4 æ­¥è®¾ç½®ç¡¬ç›˜å¤§å°ï¼Œå¦‚æœå°±æ­ä¸ªé›†ç¾¤å¯èƒ½ä¸ç”¨åŠ¨ï¼Œå¦‚æœè¿˜è¦è£…å…¶ä»–è½¯ä»¶ï¼Œå¯èƒ½å°±éœ€è¦åœ¨è¿™é‡Œå¢åŠ å®¹é‡äº†ï¼Œæˆ‘æ˜¯å¢åŠ åˆ°äº† 15 GBï¼š&lt;/p&gt;
&lt;center&gt;

&lt;/center&gt;

&lt;p&gt;ç¬¬ 5 å’Œç¬¬ 6 æ­¥ç›´æ¥Next å³å¯ï¼Œåˆ°ç¬¬ 7 æ­¥ Launch åé€‰æ‹©æˆ–æ–°å»ºå¯†é’¥å¯¹ï¼Œå°±èƒ½å¾—åˆ°åˆ›å»ºå¥½çš„ 3 ä¸ªå®ä¾‹ï¼Œè¿™é‡Œå¯ä»¥è®¾ç½®åç§°å¤‡æ³¨ï¼Œå¦‚ masterã€slave01ã€slave02 ç­‰ï¼š&lt;/p&gt;
&lt;center&gt;

&lt;/center&gt;

&lt;p&gt;å¼€å¯ 3 ä¸ªç»ˆç«¯çª—å£ï¼Œssh è¿æ¥3ä¸ªå®ä¾‹ï¼Œå¦‚ &lt;code&gt;ssh -i xxxx.pem ubuntu@ec2-xx-xxx-xxx-xx.us-west-2.compute.amazonaws.com&lt;/code&gt; ï¼Œå…¶ä¸­ &lt;code&gt;xxxx.pem&lt;/code&gt; æ˜¯ä½ çš„æœ¬åœ°å¯†é’¥å¯¹åç§°ï¼Œ&lt;code&gt;ec2-xx-xxx-xxx-xx.us-west-2.compute.amazonaws.com&lt;/code&gt; æ˜¯è¯¥å®ä¾‹çš„å¤–éƒ¨ DNS ä¸»æœºåï¼Œæ¯å°å®ä¾‹éƒ½ä¸ä¸€æ ·ã€‚è¿™é‡Œéœ€è¦è¯´æ˜ä¸€ä¸‹ï¼Œå› ä¸ºè¿™æ˜¯å’Œæœ¬åœ°å¼€è™šæ‹Ÿæœºçš„ä¸åŒä¹‹å¤„ï¼š EC2 çš„å®ä¾‹éƒ½æœ‰&lt;strong&gt;å…¬æœ‰ IP&lt;/strong&gt; å’Œ&lt;strong&gt;ç§æœ‰ IP&lt;/strong&gt; ä¹‹åˆ†ï¼Œç§æœ‰ IP ç”¨äºäº‘ä¸Šå®ä¾‹ä¹‹é—´çš„é€šä¿¡ï¼Œè€Œå…¬æœ‰ IP åˆ™ç”¨äºä½ çš„æœ¬åœ°æœºä¸å®ä¾‹ä¹‹é—´çš„é€šä¿¡ï¼Œå› æ­¤è¿™é‡Œ ssh è¿æ¥ä½¿ç”¨çš„æ˜¯å…¬æœ‰ IP (DNS) ã€‚åœ¨ä¸‹é¢æ­å»ºé›†ç¾¤çš„æ­¥éª¤ä¸­ä¹Ÿæœ‰éœ€è¦å¡«å†™å…¬æœ‰å’Œç§æœ‰ IP ï¼Œæ³¨æ„ä¸è¦å¡«åäº†ã€‚å…³äºäºŒè€…çš„åŒºåˆ«å‚é˜… &lt;a href=&quot;https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/using-instance-addressing.html?shortFooter=true#using-instance-addressing-common&quot;&gt;&lt;span&gt;https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/using-instance-addressing.html?shortFooter=true#using-instance-addressing-common&lt;/span&gt;&lt;/a&gt; ã€‚&lt;/p&gt;

&lt;h2 id=&quot;æ–°å¢-hadoop-ç”¨æˆ·å®‰è£…-java-ç¯å¢ƒ&quot;&gt;æ–°å¢ hadoop ç”¨æˆ·ã€å®‰è£… Java ç¯å¢ƒ&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸‹ä»¥ master èŠ‚ç‚¹ä¸ºä¾‹ã€‚ç™»é™†å®ä¾‹åï¼Œé»˜è®¤ç”¨æˆ·ä¸º ubuntuï¼Œé¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ª hadoop ç”¨æˆ·ï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;$ sudo useradd -m hadoop -s /bin/bash   # å¢åŠ  hadoopç”¨æˆ·
$ sudo passwd hadoop                    # è®¾ç½®å¯†ç ï¼Œéœ€è¦è¾“å…¥ä¸¤æ¬¡
$ sudo adduser hadoop sudo              # ä¸º hadoop ç”¨æˆ·å¢åŠ ç®¡ç†å‘˜æƒé™
$ su hadoop                             # åˆ‡æ¢åˆ° hadoop ç”¨æˆ·ï¼Œéœ€è¦è¾“å…¥å¯†ç 
$ sudo apt-get update                   # æ›´æ–° apt æº&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™ä¸€æ­¥å®Œæˆä¹‹åï¼Œç»ˆç«¯ç”¨æˆ·åä¼šå˜ä¸º hadoopï¼Œä¸” &lt;code&gt;/home&lt;/code&gt; ç›®å½•ä¸‹ä¼šå¦å¤–ç”Ÿæˆä¸€ä¸ª hadoop æ–‡ä»¶å¤¹ã€‚&lt;/p&gt;
&lt;center&gt;

&lt;/center&gt;

&lt;p&gt;Hadoop ä¾èµ–äº Java ç¯å¢ƒï¼Œæ‰€ä»¥æ¥ä¸‹æ¥éœ€è¦å…ˆå®‰è£… JDKï¼Œç›´æ¥ä»&lt;a href=&quot;https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html&quot;&gt;å®˜ç½‘&lt;/a&gt;ä¸‹è½½ï¼Œè¿™é‡Œä¸‹çš„æ˜¯ &lt;code&gt;Linux x64&lt;/code&gt; ç‰ˆæœ¬ &lt;code&gt;jdk-8u231-linux-x64.tar.gz&lt;/code&gt; ï¼Œç”¨ scp è¿œç¨‹ä¼ è¾“åˆ° master æœºã€‚æ³¨æ„è¿™é‡Œåªèƒ½ä¼ è¾“åˆ° ubuntu ç”¨æˆ·ä¸‹ï¼Œä¼ åˆ° hadoop ç”¨æˆ·ä¸‹å¯èƒ½ä¼šæç¤ºæƒé™ä¸è¶³ã€‚&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;$ scp -i xxx.pem jdk-8u231-linux-x64.tar.gz ubuntu@ec2-xx-xxx-xxx-xx.us-west-2.compute.amazonaws.com:/home/ubuntu/  # æœ¬åœ°æ‰§è¡Œè¯¥å‘½ä»¤&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æœ¬ç¯‡å‡è®¾æ‰€æœ‰è½¯ä»¶éƒ½å®‰è£…åœ¨ &lt;code&gt;/usr/lib&lt;/code&gt; ç›®å½•ä¸‹ï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;$ sudo mv /home/ubuntu/jdk-8u231-linux-x64.tar.gz /home/hadoop         # å°†æ–‡ä»¶ç§»åŠ¨åˆ° hadoop ç”¨æˆ·ä¸‹
$ sudo tar -zxf /home/hadoop/jdk-8u231-linux-x64.tar.gz -C /usr/lib/   # æŠŠJDKæ–‡ä»¶è§£å‹åˆ°/usr/libç›®å½•ä¸‹
$ sudo mv /usr/lib/jdk1.8.0_231  /usr/lib/java                         # é‡å‘½åjavaæ–‡ä»¶å¤¹
$ vim ~/.bashrc                                                        # é…ç½®ç¯å¢ƒå˜é‡ï¼Œè²Œä¼¼EC2åªèƒ½ä½¿ç”¨ vim&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;export JAVA_HOME=/usr/lib/java
export JRE_HOME=${JAVA_HOME}/jre
export CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib
export PATH=${JAVA_HOME}/bin:$PATH&lt;/code&gt;
&lt;/pre&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;$ source ~/.bashrc   # è®©é…ç½®æ–‡ä»¶ç”Ÿæ•ˆ
$ java -version    # æŸ¥çœ‹ Java æ˜¯å¦å®‰è£…æˆåŠŸ&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚æœå‡ºç°ä»¥ä¸‹æç¤ºåˆ™è¡¨ç¤ºå®‰è£…æˆåŠŸï¼š&lt;/p&gt;
&lt;center&gt;

&lt;/center&gt;

&lt;p&gt;&lt;strong&gt;åœ¨ master èŠ‚ç‚¹å®Œæˆä¸Šè¿°æ­¥éª¤åï¼Œåœ¨ä¸¤ä¸ª slave èŠ‚ç‚¹å®ŒæˆåŒæ ·çš„æ­¥éª¤ (æ–°å¢ hadoop ç”¨æˆ·ã€å®‰è£… Java ç¯å¢ƒ)&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&quot;ç½‘ç»œé…ç½®&quot;&gt;ç½‘ç»œé…ç½®&lt;/h2&gt;
&lt;p&gt;è¿™ä¸€æ­¥æ˜¯ä¸ºäº†ä¾¿äº Master å’Œ Slave èŠ‚ç‚¹è¿›è¡Œç½‘ç»œé€šä¿¡ï¼Œåœ¨é…ç½®å‰è¯·å…ˆç¡®å®šæ˜¯ä»¥ hadoop ç”¨æˆ·ç™»å½•çš„ã€‚é¦–å…ˆä¿®æ”¹å„ä¸ªèŠ‚ç‚¹çš„ä¸»æœºåï¼Œæ‰§è¡Œ &lt;code&gt;sudo vim /etc/hostname&lt;/code&gt; ï¼Œåœ¨ master èŠ‚ç‚¹ä¸Šå°† &lt;code&gt;ip-xxx-xx-xx-xx&lt;/code&gt; å˜æ›´ä¸º &lt;code&gt;Master&lt;/code&gt; ã€‚å…¶ä»–èŠ‚ç‚¹ç±»ä¼¼ï¼Œåœ¨ slave01 èŠ‚ç‚¹ä¸Šå˜æ›´ä¸º Slave01ï¼Œslave02 èŠ‚ç‚¹ä¸Šä¸º Slave02ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åæ‰§è¡Œ &lt;code&gt;sudo vim /etc/hosts&lt;/code&gt; ä¿®æ”¹è‡ªå·±æ‰€ç”¨èŠ‚ç‚¹çš„IPæ˜ å°„ï¼Œä»¥ master èŠ‚ç‚¹ä¸ºä¾‹ï¼Œæ·»åŠ çº¢è‰²åŒºåŸŸå†…ä¿¡æ¯ï¼Œæ³¨æ„è¿™é‡Œçš„ IP åœ°å€æ˜¯ä¸Šæ–‡æ‰€è¿°çš„ç§æœ‰ IPï¼š&lt;/p&gt;
&lt;center&gt;

&lt;/center&gt;

&lt;p&gt;æ¥ç€åœ¨ä¸¤ä¸ª slave èŠ‚ç‚¹çš„hostsä¸­æ·»åŠ åŒæ ·çš„ä¿¡æ¯ã€‚å®Œæˆåé‡å¯ä¸€ä¸‹ï¼Œåœ¨è¿›å…¥ hadoop ç”¨æˆ·ï¼Œèƒ½çœ‹åˆ°æœºå™¨åçš„å˜åŒ– (å˜æˆ Master äº†)ï¼š&lt;/p&gt;
&lt;center&gt;

&lt;/center&gt;

&lt;p&gt;å¯¹äº ec2 å®ä¾‹æ¥è¯´ï¼Œè¿˜éœ€è¦é…ç½®å®‰å…¨ç»„ (Security groups)ï¼Œä½¿å®ä¾‹èƒ½å¤Ÿäº’ç›¸è®¿é—® ï¼š&lt;/p&gt;
&lt;center&gt;

&lt;/center&gt;

&lt;p&gt;é€‰æ‹©åˆ’çº¿åŒºåŸŸï¼Œæˆ‘å› ä¸ºæ˜¯åŒæ—¶å»ºç«‹äº†ä¸‰å°å®ä¾‹ï¼Œæ‰€ä»¥å®‰å…¨ç»„éƒ½ä¸€æ ·ï¼Œå¦‚æœä¸æ˜¯åŒæ—¶å»ºç«‹çš„ï¼Œè¿™å¯èƒ½ä¸‰å°éƒ½è¦é…ç½®ã€‚&lt;/p&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;p&gt;è¿›å…¥åç‚¹å‡» &lt;code&gt;Inbound&lt;/code&gt; å†ç‚¹ &lt;code&gt;Edit&lt;/code&gt; ï¼Œå†ç‚¹å‡» &lt;code&gt;Add Rule&lt;/code&gt;ï¼Œé€‰æ‹©é‡Œé¢çš„ &lt;code&gt;All Traffic&lt;/code&gt; ï¼Œæ¥ç€ä¿å­˜é€€å‡ºï¼š&lt;/p&gt;
&lt;center&gt;

&lt;/center&gt;

&lt;p&gt;ä¸‰å°å®ä¾‹éƒ½è®¾ç½®å®Œæˆåï¼Œéœ€è¦äº’ç›¸ ping ä¸€ä¸‹æµ‹è¯•ã€‚å¦‚æœ ping ä¸é€šï¼Œåé¢æ˜¯ä¸ä¼šæˆåŠŸçš„ï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;$ ping Master -c 3   # åˆ†åˆ«åœ¨3å°æœºå™¨ä¸Šæ‰§è¡Œè¿™ä¸‰ä¸ªå‘½ä»¤
$ ping Slave01 -c 3
$ ping Slave02 -c 3&lt;/code&gt;
&lt;/pre&gt;
&lt;center&gt;

&lt;/center&gt;

&lt;p&gt;æ¥ä¸‹æ¥å®‰è£… SSH serverï¼Œ SSH æ˜¯ä¸€ç§ç½‘ç»œåè®®ï¼Œç”¨äºè®¡ç®—æœºä¹‹é—´çš„åŠ å¯†ç™»å½•ã€‚å®‰è£…å®Œ SSH åï¼Œè¦è®© Master èŠ‚ç‚¹å¯ä»¥æ— å¯†ç  SSH ç™»é™†åˆ°å„ä¸ª Slave èŠ‚ç‚¹ä¸Šï¼Œåœ¨MasterèŠ‚ç‚¹æ‰§è¡Œï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;$ sudo apt-get install openssh-server
$ ssh localhost                                         # ä½¿ç”¨ ssh ç™»é™†æœ¬æœºï¼Œéœ€è¦è¾“å…¥ yes å’Œ å¯†ç 
$ exit                                                  # é€€å‡ºåˆšæ‰çš„ ssh localhost, æ³¨æ„ä¸è¦é€€å‡ºhadoopç”¨æˆ·
$ cd ~/.ssh/                                            # è‹¥æ²¡æœ‰è¯¥ç›®å½•ï¼Œè¯·å…ˆæ‰§è¡Œä¸€æ¬¡ssh localhost
$ ssh-keygen -t rsa                                     # åˆ©ç”¨ ssh-keygen ç”Ÿæˆå¯†é’¥ï¼Œä¼šæœ‰æç¤ºï¼Œç–¯ç‹‚æŒ‰å›è½¦å°±è¡Œ
$ cat ./id_rsa.pub &amp;gt;&amp;gt; ./authorized_keys                 # å°†å¯†é’¥åŠ å…¥æˆæƒ
$ scp ~/.ssh/id_rsa.pub Slave01:/home/hadoop/           # å°†å¯†é’¥ä¼ åˆ° Slave01 èŠ‚ç‚¹
$ scp ~/.ssh/id_rsa.pub Slave02:/home/hadoop/           # å°†å¯†é’¥ä¼ åˆ° Slave02 èŠ‚ç‚¹&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ¥ç€åœ¨ Slave01å’Œ Slave02 èŠ‚ç‚¹ä¸Šï¼Œå°† ssh å…¬åŒ™åŠ å…¥æˆæƒï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;$ mkdir ~/.ssh       # å¦‚æœä¸å­˜åœ¨è¯¥æ–‡ä»¶å¤¹éœ€å…ˆåˆ›å»ºï¼Œè‹¥å·²å­˜åœ¨åˆ™å¿½ç•¥
$ cat ~/id_rsa.pub &amp;gt;&amp;gt; ~/.ssh/authorized_keys&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™æ ·ï¼Œåœ¨ Master èŠ‚ç‚¹ä¸Šå°±å¯ä»¥æ— å¯†ç  SSH åˆ°å„ä¸ª Slave èŠ‚ç‚¹äº†ï¼Œå¯åœ¨ Master èŠ‚ç‚¹ä¸Šæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤è¿›è¡Œæ£€éªŒï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºå˜ä¸º Slave01äº†ï¼Œå†æŒ‰ &lt;code&gt;exit&lt;/code&gt; å¯é€€å›åˆ° Masterï¼š&lt;/p&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;p&gt;&lt;span&gt;è‡³æ­¤ç½‘ç»œé…ç½®å®Œæˆã€‚&lt;/span&gt;&lt;/p&gt;

&lt;h2 id=&quot;å®‰è£…-hadoop&quot;&gt;å®‰è£… Hadoop&lt;/h2&gt;
&lt;p&gt;å»åˆ°é•œåƒç«™ &lt;a href=&quot;https://archive.apache.org/dist/hadoop/core/&quot;&gt;&lt;span&gt;https://archive.apache.org/dist/hadoop/core/&lt;/span&gt;&lt;/a&gt; ä¸‹è½½ï¼Œæˆ‘ä¸‹è½½çš„æ˜¯ &lt;code&gt;hadoop-2.8.4.tar.gz&lt;/code&gt; ã€‚åœ¨ Master èŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;$ sudo tar -zxf /home/ubuntu/hadoop-2.8.4.tar.gz -C /usr/lib     # è§£å‹åˆ°/usr/libä¸­
$ cd /usr/lib/
$ sudo mv ./hadoop-2.8.4/ ./hadoop                               # å°†æ–‡ä»¶å¤¹åæ”¹ä¸ºhadoop
$ sudo chown -R hadoop ./hadoop                                  # ä¿®æ”¹æ–‡ä»¶æƒé™&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å°† hadoop ç›®å½•åŠ åˆ°ç¯å¢ƒå˜é‡ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ä»»æ„ç›®å½•ä¸­ç›´æ¥ä½¿ç”¨ hadoopã€hdfs ç­‰å‘½ä»¤ã€‚æ‰§è¡Œ &lt;code&gt;vim ~/.bashrc&lt;/code&gt; ï¼ŒåŠ å…¥ä¸€è¡Œï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;export PATH=$PATH:/usr/lib/hadoop/bin:/usr/lib/hadoop/sbin&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¿å­˜åæ‰§è¡Œ &lt;code&gt;source ~/.bashrc&lt;/code&gt; ä½¿é…ç½®ç”Ÿæ•ˆã€‚&lt;/p&gt;

&lt;p&gt;å®Œæˆåå¼€å§‹ä¿®æ”¹ Hadoop é…ç½®æ–‡ä»¶(è¿™é‡Œä¹Ÿé¡ºä¾¿é…ç½®äº† Yarn)ï¼Œå…ˆæ‰§è¡Œ &lt;code&gt;cd /usr/lib/hadoop/etc/hadoop&lt;/code&gt; ï¼Œå…±æœ‰ 6 ä¸ªéœ€è¦ä¿®æ”¹ â€”â€” &lt;code&gt;hadoop-env.sh&lt;/code&gt;ã€&lt;code&gt;slaves&lt;/code&gt;ã€&lt;code&gt;core-site.xml&lt;/code&gt;ã€&lt;code&gt;hdfs-site.xml&lt;/code&gt;ã€&lt;code&gt;mapred-site.xml&lt;/code&gt;ã€&lt;code&gt;yarn-site.xml&lt;/code&gt; ã€‚&lt;/p&gt;

&lt;p&gt;1ã€æ–‡ä»¶ &lt;code&gt;hadoop-env.sh&lt;/code&gt; ä¸­æŠŠ &lt;code&gt;export JAVA_HOME=${JAVA_HOME}&lt;/code&gt; ä¿®æ”¹ä¸º &lt;code&gt;export JAVA_HOME=/usr/lib/java&lt;/code&gt; ï¼Œå³ Java å®‰è£…è·¯å¾„ã€‚&lt;/p&gt;

&lt;p&gt;2ã€ æ–‡ä»¶ &lt;code&gt;slaves&lt;/code&gt; æŠŠé‡Œé¢çš„ localhost æ”¹ä¸º Slave01å’Œ Slave02 ã€‚&lt;/p&gt;
&lt;center&gt;

&lt;/center&gt;

&lt;p&gt;3ã€&lt;code&gt;core-site.xml&lt;/code&gt; æ”¹ä¸ºå¦‚ä¸‹é…ç½®ï¼š&lt;/p&gt;
&lt;pre class=&quot;xml&quot;&gt;
&lt;code&gt;&amp;lt;configuration&amp;gt;
        &amp;lt;property&amp;gt;
                &amp;lt;name&amp;gt;fs.defaultFS&amp;lt;/name&amp;gt;
                &amp;lt;value&amp;gt;hdfs://Master:9000&amp;lt;/value&amp;gt;
        &amp;lt;/property&amp;gt;
        &amp;lt;property&amp;gt;
                &amp;lt;name&amp;gt;hadoop.tmp.dir&amp;lt;/name&amp;gt;
                &amp;lt;value&amp;gt;file:/usr/lib/hadoop/tmp&amp;lt;/value&amp;gt;
                &amp;lt;description&amp;gt;Abase for other temporary directories.&amp;lt;/description&amp;gt;
        &amp;lt;/property&amp;gt;
&amp;lt;/configuration&amp;gt;&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;4ã€&lt;code&gt;hdfs-site.xml&lt;/code&gt; æ”¹ä¸ºå¦‚ä¸‹é…ç½®ï¼š&lt;/p&gt;
&lt;pre class=&quot;xml&quot;&gt;
&lt;code&gt;&amp;lt;configuration&amp;gt;
        &amp;lt;property&amp;gt;
                &amp;lt;name&amp;gt;dfs.namenode.secondary.http-address&amp;lt;/name&amp;gt;
                &amp;lt;value&amp;gt;Master:50090&amp;lt;/value&amp;gt;
        &amp;lt;/property&amp;gt;
        &amp;lt;property&amp;gt;
                &amp;lt;name&amp;gt;dfs.replication&amp;lt;/name&amp;gt;
                &amp;lt;value&amp;gt;2&amp;lt;/value&amp;gt;
        &amp;lt;/property&amp;gt;
        &amp;lt;property&amp;gt;
                &amp;lt;name&amp;gt;dfs.namenode.name.dir&amp;lt;/name&amp;gt;
                &amp;lt;value&amp;gt;file:/usr/lib/hadoop/tmp/dfs/name&amp;lt;/value&amp;gt;
        &amp;lt;/property&amp;gt;
        &amp;lt;property&amp;gt;
                &amp;lt;name&amp;gt;dfs.datanode.data.dir&amp;lt;/name&amp;gt;
                &amp;lt;value&amp;gt;file:/usr/lib/hadoop/tmp/dfs/data&amp;lt;/value&amp;gt;
        &amp;lt;/property&amp;gt;
&amp;lt;/configuration&amp;gt;&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;5ã€æ–‡ä»¶ &lt;code&gt;mapred-site.xml&lt;/code&gt; (å¯èƒ½éœ€è¦å…ˆé‡å‘½åï¼Œé»˜è®¤æ–‡ä»¶åä¸º mapred-site.xml.template)ï¼š&lt;/p&gt;
&lt;pre class=&quot;xml&quot;&gt;
&lt;code&gt;&amp;lt;configuration&amp;gt;
        &amp;lt;property&amp;gt;
                &amp;lt;name&amp;gt;mapreduce.framework.name&amp;lt;/name&amp;gt;
                &amp;lt;value&amp;gt;yarn&amp;lt;/value&amp;gt;
        &amp;lt;/property&amp;gt;
        &amp;lt;property&amp;gt;
                &amp;lt;name&amp;gt;mapreduce.jobhistory.address&amp;lt;/name&amp;gt;
                &amp;lt;value&amp;gt;Master:10020&amp;lt;/value&amp;gt;
        &amp;lt;/property&amp;gt;
        &amp;lt;property&amp;gt;
                &amp;lt;name&amp;gt;mapreduce.jobhistory.webapp.address&amp;lt;/name&amp;gt;
                &amp;lt;value&amp;gt;Master:19888&amp;lt;/value&amp;gt;
        &amp;lt;/property&amp;gt;
&amp;lt;/configuration&amp;gt;&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;6ã€æ–‡ä»¶ &lt;code&gt;yarn-site.xml&lt;/code&gt; ï¼š&lt;/p&gt;
&lt;pre class=&quot;xml&quot;&gt;
&lt;code&gt;&amp;lt;configuration&amp;gt;
        &amp;lt;property&amp;gt;
                &amp;lt;name&amp;gt;yarn.resourcemanager.hostname&amp;lt;/name&amp;gt;
                &amp;lt;value&amp;gt;Master&amp;lt;/value&amp;gt;
        &amp;lt;/property&amp;gt;
        &amp;lt;property&amp;gt;
                &amp;lt;name&amp;gt;yarn.nodemanager.aux-services&amp;lt;/name&amp;gt;
                &amp;lt;value&amp;gt;mapreduce_shuffle&amp;lt;/value&amp;gt;
        &amp;lt;/property&amp;gt;
&amp;lt;/configuration&amp;gt;&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;é…ç½®å¥½åï¼Œå°† Master ä¸Šçš„ &lt;code&gt;/usr/lib/hadoop&lt;/code&gt; æ–‡ä»¶å¤¹å¤åˆ¶åˆ°å„ä¸ª slave èŠ‚ç‚¹ä¸Šã€‚åœ¨ Master èŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;$ cd /usr/lib
$ tar -zcf ~/hadoop.master.tar.gz ./hadoop   # å…ˆå‹ç¼©å†å¤åˆ¶
$ scp ~/hadoop.master.tar.gz Slave01:/home/hadoop
$ scp ~/hadoop.master.tar.gz Slave02:/home/hadoop&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åˆ†åˆ«åœ¨ä¸¤ä¸ª slave èŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;$ sudo tar -zxf ~/hadoop.master.tar.gz -C /usr/lib
$ sudo chown -R hadoop /usr/lib/hadoop&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å®‰è£…å®Œæˆåï¼Œé¦–æ¬¡å¯åŠ¨éœ€è¦å…ˆåœ¨ Master èŠ‚ç‚¹æ‰§è¡Œ NameNode çš„æ ¼å¼åŒ–ï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;$ hdfs namenode -format       # é¦–æ¬¡è¿è¡Œéœ€è¦æ‰§è¡Œåˆå§‹åŒ–ï¼Œä¹‹åä¸éœ€è¦&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æˆåŠŸçš„è¯ï¼Œä¼šçœ‹åˆ° â€œsuccessfully formattedâ€ å’Œ â€œExitting with status 0â€ çš„æç¤ºï¼Œè‹¥ä¸º â€œExitting with status 1â€ åˆ™æ˜¯å‡ºé”™ã€‚&lt;/p&gt;
&lt;center&gt;

&lt;/center&gt;

&lt;p&gt;æ¥ç€å¯ä»¥å¯åŠ¨ Hadoop å’Œ Yarn äº†ï¼Œå¯åŠ¨éœ€è¦åœ¨ Master èŠ‚ç‚¹ä¸Šè¿›è¡Œï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;$ start-dfs.sh
$ start-yarn.sh
$ mr-jobhistory-daemon.sh start historyserver&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é€šè¿‡å‘½ä»¤ &lt;code&gt;jps&lt;/code&gt; å¯ä»¥æŸ¥çœ‹å„ä¸ªèŠ‚ç‚¹æ‰€å¯åŠ¨çš„è¿›ç¨‹ã€‚æ­£ç¡®çš„è¯ï¼Œåœ¨ Master èŠ‚ç‚¹ä¸Šå¯ä»¥çœ‹åˆ° NameNodeã€ResourceManagerã€SecondrryNameNodeã€JobHistoryServer è¿›ç¨‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;p&gt;åœ¨ Slave èŠ‚ç‚¹å¯ä»¥çœ‹åˆ° DataNode å’Œ NodeManager è¿›ç¨‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;center&gt;

&lt;/center&gt;

&lt;p&gt;é€šè¿‡å‘½ä»¤ &lt;code&gt;hdfs dfsadmin -report&lt;/code&gt; å¯æŸ¥çœ‹é›†ç¾¤çŠ¶æ€ï¼Œå…¶ä¸­ &lt;code&gt;Live datanodes (2)&lt;/code&gt; è¡¨æ˜ä¸¤ä¸ªä»èŠ‚ç‚¹éƒ½å·²æ­£å¸¸å¯åŠ¨ï¼Œå¦‚æœæ˜¯ 0 åˆ™è¡¨ç¤ºä¸æˆåŠŸï¼š&lt;/p&gt;
&lt;center&gt;

&lt;/center&gt;

&lt;p&gt;å¯ä»¥é€šè¿‡ä¸‹åˆ—ä¸‰ä¸ªåœ°å€æŸ¥çœ‹ hadoop çš„ web UIï¼Œå…¶ä¸­ &lt;code&gt;ec2-xx-xxx-xxx-xx.us-west-2.compute.amazonaws.com&lt;/code&gt; æ˜¯è¯¥å®ä¾‹çš„å¤–éƒ¨ DNS ä¸»æœºåï¼Œ&lt;code&gt;50070ã€8088ã€19888&lt;/code&gt; åˆ†åˆ«æ˜¯ hadoopã€yarnã€JobHistoryServer çš„é»˜è®¤ç«¯å£ï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;ec2-xx-xxx-xxx-xx.us-west-2.compute.amazonaws.com:50070
ec2-xx-xxx-xxx-xx.us-west-2.compute.amazonaws.com:8088
ec2-xx-xxx-xxx-xx.us-west-2.compute.amazonaws.com:19888&lt;/code&gt;
&lt;/pre&gt;
&lt;center&gt;

&lt;/center&gt;

&lt;h2 id=&quot;æ‰§è¡Œ-hadoop-åˆ†å¸ƒå¼å®ä¾‹&quot;&gt;æ‰§è¡Œ Hadoop åˆ†å¸ƒå¼å®ä¾‹&lt;/h2&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;$ hadoop fs -mkdir -p /user/hadoop   # åœ¨hdfsä¸Šåˆ›å»ºhadoopè´¦æˆ·
$ hadoop fs -mkdir input
$ hadoop fs -put /usr/lib/hadoop/etc/hadoop/*.xml input  # å°†hadoopé…ç½®æ–‡ä»¶å¤åˆ¶åˆ°hdfsä¸­
$ hadoop jar /usr/lib/hadoop/share/hadoop/mapreduce/hadoop-mapreduce-examples-*.jar grep input output 'dfs[a-z.]+'  # è¿è¡Œå®ä¾‹&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚æœæˆåŠŸå¯ä»¥çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼š&lt;/p&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;center&gt;

&lt;/center&gt;

&lt;p&gt;æœ€åå…³é—­ Hadoop é›†ç¾¤éœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;$ stop-yarn.sh
$ stop-dfs.sh
$ mr-jobhistory-daemon.sh stop historyserver&lt;/code&gt;
&lt;/pre&gt;

&lt;h2 id=&quot;å®‰è£…-spark&quot;&gt;å®‰è£… Spark&lt;/h2&gt;
&lt;p&gt;å»åˆ°é•œåƒç«™ &lt;a href=&quot;https://archive.apache.org/dist/spark/&quot;&gt;&lt;span&gt;https://archive.apache.org/dist/spark/&lt;/span&gt;&lt;/a&gt; ä¸‹è½½ï¼Œç”±äºä¹‹å‰å·²ç»å®‰è£…äº†Hadoopï¼Œæ‰€ä»¥æˆ‘ä¸‹è½½çš„æ˜¯æ—  Hadoop ç‰ˆæœ¬çš„ï¼Œå³ &lt;code&gt;spark-2.3.3-bin-without-hadoop.tgz&lt;/code&gt; ã€‚åœ¨ Master èŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;$ sudo tar -zxf /home/ubuntu/spark-2.3.3-bin-without-hadoop.tgz -C /usr/lib  # è§£å‹åˆ°/usr/libä¸­
$ cd /usr/lib/
$ sudo mv ./spark-2.3.3-bin-without-hadoop/ ./spark  # å°†æ–‡ä»¶å¤¹åæ”¹ä¸ºspark
$ sudo chown -R hadoop ./spark                        # ä¿®æ”¹æ–‡ä»¶æƒé™&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å°† spark ç›®å½•åŠ åˆ°ç¯å¢ƒå˜é‡ï¼Œæ‰§è¡Œ &lt;code&gt;vim ~/.bashrc&lt;/code&gt; æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;export SPARK_HOME=/usr/lib/spark
export PATH=$PATH:$SPARK_HOME/bin:$SPARK_HOME/sbin&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¿å­˜åæ‰§è¡Œ &lt;code&gt;source ~/.bashrc&lt;/code&gt; ä½¿é…ç½®ç”Ÿæ•ˆã€‚&lt;/p&gt;

&lt;p&gt;æ¥ç€éœ€è¦é…ç½®äº†ä¸¤ä¸ªæ–‡ä»¶ï¼Œå…ˆæ‰§è¡Œ &lt;code&gt;cd /usr/lib/spark/conf&lt;/code&gt; ã€‚&lt;/p&gt;
&lt;p&gt;1ã€ é…ç½® &lt;code&gt;slaves&lt;/code&gt; æ–‡ä»¶&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;mv slaves.template slaves  # å°†slaves.templateé‡å‘½åä¸ºslaves&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;slavesæ–‡ä»¶è®¾ç½®ä»èŠ‚ç‚¹ã€‚ç¼–è¾‘ &lt;code&gt;slaves&lt;/code&gt; å†…å®¹,æŠŠé»˜è®¤å†…å®¹localhostæ›¿æ¢æˆä¸¤ä¸ªä»èŠ‚ç‚¹çš„åå­—ï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;Slave01
Slave02&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;2ã€é…ç½® &lt;code&gt;spark-env.sh&lt;/code&gt; æ–‡ä»¶&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;mv spark-env.sh.template spark-env.sh&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç¼–è¾‘ &lt;code&gt;spark-env.sh&lt;/code&gt; æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;export SPARK_DIST_CLASSPATH=$(/usr/lib/hadoop/bin/hadoop classpath)
export HADOOP_CONF_DIR=/usr/lib/hadoop/etc/hadoop
export SPARK_MASTER_IP=172.31.40.68   # æ³¨æ„è¿™é‡Œå¡«çš„æ˜¯MasterèŠ‚ç‚¹çš„ç§æœ‰IP 
export JAVA_HOME=/usr/lib/java&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;é…ç½®å¥½åï¼Œå°† Master ä¸Šçš„ &lt;code&gt;/usr/lib/spark&lt;/code&gt; æ–‡ä»¶å¤¹å¤åˆ¶åˆ°å„ä¸ª slave èŠ‚ç‚¹ä¸Šã€‚åœ¨ Master èŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;$ cd /usr/lib
$ tar -zcf ~/spark.master.tar.gz ./spark
$ scp ~/spark.master.tar.gz Slave01:/home/hadoop
$ scp ~/spark.master.tar.gz Slave02:/home/hadoop&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç„¶ååˆ†åˆ«åœ¨ä¸¤ä¸ª slave èŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;$ sudo tar -zxf ~/spark.master.tar.gz -C /usr/lib
$ sudo chown -R hadoop /usr/lib/spark&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;åœ¨å¯åŠ¨ Spark é›†ç¾¤ä¹‹å‰ï¼Œå…ˆç¡®ä¿å¯åŠ¨äº† Hadoop é›†ç¾¤ï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;$ start-dfs.sh
$ start-yarn.sh
$ mr-jobhistory-daemon.sh start historyserver
$ start-master.sh  # å¯åŠ¨ spark ä¸»èŠ‚ç‚¹
$ start-slaves.sh  # å¯åŠ¨ spark ä»èŠ‚ç‚¹&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯é€šè¿‡ &lt;code&gt;ec2-xx-xxx-xxx-xx.us-west-2.compute.amazonaws.com:8080&lt;/code&gt; è®¿é—® spark web UI ã€‚&lt;/p&gt;
&lt;center&gt;

&lt;/center&gt;

&lt;h2 id=&quot;æ‰§è¡Œ-spark-åˆ†å¸ƒå¼å®ä¾‹&quot;&gt;æ‰§è¡Œ Spark åˆ†å¸ƒå¼å®ä¾‹&lt;/h2&gt;
&lt;p&gt;1ã€é€šè¿‡å‘½ä»¤è¡Œæäº¤ JAR åŒ…ï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;$ spark-submit --class org.apache.spark.examples.SparkPi --master spark://Master:7077 /usr/lib/spark/examples/jars/spark-examples_2.11-2.3.3.jar 100 2&amp;gt;&amp;amp;1 | grep &quot;Pi is roughly&quot; &lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç»“æœå¦‚ä¸‹è¯´æ˜æˆåŠŸï¼š&lt;/p&gt;
&lt;center&gt;

&lt;/center&gt;

&lt;p&gt;2ã€é€šè¿‡ IDEA è¿œç¨‹è¿æ¥è¿è¡Œç¨‹åºï¼š&lt;/p&gt;
&lt;p&gt;å¯ä»¥åœ¨ æœ¬åœ° IDEA ä¸­ç¼–å†™ä»£ç ï¼Œè¿œç¨‹æäº¤åˆ°äº‘ç«¯æœºä¸Šæ‰§è¡Œï¼Œè¿™æ ·æ¯”è¾ƒæ–¹ä¾¿è°ƒè¯•ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ &lt;code&gt;Master&lt;/code&gt; åœ°å€å¡«äº‘ç«¯æœºçš„å…¬æœ‰ IP åœ°å€ã€‚ä¸‹é¢ä»¥ä¸€ä¸ª &lt;code&gt;WordVec&lt;/code&gt; ç¨‹åºç¤ºä¾‹ï¼Œå°†å¥å­è½¬æ¢ä¸ºå‘é‡å½¢å¼ï¼š&lt;/p&gt;
&lt;pre class=&quot;scala&quot;&gt;
&lt;code&gt;import org.apache.spark.{SparkConf, SparkContext}
import org.apache.log4j.{Level, Logger}
import org.apache.spark.ml.feature.Word2Vec
import org.apache.spark.ml.linalg.Vector
import org.apache.spark.sql.Row
import org.apache.spark.sql.SparkSession

object Word2Vec {
  def main(args: Array[String]) {
    Logger.getLogger(&quot;org&quot;).setLevel(Level.ERROR)  // æ§åˆ¶è¾“å‡ºä¿¡æ¯
    Logger.getLogger(&quot;com&quot;).setLevel(Level.ERROR)

    val conf = new SparkConf()
      .setMaster(&quot;spark://ec2-54-190-51-132.us-west-2.compute.amazonaws.com:7077&quot;)  // å¡«å…¬æœ‰DNSæˆ–å…¬æœ‰IPåœ°å€éƒ½å¯ä»¥
      .setAppName(&quot;Word2Vec&quot;)
      .set(&quot;spark.cores.max&quot;, &quot;4&quot;)
      .set(&quot;spark.executor.memory&quot;, &quot;2g&quot;)
    val sc = new SparkContext(conf)

    val spark = SparkSession
      .builder
      .appName(&quot;Word2Vec&quot;)
      .getOrCreate()

    val documentDF = spark.createDataFrame(Seq(
      &quot;Hi I heard about Spark&quot;.split(&quot; &quot;),
      &quot;I wish Java could use case classes&quot;.split(&quot; &quot;),
      &quot;Logistic regression models are neat&quot;.split(&quot; &quot;)
    ).map(Tuple1.apply)).toDF(&quot;text&quot;)

    val word2Vec = new Word2Vec()
      .setInputCol(&quot;text&quot;)
      .setOutputCol(&quot;result&quot;)
      .setVectorSize(3)
      .setMinCount(0)
    val model = word2Vec.fit(documentDF)

    val result = model.transform(documentDF)
    result.collect().foreach { case Row(text: Seq[_], features: Vector) =&amp;gt;
      println(s&quot;Text: [${text.mkString(&quot;, &quot;)}] =&amp;gt; \nVector: $features\n&quot;) }
  }
}&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;IDEA æ§åˆ¶å°è¾“å‡ºï¼š&lt;/p&gt;
&lt;center&gt;

&lt;/center&gt;

&lt;p&gt;å…³é—­ Spark å’Œ Hadoop é›†ç¾¤æœ‰ä»¥ä¸‹å‘½ä»¤ï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;$ stop-master.sh
$ stop-slaves.sh
$ stop-yarn.sh
$ stop-dfs.sh
$ mr-jobhistory-daemon.sh stop historyserver&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;å½“ç„¶æœ€åä¹Ÿæ˜¯æœ€é‡è¦çš„æ˜¯ï¼Œä½¿ç”¨å®Œåä¸è¦å¿˜äº†å…³é—­ EC2 å®ä¾‹ï¼Œä¸ç„¶ä¼š 24 å°æ—¶ä¸é—´æ–­äº§ç”Ÿè´¹ç”¨çš„ã€‚&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;/&lt;/p&gt;
</description>
<pubDate>Tue, 24 Dec 2019 11:19:00 +0000</pubDate>
<dc:creator>massquantity</dc:creator>
<og:description>å‰è¨€ æœ¬ç¯‡æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ AWS EC2 äº‘æœåŠ¡æ­å»ºé›†ç¾¤ã€‚å½“ç„¶åœ¨åªæœ‰ä¸€å°è®¡ç®—æœºçš„æƒ…å†µä¸‹æ­å»ºå®Œå…¨åˆ†å¸ƒå¼é›†ç¾¤ï¼Œè¿˜æœ‰å¦å¤–å‡ ç§æ–¹æ³•ï¼šä¸€ç§æ˜¯æœ¬åœ°æ­å»ºå¤šå°è™šæ‹Ÿæœºï¼Œå¥½å¤„æ˜¯å…è´¹æ˜“æ“æ§ï¼Œåå¤„æ˜¯è™šæ‹Ÿæœºå¯¹å®¿ä¸»æœºé…ç½®è¦æ±‚è¾ƒé«˜ï¼Œ</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/massquantity/p/12088449.html</dc:identifier>
</item>
<item>
<title>.Net Core è®¤è¯ç³»ç»Ÿæºç è§£æ - éƒ‘å°è¶…</title>
<link>http://www.cnblogs.com/GreenLeaves/p/12093033.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/GreenLeaves/p/12093033.html</guid>
<description>&lt;p&gt;Â  Â  Â  Â ä¸çŸ¥ä¸è§‰.Net Coreå·²ç»æ¨å‡ºåˆ°3.1äº†,å¤§å¤šæ•°ä»¥.Netä¸ºæŠ€æœ¯æ ˆçš„å…¬å¸ä¹Ÿå¼€å§‹é€æ­¥çš„åˆ‡æ¢åˆ°äº†Core,ä»ä¸šä¹Ÿå¿«3å¹´å¤šäº†,ä¸€ç›´åšæŒç€.ä¸ç®¡ç¯å¢ƒæ€ä¹ˆå˜,åšæŒè‡ªå·±çš„å½“åˆçš„é€‰æ‹©,åšæŒä¿¡ä»° .Net Coreæ˜¯ä¸ªéå¸¸ä¼˜ç§€çš„æ¡†æ¶,å¦‚æœå„ä½æ˜¯ä»WebFormå¼€å§‹,ä¸€æ­¥æ­¥èµ°åˆ°ä»Šå¤©,è‡ªç„¶è€Œç„¶å°±ä¼šå‘ç°.å¾®è½¯æ…¢æ…¢çš„å¼€å§‹å°†æ•´ä¸ªæ¡†æ¶ç»„ä»¶åŒ–,ä¸åœ¨åƒä»¥å‰é‚£æ ·,æ‰€ä»¥çš„ä¸œè¥¿éƒ½å‚»ç“œåŒ–,æ¯”å¦‚WebForm,æ‹–æ‹–æ§ä»¶å¾€å¾€èƒ½æå®šå¤§éƒ¨åˆ†çš„äº‹æƒ….Coreçš„æ‰©å±•æ€§å¾ˆå¥½,å°†å¾ˆå¤šé€‰æ‹©æƒäº¤ç»™æˆ‘ä»¬è‡ªå·±,è€Œä¸æ˜¯å¼ºè¡Œçš„è®©æˆ‘ä»¬å»æ¥å—ä»–é‚£ä¸€å¥—,å¯¹ç¬¬ä¸‰æ–¹ç»„ä»¶çš„å…¼å®¹æ€§å¾ˆå¥½.æ¢å¥è¯è¯´,å¾ˆå¤šæ ¸å¿ƒç»„ä»¶å¾®è½¯æä¾›äº†é«˜å±‚æŠ½è±¡,å¦‚æœä½ æƒ³æ¢,å¯ä»¥,ä¸æƒ³æ¢,ä¹Ÿå¯ä»¥,ç”¨ä»–é»˜è®¤çš„å®ç°.å…¶ä»–çš„ä¼˜ç¼ºç‚¹ä¹Ÿä¸ä¸€ä¸€ç»†è¯´äº†,ä¹Ÿä¸æ˜¯æœ¬æ–‡çš„é‡ç‚¹ã€‚å¦‚æœæ—¶é—´å…è®¸,å»ºè®®å¤§å®¶å¯ä»¥æ·±å…¥çš„ç ”ç©¶.Net Coreçš„åº•å±‚.&lt;/p&gt;
&lt;p&gt;1ã€ç®€ä»‹&lt;/p&gt;
&lt;p&gt;çœå»å‰é¢çš„åˆ›å»ºCore Webé¡¹ç›®çš„ä¸€ç³»åˆ—æ“ä½œ.VSå¸®ä½ è‡ªåŠ¨åŒ–åˆå§‹åŒ–å¥½æ‰€æœ‰çš„åŸºç¡€ç»„ä»¶ã€ç¯å¢ƒ.ç¬¬ä¸€æ­¥å°±æ˜¯è®¤è¯.å°±æ˜¯ç™»é™†.å½“ç„¶å¾®è½¯æä¾›äº†ä¸€å¥—ç™»é™†ç»„ä»¶.å¾ˆå…¨,å¾ˆå®Œå–„ã€‚é¡¹ç›®åœ¨Coreæºç Â &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224165917950-2076788875.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â Securityæ–‡ä»¶å¤¹ä¸‹,æºç è‡ªè¡Œå»githubä¸‹è½½.é‡Œé¢æä¾›äº†è‹¥å¹²ä¸ªè®¤è¯æ–¹æ³•,å¸¸è§çš„Cookieè®¤è¯ã€JwtBearè®¤è¯ç­‰ç­‰.è¿˜åŒ…æ‹¬FaceBookã€Googleç­‰è¿œç¨‹è®¤è¯æ–¹å¼.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224170021923-26669111.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡æš‚æ—¶ä¸è®²è§£å…·ä½“çš„è®¤è¯æ–¹å¼,ä¸»è¦é˜è¿°æ ¸å¿ƒè®¤è¯æµç¨‹.&lt;/p&gt;

&lt;p&gt;(1)ã€è®¤è¯ç³»ç»Ÿçš„æ‰§è¡Œè¿‡ç¨‹&lt;/p&gt;
&lt;p&gt;Coreå¯åŠ¨è®¤è¯ç³»ç»Ÿçš„æ–¹å¼å¾ˆç®€å•&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224170957041-935588714.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â å¾ˆç®€å•çš„ä¸€æ®µä»£ç ,çœ‹çœ‹å®ƒå¹²äº†ä»€ä¹ˆ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224171102245-645825825.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â å¾ˆç®€å•,æ³¨å…¥è®¤è¯ä¸­é—´ä»¶,å…³äºä¸­é—´ä»¶è¿™é‡Œå°±ä¸è¯´å¤š,ä¸æ˜¯æ–‡æœ¬çš„é‡ç‚¹,è‡ªè¡Œç™¾åº¦.çœ‹çœ‹ä¸­é—´ä»·å¹²äº†ä»€ä¹ˆ.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224171439405-1894249029.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â æ ¸å¿ƒä»£ç ,é¦–å…ˆæ‹¿åˆ°DIä¸­æ³¨å…¥çš„å¤„ç†è®¤è¯è¯·æ±‚å¤„ç†å™¨é›†åˆ,æ¥ç€å»DIä¸­è·å–è®¤è¯å¤„ç†æ–¹æ¡ˆé›†åˆä¸­çš„å¤„ç†è®¤è¯è¯·æ±‚ä¸Šä¸‹æ–‡çš„æ–¹æ¡ˆç±».æ¥ç€å»å¤„ç†å™¨é›†åˆä¸­æ‹¿åˆ°å¤„ç†è®¤è¯è¯·æ±‚ä¸Šä¸‹æ–‡çš„æ–¹æ¡ˆç±»å¯¹åº”çš„è®¤è¯è¯·æ±‚å¤„ç†å™¨,æ¥ç€æ‰§è¡Œå¤„ç†å™¨çš„HandleRequestAsyncæ–¹æ³•,å®Œæˆè®¤è¯è¯·æ±‚ä¸Šä¸‹æ–‡çš„å¤„ç†.è¿™æ„å‘³ç€æˆ‘ä»¬çš„è®¤è¯è¯·æ±‚å‚æ•°æ˜¯å¯ä»¥è¢«æˆ‘ä»¬åšç‰¹æ®Šå¤„ç†çš„.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224171657665-1981799037.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;æ¥ç€&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224172643001-1973737434.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â å¤„ç†å®Œè®¤è¯è¯·æ±‚å‚æ•°ä¹‹å,æ¥ç€å»è®¤è¯æ–¹æ¡ˆä¸­æ‹¿åˆ°é»˜è®¤çš„è®¤è¯æ–¹æ¡ˆ,ä¸ä¸ºç©º,æ‰§è¡Œä¸Šä¸‹æ–‡çš„æ‰©å±•æ–¹æ³•context.AuthenticateAsync,è¿™ä¸ªæ–¹æ³•å¹²äº†ä»€ä¹ˆå¦‚ä¸‹:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224172939133-659277168.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â æ‰§è¡ŒDIä¸­æ³¨å…¥çš„è®¤è¯æœåŠ¡æ–¹æ³•,å¹¶ä¼ å…¥ä¸Šä¸‹æ–‡å’Œé»˜è®¤çš„è®¤è¯æ–¹æ¡ˆåç§°.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224173623677-1860641768.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224173636457-409279962.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â å…ˆåˆ¤æ–­å­˜ä¸å­˜åœ¨é»˜è®¤è®¤è¯æ–¹æ¡ˆ,ä¸å­˜åœ¨æŠ›å¼‚å¸¸,æ¥ç€å»æ‰€æœ‰çš„è®¤è¯å¤„ç†å™¨é›†åˆä¸­æ‹¿åˆ°é»˜è®¤è®¤è¯æ–¹æ¡ˆçš„å¤„ç†å™¨.æ¥ç€è°ƒç”¨å¤„ç†çš„è®¤è¯æ–¹æ³•,è®¤è¯æˆåŠŸ,åˆ¤æ–­å½“å‰ç”¨æˆ·èº«ä»½é›†åˆä¸­åœ¨ä¸´æ—¶ç¼“å­˜ä¸­å­˜ä¸å­˜åœ¨,ä¸å­˜åœ¨,å¯ä»¥æ‰§è¡ŒClaimçš„è½¬æ¢.è¿™å¾ˆå¥½,è¯´æ˜ç”¨æˆ·è®¤è¯æˆåŠŸä¹‹åçš„Cliamä¹Ÿæ˜¯å¯ä»¥è¢«è½¬æ¢çš„.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224174300176-329424762.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â åªè¦æ³¨å…¥IClaimsTransformationæœåŠ¡å³å¯,ä½ å°±å¯ä»¥æ‰§è¡Œä½ éœ€è¦çš„ä¸šåŠ¡çš„Claimè½¬æ¢ï¼Œæœ€åè¿”å›ç»“æœ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224174401267-561919057.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â åˆ°è¿™é‡Œæ•´ä¸ªè®¤è¯æµç¨‹ç»“æŸ.éå¸¸çš„ç®€å•.ä¸”å…³é”®ç‚¹çš„æ‰©å±•å¾®è½¯éƒ½é¢„ç•™äº†.å¯ä»¥è‡ªå®šä¹‰å®ç°&lt;/p&gt;

&lt;p&gt;(2)ã€æµè½¬æœåŠ¡çš„ä»‹ç».&lt;/p&gt;
&lt;p&gt;ä¸Šé¢ä»‹ç»äº†æ•´ä¸ªè®¤è¯ç»„ä»¶çš„æµè½¬è¿‡ç¨‹,å› ä¸ºæˆ‘å¯¹æµç¨‹å¾ˆæ¸…æ¥š,æ‰€ä»¥å¤§å®¶å¯èƒ½è¿˜æ˜¯ä¸ç†è§£.æ‰€ä»¥æ¥ä¸‹å»å¼€å§‹ä»‹ç»æµè½¬å¿…é¡»æœåŠ¡çš„æ³¨å…¥.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224175131047-1762583454.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â è®¤è¯å¤„ç†å™¨çš„Providerç±»,é‚£ä¹ˆCoreå®åœ¨å“ªé‡Œæ³¨å…¥è®¤è¯å¤„ç†å™¨çš„å‘¢?&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224175301460-1005078979.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â è¿™é‡Œ,æ ¸å¿ƒä¹Ÿæ˜¯çº¢æ¡†é‡Œçš„,ä¸‹é¢çš„åªæ˜¯ä¸€äº›ä¾èµ–ç»„ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224175413257-1740143622.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â å¾®è½¯æ³¨å…¥é»˜è®¤çš„è®¤è¯å¤„ç†å™¨.çœ‹ä¸‹è·å–å¤„ç†å™¨çš„å®ç°,å¯¹åº”ä¸­é—´ä»¶.&lt;/p&gt;
&lt;p&gt;Â &lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224175626972-946912996.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â é˜…è¯»æºç å‘ç°,Providerç±»å¹¶ä¸å…·ä½“å®ç°æä¾›è®¤è¯å¤„ç†å™¨çš„æ–¹æ³•.è€Œæ˜¯é€šè¿‡SchemeProvideræ¥æä¾›.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224175814954-1758035946.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;åŸæ¥æ˜¯IAuthenticationSchemeProviderç±»æä¾›è®¤è¯å¤„ç†å™¨.è€Œä¸”æ˜¯é€šè¿‡åå°„å®ç°(è¿™ç‚¹å¼€é”€,å°±æ²¡å¿…è¦è€ƒè™‘æ€§èƒ½é—®é¢˜,å½“ç„¶ä½ å¯ä»¥è€ƒè™‘é‡æ„),é‚£ä¹ˆé—®é¢˜æ¥äº†,åœ¨å“ªé‡Œå‡ºå…¥IAuthenticationSchemeProvideræœåŠ¡å†…,å›åˆ°ä¸Šé¢é‚£å¼ å›¾&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224180048338-388073863.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â å¾®è½¯ä¹Ÿæä¾›äº†é»˜è®¤å®ç°,å»çœ‹çœ‹GetSchemeAsyncæ–¹æ³•çš„å®ç°&lt;/p&gt;
&lt;p&gt;Â &lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224180218574-65374022.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â &lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224180251675-200164967.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â ok,åˆ°è¿™é‡Œå°±è¯´æ˜è®¤è¯å¤„ç†å™¨é€šè¿‡å‘è¿™ä¸ªå­—å…¸å†™å…¥å€¼,æ¥å®ç°çš„.ä¹Ÿå°±æ˜¯å¾®è½¯è®¤è¯æ–¹æ¡ˆæä¾›äº†è®¤è¯å¤„ç†å™¨.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224180512021-40978835.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â ä¸Šé¢æ˜¯è®¤è¯æ–¹æ¡ˆçš„æ ¸å¿ƒå­—æ®µ,HandlerTypeå°±æ˜¯è®¤è¯å¤„ç†å™¨.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224180611648-1309175770.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;AuthenticationSchemeProviderç±»ç»´æŠ¤äº†ä¸€ä¸ª_schemesçš„å­—å…¸,é€šè¿‡å®ƒå‘å¤–è¾“å‡º.è®¤è¯æ–¹æ¡ˆé›†åˆæä¾›ç±».&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224181824017-1952484436.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â æ¥ç€è®¤è¯å¤„ç†å™¨é›†åˆæä¾›ç±»AuthenticationHandlerProvideré€šè¿‡è§£æ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224181945922-344299055.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è®¤è¯æ–¹æ¡ˆé›†åˆæä¾›ç±»,æ‹¿åˆ°æ‰€æœ‰çš„è®¤è¯å¤„ç†å™¨.&lt;/p&gt;
&lt;p&gt;åˆ°è¿™é‡Œ,å¾ˆæ˜æ˜¾,æ‰€æœ‰çš„è®¤è¯å¤„ç†å™¨éƒ½æ˜¯é€šè¿‡å‘AuthenticationSchemeProviderçš„_schemeså­—å…¸æ³¨å…¥è®¤è¯å¤„ç†å™¨.æ—¢ç„¶å¦‚æ­¤,å…¥å£åœ¨å“ªï¼Ÿåœ¨AuthenticationBuilderç±»ä¸‹é¢.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224182812247-1127266997.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â ä¸‹é¢æ˜¯Cookieè®¤è¯æ–¹å¼æ³¨å…¥è®¤è¯å¤„ç†å™¨çš„æ–¹å¼&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224182917695-991684425.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â AddScmemeæ–¹æ³•.åœ¨é…ç½®å‚æ•°çš„åŒæ—¶,æŒ‡å®šäº†å¤„ç†å™¨.&lt;/p&gt;

&lt;p&gt;Â æ¥ç€,å›åˆ°ä¸­é—´ä»¶çš„å›¾&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224183348335-1460076353.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â æˆ‘ä»¬é€šè¿‡AuthenticationBuilderçš„AddSchemeæ–¹æ³•å‘_schemesé›†åˆå†™å…¥äº†è®¤è¯å¤„ç†å™¨ä¸”é…ç½®äº†å¤„ç†å™¨çš„å‚æ•°,æ¥ç€é€šè¿‡AuthenticationHandlerProvideræ‹¿åˆ°äº†æ‰€æœ‰çš„è®¤è¯å¤„ç†å™¨.&lt;/p&gt;
&lt;p&gt;æ¥ç€æˆ‘ä»¬é€šè¿‡Schemesæ–¹æ¡ˆé›†åˆæ‹¿åˆ°æ‰€æœ‰å¤„ç†è®¤è¯è¯·æ±‚ä¸Šä¸‹æ–‡çš„å¤„ç†å™¨,æ‰§è¡Œå¤„ç†è®¤è¯è¯·æ±‚ä¸Šä¸‹æ–‡å‚æ•°.å¤„ç†å®Œæ¯•.&lt;/p&gt;

&lt;p&gt;æ¥ç€æˆ‘ä»¬è§£æSchemesä¸­æä¾›çš„é»˜è®¤è®¤è¯æ–¹æ¡ˆ,ä»£ç å¦‚ä¸‹:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224183940629-953763147.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224183928269-312200489.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â æ ¹æ®&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224184030408-1898759208.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â è¿™ä¸ªé…ç½®å‚æ•°,ä¸€èˆ¬åœ¨å…¥å£æ³¨å…¥:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224184153907-1944806111.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â ä¸­é…ç½®é»˜è®¤æ–¹æ¡ˆåç§°,æ‹¿åˆ°é»˜è®¤è®¤è¯æ–¹æ¡ˆ.å†å°†å¤„ç†è¿‡çš„è®¤è¯è¯·æ±‚ä¸Šä¸‹æ–‡å’Œé»˜è®¤æ–¹æ¡ˆä¼ ç»™IAuthenticationService,è¿™ä¸ªServiceä¹Ÿæœ‰é»˜è®¤å®ç°,å¦‚ä¸‹:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224184408671-825965645.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â &lt;img src=&quot;https://img2018.cnblogs.com/blog/772156/201912/772156-20191224184415586-2094323188.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â AuthenticationServiceå°†å¤„ç†è¿‡çš„è®¤è¯è¯·æ±‚ä¸Šä¸‹æ–‡äº¤ç»™å…·ä½“çš„è®¤è¯è¯·æ±‚å¤„ç†å™¨æ¥å¤„ç†.å¹¶è¿”å›å¤„ç†ç»“æœ.è®¤è¯è¯·æ±‚å¤„ç†å™¨å‰é¢è¯´è¿‡äº†,é€šè¿‡AuthenticationBuilderçš„AddSchemeæ–¹æ³•æ¥æ³¨å…¥.&lt;/p&gt;
&lt;p&gt;åˆ°è¿™é‡Œ,æ•´ä¸ªç»„ä»¶çš„æµç¨‹ä»‹ç»ç»“æŸ.çº¯å±ä¸ªäººç†è§£,èƒ½åŠ›æœ‰é™,æœ‰é—®é¢˜,è¯·æŒ‡æ­£,è°¢è°¢.&lt;/p&gt;
&lt;p&gt;ä¸‹é¢å¼€å§‹ä»‹ç»åŸºäºCookieçš„è®¤è¯ç»„ä»¶.&lt;/p&gt;

</description>
<pubDate>Tue, 24 Dec 2019 10:47:00 +0000</pubDate>
<dc:creator>éƒ‘å°è¶…</dc:creator>
<og:description>ä¸çŸ¥ä¸è§‰.Net Coreå·²ç»æ¨å‡ºåˆ°3.1äº†,å¤§å¤šæ•°ä»¥.Netä¸ºæŠ€æœ¯æ ˆçš„å…¬å¸ä¹Ÿå¼€å§‹é€æ­¥çš„åˆ‡æ¢åˆ°äº†Core,ä»ä¸šä¹Ÿå¿«3å¹´å¤šäº†,ä¸€ç›´åšæŒç€.ä¸ç®¡ç¯å¢ƒæ€ä¹ˆå˜,åšæŒè‡ªå·±çš„å½“åˆçš„é€‰æ‹©,åšæŒä¿¡ä»° .Net Cor</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/GreenLeaves/p/12093033.html</dc:identifier>
</item>
</channel>
</rss>