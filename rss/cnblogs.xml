<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>åšå®¢å›­_é¦–é¡µ</title>
<link></link>
<description>ä»£ç æ”¹å˜ä¸–ç•Œ</description>
<item>
<title>è§£è¯»ç®—æ³•ã€Œæ—¶é—´ã€ä¸ã€Œç©ºé—´ã€å¤æ‚åº¦â€”â€”å†°ä¸ç«ä¹‹æ­Œ - äº”åˆ†é’Ÿå­¦ç®—æ³•</title>
<link>http://www.cnblogs.com/fivestudy/p/10137699.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/fivestudy/p/10137699.html</guid>
<description>&lt;p&gt;ç®—æ³•ï¼ˆAlgorithmï¼‰æ˜¯æŒ‡ç”¨æ¥æ“ä½œæ•°æ®ã€è§£å†³ç¨‹åºé—®é¢˜çš„ä¸€ç»„æ–¹æ³•ã€‚å¯¹äºåŒä¸€ä¸ªé—®é¢˜ï¼Œä½¿ç”¨ä¸åŒçš„ç®—æ³•ï¼Œä¹Ÿè®¸æœ€ç»ˆå¾—åˆ°çš„ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œæ¯”å¦‚æ’åºå°±æœ‰å‰é¢çš„åå¤§ç»å…¸æ’åºå’Œå‡ ç§å¥‡è‘©æ’åºï¼Œè™½ç„¶ç»“æœç›¸åŒï¼Œä½†åœ¨è¿‡ç¨‹ä¸­æ¶ˆè€—çš„èµ„æºå’Œæ—¶é—´å´ä¼šæœ‰å¾ˆå¤§çš„åŒºåˆ«ï¼Œæ¯”å¦‚å¿«é€Ÿæ’åºä¸çŒ´å­æ’åºï¼šï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥å¦‚ä½•å»è¡¡é‡ä¸åŒç®—æ³•ä¹‹é—´çš„ä¼˜åŠ£å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ä¸»è¦è¿˜æ˜¯ä»ç®—æ³•æ‰€å ç”¨çš„ã€Œæ—¶é—´ã€å’Œã€Œç©ºé—´ã€ä¸¤ä¸ªç»´åº¦å»è€ƒé‡ã€‚&lt;/p&gt;
&lt;ul readability=&quot;0&quot;&gt;&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;æ—¶é—´ç»´åº¦ï¼šæ˜¯æŒ‡æ‰§è¡Œå½“å‰ç®—æ³•æ‰€æ¶ˆè€—çš„æ—¶é—´ï¼Œæˆ‘ä»¬é€šå¸¸ç”¨ã€Œæ—¶é—´å¤æ‚åº¦ã€æ¥æè¿°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;ç©ºé—´ç»´åº¦ï¼šæ˜¯æŒ‡æ‰§è¡Œå½“å‰ç®—æ³•éœ€è¦å ç”¨å¤šå°‘å†…å­˜ç©ºé—´ï¼Œæˆ‘ä»¬é€šå¸¸ç”¨ã€Œç©ºé—´å¤æ‚åº¦ã€æ¥æè¿°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;h&quot;&gt;å†°ä¹‹å“€ä¼¤ï¼šæ—¶é—´å¤æ‚åº¦&lt;/h2&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;æ—¶é—´çš„æµé€å®›è‹¥å¯’å†°çš„èåŒ–ï¼Œæ•£å‘ç€ææƒ§ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;ho&quot;&gt;å¤§Oç¬¦å·è¡¨ç¤ºæ³•&lt;/h3&gt;
&lt;p&gt;å¤§Oè¡¨ç¤ºæ³•ï¼šç®—æ³•çš„æ—¶é—´å¤æ‚åº¦é€šå¸¸ç”¨å¤§Oç¬¦å·è¡¨è¿°ï¼Œå®šä¹‰ä¸º **T[n] = O(f(n)) **ã€‚ç§°å‡½æ•°T(n)ä»¥f(n)ä¸ºç•Œæˆ–è€…ç§°T(n)å—é™äºf(n)ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä¸€ä¸ªé—®é¢˜çš„è§„æ¨¡æ˜¯nï¼Œè§£è¿™ä¸€é—®é¢˜çš„æŸä¸€ç®—æ³•æ‰€éœ€è¦çš„æ—¶é—´ä¸ºT(n)ã€‚T(n)ç§°ä¸ºè¿™ä¸€ç®—æ³•çš„â€œæ—¶é—´å¤æ‚åº¦â€ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;ä¸Šé¢å…¬å¼ä¸­ç”¨åˆ°çš„ Landauç¬¦å·æ˜¯ç”±å¾·å›½æ•°è®ºå­¦å®¶ä¿ç½—Â·å·´èµ«æ›¼ï¼ˆPaul Bachmannï¼‰åœ¨å…¶1892å¹´çš„è‘—ä½œã€Šè§£ææ•°è®ºã€‹é¦–å…ˆå¼•å…¥ï¼Œç”±å¦ä¸€ä½å¾·å›½æ•°è®ºå­¦å®¶è‰¾å¾·è’™Â·æœ—é“ï¼ˆEdmund Landauï¼‰æ¨å¹¿ã€‚Landauç¬¦å·çš„ä½œç”¨åœ¨äºç”¨ç®€å•çš„å‡½æ•°æ¥æè¿°å¤æ‚å‡½æ•°è¡Œä¸ºï¼Œç»™å‡ºä¸€ä¸ªä¸Šæˆ–ä¸‹ï¼ˆç¡®ï¼‰ç•Œã€‚åœ¨è®¡ç®—ç®—æ³•å¤æ‚åº¦æ—¶ä¸€èˆ¬åªç”¨åˆ°å¤§Oç¬¦å·ï¼ŒLandauç¬¦å·ä½“ç³»ä¸­çš„å°oç¬¦å·ã€Î˜ç¬¦å·ç­‰ç­‰æ¯”è¾ƒä¸å¸¸ç”¨ã€‚è¿™é‡Œçš„Oï¼Œæœ€åˆæ˜¯ç”¨å¤§å†™å¸Œè…Šå­—æ¯ï¼Œä½†ç°åœ¨éƒ½ç”¨å¤§å†™è‹±è¯­å­—æ¯Oï¼›å°oç¬¦å·ä¹Ÿæ˜¯ç”¨å°å†™è‹±è¯­å­—æ¯oï¼ŒÎ˜ç¬¦å·åˆ™ç»´æŒå¤§å†™å¸Œè…Šå­—æ¯Î˜ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¤§Oç¬¦å·æ˜¯ä¸€ç§ç®—æ³•ã€Œå¤æ‚åº¦ã€çš„ã€Œç›¸å¯¹ã€ã€Œè¡¨ç¤ºã€æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªå¥å­é‡Œæœ‰ä¸€äº›é‡è¦è€Œä¸¥è°¨çš„ç”¨è¯ï¼š&lt;/p&gt;
&lt;ul readability=&quot;3.5&quot;&gt;&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;ç›¸å¯¹(relative)ï¼šä½ åªèƒ½æ¯”è¾ƒç›¸åŒçš„äº‹ç‰©ã€‚ä½ ä¸èƒ½æŠŠä¸€ä¸ªåšç®—æ•°ä¹˜æ³•çš„ç®—æ³•å’Œæ’åºæ•´æ•°åˆ—è¡¨çš„ç®—æ³•è¿›è¡Œæ¯”è¾ƒã€‚ä½†æ˜¯ï¼Œæ¯”è¾ƒ2ä¸ªç®—æ³•æ‰€åšçš„ç®—æœ¯æ“ä½œï¼ˆä¸€ä¸ªåšä¹˜æ³•ï¼Œä¸€ä¸ªåšåŠ æ³•ï¼‰å°†ä¼šå‘Šè¯‰ä½ ä¸€äº›æœ‰æ„ä¹‰çš„ä¸œè¥¿ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;è¡¨ç¤º(representation)ï¼šå¤§O(ç”¨å®ƒæœ€ç®€å•çš„å½¢å¼)æŠŠç®—æ³•é—´çš„æ¯”è¾ƒç®€åŒ–ä¸ºäº†ä¸€ä¸ªå•ä¸€å˜é‡ã€‚è¿™ä¸ªå˜é‡çš„é€‰æ‹©åŸºäºè§‚å¯Ÿæˆ–å‡è®¾ã€‚ä¾‹å¦‚ï¼Œæ’åºç®—æ³•ä¹‹é—´çš„å¯¹æ¯”é€šå¸¸æ˜¯åŸºäºæ¯”è¾ƒæ“ä½œ(æ¯”è¾ƒ2ä¸ªç»“ç‚¹æ¥å†³å®šè¿™2ä¸ªç»“ç‚¹çš„ç›¸å¯¹é¡ºåº)ã€‚è¿™é‡Œé¢å°±å‡è®¾äº†æ¯”è¾ƒæ“ä½œçš„è®¡ç®—å¼€é”€å¾ˆå¤§ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ¯”è¾ƒæ“ä½œçš„è®¡ç®—å¼€é”€ä¸å¤§ï¼Œè€Œäº¤æ¢æ“ä½œçš„è®¡ç®—å¼€é”€å¾ˆå¤§ï¼Œåˆä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿè¿™å°±æ”¹å˜äº†å…ˆå‰çš„æ¯”è¾ƒæ–¹å¼ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;å¤æ‚åº¦(complexity)ï¼šå¦‚æœæ’åº10,000ä¸ªå…ƒç´ èŠ±è´¹äº†æˆ‘1ç§’ï¼Œé‚£ä¹ˆæ’åº1ç™¾ä¸‡ä¸ªå…ƒç´ ä¼šèŠ±å¤šå°‘æ—¶é—´ï¼Ÿåœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œå¤æ‚åº¦å°±æ˜¯ç›¸å¯¹å…¶ä»–ä¸œè¥¿çš„åº¦é‡ç»“æœã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;h-1&quot;&gt;å¸¸è§çš„æ—¶é—´å¤æ‚åº¦é‡çº§&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬å…ˆä»å¸¸è§çš„æ—¶é—´å¤æ‚åº¦é‡çº§è¿›è¡Œå¤§Oçš„ç†è§£ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;
&lt;p&gt;å¸¸æ•°é˜¶O(1)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;çº¿æ€§é˜¶O(n)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¹³æ–¹é˜¶O(nÂ²)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯¹æ•°é˜¶O(logn)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;çº¿æ€§å¯¹æ•°é˜¶O(nlogn)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img title=&quot;&quot; src=&quot;https://bucket-1257126549.cos.ap-guangzhou.myqcloud.com/20181212211132.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;ho1&quot;&gt;O(1)&lt;/h4&gt;
&lt;p&gt;&lt;img title=&quot;&quot; src=&quot;https://bucket-1257126549.cos.ap-guangzhou.myqcloud.com/20181212213809.gif&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ— è®ºä»£ç æ‰§è¡Œäº†å¤šå°‘è¡Œï¼Œå…¶ä»–åŒºåŸŸä¸ä¼šå½±å“åˆ°æ“ä½œï¼Œè¿™ä¸ªä»£ç çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(1)&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;hljs cpp&quot;&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;1&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;void &lt;span class=&quot;hljs-title&quot;&gt;swapTwoInts&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;int &amp;amp;a, &lt;span class=&quot;hljs-keyword&quot;&gt;int &amp;amp;b){&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;2  &lt;span class=&quot;hljs-keyword&quot;&gt;int temp = a;&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;3  a = b;&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;4  b = temp;&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;5}&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;hon&quot;&gt;O(n)&lt;/h4&gt;
&lt;p&gt;&lt;img title=&quot;&quot; src=&quot;https://bucket-1257126549.cos.ap-guangzhou.myqcloud.com/20181212214121.gif&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ä¸‹é¢è¿™æ®µä»£ç ï¼Œforå¾ªç¯é‡Œé¢çš„ä»£ç ä¼šæ‰§è¡Œ n éï¼Œå› æ­¤å®ƒæ¶ˆè€—çš„æ—¶é—´æ˜¯éšç€ n çš„å˜åŒ–è€Œå˜åŒ–çš„ï¼Œå› æ­¤å¯ä»¥ç”¨O(n)æ¥è¡¨ç¤ºå®ƒçš„æ—¶é—´å¤æ‚åº¦ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;hljs cpp&quot;&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;1&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;int &lt;span class=&quot;hljs-title&quot;&gt;sum &lt;span class=&quot;hljs-params&quot;&gt;( &lt;span class=&quot;hljs-keyword&quot;&gt;int n ){&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;2   &lt;span class=&quot;hljs-keyword&quot;&gt;int ret = &lt;span class=&quot;hljs-number&quot;&gt;0;&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;3   &lt;span class=&quot;hljs-keyword&quot;&gt;for ( &lt;span class=&quot;hljs-keyword&quot;&gt;int i = &lt;span class=&quot;hljs-number&quot;&gt;0 ; i &amp;lt;= n ; i ++){&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;4      ret += i;&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;5   }&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;6   &lt;span class=&quot;hljs-keyword&quot;&gt;return ret;&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;7}&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç‰¹åˆ«ä¸€æçš„æ˜¯ c * O(n) ä¸­çš„ c å¯èƒ½å°äº 1 ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ®µä»£ç ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;hljs cpp&quot;&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;1&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;void &lt;span class=&quot;hljs-title&quot;&gt;reverse &lt;span class=&quot;hljs-params&quot;&gt;( &lt;span class=&quot;hljs-built_in&quot;&gt;string &amp;amp;s ) {&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;2    &lt;span class=&quot;hljs-keyword&quot;&gt;int n = s.size();&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;3    &lt;span class=&quot;hljs-keyword&quot;&gt;for (&lt;span class=&quot;hljs-keyword&quot;&gt;int i = &lt;span class=&quot;hljs-number&quot;&gt;0 ; i &amp;lt; n/&lt;span class=&quot;hljs-number&quot;&gt;2 ; i++){&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;4      swap ( s[i] , s[n&lt;span class=&quot;hljs-number&quot;&gt;-1-i]);&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;5    }&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;6}&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;hon-1&quot;&gt;O(nÂ²)&lt;/h4&gt;
&lt;p&gt;&lt;img title=&quot;&quot; src=&quot;https://bucket-1257126549.cos.ap-guangzhou.myqcloud.com/20181212214350.gif&quot; alt=&quot;&quot;/&gt;&lt;br/&gt;å½“å­˜åœ¨åŒé‡å¾ªç¯çš„æ—¶å€™ï¼Œå³æŠŠ O(n) çš„ä»£ç å†åµŒå¥—å¾ªç¯ä¸€éï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ O(nÂ²) äº†ã€‚&lt;/p&gt;

&lt;pre&gt;
&lt;code class=&quot;hljs cpp&quot;&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 1&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;void &lt;span class=&quot;hljs-title&quot;&gt;selectionSort&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;int arr[],&lt;span class=&quot;hljs-keyword&quot;&gt;int n){&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 2   &lt;span class=&quot;hljs-keyword&quot;&gt;for(&lt;span class=&quot;hljs-keyword&quot;&gt;int i = &lt;span class=&quot;hljs-number&quot;&gt;0; i &amp;lt; n ; i++){&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 3     &lt;span class=&quot;hljs-keyword&quot;&gt;int minIndex = i;&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 4     &lt;span class=&quot;hljs-keyword&quot;&gt;for (&lt;span class=&quot;hljs-keyword&quot;&gt;int j = i + &lt;span class=&quot;hljs-number&quot;&gt;1; j &amp;lt; n ; j++ )&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 5       &lt;span class=&quot;hljs-keyword&quot;&gt;if (arr[j] &amp;lt; arr[minIndex])&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 6           minIndex = j;&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 7&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 8     swap ( arr[i], arr[minIndex]);&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 9   }&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;10}&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œç®€å•çš„æ¨å¯¼ä¸€ä¸‹&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å½“ i = 0 æ—¶ï¼Œç¬¬äºŒé‡å¾ªç¯éœ€è¦è¿è¡Œ (n - 1) æ¬¡&lt;/li&gt;
&lt;li&gt;å½“ i = 1 æ—¶ï¼Œç¬¬äºŒé‡å¾ªç¯éœ€è¦è¿è¡Œ (n - 2) æ¬¡&lt;/li&gt;
&lt;li&gt;ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä¸éš¾å¾—åˆ°å…¬å¼ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;hljs r&quot;&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;1(n - &lt;span class=&quot;hljs-number&quot;&gt;1) + (n - &lt;span class=&quot;hljs-number&quot;&gt;2) + (n - &lt;span class=&quot;hljs-number&quot;&gt;3) + &lt;span class=&quot;hljs-keyword&quot;&gt;... + &lt;span class=&quot;hljs-number&quot;&gt;0&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;2= (&lt;span class=&quot;hljs-number&quot;&gt;0 + n - &lt;span class=&quot;hljs-number&quot;&gt;1) * n / &lt;span class=&quot;hljs-number&quot;&gt;2&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;3= O (n ^&lt;span class=&quot;hljs-number&quot;&gt;2)&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å½“ç„¶å¹¶ä¸æ˜¯æ‰€æœ‰çš„åŒé‡å¾ªç¯éƒ½æ˜¯ O(nÂ²)ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ®µè¾“å‡º 30n æ¬¡ &lt;code&gt;Hello,äº”åˆ†é’Ÿå­¦ç®—æ³•ï¼šï¼‰&lt;/code&gt;çš„ä»£ç ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;hljs cpp&quot;&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;1&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;void &lt;span class=&quot;hljs-title&quot;&gt;printInformation &lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;int n ){&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;2   &lt;span class=&quot;hljs-keyword&quot;&gt;for (&lt;span class=&quot;hljs-keyword&quot;&gt;int i = &lt;span class=&quot;hljs-number&quot;&gt;1 ; i &amp;lt;= n ; i++)&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;3        &lt;span class=&quot;hljs-keyword&quot;&gt;for (&lt;span class=&quot;hljs-keyword&quot;&gt;int j = &lt;span class=&quot;hljs-number&quot;&gt;1 ; j &amp;lt;= &lt;span class=&quot;hljs-number&quot;&gt;30 ; j ++)&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;4           &lt;span class=&quot;hljs-built_in&quot;&gt;cout&amp;lt;&amp;lt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;Hello,äº”åˆ†é’Ÿå­¦ç®—æ³•ï¼šï¼‰&quot;&amp;lt;&amp;lt; &lt;span class=&quot;hljs-built_in&quot;&gt;endl;&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;5}&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;hologn&quot;&gt;O(logn)&lt;/h4&gt;
&lt;p&gt;&lt;img title=&quot;&quot; src=&quot;https://bucket-1257126549.cos.ap-guangzhou.myqcloud.com/20181212214425.gif&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;hljs vbscript&quot;&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 1&lt;span class=&quot;hljs-built_in&quot;&gt;int binarySearch( &lt;span class=&quot;hljs-built_in&quot;&gt;int arr[], &lt;span class=&quot;hljs-built_in&quot;&gt;int n , &lt;span class=&quot;hljs-built_in&quot;&gt;int target){&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 2  &lt;span class=&quot;hljs-built_in&quot;&gt;int l = &lt;span class=&quot;hljs-number&quot;&gt;0, r = n - &lt;span class=&quot;hljs-number&quot;&gt;1;&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 3  &lt;span class=&quot;hljs-keyword&quot;&gt;while ( l &amp;lt;= r) {&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 4    &lt;span class=&quot;hljs-built_in&quot;&gt;int &lt;span class=&quot;hljs-built_in&quot;&gt;mid = l + (r - l) / &lt;span class=&quot;hljs-number&quot;&gt;2;&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 5    &lt;span class=&quot;hljs-keyword&quot;&gt;if (arr[&lt;span class=&quot;hljs-built_in&quot;&gt;mid] == target) return &lt;span class=&quot;hljs-built_in&quot;&gt;mid;&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 6    &lt;span class=&quot;hljs-keyword&quot;&gt;if (arr[&lt;span class=&quot;hljs-built_in&quot;&gt;mid] &amp;gt; target ) r = &lt;span class=&quot;hljs-built_in&quot;&gt;mid - &lt;span class=&quot;hljs-number&quot;&gt;1;&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 7    &lt;span class=&quot;hljs-keyword&quot;&gt;else l = &lt;span class=&quot;hljs-built_in&quot;&gt;mid + &lt;span class=&quot;hljs-number&quot;&gt;1;&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 8  }&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 9  return &lt;span class=&quot;hljs-number&quot;&gt;-1;&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;10}&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨äºŒåˆ†æŸ¥æ‰¾æ³•çš„ä»£ç ä¸­ï¼Œé€šè¿‡whileå¾ªç¯ï¼Œæˆ 2 å€æ•°çš„ç¼©å‡æœç´¢èŒƒå›´ï¼Œä¹Ÿå°±æ˜¯è¯´éœ€è¦ç»è¿‡ log2^n æ¬¡å³å¯è·³å‡ºå¾ªç¯ã€‚&lt;/p&gt;
&lt;p&gt;åŒæ ·çš„è¿˜æœ‰ä¸‹é¢ä¸¤æ®µä»£ç ä¹Ÿæ˜¯ O(logn) çº§åˆ«çš„æ—¶é—´å¤æ‚åº¦ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;hljs dart&quot;&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 1  &lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=&quot;hljs cpp&quot;&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;1&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;void &lt;span class=&quot;hljs-title&quot;&gt;hello &lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;int n ) {&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;2   &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;honlogn&quot;&gt;O(nlogn)&lt;/h4&gt;
&lt;p&gt;å°†æ—¶é—´å¤æ‚åº¦ä¸ºO(logn)çš„ä»£ç å¾ªç¯Néçš„è¯ï¼Œé‚£ä¹ˆå®ƒçš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ n * O(logn)ï¼Œä¹Ÿå°±æ˜¯äº†O(nlogn)ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;hljs cpp&quot;&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;1&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;void &lt;span class=&quot;hljs-title&quot;&gt;hello &lt;span class=&quot;hljs-params&quot;&gt;(){&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;2  &lt;span class=&quot;hljs-keyword&quot;&gt;for( m = &lt;span class=&quot;hljs-number&quot;&gt;1 ; m &amp;lt; n ; m++){&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;3    i = &lt;span class=&quot;hljs-number&quot;&gt;1;&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;4    &lt;span class=&quot;hljs-keyword&quot;&gt;while( i &amp;lt; n ){&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;5        i = i * &lt;span class=&quot;hljs-number&quot;&gt;2;&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;6    }&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;7   }&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;8}&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;h-2&quot;&gt;ä¸å¸¸è§çš„æ—¶é—´å¤æ‚åº¦&lt;/h3&gt;
&lt;p&gt;ä¸‹é¢æ¥åˆ†æä¸€æ³¢å¦å¤–å‡ ç§å¤æ‚åº¦ï¼š é€’å½’ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ï¼ˆrecursive algorithm time complexityï¼‰ï¼Œæœ€å¥½æƒ…å†µæ—¶é—´å¤æ‚åº¦ï¼ˆbest case time complexityï¼‰ã€æœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦ï¼ˆworst case time complexityï¼‰ã€å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼ˆaverage case time complexityï¼‰å’Œå‡æ‘Šæ—¶é—´å¤æ‚åº¦ï¼ˆamortized time complexityï¼‰ã€‚&lt;/p&gt;
&lt;h4 id=&quot;h-3&quot;&gt;é€’å½’ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦&lt;/h4&gt;
&lt;p&gt;å¦‚æœé€’å½’å‡½æ•°ä¸­ï¼Œåªè¿›è¡Œä¸€æ¬¡é€’å½’è°ƒç”¨ï¼Œé€’å½’æ·±åº¦ä¸ºdepthï¼›&lt;/p&gt;
&lt;p&gt;åœ¨æ¯ä¸ªé€’å½’çš„å‡½æ•°ä¸­ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºTï¼›&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åˆ™æ€»ä½“çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(T * depth)&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å‰é¢çš„å­¦ä¹ ä¸­ï¼Œå½’å¹¶æ’åº ä¸ å¿«é€Ÿæ’åº éƒ½å¸¦æœ‰é€’å½’çš„æ€æƒ³ï¼Œå¹¶ä¸”æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(nlogn) ï¼Œä½†å¹¶ä¸æ˜¯æœ‰é€’å½’çš„å‡½æ•°å°±ä¸€å®šæ˜¯ O(nlogn) çº§åˆ«çš„ã€‚ä»ä»¥ä¸‹ä¸¤ç§æƒ…å†µè¿›è¡Œåˆ†æã€‚&lt;/p&gt;
&lt;h5 id=&quot;h-4&quot;&gt;â‘  é€’å½’ä¸­è¿›è¡Œä¸€æ¬¡é€’å½’è°ƒç”¨çš„å¤æ‚åº¦åˆ†æ&lt;/h5&gt;
&lt;h6 id=&quot;h-5&quot;&gt;äºŒåˆ†æŸ¥æ‰¾æ³•&lt;/h6&gt;
&lt;p&gt;&lt;img title=&quot;&quot; src=&quot;https://bucket-1257126549.cos.ap-guangzhou.myqcloud.com/20181212214425.gif&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;hljs cpp&quot;&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 1&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;int &lt;span class=&quot;hljs-title&quot;&gt;binarySearch&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;int arr[], &lt;span class=&quot;hljs-keyword&quot;&gt;int l, &lt;span class=&quot;hljs-keyword&quot;&gt;int r, &lt;span class=&quot;hljs-keyword&quot;&gt;int target){&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 2    &lt;span class=&quot;hljs-keyword&quot;&gt;if( l &amp;gt; r ) &lt;span class=&quot;hljs-keyword&quot;&gt;return &lt;span class=&quot;hljs-number&quot;&gt;-1;&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 3&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 4    &lt;span class=&quot;hljs-keyword&quot;&gt;int mid = l + (r-l)/&lt;span class=&quot;hljs-number&quot;&gt;2; &lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 5    &lt;span class=&quot;hljs-keyword&quot;&gt;if( arr[mid] == target ) &lt;span class=&quot;hljs-keyword&quot;&gt;return mid;  &lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 6    &lt;span class=&quot;hljs-keyword&quot;&gt;else &lt;span class=&quot;hljs-keyword&quot;&gt;if( arr[mid] &amp;gt; target ) &lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 7    &lt;span class=&quot;hljs-keyword&quot;&gt;return binarySearch(arr, l, mid&lt;span class=&quot;hljs-number&quot;&gt;-1, target);    &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ¯”å¦‚åœ¨è¿™æ®µäºŒåˆ†æŸ¥æ‰¾æ³•çš„ä»£ç ä¸­ï¼Œæ¯æ¬¡åœ¨ [ l , r ] èŒƒå›´ä¸­å»æŸ¥æ‰¾ç›®æ ‡çš„ä½ç½®ï¼Œå¦‚æœä¸­é—´çš„å…ƒç´  &lt;code&gt;arr[mid]&lt;/code&gt; ä¸æ˜¯ &lt;code&gt;target&lt;/code&gt;ï¼Œé‚£ä¹ˆåˆ¤æ–­ &lt;code&gt;arr[mid]&lt;/code&gt;æ˜¯æ¯” &lt;code&gt;target&lt;/code&gt; å¤§ è¿˜æ˜¯ å° ï¼Œè¿›è€Œå†æ¬¡è°ƒç”¨ &lt;code&gt;binarySearch&lt;/code&gt;è¿™ä¸ªå‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ä¸ªé€’å½’å‡½æ•°ä¸­ï¼Œæ¯ä¸€æ¬¡æ²¡æœ‰æ‰¾åˆ°&lt;code&gt;target&lt;/code&gt;æ—¶ï¼Œè¦ä¹ˆè°ƒç”¨ å·¦è¾¹ çš„ &lt;code&gt;binarySearch&lt;/code&gt;å‡½æ•°ï¼Œè¦ä¹ˆè°ƒç”¨ å³è¾¹ çš„ &lt;code&gt;binarySearch&lt;/code&gt;å‡½æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨æ­¤æ¬¡é€’å½’ä¸­ï¼Œæœ€å¤šè°ƒç”¨äº†ä¸€æ¬¡é€’å½’è°ƒç”¨è€Œå·²ã€‚æ ¹æ®æ•°å­¦çŸ¥è¯†ï¼Œéœ€è¦log2næ¬¡æ‰èƒ½é€’å½’åˆ°åº•ã€‚å› æ­¤ï¼ŒäºŒåˆ†æŸ¥æ‰¾æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(logn)ã€‚&lt;/p&gt;
&lt;h6 id=&quot;h-6&quot;&gt;æ±‚å’Œ&lt;/h6&gt;
&lt;p&gt;&lt;img title=&quot;&quot; src=&quot;https://bucket-1257126549.cos.ap-guangzhou.myqcloud.com/20181213154801.gif&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;hljs cpp&quot;&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;1&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;int &lt;span class=&quot;hljs-title&quot;&gt;sum &lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;int n) {&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;2  &lt;span class=&quot;hljs-keyword&quot;&gt;if (n == &lt;span class=&quot;hljs-number&quot;&gt;0) &lt;span class=&quot;hljs-keyword&quot;&gt;return &lt;span class=&quot;hljs-number&quot;&gt;0;&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;3  &lt;span class=&quot;hljs-keyword&quot;&gt;return n + sum( n - &lt;span class=&quot;hljs-number&quot;&gt;1 )&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;4}&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨è¿™æ®µä»£ç ä¸­æ¯”è¾ƒå®¹æ˜“ç†è§£é€’å½’æ·±åº¦éšè¾“å…¥ n çš„å¢åŠ è€Œçº¿æ€§é€’å¢ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º O (n)ã€‚&lt;/p&gt;
&lt;h6 id=&quot;h-7&quot;&gt;æ±‚å¹‚&lt;/h6&gt;
&lt;p&gt;&lt;img title=&quot;&quot; src=&quot;https://bucket-1257126549.cos.ap-guangzhou.myqcloud.com/20181215131813.gif&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;hljs cpp&quot;&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;1&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é€’å½’æ·±åº¦ä¸º &lt;code&gt;logn&lt;/code&gt;ï¼Œå› ä¸ºæ˜¯æ±‚éœ€è¦é™¤ä»¥ 2 å¤šå°‘æ¬¡æ‰èƒ½åˆ°åº•ã€‚&lt;/p&gt;
&lt;h5 id=&quot;h-8&quot;&gt;â‘¡ é€’å½’ä¸­è¿›è¡Œå¤šæ¬¡é€’å½’è°ƒç”¨çš„å¤æ‚åº¦åˆ†æ&lt;/h5&gt;
&lt;p&gt;é€’å½’ç®—æ³•ä¸­æ¯”è¾ƒéš¾è®¡ç®—çš„æ˜¯å¤šæ¬¡é€’å½’è°ƒç”¨ã€‚&lt;/p&gt;
&lt;p&gt;å…ˆçœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼Œæœ‰ä¸¤æ¬¡é€’å½’è°ƒç”¨ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;hljs cpp&quot;&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;1&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img title=&quot;&quot; src=&quot;https://bucket-1257126549.cos.ap-guangzhou.myqcloud.com/20181212213008.gif&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;é€’å½’æ ‘ä¸­èŠ‚ç‚¹æ•°å°±æ˜¯ä»£ç è®¡ç®—çš„è°ƒç”¨æ¬¡æ•°ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚ å½“ &lt;code&gt;n = 3&lt;/code&gt; æ—¶ï¼Œè°ƒç”¨æ¬¡æ•°è®¡ç®—å…¬å¼ä¸º&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;1 + 2 + 4 + 8 = 15&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸€èˆ¬çš„ï¼Œè°ƒç”¨æ¬¡æ•°è®¡ç®—å…¬å¼ä¸º&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;2^0 + 2^1 + 2^2 + â€¦â€¦ + 2^n&lt;br/&gt;= 2^(n+1) - 1&lt;br/&gt;= O(2^n)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img title=&quot;&quot; src=&quot;https://bucket-1257126549.cos.ap-guangzhou.myqcloud.com/20181215133249.gif&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¸ä¹‹æœ‰æ‰€ç±»ä¼¼çš„æ˜¯ å½’å¹¶æ’åº çš„é€’å½’æ ‘ï¼ŒåŒºåˆ«ç‚¹åœ¨äº&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;1. ä¸Šè¿°ä¾‹å­ä¸­æ ‘çš„æ·±åº¦ä¸º &lt;code&gt;n&lt;/code&gt;ï¼Œè€Œ å½’å¹¶æ’åº çš„é€’å½’æ ‘æ·±åº¦ä¸º&lt;code&gt;logn&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;2. ä¸Šè¿°ä¾‹å­ä¸­æ¯æ¬¡å¤„ç†çš„æ•°æ®è§„æ¨¡æ˜¯ä¸€æ ·çš„ï¼Œè€Œåœ¨ å½’å¹¶æ’åº ä¸­æ¯ä¸ªèŠ‚ç‚¹å¤„ç†çš„æ•°æ®è§„æ¨¡æ˜¯é€æ¸ç¼©å°çš„&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å› æ­¤ï¼Œåœ¨å¦‚ å½’å¹¶æ’åº ç­‰æ’åºç®—æ³•ä¸­ï¼Œæ¯ä¸€å±‚å¤„ç†çš„æ•°æ®é‡ä¸º O(n) çº§åˆ«ï¼ŒåŒæ—¶æœ‰ &lt;code&gt;logn&lt;/code&gt; å±‚ï¼Œæ—¶é—´å¤æ‚åº¦ä¾¿æ˜¯ O(nlogn)ã€‚&lt;/p&gt;
&lt;h4 id=&quot;h-9&quot;&gt;æœ€å¥½ã€æœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦&lt;/h4&gt;
&lt;p&gt;&lt;img title=&quot;&quot; src=&quot;https://bucket-1257126549.cos.ap-guangzhou.myqcloud.com/20181215142013.gif&quot; alt=&quot;&quot;/&gt;&lt;br/&gt;æœ€å¥½ã€æœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦æŒ‡çš„æ˜¯ç‰¹æ®Šæƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦ã€‚&lt;/p&gt;

&lt;p&gt;åŠ¨å›¾è¡¨æ˜çš„æ˜¯åœ¨æ•°ç»„ array ä¸­å¯»æ‰¾å˜é‡ x ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œè‹¥æ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™è¿”å› -1ï¼›å¦åˆ™è¿”å›ä½ç½®ä¸‹æ ‡ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;hljs cpp&quot;&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;1&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;int &lt;span class=&quot;hljs-title&quot;&gt;find&lt;span class=&quot;hljs-params&quot;&gt;(&lt;span class=&quot;hljs-keyword&quot;&gt;int[] &lt;span class=&quot;hljs-built_in&quot;&gt;array, &lt;span class=&quot;hljs-keyword&quot;&gt;int n, &lt;span class=&quot;hljs-keyword&quot;&gt;int x) {&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;2  &lt;span class=&quot;hljs-keyword&quot;&gt;for (  &lt;span class=&quot;hljs-keyword&quot;&gt;int i = &lt;span class=&quot;hljs-number&quot;&gt;0 ; i &amp;lt; n; i++) {&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;3    &lt;span class=&quot;hljs-keyword&quot;&gt;if (&lt;span class=&quot;hljs-built_in&quot;&gt;array[i] == x) {&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;4        &lt;span class=&quot;hljs-keyword&quot;&gt;return i;&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;5        &lt;span class=&quot;hljs-keyword&quot;&gt;break;&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;6    }&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;7  }&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;8  &lt;span class=&quot;hljs-keyword&quot;&gt;return &lt;span class=&quot;hljs-number&quot;&gt;-1;&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt;9}&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨è¿™é‡Œå½“æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ å°±æ˜¯è¦æ‰¾çš„ x æ—¶ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(1)ï¼›è€Œå½“æœ€åä¸€ä¸ªå…ƒç´ æ‰æ˜¯ x æ—¶ï¼Œæ—¶é—´å¤æ‚åº¦åˆ™æ˜¯ O(n)ã€‚&lt;/p&gt;
&lt;p&gt;æœ€å¥½æƒ…å†µæ—¶é—´å¤æ‚åº¦å°±æ˜¯åœ¨æœ€ç†æƒ³æƒ…å†µä¸‹æ‰§è¡Œä»£ç çš„æ—¶é—´å¤æ‚åº¦ï¼Œå®ƒçš„æ—¶é—´æ˜¯æœ€çŸ­çš„ï¼›æœ€åæƒ…å†µæ—¶é—´å¤æ‚åº¦å°±æ˜¯åœ¨æœ€ç³Ÿç³•æƒ…å†µä¸‹æ‰§è¡Œä»£ç çš„æ—¶é—´å¤æ‚åº¦ï¼Œå®ƒçš„æ—¶é—´æ˜¯æœ€é•¿çš„ã€‚&lt;/p&gt;
&lt;h4 id=&quot;h-10&quot;&gt;å¹³å‡æƒ…å†µæ—¶é—´å¤æ‚åº¦&lt;/h4&gt;
&lt;p&gt;æœ€å¥½ã€æœ€åæ—¶é—´å¤æ‚åº¦ååº”çš„æ˜¯æç«¯æ¡ä»¶ä¸‹çš„å¤æ‚åº¦ï¼Œå‘ç”Ÿçš„æ¦‚ç‡ä¸å¤§ï¼Œä¸èƒ½ä»£è¡¨å¹³å‡æ°´å¹³ã€‚é‚£ä¹ˆä¸ºäº†æ›´å¥½çš„è¡¨ç¤ºå¹³å‡æƒ…å†µä¸‹çš„ç®—æ³•å¤æ‚åº¦ï¼Œå°±éœ€è¦å¼•å…¥å¹³å‡æ—¶é—´å¤æ‚åº¦ã€‚&lt;/p&gt;
&lt;p&gt;å¹³å‡æƒ…å†µæ—¶é—´å¤æ‚åº¦å¯ç”¨ä»£ç åœ¨æ‰€æœ‰å¯èƒ½æƒ…å†µä¸‹æ‰§è¡Œæ¬¡æ•°çš„åŠ æƒå¹³å‡å€¼è¡¨ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;è¿˜æ˜¯ä»¥ &lt;code&gt;find&lt;/code&gt; å‡½æ•°ä¸ºä¾‹ï¼Œä»æ¦‚ç‡çš„è§’åº¦çœ‹ï¼Œ x åœ¨æ•°ç»„ä¸­æ¯ä¸€ä¸ªä½ç½®çš„å¯èƒ½æ€§æ˜¯ç›¸åŒçš„ï¼Œä¸º 1 / nã€‚é‚£ä¹ˆï¼Œé‚£ä¹ˆå¹³å‡æƒ…å†µæ—¶é—´å¤æ‚åº¦å°±å¯ä»¥ç”¨ä¸‹é¢çš„æ–¹å¼è®¡ç®—ï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;((1 + 2 + â€¦ + n) / n + n) / 2 = (3n + 1) / 4&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;find&lt;/code&gt; å‡½æ•°çš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚&lt;/p&gt;
&lt;h4 id=&quot;h-11&quot;&gt;å‡æ‘Šå¤æ‚åº¦åˆ†æ&lt;/h4&gt;
&lt;p&gt;æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªåŠ¨æ€æ•°ç»„çš„ &lt;code&gt;push_back&lt;/code&gt; æ“ä½œæ¥ç†è§£ &lt;strong&gt;å‡æ‘Šå¤æ‚åº¦&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img title=&quot;&quot; src=&quot;https://bucket-1257126549.cos.ap-guangzhou.myqcloud.com/20181215140128.gif&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;hljs cpp&quot;&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 1&lt;span class=&quot;hljs-keyword&quot;&gt;template &amp;lt;&lt;span class=&quot;hljs-keyword&quot;&gt;typename T&amp;gt;&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 2&lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class &lt;span class=&quot;hljs-title&quot;&gt;MyVector{&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 3&lt;span class=&quot;hljs-keyword&quot;&gt;private:&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 4    T* data;&lt;br/&gt;&lt;span class=&quot;linenum hljs-number&quot;&gt; 5    &lt;span class=&quot;hljs-keyword&quot;&gt;int size;       &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;push_back&lt;/code&gt;å®ç°çš„åŠŸèƒ½æ˜¯å¾€æ•°ç»„çš„æœ«å°¾å¢åŠ ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœæ•°ç»„æ²¡æœ‰æ»¡ï¼Œç›´æ¥å¾€åé¢æ’å…¥å…ƒç´ ï¼›å¦‚æœæ•°ç»„æ»¡äº†ï¼Œå³ &lt;code&gt;size == capacity&lt;/code&gt; ï¼Œåˆ™å°†æ•°ç»„æ‰©å®¹ä¸€å€ï¼Œç„¶åå†æ’å…¥å…ƒç´ ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œæ•°ç»„é•¿åº¦ä¸º nï¼Œåˆ™å‰ n æ¬¡è°ƒç”¨ &lt;code&gt;push_back&lt;/code&gt; å¤æ‚åº¦éƒ½ä¸º O(1) çº§åˆ«ï¼›åœ¨ç¬¬ n + 1 æ¬¡åˆ™éœ€è¦å…ˆè¿›è¡Œ n æ¬¡å…ƒç´ è½¬ç§»æ“ä½œï¼Œç„¶åå†è¿›è¡Œ 1 æ¬¡æ’å…¥æ“ä½œï¼Œå¤æ‚åº¦ä¸º O(n)ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œå¹³å‡æ¥çœ‹ï¼šå¯¹äºå®¹é‡ä¸º n çš„åŠ¨æ€æ•°ç»„ï¼Œå‰é¢æ·»åŠ å…ƒç´ éœ€è¦æ¶ˆè€—äº† 1 * n çš„æ—¶é—´ï¼Œæ‰©å®¹æ“ä½œæ¶ˆè€— n æ—¶é—´ ï¼Œ&lt;br/&gt;æ€»å…±å°±æ˜¯ 2 * n çš„æ—¶é—´ï¼Œå› æ­¤å‡æ‘Šæ—¶é—´å¤æ‚åº¦ä¸º O(2n / n) = O(2)ï¼Œä¹Ÿå°±æ˜¯ O(1) çº§åˆ«äº†ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥å¾—å‡ºä¸€ä¸ªæ¯”è¾ƒæœ‰æ„æ€çš„ç»“è®ºï¼šä¸€ä¸ªç›¸å¯¹æ¯”è¾ƒè€—æ—¶çš„æ“ä½œï¼Œå¦‚æœèƒ½ä¿è¯å®ƒä¸ä¼šæ¯æ¬¡éƒ½è¢«è§¦å‘ï¼Œé‚£ä¹ˆè¿™ä¸ªç›¸å¯¹æ¯”è¾ƒè€—æ—¶çš„æ“ä½œï¼Œå®ƒæ‰€ç›¸åº”çš„æ—¶é—´æ˜¯å¯ä»¥åˆ†æ‘Šåˆ°å…¶å®ƒçš„æ“ä½œä¸­æ¥çš„ã€‚&lt;/p&gt;
&lt;h2 id=&quot;h-12&quot;&gt;ç«ä¹‹æ™¨æ›¦ï¼šç©ºé—´å¤æ‚åº¦&lt;/h2&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ï¼Œåˆ°å¤„éƒ½æ˜¯ğŸ”¥&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸€ä¸ªç¨‹åºçš„ç©ºé—´å¤æ‚åº¦æ˜¯æŒ‡è¿è¡Œå®Œä¸€ä¸ªç¨‹åºæ‰€éœ€å†…å­˜çš„å¤§å°ã€‚åˆ©ç”¨ç¨‹åºçš„ç©ºé—´å¤æ‚åº¦ï¼Œå¯ä»¥å¯¹ç¨‹åºçš„è¿è¡Œæ‰€éœ€è¦çš„å†…å­˜å¤šå°‘æœ‰ä¸ªé¢„å…ˆä¼°è®¡ã€‚ä¸€ä¸ªç¨‹åºæ‰§è¡Œæ—¶é™¤äº†éœ€è¦å­˜å‚¨ç©ºé—´å’Œå­˜å‚¨æœ¬èº«æ‰€ä½¿ç”¨çš„æŒ‡ä»¤ã€å¸¸æ•°ã€å˜é‡å’Œè¾“å…¥æ•°æ®å¤–ï¼Œè¿˜éœ€è¦ä¸€äº›å¯¹æ•°æ®è¿›è¡Œæ“ä½œçš„å·¥ä½œå•å…ƒå’Œå­˜å‚¨ä¸€äº›ä¸ºç°å®è®¡ç®—æ‰€éœ€ä¿¡æ¯çš„è¾…åŠ©ç©ºé—´ã€‚ç¨‹åºæ‰§è¡Œæ—¶æ‰€éœ€å­˜å‚¨ç©ºé—´åŒ…æ‹¬ä»¥ä¸‹ä¸¤éƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;p&gt;(1) å›ºå®šéƒ¨åˆ†ï¼Œè¿™éƒ¨åˆ†ç©ºé—´çš„å¤§å°ä¸è¾“å…¥/è¾“å‡ºçš„æ•°æ®çš„ä¸ªæ•°å¤šå°‘ã€æ•°å€¼æ— å…³ã€‚ä¸»è¦åŒ…æ‹¬æŒ‡ä»¤ç©ºé—´ï¼ˆå³ä»£ç ç©ºé—´ï¼‰ã€æ•°æ®ç©ºé—´ï¼ˆå¸¸é‡ã€ç®€å•å˜é‡ï¼‰ç­‰æ‰€å çš„ç©ºé—´ã€‚è¿™éƒ¨åˆ†å±äºé™æ€ç©ºé—´ã€‚&lt;/p&gt;
&lt;p&gt;(2) å¯å˜ç©ºé—´ï¼Œè¿™éƒ¨åˆ†ç©ºé—´çš„ä¸»è¦åŒ…æ‹¬åŠ¨æ€åˆ†é…çš„ç©ºé—´ï¼Œä»¥åŠé€’å½’æ ˆæ‰€éœ€çš„ç©ºé—´ç­‰ã€‚è¿™éƒ¨åˆ†çš„ç©ºé—´å¤§å°ä¸ç®—æ³•æœ‰å…³ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªç®—æ³•æ‰€éœ€çš„å­˜å‚¨ç©ºé—´ç”¨f(n)è¡¨ç¤ºã€‚S(n)=O(f(n))ï¼Œå…¶ä¸­nä¸ºé—®é¢˜çš„è§„æ¨¡ï¼ŒS(n)è¡¨ç¤ºç©ºé—´å¤æ‚åº¦ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç©ºé—´å¤æ‚åº¦å¯ä»¥ç†è§£ä¸ºé™¤äº†åŸå§‹åºåˆ—å¤§å°çš„å†…å­˜ï¼Œåœ¨ç®—æ³•è¿‡ç¨‹ä¸­ç”¨åˆ°çš„é¢å¤–çš„å­˜å‚¨ç©ºé—´ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä»¥äºŒå‰æŸ¥æ‰¾æ ‘ä¸ºä¾‹ï¼Œä¸¾ä¾‹è¯´æ˜äºŒå‰æ’åºæ ‘çš„æŸ¥æ‰¾æ€§èƒ½ã€‚&lt;/p&gt;
&lt;h3 id=&quot;h-13&quot;&gt;å¹³è¡¡äºŒå‰æ ‘&lt;/h3&gt;
&lt;p&gt;å¦‚æœäºŒå‰æ ‘çš„æ˜¯ä»¥çº¢é»‘æ ‘ç­‰å¹³è¡¡äºŒå‰æ ‘å®ç°çš„ï¼Œåˆ™ n ä¸ªèŠ‚ç‚¹çš„äºŒå‰æ’åºæ ‘çš„é«˜åº¦ä¸º log2n+1 ï¼Œå…¶æŸ¥æ‰¾æ•ˆç‡ä¸ºO(Log2n)ï¼Œè¿‘ä¼¼äºæŠ˜åŠæŸ¥æ‰¾ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img title=&quot;&quot; src=&quot;https://bucket-1257126549.cos.ap-guangzhou.myqcloud.com/20181216214208.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;h-14&quot;&gt;åˆ—è¡¨äºŒå‰æ ‘&lt;/h3&gt;
&lt;p&gt;å¦‚æœäºŒå‰æ ‘é€€å˜ä¸ºåˆ—è¡¨äº†ï¼Œåˆ™ n ä¸ªèŠ‚ç‚¹çš„é«˜åº¦æˆ–è€…è¯´æ˜¯é•¿åº¦å˜ä¸ºäº†nï¼ŒæŸ¥æ‰¾æ•ˆç‡ä¸ºO(n)ï¼Œå˜æˆäº†é¡ºåºæŸ¥æ‰¾ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img title=&quot;&quot; src=&quot;https://bucket-1257126549.cos.ap-guangzhou.myqcloud.com/20181216214554.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;h-15&quot;&gt;ä¸€èˆ¬äºŒå‰æ ‘&lt;/h3&gt;
&lt;p&gt;ä»‹äºã€Œåˆ—è¡¨äºŒå‰æ ‘ã€ä¸ã€Œå¹³è¡¡äºŒå‰æ ‘ã€ä¹‹é—´ï¼ŒæŸ¥æ‰¾æ€§èƒ½ä¹Ÿåœ¨O(Log2n)åˆ°O(n)ä¹‹é—´ã€‚&lt;/p&gt;
&lt;h2 id=&quot;h-16&quot;&gt;å†°ç«äº¤è&lt;/h2&gt;
&lt;p&gt;å¯¹äºä¸€ä¸ªç®—æ³•ï¼Œå…¶æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦å¾€å¾€æ˜¯ç›¸äº’å½±å“çš„ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚è¯´ï¼Œè¦åˆ¤æ–­æŸæŸå¹´æ˜¯ä¸æ˜¯é—°å¹´ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;1. å¯ä»¥ç¼–å†™ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œæ¯æ¬¡ç»™ä¸€ä¸ªå¹´ä»½ï¼Œéƒ½æ˜¯è¦é€šè¿‡è®¡ç®—å¾—åˆ°æ˜¯å¦æ˜¯é—°å¹´çš„ç»“æœã€‚&lt;/li&gt;
&lt;li&gt;2. è¿˜æœ‰å¦ä¸€ä¸ªåŠæ³•å°±æ˜¯ï¼Œäº‹å…ˆå»ºç«‹ä¸€ä¸ªæœ‰ 5555 ä¸ªå…ƒç´ çš„æ•°ç»„ï¼ˆå¹´æ•°æ¯”ç°å®å¤šå°±è¡Œï¼‰ï¼Œç„¶åæŠŠæ‰€æœ‰çš„å¹´ä»½æŒ‰ä¸‹æ ‡çš„æ•°å­—å¯¹åº”ï¼Œå¦‚æœæ˜¯é—°å¹´ï¼Œæ­¤æ•°ç»„é¡¹çš„å€¼å°±æ˜¯1ï¼Œå¦‚æœä¸æ˜¯å€¼ä¸º0ã€‚è¿™æ ·ï¼Œæ‰€è°“çš„åˆ¤æ–­æŸä¸€å¹´æ˜¯å¦æ˜¯é—°å¹´ï¼Œå°±å˜æˆäº†æŸ¥æ‰¾è¿™ä¸ªæ•°ç»„çš„æŸä¸€é¡¹çš„å€¼æ˜¯å¤šå°‘çš„é—®é¢˜ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬çš„è¿ç®—æ˜¯æœ€å°åŒ–äº†ï¼Œä½†æ˜¯ç¡¬ç›˜ä¸Šæˆ–è€…å†…å­˜ä¸­éœ€è¦å­˜å‚¨è¿™ 5555 ä¸ª 0 å’Œ 1 ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;è¿™å°±æ˜¯å…¸å‹çš„ä½¿ç”¨ç©ºé—´æ¢æ—¶é—´çš„æ¦‚å¿µã€‚&lt;/p&gt;
&lt;p&gt;å½“è¿½æ±‚ä¸€ä¸ªè¾ƒå¥½çš„æ—¶é—´å¤æ‚åº¦æ—¶ï¼Œå¯èƒ½ä¼šä½¿ç©ºé—´å¤æ‚åº¦çš„æ€§èƒ½å˜å·®ï¼Œå³å¯èƒ½å¯¼è‡´å ç”¨è¾ƒå¤šçš„å­˜å‚¨ç©ºé—´ï¼›&lt;br/&gt;åä¹‹ï¼Œæ±‚ä¸€ä¸ªè¾ƒå¥½çš„ç©ºé—´å¤æ‚åº¦æ—¶ï¼Œå¯èƒ½ä¼šä½¿æ—¶é—´å¤æ‚åº¦çš„æ€§èƒ½å˜å·®ï¼Œå³å¯èƒ½å¯¼è‡´å ç”¨è¾ƒé•¿çš„è¿è¡Œæ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–ï¼Œç®—æ³•çš„æ‰€æœ‰æ€§èƒ½ä¹‹é—´éƒ½å­˜åœ¨ç€æˆ–å¤šæˆ–å°‘çš„ç›¸äº’å½±å“ã€‚å› æ­¤ï¼Œå½“è®¾è®¡ä¸€ä¸ªç®—æ³•(ç‰¹åˆ«æ˜¯å¤§å‹ç®—æ³•)æ—¶ï¼Œè¦ç»¼åˆè€ƒè™‘ç®—æ³•çš„å„é¡¹æ€§èƒ½ï¼Œç®—æ³•çš„ä½¿ç”¨é¢‘ç‡ï¼Œç®—æ³•å¤„ç†çš„æ•°æ®é‡çš„å¤§å°ï¼Œç®—æ³•æè¿°è¯­è¨€çš„ç‰¹æ€§ï¼Œç®—æ³•è¿è¡Œçš„æœºå™¨ç³»ç»Ÿç¯å¢ƒç­‰å„æ–¹é¢å› ç´ ï¼Œæ‰èƒ½å¤Ÿè®¾è®¡å‡ºæ¯”è¾ƒå¥½çš„ç®—æ³•ã€‚&lt;/p&gt;

&lt;p&gt;æ›´å¤šå†…å®¹ï¼š&lt;a href=&quot;https://github.com/MisterBooo/LeetCodeAnimation&quot;&gt;https://github.com/MisterBooo/LeetCodeAnimation&lt;/a&gt;&lt;/p&gt;

</description>
<pubDate>Tue, 18 Dec 2018 07:56:00 +0000</pubDate>
<dc:creator>äº”åˆ†é’Ÿå­¦ç®—æ³•</dc:creator>
<og:description>ç®—æ³•ï¼ˆAlgorithmï¼‰æ˜¯æŒ‡ç”¨æ¥æ“ä½œæ•°æ®ã€è§£å†³ç¨‹åºé—®é¢˜çš„ä¸€ç»„æ–¹æ³•ã€‚å¯¹äºåŒä¸€ä¸ªé—®é¢˜ï¼Œä½¿ç”¨ä¸åŒçš„ç®—æ³•ï¼Œä¹Ÿè®¸æœ€ç»ˆå¾—åˆ°çš„ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œæ¯”å¦‚æ’åºå°±æœ‰å‰é¢çš„åå¤§ç»å…¸æ’åºå’Œå‡ ç§å¥‡è‘©æ’åºï¼Œè™½ç„¶ç»“æœç›¸åŒï¼Œä½†åœ¨è¿‡ç¨‹ä¸­æ¶ˆ</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/fivestudy/p/10137699.html</dc:identifier>
</item>
<item>
<title>åˆè¯†ä¸­é—´ä»¶Kafka - SimpleWu</title>
<link>http://www.cnblogs.com/SimpleWu/p/10137494.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/SimpleWu/p/10137494.html</guid>
<description>&lt;blockquote&gt;
&lt;p&gt;Authorï¼šSimplelWu&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h5 id=&quot;ä»€ä¹ˆæ˜¯æ¶ˆæ¯ä¸­é—´ä»¶&quot;&gt;ä»€ä¹ˆæ˜¯æ¶ˆæ¯ä¸­é—´ä»¶ï¼Ÿ&lt;/h5&gt;
&lt;ul&gt;&lt;li&gt;éåº•å±‚æ“ä½œç³»ç»Ÿè½¯ä»¶ï¼Œéä¸šåŠ¡åº”ç”¨è½¯ä»¶ï¼Œä¸æ˜¯ç›´æ¥ç»™æœ€ç»ˆç”¨æˆ·ä½¿ç”¨çš„ï¼Œä¸èƒ½ç›´æ¥ç»™å®¢æˆ·å¸¦æ¥ä»·å€¼çš„è½¯ä»¶ç»Ÿç§°ä¸ºä¸­é—´ä»¶&lt;/li&gt;
&lt;li&gt;å…³æ³¨äºæ•°æ®çš„å‘é€å’Œæ¥æ”¶ï¼Œåˆ©ç”¨é«˜æ•ˆå¯é çš„å¼‚æ­¥æ¶ˆæ¯ä¼ é€’æœºåˆ¶é›†æˆåˆ†å¸ƒå¼ç³»ç»Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h5 id=&quot;ä»€ä¹ˆæ˜¯kafka&quot;&gt;ä»€ä¹ˆæ˜¯Kafkaï¼Ÿ&lt;/h5&gt;
&lt;p&gt;Kafkaæ˜¯ä¸€ç§é«˜ååé‡çš„åˆ†å¸ƒå¼å‘å¸ƒè®¢é˜…æ¶ˆæ¯ç³»ç»Ÿï¼Œæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ã€åˆ†åŒºçš„ã€å¯é çš„åˆ†å¸ƒå¼æ—¥å¿—å­˜å‚¨æœåŠ¡ã€‚å®ƒé€šè¿‡ä¸€ç§ç‹¬ä¸€æ— äºŒçš„è®¾è®¡æä¾›äº†ä¸€ä¸ªæ¶ˆæ¯ç³»ç»Ÿçš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;kafkaå®˜æ–¹ï¼š&lt;a href=&quot;http://kafka.apache.org/&quot; class=&quot;uri&quot;&gt;http://kafka.apache.org/&lt;/a&gt;&lt;/p&gt;
&lt;h5 id=&quot;kafkaä½œä¸ºä¸€ä¸ªåˆ†å¸ƒå¼çš„æµå¹³å°è¿™åˆ°åº•æ„å‘³ç€ä»€ä¹ˆ&quot;&gt;Kafkaä½œä¸ºä¸€ä¸ªåˆ†å¸ƒå¼çš„æµå¹³å°ï¼Œè¿™åˆ°åº•æ„å‘³ç€ä»€ä¹ˆï¼Ÿ&lt;/h5&gt;
&lt;p&gt;æˆ‘ä»¬è®¤ä¸ºï¼Œä¸€ä¸ªæµå¤„ç†å¹³å°å…·æœ‰ä¸‰ä¸ªå…³é”®èƒ½åŠ›ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å‘å¸ƒå’Œè®¢é˜…æ¶ˆæ¯ï¼ˆæµï¼‰ï¼Œåœ¨è¿™æ–¹é¢ï¼Œå®ƒç±»ä¼¼äºä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—æˆ–ä¼ä¸šæ¶ˆæ¯ç³»ç»Ÿã€‚&lt;/li&gt;
&lt;li&gt;ä»¥&lt;code&gt;å®¹é”™&lt;/code&gt;çš„æ–¹å¼å­˜å‚¨æ¶ˆæ¯ï¼ˆæµï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨æ¶ˆæ¯æµå‘ç”Ÿæ—¶å¤„ç†å®ƒä»¬ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h5 id=&quot;ä»€ä¹ˆæ˜¯kakfaçš„ä¼˜åŠ¿&quot;&gt;ä»€ä¹ˆæ˜¯kakfaçš„ä¼˜åŠ¿?&lt;/h5&gt;
&lt;p&gt;å®ƒåº”ç”¨äº2å¤§ç±»åº”ç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æ„å»ºå®æ—¶çš„æµæ•°æ®ç®¡é“ï¼Œå¯é åœ°è·å–ç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºä¹‹é—´çš„æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;æ„å»ºå®æ—¶æµçš„åº”ç”¨ç¨‹åºï¼Œå¯¹æ•°æ®æµè¿›è¡Œè½¬æ¢æˆ–ååº”ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h5 id=&quot;kafkaæœ‰å››ä¸ªæ ¸å¿ƒapi&quot;&gt;kafkaæœ‰å››ä¸ªæ ¸å¿ƒAPI&lt;/h5&gt;
&lt;ul&gt;&lt;li&gt;åº”ç”¨ç¨‹åºä½¿ç”¨ &lt;code&gt;Producer API&lt;/code&gt; å‘å¸ƒæ¶ˆæ¯åˆ°1ä¸ªæˆ–å¤šä¸ªtopicï¼ˆä¸»é¢˜ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;åº”ç”¨ç¨‹åºä½¿ç”¨ &lt;code&gt;Consumer API&lt;/code&gt; æ¥è®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ªtopicï¼Œå¹¶å¤„ç†äº§ç”Ÿçš„æ¶ˆæ¯ã€‚&lt;/li&gt;
&lt;li&gt;åº”ç”¨ç¨‹åºä½¿ç”¨ &lt;code&gt;Streams API&lt;/code&gt; å……å½“ä¸€ä¸ªæµå¤„ç†å™¨ï¼Œä»1ä¸ªæˆ–å¤šä¸ªtopicæ¶ˆè´¹è¾“å…¥æµï¼Œå¹¶ç”Ÿäº§ä¸€ä¸ªè¾“å‡ºæµåˆ°1ä¸ªæˆ–å¤šä¸ªè¾“å‡ºtopicï¼Œæœ‰æ•ˆåœ°å°†è¾“å…¥æµè½¬æ¢åˆ°è¾“å‡ºæµã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Connector API&lt;/code&gt;å…è®¸æ„å»ºæˆ–è¿è¡Œå¯é‡å¤ä½¿ç”¨çš„ç”Ÿäº§è€…æˆ–æ¶ˆè´¹è€…ï¼Œå°†topicè¿æ¥åˆ°ç°æœ‰çš„åº”ç”¨ç¨‹åºæˆ–æ•°æ®ç³»ç»Ÿã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå…³ç³»æ•°æ®åº“çš„è¿æ¥å™¨å¯æ•è·æ¯ä¸€ä¸ªå˜åŒ–ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;http://img.orchome.com:8888/group1/M00/00/01/KmCudlf7DXiAVXBMAAFScKNS-Og538.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Clientå’ŒServerä¹‹é—´çš„é€šè®¯ï¼Œæ˜¯é€šè¿‡ä¸€æ¡ç®€å•ã€é«˜æ€§èƒ½å¹¶ä¸”å’Œå¼€å‘è¯­è¨€æ— å…³çš„&lt;a href=&quot;https://kafka.apache.org/protocol.html&quot;&gt;TCPåè®®&lt;/a&gt;ã€‚å¹¶ä¸”è¯¥åè®®ä¿æŒä¸è€ç‰ˆæœ¬çš„å…¼å®¹ã€‚Kafkaæä¾›äº†Java Clientï¼ˆå®¢æˆ·ç«¯ï¼‰ã€‚é™¤äº†Java Clientå¤–ï¼Œè¿˜æœ‰éå¸¸å¤šçš„&lt;a href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/Clients&quot;&gt;å…¶å®ƒç¼–ç¨‹è¯­è¨€çš„Client&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h5 id=&quot;ä¸»æµæ¶ˆæ¯ä¸­é—´ä»¶æ¯”è¾ƒ&quot;&gt;ä¸»æµæ¶ˆæ¯ä¸­é—´ä»¶æ¯”è¾ƒ&lt;/h5&gt;
&lt;table&gt;&lt;thead/&gt;&lt;tbody readability=&quot;11&quot;&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;è·¨è¯­è¨€&lt;/td&gt;
&lt;td&gt;æ”¯æŒï¼ˆJavaä¼˜å…ˆï¼‰&lt;/td&gt;
&lt;td&gt;è¯­è¨€æ— å…³&lt;/td&gt;
&lt;td&gt;æ”¯æŒï¼ˆJavaä¼˜å…ˆï¼‰&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;even&quot; readability=&quot;2&quot;&gt;&lt;td&gt;æ”¯æŒåè®®&lt;/td&gt;
&lt;td&gt;OpenWireï¼ŒStompï¼Œ XMPPï¼ŒAMQP&lt;/td&gt;
&lt;td&gt;AMQP&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr class=&quot;odd&quot; readability=&quot;6&quot;&gt;&lt;td&gt;ä¼˜ç‚¹&lt;/td&gt;
&lt;td&gt;éµå¾ªJMSè§„èŒƒï¼Œå®‰è£…éƒ¨ç½²æ–¹ä¾¿ã€‚&lt;/td&gt;
&lt;td&gt;ç»§æ‰¿Erlangå¤©ç”Ÿçš„å¹¶å‘æ€§ï¼Œæœ€åˆç”¨äºé‡‘èè¡Œä¸šï¼Œç¨³å®šæ€§ï¼Œå®‰å…¨æ€§æœ‰ä¿éšœã€‚&lt;/td&gt;
&lt;td&gt;ä¾èµ–zkï¼Œå¯åŠ¨æ€æ‰©å±•èŠ‚ç‚¹ï¼Œé«˜æ€§èƒ½ï¼Œé«˜ååé‡ï¼Œæ— çº¿æ‰©å®¹æ¶ˆæ¯å¯æŒ‡å®šè¿½æº¯ã€‚&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;even&quot; readability=&quot;8&quot;&gt;&lt;td&gt;ç¼ºç‚¹&lt;/td&gt;
&lt;td&gt;æ ¹æ®å…¶ä»–ç”¨æˆ·åé¦ˆï¼Œä¼šè«åä¸¢å¤±æ¶ˆæ¯ï¼Œç›®å‰é‡å¿ƒåœ¨ä¸‹ä¸€ä»£çš„apolleä¸Šï¼Œç›®å‰ç¤¾åŒºä¸æ´»è·ƒï¼Œå¯¹5.Xç»´æŠ¤è¾ƒå°‘ã€‚&lt;/td&gt;
&lt;td&gt;Erlangè¯­è¨€éš¾åº¦è¾ƒå¤§ï¼Œä¸æ”¯æŒåŠ¨æ€æ‰©å±•ã€‚&lt;/td&gt;
&lt;td&gt;ä¸¥æ ¼çš„é¡ºåºæœºåˆ¶ï¼Œä¸æ”¯æŒæ¶ˆæ¯ä¼˜å…ˆçº§ï¼Œä¸æ”¯æŒæ ‡å‡†çš„æ¶ˆæ¯åè®®ï¼Œä¸åˆ©äºå¹³å°è¿ç§»ã€‚&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;odd&quot; readability=&quot;6&quot;&gt;&lt;td&gt;ç»¼åˆè¯„ä»·&lt;/td&gt;
&lt;td&gt;é€‚åˆä¸­å°ä¼ä¸šæ¶ˆæ¯åº”ç”¨åœºæ™¯ï¼Œä¸é€‚åˆä¸Šåƒä¸ªé˜Ÿåˆ—çš„åº”ç”¨åœºæ™¯ã€‚&lt;/td&gt;
&lt;td&gt;é€‚åˆå¯¹ç¨³å®šæ€§è¦æ±‚è¾ƒé«˜çš„ä¼ä¸šåº”ç”¨ã€‚&lt;/td&gt;
&lt;td&gt;ä¸€èˆ¬åº”ç”¨åœ¨å¤§æ•°æ®æ—¥å¿—å¤„ç†æˆ–å¯¹å®æ—¶æ€§ï¼Œå¯é æ€§è¦æ±‚ç¨ä½çš„åœºæ™¯ã€‚&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h5 id=&quot;kafkaå¥½å¤„&quot;&gt;Kafkaå¥½å¤„&lt;/h5&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;å¯é æ€§&lt;/strong&gt; - Kafkaæ˜¯åˆ†å¸ƒå¼ï¼Œåˆ†åŒºï¼Œå¤åˆ¶å’Œå®¹é”™çš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯æ‰©å±•æ€§&lt;/strong&gt; - Kafkaæ¶ˆæ¯ä¼ é€’ç³»ç»Ÿè½»æ¾ç¼©æ”¾ï¼Œæ— éœ€åœæœºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è€ç”¨æ€§&lt;/strong&gt; - Kafkaä½¿ç”¨åˆ†å¸ƒå¼æäº¤æ—¥å¿—ï¼Œè¿™æ„å‘³ç€æ¶ˆæ¯ä¼šå°½å¯èƒ½å¿«åœ°ä¿ç•™åœ¨ç£ç›˜ä¸Šï¼Œå› æ­¤å®ƒæ˜¯æŒä¹…çš„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt; - Kafkaå¯¹äºå‘å¸ƒå’Œè®¢é˜…æ¶ˆæ¯éƒ½å…·æœ‰é«˜ååé‡ã€‚ å³ä½¿å­˜å‚¨äº†è®¸å¤šTBçš„æ¶ˆæ¯ï¼Œå®ƒä¹Ÿä¿æŒç¨³å®šçš„æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Kafkaéå¸¸å¿«ï¼Œå¹¶ä¿è¯é›¶åœæœºå’Œé›¶æ•°æ®ä¸¢å¤±ã€‚&lt;/p&gt;
&lt;h5 id=&quot;åº”ç”¨åœºæ™¯&quot;&gt;&lt;strong&gt;åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/h5&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;æŒ‡æ ‡&lt;/strong&gt; - Kafkaé€šå¸¸ç”¨äºæ“ä½œç›‘æ§æ•°æ®ã€‚ è¿™æ¶‰åŠèšåˆæ¥è‡ªåˆ†å¸ƒå¼åº”ç”¨ç¨‹åºçš„ç»Ÿè®¡ä¿¡æ¯ï¼Œä»¥äº§ç”Ÿæ“ä½œæ•°æ®çš„é›†ä¸­é¦ˆé€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ—¥å¿—èšåˆè§£å†³æ–¹æ¡ˆ&lt;/strong&gt; - Kafkaå¯ç”¨äºè·¨ç»„ç»‡ä»å¤šä¸ªæœåŠ¡æ”¶é›†æ—¥å¿—ï¼Œå¹¶ä½¿å®ƒä»¬ä»¥æ ‡å‡†æ ¼å¼æä¾›ç»™å¤šä¸ªæœåŠ¡å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æµå¤„ç†&lt;/strong&gt; - æµè¡Œçš„æ¡†æ¶(å¦‚Stormå’ŒSpark Streaming)ä»ä¸»é¢˜ä¸­è¯»å–æ•°æ®ï¼Œå¯¹å…¶è¿›è¡Œå¤„ç†ï¼Œå¹¶å°†å¤„ç†åçš„æ•°æ®å†™å…¥æ–°ä¸»é¢˜ï¼Œä¾›ç”¨æˆ·å’Œåº”ç”¨ç¨‹åºä½¿ç”¨ã€‚ Kafkaçš„å¼ºè€ä¹…æ€§åœ¨æµå¤„ç†çš„ä¸Šä¸‹æ–‡ä¸­ä¹Ÿéå¸¸æœ‰ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h5 id=&quot;kafkaç›¸å…³æœ¯è¯­&quot;&gt;&lt;strong&gt;Kafkaç›¸å…³æœ¯è¯­&lt;/strong&gt;&lt;/h5&gt;
&lt;table&gt;&lt;thead/&gt;&lt;tbody readability=&quot;17&quot;&gt;&lt;tr class=&quot;odd&quot; readability=&quot;4&quot;&gt;&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Topicsï¼ˆä¸»é¢˜ï¼‰&lt;/strong&gt;å±äºç‰¹å®šç±»åˆ«çš„æ¶ˆæ¯æµç§°ä¸ºä¸»é¢˜ã€‚ æ•°æ®å­˜å‚¨åœ¨ä¸»é¢˜ä¸­ã€‚ä¸»é¢˜è¢«æ‹†åˆ†æˆåˆ†åŒºã€‚ å¯¹äºæ¯ä¸ªä¸»é¢˜ï¼ŒKafkaä¿å­˜ä¸€ä¸ªåˆ†åŒºçš„æ•°æ®ã€‚ æ¯ä¸ªè¿™æ ·çš„åˆ†åŒºåŒ…å«ä¸å¯å˜æœ‰åºåºåˆ—çš„æ¶ˆæ¯ã€‚ åˆ†åŒºè¢«å®ç°ä¸ºå…·æœ‰ç›¸ç­‰å¤§å°çš„ä¸€ç»„åˆ†æ®µæ–‡ä»¶ã€‚&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;even&quot; readability=&quot;2&quot;&gt;&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Partitionï¼ˆåˆ†åŒºï¼‰&lt;/strong&gt;ä¸»é¢˜å¯èƒ½æœ‰è®¸å¤šåˆ†åŒºï¼Œå› æ­¤å®ƒå¯ä»¥å¤„ç†ä»»æ„æ•°é‡çš„æ•°æ®ã€‚&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;odd&quot; readability=&quot;2&quot;&gt;&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Partition offsetï¼ˆåˆ†åŒºåç§»ï¼‰&lt;/strong&gt;æ¯ä¸ªåˆ†åŒºæ¶ˆæ¯å…·æœ‰ç§°ä¸º offset çš„å”¯ä¸€åºåˆ—æ ‡è¯†ã€‚&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;even&quot; readability=&quot;3&quot;&gt;&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Replicas of partitionï¼ˆåˆ†åŒºå¤‡ä»½ï¼‰&lt;/strong&gt;å‰¯æœ¬åªæ˜¯ä¸€ä¸ªåˆ†åŒºçš„å¤‡ä»½ã€‚ å‰¯æœ¬ä»ä¸è¯»å–æˆ–å†™å…¥æ•°æ®ã€‚ å®ƒä»¬ç”¨äºé˜²æ­¢æ•°æ®ä¸¢å¤±ã€‚&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;odd&quot; readability=&quot;5&quot;&gt;&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Brokersï¼ˆç»çºªäººï¼‰&lt;/strong&gt;ä»£ç†æ˜¯è´Ÿè´£ç»´æŠ¤å‘å¸ƒæ•°æ®çš„ç®€å•ç³»ç»Ÿã€‚ æ¯ä¸ªä»£ç†ä¸­çš„æ¯ä¸ªä¸»é¢˜å¯ä»¥å…·æœ‰é›¶ä¸ªæˆ–å¤šä¸ªåˆ†åŒºã€‚ å‡è®¾ï¼Œå¦‚æœåœ¨ä¸€ä¸ªä¸»é¢˜å’ŒNä¸ªä»£ç†ä¸­æœ‰Nä¸ªåˆ†åŒºï¼Œæ¯ä¸ªä»£ç†å°†æœ‰ä¸€ä¸ªåˆ†åŒºã€‚å‡è®¾åœ¨ä¸€ä¸ªä¸»é¢˜ä¸­æœ‰Nä¸ªåˆ†åŒºå¹¶ä¸”å¤šäºNä¸ªä»£ç†(n + m)ï¼Œåˆ™ç¬¬ä¸€ä¸ªNä»£ç†å°†å…·æœ‰ä¸€ä¸ªåˆ†åŒºï¼Œå¹¶ä¸”ä¸‹ä¸€ä¸ªMä»£ç†å°†ä¸å…·æœ‰ç”¨äºè¯¥ç‰¹å®šä¸»é¢˜çš„ä»»ä½•åˆ†åŒºã€‚å‡è®¾åœ¨ä¸€ä¸ªä¸»é¢˜ä¸­æœ‰Nä¸ªåˆ†åŒºå¹¶ä¸”å°äºNä¸ªä»£ç†(n-m)ï¼Œæ¯ä¸ªä»£ç†å°†åœ¨å®ƒä»¬ä¹‹é—´å…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªåˆ†åŒºå…±äº«ã€‚ ç”±äºä»£ç†ä¹‹é—´çš„è´Ÿè½½åˆ†å¸ƒä¸ç›¸ç­‰ï¼Œä¸æ¨èä½¿ç”¨æ­¤æ–¹æ¡ˆã€‚&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;even&quot; readability=&quot;3&quot;&gt;&lt;td&gt;6&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Kafka Clusterï¼ˆKafkaé›†ç¾¤ï¼‰&lt;/strong&gt;Kafkaæœ‰å¤šä¸ªä»£ç†è¢«ç§°ä¸ºKafkaé›†ç¾¤ã€‚ å¯ä»¥æ‰©å±•Kafkaé›†ç¾¤ï¼Œæ— éœ€åœæœºã€‚ è¿™äº›é›†ç¾¤ç”¨äºç®¡ç†æ¶ˆæ¯æ•°æ®çš„æŒä¹…æ€§å’Œå¤åˆ¶ã€‚&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;odd&quot; readability=&quot;5&quot;&gt;&lt;td&gt;7&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Producersï¼ˆç”Ÿäº§è€…ï¼‰&lt;/strong&gt;ç”Ÿäº§è€…æ˜¯å‘é€ç»™ä¸€ä¸ªæˆ–å¤šä¸ªKafkaä¸»é¢˜çš„æ¶ˆæ¯çš„å‘å¸ƒè€…ã€‚ ç”Ÿäº§è€…å‘Kafkaç»çºªäººå‘é€æ•°æ®ã€‚ æ¯å½“ç”Ÿäº§è€…å°†æ¶ˆæ¯å‘å¸ƒç»™ä»£ç†æ—¶ï¼Œä»£ç†åªéœ€å°†æ¶ˆæ¯é™„åŠ åˆ°æœ€åä¸€ä¸ªæ®µæ–‡ä»¶ã€‚ å®é™…ä¸Šï¼Œè¯¥æ¶ˆæ¯å°†è¢«é™„åŠ åˆ°åˆ†åŒºã€‚ ç”Ÿäº§è€…è¿˜å¯ä»¥å‘ä»–ä»¬é€‰æ‹©çš„åˆ†åŒºå‘é€æ¶ˆæ¯ã€‚&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;even&quot; readability=&quot;3&quot;&gt;&lt;td&gt;8&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Consumersï¼ˆæ¶ˆè´¹è€…ï¼‰Consumers&lt;/strong&gt;ä»ç»çºªäººå¤„è¯»å–æ•°æ®ã€‚ æ¶ˆè´¹è€…è®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ªä¸»é¢˜ï¼Œå¹¶é€šè¿‡ä»ä»£ç†ä¸­æå–æ•°æ®æ¥ä½¿ç”¨å·²å‘å¸ƒçš„æ¶ˆæ¯ã€‚&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;odd&quot; readability=&quot;3&quot;&gt;&lt;td&gt;9&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Leaderï¼ˆé¢†å¯¼è€…ï¼‰&lt;/strong&gt; Leader æ˜¯è´Ÿè´£ç»™å®šåˆ†åŒºçš„æ‰€æœ‰è¯»å–å’Œå†™å…¥çš„èŠ‚ç‚¹ã€‚æ¯ä¸ªåˆ†åŒºéƒ½æœ‰ä¸€ä¸ªæœåŠ¡å™¨å……å½“&lt;strong&gt;Leader&lt;/strong&gt; ã€‚&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;even&quot; readability=&quot;4&quot;&gt;&lt;td&gt;10&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;Followerï¼ˆè¿½éšè€…ï¼‰&lt;/strong&gt;è·Ÿéšé¢†å¯¼è€…æŒ‡ä»¤çš„èŠ‚ç‚¹è¢«ç§°ä¸º&lt;strong&gt;Follower&lt;/strong&gt;ã€‚ å¦‚æœé¢†å¯¼å¤±è´¥ï¼Œä¸€ä¸ªè¿½éšè€…å°†è‡ªåŠ¨æˆä¸ºæ–°çš„é¢†å¯¼è€…ã€‚ è·Ÿéšè€…ä½œä¸ºæ­£å¸¸æ¶ˆè´¹è€…ï¼Œæ‹‰å–æ¶ˆæ¯å¹¶æ›´æ–°å…¶è‡ªå·±çš„æ•°æ®å­˜å‚¨ã€‚&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h5 id=&quot;ä½¿ç”¨kafka&quot;&gt;ä½¿ç”¨Kafka&lt;/h5&gt;
&lt;ol&gt;&lt;li&gt;å®‰è£…jdk&lt;/li&gt;
&lt;li&gt;å®‰è£…zookepper å®˜æ–¹ï¼š&lt;a href=&quot;http://zookeeper.apache.org/&quot; class=&quot;uri&quot;&gt;http://zookeeper.apache.org/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;å®‰è£…kafka&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;æˆ‘è¿™é‡Œjdkæ˜¯å·²ç»å®‰è£…å¥½çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®‰è£…zookepperï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;tar -zxvf zookeeper-3.4.13.tar.gz #è§£å‹
cd zookeeper-3.4.13/config #è¿›å…¥é…ç½®ç›®å½•
#zookeeperè¿è¡Œéœ€è¦configé‡Œæœ‰configæ–‡ä»¶ã€‚ä½†æ˜¯è§£å‹åé»˜è®¤åªæœ‰zoo_sample.cfgï¼Œæˆ‘ä»¬å°†åå­—ä¿®æ”¹ä¸‹å³å¯
mv zoo_sample.cfg zoo.cfg #ä¿®æ”¹é…ç½®æ–‡ä»¶åå­—&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯åŠ¨zookeperï¼Œæ¥åˆ°binç›®å½•ï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;./zkServer.sh start #å¯åŠ¨zookepper&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœæ­¢zookeperï¼Œæ¥åˆ°binç›®å½•ï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;./zkServer.sh start #åœæ­¢zookepper&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;kafkaä¸‹è½½ï¼š&lt;a href=&quot;https://www.apache.org/dyn/closer.cgi?path=/kafka/0.9.0.0/kafka_2.11-0.9.0.0.tgz&quot; class=&quot;uri&quot;&gt;https://www.apache.org/dyn/closer.cgi?path=/kafka/0.9.0.0/kafka_2.11-0.9.0.0.tgz&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä½¿ç”¨Kafka&lt;/strong&gt;ï¼Œ&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;tar -zxvf kafka_2.11-2.1.0.tgz #è§£å‹kafka&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯åŠ¨zookpperæœåŠ¡,æ¥åˆ°kafkaçš„binç›®å½•ï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;./zookeeper-server-start.sh config/zookeeper.properties #å¯åŠ¨æœåŠ¡&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯åŠ¨kafkaæœåŠ¡ï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;./kafka-server-start.sh config/server.properties #å¯åŠ¨kafkaæœåŠ¡&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åˆ›å»ºä¸€ä¸ªä¸»é¢˜:&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic test #topic_name&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;topic_nameï¼šä¸»é¢˜çš„åå­—'test'ã€‚&lt;/p&gt;
&lt;p&gt;åˆ›å»ºå¥½åæŸ¥çœ‹ä¸»é¢˜:&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;kafka-topics.sh --list --zookeeper localhost:2181&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Kafkaæä¾›äº†ä¸€ä¸ªå‘½ä»¤è¡Œçš„å·¥å…·ï¼Œå¯ä»¥ä»è¾“å…¥æ–‡ä»¶æˆ–è€…å‘½ä»¤è¡Œä¸­è¯»å–æ¶ˆæ¯å¹¶å‘é€ç»™Kafkaé›†ç¾¤ã€‚æ¯ä¸€è¡Œæ˜¯ä¸€æ¡æ¶ˆæ¯ã€‚&lt;br/&gt;è¿è¡Œproducerï¼ˆç”Ÿäº§è€…ï¼‰,ç„¶ååœ¨æ§åˆ¶å°è¾“å…¥å‡ æ¡æ¶ˆæ¯åˆ°æœåŠ¡å™¨ã€‚&lt;/p&gt;
&lt;p&gt;å‘é€æ¶ˆæ¯ï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;./kafka-console-producer.sh --broker-list localhost:9092 --topic test #ä¸»é¢˜ä¸ºtest&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿›å…¥ä¹‹åå°±å¯å‘é€æ¶ˆæ¯ï¼ï¼ï¼&lt;/p&gt;
&lt;p&gt;Kafkaä¹Ÿæä¾›äº†ä¸€ä¸ªæ¶ˆè´¹æ¶ˆæ¯çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå°†å­˜å‚¨çš„ä¿¡æ¯è¾“å‡ºå‡ºæ¥ã€‚&lt;/p&gt;
&lt;p&gt;æ¶ˆè´¹æ¶ˆæ¯ï¼š&lt;/p&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;#topicä¸»é¢˜éœ€è¦ä¸è¢«æ¶ˆè´¹çš„ä¸»é¢˜å¯¹åº”ä¸Š
./kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test --from-beginning&lt;/code&gt;
&lt;/pre&gt;
&lt;h5 id=&quot;kafkaå¸¸ç”¨å‘½ä»¤&quot;&gt;Kafkaå¸¸ç”¨å‘½ä»¤&lt;/h5&gt;
&lt;pre class=&quot;shell&quot;&gt;
&lt;code&gt;#æŸ¥çœ‹æ‰€æœ‰ä¸»é¢˜åˆ—è¡¨
kafka-topics.sh --zookeeper localhost:2181 --list
#æŸ¥çœ‹æŒ‡å®štopicä¿¡æ¯
kafka-topics.sh --zookeeper localhost:2181 --describe --topic topic_name
#æ§åˆ¶å°å‘topicç”Ÿäº§æ•°æ®
kafka-console-producer.sh --broker-list localhost:9092 --topic topic_name 
#æ§åˆ¶å°æ¶ˆè´¹topicçš„æ•°æ®
kafka-console-consumer.sh  --zookeeper localhost:2181  --topic topic_name --from-beginning 
#æŸ¥çœ‹topicæŸåˆ†åŒºåç§»é‡æœ€å¤§ï¼ˆå°ï¼‰å€¼
kafka-run-class.sh kafka.tools.GetOffsetShell --topic hive-mdatabase-hostsltable  --time -1 --broker-list localhost:9092 --partitions 0 
#å¢åŠ topicåˆ†åŒºæ•°
kafka-topics.sh --zookeeper localhost:2181  --alter --topic topic_name --partitions 10
#åˆ é™¤topicï¼Œæ…ç”¨ï¼Œåªä¼šåˆ é™¤zookeeperä¸­çš„å…ƒæ•°æ®ï¼Œæ¶ˆæ¯æ–‡ä»¶é¡»æ‰‹åŠ¨åˆ é™¤
kafka-run-class.sh kafka.admin.DeleteTopicCommand --zookeeper localhost:2181 --topic topic_name&lt;/code&gt;
&lt;/pre&gt;</description>
<pubDate>Tue, 18 Dec 2018 07:36:00 +0000</pubDate>
<dc:creator>SimpleWu</dc:creator>
<og:description>åˆè¯†ä¸­é—´ä»¶Kafka Authorï¼šSimplelWu ä»€ä¹ˆæ˜¯æ¶ˆæ¯ä¸­é—´ä»¶ï¼Ÿ éåº•å±‚æ“ä½œç³»ç»Ÿè½¯ä»¶ï¼Œéä¸šåŠ¡åº”ç”¨è½¯ä»¶ï¼Œä¸æ˜¯ç›´æ¥ç»™æœ€ç»ˆç”¨æˆ·ä½¿ç”¨çš„ï¼Œä¸èƒ½ç›´æ¥ç»™å®¢æˆ·å¸¦æ¥ä»·å€¼çš„è½¯ä»¶ç»Ÿç§°ä¸ºä¸­é—´ä»¶ å…³æ³¨äºæ•°æ®çš„å‘é€å’Œæ¥</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/SimpleWu/p/10137494.html</dc:identifier>
</item>
<item>
<title>Javaå¹¶å‘ï¼ˆåä¸ƒï¼‰ï¼šConcurrentHashMap - é‚£è‚¡æ³¥çŸ³æµ</title>
<link>http://www.cnblogs.com/hexinwei1/p/10000779.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/hexinwei1/p/10000779.html</guid>
<description>&lt;h3 class=&quot;article-title&quot;&gt;å…ˆåšæ€»ç»“ï¼š&lt;/h3&gt;
&lt;h4 class=&quot;article-title&quot;&gt;1ã€HashMap HashTableÂ ConcurrentHashMap&lt;/h4&gt;
&lt;p class=&quot;article-title&quot;&gt;HashMapï¼šçº¿ç¨‹ä¸å®‰å…¨&lt;/p&gt;
&lt;p class=&quot;article-title&quot;&gt;HashTableï¼šçº¿ç¨‹å®‰å…¨ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½åŠ äº†Â synchronized ä¿®é¥°ã€‚ç±»ä¼¼ Collections.synchronizedMap(hashMap)&lt;/p&gt;
&lt;p class=&quot;article-title&quot;&gt;ã€€ã€€ã€€ã€€ã€€Â  å¯¹è¯»å†™åŠ é”ï¼Œç‹¬å å¼ï¼Œä¸€ä¸ªçº¿ç¨‹åœ¨è¯»æ—¶å…¶ä»–çº¿ç¨‹å¿…é¡»ç­‰å¾…ï¼Œååé‡è¾ƒä½ï¼Œæ€§èƒ½è¾ƒä¸ºä½ä¸‹ã€‚&lt;/p&gt;
&lt;p class=&quot;article-title&quot;&gt;ConcurrentHashMapï¼šåˆ©ç”¨CAS+Synchronizedæ¥ä¿è¯å¹¶å‘çš„å®‰å…¨æ€§ã€‚æ•°æ®ç»“æ„åŒHashMapã€‚&lt;/p&gt;
&lt;h4 class=&quot;article-title&quot;&gt;2ã€ConcurrentHashMapå¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨ï¼Ÿ&lt;/h4&gt;
&lt;p class=&quot;article-title&quot;&gt;ï¼ˆ1ï¼‰get()æ–¹æ³•ä½¿ç”¨tabAt(Node&amp;lt;K, V&amp;gt;[], int)æ–¹æ³•&lt;/p&gt;
&lt;p class=&quot;article-title&quot;&gt;ã€€ã€€ã€€ã€€è°ƒç”¨Unsafeçš„nativeæ–¹æ³• getObjectVolatile(Object obj, long offset);&lt;/p&gt;
&lt;p class=&quot;article-title&quot;&gt;ã€€ã€€ã€€ã€€//Â è·å–objå¯¹è±¡ä¸­offsetåç§»åœ°å€å¯¹åº”çš„objectå‹fieldçš„å€¼ï¼Œæ”¯æŒvolatile loadè¯­ä¹‰ï¼Œå³ï¼šè®©ç¼“å­˜ä¸­çš„æ•°æ®å¤±æ•ˆï¼Œé‡æ–°ä»ä¸»å†…å­˜åŠ è½½æ•°æ®&lt;/p&gt;
&lt;p class=&quot;article-title&quot;&gt;ï¼ˆ2ï¼‰put()æ–¹æ³•&lt;/p&gt;
&lt;p class=&quot;article-title&quot;&gt;ã€€ã€€â‘ éœ€è¦è·å–æ•°ç»„ä¸Šçš„Nodeæ—¶åŒæ ·ä½¿ç”¨tabAt()æ–¹æ³•&lt;/p&gt;
&lt;p class=&quot;article-title&quot;&gt;ã€€ã€€â‘¡è®¾ç½®æ•°ç»„ä¸ŠNodeæ˜¯ä½¿ç”¨casTabAt() æ–¹æ³•ï¼Œ&lt;/p&gt;
&lt;p class=&quot;article-title&quot;&gt;ã€€ã€€ã€€ã€€casTabAt()è°ƒç”¨Unsafeçš„nativeæ–¹æ³•compareAndSwapObject()ï¼ŒCASæ“ä½œ&lt;/p&gt;
&lt;p class=&quot;article-title&quot;&gt;ã€€ã€€â‘¢å“ˆå¸Œå†²çªä¹‹åï¼Œéœ€è¦æ“ä½œæ”¹hashå€¼å¯¹åº”çš„é“¾è¡¨/çº¢é»‘æ ‘ï¼Œæ­¤æ—¶synchronized(è¯¥é“¾è¡¨ç¬¬ä¸€ä¸ªNode)&lt;/p&gt;
&lt;p class=&quot;article-title&quot;&gt;ã€€ã€€ã€€ã€€ä¿è¯çº¿ç¨‹å®‰å…¨çš„åŸºç¡€ä¸Šï¼Œå‡å°äº†é”çš„ç²’åº¦ã€‚&lt;/p&gt;
&lt;h4 class=&quot;article-title&quot;&gt;3ã€çº¿ç¨‹å®‰å…¨çš„å®¹å™¨åªèƒ½ä¿è¯è‡ªèº«çš„æ•°æ®ä¸è¢«ç ´åï¼Œä½†æ— æ³•ä¿è¯ä¸šåŠ¡çš„è¡Œä¸ºæ˜¯å¦æ­£ç¡®ã€‚&lt;/h4&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; demo1() {
        &lt;/span&gt;&lt;span&gt;final&lt;/span&gt; Map&amp;lt;String, Integer&amp;gt; count = &lt;span&gt;new&lt;/span&gt; ConcurrentHashMap&amp;lt;&amp;gt;&lt;span&gt;();
        &lt;/span&gt;&lt;span&gt;final&lt;/span&gt; CountDownLatch endLatch = &lt;span&gt;new&lt;/span&gt; CountDownLatch(2&lt;span&gt;);
        Runnable task &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Runnable() {
            @Override
            &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; run() {
                &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; i = 0; i &amp;lt; 5; i++&lt;span&gt;) {
                    Integer value &lt;/span&gt;= count.get(&quot;a&quot;&lt;span&gt;);
                    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (&lt;span&gt;null&lt;/span&gt; ==&lt;span&gt; value) {
                        count.put(&lt;/span&gt;&quot;a&quot;, 1&lt;span&gt;);
                    } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
                        count.put(&lt;/span&gt;&quot;a&quot;, value + 1&lt;span&gt;);
                    }
                }
                endLatch.countDown();
            }
        };
        &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; Thread(task).start();
        &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; Thread(task).start();
 
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
            endLatch.await();
            System.out.println(count);
        } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Exception e) {
            e.printStackTrace();
        }
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Â demo1æ˜¯ä¸¤ä¸ªçº¿ç¨‹æ“ä½œConcurrentHashMapï¼Œæ„å›¾å°†valueå˜ä¸º10ã€‚ä½†æ˜¯ï¼Œå› ä¸ºå¤šä¸ªçº¿ç¨‹ç”¨ç›¸åŒçš„keyè°ƒç”¨æ—¶ï¼Œå¾ˆå¯èƒ½ä¼šè¦†ç›–ç›¸äº’çš„ç»“æœï¼Œé€ æˆè®°å½•çš„æ¬¡æ•°æ¯”å®é™…å‡ºç°çš„æ¬¡æ•°å°‘ã€‚&lt;/p&gt;
&lt;p&gt;å½“ç„¶å¯ä»¥ç”¨é”è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥ä½¿ç”¨ConcurrentMapå®šä¹‰çš„æ–¹æ³•ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
&lt;span&gt;V putIfAbsent(K key, V value)
   å¦‚æœkeyå¯¹åº”çš„valueä¸å­˜åœ¨ï¼Œåˆ™putè¿›å»ï¼Œè¿”å›nullã€‚å¦åˆ™ä¸putï¼Œè¿”å›å·²å­˜åœ¨çš„valueã€‚
 
&lt;/span&gt;&lt;span&gt;boolean&lt;/span&gt;&lt;span&gt; remove(Object key, Object value)
   å¦‚æœkeyå¯¹åº”çš„å€¼æ˜¯valueï¼Œåˆ™ç§»é™¤K&lt;/span&gt;-&lt;span&gt;Vï¼Œè¿”å›trueã€‚å¦åˆ™ä¸ç§»é™¤ï¼Œè¿”å›falseã€‚
 
&lt;/span&gt;&lt;span&gt;boolean&lt;/span&gt;&lt;span&gt; replace(K key, V oldValue, V newValue)
   å¦‚æœkeyå¯¹åº”çš„å½“å‰å€¼æ˜¯oldValueï¼Œåˆ™æ›¿æ¢ä¸ºnewValueï¼Œè¿”å›trueã€‚å¦åˆ™ä¸æ›¿æ¢ï¼Œè¿”å›falseã€‚&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä¿®æ”¹ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;40&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; demo1() {
    &lt;/span&gt;&lt;span&gt;final&lt;/span&gt; Map&amp;lt;String, Integer&amp;gt; count = &lt;span&gt;new&lt;/span&gt; ConcurrentHashMap&amp;lt;&amp;gt;&lt;span&gt;();
    &lt;/span&gt;&lt;span&gt;final&lt;/span&gt; CountDownLatch endLatch = &lt;span&gt;new&lt;/span&gt; CountDownLatch(2&lt;span&gt;);
    Runnable task &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Runnable() {
        @Override
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; run() {
            Integer oldValue, newValue;
            &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; i = 0; i &amp;lt; 5; i++&lt;span&gt;) {
                &lt;/span&gt;&lt;span&gt;while&lt;/span&gt; (&lt;span&gt;true&lt;/span&gt;&lt;span&gt;) {
                    oldValue &lt;/span&gt;= count.get(&quot;a&quot;&lt;span&gt;);
                    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (&lt;span&gt;null&lt;/span&gt; ==&lt;span&gt; oldValue) {
                        newValue &lt;/span&gt;= 1&lt;span&gt;;
                        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (count.putIfAbsent(&quot;a&quot;, newValue) == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                            &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
                        }
                    } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
                        newValue &lt;/span&gt;= oldValue + 1&lt;span&gt;;
                        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (count.replace(&quot;a&quot;&lt;span&gt;, oldValue, newValue)) {
                            &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
                        }
                    }
                }
            }
            endLatch.countDown();
        }
    };
    &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; Thread(task).start();
    &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; Thread(task).start();
 
    &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
        endLatch.await();
        System.out.println(count);
    } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Exception e) {
        e.printStackTrace();
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç”±äºConcurrentMapä¸­ä¸èƒ½ä¿å­˜valueä¸ºnullçš„å€¼ï¼Œæ‰€ä»¥éœ€è¦å¤„ç†ä¸å­˜åœ¨å’Œå·²å­˜åœ¨ä¸¤ç§æƒ…å†µï¼Œä¸è¿‡å¯ä»¥ä½¿ç”¨AtomicIntegeræ¥æ›¿ä»£ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; demo1() {
    &lt;/span&gt;&lt;span&gt;final&lt;/span&gt; Map&amp;lt;String, AtomicInteger&amp;gt; count = &lt;span&gt;new&lt;/span&gt; ConcurrentHashMap&amp;lt;&amp;gt;&lt;span&gt;();
    &lt;/span&gt;&lt;span&gt;final&lt;/span&gt; CountDownLatch endLatch = &lt;span&gt;new&lt;/span&gt; CountDownLatch(2&lt;span&gt;);
    Runnable task &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Runnable() {
        @Override
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; run() {
            AtomicInteger oldValue;
            &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; i = 0; i &amp;lt; 5; i++&lt;span&gt;) {
                oldValue &lt;/span&gt;= count.get(&quot;a&quot;&lt;span&gt;);
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (&lt;span&gt;null&lt;/span&gt; ==&lt;span&gt; oldValue) {
                    AtomicInteger zeroValue &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; AtomicInteger(0&lt;span&gt;);
                    oldValue &lt;/span&gt;= count.putIfAbsent(&quot;a&quot;&lt;span&gt;, zeroValue);
                    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (&lt;span&gt;null&lt;/span&gt; ==&lt;span&gt; oldValue) {
                        oldValue &lt;/span&gt;=&lt;span&gt; zeroValue;
                    }
                }
                oldValue.incrementAndGet();
            }
            endLatch.countDown();
        }
    };
    &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; Thread(task).start();
    &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; Thread(task).start();
 
    &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
        endLatch.await();
        System.out.println(count);
    } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Exception e) {
        e.printStackTrace();
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 class=&quot;article-title&quot;&gt;ä¸€ã€å±æ€§&lt;/h3&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æœ€å¤§å®¹é‡ï¼š2^30=1073741824&lt;/span&gt;
&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; MAXIMUM_CAPACITY = 1 &amp;lt;&amp;lt; 30&lt;span&gt;;

&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; é»˜è®¤åˆå§‹å€¼ï¼Œå¿…é¡»æ˜¯2çš„å¹•æ•°&lt;/span&gt;
&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; DEFAULT_CAPACITY = 16&lt;span&gt;;

&lt;/span&gt;&lt;span&gt;//
&lt;/span&gt;&lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8&lt;span&gt;;

&lt;/span&gt;&lt;span&gt;//
&lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; DEFAULT_CONCURRENCY_LEVEL = 16&lt;span&gt;;

&lt;/span&gt;&lt;span&gt;//
&lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;float&lt;/span&gt; LOAD_FACTOR = 0.75f&lt;span&gt;;

&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; é“¾è¡¨è½¬çº¢é»‘æ ‘é˜€å€¼,&amp;gt; 8 é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘&lt;/span&gt;
&lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; TREEIFY_THRESHOLD = 8&lt;span&gt;;

&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;æ ‘è½¬é“¾è¡¨é˜€å€¼ï¼Œå°äºç­‰äº6ï¼ˆtranferæ—¶ï¼Œlcã€hc=0ä¸¤ä¸ªè®¡æ•°å™¨åˆ†åˆ«++è®°å½•åŸbinã€æ–°binTreeNodeæ•°é‡ï¼Œ&amp;lt;=UNTREEIFY_THRESHOLD åˆ™untreeify(lo)ï¼‰&lt;/span&gt;
&lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; UNTREEIFY_THRESHOLD = 6&lt;span&gt;;

&lt;/span&gt;&lt;span&gt;//
&lt;/span&gt;&lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; MIN_TREEIFY_CAPACITY = 64&lt;span&gt;;

&lt;/span&gt;&lt;span&gt;//
&lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; MIN_TRANSFER_STRIDE = 16&lt;span&gt;;

&lt;/span&gt;&lt;span&gt;//
&lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; RESIZE_STAMP_BITS = 16&lt;span&gt;;

&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 2^15-1ï¼Œhelp resizeçš„æœ€å¤§çº¿ç¨‹æ•°&lt;/span&gt;
&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; MAX_RESIZERS = (1 &amp;lt;&amp;lt; (32 - RESIZE_STAMP_BITS)) - 1&lt;span&gt;;

&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 32-16=16ï¼ŒsizeCtlä¸­è®°å½•sizeå¤§å°çš„åç§»é‡&lt;/span&gt;
&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; RESIZE_STAMP_SHIFT = 32 -&lt;span&gt; RESIZE_STAMP_BITS;

&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; forwarding nodesçš„hashå€¼&lt;/span&gt;
&lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; MOVED     = -1&lt;span&gt;;

&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ ‘æ ¹èŠ‚ç‚¹çš„hashå€¼&lt;/span&gt;
&lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; TREEBIN   = -2&lt;span&gt;;

&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ReservationNodeçš„hashå€¼&lt;/span&gt;
&lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; RESERVED  = -3&lt;span&gt;;

&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¯ç”¨å¤„ç†å™¨æ•°é‡&lt;/span&gt;
&lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; NCPU = Runtime.getRuntime().availableProcessors();
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å‡ ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µï¼š&lt;/p&gt;
&lt;p&gt;ï¼ˆ1ï¼‰tableï¼šç”¨æ¥å­˜æ”¾NodeèŠ‚ç‚¹æ•°æ®çš„ï¼Œé»˜è®¤ä¸ºnullï¼Œé»˜è®¤å¤§å°ä¸º16çš„æ•°ç»„ï¼Œæ¯æ¬¡æ‰©å®¹æ—¶å¤§å°æ€»æ˜¯2çš„å¹‚æ¬¡æ–¹ï¼›&lt;/p&gt;
&lt;p&gt;ï¼ˆ2ï¼‰nextTableï¼šæ‰©å®¹æ—¶æ–°ç”Ÿæˆçš„æ•°æ®ï¼Œæ•°ç»„ä¸ºtableçš„ä¸¤å€ï¼›&lt;/p&gt;
&lt;p&gt;ï¼ˆ3ï¼‰Nodeï¼šèŠ‚ç‚¹ï¼Œä¿å­˜key-valueçš„æ•°æ®ç»“æ„ï¼›&lt;/p&gt;
&lt;p&gt;ï¼ˆ4ï¼‰ForwardingNodeï¼šä¸€ä¸ªç‰¹æ®Šçš„NodeèŠ‚ç‚¹ï¼Œhashå€¼ä¸º-1ï¼Œå…¶ä¸­å­˜å‚¨nextTableçš„å¼•ç”¨ã€‚åªæœ‰tableå‘ç”Ÿæ‰©å®¹çš„æ—¶å€™ï¼ŒForwardingNodeæ‰ä¼šå‘æŒ¥ä½œç”¨ï¼Œä½œä¸ºä¸€ä¸ªå ä½ç¬¦æ”¾åœ¨tableä¸­è¡¨ç¤ºå½“å‰èŠ‚ç‚¹ä¸ºnullæˆ–åˆ™å·²ç»è¢«ç§»åŠ¨&lt;/p&gt;
&lt;p&gt;ï¼ˆ5ï¼‰sizeCtlï¼šæ§åˆ¶æ ‡è¯†ç¬¦ï¼Œç”¨æ¥æ§åˆ¶tableåˆå§‹åŒ–å’Œæ‰©å®¹æ“ä½œçš„ï¼Œåœ¨ä¸åŒçš„åœ°æ–¹æœ‰ä¸åŒçš„ç”¨é€”ï¼Œå…¶å€¼ä¹Ÿä¸åŒï¼Œæ‰€ä»£è¡¨çš„å«ä¹‰ä¹Ÿä¸åŒ&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;è´Ÿæ•°ä»£è¡¨æ­£åœ¨è¿›è¡Œåˆå§‹åŒ–æˆ–æ‰©å®¹æ“ä½œ&lt;/li&gt;
&lt;li&gt;-1ä»£è¡¨æ­£åœ¨åˆå§‹åŒ–&lt;/li&gt;
&lt;li&gt;-N è¡¨ç¤ºæœ‰N-1ä¸ªçº¿ç¨‹æ­£åœ¨è¿›è¡Œæ‰©å®¹æ“ä½œ&lt;/li&gt;
&lt;li&gt;æ­£æ•°æˆ–0ä»£è¡¨hashè¡¨è¿˜æ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œè¿™ä¸ªæ•°å€¼è¡¨ç¤ºåˆå§‹åŒ–æˆ–ä¸‹ä¸€æ¬¡è¿›è¡Œæ‰©å®¹çš„å¤§å°&lt;/li&gt;
&lt;/ol&gt;&lt;h3 class=&quot;article-title&quot;&gt;äºŒã€æ„é€ &lt;/h3&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;41&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;public&lt;/span&gt;&lt;span&gt; ConcurrentHashMap() {
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; ConcurrentHashMap(&lt;span&gt;int&lt;/span&gt;&lt;span&gt; initialCapacity) {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (initialCapacity &amp;lt; 0&lt;span&gt;)
            &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt; &lt;span&gt;new&lt;/span&gt;&lt;span&gt; IllegalArgumentException();
        &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; cap = ((initialCapacity &amp;gt;= (MAXIMUM_CAPACITY &amp;gt;&amp;gt;&amp;gt; 1)) ?&lt;span&gt;
                   MAXIMUM_CAPACITY :
                   tableSizeFor(initialCapacity &lt;/span&gt;+ (initialCapacity &amp;gt;&amp;gt;&amp;gt; 1) + 1&lt;span&gt;));
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.sizeCtl =&lt;span&gt; cap;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; ConcurrentHashMap(Map&amp;lt;? &lt;span&gt;extends&lt;/span&gt; K, ? &lt;span&gt;extends&lt;/span&gt; V&amp;gt;&lt;span&gt; m) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.sizeCtl =&lt;span&gt; DEFAULT_CAPACITY;
        putAll(m);
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; ConcurrentHashMap(&lt;span&gt;int&lt;/span&gt; initialCapacity, &lt;span&gt;float&lt;/span&gt;&lt;span&gt; loadFactor) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;(initialCapacity, loadFactor, 1&lt;span&gt;);
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; ConcurrentHashMap(&lt;span&gt;int&lt;/span&gt;&lt;span&gt; initialCapacity,
                             &lt;/span&gt;&lt;span&gt;float&lt;/span&gt; loadFactor, &lt;span&gt;int&lt;/span&gt;&lt;span&gt; concurrencyLevel) {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (!(loadFactor &amp;gt; 0.0f) || initialCapacity &amp;lt; 0 || concurrencyLevel &amp;lt;= 0&lt;span&gt;)
            &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt; &lt;span&gt;new&lt;/span&gt;&lt;span&gt; IllegalArgumentException();
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (initialCapacity &amp;lt; concurrencyLevel)   &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Use at least as many bins&lt;/span&gt;
            initialCapacity = concurrencyLevel;   &lt;span&gt;//&lt;/span&gt;&lt;span&gt; as estimated threads&lt;/span&gt;
        &lt;span&gt;long&lt;/span&gt; size = (&lt;span&gt;long&lt;/span&gt;)(1.0 + (&lt;span&gt;long&lt;/span&gt;)initialCapacity /&lt;span&gt; loadFactor);
        &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; cap = (size &amp;gt;= (&lt;span&gt;long&lt;/span&gt;)MAXIMUM_CAPACITY) ?&lt;span&gt;
            MAXIMUM_CAPACITY : tableSizeFor((&lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt;)size);
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.sizeCtl =&lt;span&gt; cap;
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;span id=&quot;_initTable&quot;&gt;åˆå§‹åŒ–ï¼š initTable()&lt;/span&gt;&lt;/h4&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;43&quot;&gt;
&lt;pre&gt;
&lt;span&gt;private&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; Node&amp;lt;K,V&amp;gt;&lt;span&gt;[] initTable() {
    Node&lt;/span&gt;&amp;lt;K,V&amp;gt;[] tab; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; sc;
    &lt;/span&gt;&lt;span&gt;while&lt;/span&gt; ((tab = table) == &lt;span&gt;null&lt;/span&gt; || tab.length == 0&lt;span&gt;) {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; åˆå§‹åŒ–çš„&quot;åŠŸåŠ³&quot;è¢«å…¶ä»–çº¿ç¨‹&quot;æŠ¢å»&quot;äº†&lt;/span&gt;
        &lt;span&gt;if&lt;/span&gt; ((sc = sizeCtl) &amp;lt; 0&lt;span&gt;)
            Thread.yield(); &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; lost initialization race; just spin
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; CAS ä¸€ä¸‹ï¼Œå°† sizeCtl è®¾ç½®ä¸º -1ï¼Œä»£è¡¨æŠ¢åˆ°äº†é”&lt;/span&gt;
        &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (U.compareAndSwapInt(&lt;span&gt;this&lt;/span&gt;, SIZECTL, sc, -1&lt;span&gt;)) {
            &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; ((tab = table) == &lt;span&gt;null&lt;/span&gt; || tab.length == 0&lt;span&gt;) {
                    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; DEFAULT_CAPACITY é»˜è®¤åˆå§‹å®¹é‡æ˜¯ 16&lt;/span&gt;
                    &lt;span&gt;int&lt;/span&gt; n = (sc &amp;gt; 0) ?&lt;span&gt; sc : DEFAULT_CAPACITY;
                    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; åˆå§‹åŒ–æ•°ç»„ï¼Œé•¿åº¦ä¸º 16 æˆ–åˆå§‹åŒ–æ—¶æä¾›çš„é•¿åº¦&lt;/span&gt;
                    Node&amp;lt;K,V&amp;gt;[] nt = (Node&amp;lt;K,V&amp;gt;[])&lt;span&gt;new&lt;/span&gt; Node&amp;lt;?,?&amp;gt;&lt;span&gt;[n];
                    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å°†è¿™ä¸ªæ•°ç»„èµ‹å€¼ç»™ tableï¼Œtable æ˜¯ volatile çš„&lt;/span&gt;
                    table = tab =&lt;span&gt; nt;
                    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¦‚æœ n ä¸º 16 çš„è¯ï¼Œé‚£ä¹ˆè¿™é‡Œ sc = 12
                    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å…¶å®å°±æ˜¯ 0.75 * n&lt;/span&gt;
                    sc = n - (n &amp;gt;&amp;gt;&amp;gt; 2&lt;span&gt;);
                }
            } &lt;/span&gt;&lt;span&gt;finally&lt;/span&gt;&lt;span&gt; {
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; è®¾ç½® sizeCtl ä¸º scï¼Œæˆ‘ä»¬å°±å½“æ˜¯ 12 å§&lt;/span&gt;
                sizeCtl =&lt;span&gt; sc;
            }
            &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
        }
    }
    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; tab;
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 class=&quot;article-title&quot;&gt;ä¸‰ã€put()&lt;/h3&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;66&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt;&lt;span&gt; V put(K key, V value) {
    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; putVal(key, value, &lt;span&gt;false&lt;/span&gt;&lt;span&gt;);
}

&lt;/span&gt;&lt;span&gt;final&lt;/span&gt; V putVal(K key, V value, &lt;span&gt;boolean&lt;/span&gt;&lt;span&gt; onlyIfAbsent) {
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (key == &lt;span&gt;null&lt;/span&gt; || value == &lt;span&gt;null&lt;/span&gt;) &lt;span&gt;throw&lt;/span&gt; &lt;span&gt;new&lt;/span&gt;&lt;span&gt; NullPointerException();
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¾—åˆ° hash å€¼&lt;/span&gt;
    &lt;span&gt;int&lt;/span&gt; hash =&lt;span&gt; spread(key.hashCode());
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ç”¨äºè®°å½•ç›¸åº”é“¾è¡¨çš„é•¿åº¦&lt;/span&gt;
    &lt;span&gt;int&lt;/span&gt; binCount = 0&lt;span&gt;;
    &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; (Node&amp;lt;K,V&amp;gt;[] tab =&lt;span&gt; table;;) {
        Node&lt;/span&gt;&amp;lt;K,V&amp;gt; f; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; n, i, fh;
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¦‚æœæ•°ç»„&quot;ç©º&quot;ï¼Œè¿›è¡Œæ•°ç»„åˆå§‹åŒ–&lt;/span&gt;
        &lt;span&gt;if&lt;/span&gt; (tab == &lt;span&gt;null&lt;/span&gt; || (n = tab.length) == 0&lt;span&gt;)
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; åˆå§‹åŒ–æ•°ç»„ï¼Œåé¢ä¼šè¯¦ç»†ä»‹ç»&lt;/span&gt;
            tab =&lt;span&gt; initTable();

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ‰¾è¯¥ hash å€¼å¯¹åº”çš„æ•°ç»„ä¸‹æ ‡ï¼Œå¾—åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ f&lt;/span&gt;
        &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; ((f = tabAt(tab, i = (n - 1) &amp;amp; hash)) == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¦‚æœæ•°ç»„è¯¥ä½ç½®ä¸ºç©ºï¼Œ
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;    ç”¨ä¸€æ¬¡ CAS æ“ä½œå°†è¿™ä¸ªæ–°å€¼æ”¾å…¥å…¶ä¸­å³å¯ï¼Œè¿™ä¸ª put æ“ä½œå·®ä¸å¤šå°±ç»“æŸäº†ï¼Œå¯ä»¥æ‹‰åˆ°æœ€åé¢äº†
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;          å¦‚æœ CAS å¤±è´¥ï¼Œé‚£å°±æ˜¯æœ‰å¹¶å‘æ“ä½œï¼Œè¿›åˆ°ä¸‹ä¸€ä¸ªå¾ªç¯å°±å¥½äº†&lt;/span&gt;
            &lt;span&gt;if&lt;/span&gt; (casTabAt(tab, i, &lt;span&gt;null&lt;/span&gt;&lt;span&gt;,
                         &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; Node&amp;lt;K,V&amp;gt;(hash, key, value, &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)))
                &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;;                   &lt;span&gt;//&lt;/span&gt;&lt;span&gt; no lock when adding to empty bin&lt;/span&gt;
&lt;span&gt;        }
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; hash å±…ç„¶å¯ä»¥ç­‰äº MOVEDï¼Œè¿™ä¸ªéœ€è¦åˆ°åé¢æ‰èƒ½çœ‹æ˜ç™½ï¼Œä¸è¿‡ä»åå­—ä¸Šä¹Ÿèƒ½çŒœåˆ°ï¼Œè‚¯å®šæ˜¯å› ä¸ºåœ¨æ‰©å®¹&lt;/span&gt;
        &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; ((fh = f.hash) ==&lt;span&gt; MOVED)
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¸®åŠ©æ•°æ®è¿ç§»ï¼Œè¿™ä¸ªç­‰åˆ°çœ‹å®Œæ•°æ®è¿ç§»éƒ¨åˆ†çš„ä»‹ç»åï¼Œå†ç†è§£è¿™ä¸ªå°±å¾ˆç®€å•äº†&lt;/span&gt;
            tab =&lt;span&gt; helpTransfer(tab, f);

        &lt;/span&gt;&lt;span&gt;else&lt;/span&gt; { &lt;span&gt;//&lt;/span&gt;&lt;span&gt; åˆ°è¿™é‡Œå°±æ˜¯è¯´ï¼Œf æ˜¯è¯¥ä½ç½®çš„å¤´ç»“ç‚¹ï¼Œè€Œä¸”ä¸ä¸ºç©º&lt;/span&gt;
&lt;span&gt;
            V oldVal &lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; è·å–æ•°ç»„è¯¥ä½ç½®çš„å¤´ç»“ç‚¹çš„ç›‘è§†å™¨é”&lt;/span&gt;
            &lt;span&gt;synchronized&lt;/span&gt;&lt;span&gt; (f) {
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (tabAt(tab, i) ==&lt;span&gt; f) {
                    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (fh &amp;gt;= 0) { &lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¤´ç»“ç‚¹çš„ hash å€¼å¤§äº 0ï¼Œè¯´æ˜æ˜¯é“¾è¡¨
                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ç”¨äºç´¯åŠ ï¼Œè®°å½•é“¾è¡¨çš„é•¿åº¦&lt;/span&gt;
                        binCount = 1&lt;span&gt;;
                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; éå†é“¾è¡¨&lt;/span&gt;
                        &lt;span&gt;for&lt;/span&gt; (Node&amp;lt;K,V&amp;gt; e = f;; ++&lt;span&gt;binCount) {
                            K ek;
                            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¦‚æœå‘ç°äº†&quot;ç›¸ç­‰&quot;çš„ keyï¼Œåˆ¤æ–­æ˜¯å¦è¦è¿›è¡Œå€¼è¦†ç›–ï¼Œç„¶åä¹Ÿå°±å¯ä»¥ break äº†&lt;/span&gt;
                            &lt;span&gt;if&lt;/span&gt; (e.hash == hash &amp;amp;&amp;amp;&lt;span&gt;
                                ((ek &lt;/span&gt;= e.key) == key ||&lt;span&gt;
                                 (ek &lt;/span&gt;!= &lt;span&gt;null&lt;/span&gt; &amp;amp;&amp;amp;&lt;span&gt; key.equals(ek)))) {
                                oldVal &lt;/span&gt;=&lt;span&gt; e.val;
                                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;onlyIfAbsent)
                                    e.val &lt;/span&gt;=&lt;span&gt; value;
                                &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
                            }
                            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; åˆ°äº†é“¾è¡¨çš„æœ€æœ«ç«¯ï¼Œå°†è¿™ä¸ªæ–°å€¼æ”¾åˆ°é“¾è¡¨çš„æœ€åé¢&lt;/span&gt;
                            Node&amp;lt;K,V&amp;gt; pred =&lt;span&gt; e;
                            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; ((e = e.next) == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                                pred.next &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; Node&amp;lt;K,V&amp;gt;&lt;span&gt;(hash, key,
                                                          value, &lt;/span&gt;&lt;span&gt;null&lt;/span&gt;&lt;span&gt;);
                                &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
                            }
                        }
                    }
                    &lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (f &lt;span&gt;instanceof&lt;/span&gt; TreeBin) { &lt;span&gt;//&lt;/span&gt;&lt;span&gt; çº¢é»‘æ ‘&lt;/span&gt;
                        Node&amp;lt;K,V&amp;gt;&lt;span&gt; p;
                        binCount &lt;/span&gt;= 2&lt;span&gt;;
                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; è°ƒç”¨çº¢é»‘æ ‘çš„æ’å€¼æ–¹æ³•æ’å…¥æ–°èŠ‚ç‚¹&lt;/span&gt;
                        &lt;span&gt;if&lt;/span&gt; ((p = ((TreeBin&amp;lt;K,V&amp;gt;&lt;span&gt;)f).putTreeVal(hash, key,
                                                       value)) &lt;/span&gt;!= &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                            oldVal &lt;/span&gt;=&lt;span&gt; p.val;
                            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;onlyIfAbsent)
                                p.val &lt;/span&gt;=&lt;span&gt; value;
                        }
                    }
                }
            }

            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (binCount != 0&lt;span&gt;) {
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; åˆ¤æ–­æ˜¯å¦è¦å°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œä¸´ç•Œå€¼å’Œ HashMap ä¸€æ ·ï¼Œä¹Ÿæ˜¯ 8&lt;/span&gt;
                &lt;span&gt;if&lt;/span&gt; (binCount &amp;gt;=&lt;span&gt; TREEIFY_THRESHOLD)
                    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; è¿™ä¸ªæ–¹æ³•å’Œ HashMap ä¸­ç¨å¾®æœ‰ä¸€ç‚¹ç‚¹ä¸åŒï¼Œé‚£å°±æ˜¯å®ƒä¸æ˜¯ä¸€å®šä¼šè¿›è¡Œçº¢é»‘æ ‘è½¬æ¢ï¼Œ
                    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¦‚æœå½“å‰æ•°ç»„çš„é•¿åº¦å°äº 64ï¼Œé‚£ä¹ˆä¼šé€‰æ‹©è¿›è¡Œæ•°ç»„æ‰©å®¹ï¼Œè€Œä¸æ˜¯è½¬æ¢ä¸ºçº¢é»‘æ ‘
                    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;    å…·ä½“æºç æˆ‘ä»¬å°±ä¸çœ‹äº†ï¼Œæ‰©å®¹éƒ¨åˆ†åé¢è¯´&lt;/span&gt;
&lt;span&gt;                    treeifyBin(tab, i);
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (oldVal != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
                    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; oldVal;
                &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
            }
        }
    }
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt; 
    addCount(1L&lt;span&gt;, binCount);
    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æŒ‰ç…§ä¸Šé¢çš„æºç ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šputæ•´ä¸ªæµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;åˆ¤ç©ºï¼›ConcurrentHashMapçš„keyã€valueéƒ½ä¸å…è®¸ä¸ºnull&lt;/li&gt;
&lt;li&gt;è®¡ç®—hashã€‚åˆ©ç”¨æ–¹æ³•è®¡ç®—hashå€¼ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;ul&gt;&lt;li&gt;éå†tableï¼Œè¿›è¡ŒèŠ‚ç‚¹æ’å…¥æ“ä½œï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š
&lt;ul&gt;&lt;li&gt;å¦‚æœtableä¸ºç©ºï¼Œåˆ™è¡¨ç¤ºConcurrentHashMapè¿˜æ²¡æœ‰åˆå§‹åŒ–ï¼Œåˆ™è¿›è¡Œåˆå§‹åŒ–æ“ä½œï¼šinitTable()&lt;/li&gt;
&lt;li&gt;æ ¹æ®hashå€¼è·å–èŠ‚ç‚¹çš„ä½ç½®iï¼Œè‹¥è¯¥ä½ç½®ä¸ºç©ºï¼Œåˆ™ç›´æ¥æ’å…¥ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯ä¸éœ€è¦åŠ é”çš„ã€‚è®¡ç®—fä½ç½®ï¼ši=(n â€“ 1) &amp;amp; hash&lt;/li&gt;
&lt;li&gt;å¦‚æœæ£€æµ‹åˆ°fh = f.hash == -1ï¼Œåˆ™fæ˜¯ForwardingNodeèŠ‚ç‚¹ï¼Œè¡¨ç¤ºæœ‰å…¶ä»–çº¿ç¨‹æ­£åœ¨è¿›è¡Œæ‰©å®¹æ“ä½œï¼Œåˆ™å¸®åŠ©çº¿ç¨‹ä¸€èµ·è¿›è¡Œæ‰©å®¹æ“ä½œ&lt;/li&gt;
&lt;li&gt;å¦‚æœf.hash &amp;gt;= 0 è¡¨ç¤ºæ˜¯é“¾è¡¨ç»“æ„ï¼Œåˆ™éå†é“¾è¡¨ï¼Œå¦‚æœå­˜åœ¨å½“å‰keyèŠ‚ç‚¹åˆ™æ›¿æ¢valueï¼Œå¦åˆ™æ’å…¥åˆ°é“¾è¡¨å°¾éƒ¨ã€‚å¦‚æœfæ˜¯TreeBinç±»å‹èŠ‚ç‚¹ï¼Œåˆ™æŒ‰ç…§çº¢é»‘æ ‘çš„æ–¹æ³•æ›´æ–°æˆ–è€…å¢åŠ èŠ‚ç‚¹&lt;/li&gt;
&lt;li&gt;è‹¥é“¾è¡¨é•¿åº¦ &amp;gt; TREEIFY_THRESHOLD(é»˜è®¤æ˜¯8)ï¼Œåˆ™å°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ç»“æ„&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;è°ƒç”¨addCountæ–¹æ³•ï¼ŒConcurrentHashMapçš„size + 1&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;è¿™é‡Œæ•´ä¸ªputæ“ä½œå·²ç»å®Œæˆã€‚&lt;/p&gt;
&lt;h3 class=&quot;article-title&quot;&gt;å››ã€get()&lt;/h3&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;42&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;public&lt;/span&gt;&lt;span&gt; V get(Object key) {
        Node&lt;/span&gt;&amp;lt;K,V&amp;gt;[] tab; Node&amp;lt;K,V&amp;gt; e, p; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; n, eh; K ek;
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; è®¡ç®—hash&lt;/span&gt;
        &lt;span&gt;int&lt;/span&gt; h =&lt;span&gt; spread(key.hashCode());
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; ((tab = table) != &lt;span&gt;null&lt;/span&gt; &amp;amp;&amp;amp; (n = tab.length) &amp;gt; 0 &amp;amp;&amp;amp;&lt;span&gt;
                (e &lt;/span&gt;= tabAt(tab, (n - 1) &amp;amp; h)) != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æœç´¢åˆ°çš„èŠ‚ç‚¹keyä¸ä¼ å…¥çš„keyç›¸åŒä¸”ä¸ä¸ºnull,ç›´æ¥è¿”å›è¿™ä¸ªèŠ‚ç‚¹&lt;/span&gt;
            &lt;span&gt;if&lt;/span&gt; ((eh = e.hash) ==&lt;span&gt; h) {
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; ((ek = e.key) == key || (ek != &lt;span&gt;null&lt;/span&gt; &amp;amp;&amp;amp;&lt;span&gt; key.equals(ek)))
                    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; e.val;
            }
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ ‘&lt;/span&gt;
            &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (eh &amp;lt; 0&lt;span&gt;)
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; (p = e.find(h, key)) != &lt;span&gt;null&lt;/span&gt; ? p.val : &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; é“¾è¡¨ï¼Œéå†&lt;/span&gt;
            &lt;span&gt;while&lt;/span&gt; ((e = e.next) != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (e.hash == h &amp;amp;&amp;amp;&lt;span&gt;
                        ((ek &lt;/span&gt;= e.key) == key || (ek != &lt;span&gt;null&lt;/span&gt; &amp;amp;&amp;amp;&lt;span&gt; key.equals(ek))))
                    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; e.val;
            }
        }
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;getæ“ä½œï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;è®¡ç®—hashå€¼&lt;/li&gt;
&lt;li&gt;åˆ¤æ–­tableæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºï¼Œç›´æ¥è¿”å›null&lt;/li&gt;
&lt;li&gt;æ ¹æ®hashå€¼è·å–tableä¸­çš„NodeèŠ‚ç‚¹ï¼ˆtabAt(tab, (n â€“ 1) &amp;amp; h)ï¼‰ï¼Œç„¶åæ ¹æ®é“¾è¡¨æˆ–è€…æ ‘å½¢æ–¹å¼æ‰¾åˆ°ç›¸å¯¹åº”çš„èŠ‚ç‚¹ï¼Œè¿”å›å…¶valueå€¼ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h3 class=&quot;article-title&quot;&gt;äº”ã€æ‰©å®¹&lt;/h3&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;51&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt; é¦–å…ˆè¦è¯´æ˜çš„æ˜¯ï¼Œæ–¹æ³•å‚æ•° size ä¼ è¿›æ¥çš„æ—¶å€™å°±å·²ç»ç¿»äº†å€äº†&lt;/span&gt;
&lt;span&gt;private&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; tryPresize(&lt;span&gt;int&lt;/span&gt;&lt;span&gt; size) {
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; cï¼šsize çš„ 1.5 å€ï¼Œå†åŠ  1ï¼Œå†å¾€ä¸Šå–æœ€è¿‘çš„ 2 çš„ n æ¬¡æ–¹ã€‚&lt;/span&gt;
    &lt;span&gt;int&lt;/span&gt; c = (size &amp;gt;= (MAXIMUM_CAPACITY &amp;gt;&amp;gt;&amp;gt; 1)) ?&lt;span&gt; MAXIMUM_CAPACITY :
        tableSizeFor(size &lt;/span&gt;+ (size &amp;gt;&amp;gt;&amp;gt; 1) + 1&lt;span&gt;);
    &lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt; sc;
    &lt;/span&gt;&lt;span&gt;while&lt;/span&gt; ((sc = sizeCtl) &amp;gt;= 0&lt;span&gt;) {
        Node&lt;/span&gt;&amp;lt;K,V&amp;gt;[] tab = table; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; n;

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; è¿™ä¸ª if åˆ†æ”¯å’Œä¹‹å‰è¯´çš„åˆå§‹åŒ–æ•°ç»„çš„ä»£ç åŸºæœ¬ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨ç®¡è¿™å—ä»£ç &lt;/span&gt;
        &lt;span&gt;if&lt;/span&gt; (tab == &lt;span&gt;null&lt;/span&gt; || (n = tab.length) == 0&lt;span&gt;) {
            n &lt;/span&gt;= (sc &amp;gt; c) ?&lt;span&gt; sc : c;
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (U.compareAndSwapInt(&lt;span&gt;this&lt;/span&gt;, SIZECTL, sc, -1&lt;span&gt;)) {
                &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
                    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (table ==&lt;span&gt; tab) {
                        @SuppressWarnings(&lt;/span&gt;&quot;unchecked&quot;&lt;span&gt;)
                        Node&lt;/span&gt;&amp;lt;K,V&amp;gt;[] nt = (Node&amp;lt;K,V&amp;gt;[])&lt;span&gt;new&lt;/span&gt; Node&amp;lt;?,?&amp;gt;&lt;span&gt;[n];
                        table &lt;/span&gt;=&lt;span&gt; nt;
                        sc &lt;/span&gt;= n - (n &amp;gt;&amp;gt;&amp;gt; 2); &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 0.75 * n&lt;/span&gt;
&lt;span&gt;                    }
                } &lt;/span&gt;&lt;span&gt;finally&lt;/span&gt;&lt;span&gt; {
                    sizeCtl &lt;/span&gt;=&lt;span&gt; sc;
                }
            }
        }
        &lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (c &amp;lt;= sc || n &amp;gt;=&lt;span&gt; MAXIMUM_CAPACITY)
            &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
        &lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (tab ==&lt;span&gt; table) {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æˆ‘æ²¡çœ‹æ‡‚ rs çš„çœŸæ­£å«ä¹‰æ˜¯ä»€ä¹ˆï¼Œä¸è¿‡ä¹Ÿå…³ç³»ä¸å¤§&lt;/span&gt;
            &lt;span&gt;int&lt;/span&gt; rs =&lt;span&gt; resizeStamp(n);

            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (sc &amp;lt; 0&lt;span&gt;) {
                Node&lt;/span&gt;&amp;lt;K,V&amp;gt;&lt;span&gt;[] nt;
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; ((sc &amp;gt;&amp;gt;&amp;gt; RESIZE_STAMP_SHIFT) != rs || sc == rs + 1 ||&lt;span&gt;
                    sc &lt;/span&gt;== rs + MAX_RESIZERS || (nt = nextTable) == &lt;span&gt;null&lt;/span&gt; ||&lt;span&gt;
                    transferIndex &lt;/span&gt;&amp;lt;= 0&lt;span&gt;)
                    &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 2. ç”¨ CAS å°† sizeCtl åŠ  1ï¼Œç„¶åæ‰§è¡Œ transfer æ–¹æ³•
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;    æ­¤æ—¶ nextTab ä¸ä¸º null&lt;/span&gt;
                &lt;span&gt;if&lt;/span&gt; (U.compareAndSwapInt(&lt;span&gt;this&lt;/span&gt;, SIZECTL, sc, sc + 1&lt;span&gt;))
                    transfer(tab, nt);
            }
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 1. å°† sizeCtl è®¾ç½®ä¸º (rs &amp;lt;&amp;lt; RESIZE_STAMP_SHIFT) + 2)
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;     æˆ‘æ˜¯æ²¡çœ‹æ‡‚è¿™ä¸ªå€¼çœŸæ­£çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿä¸è¿‡å¯ä»¥è®¡ç®—å‡ºæ¥çš„æ˜¯ï¼Œç»“æœæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤§çš„è´Ÿæ•°
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;  è°ƒç”¨ transfer æ–¹æ³•ï¼Œæ­¤æ—¶ nextTab å‚æ•°ä¸º null&lt;/span&gt;
            &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (U.compareAndSwapInt(&lt;span&gt;this&lt;/span&gt;&lt;span&gt;, SIZECTL, sc,
                                         (rs &lt;/span&gt;&amp;lt;&amp;lt; RESIZE_STAMP_SHIFT) + 2&lt;span&gt;))
                transfer(tab, &lt;/span&gt;&lt;span&gt;null&lt;/span&gt;&lt;span&gt;);
        }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™ä¸ªæ–¹æ³•çš„æ ¸å¿ƒåœ¨äº sizeCtl å€¼çš„æ“ä½œï¼Œé¦–å…ˆå°†å…¶è®¾ç½®ä¸ºä¸€ä¸ªè´Ÿæ•°ï¼Œç„¶åæ‰§è¡Œ transfer(tab, null)ï¼Œå†ä¸‹ä¸€ä¸ªå¾ªç¯å°† sizeCtl åŠ  1ï¼Œå¹¶æ‰§è¡Œ transfer(tab, nt)ï¼Œä¹‹åå¯èƒ½æ˜¯ç»§ç»­ sizeCtl åŠ  1ï¼Œå¹¶æ‰§è¡Œ transfer(tab, nt)ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œå¯èƒ½çš„æ“ä½œå°±æ˜¯æ‰§è¡ŒÂ 1 æ¬¡ transfer(tab, null) + å¤šæ¬¡ transfer(tab, nt)ï¼Œè¿™é‡Œæ€ä¹ˆç»“æŸå¾ªç¯çš„éœ€è¦çœ‹å®Œ transfer æºç æ‰æ¸…æ¥šã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;99&quot;&gt;
&lt;pre&gt;
&lt;span&gt;private&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; transfer(Node&amp;lt;K,V&amp;gt;[] tab, Node&amp;lt;K,V&amp;gt;&lt;span&gt;[] nextTab) {
    &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; n =&lt;span&gt; tab.length, stride;

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; stride åœ¨å•æ ¸ä¸‹ç›´æ¥ç­‰äº nï¼Œå¤šæ ¸æ¨¡å¼ä¸‹ä¸º (n&amp;gt;&amp;gt;&amp;gt;3)/NCPUï¼Œæœ€å°å€¼æ˜¯ 16
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; stride å¯ä»¥ç†è§£ä¸ºâ€æ­¥é•¿â€œï¼Œæœ‰ n ä¸ªä½ç½®æ˜¯éœ€è¦è¿›è¡Œè¿ç§»çš„ï¼Œ
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;   å°†è¿™ n ä¸ªä»»åŠ¡åˆ†ä¸ºå¤šä¸ªä»»åŠ¡åŒ…ï¼Œæ¯ä¸ªä»»åŠ¡åŒ…æœ‰ stride ä¸ªä»»åŠ¡&lt;/span&gt;
    &lt;span&gt;if&lt;/span&gt; ((stride = (NCPU &amp;gt; 1) ? (n &amp;gt;&amp;gt;&amp;gt; 3) / NCPU : n) &amp;lt;&lt;span&gt; MIN_TRANSFER_STRIDE)
        stride &lt;/span&gt;= MIN_TRANSFER_STRIDE; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; subdivide range

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¦‚æœ nextTab ä¸º nullï¼Œå…ˆè¿›è¡Œä¸€æ¬¡åˆå§‹åŒ–
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;    å‰é¢æˆ‘ä»¬è¯´äº†ï¼Œå¤–å›´ä¼šä¿è¯ç¬¬ä¸€ä¸ªå‘èµ·è¿ç§»çš„çº¿ç¨‹è°ƒç”¨æ­¤æ–¹æ³•æ—¶ï¼Œå‚æ•° nextTab ä¸º null
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;       ä¹‹åå‚ä¸è¿ç§»çš„çº¿ç¨‹è°ƒç”¨æ­¤æ–¹æ³•æ—¶ï¼ŒnextTab ä¸ä¼šä¸º null&lt;/span&gt;
    &lt;span&gt;if&lt;/span&gt; (nextTab == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å®¹é‡ç¿»å€&lt;/span&gt;
            Node&amp;lt;K,V&amp;gt;[] nt = (Node&amp;lt;K,V&amp;gt;[])&lt;span&gt;new&lt;/span&gt; Node&amp;lt;?,?&amp;gt;[n &amp;lt;&amp;lt; 1&lt;span&gt;];
            nextTab &lt;/span&gt;=&lt;span&gt; nt;
        } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt; (Throwable ex) {      &lt;span&gt;//&lt;/span&gt;&lt;span&gt; try to cope with OOME&lt;/span&gt;
            sizeCtl =&lt;span&gt; Integer.MAX_VALUE;
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt;;
        }
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; nextTable æ˜¯ ConcurrentHashMap ä¸­çš„å±æ€§&lt;/span&gt;
        nextTable =&lt;span&gt; nextTab;
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; transferIndex ä¹Ÿæ˜¯ ConcurrentHashMap çš„å±æ€§ï¼Œç”¨äºæ§åˆ¶è¿ç§»çš„ä½ç½®&lt;/span&gt;
        transferIndex =&lt;span&gt; n;
    }

    &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; nextn =&lt;span&gt; nextTab.length;

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ForwardingNode ç¿»è¯‘è¿‡æ¥å°±æ˜¯æ­£åœ¨è¢«è¿ç§»çš„ Node
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; è¿™ä¸ªæ„é€ æ–¹æ³•ä¼šç”Ÿæˆä¸€ä¸ªNodeï¼Œkeyã€value å’Œ next éƒ½ä¸º nullï¼Œå…³é”®æ˜¯ hash ä¸º MOVED
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; åé¢æˆ‘ä»¬ä¼šçœ‹åˆ°ï¼ŒåŸæ•°ç»„ä¸­ä½ç½® i å¤„çš„èŠ‚ç‚¹å®Œæˆè¿ç§»å·¥ä½œåï¼Œ
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;    å°±ä¼šå°†ä½ç½® i å¤„è®¾ç½®ä¸ºè¿™ä¸ª ForwardingNodeï¼Œç”¨æ¥å‘Šè¯‰å…¶ä»–çº¿ç¨‹è¯¥ä½ç½®å·²ç»å¤„ç†è¿‡äº†
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;    æ‰€ä»¥å®ƒå…¶å®ç›¸å½“äºæ˜¯ä¸€ä¸ªæ ‡å¿—ã€‚&lt;/span&gt;
    ForwardingNode&amp;lt;K,V&amp;gt; fwd = &lt;span&gt;new&lt;/span&gt; ForwardingNode&amp;lt;K,V&amp;gt;&lt;span&gt;(nextTab);


    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; advance æŒ‡çš„æ˜¯åšå®Œäº†ä¸€ä¸ªä½ç½®çš„è¿ç§»å·¥ä½œï¼Œå¯ä»¥å‡†å¤‡åšä¸‹ä¸€ä¸ªä½ç½®çš„äº†&lt;/span&gt;
    &lt;span&gt;boolean&lt;/span&gt; advance = &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
    &lt;/span&gt;&lt;span&gt;boolean&lt;/span&gt; finishing = &lt;span&gt;false&lt;/span&gt;; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; to ensure sweep before committing nextTab&lt;/span&gt;

    &lt;span&gt;/*&lt;/span&gt;&lt;span&gt;
     * ä¸‹é¢è¿™ä¸ª for å¾ªç¯ï¼Œæœ€éš¾ç†è§£çš„åœ¨å‰é¢ï¼Œè€Œè¦çœ‹æ‡‚å®ƒä»¬ï¼Œåº”è¯¥å…ˆçœ‹æ‡‚åé¢çš„ï¼Œç„¶åå†å€’å›æ¥çœ‹
     * 
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;

    &lt;span&gt;//&lt;/span&gt;&lt;span&gt; i æ˜¯ä½ç½®ç´¢å¼•ï¼Œbound æ˜¯è¾¹ç•Œï¼Œæ³¨æ„æ˜¯ä»åå¾€å‰&lt;/span&gt;
    &lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; i = 0, bound = 0&lt;span&gt;;;) {
        Node&lt;/span&gt;&amp;lt;K,V&amp;gt; f; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; fh;

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ä¸‹é¢è¿™ä¸ª while çœŸçš„æ˜¯ä¸å¥½ç†è§£
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; advance ä¸º true è¡¨ç¤ºå¯ä»¥è¿›è¡Œä¸‹ä¸€ä¸ªä½ç½®çš„è¿ç§»äº†
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;   ç®€å•ç†è§£ç»“å±€ï¼ši æŒ‡å‘äº† transferIndexï¼Œbound æŒ‡å‘äº† transferIndex-stride&lt;/span&gt;
        &lt;span&gt;while&lt;/span&gt;&lt;span&gt; (advance) {
            &lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt; nextIndex, nextBound;
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (--i &amp;gt;= bound ||&lt;span&gt; finishing)
                advance &lt;/span&gt;= &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;

            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å°† transferIndex å€¼èµ‹ç»™ nextIndex
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; è¿™é‡Œ transferIndex ä¸€æ—¦å°äºç­‰äº 0ï¼Œè¯´æ˜åŸæ•°ç»„çš„æ‰€æœ‰ä½ç½®éƒ½æœ‰ç›¸åº”çš„çº¿ç¨‹å»å¤„ç†äº†&lt;/span&gt;
            &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; ((nextIndex = transferIndex) &amp;lt;= 0&lt;span&gt;) {
                i &lt;/span&gt;= -1&lt;span&gt;;
                advance &lt;/span&gt;= &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
            }
            &lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt;&lt;span&gt; (U.compareAndSwapInt
                     (&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;, TRANSFERINDEX, nextIndex,
                      nextBound &lt;/span&gt;= (nextIndex &amp;gt; stride ?&lt;span&gt;
                                   nextIndex &lt;/span&gt;- stride : 0&lt;span&gt;))) {
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; çœ‹æ‹¬å·ä¸­çš„ä»£ç ï¼ŒnextBound æ˜¯è¿™æ¬¡è¿ç§»ä»»åŠ¡çš„è¾¹ç•Œï¼Œæ³¨æ„ï¼Œæ˜¯ä»åå¾€å‰&lt;/span&gt;
                bound =&lt;span&gt; nextBound;
                i &lt;/span&gt;= nextIndex - 1&lt;span&gt;;
                advance &lt;/span&gt;= &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
            }
        }
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (i &amp;lt; 0 || i &amp;gt;= n || i + n &amp;gt;=&lt;span&gt; nextn) {
            &lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt; sc;
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (finishing) {
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ‰€æœ‰çš„è¿ç§»æ“ä½œå·²ç»å®Œæˆ&lt;/span&gt;
                nextTable = &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å°†æ–°çš„ nextTab èµ‹å€¼ç»™ table å±æ€§ï¼Œå®Œæˆè¿ç§»&lt;/span&gt;
                table =&lt;span&gt; nextTab;
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; é‡æ–°è®¡ç®— sizeCtlï¼šn æ˜¯åŸæ•°ç»„é•¿åº¦ï¼Œæ‰€ä»¥ sizeCtl å¾—å‡ºçš„å€¼å°†æ˜¯æ–°æ•°ç»„é•¿åº¦çš„ 0.75 å€&lt;/span&gt;
                sizeCtl = (n &amp;lt;&amp;lt; 1) - (n &amp;gt;&amp;gt;&amp;gt; 1&lt;span&gt;);
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt;;
            }

            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ä¹‹å‰æˆ‘ä»¬è¯´è¿‡ï¼ŒsizeCtl åœ¨è¿ç§»å‰ä¼šè®¾ç½®ä¸º (rs &amp;lt;&amp;lt; RESIZE_STAMP_SHIFT) + 2
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ç„¶åï¼Œæ¯æœ‰ä¸€ä¸ªçº¿ç¨‹å‚ä¸è¿ç§»å°±ä¼šå°† sizeCtl åŠ  1ï¼Œ
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; è¿™é‡Œä½¿ç”¨ CAS æ“ä½œå¯¹ sizeCtl è¿›è¡Œå‡ 1ï¼Œä»£è¡¨åšå®Œäº†å±äºè‡ªå·±çš„ä»»åŠ¡&lt;/span&gt;
            &lt;span&gt;if&lt;/span&gt; (U.compareAndSwapInt(&lt;span&gt;this&lt;/span&gt;, SIZECTL, sc = sizeCtl, sc - 1&lt;span&gt;)) {
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ä»»åŠ¡ç»“æŸï¼Œæ–¹æ³•é€€å‡º&lt;/span&gt;
                &lt;span&gt;if&lt;/span&gt; ((sc - 2) != resizeStamp(n) &amp;lt;&amp;lt;&lt;span&gt; RESIZE_STAMP_SHIFT)
                    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt;;

                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; åˆ°è¿™é‡Œï¼Œè¯´æ˜ (sc - 2) == resizeStamp(n) &amp;lt;&amp;lt; RESIZE_STAMP_SHIFTï¼Œ
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€æœ‰çš„è¿ç§»ä»»åŠ¡éƒ½åšå®Œäº†ï¼Œä¹Ÿå°±ä¼šè¿›å…¥åˆ°ä¸Šé¢çš„ if(finishing){} åˆ†æ”¯äº†&lt;/span&gt;
                finishing = advance = &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
                i &lt;/span&gt;= n; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; recheck before commit&lt;/span&gt;
&lt;span&gt;            }
        }
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¦‚æœä½ç½® i å¤„æ˜¯ç©ºçš„ï¼Œæ²¡æœ‰ä»»ä½•èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæ”¾å…¥åˆšåˆšåˆå§‹åŒ–çš„ ForwardingNode â€ç©ºèŠ‚ç‚¹â€œ&lt;/span&gt;
        &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; ((f = tabAt(tab, i)) == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
            advance &lt;/span&gt;= casTabAt(tab, i, &lt;span&gt;null&lt;/span&gt;&lt;span&gt;, fwd);
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; è¯¥ä½ç½®å¤„æ˜¯ä¸€ä¸ª ForwardingNodeï¼Œä»£è¡¨è¯¥ä½ç½®å·²ç»è¿ç§»è¿‡äº†&lt;/span&gt;
        &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; ((fh = f.hash) ==&lt;span&gt; MOVED)
            advance &lt;/span&gt;= &lt;span&gt;true&lt;/span&gt;; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; already processed&lt;/span&gt;
        &lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¯¹æ•°ç»„è¯¥ä½ç½®å¤„çš„ç»“ç‚¹åŠ é”ï¼Œå¼€å§‹å¤„ç†æ•°ç»„è¯¥ä½ç½®å¤„çš„è¿ç§»å·¥ä½œ&lt;/span&gt;
            &lt;span&gt;synchronized&lt;/span&gt;&lt;span&gt; (f) {
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (tabAt(tab, i) ==&lt;span&gt; f) {
                    Node&lt;/span&gt;&amp;lt;K,V&amp;gt;&lt;span&gt; ln, hn;
                    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¤´ç»“ç‚¹çš„ hash å¤§äº 0ï¼Œè¯´æ˜æ˜¯é“¾è¡¨çš„ Node èŠ‚ç‚¹&lt;/span&gt;
                    &lt;span&gt;if&lt;/span&gt; (fh &amp;gt;= 0&lt;span&gt;) {
                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ä¸‹é¢è¿™ä¸€å—å’Œ Java7 ä¸­çš„ ConcurrentHashMap è¿ç§»æ˜¯å·®ä¸å¤šçš„ï¼Œ
                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; éœ€è¦å°†é“¾è¡¨ä¸€åˆ†ä¸ºäºŒï¼Œ
                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;   æ‰¾åˆ°åŸé“¾è¡¨ä¸­çš„ lastRunï¼Œç„¶å lastRun åŠå…¶ä¹‹åçš„èŠ‚ç‚¹æ˜¯ä¸€èµ·è¿›è¡Œè¿ç§»çš„
                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;   lastRun ä¹‹å‰çš„èŠ‚ç‚¹éœ€è¦è¿›è¡Œå…‹éš†ï¼Œç„¶ååˆ†åˆ°ä¸¤ä¸ªé“¾è¡¨ä¸­&lt;/span&gt;
                        &lt;span&gt;int&lt;/span&gt; runBit = fh &amp;amp;&lt;span&gt; n;
                        Node&lt;/span&gt;&amp;lt;K,V&amp;gt; lastRun =&lt;span&gt; f;
                        &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; (Node&amp;lt;K,V&amp;gt; p = f.next; p != &lt;span&gt;null&lt;/span&gt;; p =&lt;span&gt; p.next) {
                            &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; b = p.hash &amp;amp;&lt;span&gt; n;
                            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (b !=&lt;span&gt; runBit) {
                                runBit &lt;/span&gt;=&lt;span&gt; b;
                                lastRun &lt;/span&gt;=&lt;span&gt; p;
                            }
                        }
                        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (runBit == 0&lt;span&gt;) {
                            ln &lt;/span&gt;=&lt;span&gt; lastRun;
                            hn &lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
                        }
                        &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
                            hn &lt;/span&gt;=&lt;span&gt; lastRun;
                            ln &lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
                        }
                        &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; (Node&amp;lt;K,V&amp;gt; p = f; p != lastRun; p =&lt;span&gt; p.next) {
                            &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; ph = p.hash; K pk = p.key; V pv =&lt;span&gt; p.val;
                            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; ((ph &amp;amp; n) == 0&lt;span&gt;)
                                ln &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; Node&amp;lt;K,V&amp;gt;&lt;span&gt;(ph, pk, pv, ln);
                            &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;
                                hn &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; Node&amp;lt;K,V&amp;gt;&lt;span&gt;(ph, pk, pv, hn);
                        }
                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å…¶ä¸­çš„ä¸€ä¸ªé“¾è¡¨æ”¾åœ¨æ–°æ•°ç»„çš„ä½ç½® i&lt;/span&gt;
&lt;span&gt;                        setTabAt(nextTab, i, ln);
                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¦ä¸€ä¸ªé“¾è¡¨æ”¾åœ¨æ–°æ•°ç»„çš„ä½ç½® i+n&lt;/span&gt;
                        setTabAt(nextTab, i +&lt;span&gt; n, hn);
                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å°†åŸæ•°ç»„è¯¥ä½ç½®å¤„è®¾ç½®ä¸º fwdï¼Œä»£è¡¨è¯¥ä½ç½®å·²ç»å¤„ç†å®Œæ¯•ï¼Œ
                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;    å…¶ä»–çº¿ç¨‹ä¸€æ—¦çœ‹åˆ°è¯¥ä½ç½®çš„ hash å€¼ä¸º MOVEDï¼Œå°±ä¸ä¼šè¿›è¡Œè¿ç§»äº†&lt;/span&gt;
&lt;span&gt;                        setTabAt(tab, i, fwd);
                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; advance è®¾ç½®ä¸º trueï¼Œä»£è¡¨è¯¥ä½ç½®å·²ç»è¿ç§»å®Œæ¯•&lt;/span&gt;
                        advance = &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
                    }
                    &lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (f &lt;span&gt;instanceof&lt;/span&gt;&lt;span&gt; TreeBin) {
                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; çº¢é»‘æ ‘çš„è¿ç§»&lt;/span&gt;
                        TreeBin&amp;lt;K,V&amp;gt; t = (TreeBin&amp;lt;K,V&amp;gt;&lt;span&gt;)f;
                        TreeNode&lt;/span&gt;&amp;lt;K,V&amp;gt; lo = &lt;span&gt;null&lt;/span&gt;, loTail = &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
                        TreeNode&lt;/span&gt;&amp;lt;K,V&amp;gt; hi = &lt;span&gt;null&lt;/span&gt;, hiTail = &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
                        &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; lc = 0, hc = 0&lt;span&gt;;
                        &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; (Node&amp;lt;K,V&amp;gt; e = t.first; e != &lt;span&gt;null&lt;/span&gt;; e =&lt;span&gt; e.next) {
                            &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; h =&lt;span&gt; e.hash;
                            TreeNode&lt;/span&gt;&amp;lt;K,V&amp;gt; p = &lt;span&gt;new&lt;/span&gt; TreeNode&amp;lt;K,V&amp;gt;&lt;span&gt;
                                (h, e.key, e.val, &lt;/span&gt;&lt;span&gt;null&lt;/span&gt;, &lt;span&gt;null&lt;/span&gt;&lt;span&gt;);
                            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; ((h &amp;amp; n) == 0&lt;span&gt;) {
                                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; ((p.prev = loTail) == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
                                    lo &lt;/span&gt;=&lt;span&gt; p;
                                &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;
                                    loTail.next &lt;/span&gt;=&lt;span&gt; p;
                                loTail &lt;/span&gt;=&lt;span&gt; p;
                                &lt;/span&gt;++&lt;span&gt;lc;
                            }
                            &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
                                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; ((p.prev = hiTail) == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
                                    hi &lt;/span&gt;=&lt;span&gt; p;
                                &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;
                                    hiTail.next &lt;/span&gt;=&lt;span&gt; p;
                                hiTail &lt;/span&gt;=&lt;span&gt; p;
                                &lt;/span&gt;++&lt;span&gt;hc;
                            }
                        }
                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¦‚æœä¸€åˆ†ä¸ºäºŒåï¼ŒèŠ‚ç‚¹æ•°å°‘äº 8ï¼Œé‚£ä¹ˆå°†çº¢é»‘æ ‘è½¬æ¢å›é“¾è¡¨&lt;/span&gt;
                        ln = (lc &amp;lt;= UNTREEIFY_THRESHOLD) ?&lt;span&gt; untreeify(lo) :
                            (hc &lt;/span&gt;!= 0) ? &lt;span&gt;new&lt;/span&gt; TreeBin&amp;lt;K,V&amp;gt;&lt;span&gt;(lo) : t;
                        hn &lt;/span&gt;= (hc &amp;lt;= UNTREEIFY_THRESHOLD) ?&lt;span&gt; untreeify(hi) :
                            (lc &lt;/span&gt;!= 0) ? &lt;span&gt;new&lt;/span&gt; TreeBin&amp;lt;K,V&amp;gt;&lt;span&gt;(hi) : t;

                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å°† ln æ”¾ç½®åœ¨æ–°æ•°ç»„çš„ä½ç½® i&lt;/span&gt;
&lt;span&gt;                        setTabAt(nextTab, i, ln);
                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å°† hn æ”¾ç½®åœ¨æ–°æ•°ç»„çš„ä½ç½® i+n&lt;/span&gt;
                        setTabAt(nextTab, i +&lt;span&gt; n, hn);
                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å°†åŸæ•°ç»„è¯¥ä½ç½®å¤„è®¾ç½®ä¸º fwdï¼Œä»£è¡¨è¯¥ä½ç½®å·²ç»å¤„ç†å®Œæ¯•ï¼Œ
                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;    å…¶ä»–çº¿ç¨‹ä¸€æ—¦çœ‹åˆ°è¯¥ä½ç½®çš„ hash å€¼ä¸º MOVEDï¼Œå°±ä¸ä¼šè¿›è¡Œè¿ç§»äº†&lt;/span&gt;
&lt;span&gt;                        setTabAt(tab, i, fwd);
                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; advance è®¾ç½®ä¸º trueï¼Œä»£è¡¨è¯¥ä½ç½®å·²ç»è¿ç§»å®Œæ¯•&lt;/span&gt;
                        advance = &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
                    }
                }
            }
        }
    }
}&lt;/span&gt; 
&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;article-title&quot;&gt;Â &lt;/p&gt;
&lt;p class=&quot;article-title&quot;&gt;Â &lt;/p&gt;
&lt;h4 class=&quot;article-title&quot;&gt;å‚è€ƒèµ„æ–™ / ç›¸å…³æ¨èï¼š&lt;/h4&gt;
&lt;p class=&quot;article-title&quot;&gt;&lt;a href=&quot;http://cmsblogs.com/?p=2283&quot;&gt;ã€æ­»ç£•Javaå¹¶å‘ã€‘â€”â€“J.U.Cä¹‹Javaå¹¶å‘å®¹å™¨ï¼šConcurrentHashMap&lt;/a&gt;&lt;/p&gt;
&lt;p class=&quot;article-title&quot;&gt;&lt;a href=&quot;https://my.oschina.net/mononite/blog/144329&quot; target=&quot;_blank&quot;&gt;ConcurrentHashMapä½¿ç”¨ç¤ºä¾‹Â &lt;/a&gt;&lt;/p&gt;
&lt;p class=&quot;article-title&quot;&gt;&lt;a href=&quot;https://blog.csdn.net/zero__007/article/details/49833819&quot; target=&quot;_blank&quot;&gt;ConcurrentHashMapä½¿ç”¨ç¤ºä¾‹&lt;/a&gt;&lt;/p&gt;
&lt;p class=&quot;article-title&quot;&gt;&lt;a href=&quot;https://javadoop.com/post/hashmap#Java8%20HashMap&quot; target=&quot;_blank&quot;&gt;Java7/8 ä¸­çš„ HashMap å’Œ ConcurrentHashMap å…¨è§£æ&lt;/a&gt;&lt;/p&gt;
&lt;p class=&quot;ui teal label horizontal&quot; data-tooltip=&quot;åŸåˆ›&quot;&gt;Â &lt;/p&gt;
</description>
<pubDate>Tue, 18 Dec 2018 07:36:00 +0000</pubDate>
<dc:creator>é‚£è‚¡æ³¥çŸ³æµ</dc:creator>
<og:description>å…ˆåšæ€»ç»“ï¼š 1ã€HashMap HashTableÂ ConcurrentHashMap HashMapï¼šçº¿ç¨‹ä¸å®‰å…¨ HashTableï¼šçº¿ç¨‹å®‰å…¨ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½åŠ äº†Â synchroni</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/hexinwei1/p/10000779.html</dc:identifier>
</item>
<item>
<title>dnSpy å¼ºå¤§çš„.Netåç¼–è¯‘è½¯ä»¶ - .NETè¥¿å®‰ç¤¾åŒº</title>
<link>http://www.cnblogs.com/xiandnc/p/10132491.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/xiandnc/p/10132491.html</guid>
<description>&lt;blockquote&gt;
&lt;p&gt;ä½œè€…ï¼šD.æ³¡æ²«&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸€è¯´èµ·.netçš„åç¼–è¯‘è½¯ä»¶ï¼Œå¤§å®¶é¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯Reflectorï¼ŒILSpyï¼ŒdotPeekç­‰ç­‰ã€‚è€ŒdnSpyåŒæ ·æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„åç¼–è¯‘è½¯ä»¶ï¼ŒåŒæ—¶å®ƒæ˜¯å¼€æºå…è´¹çš„ã€‚å®˜æ–¹çš„æè¿°æ˜¯: dnSpyæ˜¯ä¸€ä¸ªè°ƒè¯•å™¨å’Œ.NETç»„ä»¶ç¼–è¾‘å™¨ã€‚ å³ä½¿æ‚¨æ²¡æœ‰ä»»ä½•å¯ç”¨çš„æºä»£ç ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å®ƒæ¥ç¼–è¾‘å’Œè°ƒè¯•ç¨‹åºé›†ã€‚&lt;br/&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/xiandnc/1364492/o_dnSpy_P1.png&quot; alt=&quot;æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªæ˜¯å®˜æ–¹çš„å›¾ç‰‡ï¼Œå¯ä»¥çœ‹å‡ºå’ŒVSçš„é£æ ¼è¿˜æ˜¯å¾ˆåƒçš„ï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿæœ‰å¾ˆå¤šç›¸ä¼¼çš„åœ°æ–¹ï¼Œå–„äºç”¨VSçš„äººï¼Œå¯ä»¥å¾ˆå¿«çš„ä¸Šæ‰‹è¿™ä¸ªè½¯ä»¶ã€‚å½“ç„¶é™¤äº†è¿™ä¸ªæ·±è‰²çš„ä¸»é¢˜ä»¥å¤–ï¼Œè¿˜æœ‰æµ…è‰²ä¸»é¢˜å¯ä»¥åˆ‡æ¢ã€‚&lt;br/&gt;dnSpyä½¿ç”¨ILSpyåç¼–è¯‘å™¨å¼•æ“å’ŒRoslynï¼ˆCï¼ƒ/ Visual Basicï¼‰ç¼–è¯‘å™¨ä»¥åŠè®¸å¤šå…¶ä»–å¼€æºåº“ï¼Œå¯ä»¥ç¼–è¯‘.Net Framework, .Net Coreå’ŒUnityæ¸¸æˆéƒ¨ä»¶ï¼Œä¸éœ€è¦æºç ã€‚ä»Šå¤©å°†ç»™å¤§å®¶æ¼”ç¤ºä¸€ä¸‹ï¼ŒdnSpyå¼ºå¤§çš„è°ƒè¯•å’Œç¼–è¾‘åº”ç”¨ç¨‹åºçš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;h3 id=&quot;debugå¤–éƒ¨å¼•ç”¨çš„dllæ–‡ä»¶&quot;&gt;1. Debugå¤–éƒ¨å¼•ç”¨çš„Dllæ–‡ä»¶&lt;/h3&gt;
&lt;p&gt;é¦–å…ˆå‡†å¤‡ä¸€ä¸ªç®€å•çš„ç¨‹åºï¼ŒæœŸå¾…çš„ç»“æœæ˜¯è¾“å…¥äººæ•°å¾—åˆ°ä¿ƒé”€åçš„æ€»ä»·ï¼Œç•Œé¢å¦‚ä¸‹ï¼š&lt;br/&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/xiandnc/1364492/o_dnSpy_P2.png&quot; alt=&quot;æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°&quot;/&gt;&lt;br/&gt;çœ‹ä¸€ä¸‹ç¨‹åºï¼Œå…¶å®å°±æ˜¯ç®€å•çš„å–å¾—è¾“å…¥çš„äººæ•°ï¼Œç„¶åè°ƒç”¨ç¬¬ä¸‰æ–¹ç±»åº“çš„æ–¹æ³•ï¼Œå¾—åˆ°ç»“æœï¼š&lt;br/&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/xiandnc/1364492/o_dnSpy_P3.png&quot; alt=&quot;æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°&quot;/&gt;&lt;br/&gt;è¿™é‡Œçš„Calculator.GetAmountByPromotionæ–¹æ³•æ˜¯_3rdCalculatorçš„ç¬¬ä¸‰æ–¹ç±»åº“æä¾›çš„ï¼Œæˆ‘ä»¬æ— æ³•ç›´æ¥ç¡®å®šå…¶å†…éƒ¨å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;è¾“å…¥ä¸€ä¸‹æµ‹è¯•æ•°æ®ï¼š&lt;br/&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/xiandnc/1364492/o_dnSpy_P4.png&quot; alt=&quot;æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°&quot;/&gt;&lt;br/&gt;å†è¾“å…¥ä¸€ä¸‹æ–°çš„æµ‹è¯•æ•°æ®ï¼š&lt;br/&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/xiandnc/1364492/o_dnSpy_P5.png&quot; alt=&quot;æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°&quot;/&gt;&lt;br/&gt;ä¼šå‘ç°å¾ˆéš¾æ¨æµ‹å‡ºå†…éƒ¨çš„é€»è¾‘ã€‚è¿™ä¸ªæ—¶å€™å°±å¯ä»¥è¿›è¡Œdebugäº†ã€‚&lt;br/&gt;æ‰“å¼€dnSpy.exeã€‚è¿™ä¸ªæ—¶å€™è¯·æ³¨æ„ï¼Œç”±äºè¿™ä¸ªé¡¹ç›®ç”¨çš„æ˜¯.net coreå¹¶ä¸”æ˜¯publishçš„ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ç”¨dnSpyç›´æ¥æ‰“å¼€publishç›®å½•ä¸‹çš„è¦debugçš„dllæ–‡ä»¶ã€‚&lt;br/&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/xiandnc/1364492/o_dnSpy_P6.png&quot; alt=&quot;æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°&quot;/&gt;&lt;br/&gt;åœ¨éœ€è¦çš„åœ°æ–¹æ‰“ä¸Šæ–­ç‚¹ï¼Œç„¶åä½¿ç”¨attachçš„å¿«æ·é”®Ctrl+Alt+Pï¼Œåœ¨å¼¹å‡ºçš„åˆ—è¡¨é‡Œé€‰æ‹©&lt;br/&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/xiandnc/1364492/o_dnSpy_P7.png&quot; alt=&quot;æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°&quot;/&gt;&lt;br/&gt;å†ç‚¹å‡»é¡µé¢çš„æäº¤æŒ‰é’®è§¦å‘äº‹ä»¶ï¼š&lt;br/&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/xiandnc/1364492/o_dnSpy_P8.png&quot; alt=&quot;æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°&quot;/&gt;&lt;br/&gt;è¿™ä¸ªæ—¶å€™å¯ä»¥çœ‹åˆ°ç»“æœæ˜¾ç¤ºåœ¨ä¸‹é¢Localsçš„çª—å£é‡Œé¢ã€‚&lt;br/&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæ˜¯ä¸éœ€è¦publishçš„ï¼Œè€Œæ˜¯ç›´æ¥æŠŠæ•´ä¸ªä»£ç æ”¾åœ¨IISä¸‹ï¼Œç„¶åæ¯æ¬¡ç¼–è¯‘å°±æ˜¯ä¸€æ¬¡å‘å¸ƒçš„æƒ…å†µï¼Œä¸è¦ç›´æ¥ä½¿ç”¨ä»£ç ä¸‹é¢çš„binç›®å½•é‡Œçš„dllæ–‡ä»¶ï¼Œå› ä¸ºIISä¼šæŠŠbuildå‡ºæ¥çš„dllæ–‡ä»¶ï¼ŒåŠ¨æ€ç”Ÿæˆä¸€ä»½å‡ºæ¥ï¼Œå­˜åˆ°ç±»ä¼¼äº\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\root\c8367e31\abdb5fb1\assembly\dl3ä¸‹é¢çš„ç›®å½•é‡Œï¼Œè¿™ä¸ªæ—¶å€™è¦å…ˆæœç´¢åˆ°ä½ æƒ³debugçš„æ–¹æ³•åœ¨å“ªä¸ªdllæ–‡ä»¶é‡Œï¼Œç„¶åæœç´¢åˆ°è¿™ä¸ªæ–‡ä»¶ä½ç½®ï¼Œå†ç”¨dnSpyæ‰“å¼€å®ƒï¼ŒdnSpyä¼šè‡ªåŠ¨åŠ è½½å’Œè¿™ä¸ªdllæœ‰å…³è”çš„æ‰€æœ‰dllæ–‡ä»¶ï¼Œç„¶åå¯åŠ¨ç½‘ç«™ï¼Œè¿™ä¸ªå†é™„åŠ åˆ°w3p.exeä¸Šå°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;è°ƒè¯•åº”ç”¨ç¨‹åº&quot;&gt;2. è°ƒè¯•åº”ç”¨ç¨‹åº&lt;/h3&gt;
&lt;ol readability=&quot;1.9827089337176&quot;&gt;&lt;li readability=&quot;6.9394812680115&quot;&gt;
&lt;p&gt;è°ƒè¯•åº”ç”¨ç¨‹åº&lt;br/&gt;è¿˜æ˜¯ä»¥ä¸Šä¸€ä¸ªä¾‹å­ä¸ºä¾‹ï¼Œè¿™æ¬¡ç”Ÿæˆä¸€ä¸ªexeçš„æ–‡ä»¶ã€‚&lt;br/&gt;ä»£ç å¦‚ä¸‹&lt;br/&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/xiandnc/1364492/o_dnSpy_P9.png&quot; alt=&quot;æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°&quot;/&gt;&lt;br/&gt;è¿è¡Œï¼Œçª—å£å¦‚ä¸‹ï¼š&lt;br/&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/xiandnc/1364492/o_dnSpy_P10.png&quot; alt=&quot;æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°&quot;/&gt;&lt;br/&gt;æ‰“å¼€dnSpyï¼Œæ‰¾åˆ°exeæ–‡ä»¶çš„ä½ç½®ï¼Œæ‰“å¼€è¦è°ƒè¯•çš„dllæ–‡ä»¶ï¼š&lt;br/&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/xiandnc/1364492/o_dnSpy_P11.png&quot; alt=&quot;æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°&quot;/&gt;&lt;br/&gt;åœ¨éœ€è¦çš„åœ°æ–¹æ‰“ä¸Šæ–­ç‚¹ï¼Œç‚¹å‡»ä¸Šé¢çš„Startå¼€å§‹è°ƒè¯•ï¼š&lt;br/&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/xiandnc/1364492/o_dnSpy_P12.png&quot; alt=&quot;æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°&quot;/&gt;&lt;br/&gt;å¼¹å‡ºçš„çª—å£è®¾ç½®ä¿æŒé»˜è®¤å°±å¯ä»¥ï¼Œç¨‹åºæ‰§è¡Œï¼Œè¾“å…¥äººæ•°åï¼Œè¿›å…¥æ–­ç‚¹ï¼Œå°±å¯ä»¥æ­£å¸¸è°ƒè¯•äº†ï¼š&lt;br/&gt;[æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][13]&lt;br/&gt;æ³¨æ„ï¼Œä¸€èˆ¬dnSpyä¼šæŠŠç›¸å…³çš„dlléƒ½è‡ªåŠ¨åŠ å…¥è¿›æ¥ï¼Œä½†æ˜¯å¦‚æœæ˜¯ä¸åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œå·¥å…·æ£€æµ‹ä¸åˆ°çš„ï¼Œä½†æ˜¯æœ‰ä¾èµ–çš„ï¼Œå¿…é¡»æ‰‹åŠ¨åŠ å…¥è¿›æ¥ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ä¿®æ”¹exeæ–‡ä»¶çš„å†…å®¹&quot;&gt;3. ä¿®æ”¹exeæ–‡ä»¶çš„å†…å®¹&lt;/h3&gt;
&lt;p&gt;dnSpyç¼–è¾‘dllæ–‡ä»¶çš„åŠŸèƒ½å¾ˆæ–¹ä¾¿ï¼Œä¸ç”¨å…¶ä»–æ’ä»¶æˆ–è€…è¾…åŠ©ï¼Œå°±å¯ä»¥è¿›è¡Œä¿®æ”¹ã€‚ä¾‹å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘æƒ³æŠŠè®¡ç®—é€»è¾‘å¢åŠ è¶…è¿‡10ä¸ªäººçš„æ—¶å€™ï¼Œä¼˜æƒ æ›´é«˜ï¼Œé‚£ä¹ˆæˆ‘å¯ä»¥ç›´æ¥ä¿®æ”¹dllé‡Œé¢çš„æ–¹æ³•ã€‚&lt;br/&gt;é¦–å…ˆæ‰¾åˆ°è¦ä¿®æ”¹çš„æ–¹æ³•ï¼Œç„¶ååœ¨æ–¹æ³•ä¸Šç‚¹å‡»å³é”®ï¼š&lt;br/&gt;[æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°][14]&lt;br/&gt;åœ¨å¼¹å‡ºçš„æ–°çª—å£ä¸Šç›´æ¥ä¿®æ”¹æ–¹æ³•ï¼š&lt;br/&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/xiandnc/1364492/o_dnSpy_P15.png&quot; alt=&quot;æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°&quot;/&gt;&lt;br/&gt;ç¼–è¾‘ç»“æŸåï¼Œç‚¹å‡»ä¸‹é¢çš„Compile. ç„¶åç‚¹å‡»ä¿å­˜æ‰€æœ‰ã€‚ç»§ç»­ç‚¹OKã€‚&lt;br/&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/xiandnc/1364492/o_dnSpy_P16.png&quot; alt=&quot;æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°&quot;/&gt;&lt;br/&gt;è¿™ä¸ªæ—¶å€™ç‚¹å‡»exeæ–‡ä»¶ï¼Œè¾“å…¥äººæ•°ï¼Œä¼šå‘ç°æ¯”10ä¸ªäººçš„æ—¶å€™è¿˜è¦ä¾¿å®œäº†å¾ˆå¤šï¼Œå°±æ˜¯ä»£ç ç”Ÿæ•ˆäº†ï¼š&lt;br/&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/xiandnc/1364492/o_dnSpy_P17.png&quot; alt=&quot;æ­¤å¤„è¾“å…¥å›¾ç‰‡çš„æè¿°&quot;/&gt;&lt;br/&gt;ä»¥ä¸Šå°±æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„åŠŸèƒ½ï¼Œå½“ç„¶dnSpyè¿˜æœ‰å¾ˆå¤šè´´å¿ƒå’Œæœ‰ç”¨çš„åŠŸèƒ½ï¼Œæœ‰å¾…å¤§å®¶å»å‘ç°ã€‚é™„ä¸Š&lt;a href=&quot;https://github.com/0xd4d/dnSpy&quot;&gt;å®˜æ–¹åœ°å€&lt;/a&gt;ï¼Œè¯·å¤§å®¶è‡ªå·±å»æŒ–æ˜äº†ã€‚è°¢è°¢å¤§å®¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</description>
<pubDate>Tue, 18 Dec 2018 07:27:00 +0000</pubDate>
<dc:creator>.NETè¥¿å®‰ç¤¾åŒº</dc:creator>
<og:description>ä½œè€…ï¼šD.æ³¡æ²« ä¸€è¯´èµ·.netçš„åç¼–è¯‘è½¯ä»¶ï¼Œå¤§å®¶é¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯Reflectorï¼ŒILSpyï¼ŒdotPeekç­‰ç­‰ã€‚è€ŒdnSpyåŒæ ·æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„åç¼–è¯‘è½¯ä»¶ï¼ŒåŒæ—¶å®ƒæ˜¯å¼€æºå…è´¹çš„ã€‚å®˜æ–¹çš„æè¿°æ˜¯: dnSpy</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/xiandnc/p/10132491.html</dc:identifier>
</item>
<item>
<title>æ­å»ºSpringCloud-Eureka æ³¨å†Œä¸­å¿ƒä»¥åŠæœåŠ¡æä¾›ä¸è°ƒç”¨ - é˜Ÿé•¿ç»™æˆ‘çƒã€‚</title>
<link>http://www.cnblogs.com/JJJ1990/p/10137384.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/JJJ1990/p/10137384.html</guid>
<description>&lt;p&gt;çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œå•Š~æœç„¶çœ‹ç€å¾ˆeasyï¼Œè‡ªå·±æèµ·æ¥å°±æ˜¯å„ç§å‘~å„ä½çœ‹å®˜ï¼Œå®¹æˆ‘æ…¢æ…¢é“æ¥~&lt;/p&gt;
&lt;p&gt;å…³äºspringcloudæ˜¯ä»€ä¹ˆæˆ‘å°±ä¸åºŸè¯äº†~&lt;/p&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;EurekaÂ &lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Eurekaï¼ˆåŸæ¥ä»¥ä¸ºæ˜¯ç¼©å†™ï¼ŒåŸæ¥å°±æ˜¯ä¸€ä¸ªå•è¯ï¼Œç¿»è¯‘ä¸ºï¼šæˆ‘å‘ç°äº†ï¼Œæˆ‘æ‰¾åˆ°äº†ï¼0.0ï¼‰æ˜¯Netflixå¼€æºçš„ä¸€æ¬¾æä¾›æœåŠ¡æ³¨å†Œå’Œå‘ç°çš„äº§å“ï¼Œå®ƒæä¾›äº†å®Œæ•´çš„Service Registryå’ŒService Discoveryå®ç°ã€‚ä¹Ÿæ˜¯springcloudä½“ç³»ä¸­æœ€é‡è¦æœ€æ ¸å¿ƒçš„ç»„ä»¶ä¹‹ä¸€ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªä¸œè¥¿é€šä¿—çš„ç†è§£å°±åƒæ˜¯ä¸€ä¸ªæ·˜å®ï¼Œä½ æ˜¯å–å®¶ä¹Ÿå¥½ï¼Œè¿˜æ˜¯ä¹°å®¶ä¹Ÿå¥½ï¼Œä½ è¦äº¤æ˜“ï¼Œä½ å¾—åœ¨æˆ‘è¿™å…ˆæ³¨å†Œä¸€ä¸ªè´¦å·ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1ï¼Œå…ˆæ–°å»ºä¸€ä¸ªmavenå·¥ç¨‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2ï¼Œåœ¨pomæ–‡ä»¶ä¸­å¼•å…¥ç›¸å…³jaråŒ…&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å­¦ä¹ å¤§ä½¬çš„æ•™ç¨‹ï¼Œç»“æœç”¨å¤§ä½¬çš„demoç›´æ¥æŠ¥é”™ï¼Œå¯åŠ¨ç¨‹åºä¸€ç›´æç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Caused by: java.lang.ClassNotFoundException: com.sun.jersey.api.core.DefaultResourceConfig&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;éƒé—·ï¼ŒæŸ¥çœ‹spring-cloud-starter-eureka-server Â Â jaråŒ…&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1063420/201812/1063420-20181218152028070-1275846195.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å‘ç°å…¶ä¸­å¼•å…¥çš„jerseyçš„jaræ˜¯1.19.1ï¼Œç„¶åè‡ªå·±ç ”ç©¶ï¼Œå‘ç°1.19å¯ä»¥ä½¿ç”¨ï¼Œé‚åœ¨pomæ–‡ä»¶ä¸­å¼•å…¥ï¼ŒæŒ‰ç…§æˆ‘çš„ç†è§£1.19.1è‚¯å®šæ¯”1.19ç‰ˆæœ¬é«˜çš„ï¼Œæ€ä¹ˆåè€Œä¸è¡Œäº†ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å†å¯åŠ¨ï¼Œç„¶åè¿™ä¸ªé”™è¯¯æ˜¯æ¶ˆå¤±äº†ï¼Œç»“æœåé¢åˆæŠ¥é”™ï¼Œåˆå‡ºæ¥ä¸€ä¸ªservo åŒ…ä¸‹çš„ç±»æ‰¾ä¸åˆ°ï¼Œmmp~åˆæ˜¯ç‰ˆæœ¬é—®é¢˜ï¼Œå†å¼•å…¥Â servoåŒ…ï¼Œokäº†~&lt;/p&gt;
&lt;p&gt;æœ€ç»ˆå½¢æˆå¦‚ä¸‹çš„pomé…ç½®æ–‡ä»¶&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &amp;lt;parent&amp;gt;
&lt;span&gt; 2&lt;/span&gt;        &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
&lt;span&gt; 3&lt;/span&gt;        &amp;lt;artifactId&amp;gt;spring-boot-starter-parent&amp;lt;/artifactId&amp;gt;
&lt;span&gt; 4&lt;/span&gt;        &amp;lt;version&amp;gt;1.5.8.RELEASE&amp;lt;/version&amp;gt;
&lt;span&gt; 5&lt;/span&gt;    &amp;lt;/parent&amp;gt;
&lt;span&gt; 6&lt;/span&gt;    
&lt;span&gt; 7&lt;/span&gt;    &amp;lt;dependencies&amp;gt;
&lt;span&gt; 8&lt;/span&gt;     &amp;lt;dependency&amp;gt;
&lt;span&gt; 9&lt;/span&gt;         &amp;lt;groupId&amp;gt;org.springframework.cloud&amp;lt;/groupId&amp;gt;
&lt;span&gt;10&lt;/span&gt;         &amp;lt;artifactId&amp;gt;spring-cloud-starter&amp;lt;/artifactId&amp;gt;
&lt;span&gt;11&lt;/span&gt;     &amp;lt;/dependency&amp;gt;
&lt;span&gt;12&lt;/span&gt;     &amp;lt;dependency&amp;gt;
&lt;span&gt;13&lt;/span&gt;         &amp;lt;groupId&amp;gt;com.sun.jersey&amp;lt;/groupId&amp;gt;
&lt;span&gt;14&lt;/span&gt;            &amp;lt;artifactId&amp;gt;jersey-bundle&amp;lt;/artifactId&amp;gt;
&lt;span&gt;15&lt;/span&gt;              &amp;lt;version&amp;gt;1.19&amp;lt;/version&amp;gt;
&lt;span&gt;16&lt;/span&gt;          &amp;lt;/dependency&amp;gt;
&lt;span&gt;17&lt;/span&gt; 
&lt;span&gt;18&lt;/span&gt;         &amp;lt;dependency&amp;gt;
&lt;span&gt;19&lt;/span&gt;             &amp;lt;groupId&amp;gt;com.netflix.servo&amp;lt;/groupId&amp;gt;
&lt;span&gt;20&lt;/span&gt;             &amp;lt;artifactId&amp;gt;servo-core&amp;lt;/artifactId&amp;gt;
&lt;span&gt;21&lt;/span&gt;             &amp;lt;version&amp;gt;0.12.7&amp;lt;/version&amp;gt;
&lt;span&gt;22&lt;/span&gt;         &amp;lt;/dependency&amp;gt;
&lt;span&gt;23&lt;/span&gt;        &amp;lt;dependency&amp;gt;
&lt;span&gt;24&lt;/span&gt;         &amp;lt;groupId&amp;gt;org.springframework.cloud&amp;lt;/groupId&amp;gt;
&lt;span&gt;25&lt;/span&gt;         &amp;lt;artifactId&amp;gt;spring-cloud-starter-eureka-server&amp;lt;/artifactId&amp;gt;
&lt;span&gt;26&lt;/span&gt; ã€€       &amp;lt;/dependency&amp;gt;
&lt;span&gt;27&lt;/span&gt;    &amp;lt;/dependencies&amp;gt;
&lt;span&gt;28&lt;/span&gt;    &amp;lt;dependencyManagement&amp;gt;
&lt;span&gt;29&lt;/span&gt;     &amp;lt;dependencies&amp;gt;
&lt;span&gt;30&lt;/span&gt;       &amp;lt;dependency&amp;gt;
&lt;span&gt;31&lt;/span&gt;         &amp;lt;groupId&amp;gt;org.springframework.cloud&amp;lt;/groupId&amp;gt;
&lt;span&gt;32&lt;/span&gt;         &amp;lt;artifactId&amp;gt;spring-cloud-dependencies&amp;lt;/artifactId&amp;gt;
&lt;span&gt;33&lt;/span&gt;         &amp;lt;version&amp;gt;Dalston.RC1&amp;lt;/version&amp;gt;
&lt;span&gt;34&lt;/span&gt;         &amp;lt;type&amp;gt;pom&amp;lt;/type&amp;gt;
&lt;span&gt;35&lt;/span&gt;         &amp;lt;scope&amp;gt;&lt;span&gt;import&lt;/span&gt;&amp;lt;/scope&amp;gt;
&lt;span&gt;36&lt;/span&gt;       &amp;lt;/dependency&amp;gt;
&lt;span&gt;37&lt;/span&gt;     &amp;lt;/dependencies&amp;gt;
&lt;span&gt;38&lt;/span&gt;   &amp;lt;/dependencyManagement&amp;gt;
&lt;span&gt;39&lt;/span&gt;    &amp;lt;repositories&amp;gt;
&lt;span&gt;40&lt;/span&gt;     &amp;lt;repository&amp;gt;
&lt;span&gt;41&lt;/span&gt;       &amp;lt;id&amp;gt;spring-milestones&amp;lt;/id&amp;gt;
&lt;span&gt;42&lt;/span&gt;       &amp;lt;name&amp;gt;Spring Milestones&amp;lt;/name&amp;gt;
&lt;span&gt;43&lt;/span&gt;       &amp;lt;url&amp;gt;https:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;repo.spring.io/milestone&amp;lt;/url&amp;gt;&lt;/span&gt;
&lt;span&gt;44&lt;/span&gt;       &amp;lt;snapshots&amp;gt;
&lt;span&gt;45&lt;/span&gt;         &amp;lt;enabled&amp;gt;&lt;span&gt;false&lt;/span&gt;&amp;lt;/enabled&amp;gt;
&lt;span&gt;46&lt;/span&gt;       &amp;lt;/snapshots&amp;gt;
&lt;span&gt;47&lt;/span&gt;     &amp;lt;/repository&amp;gt;
&lt;span&gt;48&lt;/span&gt;   &amp;lt;/repositories&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;3ï¼Œç¼–å†™å¯åŠ¨ç±»ä»£ç &lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; &lt;span&gt;@SpringBootApplication
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt; &lt;span&gt;@EnableEurekaServer
&lt;/span&gt;&lt;span&gt;3&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; App {
&lt;/span&gt;&lt;span&gt;4&lt;/span&gt; 
&lt;span&gt;5&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; main(String[] args) {
&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;         SpringApplication.run(App.&lt;span&gt;class&lt;/span&gt;&lt;span&gt;, args);
&lt;/span&gt;&lt;span&gt;7&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;8&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ³¨æ„æ·»åŠ EnableEurekaServeræ³¨è§£&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4ï¼Œæ·»åŠ é…ç½®æ–‡ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¯¹äºè¿™ä¸ªé…ç½®æ–‡ä»¶çš„æ·»åŠ æœ‰2ç§æ ¼å¼ï¼Œä¸€ç§æ˜¯application.properties å¦å¤–ä¸€ç§æ˜¯Â application.yamlã€‚å¯¹äº2ç§æ ¼å¼çš„åŒºåˆ«ï¼Œæˆ‘ä»¬ä¸åšæ¯”è¾ƒã€‚ä½†æ˜¯å¯¹äºè¿™ä¸ªæ–‡ä»¶çš„ä½ç½®ï¼Œæˆ‘è¿˜æ˜¯çº³é—·äº†ä¸€ä¼šï¼Œæœ€åç»è¿‡å°è¯•ï¼Œå¦‚å›¾æ‰€ç¤ºä½ç½®&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1063420/201812/1063420-20181218121822081-1464819913.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â å¹¶ä¸”éœ€è¦æ³¨æ„æ–‡ä»¶åç§°ä¸€ä¸ªå­—æ¯éƒ½ä¸èƒ½å°‘0.0ï¼Œæˆ‘å°±æ˜¯ç”±äºæ²¡æ³¨æ„å°‘å†™ä¸ªå­—æ¯ï¼Œä¹ŸæŠ¥é”™äº†ã€‚ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;p&gt;application.properties æ ¼å¼ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; spring.application.name=spring-cloud-&lt;span&gt;eureka
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt; server.port=8000
&lt;span&gt;3&lt;/span&gt; eureka.client.register-with-eureka=&lt;span&gt;false&lt;/span&gt;
&lt;span&gt;4&lt;/span&gt; eureka.client.fetch-registry=&lt;span&gt;false&lt;/span&gt;
&lt;span&gt;5&lt;/span&gt; eureka.client.serviceUrl.defaultZone=http:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;localhost:${server.port}/eureka/&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ³¨æ„ç¬¬3 è¡Œé»˜è®¤æ˜¯trueä¹Ÿå°±æ˜¯å¦‚æœä½ ä¸åŠ ä¸Šè¿™ä¸ªfalseï¼Œå¯åŠ¨å°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºä»–ä¼šæƒ³æŠŠè‡ªå·±æ³¨å†Œåˆ°è‡ªå·±ä¸Šé¢ï¼ï¼ï¼ç¬¬4è¡Œé»˜è®¤ä¹Ÿæ˜¯trueï¼Œæ„æ€æ˜¯ä»–è¦ä¸è¦è·å–æ³¨å†Œåˆ°æœåŠ¡ä¸­å¿ƒçš„ä¿¡æ¯Â &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;5ï¼Œå¯åŠ¨æ³¨å†Œä¸­å¿ƒ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨æµè§ˆå™¨è¾“å…¥ localhostï¼š8000ï¼ŒæŸ¥çœ‹æ³¨å†Œä¸­å¿ƒæ˜¯å¦æ­£å¸¸å¯åŠ¨ï¼Œå‡ºç°å¦‚ä¸‹æˆªå›¾ï¼Œè¯´æ˜å·²ç»ok&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1063420/201812/1063420-20181218144248924-2047748582.png&quot; alt=&quot;&quot;/&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æœ‰äº†æ³¨å†Œä¸­å¿ƒï¼Œæˆ‘ä»¬åœ¨æ¥ç€æä¸€ä¸ªæœåŠ¡æä¾›è€…ï¼Œå’ŒæœåŠ¡æ¶ˆè´¹è€…ã€‚&lt;/p&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;æœåŠ¡æä¾›è€…&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1ï¼Œæ–°å»ºmavenå·¥ç¨‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2ï¼Œåœ¨pomæ–‡ä»¶ä¸­å¼•å…¥å’Œæ³¨å†Œä¸­å¿ƒæœåŠ¡ä¸€æ ·çš„jaråŒ…ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3ï¼Œç¼–å†™application.properties&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; spring.application.name=spring-cloud-&lt;span&gt;producer
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt; server.port=9000
&lt;span&gt;3&lt;/span&gt; eureka.client.serviceUrl.defaultZone=http:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;localhost:8000/eureka/&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç¬¬ä¸€è¡Œæ˜¯ç»™è‡ªå·±çš„æœåŠ¡å‘½åï¼Œç¬¬äºŒè¡Œè®¾ç½®è‡ªå·±çš„è®¿é—®ç«¯å£ï¼Œç¬¬ä¸‰è¡Œè®¾ç½®è‡ªå·±è¦æ³¨å†Œåˆ°é‚£ä¸ªæ³¨å†Œä¸­å¿ƒï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ä¸Šé¢è®¾ç½®äº†eurekaæ³¨å†Œä¸­å¿ƒæ˜¯æœ¬åœ°çš„8000ç«¯å£ï¼Œæ‰€ä»¥å°±å†™è¿™ä¸ªåœ°å€&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4ï¼Œç¼–å†™å¯åŠ¨ç±»ä»£ç &lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; &lt;span&gt;@SpringBootApplication
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt; &lt;span&gt;@EnableDiscoveryClient
&lt;/span&gt;&lt;span&gt;3&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; App 
&lt;/span&gt;&lt;span&gt;4&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; main( String[] args )
&lt;/span&gt;&lt;span&gt;6&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt;7&lt;/span&gt;         SpringApplication.run(App.&lt;span&gt;class&lt;/span&gt;&lt;span&gt;, args);
&lt;/span&gt;&lt;span&gt;8&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;9&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ³¨æ„æ·»åŠ Â EnableDiscoveryClient æ³¨è§£&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;5ï¼Œç¼–å†™æœåŠ¡æ§åˆ¶å™¨ç±»ä»£ç &lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; &lt;span&gt;@RestController
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; HelloController {
&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;     
&lt;span&gt;4&lt;/span&gt;     @RequestMapping(&quot;/hello&quot;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt;&lt;span&gt; String hello(@RequestParam String name) {
&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &quot;hello &quot;+name+&quot;ï¼Œnice to meet you!&quot;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;7&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;8&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Â åˆ°è¿™é‡Œ æœåŠ¡æä¾›è€…å®Œæˆï¼Œå¯åŠ¨ç¨‹åºï¼Œæ— æŠ¥é”™å³å¯ï¼Œåˆ·æ–°æ³¨å†Œä¸­å¿ƒçš„é¡µé¢ï¼Œä¼šçœ‹åˆ°Applicationä¸­å½“å‰æ³¨å†Œçš„æœåŠ¡ã€‚&lt;/p&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;æœåŠ¡è°ƒç”¨è€…&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1ï¼Œæ–°å»ºmavenå·¥ç¨‹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2ï¼ŒåŒæ ·åœ¨pomæ–‡ä»¶ä¸­å¼•å…¥å’Œä¹‹å‰ä¸€æ ·çš„å†…å®¹ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3ï¼Œç¼–å†™application.properties&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; spring.application.name=spring-cloud-&lt;span&gt;consumer
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt; server.port=9001
&lt;span&gt;3&lt;/span&gt; eureka.client.serviceUrl.defaultZone=http:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;localhost:8000/eureka/&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç¬¬ä¸€è¡Œä¹Ÿæ˜¯ç»™å½“å‰æœåŠ¡èµ·åå­—ï¼Œç¬¬äºŒè¡Œè®¾ç½®ç«¯å£ï¼Œç¬¬ä¸‰è¡Œè®¾ç½®æ³¨å†Œä¸­å¿ƒurlã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4ï¼Œç¼–å†™å¯åŠ¨ç±»ä»£ç &lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;@SpringBootApplication
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;@EnableDiscoveryClient
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;@EnableFeignClients
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; App 
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; main( String[] args )
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;         SpringApplication.run(App.&lt;span&gt;class&lt;/span&gt;&lt;span&gt;, args);
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ³¨æ„è¿™ä¸ªå¯åŠ¨ç±»ï¼Œæ¯”æœåŠ¡æä¾›è€…å¤šäº†ä¸€ä¸ªEnableFeignClientsæ³¨è§£ï¼Œè¿™ä¸ªæ³¨è§£çš„ä½œç”¨å°±æ˜¯å¯ç”¨feignè¿›è¡Œè¿œç¨‹è°ƒç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;5ï¼Œç¼–å†™feignè°ƒç”¨å®ç°&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; @FeignClient(name= &quot;spring-cloud-producer&quot;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;interface&lt;/span&gt;&lt;span&gt; HelloRemote {
&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;     @RequestMapping(value = &quot;/hello&quot;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; String hello(@RequestParam(value = &quot;name&quot;&lt;span&gt;) String name);
&lt;/span&gt;&lt;span&gt;5&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ³¨æ„è¿™æ˜¯ä¸€ä¸ªæ¥å£ï¼Œä¸Šé¢çš„æ³¨è§£å‚æ•°nameï¼Œå°±æ˜¯æŒ‡å®šä½ å½“å‰è¦è°ƒç”¨çš„æœåŠ¡æä¾›è€…åç§°ã€‚å¦å¤–è¿˜è¦æ³¨æ„æ–¹æ³•ä¸­çš„å‚æ•°name å’ŒæœåŠ¡æä¾›è€…ä¸­çš„å‚æ•°ä¿æŒä¸€è‡´&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;6ï¼Œç¼–å†™æœåŠ¡è°ƒç”¨è€…æ§åˆ¶å™¨ç±»&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;@RestController
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; ConsumerController {
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; 
&lt;span&gt; 4&lt;/span&gt; &lt;span&gt;    @Autowired
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt; &lt;span&gt;    HelloRemote HelloRemote;
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt;     
&lt;span&gt; 7&lt;/span&gt;     @RequestMapping(&quot;/hello/{name}&quot;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; String hello(@PathVariable(&quot;name&quot;&lt;span&gt;) String name) {
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; HelloRemote.hello(name);
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt; 
&lt;span&gt;12&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åœ¨å½“å‰ç±»ä¸­å¼•å…¥HelloRemote æ¥å£ï¼Œé€šè¿‡è°ƒç”¨æœ¬åœ°helloæ–¹æ³•ï¼Œç„¶åå†è°ƒç”¨HelloRemote æ¥å£ä¸­çš„æ–¹æ³•&lt;/p&gt;
&lt;p&gt;å¯åŠ¨ç¨‹åºï¼Œæ— æŠ¥é”™å³å¯ã€‚&lt;/p&gt;

&lt;p&gt;åˆ·æ–°æ³¨å†Œä¸­å¿ƒè¿™ä¸ªæ—¶å€™åº”è¯¥å¯ä»¥çœ‹åˆ°2ä¸ªæœåŠ¡å·²ç»æ³¨å†Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1063420/201812/1063420-20181218144846549-618369374.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æµ‹è¯•éªŒè¯&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Â æ‰“å¼€æµè§ˆå™¨è¾“å…¥ : Â http://localhost:9001/hello/JJ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1063420/201812/1063420-20181218145035352-1943042512.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¦‚ä¸Šå›¾æ­£å¸¸è¿”å›ç»“æœï¼Œè¯´æ˜æ•´ä¸ªæœåŠ¡è°ƒç”¨å’Œæä¾›è€…okï¼ï¼ï¼&lt;/p&gt;

</description>
<pubDate>Tue, 18 Dec 2018 07:26:00 +0000</pubDate>
<dc:creator>é˜Ÿé•¿ç»™æˆ‘çƒã€‚</dc:creator>
<og:description>çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œå•Š~æœç„¶çœ‹ç€å¾ˆeasyï¼Œè‡ªå·±æèµ·æ¥å°±æ˜¯å„ç§å‘~å„ä½çœ‹å®˜ï¼Œå®¹æˆ‘æ…¢æ…¢é“æ¥~ å…³äºspringcloudæ˜¯ä»€ä¹ˆæˆ‘å°±ä¸åºŸè¯äº†~ Eureka Eurekaï¼ˆåŸæ¥ä»¥ä¸ºæ˜¯ç¼©å†™ï¼ŒåŸæ¥å°±</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/JJJ1990/p/10137384.html</dc:identifier>
</item>
<item>
<title>ä»Clientåº”ç”¨åœºæ™¯ä»‹ç»IdentityServer4ï¼ˆäºŒï¼‰ - çƒŸèŠ±æ˜“å†·äººæ†”æ‚´</title>
<link>http://www.cnblogs.com/FireworksEasyCool/p/10137011.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/FireworksEasyCool/p/10137011.html</guid>
<description>&lt;p&gt;&lt;span&gt;æœ¬èŠ‚ä»‹ç»Clientçš„&lt;span&gt;ClientCredentials&lt;/span&gt;å®¢æˆ·ç«¯æˆæƒæ¨¡å¼ï¼Œå…ˆçœ‹ä¸‹ç”»çš„è‰å›¾ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1508611/201812/1508611-20181218151938102-888316947.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;&lt;span&gt;ä¸€ã€åœ¨Serverä¸Šæ·»åŠ åŠ¨æ€æ–°å¢Clientçš„API æ¥å£ã€‚&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;ä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œåœ¨ServeræœåŠ¡ç«¯ä¸­å…ˆæ·»åŠ swaggerï¼Œæ·»åŠ æµç¨‹å¯å‚è€ƒï¼š&lt;a href=&quot;https://www.cnblogs.com/suxinlcq/p/6757556.html&quot;&gt;https://www.cnblogs.com/suxinlcq/p/6757556.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;åœ¨ValuesControlleræ§åˆ¶å™¨ä¸­æ³¨å…¥ConfigurationDbContextä¸Šä¸‹æ–‡ï¼Œæ­¤ä¸Šä¸‹æ–‡å¯ç”¨æ¥åŠ è½½æˆ–é…ç½®IdentityServer4.EntityFrameworkçš„Clientã€èº«ä»½ä¿¡æ¯ã€APIèµ„æºä¿¡æ¯æˆ–CORSæ•°æ®ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ValuesControllerä¸­å®æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;        private&lt;/span&gt;&lt;span&gt; ConfigurationDbContext _context;
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; ValuesController(ConfigurationDbContext context)
        {
            _context &lt;/span&gt;=&lt;span&gt; context;
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ·»åŠ åŠ¨æ€æ–°å¢Clientçš„APIæ¥å£ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;        [HttpPost]
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; IActionResult Post([FromBody] IdentityServer4.EntityFramework.Entities.Client client)
        {
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; res =&lt;span&gt; _context.Clients.Add(client);
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;(_context.SaveChanges() &amp;gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;)
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; Ok(&lt;span&gt;true&lt;/span&gt;&lt;span&gt;);
            &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;
                &lt;span&gt;return&lt;/span&gt; Ok(&lt;span&gt;false&lt;/span&gt;&lt;span&gt;);
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ§åˆ¶å™¨ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1508611/201812/1508611-20181218140841685-797647901.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;hr/&gt;
&lt;h3&gt;&lt;span&gt;äºŒã€å¯¹Serverä¸Šçš„APIè¿›è¡Œä¿æŠ¤&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;ï¼ˆ1ï¼‰&lt;strong&gt;å®‰è£…IdentityServer4.AccessTokenValidationåŒ…&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ï¼ˆ2ï¼‰åœ¨startup.csä¸­ConfigureServicesæ–¹æ³•æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;            //&lt;/span&gt;&lt;span&gt;protect API&lt;/span&gt;
&lt;span&gt;            services.AddMvcCore()
            .AddAuthorization()
            .AddJsonFormatters();

            services.AddAuthentication(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Bearer&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
                .AddIdentityServerAuthentication(options &lt;/span&gt;=&amp;gt;&lt;span&gt;
                {
                    options.Authority &lt;/span&gt;= &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;http://localhost:5000&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
                    options.RequireHttpsMetadata &lt;/span&gt;= &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;

                    options.ApiName &lt;/span&gt;= &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;api1&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
                });&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;AddAuthentication&lt;/span&gt;æŠŠBeareré…ç½®æˆé»˜è®¤æ¨¡å¼ï¼Œå°†èº«ä»½è®¤è¯æœåŠ¡æ·»åŠ åˆ°DIä¸­ã€‚&lt;/p&gt;
&lt;p&gt;&lt;span&gt;AddIdentityServerAuthentication&lt;/span&gt;æŠŠIdentityServerçš„access tokenæ·»åŠ åˆ°DIä¸­ï¼Œä¾›èº«ä»½è®¤è¯æœåŠ¡ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ï¼ˆ3ï¼‰åœ¨startup.csä¸­Configureæ–¹æ³•æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
      &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; Configure(IApplicationBuilder app, IHostingEnvironment env)
        {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;if (env.IsDevelopment())
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;{
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;    app.UseDeveloperExceptionPage();
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;}

            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;AddSwagger&lt;/span&gt;
&lt;span&gt;            app.UseSwagger();
            app.UseSwaggerUI(c &lt;/span&gt;=&amp;gt;&lt;span&gt;
            {
                c.SwaggerEndpoint(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/swagger/v1/swagger.json&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Serveræ¥å£æ–‡æ¡£&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
            });

            InitializeDatabase(app);
            app.UseAuthentication();
            app.UseIdentityServer();
            app.UseMvc();
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;UseAuthentication&lt;/span&gt;å°†èº«ä»½éªŒè¯ä¸­é—´ä»¶æ·»åŠ åˆ°ç®¡é“ä¸­ï¼Œä»¥ä¾¿åœ¨æ¯æ¬¡è°ƒç”¨ä¸»æœºæ—¶è‡ªåŠ¨æ‰§è¡Œèº«ä»½éªŒè¯ã€‚&lt;/p&gt;
&lt;p&gt;ï¼ˆ4ï¼‰åœ¨ValuesControlleræ§åˆ¶å™¨ä¸­æ·»åŠ &lt;span&gt;[Authorize]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1508611/201812/1508611-20181218141446312-831513910.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;ï¼ˆ5ï¼‰åœ¨é¡¹ç›®å±æ€§-&amp;gt;è°ƒè¯• ä¸­ï¼Œå¯åŠ¨æµè§ˆå™¨ï¼Œå¹¶è®¾æˆswaggerï¼Œå¦‚å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1508611/201812/1508611-20181218141526997-1688345644.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ï¼ˆ6ï¼‰å¯åŠ¨é¡¹ç›®ï¼Œå¹¶è°ƒç”¨ç¬¬ä¸€ä¸ªGetæ¥å£ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1508611/201812/1508611-20181218141604422-987008210.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ˜¾ç¤ºUnauthorizedï¼ˆæœªæˆæƒï¼‰ï¼Œè¯æ˜&lt;span&gt;[Authorize]&lt;/span&gt;èµ·ä½œç”¨äº†ã€‚&lt;/p&gt;
&lt;hr/&gt;
&lt;h3&gt;&lt;span&gt;ä¸‰ã€æ­å»ºClientå®¢æˆ·ç«¯&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;ï¼ˆ1ï¼‰æ–°å»ºä¸€ä¸ªæ§åˆ¶å°ç¨‹åºï¼Œ&lt;strong&gt;å®‰è£…IdentityModelåŒ…&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ï¼ˆ2ï¼‰æ·»åŠ ç±»IDSHelper.csï¼Œæ·»åŠ å®¢æˆ·ç«¯è¯·æ±‚APIæ¥å£ä»£ç ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; IDSHelper
    {
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;async&lt;/span&gt;&lt;span&gt; Task MainAsync()
        {
            &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt;
            {
                DiscoveryResponse disco &lt;/span&gt;= &lt;span&gt;await&lt;/span&gt; DiscoveryClient.GetAsync(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;http://localhost:5000&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (disco.IsError)
                {
                    Console.WriteLine(disco.Error);
                    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt;;
                }

                TokenClient tokenClient &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; TokenClient(disco.TokenEndpoint, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Client&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;secret&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; tokenResponse = &lt;span&gt;await&lt;/span&gt; tokenClient.RequestClientCredentialsAsync(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;api1&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);

                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (tokenResponse.IsError)
                {
                    Console.WriteLine(tokenResponse.Error);
                    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt;;
                }
                Console.WriteLine(tokenResponse.Json);
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; client = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; HttpClient();
                client.SetBearerToken(tokenResponse.AccessToken);
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; response = &lt;span&gt;await&lt;/span&gt; client.GetAsync(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;http://localhost:5000/api/values/&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;response.IsSuccessStatusCode)
                {
                    Console.WriteLine(response.StatusCode);
                }
                &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;
                {
                    &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; content = &lt;span&gt;await&lt;/span&gt;&lt;span&gt; response.Content.ReadAsStringAsync();
                    Console.WriteLine(content);
                }
            }
            &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Exception ex)
            {

            }
        }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ï¼ˆ3ï¼‰ä¿®æ”¹Program.csä»£ç ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; Program
    {
        &lt;/span&gt;&lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; Main(&lt;span&gt;string&lt;/span&gt;&lt;span&gt;[] args)
       &lt;/span&gt;=&amp;gt;&lt;span&gt; IDSHelper.MainAsync().GetAwaiter().GetResult();
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ï¼ˆ4ï¼‰æŒ‰Ctrl+F5ï¼Œå¯ä»¥è·å–åˆ°access tokenå’Œæ¥å£è¿”å›å€¼&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1508611/201812/1508611-20181218141920471-395229309.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¤åˆ¶tokenï¼Œç”¨postmanè°ƒç”¨ï¼ŒæˆåŠŸè·å–åˆ°äº†æ¥å£è¿”å›å€¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1508611/201812/1508611-20181218141957877-1260672693.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;hr/&gt;
&lt;h3&gt;&lt;span&gt;å››ã€æµ‹è¯•åŠ¨æ€æ–°å¢Clientæ¥å£&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;å®‰è£…IdentityServer4&lt;/strong&gt;&lt;strong&gt;åŒ…ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®‰è£…IdentityServer4.EntityFramework&lt;/strong&gt;&lt;strong&gt;åŒ…ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨IDSHelper.csç±»ä¸­æ·»åŠ Postæ–¹æ³•ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;41&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;async&lt;/span&gt;&lt;span&gt; Task Post()
        {
            &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt;
            {
                DiscoveryResponse disco &lt;/span&gt;= &lt;span&gt;await&lt;/span&gt; DiscoveryClient.GetAsync(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;http://localhost:5000&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (disco.IsError)
                {
                    Console.WriteLine(disco.Error);
                    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt;;
                }

                TokenClient tokenClient &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; TokenClient(disco.TokenEndpoint, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Client&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;secret&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; tokenResponse = &lt;span&gt;await&lt;/span&gt; tokenClient.RequestClientCredentialsAsync(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;api1&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);

                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (tokenResponse.IsError)
                {
                    Console.WriteLine(tokenResponse.Error);
                    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt;;
                }
                Console.WriteLine(tokenResponse.Json);
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; client = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; HttpClient();
                client.SetBearerToken(tokenResponse.AccessToken);

                Client c1 &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Client
                {
                    ClientId &lt;/span&gt;= &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Test&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
                    AllowedGrantTypes &lt;/span&gt;=&lt;span&gt; GrantTypes.ClientCredentials,
                    ClientSecrets &lt;/span&gt;=&lt;span&gt;
                    {
                        &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; Secret(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;secret&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;.Sha256())
                    },
                    AllowedScopes &lt;/span&gt;= { &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;api1&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; }
                };
                &lt;/span&gt;&lt;span&gt;string&lt;/span&gt; strJson =&lt;span&gt; JsonConvert.SerializeObject(c1 .ToEntity());
                HttpContent content &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; StringContent(strJson);
                content.Headers.ContentType &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; System.Net.Http.Headers.MediaTypeHeaderValue(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;application/json&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;ç”±HttpClientå‘å‡ºPostè¯·æ±‚&lt;/span&gt;
                Task&amp;lt;HttpResponseMessage&amp;gt; response = client.PostAsync(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;http://localhost:5000/api/values/&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, content);

                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (response.Result.StatusCode !=&lt;span&gt; System.Net.HttpStatusCode.OK)
                {
                    Console.WriteLine(response.Result.StatusCode);
                }
                &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;
                {
                    Console.WriteLine(response.Result.Content.ReadAsStringAsync().Result);
                }
            }
            &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Exception ex)
            {

            }
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;é¡ºä¾¿æŠŠmainä¸­æ”¹æˆå¯¹Postè°ƒç”¨ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; Main(&lt;span&gt;string&lt;/span&gt;&lt;span&gt;[] args)

       &lt;/span&gt;=&amp;gt; IDSHelper.Post().GetAwaiter().GetResult();
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æŒ‰Ctrl+F5ï¼Œè°ƒç”¨æ–°å¢Clientçš„æ¥å£ï¼Œå¹¶æˆåŠŸè¿”å›trueã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1508611/201812/1508611-20181218142129630-242009466.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;åŒæ—¶å¯ä»¥åœ¨æ•°æ®åº“ä¸­çš„Clientè¡¨æ‰¾åˆ°ç›¸å…³è®°å½•ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸èƒ½æ·»åŠ ç›¸åŒ&lt;span&gt;Client ID&lt;/span&gt;çš„Clientã€‚&lt;/p&gt;
&lt;hr/&gt;
&lt;h3&gt;&lt;span&gt;äº”ã€åœ¨Clientä¸­æ·»åŠ Claimä¿¡æ¯ï¼Œå¹¶åœ¨APIæ¥å£ä¸­å¯¹Claimä¿¡æ¯è¿›è¡ŒéªŒè¯ã€‚&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;å…³äºClaimçš„ä»‹ç»å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ï¼š&lt;a href=&quot;http://www.cnblogs.com/stulzq/p/8726002.html&quot;&gt;http://www.cnblogs.com/stulzq/p/8726002.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡ŒæŠŠClaimç®€å•å½“åšç”¨æˆ·çš„èº«ä»½ä¿¡æ¯ä½¿ç”¨ï¼Œä¿®æ”¹Postæ–¹æ³•é‡Œé¢çš„Clientï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
                Client c1 = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Client
                {
                    ClientId &lt;/span&gt;= &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;superAdmin&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
                    AllowedGrantTypes &lt;/span&gt;=&lt;span&gt; GrantTypes.ClientCredentials,
                    ClientSecrets &lt;/span&gt;=&lt;span&gt;
                    {
                        &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; Secret(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;secret&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;.Sha256())
                    },
                    AllowedScopes &lt;/span&gt;= { &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;api1&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; },
                    Claims &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; List&amp;lt;Claim&amp;gt;&lt;span&gt;
                    {
                        &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; Claim(JwtClaimTypes.Role, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;admin&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
                    }
                };&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¯ä»¥çœ‹å‡ºï¼ŒClaimsä¸ºListï¼Œå¯ä»¥æ˜¯å¾ˆå¤šä¸ªè§’è‰²ï¼Œè¿™é‡Œåªæ·»åŠ ä¸€ä¸ªã€‚&lt;/p&gt;
&lt;p&gt;Ctrl+F5ï¼Œè¿è¡ŒæˆåŠŸæ·»åŠ superAdmin Clientã€‚&lt;/p&gt;

&lt;p&gt;ç°åœ¨ï¼Œéœ€è¦å¯¹ServeræœåŠ¡ç«¯çš„æ–°å¢Clientæ¥å£è¿›è¡ŒClaimèº«ä»½éªŒè¯ï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š&lt;/p&gt;
&lt;p&gt;Â  Â &lt;span&gt;[Authorize(Roles =&quot;admin&quot;)]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1508611/201812/1508611-20181218142452641-892861467.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åå†å®¢æˆ·ç«¯ä¿®æ”¹æˆæƒçš„è´¦å·ä¸ºsuperadminã€‚&lt;/p&gt;
&lt;p&gt;&lt;span&gt;TokenClient tokenClient = new TokenClient(disco.TokenEndpoint, &quot;superAdmin&quot;, &quot;secret&quot;);&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Ctrl+F5è¿è¡Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1508611/201812/1508611-20181218142541923-1706882202.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;é—®é¢˜å‡ºç°äº†ï¼Œè¿”å›äº†Forbiddenï¼Œæ²¡æœ‰æƒé™è¿›è¡Œè®¿é—®ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ—¶å€™æˆ‘ä»¬ä¸Šå®˜ç½‘æŸ¥é˜…äº†èµ„æ–™ï¼Œå‘ç°åœ¨æ·»åŠ Clientçš„Claimæ—¶å€™ï¼ŒIdentityServer EntityFrameworkä¼šä¸ºClaimçš„roleæ·»åŠ ä¸€ä¸ªé»˜è®¤å‰ç¼€ï¼Œä¸º&lt;span&gt;client_ã€‚&lt;/span&gt;æ‰€ä»¥ï¼Œå®é™…ä¸Šå®ƒä¸º&lt;span&gt;client_role&lt;/span&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è€ŒæœåŠ¡ç«¯åªèƒ½å¯¹&lt;span&gt;role&lt;/span&gt;è¿›è¡ŒéªŒè¯ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶æˆ‘ä»¬éœ€è¦æŠŠClaimçš„é»˜è®¤å‰ç¼€å»æ‰ï¼Œè®¾ç½®ä¸ºç©º&lt;span&gt;ClientClaimsPrefix = &quot;&quot;&lt;/span&gt; ã€‚&lt;/p&gt;

&lt;p&gt;å»æ‰Serverçš„RoleéªŒè¯ï¼Œæ·»åŠ å½¢å¦‚ä¸‹é¢ä»£ç çš„Clientã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;41&quot;&gt;
&lt;pre&gt;
Client c1 = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Client
                {
                    ClientId &lt;/span&gt;= &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;adminClient&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
                    AllowedGrantTypes &lt;/span&gt;=&lt;span&gt; GrantTypes.ClientCredentials,
                    ClientSecrets &lt;/span&gt;=&lt;span&gt;
                    {
                        &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; Secret(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;secret&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;.Sha256())
                    },
                    AllowedScopes &lt;/span&gt;= { &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;api1&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; },
                    Claims &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; List&amp;lt;Claim&amp;gt;&lt;span&gt;
                    {
                        &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; Claim(JwtClaimTypes.Role, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;admin&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
                    },
                    ClientClaimsPrefix &lt;/span&gt;= &lt;span&gt;&quot;&quot;&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;æŠŠclient_ å‰ç¼€å»æ‰&lt;/span&gt;
                };
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Â Ctrl+F5ï¼Œè¿è¡ŒæˆåŠŸæ·»åŠ adminClient Clientï¼Œè¿™æ¬¡çš„æ˜¯Roleä¸ºadminã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åé‡æ–°å†ServeræœåŠ¡ç«¯åŠ ä¸Š&lt;span&gt;[Authorize(Roles =&quot;admin&quot;)]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;åŒæ—¶ä¿®æ”¹éªŒè¯è´¦å·ä¸ºadminClientã€‚&lt;/p&gt;
&lt;p&gt;&lt;span&gt;TokenClient tokenClient = new TokenClient(disco.TokenEndpoint, &quot;adminClient&quot;, &quot;secret&quot;);&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;æœ€åè¿è¡Œç¨‹åºï¼ŒæˆåŠŸåœ°åœ¨&lt;span&gt;[Authorize(Roles =&quot;admin&quot;)]&lt;/span&gt;æƒé™ä¸‹è®¿é—®å¹¶æ–°å¢äº†Clientã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1508611/201812/1508611-20181218142822107-434277514.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;hr/&gt;
&lt;h3&gt;&lt;span&gt;å…­ã€éœ€è¦æ³¨æ„çš„é—®é¢˜&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;ï¼ˆ1ï¼‰æ–°å¢Clientåˆ°æ•°æ®åº“æ—¶å€™ï¼Œè¿™é‡Œéœ€è¦æ¥æ”¶&lt;span&gt;IdentityServer4.EntityFramework.Entities.Client&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;è€Œä¸æ˜¯&lt;span&gt;IdentityServer4.Models.Client&lt;/span&gt;ï¼Œå¦åˆ™APIæ¥å£åœ¨æ¥æ”¶å’Œè½¬åŒ–Clientæ¨¡å‹çš„æ—¶å€™ä¼šæŠ¥é”™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1508611/201812/1508611-20181218143007416-1679763811.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ï¼ˆ2ï¼‰æ­¤å¤–ï¼Œæœ¬èŠ‚ä»‹ç»çš„&lt;span&gt;Clientçš„AllowedGrantTypes&lt;/span&gt; éƒ½ä¸º &lt;span&gt;GrantTypes.ClientCredentials&lt;/span&gt;ï¼Œç›¸åº”çš„ï¼Œå®¢æˆ·ç«¯è¯·æ±‚æ˜¯ï¼Œéœ€è¦ç”¨&lt;span&gt;RequestClientCredentialsAsync&lt;/span&gt;æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1508611/201812/1508611-20181218143102208-1981668333.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æœ€åå†æ¬¡æä¸‹ï¼ŒClientCredentialsæ¨¡å¼çš„é€‚ç”¨åœºæ™¯ï¼š&lt;span&gt;ç”¨äºå’Œç”¨æˆ·æ— å…³ï¼ŒæœåŠ¡ä¸æœåŠ¡ä¹‹é—´ç›´æ¥äº¤äº’è®¿é—®èµ„æº&lt;/span&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ServeræœåŠ¡ç«¯æºç åœ°å€ï¼šhttps://github.com/Bingjian-Zhu/Server&lt;/p&gt;
&lt;p&gt;Clientå®¢æˆ·ç«¯æºç åœ°å€ï¼šhttps://github.com/Bingjian-Zhu/Client&lt;/p&gt;
&lt;p&gt;æ–‡ä¸­å¦‚æœ‰é”™æ¼ï¼Œæ¬¢è¿æŒ‡æ­£ã€‚&lt;/p&gt;
</description>
<pubDate>Tue, 18 Dec 2018 06:51:00 +0000</pubDate>
<dc:creator>çƒŸèŠ±æ˜“å†·äººæ†”æ‚´</dc:creator>
<og:description>æœ¬èŠ‚ä»‹ç»Clientçš„ClientCredentialså®¢æˆ·ç«¯æˆæƒæ¨¡å¼ï¼Œå…ˆçœ‹ä¸‹ç”»çš„è‰å›¾ï¼š ä¸€ã€åœ¨Serverä¸Šæ·»åŠ åŠ¨æ€æ–°å¢Clientçš„API æ¥å£ã€‚ ä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œåœ¨ServeræœåŠ¡ç«¯ä¸­å…ˆæ·»åŠ swa</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/FireworksEasyCool/p/10137011.html</dc:identifier>
</item>
<item>
<title>æ¢ç©¶ CSS æ··åˆæ¨¡å¼\æ»¤é•œå¯¼è‡´ CSS 3D å¤±æ•ˆé—®é¢˜ - ChokCoco</title>
<link>http://www.cnblogs.com/coco1s/p/10137045.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/coco1s/p/10137045.html</guid>
<description>&lt;p&gt;&lt;span&gt;ä»Šå¤©åœ¨å†™ä¸€ä¸ªå°çš„ CSS Demoï¼Œä¸€ä¸ªå…³äº 3d çƒçš„æ—‹è½¬åŠ¨ç”»ï¼Œå…³äº CSS 3Dï¼Œå°‘ä¸äº†ä¼šä½¿ç”¨ä¸‹é¢è¿™å‡ ä¸ªå±æ€§ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:css;gutter:true;&quot;&gt;
{
    transform-style: preserve-3d;
    perspective: 1000;
    transform: translate3d();
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;è¿™ä¸ª Demo ä½ å¯ä»¥æˆ³è¿™é‡Œï¼Œå¤§æ¦‚æ˜¯è¿™æ ·ï¼š&lt;a href=&quot;https://codepen.io/Chokcoco/pen/JwdvmJ&quot; rel=&quot;nofollow&quot;&gt;CodePen Demo - 3D ball&lt;/a&gt;:&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;a href=&quot;https://user-images.githubusercontent.com/8554143/50084389-cf889a80-0231-11e9-9f76-483375136a2c.gif&quot; rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/8554143/50084389-cf889a80-0231-11e9-9f76-483375136a2c.gif&quot; alt=&quot;3dball&quot;/&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å—¯ï¼Œå¤§æ¦‚åˆ°äº†è¿™ä¸ªæ•ˆæœï¼Œæƒ³åˆ°äº†Â CSS æ··åˆæ¨¡å¼Â &lt;code&gt;mix-blend-mode&lt;/code&gt;ï¼Œå¯»æ€ç€ï¼Œåˆ©ç”¨æ··åˆæ¨¡å¼ï¼Œæ˜¯å¦èƒ½è®©æ•ˆæœæ›´ä¸Šä¸€å±‚æ¥¼æˆ–è€…ç¢°æ’å‡ºä¸€äº›å…¶ä»–ç«èŠ±ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;&lt;span&gt;&lt;code&gt;mix-blend-mode&lt;/code&gt;ï¼šæˆ‘ä»¬é€šå¸¸ç§°ä¹‹ä¸ºæ··åˆæ¨¡å¼ï¼Œåˆ©ç”¨æ··åˆæ¨¡å¼å°†å¤šä¸ªå›¾å±‚æ··åˆå¯ä»¥å¾—åˆ°ä¸€ä¸ªæ–°çš„æ•ˆæœï¼Œ&lt;code&gt;mix-blend-mode&lt;/code&gt;Â æè¿°äº†å…ƒç´ çš„å†…å®¹åº”è¯¥ä¸å…ƒç´ çš„ç›´ç³»çˆ¶å…ƒç´ çš„å†…å®¹å’Œå…ƒç´ çš„èƒŒæ™¯å¦‚ä½•æ··åˆã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote readability=&quot;2.0506329113924&quot;&gt;
&lt;p&gt;&lt;span&gt;å…³äºæ··åˆæ¨¡å¼çš„ä¸€äº›ä½¿ç”¨å¯ä»¥çœ‹è¿™é‡Œï¼š&lt;a href=&quot;https://github.com/chokcoco/iCSS/issues/31&quot; data-hovercard-type=&quot;issue&quot; data-hovercard-url=&quot;/chokcoco/iCSS/issues/31/hovercard&quot;&gt;ä¸å¯æ€è®®çš„æ··åˆæ¨¡å¼ background-blend-mode (äºŒ)&lt;/a&gt;ã€&lt;a href=&quot;https://github.com/chokcoco/iCSS/issues/16&quot; data-hovercard-type=&quot;issue&quot; data-hovercard-url=&quot;/chokcoco/iCSS/issues/16/hovercard&quot;&gt;ä¸å¯æ€è®®çš„æ··åˆæ¨¡å¼ background-blend-mode&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/h2&gt;

&lt;p&gt;&lt;span&gt;ç„¶è€Œï¼Œç»™å…ƒç´ åŠ ä¸Šäº†ä¸€ä¸ªæ··åˆæ¨¡å¼ä¹‹åï¼Œç¥å¥‡çš„äº‹æƒ…å‘ç”Ÿäº†ï¼Œ3D æ•ˆæœæ¶ˆå¤±äº†ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ä¹Ÿå°±æ˜¯åœ¨æ¯ä¸ªå…‰ç‚¹çš„ CSS å…ƒç´ ä»£ç ä¸­æ·»åŠ è¿™æ ·ä¸€å¥ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:css;gutter:true;&quot;&gt;
{
    mix-blend-mode: lighten;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;a href=&quot;https://user-images.githubusercontent.com/8554143/50085117-19728000-0234-11e9-9184-218fb907fb88.gif&quot; rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/8554143/50085117-19728000-0234-11e9-9184-218fb907fb88.gif&quot; alt=&quot;3dball2&quot;/&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æ•ˆæœä» CSS 3D å˜æˆäº† 2Dã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;a href=&quot;https://user-images.githubusercontent.com/8554143/50085220-5f2f4880-0234-11e9-9885-85de933da654.png&quot; rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/8554143/50085220-5f2f4880-0234-11e9-9885-85de933da654.png&quot; alt=&quot;qq 20181217194534&quot;/&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;è¿™å°±å¾ˆè¹Šè··äº†ï¼Œé¢„æƒ³ä¸­çš„æ··åˆå¹¶æ²¡æœ‰å‘ç”Ÿï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ 3D çš„å¤±æ•ˆã€‚æˆ‘æƒ³ï¼Œä¹Ÿè®¸ä¸å†…æ ¸æœ‰å…³ï¼Œä¸Šé¢çš„æ•ˆæœæ˜¯åœ¨ chrome 65.0.3325.181 è¯•éªŒå¾—åˆ°çš„ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;&lt;span&gt;æ˜¯å¦ä¸æµè§ˆå™¨å†…æ ¸æœ‰å…³ï¼Ÿ&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;å¸¦ç€è¿™æ ·çš„ç–‘é—®ï¼Œæˆ‘åˆæµ‹è¯•äº†ä¸‹å…¶ä»–å‡ ä¸ªå†…æ ¸ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;firefox 64.0 -- è¿™æ¬¡æ›´åŠ è¯¡å¼‚ï¼Œæ•´ä¸ªå›¾æ¡ˆéƒ½ä¸ä¼šå†è¢«æ¸²æŸ“å‡ºæ¥&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;Safari 12.0.2 -- æ¸²æŸ“æ­£å¸¸&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;Safari æ˜¯å¯ä»¥æ­£å¸¸å±•ç¤ºçš„ï¼Œåªèƒ½åˆç•¥çš„è®¤ä¸ºï¼Œåº”è¯¥æ˜¯ä¸å†…æ ¸æœ‰å…³ç³»çš„ã€‚é‚£åº”è¯¥ä¹Ÿæœ‰å¾ˆå¤šäººé‡åˆ°è¿‡åŒæ ·çš„é—®é¢˜ï¼Œå¸¦ç€è¿™ä¸ªç–‘æƒ‘ï¼Œgoogle ä¸€ä¸‹ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;çˆ†æ ˆç½‘ä¹Ÿæœ‰åŒå­¦æå‡ºç±»ä¼¼çš„ç–‘æƒ‘ï¼š&lt;a href=&quot;https://stackoverflow.com/questions/32932966/mix-blend-mode-is-broken-by-3d-transformations-on-page&quot; rel=&quot;nofollow&quot;&gt;StackOverflow -- mix-blend-mode is broken by 3D transformations on page&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;a href=&quot;https://user-images.githubusercontent.com/8554143/50085960-9bfc3f00-0236-11e9-9057-f629bc1ed4ea.png&quot; rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/8554143/50085960-9bfc3f00-0236-11e9-9057-f629bc1ed4ea.png&quot; alt=&quot;image&quot;/&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;éšåï¼Œåœ¨ chromium bug æäº¤ç½‘ç«™ä¸Šï¼Œæ‰¾åˆ°äº†Â 15Â å¹´çš„ä¸€ä¸ª bug å•ï¼Œä¹Ÿæ˜¯å¯¹è¿™ä¸ªé—®é¢˜çš„ç–‘é—®ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;a href=&quot;https://bugs.chromium.org/p/chromium/issues/detail?id=543445&quot; rel=&quot;nofollow&quot;&gt;BUG -CSS mix-blend-mode turns off CSS perspective.&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æœ€ç»ˆåœ¨ bug å•çš„æœ€ä¸‹é¢æ‰¾åˆ°äº†å¯èƒ½é è°±çš„å›ç­”ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;9&quot;&gt;
&lt;p&gt;&lt;span&gt;When we have mix-blend-mode, the closest ancestor that creates stacking context will isolate blending. We create a render surface at the root of this isolated group and because render surfaces don't support preserve-3d(because they render into separate FBO), we see a flattened result.&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;&lt;span&gt;ajuma@ suggested that this bug maybe much easier to fix after Slimming paint v2 if we can somehow disentangle transforms from layers.&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span&gt;ç¿»è¯‘ä¸€ä¸‹ï¼Œæ„æ€å¤§æ¦‚æ˜¯ï¼šå½“æˆ‘ä»¬ä½¿ç”¨ CSS æ··åˆæ¨¡å¼çš„æ—¶å€™ï¼Œå †å ä¸Šä¸‹æ–‡ä¼šé‡æ–°å¯¹è¿™ä¸ªä½¿ç”¨äº†æ··åˆæ¨¡å¼çš„å…ƒç´ çš„æ ¹èŠ‚ç‚¹å¤„åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„æ¸²æŸ“å¹³é¢ï¼Œä½†æ˜¯å¾ˆå¯æƒœï¼Œè¿™ä¸ªæ¸²æŸ“å¹³é¢æ˜¯ä¸æ”¯æŒ preserve-3d çš„(å› ä¸ºå®ƒä»¬æ¸²æŸ“åˆ°å•ç‹¬çš„FBOä¸­)ï¼Œæ‰€ä»¥æˆ‘ä»¬çœ‹åˆ°æ˜¯ä¸€ä¸ª 2D çš„å¹³é¢æ•ˆæœã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;&lt;span&gt;éªŒè¯ Layer borders&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;ä¸Šé¢çš„é‚£å¥è¯åº”è¯¥å·²ç»å¯ä»¥ä½œä¸ºç»“è®ºï¼Œæˆ‘å†ä½¿ç”¨ chrome æä¾›çš„å·¥å…·éªŒè¯ä¸€ä¸‹ï¼Œæ‰“å¼€å¼€å‘è€…å·¥å…·çš„ Rendering -&amp;gt; Layer bordersï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;a href=&quot;https://user-images.githubusercontent.com/8554143/50087913-7eca6f00-023c-11e9-9858-eb8c637f11d7.png&quot; rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/8554143/50087913-7eca6f00-023c-11e9-9858-eb8c637f11d7.png&quot; alt=&quot;image&quot;/&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;é»„è‰²ä»£è¡¨ CSS æ¸²æŸ“æ—¶å€™çš„ GraphicsLayer å±‚ï¼Œ è“è‰²ç½‘æ ¼è¡¨ç¤ºç“¦ç‰‡(tile)ï¼Œä½ å¯ä»¥æŠŠå®ƒä»¬å½“ä½œæ˜¯å±‚çš„å•å…ƒï¼ˆå¹¶ä¸æ˜¯å±‚ï¼‰ï¼ŒChrome å†…æ ¸å¯ä»¥å°†å®ƒä»¬ä½œä¸ºä¸€ä¸ªå¤§å±‚çš„éƒ¨åˆ†ä¸Šä¼ ç»™ GPU è¿›è¡Œæ¸²æŸ“åŠ é€Ÿã€‚&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;æ­£å¸¸ 3D æ¨¡å¼ä¸‹ï¼Œå¼€å¯ Layer borders æ•ˆæœï¼š&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;&lt;a href=&quot;https://user-images.githubusercontent.com/8554143/50088210-4ecf9b80-023d-11e9-8e57-4afe95724a50.gif&quot; rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/8554143/50088210-4ecf9b80-023d-11e9-8e57-4afe95724a50.gif&quot; alt=&quot;balllayer&quot;/&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;æ·»åŠ äº†Â &lt;code&gt;mix-blend-mode&lt;/code&gt;Â çš„ 3D æ¨¡å¼ä¸‹ï¼Œå¼€å¯ Layer borders æ•ˆæœï¼š&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;&lt;a href=&quot;https://user-images.githubusercontent.com/8554143/50088230-5bec8a80-023d-11e9-8f5d-6ddabc877515.gif&quot; rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/8554143/50088230-5bec8a80-023d-11e9-8f5d-6ddabc877515.gif&quot; alt=&quot;balllayer2&quot;/&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å¯ä»¥çœ‹åˆ°ï¼Œåœ¨Â &lt;code&gt;mix-blend-mode&lt;/code&gt;Â çš„ 3D æ¨¡å¼ä¸‹ï¼Œç¡®å®åœ¨æ•´ä¸ªçƒå½¢å…ƒç´ ä¹‹å¤–ï¼Œåˆå¤šäº†ä¸€å±‚è“è‰² tileã€‚ä¹Ÿå°±æ˜¯ä¸Šæ–‡æåˆ°çš„ç‹¬ç«‹çš„æ¸²æŸ“å¹³é¢ï¼Œä¹Ÿå°±æ˜¯å› ä¸ºè¿™ä¸ªæ¸²æŸ“å¹³é¢ä¸æ”¯æŒ preserve-3d çš„åŸå› ï¼Œæˆ‘ä»¬æœ€ç»ˆå¾—åˆ°äº†ä¸€ä¸ª 2D å¹³é¢å›¾å½¢ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;&lt;span&gt;æ»¤é•œä¹Ÿä¼šå¯¼è‡´ CSS 3D å¤±æ•ˆ&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;å®Œäº†å—ï¼Ÿæ²¡æœ‰ã€‚ä¸æ˜¯å§ï¼Œè¿™è°é¡¶å¾—ä½å•Šã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;a href=&quot;https://user-images.githubusercontent.com/8554143/50129854-e5d83a00-02b5-11e9-8491-5b8006e73a5c.png&quot; rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/8554143/50129854-e5d83a00-02b5-11e9-8491-5b8006e73a5c.png&quot; alt=&quot;qq 20181218111248&quot;/&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;é‚£ä¹ˆå¦‚æœæ˜¯å› ä¸ºÂ &lt;code&gt;mix-blend-mode&lt;/code&gt;Â å¤šç”Ÿæˆäº†ä¸€ä¸ªç‹¬ç«‹æ¸²æŸ“å¹³é¢å¯¼è‡´çš„ 3D å¤±æ•ˆï¼Œé‚£ä¹ˆæ˜¯å¦æœ‰å…¶ä»–å…ƒç´ ä¹Ÿä¼šå¯¼è‡´åŒæ ·çš„ç»“æœå‘¢ï¼Ÿ&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å¸¦ç€ç–‘æƒ‘ï¼Œå»æ‰äº†Â &lt;code&gt;mix-blend-mode&lt;/code&gt;ï¼Œæˆ‘åˆç»™è®¾ç½®äº† 3d çš„å…ƒç´ æ·»åŠ äº†ä¸€ä¸ªæ»¤é•œï¼š&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:css;gutter:true;&quot;&gt;
{
-    mix-blend-mode: lighten;
+    filter: blur(1px);
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;æœç„¶ï¼Œå‡ºç°äº†åŒæ ·çš„é—®é¢˜ï¼Œ3D å¤±æ•ˆï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;a href=&quot;https://user-images.githubusercontent.com/8554143/50088811-0d3ff000-023f-11e9-8e16-48c9a7bafd06.gif&quot; rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/8554143/50088811-0d3ff000-023f-11e9-8e16-48c9a7bafd06.gif&quot; alt=&quot;balllayer3&quot;/&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;&lt;span&gt;æ€»ç»“ä¸€ä¸‹&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;å—¯ã€‚é‚£ä¹ˆåº”è¯¥å¯ä»¥åˆæ­¥å¾—åˆ°ä¸€ä¸ªç»“è®ºå°±æ˜¯æ‰€æœ‰è¿™äº›åœ¨æ¸²æŸ“æ—¶å€™éœ€è¦å†ç‹¬ç«‹ç”Ÿæˆä¸€ä¸ªæ¸²æŸ“å¹³é¢ï¼Œä¸”åŒ…å«äº† preserve-3d çš„å±æ€§ï¼Œéƒ½ä¼šå¯¼è‡´å†…éƒ¨çš„ CSS 3D å¤±æ•ˆã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æš‚æ—¶æˆ‘å‘ç°çš„æœ‰ä¸‹è¿°å‡ ä¸ªå±æ€§ï¼Œéƒ½ä¼šå¯¼è‡´ CSS 3D å¤±æ•ˆï¼š&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;&lt;code&gt;mix-blend-mode&lt;/code&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;&lt;code&gt;background-blend-mode&lt;/code&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;&lt;code&gt;filter&lt;/code&gt;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/h2&gt;
&lt;h2&gt;&lt;span&gt;å…¶ä»–é—®é¢˜&lt;/span&gt;&lt;/h2&gt;
&lt;h3&gt;&lt;span&gt;è¿™ä¸ª bug æœ‰ä»€ä¹ˆå½±å“&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span&gt;é¢ï¼Œé€šå¸¸æ¥è¯´ï¼Œå¾ˆå°‘ä¼šæœ‰äººåœ¨ä½¿ç”¨ CSS 3D çš„åŒæ—¶ä½¿ç”¨æ··åˆæ¨¡å¼æˆ–è€…æ»¤é•œï¼Œè¿™ä¸¤ä¸ªå±æ€§æ›´å¤šçš„é”¦ä¸Šæ·»èŠ±çš„ä½œç”¨ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†æ—¶å€™ï¼Œä¸ä½¿ç”¨å®ƒä»¬å°±ä¸ä¼šæœ‰é—®é¢˜ï¼Œ æ‰€ä»¥å½±å“ä¸æ˜¯å¾ˆå¤§ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;&lt;span&gt;ä¸Šæ–‡ä¸­çš„ FBO æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span&gt;ä¸Šæ–‡çš„Â &lt;code&gt;FBO&lt;/code&gt;Â å‡†ç¡®è€Œè¨€æ˜¯ä»€ä¹ˆæˆ‘ä¹Ÿæ— æ³• 100% ç¡®å®šï¼Œæ¨æµ‹åº”è¯¥æ˜¯ Frame Buffer Objectï¼Œå¸§ç¼“å­˜å¯¹è±¡ï¼Œå­˜åœ¨äºæ˜¾å­˜ä¸­ã€‚å¸§ç¼“å­˜æ˜¯ä¸€äº›äºŒç»´æ•°ç»„å’Œ OpenGL æ‰€ä½¿ç”¨çš„å­˜å‚¨åŒºçš„é›†åˆï¼šé¢œè‰²ç¼“å­˜ã€æ·±åº¦ç¼“å­˜ã€æ¨¡æ¿ç¼“å­˜å’Œç´¯è®¡ç¼“å­˜ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å„ç§ä¸‰ç»´åœºæ™¯ç°åœ¨æ¸²æŸ“åˆ°å±å¹•ä¸Šéƒ½æ˜¯å…ˆæ”¾åˆ°ä¸€ä¸ª FBO ä¸­ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€å¼ ç¦»å±›å›¾ç‰‡ï¼Œç”¨äºåŠ é€Ÿæ¸²æŸ“ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;&lt;span&gt;Bug ä½•æ—¶ä¼šè¢«ä¿®å¤&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span&gt;åœ¨ chromium bugs ç½‘ç«™ï¼Œä¸Šè¿° bug è¢«åˆå¹¶åˆ°Â &lt;a href=&quot;https://bugs.chromium.org/p/chromium/issues/detail?id=575099&quot; rel=&quot;nofollow&quot;&gt;issue 575099&lt;/a&gt;ï¼Œå¹¶ä¸”æœ€ç»ˆçŠ¶æ€æ˜¯Â Untriagedï¼Œè¡¨ç¤ºå°šæœªåˆ†é…ä¼˜å…ˆçº§ï¼Œæ„æ€æ˜¯ç­‰å¾…æŸäººç¡®å®šå“ªä¸ªäººåº”è¯¥è®¤é¢†å¹¶ä¿®å¤è¯¥ç‰¹å®šé”™è¯¯ã€‚æ‰€ä»¥ï¼ŒçŸ­æœŸå†…å¯èƒ½æ— æœ›è§£å†³ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/h2&gt;
&lt;h2&gt;&lt;span&gt;æœ€å&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;æ„Ÿè°¢è€å¿ƒè¯»å®Œã€‚æ›´å¤šç²¾å½© CSS æŠ€æœ¯æ–‡ç« æ±‡æ€»åœ¨æˆ‘çš„Â &lt;a href=&quot;https://github.com/chokcoco/iCSS&quot;&gt;Github -- iCSS&lt;/a&gt;Â ï¼ŒæŒç»­æ›´æ–°ï¼Œæ¬¢è¿ç‚¹ä¸ª star è®¢é˜…æ”¶è—ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å¥½äº†ï¼Œæœ¬æ–‡åˆ°æ­¤ç»“æŸï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ© :)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å¦‚æœè¿˜æœ‰ä»€ä¹ˆç–‘é—®æˆ–è€…å»ºè®®ï¼Œå¯ä»¥å¤šå¤šäº¤æµï¼ŒåŸåˆ›æ–‡ç« ï¼Œæ–‡ç¬”æœ‰é™ï¼Œæ‰ç–å­¦æµ…ï¼Œæ–‡ä¸­è‹¥æœ‰ä¸æ­£ä¹‹å¤„ï¼Œä¸‡æœ›å‘ŠçŸ¥ã€‚&lt;/span&gt;&lt;/p&gt;

</description>
<pubDate>Tue, 18 Dec 2018 06:47:00 +0000</pubDate>
<dc:creator>ChokCoco</dc:creator>
<og:description>ä»Šå¤©åœ¨å†™ä¸€ä¸ªå°çš„ CSS Demoï¼Œä¸€ä¸ªå…³äº 3d çƒçš„æ—‹è½¬åŠ¨ç”»ï¼Œå…³äº CSS 3Dï¼Œå°‘ä¸äº†ä¼šä½¿ç”¨ä¸‹é¢è¿™å‡ ä¸ªå±æ€§ï¼š è¿™ä¸ª Demo ä½ å¯ä»¥æˆ³è¿™é‡Œï¼Œå¤§æ¦‚æ˜¯è¿™æ ·ï¼šCodePen Demo - 3D bal</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/coco1s/p/10137045.html</dc:identifier>
</item>
<item>
<title>æ·±å…¥å­¦ä¹ å†³ç­–æ ‘ç®—æ³•åŸç† - æˆ˜äº‰çƒ­è¯š</title>
<link>http://www.cnblogs.com/wj-1314/p/9428494.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/wj-1314/p/9428494.html</guid>
<description>&lt;p&gt;ã€€ã€€åˆ†ç±»æŠ€æœ¯ï¼ˆæˆ–åˆ†ç±»æ³•ï¼‰æ˜¯ä¸€ç§æ ¹æ®è¾“å…¥æ•°æ®å»ºç«‹åˆ†ç±»æ¨¡å‹çš„ç³»ç»Ÿæ–¹æ³•ï¼Œåˆ†ç±»æ³•çš„ä¾‹å­åŒ…æ‹¬å†³ç­–åˆ†ç±»æ³•ï¼ŒåŸºäºè§„åˆ™çš„åˆ†ç±»æ³•ï¼Œç¥ç»ç½‘ç»œï¼Œæ”¯æŒå‘é‡æœºå’Œæœ´ç´ è´å¶æ–¯åˆ†ç±»æ³•ã€‚è¿™äº›æŠ€æœ¯éƒ½ä½¿ç”¨ä¸€ç§å­¦ä¹ ç®—æ³•ï¼ˆlearning algorithmï¼‰ç¡®å®šåˆ†ç±»æ¨¡å‹ï¼Œè¯¥æ¨¡å‹èƒ½å¤Ÿå¾ˆå¥½çš„æ‹Ÿåˆè¾“å…¥æ•°æ®ä¸­ç±»æ ‡å·å’Œå±æ€§é›†ä¹‹é—´çš„è”ç³»ï¼Œå­¦ä¹ ç®—æ³•å¾—åˆ°çš„æ¨¡å‹ä¸ä»…è¦å¾ˆå¥½åœ°æ‹Ÿåˆè¾“å…¥æ•°æ®ï¼Œè¿˜è¦èƒ½å¤Ÿæ­£ç¡®çš„é¢„æµ‹æœªçŸ¥æ ·æœ¬çš„ç±»æ ‡å·ã€‚å› æ­¤ï¼Œè®­ç»ƒç®—æ³•çš„ä¸»è¦ç›®æ ‡å°±æ˜¯å»ºç«‹å…·æœ‰å¾ˆå¥½æ³›åŒ–èƒ½åŠ›æ¨¡å‹ï¼Œå³å»ºç«‹èƒ½å¤Ÿå‡†ç¡®çš„é¢„æµ‹æœªçŸ¥æ ·æœ¬ç±»æ ‡å·çš„æ¨¡å‹ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€é‚£æˆ‘ä»¬é¦–å…ˆè¯´ä¸€ä¸‹åˆ†ç±»ä¸å›å½’çš„åŒºåˆ«ã€‚&lt;/p&gt;
&lt;h3&gt;å›å½’ï¼ˆregressionï¼‰&lt;/h3&gt;
&lt;p&gt;ã€€ã€€å›å½’é—®é¢˜çš„åº”ç”¨åœºæ™¯ï¼ˆé¢„æµ‹çš„ç»“æœæ˜¯è¿ç»­çš„ï¼Œä¾‹å¦‚é¢„æµ‹æ˜å¤©çš„æ¸©åº¦ï¼š23,24,25åº¦ç­‰ç­‰ï¼‰&lt;/p&gt;
&lt;p&gt;ã€€ã€€æ‰€ä»¥è¯´å›å½’é—®é¢˜é€šå¸¸æ˜¯ç”¨æ¥é¢„æµ‹ä¸€ä¸ªå€¼ï¼Œå¦‚é¢„æµ‹æˆ¿ä»·ï¼Œæœªæ¥çš„å¤©æ°”æƒ…å†µç­‰ç­‰ï¼Œä¾‹å¦‚ä¸€ä¸ªäº§å“çš„å®é™…ä»·æ ¼ä¸º500å…ƒï¼Œé€šè¿‡å›å½’åˆ†æé¢„æµ‹å€¼ä¸º501å…ƒï¼Œæˆ‘ä»¬è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„å›å½’åˆ†æã€‚ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„å›å½’ç®—æ³•æ˜¯çº¿æ€§å›å½’ç®—æ³•ï¼ˆLRï¼‰ã€‚å¦å¤–ï¼Œå›å½’åˆ†æç”¨åœ¨ç¥ç»ç½‘ç»œä¸Šï¼Œå…¶æœ€ä¸Šå±‚æ˜¯ä¸éœ€è¦softmaxå‡½æ•°çš„ï¼Œè€Œæ˜¯ç›´æ¥å¯¹å‰ä¸€å±‚ç´¯åŠ å³å¯ã€‚å›å½’æ˜¯å¯¹çœŸå®å€¼çš„ä¸€ç§é€¼è¿‘é¢„æµ‹ã€‚&lt;/p&gt;
&lt;h3&gt;åˆ†ç±»ï¼ˆclassificationï¼‰&lt;/h3&gt;
&lt;p&gt;ã€€ã€€åˆ†ç±»é—®é¢˜çš„åº”ç”¨åœºæ™¯ï¼ˆé¢„æµ‹çš„ç»“æœæ˜¯ç¦»æ•£çš„ï¼Œä¾‹å¦‚é¢„æµ‹æ˜å¤©å¤©æ°”ï¼šé˜´ï¼Œæ™´ï¼Œé›¨ç­‰ç­‰ï¼‰&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä¾‹å¦‚åˆ¤æ–­ä¸€å¹…å›¾ç‰‡ä¸Šçš„åŠ¨ç‰©æ˜¯ä¸€åªçŒ«è¿˜æ˜¯ä¸€åªç‹—ï¼Œåˆ†ç±»é€šå¸¸æ˜¯å»ºç«‹åœ¨å›å½’ä¹‹ä¸Šï¼Œåˆ†ç±»çš„æœ€åä¸€å±‚é€šå¸¸è¦ä½¿ç”¨softmaxå‡½æ•°è¿›è¡Œåˆ¤æ–­å…¶æ‰€å±ç±»åˆ«ã€‚åˆ†ç±»å¹¶æ²¡æœ‰é€¼è¿‘çš„æ¦‚å¿µï¼Œæœ€ç»ˆæ­£ç¡®ç»“æœåªæœ‰ä¸€ä¸ªï¼Œé”™è¯¯çš„å°±æ˜¯é”™è¯¯çš„ï¼Œä¸ä¼šæœ‰ç›¸è¿‘çš„æ¦‚å¿µã€‚æœ€å¸¸è§çš„åˆ†ç±»æ–¹æ³•æ˜¯é€»è¾‘å›å½’ï¼Œæˆ–è€…å«é€»è¾‘åˆ†ç±»ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1226410/201812/1226410-20181213115240279-767945433.png&quot; alt=&quot;&quot; width=&quot;599&quot; height=&quot;119&quot;/&gt;&lt;/p&gt;

&lt;h3&gt;å¦‚ä½•é€‰æ‹©æ¨¡å‹å‘¢?ï¼ˆæˆ‘ä»¬å€ŸåŠ©åˆ«äººçš„å›¾æ¥é€‰æ‹©åˆ†ç±»ï¼Œå›å½’ï¼Œèšç±»ï¼Œé™ç»´ï¼‰&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1226410/201812/1226410-20181213111956082-148247245.png&quot; alt=&quot;&quot; width=&quot;592&quot; height=&quot;370&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€å†³ç­–æ•°(Decision Tree)åœ¨æœºå™¨å­¦ä¹ ä¸­ä¹Ÿæ˜¯æ¯”è¾ƒå¸¸è§çš„ä¸€ç§ç®—æ³•ï¼Œå±äºç›‘ç£å­¦ä¹ ä¸­çš„ä¸€ç§ã€‚çœ‹å­—é¢æ„æ€åº”è¯¥ä¹Ÿæ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œç›¸æ¯”å…¶ä»–ç®—æ³•æ¯”å¦‚æ”¯æŒå‘é‡æœº(SVM)æˆ–ç¥ç»ç½‘ç»œï¼Œä¼¼ä¹å†³ç­–æ ‘æ„Ÿè§‰â€œäº²åˆ‡â€è®¸å¤šã€‚&lt;/p&gt;
&lt;h2&gt;å†³ç­–æ ‘ç®—æ³•æ€æƒ³&lt;/h2&gt;
&lt;p&gt;ã€€ã€€å†³ç­–æ ‘ï¼ˆdecision treeï¼‰æ˜¯ä¸€ä¸ªæ ‘ç»“æ„ï¼ˆå¯ä»¥æ˜¯äºŒå‰æ ‘æˆ–è€…éäºŒå‰æ ‘ï¼‰ã€‚å†³ç­–æ ‘åˆ†ä¸ºåˆ†ç±»æ ‘å’Œå›å½’æ ‘ä¸¤ç§ï¼Œåˆ†ç±»æ ‘å¯¹ç¦»æ•£å˜é‡åšå†³ç­–æ ‘ï¼Œå›å½’æ ‘å¯¹è¿ç»­å˜é‡åšå†³ç­–æ ‘ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€å…¶ä¸­æ¯ä¸ªéå¶èŠ‚ç‚¹è¡¨ç¤ºä¸€ä¸ªç‰¹å¾å±æ€§ä¸Šçš„æµ‹è¯•ï¼Œæ¯ä¸ªåˆ†æ”¯ä»£è¡¨è¿™ä¸ªç‰¹å¾å±æ€§åœ¨æŸä¸ªå€¼åŸŸä¸Šçš„è¾“å‡ºï¼Œè€Œæ¯ä¸ªå¶èŠ‚ç‚¹å­˜æ”¾åœ¨ä¸€ä¸ªç±»åˆ«ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä½¿ç”¨å†³ç­–æ ‘è¿›è¡Œå†³ç­–çš„è¿‡ç¨‹å°±æ˜¯ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œæµ‹è¯•å¾…åˆ†ç±»é¡¹ä¸­ç›¸åº”çš„ç‰¹å¾å±æ€§ï¼Œå¹¶æŒ‰ç…§å…¶å€¼é€‰æ‹©è¾“å‡ºåˆ†æ”¯ï¼ŒçŸ¥é“åˆ°è¾¾å¶å­èŠ‚ç‚¹ï¼Œå°†å¶å­èŠ‚ç‚¹å­˜æ”¾çš„ç±»åˆ«ä½œä¸ºå†³ç­–ç»“æœã€‚&lt;/p&gt;
&lt;h3&gt;å†³ç­–æ ‘å­¦ä¹ ç®—æ³•ä¸»è¦ç”±ä¸‰éƒ¨åˆ†æ„æˆ&lt;/h3&gt;
&lt;h4&gt;ç‰¹å¾é€‰æ‹©&lt;/h4&gt;
&lt;p&gt;ã€€ã€€ç‰¹å¾é€‰æ‹©æ˜¯æŒ‡ä»è®­ç»ƒæ•°æ®ä¸­ä¼—å¤šçš„ç‰¹å¾ä¸­é€‰æ‹©ä¸€ä¸ªç‰¹å¾ä½œä¸ºå½“å‰èŠ‚ç‚¹çš„åˆ†è£‚æ ‡å‡†ï¼Œå¦‚ä½•é€‰æ‹©ç‰¹å¾æœ‰ç€å¾ˆå¤šä¸åŒé‡åŒ–è¯„ä¼°æ ‡å‡†ï¼Œä»è€Œè¡ç”Ÿå‡ºä¸åŒçš„å†³ç­–æ ‘ç®—æ³•ã€‚&lt;/p&gt;
&lt;h4&gt;å†³ç­–æ ‘ç”Ÿæˆ&lt;/h4&gt;
&lt;p&gt;ã€€ã€€æ ¹æ®é€‰æ‹©çš„ç‰¹å¾è¯„ä¼°æ ‡å‡†ï¼Œä»ä¸Šè‡³ä¸‹é€’å½’åœ°ç”Ÿæˆå­èŠ‚ç‚¹ï¼Œç›´åˆ°æ•°æ®é›†ä¸å¯åˆ†åˆ™åœæ­¢å†³ç­–æ ‘åœæ­¢ç”Ÿé•¿ã€‚æ ‘ç»“æ„æ¥è¯´ï¼Œé€’å½’ç»“æ„æ˜¯æœ€å®¹æ˜“ç†è§£çš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;h4&gt;å†³ç­–æ ‘çš„å‰ªæ&lt;/h4&gt;
&lt;p&gt;ã€€ã€€å†³ç­–æ ‘å®¹æ˜“è¿‡æ‹Ÿåˆï¼Œä¸€èˆ¬æ¥éœ€è¦å‰ªæï¼Œç¼©å°æ ‘ç»“æ„è§„åˆ™ï¼Œç¼“è§£è¿‡æ‹Ÿåˆï¼Œå‰ªææŠ€æœ¯æœ‰é¢„å‰ªæå’Œåå‰ªæä¸¤ç§ã€‚&lt;/p&gt;
&lt;h3&gt;Â å†³ç­–å®ä¾‹ä¸€&lt;/h3&gt;
&lt;p&gt;å†³ç­–æ ‘è¡¨ç¤ºå¦‚ä¸‹ï¼ˆå€Ÿç”¨å‘¨å¿—åè€å¸ˆè¥¿ç“œä¹¦çš„å›¾ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1226410/201812/1226410-20181217105657009-1297850715.png&quot; alt=&quot;&quot; width=&quot;583&quot; height=&quot;345&quot;/&gt;&lt;/p&gt;

&lt;p&gt;ã€€ã€€å‡å¦‚æˆ‘ç°åœ¨å‘Šè¯‰ä½ ï¼Œæˆ‘ä¹°äº†ä¸€ä¸ªè¥¿ç“œï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯çº¹ç†æ˜¯æ¸…æ™°ï¼Œæ ¹è’‚æ˜¯ç¡¬æŒºçš„ç“œï¼Œä½ æ¥ç»™æˆ‘åˆ¤æ–­ä¸€ä¸‹æ˜¯å¥½ç“œè¿˜æ˜¯åç“œï¼Œæ°å¥½ï¼Œä½ æ„å»ºäº†ä¸€é¢—å†³ç­–æ ‘ï¼Œå‘Šè¯‰ä»–ï¼Œæ²¡é—®é¢˜ï¼Œæˆ‘é©¬ä¸Šå‘Šè¯‰ä½ æ˜¯å¥½ç“œï¼Œè¿˜æ˜¯åç“œï¼Ÿ&lt;/p&gt;
&lt;p&gt;ã€€ã€€åˆ¤æ–­æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€æ ¹æ®çº¹ç†ç‰¹å¾ï¼Œå·²çŸ¥æ˜¯æ¸…æ™°ï¼Œé‚£ä¹ˆèµ°ä¸‹é¢è¿™æ¡è·¯ï¼Œçº¢è‰²æ ‡è®°ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1226410/201812/1226410-20181217110614191-1289435636.png&quot; alt=&quot;&quot; width=&quot;574&quot; height=&quot;340&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€å¥½äº†ï¼Œç°åœ¨åˆ°äº†ç¬¬äºŒå±‚ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œç”±å†³ç­–æ ‘çš„å›¾ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“æ ¹è’‚çš„ç‰¹å¾æ—¶ä»€ä¹ˆäº†ï¼Ÿï¼Œå¯¹æ—¶ç¡¬æŒºï¼Œäºæ˜¯æˆ‘ä»¬ç»§ç»­èµ°ï¼Œå¦‚ä¸‹è“è‰²çš„å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1226410/201812/1226410-20181217110739257-1549500577.png&quot; alt=&quot;&quot; width=&quot;576&quot; height=&quot;342&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€æ­¤æ—¶ï¼Œæˆ‘ä»¬åˆ°è¾¾å¶å­ç»“ç‚¹äº†ï¼Œæ ¹æ®ä¸Šé¢æ€»ç»“çš„åº—ï¼Œå¯çŸ¥ï¼Œå¶å­ç»“ç‚¹ä»£è¡¨ä¸€ç§ç±»åˆ«ï¼Œæˆ‘ä»¬ä»å¦‚ä¸Šå†³ç­–æ ‘ä¸­å¯ä»¥çŸ¥é“ï¼Œè¿™æ˜¯ä¸€ä¸ªåç“œï¼ï¼&lt;/p&gt;
&lt;p&gt;ã€€ã€€æ‰€ä»¥æ ¹æ®ä¸Šé¢çš„ä¾‹å­ï¼Œéå¸¸ç›´è§‚å®¹æ˜“çš„å¾—åˆ°äº†ä¸€ä¸ªå®ä¾‹çš„ç±»åˆ«åˆ¤æ–­ï¼Œåªè¦ä½ å‘Šè¯‰æˆ‘å„ä¸ªç‰¹å¾çš„å…·ä½“å€¼ï¼Œå†³ç­–æ ‘çš„åˆ¤å®šè¿‡ç¨‹å°±ç›¸å½“äºæ ‘ä¸­ä»è·ŸèŠ‚ç‚¹åˆ°æŸä¸€ä¸ªå¶å­èŠ‚ç‚¹çš„éå†ï¼Œæ¯ä¸€æ­¥å¦‚ä½•éå†æ˜¯ç”±æ•°æ®å„ä¸ªç‰¹å¾çš„å…·ä½“ç‰¹å¾å±æ€§å†³å®šã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€å¥½äº†ï¼Œå¯èƒ½æœ‰äººè¦é—®äº†ï¼Œè¯´äº†è¿™ä¹ˆå¤šï¼Œç»™ä½ è®­ç»ƒæ•°æ®ï¼Œä½ çš„å†³ç­–æ ‘æ˜¯æ€ä¹ˆæ„å»ºçš„å‘¢ï¼Ÿæ²¡æœ‰æ ‘ï¼Œè°ˆä½•éå†ï¼Œè°ˆä½•åˆ†ç±»ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ã€€ã€€äºæ˜¯æ„å»ºå†³ç­–æ ‘ä¹Ÿå°±æˆäº†æœ€é‡è¦çš„å·¥ä½œï¼ï¼&lt;/p&gt;
&lt;p&gt;ã€€ã€€æ¯”å¦‚ï¼Œç»™æˆ‘ä¸‹é¢çš„è®­ç»ƒæ•°æ®ï¼Œæˆ‘ä»¬å¦‚ä½•æ„å»ºå‡ºå†³ç­–æ ‘ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1226410/201812/1226410-20181217111241480-2032624640.png&quot; alt=&quot;&quot; width=&quot;598&quot; height=&quot;373&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€æˆ‘ä»¬å¯ä»¥ä»ä¸Šé¢çš„å†³ç­–æ ‘çœ‹å‡ºï¼Œæ¯ä¸€æ¬¡å­ç»“ç‚¹çš„äº§ç”Ÿï¼Œæ˜¯ç”±äºæˆ‘åœ¨å½“å‰å±‚æ•°é€‰æ‹©äº†ä¸åŒçš„ç‰¹å¾æ¥ä½œä¸ºæˆ‘çš„åˆ†è£‚å› ç´ é€ æˆçš„ï¼Œæ¯”å¦‚ä¸‹é¢çº¢è‰²ä¸‰è§’å½¢è¡¨ç¤ºé€‰æ‹©çš„ç‰¹å¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1226410/201812/1226410-20181217111427602-1570649599.png&quot; alt=&quot;&quot; width=&quot;590&quot; height=&quot;349&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€æ¯ä¸€å±‚é€‰æ‹©äº†æŒ‡å®šçš„ç‰¹å¾ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç»§ç»­ç”±è¯¥ç‰¹å¾çš„ä¸åŒå±æ€§å€¼è¿›è¡Œåˆ’åˆ†ï¼Œä¾æ¬¡ä¸€ç›´åˆ°å¶å­èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€çœ‹èµ·æ¥ä¸€åˆ‡å¾ˆé¡ºåˆ©ï¼Œä½†æ˜¯ï¼Œç»†å¿ƒåœ°å°ä¼™ä¼´å¯èƒ½ä¼šé—®äº†ï¼Œä¸ºä»€ä¹ˆåœ¨ç¬¬ä¸€æ¬¡é€‰æ‹©ç‰¹å¾åˆ†è£‚çš„æ—¶å€™ï¼Œä¸é€‰æ‹©è§¦æ„Ÿå‘¢ï¼Ÿè€Œæ˜¯é€‰æ‹©çº¹ç†ï¼Œæ¯”å¦‚å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1226410/201812/1226410-20181217111732438-217925843.png&quot; alt=&quot;&quot; width=&quot;613&quot; height=&quot;363&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä¸æ¢æˆæŠ½å¹²ï¼Œæˆ–è€…æ˜¯å…¶ä»–ç‰¹å¾å‘¢ï¼Ÿä¸ºä»€ä¹ˆé€‰æ‹©çš„æ˜¯çº¹ç†ï¼Œè¿™æ˜¯ä»¥ä»€ä¹ˆæ ‡å‡†æ¥é€‰æ‹©ç‰¹å¾çš„ï¼Ÿè¿™ä¸ªé—®é¢˜å…ˆç•™ç€ï¼Œè®©æˆ‘ä»¬å†çœ‹ä¸€ä¸ªä¾‹å­&lt;/p&gt;
&lt;h3&gt;å†³ç­–å®ä¾‹äºŒ&lt;/h3&gt;
&lt;p&gt;ã€€ã€€ä¸€å¤©ï¼Œè€å¸ˆé—®äº†ä¸ªé—®é¢˜ï¼Œåªæ ¹æ®å¤´å‘å’Œå£°éŸ³æ€ä¹ˆåˆ¤æ–­ä¸€ä½åŒå­¦çš„æ€§åˆ«ã€‚Â &lt;br/&gt;ã€€ã€€ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒåŒå­¦ä»¬é©¬ä¸Šç®€å•çš„ç»Ÿè®¡äº†7ä½åŒå­¦çš„ç›¸å…³ç‰¹å¾ï¼Œæ•°æ®å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1226410/201808/1226410-20180806101127181-228435581.png&quot; alt=&quot;&quot; width=&quot;554&quot; height=&quot;276&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æœºæ™ºçš„åŒå­¦Aæƒ³äº†æƒ³ï¼Œå…ˆæ ¹æ®å¤´å‘åˆ¤æ–­ï¼Œè‹¥åˆ¤æ–­ä¸å‡ºï¼Œå†æ ¹æ®å£°éŸ³åˆ¤æ–­ï¼Œäºæ˜¯ç”»äº†ä¸€å¹…å›¾ï¼Œå¦‚ä¸‹ï¼šÂ &lt;br/&gt;&lt;img title=&quot;&quot; src=&quot;https://img-blog.csdn.net/20170325232900261?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY3NxYXp3c3hlZGM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast&quot; alt=&quot;åŒå­¦A&quot; width=&quot;587&quot; height=&quot;317&quot;/&gt;Â &lt;br/&gt;ã€€ã€€äºæ˜¯ï¼Œä¸€ä¸ªç®€å•ã€ç›´è§‚çš„å†³ç­–æ ‘å°±è¿™ä¹ˆå‡ºæ¥äº†ã€‚å¤´å‘é•¿ã€å£°éŸ³ç²—å°±æ˜¯ç”·ç”Ÿï¼›å¤´å‘é•¿ã€å£°éŸ³ç»†å°±æ˜¯å¥³ç”Ÿï¼›å¤´å‘çŸ­ã€å£°éŸ³ç²—æ˜¯ç”·ç”Ÿï¼›å¤´å‘çŸ­ã€å£°éŸ³ç»†æ˜¯å¥³ç”Ÿã€‚Â &lt;br/&gt;ã€€ã€€&lt;br/&gt;ã€€ã€€è¿™æ—¶åˆè¹¦å‡ºä¸ªåŒå­¦Bï¼Œæƒ³å…ˆæ ¹æ®å£°éŸ³åˆ¤æ–­ï¼Œç„¶åå†æ ¹æ®å¤´å‘æ¥åˆ¤æ–­ï¼Œå¦‚æ˜¯å¤§æ‰‹ä¸€æŒ¥ä¹Ÿç”»äº†ä¸ªå†³ç­–æ ‘ï¼šÂ &lt;br/&gt;&lt;img title=&quot;&quot; src=&quot;https://img-blog.csdn.net/20170325231929573?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY3NxYXp3c3hlZGM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast&quot; alt=&quot;åŒå­¦B&quot;/&gt;Â &lt;br/&gt;ã€€ã€€åŒå­¦Bçš„å†³ç­–æ ‘ï¼šé¦–å…ˆåˆ¤æ–­å£°éŸ³ï¼Œå£°éŸ³ç»†ï¼Œå°±æ˜¯å¥³ç”Ÿï¼›å£°éŸ³ç²—ã€å¤´å‘é•¿æ˜¯ç”·ç”Ÿï¼›å£°éŸ³ç²—ã€å¤´å‘é•¿æ˜¯å¥³ç”Ÿã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼šåŒå­¦Aå’ŒåŒå­¦Bè°çš„å†³ç­–æ ‘å¥½äº›ï¼Ÿè®¡ç®—æœºåšå†³ç­–æ ‘çš„æ—¶å€™ï¼Œé¢å¯¹å¤šä¸ªç‰¹å¾ï¼Œè¯¥å¦‚ä½•é€‰å“ªä¸ªç‰¹å¾ä¸ºæœ€ä½³çš„åˆ’åˆ†ç‰¹å¾ï¼Ÿä¸‹é¢æˆ‘ä»¬å°±è¦è¯´ä¸€ä¸‹å†³ç­–æ ‘çš„ç‰¹å¾é€‰æ‹©äº†ã€‚&lt;/p&gt;
&lt;h3&gt;å†³ç­–æ ‘çš„ç‰¹å¾é€‰æ‹©&lt;/h3&gt;
&lt;p&gt;ã€€ã€€&lt;strong&gt;åˆ’åˆ†æ•°æ®é›†çš„å¤§åŸåˆ™æ˜¯ï¼šå°†æ— åºçš„æ•°æ®å˜å¾—æ›´åŠ æœ‰åºã€‚Â &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;br/&gt;ã€€ã€€æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šç§æ–¹æ³•åˆ’åˆ†æ•°æ®é›†ï¼Œä½†æ˜¯æ¯ç§æ–¹æ³•éƒ½æœ‰å„è‡ªçš„ä¼˜ç¼ºç‚¹ã€‚äºæ˜¯æˆ‘ä»¬è¿™ä¹ˆæƒ³ï¼Œå¦‚æœæˆ‘ä»¬èƒ½æµ‹é‡æ•°æ®çš„å¤æ‚åº¦ï¼Œå¯¹æ¯”æŒ‰ä¸åŒç‰¹å¾åˆ†ç±»åçš„æ•°æ®å¤æ‚åº¦ï¼Œè‹¥æŒ‰æŸä¸€ç‰¹å¾åˆ†ç±»åå¤æ‚åº¦å‡å°‘çš„æ›´å¤šï¼Œé‚£ä¹ˆè¿™ä¸ªç‰¹å¾å³ä¸ºæœ€ä½³åˆ†ç±»ç‰¹å¾ã€‚Â &lt;br/&gt;ã€€ã€€Claude Shannon å®šä¹‰äº†ç†µï¼ˆentropyï¼‰å’Œä¿¡æ¯å¢ç›Š(information gain)ã€‚ ä¸‹é¢å…ˆä»‹ç»ä¸€ä¸‹æ¦‚å¿µï¼š&lt;/p&gt;
&lt;h3&gt;ç†µï¼ˆentropyï¼‰&lt;/h3&gt;
&lt;p&gt;ã€€ã€€åœ¨ä¿¡æ¯è®ºä¸æ¦‚ç‡è®ºä¸­ï¼Œç†µï¼ˆentropyï¼‰ç”¨äºè¡¨ç¤ºâ€œéšæœºå˜é‡ä¸ç¡®å®šæ€§çš„åº¦é‡â€&lt;/p&gt;
&lt;p&gt;ã€€ã€€åœ¨å†³ç­–æ ‘çš„ç®—æ³•ä¸­ï¼Œç†µæ˜¯ä¸€ä¸ªéå¸¸éå¸¸é‡è¦çš„æ¦‚å¿µï¼Œä¸€ä»¶äº‹å‘ç”Ÿçš„æ¦‚ç‡è¶Šå°ï¼Œæˆ‘ä»¬è¯´å®ƒè•´å«çš„ä¿¡æ¯é‡è¶Šå¤§ï¼Œæ¯”å¦‚ï¼šæˆ‘ä»¬å¬åˆ°å¥³äººæ€€å­•äº†ï¼Œæ˜¯ä¸æ˜¯ä¸å¥‡æ€ªï¼Œä½†æ˜¯æŸå¤©å¬åˆ°é‚£ä¸ªç”·äººæ€€å­•äº†ï¼Œæ˜¯ä¸æ˜¯ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ&lt;/p&gt;
&lt;p&gt;ã€€ã€€æ‰€ä»¥ä¸‹é¢æˆ‘ä»¬è¯´ä¸€ä¸‹ä¿¡æ¯é‡ç†µçš„å®šä¹‰ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€è®¾Xæ˜¯ä¸€ä¸ªæœ‰é™çŠ¶æ€çš„ç¦»æ•£å‹éšæœºå˜é‡ï¼Œå…¶æ¦‚ç‡åˆ†å¸ƒä¸ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1226410/201812/1226410-20181217113823341-290526621.png&quot; alt=&quot;&quot; width=&quot;279&quot; height=&quot;48&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€åˆ™éšæœºå˜é‡Xçš„ç†µå®šä¹‰ä¸ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1226410/201812/1226410-20181217113857074-2010580133.png&quot; alt=&quot;&quot; width=&quot;222&quot; height=&quot;70&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€ç†µè¶Šå¤§ï¼Œåˆ™éšæœºå˜é‡çš„ä¸ç¡®å®šæ€§è¶Šå¤§ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€å½“éšæœºå˜é‡åªæœ‰0å’Œ1ä¸¤ç§å–å€¼çš„æ—¶å€™ï¼Œå‡è®¾Pï¼ˆX=1ï¼‰=pï¼Œåˆ™æœ‰ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1226410/201812/1226410-20181217114016728-839679991.png&quot; alt=&quot;&quot; width=&quot;293&quot; height=&quot;44&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä»è€Œæœ‰ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1226410/201812/1226410-20181217114238987-1938641219.png&quot; alt=&quot;&quot; width=&quot;199&quot; height=&quot;68&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä»è€Œå¯çŸ¥ï¼Œå½“p=0.5æ—¶ï¼Œç†µå–å€¼æœ€å¤§ï¼Œéšæœºå˜é‡ä¸ç¡®å®šæ€§æœ€å¤§ã€‚å¦‚å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1226410/201812/1226410-20181217114458540-419108768.png&quot; alt=&quot;&quot; width=&quot;447&quot; height=&quot;382&quot;/&gt;&lt;/p&gt;
&lt;h3&gt;æ¡ä»¶ç†µï¼ˆconditional entropyï¼‰&lt;/h3&gt;
&lt;p&gt;ã€€ã€€éšæœºå˜é‡Xç»™å®šçš„æ¡ä»¶ä¸‹ï¼ŒYçš„æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒçš„ç†µå¯¹Xçš„æ•°å­¦æœŸæœ›ï¼Œå…¶æ•°å­¦æ¨å¯¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1226410/201812/1226410-20181217160231715-1958718494.png&quot; alt=&quot;&quot; width=&quot;311&quot; height=&quot;138&quot;/&gt;&lt;/p&gt;

&lt;p&gt;ã€€ã€€éšæœºå˜é‡Yçš„æ¡ä»¶ç†µHï¼ˆY|Xï¼‰å®šä¹‰ä¸ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1226410/201812/1226410-20181217114825494-826482734.png&quot; alt=&quot;&quot; width=&quot;242&quot; height=&quot;57&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€å…¶ä¸­ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1226410/201812/1226410-20181217114849959-970139871.png&quot; alt=&quot;&quot; width=&quot;138&quot; height=&quot;36&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€æ¡ä»¶ç†µH(Y|X)è¡¨ç¤ºåœ¨å·²çŸ¥éšæœºå˜é‡Xçš„æ¡ä»¶ä¸‹éšæœºå˜é‡Yçš„ä¸ç¡®å®šæ€§ã€‚æ³¨æ„ä¸€ä¸‹ï¼Œæ¡ä»¶ç†µä¸­Xä¹Ÿæ˜¯ä¸€ä¸ªå˜é‡ï¼Œæ„æ€æ˜¯åœ¨ä¸€ä¸ªå˜é‡Xçš„æ¡ä»¶ä¸‹ï¼ˆå˜é‡Xçš„æ¯ä¸ªå€¼éƒ½ä¼šå–åˆ°ï¼‰ï¼Œå¦ä¸€ä¸ªå˜é‡Yçš„ç†µå¯¹Xçš„æœŸæœ›ã€‚&lt;/p&gt;
&lt;h3&gt;ä¿¡æ¯å¢ç›Šï¼ˆinformation gainï¼‰&lt;/h3&gt;
&lt;p&gt;ã€€ã€€ä¿¡æ¯å¢ç›Šè¡¨ç¤ºçš„æ˜¯ï¼šå¾—çŸ¥ç‰¹å¾Xçš„ä¿¡æ¯è€Œä½¿å¾—ç±»Yçš„ä¿¡æ¯çš„ä¸ç¡®å®šæ€§å‡å°‘çš„ç¨‹åº¦ã€‚ç®€å•è¯´ï¼Œå°±æ˜¯å½“æˆ‘ä»¬ç”¨å¦ä¸€ä¸ªå˜é‡Xå¯¹åŸå˜é‡Yåˆ†ç±»åï¼ŒåŸå˜é‡Yçš„ä¸ç¡®å®šæ€§å°±ä¼šå‡å°‘äº†ï¼ˆå³ç†µå€¼å‡å°‘ï¼‰ã€‚è€Œç†µå°±æ˜¯ä¸ç¡®å®šæ€§ï¼Œä¸ç¡®å®šç¨‹åº¦å‡å°‘äº†å¤šå°‘å…¶å®å°±æ˜¯ä¿¡æ¯å¢ç›Šï¼Œè¿™å°±æ˜¯ä¿¡æ¯å¢ç›Šçš„ç”±æ¥ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€æ‰€ä»¥ä¿¡æ¯å¢ç›Šçš„å…·ä½“å®šä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€ç‰¹å¾Aå¯¹è®­ç»ƒæ•°æ®é›†Dçš„ä¿¡æ¯å¢ç›Šg(Dï¼ŒAï¼‰å®šä¹‰ä¸ºé›†åˆDçš„ç»éªŒç†µHï¼ˆDï¼‰ä¸ç‰¹å¾Aç»™å®šæ¡ä»¶ä¸‹Dçš„ç»éªŒæ¡ä»¶ç†µHï¼ˆD/Aï¼‰ä¹‹å·®ï¼Œå³ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1226410/201812/1226410-20181217115552832-437744762.png&quot; alt=&quot;&quot; width=&quot;231&quot; height=&quot;48&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä¸€èˆ¬åœ°ï¼Œç†µH(Y)ä¸æ¡ä»¶ç†µH(Y|X)ä¹‹å·®æˆä¸ºäº’ä¿¡æ¯ï¼ˆmutual informationï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€æ ¹æ®ä¿¡æ¯å¢ç›Šå‡†åˆ™è€Œè¿›è¡Œç‰¹å¾é€‰æ‹©çš„æ–¹æ³•æ˜¯ï¼šå¯¹è®­ç»ƒæ•°æ®é›†Dï¼Œè®¡ç®—å…¶æ¯ä¸ªç‰¹å¾çš„ä¿¡æ¯å¢ç›Šï¼Œå¹¶æ¯”ä»–ä»¬å¤§å°ï¼Œä»è€Œé€‰æ‹©ä¿¡æ¯å¢ç›Šæœ€å¤§çš„ç‰¹å¾ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€å‡è®¾è®­ç»ƒæ•°æ®é›†ä¸ºDï¼Œæ ·æœ¬å®¹é‡ä¸º|D|ï¼Œç”±kä¸ªç±»åˆ«C&lt;sub&gt;k&lt;/sub&gt;ï¼Œ|C&lt;sub&gt;k&lt;/sub&gt;|ä¸ºç±»åˆ«C&lt;sub&gt;k&lt;/sub&gt;çš„æ ·æœ¬ä¸ªæ•°ï¼ŒæŸä¸€ç‰¹å¾Aç”±nä¸ªä¸åŒçš„å–å€¼a1,a2,a3,.....anã€‚æ ¹æ®ç‰¹å¾Açš„å–å€¼å¯å°†æ•°æ®é›†Dåˆ’åˆ†ä¸ºnä¸ªå­é›†D1ï¼ŒD2.....D&lt;sub&gt;n&lt;/sub&gt;ï¼Œ|D&lt;sub&gt;i&lt;/sub&gt;|ä¸ºD&lt;sub&gt;i&lt;/sub&gt;çš„æ ·æœ¬ä¸ªæ•°ï¼Œå¹¶è®°å­é›†Diä¸­å±äºç±»C&lt;sub&gt;k&lt;/sub&gt;ï¼Œçš„æ ·æœ¬çš„é›†åˆä¸ºD&lt;sub&gt;ikï¼Œ&lt;/sub&gt;|D&lt;sub&gt;ik&lt;/sub&gt;|ä¸ºD&lt;sub&gt;ik&lt;/sub&gt;çš„æ ·æœ¬ä¸ªæ•°ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€åˆ™ä¿¡æ¯å¢ç›Šçš„ç®—æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;-è¾“å…¥ï¼šè®­ç»ƒæ•°æ®é›†Då’Œç‰¹å¾A&lt;/li&gt;
&lt;li&gt;-è¾“å‡ºï¼šç‰¹å¾Aå¯¹è®­ç»ƒæ•°æ®é›†Dçš„ä¿¡æ¯å¢ç›Šg(D,A)&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ï¼ˆ1ï¼‰ è®¡ç®—æ•°æ®é›†Dçš„ç»éªŒç†µH(D)ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1226410/201812/1226410-20181217135434802-2015368600.png&quot; alt=&quot;&quot; width=&quot;214&quot; height=&quot;71&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â ï¼ˆ2ï¼‰è®¡ç®—ç‰¹å¾Aå¯¹æ•°æ®é›†Dçš„ç»éªŒæ¡ä»¶Hï¼ˆD|Aï¼‰&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1226410/201812/1226410-20181217135903234-268637025.png&quot; alt=&quot;&quot; width=&quot;381&quot; height=&quot;60&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ï¼ˆ3ï¼‰è®¡ç®—ä¿¡æ¯å¢ç›Š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1226410/201812/1226410-20181217135936103-1919027735.png&quot; alt=&quot;&quot; width=&quot;246&quot; height=&quot;47&quot;/&gt;&lt;/p&gt;
&lt;h3&gt;ä¿¡æ¯å¢ç›Šæ¯”ï¼ˆinformation gain ratioï¼‰&lt;/h3&gt;
&lt;p&gt;ã€€ã€€ä»¥ä¿¡æ¯å¢ç›Šä½œä¸ºç‰¹å¾é€‰æ‹©å‡†åˆ™ï¼Œä¼šå­˜åœ¨åå‘äºé€‰æ‹©å–å€¼è¾ƒå¤šçš„ç‰¹å¾çš„é—®é¢˜ï¼Œå¯ä»¥é‡‡ç”¨ä¿¡æ¯å¢ç›Šæ¯”å¯¹è¿™ä¸ªé—®é¢˜è¿›è¡Œæ ¡æ­£ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ç‰¹å¾Aå¯¹è®­ç»ƒæ•°æ®é›†Dçš„ä¿¡æ¯å¢ç›Šæ¯”å®šä¹‰ä¸ºå…¶ä¿¡æ¯å¢ç›Šä¸è®­ç»ƒé›†Då…³äºç‰¹å¾Açš„å€¼çš„ç†µä¹‹æ¯”ï¼Œå³ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1226410/201812/1226410-20181217140155048-449742908.png&quot; alt=&quot;&quot; width=&quot;190&quot; height=&quot;70&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å…¶ä¸­ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1226410/201812/1226410-20181217140224575-1596053114.png&quot; alt=&quot;&quot; width=&quot;252&quot; height=&quot;58&quot;/&gt;&lt;/p&gt;
&lt;h3&gt;è®¡ç®—å®ä¾‹äºŒçš„ä¿¡æ¯å¢ç›Šå€¼&lt;/h3&gt;
&lt;p&gt;ã€€ã€€é¦–å…ˆè®¡ç®—æœªåˆ†ç±»å‰çš„ç†µï¼Œæ€»å…±æœ‰8ä½åŒå­¦ï¼Œç”·ç”Ÿ3ä½ï¼Œå¥³ç”Ÿ5ä½ã€‚Â &lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ç†µï¼ˆæ€»ï¼‰=-3/8*log2(3/8)-5/8*log2(5/8)=0.9544Â &lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ã€€ã€€æ¥ç€åˆ†åˆ«è®¡ç®—åŒå­¦Aå’ŒåŒå­¦Båˆ†ç±»åä¿¡æ¯ç†µã€‚Â &lt;/p&gt;
&lt;p&gt;&lt;br/&gt;ã€€ã€€åŒå­¦Aé¦–å…ˆæŒ‰å¤´å‘åˆ†ç±»ï¼Œåˆ†ç±»åçš„ç»“æœä¸ºï¼šé•¿å¤´å‘ä¸­æœ‰1ç”·3å¥³ã€‚çŸ­å¤´å‘ä¸­æœ‰2ç”·2å¥³ã€‚Â &lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ç†µï¼ˆåŒå­¦Aé•¿å‘ï¼‰=-1/4*log2(1/4)-3/4*log2(3/4)=0.8113Â &lt;/li&gt;
&lt;li&gt;ç†µï¼ˆåŒå­¦AçŸ­å‘ï¼‰=-2/4*log2(2/4)-2/4*log2(2/4)=1Â &lt;/li&gt;
&lt;li&gt;ç†µï¼ˆåŒå­¦Aï¼‰=4/8*0.8113+4/8*1=0.9057Â &lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;ä¿¡æ¯å¢ç›Šï¼ˆåŒå­¦Aï¼‰=ç†µï¼ˆæ€»ï¼‰-ç†µï¼ˆåŒå­¦Aï¼‰=0.9544-0.9057=0.0487Â &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;br/&gt;ã€€ã€€åŒç†ï¼ŒæŒ‰åŒå­¦Bçš„æ–¹æ³•ï¼Œé¦–å…ˆæŒ‰å£°éŸ³ç‰¹å¾æ¥åˆ†ï¼Œåˆ†ç±»åçš„ç»“æœä¸ºï¼šå£°éŸ³ç²—ä¸­æœ‰3ç”·3å¥³ã€‚å£°éŸ³ç»†ä¸­æœ‰0ç”·2å¥³ã€‚Â &lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ç†µï¼ˆåŒå­¦Bå£°éŸ³ç²—ï¼‰=-3/6*log2(3/6)-3/6*log2(3/6)=1Â &lt;/li&gt;
&lt;li&gt;ç†µï¼ˆåŒå­¦Bå£°éŸ³ç²—ï¼‰=-2/2*log2(2/2)=0Â &lt;/li&gt;
&lt;li&gt;ç†µï¼ˆåŒå­¦Bï¼‰=6/8*1+2/8*0=0.75Â &lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;ä¿¡æ¯å¢ç›Šï¼ˆåŒå­¦Bï¼‰=ç†µï¼ˆæ€»ï¼‰-ç†µï¼ˆåŒå­¦Aï¼‰=0.9544-0.75=0.2087&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€æŒ‰åŒå­¦Bçš„æ–¹æ³•ï¼Œå…ˆæŒ‰å£°éŸ³ç‰¹å¾åˆ†ç±»ï¼Œä¿¡æ¯å¢ç›Šæ›´å¤§ï¼ŒåŒºåˆ†æ ·æœ¬çš„èƒ½åŠ›æ›´å¼ºï¼Œæ›´å…·æœ‰ä»£è¡¨æ€§ã€‚Â &lt;br/&gt;ä»¥ä¸Šå°±æ˜¯å†³ç­–æ ‘ID3ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³ã€‚Â &lt;/p&gt;
&lt;p&gt;ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
def uniquecounts(rows):
    '''
        å¯¹yçš„å„ç§å¯èƒ½å–å€¼å‡ºç°çš„ä¸ªæ•°è¿›è¡Œè®¡æ•°
        å…¶ä»–å‡½æ•°åˆ©ç”¨è¯¥å‡½æ•°æ¥è®¡ç®—æ•°æ®é›†å’Œçš„æ··æ‚ç¨‹åº
        :param rows:
        :return:
        '''
    results  = {}
    for row in rows:
        # è®¡ç®—ç»“æœåœ¨æœ€åä¸€åˆ—
        r = rows[len(rows)-1]
        if r not in results:
            results[r] = 0
        results[r] += 1
    # è¿”å› ä¸€ä¸ªå­—å…¸
    return results

def entropy(rows):
    # è®¡ç®—ç†µ
    from math import log
    log2 = lambda x:log(x)/log(2)
    results = uniquecounts(rows)
    # å¼€å§‹è®¡ç®—ç†µçš„å€¼
    ent = 0.0
    for r in results.keys():
        p = float(results[r]/len(rows))
        ent = ent - p*log2(p)
    return ent
&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;å†³ç­–æ ‘çš„ç”Ÿæˆç®—æ³•ä»‹ç»&lt;/h2&gt;
&lt;p&gt;ã€€ã€€åˆ’åˆ†æ•°æ®é›†çš„æœ€å¤§åŸåˆ™æ˜¯ï¼šä½¿æ— åºçš„æ•°æ®å˜çš„æœ‰åºã€‚å¦‚æœä¸€ä¸ªè®­ç»ƒæ•°æ®ä¸­æœ‰20ä¸ªç‰¹å¾ï¼Œé‚£ä¹ˆé€‰å–å“ªä¸ªåšåˆ’åˆ†ä¾æ®ï¼Ÿè¿™å°±å¿…é¡»é‡‡ç”¨é‡åŒ–çš„æ–¹æ³•æ¥åˆ¤æ–­ï¼Œé‡åŒ–åˆ’åˆ†æ–¹æ³•æœ‰å¤šé‡ï¼Œå…¶ä¸­ä¸€é¡¹å°±æ˜¯â€œä¿¡æ¯è®ºåº¦é‡ä¿¡æ¯åˆ†ç±»â€ã€‚åŸºäºä¿¡æ¯è®ºçš„å†³ç­–æ ‘ç®—æ³•æœ‰ID3ã€CARTå’ŒC4.5ç­‰ç®—æ³•ï¼Œå…¶ä¸­C4.5å’ŒCARTä¸¤ç§ç®—æ³•ä»ID3ç®—æ³•ä¸­è¡ç”Ÿè€Œæ¥ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€å†³ç­–æ ‘çš„ç”Ÿæˆç®—æ³•ç”±å¾ˆå¤šå˜å½¢ï¼Œè¿™é‡Œç®€å•è¯´ä¸€ä¸‹å‡ ç§ç»å…¸çš„å®ç°ç®—æ³•ï¼šID3ç®—æ³•ï¼ŒC4.5ç®—æ³•å’ŒCARTç®—æ³•ã€‚è¿™äº›ç®—æ³•çš„ä¸»è¦åŒºåˆ«åœ¨äºåˆ†ç±»ç»“ç‚¹ç†µç‰¹å¾é€‰æ‹©çš„é€‰å–æ ‡å‡†ä¸åŒï¼Œä¸‹é¢äº†è§£ä¸€ä¸‹ç®—æ³•çš„å…·ä½“å®ç°è¿‡ç¨‹ã€‚&lt;/p&gt;

&lt;h3&gt;ä¸€ï¼šID3ç®—æ³•&lt;/h3&gt;
&lt;p&gt;ã€€ã€€ID3ç®—æ³•æ‰€é‡‡ç”¨çš„åº¦é‡æ ‡å‡†å°±æ˜¯æˆ‘ä»¬å‰é¢æåˆ°çš„â€œä¿¡æ¯å¢ç›Šâ€ã€‚å½“å±æ€§açš„ä¿¡æ¯å¢ç›Šæœ€å¤§æ—¶ï¼Œåˆ™æ„å‘³ç€ç”¨aå±æ€§åˆ’åˆ†ï¼Œå…¶æ‰€è·å¾—çš„â€œçº¯åº¦â€æå‡æœ€å¤§ï¼Œæˆ‘ä»¬æ‰€è¦åšçš„ï¼Œå°±æ˜¯æ‰¾åˆ°ä¿¡æ¯å¢ç›Šæœ€å¤§çš„å±æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ID3ç®—æ³•çš„æ ¸å¿ƒæ˜¯åœ¨å†³ç­–æ ‘çš„å„ä¸ªèŠ‚ç‚¹ä¸Šåº”ç”¨ä¿¡æ¯å¢ç›Šå‡†åˆ™è¿›è¡Œç‰¹å¾é€‰æ‹©ï¼Œå…·ä½“çš„åšæ³•æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä»æ ¹èŠ‚ç‚¹ä¸Šå¼€å§‹ï¼Œå¯¹ç»“ç‚¹è®¡ç®—æ‰€æœ‰å¯èƒ½ç‰¹å¾çš„ä¿¡æ¯å¢ç›Šï¼Œé€‰æ‹©ä¿¡æ¯å¢ç›Šæœ€å¤§çš„ç‰¹å¾ä½œä¸ºç»“ç‚¹çš„ç‰¹å¾ï¼Œå¹¶ç”±è¯¥ç‰¹å¾çš„ä¸åŒå–å€¼æ„å»ºå­èŠ‚ç‚¹ï¼›&lt;/li&gt;
&lt;li&gt;å¯¹äºå­èŠ‚ç‚¹é€’å½’çš„è°ƒç”¨ä»¥ä¸Šæ–¹æ³•ï¼Œæ„å»ºå†³ç­–æ ‘ï¼›&lt;/li&gt;
&lt;li&gt;ç›´åˆ°æ‰€æœ‰ç‰¹å¾çš„ä¿¡æ¯å¢ç›Šå‡å¾ˆå°æˆ–è€…æ²¡æœ‰ç‰¹å¾å¯é€‰æ‹©çš„æ—¶å€™ä¸ºæ­¢ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ID3ç®—æ³•å­˜åœ¨çš„ç¼ºç‚¹ï¼šÂ &lt;/p&gt;
&lt;p&gt;ã€€ã€€1. ID3ç®—æ³•åœ¨é€‰æ‹©æ ¹èŠ‚ç‚¹å’Œå†…éƒ¨èŠ‚ç‚¹ä¸­çš„åˆ†æ”¯å±æ€§æ—¶ï¼Œé‡‡ç”¨ä¿¡æ¯å¢ç›Šä½œä¸ºè¯„ä»·æ ‡å‡†ã€‚ä¿¡æ¯å¢ç›Šçš„ç¼ºç‚¹æ˜¯å€¾å‘äºé€‰æ‹©å–å€¼è¾ƒå¤šæ˜¯å±æ€§ï¼Œåœ¨æœ‰äº›æƒ…å†µä¸‹è¿™ç±»å±æ€§å¯èƒ½ä¸ä¼šæä¾›å¤ªå¤šæœ‰ä»·å€¼çš„ä¿¡æ¯ã€‚Â &lt;br/&gt;ã€€ã€€2. ID3ç®—æ³•åªèƒ½å¯¹æè¿°å±æ€§ä¸ºç¦»æ•£å‹å±æ€§çš„æ•°æ®é›†æ„é€ å†³ç­–æ ‘ ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä¸ºäº†æ”¹è¿›å†³ç­–æ ‘ï¼Œåˆæå‡ºäº†ID4.5ç®—æ³•å’ŒCARTç®—æ³•ã€‚&lt;/p&gt;
&lt;h3&gt;äºŒï¼šC4.5ç®—æ³•&lt;/h3&gt;
&lt;p&gt;ã€€ã€€C4.5ç®—æ³•ä¸ID3ç®—æ³•çš„åŒºåˆ«ä¸»è¦æ˜¯åœ¨äºå®ƒåœ¨ç”Ÿäº§å†³ç­–æ ‘çš„è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨ä¿¡æ¯å¢ç›Šæ¯”æ¥è¿›è¡Œç‰¹å¾é€‰æ‹©ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€å®é™…ä¸Šï¼Œä¿¡æ¯å¢ç›Šå‡†åˆ™å¯¹äºå¯å–å€¼æ•°ç›®è¾ƒå¤šçš„å±æ€§ä¼šæœ‰æ‰€åå¥½ï¼Œä¸ºäº†å‡å°‘è¿™ç§åå¥½å¯èƒ½å¸¦æ¥çš„ä¸åˆ©å½±å“ï¼ŒC4.5å†³ç­–æ ‘ç®—æ³•ä¸ç›´æ¥ä½¿ç”¨ä¿¡æ¯å¢ç›Šï¼Œè€Œæ˜¯ä½¿ç”¨â€œä¿¡æ¯å¢ç›Šç‡â€æ¥é€‰æ‹©æœ€ä¼˜åˆ’åˆ†å±æ€§ï¼Œä¿¡æ¯å¢ç›Šç‡å®šä¹‰ä¸ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1226410/201812/1226410-20181217162226825-1694255814.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€å…¶ä¸­ï¼Œåˆ†å­ä¸ºä¿¡æ¯å¢ç›Šï¼Œåˆ†æ¯ä¸ºå±æ€§Xçš„ç†µã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¢ç›Šç‡å‡†åˆ™å¯¹å¯å–å€¼æ•°ç›®è¾ƒå°‘çš„å±æ€§æœ‰æ‰€åå¥½ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€æ‰€ä»¥ä¸€èˆ¬è¿™æ ·é€‰å–åˆ’åˆ†å±æ€§ï¼šå…ˆä»å€™é€‰å±æ€§ä¸­æ‰¾åˆ°ä¿¡æ¯å¢ç›Šé«˜äºå¹³å‡æ°´å¹³çš„å±æ€§ï¼Œå†ä»ä¸­é€‰æ‹©å¢ç›Šç‡æœ€é«˜çš„ã€‚&lt;/p&gt;

&lt;h3&gt;ä¸‰ï¼šCARTç®—æ³•&lt;/h3&gt;
&lt;p&gt;ã€€ã€€åˆ†ç±»ä¸å›å½’æ ‘ï¼ˆclassification and regression tree,CARTï¼‰ä¸C4.5ç®—æ³•ä¸€æ ·ï¼Œç”±ID3ç®—æ³•æ¼”åŒ–è€Œæ¥ã€‚CARTå‡è®¾å†³ç­–æ ‘æ˜¯ä¸€ä¸ªäºŒå‰æ ‘ï¼Œå®ƒé€šè¿‡é€’å½’åœ°äºŒåˆ†æ¯ä¸ªç‰¹å¾ï¼Œå°†ç‰¹å¾ç©ºé—´åˆ’åˆ†ä¸ºæœ‰é™ä¸ªå•å…ƒï¼Œå¹¶åœ¨è¿™äº›å•å…ƒä¸Šç¡®å®šé¢„æµ‹çš„æ¦‚ç‡åˆ†å¸ƒã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€CARTç®—æ³•ä¸­ï¼Œå¯¹äºå›å½’æ ‘ï¼Œé‡‡ç”¨çš„æ˜¯å¹³æ–¹è¯¯å·®æœ€å°åŒ–å‡†åˆ™ï¼›å¯¹äºåˆ†ç±»æ ‘ï¼Œé‡‡ç”¨åŸºå°¼æŒ‡æ•°æœ€å°åŒ–å‡†åˆ™ã€‚&lt;/p&gt;
&lt;h4&gt;å¹³æ–¹è¯¯å·®æœ€å°åŒ–&lt;/h4&gt;
&lt;p&gt;ã€€ã€€å‡è®¾å·²å°†è¾“å…¥ç©ºé—´åˆ’åˆ†ä¸ºMä¸ªå•å…ƒR1ï¼ŒR2......Rmï¼Œå¹¶ä¸”åœ¨æ¯ä¸ªå•å…ƒRmä¸Šæœ‰ä¸€ä¸ªå›ºå®šçš„è¾“å‡ºå€¼Cmï¼Œäºæ˜¯å›å½’æ ‘å¯ä»¥è¡¨ç¤ºä¸ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1226410/201812/1226410-20181217150808236-1907585606.png&quot; alt=&quot;&quot; width=&quot;189&quot; height=&quot;70&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€å½“è¾“å…¥ç©ºé—´çš„åˆ’åˆ†ç¡®å®šæ—¶ï¼Œå¯ä»¥ç”¨å¹³æ–¹è¯¯å·®&lt;img src=&quot;https://img2018.cnblogs.com/blog/1226410/201812/1226410-20181217150852681-1868415561.png&quot; alt=&quot;&quot; width=&quot;98&quot; height=&quot;39&quot;/&gt;æ¥è¡¨ç¤ºå›å½’æ ‘å¯¹äºè®­ç»ƒæ•°æ®çš„é¢„æµ‹è¯¯å·®ã€‚&lt;/p&gt;
&lt;h4&gt;åŸºå°¼æŒ‡æ•°&lt;/h4&gt;
&lt;p&gt;ã€€ã€€åˆ†ç±»é—®é¢˜ä¸­ï¼Œå‡è®¾æœ‰Kä¸ªç±»åˆ«ï¼Œæ ·æœ¬ç‚¹å±äºç¬¬kç±»çš„æ¦‚ç‡ä¸ºpkï¼Œåˆ™æ¦‚ç‡åˆ†å¸ƒçš„åŸºå°¼æŒ‡æ•°å®šä¹‰ä¸ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1226410/201812/1226410-20181217151014946-496182411.png&quot; alt=&quot;&quot; width=&quot;309&quot; height=&quot;71&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1226410/201812/1226410-20181217151028068-1457675641.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h3&gt;Â å†³ç­–æ ‘çš„ä¼˜ç¼ºç‚¹åˆ†æ&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜ç‚¹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æ˜“äºç†è§£å’Œè§£é‡Šï¼Œç”šè‡³æ¯”çº¿æ€§å›å½’æ›´ç›´è§‚ï¼›&lt;/li&gt;
&lt;li&gt;ä¸äººç±»åšå†³ç­–æ€è€ƒçš„æ€ç»´ä¹ æƒ¯å¥‘åˆï¼›&lt;/li&gt;
&lt;li&gt;æ¨¡å‹å¯ä»¥é€šè¿‡æ ‘çš„å½¢å¼è¿›è¡Œå¯è§†åŒ–å±•ç¤ºï¼›&lt;/li&gt;
&lt;li&gt;å¯ä»¥ç›´æ¥å¤„ç†éæ•°å€¼å‹æ•°æ®ï¼Œä¸éœ€è¦è¿›è¡Œå“‘å˜é‡çš„è½¬æ¢ï¼Œç”šè‡³å¯ä»¥ç›´æ¥å¤„ç†å«æœ‰ç¼ºå¤±å€¼çš„æ•°æ®ï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;ç¼ºç‚¹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å¯¹äºæœ‰å¤§é‡æ•°å€¼å‹è¾“å…¥å’Œè¾“å‡ºçš„é—®é¢˜ï¼Œå†³ç­–æ ‘æœªå¿…æ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ï¼›&lt;/li&gt;
&lt;li&gt;ç‰¹åˆ«æ˜¯å½“æ•°å€¼å‹å˜é‡ä¹‹é—´å­˜åœ¨è®¸å¤šé”™ç»¼å¤æ‚çš„å…³ç³»ï¼Œå¦‚é‡‘èæ•°æ®åˆ†æï¼›&lt;/li&gt;
&lt;li&gt;å†³ç­–åˆ†ç±»çš„å› ç´ å–å†³äºæ›´å¤šå˜é‡çš„å¤æ‚ç»„åˆæ—¶ï¼›&lt;/li&gt;
&lt;li&gt;æ¨¡å‹ä¸å¤Ÿç¨³å¥ï¼ŒæŸä¸€ä¸ªèŠ‚ç‚¹çš„å°å°å˜åŒ–å¯èƒ½å¯¼è‡´æ•´ä¸ªæ ‘ä¼šæœ‰å¾ˆå¤§çš„ä¸åŒ&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æ¥ä¸‹æ¥ç”¨pythonä»£ç æ¥å®ç°ID3ç®—æ³•ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;73&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
from math import log
import operator

def calcShannonEnt(dataSet):  # è®¡ç®—æ•°æ®çš„ç†µ(entropy)
    numEntries=len(dataSet)  # æ•°æ®æ¡æ•°
    labelCounts={}
    for featVec in dataSet:
        currentLabel=featVec[-1] # æ¯è¡Œæ•°æ®çš„æœ€åä¸€ä¸ªå­—ï¼ˆç±»åˆ«ï¼‰
        if currentLabel not in labelCounts.keys():
            labelCounts[currentLabel]=0
        labelCounts[currentLabel]+=1  # ç»Ÿè®¡æœ‰å¤šå°‘ä¸ªç±»ä»¥åŠæ¯ä¸ªç±»çš„æ•°é‡
    shannonEnt=0
    for key in labelCounts:
        prob=float(labelCounts[key])/numEntries # è®¡ç®—å•ä¸ªç±»çš„ç†µå€¼
        shannonEnt-=prob*log(prob,2) # ç´¯åŠ æ¯ä¸ªç±»çš„ç†µå€¼
    return shannonEnt

def createDataSet1():    # åˆ›é€ ç¤ºä¾‹æ•°æ®
    dataSet = [['é•¿', 'ç²—', 'ç”·'],
               ['çŸ­', 'ç²—', 'ç”·'],
               ['çŸ­', 'ç²—', 'ç”·'],
               ['é•¿', 'ç»†', 'å¥³'],
               ['çŸ­', 'ç»†', 'å¥³'],
               ['çŸ­', 'ç²—', 'å¥³'],
               ['é•¿', 'ç²—', 'å¥³'],
               ['é•¿', 'ç²—', 'å¥³']]
    labels = ['å¤´å‘','å£°éŸ³']  #ä¸¤ä¸ªç‰¹å¾
    return dataSet,labels

def splitDataSet(dataSet,axis,value): # æŒ‰æŸä¸ªç‰¹å¾åˆ†ç±»åçš„æ•°æ®
    retDataSet=[]
    for featVec in dataSet:
        if featVec[axis]==value:
            reducedFeatVec =featVec[:axis]
            reducedFeatVec.extend(featVec[axis+1:])
            retDataSet.append(reducedFeatVec)
    return retDataSet

def chooseBestFeatureToSplit(dataSet):  # é€‰æ‹©æœ€ä¼˜çš„åˆ†ç±»ç‰¹å¾
    numFeatures = len(dataSet[0])-1
    baseEntropy = calcShannonEnt(dataSet)  # åŸå§‹çš„ç†µ
    bestInfoGain = 0
    bestFeature = -1
    for i in range(numFeatures):
        featList = [example[i] for example in dataSet]
        uniqueVals = set(featList)
        newEntropy = 0
        for value in uniqueVals:
            subDataSet = splitDataSet(dataSet,i,value)
            prob =len(subDataSet)/float(len(dataSet))
            newEntropy +=prob*calcShannonEnt(subDataSet)  # æŒ‰ç‰¹å¾åˆ†ç±»åçš„ç†µ
        infoGain = baseEntropy - newEntropy  # åŸå§‹ç†µä¸æŒ‰ç‰¹å¾åˆ†ç±»åçš„ç†µçš„å·®å€¼
        if (infoGain&amp;gt;bestInfoGain):   # è‹¥æŒ‰æŸç‰¹å¾åˆ’åˆ†åï¼Œç†µå€¼å‡å°‘çš„æœ€å¤§ï¼Œåˆ™æ¬¡ç‰¹å¾ä¸ºæœ€ä¼˜åˆ†ç±»ç‰¹å¾
            bestInfoGain=infoGain
            bestFeature = i
    return bestFeature

def majorityCnt(classList):    #æŒ‰åˆ†ç±»åç±»åˆ«æ•°é‡æ’åºï¼Œæ¯”å¦‚ï¼šæœ€ååˆ†ç±»ä¸º2ç”·1å¥³ï¼Œåˆ™åˆ¤å®šä¸ºç”·ï¼›
    classCount={}
    for vote in classList:
        if vote not in classCount.keys():
            classCount[vote]=0
        classCount[vote]+=1
    sortedClassCount = sorted(classCount.items(),key=operator.itemgetter(1),reverse=True)
    return sortedClassCount[0][0]

def createTree(dataSet,labels):
    classList=[example[-1] for example in dataSet]  # ç±»åˆ«ï¼šç”·æˆ–å¥³
    if classList.count(classList[0])==len(classList):
        return classList[0]
    if len(dataSet[0])==1:
        return majorityCnt(classList)
    bestFeat=chooseBestFeatureToSplit(dataSet) #é€‰æ‹©æœ€ä¼˜ç‰¹å¾
    bestFeatLabel=labels[bestFeat]
    myTree={bestFeatLabel:{}} #åˆ†ç±»ç»“æœä»¥å­—å…¸å½¢å¼ä¿å­˜
    del(labels[bestFeat])
    featValues=[example[bestFeat] for example in dataSet]
    uniqueVals=set(featValues)
    for value in uniqueVals:
        subLabels=labels[:]
        myTree[bestFeatLabel][value]=createTree(splitDataSet\
                            (dataSet,bestFeat,value),subLabels)
    return myTree


if __name__=='__main__':
    dataSet, labels=createDataSet1()  # åˆ›é€ ç¤ºåˆ—æ•°æ®
    print(createTree(dataSet, labels))  # è¾“å‡ºå†³ç­–æ ‘æ¨¡å‹ç»“æœ
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;è¾“å‡ºç»“æœä¸ºï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;34&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
{'å£°éŸ³': {'ç»†': 'å¥³', 'ç²—': {'å¤´å‘': {'çŸ­': 'ç”·', 'é•¿': 'å¥³'}}}}
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ã€€ã€€è¿™ä¸ªç»“æœçš„æ„æ€æ˜¯ï¼šé¦–å…ˆæŒ‰å£°éŸ³åˆ†ç±»ï¼Œå£°éŸ³ç»†ä¸ºå¥³ç”Ÿï¼›ç„¶åå†æŒ‰å¤´å‘åˆ†ç±»ï¼šå£°éŸ³ç²—ï¼Œå¤´å‘çŸ­ä¸ºç”·ç”Ÿï¼›å£°éŸ³ç²—ï¼Œå¤´å‘é•¿ä¸ºå¥³ç”Ÿã€‚Â &lt;br/&gt;ã€€ã€€è¿™ä¸ªç»“æœä¹Ÿæ­£æ˜¯åŒå­¦Bçš„ç»“æœã€‚Â &lt;br/&gt;ã€€ã€€è¡¥å……è¯´æ˜ï¼šåˆ¤å®šåˆ†ç±»ç»“æŸçš„ä¾æ®æ˜¯ï¼Œè‹¥æŒ‰æŸç‰¹å¾åˆ†ç±»åå‡ºç°äº†æœ€ç»ˆç±»ï¼ˆç”·æˆ–å¥³ï¼‰ï¼Œåˆ™åˆ¤å®šåˆ†ç±»ç»“æŸã€‚ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œåœ¨æ•°æ®æ¯”è¾ƒå¤§ï¼Œç‰¹å¾æ¯”è¾ƒå¤šçš„æƒ…å†µä¸‹ï¼Œå¾ˆå®¹æ˜“é€ æˆè¿‡æ‹Ÿåˆï¼Œäºæ˜¯éœ€è¿›è¡Œå†³ç­–æ ‘æå‰ªï¼Œä¸€èˆ¬æå‰ªæ–¹æ³•æ˜¯å½“æŒ‰æŸä¸€ç‰¹å¾åˆ†ç±»åçš„ç†µå°äºè®¾å®šå€¼æ—¶ï¼Œåœæ­¢åˆ†ç±»ã€‚&lt;/p&gt;


&lt;p&gt;å‚è€ƒï¼šÂ &lt;br/&gt;-Â &lt;a href=&quot;https://book.douban.com/subject/6962285/&quot; rel=&quot;nofollow&quot; target=&quot;_blank&quot;&gt;Machine Learning in Action&lt;/a&gt;Â &lt;br/&gt;-Â &lt;a href=&quot;https://book.douban.com/subject/10590856/&quot; rel=&quot;nofollow&quot; target=&quot;_blank&quot;&gt;ç»Ÿè®¡å­¦ä¹ æ–¹æ³•&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;https://zhuanlan.zhihu.com/p/26703300&lt;/p&gt;
&lt;pre name=&quot;code&quot; class=&quot;prettyprint&quot;&gt;
&lt;/pre&gt;


&lt;pre name=&quot;code&quot; class=&quot;prettyprint&quot;&gt;
&lt;/pre&gt;</description>
<pubDate>Tue, 18 Dec 2018 06:45:00 +0000</pubDate>
<dc:creator>æˆ˜äº‰çƒ­è¯š</dc:creator>
<og:description>åˆ†ç±»æŠ€æœ¯ï¼ˆæˆ–åˆ†ç±»æ³•ï¼‰æ˜¯ä¸€ç§æ ¹æ®è¾“å…¥æ•°æ®å»ºç«‹åˆ†ç±»æ¨¡å‹çš„ç³»ç»Ÿæ–¹æ³•ï¼Œåˆ†ç±»æ³•çš„ä¾‹å­åŒ…æ‹¬å†³ç­–åˆ†ç±»æ³•ï¼ŒåŸºäºè§„åˆ™çš„åˆ†ç±»æ³•ï¼Œç¥ç»ç½‘ç»œï¼Œæ”¯æŒå‘é‡æœºå’Œæœ´ç´ è´å¶æ–¯åˆ†ç±»æ³•ã€‚è¿™äº›æŠ€æœ¯éƒ½ä½¿ç”¨ä¸€ç§å­¦ä¹ ç®—æ³•ï¼ˆlearning alg</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/wj-1314/p/9428494.html</dc:identifier>
</item>
<item>
<title>HBaseä¹‹CFæŒä¹…åŒ–ç³»åˆ—(ç»­3â€”â€”å®Œç»“ç¯‡) - letsfly</title>
<link>http://www.cnblogs.com/letsfly/p/10135024.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/letsfly/p/10135024.html</guid>
<description>&lt;p&gt;ã€€ã€€ç›¸ä¿¡å¤§å®¶åœ¨çœ‹äº†è¯¥ç³»åˆ—çš„å‰ä¸¤ç¯‡æ–‡ç« å°±å·²ç»å¯¹å…¶ä¸­çš„æŒä¹…åŒ–æœ‰æ¯”è¾ƒæ·±å…¥çš„äº†è§£ã€‚ç›¸å¯¹è€Œè¨€ï¼Œæœ¬èŠ‚å†…å®¹åªæ˜¯å¯¹å‰ä¸¤èŠ‚çš„ä¸€ä¸ªå·©å›ºã€‚ä¸æŒä¹…åŒ–ç›¸å¯¹åº”çš„æ˜¯æ‰“å¼€æ–‡ä»¶å¹¶å°†å…¶å†…å®¹è¯»å…¥åˆ°å†…å­˜å˜é‡ä¸­ã€‚è€Œåœ¨æœ¬èŠ‚ï¼Œæˆ‘å°±æ¥ä»‹ç»è¿™ä¸€ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€æœ¬èŠ‚æˆ‘ä»æ–¹æ³•HStore.validateStoreFileå¼€å§‹åˆ†æã€‚åœ¨æœ¬èŠ‚çš„æœ«å°¾ï¼Œæˆ‘å°†ä¼šä¸ºå¤§å®¶å¸¦æ¥CFç›®å½•ä¸‹æŸä¸ªæ–‡ä»¶çš„æ–‡ä»¶ç»“æ„ã€‚ä¹Ÿç®—æ˜¯æœ¬ç³»åˆ—çš„ä¸€ä¸ªå®Œæ•´ç»“å°¾ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€åœ¨è¯¥æ–¹æ³•å†…éƒ¨è°ƒç”¨äº†æ–¹æ³•createStoreFileAndReaderã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚è¿™é‡Œé¦–å…ˆæ„é€ äº†StoreFileInfoã€‚åœ¨æ„é€ StoreFileInfoæ—¶ï¼Œç”±äºæˆ‘ä»¬è¿™é‡Œçš„pathæ—¢éHFileLinkï¼Œäº¦éHStoreFile referenceï¼Œä»…ä»…æ˜¯HFileï¼Œå› æ­¤ï¼Œå…¶æˆå‘˜å˜é‡linkä¸referenceå€¼éƒ½ä¸ºnullã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚åœ¨æ„é€ äº†StoreFileInfoåï¼Œå°†å…¶ä½œä¸ºå…¥å‚ï¼Œè°ƒç”¨äº†åŒåæ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€1.æ„é€ äº†HStoreFileï¼Œåœ¨æ„é€ HStoreFileä¸­ï¼Œå…¥å‚æœ‰fileInfo&lt;/p&gt;
&lt;div readability=&quot;12&quot;&gt;ã€€ã€€2.è°ƒç”¨äº†storeFile.initReaderï¼Œè¯¥æ–¹æ³•æ¯”è¾ƒå¤æ‚ï¼Œä¹Ÿæ˜¯æœ¬èŠ‚çš„é‡ç‚¹ã€‚æˆ‘åœ¨åé¢å°†ä¼šè¯¦ç»†ä»‹ç»ã€‚&lt;img src=&quot;https://img2018.cnblogs.com/blog/1365945/201812/1365945-20181218083046725-796213726.png&quot; alt=&quot;&quot;/&gt;ã€€ã€€ä¸‹é¢ï¼Œè®©æˆ‘ä»¬æ¥åˆ°HStoreFile.initReaderã€‚åœ¨è¯¥æ–¹æ³•ä¸­ä»…ä»…è°ƒç”¨äº†æ–¹æ³•openã€‚æ¥ç€ï¼Œåœ¨openæ–¹æ³•å†…éƒ¨ï¼Œè°ƒç”¨äº†fileInfo.openï¼Œè¿™é‡Œçš„fileInfoå®é™…ç±»å‹ä¸ºStoreFileInfoï¼Œä¹Ÿå°±æ˜¯ä¸Šå›¾æ‰€ä»‹ç»çš„ã€‚&lt;/div&gt;
&lt;p&gt;ã€€ã€€æ¥ä¸‹æ¥è®©æˆ‘ä»¬æ¥åˆ°StoreFileInfo.openï¼Œè¯¥æ–¹æ³•æ¯”è¾ƒé•¿ï¼Œä¸ºäº†çªå‡ºé‡ç‚¹ï¼Œæˆ‘åªå°†æ–¹æ³•ä¸­æ¯”è¾ƒé‡è¦çš„åœ°æ–¹æˆªå›¾å¹¶åšäº†ç®€å•æ ‡ç¤ºã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€1.è¿™é‡Œæ„é€ FSDataInputStreamWrapperç”¨æ¥åˆå§‹åŒ–å˜é‡inã€‚åœ¨åé¢ï¼Œæˆ‘ä¼šç®€å•ä»‹ç»ä¸€ä¸‹FSDataInputStreamWrapperçš„æ„é€ æ–¹æ³•ã€‚&lt;/p&gt;
&lt;div readability=&quot;8&quot;&gt;ã€€ã€€2.å°†åˆå§‹åŒ–å¥½çš„inä½œä¸ºå…¥å‚ç”¨æ¥æ„é€ StoreFileReaderï¼Œå¹¶å°†å…¶èµ‹ç»™å˜é‡readerï¼Œç„¶åè¿”å›ã€‚è¿™é‡Œæ˜¯é‡ç‚¹ï¼Œæˆ‘åœ¨åé¢ä¼šè¯¦ç»†ä»‹ç»ã€‚&lt;img src=&quot;https://img2018.cnblogs.com/blog/1365945/201812/1365945-20181218083104060-1143461632.png&quot; alt=&quot;&quot;/&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€é¦–å…ˆï¼Œè®©æˆ‘ä»¬æ¥åˆ°FSDataInputStreamWrapperçš„æ„é€ æ–¹æ³•ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€1.è¿™é‡Œé¦–å…ˆåˆ¤æ–­å…¥å‚fsç±»å‹æ˜¯å¦ä¸ºHFileSystemï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™ä½¿ç”¨HFileSystemå°†å…¶å°è£…å¹¶ç”¨æ¥åˆå§‹åŒ–æˆå‘˜å˜é‡hfsã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€2.è¿™é‡Œçš„å…¥å‚linkå€¼ä¸ºnullï¼Œå› æ­¤ï¼Œå…¶è°ƒç”¨hfs.openï¼Œè·å¾—å…¥å‚pathçš„è¾“å…¥æµã€‚&lt;/p&gt;
&lt;div readability=&quot;8&quot;&gt;ã€€ã€€ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»æ‹¿åˆ°äº†æŒ‡å®šæ–‡ä»¶çš„è¾“å…¥æµï¼Œä¹Ÿå°±æ˜¯æˆ‘åœ¨ä¸Šä¸€èŠ‚æåˆ°çš„æŒä¹…åŒ–çš„æ–‡ä»¶ã€‚&lt;img src=&quot;https://img2018.cnblogs.com/blog/1365945/201812/1365945-20181218083128628-394874149.png&quot; alt=&quot;&quot;/&gt;&lt;/div&gt;
&lt;div readability=&quot;8&quot;&gt;ã€€ã€€æ¥ä¸‹æ¥è®©æˆ‘ä»¬æ¥åˆ°StoreFileReaderçš„æ„é€ æ–¹æ³•ä¸­ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¿™é‡Œè°ƒç”¨äº†HFile.createReaderã€‚è¯¥æ–¹æ³•é—´æ¥è°ƒç”¨äº†æ–¹æ³•openReaderã€‚&lt;img src=&quot;https://img2018.cnblogs.com/blog/1365945/201812/1365945-20181218083201720-1269032325.png&quot; alt=&quot;&quot;/&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€è®©æˆ‘ä»¬æ¥åˆ°æ–¹æ³•openReaderï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€1.è°ƒç”¨FixedFileTrailer.readFromStreamã€‚è¿™é‡Œé¦–å…ˆè°ƒç”¨fsdis.getStreamè·å¾—æˆ‘ä»¬åœ¨ä¸Šé¢æ‰“å¼€çš„è¾“å…¥æµã€‚ç„¶åè°ƒç”¨FixedFileTrailer.readFromStreamï¼Œå°†è¾“å…¥æµä¸­çš„å†…å®¹ç”¨æ¥æ„é€ FFTï¼Œä¹Ÿå°±æ˜¯FixedFileTrailerã€‚è¯¥æ–¹æ³•æ¯”è¾ƒé‡è¦ï¼Œæˆ‘å°†åœ¨åé¢è¯¦ç»†åˆ†æã€‚&lt;/p&gt;
&lt;div readability=&quot;9&quot;&gt;ã€€ã€€2.ç”±äºæˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯3.0ç‰ˆæœ¬ï¼Œå› æ­¤ï¼Œæ¥ä¸‹æ¥æ„é€ äº†HFileReaderImplã€‚è¯¥æ–¹æ³•å°†æˆ‘åœ¨ä¸Šä¸€èŠ‚æåˆ°çš„ç´¢å¼•ä¿¡æ¯ç­‰ç­‰éƒ½ç”¨æ¥åˆå§‹åŒ–HFileReaderImplçš„æˆå‘˜å˜é‡ï¼Œä¹Ÿæ˜¯æˆ‘åœ¨æœ¬èŠ‚ä¸»è¦è®²è§£çš„å†…å®¹ã€‚&lt;img src=&quot;https://img2018.cnblogs.com/blog/1365945/201812/1365945-20181218083229873-1159631029.png&quot; alt=&quot;&quot;/&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æˆ‘ä»¬é¦–å…ˆæ¥åˆ°FixedFileTrailer.readFromStreamï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚è¿™é‡Œå®ç°äº†å°†è¾“å…¥æµä¸­çš„ä¿¡æ¯ç”¨æ¥æ„é€ FixedFileTrailerï¼Œä½œä¸ºæœ¬èŠ‚çš„ç¬¬ä¸€ä¸ªå†…å­˜åŒ–ç±»å‹ï¼Œè¿˜æ˜¯å€¼å¾—è¯¦ç»†äº†è§£çš„ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€åœ¨ä»‹ç»ä¸‹å›¾çš„æ ‡ç¤ºä¹‹å‰ï¼Œæˆ‘å…ˆä»‹ç»ä¸€ä¸‹FixedFileTrailerçš„åŠŸèƒ½ï¼Œä»¥ä¾¿å¤§å®¶èƒ½å¤Ÿæ›´å¥½çš„ç†è§£åé¢çš„å†…å®¹ã€‚å…¶å®æ ¹æ®å…¶åç§°æˆ‘ä»¬å°±å¯ä»¥çŒœä¸ªå¤§æ¦‚ï¼ŒFixedFileTrailer ä¹Ÿå°±æ˜¯ fixed trailer of a fileã€‚å°±æ˜¯æ–‡ä»¶ä¸­çš„å›ºå®šé•¿åº¦çš„ï¼Œç”¨æ¥å­˜æ”¾æ–‡ä»¶åŸºæœ¬å…ƒæ•°æ®çš„ä¿¡æ¯ã€‚trailerç¡¬è¯‘è¿‡æ¥é¢„å‘Šç‰‡çš„æ„æ€ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºæ–‡ä»¶ä¿¡æ¯çš„é¢„çŸ¥ã€‚ç”±äºæˆ‘è¿™é‡Œæ˜¯3.0çš„ç‰ˆæœ¬ï¼Œè¿™é‡Œçš„MAX_TRAILER_SIZEä¹Ÿå°±æ˜¯å›ºå®šé•¿åº¦4096ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€1.é€šè¿‡å…¬å¼seekPoint = fileSize - bufferSizeï¼Œè·å¾—äº†æ–‡ä»¶ä¸­é™¤å»å›ºå®šé•¿åº¦åçš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯éFFTçš„é•¿åº¦ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€2.è°ƒç”¨HFileUtil.seekOnMultipleSourceså°†istreamä¸­çš„posæŒ‡å‘seekPointï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä»è¿™é‡Œå¼€å§‹è¯»ï¼Œè¯»åˆ°çš„å†…å®¹éƒ½æŒä¹…åŒ–çš„FFTçš„ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€3.åˆ†é…ç©ºé—´ï¼Œå¹¶ä¸”è°ƒç”¨istream.readFullyå°†å…¶ä¸­çš„ä¿¡æ¯éƒ½å†™åˆ°åˆšåˆšåˆ†é…çš„bufä¸­ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€4.è°ƒç”¨buf.positionï¼Œå°†å…¶poså®šä½åˆ°æœ€åå››ä¸ªå­—èŠ‚ï¼Œä»¥ä¾¿è§£æå…¶majorVersionä¸minorVersion&lt;/p&gt;
&lt;p&gt;ã€€ã€€5.å°†è§£æåçš„majorVersionä¸minorVersionç”¨æ¥æ„é€ FixedFileTrailer&lt;/p&gt;
&lt;p&gt;ã€€ã€€6.è°ƒç”¨fft.deserializeï¼Œè§£æbufä¸­çš„å†…å®¹ï¼Œå¹¶ä¸”å°†å…¶ä¸­çš„å†…å®¹åˆå§‹åŒ–FixedFileTrailerçš„æˆå‘˜å˜é‡ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€è¿™é‡Œå¤§å®¶å¯èƒ½å¯¹ä¸‹é¢çš„ä¸€ä¸ªå…¬å¼æ¯”è¾ƒæ¨¡ç³Šbuf.arrayOffset() + bufferSize - trailerSizeã€‚ç”±äºæˆ‘è¿™æ˜¯3.0çš„ç‰ˆæœ¬ï¼Œæˆ‘å°±å½“å‰ç‰ˆæœ¬ä¸ºå¤§å®¶ç®€å•ä»‹ç»ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;div readability=&quot;10&quot;&gt;ã€€ã€€ä»ByteBuffer.allocateçš„è°ƒç”¨åˆå§‹åŒ–bufï¼Œä¸€ç›´åˆ°åé¢fft.deserializeçš„è°ƒç”¨ï¼Œè¿™é‡Œçš„buf.arrayOffset() éƒ½æ²¡æœ‰æ”¹å˜ï¼Œä¸€ç›´æ˜¯0ã€‚å¦å¤–ï¼Œä¸Šé¢bufferSizeåˆå§‹åŒ–æ—¶ä¸ºMAX_TRAILER_SIZE = 4096ï¼Œè€Œä¸”é€šè¿‡è°ƒç”¨getTrailerSizeè¿”å›çš„trailerSize = 4096ï¼Œæ‰€ä»¥ï¼Œä¸Šé¢çš„å…¬å¼å…¶å®ä¸º0ã€‚&lt;img src=&quot;https://img2018.cnblogs.com/blog/1365945/201812/1365945-20181218083447362-1334156888.png&quot; alt=&quot;&quot;/&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æ¥åˆ°FixedFileTrailer.deserializeï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€1.è°ƒç”¨BlockType.TRAILER.readAndCheckï¼Œå°†8ä¸ªå­—èŠ‚çš„magicå€¼è¯»å…¥åˆ°8ä¸ªå­—èŠ‚çš„bufä¸­ï¼Œå¹¶è¿›è¡Œæ ¡éªŒ&lt;/p&gt;
&lt;p&gt;ã€€ã€€2.ç„¶åè°ƒç”¨deserializeFromPBï¼Œå°†PBåºåˆ—åŒ–åçš„ä¿¡æ¯ååºåˆ—åŒ–ï¼Œç½®äºç›¸åº”çš„æˆå‘˜å˜é‡ä¸­ï¼Œå¹¶ä¸”ï¼Œå°†è¾“å…¥æµä¸­çš„posç½®äºgetTrailerSize() - NOT_PB_SIZE - size(è¿™é‡Œæˆ‘åœ¨ä¸Šä¸€èŠ‚å†…å®¹æåˆ°è¿‡ï¼Œè¿™ä¸€èŠ‚å°±ä¸èµ˜è¿°äº†)ã€‚&lt;/p&gt;
&lt;div readability=&quot;7&quot;&gt;ã€€ã€€3.è¯»å–æœ€å4ä¸ªå­—èŠ‚çš„versionä¿¡æ¯ï¼Œå¹¶ä¸”è¿›è¡Œæ ¡éªŒå¯¹æ¯”ã€‚&lt;img src=&quot;https://img2018.cnblogs.com/blog/1365945/201812/1365945-20181218083644447-1178181862.png&quot; alt=&quot;&quot;/&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€å…³äºæ–¹æ³•deserializeFromPBï¼Œè™½ç„¶æ¯”è¾ƒç®€å•ï¼Œä¸è¿‡ï¼Œæˆ‘åœ¨è¿™é‡Œè¿˜æ˜¯ç®€å•ä»‹ç»ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€1.é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ„è¯†åˆ°ï¼Œè¿™é‡Œçš„å…¥å‚inputStreamåœ¨ä¸Šé¢å·²ç»å°†magicä¿¡æ¯è¯»å‡ºï¼Œå› æ­¤ç›¸æ¯”ä¸€å¼€å§‹ï¼Œè¿™é‡Œçš„inputStream.availableå°‘äº†8ä¸ªå­—èŠ‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€2.ç„¶åè°ƒç”¨HFileProtos.FileTrailerProto.PARSER.parseDelimitedFromå°†inputStreamä¸­çš„å†…å®¹ååºåˆ—åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€3.å…¬å¼getTrailerSize() - NOT_PB_SIZE - sizeæ¯”è¾ƒè´¹è§£ã€‚æˆ‘æ¥ä¸ºå¤§å®¶ä¸€ä¸€è§£æã€‚é¦–å…ˆgetTrailerSizeè¿”å›4096ï¼Œç„¶åNOT_PB_SIZE = 12ï¼Œå†ç„¶åsize = 4096 - 8 - FileTrailerProto.sizeã€‚é¦–å…ˆï¼ŒinputStream.pos = 8ï¼Œstart = 4096 - 8ã€‚ç„¶åè°ƒç”¨æ–¹æ³•HFileProtos.FileTrailerProto.PARSERåï¼ŒinputStream.pos = 8 + FileTrailerProto.sizeï¼Œsize = FileTrailerProto.sizeã€‚&lt;/p&gt;
&lt;div readability=&quot;10&quot;&gt;ã€€ã€€è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°pos + 4096 - 12 - FileTrailerProto.size = 8 + FileTrailerProto.size + 4096 - 12 - FileTrailerProto.size = 4096 - 12 + 8 = 4092ã€‚ä¹Ÿå°±æ˜¯è¯´è°ƒç”¨å®Œæ–¹æ³•inputStream.skipåï¼ŒinputStrem.pos = 4092ã€‚è¿™æ ·ï¼Œä¹Ÿå°±è§£é‡Šäº†ä¸Šå›¾ä¸­è°ƒç”¨inputStream.readIntä¸­ï¼Œä¸ºä»€ä¹ˆè¯»å–åˆ°çš„æ˜¯versionã€‚&lt;img src=&quot;https://img2018.cnblogs.com/blog/1365945/201812/1365945-20181218083704714-1196271644.png&quot; alt=&quot;&quot;/&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€ä»‹ç»å®ŒFFTï¼Œè®©æˆ‘ä»¬æ¥åˆ°æ„é€ æ–¹æ³•HFileReaderImplï¼Œè¿™é‡Œæ˜¯æœ¬èŠ‚çš„é‡ä¸­ä¹‹é‡ï¼Œå¸Œæœ›å¤§å®¶è€å¿ƒçœ‹å®Œã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚HFileReaderImplçš„æ„é€ æ–¹æ³•æ¯”è¾ƒé•¿ï¼Œä½†æ˜¯å…³é”®æµç¨‹å¹¶ä¸å¤šï¼Œæ‰€ä»¥å¤§å®¶æ²¡æœ‰å¿…è¦æ…Œã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€è¿™é‡Œæˆ‘å°±æ¯”è¾ƒå…³é”®çš„è°ƒç”¨åšä¸€ä¸ªç®€ä»‹ï¼Œå…³äºå…¶ä¸­æ¯”è¾ƒé‡è¦çš„æµç¨‹ï¼Œæˆ‘å°†åœ¨åé¢ä¸€ä¸€è®²è§£ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€1.è°ƒç”¨HFileBlock.FSReaderImplæ„é€ æ–¹æ³•åˆå§‹åŒ–æˆå‘˜å˜é‡fsBlockReaderï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„å…¥å‚æœ‰fsdisã€‚è¿™é‡Œå°†fsdis.streamå…³é—­ï¼Œé‡æ–°æ‰“å¼€æµï¼Œå¹¶ç”¨æ¥åˆå§‹åŒ–å…¶streamNoFsChecksumã€‚è¿™é‡Œæˆ‘ä¼šåœ¨åé¢çš„æµç¨‹ä¸­è¯¦ç»†è®²åˆ°ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€2.åˆ†åˆ«åˆå§‹åŒ–æˆå‘˜å˜é‡dataBlockIndexReaderä¸metaBlockIndexReaderï¼Œè¿™é‡Œåªæ˜¯è°ƒç”¨äº†å…¶æ„é€ æ–¹æ³•ï¼Œå¹¶æ²¡æœ‰å¯¹å…¶ä¸­çš„æˆå‘˜å˜é‡è¿›è¡Œåˆå§‹åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€3.è°ƒç”¨fsBlockReader.blockRangeæ„é€ äº†ç”¨äºè¿­ä»£è·å–ä¿¡æ¯çš„HFileBlock.BlockIteratorï¼Œæ–¹ä¾¿åé¢ä»æµä¸­è·å–ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€4.è°ƒç”¨blockIter.nextBlockWithBlockTypeå°†ä»æ–‡ä»¶ä¸­è¯»å–åˆ°çš„ä¿¡æ¯å°è£…åˆ°HFileBlockï¼Œç„¶åè°ƒç”¨dataBlockIndexReader.readMultiLevelIndexRootå°†å…¶ä¸­çš„ä¿¡æ¯è¯»å–å‡ºæ¥ç”¨äºåˆå§‹åŒ–å…¶æˆå‘˜å˜é‡ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€5.è°ƒç”¨metaBlockIndexReader.readRootIndexï¼Œä¸ä¸Šé¢çš„å¤„ç†æµç¨‹ç±»ä¼¼ã€‚&lt;/p&gt;
&lt;div readability=&quot;7&quot;&gt;ã€€ã€€6.è°ƒç”¨fileInfo.readå°†æ–‡ä»¶ä¸­çš„ä¿¡æ¯ç”¨æ¥åˆå§‹åŒ–fileInfoçš„æˆå‘˜å˜é‡&lt;img src=&quot;https://img2018.cnblogs.com/blog/1365945/201812/1365945-20181218141151936-252116174.png&quot; alt=&quot;&quot;/&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€è¿™é‡Œï¼Œæˆ‘é¦–å…ˆä»‹ç»HFileBlock.FSReaderImplã€‚é¦–å…ˆè®©æˆ‘ä»¬æ¥åˆ°FSReaderImplçš„æ„é€ æ–¹æ³•ä¸­ã€‚è¿™é‡Œæˆ‘å¯èƒ½ä»‹ç»çš„æ¯”è¾ƒå•°å—¦ï¼Œä½†ä¸ºäº†è®²è§£çš„å°½å¯èƒ½æ¸…æ¥šï¼Œè¿˜è¯·å¤§å®¶è°…è§£ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€1.å°†å…¥å‚streamèµ‹ç»™æˆå‘˜å˜é‡streamWrapper&lt;/p&gt;
&lt;div readability=&quot;8&quot;&gt;ã€€ã€€2.è°ƒç”¨streamWrapper.prepareForBlockReaderï¼Œä¹Ÿå°±æ˜¯FSDataInputStreamWrapper.prepareForBlockReaderã€‚&lt;img src=&quot;https://img2018.cnblogs.com/blog/1365945/201812/1365945-20181218141225444-984924098.png&quot; alt=&quot;&quot;/&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æ¥åˆ°FSDataInputStreamWrapper.prepareForBlockReaderï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚æˆ‘åœ¨ä¸‹å›¾åšäº†ä¸¤ä¸ªæ ‡ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€1.è°ƒç”¨fsNc.openï¼Œå°†æ–‡ä»¶é‡æ–°æ‰“å¼€ï¼Œå¹¶èµ‹ç»™æˆå‘˜å˜é‡streamNoFsChecksum&lt;/p&gt;
&lt;p&gt;ã€€ã€€2.å°†ä¹‹å‰ä½¿ç”¨çš„streamæµå…³é—­ã€‚&lt;/p&gt;
&lt;div readability=&quot;9&quot;&gt;ã€€ã€€ä¹Ÿå°±æ˜¯è¯´ï¼Œç”±äºæˆ‘ä»¬åœ¨è¿™é‡Œä¸ä¾èµ–hdfsçš„checksumï¼Œè€Œä¾èµ–hbaseè‡ªå·±è®¡ç®—å¡«å……çš„checksumï¼Œå› æ­¤ï¼Œå…¶æˆå‘˜å˜é‡streamNoFsChecksumå¾—ä»¥åˆå§‹åŒ–ã€‚è¿™é‡Œä¹Ÿå°±æ˜¯è¯´ï¼Œä»è¿™é‡Œä»¥åçš„æµç¨‹æ‰€è¦è°ƒç”¨çš„æœ‰streamæ›´æ¢ä¸ºstreamNoFsChecksumã€‚&lt;img src=&quot;https://img2018.cnblogs.com/blog/1365945/201812/1365945-20181218141250635-534888066.png&quot; alt=&quot;&quot;/&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æ–¹æ³•blockIter.nextBlockWithBlockTypeï¼Œä¹Ÿå°±æ˜¯HFileBlock.BlockIterator.nextBlockWithBlockTypeã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€é¦–å…ˆè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æ–¹æ³•fsBlockReader.blockRangeã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€1.è¿™é‡Œå°†å…¥å‚ä¸­çš„ä¸¤ä¸ªå€¼éƒ½ä¿å­˜åœ¨äº†åŒ¿åç±»ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€2.æ–¹æ³•nextBlockWithBlockTypeä¸»è¦è°ƒç”¨äº†æ–¹æ³•nextBlock&lt;/p&gt;
&lt;p&gt;ã€€ã€€3.æ–¹æ³•nextBlockè°ƒç”¨readBlockDataä»ä¸Šé¢æ‰“å¼€çš„è¾“å…¥æµä¸­è¯»å–æ•°æ®å¹¶ä¸”å°†å…¶å°è£…åˆ°HFileBlock&lt;/p&gt;
&lt;p&gt;ã€€ã€€4.è®°å½•åç§»é‡ä¸é•¿åº¦&lt;/p&gt;
&lt;div readability=&quot;8&quot;&gt;ã€€ã€€ç„¶åï¼Œæˆ‘ä»¬å¤§æ¦‚å°±æ˜ç™½äº†HFileBlock.BlockIterator.nextBlockWithBlockTypeçš„å¤§è‡´è°ƒç”¨æµç¨‹ã€‚è™½ç„¶å…¶å…³é”®æ–¹æ³•readBlockDataçš„è°ƒç”¨æˆ‘ä»¬è¿˜æ²¡æœ‰è®²åˆ°ã€‚&lt;img src=&quot;https://img2018.cnblogs.com/blog/1365945/201812/1365945-20181218141319984-439953148.png&quot; alt=&quot;&quot;/&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€åœ¨æ–¹æ³•readBlockDataæ–¹æ³•ä¸­ï¼Œæ¯”è¾ƒé‡è¦çš„åªæ˜¯è°ƒç”¨äº†æ–¹æ³•readBlockDataInternalï¼Œå› æ­¤ï¼Œæˆ‘åœ¨è¿™é‡Œå°±ä¸è´´æ–¹æ³•readBlockDataçš„å›¾ã€‚è€Œä¸“æ³¨äºæœ¬èŠ‚ä¸­æœ€ä¸ºé‡è¦çš„æ–¹æ³•readBlockDataInternalã€‚å¤§å®¶çœ‹äº†è¯¥æ–¹æ³•å¯èƒ½ä¼šè¢«å“åˆ°ï¼Œæ²¡æœ‰å…³ç³»ã€‚æˆ‘ä¼šä¸ºå¤§å®¶ä¸€ä¸€è®²è§£ã€‚åªè¦å¤§å®¶è€å¿ƒçœ‹ä¸‹å»ï¼Œå°±ä¼šå‘ç°ï¼Œå…¶å†…å®¹å¹¶ä¸éš¾ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€1.è°ƒç”¨æ–¹æ³•getCachedHeaderã€‚ç”±äºè¿™é‡Œçš„æ˜¯ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼Œå› æ­¤ï¼Œè¿™é‡Œè¿”å›çš„å€¼ä¸ºnullã€‚è‡³äºå…¶ä¸­çš„æµç¨‹ï¼Œæˆ‘ä¼šåœ¨åé¢ä¸ºå¤§å®¶è¯¦ç»†ä»‹ç»ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€2.åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™å…¥å‚onDiskSizeWithHeaderL = -1ã€‚ä¹Ÿå°±æ˜¯è¯´onDiskSizeWithHeader = -1ã€‚å› æ­¤è¿™é‡Œçš„åˆ¤æ–­onDiskSizeWithHeader &amp;lt;= 0 ä¸ºtrueã€‚å…¶ä»£ç å—ä¸­çš„é€»è¾‘ä¹Ÿå¾—ä»¥æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€æˆ‘åœ¨è¿™é‡Œå°±å…¶ä»£ç å—ä¸­çš„é€»è¾‘ç®€å•æè¿°ä¸€ä¸‹ï¼Œè‡³äºå…¶ä¸­æ¯”è¾ƒé‡è¦çš„æ–¹æ³•ï¼Œæˆ‘å°†æ”¾åœ¨åé¢æ¥è®²è§£ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€è¿™é‡Œé¦–å…ˆè°ƒç”¨ByteBuffer.allocateåˆ†é…äº†33ä¸ªå­—èŠ‚ã€‚å› ä¸ºé»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨çš„æ˜¯å«checksumçš„headerã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€æ¥ä¸‹æ¥è°ƒç”¨readAtOffsetã€‚è¿™é‡Œå°†å…¥å‚isæŒ‡å®šåç§»é‡offseté•¿åº¦hdrSizeå†™å…¥åˆ°headerBuf.arrayä¸­ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ç„¶åï¼Œè°ƒç”¨getOnDiskSizeWithHeaderè·å¾—å½“å‰è¦è¯»å–çš„å—çš„å¤§å°ï¼Œå«headerä¸checksumã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€3.åˆ†é…onDiskSizeWithHeader + hdrSizeé•¿åº¦ä¸ªå­—èŠ‚ç”¨æ¥å­˜æ”¾å½“å‰blockä¸ä¸‹ä¸€ä¸ªheaderï¼Œèµ‹ç»™å˜é‡onDiskBlockã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€4.æ¥ç€è°ƒç”¨æ–¹æ³•readAtOffsetï¼Œè¿™é‡Œæ˜¯å°†å½“å‰blockä¸ä¸‹ä¸€ä¸ªheaderå†™å…¥åˆ°onDiskBlockï¼Œå…³äºå…¶å…¥å‚ï¼Œç”±äºä¸Šé¢å·²ç»æåˆ°è¿‡ï¼Œæˆ‘è¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚è¿™é‡Œçš„è¿”å›å€¼ä¸ºä¸‹ä¸€ä¸ªblockå—æ‰€å ç”¨çš„å¤§å°ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€5.ç„¶åè°ƒç”¨System.arraycopyå°†æˆ‘ä»¬ç¬¬ä¸€æ¬¡è°ƒç”¨æ–¹æ³•readAtOffsetè¯»åˆ°çš„ä¿¡æ¯å†™å…¥åˆ°å˜é‡onDiskBlockä¸­ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€6.è°ƒç”¨æ–¹æ³•ByteBuffer.wrapå°†å˜é‡onDiskBlockä¸­çš„ä¿¡æ¯å°è£…ä¸ºByteBufferç±»å‹ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€7.å°†åˆšåˆšåˆå§‹åŒ–çš„onDiskBlockByteBufferä½œä¸ºå…¥å‚ï¼Œç”¨æ¥æ„é€ HFileBlockï¼Œæœ€åç”¨äºè¿”å›ã€‚&lt;/p&gt;
&lt;div readability=&quot;7&quot;&gt;ã€€ã€€8.è°ƒç”¨cacheNextBlockHeaderç¼“å­˜ä¸‹ä¸€ä¸ªblockçš„headerã€‚&lt;img src=&quot;https://img2018.cnblogs.com/blog/1365945/201812/1365945-20181218141408086-1452349575.png&quot; alt=&quot;&quot;/&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€è¿™é‡Œæˆ‘ä»¬é¦–å…ˆæ¥ä»‹ç»æ–¹æ³•readAtOffsetã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒé•¿ï¼Œæˆ‘åªæˆªå–å…¶ä¸­æ¯”è¾ƒå…³é”®çš„éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€1.è°ƒç”¨HFileUtil.seekOnMultipleSourcesï¼Œå…¶å†…éƒ¨è°ƒç”¨äº†istream.seekå°†å½“å‰istream.poså€¼ä¸ºå…¥å‚fileOffsetã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€2.è°ƒç”¨IOUtils.readFullyå°†istream.posèµ·ï¼Œé•¿åº¦ä¸ºsizeçš„æ•°æ®copyåˆ°destä¸­ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€3.è°ƒç”¨readWithExtra(è¯¥æ–¹æ³•ä¸ä¸Šé¢çš„æ–¹æ³•ä¸ä¼šåŒæ—¶è°ƒç”¨ï¼Œæˆ‘è¿™é‡Œåªæ˜¯å°†äºŒè€…æ”¾åœ¨äº†ä¸€èµ·è®²è§£)ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€å¦‚æœè¯¥æ–¹æ³•å°†é•¿åº¦ä¸ºsize + hdrSizeå…¨éƒ¨å†™å…¥åˆ°äº†destï¼Œåˆ™è¿”å›å€¼ä¸ºtrueã€‚å¦åˆ™ï¼Œè¿”å›falseã€‚&lt;/p&gt;
&lt;div readability=&quot;9&quot;&gt;ã€€ã€€4.è°ƒç”¨Bytes.toInt(dest, destOffset + size + BlockType.MAGIC_LENGTH) + hdrSizeè·å–ä¸‹ä¸€ä¸ªblocké•¿åº¦ã€‚&lt;img src=&quot;https://img2018.cnblogs.com/blog/1365945/201812/1365945-20181218141442066-714223563.png&quot; alt=&quot;&quot;/&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æ¥ä¸‹æ¥è®©æˆ‘ä»¬æ¥åˆ°HFileBlockçš„æ„é€ æ–¹æ³•ä¸­ã€‚è¿™é‡Œè™½ç„¶ä¸æ˜¯å¾ˆéš¾ï¼Œå´ä¹Ÿæ˜¯ä¸€ä¸ªçŸ¥è¯†ç‚¹ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚è¿™é‡Œæ ‡ç¤ºçš„ä¸œè¥¿æ¯”è¾ƒå¤šã€‚å¤§å®¶çœ‹äº†è¿™é‡Œçš„æ–¹æ³•å¯èƒ½ä¼šæ¯”è¾ƒæ‡µé€¼ï¼Œè¿™é‡Œçš„Headerä¸­çš„å„ä¸ªé™æ€é‡æ˜¯ä»€ä¹ˆæ„æ€ã€‚æ²¡æœ‰å…³ç³»ï¼Œè®©æˆ‘ä»¬æ¥ç€å¾€ä¸‹èµ°ã€‚&lt;/p&gt;
&lt;div readability=&quot;7&quot;&gt;ã€€ã€€è¿™é‡Œï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå…¶å…¥å‚bufç”¨äºåˆå§‹åŒ–å…¶æˆå‘˜å˜é‡bufã€‚&lt;img src=&quot;https://img2018.cnblogs.com/blog/1365945/201812/1365945-20181218141459310-883566207.png&quot; alt=&quot;&quot;/&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¿™é‡Œæ˜¯Headerä¸­çš„å„ä¸ªé™æ€é‡ã€‚è¿™é‡Œä¸­ä¹Ÿæœ‰æ³¨é‡Šã€‚ä¸è¿‡ï¼Œæˆ‘è¿˜æ˜¯å†ç®€å•ä»‹ç»ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€1.é¦–å…ˆæ˜¯8ä¸ªå­—èŠ‚çš„MAGICå€¼ï¼Œå…¶å®ä¹Ÿå°±æ˜¯æšä¸¾BlockTypeä¸­çš„å€¼ã€‚BlockTypeçš„æ¯ä¸ªæšä¸¾ç±»å‹ä¸­çš„magicå€¼éƒ½æ˜¯8ä¸ªå­—èŠ‚ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€2.æ¥ä¸‹æ¥å°±æ˜¯4ä¸ªå­—èŠ‚ä¸å«headerçš„blockå¤§å°ï¼Œè¿™é‡Œæ˜¯blockå‹ç¼©åçš„å¤§å°ã€‚æ³¨æ„ï¼Œè¿™é‡ŒåŒ…å«checksumã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€3.ç„¶åæ˜¯4ä¸ªå­—èŠ‚çš„æ²¡æœ‰å‹ç¼©åçš„å¤§å°ã€‚è¿™é‡Œä¸åŒ…å«headerï¼Œä¹Ÿä¸åŒ…å«checksumã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€4.ç„¶åæ˜¯8ä¸ªå­—èŠ‚ç›¸åŒç±»å‹çš„å‰ä¸€ä¸ªblockçš„åç§»é‡ã€‚ä»–ä¸»è¦ç”¨äºå¯¼èˆªåˆ°ä¸Šä¸€ä¸ªå—è€Œæ— éœ€è½¬åˆ°å—ç´¢å¼•ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€5.1ä¸ªå­—èŠ‚è¡¨ç¤ºchecksum typeï¼Œå…¶å¯¹åº”çš„ç±»å‹ä¸ºæšä¸¾ChecksumType&lt;/p&gt;
&lt;p&gt;ã€€ã€€6.ç„¶åæ˜¯4ä¸ªå­—èŠ‚æ¯ä¸ªæ ¡éªŒå’Œå€¼çš„å­—èŠ‚æ•°&lt;/p&gt;
&lt;p&gt;ã€€ã€€7.æœ€å4ä¸ªå­—èŠ‚æ˜¯åŒ…æ‹¬headerï¼Œä½†æ˜¯ä¸åŒ…å«checksumsçš„blockå¤§å°ã€‚&lt;/p&gt;
&lt;div readability=&quot;7&quot;&gt;ã€€ã€€ç›¸ä¿¡æœ‰äº†è¿™é‡Œçš„äº†è§£ï¼Œå¤§å®¶å°±å¯¹äºHFileBlockçš„æ„é€ æ–¹æ³•å°±ä¸å†è¿·æƒ‘äº†ã€‚&lt;img src=&quot;https://img2018.cnblogs.com/blog/1365945/201812/1365945-20181218141532348-28049386.png&quot; alt=&quot;&quot;/&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€åˆ°æ­¤ä¸ºæ­¢ï¼Œç›¸ä¿¡å¤§å®¶å¯¹äºHFileBlock.BlockIterator.nextBlockWithBlockTypeæ–¹æ³•è°ƒç”¨çš„æµç¨‹å·²ç»æœ‰äº†ä¸€ä¸ªæ¸…æ™°çš„äº†è§£ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¥dataBlockIndexReader.readMultiLevelIndexRootä¸ºä¾‹ï¼Œç®€å•è¯´æ˜ä¸€ä¸‹è¿™é‡Œå¦‚ä½•å°†å…¥å‚HFileBlockç”¨æ¥åˆå§‹åŒ–å…¶ä¸­çš„æˆå‘˜å˜é‡ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€åœ¨dataBlockIndexReader.readMultiLevelIndexRootæ–¹æ³•ä¸­ï¼Œä¸»è¦è°ƒç”¨äº†æ–¹æ³•readRootIndexã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€1.è°ƒç”¨blk.getByteStreamï¼Œè¿™é‡Œè™½ç„¶ä¸å¤ªå¤æ‚ï¼Œä½†è¿˜æ˜¯å€¼å¾—æˆ‘ç®€å•è®²è§£ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;div readability=&quot;7&quot;&gt;ã€€ã€€2.è°ƒç”¨ç”¨æ¥å¡«å……å…¶æˆå‘˜å˜é‡ã€‚&lt;img src=&quot;https://img2018.cnblogs.com/blog/1365945/201812/1365945-20181218141559897-1358802957.png&quot; alt=&quot;&quot;/&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬é¦–å…ˆæ¥åˆ°æ–¹æ³•HFileBlock.getByteStreamã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€1.è°ƒç”¨buf.duplicateï¼Œè¿™é‡Œbufçš„å®é™…ç±»å‹ä¸ºSingleByteBuffï¼Œå› æ­¤ï¼Œå…¶è°ƒç”¨äº†SingleByteBuff.duplicateã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€2.å°†è¿”å›çš„dupçš„poså®šåˆ°33ï¼Œä¹Ÿå°±æ˜¯headeråçš„ç¬¬ä¸€ä¸ªå­—èŠ‚&lt;/p&gt;
&lt;div readability=&quot;7&quot;&gt;ã€€ã€€3.å°†å…¶ä¸­dupå°è£…ä¸ºDataInputStreamå¹¶è¿”å›&lt;img src=&quot;https://img2018.cnblogs.com/blog/1365945/201812/1365945-20181218141618771-1754780652.png&quot; alt=&quot;&quot;/&gt;&lt;/div&gt;
&lt;div readability=&quot;9&quot;&gt;ã€€ã€€å…³äºæ–¹æ³•SingleByteBuff.duplicateçš„è°ƒç”¨ï¼Œæˆ‘åœ¨è¿™é‡Œç®€å•æˆªå›¾è¯´æ˜ä¸€ä¸‹ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚è¿™é‡Œçš„bufç±»å‹ä¸ºjava.nio.ByteBufferã€‚è°ƒç”¨å…¶duplicateæ–¹æ³•å¹¶å°†å…¶å°è£…ä¸ºä¸€ä¸ªæ–°çš„å¯¹è±¡è¿”å›ã€‚&lt;img src=&quot;https://img2018.cnblogs.com/blog/1365945/201812/1365945-20181218141636363-491104750.png&quot; alt=&quot;&quot;/&gt;&lt;/div&gt;
&lt;div readability=&quot;11&quot;&gt;ã€€ã€€ç„¶åï¼Œè®©æˆ‘ä»¬æ¥åˆ°æ–¹æ³•readRootIndexï¼Œè¿™é‡Œå®Œæˆäº†root indexçš„è¯»å–ã€‚ç›¸ä¿¡çœ‹è¿‡ä¸Šä¸€ç¯‡åšæ–‡ã€ŠHBaseä¹‹CFæŒä¹…åŒ–ç³»åˆ—(ç»­2)ã€‹çš„å¤§å®¶åº”è¯¥èƒ½å¤Ÿç†è§£è¿™é‡Œçš„å†…å®¹ï¼Œå› ä¸ºå½“æ—¶å†™å…¥çš„é€»è¾‘ä¸ç°åœ¨è¯»å…¥çš„é€»è¾‘æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘åœ¨è¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚&lt;img src=&quot;https://img2018.cnblogs.com/blog/1365945/201812/1365945-20181218141651038-826777122.png&quot; alt=&quot;&quot;/&gt;ã€€ã€€æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æ¥åˆ°æ–¹æ³•fileInfo.readã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;/div&gt;
&lt;p&gt;ã€€ã€€1.åˆ†é…4ä¸ªå­—èŠ‚ç”¨æ¥å­˜æ”¾å…¶magicå€¼ã€‚è¿™é‡Œçš„magicä¸ºPBUF&lt;/p&gt;
&lt;p&gt;ã€€ã€€2.å°†è¾“å…¥æµä¸­çš„å€¼å†™å…¥åˆ°åˆšåˆšåˆå§‹åŒ–çš„pbufä¸­&lt;/p&gt;
&lt;p&gt;ã€€ã€€3.è°ƒç”¨æ–¹æ³•HFileProtos.FileInfoProto.parseDelimitedFromå°†è¾“å…¥æµä¸­çš„ä¿¡æ¯ååºåˆ—åŒ–&lt;/p&gt;
&lt;div readability=&quot;8&quot;&gt;ã€€ã€€4.è°ƒç”¨æ–¹æ³•parsePBå°†å…¶ä¸­çš„å…¥å‚HFileProtos.FileInfoProtoç±»å‹çš„å€¼ç”¨æ¥å¡«å……å…¶æˆå‘˜å˜é‡map&lt;img src=&quot;https://img2018.cnblogs.com/blog/1365945/201812/1365945-20181218141708853-504942530.png&quot; alt=&quot;&quot;/&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€ç„¶åï¼Œå°±æ˜¯loadOnOpenBlocksæˆå‘˜å˜é‡å®Œæˆå…¶å€¼çš„æ·»åŠ äº†ã€‚è¿™é‡Œåªæ˜¯è°ƒç”¨äº†blockIter.nextBlockï¼Œè¯¥æ–¹æ³•åœ¨ä¸Šé¢å·²ç»ä»‹ç»è¿‡ï¼Œæˆ‘åœ¨è¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€åˆ°æ­¤ä¸ºæ­¢ï¼Œæœ¬èŠ‚çš„å†…å®¹å°±ä»‹ç»å®Œäº†ã€‚&lt;/p&gt;
&lt;div readability=&quot;8&quot;&gt;ã€€ã€€ä¸‹é¢ï¼Œæˆ‘ç”»ä¸€ä¸ªå›¾ç®€å•æè¿°ä¸€ä¸‹æ–‡ä»¶å­˜æ”¾çš„å„ç§ä¿¡æ¯ã€‚å¦‚æœä¸å¯¹ï¼Œè¿˜å¸Œæœ›å¤§å®¶æŒ‡æ­£ã€‚&lt;img src=&quot;https://img2018.cnblogs.com/blog/1365945/201812/1365945-20181218141728999-776018838.png&quot; alt=&quot;&quot;/&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€åˆ°è¿™é‡Œï¼Œè¯¥ç³»åˆ—â€”â€”CFæŒä¹…åŒ–ç³»åˆ—å°±ç”»ä¸Šäº†å¥å·ï¼Œå¸Œæœ›å¤§å®¶å–œæ¬¢ã€‚&lt;/p&gt;
</description>
<pubDate>Tue, 18 Dec 2018 06:23:00 +0000</pubDate>
<dc:creator>letsfly</dc:creator>
<og:description>ç›¸ä¿¡å¤§å®¶åœ¨çœ‹äº†è¯¥ç³»åˆ—çš„å‰ä¸¤ç¯‡æ–‡ç« å°±å·²ç»å¯¹å…¶ä¸­çš„æŒä¹…åŒ–æœ‰æ¯”è¾ƒæ·±å…¥çš„äº†è§£ã€‚ç›¸å¯¹è€Œè¨€ï¼Œæœ¬èŠ‚å†…å®¹åªæ˜¯å¯¹å‰ä¸¤èŠ‚çš„ä¸€ä¸ªå·©å›ºã€‚ä¸æŒä¹…åŒ–ç›¸å¯¹åº”çš„æ˜¯æ‰“å¼€æ–‡ä»¶å¹¶å°†å…¶å†…å®¹è¯»å…¥åˆ°å†…å­˜å˜é‡ä¸­ã€‚è€Œåœ¨æœ¬èŠ‚ï¼Œæˆ‘å°±æ¥ä»‹ç»è¿™ä¸€ç‚¹ã€‚ æœ¬èŠ‚</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/letsfly/p/10135024.html</dc:identifier>
</item>
<item>
<title>Javaé›†åˆ-05fail-fast(å¿«é€Ÿå¤±è´¥)æœºåˆ¶åŸç†åŠè§£å†³æ–¹æ³• - Jzedy</title>
<link>http://www.cnblogs.com/JzedyBlogs/p/10136772.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/JzedyBlogs/p/10136772.html</guid>
<description>&lt;h2 id=&quot;fail-fastç®€ä»‹&quot;&gt;fail-fastç®€ä»‹&lt;/h2&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;fail-fast(å¿«é€Ÿå¤±è´¥)ï¼Œæ˜¯Javaé›†åˆçš„ä¸€ç§é”™è¯¯æ£€æµ‹æœºåˆ¶ã€‚å½“åœ¨éå†é›†åˆçš„è¿‡ç¨‹ä¸­è¯¥é›†åˆåœ¨ç»“æ„(æ”¹å˜é›†åˆå¤§å°)ä¸Šå‘ç”Ÿå˜åŒ–æ—¶å€™ï¼Œ&lt;br/&gt;æœ‰å¯èƒ½å‘ç”Ÿfail-fastï¼ŒæŠ›å‡ºjava.util.ConcurrentModificationExceptionå¼‚å¸¸ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;fail-fastå‡ºç°åœºæ™¯&quot;&gt;fail-fastå‡ºç°åœºæ™¯&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;å•çº¿ç¨‹åœºæ™¯
&lt;ul readability=&quot;-0.5&quot;&gt;&lt;li readability=&quot;2&quot;&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;    public class FailFastSingleThreadTest {
        public static void main(String[] args) {
            List&amp;lt;String&amp;gt; lists = new ArrayList&amp;lt;&amp;gt;(10);
            for (int i = 0; i &amp;lt; 4; i++){
                lists.add(String.valueOf(i));
            }

            //fail-fast
            for (String list : lists) {
                lists.remove(3);
            }
        }
    }
//output:Exception in thread &quot;main&quot; java.util.ConcurrentModificationException&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;å¤šçº¿ç¨‹åœºæ™¯
&lt;ul readability=&quot;2&quot;&gt;&lt;li readability=&quot;11&quot;&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;  public class FailFastMultiThread  {
      private static List&amp;lt;String&amp;gt; lists = new ArrayList&amp;lt;&amp;gt;(10);
      static {
          for (int i = 0; i &amp;lt; 4; i++){
              lists.add(String.valueOf(i));
          }
      }
      public static void main(String[] args) {
          new Thread(new ForEachThread()).start();
          new Thread(new EditThread()).start();
      }

      //ç”¨äºéå†
      static class ForEachThread implements Runnable{
          @Override
          public void run() {
              Iterator&amp;lt;String&amp;gt; iterator = lists.iterator();
              while (iterator.hasNext()){
                  System.out.println(iterator.next());
                  try {
                      Thread.sleep(100);//ä¸ºäº†å¦å¤–çš„çº¿ç¨‹åŠ å…¥ï¼Œä¹Ÿæ˜¯ä¸ºäº†ç»“åˆåœ¨éå†æ—¶å€™ä¿®æ”¹ç»“æ„
                  } catch (InterruptedException e) {
                      e.printStackTrace();
                  }
              }

          }
      }

      //ç”¨äºä¿®æ”¹ç»“æ„
      static class EditThread implements Runnable{
          @Override
          public void run() {
              lists.add(&quot;8&quot;);
          }
      }

  }
  //output:Exception in thread &quot;Thread-0&quot; java.util.ConcurrentModificationException&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;äº§ç”ŸåŸå› &quot;&gt;äº§ç”ŸåŸå› &lt;/h2&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;é›†åˆèƒ½å¤Ÿéå†æ˜¯å› ä¸ºè¿­ä»£å™¨çš„åŸå› ï¼Œè€ŒIteratoræ¥å£åªæ˜¯å®šä¹‰äº†å…·ä½“çš„æ–¹æ³•ï¼Œé›†åˆéœ€è¦å®ç°è¯¥æ¥å£æ–¹æ³•ï¼Œ&lt;br/&gt;æŸ¥çœ‹ArrayListä¸­å…·ä½“çš„å®ç°æ–¹æ³•&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;  //çœç•¥éƒ¨åˆ†æ–¹æ³•
  private class Itr implements Iterator&amp;lt;E&amp;gt; {
      int cursor;       // index of next element to return
      int lastRet = -1; // index of last element returned; -1 if no such
      int expectedModCount = modCount;

      @SuppressWarnings(&quot;unchecked&quot;)
      public E next() {
          checkForComodification();
          int i = cursor;
          if (i &amp;gt;= size)
              throw new NoSuchElementException();
          Object[] elementData = ArrayList.this.elementData;
          if (i &amp;gt;= elementData.length)
              throw new ConcurrentModificationException();
          cursor = i + 1;
          return (E) elementData[lastRet = i];
      }

      public void remove() {
          if (lastRet &amp;lt; 0)
              throw new IllegalStateException();
          checkForComodification();

          try {
              ArrayList.this.remove(lastRet);
              cursor = lastRet;
              lastRet = -1;
              expectedModCount = modCount;
          } catch (IndexOutOfBoundsException ex) {
              throw new ConcurrentModificationException();
          }
      }



      final void checkForComodification() {
          if (modCount != expectedModCount)
              throw new ConcurrentModificationException();
      }
  }&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;å¯ä»¥çœ‹å‡ºåœ¨Itræ˜¯ArrayListçš„ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œè¿­ä»£å™¨æ“ä½œé€šè¿‡è¿™ä¸ªå†…éƒ¨ç±»ï¼ŒItræœ‰ä¸ªexpectedModCountå±æ€§ï¼Œè¿™ä¸ªå±æ€§åˆ¤æ–­æ˜¯å¦ä¸modCountç›¸ç­‰ï¼Œå¦‚æœä¸ç›¸ç­‰æŠ›å‡ºå¼‚å¸¸ï¼ŒmodCountè®°å½•listç»“æ„ä¸Šå‘ç”Ÿå˜åŒ–çš„æ¬¡æ•°ï¼Œå¯ä»¥çœ‹å‡ºåœ¨è¿­ä»£æ—¶å€™checkForComodification()æ–¹æ³•æ£€æµ‹ä¸¤ä¸ªçš„å€¼ä¸ç›¸ç­‰å°±æŠ›å‡ºå¼‚å¸¸&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;è§£å†³æ–¹æ³•&quot;&gt;è§£å†³æ–¹æ³•&lt;/h2&gt;
&lt;ul readability=&quot;-0.5&quot;&gt;&lt;li readability=&quot;2&quot;&gt;å•çº¿ç¨‹
&lt;ul&gt;&lt;li&gt;ä½¿ç”¨è¿­ä»£å™¨çš„removeæ–¹æ³•&lt;/li&gt;
&lt;/ul&gt;&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;  public class NoFailFastSingleThread {
      public static void main(String[] args) {
          List&amp;lt;String&amp;gt; lists = new ArrayList&amp;lt;&amp;gt;(10);
          for (int i = 0; i &amp;lt; 4; i++){
              lists.add(String.valueOf(i));
          }

          Iterator&amp;lt;String&amp;gt; iterator = lists.iterator();
          while (iterator.hasNext()){
              String next = iterator.next();
              if (next != null){
                  iterator.remove();
              }
          }

      }
  }&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;å¤šçº¿ç¨‹
&lt;ul&gt;&lt;li&gt;ä½¿ç”¨javaå¹¶å‘åŒ…ä¸‹çš„ç±»æ¥ä»£æ›¿å¯¹åº”çš„é›†åˆ,å¦‚CopyOnWriteArrayListä»£æ›¿ArrayListï¼Œ&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;</description>
<pubDate>Tue, 18 Dec 2018 06:11:00 +0000</pubDate>
<dc:creator>Jzedy</dc:creator>
<og:description>fail fastç®€ä»‹ fail fast(å¿«é€Ÿå¤±è´¥)ï¼Œæ˜¯Javaé›†åˆçš„ä¸€ç§é”™è¯¯æ£€æµ‹æœºåˆ¶ã€‚å½“åœ¨éå†é›†åˆçš„è¿‡ç¨‹ä¸­è¯¥é›†åˆåœ¨ç»“æ„(æ”¹å˜é›†åˆå¤§å°)ä¸Šå‘ç”Ÿå˜åŒ–æ—¶å€™ï¼Œ æœ‰å¯èƒ½å‘ç”Ÿfail fastï¼ŒæŠ›å‡ºjava.</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/JzedyBlogs/p/10136772.html</dc:identifier>
</item>
</channel>
</rss>