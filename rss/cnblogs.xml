<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>åšå®¢å›­_é¦–é¡µ</title>
<link></link>
<description>ä»£ç æ”¹å˜ä¸–ç•Œ</description>
<item>
<title>ä¸€å‘¨ä¸€ä¸ªä¸­é—´ä»¶-hbase - jack_zdl</title>
<link>http://www.cnblogs.com/smartzhang/p/14066014.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/smartzhang/p/14066014.html</guid>
<description>&lt;p&gt;hbaseæ˜¯å¤§æ•°æ®çš„ç”Ÿæ€çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯é«˜å¯é æ€§ã€é«˜æ€§èƒ½ã€åˆ—å­˜å‚¨ã€å¯ä¼¸ç¼©ã€å®æ—¶è¯»å†™çš„æ•°æ®åº“ç³»ç»Ÿã€‚ä»‹äºnosqlå’ŒRDBMSä¹‹é—´ã€‚ä¸»è¦å­˜å‚¨éç»“æ„åŒ–å’ŒåŠç»“æ„åŒ–çš„æ¾æ•£æ•°æ®ã€‚&lt;/p&gt;&lt;div id=&quot;cnblogs_post_body&quot; readability=&quot;108.58806750654&quot;&gt;
&lt;h3 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h3&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;hbaseæ˜¯å¤§æ•°æ®çš„ç”Ÿæ€çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯é«˜å¯é æ€§ã€é«˜æ€§èƒ½ã€åˆ—å­˜å‚¨ã€å¯ä¼¸ç¼©ã€å®æ—¶è¯»å†™çš„æ•°æ®åº“ç³»ç»Ÿã€‚ä»‹äºnosqlå’ŒRDBMSä¹‹é—´ã€‚ä¸»è¦å­˜å‚¨éç»“æ„åŒ–å’ŒåŠç»“æ„åŒ–çš„æ¾æ•£æ•°æ®ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;æµ·é‡æ•°æ®å­˜å‚¨&lt;br/&gt;å¿«é€Ÿéšæœºè®¿é—®&lt;br/&gt;å¤§é‡å†™æ“ä½œçš„åº”ç”¨&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;èƒŒæ™¯&quot;&gt;èƒŒæ™¯&lt;/h3&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;æˆ‘ä»¬å…¬å¸ç°åœ¨éœ€è¦ä¸€å¥—ç›‘æ§ç³»ç»Ÿï¼Œå¹¶ä¸”éœ€è¦å­˜å‚¨ä¸€ç³»åˆ—çš„ç”¨æˆ·è®¿é—®æ•°æ®ï¼Œè¿™äº›æ•°æ®å¾ˆæ¾æ•£ï¼Œç°åœ¨çœ‹èµ·æ¥æ— å…³ç´§è¦çš„æ•°æ®ä½†æ˜¯ç¡®å®æ½œåœ¨çš„ç”¨æˆ·è¡Œä¸ºæ•°æ®ã€‚ä¹‹åä¼šå¸®åŠ©æˆ‘ä»¬åˆ†å¿ƒç”¨æˆ·è¡Œä¸ºï¼Œä¸ºæˆ‘ä»¬æä¾›ä¸ªæ€§åŒ–æ•°æ®ä½œä¸ºä¾æ®ã€‚&lt;br/&gt;åœ¨ç»¼åˆç°åœ¨ä¸»æµçš„ç›‘æ§ç³»ç»Ÿï¼Œcatï¼Œpinpointï¼Œzikpinï¼ŒSkyWalkingç­‰ç›‘æ§ç³»ç»Ÿã€‚æˆ‘ä»¬é€‰æ‹©äº†pinpointè¿™ä¸ªåŸºäºå­—èŠ‚ç æ³¨å…¥çš„è°ƒç”¨é“¾åˆ†æã€‚æ‰€æ¶ˆè€—çš„æ€§èƒ½ä½ï¼Œæ— ä»£ç ä¾µå…¥æ€§ã€‚ä½†æ˜¯æ­å»ºpinpointæ—¶ï¼Œéœ€è¦ä½¿ç”¨hbaseä½œä¸ºå­˜å‚¨æ•°æ®çš„æ•°æ®åº“ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;çŸ¥è¯†å‡†å¤‡&quot;&gt;çŸ¥è¯†å‡†å¤‡&lt;/h3&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;RegionServer.ç†è§£ä¸ºæ•°æ®èŠ‚ç‚¹ï¼Œå­˜å‚¨æ•°æ®çš„&lt;br/&gt;regionæœåŠ¡å™¨çš„å†…å­˜ä¸»è¦æœåŠ¡äºå†…éƒ¨æ•°æ®ç»“æ„ã€‚ä½ éœ€è¦64ä½æ“ä½œç³»ç»Ÿå’Œä½¿ç”¨å¤§äº4Gçš„å†…å­˜ç©ºé—´ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;&lt;li&gt;
&lt;p&gt;æ¶æ„å›¾&lt;br/&gt;&lt;img src=&quot;http://output-mingbo.oss-cn-beijing.aliyuncs.com/imgs/15692828428763.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;HMater&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;blockquote readability=&quot;10&quot;&gt;
&lt;p&gt;HMasteræ˜¯Master Serverçš„å®ç°ï¼Œè´Ÿè´£ç›‘æ§é›†ç¾¤ä¸­çš„RegionServerå®ä¾‹ï¼ŒåŒæ—¶æ˜¯æ‰€æœ‰metadataæ”¹å˜çš„æ¥å£ï¼Œåœ¨é›†ç¾¤ä¸­ï¼Œé€šå¸¸è¿è¡Œåœ¨NameNodeä¸Šé¢ã€‚masteræœºå™¨ä¸éœ€è¦å¤§å­˜å‚¨ç©ºé—´ï¼Œä¸éœ€è¦æŒ‚è½½è¿‡å¤šçš„ç£ç›˜ã€‚ç”±äºmasterçš„é‡è¦æ€§å¤§äºslalveã€‚å¯ä»¥é€šè¿‡å†—ä½™æå‡ç¡¬ä»¶å¯ç”¨ç‡ã€‚&lt;br/&gt;masteræœºå™¨è¦è¿è¡ŒNameNode,SecondaryNameNode,JobTRackerå’ŒHBase Master.800TBæ•°æ®æ¨è24Gå†…å­˜ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;HBaseçš„RegionServer.slaveæœºå™¨è¦ä½¿ç”¨DataNode,TaskTrackerå’ŒHBase RegionServer.800TBæ•°æ®æ¨è24Gå†…å­˜ä»¥ä¸Šé…ç½®ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;&lt;li&gt;hbaseä½¿ç”¨çš„æ–‡ä»¶ç³»ç»Ÿ&lt;/li&gt;
&lt;/ul&gt;&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;æœ¬åœ°æ¨¡å¼ï¼š hbaseå¯ä»¥ä¸ä½¿ç”¨HDFSæˆ–è€…å…¶ä»–é›†ç¾¤ã€‚ä½¿ç”¨FileSystemç±»è¿æ¥åˆ°æ–‡ä»¶ç³»ç»Ÿå®ç°ã€‚Hadoopå®¢æˆ·ç«¯åŠ è½½å¹¶ä½¿ç”¨hadoopæä¾›ChecksumFileSystemç±»ç›´æ¥æ“ä½œæœ¬åœ°ç£ç›˜è·¯å¾„æ¥å­˜å‚¨æ‰€æœ‰çš„è·¯å¾„ã€‚&lt;br/&gt;å‚æ•° file:///&lt;br/&gt;HDFSæ¨¡å¼ï¼š æ˜¯é»˜è®¤çš„æ–‡ä»¶ç³»ç»Ÿï¼ŒHbaseé€‰æ‹©HDFSä½œä¸ºæ–‡ä»¶ç³»ç»Ÿã€‚&lt;br/&gt;hdfs://ğŸ˜•&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;&lt;li&gt;hbaseé›†ç¾¤&lt;/li&gt;
&lt;/ul&gt;&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;å•æœºæ¨¡å¼&lt;br/&gt;åˆ†å¸ƒå¼æ¨¡å¼&lt;br/&gt;hbaseçš„ä¸»ä»æ¶æ„ï¼Œhmasterä½œä¸ºä¸»èŠ‚ç‚¹ï¼ŒhregionServerä½œä¸ºä»èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;
&lt;code&gt;å®•æœºåˆ†ä¸º HMaster å®•æœºå’Œ HRegisoner å®•æœºï¼Œå¦‚æœæ˜¯HRegisoner å®•æœºï¼Œ HMaster ä¼šå°†å…¶æ‰€ç®¡ç†çš„ region é‡æ–°åˆ†å¸ƒåˆ°å…¶ä»–æ´»åŠ¨çš„
 RegionServer ä¸Š.

ç”±äºæ•°æ®å’Œæ—¥å¿—éƒ½æŒä¹…åœ¨ HDFSä¸­ï¼Œè¯¥æ“ä½œä¸ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚æ‰€ä»¥æ•°æ®çš„ä¸€è‡´æ€§å’Œå®‰å…¨æ€§æ˜¯æœ‰ä¿éšœçš„ã€‚

å¦‚æœæ˜¯ HMaster å®•æœºï¼Œ HMaster æ²¡æœ‰å•ç‚¹é—®é¢˜.

HBase ä¸­å¯ä»¥å¯åŠ¨å¤šä¸ª HMasterï¼Œé€šè¿‡Zookeeper çš„ Master Election æœºåˆ¶ä¿è¯æ€»æœ‰ä¸€ä¸ª Master è¿è¡Œã€‚

å³ ZooKeeper ä¼šä¿è¯æ€»ä¼šæœ‰ä¸€ä¸ª HMaster åœ¨å¯¹å¤–æä¾›æœåŠ¡
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;å‚è€ƒæ–‡çŒ®&quot;&gt;å‚è€ƒæ–‡çŒ®&lt;/h3&gt;
&lt;p&gt;HBaseæƒå¨æŒ‡å—(ä¸­æ–‡ç‰ˆ) &lt;a href=&quot;https://pan.baidu.com/s/1EGhMdGeE4GcD8VpEcKQGkw&quot;&gt;æå–ç : nisk&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;HBaseå®‰è£…åŒ… hbase-2.2.1-bin.tar&lt;a href=&quot;https://pan.baidu.com/s/1Es3Rg0owaWdklLJZJA39Ng&quot;&gt;æå–ç ï¼šutts&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;å®‰è£…&quot;&gt;å®‰è£…&lt;/h3&gt;
&lt;blockquote readability=&quot;7.1906005221932&quot;&gt;
&lt;p&gt;å•æœºå®‰è£…å’Œåˆ†å¸ƒå¼å®‰è£…ã€‚&lt;br/&gt;åœ¨linuxæœåŠ¡å™¨ä¸­æŒ‡å®šä½ç½® wget &lt;a href=&quot;http://mirrors.tuna.tsinghua.edu.cn/apache/hbase/2.2.1/hbase-2.2.1-src.tar.gz&quot;&gt;http://mirrors.tuna.tsinghua.edu.cn/apache/hbase/2.2.1/hbase-2.2.1-src.tar.gz&lt;/a&gt; ã€‚&lt;br/&gt;ç¼–è¾‘conf/hbase-env.shæ–‡ä»¶æŒ‡å®šè¿è¡ŒHBaseçš„javaç¯å¢ƒã€‚&lt;br/&gt;export JAVA_HOME=/usr/bin/java&lt;br/&gt;export HBASE_MANAGES_ZK=true å°†zookeeperè®¾ç½®true(trueä½¿ç”¨hbaseè‡ªå¸¦çš„zk,falseä½¿ç”¨è‡ªå·±å®‰è£…çš„zk)&lt;br/&gt;ä¿®æ”¹é…ç½®hbase-site.xml&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;
&lt;code&gt;&amp;lt;configuration&amp;gt;
        &amp;lt;property&amp;gt;
       &amp;lt;name&amp;gt;hbase.rootdir&amp;lt;/name&amp;gt;
          &amp;lt;value&amp;gt;file:////root/hbase-2.2.1-Data/HbaseData&amp;lt;/value&amp;gt;
    &amp;lt;/property&amp;gt;
    &amp;lt;!-- hbase zookeeperæ•°æ®å­˜å‚¨åœ°å€ --&amp;gt;
    &amp;lt;property&amp;gt;
        &amp;lt;name&amp;gt;hbase.zookeeper.property.dataDir&amp;lt;/name&amp;gt;
        &amp;lt;value&amp;gt;/root/hbase-2.2.1-Data/zkData&amp;lt;/value&amp;gt;
        &amp;lt;/property&amp;gt;
        &amp;lt;property&amp;gt;
        &amp;lt;name&amp;gt;hbase.cluster.distributed&amp;lt;/name&amp;gt;
        &amp;lt;value&amp;gt;true&amp;lt;/value&amp;gt;
        &amp;lt;/property&amp;gt;
        &amp;lt;!-- zookeeperé›†ç¾¤çš„åœ°å€ --&amp;gt;
        &amp;lt;property&amp;gt;
        &amp;lt;name&amp;gt;hbase.zookeeper.quorum&amp;lt;/name&amp;gt;
        &amp;lt;value&amp;gt;47.105.153.163&amp;lt;/value&amp;gt;
        &amp;lt;/property&amp;gt;
        &amp;lt;!-- zookeeperé›†ç¾¤çš„ç«¯å£ --&amp;gt;
        &amp;lt;property&amp;gt;
        &amp;lt;name&amp;gt;hbase.zookeeper.property.clientPort&amp;lt;/name&amp;gt;
        &amp;lt;value&amp;gt;2183&amp;lt;/value&amp;gt;
        &amp;lt;/property&amp;gt;
&amp;lt;/configuration&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;æ‰§è¡Œå‘½ä»¤è¡Œ ./start-hbase.sh &amp;gt; console.out &amp;amp;&lt;br/&gt;å•æœºä¸‹è¿™å°±å·²ç»å°±å¯ä»¥å¯åŠ¨äº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;
&lt;code&gt;OpenJDK 64-Bit Server VM warning: If the number of processors is expected to increase from one, then you should configure the number of parallel GC threads appropriately 
using -XX:ParallelGCThreads=N
å¯èƒ½å› ä¸ºæœåŠ¡å™¨å†…å­˜ä¸è¶³ã€‚
&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä»‹ç»é›†ç¾¤ç¯å¢ƒä¸‹çš„hbaseçš„ç¯å¢ƒçš„å®‰è£…ã€‚&lt;br/&gt;conf/hbase-site.xmlæŒ‡å®šä½¿ç”¨HDFSçš„/hbaseç›®å½•ä½œä¸ºæ ¹ç›®å½•ã€‚HDFSçš„ç«¯å£9000ï¼Œæ•°æ®åªä¿ç•™ä¸€ä¸ªå‰¯æœ¬ã€‚&lt;br/&gt;hbase shellæ˜¯hbaseçš„å‘½ä»¤è¡Œè„šæœ¬&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;hbaseåŸç†&quot;&gt;hbaseåŸç†&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;hbaseå®æ—¶æŸ¥è¯¢&lt;/li&gt;
&lt;/ul&gt;&lt;blockquote readability=&quot;9&quot;&gt;
&lt;p&gt;å¯ä»¥è®¤ä¸ºæ˜¯ä»å†…å­˜ä¸­æŸ¥è¯¢çš„ï¼ŒHBaseçš„æœºåˆ¶å°±æ˜¯å°†æ•°æ®å…ˆå†™å…¥å†…å­˜ä¸­ï¼Œå½“æ•°æ®é‡åˆ°è¾¾ä¸€å®šçš„é‡ï¼ˆ128mï¼‰,åœ¨å†™å…¥ç£ç›˜ã€‚ï¼Œåœ¨å†…å­˜ä¸­ï¼Œæ˜¯ä¸è¿›è¡Œæ•°æ®çš„æ›´æ–°æˆ–è€…åˆå¹¶æ“ä½œï¼Œåªå¢åŠ æ•°æ®ï¼Œä½¿å¾—ç”¨æˆ·å†™æ“ä½œè¿›å…¥å†…å­˜å°±å¯ä»¥ç«‹å³è¿”å›ã€‚ä¿è¯hbaseçš„I/Oçš„é«˜æ€§èƒ½ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;&lt;li&gt;hbaseåˆå¹¶æ–‡ä»¶&lt;/li&gt;
&lt;/ul&gt;&lt;blockquote readability=&quot;9&quot;&gt;
&lt;p&gt;Compactæ“ä½œã€‚å½“hbaseä¸­æ¯å½“memstoreæ•°æ®flushåˆ°ç¡¬ç›˜ï¼Œå½¢æˆstorefile,å½“storefileçš„æ•°é‡è¾¾åˆ°ä¸€å®šç¨‹åº¦åï¼Œéœ€è¦å°†storefileæ–‡ä»¶compactæ“ä½œã€‚&lt;br/&gt;compactæ“ä½œï¼š1 åˆå¹¶æ–‡ä»¶ 2æ¸…é™¤è¿‡æœŸï¼Œå¤šç‰ˆæœ¬çš„æ•°æ® 3 æé«˜è¯»å†™æ•°æ®çš„æ•ˆç‡&lt;br/&gt;äºŒç§æ–¹å¼ minoræ“ä½œã€‚å’Œmajoræ“ä½œã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;
&lt;code&gt;Minor æ“ä½œåªç”¨æ¥åšéƒ¨åˆ†æ–‡ä»¶çš„åˆå¹¶æ“ä½œä»¥åŠåŒ…æ‹¬ minVersion=0 å¹¶ä¸”è®¾ç½® ttl çš„è¿‡æœŸç‰ˆæœ¬æ¸…ç†ï¼Œä¸åšä»»ä½•åˆ é™¤æ•°æ®ã€å¤šç‰ˆæœ¬æ•°æ®çš„æ¸…ç†å·¥ä½œã€‚
Major æ“ä½œæ˜¯å¯¹ Region ä¸‹çš„ HStore ä¸‹çš„æ‰€æœ‰ StoreFile æ‰§è¡Œåˆå¹¶æ“ä½œï¼Œæœ€ç»ˆçš„ç»“æœæ˜¯æ•´ç†åˆå¹¶å‡ºä¸€ä¸ªæ–‡ä»¶ã€‚ç®€è¿° Hbase filter çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿç»“åˆå®é™…é¡¹ç›®ç»éªŒï¼Œå†™å‡ºå‡ ä¸ªä½¿ç”¨ filter çš„åœºæ™¯HBase ä¸ºç­›é€‰æ•°æ®æä¾›äº†ä¸€ç»„è¿‡æ»¤å™¨ï¼Œé€šè¿‡è¿™ä¸ªè¿‡æ»¤å™¨å¯ä»¥åœ¨ HBase ä¸­çš„æ•°æ®çš„å¤šä¸ªç»´åº¦ï¼ˆè¡Œï¼Œåˆ—ï¼Œæ•°æ®ç‰ˆæœ¬ï¼‰ä¸Šè¿›è¡Œå¯¹æ•°æ®çš„ç­›é€‰æ“ä½œï¼Œä¹Ÿå°±æ˜¯è¯´è¿‡æ»¤å™¨æœ€ç»ˆèƒ½å¤Ÿç­›é€‰çš„æ•°æ®èƒ½å¤Ÿç»†åŒ–åˆ°å…·ä½“çš„ä¸€ä¸ªå­˜å‚¨å•å…ƒæ ¼ä¸Šï¼ˆç”±è¡Œé”®ï¼Œåˆ—åï¼Œæ—¶é—´æˆ³å®šä½ï¼‰ã€‚ RowFilterã€ PrefixFilterã€‚ã€‚ã€‚hbaseçš„filteræ˜¯é€šè¿‡scanè®¾ç½®çš„ï¼Œæ‰€ä»¥æ˜¯åŸºäºscançš„æŸ¥è¯¢ç»“æœè¿›è¡Œè¿‡æ»¤.è¿‡æ»¤å™¨çš„ç±»å‹å¾ˆå¤šï¼Œä½†æ˜¯å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»â€”â€”æ¯”è¾ƒè¿‡æ»¤å™¨ï¼Œä¸“ç”¨è¿‡æ»¤å™¨è¿‡æ»¤å™¨çš„ä½œç”¨æ˜¯åœ¨æœåŠ¡ç«¯åˆ¤æ–­æ•°æ®æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œç„¶ååªå°†æ»¡è¶³æ¡ä»¶çš„æ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯ï¼›å¦‚åœ¨è¿›è¡Œè®¢å•å¼€å‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä½¿ç”¨rowkeyfilterè¿‡æ»¤å‡ºæŸä¸ªç”¨æˆ·çš„æ‰€æœ‰è®¢å• 
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;hbaseæœºåˆ¶&lt;/li&gt;
&lt;/ul&gt;&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;åœ¨ HBase ä¸­æ— è®ºæ˜¯å¢åŠ æ–°è¡Œè¿˜æ˜¯ä¿®æ”¹å·²æœ‰è¡Œï¼Œå…¶å†…éƒ¨æµç¨‹éƒ½æ˜¯ç›¸åŒçš„ã€‚ HBase æ¥åˆ°å‘½ä»¤åå­˜ä¸‹å˜åŒ–ä¿¡æ¯ï¼Œæˆ–è€…å†™å…¥å¤±è´¥æŠ›å‡ºå¼‚å¸¸ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰§è¡Œå†™å…¥æ—¶ä¼šå†™åˆ°ä¸¤ä¸ªåœ°æ–¹ï¼šé¢„å†™å¼æ—¥å¿—ï¼ˆwrite-ahead logï¼Œä¹Ÿç§° HLogï¼‰å’Œ MemStoreã€‚ HBase çš„é»˜è®¤æ–¹å¼æ˜¯æŠŠå†™å…¥åŠ¨ä½œè®°å½•åœ¨è¿™ä¸¤ä¸ªåœ°æ–¹ï¼Œä»¥ä¿è¯æ•°æ®æŒä¹…åŒ–ã€‚åªæœ‰å½“è¿™ä¸¤ä¸ªåœ°æ–¹çš„å˜åŒ–ä¿¡æ¯éƒ½å†™å…¥å¹¶ç¡®è®¤åï¼Œæ‰è®¤ä¸ºå†™åŠ¨ä½œå®Œæˆã€‚MemStore æ˜¯å†…å­˜é‡Œçš„å†™å…¥ç¼“å†²åŒºï¼Œ HBase ä¸­æ•°æ®åœ¨æ°¸ä¹…å†™å…¥ç¡¬ç›˜ä¹‹å‰åœ¨è¿™é‡Œç´¯ç§¯ã€‚å½“MemStore å¡«æ»¡åï¼Œå…¶ä¸­çš„æ•°æ®ä¼šåˆ·å†™åˆ°ç¡¬ç›˜ï¼Œç”Ÿæˆä¸€ä¸ª HFileã€‚ HFile æ˜¯ HBase ä½¿ç”¨çš„åº•å±‚å­˜å‚¨æ ¼å¼ã€‚ HFile å¯¹åº”äºåˆ—æ—ï¼Œä¸€ä¸ªåˆ—æ—å¯ä»¥æœ‰å¤šä¸ª HFileï¼Œä½†ä¸€ä¸ª HFile ä¸èƒ½å­˜å‚¨å¤šä¸ªåˆ—æ—çš„æ•°æ®ã€‚åœ¨é›†ç¾¤çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šï¼Œæ¯ä¸ªåˆ—æ—æœ‰ä¸€ä¸ª MemStoreã€‚å¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ç¡¬ä»¶æ•…éšœå¾ˆå¸¸è§ï¼Œ HBase ä¹Ÿä¸ä¾‹å¤–ã€‚è®¾æƒ³ä¸€ä¸‹ï¼Œå¦‚æœ MemStore è¿˜æ²¡æœ‰åˆ·å†™ï¼ŒæœåŠ¡å™¨å°±å´©æºƒäº†ï¼Œå†…å­˜ä¸­æ²¡æœ‰å†™å…¥ç¡¬ç›˜çš„æ•°æ®å°±ä¼šä¸¢å¤±ã€‚ HBase çš„åº”å¯¹åŠæ³•æ˜¯åœ¨å†™åŠ¨ä½œå®Œæˆä¹‹å‰å…ˆå†™å…¥ WALã€‚ HBase é›†ç¾¤ä¸­æ¯å°æœåŠ¡å™¨ç»´æŠ¤ä¸€ä¸ª WAL æ¥è®°å½•å‘ç”Ÿçš„å˜åŒ–ã€‚WAL æ˜¯åº•å±‚æ–‡ä»¶ç³»ç»Ÿä¸Šçš„ä¸€ä¸ªæ–‡ä»¶ã€‚ç›´åˆ° WAL æ–°è®°å½•æˆåŠŸå†™å…¥åï¼Œå†™åŠ¨ä½œæ‰è¢«è®¤ä¸ºæˆåŠŸå®Œæˆã€‚è¿™å¯ä»¥ä¿è¯ HBase å’Œæ”¯æ’‘å®ƒçš„æ–‡ä»¶ç³»ç»Ÿæ»¡è¶³æŒä¹…æ€§ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ HBase ä½¿ç”¨Hadoop åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼ˆHDFSï¼‰æ¥ä½œä¸ºåº•å±‚æ–‡ä»¶ç³»ç»Ÿã€‚å¦‚æœ HBase æœåŠ¡å™¨å®•æœºï¼Œæ²¡æœ‰ä» MemStore é‡Œåˆ·å†™åˆ° HFile çš„æ•°æ®å°†å¯ä»¥é€šè¿‡å›æ”¾WAL æ¥æ¢å¤ã€‚ä½ ä¸éœ€è¦æ‰‹å·¥æ‰§è¡Œã€‚ Hbase çš„å†…éƒ¨æœºåˆ¶ä¸­æœ‰æ¢å¤æµç¨‹éƒ¨åˆ†æ¥å¤„ç†ã€‚æ¯å°HBase æœåŠ¡å™¨æœ‰ä¸€ä¸ª WALï¼Œè¿™å°æœåŠ¡å™¨ä¸Šçš„æ‰€æœ‰è¡¨ï¼ˆå’Œå®ƒä»¬çš„åˆ—æ—ï¼‰å…±äº«è¿™ä¸ª WALã€‚ä½ å¯èƒ½æƒ³åˆ°ï¼Œå†™å…¥æ—¶è·³è¿‡ WAL åº”è¯¥ä¼šæå‡å†™æ€§èƒ½ã€‚ä½†æˆ‘ä»¬ä¸å»ºè®®ç¦ç”¨ WALï¼Œé™¤éä½ æ„¿æ„åœ¨å‡ºé—®é¢˜æ—¶ä¸¢å¤±æ•°æ®ã€‚å¦‚æœä½ æƒ³æµ‹è¯•ä¸€ä¸‹ï¼Œå¦‚ä¸‹ä»£ç å¯ä»¥ç¦ç”¨ WALï¼š æ³¨æ„ï¼šä¸å†™å…¥ WAL ä¼šåœ¨ RegionServer æ•…éšœæ—¶å¢åŠ ä¸¢å¤±æ•°æ®çš„é£é™©ã€‚å…³é—­ WALï¼Œå‡ºç°æ•…éšœæ—¶ HBase å¯èƒ½æ— æ³•æ¢å¤æ•°æ®ï¼Œæ²¡æœ‰åˆ·å†™åˆ°ç¡¬ç›˜çš„æ‰€æœ‰å†™å…¥æ•°æ®éƒ½ä¼šä¸¢å¤±ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;</description>
<pubDate>Mon, 30 Nov 2020 22:30:00 +0000</pubDate>
<dc:creator>jack_zdl</dc:creator>
<og:description>hbaseæ˜¯å¤§æ•°æ®çš„ç”Ÿæ€çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯é«˜å¯é æ€§ã€é«˜æ€§èƒ½ã€åˆ—å­˜å‚¨ã€å¯ä¼¸ç¼©ã€å®æ—¶è¯»å†™çš„æ•°æ®åº“ç³»ç»Ÿã€‚ä»‹äºnosqlå’ŒRDBMSä¹‹é—´ã€‚ä¸»è¦å­˜å‚¨éç»“æ„åŒ–å’ŒåŠç»“æ„åŒ–çš„æ¾æ•£æ•°æ®ã€‚</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/smartzhang/p/14066014.html</dc:identifier>
</item>
<item>
<title>å¾®å‰ç«¯å¤§èµäºŒ-singlespaå®è·µ - å¼ æ³°å³°</title>
<link>http://www.cnblogs.com/ztfjs/p/single-spa2.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/ztfjs/p/single-spa2.html</guid>
<description>&lt;p class=&quot;sync-line&quot; data-line=&quot;3&quot;&gt;Â &lt;/p&gt;


&lt;p&gt;singleSpaæ˜¯ä¸€ä¸ªjavascriptåº“&lt;br/&gt;å®ƒå¯ä»¥è®©å¾ˆå¤šå°é¡µé¢ã€å°çš„ç»„ä»¶ã€ä¸åŒæ¶æ„çš„å‰ç«¯ç»„ä»¶åœ¨ä¸€ä¸ªé¡µé¢åº”ç”¨ç¨‹åºä¸­å…±å­˜ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæœ‰ä¸€ä¸ªæ¼”ç¤º: (&lt;a href=&quot;https://single-spa.surge.sh/&quot;&gt;https://single-spa.surge.sh/&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªåº“å¯ä»¥è®©ä½ çš„åº”ç”¨å¯ä»¥ä½¿ç”¨å¤šä¸ªä¸åŒçš„æŠ€æœ¯æ ˆï¼ˆvueã€reactã€angularç­‰ç­‰ï¼‰,è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åšåŒæ­¥å¼€å‘ï¼Œæœ€åå†ä½¿ç”¨ä¸€ä¸ªå…¬ç”¨çš„è·¯ç”±å³å¯å®ç°è·¯ç”±å®Œç¾åˆ‡æ¢ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€æ ·çš„æŠ€æœ¯æ ˆï¼Œåˆ†ä¸åŒçš„å›¢é˜Ÿè¿›è¡Œå¼€å‘ï¼Œåªéœ€è¦æœ€åä½¿ç”¨è¿™ä¸ªåº“æŠŠå®ƒä»¬æ•´åˆåœ¨ä¸€èµ·ï¼Œè®¾ç½®ä¸ç”¨çš„è·¯ç”±åç§°å°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜ç‚¹:&lt;/strong&gt;&lt;/p&gt;
&lt;ul readability=&quot;1.5&quot;&gt;&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;æ•æ·&lt;br/&gt;ç‹¬ç«‹å¼€å‘å’Œæ›´å¿«çš„éƒ¨ç½²å‘¨æœŸï¼š å¼€å‘å›¢é˜Ÿå¯ä»¥é€‰æ‹©è‡ªå·±çš„æŠ€æœ¯å¹¶åŠæ—¶æ›´æ–°æŠ€æœ¯æ ˆã€‚ ä¸€æ—¦å®Œæˆå…¶ä¸­ä¸€é¡¹å°±å¯ä»¥éƒ¨ç½²ï¼Œè€Œä¸å¿…ç­‰å¾…æ‰€æœ‰äº‹æƒ…å®Œæ¯•ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;é£é™©ä¸‹é™&lt;br/&gt;é™ä½é”™è¯¯å’Œå›å½’é—®é¢˜çš„é£é™©ï¼Œç›¸äº’ä¹‹é—´çš„ä¾èµ–æ€§æ€¥å‰§ä¸‹é™ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;æ›´å°å•å…ƒ&lt;br/&gt;æ›´ç®€å•å¿«æ·çš„æµ‹è¯•ï¼Œæ¯ä¸€ä¸ªå°çš„å˜åŒ–ä¸å¿…å†è§¦ç¢°æ•´ä¸ªåº”ç”¨ç¨‹åºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;æŒç»­äº¤ä»˜&lt;br/&gt;æ›´å¿«äº¤ä»˜å®¢æˆ·ä»·å€¼ï¼Œæœ‰åŠ©äºæŒç»­é›†æˆã€æŒç»­éƒ¨ç½²ä»¥åŠæŒç»­äº¤ä»˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;ç¼ºç‚¹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;é…ç½®å¤æ‚&lt;br/&gt;singlespaç›¸å¯¹æ¥è¯´é…ç½®å¤æ‚ï¼Œå½“ç„¶æˆ‘ä»¬è¿˜æœ‰æ›´ç®€å•ä¸€ç‚¹çš„qiankunï¼Œä¹Ÿå¯ä»¥åŸºäºsinglespaå°è£…ä¸€å¥—æ›´é€‚åˆè‡ªå·±çš„æ¡†æ¶ã€‚&lt;/li&gt;
&lt;li&gt;ä¸€å®šçš„èµ„æºæµªè´¹&lt;br/&gt;ç”±äºæ ¸å¿ƒé€»è¾‘è¿˜æ˜¯åœ¨äºè¯·æ±‚manifestï¼Œæ‹¿åˆ°jsæ–‡ä»¶åæ‰§è¡Œæ¸²æŸ“ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸å¯é¿å…ä¼šäº§ç”Ÿä¸€äº›å†—ä½™ï¼Œå¯¹äºCç«¯çš„åº”ç”¨æ¥è¯´ï¼Œè¿™ä¸ªé—®é¢˜æ¯”è¾ƒè‡´å‘½ï¼Œå½“ç„¶ï¼Œå¯¹äºBç«¯æ¥è¯´ï¼Œè¿™ä¸ªæ˜¯å¯ä»¥æ¥å—çš„ï¼Œåœ¨å¯æ§åˆ¶çš„èŒƒå›´ä¹‹å†…&lt;/li&gt;
&lt;/ul&gt;&lt;p class=&quot;sync-line&quot; data-line=&quot;32&quot;&gt;Â &lt;/p&gt;

&lt;p&gt;å‡ å¼ å›¾å¯ä»¥è§£å†³singleSpaçš„æ ¸å¿ƒé€»è¾‘&lt;br/&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/ztfjs/841508/o_2011301725479072df3196964d51abc0e7f250332962.jpg&quot; alt=&quot;avatar&quot;/&gt;&lt;br/&gt;ç¬¬ä¸€å¼ å›¾ï¼Œå¾ˆæ˜¾ç„¶ï¼Œç¬¬ä¸€æ­¥ï¼Œåœ¨æˆ‘ä»¬çš„webpackåº”ç”¨é‡Œç”Ÿæˆä¸€ä¸ªmanifest.jsonæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å†…å®¹å·®ä¸å¤šå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;36&quot;&gt;Â &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;47&quot;&gt;
&lt;pre&gt;
&lt;span&gt;{
  &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;files&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;: {
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;static/js/0.chunk.js&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/static/js/0.chunk.js&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;static/js/0.chunk.js.map&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/static/js/0.chunk.js.map&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;static/js/1.chunk.js&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/static/js/1.chunk.js&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;static/js/1.chunk.js.map&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/static/js/1.chunk.js.map&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;main.js&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/static/js/main.chunk.js&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;main.js.map&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/static/js/main.chunk.js.map&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;runtime-main.js&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/static/js/bundle.js&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;runtime-main.js.map&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/static/js/bundle.js.map&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;index.html&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/index.html&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;static/media/logo.svg&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/static/media/logo.103b5fa1.svg&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
  },
  &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;entrypoints&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;: [
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;static/js/bundle.js&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;static/js/0.chunk.js&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;static/js/main.chunk.js&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
  ]
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;å…³é”®ç‚¹åœ¨ entrypoints è¿™ä¸ªå±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡manifestæ‹¿åˆ°é¡¹ç›®çš„ä¾èµ–è¡¨å¹¶å¯ä»¥ä½¿ç”¨scriptæ ‡ç­¾åŠ¨æ€åŠ è½½å‡ºæ¥ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥å®ç°åŠ¨æ€åŠ è½½ä¸åŒçš„å¾®å‰ç«¯åº”ç”¨äº†ã€‚&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;59&quot;&gt;Â &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/ztfjs/841508/o_201130174007%E6%97%A0%E6%A0%87%E9%A2%98%E7%BB%98%E5%9B%BE.jpg&quot; alt=&quot;avatar&quot;/&gt;&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;60&quot;&gt;Â &lt;/p&gt;
&lt;p&gt;ç¬¬äºŒå¼ å›¾ï¼Œæˆ‘ç”»å‡ºäº†æ›´åŠ å…·ä½“çš„ï¼Œsinglespaåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­çš„æ ¸å¿ƒé€»è¾‘&lt;br/&gt;1ã€ é¦–å…ˆæˆ‘ä»¬æœ‰ mainï¼ˆä¸»appï¼‰ childï¼ˆå­appï¼‰ï¼Œä¸»appåªæœ‰ä¸€ä¸ªï¼Œå­appå¯ä»¥æœ‰å¤šä¸ª&lt;br/&gt;2ã€ å…¶æ¬¡ï¼Œä¸»appä¸Šä¸€èˆ¬æˆ‘ä»¬å¯ä»¥åœ¨index.htmlé‡Œé¢ï¼Œå†™å¤šå‡ ä¸ªç©ºé—´ï¼Œä¹Ÿå°±æ˜¯å¤šå‡ ä¸ªdiv&lt;br/&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;65&quot;&gt;Â &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;id&lt;/span&gt;&lt;span&gt;=â€react-appâ€&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;id&lt;/span&gt;&lt;span&gt;=â€vue-appâ€&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;3ã€ç„¶åï¼Œåœ¨æˆ‘ä»¬çš„childä¸Šï¼Œæˆ‘ä»¬è¦ç”¨webpackæ’ä»¶ï¼Œç”Ÿæˆä¸€ä¸ªå¸¦æœ‰æ‰€æœ‰éœ€è¦åŠ è½½çš„ä¾èµ–æ–‡ä»¶çš„manifest.json&lt;br/&gt;4ã€ä¸»åº”ç”¨å»åŠ è½½è¿™ä¸ªmanifest.jsonï¼Œè·å–åˆ°å…·ä½“çš„jsï¼Œä½¿ç”¨scriptæ ‡ç­¾æŠŠå®ƒæ”¾åˆ°ä¸»åº”ç”¨ä¸Šï¼Œè¿›è¡Œæ¸²æŸ“&lt;/p&gt;
&lt;p&gt;è‡³æ­¤æˆ‘ä»¬å°±å¯ä»¥å®Œå…¨ææ¸…æ¥šï¼Œä¸ºä»€ä¹ˆsinglespaè¿™ä¹ˆç¥å¥‡äº†ï¼Œæ¥ä¸‹æ¥è®©æˆ‘ä»¬æ­å»ºä¸€ä¸ªç®€æ˜“ç‰ˆçš„singlespa&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;74&quot;&gt;Â &lt;/p&gt;

&lt;p class=&quot;sync-line&quot; data-line=&quot;76&quot;&gt;Â &lt;/p&gt;
&lt;h4 id=&quot;vue-main&quot; class=&quot;mume-header&quot;&gt;vue main&lt;/h4&gt;
&lt;p&gt;ç”±äºæˆ‘ä»¬éœ€è¦ä½¿ç”¨webpacké…ç½®ï¼Œè€Œæœ€æ–°ç‰ˆæœ¬çš„vue-clié»˜è®¤åªæœ‰babelï¼Œæˆ‘ä»¬ç”¨è¿™ä¸ªæ­¥éª¤æ¥å®‰è£…ä¸€ä¸ªvueç‰ˆæœ¬çš„main&lt;br/&gt;1ã€è£…åŒ…&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;79&quot;&gt;Â &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
 npm install @vue/cli @vue/cli-init  -g
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;2ã€åˆ›å»ºä¸€ä¸ªé¡¹ç›®&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;84&quot;&gt;Â &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
vue init webpack demo-single
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;3ã€cd demo-single&lt;/p&gt;
&lt;p&gt;4ã€è£…åŒ…&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;91&quot;&gt;Â &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
npm i single-spa single-spa-vue axios --save
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;5ã€åœ¨srcç›®å½•åˆ›å»ºä¸€ä¸ªsinglespaé…ç½®æ–‡ä»¶ single-spa-config.js&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;96&quot;&gt;Â &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;40&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;//&lt;/span&gt;&lt;span&gt; single-spa-config.js&lt;/span&gt;
    import * as singleSpa from 'single-spa'; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;å¯¼å…¥single-spa&lt;/span&gt;
    import axios from 'axios'

    &lt;span&gt;/*&lt;/span&gt;&lt;span&gt;
        runScriptï¼š
        ä¸€ä¸ªpromiseåŒæ­¥æ–¹æ³•ã€‚å¯ä»¥ä»£æ›¿åˆ›å»ºä¸€ä¸ªscriptæ ‡ç­¾ï¼Œç„¶ååŠ è½½æœåŠ¡
    &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;&lt;span&gt;
    const runScript &lt;/span&gt;= async (url) =&amp;gt;&lt;span&gt; {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; Promise((resolve, reject) =&amp;gt;&lt;span&gt; {
            const script &lt;/span&gt;= document.createElement('script'&lt;span&gt;);
            script.src &lt;/span&gt;=&lt;span&gt; url;
            script.onload &lt;/span&gt;=&lt;span&gt; resolve;
            script.onerror &lt;/span&gt;=&lt;span&gt; reject;
            const firstScript &lt;/span&gt;= document.getElementsByTagName('script')[0&lt;span&gt;];
            firstScript.parentNode.insertBefore(script, firstScript);
        });
    };

    const getManifest &lt;/span&gt;= (url, bundle) =&amp;gt; &lt;span&gt;new&lt;/span&gt; Promise(async (resolve) =&amp;gt;&lt;span&gt; {
        const { data } &lt;/span&gt;=&lt;span&gt; await axios.get(url);
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; eslint-disable-next-line no-console&lt;/span&gt;
        const { entrypoints } =&lt;span&gt; data;

        &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; (let i = 0; i &amp;lt; entrypoints.length; i++&lt;span&gt;) {
            await runScript(&lt;/span&gt;'http://127.0.0.1:3000/' + entrypoints[i]).then(() =&amp;gt;&lt;span&gt; {
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (i === entrypoints.length - 1&lt;span&gt;) {
                    resolve()
                }
            })
        }
    });

    singleSpa.registerApplication( &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;æ³¨å†Œå¾®å‰ç«¯æœåŠ¡&lt;/span&gt;
        'singleDemoVue', async () =&amp;gt;&lt;span&gt; {
            let singleVue &lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
            await getManifest(&lt;/span&gt;'http://127.0.0.1:3000/asset-manifest.json').then(() =&amp;gt;&lt;span&gt; {
                singleVue &lt;/span&gt;=&lt;span&gt; window.singleReact;
            });
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; singleVue;    
        },
        location &lt;/span&gt;=&amp;gt; location.pathname.startsWith('/react') &lt;span&gt;//&lt;/span&gt;&lt;span&gt; é…ç½®å‰ç¼€&lt;/span&gt;
&lt;span&gt;    );

    singleSpa.start(); &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¯åŠ¨&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;æ³¨ï¼š å¯ä»¥çœ‹åˆ°ï¼ŒrunScriptå°±æ˜¯ä¸ªåˆ›å»ºscriptæ ‡ç­¾çš„æ–¹æ³•ï¼ŒgetManifestæ˜¯ä¸€ä¸ªç®€å•çš„è·å–manifestå¹¶åˆ›å»ºscriptçš„æ–¹æ³•&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;6ã€åœ¨main.jsé‡Œå¼•å…¥è¿™ä¸ªæ–‡ä»¶&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;146&quot;&gt;Â &lt;/p&gt;
&lt;pre class=&quot;language-&quot; data-role=&quot;codeBlock&quot; data-info=&quot;&quot;&gt;
&lt;code&gt;import './single-spa-config'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;7ã€è¿è¡Œ&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
npm run dev
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;æœ€ç»ˆå¾—åˆ°è¿™æ ·ä¸€ä¸ªå·¥ç¨‹&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;155&quot;&gt;Â &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/ztfjs/841508/o_201130181531fc277894-9970-4acc-9170-0aef2e457fd5.png&quot; alt=&quot;avatar&quot;/&gt;&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;156&quot;&gt;Â &lt;/p&gt;
&lt;p&gt;è¿™æ ·æˆ‘ä»¬å°±å®Œæˆäº†ä¸€ä¸ªå…¥å£çš„é…ç½®ï¼Œå½“ç„¶å®ƒè¿˜å¾ˆç®€å•ï¼Œæ›´å¤æ‚çš„æ“ä½œæˆ‘ä»¬åº”è¯¥æ”¾åœ¨å…·ä½“çš„å·¥ç¨‹ä¸Šå»åš&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;160&quot;&gt;Â &lt;/p&gt;

&lt;p&gt;ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬registeräº†ä¸€ä¸ªreactåº”ç”¨Â &lt;a href=&quot;http://127.0.0.1:3000/asset-manifest.json&quot;&gt;http://127.0.0.1:3000/asset-manifest.json&lt;/a&gt;Â å¹¶ä¸”è®¿é—®äº†å®ƒçš„manifestæ–‡ä»¶ï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªreactå­åº”ç”¨ï¼Œä¹Ÿæ˜¯ç›´æ¥é€šè¿‡å‡ ä¸ªæ­¥éª¤æ¥å®Œæˆï¼Œæˆ‘ä»¬ä½¿ç”¨create-react-appæ¥å¿«é€Ÿæ­å»ºï¼š&lt;/p&gt;
&lt;p&gt;1ã€è£…åŒ…&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;165&quot;&gt;Â &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
npm install create-react-app -g
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;2ã€åˆ›å»º&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;169&quot;&gt;Â &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
npx create-react-app my-app
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;3ã€åˆ›å»ºå®Œæˆåï¼Œæ³¨æ„æˆ‘ä»¬éœ€è¦å¯¹webpackåšä¸€ç‚¹ä¿®æ”¹ï¼Œé»˜è®¤create-react-appä¼šæœ‰ä¸€ä¸ªgitæœ¬åœ°åˆ†æ”¯ï¼Œè®©æˆ‘ä»¬å…ˆæäº¤åˆ°æœ¬åœ°ä»“åº“ä¸€ä¸‹&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;173&quot;&gt;Â &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;git status
git add .&lt;/span&gt;/&lt;span&gt;
git commit &lt;/span&gt;-m ttt
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;4ã€æ‹¿åˆ°webpacké…ç½®æ–‡ä»¶ï¼Œcreate-react-appé»˜è®¤éšè—äº†webpacké…ç½®æ–‡ä»¶&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;179&quot;&gt;Â &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
yarn eject æˆ– npm run eject
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;5ã€ä¿®æ”¹webpackæ–‡ä»¶&lt;br/&gt;ä¿®æ”¹ /config/webpack.config.js åœ¨outputå¢åŠ ï¼š&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;184&quot;&gt;Â &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;output: {
    ... è¿™é‡Œå¿½ç•¥äº†åŸæœ‰çš„
    library: &lt;/span&gt;'singleReact'&lt;span&gt;,
    libraryTarget: &lt;/span&gt;'window'&lt;span&gt;
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/ztfjs/841508/o_2011301817110891255a-2940-44f5-a1b1-6bec5423c06d.png&quot; alt=&quot;avatar&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¿®æ”¹ /scripts/start.jsæ–‡ä»¶ï¼Œåœ¨const devServer = new ...è¿™ä¸ªåœ°æ–¹ï¼Œå¢åŠ ä¸€ä¸ªheaderçš„è®¾ç½®ï¼š&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;195&quot;&gt;Â &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
const devServer = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; WebpackDevServer(compiler, {
      ...serverConfig,
      &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; è¿™é‡Œä¸Šå¢åŠ çš„headerè®¾ç½®&lt;/span&gt;
&lt;span&gt;      headers: {
        &lt;/span&gt;'Access-Control-Allow-Origin': '*'&lt;span&gt;,
      }
  
    });&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/ztfjs/841508/o_20113018181813834fbd-2943-4980-aa4c-a0038b242b66.png&quot; alt=&quot;avatar&quot;/&gt;&lt;/p&gt;
&lt;p&gt;6ã€ä¿®æ”¹src/index.js&lt;br/&gt;ä¸€ä¸ªæ˜¯è¦æŠŠrootæ”¹ä¸ºåŠ¨æ€æ¸²æŸ“ï¼Œä¸€ä¸ªæ˜¯æ³¨å†Œç”Ÿå‘½å‘¨æœŸ&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;209&quot;&gt;Â &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;45&quot;&gt;
&lt;pre&gt;
import React from 'react'&lt;span&gt;;
import ReactDOM from &lt;/span&gt;'react-dom'&lt;span&gt;;
import &lt;/span&gt;'./index.css'&lt;span&gt;;
import App from &lt;/span&gt;'./App'&lt;span&gt;;
import reportWebVitals from &lt;/span&gt;'./reportWebVitals'&lt;span&gt;;
import singleSpaReact, {SingleSpaContext} from &lt;/span&gt;'single-spa-react'&lt;span&gt;;

const rootComponent &lt;/span&gt;= () =&amp;gt;&lt;span&gt; {
  ReactDOM.render(
      &lt;/span&gt;&amp;lt;React.StrictMode&amp;gt;
        &amp;lt;App /&amp;gt;
      &amp;lt;/React.StrictMode&amp;gt;
&lt;span&gt;    ,
    document.getElementById(&lt;/span&gt;'react-root'&lt;span&gt;)
  );
}

&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ReactDOM.render(&lt;/span&gt;&lt;span&gt;
//&lt;/span&gt;&lt;span&gt;   ,&lt;/span&gt;&lt;span&gt;
//&lt;/span&gt;&lt;span&gt;   document.getElementById('root')&lt;/span&gt;&lt;span&gt;
//&lt;/span&gt;&lt;span&gt; );&lt;/span&gt;
&lt;span&gt;

const reactLifecycles &lt;/span&gt;=&lt;span&gt; singleSpaReact({
  React,
  ReactDOM,
  rootComponent,
  errorBoundary(err, info, props) {
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; https://reactjs.org/docs/error-boundaries.html&lt;/span&gt;
&lt;span&gt;    console.error(err)
    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; (
      &lt;/span&gt;&amp;lt;div&amp;gt;This renders when a catastrophic error occurs&amp;lt;/div&amp;gt;
&lt;span&gt;    );
  },
});
export const bootstrap &lt;/span&gt;=&lt;span&gt; reactLifecycles.bootstrap;
export const mount &lt;/span&gt;=&lt;span&gt; reactLifecycles.mount;
export const unmount &lt;/span&gt;=&lt;span&gt; reactLifecycles.unmount;


&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; If you want to start measuring performance in your app, pass a function&lt;/span&gt;&lt;span&gt;
//&lt;/span&gt;&lt;span&gt; to log results (for example: reportWebVitals(console.log))&lt;/span&gt;&lt;span&gt;
//&lt;/span&gt;&lt;span&gt; or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals&lt;/span&gt;
reportWebVitals();
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;7ã€è¿è¡Œ&lt;br/&gt;npm run start&lt;/p&gt;
&lt;p&gt;8ã€åœ¨mainçš„vueé‚£é‡Œï¼Œè®¿é—®/react ä½ ä¼šçœ‹åˆ°ä¸‹é¢æœ‰ä¸€ä¸ªreactæ¸²æŸ“å’Œvueçš„ä¸€èµ·å‡ºç°ï¼Œå¤§åŠŸå‘Šæˆ&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;262&quot;&gt;Â &lt;/p&gt;

&lt;p&gt;ç”Ÿå‘½å‘¨æœŸå‡½æ•°å…±æœ‰4ä¸ªï¼šbootstrapã€mountã€unmountã€updateã€‚ç”Ÿå‘½å‘¨æœŸå¯ä»¥ä¼ å…¥ è¿”å›Promiseçš„å‡½æ•°ä¹Ÿå¯ä»¥ä¼ å…¥ è¿”å›Promiseå‡½æ•°çš„æ•°ç»„ã€‚&lt;br/&gt;å¼•ç”¨ä¸€ä¸ªå¤§ä½¬å®Œæ•´çš„è¯´æ˜, éå¸¸çš„è¯¦ç»†ï¼š&lt;br/&gt;&lt;a href=&quot;https://github.com/YataoZhang/my-single-spa/issues/4&quot;&gt;https://github.com/YataoZhang/my-single-spa/issues/4&lt;/a&gt;&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;267&quot;&gt;Â &lt;/p&gt;

&lt;p&gt;single spaå¯ä»¥ç»™æˆ‘ä»¬æä¾›ä¸€æ•´å¥—æ–¹æ¡ˆï¼Œå»æ­å»ºä¸€å¥—å¾®å‰ç«¯é›†æˆæ¡†æ¶ï¼Œä½†å®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªå¼€ç®±å³ç”¨çš„å°è£…ï¼Œå®ƒæœ‰å¾ˆå¤šçš„å‘ç­‰ç€æˆ‘ä»¬å»è¸©ã€‚&lt;br/&gt;ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨qiankunï¼Œå®ƒçš„å°è£…ç¨‹åº¦æ›´å¥½ï¼Œapiæ›´åŠ å‹å¥½ä¸€äº›ã€‚å¾…ç§¯æ”’è¶³å¤Ÿå¤šçš„ä½¿ç”¨ç»éªŒï¼Œå¯ä»¥è€ƒè™‘è‡ªç ”ä¸€å¥—è‡ªå·±çš„å¾®å‰ç«¯æ¡†æ¶ï¼Œå¢åŠ æ•´ä½“çš„å‰ç«¯ç ”å‘æ•ˆç‡ã€‚&lt;br/&gt;ä¸‹èŠ‚æˆ‘å°†ç»™å¤§å®¶å¸¦æ¥qiankunå¯¹singlespaçš„å°è£…ï¼Œåœ¨å…·ä½“åº”ç”¨ä¸­çš„å®è·µã€‚å¾…å®Œç»“æ¡†æ¶ç¯‡åï¼Œæˆ‘ä»¬å¯ä»¥å†æ·±å…¥æ¢ç©¶singlespaçš„å®ç°åŸç†ä»¥åŠå„ç§æ¦‚å¿µã€‚&lt;/p&gt;
&lt;p class=&quot;sync-line&quot; data-line=&quot;272&quot;&gt;Â &lt;/p&gt;

&lt;p&gt;single-spa æ–‡æ¡£:Â &lt;a href=&quot;https://single-spa.js.org/docs/getting-started-overview/&quot;&gt;https://single-spa.js.org/docs/getting-started-overview/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¾®å‰ç«¯ single-spa:Â &lt;a href=&quot;https://juejin.cn/post/6844903896884707342&quot;&gt;https://juejin.cn/post/6844903896884707342&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è¿™å¯èƒ½æ˜¯ä½ è§è¿‡æœ€å®Œå–„çš„å¾®å‰ç«¯è§£å†³æ–¹æ¡ˆï¼:Â &lt;a href=&quot;https://www.infoq.cn/article/o6GxRD9iHQOplKICiDDU&quot;&gt;https://www.infoq.cn/article/o6GxRD9iHQOplKICiDDU&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;single-spaå¾®å‰ç«¯:Â &lt;a href=&quot;http://www.soulapp.tech/2019/09/25/single-spa%E5%BE%AE%E5%89%8D%E7%AB%AF/&quot;&gt;http://www.soulapp.tech/2019/09/25/single-spaå¾®å‰ç«¯/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Single-Spa + Vue Cli å¾®å‰ç«¯è½åœ°æŒ‡å— (é¡¹ç›®éš”ç¦»è¿œç¨‹åŠ è½½ï¼Œè‡ªåŠ¨å¼•å…¥) :Â &lt;a href=&quot;https://juejin.cn/post/6844904025565954055&quot;&gt;https://juejin.cn/post/6844904025565954055&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Mon, 30 Nov 2020 21:24:00 +0000</pubDate>
<dc:creator>å¼ æ³°å³°</dc:creator>
<og:description>å¾®å‰ç«¯å¤§èµäºŒ-singlespaå®è·µ å¾®å‰ç«¯å¤§èµäºŒ-singlespaå®è·µ åº ä»‹ç»singleSpa singleSpaæ ¸å¿ƒé€»è¾‘ æ­å»ºç¯å¢ƒ vue main react child ç”Ÿå‘½å‘¨æœŸ ç»“è®º</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/ztfjs/p/single-spa2.html</dc:identifier>
</item>
<item>
<title>ã€æŠ“å–ã€‘6-DOF GraspNet è®ºæ–‡è§£è¯» - æ—¶å…‰æ¸…æµ…ï¼Œå²æœˆå«£ç„¶</title>
<link>http://www.cnblogs.com/hatimwen/p/6dofgraspnet.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/hatimwen/p/6dofgraspnet.html</guid>
<description>&lt;p&gt;&lt;strong&gt;ã€æ³¨ã€‘ï¼šæœ¬æ–‡åœ°å€ï¼š&lt;a href=&quot;https://www.cnblogs.com/hatimwen/p/6dofgraspnet.html&quot;&gt;ã€æŠ“å–ã€‘6-DOF GraspNet è®ºæ–‡è§£è¯»&lt;/a&gt;&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;è‹¥è½¬è½½è¯·äºæ˜æ˜¾å¤„æ ‡æ˜å‡ºå¤„ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;è¿™ç¯‡å…³äºç”ŸæˆæŠ“å–å§¿æ€çš„è®ºæ–‡å‡ºè‡ªè‹±ä¼Ÿè¾¾ã€‚æˆ‘åœ¨è¯»å®Œè¯¥ç¯‡è®ºæ–‡åæˆ‘ç®€å•åœ°å¯¹å…¶è¿›è¡Œä¸€äº›æ¦‚è¿°ï¼Œå¦‚æœ‰é”™è¯¯çº°æ¼è¯·æŒ‡æ­£ï¼&lt;/p&gt;
&lt;h2 id=&quot;è®ºæ–‡æ¦‚è¦&quot;&gt;è®ºæ–‡æ¦‚è¦&lt;/h2&gt;
&lt;p&gt;ç”ŸæˆæŠ“æ¡å§¿åŠ¿æ˜¯æœºå™¨äººç‰©ä½“æ“çºµä»»åŠ¡çš„å…³é”®ç»„æˆéƒ¨åˆ†ã€‚ åœ¨æœ¬å·¥ä½œä¸­ï¼Œä½œè€…æå‡ºäº†æŠ“å–ç”Ÿæˆé—®é¢˜ï¼Œå³ä½¿ç”¨&lt;strong&gt;å˜åˆ†è‡ªåŠ¨ç¼–ç å™¨&lt;/strong&gt;å¯¹ä¸€ç»„æŠ“å–è¿›è¡Œé‡‡æ ·ï¼Œå¹¶åˆ©ç”¨&lt;strong&gt;æŠ“å–è¯„ä¼°å™¨æ¨¡å‹&lt;/strong&gt;å¯¹é‡‡æ ·æŠ“å–è¿›è¡Œ&lt;strong&gt;è¯„ä¼°&lt;/strong&gt;å’Œ&lt;strong&gt;å¾®è°ƒç»†åŒ–&lt;/strong&gt;ã€‚ æŠ“å–é‡‡æ ·å™¨å’ŒæŠ“å–refineç½‘ç»œéƒ½ä»¥æ·±åº¦ç›¸æœºè§‚å¯Ÿåˆ°çš„&lt;strong&gt;ä¸‰ç»´ç‚¹äº‘ä½œä¸ºè¾“å…¥&lt;/strong&gt;ã€‚ ä½œè€…è¯„ä¼°äº†åœ¨æ¨¡æ‹Ÿå’Œç°å®ä¸–ç•Œæœºå™¨äººå®éªŒä¸­çš„æ–¹æ³•ã€‚ å…¶æ–¹æ³•åœ¨å…·æœ‰ä¸åŒå¤–è§‚ã€å°ºåº¦å’Œæƒé‡çš„å„ç§å¸¸ç”¨å¯¹è±¡ä¸Šè·å¾—&lt;strong&gt;88%çš„æˆåŠŸç‡&lt;/strong&gt;ã€‚ ä½œè€…ç›´æ¥åœ¨æ¨¡æ‹Ÿç¯å¢ƒä¸­è®­ç»ƒè€Œåœ¨ç°å®åœºæ™¯ä¸‹è¿›è¡Œå®éªŒæµ‹è¯•ï¼Œè¿™å…¶ä¸­æ²¡æœ‰ä»»ä½•é¢å¤–çš„æ­¥éª¤ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ•´ä½“ç½‘ç»œæ¦‚è¿°&quot;&gt;æ•´ä½“ç½‘ç»œæ¦‚è¿°&lt;/h2&gt;
&lt;p&gt;æ•´ä½“ç½‘ç»œç»“æ„å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130231941874.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hhdGltOTg=,size_16,color_FFFFFF,t_70#pic_center&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œè¾“å…¥ä¸‰ç»´ç‚¹äº‘ï¼Œé€šè¿‡ Grasp Sampler ä¹Ÿå°±æ˜¯æŠ“å–é‡‡æ ·ç½‘ç»œï¼Œå¾—åˆ°å¤šä¸ªæŠ“å–ï¼›ç„¶åé€šè¿‡ä¸€ä¸ª Grasp Evaluater ï¼Œè¯„ä¼°ä¸Šä¸€æ­¥ç”Ÿæˆçš„æŠ“å–çš„æˆåŠŸä¸å¦ï¼›åœ¨è¯„ä¼°è¿™ä¸€æ­¥ä¸­ï¼Œé€šè¿‡ Grasp Refinement å°†ä¼°è®¡çš„æŠ“å–ç»“æœè¿›è¡Œå¾®è°ƒï¼Œä½¿å…¶æ›´è´´è¿‘äºåˆç†æŠ“å–ï¼Œè¿›ä¸€æ­¥åœ°å¢å¤§äº†æŠ“å–çš„æˆåŠŸç‡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢å…·ä½“æ¥è®²ä¸€ä¸‹æ¯ä¸€éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;variational-grasp-sampler&quot;&gt;Variational Grasp Sampler&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130232015338.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hhdGltOTg=,size_16,color_FFFFFF,t_70#pic_center&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æŠ“å–é‡‡æ ·ç½‘ç»œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªVAEï¼Œä¹Ÿå°±æ˜¯å˜åˆ†è‡ªç¼–ç å™¨ã€‚è¾“å…¥ &lt;span class=&quot;math inline&quot;&gt;\(X\)&lt;/span&gt; æ˜¯å¯¹åŸå§‹ç›®æ ‡ä¸‰ç»´ç‚¹äº‘é‡‡æ ·å¾—åˆ°çš„å„ä¸ªè§†è§’ä¸‹çš„ç›®æ ‡ç‚¹äº‘ï¼Œ &lt;span class=&quot;math inline&quot;&gt;\(g\)&lt;/span&gt; å…¶å®å°±æ˜¯æŠ“å–å§¿æ€ï¼Œä¹Ÿå°±æ˜¯æŠ“å–å™¨åœ¨ç›®æ ‡åæ ‡ç³»ä¸‹çš„ &lt;span class=&quot;math inline&quot;&gt;\(R\)&lt;/span&gt; å’Œ &lt;span class=&quot;math inline&quot;&gt;\(T\)&lt;/span&gt;ã€‚é€šè¿‡VAEçš„ç¼–ç å™¨Qï¼Œå°†è¾“å…¥ç¼–ç åˆ°éšå±‚ç©ºé—´ï¼Œå¾—åˆ°ä½ç»´åº¦çš„éšå±‚å˜é‡ &lt;span class=&quot;math inline&quot;&gt;\(z\)&lt;/span&gt; ï¼Œä½¿å…¶æ»¡è¶³&lt;strong&gt;å•ä½é«˜æ–¯åˆ†å¸ƒ&lt;/strong&gt;ï¼›ç„¶åå†é€šè¿‡å¯¹éšå±‚å˜é‡ &lt;span class=&quot;math inline&quot;&gt;\(z\)&lt;/span&gt; è§£ç ï¼Œå¾—åˆ°ä¸è¾“å…¥ç›¸è¿‘çš„ &lt;span class=&quot;math inline&quot;&gt;\(g\)&lt;/span&gt; ã€‚æ•´ä¸ªVAEçš„è®­ç»ƒè¿‡ç¨‹å°±æ˜¯è®©zå°½é‡æœä»ä¸Šé¢æ‰€è¯´çš„å•ä½é«˜æ–¯åˆ†å¸ƒï¼Œæ‰€ä»¥åœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œå»æ‰Encoderï¼Œç›´æ¥åœ¨å•ä½é«˜æ–¯åˆ†å¸ƒä¸­éšæœºå–æ ·ï¼Œå–ä»£äº†éœ€è¦ç¼–ç å¾—åˆ°çš„éšå±‚å˜é‡ &lt;span class=&quot;math inline&quot;&gt;\(z\)&lt;/span&gt; ï¼Œå†åŠ ä¸Šè¾“å…¥ç‚¹äº‘ &lt;span class=&quot;math inline&quot;&gt;\(X\)&lt;/span&gt; ï¼Œå°±å¯ä»¥å¾—åˆ°ç½‘ç»œæ‰€è®¤ä¸ºçš„ç»å¯¹æ­£ç¡®çš„é‡å»ºæŠ“å– &lt;span class=&quot;math inline&quot;&gt;\(\hat{g}\)&lt;/span&gt; ã€‚åœ¨è®­ç»ƒä¸­ï¼ŒVAEçš„æŸå¤±å‡½æ•°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;\[\mathcal{L}_{\mathrm{vae}}=\sum_{z \sim Q, g \sim G^{*}} \mathcal{L}(\hat{g}, g)-\alpha \mathcal{D}_{K L}[Q(z \mid X, g), \mathcal{N}(0, I)] \]&lt;/p&gt;
&lt;p&gt;è¯¥å¼é‡‡ç”¨éšæœºæ¢¯åº¦ä¸‹é™ä¼˜åŒ–ã€‚ å¯¹äºæ¯ä¸ªmini-batchï¼Œç‚¹äº‘ &lt;span class=&quot;math inline&quot;&gt;\(X\)&lt;/span&gt; ä»éšæœºè§†ç‚¹è§‚å¯Ÿé‡‡æ ·ã€‚ å¯¹äºé‡‡æ ·ç‚¹äº‘ &lt;span class=&quot;math inline&quot;&gt;\(X\)&lt;/span&gt; ï¼ŒæŠ“å– &lt;span class=&quot;math inline&quot;&gt;\(g\)&lt;/span&gt; ä»Ground Truthé›†åˆ&lt;span class=&quot;math inline&quot;&gt;\(G^{*}\)&lt;/span&gt;é‡‡ç”¨åˆ†å±‚é‡‡æ ·ã€‚&lt;br/&gt;ä¸Šå¼ä¸­çš„ &lt;span class=&quot;math inline&quot;&gt;\(\mathcal{L}(g, \hat{g})\)&lt;/span&gt; å…·ä½“å¼å­å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;\[\mathcal{L}(g, \hat{g})=\frac{1}{n} \sum\|\mathcal{T}(g ; p)-\mathcal{T}(\hat{g} ; p)\|_{1} \]&lt;/p&gt;
&lt;p&gt;æ­¤å¼çº¦æŸé‡å»ºæŠ“å–ä¸è¾“å…¥æŠ“å–ç›¸è¿‘ã€‚ &lt;span class=&quot;math inline&quot;&gt;\(\mathcal{T}(\cdot ; p)\)&lt;/span&gt; æ˜¯æœºå™¨äººå¤¹æŒå™¨ä¸Šä¸€ç»„é¢„å®šä¹‰ç‚¹ &lt;span class=&quot;math inline&quot;&gt;\(p\)&lt;/span&gt; çš„å˜æ¢ï¼Œä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæ¢å¥è¯è¯´å°±æ˜¯ï¼Œåœ¨ç›®æ ‡åæ ‡ç³»ä¸­ï¼ŒæŠŠæŠ“å–å™¨çš„æ¨¡å‹é€šè¿‡ &lt;span class=&quot;math inline&quot;&gt;\(R\)&lt;/span&gt; å’Œ &lt;span class=&quot;math inline&quot;&gt;\(T\)&lt;/span&gt; ä½œå˜æ¢ï¼Œä»è€Œè½¬å˜ä¸ºç›®æ ‡åæ ‡ç³»ä¸‹çš„æŠ“å–å™¨ç‚¹äº‘ã€‚&lt;/p&gt;
&lt;h2 id=&quot;grasp-pose-evaluation&quot;&gt;Grasp Pose Evaluation&lt;/h2&gt;
&lt;p&gt;å› ä¸ºå‰ä¸€æ­¥ç”Ÿæˆçš„æŠ“å–åœ¨ç½‘ç»œçœ‹æ¥ä»–ä¸€å®šæ˜¯æ­£ç¡®çš„ï¼ˆå› ä¸ºä»–è®¤ä¸ºè‡ªå·±çš„ &lt;span class=&quot;math inline&quot;&gt;\(z\)&lt;/span&gt; æœä»å•ä½é«˜æ–¯åˆ†å¸ƒï¼Œé‚£ä¹ˆä»å•ä½é«˜æ–¯åˆ†å¸ƒä¸­å–æ ·é‡å»ºå‡ºçš„ &lt;span class=&quot;math inline&quot;&gt;\(\hat{g}\)&lt;/span&gt; ä¸€å®šæ˜¯æ­£ç¡®çš„æŠ“å–ï¼‰ï¼Œæ‰€ä»¥å®é™…ä¸Šè¦æƒ³çŸ¥é“ç”Ÿæˆçš„æŠ“å–åœ¨æˆ‘ä»¬çœ‹æ¥æ˜¯å¦å¯è¡Œï¼Œå°±è¿˜éœ€è¦åŠ ä¸€ä¸ªåˆ¤æ–­ã€‚å› æ­¤ä½œè€…åœ¨æŠ“å–é‡‡æ ·ç½‘ç»œä¹‹ååŠ äº†ä¸ªæŠ“å–å§¿æ€è¯„ä¼°ç½‘ç»œã€‚&lt;/p&gt;
&lt;p&gt;æ•´ä¸ªè¯„ä¼°ç½‘ç»œå®è´¨ä¸Šæ˜¯ä¸€ä¸ª&lt;strong&gt;äºŒåˆ†ç±»ç½‘ç»œ&lt;/strong&gt;ï¼Œè¾“å…¥æ˜¯ç›®æ ‡å’ŒæŠ“å–å™¨çš„åˆæˆæ¸²æŸ“ç‚¹äº‘ &lt;span class=&quot;math inline&quot;&gt;\(X \cup X_{g}\)&lt;/span&gt; ï¼Œè¾“å‡ºæ˜¯æˆåŠŸç‡ &lt;span class=&quot;math inline&quot;&gt;\(s\)&lt;/span&gt; ã€‚åˆ©ç”¨&lt;strong&gt;äº¤å‰ç†µæŸå¤±&lt;/strong&gt;ä¼˜åŒ–æŠ“å–è¯„ä»·ç½‘ç»œï¼š&lt;/p&gt;
&lt;p&gt;\[\mathcal{L}_{\text {evaluator }}=-(y \log (s)+(1-y) \log (1-s)) \]&lt;/p&gt;
&lt;p&gt;å¼ä¸­ &lt;span class=&quot;math inline&quot;&gt;\(y\)&lt;/span&gt; æ˜¯æŠ“å–çš„Ground TruthäºŒè¿›åˆ¶æ ‡ç­¾ï¼Œ1/0 ä»£è¡¨ æˆåŠŸ/å¤±è´¥ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è®­ç»ƒä¸­é‡‡å–äº†hard negative miningï¼ˆæœ‰ç¿»è¯‘å«ä»–éš¾è´Ÿä¾‹æŒ–æ˜ï¼‰ï¼Œç®€å•ä¿©è¯´å°±æ˜¯å»ºç«‹äº†ä¸€ä¸ªé”™é¢˜é›† &lt;span class=&quot;math inline&quot;&gt;\(G^{-}\)&lt;/span&gt; ï¼š&lt;/p&gt;
&lt;p&gt;\[G^{-}=\left\{g^{-} \mid \exists g \in G^{*}: \mathcal{L}\left(g, g^{-}\right)&amp;lt;\epsilon\right\} \]&lt;/p&gt;
&lt;p&gt;åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œè¿™ä¸ªé”™é¢˜é›†ä¸­åŒ…å«ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;ä»ä¸€ç»„é¢„å…ˆç”Ÿæˆçš„è´ŸæŠ“å–ä¸­é‡‡æ · &lt;span class=&quot;math inline&quot;&gt;\(g^{-}\)&lt;/span&gt; ;&lt;/li&gt;
&lt;li&gt;æˆ–è€…é€šè¿‡éšæœºæ‰°åŠ¨æ­£æŠ“å–é›† &lt;span class=&quot;math inline&quot;&gt;\(G^{*}\)&lt;/span&gt; ä¸­çš„ &lt;span class=&quot;math inline&quot;&gt;\(g\)&lt;/span&gt; ä½¿å¤¹æŒå™¨çš„ç½‘æ ¼è¦ä¹ˆä¸ç‰©ä½“ç½‘æ ¼ç¢°æ’ï¼Œè¦ä¹ˆå°†å¤¹æŒå™¨ç½‘æ ¼è¿œç¦»ç‰©ä½“ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;h2 id=&quot;iterative-grasp-pose-refinement&quot;&gt;Iterative Grasp Pose Refinement&lt;/h2&gt;
&lt;p&gt;å‰é¢è¯´å®Œäº†ï¼Œè¿™ä¸€éƒ¨åˆ†æˆ‘è§‰å¾—æ‰æ˜¯é‡ç‚¹éƒ¨åˆ†ï¼é€šè¿‡å‰é¢çš„è¯„ä¼°ï¼Œå·²ç»å¾—åˆ°äº†ä¸€äº›æˆåŠŸå’Œå¤±è´¥çš„æŠ“å–ä¾‹å­ï¼Œé‚£ä¹ˆæ€ä¹ˆæé«˜æˆåŠŸç‡å‘¢ï¼Ÿæ¢å¥è¯è¯´ï¼Œæ€ä¹ˆè®©ä¼°è®¡å‡ºæ¥çš„æŠ“å– &lt;span class=&quot;math inline&quot;&gt;\(g\)&lt;/span&gt; æ›´å¥½å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œä½œè€…æƒ³åˆ°äº†ä¸€ä¸ªå·§å¦™çš„åŠæ³•ï¼Œæ—¢ç„¶è¯„ä¼°ç½‘ç»œä¸­çš„ &lt;span class=&quot;math inline&quot;&gt;\(s\)&lt;/span&gt; è¶Šå¤§ä»£è¡¨è¶Šå¯èƒ½æˆåŠŸï¼Œé‚£ä¹ˆä½¿å¾—è¿™äº› &lt;span class=&quot;math inline&quot;&gt;\(s\)&lt;/span&gt; éƒ½å°½å¯èƒ½åœ°å˜å¤§å¹¶ä¸”è¶‹è¿‘äº1ä¹Ÿå°±èƒ½è®©æŠ“å– &lt;span class=&quot;math inline&quot;&gt;\(g\)&lt;/span&gt; æ›´å¥½äº†å‘—~&lt;/p&gt;
&lt;p&gt;å®é™…ä¸Šè¿™å°±ä»£è¡¨äº†èƒ½è®© &lt;span class=&quot;math inline&quot;&gt;\(s\)&lt;/span&gt; ç›¸å¯¹äº &lt;span class=&quot;math inline&quot;&gt;\(g\)&lt;/span&gt; çš„å‡½æ•° &lt;span class=&quot;math inline&quot;&gt;\(S\)&lt;/span&gt; å€¼å˜å¤§çš„æ–¹å‘ã€‚è¿™ä¸ªæ–¹å‘å°±æ˜¯ &lt;span class=&quot;math inline&quot;&gt;\(S\)&lt;/span&gt; ç›¸å¯¹äº &lt;span class=&quot;math inline&quot;&gt;\(g\)&lt;/span&gt; çš„æ¢¯åº¦æ–¹å‘ï¼Œä¹Ÿå°±å¾—åˆ°äº†ä¸‹é¢çš„å¼å­ï¼š&lt;/p&gt;
&lt;p&gt;\[\Delta g=\frac{\partial S}{\partial g}=\eta \times \frac{\partial S}{\partial \mathcal{T}(g ; p)} \times \frac{\partial \mathcal{T}(g ; p)}{\partial g} \]&lt;/p&gt;
&lt;p&gt;å¦‚æœä¸Šé¢ä¸ç†è§£ï¼Œä¹Ÿæ²¡å…³ç³»ï¼Œæœ‰ç‚¹ç»•å£ã€‚æˆ‘è¯´ä¸€ä¸ªä¸€ç»´æ›²çº¿çš„ä¾‹å­ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201201001710564.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0hhdGltOTg=,size_16,color_FFFFFF,t_70#pic_center&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ&lt;span class=&quot;math inline&quot;&gt;\(y=f(\theta x)\)&lt;/span&gt; ä»£è¡¨æ‹Ÿåˆå‡ºæ¥çš„æ›²çº¿ï¼Œå…¶ä¸­ &lt;span class=&quot;math inline&quot;&gt;\(\theta\)&lt;/span&gt; ä»£è¡¨ &lt;span class=&quot;math inline&quot;&gt;\(x\)&lt;/span&gt; çš„ç³»æ•°ï¼ˆç­‰åŒäºç½‘ç»œçš„æƒé‡å‚æ•°ï¼‰ã€‚ç°åœ¨å‡å¦‚è¾“å…¥æ˜¯ &lt;span class=&quot;math inline&quot;&gt;\(x_{1}\)&lt;/span&gt; ï¼Œè¾“å‡ºæ˜¯ &lt;span class=&quot;math inline&quot;&gt;\(y_{1}\)&lt;/span&gt;ï¼Œç„¶åæˆ‘å·²çŸ¥ &lt;span class=&quot;math inline&quot;&gt;\(y_{2}\)&lt;/span&gt; æ˜¯ä¸€ä¸ªæ›´å¥½æ›´å¤§çš„è¾“å‡ºå€¼ï¼Œé‚£ä¹ˆæˆ‘å°±éœ€è¦æ”¹å˜ &lt;span class=&quot;math inline&quot;&gt;\(x\)&lt;/span&gt; çš„å€¼ï¼Œè®© &lt;span class=&quot;math inline&quot;&gt;\(x_{1}\)&lt;/span&gt; å˜æˆ &lt;span class=&quot;math inline&quot;&gt;\(x_{2}\)&lt;/span&gt; ï¼š&lt;/p&gt;
&lt;p&gt;\[x_{2}=x_{1}+\Delta x \]&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆå˜åŒ–é‡ &lt;span class=&quot;math inline&quot;&gt;\(\Delta x\)&lt;/span&gt; æ€ä¹ˆå¾—åˆ°å‘¢ï¼Ÿåœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œ &lt;span class=&quot;math inline&quot;&gt;\(x\)&lt;/span&gt; å˜åŒ–æ— éä¸¤ç§æƒ…å†µï¼Œè¦ä¹ˆå˜å¤§è¦ä¹ˆå˜å°ï¼Œè¦æƒ³çŸ¥é“æˆ‘ä»¬éœ€è¦ä»–å˜å¤§è¿˜æ˜¯å˜å°ï¼Œåªéœ€è¦è®©å‡½æ•° &lt;span class=&quot;math inline&quot;&gt;\(f\)&lt;/span&gt; å¯¹ &lt;span class=&quot;math inline&quot;&gt;\(x\)&lt;/span&gt; æ±‚å¯¼å°±å¾—åˆ°äº†æ–œç‡ï¼Œæ–œç‡å°±æŒ‡æ˜äº† &lt;span class=&quot;math inline&quot;&gt;\(x\)&lt;/span&gt; å˜åŒ–æ–¹å‘ã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œé¢ &lt;span class=&quot;math inline&quot;&gt;\(x\)&lt;/span&gt; å˜åŒ–æ–¹å‘æ˜¯ &lt;span class=&quot;math inline&quot;&gt;\(x\)&lt;/span&gt; è½´çš„æ­£æ–¹å‘ã€‚å¾—åˆ°äº†å˜åŒ–æ–¹å‘æˆ‘ä»¬ä¹˜ä¸Šä¸€ä¸ªæ­¥é•¿ &lt;span class=&quot;math inline&quot;&gt;\(\eta\)&lt;/span&gt; å°±å¾—åˆ°äº†æˆ‘ä»¬éœ€è¦çš„å˜åŒ–é‡ &lt;span class=&quot;math inline&quot;&gt;\(\Delta x\)&lt;/span&gt; ï¼š&lt;/p&gt;
&lt;p&gt;\[\frac{\partial f}{\partial x} \cdot \eta=\Delta x \]&lt;/p&gt;
&lt;h2 id=&quot;experiments&quot;&gt;Experiments&lt;/h2&gt;
&lt;p&gt;å®éªŒéƒ¨åˆ†æš‚æ—¶ä¸è¯´äº†ï¼Œä½œè€…è¯´è¿™æŠ“å–æ•ˆæœå°±æ˜¯å¥½åæ­£ã€‚å…¶ä»–è‡ªå¯¹æ¯”å®éªŒä¹Ÿå¾ˆæœ‰æ„ä¹‰ï¼Œæœ‰ç©ºå†æ›´ã€‚&lt;/p&gt;
</description>
<pubDate>Mon, 30 Nov 2020 16:39:00 +0000</pubDate>
<dc:creator>æ—¶å…‰æ¸…æµ…ï¼Œå²æœˆå«£ç„¶</dc:creator>
<og:description>6-DOF GraspNet è®ºæ–‡è§£è¯»</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/hatimwen/p/6dofgraspnet.html</dc:identifier>
</item>
<item>
<title>Prometheus+Grafana+Alertmanagerå®ç°å‘Šè­¦æ¨é€æ•™ç¨‹ ----- å›¾æ–‡è¯¦è§£ - è™šæ— å¢ƒ</title>
<link>http://www.cnblogs.com/xuwujing/p/14065740.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/xuwujing/p/14065740.html</guid>
<description>&lt;h2 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯Prometheusé‡‡é›†æ•°æ®ï¼Œé€šè¿‡GrafanaåŠ ä¸ŠPromQLè¯­å¥å®ç°æ•°æ®å¯è§†åŒ–ä»¥åŠé€šè¿‡Alertmanageå®ç°å‘Šè­¦æ¨é€åŠŸèƒ½ã€‚æ¸©é¦¨æç¤ºï¼Œæœ¬ç¯‡æ–‡ç« ç‰¹é•¿ï¼Œ2wå¤šçš„æ–‡å­—åŠ ä¸Šå‡ åå¼ å›¾ç‰‡ï¼Œå»ºè®®æ”¶è—è§‚çœ‹ã€‚&lt;/p&gt;
&lt;h2 id=&quot;prometheus-ä»‹ç»&quot;&gt;Prometheus ä»‹ç»&lt;/h2&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;Prometheus æ˜¯ä¸€å¥—å¼€æºçš„ç³»ç»Ÿç›‘æ§æŠ¥è­¦æ¡†æ¶ã€‚å®ƒå¯å‘äº Google çš„ borgmon ç›‘æ§ç³»ç»Ÿï¼Œç”±å·¥ä½œåœ¨ SoundCloud çš„ google å‰å‘˜å·¥åœ¨ 2012 å¹´åˆ›å»ºï¼Œä½œä¸ºç¤¾åŒºå¼€æºé¡¹ç›®è¿›è¡Œå¼€å‘ï¼Œå¹¶äº 2015 å¹´æ­£å¼å‘å¸ƒã€‚2016 å¹´ï¼ŒPrometheus æ­£å¼åŠ å…¥ Cloud Native Computing Foundationï¼Œæˆä¸ºå—æ¬¢è¿åº¦ä»…æ¬¡äº Kubernetes çš„é¡¹ç›®ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä½œä¸ºæ–°ä¸€ä»£çš„ç›‘æ§æ¡†æ¶ï¼ŒPrometheus å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å¼ºå¤§çš„å¤šç»´åº¦æ•°æ®æ¨¡å‹ï¼š æ—¶é—´åºåˆ—æ•°æ®é€šè¿‡ metric åå’Œé”®å€¼å¯¹æ¥åŒºåˆ†ã€‚ æ‰€æœ‰çš„ metrics éƒ½å¯ä»¥è®¾ç½®ä»»æ„çš„å¤šç»´æ ‡ç­¾ã€‚&lt;/li&gt;
&lt;li&gt;æ•°æ®æ¨¡å‹æ›´éšæ„ï¼Œä¸éœ€è¦åˆ»æ„è®¾ç½®ä¸ºä»¥ç‚¹åˆ†éš”çš„å­—ç¬¦ä¸²ã€‚ å¯ä»¥å¯¹æ•°æ®æ¨¡å‹è¿›è¡Œèšåˆï¼Œåˆ‡å‰²å’Œåˆ‡ç‰‡æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;æ”¯æŒåŒç²¾åº¦æµ®ç‚¹ç±»å‹ï¼Œæ ‡ç­¾å¯ä»¥è®¾ä¸ºå…¨unicodeã€‚ çµæ´»è€Œå¼ºå¤§çš„æŸ¥è¯¢è¯­å¥ï¼ˆPromQLï¼‰ï¼šåœ¨åŒä¸€ä¸ªæŸ¥è¯¢è¯­å¥ï¼Œå¯ä»¥å¯¹å¤šä¸ª metricsè¿›è¡Œä¹˜æ³•ã€åŠ æ³•ã€è¿æ¥ã€å–åˆ†æ•°ä½ç­‰æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;æ˜“äºç®¡ç†ï¼š Prometheus serveræ˜¯ä¸€ä¸ªå•ç‹¬çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¯ç›´æ¥åœ¨æœ¬åœ°å·¥ä½œï¼Œä¸ä¾èµ–äºåˆ†å¸ƒå¼å­˜å‚¨ã€‚ é«˜æ•ˆï¼šå¹³å‡æ¯ä¸ªé‡‡æ ·ç‚¹ä»…å  3.5 bytesï¼Œä¸”ä¸€ä¸ª Prometheus server å¯ä»¥å¤„ç†æ•°ç™¾ä¸‡çš„ metricsã€‚ ä½¿ç”¨ pullæ¨¡å¼é‡‡é›†æ—¶é—´åºåˆ—æ•°æ®ï¼Œè¿™æ ·ä¸ä»…æœ‰åˆ©äºæœ¬æœºæµ‹è¯•è€Œä¸”å¯ä»¥é¿å…æœ‰é—®é¢˜çš„æœåŠ¡å™¨æ¨é€åçš„ metricsã€‚ å¯ä»¥é‡‡ç”¨ push gateway çš„æ–¹å¼æŠŠæ—¶é—´åºåˆ—æ•°æ®æ¨é€è‡³ Prometheus server ç«¯ã€‚ å¯ä»¥é€šè¿‡æœåŠ¡å‘ç°æˆ–è€…é™æ€é…ç½®å»è·å–ç›‘æ§çš„ targetsã€‚&lt;/li&gt;
&lt;li&gt;æœ‰å¤šç§å¯è§†åŒ–å›¾å½¢ç•Œé¢ã€‚ æ˜“äºä¼¸ç¼©ã€‚ éœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼Œç”±äºæ•°æ®é‡‡é›†å¯èƒ½ä¼šæœ‰ä¸¢å¤±ï¼Œæ‰€ä»¥ Prometheus ä¸é€‚ç”¨å¯¹é‡‡é›†æ•°æ®è¦ 100%&lt;/li&gt;
&lt;li&gt;å‡†ç¡®çš„æƒ…å½¢ã€‚ä½†å¦‚æœç”¨äºè®°å½•æ—¶é—´åºåˆ—æ•°æ®ï¼ŒPrometheus å…·æœ‰å¾ˆå¤§çš„æŸ¥è¯¢ä¼˜åŠ¿ï¼Œæ­¤å¤–ï¼ŒPrometheus é€‚ç”¨äºå¾®æœåŠ¡çš„ä½“ç³»æ¶æ„ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹å›¾:&lt;/strong&gt;&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130161151142.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;prometheusçš„é€‚ç”¨åœºæ™¯&quot;&gt;Prometheusçš„é€‚ç”¨åœºæ™¯&lt;/h3&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;åœ¨é€‰æ‹©Prometheusä½œä¸ºç›‘æ§å·¥å…·å‰ï¼Œè¦æ˜ç¡®å®ƒçš„é€‚ç”¨èŒƒå›´ï¼Œä»¥åŠä¸é€‚ç”¨çš„åœºæ™¯ã€‚&lt;br/&gt;Prometheusåœ¨è®°å½•çº¯æ•°å€¼æ—¶é—´åºåˆ—æ–¹é¢è¡¨ç°éå¸¸å¥½ã€‚å®ƒæ—¢é€‚ç”¨äºä»¥æœåŠ¡å™¨ä¸ºä¸­å¿ƒçš„ç›‘æ§ï¼Œä¹Ÿé€‚ç”¨äºé«˜åŠ¨æ€çš„é¢å‘æœåŠ¡æ¶æ„çš„ç›‘æ§ã€‚&lt;br/&gt;åœ¨å¾®æœåŠ¡çš„ç›‘æ§ä¸Šï¼ŒPrometheuså¯¹å¤šç»´åº¦æ•°æ®é‡‡é›†åŠæŸ¥è¯¢çš„æ”¯æŒä¹Ÿæ˜¯ç‰¹æ®Šçš„ä¼˜åŠ¿ã€‚&lt;br/&gt;Prometheusæ›´å¼ºè°ƒå¯é æ€§ï¼Œå³ä½¿åœ¨æ•…éšœçš„æƒ…å†µä¸‹ä¹Ÿèƒ½æŸ¥çœ‹ç³»ç»Ÿçš„ç»Ÿè®¡ä¿¡æ¯ã€‚æƒè¡¡åˆ©å¼Šï¼Œä»¥å¯èƒ½ä¸¢å¤±å°‘é‡æ•°æ®ä¸ºä»£ä»·ç¡®ä¿æ•´ä¸ªç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚å› æ­¤ï¼Œå®ƒä¸é€‚ç”¨äºå¯¹æ•°æ®å‡†ç¡®ç‡è¦æ±‚100%çš„ç³»ç»Ÿï¼Œæ¯”å¦‚å®æ—¶è®¡è´¹ç³»ç»Ÿï¼ˆæ¶‰åŠåˆ°é’±ï¼‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;prometheusæ ¸å¿ƒç»„ä»¶ä»‹ç»&quot;&gt;Prometheusæ ¸å¿ƒç»„ä»¶ä»‹ç»&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Prometheus Server:&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;Prometheus Serveræ˜¯Prometheusç»„ä»¶ä¸­çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œè´Ÿè´£å®ç°å¯¹ç›‘æ§æ•°æ®çš„è·å–ï¼Œå­˜å‚¨ä»¥åŠæŸ¥è¯¢ã€‚ Prometheus Serverå¯ä»¥é€šè¿‡é™æ€é…ç½®ç®¡ç†ç›‘æ§ç›®æ ‡ï¼Œä¹Ÿå¯ä»¥é…åˆä½¿ç”¨Service Discoveryçš„æ–¹å¼åŠ¨æ€ç®¡ç†ç›‘æ§ç›®æ ‡ï¼Œå¹¶ä»è¿™äº›ç›‘æ§ç›®æ ‡ä¸­è·å–æ•°æ®ã€‚å…¶æ¬¡Prometheus Serveréœ€è¦å¯¹é‡‡é›†åˆ°çš„ç›‘æ§æ•°æ®è¿›è¡Œå­˜å‚¨ï¼ŒPrometheus Serveræœ¬èº«å°±æ˜¯ä¸€ä¸ªæ—¶åºæ•°æ®åº“ï¼Œå°†é‡‡é›†åˆ°çš„ç›‘æ§æ•°æ®æŒ‰ç…§æ—¶é—´åºåˆ—çš„æ–¹å¼å­˜å‚¨åœ¨æœ¬åœ°ç£ç›˜å½“ä¸­ã€‚æœ€åPrometheus Serverå¯¹å¤–æä¾›äº†è‡ªå®šä¹‰çš„PromQLè¯­è¨€ï¼Œå®ç°å¯¹æ•°æ®çš„æŸ¥è¯¢ä»¥åŠåˆ†æã€‚ Prometheus Serverå†…ç½®çš„Express Browser UIï¼Œé€šè¿‡è¿™ä¸ªUIå¯ä»¥ç›´æ¥é€šè¿‡PromQLå®ç°æ•°æ®çš„æŸ¥è¯¢ä»¥åŠå¯è§†åŒ–ã€‚ Prometheus Serverçš„è”é‚¦é›†ç¾¤èƒ½åŠ›å¯ä»¥ä½¿å…¶ä»å…¶ä»–çš„Prometheus Serverå®ä¾‹ä¸­è·å–æ•°æ®ï¼Œå› æ­¤åœ¨å¤§è§„æ¨¡ç›‘æ§çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡è”é‚¦é›†ç¾¤ä»¥åŠåŠŸèƒ½åˆ†åŒºçš„æ–¹å¼å¯¹Prometheus Serverè¿›è¡Œæ‰©å±•ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;Exporters:&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;Exporterå°†ç›‘æ§æ•°æ®é‡‡é›†çš„ç«¯ç‚¹é€šè¿‡HTTPæœåŠ¡çš„å½¢å¼æš´éœ²ç»™Prometheus Serverï¼ŒPrometheus&lt;br/&gt;Serveré€šè¿‡è®¿é—®è¯¥Exporteræä¾›çš„Endpointç«¯ç‚¹ï¼Œå³å¯è·å–åˆ°éœ€è¦é‡‡é›†çš„ç›‘æ§æ•°æ®ã€‚ ä¸€èˆ¬æ¥è¯´å¯ä»¥å°†Exporteråˆ†ä¸º2ç±»ï¼š&lt;br/&gt;ç›´æ¥é‡‡é›†ï¼šè¿™ä¸€ç±»Exporterç›´æ¥å†…ç½®äº†å¯¹Prometheusç›‘æ§çš„æ”¯æŒï¼Œæ¯”å¦‚cAdvisorï¼ŒKubernetesï¼ŒEtcdï¼ŒGokitç­‰ï¼Œéƒ½ç›´æ¥å†…ç½®äº†ç”¨äºå‘Prometheusæš´éœ²ç›‘æ§æ•°æ®çš„ç«¯ç‚¹ã€‚&lt;br/&gt;é—´æ¥é‡‡é›†ï¼šé—´æ¥é‡‡é›†ï¼ŒåŸæœ‰ç›‘æ§ç›®æ ‡å¹¶ä¸ç›´æ¥æ”¯æŒPrometheusï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦é€šè¿‡Prometheusæä¾›çš„Client Libraryç¼–å†™è¯¥ç›‘æ§ç›®æ ‡çš„ç›‘æ§é‡‡é›†ç¨‹åºã€‚ä¾‹å¦‚ï¼š Mysql Exporterï¼ŒJMX Exporterï¼ŒConsul Exporterç­‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;PushGateway:&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;åœ¨Prometheus Serverä¸­æ”¯æŒåŸºäºPromQLåˆ›å»ºå‘Šè­¦è§„åˆ™ï¼Œå¦‚æœæ»¡è¶³PromQLå®šä¹‰çš„è§„åˆ™ï¼Œåˆ™ä¼šäº§ç”Ÿä¸€æ¡å‘Šè­¦ï¼Œè€Œå‘Šè­¦çš„åç»­å¤„ç†æµç¨‹åˆ™ç”±AlertManagerè¿›è¡Œç®¡ç†ã€‚åœ¨AlertManagerä¸­æˆ‘ä»¬å¯ä»¥ä¸é‚®ä»¶ï¼ŒSlackç­‰ç­‰å†…ç½®çš„é€šçŸ¥æ–¹å¼è¿›è¡Œé›†æˆï¼Œä¹Ÿå¯ä»¥é€šè¿‡Webhookè‡ªå®šä¹‰å‘Šè­¦å¤„ç†æ–¹å¼ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;Service Discovery:&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;9&quot;&gt;
&lt;p&gt;æœåŠ¡å‘ç°åœ¨Prometheusä¸­æ˜¯ç‰¹åˆ«é‡è¦çš„ä¸€ä¸ªéƒ¨åˆ†ï¼ŒåŸºäºPullæ¨¡å‹çš„æŠ“å–æ–¹å¼ï¼Œéœ€è¦åœ¨Prometheusä¸­é…ç½®å¤§é‡çš„æŠ“å–èŠ‚ç‚¹ä¿¡æ¯æ‰å¯ä»¥è¿›è¡Œæ•°æ®æ”¶é›†ã€‚æœ‰äº†æœåŠ¡å‘ç°åï¼Œç”¨æˆ·é€šè¿‡æœåŠ¡å‘ç°å’Œæ³¨å†Œçš„å·¥å…·å¯¹æˆç™¾ä¸Šåƒçš„èŠ‚ç‚¹è¿›è¡ŒæœåŠ¡æ³¨å†Œï¼Œå¹¶æœ€ç»ˆå°†æ³¨å†Œä¸­å¿ƒçš„åœ°å€é…ç½®åœ¨Prometheusçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œå¤§å¤§ç®€åŒ–äº†é…ç½®æ–‡ä»¶çš„å¤æ‚ç¨‹åº¦ï¼Œ&lt;br/&gt;ä¹Ÿå¯ä»¥æ›´å¥½çš„ç®¡ç†å„ç§æœåŠ¡ã€‚ åœ¨ä¼—å¤šäº‘å¹³å°ä¸­ï¼ˆAWS,OpenStackï¼‰ï¼ŒPrometheuså¯ä»¥&lt;br/&gt;é€šè¿‡å¹³å°è‡ªèº«çš„APIç›´æ¥è‡ªåŠ¨å‘ç°è¿è¡Œäºå¹³å°ä¸Šçš„å„ç§æœåŠ¡ï¼Œå¹¶æŠ“å–ä»–ä»¬çš„ä¿¡æ¯KubernetesæŒæ¡å¹¶ç®¡ç†ç€æ‰€æœ‰çš„å®¹å™¨ä»¥åŠæœåŠ¡ä¿¡æ¯ï¼Œé‚£æ­¤æ—¶Prometheusåªéœ€è¦ä¸Kubernetesæ‰“äº¤é“å°±å¯ä»¥æ‰¾åˆ°æ‰€æœ‰éœ€è¦ç›‘æ§çš„å®¹å™¨ä»¥åŠæœåŠ¡å¯¹è±¡.&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Consulï¼ˆå®˜æ–¹æ¨èï¼‰ç­‰æœåŠ¡å‘ç°æ³¨å†Œè½¯ä»¶&lt;/li&gt;
&lt;li&gt;é€šè¿‡DNSè¿›è¡ŒæœåŠ¡å‘ç°&lt;/li&gt;
&lt;li&gt;é€šè¿‡é™æ€é…ç½®æ–‡ä»¶ï¼ˆåœ¨æœåŠ¡èŠ‚ç‚¹è§„æ¨¡ä¸å¤§çš„æƒ…å†µä¸‹ï¼‰&lt;/li&gt;
&lt;/ul&gt;&lt;/blockquote&gt;
&lt;h3 id=&quot;prometheus-ui&quot;&gt;Prometheus UI&lt;/h3&gt;
&lt;p&gt;Prometheus UIæ˜¯Prometheuså†…ç½®çš„ä¸€ä¸ªå¯è§†åŒ–ç®¡ç†ç•Œé¢ï¼Œé€šè¿‡Prometheus UIç”¨æˆ·èƒ½å¤Ÿè½»æ¾çš„äº†è§£Prometheuså½“å‰çš„é…ç½®ï¼Œç›‘æ§ä»»åŠ¡è¿è¡ŒçŠ¶æ€ç­‰ã€‚ é€šè¿‡Graphé¢æ¿ï¼Œç”¨æˆ·è¿˜èƒ½ç›´æ¥ä½¿ç”¨&lt;strong&gt;PromQL&lt;/strong&gt;å®æ—¶æŸ¥è¯¢ç›‘æ§æ•°æ®ã€‚è®¿é—®ServerIP:9090/graphæ‰“å¼€WEBé¡µé¢ï¼Œé€šè¿‡PromQLå¯ä»¥æŸ¥è¯¢æ•°æ®ï¼Œå¯ä»¥è¿›è¡ŒåŸºç¡€çš„æ•°æ®å±•ç¤ºã€‚&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130161210554.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¦‚ä¸‹æ‰€ç¤ºï¼ŒæŸ¥è¯¢ä¸»æœºè´Ÿè½½å˜åŒ–æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨å…³é”®å­—node_load1å¯ä»¥æŸ¥è¯¢å‡ºPrometheusé‡‡é›†åˆ°çš„ä¸»æœºè´Ÿè½½çš„æ ·æœ¬æ•°æ®ï¼Œè¿™äº›æ ·æœ¬æ•°æ®æŒ‰ç…§æ—¶é—´å…ˆåé¡ºåºå±•ç¤ºï¼Œå½¢æˆäº†ä¸»æœºè´Ÿè½½éšæ—¶é—´å˜åŒ–çš„è¶‹åŠ¿å›¾è¡¨ï¼š&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130161230711.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;grafanaä»‹ç»&quot;&gt;Grafanaä»‹ç»&lt;/h2&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;Grafanaæ˜¯ä¸€ä¸ªè·¨å¹³å°çš„å¼€æºçš„åº¦é‡åˆ†æå’Œå¯è§†åŒ–å·¥å…·ï¼Œå¯ä»¥é€šè¿‡å°†é‡‡é›†çš„æ•°æ®æŸ¥è¯¢ç„¶åå¯è§†åŒ–çš„å±•ç¤ºã€‚Grafanaæä¾›äº†å¯¹prometheusçš„å‹å¥½æ”¯æŒï¼Œå„ç§å·¥å…·å¸®åŠ©ä½ æ„å»ºæ›´åŠ ç‚«é…·çš„æ•°æ®å¯è§†åŒ–ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;grafanaç‰¹ç‚¹&quot;&gt;&lt;strong&gt;Grafanaç‰¹ç‚¹&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;å¯è§†åŒ–ï¼šå¿«é€Ÿå’Œçµæ´»çš„å®¢æˆ·ç«¯å›¾å½¢å…·æœ‰å¤šç§é€‰é¡¹ã€‚é¢æ¿æ’ä»¶ä¸ºè®¸å¤šä¸åŒçš„æ–¹å¼å¯è§†åŒ–æŒ‡æ ‡å’Œæ—¥å¿—ã€‚&lt;/li&gt;
&lt;li&gt;æŠ¥è­¦ï¼šå¯è§†åŒ–åœ°ä¸ºæœ€é‡è¦çš„æŒ‡æ ‡å®šä¹‰è­¦æŠ¥è§„åˆ™ã€‚Grafanaå°†æŒç»­è¯„ä¼°å®ƒä»¬ï¼Œå¹¶å‘é€é€šçŸ¥ã€‚&lt;/li&gt;
&lt;li&gt;é€šçŸ¥ï¼šè­¦æŠ¥æ›´æ”¹çŠ¶æ€æ—¶ï¼Œå®ƒä¼šå‘å‡ºé€šçŸ¥ã€‚æ¥æ”¶ç”µå­é‚®ä»¶é€šçŸ¥ã€‚&lt;/li&gt;
&lt;li&gt;åŠ¨æ€ä»ªè¡¨ç›˜ï¼šä½¿ç”¨æ¨¡æ¿å˜é‡åˆ›å»ºåŠ¨æ€å’Œå¯é‡ç”¨çš„ä»ªè¡¨æ¿ï¼Œè¿™äº›æ¨¡æ¿å˜é‡ä½œä¸ºä¸‹æ‹‰èœå•å‡ºç°åœ¨ä»ªè¡¨æ¿é¡¶éƒ¨ã€‚&lt;/li&gt;
&lt;li&gt;æ··åˆæ•°æ®æºï¼šåœ¨åŒä¸€ä¸ªå›¾ä¸­æ··åˆä¸åŒçš„æ•°æ®æº!å¯ä»¥æ ¹æ®æ¯ä¸ªæŸ¥è¯¢æŒ‡å®šæ•°æ®æºã€‚è¿™ç”šè‡³é€‚ç”¨äºè‡ªå®šä¹‰æ•°æ®æºã€‚&lt;/li&gt;
&lt;li&gt;æ³¨é‡Šï¼šæ³¨é‡Šæ¥è‡ªä¸åŒæ•°æ®æºå›¾è¡¨ã€‚å°†é¼ æ ‡æ‚¬åœåœ¨äº‹ä»¶ä¸Šå¯ä»¥æ˜¾ç¤ºå®Œæ•´çš„äº‹ä»¶å…ƒæ•°æ®å’Œæ ‡è®°ã€‚&lt;/li&gt;
&lt;li&gt;è¿‡æ»¤å™¨ï¼šè¿‡æ»¤å™¨å…è®¸æ‚¨åŠ¨æ€åˆ›å»ºæ–°çš„é”®/å€¼è¿‡æ»¤å™¨ï¼Œè¿™äº›è¿‡æ»¤å™¨å°†è‡ªåŠ¨åº”ç”¨äºä½¿ç”¨è¯¥æ•°æ®æºçš„æ‰€æœ‰æŸ¥è¯¢ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ä¸Šé¢Prometheusä½¿ç”¨å…³é”®å­—node_load1æ¥ä½¿ç”¨Grafanaè¿›è¡Œå¯è§†åŒ–,ç‚¹å‡»ä¾§è¾¹æ çš„åŠ å·å›¾æ ‡ï¼Œç„¶åå•å‡»Dashboardç‚¹å‡»åˆ›å»ºï¼Œç„¶åæŠŠåˆšåˆšPrometheusä½¿ç”¨çš„æŸ¥è¯¢è¯­å¥æ”¾åˆ°Metries,ç‚¹å‡»å³ä¸Šè§’çš„applyå³å¯ã€‚&lt;/p&gt;
&lt;p&gt;ç¤ºä¾‹å›¾:&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130161311758.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;grafana-ui&quot;&gt;Grafana UI&lt;/h3&gt;
&lt;p&gt;ä¸Šé¢çš„ç¤ºä¾‹ä¸­æˆ‘ä»¬é€šè¿‡prometheus+grafanaé€šè¿‡PromQLè¿›è¡Œäº†ç®€å•çš„æœåŠ¡å™¨è´Ÿè½½çš„ç›‘æ§å¯è§†åŒ–ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ç¬¬ä¸‰æ–¹æä¾›å¯è§†åŒ–JSONæ–‡ä»¶æ¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå®ç°æœåŠ¡å™¨ã€Elasticsearchã€MYSQLç­‰ç­‰ç›‘æ§ã€‚è¿™é‡Œæˆ‘ä»¬åœ¨grafanaæä¾›çš„ç¬¬ä¸‰æ–¹dashboardsçš„åœ°å€https://grafana.com/grafana/dashboardsæ¥ä¸‹è½½å¯¹åº”çš„jsonæ–‡ä»¶ç„¶åå¯¼å…¥åˆ°grafanaå®ç°æœåŠ¡å™¨çš„ç›‘æ§ã€‚&lt;/p&gt;
&lt;p&gt;ç›‘æ§æœåŠ¡å™¨çš„ç¤ºä¾‹å›¾:&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130230021844.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;é™¤äº†æœåŠ¡ç«¯çš„ç›‘æ§ï¼Œå¯ä»¥ç›‘æ§åº”ç”¨æœåŠ¡ã€‚Prometheus ç›‘æ§åº”ç”¨çš„æ–¹å¼éå¸¸ç®€å•ï¼Œåªéœ€è¦è¿›ç¨‹æš´éœ²äº†ä¸€ä¸ªç”¨äºè·å–å½“å‰ç›‘æ§æ ·æœ¬æ•°æ®çš„ HTTP è®¿é—®åœ°å€ã€‚è¿™æ ·çš„ä¸€ä¸ªç¨‹åºç§°ä¸ºExporterï¼ŒExporter çš„å®ä¾‹ç§°ä¸ºä¸€ä¸ª Target ã€‚Prometheus é€šè¿‡è½®è®­çš„æ–¹å¼å®šæ—¶ä»è¿™äº› Target ä¸­è·å–ç›‘æ§æ•°æ®æ ·æœ¬ï¼Œå¯¹äºåº”ç”¨æ¥è®²ï¼Œåªéœ€è¦æš´éœ²ä¸€ä¸ªåŒ…å«ç›‘æ§æ•°æ®çš„ HTTP è®¿é—®åœ°å€å³å¯ï¼Œå½“ç„¶æä¾›çš„æ•°æ®éœ€è¦æ»¡è¶³ä¸€å®šçš„æ ¼å¼ï¼Œè¿™ä¸ªæ ¼å¼å°±æ˜¯ Metrics æ ¼å¼: metric name&amp;gt;{&lt;label name=&quot;&quot;&gt;=&lt;label value=&quot;&quot;&gt;, ...} ã€‚label nameæ˜¯æ ‡ç­¾,label valueæ˜¯æ ‡ç­¾çš„å€¼ã€‚&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130161748865.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;grafanaç›‘æ§springbootåº”ç”¨å®ç°æ•ˆæœå›¾ï¼š&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/2020113023031712.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/label&gt;&lt;/label&gt;&lt;/p&gt;
&lt;h2 id=&quot;prometheusgrafanaalertmanagerç­‰å®‰è£…é…ç½®&quot;&gt;Prometheus+Grafana+Alertmanagerç­‰å®‰è£…é…ç½®&lt;/h2&gt;
&lt;p&gt;Prometheusä»¥åŠç›¸å…³ç»„ä»¶ä½¿ç”¨çš„æ˜¯2.xç‰ˆæœ¬ï¼ŒGrafanaä½¿ç”¨çš„æ˜¯7.xç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹è½½åœ°å€æ¨èä½¿ç”¨æ¸…åå¤§å­¦æˆ–åä¸ºçš„å¼€æºé•œåƒç«™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸‹è½½åœ°å€:&lt;/strong&gt;&lt;br/&gt;&lt;a href=&quot;https://prometheus.io/download/&quot;&gt;https://prometheus.io/download/&lt;/a&gt;&lt;br/&gt;&lt;a href=&quot;https://mirrors.tuna.tsinghua.edu.cn/grafana/&quot;&gt;https://mirrors.tuna.tsinghua.edu.cn/grafana/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Prometheusä»¥åŠç›¸å…³ç»„ä»¶ç™¾åº¦ç½‘ç›˜åœ°å€ï¼š&lt;/p&gt;
&lt;p&gt;é“¾æ¥ï¼š&lt;a href=&quot;https://pan.baidu.com/s/1btErwq8EyAzG2-34lwGO4w&quot;&gt;https://pan.baidu.com/s/1btErwq8EyAzG2-34lwGO4w&lt;/a&gt;&lt;br/&gt;æå–ç ï¼š4nlh&lt;/p&gt;
&lt;h3 id=&quot;prometheuså®‰è£…&quot;&gt;Prometheuså®‰è£…&lt;/h3&gt;
&lt;h4 id=&quot;1ï¼Œæ–‡ä»¶å‡†å¤‡&quot;&gt;1ï¼Œæ–‡ä»¶å‡†å¤‡&lt;/h4&gt;
&lt;p&gt;å°†ä¸‹è½½å¥½çš„Prometheusæ–‡ä»¶è§£å‹&lt;/p&gt;
&lt;p&gt;è¾“å…¥&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;tar -zxvf prometheus-2.19.3.linux-amd64.tar.gz
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç„¶åç§»åŠ¨åˆ°/opt/prometheusæ–‡ä»¶å¤¹é‡Œé¢ï¼Œæ²¡æœ‰è¯¥æ–‡ä»¶å¤¹åˆ™åˆ›å»º&lt;/p&gt;
&lt;h4 id=&quot;2ï¼Œé…ç½®ä¿®æ”¹&quot;&gt;2ï¼Œé…ç½®ä¿®æ”¹&lt;/h4&gt;
&lt;p&gt;åœ¨prometheus-2.19.3.linux-amd64æ–‡ä»¶å¤¹ç›®å½•ä¸‹æ‰¾åˆ°prometheus.ymlé…ç½®æ–‡ä»¶å¹¶æ›´æ”¹&lt;/p&gt;
&lt;p&gt;prometheus.ymlæ–‡ä»¶é…ç½®å¦‚ä¸‹:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;# my global config
global:
  scrape_interval:     15s # Set the scrape interval to every 15 seconds. Default is every 1 minute.
  evaluation_interval: 15s # Evaluate rules every 15 seconds. The default is every 1 minute.
  # scrape_timeout is set to the global default (10s).

# Alertmanager configuration
alerting:
  alertmanagers:
  - static_configs:
    - targets:
       - alertmanager:9093

# Load rules once and periodically evaluate them according to the global 'evaluation_interval'.
rule_files:
  # - &quot;first_rules.yml&quot;
  # - &quot;second_rules.yml&quot;

# A scrape configuration containing exactly one endpoint to scrape:
# Here it's Prometheus itself.
scrape_configs:
  # The job name is added as a label `job=&amp;lt;job_name&amp;gt;` to any timeseries scraped from this config.
  - job_name: 'prometheus'

    # metrics_path defaults to '/metrics'
    # scheme defaults to 'http'.

    static_configs:
    - targets: ['192.168.8.181:9090']
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;3ï¼Œprometheus-å¯åŠ¨&quot;&gt;3ï¼Œprometheus å¯åŠ¨&lt;/h4&gt;
&lt;p&gt;åœ¨/opt/prometheus/prometheus-2.19.3.linux-amd64çš„ç›®å½•ä¸‹è¾“å…¥:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;nohup ./prometheus   &amp;gt;/dev/null   2&amp;gt;&amp;amp;1 &amp;amp;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯åŠ¨æˆåŠŸä¹‹åï¼Œåœ¨æµè§ˆå™¨ä¸Šè¾“å…¥ ip+9090å¯ä»¥æŸ¥çœ‹ç›¸å…³ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130231447537.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130231456893.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;grafanaå®‰è£…&quot;&gt;Grafanaå®‰è£…&lt;/h3&gt;
&lt;h4 id=&quot;1ï¼Œæ–‡ä»¶å‡†å¤‡-2&quot;&gt;1ï¼Œæ–‡ä»¶å‡†å¤‡&lt;/h4&gt;
&lt;p&gt;å°†ä¸‹è½½ä¸‹æ¥çš„grafana-7.1.1-1.x86_64.rpmçš„æ–‡ä»¶é€šè¿‡apmæ–¹å¼å®‰è£…&lt;br/&gt;è¾“å…¥:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt; rpm -ivh grafana-7.1.1-1.x86_64.rpm
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿›è¡Œå®‰è£…&lt;br/&gt;å¦‚æœå‡ºç°å¦‚ä¸‹é”™è¯¯:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;error: Failed dependencies:
urw-fonts is needed by grafana-6.1.4-1.x86_64
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸€ä¸ªä¾èµ–åŒ…æ²¡æœ‰å®‰è£…ï¼Œéœ€è¦å…ˆå®‰è£…è¿™ä¸ªä¾èµ–åŒ…ï¼Œç„¶åå†å®‰è£…grafana&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;# yum install -y urw-fonts
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;2ï¼Œgrafana-å¯åŠ¨&quot;&gt;2ï¼Œgrafana å¯åŠ¨&lt;/h4&gt;
&lt;p&gt;rootç”¨æˆ·ä¸‹å¯åŠ¨&lt;/p&gt;
&lt;p&gt;è¾“å…¥:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;sudo /bin/systemctl start grafana-server.service
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯åŠ¨æˆåŠŸä¹‹åï¼Œåœ¨æµè§ˆå™¨ä¸Šè¾“å…¥ ip+3000å¯ä»¥æŸ¥çœ‹ç›¸å…³ä¿¡æ¯&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130164833434.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;alertmanagerå®‰è£…&quot;&gt;Alertmanagerå®‰è£…&lt;/h3&gt;
&lt;h4 id=&quot;1ï¼Œæ–‡ä»¶å‡†å¤‡-3&quot;&gt;1ï¼Œæ–‡ä»¶å‡†å¤‡&lt;/h4&gt;
&lt;p&gt;å°†ä¸‹è½½å¥½çš„Alertmanageræ–‡ä»¶è§£å‹&lt;/p&gt;
&lt;p&gt;è¾“å…¥&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;tar -zxvf alertmanager-0.21.0.linux-386.tar.gz
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç„¶åç§»åŠ¨åˆ°/opt/prometheusæ–‡ä»¶å¤¹é‡Œé¢ï¼Œæ²¡æœ‰è¯¥æ–‡ä»¶å¤¹åˆ™åˆ›å»º&lt;/p&gt;
&lt;h4 id=&quot;2ï¼Œalertmanagerå¯åŠ¨&quot;&gt;2ï¼Œalertmanagerå¯åŠ¨&lt;/h4&gt;
&lt;p&gt;rootç”¨æˆ·ä¸‹å¯åŠ¨&lt;/p&gt;
&lt;p&gt;è¾“å…¥:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;nohup ./alertmanager   &amp;gt;/dev/null   2&amp;gt;&amp;amp;1 &amp;amp;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯åŠ¨æˆåŠŸä¹‹åï¼Œåœ¨æµè§ˆå™¨ä¸Šè¾“å…¥ ip+9093å¯ä»¥æŸ¥çœ‹ç›¸å…³ä¿¡æ¯&lt;/p&gt;
&lt;p&gt;ç¤ºä¾‹å›¾:&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130164802949.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;pushgateway-å®‰è£…&quot;&gt;Pushgateway å®‰è£…&lt;/h3&gt;
&lt;h4 id=&quot;1ï¼Œæ–‡ä»¶å‡†å¤‡-4&quot;&gt;1ï¼Œæ–‡ä»¶å‡†å¤‡&lt;/h4&gt;
&lt;p&gt;å°†ä¸‹è½½å¥½çš„pushgatewayæ–‡ä»¶è§£å‹&lt;/p&gt;
&lt;p&gt;è¾“å…¥&lt;br/&gt;tar -zxvf pushgateway-1.2.0.linux-amd64.tar.gz&lt;br/&gt;ç„¶åç§»åŠ¨åˆ°/opt/prometheusæ–‡ä»¶å¤¹é‡Œé¢ï¼Œæ²¡æœ‰è¯¥æ–‡ä»¶å¤¹åˆ™åˆ›å»º&lt;/p&gt;
&lt;h4 id=&quot;2ï¼Œå¯åŠ¨&quot;&gt;2ï¼Œå¯åŠ¨&lt;/h4&gt;
&lt;p&gt;rootç”¨æˆ·ä¸‹å¯åŠ¨&lt;/p&gt;
&lt;p&gt;è¾“å…¥:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;nohup ./pushgateway   &amp;gt;/dev/null   2&amp;gt;&amp;amp;1 &amp;amp;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯åŠ¨æˆåŠŸä¹‹åï¼Œåœ¨æµè§ˆå™¨ä¸Šè¾“å…¥ ip+9091å¯ä»¥æŸ¥çœ‹ç›¸å…³ä¿¡æ¯&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130163644270.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;5ï¼Œnode_exportå®‰è£…&quot;&gt;5ï¼ŒNode_exportå®‰è£…&lt;/h3&gt;
&lt;h4 id=&quot;1ï¼Œæ–‡ä»¶å‡†å¤‡-5&quot;&gt;1ï¼Œæ–‡ä»¶å‡†å¤‡&lt;/h4&gt;
&lt;p&gt;å°†ä¸‹è½½å¥½çš„Node_exportæ–‡ä»¶è§£å‹&lt;/p&gt;
&lt;p&gt;è¾“å…¥&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;tar -zxvf node_exporter-0.17.0.linux-amd64.tar.gz
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç„¶åç§»åŠ¨åˆ°/opt/prometheusæ–‡ä»¶å¤¹é‡Œé¢ï¼Œæ²¡æœ‰è¯¥æ–‡ä»¶å¤¹åˆ™åˆ›å»º&lt;/p&gt;
&lt;h4 id=&quot;2ï¼Œå¯åŠ¨-2&quot;&gt;2ï¼Œå¯åŠ¨&lt;/h4&gt;
&lt;p&gt;rootç”¨æˆ·ä¸‹å¯åŠ¨&lt;/p&gt;
&lt;p&gt;è¾“å…¥:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;nohup ./consul_exporter   &amp;gt;/dev/null   2&amp;gt;&amp;amp;1 &amp;amp;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯åŠ¨æˆåŠŸä¹‹åï¼Œåœ¨æµè§ˆå™¨ä¸Šè¾“å…¥ ip+9100å¯ä»¥æŸ¥çœ‹ç›¸å…³ä¿¡æ¯&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130163533255.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;prometheusä½¿ç”¨æ•™ç¨‹&quot;&gt;Prometheusä½¿ç”¨æ•™ç¨‹&lt;/h2&gt;
&lt;p&gt;Prometheusç•Œé¢åœ°å€: ip+9090ã€‚&lt;br/&gt;è¿™é‡Œæˆ‘å°±ä½¿ç”¨å›¾ç‰‡åŠ ä¸Šæ³¨é‡Šæ¥è¿›è¡Œè®²è§£ã€‚&lt;/p&gt;
&lt;h3 id=&quot;1ï¼ŒåŸºæœ¬ä½¿ç”¨&quot;&gt;1ï¼ŒåŸºæœ¬ä½¿ç”¨&lt;/h3&gt;
&lt;h4 id=&quot;1prometheusä¸»ç•Œé¢è¯´æ˜&quot;&gt;1&amp;gt;,Prometheusä¸»ç•Œé¢è¯´æ˜&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130170534222.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;2graphä½¿ç”¨ç¤ºä¾‹&quot;&gt;2&amp;gt;,Graphä½¿ç”¨ç¤ºä¾‹&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130170547301.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;3æŸ¥çœ‹è¿è¡Œä¿¡æ¯&quot;&gt;3&amp;gt;,æŸ¥çœ‹è¿è¡Œä¿¡æ¯&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130170618208.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;4æŸ¥çœ‹å‘½ä»¤æ ‡è®°å€¼&quot;&gt;4&amp;gt;,æŸ¥çœ‹å‘½ä»¤æ ‡è®°å€¼&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130170632490.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;5æŸ¥çœ‹é…ç½®ä¿¡æ¯&quot;&gt;5&amp;gt;,æŸ¥çœ‹é…ç½®ä¿¡æ¯&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130170648534.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;6æŸ¥çœ‹é›†æˆçš„ç»„ä»¶&quot;&gt;6,&amp;gt;æŸ¥çœ‹é›†æˆçš„ç»„ä»¶&lt;/h4&gt;
&lt;p&gt;é›†æˆçš„ç»„ä»¶éœ€è¦ä¸‹è½½å¯¹åº”exportæœåŠ¡å¹¶å¯åŠ¨è¿è¡Œï¼Œå¹¶ä¸”åœ¨prometheusçš„é…ç½®ä¸­è¿›è¡Œæ·»åŠ ï¼&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/2020113017070077.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;7æŸ¥çœ‹æœåŠ¡å‘ç°&quot;&gt;7&amp;gt;,æŸ¥çœ‹æœåŠ¡å‘ç°&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130170708293.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;8æŸ¥çœ‹å‘Šè­¦è§„åˆ™&quot;&gt;8&amp;gt;,æŸ¥çœ‹å‘Šè­¦è§„åˆ™&lt;/h4&gt;
&lt;p&gt;first_rules.ymlçš„é…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130170717335.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;9æŸ¥çœ‹æ˜¯å¦è§¦å‘å‘Šè­¦&quot;&gt;9&amp;gt;,æŸ¥çœ‹æ˜¯å¦è§¦å‘å‘Šè­¦&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130170733478.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç›¸å…³æ–‡æ¡£&lt;/strong&gt;:&lt;a href=&quot;https://prometheus.io/docs/prometheus/latest/getting_started/&quot;&gt;https://prometheus.io/docs/prometheus/latest/getting_started/&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;grafanaä½¿ç”¨&quot;&gt;Grafanaä½¿ç”¨&lt;/h2&gt;
&lt;p&gt;Grafanf ç•Œé¢åœ°å€: ip+3000&lt;br/&gt;åˆå§‹è´¦å·å¯†ç : admin, admin&lt;br/&gt;è¿™é‡Œæˆ‘ä¾æ—§ç”¨å›¾ç‰‡åŠ æ³¨é‡Šæ¥è¿›è¡Œè®²è§£ï¼Œæƒ³å¿…è¿™æ ·ä¼šæ›´å®¹æ˜“ç†è§£å§ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;h3 id=&quot;1ä¸»ç•Œé¢ä¿¡æ¯&quot;&gt;1&amp;gt;,ä¸»ç•Œé¢ä¿¡æ¯&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130170746108.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;2åˆ›å»ºä»ªè¡¨ç›˜ç›‘æ§å®ç°&quot;&gt;2&amp;gt;,åˆ›å»ºä»ªè¡¨ç›˜ç›‘æ§å®ç°&lt;/h3&gt;
&lt;p&gt;1.æ·»åŠ æ•°æ®æº&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/2020113017075825.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130170812997.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;2.é€‰æ‹©prometheus&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130170827140.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;3.ç‚¹å‡»åˆ›å»ºä»ªè¡¨ç›˜&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/2020113017084420.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;4.ç‚¹å‡»åˆ›å»º&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130170853164.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130170904288.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/2020113017091413.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;5.è¾“å…¥node_load1è¡¨ç¤ºè¯­å¥ï¼Œå¡«å†™ç›¸å…³ä¿¡æ¯ï¼Œç‚¹å‡»applyå®Œæˆï¼Œå¹¶å°†åç§°ä¿å­˜ä¸ºTest&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130170925611.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;6.ç‚¹å‡»æœç´¢Testï¼Œç‚¹å‡»å°±å¯ä»¥æŸ¥çœ‹&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130170933518.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130170941630.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;3ä½¿ç”¨ç¬¬ä¸‰æ–¹ä»ªè¡¨ç›˜ç›‘æ§å®ç°&quot;&gt;3&amp;gt;,ä½¿ç”¨ç¬¬ä¸‰æ–¹ä»ªè¡¨ç›˜ç›‘æ§å®ç°&lt;/h3&gt;
&lt;p&gt;æ³¨:éœ€æå‰æ·»åŠ å¥½æ•°æ®æºã€‚&lt;/p&gt;
&lt;p&gt;1.ç‚¹å‡»å·¦ä¸Šè§’çš„åŠ å·ï¼Œç‚¹å‡»import&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130170953572.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åœ¨çº¿æ¨¡å¼&lt;/strong&gt;&lt;br/&gt;åœ°å€:&lt;a href=&quot;https://grafana.com/grafana/dashboards&quot;&gt;https://grafana.com/grafana/dashboards&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130171002928.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130171018182.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¦»çº¿æ¨¡å¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130171031577.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç›‘æ§ç¤ºä¾‹:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130171044371.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;ç›‘æ§å‘Šè­¦å®ç°&quot;&gt;ç›‘æ§å‘Šè­¦å®ç°&lt;/h2&gt;
&lt;p&gt;ç›‘æ§å‘Šè­¦å®ç°éœ€è¦ä¾èµ– Alertmanagerï¼Œå·²ç»ç›¸å…³çš„ç»„ä»¶ï¼Œæ¯”å¦‚ä¸Šè¿°å®ä¾‹ä¸­çš„ç›‘æ§æœåŠ¡å™¨åº”ç”¨çš„node_serverç»„ä»¶ã€‚&lt;/p&gt;
&lt;h3 id=&quot;é‚®ä»¶å‘Šè­¦å®ç°&quot;&gt;é‚®ä»¶å‘Šè­¦å®ç°&lt;/h3&gt;
&lt;p&gt;éœ€è¦å®‰è£…Alertmanagerï¼Œè¿™é‡Œå› ä¸ºé‚®ä»¶å‘é€æ¯”è¾ƒç®€å•ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘å°±ç›´æ¥è´´é…ç½®äº†ï¼Œå…¶ä¸­å¸¦æœ‰xxxå­—ç¬¦çš„å‚æ•°æ˜¯éœ€è¦æ ¹æ®æƒ…å†µè¿›è¡Œæ›´æ”¹çš„ã€‚ä¸‹é¢çš„ä¼ä¸šå¾®ä¿¡å‘Šè­¦åŒç†ã€‚&lt;br/&gt;AlertmanagersæœåŠ¡çš„&lt;strong&gt;alertmanager.yml&lt;/strong&gt;çš„é…ç½®å¦‚ä¸‹:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;global:
  resolve_timeout: 5m
  smtp_from: 'xxx@qq.com'
  smtp_smarthost: 'smtp.qq.com:465'
  smtp_auth_username: 'xxx@qq.com'
  smtp_auth_password: 'xxx'
  smtp_require_tls: false
  smtp_hello: 'qq.com'
route:
  group_by: ['alertname']
  group_wait: 5s
  group_interval: 5s
  repeat_interval: 5m
  receiver: 'email'
receivers:
- name: 'email'
  email_configs:
  - to: 'xxx@qq.com'
    send_resolved: true
inhibit_rules:
  - source_match:
      severity: 'critical'
    target_match:
      severity: 'warning'
    equal: ['alertname', 'dev', 'instance']
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;æ³¨: smtp_fromã€smtp_auth_usernameã€toçš„é‚®ç®±å¯ä»¥å¡«å†™åŒä¸€ä¸ªï¼Œsmtp_auth_passwordå¡«å†™é‰´æƒç ï¼Œéœ€è¦å¼€å¯POS3ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä¸çŸ¥é“æ€ä¹ˆå¼€å¯POS3ï¼Œå¯ä»¥æŸ¥çœ‹æˆ‘çš„è¿™ç¯‡æ–‡ç« : &lt;a href=&quot;https://www.cnblogs.com/xuwujing/p/10945698.html&quot;&gt;https://www.cnblogs.com/xuwujing/p/10945698.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;PrometheusæœåŠ¡çš„Prometheus.ymlé…ç½®å¦‚ä¸‹:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;# my global config
global:
  scrape_interval:     15s # Set the scrape interval to every 15 seconds. Default is every 1 minute.
  evaluation_interval: 15s # Evaluate rules every 15 seconds. The default is every 1 minute.
  # scrape_timeout is set to the global default (10s).

# Alertmanager configuration
alerting:
  alertmanagers:
  - static_configs:
    - targets: 
      - '192.168.214.129:9093'
# Load rules once and periodically evaluate them according to the global 'evaluation_interval'.
rule_files:
   - &quot;/opt/prometheus/prometheus-2.19.3.linux-amd64/first_rules.yml&quot;
  # - &quot;second_rules.yml&quot;

# A scrape configuration containing exactly one endpoint to scrape:
# Here it's Prometheus itself.
scrape_configs:
  # The job name is added as a label `job=&amp;lt;job_name&amp;gt;` to any timeseries scraped from this config.
  - job_name: 'prometheus'

    # metrics_path defaults to '/metrics'
    # scheme defaults to 'http'.

    static_configs:
    - targets: ['192.168.214.129:9090']

  - job_name: 'server'
    static_configs:
    - targets: ['192.168.214.129:9100']
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;æ³¨ï¼štargetså¦‚æœæœ‰å¤šä¸ªé…ç½®çš„è¯ï¼Œåœ¨åé¢åŠ ä¸Šå…¶ä»–æœåŠ¡çš„èŠ‚ç‚¹å³å¯ã€‚alertmanagersæœ€å¥½å†™æœåŠ¡å™¨çš„ipï¼Œä¸ç„¶å¯èƒ½ä¼šå‡ºç°å‘Šè­¦æ•°æ®æ— æ³•å‘é€çš„æƒ…å†µã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Error sending alert&quot; err=&quot;Post \&quot;http://alertmanager:9093/api/v1/alerts\&quot;: context deadline exceeded
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é…ç½®äº†Prometheus.ymlä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦é…ç½®å‘Šè­¦çš„è§„åˆ™ï¼Œä¹Ÿå°±æ˜¯è§¦å‘æ¡ä»¶ï¼Œè¾¾åˆ°æ¡ä»¶ä¹‹åå°±è¿›è¡Œè§¦å‘ã€‚æˆ‘ä»¬æ–°å»ºä¸€ä¸ªfirst_rules.ymlï¼Œç”¨äºæ£€æµ‹æœåŠ¡å™¨æŒ‚æ‰çš„æ—¶å€™è¿›è¡Œå‘é€æ¶ˆæ¯&lt;/p&gt;
&lt;p&gt;first_rules.ymlå‘Šè­¦é…ç½®:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ³¨:jobç­‰äºçš„æœåŠ¡åç§°å¡«å†™Prometheus.ymlé…ç½®å¯¹åº”çš„åç§°ï¼Œæ¯”å¦‚è¿™é‡Œè®¾ç½®çš„serverå¯¹åº”Prometheus.ymlé…ç½®çš„serverã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;groups:
- name: node
  rules:
  - alert: server_status
    expr: up{job=&quot;server&quot;} == 0 
    for: 15s
    annotations:
      summary: &quot;æœºå™¨{{ $labels.instance }} æŒ‚äº†&quot;
      description: &quot;æŠ¥å‘Š.è¯·ç«‹å³æŸ¥çœ‹!&quot;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¾æ¬¡å¯åŠ¨prometheusã€altermanagersã€node_serveræœåŠ¡ï¼ŒæŸ¥çœ‹å‘Šè­¦ï¼Œç„¶ååœæ­¢node_exportæœåŠ¡ï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´åœ¨æŸ¥çœ‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130233326789.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130233339778.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130233346360.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;ä¼ä¸šå¾®ä¿¡å‘Šè­¦å®ç°&quot;&gt;ä¼ä¸šå¾®ä¿¡å‘Šè­¦å®ç°&lt;/h3&gt;
&lt;p&gt;å’Œä¸Šé¢çš„ç¤ºä¾‹æ“ä½œåŸºæœ¬ä¸€è‡´ï¼Œä¸»è¦æ˜¯é…ç½®çš„åŒºåˆ«ã€‚&lt;/p&gt;
&lt;p&gt;1.åœ¨ä¼ä¸šå¾®ä¿¡ä¸­åˆ›å»ºä¸€ä¸ªåº”ç”¨ï¼Œå¹¶å¾—åˆ°secretã€corp_idå’Œagent_idé…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130171114948.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130171130901.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130171151281.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/2020113017120380.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;2.ç„¶åä¿®æ”¹alertmanager.ymlé…ç½®ï¼Œalertmanager.ymlé…ç½®å¦‚ä¸‹:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;global:
  resolve_timeout: 5s
  wechat_api_url: 'https://qyapi.weixin.qq.com/cgi-bin/'
  wechat_api_secret: 'xxx'
  wechat_api_corp_id: 'xxx'
templates:
- '/opt/prometheus/alertmanager-0.21.0.linux-386/template/wechat.tmpl'
route:
  group_by: ['alertname']
  group_wait: 10s
  group_interval: 10s
  repeat_interval: 10s
  receiver: 'wechat'
receivers:
- name: 'wechat'
  wechat_configs:
  - send_resolved: true
    to_party: '2'
    agent_id: xxx
    corp_id: 'xxx'
    api_secret: 'xxx'
    api_url: 'https://qyapi.weixin.qq.com/cgi-bin/'
inhibit_rules:
  - source_match:
      severity: 'critical'
    target_match:
      severity: 'warning'
    equal: ['alertname', 'dev', 'instance']
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130165020226.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;é…ç½®æˆåŠŸä¹‹åï¼Œæ“ä½œå’Œä¸Šè¿°é‚®ä»¶å‘é€çš„ä¸€è‡´ï¼Œå³å¯åœ¨ä¼ä¸šå¾®ä¿¡çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130171214178.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœè§‰å¾—ä¸Šè¿°çš„ç¤ºä¾‹ä¸å¥½å‹å¥½çš„è¯ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ¶å®šå‘Šè­¦æ¨¡æ¿ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ·»åŠ å‘Šè­¦æ¨¡æ¿:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨alertmanagersçš„æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªtemplateæ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨è¯¥æ–‡ä»¶å¤¹åˆ›å»ºä¸€ä¸ªå¾®ä¿¡å‘Šè­¦çš„æ¨¡æ¿wechat.tmplï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;{{ define &quot;wechat.default.message&quot; }}
{{ range .Alerts }}
========start=========
å‘Šè­¦ç¨‹åº: prometheus_alert
å‘Šè­¦çº§åˆ«: {{ .Labels.severity}}
å‘Šè­¦ç±»å‹: {{ .Labels.alertname }}
æ•…éšœä¸»æœº: {{ .Labels.instance }}
å‘Šè­¦ä¸»é¢˜: {{ .Annotations.summary }}
å‘Šè­¦è¯¦æƒ…: {{ .Annotations.description }}
=========end===========
{{ end }}
{{ end }}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç„¶åå†åˆ°alertmanager.yml æ·»åŠ å¦‚ä¸‹é…ç½®:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;templates:
- '/opt/prometheus/alertmanager-0.21.0.linux-386/template/wechat.tmpl'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130234021796.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ•ˆæœå›¾:&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130234033135.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;åº”ç”¨æœåŠ¡ç›‘æ§å‘Šè­¦å®ç°&quot;&gt;åº”ç”¨æœåŠ¡ç›‘æ§å‘Šè­¦å®ç°&lt;/h3&gt;
&lt;blockquote readability=&quot;10&quot;&gt;
&lt;p&gt;Prometheus ç›‘æ§åº”ç”¨çš„æ–¹å¼éå¸¸ç®€å•ï¼Œåªéœ€è¦è¿›ç¨‹æš´éœ²äº†ä¸€ä¸ªç”¨äºè·å–å½“å‰ç›‘æ§æ ·æœ¬æ•°æ®çš„ HTTP&lt;br/&gt;è®¿é—®åœ°å€ã€‚è¿™æ ·çš„ä¸€ä¸ªç¨‹åºç§°ä¸ºExporterï¼ŒExporter çš„å®ä¾‹ç§°ä¸ºä¸€ä¸ª Target ã€‚Prometheusé€šè¿‡è½®è®­çš„æ–¹å¼å®šæ—¶ä»è¿™äº› Target ä¸­è·å–ç›‘æ§æ•°æ®æ ·æœ¬ï¼Œå¯¹äºåº”ç”¨æ¥è®²ï¼Œåªéœ€è¦æš´éœ²ä¸€ä¸ªåŒ…å«ç›‘æ§æ•°æ®çš„ HTTPè®¿é—®åœ°å€å³å¯ï¼Œå½“ç„¶æä¾›çš„æ•°æ®éœ€è¦æ»¡è¶³ä¸€å®šçš„æ ¼å¼ï¼Œè¿™ä¸ªæ ¼å¼å°±æ˜¯ Metrics æ ¼å¼: metric name&amp;gt;{&lt;label name=&quot;&quot;&gt;=&lt;label value=&quot;&quot;&gt;, ...} ã€‚label nameæ˜¯æ ‡ç­¾,label valueæ˜¯æ ‡ç­¾çš„å€¼ã€‚&lt;/label&gt;&lt;/label&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;Springbootåº”ç”¨å®ç°æ­¥éª¤&lt;/strong&gt;&lt;br/&gt;1.åœ¨pomæ–‡ä»¶æ·»åŠ &lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;io.micrometer&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;micrometer-registry-prometheus&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;
&amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;spring-boot-starter-actuator&amp;lt;/artifactId&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;2.åœ¨ä»£ç ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;private Counter requestErrorCount;
    private final MeterRegistry registry;
    @Autowired
    public PrometheusCustomMonitor(MeterRegistry registry) {
        this.registry = registry;
    }
    @PostConstruct
    private void init() {
        requestErrorCount = registry.counter(&quot;requests_error_total&quot;, &quot;status&quot;, &quot;error&quot;);
    }
    public Counter getRequestErrorCount() {
        return requestErrorCount;
    }
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;3.åœ¨å¼‚å¸¸å¤„ç†ä¸­æ·»åŠ å¦‚ä¸‹è®°å½•:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;monitor.getRequestErrorCount().increment();
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;4.åœ¨prometheusçš„é…ç½®ä¸­æ·»åŠ springbootåº”ç”¨æœåŠ¡ç›‘æ§&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;-  job_name: 'springboot' 
     metrics_path: '/actuator/prometheus' 
     scrape_interval: 5s
     static_configs:
     - targets: ['192.168.8.45:8080'] 
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;5.Prometheu.ymlé…ç½®å¦‚ä¸‹:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;  - job_name: 'springboot' 
    metrics_path: '/actuator/prometheus' 
    scrape_interval: 5s
    static_configs:
    - targets: ['192.168.8.45:8080']  
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è§„åˆ™æ–‡ä»¶é…ç½®å¦‚ä¸‹:&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130234644566.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;6.åœ¨prometheusç›‘æ§å³å¯æŸ¥çœ‹&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130234528701.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;ä¼ä¸šå¾®ä¿¡å‘Šè­¦æ•ˆæœå›¾:&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130234707687.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;ç›‘æ§çš„springbooté¡¹ç›®åœ°å€:&lt;a href=&quot;https://github.com/xuwujing/springBoot-study&quot;&gt;https://github.com/xuwujing/springBoot-study&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;å…¶ä»–é…ç½®&quot;&gt;å…¶ä»–é…ç½®&lt;/h2&gt;
&lt;h3 id=&quot;prometheusåŠ¨æ€åŠ è½½é…ç½®&quot;&gt;prometheusåŠ¨æ€åŠ è½½é…ç½®&lt;/h3&gt;
&lt;p&gt;Prometheusæ•°æ®æºçš„é…ç½®ä¸»è¦åˆ†ä¸ºé™æ€é…ç½®å’ŒåŠ¨æ€å‘ç°, å¸¸ç”¨çš„ä¸ºä»¥ä¸‹å‡ ç±»:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;static_configs: é™æ€æœåŠ¡å‘ç°&lt;/li&gt;
&lt;li&gt;file_sd_configs: æ–‡ä»¶æœåŠ¡å‘ç°&lt;/li&gt;
&lt;li&gt;dns_sd_configs: DNS æœåŠ¡å‘ç°&lt;/li&gt;
&lt;li&gt;kubernetes_sd_configs: Kubernetes æœåŠ¡å‘ç°&lt;/li&gt;
&lt;li&gt;consul_sd_configs:Consul æœåŠ¡å‘ç°ï¼ˆæ¨èä½¿ç”¨ï¼‰&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;file_sd_configsçš„æ–¹å¼æä¾›ç®€å•çš„æ¥å£ï¼Œå¯ä»¥å®ç°åœ¨å•ç‹¬çš„é…ç½®æ–‡ä»¶ä¸­é…ç½®æ‹‰å–å¯¹è±¡ï¼Œå¹¶ç›‘è§†è¿™äº›æ–‡ä»¶çš„å˜åŒ–å¹¶è‡ªåŠ¨åŠ è½½å˜åŒ–ã€‚åŸºäºè¿™ä¸ªæœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªè¡Œå¼€å‘ç¨‹åºï¼Œç›‘æ§ç›‘æ§å¯¹è±¡çš„å˜åŒ–è‡ªåŠ¨ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼Œå®ç°ç›‘æ§å¯¹è±¡çš„è‡ªåŠ¨å‘ç°ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨prometheusæ–‡ä»¶å¤¹ç›®å½•ä¸‹åˆ›å»ºtargets.jsonæ–‡ä»¶&lt;br/&gt;é…ç½®å¦‚ä¸‹:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;[
    {
      &quot;targets&quot;: [ &quot;192.168.214.129:9100&quot;],
      &quot;labels&quot;: {
        &quot;instance&quot;: &quot;node&quot;,
        &quot;job&quot;: &quot;server-129&quot;
      }
    },
    {
        &quot;targets&quot;: [ &quot;192.168.214.134:9100&quot;],
        &quot;labels&quot;: {
          &quot;instance&quot;: &quot;node&quot;,
          &quot;job&quot;: &quot;server-134&quot;
        }
      }
  ]
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç„¶ååœ¨prometheusç›®å½•ä¸‹æ–°å¢å¦‚ä¸‹é…ç½®:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt; - job_name: 'file_sd'   
    file_sd_configs:
      - files:
        - targets.json  
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/2020113023501971.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;ä¸€äº›å‘Šè­¦é…ç½®&quot;&gt;ä¸€äº›å‘Šè­¦é…ç½®&lt;/h3&gt;
&lt;p&gt;è¿™æ˜¯æœ¬äººæ•´ç†çš„ä¸€äº›æœåŠ¡åº”ç”¨å‘Šè­¦çš„é…ç½®ï¼Œä¹Ÿæ¬¢è¿å¤§å®¶å…±åŒè®¨è®ºä¸€äº›å¸¸ç”¨çš„ç›¸å…³é…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;å†…å­˜å‘Šè­¦è®¾ç½®&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;- name: test-rule
  rules:
  - alert: &quot;å†…å­˜æŠ¥è­¦&quot;
    expr: 100 - ((node_memory_MemAvailable_bytes * 100) / node_memory_MemTotal_bytes) &amp;gt; 30
    for: 15s
    labels:
      severity: warning
    annotations:
      summary: &quot;æœåŠ¡å:{{$labels.instance}}å†…å­˜ä½¿ç”¨ç‡è¶…è¿‡30%äº†&quot;
      description: &quot;ä¸šåŠ¡500æŠ¥è­¦: {{ $value }}&quot;
      value: &quot;{{ $value }}&quot;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç¤ºä¾‹å›¾:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130235401773.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130235410890.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FhendzeHBjbQ==,size_16,color_FFFFFF,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç£ç›˜è®¾ç½®:&lt;/p&gt;
&lt;p&gt;æ€»é‡ç™¾åˆ†æ¯”è®¾ç½®:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;(node_filesystem_size_bytes {mountpoint =&quot;/&quot;} - node_filesystem_free_bytes {mountpoint =&quot;/&quot;}) / node_filesystem_size_bytes {mountpoint =&quot;/&quot;} * 100
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201130235426222.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æŸ¥çœ‹æŸä¸€ç›®å½•çš„ç£ç›˜ä½¿ç”¨ç™¾åˆ†æ¯”&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;(node_filesystem_size_bytes{mountpoint=&quot;/boot&quot;}-node_filesystem_free_bytes{mountpoint=&quot;/boot&quot;})/node_filesystem_size_bytes{mountpoint=&quot;/boot&quot;} * 100
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é…å¤šä¸ªæŒ‚è½½ç‚¹&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;(node_filesystem_size_bytes{mountpoint=~&quot;/|/run&quot;}-node_filesystem_free_bytes{mountpoint=~&quot;/|/run&quot;})&lt;br/&gt;/ node_filesystem_size_bytes{mountpoint=~&quot;/|/run&quot;} * 100&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;é¢„è®¡å¤šé•¿æ—¶é—´ç£ç›˜çˆ†æ»¡&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;predict_linear(node_filesystem_free_bytes {mountpoint =&quot;/&quot;}[1h],&lt;br/&gt;4&lt;em&gt;3600) &amp;lt; 0 predict_linear(node_filesystem_free_bytes&lt;br/&gt;{job=&quot;node&quot;}[1h], 4&lt;/em&gt;3600) &amp;lt; 0&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;100 - (avg(irate(node_cpu_seconds_total{mode=&quot;idle&quot;}[5m])) by&lt;br/&gt;(instance) * 100)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;(node_memory_MemFree_bytes+node_memory_Cached_bytes+node_memory_Buffers_bytes)&lt;br/&gt;/ node_memory_MemTotal_bytes * 100&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;100 -&lt;br/&gt;(node_memory_MemFree_bytes+node_memory_Cached_bytes+node_memory_Buffers_bytes)&lt;br/&gt;/ node_memory_MemTotal_bytes * 100&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;100 - (node_filesystem_free_bytes{mountpoint=&quot;/&quot;,fstype=~&quot;ext4|xfs&quot;} /&lt;br/&gt;node_filesystem_size_bytes{mountpoint=&quot;/&quot;,fstype=~&quot;ext4|xfs&quot;} * 100)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;å…¶ä»–&quot;&gt;å…¶ä»–&lt;/h2&gt;
&lt;p&gt;è¿™æ®µæ—¶é—´æ¯”è¾ƒå¿™ï¼ŒELKç›¸å…³å¾—ç­‰å¾…ä¸€æ®µæ—¶é—´åœ¨è¿›è¡Œæ›´æ–°ï¼Œè™½ç„¶å‘è¡¨çš„åšå®¢æ‰å¯¹åº”å»å¹´æ•´ç†çš„åšå®¢ã€‚ã€‚ã€‚ã€‚&lt;br/&gt;æœ¬ç¯‡æ–‡ç« å‡†å¤‡äº†å¥½ä¹…ï¼Œè¾¹æ•´ç†ç¼–å†™ï¼Œæ²¡æƒ³åˆ°å†™äº†è¿™ä¹ˆå¤šã€‚ä¸è¿‡æ„Ÿè§‰è¿™æ ·ä¹Ÿä¸é”™ï¼Œä¸€æ¬¡å†™å‡ºæ¥æˆ–è®¸æ¯”åˆ†å¼€ä¸€æ¬¡æ¬¡çš„å†™å¯¹è¯»è€…è€Œè¨€è¦å¥½ä¸Šä¸ä¸Šï¼Œæ¯•ç«Ÿä¸ç”¨ä¸€ç¯‡ç¯‡çš„å»æ‰¾äº†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;éŸ³ä¹æ¨è&quot;&gt;éŸ³ä¹æ¨è&lt;/h3&gt;

&lt;p&gt;åŸåˆ›ä¸æ˜“ï¼Œå¦‚æœæ„Ÿè§‰ä¸é”™ï¼Œå¸Œæœ›ç»™ä¸ªæ¨èï¼æ‚¨çš„æ”¯æŒæ˜¯æˆ‘å†™ä½œçš„æœ€å¤§åŠ¨åŠ›ï¼&lt;br/&gt;ç‰ˆæƒå£°æ˜:&lt;br/&gt;ä½œè€…ï¼šè™šæ— å¢ƒ&lt;br/&gt;åšå®¢å›­å‡ºå¤„ï¼š&lt;a href=&quot;http://www.cnblogs.com/xuwujing&quot;&gt;http://www.cnblogs.com/xuwujing&lt;/a&gt;&lt;br/&gt;CSDNå‡ºå¤„ï¼š&lt;a href=&quot;http://blog.csdn.net/qazwsxpcm&quot;&gt;http://blog.csdn.net/qazwsxpcm&lt;/a&gt;&lt;br/&gt;æ˜é‡‘å‡ºå¤„ï¼š&lt;a href=&quot;https://juejin.im/user/5ae45d5bf265da0b8a6761e4&quot;&gt;https://juejin.im/user/5ae45d5bf265da0b8a6761e4&lt;/a&gt;ã€€ã€€ã€€ã€€&lt;br/&gt;ä¸ªäººåšå®¢å‡ºå¤„ï¼š&lt;a href=&quot;http://www.panchengming.com&quot;&gt;http://www.panchengming.com&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Mon, 30 Nov 2020 16:03:00 +0000</pubDate>
<dc:creator>è™šæ— å¢ƒ</dc:creator>
<og:description>å‰è¨€ æœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯Prometheusé‡‡é›†æ•°æ®ï¼Œé€šè¿‡GrafanaåŠ ä¸ŠPromQLè¯­å¥å®ç°æ•°æ®å¯è§†åŒ–ä»¥åŠé€šè¿‡Alertmanageå®ç°å‘Šè­¦æ¨é€åŠŸèƒ½ã€‚æ¸©é¦¨æç¤ºï¼Œæœ¬ç¯‡æ–‡ç« ç‰¹é•¿ï¼Œ2wå¤šçš„æ–‡å­—åŠ ä¸Šå‡ åå¼ å›¾</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/xuwujing/p/14065740.html</dc:identifier>
</item>
<item>
<title>Windowsç”Ÿäº§åŠ›å·¥å…·æ¨è - è™«å¸ˆ</title>
<link>http://www.cnblogs.com/fnng/p/14065701.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/fnng/p/14065701.html</guid>
<description>&lt;p&gt;ç›¸ä¿¡å¤§éƒ¨åˆ†åŒå­¦è¿˜æ˜¯Windowsç”¨æˆ·ï¼Œä½œä¸ºä¸€ä¸ªé•¿æœŸWindows/MacOSåŒç³»ç»Ÿé•¿æœŸç”¨æˆ·ï¼ŒWindowsåœ¨ç”¨çš„å¥½ï¼Œå·¥ä½œæ•ˆç‡ä¹Ÿå¾ˆé«˜ï¼Œä¸‹é¢å°±æ¨èå‡ æ¬¾Windowsä¸‹é¢çš„ç”Ÿäº§åŠ›å·¥å…·ã€‚&lt;/p&gt;

&lt;p&gt;ç”¨è¿‡MacOSçš„åŒå­¦ä¸€å®šå¿˜ä¸äº†ä»–çš„ Spotlightï¼ˆèšç„¦æœç´¢ï¼‰ï¼Œéå¸¸é«˜æ•ˆã€‚&lt;/p&gt;
&lt;p&gt;å½“ç„¶ Windows ä¹Ÿæœ‰æœç´¢ï¼Œä½†æ˜¯ï¼Œä»–æœç´¢èƒ½åŠ›æ¯”è¾ƒä¸€èˆ¬ï¼Œæ¯”å¦‚æˆ‘æœç´¢QQå…³é”®å­—æ˜¯æ‰¾ä¸åˆ°å®‰è£…çš„åº”ç”¨çš„ï¼Œåªèƒ½æœç´¢è…¾è®¯æˆ–è€…tengxun, è¿™å…¶å®å°±ä¸å¤ªç¬¦åˆæˆ‘çš„ä¹ æƒ¯äº†ã€‚å…¶æ¬¡ï¼Œå®ƒä¸æ˜¯æ˜¾ç¤ºåœ¨å±å¹•ä¸­å¿ƒä½ç½®çš„ï¼Œæ¯æ¬¡æœç´¢çœ¼ç›è¦ç§»åˆ°å·¦ä¸‹è§’ä¹Ÿå¾ˆä¸çˆ½ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆutoolsç”¨èµ·æ¥å°±å¤ªçˆ½äº†ã€‚&lt;/p&gt;
&lt;p&gt;å®˜ç½‘ï¼š&lt;a href=&quot;https://u.tools/docs/&quot;&gt;https://u.tools/docs/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/311516/202011/311516-20201130233311454-100109233.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;uTools æ˜¯ä¸€ä¸ªæç®€ã€æ’ä»¶åŒ–ã€è·¨å¹³å°çš„ç°ä»£æ¡Œé¢è½¯ä»¶ã€‚é€šè¿‡è‡ªç”±é€‰é…ä¸°å¯Œçš„æ’ä»¶ï¼Œæ‰“é€ ä½ å¾—å¿ƒåº”æ‰‹çš„å·¥å…·é›†åˆã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡å¿«æ·é”®ï¼ˆé»˜è®¤ alt + space ï¼‰å°±å¯ä»¥å¿«é€Ÿå‘¼å‡ºè¿™ä¸ªæœç´¢æ¡†ã€‚å®ƒç›¸å½“èªæ˜ï¼Œä½ å¯ä»¥å¾€è¾“å…¥æ¡†å†…ç²˜è´´æ–‡æœ¬ã€å›¾ç‰‡ã€æˆªå›¾ã€æ–‡ä»¶ã€æ–‡ä»¶å¤¹ç­‰ç­‰ï¼Œèƒ½å¤Ÿå¤„ç†æ­¤å†…å®¹çš„æ’ä»¶ä¹Ÿæ—©å·²å‡†å¤‡å°±ç»ªï¼Œç»Ÿä¸€çš„è®¾è®¡é£æ ¼å’Œæ“ä½œæ–¹å¼ï¼ŒåŠ©ä½ é«˜æ•ˆçš„å¾—åˆ°ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;ä¸€æ—¦ä½ ç†Ÿæ‚‰å®ƒåï¼Œé™¤äº†èƒ½å¤Ÿä¸ºä½ èŠ‚çº¦å¤§é‡æ—¶é—´ï¼Œä¸ä¸­æ–­ã€æ— å¹²æ‰°ï¼Œè®©ä½ å¯ä»¥æ›´åŠ ä¸“æ³¨åœ°æ”¹å˜ä¸–ç•Œã€‚&lt;/p&gt;

&lt;p&gt;windowsçš„æ–‡ä»¶æœç´¢æ€»æ˜¯æ…¢ï¼Œç„¶è€Œwindowsåªæ˜¯æ…¢è€Œå·²ï¼Œè€ŒmacOSæ–‡ä»¶æœç´¢å°±å¾ˆè¿·äº†ï¼Œåˆç”¨macOSçš„åŒå­¦ä¸€å®šæ·±æœ‰åŒæ„Ÿã€‚everythingç®€ç›´æ˜¯ç§’å‡ºç»“æœï¼Œæ„Ÿè§‰æˆ‘çš„äººç”Ÿéƒ½å˜é•¿äº†ã€‚&lt;/p&gt;
&lt;p&gt;å®˜ç½‘ï¼š&lt;a href=&quot;https://www.voidtools.com/zh-cn/&quot;&gt;https://www.voidtools.com/zh-cn/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/311516/202011/311516-20201130233524342-49344143.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Everything æ˜¯ Windows ä¸Šä¸€æ¬¾æœç´¢å¼•æ“ï¼Œå®ƒèƒ½å¤ŸåŸºäºæ–‡ä»¶åå¿«é€Ÿå®šæ–‡ä»¶å’Œæ–‡ä»¶å¤¹ä½ç½®ã€‚&lt;/p&gt;
&lt;p&gt;ä¸åƒ Windows å†…ç½®æœç´¢ï¼Œ&quot;Everything&quot; é»˜è®¤æ˜¾ç¤ºç”µè„‘ä¸Šæ¯ä¸ªæ–‡ä»¶å’Œæ–‡ä»¶å¤¹ (å°±å¦‚å…¶å &quot;Everything&quot;)ã€‚&lt;/p&gt;
&lt;p&gt;æ‚¨åœ¨æœç´¢æ¡†è¾“å…¥çš„å…³é”®è¯å°†ä¼šç­›é€‰æ˜¾ç¤ºçš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚&lt;/p&gt;

&lt;p&gt;ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œbashæ‰æ˜¯ç”Ÿäº§åŠ›ï¼ŒLinux/macOSä¸‹é¢æœ‰ iTerm2 è¿™æ ·çš„ç”Ÿäº§åŠ›å·¥å…·ï¼Œæˆ‘ä¸€ç›´åœ¨Windowsä¸‹é¢ç”¨cmderï¼Œè™½ç„¶å®ƒä¹Ÿè¿˜è¡Œï¼Œä½†è¿˜æ˜¯æœ‰äº›ä¸è¶³ã€‚&lt;/p&gt;
&lt;p&gt;ç”¨äº†Windows Terminal ä¹‹åï¼Œæ„Ÿè§‰ä½“éªŒå¥½äº†ä¸å°‘ï¼Œä½†æ˜¯æ¯”èµ·iTerm2 è¿˜æ˜¯æœ‰å·®è·ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/311516/202011/311516-20201130234657665-1212742051.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;

&lt;p&gt;macOSçš„åŒå­¦ä¸€å®šçŸ¥é“ homebrewï¼Œç”¨å®ƒæ¥è£…å¼€å‘å·¥å…·å’Œåº“ç®€ç›´å¤ªæ–¹ä¾¿äº†ã€‚é‚£ä¹ˆwindowsä¸‹é¢æœ‰ scoopã€‚&lt;/p&gt;
&lt;p&gt;å®˜æ–¹ç½‘ç«™ï¼š&lt;a href=&quot;https://scoop.sh/&quot;&gt;https://scoop.sh/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/311516/202011/311516-20201130235032163-1426276246.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æœ‰äº†è¿™äº›å·¥å…·çš„åŠ æŒï¼Œç›¸ä¿¡ä½ çš„ç¼–ç¨‹ä¹‹è·¯ä¸€å®šäº‹åŠåŠŸå€ã€‚&lt;/p&gt;
</description>
<pubDate>Mon, 30 Nov 2020 15:52:00 +0000</pubDate>
<dc:creator>è™«å¸ˆ</dc:creator>
<og:description>Windowsç”Ÿäº§åŠ›å·¥å…·æ¨è</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/fnng/p/14065701.html</dc:identifier>
</item>
<item>
<title>Javaå¤šçº¿ç¨‹ä¸­çš„wait/notifyé€šä¿¡æ¨¡å¼ - JJian</title>
<link>http://www.cnblogs.com/jian0110/p/14064934.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/jian0110/p/14064934.html</guid>
<description>&lt;blockquote readability=&quot;11&quot;&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€æœ€è¿‘åœ¨çœ‹ä¸€äº›JUCä¸‹çš„æºç ï¼Œæ›´åŠ æ„è¯†åˆ°æƒ³è¦å­¦å¥½Javaå¤šçº¿ç¨‹ï¼ŒåŸºç¡€æ˜¯å…³é”®ï¼Œæ¯”å¦‚æƒ³&lt;strong&gt;è¦å­¦å¥½ReentranLockæºç ï¼Œå°±å¾—æŒæ¡å¥½AQSæºç ï¼Œè€ŒAQSæºç ä¸­åˆæœ‰å¾ˆå¤šJavaå¤šçº¿ç¨‹ç»å…¸çš„ä¸€äº›åº”ç”¨ï¼›å†æ¯”å¦‚çœ‹äº†çº¿ç¨‹æ± çš„æ ¸å¿ƒæºç å®ç°ï¼Œåˆå­¦åˆ°äº†å¾ˆå¤šæ ¸å¿ƒå®ç°&lt;/strong&gt;ï¼Œå…¶å®è¿™äº›éƒ½å¯ä»¥æå‡ºæ¥æ…¢æ…¢æ¶ˆåŒ–å¹¶å˜æˆè‡ªå·±çš„çŸ¥è¯†ç‚¹ï¼Œä»Šå¤©è¿™ä¸ªJavaç­‰å¾…/é€šçŸ¥æ¨¡å¼å…¶å®æ˜¯Thread.join()å®ç°çš„å…³é”®ï¼Œè¿˜æœ‰çº¿åŸå¸‚å·¥ä½œçº¿ç¨‹ä¸­çº¿ç¨‹è·Ÿçº¿ç¨‹ä¹‹é—´çš„é€šä¿¡çš„æ ¸å¿ƒæ‰€åœ¨ï¼Œæ•…åœ¨æ­¤ä¸ºäº†åŠ æ·±ç†è§£ï¼Œåšæ­¤è®°å½•ï¼&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€&lt;strong&gt;å‚è€ƒèµ„æ–™ã€ŠJavaå¹¶å‘ç¼–ç¨‹è‰ºæœ¯ã€‹ï¼ˆç”µå­PDFç‰ˆï¼‰ï¼Œæœ‰éœ€è¦çš„æœ‹å‹çš„å¯ä»¥ç§ä¿¡æˆ–è€…è¯„è®º&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr/&gt;

&lt;h2&gt;&lt;span&gt;1ã€ç­‰å¾…/é€šçŸ¥æ¨¡å¼æ¦‚è¿°&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;ã€€&lt;span&gt;ã€€é¦–å…ˆå…ˆä»‹ç»ä¸‹å®˜æ–¹çš„ä¸€ä¸ªæ­£å¼çš„ä»‹ç»ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€ç­‰å¾…/é€šçŸ¥æœºåˆ¶ï¼Œæ˜¯æŒ‡ä¸€ä¸ªçº¿ç¨‹Aè°ƒç”¨äº†å¯¹è±¡objectçš„wait()æ–¹æ³•è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œè€Œå¦ä¸€ä¸ªçº¿ç¨‹Bè°ƒç”¨äº†å¯¹è±¡objectçš„notifyæˆ–è€…notifyAll()æ–¹æ³•ï¼Œçº¿ç¨‹Aæ”¶åˆ°é€šçŸ¥åä»å¯¹è±¡Oçš„wait()æ–¹æ³•è¿”å›ï¼Œè¿›è€Œè¿˜è¡Œåç»­æ“ä½œã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€è€Œæˆ‘çš„ç†è§£æ˜¯ï¼ˆä¸¾ä¾‹è¯´æ˜ï¼‰ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€å‡è®¾å·¥å‚é‡Œæœ‰ä¸¤æ¡æµæ°´çº¿ï¼ŒæŸä¸ªå·¥ä½œæµç¨‹éœ€è¦è¿™ä¸¤ä¸ªæµæ°´çº¿é…åˆå®Œæˆï¼Œè¿™ä¸¤ä¸ªæµæ°´çº¿åˆ†åˆ«æ˜¯Aå’ŒBï¼Œå…¶ä¸­Aè´Ÿè´£å‡†å¤‡å„ç§é…ä»¶ï¼ŒBè´Ÿè´£ç§Ÿè£…é…ä»¶ä¹‹åäº§å‡ºè¾“å‡ºåˆ°å·¥ä½œå°ã€‚&lt;strong&gt;Bçš„å·¥ä½œéœ€è¦Açš„é…ä»¶å‡†å¤‡å……åˆ†ï¼Œå¦åˆ™å°±ä¼šä¸€ç›´ç­‰å¾…Aå‡†å¤‡å¥½é…ä»¶&lt;/strong&gt;ï¼Œå¹¶ä¸”Aå‡†å¤‡å¥½é…ä»¶åä¼šé€šè¿‡ä¸€ä¸ªå¼€å¤´&lt;strong&gt;é€šçŸ¥&lt;/strong&gt;å‘Šè¯‰Bæˆ‘å·²ç»å‡†å¤‡å¥½äº†ï¼Œä½ é‚£è¾¹&lt;strong&gt;ä¸ç”¨ä¸€ç›´ç­‰å¾…äº†&lt;/strong&gt;ï¼Œå¯ä»¥ç»§ç»­æ‰§è¡Œä»»åŠ¡äº†ã€‚æµç¨‹Aä¸æµç¨‹Bå°±æ˜¯å¯¹åº”çš„çº¿ç¨‹Aä¸çº¿ç¨‹Bä¹‹é—´çš„é€šä¿¡ï¼Œå³å¯ä»¥ç†è§£ä¸ºç›¸äº’é…åˆï¼Œå…·ä½“ä¹Ÿå°±æ˜¯â€œâ€é€šçŸ¥/ç­‰å¾…â€œâ€æœºåˆ¶ï¼&lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;&lt;span&gt;2ã€éœ€è¦æ³¨æ„çš„ç»†èŠ‚ã€€ã€€&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€é‚£ä¹ˆï¼Œæˆ‘ä»¬éƒ½çŸ¥é“è¶…ç±»Objectæœ‰wait()æ–¹æ³•ä¸notify()/notifyAll()æ–¹æ³•ï¼Œåœ¨è¿›è¡Œæ­£å¼ä»£ç ä¸¾ä¾‹ä¹‹å‰ï¼Œåº”è¯¥å…ˆåŠ æ·±ä¸‹å¯¹è¿™ä¸‰ä¸ªæ–¹æ³•çš„ç†è§£ä¸ä¸€äº›ç»†èŠ‚ï¼ˆæœ‰ä¸€äº›ç»†èŠ‚ç¡®å®å®¹æ˜“è¢«å¿½ç•¥ï¼‰&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;è°ƒç”¨wait()æ–¹æ³•ï¼Œä¼šé‡Šæ”¾é”&lt;/span&gt;&lt;/strong&gt;ï¼ˆè¿™ä¸€ç‚¹æˆ‘æƒ³å¤§éƒ¨åˆ†äººéƒ½çŸ¥é“ï¼‰ï¼Œ&lt;strong&gt;&lt;span&gt;çº¿ç¨‹çŠ¶æ€ç”±RUNNING-&amp;gt;WAITNG&lt;/span&gt;&lt;/strong&gt;ï¼Œå½“å‰çº¿ç¨‹è¿›å…¥å¯¹è±¡ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼›&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;è°ƒç”¨notify()/notifyAll()æ–¹æ³•ä¸ä¼šç«‹é©¬é‡Šæ”¾é”&lt;/span&gt;&lt;/strong&gt;ï¼ˆè¿™ä¸€ç‚¹æˆ‘å¤§å®¶äººä¹Ÿåº”è¯¥çŸ¥é“ï¼Œä½†æ˜¯ä»€ä¹ˆæ—¶å€™é‡Šæ”¾é”å‘¢ï¼Ÿ--------è¯·çœ‹ä¸‹ä¸€æ¡ï¼‰ï¼Œnotify()æ–¹æ³•æ˜¯å°†ç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹ç§»åˆ°åŒæ­¥é˜Ÿåˆ—ä¸­ï¼Œè€ŒnotifyAll()åˆ™æ˜¯å…¨éƒ¨ç§»åˆ°åŒæ­¥é˜Ÿåˆ—ä¸­ï¼Œè¢«ç§»å‡ºçš„&lt;strong&gt;&lt;span&gt;çº¿ç¨‹çŠ¶æ€WAITING--&amp;gt;BLOCKED&lt;/span&gt;&lt;/strong&gt;;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å½“å‰è°ƒç”¨notify()/notifyAll()çš„çº¿ç¨‹é‡Šæ”¾é”äº†æ‰ç®—é‡Šæ”¾é”ï¼Œæ‰æœ‰æœºä¼šå”¤é†’waitçº¿ç¨‹è¿”å›&lt;/span&gt;&lt;/strong&gt;ï¼ˆä¸ºä»€ä¹ˆæœ‰æ‰æœ‰æœºä¼šè¿”å›å‘¢ï¼Ÿ------ç»§ç»­çœ‹ä¸‹ä¸€æ¡ï¼‰&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;ä»wait()è¿”å›çš„å‰ææ˜¯å¿…é¡»è·å¾—è°ƒç”¨å¯¹è±¡é”&lt;/span&gt;&lt;/strong&gt;ï¼Œä¹Ÿå°±æ˜¯è¯´notify()ä¸notifyAll()é‡Šæ”¾é”ä¹‹åï¼Œwait()è¿›å…¥BLOCKEDçŠ¶æ€ï¼Œå¦‚æœå…¶ä»–çº¿ç¨‹æœ‰ç«äº‰å½“å‰é”çš„è¯ï¼Œwaitçº¿ç¨‹ç»§ç»­äº‰å–é”èµ„æ ¼ï¼ˆä¸å¥½ç†è§£çš„è¯ï¼Œè¯·çœ‹ä¸‹é¢çš„ä»£ç ä¸¾ä¾‹ï¼‰&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;ä½¿ç”¨wait()ã€notify()ã€notifyAll()æ–¹æ³•æ—¶éœ€è¦å…ˆè°ƒå¯¹è±¡åŠ é”&lt;/strong&gt;&lt;/span&gt;ï¼ˆè¿™å¯èƒ½æ˜¯æœ€å®¹æ˜“å¿½è§†çš„ç‚¹äº†ï¼Œè‡³äºä¸ºä»€ä¹ˆï¼Œè¯·å…ˆçœ‹äº†ä»£ç ä¹‹åï¼Œçœ‹æœ¬ç¯‡åšæ–‡æœ€åè¡¥å……ï¼š&lt;strong&gt;wait()ã€notify()ã€notifyAll()åŠ é”çš„åŸå› ----é˜²æ­¢çº¿ç¨‹å³é¥¥é¥¿&lt;/strong&gt;ï¼‰&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;span&gt;1ã€ç»“åˆä»£ç ç†è§£&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ã€€&lt;span&gt;ç»“åˆä¸Šè¿°çš„â€œå·¥å‚æµç¨‹è£…é…é…ä»¶å¹¶äº§å‡ºçš„ä¾‹å­â€ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼ˆæµæ°´çº¿ï¼‰WaitThreadä¸NotifyThreadã€å…¶ä¸­WaitThreadæ˜¯è¢«é€šçŸ¥çš„ä»»åŠ¡ï¼Œå®Œæˆä¸»è¦çš„å·¥ä½œï¼ˆç»„è£…é…ä»¶å®Œæˆäº§å“ï¼‰ï¼Œéœ€è¦æ—¶åˆ»åˆ¤æ–­æ ‡å¿—ä½ï¼ˆå¼€å…³ï¼‰ï¼›NotifyThreadæ˜¯éœ€è¦é€šçŸ¥çš„ä»»åŠ¡ï¼Œéœ€è¦å¯¹WaitThreadè¿›è¡Œâ€œç›‘ç£é€šçŸ¥â€ï¼Œä¸¤ä¸ªé…åˆæ‰èƒ½æ›´å¥½å®Œæˆäº§å“çš„ç»„è£…å¹¶è¾“å‡ºã€‚&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;40&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; WaitNotify {

    &lt;/span&gt;&lt;span&gt;static&lt;/span&gt; Object lock = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Object();
    &lt;/span&gt;&lt;span&gt;static&lt;/span&gt; &lt;span&gt;boolean&lt;/span&gt; flag = &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; main(String[] args) {
        &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; Thread(&lt;span&gt;new&lt;/span&gt; WaitThread(), &quot;WaitThread&quot;&lt;span&gt;).start();
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
            Thread.sleep(&lt;/span&gt;1000&lt;span&gt;);
        } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (InterruptedException e) {
            e.printStackTrace();
        }
        &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; Thread(&lt;span&gt;new&lt;/span&gt; NotifyThread(), &quot;NotifyThread&quot;&lt;span&gt;).start();

    }

    &lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
     * æµæ°´çº¿Aï¼Œå®Œæˆä¸»è¦ä»»åŠ¡
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;static&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; WaitThread &lt;span&gt;implements&lt;/span&gt;&lt;span&gt; Runnable{
        @Override
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; run() {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; è·å–objectå¯¹è±¡é”&lt;/span&gt;
            &lt;span&gt;synchronized&lt;/span&gt;&lt;span&gt; (lock){
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ¡ä»¶ä¸æ»¡è¶³æ—¶ä¸€ç›´åœ¨ç­‰ï¼Œç­‰å¦å¤–çš„çº¿ç¨‹æ”¹å˜è¯¥æ¡ä»¶ï¼Œå¹¶é€šçŸ¥è¯¥waitçº¿ç¨‹&lt;/span&gt;
                &lt;span&gt;while&lt;/span&gt; (!&lt;span&gt;flag){
                    &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
                        System.out.println(Thread.currentThread() &lt;/span&gt;+ &quot; is waiting, flag is &quot;+&lt;span&gt;flag);
                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; wait()æ–¹æ³•è°ƒç”¨å°±ä¼šé‡Šæ”¾é”ï¼Œå½“å‰çº¿ç¨‹è¿›å…¥ç­‰å¾…é˜Ÿåˆ—ã€‚&lt;/span&gt;
&lt;span&gt;                        lock.wait();
                    } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; TODO æ¡ä»¶å·²ç»æ»¡è¶³ï¼Œä¸ç»§ç»­whileï¼Œå®Œæˆä»»åŠ¡&lt;/span&gt;
                System.out.println(Thread.currentThread() + &quot; is running, flag is &quot;+&lt;span&gt;flag);
            }
        }
    }
    &lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
     * æµæ°´çº¿Bï¼Œå¯¹å¼€å…³è¿›è¡Œæ§åˆ¶ï¼Œå¹¶é€šçŸ¥æµæ°´çº¿A
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;static&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; NotifyThread &lt;span&gt;implements&lt;/span&gt;&lt;span&gt; Runnable{
        @Override
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; run() {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; è·å–ç­‰waitçº¿ç¨‹åŒä¸€ä¸ªobjectå¯¹è±¡é”&lt;/span&gt;
            &lt;span&gt;synchronized&lt;/span&gt;&lt;span&gt; (lock){
                flag &lt;/span&gt;= &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; é€šçŸ¥waitçº¿ç¨‹ï¼Œæˆ‘å·²ç»æ”¹å˜äº†æ¡ä»¶ï¼Œä½ å¯ä»¥ç»§ç»­è¿”å›æ‰§è¡Œäº†ï¼ˆè¿”å›ä¹‹åç»§ç»­åˆ¤æ–­whileï¼‰
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ä½†æ˜¯æ­¤æ—¶é€šçŸ¥notify()æ“ä½œå¹¶ç«‹å³ä¸ä¼šé‡Šæ”¾é”ï¼Œè€Œæ˜¯è¦ç­‰å½“å‰çº¿ç¨‹é‡Šæ”¾é”
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; TODO æˆ‘å‡†å¤‡å¥½é…ä»¶äº†ï¼Œæˆ‘éœ€è¦é€šçŸ¥å…¨éƒ¨çš„ç»„è£…æµæ°´çº¿A.....&lt;/span&gt;
&lt;span&gt;                lock.notifyAll();
                System.out.println(Thread.currentThread() &lt;/span&gt;+ &quot; hold lock, notify waitThread and flag is &quot;+&lt;span&gt;flag);
            }
        }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;è¿è¡Œmainå‡½æ•°ï¼Œè¾“å‡ºï¼š&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;42&quot;&gt;
&lt;pre&gt;
Thread[WaitThread,5,main] is waiting, flag is &lt;span&gt;false&lt;/span&gt;&lt;span&gt;
Thread[NotifyThread,&lt;/span&gt;5,main] hold lock, notify waitThread and flag is &lt;span&gt;true&lt;/span&gt;&lt;span&gt;
Thread[WaitThread,&lt;/span&gt;5,main] is running, flag is &lt;span&gt;true&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;è½¦åºŠæµæ°´å·¥ä½œå¼€å¯ï¼Œæµæ°´çº¿çš„å¼€å…³ä¸€å¼€å§‹æ˜¯å…³é—­çš„ï¼ˆflag=falseï¼‰ï¼Œ&lt;/span&gt;&lt;span&gt;æµæ°´çº¿Bï¼ˆNotifyThreadï¼‰å»å¼€å¯åï¼Œå¼€å§‹è‡ªåŠ¨å”¤é†’æµæ°´çº¿Aï¼ˆWaitThreadï¼‰ï¼Œæ•´ä¸ªæµæ°´çº¿å¼€å§‹å·¥ä½œäº†......&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;&lt;span&gt;Thread[WaitThread,5,main] is waiting, flag is falseï¼š ä¸€å¼€å§‹æµæ°´çº¿Aå‘ç°è‡ªå·±æ²¡æœ‰é…ä»¶å¯ç§Ÿè£…ï¼Œæ‰€ä»¥ç­‰æµæ°´çº¿Aå‡†å¤‡å¥½é…ä»¶ï¼ˆè¿™æ ·æ˜¯ä¸æ˜¯è§‰å¾—ç‰¹åˆ«å‚»ï¼Œå“ˆå“ˆå“ˆï¼ŒçœŸæ­£çš„æµæ°´çº¿ä¸ä¼šæµªè´¹æ—¶é—´ç­‰çš„ï¼Œè€Œä¸”ä¼šæœ‰å¾ˆå¤šæ¡æµæ°´çº¿Bå‡†å¤‡é…ä»¶çš„ï¼Œè¿™é‡Œåªæ˜¯ä¸¾ä¾‹è¯´æ˜ï¼Œæœ›ç†è§£ï¼ï¼‰ï¼›&lt;/span&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;span&gt;Thread[NotifyThread,5,main] hold lock, notify waitThread and flag is trueï¼šæµæ°´çº¿Bå‡†å¤‡å¥½äº†é…ä»¶ï¼Œå¼€å¯å¼€å…³ï¼ˆflag=tureï¼‰ï¼Œå¹¶é€šçŸ¥æµæ°´çº¿Aï¼Œè®©æµæ°´çº¿Aå¼€å§‹å·¥ä½œï¼›&lt;/span&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;Thread[WaitThread,5,main] is running, flag is trueï¼Œæµæ°´çº¿Bæ”¶åˆ°äº†é€šçŸ¥ï¼Œå†æ¬¡æ£€æŸ¥å¼€å…³æ˜¯å¦å¼€å¯äº†ï¼Œå¼€å¯çš„è¯å°±å¼€å§‹è¿”å›ç»§ç»­å®Œæˆå·¥ä½œäº†&lt;/span&gt;&lt;/strong&gt;ã€‚&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;å…¶å®ç»“åˆä¸Šè¿°æˆ‘ä¸¾çš„ä¾‹å­è¿˜æ˜¯å¾ˆå¥½ç†è§£çš„ï¼Œä¸‹é¢æ˜¯å¤§æ¦‚çš„ä¸€ä¸ªç²—ç•¥æ—¶åºå›¾ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€ã€€ ã€€ã€€ã€€ã€€&lt;img src=&quot;https://img2020.cnblogs.com/blog/1352849/202011/1352849-20201130213846101-99899289.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2&gt;&lt;span&gt;2ã€æ‰©å±•ç†è§£----wait()è¿”å›çš„å‰ææ˜¯è·å¾—äº†é”&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;ä¸Šè¿°å·²ç»è¡¨è¾¾äº†è¿™ä¸ªæ³¨æ„çš„ç»†èŠ‚ï¼š&lt;strong&gt;&lt;span&gt;ä»wait()è¿”å›çš„å‰ææ˜¯å¿…é¡»è·å¾—è°ƒç”¨å¯¹è±¡é”&lt;/span&gt;ï¼Œ&lt;/strong&gt;æˆ‘ä»¬å†å¢åŠ èƒ½ç«äº‰lockçš„åŒæ­¥ä»£ç å—ï¼ˆçº¢å­—éƒ¨åˆ†ï¼‰ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;40&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; WaitNotify {

    &lt;/span&gt;&lt;span&gt;static&lt;/span&gt; Object lock = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Object();
    &lt;/span&gt;&lt;span&gt;static&lt;/span&gt; &lt;span&gt;boolean&lt;/span&gt; flag = &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; main(String[] args) {
        &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; Thread(&lt;span&gt;new&lt;/span&gt; WaitThread(), &quot;WaitThread&quot;&lt;span&gt;).start();
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
            Thread.sleep(&lt;/span&gt;1000&lt;span&gt;);
        } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (InterruptedException e) {
            e.printStackTrace();
        }
        &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; Thread(&lt;span&gt;new&lt;/span&gt; NotifyThread(), &quot;NotifyThread&quot;&lt;span&gt;).start();
    }

    &lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
     * æµæ°´çº¿Aï¼Œå®Œæˆä¸»è¦ä»»åŠ¡
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;static&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; WaitThread &lt;span&gt;implements&lt;/span&gt;&lt;span&gt; Runnable{
        @Override
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; run() {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; è·å–objectå¯¹è±¡é”&lt;/span&gt;
            &lt;span&gt;synchronized&lt;/span&gt;&lt;span&gt; (lock){
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ¡ä»¶ä¸æ»¡è¶³æ—¶ä¸€ç›´åœ¨ç­‰ï¼Œç­‰å¦å¤–çš„çº¿ç¨‹æ”¹å˜è¯¥æ¡ä»¶ï¼Œå¹¶é€šçŸ¥è¯¥waitçº¿ç¨‹&lt;/span&gt;
                &lt;span&gt;while&lt;/span&gt; (!&lt;span&gt;flag){
                    &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
                        System.out.println(Thread.currentThread() &lt;/span&gt;+ &quot; is waiting, flag is &quot;+&lt;span&gt;flag);
                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; wait()æ–¹æ³•è°ƒç”¨å°±ä¼šé‡Šæ”¾é”ï¼Œå½“å‰çº¿ç¨‹è¿›å…¥ç­‰å¾…é˜Ÿåˆ—ã€‚&lt;/span&gt;
&lt;span&gt;                        lock.wait();
                    } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; TODO æ¡ä»¶å·²ç»æ»¡è¶³ï¼Œä¸ç»§ç»­whileï¼Œå®Œæˆä»»åŠ¡&lt;/span&gt;
                System.out.println(Thread.currentThread() + &quot; is running, flag is &quot;+&lt;span&gt;flag);
            }
        }
    }
    &lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
     * æµæ°´çº¿Bï¼Œå¯¹å¼€å…³è¿›è¡Œæ§åˆ¶ï¼Œå¹¶é€šçŸ¥æµæ°´çº¿A
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;static&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; NotifyThread &lt;span&gt;implements&lt;/span&gt;&lt;span&gt; Runnable{
        @Override
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; run() {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; è·å–ç­‰waitçº¿ç¨‹åŒä¸€ä¸ªobjectå¯¹è±¡é”&lt;/span&gt;
            &lt;span&gt;synchronized&lt;/span&gt;&lt;span&gt; (lock){
                flag &lt;/span&gt;= &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; é€šçŸ¥waitçº¿ç¨‹ï¼Œæˆ‘å·²ç»æ”¹å˜äº†æ¡ä»¶ï¼Œä½ å¯ä»¥ç»§ç»­è¿”å›æ‰§è¡Œäº†ï¼ˆè¿”å›ä¹‹åç»§ç»­åˆ¤æ–­whileï¼‰
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ä½†æ˜¯æ­¤æ—¶é€šçŸ¥notify()æ“ä½œå¹¶ç«‹å³ä¸ä¼šé‡Šæ”¾é”ï¼Œè€Œæ˜¯è¦ç­‰å½“å‰çº¿ç¨‹é‡Šæ”¾é”
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; TODO æˆ‘å‡†å¤‡å¥½é…ä»¶äº†ï¼Œæˆ‘éœ€è¦é€šçŸ¥å…¨éƒ¨çš„ç»„è£…æµæ°´çº¿A.....&lt;/span&gt;
&lt;span&gt;                lock.notifyAll();
                System.out.println(Thread.currentThread() &lt;/span&gt;+ &quot; hold lock, notify waitThread and flag is &quot;+&lt;span&gt;flag);
            }
            &lt;/span&gt;&lt;span&gt;// æ¨¡æ‹Ÿè·Ÿæµæ°´çº¿Bç«äº‰
            synchronized (lock){
                System.out.println(Thread.currentThread() + &quot; hold lock again&quot;&lt;/span&gt;&lt;span&gt;&lt;span&gt;);
            }&lt;/span&gt;
        }
    }&lt;/span&gt;&lt;span&gt;
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;è¾“å‡ºç»“æœï¼š&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;45&quot;&gt;
&lt;pre&gt;
Thread[WaitThread,5,main] is waiting, flag is &lt;span&gt;false&lt;/span&gt;&lt;span&gt;
Thread[NotifyThread,&lt;/span&gt;5,main] hold lock, notify waitThread and flag is &lt;span&gt;true&lt;/span&gt;&lt;span&gt;
Thread[NotifyThread,5,main] hold lock again
Thread[WaitThread,5,main] is running, flag is true&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;å…¶ä¸­ç¬¬ä¸‰æ¡è·Ÿç¬¬å››æ¡é¡ºåºå¯èƒ½ä¼šåç€æ¥çš„ï¼Œ&lt;span&gt;è¿™å°±æ˜¯å› ä¸ºlocké”å¯èƒ½è¢«çº¢å­—éƒ¨åˆ†çš„synchronizedä»£ç å—ç«äº‰è·å–ï¼ˆè¿™æ ·wait()æ–¹æ³•å¯èƒ½è·å–ä¸åˆ°locké”ï¼Œä¸ä¼šè¿”å›ï¼‰ï¼Œä¹Ÿå¯èƒ½è¢«waitThreadè·å–ä»wait()æ–¹æ³•è¿”å›&lt;/span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;45&quot;&gt;
&lt;pre&gt;
Thread[WaitThread,5,main] is waiting, flag is &lt;span&gt;false&lt;/span&gt;&lt;span&gt;
Thread[NotifyThread,&lt;/span&gt;5,main] hold lock, notify waitThread and flag is &lt;span&gt;true&lt;/span&gt;&lt;span&gt;
Thread[WaitThread,5,main] is running, flag is true
Thread[NotifyThread,5,main] hold lock again&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;&lt;span&gt;1ã€Thread.join()ä¸­æºç åº”ç”¨&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;Thread.join()ä½œç”¨ï¼šå½“çº¿ç¨‹Aç­‰å¾…threadçº¿ç¨‹ç»ˆæ­¢ä¹‹åæ‰ä»thread.join()è¿”å›ï¼Œ &lt;strong&gt;&lt;span&gt;æ¯ä¸ªçº¿ç¨‹ç»ˆæ­¢çš„å‰ææ˜¯å‰é©±çº¿ç¨‹ç»ˆæ­¢ï¼Œæ¯ä¸ªçº¿ç¨‹ç­‰å¾…å‰é©±çº¿ç¨‹ç»ˆæ­¢åï¼Œæ‰ä»joinæ–¹æ³•è¿”å›ï¼Œè¿™é‡Œæ¶‰åŠäº†ç­‰å¾…/é€šçŸ¥æœºåˆ¶ï¼ˆç­‰å¾…å‰é©±çº¿ç¨‹ç»“æŸï¼Œæ¥æ”¶å‰é©±çº¿ç¨‹ç»“æŸé€šçŸ¥ï¼‰&lt;/span&gt;&lt;/strong&gt;ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Thread.join()æºç ä¸­ï¼Œä½¿ç”¨whileé€‰å¥½åˆ¤æ–­å‰é©±çº¿ç¨‹æ˜¯å¦æ´»ç€ï¼Œå¦‚æœå‰é©±çº¿ç¨‹è¿˜æ´»ç€å°±ä¸€ç›´waitç­‰å¾…ï¼Œå½“ç„¶å¦‚æœè¶…æ—¶çš„è¯å°±ç›´æ¥è¿”å›ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;synchronized&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; join(&lt;span&gt;long&lt;/span&gt;&lt;span&gt; millis)
    &lt;/span&gt;&lt;span&gt;throws&lt;/span&gt;&lt;span&gt; InterruptedException {
        &lt;/span&gt;&lt;span&gt;long&lt;/span&gt; base =&lt;span&gt; System.currentTimeMillis();
        &lt;/span&gt;&lt;span&gt;long&lt;/span&gt; now = 0&lt;span&gt;;

        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (millis &amp;lt; 0&lt;span&gt;) {
            &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; IllegalArgumentException(&quot;timeout value is negative&quot;&lt;span&gt;);
        }
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; è¿™é‡Œçš„while(){wait(millis)} å°±æ˜¯åˆ©ç”¨ç­‰å¾…/é€šçŸ¥ä¸­çš„ç­‰å¾…æ¨¡å¼ï¼Œåªä¸è¿‡åŠ ä¸Šäº†è¶…æ—¶è®¾ç½®&lt;/span&gt;
        &lt;span&gt;if&lt;/span&gt; (millis == 0&lt;span&gt;) {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; whileå¾ªç¯,å½“çº¿ç¨‹è¿˜æ´»ç€çš„æ—¶å€™å°±ä¸€ç›´å¾ªç¯ç­‰å¾…ï¼Œç›´åˆ°çº¿ç¨‹ç»ˆæ­¢&lt;/span&gt;
            &lt;span&gt;while&lt;/span&gt;&lt;span&gt; (isAlive()) {
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; waitç­‰å¾…&lt;/span&gt;
                wait(0&lt;span&gt;);
            }
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ¡ä»¶æ»¡è¶³æ—¶è¿”å›&lt;/span&gt;
        } &lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
            &lt;/span&gt;&lt;span&gt;while&lt;/span&gt;&lt;span&gt; (isAlive()) {
                &lt;/span&gt;&lt;span&gt;long&lt;/span&gt; delay = millis -&lt;span&gt; now;
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (delay &amp;lt;= 0&lt;span&gt;) {
                    &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
                }
                wait(delay);
                now &lt;/span&gt;= System.currentTimeMillis() -&lt;span&gt; base;
            }
        }
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;span&gt;2ã€å…¶å®ƒçš„åº”ç”¨&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€&lt;span&gt;&lt;strong&gt;çº¿ç¨‹æ± çš„æœ¬è´¨æ˜¯ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å·¥ä½œé˜Ÿåˆ—è¿æ¥å·¥ä½œè€…çº¿ç¨‹å’Œå®¢æˆ·ç«¯çº¿ç¨‹ï¼Œå®¢æˆ·ç«¯çº¿ç¨‹å°†ä»»åŠ¡æ”¾å…¥å·¥ä½œé˜Ÿåˆ—åä¾¿è¿”å›ï¼Œè€Œå·¥ä½œè€…çº¿ç¨‹åˆ™ä¸æ–­åœ°ä»å·¥ä½œé˜Ÿåˆ—ä¸­å–å‡ºå·¥ä½œå¹¶æ‰§è¡Œ&lt;/strong&gt;&lt;/span&gt;ã€‚é‚£ä¹ˆï¼Œåœ¨è¿™é‡Œçš„ç­‰å¾…/é€šçŸ¥æ¨¡å¼çš„åº”ç”¨å°±æ˜¯ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€&lt;strong&gt;&lt;span&gt;å·¥ä½œé˜Ÿåˆ—ä¸­çº¿ç¨‹jobæ²¡æœ‰çš„è¯ä¹Ÿå°±æ˜¯å·¥ä½œé˜Ÿåˆ—ä¸ºç©ºçš„æƒ…å†µä¸‹ï¼Œç­‰å¾…å®¢æˆ·ç«¯æ”¾å…¥å·¥ä½œé˜Ÿåˆ—çº¿ç¨‹ä»»åŠ¡ï¼Œå¹¶é€šçŸ¥å·¥ä½œçº¿ç¨‹ç»§ç»­ä»å·¥ä½œé˜Ÿåˆ—ä¸­è·å–çº¿ç¨‹æ‰§è¡Œã€‚&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€æ³¨ï¼šå…³äºçº¿ç¨‹æ± çš„åº”ç”¨æºç è¿™é‡Œä¸åšä»‹ç»ï¼Œå› ä¸ºä¸€æ—¶ä¹Ÿè®²ä¸å®Œï¼ˆè‡ªå·±ä¹Ÿè¿˜æ²¡æœ‰å®Œå…¨æ¶ˆåŒ–ï¼‰ï¼Œå…ˆç®€å•ä»‹ç»ä¸‹åº”ç”¨åˆ°çš„åœ°æ–¹è¿˜æœ‰æ¦‚å¿µã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€è¡¥å……ï¼šå…¶å®æ•°æ®åº“çš„è¿æ¥æ± ä¹Ÿç±»ä¼¼çº¿ç¨‹æ± è¿™ç§å·¥ä½œæµç¨‹ï¼Œä¹Ÿä¼šæ¶‰åŠç­‰å¾…/é€šçŸ¥æ¨¡å¼ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;&lt;span&gt;3ã€ç­‰å¾…/é€šçŸ¥èŒƒå¼&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€ä»‹ç»äº†é‚£ä¹ˆå¤šåº”ç”¨ï¼Œè¿™ç§æ¨¡å¼åº”è¯¥æœ‰ä¸ªç»Ÿä¸€çš„èŒƒå¼æ¥å¥—ç”¨ã€‚å¯¹çš„ï¼Œå¿…ç„¶æ˜¯æœ‰çš„ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€å¯¹äºç­‰å¾…è€…ï¼ˆä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºæ¶ˆè´¹è€…ï¼‰ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;synchronized&lt;/span&gt;&lt;span&gt; (å¯¹è±¡lock) {
        &lt;/span&gt;&lt;span&gt;while&lt;/span&gt;&lt;span&gt; (æ¡ä»¶ä¸æ»¡è¶³) {&lt;/span&gt;
&lt;span&gt;            å¯¹è±¡.wait();
        }
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; TODO å¤„ç†é€»è¾‘&lt;/span&gt;
    }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€å¯¹äºé€šçŸ¥è€…ï¼ˆä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºç”Ÿäº§è€…ï¼‰ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
 &lt;span&gt;synchronized&lt;/span&gt;&lt;span&gt; (å¯¹è±¡lock) {
        &lt;/span&gt;&lt;span&gt;while&lt;/span&gt;&lt;span&gt; (æ¡ä»¶æ»¡è¶³) {
            æ”¹å˜æ¡ä»¶
            å¯¹è±¡.notify();
        }
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æ³¨æ„&lt;span&gt;ï¼š&lt;span&gt;å®é™…å¼€å‘ä¸­æœ€å¥½é‡‡ç”¨çš„æ˜¯è¶…æ—¶ç­‰å¾…/é€šçŸ¥æ¨¡å¼&lt;/span&gt;ï¼Œåœ¨thread.join()æºç æ–¹æ³•ä¸­å®Œç¾ä½“ç°&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;ï¼ˆ1ï¼‰å…¶å®æ ¹æ®wait()æ³¨æ„äº‹é¡¹ä¹Ÿèƒ½æ˜ç™½ï¼Œ&lt;strong&gt;&lt;span&gt;wait()æ˜¯é‡Šæ”¾é”çš„ï¼Œé‚£ä¹ˆä¸åŠ é”å“ªæ¥é‡Šæ”¾é”&lt;/span&gt;&lt;/strong&gt;ï¼&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ï¼ˆ2ï¼‰&lt;strong&gt;&lt;span&gt;wait()ä¸notify()æˆ–è€…notifyAll()å¿…é¡»æ˜¯æ­é…ä¸€èµ·ä½¿ç”¨çš„&lt;/span&gt;&lt;/strong&gt;ï¼Œå¦åˆ™çº¿ç¨‹è°ƒç”¨object.wait()ä¹‹åï¼Œæ²¡æœ‰è¶…æ—¶æœºåˆ¶ï¼Œä¹Ÿæ²¡æœ‰è°ƒç”¨notify()æˆ–è€…notifyAll()å”¤é†’çš„è¯ï¼Œå°±ä¸€ç›´å¤„äºWAITINGçŠ¶æ€ï¼Œé€ æˆè°ƒç”¨wait()çš„çº¿ç¨‹ä¸€ç›´éƒ½æ˜¯é¥¥é¥¿çŠ¶æ€ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ï¼ˆ3ï¼‰ç”±äºç¬¬2æ¡çš„ï¼Œæˆ‘ä»¬å·²çŸ¥ï¼šå³ä¾¿æˆ‘ä»¬ä½¿ç”¨äº†notify()æˆ–è€…notifyAll()å»å”¤é†’çº¿ç¨‹ï¼Œ&lt;strong&gt;&lt;span&gt;ä½†æ˜¯æ²¡æœ‰åœ¨é€‚å½“çš„æ—¶æœºå”¤é†’ï¼ˆæ¯”å¦‚è°ƒç”¨wait()ä¹‹å‰å°±å”¤é†’äº†&lt;/span&gt;&lt;span&gt;ï¼‰&lt;/span&gt;&lt;/strong&gt;ï¼Œ&lt;strong&gt;&lt;span&gt;é‚£ä¹ˆä»ç„¶è°ƒç”¨wait()çº¿ç¨‹å¤„äºWAITINGçŠ¶æ€&lt;/span&gt;&lt;/strong&gt;ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»ä¿è¯wait()æ–¹æ³•è¦ä¹ˆä¸æ‰§è¡Œï¼Œè¦ä¹ˆå°±æ‰§è¡Œå®Œåœ¨è¢«å”¤é†’ã€‚ä¹Ÿå°±æ˜¯ä¸‹åˆ—ä»£ç ä¸­1é‚£é‡Œä¸èƒ½å…è®¸æ’å…¥è°ƒç”¨notify/notifyAllï¼Œ&lt;strong&gt;&lt;span&gt;è‡ªç„¶è€Œç„¶å°±å¢åŠ synchronizedå…³é”®å­—ï¼Œä¿è¯wait()æ“ä½œæ•´ä½“æ‰§è¡Œä¸è¢«ç ´å&lt;/span&gt;&lt;/strong&gt;ï¼&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
 &lt;span&gt;synchronized&lt;/span&gt;&lt;span&gt; (å¯¹è±¡lock) {
        &lt;/span&gt;&lt;span&gt;while&lt;/span&gt;&lt;span&gt; (æ¡ä»¶ä¸æ»¡è¶³) {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 1 è¿™é‡Œå¦‚æœå…ˆæ‰§è¡Œäº†notify/notifyAllæ–¹æ³•ï¼Œé‚£ä¹ˆ2æ‰§è¡Œä¹‹åï¼Œè¯¥çº¿ç¨‹å°±ä¸€ç›´WAITING&lt;/span&gt;
            å¯¹è±¡.wait(); &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt;
&lt;span&gt;        }
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; TODO å¤„ç†é€»è¾‘&lt;/span&gt;
    }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;ç”¨å›¾ç‰‡å±•ç¤ºæ‰§è¡Œé¡ºåºå°±æ˜¯ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1352849/202011/1352849-20201130234509256-1739213704.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ï¼ˆ4ï¼‰&lt;strong&gt;&lt;span&gt;æ³¨æ„synchronizedä»£ç å—ä¸­ï¼Œä»£ç é”™è¯¯æˆ–è€…å…¶å®ƒåŸå› çº¿ç¨‹ç»ˆæ­¢çš„è¯ï¼Œæ²¡æœ‰æ‰§è¡Œåˆ°wait()æ–¹æ³•çš„è¯ï¼Œæ˜¯ä¼šè‡ªåŠ¨é‡Šæ”¾é”çš„ï¼Œä¸å¿…æ‹…å¿ƒä¼šæ­»é”&lt;/span&gt;&lt;/strong&gt;ã€‚&lt;/span&gt;&lt;/p&gt;





</description>
<pubDate>Mon, 30 Nov 2020 15:46:00 +0000</pubDate>
<dc:creator>JJian</dc:creator>
<og:description>å‰è¨€ æœ€è¿‘åœ¨çœ‹ä¸€äº›JUCä¸‹çš„æºç ï¼Œæ›´åŠ æ„è¯†åˆ°æƒ³è¦å­¦å¥½Javaå¤šçº¿ç¨‹ï¼ŒåŸºç¡€æ˜¯å…³é”®ï¼Œæ¯”å¦‚æƒ³è¦å­¦å¥½ReentranLockæºç ï¼Œå°±å¾—æŒæ¡å¥½AQSæºç ï¼Œè€ŒAQSæºç ä¸­åˆæœ‰å¾ˆå¤šJavaå¤šçº¿ç¨‹ç»å…¸çš„ä¸€äº›åº”ç”¨ï¼›å†æ¯”</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/jian0110/p/14064934.html</dc:identifier>
</item>
<item>
<title>2020å¹´çš„UWP(4)â€”â€”UWPå’Œç­‰å¾…Requestçš„Desktop Extension - æ¥¼ä¸Šé‚£ä¸ªèœ€é»</title>
<link>http://www.cnblogs.com/manupstairs/p/14065673.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/manupstairs/p/14065673.html</guid>
<description>&lt;p&gt;ä¸Šä¸€ç¯‡æˆ‘ä»¬è®¨è®ºäº†UWPå’ŒDesktop Extensionäº¤äº’ä¸­ï¼ŒDesktop Extensionæ‰§è¡Œåç«‹å³é€€å‡ºçš„åœºæ™¯ã€‚ä¸‹å›¾æ˜¯æåˆ°çš„å››ç§åœºæ™¯åˆ†ç±»ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æ‰§è¡Œåç«‹å³é€€å‡º&lt;/li&gt;
&lt;li&gt;ç­‰å¾…requestï¼Œå¤„ç†å®Œåé€€å‡º&lt;/li&gt;
&lt;li&gt;ä¸€æˆ–å¤šä¸ªrequest/responseå‘¨æœŸ&lt;/li&gt;
&lt;li&gt;å’ŒUWPç¨‹åºç›¸åŒç”Ÿå‘½å‘¨æœŸ&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/362529/202011/362529-20201130233626531-1957337161.png&quot; alt=&quot;&quot; width=&quot;577&quot; height=&quot;348&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æœ¬ç¯‡æˆ‘ä»¬è®¨è®ºç¬¬äºŒç§ï¼ŒDesktop Extensionç­‰å¾…requeståï¼Œæ ¹æ®ä¼ å‚å®Œæˆæ“ä½œåé€€å‡ºçš„ï¼ŒçŸ­ç”Ÿå‘½å‘¨æœŸåœºæ™¯ã€‚è¯¥ç±»å‹æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;å¯èƒ½å­˜åœ¨å¤šæ¬¡çš„å•å‘è°ƒç”¨&lt;/li&gt;
&lt;li&gt;é€šè¿‡requestæ¥æ”¶å‚æ•°&lt;/li&gt;
&lt;li&gt;ä¸å…³å¿ƒè¿”å›ç»“æœ&lt;/li&gt;
&lt;li&gt;Desktop Extensionç­‰å¾…requestï¼Œå®Œæˆæ“ä½œåé€€å‡º&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;è¯¥åœºæ™¯çš„ç¤ºæ„å›¾å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/362529/202011/362529-20201130233710719-914148669.png&quot; alt=&quot;&quot; width=&quot;477&quot; height=&quot;484&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä¾ç„¶ä»¥Desktop Extensionå¯åŠ¨mspaint.exeå’Œcontrol.exeæ¥ä¸¾ä¾‹ã€‚å’Œä¸Šä¸€ç¯‡ä¸åŒçš„æ˜¯ï¼Œè¿™æ¬¡æˆ‘ä»¬ä¼šé€šè¿‡UWPç«¯å‘èµ·çš„requestæ¥ä¼ é€’å‚æ•°ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬ç¯‡Sample Codeä¸­çš„AppServiceHandlerï¼Œä»¥åŠApp.xaml.csä¸­çš„OnBackgroundActivatedæ–¹æ³•ã€‚è¯·å‚è€ƒã€Š&lt;a href=&quot;https://www.cnblogs.com/manupstairs/p/13853418.html&quot; target=&quot;_blank&quot;&gt;2020å¹´çš„UWP(2)â€”â€”In Process App Service&lt;/a&gt;ã€‹ï¼Œç›¸åŒéƒ¨åˆ†ä¸å†ä»‹ç»ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬ç¯‡æ–°å¢çš„AppServiceConnectionConnectedEventArgså¯¹è±¡åŠConnectedäº‹ä»¶ï¼Œæ˜¯å½“AppServiceConnectioné€šè¿‡OpenAsyncæ–¹æ³•æˆåŠŸè¿æ¥æ—¶ï¼Œä¼ é€’å½“å‰æ´»åŠ¨çš„AppServiceConnectionå¯¹è±¡ï¼Œä»¥ä¾¿è°ƒç”¨SendMessageAsyncç­‰æ–¹æ³•ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; AppServiceConnectionConnectedEventArgs : EventArgs
    {
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; AppServiceConnection Connection { &lt;span&gt;get&lt;/span&gt;&lt;span&gt;; }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; AppServiceConnectionConnectedEventArgs(AppServiceConnection connection)
        {
            Connection &lt;/span&gt;=&lt;span&gt; connection;
        }
    }

   &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;event&lt;/span&gt; EventHandler&amp;lt;AppServiceConnectionConnectedEventArgs&amp;gt; Connected;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åœ¨AppServiceHandlerä¸­çš„OnBackgroundActivatedæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬é¦–è¦åšçš„ï¼Œå³æ˜¯é€šçŸ¥è®¢é˜…å¯¹è±¡ï¼Œæœ‰AppServiceConnectionè¢«æˆåŠŸOpenäº†ï¼Œè¯·åŠæ—¶å“åº”ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; OnBackgroundActivated(AppServiceTriggerDetails details)
        {
            Connected&lt;/span&gt;?.Invoke(&lt;span&gt;this&lt;/span&gt;, &lt;span&gt;new&lt;/span&gt;&lt;span&gt; AppServiceConnectionConnectedEventArgs(details.AppServiceConnection));
            Connection &lt;/span&gt;=&lt;span&gt; details.AppServiceConnection;
            Connection.RequestReceived &lt;/span&gt;+=&lt;span&gt; Connection_RequestReceived;
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è®¢é˜…è¿™ä¸ªConnectedäº‹ä»¶çš„ï¼Œä¸€èˆ¬éƒ½æ˜¯Desktop Extensionçš„å‘èµ·æ–¹ã€‚æ¯”å¦‚è¯´UWPç«¯çš„æŸä¸ªButtonã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;40&quot;&gt;
&lt;pre&gt;
        &lt;span&gt;private&lt;/span&gt; &lt;span&gt;async&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; ButtonLaunchApp_Click(&lt;span&gt;object&lt;/span&gt;&lt;span&gt; sender, RoutedEventArgs e)
        {
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (ApiInformation.IsApiContractPresent(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Windows.ApplicationModel.FullTrustAppContract&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;1&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;&lt;span&gt;))
            {
                AppServiceHandler.Instance.Connected &lt;/span&gt;+=&lt;span&gt; Instance_Connected;
                &lt;/span&gt;&lt;span&gt;await&lt;/span&gt;&lt;span&gt; FullTrustProcessLauncher.LaunchFullTrustProcessForCurrentAppAsync();
            }
        }

        &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;async&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; Instance_Connected(&lt;span&gt;object&lt;/span&gt;&lt;span&gt; sender, AppServiceConnectionConnectedEventArgs e)
        {
            AppServiceHandler.Instance.Connected &lt;/span&gt;-=&lt;span&gt; Instance_Connected;
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; valueSet = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; ValueSet();
            valueSet.Add(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;FileName&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, ComboBoxFileName.SelectionBoxItem);
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; response = &lt;span&gt;await&lt;/span&gt;&lt;span&gt; e.Connection.SendMessageAsync(valueSet);
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä¹‹æ‰€ä»¥éœ€è¦è¿™ä¸ªConnectäº‹ä»¶ï¼Œæ˜¯å› ä¸ºé€šè¿‡SendMessageAsyncä¼ å‚ï¼Œéœ€è¦ä¾èµ–å½“å‰æ´»åŠ¨çš„AppServiceConnectionå¯¹è±¡ã€‚æˆ‘ä»¬æ­£æ˜¯é€šè¿‡Connectedäº‹ä»¶ï¼Œå°†AppServiceConnectionå¯¹è±¡ä¼ é€’ç»™è®¢é˜…è€…ï¼Œä½¿å…¶èƒ½å¤Ÿè®¿é—®SendMessageAsyncç­‰æ–¹æ³•è¿›è¡Œæ•°æ®äº¤äº’ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨Instance_Connectedæ–¹æ³•ä¸­ï¼Œåœ¨æ¯æ¬¡ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œå‡å¯åŠ¨ä¸€ä¸ªæ–°çš„Desktop Extensionè¿›ç¨‹ã€‚åœ¨Desktop Extensionè¿›ç¨‹ä¸­ï¼Œä¼šé€šè¿‡OpenAsyncæ–¹æ³•æ¥è¿æ¥AppServiceConnectionã€‚ä¹‹åä¾¿æ˜¯ç”±OnBackgroundActivatedæ–¹æ³•è§¦å‘Connectedäº‹ä»¶ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å‘èµ·requestã€‚&lt;/p&gt;
&lt;p&gt;è¯¥åœºæ™¯ä¸­ï¼ŒDesktop Extensionä»…éœ€ç»´æŒä¸€ä¸ªè¾ƒçŸ­çš„ç”Ÿå‘½å‘¨æœŸï¼Œåœ¨ç­‰åˆ°requeståï¼Œæ ¹æ®ä¼ å‚å®Œæˆç›¸åº”æ“ä½œï¼Œå°±å¯ä»¥é‡Šæ”¾èµ„æºå®‰å…¨é€€å‡ºäº†ã€‚å¯¹æ•´ä¸ªAPPè€Œè¨€ï¼Œæ—¢ä¸ä¼šé•¿æœŸå ç”¨è¿‡å¤šèµ„æºï¼Œä¹Ÿä¸ä¼šå¯¼è‡´UWPç«¯æ— æ³•Suspendã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹å›¾ä¸­çš„ç»¿è‰²å¶å­å›¾æ ‡ï¼Œåœ¨Desktop Extensionè¿è¡Œæ—¶ï¼Œæ˜¯ä¸ä¼šå‡ºç°çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/362529/202011/362529-20201130234008247-876685628.png&quot; alt=&quot;&quot; width=&quot;578&quot; height=&quot;421&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;åŒæ—¶æˆ‘ä»¬è¦çŸ¥é“AppServiceçš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸å¯æ§çš„ï¼Œåœ¨UWPç«¯ç¨‹åºæœ€å°åŒ–ä»¥åï¼ŒWindowsä¼šåœ¨ä¸€æ®µæ—¶é—´ååœæ­¢AppServiceï¼ŒAppServiceConnectionä¹Ÿä¼šè¢«disposeã€‚æ‰€ä»¥å­˜å‚¨ä¸€ä¸ªAppServiceConnectioné•¿æœŸå¯¹è±¡ï¼Œç”¨æ¥å’Œæ°¸ä¸é€€å‡ºçš„Desktop Extensioné€šè®¯å¹¶ä¸æ˜¯ä¸ªå¥½ä¸»æ„ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯Desktop Extensionç«¯çš„éƒ¨åˆ†ä»£ç ï¼Œä¸ºäº†æ–¹ä¾¿è§‚å¯Ÿåº”ç”¨ç¨‹åºçš„è¡Œä¸ºï¼Œæˆ‘åœ¨Sampleä¸­å°†Enrivonment.Exitç»™æ³¨é‡Šæ‰äº†ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;async&lt;/span&gt;&lt;span&gt; Task InitializeAsync()
        {
            Connection &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; AppServiceConnection();
            Connection.PackageFamilyName &lt;/span&gt;=&lt;span&gt; Package.Current.Id.FamilyName;
            Connection.AppServiceName &lt;/span&gt;= &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;ParameterAppService&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
            AppServiceConnectionStatus status &lt;/span&gt;= &lt;span&gt;await&lt;/span&gt;&lt;span&gt; Connection.OpenAsync();
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (status !=&lt;span&gt; AppServiceConnectionStatus.Success)
            {
                Console.WriteLine(status);
            }
            &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;
            {
                Console.WriteLine(status);
                Connection.RequestReceived &lt;/span&gt;+=&lt;span&gt; Connection_RequestReceived;
            }
        }

        &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; Connection_RequestReceived(AppServiceConnection sender, AppServiceRequestReceivedEventArgs args)
        {
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; content = args.Request.Message[&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;FileName&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;].ToString();
            Process.Start(content);
            Console.WriteLine(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Will exit after received.&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;Environment.Exit(0);&lt;/span&gt;
        }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æœ¬ç¯‡ç®€å•ä»‹ç»äº†â€œç­‰å¾…requestï¼Œå¤„ç†å®Œåé€€å‡ºâ€ï¼Œè¿™ä¸€UWPå’ŒDesktop Extensionæ•°æ®äº¤äº’çš„åœºæ™¯ã€‚æ„Ÿè°¢çœ‹åˆ°è¿™é‡Œçš„åŒå­¦ï¼Œå•çº¯çš„æ–‡å­—å…¶å®å¾ˆéš¾è®²æ¸…æ¥šAppServiceçš„ä½¿ç”¨ï¼Œè¿˜è¯·å‚è€ƒGithubä¸Šçš„å®ä¾‹ä»£ç ï¼Œæ¬¢è¿è¯„è®ºåŠæé—®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/manupstairs/UWPSamples/tree/master/UWPSamples/DataExchangeUWP/ExitAfterHandleRequest&quot; target=&quot;_blank&quot;&gt;UWPSamples/UWPSamples/DataExchangeUWP/ExitAfterHandleRequest at master Â· manupstairs/UWPSamples (github.com)&lt;/a&gt;&lt;/p&gt;

</description>
<pubDate>Mon, 30 Nov 2020 15:42:00 +0000</pubDate>
<dc:creator>æ¥¼ä¸Šé‚£ä¸ªèœ€é»</dc:creator>
<og:description>ä¸Šä¸€ç¯‡æˆ‘ä»¬è®¨è®ºäº†UWPå’ŒDesktop Extensionäº¤äº’ä¸­ï¼ŒDesktop Extensionæ‰§è¡Œåç«‹å³é€€å‡ºçš„åœºæ™¯ã€‚ä¸‹å›¾æ˜¯æåˆ°çš„å››ç§åœºæ™¯åˆ†ç±»ï¼š æ‰§è¡Œåç«‹å³é€€å‡º ç­‰å¾…requestï¼Œå¤„ç†å®Œåé€€å‡º</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/manupstairs/p/14065673.html</dc:identifier>
</item>
<item>
<title>æ•°æ®å…±äº«-spring batch(9)ä¸Šä¸‹æ–‡å¤„ç† - MasonæŠ€æœ¯è®°å½•</title>
<link>http://www.cnblogs.com/masonlee/p/14065614.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/masonlee/p/14065614.html</guid>
<description>&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;åœ¨ Spring Batch ä¸­è¿›è¡Œæ•°æ®åŠå‚æ•°ä¼ é€’çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;1-å¼•è¨€&quot;&gt;1 å¼•è¨€&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡æ˜¯ Spring Batch ç³»åˆ—æ–‡ç« çš„ç¬¬9ç¯‡ï¼Œæœ‰å…´è¶£çš„å¯è§æ–‡ç« ï¼š&lt;/p&gt;
&lt;p&gt;å‰é¢æ–‡ç« ä»¥å®ä¾‹çš„æ–¹å¼å¯¹ Spring Batch è¿›è¡Œæ‰¹å¤„ç†è¿›è¡Œè¯¦ç»†è¯´æ˜ï¼Œç›¸ä¿¡å¤§å®¶å¯¹å­—ç¬¦ä¸²ã€æ–‡ä»¶ï¼Œå…³ç³»å‹æ•°æ®åº“åŠ NoSQL æ•°æ®åº“çš„è¯»å–ï¼Œå¤„ç†ï¼Œå†™å…¥æµç¨‹å·²æ¯”è¾ƒç†Ÿæ‚‰ã€‚æœ‰å°ä¼™ä¼´å°±é—®ï¼Œé’ˆå¯¹è¿™ä¸ªä»»åŠ¡æµç¨‹ï¼ŒæœŸé—´æœ‰å¤šä¸ªæ­¥éª¤ï¼Œä»ä»»åŠ¡ï¼ˆ Job ï¼‰å¯åŠ¨ï¼Œåˆ°ä½œä¸šæ­¥ï¼ˆ Step ï¼‰çš„æ‰§è¡Œï¼Œå…¶ä¸­åˆåŒ…å«è¯»ç»„ä»¶ã€å¤„ç†ç»„ä»¶ã€å†™ç»„ä»¶ï¼Œé‚£ä¹ˆï¼Œé’ˆå¯¹è¿™ä¸ªæµç¨‹ï¼Œè‹¥ä¸­é—´éœ€è¦ä¼ é€’è‡ªå®šä¹‰çš„æ•°æ®ï¼Œè¯¥å¦‚ä½•å¤„ç†ï¼Ÿæœ¬æ–‡å°†å¯¹ Spring Batch è¿›è¡Œæ•°æ®ä¼ é€’çš„æ–¹æ³•è¿›è¡Œæè¿°ï¼Œä¾ç„¶ä¼šä½¿ç”¨ä»£ç å®ä¾‹çš„æ–¹å¼è¿›è¡Œè®²è§£ã€‚åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªå†…å®¹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;åŸºäº Mybatis-plus é›†æˆå¤šæ•°æ®æºçš„æ•°æ®åº“è®¿é—®&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ ExecutionContext å…±äº«æ•°æ®&lt;/li&gt;
&lt;li&gt;StepScope åŠ¨æ€ç»‘å®šå‚æ•°ä¼ é€’&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;2-å¼€å‘ç¯å¢ƒ&quot;&gt;2 å¼€å‘ç¯å¢ƒ&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;JDKç¯å¢ƒ: jdk1.8&lt;/li&gt;
&lt;li&gt;Spring Boot: 2.1.4.RELEASE&lt;/li&gt;
&lt;li&gt;Spring Batch:4.1.2.RELEASE&lt;/li&gt;
&lt;li&gt;å¼€å‘IDE: IDEA&lt;/li&gt;
&lt;li&gt;æ„å»ºå·¥å…·Maven: 3.3.9&lt;/li&gt;
&lt;li&gt;æ—¥å¿—ç»„ä»¶logback:1.2.3&lt;/li&gt;
&lt;li&gt;lombok:1.18.6&lt;/li&gt;
&lt;li&gt;MySQL: 5.6.26&lt;/li&gt;
&lt;li&gt;Mybatis-plus: 3.4.0&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æœ¬ç¤ºä¾‹æºç å·²æ”¾è‡³&lt;a href=&quot;https://github.com/mianshenglee/spring-batch-example/tree/master/spring-batch-param&quot;&gt;github&lt;/a&gt;ï¼š&lt;code&gt;https://github.com/mianshenglee/spring-batch-example/tree/master/spring-batch-param&lt;/code&gt;ï¼Œè¯·ç»“åˆç¤ºä¾‹ä»£ç è¿›è¡Œé˜…è¯»ã€‚&lt;/p&gt;
&lt;h2 id=&quot;3-åŸºäº-mybatis-plus-é›†æˆå¤šæ•°æ®æºçš„æ•°æ®åº“è®¿é—®&quot;&gt;3 åŸºäº Mybatis-plus é›†æˆå¤šæ•°æ®æºçš„æ•°æ®åº“è®¿é—®&lt;/h2&gt;
&lt;p&gt;æœ¬ç¤ºä¾‹è¿˜æ˜¯ä½¿ç”¨åŸæ¥ç¤ºä¾‹åŠŸèƒ½ï¼Œä»æºæ•°æ®åº“è¯»å–ç”¨æˆ·æ•°æ®ï¼Œå¤„ç†æ•°æ®ï¼Œç„¶åå†™å…¥åˆ°ç›®æ ‡æ•°æ®åº“ã€‚å…¶ä¸­ä¼šåœ¨ä»»åŠ¡å¯åŠ¨æ—¶ä¼ é€’å‚æ•°ï¼Œå¹¶åœ¨ä½œä¸šæ­¥ä¸­ä¼ é€’å‚æ•°ã€‚ä¹‹å‰å·²ç»ä»‹ç»è¿‡å¦‚ä½•ä½¿ç”¨ beetlsql è¿›è¡Œå¤šæ•°æ®æºé…ç½®ï¼ˆ[ä¾¿æ·çš„æ•°æ®è¯»å†™-spring batch(5)ç»“åˆbeetlSqlè¿›è¡Œæ•°æ®è¯»å†™][5]ï¼‰ï¼Œå®ç°æ•°æ®æ‰¹å¤„ç†ã€‚è¿˜æœ‰å¾ˆå¤šæœ‹å‹ä½¿ç”¨ Mybatis æˆ– Mybatis-plus è¿›è¡Œæ•°æ®åº“è¯»å†™ï¼Œå› æ­¤ï¼Œæœ‰å¿…è¦æä¸€ä¸‹ Spring Batch å¦‚ä½•ç»“åˆ Mybatis æˆ– Mybatis-plus é…ç½®å¤šæ•°æ®æºæ“ä½œã€‚æœ¬ç¤ºä¾‹ä»¥ Mybatis-plus ä¸ºä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;ç¤ºä¾‹å·¥ç¨‹ä¸­çš„&lt;code&gt;sql&lt;/code&gt;ç›®å½•æœ‰ç›¸åº”çš„æ•°æ®åº“è„šæœ¬ï¼Œå…¶ä¸­æºæ•°æ®åº“&lt;code&gt;mytest.sql&lt;/code&gt;è„šæœ¬åˆ›å»ºä¸€ä¸ª&lt;code&gt;test_user&lt;/code&gt;è¡¨ï¼Œå¹¶æœ‰ç›¸åº”çš„æµ‹è¯•æ•°æ®ã€‚ç›®æ ‡æ•°æ®åº“ &lt;code&gt;my_test1.sql&lt;/code&gt; ä¸ &lt;code&gt;mytest.sql&lt;/code&gt;è¡¨ç»“æ„ä¸€è‡´ï¼Œ&lt;code&gt;spring-batch-mysql.sql&lt;/code&gt;æ˜¯ Spring Batch æœ¬èº«æä¾›çš„æ•°æ®åº“è„šæœ¬ã€‚&lt;/p&gt;
&lt;h3 id=&quot;31-pom-æ–‡ä»¶ä¸­å¼•å…¥-mybatis-plus&quot;&gt;3.1 pom æ–‡ä»¶ä¸­å¼•å…¥ Mybatis-plus&lt;/h3&gt;
&lt;pre&gt;
&lt;code class=&quot;language-xml&quot;&gt;&amp;lt;!--mybatis-plus--&amp;gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;com.baomidou&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;mybatis-plus-boot-starter&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;3.4.0&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;

&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;32-é…ç½®åŠä½¿ç”¨å¤šæ•°æ®æº&quot;&gt;3.2 é…ç½®åŠä½¿ç”¨å¤šæ•°æ®æº&lt;/h3&gt;
&lt;p&gt;æœ¬ç¤ºä¾‹ä¼šæ¶‰åŠä¸‰ä¸ªæ•°æ®åº“ï¼Œåˆ†åˆ«æ˜¯ Spring Batch æœ¬èº«æ•°æ®åº“ï¼Œéœ€è¦æ‰¹å¤„ç†çš„æºæ•°æ®åº“ï¼Œæ‰¹å¤„ç†çš„ç›®æ ‡æ•°æ®åº“ã€‚å› æ­¤éœ€è¦å¤„ç†å¤šä¸ªæ•°æ®åº“ï¼Œåˆ©ç”¨å¤šå¥—æºç­–ç•¥ï¼Œå¯ä»¥å¾ˆç®€å•å°±å®Œæˆå¤šå¥—æ•°æ®æºçš„å¤„ç†ã€‚ç®€å•æ¥è¯´ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;é…ç½®å¤šæ•°æ®æºè¿æ¥ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;æ ¹æ®ä¸åŒæ•°æ®æºåˆ’åˆ†&lt;code&gt;mapper&lt;/code&gt; åŒ…ï¼Œ&lt;code&gt;entity&lt;/code&gt;åŒ…ï¼Œ&lt;code&gt;mapper.xml&lt;/code&gt;æ–‡ä»¶åŒ…&lt;/li&gt;
&lt;li&gt;æ ¹æ®ä¸åŒæ•°æ®æºé…ç½®ç‹¬ç«‹çš„&lt;code&gt;SqlSessionFactory&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;æ ¹æ®ä¸åŒçš„åº”ç”¨åœºæ™¯ï¼Œä½¿ç”¨ä¸åŒçš„ &lt;code&gt;mapper&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å…³äºå¤šæ•°æ®æºå¤šå¥—æºç­–ç•¥çš„è¯¦ç»†é…ç½®è¿‡ç¨‹ï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ã€Š&lt;a href=&quot;https://mp.weixin.qq.com/s/0J-FLYScYtEMnj0vZToX7g&quot;&gt;æå®šSpringBootå¤šæ•°æ®æº(1)ï¼šå¤šå¥—æºç­–ç•¥&lt;/a&gt;ã€‹&lt;/p&gt;
&lt;h2 id=&quot;4-executioncontext-ä¼ é€’å‚æ•°&quot;&gt;4 ExecutionContext ä¼ é€’å‚æ•°&lt;/h2&gt;
&lt;p&gt;å…³äº Spring Batch çš„è¯»æ•°æ®ï¼ˆ ItemReader ï¼‰ã€å¤„ç†æ•°æ®ï¼ˆ ItemProcessor ï¼‰ã€å†™æ•°æ®ï¼ˆ ItemWriter ï¼‰çš„é…ç½®æµç¨‹ï¼Œå¯ä»¥å‚è€ƒå‰é¢ç³»åˆ—æ–‡ç« ï¼Œæœ¬æ–‡ä¸å†è¯¦ç»†æè¿°ã€‚æˆ‘ä»¬éœ€è¦è®°ä½çš„æ˜¯ï¼Œå½“ä¸€ä¸ªä½œä¸šï¼ˆ Job ï¼‰å¯åŠ¨ï¼ŒSpring Batch æ˜¯é€šè¿‡ä½œä¸šåç§°ï¼ˆ Job nameï¼‰åŠ ä½œä¸šå‚æ•°ï¼ˆ JobParameters ï¼‰ä½œä¸ºå”¯ä¸€æ ‡è¯†æ¥åŒºåˆ†ä¸åŒçš„ä½œä¸šã€‚ä¸€ä¸ª Job ä¸‹å¯ä»¥æœ‰å¤šä¸ªä½œä¸šæ­¥ï¼ˆ Step ï¼‰ï¼Œæ¯ä¸ª Step ä¸­å°±æ˜¯æœ‰å…·ä½“çš„æ“ä½œé€»è¾‘ï¼ˆè¯»ã€å¤„ç†ã€å†™ï¼‰ã€‚åœ¨ Job å’Œ Step ä¸‹çš„å„ä¸ªæ“ä½œæ­¥éª¤é—´ï¼Œå¦‚ä½•ä¼ é€’ï¼Œï¼Œè¿™é‡Œå°±éœ€è¦ç†è§£ ExecutionContext çš„æ¦‚å¿µã€‚&lt;/p&gt;
&lt;h3 id=&quot;41-executioncontext-æ¦‚å¿µ&quot;&gt;4.1 ExecutionContext æ¦‚å¿µ&lt;/h3&gt;
&lt;p&gt;åœ¨ Job çš„è¿è¡ŒåŠ Step çš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼ŒSpring Batch æä¾› ExecutionContext è¿›è¡Œè¿è¡Œæ•°æ®æŒä¹…åŒ–ï¼Œåˆ©ç”¨å®ƒï¼Œå¯ä»¥æ ¹æ®ä¸šåŠ¡è¿›è¡Œæ•°æ®å…±äº«ï¼Œå¦‚ç”¨æ¥é‡å¯çš„é™æ€æ•°æ®ä¸çŠ¶æ€æ•°æ®ã€‚å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/mianshenglee/datastorage/raw/master/md-photo/springbatch/springbatch-9/spring%20batch-%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92.png&quot; alt=&quot;Spring Batch å‚æ•°ä¼ é€’&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Execution Context æœ¬è´¨ä¸Šæ¥è®²å°±æ˜¯ä¸€ä¸ª &lt;code&gt;Map&amp;lt;String,Object&amp;gt;&lt;/code&gt; ï¼Œå®ƒæ˜¯Spring Batch æ¡†æ¶æä¾›çš„æŒä¹…åŒ–ä¸æ§åˆ¶çš„ key/value å¯¹ï¼Œå¯ä»¥è®©å¼€å‘è€…åœ¨ Step è¿è¡Œæˆ–Job è¿è¡Œè¿‡ç¨‹ä¸­ä¿å­˜éœ€è¦è¿›è¡ŒæŒä¹…åŒ–çš„çŠ¶æ€ï¼Œå®ƒå¯ä»¥ã€‚åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯Job è¿è¡Œçš„ä¸Šä¸‹æ–‡ï¼ˆå¯¹åº”æ•°æ®è¡¨ï¼šBATCH_JOB_EXECUTION_CONTEXTï¼‰ï¼Œå¦ä¸€ç±»æ˜¯Step Executionçš„ä¸Šä¸‹æ–‡ï¼ˆå¯¹åº”æ•°æ®è¡¨BATCH_STEP_EXECUTION_CONTEXTï¼‰ã€‚ä¸¤ç±»ä¸Šä¸‹æ–‡å…³ç³»ï¼šä¸€ä¸ª Job è¿è¡Œå¯¹åº”ä¸€ä¸ª Job Execution çš„ä¸Šä¸‹æ–‡ï¼ˆå¦‚ä¸Šå›¾ä¸­è“è‰²éƒ¨åˆ†çš„ ExecutionContext ï¼‰ï¼Œæ¯ä¸ª Step è¿è¡Œå¯¹åº”ä¸€ä¸ª Step Execution ä¸Šä¸‹æ–‡ï¼ˆå¦‚ä¸Šå›¾ä¸­ç²‰è‰²éƒ¨åˆ†çš„ ExecutionContext ï¼‰ï¼›åŒä¸€ä¸ª Job ä¸­çš„ Step Execution å…±ç”¨ Job Execution çš„ä¸Šä¸‹æ–‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬çš„ä½œç”¨èŒƒå›´æœ‰åŒºåˆ«ã€‚å› æ­¤ï¼Œå¦‚æœåŒä¸€ä¸ª Job çš„ä¸åŒ Step é—´éœ€è¦å…±äº«æ•°æ®æ—¶ï¼Œå¯ä»¥é€šè¿‡ Job Execution çš„ä¸Šä¸‹æ–‡å…±äº«æ•°æ®ã€‚æ ¹æ® ExecutionContext çš„å…±äº«æ•°æ®ç‰¹æ€§ï¼Œåˆ™å¯ä»¥å®ç°åœ¨ä¸åŒæ­¥éª¤é—´ä¼ é€’æ•°æ®ã€‚&lt;/p&gt;
&lt;h3 id=&quot;42-executioncontext-ä¼ é€’æ•°æ®&quot;&gt;4.2 ExecutionContext ä¼ é€’æ•°æ®&lt;/h3&gt;
&lt;p&gt;ä¸€ä¸ª Job å¯åŠ¨åï¼Œä¼šç”Ÿæˆä¸€ä¸ª JobExecution ï¼Œç”¨äºå­˜æ”¾å’Œè®°å½• Job è¿è¡Œçš„ä¿¡æ¯ï¼ŒåŒæ ·ï¼Œåœ¨ Step å¯åŠ¨åï¼Œä¹Ÿä¼šæœ‰å¯¹åº”çš„ StepExecution ã€‚å¦‚å‰é¢æ‰€è¯´ï¼Œåœ¨ JobExecution å’Œ StepExecution ä¸­éƒ½ä¼šæœ‰ä¸€ä¸ª ExecutionContext ï¼Œç”¨äºå­˜å‚¨ä¸Šä¸‹æ–‡ã€‚å› æ­¤ï¼Œæ•°æ®ä¼ é€’çš„æ€è·¯å°±æ˜¯ç¡®å®šæ•°æ®ä½¿ç”¨èŒƒå›´ï¼Œç„¶åé€šè¿‡ ExecutionContext ä¼ å…¥æ•°æ®ï¼Œç„¶åå°±å¯ä»¥åœ¨å¯¹åº”çš„èŒƒå›´å†…å…±äº«æ•°æ®ã€‚å¦‚å½“å‰ç¤ºä¾‹ï¼Œéœ€è¦ Job èŒƒå›´å†…å…±äº«æ•°æ®ï¼Œåœ¨è¯»ç»„ä»¶ï¼ˆ ItemReader ï¼‰å’Œå†™ç»„ä»¶ï¼ˆ ItemWriter ï¼‰ä¸­ä¼ é€’è¯»ä¸å†™æ•°æ®çš„æ•°é‡ï¼ˆ size ï¼‰ï¼Œåœ¨ Job ç»“æŸæ—¶ï¼Œè¾“å‡ºè¯»åŠå†™çš„æ•°æ®é‡ã€‚å®é™…ä¸Š Spring Batch ä¼šè‡ªåŠ¨è®¡ç®—è¯»å†™æ•°é‡ï¼Œæœ¬ç¤ºä¾‹ä»…ä¸ºäº†æ˜¾ç¤ºæ•°æ®å…±äº«åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/mianshenglee/datastorage/raw/master/md-photo/springbatch/springbatch-9/spring%20batch-%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92-2.png&quot; alt=&quot;å…±äº«æ•°æ®&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆï¼Œå¦‚ä½•è·å–å¯¹åº”çš„ Execution ï¼Ÿï¼ŒSpring Batch æä¾›äº† JobExecutionListener å’Œ StepExecutionListener ç›‘å¬å™¨æ¥å£ï¼Œé€šè¿‡å®ç°ç›‘å¬å™¨æ¥å£ï¼Œåˆ†åˆ«å¯ä»¥åœ¨å¼€å¯ä½œä¸šå‰ï¼ˆ beforeJob ï¼‰å’Œ å®Œæˆä½œä¸šåï¼ˆ afterJob ï¼‰afterJob ï¼‰ï¼Œå¼€å¯ä½œä¸šæ­¥å‰ï¼ˆ beforeStepï¼‰åŠ å®Œæˆä½œä¸šæ­¥åï¼ˆ afterStep ï¼‰è·å–å¯¹åº”çš„ Execution ï¼Œç„¶åè¿›è¡Œæ“ä½œã€‚&lt;/p&gt;
&lt;h4 id=&quot;421-å®ç°ç›‘å¬å™¨æ¥å£&quot;&gt;4.2.1 å®ç°ç›‘å¬å™¨æ¥å£&lt;/h4&gt;
&lt;p&gt;åœ¨è‡ªå®šä¹‰çš„ UserItemReader å’Œ UserItemWriter ä¸­ï¼Œå®ç° StepExecutionListener æ¥å£ï¼Œå…¶ä¸­ä½¿ç”¨ StepExecution ä½œä¸ºæˆå‘˜ï¼Œä» beforeStep ä¸­è·å–ã€‚å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class UserItemWriter implements ItemWriter&amp;lt;TargetUser&amp;gt;, StepExecutionListener {
    private StepExecution stepExecution;
    //...ç•¥
    @Override
    public void beforeStep(StepExecution stepExecution) {
        this.stepExecution = stepExecution;
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¯»ç»„ä»¶ï¼ˆ UserItemReader ï¼‰ä¹Ÿä½¿ç”¨åŒæ ·çš„æ–¹å¼ã€‚è€Œåœ¨ä½œä¸šç»“æŸåï¼Œè·å–å‚æ•°ï¼Œåˆ™å¯ä»¥ç»§æ‰¿ JobExecutionListenerSupport ï¼Œå®ç°è‡ªå·±æ„Ÿå…´è¶£çš„æ–¹æ³•ï¼Œä¹Ÿä»å‚æ•°ä¸­è·å– JobExecutionï¼Œç„¶åè·å–å‚æ•°è¿›è¡Œå¤„ç†ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class ParamJobEndListener extends JobExecutionListenerSupport {
    @Override
    public void afterJob(JobExecution jobExecution) {}
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;422-è®¾ç½®ç”¨äºä¼ é€’çš„æ•°æ®&quot;&gt;4.2.2 è®¾ç½®ç”¨äºä¼ é€’çš„æ•°æ®&lt;/h4&gt;
&lt;p&gt;ç”±äºæˆ‘ä»¬éœ€è¦åœ¨ Job èŒƒå›´å†…ä¼ é€’å‚æ•°ï¼Œè·å–åˆ° StepExecution åï¼Œå¯ä»¥è·å¾—ç›¸åº”çš„ JobExecution ï¼Œè¿›è€Œè·å– Job å¯¹åº”çš„ executionContextï¼Œè¿™æ ·ï¼Œå°±å¯ä»¥åœ¨ Job èŒƒå›´å†…å…±äº«å‚æ•°æ•°æ®äº†ã€‚å¦‚ä¸‹æ˜¯åœ¨è¯»ç»„ä»¶ä¸­è¿›è¡Œé…ç½®&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;ExecutionContext executionContext = stepExecution.getJobExecution().getExecutionContext();
            executionContext.put(SyncConstants.PASS_PARAM_READ_NUM, items.size());
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åŒæ ·åœ¨å†™ç»„ä»¶ä¸­ï¼Œè·å–åˆ° ExecutionContext åï¼Œå¯ä»¥å¯¹å‚æ•°è¿›è¡Œå¤„ç†ã€‚æœ¬ç¤ºä¾‹ä¸­ï¼Œæ˜¯é€šè¿‡å¯¹ ItemReader ä¼ é€’çš„å¤„ç†æ•°ç›®å‚æ•°è¿›è¡Œç´¯åŠ å¤„ç†ï¼Œå¾—åˆ°ç»“æœã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Override
public void write(List&amp;lt;? extends TargetUser&amp;gt; items) {
    ExecutionContext executionContext = stepExecution.getJobExecution().getExecutionContext();
    Object currentWriteNum = executionContext.get(SyncConstants.PASS_PARAM_WRITE_NUM);
    if (Objects.nonNull(currentWriteNum)) {
        log.info(&quot;currentWriteNum:{}&quot;, currentWriteNum);
        executionContext.put(SyncConstants.PASS_PARAM_WRITE_NUM, items.size()+(Integer)currentWriteNum);
    } else {
        executionContext.put(SyncConstants.PASS_PARAM_WRITE_NUM, items.size());
    }
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æœ€ååœ¨ä½œä¸šç»“æŸåï¼Œåœ¨å®ç° JobExecutionListenerSupport çš„æ¥å£ä¸­ï¼ŒafterJob å‡½æ•°ä¸­ï¼Œå¯¹å‚æ•°è¿›è¡Œè¾“å‡ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class ParamJobEndListener extends JobExecutionListenerSupport {
    @Override
    public void afterJob(JobExecution jobExecution) {
        ExecutionContext executionContext = jobExecution.getExecutionContext();
        Integer writeNum = (Integer)executionContext.get(SyncConstants.PASS_PARAM_WRITE_NUM);
        log.info(LogConstants.LOG_TAG + &quot;writeNum:{}&quot;,writeNum);
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;5-stepscope-åŠ¨æ€ç»‘å®šå‚æ•°ä¼ é€’&quot;&gt;5 StepScope åŠ¨æ€ç»‘å®šå‚æ•°ä¼ é€’&lt;/h2&gt;
&lt;h3 id=&quot;51-stepscopeåŠåæœŸç»‘å®š&quot;&gt;5.1 StepScopeåŠåæœŸç»‘å®š&lt;/h3&gt;
&lt;p&gt;å‰é¢è¯´åˆ°åœ¨ Job åŠ Step èŒƒå›´å†…ï¼Œä½¿ç”¨ ExecutionContext è¿›è¡Œæ•°æ®å…±äº«ï¼Œä½†ï¼Œå¦‚æœéœ€è¦åœ¨ Job å¯åŠ¨å‰è®¾ç½®å‚æ•°ï¼Œå¹¶ä¸”æ¯æ¬¡å¯åŠ¨è¾“å…¥çš„å‚æ•°æ˜¯åŠ¨æ€å˜åŒ–çš„ï¼ˆæ¯”å¦‚å¢é‡åŒæ­¥æ—¶ï¼Œæ—¥æœŸæ˜¯åŸºäºä¸Šä¸€æ¬¡åŒæ­¥çš„æ—¶é—´æˆ–è€…IDï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡è¿è¡Œï¼Œéœ€è¦æ ¹æ®å‚æ•°æ–°å»ºä¸€ä¸ªæ“ä½œæ­¥éª¤ï¼ˆå¦‚ ItemReaderã€ItemWriterç­‰ï¼‰ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œç”±äºåœ¨ Spring IOC ä¸­åŠ è½½çš„Beanï¼Œé»˜è®¤éƒ½æ˜¯å•ä¾‹æ¨¡å¼çš„ï¼Œå› æ­¤ï¼Œéœ€è¦æ¯æ¬¡è¿è¡Œæ–°å»ºï¼Œè¿è¡Œå®Œé”€æ¯ï¼Œæ–°å»ºæ˜¯åœ¨è¿è¡Œæ—¶è¿›è¡Œçš„ã€‚è¿™å°±éœ€è¦ç”¨åˆ°StepScope åŠåæœŸç»‘å®šæŠ€æœ¯ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä¹‹å‰çš„ç¤ºä¾‹ä¸­ï¼Œå·²å‡ºç°è¿‡ StepScopeï¼Œå®ƒçš„ä½œç”¨æ˜¯æä¾›äº†æ“ä½œæ­¥éª¤çš„ä½œç”¨èŒƒå›´ï¼ŒæŸä¸ª Spring Bean ä½¿ç”¨æ³¨è§£StepScopeï¼Œåˆ™è¡¨ç¤ºæ­¤ Bean åœ¨ä½œä¸šæ­¥ï¼ˆ Step ï¼‰å¼€å§‹çš„æ—¶å€™åˆå§‹åŒ–ï¼Œåœ¨ Step ç»“æŸçš„æ—¶å€™é”€æ¯ï¼Œä¹Ÿå°±æ˜¯è¯´ Beançš„ä½œç”¨èŒƒå›´æ˜¯åœ¨ Step è¿™ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ã€‚è€Œ Spring Batch é€šè¿‡å±æ€§åæœŸç»‘å®šæŠ€æœ¯ï¼Œåœ¨è¿è¡ŒæœŸè·å–å±æ€§å€¼ï¼Œå¹¶ä½¿ç”¨ SPEL çš„è¡¨è¾¾å¼è¿›è¡Œå±æ€§ç»‘å®šã€‚è€Œåœ¨ StepScope ä¸­ï¼ŒSpring Batch æ¡†æ¶æä¾› JobParametersï¼ŒJobExecutionContextï¼ŒStepExecutionContextï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ Spring å®¹å™¨ä¸­çš„ Bean ï¼Œå¦‚ JobExecution ï¼ŒStepExecutionã€‚&lt;/p&gt;
&lt;h3 id=&quot;52-ä½œä¸šå‚æ•°ä¼ é€’åŠåŠ¨æ€è·å–-stepexecution&quot;&gt;5.2 ä½œä¸šå‚æ•°ä¼ é€’åŠåŠ¨æ€è·å– StepExecution&lt;/h3&gt;
&lt;p&gt;ä¸€ä¸ª Job æ˜¯ç”± Job name åŠ JobParameters ä½œä¸ºå”¯ä¸€æ ‡è¯†çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰ job name å’Œ JobParameters ä¸ä¸€è‡´æ—¶ï¼ŒSpring Batch æ‰ä¼šå¯åŠ¨ä¸€ä¸ªæ–°çš„ Jobï¼Œä¸€è‡´çš„è¯å°±å½“ä½œæ˜¯åŒä¸€ä¸ª Job ï¼Œè‹¥ æ­¤ Job æœªæ‰§è¡Œè¿‡ï¼Œåˆ™æ‰§è¡Œï¼›è‹¥å·²æ‰§è¡Œè¿‡ä¸”æ˜¯ FAILED çŠ¶æ€ï¼Œåˆ™å°è¯•é‡æ–°è¿è¡Œæ­¤ Job ï¼Œè‹¥å·²æ‰§è¡Œè¿‡ä¸”æ˜¯ COMPLETED çŠ¶æ€ï¼Œåˆ™ä¼šæŠ¥é”™ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬ç¤ºä¾‹ä¸­ï¼ŒJob å¯åŠ¨æ—¶è¾“å…¥æ—¶é—´å‚æ•°ï¼Œåœ¨ ItemReader ä¸­ä½¿ç”¨ StepScope æ³¨è§£ï¼Œç„¶åæŠŠæ—¶é—´å‚æ•°ç»‘å®šåˆ° ItemReader ä¸­ï¼ŒåŒæ—¶ç»‘å®š StepExecution ï¼Œä»¥ä¾¿äºåœ¨ ItemReader å¯¹æ—¶é—´å‚æ•°åŠ StepExecution è¿›è¡Œæ“ä½œã€‚&lt;/p&gt;
&lt;h4 id=&quot;521-è®¾ç½®æ—¶é—´å‚æ•°&quot;&gt;5.2.1 è®¾ç½®æ—¶é—´å‚æ•°&lt;/h4&gt;
&lt;p&gt;åœ¨ä½¿ç”¨ JobLauncher å¯åŠ¨ Job æ—¶ï¼Œæ˜¯éœ€è¦è¾“å…¥ jobParameters ä½œä¸ºå‚æ•°çš„ã€‚å› æ­¤å¯ä»¥åˆ›å»ºæ­¤å¯¹è±¡ï¼Œå¹¶è®¾ç½®å‚æ•°ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;JobParameters jobParameters = new JobParametersBuilder()
                .addLong(&quot;time&quot;,timMillis)
                .toJobParameters();
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;522-åŠ¨æ€ç»‘å®šå‚æ•°&quot;&gt;5.2.2 åŠ¨æ€ç»‘å®šå‚æ•°&lt;/h4&gt;
&lt;p&gt;åœ¨é…ç½® Step æ—¶ï¼Œéœ€è¦åˆ›å»ºItemReader çš„ Beanï¼Œä¸ºäº†ä½¿ç”¨åŠ¨æ€å‚æ•°ï¼Œåœ¨ ItemReader ä¸­è®¾ç½® Map å­˜æ”¾å‚æ•°ï¼Œå¹¶è®¾ç½® StepExecution ä¸ºæˆå‘˜ï¼Œä»¥ä¾¿äºåé¢ä½¿ç”¨ ExecutionContextã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class UserItemReader implements ItemReader&amp;lt;User&amp;gt; {
    protected Map&amp;lt;String, Object&amp;gt; params;
    private StepExecution stepExecution;

    public void setStepExecution(StepExecution stepExecution) {
        this.stepExecution = stepExecution;
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½¿ç”¨ StepScope è¿›è¡Œé…ç½®ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Bean
@StepScope
public ItemReader paramItemReader(@Value(&quot;#{stepExecution}&quot;) StepExecution stepExecution,
                                  @Value(&quot;#{jobParameters['time']}&quot;) Long timeParam) {
    UserItemReader userItemReader = new UserItemReader();
    //è®¾ç½®å‚æ•°
    Map&amp;lt;String, Object&amp;gt; params = CollUtil.newHashMap();
    Date datetime = new Date(timeParam);
    params.put(SyncConstants.PASS_PARAM_DATETIME, datetime);
    userItemReader.setParams(params);
    userItemReader.setStepExecution(stepExecution);

    return userItemReader;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ³¨æ„ï¼š&lt;strong&gt;æ­¤æ—¶ ItemReader ä¸å¯å†ä½¿ç”¨å®ç° StepExecutionListener çš„æ–¹å¼æ¥å¯¹ stepExecution èµ‹å€¼&lt;/strong&gt;ï¼Œç”±äº ItemReader æ˜¯åŠ¨æ€ç»‘å®šçš„ï¼ŒStepExecutionListener å°†ä¸å†èµ·ä½œç”¨ï¼Œå› æ­¤éœ€è¦åœ¨åæœŸç»‘å®šä¸­æ¥ç»‘å®š stepExecution Bean çš„æ–¹å¼æ¥èµ‹å€¼ã€‚&lt;/p&gt;
&lt;h4 id=&quot;523-è®¾ç½®åŠä¼ é€’å‚æ•°&quot;&gt;5.2.3 è®¾ç½®åŠä¼ é€’å‚æ•°&lt;/h4&gt;
&lt;p&gt;ItemReader è·å–åˆ° StepExecution åå³å¯è·å– ExecutionContextï¼Œç„¶åå¯ä»¥åƒå‰é¢è¯´çš„ä½¿ç”¨ ExecutionContext æ–¹å¼è¿›è¡Œæ•°æ®ä¼ é€’ã€‚å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;ExecutionContext executionContext = stepExecution.getJobExecution().getExecutionContext();
//readNumå‚æ•°
executionContext.put(SyncConstants.PASS_PARAM_READ_NUM, items.size());
//datetimeå‚æ•°
executionContext.put(SyncConstants.PASS_PARAM_DATETIME,params.get(SyncConstants.PASS_PARAM_DATETIME));
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;6æ€»ç»“&quot;&gt;6.æ€»ç»“&lt;/h2&gt;
&lt;p&gt;åœ¨ Job å’Œ Step ä¸åŒçš„æ•°æ®èŒƒå›´ä¸­ï¼Œå¯ä½¿ç”¨ ExecutionContext å…±äº«æ•°æ®ã€‚æœ¬æ–‡ä»¥ä¼ é€’å¤„ç†æ•°é‡ä¸ºä¾‹ï¼Œä½¿ç”¨ Mybatis-plusï¼ŒåŸºäº ExecutionContext ï¼Œç»“åˆ StepScopeåŠåæœŸç»‘å®šæŠ€æœ¯ï¼Œå®ç°åœ¨ Job å¯åŠ¨ä¼ å…¥å‚æ•°ï¼Œç„¶ååœ¨ ItemReaderã€ItemProcessorã€ItemWriter åŠ Job å®Œæˆåçš„æ•°æ®å…±äº«åŠä¼ é€’ã€‚å¦‚æœä½ åœ¨ä½¿ç”¨ Spring Batch è¿‡ç¨‹ä¸­éœ€è¦è¿›è¡Œæ•°æ®å…±äº«ä¸ä¼ é€’ï¼Œè¯·è¯•è¯•è¿™ç§æ–¹å¼å§ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å¾€æœŸæ–‡ç« &quot;&gt;å¾€æœŸæ–‡ç« &lt;/h2&gt;
&lt;p&gt;å¦‚æœæ–‡ç« å†…å®¹å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿è½¬å‘åˆ†äº«~&lt;/p&gt;
&lt;p&gt;æˆ‘çš„å…¬ä¼—å·ï¼ˆæœç´¢&lt;code&gt;MasonæŠ€æœ¯è®°å½•&lt;/code&gt;ï¼‰ï¼Œè·å–æ›´å¤šæŠ€æœ¯è®°å½•ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/mianshenglee/datastorage/raw/master/md-photo/myphoto/wx/wx-public.jpg&quot; alt=&quot;MasonæŠ€æœ¯è®°å½•&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Mon, 30 Nov 2020 15:28:00 +0000</pubDate>
<dc:creator>MasonæŠ€æœ¯è®°å½•</dc:creator>
<og:description>åœ¨ Spring Batch ä¸­è¿›è¡Œæ•°æ®åŠå‚æ•°ä¼ é€’çš„æ–¹æ³•ã€‚</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/masonlee/p/14065614.html</dc:identifier>
</item>
<item>
<title>c++11-17 æ¨¡æ¿æ ¸å¿ƒçŸ¥è¯†ï¼ˆåï¼‰â€”â€” åŒºåˆ†ä¸‡èƒ½å¼•ç”¨(universal references)å’Œå³å€¼å¼•ç”¨ - å¼ é›…å®¸</title>
<link>http://www.cnblogs.com/zhangyachen/p/14065583.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/zhangyachen/p/14065583.html</guid>
<description>&lt;h2 id=&quot;å¼•å­&quot;&gt;å¼•å­&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;T&amp;amp;&amp;amp;&lt;/code&gt;åœ¨ä»£ç é‡Œå¹¶ä¸æ€»æ˜¯å³å€¼å¼•ç”¨ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c++&quot;&gt;void f(Widget&amp;amp;&amp;amp; param);      // rvalue reference

Widget&amp;amp;&amp;amp; var1 = Widget();      // rvalue reference

auto&amp;amp;&amp;amp; var2 = var1;        // not rvalue reference


template&amp;lt;typename T&amp;gt;
void f(std::vector&amp;lt;T&amp;gt;&amp;amp;&amp;amp; param);      // rvalue reference


template&amp;lt;typename T&amp;gt;
void f(T&amp;amp;&amp;amp; param);     // not rvalue reference
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;T&amp;amp;&amp;amp;&lt;/code&gt;ä»£è¡¨ä¸¤ç§å«ä¹‰ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å³å€¼å¼•ç”¨&lt;/li&gt;
&lt;li&gt;ä¸‡èƒ½å¼•ç”¨(universal references, or forwarding references)&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;å¦‚ä½•åŒºåˆ†&quot;&gt;å¦‚ä½•åŒºåˆ†&lt;/h2&gt;
&lt;p&gt;ä¸‡èƒ½å¼•ç”¨ä¸€èˆ¬å‡ºç°åœ¨ä¸¤ä¸ªåœºæ™¯ä¸­ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æ¨¡æ¿å‚æ•°&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-c++&quot;&gt;template&amp;lt;typename T&amp;gt;
void f(T&amp;amp;&amp;amp; param); // param is a universal reference
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;autoå£°æ˜&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-c++&quot;&gt;auto&amp;amp;&amp;amp; var2 = var1; // var2 is a universal reference
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬åˆ†åˆ«è®¨è®ºä¸‹è¿™ä¸¤ç§åœºæ™¯ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ¨¡æ¿å‚æ•°&quot;&gt;æ¨¡æ¿å‚æ•°&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œæ¶‰åŠåˆ°ä¸‡èƒ½å¼•ç”¨çš„åœ°æ–¹ï¼Œéƒ½ä¼šæœ‰å‚æ•°æ¨å¯¼çš„è¿‡ç¨‹ï¼Œä¾‹å¦‚ä¸Šé¢çš„Tå’Œvar2. è€Œå³å€¼å¼•ç”¨åˆ™æ²¡æœ‰è¿™ä¸ªè¿‡ç¨‹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c++&quot;&gt;void f(Widget&amp;amp;&amp;amp; param);        // no type deduction; param is an rvalue reference

Widget&amp;amp;&amp;amp; var1 = Widget();     // no type deduction; var1 is an rvalue reference
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½†æ˜¯å³ä½¿è¯­å¥è®¾è®¡åˆ°å‚æ•°æ¨å¯¼ï¼Œä¹Ÿä¸ä¸€å®šå°±æ˜¯ä¸‡èƒ½å¼•ç”¨ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c++&quot;&gt;template&amp;lt;typename T&amp;gt;
void f(std::vector&amp;lt;T&amp;gt;&amp;amp;&amp;amp; param);       // param is an rvalue reference


std::vector&amp;lt;int&amp;gt; v;
f(v); // error! can't bind lvalue to rvalue reference
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™ç‚¹è¿˜æ˜¯æ¯”è¾ƒå¥½ç†è§£çš„ã€‚ä¸‡èƒ½å¼•ç”¨éœ€è¦ä¾é è¡¨è¾¾å¼æ¥åˆå§‹åŒ–è‡ªå·±æ˜¯å³å€¼å¼•ç”¨è¿˜æ˜¯å·¦å€¼å¼•ç”¨ï¼Œä½†æ˜¯ä¸Šé¢è¿™ä¸ªä¾‹å­æ²¡æœ‰è¡¨ç°å‡ºè¿™ä¸€ç‚¹ï¼Œå®ƒä»…ä»…æ˜¯æ¨æ–­äº†Tçš„ç±»å‹ï¼Œä½†æ˜¯paramçš„ç±»å‹ä¸€ç›´éƒ½æ˜¯&lt;code&gt;std::vector&amp;lt;T&amp;gt;&amp;amp;&amp;amp;&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å†ä¸¾ä¸€ä¸ªvectorä¸­çš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c++&quot;&gt;template&amp;lt;class T, class Allocator = allocator&amp;lt;T&amp;gt;&amp;gt; 
class vector { 
public:

void push_back(T&amp;amp;&amp;amp; x);      // rvalue reference


template &amp;lt;class... Args&amp;gt; 
void emplace_back(Args&amp;amp;&amp;amp;... args);      // universal reference
};
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;push_back(T&amp;amp;&amp;amp; x)&lt;/code&gt;ä¸­çš„T&amp;amp;&amp;amp;ä¸ºå³å€¼å¼•ç”¨ï¼Œå› ä¸ºè¿™ä¸ªè™½ç„¶æ˜¯T&amp;amp;&amp;amp;ï¼Œä½†æ˜¯ä¸æ¶‰åŠåˆ°å‚æ•°æ¨å¯¼ã€‚å½“push_backè¢«instantiatedæ—¶ï¼Œå®é™…çš„è°ƒç”¨ç±»ä¼¼äºï¼š&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-c++&quot;&gt;std::vector&amp;lt;Widget&amp;gt; v;

...
class vector&amp;lt;Widget, allocator&amp;lt;Widget&amp;gt;&amp;gt; {
public:
void push_back(Widget&amp;amp;&amp;amp; x);       // rvalue reference
â€¦
};
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯ä»¥å¾ˆæ˜æ˜¾çš„çœ‹å‡ºæ­¤æ—¶æ²¡æœ‰å‚æ•°æ¨å¯¼çš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;template &amp;lt;class... Args&amp;gt; emplace_back(Args&amp;amp;&amp;amp;... args)&lt;/code&gt;ä¸­çš„&lt;code&gt;Args&amp;amp;&amp;amp;&lt;/code&gt;ä¸ºä¸‡èƒ½å¼•ç”¨ã€‚Argsä¸Tæ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œæ‰€ä»¥Argsæœ‰ä¸€ä¸ªç‹¬ç«‹çš„å‚æ•°æ¨æ–­è¿‡ç¨‹ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h4 id=&quot;const-disqualify-universal-reference&quot;&gt;const disqualify universal reference&lt;/h4&gt;
&lt;p&gt;æœ‰æ„æ€çš„æ˜¯ï¼Œå½“å‚æ•°åŠ ä¸Šconståï¼Œå°±ä¸€å®šæ˜¯å³å€¼å¼•ç”¨ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c++&quot;&gt;template &amp;lt;class T&amp;gt; int f(T&amp;amp;&amp;amp; heisenreference);
template &amp;lt;class T&amp;gt; int g(const T&amp;amp;&amp;amp;);

int i;
int n1 = f(i);         // calls f&amp;lt;int&amp;amp;&amp;gt;(int&amp;amp;)
int n2 = f(0);     // calls f&amp;lt;int&amp;gt;(int&amp;amp;&amp;amp;)
int n3 = g(i); // error: would call g&amp;lt;int&amp;gt;(const int&amp;amp;&amp;amp;), which would bind an rvalue reference to an lvalue
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è‡³äºä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¸ªè§„å®šï¼ŒæŒ‰ç…§&lt;a href=&quot;https://stackoverflow.com/questions/38814939/why-adding-const-makes-the-universal-reference-as-rvalue&quot;&gt;Why adding &lt;code&gt;const&lt;/code&gt; makes the universal reference as rvalue&lt;/a&gt;çš„è¯´æ³•ï¼Œå¤§ä½“æœ‰ä¸¤ç‚¹åŸå› ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;const T&amp;amp;&amp;amp;&lt;/code&gt;å…è®¸ä½ é‡è½½ä¸€ä¸ªå‡½æ•°æ¨¡æ¿ï¼Œå®ƒåªæ¥å—å³å€¼å¼•ç”¨ã€‚å¦‚æœ&lt;code&gt;const T&amp;amp;&amp;amp;&lt;/code&gt;ä¹Ÿè¢«å½“åšuniversal referenceï¼Œé‚£ä¹ˆå°†æ²¡æœ‰åŠæ³•è®©å‡½æ•°åªæ¥å—å³å€¼å¼•ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;æ˜¾ç¤ºç¦ç”¨æŸä¸ªå‡½æ•°æ¥å—å³å€¼å¼•ç”¨ï¼š&lt;code&gt;template &amp;lt;typename T&amp;gt; void cref(const T&amp;amp;&amp;amp;) = delete;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;autoå£°æ˜&quot;&gt;autoå£°æ˜&lt;/h3&gt;
&lt;p&gt;å¯¹äºautoçš„åœºæ™¯æ¥è¯´ï¼Œæ‰€æœ‰çš„&lt;code&gt;auto&amp;amp;&amp;amp;&lt;/code&gt;éƒ½æ˜¯ä¸‡èƒ½å¼•ç”¨ï¼Œå› ä¸ºå®ƒæ€»æ˜¯æœ‰å‚æ•°æ¨å¯¼çš„è¿‡ç¨‹ã€‚ä¾‹å¦‚å®šä¹‰ä¸€ä¸ªè®°å½•å‡½æ•°æ‰§è¡Œæ—¶é—´çš„lambdaï¼ˆC++14ä¸­å…è®¸ä½¿ç”¨autoæ¥å£°æ˜lambdaçš„å‡½æ•°ï¼‰ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c++&quot;&gt;auto timeFuncInvocation = [](auto &amp;amp;&amp;amp;func, auto &amp;amp;&amp;amp;... params) {  
  start timer;
  std::forward&amp;lt;decltype(func)&amp;gt;(func)(                      // invoke func
      std::forward&amp;lt;decltype(params)&amp;gt;(params)...      // on params
  );
  stop timer and record elapsed time;
};
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ï¼ˆå®Œï¼‰&lt;/p&gt;
&lt;p&gt;æœ‹å‹ä»¬å¯ä»¥å…³æ³¨ä¸‹æˆ‘çš„å…¬ä¼—å·ï¼Œè·å¾—æœ€åŠæ—¶çš„æ›´æ–°ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1298604/202011/1298604-20201103132150036-885052821.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Mon, 30 Nov 2020 15:22:00 +0000</pubDate>
<dc:creator>å¼ é›…å®¸</dc:creator>
<og:description>å¼•å­ å¦‚ä½•åŒºåˆ† æ¨¡æ¿å‚æ•° const disqualify universal reference autoå£°æ˜ å¼•å­ T&amp;amp;amp;&amp;amp;amp;åœ¨ä»£ç é‡Œå¹¶ä¸æ€»æ˜¯å³å€¼å¼•ç”¨ï¼š void f(</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/zhangyachen/p/14065583.html</dc:identifier>
</item>
<item>
<title>åŸºäºHALåº“çš„STM32çš„DSPåº“è¯¦è§£(é™„FFTåº”ç”¨) - å»–ä¼Ÿä¼Ÿ</title>
<link>http://www.cnblogs.com/lwwBKY/p/14063829.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/lwwBKY/p/14063829.html</guid>
<description>&lt;p&gt;3. Â æ‰“å¼€ option for target é€‰æ‹© C/C++ æ ‡ç­¾
&lt;/p&gt;&lt;p&gt;åœ¨defineåæ·»åŠ ï¼š__TARGET_FPU_VFP,ARM_MATH_MATRIX_CHECK,ARM_MATH_ROUNDING,ARM_MATH_CM4,__CC_ARM,ç”±äºä½¿ç”¨HALçš„åº“ï¼Œæ‰€ä»¥å‰é¢æœ‰USE_HAL_DRIVER,STM32F429xxçš„å…¨å±€å®å®šä¹‰ï¼Œå¦‚æœä½¿ç”¨çš„ä¸æ˜¯HALåº“ï¼Œè€Œæ˜¯ä½¿ç”¨å›ºä»¶åº“çš„è¯ï¼Œä¸€èˆ¬ä¼šæœ‰å›ºä»¶åº“çš„ä¸€ä¸ªå…¨å±€å®å®šä¹‰USE_STDPERIPH_DRIVERå’ŒSTM32F4XXxxåœ¨é‡Œé¢ã€‚æ‰€ä»¥å½“å‰åªéœ€è¦æ·»åŠ &lt;/p&gt;&lt;p&gt;æ³¨æ„ä¸­é—´ç”¨è‹±æ–‡é€—å·åˆ†å¼€ã€‚å…¶ä¸­ARM_MATH_MATRIX_CHECKæ˜¯åº“å‡½æ•°çš„å‚æ•°æ£€æŸ¥å¼€å…³ã€‚ARM_MATH_ROUNDINGè¿™ä¸ªæ˜¯åº“å‡½æ•°åœ¨è¿ç®—æ˜¯æ˜¯å¦å¼€å¯å››èˆäº”å…¥çš„åŠŸèƒ½ï¼Œå¯ä»¥æ ¹æ®å®é™…éœ€è¦è¿›è¡Œé…ç½®ã€‚ARM_MATH_CM4è¿™ä¸ªå°±éå¸¸é‡è¦ï¼Œå¿…é¡»è¦é…ç½®è¿›å»ï¼Œå¦åˆ™åœ¨ç¼–è¯‘ä¹‹åï¼Œä¼šé»˜è®¤ä½¿ç”¨math.hçš„åº“å‡½æ•°ï¼Œè€Œä¸ä¼šç”¨åˆ°ç¡¬ä»¶çš„FPUçš„ã€‚__CC_ARMæ˜¯ä¸åŒç¼–è¯‘å™¨çš„ç¼–è¯‘é…ç½®å®å®šä¹‰ï¼Œ__CC_ARMå°±æ˜¯ä»£è¡¨MDKå¼€å‘ç¯å¢ƒã€‚&lt;/p&gt;&lt;div readability=&quot;95&quot;&gt;Â 4.Â æ·»åŠ æµ®ç‚¹åº“(.lib)æ–‡ä»¶åˆ°å·¥ç¨‹(æˆ–è€…æ·»åŠ æºç åº“æ–‡ä»¶)ã€‚
&lt;p&gt;å¦‚æœç”¨çš„æ˜¯ uv4ï¼Œæ‰“å¼€Â C:\Keil\ARM\CMSIS\Lib\ARM ç›®å½•ï¼Œå¤åˆ¶â€œarm_cortexM4lf_math.libâ€æ–‡ä»¶åˆ°ä½ çš„å·¥ç¨‹ä¸‹ï¼Œå¹¶åŠ å…¥å·¥ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœç”¨çš„æ˜¯ uv5ï¼Œæ‰“å¼€Â C:\Keil_v5\ARM\Pack\ARM\CMSIS\4.2.0\CMSIS\Lib\ARMÂ ç›®å½•ï¼Œå¤åˆ¶â€œarm_cortexM4lf_math.libâ€æ–‡ä»¶åˆ°å·¥ç¨‹ä¸‹ï¼Œå¹¶åŠ å…¥å·¥ç¨‹ï¼Œ4.2.0æ˜¯åº“çš„ç‰ˆæœ¬ï¼Œæ¯ä¸ªç‰ˆæœ¬å¯èƒ½ä¸ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;ä¹Ÿå¯ä»¥ä»å®˜æ–¹ä¸‹è½½å›ºä»¶åº“ç¨‹åºåŒ…ä¸­å¤åˆ¶ä¹Ÿè¡Œï¼Œ Â \STM32F4xx_DSP_StdPeriph_Lib\Libraries\CMSIS\Lib\ARM&lt;/p&gt;
&lt;div&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1451555/202011/1451555-20201130221635873-1236051845.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/div&gt;
&lt;p&gt;å¦‚æœæŸ¥çœ‹DSPåº“çš„å„ä¸ªå‡½æ•°çš„åŸå‹ï¼Œå¯ä»¥æ·»åŠ æºç åº“æ–‡ä»¶ï¼ŒÂ åˆ™å½“å‰å·¥ç¨‹ç›®å½•ä¸‹çš„Drivers\CMSIS\DSP_Lib\Sourceç›®å½•å¯ä»¥æŸ¥çœ‹ï¼Œå½“ç„¶å®‰è£…ç›®å½•ä¸‹ä¹Ÿæœ‰è¯¥åº“æºæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;BasicMathFunctions&lt;/p&gt;
&lt;p&gt;&lt;span&gt;åŸºæœ¬æ•°å­¦å‡½æ•°ï¼šæä¾›æµ®ç‚¹æ•°çš„å„ç§åŸºæœ¬è¿ç®—å‡½æ•°ï¼Œå¦‚å‘é‡åŠ å‡ä¹˜é™¤ç­‰è¿ç®—ã€‚Â &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;CommonTables&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;arm_common_tables.cæ–‡ä»¶æä¾›ä½ç¿»è½¬æˆ–ç›¸å…³å‚æ•°è¡¨ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ComplexMathFunctions&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å¤æ‚æ•°å­¦åŠŸèƒ½ï¼Œå¦‚å‘é‡å¤„ç†ï¼Œæ±‚æ¨¡è¿ç®—çš„ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ControllerFunctions&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æ§åˆ¶åŠŸèƒ½å‡½æ•°ã€‚åŒ…æ‹¬æ­£å¼¦ä½™å¼¦ï¼ŒPIDç”µæœºæ§åˆ¶ï¼ŒçŸ¢é‡Clarkeå˜æ¢ï¼ŒçŸ¢é‡Clarkeé€†å˜æ¢ç­‰ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;FastMathFunctions&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å¿«é€Ÿæ•°å­¦åŠŸèƒ½å‡½æ•°ã€‚æä¾›äº†ä¸€ç§å¿«é€Ÿçš„è¿‘ä¼¼æ­£å¼¦ï¼Œä½™å¼¦å’Œå¹³æ–¹æ ¹ç­‰ç›¸æ¯”CMSISè®¡ç®—åº“è¦å¿«çš„æ•°å­¦å‡½æ•°ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;FilteringFunctions&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æ»¤æ³¢å‡½æ•°åŠŸèƒ½ï¼Œä¸»è¦ä¸ºFIRå’ŒLMSï¼ˆæœ€å°å‡æ–¹æ ¹ï¼‰ç­‰æ»¤æ³¢å‡½æ•°ã€‚Â &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;MatrixFunctions&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;çŸ©é˜µå¤„ç†å‡½æ•°ã€‚åŒ…æ‹¬çŸ©é˜µåŠ æ³•ã€çŸ©é˜µåˆå§‹åŒ–ã€çŸ©é˜µåã€çŸ©é˜µä¹˜æ³•ã€çŸ©é˜µè§„æ¨¡ã€çŸ©é˜µå‡æ³•ã€çŸ©é˜µè½¬ç½®ç­‰å‡½æ•°ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;StatisticsFunctions&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ç»Ÿè®¡åŠŸèƒ½å‡½æ•°ã€‚å¦‚æ±‚å¹³å‡å€¼ã€æœ€å¤§å€¼ã€æœ€å°å€¼ã€è®¡ç®—å‡æ–¹æ ¹RMSã€è®¡ç®—æ–¹å·®/æ ‡å‡†å·®ç­‰ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;SupportFunctions&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æ”¯æŒåŠŸèƒ½å‡½æ•°ï¼Œå¦‚æ•°æ®æ‹·è´ï¼ŒQæ ¼å¼å’Œæµ®ç‚¹æ ¼å¼ç›¸äº’è½¬æ¢ï¼ŒQä»»æ„æ ¼å¼ç›¸äº’è½¬æ¢ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;TransformFunctions&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å˜æ¢åŠŸèƒ½ã€‚åŒ…æ‹¬å¤æ•°FFTï¼ˆCFFTï¼‰/å¤æ•°FFTé€†è¿ç®—ï¼ˆCIFFTï¼‰ã€å®æ•°FFTï¼ˆRFFTï¼‰/å®æ•°FFTé€†è¿ç®—ï¼ˆRIFFTï¼‰ã€å’ŒDCTï¼ˆç¦»æ•£ä½™å¼¦å˜æ¢ï¼‰å’Œé…å¥—çš„åˆå§‹åŒ–å‡½æ•°ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ç›¸å…³å‡½æ•°è¯´æ˜ä»¥åŠç¤ºä¾‹ä¹Ÿå¯åœ¨å®‰è£…è·¯å¾„Keil_v5\ARM\PACK\ARM\CMSIS\4.5.0\CMSIS\Documentation\DSP\htmlä¸‹è·å¾—ï¼Œè‡ªè¡ŒæŸ¥é˜…ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;/&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;5.Â DSPåº“çš„FFTå˜æ¢ç¤ºä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;span&gt;åœ¨å·¥ç¨‹çš„main.cæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;è¯´æ˜ï¼šé‡‡æ ·é¢‘ç‡ä¸º1024Hzï¼Œfftç‚¹æ•°ä¸º1024ç‚¹,åˆ™é¢‘ç‡åˆ†è¾¨ç‡ï¼Œè®¡ç®—å…¬å¼ï¼šåˆ†è¾¨ç‡=é‡‡æ ·é¢‘ç‡/é‡‡æ ·ç‚¹æ•° = 1Hzï¼Œæ­¤æ—¶èƒ½çœ‹åˆ°0Hz,1Hz,2Hz,3Hz,.....512Hzçš„é¢‘ç‡åˆ†é‡ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;FFTOutputè¿™ä¸ªæ•°ç»„ä¸­ï¼Œä¸‹æ ‡0å¯¹åº”çš„å…ƒç´ å°±æ˜¯0Hz(ä¹Ÿå°±æ˜¯ç›´æµåˆ†é‡)çš„å¹…åº¦ï¼Œä¸‹æ ‡1å¯¹åº”çš„å°±æ˜¯1Hzçš„å¹…åº¦ï¼Œä¸‹æ ‡2å¯¹åº”2Hzçš„å¹…åº¦......,ä¾æ¬¡ç±»æ¨ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æ­¤ç‚¹éå¸¸é‡è¦ï¼Œä¾‹å¦‚é‡‡æ ·ç‡ä¸º2048Hz,é‚£ä¹ˆé¢‘ç‡åˆ†è¾¨ç‡ä¸º2Hz,é‚£ä¹ˆèƒ½çœ‹åˆ°0Hz,2Hz,4Hz,6Hz,.....1024Hzçš„é¢‘ç‡åˆ†é‡&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;FFTOutputè¿™ä¸ªæ•°ç»„ä¸­ï¼Œä¸‹æ ‡0å¯¹åº”çš„å…ƒç´ å°±æ˜¯0Hz(ä¹Ÿå°±æ˜¯ç›´æµåˆ†é‡)çš„å¹…åº¦ï¼Œä¸‹æ ‡1å¯¹åº”çš„å°±æ˜¯2Hzçš„å¹…åº¦ï¼Œä¸‹æ ‡2å¯¹åº”4Hzçš„å¹…åº¦......,ä¾æ¬¡ç±»æ¨ã€‚æ­¤æ—¶å»çœ‹1Hz,3Hzï¼Œåˆ™ä¼šå‡ºç°è¯¯å·®æ¯”è¾ƒå¤§çš„æƒ…å†µã€‚&lt;/span&gt;&lt;/p&gt;
&lt;div readability=&quot;43&quot;&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;38&quot;&gt;
&lt;pre class=&quot;brush:cpp;gutter:true;&quot;&gt;
#include &quot;arm_math.h&quot;                  //æ·»åŠ å¤´æ–‡ä»¶
#define  FFT_LENGTH        1024        //FFTé•¿åº¦ï¼Œé»˜è®¤æ˜¯1024ç‚¹FFT&lt;br/&gt;#define  SAMPLE_FREQ       1024        //é‡‡æ ·é¢‘ç‡
&lt;/pre&gt;
&lt;pre&gt;
float fft_inputbuf[FFT_LENGTH*2];      //FFTè¾“å…¥è¾“å‡ºæ•°ç»„ï¼Œæ­¤æ•°ç»„ä¸ºarm_cfft_radix4_f32çš„è¾“å…¥è¾“å‡ºæ•°ç»„ï¼Œå‰ä¸€ä¸ªå…ƒç´ ä¸ºå®éƒ¨ï¼Œåä¸€ä¸ªä¸ºè™šéƒ¨ï¼Œæ¯ä¸¤ä¸ªå…ƒç´ ä»£è¡¨ä¸€ä¸ªç‚¹.
float fft_outputbuf[FFT_LENGTH];    //arm_cmplx_mag_f32()å¹…åº¦è¾“å‡ºæ•°ç»„
arm_cfft_radix4_instance_f32 scfft; //fftå˜æ¢çš„åˆå§‹åŒ–å‚æ•°
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åœ¨ä¸»å‡½æ•°è¿›å…¥while(1)ä¹‹å‰æ·»åŠ å¦‚ä¸‹ä»£ç &lt;/p&gt;
&lt;p&gt;è¯´æ˜ï¼šarm_sin_f32å‡½æ•°ç”Ÿæˆé‡‡æ ·ç‚¹ï¼Œé‡‡æ ·ä¿¡å·ä¸ºDCä¿¡å·ï¼Œ100Hzï¼Œ150Hzä¿¡å·çš„å åŠ ï¼Œæ­¤æ—¶åˆ†è¾¨ç‡ä¸º1Hzï¼Œåˆšå¥½èƒ½å¤Ÿçœ‹åˆ°DCï¼Œ 100Hzï¼Œ150Hzé¢‘ç‡åˆ†é‡çš„å¹…åº¦ï¼Œåˆ†åˆ«å¯¹åº”fftå¹…åº¦è¾“å‡ºæ•°ç»„çš„ä¸‹æ ‡0,100,150&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;42&quot;&gt;
&lt;pre&gt;
arm_cfft_radix4_init_f32(&amp;amp;scfft,FFT_LENGTH,0,1);//åˆå§‹åŒ–scfftç»“æ„ä½“ï¼Œè®¾å®šFFTç›¸å…³å‚æ•°&lt;br/&gt;for(int i=0;i&amp;lt;FFT_LENGTH;i++)//ç”Ÿæˆä¿¡å·åºåˆ—&lt;br/&gt;{&lt;br/&gt;fft_inputbuf[2*i]=&lt;span&gt;&lt;strong&gt;15&lt;/strong&gt;&lt;/span&gt; + &lt;span&gt;&lt;strong&gt;10&lt;/strong&gt;&lt;/span&gt;*arm_sin_f32(2*PI*i*100/SAMPLE_FREQ) + \&lt;br/&gt;&lt;span&gt;&lt;strong&gt;                  5.5&lt;/strong&gt;&lt;/span&gt;*arm_sin_f32(2*PI*i*150/SAMPLE_FREQ); //ç”Ÿæˆå®éƒ¨&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;         &lt;br/&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt; fft_inputbuf[2*i+1]=0;//è™šéƒ¨å…¨éƒ¨ä¸º0&lt;br/&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;}&lt;br/&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;arm_cfft_radix4_f32(&amp;amp;scfft,fft_inputbuf);    //FFTè®¡ç®—ï¼ˆåŸº4ï¼ˆå³ffté•¿åº¦2&lt;sup&gt;2*n&lt;/sup&gt;ï¼‰ï¼ŒFFTé•¿åº¦åªèƒ½ä¸º64ï¼Œ256ï¼Œ1024ï¼Œ4096ç›®å‰æµ‹è¯•è¿‡è¿™å‡ ä¸ªé•¿åº¦,ï¼‰&lt;br/&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;arm_cmplx_mag_f32(fft_inputbuf,fft_outputbuf,FFT_LENGTH);    //æŠŠè¿ç®—ç»“æœå¤æ•°æ±‚æ¨¡å¾—å¹…å€¼&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;DCåˆ†é‡å€¼ä¸º15360.001,åˆ™å¯¹åº”çš„ç›´æµåˆ†é‡ä¸º15360.001/FFTç‚¹æ•° =Â 15360.001/1024=15&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1451555/202011/1451555-20201130225324872-1207359962.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;100Hzåˆ†é‡å€¼ä¸º5119.99658,åˆ™å¯¹åº”çš„100Hzå¹…åº¦ä¸º5119.99658*2/FFTç‚¹æ•° = 5119.99658*2/1024=10&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1451555/202011/1451555-20201130230050960-423669324.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span id=&quot;__mceDel&quot;&gt;150&lt;/span&gt;Hzåˆ†é‡å€¼ä¸º2815.99976,åˆ™å¯¹åº”çš„150Hzå¹…åº¦ä¸º2815.99976*2/FFTç‚¹æ•° = 2815.99976*2/1024=5.5&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1451555/202011/1451555-20201130230025168-912185189.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å…¶ä½™çš„é¢‘ç‡çš„å¹…åº¦è¿‘ä¼¼ä¸º0ã€‚&lt;/p&gt;
&lt;p&gt;è‹¥è¦æŸ¥çœ‹æŸä¸€é¢‘ç‡åˆ†é‡çš„å®éƒ¨ä¸è™šéƒ¨ï¼Œåˆ™å¯ä»¥æŸ¥çœ‹fft_inputbufæ•°ç»„ã€‚ä¸‹æ ‡å¯¹åº”ä¹˜ä»¥2,å› ä¸ºå®éƒ¨å’Œè™šéƒ¨å­˜åœ¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;å½“æŠŠé‡‡æ ·é¢‘ç‡æ”¹ä¸º2048Hzï¼Œç”Ÿæˆä¿¡å·é¢‘ç‡å…¶ä¸­ä¸€è·¯æ”¹ä¸º151Hz,è¯»è€…å¯ä»¥è‡ªè¡Œæµ‹è¯•è¯¥é¢‘ç‡åˆ†é‡çš„å¹…åº¦ï¼Œè‚¯å®šä¼šå­˜åœ¨è¯¯å·®ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;</description>
<pubDate>Mon, 30 Nov 2020 15:16:00 +0000</pubDate>
<dc:creator>å»–ä¼Ÿä¼Ÿ</dc:creator>
<og:description>1 . å»ºç«‹å·¥ç¨‹ï¼Œç”Ÿæˆä»£ç æ—¶é€‰æ‹©åŒ…å«æ‰€æœ‰åº“ã€‚ 2. æ‰“å¼€ option for target é€‰æ‹© Target æ ‡ç­¾ï¼Œåœ¨code generatioä¸­ï¼Œå°†floating point hardwar</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/lwwBKY/p/14063829.html</dc:identifier>
</item>
</channel>
</rss>