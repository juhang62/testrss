<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>åšå®¢å›­_é¦–é¡µ</title>
<link></link>
<description>ä»£ç æ”¹å˜ä¸–ç•Œ</description>
<item>
<title>RAC(ReactiveCocoa)ä½¿ç”¨æ–¹æ³•(ä¸€) - soliloquy.local</title>
<link>http://www.cnblogs.com/soliloquy/p/7920551.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/soliloquy/p/7920551.html</guid>
<description>&lt;p&gt;&lt;a href=&quot;http://www.jianshu.com/p/28144edff618&quot;&gt;RAC(ReactiveCocoa)ä½¿ç”¨æ–¹æ³•(ä¸€)&lt;/a&gt;&lt;br/&gt;&lt;a href=&quot;http://www.jianshu.com/p/c990dd1f3f9c&quot;&gt;RAC(ReactiveCocoa)ä½¿ç”¨æ–¹æ³•(äºŒ)&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&quot;ä»€ä¹ˆæ˜¯rac&quot;&gt;ä»€ä¹ˆæ˜¯RACï¼Ÿ&lt;/h4&gt;
&lt;p&gt;æœ€è¿‘å›é¡¾äº†ä¸€ä¸‹&lt;code&gt;ReactiveCocoa&lt;/code&gt;çš„æ–¹æ³•ï¼Œä¹Ÿçœ‹äº†ä¸€äº›äººçš„æ–‡ç« ï¼Œç°å†™ç¯‡æ–‡ç« æ€»ç»“ä¸€ä¸‹ã€‚&lt;br/&gt;ç°åœ¨è¿™ä¸ªåº“æœ€æ–°æ”¯æŒSwiftï¼Œå¦‚æœä½ è¦æ˜¯ç”¨&lt;code&gt;Cocoapods&lt;/code&gt;çš„è¯ä¸æŒ‡å®šç‰ˆæœ¬å®ƒé»˜è®¤æ˜¯ä¸‹è½½Swiftç‰ˆæœ¬ï¼Œå¦‚æœä¾æ—§æƒ³ç”¨OCç‰ˆæœ¬å°±æŒ‡å®šä¸€ä¸ªç‰ˆæœ¬ï¼Œæœ€å¥½æ˜¯V2.5ç‰ˆæœ¬åŠä»¥ä¸‹ï¼Œå¦åˆ™å¯èƒ½ä¼šå‡ºç°é”™è¯¯ã€‚æœ€è¿‘æˆ‘è¯•çš„æ˜¯V2.5ï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚&lt;br/&gt;é¡¹ç›®ä¸­ç”¨&lt;code&gt;Cocoapods&lt;/code&gt;ä½¿ç”¨ï¼š&lt;code&gt;pod &quot;ReactiveCocoa&quot;, '~&amp;gt; 2.5'&lt;/code&gt;&lt;br/&gt;é‚£ä»€ä¹ˆæ˜¯RACå‹’ï¼Ÿæƒ³å¿…å¤§å®¶éšä¾¿è°·æ­Œä¸€ä¸‹å°±ä¸€å¤§ç‰‡è¿™ä¸ªæ¦‚å¿µå’Œæ–‡ç« ã€‚&lt;br/&gt;RACå…·æœ‰å‡½æ•°å“åº”å¼ç¼–ç¨‹ç‰¹æ€§ï¼Œç”±&lt;code&gt;Matt Diephouse&lt;/code&gt;å¼€æºçš„ä¸€ä¸ªåº”ç”¨äºiOSå’ŒOS Xçš„æ–°æ¡†æ¶ã€‚&lt;/p&gt;
&lt;h6 id=&quot;éƒ¨åˆ†å‚è€ƒæ¥æº&quot;&gt;&lt;a href=&quot;http://www.jianshu.com/p/87ef6720a096&quot;&gt;éƒ¨åˆ†å‚è€ƒæ¥æº&lt;/a&gt;&lt;/h6&gt;
&lt;h4 id=&quot;ä¸ºä»€ä¹ˆè¦ä½¿ç”¨rac&quot;&gt;ä¸ºä»€ä¹ˆè¦ä½¿ç”¨RACï¼Ÿ&lt;/h4&gt;
&lt;p&gt;å› ä¸ºRACå…·æœ‰é«˜èšåˆä½è€¦åˆçš„æ€æƒ³ï¼Œä½¿ç”¨RACä¼šè®©ä»£ç æ›´ç®€æ´ï¼Œé€»è¾‘æ›´æ¸…æ™°ã€‚å†ç»“åˆMVVMæ¶æ„ï¼Œè®©ä½ ç¬é—´çˆ½çˆ†äº†ï¼&lt;/p&gt;
&lt;p&gt;RACæœ‰å¾ˆå¤šçš„ç±»ï¼Œä¸ºå¾ˆå¤šçš„UIæ§ä»¶éƒ½æ‹“å±•äº†æ–¹æ³•ï¼Œä½¿å¾—å¼€å‘å¤§å¤§çš„ç®€ä¾¿åŒ–ï¼Œè¿™é‡Œå°±ç®€å•çš„ä»‹ç»å¼€å‘è¿‡ç¨‹ä¸­ç”¨åˆ°çš„æ–¹æ³•ã€‚&lt;br/&gt;æ‰“å¼€åº”ç”¨çš„åˆå§‹ViewControllerï¼Œå¼•å…¥ReactiveCocoaçš„å¤´æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;#import &amp;lt;ReactiveCocoa/ReactiveCocoa.h&amp;gt; &lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨æ§åˆ¶å™¨ä¸­åˆ›å»ºä¸€ä¸ªTextFieldï¼ŒSBæ‹–å…¥æ›´æ–¹ä¾¿ï¼Œç„¶åå¦‚ä¸‹&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;[self.TextField.rac_textSignal subscribeNext:^(id x){
  NSLog(@&quot;x:%@&quot;, x);
}];&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç¼–è¯‘è¿è¡Œï¼Œåœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥æ–‡å­—ã€‚æ³¨æ„æ‰“å°ä¿¡æ¯çš„è¾“å‡ºåº”è¯¥å’Œä¸‹é¢çš„ç±»ä¼¼ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;2017-11-29 10:26:25.152197+0800 MVVM-Demo[1089:230607] x:a
2017-11-29 10:26:25.159596+0800 MVVM-Demo[1089:230607] x:ah
2017-11-29 10:26:25.385413+0800 MVVM-Demo[1089:230607] x:ahv
2017-11-29 10:26:25.576558+0800 MVVM-Demo[1089:230607] x:ahva
2017-11-29 10:26:25.764013+0800 MVVM-Demo[1089:230607] x:ahvah
2017-11-29 10:26:25.784379+0800 MVVM-Demo[1089:230607] x:ahvahv
2017-11-29 10:26:25.853596+0800 MVVM-Demo[1089:230607] x:ahvahvj
2017-11-29 10:26:25.868552+0800 MVVM-Demo[1089:230607] x:ahvahvja
2017-11-29 10:26:26.002545+0800 MVVM-Demo[1089:230607] x:ahvahvjav
2017-11-29 10:26:26.062553+0800 MVVM-Demo[1089:230607] x:ahvahvjavj
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å½“ä½ çœ‹åˆ°è¿™äº›æ‰“å°ä¿¡æ¯ï¼Œä½ æ˜¯ä¸æ˜¯è§‰å¾—å¾ˆç¥å¥‡ï¼Œéƒ½æ²¡æœ‰ç›‘å¬TextFieldçš„æ–¹æ³•ï¼Œå®ƒå’‹å°±é‚£ä¹ˆç‰›é€¼å‹’ã€‚å…¶å®RACå†…éƒ¨å°±å¸®ä½ åšäº†è®¸å¤šäº‹æƒ…ã€‚ä½ åªè¦è°ƒç”¨ç›¸åº”æ§ä»¶çš„RACæ–¹æ³•å°±å¯ä»¥ç›‘å¬åˆ°å®ƒä»¬çš„çŠ¶æ€äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;é‚£ä¹ˆå®ƒæ˜¯æ€ä¹ˆç›‘å¬æ€ä¹ˆåšåˆ°çš„å‹’ï¼Ÿ&lt;/code&gt;&lt;br/&gt;è¿™é‡Œè¦è®²å‡ ä¸ªå¾ˆé‡è¦çš„RACç±»ï¼Œä¸æ¶‰åŠRACåŸç†ï¼Œå†…éƒ¨æ€ä¹ˆå®ç°è¿˜è¦å¤§å®¶å»é˜…è¯»æºç äº†ã€‚&lt;/p&gt;
&lt;ul readability=&quot;5.9853181076672&quot;&gt;&lt;li readability=&quot;14.963295269168&quot;&gt;
&lt;h5 id=&quot;racsiganl&quot;&gt;RACSiganl&lt;/h5&gt;
&lt;p&gt;1ã€&lt;code&gt;RACSiganl&lt;/code&gt;ä¿¡å·ç±»ï¼Œè¡¨ç¤ºå°†æ¥æœ‰æ•°æ®ä¼ é€’ï¼Œæœ‰æ•°æ®æ”¹å˜ï¼Œä¿¡å·å†…éƒ¨æ¥æ”¶åˆ°æ•°æ®ï¼Œå°±ä¼šé©¬ä¸Šå‘å‡ºæ•°æ®ï¼Œå¤–éƒ¨å°±å¯ä»¥æ¥æ”¶åˆ°æ•°æ®äº†ã€‚å°±åƒåˆšåˆšä¸Šé¢çš„ä¾‹å­ä¸€æ ·ã€‚&lt;br/&gt;2ã€é»˜è®¤ä¿¡å·éƒ½æ˜¯å†·ä¿¡å·ï¼Œå°±æ˜¯è¿™ä¸ªå€¼æ”¹å˜äº†å®ƒä¸ä¼šè§¦å‘ï¼Œåªæœ‰è®¢é˜…ï¼ˆè°ƒç”¨ä¿¡å·RACSignalçš„subscribeNextè®¢é˜…ï¼‰äº†è¿™ä¸ªä¿¡å·ï¼Œè¿™ä¸ªä¿¡å·æ‰ä¼šå˜ä¸ºçƒ­ä¿¡å·(å€¼ä¸€æ”¹å˜å°±è§¦å‘)ï¼Œæ‰ä¼šè§¦å‘ã€‚&lt;/p&gt;
&lt;h6 id=&quot;racsiganlç®€å•ä½¿ç”¨&quot;&gt;&lt;code&gt;RACSiganlç®€å•ä½¿ç”¨:&lt;/code&gt;&lt;/h6&gt;
&lt;p&gt;```&lt;br/&gt;// 1.åˆ›å»ºä¿¡å·&lt;br/&gt;RACSignal &lt;em&gt;siganl = [RACSignal createSignal:^RACDisposable&lt;/em&gt; (id&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;// æ¯å½“æœ‰è®¢é˜…è€…è®¢é˜…ä¿¡å·ï¼Œå°±ä¼šè°ƒç”¨blockã€‚
// 2.å‘é€ä¿¡å·
[subscriber sendNext:@&quot;æˆ‘æ˜¯ä¸€ä¸ªä¿¡å·ğŸ“¶&quot;];

// å¦‚æœä¸åœ¨å‘é€æ•°æ®ï¼Œæœ€å¥½å‘é€ä¿¡å·å®Œæˆï¼Œå†…éƒ¨ä¼šè‡ªåŠ¨è°ƒç”¨[RACDisposable disposable]å–æ¶ˆè®¢é˜…ä¿¡å·ã€‚
[subscriber sendCompleted];

return [RACDisposable disposableWithBlock:^{
    // å½“ä¿¡å·å‘é€å®Œæˆæˆ–è€…å‘é€é”™è¯¯ï¼Œå°±ä¼šè‡ªåŠ¨æ‰§è¡Œè¿™ä¸ªblock,å–æ¶ˆè®¢é˜…ä¿¡å·ã€‚
    // æ‰§è¡Œå®ŒBlockåï¼Œå½“å‰ä¿¡å·å°±ä¸åœ¨è¢«è®¢é˜…äº†ã€‚
    NSLog(@&quot;dealloc&quot;);

}];&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;}];&lt;/p&gt;
&lt;p&gt;// 3.è®¢é˜…ä¿¡å·,æ‰ä¼šæ¿€æ´»ä¿¡å·.&lt;br/&gt;[siganl subscribeNext:^(id x) {&lt;br/&gt;// blockè°ƒç”¨æ—¶åˆ»ï¼šæ¯å½“æœ‰ä¿¡å·å‘å‡ºæ•°æ®ï¼Œå°±ä¼šè°ƒç”¨block.&lt;br/&gt;NSLog(@&quot;æ•°æ®: &lt;a&gt;%@&quot;&lt;/a&gt;,x);&lt;br/&gt;}];&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code&gt;
æ‰“å°å¦‚ä¸‹
 ```
2017-11-29 11:04:34.383754+0800 MVVM-Demo[1185:379135] æ•°æ®:æˆ‘æ˜¯ä¸€ä¸ªä¿¡å·ğŸ“¶
2017-11-29 11:04:34.383878+0800 MVVM-Demo[1185:379135] dealloc&lt;/code&gt;
&lt;/pre&gt;
&lt;ul readability=&quot;3.5&quot;&gt;&lt;li readability=&quot;1&quot;&gt;
&lt;h5 id=&quot;racsubscriber&quot;&gt;RACSubscriber&lt;/h5&gt;
&lt;p&gt;&lt;code&gt;RACSubscriber&lt;/code&gt;è®¢é˜…è€…ï¼Œç”¨äºå‘é€ä¿¡å·ï¼Œè¿™æ˜¯ä¸€ä¸ªåè®®ï¼Œä¸æ˜¯ä¸€ä¸ªç±»ï¼Œåªè¦éµå®ˆè¿™ä¸ªåè®®ï¼Œå¹¶ä¸”å®ç°æ–¹æ³•æ‰èƒ½æˆä¸ºè®¢é˜…è€…ã€‚é€šè¿‡createåˆ›å»ºçš„ä¿¡å·ï¼Œéƒ½æœ‰ä¸€ä¸ªè®¢é˜…è€…ï¼Œå¸®åŠ©ä»–å‘é€æ•°æ®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;h5 id=&quot;racdisposable&quot;&gt;RACDisposable&lt;/h5&gt;
&lt;p&gt;&lt;code&gt;RACDisposable&lt;/code&gt;ç”¨äºå–æ¶ˆè®¢é˜…æˆ–è€…æ¸…ç†èµ„æºï¼Œå½“ä¿¡å·å‘é€å®Œæˆæˆ–è€…å‘é€é”™è¯¯çš„æ—¶å€™ï¼Œå°±ä¼šè‡ªåŠ¨è§¦å‘å®ƒã€‚ å½“ä½ ä¸æƒ³ç›‘å¬æŸä¸ªä¿¡å·æ—¶ï¼Œå¯ä»¥é€šè¿‡å®ƒä¸»åŠ¨å–æ¶ˆè®¢é˜…ä¿¡å·ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;h5 id=&quot;racsubject&quot;&gt;RACSubject&lt;/h5&gt;
&lt;code&gt;RACSubject&lt;/code&gt;ä¿¡å·æä¾›è€…ï¼Œè‡ªå·±å¯ä»¥å……å½“ä¿¡å·ï¼Œåˆèƒ½å‘é€ä¿¡å·ã€‚é€šå¸¸ç”¨æ¥ä»£æ›¿ä»£ç†ï¼Œæœ‰äº†å®ƒï¼Œå°±ä¸å¿…è¦å®šä¹‰ä»£ç†äº†ã€‚&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;h5 id=&quot;racreplaysubject&quot;&gt;RACReplaySubject&lt;/h5&gt;
&lt;p&gt;&lt;code&gt;RACReplaySubject&lt;/code&gt;é‡å¤æä¾›ä¿¡å·ç±»ï¼ŒRACSubjectçš„å­ç±»ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RACReplaySubject&lt;/code&gt;ä¸&lt;code&gt;RACSubject&lt;/code&gt;åŒºåˆ«:&lt;br/&gt;&lt;code&gt;RACReplaySubject&lt;/code&gt;å¯ä»¥å…ˆå‘é€ä¿¡å·ï¼Œåœ¨è®¢é˜…ä¿¡å·ï¼Œ&lt;code&gt;RACSubject&lt;/code&gt;å°±ä¸å¯ä»¥ã€‚&lt;br/&gt;```&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸€ä¸ªä¿¡å·æ¯è¢«è®¢é˜…ä¸€æ¬¡ï¼Œå°±éœ€è¦æŠŠä¹‹å‰çš„å€¼é‡å¤å‘é€ä¸€éï¼Œä½¿ç”¨é‡å¤æä¾›ä¿¡å·ç±»ã€‚&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;å¯ä»¥è®¾ç½®capacityæ•°é‡æ¥é™åˆ¶ç¼“å­˜çš„valueçš„æ•°é‡, å³åªç¼“å­˜æœ€æ–°çš„å‡ ä¸ªå€¼ã€‚&lt;br/&gt;```&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;h6 id=&quot;racreplaysubjectä½¿ç”¨æ­¥éª¤&quot;&gt;RACReplaySubjectä½¿ç”¨æ­¥éª¤:&lt;/h6&gt;
&lt;ul&gt;&lt;li&gt;åˆ›å»ºä¿¡å· [RACSubject subject]ï¼Œè·ŸRACSiganlä¸ä¸€æ ·ï¼Œåˆ›å»ºä¿¡å·æ—¶æ²¡æœ‰blockã€‚&lt;/li&gt;
&lt;li&gt;å¯ä»¥å…ˆè®¢é˜…ä¿¡å·ï¼Œä¹Ÿå¯ä»¥å…ˆå‘é€ä¿¡å·ã€‚&lt;/li&gt;
&lt;li&gt;è®¢é˜…ä¿¡å· - (RACDisposable *)subscribeNext:(void (^)(id x))nextBlock&lt;/li&gt;
&lt;li&gt;å‘é€ä¿¡å· sendNext:(id)value&lt;/li&gt;
&lt;/ul&gt;&lt;h5 id=&quot;racreplaysubjectåº•å±‚å®ç°å’Œracsubjectä¸ä¸€æ ·&quot;&gt;RACReplaySubject:åº•å±‚å®ç°å’ŒRACSubjectä¸ä¸€æ ·ã€‚&lt;/h5&gt;
&lt;ul&gt;&lt;li&gt;è°ƒç”¨sendNextå‘é€ä¿¡å·ï¼ŒæŠŠå€¼ä¿å­˜èµ·æ¥ï¼Œç„¶åéå†åˆšåˆšä¿å­˜çš„æ‰€æœ‰è®¢é˜…è€…ï¼Œä¸€ä¸ªä¸€ä¸ªè°ƒç”¨è®¢é˜…è€…çš„nextBlockã€‚&lt;/li&gt;
&lt;li&gt;è°ƒç”¨subscribeNextè®¢é˜…ä¿¡å·ï¼Œéå†ä¿å­˜çš„æ‰€æœ‰å€¼ï¼Œä¸€ä¸ªä¸€ä¸ªè°ƒç”¨è®¢é˜…è€…çš„nextBlock&lt;/li&gt;
&lt;li&gt;å¦‚æœæƒ³å½“ä¸€ä¸ªä¿¡å·è¢«è®¢é˜…ï¼Œå°±é‡å¤æ’­æ”¾ä¹‹å‰æ‰€æœ‰å€¼ï¼Œéœ€è¦å…ˆå‘é€ä¿¡å·ï¼Œåœ¨è®¢é˜…ä¿¡å·ã€‚&lt;/li&gt;
&lt;li&gt;å…ˆä¿å­˜å€¼ï¼Œåœ¨è®¢é˜…å€¼ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code&gt;    // 1.åˆ›å»ºä¿¡å·
    RACReplaySubject *replaySubject = [RACReplaySubject subject];

    // 2.å‘é€ä¿¡å·
    [replaySubject sendNext:@1];
    [replaySubject sendNext:@2];

    // 3.è®¢é˜…ä¿¡å·
    [replaySubject subscribeNext:^(id x) {

        NSLog(@&quot;ç¬¬ä¸€ä¸ªè®¢é˜…è€…æ¥æ”¶åˆ°çš„æ•°æ®%@&quot;,x);
    }];

    // è®¢é˜…ä¿¡å·
    [replaySubject subscribeNext:^(id x) {

        NSLog(@&quot;ç¬¬äºŒä¸ªè®¢é˜…è€…æ¥æ”¶åˆ°çš„æ•°æ®%@&quot;,x);
    }];
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ‰“å°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;2017-11-29 11:02:07.468379+0800 MVVM-Demo[1158:370610] ç¬¬ä¸€ä¸ªè®¢é˜…è€…æ¥æ”¶åˆ°çš„æ•°æ®1
2017-11-29 11:02:07.468477+0800 MVVM-Demo[1158:370610] ç¬¬ä¸€ä¸ªè®¢é˜…è€…æ¥æ”¶åˆ°çš„æ•°æ®2
2017-11-29 11:02:07.468592+0800 MVVM-Demo[1158:370610] ç¬¬äºŒä¸ªè®¢é˜…è€…æ¥æ”¶åˆ°çš„æ•°æ®1
2017-11-29 11:02:07.468722+0800 MVVM-Demo[1158:370610] ç¬¬äºŒä¸ªè®¢é˜…è€…æ¥æ”¶åˆ°çš„æ•°æ®2&lt;/code&gt;
&lt;/pre&gt;
&lt;h6 id=&quot;racsubjectä½¿ç”¨æ­¥éª¤&quot;&gt;RACSubjectä½¿ç”¨æ­¥éª¤&lt;/h6&gt;
&lt;ul&gt;&lt;li&gt;åˆ›å»ºä¿¡å· [RACSubject subject]ï¼Œè·ŸRACSiganlä¸ä¸€æ ·ï¼Œåˆ›å»ºä¿¡å·æ—¶æ²¡æœ‰blockã€‚&lt;/li&gt;
&lt;li&gt;è®¢é˜…ä¿¡å· - (RACDisposable *)subscribeNext:(void (^)(id x))nextBlock&lt;/li&gt;
&lt;li&gt;å‘é€ä¿¡å· sendNext:(id)value&lt;/li&gt;
&lt;/ul&gt;&lt;h6 id=&quot;racsubjectåº•å±‚å®ç°å’Œracsignalä¸ä¸€æ ·&quot;&gt;RACSubject:åº•å±‚å®ç°å’ŒRACSignalä¸ä¸€æ ·ã€‚&lt;/h6&gt;
&lt;ul&gt;&lt;li&gt;è°ƒç”¨subscribeNextè®¢é˜…ä¿¡å·ï¼Œåªæ˜¯æŠŠè®¢é˜…è€…ä¿å­˜èµ·æ¥ï¼Œå¹¶ä¸”è®¢é˜…è€…çš„nextBlockå·²ç»èµ‹å€¼äº†ã€‚&lt;/li&gt;
&lt;li&gt;è°ƒç”¨sendNextå‘é€ä¿¡å·ï¼Œéå†åˆšåˆšä¿å­˜çš„æ‰€æœ‰è®¢é˜…è€…ï¼Œä¸€ä¸ªä¸€ä¸ªè°ƒç”¨è®¢é˜…è€…çš„nextBlockã€‚&lt;br/&gt;```&lt;br/&gt;// 1.åˆ›å»ºä¿¡å·&lt;br/&gt;RACSubject *subject = [RACSubject subject];&lt;br/&gt;// 2.è®¢é˜…ä¿¡å·&lt;br/&gt;[subject subscribeNext:^(id x) {&lt;br/&gt;// å½“ä¿¡å·å‘å‡ºæ–°å€¼ï¼Œå°±ä¼šè°ƒç”¨.&lt;br/&gt;NSLog(@&lt;a&gt;&quot;ç¬¬ä¸€ä¸ªè®¢é˜…è€…%@&quot;&lt;/a&gt;,x);&lt;br/&gt;}];&lt;br/&gt;[subject subscribeNext:^(id x) {&lt;br/&gt;// å½“ä¿¡å·å‘å‡ºæ–°å€¼ï¼Œå°±ä¼šè°ƒç”¨.&lt;br/&gt;NSLog(@&lt;a&gt;&quot;ç¬¬äºŒä¸ªè®¢é˜…è€…%@&quot;&lt;/a&gt;,x);&lt;br/&gt;}];&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;// 3.å‘é€ä¿¡å·&lt;br/&gt;[subject sendNext:@&quot;æˆ‘æ˜¯ä¸€ä¸ªä¿¡å·ğŸ“¶&quot;];&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;* #####RACTuple
 `RACTuple `å…ƒç»„ç±», ç±»ä¼¼NSArray,ç”¨æ¥åŒ…è£…å€¼.

* #####RACSequence
`RACSequence `é›†åˆç±»ï¼Œç”¨äºä»£æ›¿NSArray, NSDictionary,å¯ä»¥ä½¿ç”¨å®ƒæ¥å¿«é€Ÿéå†æ•°ç»„å’Œå­—å…¸ã€‚

* `RACSequence `å’Œ`RACTuple `ç®€å•ä½¿ç”¨

`NSArray`&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;NSArray *arr = @[@&quot;å“ˆå“ˆ&quot;,@&quot;å‘µå‘µ&quot;, @&quot;å˜¿å˜¿&quot;, @&quot;å“¼å“¼&quot;];
[arr.rac_sequence.signal subscribeNext:^(id x) {
    NSLog(@&quot;x: %@&quot;, x);
}];&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;æ‰“å°å¦‚ä¸‹&lt;/code&gt;&lt;br/&gt;2017-11-29 11:19:27.081935+0800 MVVM-Demo[1267:428560] x: å“ˆå“ˆ&lt;br/&gt;2017-11-29 11:19:27.082227+0800 MVVM-Demo[1267:428560] x: å‘µå‘µ&lt;br/&gt;2017-11-29 11:19:27.082350+0800 MVVM-Demo[1267:428560] x: å˜¿å˜¿&lt;br/&gt;2017-11-29 11:19:27.082664+0800 MVVM-Demo[1267:428560] x: å“¼å“¼&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;`åŸç†ï¼š`
* é€šè¿‡`arr.rac_sequence`æŠŠæ•°æ®arrè½¬åŒ–æˆé›†åˆRACSequence
* é€šè¿‡`arr.rac_sequence.signal `æŠŠé›†åˆRACSequenceè½¬åŒ–æˆäº†ä¿¡å·
*é€šè¿‡subscribeNextè®¢é˜…ä¿¡å·ï¼ŒæŠŠéå†é›†åˆ

`NSDictionary `
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;// 2.éå†å­—å…¸,éå†å‡ºæ¥çš„é”®å€¼å¯¹ä¼šåŒ…è£…æˆRACTuple(å…ƒç»„å¯¹è±¡)
 NSDictionary *dict = @{@&quot;name&quot;: @&quot;soliloquy&quot;, @&quot;age&quot;: @26};
[dict.rac_sequence.signal subscribeNext:^(id x) {
    // è§£åŒ…å…ƒç»„ï¼Œä¼šæŠŠå…ƒç»„çš„å€¼ï¼ŒæŒ‰é¡ºåºç»™å‚æ•°é‡Œé¢çš„å˜é‡èµ‹å€¼
    RACTupleUnpack(NSString *key,NSString *value) = x;
    NSLog(@&quot;%@ %@&quot;,key,value);
}];&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;æ‰“å°å¦‚ä¸‹&lt;/code&gt;&lt;br/&gt;2017-11-29 11:51:08.027070+0800 MVVM-Demo[1367:471752] name soliloquy&lt;br/&gt;2017-11-29 11:51:08.027526+0800 MVVM-Demo[1367:471752] age 26&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;
`å­—å…¸è½¬æ¨¡å‹`
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;NSArray &lt;em&gt;arr = @[&lt;br/&gt;@&lt;a&gt;{@&quot;name&quot;&lt;/a&gt;: @&quot;soliloquy&quot;, @&quot;age&quot;: @26},&lt;br/&gt;@&lt;a&gt;{@&quot;name&quot;&lt;/a&gt;: @&quot;ptl&quot;, @&quot;age&quot;: @21},&lt;br/&gt;];&lt;br/&gt;[arr.rac_sequence.signal subscribeNext:^(id x) {&lt;br/&gt;// è¿ç”¨RACéå†å­—å…¸ï¼Œxï¼šå­—å…¸&lt;br/&gt;Model&lt;/em&gt; item = [Model modelWithDict:x];&lt;br/&gt;[array addObject:item];&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;}];&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;
`å…¶ä»–ç”¨æ³•`&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;NSArray *arr = @[
                 @{@&quot;name&quot;: @&quot;soliloquy&quot;, @&quot;age&quot;: @26},
                 @{@&quot;name&quot;: @&quot;ptl&quot;, @&quot;age&quot;: @21},
                 ];

NSArray *ay = [[arr.rac_sequence map:^id(id value) {
    
    return [Persion modelWithDict: value];
    
}] array];

NSLog(@&quot;ay: %@&quot;, ay);

for (Persion *model in ay) {
    NSLog(@&quot;%@---%zd&quot;, model.name, model.age);
}&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;æ‰“å°å¦‚ä¸‹&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;2017-11-29 12:18:24.024939+0800 MVVM-Demo[1631:553078] ay: (&lt;br/&gt;&quot;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;
* #####RACCommand

`RACCommand `RAC ä¸­ç”¨äºå¤„ç†äº‹ä»¶çš„ç±»ï¼Œå¯ä»¥æŠŠäº‹ä»¶å¦‚ä½•å¤„ç†,äº‹ä»¶ä¸­çš„æ•°æ®å¦‚ä½•ä¼ é€’ï¼ŒåŒ…è£…åˆ°è¿™ä¸ªç±»ä¸­ï¼Œä»–å¯ä»¥å¾ˆæ–¹ä¾¿çš„ç›‘æ§äº‹ä»¶çš„æ‰§è¡Œè¿‡ç¨‹ã€‚
æ¯”å¦‚ï¼šç›‘å¬æŒ‰é’®ç‚¹å‡»ï¼Œç½‘ç»œè¯·æ±‚

`RACCommandç®€å•ä½¿ç”¨`
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸€ã€RACCommandä½¿ç”¨æ­¥éª¤:&lt;br/&gt;1.åˆ›å»ºå‘½ä»¤ initWithSignalBlock:(RACSignal * (^)(id input))signalBlock&lt;br/&gt;2.åœ¨signalBlockä¸­ï¼Œåˆ›å»ºRACSignalï¼Œå¹¶ä¸”ä½œä¸ºsignalBlockçš„è¿”å›å€¼&lt;br/&gt;3.æ‰§è¡Œå‘½ä»¤ - (RACSignal *)execute:(id)input&lt;/p&gt;
&lt;p&gt;äºŒã€RACCommandä½¿ç”¨æ³¨æ„:&lt;br/&gt;1.signalBlockå¿…é¡»è¦è¿”å›ä¸€ä¸ªä¿¡å·ï¼Œä¸èƒ½ä¼ nil.&lt;br/&gt;2.å¦‚æœä¸æƒ³è¦ä¼ é€’ä¿¡å·ï¼Œç›´æ¥åˆ›å»ºç©ºçš„ä¿¡å·[RACSignal empty];&lt;br/&gt;3.RACCommandä¸­ä¿¡å·å¦‚æœæ•°æ®ä¼ é€’å®Œï¼Œå¿…é¡»è°ƒç”¨[subscriber sendCompleted]ï¼Œè¿™æ—¶å‘½ä»¤æ‰ä¼šæ‰§è¡Œå®Œæ¯•ï¼Œå¦åˆ™æ°¸è¿œå¤„äºæ‰§è¡Œä¸­ã€‚&lt;br/&gt;4.RACCommandéœ€è¦è¢«å¼ºå¼•ç”¨ï¼Œå¦åˆ™æ¥æ”¶ä¸åˆ°RACCommandä¸­çš„ä¿¡å·ï¼Œå› æ­¤RACCommandä¸­çš„ä¿¡å·æ˜¯å»¶è¿Ÿå‘é€çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‰ã€RACCommandè®¾è®¡æ€æƒ³&lt;br/&gt;1.åœ¨RACå¼€å‘ä¸­ï¼Œé€šå¸¸ä¼šæŠŠç½‘ç»œè¯·æ±‚å°è£…åˆ°RACCommandï¼Œç›´æ¥æ‰§è¡ŒæŸä¸ªRACCommandå°±èƒ½å‘é€è¯·æ±‚ã€‚&lt;br/&gt;2.å½“RACCommandå†…éƒ¨è¯·æ±‚åˆ°æ•°æ®çš„æ—¶å€™ï¼Œéœ€è¦æŠŠè¯·æ±‚çš„æ•°æ®ä¼ é€’ç»™å¤–ç•Œï¼Œè¿™æ—¶å€™å°±éœ€è¦é€šè¿‡signalBlockè¿”å›çš„ä¿¡å·ä¼ é€’äº†ã€‚&lt;/p&gt;
&lt;p&gt;å››ã€å¦‚ä½•æ‹¿åˆ°RACCommandä¸­è¿”å›ä¿¡å·å‘å‡ºçš„æ•°æ®ã€‚&lt;br/&gt;1.RACCommandæœ‰ä¸ªæ‰§è¡Œä¿¡å·æºexecutionSignalsï¼Œè¿™ä¸ªæ˜¯signal of signals(ä¿¡å·çš„ä¿¡å·),æ„æ€æ˜¯ä¿¡å·å‘å‡ºçš„æ•°æ®æ˜¯ä¿¡å·ï¼Œä¸æ˜¯æ™®é€šçš„ç±»å‹ã€‚&lt;br/&gt;2.è®¢é˜…executionSignalså°±èƒ½æ‹¿åˆ°RACCommandä¸­è¿”å›çš„ä¿¡å·ï¼Œç„¶åè®¢é˜…signalBlockè¿”å›çš„ä¿¡å·ï¼Œå°±èƒ½è·å–å‘å‡ºçš„å€¼ã€‚&lt;/p&gt;
&lt;p&gt;äº”ã€ç›‘å¬å½“å‰å‘½ä»¤æ˜¯å¦æ­£åœ¨æ‰§è¡Œexecuting&lt;br/&gt;å…­ã€ä½¿ç”¨åœºæ™¯, ç›‘å¬æŒ‰é’®ç‚¹å‡»ï¼Œç½‘ç»œè¯·æ±‚&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;// 1.åˆ›å»ºå‘½ä»¤ å¼ºå¼•ç”¨å‘½ä»¤ï¼Œä¸è¦è¢«é”€æ¯ï¼Œå¦åˆ™æ¥æ”¶ä¸åˆ°æ•°æ®&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;self.command = [[RACCommand alloc] initWithSignalBlock:^RACSignal *(id input) {&lt;br/&gt;// åˆ›å»ºç©ºä¿¡å·,å¿…é¡»è¿”å›ä¿¡å·&lt;br/&gt;// return [RACSignal empty];&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;    // 2.åˆ›å»ºä¿¡å·,ç”¨æ¥ä¼ é€’æ•°æ®
    return [RACSignal createSignal:^RACDisposable *(id&amp;lt;RACSubscriber&amp;gt; subscriber) {
        
        NSArray *arr = @[@&quot;123&quot;,@&quot;321&quot;, @&quot;132&quot;, @&quot;312&quot;];
        [subscriber sendNext:arr];
        // æ³¨æ„ï¼šæ•°æ®ä¼ é€’å®Œï¼Œæœ€å¥½è°ƒç”¨sendCompletedï¼Œè¿™æ—¶å‘½ä»¤æ‰æ‰§è¡Œå®Œæ¯•ã€‚
        [subscriber sendCompleted];
        return nil;
    }];
    
}];

// 3.è®¢é˜…RACCommandä¸­çš„ä¿¡å·
[command.executionSignals subscribeNext:^(id x) {

    [x subscribeNext:^(id x) {

        NSLog(@&quot;æ•°æ®ä¸ºï¼š %@&quot;,x);
    }];

}];&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;```&lt;/p&gt;
&lt;p&gt;æ‰“å°å¦‚ä¸‹&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;2017-11-29 12:41:50.364091+0800 MVVM-Demo[1844:622694] æ•°æ®ä¸ºï¼š (
    123,
    321,
    132,
    312
)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;RACé«˜çº§ç”¨æ³•&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt; // switchToLatest:ç”¨äºsignal of signalsï¼Œè·å–signal of signalså‘å‡ºçš„æœ€æ–°ä¿¡å·,ä¹Ÿå°±æ˜¯å¯ä»¥ç›´æ¥æ‹¿åˆ°RACCommandä¸­çš„ä¿¡å·
    [self.command.executionSignals.switchToLatest subscribeNext:^(id x) {
        
        NSLog(@&quot;x: %@&quot;,x);
    }];
    
    // 4.ç›‘å¬å‘½ä»¤æ˜¯å¦æ‰§è¡Œå®Œæ¯•,é»˜è®¤ä¼šæ¥ä¸€æ¬¡ï¼Œå¯ä»¥ç›´æ¥è·³è¿‡ï¼Œskipè¡¨ç¤ºè·³è¿‡ç¬¬ä¸€æ¬¡ä¿¡å·ã€‚
    [[command.executing skip:1] subscribeNext:^(id x) {
        
        if ([x boolValue] == YES) {
            NSLog(@&quot;æ­£åœ¨æ‰§è¡Œ&quot;);
            
        }else{
            NSLog(@&quot;æ‰§è¡Œå®Œæˆ&quot;);
        }
        
    }];
   // 5.æ‰§è¡Œå‘½ä»¤
    [self.conmmand execute:nil];
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;
&lt;h5 id=&quot;racmulticastconnection&quot;&gt;RACMulticastConnection&lt;/h5&gt;
&lt;code&gt;RACMulticastConnection&lt;/code&gt;ç”¨äºå½“ä¸€ä¸ªä¿¡å·è¢«å¤šä¸ªè®¢é˜…æ—¶ï¼Œä¸ºäº†ä¿è¯åˆ›å»ºä¿¡å·æ—¶é¿å…å¤šæ¬¡è°ƒç”¨åˆ›å»ºä¿¡å·ä¸­çš„blocké€ æˆå¤šæ¬¡å‘ç”Ÿæ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªè¯¥ç±»å¤„ç†ã€‚&lt;br/&gt;&lt;code&gt;RACMulticastConnection&lt;/code&gt;é€šè¿‡&lt;code&gt;RACSignal&lt;/code&gt;çš„-publishæˆ–è€…-muticast:æ–¹æ³•åˆ›å»º.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;######RACMulticastConnectionä½¿ç”¨æ­¥éª¤:&lt;/p&gt;
&lt;ul readability=&quot;4&quot;&gt;&lt;li&gt;åˆ›å»ºä¿¡å·&lt;br/&gt;&lt;code&gt;+ (RACSignal *)createSignal:(RACDisposable * (^)(id&amp;lt;RACSubscriber&amp;gt; subscriber))didSubscribe&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;åˆ›å»ºè¿æ¥&lt;br/&gt;&lt;code&gt;RACMulticastConnection *connect = [signal publish];&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;è®¢é˜…ä¿¡å·,æ³¨æ„ï¼šè®¢é˜…çš„ä¸åœ¨æ˜¯ä¹‹å‰çš„ä¿¡å·ï¼Œè€Œæ˜¯è¿æ¥çš„ä¿¡å·ã€‚ &lt;code&gt;[connect.signal subscribeNext:nextBlock];&lt;/code&gt;&lt;/li&gt;
&lt;li readability=&quot;11&quot;&gt;
&lt;p&gt;è¿æ¥&lt;br/&gt;&lt;code&gt;[connect connect];&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;// 1.åˆ›å»ºè¯·æ±‚ä¿¡å·
RACSignal *signal1 = [RACSignal createSignal:^RACDisposable *(id&amp;lt;RACSubscriber&amp;gt; subscriber) {


    NSLog(@&quot;å‘é€æ•°æ®&quot;);

    return nil;
}];
// 2.è®¢é˜…ä¿¡å·
[signal1 subscribeNext:^(id x) {

    NSLog(@&quot;æ¥æ”¶æ•°æ®&quot;);

}];
// 2.è®¢é˜…ä¿¡å·
[signal1 subscribeNext:^(id x) {

    NSLog(@&quot;æ¥æ”¶æ•°æ®&quot;);

}];

// 3.è¿è¡Œç»“æœï¼Œä¼šæ‰§è¡Œä¸¤éå‘é€è¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯æ¯æ¬¡è®¢é˜…éƒ½ä¼šå‘é€ä¸€æ¬¡è¯·æ±‚


// RACMulticastConnection:è§£å†³é‡å¤è¯·æ±‚é—®é¢˜
// 1.åˆ›å»ºä¿¡å·
RACSignal *signal = [RACSignal createSignal:^RACDisposable *(id&amp;lt;RACSubscriber&amp;gt; subscriber) {


    NSLog(@&quot;å‘é€è¯·æ±‚&quot;);
    [subscriber sendNext:@&quot;æˆ‘æ˜¯æ•°æ®æº&quot;];

    return nil;
}];

// 2.åˆ›å»ºè¿æ¥
RACMulticastConnection *connect = [signal publish];

// 3.è®¢é˜…ä¿¡å·ï¼Œ
// æ³¨æ„ï¼šè®¢é˜…ä¿¡å·ï¼Œä¹Ÿä¸èƒ½æ¿€æ´»ä¿¡å·ï¼Œåªæ˜¯ä¿å­˜è®¢é˜…è€…åˆ°æ•°ç»„ï¼Œå¿…é¡»é€šè¿‡è¿æ¥,å½“è°ƒç”¨è¿æ¥ï¼Œå°±ä¼šä¸€æ¬¡æ€§è°ƒç”¨æ‰€æœ‰è®¢é˜…è€…çš„sendNext:
[connect.signal subscribeNext:^(id x) {

    NSLog(@&quot;è®¢é˜…è€…ä¸€:%@&quot;, x);

}];

[connect.signal subscribeNext:^(id x) {

    NSLog(@&quot;è®¢é˜…è€…äºŒ:%@&quot;, x);

}];

// 4.è¿æ¥,æ¿€æ´»ä¿¡å·
[connect connect];&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ‰“å°å¦‚ä¸‹&lt;br/&gt;```&lt;br/&gt;2017-11-29 13:13:40.735831+0800 MVVM-Demo[2088:721509] å‘é€æ•°æ®&lt;br/&gt;2017-11-29 13:13:40.736024+0800 MVVM-Demo[2088:721509] å‘é€æ•°æ®&lt;br/&gt;2017-11-29 13:13:40.736550+0800 MVVM-Demo[2088:721509] å‘é€è¯·æ±‚&lt;br/&gt;2017-11-29 13:13:40.736688+0800 MVVM-Demo[2088:721509] è®¢é˜…è€…ä¸€:æˆ‘æ˜¯æ•°æ®æº&lt;br/&gt;2017-11-29 13:13:40.736777+0800 MVVM-Demo[2088:721509] è®¢é˜…è€…äºŒ:æˆ‘æ˜¯æ•°æ®æº&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;``&lt;code&gt;å¯ä»¥çœ‹å‡º&lt;/code&gt;RACSignal &lt;code&gt;è¢«è°ƒäº†ä¸¤æ¬¡ï¼Œæ¯æ¬¡è®¢é˜…ä¸€æ¬¡éƒ½ä¼šå‘é€è¯·æ±‚ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´å¤šæ¬¡è¯·æ±‚ï¼Œè€Œä½¿ç”¨&lt;/code&gt;RACMulticastConnection `å°±åªæœ‰åœ¨åˆ›å»ºä¿¡å·æ—¶è°ƒäº†ä¸€æ¬¡ã€‚&lt;/p&gt;
&lt;h6 id=&quot;racmulticastconnectionåº•å±‚åŸç†&quot;&gt;RACMulticastConnectionåº•å±‚åŸç†:&lt;/h6&gt;
&lt;ul&gt;&lt;li&gt;åˆ›å»ºconnect&lt;br/&gt;&lt;code&gt;connect.sourceSignal -&amp;gt; RACSignal(åŸå§‹ä¿¡å·) connect.signal -&amp;gt; RACSubject&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;è®¢é˜…connect.signalï¼Œä¼šè°ƒç”¨RACSubjectçš„subscribeNextï¼Œåˆ›å»ºè®¢é˜…è€…ï¼Œè€Œä¸”æŠŠè®¢é˜…è€…ä¿å­˜èµ·æ¥ï¼Œä¸ä¼šæ‰§è¡Œblockã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[connect connect]&lt;/code&gt;å†…éƒ¨ä¼šè®¢é˜…RACSignal(åŸå§‹ä¿¡å·)ï¼Œå¹¶ä¸”è®¢é˜…è€…æ˜¯&lt;code&gt;RACSubject&lt;/code&gt;&lt;br/&gt;&lt;code&gt;è®¢é˜…åŸå§‹ä¿¡å·ï¼Œå°±ä¼šè°ƒç”¨åŸå§‹ä¿¡å·ä¸­çš„didSubscribe&lt;/code&gt;&lt;br/&gt;&lt;code&gt;didSubscribeï¼Œæ‹¿åˆ°è®¢é˜…è€…è°ƒç”¨sendNextï¼Œå…¶å®æ˜¯è°ƒç”¨RACSubjectçš„sendNext&lt;/code&gt;&lt;br/&gt;*&lt;code&gt;RACSubject&lt;/code&gt;çš„&lt;code&gt;sendNext&lt;/code&gt;,ä¼šéå†RACSubjectæ‰€æœ‰è®¢é˜…è€…å‘é€ä¿¡å·ã€‚&lt;br/&gt;&lt;code&gt;æ‹¿åˆ°ç¬¬äºŒæ­¥æ‰€æœ‰çš„è®¢é˜…è€…ï¼Œè°ƒç”¨ä»–ä»¬çš„nextBlock&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;</description>
<pubDate>Wed, 29 Nov 2017 06:57:00 +0000</pubDate>
<dc:creator>soliloquy.local</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/soliloquy/p/7920551.html</dc:identifier>
</item>
<item>
<title>react native android6+æ‹ç…§é—ªé€€æˆ–é‡å¯çš„è§£å†³æ–¹æ¡ˆ - ç‹ç£Šçš„åšå®¢</title>
<link>http://www.cnblogs.com/vipstone/p/7920412.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/vipstone/p/7920412.html</guid>
<description>&lt;h2&gt;Â &lt;/h2&gt;
&lt;h2&gt;&lt;span&gt;å‰è¨€&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;android 6+æƒé™ä½¿ç”¨çš„æ—¶å€™éœ€è¦åŠ¨æ€ç”³è¯·ï¼Œé‚£ä¹ˆåœ¨ä½¿ç”¨rnçš„æ—¶å€™è¦æ€ä¹ˆå¤„ç†æ‹ç…§æƒé™é—®é¢˜å‘¢ï¼Ÿæœ¬æ–‡æä¾›çš„æ˜¯ä¸€æ½å­rnæ“ä½œç›¸å†Œã€æ‹ç…§çš„è§£å†³æ–¹æ¡ˆï¼Œè¯·çœ‹æ­£æ–‡çš„&lt;span&gt;&lt;strong&gt;æé«˜ç­&lt;/strong&gt;&lt;/span&gt;éƒ¨åˆ†ã€‚&lt;/span&gt;&lt;/p&gt;

&lt;h2&gt;&lt;span&gt;è§£å†³æ­¥éª¤&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;1ã€AndroidManifest.xmlè®¾ç½®æ‹ç…§æƒé™ï¼š&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;uses-permission &lt;/span&gt;&lt;span&gt;android:name&lt;/span&gt;&lt;span&gt;=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;uses-permission &lt;/span&gt;&lt;span&gt;android:name&lt;/span&gt;&lt;span&gt;=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;uses-permission &lt;/span&gt;&lt;span&gt;android:name&lt;/span&gt;&lt;span&gt;=&quot;android.permission.CAMERA&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;2ã€é…ç½®build.gradleï¼š&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;è®¾ç½®defaultConfigé‡Œé¢çš„targetSdkVersion&amp;gt;=23.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;3ã€åœ¨éœ€è¦ä½¿ç”¨çš„åœ°æ–¹æˆ–è€…ç¨‹åºå¯åŠ¨ä¹‹åçš„ä¸»é¡µé¢çš„æ„é€ ä¸­ç”³è¯·ç›¸æœºæƒé™ï¼Œä»£ç å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;async requestCameraPermission() {
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (Platform.OS == 'ios') &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;ç”³è¯·ç›¸æœºæƒé™&lt;/span&gt;
    &lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
        const granted &lt;/span&gt;=&lt;span&gt; await PermissionsAndroid.request(PermissionsAndroid.PERMISSIONS.CAMERA, {
            title: &lt;/span&gt;'ç”³è¯·æ‘„åƒå¤´æƒé™'&lt;span&gt;,
            message: &lt;/span&gt;'ä¸€ä¸ªå¾ˆç‰›é€¼çš„åº”ç”¨æƒ³å€Ÿç”¨ä½ çš„æ‘„åƒå¤´'&lt;span&gt;
        });
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (granted ===&lt;span&gt; PermissionsAndroid.RESULTS.GRANTED) {
            console.log(&lt;/span&gt;'ç°åœ¨ä½ è·å¾—æ‘„åƒå¤´æƒé™äº†'&lt;span&gt;);
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
        } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
            console.log(&lt;/span&gt;'ç”¨æˆ·å¹¶ä¸å±Œä½ '&lt;span&gt;);
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
        }
    } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (err) {
        console.warn(err);
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ‹ç…§ä¹‹å‰è°ƒç”¨ä¸Šé¢çš„æ–¹æ³•ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;this&lt;/span&gt;.requestCameraPermission(); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;ç”³è¯·ç›¸æœºæƒé™&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Â &lt;/h2&gt;
&lt;h2&gt;æé«˜ç­&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;å¤šå›¾é€‰æ‹©ã€å›¾ç‰‡è£å‰ª(æ”¯æŒad/ioså›¾ç‰‡ä¸ªæ•°æ§åˆ¶)æ¨èä½¿ç”¨&lt;a href=&quot;https://github.com/syanbo/react-native-syan-image-picker&quot; target=&quot;_blank&quot;&gt;react-native-syan-image-picker&lt;/a&gt;ï¼Œä½¿ç”¨æ•™ç¨‹æŸ¥çœ‹&lt;a href=&quot;http://www.cnblogs.com/vipstone/p/7804964.html&quot; target=&quot;_blank&quot;&gt;ã€Šreact-nativeå¤šå›¾é€‰æ‹©ã€å›¾ç‰‡è£å‰ª(æ”¯æŒad/ioså›¾ç‰‡ä¸ªæ•°æ§åˆ¶)ã€‹&lt;/a&gt;ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;&lt;span&gt;å°æŠ€å·§ï¼šreact-native-syan-image-picker ç‰ˆæœ¬V0.0.5 å®‰å“6+ æ‹ç…§é—®é¢˜æœ‰ç‚¹é—®é¢˜ï¼Œæˆ‘å·²ç»pull requestï¼Œä½œè€…å·²ç»åˆå¹¶ï¼Œç¨åæµ‹è¯•é—®é¢˜ä¹‹åï¼Œå³å¯å‘å¸ƒï¼Œå¦‚æœç€æ€¥ä½¿ç”¨è´´å‡ºè§£å†³ä»£ç ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;1.ä¿®æ”¹build.gradleå¦‚å›¾ï¼š&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/172074/201711/172074-20171129144641003-642863156.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;2ã€ä¿®æ”¹RNSyanImagePickerModule.javaæ›´æ–°2.1.7é…ç½®ï¼Œä»£ç å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
.openGallery(PictureMimeType.ofImage())&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å…¨éƒ¨.PictureMimeType.ofAll()ã€å›¾ç‰‡.ofImage()ã€è§†é¢‘.ofVideo()ã€éŸ³é¢‘.ofAudio()&lt;/span&gt;
.maxSelectNum(imageCount)&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æœ€å¤§å›¾ç‰‡é€‰æ‹©æ•°é‡ int&lt;/span&gt;
.minSelectNum(1)&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æœ€å°é€‰æ‹©æ•°é‡ int&lt;/span&gt;
.imageSpanCount(4)&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ¯è¡Œæ˜¾ç¤ºä¸ªæ•° int&lt;/span&gt;
.selectionMode(modeValue)&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¤šé€‰ or å•é€‰ PictureConfig.MULTIPLE or PictureConfig.SINGLE&lt;/span&gt;
.previewImage(&lt;span&gt;true&lt;/span&gt;)&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ˜¯å¦å¯é¢„è§ˆå›¾ç‰‡ true or false&lt;/span&gt;
.previewVideo(&lt;span&gt;false&lt;/span&gt;)&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ˜¯å¦å¯é¢„è§ˆè§†é¢‘ true or false&lt;/span&gt;
.enablePreviewAudio(&lt;span&gt;false&lt;/span&gt;) &lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ˜¯å¦å¯æ’­æ”¾éŸ³é¢‘ true or false&lt;/span&gt;
.isCamera(isCamera)&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ˜¯å¦æ˜¾ç¤ºæ‹ç…§æŒ‰é’® true or false&lt;/span&gt;
.imageFormat(PictureMimeType.PNG)&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ‹ç…§ä¿å­˜å›¾ç‰‡æ ¼å¼åç¼€,é»˜è®¤jpeg&lt;/span&gt;
.isZoomAnim(&lt;span&gt;true&lt;/span&gt;)&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å›¾ç‰‡åˆ—è¡¨ç‚¹å‡» ç¼©æ”¾æ•ˆæœ é»˜è®¤true&lt;/span&gt;
.sizeMultiplier(0.5f)&lt;span&gt;//&lt;/span&gt;&lt;span&gt; glide åŠ è½½å›¾ç‰‡å¤§å° 0~1ä¹‹é—´ å¦‚è®¾ç½® .glideOverride()æ— æ•ˆ&lt;/span&gt;
.enableCrop(isCrop)&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ˜¯å¦è£å‰ª true or false&lt;/span&gt;
.compress(&lt;span&gt;true&lt;/span&gt;)&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ˜¯å¦å‹ç¼© true or false&lt;/span&gt;
.glideOverride(160, 160)&lt;span&gt;//&lt;/span&gt;&lt;span&gt; int glide åŠ è½½å®½é«˜ï¼Œè¶Šå°å›¾ç‰‡åˆ—è¡¨è¶Šæµç•…ï¼Œä½†ä¼šå½±å“åˆ—è¡¨å›¾ç‰‡æµè§ˆçš„æ¸…æ™°åº¦&lt;/span&gt;
.withAspectRatio(CropW, CropH)&lt;span&gt;//&lt;/span&gt;&lt;span&gt; int è£å‰ªæ¯”ä¾‹ å¦‚16:9 3:2 3:4 1:1 å¯è‡ªå®šä¹‰&lt;/span&gt;
.hideBottomControls(isCrop)&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ˜¯å¦æ˜¾ç¤ºuCropå·¥å…·æ ï¼Œé»˜è®¤ä¸æ˜¾ç¤º true or false&lt;/span&gt;
.isGif(isGif)&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ˜¯å¦æ˜¾ç¤ºgifå›¾ç‰‡ true or false&lt;/span&gt;
.freeStyleCropEnabled(&lt;span&gt;true&lt;/span&gt;)&lt;span&gt;//&lt;/span&gt;&lt;span&gt; è£å‰ªæ¡†æ˜¯å¦å¯æ‹–æ‹½ true or false&lt;/span&gt;
.circleDimmedLayer(showCropCircle)&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ˜¯å¦åœ†å½¢è£å‰ª true or false&lt;/span&gt;
.showCropFrame(showCropFrame)&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ˜¯å¦æ˜¾ç¤ºè£å‰ªçŸ©å½¢è¾¹æ¡† åœ†å½¢è£å‰ªæ—¶å»ºè®®è®¾ä¸ºfalse   true or false&lt;/span&gt;
.showCropGrid(showCropGrid)&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ˜¯å¦æ˜¾ç¤ºè£å‰ªçŸ©å½¢ç½‘æ ¼ åœ†å½¢è£å‰ªæ—¶å»ºè®®è®¾ä¸ºfalse    true or false&lt;/span&gt;
.openClickSound(&lt;span&gt;false&lt;/span&gt;)&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ˜¯å¦å¼€å¯ç‚¹å‡»å£°éŸ³ true or false&lt;/span&gt;
.cropCompressQuality(90)&lt;span&gt;//&lt;/span&gt;&lt;span&gt; è£å‰ªå‹ç¼©è´¨é‡ é»˜è®¤90 int&lt;/span&gt;
.minimumCompressSize(100)&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å°äº100kbçš„å›¾ç‰‡ä¸å‹ç¼© &lt;/span&gt;
.synOrAsy(&lt;span&gt;true&lt;/span&gt;)&lt;span&gt;//&lt;/span&gt;&lt;span&gt;åŒæ­¥trueæˆ–å¼‚æ­¥false å‹ç¼© é»˜è®¤åŒæ­¥&lt;/span&gt;
.rotateEnabled(&lt;span&gt;true&lt;/span&gt;) &lt;span&gt;//&lt;/span&gt;&lt;span&gt; è£å‰ªæ˜¯å¦å¯æ—‹è½¬å›¾ç‰‡ true or false&lt;/span&gt;
.scaleEnabled(&lt;span&gt;true&lt;/span&gt;)&lt;span&gt;//&lt;/span&gt;&lt;span&gt; è£å‰ªæ˜¯å¦å¯æ”¾å¤§ç¼©å°å›¾ç‰‡ true or false&lt;/span&gt;
.videoQuality(0)&lt;span&gt;//&lt;/span&gt;&lt;span&gt; è§†é¢‘å½•åˆ¶è´¨é‡ 0 or 1 int&lt;/span&gt;
.videoMaxSecond(15)&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ˜¾ç¤ºå¤šå°‘ç§’ä»¥å†…çš„è§†é¢‘oréŸ³é¢‘ä¹Ÿå¯é€‚ç”¨ int &lt;/span&gt;
.videoMinSecond(10)&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ˜¾ç¤ºå¤šå°‘ç§’ä»¥å†…çš„è§†é¢‘oréŸ³é¢‘ä¹Ÿå¯é€‚ç”¨ int &lt;/span&gt;
.recordVideoSecond(60)&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è§†é¢‘ç§’æ•°å½•åˆ¶ é»˜è®¤60s int&lt;/span&gt;
.forResult(PictureConfig.CHOOSE_REQUEST);&lt;span&gt;//&lt;/span&gt;&lt;span&gt;ç»“æœå›è°ƒonActivityResult code &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ•ˆæœå¦‚å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/172074/201711/172074-20171109092913184-583819138.gif&quot; alt=&quot;&quot;/&gt;Â  Â  Â Â &lt;img src=&quot;http://images2017.cnblogs.com/blog/172074/201711/172074-20171109092923981-1603381299.gif&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;

</description>
<pubDate>Wed, 29 Nov 2017 06:37:00 +0000</pubDate>
<dc:creator>ç‹ç£Šçš„åšå®¢</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/vipstone/p/7920412.html</dc:identifier>
</item>
<item>
<title>JSç»„ä»¶ç³»åˆ—â€”â€”Gojsç»„ä»¶ï¼Œå‰ç«¯å›¾å½¢åŒ–æ’ä»¶ä¹‹åˆ©å™¨ - æ‡’å¾—å®‰åˆ†</title>
<link>http://www.cnblogs.com/landeanfen/p/7910530.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/landeanfen/p/7910530.html</guid>
<description>&lt;pre&gt;
&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html&amp;gt;
&amp;lt;head&amp;gt;
&amp;lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&amp;gt;
&amp;lt;title&amp;gt;Draggable Link&amp;lt;/title&amp;gt;
&amp;lt;meta name=&quot;description&quot; content=&quot;Drag a link to reconnect it. Nodes have custom Adornments for selection, resizing, and reshaping.&quot; /&amp;gt;
&amp;lt;!-- Copyright 1998-2017 by Northwoods Software Corporation. --&amp;gt;
&amp;lt;meta charset=&quot;UTF-8&quot;&amp;gt;
&amp;lt;script src=&quot;../../gojs/go-debug.js&quot;&amp;gt;&amp;lt;/script&amp;gt;
&amp;lt;script id=&quot;code&quot;&amp;gt;
  &lt;span&gt;function&lt;/span&gt;&lt;span&gt; init() {
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (window.goSamples) goSamples();  &lt;span&gt;//&lt;/span&gt;&lt;span&gt; init for these samples -- you don't need to call this&lt;/span&gt;
    &lt;span&gt;var&lt;/span&gt; objGo = go.GraphObject.make;  &lt;span&gt;//&lt;/span&gt;&lt;span&gt; for conciseness in defining templates&lt;/span&gt;
&lt;span&gt;
    myDiagram &lt;/span&gt;=&lt;span&gt;
      objGo(go.Diagram, &lt;/span&gt;&quot;myDiagramDiv&quot;,  &lt;span&gt;//&lt;/span&gt;&lt;span&gt; must name or refer to the DIV HTML element&lt;/span&gt;
&lt;span&gt;        {
          grid: objGo(go.Panel, &lt;/span&gt;&quot;Grid&quot;&lt;span&gt;,
                  objGo(go.Shape, &lt;/span&gt;&quot;LineH&quot;, { stroke: &quot;lightgray&quot;, strokeWidth: 0.5&lt;span&gt; }),
                  objGo(go.Shape, &lt;/span&gt;&quot;LineH&quot;, { stroke: &quot;gray&quot;, strokeWidth: 0.5, interval: 10&lt;span&gt; }),
                  objGo(go.Shape, &lt;/span&gt;&quot;LineV&quot;, { stroke: &quot;lightgray&quot;, strokeWidth: 0.5&lt;span&gt; }),
                  objGo(go.Shape, &lt;/span&gt;&quot;LineV&quot;, { stroke: &quot;gray&quot;, strokeWidth: 0.5, interval: 10&lt;span&gt; })
                ),
          allowDrop: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;,  &lt;span&gt;//&lt;/span&gt;&lt;span&gt; must be true to accept drops from the Palette&lt;/span&gt;
          &quot;draggingTool.dragsLink&quot;: &lt;span&gt;true&lt;/span&gt;&lt;span&gt;,
          &lt;/span&gt;&quot;draggingTool.isGridSnapEnabled&quot;: &lt;span&gt;true&lt;/span&gt;&lt;span&gt;,
          &lt;/span&gt;&quot;linkingTool.isUnconnectedLinkValid&quot;: &lt;span&gt;true&lt;/span&gt;&lt;span&gt;,
          &lt;/span&gt;&quot;linkingTool.portGravity&quot;: 20&lt;span&gt;,
          &lt;/span&gt;&quot;relinkingTool.isUnconnectedLinkValid&quot;: &lt;span&gt;true&lt;/span&gt;&lt;span&gt;,
          &lt;/span&gt;&quot;relinkingTool.portGravity&quot;: 20&lt;span&gt;,
          &lt;/span&gt;&quot;relinkingTool.fromHandleArchetype&quot;&lt;span&gt;:
            objGo(go.Shape, &lt;/span&gt;&quot;Diamond&quot;, { segmentIndex: 0, cursor: &quot;pointer&quot;, desiredSize: &lt;span&gt;new&lt;/span&gt; go.Size(8, 8), fill: &quot;tomato&quot;, stroke: &quot;darkred&quot;&lt;span&gt; }),
          &lt;/span&gt;&quot;relinkingTool.toHandleArchetype&quot;&lt;span&gt;:
            objGo(go.Shape, &lt;/span&gt;&quot;Diamond&quot;, { segmentIndex: -1, cursor: &quot;pointer&quot;, desiredSize: &lt;span&gt;new&lt;/span&gt; go.Size(8, 8), fill: &quot;darkred&quot;, stroke: &quot;tomato&quot;&lt;span&gt; }),
          &lt;/span&gt;&quot;linkReshapingTool.handleArchetype&quot;&lt;span&gt;:
            objGo(go.Shape, &lt;/span&gt;&quot;Diamond&quot;, { desiredSize: &lt;span&gt;new&lt;/span&gt; go.Size(7, 7), fill: &quot;lightblue&quot;, stroke: &quot;deepskyblue&quot;&lt;span&gt; }),
          rotatingTool: objGo(TopRotatingTool),  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; defined below&lt;/span&gt;
          &quot;rotatingTool.snapAngleMultiple&quot;: 15&lt;span&gt;,
          &lt;/span&gt;&quot;rotatingTool.snapAngleEpsilon&quot;: 15&lt;span&gt;,
          &lt;/span&gt;&quot;undoManager.isEnabled&quot;: &lt;span&gt;true&lt;/span&gt;&lt;span&gt;
        });

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; when the document is modified, add a &quot;*&quot; to the title and enable the &quot;Save&quot; button&lt;/span&gt;
    myDiagram.addDiagramListener(&quot;Modified&quot;, &lt;span&gt;function&lt;/span&gt;&lt;span&gt;(e) {
      &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; button = document.getElementById(&quot;SaveButton&quot;&lt;span&gt;);
      &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (button) button.disabled = !&lt;span&gt;myDiagram.isModified;
      &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; idx = document.title.indexOf(&quot;*&quot;&lt;span&gt;);
      &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (myDiagram.isModified) {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (idx &amp;lt; 0) document.title += &quot;*&quot;&lt;span&gt;;
      } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (idx &amp;gt;= 0) document.title = document.title.substr(0&lt;span&gt;, idx);
      }
    });

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Define a function for creating a &quot;port&quot; that is normally transparent.&lt;/span&gt;
    &lt;span&gt;//&lt;/span&gt;&lt;span&gt; The &quot;name&quot; is used as the GraphObject.portId, the &quot;spot&quot; is used to control how links connect&lt;/span&gt;
    &lt;span&gt;//&lt;/span&gt;&lt;span&gt; and where the port is positioned on the node, and the boolean &quot;output&quot; and &quot;input&quot; arguments&lt;/span&gt;
    &lt;span&gt;//&lt;/span&gt;&lt;span&gt; control whether the user can draw links from or to the port.&lt;/span&gt;
    &lt;span&gt;function&lt;/span&gt;&lt;span&gt; makePort(name, spot, output, input) {
      &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; the port is basically just a small transparent square&lt;/span&gt;
      &lt;span&gt;return&lt;/span&gt; objGo(go.Shape, &quot;Circle&quot;&lt;span&gt;,
               {
                  fill: &lt;/span&gt;&lt;span&gt;null&lt;/span&gt;,  &lt;span&gt;//&lt;/span&gt;&lt;span&gt; not seen, by default; set to a translucent gray by showSmallPorts, defined below&lt;/span&gt;
                  stroke: &lt;span&gt;null&lt;/span&gt;&lt;span&gt;,
                  desiredSize: &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; go.Size(7, 7&lt;span&gt;),
                  alignment: spot,  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; align the port on the main Shape&lt;/span&gt;
                  alignmentFocus: spot,  &lt;span&gt;//&lt;/span&gt;&lt;span&gt; just inside the Shape&lt;/span&gt;
                  portId: name,  &lt;span&gt;//&lt;/span&gt;&lt;span&gt; declare this object to be a &quot;port&quot;&lt;/span&gt;
                  fromSpot: spot, toSpot: spot,  &lt;span&gt;//&lt;/span&gt;&lt;span&gt; declare where links may connect at this port&lt;/span&gt;
                  fromLinkable: output, toLinkable: input,  &lt;span&gt;//&lt;/span&gt;&lt;span&gt; declare whether the user may draw links to/from here&lt;/span&gt;
                  cursor: &quot;pointer&quot;  &lt;span&gt;//&lt;/span&gt;&lt;span&gt; show a different cursor to indicate potential link point&lt;/span&gt;
&lt;span&gt;               });
    }

    &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; nodeSelectionAdornmentTemplate =&lt;span&gt;
      objGo(go.Adornment, &lt;/span&gt;&quot;Auto&quot;&lt;span&gt;,
        objGo(go.Shape, { fill: &lt;/span&gt;&lt;span&gt;null&lt;/span&gt;, stroke: &quot;deepskyblue&quot;, strokeWidth: 1.5, strokeDashArray: [4, 2&lt;span&gt;] }),
        objGo(go.Placeholder)
      );

    &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; nodeResizeAdornmentTemplate =&lt;span&gt;
      objGo(go.Adornment, &lt;/span&gt;&quot;Spot&quot;&lt;span&gt;,
        { locationSpot: go.Spot.Right },
        objGo(go.Placeholder),
        objGo(go.Shape, { alignment: go.Spot.TopLeft, cursor: &lt;/span&gt;&quot;nw-resize&quot;, desiredSize: &lt;span&gt;new&lt;/span&gt; go.Size(6, 6), fill: &quot;lightblue&quot;, stroke: &quot;deepskyblue&quot;&lt;span&gt; }),
        objGo(go.Shape, { alignment: go.Spot.Top, cursor: &lt;/span&gt;&quot;n-resize&quot;, desiredSize: &lt;span&gt;new&lt;/span&gt; go.Size(6, 6), fill: &quot;lightblue&quot;, stroke: &quot;deepskyblue&quot;&lt;span&gt; }),
        objGo(go.Shape, { alignment: go.Spot.TopRight, cursor: &lt;/span&gt;&quot;ne-resize&quot;, desiredSize: &lt;span&gt;new&lt;/span&gt; go.Size(6, 6), fill: &quot;lightblue&quot;, stroke: &quot;deepskyblue&quot;&lt;span&gt; }),

        objGo(go.Shape, { alignment: go.Spot.Left, cursor: &lt;/span&gt;&quot;w-resize&quot;, desiredSize: &lt;span&gt;new&lt;/span&gt; go.Size(6, 6), fill: &quot;lightblue&quot;, stroke: &quot;deepskyblue&quot;&lt;span&gt; }),
        objGo(go.Shape, { alignment: go.Spot.Right, cursor: &lt;/span&gt;&quot;e-resize&quot;, desiredSize: &lt;span&gt;new&lt;/span&gt; go.Size(6, 6), fill: &quot;lightblue&quot;, stroke: &quot;deepskyblue&quot;&lt;span&gt; }),

        objGo(go.Shape, { alignment: go.Spot.BottomLeft, cursor: &lt;/span&gt;&quot;se-resize&quot;, desiredSize: &lt;span&gt;new&lt;/span&gt; go.Size(6, 6), fill: &quot;lightblue&quot;, stroke: &quot;deepskyblue&quot;&lt;span&gt; }),
        objGo(go.Shape, { alignment: go.Spot.Bottom, cursor: &lt;/span&gt;&quot;s-resize&quot;, desiredSize: &lt;span&gt;new&lt;/span&gt; go.Size(6, 6), fill: &quot;lightblue&quot;, stroke: &quot;deepskyblue&quot;&lt;span&gt; }),
        objGo(go.Shape, { alignment: go.Spot.BottomRight, cursor: &lt;/span&gt;&quot;sw-resize&quot;, desiredSize: &lt;span&gt;new&lt;/span&gt; go.Size(6, 6), fill: &quot;lightblue&quot;, stroke: &quot;deepskyblue&quot;&lt;span&gt; })
      );

    &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; nodeRotateAdornmentTemplate =&lt;span&gt;
      objGo(go.Adornment,
        { locationSpot: go.Spot.Center, locationObjectName: &lt;/span&gt;&quot;CIRCLE&quot;&lt;span&gt; },
        objGo(go.Shape, &lt;/span&gt;&quot;Circle&quot;, { name: &quot;CIRCLE&quot;, cursor: &quot;pointer&quot;, desiredSize: &lt;span&gt;new&lt;/span&gt; go.Size(7, 7), fill: &quot;lightblue&quot;, stroke: &quot;deepskyblue&quot;&lt;span&gt; }),
        objGo(go.Shape, { geometryString: &lt;/span&gt;&quot;M3.5 7 L3.5 30&quot;, isGeometryPositioned: &lt;span&gt;true&lt;/span&gt;, stroke: &quot;deepskyblue&quot;, strokeWidth: 1.5, strokeDashArray: [4, 2&lt;span&gt;] })
      );

    myDiagram.nodeTemplate &lt;/span&gt;=&lt;span&gt;
      objGo(go.Node, &lt;/span&gt;&quot;Spot&quot;&lt;span&gt;,
        { locationSpot: go.Spot.Center },
        &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; go.Binding(&quot;location&quot;, &quot;loc&quot;&lt;span&gt;, go.Point.parse).makeTwoWay(go.Point.stringify),
        { selectable: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;, selectionAdornmentTemplate: nodeSelectionAdornmentTemplate },
        { resizable: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;, resizeObjectName: &quot;PANEL&quot;&lt;span&gt;, resizeAdornmentTemplate: nodeResizeAdornmentTemplate },
        { rotatable: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;, rotateAdornmentTemplate: nodeRotateAdornmentTemplate },
        &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; go.Binding(&quot;angle&quot;&lt;span&gt;).makeTwoWay(),
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; the main object is a Panel that surrounds a TextBlock with a Shape&lt;/span&gt;
        objGo(go.Panel, &quot;Auto&quot;&lt;span&gt;,
          { name: &lt;/span&gt;&quot;PANEL&quot;&lt;span&gt; },
          &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; go.Binding(&quot;desiredSize&quot;, &quot;size&quot;&lt;span&gt;, go.Size.parse).makeTwoWay(go.Size.stringify),
          objGo(go.Shape, &lt;/span&gt;&quot;Rectangle&quot;,  &lt;span&gt;//&lt;/span&gt;&lt;span&gt; default figure&lt;/span&gt;
&lt;span&gt;            {
              portId: &lt;/span&gt;&quot;&quot;, &lt;span&gt;//&lt;/span&gt;&lt;span&gt; the default port: if no spot on link data, use closest side&lt;/span&gt;
              fromLinkable: &lt;span&gt;true&lt;/span&gt;, toLinkable: &lt;span&gt;true&lt;/span&gt;, cursor: &quot;pointer&quot;&lt;span&gt;,
              fill: &lt;/span&gt;&quot;white&quot;,  &lt;span&gt;//&lt;/span&gt;&lt;span&gt; default color&lt;/span&gt;
              strokeWidth: 2&lt;span&gt;
            },
            &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; go.Binding(&quot;figure&quot;&lt;span&gt;),
            &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; go.Binding(&quot;fill&quot;&lt;span&gt;)),
          objGo(go.TextBlock,
            {
              font: &lt;/span&gt;&quot;bold 11pt Helvetica, Arial, sans-serif&quot;&lt;span&gt;,
              margin: &lt;/span&gt;8&lt;span&gt;,
              maxSize: &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; go.Size(160&lt;span&gt;, NaN),
              wrap: go.TextBlock.WrapFit,
              editable: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;
            },
            &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; go.Binding(&quot;text&quot;&lt;span&gt;).makeTwoWay())
        ),
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; four small named ports, one on each side:&lt;/span&gt;
        makePort(&quot;T&quot;, go.Spot.Top, &lt;span&gt;false&lt;/span&gt;, &lt;span&gt;true&lt;/span&gt;&lt;span&gt;),
        makePort(&lt;/span&gt;&quot;L&quot;, go.Spot.Left, &lt;span&gt;true&lt;/span&gt;, &lt;span&gt;true&lt;/span&gt;&lt;span&gt;),
        makePort(&lt;/span&gt;&quot;R&quot;, go.Spot.Right, &lt;span&gt;true&lt;/span&gt;, &lt;span&gt;true&lt;/span&gt;&lt;span&gt;),
        makePort(&lt;/span&gt;&quot;B&quot;, go.Spot.Bottom, &lt;span&gt;true&lt;/span&gt;, &lt;span&gt;false&lt;/span&gt;&lt;span&gt;),
        { &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; handle mouse enter/leave events to show/hide the ports&lt;/span&gt;
          mouseEnter: &lt;span&gt;function&lt;/span&gt;(e, node) { showSmallPorts(node, &lt;span&gt;true&lt;/span&gt;&lt;span&gt;); },
          mouseLeave: &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;(e, node) { showSmallPorts(node, &lt;span&gt;false&lt;/span&gt;&lt;span&gt;); }
        }
      );

    &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; showSmallPorts(node, show) {
      node.ports.each(&lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt;(port) {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (port.portId !== &quot;&quot;) {  &lt;span&gt;//&lt;/span&gt;&lt;span&gt; don't change the default port, which is the big shape&lt;/span&gt;
          port.fill = show ? &quot;rgba(0,0,0,.3)&quot; : &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
        }
      });
    }

    &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; linkSelectionAdornmentTemplate =&lt;span&gt;
      objGo(go.Adornment, &lt;/span&gt;&quot;Link&quot;&lt;span&gt;,
        objGo(go.Shape,
          &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; isPanelMain declares that this Shape shares the Link.geometry&lt;/span&gt;
          { isPanelMain: &lt;span&gt;true&lt;/span&gt;, fill: &lt;span&gt;null&lt;/span&gt;, stroke: &quot;deepskyblue&quot;, strokeWidth: 0 })  &lt;span&gt;//&lt;/span&gt;&lt;span&gt; use selection object's strokeWidth&lt;/span&gt;
&lt;span&gt;      );

    myDiagram.linkTemplate &lt;/span&gt;=&lt;span&gt;
      objGo(go.Link,  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; the whole link panel&lt;/span&gt;
        { selectable: &lt;span&gt;true&lt;/span&gt;&lt;span&gt;, selectionAdornmentTemplate: linkSelectionAdornmentTemplate },
        { relinkableFrom: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;, relinkableTo: &lt;span&gt;true&lt;/span&gt;, reshapable: &lt;span&gt;true&lt;/span&gt;&lt;span&gt; },
        {
          routing: go.Link.AvoidsNodes,
          curve: go.Link.JumpOver,
          corner: &lt;/span&gt;5&lt;span&gt;,
          toShortLength: &lt;/span&gt;4&lt;span&gt;
        },
        &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; go.Binding(&quot;points&quot;&lt;span&gt;).makeTwoWay(),
        objGo(go.Shape,  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; the link path shape&lt;/span&gt;
          { isPanelMain: &lt;span&gt;true&lt;/span&gt;, strokeWidth: 2&lt;span&gt; }),
        objGo(go.Shape,  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; the arrowhead&lt;/span&gt;
          { toArrow: &quot;Standard&quot;, stroke: &lt;span&gt;null&lt;/span&gt;&lt;span&gt; }),
        objGo(go.Panel, &lt;/span&gt;&quot;Auto&quot;&lt;span&gt;,
          &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; go.Binding(&quot;visible&quot;, &quot;isSelected&quot;&lt;span&gt;).ofObject(),
          objGo(go.Shape, &lt;/span&gt;&quot;RoundedRectangle&quot;,  &lt;span&gt;//&lt;/span&gt;&lt;span&gt; the link shape&lt;/span&gt;
            { fill: &quot;#F8F8F8&quot;, stroke: &lt;span&gt;null&lt;/span&gt;&lt;span&gt; }),
          objGo(go.TextBlock,
            {
              textAlign: &lt;/span&gt;&quot;center&quot;&lt;span&gt;,
              font: &lt;/span&gt;&quot;10pt helvetica, arial, sans-serif&quot;&lt;span&gt;,
              stroke: &lt;/span&gt;&quot;#919191&quot;&lt;span&gt;,
              margin: &lt;/span&gt;2&lt;span&gt;,
              minSize: &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; go.Size(10&lt;span&gt;, NaN),
              editable: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;
            },
            &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; go.Binding(&quot;text&quot;&lt;span&gt;).makeTwoWay())
        )
      );

    load();  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; load an initial diagram from some JSON text&lt;/span&gt;

    &lt;span&gt;//&lt;/span&gt;&lt;span&gt; initialize the Palette that is on the left side of the page&lt;/span&gt;
    myPalette =&lt;span&gt;
      objGo(go.Palette, &lt;/span&gt;&quot;myPaletteDiv&quot;,  &lt;span&gt;//&lt;/span&gt;&lt;span&gt; must name or refer to the DIV HTML element&lt;/span&gt;
&lt;span&gt;        {
          maxSelectionCount: &lt;/span&gt;1&lt;span&gt;,
          nodeTemplateMap: myDiagram.nodeTemplateMap,  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; share the templates used by myDiagram&lt;/span&gt;
          linkTemplate: &lt;span&gt;//&lt;/span&gt;&lt;span&gt; simplify the link template, just in this Palette&lt;/span&gt;
&lt;span&gt;            objGo(go.Link,
              { &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; because the GridLayout.alignment is Location and the nodes have locationSpot == Spot.Center,&lt;/span&gt;
                &lt;span&gt;//&lt;/span&gt;&lt;span&gt; to line up the Link in the same manner we have to pretend the Link has the same location spot&lt;/span&gt;
&lt;span&gt;                locationSpot: go.Spot.Center,
                selectionAdornmentTemplate:
                  objGo(go.Adornment, &lt;/span&gt;&quot;Link&quot;&lt;span&gt;,
                    { locationSpot: go.Spot.Center },
                    objGo(go.Shape,
                      { isPanelMain: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;, fill: &lt;span&gt;null&lt;/span&gt;, stroke: &quot;deepskyblue&quot;, strokeWidth: 0&lt;span&gt; }),
                    objGo(go.Shape,  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; the arrowhead&lt;/span&gt;
                      { toArrow: &quot;Standard&quot;, stroke: &lt;span&gt;null&lt;/span&gt;&lt;span&gt; })
                  )
              },
              {
                routing: go.Link.AvoidsNodes,
                curve: go.Link.JumpOver,
                corner: &lt;/span&gt;5&lt;span&gt;,
                toShortLength: &lt;/span&gt;4&lt;span&gt;
              },
              &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; go.Binding(&quot;points&quot;&lt;span&gt;),
              objGo(go.Shape,  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; the link path shape&lt;/span&gt;
                { isPanelMain: &lt;span&gt;true&lt;/span&gt;, strokeWidth: 2&lt;span&gt; }),
              objGo(go.Shape,  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; the arrowhead&lt;/span&gt;
                { toArrow: &quot;Standard&quot;, stroke: &lt;span&gt;null&lt;/span&gt;&lt;span&gt; })
            ),
          model: &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; go.GraphLinksModel([  &lt;span&gt;//&lt;/span&gt;&lt;span&gt; specify the contents of the Palette&lt;/span&gt;
            { text: &quot;Start&quot;, figure: &quot;Circle&quot;, fill: &quot;#00AD5F&quot;&lt;span&gt; },
            { text: &lt;/span&gt;&quot;Step&quot;&lt;span&gt; },
            { text: &lt;/span&gt;&quot;DB&quot;, figure: &quot;Database&quot;, fill: &quot;lightgray&quot;&lt;span&gt; },
            { text: &lt;/span&gt;&quot;???&quot;, figure: &quot;Diamond&quot;, fill: &quot;lightskyblue&quot;&lt;span&gt; },
            { text: &lt;/span&gt;&quot;End&quot;, figure: &quot;Circle&quot;, fill: &quot;#CE0620&quot;&lt;span&gt; },
            { text: &lt;/span&gt;&quot;Comment&quot;, figure: &quot;RoundedRectangle&quot;, fill: &quot;lightyellow&quot;&lt;span&gt; }
          ], [
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; the Palette also has a disconnected Link, which the user can drag-and-drop&lt;/span&gt;
            { points: &lt;span&gt;new&lt;/span&gt; go.List(go.Point).addAll([&lt;span&gt;new&lt;/span&gt; go.Point(0, 0), &lt;span&gt;new&lt;/span&gt; go.Point(30, 0), &lt;span&gt;new&lt;/span&gt; go.Point(30, 40), &lt;span&gt;new&lt;/span&gt; go.Point(60, 40&lt;span&gt;)]) }
          ])
        });
  }


  &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; TopRotatingTool() {
    go.RotatingTool.call(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;);
  }
  go.Diagram.inherit(TopRotatingTool, go.RotatingTool);

  &lt;/span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;span&gt;* @override &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;&lt;span&gt;
  TopRotatingTool.prototype.updateAdornments &lt;/span&gt;= &lt;span&gt;function&lt;/span&gt;&lt;span&gt;(part) {
    go.RotatingTool.prototype.updateAdornments.call(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;, part);
    &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; adornment = part.findAdornment(&quot;Rotating&quot;&lt;span&gt;);
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (adornment !== &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
      adornment.location &lt;/span&gt;= part.rotateObject.getDocumentPoint(&lt;span&gt;new&lt;/span&gt; go.Spot(0.5, 0, 0, -30));  &lt;span&gt;//&lt;/span&gt;&lt;span&gt; above middle top&lt;/span&gt;
&lt;span&gt;    }
  };

  &lt;/span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;span&gt;* @override &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;&lt;span&gt;
  TopRotatingTool.prototype.rotate &lt;/span&gt;= &lt;span&gt;function&lt;/span&gt;&lt;span&gt;(newangle) {
    go.RotatingTool.prototype.rotate.call(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;, newangle + 90&lt;span&gt;);
  };
  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; end of TopRotatingTool class&lt;/span&gt;


  &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Show the diagram's model in JSON format that the user may edit&lt;/span&gt;
  &lt;span&gt;function&lt;/span&gt;&lt;span&gt; save() {
    saveDiagramProperties();  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; do this first, before writing to JSON&lt;/span&gt;
    document.getElementById(&quot;mySavedModel&quot;).value =&lt;span&gt; myDiagram.model.toJson();
    myDiagram.isModified &lt;/span&gt;= &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
  }
  &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; load() {
    myDiagram.model &lt;/span&gt;= go.Model.fromJson(document.getElementById(&quot;mySavedModel&quot;&lt;span&gt;).value);
    loadDiagramProperties();  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; do this after the Model.modelData has been brought into memory&lt;/span&gt;
&lt;span&gt;  }

  &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; saveDiagramProperties() {
    myDiagram.model.modelData.position &lt;/span&gt;=&lt;span&gt; go.Point.stringify(myDiagram.position);
  }
  &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; loadDiagramProperties(e) {
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; set Diagram.initialPosition, not Diagram.position, to handle initialization side-effects&lt;/span&gt;
    &lt;span&gt;var&lt;/span&gt; pos =&lt;span&gt; myDiagram.model.modelData.position;
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (pos) myDiagram.initialPosition =&lt;span&gt; go.Point.parse(pos);
  }
&lt;/span&gt;&amp;lt;/script&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body onload=&quot;init()&quot;&amp;gt;
&amp;lt;div id=&quot;sample&quot;&amp;gt;
  &amp;lt;div style=&quot;width:100%; white-space:nowrap;&quot;&amp;gt;
    &amp;lt;span style=&quot;display: inline-block; vertical-align: top; width:105px&quot;&amp;gt;
      &amp;lt;div id=&quot;myPaletteDiv&quot; style=&quot;border: solid 1px black; height: 620px&quot;&amp;gt;&amp;lt;/div&amp;gt;
    &amp;lt;/span&amp;gt;

    &amp;lt;span style=&quot;display: inline-block; vertical-align: top; width:80%&quot;&amp;gt;
      &amp;lt;div id=&quot;myDiagramDiv&quot; style=&quot;border: solid 1px black; height: 620px&quot;&amp;gt;&amp;lt;/div&amp;gt;
    &amp;lt;/span&amp;gt;
  &amp;lt;/div&amp;gt;
  &amp;lt;p&amp;gt;&lt;span&gt;
    This sample demonstrates the ability &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; the user to drag around a Link as &lt;span&gt;if&lt;/span&gt;&lt;span&gt; it were a Node.
    When either end of the link passes over a valid port, the port is highlighted.
  &lt;/span&gt;&amp;lt;/p&amp;gt;
  &amp;lt;p&amp;gt;&lt;span&gt;
    The link&lt;/span&gt;-&lt;span&gt;dragging functionality is enabled by setting some or all of the following properties:
    &lt;/span&gt;&amp;lt;a&amp;gt;DraggingTool.dragsLink&amp;lt;/a&amp;gt;, &amp;lt;a&amp;gt;LinkingTool.isUnconnectedLinkValid&amp;lt;/a&amp;gt;&lt;span&gt;, and
    &lt;/span&gt;&amp;lt;a&amp;gt;RelinkingTool.isUnconnectedLinkValid&amp;lt;/a&amp;gt;.
  &amp;lt;/p&amp;gt;
  &amp;lt;p&amp;gt;&lt;span&gt;
    Note that a Link is present &lt;/span&gt;&lt;span&gt;in&lt;/span&gt; the &amp;lt;a&amp;gt;Palette&amp;lt;/a&amp;gt; so that it too can be dragged out and onto
&lt;span&gt;    the main Diagram.  Because links are not automatically routed when either end is not connected
    &lt;/span&gt;&lt;span&gt;with&lt;/span&gt;&lt;span&gt; a Node, the route is provided explicitly when that Palette item is defined.
  &lt;/span&gt;&amp;lt;/p&amp;gt;
  &amp;lt;p&amp;gt;&lt;span&gt;
    This also demonstrates several custom Adornments:
    &lt;/span&gt;&amp;lt;a&amp;gt;Part.selectionAdornmentTemplate&amp;lt;/a&amp;gt;, &amp;lt;a&amp;gt;Part.resizeAdornmentTemplate&amp;lt;/a&amp;gt;&lt;span&gt;, and
    &lt;/span&gt;&amp;lt;a&amp;gt;Part.rotateAdornmentTemplate&amp;lt;/a&amp;gt;.
  &amp;lt;/p&amp;gt;
  &amp;lt;p&amp;gt;&lt;span&gt;
    Finally &lt;/span&gt;&lt;span&gt;this&lt;/span&gt; sample demonstrates saving and restoring the &amp;lt;a&amp;gt;Diagram.position&amp;lt;/a&amp;gt; as a property
    on the &amp;lt;a&amp;gt;Model.modelData&amp;lt;/a&amp;gt; object that is automatically saved and restored when calling &amp;lt;a&amp;gt;Model.toJson&amp;lt;/a&amp;gt;&lt;span&gt;
    and &lt;/span&gt;&amp;lt;a&amp;gt;Model.fromJson&amp;lt;/a&amp;gt;.
  &amp;lt;/p&amp;gt;
  &amp;lt;div&amp;gt;
    &amp;lt;div&amp;gt;
      &amp;lt;button id=&quot;SaveButton&quot; onclick=&quot;save()&quot;&amp;gt;Save&amp;lt;/button&amp;gt;
      &amp;lt;button onclick=&quot;load()&quot;&amp;gt;Load&amp;lt;/button&amp;gt;
      Diagram Model saved &lt;span&gt;in&lt;/span&gt;&lt;span&gt; JSON format:
    &lt;/span&gt;&amp;lt;/div&amp;gt;
    &amp;lt;textarea id=&quot;mySavedModel&quot; style=&quot;width:100%;height:300px&quot;&amp;gt;&lt;span&gt;
{ &lt;/span&gt;&quot;class&quot;: &quot;go.GraphLinksModel&quot;&lt;span&gt;,
  &lt;/span&gt;&quot;linkFromPortIdProperty&quot;: &quot;fromPort&quot;&lt;span&gt;,
  &lt;/span&gt;&quot;linkToPortIdProperty&quot;: &quot;toPort&quot;&lt;span&gt;,
  &lt;/span&gt;&quot;nodeDataArray&quot;&lt;span&gt;: [
 ],
  &lt;/span&gt;&quot;linkDataArray&quot;&lt;span&gt;: [
 ]}
    &lt;/span&gt;&amp;lt;/textarea&amp;gt;
  &amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/pre&gt;</description>
<pubDate>Wed, 29 Nov 2017 05:47:00 +0000</pubDate>
<dc:creator>æ‡’å¾—å®‰åˆ†</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/landeanfen/p/7910530.html</dc:identifier>
</item>
<item>
<title>Gitlabè‡ªåŠ¨è§¦å‘Jenkinsæ„å»ºæ‰“åŒ… - PeanutLike</title>
<link>http://www.cnblogs.com/bugsbunny/p/7919993.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/bugsbunny/p/7919993.html</guid>
<description>&lt;p&gt;åœ¨éƒ¨é—¨çš„æµ‹è¯•ç¯å¢ƒä¸­ï¼Œå¼€å‘äººå‘˜ä¸€æ—¦å‘gitlabä»“åº“æäº¤æˆåŠŸä»£ç ï¼Œgitlabå°±ä¼šè‡ªåŠ¨è§¦å‘jenkinsæ„å»ºé¡¹ç›®ã€‚å½“ç„¶åœ¨æ„å»ºåè¿˜å¯ä»¥æ·»åŠ é¡¹ç›®éƒ¨ç½²æˆ–è€…è‡ªåŠ¨åŒ–æµ‹è¯•çš„è„šæœ¬ã€‚è¿™é‡Œåªé’ˆå¯¹æµ‹è¯•ç¯å¢ƒã€‚&lt;/p&gt;

&lt;h2 id=&quot;å®‰è£…gitlab-hook-pluginæ’ä»¶&quot;&gt;2.1 å®‰è£…Gitlab Hook Pluginæ’ä»¶ï¼š&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;ç³»ç»Ÿç®¡ç†-&amp;gt;ç®¡ç†æ’ä»¶-&amp;gt;å¯é€‰æ’ä»¶-&amp;gt;é€‰æ‹©å®‰è£… Gitlab Hook Pluginå’ŒBuild Authorization Token Root Pluginæ’ä»¶ã€‚&lt;/strong&gt; å¦‚æœæ²¡æœ‰å®‰è£…Build Authorization Tokenï¼Œåé¢gitlabåœ¨Test hookæ—¶ä¼šæŠ¥403é”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://note.youdao.com/yws/public/resource/f0f88f30d57d5a7f49cdf2a8b5161611/xmlnote/F0A324F2D7034F7F8E0B9AC290FF0691/8354&quot; alt=&quot;image&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;ç”Ÿæˆéšæœºtoken&quot;&gt;2.2 ç”Ÿæˆéšæœºtokenï¼š&lt;/h2&gt;
&lt;p&gt;åœ¨linuxç»ˆç«¯æ‰§è¡Œï¼š&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;sourceCode bash&quot;&gt;
&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;co&quot;&gt;# openssl rand -hex 12&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;ed83c8d0506386f23e743695&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;åˆ›å»ºæµ‹è¯•project&quot;&gt;2.3 åˆ›å»ºæµ‹è¯•Project&lt;/h2&gt;
&lt;p&gt;åœ¨gitlabä¸Šå·²å»ºå¥½äº†bd-ci-testçš„é¡¹ç›®ï¼Œä¸”Jenkinsç”¨æˆ·æ‹¥æœ‰è¯¥é¡¹ç›®çš„ç›¸å…³è¯»å†™æƒé™ã€‚&lt;br/&gt;åœ¨jenkinsæ–°å»ºbd-ci-testé¡¹ç›®ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://note.youdao.com/yws/public/resource/f0f88f30d57d5a7f49cdf2a8b5161611/xmlnote/1F6DC4B3CD5144D1A053B9078039486A/8348&quot; alt=&quot;image&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æºç ç®¡ç†é€‰æ‹©gitï¼Œæ·»åŠ jenkinsç”¨æˆ·åœ¨gitlabä¸Šçš„å‡­æ®(å³ç”¨æˆ·åå¯†ç )ï¼Œè¿™é‡Œé€‰æ‹©æ‰“åŒ…çš„åˆ†æ”¯ä¸ºreleaseåˆ†æ”¯ï¼Œè¿™é‡Œæ ¹æ®éœ€æ±‚è‡ªå·±å¡«å†™ï¼ˆé»˜è®¤ä¸ºmasteråˆ†æ”¯ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://note.youdao.com/yws/public/resource/f0f88f30d57d5a7f49cdf2a8b5161611/xmlnote/86BCC46384D44D0C85E8C06DBFA248D3/8352&quot; alt=&quot;image&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ„å»ºè§¦å‘å™¨ï¼Œå¡«å†™åˆšåˆšç”Ÿæˆçš„tokenï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://note.youdao.com/yws/public/resource/f0f88f30d57d5a7f49cdf2a8b5161611/xmlnote/78EA8C6FA8EF45A786BF2F2491D83717/8350&quot; alt=&quot;image&quot;/&gt;&lt;/p&gt;

&lt;p&gt;åœ¨gité¡¹ç›®é…ç½®ç•Œé¢è®¾ç½®é“¾æ¥å’Œtokenã€‚è¿™é‡Œè¦æ³¨æ„è·¯å¾„ï¼Œæ ¹æ®éƒ¨ç½²jenkinsçš„è·¯å¾„å¡«å†™ï¼Œä¸ç„¶ä¼šæŠ¥404é”™è¯¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://note.youdao.com/yws/public/resource/f0f88f30d57d5a7f49cdf2a8b5161611/xmlnote/7979364E452B4B0AB15C8350E6F47811/8349&quot; alt=&quot;image&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç‚¹å‡»æµ‹è¯•ï¼Œè¿”å›201çš„è¯å°±è¡¨ç¤ºæˆåŠŸäº†ã€‚å…¶ä»–é”™è¯¯å¯ä»¥æ ¹æ®gitlabæ—¥å¿—æ¥æ’é™¤åŸå› gitlab/gitlab-rails/production.logï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://note.youdao.com/yws/public/resource/f0f88f30d57d5a7f49cdf2a8b5161611/xmlnote/49002DD0527345E592E8340AE6A40841/8353&quot; alt=&quot;image&quot;/&gt;&lt;/p&gt;

&lt;h2 id=&quot;å‘gitlabæäº¤ä»£ç &quot;&gt;4.1 å‘gitlabæäº¤ä»£ç ï¼š&lt;/h2&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;17&quot;&gt;
&lt;pre class=&quot;sourceCode bash&quot;&gt;
&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;co&quot;&gt;#vim a.txt ä¿®æ”¹a.txtæ–‡ä»¶å¹¶æäº¤&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#git add a.txt &lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;#git commit -m 'alter a.txt'&lt;/span&gt;
[&lt;span class=&quot;kw&quot;&gt;release&lt;/span&gt; 094f663] alter a.txt
 &lt;span class=&quot;kw&quot;&gt;1&lt;/span&gt; files changed, 0 insertions(+), &lt;span class=&quot;kw&quot;&gt;2&lt;/span&gt; deletions(-)
&lt;span class=&quot;co&quot;&gt;#git push origin release&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;Password&lt;/span&gt;: 
&lt;span class=&quot;kw&quot;&gt;Counting&lt;/span&gt; objects: 5, done.
&lt;span class=&quot;kw&quot;&gt;Delta&lt;/span&gt; compression using up to 4 threads.
&lt;span class=&quot;kw&quot;&gt;Compressing&lt;/span&gt; objects: 100% (2/2), &lt;span class=&quot;kw&quot;&gt;done.&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;Writing&lt;/span&gt; objects: 100% (3/3), &lt;span class=&quot;kw&quot;&gt;283&lt;/span&gt; bytes, done.
&lt;span class=&quot;kw&quot;&gt;Total&lt;/span&gt; 3 (delta 0), &lt;span class=&quot;kw&quot;&gt;reused&lt;/span&gt; 0 (delta 0)
   &lt;span class=&quot;kw&quot;&gt;b32472e..094f663&lt;/span&gt;  release -&lt;span class=&quot;kw&quot;&gt;&amp;gt;&lt;/span&gt; release&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;jenkinsæ§åˆ¶å°è¾“å‡ºä¿¡æ¯&quot;&gt;4.2 jenkinsæ§åˆ¶å°è¾“å‡ºä¿¡æ¯ï¼š&lt;/h2&gt;
&lt;p&gt;å¯ä»¥è§‚å¯Ÿåˆ°jekinså·²ç»è‡ªåŠ¨æ„å»ºé¡¹ç›®äº†:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://note.youdao.com/yws/public/resource/f0f88f30d57d5a7f49cdf2a8b5161611/xmlnote/B623185C68AD44CAAA57735999DA24CD/8351&quot; alt=&quot;image&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Wed, 29 Nov 2017 05:38:00 +0000</pubDate>
<dc:creator>PeanutLike</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/bugsbunny/p/7919993.html</dc:identifier>
</item>
<item>
<title>ä¸€ä¸ªRtspServerçš„è®¾è®¡ä¸å®ç°å’ŒRTSP2.0ç®€ä»‹ - haibindev</title>
<link>http://www.cnblogs.com/haibindev/p/7918733.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/haibindev/p/7918733.html</guid>
<description>&lt;p&gt;â€ƒâ€ƒå‰æ®µæ—¶é—´ç€æ‰‹å®ç°äº†ä¸€ä¸ªRTSP Serverï¼Œèƒ½å¤Ÿæ­£å¸¸å®ç°å¤šè·¯RTSPæµçš„ç›´æ’­æ’­æ”¾ï¼Œå› é¡¹ç›®éœ€è¦ï¼Œåªåšäº†å¯¹H.264å’ŒAACç¼–ç çš„æ”¯æŒï¼Œä½†æ˜¯ç›¸ä¿¡å…¶ä»–ç¼–ç çš„å®ç°åŸºæœ¬é€»è¾‘ä¹Ÿæ˜¯æƒ³é€šçš„ã€‚è¿™é‡Œæˆ‘æŠŠä¸»è¦è®¾è®¡å’Œæ€è€ƒè¿‡ç¨‹ï¼Œä»¥åŠå®ç°æ¡†æ¶åˆ†äº«ä¸€ä¸‹ã€‚å› ä¸ºå…³æ³¨çš„æ˜¯ç›´æ’­ï¼Œè¿™é‡Œåªè®¨è®º&lt;strong&gt;RTSPç›´æ’­&lt;/strong&gt;åè®®ã€‚&lt;/p&gt;
&lt;h2 id=&quot;rtspåè®®æ¦‚è¿°ä¸rtsp2.0&quot;&gt;RTSPåè®®æ¦‚è¿°ä¸RTSP2.0&lt;/h2&gt;
&lt;p&gt;â€ƒâ€ƒä¼—æ‰€å‘¨çŸ¥ï¼ŒRTSPåè®®æ˜¯ä¸€ä¸ªæµåª’ä½“åè®®ï¼Œå¯ä»¥å®ç°ç›´æ’­å’Œç‚¹æ’­å½¢å¼çš„éŸ³é¢‘ä¸è§†é¢‘æµçš„æ’­æ”¾ã€‚RTSPåè®®å®šä¹‰äº†å¤šç§æœåŠ¡å™¨-å®¢æˆ·ç«¯ä¹‹é—´äº¤äº’çš„æ¥å£ï¼Œä¸»è¦æœ‰OPTIONSï¼ŒDESCRIBEï¼ŒSETUPï¼ŒPLAYï¼ŒTEARDOWNï¼ŒRECORDï¼ŒANNOUNCEã€‚ç½‘ç»œä¸Šå·²ç»æœ‰å¾ˆå¤šé’ˆå¯¹RTSPåè®®çš„æ–‡ç« ï¼Œæˆ‘è¿™é‡Œä¸å‡†å¤‡è¿›è¡Œè¿‡å¤šä»‹ç»ï¼Œè¯¦ç»†çš„åè®®å®šä¹‰ï¼Œå¯ä»¥å‚è§&lt;a href=&quot;https://www.ietf.org/rfc/rfc2326.txt&quot;&gt;RFC2326&lt;/a&gt;ã€‚RTSPå¹¶ä¸åŒ…æ‹¬å…·ä½“æ•°æ®çš„ä¼ è¾“ï¼Œè¯¥åŠŸèƒ½ä¸€èˆ¬ç”±RTPä¸RTCPåè®®æ¥å®ç°ï¼Œå¹¶å¯ä»¥é€šè¿‡TCPæˆ–UDPä¸¤ç§åº•å±‚ä¼ è¾“æ–¹å¼è¿›è¡Œã€‚&lt;/p&gt;&lt;p&gt;â€ƒâ€ƒä¸‹å›¾æ˜¯å…¸å‹çš„RTSPç›´æ’­è¿‡ç¨‹ä¸­æœåŠ¡ç«¯-å®¢æˆ·ç«¯&lt;strong&gt;ä¸»è¦&lt;/strong&gt;äº¤äº’è¿‡ç¨‹ï¼š&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/254714/201711/254714-20171129105125034-1438687276.png&quot;/&gt;&lt;/p&gt;&lt;p&gt;â€ƒâ€ƒå½“ç„¶ï¼Œç›´æ’­è¿‡ç¨‹ä¸­ä¹Ÿå¯èƒ½åœ¨æœåŠ¡å™¨ä¸å®¢æˆ·ç«¯ä¹‹é—´è°ƒç”¨GET_PARAMETERç­‰å…¶ä»–æ¥å£ï¼Œä¸Šå›¾å·æ‡’çœç•¥äº†ã€‚ä¸Šå›¾ç»¿è‰²éƒ¨åˆ†è¡¨ç¤ºçš„æ˜¯æ•°æ®ä¼ è¾“ã€‚ä¹‹å‰è¯´è¿‡ï¼Œæµåª’ä½“æ•°æ®ä¼ è¾“ä¸æ˜¯RTSPåè®®çš„å†…å®¹ï¼Œç”±RTPåŒ…æ¥åšã€‚ä½†æ˜¯å…·ä½“åœ¨å®ç°ä¸Šï¼ŒRTPåŒ…å¯ä»¥é€šè¿‡UDPæˆ–TCPçš„æ–¹å¼æ¥è¿›è¡Œï¼Œè€Œä¸”è¿™ä¸¤ç§ä¼ è¾“æ–¹å¼ï¼ŒåŒºåˆ«å…¶å®è¿˜ä¸å°ï¼Œä¸‹é¢å…·ä½“è¯´ä¸‹ã€‚&lt;/p&gt;
&lt;h2 id=&quot;rtsp-æ•°æ®ä¼ è¾“æµç¨‹&quot;&gt;RTSP æ•°æ®ä¼ è¾“æµç¨‹&lt;/h2&gt;
&lt;h3 id=&quot;rtsp-over-udp&quot;&gt;1. RTSP over UDP&lt;/h3&gt;
&lt;p&gt;â€ƒâ€ƒå¯¹äºudpæ¨¡å¼ï¼Œå®¢æˆ·ç«¯åœ¨å‘é€PLAYä»¥åï¼Œå°±å¼€å§‹å»ºç«‹udpç«¯å£ï¼Œä»¥æ¥æ”¶æœåŠ¡å™¨å‘æ¥çš„RTPåŒ…ï¼ŒåŒæ ·ï¼ŒæœåŠ¡å™¨ä¹Ÿä¼šå»ºç«‹udpç«¯å£ï¼Œå¹¶å‘å®¢æˆ·ç«¯å‘é€RTPåŒ…ã€‚è¿™æ˜¯ç½‘ä¸Šå¤§éƒ¨åˆ†ç¨‹åºæ‰€é‡‡ç”¨çš„æ–¹å¼ï¼Œä¼˜ç‚¹æ˜¯é€»è¾‘æ¸…æ™°ï¼Œå®ç°æ–¹ä¾¿ï¼Œä¸è¿‡ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå°±æ˜¯udpæ‰€å›ºæœ‰çš„ï¼Œå®¹æ˜“ä¸¢åŒ…ï¼Œå°¤å…¶æ˜¯åœ¨é«˜åˆ†è¾¨ç‡é«˜ç ç‡ä¸‹ã€‚&lt;/p&gt;&lt;p&gt;â€ƒâ€ƒ&lt;img src=&quot;https://images2018.cnblogs.com/blog/254714/201711/254714-20171129105219065-768162847.png&quot;/&gt;&lt;br/&gt;&lt;/p&gt;
&lt;h3 id=&quot;rtsp-over-tcp&quot;&gt;2. RTSP over TCP&lt;/h3&gt;
&lt;p&gt;â€ƒâ€ƒå¯¹tcpæ¨¡å¼ï¼Œé€šè¿‡SETUPæ¥å£æ¥æŒ‡å®šä¼ è¾“æ–¹å¼ï¼ŒæœåŠ¡å™¨è¿”å›åŒæ ·æ•°æ®ä»¥ç¡®å®šåŒæ–¹é€šè¿‡tcpæ–¹å¼æ¥ä¼ è¾“æ•°æ®ã€‚ä¸è¿‡è·Ÿudpæœ€å¤§çš„ä¸åŒæ˜¯ï¼Œrtsp over tcpçš„å½¢å¼ï¼Œä¸å†åˆ›å»ºå•ç‹¬çš„tcpé€šé“ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨ä¹‹å‰rtspé€šä¿¡æ‰€ä½¿ç”¨çš„tcpé€šé“ï¼Œæµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;&lt;p&gt;â€ƒâ€ƒ&lt;img src=&quot;https://images2018.cnblogs.com/blog/254714/201711/254714-20171129105618675-235319144.png&quot;/&gt;&lt;/p&gt;&lt;p&gt;â€ƒâ€ƒç”±äºè·Ÿrtspæ¶ˆæ¯ä½¿ç”¨åŒä¸€ä¸ªtcpç«¯å£ï¼Œä¸ºäº†åŒºåˆ†ï¼Œrtpä»¥åŠrtcpåŒ…ï¼Œå¢åŠ äº†4ä¸ªå­—èŠ‚é¢å¤–çš„å­—æ®µï¼Œå¹¶é€šè¿‡ç‰¹æ®Šçš„æ ‡è¯†'$'ï¼Œä¸æ­£å¸¸çš„rtspæ¶ˆæ¯è¿›è¡Œäº†åŒºåˆ†ã€‚&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/254714/201711/254714-20171129110129175-1182051217.png&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;rtsp-live-server-è®¾è®¡ä¸å®ç°&quot;&gt;RTSP Live Server è®¾è®¡ä¸å®ç°&lt;/h2&gt;
&lt;h3 id=&quot;ç¨‹åºæ¡†æ¶&quot;&gt;1. ç¨‹åºæ¡†æ¶&lt;/h3&gt;
&lt;p&gt;â€ƒâ€ƒæˆ‘è¿™æ¬¡æ‰€å®ç°çš„RTSP Serverï¼Œä¸»è¦åŠŸèƒ½æ˜¯é‡‡é›†æ‘„åƒå¤´å’Œéº¦å…‹é£æ•°æ®ï¼Œè¿›è¡Œh.264ç¼–ç ä»¥åŠaacç¼–ç ï¼Œå¹¶å¯¹å¤–æä¾›RTSPç›´æ’­æµæœåŠ¡ã€‚æˆ‘åœ¨å®é™…å†™ä»£ç ä¸­ï¼Œä¹Ÿæ˜¯é¦–å…ˆå®ç°äº†rtsp over udpçš„æ¨¡å¼ï¼Œç„¶è€Œï¼Œé€šè¿‡å®é™…æµ‹è¯•ï¼Œæˆ‘å‘ç°åœ¨é«˜åˆ†è¾¨ç‡é«˜ç ç‡æƒ…å†µä¸‹ï¼Œç”±äºh.264 NALå•å…ƒè¿‡å¤§ï¼Œä¼šæ‹†åˆ†æˆå¾ˆå¤šçš„rtpåŒ…ï¼Œè€Œudpä¸å¯é çš„ä¼ è¾“æ–¹å¼ï¼Œæ€»æ˜¯éš¾å…ä¸¢åŒ…ï¼Œåœ¨ä½ç ç‡çš„æ—¶å€™è¿˜ä¸æ˜æ˜¾ï¼Œé«˜ç ç‡æƒ…å†µä¸‹ï¼Œä¸¢åŒ…å¯¼è‡´çš„èŠ±å±ä¼šé¢‘ç¹å‡ºç°ï¼Œè¿™æ ·ä½“éªŒç‰¹åˆ«å·®ã€‚äºæ˜¯æˆ‘é‡æ–°å®ç°äº†ä¸€ä»½rtsp over tcpæ¨¡å¼çš„ä»£ç ï¼Œé¡ºåˆ©è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;&lt;p&gt;â€ƒâ€ƒ&lt;img src=&quot;https://images2018.cnblogs.com/blog/254714/201711/254714-20171129102710112-1597744473.png&quot;/&gt;&lt;br/&gt;&lt;/p&gt;
&lt;h3 id=&quot;å…³äºh264åœ¨sdpä¸­çš„æè¿°&quot;&gt;2. å…³äºh264åœ¨sdpä¸­çš„æè¿°&lt;/h3&gt;
&lt;p&gt;â€ƒâ€ƒh264åœ¨sdpä¸­çš„åª’ä½“ä¿¡æ¯,å¤§å¤šéƒ½æ˜¯å¯ä»¥ç›´æ¥å¡«å†™çš„ï¼Œä½†æ˜¯æœ‰ä¸¤é¡¹æ•°æ®éœ€è¦æ ¹æ®ç¼–ç åçš„æ•°æ®æ¥æå–ï¼Œå°±æ˜¯profile-level-idå’Œsprop-parameter-setsã€‚è¿™ä¸¤é¡¹å­—ç¬¦ä¸²æ•°æ®çš„è®¡ç®—å…¬å¼&lt;br/&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;profile-level-id = &quot;Base16(sps[1])&quot; + &quot;Base16(sps[2])&quot; + &quot;Base16(sps[3])&quot;&lt;/li&gt;
&lt;li&gt;sprop-parameter-sets = &quot;Base64(sps)&quot; + &quot;,&quot; + &quot;Base64(pps)&quot;&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;ä¸»è¦ä»£ç &quot;&gt;3. ä¸»è¦ä»£ç &lt;/h3&gt;
&lt;p&gt;3.1 RtspæœåŠ¡æ¥å£&lt;br/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/254714/201711/254714-20171129102819206-227941139.png&quot;/&gt;&lt;/p&gt;&lt;p&gt;3.2 RtspSessionåœ¨TCPé€šé“é‡Œå¤„ç†RTSPæ¶ˆæ¯ä¸RTPæŠ¥æ–‡&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/254714/201711/254714-20171129102948737-1210783518.png&quot;/&gt;&lt;br/&gt;&lt;/p&gt;
&lt;h3 id=&quot;è¿è¡Œæ•ˆæœ&quot;&gt;4. è¿è¡Œæ•ˆæœ&lt;/h3&gt;
&lt;p&gt;â€ƒâ€ƒåŒæ—¶ç”¨vlcå’Œffplayè¿›è¡Œå¤šè·¯æ’­æ”¾ï¼Œä»¥tcpè¯·æ±‚çš„æ–¹å¼ï¼Œæ•ˆæœå¦‚ä¸‹ï¼Œå»¶è¿Ÿæä½ã€‚&lt;br/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/254714/201711/254714-20171129103007925-144629055.png&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;å…³äºrtsp-2.0&quot;&gt;å…³äºRTSP 2.0&lt;/h2&gt;
&lt;p&gt;â€ƒâ€ƒ2016å¹´IETFå‘å¸ƒäº†æ–°çš„RTSPæ ‡å‡†ï¼Œè¿™å°±æ˜¯å°±æ˜¯RTSP2.0åè®®ï¼ˆ&lt;a href=&quot;https://tools.ietf.org/html/rfc7826&quot;&gt;RFC7826&lt;/a&gt;ï¼‰ï¼Œæ–°æ ‡å‡†è¿˜æ˜¯æœ‰ä¸å°‘ä¿®æ”¹çš„ï¼Œé™¤äº†å®Œå–„ä¸€äº›åŸåè®®çš„ä¸­çš„å®šä¹‰ï¼Œè¿˜æœ‰ä¸€äº›æˆ‘è§‰å¾—æ¯”è¾ƒé‡è¦çš„æ˜¯ï¼Œå¯¹æ¥å£methodè¿›è¡Œäº†ä¿®æ”¹ï¼Œæ¯”å¦‚åˆ é™¤äº†&lt;strong&gt;RECORD&lt;/strong&gt;å’Œ&lt;strong&gt;ANNOUNCE&lt;/strong&gt;æ–¹æ³•ï¼Œæ–°å¢äº†&lt;strong&gt;PLAY_NOTIFY&lt;/strong&gt;æ–¹æ³•ã€‚&lt;br/&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;åˆ é™¤äº†RECORDï¼Œè¿™è¡¨ç¤ºä½ ä¸èƒ½å†é€šè¿‡è¿™ä¸ªæ¥å£æ¥æ§åˆ¶æœåŠ¡å™¨è¿›è¡Œæ•°æ®çš„å½•åˆ¶äº†ï¼Œå¯ä»¥é€‰æ‹©åœ¨PLAYæ–¹æ³•ä¸­ï¼Œæ·»åŠ ä¸€äº›å‚æ•°ï¼Œæ¥å®ç°æœåŠ¡å™¨å¯¹ç›´æ’­æ•°æ®è¿›è¡Œå½•åˆ¶ï¼Œè¿˜å¯ä»¥åˆ†éš”å½•åˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;åˆ é™¤äº†ANNOUNCEï¼Œè¿™æ„å‘³ç€ï¼Œä¸èƒ½åƒRTMPä¸€æ ·ï¼Œå®¢æˆ·ç«¯é€šè¿‡å‘æœåŠ¡å™¨æ¨é€æ•°æ®ï¼Œæ¥å®ç°æœ¬æœºæ•°æ®å¯¹å¤–ç›´æ’­äº†ï¼Œè¿™å¯èƒ½éœ€è¦å…¶ä»–çš„æ¨é€é€”å¾„æ¥è¿›è¡Œæ›¿ä»£äº†ã€‚&lt;/li&gt;
&lt;li&gt;è‡³äºPLAY_NOTIFYï¼Œå®ƒæ›¿ä»£æ¥åŸæ¥Serverå‘Clientç«¯å‘é€ANNOUNCEæ–¹æ³•ï¼Œæ‰€å®ç°çš„åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯å‘Šè¯‰å®¢æˆ·ç«¯ï¼Œéœ€è¦æ ¹æ®æ–°å‚æ•°æ¥è°ƒæ•´ç›´æ’­æ’­æ”¾çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;åˆ é™¤é€šè¿‡UDPä¼ è¾“RTSPæ¶ˆæ¯çš„å½¢å¼&lt;/li&gt;
&lt;li&gt;åˆ é™¤é€šè¿‡å‘PLAYæ¶ˆæ¯æ¥keep aliveçš„æ–¹å¼ï¼ˆç”¨SET_PARAMETERæ¥åšï¼‰&lt;/li&gt;
&lt;li&gt;RTSP Serverä¹Ÿå¯å‘Clientå‘TEARDOWNæ¶ˆæ¯&lt;/li&gt;
&lt;li&gt;æ”¯æŒIPV6&lt;/li&gt;
&lt;li&gt;RTSPè¯·æ±‚ï¼Œæ”¯æŒ&lt;strong&gt;pipelining&lt;/strong&gt;çš„å½¢å¼ï¼Œä¹Ÿå°±æ˜¯èšåˆRequestã€‚æ¯”å¦‚å¯ä»¥ä¸ç­‰æœåŠ¡å™¨è¿”å›ï¼ŒæŠŠSETUPå’ŒPLAYä¸€èµ·å‘é€ï¼Œè¿™æ ·å¯ä»¥æé«˜è‡³å°‘ä¸€ä¸ªRTTçš„å¯åŠ¨æ—¶é—´ã€‚å½“ç„¶éœ€è¦åœ¨æ¶ˆæ¯é‡ŒåŠ ä¸Šç›¸å…³å­—æ®µã€‚&lt;/li&gt;
&lt;li&gt;é‡å†™äº†çŠ¶æ€æœºï¼Œå®Œå–„äº†æœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯æ¥è¯´åœ¨å„ä¸ªçŠ¶æ€ä¹‹é—´çš„è½¬æ¢å’Œè¡Œä¸º&lt;/li&gt;
&lt;li&gt;RTSPæ¶ˆæ¯å†…æ”¯æŒURIäº†&lt;/li&gt;
&lt;li&gt;æ‰©å±•äº†REDIRECTæ–¹æ³•ï¼Œç­‰ï¼Œç­‰ç­‰ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/254714/201711/254714-20171129103932472-1844601355.jpg&quot;/&gt;&lt;strong&gt;haibindev.cnblogs.comï¼Œåˆä½œè¯·è”ç³»QQã€‚ï¼ˆè½¬è½½è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„~ï¼‰&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++&lt;/p&gt;
</description>
<pubDate>Wed, 29 Nov 2017 05:16:00 +0000</pubDate>
<dc:creator>haibindev</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/haibindev/p/7918733.html</dc:identifier>
</item>
<item>
<title>åˆ†å¸ƒå¼ç¼“å­˜ä¹‹Ehcacheä¸terracotta - TerracottaæœåŠ¡å™¨æ¦‚å¿µç¯‡ - ç¨‹è€æ¿</title>
<link>http://www.cnblogs.com/cjh-notes/p/7912674.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/cjh-notes/p/7912674.html</guid>
<description>&lt;h2&gt;1ã€ä»‹ç»&lt;/h2&gt;
&lt;p class=&quot;tgt&quot;&gt;&lt;span class=&quot;tgt&quot; data-group=&quot;0-0&quot;&gt;TerracottaæœåŠ¡å™¨ä¸ºTerracottaäº§å“æä¾›åˆ†å¸ƒå¼æ•°æ®å¹³å°ã€‚&lt;span class=&quot;tgt&quot; data-group=&quot;0-1&quot;&gt;TerracottaæœåŠ¡å™¨é›†ç¾¤è¢«ç§°ä¸ºTerracottaæœåŠ¡å™¨é˜µåˆ—(TSA)ã€‚&lt;span class=&quot;tgt&quot; data-group=&quot;0-2&quot;&gt;TerracottaæœåŠ¡å™¨é˜µåˆ—å¯ä»¥ä»å•ä¸ªæœåŠ¡å™¨ï¼Œåˆ°ä¸€ä¸ªç”¨äºé«˜å¯ç”¨æ€§(HA)çš„åŸºæœ¬çš„åŒæœåŠ¡å™¨ä¸²è”ï¼Œå†åˆ°ä¸€ä¸ªæä¾›å¯é…ç½®çš„è§„æ¨¡ã€é«˜æ€§èƒ½å’Œæ·±åº¦æ•…éšœè½¬ç§»è¦†ç›–çš„å¤šæœåŠ¡å™¨é˜µåˆ—ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;tgt&quot;&gt;&lt;span class=&quot;tgt&quot; data-group=&quot;1-0&quot;&gt;TerracottaæœåŠ¡å™¨çš„ä¸»è¦ç‰¹æ€§åŒ…æ‹¬:&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li class=&quot;tgt&quot;&gt;&lt;span class=&quot;tgt&quot; data-group=&quot;2-0&quot;&gt;åˆ†å¸ƒå¼å†…å­˜æ•°æ®ç®¡ç†ï¼šåœ¨å†…å­˜ä¸­ç®¡ç†æ¯”æ•°æ®ç½‘æ ¼å¤š10-100xçš„æ•°æ®&lt;/span&gt;&lt;/li&gt;
&lt;li class=&quot;tgt&quot;&gt;ä¸å¤æ‚çš„å¯ä¼¸ç¼©æ€§ï¼šç®€å•çš„é…ç½®å’Œéƒ¨ç½²é€‰é¡¹ï¼Œç”¨äºæ‰©å±•ä»¥æ»¡è¶³æ—¥ç›Šå¢é•¿çš„éœ€æ±‚å¹¶ä¿ƒè¿›å®¹é‡è®¡åˆ’&lt;/li&gt;
&lt;li class=&quot;tgt&quot;&gt;é«˜å¯ç”¨æ€§ï¼šæ­£å¸¸è¿è¡Œå’ŒæœåŠ¡çš„å³æ—¶æ•…éšœè½¬ç§»&lt;/li&gt;
&lt;li class=&quot;tgt&quot;&gt;å¯é…ç½®çš„å¥åº·ç›‘æµ‹ï¼šTerracottaå¥åº·æ£€æŸ¥å™¨ç›‘æ§å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„å¥åº·çŠ¶å†µ&lt;/li&gt;
&lt;li class=&quot;tgt&quot;&gt;æŒä¹…åŒ–çŠ¶æ€ï¼šè‡ªåŠ¨æ°¸ä¹…å­˜å‚¨æ‰€æœ‰å½“å‰å…±äº«å†…å­˜æ•°æ®ï¼Œå¹¶åœ¨æœåŠ¡å™¨é‡å¯åå®ç°å¿«é€Ÿçš„æ¢å¤&lt;/li&gt;
&lt;li class=&quot;tgt&quot;&gt;èŠ‚ç‚¹è‡ªåŠ¨é‡è¿ï¼šä¸´æ—¶æ–­å¼€çš„æœåŠ¡å™¨å®ä¾‹å’Œå®¢æˆ·ç«¯é‡æ–°åŠ å…¥é›†ç¾¤ï¼Œè€Œä¸éœ€è¦æ“ä½œå‘˜å¹²é¢„&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœåŠ¡å™¨ç›®å½•è¯´æ˜Â &lt;/p&gt;
&lt;p&gt;server&lt;br/&gt;â””â”€bin -- å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¦‚å¯åŠ¨æœåŠ¡å™¨çš„æ–‡ä»¶ start-tc-server&lt;br/&gt;â””â”€conf -- é…ç½®æ–‡ä»¶&lt;br/&gt;â””â”€lib&lt;br/&gt;â””â”€plugins&lt;/p&gt;

&lt;h2&gt;2ã€é…ç½®æ–‡ä»¶&lt;/h2&gt;
&lt;p&gt;Terracottaé…ç½®æ–‡ä»¶æ˜¯ä¸€ä¸ªxmlæ ¼å¼çš„æ–‡ä»¶ï¼Œåä¸ºtc-configã€‚&lt;/p&gt;
&lt;p&gt;è¯¥æ–‡ä»¶ç”¨äºé…ç½®å•ä¸ªTerracottaæœåŠ¡å™¨é˜µåˆ—(TSA)æ¡å¸¦çš„æ‰€æœ‰æˆå‘˜ã€‚&lt;/p&gt;
&lt;p&gt;æ‚¨å¯ä»¥ä½¿ç”¨å·¥å…·åŒ…ä¸­æä¾›çš„ç¤ºä¾‹é…ç½®æ–‡ä»¶ä½œä¸ºTerracottaé…ç½®çš„åŸºç¡€ã€‚ä¸€äº›ç¤ºä¾‹ä¸­æœ‰æè¿°é…ç½®å…ƒç´ çš„å†…è”æ³¨é‡Šã€‚&lt;/p&gt;

&lt;h3&gt;2.1 é…ç½®éƒ¨åˆ†çš„è§£é‡Š&lt;/h3&gt;
&lt;table class=&quot;Default&quot; border=&quot;1&quot;&gt;&lt;tbody readability=&quot;6&quot;&gt;&lt;tr&gt;&lt;td class=&quot;Table_Cell_Head&quot;&gt;
&lt;p&gt;&lt;span&gt;å…ƒç´ åç§°&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td class=&quot;Table_Cell_Head&quot;&gt;
&lt;p&gt;&lt;span&gt;æè¿°&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;7.5&quot;&gt;&lt;td class=&quot;Table_Cell&quot;&gt;
&lt;p&gt;&lt;span&gt;Servers&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td class=&quot;Table_Cell&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;&lt;span&gt;Serverséƒ¨åˆ†å®šä¹‰äº†ç»„æˆé›†ç¾¤çš„æ‰€æœ‰æœåŠ¡å™¨ã€‚é€šè¿‡é…ç½®å’Œè¿è¡Œè‡³å°‘2ä¸ªæœåŠ¡å™¨ï¼Œå¯ä»¥å®ç°é«˜å¯ç”¨æ€§ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;Table_Cell&quot;&gt;&lt;span&gt;è¯·æ³¨æ„ï¼Œå¦‚æœæ²¡æœ‰æ˜ç¡®é…ç½®å“ªä¸ªæœåŠ¡å™¨å……å½“ä¸»åŠ¨æˆ–è¢«åŠ¨çš„è§’è‰²ï¼Œè¿™æ ·å¯èƒ½ä¼šåœ¨é›†ç¾¤çš„ç”Ÿå‘½å‘¨æœŸä¸­å‘ç”Ÿå˜åŒ–ã€‚&lt;/span&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;
&lt;span&gt;æœåŠ¡å™¨éƒ¨åˆ†ä¸­çš„æ¯ä¸ªæœåŠ¡å™¨å…ƒç´ éƒ½æ˜¯ç”±nameå±æ€§æŒ‡å®šçš„åç§°æ ‡è¯†çš„:&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;&lt;span class=&quot;codeph&quot;&gt;&amp;lt;server ... name=&quot;&lt;span class=&quot;var-in-codeph&quot;&gt;ServerName&lt;span class=&quot;codeph&quot;&gt;&quot;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5.5&quot;&gt;&lt;td class=&quot;Table_Cell&quot;&gt;
&lt;p id=&quot;ww3_11_32_2_8_6_2_5_4_2&quot; class=&quot;Table_Cell&quot;&gt;&lt;span&gt;Plugins&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td class=&quot;Table_Cell&quot; readability=&quot;6&quot;&gt;
&lt;p id=&quot;ww3_11_32_2_8_6_2_5_4_4_2&quot; class=&quot;Table_Cell&quot;&gt;&lt;span&gt;Pluginséƒ¨åˆ†é€šè¿‡æ³¨å†Œå’Œé…ç½®å¯æä¾›ç»™è¿™äº›æœåŠ¡å™¨çš„é™„åŠ æœåŠ¡ï¼Œä»¥åŠæä¾›å¯¹æ‰€æœ‰æœåŠ¡å¯ç”¨çš„é€šç”¨é…ç½®ä¿¡æ¯ï¼Œ&lt;/span&gt;&lt;span&gt;æ‰©å±•äº†åˆ—å‡ºçš„æœåŠ¡å™¨çš„åŠŸèƒ½ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;
&lt;span&gt;ä½¿ç”¨æ‰©å±•ç‚¹æ˜¯æœåŠ¡å™¨ä½¿ç”¨æ‚¨çš„åº”ç”¨ç¨‹åºç«¯ç‚¹ï¼ˆæœåŠ¡ï¼‰çš„å¿…è¦æ¡ä»¶ã€‚&lt;/span&gt;

&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4.5&quot;&gt;&lt;td class=&quot;Table_Cell&quot;&gt;
&lt;p id=&quot;ww3_11_32_2_8_6_2_5_6_2&quot; class=&quot;Table_Cell&quot;&gt;&lt;span&gt;Properties&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td class=&quot;Table_Cell&quot; readability=&quot;6&quot;&gt;
&lt;p id=&quot;ww3_11_32_2_8_6_2_5_6_4_2&quot; class=&quot;Table_Cell&quot;&gt;&lt;span&gt;tc-propertieséƒ¨åˆ†å…¬å¼€äº†ä¸€ä¸ªé”®-å€¼å¯¹çš„åˆ—è¡¨ï¼Œä»¥è¿›ä¸€æ­¥å®šåˆ¶é›†ç¾¤çš„è¡Œä¸ºã€‚æ³¨æ„ï¼Œè¿™ä¸ªéƒ¨åˆ†é€šå¸¸æ˜¯ç©ºçš„ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h2&gt;Â &lt;/h2&gt;
&lt;h3&gt;2.2 ç®€å•çš„é…ç½®ç¤ºä¾‹&lt;/h3&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„æœåŠ¡å™¨é…ç½®æ–‡ä»¶çš„ç¤ºä¾‹ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;tc-config &lt;/span&gt;&lt;span&gt;xmlns&lt;/span&gt;&lt;span&gt;=&quot;http://www.terracotta.org/config&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;servers&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;server &lt;/span&gt;&lt;span&gt;host&lt;/span&gt;&lt;span&gt;=&quot;localhost&quot;&lt;/span&gt;&lt;span&gt; name&lt;/span&gt;&lt;span&gt;=&quot;testServer0&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;logs&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;terracotta-kit-test/testServer0/logs&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;logs&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;tsa-port&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;26270&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;tsa-port&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;tsa-group-port&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;26271&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;tsa-group-port&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;server&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;servers&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;tc-config&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™æ˜¾ç¤ºäº†æ ‡å‡†é…ç½®çš„å…³é”®ç»„ä»¶ï¼Œä½†æ˜¯åªæè¿°äº†ä¸€ä¸ªæ²¡æœ‰ä½¿ç”¨æ‰©å±•ç‚¹çš„æœåŠ¡å™¨ã€‚&lt;/p&gt;
&lt;p&gt;å…³é”®ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;é…ç½®åç§°ç©ºé—´http://www.terracotta.org/configã€‚&lt;/li&gt;
&lt;li&gt;åªæœ‰ä¸€ä¸ªåä¸ºtestServer0çš„æœåŠ¡å™¨ã€‚ï¼ˆæœåŠ¡å™¨åç§°å¾ˆé‡è¦ï¼Œå› ä¸ºå®ƒåœ¨å¯åŠ¨æœåŠ¡å™¨æ—¶ä¼šè¢«ä½¿ç”¨ï¼›åœ¨å®é™…éƒ¨ç½²ä¸­ï¼Œåº”è¯¥ç”¨å®Œæ•´çš„ä¸»æœºåæˆ–æœåŠ¡å™¨çš„IPåœ°å€æ›¿æ¢localhostã€‚ï¼‰&lt;/li&gt;
&lt;li&gt;ç»™å‡ºäº†ä¸€ä¸ªæ—¥å¿—ç›®å½•çš„ç›¸å¯¹è·¯å¾„ã€‚ï¼ˆåœ¨å®é™…éƒ¨ç½²ä¸­ï¼Œåº”è¯¥ç”¨å®Œæ•´çš„ä¸»æœºåæˆ–æœåŠ¡å™¨çš„IPåœ°å€æ›¿æ¢localhostã€‚ï¼‰&lt;/li&gt;
&lt;li&gt;tsa-portæ˜¯å®¢æˆ·ç«¯è¿æ¥åˆ°æœåŠ¡å™¨æ—¶ä½¿ç”¨çš„ç«¯å£(é»˜è®¤ä¸º9410)ã€‚&lt;/li&gt;
&lt;li&gt;å°½ç®¡åœ¨è¿™ç§æƒ…å†µä¸‹æ²¡æœ‰å…¶ä»–æœåŠ¡å™¨(é»˜è®¤ä¸º9530)ï¼Œä½†tsa-groupç«¯å£æ˜¯ç”¨äºè·¨æœåŠ¡å™¨é€šä¿¡çš„ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ä¸Šé¢çš„ç¤ºä¾‹é…ç½®ä¸­ï¼Œä¸å¯èƒ½é‡æ–°å¯åŠ¨æˆ–æ•…éšœè½¬ç§»ï¼Œå› ä¸ºé‡æ–°å¯åŠ¨æ”¯æŒéœ€è¦ä¸€ä¸ªæ‰©å±•ç‚¹ï¼Œè¯¥æ‰©å±•ç‚¹æä¾›äº†è¯¥åŠŸèƒ½ï¼Œè€Œæ•…éšœè½¬ç§»è‡³å°‘éœ€è¦åœ¨é›†ç¾¤ä¸­è‡³å°‘æœ‰ä¸¤ä¸ªæœåŠ¡å™¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;2.3 å‚æ•°æ›¿æ¢&lt;/h3&gt;
&lt;p&gt;å‚æ•°æ›¿æ¢æä¾›äº†åœ¨TerracottaæœåŠ¡å™¨é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨é¢„å®šä¹‰çš„ç³»ç»Ÿå±æ€§æ›¿æ¢å˜é‡çš„æ–¹æ³•ã€‚å› æ­¤ï¼Œå¯ä»¥æ ¹æ®ç‰¹å®šäºæœºå™¨çš„å±æ€§æ¥æ™ºèƒ½åœ°å¡«å……å¤§é‡çš„å­—æ®µã€‚å‚æ•°æ›¿æ¢é€šå¸¸ç”¨äºä¸»æœºåã€IPåœ°å€å’Œç›®å½•è·¯å¾„æ›¿æ¢ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä½¿ç”¨çš„å‚æ•°æ›¿æ¢å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;table class=&quot;Default&quot; border=&quot;1&quot;&gt;&lt;tbody readability=&quot;3&quot;&gt;&lt;tr&gt;&lt;td class=&quot;Table_Cell_Head&quot;&gt;
&lt;p id=&quot;ww3_11_32_2_12_8_2_3_2_2&quot; class=&quot;Table_Cell_Head&quot;&gt;&lt;span&gt;å‚æ•°åç§°&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td class=&quot;Table_Cell_Head&quot;&gt;
&lt;p id=&quot;ww3_11_32_2_12_8_2_3_2_4&quot; class=&quot;Table_Cell_Head&quot;&gt;&lt;span&gt;æè¿°&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;Table_Cell&quot;&gt;
&lt;p id=&quot;ww3_11_32_2_12_8_2_5_2_2&quot; class=&quot;Table_Cell&quot;&gt;&lt;span&gt;%h&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td class=&quot;Table_Cell&quot;&gt;
&lt;p id=&quot;ww3_11_32_2_12_8_2_5_2_4&quot; class=&quot;Table_Cell&quot;&gt;&lt;span&gt;å®Œæ•´çš„ä¸»æœºå&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;Table_Cell&quot;&gt;
&lt;p id=&quot;ww3_11_32_2_12_8_2_5_4_2&quot; class=&quot;Table_Cell&quot;&gt;&lt;span&gt;%i&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td class=&quot;Table_Cell&quot;&gt;
&lt;p id=&quot;ww3_11_32_2_12_8_2_5_4_4&quot; class=&quot;Table_Cell&quot;&gt;&lt;span&gt;IPåœ°å€ã€€ã€€ã€€ã€€&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;Table_Cell&quot;&gt;
&lt;p id=&quot;ww3_11_32_2_12_8_2_5_6_2&quot; class=&quot;Table_Cell&quot;&gt;&lt;span&gt;%H&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td class=&quot;Table_Cell&quot;&gt;
&lt;p id=&quot;ww3_11_32_2_12_8_2_5_6_4&quot; class=&quot;Table_Cell&quot;&gt;&lt;span&gt;ç”¨æˆ·ä¸»ç›®å½•&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;Table_Cell&quot;&gt;
&lt;p id=&quot;ww3_11_32_2_12_8_2_5_8_2&quot; class=&quot;Table_Cell&quot;&gt;&lt;span&gt;%n&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td class=&quot;Table_Cell&quot;&gt;
&lt;p id=&quot;ww3_11_32_2_12_8_2_5_8_4&quot; class=&quot;Table_Cell&quot;&gt;&lt;span&gt;ç”¨æˆ·å&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;Table_Cell&quot;&gt;
&lt;p id=&quot;ww3_11_32_2_12_8_2_5_10_2&quot; class=&quot;Table_Cell&quot;&gt;&lt;span&gt;%o&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td class=&quot;Table_Cell&quot;&gt;
&lt;p id=&quot;ww3_11_32_2_12_8_2_5_10_4&quot; class=&quot;Table_Cell&quot;&gt;&lt;span&gt;æ“ä½œç³»ç»Ÿåç§°&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;Table_Cell&quot;&gt;
&lt;p id=&quot;ww3_11_32_2_12_8_2_5_12_2&quot; class=&quot;Table_Cell&quot;&gt;&lt;span&gt;%a&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td class=&quot;Table_Cell&quot;&gt;
&lt;p id=&quot;ww3_11_32_2_12_8_2_5_12_4&quot; class=&quot;Table_Cell&quot;&gt;&lt;span&gt;å¤„ç†å™¨æ¶æ„&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;Table_Cell&quot;&gt;
&lt;p id=&quot;ww3_11_32_2_12_8_2_5_14_2&quot; class=&quot;Table_Cell&quot;&gt;&lt;span&gt;%v&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td class=&quot;Table_Cell&quot;&gt;
&lt;p id=&quot;ww3_11_32_2_12_8_2_5_14_4&quot; class=&quot;Table_Cell&quot;&gt;&lt;span&gt;æ“ä½œç³»ç»Ÿç‰ˆæœ¬&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td class=&quot;Table_Cell&quot;&gt;
&lt;p id=&quot;ww3_11_32_2_12_8_2_5_16_2&quot; class=&quot;Table_Cell&quot;&gt;&lt;span&gt;%t&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td class=&quot;Table_Cell&quot; readability=&quot;5&quot;&gt;
&lt;p id=&quot;ww3_11_32_2_12_8_2_5_16_4&quot; class=&quot;Table_Cell&quot;&gt;&lt;span&gt;ä¸´æ—¶ç›®å½•(åœ¨Linuxæˆ–Solarisä¸Šï¼Œä¾‹å¦‚ï¼Œ/tmp)&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td class=&quot;Table_Cell&quot;&gt;
&lt;p id=&quot;ww3_11_32_2_12_8_2_5_18_2&quot; class=&quot;Table_Cell&quot;&gt;&lt;span&gt;%(property)&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td class=&quot;Table_Cell&quot; readability=&quot;5&quot;&gt;
&lt;p id=&quot;ww3_11_32_2_12_8_2_5_18_4&quot; class=&quot;Table_Cell&quot;&gt;&lt;span&gt;JVMçš„Javaç³»ç»Ÿå±æ€§(ä¾‹å¦‚%(Java.home)ï¼Œ%(logs.path))&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td class=&quot;Table_Cell&quot;&gt;
&lt;p id=&quot;ww3_11_32_2_12_8_2_5_20_2&quot; class=&quot;Table_Cell&quot;&gt;&lt;span&gt;%D&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td class=&quot;Table_Cell&quot; readability=&quot;5&quot;&gt;
&lt;p id=&quot;ww3_11_32_2_12_8_2_5_20_4&quot; class=&quot;Table_Cell&quot;&gt;&lt;span&gt;æ—¶é—´æˆ³ (yyyyMMddHHmmssSSS)&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;å¯ä»¥åœ¨é€‚å½“çš„åœ°æ–¹ä½¿ç”¨è¿™äº›å‚æ•°ï¼ŒåŒ…æ‹¬æœŸæœ›å­—ç¬¦ä¸²æˆ–å€¼è·¯å¾„çš„å…ƒç´ æˆ–å±æ€§ã€‚&lt;/p&gt;

&lt;h2&gt;3ã€å¯åŠ¨æœåŠ¡å™¨&lt;/h2&gt;
&lt;p&gt;å¯åŠ¨è„šæœ¬å‚æ•°ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span class=&quot;WebWorks_Number&quot;&gt;&lt;span class=&quot;codeph&quot;&gt;[-f /path/to/tc-config.xml] - æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span class=&quot;WebWorks_Number&quot;&gt;&lt;span class=&quot;codeph&quot;&gt;&lt;span class=&quot;codeph&quot;&gt;[-n server_name] - åœ¨é…ç½®äº†å¤šä¸ªæœåŠ¡å™¨çš„æƒ…å†µä¸‹æŒ‡å®šå¯åŠ¨æœåŠ¡å™¨åç§°&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;paragraph&quot; readability=&quot;6&quot;&gt;
&lt;p&gt;On Windows:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
cd &amp;lt;path/to/terracotta/kit&amp;gt;/server/&lt;span&gt;bin
start&lt;/span&gt;-tc-server.bat -f &amp;lt;path/to/server/config&amp;gt;/tc-config.xml
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Â On Unix/Mac:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot; readability=&quot;9.7385496183206&quot;&gt;
&lt;div class=&quot;content&quot; readability=&quot;39.417938931298&quot;&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
cd &amp;lt;path/to/terracotta/kit&amp;gt;/server/&lt;span&gt;bin
.&lt;/span&gt;/start-tc-server.&lt;span&gt;sh&lt;/span&gt; -f &amp;lt;path/to/server/config&amp;gt;/tc-config.xml
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Â æ³¨æ„ï¼šåœ¨å¯åŠ¨TerracottaæœåŠ¡å™¨å‰ï¼Œè¯·å…ˆæ£€æŸ¥éœ€è¦çš„javaç‰ˆæœ¬ã€‚Terracotta5.xéœ€è¦Java 8çš„æ”¯æŒã€‚&lt;/p&gt;

&lt;p&gt;æ£€æŸ¥ä¸‹é¢çš„ä¿¡æ¯æ—¥å¿—ï¼Œä»¥ç¡®è®¤æœåŠ¡å™¨æ˜¯å¦æˆåŠŸå¯åŠ¨ï¼ŒÂ &lt;code&gt;Terracotta Server instance has started up as ACTIVE node on 0:0:0:0:0:0:0:0:9410 successfully, and is now ready for work.&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;windowsä¸‹å¯åŠ¨æˆåŠŸç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1283057/201711/1283057-20171129113314456-491926244.png&quot; alt=&quot;&quot; width=&quot;633&quot; height=&quot;395&quot;/&gt;&lt;/p&gt;

&lt;p&gt;TerracottaæœåŠ¡å™¨ä¸‹è½½åœ°å€ï¼š&lt;a href=&quot;http://www.terracotta.org/open-source/&quot; target=&quot;_blank&quot;&gt;http://www.terracotta.org/open-source/&lt;/a&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
</description>
<pubDate>Wed, 29 Nov 2017 04:18:00 +0000</pubDate>
<dc:creator>ç¨‹è€æ¿</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/cjh-notes/p/7912674.html</dc:identifier>
</item>
<item>
<title>ä»å®æˆ˜å‡ºå‘ï¼Œè°ˆè°ˆ nginx ä¿¡å·é›† - åˆæ‹äº‘</title>
<link>http://www.cnblogs.com/upyun/p/7919657.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/upyun/p/7919657.html</guid>
<description>&lt;h2&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;ä¹‹å‰å·¥ä½œæ—¶å€™ï¼Œä¸€å°å¼•æµæµ‹è¯•æœºå™¨çš„ä¸€ä¸ª ngx_lua æœåŠ¡çªç„¶å‡ºç°äº†ä¸€äº› HTTP/500 å“åº”ï¼Œä»é”™è¯¯æ—¥å¿—æ‰“å°çš„å †æ ˆæ¥çœ‹ï¼Œæ˜¯ä¸ä¹…å‰æ–°å‘å¸ƒçš„ç‰ˆæœ¬é‡Œæ·»åŠ çš„ä¸€ä¸ª Lua table ä¸å­˜åœ¨ï¼Œè€Œæœ‰ä»£ç å‘å…¶è¿›è¡Œç´¢å¼•å¯¼è‡´çš„ã€‚è¿™ä»¤äººç™¾æ€ä¸å¾—å…¶è§£ï¼Œå¦‚æœæ˜¯ç‰ˆæœ¬å›é€€å¯¼è‡´çš„ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä½¿ç”¨è¿™ä¸ª Lua table çš„ä»£ç æ²¡æœ‰è¢«å›é€€ï¼Œååå®šä¹‰è¿™ä¸ª table çš„ä»£ç è¢«å›é€€äº†å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ç»è¿‡æ’æŸ¥å‘ç°ï¼Œå½“æ—¶ nginx åˆšåˆšå®Œæˆçƒ­æ›´æ–°æ“ä½œï¼Œæ—§çš„ master è¿›ç¨‹è¿˜å­˜åœ¨ï¼Œå› ä¸ºè¦å‡†å¤‡æœºå™¨é‡å¯ï¼Œå…ˆåˆ‡æ‰äº†å¼•æµæµé‡ï¼ˆä½†æœ‰äº›è¯·æ±‚è¿˜åœ¨ï¼‰ï¼ŒåŒæ—¶ç³»ç»Ÿè§¦å‘äº†Â &lt;code&gt;nginx -s stop&lt;/code&gt;ï¼Œè¿™æ‰å¯¼è‡´äº†è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;h2&gt;åœºæ™¯å¤ç°&lt;/h2&gt;
&lt;p&gt;ä¸‹é¢æˆ‘å°†ä½¿ç”¨ä¸€ä¸ªåŸç”Ÿçš„ nginxï¼Œåœ¨æˆ‘çš„å®‰è£…äº† fedora26 çš„è™šæ‹Ÿæœºä¸Šå¤ç°è¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä½¿ç”¨çš„ nginx ç‰ˆæœ¬æ˜¯ç›®å‰æœ€æ–°çš„Â &lt;code&gt;1.13.4&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆå¯åŠ¨ nginx&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;34&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
alex@Fedora26-64: ~/bin_install/nginx
./sbin/nginx
alex@Fedora26-64: ~/bin_install/nginx
ps auxf | grep nginx
alex      6174  0.0  0.0  28876   428 ?        Ss   14:35   0:00 nginx: master process ./sbin/nginx
alex      6175  0.0  0.2  29364  2060 ?        S    14:35   0:00  \_ nginx: worker process
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ° master å’Œ worker éƒ½å·²ç»åœ¨è¿è¡Œã€‚&lt;/p&gt;
&lt;p&gt;æ¥ç€æˆ‘ä»¬å‘ master å‘é€ä¸€ä¸ªÂ &lt;code&gt;SIGUSR2&lt;/code&gt;Â ä¿¡å·ï¼Œå½“ nginx æ ¸å¿ƒæ”¶åˆ°è¿™ä¸ªä¿¡å·åï¼Œå°±ä¼šè§¦å‘çƒ­æ›´æ–°ã€‚&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;11.5&quot;&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
alex@Fedora26-64: ~/bin_install/nginx
kill -USR2 6174
alex@Fedora26-64: ~/bin_install/nginx
ps auxf | grep nginx
alex      6174  0.0  0.1  28876  1996 ?        Ss   14:35   0:00 nginx: master process ./sbin/nginx
alex      6175  0.0  0.2  29364  2060 ?        S    14:35   0:00  \_ nginx: worker process
alex      6209  0.0  0.2  28876  2804 ?        S    14:37   0:00  \_ nginx: master process ./sbin/nginx
alex      6213  0.0  0.1  29364  2004 ?        S    14:37   0:00      \_ nginx: worker process
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°æ–°çš„ master å’Œè¯¥ master fork å‡ºæ¥çš„ worker å·²ç»åœ¨è¿è¡Œäº†ï¼Œæ­¤æ—¶æˆ‘ä»¬æ¥ç€å‘æ—§ master å‘é€ä¸€ä¸ªÂ &lt;code&gt;SIGWINCH&lt;/code&gt;Â ä¿¡å·ï¼Œæ—§ master æ”¶åˆ°è¿™ä¸ªä¿¡å·åï¼Œä¼šå‘å®ƒçš„ worker å‘é€Â &lt;code&gt;SIGQUIT&lt;/code&gt;ï¼Œäºæ˜¯æ—§ master çš„ worker è¿›ç¨‹å°±ä¼šé€€å‡ºï¼š&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;10.5&quot;&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
alex@Fedora26-64: ~/bin_install/nginx
kill -WINCH 6174
alex@Fedora26-64: ~/bin_install/nginx
ps auxf | grep nginx
alex      6174  0.0  0.1  28876  1996 ?        Ss   14:35   0:00 nginx: master process ./sbin/nginx
alex      6209  0.0  0.2  28876  2804 ?        S    14:37   0:00  \_ nginx: master process ./sbin/nginx
alex      6213  0.0  0.1  29364  2004 ?        S    14:37   0:00      \_ nginx: worker process
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ­¤æ—¶åªå‰©ä¸‹æ—§çš„ masterï¼Œæ–°çš„ master å’Œæ–° master çš„ worker åœ¨è¿è¡Œï¼Œè¿™å’Œå½“æ—¶çº¿ä¸Šè¿è¡Œçš„æƒ…å†µç±»ä¼¼ã€‚&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;æ¥ç€æˆ‘ä»¬ä½¿ç”¨ stop å‘½ä»¤ï¼š&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;10&quot;&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;34&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
alex@Fedora26-64: ~/bin_install/nginx
./sbin/nginx -s stop
alex@Fedora26-64: ~/bin_install/nginx
ps auxf | grep nginx
alex      6174  0.0  0.1  28876  1996 ?        Ss   14:35   0:00 nginx: master process ./sbin/nginx
alex      6301  0.0  0.2  29364  2124 ?        S    14:49   0:00  \_ nginx: worker process
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æˆ‘ä»¬ä¼šå‘ç°ï¼Œæ–°çš„ master å’Œå®ƒçš„ worker éƒ½å·²ç»é€€å‡ºï¼Œè€Œæ—§çš„ master è¿˜åœ¨è¿è¡Œï¼Œå¹¶äº§ç”Ÿäº† worker å‡ºæ¥ã€‚è¿™å°±æ˜¯å½“æ—¶çº¿ä¸Šçš„æƒ…å†µäº†ã€‚&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;äº‹å®ä¸Šï¼Œè¿™ä¸ªç°è±¡å’Œ nginx è‡ªèº«çš„è®¾è®¡æœ‰å…³ï¼šå½“æ—§çš„ master å‡†å¤‡äº§ç”Ÿ fork æ–°çš„ master ä¹‹å‰ï¼Œå®ƒä¼šæŠŠÂ &lt;code&gt;nginx.pid&lt;/code&gt;Â è¿™ä¸ªæ–‡ä»¶é‡å‘½åä¸ºÂ &lt;code&gt;nginx.pid.oldbin&lt;/code&gt;ï¼Œç„¶åå†ç”± fork å‡ºæ¥çš„æ–°çš„ master å»åˆ›å»ºæ–°çš„Â &lt;code&gt;nginx.pid&lt;/code&gt;ï¼Œè¿™ä¸ªæ–‡ä»¶å°†ä¼šè®°å½•æ–° master çš„ pidã€‚nginx è®¤ä¸ºçƒ­æ›´æ–°å®Œæˆä¹‹åï¼Œæ—§ master çš„ä½¿å‘½å‡ ä¹å·²ç»ç»“æŸï¼Œä¹‹åå®ƒéšæ—¶ä¼šé€€å‡ºï¼Œå› æ­¤ä¹‹åçš„æ“ä½œéƒ½åº”è¯¥ç”±æ–° master æ¥ç®¡ã€‚å½“ç„¶ï¼Œåœ¨æ—§ master æ²¡æœ‰é€€å‡ºçš„æƒ…å†µä¸‹é€šè¿‡å‘æ–° master å‘é€Â &lt;code&gt;SIGUSR2&lt;/code&gt;Â ä¼å›¾å†æ¬¡çƒ­æ›´æ–°æ˜¯æ— æ•ˆçš„ï¼Œæ–° master åªä¼šå¿½ç•¥æ‰è¿™ä¸ªä¿¡å·ç„¶åç»§ç»­å®ƒè‡ªå·±çš„å·¥ä½œã€‚&lt;/p&gt;
&lt;h2&gt;é—®é¢˜åˆ†æ&lt;/h2&gt;
&lt;p&gt;æ›´ä¸å·§çš„æ˜¯ï¼Œæˆ‘ä»¬ä¸Šé¢æåˆ°çš„è¿™ä¸ª Lua tableï¼Œå®šä¹‰å®ƒçš„ Lua æ–‡ä»¶æ—©åœ¨è¿è¡Œ init_by_lua è¿™ä¸ª hook çš„æ—¶å€™ï¼Œå°±å·²ç»è¢« LuaJIT åŠ è½½åˆ°å†…å­˜å¹¶ç¼–è¯‘æˆå­—èŠ‚ç äº†ï¼Œé‚£ä¹ˆæ˜¾ç„¶æ—§çš„ master å¿…ç„¶æ²¡æœ‰è¿™ä¸ª Lua tableï¼Œå› ä¸ºå®ƒåŠ è½½é‚£éƒ¨åˆ† Lua ä»£ç æ˜¯æ—§ç‰ˆæœ¬çš„ã€‚&lt;/p&gt;
&lt;p&gt;è€Œç´¢å¼•è¯¥ table çš„ Lua ä»£ç å¹¶æ²¡æœ‰åœ¨ init_by_lua çš„æ—¶å€™ä½¿ç”¨åˆ°ï¼Œè¿™äº›ä»£ç éƒ½æ˜¯åœ¨ worker è¿›ç¨‹é‡Œè¢«åŠ è½½èµ·æ¥çš„ï¼Œè¿™æ—¶å€™é¡¹ç›®ç›®å½•é‡Œçš„ä»£ç éƒ½æ˜¯æœ€æ–°çš„ï¼Œæ‰€ä»¥ worker è¿›ç¨‹åŠ è½½çš„éƒ½æ˜¯æœ€æ–°çš„ä»£ç ï¼Œå¦‚æœè¿™äº› worker è¿›ç¨‹å¤„ç†åˆ°ç›¸å…³çš„è¯·æ±‚ï¼Œå°±ä¼šå‡ºç° Lua è¿è¡Œæ—¶é”™è¯¯ï¼Œå¤–éƒ¨è¡¨ç°åˆ™æ˜¯å¯¹åº”çš„ HTTP 500ã€‚&lt;/p&gt;
&lt;p&gt;å¸æ”¶äº†è¿™ä¸ªæ•™è®­ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦æ›´åŠ åˆç†åœ°å…³é—­æˆ‘ä»¬çš„ nginx æœåŠ¡ã€‚ æ‰€ä»¥ä¸€ä¸ªæ›´åŠ åˆç†çš„ nginx æœåŠ¡å¯åŠ¨å…³é—­è„šæœ¬æ˜¯å¿…éœ€çš„ï¼Œç½‘ä¸Šæµä¼ çš„ä¸€äº›è„šæœ¬å¹¶æ²¡æœ‰å¯¹è¿™ä¸ªç°è±¡åšå¤„ç†ï¼Œæˆ‘ä»¬æ›´åº”è¯¥å‚è€ƒ NGINX å®˜æ–¹æä¾›çš„è„šæœ¬ã€‚&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;6.5&quot;&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
stop() {
    echo -n $&quot;Stopping $prog: &quot;
    killproc $prog -QUIT
    retval=$?
    echo
    [ $retval -eq 0 ] &amp;amp;&amp;amp; rm -f $lockfile
    return $retval
}
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;p&gt;è¿™æ®µä»£ç å¼•è‡ª NGINX å®˜æ–¹çš„Â &lt;a class=&quot; wrap external&quot; href=&quot;http://link.zhihu.com/?target=https%3A//www.nginx.com/resources/wiki/start/topics/examples/redhatnginxinit/&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;/etc/init.d/nginx&lt;/a&gt;Â ã€‚&lt;/p&gt;
&lt;h2&gt;nginx ä¿¡å·é›†&lt;/h2&gt;
&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å…¨é¢æ¢³ç†ä¸‹ nginx ä¿¡å·é›†ï¼Œè¿™é‡Œä¸ä¼šæ¶‰åŠåˆ°æºç ç»†èŠ‚ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è‡ªè¡Œé˜…è¯»ç›¸å…³æºç ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æœ‰ä¸¤ç§æ–¹å¼æ¥å‘ master è¿›ç¨‹å‘é€ä¿¡å·ï¼Œä¸€ç§æ˜¯é€šè¿‡&lt;span&gt;Â &lt;code&gt;nginx -s signal&lt;/code&gt;&lt;/span&gt;Â æ¥æ“ä½œï¼Œå¦ä¸€ç§æ˜¯é€šè¿‡ kill å‘½ä»¤æ‰‹åŠ¨å‘é€ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€ç§æ–¹å¼çš„åŸç†æ˜¯ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°è¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹é€šè¿‡Â &lt;span&gt;&lt;code&gt;nginx.pid&lt;/code&gt;Â &lt;/span&gt;æ–‡ä»¶å¾—åˆ° master è¿›ç¨‹çš„ pidï¼Œç„¶åæŠŠå¯¹åº”çš„ä¿¡å·å‘é€åˆ° masterï¼Œä¹‹åé€€å‡ºï¼Œè¿™ç§è¿›ç¨‹è¢«ç§°ä¸º signallerã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒç§æ–¹å¼è¦æ±‚æˆ‘ä»¬äº†è§£&lt;span&gt;Â &lt;code&gt;nginx -s signal&lt;/code&gt;&lt;/span&gt;Â åˆ°çœŸå®ä¿¡å·çš„æ˜ å°„ã€‚ä¸‹è¡¨æ˜¯å®ƒä»¬çš„æ˜ å°„å…³ç³»ï¼š&lt;/p&gt;
&lt;p&gt;operationsignalreloadSIGHUPreopenSIGUSR1stopSIGTERMquitSIGQUIThot updateSIGUSR2 &amp;amp; SIGWINCH &amp;amp; SIGQUIT&lt;/p&gt;
&lt;h2&gt;stop vs quit&lt;/h2&gt;
&lt;p&gt;stop å‘é€ SIGTERM ä¿¡å·ï¼Œè¡¨ç¤ºè¦æ±‚å¼ºåˆ¶é€€å‡ºï¼Œquit å‘é€Â &lt;span&gt;&lt;code&gt;SIGQUIT&lt;/code&gt;&lt;/span&gt;ï¼Œè¡¨ç¤ºä¼˜é›…åœ°é€€å‡ºã€‚ å…·ä½“åŒºåˆ«åœ¨äºï¼Œworker è¿›ç¨‹åœ¨æ”¶åˆ°Â &lt;span&gt;&lt;code&gt;SIGQUIT&lt;/code&gt;&lt;/span&gt;Â æ¶ˆæ¯ï¼ˆæ³¨æ„ä¸æ˜¯ç›´æ¥å‘é€ä¿¡å·ï¼Œæ‰€ä»¥è¿™é‡Œç”¨æ¶ˆæ¯æ›¿ä»£ï¼‰åï¼Œä¼šå…³é—­ç›‘å¬çš„å¥—æ¥å­—ï¼Œå…³é—­å½“å‰ç©ºé—²çš„è¿æ¥ï¼ˆå¯ä»¥è¢«æŠ¢å çš„è¿æ¥ï¼‰ï¼Œç„¶åæå‰å¤„ç†æ‰€æœ‰çš„å®šæ—¶å™¨äº‹ä»¶ï¼Œæœ€åé€€å‡ºã€‚æ²¡æœ‰ç‰¹æ®Šæƒ…å†µï¼Œéƒ½åº”è¯¥ä½¿ç”¨ quit è€Œä¸æ˜¯ stopã€‚&lt;/p&gt;
&lt;h2&gt;reload&lt;/h2&gt;
&lt;p&gt;master è¿›ç¨‹æ”¶åˆ°Â &lt;code&gt;SIGHUP&lt;/code&gt;Â åï¼Œä¼šé‡æ–°è¿›è¡Œé…ç½®æ–‡ä»¶è§£æã€å…±äº«å†…å­˜ç”³è¯·ï¼Œç­‰ä¸€ç³»åˆ—å…¶ä»–çš„å·¥ä½œï¼Œç„¶åäº§ç”Ÿä¸€æ‰¹æ–°çš„ worker è¿›ç¨‹ï¼Œæœ€åå‘æ—§çš„ worker è¿›ç¨‹å‘é€Â &lt;code&gt;SIGQUIT&lt;/code&gt;Â å¯¹åº”çš„æ¶ˆæ¯ï¼Œæœ€ç»ˆæ— ç¼å®ç°äº†é‡å¯æ“ä½œã€‚&lt;/p&gt;
&lt;h2&gt;reopen&lt;/h2&gt;
&lt;p&gt;master è¿›ç¨‹æ”¶åˆ°Â &lt;code&gt;SIGUSR1&lt;/code&gt;Â åï¼Œä¼šé‡æ–°æ‰“å¼€æ‰€æœ‰å·²ç»æ‰“å¼€çš„æ–‡ä»¶ï¼ˆæ¯”å¦‚æ—¥å¿—ï¼‰ï¼Œç„¶åå‘æ¯ä¸ª worker è¿›ç¨‹å‘é€Â &lt;code&gt;SIGUSR1&lt;/code&gt;Â ä¿¡æ¯ï¼Œworker è¿›ç¨‹æ”¶åˆ°ä¿¡å·åï¼Œä¼šæ‰§è¡ŒåŒæ ·çš„æ“ä½œã€‚reopen å¯ç”¨äºæ—¥å¿—åˆ‡å‰²ï¼Œæ¯”å¦‚ NGINX å®˜æ–¹å°±æä¾›äº†ä¸€ä¸ªæ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;6.5&quot;&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
$ mv access.log access.log.0
$ kill -USR1 `cat master.nginx.pid`
$ sleep 1
$ gzip access.log.0    # do something with access.log.0
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;p&gt;è¿™é‡ŒÂ &lt;code&gt;sleep 1&lt;/code&gt;Â æ˜¯å¿…é¡»çš„ï¼Œå› ä¸ºåœ¨ master è¿›ç¨‹å‘ worker è¿›ç¨‹å‘é€Â &lt;code&gt;SIGUSR1&lt;/code&gt;Â æ¶ˆæ¯åˆ° worker è¿›ç¨‹çœŸæ­£é‡æ–°æ‰“å¼€Â &lt;code&gt;access.log&lt;/code&gt;Â ä¹‹é—´ï¼Œæœ‰ä¸€æ®µæ—¶é—´çª—å£ï¼Œæ­¤æ—¶ worker è¿›ç¨‹è¿˜æ˜¯å‘æ–‡ä»¶Â &lt;code&gt;access.log.0&lt;/code&gt;Â é‡Œå†™å…¥æ—¥å¿—çš„ã€‚é€šè¿‡ sleep 1sï¼Œä¿è¯äº†Â &lt;code&gt;access.log.0&lt;/code&gt;Â æ—¥å¿—ä¿¡æ¯çš„å®Œæ•´æ€§ï¼ˆå¦‚æœæ²¡æœ‰ sleep è€Œç›´æ¥è¿›è¡Œå‹ç¼©ï¼Œå¾ˆæœ‰å¯èƒ½å‡ºç°æ—¥å¿—ä¸¢å¤±çš„æƒ…å†µï¼‰ã€‚&lt;/p&gt;
&lt;h2&gt;hot update&lt;/h2&gt;
&lt;p&gt;æŸäº›æ—¶å€™æˆ‘ä»¬éœ€è¦è¿›è¡ŒäºŒè¿›åˆ¶çƒ­æ›´æ–°ï¼Œnginx åœ¨è®¾è®¡çš„æ—¶å€™å°±åŒ…å«äº†è¿™ç§åŠŸèƒ½ï¼Œä¸è¿‡æ— æ³•é€šè¿‡ nginx æä¾›çš„å‘½ä»¤è¡Œå®Œæˆï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å‘é€ä¿¡å·ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡ä¸Šé¢çš„é—®é¢˜å¤ç°ï¼Œå¤§å®¶åº”è¯¥å·²ç»äº†è§£åˆ°å¦‚ä½•è¿›è¡Œçƒ­æ›´æ–°äº†ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ç»™å½“å‰çš„ master è¿›ç¨‹å‘é€Â &lt;span&gt;&lt;code&gt;SIGUSR2&lt;/code&gt;&lt;/span&gt;ï¼Œä¹‹å master ä¼šé‡å‘½åÂ &lt;code&gt;nginx.pid&lt;/code&gt;Â åˆ°Â &lt;code&gt;nginx.pid.oldbin&lt;/code&gt;ï¼Œç„¶å fork ä¸€ä¸ªæ–°çš„è¿›ç¨‹ï¼Œæ–°è¿›ç¨‹ä¼šé€šè¿‡Â &lt;code&gt;execve&lt;/code&gt;Â è¿™ä¸ªç³»ç»Ÿè°ƒç”¨ï¼Œä½¿ç”¨æ–°çš„ nginx ELF æ–‡ä»¶æ›¿æ¢å½“å‰çš„è¿›ç¨‹æ˜ åƒï¼Œæˆä¸ºæ–°çš„ master è¿›ç¨‹ã€‚æ–° master è¿›ç¨‹èµ·æ¥ä¹‹åï¼Œå°±ä¼šè¿›è¡Œé…ç½®æ–‡ä»¶è§£æç­‰æ“ä½œï¼Œç„¶å fork å‡ºæ–°çš„ worker è¿›ç¨‹å¼€å§‹å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;æ¥ç€æˆ‘ä»¬å‘æ—§çš„ master å‘é€Â &lt;span&gt;&lt;code&gt;SIGWINCH&lt;/code&gt;&lt;/span&gt;Â ä¿¡å·ï¼Œç„¶åæ—§çš„ master è¿›ç¨‹åˆ™ä¼šå‘å®ƒçš„ worker è¿›ç¨‹å‘é€Â &lt;code&gt;SIGQUIT&lt;/code&gt;Â ä¿¡æ¯ï¼Œä»è€Œä½¿å¾— worker è¿›ç¨‹é€€å‡ºã€‚å‘ master è¿›ç¨‹å‘é€Â &lt;span&gt;&lt;code&gt;SIGWINCH&lt;/code&gt;&lt;/span&gt;Â å’ŒÂ &lt;span&gt;&lt;code&gt;SIGQUIT&lt;/code&gt;&lt;/span&gt;Â éƒ½ä¼šä½¿å¾— worker è¿›ç¨‹é€€å‡ºï¼Œä½†æ˜¯å‰è€…ä¸ä¼šä½¿å¾— master è¿›ç¨‹ä¹Ÿé€€å‡ºã€‚&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œå¦‚æœæˆ‘ä»¬è§‰å¾—æ—§çš„ master è¿›ç¨‹ä½¿å‘½å®Œæˆï¼Œå°±å¯ä»¥å‘å®ƒå‘é€Â &lt;span&gt;&lt;code&gt;SIGQUIT&lt;/code&gt;&lt;/span&gt;Â ä¿¡å·ï¼Œè®©å…¶é€€å‡ºäº†ã€‚&lt;/p&gt;
&lt;h2&gt;worker è¿›ç¨‹å¦‚ä½•å¤„ç†æ¥è‡ª master çš„ä¿¡å·æ¶ˆæ¯&lt;/h2&gt;
&lt;p&gt;å®é™…ä¸Šï¼Œmaster è¿›ç¨‹å†å‘ worker è¿›ç¨‹é€šè®¯ï¼Œä¸æ˜¯ä½¿ç”¨ kill å‡½æ•°ï¼Œè€Œæ˜¯ä½¿ç”¨äº†é€šè¿‡ç®¡é“å®ç°çš„ nginx channelï¼Œmaster è¿›ç¨‹å‘ç®¡é“ä¸€ç«¯å†™å…¥ä¿¡æ¯ï¼ˆæ¯”å¦‚ä¿¡å·ä¿¡æ¯ï¼‰ï¼Œworker è¿›ç¨‹åˆ™ä»å¦å¤–ä¸€ç«¯æ”¶å–ä¿¡æ¯ï¼Œnginx channel äº‹ä»¶ï¼Œåœ¨ worker è¿›ç¨‹åˆšåˆšèµ·æ¥çš„æ—¶å€™ï¼Œå°±è¢«åŠ å…¥äº‹ä»¶è°ƒåº¦å™¨ä¸­ï¼ˆæ¯”å¦‚ epollï¼Œkqueueï¼‰ï¼Œæ‰€ä»¥å½“æœ‰æ•°æ®ä» master å‘æ¥æ—¶ï¼Œå³å¯è¢«äº‹ä»¶è°ƒåº¦å™¨é€šçŸ¥åˆ°ã€‚&lt;/p&gt;
&lt;p&gt;nginx è¿™ä¹ˆè®¾è®¡æ˜¯æœ‰ç†ç”±çš„ï¼Œä½œä¸ºä¸€ä¸ªä¼˜ç§€çš„åå‘ä»£ç†æœåŠ¡å™¨ï¼Œnginx è¿½æ±‚çš„å°±æ˜¯æè‡´çš„é«˜æ€§èƒ½ï¼Œè€Œ signal handler ä¼šä¸­æ–­ worker è¿›ç¨‹çš„è¿è¡Œï¼Œä½¿å¾—æ‰€æœ‰çš„äº‹ä»¶éƒ½è¢«æš‚åœä¸€ä¸ªæ—¶é—´çª—å£ï¼Œè¿™å¯¹æ€§èƒ½æ˜¯æœ‰ä¸€å®šæŸå¤±çš„ã€‚&lt;/p&gt;
&lt;p&gt;å¾ˆå¤šäººå¯èƒ½ä¼šè®¤ä¸ºå½“ master è¿›ç¨‹å‘ worker è¿›ç¨‹å‘é€ä¿¡æ¯ä¹‹åï¼Œworker è¿›ç¨‹ç«‹åˆ»ä¼šæœ‰å¯¹åº”æ“ä½œå›åº”ï¼Œç„¶è€Œ worker è¿›ç¨‹æ˜¯éå¸¸ç¹å¿™çš„ï¼Œå®ƒä¸æ–­åœ°å¤„ç†ç€ç½‘ç»œäº‹ä»¶å’Œå®šæ—¶å™¨äº‹ä»¶ï¼Œå½“è°ƒç”¨ nginx channel äº‹ä»¶çš„ handler ä¹‹åï¼Œnginx ä»…ä»…åªæ˜¯å¤„ç†äº†ä¸€äº›æ ‡å¿—ä½ã€‚çœŸæ­£æ‰§è¡Œè¿™äº›åŠ¨ä½œæ˜¯åœ¨ä¸€è½®äº‹ä»¶è°ƒåº¦å®Œæˆä¹‹åã€‚æ‰€ä»¥è¿™ä¹‹é—´å­˜åœ¨ä¸€ä¸ªæ—¶é—´çª—å£ï¼Œå°¤å…¶æ˜¯ä¸šåŠ¡å¤æ‚ä¸”æµé‡å·¨å¤§çš„æ—¶å€™ï¼Œè¿™ä¸ªçª—å£å°±æœ‰å¯èƒ½è¢«æ”¾å¤§ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆ NGINX å®˜æ–¹æä¾›çš„æ—¥å¿—åˆ‡å‰²æ–¹æ¡ˆé‡Œè¦æ±‚ sleep 1s çš„åŸå› ã€‚&lt;/p&gt;
&lt;p&gt;å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç»•è¿‡ master è¿›ç¨‹ï¼Œç›´æ¥å‘ worker è¿›ç¨‹å‘é€ä¿¡å·ï¼Œworker å¯ä»¥å¤„ç†çš„ä¿¡å·æœ‰&lt;/p&gt;
&lt;p&gt;&lt;span&gt;signaleffectSIGINT&lt;/span&gt;å¼ºåˆ¶é€€å‡º&lt;span&gt;SIGTERM&lt;/span&gt;å¼ºåˆ¶é€€å‡º&lt;span&gt;SIGQUIT&lt;/span&gt;ä¼˜é›…é€€å‡º&lt;span&gt;SIGUSR1&lt;/span&gt;é‡æ–°æ‰“å¼€æ–‡ä»¶&lt;/p&gt;
&lt;h2&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;nginx ä¿¡å·æ“ä½œåœ¨æ—¥å¸¸è¿ç»´ä¸­æ˜¯æœ€å¸¸è§çš„ï¼Œä¹Ÿæ˜¯éå¸¸é‡è¦çš„ï¼Œè¿™ä¸ªç¯èŠ‚å¦‚æœå‡ºç°å¤±è¯¯åˆ™å¯èƒ½é€ æˆä¸šåŠ¡å¼‚å¸¸ï¼Œå¸¦æ¥æŸå¤±ã€‚æ‰€ä»¥ç†æ¸…æ¥š nginx ä¿¡å·é›†æ˜¯éå¸¸å¿…è¦çš„ï¼Œèƒ½å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°å¤„ç†è¿™äº›å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–ï¼Œé€šè¿‡è¿™æ¬¡çš„ç»éªŒæ•™è®­å’Œå¯¹ nginx ä¿¡å·é›†çš„è®¤çŸ¥ï¼Œæˆ‘ä»¬è®¤ä¸ºä»¥ä¸‹å‡ ç‚¹æ˜¯æ¯”è¾ƒé‡è¦çš„ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æ…ç”¨Â &lt;span&gt;&lt;code&gt;nginx -s stop&lt;/code&gt;&lt;/span&gt;ï¼Œå°½å¯èƒ½ä½¿ç”¨Â &lt;span&gt;&lt;code&gt;nginx -s quit&lt;/code&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;çƒ­æ›´æ–°ä¹‹åï¼Œå¦‚æœç¡®å®šä¸šåŠ¡æ²¡é—®é¢˜ï¼Œå°½å¯èƒ½è®©æ—§çš„ master è¿›ç¨‹é€€å‡º&lt;/li&gt;
&lt;li&gt;å…³é”®æ€§çš„ä¿¡å·æ“ä½œå®Œæˆåï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œé¿å…æ—¶é—´çª—å£çš„å½±å“&lt;/li&gt;
&lt;li&gt;ä¸è¦ç›´æ¥å‘ worker è¿›ç¨‹å‘é€ä¿¡å·&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;æ¨èé˜…è¯»ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot; wrap external&quot; href=&quot;http://link.zhihu.com/?target=https%3A//tech.upyun.com/article/257/%25E5%2590%25AF%25E7%2594%25A8%2520Brotli%2520%25E5%258E%258B%25E7%25BC%25A9%25E7%25AE%2597%25E6%25B3%2595%25EF%25BC%258C%25E5%25AF%25B9%25E6%25AF%2594%2520Gzip%2520%25E5%258E%258B%25E7%25BC%25A9%2520CDN%2520%25E6%25B5%2581%25E9%2587%258F%25E5%2586%258D%25E5%2587%258F%25E5%25B0%2591%252020%2525.html&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;å¯ç”¨ Brotli å‹ç¼©ç®—æ³•ï¼Œå¯¹æ¯” Gzip å‹ç¼© CDN æµé‡å†å‡å°‘ 20%&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot; wrap external&quot; href=&quot;http://link.zhihu.com/?target=https%3A//tech.upyun.com/article/258/HTTPS%2520%25E4%25BC%25A0%25E8%25BE%2593%25E4%25BC%2598%25E5%258C%2596%25E8%25AF%25A6%25E8%25A7%25A3%25E4%25B9%258B%25E5%258A%25A8%25E6%2580%2581%2520TLS%2520Record%2520Size.html&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;HTTPS ä¼ è¾“ä¼˜åŒ–è¯¦è§£ä¹‹åŠ¨æ€ TLS Record Size&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Wed, 29 Nov 2017 04:03:00 +0000</pubDate>
<dc:creator>åˆæ‹äº‘</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/upyun/p/7919657.html</dc:identifier>
</item>
<item>
<title>SQL è¿½è¸ª - æ‚¦å…‰é˜´</title>
<link>http://www.cnblogs.com/ljhdo/p/4649515.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/ljhdo/p/4649515.html</guid>
<description>&lt;p&gt;SQLè¿½è¸ªï¼ˆSQL Traceï¼‰æ˜¯ä¸€ä¸ªè½»é‡çº§çš„è¿½è¸ªå·¥å…·ï¼ŒæŒ‰ç…§äº‹ä»¶ï¼ˆEventsï¼‰è®°å½•æ•°æ®åº“å‘ç”Ÿçš„æ¶ˆæ¯ï¼Œå‡ ä¹å¯¹æ•°æ®åº“æ€§èƒ½æ²¡æœ‰ä»€ä¹ˆå½±å“ã€‚SQL Serverå†…ç½®ä¸€ä¸ªTraceï¼Œç§°ä½œé»˜è®¤è¿½è¸ªï¼ˆDefault Traceï¼‰ï¼Œé»˜è®¤è¿½è¸ªçš„IDæ˜¯1ï¼Œå¤§å®¶ç»å¸¸ä½¿ç”¨çš„SQL Server Profilerï¼Œå°±æ˜¯åˆ©ç”¨SQL Traceè®°å½•æ•°æ®åº“æ´»åŠ¨çš„ä¸€ä¸ªå·¥å…·ã€‚SQL Traceåœ¨SQL Serveræ•°æ®åº“å¼•æ“ç§å‡ºç°çš„æ¯”è¾ƒæ—©ï¼Œå¯ä»¥è¢«æ€§èƒ½å’ŒåŠŸèƒ½æ›´å“è¶Šçš„æ‰©å±•äº‹ä»¶ï¼ˆExtended Eventsï¼‰å–ä»£ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸€ï¼ŒæŸ¥çœ‹é»˜è®¤è¿½è¸ªæ˜¯å¦å¯ç”¨&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é»˜è®¤è¿½è¸ªæ˜¯ç³»ç»Ÿå†…ç½®çš„ï¼ŒTraceIDæ˜¯1ï¼Œé»˜è®¤æ˜¯å¼€å¯çš„ï¼Œå¯ä»¥é€šè¿‡ç³»ç»Ÿé…ç½®è¡¨ sys.configurations è¿›è¡ŒæŸ¥çœ‹ï¼Œé…ç½®é¡¹IDï¼ˆconfiguration_idï¼‰æ˜¯1568ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images0.cnblogs.com/blog2015/628084/201507/152056119548283.png&quot; alt=&quot;&quot; width=&quot;863&quot; height=&quot;45&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å­—æ®µ value=1ï¼Œè¡¨ç¤ºDefault Traceæ˜¯å¼€å¯çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;äºŒï¼Œç¦ç”¨æˆ–å¯ç”¨é»˜è®¤è¿½è¸ª&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœé»˜è®¤è¿½è¸ªè¢«ç¦ç”¨ï¼Œéœ€è¦é‡æ–°é…ç½®å¯ç”¨é»˜è®¤è¿½è¸ªï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;exec&lt;/span&gt; sp_configure &lt;span&gt;'&lt;/span&gt;&lt;span&gt;show advanced options&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; , &lt;span&gt;1&lt;/span&gt;&lt;span&gt; ;
&lt;/span&gt;&lt;span&gt;go&lt;/span&gt;
&lt;span&gt;reconfigure&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;go&lt;/span&gt;

&lt;span&gt;exec&lt;/span&gt; sp_configure &lt;span&gt;'&lt;/span&gt;&lt;span&gt;default trace enabled&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; , &lt;span&gt;1&lt;/span&gt;&lt;span&gt; ;
&lt;/span&gt;&lt;span&gt;go&lt;/span&gt;
&lt;span&gt;reconfigure&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;go&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¦‚æœé»˜è®¤è¿½è¸ªå·²ç»å¯ç”¨ï¼Œå¯ä»¥é‡æ–°é…ç½®ç¦ç”¨é»˜è®¤è¿½è¸ªï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;exec&lt;/span&gt; sp_configure &lt;span&gt;'&lt;/span&gt;&lt;span&gt;default trace enabled&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; , &lt;span&gt;0&lt;/span&gt;&lt;span&gt; ;
&lt;/span&gt;&lt;span&gt;go&lt;/span&gt;
&lt;span&gt;reconfigure&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;go&lt;/span&gt;

&lt;span&gt;exec&lt;/span&gt; sp_configure &lt;span&gt;'&lt;/span&gt;&lt;span&gt;show advanced options&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; , &lt;span&gt;0&lt;/span&gt;&lt;span&gt; ;
&lt;/span&gt;&lt;span&gt;go&lt;/span&gt;
&lt;span&gt;reconfigure&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;go&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;ä¸‰ï¼ŒæŸ¥çœ‹é»˜è®¤è¿½è¸ªçš„ä¿¡æ¯&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é»˜è®¤è¿½è¸ªè®°å½•çš„æ•°æ®å­˜å‚¨åœ¨æ–‡ä»¶ä¸­ï¼Œå¯ä»¥ä»ç³»ç»Ÿè§†å›¾ sys.tracesæŸ¥çœ‹æ–‡ä»¶çš„è·¯å¾„ï¼Œæ–‡ä»¶çš„å¤§å°ï¼ˆSizeï¼‰å’Œæ–‡ä»¶çš„æ›´æ–°æ–¹å¼ç­‰ä¿¡æ¯ï¼Œè¿½è¸ªæ–‡ä»¶é»˜è®¤çš„æ‰©å±•åæ˜¯ .trcã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;49&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt;&lt;span&gt; id
    ,iif(status&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;running&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;stopped&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;) &lt;span&gt;as&lt;/span&gt;&lt;span&gt; status
    ,path
    ,max_size
    ,start_time
    ,stop_time
    ,event_count
    ,max_files
    ,is_rowset
    ,is_rollover
    ,is_shutdown
    ,is_default
    ,buffer_count
    ,buffer_size &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; each_buffer_size
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt;&lt;span&gt; sys.traces
&lt;/span&gt;&lt;span&gt;where&lt;/span&gt; id&lt;span&gt;=&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;é»˜è®¤è¿½è¸ªæœ‰5ä¸ªè·Ÿè¸ªæ–‡ä»¶ï¼Œæ¯ä¸€ä¸ªæ–‡ä»¶çš„æœ€å¤§sizeé»˜è®¤æ˜¯20MBï¼ŒSQL Serverè´Ÿè´£ç»´æŠ¤è¿™5ä¸ªæ–‡ä»¶ï¼Œå½“å®ä¾‹é‡å¯çš„æ—¶å€™æˆ–è€…åˆ°è¾¾æ–‡ä»¶Sizeæœ€å¤§å€¼çš„æ—¶å€™ï¼ŒSQL Serveråˆ›å»ºæ–°çš„æ–‡ä»¶ï¼Œå°†æœ€æ—©çš„è·Ÿè¸ªæ–‡ä»¶åˆ é™¤ï¼Œä¾æ¬¡æ»šåŠ¨ï¼ˆRolloverï¼‰æ›´æ–°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å››ï¼ŒæŸ¥çœ‹è¿½è¸ªæ–‡ä»¶çš„å†…å®¹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å‡½æ•°sys.fn_trace_gettableï¼Œç”¨äºä»è¿½è¸ªæ–‡ä»¶ä¸­è¯»å–æ•°æ®ï¼Œä»¥å…³ç³»è¡¨çš„æ ¼å¼æ˜¾å¼ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
sys.fn_trace_gettable ( &lt;span&gt;'&lt;/span&gt;&lt;span&gt;filename&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; , number_files )
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å‚æ•°filenameï¼šç”¨äºæŒ‡å®šè¿½è¸ªæ–‡ä»¶çš„åç§°ï¼Œå…¶å€¼å¯ä»¥ä»ç³»ç»Ÿè§†å›¾sys.traces ä¸­çš„pathè·å–ï¼›&lt;/p&gt;
&lt;p&gt;å‚æ•°number_filesï¼šå¦‚æœnumber_filesÂ è¢«æŒ‡å®šä¸ºdefaultï¼Œå‡½æ•°è¯»å–æ‰€æœ‰çš„æ»šåŠ¨æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;å‡½æ•°è¿”å›çš„æ˜¯å…³ç³»è¡¨ï¼Œæœ‰æ•ˆå­—æ®µæ˜¯ï¼šè¿½è¸ªå…³è”çš„äº‹ä»¶ç»‘å®šçš„å­—æ®µï¼Œ&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; 
&lt;span&gt;from&lt;/span&gt; sys.fn_trace_gettable(N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;C:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\Log\log_4.trc&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;default&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;äº”ï¼ŒæŸ¥çœ‹é»˜è®¤è¿½è¸ªè®°å½•çš„äº‹ä»¶åˆ—è¡¨&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å‡½æ•°fn_trace_geteventinfo(trace_id)è¿”å›è¿½è¸ªå…³è”çš„äº‹ä»¶åˆ—è¡¨ï¼Œä½¿ç”¨è¯¥å‡½æ•°å¯ä»¥æŸ¥çœ‹é»˜è®¤è¿½è¸ªè®°å½•çš„äº‹ä»¶å’Œäº‹ä»¶çš„ç‰¹å®šå­—æ®µï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;42&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; categ.name &lt;span&gt;as&lt;/span&gt;&lt;span&gt; category,
    te.trace_event_id &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; event_id, 
    te.name &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; event_name,
    tc.trace_column_id &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; event_column_id,
    tc.name &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; column_name,
    tc.type_name &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; column_type
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; sys.fn_trace_geteventinfo(&lt;span&gt;1&lt;/span&gt;) &lt;span&gt;as&lt;/span&gt;&lt;span&gt; gei
&lt;/span&gt;&lt;span&gt;inner&lt;/span&gt; &lt;span&gt;join&lt;/span&gt;&lt;span&gt; sys.trace_columns tc 
    &lt;/span&gt;&lt;span&gt;on&lt;/span&gt; gei.columnid&lt;span&gt;=&lt;/span&gt;&lt;span&gt;tc.trace_column_id
&lt;/span&gt;&lt;span&gt;inner&lt;/span&gt; &lt;span&gt;join&lt;/span&gt;&lt;span&gt; sys.trace_events te 
    &lt;/span&gt;&lt;span&gt;on&lt;/span&gt; gei.eventid&lt;span&gt;=&lt;/span&gt;&lt;span&gt;te.trace_event_id
&lt;/span&gt;&lt;span&gt;inner&lt;/span&gt; &lt;span&gt;join&lt;/span&gt;&lt;span&gt; sys.trace_categories categ
    &lt;/span&gt;&lt;span&gt;on&lt;/span&gt; te.category_id&lt;span&gt;=&lt;/span&gt;&lt;span&gt;categ.category_id
&lt;/span&gt;&lt;span&gt;order&lt;/span&gt; &lt;span&gt;by&lt;/span&gt; category,event_id,event_column_id
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;å…­ï¼ŒæŸ¥çœ‹äº‹ä»¶å’ŒCategory&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Categoryç”¨äºç»„ç»‡äº‹ä»¶ï¼ˆEventï¼‰ï¼Œåœ¨SQL Server 2012ä¸­ï¼Œå…±æœ‰21ä¸ªCategoryï¼Œ180ä¸ªEventï¼Œæ¯ä¸ªEventå±äºå”¯ä¸€çš„ä¸€ä¸ªCategoryã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; tc.name &lt;span&gt;as&lt;/span&gt;&lt;span&gt; category,
    te.trace_event_id &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; event_id,
    te.name &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; event_name
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt;&lt;span&gt; sys.trace_categories tc 
&lt;/span&gt;&lt;span&gt;inner&lt;/span&gt; &lt;span&gt;join&lt;/span&gt;&lt;span&gt; sys.trace_events te 
    &lt;/span&gt;&lt;span&gt;on&lt;/span&gt; tc.category_id&lt;span&gt;=&lt;/span&gt;&lt;span&gt;te.category_id
&lt;/span&gt;&lt;span&gt;order&lt;/span&gt; &lt;span&gt;by&lt;/span&gt; category,event_id
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;ä¸ƒï¼ŒæŸ¥çœ‹äº‹ä»¶ç»‘å®šçš„å­—æ®µ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨SQL Server 2012ä¸­ï¼Œäº‹ä»¶å…±æœ‰66ä¸ªå­—æ®µï¼Œä½†ä¸æ˜¯æ¯ä¸ªEventéƒ½èƒ½ç»‘å®šæ‰€æœ‰çš„66ä¸ªå­—æ®µï¼Œæ¯ä¸ªEventèƒ½å¤Ÿç»‘å®šçš„å­—æ®µæ˜¯å›ºå®šçš„ï¼Œç³»ç»Ÿé¢„å…ˆè®¾ç½®ï¼Œç”¨æˆ·ä¸èƒ½ä¿®æ”¹ï¼Œ&lt;span&gt;è§†å›¾Â &lt;strong&gt;sys.trace_event_bindings&lt;/strong&gt;Â ç”¨äºæ˜¾ç¤ºæ¯ä¸ªäº‹ä»¶ç»‘å®šçš„å­—æ®µã€‚&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;40&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; te.trace_event_id &lt;span&gt;as&lt;/span&gt;&lt;span&gt; event_id, 
    te.name &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; event_name,
    tc.trace_column_id &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; column_id,
    tc.name &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; column_name,
    tc.type_name &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; column_type
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt;&lt;span&gt; sys.trace_event_bindings teb 
&lt;/span&gt;&lt;span&gt;inner&lt;/span&gt; &lt;span&gt;join&lt;/span&gt;&lt;span&gt; sys.trace_columns tc 
    &lt;/span&gt;&lt;span&gt;on&lt;/span&gt; teb.trace_column_id&lt;span&gt;=&lt;/span&gt;&lt;span&gt;tc.trace_column_id
&lt;/span&gt;&lt;span&gt;inner&lt;/span&gt; &lt;span&gt;join&lt;/span&gt;&lt;span&gt; sys.trace_events te 
    &lt;/span&gt;&lt;span&gt;on&lt;/span&gt; teb.trace_event_id&lt;span&gt;=&lt;/span&gt;&lt;span&gt;te.trace_event_id
&lt;/span&gt;&lt;span&gt;order&lt;/span&gt; &lt;span&gt;by&lt;/span&gt; event_id,column_id
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;å…«ï¼Œä½¿ç”¨SQL Server Profileråˆ›å»ºSQL Trace&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœç”¨æˆ·éœ€è¦åˆ›å»ºè‡ªå®šä¹‰çš„è¿½è¸ªï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ç³»ç»Ÿæä¾›çš„å­˜å‚¨è¿‡ç¨‹æ¥å®ç°ï¼Œä½†æ˜¯ï¼Œä½¿ç”¨TSQLä»£ç åˆ›å»ºè¿½è¸ªçš„è¿‡ç¨‹ååˆ†ç¹çï¼Œä»£ç é‡åºå¤§ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸ç›´è§‚ã€‚å¤§å®¶çŸ¥é“ï¼ŒSQL Server Profileræ˜¯ä¸€ä¸ªå¯è§†åŒ–ç”¨äºæŸ¥çœ‹æ•°æ®åº“æ´»åŠ¨çš„å·¥å…·ï¼Œä½†æ˜¯ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªç”¨äºåˆ›å»ºSQL Traceçš„å·¥å…·ã€‚ä½¿ç”¨SQL Server Profileråˆ›å»ºSQL Traceçš„è¿‡ç¨‹ååˆ†ç®€å•ï¼šé€‰æ‹©ç›¸åº”çš„äº‹ä»¶å’Œäº‹ä»¶çš„å­—æ®µä¹‹åï¼Œå¯¼å‡ºSQL TraceÂ  çš„å®šä¹‰å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨åˆ›å»ºSQL Traceä¹‹åï¼Œç‚¹å‡»File-&amp;gt;Export-&amp;gt;Scipt Trace Definitionï¼ŒæŠŠSQL Server Profilerç”¨äºåˆ›å»ºSQL Traceçš„è„šæœ¬ä»£ç å¯¼å‡ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/628084/201711/628084-20171129114545987-1990872997.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¯¼å‡ºçš„è„šæœ¬å¦‚ä¸‹ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œå¿…é¡»ä¿®æ”¹ä¸€å¤„ä»£ç ï¼šåœ¨åˆ›å»ºTraceæ—¶ï¼ŒæŒ‡å®šå­˜å‚¨è¿½è¸ªæ•°æ®çš„æ–‡ä»¶ï¼ˆFileï¼‰ æˆ– å…³ç³»è¡¨ï¼ˆTableï¼‰ï¼Œä»…æ­¤è€Œå·²ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('c4ccaf94-2d84-4a6f-b03c-298ec08e34da')&quot; readability=&quot;40&quot;&gt;&lt;img id=&quot;code_img_closed_c4ccaf94-2d84-4a6f-b03c-298ec08e34da&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_c4ccaf94-2d84-4a6f-b03c-298ec08e34da&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('c4ccaf94-2d84-4a6f-b03c-298ec08e34da',event)&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_c4ccaf94-2d84-4a6f-b03c-298ec08e34da&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;75&quot;&gt;
&lt;pre&gt;
&lt;span&gt;--&lt;/span&gt;&lt;span&gt; Create a Queue&lt;/span&gt;
&lt;span&gt;declare&lt;/span&gt; &lt;span&gt;@rc&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;
&lt;span&gt;declare&lt;/span&gt; &lt;span&gt;@TraceID&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;
&lt;span&gt;declare&lt;/span&gt; &lt;span&gt;@maxfilesize&lt;/span&gt; &lt;span&gt;bigint&lt;/span&gt;
&lt;span&gt;set&lt;/span&gt; &lt;span&gt;@maxfilesize&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;5&lt;/span&gt;

&lt;span&gt;--&lt;/span&gt;&lt;span&gt; Client side File and Table cannot be scripted&lt;/span&gt;
&lt;span&gt;exec&lt;/span&gt; &lt;span&gt;@rc&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; sp_trace_create &lt;span&gt;@TraceID&lt;/span&gt; output, &lt;span&gt;0&lt;/span&gt;, N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;InsertFileNameHere&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@maxfilesize&lt;/span&gt;, &lt;span&gt;NULL&lt;/span&gt; 
&lt;span&gt;if&lt;/span&gt; (&lt;span&gt;@rc&lt;/span&gt; &lt;span&gt;!=&lt;/span&gt; &lt;span&gt;0&lt;/span&gt;) &lt;span&gt;goto&lt;/span&gt;&lt;span&gt; error

&lt;/span&gt;&lt;span&gt;--&lt;/span&gt;&lt;span&gt; Set the events&lt;/span&gt;
&lt;span&gt;declare&lt;/span&gt; &lt;span&gt;@on&lt;/span&gt; &lt;span&gt;bit&lt;/span&gt;
&lt;span&gt;set&lt;/span&gt; &lt;span&gt;@on&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;1&lt;/span&gt;
&lt;span&gt;exec&lt;/span&gt; sp_trace_setevent &lt;span&gt;@TraceID&lt;/span&gt;, &lt;span&gt;14&lt;/span&gt;, &lt;span&gt;1&lt;/span&gt;, &lt;span&gt;@on&lt;/span&gt;
&lt;span&gt;exec&lt;/span&gt; sp_trace_setevent &lt;span&gt;@TraceID&lt;/span&gt;, &lt;span&gt;14&lt;/span&gt;, &lt;span&gt;9&lt;/span&gt;, &lt;span&gt;@on&lt;/span&gt;

&lt;span&gt;--&lt;/span&gt;&lt;span&gt;delete many commands here ---&lt;/span&gt;

&lt;span&gt;--&lt;/span&gt;&lt;span&gt; Set the Filters&lt;/span&gt;
&lt;span&gt;declare&lt;/span&gt; &lt;span&gt;@intfilter&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;
&lt;span&gt;declare&lt;/span&gt; &lt;span&gt;@bigintfilter&lt;/span&gt; &lt;span&gt;bigint&lt;/span&gt;
&lt;span&gt;exec&lt;/span&gt; sp_trace_setfilter &lt;span&gt;@TraceID&lt;/span&gt;, &lt;span&gt;1&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;6&lt;/span&gt;, N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;%drop%&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;

&lt;span&gt;--&lt;/span&gt;&lt;span&gt; Set the trace status to start&lt;/span&gt;
&lt;span&gt;exec&lt;/span&gt; sp_trace_setstatus &lt;span&gt;@TraceID&lt;/span&gt;, &lt;span&gt;1&lt;/span&gt;

&lt;span&gt;--&lt;/span&gt;&lt;span&gt; display trace id for future references&lt;/span&gt;
&lt;span&gt;select&lt;/span&gt; TraceID&lt;span&gt;=&lt;/span&gt;&lt;span&gt;@TraceID&lt;/span&gt;
&lt;span&gt;goto&lt;/span&gt;&lt;span&gt; finish

error: 
&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; ErrorCode&lt;span&gt;=&lt;/span&gt;&lt;span&gt;@rc&lt;/span&gt;&lt;span&gt;

finish: 
&lt;/span&gt;&lt;span&gt;go&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;

&lt;p&gt;æ³¨ï¼šSQL Traceæ˜¯è¢«æ‰©å±•äº‹ä»¶å–ä»£çš„åŠŸèƒ½ï¼Œåœ¨åç»­çš„ç‰ˆæœ¬ä¸­å°†ä¼šè¢«ç§»é™¤ï¼Œå»ºè®®åœ¨ä»¥åçš„å¼€å‘ä¸­ä½¿ç”¨æ‰©å±•äº‹ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;å‚è€ƒæ–‡æ¡£ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.microsoft.com/en-us/sql/relational-databases/sql-trace/sql-trace&quot; target=&quot;_blank&quot;&gt;SQL Trace&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://msdn.microsoft.com/en-us/library/ms190292(v=sql.110).aspx&quot; target=&quot;_blank&quot;&gt;Server-wide Configuration Catalog Views (Transact-SQL)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://msdn.microsoft.com/en-us/library/ff848738(v=sql.110).aspx&quot; target=&quot;_blank&quot;&gt;System Trace Functions&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a id=&quot;cb_post_title_url&quot; href=&quot;http://www.cnblogs.com/gaizai/p/3358998.html&quot;&gt;SQL Server é»˜è®¤è·Ÿè¸ªï¼ˆDefault Traceï¼‰&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a id=&quot;cb_post_title_url&quot; class=&quot;postTitle2&quot; href=&quot;http://www.cnblogs.com/zhijianliutang/p/4113911.html&quot;&gt;SQL Serverä¸­å…³äºè·Ÿè¸ªï¼ˆTrace)é‚£ç‚¹äº‹&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Wed, 29 Nov 2017 03:52:00 +0000</pubDate>
<dc:creator>æ‚¦å…‰é˜´</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/ljhdo/p/4649515.html</dc:identifier>
</item>
<item>
<title>Android Appæ’ä»¶å¼æ¢è‚¤å®ç°æ–¹æ¡ˆ - Androidå¼€å‘8585</title>
<link>http://www.cnblogs.com/lzh-Linux/p/7919462.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/lzh-Linux/p/7919462.html</guid>
<description>&lt;p&gt;ç›®å‰å¾ˆå¤šappéƒ½å…·æœ‰æ¢è‚¤åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦åˆ‡æ¢ä¸åŒçš„çš®è‚¤ï¼Œä¸ºä½¿æˆ‘ä»¬çš„Appæ”¯æŒæ¢è‚¤åŠŸèƒ½ï¼Œç»™ç”¨æˆ·æä¾›æ›´å¥½çš„ä½“éªŒï¼Œåœ¨è¿™é‡Œå¯¹æ¢è‚¤åŸç†è¿›è¡Œç ”ç©¶æ€»ç»“ï¼Œå¹¶é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„æ¢è‚¤è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;


&lt;p&gt;Appæ¢è‚¤ä¸»è¦æ¶‰åŠçš„æœ‰é¡µé¢ä¸­æ–‡å­—çš„é¢œè‰²ã€æ§ä»¶çš„èƒŒæ™¯é¢œè‰²ã€ä¸€äº›å›¾ç‰‡èµ„æºå’Œä¸»é¢˜é¢œè‰²ç­‰èµ„æºã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å®ç°æ¢è‚¤èµ„æºä¸ä¸åŸé¡¹ç›®æ··æ·†ï¼Œå°½é‡é™ä½é£é™©ï¼Œå¯ä»¥å°†è¿™äº›èµ„æºå°è£…åœ¨ä¸€ä¸ªç‹¬ç«‹çš„Apkèµ„æºæ–‡ä»¶ä¸­ã€‚åœ¨Appè¿è¡Œæ—¶ï¼Œä¸»ç¨‹åºåŠ¨æ€çš„ä»Apkçš®è‚¤åŒ…ä¸­è¯»å–ç›¸åº”çš„èµ„æºï¼Œæ— éœ€Acitvityé‡å¯å³å¯å®ç°çš®è‚¤çš„å®æ—¶æ›´æ¢ï¼Œçš®è‚¤åŒ…ä¸åŸå®‰è£…åŒ…ç›¸åˆ†ç¦»ï¼Œä»è€Œå®ç°æ’ä»¶å¼æ¢è‚¤ã€‚&lt;/p&gt;


&lt;h4&gt;1.Â Â Â Â  å¦‚ä½•åŠ è½½çš®è‚¤èµ„æºæ–‡ä»¶&lt;/h4&gt;
&lt;p&gt;ä½¿ç”¨æ’ä»¶å¼æ¢è‚¤ï¼Œçš®è‚¤èµ„æºè‚¯å®šä¸ä¼šåœ¨è¢«å°è£…åˆ°ä¸»å·¥ç¨‹ä¸­ï¼Œè¦æ€ä¹ˆåŠ è½½å¤–éƒ¨çš„çš®è‚¤èµ„æºå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å…ˆçœ‹ä¸‹ Apk çš„æ‰“åŒ…æµç¨‹&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/561894/201711/561894-20171129112116909-329161900.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;


&lt;p&gt;è¿™é‡Œæµç¨‹ä¸­ï¼Œæœ‰ä¸¤ä¸ªå…³é”®ç‚¹&lt;br/&gt;&lt;strong&gt;1.R&lt;/strong&gt;&lt;strong&gt;æ–‡ä»¶çš„ç”Ÿæˆ&lt;/strong&gt;&lt;br/&gt;Â Â Â  Ræ–‡ä»¶æ˜¯ä¸€ä¸ªJavaæ–‡ä»¶ï¼Œé€šè¿‡Ræ–‡ä»¶æˆ‘ä»¬å°±å¯ä»¥æ‰¾åˆ°å¯¹åº”çš„èµ„æºã€‚Ræ–‡ä»¶å°±åƒä¸€å¼ æ˜ å°„è¡¨ï¼Œå¸®åŠ©æˆ‘ä»¬æ‰¾åˆ°èµ„æºæ–‡ä»¶ã€‚&lt;br/&gt;&lt;strong&gt;2.&lt;/strong&gt;&lt;strong&gt;èµ„æºæ–‡ä»¶çš„æ‰“åŒ…ç”Ÿæˆ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;èµ„æºæ–‡ä»¶ç»è¿‡å‹ç¼©æ‰“åŒ…ï¼Œç”Ÿæˆ resources æ–‡ä»¶ï¼Œé€šè¿‡Ræ–‡ä»¶æ‰¾åˆ°é‡Œé¢ä¿å­˜çš„å¯¹æ˜ çš„èµ„æºæ–‡ä»¶ã€‚åœ¨ App å†…éƒ¨ï¼Œæˆ‘ä»¬ä¸€èˆ¬é€šè¿‡ä¸‹é¢ä»£ç ï¼Œè·å–èµ„æºï¼š&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
context.getResource.getString(R.string.hello);
context.getResource.getColor(R.color.black);
context.getResource.getDrawable(R.drawable.splash);
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;è¿™ä¸ªæ—¶è·å– &lt;span lang=&quot;EN-US&quot;&gt;App å†…éƒ¨çš„èµ„æºï¼Œèƒ½æˆ‘ä»¬å®¶åœ¨çš®è‚¤èµ„æºä»€ä¹ˆæ€è·¯å—ï¼ŸåŠ è½½å¤–éƒ¨èµ„æºçš„ &lt;span lang=&quot;EN-US&quot;&gt;Resources èƒ½é€šè¿‡ç±»ä¼¼çš„æ€è·¯å—ï¼Ÿ&lt;span lang=&quot;EN-US&quot;&gt;&lt;br/&gt;Â Â  æˆ‘ä»¬æŸ¥çœ‹ä¸‹&lt;span lang=&quot;EN-US&quot;&gt;Resources ç±»çš„æºç ï¼Œå‘ç° &lt;span lang=&quot;EN-US&quot;&gt;Resources çš„æ„é€ å‡½æ•°&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;38&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
  public Resources(AssetManager assets, DisplayMetrics metrics, Configuration config) {
        this(assets, metrics, config, CompatibilityInfo.DEFAULT_COMPATIBILITY_INFO);
    }
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;è¿™é‡Œå…³é”®æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°å¦‚ä½•è·å–ï¼Œç¬¬äºŒå’Œç¬¬ä¸‰ä¸ªå‚æ•°å¯ä»¥é€šè¿‡ &lt;span lang=&quot;EN-US&quot;&gt;Activity è·å–åˆ°ã€‚æˆ‘ä»¬å†å»çœ‹ä¸‹ &lt;span lang=&quot;EN-US&quot;&gt;AssetManager çš„ä»£ç ï¼ŒåŒæ—¶ä¼šå‘ç°ä¸‹é¢çš„è¿™ä¸ª&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;36&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
/**
     * Add an additional set of assets to the asset manager.  This can be
     * either a directory or ZIP file.  Not for use by applications.  Returns
     * the cookie of the added asset, or 0 on failure.
     * {@hide}
     */
  public final int addAssetPath(String path) {
        synchronized (this) {
            int res = addAssetPathNative(path);
            makeStringBlocks(mStringBlocks);
            return res;
        }
    }
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;AssetManager å¯ä»¥åŠ è½½ä¸€ä¸ªzip æ ¼å¼çš„å‹ç¼©åŒ…ï¼Œè€Œ Apk æ–‡ä»¶ä¸å°±æ˜¯ä¸€ä¸ª å‹ç¼©åŒ…å—ã€‚æˆ‘ä»¬é€šè¿‡åå°„çš„æ–¹æ³•ï¼Œæ‹¿åˆ° AssetManagerï¼ŒåŠ è½½ Apk å†…éƒ¨çš„èµ„æºï¼Œè·å–åˆ° Resources å¯¹è±¡ï¼Œè¿™æ ·å†æƒ³åŠæ³•ï¼ŒæŠŠ Ræ–‡ä»¶é‡Œé¢ä¿å­˜çš„IDè·å–åˆ°ï¼Œè¿™æ ·æ—¢å¯ä»¥æ‹¿åˆ°å¯¹åº”çš„èµ„æºæ–‡ä»¶äº†ã€‚ç†è®ºä¸Šæˆ‘ä»¬çš„æ€è·¯æ—¶æˆç«‹çš„ã€‚&lt;br/&gt;Â Â  æˆ‘ä»¬çœ‹ä¸‹ï¼Œå¦‚ä½•é€šè¿‡ä»£ç è·å– Resources å¯¹è±¡ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;39&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
AssetManager assetManager = AssetManager.class.newInstance();
Method addAssetPath = assetManager.getClass().getMethod(&quot;addAssetPath&quot;, String.class);
addAssetPath.invoke(assetManager, skinPkgPath);

Resources superRes = context.getResources();
Resources skinResource = new Resources(assetManager,superRes.getDisplayMetrics(),superRes.getConfiguration());
&lt;/pre&gt;&lt;/div&gt;

&lt;h4&gt;2.Â Â Â Â  å¦‚ä½•æ ‡è®°éœ€è¦æ¢è‚¤çš„View&lt;/h4&gt;
&lt;p&gt;æ‰¾åˆ°èµ„æºæ–‡ä»¶ä¹‹åï¼Œæˆ‘ä»¬è¦æ¥ç€æ ‡è®°éœ€è¦æ¢è‚¤çš„ View ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ‰¾åˆ°éœ€è¦æ¢è‚¤çš„ View&lt;/strong&gt;&lt;br/&gt;æ€ä¹ˆå¯»æ‰¾å“ªäº›æ˜¯æˆ‘ä»¬è¦å…³æ³¨çš„ View å‘¢ï¼Ÿ æˆ‘ä»¬è¿˜æ˜¯é‡ View çš„åˆ›å»ºæ—¶æœºå¯»æ‰¾æœºä¼šã€‚æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªå¸ƒå±€æ–‡ä»¶æ—¶ï¼Œä¼šä½¿ç”¨ LayoutInflaterçš„ Inflateræ–¹æ³•ï¼Œæˆ‘ä»¬çœ‹ä¸‹è¿™ä¸ªæ–¹æ³•æ˜¯æ€ä¹ˆè®²ä¸€ä¸ªViewæ·»åŠ åˆ°Activity ä¸­çš„ã€‚&lt;br/&gt;LayoutInflater ä¸­æœ‰ä¸ªæ¥å£&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;38&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
public interface Factory {
        /**
         * Hook you can supply that is called when inflating from a LayoutInflater.
         * You can use this to customize the tag names available in your XML
         * layout files.
         * 
         * &amp;lt;p&amp;gt;
         * Note that it is good practice to prefix these custom names with your
         * package (i.e., com.coolcompany.apps) to avoid conflicts with system
         * names.
         * 
         * @param name Tag name to be inflated.
         * @param context The context the view is being created in.
         * @param attrs Inflation attributes as specified in XML file.
         * 
         * @return View Newly created view. Return null for the default
         *         behavior.
         */
        public View onCreateView(String name, Context context, AttributeSet attrs);
    }
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;æ ¹æ®è¿™é‡Œçš„æ³¨é‡Šæè¿°ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±å®ç°è¿™ä¸ªæ¥å£ï¼Œåœ¨Â &lt;strong&gt;onCreateView&lt;/strong&gt; &lt;strong&gt;æ–¹æ³•ä¸­é€‰æ‹©æˆ‘ä»¬éœ€è¦æ ‡è®°çš„View&lt;/strong&gt;ï¼Œæ ¹æ® AttributeSet å€¼ï¼Œè¿‡æ»¤ä¸éœ€è¦å…³æ³¨çš„Viewã€‚&lt;br/&gt;&lt;strong&gt;æ ‡è®° View ä¸å¯¹åº”çš„èµ„æº&lt;/strong&gt;&lt;br/&gt;æˆ‘ä»¬åœ¨ View åˆ›å»ºæ—¶ï¼Œé€šè¿‡è¿‡æ»¤ Attribute å±æ€§ï¼Œæ‰¾åˆ°æˆ‘ä»¬è¦æ ‡è®°çš„ View ï¼Œä¸‹é¢æˆ‘ä»¬å°±æŠŠè¿™äº›Viewçš„å±æ€§è®°ä¸‹æ¥&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;38&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
for (int i = 0; i &amp;lt; attrs.getAttributeCount(); i++){
            String attrName = attrs.getAttributeName(i);
            String attrValue = attrs.getAttributeValue(i);
            if(!AttrFactory.isSupportedAttr(attrName)){
                continue;
            }  
            if(attrValue.startsWith(&quot;@&quot;)){
                try {
                    int id = Integer.parseInt(attrValue.substring(1));
                    String entryName = context.getResources().getResourceEntryName(id);
                    String typeName = context.getResources().getResourceTypeName(id);
                    SkinAttr mSkinAttr = AttrFactory.get(attrName, id, entryName, typeName);
                    if (mSkinAttr != null) {
                        viewAttrs.add(mSkinAttr);
                    }
                } catch (NumberFormatException e) {
                    e.printStackTrace();
                } catch (NotFoundException e) {
                    e.printStackTrace();
                }
            }
        }
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ç„¶åæŠŠè¿™äº› View å’Œå±æ€§å€¼ï¼Œä¸€èµ·å°è£…ä¿å­˜èµ·æ¥&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;34&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
if(!ListUtils.isEmpty(viewAttrs)){
            SkinItem skinItem = new SkinItem();
            skinItem.view = view;
            skinItem.attrs = viewAttrs;
            mSkinItems.add(skinItem);
            if(SkinManager.getInstance().isExternalSkin()){
                skinItem.apply();
            }
    }
&lt;/pre&gt;&lt;/div&gt;

&lt;h4&gt;3.Â Â Â Â  å¦‚ä½•åšåˆ°åŠæ—¶æ›´æ–°UI&lt;/h4&gt;
&lt;p&gt;ç”±äºæˆ‘ä»¬æŠŠéœ€è¦æ›´æ–°çš„View ä»¥åŠå±æ€§å€¼éƒ½ä¿å­˜èµ·æ¥äº†ï¼Œæ›´æ–°çš„æ—¶å€™åªè¦æŠŠä»–ä»¬å–å‡ºæ¥éå†ä¸€éå³å¯ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;34&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
@Override
    public void onThemeUpdate() {
        if(!isResponseOnSkinChanging){
            return;
        }
        mSkinInflaterFactory.applySkin();
    }
//applySkin çš„å…·ä½“å®ç°
public void applySkin(){
        if(ListUtils.isEmpty(mSkinItems)){
            return;
        }   
        for(SkinItem si : mSkinItems){
            if(si.view == null){
                continue;
            }
            si.apply();
        }
    }
&lt;/pre&gt;&lt;/div&gt;

&lt;h4&gt;4.Â Â Â Â  å¦‚ä½•åˆ¶ä½œçš®è‚¤åŒ…&lt;/h4&gt;
&lt;p&gt;çš®è‚¤åŒ…åˆ¶ä½œç›¸å¯¹ç®€å•&lt;br/&gt;1.åˆ›å»ºç‹¬ç«‹å·¥ç¨‹ modelï¼ŒåŒ…åä»»æ„ã€‚&lt;br/&gt;2.æ·»åŠ èµ„æºæ–‡ä»¶åˆ° model ä¸­,ä¸éœ€è¦ java ä»£ç &lt;br/&gt;3.è¿è¡Œ build.gradle è„šæœ¬ï¼Œæ‰“åŒ…å‘½ä»¤ï¼Œç”Ÿæˆapkæ–‡ä»¶ï¼Œä¿®æ”¹åç§°ä¸º xxx.skin çš®è‚¤åŒ…å³å¯ã€‚&lt;/p&gt;

&lt;p&gt;æ ¹æ®ä»¥ä¸Šæ¢è‚¤åŸç†ï¼Œåœ¨githubä¸Šé¢é€‰æ‹©äº†ä¸€ä¸ªç¬¬ä¸‰æ–¹å¼€æºæ¡†æ¶ThemeSkinningï¼Œå…·ä½“ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;h3&gt;1. é›†æˆæ­¥éª¤ï¼š&lt;/h3&gt;
&lt;p&gt;1)Â Â Â Â  æ·»åŠ ä¾èµ– compile 'com.solid.skin:skinlibrary:1.3.1'&lt;/p&gt;
&lt;p&gt;2)Â Â Â Â  ä½¿é¡¹ç›®ä¸­çš„Applicationç»§æ‰¿äºSkinBaseApplication&lt;/p&gt;
&lt;p&gt;3)Â Â Â Â  ä½¿é¡¹ç›®ä¸­çš„Activityç»§æ‰¿äºSkinBaseActivityï¼Œå¦‚æœä½¿ç”¨äº†Fragmentåˆ™ç»§æ‰¿äºSkinBaseFragment&lt;/p&gt;
&lt;p&gt;4)Â Â Â Â  åœ¨éœ€è¦æ¢è‚¤çš„æ ¹å¸ƒå±€ä¸Šæ·»åŠ  xmlns:skin=&quot;http://schemas.android.com/android/skin&quot; ï¼Œç„¶ååœ¨éœ€è¦æ¢è‚¤çš„Viewä¸ŠåŠ ä¸Š skin:enable=&quot;true&quot;&lt;/p&gt;
&lt;p&gt;5)Â Â Â Â  æ–°å»ºä¸€ä¸ªé¡¹ç›®æ¨¡å—ï¼ˆåªåŒ…å«æœ‰èµ„æºæ–‡ä»¶ï¼‰ï¼Œå…¶ä¸­åŒ…å«çš„èµ„æºæ–‡ä»¶çš„nameä¸€å®šè¦å’ŒåŸé¡¹ç›®ä¸­æœ‰æ¢è‚¤éœ€æ±‚çš„Viewæ‰€ä½¿ç”¨çš„èµ„æºnameä¸€è‡´ã€‚&lt;/p&gt;
&lt;p&gt;6)Â Â Â Â  æ‰“åŒ…çš®è‚¤æ–‡ä»¶ï¼Œæ”¾å…¥assetsä¸­çš„skinç›®å½•ä¸‹ï¼ˆskinç›®å½•æ˜¯è‡ªå·±æ–°å»ºçš„ï¼‰&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;7)Â Â Â Â Â Â  è°ƒç”¨æ¢è‚¤æ–¹æ³•ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;åœ¨Â assets/skinÂ æ–‡ä»¶å¤¹ä¸­çš„çš®è‚¤&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ã€€&lt;img src=&quot;https://images2018.cnblogs.com/blog/561894/201711/561894-20171129113121331-975876076.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;h3&gt;2.æ¢è‚¤å±æ€§çš„æ‰©å±•&lt;/h3&gt;
&lt;p align=&quot;left&quot;&gt;è¯¥å¼€æºåº“é»˜è®¤ä»…æ”¯æŒViewçš„textColorå’Œbackgroundä¸¤ä¸ªå±æ€§çš„æ¢è‚¤ï¼Œå¦‚æœéœ€è¦å¯¹å…¶ä»–å±æ€§è¿›è¡Œæ¢è‚¤ï¼Œé‚£ä¹ˆå°±éœ€è¦å»è‡ªå®šä¹‰äº†ã€‚&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;é‚£ä¹ˆå¦‚ä½•è‡ªå®šä¹‰å‘¢ï¼Ÿçœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;ImageViewå¤§å®¶åº”è¯¥éƒ½ç”¨è¿‡å§ã€‚å®ƒçš„srcå±æ€§å°±æ˜¯å®šä¹‰å›¾ç‰‡èµ„æºå¼•ç”¨ï¼Œ&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;æ–°å»ºä¸€ä¸ªImageSrcAttrç»§æ‰¿äº SkinAttrï¼Œç„¶åé‡å†™applyæ–¹æ³•ã€‚applyæ–¹æ³•åœ¨æ¢è‚¤çš„æ—¶å€™å°±ä¼šè¢«è°ƒç”¨ï¼Œä»£ç çš„è¯¦ç»†å®ç°ï¼š&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;strong&gt;public class&lt;/strong&gt; ImageSrcAttr &lt;strong&gt;extends SkinAttr {&lt;/strong&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;strong&gt;Â  @Override&lt;/strong&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;strong&gt;Â  public void apply(View view) {&lt;/strong&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;strong&gt;Â Â Â Â Â  if (view instanceof ImageView) {&lt;/strong&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;strong&gt;Â Â Â Â Â Â Â Â Â Â Â  ImageView iv = (ImageView) view;&lt;/strong&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;strong&gt;Â Â Â Â Â Â Â Â Â Â Â  if (RES_TYPE_NAME_DRAWABLE.equals(attrValueTypeName)) {&lt;/strong&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;strong&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  Drawable drawable = SkinResourcesUtils.getDrawable(attrValueRefId);&lt;/strong&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;strong&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  iv.setImageDrawable(drawable);&lt;/strong&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;strong&gt;Â Â Â Â Â Â Â Â Â Â Â  }&lt;/strong&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;strong&gt;Â Â Â Â Â Â Â  }Â Â Â Â Â  }&lt;/strong&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;strong&gt;Â  }&lt;/strong&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;æ³¨ï¼šattrValueRefIdï¼šå°±æ˜¯èµ„æºidã€‚SkinResourcesUtilsæ˜¯ç”¨æ¥è·å–çš®è‚¤åŒ…é‡Œçš„èµ„æºï¼Œè¿™é‡Œè®¾ç½®coloræˆ–è€…drawableä¸€å®šè¦ä½¿ç”¨æœ¬å·¥å…·ç±»ã€‚&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;å½“ä¸Šé¢çš„å·¥ä½œå®Œæˆä¹‹åï¼Œå°±åˆ°æˆ‘ä»¬è‡ªå·±çš„Applicationçš„onCreateæ–¹æ³•ä¸­åŠ å…¥ Â Â Â Â Â Â Â Â SkinConfig.addSupportAttr(&quot;src&quot;, new ImageSrcAttr());æˆ‘ä»¬å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†srcå±æ€§äº†ã€‚&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;æ­¤å¤–ï¼Œå¯¹äºåŠ¨æ€åˆ›å»ºçš„viewï¼Œæˆ‘ä»¬éœ€è¦åŠ¨æ€æ·»åŠ æ”¯æŒï¼Œè°ƒç”¨&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;dynamicAddSkinEnableView(View view, String attrName, int attrValueResId)æ–¹æ³•æ·»åŠ æ”¯æŒã€‚&lt;/p&gt;
&lt;h3&gt;3.å…¶ä»–ä¸€äº›é‡è¦çš„api&lt;/h3&gt;
&lt;ol&gt;&lt;li&gt;SkinConfig.isDefaultSkin(context):åˆ¤æ–­å½“å‰çš®è‚¤æ˜¯å¦æ˜¯é»˜è®¤çš®è‚¤&lt;/li&gt;
&lt;li&gt;SkinManager.getInstance().restoreDefaultTheme(): é‡ç½®é»˜è®¤çš®è‚¤&lt;/li&gt;
&lt;/ol&gt;</description>
<pubDate>Wed, 29 Nov 2017 03:33:00 +0000</pubDate>
<dc:creator>Androidå¼€å‘8585</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/lzh-Linux/p/7919462.html</dc:identifier>
</item>
<item>
<title>åˆ©ç”¨dockeræ­å»ºspark hadoop workbench - æ¢§ç•™æŸ’</title>
<link>http://www.cnblogs.com/wanly3643/p/7919090.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/wanly3643/p/7919090.html</guid>
<description>&lt;pre&gt;
 java.lang.ClassCastException: cannot assign instance of scala.collection.immutable.List$SerializationProxy to field org.apache.spark.rdd.RDD.org$apache$spark$rdd$RDD$$dependencies_ of type scala.collection.Seq in instance of org.apache.spark.rdd.MapPartitionsRDD
&lt;/pre&gt;</description>
<pubDate>Wed, 29 Nov 2017 02:51:00 +0000</pubDate>
<dc:creator>æ¢§ç•™æŸ’</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/wanly3643/p/7919090.html</dc:identifier>
</item>
</channel>
</rss>