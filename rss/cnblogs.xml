<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>åšå®¢å›­_é¦–é¡µ</title>
<link></link>
<description>ä»£ç æ”¹å˜ä¸–ç•Œ</description>
<item>
<title>åŒæ—¶æ‹¿åˆ°BATJMDçš„Offeræ˜¯æ€æ ·çš„ä¸€ç§ä½“éªŒï¼Ÿ - å†°æ²³å›¢é˜Ÿ</title>
<link>http://www.cnblogs.com/binghe001/p/14387548.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/binghe001/p/14387548.html</guid>
<description>&lt;h2 id=&quot;å†™åœ¨å‰é¢&quot;&gt;å†™åœ¨å‰é¢&lt;/h2&gt;
&lt;p&gt;åˆåˆ°äº†æ”¶å‰²Offerçš„å­£èŠ‚ï¼Œä½ å‡†å¤‡å¥½äº†å—ï¼Ÿæ›¾ç»çš„æˆ‘ï¼Œæ¨ªæ‰«å„ä¸ªå¤§å‚çš„Offerã€‚è¿˜æ˜¯é‚£å¥è¯ï¼šè¿›å¤§å‚ä¸´æ—¶æŠ±ä½›è„šæ˜¯è‚¯å®šä¸è¡Œçš„ï¼Œä¸€å®šè¦æ³¨é‡å¹³æ—¶çš„æ€»ç»“å’Œç§¯ç´¯ï¼Œå¤šæ€è€ƒï¼Œå¤šç§¯ç´¯ï¼Œå¤šæ€»ç»“ï¼Œå¤šå¤ç›˜ï¼Œå°†å·¥ä½œç»å†çœŸæ­£è½¬åŒ–ä¸ºè‡ªå·±çš„å·¥ä½œç»éªŒã€‚&lt;/p&gt;
&lt;p&gt;ä»Šå¤©ï¼Œæˆ‘å°±è·Ÿå°ä¼™ä¼´ä»¬åˆ†äº«ä¸€äº›ç»å…¸çš„å¤§æ•°æ®é¢è¯•é¢˜ï¼Œè·Ÿæˆ‘ä¸€èµ·æ¨ªæ‰«å„ä¸ªå¤§å‚çš„Offerï¼åç»­ï¼Œæˆ‘ä¼šç»™å¤§å®¶è¾“å‡ºä¸€ç¯‡æˆ‘å¹³æ—¶æ˜¯å¦‚ä½•åœ¨å·¥ä½œè¿‡ç¨‹ä¸­æ€»ç»“ç»éªŒçš„ï¼Œå¸Œæœ›èƒ½å¤Ÿç»™å°ä¼™ä¼´ä»¬å¸¦æ¥å®è´¨æ€§çš„å¸®åŠ©ã€‚ä¸å¤šè¯´äº†ï¼Œå¼€å§‹ä»Šå¤©çš„ä¸»é¢˜â€”â€”é¢ç»åˆ†äº«ã€‚&lt;/p&gt;
&lt;h2 id=&quot;é¢ç»åˆ†äº«&quot;&gt;é¢ç»åˆ†äº«&lt;/h2&gt;
&lt;p&gt;ä»Šå¤©ç»™å¤§å®¶åˆ†äº«ä¸€ä¸ªé¢è¯•å¤§å‚çš„å®Œæ•´é¢ç»ï¼Œå°ä¼™ä¼´ä»¬å¯ä»¥å¯¹ç…§ä¸‹ï¼Œè¿™äº›é¢è¯•é¢˜è‡ªå·±æ˜¯å¦éƒ½ä¼šäº†å‘¢ï¼Ÿæ¬¢è¿æ–‡æœ«ç•™è¨€è¯´å‡ºä½ çš„ç­”æ¡ˆï¼å¦‚æœä½ æƒ³æå‡è‡ªå·±çš„æŠ€æœ¯ï¼Œæˆ–è€…å¯¹è‡ªå·±çš„å‘å±•æ¯”è¾ƒè¿·èŒ«ï¼Œéƒ½å¯ä»¥åœ¨æ–‡æœ«è¯´å‡ºä½ æ„Ÿå—ï¼&lt;/p&gt;
&lt;h3 id=&quot;ä¸€è½®æŠ€æœ¯é¢ï¼ˆ90åˆ†é’Ÿï¼‰&quot;&gt;ä¸€è½®æŠ€æœ¯é¢ï¼ˆ90åˆ†é’Ÿï¼‰&lt;/h3&gt;
&lt;p&gt;1.hashmapå’ŒhashtableåŒºåˆ«&lt;br/&gt;2.ä¸ºä»€ä¹ˆäº§ç”Ÿæ­»é”&lt;br/&gt;3.jvmç±»åŠ è½½&lt;br/&gt;4.javaåå°„è·å–ç§æœ‰å±æ€§ï¼Œæ”¹å˜å€¼&lt;br/&gt;5.åå°„ç”¨é€”&lt;br/&gt;6.æ‰€ç”¨æ•°æ®åº“&lt;br/&gt;7.é¡¹ç›®éš¾ç‚¹ï¼Œé—®é¢˜&lt;br/&gt;8.å¦‚ä½•è§£å†³é¡¹ç›®ä¸­é‡åˆ°çš„é—®é¢˜&lt;br/&gt;9.é¡¹ç›®ä¸­é‡åˆ°æœ€è‡ªè±ªçš„åœ°æ–¹&lt;br/&gt;10.ä¼šä»€ä¹ˆç®—æ³•&lt;/p&gt;
&lt;h3 id=&quot;äºŒè½®æŠ€æœ¯é¢ï¼ˆ120åˆ†é’Ÿï¼‰&quot;&gt;äºŒè½®æŠ€æœ¯é¢ï¼ˆ120åˆ†é’Ÿï¼‰&lt;/h3&gt;
&lt;p&gt;1.è®²é¡¹ç›®&lt;br/&gt;2.æ•°æ®åº“ä¹è§‚é”ä½¿ç”¨&lt;br/&gt;3.çŠ¶æ€æœº&lt;br/&gt;4.å¦‚ä½•è§£å†³çŠ¶æ€æœºä¸å¯¹é—®é¢˜&lt;br/&gt;5.å¦‚ä½•åˆ†åº“åˆ†è¡¨&lt;br/&gt;6.MySQLæé™&lt;br/&gt;7.HashMapæºç &lt;br/&gt;8.è®¾è®¡ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„HashMap&lt;br/&gt;9.å¿«æ’çš„å®ç°ï¼Œæ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦&lt;br/&gt;10.ä¼šä»€ä¹ˆç®—æ³•&lt;br/&gt;11.å¦‚ä½•æŠŠé¡¹ç›®å˜æˆSOAæ¶æ„&lt;br/&gt;12.Springæºç ï¼Œæœ€æ·±åˆ»çš„æ¨¡å—ï¼Œaopç”¨é€”&lt;br/&gt;13.JVMå†…å­˜æ¨¡å‹&lt;br/&gt;14.åƒåœ¾å›æ”¶æœºåˆ¶&lt;br/&gt;15.é¡¹ç›®ä¸­æŸ¥çœ‹åƒåœ¾å›æ”¶&lt;/p&gt;
&lt;h3 id=&quot;ä¸‰è½®æŠ€æœ¯é¢ï¼ˆ150åˆ†é’Ÿï¼‰&quot;&gt;ä¸‰è½®æŠ€æœ¯é¢ï¼ˆ150åˆ†é’Ÿï¼‰&lt;/h3&gt;
&lt;p&gt;1.ConcurrentHashMapåº•å±‚åŸç†ï¼Ÿ&lt;br/&gt;2.æ‰‹å†™ä¸€ä¸ªLRUï¼ˆç”¨LinkedHashMapï¼‰&lt;br/&gt;3.HashMapåº•å±‚æ•°æ®ç»“æ„ï¼Ÿ&lt;br/&gt;4.JDK1.8ä¸­çš„HashMapä¸ºä»€ä¹ˆç”¨çº¢é»‘æ ‘ä¸ç”¨æ™®é€šçš„AVLæ ‘ï¼Ÿ&lt;br/&gt;5.ä¸ºä»€ä¹ˆåœ¨8çš„æ—¶å€™é“¾è¡¨å˜æˆæ ‘ï¼Ÿ&lt;br/&gt;6.ä¸ºä»€ä¹ˆåœ¨6çš„æ—¶å€™ä»æ ‘é€€å›é“¾è¡¨ï¼Ÿ&lt;br/&gt;7.çº¿ç¨‹æ± 7ä¸ªå‚æ•°ï¼Œè¯¥æ€ä¹ˆé…ç½®æœ€å¥½ï¼Ÿ&lt;br/&gt;8.è¯´ä¸€ä¸‹volatile&lt;br/&gt;9.volatileçš„å¯è§æ€§å’Œç¦æ­¢æŒ‡ä»¤é‡æ’åºæ€ä¹ˆå®ç°çš„ï¼Ÿ&lt;br/&gt;10.CASæ˜¯ä»€ä¹ˆï¼ŸPriorityQueueåº•å±‚æ˜¯ä»€ä¹ˆï¼Œåˆå§‹å®¹é‡æ˜¯å¤šå°‘ï¼Œæ‰©å®¹æ–¹å¼å‘¢ï¼Ÿ&lt;br/&gt;11.è‹¥åŸå§‹å¤§å°&amp;lt;64ï¼Œåˆ™æ‰©å®¹ä¸ºåŸæ¥çš„2å€+2ï¼Œä¸ç„¶å°±æ‰©å®¹ä¸ºåŸæ¥çš„1.5å€&lt;br/&gt;12.HashMapçš„å®¹é‡ä¸ºä»€ä¹ˆè¦è®¾ç½®ä¸º2çš„æ¬¡å¹‚ï¼Ÿ&lt;br/&gt;13.ä½ çŸ¥é“è·³è¡¨å—ï¼Œä»€ä¹ˆåœºæ™¯ä¼šç”¨åˆ°ï¼Ÿ&lt;br/&gt;14.CopyOnWriteArrayListçŸ¥é“å—ï¼Œè¿­ä»£å™¨æ”¯æŒfail-fastå—ï¼Ÿ&lt;br/&gt;15.innodbçš„åº•å±‚æ•°æ®ç»“æ„ï¼Ÿ&lt;br/&gt;16.ä¸ºä»€ä¹ˆç”¨B+æ ‘ä¸ç”¨Bæ ‘ï¼Ÿ&lt;br/&gt;17.ä¸ºä»€ä¹ˆç”¨B+æ ‘ä¸ç”¨çº¢é»‘æ ‘ï¼Ÿ&lt;br/&gt;18.codingï¼šæ— åºæ•°ç»„æ€ä¹ˆå¯»æ‰¾ç¬¬kå¤§çš„æ•°ï¼Œå†™ä¸€ä¸ªäºŒå‰æ ‘å±‚æ¬¡éå†&lt;br/&gt;19.ä¸çŸ¥é“å¤§å°çš„æ•°æ®æµå–å…¶ä¸­100ä¸ªæ•°ï¼Œæ€æ ·çš„å–æ³•èƒ½æœ€éšæœº&lt;br/&gt;20.nä¸ªç‰©å“æ¯ä¸ªç‰©å“éƒ½æœ‰ä¸€å®šä»·å€¼ï¼Œåˆ†ç»™2ä¸ªäººï¼Œæ€ä¹ˆåˆ†ä¸¤ä¸ªäººçš„ä»·å€¼å·®æœ€å°&lt;/p&gt;
&lt;h3 id=&quot;å››è½®æŠ€æœ¯é¢120åˆ†é’Ÿ&quot;&gt;å››è½®æŠ€æœ¯é¢(120åˆ†é’Ÿ)&lt;/h3&gt;
&lt;p&gt;1.é¡¹ç›®ä¸­çš„æƒé™ç®¡ç†&lt;br/&gt;2.ç™»å½•çŠ¶æ€å¦‚ä½•å‚¨å­˜&lt;br/&gt;3.sessionå’Œcookieçš„åŒºåˆ«,sessionå¦‚ä½•ç®¡ç†&lt;br/&gt;4.HashMapåº•å±‚ç»“æ„&lt;br/&gt;5.synchronizedå…³é”®å­—çš„ç”¨æ³•&lt;br/&gt;6.synchronizedä¿®é¥°ç±»æ–¹æ³•å’Œæ™®é€šæ–¹æ³•çš„é”åŒºåˆ«,è·å–ç±»é”ä¹‹åè¿˜èƒ½è·å–å¯¹è±¡é”å—&lt;br/&gt;7.ç±»åŠ è½½å™¨çš„åŒäº²å§”æ´¾æ¨¡å‹çš„ä½œç”¨,èƒ½é‡å¤åŠ è½½æŸä¸ªç±»å—&lt;br/&gt;8.ç±»åŠ è½½å™¨çš„ç±»çš„ç¼“å­˜,keyæ˜¯ä»€ä¹ˆ&lt;br/&gt;9.ä»‹ç»Redis&lt;br/&gt;10.å¦‚ä½•å°†æ•°æ®åˆ†å¸ƒåœ¨ä¸åŒçš„Redis&lt;br/&gt;11.æœ‰äº†è§£è¿‡å–ä½™ç®—æ³•?&lt;br/&gt;12.springçš„apoå®ç°&lt;br/&gt;13.å­—èŠ‚ç ç»“æ„&lt;br/&gt;14.æµè§ˆå™¨è¾“å…¥ç½‘å€è¿‡ç¨‹,ç»“åˆspringmvc&lt;/p&gt;
&lt;h3 id=&quot;äº”è½®æŠ€æœ¯é¢120åˆ†é’Ÿ&quot;&gt;äº”è½®æŠ€æœ¯é¢(120åˆ†é’Ÿ)&lt;/h3&gt;
&lt;p&gt;1.HashMapåœ¨å¤§é‡å“ˆå¸Œå†²çªè¯¥æ€ä¹ˆå¤„ç†&lt;br/&gt;2.çº¢é»‘æ ‘æ¯”BSTä¼˜ç‚¹&lt;br/&gt;3.MySQLä¸ºä»€ä¹ˆä½¿ç”¨B+æ ‘&lt;br/&gt;4.å¤šä¸ªç´¢å¼•ä¼šæœ‰å¤šä»½æ•°æ®å—&lt;br/&gt;5.æ•°æ®åº“çš„éš”ç¦»çº§åˆ«å’Œè§£å†³çš„é—®é¢˜&lt;br/&gt;6.æ•°æ®åº“é»˜è®¤éš”ç¦»çº§åˆ«,ä¸€å®šä¼šäº§ç”Ÿå¹»è¯»å—,æ€ä¹ˆè§£å†³&lt;br/&gt;7.è¾“å…¥ç½‘å€åˆ°å±•ç¤ºçš„æ•´ä¸ªè¿‡ç¨‹,ç»“åˆspringmvcæ¥è®²&lt;br/&gt;8.è´Ÿè½½å‡è¡¡çš„ç®—æ³•&lt;br/&gt;9.å“ˆå¼—æ›¼ç¼–ç ,å¦‚ä½•è§£å†³è¯‘ç é—®é¢˜&lt;br/&gt;10.å®ä¹ ä¼šå¯¹å·¥ä½œæœ‰å½±å“å—&lt;br/&gt;11.ç”¨è‹±æ–‡ä»‹ç»ä¸€ä¸ªé¡¹ç›®&lt;br/&gt;12.å¦‚ä½•æŸ¥çœ‹ç³»ç»Ÿè´Ÿè½½&lt;br/&gt;13.æè¿°ä¸€ä¸ªè§£å†³é—®é¢˜çš„è¿‡ç¨‹&lt;br/&gt;14.å¦‚ä½•æŠŠæ–‡ä»¶ä»æœåŠ¡å™¨å¤åˆ¶åˆ°æœ¬åœ°,ç”¨ä»€ä¹ˆå‘½ä»¤&lt;/p&gt;
&lt;h3 id=&quot;å…­è½®æŠ€æœ¯é¢ï¼ˆ90åˆ†é’Ÿï¼‰&quot;&gt;å…­è½®æŠ€æœ¯é¢ï¼ˆ90åˆ†é’Ÿï¼‰&lt;/h3&gt;
&lt;p&gt;1.è®²è®²ä½ æ‰€äº†è§£çš„JVMåƒåœ¾æ”¶é›†ç®—æ³•&lt;br/&gt;2.é¡¹ç›®ä¸­ç”¨çš„å“ªäº›æŠ€æœ¯&lt;br/&gt;3.é¡¹ç›®å¦‚ä½•è®¾è®¡æµç¨‹æµè½¬ï¼Œå¦‚æœæ˜¯ä½ çš„è¯è¯¥æ€ä¹ˆè®¾è®¡&lt;br/&gt;4.MySQLä½¿ç”¨çš„ç´¢å¼•ç»“æ„ï¼ŒæŸ¥æ‰¾æ•ˆç‡&lt;br/&gt;5.MySQLæŸ¥è¯¢ä¼˜åŒ–&lt;br/&gt;6.MySQLæ…¢æŸ¥è¯¢å¼€å¯ï¼Œè¯­å¥åˆ†æ&lt;br/&gt;7.HashMapæŸ¥æ‰¾æ•ˆç‡&lt;br/&gt;8.JVMå†…å­˜æ¨¡å‹&lt;br/&gt;9.è®¾è®¡æ¨¡å¼ï¼Œç­–ç•¥æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯&lt;br/&gt;10.å¦‚ä½•ç¡®ä¿å•ä¾‹çº¿ç¨‹å®‰å…¨&lt;br/&gt;11.Springçš„beançš„é»˜è®¤èŒƒå›´&lt;br/&gt;12.å¯¹Nettyçš„äº†è§£&lt;br/&gt;13.æœªæ¥å‘å±•è§„åˆ’&lt;/p&gt;
&lt;h3 id=&quot;ä¸ƒè½®hré¢ï¼ˆ40åˆ†é’Ÿï¼‰&quot;&gt;ä¸ƒè½®HRé¢ï¼ˆ40åˆ†é’Ÿï¼‰&lt;/h3&gt;
&lt;p&gt;1.è¯´ä¸€ä¸‹å‘å±•æ–¹å‘&lt;br/&gt;2.è¯´ä¸€ä¸‹ç»éªŒä¸è¶³å¯¼è‡´çš„é—®é¢˜&lt;br/&gt;3.è¯´ä¸€ä¸‹æŒ‘æˆ˜æ¯çš„å·¥ä½œå†…å®¹&lt;br/&gt;4.è¯´ä¸€ä¸‹ä½ ç»™æŒ‘æˆ˜æ¯é¡¹ç›®çš„ä¸»è¦è´¡çŒ®&lt;br/&gt;5.å®ä¹ æ—¶é—´&lt;br/&gt;6.æ‹¿åˆ°äº†å“ªäº›offerï¼Œä½ æ˜¯æ€ä¹ˆè€ƒè™‘çš„&lt;br/&gt;7.ä¸ºä»€ä¹ˆä¸é€‰æ‹©è…¾è®¯&lt;br/&gt;8.è…¾è®¯æŠ€æœ¯æ ˆå’Œé˜¿é‡ŒæŠ€æœ¯æ ˆçš„åŒºåˆ«&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¥½äº†ï¼Œä»Šå¤©å°±åˆ°è¿™å„¿å§ï¼Œæˆ‘æ˜¯å†°æ²³ï¼Œå¤§å®¶æœ‰å•¥é—®é¢˜å¯ä»¥åœ¨ä¸‹æ–¹ç•™è¨€ï¼Œä¹Ÿå¯ä»¥åŠ æˆ‘å¾®ä¿¡ï¼šsun_shine_lyzï¼Œæˆ‘æ‹‰ä½ è¿›ç¾¤ï¼Œä¸€èµ·äº¤æµæŠ€æœ¯ï¼Œä¸€èµ·è¿›é˜¶ï¼Œä¸€èµ·ç‰›é€¼~~&lt;/strong&gt;&lt;/p&gt;
</description>
<pubDate>Mon, 08 Feb 2021 00:43:00 +0000</pubDate>
<dc:creator>å†°æ²³å›¢é˜Ÿ</dc:creator>
<og:description>å†™åœ¨å‰é¢ åˆåˆ°äº†æ”¶å‰²Offerçš„å­£èŠ‚ï¼Œä½ å‡†å¤‡å¥½äº†å—ï¼Ÿæ›¾ç»çš„æˆ‘ï¼Œæ¨ªæ‰«å„ä¸ªå¤§å‚çš„Offerã€‚è¿˜æ˜¯é‚£å¥è¯ï¼šè¿›å¤§å‚ä¸´æ—¶æŠ±ä½›è„šæ˜¯è‚¯å®šä¸è¡Œçš„ï¼Œä¸€å®šè¦æ³¨é‡å¹³æ—¶çš„æ€»ç»“å’Œç§¯ç´¯ï¼Œå¤šæ€è€ƒï¼Œå¤šç§¯ç´¯ï¼Œå¤šæ€»ç»“ï¼Œå¤šå¤ç›˜ï¼Œå°†å·¥ä½œç»å†</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/binghe001/p/14387548.html</dc:identifier>
</item>
<item>
<title>jacksonå­¦ä¹ ä¹‹å(ç»ˆç¯‡)ï¼šspringbootæ•´åˆ(é…ç½®ç±») - ç¨‹åºå‘˜æ¬£å®¸</title>
<link>http://www.cnblogs.com/bolingcavalry/p/14387543.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/bolingcavalry/p/14387543.html</guid>
<description>&lt;h3 id=&quot;æ¬¢è¿è®¿é—®æˆ‘çš„github&quot;&gt;æ¬¢è¿è®¿é—®æˆ‘çš„GitHub&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/zq2599/blog_demos&quot; target=&quot;_blank&quot;&gt;https://github.com/zq2599/blog_demos&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å†…å®¹ï¼šæ‰€æœ‰åŸåˆ›æ–‡ç« åˆ†ç±»æ±‡æ€»åŠé…å¥—æºç ï¼Œæ¶‰åŠJavaã€Dockerã€Kubernetesã€DevOPSç­‰ï¼›&lt;/p&gt;
&lt;h3 id=&quot;ç³»åˆ—æ–‡ç« æ±‡æ€»&quot;&gt;ç³»åˆ—æ–‡ç« æ±‡æ€»&lt;/h3&gt;
&lt;h3 id=&quot;æœ¬ç¯‡æ¦‚è§ˆ&quot;&gt;æœ¬ç¯‡æ¦‚è§ˆ&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;æœ¬æ–‡æ˜¯ã€Šjacksonå­¦ä¹ ã€‹ç³»åˆ—çš„ç»ˆç¯‡ï¼Œç»è¿‡å‰é¢çš„ä¸€ç³»åˆ—å®æˆ˜ï¼Œç›¸ä¿¡æ‚¨å·²å¯ä»¥ç†Ÿç»ƒä½¿ç”¨jacksonçµæ´»çš„æ‰§è¡Œå„ç§jsonåºåˆ—åŒ–å’Œååºåˆ—åŒ–æ“ä½œï¼Œé‚£ä¹ˆï¼Œæœ¬ç¯‡å°±ä»¥è½»æ¾çš„æ–¹å¼æ¥å®Œæˆæ•´ä¸ªç³»åˆ—å§ï¼›&lt;/li&gt;
&lt;li&gt;ä¸Šä¸€ç¯‡ä»‹ç»çš„æ˜¯åœ¨springbootä¸­é€šè¿‡é…ç½®æ–‡ä»¶å¯¹jacksonåšè®¾ç½®ï¼Œä»Šå¤©è¦èŠçš„æ˜¯å¦ä¸€ç§å¸¸ç”¨çš„jacksoné…ç½®æ–¹å¼ï¼š&lt;span&gt;é…ç½®ç±»&lt;/span&gt;ï¼Œå°±æ˜¯è‡ªå·±ç¼–å†™ä»£ç å®ä¾‹åŒ–å’Œé…ç½®springbootå…¨å±€ä½¿ç”¨çš„ObjectMapperå®ä¾‹ï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;æºç ä¸‹è½½&quot;&gt;æºç ä¸‹è½½&lt;/h3&gt;
&lt;ol&gt;&lt;li&gt;å¦‚æœæ‚¨ä¸æƒ³ç¼–ç ï¼Œå¯ä»¥åœ¨GitHubä¸‹è½½æ‰€æœ‰æºç ï¼Œåœ°å€å’Œé“¾æ¥ä¿¡æ¯å¦‚ä¸‹è¡¨æ‰€ç¤º(&lt;a href=&quot;https://github.com/zq2599/blog_demos&quot; target=&quot;_blank&quot;&gt;https://github.com/zq2599/blog_demos&lt;/a&gt;)ï¼š&lt;/li&gt;
&lt;/ol&gt;&lt;ol start=&quot;2&quot;&gt;&lt;li&gt;è¿™ä¸ªgité¡¹ç›®ä¸­æœ‰å¤šä¸ªæ–‡ä»¶å¤¹ï¼Œæœ¬ç« çš„åº”ç”¨åœ¨&lt;span&gt;jacksondemo&lt;/span&gt;æ–‡ä»¶å¤¹ä¸‹ï¼Œå¦‚ä¸‹å›¾çº¢æ¡†æ‰€ç¤ºï¼š&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/485422/202102/485422-20210208083702014-1716440407.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;ol start=&quot;3&quot;&gt;&lt;li&gt;&lt;span&gt;jacksondemo&lt;/span&gt;æ˜¯çˆ¶å­ç»“æ„çš„å·¥ç¨‹ï¼Œæœ¬ç¯‡çš„ä»£ç åœ¨&lt;span&gt;springbootconfigbean&lt;/span&gt;å­å·¥ç¨‹ä¸­ï¼Œå¦‚ä¸‹å›¾ï¼š&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/485422/202102/485422-20210208083702657-601770152.jpg&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;ç¼–ç &quot;&gt;ç¼–ç &lt;/h3&gt;
&lt;ol&gt;&lt;li&gt;åœ¨çˆ¶å·¥ç¨‹jacksondemoä¸‹æ–°å¢å­å·¥ç¨‹springbootconfigbeanï¼Œpom.xmlå¦‚ä¸‹ï¼š&lt;/li&gt;
&lt;/ol&gt;&lt;pre&gt;
&lt;code class=&quot;language-xml&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
&amp;lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&amp;gt;
    &amp;lt;modelVersion&amp;gt;4.0.0&amp;lt;/modelVersion&amp;gt;
    &amp;lt;parent&amp;gt;
        &amp;lt;artifactId&amp;gt;jacksondemo&amp;lt;/artifactId&amp;gt;
        &amp;lt;groupId&amp;gt;com.bolingcavalry&amp;lt;/groupId&amp;gt;
        &amp;lt;version&amp;gt;1.0-SNAPSHOT&amp;lt;/version&amp;gt;
        &amp;lt;relativePath&amp;gt;../pom.xml&amp;lt;/relativePath&amp;gt;
    &amp;lt;/parent&amp;gt;
    &amp;lt;groupId&amp;gt;com.bolingcavalry&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;springbootconfigbean&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;0.0.1-SNAPSHOT&amp;lt;/version&amp;gt;
    &amp;lt;name&amp;gt;springbootconfigbean&amp;lt;/name&amp;gt;
    &amp;lt;description&amp;gt;Demo project for Spring Boot with Jackson, configuration from config bean&amp;lt;/description&amp;gt;

    &amp;lt;properties&amp;gt;
        &amp;lt;java.version&amp;gt;1.8&amp;lt;/java.version&amp;gt;
    &amp;lt;/properties&amp;gt;

    &amp;lt;!--ä¸ç”¨spring-boot-starter-parentä½œä¸ºparentæ—¶çš„é…ç½®--&amp;gt;
    &amp;lt;dependencyManagement&amp;gt;
        &amp;lt;dependencies&amp;gt;
            &amp;lt;dependency&amp;gt;
                &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
                &amp;lt;artifactId&amp;gt;spring-boot-dependencies&amp;lt;/artifactId&amp;gt;
                &amp;lt;version&amp;gt;2.3.3.RELEASE&amp;lt;/version&amp;gt;
                &amp;lt;type&amp;gt;pom&amp;lt;/type&amp;gt;
                &amp;lt;scope&amp;gt;import&amp;lt;/scope&amp;gt;
            &amp;lt;/dependency&amp;gt;
        &amp;lt;/dependencies&amp;gt;
    &amp;lt;/dependencyManagement&amp;gt;

    &amp;lt;dependencies&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;spring-boot-starter-web&amp;lt;/artifactId&amp;gt;
        &amp;lt;/dependency&amp;gt;

        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;spring-boot-starter-test&amp;lt;/artifactId&amp;gt;
            &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;
            &amp;lt;exclusions&amp;gt;
                &amp;lt;exclusion&amp;gt;
                    &amp;lt;groupId&amp;gt;org.junit.vintage&amp;lt;/groupId&amp;gt;
                    &amp;lt;artifactId&amp;gt;junit-vintage-engine&amp;lt;/artifactId&amp;gt;
                &amp;lt;/exclusion&amp;gt;
            &amp;lt;/exclusions&amp;gt;
        &amp;lt;/dependency&amp;gt;

        &amp;lt;!-- swaggerä¾èµ– --&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;io.springfox&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;springfox-swagger2&amp;lt;/artifactId&amp;gt;
        &amp;lt;/dependency&amp;gt;
        &amp;lt;!-- swagger-ui --&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;io.springfox&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;springfox-swagger-ui&amp;lt;/artifactId&amp;gt;
        &amp;lt;/dependency&amp;gt;
    &amp;lt;/dependencies&amp;gt;

    &amp;lt;build&amp;gt;
        &amp;lt;plugins&amp;gt;
            &amp;lt;plugin&amp;gt;
                &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
                &amp;lt;artifactId&amp;gt;spring-boot-maven-plugin&amp;lt;/artifactId&amp;gt;
            &amp;lt;/plugin&amp;gt;
        &amp;lt;/plugins&amp;gt;
    &amp;lt;/build&amp;gt;

&amp;lt;/project&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;ol start=&quot;2&quot;&gt;&lt;li&gt;æœ¬æ–‡æœ€é‡è¦çš„ä»£ç æ˜¯é…ç½®ç±»&lt;span&gt;JacksonConfig.java&lt;/span&gt;ï¼Œå¦‚ä¸‹ï¼Œéœ€è¦&lt;span&gt;ConditionalOnMissingBean&lt;/span&gt;æ³¨è§£é¿å…å†²çªï¼Œå¦å¤–è¿˜ç»™å®ä¾‹æŒ‡å®šäº†åç§°customizeObjectMapperï¼Œå¦‚æœåº”ç”¨ä¸­é€šè¿‡Autowiredä½¿ç”¨æ­¤å®ä¾‹ï¼Œéœ€è¦æŒ‡å®šè¿™ä¸ªåå­—ï¼Œé¿å…æŠ¥é”™&quot;There is more than one bean of 'ObjectMapper ' type&quot;ï¼š&lt;/li&gt;
&lt;/ol&gt;&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Configuration
public class JacksonConfig {

    @Bean(&quot;customizeObjectMapper&quot;)
    @Primary
    @ConditionalOnMissingBean(ObjectMapper.class)
    public ObjectMapper getObjectMapper(Jackson2ObjectMapperBuilder builder) {
        ObjectMapper mapper = builder.build();

        // æ—¥æœŸæ ¼å¼
        mapper.setDateFormat(new SimpleDateFormat(&quot;yyyy-MM-dd hh:mm:ss&quot;));

        // ç¾åŒ–è¾“å‡º
        mapper.enable(SerializationFeature.INDENT_OUTPUT);

        return mapper;
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;ol start=&quot;3&quot;&gt;&lt;li&gt;å¯¹äºJacksonConfig.getObjectMapperæ–¹æ³•å†…çš„è®¾ç½®ï¼Œå¦‚æœæ‚¨æƒ³åšæ›´å¤šè®¾ç½®ï¼Œè¯·å‚è€ƒ&lt;a href=&quot;https://xinchen.blog.csdn.net/article/details/108192174&quot; target=&quot;_blank&quot;&gt;ã€Šjacksonå­¦ä¹ ä¹‹ä¸‰ï¼šå¸¸ç”¨APIæ“ä½œã€‹&lt;/a&gt;é‡Œé¢çš„è®¾ç½®å†…å®¹ï¼›&lt;/li&gt;
&lt;/ol&gt;&lt;ul&gt;&lt;li&gt;å¯åŠ¨ç±»ä¾ç„¶å¾ˆç®€å•ï¼š&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;package com.bolingcavalry.springbootconfigbean;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class SpringbootConfigBeanApplication {

    public static void main(String[] args) {
        SpringApplication.run(SpringbootConfigBeanApplication.class, args);
    }

}
&lt;/code&gt;
&lt;/pre&gt;
&lt;ol start=&quot;4&quot;&gt;&lt;li&gt;swaggeré…ç½®ï¼š&lt;/li&gt;
&lt;/ol&gt;&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;package com.bolingcavalry.springbootconfigbean;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import springfox.documentation.builders.ApiInfoBuilder;
import springfox.documentation.builders.PathSelectors;
import springfox.documentation.builders.RequestHandlerSelectors;
import springfox.documentation.service.ApiInfo;
import springfox.documentation.service.Contact;
import springfox.documentation.service.Tag;
import springfox.documentation.spi.DocumentationType;
import springfox.documentation.spring.web.plugins.Docket;
import springfox.documentation.swagger2.annotations.EnableSwagger2;

@Configuration
@EnableSwagger2
public class SwaggerConfig {

    @Bean
    public Docket createRestApi() {
        return new Docket(DocumentationType.SWAGGER_2)
                .apiInfo(apiInfo())
                .tags(new Tag(&quot;JsonPropertySerializationController&quot;, &quot;JsonPropertyç›¸å…³æµ‹è¯•&quot;))
                .select()
                // å½“å‰åŒ…è·¯å¾„
                .apis(RequestHandlerSelectors.basePackage(&quot;com.bolingcavalry.springbootconfigbean.controller&quot;))
                .paths(PathSelectors.any())
                .build();
    }

    //æ„å»º apiæ–‡æ¡£çš„è¯¦ç»†ä¿¡æ¯å‡½æ•°,æ³¨æ„è¿™é‡Œçš„æ³¨è§£å¼•ç”¨çš„æ˜¯å“ªä¸ª
    private ApiInfo apiInfo() {
        return new ApiInfoBuilder()
                //é¡µé¢æ ‡é¢˜
                .title(&quot;SpringBootæ•´åˆJackson(åŸºäºé…ç½®æ–‡ä»¶)&quot;)
                //åˆ›å»ºäºº
                .contact(new Contact(&quot;ç¨‹åºå‘˜æ¬£å®¸&quot;, &quot;https://github.com/zq2599/blog_demos&quot;, &quot;zq2599@gmail.com&quot;))
                //ç‰ˆæœ¬å·
                .version(&quot;1.0&quot;)
                //æè¿°
                .description(&quot;API æè¿°&quot;)
                .build();
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;ol start=&quot;5&quot;&gt;&lt;li&gt;æœ€åæ˜¯æµ‹è¯•ç”¨çš„Controllerç±»ï¼Œè¦æ³¨æ„çš„æ˜¯åœ¨ä½¿ç”¨ObjectMapperå®ä¾‹çš„åœ°æ–¹ï¼Œç”¨Autowiredæ³¨è§£çš„æ—¶å€™ï¼Œ&lt;span&gt;è®°å¾—å¸¦ä¸ŠQualifieræ³¨è§£&lt;/span&gt;ï¼š&lt;/li&gt;
&lt;/ol&gt;&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;package com.bolingcavalry.springbootconfigbean.controller;

import com.bolingcavalry.springbootconfigbean.bean.Test;
import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.ObjectMapper;
import io.swagger.annotations.Api;
import io.swagger.annotations.ApiOperation;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RestController;

@RestController
@RequestMapping(&quot;/jsonproperty&quot;)
@Api(tags = {&quot;JsonPropertySerializationController&quot;})
public class JsonPropertySerializationController {

    private static final Logger logger = LoggerFactory.getLogger(JsonPropertySerializationController.class);

    @Qualifier(&quot;customizeObjectMapper&quot;)
    @Autowired
    ObjectMapper mapper;

    @ApiOperation(value = &quot;æµ‹è¯•åºåˆ—åŒ–&quot;, notes = &quot;æµ‹è¯•åºåˆ—åŒ–&quot;)
    @RequestMapping(value = &quot;/serialization&quot;, method = RequestMethod.GET)
    public Test serialization() throws JsonProcessingException {

        Test test = new Test();
        logger.info(mapper.writeValueAsString(test));

        return test;
    }

    @ApiOperation(value = &quot;æµ‹è¯•ååºåˆ—åŒ–&quot;, notes=&quot;æµ‹è¯•ååºåˆ—åŒ–&quot;)
    @RequestMapping(value = &quot;/deserialization&quot;,method = RequestMethod.PUT)
    public String deserialization(@RequestBody Test test) {
        return test.toString();
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;éªŒè¯&quot;&gt;éªŒè¯&lt;/h3&gt;
&lt;ol&gt;&lt;li&gt;å¯åŠ¨SpringbootConfigBeanApplicationåï¼Œæµè§ˆå™¨æ‰“å¼€ï¼š&lt;a href=&quot;http://localhost:8080/swagger-ui.html&quot; target=&quot;_blank&quot;&gt;&lt;span&gt;http://localhost:8080/swagger-ui.html&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;å…ˆéªŒè¯åºåˆ—åŒ–æ¥å£/jsonproperty/serializationï¼š&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/485422/202102/485422-20210208083705172-1073664773.jpg&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;3. å†éªŒè¯ååºåˆ—åŒ–æ¥å£ /jsonproperty/deserializationï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/485422/202102/485422-20210208083708051-1813161385.jpg&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;è‡³æ­¤ï¼Œæ•´ä¸ªã€Šjacksonå­¦ä¹ ã€‹ç³»åˆ—å°±å…¨éƒ¨å®Œæˆäº†ï¼Œå¸Œæœ›è¿™åç¯‡å†…å®¹èƒ½å¤Ÿç»™æ‚¨å¸¦æ¥ä¸€äº›å‚è€ƒï¼ŒåŠ©æ‚¨åœ¨ç¼–ç è¿‡ç¨‹ä¸­æ›´åŠ å¾—å¿ƒåº”æ‰‹çš„ä½¿ç”¨Jacksonï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;ä½ ä¸å­¤å•ï¼Œæ¬£å®¸åŸåˆ›ä¸€è·¯ç›¸ä¼´&quot;&gt;ä½ ä¸å­¤å•ï¼Œæ¬£å®¸åŸåˆ›ä¸€è·¯ç›¸ä¼´&lt;/h3&gt;
&lt;ol&gt;&lt;li&gt;&lt;a href=&quot;https://xinchen.blog.csdn.net/article/details/105068742&quot; target=&quot;_blank&quot;&gt;Javaç³»åˆ—&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://xinchen.blog.csdn.net/article/details/105086498&quot; target=&quot;_blank&quot;&gt;Springç³»åˆ—&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://xinchen.blog.csdn.net/article/details/105086732&quot; target=&quot;_blank&quot;&gt;Dockerç³»åˆ—&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://xinchen.blog.csdn.net/article/details/105086794&quot; target=&quot;_blank&quot;&gt;kubernetesç³»åˆ—&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://xinchen.blog.csdn.net/article/details/105086850&quot; target=&quot;_blank&quot;&gt;æ•°æ®åº“+ä¸­é—´ä»¶ç³»åˆ—&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://xinchen.blog.csdn.net/article/details/105086920&quot; target=&quot;_blank&quot;&gt;DevOpsç³»åˆ—&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;h3 id=&quot;æ¬¢è¿å…³æ³¨å…¬ä¼—å·ï¼šç¨‹åºå‘˜æ¬£å®¸&quot;&gt;æ¬¢è¿å…³æ³¨å…¬ä¼—å·ï¼šç¨‹åºå‘˜æ¬£å®¸&lt;/h3&gt;
&lt;blockquote readability=&quot;4.258064516129&quot;&gt;
&lt;p&gt;å¾®ä¿¡æœç´¢ã€Œç¨‹åºå‘˜æ¬£å®¸ã€ï¼Œæˆ‘æ˜¯æ¬£å®¸ï¼ŒæœŸå¾…ä¸æ‚¨ä¸€åŒç•…æ¸¸Javaä¸–ç•Œ...&lt;br/&gt;&lt;a href=&quot;https://github.com/zq2599/blog_demos&quot; target=&quot;_blank&quot;&gt;https://github.com/zq2599/blog_demos&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
<pubDate>Mon, 08 Feb 2021 00:37:00 +0000</pubDate>
<dc:creator>ç¨‹åºå‘˜æ¬£å®¸</dc:creator>
<og:description>æ¬¢è¿è®¿é—®æˆ‘çš„GitHub https://github.com/zq2599/blog_demos å†…å®¹ï¼šæ‰€æœ‰åŸåˆ›æ–‡ç« åˆ†ç±»æ±‡æ€»åŠé…å¥—æºç ï¼Œæ¶‰åŠJavaã€Dockerã€Kubernetesã€DevOPS</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/bolingcavalry/p/14387543.html</dc:identifier>
</item>
<item>
<title>å¾®æœåŠ¡ä¸šåŠ¡ç”Ÿå‘½å‘¨æœŸæµç¨‹ç®¡æ§å¼•æ“ - KevinCC</title>
<link>http://www.cnblogs.com/osscoder/p/14093479.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/osscoder/p/14093479.html</guid>
<description>&lt;p&gt;å°†ä¸šåŠ¡çš„æµç¨‹ç®¡æ§å’Œäº‹ä»¶åŠŸèƒ½æŠ½è±¡å‰¥ç¦»ï¼Œåˆ‡æ–­äº‹ä»¶åŠŸèƒ½æ–¹æ³•å†…çš„é“¾å¼è°ƒç”¨ï¼Œææƒè‡³æµç¨‹å¼•æ“ç»Ÿä¸€åè°ƒç®¡æ§ï¼Œäº‹ä»¶åŠŸèƒ½ä½œä¸ºç‹¬ç«‹å¤„ç†å•å…ƒåµŒå…¥ä¸šåŠ¡æµç¨‹ä¹‹ä¸­ï¼Œç”±æµç¨‹å¼•æ“å¤„ç†äº‹ä»¶çš„è§¦å‘ä¸æ¶ˆæ¯ä¼ é€’ï¼Œåœ¨ç³»ç»Ÿç¼–ç å±‚çº§å°†äº‹ä»¶å†…è°ƒç”¨çš„â€éšå¼å¯¼å‘â€è½¬å˜ä¸ºäº‹ä»¶å¤–çš„â€œæ˜¾å¼å¯¼å‘â€ã€‚&lt;/p&gt;&lt;div id=&quot;cnblogs_post_body&quot; readability=&quot;191.3075002312&quot;&gt;
&lt;p&gt;ã€€ã€€å¦‚é¢˜ï¼Œè¿™é‡Œä»‹ç»æˆ‘æœ€è¿‘å¼€æºçš„è¿›è¡Œä¸šåŠ¡ç”Ÿå‘½å‘¨æœŸç®¡æ§çš„æµç¨‹å¼•æ“ï¼ˆ&lt;a href=&quot;https://github.com/KevinWG/OSS.EventFlow&quot; target=&quot;_blank&quot;&gt;OSS.EventFlow&lt;/a&gt;ï¼‰ï¼Œå½“ç„¶ç°åœ¨å¼€æºçš„å·¥ä½œæµæ¡†æ¶å¾ˆå¤šï¼Œæ— å¿ƒæ¯”è¾ƒå¼‚åŒï¼Œä»…è¡¨è¾¾ä¸ªäººæ„Ÿå—ï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€å…¸å‹çš„OAå·¥ä½œæµç¨‹å¼•æ“ï¼Œè¿™ä¹Ÿæ˜¯å½“å‰å¾ˆå¤šå·¥ä½œæµå¼•æ“çš„é‡è¦åŠŸèƒ½ï¼Œåªæ˜¯OAåœºæ™¯å¯¹äºç³»ç»Ÿæ¥è¯´ï¼Œå…¶ä¸šåŠ¡ç‰¹ç‚¹æ¯”è¾ƒçªå‡ºï¼ŒæŠ½è±¡å½’çº³ç›¸å¯¹å®¹æ˜“å¾ˆå¤šã€‚ä½†æ˜¯è¿™ä¸ªå¯¹äºå¾ˆå¤šä¸šåŠ¡åœºæ™¯ç‰¹åˆ«æ˜¯å¤æ‚åœºæ™¯èƒ½å¤Ÿè§¦è¾¾çš„æœ‰é™ï¼Œå¤§å¤šå¤æ‚ä¸šåŠ¡æµç¨‹è¿›åº¦çš„æ¨è¿›æ˜¯ç³…åˆåœ¨ä¸šåŠ¡çš„å…·ä½“æ“ä½œä»£ç ä¹‹ä¸­ï¼Œä¸èƒ½æœ‰æ•ˆçš„æŠŠåŠ¨ä½œæ‰§è¡Œé€»è¾‘å’Œä¸šåŠ¡çš„æµåŠ¨é€»è¾‘åˆ‡å‰²ï¼Œå¦‚æœå¼€å‘äººå‘˜æ²¡æœ‰è¾ƒé«˜çš„æŠ€æœ¯èƒ½åŠ›å’Œä¸€å®šçš„ä¸šåŠ¡æ·±åº¦ï¼Œæ–°äººå‘˜éœ€è¦éè§ˆç³»ç»Ÿè§’è§’è½è½æ‰èƒ½æ‹¼å‡‘å‡ºäº§å“çš„æ¦‚è§ˆå›¾ï¼Œç”šè‡³å¯èƒ½æ˜¯ä¸ªå¤¹æ‚å¾ˆå¤šåºŸå¼ƒé€»è¾‘çš„ç•¸å½¢æµç¨‹ã€‚åŒæ ·ï¼Œå¯¹äºæ–°çš„äº§å“ä¸šåŠ¡æµç¨‹å¼€å‘äººå‘˜åˆå°†å…¶æ‹†è§£ç²˜åˆåœ¨ç³»ç»Ÿä¸­å„å¤„ã€‚&lt;/p&gt;
&lt;p&gt;Â ã€€ã€€åœ¨å¦ä¸€æ–¹é¢ï¼Œåœ¨å®é™…çš„ä»£ç å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå½“ä¸€ä¸ªæ¨¡å—åˆ†ç»™å¼€å‘äººå‘˜ä¹‹åï¼Œä¸ç®¡å…¶æ°´å¹³é«˜ä½ï¼Œè¿™ä¸ªæ¨¡å—çš„è´¨é‡ä¸»ç®¡åŸºæœ¬å¾ˆéš¾æœ‰æ•ˆæ§åˆ¶ï¼Œå¥½ç‚¹çš„å›¢é˜Ÿæœ‰ä»£ç è¯„å®¡ï¼Œä½†ç»ˆç©¶åªèƒ½ç®—æ˜¯äº‹åè¡¥æ•‘ã€‚è¿™äº›åŸºæœ¬å¸¦æ¥ä»¥ä¸‹ä¸‰ä¸ªé—®é¢˜ï¼Œä¹Ÿæ˜¯æˆ‘åœ¨è¿™ä¸ªæ¡†æ¶ç¼–å†™è¿‡ç¨‹ä¸­ä¸€ç›´æ€è€ƒçš„ï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€1. å¾®æœåŠ¡çš„åˆ’åˆ†ï¼Œåœ¨å•ä¸ªä¸šåŠ¡ç‚¹ä¸Šå·²ç»åšåˆ°äº†ç‹¬ç«‹ï¼Œå¯æ˜¯ç«™åœ¨æ•´ä¸ªäº§å“çš„æµç¨‹ä¸Šçœ‹ï¼Œå¤šä¸ªæœåŠ¡å¯èƒ½çš„äº¤å‰ä¾èµ–è°ƒç”¨ï¼Œç‰¹åˆ«æ˜¯å¤æ‚é€»è¾‘ï¼Œäº§å“æµç¨‹å¦‚ä½•è½å®åˆ°ä»£ç ä¸­è¿›è¡Œæ¸…æ™°ç®¡æ§&lt;/p&gt;
&lt;p&gt;ã€€ã€€2. ä¸šåŠ¡å•å…ƒçš„è¾¹ç•Œå’Œè¡”æ¥å¤„ç†ï¼Œå¸¸è§çš„æ˜¯åœ¨å½“å‰åŠŸèƒ½æ–¹æ³•çš„åº•éƒ¨ï¼Œç›´æ¥è°ƒç”¨ä¸‹ä¸€æ­¥çš„æ–¹æ³•ï¼Œåˆå¦‚ä¸šåŠ¡ä¹‹é—´æ·»åŠ æ¶ˆæ¯é˜Ÿåˆ—çš„å¤„ç†ï¼Œéƒ½ç›´æ¥ä¾µå…¥ä¸šåŠ¡ä»£ç ä¸­ï¼Œå½“å‰æ–¹æ³•çš„çš„å•å…ƒåŒ–å’Œå¯å¤ç”¨æ€§ï¼Œç›´æ¥å—é™äºå®æ–½å·¥ç¨‹å¸ˆæ°´å¹³çš„é«˜ä½ã€‚åŒæ—¶è¿™ä¸ªåˆç›´æ¥å½±å“å¼€å‘è´Ÿè´£äººæˆ–å¼€å‘ä¸»ç®¡çš„ç®¡æ§èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€3. éšç€äº§å“çš„è¿­ä»£ï¼Œä¸šåŠ¡æµç¨‹çš„å¿«é€Ÿå˜åŒ–ï¼Œå¦‚ä½•èƒ½å¤Ÿä¸åŠ¨å·²æœ‰ä¸šåŠ¡å•å…ƒä»£ç æœ¬èº«çš„æƒ…å†µä¸‹ï¼Œå¿«é€Ÿåœ¨å½“å‰ä¸šåŠ¡æµç¨‹ä¸­æ’é™¤æˆ–æ–°å¢ä¸šåŠ¡æ“ä½œå•å…ƒã€‚&lt;/p&gt;
&lt;p&gt;ã€€Â  è¦å‡å°‘ä»¥ä¸Šçš„é—®é¢˜çš„å‘ç”Ÿï¼Œå…³é”®åœ¨äºå¦‚ä½•è§£å†³ä¸šåŠ¡æ“ä½œå•å…ƒä¹‹é—´çš„å…³è”æ€§ã€‚å›åˆ°ç°å®ï¼Œå¯¹äºä»»ä½•äº§å“ï¼Œå®ƒä¸€å®šå­˜åœ¨ä¸€ä¸ªä¸šåŠ¡ç”Ÿå‘½å‘¨æœŸï¼Œåœ¨è¿™ä¸ªå‘¨æœŸå†…ï¼Œå›´ç»•æŸä¸ªå¯¹è±¡ï¼Œéšç€æ—¶é—´æ¨è¿›ï¼Œæ‰§è¡Œä¸€ç³»åˆ—çš„åŠ¨ä½œï¼Œæœ€ç»ˆå¾—åˆ°æŸä¸ªä¸šåŠ¡ç»“æœã€‚æ—¢ç„¶å­˜åœ¨æ—¶åºæ€§ï¼Œé‚£ä¹ˆå°±å¯ä»¥å°è¯•æŠ½è±¡ä¸€ä¸ªæ—¶åºè½®å»“çš„è·¯å¾„å›¾ï¼Œåœ¨è¿™ä¸ªè½®å»“ä¹‹ä¸‹ï¼Œå†å»å¡«å……å…·ä½“åŠ¨ä½œå®ç°ï¼Œè¿›åº¦ç”±è¿™ä¸ªæ—¶åºè½®å»“è·¯å¾„å›¾æ ¹æ®å…·ä½“çš„åŠ¨ä½œç»“æœå†³å®šå¦‚ä½•æ¨è¿›ï¼Œè¿™ä¸ªè·¯å¾„å›¾åˆ™å¯ä»¥å’Œäº§å“æµç¨‹å›¾è¿›è¡Œæ˜ å°„ï¼Œå½¢æˆç³»ç»Ÿé‡Œçš„æµç¨‹ç®¡æ§ä¸­æ¢ï¼Œåœ¨ç³»ç»Ÿç¼–ç å±‚çº§å°†äº‹ä»¶å†…è°ƒç”¨çš„â€éšå¼å¯¼å‘â€è½¬å˜ä¸ºäº‹ä»¶å¤–çš„â€œæ˜¾å¼å¯¼å‘â€ã€‚&lt;/p&gt;
&lt;p&gt;ã€€Â  &lt;a href=&quot;https://github.com/KevinWG/OSS.EventFlow&quot; target=&quot;_blank&quot;&gt;OSS.EventFlow&lt;/a&gt;æ˜¯ä»¥BPMN 2.0 æµç¨‹ç®¡ç†ä¸ºæ€è·¯ï¼Œè®¾è®¡çš„è½»é‡çº§ä¸šåŠ¡ç”Ÿå‘½å‘¨æœŸæµç¨‹å¼•æ“åŸºç¡€æ¡†æ¶ï¼Œå°†ä¸šåŠ¡é¢†åŸŸå¯¹è±¡çš„æµç¨‹ç®¡æ§å’Œäº‹ä»¶åŠŸèƒ½æŠ½è±¡å‰¥ç¦»ï¼Œåˆ‡æ–­äº‹ä»¶åŠŸèƒ½æ–¹æ³•å†…çš„é“¾å¼è°ƒç”¨ï¼Œææƒè‡³æµç¨‹å¼•æ“ç»Ÿä¸€åè°ƒç®¡æ§ï¼Œäº‹ä»¶åŠŸèƒ½ä½œä¸ºç‹¬ç«‹å¤„ç†å•å…ƒåµŒå…¥ä¸šåŠ¡æµç¨‹ä¹‹ä¸­ï¼Œç”±æµç¨‹å¼•æ“å¤„ç†äº‹ä»¶çš„è§¦å‘ä¸æ¶ˆæ¯ä¼ é€’ï¼Œè¾¾æˆäº‹ä»¶å¤„ç†å•å…ƒçš„æœ‰æ•ˆéš”ç¦»ã€‚ç”±æ­¤æµç¨‹çš„è¡”æ¥å˜æˆå¯ç‹¬ç«‹ç¼–ç¨‹çš„éƒ¨åˆ†ï¼ŒåŒæ—¶å‘ä¸Šå±‚æä¾›ä¸šåŠ¡åŠ¨ä½œçš„ç‹¬ç«‹æ‰©å±•ï¼Œä¿è¯ä¸šåŠ¡å•å…ƒçš„ç»å¯¹ç‹¬ç«‹å’Œå¯å¤ç”¨æ€§ï¼Œ ç›®çš„æ˜¯å¯ä»¥åƒæ­ç§¯æœ¨ä¸€æ ·æ¥å®Œæˆä¸åŒåŠŸèƒ½ä»£ç çš„é›†æˆï¼Œç³»ç»Ÿå‘çœŸæ­£çš„ä½ä»£ç å¹³å°è¿‡æ¸¡ã€‚&lt;/p&gt;
&lt;p&gt;ã€€Â  &lt;a href=&quot;https://github.com/KevinWG/OSS.EventFlow&quot; target=&quot;_blank&quot;&gt;OSS.EventFlow&lt;/a&gt;å¼•æ“çš„åŸç†æ˜¯å°†æ•´ä¸ªä¸šåŠ¡æµå½“åšä¸€ä¸ªæµç¨‹ç®¡é“ï¼Œç»“åˆæµç¨‹æµè½¬çš„ç‰¹æ€§ï¼Œæ­¤å¼•æ“æŠ½è±¡äº†ä¸‰ç±»æ ¸å¿ƒæµç¨‹çš„ç®¡é“ç»„ä»¶ï¼š&lt;/p&gt;
&lt;p&gt;ã€€&lt;strong&gt;ã€€1. äº‹ä»¶æ´»åŠ¨ç»„ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€Â è¿™ç±»ç»„ä»¶ä¸»è¦æ˜¯å¤„ç†ä»»åŠ¡çš„å…·ä½“å†…å®¹ï¼Œå¦‚å‘é€çŸ­ä¿¡ï¼Œæ‰§è¡Œä¸‹å•ï¼Œæ‰£å‡åº“å­˜ç­‰å®é™…ä¸šåŠ¡æ“ä½œ&lt;/p&gt;
&lt;p class=&quot;_mce_tagged_br&quot;&gt;ã€€&lt;strong&gt;ã€€2. ç½‘å…³ç»„ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;p class=&quot;_mce_tagged_br&quot;&gt;ã€€ã€€è¿™ç±»ç»„ä»¶ä¸»è¦è´Ÿè´£ä¸šåŠ¡æµç¨‹æ–¹å‘æ€§çš„é€»è¾‘è§„åˆ™å¤„ç†ï¼Œå¦‚åˆ†æ”¯ï¼Œåˆå¹¶æµç¨‹&lt;/p&gt;
&lt;p class=&quot;_mce_tagged_br&quot;&gt;ã€€&lt;strong&gt;ã€€3. è¿æ¥å™¨ç»„ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;p class=&quot;_mce_tagged_br&quot;&gt;ã€€ã€€è¿™ç±»ç»„ä»¶ä¸»è¦è´Ÿè´£å…¶ä»–ç»„ä»¶ä¹‹é—´çš„æ¶ˆæ¯ä¼ é€’ä¸è½¬åŒ–&lt;/p&gt;

&lt;h2&gt;ä¸€. äº‹ä»¶æ´»åŠ¨ç»„ä»¶&lt;/h2&gt;
&lt;p&gt;ã€€ã€€è¿™ä¸ªç»„ä»¶å°±æ˜¯ä¸šåŠ¡çš„åŠ¨ä½œæœ¬èº«ï¼Œæ ¹æ®ä»»åŠ¡è§¦å‘çš„ç‰¹æ€§ï¼Œå¦‚å…³è”è‡ªåŠ¨æ‰§è¡Œï¼Œä¸­æ–­è§¦å‘ï¼ˆå¦‚ç”¨æˆ·è§¦å‘ï¼Œæˆ–æ¶ˆæ¯é˜Ÿåˆ—ç­‰ï¼‰ï¼Œæ ¹æ®è¿™ä¸¤ç§æƒ…å½¢ï¼Œæä¾›äº†ä¸¤ä¸ªæŠ½è±¡åŸºç±»ï¼š&lt;/p&gt;
&lt;p&gt;ã€€&lt;strong&gt;ã€€1. BaseActivity - ç›´æ¥æ‰§è¡Œæ´»åŠ¨ç»„ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€å¸¸è§å¦‚è‡ªåŠ¨å®¡æ ¸åŠŸèƒ½ï¼Œæˆ–è€…æ”¯ä»˜æˆåŠŸåè‡ªåŠ¨è§¦å‘é‚®ä»¶å‘é€ç­‰ï¼Œæœ€ç®€å•ä¹Ÿæ˜¯æœ€åŸºæœ¬çš„ä¸€ç§åŠ¨ä½œå¤„ç†ã€‚ ç»§æ‰¿æ­¤åŸºç±»ï¼Œé‡å†™Executingæ–¹æ³•å®ç°æ´»åŠ¨å†…å®¹ï¼ŒåŒä¸€ä¸ªæµä½“ä¸‹å®ç°è‡ªåŠ¨å…³è”æ‰§è¡Œã€‚ å¦‚æœExecutingæ–¹æ³•è¿”å›Falseï¼Œåˆ™è§¦å‘Blockï¼Œä¸šåŠ¡æµä¸å†å‘åç»­ç®¡é“ä¼ é€’ è¿”å›Trueï¼Œåˆ™æµä½“è‡ªåŠ¨æµå…¥åç»­ç®¡é“&lt;/p&gt;
&lt;p&gt;ã€€&lt;strong&gt;ã€€2.BaseActionActivity&amp;lt;TContext, TResult&amp;gt; - ç”¨æˆ·è§¦å‘æ´»åŠ¨ç»„ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€ç»§æ‰¿æ­¤åŸºç±» ï¼Œé‡å†™Executingæ–¹æ³•ï¼ˆè‡ªå®šä¹‰è¿”å›ç»“æœç±»å‹ï¼‰å®ç°æ´»åŠ¨å†…å®¹ã€‚ å½“ä¸šåŠ¡æµæµå…¥å½“å‰ç»„ä»¶æ—¶ï¼Œè§¦å‘è°ƒç”¨Noticeï¼ˆè™šæ–¹æ³•å¯é‡å†™ï¼‰ï¼Œä¹‹åä¸šåŠ¡æµåŠ¨åœæ­¢ï¼Œ å½“ç”¨æˆ·è§¦å‘æ—¶ï¼Œæ˜¾å¼è°ƒç”¨ Action æ–¹æ³•ï¼ˆå†…éƒ¨è°ƒç”¨Executingè¿”å›è‡ªå®šä¹‰ç»“æœç±»å‹ï¼‰ï¼Œæµç¨‹ç»§ç»­å‘åæµåŠ¨æ‰§è¡Œã€‚&lt;/p&gt;
&lt;h2&gt;äºŒ. ç½‘å…³ç»„ä»¶&lt;/h2&gt;
&lt;p&gt;ã€€ã€€æ­¤ç»„ä»¶ä¸»è¦è´Ÿè´£é€»è¾‘çš„è§„åˆ™å¤„ç†ï¼Œä¸šåŠ¡çš„èµ°å‘é€»è¾‘æ— éåˆ†ä¸åˆï¼Œè¿™é‡Œç»™å‡ºä¸¤ä¸ªåŸºç±»ï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€&lt;strong&gt;1.BaseAggregateGateway - èšåˆä¸šåŠ¡åˆ†æ”¯æµç¨‹æ´»åŠ¨ç»„ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€ å°†å¤šæ¡ä¸šåŠ¡åˆ†æ”¯èšåˆåˆ°å½“å‰ç½‘å…³ç»„ä»¶ä¸‹ï¼Œç”±å½“å‰ç½‘å…³ç»Ÿä¸€æ§åˆ¶æ˜¯å¦å°†ä¸šåŠ¡æµç¨‹å‘åä¼ é€’ï¼Œåªéœ€è¦ç»§æ‰¿æ­¤åŸºç±»é‡å†™IfMatchCondition æ–¹æ³•å³å¯&lt;/p&gt;
&lt;p&gt;ã€€ã€€&lt;strong&gt;2.BaseBranchGateway - åˆ†æ”¯ç½‘å…³ç»„ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€ æ­¤ç»„ä»¶å°†ä¸šåŠ¡åˆ†æµå¤„ç†ï¼Œå®šä¹‰æµä½“æ—¶é€šè¿‡AddBranchPipeæ·»åŠ å¤šä¸ªåˆ†æ”¯ï¼Œè‡³äºå¦‚ä½•åˆ†æµï¼Œåªéœ€è¦ç»§æ‰¿æ­¤åŸºç±»é‡å†™FilterNextPipesæ–¹æ³•å³å¯ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨æ­¤ä¹‹ä¸Šå®ç°BPMNä¸­çš„å‡ ç§ç½‘å…³ç±»å‹ï¼ˆå¹¶è¡Œï¼Œæ’ä»–ï¼Œå’ŒåŒ…å«ï¼‰ã€‚&lt;/p&gt;
&lt;h2&gt;ä¸‰. è¿æ¥å™¨ç»„ä»¶&lt;/h2&gt;
&lt;p&gt;ã€€ã€€æ­¤ç»„ä»¶ä¸»è¦è´Ÿè´£æ¶ˆæ¯çš„ä¼ é€’å’Œè½¬åŒ–å¤„ç†ï¼Œåœ¨æ¶ˆæ¯çš„ä¼ é€’è¿‡ç¨‹ä¸­åˆæ”¯æŒç›´æ¥ä¼ é€’å’Œå¼‚æ­¥ç¼“å†²ï¼ˆIBufferTunnelï¼‰ä¼ é€’ï¼Œæ ¹æ®æ˜¯å¦éœ€è¦è½¬åŒ–ï¼Œæˆ–è€…å¼‚æ­¥å®šä¹‰ä¸‰ä¸ªåŸºç±»å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€&lt;strong&gt;1.BaseConnector&amp;lt;InContext, OutContext&amp;gt; - è½¬åŒ–è¿æ¥ç»„ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä¸šåŠ¡æµç»è¿‡æ­¤ç»„ä»¶ï¼Œç›´æ¥æ‰§è¡ŒConvertæ–¹æ³•ï¼ˆéœ€é‡å†™ï¼‰ï¼Œè½¬åŒ–æˆå¯¹åº”çš„ä¸‹ä¸ªç»„ä»¶æ‰§è¡Œå‚æ•°ï¼Œè‡ªåŠ¨è¿›å…¥ä¸‹ä¸ªç»„ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€&lt;strong&gt;2.BaseBufferConnector&amp;lt;TContext&amp;gt; - å¼‚æ­¥ç¼“å†²è¿æ¥ç»„ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€ç»§æ‰¿IBufferTunnelæ¥å£ ç»§æ‰¿æ­¤ç»„ä»¶åï¼Œå¿…é¡»é‡å†™Pushæ–¹æ³•ï¼Œå®ç°å¼‚æ­¥ç¼“å†²ä¿å­˜çš„å¤„ç†ï¼Œä¸šåŠ¡æµè¿›å…¥æ­¤ç»„ä»¶åï¼Œè°ƒç”¨Pushæ–¹æ³•ä¿å­˜ï¼Œä¹‹åä¸šåŠ¡æµåŠ¨åœæ­¢ï¼Œ æ¶ˆæ¯å”¤é†’æ—¶ï¼Œéœ€æ˜¾å¼è°ƒç”¨Popæ–¹æ³•ï¼Œä¸šåŠ¡æµç»§ç»­å‘åæ‰§è¡Œ&lt;/p&gt;
&lt;p&gt;ã€€&lt;strong&gt;ã€€3.BaseBufferConnector&amp;lt;InContext, OutContext&amp;gt; - å¼‚æ­¥ç¼“å†²+è½¬åŒ– è¿æ¥ç»„ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€ ç»§æ‰¿æ­¤ç»„ä»¶åï¼Œå¿…é¡»é‡å†™Pushï¼ŒConvertæ–¹æ³•ï¼Œå®ç°å¼‚æ­¥ç¼“å†²ä¿å­˜å’Œè½¬åŒ–çš„å¤„ç†ï¼Œä¸šåŠ¡æµè¿›å…¥æ­¤ç»„ä»¶åï¼ŒåŒæ ·è°ƒç”¨Pushæ–¹æ³•ä¿å­˜ï¼Œä¹‹åä¸šåŠ¡æµåŠ¨åœæ­¢ï¼Œ æ¶ˆæ¯å”¤é†’æ—¶ï¼Œéœ€æ˜¾å¼è°ƒç”¨Popæ–¹æ³•ï¼ˆå†…éƒ¨è°ƒç”¨Convertæ–¹æ³•ï¼Œå®Œæˆå‚æ•°è½¬åŒ–ï¼‰ï¼Œä¸šåŠ¡æµç»§ç»­å‘åæ‰§è¡Œ&lt;/p&gt;
&lt;h2&gt;å››. ç®€å•ç¤ºä¾‹åœºæ™¯&lt;/h2&gt;
&lt;p&gt;ã€€ã€€é¦–å…ˆæˆ‘ä»¬å…ˆå‡è®¾å½“å‰æœ‰ä¸€ä¸ªè¿›è´§ç®¡ç†çš„åœºæ™¯ï¼Œï¼Œéœ€ç»å† è¿›è´§ç”³è¯·ï¼Œç”³è¯·å®¡æ‰¹ï¼Œè´­ä¹°æ”¯ä»˜ï¼Œå…¥åº“ï¼ˆåŒæ—¶é‚®ä»¶é€šçŸ¥ç”³è¯·äººï¼‰ å‡ ä¸ªç¯èŠ‚ï¼Œæµç¨‹å›¾å¦‚ä¸‹ï¼šÂ &lt;/p&gt;
&lt;p&gt;ã€€ã€€&lt;img src=&quot;https://img2020.cnblogs.com/blog/154246/202102/154246-20210208004714971-1436209758.png&quot; alt=&quot;&quot; width=&quot;466&quot; height=&quot;191&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€æ ¹æ®æ­¤æµç¨‹å›¾ï¼Œæ¯ä¸ªç¯èŠ‚å¯¹åº”ä¸€ä¸ªäº‹ä»¶æ´»åŠ¨ï¼Œè¿™é‡Œä»¥ç”³è¯·æ´»åŠ¨æˆ‘ä»¬å®šä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;34&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
    public class ApplyActivity : BaseActivity&amp;lt;ApplyContext&amp;gt;
    {
        protected override Task&amp;lt;bool&amp;gt; Executing(ApplyContext data)
        {
            // ......
            LogHelper.Info(&quot;è¿™é‡Œåˆšæ‰å‘ç”Ÿäº†ä¸€ä¸ªé‡‡è´­ç”³è¯·&quot;); 
            return Task.FromResult(true);
        }
    }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿™é‡Œä¸ºäº†æ–¹ä¾¿è§‚å¯Ÿï¼Œç›´æ¥ç»§æ‰¿ BaseActivityï¼Œå³å¤šä¸ªæ´»åŠ¨è¿æ¥åï¼Œè‡ªåŠ¨è¿è¡Œã€‚ ç›¸åŒçš„å¤„ç†æ–¹å¼æˆ‘ä»¬å®šä¹‰å‰©ä¸‹å‡ ä¸ªç¯èŠ‚äº‹ä»¶ï¼Œåˆ—è¡¨å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-cs&quot; readability=&quot;7&quot;&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;34&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
    ApplyActivity      - ç”³è¯·äº‹ä»¶    (å‚æ•°ï¼šApplyContext)
    AutoAuditActivity  - å®¡æ ¸äº‹ä»¶    (å‚æ•°ï¼šApplyContext)
    PayActivity        - è´­ä¹°äº‹ä»¶    (å‚æ•°ï¼šPayContext)
    StockActivity      - å…¥åº“äº‹ä»¶    (å‚æ•°ï¼šStockContext)
    EmailActivity      - å‘é€é‚®ä»¶äº‹ä»¶    (å‚æ•°ï¼šSendEmailContext)
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä»¥ä¸Šäº”ä¸ªäº‹ä»¶æ´»åŠ¨ï¼Œå…¶å…·ä½“å®ç°å’Œå‚æ•°å®Œå…¨ç‹¬ç«‹ï¼ŒåŒæ—¶å› ä¸ºè´­ä¹°æ”¯ä»˜åé‚®ä»¶å’Œå…¥åº“æ˜¯ç›¸äº’ç‹¬ç«‹çš„äº‹ä»¶ï¼Œå®šä¹‰åˆ†æ”¯ç½‘å…³åšåˆ†æµï¼ˆè§„åˆ™ï¼‰å¤„ç†ï¼Œä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-cs&quot; readability=&quot;7.5&quot;&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
    public class PayGateway:BaseBranchGateway&amp;lt;PayContext&amp;gt;
    {
        protected override IEnumerable&amp;lt;BasePipe&amp;lt;PayContext&amp;gt;&amp;gt; FilterNextPipes(List&amp;lt;BasePipe&amp;lt;PayContext&amp;gt;&amp;gt; branchItems, PayContext context)
        {
            // ......
            LogHelper.Info(&quot;è¿™é‡Œè¿›è¡Œæ”¯ä»˜é€šè¿‡åçš„åˆ†æµ&quot;);
            return branchItems;
        }
    }
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿™é‡Œçš„æ„æ€ç›¸å¯¹ç®€å•ï¼Œå³ä¼ å…¥çš„æ‰€æœ‰çš„åˆ†æ”¯ä¸ç”¨è¿‡æ»¤ï¼Œç›´æ¥å…¨éƒ¨åˆ†å‘ã€‚&lt;/p&gt;
&lt;p&gt;åŒæ ·å› ä¸ºäº”ä¸ªäº‹ä»¶çš„æ–¹æ³•å‚æ•°ä¸å°½ç›¸åŒï¼Œä¸­é—´çš„æˆ‘ä»¬æ·»åŠ æ¶ˆæ¯è¿æ¥å™¨ï¼Œä½œä¸ºæ¶ˆæ¯çš„ä¸­è½¬å’Œè½¬åŒ–å¤„ç†ï¼ˆä¹Ÿå¯ä»¥åœ¨åˆ›å»ºæµä½“æ—¶è¡¨è¾¾å¼å¤„ç†ï¼‰ï¼Œä»¥æ”¯ä»˜å‚æ•°åˆ°é‚®ä»¶çš„å‚æ•°è½¬åŒ–ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-cs&quot; readability=&quot;7.5&quot;&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
    public class PayEmailConnector : BaseConnector&amp;lt;PayContext, SendEmailContext&amp;gt;
    {
        protected override SendEmailContext Convert(PayContext inContextData)
        {
            // ......
            return new SendEmailContext() { id = inContextData.id };
        }
    }
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;é€šè¿‡ä»¥ä¸Šï¼Œç”³è´­æµç¨‹çš„ç»„ä»¶å®šä¹‰å®Œæ¯•ï¼Œä¸²è”ä½¿ç”¨å¦‚ä¸‹ï¼ˆè¿™é‡Œæ˜¯å•å…ƒæµ‹è¯•ç±»ï¼Œå®é™…ä¸šåŠ¡æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªServiceå¤„ç†ï¼‰ï¼š&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-cs&quot; readability=&quot;7.5&quot;&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
        public readonly ApplyActivity ApplyActivity = new ApplyActivity();
        public readonly AuditActivity AuditActivity = new AuditActivity();

        public readonly PayActivity PayActivity = new PayActivity();

        public readonly PayGateway PayGateway = new PayGateway();

        public readonly StockConnector StockConnector = new StockConnector();
        public readonly StockActivity  StockActivity  = new StockActivity();

        public readonly PayEmailConnector EmailConnector = new PayEmailConnector();
        public readonly SendEmailActivity EmailActivity  = new SendEmailActivity();

          //  æ„é€ å‡½æ•°å†…å®šä¹‰æµä½“å…³è”
        public BuyFlowTests()
        {
            ApplyActivity
            .Append(AuditActivity)
            .AppendConvert(applyContext =&amp;gt; new PayContext() {id = applyContext.id})// è¡¨è¾¾å¼æ–¹å¼çš„è½¬åŒ–å™¨
            .Append(PayActivity)
            .Append(PayGateway);

            // ç½‘å…³åˆ†æ”¯ - å‘é€é‚®ä»¶åˆ†æ”¯
            PayGateway.AddBranchPipe(EmailConnector)
            .Append(EmailActivity);

            // ç½‘å…³åˆ†æ”¯- å…¥åº“åˆ†æ”¯
            PayGateway.AddBranchPipe(StockConnector)
            .Append(StockActivity);
            //.Append(åç»­äº‹ä»¶)
        }


        [TestMethod]
        public async Task FlowTest()
        {
            await ApplyActivity.Start(new ApplyContext()
            {
                id = &quot;test_business_id&quot;
            });
        }
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿è¡Œå•å…ƒæµ‹è¯•ï¼Œç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;34&quot;&gt;
&lt;pre class=&quot;brush:csharp;gutter:true;&quot;&gt;
xxx Detail:è¿™é‡Œåˆšæ‰å‘ç”Ÿäº†ä¸€ä¸ªé‡‡è´­ç”³è¯·

xxx Detail:ç®¡ç†å‘˜å®¡æ ¸é€šè¿‡

xxx Detail:å‘èµ·æ”¯ä»˜å¤„ç†

xxx Detail:è¿™é‡Œè¿›è¡Œæ”¯ä»˜é€šè¿‡åçš„åˆ†æµ

xxx Detail:åˆ†æµ-1.é‚®ä»¶å‘é€

xxx Detail:åˆ†æµ-2.åº“å­˜ä¿å­˜
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;å¦‚æœä½ å·²ç»çœ‹åˆ°è¿™é‡Œï¼Œå¹¶ä¸”æ„Ÿè§‰è¿˜è¡Œçš„è¯å¯ä»¥åœ¨ä¸‹æ–¹ç‚¹ä¸ªèµï¼Œæˆ–è€…ä¹Ÿå¯ä»¥å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼ˆè§äºŒç»´ç ï¼‰Â &lt;/p&gt;
&lt;p&gt;_________________________________________&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/154246/201811/154246-20181130002928372-487509861.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;/div&gt;</description>
<pubDate>Mon, 08 Feb 2021 00:21:00 +0000</pubDate>
<dc:creator>KevinCC</dc:creator>
<og:description>å°†ä¸šåŠ¡çš„æµç¨‹ç®¡æ§å’Œäº‹ä»¶åŠŸèƒ½æŠ½è±¡å‰¥ç¦»ï¼Œåˆ‡æ–­äº‹ä»¶åŠŸèƒ½æ–¹æ³•å†…çš„é“¾å¼è°ƒç”¨ï¼Œææƒè‡³æµç¨‹å¼•æ“ç»Ÿä¸€åè°ƒç®¡æ§ï¼Œäº‹ä»¶åŠŸèƒ½ä½œä¸ºç‹¬ç«‹å¤„ç†å•å…ƒåµŒå…¥ä¸šåŠ¡æµç¨‹ä¹‹ä¸­ï¼Œç”±æµç¨‹å¼•æ“å¤„ç†äº‹ä»¶çš„è§¦å‘ä¸æ¶ˆæ¯ä¼ é€’ï¼Œåœ¨ç³»ç»Ÿç¼–ç å±‚çº§å°†äº‹ä»¶å†…è°ƒç”¨çš„</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/osscoder/p/14093479.html</dc:identifier>
</item>
<item>
<title>æ— æ‰€ä¸èƒ½çš„Embedding6 - è·¨å…¥Transformeræ—¶ä»£ï½æ¨¡å‹è¯¦è§£&amp;ä»£ç å®ç° - é£é›¨ä¸­çš„å°ä¸ƒ</title>
<link>http://www.cnblogs.com/gogoSandy/p/14386998.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/gogoSandy/p/14386998.html</guid>
<description>&lt;p&gt;ä¸Šä¸€ç« æˆ‘ä»¬èŠäº†èŠquick-thoughté€šè¿‡å¹²æ‰decoderåŠ å¿«è®­ç»ƒ, CNNâ€”LSTMç”¨CNNä½œä¸ºEncoderå¹¶è¡Œè®¡ç®—æ¥æé€Ÿç­‰æ–¹æ³•ï¼Œè¿™ä¸€ç« çœ‹çœ‹æŠ›å¼€CNNå’ŒRNNï¼Œtransformeræ˜¯å¦‚ä½•åªåŸºäºattentionå¯¹ä¸å®šé•¿çš„åºåˆ—ä¿¡æ¯è¿›è¡Œæå–çš„ã€‚è™½ç„¶Attention is All you needè®ºæ–‡æœ¬èº«æ˜¯é’ˆå¯¹NMTç¿»è¯‘ä»»åŠ¡çš„,ä½†transformerä½œä¸ºåç»­USE/Bertçš„é‡è¦ç»„ä»¶ï¼Œæ”¾åœ¨embeddingé‡Œä¹Ÿæ²¡å•¥é—®é¢˜ã€‚ä»¥ä¸‹åŸºäºWMTè‹±ç¿»ä¸­çš„ä»»åŠ¡å®ç°äº†transfromerï¼Œå®Œæ•´çš„æ¨¡å‹ä»£ç è¯¦è§&lt;a href=&quot;https://github.com/DSXiangLi/Embedding/tree/master/transformer&quot; target=&quot;_blank&quot;&gt;&lt;strong&gt;DSXiangLi-Embedding-transformer&lt;/strong&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;æ¨¡å‹ç»„ä»¶&quot;&gt;æ¨¡å‹ç»„ä»¶&lt;/h2&gt;
&lt;p&gt;è®©æˆ‘ä»¬å…ˆè¿‡ä¸€éTransformerçš„åŸºç¡€ç»„ä»¶ï¼Œä»¥æ–‡æœ¬åœºæ™¯ä¸ºä¾‹ï¼Œencoderå’Œdecoderçš„è¾“å…¥æ˜¯æ–‡æœ¬åºåˆ—ï¼Œæ¯ä¸ªbatchéƒ½padåˆ°ç›¸åŒé•¿åº¦ç„¶åå¯¹æ¯ä¸ªè¯åšembeddingå¾—åˆ°batch * padding_len * emb_sizeçš„è¾“å…¥å‘é‡&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å‡è®¾batch=1ï¼ŒWord Embeddingç»´åº¦ä¸º512ï¼ŒEncoderçš„è¾“å…¥æ˜¯'Fox hunt rabbit at night', ç»è¿‡Embeddingä¹‹åå¾—åˆ°1 * 5 * 512çš„å‘é‡ï¼Œä»¥ä¸‹çš„æ¨¡å‹ç»„ä»¶éƒ½æœåŠ¡äºå¦‚ä½•ä»è¿™æ¡æ–‡æœ¬é‡Œæå–å‡ºæ›´å¤šçš„ä¿¡æ¯&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;attention&quot;&gt;Attention&lt;/h3&gt;
&lt;p&gt;åºåˆ—ä¿¡æ¯æå–çš„ä¸€ä¸ªè¦ç‚¹åœ¨äºå¦‚ä½•è®©æ¯ä¸ªè¯éƒ½è€ƒè™‘åˆ°å®ƒæ‰€åœ¨çš„ä¸Šä¸‹æ–‡è¯­å¢ƒ&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;RNNï¼šä¸Šä¸‹æ–‡ä¿¡æ¯é å‘å/å‰ä¼ é€’ï¼Œä»å‰å¾€åä¼ rabbitå°±èƒ½è€ƒè™‘åˆ°foxï¼Œä»åå¾€å‰ä¼ rabbitå°±èƒ½è€ƒè™‘åˆ°night&lt;/li&gt;
&lt;li&gt;CNNï¼šé ä¸åŒkernel_sizeå®šä¹‰çš„å±€éƒ¨çª—å£æ¥è·å–contextä¿¡æ¯, kernel_size&amp;gt;=3ï¼Œrabbitå°±èƒ½è€ƒè™‘åˆ°æ‰€æœ‰å…¶ä»–tokençš„ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;Attentionï¼šé€šè¿‡è®¡ç®—è¯å’Œä¸Šä¸‹æ–‡ä¹‹é—´çš„ç›¸å…³æ€§ï¼ˆå¹¿ä¹‰ï¼‰ï¼Œæ¥å†³å®šå¦‚ä½•æŠŠå‘¨å›´ä¿¡æ¯(value)èåˆ(weighted-average)è¿›å½“å‰ä¿¡æ¯(queryï¼‰ï¼Œä¸‹å›¾æ¥æºReference5&lt;/li&gt;
&lt;/ul&gt;&lt;p align=&quot;center&quot;&gt;&lt;img src=&quot;https://miro.medium.com/max/1400/0*zJ2NpWCzaHfsyoLH.gif&quot; width=&quot;450&quot; height=&quot;200&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Transformeråœ¨attentionçš„åŸºç¡€ä¸Šæœ‰ä¸¤ç‚¹æ”¹è‰¯ï¼Œ åˆ†åˆ«æ˜¯Scaled-dot product attentionå’Œmulti-head attentionã€‚&lt;/p&gt;
&lt;h4 id=&quot;scaled-dot-product-attention&quot;&gt;Scaled-dot product attention&lt;/h4&gt;
&lt;p align=&quot;center&quot;&gt;&lt;img src=&quot;https://static01.imgkr.com/temp/562c5e905c5d4884b7a83148d3560260.png&quot; width=&quot;300&quot; height=&quot;350&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Attentionçš„è¾“å…¥æ˜¯ä¸‰è¦ç´ queryï¼Œkeyå’Œvalueï¼Œé€šè¿‡è®¡ç®—queryå’ŒKeyçš„ç›¸å…³æ€§ï¼Œè¿™é‡Œæ˜¯å¹¿ä¹‰çš„ç›¸å…³ï¼Œå¯ä»¥é€šè¿‡&lt;a href=&quot;https://paperswithcode.com/method/additive-attention&quot; target=&quot;_blank&quot;&gt;åŠ æ³•&lt;/a&gt;/&lt;a href=&quot;https://paperswithcode.com/method/multiplicative-attention&quot; target=&quot;_blank&quot;&gt;ä¹˜æ³•&lt;/a&gt;å¾—åˆ°æƒé‡å‘é‡ï¼Œç”¨æƒé‡å¯¹valueåšåŠ æƒå¹³å‡ä½œä¸ºè¾“å‡ºã€‚â€˜fox hunt rabbit at nightâ€™ä¼šè®¡ç®—æ¯ä¸ªè¯å¯¹æ‰€æœ‰è¯çš„ç›¸å…³æ€§ï¼Œå¾—åˆ°[5, 5]çš„ç›¸ä¼¼åº¦çŸ©é˜µ/æƒé‡å‘é‡ï¼Œæ¥å¯¹è¾“å…¥[5, 512]è¿›è¡ŒåŠ æƒï¼Œå¾—åˆ°æ¯ä¸ªè¯åœ¨è€ƒè™‘ä¸Šä¸‹æ–‡è¯­ä¹‰åæ–°çš„å‘é‡è¡¨è¾¾[5, 512]&lt;/p&gt;
&lt;p&gt;Transformeråœ¨å¸¸è§„çš„ä¹˜æ³•attentionçš„åŸºç¡€ä¸ŠåŠ å…¥&lt;span class=&quot;math inline&quot;&gt;\(d_k\)&lt;/span&gt;ç»´åº¦çš„æ­£åˆ™åŒ–ã€‚è¿™é‡Œ&lt;span class=&quot;math inline&quot;&gt;\(d_k\)&lt;/span&gt;æ˜¯queryå’Œkeyçš„ç‰¹å¾ç»´åº¦ï¼Œåœ¨æˆ‘ä»¬çš„æ–‡æœ¬åœºæ™¯ä¸‹æ˜¯embedding_size[512] ã€‚æ­£åˆ™åŒ–çš„åŸå› æ˜¯é¿å…é«˜ç»´embeddingçš„å†…ç§¯å‡ºç°è¶…çº§å¤§çš„å€¼ï¼Œå¯¼è‡´softmaxçš„gradientéå¸¸å°ã€‚&lt;/p&gt;
&lt;p&gt;ç›´è§‚è§£é‡Šï¼Œå‡è®¾queryå’Œkeyçš„æ¯ä¸ªå…ƒç´ éƒ½ç‹¬ç«‹æœä»&lt;span class=&quot;math inline&quot;&gt;\(\mu=0 \, \sigma^2=1\)&lt;/span&gt;çš„åˆ†å¸ƒ, é‚£å†…ç§¯&lt;span class=&quot;math inline&quot;&gt;\(\sum_{d_k}q_ik_i\)&lt;/span&gt;å°±æœä»&lt;span class=&quot;math inline&quot;&gt;\(\mu=0 \, \sigma^2=d_k\)&lt;/span&gt;çš„åˆ†å¸ƒ,å› æ­¤éœ€è¦ç”¨&lt;span class=&quot;math inline&quot;&gt;\(\sqrt{d_k}\)&lt;/span&gt;åšæ­£åˆ™åŒ–ï¼Œä¿è¯å†…ç§¯ä¾æ—§æœä»&lt;span class=&quot;math inline&quot;&gt;\(\mu=0 \, \sigma=1\)&lt;/span&gt;çš„åˆ†å¸ƒã€‚&lt;/p&gt;
&lt;p&gt;\[Attentino(Q, K, V) = softmax(\frac{QK^T}{\sqrt{d_k}}) \cdot V \]&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;def scaled_dot_product_attention(key, value, query, mask):
    with tf.variable_scope('scaled_dot_product_attention', reuse=tf.AUTO_REUSE):
        # scalaed weight matrix : batch_size * query_len * key_len
        dk = tf.cast(key.shape.as_list()[-1], tf.float32)# emb_size
        weight = tf.matmul(query, key, transpose_b=True)/(dk**0.5)
        # apply mask: large negative will become 0 in softmax[mask=0 ignore]
        weight += (1-mask) * (-2**32+1)
        # normalize on axis key_len so that score add up to 1
        weight = tf.nn.softmax(weight, axis=-1)
        tf.summary.image(&quot;attention&quot;, tf.expand_dims(weight[:1], -1))  # add channel dim
        add_layer_summary('attention', weight)
        # weighted value: batch_size * query_len * emb_size
        weighted_value = tf.matmul(weight, value )

        return weighted_value
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;mask&quot;&gt;Mask&lt;/h3&gt;
&lt;p&gt;ä¸Šé¢ä»£ç ä¸­çš„maskæ˜¯åšä»€ä¹ˆçš„å‘¢ï¼Ÿmaskå†³å®šäº†Attentionå¯¹å“ªäº›ç‰¹å¾è®¡ç®—æƒé‡ï¼Œtransformerçš„maskæœ‰ä¸¤ç§ã€ä»¥ä¸‹mask=1æ˜¯ä¿ç•™çš„éƒ¨åˆ†ï¼Œ0æ˜¯dropçš„éƒ¨åˆ†ã€‘&lt;/p&gt;
&lt;p&gt;å…¶ä¸€æ˜¯padding mask, è®©attentionçš„æƒé‡åªé’ˆå¯¹çœŸå®æ–‡æœ¬è®¡ç®—å…¶ä½™ä¸º0ã€‚padding maskçš„dimensionæ˜¯[batch, 1, key_len], 1æ˜¯é¢„ç•™ç»™queryï¼Œä¼šåœ¨attentionä¸­è¢«broadcastæˆ[batch, query_len, key_len]&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;def seq_mask_gen(input_, params):
    mask = tf.sequence_mask(lengths=tf.to_int32(input_['seq_len']), maxlen=tf.shape(input_['tokens'])[1],
                            dtype=params['dtype'])
    mask = tf.expand_dims(mask, axis=1)
    return mask
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚æœè¾“å…¥æ–‡æœ¬é•¿åº¦åˆ†åˆ«ä¸º3ï¼Œ4ï¼Œ5ï¼Œéƒ½paddingåˆ°5ï¼Œpadding maskç»´åº¦æ˜¯[3,1,5] å¦‚ä¸‹&lt;/p&gt;
&lt;p align=&quot;center&quot;&gt;&lt;img src=&quot;https://static01.imgkr.com/temp/ce52325523614d5aa71964b607a3d61b.png&quot; width=&quot;300&quot; height=&quot;100&quot;/&gt;&lt;/p&gt;

&lt;p&gt;å…¶äºŒæ˜¯future maskåªç”¨äºdecoderï¼Œmaskæ¯ä¸ªtokenåé¢çš„åºåˆ—ï¼Œä¿è¯åœ¨é¢„æµ‹T+1çš„tokenæ—¶åªä¼šç”¨åˆ°TåŠTä»¥å‰çš„ä¿¡æ¯ï¼Œå¦‚æœä¸åŠ future maskï¼Œé¢„æµ‹T+1æ—¶å°±ä¼šç”¨åˆ°T+1çš„æ–‡æœ¬æœ¬èº«ï¼Œå‡ºç°feature leakageã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;def future_mask_gen(input_, params):
    seq_mask = seq_mask_gen(input_, params) # batch_size * 1 * key_len
    mask = tf.matmul(seq_mask, seq_mask, transpose_a=True) # batch_size * key_len * key_len
    mask = tf.matrix_band_part(mask, num_lower=-1, num_upper=0)
    return mask
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿˜æ˜¯ä¸Šé¢çš„ä¾‹å­ï¼Œfuture maskçš„ç»´åº¦æ˜¯[3,5,5] å¦‚ä¸‹&lt;/p&gt;
&lt;p align=&quot;center&quot;&gt;&lt;img src=&quot;https://static01.imgkr.com/temp/6f144fa2de274cd59a8a96f773fb1e4b.png&quot; width=&quot;300&quot; height=&quot;350&quot;/&gt;&lt;/p&gt;

&lt;h4 id=&quot;multi-head-attention&quot;&gt;multi-head attention&lt;/h4&gt;
&lt;p align=&quot;center&quot;&gt;&lt;img src=&quot;https://imgkr2.cn-bj.ufileos.com/f2184ff1-e8cd-4375-91d0-81d4df2bacfc.png?UCloudPublicKey=TOKEN_8d8b72be-579a-4e83-bfd0-5f6ce1546f13&amp;amp;Signature=U8TNYMsZN%252Ba9URQzIf8h6%252Bga2Z0%253D&amp;amp;Expires=1612792943&quot; width=&quot;250&quot; height=&quot;300&quot;/&gt;&lt;/p&gt;

&lt;p&gt;è¿™äº›å¹´å¯¹multi-headä¸ºå•¥æœ‰æ•ˆçš„è®¨è®ºæœ‰å¾ˆå¤šï¼Œä¸‹é¢Reference3~8éƒ½ä»ä¸åŒæ–¹é¢ç»™å‡ºäº†ä¸åŒçš„Insightã€‚æœ€å¼€å§‹çœ‹multi-headçš„è®¾è®¡ï¼Œç¬¬ä¸€ååº”æ˜¯ä½ è«ä¸æ˜¯åœ¨é€—æˆ‘ï¼Ÿï¼ä½ æŠŠğŸŠæ°æˆ8ç“£å†æ‹¼å›æ¥å‘Šè¯‰æˆ‘è¿™ä¸æ˜¯ä¸€ä¸ªğŸŠäº†ï¼Ÿï¼Ÿï¼Ÿç¿»è¿‡æ¥å€’è¿‡å»çš„ç¢ç£¨æ„Ÿè§‰è¿™ä¸ªè®¾è®¡å’ŒCNNçš„filtersä¼¼ä¹æœ‰äº›åŒä¸€ä¸ªé…æ–¹ï¼Œç†Ÿæ‚‰çš„å‘³é“ï½ä¹Ÿæ²¡å•¥ä¸¥è°¨çš„è¯æ˜ï¼Œè¦æ˜¯è·‘åäº†ä¹Ÿè¯·æŒ‡æ­£ï½&lt;/p&gt;
&lt;p&gt;å‡è®¾&lt;span class=&quot;math inline&quot;&gt;\(d_{model}=512\)&lt;/span&gt;, &lt;span class=&quot;math inline&quot;&gt;\(head=8\)&lt;/span&gt;, &lt;span class=&quot;math inline&quot;&gt;\(d_k=d_v=d_{model}/head=64\)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;multi-head attentionçš„è®¡ç®—è¿‡ç¨‹æ˜¯ï¼Œæ¯ä¸ªheadéƒ½è¿›è¡Œå¦‚ä¸‹æ“ä½œ&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;8ä¸ªheadçš„queryï¼Œkeyï¼Œvalueå„è‡ªè¿‡ä¸€å±‚çº¿æ€§æ˜ å°„ä»ç»´åº¦ä»512-&amp;gt;64ï¼Œæƒé‡çŸ©é˜µ&lt;span class=&quot;math inline&quot;&gt;\(W \in R^{512*64}\)&lt;/span&gt;ï¼Œè¿™é‡Œå’Œsingle-headæ‰€éœ€çš„parameteræ•°é‡ä¸€è‡´ï¼Œsingle-headæ˜¯ç›´æ¥åš512-&amp;gt;512çš„æ˜ å°„&lt;/li&gt;
&lt;li&gt;æ˜ å°„åçš„query, key, valueåšscaled-dot product attentionï¼Œå¾—åˆ°batch * input_len * 64çš„è¾“å‡º&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;\[head_i = Attention(QW_i^Q , K W_i^K , V W_i^V ) \]&lt;/p&gt;
&lt;p&gt;å†æŠŠ8ä¸ªheadè¿›è¡Œæ‹¼æ¥ï¼Œå¾—åˆ°å’Œè¾“å…¥ç›¸åŒç»´åº¦&lt;span class=&quot;math inline&quot;&gt;\(d_{model}\)&lt;/span&gt;çš„è¾“å‡ºï¼Œé’ˆå¯¹è¾“å‡ºå†åšä¸€æ­¥çº¿æ€§æ˜ å°„å°±é½æ´»äº†ã€‚&lt;/p&gt;
&lt;p&gt;\[MultiHead(Q, K, V ) = Concat(head_1, ..., head_h)\cdot W \]&lt;/p&gt;
&lt;p&gt;æ¸…æ¥šè®¡ç®—æ–¹å¼æˆ‘ä»¬æ¥çœ‹ä¸‹multi-headå’Œsingle-headçš„å·®å¼‚ã€‚Single-headæ¯ä¸ªtoken, ä¼šç”¨å…¨éƒ¨512ç»´çš„embeddingæ¥å’Œå…¶ä»–tokençš„embeddingè®¡ç®—ç›¸å…³æ€§ã€‚è¿™é‡Œå…¶å®æ˜¯å­˜åœ¨bottleneckçš„ï¼Œå› ä¸ºä¸è®º512ç»´çš„ä¿¡æ¯å¤šä¹ˆä¸°å¯Œï¼Œä¹Ÿåªèƒ½é€šè¿‡ä¸¤ä¸¤å†…ç§¯å½’ä¸€åŒ–åå¾—åˆ°scaleræ¥è¡¨è¾¾ï¼Œå¤šä¸°å¯Œçš„ä¿¡æ¯éƒ½ä¼šè¢«å¹³å‡ï¼Œè¿™ä¸€æ­¥æ˜¯å­˜åœ¨ä¿¡æ¯æŸå¤±çš„ã€‚æ—¢ç„¶å­˜åœ¨bottleneckï¼Œé‚£ä½•ä¸é™ä½&lt;span class=&quot;math inline&quot;&gt;\(d_{model}\)&lt;/span&gt;çš„ç»´åº¦ï¼Œå¢åŠ headå‘¢ã€‚multi-headç±»ä¼¼æŠŠ[5,512]çš„è¾“å…¥ï¼Œå…ˆreshapeæˆ[5,64,8]ï¼Œè¿™é‡Œ8ç±»ä¼¼CNNçš„channelï¼Œé€šè¿‡ç¬¬ä¸€æ­¥çš„çº¿æ€§æ˜ å°„æˆ‘ä»¬å¯èƒ½è®©æ¯ä¸ªheadï¼ˆchannelï¼‰çš„keyï¼Œqueryï¼Œvalueéƒ½åˆ†åˆ«å…³æ³¨ä¸åŒä¿¡æ¯ï¼Œå¯èƒ½æœ‰çš„æ˜¯è¯­æ³•ï¼Œè¯­ä¹‰ï¼Œè¯­åºç­‰ç­‰ï¼Œç„¶åç”¨é™ç»´åˆ°64ç»´çš„embeddingæ¥è®¡ç®—Attentionã€‚ä»è€Œåœ¨ä¸å¢åŠ parameterçš„æ¡ä»¶ä¸‹æå–æ›´å¤šçš„ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;def multi_head_attention(key, value, query, mask, params, mode):
    with tf.variable_scope('multi_head_attention', reuse=tf.AUTO_REUSE):
        d_model = value.shape.as_list()[-1] # emb_size
        # linear projection with dimension unchaangned
        new_key = tf.layers.dense(key, units=d_model, activation=None) # batch_size * key_len * emb_size
        new_value = tf.layers.dense(value, units=d_model, activation=None)
        new_query = tf.layers.dense(query, units=d_model, activation=None)

        # split d_model by num_head and compute attention in parallel
        # (batch_size * num_head) * key_len * (emb_size/num_head)
        new_key = tf.concat(tf.split(new_key, num_or_size_splits=params['num_head'], axis=-1), axis=0)
        new_value = tf.concat(tf.split(new_value, num_or_size_splits=params['num_head'], axis=-1), axis=0)
        new_query = tf.concat(tf.split(new_query, num_or_size_splits=params['num_head'], axis=-1), axis=0)

        # calculate dot-product attention
        weighted_val = scaled_dot_product_attention(new_key, new_value, new_query, tf.tile(mask, [params['num_head'], 1, 1]))

        # concat num_head back
        # (batch_size * num_head) * query_len * (emb_size/num_head) -&amp;gt; batch_size * query_len * emb_size
        weighted_val = tf.concat(tf.split(weighted_val, num_or_size_splits=params['num_head'], axis=0), axis=-1)

        # Linear projection
        weighted_val = tf.layers.dense(weighted_val, units=d_model, activation=None)
        # Do dropout
        weighted_val = tf.layers.dropout(weighted_val, rate=params['dropout_rate'],
                                         training=(mode == tf.estimator.ModeKeys.TRAIN))
        add_layer_summary('raw_multi_head', weighted_val)
        weighted_val = add_and_norm_layer(query, weighted_val)

    return weighted_val
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;positional-encoding&quot;&gt;positional encoding&lt;/h3&gt;
&lt;p&gt;æ¸…æ¥šäº†ä¸Šé¢çš„multi-headçš„attentionä¼šå‘ç°æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯attentionçš„è®¡ç®—å¹¶æ²¡æœ‰è€ƒè™‘åˆ°è¯çš„ç›¸å¯¹å’Œç»å¯¹ä½ç½®ï¼Œè¿™æ„å‘³ç€â€˜fox hunt rabbit at nightâ€™å’Œ'rabbit hunt fox at night'ä¼šæœ‰å®Œå…¨ä¸€æ ·çš„å‘é‡è¡¨è¾¾ã€‚Transformerçš„å¤„ç†æ˜¯åŠ å…¥äº†positional encodingï¼Œæ¨¡å‹çš„è¾“å…¥å˜ä¸ºword embedding + positional encodingï¼Œå› æ­¤è¦æ±‚positional encodingå’Œembeddingçš„ç»´åº¦ç›¸åŒéƒ½æ˜¯&lt;span class=&quot;math inline&quot;&gt;\(d_{model}\)&lt;/span&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸¾ä¸ªğŸŒ°(ä»¥ä¸‹å¥å­å»é™¤åœç”¨è¯ï¼‰&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å¥1: Dog sit on chair&lt;/li&gt;
&lt;li&gt;å¥2: Cat is sleeping on floor&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;è¦æƒ³å…¨é¢çš„è¡¨è¾¾ä½ç½®ä¿¡æ¯ï¼Œtransformeréœ€è¦æ»¡è¶³ä»¥ä¸‹4ä¸ªæ¡ä»¶&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;ç›¸å¯¹è·ç¦»: onå’Œchairï¼Œonå’Œfloor, sit å’Œon, sleepingå’Œonçš„ç›¸å¯¹è·ç¦»éƒ½æ˜¯1ï¼Œå®ƒä»¬ä¹‹é—´çš„ç›¸å¯¹è·ç¦»ç›¸åŒï¼Œä¸”å’Œç»å¯¹ä½ç½®ä»¥åŠå¥å­é•¿åº¦æ— å…³&lt;/li&gt;
&lt;li&gt;ç»å¯¹ä½ç½®ï¼šdogå’Œcatéƒ½æ˜¯å¥å­çš„ç¬¬ä¸€ä¸ªè¯ï¼Œå®ƒä»¬çš„ç»å¯¹ä½ç½®ç›¸åŒ, encodingéœ€è¦ä¸€è‡´&lt;/li&gt;
&lt;li&gt;å¥å­é•¿åº¦ï¼šencodingéœ€è¦èƒ½å¤Ÿgeneralizeåˆ°è®­ç»ƒæ ·æœ¬ä¸­unseençš„å¥å­é•¿åº¦&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;å¦‚æœæˆ‘ä»¬ç”¨[0,å¥å­é•¿åº¦]ï¼Œæ­¥é•¿ä¸º1ï¼Œä¸æ»¡è¶³æ¡ä»¶3ï¼Œå¦‚æœæµ‹è¯•é›†å‡ºç°æ›´é•¿çš„å¥å­ä¼šæ— æ³•å¤„ç†ã€‚å¦‚æœç”¨[0,1], æ­¥é•¿ä¸º1/å¥é•¿ï¼Œä¸æ»¡è¶³æ¡ä»¶2ï¼Œå› ä¸ºä¸åŒé•¿åº¦çš„å¥å­æ­¥é•¿ä»£è¡¨çš„ç›¸å¯¹è·ç¦»ä¸ä¸€è‡´ã€‚è®©æˆ‘ä»¬çœ‹çœ‹Transformeræ˜¯å¦‚ä½•åšencodingçš„&lt;/p&gt;
&lt;p&gt;\[PE(pos, i)= \begin{cases} sin(pos /w_k),&amp;amp; \text{if i=2k}\\ cos(pos /w_k),&amp;amp; \text{if i=2k+1} \end{cases} \]&lt;/p&gt;
&lt;p&gt;\[w_k = 10000^{2k/d_{model}} \]&lt;/p&gt;
&lt;p&gt;å› ä¸ºPEä¸æ˜¯trainableå˜é‡ï¼Œæ‰€ä»¥å¯ä»¥åœ¨æœ€å¼€å§‹ç®—å¥½ï¼Œç„¶åç”¨è¾“å…¥çš„positionå»lookupçš„ï¼Œå®ç°å¦‚ä¸‹&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;def positional_encoding(d_model, max_len, dtype):
    with tf.variable_scope('positional_encoding'):
        encoding_row = np.array([10000**((i-i%2)/d_model) for i in range(d_model)])
        encoding_matrix = np.array([i/encoding_row for i in range(max_len)])

        def sin_cos(row):
            row = [np.cos(val) if i%2 else np.sin(val) for i, val in enumerate(row)]
            return row

        encoding_matrix = np.apply_along_axis(sin_cos, 1, encoding_matrix)
        encoding_matrix = tf.cast(tf.constant(encoding_matrix), dtype)

    return encoding_matrix
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿˜æ˜¯ä¸Šé¢çš„å¥å­ï¼Œå‡è®¾&lt;span class=&quot;math inline&quot;&gt;\(d_{model}=4\)&lt;/span&gt;ï¼ŒDog sit on chairçš„&lt;span class=&quot;math inline&quot;&gt;\(PE\)&lt;/span&gt;å¦‚ä¸‹&lt;/p&gt;
&lt;p&gt;\[\begin{array}{c|c} d_{model} &amp;amp; \text{Dog} &amp;amp; \text{sit} &amp;amp; \text{on} &amp;amp; \text{chair} \\ \hline 0 &amp;amp; sin(\frac{0}{10000^{0/4}}) &amp;amp; sin(\frac{1}{10000^{0/4}}) &amp;amp; sin(\frac{2}{10000^{0/4}}) &amp;amp; sin(\frac{3}{10000^{0/4}}) \\ 1 &amp;amp; cos(\frac{0}{10000^{0/4}}) &amp;amp; cos(\frac{1}{10000^{0/4}}) &amp;amp; cos(\frac{2}{10000^{0/4}}) &amp;amp; cos(\frac{3}{10000^{0/4}}) \\ 2 &amp;amp; sin(\frac{0}{10000^{2/4}}) &amp;amp; sin(\frac{1}{10000^{2/4}}) &amp;amp; sin(\frac{2}{1000^{2/4}}) &amp;amp;sin(\frac{3}{1000^{2/4}}) \\ 3 &amp;amp; cos(\frac{0}{10000^{2/4}}) &amp;amp; cos(\frac{1}{10000^{2/4}}) &amp;amp; cos(\frac{2}{10000^{2/4}}) &amp;amp; cos(\frac{3}{10000^{2/4}}) \\ \end{array} \]&lt;/p&gt;
&lt;p&gt;æ¸…æ¥šè®¡ç®—æ–¹å¼åï¼Œä¸çŸ¥é“ä½ æ˜¯ä¸æ˜¯ä¹Ÿæœ‰å¦‚ä¸‹çš„å›°æƒ‘&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;è¿™sin/cosçš„è®¾è®¡æœ‰ä½•ç›®çš„ï¼Ÿè‚¯å®šä¸æ˜¯ä¸ºäº†å¥½çœ‹å˜›&lt;/li&gt;
&lt;li&gt;&lt;span class=&quot;math inline&quot;&gt;\(w_k\)&lt;/span&gt;çš„è®¡ç®—åˆæ˜¯ä¸ºäº†å•¥ï¼Ÿencodingä¸èƒ½æ˜¯ä¸ªscalerä¹ˆï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ç¬¬ä¸€ä¸ªå›°æƒ‘è¦çœ‹ä¸‹positional encodingçš„ä½¿ç”¨åœºæ™¯ã€‚ä¹‹å‰æåˆ°positional encodingæ˜¯ç›´æ¥åŠ åœ¨word embeddingä¸Šä½œä¸ºè¾“å‡ºï¼Œä¹‹åä¼šåœ¨è®¡ç®—attentionçš„è¿‡ç¨‹ä¸­åœ¨ä¸¤ä¸¤å‘é‡å†…ç§¯æ—¶è¢«ä½¿ç”¨ï¼Œå¯èƒ½ä¼šè¡¨è¾¾ç±»ä¼¼ç›¸å¯¹è·ç¦»è¶Šè¿‘attentionæƒé‡è¶Šé«˜ä¹‹ç±»çš„ä¿¡æ¯ã€‚å› æ­¤è¿™é‡Œè¡¨è¾¾ä½ç½®å’Œè·ç¦»æ˜¯ä¾èµ–encodingåšå‘é‡ä¹˜æ³•ï¼Œè€Œä½¿ç”¨sin/cosçš„å¥½å¤„åœ¨äºä½ç§»å’Œç»å¯¹ä½ç½®æ— å…³ï¼Œä¹Ÿå°±æ˜¯&lt;span class=&quot;math inline&quot;&gt;\(PE(pos+\Delta)=f(\Delta) * PE(pos)\)&lt;/span&gt;ï¼Œè¯¦ç»†æ¨å¯¼çœ‹è¿™é‡Œ&lt;a href=&quot;https://timodenk.com/blog/linear-relationships-in-the-transformers-positional-encoding/&quot; target=&quot;_blank&quot;&gt;Timo Denk's Blog&lt;/a&gt;, ä»¥&lt;span class=&quot;math inline&quot;&gt;\(d_{model}=2\)&lt;/span&gt;ä¸ºä¾‹ï¼Œçº¿æ€§å˜æ¢å¦‚ä¸‹&lt;/p&gt;
&lt;p&gt;\[\begin{bmatrix} sin(w_k, pos+\Delta) \\ cos(w_k, pos+\Delta)\\ \end{bmatrix}= \begin{bmatrix} cos(w_k,\Delta) &amp;amp; sin(w_k,\Delta) \\ -sin(w_k,\Delta) &amp;amp; cos(w_k,\Delta) \\ \end{bmatrix} \cdot \begin{bmatrix} sin(w_k, pos) \\ cos(w_k, pos)\\ \end{bmatrix} \]&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒä¸ªå›°æƒ‘ä¹Ÿå°±æ˜¯&lt;span class=&quot;math inline&quot;&gt;\(w_k\)&lt;/span&gt;åœ¨embeddingç»´åº¦çš„è®¡ç®—ã€‚æœ‰äººè¯´æ˜¯ä¸ºäº†å’Œembeddingåšå‘é‡åŠ æ³•ï¼Œä½†ä¸Šé¢çš„çº¿æ€§å˜æ¢åªè¦æœ‰ä¸€ä¸ª[sin,cos]å¯¹å°±èƒ½åšåˆ°ï¼Œé‚£æˆ‘æŠŠ&lt;span class=&quot;math inline&quot;&gt;\(R^2\)&lt;/span&gt; broadcaståˆ°&lt;span class=&quot;math inline&quot;&gt;\(R^{d_{model}}\)&lt;/span&gt;ä¸æˆä¹ˆï¼Œ æ¯•ç«ŸPEåªæ˜¯ä¸ªå¸¸é‡å¹¶ä¸trinableã€‚è¿™é‡Œ&lt;span class=&quot;math inline&quot;&gt;\(w_k\)&lt;/span&gt;çš„è®¡ç®—æ˜¯éšç€kçš„ä¸Šå‡é™ä½äº†sin/cosçš„&lt;a href=&quot;https://mathbitsnotebook.com/Algebra2/TrigGraphs/TGTrigVocab.html#:~:text=The%20frequency%20of%20a%20trigonometric,the%20sine%20and%20cosine%20curves.&amp;amp;text=This%20sine%20curve,%20y%20=%20sin%20x,%20completes%201%20cycle,in%20the%20interval%20of%202%CF%80.&quot; target=&quot;_blank&quot;&gt;Frequency&lt;/a&gt;, PEåœ¨ä¸åŒposéšiçš„å˜åŒ–å¦‚ä¸‹å›¾&lt;/p&gt;
&lt;p align=&quot;center&quot;&gt;&lt;img src=&quot;https://imgkr2.cn-bj.ufileos.com/bbbe1f25-0800-4ad0-b557-d4ce938e8cb5.png?UCloudPublicKey=TOKEN_8d8b72be-579a-4e83-bfd0-5f6ce1546f13&amp;amp;Signature=VvDKdLVBQzmCD88gFSXvffYqwtY%253D&amp;amp;Expires=1612750306&quot; width=&quot;550&quot; height=&quot;350&quot;/&gt;&lt;/p&gt;

&lt;p&gt;çœ‹ä¸ªæç«¯caseå½“&lt;span class=&quot;math inline&quot;&gt;\(2k \to d_{model}\)&lt;/span&gt;ï¼ŒPEä¼šè¿‘ä¼¼constantï¼Œå…¶ä¸­&lt;span class=&quot;math inline&quot;&gt;\(sin(pos/k) \to 0\)&lt;/span&gt;, &lt;span class=&quot;math inline&quot;&gt;\(cos(pos/k) \to 1\)&lt;/span&gt;ï¼Œå’Œembeddingç»“åˆæ¥çœ‹ï¼Œéƒ¨åˆ†è¯­ä¹‰ä¿¡æ¯çš„æå–æ›´å¤šä¾èµ–ä½ç½®ä¿¡æ¯ï¼Œè‡ªç„¶ä¹Ÿå­˜å’Œä½ç½®ä¿¡æ¯ä¾èµ–è¾ƒå°‘æˆ–è€…æ— å…³çš„ä¿¡æ¯ï¼Œåœ¨embeddingçº¬åº¦ä¸Šåšå·®å¼‚åŒ–çš„ä½ç½®ä¿¡æ¯è¡¨è¾¾ï¼Œå¯ä»¥å¸®åŠ©æ¨¡å‹å­¦åˆ°è¿™ä¸€ç‚¹ï½&lt;/p&gt;
&lt;h3 id=&quot;add--norm&quot;&gt;Add &amp;amp; Norm&lt;/h3&gt;
&lt;p&gt;Transformer æ¯ä¸ªBlockä¹‹åéƒ½ä¼šéƒ½è·Ÿä¸€å±‚Add &amp;amp; Norm,ä¹Ÿå°±æ˜¯å…ˆåšresiduaå†åšLayer Normã€‚å¦‚æœAdd &amp;amp; Normæ˜¯è·Ÿåœ¨multi-head Attentionä¹‹åï¼Œè¿™ä¸€å±‚çš„è®¡ç®—ä¾¿æ˜¯ Layer_norm(x + multi-head(x))ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;def layer_norm(x):
    with tf.variable_scope('layer_normalization', reuse=tf.AUTO_REUSE):
        d_model = x.shape.as_list()[-1]
        epsilon = tf.constant(np.finfo(np.float32).eps)
        mean, variance = tf.nn.moments(x, axes=-1, keep_dims=True)
        x = (x - mean)/((variance + epsilon)**0.5) # do layer norm

        kernel = tf.get_variable('norm_kernel', shape=(d_model,), initializer=tf.ones_initializer())
        bias = tf.get_variable('norm_bias', shape=(d_model,),initializer=tf.zeros_initializer())
        x= tf.multiply(kernel, x) +bias
    return x
    
def add_and_norm_layer(x, sub_layer_x):
    with tf.variable_scope('add_and_norm'):
        x = tf.add(x, sub_layer_x)
        x = layer_norm(x)
    return x
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;residual-connection&quot;&gt;Residual Connection&lt;/h4&gt;
&lt;p&gt;å¯¹äºResidual Connectionï¼Œè¿˜æ˜¯æ¨èä¹‹å‰åœ¨CTR DeepCrossingé‡Œæ¨èè¿‡çš„ä¸€ç¯‡æ–‡ç« &lt;a href=&quot;https://zhuanlan.zhihu.com/p/80226180&quot; target=&quot;_blank&quot;&gt;æ®‹å·®ç½‘ç»œè§£å†³äº†ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆæœ‰æ•ˆï¼Ÿ&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç®€å•æ¥è¯´æ˜¯ä¸ºäº†è§£å†³ç½‘ç»œé€€åŒ–çš„é—®é¢˜ï¼Œæ—¢éšç€ç½‘ç»œæ·±åº¦å¢åŠ ï¼Œç½‘ç»œçš„è¡¨ç°å…ˆæ˜¯é€æ¸å¢åŠ æ¥è¿‘é¥±å’Œï¼Œç„¶åè¿…é€Ÿä¸‹é™ã€‚è¿™é‡Œçš„ä¸‹é™å¹¶éæŒ‡å‚æ•°å¢åŠ å¯¼è‡´çš„è¿‡æ‹Ÿåˆï¼Œè€Œæ˜¯ç†è®ºä¸Šå¦‚æœ10å±‚ä¾¿æ˜¯æœ€ä¼˜è§£ï¼Œè€Œä½ çš„ç½‘ç»œæœ‰20å±‚ï¼Œè™½ç„¶20å±‚åŒ…å«äº†10å±‚çš„ä¿¡æ¯ï¼Œç†è®ºä¸Šå10å±‚åªè¦åšæ’ç­‰å˜åŒ–æŠŠç¬¬10å±‚çš„ç»“æœä¼ é€’å‡ºå»å°±è¡Œï¼Œä½†ç»“æœå´å˜å¾—å¾ˆå·®ï¼ŒåŸå› æ›´å¤šæ€€ç–‘æ˜¯ç¥ç»ç½‘ç»œè¾ƒéš¾å­¦ä¹ è¿™ç§æ’ç­‰å˜å¹»ã€‚&lt;/p&gt;
&lt;p&gt;æ”¾åœ¨Transformeré‡Œé™¤äº†ä»¥ä¸Šçš„ä½œç”¨ï¼Œä¹Ÿæœ‰ä¼ é€’åº•å±‚è¯å‘é‡å’Œpositional encodingä¿¡æ¯çš„ä½œç”¨ï¼Œæˆ‘ä»¬æ—¢å¸Œæœ›é€šè¿‡ä¸²è”çš„Attentionæ¥ä¸æ–­æŠ½å–æ›´æŠ½è±¡åº•å±‚çš„ä¿¡æ¯ï¼Œä½†ä¹ŸåŒæ—¶å¸Œæœ›å‘å‰ä¼ é€’Bag of wordsä¿¡æ¯ä»¥åŠpositional encodingæºå¸¦çš„ç›¸å¯¹/ç»å¯¹ä½ç½®ä¿¡æ¯ã€‚Anywayæ®‹å·®ç»“æ„éƒ½å¸¦ç€æ›´å¤špratical scienceçš„ç»éªŒä¸»ä¹‰ï¼Œå¦‚æœæœ‰å…¶ä»–çš„è§‚ç‚¹æ¬¢è¿ä¸€èµ·è®¨è®ºå“Ÿï½&lt;/p&gt;
&lt;h4 id=&quot;layer-normalization&quot;&gt;Layer Normalization&lt;/h4&gt;
&lt;p&gt;LayerNormä¹Ÿæ¨èä¸€ç¯‡æ–‡ç« &lt;a href=&quot;https://zhuanlan.zhihu.com/p/33173246&quot; target=&quot;_blank&quot;&gt;è¯¦è§£æ·±åº¦å­¦ä¹ ä¸­çš„Normalizationï¼ŒBN/LN/WN&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;LayerNormæ²¡æœ‰BatchNormé‚£ä¹ˆå¸¸ç”¨ã€‚Batch Normçš„å‡è®¾æ˜¯æ‰€æœ‰æ ·æœ¬çš„åŒä¸€ä¸ªç‰¹å¾ï¼ˆç¥ç»å…ƒï¼‰æœä»ç›¸åŒçš„åˆ†å¸ƒï¼Œå› æ­¤ç”¨é‡‡æ ·çš„æ ·æœ¬ï¼ˆmini-batchï¼‰æ¥ä¼°è®¡æ€»ä½“åœ¨æŸä¸ªç‰¹å¾ä¸Šçš„å‡å€¼å’Œæ–¹å·®æ¥åšå½’ä¸€åŒ–ã€‚ä½†BatchNormå¯¹äºsequenceè¾“å…¥å¹¶ä¸é€‚ç”¨ï¼Œå› ä¸ºä¸åŒè¾“å…¥çš„åºåˆ—é•¿åº¦åŒä¸€ä¸ªç‰¹å¾æœ‰çš„æ ·æœ¬æœ‰æœ‰çš„æ²¡æœ‰ï¼Œè‡ªç„¶ä¸æ»¡è¶³åŒåˆ†å¸ƒçš„å‡è®¾ã€‚è€ŒLayerNormçš„å‡è®¾æ˜¯æ¯ä¸ªæ ·æœ¬çš„æŸä¸€å±‚layeræ˜¯åŒåˆ†å¸ƒçš„ï¼Œå› æ­¤æ˜¯æ¯ä¸ªæ ·æœ¬è‡ªèº«è®¡ç®—statæ¥åšå½’ä¸€åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;ç¥ç»å…ƒæœ‰ç‚¹æŠ½è±¡ï¼Œè®©æˆ‘ä»¬ç”¨ä¼ ç»ŸMLæ¥ä¸¾ä¸ªğŸŒ°ï½ ä¸€ä¸ªé¢„æµ‹å€ºåˆ¸ä»·æ ¼çš„æ¨¡å‹æœ‰2ä¸ªç‰¹å¾ï¼šå†å²ä»·æ ¼å’Œåšå¸‚å•†æŠ¥ä»·ã€‚å¤šæ•°æƒ…å†µä¸‹çš„å½’ä¸€åŒ–éƒ½æ˜¯æŒ‰åˆ—è¿›è¡Œï¼Œæ‰€æœ‰æ ·æœ¬çš„å†å²ä»·æ ¼ï¼Œåšå¸‚å•†æŠ¥ä»·è¿›è¡Œå½’ä¸€åŒ–ï¼Œå¯¹åº”batch=å…¨æ ·æœ¬çš„BatchNormã€‚è€ŒLayerNormå¯¹åº”æ¯ä¸ªæ ·æœ¬çš„å†å²ä»·æ ¼ï¼Œåšå¸‚å•†æŠ¥ä»·è‡ªå·±è¿›è¡Œå½’ä¸€åŒ–ï¼Œå¤šæ•°æƒ…å†µä¸‹å› ä¸ºä¸åŒç‰¹å¾çš„é‡çº²ä¸åŒå¾ˆå°‘åšè¡Œæ­£åˆ™ã€‚ä½†å¦‚æœä¸åŒå€ºåˆ¸çš„ç±»å‹ä¸åŒï¼Œå¤šæ•°åœ¨100å°‘æ•°åœ¨30ï¼Œè€Œæ‰€æœ‰ç‰¹å¾éƒ½æ˜¯ä¸åŒæ¥æºçš„æŠ¥ä»·ï¼Œè¿™æ—¶å¯¹è¡Œåšæ­£åˆ™å¯èƒ½æ•ˆæœæ›´å¥½ï¼Œå› ä¸ºç‰¹å¾é—´åˆ†å¸ƒæ¯”æ ·æœ¬é—´ä¸€è‡´æ€§æ›´é«˜ã€‚&lt;/p&gt;
&lt;p&gt;å›åˆ°transformerï¼Œè¿™é‡Œçš„layer Normæ˜¯embeddingçš„ç»´åº¦ä¸Šè¿›è¡Œæ­£åˆ™åŒ–ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªæ ·æœ¬æ¯ä¸ªtokençš„embeddingè‡ªèº«åšå½’ä¸€åŒ–ã€‚&lt;/p&gt;
&lt;h3 id=&quot;feed-forward-layer&quot;&gt;Feed Forward Layer&lt;/h3&gt;
&lt;p&gt;æ¯ä¸ªMulti-headçš„Attentionä¹‹åéƒ½ä¼šè·Ÿä¸€ä¸ªFeed Forward Blokï¼Œ æ˜¯ä¸€ä¸ªä¸¤å±‚çš„å…¨è”æ¥ç¥ç»ç½‘ç»œ, ä¸­é—´å±‚æ˜¯reluï¼Œæ—¢å¸®åŠ©Attentionçš„è¾“å‡ºæå–æ›´æŠ½è±¡çš„ä¿¡æ¯ï¼Œä¹Ÿé€šè¿‡reluè¿‡æ»¤æ— æ•ˆä¿¡æ¯ä¿ç•™æ›´é‡è¦çš„éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;\[FFN(h_i) = Relu(h_iw_1 + b_1)w_2 + b_2 \]&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;def ffn(x, params, mode):
    with tf.variable_scope('ffn', reuse=tf.AUTO_REUSE):
        d_model = x.shape.as_list()[-1]  # emb_size
        y = tf.layers.dense(x, units=params['ffn_hidden'], activation='relu')

        y = tf.layers.dense(y, units=d_model, activation=None)
        y = tf.layers.dropout(y, rate=params['dropout_rate'],
                              training=(mode == tf.estimator.ModeKeys.TRAIN))

        y = add_and_norm_layer(x, y)
    return y

&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;æ¨¡å‹å®ç°&quot;&gt;æ¨¡å‹å®ç°&lt;/h2&gt;
&lt;p&gt;æ„‰å¿«çš„æ‹¼ä¹é«˜æ—¶é—´åˆ°ï¼Œæˆ‘ä»¬æ¥æŒ‰ç…§ä»¥ä¸‹çš„æ¨¡å‹å›¾æ¥ç»„åˆä¸Šé¢çš„ç»„ä»¶ï¼Œåˆ†æˆencodingå’Œdecodingä¸¤ä¸ªéƒ¨åˆ†ã€‚æˆ‘é€‰äº†ä¸ªè‹±æ–‡-&amp;gt;ä¸­æ–‡çš„ç¿»è¯‘ä»»åŠ¡æ¥å®ç°transformerï¼Œå®Œæ•´ä»£ç è¯¦è§&lt;a href=&quot;https://github.com/DSXiangLi/Embedding/tree/master/transformer&quot; target=&quot;_blank&quot;&gt;DSXiangLi-Embedding-transformer&lt;/a&gt;&lt;/p&gt;
&lt;p align=&quot;center&quot;&gt;&lt;img src=&quot;https://imgkr2.cn-bj.ufileos.com/8e570333-d2b5-41d0-bac5-da95c9e5e9e0.png?UCloudPublicKey=TOKEN_8d8b72be-579a-4e83-bfd0-5f6ce1546f13&amp;amp;Signature=vS2SCW21vuSTYcHu6hvt5hlv4pA%253D&amp;amp;Expires=1612793005&quot; width=&quot;300&quot; height=&quot;450&quot;/&gt;&lt;/p&gt;

&lt;h3 id=&quot;encoder&quot;&gt;Encoder&lt;/h3&gt;
&lt;p&gt;Encodingçš„è¾“å…¥æ˜¯paddingçš„sequenceå…ˆåšè¯å‘é‡æ˜ å°„å¾—åˆ° batch * pad_len * emb_sizeçš„è¯å‘é‡çŸ©é˜µ, å†åŠ ä¸Šç›¸åŒç»´åº¦çš„positional encodingå‘é‡ã€‚è®¡ç®—éƒ¨åˆ†æ¯”è¾ƒç®€å•æ˜¯ç”±6ä¸ªself-attention layerä¸²è”æ„æˆã€‚&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªself-attention layeréƒ½åŒ…æ‹¬, multi-head attentionï¼Œencoder sourceè‡ªèº«æ—¢æ˜¯queryä¹Ÿæ˜¯keyå’Œvalueï¼Œè¿‡Add&amp;amp;Normå±‚åŒæ—¶ä¿ç•™å˜æ¢å‰å’Œå˜æ¢åçš„ä¿¡æ¯ï¼Œå†è¿‡Feed Forwardå±‚åšæ›´å¤šçš„ä¿¡æ¯æå–ï¼Œå†è¿‡Add&amp;amp;Normã€‚è¿™å…¶ä¸­éœ€è¦æ³¨æ„çš„ä¾¿æ˜¯æ‰€æœ‰æ“ä½œçš„dimensionéƒ½æ˜¯&lt;span class=&quot;math inline&quot;&gt;\(d_{model}\)&lt;/span&gt;ï¼Œå› æ­¤è¾“å…¥çº¬åº¦ä¸ä¼šè¢«æ”¹å˜ä¸€ç›´ä¿æŒåˆ°Encoderè¾“å‡ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;def encode(self, features, mode):
    with tf.variable_scope('encoding', reuse=tf.AUTO_REUSE):
        encoder_input = self.embedding_func(features['tokens'], mode) # batch * seq_len * emb_size
        self_mask = seq_mask_gen(features, self.params)

        for i in range(self.params['encode_attention_layers']):
            with tf.variable_scope('self_attention_layer_{}'.format(i), reuse=tf.AUTO_REUSE):
                encoder_input = multi_head_attention(key=encoder_input, query=encoder_input, value=encoder_input,
                                                     mask=self_mask, params=self.params, mode=mode)

                encoder_input = ffn(encoder_input, self.params, mode)

    return ENCODER_OUTPUT(output=encoder_input, state=encoder_input[:, -1, :])
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;decoder&quot;&gt;Decoder&lt;/h3&gt;
&lt;p&gt;Decoderå’Œencoderä¸€æ ·ä¹Ÿæ˜¯6ä¸ªlayerä¸²è”ã€‚å’ŒEncoderç›¸æ¯”åªæ˜¯åœ¨self-attentionå’ŒFFNä¹‹é—´å¤šäº†ä¸€å±‚encoder-decoder attentionï¼Œè¿™æ—¶keyå’Œvalueæ˜¯encoderçš„è¾“å‡ºï¼Œqueryæ˜¯decoderåœ¨self-attentionä¹‹åçš„è¾“å‡ºï¼Œå­¦ä¹ çš„æ˜¯encoderå’Œdecoderé—´çš„å…³è”ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;Decodingéƒ¨åˆ†ç•¥å¤æ‚äº›åœ¨äºè®­ç»ƒå’Œé¢„æµ‹å­˜åœ¨å·®å¼‚ï¼ŒåŸå› æ˜¯è®­ç»ƒä¼šä½¿ç”¨teacher forcingç”¨Tä»¥å‰çš„çœŸå®tokené¢„æµ‹T+1ã€‚è€Œé¢„æµ‹æ—¶çœŸå®tokenæœªçŸ¥ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨loopå…ˆé¢„æµ‹T=1ï¼Œæ‹¿é¢„æµ‹[0,1]å»é¢„æµ‹T=2ï¼Œå†ä¸æ–­æ»šåŠ¨å‘å‰é¢„æµ‹&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯è®­ç»ƒæ—¶ä½¿ç”¨Teacher Forcingçš„Demo,decoderçš„è¾“å…¥æ–‡æœ¬åœ¨sourceå’Œtargetè¦åšä¸åŒçš„å¤„ç†, sourceç¬¬ä¸€ä¸ªtokenåŠ å…¥&lt;span class=&quot;math inline&quot;&gt;\(\lt go\gt\)&lt;/span&gt;æ ‡è®°æ–‡æœ¬å¼€å§‹ï¼Œå¦‚ä¸‹&lt;/p&gt;
&lt;p align=&quot;center&quot;&gt;&lt;img src=&quot;https://static01.imgkr.com/temp/581eb15bc4ef486dbdd11acd501b7557.png&quot; width=&quot;600&quot; height=&quot;100&quot;/&gt;&lt;/p&gt;

&lt;p&gt;è¿™æ ·é¢„æµ‹æ—¶é»˜è®¤ä»&lt;span class=&quot;math inline&quot;&gt;\(\lt go\gt\)&lt;/span&gt;å¼€å§‹ï¼ŒåŒæ—¶å½¢æˆé”™ä½ç”¨source&amp;lt;=Tçš„tokené¢„æµ‹T+1çš„tokenï¼Œåˆšå¥½å¯¹é½targetçš„ç¬¬Tä¸ªtokenï¼Œæ¨¡å‹é¢„æµ‹å¦‚ä¸‹&lt;/p&gt;
&lt;p align=&quot;center&quot;&gt;&lt;img src=&quot;https://imgkr2.cn-bj.ufileos.com/1dbf2fe6-ca3c-4d09-8a07-094d2bfc3751.png?UCloudPublicKey=TOKEN_8d8b72be-579a-4e83-bfd0-5f6ce1546f13&amp;amp;Signature=rYFWnSyzTlO%252Bkdji65Q0M1sj2Zw%253D&amp;amp;Expires=1612793738&quot; width=&quot;600&quot; height=&quot;100&quot;/&gt;&lt;/p&gt;

&lt;p&gt;ä»¥ä¸‹æ˜¯è®­ç»ƒéƒ¨åˆ†çš„Decoder&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;def _decode_helper(self, encoder_output, features, labels, mode):
    decoder_input = self.embedding_func(labels['tokens'], mode)  # batch * seq_len * emb

    self_mask = future_mask_gen(labels, self.params)
    encoder_mask = seq_mask_gen(features, self.params)

    for i in range(self.params['decode_attention_layers']):
        with tf.variable_scope('attention_layer_{}'.format(i), reuse=tf.AUTO_REUSE):
            with tf.variable_scope('self_attention', reuse=tf.AUTO_REUSE):
                decoder_input = multi_head_attention(key=decoder_input, value=decoder_input,
                                                     query=decoder_input, mask=self_mask,
                                                     params=self.params, mode=mode)
            with tf.variable_scope('encode_attention', reuse=tf.AUTO_REUSE):
                decoder_input = multi_head_attention(key=encoder_output.output, value=encoder_output.output,
                                                     query=decoder_input, mask=encoder_mask,
                                                     params=self.params, mode=mode)

            decoder_input = ffn(decoder_input, self.params, mode)

    # use share embedding weight for linear project from emb_size to vocab_size
    logits = tf.matmul(decoder_input, self.embedding, transpose_b=True)  # seq_len * emb_size-&amp;gt;seq_len * target_vocab_size

    return DECODER_OUTPUT(output=logits, state=decoder_input, seq_len=labels['seq_len'])
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;æ¨¡å‹è®­ç»ƒ&quot;&gt;æ¨¡å‹è®­ç»ƒ&lt;/h3&gt;
&lt;p&gt;è®ºæ–‡ä¸­è¿˜æœ‰ä¸å°‘çš„è®­ç»ƒç»†èŠ‚ï¼Œä¾‹å¦‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æ¯ä¸ªlayerä¹‹åéƒ½è·Ÿäº†drop out&lt;/li&gt;
&lt;li&gt;learning rateé€‰å–äº†å…ˆä¸Šå‡å†ä¸‹é™çš„noam scheme&lt;/li&gt;
&lt;li&gt;æ ·æœ¬æŒ‰å¥å­é•¿åº¦æ’åº&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªbatchä¿è¯æœ‰è¿‘ä¼¼çš„å•è¯æ•°ï¼Œè€Œéç›¸åŒçš„å¥å­æ•°&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä»¥åŠåœ¨è®­ç»ƒä¸­å‘ç°batch_sizeå¤ªå°æ¨¡å‹å®Œå…¨ä¸æ”¶æ•›ç­‰ç­‰ã€‚è€ƒè™‘è¿™äº›ç»†èŠ‚æ¯”è¾ƒtask-specific(æœ‰ç‚¹ç„å­¦ï¼‰ï¼Œæ„Ÿå…´è¶£çš„ç›†å‹ä»¬å¯ä»¥å»çœ‹ä¸‹Martin Popelçš„Training Tips for the Transformer Modelï¼Œé‡Œé¢æœ‰æ›´å¤šçš„ç»†èŠ‚ã€‚åé¢æˆ‘ä»¬æ›´å¤šåªç”¨åˆ°transformerçš„encoderéƒ¨åˆ†æ¥æå–æ–‡æœ¬ä¿¡æ¯ï¼Œè¿™é‡Œå°±ä¸å¤šè¯´å•¦ï½&lt;/p&gt;
&lt;hr/&gt;&lt;h3 id=&quot;reference&quot;&gt;Reference&lt;/h3&gt;
&lt;ol&gt;&lt;li&gt;Attention is all you need,&lt;/li&gt;
&lt;li&gt;On Layer Normalization in the Transformer Architecture, 2020&lt;/li&gt;
&lt;li&gt;Analyzing Multi-Head Self-Attention:&lt;br/&gt;Specialized Heads Do the Heavy Lifting, the Rest Can Be Pruned, 2019&lt;/li&gt;
&lt;li&gt;Multi-Head Attention: Collaborate Instead of Concatenate, 2020&lt;/li&gt;
&lt;li&gt;What Does BERT Look At? An Analysis of BERTâ€™s Attention, 2019&lt;/li&gt;
&lt;li&gt;ON THE RELATIONSHIP BETWEEN SELF-ATTENTION AND CONVOLUTIONAL LAYERS,2020&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/lena-voita/the-story-of-heads&quot; target=&quot;_blank&quot;&gt;https://github.com/lena-voita/the-story-of-heads&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://jbcordonnier.com/posts/attention-cnn/&quot; target=&quot;_blank&quot;&gt;http://jbcordonnier.com/posts/attention-cnn/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://towardsdatascience.com/deconstructing-bert-part-2-visualizing-the-inner-workings-of-attention-60a16d86b5c1&quot; target=&quot;_blank&quot;&gt;https://towardsdatascience.com/deconstructing-bert-part-2-visualizing-the-inner-workings-of-attention-60a16d86b5c1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://jalammar.github.io/illustrated-transformer/&quot; target=&quot;_blank&quot;&gt;http://jalammar.github.io/illustrated-transformer/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/33173246&quot; target=&quot;_blank&quot;&gt;è¯¦è§£æ·±åº¦å­¦ä¹ ä¸­çš„Normalizationï¼ŒBN/LN/WN&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/84614490&quot; target=&quot;_blank&quot;&gt;Transformerä¸­warm-upå’ŒLayerNormçš„é‡è¦æ€§æ¢ç©¶&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.zhihu.com/question/341222779/answer/814111138&quot; target=&quot;_blank&quot;&gt;https://www.zhihu.com/question/341222779/answer/814111138&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/Kyubyong/transformer&quot; target=&quot;_blank&quot;&gt;https://github.com/Kyubyong/transformer&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</description>
<pubDate>Mon, 08 Feb 2021 00:15:00 +0000</pubDate>
<dc:creator>é£é›¨ä¸­çš„å°ä¸ƒ</dc:creator>
<og:description>ä¸Šä¸€ç« æˆ‘ä»¬èŠäº†èŠquick-thoughté€šè¿‡å¹²æ‰decoderåŠ å¿«è®­ç»ƒ, CNNâ€”LSTMç”¨CNNä½œä¸ºEncoderå¹¶è¡Œè®¡ç®—æ¥æé€Ÿç­‰æ–¹æ³•ï¼Œè¿™ä¸€ç« çœ‹çœ‹æŠ›å¼€CNNå’ŒRNNï¼Œtransformeræ˜¯å¦‚ä½•åª</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/gogoSandy/p/14386998.html</dc:identifier>
</item>
<item>
<title>ä¸ºä½•ç°åœ¨å“åº”å¼ç¼–ç¨‹åœ¨ä¸šåŠ¡å¼€å‘å¾®æœåŠ¡å¼€å‘ä¸æ™®åŠ - å¹²è´§æ»¡æ»¡å¼ å“ˆå¸Œ</title>
<link>http://www.cnblogs.com/zhxdick/p/14387449.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/zhxdick/p/14387449.html</guid>
<description>&lt;p&gt;ä¸ºä½•ç°åœ¨å“åº”å¼ç¼–ç¨‹åœ¨ä¸šåŠ¡å¼€å‘å¾®æœåŠ¡å¼€å‘ä¸æ™®åŠ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸»è¦å› ä¸ºæ•°æ®åº“ IOï¼Œä¸æ˜¯ NIOã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸è®ºæ˜¯Javaè‡ªå¸¦çš„Futureæ¡†æ¶ï¼Œè¿˜æ˜¯ Spring WebFluxï¼Œè¿˜æ˜¯ Vert.xï¼Œä»–ä»¬éƒ½æ˜¯ä¸€ç§éé˜»å¡çš„åŸºäºRactoræ¨¡å‹çš„æ¡†æ¶ï¼ˆåä¸¤ä¸ªæ¡†æ¶éƒ½æ˜¯åˆ©ç”¨nettyå®ç°ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨é˜»å¡ç¼–ç¨‹æ¨¡å¼é‡Œï¼Œä»»ä½•ä¸€ä¸ªè¯·æ±‚ï¼Œéƒ½éœ€è¦ä¸€ä¸ªçº¿ç¨‹å»å¤„ç†ï¼Œå¦‚æœioé˜»å¡äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹ä¹Ÿä¼šé˜»å¡åœ¨é‚£ã€‚ä½†æ˜¯åœ¨éé˜»å¡ç¼–ç¨‹é‡Œé¢ï¼ŒåŸºäºå“åº”å¼çš„ç¼–ç¨‹ï¼Œçº¿ç¨‹ä¸ä¼šè¢«é˜»å¡ï¼Œè¿˜å¯ä»¥å¤„ç†å…¶ä»–è¯·æ±‚ã€‚ä¸¾ä¸€ä¸ªç®€å•ä¾‹å­ï¼šå‡è®¾åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œè¯·æ±‚æ¥çš„æ—¶å€™ï¼Œçº¿ç¨‹æ± å¤„ç†ï¼Œéœ€è¦è¯»å–æ•°æ®åº“ IOï¼Œè¿™ä¸ª IO æ˜¯ NIO éé˜»å¡ IOï¼Œé‚£ä¹ˆå°±å°†è¯·æ±‚æ•°æ®å†™å…¥æ•°æ®åº“è¿æ¥ï¼Œç›´æ¥è¿”å›ã€‚ä¹‹åæ•°æ®åº“è¿”å›æ•°æ®ï¼Œè¿™ä¸ªé“¾æ¥çš„ Selector ä¼šæœ‰ Read äº‹ä»¶å‡†å¤‡å°±ç»ªï¼Œè¿™æ—¶å€™ï¼Œå†é€šè¿‡è¿™ä¸ªçº¿ç¨‹æ± å»è¯»å–æ•°æ®å¤„ç†ï¼ˆç›¸å½“äºå›è°ƒï¼‰ï¼Œè¿™æ—¶å€™ç”¨çš„çº¿ç¨‹å’Œä¹‹å‰ä¸ä¸€å®šæ˜¯åŒä¸€ä¸ªçº¿ç¨‹ã€‚è¿™æ ·çš„è¯ï¼Œçº¿ç¨‹å°±ä¸ç”¨ç­‰å¾…æ•°æ®åº“è¿”å›ï¼Œè€Œæ˜¯ç›´æ¥å¤„ç†å…¶ä»–è¯·æ±‚ã€‚è¿™æ ·æƒ…å†µä¸‹ï¼Œå³ä½¿æŸä¸ªä¸šåŠ¡ SQL çš„æ‰§è¡Œæ—¶é—´é•¿ï¼Œä¹Ÿä¸ä¼šå½±å“å…¶ä»–ä¸šåŠ¡çš„æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œè¿™ä¸€åˆ‡çš„åŸºç¡€ï¼Œæ˜¯ IO å¿…é¡»æ˜¯éé˜»å¡ IOï¼Œä¹Ÿå°±æ˜¯ NIOï¼ˆæˆ–è€… AIOï¼‰ã€‚&lt;strong&gt;å®˜æ–¹JDBCæ²¡æœ‰ NIOï¼Œåªæœ‰ BIO å®ç°&lt;/strong&gt;ã€‚è¿™æ ·æ— æ³•è®©çº¿ç¨‹å°†è¯·æ±‚å†™å…¥é“¾æ¥ä¹‹åç›´æ¥è¿”å›ï¼Œå¿…é¡»ç­‰å¾…å“åº”ã€‚ä½†æ˜¯ä¹Ÿå°±è§£å†³æ–¹æ¡ˆï¼Œå°±æ˜¯é€šè¿‡å…¶ä»–çº¿ç¨‹æ± ï¼Œä¸“é—¨å¤„ç†æ•°æ®åº“è¯·æ±‚å¹¶ç­‰å¾…è¿”å›è¿›è¡Œå›è°ƒï¼Œä¹Ÿå°±æ˜¯ä¸šåŠ¡çº¿ç¨‹æ±  A å°†æ•°æ®åº“ BIO è¯·æ±‚äº¤ç»™çº¿ç¨‹æ± Bå¤„ç†ï¼Œè¯»å–å®Œæ•°æ®ä¹‹åï¼Œå†äº¤ç»™ A æ‰§è¡Œå‰©ä¸‹çš„ä¸šåŠ¡é€»è¾‘ã€‚è¿™æ ·Aä¹Ÿä¸ç”¨é˜»å¡ï¼Œå¯ä»¥å¤„ç†å…¶ä»–è¯·æ±‚ã€‚ä½†æ˜¯ï¼Œè¿™æ ·è¿˜æ˜¯æœ‰å› ä¸ºæŸä¸ªä¸šåŠ¡ SQL çš„æ‰§è¡Œæ—¶é—´é•¿ï¼Œå¯¼è‡´Bæ‰€æœ‰çº¿ç¨‹è¢«é˜»å¡ä½é˜Ÿåˆ—ä¹Ÿæ»¡äº†ä»è€ŒAçš„è¯·æ±‚ä¹Ÿè¢«é˜»å¡çš„æƒ…å†µï¼Œè¿™æ˜¯ä¸å®Œç¾çš„å®ç°ã€‚çœŸæ­£å®Œç¾çš„ï¼Œéœ€è¦ JDBC å®ç° NIOã€‚&lt;/p&gt;
&lt;p&gt;Java è‡ªå¸¦çš„ Future æ¡†æ¶å¯ä»¥è¿™ä¹ˆç”¨JDBCï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;@GetMapping
public DeferredResult&amp;lt;Result&amp;gt; get() {
DeferredResult&amp;lt;Result&amp;gt; deferredResult = new DeferredResult&amp;lt;&amp;gt;();
CompletableFuture.supplyAsync(() -&amp;gt; {
            return é˜»å¡æ•°æ®åº“IO;
        //dbThreadPoolç”¨æ¥å¤„ç†é˜»å¡çš„æ•°æ®åº“IO
        }, dbThreadPool).thenComposeAsync(result -&amp;gt; {
    //spring çš„ DeferredResult æ¥å®ç°å¼‚æ­¥å›è°ƒå†™å…¥ç»“æœè¿”å›
    deferredResult.setResult(result);
});
return deferredResult;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;WebFlux ä¹Ÿå¯ä»¥ä½¿ç”¨é˜»å¡JDBCï¼Œä½†æ˜¯åŒç†ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;@GetMapping
public Mono&amp;lt;Result&amp;gt; get() {
return Mono.fromFuture(CompletableFuture.supplyAsync(() -&amp;gt; {
            return é˜»å¡æ•°æ®åº“IO;
        //dbThreadPoolç”¨æ¥å¤„ç†é˜»å¡çš„æ•°æ®åº“IO
        }, dbThreadPool));
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Vert.x ä¹Ÿå¯ä»¥ä½¿ç”¨é˜»å¡çš„JDBCï¼Œä¹Ÿæ˜¯åŒç†ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;@GetMapping
public  DeferredResult&amp;lt;Result&amp;gt; get() {
DeferredResult&amp;lt;Result&amp;gt; deferredResult = new DeferredResult&amp;lt;&amp;gt;();
getResultFromDB().setHandler(asyncResult -&amp;gt; {
            if (asyncResult.succeeded()) {
                deferredResult.setResult(asyncResult.result());
            } else {
                deferredResult.setErrorResult(asyncResult.cause());
            }
        });
return deferredResult;
}

private WorkerExecutor dbThreadPool = vertx.createSharedWorkerExecutor(&quot;DB&quot;, 16);

private Future&amp;lt;Result&amp;gt; getResultFromDB() {
    Future&amp;lt;Result&amp;gt; result = Future.future();
    dbThreadPool.executeBlocking(future -&amp;gt; {
            return é˜»å¡æ•°æ®åº“IO;
        }, false, asyncResult -&amp;gt; {
            if (asyncResult.succeeded()) {
                result.complete(asyncResult.result());
            } else {
                result.fail(asyncResult.cause());
            }
        });
    return result;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç›¸å½“äºé€šè¿‡å¦å¤–çš„çº¿ç¨‹æ± ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡åŸæœ‰çº¿ç¨‹æ± ï¼Œåæ­£å°±æ˜¯è¦ç”¨å’Œè¯·æ±‚ä¸ä¸€æ ·çš„çº¿ç¨‹ï¼Œæ‰èƒ½å®ç°å›è°ƒï¼Œè€Œä¸æ˜¯å½“æ¬¡å°±é˜»å¡ç­‰å¾…ï¼‰ï¼Œå°è£…äº†é˜»å¡ JDBC IOã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œè¿™æ ·å‡ ä¹å¯¹æ•°æ®åº“IOä¸»å¯¼çš„åº”ç”¨æ€§èƒ½æ²¡æœ‰æå‡ï¼Œè¿˜å¢åŠ äº†çº¿ç¨‹åˆ‡æ¢ï¼Œå¾—ä¸å¿å¤±ã€‚æ‰€ä»¥ï¼Œéœ€è¦ä½¿ç”¨çœŸæ­£å®ç°äº† NIO çš„æ•°æ®åº“å®¢æˆ·ç«¯ã€‚ç›®å‰æœ‰è¿™äº› NIO çš„ JDBC å®¢æˆ·ç«¯ï¼Œä½†æ˜¯éƒ½ä¸æ™®åŠï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;Vert.x å®¢æˆ·ç«¯ï¼š&lt;a href=&quot;https://vertx.io/docs/vertx-jdbc-client/java/&quot; target=&quot;_blank&quot;&gt;https://vertx.io/docs/vertx-jdbc-client/java/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;r2jdbc å®¢æˆ·ç«¯ï¼š&lt;a href=&quot;http://r2dbc.io/&quot; target=&quot;_blank&quot;&gt;http://r2dbc.io/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Jasync-sql å®¢æˆ·ç«¯ï¼š&lt;a href=&quot;https://github.com/jasync-sql/jasync-sql&quot; target=&quot;_blank&quot;&gt;https://github.com/jasync-sql/jasync-sql&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;strong&gt;æ¯æ—¥ä¸€åˆ·ï¼Œè½»æ¾æå‡æŠ€æœ¯ï¼Œæ–©è·å„ç§offerï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://zhxhash-blog.oss-cn-beijing.aliyuncs.com/qr-code.jpg&quot; alt=&quot;image&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Sun, 07 Feb 2021 19:22:00 +0000</pubDate>
<dc:creator>å¹²è´§æ»¡æ»¡å¼ å“ˆå¸Œ</dc:creator>
<og:description>ä¸ºä½•ç°åœ¨å“åº”å¼ç¼–ç¨‹åœ¨ä¸šåŠ¡å¼€å‘å¾®æœåŠ¡å¼€å‘ä¸æ™®åŠ ä¸»è¦å› ä¸ºæ•°æ®åº“ IOï¼Œä¸æ˜¯ NIOã€‚ ä¸è®ºæ˜¯Javaè‡ªå¸¦çš„Futureæ¡†æ¶ï¼Œè¿˜æ˜¯ Spring WebFluxï¼Œè¿˜æ˜¯ Vert.xï¼Œä»–ä»¬éƒ½æ˜¯ä¸€ç§éé˜»å¡çš„åŸº</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/zhxdick/p/14387449.html</dc:identifier>
</item>
<item>
<title>å‰ç«¯æ¨¡å—åŒ–ä¹‹ES Module - RisingSunBlogs</title>
<link>http://www.cnblogs.com/zhaojian-08/p/14385312.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/zhaojian-08/p/14385312.html</guid>
<description>&lt;h2 id=&quot;ä¸€ã€æ¦‚è¿°&quot;&gt;ä¸€ã€æ¦‚è¿°&lt;/h2&gt;
&lt;p&gt;ä¹‹å‰æåˆ°çš„å‡ ç§æ¨¡å—åŒ–è§„èŒƒï¼šCommonJSã€AMDã€CMDéƒ½æ˜¯ç¤¾åŒºæå‡ºçš„ã€‚ES 2015åœ¨è¯­è¨€å±‚é¢ä¸Šå®ç°äº†æ¨¡å—åŠŸèƒ½ï¼Œä¸”å®ç°ç®€å•ï¼Œå¯ä»¥æ›¿ä»£CommonJSå’ŒAMDè§„èŒƒï¼Œæˆä¸ºåœ¨æœåŠ¡å™¨å’Œæµè§ˆå™¨é€šç”¨çš„è§£å†³æ–¹æ¡ˆ&lt;/p&gt;
&lt;h2 id=&quot;äºŒã€ç‰¹æ€§&quot;&gt;äºŒã€ç‰¹æ€§&lt;/h2&gt;
&lt;h4 id=&quot;1ã€es-moduleè‡ªåŠ¨å¯ç”¨ä¸¥æ ¼æ¨¡å¼&quot;&gt;1ã€ES Moduleè‡ªåŠ¨å¯ç”¨ä¸¥æ ¼æ¨¡å¼&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt; &amp;lt;script type=&quot;module&quot;&amp;gt;
        console.log(this); //undefined
  &amp;lt;/script&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;2ã€es-moduleè¿è¡Œåœ¨å•ç‹¬çš„ä½œç”¨åŸŸä¸­ï¼Œä¸å¤–ç•Œäº’ä¸å¹²æ‰°&quot;&gt;2ã€ES Moduleè¿è¡Œåœ¨å•ç‹¬çš„ä½œç”¨åŸŸä¸­ï¼Œä¸å¤–ç•Œäº’ä¸å¹²æ‰°&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;    &amp;lt;script type=&quot;module&quot;&amp;gt;
        var foo = 100;
        console.log(foo);//100
    &amp;lt;/script&amp;gt;
    &amp;lt;script type=&quot;module&quot;&amp;gt;
        console.log(foo);//Uncaught ReferenceError: foo is not defined
    &amp;lt;/script&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;3ã€es-moduleæ˜¯é€šè¿‡corsæ–¹å¼è¯·æ±‚å¤–éƒ¨æ–‡ä»¶ï¼Œéœ€å¤–éƒ¨æ–‡ä»¶æ”¯æŒcorsè¯·æ±‚&quot;&gt;3ã€ES Moduleæ˜¯é€šè¿‡CORSæ–¹å¼è¯·æ±‚å¤–éƒ¨æ–‡ä»¶ï¼Œéœ€å¤–éƒ¨æ–‡ä»¶æ”¯æŒCORSè¯·æ±‚&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-html&quot;&gt; //è¯¥æ–‡ä»¶æ”¯æŒCORSè¯·æ±‚ï¼Œåˆ™å¯ä»¥è¯·æ±‚æˆåŠŸ
&amp;lt;script type=&quot;module&quot; src=&quot;http://code.jquery.com/jquery-migrate-1.2.1.min.js&quot;&amp;gt;&amp;lt;/script&amp;gt;

//è¯¥æ–‡ä»¶ä¸æ”¯æŒCORSè¯·æ±‚ï¼ŒæŠ¥è·¨åŸŸé”™è¯¯
&amp;lt;script type=&quot;module&quot; src=&quot;http://libs.baidu.com/jquery/2.0.0/jquery.min.js&quot;&amp;gt;&amp;lt;/script&amp;gt; 
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;4ã€es-moduleå¼•ç”¨çš„æ–‡ä»¶ä¼šå»¶è¿Ÿæ‰§è¡Œ&quot;&gt;4ã€ES Moduleå¼•ç”¨çš„æ–‡ä»¶ä¼šå»¶è¿Ÿæ‰§è¡Œ&lt;/h4&gt;
&lt;pre&gt;
&lt;code&gt;//index.js
alert('hello');
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=&quot;language-html&quot;&gt;//index.html
&amp;lt;body&amp;gt;
        &amp;lt;script type=&quot;module&quot; src=&quot;./index.js&quot;&amp;gt;&amp;lt;/script&amp;gt; ç­‰ä»·äº   &amp;lt;script defer src=&quot;./index.js&quot;&amp;gt;&amp;lt;/script&amp;gt;
        &amp;lt;p&amp;gt;
             æ–‡æœ¬å†…å®¹
        &amp;lt;/p&amp;gt;
&amp;lt;/body&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;æ‰§è¡Œç»“æœã€jsçš„åŠ è½½å¹¶æœªå½±å“åˆ°DOMçš„åŠ è½½ã€‘&lt;/strong&gt;&lt;br/&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/741018/202102/741018-20210207151816321-1247304482.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;ä¸‰ã€exportå‘½ä»¤&quot;&gt;ä¸‰ã€exportå‘½ä»¤&lt;/h2&gt;
&lt;p&gt;ç”±äºåœ¨ES Moduleä¸­ï¼Œæ¯ä¸ªæ¨¡å—éƒ½æ˜¯ä¸€ä¸ªå•ç‹¬çš„ä½œç”¨åŸŸï¼Œå¦‚æœæƒ³ä½¿æ¨¡å—å†…çš„å˜é‡æš´éœ²å‡ºå»ï¼Œä½¿ç”¨&lt;strong&gt;export&lt;/strong&gt;å…³é”®å­—ï¼Œå¯¼å…¥å…¶ä»–æ¨¡å—çš„å…³é”®å­—ä½¿ç”¨&lt;strong&gt;import&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&quot;1ã€æŒ¨ä¸ªå¯¼å‡ºå˜é‡&quot;&gt;1ã€æŒ¨ä¸ªå¯¼å‡ºå˜é‡&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;//module.js
export var name = &quot;å¼ ä¸‰&quot;;

export function add(a, b) {
    return a + b;
}

export var obj = {
    name: 'jack'
};
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;2ã€æ‰¹é‡å¯¼å‡ºå˜é‡&quot;&gt;2ã€æ‰¹é‡å¯¼å‡ºå˜é‡&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;//module.js
var name = &quot;å¼ ä¸‰&quot;;

function add(a, b) {
    return a + b;
}

var obj = {
    name: 'jack'
};

export { name, add, obj }
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¼˜ç‚¹ï¼šåœ¨è„šæœ¬å°¾éƒ¨ï¼Œä½¿ç”¨ä¸€ä¸ªexportç»Ÿä¸€å¯¼å‡ºï¼Œæ¸…æ™°ç®€æ´&lt;/p&gt;
&lt;h4 id=&quot;3ã€å¯¼å‡ºé»˜è®¤æ•°æ®&quot;&gt;3ã€å¯¼å‡ºé»˜è®¤æ•°æ®&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;//module.js
export default 'es module'
æˆ–è€…
export default function(a,b){
        return a+b;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼š&lt;/strong&gt;è¯´å®Œimportåå†è¯´æ³¨æ„äº‹é¡¹&lt;/p&gt;
&lt;h4 id=&quot;4ã€å¯¼å‡ºæ—¶èµ·åˆ«åï¼Œä½¿ç”¨aså…³é”®å­—&quot;&gt;4ã€å¯¼å‡ºæ—¶èµ·åˆ«åï¼Œä½¿ç”¨aså…³é”®å­—&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;//module.js
var name = &quot;å¼ ä¸‰&quot;;

function add(a, b) {
    return a + b;
}

var obj = {
    name: 'jack'
};

export { name as v1, add as v2, obj as v3}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;å››ã€importå‘½ä»¤&quot;&gt;å››ã€importå‘½ä»¤&lt;/h2&gt;
&lt;p&gt;è¦æƒ³æ¥å—å…¶ä»–æ¨¡å—é€šè¿‡exportå¯¼å‡ºçš„æˆå‘˜æ—¶ï¼Œä½¿ç”¨importå…³é”®å­—&lt;/p&gt;
&lt;h4 id=&quot;1ã€importå¯¼å…¥å…¶ä»–æ¨¡å—ä¸­çš„å˜é‡&quot;&gt;1ã€importå¯¼å…¥å…¶ä»–æ¨¡å—ä¸­çš„å˜é‡&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;//module.js
var name = &quot;å¼ ä¸‰&quot;;

function add(a, b) {
    return a + b;
} 

export { name ,add }
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;//app.js
import { name, add as MathAdd} from &quot;./module.js&quot;
console.log(name);//å¼ ä¸‰
console.log(MathAdd(1, 1)) //2
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ³¨æ„ï¼š&lt;/p&gt;
&lt;h5 id=&quot;11ä½¿ç”¨ç›¸å¯¹è·¯å¾„-åç¼€åå’Œä¸èƒ½çœç•¥&quot;&gt;1.1ä½¿ç”¨ç›¸å¯¹è·¯å¾„ åç¼€åå’Œ./ä¸èƒ½çœç•¥&lt;/h5&gt;
&lt;p&gt;â€‹ import {name} from &quot;./module.js&quot;&lt;/p&gt;
&lt;h5 id=&quot;12ä½¿ç”¨ç»å¯¹è·¯å¾„&quot;&gt;1.2ä½¿ç”¨ç»å¯¹è·¯å¾„&lt;/h5&gt;
&lt;p&gt;â€‹ import {name} from &quot;/demo/module.js&quot;&lt;/p&gt;
&lt;h5 id=&quot;13ä½¿ç”¨å…¨è·¯å¾„&quot;&gt;1.3ä½¿ç”¨å…¨è·¯å¾„&lt;/h5&gt;
&lt;p&gt;â€‹ import {name} from &quot;&lt;a href=&quot;http://localhost:8080/demo/module.js&quot; target=&quot;_blank&quot;&gt;http://localhost:8080/demo/module.js&lt;/a&gt;&quot;&lt;/p&gt;
&lt;h5 id=&quot;14å¯ä»¥åœ¨å¯¼å…¥æ¨¡å—æ—¶ä½¿ç”¨as-èµ·åˆ«å&quot;&gt;1.4å¯ä»¥åœ¨å¯¼å…¥æ¨¡å—æ—¶ä½¿ç”¨as èµ·åˆ«å&lt;/h5&gt;
&lt;p&gt;â€‹ èµ·åˆ«ååï¼Œaså‰çš„å˜é‡ä¸å¯ä½¿ç”¨äº†&lt;/p&gt;
&lt;h4 id=&quot;2ã€ä½¿ç”¨importåªæ‰§è¡Œå¼•å…¥æ–‡ä»¶ï¼Œä¸æå–å¼•å…¥æ–‡ä»¶ä¸­çš„æˆå‘˜æ—¶&quot;&gt;2ã€ä½¿ç”¨importåªæ‰§è¡Œå¼•å…¥æ–‡ä»¶ï¼Œä¸æå–å¼•å…¥æ–‡ä»¶ä¸­çš„æˆå‘˜æ—¶&lt;/h4&gt;
&lt;ol&gt;&lt;li&gt;import {} from &quot;./module.js&quot;;&lt;/li&gt;
&lt;li&gt;import './module.js'ã€å¸¸ç”¨ã€‘&lt;/li&gt;
&lt;/ol&gt;&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;//module.js
console.log('module.jsä¸­æ‰§è¡Œ')

var name = &quot;å¼ ä¸‰&quot;;

function add(a, b) {
    return a + b;
}

var obj = {
    name: 'jack'
};

export { name, add, obj }
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;//app.js
import {} from &quot;./module.js&quot;;
æˆ–è€…å†™æˆ
import './module.js'
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=&quot;language-html&quot;&gt;//index.html
&amp;lt;body&amp;gt;
    &amp;lt;script type=&quot;module&quot; src=&quot;./app.js&quot;&amp;gt;&amp;lt;/script&amp;gt;
    //æ‰§è¡Œç»“æœ
    //module.jsä¸­æ‰§è¡Œ
&amp;lt;/body&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å½“å¤šæ¬¡æ‰§è¡ŒåŒä¸€ä¸ªimportè¯­å¥æ—¶ï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡&lt;/p&gt;
&lt;h4 id=&quot;3ã€æ¨¡å—çš„æ•´ä½“åŠ è½½&quot;&gt;3ã€æ¨¡å—çš„æ•´ä½“åŠ è½½&lt;/h4&gt;
&lt;p&gt;ä½¿ç”¨importé™¤äº†å¯ä»¥åŠ è½½å•ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥ä¸€æ¬¡æ€§åŠ è½½æ¨¡å—å¯¼å‡ºçš„æ‰€æœ‰å€¼&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;//module.js

var name = &quot;å¼ ä¸‰&quot;;

function add(a, b) {
    return a + b;
}

var obj = {
    name: 'jack'
};

export { name, add, obj }
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;//app.js
import * as all './module.js'
console.log('name:',all.name);
console.log('obj',all.obj);
console.log(add(1,1))
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;äº”ã€export-default&quot;&gt;äº”ã€export default&lt;/h2&gt;
&lt;p&gt;å‰é¢ä½¿ç”¨exportå¯¼å‡ºæ¨¡å—å†…çš„æˆå‘˜æ—¶ï¼Œéœ€è¦æŒ‡å®šå…·ä½“çš„æˆå‘˜åç§°ï¼ŒåŒæ ·åŠ è½½æ—¶éœ€è¦æ ¹æ®å¯¼å‡ºçš„å…·ä½“åç§°è¿›è¡ŒåŠ è½½ã€‚è¿˜æœ‰ä¸€ç§å¿«æ·çš„å¯¼å‡ºæ–¹å¼ï¼Œä½¿ç”¨export default ä¸ºæ¨¡å—æŒ‡å®šé»˜è®¤å¯¼å‡ºï¼Œ&lt;strong&gt;æ¯ä¸ªæ¨¡å—åªèƒ½ä½¿ç”¨ä¸€æ¬¡export default&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&quot;1ã€å¯¼å‡ºåŒ¿åæˆå‘˜æ—¶ï¼Œä½¿ç”¨ä»»æ„å˜é‡æ¥å—æˆå‘˜&quot;&gt;1ã€å¯¼å‡ºåŒ¿åæˆå‘˜æ—¶ï¼Œä½¿ç”¨ä»»æ„å˜é‡æ¥å—æˆå‘˜&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;//module.js
export default function(a, b) {
    return a + b;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt; //app.js
 import add from &quot;./module.js&quot;; 
 console.log(add(1,2));
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å› ä¸ºä½¿ç”¨exportå¯¼å‡ºæˆå‘˜æ—¶æ˜¯åŒ¿åçš„ï¼Œæ‰€ä»¥åœ¨å¯¼å…¥æ—¶å¹¶ä¸çŸ¥é“è¿™ä¸ªæˆå‘˜çš„åå­—æ˜¯ä»€ä¹ˆï¼Œè¿™æ—¶å€™å°±å¯ä»¥éšæ„å†™å˜é‡å»æ¥å—è¿™ä¸ªåŒ¿åæˆå‘˜ï¼Œæ¡ˆä¾‹ä¸­ä½¿ç”¨addæ¥å—çš„åŒ¿åå‡½æ•°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–åç§°æ¥æ”¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼šexport defaultä¹Ÿå¯ä»¥å¯¼å‡ºå…·åæˆå‘˜ï¼Œä½†æ•ˆæœå’Œå¯¼å‡ºåŒ¿åæˆå‘˜æ˜¯ä¸€æ ·çš„&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;//module.js
export default function add(a, b) {
    return a + b;
}
//æˆ–è€…
function add(a,b){
    return a + b;
}
export default add
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt; //app.js
 import temp from &quot;./module.js&quot;; 
 console.log(temp(1,2));
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;æ€»ç»“ï¼šä½¿ç”¨export defaultå¯¼å‡ºæˆå‘˜ï¼Œåœ¨å¤–éƒ¨åŠ è½½æ—¶éƒ½è§†ä¸ºåŒ¿åæˆå‘˜åŠ è½½ï¼Œå¯ä»¥éšæ„èµ·å˜é‡åæ¥å—&lt;/strong&gt;&lt;/p&gt;
&lt;h4 id=&quot;2ã€åŒæ—¶å¯¼å…¥å…¶ä»–æ¨¡å—çš„é»˜è®¤æˆå‘˜å’Œå…·åæˆå‘˜æ—¶&quot;&gt;2ã€åŒæ—¶å¯¼å…¥å…¶ä»–æ¨¡å—çš„é»˜è®¤æˆå‘˜å’Œå…·åæˆå‘˜æ—¶&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;//module.js
var name = 'jack';
var age = 19;
export { name, age } 

//å¯¼å‡ºé»˜è®¤æˆå‘˜
export default 'default export'
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;//app.js
import str,{name,age} from &quot;./module.js&quot;;
æˆ–è€…
import {name,age,default as str} from &quot;./module.js&quot;
console.log(str);//default export
console.log(name);//jack
console.log(age);//19
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;3ã€å¦ç±»çš„é»˜è®¤å¯¼å‡º&quot;&gt;3ã€å¦ç±»çš„é»˜è®¤å¯¼å‡º&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;//module.js
var number = 1;
export { number as default }
ç­‰åŒäº
export default number;
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;//app.js
import { default as number} from &quot;./module.js&quot;
console.log(number); //1
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;æ€»ç»“ï¼šå¯è§export defaultçš„æœ¬è´¨å°±æ˜¯å¯¼å‡ºä¸€ä¸ªåå­—å«defaultçš„æˆå‘˜ï¼Œå½“å¯¼å‡ºçš„æˆå‘˜å«defaultæ—¶ï¼Œæ¥å—è¿™ä¸ªæˆå‘˜å¯ä»¥éšæ„å‘½å&lt;/strong&gt;&lt;/p&gt;
&lt;h4 id=&quot;4ã€ä½¿ç”¨export-defaultæ¥å¯¼å‡ºç±»&quot;&gt;4ã€ä½¿ç”¨export defaultæ¥å¯¼å‡ºç±»&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;//Person.js
export default class Person(){
    ....
}


//main.js
import Person from &quot;./Person.js&quot;;
const person = new Person();
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;5ã€æ¯”è¾ƒä¸€ä¸‹é»˜è®¤è¾“å‡ºå’Œæ­£å¸¸è¾“å‡º&quot;&gt;5ã€æ¯”è¾ƒä¸€ä¸‹é»˜è®¤è¾“å‡ºå’Œæ­£å¸¸è¾“å‡º&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;//1.é»˜è®¤è¾“å‡º
export default function add(a,b){
    return a + b;
}
//æ¥å—é»˜è®¤è¾“å‡º
import temp from './module.js'

//2.å…·åè¾“å‡º
function add (a,b){
    return a + b;
}
export {add}
//æ¥å—å…·åè¾“å‡º
import {add} from './module.js'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;æ€»ç»“ï¼šä½¿ç”¨é»˜è®¤å¯¼å‡ºæ—¶ï¼Œåœ¨å¤–éƒ¨æ¥å—æˆå‘˜ï¼Œä¸éœ€è¦ä½¿ç”¨å¤§æ‹¬å·ï¼›ä½¿ç”¨å…·åè¾“å‡ºæ—¶ï¼Œåœ¨å¤–éƒ¨æ¥å—æˆå‘˜æ—¶ï¼Œimportåéœ€è¦ä½¿ç”¨å¤§æ‹¬å·&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;å…­ã€è¿·æƒ‘æ€§çš„ç‚¹&quot;&gt;å…­ã€è¿·æƒ‘æ€§çš„ç‚¹&lt;/h2&gt;
&lt;h4 id=&quot;1ã€exportæ‰¹é‡å¯¼å‡ºå˜é‡æ—¶ï¼Œå¯¼å‡ºçš„å¹¶ä¸æ˜¯å¯¹è±¡å­—é¢é‡&quot;&gt;1ã€exportæ‰¹é‡å¯¼å‡ºå˜é‡æ—¶ï¼Œå¯¼å‡ºçš„å¹¶ä¸æ˜¯å¯¹è±¡å­—é¢é‡&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;//module.js
var name = 'jack';
var age = 19;
export { name, age } 
//export {name,age} å¹¶ä¸æ˜¯å¯¼å‡ºçš„ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œæ˜¯exportæ‰¹é‡å¯¼å‡ºçš„è¯­æ³•
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;2ã€importåŠ è½½å¤šä¸ªå˜é‡æ—¶ï¼Œå¹¶ä¸æ˜¯es6çš„è§£æ„ç”¨æ³•&quot;&gt;2ã€importåŠ è½½å¤šä¸ªå˜é‡æ—¶ï¼Œå¹¶ä¸æ˜¯ES6çš„è§£æ„ç”¨æ³•&lt;/h4&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;import {name,age} from &quot;./module.js&quot;
//impotåé¢çš„å¤§æ‹¬å·å¹¶ä¸æ˜¯è§£æ„ä½œç”¨
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;3ã€importå¯¼å…¥çš„å˜é‡éƒ½æ˜¯å¸¸é‡ï¼Œä¸å¯ä¿®æ”¹ï¼Œä¸commonjsä¸åŒ&quot;&gt;3ã€importå¯¼å…¥çš„å˜é‡éƒ½æ˜¯å¸¸é‡ï¼Œä¸å¯ä¿®æ”¹ï¼Œä¸CommonJSä¸åŒ&lt;/h4&gt;
&lt;h2 id=&quot;ä¸ƒã€exportå’Œimportçš„å¤åˆç”¨æ³•&quot;&gt;ä¸ƒã€exportå’Œimportçš„å¤åˆç”¨æ³•&lt;/h2&gt;
&lt;p&gt;å½“æˆ‘ä»¬åœ¨æ–‡ä»¶å†…importä¸€ä¸ªæˆå‘˜åï¼ŒåŒæ—¶æŠŠå®ƒå¯¼å‡ºæ—¶&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;//index.js
import {Button} from './button.js'
export { Button }

å¯ä»¥å†™æˆ

export {Button} from &quot;./button.js&quot;
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;å…«ã€importå‡½æ•°&quot;&gt;å…«ã€import()å‡½æ•°&lt;/h2&gt;
&lt;p&gt;importå…³é”®å­—å¯¼å…¥å…¶ä»–æ¨¡å—æˆå‘˜æ—¶ï¼Œå¿…é¡»å†™åœ¨æœ€é¡¶å±‚ä½œç”¨åŸŸï¼Œä¸å¯åµŒå¥—åœ¨å…¶ä»–é€»è¾‘å¤„ç†ä¸­ã€‚å¦‚æœè¯´æˆ‘ä»¬æƒ³åœ¨æŸæ®µé€»è¾‘æ‰§è¡Œå®Œæˆåå»åŠ¨æ€åŠ è½½æŸäº›æˆå‘˜ï¼Œè¿™æ—¶å€™å¯ä»¥ä½¿ç”¨import()å‡½æ•°åŠ è½½&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;//module.js
var name = &quot;å¼ ä¸‰&quot;;

function add(a, b) {
    return a + b;
}

var obj = {
    name: 'jack'
};

export { name, add, obj }
export default function() {
    return 'åŒ¿åæˆå‘˜'
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;//app.js
//ä½¿ç”¨setTimeoutæ¥æ¨¡æ‹Ÿä¸€ä¸ªå¼‚æ­¥åŠ è½½çš„è¿‡ç¨‹
setTimeout(() =&amp;gt; {
    //importè¿”å›çš„æ˜¯ä¸ªpromiseï¼Œè¿”å›çš„æ¨¡å—å†…å®¹éƒ½åœ¨å›è°ƒå‡½æ•°çš„å‚æ•°ä¸­ï¼ˆmoduleResultï¼‰
    import (&quot;./module.js&quot;).then(moduleResult =&amp;gt; {
        console.log(moduleResult)
        console.log(moduleResult.add)
        console.log(moduleResult.name)
        console.log(moduleResult.default)
        console.log(moduleResult.obj)
    })
    
    //ä¹Ÿå¯ä»¥ç›´æ¥æŠŠæˆå‘˜ç»“æ„å‡ºæ¥
       import (&quot;./module.js&quot;).then(({add,name,obj,default:defaultData}}) =&amp;gt; {
        console.log(moduleResult.add)
        console.log(moduleResult.name)
        console.log(moduleResult.defaultData)
        console.log(moduleResult.obj)
    })
}, 2000);
&lt;/code&gt;
&lt;/pre&gt;</description>
<pubDate>Sun, 07 Feb 2021 16:15:00 +0000</pubDate>
<dc:creator>RisingSunBlogs</dc:creator>
<og:description>ä¸€ã€æ¦‚è¿° ä¹‹å‰æåˆ°çš„å‡ ç§æ¨¡å—åŒ–è§„èŒƒï¼šCommonJSã€AMDã€CMDéƒ½æ˜¯ç¤¾åŒºæå‡ºçš„ã€‚ES 2015åœ¨è¯­è¨€å±‚é¢ä¸Šå®ç°äº†æ¨¡å—åŠŸèƒ½ï¼Œä¸”å®ç°ç®€å•ï¼Œå¯ä»¥æ›¿ä»£CommonJSå’ŒAMDè§„èŒƒï¼Œæˆä¸ºåœ¨æœåŠ¡å™¨å’Œæµè§ˆå™¨é€šç”¨</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/zhaojian-08/p/14385312.html</dc:identifier>
</item>
<item>
<title>ä½¿ç”¨å¼€æºé‡å­ç¼–ç¨‹æ¡†æ¶ProjectQè¿›è¡Œé‡å­è®¡ç®—èµ„æºä¼°è®¡ä¸ç»˜åˆ¶é‡å­çº¿è·¯å›¾ - é™†è¨€å›</title>
<link>http://www.cnblogs.com/dechinphy/p/circuit.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/dechinphy/p/circuit.html</guid>
<description>&lt;p&gt;é€šè¿‡ä½¿ç”¨å¼€æºé‡å­è®¡ç®—ç¼–ç¨‹æ¡†æ¶ProjectQï¼Œæˆ‘ä»¬å¯ä»¥ç¼–è¯‘å’Œç”Ÿæˆé‡å­çº¿è·¯ï¼Œå¹¶å°†é‡å­çº¿è·¯è¾“å‡ºä¸ºå­—ç¬¦ä¸²æˆ–è€…latexä»£ç æ ¼å¼ã€‚æ ¹æ®å¾—åˆ°çš„çº¿è·¯è¾“å‡ºï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¯¹ç›¸åº”é‡å­ç®—æ³•çš„å®ç°è¿›è¡Œèµ„æºä¼°è®¡ï¼Œå¯¹äºé‡å­ç®—æ³•çš„ç§‘å­¦ç ”ç©¶æœ‰é‡è¦çš„å¯å‘ä½œç”¨ã€‚&lt;/p&gt;&lt;div id=&quot;cnblogs_post_body&quot; readability=&quot;356.01671753607&quot;&gt;

&lt;p&gt;åœ¨é‡å­è®¡ç®—é¢†åŸŸï¼ŒåŸºäºé‡å­èŠ¯ç‰‡çš„ç®—æ³•è®¾è®¡(æˆ–ç®€ç§°ä¸ºé‡å­ç®—æ³•)æ˜¯åŸºäºé‡å­çº¿è·¯æ¥è®¾è®¡çš„ï¼Œç±»ä¼¼äºä¼ ç»Ÿè®¡ç®—ä¸­ä½¿ç”¨çš„&lt;code&gt;ä¸&lt;/code&gt;é—¨å’Œ&lt;code&gt;é&lt;/code&gt;é—¨ä¹‹ç±»çš„é€»è¾‘é—¨ã€‚å› æ­¤ç ”ç©¶ä¸€ä¸ªé‡å­çº¿è·¯è¾“å…¥åçš„ç¼–è¯‘(å¯ä»¥ç®€åŒ–ä¸ºæ•°é‡æ›´å°‘çš„é‡å­é—¨ç»„åˆï¼Œæˆ–è€…é€‚é…ç¡¬ä»¶ä¸Šå¯å®ç°çš„é‡å­é€»è¾‘é—¨æ“ä½œ)ï¼Œå¹¶ä¸”è¾“å‡ºç¼–è¯‘åçš„é‡å­çº¿è·¯ä¸é‡å­çº¿è·¯å›¾ï¼Œåœ¨å„ç§åœºæ™¯ä¸‹éƒ½ä¼šä½¿ç”¨åˆ°ã€‚è€Œä¸”ï¼Œé‡å­çº¿è·¯ç¼–è¯‘ä¹Ÿèƒ½å¤Ÿä¸ºé‡å­è®¡ç®—èµ„æºä¼°è®¡å¸¦æ¥æ›´åŠ å‡†ç¡®çš„ç»“æœé¢„æµ‹ã€‚&lt;/p&gt;

&lt;p&gt;é’ˆå¯¹äºé‡å­è®¡ç®—ï¼Œè¿™é‡Œæˆ‘ä»¬å°½é‡çš„é¿å…ç¡¬ä»¶ä¸Šå®ç°åŸç†çš„è§£é‡Šï¼Œå› ä¸ºé‚£æ˜¯å±äºå¦å¤–ä¸€ä¸ªé¢†åŸŸçš„ç ”ç©¶è¯¾é¢˜ã€‚è¿™é‡Œæˆ‘ä»¬ä»…ä»çŸ©é˜µåŠ›å­¦çš„è§’åº¦æ¥ç†è§£ï¼Œè¯»è€…å¯ä»¥å°è¯•ä»è¿™ç¯‡&lt;a href=&quot;https://www.cnblogs.com/dechinphy/p/magic.html&quot; target=&quot;_blank&quot;&gt;ä»‹ç»é‡å­ç³»ç»Ÿæ¨¡æ‹Ÿçš„åšå®¢&lt;/a&gt;ä¸­å…ˆäº†è§£ä¸€éƒ¨åˆ†é‡å­é—¨æ“ä½œçš„å®ç°ã€‚è¿™äº›é‡å­é—¨çš„æ¯ä¸€ç§æ’åˆ—ç»„åˆï¼Œæˆ‘ä»¬éƒ½å¯ä»¥å°†å…¶è§†ä¸ºä¸€ä¸ªé‡å­çº¿è·¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºæ˜¯ä¸€ç§é‡å­çº¿è·¯çš„å›¾ç¤ºã€‚&lt;br/&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2277440/202102/2277440-20210207220111569-1339908113.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;è¿™é‡Œçš„&lt;span class=&quot;math inline&quot;&gt;\(H\)&lt;/span&gt;é—¨å’Œ&lt;span class=&quot;math inline&quot;&gt;\(CNOT\)&lt;/span&gt;é—¨ä½œç”¨åœ¨ä¸åŒçš„é‡å­æ¯”ç‰¹ä¸Šï¼Œç›¸å½“äºæ‰§è¡Œäº†ä¸€é¡¹å¦‚ä¸‹æ‰€ç¤ºçš„ä»»åŠ¡ï¼š&lt;/p&gt;
&lt;p&gt;\[\left|\psi_t\right&amp;gt;=U\left|\psi_0\right&amp;gt; \]&lt;/p&gt;
&lt;p&gt;è¿™é‡Œå°†&lt;span class=&quot;math inline&quot;&gt;\(U\)&lt;/span&gt;ä½œç”¨åœ¨åˆå§‹çš„é‡å­æ€&lt;span class=&quot;math inline&quot;&gt;\(\left|\psi_0\right&amp;gt;\)&lt;/span&gt;ä¹‹åå¾—åˆ°äº†ä¸€ä¸ªæ–°çš„é‡å­æ€&lt;span class=&quot;math inline&quot;&gt;\(\left|\psi_t\right&amp;gt;\)&lt;/span&gt;ï¼Œå½“ç„¶ï¼Œæ­¤æ—¶ä¿¡æ¯è¿˜è¢«å­˜å‚¨åœ¨é‡å­æ€ä¸­ã€‚å¦‚æœéœ€è¦å°†é‡å­æ€ä¸­çš„ä¿¡æ¯è¯»å–åˆ°ç»å…¸ä¿¡æ¯ï¼Œå°±éœ€è¦å¯¹é‡å­æ€è¿›è¡Œé‡‡æ ·ï¼Œç›¸å…³è¿‡ç¨‹å¯ä»¥å‚è€ƒè¿™ç¯‡&lt;a href=&quot;https://www.cnblogs.com/dechinphy/p/state.html&quot; target=&quot;_blank&quot;&gt;ä»‹ç»é‡å­æ€é‡‡æ ·çš„åšå®¢&lt;/a&gt;ï¼Œæœ€ç»ˆæˆ‘ä»¬å¾—åˆ°çš„ä¿¡æ¯æ˜¯ä¸€ç³»åˆ—äºŒè¿›åˆ¶æ¯”ç‰¹ä¸²çš„åˆ†å¸ƒã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬å…ˆç”¨ProjectQé‡å­ç¼–ç¨‹æ¡†æ¶å†™ä¸€ä¸ªä¸ä¼šè¢«ç¼–è¯‘ä¼˜åŒ–çš„é‡å­çº¿è·¯ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;from projectq import MainEngine
from projectq.backends import CommandPrinter
from projectq.ops import H, CX, X, Z, Measure, All

circuit_backend = CommandPrinter()
eng=MainEngine(backend=circuit_backend)

qubits = eng.allocate_qureg(3)
All(H) | qubits
CX | (qubits[0], qubits[1])
CX | (qubits[1], qubits[2])
eng.flush()
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™ä¸ªç¨‹åºçš„åŸºæœ¬é€»è¾‘æ˜¯ï¼šä½¿ç”¨&lt;code&gt;MainEngine&lt;/code&gt;ç±»æ¥æ‰§è¡Œç¼–è¯‘ä¼˜åŒ–ç­‰å·¥ä½œ;ä½¿ç”¨&lt;code&gt;CommandPrinter&lt;/code&gt;ä½œä¸ºåç«¯ï¼Œè¡¨ç¤ºåªæ‰“å°é‡å­çº¿è·¯è€Œä¸è¿›è¡Œè®¡ç®—;åˆ†é…3ä¸ªé‡å­æ¯”ç‰¹è¿›è¡Œè®¡ç®—ï¼Œæœ€åä½œç”¨ä¸€ä¸ªçº¿è·¯åœ¨è¯¥é‡å­ç³»ç»Ÿä¸Šã€‚è¿™ä¸ªç¨‹åºçš„æ‰§è¡Œè¾“å‡ºå¦‚ä¸‹ï¼Œæ˜¯ä¸€ä¸ªåŒ…å«æœ‰&lt;code&gt;Allocate&lt;/code&gt;çš„é‡å­çº¿è·¯ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;Allocate | Qureg[0]
H | Qureg[0]
Allocate | Qureg[1]
H | Qureg[1]
CX | ( Qureg[0], Qureg[1] )
Allocate | Qureg[2]
H | Qureg[2]
CX | ( Qureg[1], Qureg[2] )
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œåœ¨é¢å¤–ä»‹ç»å‡ ç§ä¼˜åŒ–æ“ä½œï¼šé‡å­æ¯”ç‰¹å›æ”¶å’Œé‡å­çº¿è·¯ç¼–è¯‘ã€‚ç”±äºè¯¥åˆ†é…çš„æ¯”ç‰¹å·²ç»åœ¨å†…å­˜ä¸­æ³¨å†Œï¼Œéœ€è¦æ‰‹åŠ¨çš„æ³¨é”€è¯¥é‡å­ç³»ç»Ÿæ‰€åˆ†é…çš„é‡å­æ¯”ç‰¹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;from projectq import MainEngine
from projectq.backends import CommandPrinter
from projectq.ops import H, CX, X, Z, Measure, All

circuit_backend = CommandPrinter()
eng=MainEngine(backend=circuit_backend)
qubits = eng.allocate_qureg(3)

All(H) | qubits
CX | (qubits[0], qubits[1])
CX | (qubits[1], qubits[2])
eng.flush(deallocate_qubits=True)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œpythonä»£ç ä¸­å”¯ä¸€çš„å˜åŒ–å°±æ˜¯å¢åŠ äº†&lt;code&gt;deallocate_qubits=True&lt;/code&gt;è¿™ä¸ªé€‰é¡¹ï¼Œæœ€ç»ˆè¾“å‡ºçš„é‡å­çº¿è·¯é‡Œé¢ä¹Ÿå°±ä¼šåŒ…å«æœ‰&lt;code&gt;Deallocate&lt;/code&gt;çš„æ“ä½œï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;Allocate | Qureg[0]
H | Qureg[0]
Allocate | Qureg[1]
H | Qureg[1]
CX | ( Qureg[0], Qureg[1] )
Deallocate | Qureg[0]
Allocate | Qureg[2]
H | Qureg[2]
CX | ( Qureg[1], Qureg[2] )
Deallocate | Qureg[1]
Deallocate | Qureg[2]
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚æœåœ¨çº¿è·¯ä¸­é‡åˆ°ä¸€äº›å¯ä»¥ç®€åŒ–çš„æ¨¡å—ï¼Œæ¯”å¦‚è¿ç»­ä½œç”¨ä¸¤æ¬¡&lt;code&gt;H&lt;/code&gt;é—¨ä¹‹åï¼Œç›¸å½“äºæ²¡æœ‰æ‰§è¡Œä»»ä½•çš„æ“ä½œï¼Œå³&lt;span class=&quot;math inline&quot;&gt;\(HH=I\)&lt;/span&gt;ã€‚è¿™é‡Œçš„&lt;span class=&quot;math inline&quot;&gt;\(H\)&lt;/span&gt;çš„çŸ©é˜µå½¢å¼å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;\[H=\left( \begin{array}{l} \frac{\sqrt{2}}{2} &amp;amp; \frac{\sqrt{2}}{2}\\ \frac{\sqrt{2}}{2} &amp;amp; -\frac{\sqrt{2}}{2} \end{array} \right) \]&lt;/p&gt;
&lt;p&gt;å¦‚ä¸‹ä»£ç æ‰€ç¤ºæˆ‘ä»¬é™¤äº†åœ¨æ‰€æœ‰é‡å­æ¯”ç‰¹ä¸Šä½œç”¨&lt;span class=&quot;math inline&quot;&gt;\(H\)&lt;/span&gt;é—¨ä¹‹å¤–ï¼Œåœ¨ç¬¬äºŒä¸ªé‡å­æ¯”ç‰¹ä¸Šé¢å¤–ä½œç”¨ä¸€ä¸ª&lt;span class=&quot;math inline&quot;&gt;\(H\)&lt;/span&gt;é—¨ï¼Œè¿™æ ·ç†è®ºä¸Šè¯´ä¸¤æ¬¡è¿ç»­ä½œç”¨çš„&lt;span class=&quot;math inline&quot;&gt;\(H\)&lt;/span&gt;é—¨ä¼šè¢«æŠµæ¶ˆï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;from projectq import MainEngine
from projectq.backends import CommandPrinter
from projectq.ops import H, CX, X, Z, Measure, All

circuit_backend = CommandPrinter()
eng=MainEngine(backend=circuit_backend)
qubits = eng.allocate_qureg(3)

All(H) | qubits
H | qubits[1]
CX | (qubits[0], qubits[1])
CX | (qubits[1], qubits[2])
eng.flush(deallocate_qubits=True)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ç›¸åº”çš„ç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;Allocate | Qureg[0]
H | Qureg[0]
Allocate | Qureg[1]
CX | ( Qureg[0], Qureg[1] )
Deallocate | Qureg[0]
Allocate | Qureg[2]
H | Qureg[2]
CX | ( Qureg[1], Qureg[2] )
Deallocate | Qureg[1]
Deallocate | Qureg[2]
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åŒºåˆ«äºä¸Šé¢çš„ä¸¤ä¸ªä¾‹å­æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œè¿™é‡Œä»…æœ‰2ä¸ª&lt;span class=&quot;math inline&quot;&gt;\(H\)&lt;/span&gt;é—¨è€Œä¸Šé¢çš„ä¾‹å­ä¸­éƒ½æœ‰3ä¸ª&lt;span class=&quot;math inline&quot;&gt;\(H\)&lt;/span&gt;é—¨ï¼Œè¿™å°±è¯´æ˜åœ¨é‡å­ç¼–è¯‘ä¸­ä¸¤ä¸ªè¿ç»­çš„&lt;span class=&quot;math inline&quot;&gt;\(H\)&lt;/span&gt;é—¨æˆåŠŸçš„è¢«æŠµæ¶ˆäº†ã€‚&lt;/p&gt;

&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;from projectq import MainEngine
from projectq.backends import CircuitDrawer
from projectq.ops import H, CX, X, Z, Measure, All

circuit_backend = CircuitDrawer()
circuit_backend.set_qubit_locations({0: 2, 1: 1, 2:0})
eng=MainEngine(backend=circuit_backend)
qubits = eng.allocate_qureg(3)

All(H) | qubits
CX | (qubits[0], qubits[1])
CX | (qubits[1], qubits[2])
All(Measure) | qubits
eng.flush()

print (circuit_backend.get_latex())
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ‰§è¡Œè¾“å‡ºçš„æ˜¯ä¸€ä¸²å®Œæ•´çš„LaTexæ ¼å¼ä»£ç ï¼Œå¯ä»¥å­˜å‚¨ä¸º&lt;code&gt;file_name.tex&lt;/code&gt;å†è¿›è¡Œç¼–è¯‘ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-latex&quot;&gt;\documentclass{standalone}
\usepackage[margin=1in]{geometry}
\usepackage[hang,small,bf]{caption}
\usepackage{tikz}
\usepackage{braket}
\usetikzlibrary{backgrounds,shadows.blur,fit,decorations.pathreplacing,shapes}

\begin{document}
\begin{tikzpicture}[scale=0.8, transform shape]

\tikzstyle{basicshadow}=[blur shadow={shadow blur steps=8, shadow xshift=0.7pt, shadow yshift=-0.7pt, shadow scale=1.02}]\tikzstyle{basic}=[draw,fill=white,basicshadow]
\tikzstyle{operator}=[basic,minimum size=1.5em]
\tikzstyle{phase}=[fill=black,shape=circle,minimum size=0.1cm,inner sep=0pt,outer sep=0pt,draw=black]
\tikzstyle{none}=[inner sep=0pt,outer sep=-.5pt,minimum height=0.5cm+1pt]
\tikzstyle{measure}=[operator,inner sep=0pt,minimum height=0.5cm, minimum width=0.75cm]
\tikzstyle{xstyle}=[circle,basic,minimum height=0.35cm,minimum width=0.35cm,inner sep=-1pt,very thin]
\tikzset{
shadowed/.style={preaction={transform canvas={shift={(0.5pt,-0.5pt)}}, draw=gray, opacity=0.4}},
}
\tikzstyle{swapstyle}=[inner sep=-1pt, outer sep=-1pt, minimum width=0pt]
\tikzstyle{edgestyle}=[very thin]

\node[none] (line0_gate0) at (0.1,-0) {$\Ket{0}$};
\node[none] (line0_gate1) at (0.5,-0) {};
\node[none,minimum height=0.5cm,outer sep=0] (line0_gate2) at (0.75,-0) {};
\node[none] (line0_gate3) at (1.0,-0) {};
\draw[operator,edgestyle,outer sep=0.5cm] ([yshift=0.25cm]line0_gate1) rectangle ([yshift=-0.25cm]line0_gate3) node[pos=.5] {H};
\draw (line0_gate0) edge[edgestyle] (line0_gate1);
\node[none] (line1_gate0) at (0.1,-1) {$\Ket{0}$};
\node[none] (line1_gate1) at (0.5,-1) {};
\node[none,minimum height=0.5cm,outer sep=0] (line1_gate2) at (0.75,-1) {};
\node[none] (line1_gate3) at (1.0,-1) {};
\draw[operator,edgestyle,outer sep=0.5cm] ([yshift=0.25cm]line1_gate1) rectangle ([yshift=-0.25cm]line1_gate3) node[pos=.5] {H};
\draw (line1_gate0) edge[edgestyle] (line1_gate1);
\node[none] (line2_gate0) at (0.1,-2) {$\Ket{0}$};
\node[none] (line2_gate1) at (0.5,-2) {};
\node[none,minimum height=0.5cm,outer sep=0] (line2_gate2) at (0.75,-2) {};
\node[none] (line2_gate3) at (1.0,-2) {};
\draw[operator,edgestyle,outer sep=0.5cm] ([yshift=0.25cm]line2_gate1) rectangle ([yshift=-0.25cm]line2_gate3) node[pos=.5] {H};
\draw (line2_gate0) edge[edgestyle] (line2_gate1);
\node[xstyle] (line1_gate4) at (1.4000000000000001,-1) {};
\draw[edgestyle] (line1_gate4.north)--(line1_gate4.south);
\draw[edgestyle] (line1_gate4.west)--(line1_gate4.east);
\node[phase] (line2_gate4) at (1.4000000000000001,-2) {};
\draw (line2_gate4) edge[edgestyle] (line1_gate4);
\draw (line1_gate3) edge[edgestyle] (line1_gate4);
\draw (line2_gate3) edge[edgestyle] (line2_gate4);
\node[xstyle] (line0_gate4) at (1.9500000000000002,-0) {};
\draw[edgestyle] (line0_gate4.north)--(line0_gate4.south);
\draw[edgestyle] (line0_gate4.west)--(line0_gate4.east);
\node[phase] (line1_gate5) at (1.9500000000000002,-1) {};
\draw (line1_gate5) edge[edgestyle] (line0_gate4);
\draw (line0_gate3) edge[edgestyle] (line0_gate4);
\draw (line1_gate4) edge[edgestyle] (line1_gate5);
\node[measure,edgestyle] (line0_gate5) at (2.6000000000000005,-0) {};
\draw[edgestyle] ([yshift=-0.18cm,xshift=0.07500000000000001cm]line0_gate5.west) to [out=60,in=180] ([yshift=0.035cm]line0_gate5.center) to [out=0, in=120] ([yshift=-0.18cm,xshift=-0.07500000000000001cm]line0_gate5.east);
\draw[edgestyle] ([yshift=-0.18cm]line0_gate5.center) to ([yshift=-0.07500000000000001cm,xshift=-0.18cm]line0_gate5.north east);
\draw (line0_gate4) edge[edgestyle] (line0_gate5);
\node[measure,edgestyle] (line1_gate6) at (2.6000000000000005,-1) {};
\draw[edgestyle] ([yshift=-0.18cm,xshift=0.07500000000000001cm]line1_gate6.west) to [out=60,in=180] ([yshift=0.035cm]line1_gate6.center) to [out=0, in=120] ([yshift=-0.18cm,xshift=-0.07500000000000001cm]line1_gate6.east);
\draw[edgestyle] ([yshift=-0.18cm]line1_gate6.center) to ([yshift=-0.07500000000000001cm,xshift=-0.18cm]line1_gate6.north east);
\draw (line1_gate5) edge[edgestyle] (line1_gate6);
\node[measure,edgestyle] (line2_gate5) at (2.0500000000000003,-2) {};
\draw[edgestyle] ([yshift=-0.18cm,xshift=0.07500000000000001cm]line2_gate5.west) to [out=60,in=180] ([yshift=0.035cm]line2_gate5.center) to [out=0, in=120] ([yshift=-0.18cm,xshift=-0.07500000000000001cm]line2_gate5.east);
\draw[edgestyle] ([yshift=-0.18cm]line2_gate5.center) to ([yshift=-0.07500000000000001cm,xshift=-0.18cm]line2_gate5.north east);
\draw (line2_gate4) edge[edgestyle] (line2_gate5);

\end{tikzpicture}
\end{document}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸è¿‡è¿™é‡Œæ¨èå¦å¤–ä¸€ç§æ›´åŠ æ–¹ä¾¿çš„åšæ³•ï¼Œé¿å…è‡ªå·±å»å®‰è£…ä¼—å¤šçš„ç¬¬ä¸‰æ–¹texåŒ…ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨&lt;a href=&quot;https://www.overleaf.com&quot; target=&quot;_blank&quot;&gt;Overleaf&lt;/a&gt;å¹³å°æ¥æ‰§è¡Œ&lt;code&gt;tex&lt;/code&gt;æ–‡ä»¶çš„ç¼–è¯‘æ“ä½œï¼Œæ¼”ç¤ºæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;br/&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2277440/202102/2277440-20210207231005840-2115034579.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;åœ¨Overleafé‡Œé¢ä¼šè‡ªåŠ¨çš„å¸®æˆ‘ä»¬é…ç½®å¥½ç›¸å…³çš„Latexç¯å¢ƒï¼Œå¤§å¤§å‡è½»æˆ‘ä»¬è‡ªå·±çš„å·¥ä½œé‡ã€‚è¿™é‡Œçš„é‡å­çº¿è·¯å›¾ç»˜åˆ¶æ—¶è·Ÿæ¯”ç‰¹é¡ºåºæœ¬èº«æ˜¯ç›¸å…³çš„ï¼Œæ¯”å¦‚è¿™é‡Œæˆ‘ä»¬å°è¯•åˆ‡æ¢ä¸€ç§é‡å­æ¯”ç‰¹çš„æ˜ å°„ç¼–å·ï¼Œå°±ä¼šå¾—åˆ°ä¸åŒçš„çº¿è·¯å›¾(åœ¨æ•°å­¦å’Œç‰©ç†ä¸Šæ˜¯ç­‰ä»·çš„)ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;from projectq import MainEngine
from projectq.backends import CircuitDrawer
from projectq.ops import H, CX, X, Z, Measure, All

circuit_backend = CircuitDrawer()
circuit_backend.set_qubit_locations({0: 1, 1: 2, 2:0})
eng=MainEngine(backend=circuit_backend)
qubits = eng.allocate_qureg(3)

All(H) | qubits
CX | (qubits[0], qubits[1])
CX | (qubits[1], qubits[2])
All(Measure) | qubits
eng.flush()

print (circuit_backend.get_latex())
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç”Ÿæˆçš„latexä»£ç è¿™é‡Œå°±ä¸åšå±•ç¤ºäº†ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥çœ‹ä¸‹ç¼–è¯‘åè¾“å‡ºçš„é‡å­çº¿è·¯å›¾ï¼š&lt;br/&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2277440/202102/2277440-20210207231457111-792105640.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;

&lt;p&gt;è¯´åˆ°é‡å­è®¡ç®—çš„èµ„æºä¼°è®¡ï¼Œè¿™é‡Œé¢å°±éœ€è¦ç»“åˆå®é™…åœºæ™¯æ¥åˆ†æï¼Œè¿™æ˜¯å› ä¸ºå³ä½¿æˆ‘ä»¬ç»™å‡ºäº†ä¸€ä¸ªéå¸¸ç²¾å¦™çš„çº¿è·¯ï¼Œä½†æ˜¯è¿™ä¸ªé‡å­çº¿è·¯æœ€ç»ˆå¯èƒ½ä¹Ÿå¾ˆéš¾çœŸæ­£åœ¨é‡å­è®¡ç®—ç¡¬ä»¶ä¸Šå®ç°ï¼Œè¿™æ˜¯ç”±äºä¸åŒçš„ç¡¬ä»¶ä½“ç³»æœ¬èº«æ‰€å…·å¤‡çš„å±€é™æ€§ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘åœ¨ç»™å®šé‡å­é—¨é›†åˆçš„æ¡ä»¶ä¸‹çš„èµ„æºä¼°è®¡ï¼Œæˆ‘ä»¬å…ˆè¿˜æ˜¯ç”¨ç»™å®šçš„é‡å­é—¨é›†åˆæ¥ç¼–è¯‘ä¸Šè¿°çš„ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;from projectq import MainEngine
from projectq.backends import CommandPrinter
from projectq.ops import H, CX, X, Z, Rx, Ry, Rz, Measure, All
from projectq.setups import linear

compiler_engines = linear.get_engine_list(num_qubits=16,
                                          one_qubit_gates=(Rx, Ry, Rz),
                                          two_qubit_gates=(CX, ))
circuit_backend = CommandPrinter()
eng=MainEngine(backend=circuit_backend, engine_list=compiler_engines)
qubits = eng.allocate_qureg(3)

All(H) | qubits
CX | (qubits[0], qubits[1])
CX | (qubits[1], qubits[2])
eng.flush(deallocate_qubits=True)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯&lt;span class=&quot;math inline&quot;&gt;\(\{R_x,R_y,R_z,CX\}\)&lt;/span&gt;è¿™ä¸ªç»„åˆï¼Œè€Œå¹¶ä¸åŒ…å«ä¸Šè¿°ç”¨ä¾‹ä¸­ä½¿ç”¨åˆ°çš„&lt;span class=&quot;math inline&quot;&gt;\(H\)&lt;/span&gt;é—¨ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹ä¸‹è¾“å‡ºç»“æœ(å…¶å®å°±æ˜¯ç”¨&lt;span class=&quot;math inline&quot;&gt;\(R_x\)&lt;/span&gt;å’Œ&lt;span class=&quot;math inline&quot;&gt;\(R_y\)&lt;/span&gt;çš„ç»„åˆæ¥æ„å»ºä¸€ä¸ª&lt;span class=&quot;math inline&quot;&gt;\(H\)&lt;/span&gt;é—¨)ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;Allocate | Qureg[1]
Ry(1.570796326795) | Qureg[1]
Rx(9.424777960769) | Qureg[1]
Allocate | Qureg[0]
Ry(1.570796326795) | Qureg[0]
Rx(9.424777960769) | Qureg[0]
CX | ( Qureg[0], Qureg[1] )
Allocate | Qureg[2]
Ry(1.570796326795) | Qureg[2]
Rx(9.424777960769) | Qureg[2]
CX | ( Qureg[1], Qureg[2] )
Deallocate | Qureg[1]
Deallocate | Qureg[2]
Deallocate | Qureg[0]
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é’ˆå¯¹äºè¿™ç§åœºæ™¯ï¼Œæˆ‘ä»¬åˆ‡æ¢ä¸‹åç«¯å°±å¯ä»¥å®ç°é‡å­è®¡ç®—èµ„æºçš„ç»Ÿè®¡ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;from projectq import MainEngine
from projectq.backends import ResourceCounter
from projectq.ops import H, CX, X, Z, Rx, Ry, Rz, Measure, All
from projectq.setups import linear

compiler_engines = linear.get_engine_list(num_qubits=16,
                                          one_qubit_gates=(Rx, Ry, Rz),
                                          two_qubit_gates=(CX, ))
circuit_backend = ResourceCounter()
eng=MainEngine(backend=circuit_backend, engine_list=compiler_engines)
qubits = eng.allocate_qureg(3)

All(H) | qubits
CX | (qubits[0], qubits[1])
CX | (qubits[1], qubits[2])
All(Measure) | qubits
eng.flush(deallocate_qubits=True)

print (circuit_backend)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™ä¸ªç¨‹åºå®é™…ä¸Šå°±æ˜¯ç»Ÿè®¡ä¸Šä¸€ä¸ªç¤ºä¾‹ä»£ç ä¸­è¾“å‡ºçš„é‡å­çº¿è·¯çš„é—¨çš„æ•°é‡ï¼Œå¯¹åº”è¾“å‡ºç»“æœä¸ºï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;Gate class counts:
    AllocateQubitGate : 3
    CXGate : 2
    DeallocateQubitGate : 3
    MeasureGate : 3
    Rx : 3
    Ry : 3

Gate counts:
    Allocate : 3
    CX : 2
    Deallocate : 3
    Measure : 3
    Rx(9.424777960769) : 3
    Ry(1.570796326795) : 3

Max. width (number of qubits) : 3.
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç»Ÿè®¡ä¸­çš„&lt;span class=&quot;math inline&quot;&gt;\(R_x,R_y,CX\)&lt;/span&gt;çš„é—¨çš„æ•°é‡ä¸ä¸Šé¢è¾“å‡ºçš„ç»“æœæ˜¯ä¿æŒä¸€è‡´çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„ç¤ºä¾‹åˆ°è¿™é‡Œå°±æˆåŠŸå®Œæˆæ¼”ç¤ºã€‚&lt;/p&gt;

&lt;p&gt;è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ä»‹ç»å¼€æºé‡å­è®¡ç®—ç¼–ç¨‹æ¡†æ¶ProjectQçš„ä¸€äº›å¸¸è§„ä½¿ç”¨æ–¹æ³•ï¼Œæ¥è®²è§£äº†å¦‚ä½•ä½¿ç”¨ç¨‹åºæ¥ç¼–è¯‘å’Œç”Ÿæˆé‡å­çº¿è·¯ï¼Œä»¥åŠå°†è¯¥é‡å­çº¿è·¯ä½œä¸ºå­—ç¬¦ä¸²æˆ–è€…Latexæ ¼å¼ä»£ç è¾“å‡ºï¼Œè¿™åŒæ—¶ä¹Ÿä½¿å¾—æˆ‘ä»¬å¯ä»¥é€šè¿‡è¾“å‡ºç»“æœæ¥ç»Ÿè®¡é‡å­è®¡ç®—çš„èµ„æºï¼Œä»¥ç”¨äºé¢„æµ‹åœ¨å¤§è§„æ¨¡åœºæ™¯ä¸‹æ‰€éœ€è¦çš„å¤§è‡´çš„é‡å­æ¯”ç‰¹æ•°ä»¥åŠé—¨æ“ä½œæ•°é‡(æˆ–ç”¨é‡å­çº¿è·¯æ·±åº¦æ¥è¡¡é‡)çš„é‡çº§ã€‚è¿™ç§ç¼–è¯‘çš„æ‰‹æ®µå’Œèµ„æºä¼°è®¡çš„æ–¹æ³•ï¼Œåœ¨å·¥ç¨‹å’Œç§‘å­¦ç ”ç©¶ä¸Šéƒ½æœ‰è¾ƒå¤§çš„æ„ä¹‰ã€‚&lt;/p&gt;

&lt;p&gt;æœ¬æ–‡é¦–å‘é“¾æ¥ä¸ºï¼š&lt;a href=&quot;https://www.cnblogs.com/dechinphy/p/circuit.html&quot; target=&quot;_blank&quot;&gt;https://www.cnblogs.com/dechinphy/p/circuit.html&lt;/a&gt;&lt;br/&gt;ä½œè€…IDï¼šDechinPhy&lt;br/&gt;æ›´å¤šåŸè‘—æ–‡ç« è¯·å‚è€ƒï¼š&lt;a href=&quot;https://www.cnblogs.com/dechinphy/&quot; target=&quot;_blank&quot;&gt;https://www.cnblogs.com/dechinphy/&lt;/a&gt;&lt;/p&gt;

&lt;ol&gt;&lt;li&gt;&lt;a href=&quot;https://github.com/ProjectQ-Framework/ProjectQ&quot; target=&quot;_blank&quot;&gt;https://github.com/ProjectQ-Framework/ProjectQ&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/div&gt;</description>
<pubDate>Sun, 07 Feb 2021 15:21:00 +0000</pubDate>
<dc:creator>é™†è¨€å›</dc:creator>
<og:description>é€šè¿‡ä½¿ç”¨å¼€æºé‡å­è®¡ç®—ç¼–ç¨‹æ¡†æ¶ProjectQï¼Œæˆ‘ä»¬å¯ä»¥ç¼–è¯‘å’Œç”Ÿæˆé‡å­çº¿è·¯ï¼Œå¹¶å°†é‡å­çº¿è·¯è¾“å‡ºä¸ºå­—ç¬¦ä¸²æˆ–è€…latexä»£ç æ ¼å¼ã€‚æ ¹æ®å¾—åˆ°çš„çº¿è·¯è¾“å‡ºï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¯¹ç›¸åº”é‡å­ç®—æ³•çš„å®ç°è¿›è¡Œèµ„æºä¼°è®¡ï¼Œå¯¹äºé‡å­ç®—æ³•çš„</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/dechinphy/p/circuit.html</dc:identifier>
</item>
<item>
<title>QTä¸²å£åŠ©æ‰‹ï¼ˆäº”ï¼‰ï¼šæ–‡ä»¶æ“ä½œ - zzssdd2</title>
<link>http://www.cnblogs.com/zzssdd2/p/14387107.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/zzssdd2/p/14387107.html</guid>
<description>&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;&lt;strong&gt;ä½œè€…ï¼š&lt;/strong&gt;zzssdd2&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;E-mailï¼š&lt;/strong&gt;zzssdd2@foxmail.com&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å¼€å‘ç¯å¢ƒï¼š&lt;strong&gt;Qt5.12.10 + MinGW&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åŠŸèƒ½&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;&lt;li&gt;æ–‡ä»¶çš„å‘é€&lt;/li&gt;
&lt;li&gt;æ•°æ®çš„ä¿å­˜&lt;/li&gt;
&lt;/ul&gt;&lt;blockquote&gt;
&lt;p&gt;çŸ¥è¯†ç‚¹&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;QFile&lt;/code&gt;ç±»çš„ä½¿ç”¨&lt;/li&gt;
&lt;li&gt;&lt;code&gt;QTimer&lt;/code&gt;ç±»çš„ä½¿ç”¨&lt;/li&gt;
&lt;li&gt;æ–‡æœ¬çš„è½¬ç ä¸ç¼–ç è¯†åˆ«&lt;/li&gt;
&lt;li&gt;&lt;code&gt;QPushButton&lt;/code&gt;ã€&lt;code&gt;QProgressBar&lt;/code&gt;æ§ä»¶çš„ä½¿ç”¨&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2193174/202102/2193174-20210207230758495-4911234.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;

&lt;p&gt;æœ¬ç« åŠŸèƒ½ä¸»è¦åŒ…å«ä¸¤ä¸ªæ–¹é¢ï¼Œä¸€æ˜¯é€šè¿‡ä¸²å£å‘é€é€‰å®šçš„æ–‡æœ¬æ–‡ä»¶ï¼ŒäºŒæ˜¯å°†æ¥æ”¶çš„æ•°æ®ä¿å­˜ä¸ºæœ¬åœ°æ–‡æœ¬æ–‡ä»¶ã€‚æœ€åè¿˜æœ‰å¯¹&lt;a href=&quot;https://www.cnblogs.com/zzssdd2/p/14319615.html&quot; target=&quot;_blank&quot;&gt;ã€ŠQTä¸²å£åŠ©æ‰‹ï¼ˆä¸‰ï¼‰ï¼šæ•°æ®æ¥æ”¶ã€‹&lt;/a&gt;ç« èŠ‚å†…å®¹è¿›è¡Œä¸€ä¸ªè¡¥å……æ‰©å±•ã€‚&lt;/p&gt;
&lt;h2 id=&quot;21ã€æ–‡ä»¶æ‰“å¼€&quot;&gt;2.1ã€æ–‡ä»¶æ‰“å¼€&lt;/h2&gt;
&lt;p&gt;å½“&lt;code&gt;é€‰æ‹©æ–‡ä»¶&lt;/code&gt;æŒ‰é’®ç‚¹å‡»åï¼Œè§¦å‘ç‚¹å‡»ä¿¡å·å¯¹åº”çš„æ§½å‡½æ•°ï¼Œåœ¨æ§½å‡½æ•°ä¸­è¿›è¡Œæ–‡ä»¶çš„æ‰“å¼€ä¸è¯»å–ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c++&quot;&gt;/*é€‰æ‹©å¹¶æ‰“å¼€æ–‡ä»¶*/
QString curPath = QDir::currentPath();  //ç³»ç»Ÿå½“å‰ç›®å½•
QString dlgTitle = &quot;æ‰“å¼€æ–‡ä»¶&quot;;  //å¯¹è¯æ¡†æ ‡é¢˜
QString filter = &quot;æ–‡æœ¬æ–‡ä»¶(*.txt);;äºŒè¿›åˆ¶æ–‡ä»¶(*.bin *.dat);;æ‰€æœ‰æ–‡ä»¶(*.*)&quot;; //æ–‡ä»¶è¿‡æ»¤å™¨
QString filepath = QFileDialog::getOpenFileName(this,dlgTitle,curPath,filter);
QFileInfo fileinfo(filepath);

if (filepath.isEmpty())
{
    QMessageBox::warning(this,&quot;è­¦å‘Š&quot;,&quot;æ–‡ä»¶ä¸ºç©º&quot;);
    return;
}
//æ–‡ä»¶è·¯å¾„æ˜¾ç¤ºåˆ°å‘é€æ¡†
ui-&amp;gt;Send_TextEdit-&amp;gt;clear();
ui-&amp;gt;Send_TextEdit-&amp;gt;appendPlainText(filepath);

QFile file(filepath);
if (!file.exists())
{
    QMessageBox::warning(this,&quot;è­¦å‘Š&quot;,&quot;æ–‡ä»¶ä¸å­˜åœ¨&quot;);
    return;
}
if (!file.open(QIODevice::ReadOnly))
{
    QMessageBox::warning(this,&quot;è­¦å‘Š&quot;,&quot;æ–‡ä»¶æ‰“å¼€å¤±è´¥&quot;);
    return;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;22ã€ç¼–ç åˆ¤æ–­&quot;&gt;2.2ã€ç¼–ç åˆ¤æ–­&lt;/h2&gt;
&lt;p&gt;å› ä¸ºåº”ç”¨ç¨‹åºé»˜è®¤ä½¿ç”¨çš„ç¼–ç ä¸º&lt;em&gt;UTF-8&lt;/em&gt;ï¼Œå¦‚æœæ‰“å¼€&lt;em&gt;GBK&lt;/em&gt;æ ¼å¼ç¼–ç çš„æ–‡ä»¶å°±ä¼šä¹±ç ï¼Œæ‰€ä»¥éœ€è¦åˆ¤æ–­æ–‡ä»¶çš„ç¼–ç ï¼Œå¦‚æœä¸æ˜¯UTF-8åˆ™éœ€è¦å¯¹æ–‡ä»¶è¿›è¡Œç¼–ç è½¬æ¢ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c++&quot;&gt;/* è®¾ç½®åº”ç”¨ç¨‹åºçš„ç¼–ç è§£ç å™¨ */
QTextCodec *codec = QTextCodec::codecForName(&quot;UTF-8&quot;);
QTextCodec::setCodecForLocale(codec);
&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote&gt;
&lt;ul readability=&quot;5&quot;&gt;&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;[static] QTextCodec *QTextCodec::codecForName(const char *name)&lt;/p&gt;
&lt;p&gt;Searches all installed QTextCodec objects and returns the one which best matches &lt;em&gt;name&lt;/em&gt;; the match is case-insensitive. Returns 0 if no codec matching the name &lt;em&gt;name&lt;/em&gt; could be found.&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;8&quot;&gt;
&lt;p&gt;[static] void QTextCodec::setCodecForLocale(QTextCodec **c*)&lt;/p&gt;
&lt;p&gt;Set the codec to &lt;em&gt;c&lt;/em&gt;; this will be returned by codecForLocale(). If &lt;em&gt;c&lt;/em&gt; is a null pointer, the codec is reset to the default.&lt;/p&gt;
&lt;p&gt;This might be needed for some applications that want to use their own mechanism for setting the locale.&lt;/p&gt;
&lt;p&gt;Warning: This function is not reentrant.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/blockquote&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c++&quot;&gt;/* åˆ¤æ–­ç¼–ç  */
QTextCodec::ConverterState state;
QTextCodec *codec = QTextCodec::codecForName(&quot;UTF-8&quot;);
FileText = codec-&amp;gt;toUnicode(data.constData(),data.size(),&amp;amp;state);
//è‹¥æœ‰æ— æ•ˆå­—ç¬¦åˆ™æ˜¯GBKç¼–ç 
if (state.invalidChars &amp;gt; 0) 
{
    //è½¬ç åè¿”å›
    FileText = QTextCodec::codecForName(&quot;GBK&quot;)-&amp;gt;toUnicode(data);
}
else
{
    FileText =  data;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯¹æ–‡ä»¶è¿›è¡Œä¸Šè¿°çš„å¤„ç†åï¼Œå¦‚æœæ˜¯GBKç¼–ç åˆ™ä¹Ÿèƒ½å¤Ÿæ­£ç¡®çš„è¯»å–äº†ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul readability=&quot;5&quot;&gt;&lt;li readability=&quot;8&quot;&gt;
&lt;p&gt;QString QTextCodec::toUnicode(const char *&lt;em&gt;input&lt;/em&gt;, int &lt;em&gt;size&lt;/em&gt;, QTextCodec::ConverterState *&lt;em&gt;state&lt;/em&gt; = nullptr) const&lt;/p&gt;
&lt;p&gt;Converts the first &lt;em&gt;size&lt;/em&gt; characters from the &lt;em&gt;input&lt;/em&gt; from the encoding of this codec to Unicode, and returns the result in a QString.&lt;/p&gt;
&lt;p&gt;The &lt;em&gt;state&lt;/em&gt; of the convertor used is updated.&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;QString QTextCodec::toUnicode(const QByteArray &amp;amp;&lt;em&gt;a&lt;/em&gt;) const&lt;/p&gt;
&lt;p&gt;Converts &lt;em&gt;a&lt;/em&gt; from the encoding of this codec to Unicode, and returns the result in a QString.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2193174/202102/2193174-20210207230717670-1399417024.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;23ã€æ–‡ä»¶è¯»å–&quot;&gt;2.3ã€æ–‡ä»¶è¯»å–&lt;/h2&gt;
&lt;p&gt;æ–‡ä»¶æ‰“å¼€åï¼Œéœ€è¦å¯¹æ–‡ä»¶ç±»å‹è¿›è¡Œåˆ¤æ–­ï¼Œç„¶åè¿›è¡Œæ–‡ä»¶æ•°æ®çš„è¯»å–ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c++&quot;&gt;/*åˆ¤æ–­æ–‡ä»¶ç±»å‹*/
int type = 0;
QMimeDatabase db;
QMimeType mime = db.mimeTypeForFile(filepath);
if (mime.name().startsWith(&quot;text/&quot;)) 
{
    type = 1;   //æ–‡æœ¬æ–‡ä»¶
} 
else if (mime.name().startsWith(&quot;application/&quot;)) 
{
    type = 2;   //äºŒè¿›åˆ¶æ–‡ä»¶
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote readability=&quot;14&quot;&gt;
&lt;p&gt;QMimeType QMimeDatabase::mimeTypeForFile(const QString&amp;amp;&lt;em&gt;fileName&lt;/em&gt;, QMimeDatabase::MatchMode &lt;em&gt;mode&lt;/em&gt; = MatchDefault) const&lt;/p&gt;
&lt;p&gt;Returns a MIME type for the file named &lt;em&gt;fileName&lt;/em&gt; using &lt;em&gt;mode&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;This is an overloaded function.&lt;/p&gt;
&lt;p&gt;QMimeType ç±»æè¿°æ–‡ä»¶æˆ–æ•°æ®çš„ç±»å‹ï¼Œç”± MIME ç±»å‹å­—ç¬¦ä¸²è¡¨ç¤ºï¼Œè·å–åˆ°æ–‡ä»¶ç±»å‹åæ¥ä¸‹æ¥å°±çŸ¥é“åº”è¯¥ä½¿ç”¨ä»€ä¹ˆæ–¹æ³•è¯»å–æ–‡ä»¶å†…å®¹äº†ã€‚å¸¸è§æ–‡ä»¶ç±»å‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;æè¿°(startsWith)&lt;/th&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;ç¤ºä¾‹&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody readability=&quot;13.5&quot;&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td&gt;text&lt;/td&gt;
&lt;td&gt;æ™®é€šæ–‡æœ¬&lt;/td&gt;
&lt;td&gt;text/plain, text/html, text/css, text/javascript&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;8&quot;&gt;&lt;td&gt;image&lt;/td&gt;
&lt;td&gt;å›¾åƒæ–‡ä»¶(åŒ…å«åŠ¨æ€gif)&lt;/td&gt;
&lt;td&gt;image/gif, image/png, image/jpeg, image/bmp, image/webp&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td&gt;audio&lt;/td&gt;
&lt;td&gt;éŸ³é¢‘æ–‡ä»¶&lt;/td&gt;
&lt;td&gt;audio/wav, audio/mpeg, audio/midi, audio/webm, audio/ogg&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td&gt;video&lt;/td&gt;
&lt;td&gt;è§†é¢‘æ–‡ä»¶&lt;/td&gt;
&lt;td&gt;video/mp4, video/x-flv, video/webm, video/ogg&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td&gt;application&lt;/td&gt;
&lt;td&gt;äºŒè¿›åˆ¶æ•°æ®&lt;/td&gt;
&lt;td&gt;application/xml, application/pdf&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/blockquote&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c++&quot;&gt;/*è¯»å–æ–‡ä»¶*/
switch(type)
{
    case 1:
    {
        //QIODeviceè¯»å–æ™®é€šæ–‡æœ¬
        QByteArray data = file.readAll();
        file.close();
        if (data.isEmpty())
        {
            QMessageBox::information(this, &quot;æç¤º&quot;, &quot;æ–‡ä»¶å†…å®¹ç©º&quot;);
            return;
        }
        /* åˆ¤æ–­ç¼–ç  */
    }
    break;
    case 2:
    {
        int filelen = fileinfo.size();
        QVector&amp;lt;char&amp;gt; cBuf(filelen);//å‚¨å­˜è¯»å‡ºæ•°æ®
        //ä½¿ç”¨QDataStreamè¯»å–äºŒè¿›åˆ¶æ–‡ä»¶
        QDataStream datain(&amp;amp;file);
        datain.readRawData(&amp;amp;cBuf[0],filelen);
        file.close();
        //charæ•°ç»„è½¬QString
        FileText = QString::fromLocal8Bit(&amp;amp;cBuf[0],filelen);
    }
    break;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote&gt;
&lt;ul readability=&quot;10&quot;&gt;&lt;li readability=&quot;6&quot;&gt;
&lt;p&gt;QByteArray QIODevice::readAll()&lt;/p&gt;
&lt;p&gt;Reads all remaining data from the device, and returns it as a byte array.&lt;/p&gt;
&lt;p&gt;This function has no way of reporting errors; returning an empty QByteArray can mean either that no data was currently available for reading, or that an error occurred.&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;6&quot;&gt;
&lt;p&gt;int QDataStream::readRawData(char **s*, int &lt;em&gt;len&lt;/em&gt;)&lt;/p&gt;
&lt;p&gt;Reads at most &lt;em&gt;len&lt;/em&gt; bytes from the stream into &lt;em&gt;s&lt;/em&gt; and returns the number of bytes read. If an error occurs, this function returns -1.&lt;/p&gt;
&lt;p&gt;The buffer &lt;em&gt;s&lt;/em&gt; must be preallocated. The data is &lt;em&gt;not&lt;/em&gt; decoded.&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;å…³äºQVectorï¼šQVectorç±»æ˜¯ä¸€ä¸ªæä¾›åŠ¨æ€æ•°ç»„çš„æ¨¡æ¿ç±»ã€‚QVectoræ˜¯Qtçš„é€šç”¨å®¹å™¨ç±»ä¹‹ä¸€ï¼Œå®ƒå°†å…¶é¡¹å­˜å‚¨åœ¨ç›¸é‚»çš„å†…å­˜ä½ç½®å¹¶æä¾›åŸºäºç´¢å¼•çš„å¿«é€Ÿè®¿é—®ã€‚ä¾‹å¦‚ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ªå¤§å°ä¸ºfilelençš„charç±»å‹çš„æ•°ç»„ç”¨æ¥å‚¨å­˜è¯»å–çš„äºŒè¿›åˆ¶æ•°æ®ï¼ˆç›¸å¯¹ä¸æ™®é€šæ•°ç»„è€Œè¨€ï¼ŒQVectoræ•°ç»„é¡¹å¯ä»¥åŠ¨æ€å¢åŠ ï¼Œèƒ½å¤Ÿé¿å…è®¿é—®è¶Šç•Œç­‰é—®é¢˜ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;QTä¸­ä½¿ç”¨QTextStreamæˆ–QIODeviceç±»è¯»å†™æ™®é€šæ–‡æœ¬æ–‡ä»¶ï¼Œä½¿ç”¨QDataStreamç±»è¯»å†™äºŒè¿›åˆ¶æ–‡æœ¬æ–‡ä»¶&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/blockquote&gt;
&lt;p&gt;æœ€åå°†è¯»å–åˆ°çš„æ–‡ä»¶å¤§å°ä¿¡æ¯å’Œå†…å®¹æ˜¾ç¤ºåˆ°æ¥æ”¶æ¡†å¹¶æ ‡è®°æœ‰å¾…å‘é€æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c++&quot;&gt;//æ˜¾ç¤ºæ–‡ä»¶å¤§å°ä¿¡æ¯
QString info = QString(&quot;%1%2&quot;).arg(&quot;æ–‡ä»¶å¤§å°ä¸ºï¼š&quot;).arg(FileText.length());
ui-&amp;gt;Receive_TextEdit-&amp;gt;clear();
ui-&amp;gt;Receive_TextEdit-&amp;gt;append(info);
//æ˜¾ç¤ºæ–‡ä»¶å†…å®¹
if (ui-&amp;gt;HexDisp_checkBox-&amp;gt;isChecked()) 
{
    ui-&amp;gt;Receive_TextEdit-&amp;gt;setPlainText(FileText.toUtf8().toHex(' ').toUpper());
} 
else 
{
    ui-&amp;gt;Receive_TextEdit-&amp;gt;setPlainText(FileText);
}
//è®¾ç½®æ˜¾ç¤ºç„¦ç‚¹åœ¨æœ€é¡¶éƒ¨
ui-&amp;gt;Receive_TextEdit-&amp;gt;moveCursor(QTextCursor::Start,QTextCursor::MoveAnchor);

/*æ ‡è®°æœ‰æ–‡ä»¶å‘é€*/
isSendFile = true;
FrameCount = 0;
ProgressBarValue = 0;
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;24ã€æ–‡ä»¶å‘é€&quot;&gt;2.4ã€æ–‡ä»¶å‘é€&lt;/h2&gt;
&lt;p&gt;æ­¤æ—¶åœ¨æ ‡è®°äº†æœ‰æ–‡ä»¶å‘é€çš„æƒ…å†µä¸‹ï¼Œç‚¹å‡»å‘é€æŒ‰é’®åˆ™æ˜¯å‘é€æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c++&quot;&gt;/*
    å‡½   æ•°ï¼šon_Send_Bt_clicked
    æ   è¿°ï¼šå‘é€æŒ‰é”®ç‚¹å‡»ä¿¡å·æ§½
    è¾“   å…¥ï¼šæ— 
    è¾“   å‡ºï¼šæ— 
*/
void Widget::on_Send_Bt_clicked()
{
    if (isSerialOpen != false)
    {
        if (isSendFile) //å‘é€æ–‡ä»¶æ•°æ®
        {
            if (ui-&amp;gt;Send_Bt-&amp;gt;text() == &quot;å‘é€&quot;) 
            {
                ui-&amp;gt;Send_Bt-&amp;gt;setText(&quot;åœæ­¢&quot;);
                SendFile();
            } 
            else 
            {
                ui-&amp;gt;Send_Bt-&amp;gt;setText(&quot;å‘é€&quot;);
                FileSendTimer-&amp;gt;stop();
            }
        }
        else    //å‘é€å‘é€æ¡†æ•°æ®
        {
            SerialSendData(SendTextEditBa);
        }
    }
    else
    {
        QMessageBox::information(this, &quot;æç¤º&quot;, &quot;ä¸²å£æœªæ‰“å¼€&quot;);
    }
}

/*
    å‡½   æ•°ï¼šSendData
    æ   è¿°ï¼šå®šæ—¶å™¨å‘é€æ–‡ä»¶
    è¾“   å…¥ï¼šæ— 
    è¾“   å‡ºï¼šæ— 
*/
void Widget::SendFile(void)
{
    /*æŒ‰è®¾ç½®å‚æ•°å‘é€*/
    FrameLen = ui-&amp;gt;PackLen_lineEdit-&amp;gt;text().toInt(); // å¸§å¤§å°
    FrameGap = ui-&amp;gt;GapTim_lineEdit-&amp;gt;text().toInt();  // å¸§é—´éš”
    int textlen = Widget::FileText.size();           // æ–‡ä»¶å¤§å°
    if (FrameGap &amp;lt;= 0 || textlen &amp;lt;= FrameLen)
    {
        //æ—¶é—´é—´éš”ä¸º0 æˆ– å¸§å¤§å°â‰¥æ–‡ä»¶å¤§å° åˆ™ç›´æ¥ä¸€æ¬¡å‘é€
        serial-&amp;gt;write(FileText.toUtf8());
        ui-&amp;gt;Send_Bt-&amp;gt;setText(&quot;å‘é€&quot;);
    }
    else
    {
        //æŒ‰è®¾å®šæ—¶é—´å’Œé•¿åº¦å‘é€
        FrameNumber = textlen / FrameLen; // åŒ…æ•°é‡
        LastFrameLen = textlen % FrameLen; // æœ€åä¸€åŒ…æ•°æ®é•¿åº¦
        //è¿›åº¦æ¡æ­¥è¿›å€¼
        if (FrameNumber &amp;gt;= 100) 
        { 
            ProgressBarStep = FrameNumber / 100;
        } 
        else 
        {
            ProgressBarStep = 100 / FrameNumber;
        }
        //è®¾ç½®å®šæ—¶å™¨
        FileSendTimer-&amp;gt;start(FrameGap);
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå°†æ–‡ä»¶æŒ‰ç…§è®¾å®šçš„&lt;code&gt;å¸§å¤§å°&lt;/code&gt;å’Œ&lt;code&gt;å¸§é—´éš”&lt;/code&gt;æ¥å‘é€ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c++&quot;&gt;/*æ–‡ä»¶å¸§å‘é€å®šæ—¶å™¨ä¿¡å·æ§½*/
FileSendTimer = new QTimer(this);
connect(FileSendTimer,SIGNAL(timeout()),this,SLOT(File_TimerSend()));

/*
    å‡½   æ•°ï¼šFile_TimerSend
    æ   è¿°ï¼šå‘é€æ–‡ä»¶å®šæ—¶å™¨æ§½å‡½æ•°
    è¾“   å…¥ï¼šæ— 
    è¾“   å‡ºï¼šæ— 
*/
void Widget::File_TimerSend(void)
{
    if (FrameCount &amp;lt; FrameNumber)
    {
        serial-&amp;gt;write(FileText.mid(FrameCount * FrameLen, FrameLen).toUtf8());
        FrameCount++;
        //æ›´æ–°è¿›åº¦æ¡
        ui-&amp;gt;progressBar-&amp;gt;setValue(ProgressBarValue += ProgressBarStep);
    }
    else
    {
        if (LastFrameLen &amp;gt; 0)
        {
            serial-&amp;gt;write(FileText.mid(FrameCount * FrameLen, LastFrameLen).toUtf8());
            ui-&amp;gt;progressBar-&amp;gt;setValue(100);
        }
        /*å‘é€å®Œæ¯•*/
        FileSendTimer-&amp;gt;stop();
        FrameCount = 0;
        ProgressBarValue = 0;
        FrameNumber = 0;
        LastFrameLen = 0;
        QMessageBox::information(this, &quot;æç¤º&quot;, &quot;å‘é€å®Œæˆ&quot;);
        ui-&amp;gt;progressBar-&amp;gt;setValue(0);
        ui-&amp;gt;Send_Bt-&amp;gt;setText(&quot;å‘é€&quot;);
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote readability=&quot;20&quot;&gt;
&lt;p&gt;QString QString::mid(int &lt;em&gt;position&lt;/em&gt;, int &lt;em&gt;n&lt;/em&gt; = -1) const&lt;/p&gt;
&lt;p&gt;Returns a string that contains &lt;em&gt;n&lt;/em&gt; characters of this string, starting at the specified &lt;em&gt;position&lt;/em&gt; index.&lt;/p&gt;
&lt;p&gt;Returns a null string if the &lt;em&gt;position&lt;/em&gt; index exceeds the length of the string. If there are less than &lt;em&gt;n&lt;/em&gt; characters available in the string starting at the given &lt;em&gt;position&lt;/em&gt;, or if &lt;em&gt;n&lt;/em&gt; is -1 (default), the function returns all characters that are available from the specified &lt;em&gt;position&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Example:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt; QString x = &quot;Nine pineapples&quot;;
 QString y = x.mid(5, 4);            // y == &quot;pine&quot;
 QString z = x.mid(5);               // z == &quot;pineapples&quot;
&lt;/code&gt;
&lt;/pre&gt;&lt;/blockquote&gt;
&lt;h2 id=&quot;25ã€æ•°æ®ä¿å­˜&quot;&gt;2.5ã€æ•°æ®ä¿å­˜&lt;/h2&gt;
&lt;p&gt;å½“&lt;code&gt;ä¿å­˜æ•°æ®&lt;/code&gt;æŒ‰é’®æŒ‰ä¸‹æ—¶ï¼Œå°†æ¥æ”¶æ¡†æ•°æ®æŒ‰æ–‡æœ¬æ–¹å¼è¿›è¡Œä¿å­˜ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c++&quot;&gt;/*
    å‡½   æ•°ï¼šon_SaveData_Button_clicked
    æ   è¿°ï¼šä¿å­˜æ•°æ®æŒ‰é’®ç‚¹å‡»æ§½å‡½æ•°
    è¾“   å…¥ï¼šæ— 
    è¾“   å‡ºï¼šæ— 
*/
void Widget::on_SaveData_Button_clicked()
{
    QString data = ui-&amp;gt;Receive_TextEdit-&amp;gt;toPlainText();

    if (data.isEmpty())
    {
        QMessageBox::information(this, &quot;æç¤º&quot;, &quot;æ•°æ®å†…å®¹ç©º&quot;);
        return;
    }

    QString curPath = QDir::currentPath();            //è·å–ç³»ç»Ÿå½“å‰ç›®å½•
    QString dlgTitle = &quot;ä¿å­˜æ–‡ä»¶&quot;;                     //å¯¹è¯æ¡†æ ‡é¢˜
    QString filter = &quot;æ–‡æœ¬æ–‡ä»¶(*.txt);;æ‰€æœ‰æ–‡ä»¶(*.*)&quot;;  //æ–‡ä»¶è¿‡æ»¤å™¨
    QString filename = QFileDialog::getSaveFileName(this,dlgTitle,curPath,filter);
    if (filename.isEmpty())
    {
        return;
    }
    QFile file(filename);
    if (!file.open(QIODevice::WriteOnly))
    {
        return;
    }

    /*ä¿å­˜æ–‡ä»¶*/
    QTextStream stream(&amp;amp;file);
    stream &amp;lt;&amp;lt; data;
    file.close();
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote readability=&quot;17&quot;&gt;
&lt;p&gt;QTextStream::QTextStream(FILE **fileHandle&lt;em&gt;, QIODevice::OpenMode&lt;/em&gt;openMode* = QIODevice::ReadWrite)&lt;/p&gt;
&lt;p&gt;Constructs a QTextStream that operates on &lt;em&gt;fileHandle&lt;/em&gt;, using &lt;em&gt;openMode&lt;/em&gt; to define the open mode. Internally, a QFile is created to handle the FILE pointer.&lt;/p&gt;
&lt;p&gt;This constructor is useful for working directly with the common FILE based input and output streams: stdin, stdout and stderr. Example:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt; QString str;
 QTextStream in(stdin);
 in &amp;gt;&amp;gt; str;
&lt;/code&gt;
&lt;/pre&gt;&lt;/blockquote&gt;

&lt;p&gt;è¿™é‡Œå¯¹æ¥æ”¶æ¨¡å—çš„åŠŸèƒ½è¿›è¡Œä¸€ä¸ªè¡¥å……ã€‚ä¸Šé¢è¯´äº†åº”ç”¨ç¨‹åºé»˜è®¤ç¼–ç æ˜¯&lt;code&gt;UTF-8&lt;/code&gt;,é‚£ä¹ˆå¦‚æœåœ¨asciiæ˜¾ç¤ºæ¨¡å¼ä¸‹æ”¶åˆ°çš„æ•°æ®æ˜¯&lt;code&gt;GBK&lt;/code&gt;æ ¼å¼çš„ç¼–ç å°±ä¼šé€ æˆæ˜¾ç¤ºä¹±ç ï¼Œæ‰€ä»¥éœ€è¦å¯¹æ¥æ”¶æ•°æ®è¿›è¡Œç¼–ç åˆ¤æ–­ï¼Œå¦‚æœæ˜¯GBKç¼–ç åˆ™è¿›è¡Œè½¬æ¢æ˜¾ç¤ºã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c++&quot;&gt;/*
    å‡½   æ•°ï¼šSerialPortReadyRead_slot
    æ   è¿°ï¼šreadyRead()ä¿¡å·å¯¹åº”çš„æ•°æ®æ¥æ”¶æ§½å‡½æ•°
    è¾“   å…¥ï¼šæ— 
    è¾“   å‡ºï¼šæ— 
*/
void Widget::SerialPortReadyRead_slot()
{
    /*è¯»å–ä¸²å£æ”¶åˆ°çš„æ•°æ®*/
    QByteArray bytedata = serial-&amp;gt;readAll();
    
    //......çœç•¥
    
    if(ui-&amp;gt;HexDisp_checkBox-&amp;gt;isChecked() == false)  //asciiæ˜¾ç¤º
    {
        /* åˆ¤æ–­ç¼–ç  */
        QTextCodec::ConverterState state;
        //è°ƒç”¨utf8è½¬unicodeçš„æ–¹å¼è½¬ç ï¼Œè·å–è½¬æ¢ç»“æœ
        QString asciidata = QTextCodec::codecForName(&quot;UTF-8&quot;)-&amp;gt;toUnicode(bytedata.constData(),bytedata.size(),&amp;amp;state);
        //å­˜åœ¨æ— æ•ˆå­—ç¬¦åˆ™æ˜¯GBKï¼Œè½¬ç åè¿”å›
        if (state.invalidChars &amp;gt; 0) 
        {
            asciidata = QTextCodec::codecForName(&quot;GBK&quot;)-&amp;gt;toUnicode(bytedata);
        } 
        else 
        {
            asciidata = QString(bytedata);
        }
        
        //......çœç•¥
    }
    
    //......çœç•¥
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2193174/202102/2193174-20210207230652512-1992575581.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;

&lt;p&gt;æœ¬ç« ä¸»è¦è®²è§£å¯¹æ–‡ä»¶çš„æ“ä½œã€‚é™¤äº†éœ€è¦äº†è§£åœ¨QTä¸­å¯¹æ–‡ä»¶ç±»çš„å¸¸ç”¨æ“ä½œä¹‹å¤–ï¼Œä¸ªäººè®¤ä¸ºè¿˜æœ‰æ¯”è¾ƒé‡è¦çš„ä¸¤ä¸ªçŸ¥è¯†ç‚¹ï¼š1æ˜¯æ–‡æœ¬ç¼–ç çš„åˆ¤æ–­å’Œè½¬ç å¤„ç†ï¼Œ2æ˜¯å¯¹äºäºŒè¿›åˆ¶æ–‡æœ¬çš„è¯»å–ã€‚&lt;/p&gt;
</description>
<pubDate>Sun, 07 Feb 2021 15:10:00 +0000</pubDate>
<dc:creator>zzssdd2</dc:creator>
<og:description>ä½œè€…ï¼šzzssdd2 E-mailï¼šzzssdd2@foxmail.com ä¸€ã€å‰è¨€ å¼€å‘ç¯å¢ƒï¼šQt5.12.10 + MinGW åŠŸèƒ½ æ–‡ä»¶çš„å‘é€ æ•°æ®çš„ä¿å­˜ çŸ¥è¯†ç‚¹ QFileç±»çš„ä½¿ç”¨ QTime</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/zzssdd2/p/14387107.html</dc:identifier>
</item>
<item>
<title>å¤åˆ¶è¡¨çš„æ–¹æ³• - èŒæ–°J</title>
<link>http://www.cnblogs.com/mengxinJ/p/14387096.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/mengxinJ/p/14387096.html</guid>
<description>&lt;h2&gt;1ã€mysqldump&lt;/h2&gt;
&lt;h3&gt;æ‰§è¡Œè¿‡ç¨‹ï¼š&lt;/h3&gt;
&lt;h4&gt;&lt;span&gt;ä¸€ã€å°†æ•°æ®å¯¼å‡ºä¸º sqlÂ æ–‡ä»¶ã€‚&lt;/span&gt;&lt;/h4&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
mysqldump &lt;span&gt;-&lt;/span&gt;h$host &lt;span&gt;-&lt;/span&gt;P$port &lt;span&gt;-&lt;/span&gt;u$&lt;span&gt;user&lt;/span&gt; &lt;span&gt;--&lt;/span&gt;&lt;span&gt;add-locks=0 --no-create-info --single-transaction  --set-gtid-purged=OFF db1 t --where=&quot;a&amp;gt;900&quot; --result-file=/client_tmp/t.sql&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;å°†æ•°æ®å¯¼å‡ºä¸º sqlÂ æ–‡ä»¶ä¿å­˜ã€‚ä¸Šé¢å‡ ä¸ªå‚æ•°çš„å«ä¹‰åˆ†åˆ«æ˜¯ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;1ã€â€“single-transaction çš„ä½œç”¨æ˜¯ï¼Œåœ¨å¯¼å‡ºæ•°æ®çš„æ—¶å€™ä¸éœ€è¦å¯¹è¡¨ db1.t åŠ è¡¨é”ï¼Œè€Œæ˜¯ä½¿ç”¨ START TRANSACTION WITH CONSISTENT SNAPSHOT çš„æ–¹æ³•ï¼›&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;2ã€â€“add-locks è®¾ç½®ä¸º 0ï¼Œè¡¨ç¤ºåœ¨è¾“å‡ºçš„æ–‡ä»¶ç»“æœé‡Œï¼Œä¸å¢åŠ &quot; LOCK TABLES t WRITE;&quot; ï¼›&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;3ã€â€“no-create-info çš„æ„æ€æ˜¯ï¼Œä¸éœ€è¦å¯¼å‡ºè¡¨ç»“æ„ï¼›&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;4ã€â€“set-gtid-purged=off è¡¨ç¤ºçš„æ˜¯ï¼Œä¸è¾“å‡ºè·Ÿ GTID ç›¸å…³çš„ä¿¡æ¯ï¼›&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;5ã€â€“result-file æŒ‡å®šäº†è¾“å‡ºæ–‡ä»¶çš„è·¯å¾„ï¼Œå…¶ä¸­ client è¡¨ç¤ºç”Ÿæˆçš„æ–‡ä»¶æ˜¯åœ¨å®¢æˆ·ç«¯æœºå™¨ä¸Šçš„ã€‚&lt;/span&gt;&lt;/p&gt;

&lt;h4&gt;&lt;span&gt;äºŒã€æ‰§è¡Œæ–‡ä»¶ï¼Œæ·»åŠ åˆ°è¡¨ä¸­&lt;/span&gt;&lt;/h4&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
mysql &lt;span&gt;-&lt;/span&gt;h127.&lt;span&gt;0.0&lt;/span&gt;.&lt;span&gt;1&lt;/span&gt; &lt;span&gt;-&lt;/span&gt;P13000  &lt;span&gt;-&lt;/span&gt;uroot db2 &lt;span&gt;-&lt;/span&gt;e &quot;source &lt;span&gt;/&lt;/span&gt;client_tmp&lt;span&gt;/&lt;/span&gt;t.sql&quot;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;source å¹¶ä¸æ˜¯ä¸€æ¡ SQL è¯­å¥ï¼Œè€Œæ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯å‘½ä»¤ã€‚ä¹Ÿå°±æ˜¯æœåŠ¡å™¨ç«¯å…·ä½“æ‰§è¡Œçš„æ˜¯æ–‡ä»¶ä¸­çš„ä¸€æ¡æ¡ sqlÂ è¯­å¥ï¼Œæ‰€ä»¥ &lt;strong&gt;&lt;span&gt;binlogÂ è®°å½•çš„éƒ½æ˜¯å…·ä½“çš„ sqlã€‚&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

&lt;h3&gt;ç‰¹ç‚¹&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;1ã€ç”Ÿæˆçš„ sql æ–‡ä»¶ä¿å­˜åœ¨å®¢æˆ·ç«¯&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;2ã€é»˜è®¤ä¿å­˜æ•°æ®æ–¹å¼æ˜¯å¤šä¸ªè®°å½•å¯¹ï¼Œå¦‚ä¸‹é¢æ ¼å¼&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2012006/202102/2012006-20210207211506930-1042161540.png&quot; alt=&quot;&quot; width=&quot;822&quot; height=&quot;52&quot; loading=&quot;lazy&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å¦‚æœæƒ³è¦ä¿å­˜ä¸ºä¸€æ¡è¯­å¥åªä¿å­˜ä¸€æ¡è®°å½•ï¼Œé‚£ä¹ˆå¯ä»¥åŠ ä¸Šå‚æ•°â€“skip-extended-insertã€‚&lt;/span&gt;&lt;/p&gt;

&lt;h2&gt;2ã€å¯¼å‡º CSV æ–‡ä»¶ï¼ˆæœ€çµæ´»ï¼‰&lt;/h2&gt;
&lt;h3&gt;æ‰§è¡Œè¿‡ç¨‹&lt;/h3&gt;
&lt;h4&gt;&lt;span&gt;&lt;span&gt;ä¸€ã€å¯¼å‡ºä¸º CSVÂ æ–‡ä»¶&lt;/span&gt;&lt;/span&gt;&lt;/h4&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; db1.t &lt;span&gt;where&lt;/span&gt; a&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;900&lt;/span&gt; &lt;span&gt;into&lt;/span&gt; outfile &lt;span&gt;'&lt;/span&gt;&lt;span&gt;/server_tmp/t.csv&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;æ³¨æ„ï¼š&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;1ã€into outfile æŒ‡å®šäº†æ–‡ä»¶çš„ç”Ÿæˆä½ç½®ï¼ˆ/server_tmp/ï¼‰ï¼Œè¿™ä¸ªä½ç½®å¿…é¡»å—å‚æ•° secure_file_priv çš„é™åˆ¶ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å‚æ•° secure_file_priv çš„å¯é€‰å€¼å’Œä½œç”¨åˆ†åˆ«æ˜¯ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€1ï¼‰å¦‚æœè®¾ç½®ä¸º emptyï¼Œè¡¨ç¤ºä¸é™åˆ¶æ–‡ä»¶ç”Ÿæˆçš„ä½ç½®ï¼Œè¿™æ˜¯ä¸å®‰å…¨çš„è®¾ç½®ï¼›&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€2ï¼‰å¦‚æœè®¾ç½®ä¸ºä¸€ä¸ªè¡¨ç¤ºè·¯å¾„çš„å­—ç¬¦ä¸²ï¼Œå°±è¦æ±‚ç”Ÿæˆçš„æ–‡ä»¶åªèƒ½æ”¾åœ¨è¿™ä¸ªæŒ‡å®šçš„ç›®å½•ï¼Œæˆ–è€…å®ƒçš„å­ç›®å½•ï¼›&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€3ï¼‰å¦‚æœè®¾ç½®ä¸º NULLï¼Œå°±è¡¨ç¤ºç¦æ­¢åœ¨è¿™ä¸ª MySQL å®ä¾‹ä¸Šæ‰§è¡Œ select â€¦ into outfile æ“ä½œã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;2ã€å¦‚æœåŒä¸€ä¸ªç›®å½•ä¸‹å­˜åœ¨åŒåæ–‡ä»¶ï¼Œå°±ä¼šæŠ¥é”™&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;3ã€ä¸€èˆ¬æƒ…å†µä¸‹ä¸€æ¡è®°å½•å°±å¯¹åº” CSVÂ æ–‡ä»¶ä¸­çš„ä¸€è¡Œï¼Œä½†æ˜¯å¦‚æœæŸä¸ªå­—æ®µå€¼ä¸­æœ‰ &quot;æ¢è¡Œã€åˆ¶è¡¨ç¬¦&quot;Â é‚£ä¹ˆæ–‡ä»¶ä¸­ä¹Ÿä¼šåŒ…å«ï¼Œå¹¶ä¸”ä½¿ç”¨ &quot;\&quot;Â æ¥è½¬ä¹‰ã€‚&lt;/span&gt;&lt;/p&gt;

&lt;h4&gt;&lt;span&gt;äºŒã€å¯¼å…¥æ•°æ®&lt;/span&gt;&lt;/h4&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;load&lt;/span&gt; data infile &lt;span&gt;'&lt;/span&gt;&lt;span&gt;/server_tmp/t.csv&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; &lt;span&gt;into&lt;/span&gt; &lt;span&gt;table&lt;/span&gt; db2.t;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;è¿‡ç¨‹ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;1ã€æ‰“å¼€æ–‡ä»¶ /server_tmp/t.csvï¼Œä»¥åˆ¶è¡¨ç¬¦ (\t) ä½œä¸ºå­—æ®µé—´çš„åˆ†éš”ç¬¦ï¼Œä»¥æ¢è¡Œç¬¦ï¼ˆ\nï¼‰ä½œä¸ºè®°å½•ä¹‹é—´çš„åˆ†éš”ç¬¦ï¼Œè¿›è¡Œæ•°æ®è¯»å–ï¼›&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;2ã€å¯åŠ¨äº‹åŠ¡ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;3ã€åˆ¤æ–­æ¯ä¸€è¡Œçš„å­—æ®µæ•°ä¸è¡¨ db2.t æ˜¯å¦ç›¸åŒï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€1ï¼‰è‹¥ä¸ç›¸åŒï¼Œåˆ™ç›´æ¥æŠ¥é”™ï¼Œäº‹åŠ¡å›æ»šï¼›&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€2ï¼‰è‹¥ç›¸åŒï¼Œåˆ™æ„é€ æˆä¸€è¡Œï¼Œè°ƒç”¨ InnoDB å¼•æ“æ¥å£ï¼Œå†™å…¥åˆ°è¡¨ä¸­ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;4ã€é‡å¤æ­¥éª¤ 3ï¼Œç›´åˆ° /server_tmp/t.csv æ•´ä¸ªæ–‡ä»¶è¯»å…¥å®Œæˆï¼Œæäº¤äº‹åŠ¡ã€‚&lt;/span&gt;&lt;/p&gt;

&lt;h3&gt;ç‰¹ç‚¹&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;1ã€æ–‡ä»¶ä¿å­˜åœ¨æœåŠ¡å™¨ç«¯&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;2ã€å…³äº binlogÂ çš„è®°å½•ï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;ã€€ã€€1ï¼‰ä¸»åº“æ‰§è¡Œå®Œæˆåï¼Œå°† /server_tmp/t.csv æ–‡ä»¶çš„å†…å®¹ç›´æ¥å†™åˆ° binlog æ–‡ä»¶ä¸­ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;ã€€ã€€2ï¼‰å¾€&lt;/span&gt; &lt;span&gt;binlog&lt;/span&gt; &lt;span&gt;æ–‡ä»¶ä¸­å†™å…¥è¯­å¥ &lt;strong&gt;&lt;span&gt;load data local infile â€˜/tmp/SQL_LOAD_MB-1-0â€™ INTO TABLE `db2`.`t`ã€‚&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;ã€€ã€€3ï¼‰æŠŠè¿™ä¸ª binlog æ—¥å¿—ä¼ åˆ°å¤‡åº“ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;ã€€ã€€4ï¼‰å¤‡åº“çš„ apply çº¿ç¨‹åœ¨æ‰§è¡Œè¿™ä¸ªäº‹åŠ¡æ—¥å¿—æ—¶ï¼š&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;ã€€ã€€ã€€ã€€a. å…ˆå°† binlog ä¸­ t.csv æ–‡ä»¶çš„å†…å®¹è¯»å‡ºæ¥ï¼Œå†™å…¥åˆ°æœ¬åœ°ä¸´æ—¶ç›®å½• /tmp/SQL_LOAD_MB-1-0 ä¸­ï¼›&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;ã€€ã€€ã€€ã€€b. å†æ‰§è¡Œ load data è¯­å¥ï¼Œå¾€å¤‡åº“çš„ db2.t è¡¨ä¸­æ’å…¥è·Ÿä¸»åº“ç›¸åŒçš„æ•°æ®ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2012006/202102/2012006-20210207215102645-737686823.png&quot; alt=&quot;&quot; width=&quot;376&quot; height=&quot;165&quot; loading=&quot;lazy&quot;/&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€å…³äº &quot;local&quot;ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€ã€€ã€€1ï¼‰ä¸åŠ â€œlocalâ€ï¼Œæ˜¯è¯»å–æœåŠ¡ç«¯çš„æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å¿…é¡»åœ¨ secure_file_priv æŒ‡å®šçš„ç›®å½•æˆ–å­ç›®å½•ä¸‹ï¼›&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€ã€€ã€€2ï¼‰åŠ ä¸Šâ€œlocalâ€ï¼Œè¯»å–çš„æ˜¯å®¢æˆ·ç«¯çš„æ–‡ä»¶ï¼Œåªè¦ mysql å®¢æˆ·ç«¯æœ‰è®¿é—®è¿™ä¸ªæ–‡ä»¶çš„æƒé™å³å¯ã€‚è¿™æ—¶å€™ï¼ŒMySQL å®¢æˆ·ç«¯ä¼šå…ˆæŠŠæœ¬åœ°æ–‡ä»¶ä¼ ç»™æœåŠ¡ç«¯ï¼ˆå…¶ä»–ä¼šè¯æ¶‰åŠçš„æ“ä½œï¼‰ï¼Œç„¶åæ‰§è¡Œä¸Šè¿°çš„ load data æµç¨‹ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;3ã€ä¸Šé¢çš„å¯¼å‡ºæ“ä½œå¹¶ä¸ä¼šå¯¼å‡ºè¡¨ç»“æ„ï¼Œæ‰€ä»¥ï¼Œå¦‚æœå‘å¯¼å‡ºè¡¨ç»“æ„ï¼Œå¯ä»¥ä½¿ç”¨ mysqldumpÂ æ¥åŒæ—¶å¯¼å‡º CSVÂ å’Œè¡¨ç»“æ„&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
mysqldump &lt;span&gt;-&lt;/span&gt;h$host &lt;span&gt;-&lt;/span&gt;P$port &lt;span&gt;-&lt;/span&gt;u$&lt;span&gt;user&lt;/span&gt; &lt;span&gt;-&lt;/span&gt;&lt;span&gt;-single-transaction  --set-gtid-purged=OFF db1 t --where=&quot;a&amp;gt;900&quot; --tab=$secure_file_priv&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;ä¼šåœ¨$secure_file_priv å®šä¹‰çš„ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ª t.sql æ–‡ä»¶ä¿å­˜å»ºè¡¨è¯­å¥ï¼ŒåŒæ—¶åˆ›å»ºä¸€ä¸ª t.txt æ–‡ä»¶ä¿å­˜ CSV æ•°æ®ã€‚&lt;/span&gt;&lt;/p&gt;

&lt;h2&gt;&lt;strong&gt;3ã€ç‰©ç†æ‹·è´ï¼ˆæœ€å¿«ï¼‰&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;åœ¨5.6ä¹‹å‰ï¼Œæƒ³è¦ç›´æ¥æŠŠ.frmå’Œ.ibdæ–‡ä»¶æ‹·è´åˆ°è¦æ‹·è´çš„ç›®å½•ä¸‹æ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºä¸€ä¸ªInnodbè¡¨é™¤äº†éœ€è¦è¿™ä¸¤ä¸ªæ–‡ä»¶è¿˜éœ€è¦åœ¨æ•°æ®å­—å…¸ä¸­æ³¨å†Œã€‚ä½†æ˜¯ä» 5.6Â å¼€å§‹å¯ä»¥è§£å†³è¿™ä¸€é—®é¢˜ï¼Œåœ¨ 5.6Â å¼•å…¥äº†å¯ä¼ è¾“ç©ºé—´ï¼Œå¯ä»¥é€šè¿‡å¯¼å‡º +Â å¯¼å…¥è¡¨ç©ºé—´æ¥å®ç°æ‹·è´&lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;è¿‡ç¨‹&lt;/h3&gt;
&lt;p&gt;&lt;span&gt;å‡è®¾æˆ‘ä»¬ç°åœ¨çš„ç›®æ ‡æ˜¯åœ¨ db1 åº“ä¸‹ï¼Œå¤åˆ¶ä¸€ä¸ªè·Ÿè¡¨ t ç›¸åŒçš„è¡¨ rï¼Œå…·ä½“çš„æ‰§è¡Œæ­¥éª¤å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;1ã€æ‰§è¡Œ create table r like tï¼Œåˆ›å»ºä¸€ä¸ªç›¸åŒè¡¨ç»“æ„çš„ç©ºè¡¨ï¼›&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;2ã€æ‰§è¡Œ alter table r discard tablespaceï¼Œè¿™æ—¶å€™ r.ibd æ–‡ä»¶ä¼šè¢«åˆ é™¤ï¼›&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;3ã€æ‰§è¡Œ flush table t for exportï¼Œè¿™æ—¶å€™ db1 ç›®å½•ä¸‹ä¼šç”Ÿæˆä¸€ä¸ª t.cfg æ–‡ä»¶ï¼›&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;4ã€åœ¨ db1 ç›®å½•ä¸‹æ‰§è¡Œ cp t.cfg r.cfg; cp t.ibd r.ibdï¼›è¿™ä¸¤ä¸ªå‘½ä»¤ï¼ˆè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ‹·è´å¾—åˆ°çš„ä¸¤ä¸ªæ–‡ä»¶ï¼ŒMySQL è¿›ç¨‹è¦æœ‰è¯»å†™æƒé™ï¼‰ï¼›&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;5ã€æ‰§è¡Œ unlock tablesï¼Œè¿™æ—¶å€™ t.cfg æ–‡ä»¶ä¼šè¢«åˆ é™¤ï¼›&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;6ã€æ‰§è¡Œ alter table r import tablespaceï¼Œå°†è¿™ä¸ª r.ibd æ–‡ä»¶ä½œä¸ºè¡¨ r çš„æ–°çš„è¡¨ç©ºé—´ï¼Œç”±äºè¿™ä¸ªæ–‡ä»¶çš„æ•°æ®å†…å®¹å’Œ t.ibd æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥è¡¨ r ä¸­å°±æœ‰äº†å’Œè¡¨ t ç›¸åŒçš„æ•°æ®ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2012006/202102/2012006-20210207225625723-1059167235.png&quot; alt=&quot;&quot; width=&quot;408&quot; height=&quot;314&quot; loading=&quot;lazy&quot;/&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;æ³¨æ„ï¼š&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;1ã€åœ¨ç¬¬ 3 æ­¥æ‰§è¡Œå®Œ flsuh table å‘½ä»¤ä¹‹åï¼Œdb1.t æ•´ä¸ªè¡¨å¤„äºåªè¯»çŠ¶æ€ï¼Œç›´åˆ°æ‰§è¡Œ unlock tables å‘½ä»¤åæ‰é‡Šæ”¾è¯»é”ï¼›&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;2ã€åœ¨æ‰§è¡Œ import tablespace çš„æ—¶å€™ï¼Œä¸ºäº†è®©æ–‡ä»¶é‡Œçš„è¡¨ç©ºé—´ id å’Œæ•°æ®å­—å…¸ä¸­çš„ä¸€è‡´ï¼Œä¼šä¿®æ”¹ r.ibd çš„è¡¨ç©ºé—´ idã€‚è€Œè¿™ä¸ªè¡¨ç©ºé—´ id å­˜åœ¨äºæ¯ä¸€ä¸ªæ•°æ®é¡µä¸­ã€‚å› æ­¤ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æ–‡ä»¶ï¼ˆæ¯”å¦‚ TB çº§åˆ«ï¼‰ï¼Œæ¯ä¸ªæ•°æ®é¡µéƒ½éœ€è¦ä¿®æ”¹ï¼Œæ‰€ä»¥ä½ ä¼šçœ‹åˆ°è¿™ä¸ª import è¯­å¥çš„æ‰§è¡Œæ˜¯éœ€è¦ä¸€äº›æ—¶é—´çš„ã€‚å½“ç„¶ï¼Œå¦‚æœæ˜¯ç›¸æ¯”äºé€»è¾‘å¯¼å…¥çš„æ–¹æ³•ï¼Œimport è¯­å¥çš„è€—æ—¶æ˜¯éå¸¸çŸ­çš„ã€‚&lt;/span&gt;&lt;/p&gt;

&lt;h3&gt;å±€é™&lt;/h3&gt;
&lt;p&gt;&lt;span&gt;1ã€å¿…é¡»æ˜¯å…¨è¡¨æ‹·è´ï¼Œä¸èƒ½æ¡ä»¶æ‹·è´&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;2ã€éœ€è¦åˆ°æœåŠ¡å™¨ä¸Šæ‹·è´æ•°æ®ï¼Œåœ¨ç”¨æˆ·æ— æ³•ç™»å½•æ•°æ®åº“ä¸»æœºçš„åœºæ™¯ä¸‹æ— æ³•ä½¿ç”¨&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;3ã€ç”±äºæ˜¯é€šè¿‡æ‹·è´ç‰©ç†æ–‡ä»¶å®ç°çš„ï¼Œæºè¡¨å’Œç›®æ ‡è¡¨éƒ½æ˜¯ä½¿ç”¨ InnoDB å¼•æ“æ—¶æ‰èƒ½ä½¿ç”¨&lt;/span&gt;&lt;/p&gt;

&lt;h2&gt;&lt;span&gt;æ€»ç»“&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;1ã€å‰ä¸¤ä¸ªéƒ½æ˜¯é€»è¾‘å¤‡ä»½ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥è·¨å¼•æ“ä½¿ç”¨ï¼Œæœ€åä¸€ä¸ªä¸è¡Œ&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;2ã€å‰ä¸¤ä¸ªå¯ä»¥æ¡ä»¶æ‹·è´ï¼Œæœ€åä¸€ä¸ªä¸è¡Œ&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;3ã€ç¬¬äºŒä¸ªåŠŸèƒ½æ˜¯æœ€çµæ´»çš„ï¼Œä½†æ˜¯åœ¨é›†ç¾¤ä»åº“æ¥æ”¶æ—¶ä¼šæ¯”è¾ƒè€—æ—¶ï¼ˆéœ€è¦å…ˆæ‹·è´ CSVÂ æ–‡ä»¶æ•°æ®åˆ°æœ¬åœ°ä¸´æ—¶æ–‡ä»¶ï¼‰ï¼Œæœ€åä¸€ä¸ªæ‰§è¡Œæ•ˆç‡æ˜¯æœ€é«˜çš„ï¼Œä½†æ˜¯ä¸èƒ½è·¨å¼•æ“ï¼Œä¸”åªèƒ½è¿›è¡Œå…¨é‡æ‹·è´ã€‚&lt;/span&gt;&lt;/p&gt;
</description>
<pubDate>Sun, 07 Feb 2021 15:07:00 +0000</pubDate>
<dc:creator>èŒæ–°J</dc:creator>
<og:description>1ã€mysqldump æ‰§è¡Œè¿‡ç¨‹ï¼š ä¸€ã€å°†æ•°æ®å¯¼å‡ºä¸º sql&amp;#160;æ–‡ä»¶ã€‚ mysqldump -h$host -P$port -u$user --add-locks=0 --no-create-</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/mengxinJ/p/14387096.html</dc:identifier>
</item>
<item>
<title>å‘ 3D ä¸–ç•Œè¿ˆå‡ºä¸€å°æ­¥ - äº¬å±±æ¸¸ä¾ </title>
<link>http://www.cnblogs.com/youxia/p/cg003.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/youxia/p/cg003.html</guid>
<description>&lt;h2 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;OpenGL çš„å­¦ä¹ èµ„æ–™å¾ˆå¤šï¼Œä¸€ä¸ªæ˜¯æ¯”è¾ƒè‘—åçš„ OpenGL çº¢å®ä¹¦ã€ŠOpenGL ç¼–ç¨‹æŒ‡å—ã€‹ï¼Œå¯ä»¥åœ¨è¿™é‡Œ &lt;a href=&quot;http://opengl-redbook.com/&quot; target=&quot;_blank&quot;&gt;http://opengl-redbook.com/&lt;/a&gt; ä¸‹è½½è¯¥ä¹¦é…å¥—çš„æºä»£ç ï¼›å¦ä¸€ä¸ªæ˜¯ç½‘ç»œä¸Šçš„åœ¨çº¿æ•™ç¨‹&lt;a href=&quot;https://learnopengl-cn.github.io/&quot; target=&quot;_blank&quot;&gt;LearnOpenGL&lt;/a&gt;ã€‚æ‰€ä»¥ï¼Œæˆ‘è¿™é‡Œå°±ä¸å†å•°å•°å—¦å—¦åœ°ä»‹ç» OpenGL çš„åŸºç¡€çŸ¥è¯†å’Œè®¡ç®—æœºå›¾å½¢å­¦çš„åŸºç¡€çŸ¥è¯†äº†ï¼Œä¸»è¦æ˜¯ç®€å•é˜è¿°ä¸€äº›æˆ‘è‡ªå·±çš„ç†è§£ï¼Œä»¥åŠå†™ä¸€äº›èƒ½è·‘èµ·æ¥ã€èƒ½çœ‹åˆ°æ•ˆæœçš„ä½“éªŒæ€§çš„å°ç¨‹åºã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡å‰ä¸€ç¯‡é˜è¿°ï¼Œå¯ä»¥çœ‹åˆ°åœ¨ Linux ç³»ç»Ÿä¸­å­¦ä¹  OpenGL æ˜¯å¤šä¹ˆçš„æ–¹ä¾¿ã€‚ä½¿ç”¨ GLEW å’Œ GLFW åº“ï¼Œä½¿ç”¨ä¸€è¡Œç®€å•çš„ g++ ç¼–è¯‘å‘½ä»¤ï¼Œç¬¬ä¸€ä¸ªç®€å•çš„ OpenGL ç¨‹åºå°±è·‘èµ·æ¥äº†ã€‚è€Œä¸Šé¢æåˆ°çš„å‚è€ƒèµ„æ–™ï¼Œéƒ½æœ‰è®©åˆå­¦è€…å¤´ç—›çš„åœ°æ–¹ï¼Œæ¯”å¦‚çº¢å®ä¹¦ï¼Œå®ƒç”¨åˆ°äº†æ¯”è¾ƒå°‘è§çš„ gl3w åº“ï¼Œè¿˜ç”¨åˆ°äº† cmake ç³»ç»Ÿï¼Œå³ä½¿ä¸‹è½½äº†å®ƒçš„æºä»£ç ï¼Œç¨‹åºä¹Ÿè·‘ä¸èµ·æ¥ã€‚ç½‘ç»œæ•™ç¨‹&lt;a href=&quot;https://learnopengl-cn.github.io/&quot; target=&quot;_blank&quot;&gt;LearnOpenGL&lt;/a&gt;ä½¿ç”¨çš„æ˜¯ GLADï¼Œåæ­£æˆ‘æ²¡æœ‰ä½¿ç”¨æˆåŠŸè¿‡ã€‚æœ€ç»ˆï¼Œè¿˜æ˜¯ GLEW å’Œ GLFW æ­é…æ˜¯æœ€é¡ºæ‰‹çš„ã€‚&lt;/p&gt;
&lt;p&gt;å‰ä¸€ç¯‡çš„æœ€åï¼Œæˆ‘ä»¬è·‘èµ·æ¥äº†ä¸€ä¸ªç©ºçš„ OpenGL ç¨‹åºï¼Œé‡Œé¢æ²¡æœ‰æ¸²æŸ“ä»»ä½•å†…å®¹ã€‚åœ¨è¿™ä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬å°†å‘ 3D ä¸–ç•Œè¿ˆå‡ºä¸€å°æ­¥ï¼Œäº†è§£ OpenGL æ¸²æŸ“ç®¡çº¿çš„åŸºæœ¬çŸ¥è¯†ï¼Œå¹¶ç»˜åˆ¶ä¸€äº›ç®€å•çš„ 3D å†…å®¹ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æˆ‘æ‰€ç†è§£çš„ç®€å•çš„-3d-å›¾å½¢å­¦çŸ¥è¯†&quot;&gt;æˆ‘æ‰€ç†è§£çš„ç®€å•çš„ 3D å›¾å½¢å­¦çŸ¥è¯†&lt;/h2&gt;
&lt;p&gt;è¦æƒ³æè¿°ä¸€ä¸ª 3D ä¸–ç•Œï¼Œæœ€ç®€å•çš„åŠæ³•å°±æ˜¯æè¿°ä¸€äº›é¡¶ç‚¹çš„åæ ‡ï¼Œï¼ˆå½“ç„¶è¿˜æœ‰å…¶å®ƒçš„åŠæ³•ï¼Œæ¯”å¦‚é€šè¿‡æ•°å­¦å…¬å¼æè¿°çš„æ›²çº¿æ›²é¢ä¹‹ç±»çš„ï¼Œæ‰€ä»¥æˆ‘è¯´æè¿°é¡¶ç‚¹åæ ‡æ˜¯æœ€ç®€å•çš„åŠæ³•ã€‚ï¼‰ï¼Œç„¶åç”±é¡¶ç‚¹è¿æ¥æˆä¸‰è§’å½¢ï¼Œå†ç”±ä¸‰è§’å½¢è¿æ¥æˆé¢ï¼Œæœ€åï¼Œè®¡ç®—æœºå†æŠŠè¿™äº›æ•°æ®å¤„ç†æˆå±å¹•ä¸Šåƒç´ çš„é¢œè‰²ï¼Œæ˜¾ç¤ºæˆæˆ‘ä»¬çœ‹åˆ°çš„å›¾åƒã€‚&lt;/p&gt;
&lt;p&gt;è€Œ OpenGL é€šè¿‡æ¸²æŸ“ç®¡çº¿å®Œæˆè¿™ä¸ªæ“ä½œï¼Œæ¸²æŸ“ç®¡çº¿ç”±è®¸å¤šä¸ªé˜¶æ®µç»„æˆï¼Œé¦–å…ˆï¼ŒOpenGL æŠŠæˆ‘ä»¬ä¼ é€’ç»™å®ƒçš„é¡¶ç‚¹è¿›è¡Œåæ ‡å˜æ¢ï¼ŒæŠŠ 3D çš„åæ ‡å¯¹åº”æˆå±å¹•ä¸Šçš„ç‚¹ï¼Œç„¶åï¼ŒæŠŠè¿™äº›é¡¶ç‚¹ç»„è£…æˆä¸‰è§’å½¢ï¼Œç„¶åï¼Œå¯¹è¿™äº›ä¸‰è§’å½¢å†…éƒ¨çš„åƒç´ è¿›è¡Œæ’å€¼ï¼Œç”Ÿæˆç‰‡å…ƒï¼Œæœ€åï¼Œå¯¹è¿™äº›ç‰‡å…ƒè¿›è¡Œè®¡ç®—ï¼Œä»¥ç”Ÿæˆåœ¨å±å¹•ä¸Šæ˜¾ç¤ºçš„å›¾åƒã€‚å¾ˆæ˜¾ç„¶ï¼Œæ¸²æŸ“ç®¡çº¿éœ€è¦ä½¿ç”¨ GPU è¿›è¡ŒåŠ é€Ÿã€‚&lt;/p&gt;
&lt;p&gt;GPU æ˜¯å…¸å‹çš„ä¼—äººæ‹¾æŸ´ç«ç„°é«˜çš„å¹¶è¡Œè®¡ç®—æ¶æ„ï¼Œå®ƒå¯ä»¥åŒæ—¶å¯¹æˆåƒä¸Šä¸‡çš„é¡¶ç‚¹è¿›è¡Œè®¡ç®—ï¼Œä¹Ÿå¯ä»¥åŒæ—¶å¯¹æˆåƒä¸Šä¸‡çš„ç‰‡å…ƒè¿›è¡Œè®¡ç®—ã€‚æˆ‘çš„è¿™å° XPS 9570ï¼Œä½¿ç”¨çš„æ˜¾å¡æ˜¯ GTX 1050Tiï¼Œå®ƒæœ‰ 768 ä¸ª CUDA æ ¸å¿ƒï¼Œæˆ‘å‡†å¤‡ç­‰æœ‰é’±äº†å†ä¸Šä¸€ä¸ª RTX 3060 æ˜¾å¡çš„ç¬”è®°æœ¬ï¼Œæ®è¯´æœ‰ 3840 ä¸ª CUDA æ ¸å¿ƒï¼Œæ€§èƒ½å¯ä»¥ä¸€ä¸‹å­æå‡ 5 å€ï¼Œ &lt;sup&gt;_&lt;/sup&gt;ã€‚è®©è¿™äº›æ ¸å¿ƒè¿è¡Œä»€ä¹ˆæ ·çš„ä»»åŠ¡ï¼Œæ˜¯ç”±æˆ‘ä»¬æŒ‡å®šçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬è¦å†™ä¸€äº›å°ç¨‹åºï¼Œç„¶åæŠŠè¿™äº›å°ç¨‹åºä¼ é€’ç»™ GPU æ ¸å¿ƒæ‰§è¡Œï¼Œè¿™äº›å°ç¨‹åºå°±å«åš Shaderã€‚åœ¨ OpenGL çš„æ¸²æŸ“ç®¡çº¿ä¸­ï¼Œæ¯ä¸€ä¸ªé˜¶æ®µéƒ½å¯¹åº”ä¸€ä¸ª Shaderã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡ä¸Šé¢çš„æè¿°ï¼Œæˆ‘ä»¬çš„å·¥ä½œæµç¨‹å‘¼ä¹‹æ¬²å‡ºã€‚è¦æƒ³ä½¿ç”¨ OpenGL æ¸²æŸ“ä¸€ç‚¹æœ‰ç”¨çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬éœ€è¦åšä¸‹é¢è¿™äº›å·¥ä½œï¼š1.å‡†å¤‡ä¸€äº›é¡¶ç‚¹æ•°æ®ï¼›2.å†™ä¸€äº› Shader ç¨‹åºï¼Œå¹¶ç»„è£…æˆæ¸²æŸ“ç®¡çº¿ï¼›3.æŠŠé¡¶ç‚¹æ•°æ®ä¼ é€’ç»™ Shaderï¼Œè®© Shader å¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;ç‰¹åˆ«éœ€è¦æ³¨æ„çš„è¿˜æœ‰ä¸¤ç‚¹ï¼š1. é¡¶ç‚¹æ•°æ®å¯ä»¥ä¸ä»…ä»…åªæ˜¯åæ ‡ï¼Œè¿˜å¯ä»¥åŒ…å«æ³•çº¿å‘€ã€é¢œè‰²å€¼å‘€ã€çº¹ç†åæ ‡å‘€ç­‰æ•°æ®ï¼Œè¿˜å¯ä»¥åŒ…å«å…¶å®ƒä»»ä½•æˆ‘ä»¬è‡ªå®šä¹‰çš„æ•°æ®ï¼›2. Shader æ˜¯å¹¶è¡Œæ‰§è¡Œçš„ï¼Œæ¯ä¸ª Shader å¤„ç†ä¸€ä¸ªé¡¶ç‚¹çš„æ•°æ®ï¼Œä¸åŒçš„é¡¶ç‚¹å…¶ä¼ å…¥çš„æ•°æ®æ˜¯ä¸åŒçš„ï¼Œå¯ä»¥è®¤ä¸ºè¿™äº›æ•°æ®æ˜¯é€é¡¶ç‚¹å˜é‡ï¼Œä½†æ˜¯ï¼Œä¹Ÿå¯ä»¥ç»™æ‰€æœ‰çš„ Shader ä¼ é€’ä¸€äº›ç»Ÿä¸€çš„å€¼ï¼Œè¿™äº›å€¼åœ¨æ‰€æœ‰çš„ Shader ä¸­æ˜¯ç›¸åŒçš„ï¼Œç§°ä¹‹ä¸º Uniform å˜é‡ã€‚&lt;/p&gt;
&lt;p&gt;è¿™äº›æ•°æ®ï¼Œé€šè¿‡ä¸€ç³»åˆ—ä¸åŒçš„ OpenGL å‡½æ•°ä¼ é€’ç»™ Shaderã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢å¼€å§‹å®æˆ˜ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å‡†å¤‡é¡¶ç‚¹æ•°æ®&quot;&gt;å‡†å¤‡é¡¶ç‚¹æ•°æ®&lt;/h2&gt;
&lt;p&gt;é¡¶ç‚¹æ•°æ®æ€ä¹ˆæ¥ï¼Œè¿™æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥æ‰‹å†™ä¸‰ä¸ªé¡¶ç‚¹åæ ‡ï¼Œåœ¨å±å¹•ä¸Šæ¸²æŸ“ä¸€ä¸ªä¸‰è§’å½¢ï¼ŒåŒæ ·çš„æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æ‰‹å†™å…«ä¸ªé¡¶ç‚¹åæ ‡åŠå…¶é¢œè‰²å€¼æ¸²æŸ“ä¸€ä¸ªé¢œè‰²ç«‹æ–¹ä½“ã€‚å¯¹äºä¸€äº›æ›´å¤æ‚çš„å‡ ä½•å›¾å½¢ï¼Œæ¯”å¦‚çƒä½“ã€ç”œç”œåœˆè¿™æ ·çš„å‡ ä½•ä½“ï¼Œåªè¦ä¼šä¸€ç‚¹ç®€å•çš„ä¸‰è§’å‡½æ•°ï¼Œæˆ‘ä»¬è‡ªå·±ä¹Ÿå¯ä»¥ç”Ÿæˆå‡ºæ¥ã€‚å¦å¤–ï¼Œå¯¹äºä¸€äº›å¤æ‚çš„ã€ç»å…¸çš„æ¨¡å‹ï¼Œä¹Ÿå¯ä»¥æ‰¾åˆ°å®ƒä»¬çš„å‡ºå¤„ã€‚æ¯”å¦‚çº¢å®ä¹¦ä¸­å°±æœ‰ä¸€ä¸ª armadillo ç¥å…½çš„ 3D æ¨¡å‹ï¼Œå¯ä»¥åœ¨&lt;a href=&quot;https://github.com/openglredbook/examples&quot; target=&quot;_blank&quot;&gt;çº¢å®ä¹¦æºä»£ç çš„githubä»“åº“&lt;/a&gt;ä¸­æ‰¾åˆ°ï¼Œåªä¸è¿‡æ˜¯ä½œè€…è‡ªåˆ›çš„ vbm æ ¼å¼ï¼Œéœ€è¦è‡ªå·±åŠ¨æ‰‹æ‰’ä¸€ä¸‹ã€‚å†æ¯”å¦‚ freeglut ä¸­ç»å…¸çš„èŒ¶å£¶æ¨¡å‹ï¼Œä¹Ÿå¯ä»¥åœ¨&lt;a href=&quot;https://github.com/dcnieho/FreeGLUT&quot; target=&quot;_blank&quot;&gt;freeglutçš„githubä»“åº“&lt;/a&gt;ä¸­æ‰¾åˆ°ï¼Œåªä¸è¿‡å®ƒä½¿ç”¨çš„æ˜¯è´å¡å°”æ›²é¢çš„æè¿°æ–¹å¼ï¼Œè¿™ä¸ªæŠ€æœ¯å«é‡å°±é«˜äº†é‚£ä¹ˆä¸€ç‚¹ç‚¹äº†ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºé¡¶ç‚¹æ•°æ®çš„æ¯ä¸€ä¸ªåˆ†é‡ï¼ˆå¦‚åæ ‡åˆ†é‡ã€æ³•å‘é‡åˆ†é‡ã€çº¹ç†åæ ‡åˆ†é‡ã€é¢œè‰²åˆ†é‡ç­‰ï¼‰ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ä½¿ç”¨ GLM åº“ä¸­çš„vec2ã€vec3ã€vec4æ ¼å¼è¡¨ç¤ºï¼Œç„¶åç»„ç»‡æˆ structï¼Œå†ç„¶åç»„ç»‡æˆ vectorï¼Œè¿™æ˜¯å¾ˆè‡ªç„¶çš„äº‹æƒ…ã€‚å¦‚æœä½¿ç”¨åˆ°é¡¶ç‚¹ç´¢å¼•ï¼Œåˆ™éœ€è¦å†å‡†å¤‡ä¸€ä¸ªç´¢å¼•æ•°ç»„çš„ vectorã€‚å†ç„¶åï¼Œå°±æ˜¯ OpenGL çš„é‚£ä¸€å¥— API äº†ï¼Œåˆ›å»º VAOã€VBOï¼Œå¦‚æœæœ‰ç´¢å¼•ï¼Œå†åˆ›å»º EBOï¼Œç„¶åç»‘å®šå¯¹è±¡ï¼Œåˆ›å»º Bufferï¼Œç»‘å®š Bufferï¼Œå‘ Buffer ä¸­å­˜å…¥æ•°æ®ï¼Œæœ€åä½¿ç”¨ DrawArrays() è¿›è¡Œæ¸²æŸ“ï¼Œå¦‚æœä½¿ç”¨åˆ°äº†é¡¶ç‚¹ç´¢å¼•ï¼Œåˆ™ä½¿ç”¨ DrawElements() è¿›è¡Œæ¸²æŸ“ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™é‡Œï¼Œæˆ‘å…ˆåˆ›å»ºä¸€ä¸ª Mesh ç±»ç”¨æ¥å¯¹ä»¥ä¸Šæµç¨‹è¿›è¡Œä¸€ä¸ªå°è£…ï¼Œå¹¶åˆ›å»º Mesh ç±»çš„å‡ ä¸ªå­ç±»ï¼Œåˆ†åˆ«ç”Ÿæˆå¹³é¢ã€çƒä½“ã€ç”œç”œåœˆè¿™å‡ ç§åŸºæœ¬å›¾å½¢ï¼Œæ¯ä¸ªé¡¶ç‚¹å…·æœ‰åæ ‡ã€æ³•å‘é‡ã€çº¹ç†åæ ‡ï¼ˆåªæœ‰1ç»„çº¹ç†åæ ‡ï¼‰ã€‚æˆ‘æŠŠè¿™äº›ç»“æ„å’Œç±»éƒ½æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶ mesh.hpp ä¸­ï¼Œå†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-C++&quot;&gt;#ifndef __MESH_H__
#define __MESH_H__

#include &amp;lt;glm/glm.hpp&amp;gt;
#include &amp;lt;glm/gtc/matrix_transform.hpp&amp;gt;
#include &amp;lt;vector&amp;gt;
#include &amp;lt;string&amp;gt;
#include &amp;lt;GL/glew.h&amp;gt;

struct Vertex{
    glm::vec4 position;
    glm::vec3 normal;
    glm::vec2 texCoord;
};

class Mesh{
    protected:
        std::vector&amp;lt;Vertex&amp;gt; vertices;
        std::vector&amp;lt;GLuint&amp;gt; indices;

        GLuint VAO, VBO, EBO;
               
    public:
        void generateMesh(int iSlices);

        void setup(){
            glCreateVertexArrays(1, &amp;amp;VAO);
            glBindVertexArray(VAO);
            glCreateBuffers(1, &amp;amp;VBO);
            glBindBuffer(GL_ARRAY_BUFFER, VBO);
            glNamedBufferStorage(VBO, sizeof(Vertex)*vertices.size(), &amp;amp;vertices[0], 0);
            glGenBuffers(1, &amp;amp;EBO);
            glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, EBO);
            glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(float)*indices.size(), &amp;amp;indices[0], GL_STATIC_DRAW);
            glVertexAttribPointer(0, 4, GL_FLOAT, GL_FALSE, sizeof(Vertex), (void*)0);
            glEnableVertexAttribArray(0);
            glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, sizeof(Vertex), (void*)offsetof(Vertex, normal));
            glEnableVertexAttribArray(1);
            glVertexAttribPointer(2, 2, GL_FLOAT, GL_FALSE, sizeof(Vertex), (void*)offsetof(Vertex, texCoord));
            glEnableVertexAttribArray(2);
        }

        void render(){
            glBindVertexArray(VAO);
            glDrawElements(GL_TRIANGLES, indices.size(), GL_UNSIGNED_INT, 0);
        }

};

class Plane: public Mesh{
    public:
        void generateMesh(int iSlices){
            int n = iSlices + 1;
            float s = 2.0f/(float)iSlices;
            Vertex temp_vertex;
            for(int i=0; i&amp;lt;n; i++){
                for(int j=0; j&amp;lt;n; j++){
                    temp_vertex.position = glm::vec4(s*j - 1.0f, s*i - 1.0f, 0.0f, 1.0f);
                    temp_vertex.normal = glm::vec3(0.0f, 0.0f, 1.0f);
                    temp_vertex.texCoord = glm::vec2(1.0f/(float)iSlices * j, 1.0f/(float)iSlices * i);
                    vertices.push_back(temp_vertex);
                }
            }
            
            for(int i=0; i&amp;lt;iSlices; i++){
                for(int j=0; j&amp;lt;iSlices; j++){
                    indices.push_back(i*n + j);
                    indices.push_back((i+1)*n + j+1);
                    indices.push_back((i+1)*n + j);

                    indices.push_back(i*n + j);
                    indices.push_back(i*n + j + 1);
                    indices.push_back((i+1)*n + j+1);
                }
            }
        }
};

class Sphere: public Mesh{
    public:
        void generateMesh(int iSlices){
            int m = iSlices/2 + 1;
            int n = iSlices+1;
            float s = 360.0f/(float)iSlices;
            glm::vec4 up(0.0f, 1.0f, 0.0f, 1.0f);
            glm::mat4 I(1.0f);
            glm::vec3 X(1.0f, 0.0f, 0.0f);
            glm::vec3 Y(0.0f, 1.0f, 0.0f);
            glm::vec3 Z(0.0f, 0.0f, 1.0f);
            Vertex temp_vertex;
            for(int i=0; i&amp;lt;m; i++){
                for(int j=0; j&amp;lt;n; j++){
                    temp_vertex.position = glm::rotate(I, glm::radians(s*j), Y) * glm::rotate(I, glm::radians(s*i), Z) * up;
                    temp_vertex.normal = temp_vertex.position;
                    temp_vertex.texCoord = glm::vec2(1.0f/(float)(n-1) * j, 1.0f/(float)(m-1) * i);
                    vertices.push_back(temp_vertex);
                }
            }
            
            for(int i=0; i&amp;lt;m-1; i++){
                for(int j=0; j&amp;lt;n-1; j++){
                    indices.push_back(i*n + j);
                    indices.push_back((i+1)*n + j);
                    indices.push_back((i+1)*n + j+1);

                    indices.push_back(i*n + j);
                    indices.push_back((i+1)*n + j+1);
                    indices.push_back(i*n + j + 1);                   
                }
            }
        }
};

class Torus: public Mesh{
    public:
        void generateMesh(int iSlices){
            int n = iSlices + 1;
            float s = -360.0f/(float)iSlices;
            glm::vec4 top(0.0f, 0.2f, 0.0f, 1.0f);
            glm::vec4 normal_up(0.0f, 1.0f, 0.0f, 1.0f);
            glm::mat4 I(1.0f);
            glm::vec3 X(1.0f, 0.0f, 0.0f);
            glm::vec3 Y(0.0f, 1.0f, 0.0f);
            glm::vec3 Z(0.0f, 0.0f, 1.0f);
            Vertex temp_vertex;
            for(int i=0; i&amp;lt;n; i++){
                for(int j=0; j&amp;lt;n; j++){
                    temp_vertex.position = glm::rotate(I, glm::radians(s*j), Z) 
                                            * glm::translate(I, glm::vec3(0.0f, 0.8f, 0.0f))
                                            * glm::rotate(I, glm::radians(s*i), X) 
                                            * top;
                    temp_vertex.normal = glm::rotate(I, glm::radians(s*j), Z) 
                                            * glm::rotate(I, glm::radians(s*i), X) 
                                            * normal_up;
                    temp_vertex.texCoord = glm::vec2(1.0f/(float)iSlices * j * 4, 1.0f/(float)iSlices * i);
                    vertices.push_back(temp_vertex);
                }

            }
            for(int i=0; i&amp;lt;iSlices; i++){
                for(int j=0; j&amp;lt;iSlices; j++){
                    indices.push_back(i*n + j);
                    indices.push_back((i+1)*n + j+1);
                    indices.push_back((i+1)*n + j);

                    indices.push_back(i*n + j);
                    indices.push_back(i*n + j + 1);
                    indices.push_back((i+1)*n + j+1);
                }
            }
        }
};

#endif
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;ç¼–è¯‘å’Œè¿æ¥-shader&quot;&gt;ç¼–è¯‘å’Œè¿æ¥ Shader&lt;/h2&gt;
&lt;p&gt;åœ¨ OpenGL ä¸­ç¼–è¯‘å’Œè¿æ¥ Shader çš„æµç¨‹æ˜¯å›ºå®šçš„ï¼Œä¹Ÿå°±æ˜¯é‚£å‡ ä¸ª APIï¼Œè¯¦ç»†çš„çŸ¥è¯†æˆ‘å°±ä¸èµ˜è¿°äº†ï¼ŒåŸºæœ¬æ‰€æœ‰çš„æ•™æéƒ½æœ‰ï¼Œå¯¹äºç®€å•çš„ç¨‹åºæ¥è¯´ï¼Œä¸€ä¸ª Vertex Shader å’Œä¸€ä¸ª Fragment Shader å°±å¯ä»¥äº†ï¼Œè‡³äºå‡ ä½•ç€è‰²å™¨ã€ç»†åˆ†ç€è‰²å™¨è¿™æ ·çš„é«˜çº§çŸ¥è¯†ï¼Œç­‰ç”¨åˆ°çš„æ—¶å€™å†è¯´ã€‚å…³äºç€è‰²å™¨çš„ç¼–è¯‘è¿æ¥ï¼Œæˆ‘ä¹Ÿå†™äº†ä¸€ä¸ª Shader ç±»å¯¹å®ƒè¿›è¡Œäº†å°è£…ï¼Œæ”¾åˆ°äº†æ–‡ä»¶ shader.hpp ä¸­ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-C++&quot;&gt;#ifndef __SHADER_HPP__
#define __SHADER_HPP__

#include &amp;lt;string&amp;gt;
#include &amp;lt;iostream&amp;gt;
#include &amp;lt;fstream&amp;gt;
#include &amp;lt;sstream&amp;gt;
#include &amp;lt;GL/glew.h&amp;gt;
#include &amp;lt;glm/glm.hpp&amp;gt;
#include &amp;lt;glm/gtc/type_ptr.hpp&amp;gt;

struct ShaderInfo{
        GLenum type;
        std::string filename;
        GLuint shader_id;
};

class Shader{
    private:
        GLuint program_id;
    public:
        Shader(){
            program_id = 0;
        }
        
        Shader(ShaderInfo* shaders){
            if(shaders == nullptr){
                program_id = 0;
                return;
            }

            program_id = glCreateProgram();

            ShaderInfo* entry = shaders;
            //åŠ è½½å¹¶ç¼–è¯‘Shader
            while(entry-&amp;gt;type != GL_NONE){
                GLuint shader_id = glCreateShader(entry-&amp;gt;type);
                entry-&amp;gt;shader_id = shader_id;

                std::ifstream fs(entry-&amp;gt;filename);
                std::string content((std::istreambuf_iterator&amp;lt;char&amp;gt;(fs)), std::istreambuf_iterator&amp;lt;char&amp;gt;());
                               
                if(content.empty()){ //åªè¦æœ‰ä¸€ä¸ªShaderæ–‡ä»¶æ‰“ä¸å¼€ï¼Œå°±åˆ æ‰ä¹‹å‰åˆ›å»ºçš„æ‰€æœ‰Shader
                    std::cerr &amp;lt;&amp;lt; &quot;Unable to open file '&quot; &amp;lt;&amp;lt; entry-&amp;gt;filename &amp;lt;&amp;lt; &quot;'&quot; &amp;lt;&amp;lt; std::endl;
                    for ( entry = shaders; entry-&amp;gt;type != GL_NONE; ++entry ) {
                        glDeleteShader( entry-&amp;gt;shader_id );
                        entry-&amp;gt;shader_id = 0;
                    }
                    return;
                }
                const GLchar* source = content.c_str();
                glShaderSource( shader_id, 1, &amp;amp;source, NULL );

                glCompileShader( shader_id );

                GLint compiled;
                glGetShaderiv( shader_id, GL_COMPILE_STATUS, &amp;amp;compiled );
                if ( !compiled ) {//å¦‚æœShaderç¼–è¯‘å¤±è´¥ï¼Œè¾“å‡ºå¤±è´¥åŸå› ï¼Œä¾¿äºè°ƒè¯•
                    GLsizei len;
                    glGetShaderiv( shader_id, GL_INFO_LOG_LENGTH, &amp;amp;len );

                    GLchar* log = new GLchar[len+1];
                    glGetShaderInfoLog( shader_id, len, &amp;amp;len, log );
                    std::cerr &amp;lt;&amp;lt; entry-&amp;gt;filename &amp;lt;&amp;lt; &quot;,&quot; &amp;lt;&amp;lt; &quot;Shader compilation failed: &quot; &amp;lt;&amp;lt; log &amp;lt;&amp;lt; std::endl;
                    delete [] log;

                    //ç¼–è¯‘å¤±è´¥ï¼Œä¹Ÿè¦åˆ é™¤å‰é¢åˆ›å»ºçš„æ‰€æœ‰Shader
                    for ( entry = shaders; entry-&amp;gt;type != GL_NONE; ++entry ) {
                        glDeleteShader( entry-&amp;gt;shader_id );
                        entry-&amp;gt;shader_id = 0;
                    }

                    return ;
                }

                glAttachShader( program_id, shader_id );
        
                ++entry;
                
            }
            
            //è¿›å…¥è¿æ¥é˜¶æ®µ
            glLinkProgram( program_id );

            GLint linked;
            glGetProgramiv( program_id, GL_LINK_STATUS, &amp;amp;linked );
            if ( !linked ) {//å¦‚æœè¿æ¥å¤±è´¥ï¼Œåˆ™è¾“å‡ºè°ƒè¯•ä¿¡æ¯ï¼ŒåŒæ ·åˆ é™¤ä¹‹å‰åˆ›å»ºçš„æ‰€æœ‰Shader
                GLsizei len;
                glGetProgramiv( program_id, GL_INFO_LOG_LENGTH, &amp;amp;len );

                GLchar* log = new GLchar[len+1];
                glGetProgramInfoLog( program_id, len, &amp;amp;len, log );
                std::cerr &amp;lt;&amp;lt; &quot;Shader linking failed: &quot; &amp;lt;&amp;lt; log &amp;lt;&amp;lt; std::endl;
                delete [] log;

                for ( entry = shaders; entry-&amp;gt;type != GL_NONE; ++entry ) {
                    glDeleteShader( entry-&amp;gt;shader_id );
                    entry-&amp;gt;shader_id = 0;
                }
        
                return;
            }
            
        }

        GLuint getId(){
            return program_id;
        }
        
        void setCurrent(){
            glUseProgram(program_id);
        }

        void setModelMatrix(glm::mat4 model_matrix){
            glUniformMatrix4fv(glGetUniformLocation(program_id, &quot;model_matrix&quot;), 1, GL_FALSE, glm::value_ptr(model_matrix));
        }

        void setViewMatrix(glm::mat4 view_matrix){
            glUniformMatrix4fv(glGetUniformLocation(program_id, &quot;view_matrix&quot;), 1, GL_FALSE, glm::value_ptr(view_matrix));
        }

        void setProjectionMatrix(glm::mat4 projection_matrix){
            glUniformMatrix4fv(glGetUniformLocation(program_id, &quot;projection_matrix&quot;), 1, GL_FALSE, glm::value_ptr(projection_matrix));
        }
};

#endif
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¯¥ Shader ç±»è¿˜æä¾›äº†ä¸€äº›å‘ Shader ä¸­ä¼ é€’ Uniform å˜é‡çš„æ–¹æ³•ï¼Œæœ€å¸¸è§çš„ Uniform å˜é‡å°±æ˜¯æ¨¡å‹çŸ©é˜µã€è§†å›¾çŸ©é˜µå’ŒæŠ•å½±çŸ©é˜µã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä¸»ç¨‹åº&quot;&gt;ä¸»ç¨‹åº&lt;/h2&gt;
&lt;p&gt;ä¸»ç¨‹åºæ–‡ä»¶ä¸º SphereWorld.cppï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­ï¼Œåˆ›å»ºä¸€ä¸ª App ç±»çš„å­—ç±»ï¼Œå¹¶åœ¨ init æ–¹æ³•ä¸­åˆ›å»ºä¸€ä¸ªå¹³é¢ã€ä¸€ä¸ªçƒä½“ã€ä¸€ä¸ªç”œç”œåœˆï¼Œå¹¶ä½¿ç”¨æ¨¡å‹çŸ©é˜µåˆ†åˆ«å°†å®ƒä»¬è¿›è¡Œå¹³ç§»ã€ç¼©æ”¾å’Œæ—‹è½¬ï¼Œä»¥æ”¾åˆ°åœºæ™¯ä¸­çš„é€‚å½“ä½ç½®ï¼Œå¦å¤–ï¼Œä½¿ç”¨è§†å›¾çŸ©é˜µå°† Camera æ”¾åˆ°é€‚å½“çš„ä½ç½®ï¼Œæœ€åï¼Œåˆ›å»ºåˆé€‚çš„é€è§†æŠ•å½±çŸ©é˜µï¼Œå°±å¯ä»¥çœ‹åˆ°éå¸¸é€¼çœŸçš„ä¸‰ç»´å›¾åƒäº†ã€‚åœ¨åˆ›å»ºå’Œä½¿ç”¨è¿™äº›çŸ©é˜µçš„æ—¶å€™ï¼ŒGLM ä¸ºæˆ‘ä»¬æä¾›äº†éå¸¸å¤§çš„æ–¹ä¾¿ã€‚ç›®å‰è¿˜æ²¡æœ‰æ¶‰åŠåˆ°å…‰ç…§å’Œçº¹ç†ï¼Œæ•…å°† OpenGL è®¾ç½®ä¸ºçº¿æ¡†æ¨¡å¼ï¼Œè¿™æ ·çœ‹èµ·æ¥æ›´åŠ ç«‹ä½“ã€‚ç¨‹åºä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-C++&quot;&gt;#include &quot;../include/app.hpp&quot;
#include &quot;../include/shader.hpp&quot;
#include &quot;../include/mesh.hpp&quot;
#include &amp;lt;glm/glm.hpp&amp;gt;
#include &amp;lt;glm/gtc/matrix_transform.hpp&amp;gt;

class MyApp : public App {
    private:
        const GLfloat clearColor[4] = {0.2f, 0.3f, 0.3f, 1.0f};
        Plane plane;
        Sphere sphere;
        Torus torus;
        Shader* shaderSphereWorld;

    public:
        void init(){
            
            ShaderInfo shaders[] = {
                {GL_VERTEX_SHADER, &quot;sphereworld.vert&quot;},
                {GL_FRAGMENT_SHADER, &quot;sphereworld.frag&quot;},
                {GL_NONE, &quot;&quot;}
            };
            shaderSphereWorld = new Shader(shaders);
            plane.generateMesh(20);
            plane.setup();

            sphere.generateMesh(60);
            sphere.setup();

            torus.generateMesh(60);
            torus.setup();
            
            glEnable(GL_DEPTH_TEST);
            glDepthFunc(GL_LEQUAL);

            glPolygonMode( GL_FRONT_AND_BACK, GL_LINE );
        }

        void display(){
            glClearBufferfv(GL_COLOR, 0, clearColor);
            glClear(GL_DEPTH_BUFFER_BIT);

            glm::mat4 I(1.0f);
            glm::vec3 X(1.0f, 0.0f, 0.0f);
            glm::vec3 Y(0.0f, 1.0f, 0.0f);
            glm::vec3 Z(0.0f, 0.0f, 1.0f);
            float t = (float)glfwGetTime();

            glm::mat4 view_matrix = glm::translate(I, glm::vec3(0.0f, 0.0f, -5.0f))
                                        * glm::rotate(I, t, Y);

            glm::mat4 projection_matrix = glm::perspective(glm::radians(45.0f), aspect, 1.0f, 100.0f);

            glm::mat4 plane_model_matrix = glm::translate(I, glm::vec3(0.0f, -1.0f, 0.0f)) 
                                        * glm::rotate(I, glm::radians(-90.0f), X)
                                        * glm::scale(I, glm::vec3(50.0f, 50.0f, 50.0f));
            
            shaderSphereWorld-&amp;gt;setModelMatrix(plane_model_matrix);
            shaderSphereWorld-&amp;gt;setViewMatrix(view_matrix);
            shaderSphereWorld-&amp;gt;setProjectionMatrix(projection_matrix);
            shaderSphereWorld-&amp;gt;setCurrent();
            plane.render();

            glm::mat4 sphere_model_matrix = glm::translate(I, glm::vec3(1.0f, 0.3f, 0.0f))
                                                * glm::scale(I, glm::vec3(0.8f, 0.8f, 0.8f));
            shaderSphereWorld-&amp;gt;setModelMatrix(sphere_model_matrix);
            sphere.render();

            glm::mat4 torus_model_matrix = glm::translate(I, glm::vec3(-1.0f, 0.3f, 0.0f))
                                                * glm::rotate(I, glm::radians(90.0f), Y)
                                                * glm::scale(I, glm::vec3(1.3f, 1.3f, 1.3f));
            shaderSphereWorld-&amp;gt;setModelMatrix(torus_model_matrix);
            torus.render();
        }

        ~MyApp(){
            if(shaderSphereWorld != NULL){
                delete shaderSphereWorld;
            }
        }

};


DECLARE_MAIN(MyApp)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬æš‚æ—¶è¿˜æ²¡æœ‰å®ç°åœ¨åœºæ™¯ä¸­æ¼«æ¸¸çš„åŠŸèƒ½ï¼Œæ‰€ä»¥åªèƒ½è®©å®ƒè‡ªå·±æ—‹è½¬ï¼Œä»¥ä¾¿äºæˆ‘ä»¬å…¨æ–¹ä½åœ°è§‚å¯Ÿã€‚åœ¨è¿™é‡Œï¼Œæ˜¯é€šè¿‡ glfwGetTime() è·å–ç¨‹åºè¿è¡Œçš„æ—¶é—´ï¼Œå¹¶æ ¹æ®æ—¶é—´å€¼æ¥ç”Ÿæˆè§†å›¾çŸ©é˜µæ¥å®ç°è¿™ä¸ªåŠŸèƒ½çš„ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç¼–å†™-shader-ç¨‹åº&quot;&gt;ç¼–å†™ Shader ç¨‹åº&lt;/h2&gt;
&lt;p&gt;è¿™é‡Œçš„ Shader ç¨‹åºæ˜¯ sphereworld.vert å’Œ sphereworld.fragï¼Œå‰è€…æ˜¯é¡¶ç‚¹ç€è‰²å™¨ç¨‹åºï¼Œåè€…æ˜¯ç‰‡å…ƒç€è‰²å™¨ç¨‹åºã€‚éƒ½å¾ˆç®€å•ã€‚&lt;/p&gt;
&lt;p&gt;sphereworld.vert æ–‡ä»¶çš„å†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;#version 460

uniform mat4 model_matrix;
uniform mat4 projection_matrix;
uniform mat4 view_matrix;

layout (location = 0) in vec4 vPosition;
layout (location = 1) in vec3 vNormal;
layout (location = 1) in vec2 vTexCoord;

out vec4 fColor;
out vec3 fNormal;
out vec2 fTexCoord;
out vec4 fPosition;

void main(void)
{
    mat4 MV_matrix = view_matrix * model_matrix;
    gl_Position = projection_matrix * view_matrix * model_matrix * vPosition;
    fPosition =  MV_matrix * vPosition;
    fNormal = normalize(transpose(inverse(mat3(MV_matrix))) * vNormal);
    fTexCoord = vTexCoord;
    fColor = vec4(1.0f, 1.0f, 1.0f, 1.0f);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;sphereworld.frag æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;#version 460

layout (location = 0) out vec4 color;

in vec4 fColor;
in vec3 fNormal;
in vec2 fTexCoord;
in vec4 fPosition;

void main(void)
{
    color = fColor;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;æœ€ç»ˆæ•ˆæœ&quot;&gt;æœ€ç»ˆæ•ˆæœ&lt;/h2&gt;
&lt;p&gt;ç¼–è¯‘ï¼Œè¿è¡Œï¼Œå°±å¯ä»¥çœ‹åˆ°æœ€ç»ˆçš„æ•ˆæœäº†ã€‚å¦‚ä¸‹å›¾ï¼š&lt;br/&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/16576/202102/16576-20210207224619084-591364241.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä½¿ç”¨çš„æ˜¯ Visual Studio Codeã€‚ä»æˆªå›¾ä¸­å¯ä»¥çœ‹åˆ°æˆ‘æ‰€æœ‰æ–‡ä»¶çš„ç»„ç»‡æƒ…å†µã€‚å¥½äº†ï¼Œä»Šå¤©å°±åˆ°è¿™é‡Œã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç‰ˆæƒç”³æ˜&quot;&gt;ç‰ˆæƒç”³æ˜&lt;/h2&gt;
&lt;p&gt;è¯¥éšç¬”ç”±äº¬å±±æ¸¸ä¾ åœ¨2021å¹´02æœˆ07æ—¥å‘å¸ƒäºåšå®¢å›­ï¼Œå¼•ç”¨è¯·æ³¨æ˜å‡ºå¤„ï¼Œè½¬è½½æˆ–å‡ºç‰ˆè¯·è”ç³»åšä¸»ã€‚QQé‚®ç®±ï¼š1841079@qq.com&lt;/p&gt;
</description>
<pubDate>Sun, 07 Feb 2021 15:00:00 +0000</pubDate>
<dc:creator>äº¬å±±æ¸¸ä¾ </dc:creator>
<og:description>##å‰è¨€ OpenGL çš„å­¦ä¹ èµ„æ–™å¾ˆå¤šï¼Œä¸€ä¸ªæ˜¯æ¯”è¾ƒè‘—åçš„ OpenGL çº¢å®ä¹¦ã€ŠOpenGL ç¼–ç¨‹æŒ‡å—ã€‹ï¼Œå¯ä»¥åœ¨è¿™é‡Œ http://opengl-redbook.com/ ä¸‹è½½è¯¥ä¹¦é…å¥—çš„æºä»£ç ï¼›å¦ä¸€ä¸ª</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/youxia/p/cg003.html</dc:identifier>
</item>
</channel>
</rss>