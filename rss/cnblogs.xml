<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>åšå®¢å›­_é¦–é¡µ</title>
<link></link>
<description>ä»£ç æ”¹å˜ä¸–ç•Œ</description>
<item>
<title>å¼€å‘ç¯å¢ƒ--Pipenvçš„ä½¿ç”¨ - æš®è‰¯æ–‡ç‹</title>
<link>http://www.cnblogs.com/liangmingshen/p/10174289.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/liangmingshen/p/10174289.html</guid>
<description>&lt;h2&gt;1.Pipenv ä»‹ç»&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;Pipenvæ˜¯åŸºäºpipçš„PythonåŒ…ç®¡ç†å·¥å…·ï¼Œå®ƒå’Œpipçš„ç”¨æ³•éå¸¸ç›¸ä¼¼ï¼Œå¯ä»¥çœ‹åšpipçš„åŠ å¼ºç‰ˆã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;pipenvè§£å†³äº†æ—§çš„pip+virtualenv+requirements.txt çš„å·¥ä½œæ–¹å¼çš„å¼Šç«¯ï¼ˆå› ä¸º&lt;span&gt;requirements.txt éœ€è¦æ‰‹åŠ¨ç»´æŠ¤ï¼Œä½¿ç”¨ä¸Šä¸å¤Ÿçµæ´»&lt;/span&gt;ï¼‰&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å…·ä½“æ¥è¯´ï¼Œå®ƒæ˜¯pipã€Pipfileã€Virtualenvçš„ç»“åˆä½“ï¼Œå®ƒè®©å®‰è£…åŒ…ã€åŒ…ä¾èµ–ç®¡ç†å’Œè™šæ‹Ÿç¯å¢ƒç®¡ç†æ›´åŠ æ–¹ä¾¿ã€‚&lt;/span&gt;&lt;/p&gt;

&lt;h2&gt;2.pipenvä½¿ç”¨&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;ï¼ˆ1ï¼‰å®‰è£…ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
&lt;span&gt;pip install pipenv&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;æ£€æŸ¥æ˜¯å¦åˆ›å»ºæˆåŠŸï¼š&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
&lt;span&gt;pipenv --version&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;ï¼ˆ2ï¼‰åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼š&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
&lt;span&gt;pipenv install
&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;ã€€è¿™ä¼šä¸ºå½“å‰é¡¹ç›®åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå…¶ä¸­åŒ…å«éš”ç¦»çš„Pythonè§£é‡Šå…¶ç¯å¢ƒï¼Œå¹¶ä¸”å®‰è£…pipã€wheelã€setuptoolsç­‰åŸºæœ¬çš„åŒ…ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ï¼ˆ3ï¼‰æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
&lt;span&gt;pipenv shell 
&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;å½“æ‰§è¡Œpipenv shell å‘½ä»¤æ—¶ï¼Œ Pipenv ä¼šè‡ªåŠ¨ä»é¡¹ç›®ç›®å½•ä¸‹çš„.envæ–‡ä»¶ä¸­åŠ è½½ç¯å¢ƒå˜é‡ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ç°åœ¨ä½ ä¼šå‘ç°ï¼Œå‘½ä»¤è¡Œæç¤ºç¬¦å‰é¢æ·»åŠ äº†è™šæ‹Ÿç¯å¢ƒåï¼Œè¿™è¯´æ˜æˆ‘ä»¬å·²ç»æˆåŠŸæ¿€æ´»äº†è™šæ‹Ÿç¯å¢ƒï¼Œç°åœ¨ä½ æ‰€æœ‰çš„å‘½ä»¤éƒ½ä¼šåœ¨è™šæ‹Ÿç¯å¢ƒä¸­æ‰§è¡Œã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ï¼ˆ4ï¼‰é€€å‡ºè™šæ‹Ÿç¯å¢ƒ&lt;/span&gt;&lt;/p&gt;


&lt;h2&gt;3. ç®¡ç†ä¾èµ–åŒ…&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;ä¸€ä¸ªç¨‹åºé€šå¸¸ä¼šä½¿ç”¨å¾ˆå¤šçš„PythonåŒ…ï¼Œå³ä¾èµ–ï¼ˆdependencyï¼‰ã€‚è€Œç¨‹åºä¸ä»…ä»…ä¼šåœ¨ä¸€å°ç”µè„‘ä¸Šè¿è¡Œï¼Œç¨‹åºéƒ¨ç½²ä¸Šçº¿æ—¶ï¼Œéœ€è¦å®‰è£…åˆ°è¿œç¨‹æœåŠ¡å™¨ä¸Šã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å¦‚æœä½ æ‰“ç®—å¼€æºçš„è¯ï¼Œå°±å¯èƒ½ä¼šæœ‰æ›´å¤šçš„äººéœ€è¦åœ¨ä»–ä»¬çš„ç”µè„‘ä¸Šè¿è¡Œã€‚ä¸ºæ­¤ï¼Œä»–ä»¬ä¸å¾—ä¸è®°å½•ä¸‹æ‰€æœ‰çš„ä¾èµ–åŒ…ï¼Œç„¶åä½¿ç”¨pipæˆ–Pipenvå®‰è£…ï¼Œè¿™äº›é‡å¤æ— ç”¨çš„å·¥ä½œå½“ç„¶åº”è¯¥é¿å…ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;è€Œä¸”requirements.txt éœ€è¦æ‰‹åŠ¨ç»´æŠ¤ï¼Œä½¿ç”¨ä¸Šä¸å¤Ÿçµæ´»ã€‚&lt;span&gt;Pipfile&lt;/span&gt;çš„å‡ºç°å°±æ˜¯ä¸ºäº†æ›¿ä»£éš¾äºç®¡ç†çš„requirements.txtã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;åœ¨åˆ›å»ºè™šæ‹Ÿç¯å¢ƒæ—¶ï¼Œå¦‚æœé¡¹ç›®æ ¹ç›®å½•ä¸‹æ²¡æœ‰Pipfileæ–‡ä»¶ï¼Œpipenvè¿˜ä¼šåœ¨é¡¹ç›®çš„æ ¹æ–‡ä»¶å¤¹ç›®å½•ä¸‹åˆ›å»ºPipfileå’ŒPipfile.lockæ–‡ä»¶ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å‰è€…ç”¨æ¥è®°å½•é¡¹ç›®ä¾èµ–åŒ…åˆ—è¡¨ï¼Œåè€…è®°å½•äº†å›ºå®šç‰ˆæœ¬çš„è¯¦ç»†ä¾èµ–åŒ…åˆ—è¡¨ã€‚&lt;span&gt;å½“æˆ‘ä»¬ä½¿ç”¨Pipenv å®‰è£…/åˆ é™¤/æ›´æ–° ä¾èµ–åŒ…æ—¶ï¼ŒäºŒè€…ä¼šè‡ªåŠ¨æ›´æ–°ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1337485/201812/1337485-20181225152519583-796429834.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æŸ¥çœ‹å½“å‰ç¯å¢ƒä¸‹çš„ä¾èµ–æƒ…å†µï¼š&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
&lt;span&gt;pipenv graph
&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;åœ¨è™šæ‹Ÿç¯å¢ƒä¸­æŸ¥çœ‹ä¾èµ–åˆ—è¡¨ï¼š&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;ã€€ã€€&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;å½“éœ€è¦åœ¨ä¸€ä¸ªæ–°çš„ç¯å¢ƒè¿è¡Œç¨‹åºæ—¶&lt;/span&gt;ï¼Œ åªéœ€è¦æ‰§è¡Œ &lt;span&gt;pipenv install&lt;span&gt;Â Â å‘½ä»¤&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;pipenv å°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è™šæ‹Ÿç¯å¢ƒï¼Œç„¶åè‡ªåŠ¨ä»Pipfileä¸­è¯»å–ä¾èµ–å¹¶å®‰è£…åˆ°æ–°åˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒä¸­ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 25 Dec 2018 07:37:00 +0000</pubDate>
<dc:creator>æš®è‰¯æ–‡ç‹</dc:creator>
<og:description>1.Pipenv ä»‹ç» Pipenvæ˜¯åŸºäºpipçš„PythonåŒ…ç®¡ç†å·¥å…·ï¼Œå®ƒå’Œpipçš„ç”¨æ³•éå¸¸ç›¸ä¼¼ï¼Œå¯ä»¥çœ‹åšpipçš„åŠ å¼ºç‰ˆã€‚ pipenvè§£å†³äº†æ—§çš„pip+virtualenv+requirement</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/liangmingshen/p/10174289.html</dc:identifier>
</item>
<item>
<title>[UWP]ä½¿ç”¨Pickeræ„å»ºåº”ç”¨å†…å›¾ç‰‡å…¬å…±è£å‰ªç»„ä»¶ - HHChaos</title>
<link>http://www.cnblogs.com/hhchaos/p/10174116.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/hhchaos/p/10174116.html</guid>
<description>&lt;p&gt;åœ¨ä¸Šä¸€ç¯‡åšæ–‡ã€Š&lt;a href=&quot;https://www.cnblogs.com/hhchaos/p/10021952.html&quot;&gt;[UWP]å¦‚ä½•å®ç°UWPå¹³å°æœ€ä½³å›¾ç‰‡è£å‰ªæ§ä»¶&lt;/a&gt;ã€‹ä¸­æˆ‘è®²è§£äº†ç¼–å†™ImageCropperæ§ä»¶çš„è¿‡ç¨‹åŠçŸ¥è¯†åˆ†äº«ã€‚åœ¨é‚£ç¯‡æ–‡ç« é‡Œï¼Œæˆ‘å¤§è¨€ä¸æƒ­çš„ç§°å…¶ä¸ºUWPå¹³å°æœ€ä½³å›¾ç‰‡è£å‰ªæ§ä»¶ï¼ˆä¸»è¦æ˜¯æ²¡æœ‰åˆ«çš„ç±»ä¼¼æ§ä»¶æ¥å……å½“å¯¹æ‰‹ğŸ¤£ï¼‰ã€‚å…¶å®å†™åšå®¢æ—¶çš„é‚£ä¸ªç‰ˆæœ¬è¿äº¤äº’åŠ¨ç”»éƒ½è¿˜æ²¡æœ‰ï¼Œè¿œè¿œç§°ä¸ä¸Šâ€œæœ€ä½³â€ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡ï¼Œè¿™ä¸€ä¸ªæœˆæ¥ImageCropperç»è¿‡æ•°æ¬¡è¿­ä»£ï¼Œå®ƒå·²ç»å…·æœ‰éå¸¸æ£’çš„ä½“éªŒäº†ï¼å¦å¤–è¿˜æœ‰ä¸€ä»¶ä»¤äººå…´å¥‹çš„äº‹ï¼Œå®ƒå³å°†åŠ å…¥&lt;a href=&quot;https://github.com/windows-toolkit/WindowsCommunityToolkit&quot;&gt;WindowsCommunityToolkit&lt;/a&gt;ä¸­ï¼ˆPRå·²ç»æ¥è¿‘å°¾å£°ï¼‰ï¼è¿™å°†è®©æ›´å¤šUWPå¼€å‘è€…å¯ä»¥ä½“éªŒå®ƒã€‚&lt;/p&gt;
&lt;p&gt;ä»Šå¤©è¿™ç¯‡åšæ–‡æˆ‘æ¥è®²ä¸‹ImageCropperçš„ä¸€ä¸ªç‰¹æ®Šåº”ç”¨å®ä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;å…ˆæ¥æ€è€ƒä¸€ä¸‹è¿™ä¸ªé—®é¢˜ï¼š&lt;/p&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬çš„åº”ç”¨åªæœ‰ä¸€ä¸ªç•Œé¢éœ€è¦è°ƒç”¨å›¾ç‰‡å‰ªè£ï¼Œé‚£å¾ˆå¥½ï¼Œç›´æ¥åœ¨è¿™ä¸ªé¡µé¢åµŒå…¥ImageCropperæ§ä»¶å°±å¯ä»¥è½»æ¾å®Œæˆäº†ã€‚ä½†æ˜¯ï¼Œå¦‚æœè¿™ä¸ªåº”ç”¨æœ‰å¤šå¤„éœ€è¦è£å‰ªå›¾ç‰‡çš„åœ°æ–¹ï¼ˆè­¬å¦‚è¯´ä¸Šä¼ å›¾ç‰‡ã€ä¿®å‰ªç…§ç‰‡ã€è£å‰ªå¤´åƒ...ï¼‰ï¼Œæˆ‘ä»¬æ˜¯å¦å¯ä»¥ä¸ºè¿™äº›éœ€è¦è£å‰ªå›¾ç‰‡çš„åœ°æ–¹æ„å»ºä¸€ä¸ªå…¬å…±çš„å¯è°ƒç”¨ç»„ä»¶å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;äº‹å®ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©HHChaosToolkitä¸­çš„Pickerç»„ä»¶æ¥å®Œæˆè¿™ä¸€æƒ³æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ä¹‹å‰æˆ‘å†™è¿‡ä¸€ç³»åˆ—å…³äºPickerçš„æ–‡ç« ï¼Œä¸äº†è§£Pickerçš„è¯å»ºè®®å¯ä»¥æŠ½æ—¶é—´é˜…è¯»ï¼š&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆï¼Œæˆ‘ä»¬ä»Šå¤©ä½¿ç”¨Pickerå’ŒImageCropperæ¥ä¸ºåº”ç”¨æ„å»ºä¸€ä¸ªå…¬å…±è£å‰ªç»„ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;å…ˆçœ‹ä¸‹æ•ˆæœå›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1239018/201812/1239018-20181225150910950-1013828668.gif&quot; alt=&quot;ImageCropper&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ&lt;/p&gt;
&lt;h2 id=&quot;é¡¹ç›®ç»“æ„&quot;&gt;é¡¹ç›®ç»“æ„&lt;/h2&gt;
&lt;p&gt;åˆ›å»ºä¸€ä¸ªç©ºç™½UWPåº”ç”¨é¡¹ç›®ï¼Œå¹¶å¼•å…¥äº†HHChaosToolkit.UWPä»¥åŠImageCropper.UWPè¿™ä¸¤ä¸ªNugetåŒ…ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1239018/201812/1239018-20181225144958581-513678201.jpg&quot; alt=&quot;Nuget&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘åœ¨&lt;a href=&quot;https://github.com/HHChaos/HHChaosToolkit&quot;&gt;HHChaosToolkit&lt;/a&gt;é¡¹ç›®é¦–é¡µå†™è¿‡ï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;HHChaosToolkitæ˜¯ä¸€å¥—é€‚ç”¨äºMVVMæ¡†æ¶ä¸‹ä½¿ç”¨çš„å¼¹çª—å±‚ç»„ä»¶åº“ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;HHChaosToolkitå…¶ä¸­åŒ…å«äº†Pickerå¼¹çª—ç»„ä»¶ã€SubWindowså­çª—å£ç»„ä»¶ä»¥åŠè½»é‡çº§MVVMæ¡†æ¶ã€‚æˆ‘ä»¬åœ¨è¿™ä¸ªä¾‹å­ä¸­ä½¿ç”¨åˆ°çš„æ˜¯å®ƒçš„Pickerä»¥åŠMVVMéƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;ImageCropperåˆ™æ˜¯è¿™ä¸ªä¾‹å­ä¸­ä¸»è¦ä¾èµ–çš„åŠŸèƒ½ç»„ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;é¡¹ç›®ç»“æ„å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1239018/201812/1239018-20181225145026907-926765620.jpg&quot; alt=&quot;Solution&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å…¶ä¸­åŒ…å«äº†ä¸¤ä¸ªé¡µé¢ï¼Œ&lt;code&gt;ImageCropperPickerPage&lt;/code&gt;å³æ˜¯è¿™ä¸ªä¾‹å­ä¸­æˆ‘ä»¬è¦æ„å»ºçš„å›¾ç‰‡å…¬å…±è£å‰ªç»„ä»¶ï¼Œ&lt;code&gt;MainPage&lt;/code&gt;ä¸­åŒ…å«äº†è°ƒç”¨ä½¿ç”¨å…¬å…±è£å‰ªç»„ä»¶çš„ç¤ºä¾‹ï¼Œé€»è¾‘ä»£ç å‡åœ¨å…¶å¯¹åº”çš„ViewModelä¸­ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å›¾ç‰‡è£å‰ªpicker&quot;&gt;å›¾ç‰‡è£å‰ªPicker&lt;/h2&gt;
&lt;p&gt;ImageCropperPickerå°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„å›¾ç‰‡å…¬å…±è£å‰ªç»„ä»¶çš„Pickerå®ç°ï¼Œå®ƒå¯ä»¥åœ¨ä»»æ„åœ°æ–¹è°ƒç”¨ï¼ˆæ— è®ºæ˜¯åœ¨Viewè¿˜æ˜¯ViewModelçš„ä»£ç ä¸­ï¼‰ï¼Œä¸”ä¸ä¼šä¸­æ–­å½“å‰çš„æ“ä½œï¼Œå…¶è°ƒç”¨åŸç†å¯ä»¥æŸ¥çœ‹æˆ‘ä¹‹å‰çš„åšæ–‡ã€Š&lt;a href=&quot;https://www.cnblogs.com/hhchaos/p/9961249.html&quot;&gt;[UWP]ä½¿ç”¨Popupæ„å»ºUWP Picker&lt;/a&gt;ã€‹ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªé¡µé¢ä¸­åŒ…å«äº†ImageCropperæ§ä»¶ï¼Œç”¨äºå®ç°å›¾ç‰‡è£å‰ªåŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1239018/201812/1239018-20181225145059138-988304971.jpg&quot; alt=&quot;ImageCropper&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç•Œé¢å¸ƒå±€å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre class=&quot;xaml&quot;&gt;
&lt;code&gt;&amp;lt;Page
    x:Class=&quot;ImageCropperPicker.Views.ImageCropperPickerPage&quot;
    xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;
    xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;
    xmlns:cropper=&quot;using:ImageCropper.UWP&quot;
    xmlns:d=&quot;http://schemas.microsoft.com/expression/blend/2008&quot;
    xmlns:local=&quot;using:ImageCropperPicker.Views&quot;
    xmlns:mc=&quot;http://schemas.openxmlformats.org/markup-compatibility/2006&quot;
    DataContext=&quot;{Binding ImageCropperPickerViewModel, Source={StaticResource Locator}}&quot;
    RequestedTheme=&quot;Dark&quot;
    mc:Ignorable=&quot;d&quot;&amp;gt;
    &amp;lt;Grid&amp;gt;
        &amp;lt;Grid.ColumnDefinitions&amp;gt;
            &amp;lt;ColumnDefinition /&amp;gt;
            &amp;lt;ColumnDefinition Width=&quot;Auto&quot; /&amp;gt;
        &amp;lt;/Grid.ColumnDefinitions&amp;gt;
        &amp;lt;cropper:ImageCropper
            x:Name=&quot;ImageCropper&quot;
            Padding=&quot;80&quot;
            AspectRatio=&quot;{Binding AspectRatio}&quot;
            Background=&quot;Transparent&quot;
            CircularCrop=&quot;{Binding CircularCrop}&quot;
            Mask=&quot;#af000000&quot;
            SourceImage=&quot;{Binding SourceImage}&quot; /&amp;gt;
        &amp;lt;Grid Grid.Column=&quot;1&quot; Background=&quot;#af000000&quot;&amp;gt;
            &amp;lt;StackPanel Padding=&quot;55&quot; VerticalAlignment=&quot;Center&quot;&amp;gt;
                &amp;lt;AppBarButton
                    Margin=&quot;0,15&quot;
                    Click=&quot;Button_Click&quot;
                    Icon=&quot;Accept&quot;
                    Label=&quot;OK&quot; /&amp;gt;
                &amp;lt;AppBarButton
                    Command=&quot;{Binding ExitCommand}&quot;
                    Foreground=&quot;White&quot;
                    Icon=&quot;Cancel&quot;
                    Label=&quot;Cancel&quot; /&amp;gt;
            &amp;lt;/StackPanel&amp;gt;
        &amp;lt;/Grid&amp;gt;
    &amp;lt;/Grid&amp;gt;
&amp;lt;/Page&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é€»è¾‘å±‚ä»£ç ä¸­ï¼Œæˆ‘ä½¿ç”¨&lt;code&gt;ImageCropperConfig&lt;/code&gt;ç±»æ¥æ¥å—è°ƒç”¨æ–¹ä¼ æ¥çš„å‚æ•°ï¼Œå¹¶åœ¨æ‰“å¼€Pickeræ—¶è¯»å–å‚æ•°ï¼Œåˆå§‹åŒ–Pickerã€‚&lt;/p&gt;
&lt;p&gt;ImageCropperConfigå®šä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre class=&quot;csharp&quot;&gt;
&lt;code&gt;    public class ImageCropperConfig
    {
        public StorageFile ImageFile { get; set; }
        public double AspectRatio { get; set; } = -1;
        public bool CircularCrop { get; set; }
    }&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ImageCropperPickerçš„ViewModelä»£ç ï¼š&lt;/p&gt;
&lt;pre class=&quot;csharp&quot;&gt;
&lt;code&gt;using HHChaosToolkit.UWP.Mvvm;
using ImageCropperPicker.Models;
using System;
using Windows.UI.Xaml.Media.Imaging;
using Windows.UI.Xaml.Navigation;

namespace ImageCropperPicker.ViewModels
{
    public class ImageCropperPickerViewModel : ObjectPickerBase&amp;lt;WriteableBitmap&amp;gt;
    {
        private WriteableBitmap _sourceImage;
        public WriteableBitmap SourceImage
        {
            get =&amp;gt; _sourceImage;
            set =&amp;gt; Set(ref _sourceImage, value);
        }
        private double _aspectRatio;
        public double AspectRatio
        {
            get =&amp;gt; _aspectRatio;
            set =&amp;gt; Set(ref _aspectRatio, value);
        }
        private bool _circularCrop;
        public bool CircularCrop
        {
            get =&amp;gt; _circularCrop;
            set =&amp;gt; Set(ref _circularCrop, value);
        }
        public async override void OnNavigatedTo(NavigationEventArgs e)
        {
            if (e.Parameter is ImageCropperConfig config)
            {
                var writeableBitmap = new WriteableBitmap(1, 1);
                using (var stream = await config.ImageFile.OpenReadAsync())
                {
                    await writeableBitmap.SetSourceAsync(stream);
                }

                SourceImage = writeableBitmap;
                AspectRatio = config.AspectRatio;
                CircularCrop = config.CircularCrop;
            }
            base.OnNavigatedTo(e);
        }
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨è¿™é‡Œï¼Œå®Œæˆè£å‰ªå›¾ç‰‡çš„æ“ä½œæˆ‘æ”¾åœ¨äº†ç•Œé¢ä¸ŠOKæŒ‰é”®çš„åå°ä»£ç ä¸­ï¼ˆå®é™…ä¸Šè¿˜æ˜¯è°ƒç”¨çš„Pickerä¸­çš„æ–¹æ³•ï¼‰ï¼š&lt;/p&gt;
&lt;pre class=&quot;csharp&quot;&gt;
&lt;code&gt;        private async void Button_Click(object sender, RoutedEventArgs e)
        {
            var img = await ImageCropper.GetCroppedBitmapAsync();
            ViewModel?.SetResult(img);
        }&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;åº”ç”¨å†…è°ƒç”¨&quot;&gt;åº”ç”¨å†…è°ƒç”¨&lt;/h2&gt;
&lt;p&gt;è°ƒç”¨æ–¹æ³•éå¸¸çš„ç®€å•ï¼Œç›´æ¥ä½¿ç”¨HHChaosToolkitä¸­çš„&lt;code&gt;ObjectPickerService&lt;/code&gt;æ¥å¯åŠ¨Pickerï¼Œå¹¶ä¸”ç­‰å¾…Pickerè¿”å›ç»“æœå³å¯ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”è¾ƒç‰¹åˆ«çš„æ˜¯ï¼Œåœ¨è¿™é‡Œæˆ‘é€šè¿‡ä½¿ç”¨&lt;code&gt;PickerOpenOption&lt;/code&gt;è®©è£å‰ªå›¾ç‰‡Pickerå¯ä»¥è¦†ç›–åˆ°æ•´ä¸ªåº”ç”¨ç•Œé¢ï¼ŒUIè¡¨ç°çœ‹èµ·æ¥æ›´ä½³ã€‚&lt;/p&gt;
&lt;p&gt;è°ƒç”¨ä»£ç ï¼š&lt;/p&gt;
&lt;pre class=&quot;csharp&quot;&gt;
&lt;code&gt;        private async Task&amp;lt;ImageSource&amp;gt; CropImage(ImageCropperConfig config)
        {
            var startOption = new PickerOpenOption
            {
                VerticalAlignment = VerticalAlignment.Stretch,
                HorizontalAlignment = HorizontalAlignment.Stretch,
            };
            var ret = await ViewModelLocator.Current.ObjectPickerService.PickSingleObjectAsync&amp;lt;WriteableBitmap&amp;gt;(
                typeof(ImageCropperPickerViewModel).FullName, config, startOption);
            if (!ret.Canceled)
            {
                return ret.Result;
            }
            return null;
        }&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ˜¯ä¸æ˜¯çœ‹èµ·æ¥å¾ˆç®€å•ï¼Ÿæ˜¯çš„ï¼Œä¼˜é›…çš„è°ƒç”¨æ–¹å¼å°±åº”è¯¥è¿™ä¹ˆç®€å•ï¼&lt;/p&gt;
&lt;h2 id=&quot;ç»“å°¾&quot;&gt;ç»“å°¾&lt;/h2&gt;
&lt;p&gt;æ­£å¦‚æˆ‘ä¹‹å‰æ‰€è¯´ï¼ŒPickerç»„ä»¶åœ¨å¾ˆå¤šåœ°æ–¹éƒ½å¯ä»¥æ´¾ä¸Šç”¨å¤„ï¼Œæˆ‘ä»¬å‡ ä¹å¯ä»¥ç”¨å®ƒæ¥å®ç°ä¸€åˆ‡UWPè‡ªå®šä¹‰å¼¹å‡ºæ¡†ï¼Œéå¸¸æ¬¢è¿æœ‰ç±»ä¼¼éœ€æ±‚çš„å¼€å‘è€…ä»¬è¯•ç”¨ï¼&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªç¤ºä¾‹é¡¹ç›®å¼€æºåœ¨&lt;a href=&quot;https://github.com/HHChaos/ImageCropperPicker&quot;&gt;Github&lt;/a&gt;ä¸­ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥è‡ªè¡ŒCloneç¼–è¯‘ï¼ŒåŒæ—¶é¡¹ç›®ä¸­çš„ä»£ç è¯·éšæ„äº«ç”¨ï¼Œå–œæ¬¢çš„è¯è¯·ä¸è¦å¿˜è®°Starï¼&lt;/p&gt;
&lt;p&gt;æœ¬ç¯‡åšå®¢åˆ°æ­¤ç»“æŸï¼è°¢è°¢å¤§å®¶é˜…è¯»ï¼&lt;/p&gt;
</description>
<pubDate>Tue, 25 Dec 2018 07:17:00 +0000</pubDate>
<dc:creator>HHChaos</dc:creator>
<og:description>åœ¨ä¸Šä¸€ç¯‡åšæ–‡ã€Š</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/hhchaos/p/10174116.html</dc:identifier>
</item>
<item>
<title>å®ä¾‹ç›´è§‚è§£é‡Šsessionidçš„ä½œç”¨ - æ€ç¼åŒå­¦</title>
<link>http://www.cnblogs.com/lisqiong/p/10172780.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/lisqiong/p/10172780.html</guid>
<description>&lt;p&gt;æœ‰ä¸¤ä¸ªphpé¡µé¢ï¼Œdemo1.phpä¸demo2.phpã€‚å¦‚æœæƒ³è¦åœ¨demo1.phpåˆ›å»ºä¸€ä¸ªsessionéœ€è¦åœ¨çš„demo2.phpæˆ–è€…è¯´å…¶å®ƒé¡µé¢éƒ½å¯ä»¥è·å–åˆ°è®¾ç½®çš„sessionçš„å€¼ï¼Œè¾¾åˆ°ä¼šè¯çš„åŠŸèƒ½ï¼Œæœ‰å‡ ç§å®ç°æ–¹å¼ï¼Ÿ&lt;/p&gt;
&lt;h4 id=&quot;ä¸€æœªå±è”½æµè§ˆå™¨cookie&quot;&gt;ä¸€ã€æœªå±è”½æµè§ˆå™¨cookie&lt;/h4&gt;
&lt;p&gt;demo1.phpä»£ç ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;&amp;lt;?php
session_start();
$sid = session_id();
echo &quot;sessionidï¼š&quot;.$sid.&quot;&amp;lt;br/&amp;gt;&quot;;
$_SESSION['user'] = 'å·´å…«çµ';
$a = $_SESSION['user'];
echo &quot;sessionçš„å€¼ï¼š&quot;.$a.PHP_EOL.&quot;&amp;lt;br/&amp;gt;&quot;;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç»“æœå¦‚ä¸‹ï¼š&lt;br/&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/595183/201812/595183-20181225113428295-830022297.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;demo2.php&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;&amp;lt;?php
session_start();
$sid = session_id();
echo &quot;sessionidï¼š&quot;.$sid.&quot;&amp;lt;br/&amp;gt;&quot;;
echo &quot;sessionçš„å€¼ï¼š&quot;.$_SESSION['user'];&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç»“æœå¦‚ä¸‹ï¼š&lt;br/&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/595183/201812/595183-20181225113441462-1152797309.png&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;æŸ¥çœ‹php.inié…ç½®æˆ‘ä»¬è¿™é‡Œè®¾ç½®sessionå­˜å‚¨æ˜¯åœ¨æœåŠ¡å™¨tmpç›®å½•ä¸‹&quot;&gt;æŸ¥çœ‹php.inié…ç½®æˆ‘ä»¬è¿™é‡Œè®¾ç½®sessionå­˜å‚¨æ˜¯åœ¨æœåŠ¡å™¨/tmpç›®å½•ä¸‹&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/595183/201812/595183-20181225112827577-359592874.png&quot;/&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;é€šè¿‡æŸ¥çœ‹å‘ç°sessionçš„å­˜å‚¨éƒ½æ˜¯ä»¥sessionidåŠ ä¸Šä¸€ä¸²å­—ç¬¦æ„æˆçš„æ–‡ä»¶ï¼Œæˆ‘ä»¬è®¾ç½®çš„sessionçš„å€¼å°±å­˜å‚¨åœ¨è¿™æ ·çš„æ–‡ä»¶å½“ä¸­ã€‚æˆ‘ä»¬å‘ç°è®¾ç½®çš„sessionä¹‹æ‰€ä»¥èƒ½å¤Ÿåœ¨ä¸¤ä¸ªé¡µé¢ä¸­å…±äº«è·å–ï¼Œæ˜¯å› ä¸ºéƒ½å…±åŒæ‹¥æœ‰ä¸€ä¸ªsessionidï¼Œå¹¶ä¸”è¿™ä¸ªsessionidä»¥cookieå½¢å¼å­˜å‚¨åœ¨æµè§ˆå™¨ï¼Œç„¶åé€šè¿‡httpè¯·æ±‚ä¸­çš„headerå¤´çš„cookieé¡¹ä¼ é€’ç»™æœåŠ¡å™¨ã€‚é‚£å¦‚æœå°†æµè§ˆå™¨cookieç¦ç”¨åå°†ä¼šå‘ç”Ÿä»€ä¹ˆæ•ˆæœå‘¢ï¼Ÿä¸‹é¢çš„éƒ¨åˆ†å°±å°†é˜è¿°æµè§ˆå™¨ç¦ç”¨cookieåçš„å½±å“å’Œè§£å†³æ–¹æ³•çš„å®ç°ã€‚&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;äºŒå±è”½æµè§ˆå™¨cookieå&quot;&gt;äºŒã€å±è”½æµè§ˆå™¨cookieå&lt;/h4&gt;
&lt;p&gt;æˆ‘è¿™è¾¹ä½¿ç”¨çš„æ˜¯googleæµè§ˆå™¨ï¼Œè¿›å…¥googleæµè§ˆå™¨è®¾ç½®é€‰é¡¹-å†…å®¹è®¾ç½®-cookie-å±è”½cookieé€‰é¡¹ï¼Œå¦‚ä¸‹å›¾ï¼š&lt;br/&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/595183/201812/595183-20181225144519286-1031805905.png&quot;/&gt;&lt;br/&gt;å‘ç°ç¨‹åºæŠ¥é”™ï¼Œsessionidæ¯æ¬¡åˆ·æ–°éƒ½ä¼šä¸ä¸€æ ·ï¼Œä½†æ˜¯sessionçš„è®¾ç½®ä¸ä¼šå—å½±å“ï¼Œå€¼è¿˜æ˜¯è¿˜æ˜¯å¯ä»¥å­˜å‚¨åˆ°æœåŠ¡å™¨ä¸­ï¼Œä½†æ˜¯ä¸å…¶å®ƒé¡µé¢sessionä¸å…±äº«ã€‚&lt;/p&gt;
&lt;h5 id=&quot;æ–¹æ³•ä¸€é€šè¿‡urlæ˜¾ç°ä¼ é€’sessionidå®ç°sessionå…±äº«&quot;&gt;æ–¹æ³•ä¸€ï¼šé€šè¿‡urlæ˜¾ç°ä¼ é€’sessionidå®ç°sessionå…±äº«&lt;/h5&gt;
&lt;p&gt;demo1.php&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;&amp;lt;?php
session_start();
$sid = session_id();
echo &quot;sessionidï¼š&quot;.$sid.&quot;&amp;lt;br/&amp;gt;&quot;;
$_SESSION['user'] = 'å·´å…«çµ';
$a = $_SESSION['user'];
echo &quot;sessionçš„å€¼ï¼š&quot;.$a.&quot;&amp;lt;br/&amp;gt;&quot;; 
echo &quot;&amp;lt;a href='./demo2.php?sid=&quot;.$sid.&quot;' target='_blank' &amp;gt;demo2.php&amp;lt;/a&amp;gt;&quot;;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/595183/201812/595183-20181225141149224-866444344.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;demo2.php&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;
&amp;lt;?php
$sid = $_GET['sid'];
session_id($sid);
session_start();
$sid = session_id();
echo &quot;sessionidï¼š&quot;.$sid.&quot;&amp;lt;br/&amp;gt;&quot;;
echo &quot;sessionçš„å€¼ï¼š&quot;.$_SESSION['user'];
&lt;/code&gt;
&lt;/pre&gt;
&lt;h5 id=&quot;æ–¹æ³•äºŒä¿®æ”¹php.inié…ç½®éšå¼é€šè¿‡getå‚æ•°sessionid&quot;&gt;æ–¹æ³•äºŒï¼šä¿®æ”¹php.inié…ç½®éšå¼é€šè¿‡getå‚æ•°sessionid&lt;/h5&gt;
&lt;pre&gt;
&lt;code&gt;session.use_trans_sid = 1
session.use_cookies = 1
session.use_only_cookies = 0&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¿®æ”¹å‚æ•°æ•°é‡å¯php-fpm&lt;/p&gt;
&lt;p&gt;demo1.php&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;
&amp;lt;?php
session_start();
$sid = session_id();
echo &quot;sessionidï¼š&quot;.$sid.&quot;&amp;lt;br/&amp;gt;&quot;;
$_SESSION['user'] = 'å·´å…«çµ';
$a = $_SESSION['user'];
echo &quot;sessionçš„å€¼ï¼š&quot;.$a.&quot;&amp;lt;br/&amp;gt;&quot;; 
echo &quot;&amp;lt;a href='./demo2.phpâ€˜ target='_blank' &amp;gt;demo2.php&amp;lt;/a&amp;gt;&quot;;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/595183/201812/595183-20181225141000354-1487298619.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;demo2.php&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;&amp;lt;?php
session_start();
$sid = session_id();
echo &quot;sessionidï¼š&quot;.$sid.&quot;&amp;lt;br/&amp;gt;&quot;;
echo &quot;sessionçš„å€¼ï¼š&quot;.$_SESSION['user'];
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/595183/201812/595183-20181225141018061-1414774495.png&quot;/&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;ä»”ç»†å¯ä»¥å‘ç°å±è”½æµè§ˆå™¨cookieåï¼Œæµè§ˆå™¨ä¸­headerå¤´æ²¡æœ‰ä¼ é€’cookieé¡¹ï¼Œè¿™ä¸ªæ—¶å€™sessionidä¸èƒ½å¤Ÿéƒ½è¿‡headerå¤´çš„æ–¹å¼ä¼ é€’ï¼ŒæœåŠ¡å™¨è‚¯å®šä¸çŸ¥é“sessionidçš„æ˜¯ä»€ä¹ˆï¼Œäºæ˜¯å¯ä»¥é€šè¿‡urlä¸­ä¼ é€’sessionidæ¥è®©æœåŠ¡å™¨çŸ¥é“è¿™ä¸ªæ˜¯ä»€ä¹ˆï¼Œä»è€Œå»å–sessionçš„è®¾ç½®ä¿¡æ¯ã€‚æ¢è¨€ä¹‹å°±æ˜¯sessionidæ˜¯è·å–sessioné…ç½®ä¿¡æ¯çš„ä¸€ä¸ªæ¡¥æ¢ï¼Œcookieåœ¨å…¶ä¸­èµ·åˆ°çš„æ˜¯ä¼ é€’sessionidçš„ä½œç”¨ï¼Œæˆ‘ä»¬å±è”½cookieåï¼Œè®©sessionå¯ä»¥å…±äº«çš„è§£å†³æ–¹æ³•ä¹Ÿæ˜¯å°†sessionidå‘Šè¯‰ç»™æœåŠ¡å™¨æ¥è§£å†³é—®é¢˜ã€‚&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;ç”±æ­¤æˆ‘ä»¬å¯ä»¥å¾—å‡ºå®ç°sessionidä¼šè¯çš„ä¸‰ç§æ–¹å¼ä¸º&quot;&gt;ç”±æ­¤æˆ‘ä»¬å¯ä»¥å¾—å‡ºå®ç°sessionidä¼šè¯çš„ä¸‰ç§æ–¹å¼ä¸ºï¼š&lt;/h3&gt;

&lt;h4 id=&quot;å±è”½æµè§ˆå™¨cookieåphpè®¾ç½®sessionæ—¶äº§ç”Ÿçš„sessionidå¯ä»¥é€šè¿‡getæ–¹å¼å°†è¿™ä¸ªå‚æ•°ä¼ é€’ç»™éœ€è¦è®¿é—®çš„å…¶å®ƒé¡µé¢åœ¨æ–°çš„é¡µé¢ä¸­æ¥æ”¶sessionidçš„å€¼å¹¶é€šè¿‡session_id_getsidè¿™ä¸ªæ–¹æ³•è®²sesionidç»™å‡ºå»ä»è€Œè·å–è®¾ç½®çš„sessionå€¼&quot;&gt;2.å±è”½æµè§ˆå™¨cookieåï¼Œphpè®¾ç½®sessionæ—¶äº§ç”Ÿçš„sessionidå¯ä»¥é€šè¿‡getæ–¹å¼å°†è¿™ä¸ªå‚æ•°ä¼ é€’ç»™éœ€è¦è®¿é—®çš„å…¶å®ƒé¡µé¢ï¼Œåœ¨æ–°çš„é¡µé¢ä¸­æ¥æ”¶sessionidçš„å€¼ï¼Œå¹¶é€šè¿‡session_id($_GET['sid'])è¿™ä¸ªæ–¹æ³•è®²sesionidç»™å‡ºå»ä»è€Œè·å–è®¾ç½®çš„sessionå€¼&lt;/h4&gt;
&lt;h4 id=&quot;é€šè¿‡é…ç½®php.iniä¸­session.use_trans_sid-1æ¥å®ç°éšå¼ä¼ é€’sessionidè®¾ç½®sessionçš„é¡µé¢è·³è½¬ä¹Ÿä¸éœ€è¦å¸¦ä¸Šå‚æ•°ç³»ç»Ÿä¼šé»˜è®¤å¸¦ä¸Šè·³è½¬åçš„é¡µé¢ä¹Ÿä¸éœ€è¦æ¥æ”¶å‚æ•°éƒ½æ˜¯åœ¨å†…éƒ¨è§£å†³çš„ä»è€Œä¹Ÿå¯ä»¥è·å–åˆ°è®¾ç½®çš„sessionçš„å€¼&quot;&gt;3.é€šè¿‡é…ç½®php.iniä¸­session.use_trans_sid = 1æ¥å®ç°éšå¼ä¼ é€’sessionidï¼Œè®¾ç½®sessionçš„é¡µé¢è·³è½¬ä¹Ÿä¸éœ€è¦å¸¦ä¸Šå‚æ•°ï¼Œç³»ç»Ÿä¼šé»˜è®¤å¸¦ä¸Šï¼Œè·³è½¬åçš„é¡µé¢ä¹Ÿä¸éœ€è¦æ¥æ”¶å‚æ•°ï¼Œéƒ½æ˜¯åœ¨å†…éƒ¨è§£å†³çš„ï¼Œä»è€Œä¹Ÿå¯ä»¥è·å–åˆ°è®¾ç½®çš„sessionçš„å€¼&lt;/h4&gt;
</description>
<pubDate>Tue, 25 Dec 2018 07:04:00 +0000</pubDate>
<dc:creator>æ€ç¼åŒå­¦</dc:creator>
<og:description>æœ‰ä¸¤ä¸ªphpé¡µé¢ï¼Œdemo1.phpä¸demo2.phpã€‚å¦‚æœæƒ³è¦åœ¨demo1.phpåˆ›å»ºä¸€ä¸ªsessionéœ€è¦åœ¨çš„demo2.phpæˆ–è€…è¯´å…¶å®ƒé¡µé¢éƒ½å¯ä»¥è·å–åˆ°è®¾ç½®çš„sessionçš„å€¼ï¼Œè¾¾åˆ°ä¼šè¯çš„åŠŸèƒ½</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/lisqiong/p/10172780.html</dc:identifier>
</item>
<item>
<title>asp.net core mcroservices æ¶æ„ä¹‹ åˆ†å¸ƒå¼æ—¥å¿—ï¼ˆäºŒï¼‰ä¹‹è‡ªå®šä¹‰æ—¥å¿—å¼€å‘ - ä¸€å¤œå¯’æ±Ÿ</title>
<link>http://www.cnblogs.com/ck0074451665/p/10171668.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/ck0074451665/p/10171668.html</guid>
<description>&lt;p&gt;Â Â Â Â Â Â Â Â Â  netcoreçš„æ—¥å¿—æ˜¯ä½œä¸ºä¸€ä¸ªæ‰©å±•åº“å­˜åœ¨çš„ï¼Œæ¯ä¸ªç»„ä»¶éƒ½æœ‰å®ƒçš„å…¥å£ï¼Œé‚£ä¹ˆä½œä¸ºç ”ç©¶è¿™ä¸ªç»„ä»¶çš„å…¥å£æ˜¯æœ€å¥½çš„ï¼Œé¦–å…ˆçœ‹ä¸¤ç§æ–¹å¼ï¼š&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªæ˜¯æºç ä¾‹å­æä¾›çš„ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('fcf19f7b-919e-416c-a293-c6994da095ae')&quot; readability=&quot;35&quot;&gt;&lt;img id=&quot;code_img_closed_fcf19f7b-919e-416c-a293-c6994da095ae&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_fcf19f7b-919e-416c-a293-c6994da095ae&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('fcf19f7b-919e-416c-a293-c6994da095ae',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_fcf19f7b-919e-416c-a293-c6994da095ae&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;65&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;var&lt;/span&gt; loggingConfiguration = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; ConfigurationBuilder()
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;                .SetBasePath(Directory.GetCurrentDirectory())
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt;                 .AddJsonFile(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;logging.json&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, optional: &lt;span&gt;false&lt;/span&gt;, reloadOnChange: &lt;span&gt;true&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; &lt;span&gt;                .Build();
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt; 
&lt;span&gt; 6&lt;/span&gt;             &lt;span&gt;//&lt;/span&gt;&lt;span&gt; A Web App based program would configure logging via the WebHostBuilder.
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt;             &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Create a logger factory with filters that can be applied across all logger providers.&lt;/span&gt;
&lt;span&gt; 8&lt;/span&gt;             &lt;span&gt;var&lt;/span&gt; serviceCollection = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; ServiceCollection()
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;                 .AddLogging(builder =&amp;gt;
&lt;span&gt;10&lt;/span&gt; &lt;span&gt;                {
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt; &lt;span&gt;                    builder
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;                         .AddConfiguration(loggingConfiguration.GetSection(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Logging&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;))
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt;                         .AddFilter(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Microsoft&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, LogLevel.Debug)
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt;                         .AddFilter(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;System&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, LogLevel.Debug)
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt;                         .AddFilter(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;SampleApp.Program&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, LogLevel.Debug)
&lt;/span&gt;&lt;span&gt;16&lt;/span&gt; &lt;span&gt;                        .AddConsole();
&lt;/span&gt;&lt;span&gt;17&lt;/span&gt; &lt;span&gt;#if&lt;/span&gt; NET461
&lt;span&gt;18&lt;/span&gt; &lt;span&gt;                    builder.AddEventLog();
&lt;/span&gt;&lt;span&gt;19&lt;/span&gt; &lt;span&gt;#elif&lt;/span&gt; NETCOREAPP2_2
&lt;span&gt;20&lt;/span&gt; &lt;span&gt;#else&lt;/span&gt;
&lt;span&gt;21&lt;/span&gt; &lt;span&gt;#error&lt;/span&gt; Target framework needs to be updated
&lt;span&gt;22&lt;/span&gt; &lt;span&gt;#endif&lt;/span&gt;
&lt;span&gt;23&lt;/span&gt; &lt;span&gt;                });
&lt;/span&gt;&lt;span&gt;24&lt;/span&gt; 
&lt;span&gt;25&lt;/span&gt;             &lt;span&gt;//&lt;/span&gt;&lt;span&gt; providers may be added to a LoggerFactory before any loggers are created&lt;/span&gt;
&lt;span&gt;26&lt;/span&gt; 
&lt;span&gt;27&lt;/span&gt; 
&lt;span&gt;28&lt;/span&gt;             &lt;span&gt;var&lt;/span&gt; serviceProvider =&lt;span&gt; serviceCollection.BuildServiceProvider();
&lt;/span&gt;&lt;span&gt;29&lt;/span&gt;             &lt;span&gt;//&lt;/span&gt;&lt;span&gt; getting the logger using the class's name is conventional&lt;/span&gt;
&lt;span&gt;30&lt;/span&gt;             _logger = serviceProvider.GetRequiredService&amp;lt;ILogger&amp;lt;Program&amp;gt;&amp;gt;();
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;è¿™ä¸ªæ˜¯å’±ä»¬ä½¿ç”¨hostbuildä¸­çš„æ‰©å±•&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('693ae608-859f-4c42-8e22-e8d8e6f72e2c')&quot; readability=&quot;35&quot;&gt;&lt;img id=&quot;code_img_closed_693ae608-859f-4c42-8e22-e8d8e6f72e2c&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_693ae608-859f-4c42-8e22-e8d8e6f72e2c&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('693ae608-859f-4c42-8e22-e8d8e6f72e2c',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_693ae608-859f-4c42-8e22-e8d8e6f72e2c&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;65&quot;&gt;
&lt;pre&gt;
 &lt;span&gt;var&lt;/span&gt; host = &lt;span&gt;new&lt;/span&gt; WebHostBuilder().ConfigureAppConfiguration((webHostBuild,configBuild) =&amp;gt;&lt;span&gt;
            {
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; env =&lt;span&gt; webHostBuild.HostingEnvironment;
                
                configBuild.AddJsonFile(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;appsettings.json&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
                .AddJsonFile($&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;appsettings.{env.EnvironmentName}.json&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
                ,optional:&lt;/span&gt;&lt;span&gt;true&lt;/span&gt;,reloadOnChange:&lt;span&gt;true&lt;/span&gt;&lt;span&gt;)
                .SetBasePath(Directory.GetCurrentDirectory());
            }).ConfigureLogging((hostingContext, logging) &lt;/span&gt;=&amp;gt;&lt;span&gt; {
                logging.AddConfiguration(hostingContext.Configuration.GetSection(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Logging&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;))
                .AddCustomizationLogger();
            }).UseKestrel((hostcon,opt)&lt;/span&gt;=&amp;gt;&lt;span&gt; {
                opt.ListenAnyIP(&lt;/span&gt;&lt;span&gt;5555&lt;/span&gt;&lt;span&gt;);
            })
            .UseStartup&lt;/span&gt;&amp;lt;Startup&amp;gt;&lt;span&gt;();
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; ihost=&lt;span&gt; host.Build(); 
            ihost.Run();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;ä»ä»¥ä¸Šä¸¤ç§å¯ä»¥çœ‹å‡ºï¼Œå…¶å®ç¬¬äºŒç§WebHostBuilderæ˜¯å°è£…ç¬¬ä¸€ç§çš„ã€‚æ‰€ä»¥å’±ä»¬é€‰æ‹©ä»ç¬¬ä¸€ä¸ªå…¥å£ç€æ‰‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/46403/201812/46403-20181224233126169-1525423445.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â netcoreæ—¥å¿—è®¾è®¡æ€æƒ³æ˜¯ï¼šLoggingBuider æ„å»ºï¼ŒLoggerFactoryå’ŒLoggerç±»è´Ÿè´£æ—¥å¿—æ“ä½œå’ŒLogæä¾›ç¨‹åºçš„ç®¡ç†ï¼ŒConfigurationæ˜¯é…ç½®åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆå’±ä»¬åŸºäºä»¥ä¸Šçš„ä»£ç ï¼Œçœ‹LoggingBuilderç±»&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.Extensions.DependencyInjection;

&lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; Microsoft.Extensions.Logging
{
    &lt;/span&gt;&lt;span&gt;internal&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; LoggingBuilder : ILoggingBuilder
    {
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; LoggingBuilder(IServiceCollection services)
        {
            Services &lt;/span&gt;=&lt;span&gt; services;
        }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; IServiceCollection Services { &lt;span&gt;get&lt;/span&gt;&lt;span&gt;; }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å†çœ‹ä¸ºServiceåšçš„æ‰©å±•&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
&lt;span&gt;using&lt;/span&gt;&lt;span&gt; System;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.Extensions.Logging;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.Extensions.DependencyInjection.Extensions;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.Extensions.Options;

&lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; Microsoft.Extensions.DependencyInjection
{
    &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;
    &lt;span&gt;///&lt;/span&gt;&lt;span&gt; Extension methods for setting up logging services in an &lt;/span&gt;&lt;span&gt;&amp;lt;see cref=&quot;IServiceCollection&quot; /&amp;gt;&lt;/span&gt;&lt;span&gt;.
    &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; LoggingServiceCollectionExtensions
    {
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt;&lt;span&gt; Adds logging services to the specified &lt;/span&gt;&lt;span&gt;&amp;lt;see cref=&quot;IServiceCollection&quot; /&amp;gt;&lt;/span&gt;&lt;span&gt;.
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;param name=&quot;services&quot;&amp;gt;&lt;/span&gt;&lt;span&gt;The &lt;/span&gt;&lt;span&gt;&amp;lt;see cref=&quot;IServiceCollection&quot; /&amp;gt;&lt;/span&gt;&lt;span&gt; to add services to.&lt;/span&gt;&lt;span&gt;&amp;lt;/param&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;returns&amp;gt;&lt;/span&gt;&lt;span&gt;The &lt;/span&gt;&lt;span&gt;&amp;lt;see cref=&quot;IServiceCollection&quot;/&amp;gt;&lt;/span&gt;&lt;span&gt; so that additional calls can be chained.&lt;/span&gt;&lt;span&gt;&amp;lt;/returns&amp;gt;&lt;/span&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; IServiceCollection AddLogging(&lt;span&gt;this&lt;/span&gt;&lt;span&gt; IServiceCollection services)
        {
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; AddLogging(services, builder =&amp;gt;&lt;span&gt; { });
        }

        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt;&lt;span&gt; Adds logging services to the specified &lt;/span&gt;&lt;span&gt;&amp;lt;see cref=&quot;IServiceCollection&quot; /&amp;gt;&lt;/span&gt;&lt;span&gt;.
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;param name=&quot;services&quot;&amp;gt;&lt;/span&gt;&lt;span&gt;The &lt;/span&gt;&lt;span&gt;&amp;lt;see cref=&quot;IServiceCollection&quot; /&amp;gt;&lt;/span&gt;&lt;span&gt; to add services to.&lt;/span&gt;&lt;span&gt;&amp;lt;/param&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;param name=&quot;configure&quot;&amp;gt;&lt;/span&gt;&lt;span&gt;The &lt;/span&gt;&lt;span&gt;&amp;lt;see cref=&quot;ILoggingBuilder&quot;/&amp;gt;&lt;/span&gt;&lt;span&gt; configuration delegate.&lt;/span&gt;&lt;span&gt;&amp;lt;/param&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;returns&amp;gt;&lt;/span&gt;&lt;span&gt;The &lt;/span&gt;&lt;span&gt;&amp;lt;see cref=&quot;IServiceCollection&quot;/&amp;gt;&lt;/span&gt;&lt;span&gt; so that additional calls can be chained.&lt;/span&gt;&lt;span&gt;&amp;lt;/returns&amp;gt;&lt;/span&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; IServiceCollection AddLogging(&lt;span&gt;this&lt;/span&gt; IServiceCollection services, Action&amp;lt;ILoggingBuilder&amp;gt;&lt;span&gt; configure)
        {
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (services == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
            {
                &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt; &lt;span&gt;new&lt;/span&gt;&lt;span&gt; ArgumentNullException(nameof(services));
            }

            services.AddOptions();

            services.TryAdd(ServiceDescriptor.Singleton&lt;/span&gt;&amp;lt;ILoggerFactory, LoggerFactory&amp;gt;&lt;span&gt;());&lt;span&gt;//ç”Ÿæˆlogçš„å·¥å‚&lt;/span&gt;
            services.TryAdd(ServiceDescriptor.Singleton(&lt;/span&gt;&lt;span&gt;typeof&lt;/span&gt;(ILogger&amp;lt;&amp;gt;), &lt;span&gt;typeof&lt;/span&gt;(Logger&amp;lt;&amp;gt;&lt;span&gt;))); &lt;span&gt;//Logæ³›å‹ç±»&lt;/span&gt;

            services.TryAddEnumerable(ServiceDescriptor.Singleton&lt;/span&gt;&amp;lt;IConfigureOptions&amp;lt;LoggerFilterOptions&amp;gt;&amp;gt;&lt;span&gt;(
                &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; DefaultLoggerLevelConfigureOptions(LogLevel.Information)));&lt;span&gt;//Filteré…ç½®ç±»&lt;/span&gt;

            configure(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; LoggingBuilder(services)); &lt;span&gt;//æä¾›ä¸€ä¸ªå›æ‰æ–¹æ³•ï¼Œå°†logbuilderä½œä¸ºä¸Šä¸‹æ–‡ä¼ å…¥
            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; services;
        }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä»¥ä¸Šå°±æ˜¯Logæ—¥å¿—éƒ¨åˆ†å®Œæˆç›¸å½“äºæ³¨å†ŒåŠŸèƒ½çš„ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å…¥å£ä¸­å’±ä»¬çœ‹åˆ°äº†ï¼Œå›æ‰å‡½æ•°ä¸­æ”¾ç€åŠ è½½é…ç½®å’ŒæŒ‡å®šLoggingæä¾›ç¨‹åºã€‚é¦–å…ˆçœ‹åŠ è½½é…ç½®ï¼š&lt;/p&gt;
&lt;div readability=&quot;9&quot;&gt;
&lt;p&gt;builder.AddConfiguration(loggingConfiguration.GetSection(&quot;Logging&quot;))Â &lt;/p&gt;
&lt;p&gt;AddConfigurationæ˜¯åœ¨ Logging.Configurationä¸­çš„LoggingBuilderExtensions.cs&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Copyright (c) .NET Foundation. All rights reserved.
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.&lt;/span&gt;

&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.Extensions.Configuration;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.Extensions.DependencyInjection;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.Extensions.Logging.Configuration;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.Extensions.Options;

&lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; Microsoft.Extensions.Logging
{
    &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;
    &lt;span&gt;///&lt;/span&gt;&lt;span&gt; Extension methods for setting up logging services in an &lt;/span&gt;&lt;span&gt;&amp;lt;see cref=&quot;ILoggingBuilder&quot; /&amp;gt;&lt;/span&gt;&lt;span&gt;.
    &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; LoggingBuilderExtensions
    {
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt;&lt;span&gt; Configures &lt;/span&gt;&lt;span&gt;&amp;lt;see cref=&quot;LoggerFilterOptions&quot; /&amp;gt;&lt;/span&gt;&lt;span&gt; from an instance of &lt;/span&gt;&lt;span&gt;&amp;lt;see cref=&quot;IConfiguration&quot; /&amp;gt;&lt;/span&gt;&lt;span&gt;.
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;param name=&quot;builder&quot;&amp;gt;&lt;/span&gt;&lt;span&gt;The &lt;/span&gt;&lt;span&gt;&amp;lt;see cref=&quot;ILoggingBuilder&quot;/&amp;gt;&lt;/span&gt;&lt;span&gt; to use.&lt;/span&gt;&lt;span&gt;&amp;lt;/param&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;param name=&quot;configuration&quot;&amp;gt;&lt;/span&gt;&lt;span&gt;The &lt;/span&gt;&lt;span&gt;&amp;lt;see cref=&quot;IConfiguration&quot; /&amp;gt;&lt;/span&gt;&lt;span&gt; to add.&lt;/span&gt;&lt;span&gt;&amp;lt;/param&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;returns&amp;gt;&lt;/span&gt;&lt;span&gt;The builder.&lt;/span&gt;&lt;span&gt;&amp;lt;/returns&amp;gt;&lt;/span&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; ILoggingBuilder AddConfiguration(&lt;span&gt;this&lt;/span&gt;&lt;span&gt; ILoggingBuilder builder, IConfiguration configuration)
        {
            builder.AddConfiguration();  &lt;span&gt;//è¿™ä¸ªæ˜¯ä¸‹é¢ç´§æŒ¨ç€ä»£ç å—çš„å®ç°ï¼Œä¸»è¦æ˜¯æ ¹æ®ç±»åæˆ–è€…åˆ«åï¼Œæ‰¾å‡ºå¯¹åº”çš„configurationå¹¶åŠ è½½&lt;/span&gt;
            builder.Services.AddSingleton&lt;/span&gt;&amp;lt;IConfigureOptions&amp;lt;LoggerFilterOptions&amp;gt;&amp;gt;&lt;br/&gt;(&lt;span&gt;new&lt;/span&gt;&lt;span&gt; LoggerFilterConfigureOptions(configuration)); //&lt;span&gt;æ·»åŠ filterç»“ç‚¹çš„é…ç½®&lt;/span&gt;
            builder.Services.AddSingleton&lt;/span&gt;&amp;lt;IOptionsChangeTokenSource&amp;lt;LoggerFilterOptions&amp;gt;&amp;gt;&lt;br/&gt;(&lt;span&gt;new&lt;/span&gt; ConfigurationChangeTokenSource&amp;lt;LoggerFilterOptions&amp;gt;&lt;span&gt;(configuration));//&lt;span&gt;æ›´æ”¹åéœ€è¦é€šçŸ¥æ£€æ§ç±»åˆ·æ–°æ“ä½œ&lt;/span&gt;

            builder.Services.AddSingleton(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; LoggingConfiguration(configuration));//&lt;span&gt;å°†è¿™ä¸ªé…ç›´èŠ‚æ”¾å…¥service

            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; builder;
        }
    }
}&lt;br/&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Copyright (c) .NET Foundation. All rights reserved.
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.&lt;/span&gt;

&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.Extensions.DependencyInjection.Extensions;

&lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; Microsoft.Extensions.Logging.Configuration
{
    &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;
    &lt;span&gt;///&lt;/span&gt;&lt;span&gt; Extension methods for setting up logging services in an &lt;/span&gt;&lt;span&gt;&amp;lt;see cref=&quot;ILoggingBuilder&quot; /&amp;gt;&lt;/span&gt;&lt;span&gt;.
    &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; LoggingBuilderConfigurationExtensions
    {
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt;&lt;span&gt;&lt;span&gt; è¿™ä¸ªç±»å°±æ˜¯æ·»åŠ æ ¹æ®ç±»å‹æˆ–è€…æ˜¯åˆ«åå»æ‰¾åˆ°é…ç½®èŠ‚çš„åŠŸèƒ½ &lt;/span&gt;Adds services required to consume &lt;/span&gt;&lt;span&gt;&amp;lt;see cref=&quot;ILoggerProviderConfigurationFactory&quot;/&amp;gt;&lt;/span&gt;&lt;span&gt; or &lt;/span&gt;&lt;span&gt;&amp;lt;see cref=&quot;ILoggerProviderConfiguration{T}&quot;/&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; AddConfiguration(&lt;span&gt;this&lt;/span&gt;&lt;span&gt; ILoggingBuilder builder)
        {
            builder.Services.TryAddSingleton&lt;/span&gt;&amp;lt;ILoggerProviderConfigurationFactory&lt;br/&gt;, LoggerProviderConfigurationFactory&amp;gt;&lt;span&gt;();
            builder.Services.TryAddSingleton(&lt;/span&gt;&lt;span&gt;typeof&lt;/span&gt;(ILoggerProviderConfiguration&amp;lt;&amp;gt;)&lt;br/&gt;, &lt;span&gt;typeof&lt;/span&gt;(LoggerProviderConfiguration&amp;lt;&amp;gt;&lt;span&gt;));
        }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¤§å®¶å…¶å®çœ‹åˆ°äº†ï¼Œå…¨éƒ¨æ˜¯å¾€ServiceCollä¸­æ‰”ä¸œè¥¿ï¼Œä½†æ˜¯ç»†æƒ³ä¸€ä¸‹ï¼Œè¿™ä¸å°±æ˜¯æ ¹æ®éƒ¨ä»¶ç»„åˆå‡ºåŠŸèƒ½çš„æ€æƒ³å—ï¼Ÿä¸åŒçš„éƒ¨ä»¶ä¼šç»„åˆå‡ºæ–°çš„åŠŸèƒ½ã€‚é‚£æ—¥å¿—æ˜¯å¦‚ä½•ç»„åˆå‡ºæ¥çš„ï¼Ÿåœ¨å’±ä»¬çš„å…¥å£ç±»ä¸­æœ‰è¿™ä¸€å¥ï¼š&lt;/p&gt;
&lt;p&gt;_logger = serviceProvider.GetRequiredService&amp;lt;ILogger&amp;lt;Program&amp;gt;&amp;gt;();åœ¨ä¸Šé¢ä¸ºServiceåšæ‰©å±•çš„é‚£ä¸€æ®µä»£ç ä¸­å·²ç»ä¸ºILogger&amp;lt;&amp;gt;æ³¨å†Œäº†æœåŠ¡ï¼Œè¿˜æœ‰LoggerFactoryä¹Ÿæ˜¯ã€‚é‚£ä¹ˆå°±ä»è¿™ä¸ªç±»å…¥æ‰‹ï¼Œçœ‹åºåˆ—å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/46403/201812/46403-20181225113743206-1821660555.png&quot; alt=&quot;&quot; width=&quot;500&quot; height=&quot;295&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬çŸ¥é“netcoreæŠŠDIé›†æˆäº†ï¼ŒåŸºç¡€ç»„ä»¶å’Œä¸šåŠ¡ç±»éƒ½å¯ä»¥ä½œä¸ºæœåŠ¡æ¥çœ‹å¾…ï¼Œç„¶åè¿›è¡Œæ§åˆ¶æœåŠ¡ä»¥åŠæœåŠ¡çš„ç›¸äº’ç»„åˆï¼Œæ¯”å¦‚åœ¨æœåŠ¡ä¸­&lt;/p&gt;
&lt;p&gt;Â LoggerFactoryç±»éœ€è¦åˆå§‹åŒ–ï¼Œé‚£ä¹ˆçœ‹çœ‹å®ƒçš„æ„é€ å‡½æ•°ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;40&quot;&gt;
&lt;pre&gt;
 &lt;span&gt;public&lt;/span&gt; LoggerFactory() : &lt;span&gt;this&lt;/span&gt;(Enumerable.Empty&amp;lt;ILoggerProvider&amp;gt;&lt;span&gt;())
        {
        }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; LoggerFactory(IEnumerable&amp;lt;ILoggerProvider&amp;gt; providers) : &lt;span&gt;this&lt;/span&gt;(providers, &lt;span&gt;new&lt;/span&gt; StaticFilterOptionsMonitor(&lt;span&gt;new&lt;/span&gt;&lt;span&gt; LoggerFilterOptions()))
        {
        }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; LoggerFactory(IEnumerable&amp;lt;ILoggerProvider&amp;gt; providers, LoggerFilterOptions filterOptions) : &lt;span&gt;this&lt;/span&gt;(providers, &lt;span&gt;new&lt;/span&gt;&lt;span&gt; StaticFilterOptionsMonitor(filterOptions))
        {
        }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; LoggerFactory(IEnumerable&amp;lt;ILoggerProvider&amp;gt; providers, IOptionsMonitor&amp;lt;LoggerFilterOptions&amp;gt;&lt;span&gt; filterOption)
        {
            &lt;/span&gt;&lt;span&gt;foreach&lt;/span&gt; (&lt;span&gt;var&lt;/span&gt; provider &lt;span&gt;in&lt;/span&gt;&lt;span&gt; providers)
            {
                AddProviderRegistration(provider, dispose: &lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;span&gt;);
            }

            _changeTokenRegistration &lt;/span&gt;=&lt;span&gt; filterOption.OnChange(RefreshFilters);
            RefreshFilters(filterOption.CurrentValue);
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä¼šä¸ä¼šå¥‡æ€ªä¸ºä»€ä¹ˆæ„é€ å‡½æ•°ä¸­Â ILoggerProvideræ˜¯ä»¥åˆ—è¡¨çš„å½¢å¼å‡ºç°ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å†çœ‹çœ‹consoleæä¾›ç¨‹åºçš„æœåŠ¡æ³¨å†Œä»£ç ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; ConsoleLoggerExtensions
    {
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt;&lt;span&gt; Adds a console logger named 'Console' to the factory.
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;param name=&quot;builder&quot;&amp;gt;&lt;/span&gt;&lt;span&gt;The &lt;/span&gt;&lt;span&gt;&amp;lt;see cref=&quot;ILoggingBuilder&quot;/&amp;gt;&lt;/span&gt;&lt;span&gt; to use.&lt;/span&gt;&lt;span&gt;&amp;lt;/param&amp;gt;&lt;/span&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; ILoggingBuilder AddConsole(&lt;span&gt;this&lt;/span&gt;&lt;span&gt; ILoggingBuilder builder)
        {
            builder.AddConfiguration();

            builder.Services.TryAddEnumerable(ServiceDescriptor.Singleton&lt;/span&gt;&amp;lt;ILoggerProvider, ConsoleLoggerProvider&amp;gt;&lt;span&gt;());
            builder.Services.TryAddEnumerable(ServiceDescriptor.Singleton&lt;/span&gt;&amp;lt;IConfigureOptions&amp;lt;ConsoleLoggerOptions&amp;gt;, ConsoleLoggerOptionsSetup&amp;gt;&lt;span&gt;());
            builder.Services.TryAddEnumerable(ServiceDescriptor.Singleton&lt;/span&gt;&amp;lt;IOptionsChangeTokenSource&amp;lt;ConsoleLoggerOptions&amp;gt;, LoggerProviderOptionsChangeTokenSource&amp;lt;ConsoleLoggerOptions, ConsoleLoggerProvider&amp;gt;&amp;gt;&lt;span&gt;());
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; builder;
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å®ƒæ˜¯ä»¥Â TryAddEnumerable çš„å½¢å¼æ·»åŠ çš„ï¼Œä¹Ÿå°±æ˜¯è¯´Â ILoggerProvider åœ¨æœåŠ¡ä¸­æœ‰ä¸€ä¸ªåˆ—è¡¨ã€‚é‚£ä¹ˆè¿™ä¸ªå°±æ¸…æ¥šäº†ï¼Œä½ å¯ä»¥æ·»åŠ &lt;/p&gt;
&lt;p&gt;AddDebug AddConsoleè®¸å¤šçš„æä¾›ç¨‹åºï¼Œç„¶åå…¨éƒ¨è¢«æ³¨å…¥è¿›LoggerFacotryï¼ŒLoggerFacotryä¼šç”ŸæˆLoggerç„¶åä¼ é€’ç»™ä¸»Loggerç»Ÿä¸€ç®¡ç†ã€‚&lt;/p&gt;
&lt;p&gt;LoggerFactoryæœ‰æ®µä»£ç Â ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;42&quot;&gt;
&lt;pre&gt;
  &lt;span&gt;private&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; SetLoggerInformation(&lt;span&gt;ref&lt;/span&gt; LoggerInformation loggerInformation, ILoggerProvider provider,  &lt;span&gt;string&lt;/span&gt;&lt;span&gt; categoryName)
        {
            loggerInformation.Logger &lt;/span&gt;=&lt;span&gt; provider.CreateLogger(categoryName);
            loggerInformation.ProviderType &lt;/span&gt;=&lt;span&gt; provider.GetType();
            loggerInformation.ExternalScope &lt;/span&gt;= provider &lt;span&gt;is&lt;/span&gt;&lt;span&gt; ISupportExternalScope;
        }

        &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; LoggerInformation[] CreateLoggers(&lt;span&gt;string&lt;/span&gt;&lt;span&gt; categoryName)
        {
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; loggers = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; LoggerInformation[_providerRegistrations.Count];
            &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; i = &lt;span&gt;0&lt;/span&gt;; i &amp;lt; _providerRegistrations.Count; i++&lt;span&gt;)
            {
                SetLoggerInformation(&lt;/span&gt;&lt;span&gt;ref&lt;/span&gt;&lt;span&gt; loggers[i], _providerRegistrations[i].Provider, categoryName);
            }

            ApplyRules(loggers, categoryName, &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;, loggers.Length);
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; loggers;
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç„¶å&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
 &lt;span&gt;public&lt;/span&gt; ILogger CreateLogger(&lt;span&gt;string&lt;/span&gt;&lt;span&gt; categoryName)
        {
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (CheckDisposed())
            {
                &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt; &lt;span&gt;new&lt;/span&gt;&lt;span&gt; ObjectDisposedException(nameof(LoggerFactory));
            }

            &lt;/span&gt;&lt;span&gt;lock&lt;/span&gt;&lt;span&gt; (_sync)
            {
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (!_loggers.TryGetValue(categoryName, &lt;span&gt;out&lt;/span&gt; &lt;span&gt;var&lt;/span&gt;&lt;span&gt; logger))
                {
                    logger &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; Logger(&lt;span&gt;this&lt;/span&gt;&lt;span&gt;)
                    {
                        Loggers &lt;/span&gt;=&lt;span&gt; CreateLoggers(categoryName)  //&lt;span&gt;ä¸Šé¢çš„ä»£ç å—ç”Ÿæˆ&lt;/span&gt;
                    };
                    _loggers[categoryName] &lt;/span&gt;=&lt;span&gt; logger;
                }

                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; logger;
            }
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;





&lt;p&gt;Â  Â  Â  Â  è¯´äº†é‚£ä¹ˆå¤šï¼Œå’±ä»¬å¼€å§‹åŠ¨æ‰‹è‡ªå·±åšä¸€ä¸ªã€‚å’±ä»¬å¹¶ä¸æ˜¯æ–°å»ºä¸€ä¸ªæœåŠ¡ï¼Œè€Œæ˜¯ä¸ºLoggingæœåŠ¡åšä¸€ä¸ªæ‰©å±•ï¼Œ&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ä¸ç”¨æ–°å»ºbuilderéƒ¨åˆ†ï¼Œè€Œæ˜¯ä¸ºLoggerBuilderæ–°å»ºä¸€ä¸ªæ‰©å±•ï¼Œå…ˆçœ‹ä»£ç ç»“æ„ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/46403/201812/46403-20181225115256619-1562008446.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åçœ‹çœ‹ä¸ºLoggerBuilderåšçš„æ‰©å±•æ–¹æ³•ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;41&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Copyright (c) .NET Foundation. All rights reserved.
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.&lt;/span&gt;

&lt;span&gt;using&lt;/span&gt;&lt;span&gt; System;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.Extensions.Configuration;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.Extensions.DependencyInjection;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.Extensions.DependencyInjection.Extensions;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.Extensions.Logging;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.Extensions.Logging.Configuration;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.Extensions.Logging.Console;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.Extensions.Options;

&lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; Walt.Freamwork.Log
{
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; CustomizationLoggerLoggerExtensions
    {
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt;&lt;span&gt; Adds a console logger named 'Console' to the factory.
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;param name=&quot;builder&quot;&amp;gt;&lt;/span&gt;&lt;span&gt;The &lt;/span&gt;&lt;span&gt;&amp;lt;see cref=&quot;ILoggingBuilder&quot;/&amp;gt;&lt;/span&gt;&lt;span&gt; to use.&lt;/span&gt;&lt;span&gt;&amp;lt;/param&amp;gt;&lt;/span&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; ILoggingBuilder AddCustomizationLogger(&lt;span&gt;this&lt;/span&gt;&lt;span&gt; ILoggingBuilder builder)
        {
            builder.AddConfiguration();

            builder.Services.TryAddEnumerable(ServiceDescriptor.Singleton&lt;/span&gt;&amp;lt;ILoggerProvider, CustomizationLoggerProvider&amp;gt;&lt;span&gt;());
            builder.Services.TryAddEnumerable(ServiceDescriptor.Singleton&lt;/span&gt;&amp;lt;IConfigureOptions&amp;lt;CustomizationLoggerOptions&amp;gt;, CustomizationLoggerOptionsSetup&amp;gt;&lt;span&gt;());
            builder.Services.TryAddEnumerable(ServiceDescriptor.Singleton&lt;/span&gt;&amp;lt;IOptionsChangeTokenSource&amp;lt;ConsoleLoggerOptions&amp;gt;, LoggerProviderOptionsChangeTokenSource&amp;lt;ConsoleLoggerOptions, ConsoleLoggerProvider&amp;gt;&amp;gt;&lt;span&gt;());
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; builder;
        }

        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt;&lt;span&gt; Adds a console logger named 'Console' to the factory.
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;param name=&quot;builder&quot;&amp;gt;&lt;/span&gt;&lt;span&gt;The &lt;/span&gt;&lt;span&gt;&amp;lt;see cref=&quot;ILoggingBuilder&quot;/&amp;gt;&lt;/span&gt;&lt;span&gt; to use.&lt;/span&gt;&lt;span&gt;&amp;lt;/param&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;param name=&quot;configure&quot;&amp;gt;&amp;lt;/param&amp;gt;&lt;/span&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; ILoggingBuilder AddCustomizationLogger(&lt;span&gt;this&lt;/span&gt; ILoggingBuilder builder, Action&amp;lt;CustomizationLoggerOptions&amp;gt;&lt;span&gt; configure)
        {
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (configure == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
            {
                &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt; &lt;span&gt;new&lt;/span&gt;&lt;span&gt; ArgumentNullException(nameof(configure));
            }

            builder.AddCustomizationLogger();
            builder.Services.Configure(configure);

            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; builder;
        }

       
 
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å°±åƒç¬¬ä¸€éƒ¨åˆ†çš„åŸç†ï¼Œå°†ä½ è‡ªå·±çš„CustomizationLoggerProvideræœåŠ¡æ·»åŠ è¿›æœåŠ¡ä¸­ï¼Œå°±å®Œæˆäº†ä¸€åŠã€‚é…ç½®æ–‡ä»¶å’Œé…ç½®Tokenï¼Œ&lt;/p&gt;
&lt;p&gt;æœ‰äº†è¿™ä¸ªtokenï¼Œå°±å¯ä»¥ç›‘æ§åˆ°é…ç½®æ–‡ä»¶æ›´æ”¹ï¼Œä»è€Œå¼•å‘changeæ–¹æ³•ï¼Œè®©å¼€å‘å»åšä¸€äº›äº‹æƒ…ã€‚é‚£ä¹ˆçœ‹é…ç½®æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;{
  &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Logging&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;: {
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;LogLevel&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;: {
      &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Default&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Debug&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
      &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;System&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Debug&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
      &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Microsoft&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Debug&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
    },
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;KafkaLog&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;:{
      &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Prix&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;è¿™æ˜¯æˆ‘çš„è‡ªå®šä¹‰æ—¥å¿—æä¾›ç¨‹åº&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
    }
  }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å†çœ‹çœ‹é…ç½®ç±»ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/46403/201812/46403-20181225144407913-1156534234.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å°±ä¸¤ä¸ªå‚æ•°ï¼Œå’±ä»¬é…ç½®äº†ä¸€ä¸ªã€‚å†æ¥çœ‹çœ‹é…ç½®å®‰è£…ç¨‹åºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/46403/201812/46403-20181225144502469-902223650.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä»…æ­¤è€Œå·²ï¼Œç„¶åå°±æ˜¯ä¸Šé¢çš„æ‰©å±•æ–¹æ³•ï¼Œç»™æ³¨å†Œå°±okäº†ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚ä½•ç”¨è¿™äº›é…ç½®å°¼ï¼Ÿçœ‹providerç±»&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;53&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Copyright (c) .NET Foundation. All rights reserved.
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.&lt;/span&gt;

&lt;span&gt;using&lt;/span&gt;&lt;span&gt; System;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; System.Collections.Concurrent;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; System.Collections.Generic;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.Extensions.Logging;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.Extensions.Logging.Console.Internal;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.Extensions.Options;

&lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; Walt.Freamwork.Log
{
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; IConsoleLoggerSettings is obsolete&lt;/span&gt;
&lt;span&gt;#pragma&lt;/span&gt; warning disable CS0618 &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Type or member is obsolete&lt;/span&gt;&lt;span&gt;

    [ProviderAlias(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;KafkaLog&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)] &lt;span&gt;//è¿˜è®°å¾—ä¸Šé¢è®²åŸç†æ˜¯æ³¨å…¥äº†providerconfigurationç­‰ç±»ï¼Œå°±æ˜¯æ ¹æ®è¿™ä¸ªåˆ«åå»æ‰¾é…ç›´èŠ‚çš„ã€‚
    &lt;/span&gt;&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; CustomizationLoggerProvider : ILoggerProvider, ISupportExternalScope
    {
        &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;readonly&lt;/span&gt; ConcurrentDictionary&amp;lt;&lt;span&gt;string&lt;/span&gt;, CustomizationLogger&amp;gt; _loggers =
         &lt;span&gt;new&lt;/span&gt; ConcurrentDictionary&amp;lt;&lt;span&gt;string&lt;/span&gt;, CustomizationLogger&amp;gt;&lt;span&gt;();

        &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;readonly&lt;/span&gt; Func&amp;lt;&lt;span&gt;string&lt;/span&gt;, LogLevel, &lt;span&gt;bool&lt;/span&gt;&amp;gt;&lt;span&gt; _filter; 
        &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;readonly&lt;/span&gt; CustomizationLoggerProcessor _messageQueue = 
        &lt;span&gt;new&lt;/span&gt;&lt;span&gt; CustomizationLoggerProcessor();

        &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;readonly&lt;/span&gt; Func&amp;lt;&lt;span&gt;string&lt;/span&gt;, LogLevel, &lt;span&gt;bool&lt;/span&gt;&amp;gt; trueFilter = (cat, level) =&amp;gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
        &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;readonly&lt;/span&gt; Func&amp;lt;&lt;span&gt;string&lt;/span&gt;, LogLevel, &lt;span&gt;bool&lt;/span&gt;&amp;gt; falseFilter = (cat, level) =&amp;gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
        &lt;/span&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; IDisposable _optionsReloadToken;
        &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;bool&lt;/span&gt;&lt;span&gt; _includeScopes; 

&lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;string&lt;/span&gt;&lt;span&gt; _prix;

        &lt;/span&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; IExternalScopeProvider _scopeProvider;

 

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; CustomizationLoggerProvider(IOptionsMonitor&amp;lt;CustomizationLoggerOptions&amp;gt;&lt;span&gt; options)  &lt;br/&gt;&lt;span&gt;//è¿™é‡Œè‡ªåŠ¨å’Œconfigurationä¸­çš„å€¼ç»‘å®šåï¼Œè¢«æ³¨å…¥åˆ°è¿™é‡Œæ¥äº†ã€‚&lt;/span&gt;
        {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Filter would be applied on LoggerFactory level&lt;/span&gt;
            _filter =&lt;span&gt; trueFilter;
          
            _optionsReloadToken &lt;/span&gt;=&lt;span&gt; options.OnChange(ReloadLoggerOptions); &lt;span&gt;//è¿™ä¸ªå°±æ˜¯æˆ‘è¯´çš„éœ€è¦æ³¨å†ŒtokenæœåŠ¡ï¼Œç„¶åé…ç½®æ›´æ”¹å°±ä¼šæ¿€å‘è¿™ä¸ªæ–¹æ³•&lt;/span&gt;
            ReloadLoggerOptions(options.CurrentValue);
        }

        &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; ReloadLoggerOptions(CustomizationLoggerOptions options)
        {
            _includeScopes &lt;/span&gt;=&lt;span&gt; options.IncludeScopes; 
              _prix&lt;/span&gt;=&lt;span&gt;options.Prix;

            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; scopeProvider =&lt;span&gt; GetScopeProvider();
            &lt;/span&gt;&lt;span&gt;foreach&lt;/span&gt; (&lt;span&gt;var&lt;/span&gt; logger &lt;span&gt;in&lt;/span&gt;&lt;span&gt; _loggers.Values)
            {
                logger.ScopeProvider &lt;/span&gt;=&lt;span&gt; scopeProvider; 
            }
        }

  
        &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; IEnumerable&amp;lt;&lt;span&gt;string&lt;/span&gt;&amp;gt; GetKeyPrefixes(&lt;span&gt;string&lt;/span&gt;&lt;span&gt; name)
        {
            &lt;/span&gt;&lt;span&gt;while&lt;/span&gt; (!&lt;span&gt;string&lt;/span&gt;&lt;span&gt;.IsNullOrEmpty(name))
            {
                &lt;/span&gt;&lt;span&gt;yield&lt;/span&gt; &lt;span&gt;return&lt;/span&gt;&lt;span&gt; name;
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; lastIndexOfDot = name.LastIndexOf(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;);
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (lastIndexOfDot == -&lt;span&gt;1&lt;/span&gt;&lt;span&gt;)
                {
                    &lt;/span&gt;&lt;span&gt;yield&lt;/span&gt; &lt;span&gt;return&lt;/span&gt; &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Default&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
                    &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
                }
                name &lt;/span&gt;= name.Substring(&lt;span&gt;0&lt;/span&gt;&lt;span&gt;, lastIndexOfDot);
            }
        }

        &lt;/span&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; IExternalScopeProvider GetScopeProvider()
        {
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (_includeScopes &amp;amp;&amp;amp; _scopeProvider == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
            {
                _scopeProvider &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; LoggerExternalScopeProvider();
            }
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; _includeScopes ? _scopeProvider : &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
        }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; Dispose()
        {
            _optionsReloadToken&lt;/span&gt;?&lt;span&gt;.Dispose();
            _messageQueue.Dispose();
        }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; SetScopeProvider(IExternalScopeProvider scopeProvider)
        {
            _scopeProvider &lt;/span&gt;=&lt;span&gt; scopeProvider;
        }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; ILogger CreateLogger(&lt;span&gt;string&lt;/span&gt;&lt;span&gt; name)
        {
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; _loggers.GetOrAdd(name, CreateLoggerImplementation);
        }

        &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; CustomizationLogger CreateLoggerImplementation(&lt;span&gt;string&lt;/span&gt;&lt;span&gt; name)
        {
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; includeScopes =&lt;span&gt;  _includeScopes; 
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;new&lt;/span&gt;  CustomizationLogger(name,&lt;span&gt;null&lt;br/&gt;&lt;/span&gt;,includeScopes? _scopeProvider: &lt;span&gt;null&lt;/span&gt;&lt;span&gt;,_messageQueue,_prix); &lt;span&gt;//è¿™é‡Œå°±æ˜¯ä½ çš„ç»ˆç«¯ç±»äº†ï¼Œé‡Œé¢å®ç°ä¸ºkafkaå‘æ¶ˆæ¯æˆ–è€…å†™åˆ°rediséƒ½è¡Œã€‚&lt;/span&gt;
       
            
        }
    }
&lt;/span&gt;&lt;span&gt;#pragma&lt;/span&gt; warning restore CS0618&lt;span&gt;
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;



&lt;p&gt;Â ä¸‹é¢æ‰“åŒ…ç„¶åä¸Šä¼ åˆ°nugetæœåŠ¡ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/46403/201812/46403-20181225144916557-1513420221.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â è°ƒç”¨æ–¹æŸ¥çœ‹åŒ…&lt;/p&gt;
&lt;p&gt;Â &lt;img src=&quot;https://img2018.cnblogs.com/blog/46403/201812/46403-20181225145018742-596761369.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœæ²¡æœ‰è¿™ä¸ªåŒ… dotnet addæ·»åŠ ï¼Œå¦‚æœæœ‰ï¼Œç›´æ¥æŠŠprojecté¡¹ç›®æ–‡ä»¶ä¸­çš„åŒ…ç‰ˆæœ¬æ”¹ä»¥ä¸‹ï¼Œrestoreå°±okäº†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿›è¡Œè°ƒç”¨ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/46403/201812/46403-20181225145453048-2013940811.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿è¡Œï¼šè¿˜è®°å¾—é…ç½®æ–‡ä»¶ä¸­çš„&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/46403/201812/46403-20181225145533734-1437371148.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªå°±æ˜¯ç”¨æ¥åšæµ‹è¯•çš„ï¼Œç›®å‰è¾“å‡ºè¿˜æ˜¯ç”¨consoleï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/46403/201812/46403-20181225145745353-773319886.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿è¡Œç»“æœï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/46403/201812/46403-20181225145812320-563509091.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;


&lt;p&gt;customizationLoggerçš„ç¨‹åºæ˜¯ä»consoleé‚£ä¸ªæä¾›ç¨‹åºä¸­æŒ–è¿‡æ¥çš„ï¼Œconsoleä¸­æœ‰å¾ˆå¤šçš„ä¸Šä¸€ä¸ªç‰ˆæœ¬çš„ä»£ç ï¼Œè€Œæˆ‘è‚¯å®šæ˜¯éœ€è¦æ–°çš„ï¼Œæ‰€ä»¥æŠŠObsoleteçš„ä»£ç å…¨éƒ¨åˆ é™¤ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯consoleçš„ç¨‹åºã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/46403/201812/46403-20181225115838548-1621995012.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;æ—¥å¿—ç¬¬ä¸‰éƒ¨åˆ†è®²é›†æˆkafkaï¼Œå¸Œæœ›å¤§å®¶å…³æ³¨å’Œè®¨è®ºã€‚&lt;/p&gt;

</description>
<pubDate>Tue, 25 Dec 2018 07:01:00 +0000</pubDate>
<dc:creator>ä¸€å¤œå¯’æ±Ÿ</dc:creator>
<og:description>ä¸€ netcoreæ—¥å¿—åŸç† netcoreçš„æ—¥å¿—æ˜¯ä½œä¸ºä¸€ä¸ªæ‰©å±•åº“å­˜åœ¨çš„ï¼Œæ¯ä¸ªç»„ä»¶éƒ½æœ‰å®ƒçš„å…¥å£ï¼Œé‚£ä¹ˆä½œä¸ºç ”ç©¶è¿™ä¸ªç»„ä»¶çš„å…¥å£æ˜¯æœ€å¥½çš„ï¼Œé¦–å…ˆçœ‹ä¸¤ç§æ–¹å¼ï¼š è¿™ä¸ªæ˜¯æºç ä¾‹å­æä¾›çš„ã€‚ 1 var loggingC</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/ck0074451665/p/10171668.html</dc:identifier>
</item>
<item>
<title>Socket ç¼–ç¨‹ä¹‹ TCP å®ç° - ä½™åŒå­¦çš„å¼€å‘ä¹‹è·¯</title>
<link>http://www.cnblogs.com/YJK923/p/10173918.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/YJK923/p/10173918.html</guid>
<description>&lt;p&gt;å‰å‡ å¤©ä»‹ç»äº†è®¡ç®—æœºç½‘ç»œçš„ä¸€äº›æ¦‚å¿µï¼Œå¹¶ä»‹ç»äº†å‡ ä¸ªåè®®ã€‚ä¸‹é¢å°±è¯´è¯´ Java ä¸­çš„ Socket ç¼–ç¨‹ï¼ŒæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯æ˜¯å¦‚ä½•é€šä¿¡çš„å‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;é¦–å…ˆè¦ä»‹ç»ä¸€ä¸‹ Socket ï¼Œæˆ‘ä»¬çŸ¥é“åœ¨ TCP/IP åè®®ç°‡ä¸­ï¼ŒTCPã€UDP åè®®éƒ½æ˜¯åœ¨ä¼ è¾“å±‚ï¼Œåº”ç”¨å±‚åŸºäºä¼ è¾“å±‚è¿›è¡Œé€šä¿¡ã€‚è€Œ Socket å¯ä»¥çœ‹æˆæ˜¯å¯¹ TCP ã€UDP åè®®çš„å®ç°ã€‚å…·ä½“åˆ°ç¼–ç¨‹çš„æ—¶å€™ï¼Œè¦çœ‹ä¸šåŠ¡é€‰æ‹©æ˜¯ä½¿ç”¨ TCP è¿˜æ˜¯ UDP åè®®ã€‚ä»Šå¤©ä¸»è¦è®²çš„å°±æ˜¯åŸºäº TCP é€šä¿¡çš„ Socket å®ç°ã€‚è‹¥ä½ å¯¹ TCP è¿˜ä¸ç†Ÿæ‚‰ã€‚&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzI3MzY4Nzg0OQ==&amp;amp;mid=2247484047&amp;amp;idx=1&amp;amp;sn=8fb05f571aa66559b4d09787fbb68e72&amp;amp;chksm=eb1e36c9dc69bfdf971ad94830830c27fe0c91b575fdf78503dc2b621e82f85fddbb74b1787b&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot;&gt;å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ã€‚&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Java ä¸­ä¸º TCP åè®®æä¾›äº†ä¸¤ä¸ªç±»ï¼šSocket ç±»å’Œ ServerSocket ç±»ã€‚ä¸€ä¸ª Socket å®ä¾‹ä»£è¡¨äº† TCP è¿æ¥çš„ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œè€Œä¸€ä¸ª ServerSocket å®ä¾‹ä»£è¡¨äº† TCP è¿æ¥çš„ä¸€ä¸ªæœåŠ¡å™¨ç«¯ï¼Œä¸€èˆ¬åœ¨ TCP Socket ç¼–ç¨‹ä¸­ï¼Œå®¢æˆ·ç«¯æœ‰å¤šä¸ªï¼Œè€ŒæœåŠ¡å™¨ç«¯åªæœ‰ä¸€ä¸ªï¼Œå®¢æˆ·ç«¯ TCP å‘æœåŠ¡å™¨ç«¯ TCP å‘é€è¿æ¥è¯·æ±‚ï¼ŒæœåŠ¡å™¨ç«¯çš„ ServerSocket å®ä¾‹åˆ™ç›‘å¬æ¥è‡ªå®¢æˆ·ç«¯çš„ TCP è¿æ¥è¯·æ±‚ï¼Œå¹¶ä¸ºæ¯ä¸ªè¯·æ±‚åˆ›å»ºæ–°çš„ Socket å®ä¾‹ï¼Œç”±äºæœåŠ¡ç«¯åœ¨è°ƒç”¨ acceptï¼ˆï¼‰ç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚æ—¶ä¼šé˜»å¡ï¼Œç›´åˆ°æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„è¿æ¥è¯·æ±‚æ‰ä¼šç»§ç»­å¾€ä¸‹æ‰§è¡Œä»£ç ï¼Œå› æ­¤è¦ä¸ºæ¯ä¸ª Socket è¿æ¥å¼€å¯ä¸€ä¸ªçº¿ç¨‹ï¼ˆè¿™é‡Œå°±æ˜¯å¤šçº¿ç¨‹çš„åº”ç”¨å•Šï¼‰ã€‚æœåŠ¡å™¨ç«¯è¦åŒæ—¶å¤„ç† ServerSocket å®ä¾‹å’Œ Socket å®ä¾‹ï¼Œè€Œå®¢æˆ·ç«¯åªéœ€è¦ä½¿ç”¨ Socket å®ä¾‹ã€‚&lt;/p&gt;

&lt;p&gt;å¦å¤–ï¼Œæ¯ä¸ª Socket å®ä¾‹ä¼šå…³è”ä¸€ä¸ª InputStream å’Œ OutputStream å¯¹è±¡ï¼Œæˆ‘ä»¬é€šè¿‡å°†å­—èŠ‚å†™å…¥ Socket çš„ OutputStream æ¥å‘é€æ•°æ®ï¼Œå¹¶é€šè¿‡ä» InputStream æ¥æ¥æ”¶æ•°æ®ã€‚&lt;/p&gt;

&lt;p&gt;å¥½å§ï¼Œä¸Šé¢çš„æè¿°å¯èƒ½æœ‰ç‚¹æ‡µï¼Œä¸‹é¢å°±æ¥çœ‹ä¸€ä¸ª demoã€‚ä½¿ç”¨ Socket å®ç°ä¸€ä¸ªç®€å•çš„äº¤äº’ï¼Œåœ¨æœåŠ¡å™¨ç«¯ä½¿ç”¨å¤šçº¿ç¨‹æ¥å¤„ç†è¯·æ±‚ã€‚&lt;/p&gt;

&lt;p&gt;å®¢æˆ·ç«¯å®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;37&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
public class Client {
    public static void main(String[] args) throws IOException {
        Socket socket = null;
        PrintWriter pw = null;
        BufferedReader br = null;
        try {
            // åˆ›å»ºSocketå¯¹è±¡ï¼ŒæŒ‡æ˜éœ€è¦è¿æ¥çš„æœåŠ¡å™¨åœ°å€å’Œç«¯å£
            socket = new Socket(&quot;localhost&quot;, 6688);

            // è¿æ¥å»ºç«‹åï¼Œé€šè¿‡ Socket è¾“å‡ºæµå‘æœåŠ¡å™¨ç«¯å‘é€è¯·æ±‚ä¿¡æ¯ 
            pw = new PrintWriter(socket.getOutputStream());
            pw.write(&quot;Hello , server . I'm Client !&quot;);
            pw.flush();
            socket.shutdownOutput();

            // é€šè¿‡è¾“å…¥æµè·å–æœåŠ¡å™¨ç«¯è¿”å›çš„å“åº”ä¿¡æ¯ï¼›
            br = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            String info = null;
                while((info = br.readLine()) != null){
                    System.out.println(&quot;æœåŠ¡å™¨è¿”å›ä¿¡æ¯ï¼š &quot;+ info);
            }
            socket.shutdownInput();

        ----åé¢çš„é”™è¯¯å¤„ç†å’Œå…³é—­èµ„æºçœç•¥-----
    }
}
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;æœåŠ¡å™¨ç«¯å®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
public class Server {
    public static void main(String[] args) throws IOException {
        Socket socket = null;
        try {
            // åˆ›å»ºServerSocketå¯¹è±¡ï¼Œç»‘å®šç›‘å¬ç«¯å£
            ServerSocket serverSocket = new ServerSocket(6688);
            while(true){
                // é€šè¿‡accept()æ–¹æ³•ç›‘å¬å®¢æˆ·ç«¯è¯·æ±‚
                socket =serverSocket.accept();
                ServerThread serverThread = new ServerThread(socket);
                serverThread.start();
            }
    }
}
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;çº¿ç¨‹å…·ä½“å®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
public class ServerThread extends Thread {
    Socket socket = null;
    BufferedReader br = null;
    PrintWriter pw = null;

    public ServerThread(Socket socket){
        this.socket = socket;
    }

    @Override
    public void run() {
        try {
            // è¿æ¥å»ºç«‹åï¼Œé€šè¿‡è¾“å…¥æµè¯»å–å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚ä¿¡æ¯ msg
            br = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            StringBuffer msg = new StringBuffer();
            String info = null;
            while((info = br.readLine()) != null){
                msg.append(info);
            }
            System.out.println(&quot;æœåŠ¡å™¨æ”¶åˆ° [ &quot;+ socket.getInetAddress()+&quot; ] çš„æ¶ˆæ¯ [ &quot; + msg+&quot; ]&quot;);
            socket.shutdownInput();

            // é€šè¿‡è¾“å‡ºæµå‘å®¢æˆ·ç«¯å‘é€ç›¸åº”ä¿¡æ¯
            pw = new PrintWriter(socket.getOutputStream());
            pw.write(&quot; success !&quot;);
            pw.flush();
            socket.shutdownOutput();
        } 
    }
}
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;æ€»ç»“ä¸€ä¸‹ Socket TCP ä¸­å®æˆ˜çš„æ­¥éª¤ã€‚&lt;/p&gt;

&lt;p&gt;æœåŠ¡å™¨ç«¯ï¼š&lt;/p&gt;
&lt;p&gt;(1) åˆ›å»ºServerSocketå¯¹è±¡ï¼Œç»‘å®šç›‘å¬ç«¯å£ï¼›&lt;br/&gt;(2) é€šè¿‡accept()æ–¹æ³•ç›‘å¬å®¢æˆ·ç«¯è¯·æ±‚ï¼›&lt;br/&gt;(3) è¿æ¥å»ºç«‹åï¼Œé€šè¿‡è¾“å…¥æµè¯»å–å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚ä¿¡æ¯ï¼›&lt;br/&gt;(4) é€šè¿‡è¾“å‡ºæµå‘å®¢æˆ·ç«¯å‘é€ç›¸åº”ä¿¡æ¯ï¼›&lt;/p&gt;
&lt;p&gt;(5) å…³é—­å“åº”èµ„æºã€‚&lt;/p&gt;

&lt;p&gt;å®¢æˆ·ç«¯ï¼š&lt;/p&gt;
&lt;p&gt;(1) åˆ›å»ºSocketå¯¹è±¡ï¼ŒæŒ‡æ˜éœ€è¦è¿æ¥çš„æœåŠ¡å™¨åœ°å€å’Œç«¯å£ï¼›&lt;br/&gt;(2) è¿æ¥å»ºç«‹åï¼Œé€šè¿‡è¾“å‡ºæµå‘æœåŠ¡å™¨ç«¯å‘é€è¯·æ±‚ä¿¡æ¯ï¼›&lt;br/&gt;(3) é€šè¿‡è¾“å…¥æµè·å–æœåŠ¡å™¨ç«¯è¿”å›çš„å“åº”ä¿¡æ¯ï¼›&lt;/p&gt;
&lt;p&gt;(4) å…³é—­å“åº”èµ„æºã€‚&lt;/p&gt;

&lt;p&gt;æ³¨æ„ï¼š&lt;/p&gt;
&lt;p&gt;1 é¦–å…ˆæ‰§è¡ŒæœåŠ¡å™¨ç«¯ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;2 æœåŠ¡å™¨ç«¯æ‰§è¡Œä¹‹åé»˜è®¤å°±ä¸€ç›´åœ¨ç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;3 ä»¥ä¸Šåªæ˜¯ä¸€ä¸ªéå¸¸åŸºç¡€çš„æ¡ˆä¾‹ï¼Œè¿™åªæ˜¯ Socket ç¼–ç¨‹çš„å†°å±±ä¸€è§’ã€‚&lt;/p&gt;
&lt;p&gt;4 å¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹è¿˜æœ‰å¾ˆå¤šï¼ŒæœåŠ¡å™¨ç«¯å‚æ•°çš„ä¼˜åŒ–ï¼Œå¦‚ï¼Œæ¥å—æ•°æ®çš„ç¼“å†²åŒºå¤§å°ã€ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥çš„æœ€é•¿æ—¶é—´ã€ä½¿ç”¨çº¿ç¨‹æ± å¤„ç†è¯·æ±‚ç­‰ã€‚&lt;/p&gt;
</description>
<pubDate>Tue, 25 Dec 2018 06:54:00 +0000</pubDate>
<dc:creator>ä½™åŒå­¦çš„å¼€å‘ä¹‹è·¯</dc:creator>
<og:description>å‰å‡ å¤©ä»‹ç»äº†è®¡ç®—æœºç½‘ç»œçš„ä¸€äº›æ¦‚å¿µï¼Œå¹¶ä»‹ç»äº†å‡ ä¸ªåè®®ã€‚ä¸‹é¢å°±è¯´è¯´ Java ä¸­çš„ Socket ç¼–ç¨‹ï¼ŒæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯æ˜¯å¦‚ä½•é€šä¿¡çš„å‘¢ï¼Ÿ é¦–å…ˆè¦ä»‹ç»ä¸€ä¸‹ Socket ï¼Œæˆ‘ä»¬çŸ¥é“åœ¨ TCP/IP åè®®ç°‡ä¸­ï¼Œ</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/YJK923/p/10173918.html</dc:identifier>
</item>
<item>
<title>0/1åˆ†æ•°è§„åˆ’ï¼Ÿæˆ‘ä¸ä¼šå•Šï¼ - Judge_Cheung</title>
<link>http://www.cnblogs.com/Judge/p/10173795.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/Judge/p/10173795.html</guid>
<description>&lt;p&gt;æœ€è¿‘å…¥é—¨äº† 0/1 åˆ†æ•°è§„åˆ’ï¼Œäºæ˜¯å†™ç¯‡åšå®¢çºªå¿µ&lt;/p&gt;
&lt;p&gt;åˆ†æ•°è§„åˆ’æ˜¯ä¸€é¡¹ä¸å¸¸ç”¨åˆ°çš„ï¼ˆä½†è¿˜è›®å®ç”¨çš„ï¼‰ç®—æ³•ï¼Œä¸€èˆ¬æ¥è®²å°±æ˜¯æ±‚ä¸€ä¸ªæœ€ä¼˜æ¯”ç‡ã€‚&lt;/p&gt;
&lt;h2 id=&quot;åˆ†æ•°è§„åˆ’çš„ç®€å•ä»‹ç»&quot;&gt;åˆ†æ•°è§„åˆ’çš„ç®€å•ä»‹ç»&lt;/h2&gt;
&lt;p&gt;åˆ†æ•°è§„åˆ’é¡¾åæ€ä¹‰å°±æ˜¯æ±‚ä¸€ä¸ªåˆ†æ•°è¡¨è¾¾å¼çš„æœ€å¤§ï¼ˆå°ï¼‰å€¼ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚è¯´æœ‰ n ä¸ªç‰©å“ï¼Œæ¯ä¸ªç‰©å“æœ‰ä¸¤ä¸ªæƒå€¼ a å’Œ b ï¼Œç„¶åè®©ä½ é€‰å‡º&lt;strong&gt;ä»»æ„ä»¶æ•°&lt;/strong&gt;ï¼ˆä½†å¯èƒ½ä¼šæœ‰é™åˆ¶ï¼‰çš„ç‰©å“ï¼Œä½¿å¾—ä¸¤ä¸ª&lt;strong&gt;æƒå€¼å’Œ&lt;/strong&gt;é—´çš„æ¯”å€¼æœ€å¤§ï¼Œå³æ±‚ &lt;span class=&quot;math inline&quot;&gt;\(\dfrac{\sum_{i=1}^{k} a[i]}{\sum_{j=1}^{k} b[j]}\)&lt;/span&gt; ï¼ˆåœ¨è¿™é‡Œ &lt;span class=&quot;math inline&quot;&gt;\(1-k\)&lt;/span&gt; ä¸ºæŒ‘å‡ºçš„ k ä»¶ç‰©å“ï¼‰çš„æœ€å¤§å€¼ï¼Œç„¶åå¯¹é€‰æ‹©ç‰©å“æ–¹é¢ç»™å‡º&lt;strong&gt;ä¸€å®šçš„é™åˆ¶æ¡ä»¶&lt;/strong&gt;ï¼Œé‚£ä¹ˆä¸€é“ 0/1 åˆ†æ•°è§„åˆ’çš„é¢˜ç›®å°±å®Œæˆäº†&lt;/p&gt;
&lt;h2 id=&quot;åˆ†æ•°è§„åˆ’çš„æ±‚è§£æ–¹æ³•&quot;&gt;åˆ†æ•°è§„åˆ’çš„æ±‚è§£æ–¹æ³•&lt;/h2&gt;
&lt;p&gt;åˆ†æ•°è§„åˆ’æœ‰ä¸¤ç§æ±‚è§£æ–¹æ³•ï¼Œä¸€ç§æ˜¯ &lt;strong&gt;äºŒåˆ†æ³•&lt;/strong&gt;ï¼Œè€Œå¦ä¸€ç§åˆ™æ˜¯ &lt;strong&gt;Dinkelbach ç®—æ³•&lt;/strong&gt;ï¼Œä¸€èˆ¬æ¥è®²æˆ‘ä»¬é€‰ç”¨ç¬¬ä¸€ç§æ–¹æ³•è¿›è¡Œåˆ†æ•°è§„åˆ’æ±‚è§£&lt;/p&gt;
&lt;h3 id=&quot;äºŒåˆ†æ³•&quot;&gt;1.äºŒåˆ†æ³•&lt;/h3&gt;
&lt;p&gt;é—®é¢˜åŒä¸Šï¼Œæ±‚ &lt;span class=&quot;math inline&quot;&gt;\(\dfrac{\sum_{i=1}^{k} a[i]}{\sum_{j=1}^{k} b[j]}\)&lt;/span&gt; çš„æœ€å¤§å€¼ï¼Œç„¶ååŠ ä¸Šä¸€ä¸ªé™åˆ¶ï¼š&lt;span class=&quot;math inline&quot;&gt;\(k&amp;gt;=W\)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä»¤ &lt;span class=&quot;math inline&quot;&gt;\(sum=\sum_{i=1}^{k} a[i] ,\ tot=\sum_{j=1}^{k} b[j]\)&lt;/span&gt; ï¼Œ&lt;span class=&quot;math inline&quot;&gt;\(k&amp;gt;=W\)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åå‡è®¾é—®é¢˜ä¸­çš„æœ€ä¼˜è§£ä¸º &lt;span class=&quot;math inline&quot;&gt;\(ans\)&lt;/span&gt; ï¼Œé‚£ä¹ˆå¿…ç„¶æœ‰ï¼š&lt;br/&gt;&lt;span class=&quot;math display&quot;&gt;\[\dfrac{sum}{tot}&amp;lt;=ans\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ç§»é¡¹å¾—ï¼š&lt;br/&gt;&lt;span class=&quot;math display&quot;&gt;\[sum&amp;lt;=ans\times tot\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ç»§ç»­ç§»å°±å¾—åˆ°ï¼š&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math display&quot;&gt;\[sum-ans\times tot&amp;lt;=0\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ ·è½¬åŒ–æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿé‚£æˆ‘ä»¬å°è¯•å°† &lt;span class=&quot;math inline&quot;&gt;\(sum\)&lt;/span&gt; å’Œ &lt;span class=&quot;math inline&quot;&gt;\(tot\)&lt;/span&gt; å¸¦å›å»ï¼Œå°±å¯ä»¥å¾—åˆ°è¿™ä¹ˆä¸€ä¸ªå¼å­ï¼š&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math display&quot;&gt;\[\sum_{i=1}^{k} (a[i]-b[i]\times ans) &amp;lt;=0\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªå¼å­ä¸éš¾ç†è§£ï¼Œå°±æ˜¯æŠŠæ•´ä½“çš„è´¡çŒ®è½¬åŒ–ä¸ºäº†å•ä»¶ç‰©å“çš„è´¡çŒ®ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦äºŒåˆ†è¿™ä¸ª ansï¼Œ è®¡ç®—å‡ºæ¯ä»¶ç‰©å“çš„ &lt;span class=&quot;math inline&quot;&gt;\(a-b\times ans\)&lt;/span&gt;ï¼Œç„¶åæ’ä¸ªåºï¼Œè´ªå¿ƒå–å‰ &lt;span class=&quot;math inline&quot;&gt;\(W\)&lt;/span&gt; ä¸ªåŠ èµ·æ¥ï¼Œçœ‹çœ‹æœ€åçš„å€¼æ˜¯å¦ &lt;span class=&quot;math inline&quot;&gt;\(&amp;lt;=0\)&lt;/span&gt; ï¼Œç„¶åå°±å¯ä»¥æ ¹æ®ç»“æœç§»åŠ¨å·¦å³è¾¹ç•Œäº†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;dinkelbach-ç®—æ³•&quot;&gt;2.Dinkelbach ç®—æ³•&lt;/h3&gt;
&lt;p&gt;è¿™ä¸ªç®—æ³•å…¶å®å°±æ˜¯ä»¥äºŒåˆ†å‡½æ•°å›¾åƒçš„å•è°ƒæ€§ä¸ºåŸç†ï¼Œåˆ©ç”¨äº†checkä¸­è®¡ç®—å¾—å‡ºçš„ç»“æœï¼Œé€šè¿‡&lt;strong&gt;æ”¹å˜äºŒåˆ†æšä¸¾çš„ä¸­é—´ç‚¹åœ¨å›¾åƒä¸Šçš„ä½ç½®&lt;/strong&gt;æ¥ä¼˜åŒ–äºŒåˆ†ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åå…ˆç»™ä¸€å¼ å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdn.net/20170206231632579?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaHpvaV96dHg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast&quot;/&gt;&lt;/p&gt;
&lt;p&gt;åœ¨è¿™é‡Œæˆ‘ä»¬çœ‹åˆ°æ¯æ¬¡æšä¸¾çš„ä¸­é—´ç‚¹éƒ½åœ¨ä¸€æ¡ç›´çº¿ä¸Šï¼ˆä½†å•ä¸€çš„ç›´çº¿å¹¶ä¸æ˜¯äºŒåˆ†çš„å‡½æ•°å›¾åƒï¼‰ï¼Œé‚£ä¹ˆå¯¹äºæšä¸¾å‡ºçš„ä¸­é—´ç‚¹å…¶å®å¯ä»¥ä¸ç€æ€¥æ‰”ï¼Œå…ˆè®¡ç®—å‡ºå½“å‰ç‚¹æ‰€åœ¨çš„ç›´çº¿ï¼Œç„¶åæ‰¾åˆ°è¿™æ¡ç›´çº¿åœ¨ x è½´ä¸Šçš„æˆªè·ï¼Œç”¨è¿™ä¸ªæˆªè·ä½œä¸ºä¸‹ä¸€æ¬¡äºŒåˆ†çš„ä¸­é—´ç‚¹ï¼Œè¿™æ ·å¯èƒ½ä¼šæ›´å¿«é€¼è¿‘æ­£ç¡®ç­”æ¡ˆ&lt;/p&gt;
&lt;p&gt;ç„¶é¹…è¿™ä¸ªç®—æ³•çš„æ•ˆæœå´ä¸è§çš„æœ‰å¤šä¹ˆä¼˜ç§€ï¼Œå› ä¸ºäºŒåˆ†çš„å‡½æ•°å›¾åƒæœ‰å¯èƒ½æ˜¯&lt;strong&gt;å‘å‘æ´¼æ´¼çš„&lt;/strong&gt;ï¼Œæ‰€ä»¥æœ‰æ—¶è¿™ä¸ªç®—æ³•è·‘æ•°æ®çš„æ—¶é—´åè€Œæ¯”äºŒåˆ†å¤§ï¼Œä½†æ˜¯å¦‚æœå›¾åƒæ˜¯&lt;strong&gt;è¾ƒä¸ºå…‰æ»‘çš„å¼§çº¿&lt;/strong&gt;ï¼Œæˆ–è®¸&lt;span class=&quot;math inline&quot;&gt;\(Dinkelbach\)&lt;/span&gt; ç®—æ³•å°±èƒ½å……åˆ†å±•ç°å®ƒçš„ä¼˜åŠ¿äº†&lt;/p&gt;
&lt;p&gt;è‡³äºå…¶ä»–çš„åœ°æ–¹ï¼ˆåŒ…æ‹¬è¯æ˜ï¼‰ï¼Œå’ŒäºŒåˆ†å…¶å®å·®ä¸å¤šï¼Œå°±ä¸å•°å—¦äº†&lt;/p&gt;
&lt;h2 id=&quot;åˆ†æ•°è§„åˆ’çš„æœ‰æœºç»“åˆ&quot;&gt;åˆ†æ•°è§„åˆ’çš„æœ‰æœºç»“åˆ&lt;/h2&gt;
&lt;p&gt;åˆ†æ•°è§„åˆ’ä¸€èˆ¬æ¥è®²ä¸ä¼šå•ç‹¬æˆé¢˜ï¼Œä¸€èˆ¬æ¥è®²æœ‰ä»¥ä¸‹å‡ ç§å½¢å¼ï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;0.ä¸ä¸ä»»ä½•ç®—æ³•ç»“åˆï¼Œå³åˆ†æ•°è§„åˆ’è£¸é¢˜&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;1.ä¸&lt;span class=&quot;math inline&quot;&gt;\(0/1\)&lt;/span&gt;èƒŒåŒ…ç»“åˆï¼Œå³æœ€ä¼˜æ¯”ç‡èƒŒåŒ…&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;2.ä¸ç”Ÿæˆæ ‘ç»“åˆï¼Œå³æœ€ä¼˜æ¯”ç‡ç”Ÿæˆæ ‘&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;3.ä¸è´Ÿç¯åˆ¤å®šç»“åˆï¼Œå³æœ€ä¼˜æ¯”ç‡ç¯&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;4.ä¸ç½‘ç»œæµç»“åˆï¼Œå³æœ€å¤§å¯†åº¦å­å›¾&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;5.ä¸è´¹ç”¨æµç»“åˆï¼Œå³æœ€ä¼˜æ¯”ç‡æµï¼ˆè¿™ä¸ªæ˜¯æˆ‘ä¹±å«çš„ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;6.ä¸å…¶ä»–çš„å„ç§å¸¦é€‰æ‹©çš„ç®—æ³•ä¹±å¥—ï¼Œå³æœ€ä¼˜æ¯”ç‡å•¥å•¥çš„...&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¯¹äºä¸Šé¢çš„åä¸‰ä¸ªç»“åˆå›¾è®ºç®—æ³•ï¼Œå…¶å®ç±»ä¼¼æ˜¯æŠŠä¾›é€‰æ‹©çš„ç‰©å“å˜ä¸ºäº†å›¾ä¸­çš„è¾¹ï¼Œç„¶åé™åˆ¶æ¡ä»¶æ±‚è§£æœ€ä¼˜æ¯”ç‡ã€‚&lt;/p&gt;
&lt;h3 id=&quot;åˆ†æ•°è§„åˆ’è£¸é¢˜&quot;&gt;0.åˆ†æ•°è§„åˆ’è£¸é¢˜&lt;/h3&gt;
&lt;p&gt;è¿™ä¸ªåœ¨ä»‹ç»äºŒåˆ†ç®—æ³•çš„æ—¶å€™è®²è¿‡äº†&lt;/p&gt;
&lt;h4 id=&quot;é¢˜ç›®&quot;&gt;é¢˜ç›®&lt;/h4&gt;
&lt;p&gt;&lt;a href=&quot;http://poj.org/problem?id=2976&quot;&gt;Dropping tests&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&quot;ä»£ç &quot;&gt;ä»£ç &lt;/h4&gt;
&lt;pre class=&quot;cpp&quot;&gt;
&lt;code&gt;//by Judge
#include&amp;lt;cstdio&amp;gt;
#include&amp;lt;cstring&amp;gt;
#include&amp;lt;iostream&amp;gt;
#include&amp;lt;algorithm&amp;gt;
#define eps 1e-4
using namespace std;
const int M=1005;
#ifndef Judge
#define getchar() (p1==p2&amp;amp;&amp;amp;(p2=(p1=buf)+fread(buf,1,1&amp;lt;&amp;lt;21,stdin),p1==p2)?EOF:*p1++)
#endif
char buf[1&amp;lt;&amp;lt;21],*p1=buf,*p2=buf;
inline int read(){ int x=0,f=1; char c=getchar();
    for(;!isdigit(c);c=getchar()) if(c=='-') f=-1;
    for(;isdigit(c);c=getchar()) x=x*10+c-'0'; return x*f;
} int n,k; double a[M],b[M],c[M],l,r=1e6,mid,sum;
inline bool check(){
    for(int i=1;i&amp;lt;=n;++i)
        c[i]=a[i]-b[i]*mid;
    sort(c+1,c+1+n),sum=0;
    for(int i=k;i&amp;lt;=n;++i)
        sum+=c[i];
    return sum&amp;gt;=0;
}
int main(){
    while(1){
        n=read(),k=read();
        if(!n&amp;amp;&amp;amp;!k) return 0;
        l=0,r=1e6,++k;
        for(int i=1;i&amp;lt;=n;++i)
            a[i]=read();
        for(int i=1;i&amp;lt;=n;++i)
            b[i]=read();
        while(r-l&amp;gt;eps){
            mid=(l+r)/2;
            check()?l=mid:r=mid;
        }
        printf(&quot;%.0lf\n&quot;,100.0*l);
    }
    return 0;
}&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;æœ€ä¼˜æ¯”ç‡èƒŒåŒ…&quot;&gt;1.æœ€ä¼˜æ¯”ç‡èƒŒåŒ…&lt;/h3&gt;
&lt;p&gt;é¢˜ç›®å¤§æ„å’Œè£¸é¢˜çš„å·®ä¸å¤šï¼Œä¹Ÿæ˜¯æ±‚ n ä¸ªç‰©å“ä¸­ï¼Œ&lt;span class=&quot;math inline&quot;&gt;\(\dfrac{\sum_{i=1}^{k} a[i]}{\sum_{j=1}^{k} b[j]}\)&lt;/span&gt; çš„æœ€å¤§å€¼ï¼Œä½†æ˜¯æ¡ä»¶æœ‰å˜åŒ–ï¼Œè¿™æ¬¡æˆ‘ä»¬è¦å¯¹æƒå€¼ b è¿›è¡Œé™åˆ¶ï¼Œé¦–å…ˆæˆ‘ä»¬è¿˜æ˜¯ä»¤ &lt;span class=&quot;math inline&quot;&gt;\(sum=\sum_{i=1}^{k} a[i] ,\ tot=\sum_{j=1}^{k} b[j]\)&lt;/span&gt; ï¼Œé‚£ä¹ˆé™åˆ¶æ¡ä»¶å°±æ˜¯ &lt;span class=&quot;math inline&quot;&gt;\(tot&amp;gt;=W\)&lt;/span&gt;ï¼ˆ&lt;span class=&quot;math inline&quot;&gt;\(W\)&lt;/span&gt;å·²ç»™å‡ºï¼‰&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆè¿™ä¸ªæ—¶å€™æˆ‘ä»¬è®¾å®Œ &lt;span class=&quot;math inline&quot;&gt;\(ans\)&lt;/span&gt; ä¹‹åå¾—åˆ°çš„å¼å­åŒæ ·æ˜¯ï¼š&lt;br/&gt;&lt;span class=&quot;math display&quot;&gt;\[\sum_{i=1}^{k} (a[i]-b[i]\times ans) &amp;lt;=0\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;äºæ˜¯ &lt;span class=&quot;math inline&quot;&gt;\(ans\)&lt;/span&gt; ç…§å¸¸äºŒåˆ†ï¼Œå¯¹äºæ¡ä»¶æˆç«‹çš„åˆ¤æ–­æ–¹å¼å˜ä¸€å˜å°±å¥½äº†ã€‚&lt;/p&gt;
&lt;p&gt;å…¶å®ä½ åº”è¯¥ä¹ŸçŒœåˆ°äº†åˆ¤æ–­æ–¹å¼ï¼ŒåŸå…ˆæˆ‘ä»¬ä¸æ˜¯è´ªå¿ƒå–å‰é¢çš„ k ä¸ªæ•°ä¹ˆï¼Œé‚£è¿™æ¬¡æˆ‘ä»¬æŠŠè´ªå¿ƒæ”¹æˆèƒŒåŒ…å°±å¥½äº†å•Š&lt;/p&gt;
&lt;p&gt;é‚£æ ·çš„è¯ï¼Œå¯¹äºæ¯ä¸ªç‰©å“æ¥è¯´ï¼Œä½“ç§¯å°±æ˜¯ b ï¼Œè€Œä»·å€¼å°±æ˜¯ä¸Šé¢çš„ &lt;span class=&quot;math inline&quot;&gt;\(a[i]-b[i]\times ans\)&lt;/span&gt;ï¼Œç„¶åæˆ‘ä»¬è·‘ 0/1 èƒŒåŒ…ï¼Œåˆ¤æ–­æ»¡èƒŒåŒ…ä»·å€¼çš„æ­£è´Ÿæ€§ã€‚&lt;/p&gt;
&lt;h4 id=&quot;é¢˜ç›®-1&quot;&gt;é¢˜ç›®&lt;/h4&gt;
&lt;p&gt;&lt;a href=&quot;https://www.luogu.org/problemnew/show/P4377&quot;&gt;Talent Show&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&quot;ä»£ç -1&quot;&gt;ä»£ç &lt;/h4&gt;
&lt;pre class=&quot;cpp&quot;&gt;
&lt;code&gt;//by Judge
#include&amp;lt;cstdio&amp;gt;
#include&amp;lt;cstring&amp;gt;
#include&amp;lt;iostream&amp;gt;
#define ll long long
using namespace std;
#ifndef Judge
#define getchar() (p1==p2&amp;amp;&amp;amp;(p2=(p1=buf)+fread(buf,1,1&amp;lt;&amp;lt;21,stdin),p1==p2)?EOF:*p1++)
#endif
inline void cmax(ll&amp;amp; a,ll b){if(a&amp;lt;b)a=b;}
inline int Min(int a,int b){return a&amp;lt;b?a:b;}
char buf[1&amp;lt;&amp;lt;21],*p1=buf,*p2=buf;
inline int read(){ int x=0,f=1; char c=getchar();
    for(;!isdigit(c);c=getchar()) if(c=='-') f=-1;
    for(;isdigit(c);c=getchar()) x=x*10+c-'0'; return x*f;
} int n,l,r=1e6,mid,V,t[305]; ll w[305],f[10005];
inline bool check(int tim){
    memset(f,-0x3f,sizeof(f)),f[0]=0;
    ll tmp=f[V];
    for(int i=1,j,k;i&amp;lt;=n;++i)
        for(j=V;~j;--j) if(f[j]!=tmp){
            cmax(f[Min(j+w[i],V)],f[j]+t[i]-w[i]*tim);
        }
    return f[V]&amp;gt;=0;
}
inline int calc(){
    while(l&amp;lt;=r){
        mid=l+r&amp;gt;&amp;gt;1;
        check(mid)?l=mid+1:r=mid-1;
    }
    return r;
}
int main(){
    n=read(),V=read();
    for(int i=1;i&amp;lt;=n;++i){
        w[i]=read(),
        t[i]=read()*1000;
    }
    return !printf(&quot;%d\n&quot;,calc());
}&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;æœ€ä¼˜æ¯”ç‡ç”Ÿæˆæ ‘&quot;&gt;2.æœ€ä¼˜æ¯”ç‡ç”Ÿæˆæ ‘&lt;/h3&gt;
&lt;p&gt;å¯¹äºæ„é€ æœ€ä¼˜æ¯”ç‡ç”Ÿæˆæ ‘çš„åˆ†æ•°è§„åˆ’ï¼Œå…¶å®å·®ä¸å¤šç±»ä¼¼æ˜¯å°† &lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt; ç‰©å“è½¬æ¢ä¸º &lt;span class=&quot;math inline&quot;&gt;\(m\)&lt;/span&gt; æ¡è¾¹ï¼Œç„¶åæ±‚è§£ï¼Œåªä¸è¿‡é™åˆ¶æ”¹äº†ï¼Œé€‰å‡ºçš„ &lt;span class=&quot;math inline&quot;&gt;\(n-1\)&lt;/span&gt; æ¡è¾¹è¦æ„æˆä¸€æ£µæ ‘&lt;/p&gt;
&lt;p&gt;å…·ä½“ç‚¹è¯´ï¼Œé¢˜ç›®ä¸€èˆ¬ä¼šç»™ä½ ä¸€å¼ å›¾ï¼ˆæœ‰æ—¶å€™æ˜¯å®Œå…¨å›¾ï¼‰ï¼Œç„¶åç»™ä½  n ä¸ªç‚¹ m æ¡è¾¹ï¼Œæ±‚å‡ºåŸå›¾åŒ…å« n ä¸ªç‚¹çš„ä¸€æ£µæ ‘ï¼Œä½¿å¾—&lt;strong&gt;æ‰€é€‰çš„è¾¹çš„ä¸¤ä¸ªæƒå€¼å’Œæ¯”å€¼&lt;/strong&gt;æœ€å¤§&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆæ±‚æ³•å‘¢ï¼Œå…¶å®ä¹Ÿå¾ˆç±»ä¼¼ï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;4&quot;&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;æˆ‘ä»¬è€ƒè™‘æ„é€ æœ€å°ç”Ÿæˆæ ‘çš„æ—¶å€™ï¼Œè¾¹æ˜¯ä»å°åˆ°å¤§åŠ çš„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;blockquote readability=&quot;4&quot;&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;é‚£ä¹ˆå¯¹äºæ¯ä¸€æ¡è¾¹ï¼Œæˆ‘ä»¬è®©ä»–çš„è¾¹æƒä¸º &lt;span class=&quot;math inline&quot;&gt;\(a[i]-b[i]\times ans\)&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;blockquote readability=&quot;4.5&quot;&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;ç„¶åå’Œå…‹é²æ–¯å¡å°”ä¸€æ ·æ’ä¸ªåºä¸€æ¡ä¸€æ¡å°è¯•åŠ å°±å¥½äº†ï¼ˆç„¶é¹…æœ‰æ—¶å€™ä½ å¾—å°è¯•æ™®é‡Œå§†ç®—æ³•ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;blockquote readability=&quot;4&quot;&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;å¦‚æœåŠ æˆåŠŸäº†å°±ç´¯è®¡å…¥ &lt;span class=&quot;math inline&quot;&gt;\(sum\)&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;blockquote readability=&quot;4&quot;&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;æœ€åæ ¹æ® &lt;span class=&quot;math inline&quot;&gt;\(sum\)&lt;/span&gt; çš„æ­£è´Ÿæ€§æ¥åˆ¤æ–­ &lt;span class=&quot;math inline&quot;&gt;\(check\)&lt;/span&gt; çš„è¿”å›å€¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;p&gt;å…¶å®å’Œå‰é¢ä¸¤ä¸ªæ²¡é«˜æ˜åˆ°å“ªé‡Œå»ï¼ŒåŸºæœ¬æƒ³æ³•ä¸€æ ·çš„&lt;/p&gt;
&lt;h4 id=&quot;é¢˜ç›®-2&quot;&gt;é¢˜ç›®&lt;/h4&gt;
&lt;p&gt;&lt;a href=&quot;http://poj.org/problem?id=2728&quot;&gt;Desert King&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&quot;ä»£ç -2&quot;&gt;ä»£ç &lt;/h4&gt;
&lt;p&gt;ï¼ˆæ…¢ç€ï¼Œkruskalä¼šç‚¸ï¼Ÿè¿˜æ˜¯æˆ‘æ‰“å¼€æ–¹å¼ä¸å¯¹ï¼Ÿåªå¥½å¼€ &lt;span class=&quot;math inline&quot;&gt;\(Prim\)&lt;/span&gt; ï¼‰&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;//by Judge
#include&amp;lt;cmath&amp;gt;
#include&amp;lt;cstdio&amp;gt;
#include&amp;lt;cstring&amp;gt;
#include&amp;lt;iostream&amp;gt;
#define eps 1e-5
using namespace std;
const int M=1005;
#ifndef Judge
#define getchar() (p1==p2&amp;amp;&amp;amp;(p2=(p1=buf)+fread(buf,1,1&amp;lt;&amp;lt;21,stdin),p1==p2)?EOF:*p1++)
#endif
char buf[1&amp;lt;&amp;lt;21],*p1=buf,*p2=buf;
inline bool cmin(double&amp;amp; a,double b){return a&amp;gt;b?a=b,1:0;}
inline int read(){ int x=0,f=1; char c=getchar();
    for(;!isdigit(c);c=getchar()) if(c=='-') f=-1;
    for(;isdigit(c);c=getchar()) x=x*10+c-'0'; return x*f;
} int n,pat,x[M],y[M],z[M],vis[M];
double f[M][M],g[M][M],minv[M];
double l,r,mid,sum,tmp;
inline bool check(){
    memset(vis,0,sizeof(vis));
    sum=0,vis[1]=1;
    for(int i=1;i&amp;lt;=n;++i)
        minv[i]=g[1][i]-f[1][i]*mid;
    for(int i=2,j,k;i&amp;lt;=n;++i){
        for(tmp=1e16,k=-1,j=2;j&amp;lt;=n;++j)
            if(!vis[j]&amp;amp;&amp;amp;cmin(tmp,minv[j])) k=j;
        if(k==-1) break;
        for(vis[k]=1,sum+=tmp,j=2;j&amp;lt;=n;++j) if(!vis[j])
            cmin(minv[j],g[k][j]-f[k][j]*mid);
    }
    return sum&amp;gt;=0;
}
inline double dis(int i,int j){
    static double dx,dy;
    dx=x[i]-x[j],dy=y[i]-y[j];
    return sqrt(dx*dx+dy*dy);
}
int main(){
    while(1){
        n=read();
        if(!n) return 0;
        for(int i=1;i&amp;lt;=n;++i){
            x[i]=read(),
            y[i]=read(),
            z[i]=read();
        }
        for(int i=1;i&amp;lt;=n;++i)
            for(int j=i+1;j&amp;lt;=n;++j)
                f[j][i]=f[i][j]=dis(i,j),
                g[j][i]=g[i][j]=abs(z[i]-z[j]);
        l=0,r=100;
        while(r-l&amp;gt;eps){
            mid=(l+r)/2,
            (check()?l:r)=mid;
        }
        printf(&quot;%.3lf\n&quot;,l);
    }
    return 0;
}&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;æœ€ä¼˜æ¯”ç‡ç¯&quot;&gt;3.æœ€ä¼˜æ¯”ç‡ç¯&lt;/h3&gt;
&lt;p&gt;ç®€è€Œè¨€ä¹‹ï¼Œæœ€ä¼˜æ¯”ç‡ç¯å°±æ˜¯ç»™ä½ ä¸€ä¸ªå›¾ï¼Œå›¾ä¸Šæ¯æ¡è¾¹æœ‰ä¸¤ä¸ªæƒå€¼ï¼ˆå½“ç„¶ï¼Œç¬¬äºŒä¸ªæƒå€¼å¯èƒ½æ’ä¸º 1 ï¼‰ï¼Œç„¶åè®©ä½ åœ¨å›¾ä¸­æ‰¾åˆ°ä¸€ä¸ªç¯ï¼Œä»¤&lt;strong&gt;ç¯ä¸Šè¾¹çš„ä¸ªä¸¤ä¸ªæƒå€¼å’Œçš„æ¯”å€¼&lt;/strong&gt;æœ€å¤§ï¼ˆæˆ–æ˜¯æœ€å°ï¼‰&lt;/p&gt;
&lt;p&gt;ç„¶åå°±æ˜¯è¦ç”¨ä¸Šé¢ç”Ÿæˆæ ‘ç±»ä¼¼çš„æ€è·¯ï¼Œå¾—åˆ°æ¯æ¡è¾¹è¾¹æƒä¸ºï¼š &lt;span class=&quot;math inline&quot;&gt;\(a[i]-b[i]\times ans\)&lt;/span&gt; ï¼Œç„¶ååœ¨å›¾ä¸Šæ‰¾è´Ÿç¯ï¼ˆæœ‰æ—¶æ˜¯æ­£ç¯ï¼Œä½†æ˜¯æ­£è´Ÿç¯å¯ä»¥äººå·¥è½¬åŒ–çš„å˜›ï¼‰ï¼Œæ‰¾åˆ°å°± &lt;span class=&quot;math inline&quot;&gt;\(check\)&lt;/span&gt; æˆåŠŸ&lt;/p&gt;
&lt;h4 id=&quot;é¢˜ç›®-3&quot;&gt;é¢˜ç›®&lt;/h4&gt;
&lt;p&gt;&lt;a href=&quot;https://www.luogu.org/problemnew/show/P3199&quot;&gt;[HNOI2009]æœ€å°åœˆ&lt;/a&gt;&lt;/p&gt;
&lt;h4 id=&quot;ä»£ç -3&quot;&gt;ä»£ç &lt;/h4&gt;
&lt;pre&gt;
&lt;code&gt;//by Judge
#include&amp;lt;cstdio&amp;gt;
#include&amp;lt;cstring&amp;gt;
#include&amp;lt;iostream&amp;gt;
#define eps 1e-10
using namespace std;
const int M=1e5+7;
inline bool cmin(double&amp;amp; a,double b){return a&amp;gt;b?a=b,1:0;}
inline int read(){ int x=0,f=1; char c=getchar();
    for(;!isdigit(c);c=getchar()) if(c=='-') f=-1;
    for(;isdigit(c);c=getchar()) x=x*10+c-'0'; return x*f;
} int n,m,tim,pat,head[M],vis[M]; double l,r,mid,d[M];
struct Edge{ int to,next; double val; Edge(){}
    Edge(int a,double b,int c){ to=a,val=b,next=c; }
}e[M&amp;lt;&amp;lt;1];
inline void add(int u,int v,double z){
    e[++pat]=Edge(v,z,head[u]),head[u]=pat;
}
bool dfs(int u){ vis[u]=1;
    for(int i=head[u];i;i=e[i].next)
        if(cmin(d[e[i].to],d[u]+e[i].val-mid))
            if(vis[e[i].to]||dfs(e[i].to))
                return vis[u]=0,1;
    return vis[u]=0;
}
inline bool check(){
    memset(d,0,sizeof(d));
    for(int i=1;i&amp;lt;=n;++i)
        if(dfs(i)) return 1;
    return 0;
}
int main(){ n=read(),m=read(); double z;
    for(int i=1,x,y;i&amp;lt;=m;++i){
        x=read(),y=read();
        scanf(&quot;%lf&quot;,&amp;amp;z);
        add(x,y,z);
        if(z&amp;lt;0) l+=z; else r+=z;
    }
    while(r-l&amp;gt;eps){
        mid=(l+r)/2,
        (check()?r:l)=mid;
    }
    return !printf(&quot;%.8lf\n&quot;,l);
}&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;æœ€å¤§å¯†åº¦å­å›¾&quot;&gt;4.æœ€å¤§å¯†åº¦å­å›¾&lt;/h3&gt;
&lt;p&gt;é¢˜ç›®ä¸€èˆ¬å°±æ˜¯ç»™å‡º &lt;span class=&quot;math inline&quot;&gt;\(n\)&lt;/span&gt; ä¸ªç‚¹ç„¶åè®©ä½ å¯¼å‡ºä¸€ä¸ªå­å›¾ï¼Œè®©è¿™ä¸ªå­å›¾ä¸­&lt;strong&gt;è¾¹æ•°ä¸ç‚¹æ•°çš„æ¯”å€¼&lt;/strong&gt;æœ€å¤§&lt;/p&gt;
&lt;p&gt;ä¸è¿‡æœ‰æ—¶å€™é¢˜ç›®ä¸­çš„è¾¹ï¼ˆç”šè‡³æ˜¯ç‚¹ï¼‰å¯èƒ½ä¼šå¸¦ä¸Šæƒå€¼ï¼Œé‚£ä¹ˆå…·ä½“é—®é¢˜å…·ä½“åˆ†æå°±å¥½äº†&lt;/p&gt;
&lt;h4 id=&quot;é¢˜ç›®-4&quot;&gt;é¢˜ç›®&lt;/h4&gt;
&lt;p&gt;&lt;a href=&quot;https://www.luogu.org/problemnew/show/UVA1389&quot;&gt;Hard Life&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ï¼ˆè¯è¯´è¿™é“é¢˜ç¿»è¯‘ç…§æ¬çš„&lt;span class=&quot;math inline&quot;&gt;\(bzoj\)&lt;/span&gt;ï¼Œ&lt;span class=&quot;math inline&quot;&gt;\(UVA\)&lt;/span&gt; æ˜¯è¦è¾“å‡ºæ–¹æ¡ˆçš„å•Š...ï¼‰&lt;/p&gt;
&lt;h4 id=&quot;ä»£ç -4&quot;&gt;ä»£ç &lt;/h4&gt;
&lt;p&gt;ï¼ˆå¥½åƒå°±è¿™ä¸ªä»£ç æœ€é•¿äº†ï¼Œé¢˜ç›®è®²å¾—ç®€å•ç„¶é¹…ç é‡å·¨å¤§ï¼‰&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;//by Judge
#include&amp;lt;cmath&amp;gt;
#include&amp;lt;queue&amp;gt;
#include&amp;lt;cstdio&amp;gt;
#include&amp;lt;cstring&amp;gt;
#include&amp;lt;iostream&amp;gt;
#define db double
using namespace std;
const db eps=1e-8;const int N=1005;
inline int read(){ int x=0,f=1; char c=getchar();
    for(;!isdigit(c);c=getchar()) if(c=='-') f=-1;
    for(;isdigit(c);c=getchar()) x=x*10+c-'0'; return x*f;
} int n,m,S,T,pat,ans,h[N],q[N],head[N],cur[N];
int u[N],v[N],du[N],vis[N]; db U,l,r,mid;
struct Edge { int to,nxt; db flow; } e[N&amp;lt;&amp;lt;5];
void insert(int u,int v,db w) {
    e[++pat]=(Edge){v,head[u],w},head[u]=pat;
    e[++pat]=(Edge){u,head[v],0},head[v]=pat;
}
#define v e[i].to
inline bool bfs() { int hd=0,tl=1,u;
    memset(h,0,sizeof(h)),h[q[1]=S]=1;
    while(hd&amp;lt;tl) { u=q[++hd];
        for(int i=head[u]; i; i=e[i].nxt)
            if(e[i].flow&amp;gt;eps&amp;amp;&amp;amp;!h[v])
                h[v]=h[u]+1,q[++tl]=v;
    } return h[T];
}
db dfs(int x,db F) {
    if(x==T) return F; db w,used=0;
    for(int &amp;amp;i=cur[x]; i; i=e[i].nxt)
        if(h[x]+1==h[v]) {
            w=dfs(v,min(e[i].flow,F-used));
            e[i].flow-=w,e[i^1].flow+=w;
            used+=w; if(used==F) return F;
        }
    if(!used) h[x]=0;
    return used;
}
db dinic() { db res=0;
    for(;bfs();res+=dfs(S,1e16))
        memcpy(cur,head,sizeof(cur));
    return res;
}
void DFS(int x) { ++ans,vis[x]=1;
    for(int i=head[x]; i; i=e[i].nxt)
        if(e[i].flow&amp;gt;eps&amp;amp;&amp;amp;!vis[v]) DFS(v);
}
#undef v
inline bool check() {
    pat=1,S=0,T=n+1;
    memset(head,0,sizeof(head));
    for(int i=1; i&amp;lt;=n; ++i){
        insert(S,i,U),
        insert(i,T,U+mid+mid-du[i]);
    }
    for(int i=1; i&amp;lt;=m; ++i){
        insert(u[i],v[i],1),
        insert(v[i],u[i],1);
    }
    return U*n-dinic()&amp;gt;eps;
}
int main() {
    while(scanf(&quot;%d%d&quot;,&amp;amp;n,&amp;amp;m)!=EOF) {
        for(int i=0; i&amp;lt;=n; ++i) du[i]=0;
        memset(vis,0,sizeof(vis)),ans=-1,U=m;
        if(!m) {puts(&quot;1\n1\n\n&quot;);continue;}
        for(int i=1; i&amp;lt;=m; ++i)
            u[i]=read(),v[i]=read(),
            ++du[u[i]],++du[v[i]];
        for(l=0,r=m;r-l&amp;gt;1.0/n/n;){
            mid=(l+r)/2,
            (check()?l:r)=mid;
        }
        mid=l,check(),DFS(S);
        printf(&quot;%d\n&quot;,ans);
        for(int i=1; i&amp;lt;=n; ++i)
            if(vis[i]) printf(&quot;%d\n&quot;,i);
    } return 0;
}&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;æœ€ä¼˜æ¯”ç‡æµ&quot;&gt;5.æœ€ä¼˜æ¯”ç‡æµ&lt;/h3&gt;
&lt;p&gt;è¿˜æ˜¯é‚£å¥è€è¯ï¼Œå’Œä¹‹å‰ä¸€æ ·çš„ï¼Œå°±æ˜¯æ ¹æ®äºŒåˆ†å‡ºæ¥çš„ç­”æ¡ˆèµ‹è¾¹æƒï¼Œç„¶åä¸€èˆ¬æ˜¯æ¯æ¬¡å»ºä¸€è¾¹å›¾è·‘è´¹ç”¨æµæ ¹æ®æœ€å°è´¹ç”¨çš„æ­£è´Ÿæ€§åˆ¤æ–­ &lt;span class=&quot;math inline&quot;&gt;\(ans\)&lt;/span&gt; åˆæ³•æ€§ï¼ˆç”¨ &lt;span class=&quot;math inline&quot;&gt;\(zkw\)&lt;/span&gt; è·‘è´¹ç”¨æµæœ‰æ—¶å€™ä¼šæŒ‚ï¼Œæ¯”å¦‚è¿™ä¸ªä¾‹é¢˜ï¼Œå½“ç„¶å¯èƒ½æ˜¯æˆ‘å¤©ç”Ÿå¤§å¸¸æ•°é‚£å°± &lt;span class=&quot;math inline&quot;&gt;\(GG\)&lt;/span&gt; ï¼‰&lt;/p&gt;
&lt;h4 id=&quot;é¢˜ç›®-5&quot;&gt;é¢˜ç›®&lt;/h4&gt;
&lt;p&gt;&lt;a href=&quot;https://www.luogu.org/problemnew/show/P3705&quot;&gt;[SDOI2017]æ–°ç”Ÿèˆä¼š&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ï¼ˆè¿™é‡Œæ˜¯ä¸€é“äºŒåˆ†å›¾æœ€å¤§è´¹ç”¨æœ€å¤§æµï¼Œä½†æ˜¯ä»£ç å®ç°ä¸­å¯ä»¥è¾¹æƒå–åç„¶åè·‘æœ€å°è´¹ç”¨ï¼‰&lt;/p&gt;
&lt;h4 id=&quot;ä»£ç -5&quot;&gt;ä»£ç &lt;/h4&gt;
&lt;pre&gt;
&lt;code&gt;//by Judge
#include&amp;lt;queue&amp;gt;
#include&amp;lt;cstdio&amp;gt;
#include&amp;lt;cstring&amp;gt;
#include&amp;lt;iostream&amp;gt;
#define eps 1e-8
#define ll long long
using namespace std;
const double inf=1e18+7;
const int M=205;
#ifndef Judge
#define getchar() (p1==p2&amp;amp;&amp;amp;(p2=(p1=buf)+fread(buf,1,1&amp;lt;&amp;lt;21,stdin),p1==p2)?EOF:*p1++)
#endif
inline int Min(int a,int b){return a&amp;lt;b?a:b;}
inline bool cmax(double&amp;amp; a,double b){return a&amp;lt;b?a=b,1:0;}
char buf[1&amp;lt;&amp;lt;21],*p1=buf,*p2=buf;
inline int read(){ int x=0,f=1; char c=getchar();
    for(;!isdigit(c);c=getchar()) if(c=='-') f=-1;
    for(;isdigit(c);c=getchar()) x=x*10+c-'0'; return x*f;
} int n,S,T,pat=1,tot,head[M],cur[M]; ll a[M][M],b[M][M];
int inq[M],vis[M]; double l,r=1e4,mid,ans,dis[M]; queue&amp;lt;int&amp;gt; q;
struct Edge{ int to,flow,next; double val;
    Edge(int a,double b,int c,int d){
        to=a,val=b,flow=c,next=d;
    } Edge(){}
}e[M*M*M];
inline void add(int u,int v,double c,int w){
    e[++pat]=Edge(v,c,w,head[u]),head[u]=pat;
    e[++pat]=Edge(u,-c,0,head[v]),head[v]=pat;
}
#define v e[i].to
inline bool spfa(){
    for(int i=S;i&amp;lt;=T;++i)
        dis[i]=-inf,vis[i]=0;
    dis[S]=0,q.push(S);
    while(!q.empty()){
        int u=q.front();
        q.pop(),vis[u]=0;
        for(int i=head[u];i;i=e[i].next)
            if(e[i].flow&amp;amp;&amp;amp;cmax(dis[v],dis[u]+e[i].val))
                if(!vis[v]) vis[v]=1,q.push(v);
    } return dis[T]!=-inf;
}
int dfs(int u,int flow){
    if(u==T) return ans+=dis[T]*flow,flow;
    int res=0; vis[u]=1;
    for(int &amp;amp;i=cur[u],k;i;i=e[i].next)
        if(dis[v]==dis[u]+e[i].val)
            if(!vis[v]&amp;amp;&amp;amp;e[i].flow){
                k=dfs(v,Min(e[i].flow,flow-res));
                if(k){
                    res+=k;
                    e[i].flow-=k;
                    e[i^1].flow+=k;
                    if(res==flow)
                        break;
                }
            }
    return res;
}
inline bool check(){
    pat=1,ans=0,
    memset(head,0,sizeof(head));
    for(int i=1;i&amp;lt;=n;++i){
        add(S,i,0,1),
        add(n+i,T,0,1);
    }
    for(int i=1;i&amp;lt;=n;++i) 
        for(int j=1;j&amp;lt;=n;++j)
            add(i,n+j,a[i][j]-b[i][j]*mid,1);
    for(;spfa();dfs(S,1e9))
        memcpy(cur,head,sizeof(cur));
    return ans&amp;lt;=0;
}
int main(){
    n=read(),T=n+1&amp;lt;&amp;lt;1;
    for(int i=1;i&amp;lt;=n;++i)
        for(int j=1;j&amp;lt;=n;++j)
            a[i][j]=read();
    for(int i=1;i&amp;lt;=n;++i)
        for(int j=1;j&amp;lt;=n;++j)
            b[i][j]=read();
    for(tot=pat;r-l&amp;gt;eps;){
        mid=(l+r)/2,
        (check()?r:l)=mid;
    }
    return !printf(&quot;%.6lf\n&quot;,l);
}&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;å„ç§å…¶ä»–ç»“åˆ&quot;&gt;6.å„ç§å…¶ä»–ç»“åˆ&lt;/h3&gt;
&lt;p&gt;æš‚æ— æ›´æ–°&lt;/p&gt;
&lt;h2 id=&quot;åˆ†æ•°è§„åˆ’çš„ä¸€ç‚¹æ„Ÿæƒ³&quot;&gt;åˆ†æ•°è§„åˆ’çš„ä¸€ç‚¹æ„Ÿæƒ³&lt;/h2&gt;
&lt;p&gt;è®²é“ç†ï¼Œå…¶å®åˆ†æ•°è§„åˆ’è¿™ä¸ªä¸œè¥¿å“ªå„¿éƒ½èƒ½å¥—ï¼Œç„¶é¹…ç°åœ¨å…³äºåˆ†æ•°è§„åˆ’çš„é¢˜ç›®å´å¹¶ä¸æ˜¯å¾ˆå¤šï¼Œè‡³å°‘æ²¡æœ‰åˆ°æ³›æ»¥çš„åœ°æ­¥ï¼Œä¸è¿‡ç›¸ä¿¡åœ¨ä¸ï¼ˆçŸ¥é“å¤šï¼‰ä¹…çš„å°†æ¥ï¼Œåˆ†æ•°è§„åˆ’ä¼šæˆä¸ºäººå°½çš†çŸ¥çš„ä¸€ç§ç®—æ³•&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math display&quot;&gt;\[tHe\ EnD\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;å“¦ï¼Œå¯¹äº†ï¼Œå‚è€ƒæ–‡çŒ®ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/hzoi_ztx/article/details/54898323&quot;&gt;01åˆ†æ•°è§„åˆ’é—®é¢˜ç›¸å…³ç®—æ³•ä¸é¢˜ç›®è®²è§£&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.xuebuyuan.com/3225634.html&quot;&gt;poj 3155 (æœ€å¤§å¯†åº¦å­å›¾)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¦å¤–çš„å¦å¤–ï¼Œ&lt;strong&gt;æœ‰æ—¶é—´çš„è¯&lt;/strong&gt;ä¼šæŠŠè‡ªå·±å‡ºçš„åˆ†æ•°è§„åˆ’çš„é¢˜ç›®æ”¾åˆ°&lt;strong&gt;6&lt;/strong&gt;è¿™å—å†…å®¹ä¸Šæ¥&lt;/p&gt;
</description>
<pubDate>Tue, 25 Dec 2018 06:34:00 +0000</pubDate>
<dc:creator>Judge_Cheung</dc:creator>
<og:description>æœ€è¿‘å…¥é—¨äº† 0/1 åˆ†æ•°è§„åˆ’ï¼Œäºæ˜¯å†™ç¯‡åšå®¢çºªå¿µ åˆ†æ•°è§„åˆ’æ˜¯ä¸€é¡¹ä¸å¸¸ç”¨åˆ°çš„ï¼ˆä½†è¿˜è›®å®ç”¨çš„ï¼‰ç®—æ³•ï¼Œä¸€èˆ¬æ¥è®²å°±æ˜¯æ±‚ä¸€ä¸ªæœ€ä¼˜æ¯”ç‡ã€‚ åˆ†æ•°è§„åˆ’çš„ç®€å•ä»‹ç» åˆ†æ•°è§„åˆ’é¡¾åæ€ä¹‰å°±æ˜¯æ±‚ä¸€ä¸ªåˆ†æ•°è¡¨è¾¾å¼çš„æœ€å¤§ï¼ˆå°ï¼‰å€¼ã€‚ æ¯”</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/Judge/p/10173795.html</dc:identifier>
</item>
<item>
<title>redis ç³»åˆ—26 Clusteré«˜å¯ç”¨ (1) - èŠ±é˜´å·ç§»</title>
<link>http://www.cnblogs.com/MrHSR/p/10169394.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/MrHSR/p/10169394.html</guid>
<description>&lt;h3&gt;ä¸€.æ¦‚è¿°&lt;/h3&gt;
&lt;p&gt;ã€€ã€€Redisé›†ç¾¤æä¾›äº†åˆ†å¸ƒå¼æ•°æ®åº“æ–¹æ¡ˆï¼Œé›†ç¾¤é€šè¿‡åˆ†ç‰‡æ¥è¿›è¡Œæ•°æ®å…±äº«ï¼Œå¹¶æä¾›å¤åˆ¶å’Œæ•…éšœè½¬ç§»åŠŸèƒ½ã€‚åœ¨å¤§æ•°æ®é‡æ–¹é¢çš„é«˜å¯ç”¨æ–¹æ¡ˆï¼Œclusteré›†ç¾¤æ¯”Sentinelæœ‰ä¼˜åŠ¿ã€‚ä½†Redisé›†ç¾¤å¹¶ä¸æ”¯æŒå¤„ç†å¤šä¸ªkeysçš„å‘½ä»¤,å› ä¸ºè¿™éœ€è¦åœ¨ä¸åŒçš„èŠ‚ç‚¹é—´ç§»åŠ¨æ•°æ®ï¼Œè€Œè¾¾ä¸åˆ°åƒRedisé‚£æ ·çš„æ€§èƒ½,åœ¨é«˜è´Ÿè½½çš„æƒ…å†µä¸‹å¯èƒ½ä¼šå¯¼è‡´ä¸å¯é¢„æ–™çš„é”™è¯¯ã€‚å­¦ä¹ é›†ç¾¤åŒæ ·å…ˆäº†è§£ä¸€äº›åŸç†æ–¹é¢åŒ…æ‹¬ï¼šèŠ‚ç‚¹ã€æ§½æŒ‡æ´¾ã€å‘½ä»¤æ‰§è¡Œã€é‡æ–°åˆ†ç‰‡ï¼Œè½¬å‘ã€æ•…éšœè½¬ç§»ã€æ¶ˆæ¯ã€‚åé¢å†æ“ä½œé›†ç¾¤æ¼”ç¤ºã€‚å…³äºé›†ç¾¤æ­å»ºåé¢ä¼šåˆ—å‡ºå®ç°æ­¥éª¤ï¼Œä¹Ÿå¯å‚è€ƒRediså®˜ç½‘çš„å®ç°æ­¥éª¤ï¼š&lt;a href=&quot;http://www.redis.cn/topics/cluster-tutorial.html&quot; target=&quot;_blank&quot;&gt;http://www.redis.cn/topics/cluster-tutorial.html&lt;/a&gt;&lt;/p&gt;

&lt;h4&gt;ã€€ã€€1.1 èŠ‚ç‚¹&lt;/h4&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ä¸€ä¸ªRedisé›†ç¾¤é€šå¸¸ç”±å¤šä¸ªèŠ‚ç‚¹(node)ç»„æˆï¼Œå¼€å§‹æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œéœ€è¦å°†ç‹¬ç«‹çš„èŠ‚ç‚¹è¿æ¥èµ·æ¥ï¼Œæ„æˆä¸€ä¸ªåŒ…å«å¤šèŠ‚ç‚¹çš„é›†ç¾¤ã€‚è¿æ¥å„èŠ‚ç‚¹çš„å·¥ä½œä½¿ç”¨cluster meetå‘½ä»¤æ¥å®Œæˆï¼Œæ ¼å¼å¦‚ä¸‹:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
        cluster meet ip  port    
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€å‘ä¸€ä¸ªèŠ‚ç‚¹å‘é€è¯¥å‘½ä»¤ï¼Œå¯ä»¥è®©å‘é€çš„èŠ‚ç‚¹ä¸æŒ‡å®šçš„èŠ‚ç‚¹è¿›è¡Œæ¡æ‰‹ï¼Œæ¡æ‰‹æˆåŠŸæ—¶ï¼ŒæŒ‡å®šçš„èŠ‚ç‚¹å°±ä¼šæ·»åŠ åˆ°å‘é€èŠ‚ç‚¹å½“å‰æ‰€åœ¨çš„é›†ç¾¤ä¸­ã€‚ä¾‹å¦‚ï¼šæœ‰ä¸‰ä¸ªç‹¬ç«‹çš„èŠ‚ç‚¹ï¼Œç«¯å£åˆ†åˆ«ä¸º:7000, 7001,7002ã€‚é¦–å…ˆä½¿ç”¨å®¢æˆ·ç«¯è¿æ¥ä¸ŠèŠ‚ç‚¹7000, é€šè¿‡å‘é€cluster nodeså‘½ä»¤å¯ä»¥çœ‹åˆ°ï¼Œé›†ç¾¤ç›®å‰åªåŒ…å«7000è‡ªå·±ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé€šè¿‡cluster nodesæŸ¥çœ‹ä¿¡æ¯å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
    /usr/local/redis/&lt;span&gt;bin
    [root@hsr bin]# .&lt;/span&gt;/redis-cli -c -p &lt;span&gt;7000&lt;/span&gt; -a &lt;span&gt;123456&lt;/span&gt;
    &lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7000&lt;/span&gt;&amp;gt;&lt;span&gt; cluster nodes
&lt;span&gt;  &lt;strong&gt;  142116fa16006f39865ebe604d1580c119fa0fea :&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;7000@17000     myself,master - 0 0 0 connected&lt;/strong&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€é€šè¿‡å‘èŠ‚ç‚¹7000å‘é€ä»¥ä¸‹å‘½ä»¤ï¼Œå¯ä»¥å°†èŠ‚ç‚¹7001 æ·»åŠ åˆ°7000æ‰€åœ¨çš„é›†ç¾¤ä¸­ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7000&lt;/span&gt;&amp;gt; cluster meet &lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt; &lt;span&gt;7001&lt;/span&gt;&lt;span&gt;
    OK&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ç»§ç»­å‘èŠ‚ç‚¹7000å‘é€ä»¥ä¸‹å‘½ä»¤ï¼Œå¯ä»¥å°†èŠ‚ç‚¹7002ä¹Ÿæ·»åŠ åˆ°7000å’Œ7001æ‰€åœ¨çš„é›†ç¾¤ä¸­ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7000&lt;/span&gt;&amp;gt; cluster meet &lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt; &lt;span&gt;7002&lt;/span&gt;&lt;span&gt;
    OK&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ä¸‰ä¸ªèŠ‚ç‚¹æ¡æ‰‹æˆåŠŸï¼Œä½¿ä¸‰ä¸ªèŠ‚ç‚¹éƒ½å¤„äºåŒä¸€ä¸ªé›†ç¾¤ä¸­ï¼Œå†æ¬¡æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹æƒ…å†µï¼Œä¸‰ä¸ªèŠ‚ç‚¹éƒ½connectedè¿æ¥æˆåŠŸï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7000&lt;/span&gt;&amp;gt;&lt;span&gt; cluster nodes
ã€€ã€€0eed9cc9122d2724365550b70965c2a8e281043d &lt;/span&gt;&lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7002&lt;/span&gt;@&lt;span&gt;17002&lt;/span&gt; master - &lt;span&gt;0&lt;/span&gt; &lt;span&gt;1545632759414&lt;/span&gt; &lt;span&gt;2&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt; connected&lt;/strong&gt;&lt;/span&gt;
ã€€ã€€aeaaeacb8b4d4c4a3bca3c6f52fc4b363e68f083 &lt;/span&gt;&lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7001&lt;/span&gt;@&lt;span&gt;17001&lt;/span&gt; master - &lt;span&gt;0&lt;/span&gt; &lt;span&gt;1545632758405&lt;/span&gt; &lt;span&gt;0&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt; connected&lt;/strong&gt;&lt;/span&gt;
ã€€ã€€142116fa16006f39865ebe604d1580c119fa0fea &lt;/span&gt;&lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7000&lt;/span&gt;@&lt;span&gt;17000&lt;/span&gt; myself,master - &lt;span&gt;0&lt;/span&gt; &lt;span&gt;1545632756000&lt;/span&gt; &lt;span&gt;1&lt;/span&gt; &lt;strong&gt;&lt;span&gt;connected&lt;/span&gt;&lt;/strong&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Â ã€€ã€€ã€€ã€€cluster nodesç”±ä»¥ä¸‹å­—æ®µç»„æˆï¼Œè¡¨æ ¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;table border=&quot;1&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; align=&quot;center&quot;&gt;&lt;tbody readability=&quot;9.5&quot;&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;102&quot;&gt;
&lt;p&gt;&lt;strong&gt;å­—æ®µå&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;265&quot;&gt;
&lt;p&gt;&lt;strong&gt;æè¿°&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;202&quot;&gt;
&lt;p&gt;&lt;strong&gt;èŠ‚ç‚¹7002&lt;/strong&gt;&lt;strong&gt;çš„å­—æ®µå€¼&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;102&quot;&gt;
&lt;p&gt;id&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;265&quot; readability=&quot;5&quot;&gt;
&lt;p&gt;èŠ‚ç‚¹ IDï¼Œä¸€ä¸ª40ä¸ªå­—ç¬¦çš„éšæœºå­—ç¬¦ä¸²&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;202&quot;&gt;0eed9cc9122d2724365550b70965c2a8e281043d&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;102&quot;&gt;ip:port&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;265&quot;&gt;å®¢æˆ·ç«¯åº”è¯¥è”ç³»èŠ‚ç‚¹ä»¥è¿è¡ŒæŸ¥è¯¢çš„èŠ‚ç‚¹åœ°å€&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;202&quot;&gt;127.0.0.1:7002&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;102&quot;&gt;flags&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;265&quot;&gt;é€—å·åˆ—è¡¨åˆ†éš”çš„æ ‡å¿—ï¼Œmyselfï¼Œmasterï¼Œslaveï¼Œfailç­‰&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;202&quot;&gt;master&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;102&quot;&gt;master&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;265&quot;&gt;å¦‚æœèŠ‚ç‚¹æ˜¯ä»å±èŠ‚ç‚¹ï¼Œå¹¶ä¸”ä¸»èŠ‚ç‚¹å·²çŸ¥ï¼Œåˆ™èŠ‚ç‚¹IDä¸ºä¸»èŠ‚ç‚¹ï¼Œå¦åˆ™ä¸ºâ€œ - â€å­—ç¬¦&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;202&quot;&gt;-&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;102&quot;&gt;ping-sent&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;265&quot;&gt;æ¯«ç§’ä¸ºå•ä½çš„å½“å‰æ¿€æ´»çš„pingå‘é€çš„unixæ—¶é—´&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;202&quot;&gt;1545632759414&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;102&quot;&gt;config-epoch&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;265&quot;&gt;å½“å‰èŠ‚ç‚¹çš„é…ç½®æ—¶æœŸï¼Œæ¯æ¬¡å‘ç”Ÿæ•…éšœåˆ‡æ¢æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ï¼Œå”¯ä¸€çš„&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;202&quot;&gt;2&amp;gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;102&quot;&gt;link-state&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;265&quot;&gt;ç”¨äºèŠ‚ç‚¹åˆ°èŠ‚ç‚¹é›†ç¾¤æ€»çº¿çš„é“¾è·¯çŠ¶æ€ã€‚æˆ‘ä»¬ä½¿ç”¨æ­¤é“¾æ¥ä¸èŠ‚ç‚¹è¿›è¡Œé€šä¿¡&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;202&quot;&gt;connected&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;102&quot;&gt;slot&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;265&quot;&gt;åœ¨connectedåé¢è¿˜ä¼šæ˜¾ç¤ºæ§½å·èŒƒå›´&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;202&quot;&gt;åˆ†é…æ§½åæ˜¾ç¤º&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h5&gt;ã€€ã€€ã€€ã€€(1)Â  å¯åŠ¨èŠ‚ç‚¹&lt;/h5&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€ä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯ä¸€ä¸ªè¿è¡Œåœ¨é›†ç¾¤æ¨¡å¼ä¸‹çš„RedisæœåŠ¡å™¨ï¼ŒRedisæœåŠ¡å™¨åœ¨å¯åŠ¨æ—¶ä¼šæ ¹æ®cluster-enabled é…ç½®é€‰é¡¹æ˜¯å¦ä¸ºyesæ¥å†³å®šæ˜¯å¦å¼€å¯æœåŠ¡å™¨çš„é›†ç¾¤æ¨¡å¼ã€‚æ¯ä¸ªèŠ‚ç‚¹è¿˜æ˜¯ä¸æ™®é€šredisæœåŠ¡ä¸€æ ·ï¼Œå…·å¤‡æ‰€æœ‰åŠŸèƒ½æ¯”å¦‚ï¼šæ”¯æŒRDBã€AOFæŒä¹…åŒ–ã€å‘å¸ƒä¸è®¢é˜…ã€ä¿å­˜é”®å€¼å¯¹ã€å¤åˆ¶ ç­‰ç­‰ã€‚å¯¹äºé›†ç¾¤æ¨¡å¼æ‰ä¼šç”¨åˆ°çš„æ•°æ®ï¼Œå†…éƒ¨ä¿å­˜åœ¨cluster.h/clusterStateç»“æ„ä¸­ã€‚&lt;/p&gt;
&lt;h5&gt;ã€€ã€€ã€€ã€€(2)Â é›†ç¾¤æ•°æ®ç»“æ„&lt;/h5&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€å†…éƒ¨clusterNodeç»“æ„ä¿å­˜äº†ä¸€ä¸ªèŠ‚ç‚¹çš„å½“å‰çŠ¶æ€ï¼Œæ¯”å¦‚èŠ‚ç‚¹çš„åˆ›å»ºæ—¶é—´ã€èŠ‚ç‚¹çš„åå­—ã€èŠ‚ç‚¹å½“å‰çš„é…ç½®çºªå…ƒã€èŠ‚ç‚¹çš„IPã€Portç­‰ç­‰ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šä½¿ç”¨ä¸€ä¸ªclusterNodeç»“æ„æ¥è®°å½•è‡ªå·±çš„çŠ¶æ€ï¼Œå¹¶ä¸ºé›†ç¾¤ä¸­çš„æ‰€æœ‰å…¶å®ƒèŠ‚ç‚¹(åŒ…æ‹¬ä¸»ä»)éƒ½ä¼šåˆ›å»ºä¸€ä¸ªç›¸åº”çš„clusterNodeç»“æ„, ä»¥æ­¤æ¥è®°å½•å…¶å®ƒèŠ‚ç‚¹çš„çŠ¶æ€ã€‚è¯¥ç»“æ„ä¸­çš„å±æ€§ä¸å†ä»‹ç»ï¼Œè¯¦ç»†è¯·æŸ¥çœ‹&quot;redisè®¾è®¡ä¸å®ç°&quot;ä¹¦ã€‚&lt;/p&gt;
&lt;h5&gt;ã€€ã€€ã€€ã€€(3) cluster meet å‘½ä»¤çš„å®ç°&lt;/h5&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ä¸Šé¢è®²åˆ°é€šè¿‡cluster meet å‘½ä»¤ï¼Œå¯ä»¥ä½¿èŠ‚ç‚¹ä¸æŒ‡å®šçš„èŠ‚ç‚¹è¿›è¡Œæ¡æ‰‹å½¢æˆé›†ç¾¤ã€‚å‡è®¾æœ‰èŠ‚ç‚¹Aå’ŒB æ¡æ‰‹çš„æ­¥éª¤åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€(1) åœ¨å®¢æˆ·ç«¯å‘èŠ‚ç‚¹Aå‘é€ä¸€æ¡ cluster meetÂ  Bå‘½ä»¤æ—¶ï¼ŒèŠ‚ç‚¹Aä¼šä¸ºèŠ‚ç‚¹Båˆ›å»ºä¸€ä¸ªClusterNodeç»“æ„ï¼Œå¹¶å°†è¯¥ç»“æ„æ·»åŠ åˆ°è‡ªå·±çš„ClusterState.nodeså­—å…¸ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€(2) å‘èŠ‚ç‚¹Bå‘é€meetåï¼Œå¦‚æœé¡ºåˆ©èŠ‚ç‚¹Bå°†æ¥æ”¶åˆ°èŠ‚ç‚¹Aæ¶ˆæ¯ï¼ŒèŠ‚ç‚¹Bä¼šä¸ºèŠ‚ç‚¹Aåˆ›å»ºä¸€ä¸ªClusterNodeç»“æ„, å¹¶å°†è¯¥ç»“æ„æ·»åŠ åˆ°è‡ªå·±çš„ClusterState.nodeså­—å…¸ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€(3) èŠ‚ç‚¹B å°†å‘èŠ‚ç‚¹Aè¿”å›ä¸€æ¡PONGæ¶ˆæ¯ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€(4) èŠ‚ç‚¹Aæ¥æ”¶Bè¿”å›çš„æ¶ˆæ¯ï¼Œèƒ½è¿‡è¿™æ¡PONGæ¶ˆæ¯èŠ‚ç‚¹AçŸ¥é“èŠ‚ç‚¹Bå·²ç»æˆåŠŸæ¥æ”¶åˆ°äº†è‡ªå·±å‘é€çš„MEETæ¶ˆæ¯ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€(5) èŠ‚ç‚¹Aå°†å‘Bè¿”å›ä¸€æ¡PINGæ¶ˆæ¯ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ã€€ã€€(6) èŠ‚ç‚¹Bå°†æ¥æ”¶Açš„æ¶ˆæ¯ï¼Œé€šè¿‡è¿™æ¡PINGæ¶ˆæ¯èŠ‚ç‚¹BçŸ¥é“èŠ‚ç‚¹Aå·²ç»æˆåŠŸæ¥æ”¶åˆ°äº†è‡ªå·±è¿”å›çš„PONGæ¶ˆæ¯ï¼Œæ¡æ‰‹æˆåŠŸã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ä¹‹åèŠ‚ç‚¹Aä¼šå°†èŠ‚ç‚¹Bçš„ä¿¡æ¯é€šè¿‡Gossipåè®®ä¼ æ’­ç»™é›†ç¾¤ä¸­çš„å…¶ä»–èŠ‚ç‚¹ï¼Œè®©å…¶ä»–èŠ‚ç‚¹ä¹Ÿä¸èŠ‚ç‚¹Bè¿›è¡Œæ¡æ‰‹ï¼Œæœ€ç»ˆèŠ‚ç‚¹Bä¼šè¢«é›†ç¾¤ä¸­æ‰€æœ‰èŠ‚ç‚¹è®¤è¯†ã€‚&lt;/p&gt;

&lt;h4&gt;ã€€ã€€1.2 Â æ§½æŒ‡æ´¾ã€€&lt;/h4&gt;
&lt;p&gt;Â ã€€ã€€ã€€ã€€Redisé›†ç¾¤é€šè¿‡åˆ†ç‰‡çš„æ–¹å¼æ¥ä¿å­˜æ•°æ®åº“ä¸­çš„é”®å€¼å¯¹ï¼šé›†ç¾¤çš„æ•´ä¸ª æ•°æ®åº“è¢«åˆ†ä¸º16384ä¸ªæ§½(slot), æ•°æ®åº“ä¸­çš„æ¯ä¸ªé”®éƒ½å±äºè¿™16384 ä¸ªslotå…¶ä¸­ä¸€ä¸ªï¼Œé›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥å¤„ç†0ä¸ªæˆ–æœ€å¤š16384ä¸ªslotã€‚å½“æ•°æ®åº“ä¸­çš„16384ä¸ªslotéƒ½æœ‰åœ¨èŠ‚ç‚¹ä¸­åˆ†é…æ—¶ï¼Œæ­¤æ—¶é›†ç¾¤å¤„äºä¸Šçº¿çŠ¶æ€(OK)ï¼Œç›¸åå¦‚æœä»»ä½•ä¸€ä¸ªslotæ²¡æœ‰å¾—åˆ°åˆ†é…ï¼Œé‚£ä¹ˆé›†ç¾¤å¤„äºä¸‹çº¿çŠ¶æ€(fail)ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€åœ¨èŠ‚ç‚¹7000çš„å®¢æˆ·ç«¯é€šè¿‡cluster infoå¯ä»¥æŸ¥çœ‹ï¼Œå› ä¸ºé›†ç¾¤ä¸­çš„ä¸‰ä¸ªèŠ‚ç‚¹éƒ½æ²¡æœ‰åœ¨å¤„ç†ä»»ä½•slotï¼Œæ‰€ä»¥å¤„äºä¸‹çº¿çŠ¶æ€ã€‚èƒ½è¿‡cluster infoæ¥æŸ¥çœ‹é›†ç¾¤ä¸ºfailçŠ¶æ€ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7000&lt;/span&gt;&amp;gt;&lt;span&gt; cluster info
    cluster_state:fail
    cluster_slots_assigned:&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;
    cluster_slots_ok:&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;
    cluster_slots_pfail:&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;
    cluster_slots_fail:&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;
    cluster_known_nodes:&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€é€šå‘èŠ‚ç‚¹å‘é€cluster addslotså‘½ä»¤ï¼Œå¯ä»¥å°†ä¸€ä¸ªæˆ–å¤šä¸ªslotæŒ‡æ´¾ç»™æŸèŠ‚ç‚¹è´Ÿè´£ã€‚ä¾‹å¦‚å°†slot 0 åˆ°5000æŒ‡æ´¾ç»™èŠ‚ç‚¹7000è´Ÿè´£ï¼Œæ‰‹åŠ¨æ·»åŠ æ§½æ—¶ï¼Œä¸€å®šè¦é€€å‡ºrediså®¢æˆ·ç«¯ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
     [root@hsr bin]# ./redis-cli -h &lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt; -p &lt;span&gt;7000&lt;/span&gt; -a &lt;span&gt;123456&lt;/span&gt; cluster addslots {&lt;span&gt;0&lt;/span&gt;..&lt;span&gt;5000&lt;/span&gt;&lt;span&gt;}
     OK&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€åœ¨ç™»åˆ°rediså®¢æˆ·ç«¯ï¼ŒæŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹çš„æ§½åˆ†é…æƒ…å†µï¼Œå¯ä»¥çœ‹åˆ°7000èŠ‚ç‚¹å·²åˆ†é…äº†0-5000çš„æ§½èŒƒå›´ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
    [root@hsr bin]# ./redis-cli -c -p &lt;span&gt;7000&lt;/span&gt; -a &lt;span&gt;123456&lt;/span&gt;
    &lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7000&lt;/span&gt;&amp;gt;&lt;span&gt; cluster nodes
ã€€ã€€0eed9cc9122d2724365550b70965c2a8e281043d &lt;/span&gt;&lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7002&lt;/span&gt;@&lt;span&gt;17002&lt;/span&gt; master - &lt;span&gt;0&lt;/span&gt; &lt;span&gt;1545635637429&lt;/span&gt; &lt;span&gt;2&lt;/span&gt;&lt;span&gt; connected
ã€€ã€€aeaaeacb8b4d4c4a3bca3c6f52fc4b363e68f083 &lt;/span&gt;&lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7001&lt;/span&gt;@&lt;span&gt;17001&lt;/span&gt; master - &lt;span&gt;0&lt;/span&gt; &lt;span&gt;1545635638436&lt;/span&gt; &lt;span&gt;0&lt;/span&gt;&lt;span&gt; connected
ã€€ã€€142116fa16006f39865ebe604d1580c119fa0fea &lt;/span&gt;&lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7000&lt;/span&gt;@&lt;span&gt;17000&lt;/span&gt; myself,master - &lt;span&gt;0&lt;/span&gt; &lt;span&gt;1545635635000&lt;/span&gt; &lt;span&gt;1&lt;/span&gt; connected &lt;span&gt;&lt;strong&gt;0-5000&lt;/strong&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ä¸ºäº†è®©7000ã€7001ã€7002ä¸‰ä¸ªèŠ‚ç‚¹æ‰€åœ¨çš„é›†ç¾¤è¿›å…¥ä¸Šçº¿çŠ¶æ€ï¼Œç»§ç»­å°†slotÂ  5001~10000æŒ‡æ´¾ç»™èŠ‚ç‚¹7001ã€‚ å°†slot 10001~16383æŒ‡æ´¾ç»™7002ã€‚å½“ä¸‰ä¸ªcluster addslots å‘½ä»¤éƒ½æ‰§è¡Œåï¼Œæ•°æ®åº“ä¸­çš„16383ä¸ªslotéƒ½å·²ç»æŒ‡æ´¾ç»™äº†ç›¸åº”çš„èŠ‚ç‚¹ï¼Œé›†ç¾¤è¿›å…¥ä¸Šçº¿çŠ¶æ€ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
    [root@hsr bin]# ./redis-cli -h &lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt; -p &lt;span&gt;7001&lt;/span&gt; -a &lt;span&gt;123456&lt;/span&gt; cluster addslots {&lt;span&gt;5001&lt;/span&gt;..&lt;span&gt;10000&lt;/span&gt;&lt;span&gt;}
    OK
    [root@hsr bin]# .&lt;/span&gt;/redis-cli -h &lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt; -p &lt;span&gt;7002&lt;/span&gt; -a &lt;span&gt;123456&lt;/span&gt; cluster addslots {&lt;span&gt;10001&lt;/span&gt;..&lt;span&gt;16383&lt;/span&gt;&lt;span&gt;}
    OK&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€æ­¤æ—¶å·²ç»è¿›å…¥é›†ç¾¤è¿›å…¥ä¸Šçº¿çŠ¶æ€ï¼šå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7000&lt;/span&gt;&amp;gt;&lt;span&gt; cluster info
&lt;span&gt;&lt;strong&gt;    cluster_state:ok&lt;/strong&gt;&lt;/span&gt;
    cluster_slots_assigned:&lt;/span&gt;&lt;span&gt;16384&lt;/span&gt;&lt;span&gt;
    cluster_slots_ok:&lt;/span&gt;&lt;span&gt;16384&lt;/span&gt;&lt;span&gt;
    cluster_slots_pfail:&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;
    cluster_slots_fail:&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;
    cluster_known_nodes:&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;
    cluster_size:&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;ã€€ã€€127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7000&lt;/span&gt;&amp;gt;&lt;span&gt; cluster nodes
ã€€ã€€a9e82a7870ac31c221a4d13b28ba9897bb12257c &lt;/span&gt;&lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7000&lt;/span&gt;@&lt;span&gt;17000&lt;/span&gt; myself,master - &lt;span&gt;0&lt;/span&gt; &lt;span&gt;1545704528000&lt;/span&gt; &lt;span&gt;0&lt;/span&gt; connected &lt;span&gt;&lt;strong&gt;0-5000&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;
ã€€ã€€3b10786d21bbeb66e3517e8d3daa3ee2ce16705e &lt;/span&gt;&lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7001&lt;/span&gt;@&lt;span&gt;17001&lt;/span&gt; master - &lt;span&gt;0&lt;/span&gt; &lt;span&gt;1545704529806&lt;/span&gt; &lt;span&gt;1&lt;/span&gt; connected &lt;span&gt;&lt;strong&gt;5001-10000&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;
ã€€ã€€7bd0cbd26392d1e98ffe9d46ae153c944d8f398d &lt;/span&gt;&lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7002&lt;/span&gt;@&lt;span&gt;17002&lt;/span&gt; master - &lt;span&gt;0&lt;/span&gt; &lt;span&gt;1545704529000&lt;/span&gt; &lt;span&gt;2&lt;/span&gt; connected &lt;span&gt;&lt;strong&gt;10001-16383&lt;/strong&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ä¸€ä¸ªèŠ‚ç‚¹é™¤äº†ä¼šå°†è‡ªå·±è´Ÿè´£å¤„ç†çš„slotå¤–ï¼Œè¿˜ä¼šå°†è‡ªå·±çš„slotæ•°ç»„é€šè¿‡æ¶ˆæ¯å‘é€ç»™é›†ç¾¤ä¸­çš„å…¶ä»–èŠ‚ç‚¹ï¼Œä»¥æ­¤æ¥å‘ŠçŸ¥å…¶ä»–èŠ‚ç‚¹è‡ªå·±ç›®å‰å¤„ç†å“ªäº›slotã€‚ä¾‹å¦‚ï¼šå½“èŠ‚ç‚¹AÂ  é€šè¿‡æ¶ˆæ¯ä»èŠ‚ç‚¹Bé‚£é‡Œæ¥æ”¶åˆ°èŠ‚ç‚¹Bçš„slotæ•°ç»„æ—¶ï¼ŒèŠ‚ç‚¹Aä¼šåœ¨è‡ªå·±çš„ClusterState.nodeså­—å…¸ä¸­æŸ¥æ‰¾èŠ‚ç‚¹Bå¯¹åº”çš„ClusterStateç»“æ„ï¼Œå¹¶å¯¹ç»“æ„ä¸­çš„slotsæ•°ç»„è¿›è¡Œä¿å­˜æˆ–æ›´æ–°ã€‚è¿™æ ·ä¸‹æ¥é›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šçŸ¥é“æ•°æ®åº“ä¸­çš„16384ä¸ªslotåˆ†åˆ«è¢«æŒ‡æ´¾ç»™äº†é›†ç¾¤ä¸­çš„å“ªäº›èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ä¸‹å›¾æ˜¯é›†ç¾¤ä¸­å„èŠ‚ç‚¹çš„ClusterState.nodeså­—å…¸ï¼Œé‡Œé¢è®°å½•äº†slotä¸å„èŠ‚ç‚¹çš„åˆ†é…å…³ç³»ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/151560/201812/151560-20181224170500304-382111695.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;h4&gt;ã€€ã€€1.3 Â åœ¨é›†ç¾¤ä¸­æ‰§è¡Œå‘½ä»¤ã€€ã€€&lt;/h4&gt;
&lt;p&gt;Â ã€€ã€€ã€€ã€€åœ¨å¯¹æ•°æ®åº“ä¸­çš„16384ä¸ªslotéƒ½è¿›è¡Œäº†æŒ‡æ´¾ä¹‹åï¼Œé›†ç¾¤è¿›å…¥ä¸Šçº¿çŠ¶æ€ï¼Œè¿™æ—¶å®¢æˆ·ç«¯å°±å¯ä»¥å‘é›†ç¾¤ä¸­çš„èŠ‚ç‚¹å‘é€æ•°æ®å‘½ä»¤äº†ã€‚å½“å®¢æˆ·ç«¯å‘èŠ‚ç‚¹å‘é€é”®æœ‰å…³çš„å‘½ä»¤æ—¶ï¼Œæ¥æ”¶çš„èŠ‚ç‚¹ä¼šè®¡ç®—å‡ºå‘½ä»¤è¦å¤„ç†çš„é”®å±äºå“ªä¸ªslotï¼Œå¹¶æ£€æŸ¥è¿™ä¸ªslotæ˜¯å¦æ´¾ç»™äº†èŠ‚ç‚¹è‡ªå·±ï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€(1)å¦‚æœé”®æ‰€åœ¨çš„slotæ­£å¥½å°±æŒ‡æ´¾ç»™äº†å½“å‰èŠ‚ç‚¹ï¼Œé‚£ä¹ˆèŠ‚ç‚¹ç›´æ¥æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€(2)å¦‚æœé”®æ‰€åœ¨çš„slotå¹¶æ²¡æœ‰æŒ‡æ´¾ç»™å½“å‰èŠ‚ç‚¹,é‚£ä¹ˆèŠ‚ç‚¹ä¼šå‘å®¢æˆ·ç«¯è¿”å›ä¸€ä¸ªmovedé”™è¯¯ï¼ŒæŒ‡å¼•å®¢æˆ·ç«¯è½¬å‘åˆ°æ­£ç¡®çš„èŠ‚ç‚¹ï¼Œå¹¶å†æ¬¡å‘é€ä¹‹å‰æƒ³è¦çš„æ‰§è¡Œå‘½ä»¤ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/151560/201812/151560-20181224171122627-137024557.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€è‡ªåŠ¨åˆ†é…èŠ‚ç‚¹å’Œæ§½å·ï¼Œç¤ºä¾‹å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
     --&lt;span&gt; åœ¨èŠ‚ç‚¹7000å†™å…¥ä¸€ä¸ªé”®å€¼å¯¹,å‘ç°è‡ªåŠ¨åˆ†é…åˆ°7001çš„14041æ§½å·ä¸­ã€‚
     &lt;/span&gt;&lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7000&lt;/span&gt;&amp;gt; &lt;span&gt;set&lt;/span&gt; cluster &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;hello 7000&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
     -&amp;gt; Redirected to slot [&lt;span&gt;14041&lt;/span&gt;] located at &lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7001&lt;/span&gt;&lt;span&gt;
    OK

     &lt;/span&gt;--&lt;span&gt;èŠ‚ç‚¹7000ï¼Œè¯»å–è¯¥é”®ï¼Œè‡ªåŠ¨é‡å®šå‘åˆ°7001èŠ‚ç‚¹ä¸­å‡ºè¯»å–
     &lt;/span&gt;&lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7000&lt;/span&gt;&amp;gt; &lt;span&gt;get&lt;/span&gt;&lt;span&gt; cluster
     &lt;/span&gt;-&amp;gt; Redirected to slot [&lt;span&gt;14041&lt;/span&gt;] located at &lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7001&lt;/span&gt;
     &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;hello 7000&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;

      --&lt;span&gt;èŠ‚ç‚¹7000, ä¿®æ”¹è¯¥é”®ï¼Œè‡ªåŠ¨é‡å®šå‘åˆ°7001èŠ‚ç‚¹ä¸­å‡ºä¿®æ”¹
    &lt;/span&gt;&lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7000&lt;/span&gt;&amp;gt; &lt;span&gt;set&lt;/span&gt; cluster &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;hello 7001&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
    -&amp;gt; Redirected to slot [&lt;span&gt;14041&lt;/span&gt;] located at &lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7001&lt;/span&gt;&lt;span&gt;
     OK
 &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h5&gt;ã€€ã€€ã€€ã€€(1)Â è®¡ç®—é”®å±äºå“ªä¸ªslotæ§½&lt;/h5&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€&lt;span lang=&quot;EN-US&quot;&gt;redis é›†ç¾¤å…±æœ‰&lt;span lang=&quot;EN-US&quot;&gt;16384ä¸ªå“ˆå¸Œæ§½&lt;span lang=&quot;EN-US&quot;&gt;, æ¯ä¸ª&lt;span lang=&quot;EN-US&quot;&gt;keyé€šè¿‡&lt;span lang=&quot;EN-US&quot;&gt;CRC16æ ¡éªŒåå¯¹&lt;span lang=&quot;EN-US&quot;&gt;16384ä¸ªæ§½å–æ¨¡æ¥å†³å®šæ”¾ç½®åˆ°å“ªä¸ªèŠ‚ç‚¹çš„æ§½å·ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;ä½¿ç”¨cluster keyslotÂ  keyå‘½ä»¤å¯ä»¥æŸ¥çœ‹ä¸€ä¸ªæŒ‡å®šçš„é”®å±äºå“ªä¸ªslotï¼Œä¾‹å¦‚ä¸‹é¢è¯»å–clusteré”®ï¼Œå¯¹åº”æ§½å·ä¸º14041ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7000&lt;/span&gt;&amp;gt;&lt;span&gt; cluster keyslot cluster
    (integer) &lt;/span&gt;&lt;span&gt;14041&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h5&gt;ã€€ã€€ã€€ã€€(2)Â movedé”™è¯¯(Redirectedé‡å®šå‘ )&lt;/h5&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€å½“èŠ‚ç‚¹å‘ç°é”®æ‰€åœ¨çš„æ§½å¹¶éç”±è‡ªå·±è´Ÿè´£å¤„ç†çš„æ—¶å€™ï¼ŒèŠ‚ç‚¹å°±ä¼šå‘å®¢æˆ·ç«¯è¿”å›ä¸€ä¸ªmovedé”™è¯¯ï¼ŒæŒ‡å¼•å®¢æˆ·ç«¯è½¬å‘åˆ°æ­£åœ¨è´Ÿè´£æ§½çš„èŠ‚ç‚¹ã€‚movedé”™è¯¯æ ¼å¼ä¸º:moved slot ip :portã€‚ å…¶ä¸­slotä¸ºé”®æ‰€åœ¨çš„æ§½ï¼Œè€Œipå’Œportåˆ™æ˜¯è´Ÿè´£å¤„ç†æ§½slotçš„èŠ‚ç‚¹çš„ipåœ°å€å’Œç«¯å£å·ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€åœ¨é›†ç¾¤æ¨¡å¼ä¸‹å®¢æˆ·ç«¯æ¥æ”¶åˆ°movedé”™è¯¯æ—¶ï¼Œå¹¶ä¸ä¼šæ‰“å°å‡ºmovedé”™è¯¯ï¼Œè€Œæ˜¯æ ¹æ®movedé”™è¯¯è‡ªåŠ¨è¿›è¡ŒèŠ‚ç‚¹è½¬å‘ï¼Œå¹¶æ‰“å°å‡ºè½¬å‘æ—¥å¿—Redirected to slot ä¿¡æ¯ã€‚åªæœ‰åœ¨å•æœºæ¨¡å¼ä¸‹ï¼Œæ‰ä¼šæ‰“å°movedä¿¡æ¯ï¼Œå› ä¸ºå•æœºæ¨¡å¼ä¸‹çš„redis-cliå®¢æˆ·ç«¯ä¸æ¸…æ¥šmovedé”™è¯¯çš„ä½œç”¨ï¼Œæ‰€ä»¥ä¼šç›´æ¥å°†movedä¿¡æ¯æ‰“å°å‡ºæ¥ï¼Œåˆ™ä¸æ˜¯è¿›è¡ŒèŠ‚ç‚¹è½¬å‘ã€‚&lt;/p&gt;
&lt;h5&gt;ã€€ã€€ã€€ã€€(3)Â èŠ‚ç‚¹æ•°æ®åº“çš„å®ç°&lt;/h5&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€é›†ç¾¤èŠ‚ç‚¹ä¿å­˜é”®å€¼å¯¹ä»¥åŠé”®å€¼å¯¹ è¿‡æœŸçš„æ–¹å¼ä¸å•æœºredisæœåŠ¡æ–¹å¼å®Œå…¨ç›¸åŒï¼ŒèŠ‚ç‚¹ä¸å•æœºæœåŠ¡å™¨åœ¨æ•°æ®åº“æ–¹é¢çš„ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼šèŠ‚ç‚¹åªèƒ½ä½¿ç”¨0å·æ•°æ®åº“ï¼Œè€Œå•æœºredisæœåŠ¡åˆ™æ²¡æœ‰è¿™ä¸€é™åˆ¶ã€‚&lt;/p&gt;

&lt;h4&gt;ã€€ã€€1.4 é‡æ–°åˆ†ç‰‡&lt;/h4&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€Redisé›†ç¾¤çš„é‡æ–°åˆ†ç‰‡æ“ä½œå¯ä»¥å°†ä»»æ„æ•°é‡å·²ç»æŒ‡æ´¾ç»™æŸä¸ªèŠ‚ç‚¹(æºèŠ‚ç‚¹)çš„æ§½æ”¹ä¸ºæŒ‡æ´¾ç»™å¦ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶ä¸”ç›¸å…³æ§½æ‰€å±çš„é”®å€¼å¯¹ä¹Ÿä¼šä»æºèŠ‚ç‚¹è¢«ç§»åŠ¨åˆ°ç›®æ ‡èŠ‚ç‚¹ã€‚é‡æ–°åˆ†ç‰‡æ“ä½œå¯ä»¥åœ¨çº¿onlineè¿›è¡Œ,é‡æ–°åˆ†ç‰‡è¿‡ç¨‹ä¸­ï¼Œé›†ç¾¤ä¸éœ€è¦ä¸‹çº¿ï¼Œå¹¶ä¸”æºèŠ‚ç‚¹å’Œç›®æ ‡èŠ‚ç‚¹éƒ½å¯ä»¥ç»§ç»­å¤„ç†å‘½ä»¤è¯·æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ä¾‹å¦‚ï¼šåœ¨åŸæœ‰èŠ‚ç‚¹7000,7001,7002ä¸‰ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤ä¸Šï¼Œæ–°æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç«¯å£ä¸º7003ï¼Œç„¶åé€šè¿‡é‡æ–°åˆ†ç‰‡æ“ä½œï¼Œå°†åŸæœ¬æŒ‡æ´¾ç»™èŠ‚ç‚¹7002çš„10001~16383çš„æ§½ï¼Œå°†å…¶ä¸­çš„14042-16383é‡æ–°åˆ†ç»™èŠ‚ç‚¹7003ã€‚ã€€ã€€&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
    --&lt;span&gt; é…ç½®å¥½7003çš„redis.conf, å¯åŠ¨7003çš„redisæœåŠ¡    
    [root@hsr cluster&lt;/span&gt;-&lt;span&gt;test]# pwd
    &lt;/span&gt;/usr/local/redis/cluster-&lt;span&gt;test
    [root@hsr cluster&lt;/span&gt;-test]# ./redis-server  ./&lt;span&gt;7003&lt;/span&gt;/&lt;span&gt;redis.conf

    &lt;/span&gt;--&lt;span&gt; å°†7003åŠ å…¥é›†ç¾¤ä¸­
    &lt;/span&gt;&lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7000&lt;/span&gt;&amp;gt; cluster meet &lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt; &lt;span&gt;7003&lt;/span&gt;&lt;span&gt;
    OK

    &lt;/span&gt;-- æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯æ—¶ï¼Œæœ‰ä¸¤ä¸ªæ§½(&lt;span&gt;4808&lt;/span&gt;,&lt;span&gt;14041&lt;/span&gt;&lt;span&gt;)å·²ç»è‡ªåŠ¨åˆ†é…åˆ°äº†7003èŠ‚ç‚¹
ã€€ã€€&lt;/span&gt;&lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7000&lt;/span&gt;&amp;gt;&lt;span&gt; cluster nodes
ã€€ã€€399051ed127fbd1df8a0455858da9c103bf4864a &lt;/span&gt;&lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7003&lt;/span&gt;@&lt;span&gt;17003&lt;/span&gt; master - &lt;span&gt;0&lt;/span&gt; &lt;span&gt;1545705387000&lt;/span&gt; &lt;span&gt;3&lt;/span&gt; connected &lt;span&gt;&lt;strong&gt;4808 14041&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;
ã€€ã€€a9e82a7870ac31c221a4d13b28ba9897bb12257c &lt;/span&gt;&lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7000&lt;/span&gt;@&lt;span&gt;17000&lt;/span&gt; myself,master - &lt;span&gt;0&lt;/span&gt; &lt;span&gt;1545705386000&lt;/span&gt; &lt;span&gt;0&lt;/span&gt; connected &lt;span&gt;0&lt;/span&gt;-&lt;span&gt;4807&lt;/span&gt; &lt;span&gt;4809&lt;/span&gt;-&lt;span&gt;5000&lt;/span&gt;&lt;span&gt;
ã€€ã€€3b10786d21bbeb66e3517e8d3daa3ee2ce16705e &lt;/span&gt;&lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7001&lt;/span&gt;@&lt;span&gt;17001&lt;/span&gt; master - &lt;span&gt;0&lt;/span&gt; &lt;span&gt;1545705387741&lt;/span&gt; &lt;span&gt;1&lt;/span&gt; connected &lt;span&gt;5001&lt;/span&gt;-&lt;span&gt;10000&lt;/span&gt;&lt;span&gt;
ã€€ã€€7bd0cbd26392d1e98ffe9d46ae153c944d8f398d &lt;/span&gt;&lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7002&lt;/span&gt;@&lt;span&gt;17002&lt;/span&gt; master - &lt;span&gt;0&lt;/span&gt; &lt;span&gt;1545705387000&lt;/span&gt; &lt;span&gt;2&lt;/span&gt; connected &lt;span&gt;10001&lt;/span&gt;-&lt;span&gt;14040&lt;/span&gt; &lt;span&gt;14042&lt;/span&gt;-&lt;span&gt;16383&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€ é€šè¿‡setslotæ¥ç®€å•æ¼”ç¤ºä¸‹é‡æ–°åˆ†é…æ§½ï¼š&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€åœ¨è¿ç§»(ç›®çš„èŠ‚ç‚¹)æ‰§è¡Œ&lt;code&gt;cluster setslot &amp;lt;slot&amp;gt; IMPORTING &amp;lt;node ID&amp;gt;&lt;/code&gt;å‘½ä»¤ï¼ŒæŒ‡æ˜éœ€è¦è¿ç§»çš„slotå’Œè¿ç§»æºèŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ã€€ã€€ä¸‹é¢ç™»å½•åˆ°7003ç›®çš„èŠ‚ç‚¹ï¼Œä½¿ç”¨cluster setslotå°†å‚æ•°14042æ§½å·ä»¥åŠæ‰€åœ¨çš„æºèŠ‚ç‚¹IDï¼Œå¯¼å…¥åˆ°å½“å‰7003èŠ‚ç‚¹ä¸­ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7003&lt;/span&gt;&amp;gt; cluster setslot &lt;span&gt;14042&lt;/span&gt;&lt;span&gt; importing 7bd0cbd26392d1e98ffe9d46ae153c944d8f398d
    OK

    &lt;/span&gt;--&lt;span&gt; æŸ¥çœ‹cluster nodes ï¼Œ7003èŠ‚ç‚¹ä¿¡æ¯å¦‚ä¸‹ï¼š
    399051ed127fbd1df8a0455858da9c103bf4864a &lt;/span&gt;&lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;7003&lt;/span&gt;@&lt;span&gt;17003&lt;/span&gt; myself,master - &lt;span&gt;0&lt;/span&gt; &lt;span&gt;1545707846000&lt;/span&gt; &lt;span&gt;3&lt;/span&gt; connected &lt;span&gt;4808&lt;/span&gt; &lt;span&gt;14041&lt;/span&gt; &lt;br/&gt;[&lt;span&gt;&lt;strong&gt;14042-&amp;lt;-7bd0cbd26392d1e98ffe9d46ae153c944d8f398d&lt;/strong&gt;&lt;/span&gt;]
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ã€€ã€€å–æ¶ˆè¿ç§»æ“ä½œï¼Œå¯åœ¨è¿ç§»æºèŠ‚ç‚¹å’Œè¿ç§»ç›®çš„èŠ‚ç‚¹ä¸Šæ‰§è¡Œ&lt;code&gt;cluster setslot &amp;lt;slot&amp;gt; STABLE&lt;/code&gt;&lt;code&gt;ã€‚&lt;/code&gt;ä¸‹ç¯‡ä»‹ç»ä½¿ç”¨redis-trib.rbæ¥è¿›è¡Œé‡æ–°åˆ†ç‰‡ï¼Œredis-trib.rbè‡ªåŠ¨å®ç°äº†&lt;code&gt;setslot&lt;/code&gt;&lt;code&gt;çš„&lt;/code&gt;å®Œæ•´çš„è¿ç§»æµç¨‹ã€‚&lt;/p&gt;

</description>
<pubDate>Tue, 25 Dec 2018 06:32:00 +0000</pubDate>
<dc:creator>èŠ±é˜´å·ç§»</dc:creator>
<og:description>ä¸€.æ¦‚è¿° Redisé›†ç¾¤æä¾›äº†åˆ†å¸ƒå¼æ•°æ®åº“æ–¹æ¡ˆï¼Œé›†ç¾¤é€šè¿‡åˆ†ç‰‡æ¥è¿›è¡Œæ•°æ®å…±äº«ï¼Œå¹¶æä¾›å¤åˆ¶å’Œæ•…éšœè½¬ç§»åŠŸèƒ½ã€‚åœ¨å¤§æ•°æ®é‡æ–¹é¢çš„é«˜å¯ç”¨æ–¹æ¡ˆï¼Œclusteré›†ç¾¤æ¯”Sentinelæœ‰ä¼˜åŠ¿ã€‚ä½†Redisé›†ç¾¤å¹¶ä¸æ”¯æŒå¤„</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/MrHSR/p/10169394.html</dc:identifier>
</item>
<item>
<title>ç­–ç•¥æ¨¡å¼ Strategy æ”¿ç­–Policy è¡Œä¸ºå‹ è®¾è®¡æ¨¡å¼ï¼ˆäºŒåäº”ï¼‰ - noteless</title>
<link>http://www.cnblogs.com/noteless/p/10173694.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/noteless/p/10173694.html</guid>
<description>&lt;p&gt;ç­–ç•¥æ¨¡å¼ Strategy&lt;/p&gt;
&lt;div&gt;&lt;a href=&quot;https://img2018.cnblogs.com/blog/897393/201812/897393-20181225141939827-1793823315.png&quot;&gt;&lt;img title=&quot;image_5c21cbb4_55b2&quot; src=&quot;https://img2018.cnblogs.com/blog/897393/201812/897393-20181225141940838-716734557.png&quot; alt=&quot;image_5c21cbb4_55b2&quot; width=&quot;689&quot; height=&quot;457&quot; border=&quot;0&quot;/&gt;&lt;/a&gt;&lt;/div&gt;

&lt;div&gt;&lt;a href=&quot;https://img2018.cnblogs.com/blog/897393/201812/897393-20181225141941367-1979840183.png&quot;&gt;&lt;img title=&quot;image_5c21cbb4_3b5&quot; src=&quot;https://img2018.cnblogs.com/blog/897393/201812/897393-20181225141941587-509551365.png&quot; alt=&quot;image_5c21cbb4_3b5&quot; width=&quot;877&quot; height=&quot;140&quot; border=&quot;0&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;p&gt;ä¸ç­–ç•¥ç›¸å…³çš„å¸¸è§è¯æ±‡æœ‰ï¼šè¥é”€ç­–ç•¥ã€æŠ˜æ‰£ç­–ç•¥ã€æ•™å­¦ç­–ç•¥ã€è®°å¿†ç­–ç•¥ã€å­¦ä¹ ç­–ç•¥....&lt;/p&gt;
&lt;p&gt;â€œç­–ç•¥â€æ„å‘³ç€åˆ†æƒ…å†µè®¨è®ºï¼Œè€Œä¸æ˜¯ä¸€æ¦‚è€Œè®º&lt;/p&gt;
&lt;p&gt;é¢å¯¹ä¸åŒå¹´é¾„æ®µçš„äººï¼Œé¢å¯¹ä¸åŒçš„å•†å“ï¼Œå¿…ç„¶å°†ä¼šæœ‰ä¸åŒçš„è¯æœ¯ï¼›&lt;/p&gt;
&lt;p&gt;é¢å¯¹è´­ç‰©æ€»ä»·çš„èŒƒå›´ï¼Œå¾ˆå¯èƒ½ä¼šæœ‰ä¸åŒçš„æŠ˜æ‰£æ–¹æ¡ˆï¼›&lt;/p&gt;
&lt;p&gt;é¢å¯¹ç†è§£èƒ½åŠ›ä¸åŒçš„å­¦ç”Ÿï¼Œå¿…ç„¶æœ‰ä¸åŒçš„æ•™å­¦ç­–ç•¥ï¼›&lt;/p&gt;

&lt;p&gt;è€Œåœ¨æˆ‘ä»¬ç¨‹åºçš„ä¸–ç•Œé‡Œï¼Œâ€œç­–ç•¥â€å°±æ˜¯åˆ†æƒ…å†µè®¨è®ºã€‚ä¹Ÿå°±æ˜¯&lt;span&gt;&lt;strong&gt;ç±»ä¼¼çŠ¶æ€æ¨¡å¼ä¸­çš„æ¡ä»¶åˆ†æ”¯æˆ–è€…é€‰æ‹©åˆ†æ”¯&lt;/strong&gt;&lt;/span&gt;ã€‚&lt;/p&gt;
&lt;p&gt;åªä¸è¿‡&lt;span&gt;&lt;strong&gt;çŠ¶æ€æ¨¡å¼ä¸­æ˜¯äº‹ç‰©çš„ä¸åŒçŠ¶æ€ï¼Œè€Œç­–ç•¥æ¨¡å¼ä¸­å…³æ³¨çš„æ˜¯å¤„ç†æ–¹æ³•&lt;/strong&gt;&lt;/span&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚&lt;/p&gt;
&lt;div readability=&quot;6.5&quot;&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;if&lt;/span&gt;(totalPrice &amp;gt; 1000&lt;span&gt;){
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;9æŠ˜&lt;/span&gt;
&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt;(totalPrice &amp;gt; 2000&lt;span&gt;){
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;8æŠ˜&lt;/span&gt;
}&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt;(totalPrice &amp;gt; 3000&lt;span&gt;){
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;7æŠ˜&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;è¿™å°±æ˜¯ä¸€ç§æ‰“æŠ˜ç­–ç•¥ï¼Œå¯¹åº”äºè´­ç‰©æ€»é‡‘é¢çš„ä¸åŒï¼Œé‡‡ç”¨ä¸åŒçš„å¤„ç†æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;æ˜¾ç„¶ï¼Œä½¿ç”¨æ¡ä»¶åˆ†æ”¯æˆ–è€…é€‰æ‹©è¯­å¥ï¼Œç±»ä¼¼çŠ¶æ€æ¨¡å¼ä¸­çš„åˆ†æï¼Œä¹Ÿå­˜åœ¨ç±»ä¼¼çš„é—®é¢˜&lt;/p&gt;
&lt;p&gt;å¦‚æœæ¡ä»¶è¿‡å¤šï¼Œä¼šå¯¼è‡´&lt;span&gt;&lt;strong&gt;å¤„ç†é€»è¾‘å¤æ‚&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;è€Œä¸”ï¼Œç­–ç•¥çš„é€»è¾‘ä¸ä¸šåŠ¡é€»è¾‘&lt;span&gt;&lt;strong&gt;è€¦åˆ&lt;/strong&gt;&lt;/span&gt;åœ¨ä¸€èµ·ï¼Œå¦‚æœå¤„ç†æ–¹æ³•å˜åŒ–è¿˜éœ€è¦ä¿®æ”¹ä¸šåŠ¡é€»è¾‘æ–¹æ³•ï¼Œ&lt;span&gt;&lt;strong&gt;æ‰©å±•æ€§å·®&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;è€Œä¸”ï¼Œä¹Ÿ&lt;span&gt;&lt;strong&gt;ä¸é€‚åˆå¢åŠ æ–°çš„ç­–ç•¥æ–¹æ¡ˆ&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;&lt;span&gt;æ„å›¾&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;å®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•ï¼ŒæŠŠä»–ä»¬ä¸€ä¸ªä¸ªçš„å°è£…èµ·æ¥ï¼Œå¹¶ä½¿ä»–ä»¬å¯ä»¥äº’ç›¸è½¬æ¢ï¼Œæœ¬æ¨¡å¼ä½¿å¾—ç®—æ³•å¯ä»¥ç‹¬ç«‹äºä½¿ç”¨å®ƒçš„å®¢æˆ·ç«¯è€Œå˜åŒ–ã€‚&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;åˆ«åï¼šæ”¿ç­–Policy&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ç­–ç•¥æ¨¡å¼ä¸çŠ¶æ€æ¨¡å¼æœ¬è´¨ä¸€æ ·ï¼Œåªä¸è¿‡ä¸€ä¸ªæ˜¯çŠ¶æ€ï¼Œä¸€ä¸ªæ˜¯è¡Œä¸ºç®—æ³•ã€‚&lt;/p&gt;
&lt;h3&gt;&lt;span&gt;ç»“æ„&lt;/span&gt;&lt;/h3&gt;
&lt;div&gt;&lt;a href=&quot;https://img2018.cnblogs.com/blog/897393/201812/897393-20181225141941820-1712816165.png&quot;&gt;&lt;img title=&quot;image_5c21cbb4_22ad&quot; src=&quot;https://img2018.cnblogs.com/blog/897393/201812/897393-20181225141942106-1816607220.png&quot; alt=&quot;image_5c21cbb4_22ad&quot; width=&quot;618&quot; height=&quot;304&quot; border=&quot;0&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;div readability=&quot;11&quot;&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;æŠ½è±¡ç­–ç•¥è§’è‰²Strategy&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;å®šä¹‰äº†æŠ½è±¡çš„ç­–ç•¥ï¼Œæ¯”å¦‚æ‰“æŠ˜ï¼Œæ’åºç­‰&lt;/p&gt;
&lt;p&gt;å®šä¹‰äº†ç­–ç•¥çš„ä¸€è‡´æ€§è®¿é—®æ¥å£ï¼Œæ¯”å¦‚å®šä¹‰äº†ä¸€ä¸ªæ’åºæ¥å£ sortï¼ˆï¼‰&lt;/p&gt;
&lt;/div&gt;
&lt;div readability=&quot;11&quot;&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;å…·ä½“ç­–ç•¥è§’è‰²ConcreteStrategy&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;å®ç°æŠ½è±¡ç­–ç•¥çš„å®šä¹‰çš„æ¥å£ï¼Œå®ç°è‡ªå·±çš„è¡Œä¸ºç®—æ³•ï¼Œæ¯”å¦‚ConcreteStrategyAå†’æ³¡ ConcreteStrategyBå¿«æ’&lt;/p&gt;
&lt;div readability=&quot;7&quot;&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;ç¯å¢ƒç±»Context&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ç»´æŠ¤Strategyï¼ŒæŒæœ‰ä¸€ä¸ªStrategyçš„å¼•ç”¨ï¼Œç”¨æ¥ç®¡ç†Strategyï¼Œå¯ä»¥åˆ‡æ¢ç­–ç•¥&lt;/p&gt;
&lt;p&gt;æ˜¯Strategyçš„ä½¿ç”¨è€…&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h3&gt;&lt;span&gt;ä»£ç ç¤ºä¾‹&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;æ’åºæ¥å£,å®šä¹‰äº†ä¸€ä¸ªsortæ–¹æ³•&lt;/p&gt;
&lt;div&gt;
&lt;div readability=&quot;8&quot;&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package&lt;/span&gt;&lt;span&gt; strategy;
&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;interface&lt;/span&gt;&lt;span&gt; SortStrategy {
&lt;/span&gt;&lt;span&gt;void&lt;/span&gt;&lt;span&gt; sort();
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package&lt;/span&gt;&lt;span&gt; strategy;
&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; Bubble &lt;span&gt;implements&lt;/span&gt;&lt;span&gt; SortStrategy {
    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; sort() {
        System.out.println(&lt;/span&gt;&quot;å†’æ³¡æ’åº,è¾“å‡ºç»“æœ...&quot;&lt;span&gt;);
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div&gt;
&lt;div readability=&quot;7&quot;&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package&lt;/span&gt;&lt;span&gt; strategy;
&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; QuickSort &lt;span&gt;implements&lt;/span&gt;&lt;span&gt; SortStrategy {
    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; sort() {
        System.out.println(&lt;/span&gt;&quot;å¿«é€Ÿæ’åº,è¾“å‡ºç»“æœ...&quot;&lt;span&gt;);
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div readability=&quot;11&quot;&gt;
&lt;p&gt;ç¯å¢ƒç±»&lt;/p&gt;
&lt;p&gt;å†…éƒ¨æŒæœ‰ä¸€ä¸ªSortStrategyï¼Œç®€å•èµ·è§åˆå§‹åŒ–ä¸ºBubble&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ä¸€ä¸ªç®€å•çš„æ–¹æ³•è¿›è¡Œåˆ‡æ¢&lt;/p&gt;
&lt;p&gt;å¹¶ä¸”æä¾›sortæ–¹æ³•ï¼Œä»£ç†strategyçš„sortæ–¹æ³•&lt;/p&gt;
&lt;/div&gt;
&lt;div&gt;
&lt;div readability=&quot;7.5&quot;&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package&lt;/span&gt;&lt;span&gt; strategy;
&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; Context {
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; SortStrategy strategy = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Bubble();
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; setStrategy(String strategy) {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;(strategy.equals(&quot;bubble&quot;&lt;span&gt;)){
            &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.strategy = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Bubble();
        }&lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt;(strategy.equals(&quot;quick&quot;&lt;span&gt;)){
            &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.strategy = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; QuickSort();
        }
    }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; sort() {
        strategy.sort();
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æµ‹è¯•æ–¹æ³•&lt;/p&gt;
&lt;div readability=&quot;52.34834324554&quot;&gt;
&lt;div readability=&quot;7&quot;&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package&lt;/span&gt;&lt;span&gt; strategy;
&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; Test {
&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; main(String[] args) {
    Context context &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Context();
    context.sort();
    context.setStrategy(&lt;/span&gt;&quot;quick&quot;&lt;span&gt;);
    context.sort();
    context.setStrategy(&lt;/span&gt;&quot;bubble&quot;&lt;span&gt;);
    context.sort();
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;div&gt;&lt;a href=&quot;https://img2018.cnblogs.com/blog/897393/201812/897393-20181225141942297-1013591716.png&quot;&gt;&lt;img title=&quot;image_5c21cbb4_406f&quot; src=&quot;https://img2018.cnblogs.com/blog/897393/201812/897393-20181225141942582-1969861121.png&quot; alt=&quot;image_5c21cbb4_406f&quot; width=&quot;516&quot; height=&quot;120&quot; border=&quot;0&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;p&gt;ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹å¾—å‡ºæ¥ï¼Œå…·ä½“çš„ç®—æ³•è¡Œä¸ºï¼Œè¢«å°è£…åœ¨äº†å…·ä½“çš„ç­–ç•¥ç±»ä¸­ï¼Œæ¯”å¦‚Bubbleå’ŒQuickSort&lt;/p&gt;
&lt;p&gt;é€šè¿‡ç¯å¢ƒç±»Contextå¯¹ç®—æ³•è¿›è¡Œç®¡ç†åˆ‡æ¢ã€‚&lt;/p&gt;
&lt;h3&gt;&lt;span&gt;æ€»ç»“&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;ç­–ç•¥æ¨¡å¼ä¸çŠ¶æ€æ¨¡å¼æ˜¯ç±»ä¼¼çš„ï¼Œå€ŸåŠ©äºå¤šæ€çš„ç‰¹æ€§ï¼Œä»¥è¾¾åˆ°ä¸åŒçŠ¶æ€ä¸åŒè¡Œä¸º&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ä¸åŒçš„åœºæ™¯ä½¿ç”¨ä¸åŒçš„ç®—æ³•ï¼Œè¿™æœ¬å°±æ˜¯ä¸€ç§â€œä¸åŒçŠ¶æ€ï¼Œä¸åŒè¡Œä¸ºâ€çš„å«ä¹‰å»¶ä¼¸&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;éƒ½æ˜¯å€ŸåŠ©äºå¤šæ€ç‰¹æ€§ï¼Œè¿›è€Œä¹Ÿå°±æ˜¯ä¾èµ–å€’ç½®åŸåˆ™---é¢å‘æŠ½è±¡ç¼–ç¨‹ï¼Œå…¶æ ¹æœ¬ä¹Ÿæ˜¯ä¸ºäº†â€œä½è€¦åˆ&lt;/strong&gt;&lt;/span&gt;â€ã€‚&lt;/p&gt;

&lt;p&gt;ç­–ç•¥æ¨¡å¼ä¸­ä½¿ç”¨ç‹¬ç«‹çš„ç±»æ¥å°è£…ä¸åŒçš„ç®—æ³•è¡Œä¸ºï¼Œæ¯ä¸€ä¸ªç±»å°è£…å…·ä½“çš„è¡Œä¸º&lt;/p&gt;
&lt;p&gt;ç­–ç•¥æ¨¡å¼ä¸»è¦æ˜¯å°†&lt;span&gt;&lt;strong&gt;ç®—æ³•çš„å®šä¹‰ä¸ä½¿ç”¨è¿›è¡Œåˆ†å¼€&lt;/strong&gt;&lt;/span&gt;ï¼Œç®—æ³•è¢«å°è£…åœ¨ä¸åŒçš„ç­–ç•¥ç±»ä¸­&lt;/p&gt;
&lt;p&gt;å€ŸåŠ©äºç®—æ³•çš„ç¯å¢ƒç±»Contextï¼Œé’ˆå¯¹æŠ½è±¡ç­–ç•¥è¿›è¡Œç¼–ç¨‹ï¼Œç¬¦åˆä¾èµ–å€’ç½®åŸåˆ™Â &lt;/p&gt;
&lt;p&gt;è€Œä¸”ï¼Œæ–°å¢åŠ å…·ä½“çš„ç®—æ³•ï¼Œåªéœ€è¦å¢åŠ ä¸€ä¸ªæ–°çš„å…·ä½“çš„ç­–ç•¥ç±»å³å¯ã€‚&lt;/p&gt;

&lt;p&gt;ç­–ç•¥æ¨¡å¼å°†ç®—æ³•çš„å®šä¹‰ä¸ä½¿ç”¨åˆ†å¼€ï¼Œå…·ä½“çš„ç­–ç•¥å®Œå…¨å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶ç­‰æ–¹å¼æ³¨å…¥åˆ°Contextä¸­ï¼Œå®¢æˆ·ç«¯å®Œå…¨ä¸éœ€è¦å…³æ³¨å…·ä½“çš„ç­–ç•¥&lt;/p&gt;
&lt;p&gt;è€Œä¸”ï¼Œ&lt;span&gt;&lt;strong&gt;è¿è¡Œæ—¶å¯ä»¥éšæ—¶çš„æ›´æ¢ç­–ç•¥&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;ç­–ç•¥æ¨¡å¼çš„Contextï¼Œæˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ä¸€ä¸ªContextä¸€ä¸ªå½“å‰ç­–ç•¥ï¼Œé‚£ä¹ˆContextåˆ°åº•å†…éƒ¨ç»´æŠ¤å‡ ä¸ªç­–ç•¥ï¼Ÿåˆ°åº•è°è´Ÿè´£åˆ‡æ¢ï¼Œæ˜¯å®¢æˆ·ç«¯è¿˜æ˜¯Context&lt;/p&gt;
&lt;p&gt;ä¸ªäººè®¤ä¸ºéƒ½æ˜¯çµæ´»çš„ï¼Œç­–ç•¥æ¨¡å¼çš„æ ¸å¿ƒå°±åœ¨äºç®—æ³•çš„å®šä¹‰ä¸ä½¿ç”¨çš„è§£è€¦ï¼Œåœ¨æ¥ä¸‹æ¥çš„å…¶ä»–äº‹æƒ…ï¼Œè‡ªå·±çœ‹æƒ…å†µéšä¾¿æ¥ï¼ˆéšä¾¿çš„å‰ææ˜¯åˆç†æœ‰æ•ˆï¼‰&lt;/p&gt;

&lt;p&gt;åªè¦æ˜¯æ¶‰åŠåˆ°&lt;span&gt;&lt;strong&gt;å¤šç§ç®—æ³•è¡Œä¸º&lt;/strong&gt;&lt;/span&gt;çš„&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;åˆ‡æ¢&lt;/strong&gt;&lt;/span&gt;ï¼šç­–ç•¥å¯ä»¥è¿è¡Œæ—¶åˆ‡æ¢&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;å¤ç”¨&lt;/strong&gt;&lt;/span&gt;ï¼šç®—æ³•ä¸ä½¿ç”¨è§£è€¦ï¼Œç®—æ³•å¯ä»¥å•ç‹¬æ‰©å±•&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;å°è£…&lt;/strong&gt;&lt;/span&gt;ï¼šå±è”½ä½¿ç”¨è€…å¯¹ç®—æ³•å†…éƒ¨æ•°æ®ç»“æ„ç­‰é€»è¾‘çš„äº†è§£ï¼Œå¦åˆ™å¦‚æœç®—æ³•çš„å®ç°è€¦åˆåœ¨å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯ä¸æ˜¯ä¸€æ¸…äºŒæ¥šä¹ˆ&lt;/p&gt;
&lt;p&gt;éƒ½&lt;span&gt;&lt;strong&gt;å¯ä»¥è€ƒè™‘ç­–ç•¥æ¨¡å¼&lt;/strong&gt;&lt;/span&gt;ï¼Œç­–ç•¥æ¨¡å¼èƒ½å¤Ÿçµæ´»çš„åˆ‡æ¢ç®—æ³•ï¼Œä»¥åŠç®—æ³•ç‹¬ç«‹å‘å±•ï¼Œç¬¦åˆå¼€é—­åŸåˆ™Â &lt;/p&gt;

&lt;p&gt;ä½†æ˜¯ç±»ä¼¼çŠ¶æ€æ¨¡å¼ï¼Œç­–ç•¥æ¨¡å¼ä¹Ÿä¼šäº§ç”Ÿå¾ˆå¤šå°çš„å…·ä½“çš„ç­–ç•¥ç±»ï¼Œå¢åŠ ç±»çš„ä¸ªæ•°å’Œè¿è¡Œæ—¶å¯¹è±¡çš„ä¸ªæ•°ã€‚&lt;/p&gt;

&lt;/div&gt;
</description>
<pubDate>Tue, 25 Dec 2018 06:28:00 +0000</pubDate>
<dc:creator>noteless</dc:creator>
<og:description>ç­–ç•¥æ¨¡å¼ Strategyæ˜¯ä¸€ç§ç›¸å¯¹æ¯”è¾ƒç®€å•çš„è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ï¼Œä¸çŠ¶æ€æ¨¡å¼æœ‰ä¸€å®šçš„ç±»ä¼¼ï¼Œç­–ç•¥æ¨¡å¼å°†ç®—æ³•æ¦‚å¿µè¿›è¡ŒæŠ½è±¡ï¼ŒæŠ½è±¡ä¸ºåŒä¸€æ¥å£ï¼Œé¢å‘æ¥å£ç¼–ç¨‹ï¼ŒçŠ¶æ€æ¨¡å¼ä¹Ÿæ˜¯ç±»ä¼¼ï¼Œæœ¬è´¨ä»æ—§æ˜¯é¢å‘æŠ½è±¡ç¼–ç¨‹ï¼Œæœ¬æ–‡å¯¹ç­–ç•¥æ¨¡å¼</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/noteless/p/10173694.html</dc:identifier>
</item>
<item>
<title>èŠèŠæˆ‘çš„ Java è‡ªå­¦ä¹‹è·¯ - good_andyxu</title>
<link>http://www.cnblogs.com/goodAndyxublog/p/10173584.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/goodAndyxublog/p/10173584.html</guid>
<description>&lt;p&gt;æœ€è¿‘ç»å¸¸åœ¨çŸ¥ä¹æ”¶åˆ°ç±»ä¼¼ã€æ²¡åŸºç¡€ï¼Œjava å¦‚ä½•è‡ªå­¦ã€ã€ã€æ€ä¹ˆæ‰èƒ½æŒæ¡ç¼–ç¨‹ã€ç­‰ç­‰é—®é¢˜ï¼Œå†åŠ ä¸Šå‘ç°é«˜ä¸­åŒå­¦ä¹Ÿåœ¨è‡ªå­¦ã€‚æœ‰æ„Ÿè€Œå‘ï¼Œè®²è®²æˆ‘çš„è‡ªå­¦ä¹‹è·¯ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å¤§å­¦&quot;&gt;1.1. &lt;strong&gt;å¤§å­¦&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;é«˜è€ƒæ²¡æ­£å¸¸å‘æŒ¥ï¼Œè€ƒå…¥ä¸€æ‰€äºŒæµçš„å­¦æ ¡ï¼Œå½“æ—¶åˆ†æ•°ä¹Ÿåªé«˜å‡ºå½•å–åˆ†æ•°çº¿ä¸€ä¸¤åˆ†ï¼Œåªèƒ½é€‰æ‹©æœºæ¢°ä¸“ä¸šï¼Œå½“æ—¶åˆ†æ•°å¦‚æœé«˜ä¸ªä¸¤ä¸‰åˆ†ï¼Œæˆ–è®¸å¯ä»¥ä¸Šè®¡ç®—æœºä¸“ä¸šï¼Œæˆ–è®¸ç°åœ¨åŸºç¡€çŸ¥è¯†æ°´å¹³å¯èƒ½ä¸ä¸€æ ·ï¼Œå¯æ˜¯è°è¯´çš„å‡†é‚£ï¼Ÿ&lt;/p&gt;
&lt;p&gt;è¯´å›æ­£é¢˜ï¼Œå¤§å­¦å‰ä¸¤å¹´ï¼Œè·Ÿå¤§å¤šæ•°åŒå­¦ä¸€æ ·ï¼ŒåŸºæœ¬åœ¨æ··ï¼Œè¯¥æ‰“æ¸¸æˆæ‰“æ¸¸æˆï¼Œè¯¥é€ƒè¯¾çš„é€ƒè¯¾ã€‚ä½†æ˜¯æœŸæœ«çš„æ—¶å€™ä¼šå»ä¸´æ—¶åŠªåŠ›ä¸€æŠŠï¼Œæœ€åä¹Ÿèƒ½å–ä¸ªå¥½æˆç»©ã€‚è¿™é‡Œè¯´ä¸€ç‚¹ï¼Œåæ¥æ‰å‘ç°æœ‰äº›åŒå­¦åŸæ¥æœŸæœ«çš„æ—¶å€™ä¹Ÿä¸å»å‡†å¤‡ä¸€æŠŠï¼Œæ²¡åŠæ³•è¿™æ ·ä¹Ÿå°±åªèƒ½æŒ‚ç§‘äº†ã€‚æ‰€ä»¥è¿™é‡Œæƒ³è¯´ä¸ªè§‚ç‚¹ï¼Œå…¶å®ä½ åªè¦ç¨å¾®åŠªåŠ›ä¸€ç‚¹ï¼Œå…¶å®å°±å·²ç»è¶…è¿‡äº†å¾ˆå¤šäººã€‚&lt;/p&gt;
&lt;p&gt;è¯´è¯´æˆ‘ä»¬ä¸“ä¸šï¼Œè·Ÿè®¡ç®—æœºæœ‰å…³è”å¯èƒ½å°±æ˜¯ã€æœºã€äº†å§ã€‚æ‰€å¹¸ï¼Œå¤§ä¸€çš„æ—¶å€™è¿˜æœ‰ä¸€é—¨ C è¯­è¨€å¿…ä¿®è¯¾ã€‚é‚£æ—¶å€™å…¶å®å¯¹äºç¼–ç¨‹å­˜åœ¨æ‡µæ‡‚çš„å…´è¶£ï¼Œæ›¾æƒ³è¿‡å­¦å®Œ C è¯­è¨€ï¼Œç„¶åæˆä¸ºä¸€ä¸ªé»‘å®¢ã€‚å¯æ˜¯å­¦çš„æ—¶å€™æ‰å‘ç°ï¼Œæ‰å‘ç°è¿™é—¨è¯¾æ˜¯å¦‚æ­¤æ¯ç‡¥ï¼Œè€Œä¸”ä½ æ ¹æœ¬ä¸çŸ¥é“å­¦å®Œä½ èƒ½å¹²ä»€ä¹ˆã€‚ä¹¦æœ¬åªæœ‰ç»ƒä¹ é¢˜ï¼Œè€å¸ˆä¹Ÿåªæ˜¯ç…§æœ¬å®£ç§‘ã€‚äºæ˜¯é‚£æ—¶å€™ä¹Ÿå¤±å»å¯¹è¿™é—¨è¯¾çš„å…´è¶£ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å¤§ä¸‰&quot;&gt;1.2. &lt;strong&gt;å¤§ä¸‰&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;å¤§ä¸‰é‚£å¹´å¯¹äºæˆ‘äººç”Ÿæ˜¯æœ‰æ„ä¹‰çš„ä¸€å¹´ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¸ªå­¦æœŸï¼Œç©·çš„æ²¡åŠæ³•ï¼Œå‡ºå»å…¼èŒï¼Œèµšåˆ°äººç”Ÿç¬¬ä¸€ç¬”å·¥èµ„ã€‚å¹¶ä¸”ç”¨è¿™éƒ¨åˆ†é’±ï¼ŒæŠ¥è€ƒé©¾æ ¡ã€‚ä¹Ÿæ˜¯è¿™ç¬”é’±ï¼Œè®©æˆ‘æ„è¯†åˆ°åŸæ¥èµšé’±æ˜¯å¦‚æ­¤ä¸å®¹æ˜“ã€‚&lt;/p&gt;
&lt;p&gt;å¤§ä¸‰é‚£å¹´ï¼Œå› ä¸ºé¢ä¸´æ¯•ä¸šçš„å‹åŠ›ï¼Œä¸å¾—ä¸å»æ€è€ƒå°†æ¥ä»äº‹ä»€ä¹ˆã€‚é™ä¸‹å¿ƒæ¥æ€è€ƒåˆ†ææœªæ¥åˆ°åº•åº”è¯¥å¹²ä»€ä¹ˆã€‚æˆ‘æƒ³è¿‡ä»äº‹æœ¬ä¸“ä¸šçš„å·¥ä½œï¼Œä½†æ˜¯æœ¬ä¸“ä¸šæ— éå°±å»å·¥å‚å·¥ä½œæˆ–è€…åœ¨ç ”ç©¶é™¢ä»äº‹åˆ¶å›¾å·¥ä½œï¼Œæˆ‘æ ¹æœ¬æ²¡å…´è¶£ã€‚çœŸçš„ï¼Œæˆ‘é‚£æ—¶å€™çœŸçš„ååˆ†åŒæ¶ CAD åˆ¶å›¾ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡ŒçœŸçš„æ„Ÿè°¢æˆ‘å¥³æœ‹å‹ï¼Œæ˜¯å¥¹ç»™æˆ‘æäº†ä¸ªæ€è·¯ï¼Œè®©æˆ‘å»å°è¯•å­¦ä¹ ä¸‹ Javaã€‚å“ˆå“ˆï¼Œæ„Ÿè°¢æŸåº¦ï¼Œæœç´¢ Java çš„æ—¶å€™å¼¹å‡ºæ»¡å±å¹¿å‘Šï¼Œä¸€ç‚¹è¿›å»å°±çœ‹äº† XXX åœ¨æŸåŸ¹è®­ç­æ¯•ä¸šï¼ŒæˆåŠŸè¿›å…¥å¤§å…¬å¸ï¼Œæ‹¿åˆ°å¾ˆé«˜å·¥èµ„ã€‚çš„ç¡®ï¼Œè¿™ä¸ªçœŸçš„å¾ˆæœ‰å¸å¼•åŠ›ã€‚äºæ˜¯è¸ä¸Šè‡ªå­¦ä¹‹è·¯ã€‚è¿˜è®°å¾—æ˜¯å¤§ä¸‰å¯’å‡çš„æ—¶å€™ï¼Œåœ¨å®¶æ•²ä¸‹ç¬¬ä¸€è¡Œä»£ç ã€‚&lt;/p&gt;
&lt;pre class=&quot;java&quot;&gt;
&lt;code&gt;    public static void main(String[] args) {
        System.out.println(&quot;Hello world&quot;);
    }&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¯´è¯´é‚£æ—¶å€™æ€ä¹ˆè‡ªå­¦çš„ã€‚æˆ‘åœ¨æŸè‡ªå­¦ç½‘ç«™ä¸Šæ‰¾åˆ° Java åŸºç¡€çš„è§†é¢‘è¯¾ç¨‹ï¼ŒçœŸçš„å¾ˆè€çš„è¯¾ç¨‹ï¼Œå½•åˆ¶äº 2012 å¹´ã€‚ç»™ä½ ä»¬çœ‹çœ‹å½“æ—¶çš„è¯¾ç¨‹ç›®å½•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2018/12/23/167db1ead292439b?w=916&amp;amp;h=608&amp;amp;f=png&amp;amp;s=105705&quot; alt=&quot;è¯¾ç¨‹ç›®å½•&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2018/12/23/167db1f4d440dfe9?w=904&amp;amp;h=610&amp;amp;f=png&amp;amp;s=102873&quot; alt=&quot;è¯¾ç¨‹ç›®å½•&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹å»æ¯å¤©çš„ç”Ÿæ´»åŸºæœ¬ä¸Šå°±å¾ˆæ¯ç‡¥ï¼Œé™¤äº†ä¸Šè¯¾ï¼Œå°±æ˜¯å­¦ä¹ ï¼Œå¶å°”è¿˜å‡ºå»å…¼èŒä¸€ä¸‹ã€‚é‚£æ—¶å€™åŸºæœ¬å°±åœ¨å­¦æ ¡å›¾ä¹¦é¦†å­¦ä¹ ï¼Œæ²¡äº‹å°±å¾€æˆ‘ä»¬å­¦æ ¡å››æ¥¼å»å€Ÿ Java ç›¸å…³çš„ä¹¦ç±ã€‚é‚£æ—¶å€™ä¹Ÿä¸çŸ¥é“é‚£äº› Java ä¹¦ç±æ¯”è¾ƒç»å…¸ï¼Œæ‰€ä»¥å°±æ ¹æ®æ ‡é¢˜æŒ‘ä¹¦ï¼Œäºæ˜¯å°±æŒ‘äº†ã€Java å…¥é—¨åˆ°ç²¾é€šã€ï¼Œã€21å¤©å¸¦ä½ å­¦ä¼š Javaã€è¿™ç±»ä¹¦ã€‚å½“æ—¶çœ‹åˆ°è¿™ç±»ä¹¦å°±è§‰å¾—æ ‡é¢˜ååˆ†å¸å¼•äººï¼Œé‚£æ—¶å€™å°±è§‰å¾—çœ‹å®Œè¿™äº›ä¹¦å°±èƒ½é€Ÿæˆ Javaã€‚ä½†æ˜¯ç°åœ¨å›æƒ³ï¼Œè¿™äº›ä¹¦çœŸçš„ååˆ†å‘çˆ¹ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯ç½‘ä¸Šèµ„æºæŠ„æŠ„æ”¹æ”¹ï¼Œè¯¯äººå­å¼Ÿã€‚å„ä½è¯»è€…å¦‚æœæƒ³ä¹°ä¹¦çš„è¯ï¼Œåƒä¸‡åˆ«ä¹°è¿™ç±»ä¹¦ç±ã€‚&lt;/p&gt;
&lt;p&gt;æ—¶é—´æ¥åˆ°å¤§ä¸‰é‚£ä¸ªæš‘å‡ï¼ŒåŸºæœ¬ä¸Šå­¦å®Œäº† Java åŸºç¡€ï¼Œæœ€åè¿˜è·Ÿç€è§†é¢‘æ•™ç¨‹å®Œæˆä¸€ä¸ªè´ªåƒè›‡çš„å°æ¸¸æˆï¼Œé‚£æ—¶å€™çœŸçš„æ„Ÿè§‰å¾ˆæœ‰æˆå°±æ„Ÿã€‚&lt;/p&gt;
&lt;p&gt;å­¦å®Œ Java åŸºç¡€ï¼Œæ¥ä¸‹å»å°±é¢ä¸´ç€å­¦é‚£ä¸ªæ–¹å‘çš„é—®é¢˜ã€‚é‚£æ—¶å€™å…¶å®ä¹Ÿæ²¡å¤šè€ƒè™‘ï¼Œå°±ç›´æ¥é€‰æ‹© Web åå°å¼€å‘è¿™ä¸ªæ–¹å‘ã€‚åœ¨æ·˜å®ä¸Šä¹°äº†ä¸€å¥—æŸåŸ¹è®­ç­çš„åŸ¹è®­è¯¾ç¨‹åï¼Œå°±è·Ÿç€å…¶è¿›åº¦å­¦ä¹ ã€‚è¿™ä¸ªé˜¶æ®µï¼Œå·²ç»æ„Ÿè§‰åˆ°ä¸åƒ Java åŸºç¡€é‚£æ—¶å€™ç®€å•äº†ã€‚å­¦çš„ä¸œè¥¿ä¸ä»…éš¾ï¼Œè€Œä¸”å¤šï¼ŒåŸºæœ¬ä¸Šå„ä¸ªæ–¹é¢éƒ½éœ€è¦å­¦ä¼šã€‚è¿˜è®°å¾—è¿™ä¸ªè¯¾ç¨‹ï¼Œåˆšå¼€å§‹å…ˆæ•™ Htmlã€CSSã€JavaScript,åæ¥å°±å¼€å§‹æ•™ SQL è¯­æ³•ï¼Œæœ€åå¼€å§‹ Java çš„ Servlet ç­‰ã€‚é‚£æ—¶å€™åŸºæœ¬ä¸Šæ¯å¤©ç™½å¤©ä»”ç»†çœ‹è¯¾ç¨‹è§†é¢‘ï¼Œç„¶åæ™šä¸Šä¸€è¡Œè¡Œå»è¾“å…¥ç»ƒä¹ ï¼Œå°½é‡ä¿è¯å½“å¤©æŠŠè¯¾ç¨‹éƒ½ç»ƒä¹ ä¸€éï¼Œä¸æ‹–åˆ°æ˜å¤©ã€‚ä½†æ˜¯æœ‰æ—¶å€™å°±æ˜¯å­¦å®Œè¿™ä¸ªï¼Œåˆå¿˜äº†ä¸Šé¢æˆ–è€…è¯´å°±æ˜¯æƒ³ä¸åˆ°è¿™ç§è§£å†³åŠæ³•ã€‚è¿™æ—¶å€™æˆ‘å°±ä¼šå†çœ‹ä¸‹ä¹‹å‰è¯¾ç¨‹ï¼Œçœ‹ä¸‹åˆ°åº•å“ªä¸ªç‚¹å¡ä½ï¼Œç„¶åæ€è€ƒä¸‹ä¸ºä»€ä¹ˆæ²¡æƒ³åˆ°ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å®ä¹ &quot;&gt;1.3. å®ä¹ &lt;/h2&gt;
&lt;p&gt;å¤§æ¦‚åœ¨ 11 æœˆçš„æ—¶å€™ï¼ŒåŸºæœ¬æŠŠè¯¾ç¨‹å­¦å®Œäº†ã€‚å­¦æ ¡é‡Œåˆæ²¡æœ‰ä»€ä¹ˆè¯¾ç¨‹äº†ï¼Œå‘†ç€å­¦æ ¡åˆæ²¡ä»€ä¹ˆäº‹ï¼Œä¹Ÿå°±æƒ³ç€å‡ºçœ‹çœ‹èƒ½ä¸èƒ½çŸ¥é“å®ä¹ ã€‚&lt;/p&gt;
&lt;p&gt;é‚£æ—¶å€™ç”±äºåˆšè‡ªå­¦å®Œï¼Œå¯¹äºè‡ªå·±çš„æŠ€èƒ½æ ¹æœ¬æ²¡æœ‰ä¿¡å¿ƒï¼Œä¹Ÿä¸çŸ¥é“ä¼ä¸šå¼€å‘åˆ°åº•éœ€è¦æŒæ¡ä»€ä¹ˆæŠ€èƒ½ã€‚è¿™å°±å¯¼è‡´äº†é‚£æ—¶å€™æˆ‘å¿ƒæƒ³åªè¦æ‰¾åˆ°å®ä¹ å·¥ä½œå°±å¥½ï¼Œèƒ½å¼€ç»™æˆ‘ä¸€äº›å·¥èµ„ï¼Œç„¶åèƒ½è®©è¿›å…¥å­¦ä¹ å°±å¥½äº†ã€‚&lt;/p&gt;
&lt;p&gt;å…œå…œè½¬è½¬ï¼Œä¸æ–­åœ¨ 58 èµ¶é›†ä¸Šæ‰¾å·¥ä½œï¼Œæ‰¾äº†ä¸€åœˆæœ€ç»ˆæ‰¾åˆ°äº†ä¸€å®¶å…¬å¸æ‹›è˜ Java å¼€å‘ã€‚é¢è¯•å®˜é—®äº†å‡ ä¸ªç®€å• Java çš„åŸºç¡€é—®é¢˜åï¼Œç„¶åå°±å‘ offer äº†ã€‚&lt;/p&gt;
&lt;p&gt;è¿›å…¥å…¬å¸ä¹‹åï¼Œæˆ‘æ‰å‘ç°è¿™ä¸ªè·Ÿè‡ªå·±æƒ³è±¡çš„å®Œå…¨ä¸ä¸€æ ·ã€‚å…¨å…¬å¸åå°å¼€å‘å°±æˆ‘ä¸€ä¸ªäººï¼Œè€Œé¢è¯•æˆ‘çš„é¢è¯•å®˜ï¼Œä¸åœ¨è¿™ä¸ªå…¬å¸ï¼Œåœ¨å¦ä¸€ä¸ªå¸‚çš„å¦ä¸€å®¶å…¬å¸ï¼Œåœ¨è¿™å…¬å¸æŒ‚ç‰Œä¸€ä¸ªå¼€å‘ç»ç†èŒä½ã€‚&lt;/p&gt;
&lt;p&gt;é‚£æ—¶å€™ä¹Ÿä¸çŸ¥é“éœ€æ±‚ï¼Œå°±æ‰”ç»™æˆ‘ä¸€å¥—è¡¨ç»“æ„è®¾è®¡ä»¥åŠä¸€å¥—ä»–ä»¬ä»¥å‰å¼€å‘å¥½çš„åå°ä»£ç ï¼Œå°±è®©æˆ‘æ¨¡ä»¿è¿™ä¸ªæ”¹æ”¹å°±å¥½äº†ã€‚è¿˜è®°å¾—é‚£å¥—æ¡†æ¶ç”± easyuiï¼Œstruts2ï¼Œmybatisï¼Œmysql æ„æˆã€‚æ¯å¤©çš„å·¥ä½œå°±æ˜¯ç…§ç€è¿™å—æ”¹ï¼Œä¸ä¼šçš„å°±æ‰¾æœç´¢å¼•æ“ã€‚æ—è¾¹çš„åŒäº‹ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯å…¶ä»–å²—ä½ï¼Œæ²¡æœ‰ä¸€ä¸ªå¯ä»¥è¯·æ•™é—®é¢˜çš„ã€‚é‚£æ—¶å€™ä¹Ÿæ²¡æœ‰ä»€ä¹ˆéœ€æ±‚æ–‡æ¡£ï¼ŒåŸºæœ¬éƒ½æ˜¯æŸæŸç»ç†æ‹æ‹è„‘è¢‹æƒ³å‡ºæ¥ã€‚åœ¨é‚£ä¸ªå…¬å¸å‘†äº†ä¸¤ä¸‰ä¸ªæœˆï¼ŒåŸºæœ¬ä¸Šæ²¡æœ‰ä»€ä¹ˆæ”¶è·ï¼Œå°±åƒå…¬å¸è¾äº†èŒã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¸ªæ—¶å€™å·²ç»åˆ°äº†ä¸‰æœˆä»½ï¼Œè¿˜æœ‰ä¸‰ä¸ªæœˆå°±æ¯•ä¸šäº†ã€‚é‚£æ—¶å€™ä¹Ÿå¾ˆæ…Œå¼ ï¼Œè‡ªå·±å­¦æ ¡æ‹›è˜ä¼šä¹Ÿå»é€›äº†ä¸‹ï¼Œä½†æ˜¯æ ¹æœ¬æ²¡æœ‰çœ‹åˆ° Java ç›¸å…³çš„å·¥ä½œã€‚å¶ç„¶é—´åœ¨ç½‘ä¸Šçœ‹åˆ°æ’ç”Ÿï¼Œç½‘æ˜“çš„æ˜¥æ‹›çš„æœºä¼šï¼ŒæŠ±ç€è¯•è¯•çš„æƒ³æ³•ï¼Œå°±é€‰æ‹©æŠ¥åã€‚æŠ¥åä¹‹åï¼Œäº†è§£åˆ°å…¶ç¬”è¯•å†…å®¹ï¼Œå‘ç°å¾ˆå¤šå†…å®¹è‡ªå·±å¾ˆå¤šæ ¹æœ¬æ²¡å­¦è¿‡ï¼Œæ¯”å¦‚æ“ä½œç³»ç»Ÿï¼Œlinux çŸ¥è¯†ã€‚å¯æ˜¯æ²¡åŠæ³•å•Šï¼Œåªèƒ½ç–¯ç‹‚åœ¨ç‰›å®¢ç½‘åˆ·é¢˜ï¼Œç–¯ç‹‚è¡¥å……è¿™äº›çŸ¥è¯†ã€‚æœ€åï¼Œä¸¤å®¶å…¬å¸ç¬”è¯•è¿˜æ˜¯éƒ½æŒ‚äº†ã€‚ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;p&gt;ç­‰ç½‘æ˜“ç¬”è¯•å®Œï¼Œå·²ç»åˆ°äº†å››æœˆã€‚æœ¬åœ°å·¥ä½œå²—ä½ï¼Œä¹Ÿå·²ç»åŸºæœ¬æ‰¾äº†éï¼Œä¸æ˜¯ä¸è¦å®ä¹ ç”Ÿï¼Œå°±æ˜¯åŸºæœ¬å·¥èµ„å¤ªä½ï¼Œä½åˆ°ä»€ä¹ˆç¨‹åº¦é‚£ï¼Œæœ‰å®¶å…¬å¸å®ä¹ æ¯æœˆå°±ç»™ 800 å·¥èµ„ã€‚&lt;/p&gt;
&lt;p&gt;åæ¥æ›¾æœ‰ä¸ªå¤§å…¬å¸æ¥å­¦æ ¡å®£è®²ï¼Œå¬åˆ°æœ€åæ„å¤–å¾—çŸ¥ä»–ä»¬è¿˜æ‹›è˜ Java å¼€å‘ï¼Œé©¬ä¸ŠæŠ¥åå‚åŠ ã€‚æ¥ä¸‹æ¥çš„ç¬”è¯•ä¸é¢è¯•éƒ½æ˜¯è·‘åˆ°é‚£ä¸ªå…¬å¸æ‰€åœ¨åŸå¸‚ï¼Œæœ€åæ‹¿åˆ°äº†è¿™å®¶å…¬å¸çš„ offerã€‚ä¸è¿‡æœ€åæ²¡æœ‰é€‰æ‹©å»ï¼Œä¸€æ˜¯å› ä¸ºå…¶æ¯•ä¸šä¹‹åå¼€çš„å·¥èµ„çœŸçš„å¤ªä½ï¼Œæ‰ 3500ï¼ŒäºŒæ˜¯å› ä¸ºä»–ä»¬å…¬å¸æ‰€åœ¨åœ°æ–¹å®åœ¨å¤ªååƒ»äº†ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬åœ°æ²¡åŠæ³•æ‰¾åˆ°å·¥ä½œä¹‹åï¼Œä¸å¾—ä¸å»æ­å·æ‰¾æ‰¾æœºä¼šã€‚åœ¨æ‹‰å‹¾äº†æœäº†ä¸€åœˆå·¥ä½œæœºä¼šï¼Œç»ˆäºæ‰¾åˆ°å‡ å®¶å…¬å¸è¿˜åœ¨æ‹›æ”¶å®ä¹ ç”Ÿï¼Œå¹¿æŠ•ç®€å†ï¼Œæ”¶åˆ°å‡ å®¶å…¬å¸çš„é¢è¯•æœºä¼šã€‚é‚£ä¸€å¤©å»é¢è¯•çš„æ—¶å€™ï¼Œæ­£å¥½ä¹Ÿæ˜¯ç½‘æ˜“æ˜¥æ‹›é¢è¯•ï¼Œçœ‹åˆ°ä¸€ä¸ªä¸ªåç€ç½‘æ˜“å¤§å·´å»é¢è¯•ï¼ŒçœŸçš„ååˆ†ç¾¡æ…•ã€‚é‚£ä¸€å¤©ï¼Œé¢äº†ä¸¤å®¶å…¬å¸ï¼Œæœ€åä¸€å®¶å…¬å¸å‘äº†å®ä¹  offerã€‚è¯´è¯´é‚£æ—¶å€™å®ä¹ å·¥èµ„å§ï¼Œä¸€å¤© 160ï¼Œé‚£æ—¶å€™çœŸè§‰å¾—å¥½é«˜ï¼ŒçœŸè§‰å¾—åº”è¯¥æ—©ç‚¹æ¥æ­å·ã€‚&lt;/p&gt;
&lt;p&gt;è¿›å…¥å…¬å¸ä¹‹åï¼Œåˆ†é…äº†ä¸ªå¸ˆå…„å¸¦æˆ‘ã€‚è¿™ä¸ªå¸ˆå…„è™½ç„¶è¯å¾ˆå°‘ï¼Œä½†æ˜¯åœ¨ä»–èº«ä¸Šå­¦ä¹ åˆ°äº†å¾ˆå¤šï¼Œç¬¬ä¸€æ¬¡æ„Ÿè§‰åˆ°é‚£ç§æŠ€æœ¯å¼€å‘çš„èŒƒå›´ã€‚åœ¨å…¬å¸å®ä¹ å¤§æ¦‚ä¸€ä¸ªå¤šæœˆï¼ŒåŸºæœ¬ä¸Šç”¨åˆ°ä¹Ÿæ˜¯ä¹‹å‰å­¦ä¹ åˆ°ä¸œè¥¿ï¼Œå¯ä»¥è¯´å¤ä¹ å·©å›ºä»¥å‰å­¦çš„çŸ¥è¯†ã€‚5 æœˆä»½å°±å›å­¦æ ¡æŠ¥åˆ°ï¼Œç„¶åæ¯•ä¸šç­”è¾©ï¼Œé¡ºåˆ©å°±æ¯•ä¸šã€‚åæ¥åœ¨è¿™å®¶å…¬å¸ä¹Ÿé¡ºåˆ©å…¥èŒï¼ŒçœŸæ­£è¿›å…¥å¼€å‘è¿™ä¸€è¡Œã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ€»ç»“ä¸æƒ³æ³•&quot;&gt;1.4. æ€»ç»“ä¸æƒ³æ³•&lt;/h2&gt;
&lt;p&gt;çœ‹åˆ°è¿™é‡Œæƒ³å¿…ä½ ä»¬ä¹Ÿçœ‹å®Œæˆ‘çš„è‡ªå­¦ä¹‹è·¯ï¼Œä¸‹é¢ä¹Ÿè°ˆè°ˆæˆ‘è¿™ä¸€è·¯çš„æƒ³æ³•ã€‚&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;çœ‹åˆ°å¾ˆå¤šæœ‹å‹é—®ï¼Œæˆ‘ç°åœ¨å­¦ç¼–ç¨‹æ¥çš„åŠå—ï¼Ÿæˆ‘æƒ³è¯´çš„æ˜¯ï¼Œä½ ä»€ä¹ˆæ—¶å€™å­¦ç¼–ç¨‹éƒ½æ¥çš„åŠï¼Œä½†æ˜¯ä½ è‡ªå·±éœ€è¦è¯„ä¼°ä½ è‡ªå·±åˆ°åº•èƒ½ä¸èƒ½&lt;strong&gt;é™ä¸‹å¿ƒæ¥èŠ±ä¸‹æ—¶é—´æ¥å­¦ä¹ &lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å­¦ä¹ ç¼–ç¨‹éœ€è¦ä»€ä¹ˆåŸºç¡€ï¼Ÿå­¦ä¹ ç¼–ç¨‹æœ€å¥½æ˜¯ç†å·¥ç§‘ï¼Œä½†æ˜¯ä½ å¦‚æœä¸æ˜¯ï¼Œä¹Ÿæ²¡å…³ç³»ï¼Œåªè¦ä½ èƒ½&lt;strong&gt;åšæŒ&lt;/strong&gt;ä¸‹æ¥ï¼Œä¹Ÿèƒ½å­¦å¥½ã€‚æˆ‘è®¤è¯†å¥½å‡ ä½åŒäº‹ï¼Œä¹Ÿæ˜¯æ–‡ç§‘ä¸“ä¸šè½¬è¡Œè¿‡æ¥ï¼Œæœ‰ä¸€äº›å¤§ç‰›ï¼Œç”šè‡³é«˜ä¸­æ²¡æ¯•ä¸šã€‚ä½†æ˜¯ä½ å¦‚æœå¯¹è¿™ä¸ªæ²¡å…´è¶£ï¼Œæœ€å¥½å°½æ—©æ”¾å¼ƒã€‚å…´è¶£æ˜¯å¾ˆå¥½çš„å¯¼å¸ˆã€‚&lt;/li&gt;
&lt;li&gt;å­¦ä¹ ç¼–ç¨‹ï¼Œéœ€ä¸éœ€è¦å»å»åŸ¹è®­ç­ï¼Ÿå¦‚æœä½ è‡ªå·±æ²¡æœ‰è‡ªåˆ¶åŠ›ï¼Œæˆ–è€…æƒ³å¿«ç‚¹å‡ºå¸ˆï¼Œå¯ä»¥é€‰æ‹©åŸ¹è®­ç­ã€‚å› ä¸ºåœ¨åŸ¹è®­ç­ï¼Œä½ ä¼šæ„Ÿå—åˆ°è¿™ç§å­¦ä¹ çš„èŒƒå›´ï¼ŒåŸ¹è®­ç­æœ€åä¹Ÿä¼šå«ä½ ä¸€äº›é¢è¯•æŠ€å·§ä»€ä¹ˆçš„ã€‚ä½†æ˜¯å»ºè®®ä½ æŠ¥ç­ä¹‹å‰ï¼Œä¹‹å‰å°è¯•å…ˆæŠŠ Java åŸºç¡€å­¦å®Œã€‚å¦‚æœ Java åŸºç¡€éƒ½å­¦ä¸ä¸‹å»ï¼Œé‚£ä½ æœ€åæŠ¥ç­å­¦ä¹ æ•ˆæœä¹Ÿä¸å¥½ã€‚ä½†æ˜¯ä¸è¦ç‰‡é¢çœ‹äº†åŸ¹è®­ç­çš„å¹¿å‘Šï¼Œæˆ–è€…è¢«ä¸€äº›é”€å”®ä»¥æ¯•ä¸šåé«˜è–ªæ´—è„‘åï¼Œå°±ç³Šé‡Œç³Šæ¶‚å°±æŠ¥ç­äº†ã€‚&lt;strong&gt;è‡ªå·±åƒä¸‡è¦è€ƒè™‘å¥½æ²¡ï¼Œå†å»é€‰æ‹©æŠ¥ç­&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç°åœ¨æˆ‘åº”è¯¥å­¦ä¹  Java åå°ï¼Œå®‰å“ï¼ŒPython ï¼Ÿå…¶å®åˆ°åº•è¯¥å­¦ä¹ é‚£ä¸ªçœŸçš„ä¸å¥½ç»™å»ºè®®ã€‚ä½†æ˜¯æˆ‘å¯ä»¥æ•™ä½ ä»¬ä¸€ä¸ªæ–¹æ³•ï¼Œä»äº‹æƒ…çš„ä»·å€¼å‡ºå‘ï¼Œåˆ—ä¸€åˆ†ä¼˜ç¼ºæ¸…å•ã€‚æŠŠå®‰å“,Javaåå°å¼€å‘ï¼ŒPython è¿™å‡ ä¸ªä¼˜ç¼ºç‚¹åˆ—ä¸€ä¸ªè¡¨æ ¼ï¼Œç„¶å -10 åˆ° 10 æ‰“ä¸€ä¸ªåˆ†æ•°ï¼Œæœ€åæŠŠæ¯ä¸€åˆ—ç›¸åŠ ï¼Œå¾—å‡ºä¸€ä¸ªæœ€ç»ˆåˆ†ï¼Œé€‰æ‹©é‚£ä¸ªåˆ†æ•°æœ€é«˜çš„ã€‚&lt;/li&gt;
&lt;li&gt;å­¦å®Œç»“æŸä¹‹åï¼Œæ‰¾å·¥ä½œä¸€å®šè¦å»ä¸€çº¿åŸå¸‚ï¼ŒåŒ—ä¸Šå¹¿æ·±æ­ã€‚ä¸ºä»€ä¹ˆè¿™äº›åŸå¸‚é‚£ï¼Ÿå› ä¸ºè¿™äº›å¤§åŸå¸‚ï¼Œæœºä¼šå¤šï¼Œè–ªèµ„ä¹Ÿè¾ƒé«˜ã€‚è™½ç„¶ç›¸å¯¹è€Œè¨€ï¼Œç”Ÿæ´»å‹åŠ›ä¹Ÿå¤§ä¸€ç‚¹ã€‚ä½†æ˜¯ç›¸ä¿¡æˆ‘ï¼Œåœ¨ä¸€çº¿åŸå¸‚ä½ ç”Ÿæ´»å·¥ä½œå‡ å¹´ï¼Œä½ çš„&lt;strong&gt;è§†é‡æ ¼å±€&lt;/strong&gt;ä¼šæé«˜å¾ˆå¤šã€‚ä½†æ˜¯å¦‚æœä½ å‰å‡ å¤©åœ¨ä¸€äº›äºŒçº¿åŸå¸‚ï¼Œç„¶åç”±äºè–ªèµ„æ°´å¹³ï¼Œå†æƒ³å»ä¸€çº¿åŸå¸‚ï¼Œè¿™æ ·å°±éš¾å¾ˆå¤šã€‚&lt;/li&gt;
&lt;li&gt;å¯¹é‚£äº›è¿˜åœ¨æ ¡æ­£åœ¨è‡ªå­¦åŒå­¦ä»¬è®²è®²ï¼Œä½ ä»¬åœ¨æ ¡å¦‚æœæ—¶é—´å¾ˆå¥½å¤šï¼Œä¸€å®šä¸è¦åªå­¦ Java ç›¸å…³çŸ¥è¯†ï¼Œç®—æ³•æ•°æ®ç»“æ„ç­‰ä¹Ÿä¸èƒ½ä¸¢ï¼Œè¿™ä¸ªçœŸçš„å¾ˆé‡è¦ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä½ ç°åœ¨å·²ç»è‡ªå­¦å¥½ï¼Œæ­£åœ¨è¦æ‰¾å·¥ä½œã€‚&lt;strong&gt;è¯·å……æ»¡ä¿¡å¿ƒï¼Œä¸è¦å¦„è‡ªè²è–„&lt;/strong&gt;ã€‚ä¸€æ¬¡ä¸¤æ¬¡å¤±è´¥å¹¶ä¸ä»£è¡¨ä»€ä¹ˆï¼Œæ€»ç»“å‰å‡ æ¬¡çš„å¤±è´¥ï¼Œè¿™ä¹Ÿèƒ½æ›´å¥½è®¤è¯†è‡ªå·±ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;å¤©ä¸‹æ¯å¤©ç™½åƒçš„åˆé¤ï¼ŒåŒç†ä¹Ÿæ²¡æœ‰é€Ÿæˆçš„å¤§æ³•ã€‚å¸Œæœ›åœ¨å­¦çš„å„ä½åŒå­¦ï¼Œé™ä¸‹å¿ƒæ¥ï¼Œå¥½å¥½ç»ƒä¹ ä»£ç ~&lt;/p&gt;
</description>
<pubDate>Tue, 25 Dec 2018 06:05:00 +0000</pubDate>
<dc:creator>good_andyxu</dc:creator>
<og:description>æœ€è¿‘ç»å¸¸åœ¨çŸ¥ä¹æ”¶åˆ°ç±»ä¼¼ã€æ²¡åŸºç¡€ï¼Œjava å¦‚ä½•è‡ªå­¦ã€ã€ã€æ€ä¹ˆæ‰èƒ½æŒæ¡ç¼–ç¨‹ã€ç­‰ç­‰é—®é¢˜ï¼Œå†åŠ ä¸Šå‘ç°é«˜ä¸­åŒå­¦ä¹Ÿåœ¨è‡ªå­¦ã€‚æœ‰æ„Ÿè€Œå‘ï¼Œè®²è®²æˆ‘çš„è‡ªå­¦ä¹‹è·¯ã€‚ 1.1. å¤§å­¦ é«˜è€ƒæ²¡æ­£å¸¸å‘æŒ¥ï¼Œè€ƒå…¥ä¸€æ‰€äºŒæµçš„å­¦æ ¡ï¼Œå½“æ—¶åˆ†</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/goodAndyxublog/p/10173584.html</dc:identifier>
</item>
<item>
<title>DDD Code First è¿ç§»æ•°æ®å®ç°EF COREçš„è½¯åˆ é™¤ï¼Œå€¼å¯¹è±¡è¿ç§»é…ç½® - å¾€äº‹éšç¬é”‹</title>
<link>http://www.cnblogs.com/lifeng618/p/10172967.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/lifeng618/p/10172967.html</guid>
<description>&lt;p&gt;EntityFramework Core 2.0å…¨å±€è¿‡æ»¤ ï¼ˆHasQueryFilterï¼‰ &lt;a href=&quot;https://www.cnblogs.com/CreateMyself/p/8491058.html&quot; class=&quot;uri&quot;&gt;https://www.cnblogs.com/CreateMyself/p/8491058.html&lt;/a&gt;&lt;br/&gt;&lt;/p&gt;
&lt;h3&gt;ä»€ä¹ˆæ˜¯å€¼å¯¹è±¡&lt;/h3&gt;
&lt;br/&gt;æ²¡æœ‰å”¯ä¸€çš„æ ‡è¯†ï¼Œå›ºå®šä¸å˜çš„ï¼Œè¡¨ç¤ºä¸€ä¸ªå…·ä½“çš„æ¦‚å¿µï¼Œç”¨æ¥æè¿°ä¸€ä¸ªä¸œè¥¿çš„ç‰¹å¾ï¼Œä»£è¡¨æ˜¯ä»€ä¹ˆï¼Œä½¿ç”¨æ—¶ç›´æ¥æ·»åŠ æˆ–æ›¿æ¢ï¼Œå€¼å¯¹è±¡åœ¨è¿ç§»æ—¶ï¼Œä¼šä»¥å­—æ®µçš„å½¢å¼è¿ç§»åˆ°æ•°æ®åº“ä¸­
&lt;h3&gt;è½¯åˆ é™¤&lt;/h3&gt;
&lt;p&gt;å®šä¹‰åˆ é™¤çš„æ¥å£&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
         public interface ISoftDelete
         {
            bool IsDeleted { get; set; }
         }
     
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åˆ›å»ºæ¨¡å‹å®ç°ISoftDeleteæ¥å£&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
       public class UserInfo : IAggregationRoot, ISoftDelete
        {       
          public Guid Id { get; set; }
          public string UserName { get; private set; }
          public string UserPassword { get; private set; }
          public string UserPhone { get; private set; }
          public Address Address { get; private set; }
          public bool IsDeleted { get; set; }
        }
        [Owned]
        public class Address:IValueObject
        { 
          public string Province { get;private set; }
          public string City { get; private set; }
          public string County { get; private set; }
          public string AddressDetails { get; private set; }    
        }
     
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Lamdaçš„æ‰©å±•ä»¥åŠCode First è¿ç§»é…ç½®&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;41&quot;&gt;
&lt;pre&gt;
    protected override void OnModelCreating(ModelBuilder modelBuilder)
        {          
            //è®¾ç½®è½¯åˆ é™¤
            foreach (var entityType in modelBuilder.Model.GetEntityTypes())
            {               
                var parameter = Expression.Parameter(entityType.ClrType);
                //æŸ¥è¯¢ç±»ä¸Šé¢æ˜¯å¦æœ‰Ownedï¼ˆå€¼å¯¹è±¡ï¼‰çš„ç‰¹æ€§
                var ownedModelType = parameter.Type;
                var ownedAttribute = Attribute.GetCustomAttribute(ownedModelType, typeof(OwnedAttribute));
                if (ownedAttribute == null)
                {
                    var propertyMethodInfo = typeof(EF).GetMethod(&quot;Property&quot;).MakeGenericMethod(typeof(bool));
                    var isDeletedProperty =
                        Expression.Call(propertyMethodInfo, parameter, Expression.Constant(&quot;IsDeleted&quot;));
                    BinaryExpression compareExpression = Expression.MakeBinary(ExpressionType.Equal, isDeletedProperty,
                        Expression.Constant(false));
                    var lambda = Expression.Lambda(compareExpression, parameter);
                    modelBuilder.Entity(entityType.ClrType).HasQueryFilter(lambda);
                }      
            }
        }
     
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;åœ¨è¿™é‡Œéœ€è¦è¿‡æ»¤æ‰å€¼å¯¹è±¡çš„ç±»ï¼Œåœ¨å€¼å¯¹è±¡çš„ç±»ä¸Šé¢å£°æ˜ä¸€ä¸ªç‰¹æ€§ï¼Œé€šè¿‡è¯¥ç‰¹æ€§è¿‡æ»¤æ‰è¯¥å€¼å¯¹è±¡ï¼Œ å¦‚æœè¯¥ç±»æ˜¯å€¼å¯¹è±¡å°±ç›´æ¥è·³è¿‡ï¼Œä¸è¿‡æ»¤å€¼å¯¹è±¡EF COREä¼šç»™å€¼å¯¹è±¡é™„åŠ ä¸€ä¸ªIsDeletedçš„å­—æ®µï¼ŒEF COREæ‰§è¡Œä¸­ä¼šæŠ¥é”™ï¼Œæç¤ºæ‰¾ä¸åˆ°è¯¥å­—æ®µ&lt;br/&gt;Ownedæ˜¯EF CORE é…ç½®å€¼å¯¹è±¡çš„ç‰¹æ€§ï¼Œå¯ä»¥å»è‡ªå®šä¹‰ç‰¹æ€§ï¼Œåœ¨æ¯ä¸€ä¸ªå€¼å¯¹è±¡ä¸Šé¢å£°æ˜ï¼Œåœ¨OnModelCreating è¿‡æ»¤æ‰åŒ…å«è¿™ä¸ªç‰¹æ€§çš„ç±»&lt;br/&gt;æœ€ç»ˆå®ç°çš„ä»£ç ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;41&quot;&gt;
&lt;pre&gt;
         public async Task&amp;gt;&amp;gt; GetUserList(SearchUserDto input)
         {
            Expression&amp;gt; where = e =&amp;gt; e.IsDisable == false;
            if (!string.IsNullOrEmpty(input.SearchName))
            {
                where = where.And(e =&amp;gt; e.UserName.Contains(input.SearchName));
            }

            if (!string.IsNullOrEmpty(input.SearchPwd))
            {
                where = where.And(e =&amp;gt; e.UserPhone.Contains(input.SearchPwd));
            }
         
            var userList = await _userRepository.LoadEntityListAsync(where, e =&amp;gt; e.UserName, &quot;asc&quot;, input.PageIndex, input.Pagesize);
            var total = await _userRepository.GetEntitiesCountAsync(where);
            var userDtoList = userList.MapToList();

            HeaderResult&amp;gt; result = new HeaderResult&amp;gt;
            {
                IsSucceed = true,
                Result = userDtoList,
                Total = total
            };
            return result;
        }
     
&lt;/pre&gt;&lt;/div&gt;
</description>
<pubDate>Tue, 25 Dec 2018 06:00:00 +0000</pubDate>
<dc:creator>å¾€äº‹éšç¬é”‹</dc:creator>
<og:description>æ„Ÿè°¢Jeffckyå¤§ä½¬çš„åšå®¢ï¼š EntityFramework Core 2.0å…¨å±€è¿‡æ»¤ ï¼ˆHasQueryFilterï¼‰ https://www.cnblogs.com/CreateMyself/p</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/lifeng618/p/10172967.html</dc:identifier>
</item>
</channel>
</rss>