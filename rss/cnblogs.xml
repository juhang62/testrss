<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>åšå®¢å›­_é¦–é¡µ</title>
<link></link>
<description>ä»£ç æ”¹å˜ä¸–ç•Œ</description>
<item>
<title>è¡Œä¸šåŠ¨æ€ | DataStax 2021å¹´æ–°å¹´é¢„æµ‹ - DataStax</title>
<link>http://www.cnblogs.com/datastax/p/14224699.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/datastax/p/14224699.html</guid>
<description>&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;a0to6-0-0&quot;&gt;
&lt;div class=&quot;public-DraftStyleDefault-block public-DraftStyleDefault-ltr&quot; data-offset-key=&quot;a0to6-0-0&quot;&gt;&lt;em&gt;&lt;em&gt;&lt;span data-offset-key=&quot;4o5hq-0-0&quot;&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2111170/202101/2111170-20210103024511465-713449817.png&quot; alt=&quot;&quot; width=&quot;876&quot; height=&quot;493&quot; loading=&quot;lazy&quot;/&gt;&lt;/span&gt;&lt;/em&gt;&lt;/em&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;4o5hq-0-0&quot;&gt;
&lt;div class=&quot;public-DraftStyleDefault-block public-DraftStyleDefault-ltr&quot; data-offset-key=&quot;4o5hq-0-0&quot;&gt;
&lt;p&gt;&lt;strong&gt;Â &lt;em&gt;Happy New Yearï¼&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;dibc2-0-0&quot; readability=&quot;8&quot;&gt;
&lt;div class=&quot;public-DraftStyleDefault-block public-DraftStyleDefault-ltr&quot; data-offset-key=&quot;dibc2-0-0&quot; readability=&quot;7.5&quot;&gt;

&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;2htj3-0-0&quot; readability=&quot;7&quot;&gt;
&lt;p&gt;&lt;em&gt;ä»Šå¤©æ˜¯å…ƒæ—¦ï¼ŒDataStaxåœ¨æ­¤ç¥å¤§å®¶2021æ–°å¹´å¿«ä¹ o(*â‰§â–½â‰¦)ãƒ&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;4o5hq-0-0&quot; readability=&quot;8&quot;&gt;

&lt;p&gt;&lt;em&gt;æ–°çš„ä¸€å¹´ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå°†ä¸ºå¤§å®¶æä¾›æ›´å¤šæœ‰ç”¨çš„èµ„æºï¼Œå¹¶ç»„ç»‡æ›´å¤šæœ‰æ„ä¹‰çš„æ´»åŠ¨ã€‚&lt;/em&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;em&gt;&lt;span data-offset-key=&quot;dibc2-0-0&quot;&gt;åŒæ—¶æˆ‘ä»¬ä¹Ÿå¸Œæœ›çœ‹åˆ°æ›´å¤šçš„å°ä¼™ä¼´ä»¬åŠ å…¥Cassandraä¸­æ–‡ç¤¾åŒºçš„å»ºè®¾ï¼Œåˆ†äº«ç»éªŒå’Œè§è§£ã€‚&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;fpf9j-0-0&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;&lt;em&gt;&lt;span data-offset-key=&quot;fpf9j-0-0&quot;&gt;éå¸¸æœŸå¾…åœ¨æ–°çš„ä¸€å¹´ä¸­ç»§ç»­å’Œå¤§å®¶æ·±å…¥äº¤æµï¼Œè®©æˆ‘ä»¬å…±åŒè¿›æ­¥ o(ã€ƒâ€™â–½â€™ã€ƒ)o&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;d3g7f-0-0&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;&lt;em&gt;&lt;span data-offset-key=&quot;d3g7f-0-0&quot;&gt;å›é¡¾2020ï¼Œè¿™æ˜¯ä¸å¹³å‡¡çš„ä¸€å¹´ã€‚ä»ä¸­æˆ‘ä»¬è·å¾—äº†å¾ˆå¤šå®è´µçš„ç»éªŒï¼Œè€Œè¿™äº›ç»éªŒåˆ™å°†åœ¨2021å¹´é©±åŠ¨æˆ‘ä»¬å‰è¡Œã€‚&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;afqsq-0-0&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;&lt;em&gt;&lt;span data-offset-key=&quot;afqsq-0-0&quot;&gt;åœ¨2021å¹´ï¼Œæˆ‘ä»¬å°†ä¼šçœ‹åˆ°å“ªäº›æ˜æ˜¾çš„æ”¹å˜å‘¢ï¼ŸDataStaxçš„å¼€å‘è€…å…³ç³»å‰¯æ€»è£å…¼é¦–å¸­å¸ƒé“å¸ˆPatrick McFadinåšå‡ºäº†ä»–å¯¹2021å¹´çš„é¢„æµ‹ï¼Œåœ¨æ­¤ä¸å¤§å®¶åˆ†äº«ã€‚&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;



&lt;div class=&quot;public-DraftStyleDefault-block public-DraftStyleDefault-ltr&quot; data-offset-key=&quot;97ghv-0-0&quot; readability=&quot;8&quot;&gt;Â 
&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;b1hho-0-0&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;&lt;span data-offset-key=&quot;b1hho-0-0&quot;&gt;ç¾å›½æ‘‡æ»šä¹é˜Ÿæ„Ÿæ©è‡³æ­»(Grateful Dead)æœ‰ä¸€å¥åè¨€ï¼šâ€œè¿™æ˜¯ä¸€æ®µå¤šä¹ˆæ¼«é•¿è€Œå¥‡ç‰¹çš„æ—…ç¨‹â€ã€‚è¿™å¥è¯ç›¸å½“å¥½åœ°æè¿°äº†2020è¿™ä¸ªç–«æƒ…ä¹‹å¹´ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;956n4-0-0&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;&lt;span data-offset-key=&quot;956n4-0-0&quot;&gt;è¿™æ˜¯è‰°éš¾çš„ä¸€å¹´ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿä»ä¸­å­¦åˆ°äº†å¾ˆå¤šæ–°çš„äº‹æƒ…ã€‚å¸¦ç€è¿™äº›ç»éªŒè¿›å…¥åˆ°2021å¹´ï¼Œä»¥ä¸‹æ˜¯æˆ‘è®¤ä¸ºåœ¨å³å°†åˆ°æ¥çš„ä¸€å¹´ä¸­æˆ‘ä»¬ä¼šçœ‹åˆ°çš„äº‹æƒ…ã€‚&lt;/span&gt;&lt;/p&gt;


&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span data-offset-key=&quot;97ghv-0-0&quot;&gt;01 &lt;span data-offset-key=&quot;97ghv-0-1&quot;&gt;å®éªŒæ¢ç©¶æ€§è´¨çš„æ•°æ®é¡¹ç›®çš„èµ„é‡‘å°†ä¼šè¢«ç¼©å‡&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;27eu2-0-0&quot; readability=&quot;9&quot;&gt;
&lt;p&gt;&lt;span data-offset-key=&quot;27eu2-0-0&quot;&gt;åœ¨ä¼—å¤šæ•°æ®é¡¹ç›®ä¸­ï¼Œé‚£äº›æ›´è´´è¿‘ç”¨æˆ·ä¸”å›æŠ¥ç‡æ›´å¿«çš„é¡¹ç›®åœ¨2020å¹´è¿™ä¸ªæ–°å† ç–«æƒ…ä¹‹å¹´æ”¶è·é¢‡ä¸°ã€‚é‚£äº›æ‰¾åˆ°é—¨è·¯å¹¶å¾—ä»¥è¿™ç§æ–¹å¼è¿è¥çš„å…¬å¸ï¼Œå°†ä¼šç»§ç»­ä»–ä»¬åˆ›æ–°çš„æ­¥ä¼ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;3eksf-0-0&quot; readability=&quot;9&quot;&gt;
&lt;p&gt;&lt;span data-offset-key=&quot;3eksf-0-0&quot;&gt;é¢„æœŸç”¨æ•°æœˆç”šè‡³ä¸€å¹´å·¦å³æ‰èƒ½è·å¾—å›æŠ¥çš„å¤§å‹é¡¹ç›®å°†ä¼šè¢«æš‚åœç”šè‡³å®Œå…¨åœæ­¢ã€‚å› ä¸º2021å¹´å°†ä¸ä¼šæ˜¯ä¸€ä¸ªèƒ½å¤Ÿè¯•éªŒé•¿è¿œè®¡åˆ’çš„å¹´ä»½â€”â€”2021è¦æ±‚æˆ‘ä»¬è¡ŒåŠ¨å¿«é€Ÿä¸”å›åº”å®¢æˆ·éœ€æ±‚ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;77kki-0-0&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;&lt;span data-offset-key=&quot;77kki-0-0&quot;&gt;é‚£äº›å£°ç§°â€œæˆ‘ä»¬å°†ä¼šèŠ±è´¹ä¸‰å¹´æ—¶é—´å»ºæˆä¸€ä¸ªå¹³å°â€çš„é¡¹ç›®å°†ä¼šé­å—ç°å®çš„é‡å‡»ã€‚ç›¸åçš„æ˜¯ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°åˆ©ç”¨ç°æˆçš„äº§å“æ¥æ¨åŠ¨ç°çŠ¶çš„å‘å±•ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;&lt;span data-offset-key=&quot;3tk0q-0-0&quot;&gt;02 &lt;span data-offset-key=&quot;3tk0q-0-1&quot;&gt;ä¿¡æ¯åŒ–è½ä¼è€…çš„å¤§æ·˜æ±°&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;4aaov-0-0&quot; readability=&quot;7&quot;&gt;
&lt;p&gt;&lt;span data-offset-key=&quot;4aaov-0-0&quot;&gt;2020å¹´ä¸­ï¼Œæˆ‘å¾ˆå¤šæ¬¡å› ä¼ä¸šé€‚åº”éš”ç¦»å°åŸå’Œæ–°æ¨¡å¼çš„é€Ÿåº¦è€Œæ„Ÿåˆ°éœ‡æƒŠã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;c6btp-0-0&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;&lt;span data-offset-key=&quot;c6btp-0-0&quot;&gt;æˆ‘çš„å­©å­ä»¬å–œæ¬¢çš„åˆ¨å†°æ‘Šè´©ç°åœ¨æœ‰äº†ä¸€ä¸ªèƒ½å¤Ÿåˆ°åº—è‡ªå–åˆ¨å†°çš„Appã€‚è¿™æ˜¯çœŸçš„å—ï¼Ÿï¼&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;4rig3-0-0&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;&lt;span data-offset-key=&quot;4rig3-0-0&quot;&gt;ç”šè‡³è¿å°å•†å®¶ä»¬éƒ½å·²ç»è®¤è¯†åˆ°äº†åˆ›æ–°å’Œä¿¡æ¯åŒ–è½¬å‹å¯¹äºä¼ä¸šç”Ÿå­˜çš„å¿…è¦æ€§ï¼Œæˆ‘æåˆ°çš„åˆ¨å†°åº—å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;2nmig-0-0&quot; readability=&quot;9&quot;&gt;
&lt;p&gt;&lt;span data-offset-key=&quot;2nmig-0-0&quot;&gt;2021å¹´ï¼Œæˆ‘ä»¬å¯èƒ½é‡è·è‡ªç”±ï¼Œä¸å†éœ€è¦éš”ç¦»å°åŸã€‚ä½†æ˜¯æˆ‘ä¸è®¤ä¸º2020å¹´å¸¦ç»™æˆ‘ä»¬çš„å¥½çš„æ”¹å˜ä¼šå› æ­¤è€Œé€†è½¬ã€‚é¡¾å®¢ä»¬åˆšåˆšç»å†äº†åœ¨å•†å“å’ŒæœåŠ¡çš„äº¤äº’æ–¹å¼ä¸Šçš„å·¨å¤§è½¬å˜ï¼Œè¿™ä¸ä¼šå†æ¢å¤åŸçŠ¶ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;32rnr-0-0&quot; readability=&quot;9&quot;&gt;
&lt;p&gt;&lt;span data-offset-key=&quot;32rnr-0-0&quot;&gt;è¿™æ„å‘³ç€é‚£äº›å…‰æƒ³ç€ç­‰ç–«æƒ…è¿‡å»è€Œæ²¡æœ‰åšå‡ºä»»ä½•æ”¹å˜çš„ä¼ä¸šç°åœ¨å·²ç»è½åäº†ã€‚ä»–ä»¬ä¼šåœ¨2021å¹´è‰°éš¾æ±‚ç”Ÿï¼Œä½†æ‰€æœ‰çš„ä¸€åˆ‡ä¼šä»¥æ›´å¿«çš„é€Ÿåº¦å‘ä¸€ä¸ªæ— å¯é€†è½¬çš„ç»“å±€å‘å±•ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;&lt;span data-offset-key=&quot;f8aiq-0-0&quot;&gt;03 &lt;span data-offset-key=&quot;f8aiq-0-1&quot;&gt;ä¼šæœ‰äººåœ¨æœªæ¥å°†2020å¹´ç§°ä¸ºâ€œSREä¹‹å¹´â€&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;bptoo-0-0&quot; readability=&quot;7&quot;&gt;
&lt;p&gt;&lt;span data-offset-key=&quot;bptoo-0-0&quot;&gt;åªæœ‰æˆ‘è¿™ä¹ˆè®¤ä¸ºå—ï¼Ÿ&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;68aag-0-0&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;&lt;span data-offset-key=&quot;68aag-0-0&quot;&gt;ç½‘ç«™å¯é æ€§å·¥ç¨‹å¸ˆ(SRE)æ‰€åšçš„å¯ä¸åªæ˜¯ä¿è¯å¤‡ä»½åŠŸèƒ½è‰¯å¥½è¿è¡Œã€‚åœ¨å¦‚ä»Šçš„å¿«èŠ‚å¥å¼€å‘è¿›ç¨‹ä¸­ï¼Œä»–ä»¬å¾—ä¿è¯äº§å“çš„éƒ¨ç½²åˆå¿«åˆå¥½ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;28gf9-0-0&quot; readability=&quot;9&quot;&gt;
&lt;p&gt;&lt;span data-offset-key=&quot;28gf9-0-0&quot;&gt;éšç€è¶Šæ¥è¶Šå¤šçš„äº‘åŸç”Ÿæ–¹æ³•å’Œäº§å“é‡‡å–â€œæŒ‰éœ€æ”¶è´¹(pay-as-you-need)â€çš„æ–¹å¼ï¼ŒSREå¯¹ä¼ä¸šçš„æœ€ç»ˆè´¢åŠ¡è¡¨ç°æœ‰ç€è‡³å…³é‡è¦çš„å½±å“ã€‚é«˜æ•ˆçš„éƒ¨ç½²åŒ…æ‹¬äº†æ§åˆ¶äº‘ç¯å¢ƒçš„æ”¯å‡ºâ€”â€”æˆ‘ä»¬å¿…é¡»å¾—è¯´ï¼Œä¼ä¸šé€šå¸¸åœ¨è¿™ç‚¹ä¸Šåšå¾—å¹¶ä¸å¥½ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;d5ivm-0-0&quot; readability=&quot;9&quot;&gt;
&lt;p&gt;&lt;span data-offset-key=&quot;d5ivm-0-0&quot;&gt;æˆ‘ä»¬é€šå¸¸å°†SREå·¥ç¨‹å¸ˆä»¬çœ‹åšä¼ä¸šä¸­éå¸¸é‡è¦çš„ä¸€éƒ¨åˆ†ï¼Œä½†æ˜¯ä¸æ­¢äºæ­¤ï¼Œæˆ‘ä»¬å°†è®¤è¯†åˆ°SREä¼šä¸ºä¼ä¸šçš„è´¢åŠ¡å¥åº·ä½œå‡ºæ–°çš„è´¡çŒ®ã€‚æˆ‘ä»¬ç”šè‡³å¯èƒ½çœ‹åˆ°ä¸€äº›CFOå‡ºäºèµèµï¼Œä¼šå°†2020å¹´ç§°ä¸ºâ€œSREä¹‹å¹´â€ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;


&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span data-offset-key=&quot;6r7fd-0-0&quot;&gt;04 &lt;span data-offset-key=&quot;6r7fd-0-1&quot;&gt;å¤§å‹çš„çº¿ä¸‹ç”¨æˆ·å¤§ä¼šå°†ä¸ä¼šå†åº¦å½’æ¥&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;fklv6-0-0&quot; readability=&quot;7&quot;&gt;
&lt;p&gt;&lt;span data-offset-key=&quot;fklv6-0-0&quot;&gt;æœªæ¥çš„æŸå¤©ï¼Œå½“æˆ‘ä»¬å›æœ›æ—¶ä¼šå‘ç°2019æ˜¯çº¿ä¸‹ç”¨æˆ·å¤§ä¼šæµè¡Œçš„æœ€åä¸€å¹´ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;aqjlh-0-0&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;&lt;span data-offset-key=&quot;aqjlh-0-0&quot;&gt;æ¯ä¸ªç§‘æŠ€å…¬å¸æˆåŠŸçš„ç§˜è¯€ä¸­éƒ½åŒ…å«äº†ä¸¾åŠå¤§å‹ä¼šè®®ï¼Œå› ä¸ºå…¶ä»–äººéƒ½æ˜¯è¿™ä¹ˆå¹²çš„ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;29ve8-0-0&quot; readability=&quot;9&quot;&gt;
&lt;p&gt;&lt;span data-offset-key=&quot;29ve8-0-0&quot;&gt;ä½†æ˜¯åœ¨2020å¹´ï¼Œç”¨æˆ·ä»¬æ—¥å¸¸æŠ€æœ¯æ ˆä¸­ä½¿ç”¨çš„æŠ€æœ¯éƒ½ä¼šæœ‰ç›¸å…³çš„çº¿ä¸Šç”¨æˆ·å¤§ä¼šã€‚è¿™äº›å‡ ä¹æ¯å‘¨éƒ½å‘ç”Ÿçš„çº¿ä¸Šä¼šè®®å¤šåˆ°ç»å¸¸ä¼šåœ¨æ—¶é—´ä¸Šå½¼æ­¤å†²çªï¼Œä»¥è‡³äºå¤§å®¶éš¾ä»¥ä»ä¸­é€‰æ‹©ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;ab9hi-0-0&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;&lt;span data-offset-key=&quot;ab9hi-0-0&quot;&gt;æˆ‘ä»¬åœ¨è¿‡å»çš„ä¸€å¹´ä¸­å·²ç»è¿›æ­¥å‡çº§äº†â€”â€”æˆ‘ä»¬å­¦ä¼šäº†å¦‚ä½•åœ¨ä¸ç™»ä¸Šé£æœºçš„æƒ…å†µä¸‹ä¸äººäº¤æµã€‚ç™»ä¸Šé£æœºå¹¶å›åˆ°ç‡¥çƒ­çš„ä¼šè®®å…ï¼Œè¿™å¬èµ·æ¥å¾ˆæ²¡å¸å¼•åŠ›ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;c4km5-0-0&quot; readability=&quot;10&quot;&gt;
&lt;p&gt;&lt;span data-offset-key=&quot;c4km5-0-0&quot;&gt;æˆ‘ä»¬ä¾ç„¶ä¼šæƒ³è¦åœ¨æˆ‘ä»¬çš„ç¤¾åŒºä¸­ä¸å¤§å®¶é¢å¯¹é¢äº¤æµï¼Œä½†æ˜¯ä¸ºäº†è¯´æœæŸäº›äººè¸ä¸Šæ—…ç¨‹ï¼Œå„ä¸ªå…¬å¸å°†éœ€è¦è€ƒè™‘çº¿ä¸Šçº¿ä¸‹ç›¸ç»“åˆï¼Œæˆ–è€…å…¶ä»–æ›´æœ‰å¸å¼•åŠ›çš„æ–¹å¼ã€‚æ¯•ç«Ÿå…¬å¸éš¾é“çœŸçš„æœ‰æ—¶é—´å°†ä¸€é˜Ÿå¼€å‘äººå‘˜é€å»ä¸€ä¸ªå¤§å‹ä¼šè®®ï¼Œç„¶åæ‹–æ…¢ä¸€å‘¨çš„å·¥ä½œè¿›åº¦ï¼Ÿ&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;b6gq1-0-0&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;&lt;span data-offset-key=&quot;b6gq1-0-0&quot;&gt;2021å¹´æˆ‘ä»¬å°†çœ‹åˆ°æ›´å¤šçš„çº¿ä¸Šäº’åŠ¨ï¼Œå®ƒä»¬å°†æ‹¥æœ‰é«˜è´¨é‡ï¼Œå¹¶æä¾›æ›´å¤šç”¨æˆ·æ‰€éœ€è¦çš„ä¸œè¥¿ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;


&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span data-offset-key=&quot;es2l0-0-0&quot;&gt;05 &lt;span data-offset-key=&quot;es2l0-0-1&quot;&gt;2021å°†ä¼šæ˜¯Apache Cassandraæ–°ç‰¹æ€§çš„å¤è‹ä¹‹å¹´&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;7m5dj-0-0&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;&lt;span data-offset-key=&quot;7m5dj-0-0&quot;&gt;è¿™æ˜¯æˆ‘èƒ½æœ€å®¹æ˜“åšå‡ºçš„å‡†ç¡®é¢„æµ‹ã€‚è¿‡å»çš„å‡ å¹´ä¸­ï¼ŒApache Cassandraçš„å‘å±•ä¸»è¦é›†ä¸­äºæå‡æ•°æ®åº“çš„è¿ç»´ã€ç¨³å®šæ€§å’Œæ•´ä½“çš„æ­£ç¡®æ€§ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;4bup1-0-0&quot; readability=&quot;9&quot;&gt;
&lt;p&gt;&lt;span data-offset-key=&quot;4bup1-0-0&quot;&gt;ä¸ºäº†é›†ä¸­ç²¾åŠ›äºå³å°†æ¨å‡ºçš„4.0ç‰ˆæœ¬ï¼ŒApache Cassandraæ°å½“åœ°åœæ­¢äº†å¯¹äºæ–°ç‰¹æ€§çš„æ¨è¿›ã€‚è¿™ä½¿å¾—æˆ‘ä»¬ç§¯å‹äº†ä¸€äº›èƒ½å¤Ÿæå‡è¿™ä¸ªé¡¹ç›®çš„å†…æ ¸çš„å‰æ²¿ç‰¹æ€§ï¼Œæ¯”å¦‚åƒæ˜¯ç´¢å¼•æ¨¡å¼(indexing scheme)ã€å­˜å‚¨å¼•æ“çš„é€‰æ‹©ã€æŸ¥è¯¢å’Œé€šä¿¡åè®®çš„æ”¹å˜ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;491m6-0-0&quot;&gt;
&lt;div class=&quot;public-DraftStyleDefault-block public-DraftStyleDefault-ltr&quot; data-offset-key=&quot;491m6-0-0&quot;&gt;&lt;span data-offset-key=&quot;491m6-0-0&quot;&gt;ä¸ä¹…ä¹‹å4.0ç‰ˆæœ¬å°±ä¼šå‘å¸ƒï¼Œè¿™ä¹‹åæ ¹æ®æ–°ç‰¹æ€§çš„æ”¹åŠ¨å¹…åº¦ï¼Œä½ å°†ä¼šçœ‹åˆ°ä¸€è¿ä¸²çš„ä¸4.xå’Œ5.0ç‰ˆæœ¬ç‰¹æ€§ç›¸å…³çš„Gitåˆ†æ”¯(branch)ã€‚æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½çœ‹åˆ°ä»–ä»¬åœ¨Cassandraæ”¹è¿›æ–¹æ¡ˆ(&lt;a class=&quot;Link ztext-link&quot; href=&quot;https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=95652201&quot; target=&quot;_blank&quot; data-offset-key=&quot;491m6-1-0&quot; data-editable=&quot;true&quot;&gt;&lt;span data-offset-key=&quot;491m6-1-0&quot;&gt;&lt;span data-text=&quot;true&quot;&gt;Cassandra Enhancement Process&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;span data-offset-key=&quot;491m6-2-0&quot;&gt;, aka, CEP)ä¸­æ’é˜Ÿå‡ºç°äº†ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;agagm-0-0&quot; readability=&quot;7&quot;&gt;
&lt;p&gt;&lt;span data-offset-key=&quot;agagm-0-0&quot;&gt;æŠ¤å¥½ä½ çš„å¸½å­ï¼Œè¿™äº›é£é©°çš„è¿›å±•å°†å¸¦ç»™ä½ ä¸€ä¸ªå¾ˆæ£’çš„æ—…ç¨‹ï¼&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;8m5c7-0-0&quot;&gt;

&lt;p&gt;&lt;strong&gt;&lt;span data-offset-key=&quot;8m5c7-0-0&quot;&gt;ä½œè€…ä»‹ç»&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;Editable-unstyled&quot; data-block=&quot;true&quot; data-editor=&quot;4h53v&quot; data-offset-key=&quot;3534t-0-0&quot; readability=&quot;9&quot;&gt;

&lt;p&gt;&lt;span data-offset-key=&quot;3534t-0-0&quot;&gt;Patrick McFadin&lt;span data-offset-key=&quot;3534t-0-1&quot;&gt;æ˜¯DataStaxå¼€å‘è€…å…³ç³»å‰¯æ€»è£ï¼Œä»–å¸¦é¢†å›¢é˜Ÿè‡´åŠ›äºå¸®åŠ©Apache Cassandraä½¿ç”¨è€…ä»¬è·å¾—æˆåŠŸã€‚ä¸æ­¤åŒæ—¶ï¼ŒPatrick McFadinè¿˜æ˜¯Apache Cassandraçš„é¦–å¸­å¸ƒé“å¸ˆä»¥åŠDataStaxçš„å’¨è¯¢å¸ˆï¼Œä»–ä¸ºä¸€äº›è¶…å¤§å‹ä¸”ä»¤äººå…´å¥‹çš„ç”Ÿäº§éƒ¨ç½²æä¾›äº†å¸®åŠ©ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;div class=&quot;public-DraftStyleDefault-block public-DraftStyleDefault-ltr&quot; data-offset-key=&quot;3534t-0-0&quot;&gt;&lt;img src=&quot;https://pic2.zhimg.com/80/v2-7d8d5b7dc4c9f285e5a6da3b0ec5da32_720w.jpeg&quot; class=&quot;Image FocusPlugin--unfocused Image--isBlock&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;220&quot; data-rawheight=&quot;274&quot; data-watermark=&quot;original&quot; data-original-src=&quot;https://pic2.zhimg.com/v2-7d8d5b7dc4c9f285e5a6da3b0ec5da32.jpeg&quot; data-watermark-src=&quot;https://pic4.zhimg.com/v2-b559b5293cfeeccb011673f5d86c6c95.jpeg&quot;/&gt;&lt;/div&gt;
&lt;p&gt;Patrick McFadin&lt;/p&gt;
&lt;/div&gt;

</description>
<pubDate>Sat, 02 Jan 2021 18:49:00 +0000</pubDate>
<dc:creator>DataStax</dc:creator>
<og:description>Happy New Yearï¼ ä»Šå¤©æ˜¯å…ƒæ—¦ï¼ŒDataStaxåœ¨æ­¤ç¥å¤§å®¶2021æ–°å¹´å¿«ä¹ o(*â‰§â–½â‰¦)ãƒ æ–°çš„ä¸€å¹´ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå°†ä¸ºå¤§å®¶æä¾›æ›´å¤šæœ‰ç”¨çš„èµ„æºï¼Œå¹¶ç»„ç»‡æ›´å¤šæœ‰æ„ä¹‰çš„æ´»åŠ¨ã€‚ åŒæ—¶æˆ‘ä»¬ä¹Ÿå¸Œæœ›çœ‹åˆ°æ›´å¤š</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/datastax/p/14224699.html</dc:identifier>
</item>
<item>
<title>å…ƒæ—¦åœ¨å®¶æ’¸äº†ä¸¤å¤©Seataæºç ï¼Œä½ ä»¬æ˜¯å’‹åº¦è¿‡çš„å‘¢ï¼Ÿ - å†°æ²³å›¢é˜Ÿ</title>
<link>http://www.cnblogs.com/binghe001/p/14224562.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/binghe001/p/14224562.html</guid>
<description>&lt;h2 id=&quot;æ’¸seataæºç &quot;&gt;æ’¸Seataæºç &lt;/h2&gt;
&lt;p&gt;2020å¹´12æœˆ31æ—¥æ™š23ç‚¹30åˆ†ï¼Œæˆ‘å‘äº†2020å¹´çš„æœ€åä¸€ä¸ªæœ‹å‹åœˆï¼šå‡æœŸåƒé€Seataæºç ï¼Œæœ‰ç»„é˜Ÿçš„å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20210102235403697.jpg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¸å°‘å°ä¼™ä¼´éƒ½æ¥ç‚¹èµäº†ï¼Œ &lt;strong&gt;å…¶ä¸­ä¹ŸåŒ…æ‹¬Seataé¡¹ç›®çš„å‘èµ·äººâ€”â€”å­£æ•å¤§ä½¬å“¦ï¼&lt;/strong&gt; ç‚¹èµéƒ¨åˆ†æˆªå›¾å¦‚ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20210102235417170.jpg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ—¢ç„¶è¯´äº†ï¼Œå°±è¦è¡ŒåŠ¨ï¼Œè¿™ä¸å…ƒæ—¦å‡æœŸæˆ‘å°±åœ¨å®¶æ­»ç£•äº†ä¸¤å¤©Seataæºç ã€‚ä»ä¸»ä½“è„‰ç»œä¸Šç†æ¸…äº†Seataæºç çš„ç»“æ„å’Œä¸»è¦çš„æ¡†æ¶ä»£ç ã€‚ä¸ªäººæ„Ÿè§‰è¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°å’Œæ˜“æ‡‚çš„ã€‚åç»­å†å‘æ–‡ä¸ºå°ä¼™ä¼´ä»¬è¯¦ç»†ä»‹ç»å§ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20210103000125726.jpg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;èŠ‚åï¼Œæˆ‘ä¹Ÿè¦å’ŒçŒ«å¤§äººä¸€èµ·å‘åŠ›åˆè‘—ä¹¦ç±äº†ï¼Œå¸Œæœ›å°½å¿«å‡ºç‰ˆï¼Œè¿™æœ¬ä¹¦çš„å†…å®¹æ˜¯ç›¸å½“ç¡¬æ ¸çš„ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæ™’ä¸€æ™’æˆ‘ä¹‹å‰å‡ºç‰ˆçš„ä¸¤æœ¬ä¹¦å§ï¼Œåˆšåˆšæ‹çš„ï¼Œæˆ‘ä¹Ÿä¸å’‹ä¼šæ‹ç…§ï¼Œå¤§å®¶å‡‘åˆçœ‹å§ã€‚è¿™ä¸¤æœ¬ä¹¦ä¹Ÿæ˜¯ç›¸å½“ç¡¬æ ¸çš„ã€‚&lt;/p&gt;
&lt;p&gt;ã€Šæµ·é‡æ•°æ®å¤„ç†ä¸å¤§æ•°æ®æŠ€æœ¯å®æˆ˜ã€‹è¯¦ç»†æ€»ç»“äº†å†°æ²³åœ¨äº¿çº§æµé‡ã€é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå¦‚ä½•æ„å»ºæµ·é‡æ•°æ®ç¦»çº¿æ‰¹å¤„ç†è®¡ç®—å¹³å°ä¸åœ¨çº¿å®æ—¶è®¡ç®—å¹³å°çš„ç»éªŒï¼Œä¹¦ä¸­å¾ˆå¤šåœºæ™¯å’Œæ¡ˆä¾‹æ¥æºäºå†°æ²³å®é™…å·¥ä½œä¸­ï¼Œå¯¹å•†å“å®æ—¶ç²¾å‡†æ¨èå¹³å°çš„æ¶æ„è®¾è®¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20210102235547381.jpg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€ŠMySQLæŠ€æœ¯å¤§å…¨ï¼šå¼€å‘ã€ä¼˜åŒ–ä¸è¿ç»´å®æˆ˜ã€‹å…¨ä¹¦åŸºäºMySQL8.xç¼–å†™ï¼Œå…¼å®¹MySQL5.xç‰ˆæœ¬ï¼Œæ¶µç›–MySQLåŸºç¡€ã€å¼€å‘ã€ä¼˜åŒ–ã€è¿ç»´å’Œæ¶æ„çš„æ–¹æ–¹é¢é¢çŸ¥è¯†ï¼Œä¹¦ç±ä¸­å¤§é‡çš„åœºæ™¯å’Œæ¡ˆä¾‹å‡æ¥æºäºå†°æ²³å®é™…çš„å·¥ä½œåœºæ™¯ï¼Œæœ‰ä¸å°‘æ¡ˆä¾‹çš„è§£å†³æ–¹æ¡ˆå¯ç›´æ¥åº”ç”¨äºé«˜å¹¶å‘ã€å¤§æµé‡çš„ç”Ÿäº§ç¯å¢ƒã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20210102235559311.jpg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¥½äº†ï¼Œä»Šå¤©å°±åˆ°è¿™å„¿å§ï¼Œæˆ‘æ˜¯å†°æ²³ï¼Œå°ä¼™ä¼´ä»¬ï¼Œå¤§å®¶å…ƒæ—¦éƒ½æ˜¯æ€ä¹ˆè¿‡çš„å‘€ï¼Ÿæ¬¢è¿åœ¨ä¸‹æ–¹ç•™è¨€å‘€ï¼å¯ä»¥åŠ æˆ‘å¾®ä¿¡ï¼Œæˆ‘ä»¬ä¸€èµ·äº¤æµæŠ€æœ¯ï¼Œä¸€èµ·è¿›é˜¶ï¼Œä¸€èµ·ç‰›é€¼~~&lt;/strong&gt;&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20210102235308513.jpg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;å†°æ²³åŸåˆ›pdf&quot;&gt;å†°æ²³åŸåˆ›PDF&lt;/h2&gt;
&lt;p&gt;å…³æ³¨ &lt;strong&gt;å†°æ²³æŠ€æœ¯&lt;/strong&gt; å¾®ä¿¡å…¬ä¼—å·ï¼š&lt;/p&gt;
&lt;p&gt;å›å¤ â€œ&lt;strong&gt;å¹¶å‘ç¼–ç¨‹&lt;/strong&gt;â€ é¢†å–ã€Šæ·±å…¥ç†è§£é«˜å¹¶å‘ç¼–ç¨‹ï¼ˆç¬¬1ç‰ˆï¼‰ã€‹PDFæ–‡æ¡£ã€‚&lt;/p&gt;
&lt;p&gt;å›å¤ â€œ&lt;strong&gt;å¹¶å‘æºç &lt;/strong&gt;â€ é¢†å–ã€Šå¹¶å‘ç¼–ç¨‹æ ¸å¿ƒçŸ¥è¯†ï¼ˆæºç åˆ†æç¯‡ ç¬¬1ç‰ˆï¼‰ã€‹PDFæ–‡æ¡£ã€‚&lt;/p&gt;
&lt;p&gt;å›å¤ â€&lt;strong&gt;é™æµ&lt;/strong&gt;â€œ é¢†å–ã€Šäº¿çº§æµé‡ä¸‹çš„åˆ†å¸ƒå¼è§£å†³æ–¹æ¡ˆã€‹PDFæ–‡æ¡£ã€‚&lt;/p&gt;
&lt;p&gt;å›å¤ â€œ&lt;strong&gt;è®¾è®¡æ¨¡å¼&lt;/strong&gt;â€ é¢†å–ã€Šæ·±å…¥æµ…å‡ºJava23ç§è®¾è®¡æ¨¡å¼ã€‹PDFæ–‡æ¡£ã€‚&lt;/p&gt;
&lt;p&gt;å›å¤ â€œ&lt;strong&gt;Java8æ–°ç‰¹æ€§&lt;/strong&gt;â€ é¢†å– ã€ŠJava8æ–°ç‰¹æ€§æ•™ç¨‹ã€‹PDFæ–‡æ¡£ã€‚&lt;/p&gt;
&lt;p&gt;å›å¤ â€œ&lt;strong&gt;åˆ†å¸ƒå¼å­˜å‚¨&lt;/strong&gt;â€ é¢†å–ã€Šè·Ÿå†°æ²³å­¦ä¹ åˆ†å¸ƒå¼å­˜å‚¨æŠ€æœ¯ã€‹ PDFæ–‡æ¡£ã€‚&lt;/p&gt;
&lt;p&gt;å›å¤ â€œ&lt;strong&gt;Nginx&lt;/strong&gt;â€ é¢†å–ã€Šè·Ÿå†°æ²³å­¦ä¹ NginxæŠ€æœ¯ã€‹PDFæ–‡æ¡£ã€‚&lt;/p&gt;
&lt;p&gt;å›å¤ â€œ&lt;strong&gt;äº’è”ç½‘å·¥ç¨‹&lt;/strong&gt;â€ é¢†å–ã€Šè·Ÿå†°æ²³å­¦ä¹ äº’è”ç½‘å·¥ç¨‹æŠ€æœ¯ã€‹PDFæ–‡æ¡£ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å†™åœ¨æœ€å&quot;&gt;å†™åœ¨æœ€å&lt;/h2&gt;
&lt;p&gt;å¾®ä¿¡æœä¸€æœã€å†°æ²³æŠ€æœ¯ã€‘å¾®ä¿¡å…¬ä¼—å·ï¼Œå…³æ³¨è¿™ä¸ªæœ‰æ·±åº¦çš„ç¨‹åºå‘˜ï¼Œæ¯å¤©é˜…è¯»è¶…ç¡¬æ ¸æŠ€æœ¯å¹²è´§ï¼Œå…¬ä¼—å·å†…å›å¤ã€PDFã€‘æœ‰æˆ‘å‡†å¤‡çš„ä¸€çº¿å¤§å‚é¢è¯•èµ„æ–™å’Œæˆ‘åŸåˆ›çš„è¶…ç¡¬æ ¸PDFæŠ€æœ¯æ–‡æ¡£ï¼Œä»¥åŠæˆ‘ä¸ºå¤§å®¶ç²¾å¿ƒå‡†å¤‡çš„å¤šå¥—ç®€å†æ¨¡æ¿ï¼ˆä¸æ–­æ›´æ–°ä¸­ï¼‰ï¼Œå¸Œæœ›å¤§å®¶éƒ½èƒ½æ‰¾åˆ°å¿ƒä»ªçš„å·¥ä½œï¼Œå­¦ä¹ æ˜¯ä¸€æ¡æ—¶è€Œéƒéƒå¯¡æ¬¢ï¼Œæ—¶è€Œå¼€æ€€å¤§ç¬‘çš„è·¯ï¼ŒåŠ æ²¹ã€‚å¦‚æœä½ é€šè¿‡åŠªåŠ›æˆåŠŸè¿›å…¥åˆ°äº†å¿ƒä»ªçš„å…¬å¸ï¼Œä¸€å®šä¸è¦æ‡ˆæ€ æ”¾æ¾ï¼ŒèŒåœºæˆé•¿å’Œæ–°æŠ€æœ¯å­¦ä¹ ä¸€æ ·ï¼Œä¸è¿›åˆ™é€€ã€‚å¦‚æœæœ‰å¹¸æˆ‘ä»¬æ±Ÿæ¹–å†è§ï¼&lt;/p&gt;
&lt;p&gt;å¦å¤–ï¼Œæˆ‘å¼€æºçš„å„ä¸ªPDFï¼Œåç»­æˆ‘éƒ½ä¼šæŒç»­æ›´æ–°å’Œç»´æŠ¤ï¼Œæ„Ÿè°¢å¤§å®¶é•¿æœŸä»¥æ¥å¯¹å†°æ²³çš„æ”¯æŒï¼ï¼&lt;/p&gt;
</description>
<pubDate>Sat, 02 Jan 2021 16:21:00 +0000</pubDate>
<dc:creator>å†°æ²³å›¢é˜Ÿ</dc:creator>
<og:description>æ’¸Seataæºç  2020å¹´12æœˆ31æ—¥æ™š23ç‚¹30åˆ†ï¼Œæˆ‘å‘äº†2020å¹´çš„æœ€åä¸€ä¸ªæœ‹å‹åœˆï¼šå‡æœŸåƒé€Seataæºç ï¼Œæœ‰ç»„é˜Ÿçš„å—ï¼Ÿ ä¸å°‘å°ä¼™ä¼´éƒ½æ¥ç‚¹èµäº†ï¼Œ å…¶ä¸­ä¹ŸåŒ…æ‹¬Seataé¡¹ç›®çš„å‘èµ·äººâ€”â€”å­£æ•å¤§ä½¬å“¦ï¼</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/binghe001/p/14224562.html</dc:identifier>
</item>
<item>
<title>äºŒæœ¬éç§‘ç­ï¼Œç§‹æ‹›ï¼Œå®ä¹ ï¼Œé¢è¯•ï¼Œofferä¹‹è·¯ - KANLON</title>
<link>http://www.cnblogs.com/kanlon2015/p/14224512.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/kanlon2015/p/14224512.html</guid>
<description>&lt;p&gt;æœ€è¿‘ä¸æ˜¯åˆšåˆšè¿‡äº†åœ£è¯èŠ‚å—ï¼Ÿç„¶ååˆå‡†å¤‡åˆ°å…ƒæ—¦äº†ï¼Œè¿æ¥2021å¹´ï¼åœ¨å¾®ä¿¡å…¬ä¼—å·ä¸Šçœ‹åˆ°å°éƒ¨åˆ†å…¬ä¼—å·åœ¨æ€»ç»“2020å¹´äº†ã€‚æ‰€ä»¥å°±å‹¾èµ·è‡ªå·±ä»æ¯•ä¸šåˆ°ç°åœ¨çš„å›å¿†ï¼Œé¡ºä¾¿æ€»ç»“ä¸€ä¸‹ï¼Œè‡ªå·±å¦‚ä½•ä»å‡†å¤‡ç§‹æ‹›åˆ°æ‹¿åˆ°offerçš„ï¼Œç®—ä½œè®°å½•ä¸€ä¸‹è‡ªå·±çš„å¦ä¸€ä¸ªé˜¶æ®µã€‚&lt;/p&gt;&lt;div id=&quot;cnblogs_post_body&quot; readability=&quot;157.26636207203&quot;&gt;
&lt;p&gt;ä¸çŸ¥ä¸è§‰å·²ç»å·¥ä½œä¸€å¹´å¤šçš„ï¼Œæˆ‘æ˜¯2019å¹´7æœˆæ¯•ä¸šçš„ï¼Œä½†æ˜¯å¦‚æœç®—ä¸Šå®ä¹ å°±å·¥ä½œå·®ä¸å¤šä¸¤å¹´äº†çš„å§ã€‚&lt;/p&gt;
&lt;p&gt;æœ€è¿‘ä¸æ˜¯åˆšåˆšè¿‡äº†åœ£è¯èŠ‚å—ï¼Ÿç„¶ååˆå‡†å¤‡åˆ°å…ƒæ—¦äº†ï¼Œè¿æ¥2021å¹´ï¼åœ¨å¾®ä¿¡å…¬ä¼—å·ä¸Šçœ‹åˆ°å°éƒ¨åˆ†å…¬ä¼—å·åœ¨æ€»ç»“2020å¹´äº†ã€‚æ‰€ä»¥å°±å‹¾èµ·è‡ªå·±ä»æ¯•ä¸šåˆ°ç°åœ¨çš„å›å¿†ï¼Œé¡ºä¾¿æ€»ç»“ä¸€ä¸‹ï¼Œè‡ªå·±å¦‚ä½•ä»å‡†å¤‡ç§‹æ‹›åˆ°æ‹¿åˆ°offerçš„ï¼Œç®—ä½œè®°å½•ä¸€ä¸‹è‡ªå·±çš„å¦ä¸€ä¸ªé˜¶æ®µã€‚&lt;/p&gt;
&lt;p&gt;çŠ¹è®°å¾—ï¼Œå½“åˆé«˜è€ƒç»“æŸçš„æ—¶å€™åï¼Œè‡ªå·±å¡«æŠ¥çš„å¿—æ„¿å¤§éƒ¨åˆ†éƒ½æ˜¯è®¡ç®—æœºç›¸å…³çš„ï¼Œå› ä¸ºä»é«˜ä¸­å¼€å§‹ï¼Œå°±ä¸€ç›´å¯¹äºç”µè„‘æ–¹é¢æ¯”è¾ƒæ„Ÿå…´è¶£ï¼Œå¯èƒ½è·Ÿè‡ªå·±å°æ—¶å€™å–œæ¬¢çœ‹ç§‘å¹»ç‰‡æœ‰å…³å§ğŸ¤£ï¼ˆä¸€ä¸ªç§‘å¹»è¿·ï¼‰ã€‚å°æ—¶å€™ï¼Œå°±è§‰å¾—ä»¥åçš„ç§‘æŠ€åº”è¯¥ä¼šå‘å±•å¾ˆå¿«ï¼Œæ„Ÿåˆ°ä¼šç”µè„‘æŒºå‰å®³çš„ï¼ŒåŠ ä¸Šçœ‹å¥½äº’è”ç½‘çš„å‘å±•ï¼Œæ‰€ä»¥é«˜è€ƒå¡«æŠ¥å¿—æ„¿çš„æ—¶å€™ï¼Œéƒ½æ˜¯æ¸…ä¸€è‰²çš„è®¡ç®—æœºç›¸å…³ä¸“ä¸šï¼ˆæˆ‘ä¸ªäººæ¯”è¾ƒç‹¬ç«‹ï¼ŒåŸºæœ¬æŠ¥è€ƒä»€ä¹ˆä¸“ä¸šçš„ï¼Œä¸»è¦çœ‹è‡ªå·±å–œæ¬¢ä»€ä¹ˆï¼çˆ¶æ¯å’Œäº²æˆšçš„å»ºè®®ä»…ä»…ä½œä¸ºå‚è€ƒï¼‰ã€‚ç»“æœï¼Œç”±äºå½“æ—¶å€™è‡ªå·±åˆ†ä¸æ¸…å“ªäº›æ˜¯å±äºè®¡ç®—æœºä¸“ä¸šçš„ï¼Œæ²¡æœ‰çœ‹ä¸“ä¸šæ‰€å±çš„å­¦é™¢ï¼Œå¡«äº†ä¸ªâ€œä¿¡æ¯ä¸è®¡ç®—ç§‘å­¦ä¸“ä¸šâ€ï¼ˆ&lt;span&gt;å¬èµ·æ¥å¾ˆåƒè®¡ç®—æœºä¸“ä¸šçš„å§&lt;/span&gt;ï¼‰, å®ƒå±äºæ•°å­¦å­¦é™¢çš„ã€‚åˆšå¥½å¹¿ä¸œæŸæŸå­¦é™¢å½•å–çš„æ—¶å€™ï¼ŒæŠŠæˆ‘å½•å–è¿›äº†è¿™ä¸ªä¸“ä¸šğŸ™ƒï¼Œäºæ˜¯ä¹ï¼Œç³Šé‡Œç³Šæ¶‚åœ°å¼€å§‹äº†ä¸€ç³»åˆ—çš„æ•°å­¦çš„ç›¸å…³çš„å­¦ä¹ ã€‚ä¸è¿‡ç”±äºè‡ªå·±å¯¹äºè®¡ç®—ç›¸å…³è¿˜æ˜¯æŒºæ„Ÿå…´è¶£ï¼Œæ‰€ä»¥å¤§äºŒå¼€å§‹å°±å¼€å§‹è‡ªå­¦è®¡ç®—æœºç›¸å…³çš„è¯¾ç¨‹ï¼Œå¦å¤–è¿˜åŠ å…¥äº†å­¦æ ¡ä¸€ä¸ªæŒºæœ‰åæ°”çš„è®¡ç®—æœºç›¸å…³çš„ç»„ç»‡ï¼ˆ&lt;span&gt;è¿™ä¸ªå†³å®šå½±å“äº†æˆ‘åé¢çš„æŠ€æœ¯å‘å±•å’Œå…´è¶£æ–¹å‘ï¼Œåé¢æœ‰æœºä¼šå†æ¥å•ç‹¬ä»‹ç»ä¸€ä¸‹&lt;/span&gt;ï¼‰ã€‚åé¢å°±è·Ÿç€ç»„ç»‡é‡Œé¢çš„å¸ˆå…„å¸ˆå§çš„æ•™å¯¼å’Œè‡ªå·±ç»§ç»­å­¦ä¹ è®¡ç®—æœºç›¸å…³çš„çŸ¥è¯†ä¸€ç›´åˆ°äº†å¤§å››ã€‚&lt;/p&gt;
&lt;p&gt;å¤§ä¸‰å‡å¤§å››é‚£ä¸ªæš‘å‡ï¼Œæ‰å¼€å§‹å»æ‰¾å®ä¹ &lt;span&gt;ï¼ˆé‚£ä¸ªæ—¶å€™æ‰å¼€å§‹æ‰¾å¤ªæ™šäº†ğŸ˜­ï¼Œæœ‰çœ‹è¿™ç¯‡æ–‡ç« çš„å¸ˆå¼Ÿå¸ˆå¦¹åƒä¸‡ä¸è¦å­¦æˆ‘ï¼‰&lt;/span&gt;ï¼Œå½“æ—¶å€™æ‰¾äº†å·®ä¸å¤š2ã€3ä¸ªæ˜ŸæœŸå§ï¼ŒæŠ•äº†100å¤šä»½ç®€å†ï¼Œä¸€å…±æ‰æœ‰ä¸åˆ°5ã€6åœºé¢è¯•ï¼Œè€Œä¸”éƒ½æ˜¯ä¸­å°å‹å…¬å¸ã€‚&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201227175306562.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;ä¸è¿‡å½“æ—¶è‡ªå·±çš„ç®€å†çš„ç¡®æŒºèœçš„ï¼Œè¦å®ä¹ æ²¡æœ‰å®ä¹ ï¼Œè¦å¥½å­¦æ ¡ä¸æ˜¯å¥½å­¦æ ¡ï¼Œè¦è®¡ç®—æœºä¸“ä¸šä¸æ˜¯ç§‘ç­å‡ºèº«ã€‚åé¢é¢äº†å¥½å‡ æ¬¡é¢è¯•åï¼Œè‡ªå·±çŸ¥é“äº†é¢è¯•å¤§æ¦‚ä¼šå‡ºæ€ä¹ˆæ ·çš„é¢˜ç›®ï¼Œç„¶åå¼€å§‹è¾¹é¢è¯•è¾¹åˆ·é¢˜ï¼Œå¯èƒ½æ˜¯å‡­å€Ÿç€ä¹‹å‰çš„é¢è¯•ç»éªŒæˆ–è€…å¯èƒ½æ˜¯å®ä¹ è¦æ±‚æ²¡æœ‰é‚£ä¹ˆé«˜ï¼Œæˆ‘åœ¨7æœˆä»½å·¦å³çš„æ—¶å€™ï¼Œæ‹¿åˆ°äº†å¹¿å·ç”¨å‹ç½‘ç»œçš„å®ä¹ å²—ä½ğŸ˜€ã€‚å®ƒæ˜¯æˆ‘å½“æ—¶æ‹¿åˆ°çš„å”¯ä¸€ä¸€ä¸ªå®ä¹ offerï¼Œæ¥ç€å°±å»äº†é‚£é‡Œå®ä¹ äº†2ä¸ªå¤šæœˆã€‚åœ¨é‚£é‡Œå®ä¹ çš„ä¸¤ä¸ªæœˆé‡Œå­¦ä¹ åˆ°äº†å¾ˆå¤šï¼Œç®—æ˜¯è‡ªå·±çš„ç¬¬ä¸€æ¬¡ä½“éªŒäº†ç¨‹åºå‘˜çš„å·¥ä½œå’Œç”Ÿæ´»ã€‚äº²èº«ä½œä¸ºä¸€çº¿ç¨‹åºå‘˜åº”è¯¥éœ€è¦åšå“ªäº›äº‹æƒ…&lt;span&gt;ï¼ˆå…¶å®å°±æ˜¯CRUDï¼Œå¶å°”ä¼šæœ‰æ¯”è¾ƒå›°éš¾çš„éœ€æ±‚ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†å·¥ä½œéƒ½è¿˜æ˜¯å¢åˆ æ”¹æŸ¥ï¼‰&lt;/span&gt;ï¼Œå¦‚ä½•å»è·Ÿéœ€æ±‚æ–¹è°ˆéœ€æ±‚å’Œåœ¨é¡¹ç›®é‡Œé¢ä¸çœŸå®çš„äº§å“ç»ç†æ¥è§¦ã€‚&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201227234803555.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;ç¬¬ä¸€æ¬¡è¿›å…¥èŒåœºä½“éªŒäº†ä¸¤ä¸ªæœˆåï¼Œæ„Ÿè§‰è‡ªå·±è¿˜æ˜¯æŒºé€‚åˆåšç¨‹åºå‘˜ï¼Œå»ä¸Šç­çš„æ—¶å€™ï¼Œä¸ç”¨ç©¿å¾ˆæ­£å¼ï¼Œä¸Šç­å¤§éƒ¨åˆ†æ—¶é—´éƒ½æ˜¯åœ¨å†™ä»£ç ï¼Œä¸äººæ²Ÿé€šçš„æ—¶é—´æ¯”è¾ƒå°‘&lt;span&gt;ï¼ˆå› ä¸ºæˆ‘æ˜¯ä¸€ä¸ªæŒºå†…å‘çš„äººçš„ï¼Œæ¯”è¾ƒå–œæ¬¢å®…ğŸ˜…ï¼‰&lt;/span&gt;ï¼Œå·¥ä½ä¹Ÿæ¯”è¾ƒè‡ªç”±ï¼Œå·¥ä½œæ—¶é—´å†…ä¸ä¸€å®šå®Œå…¨éƒ½éœ€è¦åœ¨å·¥ä½œåœ°ç‚¹å†…ï¼Œå¶å°”ä¸‹æ¥¼é€›é€›ä¹Ÿå¯ä»¥ã€‚è¿™æ ·çš„å·¥ä½œçœŸçš„å¾ˆé€‚åˆè‡ªå·±ï¼Œæˆ‘æ¯”è¾ƒå–œæ¬¢è‡ªç”±ä¸€ç‚¹ï¼Œä¸äººäº¤æµå°‘ä¸€ç‚¹çš„å·¥ä½œğŸ˜œã€‚å”¯ä¸€æœ‰ä¸€ç‚¹ä¸å¥½çš„åœ°æ–¹æ˜¯è¦&lt;strong&gt;æ— å¿åŠ ç­&lt;/strong&gt;ğŸ˜ªï¼Œåœ¨å¹³å¸¸å·¥ä½œæ—¥çš„æ—¶å€™ï¼ŒåŸºæœ¬ä¸Šæˆ‘ä»¬ä¸‹ç­ä¹‹åï¼Œè¿˜æ˜¯è¦å·¥ä½œå¤š1,2ä¸ªå°æ—¶ï¼Œæœ‰æ—¶å€™æ˜¯éœ€æ±‚æ²¡å®Œæˆï¼Œæœ‰æ—¶å€™æ˜¯ä»Šå¤©åšçš„éœ€æ±‚çš„æœ‰bugï¼ŒåŸºæœ¬å¾ˆå°‘æ²¡æœ‰åŠ ç­çš„å·¥ä½œæ—¥ã€‚ä¸è¿‡ç›¸å¯¹å®ä¹ ç”Ÿæ¥è¯´ï¼ŒåŠ ç­æƒ…å†µæ¯”è¾ƒå°‘ï¼Œå¤§éƒ¨åˆ†æ—¶é—´æˆ‘è™½ç„¶æ˜¯åœ¨ä¸‹ç­ä¹‹åè¿˜ç•™åœ¨å…¬å¸ï¼Œåªä¸è¿‡æˆ‘æ˜¯ç•™åœ¨å…¬å¸å­¦ä¹ ï¼Œæ¯•ç«Ÿå¯¹äºè‡ªå·±åˆšåˆšæ­£å¼æ¥è§¦çœŸå®èŒåœºï¼Œæœ‰å¾ˆå¤šä¸œè¥¿éœ€è¦å­¦ä¹ ã€‚ä¾‹å¦‚ï¼šå…¬å¸æ‰€ä½¿ç”¨çš„æ¡†æ¶ï¼Œå‘å¸ƒç³»ç»Ÿï¼Œæµ‹è¯•æµç¨‹ï¼Œå‘å¸ƒçš„æµç¨‹ï¼Œè¿˜æœ‰ç§‹æ‹›çš„å‡†å¤‡ç­‰ç­‰ã€‚æ„Ÿè§‰&lt;strong&gt;åŠ ç­&lt;/strong&gt;å¯¹äºç¨‹åºå‘˜è¿™ä¸ªèŒä½æ¥è¯´æ˜¯&quot;é€šç—…&quot;ï¼Œåœ¨äº’è”ç½‘å…¬å¸å¾ˆå°‘ç¨‹åºå‘˜è¿™ä¸ªçš„èŒä½æ˜¯æ²¡æœ‰åŠ ç­çš„ã€‚&lt;/p&gt;
&lt;p&gt;åˆ°äº†2018å¹´9æœˆä»½å·¦å³ï¼Œå½“æ—¶æˆ‘å·²ç»å®ä¹ äº†ä¸¤ä¸ªæœˆäº†ï¼Œç„¶åçœ‹åˆ°çš„ç½‘ä¸Šå’Œå­¦æ ¡çš„å„ç§å°±ä¸šç¾¤é‡Œéƒ½å·²ç»å‘å¸ƒäº†å¤§å…¬å¸çš„ç§‹æ‹›ä¿¡æ¯ï¼Œè€Œä¸”åŸºæœ¬åœ¨9æœˆï¼Œ10æœˆä»½å¤§å…¬å¸çš„ç§‹æ‹›éƒ½åŸºæœ¬ç»“æŸäº†ã€‚äºæ˜¯ä¸ºäº†æ›´åŠ ä¸“å¿ƒåœ°å‡†å¤‡ç§‹æ‹›ï¼Œå¥½å¥½åˆ·é¢˜ä¹‹ç±»çš„ï¼Œæˆ‘è¾æ‰äº†å®ä¹ ã€‚å½“æ—¶å¤§çº¦9æœˆä»½çš„æ—¶å€™ï¼Œæˆ‘èº«è¾¹å¾ˆå¤šåŒå­¦éƒ½å·²ç»æ‹¿åˆ°äº†å¤§å…¬å¸çš„offerï¼Œå¦å¤–è¿˜æœ‰ä¸€ä¸ªçš„è·Ÿæˆ‘ä¸€èµ·åœ¨ç”¨å‹å®ä¹ çš„åŒå­¦ï¼Œæ‹¿åˆ°äº†vivoçš„ç§»åŠ¨ç«¯offferã€‚å½“æ—¶çœŸçš„å¾ˆç„¦è™‘ï¼Œå› ä¸ºå½“æ—¶æˆ‘ä¹Ÿæœ‰å¼€å§‹çš„æŠ•ç§‹æ‹›æå‰æ‰¹çš„ç®€å†äº†ï¼Œä½†æ˜¯æˆ‘çš„ç®€å†å°±åŸºæœ¬éƒ½æ²¡æœ‰è¿‡ğŸ˜­ã€‚æ‰€ä»¥å½“æ—¶ä¹Ÿæ‰ä¼šç€æ€¥è¾æ‰å®ä¹ ï¼Œä»¥ä¾¿æ›´ä¸“å¿ƒåœ°å‡†å¤‡ç§‹æ‹›ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¾æ‰å®ä¹ æ—¶å€™ï¼Œæˆ‘å°±å¼€å§‹æµ·æŠ•ç®€å†ï¼ŒåŸºæœ¬ä¸ç®¡æ˜¯å¤§å…¬å¸è¿˜æ˜¯å°å…¬å¸ï¼Œå…ˆæŠ•äº†å†è¯´ï¼Œæƒ³ç€èµšä¸€æ³¢é¢è¯•ç»éªŒä¹Ÿå¥½ï¼Œæ¯•ç«Ÿå½“æ—¶æˆ‘åŸºæœ¬æ²¡æœ‰ä»€ä¹ˆé¢è¯•æœºä¼šã€‚å…¶å®è¿™æ—¶å€™ç§‹æ‹›å·²ç»è¿›å…¥ç™½çƒ­åŒ–é˜¶æ®µäº†ï¼Œæˆ‘èº«è¾¹å¾ˆå¤šçš„é¢è¯•éæŠ€æœ¯çš„å²—ä½çš„åŒå­¦éƒ½å·²ç»å†å¼€å§‹æŠ•ç®€å†äº†çš„ã€‚ç„¶åå½“æ—¶ä¹Ÿå»äº†å¹¿ä¸œå·¥ä¸šå¤§å­¦ï¼Œåå—ç†å·¥å¤§å­¦ ç­‰ä¸€æœ¬ç†ç§‘å­¦æ ¡å‚åŠ äº†æŒºå¤šå®£è®²ä¼šçš„ï¼ˆåŸºæœ¬æ˜¯æœ‰ç¬”è¯•æœºä¼šçš„æ‰å»ï¼Œæˆ‘è‡ªå·±æ‰€åœ¨çš„å­¦æ ¡æ˜¯é‡‘èç›¸å…³çš„ï¼ŒåŸºæœ¬æ²¡æœ‰æŠ€æœ¯ç±»ç›¸å…³çš„æ‹›è˜ï¼‰ï¼Œä¸è¿‡å½“æ—¶åœ¨å®£è®²ä¼šä¸Šåšçš„ç¬”è¯•ä¹Ÿæ˜¯åŸºæœ¬æ²¡æœ‰è¿‡çš„ï¼Œå¯èƒ½æ˜¯ç”±äºç°åœºç¬”è¯•å‚åŠ çš„äººæ•°å¤ªå¤šäº†ï¼Œåœ¨ç§‹æ‹›åæ‰è§‰å¾—å¦‚æœä¸æ˜¯å¾ˆæœ‰å®åŠ›çš„ï¼Œå‚åŠ å®£è®²ä¼šä¹Ÿæ²¡ç”¨ï¼Œè·Ÿçº¿ä¸Šç¬”è¯•å·®ä¸å¤šã€‚é‚£æ—¶å€™ä¹Ÿå¼€å§‹åˆ·ä¸€äº›é¢è¯•é¢˜äº†ï¼Œå½“ç„¶ä¹Ÿæœ‰åœ¨åˆ·ç®—æ³•é¢˜ï¼Œå½“æ—¶æŠŠã€Šå‰‘æŒ‡offerã€‹é‡Œé¢çš„ç®—æ³•é¢˜å…¨éƒ¨åˆ·äº†ä¸€éï¼Œé¡ºä¾¿è®°å½•åˆ°è‡ªå·±çš„ githubä¸Šé¢äº† &lt;a href=&quot;https://github.com/KANLON&quot; target=&quot;_blank&quot;&gt;https://github.com/KANLON&lt;/a&gt; ï¼Œæ„Ÿè§‰å¸®åŠ©å¾ˆå¤§ ï¼Œåé¢é¢è¯•åçš„æœ‰éƒ¨åˆ†ç®—æ³•é¢˜æ˜¯ä»é‡Œé¢å‡ºçš„åŸé¢˜ã€‚&lt;/p&gt;
&lt;p&gt;åˆ°2018å¹´10æœˆä»½çš„æ—¶å€™é™†ç»­æœ‰äº†ä¸€äº›å…¬å¸çš„é¢è¯•æœºä¼šäº†ï¼Œä¾‹å¦‚ï¼šå°ç±³ï¼Œ58é›†å›¢ï¼Œä¸­ä¿¡ï¼Œå»ºè®¾é“¶è¡Œï¼Œé¡ºä¸°é“¶è¡Œç­‰ã€‚ä¸è¿‡å¤§éƒ¨åˆ†éƒ½æ˜¯&quot;ä¸€è½®æ¸¸&quot;ï¼Œè¿˜æ˜¯è‡ªå·±çš„åŸºç¡€çŸ¥è¯†ä¸ç‰¢å›ºï¼Œæˆ‘ä¾ç„¶è®°å¾—å½“åˆé¢è¯•å°ç±³çš„æ—¶å€™ï¼Œè¦ç°åœºå†™ä¸€ä¸ªè¿™æ ·çš„å°ç®—æ³•é¢˜&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;ç°åœºæ‰‹å†™ä¸€ä¸ªç®€å•çš„ç®—æ³•é¢˜ï¼Œå°†é“¾è¡¨996å¤§å°çš„ï¼Œåˆ†æˆ10ä»½ï¼Œæ¯ä»½100ä¸ªï¼Œæœ€åä¸€ä¸ª96ä¸ª&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å½“æ—¶ç”±äºå¤ªç´§å¼ äº†ï¼Œè€Œä¸”è‡ªå·±åŸºæœ¬æ²¡æœ‰ç°åœºå†™è¿‡ç®—æ³•é¢˜çš„ç»éªŒï¼Œç»“æœè€—è´¹äº†å¾ˆå¤šæ—¶é—´ï¼Œæœ€åä¹ŸæŒ‚äº†ï¼ˆ&lt;strong&gt;å¤šé¢è¯•&lt;/strong&gt;çš„é‡è¦æ€§ğŸ˜–ï¼‰ã€‚åé¢æˆ‘å°±ç»§ç»­è¾¹é¢è¯•é¢åˆ·é¢˜ï¼Œä¹Ÿç§¯ç´¯äº†ä¸€äº›é¢è¯•ç»éªŒï¼Œç»ˆäºåœ¨10æœˆæœ«å°¾æ‹¿åˆ°äº†æ ¼åŠ›çš„offerğŸ˜€ï¼ˆç®€ç›´å¼€å¿ƒåˆ°é£èµ·ï¼Œæœ‰äº†ç¬¬ä¸€ä¸ªofferï¼Œè€Œä¸”ç¢°å·§æˆ‘è¿˜æ˜¯æˆ‘ä»¬å®¿èˆç¬¬ä¸€ä¸ªæ‹¿åˆ°offerçš„äººï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;åé¢ä¹Ÿé™†ç»­æœ‰æ”¶åˆ°é¢è¯•é€šçŸ¥ï¼Œä¸è¿‡è¿˜æ˜¯å¾ˆå°‘ï¼Œä¸€ç›´é¢åˆ°11æœˆåº•å·¦å³ï¼Œåœ¨11æœˆåº•çš„æ—¶å€™ä¹Ÿæ”¶åˆ°çš„ä½›å±±æŸé“¶è¡Œçš„æŠ€æœ¯å²—offerã€‚ç»¼åˆè€ƒè™‘ä¹‹ä¸‹ï¼Œæ”¾å¼ƒäº†æ ¼åŠ›çš„offer ï¼Œå’Œä½›å±±æŸé“¶è¡Œç­¾è®¢äº†ä¸‰æ–¹åè®®ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨2018å¹´12æœˆä»½çš„æ—¶å€™ï¼ŒåŸºæœ¬æ‰€æœ‰çš„å¤§å…¬å¸çš„ç§‹æ‹›çš„éƒ½ç»“æŸäº†ï¼Œæˆ‘ä¹Ÿåœ¨è¿™ä¸ªæ—¶å€™åŸºæœ¬æ²¡æœ‰é¢è¯•äº†ï¼Œæˆ‘æ‰“ç®—å…ˆåœæ­¢å»æ±‚èŒäº†ï¼Œç®—ä½œæ‹¿åˆ°äº†å‹‰å¼ºæ»¡æ„çš„offeräº†ï¼Œæ‰“ç®—æ˜¥æ‹›çš„æ—¶å€™å†å»çœ‹çœ‹ã€‚12æœˆä»½åˆšåˆšå¥½æ˜¯çš„å…­çº§è€ƒè¯•çš„æ—¶å€™ï¼Œæˆ‘æ˜¯æœ‰æŠ¥è€ƒçš„ï¼Œä¹‹å‰å·²ç»è€ƒè¿‡äº†2æ¬¡ï¼Œä¸€ç›´æ²¡æœ‰è¿‡ğŸ˜‚ï¼Œæˆ‘è‹±è¯­æ–¹é¢æ˜¯æŒºæ°´çš„ï¼Œæƒ³ç€åŠªåŠ›è¯•è¯•æœ€åä¸€æ¬¡ã€‚è®°å¾—å¥½åƒæ˜¯å…­çº§è€ƒè¯•å‰ä¸€å‘¨æ—¶é—´æ‰å¼€å§‹å‡†å¤‡çš„ï¼Œä¹‹å‰ä¸€ç›´åœ¨å¿™åˆ·é¢˜ï¼Œç­¾ä¸‰æ–¹ç­‰é—®é¢˜ã€‚åé¢ä¸Šè€ƒåœºçš„è€ƒè¯•çš„æ—¶å€™æŒºè½»æ¾çš„ï¼Œä½œä¸ºè‡ªå·±å¤§å­¦æœŸé—´æœ€åä¸€åœºåœ¨è‡ªå·±å­¦æ ¡è¿›è¡Œçš„è€ƒè¯•ï¼Œè™½ç„¶ä¸ç”¨åœ¨ä¹è¿™åœºè€ƒè¯•çš„æˆç»©äº†ï¼Œä½†æ˜¯æ„ä¹‰è¿˜æ˜¯é‡å¤§ï¼Œå½“æ—¶å†™ç€è¯•é¢˜çš„æ—¶å€™ï¼Œæ€»æ˜¯ä¼šåˆ†ç¥ï¼Œè§‰å¾—è‡ªå·±çš„å¤§å­¦å°±è¿™æ ·è¿‡å»äº†ã€‚ä¸€ç‰‡å¯‚é™ä¸­ï¼Œåœ¨ç†Ÿæ‚‰çš„è¯¾å ‚ä¸Šï¼Œçœ‹ç€å‘¨å›´ç†Ÿæ‚‰çš„ç¯å¢ƒï¼Œåšç€é™Œç”Ÿçš„è¯•é¢˜ï¼Œçœ¼çœ¶è«ååœ°æ¹¿æ¶¦èµ·æ¥ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è€ƒå®Œå…­çº§è‹±è¯­è€ƒè¯•ä¹‹åï¼Œè‡ªæˆ‘æ„Ÿè§‰å·²ç»è¿‡ä¸äº†çš„ï¼Œå¤ªä¹…æ²¡æœ‰å¤ä¹ è‹±è¯­äº†ï¼Œä»å¤§ä¸‰å¼€å§‹ä¸€ç›´åˆ°æœ€è¿‘æ‹¿åˆ°offerä¹‹å‰éƒ½åŸºæœ¬æ²¡æœ‰æ¥è§¦è‹±è¯­ï¼Œé ç€ä¸€å‘¨â€œçªè¢­â€ï¼Œæ˜¯åŸºæœ¬ä¸å¯èƒ½çš„è¿‡çš„ï¼ˆåé¢ç»“æœæˆç»©çš„å‡ºæ¥ä¹‹åï¼Œå‘ç°æ˜¯è‡ªå·±è€ƒå¾—æœ€å·®çš„ä¸€æ¬¡å…­çº§è€ƒè¯•ğŸ˜…ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å…­çº§è€ƒè¯•ä¹‹åçš„ä¸€å‘¨å°±æ˜¯è€ƒç ”äº†ï¼Œæˆ‘ä»¬å®¿èˆä¹Ÿæ˜¯æœ‰å‡ ä¸ªäººè€ƒç ”ï¼Œæˆ‘å¤§æ¦‚åˆšä¸Šå¤§å››çš„æ—¶å€™ï¼Œçœ‹åˆ°ä»–ä»¬éƒ½æŠ¥è€ƒäº†ï¼Œæƒ³ç€æŠ¥è€ƒä¹Ÿä¸éœ€è¦å¤šå°‘é’±ï¼Œé¡ºä¾¿å­¦ä¸€ç‚¹è€ƒç ”ç›¸å…³çš„çŸ¥è¯†ï¼Œå­¦ä¹ å¤šç‚¹(chui)ä¸œ(niu)è¥¿(bi)ï¼Œäºæ˜¯æˆ‘ä¹Ÿå½“æ—¶ä¹ŸæŠ¥è€ƒäº†ã€‚æ¥ç€å°±è·Ÿç€æˆ‘ä»¬å®¿èˆçš„åŒå­¦ä¸€èµ·å‡†å¤‡è€ƒç ”äº†ä¸€å‘¨ï¼ŒæœŸé—´è¿˜æ˜¯æŒºæœ‰æ„æ€çš„ï¼Œå› ä¸ºå½“æ—¶æ¥è¿‘è€ƒç ”äº†ï¼Œç»å¸¸ä»–ä»¬å­¦ä¹ å›åˆ°å®¿èˆåéƒ½ä¼šè®¨è®ºä¸€ä¸‹è€ƒç ”çš„ä¸€äº›é¢˜ç›®çš„ï¼Œå½“æ—¶ç”±äºæˆ‘ä¹Ÿåœ¨å‡†å¤‡ï¼Œæˆ‘ä¹Ÿå¸¸å¸¸è·Ÿç€ä¸€èµ·è®¨(zhuang)è®º(bi)ã€‚è™½ç„¶æˆ‘å­¦ä¹ è€ƒç ”ç›¸å…³çš„è¿˜ä¸æ˜¯å¾ˆä¹…ï¼Œä½†æ˜¯è¿˜æ˜¯å¯ä»¥æŒºæ‡‚å…¶ä¸­ä¸€äº›çš„ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™ä¼šç›¸äº’æé—®ä¸€äº›è€ƒç ”ç›¸å…³çš„çŸ¥è¯†ï¼Œå¸¸å¸¸å½“æˆ‘ä»¥æˆ‘ä¸€çŸ¥åŠè§£çš„è€ƒç ”çŸ¥è¯†ä½œç­”çš„æ—¶å€™ï¼Œä¼šå¼•èµ·å“„å ‚å¤§ç¬‘ï¼Œä¹Ÿæ˜¯ä¸€æ®µå¾ˆå¼€å¿ƒæ—¶å…‰ï¼ˆä¹Ÿæ˜¯ä¸€æ¬¡ä¸ç”¨èƒŒè´Ÿæˆç»©å‹åŠ›çš„è€ƒè¯•å‡†å¤‡ï¼‰ã€‚å½“æ—¶ä¸€å‘¨ï¼Œæˆ‘æ¯å¤©éƒ½ä¼šå»è‡ªä¹ å®¤è‡ªä¹ çš„ï¼Œçœ‹ç€å‘¨å›´äººéƒ½åœ¨åŠªåŠ›å‡†å¤‡çš„è€ƒç ”çš„æ—¶å€™ï¼Œè‡ªå·±ä¹Ÿä¼šæ„Ÿå—åˆ°æœ‰ä¸€è‚¡å†²åŠ¨å»åŠªåŠ›è‡ªä¹ ï¼Œæ„Ÿå—é«˜è€ƒè¿‡åï¼Œè‡ªå·±å¾ˆä¹…æ²¡æœ‰é‚£ä¹ˆè®¤çœŸè¿‡ï¼Œè™½ç„¶æˆ‘æ˜¯æŠ±ç€è¯•è¯•çš„å¿ƒæ€å»è€ƒçš„ï¼Œä½†æ˜¯å‘¨å›´äººçš„æ°›å›´ä¼šå½±å“ä½ çš„ï¼Œè§‰å¾—å¤§å®¶éƒ½é‚£ä¹ˆåŠªåŠ›ï¼Œä½ æœ‰ä»€ä¹ˆèµ„æ ¼åŠªåŠ›å‘¢ã€‚å½“æ—¶ä¹Ÿæ˜¯æœ‰å¥½å¥½å‡†å¤‡äº†ä¸€äº›èµ„æ–™æ¥çœ‹çš„ã€‚å¦‚ä¸‹å›¾ï¼š&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20210102183845202.PNG&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å°±è¿™æ ·ï¼Œä¸€ç›´åŠªåŠ›åˆ°è€ƒç ”è€ƒè¯•é‚£å¤©ï¼Œå½“æ—¶ä¸€å‘¨æˆ‘ä¹Ÿæ˜¯å…¨å¿ƒèº«æŠ•å…¥åˆ°è€ƒç ”è€ƒè¯•ä¸­äº†ã€‚è¯´ä¸€ä¸ªå°æ„å¤–ï¼Œå½“æ—¶ä¸ºäº†èŠ‚çœç‚¹é’±ï¼Œæˆ‘è€ƒç ”çš„æ—¶å€™å¹¶æ²¡æœ‰åœ¨è€ƒç‚¹å‘¨å›´ç§Ÿæˆ¿ï¼Œå› ä¸ºè‡ªå·±ä¹Ÿæ˜¯è¯•è¯•è€ƒç ”çš„ï¼Œæ²¡æœ‰å¿…è¦å•ç‹¬ç§Ÿæˆ¿ï¼Œä»æˆ‘ä»¬å­¦æ ¡å‡ºå‘åˆ°è€ƒç‚¹é‚£é‡Œå¤§æ¦‚2ä¸ªå°æ—¶å·¦å³ï¼Œå¦‚æœæˆ‘6ç‚¹ä»å­¦æ ¡èµ·åºŠåˆšå¥½æ˜¯å¯ä»¥åˆ°è¾¾è€ƒç‚¹çš„åœ°æ–¹ï¼Œç„¶åç¬¬ä¸€å¤©å»è€ƒè¯•çš„æ—¶å€™ï¼Œæ²¡æƒ³åˆ°ä¼šé‚£ä¹ˆå¡è½¦ï¼Œå·®ç‚¹ä¸èƒ½è¿›å…¥è€ƒåœºäº†ï¼Œè®°å¾—å½“æ—¶è€ƒè¯•å·²ç»å¼€å§‹äº†5,6åˆ†é’Ÿäº†çš„ï¼Œå¦‚æœå†è¿Ÿ10åˆ†é’Ÿå·¦å³ä¼°è®¡å°±ä¸èƒ½è¿›å…¥è€ƒåœºï¼ˆè¿™ä¹Ÿæ˜¯ç®—æˆ‘ç¬¬ä¸€æ¬¡è€ƒè¯•å¼€å§‹åï¼Œéƒ½è¿˜æ²¡åˆ°è€ƒåœºçš„è€ƒè¯•å§ğŸ™ƒï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å½“ç„¶æœ€åçš„è€ƒè¯•è€ƒç ”ç»“æœæ˜¯ï¼š&lt;br/&gt;ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚&lt;br/&gt;ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚&lt;br/&gt;ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20210102184112532.PNG&quot; alt=&quot;è€ƒç ”æˆç»©å•&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;ä¸è¿‡å•¦ï¼&lt;/p&gt;
&lt;p&gt;ä¸å¾—ä¸è¯´ï¼Œè™½ç„¶æˆ‘æ˜¯æ•°å­¦ç›¸å…³ä¸“ä¸šçš„ï¼Œä½†æ˜¯å¤ªä¹…æ²¡æœ‰æ¥è§¦çš„è¯ï¼Œå¾ˆå®¹æ˜“å¿˜è®°çš„ğŸ’€ã€‚&lt;/p&gt;
&lt;p&gt;å°±è¿™æ ·ç®—ä½œè¿‡äº†2018å¹´å§ï¼Œåé¢åˆ°2019å¹´ä¸ŠåŠå¹´è¿‡å¹´å‰ï¼ŒåŸºæœ¬å°±æ˜¯å†™æ¯•ä¸šè®ºæ–‡ï¼Œæ‹æ¯•ä¸šç…§ï¼Œå‡†å¤‡æ¯•ä¸šçš„ä¸œè¥¿äº†ã€‚å½“æ—¶ä¹Ÿæœ‰ä¸ºäº†å‡†å¤‡ä¸€ä¸‹æ˜¥æ‹›ï¼Œå¼€å§‹å‡†å¤‡æ‰¾ä¸€ä»½å®ä¹ ï¼Œæµ·æŠ•é¢è¯•äº†å¾ˆå¤šå°å…¬å¸ï¼Œå¤§å…¬å¸ä¹ŸåŸºæœ¬æ²¡æœ‰å›ğŸ˜°ã€‚åé¢è¿˜æ˜¯é‡åˆ°ä¸€ä¸ªæœºä¼šï¼Œæˆ‘ä»¬éƒ¨è½ç¤¾å›¢å†…çš„ä¸€ä¸ªåœ¨YYå®ä¹ çš„åŒå­¦ï¼Œåœ¨ç¾¤é‡Œå‘äº†Javaå¼€å‘å®ä¹ ç”Ÿå²—ä½å†…æ¨ä¿¡æ¯ï¼Œè¯´ä»–ä»¬ç»„æ­£åœ¨æ‰¾æ‹›äººï¼Œäºæ˜¯æƒ³ç€è‡ªå·±æœ‰äº†ä¸€æ¬¡å®ä¹ ç»éªŒäº†ï¼Œå‡­å€Ÿä¹‹å‰é¢è¯•ç»éªŒï¼Œä¹Ÿåˆ·äº†ä¸å°‘é¢˜ï¼Œæ‰€ä»¥ä¹Ÿå°±æŠ•äº†ï¼ˆå…¶å®æˆ‘ä»¬å­¦æ ¡è·Ÿæˆ‘åŒä¸€å±Šçš„åŒå­¦å°±æœ‰å¥½å‡ ä¸ªè¿›å…¥YYå®ä¹ è¿‡çš„ï¼Œä¸è¿‡ä¹‹å‰æˆ‘è®¤ä¸ºæˆ‘æŠ€æœ¯æ²¡è¿‡å…³ï¼Œç„¶åä¸€ç›´ä¸æ•¢æŠ•ï¼‰ã€‚åé¢è¿æ°”æ¯”è¾ƒå¥½ï¼Œé¢è¯•é—®çš„é—®é¢˜éƒ½æ²¡æœ‰å¤ªéš¾ï¼Œç°åœºè®©æˆ‘æ‰‹å†™çš„ç®—æ³•é¢˜ä¹Ÿå¾ˆé¡ºåˆ©çš„å†™å‡ºæ¥çš„ã€‚äºæ˜¯åœ¨1æœˆä»½å·¦å³ï¼Œæˆ‘åœ¨å°±å¼€å§‹åœ¨YYå®ä¹ äº†ï¼Œå½“ç„¶è¿™æ—¶å€™çš„å®ä¹ ä¸€èˆ¬æ˜¯æ²¡æœ‰è½¬æ­£åé¢ï¼Œå½“æ—¶HRå°±æ˜ç¡®è·Ÿæˆ‘è¯´æ˜¯æ²¡æœ‰è½¬æ­£åé¢çš„ã€‚ä¸è¿‡æˆ‘ä¹Ÿæ²¡æœ‰æƒ³ç€è½¬æ­£ï¼Œæ¯•ç«Ÿç§‹æ‹›å·²ç»è¿‡äº†ï¼Œä¸€èˆ¬å¾ˆå°‘å¤§å…¬å¸ä¼šåœ¨æ˜¥æ‹›æ‹›äººçš„ï¼Œæˆ‘ä¹Ÿæ˜¯æŠ¥ç€å­¦ä¹ çš„å¿ƒæ€æ¥å®ä¹ çš„ã€‚&lt;/p&gt;
&lt;p&gt;2019å¹´ä¸€ä»½æœˆæˆ‘æ˜¯åˆšå…¥èŒå®ä¹ çš„ï¼ŒåŸºæœ¬å°±æ˜¯åœ¨çš„ç†Ÿæ‚‰ç¯å¢ƒï¼Œäº†è§£ä¸€ä¸‹éƒ¨é—¨ç»„ç»‡ä½“ç³»ï¼Œå…¬å¸çš„éƒ¨é—¨ç­‰ï¼Œæ²¡æœ‰åšä»€ä¹ˆã€‚åœ¨å…¥èŒæ²¡å¤šä¹…ä¹‹åï¼Œå°±å¼€å§‹æ”¾æ˜¥èŠ‚å‡æœŸäº†ï¼Œæˆ‘åœ¨YYçš„å®ä¹ å·¥ä½œï¼Œç®—ä½œä»è¿‡å¹´å›æ¥ä¹‹åæ‰å¼€å§‹ã€‚åˆšåˆšå¼€å§‹æ¥è§¦YYè¿™è¾¹çš„æŠ€æœ¯çš„ï¼Œå‘ç°è¿™é‡Œçš„æŠ€æœ¯ç”¨çš„éƒ½æ˜¯æ¯”è¾ƒæ–°çš„æŠ€æœ¯ï¼Œè€Œä¸”å¤§éƒ¨åˆ†æ˜¯éƒ½æ˜¯Spring Cloud ä¹‹ç±»å¼€æºçš„æ¡†æ¶ï¼ŒæŒºå®¹æ˜“ä¸Šæ‰‹çš„ï¼Œæ„Ÿè§‰è‡ªå·±è¿˜çœŸæ˜¯æ¥å¯¹äº†åœ°æ–¹ï¼ˆå› ä¸ºæˆ‘ä¸Šä¸€å®¶å®ä¹ å…¬å¸ç”¨çš„æ˜¯æ˜¯å…¬å¸å›¢é˜Ÿå®Œå…¨è‡ªå·±å¼€å‘çš„ä¸€å¥—æ¡†æ¶ï¼Œè€Œä¸”æ¯”è¾ƒè€çš„ï¼Œå¦‚æœé‡åˆ°é—®é¢˜æƒ³ç™¾åº¦ä¸€ä¸‹éƒ½ç™¾åº¦ä¸åˆ°ğŸ˜”ï¼‰ã€‚ä½†æ˜¯ç”±äºYYè¿™è¾¹çš„ç”¨çš„æŠ€æœ¯æˆ‘ä¹‹å‰æ²¡æœ‰æ€ä¹ˆç”¨è¿‡ï¼Œæ‰€ä»¥è¿‡å¹´å›æ¥ä¹‹åï¼Œæˆ‘åŸºæœ¬éƒ½æ˜¯è¾¹çœ‹è¿™è¾¹çš„é¡¹ç›®ç»“æ„ï¼Œè¾¹åœ¨ç½‘ä¸Šå­¦ä¹ å¯¹åº”çš„æ¡†æ¶ç”¨æ³•ã€‚åˆšå¼€å§‹é‚£æ®µæ—¶é—´çœŸçš„æœ‰ç‚¹ç—›è‹¦ï¼Œéšä¾¿çœ‹é¡¹ç›®åŸºæœ¬æ¡†æ¶ä»»æ„ä¸€éƒ¨åˆ†éƒ½åŸºæœ¬çœ‹ä¸æ‡‚ï¼Œäºæ˜¯åŸºæœ¬ä¸Šæˆ‘åœ¨åˆšå¼€å§‹å®ä¹ é‚£ä¼šï¼Œå¤©å¤©è‡ªå·±åŠ ç­åˆ°21ã€22ç‚¹ï¼Œåœ¨ç½‘ä¸Šå­¦ä¹ å¯¹åº”çš„æ¡†æ¶ï¼Œå¯¹ç€å®˜æ–¹æ–‡æ¡£æˆ–ä¸€äº›åšå®¢è‡ªå·±å…ˆæ­ä¸ª demo å‡ºæ¥ã€‚é‚£æ—¶å€™è™½ç„¶æœ‰å¾ˆå¤šä¸æ‡‚ï¼Œä½†æ˜¯å­¦ç€å­¦ç€å°±æ…¢æ…¢åœ°æ‘¸æ¸…äº†é¡¹ç›®ä¸­çš„ä½¿ç”¨çš„æ¡†æ¶ï¼Œå¦å¤–å¯¹å½“æ—¶å¾®æœåŠ¡çš„æ¶æ„éƒ½æœ‰äº†æ¯”è¾ƒæ·±çš„äº†è§£ã€‚é‚£æ—¶å€™ç»™æˆ‘çš„éœ€æ±‚è¿˜ä¸æ˜¯å¾ˆå¤šï¼Œæˆ‘ä¸€èˆ¬éƒ½æ˜¯è¾¹åšéœ€æ±‚ï¼Œè¾¹å­¦ä¹ æ–°æŠ€æœ¯çš„ï¼Œç»å¸¸åœ¨å‘¨å…­ã€æ—¥çš„æ—¶å€™éƒ½ä¼šè¿‡æ¥å…¬å¸è¿™è¾¹å­¦ä¹ æŠ€æœ¯ã€‚ä¸å¾—ä¸è¯´ï¼Œåœ¨æ¯”è¾ƒå¤§ä¸€ç‚¹çš„å…¬å¸é‡Œå®ä¹ ï¼Œå­¦ä¹ åˆ°çš„ä¸œè¥¿ä¼šæœ‰å¾ˆå¤šçš„ï¼Œå¯¹äºè‡ªå·±çš„æå‡ä¹Ÿä¼šå¾ˆå¤§ã€‚ä¾‹å¦‚éœ€æ±‚è¿™æ–¹é¢ï¼Œæˆ‘åœ¨YYè¿™è¾¹çš„åšçš„éœ€æ±‚é™¤äº†ä¸€äº›ç®€å•çš„ Crud å·¥ä½œï¼Œè¿˜èƒ½åº”ç”¨å¾®æœåŠ¡ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ç­‰æŠ€æœ¯ï¼Œè€Œä¸”åŸºæœ¬ä¸Šä¼šæ”¾æ‰‹è¿™ä¸ªéœ€æ±‚ç»™å½“æ—¶æˆ‘è¿™ä¸ªå®ä¹ ç”Ÿå»è´Ÿè´£ã€‚å¦å¤–ï¼Œç”±äºæ˜¯æ¯”è¾ƒå¤§çš„å…¬å¸çš„ï¼Œéƒ¨é—¨æœåŠ¡åˆ†å·¥æ˜ç¡®ï¼ŒYY è¿™è¾¹çš„æ•°æ®åº“ã€åŸŸåç½‘ç»œã€éƒ¨ç½²æ–¹é¢éƒ½æœ‰ä¸“é—¨çš„éƒ¨é—¨çš„å»è´Ÿè´£çš„ï¼Œç”³è¯·æ•°æ®åº“ã€åŸŸåã€æœåŠ¡å™¨å’Œéƒ¨ç½²æœåŠ¡ä¹‹ç±»çš„éƒ½å¾ˆç®€å•ï¼Œè®©å¼€å‘è‡ªå·±ä¸“æ³¨äºä¸šåŠ¡ä»£ç ä»£ç å³å¯ã€‚å½“ç„¶å¦‚æœæƒ³è‡ªå·±äº†è§£åº•å±‚æ¶æ„ç›¸å…³çš„ä¸œè¥¿ä¹Ÿå¯ä»¥ï¼Œå¯ä»¥æ‰¾å¯¹åº”çš„éƒ¨é—¨é—®é—®ï¼Œæˆ–è€…è‡ªå·±å»ç”³è¯·æœåŠ¡å™¨å»è‡ªå·±æ­ä¸€ä¸‹è¯•è¯•ä¹Ÿå¯ä»¥ã€‚æ€»ä¹‹å½“æ—¶åœ¨YYå®ä¹ é‚£ä¼šå­¦ä¹ åˆ°çš„ä¸œè¥¿ï¼Œæ„Ÿè§‰æ¯”è‡ªå·±ä¹‹å‰å­¦ä¹ åˆ°çš„ç¼–ç¨‹æŠ€æœ¯éƒ½å¤šï¼Œæ„Ÿè§‰è‡ªå·±æŠ€æœ¯æ°´å¹³çªç„¶æœ‰äº†è´¨çš„æå‡ï¼ˆå¤§æ¦‚å°±æ˜¯å­¦ä¹ åˆ°äº†å¾ˆå¤šï¼Œä¸çŸ¥é“æ€ä¹ˆè¡¨è¾¾äº†ğŸ¤“ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ç§æƒ…å†µä¸‹å®ä¹ åˆ°å¤§æ¦‚4ï¼Œ5æœˆä»½çš„æ—¶å€™ï¼Œæˆ‘çœ‹åˆ°æ˜¥æ‹›äº†å·²ç»æœ‰å¾ˆå¤šå…¬å¸å¼€å§‹äº†ï¼ˆä¸åŒ…å«YYï¼ŒYYä¸€èˆ¬æŠ€æœ¯ç±»çš„æ²¡æœ‰æ˜¥æ‹›ğŸ˜¢ï¼‰ï¼Œè™½ç„¶æ²¡æœ‰ç§‹æ‹›é‚£ä¹ˆå¤šå¤§å…¬å¸åœ¨æ‹›è˜ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰å‡ ä¸ªä¸­å¤§å‚è¿˜åœ¨æ‹›æŠ€æœ¯ï¼ˆæ˜¥æ‹›æ¯”ç§‹æ‹›çš„æœºä¼šå°‘å¤ªå¤šğŸ˜ªï¼‰ã€‚äºæ˜¯æˆ‘ä¹Ÿå»æŠ•äº†ä¸€æ³¢ä¸­å¤§å‚ï¼Œç„¶åæ˜¥æ‹›æˆ‘å°±åªæœ‰ä¸€ä¸ªçš„é¢è¯•æœºä¼šï¼ŒCVTE çš„ï¼Œè®°å¾—å½“æ—¶ CVTE ç§‹æ‹›æŒ‚äº†æˆ‘ç®€å†å’Œç¬”è¯•çš„ï¼Œæ¥ç€åˆæ˜¯é¢è¯•ï¼Œå½“æ—¶é¢è¯•å‡ å¤©åï¼Œè¿›å…¥äº†HRé¢ï¼Œä½†æ˜¯æœ€åHRé¢æŒ‚äº†æˆ‘ï¼Œåªèƒ½è¯´æ˜¯æ— ç¼˜äº†ã€‚æœŸé—´è¿˜æœ‰ä¸€ä¸ªæ„å¤–æƒŠå–œï¼Œå¤§æ¦‚å°±æ˜¯æˆ‘é¢è¯•CVTEçš„æ—¶å€™ï¼Œæˆ‘ä»¬ç»„ç»„é•¿å‘Šè¯‰äº†æˆ‘ä¸€ä¸ªå¥½æ¶ˆæ¯ï¼Œè¯´çœ‹åˆ°æˆ‘åšäº‹è®¤çœŸï¼ŒæŠ€æœ¯è¿˜ä¸é”™ï¼Œå¯ä»¥ç»™æˆ‘è½¬æ­£ï¼ï¼ï¼å½“æ—¶å°±å·®ç‚¹æ„ŸåŠ¨å“­äº†ï¼Œä¹‹å‰æˆ‘ä¸€ç›´éƒ½æ˜¯ä»¥ä¸ºä¸å¯èƒ½è½¬æ­£çš„ã€‚&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20210102231124246.gif&quot; alt=&quot;æ„ŸåŠ¨åˆ°å“­&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åæˆ‘åé¢è·ŸYYè¿™è¾¹HRè¯´æˆ‘æ²¡æœ‰ä¸‰æ–¹çš„æ—¶å€™ï¼Œä»–ä»¬è¯´æ²¡æœ‰ä¸‰æ–¹ä¹Ÿå¯ä»¥çš„ã€‚äºæ˜¯ï¼Œæˆ‘å¿«é€Ÿè”ç³»ä¹‹å‰è·Ÿä¹‹å‰ç­¾äº†ä¸‰æ–¹ä½›å±±æŸé“¶è¡ŒHRé“æ­‰è¯´ï¼Œæˆ‘ä¸èƒ½å»ä»–ä»¬é‚£é‡Œä¸Šç­äº†ï¼Œæˆ‘æ¥äº†å…¶ä»–å…¬å¸çš„offerï¼Œè®©ä»–ä»¬ç»™æˆ‘æ–¹å¼äº¤ä¸‰æ–¹è¿çº¦é‡‘ï¼ˆè¿™ä¸ªè¿çº¦é‡‘ä¸º8000ï¼Œè¿˜æ˜¯æœ‰ä¸€ç‚¹ç‚¹å¿ƒç–¼ï¼‰ã€‚é‚£è¾¹çš„HRä¹Ÿæ˜¯æ‰“ç”µè¯æ¥ï¼Œè·Ÿæˆ‘äºŒæ¬¡ç¡®è®¤ï¼Œé—®äº†æˆ‘çš„ä¸€äº›æƒ…å†µï¼Œåé¢ä¹ŸåŒæ„ã€‚ä¸è¿‡åœ¨è¿™é‡Œè¿˜æ˜¯å†æ¬¡å¯¹ä½›å±±æŸé“¶è¡Œè¯´å£°å¯¹ä¸èµ·çš„ï¼Œååˆ†æ„Ÿè°¢ä»–ä»¬å½“æ—¶ç»™äº†æˆ‘offerï¼Œä¹Ÿå¾ˆæŠ±æ­‰ç”±äºä¸ªäººåŸå› æ¯äº†ä¸‰æ–¹ã€‚&lt;/p&gt;
&lt;p&gt;å°±è¿™æ ·ï¼Œæˆ‘çš„æ‰¾å·¥ä½œä¹‹è·¯åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œåé¢æˆ‘å°±ä¸€ç›´åœ¨æ¬¢èšæ—¶ä»£è¿™è¾¹å·¥ä½œäº†ï¼Œæ­£å¸¸è½¬æ­£ï¼Œæ­£å¸¸å·¥ä½œã€‚å›é¡¾ä¸€ä¸‹è‡ªå·±æ‰¾å·¥ä½œçš„ç»å†ï¼Œè¿˜æ˜¯æŒºæ›²æŠ˜çš„ã€‚ä¸è¿‡æœ€åçš„ç»“æœï¼Œå¯¹äºæˆ‘ä¸ªäººæ¥è¯´å·²ç»å¾ˆæ»¡æ„äº†ï¼Œæ¯•ç«Ÿè‡ªå·±å¤§å­¦æ—¶å€™æ²¡æœ‰æ—©ç‚¹è®¤è¯†åˆ°è‡ªå·±åº”è¯¥å­¦ä¹ çš„ä¸œè¥¿ï¼Œæ²¡æœ‰æ—©ç‚¹ç§¯ç´¯æŠ€æœ¯ï¼Œè™½ç„¶æ¯”ä¸ä¸Šæˆ‘ä»¬å­¦æ ¡éƒ¨è½ç¤¾å›¢åŒå±Šé‚£äº›å»äº†é˜¿é‡Œï¼Œä»Šæ—¥å¤´æ¡ç­‰å¤§å…¬å¸çš„å¤§ä½¬ï¼Œä½†æ˜¯ä»–ä»¬çš„ç¡®å¤§å­¦çš„æ—¶å€™æ¯”æˆ‘å‹¤å¥‹ï¼Œæ¯”æˆ‘æ›´åŠªåŠ›å’Œæ›´æ—©ä¸€æ­¥æ¯”æˆ‘å…ˆå­¦ä¹ ã€‚æœ‰æ—¶å€™æ˜¯çœŸçš„ç¾¡æ…•ä¸æ¥çš„ï¼Œäººä¸äººå¯èƒ½å·®è·å°±é‚£ä¹ˆå¤§ï¼Œåšå¥½è‡ªå·±èƒ½åšå¥½çš„äº‹æƒ…å°±å¤Ÿäº†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h3&gt;
&lt;p&gt;æˆ‘ä¸ªäººçš„æ‰¾å·¥ä½œç»å†å°±æ˜¯è¿™æ ·çš„ï¼ŒåŸæœ¬æƒ³ç€å†™ç»å†ä¸€ç›´å†™åˆ°ç°åœ¨å·¥ä½œä¸¤å¹´åçš„æƒ…å†µï¼Œåé¢å‘ç°æ—¶é—´ä¸å¤ªå¤Ÿï¼Œä¹Ÿä¸å¤ªç¬¦åˆè¿™æ¬¡çš„ä¸»é¢˜ï¼Œå°±åˆ†å¼€äº†ï¼Œåé¢æœ‰æœºä¼šåœ¨è¡¥å……ã€‚åˆå‡†å¤‡åˆ°ä¸€å¹´ä¸€æ¬¡çš„ç§‹æ‹›äº†ï¼Œåœ¨è¿™é‡Œç»™å‡ ç‚¹å»ºè®®å³å°†å‡†å¤‡å°±ä¸šçš„åŒå­¦å§ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;ç§‹æ‹›çš„æå‰æ‰¹å’Œç§‹æ‹›æ˜¯æŠ€æœ¯ç±»æ‰¾å·¥ä½œçš„æœ€å¥½æ—¶æœºï¼Œå¦‚æœé”™è¿‡äº†ç§‹æ‹›ï¼ŒåŸºæœ¬å¾ˆéš¾è¿›å¤§å…¬å¸ã€‚&lt;/li&gt;
&lt;li&gt;èƒ½å°½æ—©å»å®ä¹ çš„å°½å¿«å»ï¼Œæœ€å¥½åœ¨ç§‹æ‹›å‰çš„ä¸€ä¸ªå¯’å‡å°±å»å®ä¹ äº†&lt;/li&gt;
&lt;li&gt;å¤šæå‰å»é¢è¯•ï¼Œé¢è¯•å¤šå‡ æ¬¡ç§¯ç´¯ä¸€ä¸‹ç»éªŒä¹Ÿä¸é”™&lt;/li&gt;
&lt;/ol&gt;&lt;/div&gt;</description>
<pubDate>Sat, 02 Jan 2021 15:52:00 +0000</pubDate>
<dc:creator>KANLON</dc:creator>
<og:description>æœ€è¿‘ä¸æ˜¯åˆšåˆšè¿‡äº†åœ£è¯èŠ‚å—ï¼Ÿç„¶ååˆå‡†å¤‡åˆ°å…ƒæ—¦äº†ï¼Œè¿æ¥2021å¹´ï¼åœ¨å¾®ä¿¡å…¬ä¼—å·ä¸Šçœ‹åˆ°å°éƒ¨åˆ†å…¬ä¼—å·åœ¨æ€»ç»“2020å¹´äº†ã€‚æ‰€ä»¥å°±å‹¾èµ·è‡ªå·±ä»æ¯•ä¸šåˆ°ç°åœ¨çš„å›å¿†ï¼Œé¡ºä¾¿æ€»ç»“ä¸€ä¸‹ï¼Œè‡ªå·±å¦‚ä½•ä»å‡†å¤‡ç§‹æ‹›åˆ°æ‹¿åˆ°offerçš„ï¼Œç®—</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/kanlon2015/p/14224512.html</dc:identifier>
</item>
<item>
<title>JustAuth 1.15.9 ç‰ˆå‘å¸ƒï¼Œæ”¯æŒé£ä¹¦ã€å–œé©¬æ‹‰é›…ã€ä¼ä¸šå¾®ä¿¡ç½‘é¡µç™»å½• - HandsomeBoyä¸¶</title>
<link>http://www.cnblogs.com/zhangyadong/p/14224502.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/zhangyadong/p/14224502.html</guid>
<description>&lt;p&gt;JustAuth 1.15.9 ç‰ˆå‘å¸ƒï¼Œæ”¯æŒé£ä¹¦ã€å–œé©¬æ‹‰é›…ã€ä¼ä¸šå¾®ä¿¡ç½‘é¡µç™»å½•&lt;/p&gt;&lt;div id=&quot;cnblogs_post_body&quot; readability=&quot;59.228989813243&quot;&gt;
&lt;h2&gt;æ–°å¢&lt;/h2&gt;
&lt;div class=&quot;cl-preview-section&quot;&gt;
&lt;ul&gt;&lt;li&gt;ä¿®å¤å¹¶æ­£å¼å¯ç”¨ é£ä¹¦ å¹³å°çš„ç¬¬ä¸‰æ–¹ç™»å½•&lt;/li&gt;
&lt;li&gt;AuthToken ç±»ä¸­æ–°å¢ refreshTokenExpireIn è®°å½• refresh token çš„æœ‰æ•ˆæœŸ&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;
&lt;p&gt;
&lt;h2&gt;PR&lt;/h2&gt;
&lt;/p&gt;
&lt;div class=&quot;cl-preview-section&quot;&gt;
&lt;ul&gt;&lt;li&gt;åˆå¹¶ GithubÂ &lt;a href=&quot;https://gitee.com/yadong.zhang/JustAuth/pulls/101&quot;&gt;#101&lt;/a&gt;ï¼šæ”¯æŒå–œé©¬æ‹‰é›…ç™»å½•&lt;/li&gt;
&lt;li&gt;åˆå¹¶ GithubÂ &lt;a href=&quot;https://gitee.com/yadong.zhang/JustAuth/pulls/101&quot;&gt;#105&lt;/a&gt;ï¼šæ”¯æŒä¼ä¸šå¾®ä¿¡ç½‘é¡µæˆæƒç™»å½•&lt;/li&gt;
&lt;li&gt;åˆå¹¶ GithubÂ &lt;a href=&quot;https://gitee.com/yadong.zhang/JustAuth/pulls/107&quot;&gt;#107&lt;/a&gt;ï¼šæ·»åŠ AuthAlipayRequestç½‘ç»œä»£ç†æ„é€ å™¨ï¼Œè§£å†³ Github Issue [#102](feat:ä»£ç†é—®é¢˜,ä»£ç†èƒ½å¦å¯é…ç½®åŒ– Â· Issue #102 Â· justauth/JustAuth)&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;
&lt;p&gt;
&lt;h2&gt;ä¿®æ”¹&lt;/h2&gt;
&lt;/p&gt;
&lt;div class=&quot;cl-preview-section&quot;&gt;
&lt;ul&gt;&lt;li&gt;ä¿®æ”¹å–œé©¬æ‹‰é›…é…ç½®å‚æ•°ï¼Œå°†ClientOsTypeå‚æ•°æåˆ° AuthConfig ä¸­&lt;/li&gt;
&lt;li&gt;AuthChecker ä¸­å¢åŠ å¯¹å–œé©¬æ‹‰é›…å¹³å°çš„æ ¡éªŒ&lt;/li&gt;
&lt;li&gt;å‡çº§ facebook api ç‰ˆæœ¬åˆ° v9.0ï¼Œè§£å†³ Gitee Issue [#I2AR5S](å‡çº§ facebook api ç‰ˆæœ¬ Â· Issue #I2AR5S Â· yadong.zhang/JustAuth - Gitee.com)&lt;/li&gt;
&lt;li&gt;ï¼ï¼ï¼æ³¨æ„ï¼ï¼ï¼ä¿®æ”¹åŸæ¥çš„ä¼ä¸šå¾®ä¿¡ Request ç±»åä¸º AuthWeChatEnterpriseQrcodeRequestï¼Œå‡çº§åæ³¨æ„è¯¥ç‚¹&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;
&lt;p&gt;
&lt;h2&gt;æ³¨æ„&lt;/h2&gt;
&lt;/p&gt;
&lt;div class=&quot;cl-preview-section&quot; readability=&quot;7&quot;&gt;
&lt;p&gt;å¯èƒ½æœ‰äº›å¼€å‘è€…å¯¹äº JA é›†æˆçš„å››ä¸ªå¾®ä¿¡å¹³å°ä¸å¤ªç†è§£ï¼Œè¿™å„¿ç»Ÿä¸€è¯´æ˜ï¼š&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;
&lt;h3&gt;æŒ‰ç…§ç±»å&lt;/h3&gt;
&lt;/p&gt;
&lt;div class=&quot;cl-preview-section&quot;&gt;
&lt;ul&gt;&lt;li&gt;AuthWeChatEnterpriseQrcodeRequestï¼šä¼ä¸šå¾®ä¿¡äºŒç»´ç ç™»å½•&lt;/li&gt;
&lt;li&gt;AuthWeChatEnterpriseWebRequestï¼šä¼ä¸šå¾®ä¿¡ç½‘é¡µç™»å½•&lt;/li&gt;
&lt;li&gt;AuthWeChatOpenRequestï¼šå¾®ä¿¡å¼€æ”¾å¹³å°&lt;/li&gt;
&lt;li&gt;AuthWeChatMpRequestï¼šå¾®ä¿¡å…¬ä¼—å¹³å°&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;
&lt;p&gt;
&lt;h3&gt;æŒ‰ç…§æšä¸¾&lt;/h3&gt;
&lt;/p&gt;
&lt;div class=&quot;cl-preview-section&quot;&gt;
&lt;ul&gt;&lt;li&gt;WECHAT_ENTERPRISEï¼šä¼ä¸šå¾®ä¿¡äºŒç»´ç ç™»å½•&lt;/li&gt;
&lt;li&gt;WECHAT_ENTERPRISE_WEBï¼šä¼ä¸šå¾®ä¿¡ç½‘é¡µç™»å½•&lt;/li&gt;
&lt;li&gt;WECHAT_OPENï¼šå¾®ä¿¡å¼€æ”¾å¹³å°&lt;/li&gt;
&lt;li&gt;WECHAT_MPï¼šå¾®ä¿¡å…¬ä¼—å¹³å°&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;
&lt;p&gt;
&lt;h2&gt;å…³äº Just Auth&lt;/h2&gt;
&lt;/p&gt;
&lt;div class=&quot;cl-preview-section&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;JustAuthï¼Œå¦‚ä½ æ‰€è§ï¼Œå®ƒä»…ä»…æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹æˆæƒç™»å½•çš„å·¥å…·ç±»åº“ï¼Œå®ƒå¯ä»¥è®©æˆ‘ä»¬è„±ç¦»ç¹ççš„ç¬¬ä¸‰æ–¹ç™»å½•SDKï¼Œè®©ç™»å½•å˜å¾—So easy!&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;cl-preview-section&quot; readability=&quot;11&quot;&gt;
&lt;p&gt;ç›®å‰å·²æ”¯æŒGithubã€Giteeã€å¾®åšã€é’‰é’‰ã€ç™¾åº¦ã€Codingã€è…¾è®¯äº‘å¼€å‘è€…å¹³å°ã€OSChinaã€æ”¯ä»˜å®ã€QQã€å¾®ä¿¡ã€æ·˜å®ã€Googleã€Facebookã€æŠ–éŸ³ã€é¢†è‹±ã€å°ç±³ã€å¾®è½¯ã€ä»Šæ—¥å¤´æ¡ã€Teambitionã€StackOverflowã€Pinterestã€äººäººã€åä¸ºã€ä¼ä¸šå¾®ä¿¡ã€é…·å®¶ä¹ã€Gitlabã€ç¾å›¢ã€é¥¿äº†ä¹ˆå’Œæ¨ç‰¹ç­‰ç¬¬ä¸‰æ–¹å¹³å°çš„æˆæƒç™»å½•ã€‚ Login, so easy!&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;
&lt;h2&gt;éƒ¨åˆ†ç”¨æˆ·&lt;/h2&gt;
&lt;/p&gt;
&lt;div class=&quot;cl-preview-section&quot;&gt;
&lt;p&gt;&lt;img src=&quot;http://img3.sycdn.imooc.com/5ff0958e000135ca11800303.jpg&quot; alt=&quot;image.png&quot; data-original=&quot;http://img3.sycdn.imooc.com/5ff0958e000135ca11800303.jpg&quot;/&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;
&lt;h2&gt;ç‰¹ç‚¹&lt;/h2&gt;
&lt;/p&gt;
&lt;div class=&quot;cl-preview-section&quot; readability=&quot;7&quot;&gt;
&lt;p&gt;åºŸè¯ä¸å¤šè¯´ï¼Œå°±ä¿©å­—ï¼š&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;cl-preview-section&quot;&gt;
&lt;ol&gt;&lt;li&gt;å…¨ï¼šå·²é›†æˆåå¤šå®¶ç¬¬ä¸‰æ–¹å¹³å°ï¼ˆå›½å†…å¤–å¸¸ç”¨çš„åŸºæœ¬éƒ½å·²åŒ…å«ï¼‰ï¼Œä»ç„¶è¿˜åœ¨æŒç»­æ‰©å±•ä¸­ï¼ˆ[å¼€å‘è®¡åˆ’]([å¼€å‘è®¡åˆ’] å¾…æ‰©å±•çš„ç¬¬ä¸‰æ–¹å¹³å° Â· Issue #IUGRK Â· yadong.zhang/JustAuth - Gitee.com)ï¼‰ï¼&lt;/li&gt;
&lt;li&gt;ç®€ï¼šAPIå°±æ˜¯å¥”ç€æœ€ç®€å•å»è®¾è®¡çš„ï¼Œå°½é‡è®©æ‚¨ç”¨èµ·æ¥æ²¡æœ‰éšœç¢æ„Ÿï¼&lt;/li&gt;
&lt;/ol&gt;&lt;/div&gt;
&lt;p&gt;
&lt;h2&gt;é¡¹ç›®æºç åº“&lt;/h2&gt;
&lt;/p&gt;


&lt;/div&gt;</description>
<pubDate>Sat, 02 Jan 2021 15:49:00 +0000</pubDate>
<dc:creator>HandsomeBoyä¸¶</dc:creator>
<og:description>JustAuth 1.15.9 ç‰ˆå‘å¸ƒï¼Œæ”¯æŒé£ä¹¦ã€å–œé©¬æ‹‰é›…ã€ä¼ä¸šå¾®ä¿¡ç½‘é¡µç™»å½•</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/zhangyadong/p/14224502.html</dc:identifier>
</item>
<item>
<title>VIMå’Œæ­£åˆ™è¡¨è¾¾å¼ - bestvae</title>
<link>http://www.cnblogs.com/bestvae/p/14224477.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/bestvae/p/14224477.html</guid>
<description>&lt;h2 id=&quot;1vim&quot;&gt;1.VIM&lt;/h2&gt;
&lt;h3 id=&quot;11vimç®€ä»‹&quot;&gt;1.1vimç®€ä»‹&lt;/h3&gt;
&lt;p&gt;vimæ˜¯ä¸€æ¬¾å¼ºå¤§çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå®ƒå’Œ vi ä½¿ç”¨æ–¹æ³•ä¸€è‡´ï¼Œä½†åŠŸèƒ½æ›´ä¸ºå¼ºå¤§ã€‚å®˜ç½‘ï¼šwww.vim.orgã€ä¸­æ–‡æ‰‹å†Œï¼š&lt;a href=&quot;http://vimcdoc.sourceforge.net/&quot; target=&quot;_blank&quot;&gt;http://vimcdoc.sourceforge.net/&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;12ä½¿ç”¨vim&quot;&gt;1.2ä½¿ç”¨vim&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;1.2.1å‘½ä»¤æ ¼å¼&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;vim [options] [file ..]
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¸¸ç”¨é€‰é¡¹&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;+# æ‰“å¼€æ–‡ä»¶åï¼Œè®©å…‰æ ‡å¤„äºç¬¬#è¡Œçš„è¡Œé¦–ï¼Œ+é»˜è®¤è¡Œå°¾&lt;/li&gt;
&lt;li&gt;+/PATTERN è®©å…‰æ ‡å¤„äºç¬¬ä¸€ä¸ªè¢«PATTERNåŒ¹é…åˆ°çš„è¡Œè¡Œé¦–&lt;/li&gt;
&lt;li&gt;-d file1 file2â€¦ æ¯”è¾ƒå¤šä¸ªæ–‡ä»¶ï¼Œç›¸å½“äº vimdiff&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;è¯´æ˜ï¼šå½“ä½¿ç”¨vimæ‰“å¼€æ–‡ä»¶çš„æ—¶å€™ï¼Œå¦‚æœè¯¥æ–‡ä»¶å­˜åœ¨ï¼Œæ–‡ä»¶è¢«æ‰“å¼€å¹¶æ˜¾ç¤ºå†…å®¹ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œå½“ç¼–è¾‘åç¬¬ä¸€æ¬¡å­˜ç›˜æ—¶åˆ›å»ºå®ƒ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.2.2vimä¸‰ç§æ¨¡å¼çš„åˆ‡æ¢&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸‰ç§æ¨¡å¼åˆ†ä¸º&lt;/p&gt;
&lt;p&gt;å‘½ä»¤æˆ–æ™®é€šæ¨¡å¼ã€æ’å…¥æ¨¡å¼ã€æ‰©å±•æ¨¡å¼&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å‘½ä»¤æ¨¡å¼ --&amp;gt; æ’å…¥æ¨¡å¼&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;i insert, åœ¨å…‰æ ‡æ‰€åœ¨å¤„è¾“å…¥
I åœ¨å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œçš„è¡Œé¦–è¾“å…¥
a append, åœ¨å…‰æ ‡æ‰€åœ¨å¤„åé¢è¾“å…¥
A åœ¨å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œçš„è¡Œå°¾è¾“å…¥
o åœ¨å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œçš„ä¸‹æ–¹æ‰“å¼€ä¸€ä¸ªæ–°è¡Œ
O åœ¨å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œçš„ä¸Šæ–¹æ‰“å¼€ä¸€ä¸ªæ–°è¡Œ
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;æ’å…¥æ¨¡å¼ --- ESC-----&amp;gt; å‘½ä»¤æ¨¡å¼&lt;/li&gt;
&lt;li&gt;å‘½ä»¤æ¨¡å¼ ---- : ----&amp;gt; æ‰©å±•å‘½ä»¤æ¨¡å¼&lt;/li&gt;
&lt;li&gt;æ‰©å±•å‘½ä»¤æ¨¡å¼ ----ESC,enter----&amp;gt; å‘½ä»¤æ¨¡å¼&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;13æ‰©å±•å‘½ä»¤æ¨¡å¼&quot;&gt;1.3æ‰©å±•å‘½ä»¤æ¨¡å¼&lt;/h3&gt;
&lt;h5 id=&quot;131-åŸºæœ¬å‘½ä»¤&quot;&gt;1.3.1 åŸºæœ¬å‘½ä»¤&lt;/h5&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;w              å†™ï¼ˆå­˜ï¼‰ç£ç›˜æ–‡ä»¶
wq      å†™å…¥å¹¶é€€å‡º
x               å†™å…¥å¹¶é€€å‡ºåŠ å¯†
q               é€€å‡ºï¼Œå¦‚æœä¿®æ”¹äº†å†…å®¹æ— æ³•é€€å‡º
qï¼   å¼ºåˆ¶ä¸å­˜ç›˜é€€å‡ºï¼Œå³ä½¿æ›´æ”¹éƒ½å°†ä¸¢å¤±
r filename è¯»æ–‡ä»¶å†…å®¹åˆ°å½“å‰æ–‡ä»¶ä¸­
!command        æ‰§è¡Œå‘½ä»¤
r!command       è¯»å…¥å‘½ä»¤çš„è¾“å‡º
&lt;/code&gt;
&lt;/pre&gt;
&lt;h5 id=&quot;132-åœ°å€å®šç•Œ&quot;&gt;1.3.2 åœ°å€å®šç•Œ&lt;/h5&gt;
&lt;p&gt;æ ¼å¼&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;:start_pos,end_pos CMD
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ°å€å®šç•Œç¬¦&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;#                      #å…·ä½“ç¬¬#è¡Œï¼Œä¾‹å¦‚2è¡¨ç¤ºç¬¬2è¡Œ
#,#             #ä»å·¦ä¾§#è¡¨ç¤ºèµ·å§‹è¡Œï¼Œåˆ°å³ä¾§#è¡¨ç¤ºç»“å°¾è¡Œ
#,+#            #ä»å·¦ä¾§#è¡¨ç¤ºçš„èµ·å§‹è¡Œï¼ŒåŠ ä¸Šå³ä¾§#è¡¨ç¤ºçš„è¡Œæ•°ï¼ŒèŒƒä¾‹ï¼š2,+3 è¡¨ç¤º2åˆ°5è¡Œ
.               #å½“å‰è¡Œ
$                       #æœ€åä¸€è¡Œ
.,$-1   #å½“å‰è¡Œåˆ°å€’æ•°ç¬¬äºŒè¡Œ
%                       #å…¨æ–‡, ç›¸å½“äº1,$

/pattern/       #ä»å½“å‰è¡Œå‘ä¸‹æŸ¥æ‰¾ï¼Œç›´åˆ°åŒ¹é…patternçš„ç¬¬ä¸€è¡Œ,å³:æ­£åˆ™è¡¨è¾¾å¼
/pat1/,/pat2/   #ä»ç¬¬ä¸€æ¬¡è¢«pat1æ¨¡å¼åŒ¹é…åˆ°çš„è¡Œå¼€å§‹ï¼Œä¸€ç›´åˆ°ç¬¬ä¸€æ¬¡è¢«pat2åŒ¹é…åˆ°çš„è¡Œç»“æŸ
#,/pat/         #ä»æŒ‡å®šè¡Œå¼€å§‹ï¼Œä¸€ç›´æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…pattternçš„è¡Œç»“æŸ
/pat/,$         #å‘ä¸‹æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…pattternçš„è¡Œåˆ°æ•´ä¸ªæ–‡ä»¶çš„ç»“å°¾çš„æ‰€æœ‰è¡Œ
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ°å€å®šç•Œåå¯è·Ÿä¸€ä¸ªç¼–è¾‘å‘½ä»¤&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;d              #åˆ é™¤
y                       #å¤åˆ¶
w file  #å°†èŒƒå›´å†…çš„è¡Œå¦å­˜è‡³æŒ‡å®šæ–‡ä»¶ä¸­
r file  #åœ¨æŒ‡å®šä½ç½®æ’å…¥æŒ‡å®šæ–‡ä»¶ä¸­çš„æ‰€æœ‰å†…å®¹
&lt;/code&gt;
&lt;/pre&gt;
&lt;h5 id=&quot;133-æŸ¥æ‰¾å’Œæ›¿æ¢&quot;&gt;1.3.3 æŸ¥æ‰¾å’Œæ›¿æ¢&lt;/h5&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;s/è¦æŸ¥æ‰¾çš„å†…å®¹/æ›¿æ¢ä¸ºçš„å†…å®¹/ä¿®é¥°ç¬¦
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¯´æ˜&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;è¦æŸ¥æ‰¾çš„å†…å®¹ï¼šå¯ä½¿ç”¨åŸºæœ«æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼
æ›¿æ¢ä¸ºçš„å†…å®¹ï¼šä¸èƒ½ä½¿ç”¨æ¨¡å¼ï¼Œä½†å¯ä»¥ä½¿ç”¨\1, \2, ...ç­‰åå‘å¼•ç”¨ç¬¦å·ï¼›è¿˜å¯ä»¥ä½¿ç”¨â€œ&amp;amp;â€å¼•ç”¨å‰é¢æŸ¥æ‰¾æ—¶æŸ¥
æ‰¾åˆ°çš„æ•´ä¸ªå†…å®¹
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¿®é¥°ç¬¦ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;i #å¿½ç•¥å¤§å°å†™
g #å…¨å±€æ›¿æ¢ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸€è¡Œåªæ›¿æ¢ç¬¬ä¸€æ¬¡å‡ºç°
gc #å…¨å±€æ›¿æ¢ï¼Œæ¯æ¬¡æ›¿æ¢å‰è¯¢é—®
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æŸ¥æ‰¾æ›¿æ¢ä¸­çš„åˆ†éš”ç¬¦/å¯æ›¿æ¢ä¸ºå…¶å®ƒå­—ç¬¦ï¼Œå¦‚ï¼š#,@&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;s@/etc@/var@g
s#/boot#/#i
&lt;/code&gt;
&lt;/pre&gt;
&lt;h5 id=&quot;134-å®šåˆ¶vim&quot;&gt;1.3.4 å®šåˆ¶vim&lt;/h5&gt;
&lt;p&gt;é…ç½®æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;/etc/vimrc #å…¨å±€
~/.vimrc #ä¸ªäºº

#è¡Œå·
æ˜¾ç¤ºï¼šset numberï¼Œç®€å†™ set nu
å–æ¶ˆæ˜¾ç¤ºï¼šset nonumber, ç®€å†™ set nonu

#å¿½ç•¥å­—ç¬¦çš„å¤§å°å†™
å¯ç”¨ï¼šset ignorecaseï¼Œç®€å†™ set ic
ä¸å¿½ç•¥ï¼šset noic

#è‡ªåŠ¨ç¼©è¿›
å¯ç”¨ï¼šset autoindentï¼Œç®€å†™ set ai
ç¦ç”¨ï¼šset noai

#è®¾ç½®å…‰æ ‡æ‰€åœ¨è¡Œçš„æ ‡è¯†çº¿
å¯ç”¨ï¼šset cursorlineï¼Œç®€å†™ set cul
ç¦ç”¨ï¼šset nocursorline

#Tabç”¨æŒ‡å®šç©ºæ ¼çš„ä¸ªæ•°ä»£æ›¿
å¯ç”¨ï¼šset tabstop=# æŒ‡å®š#ä¸ªç©ºæ ¼ä»£æ›¿Tab
ç®€å†™ï¼šset ts=4

#æ–‡ä»¶æ ¼å¼
å¯ç”¨windowsæ ¼å¼ï¼šset fileformat=dos
å¯ç”¨unixæ ¼å¼ï¼šset fileformat=unix
ç®€å†™ set ff=dos|unix

#Tab ç”¨ç©ºæ ¼ä»£æ›¿
å¯ç”¨ï¼šset expandtab é»˜è®¤ä¸º8ä¸ªç©ºæ ¼ä»£æ›¿Tab
ç¦ç”¨ï¼šset noexpandtab
ç®€å†™ï¼šset et 

#è¯­æ³•é«˜äº®
å¯ç”¨ï¼šsyntax on
ç¦ç”¨ï¼šsyntax of

#é«˜äº®æœç´¢
å¯ç”¨ï¼šset hlsearch
ç¦ç”¨ï¼šset nohlsearch

#æ˜¾ç¤ºTabå’Œæ¢è¡Œç¬¦ ^I å’Œ$æ˜¾ç¤º
å¯ç”¨ï¼šset list
ç¦ç”¨ï¼šset nolist

#set showcmd
æ˜¾ç¤ºå‘½ä»¤æ¨¡å¼ä¸‹è¾“å…¥çš„å­—ç¬¦
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;14-å‘½ä»¤æ¨¡å¼&quot;&gt;1.4 å‘½ä»¤æ¨¡å¼&lt;/h3&gt;
&lt;h5 id=&quot;141-é€€å‡ºvim&quot;&gt;1.4.1 é€€å‡ºVIM&lt;/h5&gt;
&lt;p&gt;ZZ | wq ä¿å­˜é€€å‡º&lt;/p&gt;
&lt;p&gt;ZQ | q ä¸ä¿å­˜é€€å‡º&lt;/p&gt;
&lt;h5 id=&quot;142-å…‰æ ‡è·³è½¬&quot;&gt;1.4.2 å…‰æ ‡è·³è½¬&lt;/h5&gt;
&lt;p&gt;å­—ç¬¦é—´è·³è½¬ï¼š&lt;/p&gt;
&lt;p&gt;h: å·¦ L: å³ j: ä¸‹ k: ä¸Š&lt;/p&gt;

&lt;p&gt;å•è¯é—´è·³è½¬ï¼š&lt;/p&gt;
&lt;p&gt;wï¼šä¸‹ä¸€ä¸ªå•è¯çš„è¯é¦–&lt;/p&gt;
&lt;p&gt;eï¼šå½“å‰æˆ–ä¸‹ä¸€å•è¯çš„è¯å°¾&lt;/p&gt;
&lt;p&gt;bï¼šå½“å‰æˆ–å‰ä¸€ä¸ªå•è¯çš„è¯é¦–&lt;/p&gt;

&lt;p&gt;å½“å‰é¡µè·³è½¬ï¼š&lt;/p&gt;
&lt;p&gt;Hï¼šé¡µé¦– Mï¼šé¡µä¸­é—´è¡Œ Lï¼šé¡µåº•&lt;/p&gt;
&lt;p&gt;ztï¼šå°†å…‰æ ‡æ‰€åœ¨å½“å‰è¡Œç§»åˆ°å±å¹•é¡¶ç«¯&lt;/p&gt;
&lt;p&gt;zzï¼šå°†å…‰æ ‡æ‰€åœ¨å½“å‰è¡Œç§»åˆ°å±å¹•ä¸­é—´&lt;/p&gt;
&lt;p&gt;zbï¼šå°†å…‰æ ‡æ‰€åœ¨å½“å‰è¡Œç§»åˆ°å±å¹•åº•ç«¯&lt;/p&gt;
&lt;p&gt;è¡Œé¦–è¡Œå°¾è·³è½¬ï¼š&lt;/p&gt;
&lt;p&gt;^ è·³è½¬è‡³è¡Œé¦–çš„ç¬¬ä¸€ä¸ªéç©ºç™½å­—ç¬¦&lt;/p&gt;
&lt;p&gt;0 è·³è½¬è‡³è¡Œé¦–&lt;/p&gt;
&lt;p&gt;$ è·³è½¬è‡³è¡Œå°¾&lt;/p&gt;
&lt;p&gt;è¡Œé—´ç§»åŠ¨ï¼š&lt;/p&gt;
&lt;p&gt;#G æˆ–è€…æ‰©å±•å‘½ä»¤æ¨¡å¼ä¸‹ :# è·³è½¬è‡³ç”±ç¬¬#è¡Œ&lt;/p&gt;
&lt;p&gt;G æœ€åä¸€è¡Œ&lt;/p&gt;
&lt;p&gt;1G, gg ç¬¬ä¸€è¡Œ&lt;/p&gt;
&lt;p&gt;å‘½ä»¤æ¨¡å¼ç¿»å±æ“ä½œ&lt;/p&gt;
&lt;p&gt;Ctrl+f å‘æ–‡ä»¶å°¾éƒ¨ç¿»ä¸€å±&lt;/p&gt;
&lt;p&gt;Ctrl+b å‘æ–‡ä»¶é¦–éƒ¨ç¿»ä¸€å±&lt;/p&gt;
&lt;p&gt;Ctrl+d å‘æ–‡ä»¶å°¾éƒ¨ç¿»åŠå±&lt;/p&gt;
&lt;p&gt;Ctrl+u å‘æ–‡ä»¶é¦–éƒ¨ç¿»åŠå±&lt;/p&gt;
&lt;h5 id=&quot;143-å­—ç¬¦ç¼–è¾‘&quot;&gt;1.4.3 å­—ç¬¦ç¼–è¾‘&lt;/h5&gt;
&lt;p&gt;x åˆ é™¤å…‰æ ‡å¤„çš„å­—ç¬¦&lt;/p&gt;

&lt;p&gt;xp äº¤æ¢å…‰æ ‡æ‰€åœ¨å¤„çš„å­—ç¬¦åŠå…¶åé¢å­—ç¬¦çš„ä½ç½®&lt;/p&gt;
&lt;h5 id=&quot;144-æ›¿æ¢å‘½ä»¤replace&quot;&gt;1.4.4 æ›¿æ¢å‘½ä»¤(replace)&lt;/h5&gt;
&lt;p&gt;r åªæ›¿æ¢å…‰æ ‡æ‰€åœ¨å¤„çš„ä¸€ä¸ªå­—ç¬¦&lt;/p&gt;
&lt;p&gt;R åˆ‡æ¢æˆREPLACEæ¨¡å¼ï¼ˆåœ¨æœ«è¡Œå‡ºç°-- REPLACE -- æç¤ºï¼‰,æŒ‰ESCå›åˆ°å‘½ä»¤æ¨¡å¼&lt;/p&gt;
&lt;h5 id=&quot;145-åˆ é™¤å‘½ä»¤ï¼ˆdeleteï¼‰&quot;&gt;1.4.5 åˆ é™¤å‘½ä»¤ï¼ˆdeleteï¼‰&lt;/h5&gt;
&lt;p&gt;d åˆ é™¤å‘½ä»¤ï¼Œå¯ç»“åˆå…‰æ ‡è·³è½¬å­—ç¬¦ï¼Œå®ç°èŒƒå›´åˆ é™¤&lt;/p&gt;
&lt;p&gt;d$ åˆ é™¤åˆ°è¡Œå°¾&lt;/p&gt;
&lt;p&gt;d^ åˆ é™¤åˆ°éç©ºè¡Œé¦–&lt;/p&gt;
&lt;p&gt;d0 åˆ é™¤åˆ°è¡Œé¦–&lt;/p&gt;
&lt;p&gt;ddï¼š å‰ªåˆ‡å…‰æ ‡æ‰€åœ¨çš„è¡Œ&lt;/p&gt;

&lt;p&gt;Dï¼šä»å½“å‰å…‰æ ‡ä½ç½®ä¸€ç›´åˆ é™¤åˆ°è¡Œå°¾ï¼Œç­‰åŒäºd$&lt;/p&gt;
&lt;h5 id=&quot;146-å¤åˆ¶å‘½ä»¤yank&quot;&gt;1.4.6 å¤åˆ¶å‘½ä»¤(yank)&lt;/h5&gt;
&lt;p&gt;y å¤åˆ¶ï¼Œè¡Œä¸ºç›¸ä¼¼äºdå‘½ä»¤&lt;/p&gt;
&lt;h5 id=&quot;147-ç²˜è´´å‘½ä»¤paste&quot;&gt;1.4.7 ç²˜è´´å‘½ä»¤(paste)&lt;/h5&gt;
&lt;p&gt;p ç¼“å†²åŒºå­˜çš„å¦‚æœä¸ºæ•´è¡Œï¼Œåˆ™ç²˜è´´å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œçš„ä¸‹æ–¹ï¼›å¦åˆ™ï¼Œåˆ™ç²˜è´´è‡³å½“å‰å…‰æ ‡æ‰€åœ¨å¤„çš„åé¢&lt;/p&gt;
&lt;p&gt;P ç¼“å†²åŒºå­˜çš„å¦‚æœä¸ºæ•´è¡Œï¼Œåˆ™ç²˜è´´å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œçš„ä¸Šæ–¹ï¼›å¦åˆ™ï¼Œåˆ™ç²˜è´´è‡³å½“å‰å…‰æ ‡æ‰€åœ¨å¤„çš„å‰é¢&lt;/p&gt;
&lt;h5 id=&quot;148-æ”¹å˜å‘½ä»¤change&quot;&gt;1.4.8 æ”¹å˜å‘½ä»¤(change)&lt;/h5&gt;
&lt;p&gt;c: åˆ é™¤ååˆ‡æ¢æˆæ’å…¥æ¨¡å¼&lt;/p&gt;
&lt;p&gt;c$&lt;/p&gt;
&lt;p&gt;c^&lt;/p&gt;
&lt;p&gt;c0&lt;/p&gt;
&lt;p&gt;cb&lt;/p&gt;
&lt;h5 id=&quot;149-æŸ¥æ‰¾&quot;&gt;1.4.9 æŸ¥æ‰¾&lt;/h5&gt;
&lt;p&gt;/PATTERNï¼šä»å½“å‰å…‰æ ‡æ‰€åœ¨å¤„å‘æ–‡ä»¶å°¾éƒ¨æŸ¥æ‰¾&lt;/p&gt;
&lt;p&gt;?PATTERNï¼šä»å½“å‰å…‰æ ‡æ‰€åœ¨å¤„å‘æ–‡ä»¶é¦–éƒ¨æŸ¥æ‰¾&lt;/p&gt;
&lt;p&gt;nï¼šä¸å‘½ä»¤åŒæ–¹å‘&lt;/p&gt;
&lt;p&gt;Nï¼šä¸å‘½ä»¤åæ–¹å‘&lt;/p&gt;
&lt;h5 id=&quot;1410-æ’¤æ¶ˆæ›´æ”¹&quot;&gt;1.4.10 æ’¤æ¶ˆæ›´æ”¹&lt;/h5&gt;
&lt;p&gt;u æ’¤é”€æœ€è¿‘çš„æ›´æ”¹ï¼Œç›¸å½“äºwindowsä¸­ctrl+z&lt;/p&gt;
&lt;p&gt;#u æ’¤é”€ä¹‹å‰å¤šæ¬¡æ›´æ”¹&lt;/p&gt;
&lt;p&gt;U æ’¤æ¶ˆå…‰æ ‡è½åœ¨è¿™è¡Œåæ‰€æœ‰æ­¤è¡Œçš„æ›´æ”¹&lt;/p&gt;
&lt;p&gt;Ctrl - r é‡åšæœ€åçš„â€œæ’¤æ¶ˆâ€æ›´æ”¹ï¼Œç›¸å½“äºwindowsä¸­crtl+y&lt;/p&gt;
&lt;p&gt;. é‡å¤å‰ä¸€ä¸ªæ“ä½œ&lt;/p&gt;

&lt;h5 id=&quot;1411-é«˜çº§ç”¨æ³•&quot;&gt;1.4.11 é«˜çº§ç”¨æ³•&lt;/h5&gt;
&lt;p&gt;å¸¸è§Commandï¼šy å¤åˆ¶ã€d åˆ é™¤ã€gU å˜å¤§å†™ã€gu å˜å°å†™&lt;/p&gt;
&lt;p&gt;èŒƒä¾‹&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;0y$ å‘½ä»¤
#ç²˜è´´ä¸€ä¸ªå­—ç¬¦100æ¬¡
100ihello [ESC] 
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;di&quot; å…‰æ ‡åœ¨â€ â€œä¹‹é—´ï¼Œåˆ™åˆ é™¤â€ â€œä¹‹é—´çš„å†…å®¹&lt;/p&gt;
&lt;p&gt;yi( å…‰æ ‡åœ¨()ä¹‹é—´ï¼Œåˆ™å¤åˆ¶()ä¹‹é—´çš„å†…å®¹&lt;/p&gt;
&lt;p&gt;vi[ å…‰æ ‡åœ¨[]ä¹‹é—´ï¼Œåˆ™é€‰ä¸­[]ä¹‹é—´çš„å†…å®¹&lt;/p&gt;
&lt;p&gt;dtx åˆ é™¤å­—ç¬¦ç›´åˆ°é‡è§å…‰æ ‡ä¹‹åçš„ç¬¬ä¸€ä¸ª x å­—ç¬¦&lt;/p&gt;
&lt;p&gt;ytx å¤åˆ¶å­—ç¬¦ç›´åˆ°é‡è§å…‰æ ‡ä¹‹åçš„ç¬¬ä¸€ä¸ª x å­—ç¬¦&lt;/p&gt;
&lt;h3 id=&quot;15-å¯è§†åŒ–æ¨¡å¼&quot;&gt;1.5 å¯è§†åŒ–æ¨¡å¼&lt;/h3&gt;
&lt;p&gt;åœ¨æœ«è¡Œæœ‰â€-- VISUAL -- â€œæŒ‡ç¤ºï¼Œè¡¨ç¤ºåœ¨å¯è§†åŒ–æ¨¡å¼&lt;/p&gt;
&lt;p&gt;è¿›å…¥å¯è§†åŒ–æ¨¡å¼æŒ‰é”®&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;v é¢å‘å­—ç¬¦ï¼Œ-- VISUAL --&lt;/li&gt;
&lt;li&gt;V é¢å‘æ•´è¡Œï¼Œ-- VISUAL LINE --&lt;/li&gt;
&lt;li&gt;ctrl-v é¢å‘å—ï¼Œ-- VISUAL BLOCK --&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;16-å¤šæ–‡ä»¶æ¨¡å¼&quot;&gt;1.6 å¤šæ–‡ä»¶æ¨¡å¼&lt;/h3&gt;
&lt;p&gt;vim FILE1 FILE2 FILE3 ...&lt;/p&gt;
&lt;p&gt;:next ä¸‹ä¸€ä¸ª&lt;/p&gt;
&lt;p&gt;:prev å‰ä¸€ä¸ª&lt;/p&gt;
&lt;p&gt;:first ç¬¬ä¸€ä¸ª&lt;/p&gt;
&lt;p&gt;:last æœ€åä¸€ä¸ª&lt;/p&gt;
&lt;p&gt;:wall ä¿å­˜æ‰€æœ‰&lt;/p&gt;
&lt;p&gt;:qall ä¸ä¿å­˜é€€å‡ºæ‰€æœ‰&lt;/p&gt;
&lt;p&gt;:wqallä¿å­˜é€€å‡ºæ‰€æœ‰&lt;/p&gt;
&lt;h3 id=&quot;17-å¤šçª—å£æ¨¡å¼&quot;&gt;1.7 å¤šçª—å£æ¨¡å¼&lt;/h3&gt;
&lt;h5 id=&quot;171-å¤šæ–‡ä»¶åˆ†å‰²&quot;&gt;1.7.1 å¤šæ–‡ä»¶åˆ†å‰²&lt;/h5&gt;
&lt;p&gt;vim -o|-O FILE1 FILE2 ...&lt;/p&gt;
&lt;p&gt;-o: æ°´å¹³æˆ–ä¸Šä¸‹åˆ†å‰²&lt;/p&gt;
&lt;p&gt;-O: å‚ç›´æˆ–å·¦å³åˆ†å‰²ï¼ˆvim onlyï¼‰&lt;/p&gt;
&lt;p&gt;åœ¨çª—å£é—´åˆ‡æ¢ï¼šCtrl+w+æ–¹å‘é”®&lt;/p&gt;
&lt;h5 id=&quot;172-å•æ–‡ä»¶çª—å£åˆ†å‰²&quot;&gt;1.7.2 å•æ–‡ä»¶çª—å£åˆ†å‰²&lt;/h5&gt;
&lt;p&gt;Ctrl+w+sï¼šsplit, æ°´å¹³åˆ†å‰²ï¼Œä¸Šä¸‹åˆ†å±&lt;/p&gt;
&lt;p&gt;Ctrl+w+vï¼švertical, å‚ç›´åˆ†å‰²ï¼Œå·¦å³åˆ†å±&lt;/p&gt;
&lt;p&gt;ctrl+w+qï¼šå–æ¶ˆç›¸é‚»çª—å£&lt;/p&gt;
&lt;p&gt;ctrl+w+oï¼šå–æ¶ˆå…¨éƒ¨çª—å£&lt;/p&gt;
&lt;p&gt;:wqall é€€å‡º&lt;/p&gt;
&lt;h3 id=&quot;18-vimå¯„å­˜å™¨&quot;&gt;1.8 vimå¯„å­˜å™¨&lt;/h3&gt;
&lt;p&gt;æœ‰26ä¸ªå‘½åå¯„å­˜å™¨å’Œ1ä¸ªæ— å‘½åå¯„å­˜å™¨ï¼Œå¸¸å­˜æ”¾ä¸åŒçš„å‰ªè´´ç‰ˆå†…å®¹ï¼Œå¯ä»¥åœ¨åŒä¸€ä¸ªä¸»æœºçš„ä¸åŒä¼šè¯ï¼ˆç»ˆ ç«¯çª—å£ï¼‰é—´å…±äº«&lt;/p&gt;
&lt;p&gt;å¯„å­˜å™¨åç§°aï¼Œb,â€¦,z,æ ¼å¼ï¼š â€å¯„å­˜å™¨ æ”¾åœ¨æ•°å­—å’Œå‘½ä»¤ä¹‹é—´&lt;/p&gt;
&lt;p&gt;èŒƒä¾‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;3&quot;tyy è¡¨ç¤ºå¤åˆ¶3è¡Œåˆ°tå¯„å­˜å™¨ä¸­ ï¼Œæœ«è¡Œæ˜¾ç¤º 3 lines yanked into &quot;t
&quot;tp è¡¨ç¤ºå°†tå¯„å­˜å™¨å†…å®¹ç²˜è´´
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;19-æ ‡è®°å’Œå®macro&quot;&gt;1.9 æ ‡è®°å’Œå®(macro)&lt;/h3&gt;
&lt;p&gt;ma å°†å½“å‰ä½ç½®æ ‡è®°ä¸ºaï¼Œ26ä¸ªå­—æ¯å‡å¯åšæ ‡è®°ï¼Œ mb ã€ mc ç­‰ç­‰&lt;/p&gt;
&lt;p&gt;'a è·³è½¬åˆ°aæ ‡è®°çš„ä½ç½®ï¼Œå®ç”¨çš„æ–‡æ¡£å†…æ ‡è®°æ–¹æ³•ï¼Œæ–‡æ¡£ä¸­è·³è·ƒç¼–è¾‘æ—¶å¾ˆæœ‰ç”¨&lt;/p&gt;
&lt;p&gt;qa å½•åˆ¶å® aï¼Œaä¸ºå®çš„åç§°ï¼Œæœ«è¡Œæç¤ºï¼š recording @a&lt;/p&gt;
&lt;p&gt;q åœæ­¢å½•åˆ¶å®&lt;/p&gt;
&lt;p&gt;@a æ‰§è¡Œå® a&lt;/p&gt;
&lt;p&gt;@@ é‡æ–°æ‰§è¡Œä¸Šæ¬¡æ‰§è¡Œçš„å®&lt;/p&gt;
&lt;h2 id=&quot;2-æ–‡æœ¬å¸¸è§å¤„ç†å·¥å…·&quot;&gt;2 æ–‡æœ¬å¸¸è§å¤„ç†å·¥å…·&lt;/h2&gt;
&lt;h3 id=&quot;21æŸ¥çœ‹æ–‡ä»¶å†…å®¹&quot;&gt;2.1æŸ¥çœ‹æ–‡ä»¶å†…å®¹&lt;/h3&gt;
&lt;h5 id=&quot;211-cat&quot;&gt;2.1.1 cat&lt;/h5&gt;
&lt;p&gt;cat å¯ä»¥æŸ¥çœ‹æ–‡æœ¬å†…å®¹&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;cat [OPTION]... [FILE]...
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¸¸è§é€‰é¡¹&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;-Eï¼šæ˜¾ç¤ºè¡Œç»“æŸç¬¦$&lt;/li&gt;
&lt;li&gt;-Aï¼šæ˜¾ç¤ºæ‰€æœ‰æ§åˆ¶ç¬¦&lt;/li&gt;
&lt;li&gt;-nï¼šå¯¹æ˜¾ç¤ºå‡ºçš„æ¯ä¸€è¡Œè¿›è¡Œç¼–å·&lt;/li&gt;
&lt;li&gt;-bï¼šéç©ºè¡Œç¼–å·&lt;/li&gt;
&lt;li&gt;-sï¼šå‹ç¼©è¿ç»­çš„ç©ºè¡Œæˆä¸€è¡Œ&lt;/li&gt;
&lt;/ul&gt;&lt;h5 id=&quot;212-nl&quot;&gt;2.1.2 nl&lt;/h5&gt;
&lt;p&gt;nlï¼šæ˜¾ç¤ºè¡Œå·ï¼Œç›¸å½“äºcat -b&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;nl [OPTION]... [FILE]...       
&lt;/code&gt;
&lt;/pre&gt;
&lt;h5 id=&quot;213-tac&quot;&gt;2.1.3 tac&lt;/h5&gt;
&lt;p&gt;tacï¼šé€†å‘æ˜¾ç¤ºæ–‡æœ¬å†…å®¹&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;tac [OPTION]... [FILE]...
&lt;/code&gt;
&lt;/pre&gt;
&lt;h5 id=&quot;214-rev&quot;&gt;2.1.4 rev&lt;/h5&gt;
&lt;p&gt;revï¼šå°†åŒä¸€è¡Œçš„å†…å®¹é€†å‘æ˜¾ç¤º&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;rev [option] [file...]
[root@centos8 data]# rev lx.txt 
ba321
[root@centos8 data]# cat lx.txt 
123ab
&lt;/code&gt;
&lt;/pre&gt;
&lt;h5 id=&quot;215-hexdump&quot;&gt;2.1.5 hexdump&lt;/h5&gt;
&lt;p&gt;hexdumpï¼šä»¥åå…­è¿›åˆ¶ï¼Œåè¿›åˆ¶ï¼Œå…«è¿›åˆ¶æˆ–ASCIIæ˜¾ç¤ºæ–‡ä»¶å†…å®¹&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;hexdump [options] file...

-C åå…­è¿›åˆ¶+ASCIIæ˜¾ç¤º
[root@centos8 data]# hexdump -C lx.txt 
00000000  31 32 33 61 62 0a                                 |123ab.|
00000006
[root@centos8 data]# cat lx.txt 
123ab
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;22åˆ†é¡µæŸ¥çœ‹æ–‡æœ¬å†…å®¹&quot;&gt;2.2åˆ†é¡µæŸ¥çœ‹æ–‡æœ¬å†…å®¹&lt;/h3&gt;
&lt;h5 id=&quot;221-more&quot;&gt;2.2.1 more&lt;/h5&gt;
&lt;p&gt;moreï¼šåˆ†é¡µæŸ¥çœ‹æ–‡ä»¶ï¼ˆæ–‡æœ¬ç¿»è‡³å°¾éƒ¨å°±ä¼šè‡ªåŠ¨é€€å‡ºï¼‰&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;more [options] file...
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¸¸è§é€‰é¡¹&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;-d æ˜¾ç¤ºç¿»é¡µä»¥åŠé€€å‡ºæç¤º&lt;/li&gt;
&lt;/ul&gt;&lt;h5 id=&quot;222-less&quot;&gt;2.2.2 less&lt;/h5&gt;
&lt;p&gt;lessï¼šåˆ†é¡µæŸ¥çœ‹æ–‡ä»¶ï¼ˆæ–‡æœ¬æœ«é¡µä¸ä¼šè‡ªåŠ¨é€€å‡ºï¼‰&lt;/p&gt;
&lt;p&gt;less å‘½ä»¤æ˜¯manå‘½ä»¤ä½¿ç”¨çš„åˆ†é¡µå™¨&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@centos8 data]# cat passwd | less
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;23-æ˜¾ç¤ºæ–‡æœ¬å‰æˆ–åè¡Œå†…å®¹&quot;&gt;2.3 æ˜¾ç¤ºæ–‡æœ¬å‰æˆ–åè¡Œå†…å®¹&lt;/h3&gt;
&lt;h5 id=&quot;231-head&quot;&gt;2.3.1 head&lt;/h5&gt;
&lt;p&gt;headï¼šæ˜¾ç¤ºæ–‡ä»¶æˆ–è€…æ ‡å‡†è¾“å…¥å‰é¢å†…å®¹&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;head [OPTION]... [FILE]...
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¸¸è§é€‰é¡¹&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;-c # æŒ‡å®šè·å–å‰#å­—èŠ‚&lt;/li&gt;
&lt;li&gt;-n # æŒ‡å®šè·å–å‰#è¡Œ&lt;/li&gt;
&lt;li&gt;-# åŒä¸Š&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;èŒƒä¾‹&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@centos8 data]# head -2 lx.txt 
1
2
&lt;/code&gt;
&lt;/pre&gt;
&lt;h5 id=&quot;232-tail&quot;&gt;2.3.2 tail&lt;/h5&gt;
&lt;p&gt;tailï¼šå’Œhead ç›¸åï¼ŒæŸ¥çœ‹æ–‡ä»¶æˆ–æ ‡å‡†è¾“å…¥çš„å€’æ•°è¡Œ&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;tail [OPTION]... [FILE]...
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¸¸ç”¨é€‰é¡¹&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;-c # æŒ‡å®šè·å–å#å­—èŠ‚&lt;/li&gt;
&lt;li&gt;-n # æŒ‡å®šè·å–å#è¡Œ&lt;/li&gt;
&lt;li&gt;-# åŒä¸Š&lt;/li&gt;
&lt;li&gt;-f è·Ÿè¸ªæ˜¾ç¤ºæ–‡ä»¶fdæ–°è¿½åŠ çš„å†…å®¹,å¸¸ç”¨æ—¥å¿—ç›‘æ§ï¼Œç›¸å½“äº --follow=descriptor,å½“æ–‡ä»¶åˆ é™¤å†æ–°å»ºåŒå æ–‡ä»¶,å°†æ— æ³•ç»§ç»­è·Ÿè¸ªæ–‡ä»¶&lt;/li&gt;
&lt;li&gt;-F è·Ÿè¸ªæ–‡ä»¶åï¼Œç›¸å½“äº--follow=name --retryï¼Œå½“æ–‡ä»¶åˆ é™¤å†æ–°å»ºåŒåæ–‡ä»¶,å°†å¯ä»¥ç»§ç»­è·Ÿè¸ªæ–‡ä»¶&lt;/li&gt;
&lt;li&gt;tailf ç±»ä¼¼ tail â€“fï¼Œå½“æ–‡ä»¶ä¸å¢é•¿æ—¶å¹¶ä¸è®¿é—®æ–‡ä»¶&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;èŒƒä¾‹&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@centos8 data]# tail -2 /data/lx.txt 
9
10
#åªæŸ¥çœ‹æœ€æ–°å‘ç”Ÿçš„æ—¥å¿—
[root@centos8 data]# tail -fn0 /data/lx.txt 
ab
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;24-cut&quot;&gt;2.4 cut&lt;/h3&gt;
&lt;p&gt;cutï¼šæå–æ–‡æœ¬æ–‡ä»¶æˆ–è€…STDINæ•°æ®æŒ‡å®šåˆ—&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;cut OPTION... [FILE]...
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¸¸ç”¨é€‰é¡¹&lt;/p&gt;
&lt;ul readability=&quot;5&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;-d DELIMITER: æŒ‡æ˜åˆ†éš”ç¬¦ï¼Œé»˜è®¤tab&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;9&quot;&gt;
&lt;p&gt;-f FILEDS:&lt;/p&gt;
&lt;p&gt;â€‹ #: ç¬¬#ä¸ªå­—æ®µ,ä¾‹å¦‚:3&lt;/p&gt;
&lt;p&gt;â€‹ #,#[,#]ï¼šç¦»æ•£çš„å¤šä¸ªå­—æ®µï¼Œä¾‹å¦‚:1,3,6&lt;/p&gt;
&lt;p&gt;â€‹ #-#ï¼šè¿ç»­çš„å¤šä¸ªå­—æ®µ, ä¾‹å¦‚:1-6&lt;/p&gt;
&lt;p&gt;â€‹ æ··åˆä½¿ç”¨ï¼š1-3,7&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;-c æŒ‰å­—ç¬¦åˆ‡å‰²&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;--output-delimiter=STRINGæŒ‡å®šè¾“å‡ºåˆ†éš”ç¬¦&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;èŒƒä¾‹&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;#æŸ¥çœ‹ä¸»æœºIPåœ°å€
[root@centos8 data]# ifconfig | head -2 | tail -1 | tr -s ' ' | cut -d' ' -f3
172.22.73.89
#æ˜¾ç¤ºdfå‘½ä»¤ä¸­ç£ç›˜ä½¿ç”¨ç‡
[root@centos8 data]# df | tr -s ' ' | cut -d' ' -f5 | tr -dc '[0-9\n]'
0
0
[root@centos8 data]# df | tr -s ' ' % | cut -d% -f5 | tr -d [:alpha:]

0
0
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;25-paste&quot;&gt;2.5 paste&lt;/h3&gt;
&lt;p&gt;pasteï¼šåˆå¹¶å¤šä¸ªæ–‡ä»¶åŒè¡Œå·åˆ—åˆ°ä¸€è¡Œ&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;paste [OPTION]... [FILE]...
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¸¸ç”¨é€‰é¡¹&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;-d åˆ†éš”ç¬¦ï¼šæŒ‡å®šåˆ†éš”ç¬¦ï¼Œé»˜è®¤ç”¨TAB&lt;/li&gt;
&lt;li&gt;-s : æ‰€æœ‰è¡Œåˆæˆä¸€è¡Œæ˜¾ç¤º&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;26-æ–‡æœ¬åˆ†æå·¥å…·&quot;&gt;2.6 æ–‡æœ¬åˆ†æå·¥å…·&lt;/h3&gt;
&lt;h5 id=&quot;261-wc&quot;&gt;2.6.1 wc&lt;/h5&gt;
&lt;p&gt;wcï¼šç»Ÿè®¡æ–‡ä»¶çš„è¡Œæ€»æ•°ã€å•è¯æ€»æ•°ã€å­—èŠ‚æ€»æ•°å’Œå­—ç¬¦æ€»æ•°&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;wc [OPTION]... [FILE]...
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¸¸ç”¨é€‰é¡¹&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;-l åªè®¡æ•°è¡Œæ•°&lt;/li&gt;
&lt;li&gt;-w åªè®¡æ•°å•è¯æ€»æ•°&lt;/li&gt;
&lt;li&gt;-L æ˜¾ç¤ºæ–‡ä»¶ä¸­æœ€é•¿è¡Œçš„é•¿åº¦&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@centos8 data]# wc -l lx.txt 
2 lx.txt
&lt;/code&gt;
&lt;/pre&gt;
&lt;h5 id=&quot;262-sort&quot;&gt;2.6.2 sort&lt;/h5&gt;
&lt;p&gt;sortï¼šæŠŠæ•´ç†è¿‡çš„æ–‡æœ¬æ˜¾ç¤ºåœ¨STDOUTï¼Œä¸æ”¹å˜åŸå§‹æ–‡ä»¶&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;sort [OPTION]... [FILE]...
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¸¸ç”¨é€‰é¡¹&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;-r æ‰§è¡Œåæ–¹å‘ï¼ˆç”±ä¸Šè‡³ä¸‹ï¼‰æ•´ç†&lt;/li&gt;
&lt;li&gt;-R éšæœºæ’åº&lt;/li&gt;
&lt;li&gt;-n æ‰§è¡ŒæŒ‰æ•°å­—å¤§å°æ•´ç†&lt;/li&gt;
&lt;li&gt;-u é€‰é¡¹ï¼ˆç‹¬ç‰¹ï¼Œuniqueï¼‰ï¼Œåˆå¹¶é‡å¤é¡¹ï¼Œå³å»é‡&lt;/li&gt;
&lt;li&gt;-t c é€‰é¡¹ä½¿ç”¨cåšä¸ºå­—æ®µç•Œå®šç¬¦&lt;/li&gt;
&lt;li&gt;-k æŒ‡å®šæ’åºçš„å…³é”®å­—&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;èŒƒä¾‹&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;#ç»Ÿè®¡æ—¥å¿—è®¿é—®é‡
[root@centos8 data]#cut -d&quot; &quot; -f1 /var/log/nginx/access_log |sort -u|wc -l
201

[root@centos8 data]# cut -d: -f1,3 passwd | sort -k2 -nr | head -5
user3:2004
user2:2003
user1:1002
user:1001
unbound:996
&lt;/code&gt;
&lt;/pre&gt;
&lt;h5 id=&quot;263-uniq&quot;&gt;2.6.3 uniq&lt;/h5&gt;
&lt;p&gt;uniqï¼šå‘½ä»¤ä»è¾“å…¥ä¸­åˆ é™¤å‰åç›¸æ¥çš„é‡å¤çš„è¡Œ&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;uniq [OPTION]... [INPUT [OUTPUT]]
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¸¸ç”¨é€‰é¡¹&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;-c: æ˜¾ç¤ºæ¯è¡Œé‡å¤å‡ºç°çš„æ¬¡æ•°&lt;/li&gt;
&lt;li&gt;-d: ä»…æ˜¾ç¤ºé‡å¤è¿‡çš„è¡Œ&lt;/li&gt;
&lt;li&gt;-u: ä»…æ˜¾ç¤ºä¸æ›¾é‡å¤çš„è¡Œ&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;uniqå¸¸å’Œsort å‘½ä»¤ä¸€èµ·é…åˆä½¿ç”¨ï¼š&lt;/p&gt;
&lt;p&gt;èŒƒä¾‹&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;#ç»Ÿè®¡æ—¥å¿—è®¿é—®é‡æœ€å¤šçš„è¯·æ±‚
[root@centos8 data]# cut -d&quot; &quot; -f1 access_log | sort | uniq -c | sort -nr | head -1
2834 172.20.0.222

#å–ä¸¤ä¸ªæ–‡ä»¶çš„ç›¸åŒè¡Œ
[root@centos8 data]# cat a.txt b.txt | sort | uniq -d
200
#å–ä¸¤ä¸ªæ–‡ä»¶çš„ä¸åŒè¡Œ
[root@centos8 data]# cat a.txt b.txt | sort | uniq -u
100
123
23
3321
34556
&lt;/code&gt;
&lt;/pre&gt;
&lt;h5 id=&quot;264-diff&quot;&gt;2.6.4 diff&lt;/h5&gt;
&lt;p&gt;diffï¼šä»¤æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶ä¹‹é—´çš„åŒºåˆ«&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;diff [OPTION]... FILES

[root@centos8 data]# cat a.txt b.txt 
a
b
c
a
b
bc
[root@centos8 data]# diff a.txt b.txt 
3c3
&amp;lt; c
---
&amp;gt; bc
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;3-æ­£åˆ™è¡¨è¾¾å¼&quot;&gt;3 æ­£åˆ™è¡¨è¾¾å¼&lt;/h2&gt;
&lt;p&gt;æ­£åˆ™è¡¨è¾¾å¼åˆ†ä¸¤ç±»ï¼š&lt;/p&gt;
&lt;p&gt;â€‹ åŸºæœ¬æ­£åˆ™è¡¨è¾¾å¼ï¼šBRE&lt;/p&gt;
&lt;p&gt;â€‹ æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼ï¼šERE&lt;/p&gt;
&lt;p&gt;â€‹ å¸®åŠ©ï¼šman 7 regex&lt;/p&gt;
&lt;h3 id=&quot;31-åŸºæœ¬æ­£åˆ™è¡¨è¾¾å¼å…ƒå­—ç¬¦&quot;&gt;3.1 åŸºæœ¬æ­£åˆ™è¡¨è¾¾å¼å…ƒå­—ç¬¦&lt;/h3&gt;
&lt;p&gt;ä¸é€šé…ç¬¦ä¸åŒï¼Œé€šé… ç¬¦åŠŸèƒ½æ˜¯ç”¨æ¥å¤„ç†æ–‡ä»¶åï¼Œè€Œæ­£åˆ™è¡¨è¾¾å¼æ˜¯å¤„ç†æ–‡æœ¬å†…å®¹ä¸­å­—ç¬¦&lt;/p&gt;
&lt;h5 id=&quot;311-å­—ç¬¦åŒ¹é…&quot;&gt;3.1.1 å­—ç¬¦åŒ¹é…&lt;/h5&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;.   åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæ±‰å­—
[]   åŒ¹é…æŒ‡å®šèŒƒå›´å†…çš„ä»»æ„å•ä¸ªå­—ç¬¦ï¼Œç¤ºä¾‹ï¼š[wang]   [0-9]   [a-z]   [a-zA-Z]
[^] åŒ¹é…æŒ‡å®šèŒƒå›´å¤–çš„ä»»æ„å•ä¸ªå­—ç¬¦,ç¤ºä¾‹ï¼š[^wang]

[:alnum:] å­—æ¯å’Œæ•°å­—
[:alpha:] ä»£è¡¨ä»»ä½•è‹±æ–‡å¤§å°å†™å­—ç¬¦ï¼Œäº¦å³ A-Z, a-z
[:lower:] å°å†™å­—æ¯,ç¤ºä¾‹:[[:lower:]],ç›¸å½“äº[a-z]
[:upper:] å¤§å†™å­—æ¯
[:blank:] ç©ºç™½å­—ç¬¦ï¼ˆç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦ï¼‰
[:space:] æ°´å¹³å’Œå‚ç›´çš„ç©ºç™½å­—ç¬¦ï¼ˆæ¯”[:blank:]åŒ…å«çš„èŒƒå›´å¹¿ï¼‰
[:cntrl:] ä¸å¯æ‰“å°çš„æ§åˆ¶å­—ç¬¦ï¼ˆé€€æ ¼ã€åˆ é™¤ã€è­¦é“ƒ...ï¼‰
[:digit:] åè¿›åˆ¶æ•°å­—
[:xdigit:]åå…­è¿›åˆ¶æ•°å­—
[:graph:] å¯æ‰“å°çš„éç©ºç™½å­—ç¬¦
[:print:] å¯æ‰“å°å­—ç¬¦
[:punct:] æ ‡ç‚¹ç¬¦å·
&lt;/code&gt;
&lt;/pre&gt;
&lt;h5 id=&quot;312-åŒ¹é…æ¬¡æ•°&quot;&gt;3.1.2 åŒ¹é…æ¬¡æ•°&lt;/h5&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;* åŒ¹é…å‰é¢çš„å­—ç¬¦ä»»æ„æ¬¡ï¼ŒåŒ…æ‹¬0æ¬¡ï¼Œè´ªå©ªæ¨¡å¼ï¼šå°½å¯èƒ½é•¿çš„åŒ¹é…
.* ä»»æ„é•¿åº¦çš„ä»»æ„å­—ç¬¦
\? åŒ¹é…å…¶å‰é¢çš„å­—ç¬¦0æˆ–1æ¬¡,å³:å¯æœ‰å¯æ— 
\+ åŒ¹é…å…¶å‰é¢çš„å­—ç¬¦è‡³å°‘1æ¬¡,å³:è‚¯å®šæœ‰ï¼Œ&amp;gt;=1
\{n\} åŒ¹é…å‰é¢çš„å­—ç¬¦næ¬¡
\{m,n\} åŒ¹é…å‰é¢çš„å­—ç¬¦è‡³å°‘mæ¬¡ï¼Œè‡³å¤šnæ¬¡
\{,n\} åŒ¹é…å‰é¢çš„å­—ç¬¦è‡³å¤šnæ¬¡,&amp;lt;=n
\{n,\} åŒ¹é…å‰é¢çš„å­—ç¬¦è‡³å°‘næ¬¡
&lt;/code&gt;
&lt;/pre&gt;
&lt;h5 id=&quot;313-ä½ç½®é”šå®š&quot;&gt;3.1.3 ä½ç½®é”šå®š&lt;/h5&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;^ è¡Œé¦–é”šå®šï¼Œç”¨äºæ¨¡å¼çš„æœ€å·¦ä¾§
$ è¡Œå°¾é”šå®šï¼Œç”¨äºæ¨¡å¼çš„æœ€å³ä¾§
^PATTERN$ ç”¨äºæ¨¡å¼åŒ¹é…æ•´è¡Œ
^$ ç©ºè¡Œ
^[[:space:]]*$ ç©ºç™½è¡Œ
\&amp;lt; æˆ– \b è¯é¦–é”šå®šï¼Œç”¨äºå•è¯æ¨¡å¼çš„å·¦ä¾§
\&amp;gt; æˆ– \b è¯å°¾é”šå®šï¼Œç”¨äºå•è¯æ¨¡å¼çš„å³ä¾§
\&amp;lt;PATTERN\&amp;gt; åŒ¹é…æ•´ä¸ªå•è¯
&lt;/code&gt;
&lt;/pre&gt;
&lt;h5 id=&quot;314-åˆ†ç»„å…¶å®ƒ&quot;&gt;3.1.4 åˆ†ç»„å…¶å®ƒ&lt;/h5&gt;
&lt;p&gt;&lt;strong&gt;åˆ†ç»„&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åˆ†ç»„ï¼š() å°†å¤šä¸ªå­—ç¬¦æ†ç»‘åœ¨ä¸€èµ·ï¼Œå½“ä½œä¸€ä¸ªæ•´ä½“å¤„ç†ï¼Œå¦‚ï¼š(root)+ åå‘å¼•ç”¨ï¼šåˆ†ç»„æ‹¬å·ä¸­çš„æ¨¡å¼åŒ¹é…åˆ°çš„å†…å®¹ä¼šè¢«æ­£åˆ™è¡¨è¾¾å¼å¼•æ“è®°å½•äºå†…éƒ¨çš„å˜é‡ä¸­ï¼Œè¿™äº›å˜é‡çš„å‘½å æ–¹å¼ä¸º: \1, \2, \3, ...&lt;/p&gt;
&lt;p&gt;\1 è¡¨ç¤ºä»å·¦ä¾§èµ·ç¬¬ä¸€ä¸ªå·¦æ‹¬å·ä»¥åŠä¸ä¹‹åŒ¹é…å³æ‹¬å·ä¹‹é—´çš„æ¨¡å¼æ‰€åŒ¹é…åˆ°çš„å­—ç¬¦&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æˆ–è€…&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;a\|b #aæˆ–b  
C\|cat #Cæˆ–cat  
\(C\|c\)at #Catæˆ–cat
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;32-æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼&quot;&gt;3.2 æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼&lt;/h3&gt;
&lt;p&gt;æ‰©å±•æ­£åˆ™äºæ­£åˆ™ç”¨æ³•åŸºæœ¬ç›¸åŒï¼Œå¤§éƒ¨åˆ†æ‰©å±•æ­£åˆ™ç›¸æ¯”æ­£åˆ™åªæ˜¯å–æ¶ˆäº†åæ–œçº¿&lt;/p&gt;
&lt;h5 id=&quot;321-å­—ç¬¦åŒ¹é…å…ƒå­—ç¬¦&quot;&gt;3.2.1 å­—ç¬¦åŒ¹é…å…ƒå­—ç¬¦&lt;/h5&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;. ä»»æ„å•ä¸ªå­—ç¬¦
[wang] æŒ‡å®šèŒƒå›´çš„å­—ç¬¦
[^wang] ä¸åœ¨æŒ‡å®šèŒƒå›´çš„å­—ç¬¦
[:alnum:] å­—æ¯å’Œæ•°å­—
[:alpha:] ä»£è¡¨ä»»ä½•è‹±æ–‡å¤§å°å†™å­—ç¬¦ï¼Œäº¦å³ A-Z, a-z
[:lower:] å°å†™å­—æ¯,ç¤ºä¾‹:[[:lower:]],ç›¸å½“äº[a-z]
[:upper:] å¤§å†™å­—æ¯
[:blank:] ç©ºç™½å­—ç¬¦ï¼ˆç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦ï¼‰
[:space:] æ°´å¹³å’Œå‚ç›´çš„ç©ºç™½å­—ç¬¦ï¼ˆæ¯”[:blank:]åŒ…å«çš„èŒƒå›´å¹¿ï¼‰
[:cntrl:] ä¸å¯æ‰“å°çš„æ§åˆ¶å­—ç¬¦ï¼ˆé€€æ ¼ã€åˆ é™¤ã€è­¦é“ƒ...ï¼‰
[:digit:] åè¿›åˆ¶æ•°å­—
[:xdigit:]åå…­è¿›åˆ¶æ•°å­—
[:graph:] å¯æ‰“å°çš„éç©ºç™½å­—ç¬¦
[:print:] å¯æ‰“å°å­—ç¬¦
[:punct:] æ ‡ç‚¹ç¬¦å·
&lt;/code&gt;
&lt;/pre&gt;
&lt;h5 id=&quot;322-æ¬¡æ•°åŒ¹é…&quot;&gt;3.2.2 æ¬¡æ•°åŒ¹é…&lt;/h5&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;*   åŒ¹é…å‰é¢å­—ç¬¦ä»»æ„æ¬¡
? 0æˆ–1æ¬¡
+ 1æ¬¡æˆ–å¤šæ¬¡
{n} åŒ¹é…næ¬¡
{m,n} è‡³å°‘mï¼Œè‡³å¤šnæ¬¡
&lt;/code&gt;
&lt;/pre&gt;
&lt;h5 id=&quot;323-ä½ç½®é”šå®š&quot;&gt;3.2.3 ä½ç½®é”šå®š&lt;/h5&gt;
&lt;pre&gt;
&lt;code&gt;^ è¡Œé¦–
$ è¡Œå°¾
\&amp;lt;, \b è¯­é¦–
\&amp;gt;, \b è¯­å°¾
&lt;/code&gt;
&lt;/pre&gt;
&lt;h5 id=&quot;324-åˆ†ç»„å…¶å®ƒ&quot;&gt;3.2.4 åˆ†ç»„å…¶å®ƒ&lt;/h5&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;() åˆ†ç»„
åå‘å¼•ç”¨ï¼š\1, \2, ...
| æˆ–è€…
a|b #aæˆ–b
C|cat #Cæˆ–cat
(C|c)at #Catæˆ–cat
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;4-æ–‡æœ¬å¤„ç†ä¸‰å‰‘å®¢&quot;&gt;4 æ–‡æœ¬å¤„ç†ä¸‰å‰‘å®¢&lt;/h2&gt;
&lt;h3 id=&quot;41-grep&quot;&gt;4.1 grep&lt;/h3&gt;
&lt;p&gt;grepï¼šæ–‡æœ¬æœç´¢å·¥å…·ï¼Œæ ¹æ®ç”¨æˆ·æŒ‡å®šçš„â€œæ¨¡å¼â€å¯¹ç›®æ ‡æ–‡æœ¬é€è¡Œè¿›è¡ŒåŒ¹é…æ£€æŸ¥ï¼›æ‰“å°åŒ¹é…åˆ°çš„è¡Œ&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;grep [OPTIONS] PATTERN [FILE...]
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¸¸ç”¨é€‰é¡¹&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;-v æ˜¾ç¤ºä¸è¢«patternåŒ¹é…åˆ°çš„è¡Œ&lt;/li&gt;
&lt;li&gt;-i å¿½ç•¥å­—ç¬¦å¤§å°å†™&lt;/li&gt;
&lt;li&gt;-n æ˜¾ç¤ºåŒ¹é…çš„è¡Œå·&lt;/li&gt;
&lt;li&gt;-c ç»Ÿè®¡åŒ¹é…çš„è¡Œæ•°&lt;/li&gt;
&lt;li&gt;-f file æ ¹æ®æ¨¡å¼æ–‡ä»¶å¤„ç†&lt;/li&gt;
&lt;li&gt;-E ä½¿ç”¨EREï¼Œç›¸å½“äºegrep&lt;/li&gt;
&lt;li&gt;-o ä»…æ˜¾ç¤ºåŒ¹é…åˆ°çš„å­—ç¬¦ä¸²&lt;/li&gt;
&lt;li&gt;-e å®ç°å¤šä¸ªé€‰é¡¹é—´çš„é€»è¾‘orå…³ç³»,å¦‚ï¼šgrep â€“e â€˜cat â€™ -e â€˜dogâ€™ file&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;èŒƒä¾‹&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;[root@centos8 data]# grep &quot;whoami&quot; /etc/passwd
[root@centos8 data]# grep `whoami` /etc/passwd
root:x:0:0:root:/root:/bin/bash
operator:x:11:0:operator:/root:/sbin/nologin

#æ–‡ä»¶åŒ¹é…
[root@centos8 data]# cat a.txt b.txt 
a
b
c
a
b
d
[root@centos8 data]# grep -f a.txt b.txt 
a
b

#æŸ¥çœ‹ç£ç›˜æœ€é«˜ä½¿ç”¨ç‡
[root@centos8 data]# df | grep ^/dev/vd | tr -s &quot; &quot; % | cut -d% -f5
7

#è®¡ç®—å‡ºæ‰€æœ‰äººå¹´é¾„ä¹‹å’Œ
[root@centos8 data]# cat lx.txt 
xiaoming=20
xiaodong=18
xiaoqiang=22
[root@centos8 data]# cut -d= -f2 lx.txt | tr &quot;\n&quot; + | grep -Eo .*[0-9] | bc
60
[root@centos8 data]# grep -Eo [0-9]+ /data/lx.txt | tr &quot;\n&quot; + | grep -Eo .*[0-9] | bc
60
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç»ƒä¹ &lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;1.ç»Ÿè®¡å‡º/etc/passwdæ–‡ä»¶ä¸­é»˜è®¤å…¶shellä¸ºé/sbin/nologinçš„ç”¨æˆ·ä¸ªæ•°ï¼Œå¹¶å°†ç”¨æˆ·éƒ½æ˜¾ç¤ºå‡ºæ¥
[root@centos8 data]# cat /etc/passwd | grep -v /sbin/nologin | cut -d: -f1
root
user
user1
slackware
user2
user3
2.æŸ¥å‡ºç”¨æˆ·UIDçš„æœ€å¤§å€¼çš„ç”¨æˆ·åã€UIDåŠshellç±»å‹
[root@centos8 data]# cut -d: -f1,3,7 /etc/passwd | sort -k2 -nr | head -1
user3:2004:/bin/bash
3.ç»Ÿè®¡å½“å‰è¿æ¥æœ¬æœºçš„æ¯ä¸ªè¿œç¨‹ä¸»æœºIPçš„è¿æ¥æ•°ï¼Œå¹¶æŒ‰ä»å°åˆ°å¤§æ’åº
[root@centos8 data]# ss -nt | grep ^ESTAB | tr -s &quot; &quot; : | cut -d: -f6 | sort -nr
110.152.191.166
100.100.30.25
4.ç¼–å†™è„šæœ¬disk.sh,æ˜¾ç¤ºå½“å‰ç¡¬ç›˜åˆ†åŒºä¸­ç©ºé—´åˆ©ç”¨ç‡æœ€å¤§çš„å€¼
[root@centos8 data]# cat lx.txt 
#/bin/bash!
df | grep /dev/vd | tr -s &quot; &quot; % | cut -d% -f5
5.ç¼–å†™è„šæœ¬systeminfo.sh,æ˜¾ç¤ºå½“å‰ä¸»æœºç³»ç»Ÿä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼šä¸»æœºåï¼Œipv4åœ°å€ï¼Œæ“ä½œç³»ç»Ÿç‰ˆæœ¬ï¼Œå†…æ ¸ç‰ˆæœ¬ï¼Œcpuå‹å·ï¼Œå†…å­˜å¤§å°ï¼Œç¡¬ç›˜å¤§å°
  1 #/bin/bash!
  2 echo ä¸»æœºå`hostname`
  3 echo åœ°å€`ifconfig | head -3 | tail -2 | tr -s &quot; &quot; % | cut -d% -f3 | head -1`
  4 echo æ“ä½œç³»ç»Ÿç‰ˆæœ¬`cat /etc/redhat-release`
  5 echo å†…æ ¸ç‰ˆæœ¬`uname -r`
  6 echo cpuå‹å·`cat /proc/cpuinfo | grep &quot;model name&quot; | cut -d: -f2`
  7 echo å†…å­˜å¤§å° &quot;`free -h | grep ^Mem | tr -s &quot; &quot; % | cut -d% -f2`&quot;
  8 echo ç¡¬ç›˜å¤§å°`lsblk | grep 'vda\&amp;gt;' | grep -Eo '[0-9]+[[:upper:]]'`
&lt;/code&gt;
&lt;/pre&gt;</description>
<pubDate>Sat, 02 Jan 2021 15:37:00 +0000</pubDate>
<dc:creator>bestvae</dc:creator>
<og:description>1.VIM 1.1vimç®€ä»‹ vimæ˜¯ä¸€æ¬¾å¼ºå¤§çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå®ƒå’Œ vi ä½¿ç”¨æ–¹æ³•ä¸€è‡´ï¼Œä½†åŠŸèƒ½æ›´ä¸ºå¼ºå¤§ã€‚å®˜ç½‘ï¼šwww.vim.orgã€ä¸­æ–‡æ‰‹å†Œï¼šhttp://vimcdoc.sourceforge.ne</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/bestvae/p/14224477.html</dc:identifier>
</item>
<item>
<title>C++ stringçš„å†…éƒ¨ç©¶ç«Ÿæ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ - RioTian</title>
<link>http://www.cnblogs.com/RioTian/p/14224419.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/RioTian/p/14224419.html</guid>
<description>&lt;p&gt;åœ¨Cè¯­è¨€ä¸­ï¼Œæœ‰ä¸¤ç§æ–¹å¼è¡¨ç¤ºå­—ç¬¦ä¸²ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä¸€ç§æ˜¯ç”¨å­—ç¬¦æ•°ç»„æ¥å®¹çº³å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚&lt;code&gt;char str[10] = &quot;abc&quot;&lt;/code&gt;ï¼Œè¿™æ ·çš„å­—ç¬¦ä¸²æ˜¯å¯è¯»å†™çš„ï¼›&lt;/li&gt;
&lt;li&gt;ä¸€ç§æ˜¯ä½¿ç”¨å­—ç¬¦ä¸²å¸¸é‡ï¼Œä¾‹å¦‚&lt;code&gt;char *str = &quot;abc&quot;&lt;/code&gt;ï¼Œè¿™æ ·çš„å­—ç¬¦ä¸²åªèƒ½è¯»ï¼Œä¸èƒ½å†™ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä¸¤ç§å½¢å¼æ€»æ˜¯ä»¥&lt;code&gt;\0&lt;/code&gt;ä½œä¸ºç»“æŸæ ‡å¿—ã€‚&lt;/p&gt;
&lt;p&gt;C++ string ä¸å®ƒä»¬åœ¨Cè¯­è¨€ä¸­çš„å‰èº«æˆªç„¶ä¸åŒã€‚é¦–å…ˆï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸åŒç‚¹ï¼ŒC++ string éšè—äº†å®ƒæ‰€åŒ…å«çš„å­—ç¬¦åºåˆ—çš„ç‰©ç†è¡¨ç¤ºã€‚ç¨‹åºè®¾è®¡äººå‘˜ä¸å¿…å…³å¿ƒæ•°ç»„çš„ç»´æ•°æˆ–&lt;code&gt;\0&lt;/code&gt;æ–¹é¢çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;string åœ¨å†…éƒ¨å°è£…äº†ä¸å†…å­˜å’Œå®¹é‡æœ‰å…³çš„ä¿¡æ¯ã€‚å…·ä½“åœ°è¯´ï¼ŒC++ string å¯¹è±¡çŸ¥é“è‡ªå·±åœ¨å†…å­˜ä¸­çš„å¼€å§‹ä½ç½®ã€åŒ…å«çš„å­—ç¬¦åºåˆ—ä»¥åŠå­—ç¬¦åºåˆ—é•¿åº¦ï¼›å½“å†…å­˜ç©ºé—´ä¸è¶³æ—¶ï¼Œstring è¿˜ä¼šè‡ªåŠ¨è°ƒæ•´ï¼Œè®©å†…å­˜ç©ºé—´å¢é•¿åˆ°è¶³ä»¥å®¹çº³ä¸‹æ‰€æœ‰å­—ç¬¦åºåˆ—çš„å¤§å°ã€‚&lt;/p&gt;
&lt;p&gt;C++ string çš„è¿™ç§åšæ³•ï¼Œæå¤§åœ°å‡å°‘äº†Cè¯­è¨€ç¼–ç¨‹ä¸­ä¸‰ç§æœ€å¸¸è§ä¸”æœ€å…·ç ´åæ€§çš„é”™è¯¯ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æ•°ç»„è¶Šç•Œï¼›&lt;/li&gt;
&lt;li&gt;é€šè¿‡æœªè¢«åˆå§‹åŒ–æˆ–è€…è¢«èµ‹ä»¥é”™è¯¯å€¼çš„æŒ‡é’ˆæ¥è®¿é—®æ•°ç»„å…ƒç´Šï¼›&lt;/li&gt;
&lt;li&gt;é‡Šæ”¾äº†æ•°ç»„æ‰€å å†…å­˜ï¼Œä½†æ˜¯ä»ç„¶ä¿ç•™äº†â€œæ‚¬ç©ºâ€æŒ‡é’ˆã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;C++ æ ‡å‡†æ²¡æœ‰å®šä¹‰ string ç±»çš„å†…å­˜å¸ƒå±€ï¼Œå„ä¸ªç¼–è¯‘å™¨å‚å•†å¯ä»¥æä¾›ä¸åŒçš„å®ç°ï¼Œä½†å¿…é¡»ä¿è¯ string çš„è¡Œä¸ºä¸€è‡´ã€‚é‡‡ç”¨è¿™ç§åšæ³•æ˜¯ä¸ºäº†è·å¾—è¶³å¤Ÿçš„çµæ´»æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ç‰¹åˆ¥æ˜¯ï¼ŒC++ æ ‡å‡†æ²¡æœ‰å®šä¹‰åœ¨å“ªç§ç¡®åˆ‡çš„æƒ…å†µä¸‹åº”è¯¥ä¸º string å¯¹è±¡åˆ†é…å†…å­˜ç©ºé—´æ¥å­˜å‚¨å­—ç¬¦åºåˆ—ã€‚string å†…å­˜åˆ†é…è§„åˆ™æ˜ç¡®è§„å®šï¼šå…è®¸ä½†ä¸è¦æ±‚ä»¥å¼•ç”¨è®¡æ•°ï¼ˆreference countingï¼‰çš„æ–¹å¼å®ç°ã€‚ä½†æ— è®ºæ˜¯å¦é‡‡ç”¨å¼•ç”¨è®¡æ•°ï¼Œå…¶è¯­ä¹‰éƒ½å¿…é¡»ä¸€è‡´ã€‚&lt;/p&gt;
&lt;p&gt;C++ çš„è¿™ç§åšæ³•å’ŒCè¯­è¨€ä¸åŒï¼Œåœ¨Cè¯­è¨€ä¸­ï¼Œæ¯ä¸ªå­—ç¬¦å‹æ•°ç»„éƒ½å æ®å„è‡ªçš„ç‰©ç†å­˜å‚¨åŒºã€‚åœ¨ C++ ä¸­ï¼Œç‹¬ç«‹çš„å‡ ä¸ª string å¯¹è±¡å¯ä»¥å æ®ä¹Ÿå¯ä»¥ä¸å æ®å„è‡ªç‰¹å®šçš„ç‰©ç†å­˜å‚¨åŒºï¼Œä½†æ˜¯ï¼Œå¦‚æœé‡‡ç”¨å¼•ç”¨è®¡æ•°é¿å…äº†ä¿å­˜åŒä¸€æ•°æ®çš„æ‹·è´å‰¯æœ¬ï¼Œé‚£ä¹ˆå„ä¸ªç‹¬ç«‹çš„å¯¹è±¡ï¼ˆåœ¨å¤„ç†ä¸Šï¼‰å¿…é¡»çœ‹èµ·æ¥å¹¶è¡¨ç°å¾—å°±åƒç‹¬å åœ°æ‹¥æœ‰å„è‡ªçš„å­˜å‚¨åŒºä¸€æ ·ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cpp&quot;&gt;// #include&amp;lt;bits/stdc++.h&amp;gt;
#include &amp;lt;iostream&amp;gt;
#include &amp;lt;string&amp;gt;
using namespace std;

int main() {
    string s1(&quot;12345&quot;);
    string s2 = s1;
    cout &amp;lt;&amp;lt; (s1 == s2) &amp;lt;&amp;lt; endl;
    s1[0] = '6';
    cout &amp;lt;&amp;lt; &quot;s1 = &quot; &amp;lt;&amp;lt; s1 &amp;lt;&amp;lt; endl;  // 62345
    cout &amp;lt;&amp;lt; &quot;s2 = &quot; &amp;lt;&amp;lt; s2 &amp;lt;&amp;lt; endl;  // 12345
    cout &amp;lt;&amp;lt; (s1 == s2) &amp;lt;&amp;lt; endl;

    return 0;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨ GCC ä¸‹çš„è¿è¡Œç»“æœï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cpp&quot;&gt;1
s1 = 62345
s2 = 12345
0
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åªæœ‰å½“å­—ç¬¦ä¸²è¢«ä¿®æ”¹çš„æ—¶å€™æ‰åˆ›å»ºå„è‡ªçš„æ‹·è´ï¼Œè¿™ç§å®ç°æ–¹å¼ç§°ä¸ºå†™æ—¶&lt;strong&gt;å¤åˆ¶&lt;/strong&gt;ï¼ˆcopy-on-writeï¼‰ç­–ç•¥ã€‚å½“å­—ç¬¦ä¸²åªæ˜¯ä½œä¸º&lt;strong&gt;å€¼å‚æ•°&lt;/strong&gt;ï¼ˆvalue parameterï¼‰æˆ–åœ¨å…¶ä»–åªè¯»æƒ…å½¢ä¸‹ä½¿ç”¨ï¼Œè¿™ç§æ–¹æ³•èƒ½å¤ŸèŠ‚çœæ—¶é—´å’Œç©ºé—´ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è®ºä¸€ä¸ªåº“çš„å®ç°æ˜¯ä¸æ˜¯é‡‡ç”¨å¼•ç”¨è®¡æ•°ï¼Œå®ƒå¯¹ &lt;strong&gt;string ç±»&lt;/strong&gt;çš„ä½¿ç”¨è€…æ¥è¯´éƒ½åº”è¯¥æ˜¯é€æ˜çš„ã€‚é—æ†¾çš„æ˜¯ï¼Œæƒ…å†µå¹¶ä¸æ€»æ˜¯è¿™æ ·ã€‚åœ¨å¤šçº¿ç¨‹ç¨‹åºä¸­ï¼Œå‡ ä¹ä¸å¯èƒ½å®‰å…¨åœ°ä½¿ç”¨å¼•ç”¨è®¡æ•°æ¥å®ç°ã€‚&lt;/p&gt;
</description>
<pubDate>Sat, 02 Jan 2021 15:21:00 +0000</pubDate>
<dc:creator>RioTian</dc:creator>
<og:description>åœ¨Cè¯­è¨€ä¸­ï¼Œæœ‰ä¸¤ç§æ–¹å¼è¡¨ç¤ºå­—ç¬¦ä¸²ï¼š ä¸€ç§æ˜¯ç”¨å­—ç¬¦æ•°ç»„æ¥å®¹çº³å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚char str[10] = &amp;amp;quot;abc&amp;amp;quot;ï¼Œè¿™æ ·çš„å­—ç¬¦ä¸²æ˜¯å¯è¯»å†™çš„ï¼› ä¸€ç§æ˜¯ä½¿ç”¨å­—ç¬¦ä¸²å¸¸é‡ï¼Œä¾‹å¦‚</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/RioTian/p/14224419.html</dc:identifier>
</item>
<item>
<title>RocketMQ(å)ï¼šæ•°æ®å­˜å‚¨æ¨¡å‹è®¾è®¡ä¸å®ç° - ç­‰ä½ å½’å»æ¥</title>
<link>http://www.cnblogs.com/yougewe/p/14224366.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/yougewe/p/14224366.html</guid>
<description>&lt;p&gt;ã€€ã€€æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œè¯´æ˜¯ä¸€ä¸ªé€šä¿¡ç»„ä»¶ä¹Ÿæ²¡æœ‰é”™ï¼Œå› ä¸ºå®ƒçš„æœ¬èŒå·¥ä½œæ˜¯åšæ¶ˆæ¯çš„ä¼ é€’ã€‚ç„¶è€Œè¦åšåˆ°é«˜æ•ˆçš„æ¶ˆæ¯ä¼ é€’ï¼Œå¾ˆé‡è¦çš„ä¸€ç‚¹æ˜¯æ•°æ®ç»“æ„ï¼Œæ•°æ®ç»“æ„è®¾è®¡çš„å¥½åï¼Œä¸€å®šç¨‹åº¦ä¸Šå†³å®šäº†è¯¥æ¶ˆæ¯ç»„ä»¶çš„æ€§èƒ½ä»¥åŠèƒ½åŠ›ä¸Šé™ã€‚&lt;/p&gt;

&lt;h3&gt;1. æ¶ˆæ¯ä¸­é—´ä»¶çš„å®ç°æ–¹å¼æ¦‚è¿°&lt;/h3&gt;
&lt;p&gt;ã€€ã€€æ¶ˆæ¯ä¸­é—´ä»¶å®ç°èµ·æ¥è‡ªç„¶æ˜¯å¾ˆéš¾çš„ï¼Œä½†æˆ‘ä»¬å¯ä»¥ä»æŸäº›è§’åº¦ï¼Œç®€å•äº†è¯´è¯´å®ç°æ€è·¯ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€å®ƒçš„æœ€åŸºæœ¬çš„ä¸¤ä¸ªåŠŸèƒ½æ¥å£ä¸ºï¼šæ¥æ”¶æ¶ˆæ¯çš„å‘é€ï¼ˆproduceï¼‰, æ¶ˆæ¯çš„æ¶ˆè´¹ï¼ˆconsumeï¼‰. å°±åƒä¸€ä¸ªé‚®é€’å‘˜ä¸€æ ·ï¼Œç»è¿‡å®ƒä¸ä¸ç»è¿‡å®ƒå®è´¨æ€§çš„ä¸œè¥¿æ²¡æœ‰å˜åŒ–ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªä¸­ä»‹ï¼ˆå…¶ä»–åŠŸèƒ½æ•ˆåº”ï¼Œå’±ä»¬æŠ›å´ä¸è¯´ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä¸ºäº†å®ç°è¿™ä¸¤ä¸ªåŸºæœ¬çš„æ¥å£ï¼Œæˆ‘ä»¬å°±å¾—å®ç°ä¸¤ä¸ªæœ€åŸºæœ¬çš„èƒ½åŠ›ï¼šæ¶ˆæ¯çš„å­˜å‚¨å’ŒæŸ¥è¯¢ã€‚å­˜å‚¨å³æ˜¯æ¥æ”¶å‘é€è¿‡æ¥çš„æ¶ˆæ¯ï¼ŒæŸ¥è¯¢åˆ™åŒ…æ‹¬ä¸šåŠ¡æŸ¥è¯¢ä¸ç³»ç»Ÿè‡ªè¡ŒæŸ¥è¯¢æ¨é€ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬å…ˆæ¥çœ‹ç¬¬ä¸€ä¸ªç‚¹ï¼šæ¶ˆæ¯çš„å­˜å‚¨ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ç›´æ¥åŸºäºå†…å­˜çš„æ¶ˆæ¯ç»„ä»¶ï¼Œå¯ä»¥åšåˆ°éå¸¸é«˜æ•ˆçš„ä¼ é€’ï¼ŒåŸºæœ¬ä¸Šæ­¤æ—¶çš„æ¶ˆæ¯ä¸­é—´ä»¶å°±æ˜¯ç”±å‡ ä¸ªå†…å­˜é˜Ÿåˆ—ç»„æˆï¼Œåªè¦ä¿è¯è¿™å‡ ä¸ªé˜Ÿåˆ—çš„å®‰å…¨æ€§å’Œå®æ—¶æ€§ï¼Œå°±å¯ä»¥å·¥ä½œå¾—å¾ˆå¥½äº†ã€‚ç„¶è€ŒåŸºäºå†…å­˜åˆ™å¿…ç„¶æ„å‘³ç€èƒ½åŠ›æœ‰é™æˆ–è€…æˆæœ¬ç›¸å½“é«˜ï¼Œæ‰€ä»¥è¿™æ ·çš„è®¾è®¡é€‚ç”¨èŒƒå›´å¾—ç»“åˆä¸šåŠ¡ç°çŠ¶åšä¸‹æ¯”å¯¹ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€å¦ä¸€ä¸ªå°±æ˜¯åŸºäºç£ç›˜çš„æ¶ˆæ¯ç»„ä»¶ï¼Œç£ç›˜å¾€å¾€æ„å‘³ç€æ›´å¤§çš„å­˜å‚¨ç©ºé—´ï¼Œæˆ–è€…æŸç§ç¨‹åº¦ä¸Šæ„å‘³ç€æ— é™çš„å­˜å‚¨ç©ºé—´ï¼Œå› ä¸ºæ¯•ç«Ÿæ‰€æœ‰çš„å¤§æ•°æ®éƒ½æ˜¯å­˜æ”¾åœ¨ç£ç›˜ä¸Šçš„ï¼Œå‰ææ˜¯ç³»ç»Ÿéœ€è¦åè°ƒå¥½å„ç£ç›˜é—´çš„æ•°æ®å…³ç³»ã€‚ç„¶è€Œï¼Œç£ç›˜ä¹Ÿæ„å‘³ç€æ€§èƒ½çš„ä¸‹é™ï¼Œæ•°æ®å­˜æ”¾èµ·æ¥æ›´éº»çƒ¦ã€‚ä½†rocketmqå€ŸåŠ©äºæ“ä½œç³»ç»Ÿçš„pagecacheå’Œmmapä»¥åŠé¡ºåºå†™æœºåˆ¶ï¼Œåœ¨è¯»å†™æ€§èƒ½æ–¹é¢å·²ç»éå¸¸ä¼˜åŒ–ã€‚æ‰€ä»¥ï¼Œæ›´é‡è¦çš„æ˜¯å¦‚ä½•è®¾è®¡å¥½ç£ç›˜çš„æ•°æ®æ®ç»“æ„ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶åæ˜¯ç¬¬äºŒä¸ªç‚¹ï¼šæ¶ˆæ¯çš„æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€å…·ä½“å¦‚ä½•æŸ¥è¯¢ï¼Œåˆ™å¿…ç„¶ä¾èµ–äºå¦‚ä½•å­˜å‚¨ï¼Œä¸ä¸Šé¢çš„åŸç†ç±»ä¼¼ï¼Œä¸å¿…ç»†è¯´ã€‚ä½†ä¸€èˆ¬ä¼šæœ‰ä¸¤ç§æ¶ˆè´¹æ¨¡å‹ï¼šæ¨é€æ¶ˆæ¯æ¨¡å‹å’Œæ‹‰å–æ¶ˆè´¹æ¨¡å‹ã€‚å³æ˜¯æ¶ˆæ¯ä¸­é—´ä»¶ä¸»åŠ¨å‘æ¶ˆè´¹è€…æ¨é€æ¶ˆæ¯ï¼Œæˆ–è€…æ˜¯æ¶ˆè´¹è€…ä¸»åŠ¨æŸ¥è¯¢æ¶ˆæ¯ä¸­é—´ä»¶ã€‚äºŒè€…ä¹Ÿå„æœ‰ä¼˜åŠ£ï¼Œæ¨é€æ¨¡å‹ä¸€èˆ¬å¯ä»¥ä½“ç°å‡ºæ›´å¼ºçš„å®æ—¶æ€§ä»¥åŠä¿æŒæ¯”è¾ƒå°çš„serverç«¯å­˜å‚¨ç©ºé—´å ç”¨ï¼Œä½†æ˜¯ä¹Ÿå¸¦æ¥äº†éå¸¸å¤§çš„å¤æ‚åº¦ï¼Œå®ƒéœ€è¦å¤„ç†å„ç§æ¶ˆè´¹å¼‚å¸¸ã€é‡è¯•ã€è´Ÿè½½å‡è¡¡ã€ä¸Šä¸‹çº¿ï¼Œè¿™ä¸æ˜¯ä»¶å°äº‹ã€‚è€Œæ‹‰å–æ¨¡å‹åˆ™ä¼šå¯¹æ¶ˆæ¯ä¸­é—´ä»¶å‡è½»è®¸å¤šå·¥ä½œï¼Œä¸»è¦æ˜¯çœå»äº†å¼‚å¸¸ã€é‡è¯•ã€è´Ÿè½½å‡è¡¡ç±»çš„å·¥ä½œï¼Œå°†è¿™äº›å·¥ä½œè½¬å«åˆ°æ¶ˆè´¹è€…å®¢æˆ·ç«¯ä¸Šã€‚ä½†ä¸æ­¤åŒæ—¶ï¼Œä¹Ÿä¼šå¯¹æ¶ˆæ¯ä¸­é—´ä»¶æå‡ºæ›´å¤šè¦æ±‚ï¼Œå³è¦æ±‚èƒ½å¤Ÿä¿ç•™è¶³å¤Ÿé•¿æ—¶é—´çš„æ•°æ®ï¼Œä»¥ä¾¿æ‰€æœ‰åˆæ³•çš„æ¶ˆè´¹è€…éƒ½å¯ä»¥è¿›è¡Œæ¶ˆè´¹ã€‚è€Œå¯¹äºå®¢æˆ·ç«¯ï¼Œåˆ™ä¹Ÿéœ€è¦ä¸­é—´ä»¶æä¾›ç›¸åº”çš„ä¾¿åˆ©ï¼Œä»¥ä¾¿å¯ä»¥å®ç°å®¢æˆ·ç«¯çš„åŸºæœ¬è¯‰æ±‚ï¼Œæ¯”å¦‚æ¶ˆè´¹ç»„ç®¡ç†ï¼Œä¸Šä¸‹çº¿ç®¡ç†ä»¥åŠæœ€åŸºæœ¬çš„é«˜æ•ˆæŸ¥è¯¢èƒ½åŠ›ã€‚&lt;/p&gt;

&lt;h3&gt;2. rocketmqå­˜å‚¨æ¨¡å‹è®¾è®¡æ¦‚è¿°&lt;/h3&gt;
&lt;p&gt;ã€€ã€€å¾ˆæ˜æ˜¾ï¼Œrocketmqçš„åˆè¡·å°±æ˜¯è¦åº”å¯¹å¤§æ•°æ®çš„æ¶ˆæ¯ä¼ é€’ï¼Œæ‰€ä»¥å…¶å¿…ç„¶æ˜¯åŸºäºç£ç›˜çš„å­˜å‚¨ã€‚è€Œå…¶æ€§èƒ½å¦‚ä¸ŠèŠ‚æ‰€è¿°ï¼Œå…¶åˆ©ç”¨æ“ä½œç³»ç»Ÿçš„pagecacheå’Œmmapæœºåˆ¶ï¼Œè¯»å†™æ€§èƒ½éå¸¸å¥½ï¼Œå¦å¤–ä»–ä½¿ç”¨é¡ºåºå†™æœºåˆ¶ï¼Œä½¿æ™®é€šç£ç›˜ä¹Ÿèƒ½ä½“ç°å‡ºéå¸¸é«˜çš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä½†æ˜¯ï¼Œä»¥ä¸Šå‡ é¡¹ï¼Œåªæ˜¯ä¸ºé«˜æ€§èƒ½æä¾›äº†å¿…è¦çš„å‰æã€‚ä½†å…·ä½“å¦‚ä½•åˆ©ç”¨ï¼Œè¿˜éœ€è¦ä»é‡è®¾è®¡ã€‚æ¯•ç«Ÿï¼Œå¿«ä¸æ˜¯ç›®çš„ï¼Œå®ç°éœ€æ±‚æ‰æ˜¯æ„ä¹‰ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€rocketmqä¸­ä¸»è¦æœ‰å››ç§å­˜å‚¨æ–‡ä»¶ï¼šcommitlog æ•°æ®æ–‡ä»¶, consumequeue æ¶ˆè´¹é˜Ÿåˆ—æ–‡ä»¶, index ç´¢å¼•æ–‡ä»¶, å…ƒæ•°æ®ä¿¡æ¯æ–‡ä»¶ã€‚æœ€åä¸€ä¸ªå…ƒæ•°æ®ä¿¡æ¯æ–‡ä»¶æ¯”è¾ƒç®€å•ï¼Œå› å…¶æ•°æ®é‡å°ï¼Œæ–¹ä¾¿æ“ä½œã€‚ä½†é’ˆå¯¹å‰ä¸‰ä¸ªæ–‡ä»¶ï¼Œéƒ½ä¼šæ¶‰åŠå¤§é‡çš„æ•°æ®é—®é¢˜ï¼Œæ‰€ä»¥å¿…ç„¶å¥½è¯¦ç»†è®¾è®¡å…¶ç»“æ„ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä»æ€»ä½“ä¸Šæ¥è¯´ï¼Œrocketmqéƒ½éµä»å®šé•¿æ•°æ®ç»“æ„å­˜å‚¨ï¼Œå®šé•¿çš„æœ€å¤§å¥½å¤„å°±åœ¨äºå¯ä»¥å¿«é€Ÿå®šä½ä½ç½®ï¼Œè¿™æ˜¯å…¶é«˜æ€§èƒ½çš„å‡ºå‘ç‚¹ã€‚å®šé•¿æ¨¡å‹ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä»æ ¸å¿ƒä¸Šæ¥è¯´ï¼Œcommitlogæ–‡ä»¶ä¿å­˜äº†æ‰€æœ‰åŸå§‹æ•°æ®ï¼Œæ‰€æœ‰æ•°æ®æƒ³è¦è·å–ï¼Œéƒ½èƒ½ä»æˆ–ä¹Ÿåªèƒ½ä»commitlogæ–‡ä»¶ä¸­è·å–ï¼Œç”±äºcommitlogæ–‡ä»¶ä¿æŒäº†é¡ºåºå†™çš„ç‰¹æ€§ï¼Œæ‰€ä»¥å…¶æ€§èƒ½éå¸¸é«˜ã€‚è€Œå› æ•°æ®åªæœ‰ä¸€ä»½ï¼Œæ‰€ä»¥ä¹Ÿå°±ä»æ ¹æœ¬ä¸Šä¿è¯äº†æ•°æ®ä¸€è‡´æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€è€Œæ ¹æ®å„ä¸šåŠ¡åœºæ™¯ï¼Œè¡ç”Ÿå‡ºäº†consumequeueå’Œindexæ–‡ä»¶ï¼Œå³ consumequeue æ–‡ä»¶æ˜¯ä¸ºäº†æ¶ˆè´¹è€…èƒ½å¤Ÿå¿«é€Ÿè·å–åˆ°ç›¸åº”æ¶ˆæ¯è€Œè®¾è®¡ï¼Œè€Œindexæ–‡ä»¶åˆ™ä¸ºäº†èƒ½å¤Ÿå¿«é€Ÿæœç´¢åˆ°æ¶ˆæ¯è€Œè®¾è®¡ã€‚ä»åŠŸèƒ½ä¸Šè¯´ï¼Œconsumequeueå’Œindexæ–‡ä»¶éƒ½æ˜¯ç´¢å¼•æ–‡ä»¶ï¼Œåªæ˜¯ç´¢å¼•çš„ç»´åº¦ä¸åŒã€‚consumequeue æ˜¯ä»¥topicå’ŒqueueIdç»´åº¦è¿›è¡Œåˆ’åˆ†çš„ç´¢å¼•ï¼Œè€Œindex åˆ™æ˜¯ä»¥æ—¶é—´å’Œkeyä½œä¸ºåˆ’åˆ†çš„ç´¢å¼•ã€‚æœ‰äº†è¿™ä¸¤ä¸ªç´¢å¼•ä¹‹åï¼Œå°±å¯ä»¥ä¸ºå„è‡ªçš„ä¸šåŠ¡åœºæ™¯ï¼Œæä¾›é«˜æ€§èƒ½çš„æœåŠ¡äº†ã€‚å…·ä½“å…¶å¦‚ä½•å®ç°ç´¢å¼•ï¼Œæˆ‘ä»¬ç¨åå†è®²ï¼&lt;/p&gt;
&lt;p&gt;ã€€ã€€commitlog vs consumequeue çš„å­˜å‚¨æ¨¡å‹å¦‚ä¸‹:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/830731/202101/830731-20210102225705987-61834568.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;

&lt;h3&gt;3. commitlogæ–‡ä»¶çš„å­˜å‚¨ç»“æ„&lt;/h3&gt;
&lt;p&gt;ã€€ã€€ç›´æ¥é¡ºåºå†™çš„å½¢å¼å­˜å‚¨ï¼Œæ¯ä¸ªæ–‡ä»¶è®¾å®šå›ºå®šå¤§å°ï¼Œé»˜è®¤æ˜¯1Gå³: 1073741824 bytes. å†™æ»¡ä¸€ä¸ªæ–‡ä»¶åï¼Œæ–°å¼€ä¸€ä¸ªæ–‡ä»¶å†™å…¥ã€‚æ–‡ä»¶åå°±æ˜¯å…¶å­˜å‚¨çš„èµ·å§‹æ¶ˆæ¯åç§»é‡ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€å®˜æ–¹æè¿°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;9&quot;&gt;
&lt;p&gt;CommitLogï¼šæ¶ˆæ¯ä¸»ä½“ä»¥åŠå…ƒæ•°æ®çš„å­˜å‚¨ä¸»ä½“ï¼Œå­˜å‚¨Producerç«¯å†™å…¥çš„æ¶ˆæ¯ä¸»ä½“å†…å®¹,æ¶ˆæ¯å†…å®¹ä¸æ˜¯å®šé•¿çš„ã€‚å•ä¸ªæ–‡ä»¶å¤§å°é»˜è®¤1G ï¼Œæ–‡ä»¶åé•¿åº¦ä¸º20ä½ï¼Œå·¦è¾¹è¡¥é›¶ï¼Œå‰©ä½™ä¸ºèµ·å§‹åç§»é‡ï¼Œæ¯”å¦‚00000000000000000000ä»£è¡¨äº†ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼Œèµ·å§‹åç§»é‡ä¸º0ï¼Œæ–‡ä»¶å¤§å°ä¸º1G=1073741824ï¼›å½“ç¬¬ä¸€ä¸ªæ–‡ä»¶å†™æ»¡äº†ï¼Œç¬¬äºŒä¸ªæ–‡ä»¶ä¸º00000000001073741824ï¼Œèµ·å§‹åç§»é‡ä¸º1073741824ï¼Œä»¥æ­¤ç±»æ¨ã€‚æ¶ˆæ¯ä¸»è¦æ˜¯é¡ºåºå†™å…¥æ—¥å¿—æ–‡ä»¶ï¼Œå½“æ–‡ä»¶æ»¡äº†ï¼Œå†™å…¥ä¸‹ä¸€ä¸ªæ–‡ä»¶ï¼›&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ã€€ã€€å½“ç»™å®šä¸€ä¸ªåç§»é‡ï¼Œè¦æŸ¥æ‰¾æŸæ¡æ¶ˆæ¯æ—¶ï¼Œåªéœ€åœ¨æ‰€æœ‰çš„commitlogæ–‡ä»¶ä¸­ï¼Œæ ¹æ®å…¶åå­—å³å¯çŸ¥é“åç§»çš„æ•°æ®ä¿¡æ¯æ˜¯å¦å­˜åœ¨å…¶ä¸­ï¼Œå³ç›¸å½“äºå¯åŸºäºæ–‡ä»¶å®ç°ä¸€ä¸ªäºŒåˆ†æŸ¥æ‰¾ï¼Œå®é™…ä¸Šrocketmqå®ç°å¾—æ›´ç®€æ´ï¼Œç›´æ¥ä¸€æ¬¡æ€§æŸ¥æ‰¾å³å¯å®šä½ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;//&lt;/span&gt;&lt;span&gt; org.apache.rocketmq.store.CommitLog#getData&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; SelectMappedBufferResult getData(&lt;span&gt;final&lt;/span&gt; &lt;span&gt;long&lt;/span&gt; offset, &lt;span&gt;final&lt;/span&gt; &lt;span&gt;boolean&lt;/span&gt;&lt;span&gt; returnFirstOnNotFound) {
        &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; mappedFileSize = &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.defaultMessageStore.getMessageStoreConfig().getMappedFileSizeCommitLog();
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 1. å…ˆåœ¨æ‰€æœ‰commitlogæ–‡ä»¶ä¸­æŸ¥æ‰¾åˆ°å¯¹åº”æ‰€åœ¨çš„ commitlog åˆ†ç‰‡æ–‡ä»¶&lt;/span&gt;
        MappedFile mappedFile = &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.mappedFileQueue.findMappedFileByOffset(offset, returnFirstOnNotFound);
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (mappedFile != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å†ä»è¯¥åˆ†ç‰‡æ–‡ä»¶ä¸­ï¼Œç§»åŠ¨ä½™æ•°çš„å¤§å°åç§»ï¼Œå³å¯å®šä½åˆ°è¦æŸ¥æ‰¾çš„æ¶ˆæ¯è®°å½•äº†&lt;/span&gt;
            &lt;span&gt;int&lt;/span&gt; pos = (&lt;span&gt;int&lt;/span&gt;) (offset %&lt;span&gt; mappedFileSize);
            SelectMappedBufferResult result &lt;/span&gt;=&lt;span&gt; mappedFile.selectMappedBuffer(pos);
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; result;
        }

        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
    }
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æŸ¥æ‰¾åç§»æ‰€åœ¨commitlogæ–‡ä»¶çš„å®ç°æ–¹å¼ï¼š
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; org.apache.rocketmq.store.MappedFileQueue#findMappedFileByOffset(long, boolean)
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; firstMappedFile.getFileFromOffset() / this.mappedFileSize ä»£è¡¨äº†ç¬¬ä¸€æ¡è®°å½•æ‰€å¤„çš„æ–‡ä»¶ä½ç½®ç¼–å·
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; offset / this.mappedFileSize ä»£è¡¨å½“å‰offsetæ‰€å¤„çš„æ–‡ä»¶ç¼–å·
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; é‚£ä¹ˆï¼Œä¸¤ä¸ªç¼–å·ç›¸å‡å°±æ˜¯å½“å‰offsetå¯¹åº”çš„æ–‡ä»¶ç¼–å·ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªæ–‡ä»¶ç¼–å·çš„ç›¸å¯¹ä½ç½®æ˜¯0
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ä½†æœ‰ä¸ªå‰æï¼šå°±æ˜¯æ¯ä¸ªæ–‡ä»¶å­˜å‚¨çš„å¤§å°å¿…é¡»æ˜¯çœŸå®çš„å¯¹åº”çš„ offset å¤§å°ä¹‹å·®ï¼Œè€Œå®é™…ä¸ŠconsumeQueueæ ¹æœ¬æ— æ³•ç¡®å®šå®ƒå­˜äº†å¤šå°‘offset
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦æ–‡ä»¶å®šé•¿ï¼Œoffsetç”¨äºå®šä½ commitlogæ–‡ä»¶å°±æ˜¯åˆç†çš„&lt;/span&gt;
    &lt;span&gt;int&lt;/span&gt; index = (&lt;span&gt;int&lt;/span&gt;) ((offset / &lt;span&gt;this&lt;/span&gt;.mappedFileSize) - (firstMappedFile.getFileFromOffset() / &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.mappedFileSize));
    MappedFile targetFile &lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
    &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ‰€ä»¥ï¼Œæ­¤å¤„å¯ä»¥æ‰¾åˆ° commitlog æ–‡ä»¶å¯¹åº”çš„ mappedFile&lt;/span&gt;
        targetFile = &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.mappedFiles.get(index);
    } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Exception ignored) {
    }
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (targetFile != &lt;span&gt;null&lt;/span&gt; &amp;amp;&amp;amp; offset &amp;gt;=&lt;span&gt; targetFile.getFileFromOffset()
        &lt;/span&gt;&amp;amp;&amp;amp; offset &amp;lt; targetFile.getFileFromOffset() + &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.mappedFileSize) {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; targetFile;
    }
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¦‚æœå¿«é€ŸæŸ¥æ‰¾å¤±è´¥ï¼Œåˆ™é€€å›åˆ°éå†æ–¹å¼, ä½¿ç”¨O(n)çš„å¤æ‚åº¦å†æŸ¥æ‰¾ä¸€æ¬¡&lt;/span&gt;
    &lt;span&gt;for&lt;/span&gt; (MappedFile tmpMappedFile : &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.mappedFiles) {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (offset &amp;gt;=&lt;span&gt; tmpMappedFile.getFileFromOffset()
            &lt;/span&gt;&amp;amp;&amp;amp; offset &amp;lt; tmpMappedFile.getFileFromOffset() + &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.mappedFileSize) {
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; tmpMappedFile;
        }
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€å®šä½åˆ°å…·ä½“çš„æ¶ˆæ¯è®°å½•ä½ç½®åï¼Œå¦‚ä½•çŸ¥é“è¦è¯»å¤šå°‘æ•°æ®å‘¢ï¼Ÿè¿™å®é™…ä¸Šåœ¨commitlogçš„æ•°æ®ç¬¬1ä¸ªå­—èŠ‚ä¸­æ ‡æ˜ï¼Œåªéœ€è¯»å‡ºå³å¯çŸ¥é“ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€å…·ä½“commitlogçš„å­˜å‚¨å®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;41&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;//&lt;/span&gt;&lt;span&gt; org.apache.rocketmq.store.CommitLog.DefaultAppendMessageCallback#doAppend&lt;/span&gt;
&lt;span&gt;    ...
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Initialization of storage space&lt;/span&gt;
    &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.resetByteBuffer(msgStoreItemMemory, msgLen);
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 1 TOTALSIZE, é¦–å…ˆå°†æ¶ˆæ¯å¤§å°å†™å…¥&lt;/span&gt;
    &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.msgStoreItemMemory.putInt(msgLen);
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 2 MAGICCODE&lt;/span&gt;
    &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.msgStoreItemMemory.putInt(CommitLog.MESSAGE_MAGIC_CODE);
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 3 BODYCRC&lt;/span&gt;
    &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.msgStoreItemMemory.putInt(msgInner.getBodyCRC());
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 4 QUEUEID&lt;/span&gt;
    &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.msgStoreItemMemory.putInt(msgInner.getQueueId());
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 5 FLAG&lt;/span&gt;
    &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.msgStoreItemMemory.putInt(msgInner.getFlag());
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 6 QUEUEOFFSET&lt;/span&gt;
    &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.msgStoreItemMemory.putLong(queueOffset);
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 7 PHYSICALOFFSET&lt;/span&gt;
    &lt;span&gt;this&lt;/span&gt;.msgStoreItemMemory.putLong(fileFromOffset +&lt;span&gt; byteBuffer.position());
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 8 SYSFLAG&lt;/span&gt;
    &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.msgStoreItemMemory.putInt(msgInner.getSysFlag());
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 9 BORNTIMESTAMP&lt;/span&gt;
    &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.msgStoreItemMemory.putLong(msgInner.getBornTimestamp());
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 10 BORNHOST&lt;/span&gt;
    &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.resetByteBuffer(bornHostHolder, bornHostLength);
    &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.msgStoreItemMemory.put(msgInner.getBornHostBytes(bornHostHolder));
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 11 STORETIMESTAMP&lt;/span&gt;
    &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.msgStoreItemMemory.putLong(msgInner.getStoreTimestamp());
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 12 STOREHOSTADDRESS&lt;/span&gt;
    &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.resetByteBuffer(storeHostHolder, storeHostLength);
    &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.msgStoreItemMemory.put(msgInner.getStoreHostBytes(storeHostHolder));
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 13 RECONSUMETIMES&lt;/span&gt;
    &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.msgStoreItemMemory.putInt(msgInner.getReconsumeTimes());
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 14 Prepared Transaction Offset&lt;/span&gt;
    &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.msgStoreItemMemory.putLong(msgInner.getPreparedTransactionOffset());
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 15 BODY&lt;/span&gt;
    &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.msgStoreItemMemory.putInt(bodyLength);
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (bodyLength &amp;gt; 0&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.msgStoreItemMemory.put(msgInner.getBody());
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 16 TOPIC&lt;/span&gt;
    &lt;span&gt;this&lt;/span&gt;.msgStoreItemMemory.put((&lt;span&gt;byte&lt;/span&gt;&lt;span&gt;) topicLength);
    &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.msgStoreItemMemory.put(topicData);
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 17 PROPERTIES&lt;/span&gt;
    &lt;span&gt;this&lt;/span&gt;.msgStoreItemMemory.putShort((&lt;span&gt;short&lt;/span&gt;&lt;span&gt;) propertiesLength);
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (propertiesLength &amp;gt; 0&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.msgStoreItemMemory.put(propertiesData);

    &lt;/span&gt;&lt;span&gt;final&lt;/span&gt; &lt;span&gt;long&lt;/span&gt; beginTimeMills = CommitLog.&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.defaultMessageStore.now();
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Write messages to the queue buffer&lt;/span&gt;
    byteBuffer.put(&lt;span&gt;this&lt;/span&gt;.msgStoreItemMemory.array(), 0&lt;span&gt;, msgLen);
    ...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€å¯ä»¥çœ‹å‡ºï¼Œcommitlogçš„å­˜å‚¨è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå› ä¸ºå…¶ä¸»è¦å°±æ˜¯è´Ÿè´£å°†æ¥æ”¶åˆ°çš„æ‰€æœ‰æ¶ˆæ¯ï¼Œä¾æ¬¡å†™å…¥åŒä¸€æ–‡ä»¶ä¸­ã€‚å› ä¸ºä¸“ä¸€æ‰€ä»¥ä¸“ä¸šã€‚&lt;/p&gt;

&lt;h3&gt;4. consumequeueæ–‡ä»¶çš„å­˜å‚¨ç»“æ„&lt;/h3&gt;
&lt;p&gt;ã€€ã€€consumequeueä½œä¸ºæ¶ˆè´¹è€…çš„é‡è¦ä¾æ®ï¼ŒåŒæ ·èµ·ç€éå¸¸é‡è¦çš„ä½œç”¨ã€‚æ¶ˆè´¹è€…åœ¨è¿›è¡Œæ¶ˆè´¹æ—¶ï¼Œä¼šä½¿ç”¨ä¸€äº›åç§»é‡ä½œä¸ºä¾æ®ï¼ˆæ‹‰å–æ¨¡å‹å®ç°ï¼‰ã€‚è€Œè¿™äº›ä¸ªåç§»é‡ï¼Œå®é™…ä¸Šå°±æ˜¯æŒ‡çš„consumequeueçš„åç§»é‡ï¼ˆæ³¨æ„ä¸æ˜¯commitlogçš„åç§»é‡ï¼‰ã€‚è¿™æ ·åšæœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿé¦–å…ˆï¼Œconsumequeueä½œä¸ºç´¢å¼•æ–‡ä»¶ï¼Œå®ƒè¢«è¦æ±‚è¦æœ‰éå¸¸é«˜çš„æŸ¥è¯¢æ€§èƒ½ï¼Œæ‰€ä»¥è¶Šç®€å•è¶Šå¥½ã€‚æœ€å¥½æ˜¯èƒ½å¤Ÿä¸€æ¬¡æ€§å®šä½åˆ°æ•°æ®ï¼&lt;/p&gt;
&lt;p&gt;ã€€ã€€å¦‚æœæƒ³ä¸€æ¬¡æ€§å®šä½æ•°æ®ï¼Œé‚£ä¹ˆå”¯ä¸€çš„åŠæ³•æ˜¯ç›´æ¥ä½¿ç”¨commitlogçš„offsetã€‚ä½†è¿™ä¼šå¸¦æ¥ä¸€ä¸ªæœ€å¤§çš„é—®é¢˜ï¼Œå°±æ˜¯å½“æˆ‘å½“å‰æ¶ˆæ¯æ¶ˆè´¹æ‹‰å–å®Œæˆåï¼Œä¸‹ä¸€æ¡æ¶ˆæ¯åœ¨å“ªé‡Œå‘¢ï¼Ÿå¦‚æœå•é commitlogæ–‡ä»¶ï¼Œé‚£ä¹ˆï¼Œå®ƒå¿…ç„¶éœ€è¦å°†ä¸‹ä¸€æ¡æ¶ˆæ¯è¯»å…¥ï¼Œç„¶åå†æ ¹æ®topicåˆ¤å®šæ˜¯ä¸æ˜¯éœ€è¦çš„æ•°æ®ã€‚å¦‚æ­¤ä¸€æ¥ï¼Œå°±å¿…ç„¶å­˜åœ¨å¤§é‡çš„commitlogæ–‡ä»¶çš„ioé—®é¢˜äº†ã€‚æ‰€ä»¥ï¼Œè¿™çœ‹èµ·æ¥æ˜¯éå¸¸å¿«é€Ÿçš„ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œæœ€ç»ˆåˆå˜æˆäº†éå¸¸è´¹åŠ›çš„æ–¹æ¡ˆäº†ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€è€Œä½¿ç”¨commitlogæ–‡ä»¶çš„offsetï¼Œåˆ™å¥½äº†è®¸å¤šã€‚å› ä¸ºconsumequeueçš„æ–‡ä»¶å­˜å‚¨æ ¼å¼æ˜¯ä¸€æ¡æ¶ˆæ¯å 20å­—èŠ‚ï¼Œå³å®šé•¿ã€‚æ ¹æ®è¿™20å­—èŠ‚ï¼Œä½ å¯ä»¥æ‰¾åˆ°commitlogçš„offset. è€Œå› ä¸ºconsumequeueæœ¬èº«å°±æ˜¯æŒ‰ç…§topic/queueIdè¿›è¡Œåˆ’åˆ†çš„ï¼Œæ‰€ä»¥ï¼Œæœ¬æ¬¡æ¶ˆè´¹å®Œæˆåï¼Œä¸‹ä¸€æ¬¡æ¶ˆè´¹çš„æ•°æ®å¿…å®šå°±åœ¨consumequeueçš„ä¸‹ä¸€ä½ç½®ã€‚å¦‚æ­¤ç®€å•å¿«é€Ÿæå¾—å®šäº†ã€‚å…·ä½“consumeçš„å­˜å‚¨æ ¼å¼ï¼Œå¦‚å®˜æ–¹æè¿°ï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;ConsumeQueueï¼šæ¶ˆæ¯æ¶ˆè´¹é˜Ÿåˆ—ï¼Œå¼•å…¥çš„ç›®çš„ä¸»è¦æ˜¯æé«˜æ¶ˆæ¯æ¶ˆè´¹çš„æ€§èƒ½ï¼Œç”±äºRocketMQæ˜¯åŸºäºä¸»é¢˜topicçš„è®¢é˜…æ¨¡å¼ï¼Œæ¶ˆæ¯æ¶ˆè´¹æ˜¯é’ˆå¯¹ä¸»é¢˜è¿›è¡Œçš„ï¼Œå¦‚æœè¦éå†commitlogæ–‡ä»¶ä¸­æ ¹æ®topicæ£€ç´¢æ¶ˆæ¯æ˜¯éå¸¸ä½æ•ˆçš„ã€‚Consumerå³å¯æ ¹æ®ConsumeQueueæ¥æŸ¥æ‰¾å¾…æ¶ˆè´¹çš„æ¶ˆæ¯ã€‚å…¶ä¸­ï¼ŒConsumeQueueï¼ˆé€»è¾‘æ¶ˆè´¹é˜Ÿåˆ—ï¼‰ä½œä¸ºæ¶ˆè´¹æ¶ˆæ¯çš„ç´¢å¼•ï¼Œä¿å­˜äº†æŒ‡å®šTopicä¸‹çš„é˜Ÿåˆ—æ¶ˆæ¯åœ¨CommitLogä¸­çš„èµ·å§‹ç‰©ç†åç§»é‡offsetï¼Œæ¶ˆæ¯å¤§å°sizeå’Œæ¶ˆæ¯Tagçš„HashCodeå€¼ã€‚consumequeueæ–‡ä»¶å¯ä»¥çœ‹æˆæ˜¯åŸºäºtopicçš„commitlogç´¢å¼•æ–‡ä»¶ï¼Œæ•…consumequeueæ–‡ä»¶å¤¹çš„ç»„ç»‡æ–¹å¼å¦‚ä¸‹ï¼štopic/queue/fileä¸‰å±‚ç»„ç»‡ç»“æ„ï¼Œå…·ä½“å­˜å‚¨è·¯å¾„ä¸ºï¼š$HOME/store/consumequeue/{topic}/{queueId}/{fileName}ã€‚åŒæ ·consumequeueæ–‡ä»¶é‡‡å–å®šé•¿è®¾è®¡ï¼Œæ¯ä¸€ä¸ªæ¡ç›®å…±20ä¸ªå­—èŠ‚ï¼Œåˆ†åˆ«ä¸º8å­—èŠ‚çš„commitlogç‰©ç†åç§»é‡ã€4å­—èŠ‚çš„æ¶ˆæ¯é•¿åº¦ã€8å­—èŠ‚tag hashcodeï¼Œå•ä¸ªæ–‡ä»¶ç”±30Wä¸ªæ¡ç›®ç»„æˆï¼Œå¯ä»¥åƒæ•°ç»„ä¸€æ ·éšæœºè®¿é—®æ¯ä¸€ä¸ªæ¡ç›®ï¼Œæ¯ä¸ªConsumeQueueæ–‡ä»¶å¤§å°çº¦5.72Mï¼›&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ã€€ã€€å…¶ä¸­fileNameä¹Ÿæ˜¯ä»¥åç§»é‡ä½œä¸ºå‘½åä¾æ®ï¼Œå› ä¸ºè¿™æ ·æ‰èƒ½æ ¹æ®offsetå¿«é€ŸæŸ¥æ‰¾åˆ°æ•°æ®æ‰€åœ¨çš„åˆ†ç‰‡æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€å…¶å­˜å‚¨å®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;57&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;//&lt;/span&gt;&lt;span&gt; org.apache.rocketmq.store.ConsumeQueue#putMessagePositionInfo&lt;/span&gt;
    &lt;span&gt;private&lt;/span&gt; &lt;span&gt;boolean&lt;/span&gt; putMessagePositionInfo(&lt;span&gt;final&lt;/span&gt; &lt;span&gt;long&lt;/span&gt; offset, &lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; size, &lt;span&gt;final&lt;/span&gt; &lt;span&gt;long&lt;/span&gt;&lt;span&gt; tagsCode,
        &lt;/span&gt;&lt;span&gt;final&lt;/span&gt; &lt;span&gt;long&lt;/span&gt;&lt;span&gt; cqOffset) {

        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (offset + size &amp;lt;= &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.maxPhysicOffset) {
            log.warn(&lt;/span&gt;&quot;Maybe try to build consume queue repeatedly maxPhysicOffset={} phyOffset={}&quot;&lt;span&gt;, maxPhysicOffset, offset);
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
        }
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ä¾æ¬¡å†™å…¥ offset + size + tagsCode&lt;/span&gt;
        &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.byteBufferIndex.flip();
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.byteBufferIndex.limit(CQ_STORE_UNIT_SIZE);
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.byteBufferIndex.putLong(offset);
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.byteBufferIndex.putInt(size);
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.byteBufferIndex.putLong(tagsCode);

        &lt;/span&gt;&lt;span&gt;final&lt;/span&gt; &lt;span&gt;long&lt;/span&gt; expectLogicOffset = cqOffset *&lt;span&gt; CQ_STORE_UNIT_SIZE;

        MappedFile mappedFile &lt;/span&gt;= &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.mappedFileQueue.getLastMappedFile(expectLogicOffset);
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (mappedFile != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {

            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (mappedFile.isFirstCreateInQueue() &amp;amp;&amp;amp; cqOffset != 0 &amp;amp;&amp;amp; mappedFile.getWrotePosition() == 0&lt;span&gt;) {
                &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.minLogicOffset =&lt;span&gt; expectLogicOffset;
                &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.mappedFileQueue.setFlushedWhere(expectLogicOffset);
                &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.mappedFileQueue.setCommittedWhere(expectLogicOffset);
                &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.fillPreBlank(mappedFile, expectLogicOffset);
                log.info(&lt;/span&gt;&quot;fill pre blank space &quot; + mappedFile.getFileName() + &quot; &quot; + expectLogicOffset + &quot; &quot;
                    +&lt;span&gt; mappedFile.getWrotePosition());
            }

            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (cqOffset != 0&lt;span&gt;) {
                &lt;/span&gt;&lt;span&gt;long&lt;/span&gt; currentLogicOffset = mappedFile.getWrotePosition() +&lt;span&gt; mappedFile.getFileFromOffset();

                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (expectLogicOffset &amp;lt;&lt;span&gt; currentLogicOffset) {
                    log.warn(&lt;/span&gt;&quot;Build  consume queue repeatedly, expectLogicOffset: {} currentLogicOffset: {} Topic: {} QID: {} Diff: {}&quot;&lt;span&gt;,
                        expectLogicOffset, currentLogicOffset, &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.topic, &lt;span&gt;this&lt;/span&gt;.queueId, expectLogicOffset -&lt;span&gt; currentLogicOffset);
                    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
                }

                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (expectLogicOffset !=&lt;span&gt; currentLogicOffset) {
                    LOG_ERROR.warn(
                        &lt;/span&gt;&quot;[BUG]logic queue order maybe wrong, expectLogicOffset: {} currentLogicOffset: {} Topic: {} QID: {} Diff: {}&quot;&lt;span&gt;,
                        expectLogicOffset,
                        currentLogicOffset,
                        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.topic,
                        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.queueId,
                        expectLogicOffset &lt;/span&gt;-&lt;span&gt; currentLogicOffset
                    );
                }
            }
            &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.maxPhysicOffset = offset +&lt;span&gt; size;
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å°†bufferå†™å…¥ consumequeue çš„ mappedFile ä¸­&lt;/span&gt;
            &lt;span&gt;return&lt;/span&gt; mappedFile.appendMessage(&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.byteBufferIndex.array());
        }
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
    }
    å½“éœ€è¦è¿›è¡ŒæŸ¥æ‰¾è¿›ï¼Œä¹Ÿå°±ä¼šæ ¹æ®offset, å®šä½åˆ°æŸä¸ª consumequeue æ–‡ä»¶ï¼Œç„¶åå†æ ¹æ®åç§»ä½™æ•°ä¿¡æ¯ï¼Œå†æ‰¾åˆ°å¯¹åº”è®°å½•ï¼Œå–å‡º20å­—èŠ‚ï¼Œå³æ˜¯ commitlogä¿¡æ¯ã€‚æ­¤å¤„å®ç°ä¸ commitlog çš„offsetæŸ¥æ‰¾å®ç°å¦‚å‡ºä¸€è¾™ã€‚
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æŸ¥æ‰¾ç´¢å¼•æ‰€åœ¨æ–‡ä»¶çš„å®ç°,å¦‚ä¸‹ï¼š
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; org.apache.rocketmq.store.ConsumeQueue#getIndexBuffer&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; SelectMappedBufferResult getIndexBuffer(&lt;span&gt;final&lt;/span&gt; &lt;span&gt;long&lt;/span&gt;&lt;span&gt; startIndex) {
        &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; mappedFileSize = &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.mappedFileSize;
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ç»™åˆ°å®¢æˆ·ç«¯çš„åç§»é‡æ˜¯é™¤ä»¥ 20 ä¹‹åçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ å¦‚æœä¸Šä¸€æ¬¡çš„åç§»é‡æ˜¯ 1, é‚£ä¹ˆä¸‹ä¸€æ¬¡çš„åç§»é‡åº”è¯¥æ˜¯2
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ä¸€æ¬¡æ€§æ¶ˆè´¹å¤šæ¡è®°å½•å¦ç®—, è‡ªè¡ŒåŠ å‡&lt;/span&gt;
        &lt;span&gt;long&lt;/span&gt; offset = startIndex *&lt;span&gt; CQ_STORE_UNIT_SIZE;
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (offset &amp;gt;= &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.getMinLogicOffset()) {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å§”æ‰˜ç»™mappedFileQueueè¿›è¡ŒæŸ¥æ‰¾åˆ°å•ä¸ªå…·ä½“çš„consumequeueæ–‡ä»¶
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ ¹æ® offset å’Œè§„èŒƒçš„å‘½åï¼Œå¯ä»¥å¿«é€Ÿå®šä½åˆ†ç‰‡æ–‡ä»¶ï¼Œå¦‚ä¸Š commitlog çš„æŸ¥æ‰¾å®ç°&lt;/span&gt;
            MappedFile mappedFile = &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.mappedFileQueue.findMappedFileByOffset(offset);
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (mappedFile != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å†æ ¹æ®å‰©ä½™çš„åç§»é‡ï¼Œç›´æ¥ç±»ä¼¼äºæ•°ç»„ä¸‹æ ‡çš„å½¢å¼ï¼Œä¸€æ¬¡æ€§å®šä½åˆ°å…·ä½“çš„æ•°æ®è®°å½•&lt;/span&gt;
                SelectMappedBufferResult result = mappedFile.selectMappedBuffer((&lt;span&gt;int&lt;/span&gt;) (offset %&lt;span&gt; mappedFileSize));
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; result;
            }
        }
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€å¦‚æœæƒ³ä¸€æ¬¡æ€§æ¶ˆè´¹å¤šæ¡æ¶ˆæ¯ï¼Œåˆ™åªéœ€è¦ä¾æ¬¡ä»æŸ¥æ‰¾åˆ°ç´¢å¼•è®°å½•å¼€å§‹ï¼Œä¾æ¬¡è¯»å–å¤šæ¡ï¼Œç„¶ååŒç†å›æŸ¥commitlogå³å¯ã€‚å³consumequeueçš„è¿ç»­ï¼Œæˆå°±äº†commitlogçš„ä¸è¿ç»­ã€‚å¦‚ä¸‹æ¶ˆæ¯æ‹‰å–å®ç°ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;58&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;//&lt;/span&gt;&lt;span&gt; org.apache.rocketmq.store.DefaultMessageStore#getMessage
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å…¶ä¸­ bufferConsumeQueue æ˜¯åˆšåˆšæŸ¥æ‰¾å‡ºçš„consumequeueçš„èµ·å§‹æ¶ˆè´¹ä½ç½®
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; åŸºäºæ­¤æ–‡ä»¶è¿­ä»£ï¼Œå®Œæˆå¤šæ¶ˆæ¯è®°å½•æ¶ˆè´¹&lt;/span&gt;
&lt;span&gt;    ...
    &lt;/span&gt;&lt;span&gt;long&lt;/span&gt; nextPhyFileStartOffset =&lt;span&gt; Long.MIN_VALUE;
    &lt;/span&gt;&lt;span&gt;long&lt;/span&gt; maxPhyOffsetPulling = 0&lt;span&gt;;

    &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; i = 0&lt;span&gt;;
    &lt;/span&gt;&lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; maxFilterMessageCount = Math.max(16000, maxMsgNums *&lt;span&gt; ConsumeQueue.CQ_STORE_UNIT_SIZE);
    &lt;/span&gt;&lt;span&gt;final&lt;/span&gt; &lt;span&gt;boolean&lt;/span&gt; diskFallRecorded = &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.messageStoreConfig.isDiskFallRecorded();
    ConsumeQueueExt.CqExtUnit cqExtUnit &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; ConsumeQueueExt.CqExtUnit();
    &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; (; i &amp;lt; bufferConsumeQueue.getSize() &amp;amp;&amp;amp; i &amp;lt; maxFilterMessageCount; i +=&lt;span&gt; ConsumeQueue.CQ_STORE_UNIT_SIZE) {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ä¾æ¬¡å–å‡ºcommitlogçš„åç§»é‡ï¼Œæ•°æ®å¤§å°ï¼ŒhashCode
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ä¸€æ¬¡å¾ªç¯å³æ˜¯å–èµ°ä¸€æ¡è®°å½•ï¼Œå¤šæ¬¡å¾ªç¯åˆ™ä¾æ¬¡å¾€ä¸‹è¯»å–&lt;/span&gt;
        &lt;span&gt;long&lt;/span&gt; offsetPy =&lt;span&gt; bufferConsumeQueue.getByteBuffer().getLong();
        &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; sizePy =&lt;span&gt; bufferConsumeQueue.getByteBuffer().getInt();
        &lt;/span&gt;&lt;span&gt;long&lt;/span&gt; tagsCode =&lt;span&gt; bufferConsumeQueue.getByteBuffer().getLong();

        maxPhyOffsetPulling &lt;/span&gt;=&lt;span&gt; offsetPy;

        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (nextPhyFileStartOffset !=&lt;span&gt; Long.MIN_VALUE) {
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (offsetPy &amp;lt;&lt;span&gt; nextPhyFileStartOffset)
                &lt;/span&gt;&lt;span&gt;continue&lt;/span&gt;&lt;span&gt;;
        }

        &lt;/span&gt;&lt;span&gt;boolean&lt;/span&gt; isInDisk =&lt;span&gt; checkInDiskByCommitOffset(offsetPy, maxOffsetPy);

        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.isTheBatchFull(sizePy, maxMsgNums, getResult.getBufferTotalSize(), getResult.getMessageCount(),
            isInDisk)) {
            &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
        }

        &lt;/span&gt;&lt;span&gt;boolean&lt;/span&gt; extRet = &lt;span&gt;false&lt;/span&gt;, isTagsCodeLegal = &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (consumeQueue.isExtAddr(tagsCode)) {
            extRet &lt;/span&gt;=&lt;span&gt; consumeQueue.getExt(tagsCode, cqExtUnit);
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (extRet) {
                tagsCode &lt;/span&gt;=&lt;span&gt; cqExtUnit.getTagsCode();
            } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; can't find ext content.Client will filter messages by tag also.&lt;/span&gt;
                log.error(&quot;[BUG] can't find consume queue extend file content!addr={}, offsetPy={}, sizePy={}, topic={}, group={}&quot;&lt;span&gt;,
                    tagsCode, offsetPy, sizePy, topic, group);
                isTagsCodeLegal &lt;/span&gt;= &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
            }
        }

        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (messageFilter != &lt;span&gt;null&lt;/span&gt;
            &amp;amp;&amp;amp; !messageFilter.isMatchedByConsumeQueue(isTagsCodeLegal ? tagsCode : &lt;span&gt;null&lt;/span&gt;, extRet ? cqExtUnit : &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)) {
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (getResult.getBufferTotalSize() == 0&lt;span&gt;) {
                status &lt;/span&gt;=&lt;span&gt; GetMessageStatus.NO_MATCHED_MESSAGE;
            }

            &lt;/span&gt;&lt;span&gt;continue&lt;/span&gt;&lt;span&gt;;
        }

        SelectMappedBufferResult selectResult &lt;/span&gt;= &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.commitLog.getMessage(offsetPy, sizePy);
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (&lt;span&gt;null&lt;/span&gt; ==&lt;span&gt; selectResult) {
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (getResult.getBufferTotalSize() == 0&lt;span&gt;) {
                status &lt;/span&gt;=&lt;span&gt; GetMessageStatus.MESSAGE_WAS_REMOVING;
            }

            nextPhyFileStartOffset &lt;/span&gt;= &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.commitLog.rollNextFile(offsetPy);
            &lt;/span&gt;&lt;span&gt;continue&lt;/span&gt;&lt;span&gt;;
        }

        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (messageFilter != &lt;span&gt;null&lt;/span&gt;
            &amp;amp;&amp;amp; !messageFilter.isMatchedByCommitLog(selectResult.getByteBuffer().slice(), &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)) {
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (getResult.getBufferTotalSize() == 0&lt;span&gt;) {
                status &lt;/span&gt;=&lt;span&gt; GetMessageStatus.NO_MATCHED_MESSAGE;
            }
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; release...&lt;/span&gt;
&lt;span&gt;            selectResult.release();
            &lt;/span&gt;&lt;span&gt;continue&lt;/span&gt;&lt;span&gt;;
        }

        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.storeStatsService.getGetMessageTransferedMsgCount().incrementAndGet();
        getResult.addMessage(selectResult);
        status &lt;/span&gt;=&lt;span&gt; GetMessageStatus.FOUND;
        nextPhyFileStartOffset &lt;/span&gt;=&lt;span&gt; Long.MIN_VALUE;
    }

    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (diskFallRecorded) {
        &lt;/span&gt;&lt;span&gt;long&lt;/span&gt; fallBehind = maxOffsetPy -&lt;span&gt; maxPhyOffsetPulling;
        brokerStatsManager.recordDiskFallBehindSize(group, topic, queueId, fallBehind);
    }
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; åˆ†é…ä¸‹ä¸€æ¬¡è¯»å–çš„offsetåç§»ä¿¡æ¯ï¼ŒåŒæ ·è¦é™¤ä»¥å•æ¡ç´¢å¼•å¤§å°&lt;/span&gt;
    nextBeginOffset = offset + (i /&lt;span&gt; ConsumeQueue.CQ_STORE_UNIT_SIZE);

    &lt;/span&gt;&lt;span&gt;long&lt;/span&gt; diff = maxOffsetPy -&lt;span&gt; maxPhyOffsetPulling;
    &lt;/span&gt;&lt;span&gt;long&lt;/span&gt; memory = (&lt;span&gt;long&lt;/span&gt;&lt;span&gt;) (StoreUtil.TOTAL_PHYSICAL_MEMORY_SIZE
        &lt;/span&gt;* (&lt;span&gt;this&lt;/span&gt;.messageStoreConfig.getAccessMessageInMemoryMaxRatio() / 100.0&lt;span&gt;));
    getResult.setSuggestPullingFromSlave(diff &lt;/span&gt;&amp;gt;&lt;span&gt; memory);
    ...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€ä»¥ä¸Šå³ç†è®ºçš„å®ç°ï¼Œæ— é¡»å¤šè¨€ã€‚&lt;/p&gt;

&lt;h3&gt;5. indexæ–‡ä»¶çš„å­˜å‚¨ç»“æ„&lt;/h3&gt;
&lt;p&gt;ã€€ã€€indexæ–‡ä»¶æ˜¯ä¸ºæœç´¢åœºæ™¯è€Œç”Ÿçš„ï¼Œå¦‚æœæ²¡æœ‰æœç´¢ä¸šåŠ¡éœ€æ±‚ï¼Œåˆ™è¿™ä¸ªå®ç°æ˜¯æ„ä¹‰ä¸å¤§çš„ã€‚ä¸€èˆ¬è¿™ç§æœç´¢ï¼Œä¸»è¦ç”¨äºåå°æŸ¥è¯¢éªŒè¯ç±»ä½¿ç”¨ï¼Œæˆ–è€…æœ‰å…¶ä»–åŒçš„æœ‰å¦™ç”¨ï¼Œä¸å¾—è€ŒçŸ¥ã€‚æ€»ä¹‹ï¼Œä¸€åˆ‡ä¸ºæœç´¢ã€‚å®ƒæ›´å¤šçš„éœ€è¦å€ŸåŠ©äºæ—¶é—´é™å®šï¼Œä»¥keyæˆ–è€…idè¿›è¡ŒæŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€å®˜æ–¹æè¿°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;IndexFileï¼ˆç´¢å¼•æ–‡ä»¶ï¼‰æä¾›äº†ä¸€ç§å¯ä»¥é€šè¿‡keyæˆ–æ—¶é—´åŒºé—´æ¥æŸ¥è¯¢æ¶ˆæ¯çš„æ–¹æ³•ã€‚Indexæ–‡ä»¶çš„å­˜å‚¨ä½ç½®æ˜¯ï¼š$HOME \store\index\${fileName}ï¼Œæ–‡ä»¶åfileNameæ˜¯ä»¥åˆ›å»ºæ—¶çš„æ—¶é—´æˆ³å‘½åçš„ï¼Œå›ºå®šçš„å•ä¸ªIndexFileæ–‡ä»¶å¤§å°çº¦ä¸º400Mï¼Œä¸€ä¸ªIndexFileå¯ä»¥ä¿å­˜ 2000Wä¸ªç´¢å¼•ï¼ŒIndexFileçš„åº•å±‚å­˜å‚¨è®¾è®¡ä¸ºåœ¨æ–‡ä»¶ç³»ç»Ÿä¸­å®ç°HashMapç»“æ„ï¼Œæ•…rocketmqçš„ç´¢å¼•æ–‡ä»¶å…¶åº•å±‚å®ç°ä¸ºhashç´¢å¼•ã€‚&lt;br/&gt;IndexFileç´¢å¼•æ–‡ä»¶ä¸ºç”¨æˆ·æä¾›é€šè¿‡â€œæŒ‰ç…§Message KeyæŸ¥è¯¢æ¶ˆæ¯â€çš„æ¶ˆæ¯ç´¢å¼•æŸ¥è¯¢æœåŠ¡ï¼ŒIndexFileæ–‡ä»¶çš„å­˜å‚¨ä½ç½®æ˜¯ï¼š$HOME\store\index\${fileName}ï¼Œæ–‡ä»¶åfileNameæ˜¯ä»¥åˆ›å»ºæ—¶çš„æ—¶é—´æˆ³å‘½åçš„ï¼Œæ–‡ä»¶å¤§å°æ˜¯å›ºå®šçš„ï¼Œç­‰äº40+500W\*4+2000W\*20= 420000040ä¸ªå­—èŠ‚å¤§å°ã€‚å¦‚æœæ¶ˆæ¯çš„propertiesä¸­è®¾ç½®äº†UNIQ_KEYè¿™ä¸ªå±æ€§ï¼Œå°±ç”¨ topic + â€œ#â€ + UNIQ_KEYçš„valueä½œä¸º key æ¥åšå†™å…¥æ“ä½œã€‚å¦‚æœæ¶ˆæ¯è®¾ç½®äº†KEYSå±æ€§ï¼ˆå¤šä¸ªKEYä»¥ç©ºæ ¼åˆ†éš”ï¼‰ï¼Œä¹Ÿä¼šç”¨ topic + â€œ#â€ + KEY æ¥åšç´¢å¼•ã€‚&lt;br/&gt;å…¶ä¸­çš„ç´¢å¼•æ•°æ®åŒ…å«äº†Key Hash/CommitLog Offset/Timestamp/NextIndex offset è¿™å››ä¸ªå­—æ®µï¼Œä¸€å…±20 Byteã€‚NextIndex offset å³å‰é¢è¯»å‡ºæ¥çš„ slotValueï¼Œå¦‚æœæœ‰ hashå†²çªï¼Œå°±å¯ä»¥ç”¨è¿™ä¸ªå­—æ®µå°†æ‰€æœ‰å†²çªçš„ç´¢å¼•ç”¨é“¾è¡¨çš„æ–¹å¼ä¸²èµ·æ¥äº†ã€‚Timestampè®°å½•çš„æ˜¯æ¶ˆæ¯storeTimestampä¹‹é—´çš„å·®ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªç»å¯¹çš„æ—¶é—´ã€‚æ•´ä¸ªIndex Fileçš„ç»“æ„å¦‚å›¾ï¼Œ40 Byte çš„Headerç”¨äºä¿å­˜ä¸€äº›æ€»çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œ4\*500Wçš„ Slot Tableå¹¶ä¸ä¿å­˜çœŸæ­£çš„ç´¢å¼•æ•°æ®ï¼Œè€Œæ˜¯ä¿å­˜æ¯ä¸ªæ§½ä½å¯¹åº”çš„å•å‘é“¾è¡¨çš„å¤´ã€‚20\*2000W æ˜¯çœŸæ­£çš„ç´¢å¼•æ•°æ®ï¼Œå³ä¸€ä¸ª Index File å¯ä»¥ä¿å­˜ 2000Wä¸ªç´¢å¼•ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ã€€ã€€å…·ä½“ç»“æ„å›¾å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/830731/202101/830731-20210102230345473-1226296822.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€é‚£ä¹ˆï¼Œå¦‚æœè¦æŸ¥æ‰¾ä¸€ä¸ªkey, åº”å½“å¦‚ä½•æŸ¥æ‰¾å‘¢ï¼Ÿrocketmqä¼šæ ¹æ®æ—¶é—´æ®µæ‰¾åˆ°ä¸€ä¸ªindexç´¢å¼•åˆ†ç‰ˆï¼Œç„¶åå†æ ¹æ®keyåšhashå¾—åˆ°ä¸€ä¸ªå€¼ï¼Œç„¶åå®šä½åˆ° slotValue . ç„¶åå†ä»slotValueå»å–å‡ºç´¢å¼•æ•°æ®çš„åœ°å€ï¼Œæ‰¾åˆ°ç´¢å¼•æ•°æ®ï¼Œç„¶åå†å›æŸ¥ commitlog æ–‡ä»¶ã€‚ä»è€Œå¾—åˆ°å…·ä½“çš„æ¶ˆæ¯æ•°æ®ã€‚ä¹Ÿå°±æ˜¯ï¼Œç›¸å½“äºæœç´¢ç»å†äº†å››çº§æŸ¥è¯¢ï¼š ç´¢å¼•åˆ†ç‰‡æ–‡ä»¶æŸ¥è¯¢ -&amp;gt; slotValue æŸ¥è¯¢ -&amp;gt; ç´¢å¼•æ•°æ®æŸ¥è¯¢ -&amp;gt; commitlog æŸ¥è¯¢ ã€‚Â &lt;/p&gt;
&lt;p&gt;ã€€ã€€å…·ä½“æŸ¥æ‰¾å®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;84&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;//&lt;/span&gt;&lt;span&gt; org.apache.rocketmq.broker.processor.QueryMessageProcessor#queryMessage&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt;&lt;span&gt; RemotingCommand queryMessage(ChannelHandlerContext ctx, RemotingCommand request)
        &lt;/span&gt;&lt;span&gt;throws&lt;/span&gt;&lt;span&gt; RemotingCommandException {
        &lt;/span&gt;&lt;span&gt;final&lt;/span&gt; RemotingCommand response =&lt;span&gt;
            RemotingCommand.createResponseCommand(QueryMessageResponseHeader.&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;);
        &lt;/span&gt;&lt;span&gt;final&lt;/span&gt; QueryMessageResponseHeader responseHeader =&lt;span&gt;
            (QueryMessageResponseHeader) response.readCustomHeader();
        &lt;/span&gt;&lt;span&gt;final&lt;/span&gt; QueryMessageRequestHeader requestHeader =&lt;span&gt;
            (QueryMessageRequestHeader) request
                .decodeCommandCustomHeader(QueryMessageRequestHeader.&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;);

        response.setOpaque(request.getOpaque());

        String isUniqueKey &lt;/span&gt;=&lt;span&gt; request.getExtFields().get(MixAll.UNIQUE_MSG_QUERY_FLAG);
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (isUniqueKey != &lt;span&gt;null&lt;/span&gt; &amp;amp;&amp;amp; isUniqueKey.equals(&quot;true&quot;&lt;span&gt;)) {
            requestHeader.setMaxNum(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.brokerController.getMessageStoreConfig().getDefaultQueryMaxNum());
        }
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ä»ç´¢å¼•æ–‡ä»¶ä¸­æŸ¥è¯¢æ¶ˆæ¯&lt;/span&gt;
        &lt;span&gt;final&lt;/span&gt; QueryMessageResult queryMessageResult =
            &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.brokerController.getMessageStore().queryMessage(requestHeader.getTopic(),
                requestHeader.getKey(), requestHeader.getMaxNum(), requestHeader.getBeginTimestamp(),
                requestHeader.getEndTimestamp());
        &lt;/span&gt;&lt;span&gt;assert&lt;/span&gt; queryMessageResult != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;

        responseHeader.setIndexLastUpdatePhyoffset(queryMessageResult.getIndexLastUpdatePhyoffset());
        responseHeader.setIndexLastUpdateTimestamp(queryMessageResult.getIndexLastUpdateTimestamp());

        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (queryMessageResult.getBufferTotalSize() &amp;gt; 0&lt;span&gt;) {
            response.setCode(ResponseCode.SUCCESS);
            response.setRemark(&lt;/span&gt;&lt;span&gt;null&lt;/span&gt;&lt;span&gt;);

            &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
                FileRegion fileRegion &lt;/span&gt;=
                    &lt;span&gt;new&lt;/span&gt;&lt;span&gt; QueryMessageTransfer(response.encodeHeader(queryMessageResult
                        .getBufferTotalSize()), queryMessageResult);
                ctx.channel().writeAndFlush(fileRegion).addListener(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; ChannelFutureListener() {
                    @Override
                    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; operationComplete(ChannelFuture future) &lt;span&gt;throws&lt;/span&gt;&lt;span&gt; Exception {
                        queryMessageResult.release();
                        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;future.isSuccess()) {
                            log.error(&lt;/span&gt;&quot;transfer query message by page cache failed, &quot;&lt;span&gt;, future.cause());
                        }
                    }
                });
            } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Throwable e) {
                log.error(&lt;/span&gt;&quot;&quot;&lt;span&gt;, e);
                queryMessageResult.release();
            }

            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
        }

        response.setCode(ResponseCode.QUERY_NOT_FOUND);
        response.setRemark(&lt;/span&gt;&quot;can not find message, maybe time range not correct&quot;&lt;span&gt;);
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; response;
    }
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; org.apache.rocketmq.store.DefaultMessageStore#queryMessage&lt;/span&gt;
&lt;span&gt;    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; QueryMessageResult queryMessage(String topic, String key, &lt;span&gt;int&lt;/span&gt; maxNum, &lt;span&gt;long&lt;/span&gt; begin, &lt;span&gt;long&lt;/span&gt;&lt;span&gt; end) {
        QueryMessageResult queryMessageResult &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; QueryMessageResult();

        &lt;/span&gt;&lt;span&gt;long&lt;/span&gt; lastQueryMsgTime =&lt;span&gt; end;

        &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; i = 0; i &amp;lt; 3; i++&lt;span&gt;) {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å§”æ‰˜ç»™ indexService æœç´¢è®°å½•, æ—¶é—´æ˜¯å¿…å¤‡å‚æ•°&lt;/span&gt;
            QueryOffsetResult queryOffsetResult = &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.indexService.queryOffset(topic, key, maxNum, begin, lastQueryMsgTime);
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (queryOffsetResult.getPhyOffsets().isEmpty()) {
                &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
            }

            Collections.sort(queryOffsetResult.getPhyOffsets());

            queryMessageResult.setIndexLastUpdatePhyoffset(queryOffsetResult.getIndexLastUpdatePhyoffset());
            queryMessageResult.setIndexLastUpdateTimestamp(queryOffsetResult.getIndexLastUpdateTimestamp());

            &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; m = 0; m &amp;lt; queryOffsetResult.getPhyOffsets().size(); m++&lt;span&gt;) {
                &lt;/span&gt;&lt;span&gt;long&lt;/span&gt; offset =&lt;span&gt; queryOffsetResult.getPhyOffsets().get(m);

                &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {

                    &lt;/span&gt;&lt;span&gt;boolean&lt;/span&gt; match = &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
                    MessageExt msg &lt;/span&gt;= &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.lookMessageByOffset(offset);
                    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (0 ==&lt;span&gt; m) {
                        lastQueryMsgTime &lt;/span&gt;=&lt;span&gt; msg.getStoreTimestamp();
                    }

                    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (match) {
                        SelectMappedBufferResult result &lt;/span&gt;= &lt;span&gt;this&lt;/span&gt;.commitLog.getData(offset, &lt;span&gt;false&lt;/span&gt;&lt;span&gt;);
                        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (result != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                            &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; size = result.getByteBuffer().getInt(0&lt;span&gt;);
                            result.getByteBuffer().limit(size);
                            result.setSize(size);
                            queryMessageResult.addMessage(result);
                        }
                    } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
                        log.warn(&lt;/span&gt;&quot;queryMessage hash duplicate, {} {}&quot;&lt;span&gt;, topic, key);
                    }
                } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Exception e) {
                    log.error(&lt;/span&gt;&quot;queryMessage exception&quot;&lt;span&gt;, e);
                }
            }

            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (queryMessageResult.getBufferTotalSize() &amp;gt; 0&lt;span&gt;) {
                &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
            }

            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (lastQueryMsgTime &amp;lt;&lt;span&gt; begin) {
                &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
            }
        }

        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; queryMessageResult;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; QueryOffsetResult queryOffset(String topic, String key, &lt;span&gt;int&lt;/span&gt; maxNum, &lt;span&gt;long&lt;/span&gt; begin, &lt;span&gt;long&lt;/span&gt;&lt;span&gt; end) {
        List&lt;/span&gt;&amp;lt;Long&amp;gt; phyOffsets = &lt;span&gt;new&lt;/span&gt; ArrayList&amp;lt;Long&amp;gt;&lt;span&gt;(maxNum);

        &lt;/span&gt;&lt;span&gt;long&lt;/span&gt; indexLastUpdateTimestamp = 0&lt;span&gt;;
        &lt;/span&gt;&lt;span&gt;long&lt;/span&gt; indexLastUpdatePhyoffset = 0&lt;span&gt;;
        maxNum &lt;/span&gt;= Math.min(maxNum, &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.defaultMessageStore.getMessageStoreConfig().getMaxMsgsNumBatch());
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
            &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.readWriteLock.readLock().lock();
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.indexFileList.isEmpty()) {
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;ä»æœ€åä¸€ä¸ªç´¢å¼•æ–‡ä»¶ï¼Œä¾æ¬¡æœç´¢&lt;/span&gt;
                &lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; i = &lt;span&gt;this&lt;/span&gt;.indexFileList.size(); i &amp;gt; 0; i--&lt;span&gt;) {
                    IndexFile f &lt;/span&gt;= &lt;span&gt;this&lt;/span&gt;.indexFileList.get(i - 1&lt;span&gt;);
                    &lt;/span&gt;&lt;span&gt;boolean&lt;/span&gt; lastFile = i == &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.indexFileList.size();
                    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (lastFile) {
                        indexLastUpdateTimestamp &lt;/span&gt;=&lt;span&gt; f.getEndTimestamp();
                        indexLastUpdatePhyoffset &lt;/span&gt;=&lt;span&gt; f.getEndPhyOffset();
                    }
                    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; åˆ¤å®šè¯¥æ—¶é—´æ®µæ˜¯å¦æ•°æ®æ˜¯å¦åœ¨è¯¥ç´¢å¼•æ–‡ä»¶ä¸­&lt;/span&gt;
                    &lt;span&gt;if&lt;/span&gt;&lt;span&gt; (f.isTimeMatched(begin, end)) {
                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ„å»ºå‡º keyçš„hash, ç„¶åæŸ¥æ‰¾ slotValue, ç„¶åå¾—ä»¥ç´¢å¼•æ•°æ®, ç„¶åå°†offsetæ”¾å…¥ phyOffsets ä¸­&lt;/span&gt;
&lt;span&gt;                        f.selectPhyOffset(phyOffsets, buildKey(topic, key), maxNum, begin, end, lastFile);
                    }

                    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (f.getBeginTimestamp() &amp;lt;&lt;span&gt; begin) {
                        &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
                    }

                    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (phyOffsets.size() &amp;gt;=&lt;span&gt; maxNum) {
                        &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
                    }
                }
            }
        } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Exception e) {
            log.error(&lt;/span&gt;&quot;queryMsg exception&quot;&lt;span&gt;, e);
        } &lt;/span&gt;&lt;span&gt;finally&lt;/span&gt;&lt;span&gt; {
            &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.readWriteLock.readLock().unlock();
        }

        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;new&lt;/span&gt;&lt;span&gt; QueryOffsetResult(phyOffsets, indexLastUpdateTimestamp, indexLastUpdatePhyoffset);
    }
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; org.apache.rocketmq.store.index.IndexFile#selectPhyOffset&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; selectPhyOffset(&lt;span&gt;final&lt;/span&gt; List&amp;lt;Long&amp;gt; phyOffsets, &lt;span&gt;final&lt;/span&gt; String key, &lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; maxNum,
        &lt;/span&gt;&lt;span&gt;final&lt;/span&gt; &lt;span&gt;long&lt;/span&gt; begin, &lt;span&gt;final&lt;/span&gt; &lt;span&gt;long&lt;/span&gt; end, &lt;span&gt;boolean&lt;/span&gt;&lt;span&gt; lock) {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.mappedFile.hold()) {
            &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; keyHash =&lt;span&gt; indexKeyHashMethod(key);
            &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; slotPos = keyHash % &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.hashSlotNum;
            &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; absSlotPos = IndexHeader.INDEX_HEADER_SIZE + slotPos *&lt;span&gt; hashSlotSize;

            FileLock fileLock &lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
            &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
                &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; slotValue = &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.mappedByteBuffer.getInt(absSlotPos);

                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (slotValue &amp;lt;= invalidIndex || slotValue &amp;gt; &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.indexHeader.getIndexCount()
                    &lt;/span&gt;|| &lt;span&gt;this&lt;/span&gt;.indexHeader.getIndexCount() &amp;lt;= 1&lt;span&gt;) {
                    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; è¶…å‡ºæœç´¢èŒƒå›´ï¼Œä¸å¤„ç†&lt;/span&gt;
                } &lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
                    &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; nextIndexToRead =&lt;span&gt; slotValue; ; ) {
                        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (phyOffsets.size() &amp;gt;=&lt;span&gt; maxNum) {
                            &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
                        }

                        &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; absIndexPos =&lt;span&gt;
                            IndexHeader.INDEX_HEADER_SIZE &lt;/span&gt;+ &lt;span&gt;this&lt;/span&gt;.hashSlotNum *&lt;span&gt; hashSlotSize
                                &lt;/span&gt;+ nextIndexToRead *&lt;span&gt; indexSize;
                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ä¾æ¬¡è¯»å‡º keyHash+offset+timeDiff+nextOffset&lt;/span&gt;
                        &lt;span&gt;int&lt;/span&gt; keyHashRead = &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.mappedByteBuffer.getInt(absIndexPos);
                        &lt;/span&gt;&lt;span&gt;long&lt;/span&gt; phyOffsetRead = &lt;span&gt;this&lt;/span&gt;.mappedByteBuffer.getLong(absIndexPos + 4&lt;span&gt;);

                        &lt;/span&gt;&lt;span&gt;long&lt;/span&gt; timeDiff = (&lt;span&gt;long&lt;/span&gt;) &lt;span&gt;this&lt;/span&gt;.mappedByteBuffer.getInt(absIndexPos + 4 + 8&lt;span&gt;);
                        &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; prevIndexRead = &lt;span&gt;this&lt;/span&gt;.mappedByteBuffer.getInt(absIndexPos + 4 + 8 + 4&lt;span&gt;);

                        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (timeDiff &amp;lt; 0&lt;span&gt;) {
                            &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
                        }

                        timeDiff &lt;/span&gt;*= 1000L&lt;span&gt;;
                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ ¹æ®æ–‡ä»¶åå¯å¾—åˆ°ç´¢å¼•å†™å…¥æ—¶é—´&lt;/span&gt;
                        &lt;span&gt;long&lt;/span&gt; timeRead = &lt;span&gt;this&lt;/span&gt;.indexHeader.getBeginTimestamp() +&lt;span&gt; timeDiff;
                        &lt;/span&gt;&lt;span&gt;boolean&lt;/span&gt; timeMatched = (timeRead &amp;gt;= begin) &amp;amp;&amp;amp; (timeRead &amp;lt;=&lt;span&gt; end);

                        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (keyHash == keyHashRead &amp;amp;&amp;amp;&lt;span&gt; timeMatched) {
                            phyOffsets.add(phyOffsetRead);
                        }

                        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (prevIndexRead &amp;lt;=&lt;span&gt; invalidIndex
                            &lt;/span&gt;|| prevIndexRead &amp;gt; &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.indexHeader.getIndexCount()
                            &lt;/span&gt;|| prevIndexRead == nextIndexToRead || timeRead &amp;lt;&lt;span&gt; begin) {
                            &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
                        }

                        nextIndexToRead &lt;/span&gt;=&lt;span&gt; prevIndexRead;
                    }
                }
            } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Exception e) {
                log.error(&lt;/span&gt;&quot;selectPhyOffset exception &quot;&lt;span&gt;, e);
            } &lt;/span&gt;&lt;span&gt;finally&lt;/span&gt;&lt;span&gt; {
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (fileLock != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                    &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
                        fileLock.release();
                    } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (IOException e) {
                        log.error(&lt;/span&gt;&quot;Failed to release the lock&quot;&lt;span&gt;, e);
                    }
                }

                &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.mappedFile.release();
            }
        }
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€çœ‹èµ·æ¥æŒºè´¹åŠ²ï¼Œä½†çœŸæ­£å¤„ç†èµ·æ¥æ€§èƒ½è¿˜å¥½ï¼Œè™½ç„¶æ²¡æœ‰consumequeueé«˜æ•ˆï¼Œä½†æœ‰mmapå’Œpagecacheçš„åŠ æŒï¼Œæ•ˆç‡è¿˜æ˜¯æ‰›æ‰›çš„ã€‚è€Œä¸”ï¼Œæœç´¢ç›¸å¯¹æ…¢ä¸€äº›ï¼Œç”¨æˆ·ä¹Ÿæ˜¯å¯ä»¥æ¥å—çš„å˜›ã€‚æ¯•ç«Ÿè¿™åªæ˜¯ä¸€ä¸ªé™„åŠ åŠŸèƒ½ï¼Œå¹¶éæ ¸å¿ƒæ‰€åœ¨ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€è€Œç´¢å¼•æ–‡ä»¶å¹¶æ²¡æœ‰ä½¿ç”¨ä»€ä¹ˆé«˜æ•ˆçš„æœç´¢ç®—æ³•ï¼Œè€Œæ˜¯ç®€å•ä»æœ€åä¸€ä¸ªæ–‡ä»¶éå†å®Œæˆï¼Œå› ä¸ºæ—¶é—´æˆ³ä¸ä¸€å®šæ€»æ˜¯æœ‰è§„å¾‹çš„ï¼Œä¸å…¶éšæ„æŸ¥æ‰¾ï¼Œè¿˜ä¸å¦‚ç›´æ¥çº¿æ€§æŸ¥æ‰¾ã€‚å¦å¤–ï¼Œå®é™…ä¸Šå¯¹äºç´¢å¼•é‡å»ºé—®é¢˜ï¼Œæœç´¢å¯èƒ½ä¸ä¸€å®šä¼šæœ‰æ•ˆã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰©å¤§æœç´¢æ—¶é—´èŒƒå›´çš„æ–¹å¼ï¼Œæ€»æ˜¯èƒ½å¤Ÿæ‰¾åˆ°å­˜åœ¨çš„æ•°æ®ã€‚è€Œä¸”å› å…¶ä½¿ç”¨hashç´¢å¼•å®ç°ï¼Œæ€§èƒ½è¿˜æ˜¯ä¸é”™çš„ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€å¦å¤–ï¼Œindexç´¢å¼•æ–‡ä»¶ä¸commitlogå’Œconsumequeueæœ‰ä¸€ä¸ªä¸ä¸€æ ·çš„åœ°æ–¹ï¼Œå°±æ˜¯å®ƒä¸èƒ½è¿›è¡Œé¡ºåºå†™ï¼Œå› ä¸ºhashå­˜å‚¨ï¼Œå†™ä¸€å®šæ˜¯ä»»æ„çš„ã€‚ä¸”å…¶slotValueä»¥ä¸€äº›ç»Ÿè®¡ä¿¡æ¯å¯èƒ½éšæ—¶å‘ç”Ÿå˜åŒ–ï¼Œè¿™ä¹Ÿç»™é¡ºåºå†™å¸¦æ¥äº†ä¸å¯è§£å†³çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€å…¶å…·ä½“å†™ç´¢å¼•è¿‡ç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;46&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;//&lt;/span&gt;&lt;span&gt; org.apache.rocketmq.store.index.IndexFile#putKey&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;boolean&lt;/span&gt; putKey(&lt;span&gt;final&lt;/span&gt; String key, &lt;span&gt;final&lt;/span&gt; &lt;span&gt;long&lt;/span&gt; phyOffset, &lt;span&gt;final&lt;/span&gt; &lt;span&gt;long&lt;/span&gt;&lt;span&gt; storeTimestamp) {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (&lt;span&gt;this&lt;/span&gt;.indexHeader.getIndexCount() &amp;lt; &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.indexNum) {
            &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; keyHash =&lt;span&gt; indexKeyHashMethod(key);
            &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; slotPos = keyHash % &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.hashSlotNum;
            &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; absSlotPos = IndexHeader.INDEX_HEADER_SIZE + slotPos *&lt;span&gt; hashSlotSize;

            FileLock fileLock &lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;

            &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å…ˆå°è¯•æ‹‰å–slotå¯¹åº”çš„æ•°æ®
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¦‚æœä¸º0åˆ™è¯´æ˜æ˜¯ç¬¬ä¸€æ¬¡å†™å…¥, å¦åˆ™ä¸ºå½“å‰çš„ç´¢å¼•æ¡æ•°&lt;/span&gt;
                &lt;span&gt;int&lt;/span&gt; slotValue = &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.mappedByteBuffer.getInt(absSlotPos);
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (slotValue &amp;lt;= invalidIndex || slotValue &amp;gt; &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.indexHeader.getIndexCount()) {
                    slotValue &lt;/span&gt;=&lt;span&gt; invalidIndex;
                }

                &lt;/span&gt;&lt;span&gt;long&lt;/span&gt; timeDiff = storeTimestamp - &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.indexHeader.getBeginTimestamp();

                timeDiff &lt;/span&gt;= timeDiff / 1000&lt;span&gt;;

                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (&lt;span&gt;this&lt;/span&gt;.indexHeader.getBeginTimestamp() &amp;lt;= 0&lt;span&gt;) {
                    timeDiff &lt;/span&gt;= 0&lt;span&gt;;
                } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (timeDiff &amp;gt;&lt;span&gt; Integer.MAX_VALUE) {
                    timeDiff &lt;/span&gt;=&lt;span&gt; Integer.MAX_VALUE;
                } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (timeDiff &amp;lt; 0&lt;span&gt;) {
                    timeDiff &lt;/span&gt;= 0&lt;span&gt;;
                }
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ç›´æ¥è®¡ç®—å‡ºæœ¬æ¬¡å­˜å‚¨çš„ç´¢å¼•è®°å½•ä½ç½®
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å› ç´¢å¼•æ¡æ•°åªä¼šä¾æ¬¡å¢åŠ ï¼Œæ•…ç´¢å¼•æ•°æ®å°†è¡¨ç°ä¸ºé¡ºåºå†™æ ·å­ï¼Œä¸»è¦æ˜¯ä¿è¯äº†æ•°æ®ä¸ä¼šå†™å†²çªäº†&lt;/span&gt;
                &lt;span&gt;int&lt;/span&gt; absIndexPos =&lt;span&gt;
                    IndexHeader.INDEX_HEADER_SIZE &lt;/span&gt;+ &lt;span&gt;this&lt;/span&gt;.hashSlotNum *&lt;span&gt; hashSlotSize
                        &lt;/span&gt;+ &lt;span&gt;this&lt;/span&gt;.indexHeader.getIndexCount() *&lt;span&gt; indexSize;
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æŒ‰åè®®å†™å…¥å†…å®¹å³å¯&lt;/span&gt;
                &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.mappedByteBuffer.putInt(absIndexPos, keyHash);
                &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.mappedByteBuffer.putLong(absIndexPos + 4&lt;span&gt;, phyOffset);
                &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.mappedByteBuffer.putInt(absIndexPos + 4 + 8, (&lt;span&gt;int&lt;/span&gt;&lt;span&gt;) timeDiff);
                &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.mappedByteBuffer.putInt(absIndexPos + 4 + 8 + 4&lt;span&gt;, slotValue);
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å†™å…¥slotValueä¸ºå½“å‰å¯çŸ¥çš„ç´¢å¼•è®°å½•æ¡æ•°
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å³æ¯æ¬¡å†™å…¥ç´¢å¼•ä¹‹åï¼Œå¦‚æœå­˜åœ¨hashå†²çªï¼Œé‚£ä¹ˆå®ƒä¼šå†™å…¥è‡ªèº«çš„ä½ç½®
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; è€Œæ­¤æ—¶ slotValue å¿…å®šå­˜åœ¨ä¸€ä¸ªå€¼ï¼Œé‚£å°±æ˜¯ä¸Šä¸€ä¸ªå‘ç”Ÿå†²çªçš„ç´¢å¼•ï¼Œä»è€Œå½¢æˆè‡ªç„¶çš„é“¾è¡¨
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æŸ¥æ‰¾æ•°æ®æ—¶ï¼Œåªéœ€æ ¹æ®slotValueå³å¯ä»¥æ‰¾åˆ°ä¸Šä¸€ä¸ªå†™å…¥çš„ç´¢å¼•ï¼Œè¿™è®¾è®¡å¦™å“‰ï¼
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; åšäº†2ç‚¹å…³é”®æ€§ä¿è¯ï¼š1. æ•°æ®è‡ªå¢ä¸å†²çª; 2. hashå†²çªè‡ªåˆ·æ–°; ç£ç›˜ç‰ˆçš„hashç»“æ„å·²ç„¶å½¢æˆ&lt;/span&gt;
                &lt;span&gt;this&lt;/span&gt;.mappedByteBuffer.putInt(absSlotPos, &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.indexHeader.getIndexCount());

                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (&lt;span&gt;this&lt;/span&gt;.indexHeader.getIndexCount() &amp;lt;= 1&lt;span&gt;) {
                    &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.indexHeader.setBeginPhyOffset(phyOffset);
                    &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.indexHeader.setBeginTimestamp(storeTimestamp);
                }

                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (invalidIndex ==&lt;span&gt; slotValue) {
                    &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.indexHeader.incHashSlotCount();
                }
                &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.indexHeader.incIndexCount();
                &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.indexHeader.setEndPhyOffset(phyOffset);
                &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.indexHeader.setEndTimestamp(storeTimestamp);

                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
            } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Exception e) {
                log.error(&lt;/span&gt;&quot;putKey exception, Key: &quot; + key + &quot; KeyHashCode: &quot; +&lt;span&gt; key.hashCode(), e);
            } &lt;/span&gt;&lt;span&gt;finally&lt;/span&gt;&lt;span&gt; {
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (fileLock != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                    &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
                        fileLock.release();
                    } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (IOException e) {
                        log.error(&lt;/span&gt;&quot;Failed to release the lock&quot;&lt;span&gt;, e);
                    }
                }
            }
        } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
            log.warn(&lt;/span&gt;&quot;Over index file capacity: index count = &quot; + &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.indexHeader.getIndexCount()
                &lt;/span&gt;+ &quot;; index max num = &quot; + &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.indexNum);
        }

        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€rocketmq å·§å¦™åœ°ä½¿ç”¨äº†è‡ªå¢ç»“æ„å’Œhash slot, å®Œç¾å®ç°ä¸€ä¸ªç£ç›˜ç‰ˆçš„hashç´¢å¼•ã€‚ç›¸ä¿¡è¿™ä¹Ÿä¼šç»™æˆ‘ä»¬å¹³æ—¶çš„å·¥ä½œå¸¦æ¥ä¸€äº›æç¤ºã€‚&lt;/p&gt;

&lt;h3&gt;6. å†™åœ¨æœ€å&lt;/h3&gt;
&lt;p&gt;ã€€ã€€ä»¥ä¸Šå°±æ˜¯æœ¬æ–‡å¯¹rocketmqçš„å­˜å‚¨æ¨¡å‹è®¾è®¡çš„è§£æäº†ï¼Œé€šè¿‡è¿™äº›è§£æï¼Œç›¸ä¿¡å¤§å®¶å¯¹å…¶å·¥ä½œåŸç†ä¹Ÿä¼šæœ‰è´¨çš„ç†è§£ã€‚å­˜å‚¨å®é™…ä¸Šæ˜¯ç›®å‰æˆ‘ä»¬çš„è®¸å¤šçš„ç³»ç»Ÿä¸­çš„éå¸¸æ ¸å¿ƒéƒ¨åˆ†ï¼Œå› ä¸ºå¤§éƒ¨åˆ†çš„ä¸šåŠ¡å‡ ä¹éƒ½æ˜¯åœ¨å­˜å‚¨ä¹‹å‰åšä¸€äº›ç®€å•çš„è®¡ç®—ã€‚&lt;/p&gt;
&lt;p&gt;Â  Â  Â  å¾ˆæ˜¾ç„¶ä¸šåŠ¡å¾ˆé‡è¦ï¼Œä½†æœ‰äº†å­˜å‚¨çš„åº•å­ï¼Œè¿˜ä½•æ„ä¸šåŠ¡å®ç°éš¾ï¼Ÿ&lt;/p&gt;


</description>
<pubDate>Sat, 02 Jan 2021 15:08:00 +0000</pubDate>
<dc:creator>ç­‰ä½ å½’å»æ¥</dc:creator>
<og:description>æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œè¯´æ˜¯ä¸€ä¸ªé€šä¿¡ç»„ä»¶ä¹Ÿæ²¡æœ‰é”™ï¼Œå› ä¸ºå®ƒçš„æœ¬èŒå·¥ä½œæ˜¯åšæ¶ˆæ¯çš„ä¼ é€’ã€‚ç„¶è€Œè¦åšåˆ°é«˜æ•ˆçš„æ¶ˆæ¯ä¼ é€’ï¼Œå¾ˆé‡è¦çš„ä¸€ç‚¹æ˜¯æ•°æ®ç»“æ„ï¼Œæ•°æ®ç»“æ„è®¾è®¡çš„å¥½åï¼Œä¸€å®šç¨‹åº¦ä¸Šå†³å®šäº†è¯¥æ¶ˆæ¯ç»„ä»¶çš„æ€§èƒ½ä»¥åŠèƒ½åŠ›ä¸Šé™ã€‚ 1. æ¶ˆæ¯ä¸­</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/yougewe/p/14224366.html</dc:identifier>
</item>
<item>
<title>Spring Cloud Hystrixæºç ç¯‡ï¼ˆåäºŒï¼‰ - ç«¥è¯è¿°è¯´æˆ‘çš„ç»“å±€</title>
<link>http://www.cnblogs.com/xing1/p/14223358.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/xing1/p/14223358.html</guid>
<description>&lt;p&gt;Hystrixæµç¨‹å›¾å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1287410/202101/1287410-20210102144532612-1184521007.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;



&lt;p&gt;Hystrixæ•´ä¸ªå·¥ä½œæµå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;æ„é€ ä¸€ä¸ªÂ HystrixCommandæˆ–HystrixObservableCommandå¯¹è±¡ï¼Œç”¨äºå°è£…è¯·æ±‚ï¼Œå¹¶åœ¨æ„é€ æ–¹æ³•é…ç½®è¯·æ±‚è¢«æ‰§è¡Œéœ€è¦çš„å‚æ•°ï¼›&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œå‘½ä»¤ï¼ŒHystrixæä¾›äº†4ç§æ‰§è¡Œå‘½ä»¤çš„æ–¹æ³•ï¼Œåé¢è¯¦è¿°ï¼›&lt;/li&gt;
&lt;li&gt;åˆ¤æ–­æ˜¯å¦ä½¿ç”¨ç¼“å­˜å“åº”è¯·æ±‚ï¼Œè‹¥å¯ç”¨äº†ç¼“å­˜ï¼Œä¸”ç¼“å­˜å¯ç”¨ï¼Œç›´æ¥ä½¿ç”¨ç¼“å­˜å“åº”è¯·æ±‚ã€‚Hystrixæ”¯æŒè¯·æ±‚ç¼“å­˜ï¼Œä½†éœ€è¦ç”¨æˆ·è‡ªå®šä¹‰å¯åŠ¨ï¼›&lt;/li&gt;
&lt;li&gt;åˆ¤æ–­ç†”æ–­å™¨æ˜¯å¦æ‰“å¼€ï¼Œå¦‚æœæ‰“å¼€ï¼Œè·³åˆ°ç¬¬8æ­¥ï¼›&lt;/li&gt;
&lt;li&gt;åˆ¤æ–­çº¿ç¨‹æ± /é˜Ÿåˆ—/ä¿¡å·é‡æ˜¯å¦å·²æ»¡ï¼Œå·²æ»¡åˆ™è·³åˆ°ç¬¬8æ­¥ï¼›&lt;/li&gt;
&lt;li&gt;æ‰§è¡ŒHystrixObservableCommand.construct()æˆ–HystrixCommand.run()ï¼Œå¦‚æœæ‰§è¡Œå¤±è´¥æˆ–è€…è¶…æ—¶ï¼Œè·³åˆ°ç¬¬8æ­¥ï¼›å¦åˆ™ï¼Œè·³åˆ°ç¬¬9æ­¥ï¼›&lt;/li&gt;
&lt;li&gt;ç»Ÿè®¡ç†”æ–­å™¨ç›‘æ§æŒ‡æ ‡ï¼›&lt;/li&gt;
&lt;li&gt;èµ°Fallbackå¤‡ç”¨é€»è¾‘&lt;/li&gt;
&lt;li&gt;è¿”å›è¯·æ±‚å“åº”&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;ä»æµç¨‹å›¾ä¸Šå¯çŸ¥é“ï¼Œç¬¬5æ­¥çº¿ç¨‹æ± /é˜Ÿåˆ—/ä¿¡å·é‡å·²æ»¡æ—¶ï¼Œè¿˜ä¼šæ‰§è¡Œç¬¬7æ­¥é€»è¾‘ï¼Œæ›´æ–°ç†”æ–­å™¨ç»Ÿè®¡ä¿¡æ¯ï¼Œè€Œç¬¬6æ­¥æ— è®ºæˆåŠŸä¸å¦ï¼Œéƒ½ä¼šæ›´æ–°ç†”æ–­å™¨ç»Ÿè®¡ä¿¡æ¯ã€‚&lt;/p&gt;

&lt;p&gt;hystrixåœ¨æœåŠ¡é™çº§ç†”æ–­çš„è¿‡ç¨‹ä¸­æœ‰å‡ ä¸ªæ­¥éª¤ä»–æ˜¯å¿…é¡»è¦å»å®Œæˆçš„&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Â å¯é…ç½®åŒ–çš„é™çº§ç­–ç•¥ï¼ˆæ ¹æ®ä¸åŒçš„æœåŠ¡é™çº§ç±»å‹é…ç½®ä¸åŒçš„é™çº§ç­–ç•¥æ–¹æ¡ˆï¼‰:
&lt;ul&gt;&lt;li&gt;ä¸‰ç§æ–¹å¼ï¼šä¿¡å·é‡/çº¿ç¨‹ ã€è¶…æ—¶ï¼ˆé»˜è®¤1sï¼‰ã€ç†”æ–­ï¼ˆé”™è¯¯ç‡ï¼‰&lt;/li&gt;
&lt;li&gt;åœ¨HystrixCommandPropertyç±»ä¸­é€šè¿‡ç›¸å…³å±æ€§å»é…ç½®æ”¹å˜ä»–çš„é»˜è®¤ç­–ç•¥ï¼ˆä¸Šç¯‡ä¸­æœ‰è¯´æ˜è¿‡ï¼‰&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;å¯ä»¥è¯†åˆ«çš„é™çº§è¾¹ç•Œï¼š
&lt;ul&gt;&lt;li&gt;@HystrixCommand(Spring AOPé€šè¿‡æ³¨è§£æ ‡æ³¨ä¸€ä¸ªæ¥å£çš„èµ„æºï¼Œå»è¡¨ç¤ºè¯´æ˜è¿™ä¸ªæ¥å£éœ€è¦é€šè¿‡Hystrixæ¥æ¥ç®¡è¿™ä¸ªè¯·æ±‚ï¼Œå¦‚æœè¾¾åˆ°æ³¨è§£å†…çš„é…ç½®è¦æ±‚å°±ç†”æ–­)&lt;/li&gt;
&lt;li&gt;è‡ªå·±å»ç»§æ‰¿HystrixCommand æŠ½è±¡ç±»ï¼Œç­‰ä¸‹æ¼”ç¤ºä¸‹ï¼Œè¿™ç©æ„è¿˜æŒºå¥½ç©çš„&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;æ•°æ®é‡‡é›†ï¼š
&lt;ul&gt;&lt;li&gt;å¦‚ä½•è§¦å‘ç†”æ–­ï¼ˆä¸Šç¯‡å¹…ä¹Ÿè¯´è¿‡10sÂ å†…20ä¸ªè¯·æ±‚ ï¼Œé”™è¯¯ç‡è¾¾åˆ°50ï¼‰ï¼Œè¿™é‡Œå¼•å‡ºçš„é—®é¢˜æ˜¯å¦‚ä½•é‡‡é›†æ•°æ®ï¼Œå¦‚ä½•ç»Ÿè®¡æ•°æ®.&lt;/li&gt;
&lt;li&gt;SEMAPHOREï¼Œæœ€å¤§å¹¶å‘æ•°é‡ ï¼ˆå®ƒåº•å±‚å…¶å®å°±æ˜¯ä¸ªAQSÂ ç»Ÿè®¡æ¬¡æ•°tryAcquire(), acquire()ï¼‰&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;è¡Œä¸ºå¹²é¢„ï¼š è§¦å‘é™çº§/ç†”æ–­ä¹‹åï¼Œå¯¹æ­£å¸¸ä¸šåŠ¡äº§ç”Ÿå½±å“&lt;/li&gt;
&lt;li&gt;ç»“æœå¹²é¢„ï¼šÂ é€šè¿‡fallback()è¿”å›æ•°æ®&lt;/li&gt;
&lt;li&gt;è‡ªåŠ¨æ¢å¤ï¼ˆå¤„äºç†”æ–­çŠ¶æ€ä¸‹ï¼Œä¼šæ¯éš”5så°è¯•å»æ¢å¤ï¼‰&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;Â 2.1ã€é€šè¿‡HystrixCommandÂ æ¥ç®¡æˆ‘ä»¬å®šä¹‰çš„è¯·æ±‚&lt;/h2&gt;
&lt;p&gt;ä¸Šä¸€ç¯‡å¹…æˆ‘æ˜¯é€šè¿‡æ³¨è§£çš„æ–¹å¼æ¥è¿›è¡ŒæœåŠ¡ç†”é”™çš„ï¼Œè¿™æ¬¡ä¸é€šè¿‡æ³¨è§£æ¢ä¸€ç§æ–¹å¼ï¼Œé¦–å…ˆåœ¨spring-cloud-useræœåŠ¡ä¸­å†™ä»¥ä¸‹å†…å®¹&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1287410/202101/1287410-20210102161558404-196684410.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;


&lt;p&gt;Â &lt;img src=&quot;https://img2020.cnblogs.com/blog/1287410/202101/1287410-20210102162125662-1301554900.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;


&lt;p&gt;Â ç„¶åå¯åŠ¨æœåŠ¡è®¿é—®æµè§ˆå™¨ï¼Œç»“æœå¦‚æœæˆ‘æƒ³çš„ä¸€æ ·&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1287410/202101/1287410-20210102162355427-986689618.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;


&lt;h2&gt;Â 2.2ã€Hystrixæ˜¯å¦‚ä½•å·¥ä½œçš„&lt;/h2&gt;
&lt;p&gt;ä¸‹é¢æ¼”ç¤ºä¸ªå¸¦è¶…æ—¶é™çº§çš„Hystrixæ³¨è§£&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1287410/202101/1287410-20210102164117278-1720757661.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â ç„¶åç”¨AOPå†™è‡ªå·±çš„æ‹¦æˆªè§„åˆ™&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1287410/202101/1287410-20210102170315609-42207692.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;


&lt;div class=&quot;cnblogs_code&quot; readability=&quot;48&quot;&gt;
&lt;pre&gt;
&lt;span&gt;/*&lt;/span&gt;&lt;span&gt;*
 *è¿™é‡Œé¢ç”¨åˆ°çš„æ˜¯AOPçš„çŸ¥è¯†ç‚¹ï¼Œå¦‚æœä¸äº†è§£å¯ä»¥å…ˆè‡ªè¡Œè¡¥ä¸‹ï¼Œåé¢æˆ‘æœ‰ç©ºæŠŠSpringçš„AOPåŸç†ä¹Ÿå†™ä¸‹ï¼Œè¿™æ ·å›å¤´çœ‹è¿™ä¸ªå°±æ²¡è¿™ä¹ˆéš¾äº†
 &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;&lt;span&gt;
@Component
@Aspect  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;åˆ‡å…¥&lt;/span&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; GhyHystrixAspect {
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;é€šè¿‡çº¿ç¨‹æ± å»è¯·æ±‚&lt;/span&gt;
    ExecutorService executorService= Executors.newFixedThreadPool(&lt;span&gt;10&lt;/span&gt;&lt;span&gt;);
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å®šä¹‰åˆ‡ç‚¹é’ˆå¯¹GhyHystrixè¿›è¡Œåˆ‡å…¥&lt;/span&gt;
    @Pointcut(value = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;@annotation(GhyHystrix)&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; pointCut(){}
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;åˆ‡å…¥åæ‰§è¡Œçš„æ–¹æ³•&lt;/span&gt;
    @Around(value = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;pointCut()&amp;amp;&amp;amp;@annotation(hystrixCommand)&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; Object doPointCut(ProceedingJoinPoint joinPoint, GhyHystrix hystrixCommand) throws InterruptedException, ExecutionException, TimeoutException, NoSuchMethodException, InvocationTargetException, IllegalAccessException {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å®šä¹‰è¶…æ—¶é™çº§&lt;/span&gt;
        &lt;span&gt;int&lt;/span&gt; timeout=&lt;span&gt;hystrixCommand.timeout();
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å‰ç½®çš„åˆ¤æ–­é€»è¾‘&lt;/span&gt;
        Future future=executorService.submit(()-&amp;gt;&lt;span&gt;{
            &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; joinPoint.proceed(); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;æ‰§è¡Œç›®æ ‡æ–¹æ³•&lt;/span&gt;
            } &lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Throwable throwable) {
                throwable.printStackTrace();
            }
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
        });
        Object result;
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å¾—åˆ°å¼€å§‹å’Œç»“æŸæ—¶é—´åˆ¤æ–­æ˜¯å¦è¶…æ—¶ï¼Œå¦‚æœè¶…æ—¶å°±é™çº§&lt;/span&gt;
            result=future.&lt;span&gt;get&lt;/span&gt;&lt;span&gt;(timeout, TimeUnit.MILLISECONDS);
        } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt; (InterruptedException | ExecutionException |&lt;span&gt; TimeoutException e) {
            e.printStackTrace();
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è¶…æ—¶äº†å°±å–æ¶ˆè¯·æ±‚&lt;/span&gt;
            future.cancel(&lt;span&gt;true&lt;/span&gt;&lt;span&gt;);
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å…ˆåˆ¤æ–­æ˜¯å¦ä¸ºç©ºå¦‚æœç©ºå°±æŠŠå¼‚å¸¸æŠ›å‡ºå»&lt;/span&gt;
            &lt;span&gt;if&lt;/span&gt;&lt;span&gt;(StringUtils.isBlank(hystrixCommand.fallback())){
                &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt;&lt;span&gt; e;
            }
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è°ƒç”¨fallback&lt;/span&gt;
            result=&lt;span&gt;invokeFallback(joinPoint,hystrixCommand.fallback());
        }
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; result;
    }
   &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;åå°„è°ƒç”¨&lt;/span&gt;
    &lt;span&gt;private&lt;/span&gt;&lt;span&gt; Object invokeFallback(ProceedingJoinPoint joinPoint,String fallback) throws NoSuchMethodException, InvocationTargetException, IllegalAccessException {
        MethodSignature signature&lt;/span&gt;=&lt;span&gt;(MethodSignature)joinPoint.getSignature();
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;æ‹¿åˆ°æ–¹æ³•çš„ä¿¡æ¯&lt;/span&gt;
        Method method=&lt;span&gt;signature.getMethod();
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å¾—åˆ°å‚æ•°ç±»å‹&lt;/span&gt;
        Class&amp;lt;?&amp;gt;[] parameterTypes=&lt;span&gt;method.getParameterTypes();
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;ä»¥ä¸Šæ˜¯è·å–è¢«ä»£ç†çš„æ–¹æ³•çš„å‚æ•°å’ŒMethod
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å¾—åˆ°fallbackæ–¹æ³•&lt;/span&gt;
        &lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
            Method fallbackMethod&lt;/span&gt;=&lt;span&gt;joinPoint.getTarget().getClass().getMethod(fallback,parameterTypes);
            fallbackMethod.setAccessible(&lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;);
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å®Œæˆåå°„è°ƒç”¨&lt;/span&gt;
            &lt;span&gt;return&lt;/span&gt;&lt;span&gt; fallbackMethod.invoke(joinPoint.getTarget(),joinPoint.getArgs());
        } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Exception e) {
            e.printStackTrace();
            &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt;&lt;span&gt; e;
        }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç„¶åå†å†™ä¸ªè°ƒç”¨é€»è¾‘ï¼Œç”¨è‡ªå·±å®šä¹‰çš„æ³¨è§£&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1287410/202101/1287410-20210102170402149-1134325385.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â æµè§ˆå™¨è®¿é—®ï¼Œè¿”å›çš„ä¸æ˜¯æˆ‘ä»¬åˆšåˆšå®šä¹‰çš„é™çº§å†…å®¹ï¼Œå…¶å®è¿™ä¹ŸæŒºå¥½æƒ³çš„ï¼Œæˆ‘ç”¨çš„æ˜¯ä¹‹å‰çš„é¡¹ç›®ï¼Œä¹‹å‰åœ¨spring-cloud-apiå·¥ç¨‹ä¸­å®šä¹‰äº†ç†”æ–­è§„åˆ™ï¼Œæ”¹ä¸€ä¸‹å°±å¥½&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1287410/202101/1287410-20210102170427859-1998368673.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;


&lt;p&gt;Â å°†è¿™æ­¤å†…å®¹æ”¹ä¸‹å°±å¥½ï¼Œè¿˜æœ‰é…ç½®æ–‡ä»¶éšè—ä¸‹ï¼Œè¿™é‡Œå°±ä¸æäº†&lt;img src=&quot;https://img2020.cnblogs.com/blog/1287410/202101/1287410-20210102170600979-1287571914.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;

&lt;p&gt;å½“è¯·æ±‚è¿‡æ¥æ—¶ï¼Œå¦‚æœè¯·æ±‚å¤±è´¥ï¼Œå…ˆåˆ¤æ–­è¯·æ±‚æ¬¡æ•°æ˜¯å¦è¾¾åˆ°äº†æœ€å°è¯·æ±‚æ¬¡æ•°ï¼Œå†åˆ¤æ–­é”™è¯¯ç‡æ˜¯å¦è¾¾åˆ°äº†é˜ˆå€¼ï¼Œå¦‚æœæ²¡è¾¾åˆ°å°±ç»§ç»­è¯·æ±‚ï¼Œè¿™ä¸ªé”™è¯¯ç‡çš„ç»Ÿè®¡æ—¶é—´é»˜è®¤æ˜¯10Sï¼›å¦‚æœè¾¾åˆ°äº†é˜ˆå€¼å°±è¦æ‰“å¼€æ–­è·¯å™¨ï¼Œæ‰“å¼€æ–­Â è·¯å™¨åæœ‰5ç§’çš„æ—¶é—´æ˜¯ç†”æ–­çŠ¶æ€ï¼Œ5ç§’åï¼Œå¦‚æœæœ‰è¯·æ±‚è¿‡æ¥ï¼Œå°±ä¼šè¯•ç€æŠŠè¯·æ±‚å‘é€åˆ°è¿œç¨‹æœåŠ¡ï¼Œå¦‚æœæˆåŠŸï¼Œæ–­è·¯å™¨å°±å…³é—­ï¼›å¦‚æœå¤±è´¥æ–­è·¯å™¨ç»§ç»­å¼€å¯ï¼›è¿™ä¸ªæµç¨‹å°±å¼•å‡ºç¬¬ä¸€ä¸ªæ¦‚å¿µï¼Œé‚£å°±æ˜¯æ»‘åŠ¨çª—å£&lt;/p&gt;
&lt;h2&gt;3.1ã€æ»‘åŠ¨çª—å£&lt;/h2&gt;
&lt;p&gt;åœ¨ hystrix é‡Œï¼Œå¤§é‡ä½¿ç”¨äº† RxJava è¿™ä¸ªå“åº”å¼å‡½æ•°ç¼–ç¨‹æ¡†æ¶ï¼Œæ»‘åŠ¨çª—å£çš„å®ç°ä¹Ÿæ˜¯ä½¿ç”¨äº† RxJava æ¡†æ¶ã€‚å®ƒå…¶å®å°±æ˜¯ä¸€ä¸ªÂ æµé‡æ§åˆ¶æŠ€æœ¯ï¼›ç«Ÿç„¶æåˆ°äº†æ»‘åŠ¨çª—å£ï¼Œé‚£å°±å¿…é¡»è¦æä¸¤ä¸Šä¸œè¥¿ï¼Œä¸€ä¸ªæ˜¯è®¡æ•°å™¨ï¼Œå¦ä¸€ä¸ªå°±æ˜¯æ»‘åŠ¨çª—å£;ä¸ºäº†æ›´é€šä¿—çš„ç†è§£è®¡æ•°å™¨å’Œæ»‘åŠ¨çª—å£å…³ç³»ï¼Œå°±ä»¥ä¸€ä¸ªä¾‹å­è¯´æ˜ï¼›å‡å¦‚æœ‰ä¸€ä¸ªåœºæ™¯ï¼šè¦åšä¸€ä¸ªè¯·æ±‚é™åˆ¶ï¼Œé™åˆ¶è¦æ±‚ä¸€åˆ†é’Ÿå†…æœ€å¤šåªèƒ½æœ‰60ä¸ªè¯·æ±‚é€šè¿‡ï¼Œè¿™æ—¶æœ€é€šç”¨çš„åšæ–¹å°±æ˜¯ç”¨ä¸ªè®¡æ•°å™¨ï¼Œè®¡æ•°ä¸€åˆ†é’Ÿå†…è¯·æ±‚çš„æ¬¡æ•°ï¼Œåœ¨è¿™ä¸€åˆ†é’Ÿå†…æ¯æ¥ä¸€ä¸ªè¯·æ±‚è®¡æ•°å™¨å°±åŠ 1ï¼›ä¸€åˆ†é’Ÿè¿‡åè¿›å…¥ä¸‹ä¸€ä¸ªä¸€åˆ†é’Ÿæ—¶è®¡æ•°å™¨å°±æŠŠè®¡æ•°å½’é›¶é‡æ–°è®¡æ•°ï¼›æ‰€ä»¥è¯´å¦‚æœè¦é™æµåˆ¤æ–­å°±åªç”¨åˆ¤æ–­è¿™ä¸€åˆ†é’Ÿå†…çš„è®¡æ•°é‡å°±å¯ä»¥äº†ï¼Œä½†è¿™ç§åšæ³•åœ¨æ¯ä¸ª1åˆ†é’Ÿçš„ä¸´ç•Œå€¼æ—¶æ˜¯æœ‰é—®é¢˜çš„ï¼Œé—®é¢˜æ˜¯å•¥å‘¢ï¼Œå‡å¦‚è¯´åœ¨0åˆ°58Sæ—¶éƒ½æ²¡æœ‰è¯·æ±‚ï¼Œä½†æ˜¯çªç„¶åœ¨ç¬¬59Sæ—¶ä¸€ä¸‹å­æ¥äº†60ä¸ªè¯·æ±‚ï¼Œåœ¨60Sæ—¶å†æ¥60ä¸ªè¯·æ±‚ï¼Œè¿™ä¸ªæ—¶å€™å‘ç”Ÿçš„æƒ…å†µæ˜¯åœ¨ç›¸é‚»ä¸¤ç§’å†…ä¸€ä¸‹å­æ¥äº†120ä¸ªè¯·æ±‚ï¼Œæ­¤æ—¶å› ä¸º59Såœ¨ç¬¬ä¸€ä¸ªæ—¶é—´æ®µï¼›60Såœ¨ç¬¬äºŒä¸ªæ—¶é—´æ®µï¼Œæ‰€ä»¥æ²¡æœ‰æ»¡è¶³è§¦å‘ç†”æ–­æ¡ä»¶ï¼Œè¿™å°±å¯¼è‡³äº†ç›¸é‚»ä¸¤ç§’é—´çš„è¯·æ±‚é‡è¿‡äº†é˜ˆå€¼ï¼Œç³»ç»Ÿå¾ˆå¯èƒ½ç‚¸äº†ï¼Œä¸ºæ­¤å¼•å‡ºäº†å¦ä¸€ä¸ªç©æ„ï¼Œé‚£å°±æ˜¯æ»‘åŠ¨çª—å£ï¼›æ»‘åŠ¨çª—å£æŠŠä¸€åˆ†é’Ÿåˆ†æˆ6ä¸ªçª—å£ï¼Œæ¯ä¸ªçª—å£æ˜¯10Sï¼Œçº¢è‰²æ¡†ä»£è¡¨å¯ä»¥æ»‘åŠ¨çš„æ»‘åŠ¨çª—å£ï¼Œé»‘è‰²çš„çª—å£ä»£è¡¨10Sçš„ç»Ÿè®¡æ•°å€¼ï¼Œç¬¬ä¸€ä¸ª10Sç»Ÿè®¡Â å®Œæˆåçº¢è‰²æ»‘åŠ¨çª—å£ä¼šå‘å‰æ»‘åŠ¨ä¸€æ ¼ï¼Œæ”¹æˆæ»‘åŠ¨çª—å£åä»–ç»Ÿè®¡çš„å°±æ˜¯çº¢è‰²æ»‘åŠ¨çª—å£å†…çš„è®¿é—®é‡æ€»å’Œäº†&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1287410/202101/1287410-20210102205538265-1705514939.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;

&lt;p&gt;hystrixæ˜¯é€šè¿‡æ»‘åŠ¨çª—å£ç»Ÿè®¡çš„ï¼Œä»–ä¸€å…±æœ‰10ä¸ªçª—å£ï¼Œæ¯ä¸ªçª—å£ä»£è¡¨1Sï¼Œæ‰€ä»¥ä»–ç»Ÿè®¡çš„æ˜¯ä»–10Så†…çš„æ•°æ®&lt;/p&gt;

&lt;p&gt;Â &lt;img src=&quot;https://img2020.cnblogs.com/blog/1287410/202101/1287410-20210102210601675-1676126993.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;span lang=&quot;zh-cn&quot;&gt;ä¸Šå›¾çš„æ¯ä¸ªå°çŸ©å½¢ä»£è¡¨ä¸€ä¸ªæ¡¶ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸ªæ¡¶éƒ½è®°å½•ç€&lt;span lang=&quot;en-us&quot;&gt;1&lt;span lang=&quot;zh-cn&quot;&gt;ç§’å†…çš„å››ä¸ªæŒ‡æ ‡æ•°æ®ï¼šæˆåŠŸé‡ã€å¤±è´¥é‡ã€è¶…æ—¶é‡å’Œæ‹’ç»é‡ï¼Œè¿™é‡Œçš„æ‹’ç»é‡æŒ‡çš„å°±æ˜¯ä¸Šé¢æµç¨‹å›¾ä¸­ã€ä¿¡å·é‡&lt;span lang=&quot;en-us&quot;&gt;/çº¿ç¨‹æ± èµ„æºæ£€æŸ¥&lt;span lang=&quot;zh-cn&quot;&gt;ã€‘ä¸­è¢«æ‹’ç»çš„æµé‡ã€‚&lt;span lang=&quot;en-us&quot;&gt;10ä¸ªæ¡¶åˆèµ·æ¥æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ»‘åŠ¨çª—å£&lt;span lang=&quot;zh-cn&quot;&gt;ï¼Œæ‰€ä»¥è®¡ç®—ä¸€ä¸ªæ»‘åŠ¨çª—å£çš„æ€»æ•°æ®éœ€è¦å°†&lt;span lang=&quot;en-us&quot;&gt;10ä¸ªæ¡¶çš„æ•°æ®åŠ èµ·æ¥&lt;span lang=&quot;zh-cn&quot;&gt;ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;


&lt;p&gt;Hystrixç†”æ–­çš„@HystrixCommandæ³¨è§£ï¼Œæ˜¯é€šè¿‡HystrixCommandAspectè¿™ä¸ªåˆ‡é¢æ¥å¤„ç†çš„ã€‚å…¶ä¸­å…³æ³¨@Aroundæ³¨è§£å£°æ˜çš„æ–¹æ³•ï¼Œå®ƒé’ˆå¯¹äºè¯·æ±‚åˆå¹¶ï¼Œä»¥åŠé™çº§çš„æ³¨è§£è¿›è¡Œä»£ç†ã€‚è¿™é‡Œé‡ç‚¹é’ˆå¯¹HystrixCommandè¿™ä¸ªæ³¨è§£è¿›è¡Œè¯¦ç»†åˆ†æã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;getMethodFromTarget è·å–ç›®æ ‡æ–¹æ³•ä¿¡æ¯&lt;/li&gt;
&lt;li&gt;MetaHolder metaHolder = metaHolderFactory.create(joinPoint); è·å–å…ƒæ•°æ®ï¼Œæ¯”å¦‚è°ƒç”¨æ–¹æ³•ï¼ŒHystrixPropertyæ³¨è§£æ•°æ®ã€æ–¹æ³•å‚æ•°ç­‰&lt;/li&gt;
&lt;li&gt;HystrixCommandFactory.getInstance().create è·å–è°ƒç”¨è€…ï¼Œå®ƒæŒæœ‰ä¸€ä¸ªå‘½ä»¤å¯¹è±¡ï¼Œå¹¶ä¸”å¯ä»¥åœ¨åˆé€‚çš„æ—¶å€™é€šè¿‡è¿™ä¸ªå‘½ä»¤å¯¹è±¡å®Œæˆå…·ä½“çš„ä¸šåŠ¡é€»è¾‘&lt;/li&gt;
&lt;li&gt;executeï¼Œæ‰§è¡Œå‘½ä»¤&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;cnblogs_code&quot; readability=&quot;40&quot;&gt;
&lt;pre&gt;
@Around(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;hystrixCommandAnnotationPointcut() ||&lt;/span&gt;
hystrixCollapserAnnotationPointcut()&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;
&lt;span&gt;public&lt;/span&gt;&lt;span&gt; Object methodsAnnotatedWithHystrixCommand(final ProceedingJoinPoint
joinPoint) throws Throwable {
  Method method &lt;/span&gt;=&lt;span&gt; getMethodFromTarget(joinPoint);
  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;çœç•¥ä»£ç ...&lt;/span&gt;
  MetaHolderFactory metaHolderFactory =&lt;span&gt;
META_HOLDER_FACTORY_MAP.&lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt;(HystrixPointcutType.of(method));
  MetaHolder metaHolder &lt;/span&gt;=&lt;span&gt; metaHolderFactory.create(joinPoint);
  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å¦‚æœæ˜¯å¼‚æ­¥ï¼Œåˆ™åˆ›å»ºGenericObservableCommandï¼Œ å¦åˆ™ï¼Œåˆ™åˆ›å»ºGenericCommand&lt;/span&gt;
  HystrixInvokable invokable =&lt;span&gt;
HystrixCommandFactory.getInstance().create(metaHolder);
 
  ExecutionType executionType &lt;/span&gt;= metaHolder.isCollapserAnnotationPresent() ?&lt;span&gt;
    metaHolder.getCollapserExecutionType() : metaHolder.getExecutionType();
  Object result;
  &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (!metaHolder.isObservable()) { &lt;span&gt;//&lt;/span&gt;&lt;span&gt;æ˜¯å¦æ˜¯å“åº”å¼çš„ï¼ˆç”±äºæˆ‘ä»¬è¿™äº›éƒ½æ˜¯åŒæ­¥çš„ä¼šèµ°&lt;/span&gt;
&lt;span&gt;è¿™ä¸ªé€»è¾‘ï¼‰&lt;br/&gt;//é»˜è®¤æ˜¯èµ°è¿™é‡Œé¢ï¼Œç”¨å‘½ä»¤æ‰§è¡Œå™¨å»æ‰§è¡Œ
      result &lt;/span&gt;=&lt;span&gt; CommandExecutor.execute(invokable, executionType,
metaHolder);
   } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
      result &lt;/span&gt;=&lt;span&gt; executeObservable(invokable, executionType, metaHolder);
   }
 } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (HystrixBadRequestException e) {
    &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt;&lt;span&gt; e.getCause();
 } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (HystrixRuntimeException e) {
    &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt;&lt;span&gt; hystrixRuntimeExceptionToThrowable(metaHolder, e);
}
  &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; result;
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ç‚¹å‡»è¿›å…¥ CommandExecutorç±»çš„executeæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¸»è¦ç”¨æ¥æ‰§è¡Œå‘½ä»¤ï¼Œä»ä»£ç ä¸­å¯ä»¥çœ‹å‡ºè¿™é‡Œæœ‰ä¸‰ä¸ªæ‰§è¡Œç±»å‹ï¼Œåˆ†åˆ«æ˜¯åŒæ­¥ã€å¼‚æ­¥ã€ä»¥åŠå“åº”å¼ã€‚å…¶ä¸­ï¼Œå“åº”å¼åˆåˆ†ä¸ºCold Observableï¼ˆobservable.toObservable()ï¼‰ å’Œ HotObservableï¼ˆobservable.observe()ï¼‰&lt;/p&gt;
&lt;p&gt;é»˜è®¤çš„executionType=SYNCHRONOUS ï¼ŒåŒæ­¥è¯·æ±‚ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;execute():åŒæ­¥æ‰§è¡Œï¼Œè¿”å›ä¸€ä¸ªå•ä¸€çš„å¯¹è±¡ç»“æœï¼Œå‘ç”Ÿé”™è¯¯æ—¶æŠ›å‡ºå¼‚å¸¸ã€‚&lt;/li&gt;
&lt;li&gt;queue():å¼‚æ­¥æ‰§è¡Œï¼Œè¿”å›ä¸€ä¸ª Future å¯¹è±¡ï¼ŒåŒ…å«ç€æ‰§è¡Œç»“æŸåè¿”å›çš„å•ä¸€ç»“æœã€‚&lt;/li&gt;
&lt;li&gt;observe():è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ª Observable å¯¹è±¡ï¼Œå®ƒä»£è¡¨æ“ä½œçš„å¤šä¸ªç»“æœï¼Œä½†æ˜¯å·²ç»è¢«è®¢é˜…è€…æ¶ˆè´¹æ‰äº†ã€‚&lt;/li&gt;
&lt;li&gt;toObservable():è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ª Observable å¯¹è±¡ï¼Œå®ƒä»£è¡¨æ“ä½œçš„å¤šä¸ªç»“æœï¼Œéœ€è¦å’±ä»¬è‡ªå·±æ‰‹åŠ¨è®¢é˜…å¹¶æ¶ˆè´¹æ‰ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒHystrixç”¨åˆ°äº†RxJavaè¿™ä¸ªæ¡†æ¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªå“åº”å¼ç¼–ç¨‹æ¡†æ¶ï¼Œåœ¨Androidé‡Œé¢ç”¨å¾—æ¯”è¾ƒå¤šÂ &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt;&lt;span&gt; Object execute(HystrixInvokable invokable, ExecutionType executionType, MetaHolder metaHolder) throws RuntimeException {
        Validate.notNull(invokable);
        Validate.notNull(metaHolder);
         
        &lt;/span&gt;&lt;span&gt;switch&lt;/span&gt;&lt;span&gt; (executionType) {&lt;br/&gt;&lt;/span&gt;&lt;span&gt;case&lt;/span&gt;&lt;span&gt; SYNCHRONOUS: {
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; castToExecutable(invokable, executionType).execute();
            }
            &lt;/span&gt;&lt;span&gt;case&lt;/span&gt;&lt;span&gt; ASYNCHRONOUS: {
                HystrixExecutable executable &lt;/span&gt;=&lt;span&gt; castToExecutable(invokable, executionType);
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (metaHolder.hasFallbackMethodCommand()
                        &lt;/span&gt;&amp;amp;&amp;amp; ExecutionType.ASYNCHRONOUS ==&lt;span&gt; metaHolder.getFallbackExecutionType()) {
                    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;new&lt;/span&gt;&lt;span&gt; FutureDecorator(executable.queue());
                }
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; executable.queue();
            }
            &lt;/span&gt;&lt;span&gt;case&lt;/span&gt;&lt;span&gt; OBSERVABLE: {
                HystrixObservable observable &lt;/span&gt;=&lt;span&gt; castToObservable(invokable);
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; ObservableExecutionMode.EAGER == metaHolder.getObservableExecutionMode() ?&lt;span&gt; observable.observe() : observable.toObservable();
            }
            &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;span&gt;:
                &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; RuntimeException(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;unsupported execution type: &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; +&lt;span&gt; executionType);
        }
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å› ä¸ºæ˜¯èµ°é»˜è®¤çš„ï¼Œæ‰€ä»¥è¿›å…¥HystrixCommandç±»çš„execute()æ–¹æ³•ï¼›è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œé¦–å…ˆè°ƒç”¨queue()ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªfutureå¯¹è±¡ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
  &lt;span&gt;public&lt;/span&gt;&lt;span&gt; R execute() {
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; queue().&lt;span&gt;get&lt;/span&gt;&lt;span&gt;();
        } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Exception e) {
            &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt;&lt;span&gt; Exceptions.sneakyThrow(decomposeException(e));
        }
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;queueè¿™ä¸ªæ–¹æ³•ä¸­ï¼Œè¿”å›äº†ä¸€ä¸ªFutureå¯¹è±¡ï¼Œè¿™ä¸ªfutureå¯¹è±¡çš„å®ç°æ˜¯fï¼Œfæ˜¯ä»¥åŒ¿åå†…éƒ¨ç±»ï¼Œå®ƒæ˜¯Java.util.concurrentä¸­å®šä¸€ä¸ªçš„ä¸€ä¸ªå¼‚æ­¥å¸¦è¿”å›å€¼å¯¹è±¡ã€‚å½“è°ƒç”¨queue().get()æ–¹æ³•æ—¶ï¼Œæœ€ç»ˆæ˜¯å§”æ´¾ç»™äº†delegate.get æ–¹æ³•ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;49&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; Future&amp;lt;R&amp;gt;&lt;span&gt; queue() {
  &lt;/span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;span&gt;
    * The Future returned by Observable.toBlocking().toFuture() does not
implement the
    * interruption of the execution thread when the &quot;mayInterrupt&quot; flag of
Future.cancel(boolean) is set to true;
    * thus, to comply with the contract of Future, we must wrap around it.
    &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;&lt;span&gt;
  final Future&lt;/span&gt;&amp;lt;R&amp;gt; &lt;span&gt;delegate&lt;/span&gt; =&lt;span&gt; toObservable().toBlocking().toFuture();
  final Future&lt;/span&gt;&amp;lt;R&amp;gt; f = &lt;span&gt;new&lt;/span&gt; Future&amp;lt;R&amp;gt;&lt;span&gt;() {
    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; boolean cancel(boolean mayInterruptIfRunning) {
      &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (&lt;span&gt;delegate&lt;/span&gt;&lt;span&gt;.isCancelled()) {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
     }
      &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;
(HystrixCommand.&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.getProperties().executionIsolationThreadInterruptOnFutureCa
ncel().&lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt;()) {
        &lt;/span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;span&gt;
          * The only valid transition here is false -&amp;gt; true. If there
are two futures, say f1 and f2, created by this command
          * (which is super-weird, but has never been prohibited),
and calls to f1.cancel(true) and to f2.cancel(false) are
          * issued by different threads, it's unclear about what
value would be used by the time mayInterruptOnCancel is checked.
          * The most consistent way to deal with this scenario is to
say that if *any* cancellation is invoked with interruption,
          * than that interruption request cannot be taken back.
          &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;&lt;span&gt;
        interruptOnFutureCancel.compareAndSet(&lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;span&gt;,
mayInterruptIfRunning);
     }
      final boolean res &lt;/span&gt;= &lt;span&gt;delegate&lt;/span&gt;.cancel(interruptOnFutureCancel.&lt;span&gt;get&lt;/span&gt;&lt;span&gt;());
      &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (!isExecutionComplete() &amp;amp;&amp;amp; interruptOnFutureCancel.&lt;span&gt;get&lt;/span&gt;&lt;span&gt;()) {
        final Thread t &lt;/span&gt;= executionThread.&lt;span&gt;get&lt;/span&gt;&lt;span&gt;();
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (t != &lt;span&gt;null&lt;/span&gt; &amp;amp;&amp;amp; !&lt;span&gt;t.equals(Thread.currentThread())) {
t.interrupt();
       }
     }
      &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; res;
   }
    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; boolean isCancelled() {
      &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;delegate&lt;/span&gt;&lt;span&gt;.isCancelled();
   }
    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; boolean isDone() {
      &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;delegate&lt;/span&gt;&lt;span&gt;.isDone();
   }&lt;br/&gt;//æœ€ç»ˆä¼šè°ƒç”¨æ­¤æ–¹æ³•
    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; R &lt;span&gt;get&lt;/span&gt;&lt;span&gt;() throws InterruptedException, ExecutionException {
      &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;delegate&lt;/span&gt;.&lt;span&gt;get&lt;/span&gt;&lt;span&gt;();
   }
    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; R &lt;span&gt;get&lt;/span&gt;(&lt;span&gt;long&lt;/span&gt;&lt;span&gt; timeout, TimeUnit unit) throws InterruptedException,
ExecutionException, TimeoutException {
      &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;delegate&lt;/span&gt;.&lt;span&gt;get&lt;/span&gt;&lt;span&gt;(timeout, unit);
   }
 };
  &lt;/span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;span&gt; special handling of error states that throw immediately &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;&lt;span&gt;
  &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (f.isDone()) {
    &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
      f.&lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt;();
      &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; f;
   } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Exception e) {
      Throwable t &lt;/span&gt;=&lt;span&gt; decomposeException(e);
      &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (t instanceof HystrixBadRequestException) {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; f;
     } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt;&lt;span&gt; (t instanceof HystrixRuntimeException) {
        HystrixRuntimeException hre &lt;/span&gt;=&lt;span&gt; (HystrixRuntimeException) t;
        &lt;/span&gt;&lt;span&gt;switch&lt;/span&gt;&lt;span&gt; (hre.getFailureType()) {
          &lt;/span&gt;&lt;span&gt;case&lt;/span&gt;&lt;span&gt; COMMAND_EXCEPTION:
          &lt;/span&gt;&lt;span&gt;case&lt;/span&gt;&lt;span&gt; TIMEOUT:
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; we don't throw these types from queue() only from&lt;/span&gt;
queue().&lt;span&gt;get&lt;/span&gt;() &lt;span&gt;as&lt;/span&gt;&lt;span&gt; they are execution errors
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; f;
          &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;span&gt;:
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; these are errors we throw from queue() as they as&lt;/span&gt;
&lt;span&gt;rejection type errors
            &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt;&lt;span&gt; hre;
       }
     } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
        &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt;&lt;span&gt; Exceptions.sneakyThrow(t);
     }
   }
 }
&lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; f;
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å› ä¸ºæœ€ç»ˆæ˜¯å§”æ´¾ç»™äº†delegate.get æ–¹æ³•æ‰§è¡Œï¼Œè€Œdelegateåœ¨å¼€å¤´final Future&amp;lt;R&amp;gt; delegate = toObservable().toBlocking().toFuture();ä¸­ï¼Œæ‰€ä»¥è¿›å…¥toObservable()æ–¹æ³•ä¸­ï¼Œåœ¨RxJavaä¸­ï¼Œåˆ†ä¸ºå‡ ç§è§’è‰²&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Observableï¼ˆè¢«è§‚å¯Ÿè€…ï¼‰ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯äº§ç”Ÿäº‹ä»¶&lt;/li&gt;
&lt;li&gt;Observerï¼ˆè§‚å¯Ÿè€…ï¼‰ï¼Œå®ƒçš„ä½œç”¨æ˜¯æ¥æ”¶äº‹ä»¶å¹¶ä½œå‡ºç›¸åº”&lt;/li&gt;
&lt;li&gt;Subscribeï¼ˆè®¢é˜…ï¼‰ï¼Œå®ƒç”¨æ¥è¿æ¥è¢«è§‚å¯Ÿè€…å’Œè§‚å¯Ÿè€…&lt;/li&gt;
&lt;li&gt;Eventï¼ˆäº‹ä»¶ï¼‰ï¼Œè¢«è§‚å¯Ÿè€…ã€è§‚å¯Ÿè€…ã€æ²Ÿé€šçš„è½½ä½“&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;åœ¨queueä¸­ï¼Œè°ƒç”¨toObservable()æ–¹æ³•åˆ›å»ºä¸€ä¸ªè¢«è§‚å¯Ÿè€…ã€‚é€šè¿‡Observableå®šä¹‰ä¸€ä¸ªè¢«è§‚å¯Ÿè€…ï¼Œè¿™ä¸ªè¢«è§‚å¯Ÿè€…ä¼šè¢«toObservable().toBlocking().toFuture() ï¼Œå®é™…ä¸Šå°±æ˜¯è¿”å›å¯è·å¾— run() æŠ½è±¡æ–¹æ³•æ‰§è¡Œç»“æœçš„Future ã€‚ run() æ–¹æ³•ç”±å­ç±»å®ç°ï¼Œæ‰§è¡Œæ­£å¸¸çš„ä¸šåŠ¡é€»è¾‘ã€‚åœ¨ä¸‹é¢è¿™æ®µä»£ç ä¸­ï¼Œå½“å­˜åœ¨subscriberæ—¶ï¼Œä¾¿ä¼šè°ƒç”¨Func0#call() æ–¹æ³•ï¼Œè€Œè¿™ä¸ªsubscriberæ˜¯åœ¨ toBlocking() ä¸­è¢«è®¢é˜…çš„ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;è°ƒç”¨ isRequestCachingEnabled(); åˆ¤æ–­è¯·æ±‚ç»“æœç¼“å­˜åŠŸèƒ½æ˜¯å¦å¼€å¯ï¼Œå¦‚æœå¼€å¯å¹¶ä¸”å‘½ä¸­äº†ç¼“å­˜ï¼Œåˆ™ä¼šä»¥Observableå½¢å¼è¿”å›ä¸€ä¸ªç¼“å­˜ç»“æœ&lt;/li&gt;
&lt;li&gt;åˆ›å»ºæ‰§è¡Œå‘½ä»¤çš„Observableï¼š hystrixObservable&lt;/li&gt;
&lt;li&gt;å½“ç¼“å­˜å¤„äºå¼€å¯çŠ¶æ€å¹¶ä¸”æ²¡æœ‰å‘½ä¸­ç¼“å­˜æ—¶ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªâ€œè®¢é˜…äº†æ‰§è¡Œå‘½ä»¤çš„Observableâ€ï¼šHystrixCommandResponseFromCache
&lt;ul&gt;&lt;li&gt;åˆ›å»ºå­˜å‚¨åˆ°ç¼“å­˜çš„Observableï¼š HystrixCachedObservable&lt;/li&gt;
&lt;li&gt;å°†toCacheæ·»åŠ åˆ°ç¼“å­˜ä¸­ï¼Œè¿”å›è·å–ç¼“å­˜çš„Observableï¼šfromCache&lt;/li&gt;
&lt;li&gt;å¦‚æœæ·»åŠ å¤±è´¥: fromCache!=null, åˆ™è°ƒç”¨ toCache.unsubscribe() æ–¹æ³•ï¼Œå–æ¶ˆHystrixCachedObservable çš„è®¢é˜…&lt;/li&gt;
&lt;li&gt;å¦‚æœæ·»åŠ æˆåŠŸï¼Œåˆ™è°ƒç”¨ toCache.toObservable(); è·å¾—ç¼“å­˜Observable&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;å½“ç¼“å­˜ç‰¹æ€§æ²¡æœ‰å¼€å¯æ—¶ï¼Œåˆ™è¿”å›æ‰§è¡Œå‘½ä»¤çš„Observableã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;cnblogs_code&quot; readability=&quot;62&quot;&gt;
&lt;pre&gt;
   &lt;span&gt;public&lt;/span&gt; Observable&amp;lt;R&amp;gt;&lt;span&gt; toObservable() {
        final AbstractCommand&lt;/span&gt;&amp;lt;R&amp;gt; _cmd = &lt;span&gt;this&lt;/span&gt;&lt;span&gt;;

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;doOnCompleted handler already did all of the SUCCESS work
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;doOnError handler already did all of the FAILURE/TIMEOUT/REJECTION/BAD_REQUEST work&lt;/span&gt;
        final Action0 terminateCommandCleanup = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Action0() {

            @Override
            &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; call() {
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (_cmd.commandState.compareAndSet(CommandState.OBSERVABLE_CHAIN_CREATED, CommandState.TERMINAL)) {
                    handleCommandEnd(&lt;/span&gt;&lt;span&gt;false&lt;/span&gt;); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;user code never ran&lt;/span&gt;
                } &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt;&lt;span&gt; (_cmd.commandState.compareAndSet(CommandState.USER_CODE_EXECUTED, CommandState.TERMINAL)) {
                    handleCommandEnd(&lt;/span&gt;&lt;span&gt;true&lt;/span&gt;); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;user code did run&lt;/span&gt;
&lt;span&gt;                }
            }
        };

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;mark the command as CANCELLED and store the latency (in addition to standard cleanup)&lt;/span&gt;
        final Action0 unsubscribeCommandCleanup = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Action0() {
            @Override
            &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; call() {
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (_cmd.commandState.compareAndSet(CommandState.OBSERVABLE_CHAIN_CREATED, CommandState.UNSUBSCRIBED)) {
                    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;_cmd.executionResult.containsTerminalEvent()) {
                        _cmd.eventNotifier.markEvent(HystrixEventType.CANCELLED, _cmd.commandKey);
                        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
                            executionHook.onUnsubscribe(_cmd);
                        } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Throwable hookEx) {
                            logger.warn(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Error calling HystrixCommandExecutionHook.onUnsubscribe&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, hookEx);
                        }
                        _cmd.executionResultAtTimeOfCancellation &lt;/span&gt;=&lt;span&gt; _cmd.executionResult
                                .addEvent((&lt;/span&gt;&lt;span&gt;int&lt;/span&gt;) (System.currentTimeMillis() -&lt;span&gt; _cmd.commandStartTimestamp), HystrixEventType.CANCELLED);
                    }
                    handleCommandEnd(&lt;/span&gt;&lt;span&gt;false&lt;/span&gt;); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;user code never ran&lt;/span&gt;
                } &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt;&lt;span&gt; (_cmd.commandState.compareAndSet(CommandState.USER_CODE_EXECUTED, CommandState.UNSUBSCRIBED)) {
                    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;_cmd.executionResult.containsTerminalEvent()) {
                        _cmd.eventNotifier.markEvent(HystrixEventType.CANCELLED, _cmd.commandKey);
                        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
                            executionHook.onUnsubscribe(_cmd);
                        } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Throwable hookEx) {
                            logger.warn(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Error calling HystrixCommandExecutionHook.onUnsubscribe&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, hookEx);
                        }
                        _cmd.executionResultAtTimeOfCancellation &lt;/span&gt;=&lt;span&gt; _cmd.executionResult
                                .addEvent((&lt;/span&gt;&lt;span&gt;int&lt;/span&gt;) (System.currentTimeMillis() -&lt;span&gt; _cmd.commandStartTimestamp), HystrixEventType.CANCELLED);
                    }
                    handleCommandEnd(&lt;/span&gt;&lt;span&gt;true&lt;/span&gt;); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;user code did run&lt;/span&gt;
&lt;span&gt;                }
            }
        };

        final Func0&lt;/span&gt;&amp;lt;Observable&amp;lt;R&amp;gt;&amp;gt; applyHystrixSemantics = &lt;span&gt;new&lt;/span&gt; Func0&amp;lt;Observable&amp;lt;R&amp;gt;&amp;gt;&lt;span&gt;() {
            @Override
            &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; Observable&amp;lt;R&amp;gt;&lt;span&gt; call() {
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (commandState.&lt;span&gt;get&lt;/span&gt;&lt;span&gt;().equals(CommandState.UNSUBSCRIBED)) {
                    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; Observable.never();
                }
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; applyHystrixSemantics(_cmd);
            }
        };

        final Func1&lt;/span&gt;&amp;lt;R, R&amp;gt; wrapWithAllOnNextHooks = &lt;span&gt;new&lt;/span&gt; Func1&amp;lt;R, R&amp;gt;&lt;span&gt;() {
            @Override
            &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; R call(R r) {
                R afterFirstApplication &lt;/span&gt;=&lt;span&gt; r;

                &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
                    afterFirstApplication &lt;/span&gt;=&lt;span&gt; executionHook.onComplete(_cmd, r);
                } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Throwable hookEx) {
                    logger.warn(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Error calling HystrixCommandExecutionHook.onComplete&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, hookEx);
                }

                &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
                    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; executionHook.onEmit(_cmd, afterFirstApplication);
                } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Throwable hookEx) {
                    logger.warn(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Error calling HystrixCommandExecutionHook.onEmit&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, hookEx);
                    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; afterFirstApplication;
                }
            }
        };

        final Action0 fireOnCompletedHook &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Action0() {
            @Override
            &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; call() {
                &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
                    executionHook.onSuccess(_cmd);
                } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Throwable hookEx) {
                    logger.warn(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Error calling HystrixCommandExecutionHook.onSuccess&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, hookEx);
                }
            }
        };
&lt;/span&gt;&lt;span&gt;return&lt;/span&gt; Observable.defer(&lt;span&gt;new&lt;/span&gt; Func0&amp;lt;Observable&amp;lt;R&amp;gt;&amp;gt;&lt;span&gt;() {
  @Override
  &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; Observable&amp;lt;R&amp;gt;&lt;span&gt; call() {
    &lt;/span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;span&gt; this is a stateful object so can only be used once &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;&lt;span&gt;
    &lt;/span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;span&gt; CASä¿è¯å‘½ä»¤åªæ‰§è¡Œä¸€æ¬¡ &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;&lt;span&gt;
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;commandState.compareAndSet(CommandState.NOT_STARTED,
CommandState.OBSERVABLE_CHAIN_CREATED)) {
      IllegalStateException ex &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; IllegalStateException(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;This instance&lt;/span&gt;
can only be executed once. Please instantiate a &lt;span&gt;new&lt;/span&gt; instance.&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;
      &lt;span&gt;//&lt;/span&gt;&lt;span&gt;TODO make a new error type for this&lt;/span&gt;
      &lt;span&gt;throw&lt;/span&gt; &lt;span&gt;new&lt;/span&gt;&lt;span&gt; HystrixRuntimeException(FailureType.BAD_REQUEST_EXCEPTION,
_cmd.getClass(), getLogMessagePrefix() &lt;/span&gt;+ &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; command executed multiple times -&lt;/span&gt;
&lt;span&gt;this&lt;/span&gt; &lt;span&gt;is&lt;/span&gt; not permitted.&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, ex, null);&lt;/span&gt;
&lt;span&gt;   }
   &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å‘½ä»¤å¼€å§‹æ—¶é—´æˆ³&lt;/span&gt;
    commandStartTimestamp =&lt;span&gt; System.currentTimeMillis();
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ‰“å°æ—¥å¿—&lt;/span&gt;
    &lt;span&gt;if&lt;/span&gt; (properties.requestLogEnabled().&lt;span&gt;get&lt;/span&gt;&lt;span&gt;()) {
      &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; log this command execution regardless of what happened&lt;/span&gt;
      &lt;span&gt;if&lt;/span&gt; (currentRequestLog != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
currentRequestLog.addExecutedCommand(_cmd);
     }
   }
   &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ç¼“å­˜å¼€å…³ï¼Œç¼“å­˜KEYï¼ˆè¿™ä¸ªæ˜¯Hystrixä¸­è¯·æ±‚ç¼“å­˜åŠŸèƒ½ï¼Œhystrixæ”¯æŒå°†ä¸€ä¸ªè¯·æ±‚ç»“æœç¼“å­˜èµ·&lt;/span&gt;
&lt;span&gt;æ¥ï¼Œä¸‹ä¸€ä¸ªå…·æœ‰ç›¸åŒkeyçš„è¯·æ±‚å°†ç›´æ¥ä»ç¼“å­˜ä¸­å–å‡ºç»“æœï¼Œå‡å°‘è¯·æ±‚å¼€é”€ï¼‰
    final boolean requestCacheEnabled &lt;/span&gt;=&lt;span&gt; isRequestCachingEnabled();
    final String cacheKey &lt;/span&gt;=&lt;span&gt; getCacheKey();
    &lt;/span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;span&gt; try from cache first &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;&lt;span&gt;
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (requestCacheEnabled) {&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å¦‚æœå¼€å¯äº†ç¼“å­˜æœºåˆ¶ï¼Œåˆ™ä»ç¼“å­˜ä¸­è·å–ç»“æœ&lt;/span&gt;
      HystrixCommandResponseFromCache&amp;lt;R&amp;gt; fromCache =&lt;span&gt;
(HystrixCommandResponseFromCache&lt;/span&gt;&amp;lt;R&amp;gt;) requestCache.&lt;span&gt;get&lt;/span&gt;&lt;span&gt;(cacheKey);
      &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (fromCache != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
        isResponseFromCache &lt;/span&gt;= &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; handleRequestCacheHitAndEmitValues(fromCache, _cmd);
     }
   }
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å£°æ˜æ‰§è¡Œå‘½ä»¤çš„Observable&lt;/span&gt;
    Observable&amp;lt;R&amp;gt; hystrixObservable =&lt;span&gt;
      Observable.defer(applyHystrixSemantics)
     .map(wrapWithAllOnNextHooks);
    Observable&lt;/span&gt;&amp;lt;R&amp;gt;&lt;span&gt; afterCache;
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;ä¿å­˜è¯·æ±‚ç»“æœåˆ°ç¼“å­˜ä¸­&lt;/span&gt;
    &lt;span&gt;if&lt;/span&gt; (requestCacheEnabled &amp;amp;&amp;amp; cacheKey != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
      &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; wrap it for caching&lt;/span&gt;
      HystrixCachedObservable&amp;lt;R&amp;gt; toCache =&lt;span&gt;
HystrixCachedObservable.&lt;/span&gt;&lt;span&gt;from&lt;/span&gt;&lt;span&gt;(hystrixObservable, _cmd);
      HystrixCommandResponseFromCache&lt;/span&gt;&amp;lt;R&amp;gt; fromCache =&lt;span&gt;
(HystrixCommandResponseFromCache&lt;/span&gt;&amp;lt;R&amp;gt;&lt;span&gt;) requestCache.putIfAbsent(cacheKey,
toCache);
      &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (fromCache != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; another thread beat us so we'll use the cached value instead&lt;/span&gt;
&lt;span&gt;        toCache.unsubscribe();
        isResponseFromCache &lt;/span&gt;= &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; handleRequestCacheHitAndEmitValues(fromCache, _cmd);
     } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; we just created an ObservableCommand so we cast and return it&lt;/span&gt;
        afterCache =&lt;span&gt; toCache.toObservable();
     }
   } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
      afterCache &lt;/span&gt;=&lt;span&gt; hystrixObservable;
   }
    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; afterCache
     .doOnTerminate(terminateCommandCleanup)   &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; perform cleanup once&lt;/span&gt;
(either on normal terminal state (&lt;span&gt;this&lt;/span&gt;&lt;span&gt; line), or unsubscribe (next line))
     .doOnUnsubscribe(unsubscribeCommandCleanup) &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; perform cleanup once&lt;/span&gt;
&lt;span&gt;     .doOnCompleted(fireOnCompletedHook);
 }
});&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ‰§è¡Œå‘½ä»¤çš„Observableçš„å®šä¹‰å¦‚ä¸‹ï¼Œé€šè¿‡deferå®šä¹‰äº†ä¸€ä¸ª applyHystrixSemantics çš„äº‹ä»¶ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
final Func0&amp;lt;Observable&amp;lt;R&amp;gt;&amp;gt; applyHystrixSemantics = &lt;span&gt;new&lt;/span&gt; Func0&amp;lt;Observable&amp;lt;R&amp;gt;&amp;gt;&lt;span&gt;() {
  @Override
 &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; Observable&amp;lt;R&amp;gt;&lt;span&gt; call() {
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å½“commandStateå¤„äºUNSUBSCRIBEDæ—¶ï¼Œä¸æ‰§è¡Œå‘½ä»¤&lt;/span&gt;
    &lt;span&gt;if&lt;/span&gt; (commandState.&lt;span&gt;get&lt;/span&gt;&lt;span&gt;().equals(CommandState.UNSUBSCRIBED)) {
      &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; Observable.never();
   }
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è¿”å›æ‰§è¡Œå‘½ä»¤çš„Observable&lt;/span&gt;
    &lt;span&gt;return&lt;/span&gt;&lt;span&gt; applyHystrixSemantics(_cmd);
 }
};
Observable&lt;/span&gt;&amp;lt;R&amp;gt; hystrixObservable =&lt;span&gt;
  Observable.defer(applyHystrixSemantics)
 .map(wrapWithAllOnNextHooks);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;applyHystrixSemanticsæ–¹æ³•ï¼›å‡è®¾ç¼“å­˜ç‰¹æ€§æœªå¼€å¯æˆ–è€…æœªå‘½ä¸­ç¼“å­˜ï¼Œé‚£ä¹ˆä»£ç å°†æ‰§è¡Œ applyHystrixSemantics ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä¼ å…¥çš„_cmdæ˜¯ä¸€ä¸ªGenericCommandï¼Œæœ€ç»ˆæ‰§è¡Œè¿™ä¸ªcommandä¸­çš„runæ–¹æ³•ï¼Œæœ¬è´¨å°±æ˜¯å®Œæˆå¯¹queryOrderæ–¹æ³•çš„ä»£ç†&lt;/li&gt;
&lt;li&gt;circuitBreaker.allowRequest() å¦‚æœä¸ºtrueï¼Œè¡¨ç¤ºå½“å‰ä¸å¤„äºç†”æ–­çŠ¶æ€ï¼Œæ­£å¸¸æ‰§è¡Œï¼Œå¦åˆ™ï¼Œè°ƒç”¨ handleShortCircuitViaFallback å®ç°æœåŠ¡é™çº§ï¼Œå¦‚æœæˆ‘ä»¬é…ç½®äº†fallbackæ–¹æ³•ï¼Œåˆ™ä¼šè·å¾—æˆ‘ä»¬é…ç½®çš„fallbackæ‰§è¡Œ&lt;/li&gt;
&lt;li&gt;å¦‚æœå½“å‰hystrixå¤„äºæœªç†”æ–­çŠ¶æ€ï¼Œåˆ™&lt;/li&gt;
&lt;/ul&gt;&lt;ul&gt;&lt;li&gt;
&lt;ul&gt;&lt;li&gt;getExecutionSemaphore åˆ¤æ–­å½“å‰ç­–ç•¥æ˜¯å¦ä¸ºä¿¡å·é‡ï¼ˆTryableSemaphoreNoOp/TryableSemaphoreActualï¼‰ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è°ƒç”¨ tryAcquire æ¥è·å–ä¿¡å·é‡ã€‚å¦‚æœå½“å‰ä¿¡å·é‡æ»¡äº†ï¼Œåˆ™è°ƒç”¨ handleSemaphoreRejectionViaFallback æ–¹æ³•ã€‚&lt;/li&gt;
&lt;li&gt;è°ƒç”¨ executeCommandAndObserve è·å–å‘½ä»¤æ‰§è¡ŒObservableã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
   &lt;span&gt;private&lt;/span&gt; Observable&amp;lt;R&amp;gt; applyHystrixSemantics(final AbstractCommand&amp;lt;R&amp;gt;&lt;span&gt; _cmd) {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; mark that we're starting execution on the ExecutionHook
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; if this hook throws an exception, then a fast-fail occurs with no fallback.  No state is left inconsistent&lt;/span&gt;
&lt;span&gt;        executionHook.onStart(_cmd);

        &lt;/span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;span&gt; determine if we're allowed to execute &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
        &lt;span&gt;if&lt;/span&gt;&lt;span&gt; (circuitBreaker.allowRequest()) {
            final TryableSemaphore executionSemaphore &lt;/span&gt;=&lt;span&gt; getExecutionSemaphore();
            final AtomicBoolean semaphoreHasBeenReleased &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; AtomicBoolean(&lt;span&gt;false&lt;/span&gt;&lt;span&gt;);
            final Action0 singleSemaphoreRelease &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Action0() {
                @Override
                &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; call() {
                    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (semaphoreHasBeenReleased.compareAndSet(&lt;span&gt;false&lt;/span&gt;, &lt;span&gt;true&lt;/span&gt;&lt;span&gt;)) {
                        executionSemaphore.release();
                    }
                }
            };

            final Action1&lt;/span&gt;&amp;lt;Throwable&amp;gt; markExceptionThrown = &lt;span&gt;new&lt;/span&gt; Action1&amp;lt;Throwable&amp;gt;&lt;span&gt;() {
                @Override
                &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; call(Throwable t) {
                    eventNotifier.markEvent(HystrixEventType.EXCEPTION_THROWN, commandKey);
                }
            };

            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (executionSemaphore.tryAcquire()) {
                &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
                    &lt;/span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;span&gt; used to track userThreadExecutionTime &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;&lt;span&gt;
                    executionResult &lt;/span&gt;=&lt;span&gt; executionResult.setInvocationStartTime(System.currentTimeMillis());&lt;br/&gt;//è·Ÿè¿›
                    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; executeCommandAndObserve(_cmd)
                            .doOnError(markExceptionThrown)
                            .doOnTerminate(singleSemaphoreRelease)
                            .doOnUnsubscribe(singleSemaphoreRelease);
                } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (RuntimeException e) {
                    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; Observable.error(e);
                }
            } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; handleSemaphoreRejectionViaFallback();
            }
        } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; handleShortCircuitViaFallback();
        }
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;executeCommandAndObserve&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å®šä¹‰ä¸åŒçš„å›è°ƒï¼ŒdoOnNextã€doOnCompletedã€onErrorResumeNextã€doOnEachã€‚&lt;/li&gt;
&lt;li&gt;è°ƒç”¨executeCommandWithSpecifiedIsolationè·å¾—æ‰§è¡Œå‘½ä»¤çš„Observable&lt;/li&gt;
&lt;li&gt;è‹¥æ‰§è¡Œå‘½ä»¤è¶…æ—¶ç‰¹æ€§å¼€å¯ï¼Œè°ƒç”¨ Observable.lift æ–¹æ³•å®ç°æ‰§è¡Œå‘½ä»¤è¶…æ—¶åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;private&lt;/span&gt; Observable&amp;lt;R&amp;gt; executeCommandAndObserve(final AbstractCommand&amp;lt;R&amp;gt;&lt;span&gt; _cmd) {
  final HystrixRequestContext currentRequestContext &lt;/span&gt;=&lt;span&gt;
HystrixRequestContext.getContextForCurrentThread();
  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;Actionå’ŒFuncéƒ½æ˜¯å®šä¹‰çš„ä¸€ä¸ªåŠ¨ä½œï¼ŒActionæ˜¯æ— è¿”å›å€¼ï¼ŒFuncæ˜¯æœ‰è¿”å›å€¼
  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; doOnNextä¸­çš„å›è°ƒã€‚å³å‘½ä»¤æ‰§è¡Œä¹‹å‰æ‰§è¡Œçš„æ“ä½œ&lt;/span&gt;
  final Action1&amp;lt;R&amp;gt; markEmits &lt;span&gt;//&lt;/span&gt;&lt;span&gt;...
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; doOnCompletedä¸­çš„å›è°ƒã€‚å‘½ä»¤æ‰§è¡Œå®Œæ¯•åæ‰§è¡Œçš„æ“ä½œ&lt;/span&gt;
  final Action0 markOnCompleted = &lt;span&gt;//&lt;/span&gt;&lt;span&gt;...
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; onErrorResumeNextä¸­çš„å›è°ƒã€‚å‘½ä»¤æ‰§è¡Œå¤±è´¥åçš„å›é€€é€»è¾‘&lt;/span&gt;
  final Func1&amp;lt;Throwable, Observable&amp;lt;R&amp;gt;&amp;gt; handleFallback = &lt;span&gt;//&lt;/span&gt;&lt;span&gt;...
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; doOnEachä¸­çš„å›è°ƒã€‚`Observable`æ¯å‘å°„ä¸€ä¸ªæ•°æ®éƒ½ä¼šæ‰§è¡Œè¿™ä¸ªå›è°ƒï¼Œè®¾ç½®è¯·æ±‚ä¸Šä¸‹æ–‡&lt;/span&gt;
  final Action1&amp;lt;Notification&amp;lt;? super R&amp;gt;&amp;gt; setRequestContext =&lt;span&gt;//&lt;/span&gt;&lt;span&gt;...&lt;/span&gt;
  Observable&amp;lt;R&amp;gt;&lt;span&gt; execution;
  &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (properties.executionTimeoutEnabled().&lt;span&gt;get&lt;/span&gt;&lt;span&gt;()) {
    execution &lt;/span&gt;=&lt;span&gt; executeCommandWithSpecifiedIsolation(_cmd)
      .lift(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt; HystrixObservableTimeoutOperator&amp;lt;R&amp;gt;&lt;span&gt;(_cmd));
  } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
    execution &lt;/span&gt;=&lt;span&gt; executeCommandWithSpecifiedIsolation(_cmd);
  }
  &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; execution.doOnNext(markEmits)
.doOnCompleted(markOnCompleted)
    .onErrorResumeNext(handleFallback)
    .doOnEach(setRequestContext);
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;executeCommandWithSpecifiedIsolationæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•é¦–å…ˆæ˜¯æ ¹æ®å½“å‰ä¸åŒçš„èµ„æºéš”ç¦»ç­–ç•¥æ‰§è¡Œä¸åŒçš„é€»è¾‘ï¼ŒTHREADã€SEMAPHOREï¼Œè¿™é‡Œå°±ä¸å±•å¼€å®ç°ç»†èŠ‚ï¼Œæˆ‘ä»¬ç›´æ¥çœ‹æ‰§è¡Œçš„æ–¹æ³• getUserExecutionObservable ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;55&quot;&gt;
&lt;pre&gt;
&lt;span&gt;private&lt;/span&gt; Observable&amp;lt;R&amp;gt;&lt;span&gt; executeCommandWithSpecifiedIsolation(final
AbstractCommand&lt;/span&gt;&amp;lt;R&amp;gt;&lt;span&gt; _cmd) {
  &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (properties.executionIsolationStrategy().&lt;span&gt;get&lt;/span&gt;() ==&lt;span&gt;
ExecutionIsolationStrategy.THREAD) {
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; mark that we are executing in a thread (even if we end up being&lt;/span&gt;
&lt;span&gt;rejected we still were a THREAD execution and not SEMAPHORE)
    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; Observable.defer(&lt;span&gt;new&lt;/span&gt; Func0&amp;lt;Observable&amp;lt;R&amp;gt;&amp;gt;&lt;span&gt;() {
      @Override
      &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; Observable&amp;lt;R&amp;gt;&lt;span&gt; call() {
        executionResult &lt;/span&gt;=&lt;span&gt; executionResult.setExecutionOccurred();
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;
(&lt;/span&gt;!&lt;span&gt;commandState.compareAndSet(CommandState.OBSERVABLE_CHAIN_CREATED,
CommandState.USER_CODE_EXECUTED)) {
          &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; Observable.error(&lt;span&gt;new&lt;/span&gt; IllegalStateException(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;execution&lt;/span&gt;
attempted &lt;span&gt;while&lt;/span&gt; &lt;span&gt;in&lt;/span&gt; state : &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; + commandState.get().name()));&lt;/span&gt;
&lt;span&gt;       }
        metrics.markCommandStart(commandKey, threadPoolKey,
ExecutionIsolationStrategy.THREAD);
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (isCommandTimedOut.&lt;span&gt;get&lt;/span&gt;() ==&lt;span&gt; TimedOutStatus.TIMED_OUT) {
          &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; the command timed out in the wrapping thread so we will&lt;/span&gt;
&lt;span&gt;return&lt;/span&gt;&lt;span&gt; immediately
          &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; and not increment any of the counters below or other such&lt;/span&gt;
&lt;span&gt;logic
          &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; Observable.error(&lt;span&gt;new&lt;/span&gt; RuntimeException(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;timed out&lt;/span&gt;
before executing run()&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;));&lt;/span&gt;
&lt;span&gt;       }
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (threadState.compareAndSet(ThreadState.NOT_USING_THREAD,
ThreadState.STARTED)) {
          &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;we have not been unsubscribed, so should proceed&lt;/span&gt;
&lt;span&gt;          HystrixCounters.incrementGlobalConcurrentThreads();
          threadPool.markThreadExecution();
          &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; store the command that is being run&lt;/span&gt;
          endCurrentThreadExecutingCommand =&lt;span&gt;
Hystrix.startCurrentThreadExecutingCommand(getCommandKey());
          executionResult &lt;/span&gt;=&lt;span&gt; executionResult.setExecutedInThread();
          &lt;/span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;span&gt;*
            * If any of these hooks throw an exception, then it
appears as if the actual execution threw an error
            &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;&lt;span&gt;
          &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
            executionHook.onThreadStart(_cmd);
            executionHook.onRunStart(_cmd);
            executionHook.onExecutionStart(_cmd);
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; getUserExecutionObservable(_cmd);
} &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Throwable ex) {
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; Observable.error(ex);
         }
       } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
          &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;command has already been unsubscribed, so return&lt;/span&gt;
&lt;span&gt;immediately
          &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; Observable.error(&lt;span&gt;new&lt;/span&gt; RuntimeException(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;unsubscribed&lt;/span&gt;
before executing run()&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;));&lt;/span&gt;
&lt;span&gt;       }
     }
   }).doOnTerminate(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; Action0() {
      @Override
      &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; call() {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (threadState.compareAndSet(ThreadState.STARTED,
ThreadState.TERMINAL)) {
          handleThreadEnd(_cmd);
       }
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (threadState.compareAndSet(ThreadState.NOT_USING_THREAD,
ThreadState.TERMINAL)) {
          &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;if it was never started and received terminal, then no&lt;/span&gt;
need to clean up (I don&lt;span&gt;'&lt;/span&gt;&lt;span&gt;t think this is possible)&lt;/span&gt;
&lt;span&gt;       }
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;if it was unsubscribed, then other cleanup handled it&lt;/span&gt;
&lt;span&gt;     }
   }).doOnUnsubscribe(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; Action0() {
      @Override
      &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; call() {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (threadState.compareAndSet(ThreadState.STARTED,
ThreadState.UNSUBSCRIBED)) {
          handleThreadEnd(_cmd);
       }
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (threadState.compareAndSet(ThreadState.NOT_USING_THREAD,
ThreadState.UNSUBSCRIBED)) {
          &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;if it was never started and was cancelled, then no need to&lt;/span&gt;
&lt;span&gt;clean up
       }
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;if it was terminal, then other cleanup handled it&lt;/span&gt;
&lt;span&gt;     }
   }).subscribeOn(threadPool.getScheduler(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt; Func0&amp;lt;Boolean&amp;gt;&lt;span&gt;() {
      @Override
      &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; Boolean call() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt;
properties.executionIsolationThreadInterruptOnTimeout().&lt;/span&gt;&lt;span&gt;get&lt;/span&gt;() &amp;amp;&amp;amp;&lt;span&gt;
_cmd.isCommandTimedOut.&lt;/span&gt;&lt;span&gt;get&lt;/span&gt;() ==&lt;span&gt; TimedOutStatus.TIMED_OUT;
     }
   }));
 } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; Observable.defer(&lt;span&gt;new&lt;/span&gt; Func0&amp;lt;Observable&amp;lt;R&amp;gt;&amp;gt;&lt;span&gt;() {
      @Override
      &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; Observable&amp;lt;R&amp;gt;&lt;span&gt; call() {
        executionResult &lt;/span&gt;=&lt;span&gt; executionResult.setExecutionOccurred();
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;
(&lt;/span&gt;!&lt;span&gt;commandState.compareAndSet(CommandState.OBSERVABLE_CHAIN_CREATED,
CommandState.USER_CODE_EXECUTED)) {
          &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; Observable.error(&lt;span&gt;new&lt;/span&gt; IllegalStateException(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;execution&lt;/span&gt;
attempted &lt;span&gt;while&lt;/span&gt; &lt;span&gt;in&lt;/span&gt; state : &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; + commandState.get().name()));&lt;/span&gt;
&lt;span&gt;       }
metrics.markCommandStart(commandKey, threadPoolKey,
ExecutionIsolationStrategy.SEMAPHORE);
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; semaphore isolated
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; store the command that is being run&lt;/span&gt;
        endCurrentThreadExecutingCommand =&lt;span&gt;
Hystrix.startCurrentThreadExecutingCommand(getCommandKey());
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
          executionHook.onRunStart(_cmd);
          executionHook.onExecutionStart(_cmd);
          &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; getUserExecutionObservable(_cmd);  &lt;span&gt;//&lt;/span&gt;&lt;span&gt;the&lt;/span&gt;
getUserExecutionObservable method already wraps sync exceptions, so &lt;span&gt;this&lt;/span&gt;&lt;span&gt;
shouldn&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;t throw&lt;/span&gt;
       } &lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Throwable ex) {
          &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;If the above hooks throw, then use that as the result of&lt;/span&gt;
&lt;span&gt;the run method
          &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; Observable.error(ex);
       }
     }
   });
 }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;è°ƒç”¨ getExecutionObservable æ–¹æ³•åˆ›å»º å‘½ä»¤æ‰§è¡ŒObservable ã€‚ getExecutionObservable æ–¹æ³•æ˜¯ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œ HystrixCommand å®ç°äº†è¯¥æ–¹æ³•ã€‚&lt;/p&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;private&lt;/span&gt; Observable&amp;lt;R&amp;gt; getUserExecutionObservable(final AbstractCommand&amp;lt;R&amp;gt;&lt;span&gt; _cmd)
{
  Observable&lt;/span&gt;&amp;lt;R&amp;gt;&lt;span&gt; userObservable;
  &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
    userObservable &lt;/span&gt;=&lt;span&gt; getExecutionObservable();
 } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Throwable ex) {
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; the run() method is a user provided implementation so can throw&lt;/span&gt;
instead of &lt;span&gt;using&lt;/span&gt;&lt;span&gt; Observable.onError
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; so we catch it here and turn it into Observable.error&lt;/span&gt;
    userObservable =&lt;span&gt; Observable.error(ex);
 }
  &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; userObservable
   .lift(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; ExecutionHookApplication(_cmd))
   .lift(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; DeprecatedOnRunHookApplication(_cmd));
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;è°ƒç”¨ HystrixCommand.getExecutionObservable æ–¹æ³•åˆ›å»ºå‘½ä»¤æ‰§è¡ŒObservableè¿™é‡Œæœ€ç»ˆè°ƒç”¨çš„æ˜¯runæ–¹æ³•ï¼Œé€šè¿‡Observable.justï¼Œ justæ˜¯RxJavaä¸­çš„ä¸€ä¸ªæ“ä½œç¬¦ï¼Œå®ƒå¯ä»¥æ¥å—ä¸€ä¸ªæˆ–è€…å¤šä¸ªå‚æ•°æ¥åˆ›å»ºä¸€ä¸ªObservableå¯¹è±¡ã€‚è€Œè¿™ä¸ªrunï¼ˆï¼‰æ–¹æ³•æ˜¯ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œåœ¨HystrixCommandä¸­å¹¶æ²¡æœ‰å®ç°ï¼Œè€Œæ˜¯åœ¨å­ç±»ä¸­å®ç°ï¼Œè€Œæ­¤æ—¶ä¼ é€’çš„cmd=GenricCommandæ­£å¥½å®ç°äº†HystrixCommandï¼Œé‡å†™äº†runæ–¹æ³•ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;@Override
final &lt;/span&gt;&lt;span&gt;protected&lt;/span&gt; Observable&amp;lt;R&amp;gt;&lt;span&gt; getExecutionObservable() {
  &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; Observable.defer(&lt;span&gt;new&lt;/span&gt; Func0&amp;lt;Observable&amp;lt;R&amp;gt;&amp;gt;&lt;span&gt;() {
    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; Observable&amp;lt;R&amp;gt;&lt;span&gt; call() {
      &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; Observable.just(run());
     } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Throwable ex) {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; Observable.error(ex);
     }
   }
 }).doOnSubscribe(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; Action0() {
    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; call() {
      &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Save thread on which we get subscribed so that we can interrupt&lt;/span&gt;
it later &lt;span&gt;if&lt;/span&gt;&lt;span&gt; needed
      executionThread.&lt;/span&gt;&lt;span&gt;set&lt;/span&gt;&lt;span&gt;(Thread.currentThread());
   }
 });
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;enericCommandç±»ä¸­çš„runæ–¹æ³•ï¼Œè¿™é‡Œçš„å®ç°å’Œå‰é¢è‡ªå®šä¹‰çš„ HystrixCommandService å®ç°æ˜¯ä¸€æ ·çš„ï¼ŒåŒæ ·æ˜¯é›†æˆHystrixCommandï¼Œé‡å†™runæ–¹æ³•ã€‚è¿™é‡Œä¹Ÿæ˜¯å¦‚æ­¤ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;é¦–å…ˆè°ƒç”¨ getCommandAction() æ–¹æ³•è·å– CommandAction ï¼Œæˆ‘ä»¬çš„ç¤ºä¾‹ä¸­è·å–åˆ°çš„æ˜¯MethodExecutionAction ã€‚&lt;/li&gt;
&lt;li&gt;ç„¶åè°ƒç”¨ MethodExecutionAction.execute æ–¹æ³•ï¼Œä¼ å…¥ ExecutionType å‚æ•°ï¼Œæˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ä¼ å…¥çš„æ˜¯ ExecutionType.SYNCHRONOUS ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;@Override
&lt;/span&gt;&lt;span&gt;protected&lt;/span&gt;&lt;span&gt; Object run() throws Exception {
  LOGGER.debug(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;execute command: {}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, getCommandKey().name());
  &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; process(&lt;span&gt;new&lt;/span&gt;&lt;span&gt; Action() {
    @Override
    Object execute() {
      &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; getCommandAction().execute(getExecutionType());
   }
 });
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;





&lt;p&gt;&lt;em id=&quot;__mceDel&quot;&gt;Â &lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;br/&gt;Â &lt;/p&gt;

</description>
<pubDate>Sat, 02 Jan 2021 14:16:00 +0000</pubDate>
<dc:creator>ç«¥è¯è¿°è¯´æˆ‘çš„ç»“å±€</dc:creator>
<og:description>ä¸€ã€Hystrixå¤„ç†æµç¨‹ Hystrixæµç¨‹å›¾å¦‚ä¸‹ï¼š Hystrixæ•´ä¸ªå·¥ä½œæµå¦‚ä¸‹ï¼š æ„é€ ä¸€ä¸ª&amp;#160;HystrixCommandæˆ–HystrixObservableCommandå¯¹è±¡ï¼Œç”¨äºå°è£…</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/xing1/p/14223358.html</dc:identifier>
</item>
<item>
<title>SAMLå’ŒOAuth2è¿™ä¸¤ç§SSOåè®®çš„åŒºåˆ« - flydean</title>
<link>http://www.cnblogs.com/flydean/p/14224139.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/flydean/p/14224139.html</guid>
<description>&lt;p&gt;SSOæ˜¯å•ç‚¹ç™»å½•çš„ç®€ç§°ï¼Œå¸¸ç”¨çš„SSOçš„åè®®æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯SAMLå’ŒOAuth2ã€‚æœ¬æ–‡å°†ä¼šä»‹ç»ä¸¤ç§åè®®çš„ä¸åŒä¹‹å¤„ï¼Œä»è€Œè®©è¯»è€…å¯¹è¿™ä¸¤ç§åè®®æœ‰æ›´åŠ æ·±å…¥çš„ç†è§£ã€‚&lt;/p&gt;

&lt;p&gt;SAMLçš„å…¨ç§°æ˜¯Security Assertion Markup Languageï¼Œ æ˜¯ç”±OASISåˆ¶å®šçš„ä¸€å¥—åŸºäºXMLæ ¼å¼çš„å¼€æ”¾æ ‡å‡†ï¼Œç”¨åœ¨èº«ä»½æä¾›è€…ï¼ˆIdPï¼‰å’ŒæœåŠ¡æä¾›è€… (SP)ä¹‹é—´äº¤æ¢èº«ä»½éªŒè¯å’Œæˆæƒæ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;SAMLçš„ä¸€ä¸ªéå¸¸é‡è¦çš„åº”ç”¨å°±æ˜¯åŸºäºWebçš„å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨SAMLåè®®ä¸­å®šä¹‰äº†ä¸‰ä¸ªè§’è‰²ï¼Œåˆ†åˆ«æ˜¯principalï¼šä»£è¡¨ä¸»ä½“é€šå¸¸è¡¨ç¤ºäººç±»ç”¨æˆ·ã€‚identity provider (IdP)èº«ä»½æä¾›è€…å’Œservice provider (SP)æœåŠ¡æä¾›è€…ã€‚&lt;/p&gt;
&lt;p&gt;IdPçš„ä½œç”¨å°±æ˜¯è¿›è¡Œèº«ä»½è®¤è¯ï¼Œå¹¶ä¸”å°†ç”¨æˆ·çš„è®¤è¯ä¿¡æ¯å’Œæˆæƒä¿¡æ¯ä¼ é€’ç»™æœåŠ¡æä¾›è€…ã€‚&lt;/p&gt;
&lt;p&gt;SPçš„ä½œç”¨å°±æ˜¯è¿›è¡Œç”¨æˆ·è®¤è¯ä¿¡æ¯çš„éªŒè¯ï¼Œå¹¶ä¸”æˆæƒç”¨æˆ·è®¿é—®æŒ‡å®šçš„èµ„æºä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç”¨SAMLè¿›è¡ŒSSOè®¤è¯çš„æµç¨‹å›¾ï¼Œæ¥åˆ†æä¸€ä¸‹SAMLæ˜¯æ€ä¹ˆå·¥ä½œçš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20200917121937112.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_0,text_aHR0cDovL3d3dy5mbHlkZWFuLmNvbQ==,size_25,color_8F8F8F,t_70&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šå›¾ä¸­User Agentå°±æ˜¯webæµè§ˆå™¨ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹å¦‚æœç”¨æˆ·æƒ³è¯·æ±‚Service Providerçš„èµ„æºçš„æ—¶å€™ï¼ŒSAMLåè®®æ˜¯æ€ä¹ˆå¤„ç†çš„ã€‚&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;ç”¨æˆ·é€šè¿‡User Agentè¯·æ±‚Service Provider,æ¯”å¦‚ï¼š&lt;/li&gt;
&lt;/ol&gt;&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;http://sp.flydean.com/myresource
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;SPå°†ä¼šå¯¹è¯¥èµ„æºè¿›è¡Œç›¸åº”çš„å®‰å…¨æ£€æŸ¥ï¼Œå¦‚æœå‘ç°å·²ç»æœ‰ä¸€ä¸ªæœ‰æ•ˆçš„å®‰å…¨ä¸Šä¸‹æ–‡çš„è¯ï¼ŒSPå°†ä¼šè·³è¿‡2-7æ­¥ï¼Œç›´æ¥è¿›å…¥ç¬¬8æ­¥ã€‚&lt;/p&gt;
&lt;ol start=&quot;2&quot;&gt;&lt;li&gt;å¦‚æœåœ¨ç¬¬ä¸€æ­¥çš„æ—¶å€™ï¼ŒSPå¹¶æ²¡æœ‰æ‰¾åˆ°ç›¸åº”çš„æœ‰æ•ˆå®‰å…¨ä¸Šä¸‹æ–‡çš„è¯ï¼Œåˆ™ä¼šç”Ÿæˆå¯¹åº”çš„SAMLRequestï¼Œå¹¶å°†User Agenté‡å®šå‘åˆ°IdPï¼š&lt;/li&gt;
&lt;/ol&gt;&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;302 Redirect
Location: https://idp.flydean.com/SAML2/SSO/Redirect?SAMLRequest=request&amp;amp;RelayState=token
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;RelayStateæ˜¯SPç»´æŠ¤çš„ä¸€ä¸ªçŠ¶æ€ä¿¡æ¯ï¼Œä¸»è¦ç”¨æ¥é˜²æ­¢CSRFæ”»å‡»ã€‚&lt;/p&gt;
&lt;p&gt;å…¶ä¸­è¿™ä¸ªSAMLRequestæ˜¯ç”¨Base64ç¼–ç çš„&lt;a target=&quot;_blank&quot;&gt;samlp:AuthnRequest&lt;/a&gt;ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªsamlp:AuthnRequestçš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-xml&quot;&gt;  &amp;lt;samlp:AuthnRequest
    xmlns:samlp=&quot;urn:oasis:names:tc:SAML:2.0:protocol&quot;
    xmlns:saml=&quot;urn:oasis:names:tc:SAML:2.0:assertion&quot;
    ID=&quot;aaf23196-1773-2113-474a-fe114412ab72&quot;
    Version=&quot;2.0&quot;
    IssueInstant=&quot;2020-09-05T09:21:59Z&quot;
    AssertionConsumerServiceIndex=&quot;0&quot;
    AttributeConsumingServiceIndex=&quot;0&quot;&amp;gt;
    &amp;lt;saml:Issuer&amp;gt;https://sp.flydean.com/SAML2&amp;lt;/saml:Issuer&amp;gt;
    &amp;lt;samlp:NameIDPolicy
      AllowCreate=&quot;true&quot;
      Format=&quot;urn:oasis:names:tc:SAML:2.0:nameid-format:transient&quot;/&amp;gt;
  &amp;lt;/samlp:AuthnRequest&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸ºäº†å®‰å…¨èµ·è§ï¼ŒSAMLRequestè¿˜å¯ä»¥ä½¿ç”¨SPæä¾›çš„ç­¾åkeyæ¥è¿›è¡Œç­¾åã€‚&lt;/p&gt;
&lt;ol start=&quot;3&quot;&gt;&lt;li&gt;User agentå°†ä¼šå‘é€ä¸€ä¸ªgetè¯·æ±‚åˆ°IdPçš„SSO server :&lt;/li&gt;
&lt;/ol&gt;&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;GET /SAML2/SSO/Redirect?SAMLRequest=request&amp;amp;RelayState=token HTTP/1.1
Host: idp.flydean.com
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;IdPæ”¶åˆ°è¿™ä¸ªAuthnRequestè¯·æ±‚ä¹‹åï¼Œå°†ä¼šè¿›è¡Œå®‰å…¨éªŒè¯ï¼Œå¦‚æœæ˜¯åˆæ³•çš„AuthnRequestï¼Œé‚£ä¹ˆå°†ä¼šå±•ç¤ºç™»å½•ç•Œé¢ã€‚&lt;/p&gt;
&lt;ol start=&quot;4&quot;&gt;&lt;li&gt;ç”¨æˆ·å¯ä»¥è¾“å…¥ç”¨æˆ·åå¯†ç è¿›è¡Œç™»å½•ã€‚ç™»å½•æˆåŠŸä¹‹åï¼ŒIdPå°†ä¼šè¿”å›ä¸€ä¸ªXHTML formï¼š&lt;/li&gt;
&lt;/ol&gt;&lt;pre&gt;
&lt;code class=&quot;language-xml&quot;&gt;  &amp;lt;form method=&quot;post&quot; action=&quot;https://sp.flydean.com/SAML2/SSO/POST&quot; ...&amp;gt;
    &amp;lt;input type=&quot;hidden&quot; name=&quot;SAMLResponse&quot; value=&quot;response&quot; /&amp;gt;
    &amp;lt;input type=&quot;hidden&quot; name=&quot;RelayState&quot; value=&quot;token&quot; /&amp;gt;
    ...
    &amp;lt;input type=&quot;submit&quot; value=&quot;Submit&quot; /&amp;gt;
  &amp;lt;/form&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™ä¸ªformä¸­åŒ…å«äº†SAMLResponseä¿¡æ¯ï¼ŒSAMLResponseä¸­åŒ…å«äº†ç”¨æˆ·ç›¸å…³çš„ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;åŒæ ·çš„SAMLResponseä¹Ÿæ˜¯ä½¿ç”¨Base64è¿›è¡Œç¼–ç è¿‡çš„&lt;a target=&quot;_blank&quot;&gt;samlp:Response&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-xml&quot;&gt;&amp;lt;samlp:Response
    xmlns:samlp=&quot;urn:oasis:names:tc:SAML:2.0:protocol&quot;
    xmlns:saml=&quot;urn:oasis:names:tc:SAML:2.0:assertion&quot;
    ID=&quot;identifier_2&quot;
    InResponseTo=&quot;identifier_1&quot;
    Version=&quot;2.0&quot;
    IssueInstant=&quot;2020-09-05T09:22:05Z&quot;
    Destination=&quot;https://sp.flydean.com/SAML2/SSO/POST&quot;&amp;gt;
    &amp;lt;saml:Issuer&amp;gt;https://idp.flydean.com/SAML2&amp;lt;/saml:Issuer&amp;gt;
    &amp;lt;samlp:Status&amp;gt;
      &amp;lt;samlp:StatusCode
        Value=&quot;urn:oasis:names:tc:SAML:2.0:status:Success&quot;/&amp;gt;
    &amp;lt;/samlp:Status&amp;gt;
    &amp;lt;saml:Assertion
      xmlns:saml=&quot;urn:oasis:names:tc:SAML:2.0:assertion&quot;
      ID=&quot;identifier_3&quot;
      Version=&quot;2.0&quot;
      IssueInstant=&quot;2020-09-05T09:22:05Z&quot;&amp;gt;
      &amp;lt;saml:Issuer&amp;gt;https://idp.flydean.com/SAML2&amp;lt;/saml:Issuer&amp;gt;
      &amp;lt;!-- a POSTed assertion MUST be signed --&amp;gt;
      &amp;lt;ds:Signature
        xmlns:ds=&quot;http://www.w3.org/2000/09/xmldsig#&quot;&amp;gt;...&amp;lt;/ds:Signature&amp;gt;
      &amp;lt;saml:Subject&amp;gt;
        &amp;lt;saml:NameID
          Format=&quot;urn:oasis:names:tc:SAML:2.0:nameid-format:transient&quot;&amp;gt;
          3f7b3dcf-1674-4ecd-92c8-1544f346baf8
        &amp;lt;/saml:NameID&amp;gt;
        &amp;lt;saml:SubjectConfirmation
          Method=&quot;urn:oasis:names:tc:SAML:2.0:cm:bearer&quot;&amp;gt;
          &amp;lt;saml:SubjectConfirmationData
            InResponseTo=&quot;identifier_1&quot;
            Recipient=&quot;https://sp.flydean.com/SAML2/SSO/POST&quot;
            NotOnOrAfter=&quot;2020-09-05T09:27:05Z&quot;/&amp;gt;
        &amp;lt;/saml:SubjectConfirmation&amp;gt;
      &amp;lt;/saml:Subject&amp;gt;
      &amp;lt;saml:Conditions
        NotBefore=&quot;2020-09-05T09:17:05Z&quot;
        NotOnOrAfter=&quot;2020-09-05T09:27:05Z&quot;&amp;gt;
        &amp;lt;saml:AudienceRestriction&amp;gt;
          &amp;lt;saml:Audience&amp;gt;https://sp.flydean.com/SAML2&amp;lt;/saml:Audience&amp;gt;
        &amp;lt;/saml:AudienceRestriction&amp;gt;
      &amp;lt;/saml:Conditions&amp;gt;
      &amp;lt;saml:AuthnStatement
        AuthnInstant=&quot;2020-09-05T09:22:00Z&quot;
        SessionIndex=&quot;identifier_3&quot;&amp;gt;
        &amp;lt;saml:AuthnContext&amp;gt;
          &amp;lt;saml:AuthnContextClassRef&amp;gt;
            urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport
         &amp;lt;/saml:AuthnContextClassRef&amp;gt;
        &amp;lt;/saml:AuthnContext&amp;gt;
      &amp;lt;/saml:AuthnStatement&amp;gt;
    &amp;lt;/saml:Assertion&amp;gt;
  &amp;lt;/samlp:Response&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹åˆ°samlp:Responseä¸­åŒ…å«æœ‰saml:Assertionä¿¡æ¯ã€‚&lt;/p&gt;
&lt;ol start=&quot;5&quot; readability=&quot;2&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;user agent æ”¶åˆ°XHTML formä¹‹åå°†ä¼šæäº¤è¯¥formç»™SPã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;SPä¸­çš„assertion consumer serviceå°†ä¼šå¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œåˆ›å»ºç›¸å…³çš„å®‰å…¨ä¸Šä¸‹æ–‡ï¼Œå¹¶å°†user agenté‡å®šå‘åˆ°è¦è®¿é—®çš„èµ„æºé¡µé¢ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;user agentå†æ¬¡è¯·æ±‚SPèµ„æºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;å› ä¸ºå®‰å…¨ä¸Šä¸‹æ–‡å·²ç»åˆ›å»ºå®Œæ¯•ï¼ŒSPå¯ä»¥ç›´æ¥è¿”å›ç›¸åº”çš„èµ„æºï¼Œä¸ç”¨å†æ¬¡åˆ°IdPè¿›è¡Œè®¤è¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸Šé¢çš„æ‰€æœ‰çš„ä¿¡æ¯äº¤æ¢éƒ½æ˜¯ç”±å‰ç«¯æµè§ˆå™¨æ¥å®Œæˆçš„ï¼Œåœ¨SPå’ŒIdPä¹‹é—´ä¸å­˜åœ¨ç›´æ¥çš„é€šä¿¡ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§å…¨éƒ¨ç”±å‰ç«¯æ¥å®Œæˆä¿¡æ¯äº¤æ¢çš„æ–¹å¼å¥½å¤„å°±æ˜¯åè®®æµéå¸¸ç®€å•ï¼Œæ‰€æœ‰çš„æ¶ˆæ¯éƒ½æ˜¯ç®€å•çš„GETæˆ–è€…POSTè¯·æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä¸ºäº†æé«˜å®‰å…¨æ€§ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¼•ç”¨æ¶ˆæ¯ã€‚ä¹Ÿå°±æ˜¯è¯´IdPè¿”å›çš„ä¸æ˜¯ç›´æ¥çš„SAML assertionï¼Œè€Œæ˜¯ä¸€ä¸ªSAML assertionçš„å¼•ç”¨ã€‚SPæ”¶åˆ°è¿™ä¸ªå¼•ç”¨ä¹‹åï¼Œå¯ä»¥ä»åå°å†å»æŸ¥è¯¢çœŸå®çš„SAML assertionï¼Œä»è€Œæé«˜äº†å®‰å…¨æ€§ã€‚&lt;/p&gt;
&lt;h2 id=&quot;samlçš„ç¼ºç‚¹&quot;&gt;SAMLçš„ç¼ºç‚¹&lt;/h2&gt;
&lt;p&gt;SAMLåè®®æ˜¯2005å¹´åˆ¶å®šçš„ï¼Œåœ¨åˆ¶å®šåè®®çš„æ—¶å€™åŸºæœ¬ä¸Šæ˜¯é’ˆå¯¹äºwebåº”ç”¨ç¨‹åºæ¥è¯´çš„ï¼Œä½†æ˜¯é‚£æ—¶å€™çš„webåº”ç”¨ç¨‹åºè¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œæ›´åˆ«æå¯¹Appçš„æ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;SAMLéœ€è¦é€šè¿‡HTTP Redectå’ŒHTTP POSTåè®®æ¥ä¼ é€’ç”¨æˆ·ä¿¡æ¯ï¼Œå¹¶ä¸”é€šå¸¸æ˜¯é€šè¿‡HTML FORMçš„æ ¼å¼æ¥è¿›è¡Œæ•°æ®çš„æäº¤çš„ã€‚å¦‚æœåº”ç”¨ç¨‹åºå¹¶ä¸æ˜¯webåº”ç”¨ï¼Œæ¯”å¦‚è¯´æ˜¯ä¸€ä¸ªæ‰‹æœºAppåº”ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªæ‰‹æœºAPPåº”ç”¨çš„å¯åŠ¨é“¾æ¥æ˜¯ my-photos://authenticate ï¼Œ ä½†æ˜¯æ‰‹æœºappå¯èƒ½å¹¶ä¸èƒ½è·å–åˆ°Http POSTçš„bodyå†…å®¹ã€‚ä»–ä»¬åªèƒ½å¤Ÿé€šè¿‡URLæ¥è¿›è¡Œå‚æ•°çš„ä¼ é€’ã€‚&lt;/p&gt;
&lt;p&gt;è¿™å°±æ„å‘³ç€ï¼Œåœ¨æ‰‹æœºAPPä¸­ä¸èƒ½å¤Ÿä½¿ç”¨SAMLã€‚&lt;/p&gt;
&lt;p&gt;å½“ç„¶ï¼Œè¦æƒ³å·¥ä½œä¹Ÿå¯ä»¥ï¼Œä¸è¿‡éœ€è¦è¿›è¡Œä¸€äº›æ”¹é€ ã€‚æ¯”å¦‚é€šè¿‡ç¬¬ä¸‰æ–¹åº”ç”¨å¯¹POSTæ¶ˆæ¯è¿›è¡Œè§£æï¼Œç„¶åå°†è§£æå‡ºæ¥çš„SAMLRequestä»¥URLå‚æ•°çš„å½¢å¼ä¼ é€’ç»™APPã€‚&lt;/p&gt;
&lt;p&gt;å¦ä¸€ç§æ–¹æ³•å°±æ˜¯ä½¿ç”¨OAuth2.&lt;/p&gt;

&lt;p&gt;å› ä¸ºOauth2æ˜¯åœ¨2012å¹´æ‰äº§ç”Ÿçš„ã€‚æ‰€ä»¥å¹¶æ²¡æœ‰é‚£ä¹ˆå¤šçš„ä½¿ç”¨é™åˆ¶ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä¸åŒçš„åœºåˆä¸­ä½¿ç”¨OAuth2ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹OAuth2ä¸­æˆæƒçš„æµç¨‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20200914225501505.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_0,text_aHR0cDovL3d3dy5mbHlkZWFuLmNvbQ==,size_25,color_8F8F8F,t_70&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¸€èˆ¬æ¥è¯´OAuth2ä¸­æœ‰4ä¸ªè§’è‰²ã€‚&lt;/p&gt;
&lt;p&gt;resource ownerï¼š ä»£è¡¨çš„æ˜¯èµ„æºçš„æ‰€æœ‰è€…ï¼Œå¯ä»¥é€šè¿‡æä¾›ç”¨æˆ·åå¯†ç æˆ–è€…å…¶ä»–æ–¹å¼æ¥è¿›è¡Œæˆæƒã€‚é€šå¸¸æ¥æ˜¯ä¸€ä¸ªäººã€‚&lt;/p&gt;
&lt;p&gt;resource serverï¼šä»£è¡¨çš„æ˜¯æœ€ç»ˆéœ€è¦è®¿é—®åˆ°èµ„æºçš„æœåŠ¡å™¨ã€‚æ¯”å¦‚githubæˆæƒä¹‹åè·å–åˆ°çš„ç”¨æˆ·ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;clientï¼š ç”¨æ¥æ›¿ä»£resource owneræ¥è¿›è¡Œäº¤äº’çš„å®¢æˆ·ç«¯ã€‚&lt;/p&gt;
&lt;p&gt;authorization serverï¼š ç”¨æ¥è¿›è¡Œæˆæƒçš„æœåŠ¡å™¨ï¼Œå¯ä»¥ç”Ÿæˆç›¸åº”çš„Access Tokenã€‚&lt;/p&gt;
&lt;p&gt;æ•´ä¸ªæµç¨‹æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;
&lt;p&gt;Clientå‘resource ownerå‘èµ·ä¸€ä¸ªæˆæƒè¯·æ±‚ï¼Œresource ownerè¾“å…¥ç›¸åº”çš„è®¤è¯ä¿¡æ¯ï¼Œå°†authorization grantè¿”å›ç»™clientã€‚&lt;/p&gt;
&lt;p&gt;clientå†å°†è·å–åˆ°çš„authorization grantè¯·æ±‚æˆæƒæœåŠ¡å™¨ï¼Œå¹¶è¿”å›access tokenã€‚&lt;/p&gt;
&lt;p&gt;clientç„¶åå°±å¯ä»¥æ‹¿ç€è¿™ä¸ªaccess tokenå»è¯·æ±‚resource serverï¼Œæœ€åè·å–åˆ°å—é™èµ„æºã€‚&lt;/p&gt;
&lt;h2 id=&quot;oauth2çš„ç¼ºç‚¹&quot;&gt;OAuth2çš„ç¼ºç‚¹&lt;/h2&gt;
&lt;p&gt;OAuth2å¹¶æ²¡æœ‰æŒ‡å®šResource Serveræ€ä¹ˆå’ŒAuthorization Serverè¿›è¡Œäº¤äº’ã€‚ä¹Ÿæ²¡æœ‰è§„å®šè¿”å›ç”¨æˆ·ä¿¡æ¯çš„å†…å®¹å’Œæ ¼å¼ã€‚è¿™äº›éƒ½éœ€è¦å®ç°æ–¹è‡ªå·±å»å†³å®šã€‚&lt;/p&gt;
&lt;p&gt;OAuth2é»˜è®¤æ˜¯åœ¨HTTPSç¯å¢ƒä¸‹å·¥ä½œçš„ï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰çº¦å®šä¿¡æ¯çš„åŠ å¯†æ–¹å¼ã€‚æˆ‘ä»¬éœ€è¦è‡ªå·±å»å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åï¼ŒOAuth2æ˜¯ä¸€ä¸ªæˆæƒåè®®ï¼Œè€Œä¸æ˜¯è®¤è¯åè®®ã€‚å¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨OpenID Connectåè®®ã€‚å› ä¸ºOpenID Connectå°±æ˜¯åŸºäºOAuth2å®ç°çš„ï¼Œå¹¶ä¸”æ·»åŠ äº†è®¤è¯åè®®ã€‚&lt;/p&gt;
&lt;p&gt;OpenID Connectç®€ç§°ä¸ºOIDCï¼Œå·²æˆä¸ºInternetä¸Šå•ç‚¹ç™»å½•å’Œèº«ä»½ç®¡ç†çš„é€šç”¨æ ‡å‡†ã€‚ å®ƒåœ¨OAuth2ä¸Šæ„å»ºäº†ä¸€ä¸ªèº«ä»½å±‚ï¼Œæ˜¯ä¸€ä¸ªåŸºäºOAuth2åè®®çš„èº«ä»½è®¤è¯æ ‡å‡†åè®®ã€‚&lt;/p&gt;
&lt;p&gt;OAuth2å®é™…ä¸Šåªåšäº†æˆæƒï¼Œè€ŒOpenID Connectåœ¨æˆæƒçš„åŸºç¡€ä¸ŠåˆåŠ ä¸Šäº†è®¤è¯ã€‚&lt;/p&gt;
&lt;p&gt;OIDCçš„ä¼˜ç‚¹æ˜¯ï¼šç®€å•çš„åŸºäºJSONçš„èº«ä»½ä»¤ç‰Œï¼ˆJWTï¼‰ï¼Œå¹¶ä¸”å®Œå…¨å…¼å®¹OAuth2åè®®ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨SAMLåè®®ä¸­ï¼ŒSAML tokenä¸­å·²ç»åŒ…å«äº†ç”¨æˆ·èº«ä»½ä¿¡æ¯ï¼Œä½†æ˜¯åœ¨OAuth2ï¼Œåœ¨æ‹¿åˆ°tokenä¹‹åï¼Œéœ€è¦é¢å¤–å†åšä¸€æ¬¡å¯¹è¯¥tokençš„æ ¡éªŒã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯å¦ä¸€æ–¹é¢ï¼ŒOAuth2å› ä¸ºéœ€è¦å†åšä¸€æ¬¡è®¤è¯ï¼Œæ‰€ä»¥å¯ä»¥åœ¨ Authorization Server ç«¯å¯¹tokenè¿›è¡Œæ— æ•ˆå¤„ç†ã€‚&lt;/p&gt;

&lt;p&gt;åšè¿‡SSOçš„åº”è¯¥éƒ½å¬è¯´è¿‡CASã€‚CASçš„å…¨ç§°æ˜¯Central Authentication Serviceï¼Œæ˜¯ä¸€ä¸ªä¼ä¸šçº§çš„å¼€æºçš„SSOè®¤è¯æ¡†æ¶ã€‚&lt;/p&gt;
&lt;p&gt;CASå†…éƒ¨é›†æˆäº†CAS1,2,3ï¼ŒSAML1,2ï¼ŒOAuth2,OpenIDå’ŒOpenID Connectåè®®ï¼Œéå¸¸çš„å¼ºå¤§ã€‚æˆ‘ä»¬ä¼šåœ¨åé¢çš„æ–‡ç« ä¸­ä»‹ç»CASçš„ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;10.394366197183&quot;&gt;
&lt;p&gt;æœ¬æ–‡ä½œè€…ï¼šflydeanç¨‹åºé‚£äº›äº‹&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡é“¾æ¥ï¼š&lt;a href=&quot;http://www.flydean.com/saml-vs-oauth2/&quot; target=&quot;_blank&quot;&gt;http://www.flydean.com/saml-vs-oauth2/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡æ¥æºï¼šflydeançš„åšå®¢&lt;/p&gt;
&lt;p&gt;æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·:ã€Œç¨‹åºé‚£äº›äº‹ã€æœ€é€šä¿—çš„è§£è¯»ï¼Œæœ€æ·±åˆ»çš„å¹²è´§ï¼Œæœ€ç®€æ´çš„æ•™ç¨‹ï¼Œä¼—å¤šä½ ä¸çŸ¥é“çš„å°æŠ€å·§ç­‰ä½ æ¥å‘ç°ï¼&lt;/p&gt;
&lt;/blockquote&gt;
</description>
<pubDate>Sat, 02 Jan 2021 13:56:00 +0000</pubDate>
<dc:creator>flydean</dc:creator>
<og:description>ç®€ä»‹ SSOæ˜¯å•ç‚¹ç™»å½•çš„ç®€ç§°ï¼Œå¸¸ç”¨çš„SSOçš„åè®®æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯SAMLå’ŒOAuth2ã€‚æœ¬æ–‡å°†ä¼šä»‹ç»ä¸¤ç§åè®®çš„ä¸åŒä¹‹å¤„ï¼Œä»è€Œè®©è¯»è€…å¯¹è¿™ä¸¤ç§åè®®æœ‰æ›´åŠ æ·±å…¥çš„ç†è§£ã€‚ SAML SAMLçš„å…¨ç§°æ˜¯Securit</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/flydean/p/14224139.html</dc:identifier>
</item>
<item>
<title>.NET äº‘åŸç”Ÿæ¶æ„å¸ˆè®­ç»ƒè¥ï¼ˆæ¨¡å—äºŒ åŸºç¡€å·©å›º MongoDB å†™å…¥å’ŒæŸ¥è¯¢ï¼‰--å­¦ä¹ ç¬”è®° - MingsonZheng</title>
<link>http://www.cnblogs.com/MingsonZheng/p/14224071.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/MingsonZheng/p/14224071.html</guid>
<description>&lt;ul&gt;&lt;li&gt;å†™å…¥&lt;/li&gt;
&lt;li&gt;æŸ¥è¯¢&lt;/li&gt;
&lt;li&gt;æŸ¥æ‰¾æ“ä½œç¬¦&lt;/li&gt;
&lt;li&gt;é€»è¾‘æ“ä½œç¬¦&lt;/li&gt;
&lt;li&gt;å…¶ä»–&lt;/li&gt;
&lt;li&gt;åµŒå¥—å¯¹è±¡&lt;/li&gt;
&lt;li&gt;æ•°ç»„&lt;/li&gt;
&lt;li&gt;æ¸¸æ ‡æ–¹æ³•&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;å†™å…¥&quot;&gt;å†™å…¥&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.mongodb.com/manual/tutorial/insert-documents/&quot; target=&quot;_blank&quot;&gt;https://docs.mongodb.com/manual/tutorial/insert-documents/&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;insertOne&lt;/li&gt;
&lt;li&gt;insertMany&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code&gt;db.questions.insert( 
{  
    &quot;_id&quot;:&quot;003&quot;,
    &quot;title&quot;:&quot;ç¬¬ä¸‰ä¸ªé—®é¢˜&quot;, 
    &quot;view&quot;:0,
    &quot;isDeleted&quot;:false,
    &quot;content&quot;:&quot;ç¬¬ä¸‰ä¸ªé—®é¢˜&quot;, 
    &quot;status&quot;:&quot;open&quot;, 
    &quot;tags&quot;:[&quot;c#&quot;], 
    &quot;answers&quot;:[
        {&quot;content&quot;:&quot;å›ç­”1&quot;},
        {&quot;content&quot;:&quot;å›ç­”2&quot;},
        {&quot;content&quot;:&quot;å›ç­”3&quot;}
        ]
 } 
    )
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;db.questions.insertMany( 
[
{  
    &quot;_id&quot;:&quot;004&quot;,
    &quot;title&quot;:&quot;ç¬¬ä¸‰ä¸ªé—®é¢˜&quot;, 
    &quot;view&quot;:0,
    &quot;isDeleted&quot;:false,
    &quot;content&quot;:&quot;ç¬¬ä¸‰ä¸ªé—®é¢˜&quot;, 
    &quot;status&quot;:&quot;open&quot;, 
    &quot;tags&quot;:[&quot;c#&quot;], 
    &quot;answers&quot;:[
        {&quot;content&quot;:&quot;å›ç­”1&quot;},
        {&quot;content&quot;:&quot;å›ç­”2&quot;},
        {&quot;content&quot;:&quot;å›ç­”3&quot;}
        ]
 },
 {  
    &quot;_id&quot;:&quot;005&quot;,
    &quot;title&quot;:&quot;ç¬¬ä¸‰ä¸ªé—®é¢˜&quot;, 
    &quot;view&quot;:0,
    &quot;isDeleted&quot;:false,
    &quot;content&quot;:&quot;ç¬¬ä¸‰ä¸ªé—®é¢˜&quot;, 
    &quot;status&quot;:&quot;open&quot;, 
    &quot;tags&quot;:[&quot;c#&quot;], 
    &quot;answers&quot;:[
        {&quot;content&quot;:&quot;å›ç­”1&quot;},
        {&quot;content&quot;:&quot;å›ç­”2&quot;},
        {&quot;content&quot;:&quot;å›ç­”3&quot;}
        ]
 }
] 
    )
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;æŸ¥è¯¢&quot;&gt;æŸ¥è¯¢&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.mongodb.com/manual/reference/operator/query/&quot; target=&quot;_blank&quot;&gt;https://docs.mongodb.com/manual/reference/operator/query/&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;db.users.find(
    { age: { $gt: 18 } },    // æŸ¥è¯¢æ¡ä»¶
    { name: 1, address: 1 }  // æŸ¥è¯¢å­—æ®µ
).limit(5)
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;db.getCollection('questions').find({&quot;title&quot;:&quot;ç¬¬ä¸‰ä¸ªé—®é¢˜&quot;},{&quot;title&quot;:1,&quot;content&quot;:1})

db.getCollection('questions').find({},{&quot;title&quot;:1,&quot;content&quot;:1}).skip(1).limit(2)
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;æŸ¥æ‰¾æ“ä½œç¬¦&quot;&gt;æŸ¥æ‰¾æ“ä½œç¬¦&lt;/h2&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody readability=&quot;1&quot;&gt;&lt;tr&gt;&lt;td&gt;$eq&lt;/td&gt;
&lt;td&gt;ç­‰äº&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;$gt&lt;/td&gt;
&lt;td&gt;å¤§äº&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;$gte&lt;/td&gt;
&lt;td&gt;å¤§äºç­‰äº&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;$lt&lt;/td&gt;
&lt;td&gt;å°äº&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;$lte&lt;/td&gt;
&lt;td&gt;å°äºç­‰äº&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;$ne&lt;/td&gt;
&lt;td&gt;ä¸ç­‰äº&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;$in&lt;/td&gt;
&lt;td&gt;å­˜åœ¨äº&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;$nin&lt;/td&gt;
&lt;td&gt;ä¸å­˜åœ¨äºï¼šä¸€èˆ¬ç”¨äºæ•°ç»„&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;pre&gt;
&lt;code&gt;// å¤§äºç­‰äº
db.getCollection('questions').find({&quot;view&quot;:{$gte: NumberInt(0)}})

// å­˜åœ¨äº
db.getCollection('questions').find({&quot;tags&quot;:{$in: [&quot;c#&quot;]}})
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;é€»è¾‘æ“ä½œç¬¦&quot;&gt;é€»è¾‘æ“ä½œç¬¦&lt;/h2&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody readability=&quot;3&quot;&gt;&lt;tr&gt;&lt;td&gt;$and&lt;/td&gt;
&lt;td&gt;æ»¡è¶³å¤šä¸ªæ¡ä»¶&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;$or&lt;/td&gt;
&lt;td&gt;æ»¡è¶³å¤šä¸ªæ¡ä»¶ä¸­çš„ä¸€ä¸ª&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;$not&lt;/td&gt;
&lt;td&gt;ä¸åŒ¹é…ï¼Œæˆ–è€…å­—æ®µä¸å­˜åœ¨&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;$nor&lt;/td&gt;
&lt;td&gt;å¤šä¸ªæ¡ä»¶ï¼Œä¸€ä¸ªéƒ½ä¸æ»¡è¶³&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;pre&gt;
&lt;code&gt;// æ»¡è¶³å¤šä¸ªæ¡ä»¶ä¸­çš„ä¸€ä¸ª
db.getCollection('questions').find({$or:
[
{&quot;tags&quot;:{$in: [&quot;c#&quot;]}},
{&quot;view&quot;:{$gt:2}}
]
})

db.getCollection('questions').find({&quot;view&quot;:{&quot;$gt&quot;: 5}})
// ä¸åŒ¹é…ï¼Œæˆ–è€…å­—æ®µä¸å­˜åœ¨ï¼ˆå–åï¼‰
db.getCollection('questions').find({&quot;view&quot;: {$not: {&quot;$gt&quot;: 5}}})

// å¤šä¸ªæ¡ä»¶ï¼Œä¸€ä¸ªéƒ½ä¸æ»¡è¶³
db.getCollection('questions').find({$nor: [{&quot;view&quot;:{&quot;$gt&quot;: 5}}]})
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;å…¶ä»–&quot;&gt;å…¶ä»–&lt;/h2&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;$exists&lt;/td&gt;
&lt;td&gt;å­˜åœ¨æŸä¸ªå­—æ®µ&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;$type&lt;/td&gt;
&lt;td&gt;å­—æ®µçš„ç±»å‹&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;pre&gt;
&lt;code&gt;// å­˜åœ¨æŸä¸ªå­—æ®µåˆ™æ˜¾ç¤º
db.getCollection('questions').find({&quot;best&quot;: {$exists:1}})
// ä¸å­˜åœ¨æŸä¸ªå­—æ®µåˆ™æ˜¾ç¤º
db.getCollection('questions').find({&quot;best&quot;: {$exists:0}})
// å­—æ®µçš„ç±»å‹ï¼Œ16ä»£è¡¨32-byte integer
db.getCollection('questions').find({&quot;view&quot;: {$type: 16}})
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;a href=&quot;https://mongoing.com/docs/reference/bson-types.html&quot; target=&quot;_blank&quot;&gt;https://mongoing.com/docs/reference/bson-types.html&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;åµŒå¥—å¯¹è±¡&quot;&gt;åµŒå¥—å¯¹è±¡&lt;/h2&gt;
&lt;pre&gt;
&lt;code&gt;db.getCollection('questions').find({&quot;best.content&quot;:{$eq: &quot;æœ€å¥½çš„ç­”æ¡ˆ&quot;}})
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;æ•°ç»„&quot;&gt;æ•°ç»„&lt;/h2&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody readability=&quot;2&quot;&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;$all&lt;/td&gt;
&lt;td&gt;æ‰€æœ‰å…ƒç´ åŒ¹é…ï¼ŒåŒ¹é…ç®€å•ç±»å‹æ•°ç»„&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;$elemMatch&lt;/td&gt;
&lt;td&gt;ç”¨äºåŒ¹é… object æ•°ç»„&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;$size&lt;/td&gt;
&lt;td&gt;é•¿åº¦æ¡ä»¶&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;pre&gt;
&lt;code&gt;db.getCollection('questions').find({&quot;tags&quot;: {$in: [&quot;c#&quot;]}})

db.getCollection('questions').find({&quot;tags&quot;: {$nin: [&quot;c#&quot;]}})

// éƒ½å¿…é¡»åŒ…å«
db.getCollection('questions').find({&quot;tags&quot;: {$all: [&quot;c#&quot;, &quot;asp.net core&quot;]}})

// å¤§å°ä¸º2
db.getCollection('questions').find

// åŒ…å« å›ç­”1 çš„æ•°ç»„
db.getCollection('questions').find({&quot;answers&quot;: {$elemMatch: {&quot;content&quot;: &quot;å›ç­”1&quot;}}})

db.getCollection('questions').find({&quot;answers&quot;: {$elemMatch: {&quot;content&quot;: {$gte: &quot;å›ç­”1&quot;}}}})
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;æ¸¸æ ‡æ–¹æ³•&quot;&gt;æ¸¸æ ‡æ–¹æ³•&lt;/h2&gt;
&lt;p&gt;åªåœ¨ mongo shell ä¸­æœ‰æ•ˆï¼Œå…¶ä»–è¯­è¨€ç‰ˆæœ¬ sdk æ— æ•ˆ&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;skip&lt;/li&gt;
&lt;li&gt;limit&lt;/li&gt;
&lt;li&gt;count&lt;/li&gt;
&lt;li&gt;pretty ç¾åŒ–&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;a rel=&quot;license&quot; href=&quot;http://creativecommons.org/licenses/by-nc-sa/4.0/&quot;&gt;&lt;img alt=&quot;çŸ¥è¯†å…±äº«è®¸å¯åè®®&quot; src=&quot;https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æœ¬ä½œå“é‡‡ç”¨&lt;a rel=&quot;license&quot; href=&quot;http://creativecommons.org/licenses/by-nc-sa/4.0/&quot;&gt;çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®&lt;/a&gt;è¿›è¡Œè®¸å¯ã€‚&lt;/p&gt;
&lt;p&gt;æ¬¢è¿è½¬è½½ã€ä½¿ç”¨ã€é‡æ–°å‘å¸ƒï¼Œä½†åŠ¡å¿…ä¿ç•™æ–‡ç« ç½²å éƒ‘å­é“­ ï¼ˆåŒ…å«é“¾æ¥ï¼š &lt;a href=&quot;http://www.cnblogs.com/MingsonZheng/&quot; target=&quot;_blank&quot;&gt;http://www.cnblogs.com/MingsonZheng/&lt;/a&gt; ï¼‰ï¼Œä¸å¾—ç”¨äºå•†ä¸šç›®çš„ï¼ŒåŸºäºæœ¬æ–‡ä¿®æ”¹åçš„ä½œå“åŠ¡å¿…ä»¥ç›¸åŒçš„è®¸å¯å‘å¸ƒã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœ‰ä»»ä½•ç–‘é—®ï¼Œè¯·ä¸æˆ‘è”ç³» (MingsonZheng@outlook.com) ã€‚&lt;/p&gt;
</description>
<pubDate>Sat, 02 Jan 2021 13:43:00 +0000</pubDate>
<dc:creator>MingsonZheng</dc:creator>
<og:description>2.5.3 MongoDB -- å†™å…¥å’ŒæŸ¥è¯¢ å†™å…¥ æŸ¥è¯¢ æŸ¥æ‰¾æ“ä½œç¬¦ é€»è¾‘æ“ä½œç¬¦ å…¶ä»– åµŒå¥—å¯¹è±¡ æ•°ç»„ æ¸¸æ ‡æ–¹æ³• å†™å…¥ https://docs.mongodb.com/manual/tutorial</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/MingsonZheng/p/14224071.html</dc:identifier>
</item>
</channel>
</rss>