<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>åšå®¢å›­_é¦–é¡µ</title>
<link></link>
<description>ä»£ç æ”¹å˜ä¸–ç•Œ</description>
<item>
<title>Redis ä¸»ä»å¤åˆ¶ï¼ˆReplicationï¼‰ - buttercup</title>
<link>http://www.cnblogs.com/buttercup/p/14017314.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/buttercup/p/14017314.html</guid>
<description>&lt;p&gt;ä¸ºäº†ä¿è¯æœåŠ¡çš„å¯ç”¨æ€§ï¼Œç°ä»£æ•°æ®åº“éƒ½æä¾›äº†å¤åˆ¶åŠŸèƒ½ï¼ŒåŒæ—¶åœ¨å¤šä¸ªè¿›ç¨‹ä¸­ç»´æŠ¤ä¸€è‡´çš„æ•°æ®çŠ¶æ€ã€‚&lt;br/&gt;Redis æ”¯æŒä¸€ä¸»å¤šä»çš„å¤åˆ¶æ¶æ„ï¼Œè¯¥åŠŸèƒ½è¢«ç®€åŒ–æˆäº†ä¸€æ¡ &lt;code&gt;SLAVEOF&lt;/code&gt; å‘½ä»¤ï¼Œä¸‹é¢é€šè¿‡æ¡å‘½ä»¤æ¥è§£æ Redis çš„ä¸»ä»å¤åˆ¶æœºåˆ¶ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨æœ¬æœºä¸Šé€šè¿‡ redis-server å¯åŠ¨ä¸¤ä¸ªæœåŠ¡ï¼Œç„¶åé€šè¿‡ tcpdump è§‚å¯Ÿä¸»ä»é—´çš„äº¤äº’æƒ…å†µï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;redis-server --port 6379 --requirepass 123456 # å¯åŠ¨ master
redis-server --port 6380 --masterauth 123456  # å¯åŠ¨ slave
tcpdump -t -i lo0 host localhost and port 6379 | awk -F ']' '{print $1&quot;]&quot;$3}'

# åœ¨ localhost:6380 ä¸Šæ‰§è¡Œ SLAVEOF localhost 6379 å»ºç«‹åŒæ­¥è¿æ¥ï¼Œè¿›å…¥ Full-ReSync é˜¶æ®µ
localhost.59297 &amp;gt; localhost.6379: Flags [S]
localhost.6379 &amp;gt; localhost.59297: Flags [S.]
localhost.59297 &amp;gt; localhost.6379: Flags [P.] &quot;PING&quot;
localhost.6379 &amp;gt; localhost.59297: Flags [P.] &quot;NOAUTH Authentication required.&quot;
localhost.59297 &amp;gt; localhost.6379: Flags [P.] &quot;AUTH 123456&quot;
localhost.6379 &amp;gt; localhost.59297: Flags [P.] &quot;OK&quot;
localhost.59297 &amp;gt; localhost.6379: Flags [P.] &quot;REPLCONF listening-port 6380&quot;
localhost.6379 &amp;gt; localhost.59297: Flags [P.] &quot;OK&quot;:
localhost.59297 &amp;gt; localhost.6379: Flags [P.] &quot;REPLCONF capa eof&quot;
localhost.6379 &amp;gt; localhost.59297: Flags [P.] &quot;OK&quot;:
localhost.59297 &amp;gt; localhost.6379: Flags [P.] &quot;PSYNC ? -1&quot;
localhost.6379 &amp;gt; localhost.59297: Flags [P.] &quot;FULLRESYNC 8efb6ca4edf1258c05a5ced43b0c73fe4deb1908 1&quot;
localhost.6379 &amp;gt; localhost.59297: Flags [P.] [|RESP:
localhost.6379 &amp;gt; localhost.59297: Flags [P.] &quot;REDIS0007M-z^Iredis-ver^F3.2.11M-z&quot; [|RESP

# å®Œæˆ Full-ReSync åè¿›å…¥ Propagation é˜¶æ®µ
localhost.59297 &amp;gt; localhost.6379: Flags [P.] &quot;REPLCONF&quot; &quot;ACK&quot; &quot;1&quot;
localhost.59297 &amp;gt; localhost.6379: Flags [P.] &quot;REPLCONF&quot; &quot;ACK&quot; &quot;1&quot;
localhost.6379 &amp;gt; localhost.59297: Flags [P.] &quot;PING&quot;
localhost.59297 &amp;gt; localhost.6379: Flags [P.] &quot;REPLCONF&quot; &quot;ACK&quot; &quot;15&quot;
localhost.59297 &amp;gt; localhost.6379: Flags [P.] &quot;REPLCONF&quot; &quot;ACK&quot; &quot;15&quot;
localhost.6379 &amp;gt; localhost.59297: Flags [P.] &quot;SELECT&quot; &quot;0&quot; &quot;SET&quot; &quot;KEY&quot; &quot;VALUE&quot;
localhost.59297 &amp;gt; localhost.6379: Flags [P.] &quot;REPLCONF&quot; &quot;ACK&quot; &quot;85&quot;
localhost.59297 &amp;gt; localhost.6379: Flags [P.] &quot;REPLCONF&quot; &quot;ACK&quot; &quot;85&quot;
localhost.6379 &amp;gt; localhost.59297: Flags [P.] &quot;SET&quot; &quot;KEY2&quot; &quot;VALUE2&quot;
localhost.6379 &amp;gt; localhost.59297: Flags [P.] &quot;MSET&quot; &quot;KEY3&quot; &quot;VALUE3&quot; &quot;KEY4&quot; &quot;VALUE4&quot; &quot;KEY5&quot; &quot;VALUE5&quot;
localhost.59297 &amp;gt; localhost.6379: Flags [P.] &quot;REPLCONF&quot; &quot;ACK&quot; &quot;256&quot;
localhost.59297 &amp;gt; localhost.6379: Flags [P.] &quot;REPLCONF&quot; &quot;ACK&quot; &quot;256&quot;
localhost.6379 &amp;gt; localhost.59297: Flags [P.] &quot;PING&quot;
localhost.59297 &amp;gt; localhost.6379: Flags [P.] &quot;REPLCONF&quot; &quot;ACK&quot; &quot;270&quot;
localhost.59297 &amp;gt; localhost.6379: Flags [P.] &quot;REPLCONF&quot; &quot;ACK&quot; &quot;270&quot;

# åœ¨ localhost:6380 ä¸Šæ‰§è¡Œ DEBUG SLEEP 60 æ¨¡æ‹Ÿç½‘ç»œä¸­æ–­çš„æƒ…å†µ
localhost.6379 &amp;gt; localhost.59297: Flags [P.] &quot;PING&quot;
localhost.6379 &amp;gt; localhost.59297: Flags [P.] &quot;SET&quot; &quot;KEY6&quot; &quot;VALUE6&quot;
localhost.6379 &amp;gt; localhost.59297: Flags [P.] &quot;SET&quot; &quot;KEY7&quot; &quot;VALUE7&quot;
localhost.6379 &amp;gt; localhost.59297: Flags [P.] &quot;PING&quot;
localhost.6379 &amp;gt; localhost.59297: Flags [P.] &quot;MSET&quot; &quot;KEY8&quot; &quot;VALUE8&quot; &quot;KEY9&quot; &quot;VALUE9&quot;
localhost.6379 &amp;gt; localhost.59297: Flags [P.] &quot;PING&quot;
localhost.6379 &amp;gt; localhost.59297: Flags [P.] &quot;PING&quot;
localhost.59297 &amp;gt; localhost.6379: Flags [.]
localhost.59297 &amp;gt; localhost.6379: Flags [R.]

# æ—§çš„åŒæ­¥è¿æ¥æ–­å¼€åé‡æ–°å»ºç«‹åŒæ­¥è¿æ¥ï¼Œè¿›å…¥ Partical-ReSync é˜¶æ®µ
localhost.59313 &amp;gt; localhost.6379: Flags [S]
localhost.6379 &amp;gt; localhost.59313: Flags [S.]
localhost.59313 &amp;gt; localhost.6379: Flags [P.] &quot;PING&quot;
localhost.6379 &amp;gt; localhost.59313: Flags [P.] &quot;NOAUTH Authentication required.&quot;
localhost.59313 &amp;gt; localhost.6379: Flags [P.] &quot;AUTH 123456&quot;
localhost.6379 &amp;gt; localhost.59313: Flags [P.] &quot;OK&quot;
localhost.59313 &amp;gt; localhost.6379: Flags [P.] &quot;REPLCONF listening-port 6380&quot;
localhost.6379 &amp;gt; localhost.59313: Flags [P.] &quot;OK&quot;
localhost.59313 &amp;gt; localhost.6379: Flags [P.] &quot;REPLCONF capa eof&quot;
localhost.6379 &amp;gt; localhost.59313: Flags [P.] &quot;OK&quot;
localhost.59313 &amp;gt; localhost.6379: Flags [P.] &quot;PSYNC 8efb6ca4edf1258c05a5ced43b0c73fe4deb1908 271&quot;
localhost.6379 &amp;gt; localhost.59313: Flags [P.] &quot;CONTINUE&quot;
localhost.6379 &amp;gt; localhost.59313: Flags [P.] &quot;PING&quot; &quot;PING&quot; &quot;SET&quot; &quot;KEY6&quot; &quot;VALUE6&quot; &quot;PING&quot; &quot;SET&quot; &quot;KEY7&quot; &quot;VALUE7&quot; &quot;PING&quot; &quot;MSET&quot; &quot;KEY8&quot; &quot;VALUE8&quot; &quot;KEY9&quot; &quot;VALUE9&quot; &quot;PING&quot; &quot;PING&quot;
localhost.59313 &amp;gt; localhost.6379: Flags [P.] &quot;REPLCONF&quot; &quot;ACK&quot; &quot;519&quot;
localhost.59313 &amp;gt; localhost.6379: Flags [P.] &quot;REPLCONF&quot; &quot;ACK&quot; &quot;519&quot;
localhost.6379 &amp;gt; localhost.59313: Flags [P.] &quot;PING&quot;
localhost.59313 &amp;gt; localhost.6379: Flags [P.]: &quot;REPLCONF&quot; &quot;ACK&quot; &quot;533&quot;
localhost.59313 &amp;gt; localhost.6379: Flags [P.]: &quot;REPLCONF&quot; &quot;ACK&quot; &quot;533&quot;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ•´ä¸ªè¿‡ç¨‹å¯ä»¥åˆ†ä¸º &lt;code&gt;Full-ReSync&lt;/code&gt;, &lt;code&gt;Command-Propagate&lt;/code&gt;, &lt;code&gt;Partical-ReSync&lt;/code&gt; æ€»å…± 3 é˜¶æ®µï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-text&quot;&gt;             +----------------------+                +---------------------+
             | redisServer (master) |                | redisServer (slave) |
             |    localhost:6379    |                |    localhost:6380   |
             +----------------------+                +---------------------+ 
             |        slaves        |                |        master       | 
             +----------------------+                +---------------------+ 
                        |                                       |
                 +----------------+                      +-------------+
                 | redisClient[?] |                      | redisClient |  
                 +----------------+                      +-------------+
                                                                |
       ^                &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt; PING &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;                
       |                |                                               Step 1 : æ£€æŸ¥å¥—æ¥å­—ä¸ master çŠ¶æ€
       |                &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; PONG / NOAUTH &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;                
       |                                                        |                
       |                &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt; AUTH &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;                
       |                |                                               Step 2 : èº«ä»½éªŒè¯
       |                &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; OK &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;                
       |                                                        |                
       |                &amp;lt;&amp;lt;&amp;lt;&amp;lt; REPLCONF listening-port [port] &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;                
       |                |                                               Step 3 : å‘é€ slave ç«¯å£ 
   Full-ReSync          &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; OK &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;           
       |                                                        |                
       |                &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt; REPLCONF capa [eof|psync2] &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;                
       |                |                                               Step 4 : æ£€æŸ¥å‘½ä»¤å…¼å®¹æ€§
       |                &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; OK &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;                
       |                                                        |                
       |                &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt; PSYNC ? -1 &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;                
       |                |                                                        
       |                &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; FULLRESYNC [replid] [offset] &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;       Step 6 : æ‰§è¡Œå…¨é‡åŒæ­¥
       |                V                                                        
       |              BGSAVE                                                     
       |                V                                                        
       v                &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; RDB Snapshot &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;                


       ^                &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt; REPLCONF ACK [offset] &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;               
       |                &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; COMMAND 1 &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;                
       |                &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; COMMAND 2 &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;                
       |                &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt; REPLCONF ACK [offset+?] &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;       å¿ƒè·³æ£€æµ‹ &amp;amp; å‘½ä»¤ä¼ æ’­         
Command-Propagate       &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; PING &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;          
       |                &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; COMMAND 3 &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;                
       |                &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt; REPLCONF ACK [offset+?] &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;                
       |                &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt; REPLCONF ACK [offset+?] &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;                
       v                &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; PING &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;                


       ^                =========================================                
       |                ====== The Same With Full-ReSync ========                
       |                =========================================                
       |                                                        |                
  Partical-ReSync       &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt; PSYNC [replid] [offset] &amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;       é‡è¿åæ‰§è¡Œéƒ¨åˆ†åŒæ­¥
       |                |                                                        
       |                &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; CONTINUE &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;                
       |                &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; COMMAND N &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;                
       v                &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; COMMAND ... &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;                
&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;æœ€åˆ Redis ç”¨äºåŒæ­¥çš„å‘½ä»¤æ˜¯&lt;code&gt;SYNC&lt;/code&gt;ï¼Œæ¯æ¬¡é‡è¿æ‰§è¡Œè¯¥å‘½ä»¤æ—¶éƒ½ä¼šç”Ÿæˆã€ä¼ è¾“ã€åŠ è½½æ•´ä¸ªå®Œæ•´çš„ RDB å¿«ç…§ï¼Œä¸¥é‡å ç”¨æœºå™¨èµ„æºä¸ç½‘ç»œå¸¦å®½ã€‚ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œåç»­ç‰ˆæœ¬çš„ Redis è¿½åŠ äº†&lt;code&gt;PSYNC&lt;/code&gt;å‘½ä»¤ï¼Œè¯¥å‘½ä»¤æ”¯æŒä»¥ä¸‹ä¸¤ç§åŒæ­¥æ¨¡å¼ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;å…¨é‡é‡æ–°åŒæ­¥&lt;code&gt;Full-ReSync&lt;/code&gt;&lt;/strong&gt;
&lt;ul&gt;&lt;li&gt;slave é¦–æ¬¡è¿æ¥ master&lt;/li&gt;
&lt;li&gt;master ä¸ slave ä¹‹é—´çš„çŠ¶æ€å·®å¼‚è¿‡å¤§&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éƒ¨åˆ†é‡æ–°åŒæ­¥&lt;code&gt;Partical-ReSync&lt;/code&gt;&lt;/strong&gt;
&lt;ul&gt;&lt;li&gt;ç½‘ç»œæŠ–åŠ¨å¯¼è‡´åŒæ­¥è¿æ¥æ–­å¼€é‡è¿&lt;/li&gt;
&lt;li&gt;sentinel æœºåˆ¶å¯¼è‡´ master èŠ‚ç‚¹å‘ç”Ÿå˜æ›´&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;æ•°æ®ç»“æ„&quot;&gt;æ•°æ®ç»“æ„&lt;/h2&gt;
&lt;p&gt;ä¸‹é¢çœ‹çœ‹ redisServer ä¸­ä¸&lt;code&gt;PSYNC&lt;/code&gt;ç›¸å…³çš„æ•°æ®ç»“æ„ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c&quot;&gt;struct redisServer {
    /*
     *  èŠ‚ç‚¹ID ä¸ å¤åˆ¶åç§»é‡
     *
     *     è‹¥å½“å‰èŠ‚ç‚¹æ˜¯ master
     *     server.replid å°±æ˜¯ server.runid
     *
     *     è‹¥å½“å‰èŠ‚ç‚¹åŸæœ¬æ˜¯ masterï¼Œè½¬åŒ–ä¸º slave èŠ‚ç‚¹å
     *     server.replid ä¸ server.master_repl_offset ä¼šè¢«æ–° master çš„åŒæ­¥ä¿¡æ¯è¦†ç›–
     *
     *     è‹¥å½“å‰èŠ‚ç‚¹åŸæœ¬æ˜¯ slaveï¼Œè¢«æå‡ä¸º master èŠ‚ç‚¹å
     *     rserver.eplid2 ä¸ server.second_replid_offset ä¼šè®°å½•å½“å‰èŠ‚ç‚¹ä½œä¸º slave æ—¶çš„åŒæ­¥ä¿¡æ¯
     */
    char runid[CONFIG_RUN_ID_SIZE+1];   /* å½“å‰èŠ‚ç‚¹çš„è¿è¡Œæ—¶IDï¼ˆæ¯æ¬¡é‡å¯éƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼‰ */
    char replid[CONFIG_RUN_ID_SIZE+1];  /* å½“å‰ master èŠ‚ç‚¹çš„ runid */
    char replid2[CONFIG_RUN_ID_SIZE+1]; /* å½“å‰ master èŠ‚ç‚¹ä½œä¸º slave èŠ‚ç‚¹æ—¶è¿æ¥çš„ master çš„ runid */
    long long master_repl_offset;   /* å½“å‰ master èŠ‚ç‚¹çš„å¤åˆ¶åç§»é‡ */
    long long second_replid_offset; /* å½“å‰ master èŠ‚ç‚¹ä½œä¸º slave èŠ‚ç‚¹æ—¶çš„åŒæ­¥åç§»é‡ */

    /*
     * å¤åˆ¶ç§¯å‹ç¼“å†²
     *
     *     master åªç»´æŠ¤ä¸€ä¸ªå…¨å±€çš„ server.repl_backlogï¼Œç”±æ‰€æœ‰ slave èŠ‚ç‚¹å…±äº« 
     *     ä¸ºäº†å‡å°‘å†…å­˜å ç”¨ï¼Œserver.repl_backlog ä»…åœ¨ slave èŠ‚ç‚¹å­˜åœ¨æ—¶æŒ‰éœ€åˆ›å»º
     */
    char *repl_backlog;             /* å¤åˆ¶ç§¯å‹ç¼“å†²ï¼ˆç¯å½¢ç¼“å†²ï¼‰*/
    long long repl_backlog_size;    /* ç§¯å‹ç¼“å†²å¤§å° */
    long long repl_backlog_histlen; /* ç§¯å‹æ•°æ®é•¿åº¦ */
    long long repl_backlog_idx;     /* ç§¯å‹ç¼“å†²å°¾éƒ¨ï¼ˆå¯å†™ä½ç½®ï¼‰*/
    long long repl_backlog_off;     /* ç§¯å‹ç¼“å†²é¦–å­—èŠ‚å¯¹åº”çš„åŒæ­¥åç§»é‡ï¼ˆmaster offsetï¼‰*/
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;è¿è¡Œid&quot;&gt;&lt;strong&gt;è¿è¡ŒID&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ã€€æ— è®ºä¸»ä»ï¼Œæ¯ä¸ª Redis æœåŠ¡å™¨ä¼šåœ¨å¯åŠ¨æ—¶ç”Ÿæˆä¸€ä¸ªé•¿åº¦ä¸º 40 çš„åå…­è¿›åˆ¶å­—ç¬¦ä¸²ä½œä¸ºè¿è¡ŒID&lt;code&gt;runid&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å½“ slave é¦–æ¬¡è¯·æ±‚åŒæ­¥æ—¶ï¼Œä¼šå°† master è¿”å›çš„&lt;code&gt;server.runid&lt;/code&gt;ä¿å­˜è‡³&lt;code&gt;server.replid&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å½“ slave é‡æ–°è¯·æ±‚åŒæ­¥æ—¶ï¼Œä¼šå°†ä¹‹å‰ä¿å­˜çš„&lt;code&gt;server.replid&lt;/code&gt;å‘é€ç»™ masterï¼š
&lt;ul&gt;&lt;li&gt;å¦‚æœè¯¥ ID ä¸å½“å‰ master çš„&lt;code&gt;server.runid&lt;/code&gt;ä¸ä¸€è‡´ï¼Œåˆ™å¿…é¡»æ‰§è¡Œä¸€æ¬¡å…¨é‡é‡æ–°åŒæ­¥&lt;/li&gt;
&lt;li&gt;å¦‚æœè¯¥ ID ä¸å½“å‰ master çš„&lt;code&gt;server.runid&lt;/code&gt;ä¸€è‡´ï¼Œåˆ™å¯ä»¥å°è¯•æ‰§è¡Œéƒ¨åˆ†åŒæ­¥æ“ä½œ&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h4 id=&quot;å¤åˆ¶åç§»é‡&quot;&gt;&lt;strong&gt;å¤åˆ¶åç§»é‡&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ã€€ä¸»ä»åŒæ–¹éƒ½ä¼šç»´æŠ¤ä¸€ä¸ªå•ä½ä¸ºå­—èŠ‚çš„å¤åˆ¶åç§»é‡&lt;code&gt;offset&lt;/code&gt;ï¼Œé€šè¿‡è¯¥åç§»é‡å¯ä»¥åˆ¤æ–­ä¸»ä»é—´çš„çŠ¶æ€æ˜¯å¦ä¸€è‡´ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;master å‘ slave ä¼ æ’­ N å­—èŠ‚æ•°æ®åï¼Œä¼šå°†è‡ªå·±çš„å¤åˆ¶åç§»é‡å¢åŠ  N&lt;/li&gt;
&lt;li&gt;slave æ¥æ”¶åˆ° master ä¼ æ¥çš„ N ä¸ªå­—èŠ‚æ•°æ®æ—¶ï¼Œä¼šå°†è‡ªå·±çš„å¤åˆ¶åç§»é‡å¢åŠ  N&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ã€€å½“ master æ¥æ”¶åˆ° &lt;code&gt;REPLCONF ACK&lt;/code&gt; ä¸­çš„åç§»é‡æ—¶ï¼Œå¯ä»¥æ®æ­¤åˆ¤æ–­å‘é€ç»™ slave çš„æ•°æ®æ˜¯å¦å‘ç”Ÿäº†ä¸¢å¤±ï¼Œå¹¶é‡å‘ä¸¢å¤±çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;h4 id=&quot;ç§¯å‹ç¼“å†²&quot;&gt;&lt;strong&gt;ç§¯å‹ç¼“å†²&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ã€€master ç«¯ç»´æŠ¤äº†ä¸€ä¸ªå®šé•¿çš„ç§¯å‹ç¼“å†²é˜Ÿåˆ—&lt;code&gt;backlog&lt;/code&gt;ã€‚&lt;br/&gt;ã€€master å‘ slave ä¼ æ’­å‘½ä»¤æ—¶ä¼šåŒæ—¶å°†å‘½ä»¤æ”¾å…¥è¯¥é˜Ÿåˆ—ï¼Œå› æ­¤ç¼“å†²åŒºé‡Œä¼šä¿ç•™ä¸€éƒ¨åˆ†æœ€æ–°çš„å‘½ä»¤ã€‚&lt;br/&gt;ã€€slave å‘å‡ºåŒæ­¥è¯·æ±‚æ—¶ï¼Œå¦‚æœ slave çš„åç§»é‡ä¹‹å &lt;strong&gt;(offset+1)&lt;/strong&gt; çš„æ•°æ®å­˜åœ¨äºç§¯å‹ç¼“å†²ï¼Œmaster æ‰ä¼šæ‰§è¡Œéƒ¨åˆ†åŒæ­¥ã€‚&lt;/p&gt;

&lt;h2 id=&quot;slave-è§†è§’&quot;&gt;SLAVE è§†è§’&lt;/h2&gt;
&lt;p&gt;slave æ¥æ”¶åˆ°&lt;code&gt;SLAVEOF&lt;/code&gt;å‘½ä»¤åï¼Œä¼šè°ƒç”¨&lt;code&gt;replicaofCommand&lt;/code&gt;å¼€å§‹æ‰§è¡Œä¸»ä»åŒæ­¥ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c&quot;&gt;void replicaofCommand(client *c) {
    // ...

    if (!strcasecmp(c-&amp;gt;argv[1]-&amp;gt;ptr,&quot;no&quot;) &amp;amp;&amp;amp;
        !strcasecmp(c-&amp;gt;argv[2]-&amp;gt;ptr,&quot;one&quot;)) {
        if (server.masterhost) { // å¦‚æœæ¥æ”¶åˆ°çš„å‘½ä»¤æ˜¯ SLAVE NO ONE åˆ™æ–­å¼€ä¸»ä»åŒæ­¥
            // ...
        }
    } else { 
        if (c-&amp;gt;flags &amp;amp; CLIENT_SLAVE) {
            return; // å¦‚æœå·²ç»æ˜¯å®¢æˆ·ç«¯æ˜¯ä¸€ä¸ª slave èŠ‚ç‚¹ï¼Œåˆ™æ‹’ç»è¯¥å‘½ä»¤
        }

        if (server.masterhost &amp;amp;&amp;amp; !strcasecmp(server.masterhost,c-&amp;gt;argv[1]-&amp;gt;ptr) &amp;amp;&amp;amp; server.masterport == port) {
            return; // å¦‚æœå·²ç»è¿æ¥ä¸Š SLAVEOF ä¸­æŒ‡å®šçš„ master èŠ‚ç‚¹ï¼Œåˆ™ç›´æ¥è¿”å›
        }

        // å¦‚æœå°šæœªè¿æ¥ä»»æ„ master èŠ‚ç‚¹ï¼Œåˆ™æ ¹æ® masterhost ä¸ masterport å»ºç«‹ TCP è¿æ¥
        // å¹¶æ³¨å†Œç›‘å¬å‡½æ•° syncWithMaster
    }
}

void syncWithMaster(connection *conn) {
    // å‘ master èŠ‚ç‚¹å‘é€ PING å‘½ä»¤
    if (server.repl_state == REPL_STATE_CONNECTING) {
        server.repl_state = REPL_STATE_RECEIVE_PONG;
        err = sendSynchronousCommand(SYNC_CMD_WRITE,conn,&quot;PING&quot;,NULL); // å‘é€ PING å‘½ä»¤
        // ...
    }

    // ç›‘å¬åˆ° master å¯¹ PING å‘½ä»¤çš„å“åº”
    if (server.repl_state == REPL_STATE_RECEIVE_PONG) {
        if (err[0] != '+' &amp;amp;&amp;amp;
            strncmp(err,&quot;-NOAUTH&quot;,7) != 0 &amp;amp;&amp;amp;
            strncmp(err,&quot;-NOPERM&quot;,7) != 0 &amp;amp;&amp;amp;
            strncmp(err,&quot;-ERR operation not permitted&quot;,28) != 0)
        {
            goto error;
        }
        server.repl_state = REPL_STATE_SEND_AUTH; // åªå¤„ç† master å“åº”å€¼ä¸º PONGã€NOAUTHã€NOPERM çš„æƒ…å†µ
    }

    // æ ¹æ® master å¯¹ PING çš„å“åº”å€¼ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦æˆæƒ
    if (server.repl_state == REPL_STATE_SEND_AUTH) {
        if (server.masteruser &amp;amp;&amp;amp; server.masterauth) {
            err = sendSynchronousCommand(SYNC_CMD_WRITE,conn,&quot;AUTH&quot;,
                                         server.masteruser,server.masterauth,NULL); // å‘é€ AUTH å‘½ä»¤
            // ...
            server.repl_state = REPL_STATE_RECEIVE_AUTH;
        } else {
            // å¦‚æœæ²¡æœ‰è®¾ç½® server.masteruser ä¸ server.masterauth æˆæƒä¿¡æ¯ï¼Œåˆ™è·³è¿‡ AUTH
            server.repl_state = REPL_STATE_SEND_PORT;
        }
    }

    // æ­¤å¤„ç•¥è¿‡ä»¥ä¸‹æ­¥éª¤ï¼š
    // ä½¿ç”¨ REPLCONF listening-port å‘½ä»¤å°† slave çš„ç«¯å£å‘ŠçŸ¥ master
    // ä½¿ç”¨ REPLCONF ip-address å‘½ä»¤å°† slave çš„ IP å‘ŠçŸ¥ master
    // ä½¿ç”¨ REPLCONF capa eof / capa psync2 å‘½ä»¤å°† slave å…¼å®¹æ€§ï¼ˆæ”¯æŒçš„ç‰¹æ€§ï¼‰å‘ŠçŸ¥ master

     // å¼€å§‹å‘é€ PSYNC å‘½ä»¤
    if (server.repl_state == REPL_STATE_SEND_PSYNC) {
        if (slaveTryPartialResynchronization(conn,0) == PSYNC_WRITE_ERROR) {
            goto write_error;
        }
        server.repl_state = REPL_STATE_RECEIVE_PSYNC;
        return;
    }

    // è¯»å– PSYNC å‘½ä»¤çš„å“åº”
    psync_result = slaveTryPartialResynchronization(conn,1);

    // å¦‚æœç›‘å¬åˆ° CONTINUE å“åº”ï¼Œè·³è¿‡å…¨é‡åŒæ­¥
    if (psync_result == PSYNC_CONTINUE) return;

    // å¦‚æœè¿”å›å€¼ä¸º PSYNC_FULLRESYNC æˆ– PSYNC_NOT_SUPPORTED
    // å¼€å§‹æ‰§è¡Œæ‰§è¡Œå…¨é‡åŒæ­¥ï¼Œæ³¨å†Œ readSyncBulkPayload ç›‘å¬ RDB æ–‡ä»¶ä¸‹è½½
    if (connSetReadHandler(conn, readSyncBulkPayload) == C_ERR) {
        // ...
        goto error;
    }

    server.repl_state = REPL_STATE_TRANSFER;

    // ...
}

int slaveTryPartialResynchronization(connection *conn, int read_reply) {
    if (!read_reply) {
        if (server.cached_master) { // server.cached_master ä¸­å­˜åœ¨è®°å½•ï¼Œå°è¯•æ‰§è¡Œéƒ¨åˆ†åŒæ­¥
            psync_replid = server.cached_master-&amp;gt;replid;
        } else {
            psync_replid = &quot;?&quot;; // server.cached_master ä¸­ä¸å­˜åœ¨è®°å½•ï¼Œåªèƒ½æ‰§è¡Œå…¨é‡åŒæ­¥
        }
        // å‘èµ· PSYNC å‘½ä»¤
        reply = sendSynchronousCommand(SYNC_CMD_WRITE,conn,&quot;PSYNC&quot;,psync_replid,psync_offset,NULL);
        // ...
        return PSYNC_WAIT_REPLY;
    }

    reply = sendSynchronousCommand(SYNC_CMD_READ,conn,NULL); // è¯»å– PSYNC å“åº”

    // å¦‚æœ master å“åº” FULLRESYNC åˆ™ç›´æ¥è¿›è¡Œå…¨é‡åŒæ­¥
    if (!strncmp(reply,&quot;+FULLRESYNC&quot;,11)) {
        // ...
        return PSYNC_FULLRESYNC;
    }

    // å¦‚æœ master å“åº” CONTINUE åˆ™å°è¯•æ‰§è¡Œéƒ¨åˆ†åŒæ­¥
    if (!strncmp(reply,&quot;+CONTINUE&quot;,9)) {
        // ...
        return PSYNC_CONTINUE;
    }

    // master æš‚æ—¶æ— æ³•å¤„ç† PSYNC å‘½ä»¤ â€”&amp;gt; PSYNC_TRY_LATER
    // master ä¸æ”¯æŒ PSYNC å‘½ä»¤ -&amp;gt; PSYNC_NOT_SUPPORTED
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;master-è§†è§’&quot;&gt;MASTER è§†è§’&lt;/h2&gt;
&lt;p&gt;master æ¥æ”¶åˆ°&lt;code&gt;PSYNC&lt;/code&gt;å‘½ä»¤åï¼Œä¼šè°ƒç”¨&lt;code&gt;syncCommand&lt;/code&gt;å¼€å¯åŒæ­¥æµç¨‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c&quot;&gt;void syncCommand(client *c) {
    // æ¥æ”¶åˆ° slave å‘é€çš„ PSYNC å‘½ä»¤
    if (!strcasecmp(c-&amp;gt;argv[0]-&amp;gt;ptr,&quot;psync&quot;)) {
        if (masterTryPartialResynchronization(c) == C_OK) {
            return; // æ— éœ€å…¨é‡åŒæ­¥ï¼Œç›´æ¥è¿”å›
        }
    }

    // è‹¥ä»£ç è¿è¡Œè‡³æ­¤å¤„ï¼Œæ„å‘³ç€éƒ¨åˆ†åŒæ­¥å¤±è´¥ï¼Œéœ€è¦æ‰§è¡Œå…¨é‡åŒæ­¥
    // master ä¼šæ‰§è¡Œ BGSAVE å‘½ä»¤ç”Ÿæˆå¿«ç…§å¹¶ä¼ è¾“ç»™ slave
    // åŒæ­¥ RDB å¿«ç…§çš„æ–¹å¼æœ‰ä¸¤ç§ï¼š
    //     åŸºäºç£ç›˜(Disk-backed)ï¼šåœ¨ç£ç›˜ç”Ÿæˆ RDB å¿«ç…§æ–‡ä»¶ï¼Œç„¶åå†ä¼ è¾“ç»™ slave
    //     æ— ç›˜(Diskless)ï¼šç›´æ¥å°† RDB å¿«ç…§æ•°æ®å†™å…¥ slave socket

}

int masterTryPartialResynchronization(client *c) {
    long long psync_offset; // è¯¥ slave æœ€æ–°çš„åŒæ­¥åç§»é‡
    char *master_replid;    // slave åŒæ­¥åç§»é‡å¯¹åº”çš„ master çš„ runid

    /*
     *  ä»¥ä¸‹æƒ…å†µå¯ä»¥é¿å…å…¨é‡åŒæ­¥ï¼š
     *  1. slave æœ€è¿‘ä¸€æ¬¡åŒæ­¥çš„ master æ˜¯å½“å‰å®ä¾‹ï¼ˆç½‘ç»œæŠ–åŠ¨ï¼‰
     *  2. slave ä¸å½“å‰èŠ‚ç‚¹åŸæœ¬æ˜¯åŒä¸ª master çš„ä»èŠ‚ç‚¹ï¼Œä¸”å½“å‰èŠ‚ç‚¹çš„åŒæ­¥åç§»é‡ second_replid_offset è¾ƒå¤§ï¼ˆç»´æŠ¤é‡å¯ã€æ•…éšœåˆ‡æ¢ï¼‰*/

    if (strcasecmp(master_replid, server.replid) &amp;amp;&amp;amp;
       (strcasecmp(master_replid, server.replid2) ||psync_offset &amp;gt; server.second_replid_offset))
    {
        goto need_full_resync; // ä¸æ»¡è¶³ PSYNC æ¡ä»¶ï¼Œéœ€è¦æ‰§è¡Œå…¨é‡åŒæ­¥
    }

    /*
     *  ä»¥ä¸‹æƒ…å†µåªèƒ½æ‰§è¡Œå…¨é‡åŒæ­¥ï¼š
     *  1. master æ²¡æœ‰åˆå§‹åŒ–ç§¯å‹ç¼“å†² 
     *  2. slave çš„åŒæ­¥åç§»é‡è½åäºç§¯å‹ç¼“å†² */
    if (!server.repl_backlog || 
        psync_offset &amp;lt; server.repl_backlog_off ||
        psync_offset &amp;gt; (server.repl_backlog_off + server.repl_backlog_histlen))
    {
        goto need_full_resync; // è¿›è¡Œå…¨é‡åŒæ­¥
    }

    // è‹¥ä»£ç è¿è¡Œè‡³æ­¤å¤„ï¼Œæ„å‘³ç€å¯ä»¥æ‰§è¡Œéƒ¨åˆ†åŒæ­¥
    listAddNodeTail(server.slaves,c);

    // æ ¹æ®å®¢æˆ·ç«¯æ˜¯å¦å…¼å®¹ PSYNC2ï¼Œè¿”å›ä¸åŒçš„ CONTINUE å“åº”
    if (c-&amp;gt;slave_capa &amp;amp; SLAVE_CAPA_PSYNC2) {
        buflen = snprintf(buf,sizeof(buf),&quot;+CONTINUE %s\r\n&quot;, server.replid);
    } else {
        buflen = snprintf(buf,sizeof(buf),&quot;+CONTINUE\r\n&quot;);
    }

    // CONTINUE å‘½ä»¤åé¢ï¼Œç´§æ¥ç€å°±æ˜¯ server.repl_backlog çš„å†…å®¹
    psync_len = addReplyReplicationBacklog(c,psync_offset);

    // ...

}
&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;Redis æ¯ç§’ä¼šæ‰§è¡Œä¸€æ¬¡å®šæ—¶ä»»åŠ¡&lt;code&gt;replicationCron&lt;/code&gt;ï¼Œå…¶ä¸­å°±åŒ…å«ä¸»ä»åŒæ­¥é—´çš„å¿ƒè·³ï¼Œå¯ä»¥å‘ç°ä¸»ä»åŒæ–¹çš„å¿ƒè·³é¢‘ç‡æ˜¯ä¸ä¸€è‡´çš„ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c&quot;&gt;void replicationCron(void) {

    // slave å®šæ—¶å‘ master å‘é€ REPLCONF ACK å‘½ä»¤
    if (server.masterhost &amp;amp;&amp;amp; server.master &amp;amp;&amp;amp;
        !(server.master-&amp;gt;flags &amp;amp; CLIENT_PRE_PSYNC)) {
        addReplyArrayLen(c,3);
        addReplyBulkCString(c,&quot;REPLCONF&quot;);
        addReplyBulkCString(c,&quot;ACK&quot;);
        addReplyBulkLongLong(c,c-&amp;gt;reploff);
    }

    // master å®šæ—¶å‘ slave å‘é€ PING å‘½ä»¤
    if ((replication_cron_loops % server.repl_ping_slave_period) == 0 &amp;amp;&amp;amp;
        listLength(server.slaves))
    {
        robj *ping_argv[1];
        ping_argv[0] = createStringObject(&quot;PING&quot;,4);
        replicationFeedSlaves(server.slaves, server.slaveseldb, ping_argv, 1);
        decrRefCount(ping_argv[0]);
    }
}

&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;master åœ¨è°ƒç”¨&lt;code&gt;call&lt;/code&gt;å‡½æ•°æ‰§è¡Œå®¢æˆ·ç«¯ä¼ è¿‡æ¥çš„å‘½ä»¤æ—¶ï¼Œä¼šå°†å‘½ä»¤ä¼ æ’­ç»™ slave å¹¶åŒæ—¶å†™å…¥ç§¯å‹ç¼“å†²ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c&quot;&gt;void call(client *c, int flags) {
    // ...
    if (flags &amp;amp; CMD_CALL_PROPAGATE &amp;amp;&amp;amp; (c-&amp;gt;flags &amp;amp; CLIENT_PREVENT_PROP) != CLIENT_PREVENT_PROP)
    {
        // å½“å‰å‘½ä»¤æ˜¯å¦éœ€è¦ä¼ æ’­
        if (propagate_flags != PROPAGATE_NONE &amp;amp;&amp;amp; !(c-&amp;gt;cmd-&amp;gt;flags &amp;amp; CMD_MODULE))
            propagate(c-&amp;gt;cmd,c-&amp;gt;db-&amp;gt;id,c-&amp;gt;argv,c-&amp;gt;argc,propagate_flags);
    }
}

void propagate(struct redisCommand *cmd, int dbid, robj **argv, int argc,
               int flags)
{
    // ...
    if (flags &amp;amp; PROPAGATE_REPL)
        replicationFeedSlaves(server.slaves,dbid,argv,argc);
}

void replicationFeedSlaves(list *slaves, int dictid, robj **argv, int argc) {

    // å¦‚æœå½“å‰èŠ‚ç‚¹æ²¡æœ‰ slave èŠ‚ç‚¹æˆ–å¤åˆ¶ç§¯å‹ç¼“å†²ï¼Œç«‹å³è¿”å›
    if (server.repl_backlog == NULL &amp;amp;&amp;amp; listLength(slaves) == 0) return;

    // å‘ repl_backlog ä¸­æ‰¹é‡å†™å…¥å‘½ä»¤
    if (server.repl_backlog) {
        char aux[LONG_STR_SIZE+3]; // å‘½ä»¤ç¼“å†²ï¼Œç”¨äºåºåˆ—åŒ– redis å‘½ä»¤

        /* å†™å…¥å½“å‰æ‰¹æ¬¡çš„å‘½ä»¤æ•°é‡ */
        aux[0] = '*';
        len = ll2string(aux+1,sizeof(aux)-1,argc);
        aux[len+1] = '\r';
        aux[len+2] = '\n';
        feedReplicationBacklog(aux,len+3);

        /* é€ä¸ªéå†å‘½ä»¤ï¼Œå°†å…¶åºåˆ—åŒ–åå†™å…¥ repl_backlog */
        for (j = 0; j &amp;lt; argc; j++) {
            long objlen = stringObjectLen(argv[j]);
            
            aux[0] = '$';
            len = ll2string(aux+1,sizeof(aux)-1,objlen);
            aux[len+1] = '\r';
            aux[len+2] = '\n';
            feedReplicationBacklog(aux,len+3);
            feedReplicationBacklogWithObject(argv[j]);
            feedReplicationBacklog(aux+len+1,2);
        }
    }

    // å°†å‘½ä»¤æ‰¹é‡ä¼ æ’­ç»™æ‰€æœ‰ slaves å¯¹åº”çš„ client
    listRewind(slaves,&amp;amp;li);
    while((ln = listNext(&amp;amp;li))) {
        client *slave = ln-&amp;gt;value;

        /* å†™å…¥å½“å‰æ‰¹æ¬¡çš„å‘½ä»¤æ•°é‡ */
        addReplyArrayLen(slave,argc);

        /* é€ä¸ªéå†å‘½ä»¤ï¼Œå°†ä¼ æ’­ç»™ slave èŠ‚ç‚¹ */
        for (j = 0; j &amp;lt; argc; j++)
            addReplyBulk(slave,argv[j]);
    }
}
&lt;/code&gt;
&lt;/pre&gt;

&lt;h3 id=&quot;slave-serve-stale-data&quot;&gt;slave-serve-stale-data&lt;/h3&gt;
&lt;p&gt;ã€€ä¸»ä»èŠ‚ç‚¹æ–­å¼€æ—¶æˆ–åŒæ­¥æœªå®Œæˆæ—¶ï¼Œslave å¦‚ä½•å“åº”å®¢æˆ·ç«¯è¯·æ±‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;yes&lt;/strong&gt;ï¼šæ­£å¸¸å“åº”å‘½ä»¤ï¼Œä½†æ˜¯ä¸ä¿è¯æ•°æ®è´¨é‡&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;no&lt;/strong&gt;ï¼šæ‹’ç»å“åº”å‘½ä»¤ï¼Œè¿”å› &lt;strong&gt;SYNC with master in progress&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;repl-diskless-sync&quot;&gt;repl-diskless-sync&lt;/h3&gt;
&lt;p&gt;ã€€æ‰§è¡Œå…¨é‡åŒæ­¥æ—¶ï¼Œmaster å¦‚ä½•å°† RDB å¿«ç…§ä¼ è¾“ç»™ slave&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;no&lt;/strong&gt;ï¼šå…ˆåœ¨ç£ç›˜ç”Ÿæˆ RDB æ–‡ä»¶å†è¿›è¡Œä¼ è¾“ï¼ˆä½å¸¦å®½ç½‘ç»œï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;yes&lt;/strong&gt;ï¼šç›´æ¥å°† RDB å¿«ç…§å†™å…¥ slave çš„ socketï¼ˆä½é€Ÿç£ç›˜ + é«˜å¸¦å®½ç½‘ç»œï¼‰&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;repl-ping-slave-period&quot;&gt;repl-ping-slave-period&lt;/h3&gt;
&lt;p&gt;ã€€master å‘ slave å‘é€ &lt;code&gt;PING&lt;/code&gt; å¿ƒè·³çš„é—´éš”ï¼Œé»˜è®¤ 10s å‘é€ä¸€æ¬¡&lt;/p&gt;
&lt;h3 id=&quot;repl-backlog-size&quot;&gt;repl-backlog-size&lt;/h3&gt;
&lt;p&gt;ã€€åŒæ­¥ç§¯å‹ç¼“å†²çš„ç©ºé—´ï¼Œé»˜è®¤å€¼å¤§å°ä¸º 1mbã€‚&lt;br/&gt;ã€€ç”±äºä¸»ä»è¿æ¥æ–­å¼€åï¼Œæ‰€æœ‰çš„å‘½ä»¤éƒ½ä¼šç§¯å‹åœ¨è¿™é‡Œï¼Œå¦‚æœè¯¥å€¼å¤ªå°ä¼šå¯¼è‡´ &lt;code&gt;PSYNC&lt;/code&gt; å‘½ä»¤ä¼šæ— æ³•æ‰§è¡Œéƒ¨åˆ†åŒæ­¥ã€‚&lt;br/&gt;ã€€å¦‚æœ master éœ€è¦æ‰§è¡Œå¤§é‡å†™å‘½ä»¤ï¼Œæˆ–è€… slave éœ€è¦è¾ƒé•¿æ—¶é—´æ‰èƒ½é‡è¿æˆåŠŸï¼Œåˆ™éœ€è¦æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œä¼°ç®—ã€‚&lt;/p&gt;
&lt;h3 id=&quot;min-slaves-to-write--min-slaves-max-lag&quot;&gt;min-slaves-to-write &amp;amp; min-slaves-max-lag&lt;/h3&gt;
&lt;p&gt;ã€€åˆ™å½“ä¸æ»¡è¶³ä¸‹åˆ—æ¡ä»¶æ—¶ï¼Œmaster ä¼šæ‹’ç»å†™å‘½ä»¤ç›´è‡³æ¢å¤ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;è¿æ¥å½“å‰ master çš„ slave æ•°é‡å¤§äºç­‰äº &lt;strong&gt;min-slaves-to-write&lt;/strong&gt; ä¸ªèŠ‚ç‚¹è¿æ¥æ­£å¸¸&lt;/li&gt;
&lt;li&gt;è¿æ¥æ­£å¸¸çš„ slave èŠ‚ç‚¹ä¸­ä¸å°‘äº &lt;strong&gt;min-slaves-to-write&lt;/strong&gt; ä¸ªèŠ‚ç‚¹çš„å»¶è¿Ÿæ—¶é—´å°äº *&lt;strong&gt;min-slaves-max-lag&lt;/strong&gt; ç§’&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ã€€å¯ç”¨è¿™ä¸¤ä¸ªé€‰é¡¹åï¼Œå†™å‘½ä»¤å¤§æ¦‚ç‡èƒ½å¤Ÿè¢«å¤åˆ¶åˆ° &lt;strong&gt;min-slaves-to-write&lt;/strong&gt; ä¸ªä»èŠ‚ç‚¹ä¸­ï¼Œå‡å°‘äº†å‘½ä»¤ä¸¢å¤±çš„æ¦‚ç‡ã€‚&lt;/p&gt;&lt;p&gt;è‡³æ­¤ï¼Œå¯¹ redis çš„ä¸»ä»åŒæ­¥åˆ†æå®Œæ¯•ï¼Œåç»­å°†å¯¹ redis çš„ä¸€äº›å…¶ä»–ç»†èŠ‚è¿›è¡Œåˆ†äº«ï¼Œæ„Ÿè°¢è§‚çœ‹ã€‚&lt;/p&gt;
</description>
<pubDate>Thu, 11 Feb 2021 17:33:00 +0000</pubDate>
<dc:creator>buttercup</dc:creator>
<og:description>ä¸ºäº†ä¿è¯æœåŠ¡çš„å¯ç”¨æ€§ï¼Œç°ä»£æ•°æ®åº“éƒ½æä¾›äº†å¤åˆ¶åŠŸèƒ½ï¼ŒåŒæ—¶åœ¨å¤šä¸ªè¿›ç¨‹ä¸­ç»´æŠ¤ä¸€è‡´çš„æ•°æ®çŠ¶æ€ã€‚ Redis æ”¯æŒä¸€ä¸»å¤šä»çš„å¤åˆ¶æ¶æ„ï¼Œè¯¥åŠŸèƒ½è¢«ç®€åŒ–æˆäº†ä¸€æ¡ SLAVEOF å‘½ä»¤ï¼Œä¸‹é¢é€šè¿‡æ¡å‘½ä»¤æ¥è§£æ Redis</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/buttercup/p/14017314.html</dc:identifier>
</item>
<item>
<title>æµ…è°ˆæµè§ˆå™¨å®æ—¶æ„å»º - æ ¼å­ç†Š</title>
<link>http://www.cnblogs.com/karthuslorin/p/14398400.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/karthuslorin/p/14398400.html</guid>
<description>&lt;h3 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h3&gt;
&lt;p&gt;åœ¨é¥è¿œçš„å‡ ä¸ªæœˆå‰ï¼Œè¿˜åœ¨ä¸Šå®¶å…¬å¸çš„æ—¶å€™ï¼Œè€æ¿çªå‘å¥‡æƒ³ï¼Œæƒ³è¦æä¸ªä»£ç ç‰‡æ®µå¹³å°ï¼Œç±»ä¼¼äº &lt;a href=&quot;https://snipit.io/&quot; target=&quot;_blank&quot;&gt;snipit&lt;/a&gt;ï¼Œå®ç°ä»£ç ç‰‡æ®µçš„å¤ç”¨ã€‚æœ¬èº«è¿™ä¸ªéœ€æ±‚å¹¶ä¸éš¾å®ç°â€”â€”ç®€å•çš„å‰ç«¯ç•Œé¢ + ç®€å•çš„ node CURDï¼Œæå®šæ”¶å·¥ï¼Œä¸‹ç­å›å®¶ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œåœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå‘ç°äº†ä¸€ä¸ªä½¿ç”¨ç—›ç‚¹â€”â€”æ²¡æœ‰åœ¨çº¿è°ƒè¯•åŠŸèƒ½ï¼Œæ‰€æœ‰ä»£ç åªèƒ½ copy åˆ°æœ¬åœ°ï¼Œåœ¨æœ¬åœ°è¿›è¡Œè°ƒè¯•ã€‚æœ¬ç€å‘ç°ç—›ç‚¹å°±è¦è§£å†³ç—›ç‚¹çš„æŒ‡å¯¼æ€æƒ³ï¼Œæˆ‘å½“æ—¶æ€è€ƒäº†ä¸€æ®µæ—¶é—´ï¼Œå¸Œæœ›å¯»æ‰¾ä¸€ä¸ªåˆé€‚çš„è§£å†³æ–¹æ¡ˆæ¥å®Œç¾çš„è§£å†³è¿™ä¸ªç—›ç‚¹ã€‚æ€»ä½“æ¥è¯´ï¼Œåˆ†ä¸ºä¸¤ç§æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;æœåŠ¡ç«¯æ„å»ºæ–¹æ¡ˆï¼šæœ€å¸¸è§ä¹Ÿæ˜¯æœ€æˆç†Ÿçš„è§£å†³æ–¹æ¡ˆï¼Œæ¯æ¬¡ä¿®æ”¹ä»£ç æ—¶ï¼Œå°†ä»£ç ä¼ ç»™æœåŠ¡ç«¯ï¼Œç”±æœåŠ¡ç«¯æ„å»ºåï¼Œæœ€ç»ˆè¿›è¡Œä»£ç æ›¿æ¢ã€‚ç”±äºæ˜¯åœ¨æœåŠ¡ç«¯è¿›è¡Œæ‰“åŒ…ï¼Œæ‰€ä»¥è¢«ç§°ä¸ºæœåŠ¡ç«¯æ„å»ºæ–¹æ¡ˆã€‚åœ¨å‰å‡ å¹´ï¼Œå®¢æˆ·ç«¯æ¶‰åŠåˆ°æ„å»ºé—®é¢˜ä¸€èˆ¬é‡‡ç”¨æœåŠ¡ç«¯æ„å»ºæ–¹æ¡ˆã€‚&lt;/li&gt;
&lt;li&gt;æµè§ˆå™¨å®æ—¶æ„å»ºæ–¹æ¡ˆï¼šå½“å‰å‰ç«¯æœ€çƒ­é—¨çš„æ–¹å‘ä¹‹ä¸€ï¼Œåœ¨æµè§ˆå™¨ç«¯è¿›è¡Œä»£ç æ„å»ºï¼ŒåŸºæœ¬ä¸éœ€è¦ä¸æœåŠ¡ç«¯äº¤äº’ï¼ˆå…·ä½“åˆ†ä¸åŒç»†åˆ†æ–¹æ¡ˆï¼‰ï¼Œæ‰€ä»¥è¢«ç§°ä¸ºæµè§ˆå™¨å®æ—¶æ„å»ºã€‚ç›®å‰å„ä¸ªå¤§å‚çš„ Web IDE åŸºæœ¬é‡‡ç”¨è¿™ç§æ–¹æ¡ˆã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;ç›¸æ¯”äºæœåŠ¡ç«¯æ„å»ºæ–¹æ¡ˆï¼Œæµè§ˆå™¨å®æ—¶æ„å»ºæ–¹æ¡ˆçš„ä¼˜åŠ¿åœ¨äºï¼šå³æ—¶ã€é«˜æ•ˆä»¥åŠæœ€å®è´µçš„â€”â€”å¯ç¦»çº¿è¿è¡Œï¼ˆå‰ææ˜¯åšäº†åˆé€‚çš„ç¼“å­˜æ–¹æ¡ˆï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æœ€ç»ˆï¼Œå‡ºäºå„ç§å› ç´ ï¼Œæœ€ç»ˆæˆ‘é€‰æ‹©äº†æµè§ˆå™¨å®æ—¶æ„å»ºæ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h3 id=&quot;æµè§ˆå™¨å®æ—¶æ„å»ºæ–¹æ¡ˆ&quot;&gt;æµè§ˆå™¨å®æ—¶æ„å»ºæ–¹æ¡ˆ&lt;/h3&gt;
&lt;p&gt;æµè§ˆå™¨å®æ—¶æ„å»ºæ˜¯æœ€è¿‘ä¸¤å¹´å‰ç«¯çš„çƒ­é—¨æ–¹å‘ï¼Œæ‰€ä»¥ä¹Ÿæ¶Œç°äº†ä¸€å¤§æ‰¹æˆç†Ÿçš„è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;ä¸ªäººæ€»ç»“ä¸ºï¼šbundle æ–¹æ¡ˆä»¥åŠ unbundle æ–¹æ¡ˆä¸¤ç§ã€‚&lt;/p&gt;
&lt;h4 id=&quot;bundle-æ–¹æ¡ˆï¼ˆç±»-codesandbox-æ–¹æ¡ˆï¼‰&quot;&gt;bundle æ–¹æ¡ˆï¼ˆç±» CodeSandBox æ–¹æ¡ˆï¼‰&lt;/h4&gt;
&lt;p&gt;å¤§éƒ¨åˆ†æŠ•å…¥ç”Ÿäº§ç¯å¢ƒçš„æµè§ˆå™¨å®æ—¶æ„å»ºæ–¹æ¡ˆéƒ½é‡‡ç”¨äº†è¯¥æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆåŸºæœ¬é‡‡ç”¨äº† &lt;a href=&quot;https://github.com/codesandbox/codesandbox-client&quot; target=&quot;_blank&quot;&gt;codesandbox-client&lt;/a&gt; çš„æ–¹æ¡ˆï¼Œæ‰€ä»¥æˆ‘ä¸€èˆ¬ç§°ä¹‹ä¸ºç±» CodeSandBox æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;bundle æ–¹æ¡ˆçš„æ ¸å¿ƒåœ¨äºåœ¨æµè§ˆå™¨ä¸Šå®ç°ä¸€ä¸ªæ‰“åŒ…å·¥å…·ï¼Œå¦‚ webpackï¼Œé…åˆ indexDB è¿›è¡Œæœ¬åœ°æ–‡ä»¶å­˜å‚¨ã€‚å½“ç„¶ï¼Œä¸ä»…ä»…æ˜¯è¿™ä¹ˆç®€å•ï¼Œç”±äºåœ¨æµè§ˆå™¨ç«¯åšæ„å»ºå·¥ä½œæ•ˆç‡ç›¸å¯¹è¾ƒä½ï¼Œæ‰€ä»¥éœ€è¦å¤§é‡çš„æ€§èƒ½ä¼˜åŒ–ï¼Œæ¯”å¦‚ CodeSandBox åœ¨æµè§ˆå™¨ç«¯å®ç°äº†ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œå½“è¿›è¡Œæ„å»ºæ—¶ï¼Œä»çº¿ç¨‹æ± ä¸­å–å‡ºçº¿ç¨‹ï¼Œä»è€Œå®ç°å¤šçº¿ç¨‹æ‰“åŒ…ã€‚&lt;/p&gt;
&lt;p&gt;æ€»çš„æ¥è¯´ï¼Œbundle æ–¹æ¡ˆä¾ç„¶æ²¡æœ‰è·³å‡ºæ„å»ºçš„æ€è·¯ï¼Œå½“é¡¹ç›®è¾ƒä¸ºå¤æ‚æ—¶ï¼Œä¾ç„¶ä¼šå‡ºç°æ„å»ºå·¥å…·é‡åˆ°çš„é‚£ä¸ªé—®é¢˜â€”â€”æ…¢ã€‚é’ˆå¯¹ bundle æ–¹æ¡ˆçš„ç¼ºç‚¹ï¼Œä¸šç•Œæ¨å‡ºäº† unbundle æ–¹æ¡ˆï¼ˆå½“ç„¶æœ€ä¸»è¦è¿˜å¾—æ„Ÿè°¢æµè§ˆå™¨çš„æ”¯æŒï¼‰ã€‚&lt;/p&gt;
&lt;h4 id=&quot;unbundleæ–¹æ¡ˆ&quot;&gt;unbundleæ–¹æ¡ˆ&lt;/h4&gt;
&lt;p&gt;unbundle æ–¹æ¡ˆçš„å‡ºç°ï¼Œéœ€è¦æ„Ÿè°¢ ESMã€‚å•¥æ˜¯ ESM å‘¢ï¼ŸESM å…¨ç§°ä¸º ECMAScript modulesï¼Œå³æµè§ˆå™¨åŸç”Ÿæ”¯æŒæ¨¡å—åŒ–è§„èŒƒã€‚æ•ˆæœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-html&quot;&gt;&amp;lt;script type=&quot;module&quot;&amp;gt;
  // å¼•ç”¨åˆ«çš„æ¨¡å—
  import { util } from './utils.js';
        // ä½¿ç”¨åˆ«çš„æ¨¡å—ä¸­çš„å‡½æ•°
  util()
&amp;lt;/script&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å½“æµè§ˆå™¨è§£æåˆ° &lt;code&gt;import&lt;/code&gt; è¯­å¥æ—¶ï¼Œä¼šåƒå¼€å‘æ€ä¸€æ ·è‡ªåŠ¨å¼•å…¥å¯¹åº”æ¨¡å—ã€‚å¾—ç›Šäº ESMï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç»è¿‡æ„å»ºå³å¯ç›´æ¥åœ¨æµè§ˆå™¨ç«¯è¿è¡Œæ¨¡å—åŒ–ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;ç›¸æ¯”äº bundle æ–¹æ¡ˆï¼Œunbundle æ–¹æ¡ˆåœ¨å„ç§æ„ä¹‰ä¸Šéƒ½å¿«äº†è®¸å¤šï¼Œç‰¹åˆ«å½“é¡¹ç›®å¤æ‚åº¦ä¸Šæ¥ä»¥åï¼Œè¿™ä¸ªå·®å¼‚å°†ä¼šå¼‚å¸¸æ˜æ˜¾ï¼›å¦ä¸€æ–¹é¢ï¼Œunbundle ä¸éœ€è¦åœ¨æµè§ˆå™¨ç«¯å®ç°ä¸€ä¸ªæ‰“åŒ…å·¥å…·ï¼Œå¯¹äºå¿«é€Ÿå®ç°æµè§ˆå™¨å®æ—¶æ„å»ºä¹Ÿæœ‰ç€å¾ˆå¤§çš„æ„ä¹‰ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äº unbundle çš„å„ç§ä¼˜ç‚¹ï¼Œæœ€ç»ˆæˆ‘é€‰æ‹©äº†ä½¿ç”¨ unbundle æ–¹æ¡ˆæ¥å®ç°æµè§ˆå™¨å®æ—¶æ„å»ºã€‚&lt;/p&gt;
&lt;h3 id=&quot;å®ç°ä¸€ä¸ªå•æ–‡ä»¶æµè§ˆå™¨å®æ—¶æ„å»º&quot;&gt;å®ç°ä¸€ä¸ªå•æ–‡ä»¶æµè§ˆå™¨å®æ—¶æ„å»º&lt;/h3&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œåˆ°äº†å®æˆ˜ç¯èŠ‚ï¼Œæˆ‘ä»¬æ¥å°è¯•å®ç°ä¸€ä¸ªå•æ–‡ä»¶æµè§ˆå™¨å®æ—¶æ„å»ºã€‚&lt;/p&gt;
&lt;p&gt;è¯¥ç³»ç»Ÿåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨å®æ—¶æ„å»ºï¼‰&lt;/li&gt;
&lt;li&gt;æœåŠ¡ç«¯ï¼ˆä¾èµ–æœåŠ¡å™¨ï¼‰&lt;/li&gt;
&lt;/ul&gt;&lt;h4 id=&quot;å®¢æˆ·ç«¯&quot;&gt;å®¢æˆ·ç«¯&lt;/h4&gt;
&lt;p&gt;é¦–å…ˆæ˜¯ UI éƒ¨åˆ†ï¼ŒUI ç®€å•çš„åˆ†æˆä¸‰éƒ¨åˆ†ï¼šä»£ç ç¼–è¾‘å™¨ï¼ˆå¦‚ï¼šmonaco editorï¼‰ï¼ŒæŒ‰é’®ï¼ˆç”¨äºæ‰§è¡Œå®æ—¶æ„å»ºå‡½æ•°ï¼‰ä»¥åŠæ„å»ºç»“æœå±•ç¤ºéƒ¨åˆ†ï¼Œä¸»è¦è´Ÿè´£è°ƒè¯•ä»£ç å¹¶å±•ç¤ºç»“æœã€‚&lt;/p&gt;
&lt;p&gt;å½“ç‚¹å‡»æŒ‰é’®åï¼Œè§¦å‘æ„å»ºå‡½æ•°ï¼Œå¼€å§‹æ‰§è¡Œæ„å»ºé€»è¾‘ï¼Œæ•´ä¸ªæ„å»ºæµç¨‹ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;å°† Vue æ–‡ä»¶æ‹†åˆ†æˆ templateã€script ä»¥åŠ style&lt;/li&gt;
&lt;li&gt;å¯¹ script è¿›è¡Œå¤„ç†
&lt;ul&gt;&lt;li&gt;åˆå§‹åŒ– es-module-lexerï¼Œè§£æå‡ºæ‰€æœ‰å¯¼å…¥è¯­å¥ï¼ˆimportï¼‰&lt;/li&gt;
&lt;li&gt;é‡å†™ importï¼Œå°†è¯·æ±‚åœ°å€æŒ‡å‘ä¾èµ–æœåŠ¡å™¨&lt;/li&gt;
&lt;li&gt;å¼€å§‹ç”Ÿæˆæœ€ç»ˆåœ¨æµè§ˆå™¨ä¸­æ‰§è¡Œçš„ä»£ç ï¼Œå°†é‡å†™åçš„ script å†™å…¥&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;è§£ææ¨¡æ¿ï¼Œç”Ÿæˆ render å‡½æ•°ï¼Œå°† render å‡½æ•°æŒ‚è½½åˆ° script ä¸Š&lt;/li&gt;
&lt;li&gt;è§£æ styleï¼Œæ›´æ–°æ ·å¼æœ‰ä¸¤ç§æ–¹æ¡ˆ
&lt;/li&gt;
&lt;li&gt;æœ€ç»ˆï¼Œæ–°å»ºä¸€ä¸ª scriptï¼Œå»é™¤åŸæœ‰çš„ scriptï¼Œæ’å…¥æœ€æ–°çš„ script&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;æ€»ä½“æ€è·¯å…¶å®å’Œ vite éå¸¸åƒï¼Œä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯åœ¨æµè§ˆå™¨ç«¯å®ç°äº†ä¸€ä¸ªå° viteã€‚è¯¦ç»†çš„ä»£ç å¯ä»¥å‚è€ƒ vite æºç ï¼Œåœ¨æ­¤ä¸å†èµ˜è¿°ã€‚&lt;/p&gt;
&lt;h4 id=&quot;æœåŠ¡ç«¯&quot;&gt;æœåŠ¡ç«¯&lt;/h4&gt;
&lt;p&gt;æœåŠ¡ç«¯çš„åŠŸèƒ½éå¸¸ç®€å•ï¼Œå³æ¥æ”¶è¯·æ±‚ï¼Œè¿”å›å¯¹åº”çš„ä¾èµ–æ‰“åŒ…æ–‡ä»¶ã€‚ç”±äº ESM åªæ”¯æŒ ESM è§„èŒƒï¼Œæ‰€ä»¥ï¼Œéœ€è¦å°†å„ç§æ¨¡å—è§„èŒƒï¼ˆä¸»è¦æŒ‡çš„æ˜¯ commonjsï¼‰ç»Ÿä¸€è½¬ä¸º ESMã€‚&lt;/p&gt;
&lt;p&gt;å½“ä¾èµ–æœåŠ¡å™¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„è¯·æ±‚æ—¶ï¼Œå…·ä½“å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;æœåŠ¡ç«¯å®‰è£…ä¾èµ–&lt;/li&gt;
&lt;li&gt;é€šè¿‡ es-build å°†ä¾èµ–è½¬ä¸º esm&lt;/li&gt;
&lt;li&gt;å°†ä¾èµ–è¿”å›ç»™å®¢æˆ·ç«¯&lt;/li&gt;
&lt;/ol&gt;&lt;h3 id=&quot;æœªæ¥çš„è·¯&quot;&gt;æœªæ¥çš„è·¯&lt;/h3&gt;
&lt;p&gt;é€šè¿‡ä¸Šé¢çš„æ€è·¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°ä¸€ä¸ªæœ€ç®€å•çš„å•æ–‡ä»¶æµè§ˆå™¨å®æ—¶æ„å»ºäº†ï¼Œä½†æ˜¯å…¶å®æœ‰éå¸¸å¤šçš„é—®é¢˜ï¼Œæ¯”å¦‚ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;å¦‚ä½•è¿›è¡Œä¾èµ–ç‰ˆæœ¬æ§åˆ¶ï¼Ÿ&lt;/li&gt;
&lt;li&gt;sourceMap çš„é—®é¢˜æ€ä¹ˆè§£å†³ï¼Ÿ&lt;/li&gt;
&lt;li&gt;æœåŠ¡ç«¯å¯ä»¥ç»§ç»­ä¼˜åŒ–å—ï¼Ÿ&lt;/li&gt;
&lt;li&gt;å¯ä»¥çº¯æµè§ˆå™¨å®æ—¶æ„å»ºï¼ˆå³æ²¡æœ‰æœåŠ¡ç«¯ï¼‰å—ï¼Ÿ&lt;/li&gt;
&lt;li&gt;å¦‚ä½•å®ç°å¤šæ–‡ä»¶æµè§ˆå™¨å®æ—¶æ„å»ºï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;æœ¬æ¥æˆ‘å¾ˆæƒ³ç›´æ¥æ¥ä¸€å¥ï¼šè¿™äº›é—®é¢˜ç•™ä½œè¯¾åæ€è€ƒ[doge]ï¼Œä½†æ˜¯æ€•è¢«æ‰“ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥å°±èŠä¸‹æˆ‘å¯¹è¿™å‡ ä¸ªé—®é¢˜çš„çœ‹æ³•å§ã€‚&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;ç”¨æˆ·å¯ä»¥é‡‡ç”¨æ³¨é‡Šæ ‡æ³¨ç‰ˆæœ¬ï¼Œè§£ææ—¶ï¼Œä½¿ç”¨æ­£åˆ™æˆ– babel è§£æå³å¯ï¼Œæ€è·¯ç±»ä¼¼äº magic comments&lt;/li&gt;
&lt;li&gt;å¤šæ¬¡æ˜ å°„å³å¯è§£å†³&lt;/li&gt;
&lt;li&gt;ä¾èµ–æœåŠ¡å™¨ä¼˜åŒ–çš„ä¸»è¦æ€è·¯å¯ä»¥æ”¾åœ¨ç¼“å­˜ç®¡ç†ä¸Šï¼Œè¯•æƒ³ï¼Œå¦‚æœä¸åšç¼“å­˜å¤„ç†ï¼Œæ¯æ¬¡ç”¨æˆ·è¯·æ±‚éƒ½éœ€è¦é‡æ–°ä¸‹è½½ã€è½¬æ¢ã€æ‰“åŒ…ä¾èµ–ï¼Œå½“ç”¨æˆ·é‡å¢å¤§æ—¶ï¼ŒæœåŠ¡å™¨çš„å‹åŠ›è¯¥æœ‰å¤šå¤§ï¼Ÿ&lt;/li&gt;
&lt;li&gt;ä¾èµ–è¯·æ±‚ä½¿ç”¨ unpkgï¼Œä¸è¿‡ï¼Œè¿™ä¸ªç›¸å½“äºä»ä¸ªäººå†™çš„ä¾èµ–æœåŠ¡å™¨è½¬æ¢åˆ°äº†å…¬å¸æä¾›çš„ unpkg æœåŠ¡å™¨ï¼Œåªä¸è¿‡ç†è®ºä¸Šç¡®å®ä¸ç”¨è‡ªå·±å†™ä¾èµ–æœåŠ¡å™¨äº†[doge]ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœèƒ½å¤Ÿå®ç°å¤šæ–‡ä»¶æµè§ˆå™¨å®æ—¶æ„å»ºï¼Œå¯ä»¥è§£å†³éå¸¸å¤šå•æ–‡ä»¶æµè§ˆå™¨æ„å»ºå®ç°çš„é—®é¢˜ï¼Œæœ€ç›´æ¥çš„å°±æ˜¯å¯ä»¥è§£å†³ä¾èµ–ç‰ˆæœ¬é—®é¢˜ã€‚å¤šæ–‡ä»¶æµè§ˆå™¨å®æ—¶æ„å»ºå¤æ‚åº¦ç›¸å¯¹äºå•æ–‡ä»¶æµè§ˆå™¨å®æ—¶æ„å»ºé«˜äº†ä¸æ­¢ä¸€ä¸ªæ•°é‡çº§ï¼Œæ‰€ä»¥è¿™ä¸ªé—®é¢˜æˆ‘æ€è€ƒäº†éå¸¸ä¹…ã€‚æœ€å¸¸è§çš„æ–¹æ¡ˆå°±æ˜¯ä¹‹å‰è¯´è¿‡çš„ï¼ŒCodeSandBox æ–¹æ¡ˆï¼Œä½†æ˜¯å¤æ‚åº¦å®åœ¨å¤ªé«˜ã€‚æ‰€ä»¥è¦æƒ³é™ä½å¤æ‚åº¦ï¼Œè¿˜éœ€è¦ä½¿ç”¨ unbundle æ–¹æ¡ˆã€‚ç»è¿‡æ€è€ƒï¼Œæˆ‘é‡‡ç”¨äº† service workerï¼Œservice worker å¯ä»¥æ‹¦æˆªæ‰€æœ‰è¯·æ±‚ï¼Œæ‹¦æˆªåï¼Œåˆ¤æ–­æ˜¯å¦è¯·æ±‚çš„æ˜¯æœ¬åœ°æ–‡ä»¶ï¼Œå¦‚æœæ˜¯æœ¬åœ°æ–‡ä»¶ï¼Œå‘æ¶ˆæ¯ç»™æœ¬åœ°ï¼Œå¦‚æœæ˜¯ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œè¯·æ±‚ä¾èµ–æœåŠ¡å™¨ã€‚ä½†æ˜¯ service worker æœ‰ä¸ªè‡´å‘½çš„é—®é¢˜ï¼Œç¬¬ä¸€æ¬¡è¯·æ±‚ä¸èƒ½æ‹¦æˆªï¼Œåªæœ‰ç¬¬äºŒæ¬¡ä¹‹åçš„è¯·æ±‚æ‰èƒ½æ‹¦æˆªï¼ˆæ¯•ç«Ÿ service worker æœ¬è´¨æ˜¯ä¸ªç¼“å­˜ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;ä»¥ä¸Šå°±æ˜¯æˆ‘çš„æ€è·¯ï¼Œå¦‚æœå¤§ä½¬ä»¬æœ‰ä¸åŒçš„æ€è·¯ï¼Œæ¬¢è¿ä¸€èµ·æ¢è®¨ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æœ€å&quot;&gt;æœ€å&lt;/h3&gt;
&lt;p&gt;æŒ‰ç…§æƒ¯ä¾‹ï¼Œå‘ä¸ªæ‹›è˜å¸–ï¼š&lt;/p&gt;
&lt;p&gt;å­—èŠ‚è·³åŠ¨æ‹›äººå•¦ï¼ŒHC å·¨å¤šï¼ŒåŒ—ä¸Šå¹¿æ·±æ­çš†æœ‰å‘ä½ã€‚&lt;/p&gt;
&lt;p&gt;å›¢é˜Ÿè¯¦æƒ…è§ï¼š&lt;a href=&quot;https://webinfra.org/about&quot; target=&quot;_blank&quot;&gt;https://webinfra.org/about&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æä¾›å†…æ¨åŠé¢è¯•è¾…å¯¼æœåŠ¡ï¼Œç›®å‰æˆ‘å†…æ¨çš„å‡ ä¸ªåŒå­¦çš†é€šè¿‡äº†é¢è¯•ï¼Œæ¬¢è¿å’¨è¯¢~&lt;/p&gt;
&lt;p&gt;æš‚æ—¶ä¸çœ‹æœºä¼šï¼Œä¹‹åæœ‰æƒ³æ³•æ¥å­—èŠ‚è¯•è¯•çš„åŒå­¦ï¼Œä¹Ÿä¸€æ ·æ¬¢è¿ä½ åŠ å…¥ ğŸ˜ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰æ„è€…å¯å‘é€é‚®ä»¶åˆ° &lt;a href=&quot;mailto:hubin.gzx@bytedance.com&quot; target=&quot;_blank&quot;&gt;hubin.gzx@bytedance.com&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Thu, 11 Feb 2021 17:00:00 +0000</pubDate>
<dc:creator>æ ¼å­ç†Š</dc:creator>
<og:description>å‰è¨€ åœ¨é¥è¿œçš„å‡ ä¸ªæœˆå‰ï¼Œè¿˜åœ¨ä¸Šå®¶å…¬å¸çš„æ—¶å€™ï¼Œè€æ¿çªå‘å¥‡æƒ³ï¼Œæƒ³è¦æä¸ªä»£ç ç‰‡æ®µå¹³å°ï¼Œç±»ä¼¼äº snipitï¼Œå®ç°ä»£ç ç‰‡æ®µçš„å¤ç”¨ã€‚æœ¬èº«è¿™ä¸ªéœ€æ±‚å¹¶ä¸éš¾å®ç°â€”â€”ç®€å•çš„å‰ç«¯ç•Œé¢ + ç®€å•çš„ node CURDï¼Œæå®š</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/karthuslorin/p/14398400.html</dc:identifier>
</item>
<item>
<title>è“ç‰™é€šè¯é“¾è·¯å’Œæ‰‹æœºé€šè¯é“¾è·¯æœ‰åŒºåˆ«ä¹ˆï¼Ÿ - c6000</title>
<link>http://www.cnblogs.com/c6000/p/14398318.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/c6000/p/14398318.html</guid>
<description>&lt;p&gt;è¿‘æ—¥å‹äººæ¨äº†ä¸€ä¸ªåšå®¢ï¼šhttps://blog.csdn.net/david_tym/article/details/80963732&lt;/p&gt;
&lt;p&gt;ä½œè€…å¯¹æ‰‹æœºä¸­é€šè¯é“¾è·¯è¿›è¡Œäº†è¯¦ç»†çš„åˆ†æã€‚å…¶ä¸­åŒ…æ‹¬äº†ç»å…¸çš„CP Callï¼ˆè¿è¥å•†æä¾›çš„ç”µè¯ä¸šåŠ¡ï¼‰å’Œæµè¡Œçš„AP Callï¼ˆVoIPç­‰OTTä¸šåŠ¡ï¼‰çš„é“¾è·¯ï¼Œå€¼å¾—ä¸€çœ‹ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡åœ¨è“ç‰™è€³æœºé€šè¯æ—¶ï¼Œå’Œæ‰‹æœºæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿé¦–å…ˆæˆ‘ä»¬ä»¥ä¸‰æ˜Ÿè“ç‰™è€³æœºä¸ºä¾‹ï¼Œå…ˆä»èŠ¯ç‰‡è§’åº¦çœ‹ä¸€ä¸‹ï¼š&lt;/p&gt;
&lt;table border=&quot;0&quot;&gt;&lt;tbody readability=&quot;1&quot;&gt;&lt;tr&gt;&lt;td&gt;Â &lt;/td&gt;
&lt;td&gt;Buds+&lt;/td&gt;
&lt;td&gt;Buds Live&lt;/td&gt;
&lt;td&gt;Buds Pro&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td readability=&quot;5&quot;&gt;
&lt;p&gt;è“ç‰™éŸ³é¢‘èŠ¯ç‰‡ï¼ˆä¸»æ§èŠ¯ç‰‡ï¼‰&lt;/p&gt;
&lt;/td&gt;
&lt;td&gt;åšé€š&lt;/td&gt;
&lt;td&gt;åšé€š&lt;/td&gt;
&lt;td&gt;ä¸‰æ˜Ÿ&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;æ™ºèƒ½éŸ³é¢‘å¤„ç†èŠ¯ç‰‡&lt;/td&gt;
&lt;td&gt;å‡Œäº‘é€»è¾‘&lt;/td&gt;
&lt;td&gt;æ’ç„&lt;/td&gt;
&lt;td&gt;å‡Œäº‘é€»è¾‘&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;*ä»¥ä¸Šä¿¡æ¯æ¥è‡ªæˆ‘çˆ±éŸ³é¢‘ç½‘çš„ä¸‰æ˜Ÿè€³æœºçš„æ‹†è§£æŠ¥å‘Šã€‚Â &lt;/p&gt;
&lt;p&gt;è§£é‡Šä¸€ä¸‹ï¼Œæ™ºèƒ½éŸ³é¢‘å¤„ç†èŠ¯ç‰‡æ˜¯è¯­éŸ³è¯†åˆ«å’Œå”¤é†’ç”¨çš„ï¼Œä¹Ÿå°±æ˜¯ä¸‰æ˜Ÿçš„Bixbyä½¿ç”¨çš„ã€‚è“ç‰™éŸ³é¢‘èŠ¯ç‰‡åŒ…æ‹¬è“ç‰™é€šè¯å’Œå¬éŸ³ä¹çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœåªçœ‹è“ç‰™é€šè¯ï¼Œå°±æ˜¯è·‘åœ¨è“ç‰™éŸ³é¢‘èŠ¯ç‰‡å†…ã€‚é‚£ä¹ˆä¸æ™®é€šçš„æ‰‹æœºé€šè¯æœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;1. é€šä¿¡åè®®ä¸åŒ&lt;/p&gt;
&lt;p&gt;æ‰‹æœºä¸Šçš„CP Callæ˜¯ç”±æˆ‘ä»¬å¸¸è¯´çš„4G,5Gåè®®æ¥æ‰¿è½½çš„ï¼Œæ‰‹æœºä¸Šçš„VoIPç­‰OTTä¸šåŠ¡æ˜¯ç”¨è¿‡TCP/UDPç­‰åè®®æ¥æ‰¿è½½çš„ã€‚&lt;/p&gt;
&lt;p&gt;è€Œè“ç‰™è€³æœºé€šè¯ï¼Œå®ƒå’Œæ‰‹æœºä¹‹é—´çš„é€šè¯æ˜¯é€šè¿‡è“ç‰™ç‰©ç†é“¾è·¯SCO(Synchronous Connection Oriented)æ¥æ‰¿è½½çš„ï¼Œä¸»è¦ç”¨æ¥ä¼ è¾“å¯¹æ—¶é—´è¦æ±‚å¾ˆé«˜çš„æ•°æ®é€šä¿¡,&lt;/p&gt;
&lt;p&gt;åŒæ­¥å®šå‘è¿æ¥(SCO)ï¼Œä¸»è¦ç”¨äºåŒæ­¥è¯éŸ³ä¼ é€ã€‚Â &lt;/p&gt;
&lt;p&gt;2. è¯­éŸ³ç¼–ç å™¨ä¸åŒ&lt;/p&gt;
&lt;p&gt;æ‰‹æœºä¸Šçš„CP Call é‡‡ç”¨çš„æ˜¯AMR WB, EVSç­‰3GPPç»„ç»‡å®šä¹‰çš„è¯­éŸ³ç¼–ç å™¨ï¼Œæ‰‹æœºä¸Šçš„VoIPç­‰OTTä¸šåŠ¡ä¸€èˆ¬é‡‡ç”¨OPUSç­‰å¼€æºè¯­éŸ³ç¼–ç å™¨ã€‚&lt;/p&gt;
&lt;p&gt;è€Œè“ç‰™è€³æœºæ”¯æŒçš„ç¼–ç å™¨ä¸»è¦æœ‰ï¼š&lt;/p&gt;
&lt;p&gt;SBC ï¼ˆSub-band codingï¼Œå­å¸¦ç¼–ç ï¼‰&lt;/p&gt;
&lt;p&gt;ACCï¼ˆAdvanced Audio Codingï¼Œé«˜çº§éŸ³é¢‘ç¼–ç ï¼‰&lt;/p&gt;
&lt;p&gt;aptXï¼Œæ˜¯CSRå…¬å¸çš„ä¸“åˆ©ç¼–ç ç®—æ³•ï¼Œåœ¨è¢«é«˜é€šæ”¶è´­åï¼ŒAPTXåœ¨å®‰å“æ‰‹æœºé‡Œé¢æ¨å¹¿åŠ›åº¦å¾ˆå¤§&lt;/p&gt;
&lt;p&gt;LDACï¼Œå¾ˆç®€å•ç²—æš´çš„æé«˜äº†ä¿¡é“ï¼Œåœ¨æ”¯æŒLDACçš„è®¾å¤‡ä¸Šé¢ï¼Œè“ç‰™çš„é€šä¿¡ç ç‡æ¥è¿‘1M&lt;/p&gt;
&lt;p&gt;Samsung Scalable Codecï¼Œä¸‰æ˜Ÿå…¬å¸è‡ªç ”çš„è“ç‰™ç¼–ç å™¨ï¼Œæ ¹æ®æˆ‘çˆ±éŸ³é¢‘ç½‘çš„è¯„æµ‹ï¼ŒSSCç¼–ç å™¨æ”¯æŒæ›´è¿œçš„ä¼ è¾“è·ç¦»ã€‚Â &lt;/p&gt;
&lt;p&gt;3.è¯­éŸ³å¢å¼ºé“¾è·¯çš„å·®åˆ«&lt;/p&gt;
&lt;p&gt;å…¶å®æ‰‹æœºé€šè¯ä¸­çš„è¯­éŸ³å¢å¼ºæ¨¡å—ï¼Œè€³æœºä¸­çš„éƒ½éœ€è¦ï¼Œå¯è°“å°å°éº»é›€ï¼Œäº”è—ä¿±å…¨ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ç”±äºè€³æœºçš„ä½©æˆ´æ–¹å¼å’Œæ‰‹æœºä¸åŒï¼Œä»¥åŠè€³æœºä¸Šèµ„æºæ›´åŠ å—é™ï¼Œéƒ½å¯¼è‡´è€³æœºä¸Šçš„è¯­éŸ³å¢å¼ºæ¨¡å—æ¯”æ‰‹æœºçš„è¦æ±‚è¦é«˜ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä»ç¡¬ä»¶æ‹¾éŸ³æ¨¡å—æ¥çœ‹ä¸€ä¸‹ä¸‰æ˜ŸBuds Proçš„ç»“æ„ï¼š&lt;/p&gt;


&lt;p&gt;Â  Â  &lt;img src=&quot;https://img2020.cnblogs.com/blog/152995/202102/152995-20210211232433709-1644265038.png&quot; alt=&quot;&quot; width=&quot;474&quot; height=&quot;249&quot; loading=&quot;lazy&quot;/&gt;Â  Â Â &lt;img src=&quot;https://img2020.cnblogs.com/blog/152995/202102/152995-20210211232257314-426901868.png&quot; alt=&quot;&quot; width=&quot;236&quot; height=&quot;131&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;

&lt;p&gt;å›¾ä¸­çš„åŒéº¦å…‹é£ï¼Œæ˜¯æœå‘è€³æœºå¤–ä¾§çš„ä¸¤ä¸ªéº¦å…‹é£ï¼Œç”¨è¿™ä¸¤ä¸ªéº¦å…‹é£å¯ä»¥å½¢æˆæ³¢æŸæˆå½¢åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;è“ç‰™è€³æœºçš„ä»ä¸šè€…åº”è¯¥éƒ½çŸ¥é“å…¶ä¸­çš„å†…ç½®éº¦å…‹é£å’Œè¯­éŸ³æ‹¾å–å•å…ƒçš„ç‰¹ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;å†…ç½®éº¦å…‹é£ï¼Œæ˜¯æœå‘è€³æœµå†…ä¾§çš„éº¦å…‹é£ï¼Œå®ƒæ‹¾å–åˆ°çš„ä¿¡å·æ˜¯é€šè¿‡ä½©æˆ´è€…çš„éª¨ä¼ å¯¼å’Œè€³é“ä¸­çš„ç©ºæ°”ä¼ åˆ°å…±åŒå½¢æˆçš„ï¼Œå¯¼è‡´å®ƒåªèƒ½æ‹¾å–åˆ°2kHzä»¥ä¸‹çš„éŸ³é¢‘ï¼Œ&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ç”±äºè€³æœºçš„ç‰©ç†éš”ç»ï¼Œå®ƒåŸºæœ¬æ‹¾å–ä¸åˆ°å¤–éƒ¨çš„å™ªå£°ã€‚&lt;/p&gt;
&lt;p&gt;è¯­éŸ³æ‹¾å–å•å…ƒæ˜¯é€šè¿‡æ„ŸçŸ¥ä½©æˆ´è€…ä¸‹é¢šçš„éœ‡åŠ¨æ¥æ‹¾å–ä½©æˆ´è€…çš„è¯­éŸ³çš„ï¼Œå®ƒåªèƒ½æ‹¾å–åˆ°1kHzä»¥ä¸‹çš„éŸ³é¢‘ï¼ŒåŒæ—¶ä¹Ÿæ‹¾å–ä¸åˆ°å¤–éƒ¨çš„å™ªå£°ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨Buds Pro ä¸­ç”±è¿™ä¸ªå››ä¸ªéº¦å…‹é£å…±åŒç»„æˆäº†è“ç‰™è¯­éŸ³çš„å¢å¼ºé“¾è·¯çš„è¾“å…¥ï¼Œç›¸ä¿¡æ¯ä¸ªè“ç‰™è€³æœºå‚å•†éƒ½æœ‰è‡ªå·±ç‹¬ç‰¹çš„è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;å…¶ä¸­çš„éº¦å…‹é£ç½‘æ ¼ä¸»è¦æ˜¯ç”¨æ¥é˜²é£å™ªçš„ï¼Œä½¿å¾—å¸¦ç€è€³æœºè·‘æ­¥æ—¶ï¼Œä¸å†æ‹…å¿ƒé£å™ªå¯¹é€šè¯çš„å¹²æ‰°äº†ã€‚&lt;/p&gt;

&lt;p&gt;é‰´äºç›®å‰å¹¶æ²¡æœ‰è“ç‰™è€³æœºå‚å•†å…¬å¸ƒè‡ªå·±çš„è¯­éŸ³å¢å¼ºé“¾è·¯çš„é“¾è·¯å›¾ï¼Œè¿™é‡Œä¸å¥½ä¸€ä¸€ç»™å‡ºä¸æ‰‹æœºè¯­éŸ³å¢å¼ºé“¾è·¯çš„åŒºåˆ«ï¼Œ&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ç›¸ä¿¡è“ç‰™è¯­éŸ³ä»ä¸šè€…çš„è„‘æµ·é‡Œï¼Œéƒ½ä¼šæ¸…æ¥šçš„æœ‰è¿™æ ·ä¸€å¼ é“¾è·¯å›¾çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨äº†è¿™å››ä¸ªéº¦å…‹é£ï¼ŒåŠ éº¦å…‹é£ç½‘æ ¼çš„è”åˆå¤„ç†çš„è¯­éŸ³å¢å¼ºé“¾è·¯ï¼Œæ•ˆæœç›¸ä¿¡ä¸ä¼šå·®ï¼Œè¦ä¸ç„¶ä»–ä¹Ÿä¸æ•¢å†å‘å¸ƒä¼šä¸Šé‡ç‚¹å®£ä¼ ä½å™ªå£°é€šè¯åŠŸèƒ½äº†ã€‚&lt;/p&gt;

</description>
<pubDate>Thu, 11 Feb 2021 15:46:00 +0000</pubDate>
<dc:creator>c6000</dc:creator>
<og:description>è¿‘æ—¥å‹äººæ¨äº†ä¸€ä¸ªåšå®¢ï¼šhttps://blog.csdn.net/david_tym/article/details/80963732 ä½œè€…å¯¹æ‰‹æœºä¸­é€šè¯é“¾è·¯è¿›è¡Œäº†è¯¦ç»†çš„åˆ†æã€‚å…¶ä¸­åŒ…æ‹¬äº†ç»å…¸çš„CP Ca</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/c6000/p/14398318.html</dc:identifier>
</item>
<item>
<title>kubernetesè·‘jenkinsåŠ¨æ€slave - è½é­„è¿ç»´</title>
<link>http://www.cnblogs.com/Dev0ps/p/14398329.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/Dev0ps/p/14398329.html</guid>
<description>&lt;div readability=&quot;6&quot;&gt;
&lt;div readability=&quot;7&quot;&gt;
&lt;p&gt;ä½¿ç”¨jenkinsåŠ¨æ€slaveçš„ä¼˜åŠ¿ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;æœåŠ¡é«˜å¯ç”¨&lt;/strong&gt;ï¼Œå½“ Jenkins Master å‡ºç°æ•…éšœæ—¶ï¼ŒKubernetes ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–°çš„ Jenkins Master å®¹å™¨ï¼Œå¹¶ä¸”å°† Volume åˆ†é…ç»™æ–°åˆ›å»ºçš„å®¹å™¨ï¼Œä¿è¯æ•°æ®ä¸ä¸¢å¤±ï¼Œä»è€Œè¾¾åˆ°é›†ç¾¤æœåŠ¡é«˜å¯ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€ä¼¸ç¼©&lt;/strong&gt;ï¼Œåˆç†ä½¿ç”¨èµ„æºï¼Œæ¯æ¬¡è¿è¡Œ Job æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª Jenkins Slaveï¼ŒJob å®Œæˆåï¼ŒSlave è‡ªåŠ¨æ³¨é”€å¹¶åˆ é™¤å®¹å™¨ï¼Œèµ„æºè‡ªåŠ¨é‡Šæ”¾ï¼Œè€Œä¸” Kubernetes ä¼šæ ¹æ®æ¯ä¸ªèµ„æºçš„ä½¿ç”¨æƒ…å†µï¼ŒåŠ¨æ€åˆ†é… Slave åˆ°ç©ºé—²çš„èŠ‚ç‚¹ä¸Šåˆ›å»ºï¼Œé™ä½å‡ºç°å› æŸèŠ‚ç‚¹èµ„æºåˆ©ç”¨ç‡é«˜ï¼Œè¿˜æ’é˜Ÿç­‰å¾…åœ¨è¯¥èŠ‚ç‚¹çš„æƒ…å†µã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰©å±•æ€§å¥½&lt;/strong&gt;ï¼Œå½“ Kubernetes é›†ç¾¤çš„èµ„æºä¸¥é‡ä¸è¶³è€Œå¯¼è‡´ Job æ’é˜Ÿç­‰å¾…æ—¶ï¼Œå¯ä»¥å¾ˆå®¹æ˜“çš„æ·»åŠ ä¸€ä¸ª Kubernetes Node åˆ°é›†ç¾¤ä¸­ï¼Œä»è€Œå®ç°æ‰©å±•ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;æ¶æ„å›¾å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1271786/202102/1271786-20210211232254807-1222340523.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;1ã€åˆ›å»ºnamespace&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
kubectl create ns kube-ops
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;2ã€è®¾ç½®rbaæˆæƒ&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;62&quot;&gt;
&lt;pre&gt;
&lt;span&gt;[root@node1 mingyang]# cat rbac.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: jenkins
  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;: kube-&lt;span&gt;ops

&lt;/span&gt;---&lt;span&gt;
kind: ClusterRole
apiVersion: rbac.authorization.k8s.io&lt;/span&gt;/&lt;span&gt;v1beta1
metadata:
  name: jenkins
rules:
  &lt;/span&gt;- apiGroups: [&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;extensions&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;apps&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;]
    resources: [&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;deployments&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;]
    verbs: [&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;create&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;delete&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;list&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;watch&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;patch&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;update&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;]
  &lt;/span&gt;- apiGroups: [&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;]
    resources: [&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;services&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;]
    verbs: [&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;create&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;delete&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;list&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;watch&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;patch&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;update&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;]
  &lt;/span&gt;- apiGroups: [&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;]
    resources: [&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;pods&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;]
    verbs: [&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;create&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;delete&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;list&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;patch&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;update&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;watch&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;]
  &lt;/span&gt;- apiGroups: [&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;]
    resources: [&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;pods/exec&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;]
    verbs: [&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;create&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;delete&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;list&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;patch&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;update&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;watch&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;]
  &lt;/span&gt;- apiGroups: [&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;]
    resources: [&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;pods/log&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;]
    verbs: [&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;list&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;watch&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;]
  &lt;/span&gt;- apiGroups: [&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;]
    resources: [&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;secrets&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;]
    verbs: [&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;]

&lt;/span&gt;---&lt;span&gt;
apiVersion: rbac.authorization.k8s.io&lt;/span&gt;/&lt;span&gt;v1beta1
kind: ClusterRoleBinding
metadata:
  name: jenkins
  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;: kube-&lt;span&gt;ops
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: jenkins
subjects:
  &lt;/span&gt;-&lt;span&gt; kind: ServiceAccount
    name: jenkins
    &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;: kube-ops
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;3ã€åˆ›å»ºjenkins deploymentæ–‡ä»¶&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;[root@node1 mingyang]# cat  jenkins.yaml
&lt;/span&gt;---&lt;span&gt;
apiVersion: apps&lt;/span&gt;/&lt;span&gt;v1
kind: Deployment
metadata:
  name: jenkins
  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;: kube-&lt;span&gt;ops
spec:
  selector:
     matchLabels:
       app: jenkins
  template:
    metadata:
      labels:
        app: jenkins
    spec:
      terminationGracePeriodSeconds: &lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;span&gt;
      serviceAccount: jenkins
      containers:
      &lt;/span&gt;-&lt;span&gt; name: jenkins
        image: jenkins&lt;/span&gt;/&lt;span&gt;jenkins:lts
        imagePullPolicy: IfNotPresent
        ports:
        &lt;/span&gt;- containerPort: &lt;span&gt;8080&lt;/span&gt;&lt;span&gt;
          name: web
          protocol: TCP
        &lt;/span&gt;- containerPort: &lt;span&gt;50000&lt;/span&gt;&lt;span&gt;
          name: agent
          protocol: TCP
        resources:
          limits:
            cpu: 1000m
            memory: 1Gi
          requests:
            cpu: 500m
            memory: 512Mi
        livenessProbe:
          httpGet:
            path: &lt;/span&gt;/&lt;span&gt;login
            port: &lt;/span&gt;&lt;span&gt;8080&lt;/span&gt;&lt;span&gt;
          initialDelaySeconds: &lt;/span&gt;&lt;span&gt;60&lt;/span&gt;&lt;span&gt;
          timeoutSeconds: &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;
          failureThreshold: &lt;/span&gt;&lt;span&gt;12&lt;/span&gt;&lt;span&gt;
        readinessProbe:
          httpGet:
            path: &lt;/span&gt;/&lt;span&gt;login
            port: &lt;/span&gt;&lt;span&gt;8080&lt;/span&gt;&lt;span&gt;
          initialDelaySeconds: &lt;/span&gt;&lt;span&gt;60&lt;/span&gt;&lt;span&gt;
          timeoutSeconds: &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;
          failureThreshold: &lt;/span&gt;&lt;span&gt;12&lt;/span&gt;&lt;span&gt;
        volumeMounts:
        &lt;/span&gt;-&lt;span&gt; name: jenkinshome
          subPath: jenkins
          mountPath: &lt;/span&gt;/&lt;span&gt;var&lt;/span&gt;/&lt;span&gt;jenkins_home
        env:
        &lt;/span&gt;-&lt;span&gt; name: LIMITS_MEMORY
          valueFrom:
            resourceFieldRef:
              resource: limits.memory
              divisor: 1Mi
        &lt;/span&gt;-&lt;span&gt; name: JAVA_OPTS
          value: &lt;/span&gt;-Xmx$(LIMITS_MEMORY)m -XshowSettings:vm -Dhudson.slaves.NodeProvisioner.initialDelay=&lt;span&gt;0&lt;/span&gt; -Dhudson.slaves.NodeProvisioner.MARGIN=&lt;span&gt;50&lt;/span&gt; -Dhudson.slaves.NodeProvisioner.MARGIN0=&lt;span&gt;0.85&lt;/span&gt; -Duser.timezone=Asia/&lt;span&gt;Shanghai
      securityContext:
        fsGroup: &lt;/span&gt;&lt;span&gt;1000&lt;/span&gt;&lt;span&gt;
      volumes:
      &lt;/span&gt;-&lt;span&gt; name: jenkinshome
        hostPath:
          path: &lt;/span&gt;/data/&lt;span&gt;jenkins_home
          type: DirectoryOrCreate

&lt;/span&gt;---&lt;span&gt;
apiVersion: v1
kind: Service
metadata:
  name: jenkins
  &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;: kube-&lt;span&gt;ops
  labels:
    app: jenkins
spec:
  selector:
    app: jenkins
  type: NodePort
  ports:
  &lt;/span&gt;-&lt;span&gt; name: web
    port: &lt;/span&gt;&lt;span&gt;8080&lt;/span&gt;&lt;span&gt;
    targetPort: web
    nodePort: &lt;/span&gt;&lt;span&gt;30002&lt;/span&gt;
  -&lt;span&gt; name: agent
    port: &lt;/span&gt;&lt;span&gt;50000&lt;/span&gt;&lt;span&gt;
    targetPort: agent&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;4ã€ç»™jenkinså®¶ç›®å½•æˆæƒ&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
chown -R &lt;span&gt;1000&lt;/span&gt; /data/jenkins_home/
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;5ã€è¿è¡Œæƒ…å†µ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1271786/202102/1271786-20210211232519846-539495313.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â 6ã€å®‰è£…kubernetesæ’ä»¶Kubernetes pluginã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1271786/202102/1271786-20210211232546048-1299225044.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â 7ã€é…ç½®kubernetes&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1271786/202102/1271786-20210211232619705-189799358.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;8ã€è¿™ä¸€æ­¥æ˜¯æ ¸å¿ƒï¼Œæ·»åŠ pod templatesã€‚æ ‡ç­¾åˆ—è¡¨æ˜¯åˆ°æ—¶ç¼–å†™pipelineè¦å…³è”çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1271786/202102/1271786-20210211232648102-517864091.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;9ã€æ·»åŠ ä¸¤ä¸ªæŒ‚è½½å· åˆ†åˆ«æ˜¯dockeråŠkubectl å·¥å…·&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1271786/202102/1271786-20210211232725170-987124724.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;10ã€æµ‹è¯•pipeline&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
node(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;hejianlai&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;) {
    stage(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Clone&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;) {
      echo &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;1.Clone Stage&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
    }
    stage(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Test&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;) {
      echo &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;2.Test Stage&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
    }
    stage(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Build&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;) {
      echo &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;3.Build Docker Image Stage&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
    }
    stage(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Push&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;) {
      echo &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;4.Push Docker Image Stage&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
    }
    stage(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;YAML&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;) {
      echo &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;5. Change YAML File Stage&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
    }
    stage(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Deploy&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;) {
      echo &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;6. Deploy Stage&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;11ã€è¿è¡Œç»“æœï¼Œslaveæ‰§è¡Œå®Œä»»åŠ¡ä¹‹åè‡ªåŠ¨é”€æ¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1271786/202102/1271786-20210211232854796-1506360568.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1271786/202102/1271786-20210211232940823-1927120172.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;





</description>
<pubDate>Thu, 11 Feb 2021 15:31:00 +0000</pubDate>
<dc:creator>è½é­„è¿ç»´</dc:creator>
<og:description>ä½¿ç”¨jenkinsåŠ¨æ€slaveçš„ä¼˜åŠ¿ï¼š æœåŠ¡é«˜å¯ç”¨ï¼Œå½“ Jenkins Master å‡ºç°æ•…éšœæ—¶ï¼ŒKubernetes ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–°çš„ Jenkins Master å®¹å™¨ï¼Œå¹¶ä¸”å°† Volume</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/Dev0ps/p/14398329.html</dc:identifier>
</item>
<item>
<title>WSL (Windows Subsystem for Linux) çš„ VSLAM (Visual Simultaneous Localization and Mapping) é“è·¯ - Optics_css</title>
<link>http://www.cnblogs.com/optics-css/p/14398226.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/optics-css/p/14398226.html</guid>
<description>&lt;p&gt;ä»¥ Windows Subsystem for Linux é—¯å…¥ Visual Simultaneous Localization and Mapping ä¸–ç•Œçš„è‰°éš¾é“è·¯... è¿™é‡ŒåŒ…å«å„ç§å„æ ·çš„ WSL ä¸­å¯èƒ½ç”¨åˆ°çš„åŒ…ï¼Œç¾åŒ–æ–¹æ¡ˆï¼Œä»¥åŠç›¸å…³è½¯ä»¶çš„ä¸€äº›ä½¿ç”¨å°æŠ€å·§ï¼Œç”¨äºè‡ªå·±è¸©å‘è®°å½•çš„åŒæ—¶ï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åˆ°åŒä¸ºä½¿ç”¨ Windows è¸©å‘çš„ CVer ä»¬... ...&lt;/p&gt;&lt;div id=&quot;cnblogs_post_body&quot; readability=&quot;351.53792784459&quot;&gt;

&lt;hr/&gt;&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;ä»¥ &lt;strong&gt;Windows Subsystem for Linux&lt;/strong&gt; é—¯å…¥ &lt;strong&gt;Visual Simultaneous Localization and Mapping&lt;/strong&gt; ä¸–ç•Œçš„è‰°éš¾é“è·¯... è¿™é‡ŒåŒ…å«å„ç§å„æ ·çš„ WSL ä¸­å¯èƒ½ç”¨åˆ°çš„åŒ…ï¼Œç¾åŒ–æ–¹æ¡ˆï¼Œä»¥åŠç›¸å…³è½¯ä»¶çš„ä¸€äº›ä½¿ç”¨å°æŠ€å·§ï¼Œç”¨äºè‡ªå·±è¸©å‘è®°å½•çš„åŒæ—¶ï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åˆ°åŒä¸ºä½¿ç”¨ Windows è¸©å‘çš„ CVer ä»¬... ...&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;å®‰è£…å¥½-windows-subsystem-for-linux-åè¦åšçš„&quot;&gt;&lt;strong&gt;å®‰è£…å¥½ Windows Subsystem for Linux åè¦åšçš„&lt;/strong&gt;&lt;/h2&gt;
&lt;h3 id=&quot;å¸è½½åŸè£…-vim&quot;&gt;&lt;strong&gt;å¸è½½åŸè£… Vim&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;ä¸€æ³¢å¼ºç¡¬æ“ä½œæŠŠå¥½åˆ çš„åœ°æ–¹å…ˆå’”åš“æ‰ï¼ˆè®©è¾“å¯†ç å°±è€å®è¾“ï¼Œè®©ç¡®è®¤å°±ç›´æ¥'Y'ï¼‰ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;sudo apt-get remove vim
sudo apt-get remove vim-runtime
sudo apt-get remove vim -tiny
sudo apt-get remove vim-common
sudo apt-get remove vim-doc
sudo apt-get remove vim-scripts
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç„¶åæ£€æŸ¥è¿˜å‰©ä»€ä¹ˆå¸¦ &quot;vim&quot; å­—çœ¼çš„è¿˜æ´»ç€ï¼Œè¾“å…¥ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;dpkg -l | grep vim
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¾—åˆ°ä¸‹é¢è¿™ä¸‰ä¸ªä¸œè¥¿ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;rc  vim-common        2:8.1.2269-1ubuntu5     all     Vi IMproved - Common files
rc  vim-runtime 2:8.1.2269-1ubuntu5     all     Vi IMproved - Runtime files
rc  vim-tiny    2:8.1.2269-1ubuntu5     amd64   Vi IMproved - enhanced vi editor - compact version
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ‰¯æ‰å®ƒæœ€åçš„æ•‘å‘½ç¨»è‰ï¼Œç”¨ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;sudo dpkg -P vim-tiny vim-common vim-run
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;å®‰è£…-nano&quot;&gt;&lt;strong&gt;å®‰è£… Nano&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;è¿™æ ·å°±æˆåŠŸ remove äº†åŸè£…çš„ vimï¼Œä¸‹é¢ç”¨ apt-get å‘½ä»¤å®‰è£… nanoï¼Œä¹Ÿæ˜¯ä¸€ç§ç¼–è¾‘å™¨ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;sudo apt-get install nano
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;linuxæ¢æº&quot;&gt;&lt;strong&gt;Linuxæ¢æº&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;è¿›å…¥&lt;a href=&quot;https://developer.aliyun.com/mirror/ubuntu?spm=a2c6h.13651102.0.0.3e221b11ICRBHL&quot; target=&quot;_blank&quot;&gt;&lt;strong&gt;é˜¿é‡Œäº‘ Ubuntu é•œåƒ&lt;/strong&gt;&lt;/a&gt;ï¼Œé€‰æ‹© ubuntu 20.04 (focal) é…ç½®æ‰€å¯¹åº”çš„æºï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-css&quot;&gt;deb http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨ source.list æ–‡ä»¶ä¸­æ·»åŠ è¿™äº›æºå¹¶ä¿å­˜ï¼ˆæŒ‰ï¼ŒCtrl+Kï¼‰ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;sudo nano /etc/apt/source.list # Use nano to edit the .list file
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;ä¸€äº›å°å‹çš„-tips&quot;&gt;&lt;strong&gt;ä¸€äº›å°å‹çš„ Tips&lt;/strong&gt;&lt;/h2&gt;
&lt;ul readability=&quot;31&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;â€œå³é”®â€åœ¨ WSL ä¸­æ„å‘³ç€ â€œPasteâ€ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;3&quot;&gt;
&lt;p&gt;è®¿é—®æºåˆ—è¡¨ä¸­æ¯ä¸ªç½‘å€å¹¶è¯»å–&lt;strong&gt;è½¯ä»¶åˆ—è¡¨&lt;/strong&gt;ï¼Œæœ€åæŠŠè¿™ä¸ªæ›´æ–°åçš„åˆ—è¡¨ä¿å­˜åœ¨æœ¬åœ°ç”µè„‘ï¼Œç”¨çš„å‘½ä»¤ä¸ºï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;sudo apt-get update
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¦æƒ³æŠŠæœ¬åœ°å·²å®‰è£…çš„&lt;strong&gt;è½¯ä»¶&lt;/strong&gt;ä¸è½¯ä»¶åˆ—è¡¨ä¸­å¯¹åº”è½¯ä»¶è¿›è¡Œå¯¹æ¯”ï¼Œå‘ç°éœ€è¦æ›´æ–°çš„æ–‡ä»¶ï¼Œç”¨ä¸‹é¢è¿™ä¸ªï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;sudo apt-get upgrade
&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;å›åˆ° home ç›®å½•æ˜¯ç”¨ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;cd ~
&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;WSL ä¼¼ä¹ä¸æ”¯æŒè¿™ä¸œè¥¿&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;# sudo apt-get install yum
&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li readability=&quot;21&quot;&gt;
&lt;p&gt;è¦æƒ³é‰´å®šä¸€ä¸ªç½‘ç«™æ˜¯å¦æ­£å¸¸è¿æ¥ï¼Œä½¿ç”¨å¦‚ä¸‹çš„å‘½ä»¤ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;ping XXX.com # &quot;Packet Internet Groper&quot;, as an example, use 'ping github.com'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™æ˜¯å·¥ä½œåœ¨ TCP/IP ç½‘ç»œä½“ç³»ç»“æ„ä¸­åº”ç”¨å±‚çš„ä¸€ä¸ªæœåŠ¡å‘½ä»¤ï¼Œ ä¸»è¦æ˜¯å‘ç‰¹å®šçš„ç›®çš„ä¸»æœºå‘é€ ICMPï¼ˆInternet Control Message Protocol å› ç‰¹ç½‘æŠ¥æ–‡æ§åˆ¶åè®®ï¼‰Echo è¯·æ±‚æŠ¥æ–‡ï¼Œæµ‹è¯•ç›®çš„ç«™æ˜¯å¦å¯è¾¾åŠäº†è§£å…¶æœ‰å…³çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;ç­‰å¾…ä¸€æ®µæ—¶é—´åï¼ˆä½ è®¤ä¸ºå·®ä¸å¤šåˆ°äº†ç»Ÿè®¡çš„æ€»æ—¶é•¿äº†ï¼‰ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœæ­¢ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;ctrl+C
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æœ€ç»ˆè¾“å‡ºåŸºæœ¬ä¸Šæ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­ï¼ˆgithub æœ‰ä¸€å®šçš„ä¸¢åŒ… a... ...ï¼‰ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-css&quot;&gt;PING github.com (140.82.113.3) 56(84) bytes of data.
64 bytes from github.com (140.82.113.3): icmp_seq=1 ttl=47 time=565 ms
64 bytes from github.com (140.82.113.3): icmp_seq=2 ttl=47 time=1062 ms
64 bytes from github.com (140.82.113.3): icmp_seq=3 ttl=47 time=389 ms
64 bytes from github.com (140.82.113.3): icmp_seq=4 ttl=47 time=513 ms
64 bytes from github.com (140.82.113.3): icmp_seq=5 ttl=47 time=434 ms
64 bytes from github.com (140.82.113.3): icmp_seq=6 ttl=47 time=607 ms
64 bytes from github.com (140.82.113.3): icmp_seq=7 ttl=47 time=373 ms
64 bytes from github.com (140.82.113.3): icmp_seq=8 ttl=47 time=401 ms
^C
--- github.com ping statistics ---
9 packets transmitted, 8 received, 11.1111% packet loss, time 8026ms
rtt min/avg/max/mdev = 372.733/542.963/1062.033/212.073 ms, pipe 2
&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li readability=&quot;3&quot;&gt;
&lt;p&gt;åªæœ‰ g++ ä¸è¶³ä»¥åœ¨ Linux ä¸Šé¢å¼€å¿ƒåœ°åšå¼€å‘ï¼Œæœ€å¥½åœ¨ä¸€åˆ‡çš„å¼€å§‹å…ˆè£…ä¸€ä¸‹ &lt;code&gt;build-essential&lt;/code&gt; è¿™ä¸ªåŒ…ï¼Œé‡Œé¢æœ‰å¾ˆå¤šä¾èµ–ï¼Œèƒ½å¤Ÿä½¿ç¼ºçœçš„ Ubuntu å…·å¤‡ C/C++ çš„ç¼–è¯‘ç¯å¢ƒï¼Œè¿è¡Œï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;sudo apt-get install build-essential
&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;Node Package Managerï¼ˆnpmï¼‰èƒ½å¤ŸåŠ å¿«ä¸‹è½½è½¯ä»¶åŒ…çš„é€Ÿåº¦ï¼ˆ?ï¼‰ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;sudo apt install npm
&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;æƒ³è¦çœ‹çœ‹å¯ä»¥å‡çº§çš„è½¯ä»¶ä»¥åŠå®ƒä»¬çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œä½¿ç”¨ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;apt list --upgradable -a
&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;ç›´æ¥ Kill å½“å‰è¿›ç¨‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;ctrl+C
&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li readability=&quot;5&quot;&gt;
&lt;p&gt;ä¸€ç§ä¸´æ—¶ç»™äºˆæƒé™çš„æ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;sudo chmod 777 /dev/ttyUSB*
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç›¸åº”çš„ï¼Œå¦‚æœæƒ³è¦ç»™ä¸²å£ä¸€ä¸ªæ°¸ä¹…æƒé™ï¼Œä½¿ç”¨ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;sudo usermod -a -G dialout user_name
&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li readability=&quot;3&quot;&gt;
&lt;p&gt;å¯»æ‰¾åŒ…çš„ä½ç½®ï¼Œ&lt;code&gt;mlocate&lt;/code&gt; å¯ä»¥ç”¨æ¥å®šä½è½¯ä»¶åŒ…ï¼Œä½¿ç”¨ &lt;code&gt;locate&lt;/code&gt; å‘½ä»¤ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;sudo apt-get mlocate
sudo apt-get install mlocate
sudo updatedb
locate eigen3
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å°±å¯ä»¥è¾“å‡º &lt;code&gt;eigen3&lt;/code&gt; çš„ä½ç½®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;doxygen ç¼–è¯‘æ–‡æ¡£çš„æ–¹æ³•ï¼Œä¸‹è½½å¹¶ &lt;code&gt;make doc&lt;/code&gt; å°±å¯ä»¥ç¼–è¯‘å‡ºä¸€ä¸ª &lt;code&gt;doxygen&lt;/code&gt; æ–‡æ¡£ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;sudo apt-get install doxygen
make doc
&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;é…ç½®ä¸€ä¸ªæ¯”è¾ƒæ¼‚äº®çš„shell&quot;&gt;&lt;strong&gt;é…ç½®ä¸€ä¸ªæ¯”è¾ƒæ¼‚äº®çš„Shell&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;å¯ä»¥é€šè¿‡ &lt;code&gt;cat&lt;/code&gt; æ¥æŸ¥çœ‹å½“å‰çš„ Linux ç³»ç»Ÿæ˜¯å¦æœ‰å¯ç”¨çš„ shellï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;cat /etc/shells
sudo apt-get install zsh
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å®‰è£…å®Œåï¼Œshells ä¸­å°†å‡ºç° &lt;code&gt;zsh&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;# /etc/shells: valid login shells
/bin/sh
/bin/bash
/usr/bin/bash
/bin/rbash
/usr/bin/rbash
/bin/dash
/usr/bin/dash
/usr/bin/tmux
/usr/bin/screen
/bin/zsh
/usr/bin/zsh
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;emmmm... ... è¦å®‰è£…çš„å°±æ˜¯å«åš zsh çš„ä¸œè¥¿ï¼Œå¯ä»¥æŠŠå‘½ä»¤è¡Œå¼„å¾—å¥½çœ‹ä¸€äº›ï¼Œ&lt;s&gt;å¯¹äºæé«˜å·¥ä½œæ•ˆç‡æœ‰å¾ˆå¥½çš„ä¿ƒè¿›ä½œç”¨&lt;/s&gt;ï¼Œå®‰è£…æ­¥éª¤å¾ˆç®€å•ï¼Œç›´æ¥è¿è¡Œï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;sudo apt-get install zsh
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç„¶ååˆ‡æ¢å½“å‰ shell è‡³ zsh å°±æˆåŠŸäº†ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;chsh -s /bin/zsh
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ›´æ–°åä¼šè¾“å‡ºä¸€ä¸ªï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;# Updated process:[oh-my-zsh] Would you like to update? [Y/n] Y
Updating Oh My Zsh ...

remote: Enumerating objects: 154, done.
remote: Counting objects: 100% (154/154), done.
remote: Compressing objects: 100% (78/78), done.
remote: Total 116 (delta 69), reused 84 (delta 38), pack-reused 0
Receiving objects: 100% (116/116), 27.17 KiB | 11.00 KiB/s, done.
Resolving deltas: 100% (69/69), completed with 24 local objects.
From https://github.com/ohmyzsh/ohmyzsh
 * branch            master     -&amp;gt; FETCH_HEAD
   93c837f..c549387  master     -&amp;gt; origin/master
 README.md                                      |  61 +++---
 lib/functions.zsh                              |   4 +-
 lib/termsupport.zsh                            |  12 +-
 plugins/aws/aws.plugin.zsh                     |   1 -
 plugins/bgnotify/bgnotify.plugin.zsh           |   2 +-
 plugins/brew/README.md                         |   7 +-
 plugins/brew/brew.plugin.zsh                   |   1 +
 plugins/bundler/README.md                      |  79 +++++---
 plugins/bundler/bundler.plugin.zsh             | 116 ++++++-----
 plugins/compleat/compleat.plugin.zsh           |   7 +-
 plugins/composer/composer.plugin.zsh           |   2 +
 plugins/drush/drush.plugin.zsh                 |   2 -
 plugins/git/git.plugin.zsh                     |  14 +-
 plugins/ipfs/LICENSE                           |  22 ++
 plugins/ipfs/README.md                         |  17 ++
 plugins/ipfs/_ipfs                             | 717 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 plugins/laravel5/laravel5.plugin.zsh           |  19 +-
 plugins/minikube/minikube.plugin.zsh           |  10 +-
 plugins/pip/pip.plugin.zsh                     |   6 +-
 plugins/stack/stack.plugin.zsh                 |   1 -
 plugins/sublime-merge/README.md                |  17 ++
 plugins/sublime-merge/sublime-merge.plugin.zsh |  55 +++++
 plugins/terraform/README.md                    |   3 +-
 plugins/terraform/terraform.plugin.zsh         |   2 +
 plugins/wp-cli/wp-cli.plugin.zsh               |   1 -
 themes/agnoster.zsh-theme                      |   2 +-
 themes/avit.zsh-theme                          |   4 +-
 27 files changed, 1017 insertions(+), 167 deletions(-)
 create mode 100644 plugins/ipfs/LICENSE
 create mode 100644 plugins/ipfs/README.md
 create mode 100644 plugins/ipfs/_ipfs
 create mode 100644 plugins/sublime-merge/README.md
 create mode 100644 plugins/sublime-merge/sublime-merge.plugin.zsh
First, rewinding head to replay your work on top of it...
Fast-forwarded master to c549387745205d7fa8e91c1e6dcdae6901d9dd1d.
         __                                     __
  ____  / /_     ____ ___  __  __   ____  _____/ /_
 / __ \/ __ \   / __ `__ \/ / / /  /_  / / ___/ __ \
/ /_/ / / / /  / / / / / / /_/ /    / /_(__  ) / / /
\____/_/ /_/  /_/ /_/ /_/\__, /    /___/____/_/ /_/
                        /____/
Hooray! Oh My Zsh has been updated and/or is at the current version.
To keep up on the latest news and updates, follow us on Twitter: https://twitter.com/ohmyzsh
Want to get involved in the community? Join our Discord: https://discord.gg/ohmyzsh
Get your Oh My Zsh swag at: https://shop.planetargon.com/collections/oh-my-zsh
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ‰“å¼€æ–‡ä»¶ &lt;code&gt;.zshrc&lt;/code&gt;ï¼Œæ›´æ”¹ &lt;code&gt;ZSH_THEME=&lt;/code&gt; è‡³ &lt;code&gt;ZSH_THEME=&quot;agnoster&quot;&lt;/code&gt;ï¼Œæ‰“å¼€çš„æ–¹æ³•å¦‚ä¸‹ï¼ˆç”¨ Nano ç¼–è¾‘ï¼‰ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;sh -c &quot;$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&quot;
nano ~/.zshrc
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å®é™…ä¸Šï¼Œæ­¤æ—¶ &lt;code&gt;reboot&lt;/code&gt; åçœ‹åˆ°çš„æ˜¯å¥‡æ€ªçš„æ ·å¼ï¼Œéœ€è¦è°ƒæ•´å­—ä½“æ‰èƒ½è®©å®ƒæ­£å¸¸èµ·æ¥ï¼Œè¿›å…¥å®˜ç½‘ä¸‹è½½ç›¸åº”çš„å­—ä½“ï¼Œç›´æ¥åŒå‡»å®‰è£…åï¼Œåœ¨ WSL å‘½ä»¤è¡Œçª—å£ç›´æ¥ &lt;code&gt;å³é”®-&amp;gt;å±æ€§-&amp;gt;å­—ä½“&lt;/code&gt; å¹¶æ›´æ”¹å­—ä½“çš„æ ·å¼å³å¯ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è¾“å‡ºæ–‡ä»¶æ ‘è§†å›¾åˆ°txtï¼ˆwindows-ç‰ˆæœ¬ï¼‰&quot;&gt;&lt;strong&gt;è¾“å‡ºæ–‡ä»¶æ ‘è§†å›¾åˆ°.txtï¼ˆWindows ç‰ˆæœ¬ï¼‰&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;æ‰“å¼€&quot;è¿è¡Œ&quot;å¯¹è¯æ¡†ï¼ˆWin+Rï¼‰ï¼Œè¾“å…¥ cmdï¼Œæ‰“å¼€æ§åˆ¶å°å‘½ä»¤çª—å£...&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;C:\Users\a1020&amp;gt;g:
G:\&amp;gt;cd \__BiBliOthÃ¨QuE__
G:\__BiBliOthÃ¨QuE__&amp;gt;tree /f &amp;gt; saved_names.txt
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Linux ä¸­åšè¿™ä»¶äº‹ä¼¼ä¹éœ€è¦ä¸‹é¢è¿™ä¸ªä¸œè¥¿ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;sudo apt-get install tree
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™ä¸ªå¼„å‡ºæ¥ä¹Ÿè›®å¥½çœ‹çš„ï¼Œåœ¨è·¯å¾„ä¸­è¾“å…¥ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;tree
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¾—åˆ°äº†ä¸‹é¢ä¸€æ£µå¾ˆ happy çš„æ ‘å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2137921/202102/2137921-20210211215839887-1386898562.jpg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;å€ŸåŠ©-wsl-èµ°è¿›-vslamçš„ä¸–ç•Œ&quot;&gt;&lt;strong&gt;å€ŸåŠ© WSL èµ°è¿› VSLAMçš„ä¸–ç•Œ&lt;/strong&gt;&lt;/h2&gt;
&lt;h3 id=&quot;wsl-æŒ‚è½½-windowsæ–‡ä»¶&quot;&gt;&lt;strong&gt;WSL æŒ‚è½½ Windowsæ–‡ä»¶&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;WSL æ˜¯å¯ä»¥è®¿é—® Windows ä¸­çš„æ–‡ä»¶çš„ï¼Œé™¤äº†è½¯ä»¶è¦å®‰è£…åœ¨æ ¹ç›®å½•ï¼ˆ?ï¼‰ï¼Œå…¶å®ƒçš„æ–‡ä»¶ä¾‹å¦‚å„ç§ä»£ç ã€æ•°æ®æ–‡ä»¶ä»€ä¹ˆçš„éƒ½å¸Œæœ›å¯ä»¥æ”¾åœ¨åˆ«çš„åœ°æ–¹ï¼Œç”±æ­¤ï¼Œå¯ä»¥åˆ‡æ¢è·¯å¾„åˆ°è‡ªå·±å–œæ¬¢çš„ç›®å½•é‡Œé¢ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;cd /mnt/c/Users/a1020/Desktop/Reinforcement_ELyou/Demolist/slamdemo
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;ä¸‹è½½-slamdemo-æ–‡ä»¶ã€å®‰è£…-cmakeã€hello-slam&quot;&gt;&lt;strong&gt;ä¸‹è½½ SLAMdemo æ–‡ä»¶ã€å®‰è£… cmakeã€Hello SLAM&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;ä» Gitee ä¸­æŠŠç›®æ ‡æ–‡ä»¶ clone ä¸‹æ¥ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;git clone https://gitee.com/wenyawei/slambook.git
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å®‰è£… cmake çš„è¿‡ç¨‹è¿˜æ˜¯åƒä»¥å¾€ä¸€æ ·ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;sudo apt-get install cmake
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å®Œäº‹ä¹‹åéšä¾¿æ¥ä¸€ä¸‹ &lt;code&gt;cmake&lt;/code&gt; å‘½ä»¤ï¼Œå¯ä»¥è¾“å‡ºä¸€äº›å¥‡å¥‡æ€ªæ€ªçš„ä¸œè¥¿ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;Usage

  cmake [options] &amp;lt;path-to-source&amp;gt;
  cmake [options] &amp;lt;path-to-existing-build&amp;gt;
  cmake [options] -S &amp;lt;path-to-source&amp;gt; -B &amp;lt;path-to-build&amp;gt;

Specify a source directory to (re-)generate a build system for it in the
current working directory.  Specify an existing build directory to
re-generate its build system.

Run 'cmake --help' for more information.
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ¥ä¸‹æ¥æŠŠè·¯å¾„åˆ‡åˆ° &lt;code&gt;slambook/ch2&lt;/code&gt;ï¼Œç”¨g++ç¼–è¯‘ä¸€ä¸‹ &lt;code&gt;helloSLAM.cpp&lt;/code&gt;ï¼Œå¹¶è¿è¡Œç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ &lt;code&gt;a.out&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;cd slambook/ch2
g++ helloSLAM.cpp
./a.out
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¾—åˆ°å¦‚ä¸‹æ‰€ç¤º &lt;code&gt;Hello SLAM!&lt;/code&gt; çš„è¾“å‡ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2137921/202102/2137921-20210211215853342-1417613654.jpg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;å®‰è£…-eigenã€æ£€æµ‹æ˜¯å¦æˆåŠŸ&quot;&gt;&lt;strong&gt;å®‰è£… Eigenã€æ£€æµ‹æ˜¯å¦æˆåŠŸ&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;ç›´æ¥é‡‡ç”¨ &lt;code&gt;apt-get&lt;/code&gt; å®‰è£…ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;sudo apt-get install libeigen3-dev
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä»å‰é¢çš„è·¯å¾„å›é€€ä¸€ä½ï¼Œå¹¶åˆ‡æ¢åˆ° &lt;code&gt;ch3/useEigen&lt;/code&gt; çš„è·¯å¾„ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;cd ..
cd ch3/useEigen
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;cmake&lt;/code&gt; è¿›è¡Œç¼–è¯‘ï¼Œå¹¶è¿è¡Œï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;cmake .
make
./eigenMatrix
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¾“å‡ºä¸ºï¼ˆ...ï¼‰ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;1 2 3
4 5 6
1       2       3
4       5       6
10
28
32
77
 0.680375   0.59688 -0.329554
-0.211234  0.823295  0.536459
 0.566198 -0.604897 -0.444451

 0.680375 -0.211234  0.566198
  0.59688  0.823295 -0.604897
-0.329554  0.536459 -0.444451
1.61307
1.05922
 6.80375   5.9688 -3.29554
-2.11234  8.23295  5.36459
 5.66198 -6.04897 -4.44451
-0.198521   2.22739    2.8357
  1.00605 -0.555135  -1.41603
 -1.62213   3.59308   3.28973
0.208598
Eigen values =
0.0242899
 0.992154
  1.80558
Eigen vectors =
-0.549013 -0.735943  0.396198
 0.253452 -0.598296 -0.760134
-0.796459  0.316906 -0.514998
time use in normal inverse is 0ms
time use in Qr decomposition is 0ms
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;å®‰è£…-pangolinã€æ£€æµ‹æ˜¯å¦æˆåŠŸ&quot;&gt;&lt;strong&gt;å®‰è£… Pangolinã€æ£€æµ‹æ˜¯å¦æˆåŠŸ&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;è¯¦ç»†å®‰è£…æ­¥éª¤ä»¥åŠæ£€æµ‹è§æˆ‘çš„ &lt;a href=&quot;https://www.cnblogs.com/optics-css/p/14374766.html&quot; target=&quot;_blank&quot;&gt;&lt;strong&gt;Pangolin Installation &amp;amp; Examination&lt;/strong&gt;&lt;/a&gt; æ•™ç¨‹ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å®‰è£…-sophusã€æ£€æµ‹æ˜¯å¦æˆåŠŸ&quot;&gt;&lt;strong&gt;å®‰è£… Sophusã€æ£€æµ‹æ˜¯å¦æˆåŠŸ&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;å’Œä¹‹å‰ä¸€æ ·ï¼Œç›´æ¥åˆ‡å…¥è½¯ä»¶åŒ…çš„ç›®å½•è¿›è¡Œç¼–è¯‘ï¼ŒæŒ‡ä»¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;cd /mnt/c/Users/a1020/Desktop/Reinforcement_ELyou/Demolist/slamdemo/slambook/3rdparty/Sophus
mkdir build
cd build
cmake ..
make
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç„¶å&lt;s&gt;å¼€å¿ƒåœ°&lt;/s&gt;å‘ç°ç«Ÿç„¶æœ‰ç¼–è¯‘é”™è¯¯ï¼ï¼å…·ä½“é”™è¯¯ä¸ºï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;/mnt/c/Users/a1020/Desktop/Reinforcement_ELyou/Demolist/slamdemo/slambook/3rdparty/sophus/sophus/so2.cpp: In constructor â€˜Sophus::SO2::SO2()â€™:
/mnt/c/Users/a1020/Desktop/Reinforcement_ELyou/Demolist/slamdemo/slambook/3rdparty/sophus/sophus/so2.cpp:32:26: error: lvalue required as left operand of assignment
   32 |   unit_complex_.real() = 1.;
      |                          ^~
/mnt/c/Users/a1020/Desktop/Reinforcement_ELyou/Demolist/slamdemo/slambook/3rdparty/sophus/sophus/so2.cpp:33:26: error: lvalue required as left operand of assignment
   33 |   unit_complex_.imag() = 0.;
      |                          ^~
make[2]: *** [CMakeFiles/Sophus.dir/build.make:66: CMakeFiles/Sophus.dir/sophus/so2.cpp.o] Error 1
make[2]: Leaving directory '/mnt/c/Users/a1020/Desktop/Reinforcement_ELyou/Demolist/slamdemo/slambook/3rdparty/sophus/build'
make[1]: *** [CMakeFiles/Makefile2:91: CMakeFiles/Sophus.dir/all] Error 2
make[1]: Leaving directory '/mnt/c/Users/a1020/Desktop/Reinforcement_ELyou/Demolist/slamdemo/slambook/3rdparty/sophus/build'
make: *** [Makefile:144: all] Error 2
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;äºæ˜¯å»å¯»æ‰¾è·¯å¾„ä¸‹åä¸º &lt;code&gt;so2.cpp&lt;/code&gt; çš„æºæ–‡ä»¶ï¼Œæ‰¾åˆ°å¦‚ä¸‹ä»£ç ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c++&quot;&gt;SO2::SO2()
{
unit_complex_.real() = 1.;
unit_complex_.imag() = 0.;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ˜¾ç„¶è¿™ç§èµ‹å€¼æ–¹å¼æ˜¯ XXX çš„ï¼Œåº”è¯¥ç”¨å®å‚çš„å½¢å¼èµ‹å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ”¹æˆä¸‹é¢çš„å½¢å¼ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c++&quot;&gt;SO2::SO2()
{
//unit_complex_.real() = 1.;
//unit_complex_.imag() = 0.;
unit_complex_.real(1.);
unit_complex_.imag(0.);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç„¶åé‡æ–°ç¼–è¯‘ä¸€ä¸‹ï¼Œå°±é€šè¿‡äº†ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;/usr/bin/cmake -E cmake_progress_start /mnt/c/Users/a1020/Desktop/Reinforcement_ELyou/Demolist/slamdemo/slambook/3rdparty/sophus/build/CMakeFiles 0
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ¥ç€çš„ä½¿ç”¨ä¸­ä¼šé‡åˆ°çš„éº»çƒ¦äº‹æ˜¯æ‰¾ä¸åˆ° &lt;code&gt;Sophus&lt;/code&gt; åº“ï¼Œéœ€è¦æŠŠ &lt;code&gt;CMakeLists.txt&lt;/code&gt; é‡Œé¢å†™ä¸Šä½ å®‰è£…çš„ &lt;code&gt;Sophus&lt;/code&gt; åº“çš„å¤´æ–‡ä»¶è·¯å¾„ä»¥åŠå…±äº«åº“çš„è·¯å¾„ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cmake&quot;&gt;# Use the set(Â·) command to input the directories of Sophus
set(Sophus_INCLUDE_DIRS &quot;/mnt/c/Users/a1020/Desktop/Reinforcement_ELyou/Demolist/slamdemo/slambook/3rdparty/Sophus/sophus&quot;)
set(Sophus_LIBS &quot;/mnt/c/Users/a1020/Desktop/Reinforcement_ELyou/Demolist/slamdemo/slambook/3rdparty/Sophus/build/libSophus.so&quot;)
find_package(Sophus REQUIRED)
include_directories(
${Sophus_INCLUDE_DIRS}
)
target_link_libraries(useSophus ${Sophus_LIBRARIES})
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å’³å’³ï¼Œä¸Šé¢æ˜¯éæ¨¡æ¿ &lt;code&gt;Sophus&lt;/code&gt; çš„å®‰è£…å’Œä½¿ç”¨ï¼Œï¼Œä¸‹é¢æ‰æ˜¯æ¨¡æ¿åº“çš„ï¼Œå‘½ä»¤è¡Œå¦‚ä¸‹ï¼ˆè®°å¾—ä¸è¦å›æ»šï¼‰ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;git clone https://github.com/strasdat/Sophus.git
cd /mnt/c/Users/a1020/Desktop/Reinforcement_ELyou/Demolist/slamdemo/slambook/3rdparty/SophusTemplate
mkdir build
cd build
cmake ..
make
sudo make install
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¹¶æ²¡æœ‰ä»»ä½•ç¼–è¯‘é”™è¯¯ï¼Œè¿™æ ·ä¸€ä¸‹å­å®‰è£…ä¸‹æ¥å°±æ˜¯åªæœ‰å¤´æ–‡ä»¶çš„ &lt;code&gt;Sophus&lt;/code&gt;ï¼Œå°±åƒ &lt;code&gt;eigen3&lt;/code&gt; ä¸€æ ·çš„ï¼Œå®ƒå’Œéæ¨¡æ¿åº“çš„åŒºåˆ«åœ¨äºï¼Œè¿™ä¸ªé‡Œé¢çš„ç±»å‹å®šä¹‰éƒ½æ˜¯åŸºäºæ¨¡æ¿çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæœ‰æ›´å¼ºçš„æ³›åŒ–æ€§èƒ½ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å®‰è£…-ceresã€g2oã€æ£€æµ‹æ˜¯å¦æˆåŠŸ&quot;&gt;&lt;strong&gt;å®‰è£… Ceresã€g2oã€æ£€æµ‹æ˜¯å¦æˆåŠŸ&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;åŒå‰ï¼Œé¦–å…ˆåº”å½“å®‰è£…ä¾èµ–ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;sudo apt-get install qt5-qmake qt5-default libqglviewer-dev-qt5        libsuitesparse-dev libcxsparse3 libcholmod3
sudo apt-get install liblapack-dev libsuitesparse-dev libcxsparse3 libgflags-dev libgoogle-glog-dev libgtest-dev
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç„¶åè¿›å…¥ç¼–è¯‘ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;git clone https://github.com/RainerKuemmerle/g2o.git
sudo apt-get install libsuitesparse-dev qtdeclarative5-dev qt5-qmake libqglviewer-dev-qt5
sudo su
cd g2o
mkdir build
cd build
cmake ../
make -j8
sudo make install
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é‡åˆ°äº†ç¼–è¯‘é”™è¯¯ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;/usr/lib/qt5/bin/uic: error while loading shared libraries: libQt5Core.so.5: cannot open shared object file: No such file or directory
make[2]: *** [g2o/apps/g2o_viewer/CMakeFiles/viewer_library.dir/build.make:62: g2o/apps/g2o_viewer/ui_base_main_window.h] Error 127
make[1]: *** [CMakeFiles/Makefile2:1580: g2o/apps/g2o_viewer/CMakeFiles/viewer_library.dir/all] Error 2
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æŸ¥äº†ä¸€ä¸‹ï¼Œè¿™ä¸ªé”™è¯¯åä¸º &lt;code&gt;error while loading shared libraries: libQt5Core.so.5: cannot open shared object file: No such file or directory&lt;/code&gt;ï¼Œè¿˜å¥½è¿˜å¥½ï¼Œæœ‰ä¸ª&lt;a href=&quot;https://github.com/dnschneid/crouton/wiki/Fix-error-while-loading-shared-libraries:-libQt5Core.so.5&quot; target=&quot;_blank&quot;&gt;&lt;strong&gt;è§£å†³æ€è·¯&lt;/strong&gt;&lt;/a&gt;å¸®åŠ©æˆ‘æˆåŠŸè§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œä¼¼ä¹ä¸º WSL ç‰¹æœ‰çš„ï¼Œè¿è¡Œå¦‚ä¸‹è¯­å¥åå†è¿›è¡Œç¼–è¯‘å°±å¯ä»¥äº†ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;sudo strip --remove-section=.note.ABI-tag /usr/lib/x86_64-linux-gnu/libQt5Core.so.5
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¼€äº†7ä¸ªçº¿ç¨‹ï¼ŒèŠ±äº†å¾—æœ‰æ¥è¿‘ 3~4 min å­æ‰å¼„å®Œï¼Œä½†æ˜¯å®Œäº†å°±å¥½å®Œäº†å°±å¥½ï¼Œæœ€ååˆ«å¿˜äº† &lt;code&gt;sudo make install&lt;/code&gt; ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;ç”¨ &lt;code&gt;g2o_viewer&lt;/code&gt; run ä¸€ä¸‹ &lt;code&gt;sphere.g2o&lt;/code&gt; æ¥è¯æ˜ä¸€ä¸‹å·²ç»ä¸‹è½½å®Œæˆï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;./g2o/bin/g2o_viewer /mnt/c/Users/a1020/Desktop/Reinforcement_ELyou/Demolist/slamdemo/slambook/3rdparty/ch10/sphere.g2o
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸€ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹æ˜¯ï¼Œæœ€å¥½åˆ«åœ¨åˆ«çš„ä½ç½®ç¼–è¯‘ &lt;code&gt;g2o&lt;/code&gt; åº“ï¼Œå¯èƒ½ä¼šæŠ¥é”™å‘Šè¯‰ä½ è·¯å¾„é‡Œæœ‰ä¸­æ–‡ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å®‰è£…-opencv44ã€æ£€æµ‹æ˜¯å¦æˆåŠŸ&quot;&gt;&lt;strong&gt;å®‰è£… OpenCV4.4ã€æ£€æµ‹æ˜¯å¦æˆåŠŸ&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;è¯¦ç»†å®‰è£…æ­¥éª¤ä»¥åŠæ£€æµ‹è§æˆ‘çš„ &lt;a href=&quot;https://www.cnblogs.com/optics-css/p/14374694.html&quot; target=&quot;_blank&quot;&gt;&lt;strong&gt;OpenCV4.4.0 Installation &amp;amp; Examination&lt;/strong&gt;&lt;/a&gt; æ•™ç¨‹ã€‚&lt;/p&gt;
&lt;h2 id=&quot;cmakeã€g&quot;&gt;&lt;strong&gt;Cmakeã€g++&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;åœ¨ WSL ä¸­ä½¿ç”¨ g++ æ‰“å°è™šè¡¨çš„æ“ä½œå¦‚ä¸‹ï¼Œä¼šè‡ªåŠ¨å†™åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;g++ -fdump-class-hierarchy XXX.cpp
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½¿ç”¨ g++ å¯¼å‡ºç»§æ‰¿ç»“æ„çš„æŒ‡ä»¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;g++ -fdump-class-hierarchy -c XXX.cpp
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;cmake-çš„ç®€å•ç”¨æ³•&quot;&gt;&lt;strong&gt;Cmake çš„ç®€å•ç”¨æ³•&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;æ„å»º CMakeList.txt å¦‚ä¸‹ï¼Œæ³¨æ„ä¸€å®šè¦æŠŠä¿å­˜çš„ç¼–ç æ ¼å¼æ”¹æˆ &lt;code&gt;UTF8&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cmake&quot;&gt;# The lowest version required
cmake_minimum_required( VERSION 2.8 )
# Project name
project( HelloSLAM )
# The executable file addition
add_executable( helloSLAM helloSLAM.cpp )
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨ç»ˆç«¯è¾“å…¥ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;# Path to slambook/ch2
cd /mnt/c/Users/a1020/Desktop/Reinforcement_ELyou/Demolist/slamdemo/slambook/ch2
# CMake, the current path
cmake .
make
# Run the executable file
./helloSLAM
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯ä»¥é€šè¿‡æ–°å»ºå¹¶åˆ‡æ¢åˆ° &lt;code&gt;build&lt;/code&gt; æ–‡ä»¶å¤¹ï¼Œå¹¶å¯¹äºä¸Šä¸€ä¸ªæ–‡ä»¶å¤¹è¿›è¡Œç¼–è¯‘ï¼Œå°±å¯ä»¥å°† cmake ç¼–è¯‘æ—¶äº§ç”Ÿçš„æ–‡ä»¶ç”Ÿæˆåœ¨ &lt;code&gt;build&lt;/code&gt; é‡Œé¢ï¼Œè¿™æ ·æœ‰åˆ©äºæºä»£ç çš„å‘å¸ƒï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;mkdir build
cd build
cmake ..
make
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ³¨æ„æ¯æ¬¡ç¼–è¯‘æ—¶éƒ½è®°å¾—æŠŠä»¥å‰çš„ Makefile åˆ é™¤ã€‚&lt;/p&gt;
&lt;h2 id=&quot;python-çš„ç®€å•ç”¨ä¾‹&quot;&gt;&lt;strong&gt;Python çš„ç®€å•ç”¨ä¾‹&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;å­¦ä¼šç”¨å‘½ä»¤è¡Œè°ƒç”¨ &lt;code&gt;Python&lt;/code&gt; æ ‡å‡†åº“çš„ &lt;code&gt;doctest&lt;/code&gt;ï¼Œä»è€Œç”Ÿæˆä»£ç çš„åˆ†ææ–‡ä»¶ï¼Œé¦–å…ˆè‡ªç„¶æ˜¯åˆ‡æ¢åˆ°ç›¸åº”çš„è·¯å¾„ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;cd /mnt/c/Users/a1020/Desktop/Reinforcement_ELyou/#Pythonic/Fluent-Python/01-data-model
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿è¡Œä¸‹é¢çš„æŒ‡ä»¤ï¼Œè°ƒç”¨ &lt;code&gt;doctest&lt;/code&gt;ï¼Œå¯ä»¥è·å¾—ä¸€ä¸ªåä¸º &lt;code&gt;frenchdeck.doctest&lt;/code&gt; çš„æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot;&gt;python3 -m doctest frenchdeck.py
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ–‡ä»¶å†…å®¹ä¸ºä»£ç çš„åˆ†æï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; from frenchdeck import FrenchDeck, Card
&amp;gt;&amp;gt;&amp;gt; beer_card = Card('7', 'diamonds')
&amp;gt;&amp;gt;&amp;gt; beer_card
Card(rank='7', suit='diamonds')
&amp;gt;&amp;gt;&amp;gt; deck = FrenchDeck()
&amp;gt;&amp;gt;&amp;gt; len(deck)
52
&amp;gt;&amp;gt;&amp;gt; deck[:3]
[Card(rank='2', suit='spades'), Card(rank='3', suit='spades'), Card(rank='4', suit='spades')]
&amp;gt;&amp;gt;&amp;gt; deck[12::13]
[Card(rank='A', suit='spades'), Card(rank='A', suit='diamonds'), Card(rank='A', suit='clubs'), Card(rank='A', suit='hearts')]
&amp;gt;&amp;gt;&amp;gt; Card('Q', 'hearts') in deck
True
&amp;gt;&amp;gt;&amp;gt; Card('Z', 'clubs') in deck
False
&amp;gt;&amp;gt;&amp;gt; for card in deck:  # doctest: +ELLIPSIS
...   print(card)
Card(rank='2', suit='spades')
Card(rank='3', suit='spades')
Card(rank='4', suit='spades')
...
&amp;gt;&amp;gt;&amp;gt; for card in reversed(deck):  # doctest: +ELLIPSIS
...   print(card)
Card(rank='A', suit='hearts')
Card(rank='K', suit='hearts')
Card(rank='Q', suit='hearts')
...
&amp;gt;&amp;gt;&amp;gt; for n, card in enumerate(deck, 1):  # doctest: +ELLIPSIS
...   print(n, card)
1 Card(rank='2', suit='spades')
2 Card(rank='3', suit='spades')
3 Card(rank='4', suit='spades')
...
&amp;gt;&amp;gt;&amp;gt; suit_values = dict(spades=3, hearts=2, diamonds=1, clubs=0)
&amp;gt;&amp;gt;&amp;gt; def spades_high(card):
...     rank_value = FrenchDeck.ranks.index(card.rank)
...     return rank_value * len(suit_values) + suit_values[card.suit]

Rank test:

&amp;gt;&amp;gt;&amp;gt; spades_high(Card('2', 'clubs'))
0
&amp;gt;&amp;gt;&amp;gt; spades_high(Card('A', 'spades'))
51

&amp;gt;&amp;gt;&amp;gt; for card in sorted(deck, key=spades_high):  # doctest: +ELLIPSIS
...      print(card)
Card(rank='2', suit='clubs')
Card(rank='2', suit='diamonds')
Card(rank='2', suit='hearts')
...
Card(rank='A', suit='diamonds')
Card(rank='A', suit='hearts')
Card(rank='A', suit='spades')
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;</description>
<pubDate>Thu, 11 Feb 2021 14:00:00 +0000</pubDate>
<dc:creator>Optics_css</dc:creator>
<og:description>ä»¥ Windows Subsystem for Linux é—¯å…¥ Visual Simultaneous Localization and Mapping ä¸–ç•Œçš„è‰°éš¾é“è·¯... è¿™é‡ŒåŒ…å«å„ç§å„æ ·çš„ W</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/optics-css/p/14398226.html</dc:identifier>
</item>
<item>
<title>ç»™ä½ çš„SpringBooté¡¹ç›®å®šåˆ¶ä¸€ä¸ªç‰›å¹´ä¸“å±bannerå§ - ä¸‰åˆ†æ¶</title>
<link>http://www.cnblogs.com/three-fighter/p/14398203.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/three-fighter/p/14398203.html</guid>
<description>&lt;center&gt;&lt;span&gt;æ–°æ˜¥å¿«ä¹ï¼Œç‰›å¹´å¤§å‰ï¼&lt;/span&gt;&lt;/center&gt;
&lt;p&gt;æ–°çš„ä¸€å¹´æ˜¯ç‰›å¹´ï¼Œåœ¨SpringBooté¡¹ç›®é‡Œè‡ªå®šä¹‰äº†ä¸€ä¸ªç‰›å¹´ç›¸å…³çš„bannerï¼Œçœ‹èµ·æ¥å¯çœŸä¸é”™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/sanfene/picgo/raw/master/image-20210211205052600.png&quot; alt=&quot;image-20210211205052600&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šé¢æ˜¯è‡ªå·±åˆ¶ä½œçš„ä¸€ä¸ªbannerï¼Œç›¸å…³çš„ASCIIå­—ç¬¦åœ¨æ–‡æœ«ã€‚&lt;/p&gt;
&lt;p&gt;SpringBooté¡¹ç›®è‡ªå®šä¹‰banneréå¸¸ç®€å•ï¼Œé€šè¿‡åœ¨classpathä¸‹æ·»åŠ ä¸€ä¸ªbanner.txtæˆ–è®¾ç½®banner.locationæ¥æŒ‡å®šç›¸åº”çš„æ–‡ä»¶å¯ä»¥æ”¹å˜å¯åŠ¨è¿‡ç¨‹ä¸­æ‰“å°çš„bannerã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;å¦‚æœæƒ³ä»¥ç¼–ç¨‹çš„æ–¹å¼äº§ç”Ÿä¸€ä¸ªbannerï¼Œå¯ä»¥ä½¿ç”¨SpringBootApplication.setBanner(â€¦)æ–¹æ³•ã€‚ä½¿ç”¨org.springframework.boot.Banneræ¥å£ï¼Œå®ç°ä½ è‡ªå·±çš„printBanner()æ–¹æ³•ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¥½äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹æ€ä¹ˆä¸€æ­¥æ­¥åˆ¶ä½œç‰›å¹´çš„ä¸“å±bannerã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;åœ¨resourceç›®å½•ä¸‹åˆ›å»º &lt;code&gt;banner.txt&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://gitee.com/sanfene/picgo/raw/master/image-20210211205807631.png&quot; alt=&quot;image-20210211205807631&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä½¿ç”¨å›¾ç‰‡è½¬ASCII&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;åšä¸»ä»ç½‘ä¸Šæ‰¾äº†ä¸€å¼ å›¾ç‰‡&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/sanfene/picgo/raw/master/image-20210211210628625.png&quot; alt=&quot;image-20210211210628625&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨å›¾ç‰‡è½¬ASCIIçš„ç½‘ç«™æœ‰å¾ˆå¤šï¼Œåšä¸»å°è¯•äº†ä¸å°‘ï¼Œè§‰å¾—æ¯”è¾ƒå¥½ç”¨çš„æœ‰ä¸‹é¢å‡ ä¸ªï¼š&lt;/p&gt;
&lt;p&gt;âœ” &lt;a href=&quot;https://www.twitchquotes.com/ascii-art-generator&quot; target=&quot;_blank&quot;&gt;https://www.twitchquotes.com/ascii-art-generator&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;âœ” &lt;a href=&quot;https://codebeautify.org/image-to-ascii-art&quot; target=&quot;_blank&quot;&gt;https://codebeautify.org/image-to-ascii-art&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;âœ” &lt;a href=&quot;https://www.fontke.com/tool/image2ascii/&quot; target=&quot;_blank&quot;&gt;https://www.fontke.com/tool/image2ascii/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;åšä¸»ä½¿ç”¨æ˜¯ï¼š &lt;a href=&quot;https://www.twitchquotes.com/ascii-art-generator&quot; target=&quot;_blank&quot;&gt;https://www.twitchquotes.com/ascii-art-generator&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/sanfene/picgo/raw/master/image-20210211210348738.png&quot; alt=&quot;image-20210211210348738&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šä¼ å›¾ç‰‡ï¼Œå°±å¯ä»¥çœ‹åˆ°ç”Ÿæˆçš„ASCIIï¼Œå°†ç”Ÿæˆçš„ASCIIç²˜è´´åˆ° &lt;code&gt;banner.txt&lt;/code&gt;ä¸­ï¼Œå¯åŠ¨å‘ç°bannerå·²ç»å˜ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/sanfene/picgo/raw/master/image-20210211210528858.png&quot; alt=&quot;image-20210211210528858&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;â­ AnsiColorï¼šç”¨æ¥è®¾å®šå­—ç¬¦çš„å‰æ™¯è‰²ï¼›&lt;/p&gt;
&lt;p&gt;â­ AnsiBackgroundï¼šç”¨æ¥è®¾å®šå­—ç¬¦çš„èƒŒæ™¯è‰²ã€‚&lt;/p&gt;
&lt;p&gt;â­ AnsiStyleï¼šç”¨æ¥æ§åˆ¶åŠ ç²—ã€æ–œä½“ã€ä¸‹åˆ’çº¿ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬é€šè¿‡&lt;code&gt;{AnsiColor.BRIGHT_RED}&lt;/code&gt; å°†å­—ç¬¦è®¾ç½®ä¸ºçº¢è‰²&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/sanfene/picgo/raw/master/image-20210211211109089.png&quot; alt=&quot;image-20210211211109089&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æ–‡å­—éƒ¨åˆ†å°±æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œè‡ªè¡Œæ·»åŠ ã€‚å°±æ˜¯åé¢çš„æ–‡æœ¬æ²¡å¯¹é½ï¼Œåšä¸»æäº†åŠå¤©ä¹Ÿæ²¡æœ‰æå®šï¼Œå¤§è¿‡å¹´çš„ï¼Œä¸æƒ³æäº†ğŸ˜‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æ·»åŠ SpringBootç‰ˆæœ¬ä¿¡æ¯ï¼Œé€šè¿‡&lt;code&gt;${spring-boot.version}&lt;/code&gt; å¯ä»¥è·å–SpringBootç‰ˆæœ¬å·&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;${AnsiColor.BRIGHT_YELLOW}Spring Boot ç‰ˆæœ¬ï¼š${spring-boot.version}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™æ˜¯åšä¸»çš„è‡ªå®šä¹‰bannerï¼Œå³è¾¹çš„æ–‡å­—ä¸€ç›´å¯¹ä¸é½ï¼Œæœ‰è§£å†³åŠæ³•çš„è¯·åœ¨è¯„è®ºåŒºè¯„è®ºï¼Œè°¢è°¢ï¼&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;${AnsiColor.BRIGHT_RED}                                  å‡èŒåŠ è–ª
é’±     â €â €â €â €â €â €â €â €â €â  â¡€â €â €â €â €â €â €â €â €â €â €â €â €â €                                          â €â €â €â €â €â €
å¤š      â €â¡€â €â €â €â €â €â €â €â €â €â €â €â €â €â  â£„â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €              èº«
äº‹      â ¸â¡€â €â €â €â €â €â €â €â €â €â €â €â €â €â €â¢™â¢‚â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €              å¼º
å°‘      â¢¸â£±â¢„â£€â£€â£€â£€â£€ â¢€â£€â£ â¢€â¡€â£¤â ¤â£šâ£¼â € â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €           ä½“
å¹²      â €â ’â ¿â£Šâ£‡â£§â£¾â£Ÿâ£â£â£¿â£¿â£œâ¡µâ µâ¢¼â£Šâ â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €            å¥
çš„     â €â €â €â â ºâ ¿â£¿â »â¢Ÿâ£¿â¢â¢â¢»â£¿â£¿â£§â¡â â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €             è¿›
çˆ½      â €â €â €â €â €â €â£¿â¢ â£¿â£¿  â£¿â£´â£¿â£¿â£Ÿâ¢·â£¦â£€â¡€â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €            æ­¥
      â €â €â €â €â €â¢¸â¢¿â¡¿â¢¿â£¿â£¿â£¿ â¢«â£¿â â¢¤â£¿â ©â£â£·â£¤â£€â¡€â €â €â €â €â €â €â €â €â €â €â €â €â €  â£ â£„â£€â €â €â €â €â €â €â €â €â €             å¿«
      â €â €â €â €â €â£â¡ƒâ£˜â£ƒâ£¿â ¿â¢›â£¡â£¿â ¿â¢¶â£¿â£¿â£·â£¬â£â£¼â¡Ÿâ¢»â£Ÿâ¢Ÿâ ¿â£¿â ¿â¢›â£¿â ¿â£¿â ¿â¢³â£¶â£¿â¡¿â ›â ›â ¿â£·â£„â €â €â €â €â €â €â €
      â €â €â €â €â €â ˆâ ‰â ›â ›â »â¡¿â¡»â¡‰â ¡â¡€â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£·â£¾â£¬â£¥â£´â£¿â£—â£¿â ¡â£·â¡—â£¼â¡·â ›â¡»â£·â¡€â €â €â ˆâ »â£¦â£€â €â¡”â ’â ²â¡‡
      â €â €â €â €â €â €â €â €â €â €â¢¿â¡·â£·â¡·â¡¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡â ›â¢›â¢â£½â â£¼â »â£œâ£»â¢Ÿâ£µâ£·â ¿â£¿â¢œâ£§â €â €â €â €â €â ‰â ‰â ‘â ’â Šâ €
      â €â €â €â €â €â €â €â €â €â €â¢¸â£®â£ â£ â£´â ¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¾â£¼â£¾â¡¿â¢§â£½â£â ¿â »â£»â¡µâ¢»â£¿â â£¿â£¿â €â €â €â €â €â €â €â €â €â €â €
      â €â €â €â €â €â €â €â €â¢€â£€â£¸â¡Ÿâ¢¹â£—â£½â ¿â£¿â£¿â£¿â£¿â£¿â£¿â¡¿â£†â£Œâ â£°â£¿â£„â£›â£¿â£»â ›â¢â£¼â£‹â£µâ £â¡Ÿâ €â €â €â €â €â €â €â €â €â €â €
      â €â €â €â €â¡¤â¡²â£´â¢„â£¯â£¬â£¿â£·â£„â£¹â …â£±â£¿â£¿â£¿â£¿â£¿â£¿â Œâ¢½â£¿â¡Ÿâ ›â¡‹â£¹â¡â£·â£‰â£»â£â£‰â£²â£¿â£¿â¡‡â €â €â €â €â €â €â €â €â €â €â €
      â €â €â €â €â¢¨â¡ªâ¡­â¢¸â£¿â ƒâ €â ‰â ™â ›â ³â¢¼â£¿â£¿â£¿â£¿â¢»â¢Šâ£¢â£½â£‹â£¿â£¾â ¾â£Ÿâ£¯â£·â£¿â¡»â¢¿â£¿â£¿â£¿â£¿â£¿â£¦â¡€â¢ â£€â£¤â €â €â €â¡€â €â €
      â €â ›â£ â£ƒâ£¬â£¿â£â €â£¿â£—â£¤â €â¡€â €â €â£œâ¢¿â£¿â â ‰â ‹â ‰â ‰â ‰â ‰â €â €â €â ™â ¿â£¿â£¿â£§â €â ˆâ ™â ›â ¿â£¿â£¯â£¼â €â¡ƒâ££â£§â£¤â£¾â£‡â €â €
      â¢€â£€â£´â¡¿â£ºâ¡â¢»â£†â¡ˆâ “â »â ƒâ¡â €â €â£·â£¿â ‹â €â €â €â €â €â£¼â£µâ ‡â¡€â €â €â €â£¸â£¿â¡­â ƒâ €â €â €â €â ˆâ »â£¿â¡„â €â ¿â£¯â£–â¡½â ƒâ €â €
      â¢¨â£µâ£­â£½â¡—â¡Ÿâ¢¿â£¶â£¿â¡„â €â €â €â €â¢ â£¿â¡‡â €â €â €â ™â¡’â£¥â£„â¡˜â â €â¢€â£ â£¼â¡¿â ‹â €â €â €â €â €â €â €â €â¢¹â£·â¡€â  â¢µâ ¸â£¤â£€â €â €
      â €â ‰â¢ˆâ£‹â£¦â£´â¡„â¢‰â£°â£²â¡‚â €â €â¢°â£­â¡½â ‚â €â €â €â ˆâ €â â »â¢½â ¿â¡³â ¶â¡¾â ›â €â €â €â €â €â €â €â €â €â¢€â£¯â£µâ £â£Ÿâ£†â¡ƒâ §â£¾â¡…â €
      â €â €â ™â »â ¿â ›â ‰â ‘â ‹â ‰â €â €â ªâ£€â£‰â €â €â €â €â €â €â €â €â €â €â €â šâ €â ƒâ €â €â €â €â €â €â €â €â €â  â£±â£€â¡â €â €â ƒ
${AnsiColor.BRIGHT_YELLOW}Spring Boot ç‰ˆæœ¬ï¼š${spring-boot.version}

&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;&lt;big&gt;&lt;strong&gt;å‚è€ƒï¼š&lt;/strong&gt;&lt;/big&gt;&lt;/p&gt;
&lt;p&gt;ã€1ã€‘ï¼š&lt;a href=&quot;https://www.jianshu.com/p/a53f324c92f2&quot; target=&quot;_blank&quot;&gt;Spring Bootè‡ªå®šä¹‰Banner&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ã€2ã€‘ï¼š&lt;a href=&quot;https://doc.yonyoucloud.com/doc/Spring-Boot-Reference-Guide/IV.%20Spring%20Boot%20features/22.1.%20Customizing%20the%20Banner.html&quot; target=&quot;_blank&quot;&gt;22.1. è‡ªå®šä¹‰Banner&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Thu, 11 Feb 2021 13:33:00 +0000</pubDate>
<dc:creator>ä¸‰åˆ†æ¶</dc:creator>
<og:description>æ–°æ˜¥å¿«ä¹ï¼Œç‰›å¹´å¤§å‰ï¼ æ–°çš„ä¸€å¹´æ˜¯ç‰›å¹´ï¼Œåœ¨SpringBooté¡¹ç›®é‡Œè‡ªå®šä¹‰äº†ä¸€ä¸ªç‰›å¹´ç›¸å…³çš„bannerï¼Œçœ‹èµ·æ¥å¯çœŸä¸é”™ã€‚ ä¸Šé¢æ˜¯è‡ªå·±åˆ¶ä½œçš„ä¸€ä¸ªbannerï¼Œç›¸å…³çš„ASCIIå­—ç¬¦åœ¨æ–‡æœ«ã€‚ SpringBo</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/three-fighter/p/14398203.html</dc:identifier>
</item>
<item>
<title>KafkaConsumer ç®€æ  - buttercup</title>
<link>http://www.cnblogs.com/buttercup/p/14208062.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/buttercup/p/14208062.html</guid>
<description>&lt;p&gt;åˆ›å»ºä¸€ä¸ª KafkaConsumer å¯¹è±¡è®¢é˜…ä¸»é¢˜å¹¶å¼€å§‹æ¥æ”¶æ¶ˆæ¯ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;  Properties properties = new Properties();
  properties.setProperty(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);
  properties.setProperty(&quot;key.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);
  properties.setProperty(&quot;value.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);
  properties.setProperty(&quot;enable.auto.commit&quot;, &quot;false&quot;); // ç¦æ­¢è‡ªåŠ¨æäº¤
  properties.setProperty(&quot;group.id&quot;, &quot;my-group-id&quot;); // è®¾ç½®æ¶ˆè´¹è€…ç»„ç¾¤ID

  KafkaConsumer&amp;lt;String, String&amp;gt; consumer = new KafkaConsumer&amp;lt;&amp;gt;(properties);
  consumer.subscribe(Collections.singletonList(&quot;topic&quot;)); // è®¢é˜…ä¸»é¢˜
  try {
      while (! Thread.currentThread().isInterrupted()) {
          ConsumerRecords&amp;lt;String, String&amp;gt; records = consumer.poll(1000);
          records.forEach(System.out::println);
          consumer.commitAsync(); // å¼‚æ­¥æäº¤åç§»é‡
      }
  } catch (WakeupException ignore) {
      // å¿½ç•¥å…³é—­å¼‚å¸¸
  } finally {
      try {
          consumer.commitSync(); // åŒæ­¥æäº¤åç§»é‡
      } finally {
          consumer.close();
      }
  }

  Thread thread = Thread.currentThread();
  Runtime.getRuntime().addShutdownHook(new Thread(() -&amp;gt; {
      consumer.wakeup();
      try {
          thread.join();
      } catch (InterruptedException ignore) {}
  }));
&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;ä¸ºäº†å®ç°æ¨ªå‘æ‰©å±•ï¼Œåº”ç”¨ç¨‹åºéœ€è¦åˆ›å»ºä¸€ä¸ªæ¶ˆè´¹è€…ç¾¤ç»„ï¼Œç„¶åå¾€ç¾¤ç»„é‡Œæ·»åŠ æ¶ˆè´¹è€…æ¥æé«˜å¤„ç†æ•ˆç‡ï¼Œç¾¤ç»„é‡Œçš„æ¯ä¸ªæ¶ˆè´¹è€…åªå¤„ç†ä¸€éƒ¨åˆ†æ¶ˆæ¯ï¼š&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/buttercup/1776821/o_201227141125kafka_consume_partition1.gif&quot; width=&quot;255&quot;/&gt;&lt;img src=&quot;data:image/bmp;base64,Qk1CAAAAAAAAAD4AAAAoAAAAAQAAAAEAAAABAAEAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wCAAAAA&quot; width=&quot;30&quot;/&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/buttercup/1776821/o_201222150647kafka_consume_partition.gif&quot; width=&quot;255&quot;/&gt;&lt;img src=&quot;data:image/bmp;base64,Qk1CAAAAAAAAAD4AAAAoAAAAAQAAAAEAAAABAAEAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wCAAAAA&quot; width=&quot;30&quot;/&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/buttercup/1776821/o_201227141312kafka_consume_partition3.gif&quot; width=&quot;215&quot;/&gt;&lt;/center&gt;
&lt;p&gt;ä¸€ä¸ªç¾¤ç»„é‡Œçš„æ¶ˆè´¹è€…è®¢é˜…çš„æ˜¯åŒä¸€ä¸ªä¸»é¢˜ï¼Œæ¯ä¸ªæ¶ˆè´¹è€…æ¥æ”¶ä¸»é¢˜ä¸€éƒ¨åˆ†åˆ†åŒºçš„æ¶ˆæ¯ï¼ˆ&lt;strong&gt;å·¦å›¾&lt;/strong&gt;ï¼‰ã€‚&lt;br/&gt;æ¶ˆè´¹è€…æ— æ³•è·Ÿä¸Šæ•°æ®ç”Ÿæˆçš„é€Ÿåº¦ï¼Œå¯ä»¥å‘ç»„ç¾¤å†…å¢åŠ æ›´å¤šçš„æ¶ˆè´¹è€…åˆ†æ‹…è´Ÿè½½ï¼Œæ˜¯æ¶ˆè´¹ç«¯æ¨ªå‘ä¼¸ç¼©çš„ä¸»è¦æ‰‹æ®µï¼ˆ&lt;strong&gt;ä¸­å›¾&lt;/strong&gt;ï¼‰ã€‚&lt;br/&gt;é¢„å…ˆä¸ºä¸»é¢˜é¢„ç•™çš„åˆ†åŒºå¯ä»¥åœ¨è´Ÿè½½å¢é•¿æ—¶å¢åŠ æ›´å¤šçš„æ¶ˆè´¹è€…ï¼Œä¸è¿‡å½“æ¶ˆè´¹è€…çš„æ•°é‡è¶…è¿‡ä¸»é¢˜åˆ†åŒºæ—¶ï¼Œå¤šä½™çš„æ¶ˆè´¹è€…åªä¼šè¢«é—²ç½®ï¼ˆ&lt;strong&gt;å³å›¾&lt;/strong&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;åªè¦ä¿è¯æ¯ä¸ªåº”ç”¨ç¨‹åºæœ‰ç‹¬ç«‹çš„æ¶ˆè´¹è€…ç¾¤ç»„ï¼Œå°±å¯ä»¥è®©å®ƒä»¬è·å–åˆ°ä¸»é¢˜æ‰€æœ‰çš„æ¶ˆæ¯ï¼Œè€Œä¸åªæ˜¯å…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;p align=&quot;center&quot;&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/buttercup/1776821/o_201222150659kafka_consume_partition2.gif&quot; width=&quot;255&quot;/&gt;&lt;/p&gt;

&lt;p&gt;ä¸ºäº†ä¿è¯è°ƒç”¨&lt;code&gt;KafkaConsumer.poll()&lt;/code&gt;æ–¹æ³•æ—¶æ€»èƒ½è¿”å›æœªè¢«è¢«æ¶ˆè´¹è€…è¯»å–è¿‡çš„è®°å½•ï¼Œæ¶ˆè´¹è€…éœ€è¦ç»´æŠ¤æ¯ä¸ªåˆ†åŒºä¸­å·²è¯»æ¶ˆæ¯å¯¹åº”çš„&lt;strong&gt;åç§»é‡&lt;/strong&gt;&lt;code&gt;offset&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€æ—¦æ¶ˆè´¹è€…å‘ç”Ÿå´©æºƒæˆ–è€…æœ‰æ–°çš„æ¶ˆè´¹è€…åŠ å…¥ç¾¤ç»„ï¼Œå°±ä¼šè§¦å‘&lt;strong&gt;å†å‡è¡¡&lt;/strong&gt;&lt;code&gt;rebalance&lt;/code&gt;ï¼Œæ¯ä¸ªæ¶ˆè´¹è€…å¯èƒ½åˆ†é…åˆ°æ–°çš„åˆ†åŒºï¼Œè€Œä¸æ˜¯ä¹‹å‰å¤„ç†çš„é‚£ä¸ªã€‚ä¸ºäº†èƒ½å¤Ÿç»§ç»­ä¹‹å‰çš„å·¥ä½œï¼Œæ¶ˆè´¹è€…éœ€è¦çŸ¥é“æ¯ä¸ªåˆ†åŒºçš„å·²è¯»åç§»é‡ï¼Œç„¶åä»åç§»é‡æŒ‡å®šçš„åœ°æ–¹ç»§ç»­å¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ä¿è¯è¿™äº›ä¿¡æ¯ä¸ä¸¢å¤±ï¼Œæ¶ˆè´¹è€…éœ€è¦å®šæœŸå‘ä¸€ä¸ªåä¸º &lt;code&gt;_consumer_offset&lt;/code&gt; çš„ç‰¹æ®Šä¸»é¢˜å‘é€æ¶ˆæ¯ï¼Œæ¶ˆæ¯é‡ŒåŒ…å«æ¯ä¸ªåˆ†åŒºçš„åç§»é‡ã€‚Kafka ä¸­å°†è¿™ä¸€æ›´æ–°çš„æ“ä½œç§°ä½œ&lt;strong&gt;æäº¤&lt;/strong&gt;&lt;code&gt;commit&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&quot;è¾¹ç•Œæƒ…å†µ&quot;&gt;è¾¹ç•Œæƒ…å†µ&lt;/h3&gt;
&lt;p&gt;å¦‚æœæäº¤çš„åç§»é‡å°äºå®¢æˆ·ç«¯å¤„ç†çš„æœ€åä¸€ä¸ªæ¶ˆæ¯çš„åç§»é‡ï¼Œé‚£ä¹ˆå¤„äºä¸¤ä¸ªåç§»é‡ä¹‹é—´çš„æ¶ˆæ¯å°±ä¼šè¢«é‡å¤å¤„ç†ï¼š&lt;/p&gt;
&lt;p align=&quot;center&quot;&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/buttercup/1776821/o_201222150712kafka_consume_offset.gif&quot; width=&quot;400&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœæäº¤çš„åç§»é‡å¤§äºå®¢æˆ·ç«¯å¤„ç†çš„æœ€åä¸€ä¸ªæ¶ˆæ¯çš„åç§»é‡ï¼Œé‚£ä¹ˆå¤„äºä¸¤ä¸ªåç§»é‡ä¹‹é—´çš„æ¶ˆæ¯å°†ä¼šä¸¢å¤±ï¼š&lt;/p&gt;
&lt;p align=&quot;center&quot;&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/buttercup/1776821/o_201222150717kafka_consume_offset2.gif&quot; width=&quot;400&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¤„ç†åç§»é‡çš„æ–¹å¼å¯¹å®¢æˆ·ç«¯ä¼šæœ‰å¾ˆå¤§çš„å½±å“ï¼Œä¸‹é¢åˆ†æå‡ ç§å¸¸è§çš„æäº¤æ–¹å¼ï¼š&lt;/p&gt;
&lt;h3 id=&quot;è‡ªåŠ¨æäº¤&quot;&gt;è‡ªåŠ¨æäº¤&lt;/h3&gt;
&lt;p&gt;æœ€ç®€å•çš„æäº¤æ–¹å¼æ˜¯è®©æ¶ˆè´¹è€…è‡ªåŠ¨æäº¤åç§»é‡ï¼šè®¾ç½® &lt;code&gt;enable.auto.commit = true&lt;/code&gt;ï¼Œé‚£ä¹ˆæ¯è¿‡ &lt;code&gt;auto.commit.interval.ms&lt;/code&gt;ï¼Œæ¶ˆè´¹è€…ä¼šè‡ªåŠ¨æŠŠä»&lt;code&gt;KafkaConsumer.poll()&lt;/code&gt;æ–¹æ³•æ¥æ”¶åˆ°çš„æœ€å¤§åç§»é‡æäº¤ä¸Šå»ã€‚&lt;/p&gt;
&lt;p&gt;è‡ªåŠ¨æäº¤æ˜¯åœ¨è½®è¯¢é‡Œè¿›è¡Œçš„ï¼š&lt;strong&gt;æ¶ˆè´¹è€…æ¯æ¬¡åœ¨è¿›è¡Œè½®è¯¢æ—¶ä¼šæ£€æŸ¥æ˜¯å¦è¯¥æäº¤åç§»é‡ï¼Œå¹¶ä¸”è‡ªåŠ¨æäº¤æœ€è¿‘ä¸€æ¬¡è½®è¯¢è¿”å›çš„åç§»é‡&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡ï¼Œåœ¨ä½¿ç”¨è¿™ç§ç®€ä¾¿çš„æ–¹å¼ä¹‹å‰ï¼Œéœ€è¦çŸ¥é“å®ƒå°†ä¼šå¸¦æ¥æ€æ ·çš„ç»“æœï¼š&lt;/p&gt;
&lt;ul readability=&quot;1&quot;&gt;&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;å‡è®¾åœ¨ä¸¤æ¬¡æäº¤é—´éš”ä¹‹é—´å‘ç”Ÿäº†å†å‡è¡¡ï¼ŒæœŸé—´çš„æ¶ˆæ¯ä¼šè¢«é‡å¤å¤„ç†ã€‚&lt;br/&gt;å¯ä»¥é€šè¿‡ä¿®æ”¹æäº¤æ—¶é—´é—´éš”æ¥å‡å°å¯èƒ½å‡ºç°é‡å¤æ¶ˆæ¯çš„æ—¶é—´çª—ï¼Œä¸è¿‡æ— æ³•å®Œå…¨é¿å…è¿™ç§æƒ…å†µã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;æ¯æ¬¡è°ƒç”¨è½®è¯¢æ–¹æ³•éƒ½ä¼šæäº¤ä¸Šä¸€æ¬¡è°ƒç”¨è¿”å›çš„åç§»é‡ï¼Œè€Œå¹¶ä¸å…³å¿ƒå…·ä½“å“ªäº›æ¶ˆæ¯å·²ç»è¢«å¤„ç†äº†ã€‚&lt;br/&gt;åœ¨å†æ¬¡è°ƒç”¨ä¹‹å‰ï¼Œæœ€å¥½ç¡®ä¿æ‰€æœ‰å½“å‰å·²è¿”å›æ¶ˆæ¯éƒ½å·²ç»å¤„ç†å®Œæ¯•ï¼ˆè°ƒç”¨&lt;code&gt;KafkaConsumer.close()&lt;/code&gt; å‰ä¹Ÿä¼šè¿›è¡Œè‡ªåŠ¨æäº¤ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;æ‰‹åŠ¨æäº¤&quot;&gt;æ‰‹åŠ¨æäº¤&lt;/h3&gt;
&lt;p&gt;è‡ªåŠ¨æäº¤è™½ç„¶æ–¹ä¾¿ï¼Œä¸è¿‡å¹¶æ²¡æœ‰ä¸ºå¼€å‘è€…ç•™æœ‰ä½™åœ°æ¥é¿å…é‡å¤å¤„ç†æ¶ˆæ¯ã€‚ä¸ºäº†æé«˜å¯æ§æ€§ï¼Œå¼€å‘è€…å¯ä»¥è®¾ç½® &lt;code&gt;enable.auto.commit = false&lt;/code&gt;ï¼Œè®©åº”ç”¨ç¨‹åºå†³å®šä½•æ—¶æäº¤åç§»é‡ã€‚&lt;/p&gt;
&lt;ul readability=&quot;1.5&quot;&gt;&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;åŒæ­¥æäº¤ï¼šä½¿ç”¨ &lt;code&gt;KafkaConsumer.commitSync()&lt;/code&gt; ä¼šæäº¤æœ€æ–°åç§»é‡å¹¶ç­‰å¾… broker å¯¹æäº¤è¯·æ±‚ä½œå‡ºå›åº”ã€‚&lt;br/&gt;åœ¨æˆåŠŸæäº¤æˆ–ç¢°åˆ°æ— æ³•æ¢å¤çš„é”™è¯¯ä¹‹å‰ä¼šä¸æ–­é‡è¯•ï¼Œä¼šå¯¼è‡´åº”ç”¨ç¨‹åºä¸€ç›´é˜»å¡ï¼Œé™åˆ¶äº†åº”ç”¨ç¨‹åºçš„ååé‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;å¼‚æ­¥æäº¤ï¼šä½¿ç”¨ &lt;code&gt;KafkaConsumer.commitAsync()&lt;/code&gt; ä¼šæäº¤æœ€æ–°åç§»é‡ä½†æ— éœ€ç­‰å¾… broker çš„å“åº”å¹¶ä¸”ä¸è¿›è¡Œé‡è¯•ã€‚&lt;br/&gt;ä¸è¿›è¡Œé‡è¯•ï¼Œæ˜¯å› ä¸ºå¯èƒ½æœ‰ä¸€ä¸ªæ›´å¤§çš„åç§»é‡å·²ç»æäº¤æˆåŠŸï¼Œé‡è¯•å¯èƒ½ä¼šè¦†ç›–åˆ°æœ€æ–°çš„å€¼ï¼Œå¯¼è‡´å†å‡è¡¡åå‡ºç°é‡å¤æ¶ˆæ¯ã€‚&lt;br/&gt;è¯¥æ–¹æ³•åœ¨ broker ä½œå‡ºå“åº”æ—¶ä¼šæ‰§è¡Œç”¨æˆ·æŒ‡å®šçš„å›è°ƒï¼Œå›è°ƒç»å¸¸è¢«ç”¨äºè®°å½•æäº¤é”™è¯¯æˆ–ç”Ÿæˆåº¦é‡æŒ‡æ ‡ã€‚&lt;br/&gt;ä¸è¿‡å¦‚æœè¦åœ¨å…¶ä¸­è¿›è¡Œé‡è¯•ï¼Œä¸€å®šè¦æ³¨æ„æäº¤çš„é¡ºåºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¶å°”å¼‚æ­¥æäº¤å¤±è´¥ä¸ä¼šæœ‰å¤ªå¤§é—®é¢˜ï¼Œåç»­çš„æäº¤æ€»ä¼šæœ‰æˆåŠŸçš„ã€‚ä½†åœ¨å…³é—­æ¶ˆè´¹è€…æˆ–å†å‡è¡¡å‰çš„æœ€åä¸€æ¬¡æäº¤ï¼Œå¿…é¡»ç¡®ä¿æäº¤æˆåŠŸã€‚ä¸ºäº†ä¿è¯å¯é æ€§ä¸ååé‡ï¼Œæ¯”è¾ƒå¸¸è§çš„æ–¹å¼æ˜¯å°†ä¸¤è€…ç»„åˆä½¿ç”¨ï¼ˆå…·ä½“å‚è€ƒå¼€å¤´çš„ä»£ç ç¤ºä¾‹ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æäº¤ç‰¹å®šåç§»é‡&quot;&gt;æäº¤ç‰¹å®šåç§»é‡&lt;/h3&gt;
&lt;p&gt;ä¸Šé¢è®¨è®ºçš„æäº¤æ–¹å¼ä¸­ï¼Œæäº¤åç§»é‡çš„é¢‘ç‡ä¸å¤„ç†æ¶ˆæ¯æ‰¹æ¬¡çš„é¢‘ç‡æ˜¯ä¸€æ ·çš„ï¼Œä½†æŸäº›åœºæ™¯éœ€è¦åœ¨æ›´ç»†çš„ç²’åº¦ä¸Šæ§åˆ¶æäº¤ï¼šå¦‚æœ&lt;code&gt;KafkaConsumer.poll()&lt;/code&gt;æ–¹æ³•è¿”å›ä¸€å¤§æ‰¹æ•°æ®ï¼Œä¸ºäº†é¿å…å› å†å‡è¡¡å¼•èµ·çš„é‡å¤å¤„ç†æ•´æ‰¹æ¶ˆæ¯ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½åœ¨æ‰¹æ¬¡å¤„ç†ä¸­é—´æäº¤éƒ¨åˆ†åç§»é‡ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶ï¼Œå¯ä»¥åœ¨è°ƒç”¨&lt;code&gt;KafkaConsumer.commitSync()&lt;/code&gt;æˆ–&lt;code&gt;KafkaConsumer.commitAsync()&lt;/code&gt;æ—¶ï¼Œé€šè¿‡å‚æ•°æŒ‡å®šå…·ä½“çš„åˆ†åŒºåŠå…¶å¯¹åº”çš„åç§»é‡ï¼Œäººä¸ºåœ°æ§åˆ¶æäº¤å†…å®¹ã€‚&lt;/p&gt;

&lt;p&gt;ç¾¤ç»„é‡Œçš„æ¶ˆè´¹è€…å…±åŒè¯»å–ä¸»é¢˜çš„åˆ†åŒºï¼Œæ¶ˆè´¹è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°ä»¥ä¸‹æƒ…å†µï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æ–°çš„æ¶ˆè´¹è€…åŠ å…¥ç¾¤ç»„ï¼Œå®ƒä¼šè¢«åˆ†é…åˆ°ä¸€ä¸ªåŸæœ¬ç”±å…¶ä»–æ¶ˆè´¹è€…è¯»å–çš„åˆ†åŒº&lt;/li&gt;
&lt;li&gt;å½“å‰æ¶ˆè´¹è€…ç¦»å¼€ç¾¤ç»„ï¼ŒåŸæœ¬ç”±å®ƒè¯»å–çš„åˆ†åŒºå°†åˆ†é…ç»™ç¾¤ç»„é‡Œçš„å…¶ä»–æ¶ˆè´¹è€…&lt;/li&gt;
&lt;li&gt;è®¢é˜…ä¸»é¢˜å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ¯”å¦‚ç®¡ç†å‘˜æ·»åŠ äº†æ–°çš„åˆ†åŒºï¼Œä¼šå‘ç”Ÿåˆ†åŒºé‡åˆ†é…&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;åˆ†åŒºçš„æ‰€æœ‰æƒä»ä¸€ä¸ªæ¶ˆè´¹è€…è½¬ç§»åˆ°å¦ä¸€ä¸ªæ¶ˆè´¹è€…ï¼Œè¿™æ ·çš„è¡Œä¸ºè¢«ç§°ä¸º&lt;strong&gt;å†å‡è¡¡&lt;/strong&gt;&lt;code&gt;rebalance&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å†å‡è¡¡éå¸¸é‡è¦ï¼Œå®ƒä¸ºæ¶ˆè´¹è€…ç¾¤ç»„å¸¦æ¥äº†é«˜å¯ç”¨æ€§å’Œä¼¸ç¼©æ€§ï¼ˆæ”¯æŒåŠ¨æ€æ·»åŠ æˆ–ç§»é™¤æ¶ˆè´¹è€…ï¼‰ã€‚&lt;br/&gt;ä½†æ˜¯ï¼Œå†å‡è¡¡æ•´ä¸ªç¾¤ç»„ä¼šä¸€å°æ®µæ—¶é—´ä¸å¯ç”¨ï¼ŒæœŸé—´æ¶ˆè´¹è€…æ— æ³•è¯»å–æ¶ˆæ¯ï¼Œåœ¨æ¢å¤ä¹‹å‰ä¼šæ‹–æ…¢åº”ç”¨ç¨‹åºã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ¶ˆè´¹è€…åˆ†ä»£&quot;&gt;æ¶ˆè´¹è€…åˆ†ä»£&lt;/h3&gt;
&lt;p&gt;æ¶ˆè´¹è€…ç»„ç¾¤å¯ä»¥è¿›è¡Œä»»æ„æ¬¡å†å‡è¡¡ï¼Œä¸ºäº†æ›´å¥½åœ°éš”ç¦»å·²å¤±æ•ˆçš„çŠ¶æ€ï¼ˆæ¯”å¦‚ï¼šé¿å…åƒµå°¸å®ä¾‹æäº¤è¿‡æœŸçš„åç§»é‡ï¼‰ï¼ŒKafka æ¶ˆè´¹è€…ç«¯å¼•å…¥äº†&lt;strong&gt;åˆ†ä»£&lt;/strong&gt;&lt;code&gt;generation&lt;/code&gt;çš„æ¦‚å¿µã€‚&lt;/p&gt;
&lt;p&gt;æ¶ˆè´¹è€…çš„åˆ†ä»£ä¿¡æ¯æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œæ¯å½“ç»„ç¾¤è¿›è¡Œä¸€æ¬¡ rebalance æ“ä½œï¼Œç»„å†…æ‰€æœ‰æ¶ˆè´¹è€…çš„ generation éƒ½ä¼šé€’å¢ã€‚å½“æ¶ˆè´¹è€…æäº¤åç§»æ—¶ä¼šä¼´éšç€ generation ä¿¡æ¯ï¼Œå½“ broker ä¼šæ®æ­¤åˆ¤æ–­æ¶ˆæ¯æ˜¯å¦æ¥æºäºä¸€ä¸ªä¸Šä¸€ä»£çš„æ¶ˆè´¹è€…ï¼Œå¹¶æ‹’ç»è¿‡æœŸçš„æäº¤ã€‚&lt;/p&gt;
&lt;h3 id=&quot;åœ¨å‡è¡¡ç›‘å¬å™¨&quot;&gt;åœ¨å‡è¡¡ç›‘å¬å™¨&lt;/h3&gt;
&lt;p&gt;å¦‚æœæ¶ˆè´¹è€…æƒ³åœ¨å†å‡è¡¡å‰ååšä¸€äº›æ¸…ç†å·¥ä½œæˆ–å‡†å¤‡å·¥ä½œï¼Œåªéœ€åœ¨è°ƒç”¨ &lt;code&gt;KafkaConsumer.subscribe()&lt;/code&gt; æ–¹æ³•æ—¶ä¼ è¿›å»ä¸€ä¸ª &lt;code&gt;ConsumerRebalanceListener&lt;/code&gt; å®ä¾‹å³å¯ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;  private Map&amp;lt;TopicPartition, OffsetAndMetadata&amp;gt; offsets = new HashMap&amp;lt;&amp;gt;();

  KafkaConsumer&amp;lt;String, String&amp;gt; consumer = new KafkaConsumer&amp;lt;&amp;gt;(properties);

  // è®¢é˜…æ—¶æ³¨å†Œå†å‡è¡¡ç›‘å¬å™¨
  consumer.subscribe(Collections.singletonList(&quot;topic&quot;), new ConsumerRebalanceListener(){

      /** æ–¹æ³•ä¼šåœ¨é‡æ–°åˆ†é…åˆ†åŒºä¹‹åå’Œæ¶ˆè´¹è€…å¼€å§‹è¯»å–æ¶ˆæ¯ä¹‹å‰è¢«è°ƒç”¨ */
      @Override
      public void onPartitionsAssigned(Collection&amp;lt;TopicPartition&amp;gt; partitions) {
          // ä»ç‰¹å®šçš„åç§»é‡å¤„å¼€å§‹è¯»å–æ¶ˆæ¯
          offsets.entrySet().stream().
                  filter(e -&amp;gt; partitions.contains(e.getKey())).
                  forEach(e -&amp;gt; consumer.seek(e.getKey(), e.getValue().offset()));
      }

      /** æ–¹æ³•ä¼šåœ¨å†å‡è¡¡å¼€å§‹ä¹‹å‰å’Œæ¶ˆè´¹è€…åœæ­¢è¯»å–æ¶ˆæ¯ä¹‹åè¢«è°ƒç”¨ */
      @Override
      public void onPartitionsRevoked(Collection&amp;lt;TopicPartition&amp;gt; partitions) {
          consumer.commitSync(offsets); // æäº¤å·²ç»æ•°æ®å¯¹åº”çš„åç§»é‡
      }
  });

  ConsumerRecords&amp;lt;String, String&amp;gt; records = consumer.poll(1000);
  for (ConsumerRecord&amp;lt;String, String&amp;gt; record : records) {
      // æ¶ˆæ¯å¤„ç†è¿‡ç¨‹ä¸­ï¼Œå®æ—¶æ›´æ–°åç§»é‡å˜åŒ–
      offsets.put(
              new TopicPartition(record.topic(), record.partition()),
              new OffsetAndMetadata(record.offset() + 1));
  }
&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;æ¶ˆè´¹è€…ç®¡ç†ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;æˆå‘˜ç®¡ç†&lt;/strong&gt;ï¼šç®¡ç†ç»„å†…æ‰€æœ‰ consumer å®ä¾‹ç”Ÿå‘½å‘¨æœŸå¹¶è´Ÿè´£ä¸‹å‘åˆ†åŒºåˆ†é…æ–¹æ¡ˆåˆ°æ¯ä¸ª consumerã€‚&lt;br/&gt;è¯¥åŠŸèƒ½ä¾èµ–äºä¸€ä¸ªè¢«é€‰ä¸ºç»„åè°ƒè€…&lt;code&gt;coordinator&lt;/code&gt;çš„ brokerã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†åŒºåˆ†é…&lt;/strong&gt;ï¼šæ ¹æ®æŒ‡å®šçš„åˆ†åŒºåˆ†é…ç­–ç•¥åˆ¶å®šåˆ†é…æ–¹æ¡ˆå¹¶ä¸ŠæŠ¥ coordinatorã€‚&lt;br/&gt;è¯¥åŠŸèƒ½ç”±ä¸€ä¸ª leader consumer è´Ÿè´£ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;åˆ†åŒºåˆ†é…çš„æ“ä½œæ˜¯åœ¨ consumer ç«¯æ‰§è¡Œçš„å¥½å¤„ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä¾¿äºç»´æŠ¤ä¸å‡çº§: è°ƒæ•´åˆ†é…ç­–ç•¥æ—¶ï¼Œæ— éœ€é‡å¯æ•´ broker é›†ç¾¤ã€‚&lt;/li&gt;
&lt;li&gt;ä¾¿äºå®ç°è‡ªå®šä¹‰ç­–ç•¥ï¼šä»£ç å®ç°æ›´ä¸ºçµæ´»ï¼Œå¯ä»¥ä¾èµ–å¤–éƒ¨å­˜å‚¨ç»´æŠ¤å¤æ‚ç­–ç•¥ï¼Œç”šè‡³å®ç°æœºæ¶æ„ŸçŸ¥ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;å˜æ›´æµç¨‹&quot;&gt;å˜æ›´æµç¨‹&lt;/h3&gt;
&lt;p align=&quot;center&quot;&gt;&lt;img src=&quot;https://cwiki.apache.org/confluence/download/attachments/61312126/consumer.png?version=3&amp;amp;modificationDate=1443760073000&amp;amp;api=v2%20width=&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;åˆå§‹åŒ–&quot;&gt;åˆå§‹åŒ–&lt;/h4&gt;
&lt;div class=&quot;paper&quot; readability=&quot;8&quot;&gt;consumer å¯åŠ¨æ—¶ï¼Œé¦–å…ˆè¦ç¡®å®šç»„ç¾¤ coordinator æ‰€åœ¨çš„ broker èŠ‚ç‚¹ï¼Œå¹¶å»ºç«‹ socket è¿æ¥ã€‚é€‰æ‹© coordinator çš„è§„åˆ™å¦‚ä¸‹ï¼š
&lt;ul&gt;&lt;li&gt;æ ¹æ® $\tiny \texttt{_consumer_offset}$ ä¸»é¢˜çš„åˆ†åŒºæ•°é‡ $\tiny \texttt{n}$ è®¡ç®— $\tiny \texttt{hashmod(group.id, n)}$&lt;/li&gt;
&lt;li&gt;é€‰æ‹©ç¬¬ $\tiny \texttt{hashmod(group.id, n)}$ ä¸ª $\tiny \texttt{_consumer_offset}$ åˆ†åŒºçš„ leader broker ä½œä¸º coordinator&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;
&lt;h4 id=&quot;åŠ å…¥ç»„ç¾¤&quot;&gt;åŠ å…¥ç»„ç¾¤&lt;/h4&gt;
&lt;p&gt;æ‰€æœ‰ consumer å‘ coordinator å‘é€&lt;code&gt;JoinGroup&lt;/code&gt;è¯·æ±‚ã€‚&lt;br/&gt;coordinator ä¼šä»ä¸­é€‰æ‹©ä¸€ä¸ªç»„ç¾¤ leader consumerï¼Œå¹¶æŠŠæ‰€æœ‰æˆå‘˜ä¿¡æ¯ä»¥åŠå®ƒä»¬çš„è®¢é˜…ä¿¡æ¯å‘é€ç»™è¿™ä¸ª leader consumerã€‚&lt;/p&gt;
&lt;h4 id=&quot;è§„åˆ’åˆ†é…æ–¹æ¡ˆ&quot;&gt;è§„åˆ’åˆ†é…æ–¹æ¡ˆ&lt;/h4&gt;
&lt;p&gt;leader consumer æ ¹æ®ç”¨æˆ·æŒ‡å®šçš„åˆ†é…ç­–ç•¥å†³å®šåˆ†åŒºåˆ†é…æ–¹æ¡ˆï¼Œå¹¶é€šè¿‡&lt;code&gt;SyncGroup&lt;/code&gt;è¯·æ±‚å°†æ–¹æ¡ˆä¸­å‘é€ç»™ coordinatorã€‚&lt;br/&gt;å…¶ä»– consumer ä¹Ÿä¼šå‘ coordinator å‘é€ä¸åŒ…å«åˆ†åŒºæ–¹æ¡ˆçš„&lt;code&gt;SyncGroup&lt;/code&gt;è¯·æ±‚ï¼Œç„¶å coordinator ä¼šå°†åˆ†åŒºæ–¹æ¡ˆè¿”å›ç»™è¿™äº› consumerã€‚&lt;/p&gt;
&lt;h4 id=&quot;å‘é€å¿ƒè·³&quot;&gt;å‘é€å¿ƒè·³&lt;/h4&gt;
&lt;p&gt;consumer ä¼šåœ¨è½®è¯¢æ¶ˆæ¯æˆ–æäº¤åç§»é‡æ—¶å‘ coordinator å‘é€&lt;code&gt;Heartbeat&lt;/code&gt;è¯·æ±‚ï¼Œç»´æŒå®ƒä»¬å’Œç¾¤ç»„ä¼šè¯&lt;code&gt;session&lt;/code&gt;ä»¥åŠå¯¹åˆ†åŒºçš„æ‰€æœ‰æƒã€‚&lt;br/&gt;å½“ coordinator é•¿æ—¶é—´æœªæ¥æ”¶åˆ° consumer çš„å¿ƒè¯·æ±‚æ—¶ï¼Œä¼šè®¤ä¸º consumer å·²å¤±æ•ˆå¹¶è§¦å‘ä¸€æ¬¡å†å‡è¡¡ã€‚&lt;br/&gt;è‹¥ coordinator åœ¨å¿ƒè·³å“åº”ä¸­è¿”å›äº† &lt;strong&gt;REBALANCE_IN_PROGRESS&lt;/strong&gt; ä¿¡æ¯ï¼Œæ„å‘³ç€å½“å‰ç»„ç¾¤å·²ç»å¼€å¯äº†æ–°ä¸€è½®çš„å†å‡è¡¡ã€‚&lt;/p&gt;
&lt;h4 id=&quot;ç¦»å¼€ç»„ç¾¤&quot;&gt;ç¦»å¼€ç»„ç¾¤&lt;/h4&gt;
&lt;p&gt;consumer é€€å‡ºæ—¶ä¼šä¸»åŠ¨å‘é€&lt;code&gt;LeaveGroup&lt;/code&gt;å‘ŠçŸ¥ coordinator å®ƒå°†è¦ç¦»å¼€ç¾¤ç»„ï¼Œå¹¶ç«‹å³è§¦å‘ä¸€æ¬¡å†å‡è¡¡ï¼Œå°½å¯èƒ½é™ä½å¤„ç†åœé¡¿ã€‚&lt;/p&gt;

&lt;h4 id=&quot;clientid&quot;&gt;&lt;strong&gt;client.id&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ã€€è¯¥å±æ€§å¯ä»¥æ˜¯ä»»æ„å­—ç¬¦ä¸²ï¼Œbroker ç”¨å®ƒæ¥æ ‡è¯†ä»å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„æ¶ˆæ¯ï¼Œé€šå¸¸è¢«ç”¨åœ¨æ—¥å¿—ã€åº¦é‡æŒ‡æ ‡å’Œé…é¢é‡Œã€‚&lt;/p&gt;
&lt;h4 id=&quot;groupid&quot;&gt;&lt;strong&gt;group.id&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ã€€æ ‡è¯†æ¶ˆè´¹è€…æ‰€å±çš„æ¶ˆè´¹è€…ç»„ç¾¤çš„å”¯ä¸€å­—ç¬¦ä¸²ã€‚&lt;br/&gt;ã€€å¦‚æœæ¶ˆè´¹è€…éœ€è¦åŸºäºç»„ç¾¤çš„å¯¹è®¢é˜…è¿›è¡Œç®¡ç†ï¼Œæˆ–åŸºäº Kafka ç®¡ç†åç§»é‡æ—¶ï¼Œéœ€è¦æŒ‡å®šæ­¤å±æ€§ã€‚&lt;/p&gt;
&lt;h4 id=&quot;bootstrapservers&quot;&gt;&lt;strong&gt;bootstrap.servers&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ã€€è¯¥å±æ€§æŒ‡å®š broker çš„åœ°å€åˆ—è¡¨ã€‚&lt;br/&gt;ã€€æ¸…å•é‡Œä¸éœ€è¦åŒ…å«æ‰€æœ‰çš„ broker åœ°å€ï¼Œç”Ÿäº§è€…ä¼šä»ç»™å®šçš„ broker é‡ŒæŸ¥æ‰¾åˆ°å…¶ä»– broker çš„ä¿¡æ¯ã€‚&lt;br/&gt;ã€€ä¸è¿‡å»ºè®®è‡³å°‘è¦æä¾›ä¸¤ä¸ª broker çš„ä¿¡æ¯ï¼Œä¸€æ—¦å…¶ä¸­ä¸€ä¸ªå®•æœºï¼Œç”Ÿäº§è€…ä»ç„¶èƒ½å¤Ÿè¿æ¥åˆ°é›†ç¾¤ä¸Šã€‚&lt;/p&gt;
&lt;h4 id=&quot;keydeserializer--valuedeserializer&quot;&gt;&lt;strong&gt;key.deserializer &amp;amp; value.deserializer&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ã€€è¿™ä¸¤ä¸ªå±æ€§å¿…é¡»è¢«è®¾ç½®ä¸ºä¸€ä¸ªå®ç°äº†&lt;code&gt;org.apache.kafka.common.serialization.Deserializer&lt;/code&gt;æ¥å£çš„ç±»ã€‚&lt;br/&gt;ã€€ç”Ÿäº§è€…ä¼šä½¿ç”¨è¿™ä¸ªç±»æŠŠé”®å€¼å­—èŠ‚æ•°ç»„ååºåˆ—åŒ–æˆå¯¹è±¡ã€‚&lt;/p&gt;
&lt;h4 id=&quot;receivebufferbytes--sendbufferbytes&quot;&gt;&lt;strong&gt;receive.buffer.bytes &amp;amp; send.buffer.bytes&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ã€€è®¾ç½® socket è¯»å†™æ•°æ®æ—¶ç”¨åˆ°çš„ TCP ç¼“å†²åŒºå¤§å°ã€‚å¦‚æœå®ƒä»¬è¢«è®¾ä¸º -1ï¼Œå°±ä½¿ç”¨æ“ä½œç³»ç»Ÿçš„é»˜è®¤å€¼ã€‚&lt;br/&gt;ã€€å½“ç”Ÿäº§è€…æˆ–æ¶ˆè´¹è€…ä¸ broker å¤„äºä¸åŒçš„æœºæˆ¿æ—¶ï¼Œå¯ä»¥é€‚å½“&lt;a href=&quot;https://www.cnblogs.com/buttercup/p/13812221.html#%E9%95%BF%E8%82%A5%E7%AE%A1%E9%81%93-lfn&quot; target=&quot;_blank&quot;&gt;å¢å¤§è¿™äº›å€¼&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&quot;fetchminbytes&quot;&gt;&lt;strong&gt;fetch.min.bytes&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;è¯¥å±æ€§æŒ‡å®šäº†æ¶ˆè´¹è€…ä»æœåŠ¡å™¨è·å–è®°å½•çš„æœ€å°å­—èŠ‚æ•°ã€‚&lt;br/&gt;broker åœ¨æ”¶åˆ°æ¶ˆè´¹è€…çš„æ•°æ®è¯·æ±‚æ—¶ï¼Œå¦‚æœå¯ç”¨çš„æ•°æ®é‡å°äºè¯¥é…ç½®ï¼Œé‚£ä¹ˆå®ƒä¼šç­‰åˆ°æœ‰è¶³å¤Ÿçš„å¯ç”¨æ•°æ®æ—¶ä¸€å¹¶è¿”å›ç»™æ¶ˆè´¹è€…ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæ¶ˆè´¹è€…çš„æ•°é‡æ¯”è¾ƒå¤šï¼ŒæŠŠè¯¥å±æ€§çš„å€¼è®¾ç½®å¾—å¤§ä¸€ç‚¹å¯ä»¥é™ä½ broker çš„å·¥ä½œè´Ÿè½½ã€‚&lt;br/&gt;æˆ–å½“æ¶ˆè´¹è€…è®¢é˜…çš„ä¸»é¢˜ä¸æ´»è·ƒæ—¶ï¼Œæ¶ˆè´¹è€…çš„ CPU ä½¿ç”¨ç‡å´å¾ˆé«˜ï¼Œå¯ä»¥é€‚å½“è°ƒå¤§è¯¥å€¼ã€‚&lt;/p&gt;
&lt;h4 id=&quot;fetchmaxwaitms&quot;&gt;&lt;strong&gt;fetch.max.wait.ms&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ã€€è¯¥å±æ€§æŒ‡å®šäº†å¯ç”¨æ•°æ®é‡ä¸è¶³æ—¶ broker çš„ç­‰å¾…æ—¶é—´ã€‚&lt;br/&gt;ã€€å¦‚æœæ²¡æœ‰è¶³å¤Ÿçš„æ•°æ®æµå…¥ Kafkaï¼Œæ¶ˆè´¹è€…è·å–æœ€å°æ•°æ®é‡çš„è¦æ±‚å°±å¾—ä¸åˆ°æ»¡è¶³ï¼Œæœ€ç»ˆå¯¼è‡´&lt;code&gt;fetch.max.wait.ms&lt;/code&gt;çš„å»¶è¿Ÿã€‚&lt;br/&gt;ã€€å¦‚æœè¦é™ä½æ½œåœ¨çš„å»¶è¿Ÿï¼ˆä¸ºäº†æ»¡è¶³ SLAï¼‰ï¼Œå¯ä»¥æŠŠè¯¥å‚æ•°å€¼è®¾ç½®å¾—å°ä¸€äº›ã€‚&lt;/p&gt;
&lt;h4 id=&quot;maxpollrecords&quot;&gt;&lt;strong&gt;max.poll.records&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ã€€è¯¥å±æ€§ç”¨äºæ§åˆ¶å•æ¬¡è°ƒç”¨&lt;code&gt;KafkaConsumer.poll()&lt;/code&gt;æ–¹æ³•èƒ½å¤Ÿè¿”å›çš„è®°å½•æ•°é‡ã€‚&lt;br/&gt;ã€€å¯ä»¥å€ŸåŠ©è¯¥é…ç½®æ§åˆ¶åœ¨è½®è¯¢é‡Œéœ€è¦å¤„ç†çš„æ•°æ®é‡ã€‚&lt;/p&gt;
&lt;h4 id=&quot;maxpartitionfetchbytes&quot;&gt;&lt;strong&gt;max.partition.fetch.bytes&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ã€€è¯¥å±æ€§æŒ‡å®šäº†&lt;code&gt;KafkaConsumer.poll()&lt;/code&gt; æ–¹æ³•ä»æ¯ä¸ªåˆ†åŒºé‡Œè¿”å›çš„æœ€å¤§å­—èŠ‚æ•°ã€‚&lt;br/&gt;ã€€æ¶ˆè´¹è€…éœ€è¦ä¿è¯ &lt;strong&gt;&lt;code&gt;max.partition.fetch.bytes&lt;/code&gt; * æ¶ˆè´¹åˆ†åŒºæ•°é‡&lt;/strong&gt; å¯ç”¨å†…å­˜æ¥æ¥æ”¶è®°å½•ã€‚&lt;br/&gt;ã€€åœ¨ä¸ºæ¶ˆè´¹è€…åˆ†é…å†…å­˜æ—¶ï¼Œå¯ä»¥ç»™å®ƒä»¬å¤šåˆ†é…ä¸€äº›ï¼Œå› ä¸ºå¦‚æœç¾¤ç»„é‡Œæœ‰æ¶ˆè´¹è€…å‘ç”Ÿå´©æºƒï¼Œå‰©ä¸‹çš„æ¶ˆè´¹è€…éœ€è¦å¤„ç†æ›´å¤šçš„åˆ†åŒºã€‚&lt;/p&gt;
&lt;p&gt;ã€€è¯¥å€¼å¿…é¡»æ¯” broker èƒ½å¤Ÿæ¥æ”¶çš„æœ€å¤§æ¶ˆæ¯çš„å­—èŠ‚æ•°&lt;code&gt;max.message.size&lt;/code&gt;å¤§ï¼Œå¦åˆ™æ¶ˆè´¹è€…å¯èƒ½æ— æ³•è¯»å–è¿™äº›æ¶ˆæ¯ï¼Œå¯¼è‡´æ¶ˆè´¹è€…ä¸€ç›´æŒ‚èµ·é‡è¯•ã€‚&lt;/p&gt;
&lt;p&gt;ã€€åœ¨è®¾ç½®è¯¥å±æ€§æ—¶ï¼Œå¦ä¸€ä¸ªéœ€è¦è€ƒè™‘çš„å› ç´ æ˜¯æ¶ˆè´¹è€…å¤„ç†æ•°æ®çš„æ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;ã€€æ¶ˆè´¹è€…éœ€è¦é¢‘ç¹è°ƒç”¨ &lt;code&gt;KafkaConsumer.poll()&lt;/code&gt; æ–¹æ³•æ¥é¿å…ä¼šè¯è¿‡æœŸå’Œå‘ç”Ÿåˆ†åŒºå†å‡è¡¡ï¼Œå¦‚æœå•æ¬¡è°ƒç”¨è¿”å›çš„æ•°æ®å¤ªå¤šï¼Œæ¶ˆè´¹è€…éœ€è¦æ›´å¤šçš„æ—¶é—´æ¥å¤„ç†ï¼Œå¯èƒ½æ— æ³•åŠæ—¶è¿›è¡Œä¸‹ä¸€ä¸ªè½®è¯¢æ¥é¿å…ä¼šè¯è¿‡æœŸã€‚&lt;/p&gt;
&lt;p&gt;ã€€å¦‚æœå‡ºç°è¿™ç§æƒ…å†µï¼Œå¯ä»¥æŠŠè¯¥å€¼æ”¹å°ï¼Œæˆ–è€…å»¶é•¿ä¼šè¯è¿‡æœŸæ—¶é—´ã€‚&lt;/p&gt;
&lt;h4 id=&quot;sessiontimeoutms&quot;&gt;&lt;strong&gt;session.timeout.ms&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ã€€è¯¥å±æ€§æŒ‡å®šäº†æ¶ˆè´¹è€…åœ¨è¢«è®¤ä¸ºä¸‹çº¿ä¹‹å‰å¯ä»¥ä¸æœåŠ¡å™¨æ–­å¼€è¿æ¥çš„æ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;ã€€å¦‚æœæ¶ˆè´¹è€…æ²¡æœ‰åœ¨æŒ‡å®šçš„æ—¶é—´å†…å‘é€å¿ƒè·³ç»™ç¾¤ç»„åè°ƒå™¨ï¼Œä¼šè¢«è®¤ä¸ºå·²ç»ä¸‹çº¿ã€‚&lt;br/&gt;ã€€åè°ƒå™¨å°±ä¼šè§¦å‘å†å‡è¡¡ï¼ŒæŠŠå®ƒçš„åˆ†åŒºåˆ†é…ç»™ç¾¤ç»„é‡Œçš„å…¶ä»–æ¶ˆè´¹è€…ã€‚&lt;/p&gt;
&lt;p&gt;ã€€è¯¥å€¼è¶Šå°ï¼Œå¯ä»¥æ›´å¿«åœ°æ£€æµ‹å’Œæ¢å¤å´©æºƒçš„èŠ‚ç‚¹ï¼Œä½†å¯èƒ½å¯¼è‡´éé¢„æœŸçš„å†å‡è¡¡ã€‚&lt;br/&gt;ã€€è¯¥å€¼è¶Šå¤§ï¼Œå¯ä»¥å‡å°‘æ„å¤–çš„å†å‡è¡¡ï¼Œä¸è¿‡æ£€æµ‹èŠ‚ç‚¹å´©æºƒéœ€è¦æ›´é•¿çš„æ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;ã€€è¯¥å±æ€§ä¸&lt;code&gt;heartbeat.interval.ms&lt;/code&gt;ç´§å¯†ç›¸å…³ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;heartbeat.interval.ms&lt;/code&gt; æŒ‡å®šäº† poll() æ–¹æ³•å‘åè°ƒå™¨å‘é€å¿ƒè·³çš„é¢‘ç‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;session.timeout.ms&lt;/code&gt; åˆ™æŒ‡å®šäº†æ¶ˆè´¹è€…å¯ä»¥å¤šä¹…ä¸å‘é€å¿ƒè·³ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ã€€ä¸€èˆ¬éœ€è¦åŒæ—¶ä¿®æ”¹è¿™ä¸¤ä¸ªå±æ€§ï¼Œheartbeat.interval.ms ä¸€èˆ¬è®¾ç½®ä¸º session.timeout.ms çš„ä¸‰åˆ†ä¹‹ä¸€ã€‚&lt;/p&gt;
&lt;h4 id=&quot;autooffsetreset&quot;&gt;&lt;strong&gt;auto.offset.reset&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ã€€è¯¥å±æ€§æŒ‡å®šäº†æ¶ˆè´¹è€…åœ¨è¯»å–ä¸€ä¸ªæ²¡æœ‰åç§»é‡çš„åˆ†åŒºæˆ–è€…åç§»é‡å¤±æ•ˆæ—¶ï¼ˆåŒ…å«åç§»é‡çš„è®°å½•å·²è¿‡æ—¶å¹¶è¢«åˆ é™¤ï¼‰è¯¥ä½œä½•å¤„ç†ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;latest&lt;/code&gt; åœ¨åç§»é‡æ— æ•ˆçš„æƒ…å†µä¸‹ï¼Œæ¶ˆè´¹è€…å°†ä»æœ€æ–°çš„è®°å½•å¼€å§‹è¯»å–æ•°æ®ï¼ˆåœ¨æ¶ˆè´¹è€…å¯åŠ¨ä¹‹åç”Ÿæˆçš„è®°å½•ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;earliest&lt;/code&gt; åœ¨åç§»é‡æ— æ•ˆçš„æƒ…å†µä¸‹ï¼Œæ¶ˆè´¹è€…å°†ä»èµ·å§‹ä½ç½®è¯»å–åˆ†åŒºçš„è®°å½•ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h4 id=&quot;enableautocommit&quot;&gt;&lt;strong&gt;enable.auto.commit&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ã€€è¯¥å±æ€§æŒ‡å®šäº†æ¶ˆè´¹è€…æ˜¯å¦è‡ªåŠ¨æäº¤åç§»é‡ï¼ˆå¯ä»¥é€šè¿‡é…ç½®&lt;code&gt;auto.commit.interval.ms&lt;/code&gt;æ¥æ§åˆ¶æäº¤çš„é¢‘ç‡ï¼‰ã€‚&lt;br/&gt;ã€€ä¸ºäº†å°½é‡é¿å…å‡ºç°é‡å¤æ•°æ®å’Œæ•°æ®ä¸¢å¤±ï¼Œå¯ä»¥æŠŠå®ƒè®¾ä¸º false ï¼Œç”±è‡ªå·±æ§åˆ¶ä½•æ—¶æäº¤åç§»é‡ã€‚&lt;/p&gt;
&lt;h4 id=&quot;partitionassignmentstrategy&quot;&gt;&lt;strong&gt;partition.assignment.strategy&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ã€€è¿™ä¸¤ä¸ªå±æ€§å¿…é¡»è¢«è®¾ç½®ä¸ºä¸€ä¸ªå®ç°äº†&lt;code&gt;org.apache.kafka.clients.consumer.internals.PartitionAssignor&lt;/code&gt;æ¥å£çš„ç±»ã€‚&lt;br/&gt;ã€€æ¶ˆè´¹åè°ƒè€…&lt;code&gt;ConsumerCoordinator&lt;/code&gt;ä¼šä½¿ç”¨è¿™ä¸ªç±»ï¼Œæ ¹æ®ç»™å®šçš„æ¶ˆè´¹è€…å’Œä¸»é¢˜ï¼Œå†³å®šå“ªäº›åˆ†åŒºåº”è¯¥è¢«åˆ†é…ç»™å“ªä¸ªæ¶ˆè´¹è€…ã€‚&lt;/p&gt;
&lt;p&gt;ã€€Kafka é»˜è®¤çš„åˆ†é…ç­–ç•¥ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;org.apache.kafka.clients.consumer.RangeAssignor&lt;/code&gt; &lt;strong&gt;æŠŠä¸»é¢˜çš„è‹¥å¹²ä¸ªè¿ç»­çš„åˆ†åŒºåˆ†é…ç»™æ¶ˆè´¹è€…&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;org.apache.kafka.clients.consumer.RoundRobinAssignor&lt;/code&gt; &lt;strong&gt;æŠŠä¸»é¢˜çš„æ‰€æœ‰åˆ†åŒºé€ä¸ªåˆ†é…ç»™æ¶ˆè´¹è€…&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;org.apache.kafka.clients.consumer.StickyAssignor&lt;/code&gt; &lt;strong&gt;å°½å¯ä¿è¯åˆ†é…å¹³è¡¡çš„å‰æä¸‹å‡å°‘å†å‡è¡¡é€ æˆçš„å˜æ›´&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;</description>
<pubDate>Thu, 11 Feb 2021 08:19:00 +0000</pubDate>
<dc:creator>buttercup</dc:creator>
<og:description>ä½¿ç”¨æ–¹å¼ åˆ›å»ºä¸€ä¸ª KafkaConsumer å¯¹è±¡è®¢é˜…ä¸»é¢˜å¹¶å¼€å§‹æ¥æ”¶æ¶ˆæ¯ï¼š Properties properties = new Properties(); properties.setPrope</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/buttercup/p/14208062.html</dc:identifier>
</item>
<item>
<title>Java RMI å®ç°ä¸€ä¸ªç®€å•çš„GFSï¼ˆè°·æ­Œæ–‡ä»¶ç³»ç»Ÿï¼‰â€”â€”ä»‹ç»ç¯‡  - æ™¨æ˜Ÿ1032</title>
<link>http://www.cnblogs.com/maogen/p/gfs_0.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/maogen/p/gfs_0.html</guid>
<description>&lt;p&gt;æœ¬ç³»åˆ—ä¸»è¦æ˜¯ä½¿ç”¨Java RMI å®ç°ä¸€ä¸ªç®€å•çš„GFSï¼ˆè°·æ­Œæ–‡ä»¶ç³»ç»Ÿï¼Œgoogle file systemï¼‰ã€‚é¦–å…ˆè¿›è¡Œæ•´ä½“ä»‹ç»ï¼Œç„¶åå¯¹èƒŒæ™¯è¿›è¡Œæè¿°ä»¥åŠå¯¹ç³»ç»Ÿè¿›è¡Œè®¾è®¡ï¼ŒåŒæ—¶å®ç°ç³»ç»Ÿï¼Œæä¾›æ¼”ç¤ºè§†é¢‘å’Œæºä»£ç ï¼Œæœ›å¤šå¤šæ”¯æŒï¼&lt;/p&gt;&lt;div id=&quot;cnblogs_post_body&quot; readability=&quot;68.253080082136&quot;&gt;
&lt;p&gt;æœ¬ç³»åˆ—ä¸»è¦æ˜¯ä½¿ç”¨Java RMIå®ç°ä¸€ä¸ªç®€å•çš„GFSï¼ˆè°·æ­Œæ–‡ä»¶ç³»ç»Ÿï¼Œgoogle file systemï¼‰ï¼Œé¦–å…ˆæ•´ä½“ç®€å•ä»‹ç»ä¸‹è¯¥é¡¹ç›®ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;3.6545454545455&quot;&gt;
&lt;p&gt;[ä¸ºäº†æ›´å¥½çš„é˜…è¯»ä»¥åŠæŸ¥çœ‹å…¶ä»–ç¯‡ç« ï¼Œè¯·æŸ¥çœ‹åŸæ–‡ï¼š&lt;a href=&quot;https://www.cnblogs.com/maogen/p/gfs_0.html&quot; target=&quot;_blank&quot;&gt;https://www.cnblogs.com/maogen/p/gfs_0.html&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote readability=&quot;9&quot;&gt;
&lt;p&gt;ğŸ®ç¥å¤§å®¶é™¤å¤•å¿«ä¹ï¼ğŸ®&lt;/p&gt;
&lt;p&gt;âœ¨æ–°çš„ä¸€å¹´ï¼Œç¥å¤§å®¶èº«ä½“å®‰åº·ï¼Œå¾—å¿æ‰€æ„¿ï¼Œå¹¶æ‹¥æœ‰æ‰€æœ‰çš„æ™´å¤©å’Œç¾æ¢¦âœ¨&lt;/p&gt;
&lt;p&gt;ğŸŒ™ ğŸŒ˜ ğŸŒ— ğŸŒ– ğŸŒ•áµ€á´´á´± á´®á´±Ë¢áµ€ á´µË¢ á¶ á´¼á´¿ áµá´¼áµ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç³»ç»Ÿ&lt;strong&gt;èƒŒæ™¯å’Œè®¾è®¡&lt;/strong&gt;ã€ç³»ç»Ÿå®ç°ã€&lt;strong&gt;æ¼”ç¤ºè§†é¢‘&lt;/strong&gt;ä»¥åŠ&lt;strong&gt;æºä»£ç &lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;èƒŒæ™¯ä¸è®¾è®¡ç¯‡ï¼š&lt;/code&gt;&lt;/strong&gt;å¾…æ›´æ–°ï¼Œè¯·å…³æ³¨ä½œè€…åšå®¢å›­&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;æ¼”ç¤ºä¸å®ç°ç¯‡ï¼š&lt;/code&gt;&lt;/strong&gt;å¾…æ›´æ–°ï¼Œè¯·å…³æ³¨ä½œè€…åšå®¢å›­&lt;/p&gt;
&lt;blockquote readability=&quot;2.5396825396825&quot;&gt;
&lt;p&gt;ä½œè€…ï¼šæ™¨æ˜Ÿ1032-åšå®¢å›­ï¼š&lt;a href=&quot;https://www.cnblogs.com/maogen/&quot; target=&quot;_blank&quot;&gt;https://www.cnblogs.com/maogen/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr/&gt;&lt;p&gt;&lt;img src=&quot;https://gitee.com/maogen_ymg/img-host/raw/master/ppt_gfs_%201.jpg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/maogen_ymg/img-host/raw/master/ppt_gfs_%202.jpg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/maogen_ymg/img-host/raw/master/ppt_gfs_%203.jpg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/maogen_ymg/img-host/raw/master/ppt_gfs_%204.jpg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/maogen_ymg/img-host/raw/master/ppt_gfs_%205.jpg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/maogen_ymg/img-host/raw/master/ppt_gfs_%206.jpg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/maogen_ymg/img-host/raw/master/ppt_gfs_%207.jpg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/maogen_ymg/img-host/raw/master/ppt_gfs_%208.jpg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/maogen_ymg/img-host/raw/master/ppt_gfs_%209.jpg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gitee.com/maogen_ymg/img-host/raw/master/ppt_gfs_%2010.jpg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;hr/&gt;&lt;blockquote readability=&quot;2.5396825396825&quot;&gt;
&lt;p&gt;ä½œè€…ï¼šæ™¨æ˜Ÿ1032-åšå®¢å›­ï¼š&lt;a href=&quot;https://www.cnblogs.com/maogen/&quot; target=&quot;_blank&quot;&gt;https://www.cnblogs.com/maogen/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç³»ç»Ÿ&lt;strong&gt;èƒŒæ™¯å’Œè®¾è®¡&lt;/strong&gt;ã€ç³»ç»Ÿå®ç°ã€&lt;strong&gt;æ¼”ç¤ºè§†é¢‘&lt;/strong&gt;ä»¥åŠ&lt;strong&gt;æºä»£ç &lt;/strong&gt;ï¼Œå°½åœ¨å…¶ä»–ç¯‡ç« ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;èƒŒæ™¯ä¸è®¾è®¡ç¯‡ï¼š&lt;/code&gt;&lt;/strong&gt;å¾…æ›´æ–°ï¼Œè¯·å…³æ³¨ä½œè€…åšå®¢å›­&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;æ¼”ç¤ºä¸å®ç°ç¯‡ï¼š&lt;/code&gt;&lt;/strong&gt;å¾…æ›´æ–°ï¼Œè¯·å…³æ³¨ä½œè€…åšå®¢å›­&lt;/p&gt;
&lt;/div&gt;</description>
<pubDate>Thu, 11 Feb 2021 07:36:00 +0000</pubDate>
<dc:creator>æ™¨æ˜Ÿ1032</dc:creator>
<og:description>æœ¬ç³»åˆ—ä¸»è¦æ˜¯ä½¿ç”¨Java RMI å®ç°ä¸€ä¸ªç®€å•çš„GFSï¼ˆè°·æ­Œæ–‡ä»¶ç³»ç»Ÿï¼Œgoogle file systemï¼‰ã€‚é¦–å…ˆè¿›è¡Œæ•´ä½“ä»‹ç»ï¼Œç„¶åå¯¹èƒŒæ™¯è¿›è¡Œæè¿°ä»¥åŠå¯¹ç³»ç»Ÿè¿›è¡Œè®¾è®¡ï¼ŒåŒæ—¶å®ç°ç³»ç»Ÿï¼Œæä¾›æ¼”ç¤ºè§†é¢‘å’Œæºä»£ç </og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/maogen/p/gfs_0.html</dc:identifier>
</item>
<item>
<title>è®¾è®¡æ¨¡å¼ï¼ˆäºŒåäºŒï¼‰â€”â€”çŠ¶æ€æ¨¡å¼ï¼ˆAPPæŠ½å¥–æ´»åŠ¨+å€Ÿè´·å¹³å°æºç å‰–æï¼‰ - åå››lin</title>
<link>http://www.cnblogs.com/linzm14/p/14394072.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/linzm14/p/14394072.html</guid>
<description>
&lt;h2&gt;24.1Â APP æŠ½å¥–æ´»åŠ¨é—®é¢˜&lt;/h2&gt;

&lt;p&gt;&lt;span&gt;è¯·ç¼–å†™ç¨‹åºå®Œæˆ&lt;/span&gt; APP &lt;span&gt;æŠ½å¥–æ´»åŠ¨&lt;/span&gt; &lt;span&gt;å…·ä½“è¦æ±‚å¦‚ä¸‹&lt;/span&gt;:&lt;/p&gt;
&lt;p class=&quot;16&quot;&gt;1)Â &lt;span&gt;å‡å¦‚æ¯å‚åŠ ä¸€æ¬¡è¿™ä¸ªæ´»åŠ¨è¦æ‰£é™¤ç”¨æˆ·&lt;/span&gt; 50 &lt;span&gt;ç§¯åˆ†ï¼Œä¸­å¥–æ¦‚ç‡æ˜¯&lt;/span&gt; 10%&lt;/p&gt;
&lt;p class=&quot;16&quot;&gt;2)Â å¥–å“æ•°é‡å›ºå®šï¼ŒæŠ½å®Œå°±ä¸èƒ½æŠ½å¥–&lt;/p&gt;
&lt;p class=&quot;16&quot;&gt;3)Â æ´»åŠ¨æœ‰å››ä¸ªçŠ¶æ€: å¯ä»¥æŠ½å¥–ã€ä¸èƒ½æŠ½å¥–ã€å‘æ”¾å¥–å“å’Œå¥–å“é¢†å®Œ&lt;/p&gt;
&lt;p class=&quot;16&quot;&gt;4)Â æ´»åŠ¨çš„å››ä¸ªçŠ¶æ€è½¬æ¢å…³ç³»å›¾(ä¸‹å›¾)&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2257481/202102/2257481-20210209200023521-1326717358.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2&gt;24.1Â çŠ¶æ€æ¨¡å¼åŸºæœ¬ä»‹ç»&lt;/h2&gt;
&lt;p&gt;åŸºæœ¬ä»‹ç»&lt;/p&gt;
&lt;p class=&quot;16&quot;&gt;1)Â çŠ¶æ€æ¨¡å¼ï¼ˆ&lt;strong&gt;State&lt;/strong&gt;&lt;strong&gt;Â &lt;/strong&gt;&lt;strong&gt;Pattern&lt;/strong&gt;ï¼‰ï¼šå®ƒä¸»è¦ç”¨æ¥è§£å†³å¯¹è±¡åœ¨å¤šç§çŠ¶æ€è½¬æ¢æ—¶ï¼Œéœ€è¦å¯¹å¤–è¾“å‡ºä¸åŒçš„è¡Œä¸ºçš„é—®é¢˜ã€‚çŠ¶æ€å’Œè¡Œä¸ºæ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼ŒçŠ¶æ€ä¹‹é—´å¯ä»¥ç›¸äº’è½¬æ¢&lt;/p&gt;
&lt;p class=&quot;16&quot;&gt;2)Â å½“ä¸€ä¸ªå¯¹è±¡çš„å†…åœ¨çŠ¶æ€æ”¹å˜æ—¶ï¼Œå…è®¸æ”¹å˜å…¶è¡Œä¸ºï¼Œè¿™ä¸ªå¯¹è±¡çœ‹èµ·æ¥åƒæ˜¯æ”¹å˜äº†å…¶ç±»&lt;/p&gt;
&lt;h2&gt;24.2Â çŠ¶æ€æ¨¡å¼çš„åŸç†ç±»å›¾&lt;/h2&gt;
&lt;p&gt;Â &lt;img src=&quot;https://img2020.cnblogs.com/blog/2257481/202102/2257481-20210209200113834-1787430638.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;


&lt;ul&gt;&lt;li&gt;å¯¹åŸç†ç±»å›¾çš„è¯´æ˜-å³(çŠ¶æ€æ¨¡å¼çš„è§’è‰²åŠèŒè´£)&lt;/li&gt;
&lt;/ul&gt;&lt;p class=&quot;15&quot;&gt;1)Â ContextÂ ç±»ä¸ºç¯å¢ƒè§’è‰², Â &lt;span&gt;ç”¨äºç»´æŠ¤&lt;/span&gt; StateÂ å®ä¾‹,è¿™ä¸ªå®ä¾‹å®šä¹‰å½“å‰çŠ¶æ€&lt;/p&gt;
&lt;p class=&quot;15&quot;&gt;2)Â StateÂ æ˜¯æŠ½è±¡çŠ¶æ€è§’è‰²,&lt;span&gt;å®šä¹‰ä¸€ä¸ªæ¥å£å°è£…ä¸&lt;/span&gt; Context Â çš„ä¸€ä¸ªç‰¹ç‚¹æ¥å£ç›¸å…³è¡Œä¸º&lt;/p&gt;
&lt;p class=&quot;15&quot;&gt;3)Â ConcreteState &lt;span&gt;å…·ä½“çš„çŠ¶æ€è§’è‰²ï¼Œæ¯ä¸ªå­ç±»å®ç°ä¸€ä¸ªä¸&lt;/span&gt; ContextÂ çš„ä¸€ä¸ªçŠ¶æ€ç›¸å…³è¡Œä¸º&lt;/p&gt;
&lt;h2&gt;24.1Â &lt;span&gt;çŠ¶æ€æ¨¡å¼è§£å†³&lt;/span&gt; APPÂ æŠ½å¥–é—®&lt;/h2&gt;
&lt;p class=&quot;15&quot;&gt;1)Â åº”ç”¨å®ä¾‹è¦æ±‚&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å®Œæˆ&lt;/span&gt; APP æŠ½å¥–æ´»åŠ¨é¡¹ç›®ï¼Œä½¿ç”¨çŠ¶æ€æ¨¡å¼.&lt;/p&gt;
&lt;p class=&quot;15&quot;&gt;2)Â æ€è·¯åˆ†æå’Œå›¾è§£(ç±»å›¾)&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å®šä¹‰å‡ºä¸€ä¸ªæ¥å£å«çŠ¶æ€æ¥å£ï¼Œæ¯ä¸ªçŠ¶æ€éƒ½å®ç°å®ƒã€‚&lt;/li&gt;
&lt;li&gt;æ¥å£æœ‰æ‰£é™¤ç§¯åˆ†æ–¹æ³•ã€æŠ½å¥–æ–¹æ³•ã€å‘æ”¾å¥–å“æ–¹æ³•&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2257481/202102/2257481-20210209173626128-621451376.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;3)ä»£ç å®ç°&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2257481/202102/2257481-20210209200245133-1613553894.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;


&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package&lt;/span&gt;&lt;span&gt; com.lin.state;
    
    &lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
     * çŠ¶æ€æŠ½è±¡ç±»
     * 
     * &lt;/span&gt;&lt;span&gt;@author&lt;/span&gt;&lt;span&gt; Administrator
     *
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;abstract&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; State {

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ‰£é™¤ç§¯åˆ† - 50&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;abstract&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; deductMoney();

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ˜¯å¦æŠ½ä¸­å¥–å“&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;abstract&lt;/span&gt; &lt;span&gt;boolean&lt;/span&gt;&lt;span&gt; raffle();

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å‘æ”¾å¥–å“&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;abstract&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; dispensePrize();

}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package&lt;/span&gt;&lt;span&gt; com.lin.state;

&lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
 * æŠ½å¥–æ´»åŠ¨ //
 *
 * &lt;/span&gt;&lt;span&gt;@author&lt;/span&gt;&lt;span&gt; Administrator
 *
 &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; RaffleActivity {

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; state è¡¨ç¤ºæ´»åŠ¨å½“å‰çš„çŠ¶æ€ï¼Œæ˜¯å˜åŒ–&lt;/span&gt;
    State state = &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¥–å“æ•°é‡&lt;/span&gt;
    &lt;span&gt;int&lt;/span&gt; count = 0&lt;span&gt;;

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å››ä¸ªå±æ€§ï¼Œè¡¨ç¤ºå››ç§çŠ¶æ€&lt;/span&gt;
    State noRafflleState = &lt;span&gt;new&lt;/span&gt; NoRaffleState(&lt;span&gt;this&lt;/span&gt;&lt;span&gt;);
    State canRaffleState &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; CanRaffleState(&lt;span&gt;this&lt;/span&gt;&lt;span&gt;);

    State dispenseState &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; DispenseState(&lt;span&gt;this&lt;/span&gt;&lt;span&gt;);
    State dispensOutState &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; DispenseOutState(&lt;span&gt;this&lt;/span&gt;&lt;span&gt;);

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ„é€ å™¨
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 1. åˆå§‹åŒ–å½“å‰çš„çŠ¶æ€ä¸º noRafflleStateï¼ˆå³ä¸èƒ½æŠ½å¥–çš„çŠ¶æ€ï¼‰
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 2. åˆå§‹åŒ–å¥–å“çš„æ•°é‡&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; RaffleActivity(&lt;span&gt;int&lt;/span&gt;&lt;span&gt; count) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.state =&lt;span&gt; getNoRafflleState();
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.count =&lt;span&gt; count;
    }

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ‰£åˆ†, è°ƒç”¨å½“å‰çŠ¶æ€çš„ deductMoney&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; debuctMoney() {
        state.deductMoney();

    }

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æŠ½å¥–&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; raffle() {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¦‚æœå½“å‰çš„çŠ¶æ€æ˜¯æŠ½å¥–æˆåŠŸ&lt;/span&gt;

        &lt;span&gt;if&lt;/span&gt;&lt;span&gt; (state.raffle()) {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; é¢†å–å¥–å“state.dispensePrize();&lt;/span&gt;
&lt;span&gt;        }

    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; State getState() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; state;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; setState(State state) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.state =&lt;span&gt; state;
    }

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; è¿™é‡Œè¯·å¤§å®¶æ³¨æ„ï¼Œæ¯é¢†å–ä¸€æ¬¡å¥–å“ï¼Œcount--&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; getCount() {
        &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; curCount =&lt;span&gt; count;
        count&lt;/span&gt;--&lt;span&gt;;
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; curCount;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; setCount(&lt;span&gt;int&lt;/span&gt;&lt;span&gt; count) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.count =&lt;span&gt; count;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; State getNoRafflleState() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; noRafflleState;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; setNoRafflleState(State noRafflleState) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.noRafflleState =&lt;span&gt; noRafflleState;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; State getCanRaffleState() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; canRaffleState;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; setCanRaffleState(State canRaffleState) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.canRaffleState =&lt;span&gt; canRaffleState;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; State getDispenseState() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; dispenseState;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; setDispenseState(State dispenseState) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.dispenseState =&lt;span&gt; dispenseState;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; State getDispensOutState() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; dispensOutState;

    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; setDispensOutState(State dispensOutState) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.dispensOutState =&lt;span&gt; dispensOutState;
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package&lt;/span&gt;&lt;span&gt; com.lin.state;


    &lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
    *ä¸èƒ½æŠ½å¥–çŠ¶æ€
    *&lt;/span&gt;&lt;span&gt;@author&lt;/span&gt;&lt;span&gt; Administrator
    *
    &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;

&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; NoRaffleState &lt;span&gt;extends&lt;/span&gt;&lt;span&gt; State {

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; åˆå§‹åŒ–æ—¶ä¼ å…¥æ´»åŠ¨å¼•ç”¨ï¼Œæ‰£é™¤ç§¯åˆ†åæ”¹å˜å…¶çŠ¶æ€&lt;/span&gt;
&lt;span&gt;    RaffleActivity activity;


    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; NoRaffleState(RaffleActivity activity) { 
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.activity =&lt;span&gt; activity;
    }

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å½“å‰çŠ¶æ€å¯ä»¥æ‰£ç§¯åˆ† , æ‰£é™¤åï¼Œå°†çŠ¶æ€è®¾ç½®æˆå¯ä»¥æŠ½å¥–çŠ¶æ€&lt;/span&gt;
&lt;span&gt;    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; deductMoney() {
        System.out.println(&lt;/span&gt;&quot;æ‰£é™¤ 50 ç§¯åˆ†æˆåŠŸï¼Œæ‚¨å¯ä»¥æŠ½å¥–äº†&quot;&lt;span&gt;); activity.setState(activity.getCanRaffleState());
    }


    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å½“å‰çŠ¶æ€ä¸èƒ½æŠ½å¥–&lt;/span&gt;
&lt;span&gt;    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;boolean&lt;/span&gt;&lt;span&gt; raffle() {
        System.out.println(&lt;/span&gt;&quot;æ‰£äº†ç§¯åˆ†æ‰èƒ½æŠ½å¥–å–”ï¼&quot;); &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
    }

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å½“å‰çŠ¶æ€ä¸èƒ½å‘å¥–å“&lt;/span&gt;
&lt;span&gt;    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; dispensePrize() {
        System.out.println(&lt;/span&gt;&quot;ä¸èƒ½å‘æ”¾å¥–å“&quot;&lt;span&gt;);
    }
    
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package&lt;/span&gt;&lt;span&gt; com.lin.state;

    &lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
     * å‘æ”¾å¥–å“çš„çŠ¶æ€
     * 
     * &lt;/span&gt;&lt;span&gt;@author&lt;/span&gt;&lt;span&gt; Administrator
     *
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; DispenseState &lt;span&gt;extends&lt;/span&gt;&lt;span&gt; State {

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; åˆå§‹åŒ–æ—¶ä¼ å…¥æ´»åŠ¨å¼•ç”¨ï¼Œå‘æ”¾å¥–å“åæ”¹å˜å…¶çŠ¶æ€&lt;/span&gt;
&lt;span&gt;    RaffleActivity activity;

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; DispenseState(RaffleActivity activity) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.activity =&lt;span&gt; activity;
    }

    &lt;/span&gt;&lt;span&gt;//
&lt;/span&gt;&lt;span&gt;
    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; deductMoney() {
        System.out.println(&lt;/span&gt;&quot;ä¸èƒ½æ‰£é™¤ç§¯åˆ†&quot;&lt;span&gt;);
    }

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;boolean&lt;/span&gt;&lt;span&gt; raffle() {
        System.out.println(&lt;/span&gt;&quot;ä¸èƒ½æŠ½å¥–&quot;&lt;span&gt;);
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
    }

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å‘æ”¾å¥–å“ @Override&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; dispensePrize() {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (activity.getCount() &amp;gt; 0&lt;span&gt;) {
            System.out.println(&lt;/span&gt;&quot;æ­å–œä¸­å¥–äº†&quot;&lt;span&gt;);
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ”¹å˜çŠ¶æ€ä¸ºä¸èƒ½æŠ½å¥–&lt;/span&gt;
&lt;span&gt;            activity.setState(activity.getNoRafflleState());
        } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
            System.out.println(&lt;/span&gt;&quot;å¾ˆé—æ†¾ï¼Œå¥–å“å‘é€å®Œäº†&quot;&lt;span&gt;);
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ”¹å˜çŠ¶æ€ä¸ºå¥–å“å‘é€å®Œæ¯•, åé¢æˆ‘ä»¬å°±ä¸å¯ä»¥æŠ½å¥–&lt;/span&gt;
&lt;span&gt;            activity.setState(activity.getDispensOutState());
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;System.out.println(&quot;æŠ½å¥–æ´»åŠ¨ç»“æŸ&quot;);
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;System.exit(0);&lt;/span&gt;
&lt;span&gt;        }

    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package&lt;/span&gt;&lt;span&gt; com.lin.state;

    &lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
     * å¥–å“å‘æ”¾å®Œæ¯•çŠ¶æ€ è¯´æ˜ï¼Œå½“æˆ‘ä»¬ activity æ”¹å˜æˆ DispenseOutStateï¼Œ æŠ½å¥–æ´»åŠ¨ç»“æŸ
     * 
     * &lt;/span&gt;&lt;span&gt;@author&lt;/span&gt;&lt;span&gt; Administrator
     *
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; DispenseOutState &lt;span&gt;extends&lt;/span&gt;&lt;span&gt; State {

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; åˆå§‹åŒ–æ—¶ä¼ å…¥æ´»åŠ¨å¼•ç”¨&lt;/span&gt;
&lt;span&gt;    RaffleActivity activity;

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; DispenseOutState(RaffleActivity activity) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.activity =&lt;span&gt; activity;
    }

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; deductMoney() {
        System.out.println(&lt;/span&gt;&quot;å¥–å“å‘é€å®Œäº†ï¼Œè¯·ä¸‹æ¬¡å†å‚åŠ &quot;&lt;span&gt;);
    }

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;boolean&lt;/span&gt;&lt;span&gt; raffle() {
        System.out.println(&lt;/span&gt;&quot;å¥–å“å‘é€å®Œäº†ï¼Œè¯·ä¸‹æ¬¡å†å‚åŠ &quot;&lt;span&gt;);
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;

    }

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; dispensePrize() {
        System.out.println(&lt;/span&gt;&quot;å¥–å“å‘é€å®Œäº†ï¼Œè¯·ä¸‹æ¬¡å†å‚åŠ &quot;&lt;span&gt;);
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package&lt;/span&gt;&lt;span&gt; com.lin.state;

&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.util.Random;

&lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
 * å¯ä»¥æŠ½å¥–çš„çŠ¶æ€
 * 
 * &lt;/span&gt;&lt;span&gt;@author&lt;/span&gt;&lt;span&gt; Administrator
 *
 &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; CanRaffleState &lt;span&gt;extends&lt;/span&gt;&lt;span&gt; State {

    RaffleActivity activity;

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; CanRaffleState(RaffleActivity activity) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.activity =&lt;span&gt; activity;
    }

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å·²ç»æ‰£é™¤äº†ç§¯åˆ†ï¼Œä¸èƒ½å†æ‰£ @Override&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; deductMoney() {
        System.out.println(&lt;/span&gt;&quot;å·²ç»æ‰£å–è¿‡äº†ç§¯åˆ†&quot;&lt;span&gt;);
    }

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¯ä»¥æŠ½å¥–, æŠ½å®Œå¥–åï¼Œæ ¹æ®å®é™…æƒ…å†µï¼Œæ”¹æˆæ–°çš„çŠ¶æ€&lt;/span&gt;
&lt;span&gt;    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;boolean&lt;/span&gt;&lt;span&gt; raffle() {
        System.out.println(&lt;/span&gt;&quot;æ­£åœ¨æŠ½å¥–ï¼Œè¯·ç¨ç­‰ï¼&quot;&lt;span&gt;);
        Random r &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Random();
        &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; num = r.nextInt(10&lt;span&gt;);
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 10%ä¸­å¥–æœºä¼š&lt;/span&gt;
        &lt;span&gt;if&lt;/span&gt; (num == 0&lt;span&gt;) {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ”¹ å˜ æ´» åŠ¨ çŠ¶ æ€ ä¸º å‘ æ”¾ å¥– å“ context &lt;/span&gt;
&lt;span&gt;            activity.setState(activity.getDispenseState());
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
        } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
            System.out.println(&lt;/span&gt;&quot;å¾ˆé—æ†¾æ²¡æœ‰æŠ½ä¸­å¥–å“ï¼&quot;&lt;span&gt;);
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æ”¹å˜çŠ¶æ€ä¸ºä¸èƒ½æŠ½å¥–&lt;/span&gt;
&lt;span&gt;            activity.setState(activity.getNoRafflleState());
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
        }
    }

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ä¸èƒ½å‘æ”¾å¥–å“&lt;/span&gt;
&lt;span&gt;    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; dispensePrize() {
        System.out.println(&lt;/span&gt;&quot;æ²¡ä¸­å¥–ï¼Œä¸èƒ½å‘æ”¾å¥–å“&quot;&lt;span&gt;);
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package&lt;/span&gt;&lt;span&gt; com.lin.state;

    &lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
     * çŠ¶æ€æ¨¡å¼æµ‹è¯•ç±»
     * 
     * &lt;/span&gt;&lt;span&gt;@author&lt;/span&gt;&lt;span&gt; Administrator
     *
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; Client {

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; main(String[] args) {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; åˆ›å»ºæ´»åŠ¨å¯¹è±¡ï¼Œå¥–å“æœ‰ 1 ä¸ªå¥–å“&lt;/span&gt;
        RaffleActivity activity = &lt;span&gt;new&lt;/span&gt; RaffleActivity(1&lt;span&gt;);

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; æˆ‘ä»¬è¿ç»­æŠ½ 300 æ¬¡å¥–&lt;/span&gt;
        &lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; i = 0; i &amp;lt; 40; i++&lt;span&gt;) {
            System.out.println(&lt;/span&gt;&quot;--------ç¬¬&quot; + (i + 1) + &quot;æ¬¡æŠ½å¥–----------&quot;&lt;span&gt;);
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; å‚åŠ æŠ½å¥–ï¼Œç¬¬ä¸€æ­¥ç‚¹å‡»æ‰£é™¤ç§¯åˆ†&lt;/span&gt;
&lt;span&gt;            activity.debuctMoney();

            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; ç¬¬äºŒæ­¥æŠ½å¥–&lt;/span&gt;
&lt;span&gt;            activity.raffle();
        }
    }

}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;24.1Â çŠ¶æ€æ¨¡å¼åœ¨å®é™…é¡¹ç›®-&lt;span&gt;å€Ÿè´·å¹³å°&lt;/span&gt; &lt;span&gt;æºç å‰–æ&lt;/span&gt;&lt;/h2&gt;
&lt;p class=&quot;16&quot;&gt;1)Â å€Ÿè´·å¹³å°çš„è®¢å•ï¼Œæœ‰å®¡æ ¸-å‘å¸ƒ-&lt;span&gt;æŠ¢å•&lt;/span&gt; &lt;span&gt;ç­‰ç­‰&lt;/span&gt; &lt;span&gt;æ­¥éª¤ï¼Œéšç€æ“ä½œçš„ä¸åŒï¼Œä¼šæ”¹å˜è®¢å•çš„çŠ¶æ€&lt;/span&gt;, é¡¹ç›®ä¸­çš„è¿™ä¸ªæ¨¡å—å®ç°å°±ä¼šä½¿ç”¨åˆ°çŠ¶æ€æ¨¡å¼&lt;/p&gt;
&lt;p class=&quot;16&quot;&gt;2)Â &lt;span&gt;é€šå¸¸é€šè¿‡&lt;/span&gt; if/elseÂ åˆ¤æ–­è®¢å•çš„çŠ¶æ€ï¼Œä»è€Œå®ç°ä¸åŒçš„é€»è¾‘ï¼Œä¼ªä»£ç å¦‚ä¸‹&lt;/p&gt;
&lt;p class=&quot;16&quot;&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2257481/202102/2257481-20210209200450972-1012567609.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â 3)ä»£ç å®ç°&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/2257481/202102/2257481-20210209194248521-1448738452.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package&lt;/span&gt;&lt;span&gt; com.lin.state.project;

&lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
 * çŠ¶æ€æ¥å£
 * 
 * &lt;/span&gt;&lt;span&gt;@author&lt;/span&gt;&lt;span&gt; Administrator
 *
 &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;interface&lt;/span&gt;&lt;span&gt; State {

    &lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
     * ç”µ å®¡
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;void&lt;/span&gt;&lt;span&gt; checkEvent(Context context);

    &lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
     * ç”µå®¡å¤±è´¥
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;void&lt;/span&gt;&lt;span&gt; checkFailEvent(Context context);

    &lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
     * å®šä»·å‘å¸ƒ
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;void&lt;/span&gt;&lt;span&gt; makePriceEvent(Context context);

    &lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
     * æ¥ å•
     * 
     * 
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;void&lt;/span&gt;&lt;span&gt; acceptOrderEvent(Context context);

    &lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
     * æ— äººæ¥å•å¤±æ•ˆ
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;void&lt;/span&gt;&lt;span&gt; notPeopleAcceptEvent(Context context);

    &lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
     * ä»˜ æ¬¾
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;void&lt;/span&gt;&lt;span&gt; payOrderEvent(Context context);

    &lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
     * æ¥å•æœ‰äººæ”¯ä»˜å¤±æ•ˆ
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;void&lt;/span&gt;&lt;span&gt; orderFailureEvent(Context context);

    &lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
     * å é¦ˆ
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;void&lt;/span&gt;&lt;span&gt; feedBackEvent(Context context);

    String getCurrentState();
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;47&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package&lt;/span&gt;&lt;span&gt; com.lin.state.project;

    &lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
     * çŠ¶æ€æšä¸¾ç±»
     * 
     * &lt;/span&gt;&lt;span&gt;@author&lt;/span&gt;&lt;span&gt; Administrator
     *
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;enum&lt;/span&gt;&lt;span&gt; StateEnum {

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è®¢å•ç”Ÿæˆ&lt;/span&gt;
    GENERATE(1, &quot;GENERATE&quot;&lt;span&gt;),

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å·²å®¡æ ¸&lt;/span&gt;
    REVIEWED(2, &quot;REVIEWED&quot;&lt;span&gt;),
    
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å·²å‘å¸ƒ&lt;/span&gt;
    PUBLISHED(3, &quot;PUBLISHED&quot;&lt;span&gt;),

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å¾…ä»˜æ¬¾&lt;/span&gt;
    NOT_PAY(4, &quot;NOT_PAY&quot;&lt;span&gt;),

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å·²ä»˜æ¬¾&lt;/span&gt;
    PAID(5, &quot;PAID&quot;&lt;span&gt;),

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å·²å®Œç»“&lt;/span&gt;
&lt;span&gt;
    FEED_BACKED(&lt;/span&gt;6, &quot;FEED_BACKED&quot;&lt;span&gt;);

    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; key;
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; String value;

    StateEnum(&lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt; key, String value) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.key =&lt;span&gt; key;
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.value =&lt;span&gt; value;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; getKey() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; key;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; String getValue() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; value;
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package&lt;/span&gt;&lt;span&gt; com.lin.state.project;

&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;abstract&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; AbstractState &lt;span&gt;implements&lt;/span&gt;&lt;span&gt; State {

    &lt;/span&gt;&lt;span&gt;protected&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; RuntimeException EXCEPTION = &lt;span&gt;new&lt;/span&gt; RuntimeException(&quot;æ“ä½œæµç¨‹ä¸å…è®¸&quot;&lt;span&gt;);

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;æŠ½è±¡ç±»ï¼Œé»˜è®¤å®ç°äº† State æ¥å£çš„æ‰€æœ‰æ–¹æ³•
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è¯¥ç±»çš„æ‰€æœ‰æ–¹æ³•ï¼Œå…¶å­ç±»(å…·ä½“çš„çŠ¶æ€ç±»)ï¼Œå¯ä»¥æœ‰é€‰æ‹©çš„è¿›è¡Œé‡å†™&lt;/span&gt;
&lt;span&gt;
    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; checkEvent(Context context) {
        &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt;&lt;span&gt; EXCEPTION;
    }

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; checkFailEvent(Context context) {
        &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt;&lt;span&gt; EXCEPTION;
    }

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; makePriceEvent(Context context) {
        &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt;&lt;span&gt; EXCEPTION;
    }

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; acceptOrderEvent(Context context) {
        &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt;&lt;span&gt; EXCEPTION;
    }

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; notPeopleAcceptEvent(Context context) {
        &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt;&lt;span&gt; EXCEPTION;
    }

    @Override

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; payOrderEvent(Context context) {
        &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt;&lt;span&gt; EXCEPTION;
    }

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; orderFailureEvent(Context context) {
        &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt;&lt;span&gt; EXCEPTION;
    }

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; feedBackEvent(Context context) {
        &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt;&lt;span&gt; EXCEPTION;
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package&lt;/span&gt;&lt;span&gt; com.lin.state.project;

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;ç¯å¢ƒä¸Šä¸‹æ–‡&lt;/span&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; Context &lt;span&gt;extends&lt;/span&gt;&lt;span&gt; AbstractState {
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å½“å‰çš„çŠ¶æ€ state, æ ¹æ®æˆ‘ä»¬çš„ä¸šåŠ¡æµç¨‹å¤„ç†ï¼Œä¸åœçš„å˜åŒ–&lt;/span&gt;
    &lt;span&gt;private&lt;/span&gt;&lt;span&gt; State state;

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; checkEvent(Context context) {
        state.checkEvent(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;);
        getCurrentState();
    }

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; checkFailEvent(Context context) {
        state.checkFailEvent(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;);
        getCurrentState();
    }

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; makePriceEvent(Context context) {
        state.makePriceEvent(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;);
        getCurrentState();
    }

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; acceptOrderEvent(Context context) {
        state.acceptOrderEvent(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;);
        getCurrentState();
    }

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; notPeopleAcceptEvent(Context context) {
        state.notPeopleAcceptEvent(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;);
        getCurrentState();
    }

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; payOrderEvent(Context context) {
        state.payOrderEvent(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;);
        getCurrentState();
    }

    @Override

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; orderFailureEvent(Context context) {
        state.orderFailureEvent(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;);
        getCurrentState();
    }

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; feedBackEvent(Context context) {
        state.feedBackEvent(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;);
        getCurrentState();
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; State getState() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; state;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; setState(State state) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.state =&lt;span&gt; state;
    }

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; String getCurrentState() {
        System.out.println(&lt;/span&gt;&quot;å½“å‰çŠ¶æ€ : &quot; +&lt;span&gt; state.getCurrentState());
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; state.getCurrentState();
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package&lt;/span&gt;&lt;span&gt; com.lin.state.project;

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å„ç§å…·ä½“çŠ¶æ€ç±»&lt;/span&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; FeedBackState &lt;span&gt;extends&lt;/span&gt;&lt;span&gt; AbstractState {

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; String getCurrentState() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; StateEnum.FEED_BACKED.getValue();
    }
}

&lt;/span&gt;&lt;span&gt;class&lt;/span&gt; GenerateState &lt;span&gt;extends&lt;/span&gt;&lt;span&gt; AbstractState {

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; checkEvent(Context context) {
        context.setState(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; ReviewState());
    }

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; checkFailEvent(Context context) {
        context.setState(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; FeedBackState());
    }

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; String getCurrentState() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; StateEnum.GENERATE.getValue();
    }
}

&lt;/span&gt;&lt;span&gt;class&lt;/span&gt; NotPayState &lt;span&gt;extends&lt;/span&gt;&lt;span&gt; AbstractState {

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; payOrderEvent(Context context) {
        context.setState(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; PaidState());
    }

    @Override

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; feedBackEvent(Context context) {
        context.setState(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; FeedBackState());
    }

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; String getCurrentState() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; StateEnum.NOT_PAY.getValue();
    }
}

&lt;/span&gt;&lt;span&gt;class&lt;/span&gt; PaidState &lt;span&gt;extends&lt;/span&gt;&lt;span&gt; AbstractState {

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; feedBackEvent(Context context) {
        context.setState(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; FeedBackState());
    }

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; String getCurrentState() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; StateEnum.PAID.getValue();
    }
}

&lt;/span&gt;&lt;span&gt;class&lt;/span&gt; PublishState &lt;span&gt;extends&lt;/span&gt;&lt;span&gt; AbstractState {

    @Override

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; acceptOrderEvent(Context context) {
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;æŠŠå½“å‰çŠ¶æ€è®¾ç½®ä¸º    NotPayStateã€‚ã€‚ã€‚
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è‡³äºåº”è¯¥å˜æˆå“ªä¸ªçŠ¶æ€ï¼Œæœ‰æµç¨‹å›¾æ¥å†³å®š&lt;/span&gt;
        context.setState(&lt;span&gt;new&lt;/span&gt;&lt;span&gt; NotPayState());
    }

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; notPeopleAcceptEvent(Context context) {
        context.setState(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; FeedBackState());
    }

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; String getCurrentState() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; StateEnum.PUBLISHED.getValue();
    }
}

&lt;/span&gt;&lt;span&gt;class&lt;/span&gt; ReviewState &lt;span&gt;extends&lt;/span&gt;&lt;span&gt; AbstractState {

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; makePriceEvent(Context context) {
        context.setState(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; PublishState());
    }

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; String getCurrentState() {

        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; StateEnum.REVIEWED.getValue();
    }

}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package&lt;/span&gt;&lt;span&gt; com.lin.state.project;

    &lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt; æµ‹è¯•ç±» &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; Client {

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; main(String[] args) {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;åˆ›å»º context å¯¹è±¡&lt;/span&gt;
        Context context = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Context();
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å°†å½“å‰çŠ¶æ€è®¾ç½®ä¸º PublishState &lt;/span&gt;
        context.setState(&lt;span&gt;new&lt;/span&gt;&lt;span&gt; PublishState());
        System.out.println(context.getCurrentState());

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;        &lt;span&gt;//&lt;/span&gt;&lt;span&gt;publish --&amp;gt; not pay &lt;/span&gt;
&lt;span&gt;        context.acceptOrderEvent(context);
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;        &lt;span&gt;//&lt;/span&gt;&lt;span&gt;not pay --&amp;gt; paid &lt;/span&gt;
&lt;span&gt;        context.payOrderEvent(context);
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;    &lt;span&gt;//&lt;/span&gt;&lt;span&gt; å¤±è´¥, æ£€æµ‹å¤±è´¥æ—¶ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;    try {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;    context.checkFailEvent(context);
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;    System.out.println(&quot;æµç¨‹æ­£å¸¸..&quot;);
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;    } catch (Exception e) {
        
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;    &lt;span&gt;//&lt;/span&gt;&lt;span&gt; TODO: handle exception
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;    System.out.println(e.getMessage());
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;    }&lt;/span&gt;
&lt;span&gt;    }

}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;24.1Â çŠ¶æ€æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚&lt;/h2&gt;
&lt;p class=&quot;15&quot;&gt;1)Â ä»£ç æœ‰å¾ˆå¼ºçš„å¯è¯»æ€§ã€‚çŠ¶æ€æ¨¡å¼å°†æ¯ä¸ªçŠ¶æ€çš„è¡Œä¸ºå°è£…åˆ°å¯¹åº”çš„ä¸€ä¸ªç±»ä¸­&lt;/p&gt;
&lt;p class=&quot;15&quot;&gt;2)Â &lt;span&gt;æ–¹ä¾¿ç»´æŠ¤ã€‚å°†å®¹æ˜“äº§ç”Ÿé—®é¢˜çš„&lt;/span&gt; if-elseÂ &lt;span&gt;è¯­å¥åˆ é™¤äº†ï¼Œå¦‚æœæŠŠæ¯ä¸ªçŠ¶æ€çš„è¡Œä¸ºéƒ½æ”¾åˆ°ä¸€ä¸ªç±»ä¸­ï¼Œæ¯æ¬¡è°ƒç”¨æ–¹æ³•æ—¶éƒ½è¦åˆ¤æ–­å½“å‰æ˜¯ä»€ä¹ˆçŠ¶æ€ï¼Œä¸ä½†ä¼šäº§å‡ºå¾ˆå¤š&lt;/span&gt; if-elseÂ è¯­å¥ï¼Œè€Œä¸”å®¹æ˜“å‡ºé”™&lt;/p&gt;
&lt;p class=&quot;15&quot;&gt;3)Â ç¬¦åˆâ€œå¼€é—­åŸåˆ™â€ã€‚å®¹æ˜“å¢åˆ çŠ¶æ€&lt;/p&gt;
&lt;p class=&quot;15&quot;&gt;4)Â ä¼šäº§ç”Ÿå¾ˆå¤šç±»ã€‚æ¯ä¸ªçŠ¶æ€éƒ½è¦ä¸€ä¸ªå¯¹åº”çš„ç±»ï¼Œå½“çŠ¶æ€è¿‡å¤šæ—¶ä¼šäº§ç”Ÿå¾ˆå¤šç±»ï¼ŒåŠ å¤§ç»´æŠ¤éš¾åº¦&lt;/p&gt;
&lt;p class=&quot;15&quot;&gt;5)Â &lt;span&gt;åº”ç”¨åœºæ™¯ï¼šå½“ä¸€ä¸ªäº‹ä»¶æˆ–è€…å¯¹è±¡æœ‰å¾ˆå¤šç§çŠ¶æ€ï¼ŒçŠ¶æ€ä¹‹é—´ä¼šç›¸äº’è½¬æ¢ï¼Œå¯¹ä¸åŒçš„çŠ¶æ€è¦æ±‚æœ‰ä¸åŒçš„è¡Œä¸ºçš„æ—¶å€™ï¼Œ&lt;/span&gt; &lt;span&gt;å¯ä»¥è€ƒè™‘ä½¿ç”¨çŠ¶æ€æ¨¡å¼&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;ä»…ä¾›å‚è€ƒï¼Œæœ‰é”™è¯¯è¿˜è¯·æŒ‡å‡ºï¼&lt;/p&gt;
&lt;p&gt;æœ‰ä»€ä¹ˆæƒ³æ³•ï¼Œè¯„è®ºåŒºç•™è¨€ï¼Œäº’ç›¸æŒ‡æ•™æŒ‡æ•™ã€‚&lt;/p&gt;
&lt;p&gt;è§‰å¾—ä¸é”™çš„å¯ä»¥ç‚¹ä¸€ä¸‹å³è¾¹çš„æ¨èå“Ÿï¼&lt;/p&gt;
</description>
<pubDate>Thu, 11 Feb 2021 07:05:00 +0000</pubDate>
<dc:creator>åå››lin</dc:creator>
<og:description>24.1&amp;#160;APP æŠ½å¥–æ´»åŠ¨é—®é¢˜ è¯·ç¼–å†™ç¨‹åºå®Œæˆ APP æŠ½å¥–æ´»åŠ¨ å…·ä½“è¦æ±‚å¦‚ä¸‹: 1)&amp;#160;å‡å¦‚æ¯å‚åŠ ä¸€æ¬¡è¿™ä¸ªæ´»åŠ¨è¦æ‰£é™¤ç”¨æˆ· 50 ç§¯åˆ†ï¼Œä¸­å¥–æ¦‚ç‡æ˜¯ 10% 2)&amp;#160;å¥–å“æ•°é‡å›º</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/linzm14/p/14394072.html</dc:identifier>
</item>
<item>
<title>Python 3çš„f-Stringsï¼šå¢å¼ºçš„å­—ç¬¦ä¸²æ ¼å¼è¯­æ³•ï¼ˆæŒ‡å—ï¼‰ - ä¸€ä¸ªç«æ˜Ÿç¨‹åºå‘˜</title>
<link>http://www.cnblogs.com/oklucas/p/14397672.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/oklucas/p/14397672.html</guid>
<description>&lt;p&gt;æœ€è¿‘ä¹Ÿåœ¨ä¸€ä¸ªè§†é¢‘ç½‘ç«™çš„çˆ¬è™«ï¼Œé¡¹ç›®å·²ç»å®Œæˆï¼Œä¸­é—´æœ‰ä¸å°‘éœ€è¦æ€»ç»“çš„ç»éªŒã€‚&lt;/p&gt;
&lt;p&gt;ä»Python 3.6å¼€å§‹ï¼Œf-Stringsæ˜¯æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„ä¸€ç§å¾ˆæ£’çš„æ–°æ–¹æ³•ã€‚ä¸å…¶ä»–æ ¼å¼åŒ–æ–¹å¼ç›¸æ¯”ï¼Œå®ƒä»¬ä¸ä»…æ›´å…·å¯è¯»æ€§ï¼Œæ›´ç®€æ´ä¸”ä¸æ˜“å‡ºé”™ï¼Œè€Œä¸”é€Ÿåº¦æ›´å¿«ï¼&lt;/p&gt;
&lt;h2 id=&quot;pythonä¸­çš„è€å¼å­—ç¬¦ä¸²æ ¼å¼åŒ–&quot;&gt;Pythonä¸­çš„â€œè€å¼â€å­—ç¬¦ä¸²æ ¼å¼åŒ–&lt;/h2&gt;
&lt;p&gt;åœ¨Python 3.6ä¹‹å‰ï¼Œä½ æœ‰ä¸¤ç§ä¸»è¦çš„æ–¹å¼ï¼Œå°†Pythonè¡¨è¾¾å¼åµŒå…¥åˆ°å­—ç¬¦ä¸²æ–‡å­—ä¸­è¿›è¡Œæ ¼å¼åŒ–ï¼šï¼…-formattingå’Œ&lt;code&gt;str.format()&lt;/code&gt;ã€‚æœ¬æ–‡å°†é¦–å…ˆä»‹ç»å¦‚ä½•ä½¿ç”¨å®ƒä»¬ä»¥åŠå®ƒä»¬çš„å±€é™æ€§ã€‚&lt;/p&gt;
&lt;h3 id=&quot;é€‰é¡¹1ï¼š-formatting&quot;&gt;é€‰é¡¹#1ï¼š%-formatting&lt;/h3&gt;
&lt;p&gt;è¿™æ˜¯Pythonæ ¼å¼åŒ–çš„OGï¼Œä»ä¸€å¼€å§‹å°±å­˜åœ¨äºè¯­è¨€ä¸­ã€‚ä½ å¯ä»¥åœ¨&lt;a href=&quot;https://docs.python.org/3/library/stdtypes.html#printf-style-string-formatting&quot; target=&quot;_blank&quot;&gt;Pythonæ–‡æ¡£ä¸­&lt;/a&gt;é˜…è¯»æ›´å¤šå†…å®¹ã€‚è¯·è®°ä½ï¼Œæ–‡æ¡£ä¸å»ºè®®ä½¿ç”¨ï¼…æ ¼å¼ï¼Œå…¶ä¸­åŒ…å«ä»¥ä¸‹æ³¨æ„äº‹é¡¹ï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;9&quot;&gt;
&lt;p&gt;â€œè¿™é‡Œæè¿°çš„æ ¼å¼åŒ–æ“ä½œè¡¨ç°å‡ºå„ç§å¤æ€ªé—®é¢˜ï¼Œå¯¼è‡´è®¸å¤šé”™è¯¯ï¼ˆä¾‹å¦‚æœªèƒ½æ­£ç¡®æ˜¾ç¤ºå…ƒç»„å’Œå­—å…¸ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨è¾ƒæ–°çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²æ–‡å­—æˆ–&lt;code&gt;str.format()&lt;/code&gt;æ–¹æ³•æœ‰åŠ©äºé¿å…è¿™äº›é”™è¯¯ã€‚è¿™äº›æ›¿ä»£æ–¹æ¡ˆè¿˜æä¾›äº†æ›´å¼ºå¤§ï¼Œçµæ´»å’Œå¯æ‰©å±•çš„æ–‡æœ¬æ ¼å¼è®¾ç½®æ–¹æ³•ã€‚â€&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;å¦‚ä½•ä½¿ç”¨---formatting&quot;&gt;å¦‚ä½•ä½¿ç”¨ %-formatting&lt;/h4&gt;
&lt;p&gt;å­—ç¬¦ä¸²å¯¹è±¡å…·æœ‰ä½¿ç”¨è¯¥&lt;code&gt;%&lt;/code&gt;è¿ç®—ç¬¦çš„å†…ç½®æ“ä½œï¼Œå¯ç”¨äºæ ¼å¼åŒ–å­—ç¬¦ä¸²ã€‚è¿™æ˜¯å®é™…çš„æƒ…å†µï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; name = &quot;Eric&quot;
&amp;gt;&amp;gt;&amp;gt; &quot;Hello, %s.&quot; % name
'Hello, Eric.'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸ºäº†æ’å…¥å¤šä¸ªå˜é‡ï¼Œä½ å¿…é¡»ä½¿ç”¨è¿™äº›å˜é‡çš„å…ƒç»„ã€‚è¿™æ˜¯ä½ è¦æ‰§è¡Œçš„æ“ä½œï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; name = &quot;Eric&quot;
&amp;gt;&amp;gt;&amp;gt; age = 74
&amp;gt;&amp;gt;&amp;gt; &quot;Hello, %s. You are %s.&quot; % (name, age)
'Hello Eric. You are 74.'
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;ä¸ºä»€ä¹ˆ-formattingä¸å¥½&quot;&gt;ä¸ºä»€ä¹ˆ%-formattingä¸å¥½&lt;/h4&gt;
&lt;p&gt;ä¸Šé¢çœ‹åˆ°çš„ä»£ç ç¤ºä¾‹å…·æœ‰è¶³å¤Ÿçš„å¯è¯»æ€§ã€‚ä½†æ˜¯ï¼Œä¸€æ—¦å¼€å§‹ä½¿ç”¨å¤šä¸ªå‚æ•°å’Œæ›´é•¿çš„å­—ç¬¦ä¸²ï¼Œä½ çš„ä»£ç å°†å¾ˆå¿«å˜å¾—ä¸é‚£ä¹ˆæ˜“è¯»ã€‚çœ‹èµ·æ¥æœ‰äº›æ··ä¹±ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; first_name = &quot;Eric&quot;
&amp;gt;&amp;gt;&amp;gt; last_name = &quot;Idle&quot;
&amp;gt;&amp;gt;&amp;gt; age = 74
&amp;gt;&amp;gt;&amp;gt; profession = &quot;comedian&quot;
&amp;gt;&amp;gt;&amp;gt; affiliation = &quot;Monty Python&quot;
&amp;gt;&amp;gt;&amp;gt; &quot;Hello, %s %s. You are %s. You are a %s. You were a member of %s.&quot; % (first_name, last_name, age, profession, affiliation)
'Hello, Eric Idle. You are 74. You are a comedian. You were a member of Monty Python.'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™ç§æ ¼å¼ä¸æ˜¯å¾ˆå¥½ï¼Œå› ä¸ºå®ƒå¾ˆå†—é•¿å¹¶ä¸”ä¼šå¯¼è‡´é”™è¯¯ï¼Œä¾‹å¦‚ä¸èƒ½æ­£ç¡®æ˜¾ç¤ºå…ƒç»„æˆ–å­—å…¸ã€‚&lt;/p&gt;
&lt;h3 id=&quot;é€‰é¡¹2ï¼šstrformat&quot;&gt;é€‰é¡¹#2ï¼šstr.format()&lt;/h3&gt;
&lt;p&gt;Python 2.6ä¸­å¼•å…¥äº†è¿™ç§å®Œæˆå·¥ä½œçš„æ–°æ–¹æ³•ã€‚ä½ å¯ä»¥æŸ¥çœ‹&lt;a href=&quot;https://realpython.com/python-formatted-output/&quot; target=&quot;_blank&quot;&gt;ã€Š Pythonå­—ç¬¦ä¸²æ ¼å¼æ–°æ‰‹æŒ‡å—ã€‹ä»¥&lt;/a&gt;è·å–æ›´å¤šä¿¡æ¯ã€‚&lt;/p&gt;
&lt;h4 id=&quot;å¦‚ä½•ä½¿ç”¨strformat&quot;&gt;å¦‚ä½•ä½¿ç”¨str.format()&lt;/h4&gt;
&lt;p&gt;str.format() æ˜¯å¯¹ %-formatting çš„æ”¹è¿›ã€‚å®ƒä½¿ç”¨æ­£å¸¸çš„å‡½æ•°è°ƒç”¨è¯­æ³•ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ &lt;strong&gt;format&lt;/strong&gt;() æ–¹æ³•å¯¹è¢«è½¬æ¢ä¸ºå­—ç¬¦ä¸²çš„å¯¹è±¡è¿›è¡Œæ‰©å±•ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨&lt;code&gt;str.format()&lt;/code&gt;ï¼Œæ›¿æ¢å­—æ®µç”¨èŠ±æ‹¬å·æ ‡è®°ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &quot;Hello, {}. You are {}.&quot;.format(name, age)
'Hello, Eric. You are 74.'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½ å¯ä»¥é€šè¿‡å¼•ç”¨å˜é‡çš„ç´¢å¼•ä»¥ä»»ä½•é¡ºåºå¼•ç”¨å®ƒä»¬ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &quot;Hello, {1}. You are {0}.&quot;.format(age, name)
'Hello, Eric. You are 74.'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œå¦‚æœä½ æ’å…¥å˜é‡åï¼Œåˆ™ä¼šè·å¾—ä»¥ä¸‹é¢å¤–çš„å¥½å¤„ï¼šèƒ½å¤Ÿä¼ é€’å¯¹è±¡ï¼Œç„¶ååœ¨èŠ±æ‹¬å·ä¹‹é—´å¼•ç”¨å‚æ•°å’Œæ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; person = {'name': 'Eric', 'age': 74}
&amp;gt;&amp;gt;&amp;gt; &quot;Hello, {name}. You are {age}.&quot;.format(name=person['name'], age=person['age'])
'Hello, Eric. You are 74.'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨&lt;code&gt;**&lt;/code&gt;å­—å…¸æ¥å®Œæˆè¿™ä¸ªå·§å¦™çš„æŠ€å·§ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; person = {'name': 'Eric', 'age': 74}
&amp;gt;&amp;gt;&amp;gt; &quot;Hello, {name}. You are {age}.&quot;.format(**person)
'Hello, Eric. You are 74.'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;str.format()&lt;/code&gt; ä¸ï¼…æ ¼å¼ç›¸æ¯”ç»å¯¹æ˜¯ä¸€ä¸ªå‡çº§ã€‚&lt;/p&gt;
&lt;h4 id=&quot;ä¸ºä»€ä¹ˆ-strformat-ä¸å¥½&quot;&gt;ä¸ºä»€ä¹ˆ str.format() ä¸å¥½&lt;/h4&gt;
&lt;p&gt;ä½¿ç”¨&lt;code&gt;str.format()&lt;/code&gt;ä»£ç æ¯”ä½¿ç”¨ %-formatting çš„ä»£ç æ›´å®¹æ˜“é˜…è¯»ï¼Œä½†æ˜¯&lt;code&gt;str.format()&lt;/code&gt;å½“ä½ å¤„ç†å¤šä¸ªå‚æ•°å’Œæ›´é•¿çš„å­—ç¬¦ä¸²æ—¶ï¼Œä»£ç ä»ç„¶å¾ˆå†—é•¿ã€‚çœ‹çœ‹è¿™ä¸ªï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; first_name = &quot;Eric&quot;
&amp;gt;&amp;gt;&amp;gt; last_name = &quot;Idle&quot;
&amp;gt;&amp;gt;&amp;gt; age = 74
&amp;gt;&amp;gt;&amp;gt; profession = &quot;comedian&quot;
&amp;gt;&amp;gt;&amp;gt; affiliation = &quot;Monty Python&quot;
&amp;gt;&amp;gt;&amp;gt; print((&quot;Hello, {first_name} {last_name}. You are {age}. &quot; + 
&amp;gt;&amp;gt;&amp;gt;        &quot;You are a {profession}. You were a member of {affiliation}.&quot;) \
&amp;gt;&amp;gt;&amp;gt;        .format(first_name=first_name, last_name=last_name, age=age, \
&amp;gt;&amp;gt;&amp;gt;                profession=profession, affiliation=affiliation))
'Hello, Eric Idle. You are 74. You are a comedian. You were a member of Monty Python.'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚æœä½ è¦&lt;code&gt;.format()&lt;/code&gt;åœ¨å­—å…¸ä¸­ä¼ é€’å˜é‡ï¼Œåˆ™å¯ä»¥å°†å…¶è§£å‹ç¼©&lt;code&gt;.format(**some_dict)&lt;/code&gt;å¹¶æŒ‰å­—ç¬¦ä¸²ä¸­çš„é”®å¼•ç”¨å€¼ï¼Œä½†æ˜¯å¿…é¡»æœ‰ä¸€ç§æ›´å¥½çš„æ–¹æ³•æ¥æ‰§è¡Œæ­¤æ“ä½œã€‚&lt;/p&gt;
&lt;h2 id=&quot;f-stringsè¡¨è¾¾å¼ï¼špythonä¸­ä¸€ç§å¢å¼ºçš„æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„æ–°æ–¹æ³•&quot;&gt;f-Stringsè¡¨è¾¾å¼ï¼šPythonä¸­ä¸€ç§å¢å¼ºçš„æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„æ–°æ–¹æ³•&lt;/h2&gt;
&lt;p&gt;f-Strings è¡¨è¾¾å¼ä½¿æ ¼å¼åŒ–æ›´å®¹æ˜“ã€‚ä»–ä»¬åŠ å…¥äº†Python 3.6ã€‚ä½ å¯ä»¥åœ¨2015å¹´8æœˆç”±Eric V.Smithæ’°å†™çš„&lt;a href=&quot;https://www.python.org/dev/peps/pep-0498/&quot; target=&quot;_blank&quot;&gt;PEP 498ä¸­&lt;/a&gt;é˜…è¯»å…¨éƒ¨å†…å®¹ã€‚&lt;/p&gt;
&lt;p&gt;f-Strings ä¹Ÿç§°ä¸ºâ€œæ ¼å¼åŒ–çš„å­—ç¬¦ä¸²æ–‡å­—â€ï¼Œæ˜¯ä¸€ç§å­—ç¬¦ä¸²æ–‡å­—ï¼Œå…¶å¼€å¤´æ˜¯ fï¼Œåé¢æ˜¯å¤§æ‹¬å·ï¼Œå…¶ä¸­åŒ…å«å°†è¢«æ›¿æ¢ä¸ºå…¶å€¼çš„è¡¨è¾¾å¼ã€‚è¿™äº›è¡¨è¾¾å¼åœ¨è¿è¡Œæ—¶è¢«è¯„ä¼°ï¼Œç„¶åä½¿ç”¨ &quot;&lt;strong&gt;format&lt;/strong&gt;&quot; åè®®è¿›è¡Œæ ¼å¼åŒ–ã€‚å½“ä½ æƒ³äº†è§£æ›´å¤šä¿¡æ¯æ—¶ï¼Œ&lt;a href=&quot;https://docs.python.org/3/reference/lexical_analysis.html#f-strings&quot; target=&quot;_blank&quot;&gt;Pythonæ–‡æ¡£&lt;/a&gt;æ˜¯ä½ çš„æœ‹å‹ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ä¸€äº› f-strings å¯ä»¥è®©ä½ çš„ç”Ÿæ´»æ›´è½»æ¾çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ç®€å•è¯­æ³•&quot;&gt;ç®€å•è¯­æ³•&lt;/h3&gt;
&lt;p&gt;çœ‹çœ‹è¿™æ˜¯å¤šä¹ˆå®¹æ˜“é˜…è¯»ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; name = &quot;Eric&quot;
&amp;gt;&amp;gt;&amp;gt; age = 74
&amp;gt;&amp;gt;&amp;gt; f&quot;Hello, {name}. You are {age}.&quot;
'Hello, Eric. You are 74.'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½¿ç”¨å¤§å†™å­—æ¯ä¹Ÿæ˜¯æœ‰æ•ˆçš„&lt;code&gt;F&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; F&quot;Hello, {name}. You are {age}.&quot;
'Hello, Eric. You are 74.'
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;ä»»æ„è¡¨è¾¾&quot;&gt;ä»»æ„è¡¨è¾¾&lt;/h3&gt;
&lt;p&gt;å› ä¸º f-strings åœ¨è¿è¡Œæ—¶è¢«è¯„ä¼°ï¼Œæ‰€ä»¥æ‚¨å¯ä»¥åœ¨å…¶ä¸­æ”¾å…¥ä»»ä½•å’Œæ‰€æœ‰æœ‰æ•ˆçš„ Python è¡¨è¾¾å¼ã€‚&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥åšä¸€äº›éå¸¸ç®€å•çš„äº‹æƒ…ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; f&quot;{2 * 37}&quot;
'74'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½†æ˜¯ä½ ä¹Ÿå¯ä»¥è°ƒç”¨å‡½æ•°ã€‚è¿™æ˜¯ä¸€ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; def to_lowercase(input):
...     return input.lower()

&amp;gt;&amp;gt;&amp;gt; name = &quot;Eric Idle&quot;
&amp;gt;&amp;gt;&amp;gt; f&quot;{to_lowercase(name)} is funny.&quot;
'eric idle is funny.'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½ è¿˜å¯ä»¥é€‰æ‹©ç›´æ¥è°ƒç”¨æ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; f&quot;{name.lower()} is funny.&quot;
'eric idle is funny.'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½ ç”šè‡³å¯ä»¥ä½¿ç”¨ä»å¸¦æœ‰f-stringsçš„ç±»åˆ›å»ºçš„å¯¹è±¡ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;class Comedian:
    def __init__(self, first_name, last_name, age):
        self.first_name = first_name
        self.last_name = last_name
        self.age = age

    def __str__(self):
        return f&quot;{self.first_name} {self.last_name} is {self.age}.&quot;

    def __repr__(self):
        return f&quot;{self.first_name} {self.last_name} is {self.age}. Surprise!&quot;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½ æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; new_comedian = Comedian(&quot;Eric&quot;, &quot;Idle&quot;, &quot;74&quot;)
&amp;gt;&amp;gt;&amp;gt; f&quot;{new_comedian}&quot;
'Eric Idle is 74.'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¯¥&lt;code&gt;__str__()&lt;/code&gt;å’Œ&lt;code&gt;__repr__()&lt;/code&gt;æ–¹æ³•å¤„ç†å¯¹è±¡æ˜¯å¦‚ä½•å‘ˆç°ä¸ºå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ä½ éœ€è¦ç¡®ä¿ä½ åŒ…æ‹¬ä½ çš„ç±»å®šä¹‰è¿™äº›æ–¹æ³•çš„è‡³å°‘ä¸€ä¸ªã€‚å¦‚æœä½ å¿…é¡»é€‰æ‹©ä¸€ä¸ªï¼Œè¯·ç»§ç»­ä½¿ç”¨ï¼Œ&lt;code&gt;__repr__()&lt;/code&gt;å› ä¸ºå®ƒå¯ä»¥ä»£æ›¿ä½¿ç”¨&lt;code&gt;__str__()&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿”å›çš„&lt;code&gt;__str__()&lt;/code&gt;å­—ç¬¦ä¸²æ˜¯å¯¹è±¡çš„éæ­£å¼å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚è¿”å›çš„å­—ç¬¦ä¸²&lt;code&gt;__repr__()&lt;/code&gt;æ˜¯æ­£å¼è¡¨ç¤ºå½¢å¼ï¼Œåº”æ˜ç¡®ã€‚è°ƒç”¨&lt;code&gt;str()&lt;/code&gt;å’Œ&lt;code&gt;repr()&lt;/code&gt;æ¯”ç›´æ¥ä½¿ç”¨&lt;code&gt;__str__()&lt;/code&gt;å’Œæ›´å¯å–&lt;code&gt;__repr__()&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼Œfå­—ç¬¦ä¸²å°†ä½¿ç”¨&lt;code&gt;__str__()&lt;/code&gt;ï¼Œä½†æ˜¯å¦‚æœä½ åŠ å…¥è½¬æ¢æ ‡å¿— !rï¼Œä½ å¯ä»¥ç¡®ä¿å®ƒä»¬ä½¿ç”¨&lt;code&gt;__repr__()&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; f&quot;{new_comedian}&quot;
'Eric Idle is 74.'
&amp;gt;&amp;gt;&amp;gt; f&quot;{new_comedian!r}&quot;
'Eric Idle is 74. Surprise!'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚æœä½ æƒ³é˜…è¯»ä¸€äº›å¯¼è‡´ f-Strings æ”¯æŒå®Œæ•´Pythonè¡¨è¾¾å¼çš„å¯¹è¯ï¼Œåˆ™å¯ä»¥åœ¨&lt;a href=&quot;https://mail.python.org/pipermail/python-ideas/2015-July/034726.html&quot; target=&quot;_blank&quot;&gt;æ­¤å¤„è¿›è¡Œ&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å¤šè¡Œf-strings&quot;&gt;å¤šè¡Œf-Strings&lt;/h3&gt;
&lt;p&gt;ä½ å¯ä»¥ä½¿ç”¨å¤šè¡Œå­—ç¬¦ä¸²ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; name = &quot;Eric&quot;
&amp;gt;&amp;gt;&amp;gt; profession = &quot;comedian&quot;
&amp;gt;&amp;gt;&amp;gt; affiliation = &quot;Monty Python&quot;
&amp;gt;&amp;gt;&amp;gt; message = (
...     f&quot;Hi {name}. &quot;
...     f&quot;You are a {profession}. &quot;
...     f&quot;You were in {affiliation}.&quot;
... )
&amp;gt;&amp;gt;&amp;gt; message
'Hi Eric. You are a comedian. You were in Monty Python.'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½†æ˜¯è¯·è®°ä½ï¼Œä½ éœ€è¦åœ¨å¤šè¡Œå­—ç¬¦ä¸²çš„æ¯ä¸€è¡Œå‰é¢æ”¾ä¸€ä¸ªfã€‚ä»¥ä¸‹ä»£ç ä¸èµ·ä½œç”¨ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; message = (
...     f&quot;Hi {name}. &quot;
...     &quot;You are a {profession}. &quot;
...     &quot;You were in {affiliation}.&quot;
... )
&amp;gt;&amp;gt;&amp;gt; message
'Hi Eric. You are a {profession}. You were in {affiliation}.'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚æœä½ æ²¡æœ‰&lt;code&gt;f&lt;/code&gt;åœ¨æ¯è¡Œçš„å‰é¢éƒ½æ”¾ä¸€ä¸ªï¼Œé‚£ä¹ˆä½ å°†åªæœ‰è§„åˆ™çš„ï¼Œå¤è€çš„ï¼ŒèŠ±å›­é£æ ¼çš„ç´å¼¦ï¼Œè€Œä¸æ˜¯é—ªäº®çš„ï¼Œæ–°é¢–çš„ï¼Œå¥‡ç‰¹çš„fç´å¼¦ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ æƒ³å°†å­—ç¬¦ä¸²åˆ†å¸ƒåœ¨å¤šè¡Œä¸­ï¼Œåˆ™è¿˜å¯ä»¥é€‰æ‹©ä½¿ç”¨-è½¬ä¹‰å­—ç¬¦ &lt;code&gt;\&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; message = f&quot;Hi {name}. &quot; \
...           f&quot;You are a {profession}. &quot; \
...           f&quot;You were in {affiliation}.&quot;
...
&amp;gt;&amp;gt;&amp;gt; message
'Hi Eric. You are a comedian. You were in Monty Python.'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œå¦‚æœä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼Œå°†ä¼šå‘ç”Ÿä»¥ä¸‹æƒ…å†µ&lt;code&gt;&quot;&quot;&quot;&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; message = f&quot;&quot;&quot;
...     Hi {name}. 
...     You are a {profession}. 
...     You were in {affiliation}.
... &quot;&quot;&quot;
...
&amp;gt;&amp;gt;&amp;gt; message
'\n    Hi Eric.\n    You are a comedian.\n    You were in Monty Python.\n'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é˜…è¯»&lt;a href=&quot;https://pep8.org/&quot; target=&quot;_blank&quot;&gt;PEP 8ä¸­çš„&lt;/a&gt;ç¼©è¿›å‡†åˆ™ã€‚&lt;/p&gt;
&lt;h3 id=&quot;é€Ÿåº¦&quot;&gt;é€Ÿåº¦&lt;/h3&gt;
&lt;p&gt;f-Strings æ¯” %-formatting å’Œ str.format() éƒ½è¦å¿«ã€‚å¦‚ä½ æ‰€è§ï¼Œf-Strings æ˜¯åœ¨è¿è¡Œæ—¶æ±‚å€¼çš„è¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯å¸¸é‡å€¼ã€‚ä»¥ä¸‹æ‘˜è‡ªæ–‡æ¡£ï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;7.8579881656805&quot;&gt;
&lt;p&gt;â€œf-Strings æä¾›äº†ä¸€ç§ä½¿ç”¨æœ€å°è¯­æ³•åœ¨å­—ç¬¦ä¸²æ–‡å­—ä¸­åµŒå…¥è¡¨è¾¾å¼çš„æ–¹æ³•ã€‚åº”å½“æ³¨æ„ï¼Œf-Strings å®é™…ä¸Šæ˜¯åœ¨è¿è¡Œæ—¶è¯„ä¼°çš„è¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯å¸¸æ•°ã€‚åœ¨Pythonæºä»£ç ä¸­ï¼Œf-Strings æ˜¯æ–‡å­—å­—ç¬¦ä¸²ï¼Œå‰ç¼€ä¸º&lt;code&gt;f&lt;/code&gt;ï¼Œå…¶ä¸­èŠ±æ‹¬å·å†…åŒ…å«è¡¨è¾¾å¼ã€‚è¿™äº›è¡¨è¾¾å¼å°†æ›¿æ¢ä¸ºå…¶å€¼ã€‚â€ ï¼ˆ&lt;a href=&quot;https://www.python.org/dev/peps/pep-0498/#abstract&quot; target=&quot;_blank&quot;&gt;æ¥æº&lt;/a&gt;ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨è¿è¡Œæ—¶ï¼Œå¤§æ‹¬å·å†…çš„è¡¨è¾¾å¼åœ¨å…¶è‡ªå·±çš„èŒƒå›´å†…æ±‚å€¼ï¼Œç„¶åä¸ f-Strings çš„å­—ç¬¦ä¸²æ–‡å­—éƒ¨åˆ†æ”¾åœ¨ä¸€èµ·ã€‚ç„¶åè¿”å›ç»“æœå­—ç¬¦ä¸²ã€‚è¿™å°±æ˜¯å…¨éƒ¨ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯é€Ÿåº¦æ¯”è¾ƒï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; import timeit
&amp;gt;&amp;gt;&amp;gt; timeit.timeit(&quot;&quot;&quot;name = &quot;Eric&quot;
... age = 74
... '%s is %s.' % (name, age)&quot;&quot;&quot;, number = 10000)
0.003324444866599663
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; timeit.timeit(&quot;&quot;&quot;name = &quot;Eric&quot;
... age = 74
... '{} is {}.'.format(name, age)&quot;&quot;&quot;, number = 10000)
0.004242089427570761
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; timeit.timeit(&quot;&quot;&quot;name = &quot;Eric&quot;
... age = 74
... f'{name} is {age}.'&quot;&quot;&quot;, number = 10000)
0.0024820892040722242
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚ä½ æ‰€è§ï¼Œf-Strings æœ€å¿«ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œæƒ…å†µå¹¶éæ€»æ˜¯å¦‚æ­¤ã€‚é¦–æ¬¡å®æ–½æ—¶ï¼Œå®ƒä»¬å­˜åœ¨ä¸€äº›&lt;a href=&quot;https://stackoverflow.com/questions/37365311/why-are-literal-formatted-strings-so-slow-in-python-3-6-alpha-now-fixed-in-3-6&quot; target=&quot;_blank&quot;&gt;é€Ÿåº¦é—®é¢˜&lt;/a&gt;ï¼Œéœ€è¦ä½¿å…¶é€Ÿåº¦æ¯”æ›´å¿«&lt;code&gt;str.format()&lt;/code&gt;ã€‚å¼•å…¥äº†ç‰¹æ®Šçš„&lt;a href=&quot;https://bugs.python.org/issue27078&quot; target=&quot;_blank&quot;&gt;&lt;code&gt;BUILD_STRING&lt;/code&gt;æ“ä½œç &lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&quot;python-f-stringsï¼šç»†èŠ‚&quot;&gt;Python f-Stringsï¼šç»†èŠ‚&lt;/h2&gt;
&lt;p&gt;æ—¢ç„¶ä½ å·²ç»äº†è§£äº†ä¸ºä»€ä¹ˆ f-Strings å¾ˆæ£’ï¼Œæˆ‘ç›¸ä¿¡ä½ ä¸€å®šè¦å¼€å§‹ä½¿ç”¨ f-Strings ã€‚å½“ä½ å†’é™©è¿›å…¥è¿™ä¸ªå‹‡æ•¢çš„æ–°ä¸–ç•Œæ—¶ï¼Œè¯·ç‰¢è®°ä»¥ä¸‹ä¸€äº›ç»†èŠ‚ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å¼•å·&quot;&gt;å¼•å·&lt;/h3&gt;
&lt;p&gt;ä½ å¯ä»¥åœ¨è¡¨è¾¾å¼å†…ä½¿ç”¨å„ç§ç±»å‹çš„å¼•å·ã€‚åªè¦ç¡®ä¿ä½ æ²¡æœ‰åœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨ä¸ f-Strings ç›¸åŒçš„å¼•å·å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;è¯¥ä»£ç å°†èµ·ä½œç”¨ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; f&quot;{'Eric Idle'}&quot;
'Eric Idle'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¯¥ä»£ç ä¹Ÿå°†èµ·ä½œç”¨ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; f'{&quot;Eric Idle&quot;}'
'Eric Idle'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½ è¿˜å¯ä»¥ä½¿ç”¨ä¸‰å¼•å·ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; f&quot;&quot;&quot;Eric Idle&quot;&quot;&quot;
'Eric Idle'
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; f'''Eric Idle'''
'Eric Idle'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚æœå‘ç°éœ€è¦åœ¨å­—ç¬¦ä¸²çš„å†…éƒ¨å’Œå¤–éƒ¨ä½¿ç”¨ç›¸åŒç±»å‹çš„å¼•å·ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ &lt;code&gt;\&lt;/code&gt; å‘½ä»¤è¿›è¡Œè½¬ä¹‰ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; f&quot;The \&quot;comedian\&quot; is {name}, aged {age}.&quot;
'The &quot;comedian&quot; is Eric Idle, aged 74.'
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;å­—å…¸&quot;&gt;å­—å…¸&lt;/h3&gt;
&lt;p&gt;è¯´åˆ°å¼•å·ï¼Œä½¿ç”¨å­—å…¸æ—¶è¦å½“å¿ƒã€‚å¦‚æœè¦å¯¹å­—å…¸çš„é”®ä½¿ç”¨å•å¼•å·ï¼Œè¯·è®°ä½ç¡®ä¿å¯¹åŒ…å«é”®çš„ f-Strings ä½¿ç”¨åŒå¼•å·ã€‚&lt;/p&gt;
&lt;p&gt;è¿™å°†èµ·ä½œç”¨ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; comedian = {'name': 'Eric Idle', 'age': 74}
&amp;gt;&amp;gt;&amp;gt; f&quot;The comedian is {comedian['name']}, aged {comedian['age']}.&quot;
The comedian is Eric Idle, aged 74.
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½†è¿™æ˜¯ä¸€ä¸ªè¯­æ³•é”™è¯¯çš„æƒ…å†µï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; comedian = {'name': 'Eric Idle', 'age': 74}
&amp;gt;&amp;gt;&amp;gt; f'The comedian is {comedian['name']}, aged {comedian['age']}.'
  File &quot;&amp;lt;stdin&amp;gt;&quot;, line 1
    f'The comedian is {comedian['name']}, aged {comedian['age']}.'
                                    ^
SyntaxError: invalid syntax
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚æœåœ¨å­—å…¸é”®å‘¨å›´ä½¿ç”¨ä¸åœ¨få­—ç¬¦ä¸²å¤–éƒ¨ç›¸åŒçš„å¼•å·ç±»å‹ï¼Œåˆ™ç¬¬ä¸€ä¸ªå­—å…¸é”®å¼€å¤´çš„å¼•å·å°†è¢«è§£é‡Šä¸ºå­—ç¬¦ä¸²çš„ç»“å°¾ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å¤§æ‹¬å·&quot;&gt;å¤§æ‹¬å·&lt;/h3&gt;
&lt;p&gt;ä¸ºäº†ä½¿å¤§æ‹¬å·å‡ºç°åœ¨å­—ç¬¦ä¸²ä¸­ï¼Œå¿…é¡»ä½¿ç”¨åŒå¤§æ‹¬å·ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; f&quot;{{70 + 4}}&quot;
'{70 + 4}'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¯·æ³¨æ„ï¼Œä½¿ç”¨ä¸‰é‡èŠ±æ‹¬å·å°†å¯¼è‡´å­—ç¬¦ä¸²ä¸­åªæœ‰ä¸€ä¸ªå¤§æ‹¬å·ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; f&quot;{{{70 + 4}}}&quot;
'{74}'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œå¦‚æœä½¿ç”¨çš„æ‹¬å·å¤šäºä¸‰ä¸ªï¼Œåˆ™å¯ä»¥æ˜¾ç¤ºæ›´å¤šçš„æ‹¬å·ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; f&quot;{{{{70 + 4}}}}&quot;
'{{70 + 4}}'
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;åæ–œæ &quot;&gt;åæ–œæ &lt;/h3&gt;
&lt;p&gt;å¦‚å‰æ‰€è¿°ï¼Œä½ å¯ä»¥åœ¨f-stringçš„å­—ç¬¦ä¸²éƒ¨åˆ†ä½¿ç”¨åæ–œæ è½¬ä¹‰ã€‚ä½†æ˜¯ï¼Œä½ ä¸èƒ½åœ¨f-stringçš„è¡¨è¾¾å¼éƒ¨åˆ†ä½¿ç”¨åæ–œæ è½¬ä¹‰ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; f&quot;{\&quot;Eric Idle\&quot;}&quot;
  File &quot;&amp;lt;stdin&amp;gt;&quot;, line 1
    f&quot;{\&quot;Eric Idle\&quot;}&quot;
                      ^
SyntaxError: f-string expression part cannot include a backslash
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½ å¯ä»¥é€šè¿‡é¢„å…ˆè®¡ç®—è¡¨è¾¾å¼å¹¶åœ¨få­—ç¬¦ä¸²ä¸­ä½¿ç”¨ç»“æœæ¥è§£å†³æ­¤é—®é¢˜ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; name = &quot;Eric Idle&quot;
&amp;gt;&amp;gt;&amp;gt; f&quot;{name}&quot;
'Eric Idle'
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;å†…éƒ¨æ³¨é‡Š&quot;&gt;å†…éƒ¨æ³¨é‡Š&lt;/h3&gt;
&lt;p&gt;è¡¨è¾¾å¼ä¸­ä¸åº”åŒ…å«ä½¿ç”¨è¯¥ &lt;code&gt;#&lt;/code&gt; ç¬¦å·çš„æ³¨é‡Šã€‚ä¸‹é¢ä»£ç ï¼Œä½ ä¼šçœ‹åˆ°è¯­æ³•é”™è¯¯ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;&amp;gt;&amp;gt;&amp;gt; f&quot;Eric is {2 * 37 #Oh my!}.&quot;
  File &quot;&amp;lt;stdin&amp;gt;&quot;, line 1
    f&quot;Eric is {2 * 37 #Oh my!}.&quot;
                                ^
SyntaxError: f-string expression part cannot include '#'
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;å­—ç¬¦ä¸²æ ¼å¼åŒ–æ–¹æ³•åœ¨å¾ˆå¤šé¡¹ç›®é‡Œé¢éƒ½èƒ½ç”¨åˆ°ï¼Œå®ç”¨ä»·å€¼å¾ˆé«˜ã€‚&lt;/p&gt;
&lt;p&gt;è¯·&lt;span&gt;&lt;strong&gt;è®¢é˜…&lt;/strong&gt;&lt;/span&gt;å¹¶&lt;span&gt;&lt;strong&gt;ç»§ç»­å…³æ³¨&lt;/strong&gt;&lt;/span&gt;ï¼Œä»¥åä¼šæ”¶åˆ°æ›´å¤šæœ‰è¶£çš„æ–‡ç« ã€‚&lt;/p&gt;
&lt;p&gt;æ¬¢è¿å…³æ³¨æˆ‘çš„&lt;a href=&quot;https://www.bianchengvip.com/&quot; target=&quot;_blank&quot;&gt;ä¸ªäººç½‘ç«™https://www.bianchengvip.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä¸ºâ€œä¸€ä¸ªç«æ˜Ÿç¨‹åºå‘˜â€åŸåˆ›æ–‡ç« ï¼Œè½¬è½½è¯·æ ‡æ˜å‡ºå¤„&lt;/p&gt;
</description>
<pubDate>Thu, 11 Feb 2021 05:57:00 +0000</pubDate>
<dc:creator>ä¸€ä¸ªç«æ˜Ÿç¨‹åºå‘˜</dc:creator>
<og:description>æœ€è¿‘ä¹Ÿåœ¨ä¸€ä¸ªè§†é¢‘ç½‘ç«™çš„çˆ¬è™«ï¼Œé¡¹ç›®å·²ç»å®Œæˆï¼Œä¸­é—´æœ‰ä¸å°‘éœ€è¦æ€»ç»“çš„ç»éªŒã€‚ ä»Python 3.6å¼€å§‹ï¼Œf-Stringsæ˜¯æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„ä¸€ç§å¾ˆæ£’çš„æ–°æ–¹æ³•ã€‚ä¸å…¶ä»–æ ¼å¼åŒ–æ–¹å¼ç›¸æ¯”ï¼Œå®ƒä»¬ä¸ä»…æ›´å…·å¯è¯»æ€§ï¼Œæ›´ç®€æ´ä¸”</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/oklucas/p/14397672.html</dc:identifier>
</item>
</channel>
</rss>