<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>åšå®¢å›­_é¦–é¡µ</title>
<link></link>
<description>ä»£ç æ”¹å˜ä¸–ç•Œ</description>
<item>
<title>Redisçš„æ‰¹é‡æ“ä½œæ˜¯ä»€ä¹ˆï¼Ÿæ€ä¹ˆå®ç°çš„å»¶æ—¶é˜Ÿåˆ—ï¼Ÿä»¥åŠè®¢é˜…æ¨¡å¼ã€LRUã€‚ - çºªè«</title>
<link>http://www.cnblogs.com/jimoer/p/14227467.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/jimoer/p/14227467.html</guid>
<description>&lt;h2 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;è¿™æ¬¡çš„å†…å®¹æ˜¯æˆ‘è‡ªå·±ä¸ºäº†æ€»ç»“RedisçŸ¥è¯†è€Œæ‰©å……çš„ï¼Œä¸Šä¸€ç¯‡å…¶å®å·²ç»æ€»ç»“äº†å‡ ç‚¹çŸ¥è¯†äº†ï¼Œä½†æ˜¯Redisçš„å¼ºå¤§ï¼Œä»¥åŠé€‚ç”¨èŒƒå›´ä¹‹å¹¿å¯ä¸æ˜¯å•å•ä¸€ç¯‡åšæ–‡å°±èƒ½æ€»ç»“æ¸…çš„ã€‚æ‰€ä»¥è¿™æ¬¡å‡†å¤‡ç»§ç»­æ€»ç»“ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªé—®é¢˜ï¼ŒRedisçš„æ‰¹é‡æ“ä½œï¼Œæ˜¯æˆ‘åœ¨é¢è¯•è¿‡ç¨‹ä¸­è¢«çœŸå®é—®åˆ°çš„ï¼Œå½“æ—¶æ²¡ç­”ä¸Šæ¥ï¼Œä¹Ÿæ˜¯å› ä¸ºç¡®å®æ²¡äº†è§£è¿‡Redisçš„æ‰¹é‡æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;å½“æ—¶çš„é—®é¢˜ï¼Œæˆ‘è¿˜è®°å¾—æ¯”è¾ƒæ¸…æ™°ï¼šRedisæ‰§è¡Œæ‰¹é‡æ“ä½œçš„åŠŸèƒ½æ˜¯ä»€ä¹ˆï¼Ÿä½¿ç”¨åœºæ™¯å°±æ˜¯æä¿ƒé”€æ´»åŠ¨æ—¶ï¼Œä¼šåšé¢„ç¼“å­˜ï¼Œä¼šå¾€ç¼“å­˜é‡Œæ”¾å¤§æ‰¹æ•°æ®ï¼Œå¦‚æœç›´æ¥æ”¾çš„è¯é‚£ä¹ˆä¼šå¾ˆæ…¢ï¼Œæ€ä¹ˆèƒ½æé«˜æ•ˆç‡å‘¢ï¼Ÿ&lt;/p&gt;
&lt;h2 id=&quot;redisçš„æ‰¹é‡æ“ä½œ-ç®¡é“ï¼ˆpipelineï¼‰&quot;&gt;Redisçš„æ‰¹é‡æ“ä½œ-ç®¡é“ï¼ˆpipelineï¼‰&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆRedisçš„ç®¡é“ï¼ˆpipelineï¼‰å¹¶ä¸æ˜¯RedisæœåŠ¡ç«¯æä¾›çš„åŠŸèƒ½ï¼Œè€Œæ˜¯Rediså®¢æˆ·ç«¯ä¸ºäº†å‡å°‘ç½‘ç»œäº¤äº’è€Œæä¾›çš„ä¸€ç§åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;æ­£å¸¸çš„ä¸€æ¬¡Redisç½‘ç»œäº¤äº’å¦‚ä¸‹ï¼š&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201231231918737.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_SmlNb2Vy,size_30,color_c8cae6,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;pipeline&lt;/strong&gt;ä¸»è¦å°±æ˜¯å°†å¤šä¸ªè¯·æ±‚åˆå¹¶ï¼Œè¿›è¡Œä¸€æ¬¡æäº¤ç»™RedisæœåŠ¡å™¨ï¼ŒRedisæœåŠ¡å™¨å°†æ‰€æœ‰è¯·æ±‚å¤„ç†å®Œæˆä¹‹åï¼Œå†ä¸€æ¬¡æ€§è¿”å›ç»™å®¢æˆ·ç«¯ã€‚&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20201231233247603.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_SmlNb2Vy,size_30,color_c8cae6,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;ä¸‹é¢æˆ‘ä»¬åˆ†æä¸€ä¸‹&lt;strong&gt;pipeline&lt;/strong&gt;çš„åŸç†&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20210101093316355.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_SmlNb2Vy,size_60,color_c8cae6,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;&lt;strong&gt;pipeline&lt;/strong&gt;çš„ä¸€ä¸ªäº¤äº’è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;å®¢æˆ·ç«¯è¿›ç¨‹è°ƒç”¨&lt;code&gt;write&lt;/code&gt;å‘½ä»¤å°†æ¶ˆæ¯å†™å…¥åˆ°æ“ä½œç³»ç»Ÿå†…æ ¸ä¸ºå¥—æ¥å­—åˆ†é…çš„&lt;strong&gt;å‘é€ç¼“å†²åŒºsend buffer&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯æ“ä½œç³»ç»Ÿé€šè¿‡ç½‘ç»œè·¯ç”±ï¼Œå°†&lt;strong&gt;send buffer&lt;/strong&gt;ä¸­çš„æ•°æ®å‘é€ç»™æœåŠ¡å™¨æ“ä½œç³»ç»Ÿä¸ºå¥—æ¥å­—åˆ†é…çš„æ¥&lt;strong&gt;æ”¶ç¼“å†²åŒº receive buffer&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡ç«¯è¿›ç¨‹è°ƒç”¨&lt;code&gt;read&lt;/code&gt;å‘½ä»¤ä»&lt;strong&gt;receive buffer&lt;/strong&gt;ä¸­å–å‡ºæ•°æ®è¿›è¡Œå¤„ç†ï¼Œç„¶åè°ƒç”¨&lt;code&gt;write&lt;/code&gt;å‘½ä»¤å°†ç›¸åº”ä¿¡æ¯å†™å…¥åˆ°æœåŠ¡ç«¯çš„&lt;strong&gt;send buffer&lt;/strong&gt;ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡ç«¯æ“ä½œç³»ç»Ÿé€šè¿‡ç½‘ç»œè·¯ç”±ï¼Œå°†&lt;strong&gt;send buffer&lt;/strong&gt;ä¸­çš„æ•°æ®å‘é€ç»™å®¢æˆ·ç«¯æ“ä½œç³»ç»Ÿçš„&lt;strong&gt;receive buffer&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯è¿›ç¨‹è°ƒç”¨readå‘½ä»¤å°†æ•°æ®ä»&lt;strong&gt;receive buffer&lt;/strong&gt;ä¸­å–å‡ºè¿›è¡Œä¸šåŠ¡å¤„ç†ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;åœ¨ä½¿ç”¨&lt;strong&gt;pipeline&lt;/strong&gt;æ—¶éœ€è¦æ³¨æ„ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;pipelineæ‰§è¡Œçš„æ“ä½œï¼Œå’Œmgetï¼Œmsetï¼Œhmgetè¿™æ ·çš„æ“ä½œä¸åŒï¼Œpipelineçš„æ“ä½œæ˜¯ä¸å…·å¤‡åŸå­æ€§çš„ã€‚&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¿˜æœ‰åœ¨é›†ç¾¤æ¨¡å¼ä¸‹å› ä¸ºæ•°æ®æ˜¯è¢«åˆ†æ•£åœ¨ä¸åŒçš„sloté‡Œé¢çš„ï¼Œå› æ­¤åœ¨è¿›è¡Œæ‰¹é‡æ“ä½œçš„æ—¶å€™ï¼Œä¸èƒ½ä¿è¯æ“ä½œçš„æ•°æ®éƒ½åœ¨åŒä¸€å°æœåŠ¡å™¨çš„slotä¸Šï¼Œæ‰€ä»¥é›†ç¾¤æ¨¡å¼ä¸‹æ˜¯ç¦æ­¢æ‰§è¡Œåƒmgetã€msetã€pipelineç­‰æ‰¹é‡æ“ä½œçš„ï¼Œå¦‚æœéè¦ä½¿ç”¨æ‰¹é‡æ“ä½œï¼Œéœ€è¦è‡ªå·±ç»´æŠ¤keyä¸slotçš„å…³ç³»ã€‚&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;pipelineä¹Ÿä¸èƒ½ä¿è¯æ‰¹é‡æ“ä½œä¸­æœ‰å‘½ä»¤æ‰§è¡Œå¤±è´¥äº†è€Œä¸­æ–­ï¼Œä¹Ÿä¸èƒ½è®©ä¸‹ä¸€ä¸ªæŒ‡ä»¤ä¾èµ–ä¸Šä¸€ä¸ªæŒ‡ä»¤ï¼Œå¦‚æœéè¦è¿™æ ·çš„å¤æ‚é€»è¾‘ï¼Œå»ºè®®ä½¿ç”¨luaè„šæœ¬æ¥å®Œæˆæ“ä½œã€‚&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/blockquote&gt;
&lt;h2 id=&quot;rediså®ç°æ¶ˆæ¯é˜Ÿåˆ—å’Œå»¶æ—¶é˜Ÿåˆ—&quot;&gt;Rediså®ç°æ¶ˆæ¯é˜Ÿåˆ—å’Œå»¶æ—¶é˜Ÿåˆ—&lt;/h2&gt;
&lt;h3 id=&quot;æ¶ˆæ¯é˜Ÿåˆ—&quot;&gt;æ¶ˆæ¯é˜Ÿåˆ—&lt;/h3&gt;
&lt;p&gt;Redisçš„å®ç°æ¶ˆæ¯é˜Ÿåˆ—å¯ä»¥ç”¨listæ¥å®ç°ï¼Œé€šè¿‡lpushä¸rpopæˆ–è€…rpushä¸lpopç»“åˆæ¥å®ç°æ¶ˆæ¯é˜Ÿåˆ—ã€‚&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20210101184213391.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_SmlNb2Vy,size_30,color_c8cae6,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;ä½†æ˜¯è‹¥æ˜¯listä¸ºç©ºåï¼Œæ— è®ºæ˜¯lpopè¿˜æ˜¯rpopéƒ½ä¼šæŒç»­çš„è·å–listä¸­çš„æ•°æ®ï¼Œè‹¥listä¸€ç›´ä¸ºç©ºï¼ŒæŒç»­çš„æ‹‰å–æ•°æ®ï¼Œä¸€æ˜¯ä¼šå¢åŠ å®¢æˆ·ç«¯çš„cpuåˆ©ç”¨ç‡ï¼ŒäºŒæ˜¯ä¹Ÿå¢é«˜äº†Redisçš„QPSï¼Œè§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨&lt;strong&gt;blpop&lt;/strong&gt;æˆ–&lt;strong&gt;brpop&lt;/strong&gt;æ¥ä»£æ›¿lpopæˆ–rpopã€‚&lt;br/&gt;å…¶å®blpopå’Œbrpopçš„ä½œç”¨æ˜¯bloking popï¼Œå°±æ˜¯é˜»å¡æ‹‰å–æ•°æ®ï¼Œå½“æ¶ˆæ¯é˜Ÿåˆ—ä¸­ä¸ºç©ºæ—¶å°±ä¼šåœæ­¢æ‹‰å–ï¼Œæœ‰æ•°æ®åç«‹å³æ¢å¤æ‹‰å–ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯å½“æ²¡æœ‰æ•°æ®çš„æ—¶å€™ï¼Œ&lt;strong&gt;é˜»å¡æ‹‰å–&lt;/strong&gt;ï¼Œå°±ä¼šä¸€ç›´é˜»å¡åœ¨é‚£é‡Œï¼Œæ—¶é—´ä¹…äº†å°±æˆäº†ç©ºé—²è¿æ¥ï¼Œé‚£ä¹ˆRedisæœåŠ¡å™¨ä¸€èˆ¬ä¼šå°†æ—¶é—´é—²ç½®è¿‡ä¹…çš„è¿æ¥ç›´æ¥æ–­æ‰ï¼Œä»¥å‡å°‘è¿æ¥èµ„æºã€‚æ‰€ä»¥è¿˜è¦æ£€æµ‹&lt;strong&gt;é˜»å¡æ‹‰å–&lt;/strong&gt;æŠ›å‡ºçš„å¼‚å¸¸ç„¶åè¿›è¡Œé‡è¯•ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;å¦å¤–ä¸€ç‚¹ï¼Œå°±æ˜¯Rediså®ç°çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ²¡æœ‰ACKæœºåˆ¶ï¼Œæ‰€ä»¥æƒ³è¦å®ç°æ¶ˆæ¯çš„å¯é æ€§ï¼Œè¿˜è¦è‡ªå·±å®ç°å½“æ¶ˆæ¯å¤„ç†å¤±è´¥åï¼Œèƒ½ç»§ç»­æŠ›å›é˜Ÿåˆ—ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;å»¶æ—¶é˜Ÿåˆ—&quot;&gt;å»¶æ—¶é˜Ÿåˆ—&lt;/h3&gt;
&lt;p&gt;ç”¨Rediså®ç°å»¶æ—¶é˜Ÿåˆ—ï¼Œå…¶å®å°±æ˜¯ä½¿ç”¨zsetæ¥å®ç°ï¼Œå°†æ¶ˆæ¯åºåˆ—åŒ–æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆå¯ä»¥æ˜¯jsonæ ¼å¼ï¼‰ï¼Œä½œä¸ºä¸º&lt;code&gt;value&lt;/code&gt;ï¼Œæ¶ˆæ¯çš„åˆ°æœŸå¤„ç†æ—¶é—´åšä¸º&lt;code&gt;score&lt;/code&gt;ï¼Œç„¶åç”¨å¤šçº¿ç¨‹å»è½®è¯¢zsetæ¥è·å–åˆ°æœŸæ¶ˆæ¯è¿›è¡Œå¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;å¤šçº¿ç¨‹è½®è¯¢å¤„ç†ï¼Œä¿è¯äº†å¯ç”¨æ€§ï¼Œä½†æ˜¯è¦åšå¹‚ç­‰æˆ–é”å¤„ç†ï¼Œä¿è¯ä¸è¦é‡å¤å¤„ç†æ¶ˆæ¯ã€‚&lt;/p&gt;
&lt;p&gt;ä¸»è¦çš„å®ç°ä»£ç å¦‚ä¸‹ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;/**
 * æ”¾å…¥å»¶æ—¶é˜Ÿåˆ—
 * @param queueMsg
 */
private void delay(QueueMsg queueMsg){

    String msg = JSON.toJSONString(queueMsg);

    jedis.zadd(queueKey,System.currentTimeMillis()+5000,msg);

}

/**
 * å¤„ç†é˜Ÿåˆ—ä¸­ä»æ¶ˆæ¯
 */
private void lpop(){
    while (!Thread.interrupted()){
        // ä»é˜Ÿåˆ—ä¸­å–å‡ºï¼Œæƒé‡ä¸º0åˆ°å½“å‰æ—¶é—´çš„æ•°æ®ï¼Œå¹¶ä¸”æ•°é‡åªå–ä¸€ä¸ª
        Set&amp;lt;String&amp;gt; strings = jedis.zrangeByScore(queueKey, 0, System.currentTimeMillis(), 0, 1);
                // å¦‚æœæ¶ˆæ¯ä¸ºç©ºï¼Œå°±æ­‡ä¼šå„¿å†å–ã€‚
        if(strings.isEmpty()){
            try {
                //ä¼‘æ¯ä¸€ä¼šå„¿
                Thread.sleep(500);
            } catch (InterruptedException e) {
                e.printStackTrace();
                break;
            }
            continue;
        }
        String next = strings.iterator().next();
        // å¦‚æœæŠ¢åˆ°äº†æ¶ˆæ¯
        if(jedis.zrem(queueKey,next)&amp;gt;0){
            // ååºåˆ—åŒ–åè·å–åˆ°æ¶ˆæ¯
            QueueMsg queueMsg = JSON.parseObject(next, QueueMsg.class);
            // è¿›è¡Œæ¶ˆæ¯å¤„ç†
            handleMsg(queueMsg);
        }
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;è®¢é˜…æ¨¡å¼&quot;&gt;è®¢é˜…æ¨¡å¼&lt;/h2&gt;
&lt;p&gt;Redisçš„ä¸»é¢˜è®¢é˜…æ¨¡å¼ï¼Œå…¶å®å¹¶ä¸æƒ³è¿‡å¤šæ€»ç»“ï¼Œå› ä¸ºç”±äºå®ƒæœ¬èº«çš„ä¸€äº›ç¼ºç‚¹ï¼Œå¯¼è‡´å®ƒçš„åº”ç”¨åœºæ™¯æ¯”è¾ƒçª„ã€‚&lt;/p&gt;
&lt;p&gt;å‰é¢æ€»ç»“çš„ç”¨Redisçš„listå®ç°çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œè™½ç„¶å¯ä»¥ä½¿ç”¨ï¼Œä½†æ˜¯å¹¶ä¸æ”¯æŒæ¶ˆæ¯å¤šæ’­çš„åœºæ™¯ï¼Œå³ä¸€ä¸ªç”Ÿäº§è€…ï¼Œå°†æ¶ˆæ¯æ”¾å…¥åˆ°å¤šä¸ªé˜Ÿåˆ—ä¸­ï¼Œç„¶åå¤šä¸ªæ¶ˆè´¹è€…è¿›è¡Œæ¶ˆè´¹ã€‚&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20210102103013272.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_SmlNb2Vy,size_30,color_c8cae6,t_70&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;br/&gt;è¿™ç§æ¶ˆæ¯å¤šæ’­çš„åœºæ™¯å¸¸ç”¨æ¥åšåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„è§£è€¦ã€‚ç”¨å“¦&lt;code&gt;publish&lt;/code&gt;è¿›è¡Œç”Ÿäº§è€…å‘é€æ¶ˆæ¯ï¼Œæ¶ˆè´¹è€…ä½¿ç”¨&lt;code&gt;subscribe&lt;/code&gt;è¿›è¡Œè·å–æ¶ˆæ¯ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼šæˆ‘å‘jimoerChannelå‘é€äº†ä¸€æ¡æ¶ˆæ¯ &lt;code&gt;b-tree&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-powershell&quot;&gt;127.0.0.1:6379&amp;gt; publish jimoerChannel b-tree
(integer) 1
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è®¢é˜…è¿™ä¸ªæ¸ é“çš„æ¶ˆè´¹è€…ç«‹é©¬æ”¶åˆ°äº†ä¸€æ¡b-treeçš„æ¶ˆæ¯ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-powershell&quot;&gt;127.0.0.1:6379&amp;gt; subscribe jimoerChannel
Reading messages... (press Ctrl-C to quit)
1) &quot;subscribe&quot;
2) &quot;jimoerChannel&quot;
3) (integer) 1
1) &quot;message&quot;
2) &quot;jimoerChannel&quot;
3) &quot;b-tree&quot;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æˆ‘å‰é¢ä¹Ÿè¯´åˆ°äº†ï¼ŒRedisçš„pub/subè®¢é˜…æ¨¡å¼ï¼Œå…¶å®æœ€å¤§çš„ç¼ºç‚¹å°±æ˜¯ï¼Œæ¶ˆæ¯ä¸èƒ½æŒä¹…åŒ–ï¼Œè¿™æ ·å°±å¯¼è‡´ï¼Œè‹¥æ˜¯æ¶ˆè´¹è€…æŒ‚äº†æˆ–æ˜¯æ²¡æœ‰æ¶ˆè´¹è€…ï¼Œé‚£ä¹ˆæ¶ˆæ¯å°±ä¼šè¢«ç›´æ¥ä¸¢å¼ƒã€‚å› ä¸ºè¿™ä¸ªåŸå› ï¼Œæ‰€ä»¥å¯¼è‡´ä»–çš„ä½¿ç”¨åœºæ™¯æ¯”è¾ƒå°‘ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ioæ¨¡å‹&quot;&gt;IOæ¨¡å‹&lt;/h2&gt;
&lt;h2 id=&quot;redisçš„è¿‡æœŸç­–ç•¥&quot;&gt;Redisçš„è¿‡æœŸç­–ç•¥&lt;/h2&gt;
&lt;p&gt;Redisçš„è¿‡æœŸç­–ç•¥æ˜¯é€‚ç”¨äºæ‰€æœ‰æ•°æ®ç»“æ„çš„ã€‚æ•°æ®ä¸€åˆ°è¿‡æœŸæ—¶é—´å°±è‡ªåŠ¨åˆ é™¤ï¼ŒRedisä¼šå°†è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„key æ”¾ç½®åœ¨ä¸€ä¸ªå­—å…¸è¡¨é‡Œã€‚&lt;/p&gt;
&lt;h3 id=&quot;å®šæœŸåˆ é™¤&quot;&gt;å®šæœŸåˆ é™¤&lt;/h3&gt;
&lt;p&gt;Redisä¼šå®šæœŸéå†å­—å…¸è¡¨é‡Œé¢æ•°æ®æ¥åˆ é™¤è¿‡æœŸçš„Keyã€‚&lt;br/&gt;&lt;strong&gt;Redisé»˜è®¤çš„å®šæœŸåˆ é™¤ç­–ç•¥æ˜¯æ¯ç§’è¿›è¡Œ10æ¬¡è¿‡æœŸæ‰«æï¼Œå³æ¯100msæ‰«æä¸€æ¬¡ã€‚å¹¶ä¸æ˜¯æ‰«æå…¨éƒ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyï¼Œè€Œæ˜¯éšæœºæ‰«æ20ä¸ªkeyï¼Œåˆ é™¤æ‰å·²ç»è¿‡æœŸçš„keyï¼Œå¦‚æœè¿‡æœŸçš„æ¯”ç‡è¶…è¿‡25%ï¼Œé‚£ä¹ˆå°±ç»§ç»­è¿›è¡Œæ‰«æã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;æƒ°æ€§åˆ é™¤&quot;&gt;æƒ°æ€§åˆ é™¤&lt;/h3&gt;
&lt;p&gt;å› ä¸ºå®šæœŸåˆ é™¤æ˜¯éšæœºæŠ½å–ä¸€äº›keyæ¥è¿›è¡Œè¿‡æœŸåˆ é™¤ï¼Œæ‰€ä»¥å¦‚æœkeyå¹¶æ²¡æœ‰è¢«å®šæœŸæ‰«æåˆ°ï¼Œé‚£ä¹ˆè¿‡æœŸçš„keyå°±ä¸ä¼šè¢«åˆ é™¤ã€‚æ‰€ä»¥Redisè¿˜æä¾›äº†æƒ°æ€§åˆ é™¤çš„ç­–ç•¥ï¼Œ&lt;strong&gt;å°±æ˜¯å½“å»æŸ¥è¯¢æŸäº›keyçš„æ—¶å€™ï¼Œè‹¥æ˜¯keyå·²ç»è¿‡æœŸäº†ï¼Œé‚£ä¹ˆå°±ä¼šåˆ é™¤keyï¼Œç„¶åè¿”å›nullã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦å¤–ä¸€ç‚¹å½“åœ¨é›†ç¾¤æ¡ä»¶ä¸‹ï¼Œä¸»ä»åŒæ­¥æƒ…å†µä¸­ï¼Œä¸»èŠ‚ç‚¹ä¸­çš„keyè¿‡æœŸåï¼Œä¼šåœ¨aofä¸­ç”Ÿæˆä¸€æ¡åˆ é™¤æŒ‡ä»¤ï¼Œç„¶ååŒæ­¥åˆ°ä»èŠ‚ç‚¹ï¼Œè¿™æ ·çš„ä»èŠ‚ç‚¹åœ¨æ¥æ”¶åˆ°aofçš„åˆ é™¤æŒ‡ä»¤åï¼Œåˆ é™¤æ‰ä»èŠ‚ç‚¹çš„keyï¼Œå› ä¸ºä¸»ä»åŒæ­¥çš„æ—¶å€™æ˜¯å¼‚æ­¥çš„æ‰€ä»¥ï¼ŒçŸ­æš‚çš„ä¼šå‡ºç°ä¸»èŠ‚ç‚¹å·²ç»æ²¡æœ‰æ•°æ®äº†ï¼Œä½†æ˜¯ä»èŠ‚ç‚¹è¿˜å­˜åœ¨ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯è‹¥æ˜¯å®šæœŸåˆ é™¤ä¹Ÿæ²¡æœ‰æ‰«æåˆ°keyï¼Œè€Œä¸”å¥½é•¿æ—¶é—´ä¹Ÿæ²¡å»å»ä½¿ç”¨keyï¼Œé‚£ä¹ˆè¿™éƒ¨åˆ†è¿‡æœŸçš„keyå°±ä¼šä¸€ç›´å ç”¨çš„å†…å­˜ã€‚&lt;br/&gt;æ‰€ä»¥Redisåˆæä¾›äº†å†…å­˜æ·˜æ±°æœºåˆ¶ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å†…å­˜æ·˜æ±°æœºåˆ¶&quot;&gt;å†…å­˜æ·˜æ±°æœºåˆ¶&lt;/h3&gt;
&lt;p&gt;å½“Redisçš„å†…å­˜å‡ºç°ä¸è¶³æ—¶ï¼Œå°±ä¼šæŒç»­çš„å’Œç£ç›˜è¿›è¡Œäº¤äº’ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´Rediså¡é¡¿ï¼Œæ•ˆç‡é™ä½ç­‰æƒ…å†µã€‚è¿™åœ¨çº¿ä¸Šæ˜¯ä¸å…è®¸å‘ç”Ÿçš„ï¼Œæ‰€ä»¥Redisæä¾›äº†é…ç½®å‚æ•° &lt;code&gt;maxmemory&lt;/code&gt; æ¥é™åˆ¶å†…å­˜è¶…å‡ºæœŸæœ›å¤§å°ã€‚&lt;/p&gt;
&lt;p&gt;å½“å†…å­˜ä½¿ç”¨æƒ…å†µè¶…è¿‡maxmemoryçš„å€¼æ—¶ï¼ŒRedisæä¾›äº†ä»¥ä¸‹å‡ ç§ç­–ç•¥ï¼Œæ¥è®©ä½¿ç”¨è€…é€šè¿‡é…ç½®å†³å®šè¯¥å¦‚ä½•è…¾å‡ºå†…å­˜ç©ºé—´æ¥ç»§ç»­æä¾›æœåŠ¡ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;&lt;code&gt;noeviction&lt;/code&gt;&lt;/strong&gt; ä¸ä¼šç»§ç»­æä¾›å†™è¯·æ±‚ï¼ˆdelè¯·æ±‚å¯ä»¥ï¼‰ï¼Œè¯»è¯·æ±‚å¯ä»¥ï¼Œå†™è¯·æ±‚ä¼šæŠ¥é”™ï¼Œè¿™æ ·ä¿è¯çš„æ•°æ®ä¸ä¼šä¸¢å¤±ï¼Œä½†æ˜¯ä¸šåŠ¡ä¸å¯ç”¨ï¼Œè¿™æ˜¯é»˜è®¤çš„ç­–ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;volatile-lru&lt;/code&gt;&lt;/strong&gt; ä¼šå°†è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyä¸­ï¼Œæ·˜æ±°æ‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„keyã€‚æ²¡æœ‰è®¾ç½®è¿‡æœŸæ—¶é—´çš„keyä¸ä¼šè¢«æ·˜æ±°ï¼Œä¿è¯äº†éœ€è¦æŒä¹…åŒ–çš„æ•°æ®ä¸ä¸¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;volatile-ttl&lt;/code&gt;&lt;/strong&gt; å°è¯•å°†è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyä¸­ï¼Œå‰©ä½™ç”Ÿå‘½å‘¨æœŸè¶ŠçŸ­ï¼Œè¶Šå®¹æ˜“è¢«æ·˜æ±°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;volatile-random&lt;/code&gt;&lt;/strong&gt; å°è¯•å°†ä»è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyä¸­ï¼Œéšæœºé€‰æ‹©ä¸€äº›keyè¿›è¡Œæ·˜æ±°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;allkeys-lru&lt;/code&gt;&lt;/strong&gt; ä»æ‰€æœ‰keyä¸­ï¼Œæ·˜æ±°æ‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„keyã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;allkeys-random&lt;/code&gt;&lt;/strong&gt; ä»æ‰€æœ‰keyä¸­ï¼Œéšæœºæ·˜æ±°ä¸€éƒ¨åˆ†keyã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;é‚£ä¹ˆå…·ä½“è®¾ç½®æˆå“ªç§æ·˜æ±°ç­–ç•¥å‘¢ï¼Ÿ&lt;br/&gt;&lt;strong&gt;è¿™å°±æ˜¯è¦çœ‹åœ¨ä½¿ç”¨Redisæ—¶çš„å…·ä½“åœºæ™¯äº†ï¼Œå¦‚æœåªæ˜¯ç”¨Redisåšç¼“å­˜çš„è¯ï¼Œé‚£ä¹ˆå¯ä»¥é…ç½®allkeys-lruæˆ–allkey-randomï¼Œå®¢æˆ·ç«¯åœ¨å†™ç¼“å­˜çš„æ—¶å€™å¹¶ä¸ç”¨æºå¸¦ç€è¿‡æœŸæ—¶é—´ã€‚è‹¥æ˜¯è¿˜æƒ³è¦ç”¨æŒä¹…åŒ–çš„åŠŸèƒ½ï¼Œé‚£ä¹ˆå°±åº”è¯¥ä½¿ç”¨volatile-å¼€å¤´çš„ç­–ç•¥ï¼Œè¿™æ ·å¯ä»¥ä¿è¯æ¯æœˆè®¾ç½®è¿‡æœŸæ—¶é—´çš„keyä¸ä¼šè¢«æ·˜æ±°ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å†…å­˜æ·˜æ±°ç­–ç•¥çš„é…ç½®å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-powershell&quot;&gt;# æœ€å¤§ä½¿ç”¨å†…å­˜
 maxmemory 5m
# å†…å­˜æ·˜æ±°ç­–ç•¥ The default is:noeviction
 maxmemory-policy allkeys-lru
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;lruç®—æ³•&quot;&gt;LRUç®—æ³•&lt;/h3&gt;
&lt;p&gt;LRUç®—æ³•çš„å®ç°ï¼Œå…¶å®å¯ä»¥é ä¸€ä¸ªé“¾è¡¨ã€‚é“¾è¡¨æŒ‰ç…§ä½¿ç”¨æƒ…å†µæ¥è¿›è¡Œæ’åºï¼Œå½“ç©ºé—´ä¸è¶³æ—¶ï¼Œä¼šå‰”é™¤æ‰å°¾éƒ¨çš„æ•°æ®ã€‚å½“æŸä¸ªå…ƒç´ è¢«è®¿é—®æ—¶å®ƒä¼šè¢«ç§»åŠ¨åˆ°é“¾è¡¨å¤´ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨çœŸå®çš„é¢è¯•ä¸­ï¼Œè‹¥æ˜¯è®©å†™å‡ºLRUç®—æ³•ï¼Œæˆ‘è®¤ä¸ºå¯ä»¥ä½¿ç”¨Javaä¸­çš„LikedHashMapæ¥å®ç°ï¼Œå› ä¸ºLikedHashMapå·²ç»å®ç°äº†åŸºæœ¬çš„LRUåŠŸèƒ½ï¼Œæˆ‘åªéœ€è¦å°è£…ä¸€ä¸‹å°±æ”¹é€ æˆäº†è‡ªå·±çš„äº†ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;/**
 * @author Jimoer
 * @description
 */
public class MyLRUCache&amp;lt;K,V&amp;gt; {
    // lruå®¹é‡
    private int lruCapacity;
    // æ•°æ®å®¹å™¨ï¼ˆå†…å­˜ï¼‰
    private Map&amp;lt;K,V&amp;gt; dataMap;

    public MyLRUCache(int capacity){
        
        this.lruCapacity = capacity;
        // è®¾ç½®LinkedHashMapçš„åˆå§‹å®¹é‡ä¸ºLRUçš„æœ€å¤§å®¹é‡ï¼Œ
        // æ‰©å®¹å› å­ä¸ºé»˜è®¤çš„0.75ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å¦å°†æ•°æ®æŒ‰ç…§è®¿é—®é¡ºåºæ’åºã€‚
        dataMap = new LinkedHashMap&amp;lt;K, V&amp;gt;(capacity, 0.75f, true){
            @Override
            protected boolean removeEldestEntry(Map.Entry&amp;lt;K, V&amp;gt; eldest) {
                // å½“æ•°æ®é‡å¤§äºlruCapacityæ—¶ï¼Œç§»é™¤æ‰æœ€è€ä½¿ç”¨çš„æ•°æ®ã€‚
                return super.size()&amp;gt;lruCapacity;
            }
        };
    }

    public V get(K k){
        return dataMap.get(k);
    }

    public void put(K key, V value){
        dataMap.put(key,value);
    }

    public int getLruCapacity() {
        return lruCapacity;
    }

    public Map&amp;lt;K, V&amp;gt; getDataMap() {
        return dataMap;
    }

}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æµ‹è¯•ä»£ç ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Test
public void lruTest(){
    // å†…å­˜å®¹é‡ä¸º3ï¼Œå³å­˜å‚¨3æ¡æ•°æ®åï¼Œå†æ”¾å…¥æ•°æ®ï¼Œå°±ä¼šå°†æœ€è€ä½¿ç”¨çš„æ•°æ®åˆ é™¤
    MyLRUCache myLRUCache = new MyLRUCache(3);

    myLRUCache.put(&quot;1k&quot;,&quot;å¼ ä¸‰&quot;);
    myLRUCache.put(&quot;2k&quot;,&quot;æå››&quot;);
    myLRUCache.put(&quot;3k&quot;,&quot;ç‹äº”&quot;);
    // å®¹é‡å·²æ»¡
    System.out.println(&quot;myLRUCache:&quot;+JSON.toJSONString(myLRUCache.getDataMap()));
    // ç»§ç»­æ”¾å…¥æ•°æ®ï¼Œè¯¥åˆ é™¤ç¬¬ä¸€æ¡æ•°æ®ä¸ºç¬¬å››æ¡æ•°æ®è…¾å‡ºç©ºé—´äº†
    myLRUCache.put(&quot;4k&quot;,&quot;èµµå…­&quot;);
    // æ‰“å°å‡ºç»“æœ
    System.out.println(&quot;myLRUCache:&quot;+JSON.toJSONString(myLRUCache.getDataMap()));
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿è¡Œç»“æœï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;myLRUCache:{&quot;1k&quot;:&quot;å¼ ä¸‰&quot;,&quot;2k&quot;:&quot;æå››&quot;,&quot;3k&quot;:&quot;ç‹äº”&quot;}
myLRUCache:{&quot;2k&quot;:&quot;æå››&quot;,&quot;3k&quot;:&quot;ç‹äº”&quot;,&quot;4k&quot;:&quot;èµµå…­&quot;}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;å¥½äº†ï¼ŒRedisçš„ç›¸å…³çŸ¥è¯†ï¼Œå°±æ€»ç»“åˆ°è¿™é‡Œäº†ï¼Œç®—ä¸Šå‰é¢ä¸¤ç¯‡åšæ–‡ï¼ˆ&lt;a href=&quot;https://blog.csdn.net/qq_35165000/article/details/109524499&quot; target=&quot;_blank&quot;&gt;RedisåŸºç¡€æ•°æ®ç»“æ„æ€»ç»“&lt;/a&gt;ã€&lt;a href=&quot;https://www.cnblogs.com/jimoer/p/14204650.html&quot; target=&quot;_blank&quot;&gt;ä½ è¯´ä¸€ä¸‹Redisä¸ºä»€ä¹ˆå¿«å§ï¼Œæ€ä¹ˆå®ç°é«˜å¯ç”¨ï¼Œè¿˜æœ‰æŒä¹…åŒ–æ€ä¹ˆåšçš„&lt;/a&gt;ï¼‰ï¼Œè¿™æ˜¯Redisçš„ç¬¬ä¸‰ç¯‡äº†ï¼Œè¿™ä¸€ç¯‡åšæ–‡ä¹Ÿæ˜¯æ–°å¹´çš„ç¬¬ä¸€ç¯‡ï¼Œå…ƒæ—¦å‡æœŸåœ¨å®¶èŠ±äº†ä¸¤å¤©æ—¶é—´ï¼Œè‡ªå·±å­¦ä¹ è‡ªå·±æ€»ç»“ã€‚å…ƒæ—¦å‡æœŸç»“æŸåï¼Œæˆ‘è¦ç»§ç»­é¢è¯•äº†ï¼Œåé¢æˆ‘ä¼šç»§ç»­å°†æˆ‘é¢è¯•ä¸­é‡åˆ°çš„å„ç§é—®é¢˜ï¼Œæ€»ç»“å‡ºæ¥ï¼Œä¸€æ˜¯å¢åŠ è‡ªå·±çš„çŸ¥è¯†é¢ï¼ŒäºŒä¹Ÿå°†çŸ¥è¯†è¿›è¡Œçš„ä¼ æ’­ã€‚&lt;br/&gt;æ¯•ç«Ÿç‹¬ä¹ä¹ä¸ä¼—ä¹ä¹ğŸ˜ã€‚&lt;/p&gt;
</description>
<pubDate>Mon, 04 Jan 2021 00:33:00 +0000</pubDate>
<dc:creator>çºªè«</dc:creator>
<og:description>å‰è¨€ è¿™æ¬¡çš„å†…å®¹æ˜¯æˆ‘è‡ªå·±ä¸ºäº†æ€»ç»“RedisçŸ¥è¯†è€Œæ‰©å……çš„ï¼Œä¸Šä¸€ç¯‡å…¶å®å·²ç»æ€»ç»“äº†å‡ ç‚¹çŸ¥è¯†äº†ï¼Œä½†æ˜¯Redisçš„å¼ºå¤§ï¼Œä»¥åŠé€‚ç”¨èŒƒå›´ä¹‹å¹¿å¯ä¸æ˜¯å•å•ä¸€ç¯‡åšæ–‡å°±èƒ½æ€»ç»“æ¸…çš„ã€‚æ‰€ä»¥è¿™æ¬¡å‡†å¤‡ç»§ç»­æ€»ç»“ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªé—®é¢˜ï¼ŒRe</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/jimoer/p/14227467.html</dc:identifier>
</item>
<item>
<title>æ­»ç£•ä»¥å¤ªåŠæºç åˆ†æä¹‹MPTæ ‘-ä¸Š - mindcarver</title>
<link>http://www.cnblogs.com/1314xf/p/14227781.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/1314xf/p/14227781.html</guid>
<description>&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;æ­»ç£•ä»¥å¤ªåŠæºç åˆ†æä¹‹MPTæ ‘-ä¸Š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;å‰ç¼€æ ‘trie&quot;&gt;å‰ç¼€æ ‘Trie&lt;/h2&gt;
&lt;p&gt;å‰ç¼€æ ‘ï¼ˆåˆç§°å­—å…¸æ ‘ï¼‰ï¼Œé€šå¸¸æ¥è¯´ï¼Œä¸€ä¸ªå‰ç¼€æ ‘æ˜¯ç”¨æ¥&lt;code&gt;å­˜å‚¨å­—ç¬¦ä¸²&lt;/code&gt;çš„ã€‚å‰ç¼€æ ‘çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ª&lt;code&gt;å­—ç¬¦ä¸²&lt;/code&gt;ï¼ˆ&lt;code&gt;å‰ç¼€&lt;/code&gt;ï¼‰ã€‚æ¯ä¸€ä¸ªèŠ‚ç‚¹ä¼šæœ‰å¤šä¸ªå­èŠ‚ç‚¹ï¼Œé€šå¾€ä¸åŒå­èŠ‚ç‚¹çš„è·¯å¾„ä¸Šæœ‰ç€ä¸åŒçš„å­—ç¬¦ã€‚å­èŠ‚ç‚¹ä»£è¡¨çš„å­—ç¬¦ä¸²æ˜¯ç”±èŠ‚ç‚¹æœ¬èº«çš„&lt;code&gt;åŸå§‹å­—ç¬¦ä¸²&lt;/code&gt;ï¼Œä»¥åŠ&lt;code&gt;é€šå¾€è¯¥å­èŠ‚ç‚¹è·¯å¾„ä¸Šæ‰€æœ‰çš„å­—ç¬¦&lt;/code&gt;ç»„æˆçš„ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0081Kckwgy1gm73i6xursj31820qq789.jpg&quot; alt=&quot;image-20201231160000592&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Trieçš„ç»“ç‚¹çœ‹ä¸Šå»æ˜¯è¿™æ ·å­çš„ï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;[ [Ia, Ib, â€¦ I*], value]&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å…¶ä¸­ &lt;code&gt;[Ia, Ib, ... I*]&lt;/code&gt; åœ¨æœ¬æ–‡ä¸­æˆ‘ä»¬å°†å…¶ç§°ä¸ºç»“ç‚¹çš„ &lt;em&gt;ç´¢å¼•æ•°ç»„&lt;/em&gt; ï¼Œå®ƒä»¥ key ä¸­çš„ä¸‹ä¸€ä¸ªå­—ç¬¦ä¸ºç´¢å¼•ï¼Œæ¯ä¸ªå…ƒç´ &lt;code&gt;I*&lt;/code&gt;æŒ‡å‘å¯¹åº”çš„å­ç»“ç‚¹ã€‚ &lt;code&gt;value&lt;/code&gt; åˆ™ä»£è¡¨ä»æ ¹èŠ‚ç‚¹åˆ°å½“å‰ç»“ç‚¹çš„è·¯å¾„ç»„æˆçš„keyæ‰€å¯¹åº”çš„å€¼ã€‚å¦‚æœä¸å­˜åœ¨è¿™æ ·ä¸€ä¸ª keyï¼Œåˆ™ value çš„å€¼ä¸ºç©ºã€‚&lt;/p&gt;
&lt;p&gt;å‰ç¼€æ ‘çš„æ€§è´¨ï¼š&lt;/p&gt;
&lt;ol readability=&quot;3.5&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;æ¯ä¸€å±‚èŠ‚ç‚¹ä¸Šé¢çš„å€¼éƒ½ä¸ç›¸åŒï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;æ ¹èŠ‚ç‚¹ä¸å­˜å‚¨å€¼ï¼›é™¤æ ¹èŠ‚ç‚¹å¤–æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½&lt;strong&gt;åªåŒ…å«ä¸€ä¸ªå­—ç¬¦&lt;/strong&gt;ï¼Œä»£è¡¨çš„å­—ç¬¦ä¸²æ˜¯ç”±èŠ‚ç‚¹æœ¬èº«çš„&lt;code&gt;åŸå§‹å­—ç¬¦ä¸²&lt;/code&gt;ï¼Œä»¥åŠ&lt;code&gt;é€šå¾€è¯¥å­èŠ‚ç‚¹è·¯å¾„ä¸Šæ‰€æœ‰çš„å­—ç¬¦&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;å‰ç¼€æ ‘çš„æŸ¥æ‰¾æ•ˆç‡æ˜¯$O(m)$ï¼Œ$m$ä¸ºæ‰€æŸ¥æ‰¾èŠ‚ç‚¹çš„é•¿åº¦ï¼Œè€Œå“ˆå¸Œè¡¨çš„æŸ¥æ‰¾æ•ˆç‡ä¸º$O(1)$ã€‚ä¸”ä¸€æ¬¡æŸ¥æ‰¾ä¼šæœ‰ m æ¬¡ &lt;code&gt;IO&lt;/code&gt;å¼€é”€ï¼Œç›¸æ¯”äºç›´æ¥æŸ¥æ‰¾ï¼Œæ— è®ºæ˜¯é€Ÿç‡ã€è¿˜æ˜¯å¯¹ç£ç›˜çš„å‹åŠ›éƒ½æ¯”è¾ƒå¤§ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;å½“å­˜åœ¨ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå…¶å†…å®¹å¾ˆé•¿ï¼ˆå¦‚ä¸€ä¸²å¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼‰ï¼Œå½“æ ‘ä¸­æ²¡æœ‰ä¸ä»–ç›¸åŒå‰ç¼€çš„åˆ†æ”¯æ—¶ï¼Œä¸ºäº†å­˜å‚¨è¯¥èŠ‚ç‚¹ï¼Œéœ€è¦åˆ›å»ºè®¸å¤šéå¶å­èŠ‚ç‚¹æ¥æ„å»ºæ ¹èŠ‚ç‚¹åˆ°è¯¥èŠ‚ç‚¹é—´çš„è·¯å¾„ï¼Œé€ æˆäº†å­˜å‚¨ç©ºé—´çš„æµªè´¹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;h2 id=&quot;å‹ç¼©å‰ç¼€æ ‘patricia-tree&quot;&gt;å‹ç¼©å‰ç¼€æ ‘Patricia Tree&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;åŸºæ•°æ ‘&lt;/strong&gt;ï¼ˆä¹Ÿå«&lt;strong&gt;åŸºæ•°ç‰¹é‡Œæ ‘&lt;/strong&gt;æˆ–&lt;strong&gt;å‹ç¼©å‰ç¼€æ ‘&lt;/strong&gt;ï¼‰æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œæ˜¯ä¸€ç§æ›´èŠ‚çœç©ºé—´çš„&lt;strong&gt;å‰ç¼€æ ‘&lt;/strong&gt;ï¼Œå…¶ä¸­ä½œä¸ºå”¯ä¸€å­èŠ‚ç‚¹çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¸å…¶çˆ¶èŠ‚ç‚¹åˆå¹¶ï¼Œè¾¹æ—¢å¯ä»¥è¡¨ç¤ºä¸ºå…ƒç´ åºåˆ—åˆå¯ä»¥è¡¨ç¤ºä¸ºå•ä¸ªå…ƒç´ ã€‚ å› æ­¤æ¯ä¸ªå†…éƒ¨èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ•°æœ€å¤šä¸ºåŸºæ•°æ ‘çš„åŸºæ•° &lt;em&gt;r&lt;/em&gt; ï¼Œå…¶ä¸­ &lt;em&gt;r&lt;/em&gt; ä¸ºæ­£æ•´æ•°ï¼Œ &lt;em&gt;x&lt;/em&gt; ä¸º 2 çš„å¹‚ï¼Œ &lt;em&gt;x&lt;/em&gt;â‰¥1 ï¼Œè¿™ä½¿å¾—åŸºæ•°æ ‘æ›´é€‚ç”¨äºå¯¹äºè¾ƒå°çš„é›†åˆï¼ˆå°¤å…¶æ˜¯å­—ç¬¦ä¸²å¾ˆé•¿çš„æƒ…å†µä¸‹ï¼‰å’Œæœ‰å¾ˆé•¿ç›¸åŒå‰ç¼€çš„å­—ç¬¦ä¸²é›†åˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0081Kckwgy1gm70dwcmgdj31780kkqae.jpg&quot; alt=&quot;image-20201231133805927&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å›¾ä¸­å¯ä»¥å¾ˆå®¹æ˜“çœ‹å‡ºæ•°ä¸­æ‰€å­˜å‚¨çš„é”®å€¼å¯¹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;6c0a5c71ec20bq3w =&amp;gt; 5&lt;/li&gt;
&lt;li&gt;6c0a5c71ec20CX7j =&amp;gt; 27&lt;/li&gt;
&lt;li&gt;6c0a5c71781a1FXq =&amp;gt; 18&lt;/li&gt;
&lt;li&gt;6c0a5c71781a9Dog =&amp;gt; 64&lt;/li&gt;
&lt;li&gt;6c0a8f743b95zUfe =&amp;gt; 30&lt;/li&gt;
&lt;li&gt;6c0a8f743b95jx5R =&amp;gt; 2&lt;/li&gt;
&lt;li&gt;6c0a8f740d16y03G =&amp;gt; 43&lt;/li&gt;
&lt;li&gt;6c0a8f740d16vcc1 =&amp;gt; 48&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;é»˜å…‹å°”æ ‘merkle-tree&quot;&gt;é»˜å…‹å°”æ ‘Merkle Tree&lt;/h2&gt;
&lt;p&gt;Merkleæ ‘çœ‹èµ·æ¥éå¸¸åƒäºŒå‰æ ‘ï¼Œå…¶å¶å­èŠ‚ç‚¹ä¸Šçš„å€¼é€šå¸¸ä¸ºæ•°æ®å—çš„å“ˆå¸Œå€¼ï¼Œè€Œéå¶å­èŠ‚ç‚¹ä¸Šçš„å€¼ï¼Œæ‰€ä»¥æœ‰æ—¶å€™Merkle treeä¹Ÿè¡¨ç¤ºä¸ºHash treeï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0081Kckwgy1gm69qu5vh8j31ba0ragpn.jpg&quot; alt=&quot;image-20201230225028932&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;åœ¨æ„é€ &lt;code&gt;Merkle&lt;/code&gt;æ ‘æ—¶ï¼Œé¦–å…ˆè¦è®¡ç®—æ•°æ®å—çš„å“ˆå¸Œå€¼ï¼Œé€šå¸¸ï¼Œé€‰ç”¨&lt;code&gt;SHA-256&lt;/code&gt;ç­‰å“ˆå¸Œç®—æ³•ã€‚ä½†å¦‚æœä»…ä»…é˜²æ­¢æ•°æ®ä¸æ˜¯è“„æ„çš„æŸåæˆ–ç¯¡æ”¹ï¼Œå¯ä»¥æ”¹ç”¨ä¸€äº›å®‰å…¨æ€§ä½ä½†æ•ˆç‡é«˜çš„æ ¡éªŒå’Œç®—æ³•ï¼Œå¦‚&lt;code&gt;CRC&lt;/code&gt;ã€‚ç„¶åå°†æ•°æ®å—è®¡ç®—çš„å“ˆå¸Œå€¼ä¸¤ä¸¤é…å¯¹ï¼ˆå¦‚æœæ˜¯å¥‡æ•°ä¸ªæ•°ï¼Œæœ€åä¸€ä¸ªè‡ªå·±ä¸è‡ªå·±é…å¯¹ï¼‰ï¼Œè®¡ç®—ä¸Šä¸€å±‚å“ˆå¸Œï¼Œå†é‡å¤è¿™ä¸ªæ­¥éª¤ï¼Œä¸€ç›´åˆ°è®¡ç®—å‡ºæ ¹å“ˆå¸Œå€¼ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç®€å•æ€»ç»“å‡º&lt;strong&gt;merkle Tree&lt;/strong&gt; æœ‰ä»¥ä¸‹å‡ ä¸ªæ€§è´¨ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æ ¡éªŒæ•´ä½“æ•°æ®çš„æ­£ç¡®æ€§&lt;/li&gt;
&lt;li&gt;å¿«é€Ÿå®šä½é”™è¯¯&lt;/li&gt;
&lt;li&gt;å¿«é€Ÿæ ¡éªŒéƒ¨åˆ†æ•°æ®æ˜¯å¦åœ¨åŸå§‹çš„æ•°æ®ä¸­&lt;/li&gt;
&lt;li&gt;å­˜å‚¨ç©ºé—´å¼€é”€å¤§ï¼ˆ&lt;strong&gt;å¤§é‡ä¸­é—´å“ˆå¸Œ&lt;/strong&gt;ï¼‰&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;ä»¥å¤ªåŠçš„æ”¹è¿›æ–¹æ¡ˆ&quot;&gt;ä»¥å¤ªåŠçš„æ”¹è¿›æ–¹æ¡ˆ&lt;/h2&gt;
&lt;h3 id=&quot;ä½¿ç”¨byteä½œä¸ºkeyç±»å‹&quot;&gt;ä½¿ç”¨[]byteä½œä¸ºkeyç±»å‹&lt;/h3&gt;
&lt;p&gt;åœ¨ä»¥å¤ªåŠçš„Trieæ¨¡å—ä¸­ï¼Œkeyå’Œvalueéƒ½æ˜¯[]byteç±»å‹ã€‚å¦‚æœè¦ä½¿ç”¨å…¶å®ƒç±»å‹ï¼Œéœ€è¦å°†å…¶è½¬æ¢æˆ[]byteç±»å‹ï¼ˆæ¯”å¦‚ä½¿ç”¨&lt;strong&gt;rlp&lt;/strong&gt;è¿›è¡Œè½¬æ¢ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Nibble&lt;/strong&gt; ï¼šæ˜¯ key çš„åŸºæœ¬å•å…ƒï¼Œæ˜¯ä¸€ä¸ªå››å…ƒç»„ï¼ˆå››ä¸ª bit ä½çš„ç»„åˆä¾‹å¦‚äºŒè¿›åˆ¶è¡¨è¾¾çš„ 0010 å°±æ˜¯ä¸€ä¸ªå››å…ƒç»„ï¼‰&lt;/p&gt;
&lt;p&gt;åœ¨Trieæ¨¡å—å¯¹å¤–æä¾›çš„æ¥å£ä¸­ï¼Œkeyç±»å‹æ˜¯[]byteã€‚ä½†åœ¨å†…éƒ¨å®ç°é‡Œï¼Œå°†keyä¸­çš„æ¯ä¸ªå­—èŠ‚æŒ‰é«˜4ä½å’Œä½4ä½æ‹†åˆ†æˆäº†ä¸¤ä¸ªå­—èŠ‚ã€‚æ¯”å¦‚ä½ ä¼ å…¥çš„keyæ˜¯ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;[0x1a, 0x2b, 0x3c, 0x4d]&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Trieå†…éƒ¨å°†è¿™ä¸ªkeyæ‹†åˆ†æˆï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;12&quot;&gt;
&lt;p&gt;[0x1, 0xa, 0x2, 0xb, 0x3, 0xc, 0x4, 0xd]&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Trieå†…éƒ¨çš„ç¼–ç ä¸­å°†æ‹†åˆ†åçš„&lt;strong&gt;æ¯ä¸€ä¸ªå­—èŠ‚&lt;/strong&gt;ç§°ä¸º &lt;strong&gt;nibble&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä½¿ç”¨ä¸€ä¸ªå®Œæ•´çš„ byte ä½œä¸º key çš„æœ€å°å•ä½ï¼Œé‚£ä¹ˆå‰æ–‡æåˆ°çš„ç´¢å¼•æ•°ç»„çš„å¤§å°åº”è¯¥æ˜¯ 256ï¼ˆbyteä½œä¸ºæ•°ç»„çš„ç´¢å¼•ï¼Œæœ€å¤§å€¼ä¸º255ï¼Œæœ€å°å€¼ä¸º0ï¼‰ã€‚è€Œç´¢å¼•æ•°ç»„çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ª 32 å­—èŠ‚çš„å“ˆå¸Œ,è¿™æ ·æ¯ä¸ªç»“ç‚¹è¦å ç”¨å¤§é‡çš„ç©ºé—´ã€‚å¹¶ä¸”ç´¢å¼•æ•°ç»„ä¸­çš„å…ƒç´ å¤šæ•°æƒ…å†µä¸‹æ˜¯ç©ºçš„ï¼Œä¸æŒ‡å‘ä»»ä½•ç»“ç‚¹ã€‚å› æ­¤è¿™ç§å®ç°æ–¹æ³•å ç”¨å¤§é‡ç©ºé—´è€Œä¸ä½¿ç”¨ã€‚ä»¥å¤ªåŠçš„æ”¹è¿›æ–¹æ³•ï¼Œå¯ä»¥å°†ç´¢å¼•æ•°ç»„çš„å¤§å°é™ä¸º 16ï¼ˆ4ä¸ªbitçš„æœ€å¤§å€¼ä¸º0xFï¼Œæœ€å°å€¼ä¸º 0ï¼‰ï¼Œå› æ­¤å¤§å¤§å‡å°‘ç©ºé—´çš„æµªè´¹ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ–°å¢ç±»å‹èŠ‚ç‚¹&quot;&gt;æ–°å¢ç±»å‹èŠ‚ç‚¹&lt;/h3&gt;
&lt;p&gt;å‰ç¼€æ ‘å’Œmerkleæ ‘å­˜åœ¨æ˜æ˜¾çš„å±€é™æ€§ï¼Œæ‰€ä»¥ä»¥å¤ªåŠä¸ºMPTæ ‘æ–°å¢äº†å‡ ç§ä¸åŒç±»å‹çš„æ ‘èŠ‚ç‚¹ï¼Œé€šè¿‡é’ˆå¯¹ä¸åŒèŠ‚ç‚¹ä¸åŒæ“ä½œæ¥è§£å†³æ•ˆç‡ä»¥åŠå­˜å‚¨ä¸Šçš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;&lt;strong&gt;ç©ºç™½èŠ‚ç‚¹&lt;/strong&gt; ï¼šç®€å•çš„è¡¨ç¤ºç©ºï¼Œåœ¨ä»£ç ä¸­æ˜¯ä¸€ä¸ªç©ºä¸²&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†æ”¯èŠ‚ç‚¹&lt;/strong&gt; ï¼šåˆ†æ”¯èŠ‚ç‚¹æœ‰ 17 ä¸ªå…ƒç´ ï¼Œå›åˆ° Nibbleï¼Œå››å…ƒç»„æ˜¯ key çš„åŸºæœ¬å•å…ƒï¼Œ&lt;strong&gt;å››å…ƒç»„æœ€å¤šæœ‰ 16 ä¸ªå€¼&lt;/strong&gt;ã€‚æ‰€ä»¥å‰ 16 ä¸ªå¿…å°†è½å…¥åˆ°åœ¨å…¶éå†ä¸­çš„é”®çš„åå…­ä¸ªå¯èƒ½çš„åŠå­—èŠ‚å€¼ä¸­çš„æ¯ä¸€ä¸ªã€‚ç¬¬ 17 ä¸ªæ˜¯å­˜å‚¨é‚£äº›åœ¨å½“å‰ç»“ç‚¹&lt;strong&gt;ç»“æŸäº†&lt;/strong&gt;çš„èŠ‚ç‚¹(ä¾‹å¦‚ï¼Œ æœ‰ä¸‰ä¸ª key,åˆ†åˆ«æ˜¯ (abc ,abd, ab) ç¬¬ 17 ä¸ªå­—æ®µå‚¨å­˜äº† ab èŠ‚ç‚¹çš„å€¼)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¶å­èŠ‚ç‚¹&lt;/strong&gt;ï¼šåªæœ‰ä¸¤ä¸ªå…ƒç´ ï¼Œåˆ†åˆ«ä¸º key å’Œ value&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰©å±•èŠ‚ç‚¹&lt;/strong&gt; ï¼šæœ‰ä¸¤ä¸ªå…ƒç´ ï¼Œä¸€ä¸ªæ˜¯ key å€¼ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯ hash å€¼ï¼Œè¿™ä¸ª hash å€¼æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;æ­¤å¤–ï¼Œä¸ºäº†å°† MPT æ ‘å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ï¼ŒåŒæ—¶è¿˜å¯ä»¥æŠŠ MPT æ ‘ä»æ•°æ®åº“ä¸­æ¢å¤å‡ºæ¥ï¼Œ&lt;strong&gt;å¯¹äº Extension å’Œ Leaf çš„èŠ‚ç‚¹ç±»å‹åšäº†ç‰¹æ®Šçš„å®šä¹‰&lt;/strong&gt;ï¼šå¦‚æœæ˜¯ä¸€ä¸ªæ‰©å±•èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå‰ç¼€ä¸º 0ï¼Œè¿™ä¸ª 0 åŠ åœ¨ key å‰é¢ã€‚å¦‚æœæ˜¯ä¸€ä¸ªå¶å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå‰ç¼€å°±æ˜¯ 1ã€‚åŒæ—¶å¯¹&lt;strong&gt;key çš„é•¿åº¦å°±å¥‡å¶ç±»å‹ä¹Ÿåšäº†è®¾å®š&lt;/strong&gt;ï¼Œå¦‚æœæ˜¯å¥‡æ•°é•¿åº¦åˆ™æ ‡ç¤º 1ï¼Œå¦‚æœæ˜¯å¶æ•°é•¿åº¦åˆ™æ ‡ç¤º 0ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ä»¥å¤ªåŠä¸­ä½¿ç”¨åˆ°çš„mptæ ‘ç»“æ„&quot;&gt;ä»¥å¤ªåŠä¸­ä½¿ç”¨åˆ°çš„MPTæ ‘ç»“æ„&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;State Trie&lt;/code&gt; åŒºå—å¤´ä¸­çš„çŠ¶æ€æ ‘
&lt;ul&gt;&lt;li&gt;key =&amp;gt; sha3(ä»¥å¤ªåŠè´¦æˆ·åœ°å€ address)&lt;/li&gt;
&lt;li&gt;value =&amp;gt; rlp(è´¦å·å†…å®¹ä¿¡æ¯ account)&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Transactions Trie åŒºå—å¤´ä¸­çš„äº¤æ˜“æ ‘
&lt;ul&gt;&lt;li&gt;key =&amp;gt; rlp(äº¤æ˜“çš„åç§»é‡ transaction index)&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªå—éƒ½æœ‰å„è‡ªçš„äº¤æ˜“æ ‘ï¼Œä¸”ä¸å¯æ›´æ”¹&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Receipts Trie&lt;/code&gt; åŒºå—å¤´ä¸­çš„æ”¶æ®æ ‘
&lt;ul&gt;&lt;li&gt;key = rlp(äº¤æ˜“çš„åç§»é‡ transaction index)&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªå—éƒ½æœ‰å„è‡ªçš„äº¤æ˜“æ ‘ï¼Œä¸”ä¸å¯æ›´æ”¹&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Storage Trie&lt;/code&gt; å­˜å‚¨æ ‘
&lt;ul&gt;&lt;li&gt;å­˜å‚¨åªèƒ½åˆçº¦çŠ¶æ€&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªè´¦å·æœ‰è‡ªå·±çš„ Storage Trie&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0081Kckwgy1gm70f77s2dj319g0lymyz.jpg&quot; alt=&quot;image-20201231141329137&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸¤ä¸ªåŒºå—å¤´ä¸­ï¼Œ&lt;code&gt;state root&lt;/code&gt;ã€&lt;code&gt;tx root&lt;/code&gt;ã€ &lt;code&gt;receipt root&lt;/code&gt;åˆ†åˆ«å­˜å‚¨äº†è¿™ä¸‰æ£µæ ‘çš„æ ‘æ ¹ï¼Œç¬¬äºŒä¸ªåŒºå—æ˜¾ç¤ºäº†å½“è´¦å· 17 5çš„æ•°æ®å˜æ›´(&lt;strong&gt;27 -&amp;gt; 45&lt;/strong&gt;)çš„æ—¶å€™ï¼Œåªéœ€è¦å­˜å‚¨è·Ÿè¿™ä¸ªè´¦å·ç›¸å…³çš„éƒ¨åˆ†æ•°æ®ï¼Œè€Œä¸”è€çš„åŒºå—ä¸­çš„æ•°æ®è¿˜æ˜¯å¯ä»¥æ­£å¸¸è®¿é—®ã€‚&lt;/p&gt;
&lt;h3 id=&quot;keyç¼–ç è§„åˆ™&quot;&gt;keyç¼–ç è§„åˆ™&lt;/h3&gt;
&lt;p&gt;ä¸‰ç§ç¼–ç æ–¹å¼åˆ†åˆ«ä¸ºï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;&lt;strong&gt;Raw&lt;/strong&gt;ç¼–ç ï¼ˆåŸç”Ÿçš„å­—ç¬¦ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Hex&lt;/strong&gt;ç¼–ç ï¼ˆæ‰©å±•çš„16è¿›åˆ¶ç¼–ç ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Hex-Prefix&lt;/strong&gt;ç¼–ç ï¼ˆ16è¿›åˆ¶å‰ç¼€ç¼–ç ï¼‰ï¼›&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;strong&gt;Rawç¼–ç &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Raw&lt;/strong&gt;ç¼–ç å°±æ˜¯åŸç”Ÿçš„&lt;strong&gt;key&lt;/strong&gt;å€¼ï¼Œä¸åšä»»ä½•æ”¹å˜ã€‚è¿™ç§ç¼–ç æ–¹å¼çš„&lt;strong&gt;key&lt;/strong&gt;ï¼Œ&lt;em&gt;æ˜¯&lt;strong&gt;MPT&lt;/strong&gt;å¯¹å¤–æä¾›æ¥å£çš„é»˜è®¤ç¼–ç æ–¹å¼&lt;/em&gt;ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;10&quot;&gt;
&lt;p&gt;ä¾‹å¦‚ä¸€æ¡keyä¸ºâ€œcatâ€ï¼Œvalueä¸ºâ€œdogâ€çš„æ•°æ®é¡¹ï¼Œå…¶Rawç¼–ç å°±æ˜¯['c', 'a', 't']ï¼Œæ¢æˆASCIIè¡¨ç¤ºæ–¹å¼å°±æ˜¯[63, 61, 74]&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;Hexç¼–ç &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Hexç¼–ç ç”¨äºå¯¹å†…å­˜ä¸­MPTæ ‘èŠ‚ç‚¹keyè¿›è¡Œç¼–ç &lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å‡å°‘åˆ†æ”¯èŠ‚ç‚¹å­©å­çš„ä¸ªæ•°ï¼Œå°†æ•°æ® key è¿›è¡ŒåŠå­—èŠ‚æ‹†è§£è€Œæˆã€‚å³ä¾æ¬¡å°† key[0],key[1],â€¦,key[n] åˆ†åˆ«è¿›è¡ŒåŠå­—èŠ‚æ‹†åˆ†æˆä¸¤ä¸ªæ•°ï¼Œå†ä¾æ¬¡å­˜æ”¾åœ¨é•¿åº¦ä¸º len(key)+1 çš„æ•°ç»„ä¸­ã€‚ å¹¶åœ¨æ•°ç»„æœ«å°¾å†™å…¥ç»ˆæ­¢ç¬¦ &lt;code&gt;16&lt;/code&gt;ã€‚ç®—æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;åŠå­—èŠ‚ï¼Œåœ¨è®¡ç®—æœºä¸­ï¼Œé€šå¸¸å°†8ä½äºŒè¿›åˆ¶æ•°ç§°ä¸ºå­—èŠ‚ï¼Œè€ŒæŠŠ4ä½äºŒè¿›åˆ¶æ•°ç§°ä¸ºåŠå­—èŠ‚ã€‚ é«˜å››ä½å’Œä½å››ä½ï¼Œè¿™é‡Œçš„â€œä½â€æ˜¯é’ˆå¯¹äºŒè¿›åˆ¶æ¥è¯´çš„ã€‚æ¯”å¦‚æ•°å­— 250 çš„äºŒè¿›åˆ¶æ•°ä¸º 11111010ï¼Œåˆ™é«˜å››ä½æ˜¯å·¦è¾¹çš„ 1111ï¼Œä½å››ä½æ˜¯å³è¾¹çš„ 1010ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä»&lt;strong&gt;Raw&lt;/strong&gt;ç¼–ç å‘&lt;strong&gt;Hex&lt;/strong&gt;ç¼–ç çš„è½¬æ¢è§„åˆ™æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;Raw&lt;/strong&gt;ç¼–ç è¾“å…¥çš„æ¯ä¸ªå­—ç¬¦åˆ†è§£ä¸ºé«˜ 4 ä½å’Œä½ 4 ä½&lt;/li&gt;
&lt;li&gt;å¦‚æœæ˜¯å¶å­èŠ‚ç‚¹ï¼Œåˆ™åœ¨æœ€ååŠ ä¸Š&lt;strong&gt;Hex&lt;/strong&gt;å€¼&lt;code&gt;0x10&lt;/code&gt;è¡¨ç¤ºç»“æŸ&lt;/li&gt;
&lt;li&gt;å¦‚æœæ˜¯åˆ†æ”¯èŠ‚ç‚¹ä¸é™„åŠ ä»»ä½•&lt;strong&gt;Hex&lt;/strong&gt;å€¼&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä¾‹å¦‚ï¼šå­—ç¬¦ä¸² â€œromaneâ€ çš„ bytes æ˜¯ &lt;code&gt;[114 111 109 97 110 101]&lt;/code&gt;ï¼Œåœ¨ HEX ç¼–ç æ—¶å°†å…¶ä¾æ¬¡å¤„ç†ï¼š&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;i&lt;/th&gt;
&lt;th&gt;key[i]&lt;/th&gt;
&lt;th&gt;key[i]äºŒè¿›åˆ¶&lt;/th&gt;
&lt;th&gt;nibbles[i*2]=é«˜å››ä½&lt;/th&gt;
&lt;th&gt;nibbles[i*2+1]=ä½å››ä½&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;114&lt;/td&gt;
&lt;td&gt;01110010&lt;/td&gt;
&lt;td&gt;0111= 7&lt;/td&gt;
&lt;td&gt;0010= 2&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;111&lt;/td&gt;
&lt;td&gt;01101111&lt;/td&gt;
&lt;td&gt;0110=6&lt;/td&gt;
&lt;td&gt;1111=15&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;109&lt;/td&gt;
&lt;td&gt;01101101&lt;/td&gt;
&lt;td&gt;0110=6&lt;/td&gt;
&lt;td&gt;1101=13&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;97&lt;/td&gt;
&lt;td&gt;01100001&lt;/td&gt;
&lt;td&gt;0110=6&lt;/td&gt;
&lt;td&gt;0001=1&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;110&lt;/td&gt;
&lt;td&gt;01101110&lt;/td&gt;
&lt;td&gt;0110=6&lt;/td&gt;
&lt;td&gt;1110=14&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;101&lt;/td&gt;
&lt;td&gt;01100101&lt;/td&gt;
&lt;td&gt;0110=6&lt;/td&gt;
&lt;td&gt;0101=5&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;æœ€ç»ˆå¾—åˆ° Hex(â€œromaneâ€) = &lt;code&gt;[7 2 6 15 6 13 6 1 6 14 6 5 16]&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-GO&quot;&gt;// æºç å®ç°
func keybytesToHex(str []byte) []byte {
        l := len(str)*2 + 1
        var nibbles = make([]byte, l)
        for i, b := range str {
                nibbles[i*2] = b / 16   // é«˜å››ä½
                nibbles[i*2+1] = b % 16 // ä½å››ä½
        }
        nibbles[l-1] = 16 // æœ€åä¸€ä½å­˜å…¥æ ‡ç¤ºç¬¦ ä»£è¡¨æ˜¯hexç¼–ç 
        return nibbles
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Hex-Prefix&lt;/strong&gt;ç¼–ç &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ•°å­¦å…¬å¼å®šä¹‰ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0081Kckwgy1gm75cvok4yj318s07iwfg.jpg&quot; alt=&quot;image-20201231170415071&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Hex-Prefix ç¼–ç æ˜¯ä¸€ç§ä»»æ„é‡çš„åŠå­—èŠ‚è½¬æ¢ä¸ºæ•°ç»„çš„æœ‰æ•ˆæ–¹å¼ï¼Œè¿˜å¯ä»¥åœ¨å­˜å…¥ä¸€ä¸ªæ ‡è¯†ç¬¦æ¥åŒºåˆ†ä¸åŒèŠ‚ç‚¹ç±»å‹ã€‚ å› æ­¤ HP ç¼–ç æ˜¯åœ¨ç”±ä¸€ä¸ªæ ‡è¯†ç¬¦å‰ç¼€å’ŒåŠå­—èŠ‚è½¬æ¢ä¸ºæ•°ç»„çš„ä¸¤éƒ¨åˆ†ç»„æˆã€‚å­˜å…¥åˆ°æ•°æ®åº“ä¸­å­˜åœ¨èŠ‚ç‚¹ Key çš„åªæœ‰æ‰©å±•èŠ‚ç‚¹å’Œå¶å­èŠ‚ç‚¹ï¼Œå› æ­¤ HP åªç”¨äºåŒºåˆ†æ‰©å±•èŠ‚ç‚¹å’Œå¶å­èŠ‚ç‚¹ï¼Œä¸æ¶‰åŠæ— èŠ‚ç‚¹ key çš„åˆ†æ”¯èŠ‚ç‚¹ã€‚å…¶ç¼–ç è§„åˆ™å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0081Kckwgy1gm74pxxc7yj31ju0cm41o.jpg&quot; alt=&quot;image-20201231164209626&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å‰ç¼€æ ‡è¯†ç¬¦ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šèŠ‚ç‚¹ç±»å‹å’Œå¥‡å¶æ ‡è¯†ï¼Œå¹¶å­˜å‚¨åœ¨ç¼–ç åå­—èŠ‚çš„ç¬¬ä¸€ä¸ªåŠå­—èŠ‚ä¸­ã€‚ 0 è¡¨ç¤ºæ‰©å±•èŠ‚ç‚¹ç±»å‹ï¼Œ1 è¡¨ç¤ºå¶å­èŠ‚ç‚¹ï¼Œå¶ä¸º 0ï¼Œå¥‡ä¸º 1ã€‚æœ€ç»ˆå¯ä»¥å¾—åˆ°å”¯ä¸€æ ‡è¯†çš„å‰ç¼€æ ‡è¯†ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;0ï¼šå¶é•¿åº¦çš„æ‰©å±•èŠ‚ç‚¹&lt;/li&gt;
&lt;li&gt;1ï¼šå¥‡é•¿åº¦çš„æ‰©å±•èŠ‚ç‚¹&lt;/li&gt;
&lt;li&gt;2ï¼šå¶é•¿åº¦çš„å¶å­èŠ‚ç‚¹&lt;/li&gt;
&lt;li&gt;3ï¼šå¥‡é•¿åº¦çš„å¶å­èŠ‚ç‚¹&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å½“å¶é•¿åº¦æ—¶ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„ä½å››ä½ç”¨&lt;code&gt;0&lt;/code&gt;å¡«å……ï¼Œå½“æ˜¯å¥‡é•¿åº¦æ—¶ï¼Œåˆ™å°† key[0] å­˜æ”¾åœ¨ç¬¬ä¸€ä¸ªå­—èŠ‚çš„ä½å››ä½ä¸­ï¼Œè¿™æ · HP ç¼–ç ç»“æœå§‹ç»ˆæ˜¯å¶é•¿åº¦ã€‚ è¿™é‡Œä¸ºä»€ä¹ˆè¦åŒºåˆ†èŠ‚ç‚¹ key é•¿åº¦çš„å¥‡å¶å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºï¼ŒåŠå­—èŠ‚ &lt;code&gt;1&lt;/code&gt; å’Œ &lt;code&gt;01&lt;/code&gt; åœ¨è½¬æ¢ä¸º bytes æ ¼å¼æ—¶éƒ½æˆä¸º&lt;code&gt;&amp;lt;01&amp;gt;&lt;/code&gt;ï¼Œæ— æ³•åŒºåˆ†ä¸¤è€…ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œä¸Šå›¾ â€œä»¥å¤ªåŠ MPT æ ‘çš„å“ˆå¸Œè®¡ç®—â€ä¸­çš„æ§åˆ¶èŠ‚ç‚¹1çš„key ä¸º &lt;code&gt;[ 7 2 6 f 6 d]&lt;/code&gt;ï¼Œå› ä¸ºæ˜¯å¶é•¿åº¦ï¼Œåˆ™ HP[0]= (00000000) =0ï¼ŒH[1:]= è§£ç åŠå­—èŠ‚(key)ã€‚ è€ŒèŠ‚ç‚¹ 3 çš„ key ä¸º &lt;code&gt;[1 6 e 6 5]&lt;/code&gt;ï¼Œä¸ºå¥‡é•¿åº¦ï¼Œåˆ™ HP[0]= (0001 0001)=17ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;HP&lt;/strong&gt;ç¼–ç çš„è§„åˆ™å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;keyç»“å°¾ä¸º&lt;strong&gt;0x10&lt;/strong&gt;ï¼Œåˆ™å»æ‰è¿™ä¸ªç»ˆæ­¢ç¬¦&lt;/li&gt;
&lt;li&gt;keyä¹‹å‰è¡¥ä¸€ä¸ªå››å…ƒç»„è¿™ä¸ªByteç¬¬0ä½åŒºåˆ†å¥‡å¶ä¿¡æ¯ï¼Œç¬¬ 1 ä½åŒºåˆ†èŠ‚ç‚¹ç±»å‹&lt;/li&gt;
&lt;li&gt;å¦‚æœè¾“å…¥&lt;strong&gt;key&lt;/strong&gt;çš„é•¿åº¦æ˜¯å¶æ•°ï¼Œåˆ™å†æ·»åŠ ä¸€ä¸ªå››å…ƒç»„0x0åœ¨flagå››å…ƒç»„å&lt;/li&gt;
&lt;li&gt;å°†åŸæ¥çš„keyå†…å®¹å‹ç¼©ï¼Œå°†åˆ†ç¦»çš„ä¸¤ä¸ªbyteä»¥é«˜å››ä½ä½å››ä½è¿›è¡Œåˆå¹¶&lt;/li&gt;
&lt;/ul&gt;&lt;blockquote readability=&quot;14&quot;&gt;
&lt;p&gt;åå…­è¿›åˆ¶å‰ç¼€ç¼–ç ç›¸å½“äºä¸€ä¸ªé€†å‘çš„è¿‡ç¨‹ï¼Œæ¯”å¦‚è¾“å…¥çš„æ˜¯[6 2 6 15 6 2 16]ï¼Œ&lt;/p&gt;
&lt;p&gt;æ ¹æ®ç¬¬ä¸€ä¸ªè§„åˆ™å»æ‰ç»ˆæ­¢ç¬¦16ã€‚æ ¹æ®ç¬¬äºŒä¸ªè§„åˆ™keyå‰è¡¥ä¸€ä¸ªå››å…ƒç»„ï¼Œä»å³å¾€å·¦ç¬¬ä¸€ä½ä¸º1è¡¨ç¤ºå¶å­èŠ‚ç‚¹ï¼Œ&lt;/p&gt;
&lt;p&gt;ä»å³å¾€å·¦ç¬¬0ä½å¦‚æœåé¢keyçš„é•¿åº¦ä¸ºå¶æ•°è®¾ç½®ä¸º0ï¼Œå¥‡æ•°é•¿åº¦è®¾ç½®ä¸º1ï¼Œé‚£ä¹ˆå››å…ƒç»„0010å°±æ˜¯2ã€‚&lt;/p&gt;
&lt;p&gt;æ ¹æ®ç¬¬ä¸‰ä¸ªè§„åˆ™ï¼Œæ·»åŠ ä¸€ä¸ªå…¨0çš„è¡¥åœ¨åé¢ï¼Œé‚£ä¹ˆå°±æ˜¯20.æ ¹æ®ç¬¬ä¸‰ä¸ªè§„åˆ™å†…å®¹å‹ç¼©åˆå¹¶ï¼Œé‚£ä¹ˆç»“æœå°±æ˜¯[0x20 0x62 0x6f 0x62]&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;HP ç¼–ç æºç å®ç°:&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-go&quot;&gt;func hexToCompact(hex []byte) []byte {
        terminator := byte(0) //åˆå§‹åŒ–ä¸€ä¸ªå€¼ä¸º0çš„byteï¼Œå®ƒå°±æ˜¯æˆ‘ä»¬ä¸Šé¢å…¬å¼ä¸­æåˆ°çš„t
        if hasTerm(hex) {     //éªŒè¯hexæœ‰åç¼€ç¼–ç ï¼Œ
                terminator = 1         //hexç¼–ç æœ‰åç¼€ï¼Œåˆ™t=1
                hex = hex[:len(hex)-1] //æ­¤å¤„åªæ˜¯å»æ‰åç¼€éƒ¨åˆ†çš„hexç¼–ç 
        }
        ////Compactå¼€è¾Ÿçš„ç©ºé—´é•¿åº¦ä¸ºhexç¼–ç çš„ä¸€åŠå†åŠ 1ï¼Œè¿™ä¸ª1å¯¹åº”çš„ç©ºé—´æ˜¯Compactçš„å‰ç¼€
        buf := make([]byte, len(hex)/2+1)
        ////è¿™ä¸€é˜¶æ®µçš„buf[0]å¯ä»¥ç†è§£ä¸ºå…¬å¼ä¸­çš„16*f(t)
        buf[0] = terminator &amp;lt;&amp;lt; 5 // the flag byte
        if len(hex)&amp;amp;1 == 1 {     //hex é•¿åº¦ä¸ºå¥‡æ•°ï¼Œåˆ™é€»è¾‘ä¸Šè¯´æ˜hexæœ‰å‰ç¼€
                buf[0] |= 1 &amp;lt;&amp;lt; 4 ////è¿™ä¸€é˜¶æ®µçš„buf[0]å¯ä»¥ç†è§£ä¸ºå…¬å¼ä¸­çš„16*ï¼ˆf(t)+1ï¼‰
                buf[0] |= hex[0] // first nibble is contained in the first byte
                hex = hex[1:]    //æ­¤æ—¶è·å–çš„hexç¼–ç æ— å‰ç¼€æ— åç¼€
        }
        decodeNibbles(hex, buf[1:]) //å°†hexç¼–ç æ˜ å°„åˆ°compactç¼–ç ä¸­
        return buf                  //è¿”å›compactç¼–ç 
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä»¥ä¸Šä¸‰ç§ç¼–ç æ–¹å¼çš„è½¬æ¢å…³ç³»ä¸ºï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Rawç¼–ç ï¼šåŸç”Ÿçš„keyç¼–ç ï¼Œæ˜¯MPTå¯¹å¤–æä¾›æ¥å£ä¸­ä½¿ç”¨çš„ç¼–ç æ–¹å¼ï¼Œå½“æ•°æ®é¡¹è¢«æ’å…¥åˆ°æ ‘ä¸­æ—¶ï¼ŒRawç¼–ç è¢«è½¬æ¢æˆHexç¼–ç ï¼›&lt;/li&gt;
&lt;li&gt;Hexç¼–ç ï¼š16è¿›åˆ¶æ‰©å±•ç¼–ç ï¼Œç”¨äºå¯¹å†…å­˜ä¸­æ ‘èŠ‚ç‚¹keyè¿›è¡Œç¼–ç ï¼Œå½“æ ‘èŠ‚ç‚¹è¢«æŒä¹…åŒ–åˆ°æ•°æ®åº“æ—¶ï¼ŒHexç¼–ç è¢«è½¬æ¢æˆHPç¼–ç ï¼›&lt;/li&gt;
&lt;li&gt;HPç¼–ç ï¼š16è¿›åˆ¶å‰ç¼€ç¼–ç ï¼Œç”¨äºå¯¹æ•°æ®åº“ä¸­æ ‘èŠ‚ç‚¹keyè¿›è¡Œç¼–ç ï¼Œå½“æ ‘èŠ‚ç‚¹è¢«åŠ è½½åˆ°å†…å­˜æ—¶ï¼ŒHPç¼–ç è¢«è½¬æ¢æˆHexç¼–ç ï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0081Kckwgy1gm71rsyyekj319w05ygml.jpg&quot; alt=&quot;image-20201231150011417&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä»¥ä¸Šä»‹ç»çš„MPTæ ‘ï¼Œå¯ä»¥ç”¨æ¥å­˜å‚¨å†…å®¹ä¸ºä»»ä½•é•¿åº¦çš„&lt;code&gt;key-value&lt;/code&gt;æ•°æ®é¡¹ã€‚å€˜è‹¥æ•°æ®é¡¹çš„&lt;code&gt;key&lt;/code&gt;é•¿åº¦æ²¡æœ‰é™åˆ¶æ—¶ï¼Œå½“æ ‘ä¸­ç»´æŠ¤çš„æ•°æ®é‡è¾ƒå¤§æ—¶ï¼Œä»ç„¶ä¼šé€ æˆæ•´æ£µæ ‘çš„æ·±åº¦å˜å¾—è¶Šæ¥è¶Šæ·±ï¼Œä¼šé€ æˆä»¥ä¸‹å½±å“ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æŸ¥è¯¢ä¸€ä¸ªèŠ‚ç‚¹å¯èƒ½ä¼šéœ€è¦è®¸å¤šæ¬¡ IO è¯»å–ï¼Œæ•ˆç‡ä½ä¸‹ï¼›&lt;/li&gt;
&lt;li&gt;ç³»ç»Ÿæ˜“é­å— Dos æ”»å‡»ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡åœ¨åˆçº¦ä¸­å­˜å‚¨ç‰¹å®šçš„æ•°æ®ï¼Œâ€œæ„é€ â€ä¸€æ£µæ‹¥æœ‰ä¸€æ¡å¾ˆé•¿è·¯å¾„çš„æ ‘ï¼Œç„¶åä¸æ–­åœ°è°ƒç”¨&lt;code&gt;SLOAD&lt;/code&gt;æŒ‡ä»¤è¯»å–è¯¥æ ‘èŠ‚ç‚¹çš„å†…å®¹ï¼Œé€ æˆç³»ç»Ÿæ‰§è¡Œæ•ˆç‡æåº¦ä¸‹é™ï¼›&lt;/li&gt;
&lt;li&gt;æ‰€æœ‰çš„ key å…¶å®æ˜¯ä¸€ç§æ˜æ–‡çš„å½¢å¼è¿›è¡Œå­˜å‚¨ï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä¸ºäº†è§£å†³ä»¥ä¸Šé—®é¢˜ï¼Œä»¥å¤ªåŠå¯¹&lt;strong&gt;MPT&lt;/strong&gt;å†è¿›è¡Œäº†ä¸€æ¬¡å°è£…ï¼Œå¯¹æ•°æ®é¡¹çš„&lt;strong&gt;key&lt;/strong&gt;è¿›è¡Œäº†ä¸€æ¬¡å“ˆå¸Œè®¡ç®—ï¼Œå› æ­¤æœ€ç»ˆä½œä¸ºå‚æ•°ä¼ å…¥åˆ°MPTæ¥å£çš„æ•°æ®é¡¹å…¶å®æ˜¯&lt;code&gt;(sha3(key), value)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¼˜åŠ¿&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä¼ å…¥MPTæ¥å£çš„ key æ˜¯å›ºå®šé•¿åº¦çš„ï¼ˆ32å­—èŠ‚ï¼‰ï¼Œå¯ä»¥é¿å…å‡ºç°æ ‘ä¸­å‡ºç°é•¿åº¦å¾ˆé•¿çš„è·¯å¾„ï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;åŠ£åŠ¿&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æ¯æ¬¡æ ‘æ“ä½œéœ€è¦å¢åŠ ä¸€æ¬¡å“ˆå¸Œè®¡ç®—ï¼›&lt;/li&gt;
&lt;li&gt;éœ€è¦åœ¨æ•°æ®åº“ä¸­å­˜å‚¨é¢å¤–çš„&lt;code&gt;sha3(key)&lt;/code&gt;ä¸&lt;code&gt;key&lt;/code&gt;ä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å®Œæ•´çš„ç¼–ç æµç¨‹å¦‚å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0081Kckwgy1gm71x5i5djj31by07275g.jpg&quot; alt=&quot;image-20201231150520220&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;mptè½»èŠ‚ç‚¹&quot;&gt;MPTè½»èŠ‚ç‚¹&lt;/h2&gt;
&lt;p&gt;ä¸Šé¢çš„MPTæ ‘ï¼Œæœ‰ä¸¤ä¸ªé—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æ¯ä¸ªèŠ‚ç‚¹éƒ½åŒ…å«æœ‰å¤§é‡ä¿¡æ¯ï¼Œå¹¶ä¸”å¶å­èŠ‚ç‚¹ä¸­è¿˜åŒ…å«æœ‰å®Œæ•´çš„æ•°æ®ä¿¡æ¯ã€‚å¦‚æœè¯¥MPTæ ‘å¹¶æ²¡æœ‰å‘ç”Ÿä»»ä½•å˜åŒ–ï¼Œå¹¶ä¸”æ²¡æœ‰è¢«ä½¿ç”¨ï¼Œåˆ™ä¼šç™½ç™½å ç”¨ä¸€å¤§ç‰‡ç©ºé—´ï¼Œæƒ³è±¡ä¸€ä¸ªä»¥å¤ªåŠï¼Œæœ‰å¤šå°‘ä¸ªMPTæ ‘ï¼Œéƒ½åœ¨å†…å­˜ä¸­ï¼Œé‚£è¿˜äº†å¾—ã€‚&lt;/li&gt;
&lt;li&gt;å¹¶ä¸æ˜¯ä»»ä½•çš„å®¢æˆ·ç«¯éƒ½å¯¹æ‰€æœ‰çš„MPTæ ‘éƒ½æ„Ÿå…´è¶£ï¼Œè‹¥æ¯æ¬¡éƒ½æŠŠå®Œæ•´çš„èŠ‚ç‚¹ä¿¡æ¯éƒ½ä¸‹è½½ä¸‹ï¼Œä¸‹è½½æ—¶é—´é•¿ä¸è¯´ï¼Œå¹¶ä¸”ä¼šå ç”¨å¤§é‡çš„ç£ç›˜ç©ºé—´ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;è§£å†³æ–¹å¼&quot;&gt;è§£å†³æ–¹å¼&lt;/h3&gt;
&lt;p&gt;ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œä»¥å¤ªåŠä½¿ç”¨äº†ä¸€ç§ç¼“å­˜æœºåˆ¶ï¼Œå¯ä»¥ç§°ä¸ºæ˜¯è½»èŠ‚ç‚¹æœºåˆ¶ï¼Œå¤§ä½“å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;è‹¥æŸèŠ‚ç‚¹æ•°æ®ä¸€ç›´æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œåˆ™ä»…ä»…ä¿ç•™è¯¥èŠ‚ç‚¹çš„32ä½hashå€¼ï¼Œå‰©ä¸‹çš„å†…å®¹å…¨éƒ¨é‡Šæ”¾&lt;/li&gt;
&lt;li&gt;è‹¥éœ€è¦æ’å…¥æˆ–è€…åˆ é™¤æŸèŠ‚ç‚¹ï¼Œå…ˆé€šè¿‡è¯¥hashå€¼dbä¸­æŸ¥æ‰¾å¯¹åº”çš„èŠ‚ç‚¹ï¼Œå¹¶åŠ è½½åˆ°å†…å­˜ï¼Œä¹‹åå†è¿›è¡Œåˆ é™¤æ’å…¥æ“ä½œ&lt;/li&gt;
&lt;/ul&gt;&lt;h4 id=&quot;è½»èŠ‚ç‚¹ä¸­æ·»åŠ æ•°æ®&quot;&gt;è½»èŠ‚ç‚¹ä¸­æ·»åŠ æ•°æ®&lt;/h4&gt;
&lt;p&gt;å†…å­˜ä¸­åªæœ‰è¿™ä¹ˆä¸€ä¸ªè½»èŠ‚ç‚¹ï¼Œä½†æ˜¯æˆ‘è¦æ·»åŠ ä¸€ä¸ªæ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¦ç»™å®Œæ•´çš„MPTæ ‘ä¸­æ·»åŠ ä¸€ä¸ªå¶å­èŠ‚ç‚¹ï¼Œæ€ä¹ˆæ·»åŠ ï¼Ÿå¤§ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://tva1.sinaimg.cn/large/0081Kckwgy1gm8hgf9f3ij319a0pcgqh.jpg&quot; alt=&quot;image-20210101204824090&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;åˆ°æ­¤ä»¥å¤ªåŠçš„MPTæ ‘çš„åŸºç¡€è®²è§£ç»“æŸã€‚&lt;/p&gt;
&lt;h2 id=&quot;å‚è€ƒ&quot;&gt;å‚è€ƒ&lt;/h2&gt;
&lt;blockquote readability=&quot;1.5740740740741&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https://mindcarver.cn&quot; target=&quot;_blank&quot;&gt;https://mindcarver.cn&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/blockchainGuide&quot; target=&quot;_blank&quot;&gt;https://github.com/blockchainGuide&lt;/a&gt; æ–‡ç« åŠè§†é¢‘å­¦ä¹ èµ„æ–™&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://eth.wiki/en/fundamentals/patricia-tree&quot; target=&quot;_blank&quot;&gt;https://eth.wiki/en/fundamentals/patricia-tree&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://ethereum.github.io/yellowpaper/paper.pdf#appendix.D&quot; target=&quot;_blank&quot;&gt;https://ethereum.github.io/yellowpaper/paper.pdf#appendix.D&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://ethfans.org/toya/articles/588&quot; target=&quot;_blank&quot;&gt;https://ethfans.org/toya/articles/588&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://learnblockchain.cn/books/geth/part3/mpt.html&quot; target=&quot;_blank&quot;&gt;https://learnblockchain.cn/books/geth/part3/mpt.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.ethereum.org/2015/11/15/merkling-in-ethereum/&quot; target=&quot;_blank&quot;&gt;https://blog.ethereum.org/2015/11/15/merkling-in-ethereum/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://arxiv.org/pdf/1909.11590.pdf&quot; target=&quot;_blank&quot;&gt;https://arxiv.org/pdf/1909.11590.pdf&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
<pubDate>Mon, 04 Jan 2021 00:24:00 +0000</pubDate>
<dc:creator>mindcarver</dc:creator>
<og:description>æ­»ç£•ä»¥å¤ªåŠæºç åˆ†æä¹‹MPTæ ‘-ä¸Š</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/1314xf/p/14227781.html</dc:identifier>
</item>
<item>
<title>æ•°æ®ä»“åº“ç»„ä»¶ï¼šHiveç¯å¢ƒæ­å»ºå’ŒåŸºç¡€ç”¨æ³• - çŸ¥äº†ä¸€ç¬‘</title>
<link>http://www.cnblogs.com/cicada-smile/p/14227369.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/cicada-smile/p/14227369.html</guid>
<description>&lt;p&gt;Hiveæ˜¯åŸºäºHadoopçš„ä¸€ä¸ªæ•°æ®ä»“åº“å·¥å…·ï¼Œç”¨æ¥è¿›è¡Œæ•°æ®æå–ã€è½¬åŒ–ã€åŠ è½½ï¼Œæ˜¯ä¸€ä¸ªå¯ä»¥å¯¹Hadoopä¸­çš„å¤§è§„æ¨¡å­˜å‚¨çš„æ•°æ®è¿›è¡ŒæŸ¥è¯¢å’Œåˆ†æå­˜å‚¨çš„ç»„ä»¶ï¼ŒHiveæ•°æ®ä»“åº“å·¥å…·èƒ½å°†ç»“æ„åŒ–çš„æ•°æ®æ–‡ä»¶æ˜ å°„ä¸ºä¸€å¼ æ•°æ®åº“è¡¨ï¼Œå¹¶æä¾›SQLæŸ¥è¯¢åŠŸèƒ½ï¼Œèƒ½å°†SQLè¯­å¥è½¬å˜æˆMapReduceä»»åŠ¡æ¥æ‰§è¡Œï¼Œä½¿ç”¨æˆæœ¬ä½ï¼Œå¯ä»¥é€šè¿‡ç±»ä¼¼SQLè¯­å¥å®ç°å¿«é€ŸMapReduceç»Ÿè®¡ï¼Œä½¿MapReduceå˜å¾—æ›´åŠ ç®€å•ï¼Œè€Œä¸å¿…å¼€å‘ä¸“é—¨çš„MapReduceåº”ç”¨ç¨‹åºã€‚hiveååˆ†é€‚åˆå¯¹æ•°æ®ä»“åº“è¿›è¡Œç»Ÿè®¡åˆ†æã€‚&lt;/p&gt;&lt;div id=&quot;cnblogs_post_body&quot; readability=&quot;163.83976808539&quot;&gt;
&lt;p&gt;æœ¬æ–‡æºç ï¼š&lt;a href=&quot;https://github.com/cicadasmile/big-data-parent&quot; target=&quot;_blank&quot;&gt;GitHub&lt;/a&gt; || &lt;a href=&quot;https://gitee.com/cicadasmile/big-data-parent&quot; target=&quot;_blank&quot;&gt;GitEE&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;1ã€åŸºç¡€æè¿°&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Hiveæ˜¯åŸºäºHadoopçš„ä¸€ä¸ªæ•°æ®ä»“åº“å·¥å…·ï¼Œç”¨æ¥è¿›è¡Œæ•°æ®æå–ã€è½¬åŒ–ã€åŠ è½½ï¼Œæ˜¯ä¸€ä¸ªå¯ä»¥å¯¹Hadoopä¸­çš„å¤§è§„æ¨¡å­˜å‚¨çš„æ•°æ®è¿›è¡ŒæŸ¥è¯¢å’Œåˆ†æå­˜å‚¨çš„ç»„ä»¶ï¼ŒHiveæ•°æ®ä»“åº“å·¥å…·èƒ½å°†ç»“æ„åŒ–çš„æ•°æ®æ–‡ä»¶æ˜ å°„ä¸ºä¸€å¼ æ•°æ®åº“è¡¨ï¼Œå¹¶æä¾›SQLæŸ¥è¯¢åŠŸèƒ½ï¼Œèƒ½å°†SQLè¯­å¥è½¬å˜æˆMapReduceä»»åŠ¡æ¥æ‰§è¡Œï¼Œä½¿ç”¨æˆæœ¬ä½ï¼Œå¯ä»¥é€šè¿‡ç±»ä¼¼SQLè¯­å¥å®ç°å¿«é€ŸMapReduceç»Ÿè®¡ï¼Œä½¿MapReduceå˜å¾—æ›´åŠ ç®€å•ï¼Œè€Œä¸å¿…å¼€å‘ä¸“é—¨çš„MapReduceåº”ç”¨ç¨‹åºã€‚hiveååˆ†é€‚åˆå¯¹æ•°æ®ä»“åº“è¿›è¡Œç»Ÿè®¡åˆ†æã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2ã€ç»„æˆä¸æ¶æ„&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1691717/202101/1691717-20210103225539496-461576247.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç”¨æˆ·æ¥å£&lt;/strong&gt;ï¼šClientCLIã€JDBCè®¿é—®Hiveã€WEBUIæµè§ˆå™¨è®¿é—®Hiveã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å…ƒæ•°æ®&lt;/strong&gt;ï¼šHiveå°†å…ƒæ•°æ®å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œå¦‚mysqlã€derbyã€‚Hiveä¸­çš„å…ƒæ•°æ®åŒ…æ‹¬è¡¨çš„åå­—ï¼Œè¡¨çš„åˆ—å’Œåˆ†åŒºä»¥åŠå±æ€§ï¼Œè¡¨çš„å±æ€§ï¼ˆæ˜¯å¦ä¸ºå¤–éƒ¨è¡¨ç­‰ï¼‰ï¼Œè¡¨çš„æ•°æ®æ‰€åœ¨ç›®å½•ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é©±åŠ¨å™¨&lt;/strong&gt;ï¼šåŸºäºè§£é‡Šå™¨ã€ç¼–è¾‘å™¨ã€ä¼˜åŒ–å™¨å®ŒæˆHQLæŸ¥è¯¢è¯­å¥ä»è¯æ³•åˆ†æã€è¯­æ³•åˆ†æã€ç¼–è¯‘ã€ä¼˜åŒ–ä»¥åŠæŸ¥è¯¢è®¡åˆ’çš„ç”Ÿæˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ‰§è¡Œå™¨å¼•æ“&lt;/strong&gt;ï¼šExecutionEngineæŠŠé€»è¾‘æ‰§è¡Œè®¡åˆ’è½¬æ¢æˆå¯ä»¥è¿è¡Œçš„ç‰©ç†è®¡åˆ’ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Hadoopåº•å±‚&lt;/strong&gt;ï¼šåŸºäºHDFSè¿›è¡Œå­˜å‚¨ï¼Œä½¿ç”¨MapReduceè¿›è¡Œè®¡ç®—ï¼ŒåŸºäºYarnçš„è°ƒåº¦æœºåˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;Hiveæ”¶åˆ°ç»™å®¢æˆ·ç«¯å‘é€çš„äº¤äº’è¯·æ±‚ï¼Œæ¥æ”¶åˆ°æ“ä½œæŒ‡ä»¤(SQL)ï¼Œå¹¶å°†æŒ‡ä»¤ç¿»è¯‘æˆMapReduceï¼Œæäº¤åˆ°Hadoopä¸­æ‰§è¡Œï¼Œæœ€åå°†æ‰§è¡Œç»“æœè¾“å‡ºåˆ°å®¢æˆ·ç«¯ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;1ã€å‡†å¤‡å®‰è£…åŒ…&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;hive-1.2ï¼Œä¾èµ–Hadoopé›†ç¾¤ç¯å¢ƒï¼Œä½ç½®æ”¾åœ¨hop01æœåŠ¡ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2ã€è§£å‹é‡å‘½å&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;tar -zxvf apache-hive-1.2.1-bin.tar.gz
mv apache-hive-1.2.1-bin/ hive1.2
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;3ã€ä¿®æ”¹é…ç½®æ–‡ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åˆ›å»ºé…ç½®æ–‡ä»¶&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;[root@hop01 conf]# pwd
/opt/hive1.2/conf
[root@hop01 conf]# mv hive-env.sh.template hive-env.sh
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ·»åŠ å†…å®¹&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;[root@hop01 conf]# vim hive-env.sh
export HADOOP_HOME=/opt/hadoop2.7
export HIVE_CONF_DIR=/opt/hive1.2/conf
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é…ç½®å†…å®¹ä¸€ä¸ªæ˜¯Hadoopè·¯å¾„ï¼Œå’Œhiveé…ç½®æ–‡ä»¶è·¯å¾„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4ã€Hadoopé…ç½®&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆå¯åŠ¨hdfså’Œyarnï¼›ç„¶ååœ¨HDFSä¸Šåˆ›å»º/tmpå’Œ/user/hive/warehouseä¸¤ä¸ªç›®å½•å¹¶ä¿®æ”¹èµ‹äºˆæƒé™ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;bin/hadoop fs -mkdir /tmp
bin/hadoop fs -mkdir -p /user/hive/warehouse
bin/hadoop fs -chmod g+w /tmp
bin/hadoop fs -chmod g+w /user/hive/warehouse
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;5ã€å¯åŠ¨Hive&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;[root@hop01 hive1.2]# bin/hive
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;6ã€åŸºç¡€æ“ä½œ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹æ•°æ®åº“&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;hive&amp;gt; show databases ;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;é€‰æ‹©æ•°æ®åº“&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;hive&amp;gt; use default;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹æ•°æ®è¡¨&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;hive&amp;gt; show tables;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;åˆ›å»ºæ•°æ®åº“ä½¿ç”¨&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;hive&amp;gt; create database mytestdb;
hive&amp;gt; show databases ;
default
mytestdb
hive&amp;gt; use mytestdb;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;åˆ›å»ºè¡¨&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;create table hv_user (id int, name string, age int);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹è¡¨ç»“æ„&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;hive&amp;gt; desc hv_user;
id                      int                                         
name                    string                                      
age                     int 
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;æ·»åŠ è¡¨æ•°æ®&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;insert into hv_user values (1, &quot;test-user&quot;, 23);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥è¯¢è¡¨æ•°æ®&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;hive&amp;gt; select * from hv_user ;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ³¨æ„ï¼šè¿™é‡Œé€šè¿‡å¯¹æŸ¥è¯¢æ—¥å¿—çš„è§‚å¯Ÿï¼Œæ˜æ˜¾çœ‹å‡ºHiveæ‰§è¡Œçš„æµç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åˆ é™¤è¡¨&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;hive&amp;gt; drop table hv_user ;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;é€€å‡ºHive&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;hive&amp;gt; quit;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;æŸ¥çœ‹Hadoopç›®å½•&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;# hadoop fs -ls /user/hive/warehouse       
/user/hive/warehouse/mytestdb.db
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é€šè¿‡Hiveåˆ›å»ºçš„æ•°æ®åº“å’Œæ•°æ®å­˜å‚¨åœ¨HDFSä¸Šã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œé»˜è®¤å®‰è£…å¥½MySQL5.7çš„ç‰ˆæœ¬ï¼Œå¹¶é…ç½®å¥½ç›¸å…³ç™»å½•è´¦å·ï¼Œé…ç½®rootç”¨æˆ·çš„Hostä¸º%æ¨¡å¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1ã€ä¸Šä¼ MySQLé©±åŠ¨åŒ…&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å°†MySQLé©±åŠ¨ä¾èµ–åŒ…ä¸Šä¼ åˆ°hiveå®‰è£…ç›®å½•çš„libç›®å½•ä¸‹ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;[root@hop01 lib]# pwd
/opt/hive1.2/lib
[root@hop01 lib]# ll
mysql-connector-java-5.1.27-bin.jar
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;2ã€åˆ›å»ºhive-siteé…ç½®&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;[root@hop01 conf]# pwd
/opt/hive1.2/conf
[root@hop01 conf]# touch hive-site.xml
[root@hop01 conf]# vim hive-site.xml
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;3ã€é…ç½®MySQLå­˜å‚¨&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-xml&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;
&amp;lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;configuration.xsl&quot;?&amp;gt;
&amp;lt;configuration&amp;gt;
        &amp;lt;property&amp;gt;
          &amp;lt;name&amp;gt;javax.jdo.option.ConnectionURL&amp;lt;/name&amp;gt;
          &amp;lt;value&amp;gt;jdbc:mysql://hop01:3306/metastore?createDatabaseIfNotExist=true&amp;lt;/value&amp;gt;
          &amp;lt;description&amp;gt;JDBC connect string for a JDBC metastore&amp;lt;/description&amp;gt;
        &amp;lt;/property&amp;gt;

        &amp;lt;property&amp;gt;
          &amp;lt;name&amp;gt;javax.jdo.option.ConnectionDriverName&amp;lt;/name&amp;gt;
          &amp;lt;value&amp;gt;com.mysql.jdbc.Driver&amp;lt;/value&amp;gt;
          &amp;lt;description&amp;gt;Driver class name for a JDBC metastore&amp;lt;/description&amp;gt;
        &amp;lt;/property&amp;gt;

        &amp;lt;property&amp;gt;
          &amp;lt;name&amp;gt;javax.jdo.option.ConnectionUserName&amp;lt;/name&amp;gt;
          &amp;lt;value&amp;gt;root&amp;lt;/value&amp;gt;
          &amp;lt;description&amp;gt;username to use against metastore database&amp;lt;/description&amp;gt;
        &amp;lt;/property&amp;gt;

        &amp;lt;property&amp;gt;
          &amp;lt;name&amp;gt;javax.jdo.option.ConnectionPassword&amp;lt;/name&amp;gt;
          &amp;lt;value&amp;gt;123456&amp;lt;/value&amp;gt;
          &amp;lt;description&amp;gt;password to use against metastore database&amp;lt;/description&amp;gt;
        &amp;lt;/property&amp;gt;
&amp;lt;/configuration&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é…ç½®å®Œæˆåï¼Œä¾æ¬¡é‡å¯MySQLã€hadoopã€hiveç¯å¢ƒï¼ŒæŸ¥çœ‹MySQLæ•°æ®åº“ä¿¡æ¯ï¼Œå¤šäº†metastoreæ•°æ®åº“å’Œç›¸å…³è¡¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4ã€åå°å¯åŠ¨hiveserver2&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;[root@hop01 hive1.2]# bin/hiveserver2 &amp;amp;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;5ã€Jdbcè¿æ¥æµ‹è¯•&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;[root@hop01 hive1.2]# bin/beeline
Beeline version 1.2.1 by Apache Hive
beeline&amp;gt; !connect jdbc:hive2://hop01:10000
Connecting to jdbc:hive2://hop01:10000
Enter username for jdbc:hive2://hop01:10000: hiveroot (è´¦æˆ·å›è½¦)
Enter password for jdbc:hive2://hop01:10000: ******   (å¯†ç 123456å›è½¦)
Connected to: Apache Hive (version 1.2.1)
Driver: Hive JDBC (version 1.2.1)
0: jdbc:hive2://hop01:10000&amp;gt; show databases;
+----------------+--+
| database_name  |
+----------------+--+
| default        |
+----------------+--+
&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;1ã€åŸºç¡€å‡½æ•°&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-sql&quot;&gt;select count(*) count_user from hv_user;
select sum(age) sum_age from hv_user;
select min(age) min_age,max(age) max_age from hv_user;
+----------+----------+--+
| min_age  | max_age  |
+----------+----------+--+
| 23       | 25       |
+----------+----------+--+
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;2ã€æ¡ä»¶æŸ¥è¯¢è¯­å¥&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-sql&quot;&gt;select * from hv_user where name='test-user' limit 1;
+-------------+---------------+--------------+--+
| hv_user.id  | hv_user.name  | hv_user.age  |
+-------------+---------------+--------------+--+
| 1           | test-user     | 23           |
+-------------+---------------+--------------+--+

select * from hv_user where id&amp;gt;1 AND name like 'dev%';
+-------------+---------------+--------------+--+
| hv_user.id  | hv_user.name  | hv_user.age  |
+-------------+---------------+--------------+--+
| 2           | dev-user      | 25           |
+-------------+---------------+--------------+--+

select count(*) count_name,name from hv_user group by name;
+-------------+------------+--+
| count_name  |    name    |
+-------------+------------+--+
| 1           | dev-user   |
| 1           | test-user  |
+-------------+------------+--+
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;3ã€è¿æ¥æŸ¥è¯¢&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-sql&quot;&gt;select t1.*,t2.* from hv_user t1 join hv_dept t2 on t1.id=t2.dp_id;
+--------+------------+---------+-----------+-------------+--+
| t1.id  |  t1.name   | t1.age  | t2.dp_id  | t2.dp_name  |
+--------+------------+---------+-----------+-------------+--+
| 1      | test-user  | 23      | 1         | æŠ€æœ¯éƒ¨      |
+--------+------------+---------+-----------+-------------+--+
&lt;/code&gt;
&lt;/pre&gt;

&lt;pre&gt;
&lt;code&gt;GitHubÂ·åœ°å€
https://github.com/cicadasmile/big-data-parent
GitEEÂ·åœ°å€
https://gitee.com/cicadasmile/big-data-parent
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;æ¨èé˜…è¯»ï¼šç¼–ç¨‹ä½“ç³»æ•´ç†&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;</description>
<pubDate>Mon, 04 Jan 2021 00:00:00 +0000</pubDate>
<dc:creator>çŸ¥äº†ä¸€ç¬‘</dc:creator>
<og:description>Hiveæ˜¯åŸºäºHadoopçš„ä¸€ä¸ªæ•°æ®ä»“åº“å·¥å…·ï¼Œç”¨æ¥è¿›è¡Œæ•°æ®æå–ã€è½¬åŒ–ã€åŠ è½½ï¼Œæ˜¯ä¸€ä¸ªå¯ä»¥å¯¹Hadoopä¸­çš„å¤§è§„æ¨¡å­˜å‚¨çš„æ•°æ®è¿›è¡ŒæŸ¥è¯¢å’Œåˆ†æå­˜å‚¨çš„ç»„ä»¶ï¼ŒHiveæ•°æ®ä»“åº“å·¥å…·èƒ½å°†ç»“æ„åŒ–çš„æ•°æ®æ–‡ä»¶æ˜ å°„ä¸ºä¸€å¼ æ•°æ®</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/cicada-smile/p/14227369.html</dc:identifier>
</item>
<item>
<title>Kuberneteså®˜æ–¹javaå®¢æˆ·ç«¯ä¹‹äºŒï¼šåºåˆ—åŒ–å’Œååºåˆ—åŒ–é—®é¢˜ - ç¨‹åºå‘˜æ¬£å®¸</title>
<link>http://www.cnblogs.com/bolingcavalry/p/14227738.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/bolingcavalry/p/14227738.html</guid>
<description>&lt;h3 id=&quot;æ¬¢è¿è®¿é—®æˆ‘çš„github&quot;&gt;æ¬¢è¿è®¿é—®æˆ‘çš„GitHub&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/zq2599/blog_demos&quot; target=&quot;_blank&quot;&gt;https://github.com/zq2599/blog_demos&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å†…å®¹ï¼šæ‰€æœ‰åŸåˆ›æ–‡ç« åˆ†ç±»æ±‡æ€»åŠé…å¥—æºç ï¼Œæ¶‰åŠJavaã€Dockerã€Kubernetesã€DevOPSç­‰ï¼›&lt;/p&gt;
&lt;h3 id=&quot;é—®é¢˜åœºæ™¯&quot;&gt;é—®é¢˜åœºæ™¯&lt;/h3&gt;
&lt;p&gt;æœ¬æ–‡æ˜¯ã€ŠKuberneteså®˜æ–¹javaå®¢æˆ·ç«¯ã€‹çš„ç¬¬äºŒç¯‡ï¼Œåœ¨è¿›å…¥ç¼–ç å®æˆ˜ç« èŠ‚ä¹‹å‰ï¼Œæœ‰ä¸ªé—®é¢˜éœ€è¦å¤§å®¶æœ‰è¶³å¤Ÿçš„äº†è§£ï¼Œé¿å…åœ¨åé¢çš„å®æˆ˜ä¸­è€—è´¹ç²¾åŠ›å¤„ç†æ­¤ç±»é—®é¢˜ï¼Œæ¥çœ‹çœ‹ç©¶ç«Ÿæ˜¯ä»€ä¹ˆé—®é¢˜ï¼š&lt;/p&gt;
&lt;ol readability=&quot;4&quot;&gt;&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;SpringBootæ˜¯å¸¸ç”¨çš„åº”ç”¨æ¡†æ¶ï¼Œã€ŠKuberneteså®˜æ–¹javaå®¢æˆ·ç«¯ã€‹ç³»åˆ—çš„åº”ç”¨éƒ½æ˜¯åŸºäºSpringBoot-2.3.1ç‰ˆæœ¬çš„ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;ä¸‹å›¾æ˜¯SpringBoot-2.3.1.RELEASEçš„å®˜æ–¹æ–‡æ¡£ï¼Œçº¢æ¡†è¡¨æ˜é»˜è®¤çš„JSONå¤„ç†åº“æ˜¯Jacksonï¼š&lt;br/&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/485422/202101/485422-20210104074816720-1669097882.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;çœ‹åˆ°è¿™é‡Œæ‚¨æ˜¯å¦æœ‰ç§ä¸ç¥¥é¢„æ„Ÿï¼šK8Så®˜æ–¹javaå®¢æˆ·ç«¯æ˜¯è°·æ­Œçš„ï¼Œæ¶‰åŠåˆ°JSONå¤„ç†æ—¶ä¼šä¸ä¼šé¦–é€‰è‡ªå®¶çš„Gsonï¼Ÿ&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;&lt;span&gt;V1HTTPGetAction.java&lt;/span&gt;æ˜¯javaå®¢æˆ·ç«¯ä¸­å¸¸ç”¨åˆ°çš„æ•°æ®ç»“æ„ï¼Œç”¨æ¥å°è£…httpè¯·æ±‚ç›¸å…³çš„å‚æ•°ï¼Œæ¥çœ‹çœ‹å…¶æºç ï¼Œå¦‚ä¸‹å›¾ï¼Œæœç„¶ç”¨ä¸Šäº†Gsonçš„æ³¨è§£ï¼š&lt;br/&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/485422/202101/485422-20210104074818382-947759646.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;ä¸Šå›¾æåˆ°çš„&lt;span&gt;IntOrString&lt;/span&gt;ç±»è¦é‡ç‚¹å…³æ³¨ï¼Œç”¨å¤„å¹¿æ³›ï¼Œæ‰“å¼€å…¶æºç å¦‚ä¸‹å›¾ï¼Œè¯·è®°ä¸‹çº¢æ¡†2ä¸­çš„ä»£ç ï¼Œåé¢æåˆ°çš„é—®é¢˜å°±æ¥æºäºæ­¤ï¼š&lt;br/&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/485422/202101/485422-20210104074819707-157803312.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;ul&gt;&lt;li&gt;å°ç»“ï¼šSpringBooté»˜è®¤çš„JSONå¤„ç†ç±»æ˜¯Jacksonï¼ŒK8Så®˜æ–¹javaå®¢æˆ·ç«¯å†…çš„Beanåœ¨æ¶‰åŠåˆ°JSONç›¸å…³çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–å¤„ç†æ—¶ï¼Œä½¿ç”¨äº†Gsonæ³¨è§£ï¼Œå› æ­¤ä¸Šè¿°Beanå®ä¾‹åœ¨SpringBootä¸­æ¶‰åŠåˆ°JSONå¤„ç†æ—¶ï¼Œå¯èƒ½ä¼šæœ‰é—®é¢˜(è¿™æ—¶åªèƒ½è¯´å¯èƒ½)ï¼Œä¾‹å¦‚RestControllerè¿”å›å¯¹è±¡ï¼Œä¼šè¢«Jacksonè½¬ä¸ºJSONï¼›&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;å¤ç°é—®é¢˜&quot;&gt;å¤ç°é—®é¢˜&lt;/h3&gt;
&lt;ol&gt;&lt;li&gt;è¿™é‡Œç”¨ä¸€ä¸ªSpringBootå·¥ç¨‹æ¥æ¼”ç¤ºæ­¤é—®é¢˜ï¼ˆè¯¥å·¥ç¨‹åä¸ºOutsideclusterApplicationï¼Œä¸‹ä¸€ç¯‡æ–‡ç« ä¼šè¯¦ç»†è¯´æ˜ï¼‰ï¼Œå¦‚ä¸‹ä»£ç æ˜¯ä¸ªhttpæ¥å£å“åº”ï¼Œå¯è§V1PodListå®ä¾‹ä½œä¸ºæ¥å£è¿”å›æ—¶ï¼Œä¼šè¢«SpringBootç”¨Jacksonè½¬ä¸ºJSONè¿”å›ç»™å‰ç«¯ï¼š&lt;/li&gt;
&lt;/ol&gt;&lt;pre&gt;
&lt;code class=&quot;language-shell&quot;&gt;@RequestMapping(value = &quot;/hello&quot;)
    public V1PodList hello() throws Exception {
        // å­˜æ”¾K8Sçš„configæ–‡ä»¶çš„å…¨è·¯å¾„
        String kubeConfigPath = &quot;/Users/zhaoqin/temp/202007/05/config&quot;;

        // ä»¥configä½œä¸ºå…¥å‚åˆ›å»ºçš„clientå¯¹è±¡ï¼Œå¯ä»¥è®¿é—®åˆ°K8Sçš„API Server
        ApiClient client = ClientBuilder
                .kubeconfig(KubeConfig.loadKubeConfig(new FileReader(kubeConfigPath)))
                .build();

        Configuration.setDefaultApiClient(client);

        CoreV1Api api = new CoreV1Api();

        // è°ƒç”¨å®¢æˆ·ç«¯APIå–å¾—æ‰€æœ‰podä¿¡æ¯
        V1PodList v1PodList = api.listPodForAllNamespaces(null, null, null, null, null, null, null, null, null);

        return v1PodList;
    }
&lt;/code&gt;
&lt;/pre&gt;
&lt;ol start=&quot;2&quot; readability=&quot;1.5&quot;&gt;&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;ä¸Šè¿°ä»£ç è¿è¡Œèµ·æ¥ï¼Œåœ¨æµè§ˆå™¨è®¿é—®è¯¥æ¥å£æ—¶ï¼Œæ§åˆ¶å°æŠ›å‡ºä»¥ä¸‹é”™è¯¯ï¼ŒIntOrString.getStrValueæ–¹æ³•ï¼Œå°±æ˜¯å‰é¢å’±ä»¬çœ‹è¿‡çš„é‚£æ®µï¼ŒIntOrStringä¸­å®é™…ä¸Šä¿å­˜çš„æ˜¯intæ•°æ®ï¼Œä½†æ˜¯Jacksonæ‰§è¡Œäº†å…¶&lt;span&gt;getStrValue&lt;/span&gt;æ–¹æ³•ï¼š&lt;br/&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/485422/202101/485422-20210104074821225-1443774302.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;è‡³äºä¸ºä»€ä¹ˆJacksonä¼šæ‰§è¡ŒgetStrValueæ–¹æ³•ï¼Œç¯‡å¹…åŸå› å°±ä¸åœ¨æ­¤å±•å¼€äº†ï¼Œç®€å•æä¸€ä¸‹ï¼Œåœ¨javaå®¢æˆ·ç«¯çš„BeanPropertyWriterç±»ä¸­ï¼Œé€‰æ‹©æ–¹æ³•çš„é€»è¾‘å¦‚ä¸‹å›¾ï¼Œçº¢æ¡†ä¸­å±•ç¤ºäº†åˆ¤å®šé€»è¾‘ï¼Œæ­¤å¤„getStrValueæ–¹æ³•å‘½ä¸­äº†è¯¥é€»è¾‘ï¼Œå¦‚æœæ‚¨å°è¯•ç”¨åœ¨çº¢æ¡†å¤„æ‰“ä¸Šæ–­ç‚¹è§‚å¯Ÿï¼Œä¼šå‘ç°æœ‰å¾ˆå¤šæ–¹æ³•éƒ½ç¬¦åˆæ­¤æ¡ä»¶ï¼š&lt;br/&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/485422/202101/485422-20210104074821962-585896793.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;h3 id=&quot;è§£å†³é—®é¢˜çš„æ€è·¯&quot;&gt;è§£å†³é—®é¢˜çš„æ€è·¯&lt;/h3&gt;
&lt;p&gt;æˆ‘è¿™é‡Œï¼Œè§£å†³é—®é¢˜çš„æ€è·¯æœ‰ä¸¤ä¸ªï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;è®©Jacksonåœ¨åºåˆ—åŒ–çš„æ—¶å€™ï¼Œèƒ½å¤Ÿè°ƒç”¨æ­£ç¡®çš„æ–¹æ³•ï¼Œä»¥IntOrStringä¸ºä¾‹ï¼Œå¦‚æœæ­¤æ—¶å†…éƒ¨ä¿å­˜intå‹æ•°æ®ï¼Œå°±åº”è¯¥æ‰§è¡Œå…¶getIntValueæ–¹æ³•å³å¯ï¼›&lt;/li&gt;
&lt;li&gt;Beanä¸­ä½¿ç”¨äº†Gsonæ³¨é‡Šï¼Œå°±æ˜¯æ‰“ç®—ç”¨Gsonæ¥å¤„ç†åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ“ä½œçš„ï¼Œå› æ­¤åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„åœ°æ–¹éƒ½æ”¹ç”¨Gsonå¤„ç†ï¼›&lt;/li&gt;
&lt;/ol&gt;&lt;ul&gt;&lt;li&gt;ä¸Šè¿°ä¸¤ä¸ªæ€è·¯ï¼Œæˆ‘é€‰æ‹©äº†ç¬¬äºŒç§ï¼Œæ¯•ç«Ÿç¬¬ä¸€ç§å¤ªéš¾äº†...&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;è§£å†³é—®é¢˜&quot;&gt;è§£å†³é—®é¢˜&lt;/h3&gt;
&lt;ol readability=&quot;-1&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;é—®é¢˜è§£å†³èµ·æ¥å¹¶ä¸éš¾ï¼Œå…ˆçœ‹SpringBoot-2.3.1.RELEASEå®˜æ–¹æ–‡æ¡£ï¼š&lt;br/&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/485422/202101/485422-20210104074822663-837242560.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;ç»“åˆå®˜æ–¹æ–‡æ¡£ï¼Œæˆ‘ä»¬è¦åšä¸¤ä»¶äº‹æƒ…ï¼š&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;ul&gt;&lt;li&gt;é¦–å…ˆï¼Œclasspathä¸­æœ‰Gsonï¼Œè¿™ä¸ªå·²ç»æœ‰äº†ï¼Œå› ä¸ºK8Så®˜æ–¹javaå®¢æˆ·ç«¯ä¼šä¾èµ–Gsonï¼›&lt;/li&gt;
&lt;li&gt;å…¶æ¬¡ï¼Œclasspathä¸­ä¸è¦å‡ºç°Jacksonï¼Œä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®çš„æˆ‘ä»¬éœ€è¦åšä»¥ä¸‹æ“ä½œï¼Œæ’é™¤spring-boot-starter-webçš„ä¾èµ–(ä¸ºä»€ä¹ˆä¸ç›´æ¥æ’é™¤jacksonçš„åº“å‘¢ï¼Ÿæ‚¨å¯ä»¥æ‰§è¡Œmvn dependency:treeå‘½ä»¤ç»†çœ‹ä¾èµ–æ ‘ï¼Œä¼šå‘ç°å¯¹jacksonçš„ä¾èµ–å¹¶éå•ä¸€å…³ç³»)ï¼š&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-xml&quot;&gt;&amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;spring-boot-starter-web&amp;lt;/artifactId&amp;gt;
                &amp;lt;exclusions&amp;gt;
                        &amp;lt;exclusion&amp;gt;
                                &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
                                &amp;lt;artifactId&amp;gt;spring-boot-starter-json&amp;lt;/artifactId&amp;gt;
                        &amp;lt;/exclusion&amp;gt;
                &amp;lt;/exclusions&amp;gt;
&amp;lt;/dependency&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;ol start=&quot;3&quot;&gt;&lt;li&gt;å»ºè®®æ‚¨æ‰§è¡Œmvn dependency:treeå‘½ä»¤ç»†çœ‹æ•´ä¸ªé¡¹ç›®çš„ä¾èµ–æ ‘ï¼Œç¡®ä¿jacksonä¾èµ–å·²ç»å…¨éƒ¨å»æ‰ï¼›&lt;/li&gt;
&lt;li&gt;å†æ¬¡è¿è¡Œä¸Šè¿°é¡¹ç›®ï¼Œå¦‚ä¸‹å›¾ï¼ŒæœåŠ¡ç«¯ä¸å†æŠ¥é”™ï¼Œé¡µé¢ä¸Šè¿”å›æ•°æ®æ­£å¸¸ï¼š&lt;br/&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/485422/202101/485422-20210104074823143-1547529755.png&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; loading=&quot;lazy&quot;/&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;h3 id=&quot;ä½¿ç”¨jacksonçš„åœºæ™¯&quot;&gt;ä½¿ç”¨Jacksonçš„åœºæ™¯&lt;/h3&gt;
&lt;ul readability=&quot;1&quot;&gt;&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;ä¸Šè¿°æ–¹å¼è™½ç„¶å¯è¡Œï¼Œä½†å¹¶éæ‰€æœ‰é¡¹ç›®éƒ½èƒ½åšæŒä½¿ç”¨Gsonè€Œæ”¾å¼ƒJacksonï¼Œå¯¹äºä½¿ç”¨Jacksonçš„é¡¹ç›®ï¼Œè¯·é¿å…Jacksonå‚ä¸K8Så®˜æ–¹javaå®¢æˆ·ç«¯beançš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ“ä½œï¼Œä»¥ä¸Šé¢å‡ºç°çš„Controllerä»£ç ä¸ºä¾‹ï¼Œä¸è¦ç›´æ¥å°†V1PodListå®ä¾‹è¿”å›ï¼Œæ‚¨å¯ä»¥é€‰æ‹©å…ˆç”¨Gsonåºåˆ—åŒ–æˆJSONå­—ç¬¦ä¸²ï¼Œå†è¿”å›å­—ç¬¦ä¸²ç»™å‰ç«¯ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å®šä¹‰VOå¯¹è±¡ï¼Œå°†V1PodListå®ä¾‹è½¬æˆVOå¯¹è±¡å†è¿”å›ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;è‡³æ­¤ï¼Œä½¿ç”¨K8Så®˜æ–¹javaå®¢æˆ·ç«¯ä¹‹å‰è¦æ³¨æ„çš„é—®é¢˜å·²ç»å¼„æ˜ç™½äº†ï¼Œæ¥ä¸‹æ¥çš„è¿›å…¥ç²¾å½©çš„å®æˆ˜ç« èŠ‚å§ï¼Œä¸€èµ·ä½“éªŒkuberneteså®˜æ–¹ä¸ºjavaç¨‹åºå‘˜ç²¾å¿ƒå‡†å¤‡çš„å·¥å…·ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;ä½ ä¸å­¤å•ï¼Œæ¬£å®¸åŸåˆ›ä¸€è·¯ç›¸ä¼´&quot;&gt;ä½ ä¸å­¤å•ï¼Œæ¬£å®¸åŸåˆ›ä¸€è·¯ç›¸ä¼´&lt;/h3&gt;
&lt;ol&gt;&lt;li&gt;&lt;a href=&quot;https://xinchen.blog.csdn.net/article/details/105068742&quot; target=&quot;_blank&quot;&gt;Javaç³»åˆ—&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://xinchen.blog.csdn.net/article/details/105086498&quot; target=&quot;_blank&quot;&gt;Springç³»åˆ—&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://xinchen.blog.csdn.net/article/details/105086732&quot; target=&quot;_blank&quot;&gt;Dockerç³»åˆ—&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://xinchen.blog.csdn.net/article/details/105086794&quot; target=&quot;_blank&quot;&gt;kubernetesç³»åˆ—&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://xinchen.blog.csdn.net/article/details/105086850&quot; target=&quot;_blank&quot;&gt;æ•°æ®åº“+ä¸­é—´ä»¶ç³»åˆ—&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://xinchen.blog.csdn.net/article/details/105086920&quot; target=&quot;_blank&quot;&gt;DevOpsç³»åˆ—&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;h3 id=&quot;æ¬¢è¿å…³æ³¨å…¬ä¼—å·ï¼šç¨‹åºå‘˜æ¬£å®¸&quot;&gt;æ¬¢è¿å…³æ³¨å…¬ä¼—å·ï¼šç¨‹åºå‘˜æ¬£å®¸&lt;/h3&gt;
&lt;blockquote readability=&quot;4.258064516129&quot;&gt;
&lt;p&gt;å¾®ä¿¡æœç´¢ã€Œç¨‹åºå‘˜æ¬£å®¸ã€ï¼Œæˆ‘æ˜¯æ¬£å®¸ï¼ŒæœŸå¾…ä¸æ‚¨ä¸€åŒç•…æ¸¸Javaä¸–ç•Œ...&lt;br/&gt;&lt;a href=&quot;https://github.com/zq2599/blog_demos&quot; target=&quot;_blank&quot;&gt;https://github.com/zq2599/blog_demos&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
<pubDate>Sun, 03 Jan 2021 23:48:00 +0000</pubDate>
<dc:creator>ç¨‹åºå‘˜æ¬£å®¸</dc:creator>
<og:description>æ¬¢è¿è®¿é—®æˆ‘çš„GitHub https://github.com/zq2599/blog_demos å†…å®¹ï¼šæ‰€æœ‰åŸåˆ›æ–‡ç« åˆ†ç±»æ±‡æ€»åŠé…å¥—æºç ï¼Œæ¶‰åŠJavaã€Dockerã€Kubernetesã€DevOPS</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/bolingcavalry/p/14227738.html</dc:identifier>
</item>
<item>
<title>ASP.NET Core Controllerä¸IOCçš„ç¾ç»Š - yiå¿µä¹‹é—´</title>
<link>http://www.cnblogs.com/wucy/p/14222973.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/wucy/p/14222973.html</guid>
<description>&lt;h4 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h4&gt;
&lt;p&gt;Â Â Â Â çœ‹åˆ°æ ‡é¢˜å¯èƒ½å¤§å®¶ä¼šæœ‰æ‰€ç–‘é—®Controllerå’ŒIOCèƒ½æœ‰å•¥ç¾ç»Šï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯æ‹’ç»å½“ä¸€ä¸ªæ ‡é¢˜å…šçš„ã€‚ç›¸ä¿¡æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†äººå·²ç»çŸ¥é“äº†è¿™ä¹ˆä¸€ä¸ªç»“è®ºï¼Œé»˜è®¤æƒ…å†µä¸‹ASP.NET Coreçš„Controllerå¹¶ä¸ä¼šæ‰˜ç®¡åˆ°IOCå®¹å™¨ä¸­ï¼Œæ³¨æ„å…³é”®å­—æˆ‘è¯´çš„æ˜¯&quot;é»˜è®¤&quot;ï¼Œé¦–å…ˆå’±ä»¬ä¸å…ˆè¯´ä¸ºä»€ä¹ˆï¼Œå¦‚æœè¿˜æœ‰ä¸çŸ¥é“è¿™ä¸ªç»“è®ºçš„åŒå­¦ä»¬å¯ä»¥è‡ªå·±éªŒè¯ä¸€ä¸‹ï¼ŒéªŒè¯æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œå¤§æ¦‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹å¼ã€‚&lt;/p&gt;
&lt;h4 id=&quot;éªŒè¯controllerä¸åœ¨iocä¸­&quot;&gt;éªŒè¯Controllerä¸åœ¨IOCä¸­&lt;/h4&gt;
&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•åœ¨ServiceProviderä¸­è·å–æŸä¸ªControllerå®ä¾‹ï¼Œæ¯”å¦‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cs&quot;&gt;public void Configure(IApplicationBuilder app, IWebHostEnvironment env)
{
    var productController = app.ApplicationServices.GetService&amp;lt;ProductController&amp;gt;();
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™æ˜¯æœ€ç›´æ¥çš„æ–¹å¼ï¼Œå¯ä»¥åœ¨IOCå®¹å™¨ä¸­è·å–æ³¨å†Œè¿‡çš„ç±»å‹å®ä¾‹ï¼Œå¾ˆæ˜¾ç„¶ç»“æœä¼šä¸ºnullã€‚å¦ä¸€ç§æ–¹å¼ï¼Œä¹Ÿæ˜¯åˆ©ç”¨å®ƒçš„å¦ä¸€ä¸ªç‰¹å¾ï¼Œé‚£å°±æ˜¯é€šè¿‡æ„é€ æ³¨å…¥çš„æ–¹å¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºæˆ‘ä»¬åœ¨OrderControllerä¸­æ³¨å…¥ProductController,&lt;span&gt;æ˜¾ç„¶è¿™ç§æ–¹å¼æ˜¯ä¸åˆç†çš„ï¼Œä½†æ˜¯ä¸ºäº†æ±‚è¯ä¸€ä¸ªç»“æœï¼Œæˆ‘ä»¬è¿™é‡Œä»…åšæ¼”ç¤ºï¼Œå¼ºçƒˆä¸å»ºè®®å®é™…å¼€å‘ä¸­è¿™ä¹ˆå†™ï¼Œè¿™æ˜¯ä¸è§„èŒƒä¹Ÿæ˜¯ä¸åˆç†çš„å†™æ³•&lt;/span&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cs&quot;&gt;public class OrderController : Controller
{
    private readonly ProductController _productController;
    public OrderController(ProductController productController)
    {
        _productController = productController;
    }

    public IActionResult Index()
    {
        return View();
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç»“æœæ˜¾ç„¶æ˜¯ä¼šæŠ¥ä¸€ä¸ªé”™InvalidOperationException: Unable to resolve service for type 'ProductController' while attempting to activate 'OrderController'ã€‚åŸå› å°±æ˜¯å› ä¸ºProductControllerå¹¶ä¸åœ¨IOCå®¹å™¨ä¸­,æ‰€ä»¥é€šè¿‡æ³¨å…¥çš„æ–¹å¼ä¼šæŠ¥é”™ã€‚è¿˜æœ‰ä¸€ç§æ–¹å¼ï¼Œå¯èƒ½ä¸å¤ªå¸¸ç”¨ï¼Œè¿™ä¸ªæ˜¯åˆ©ç”¨æ³¨å…¥çš„ä¸€ä¸ªç‰¹å¾ï¼Œå¯èƒ½æœ‰äº›åŒå­¦å·²ç»äº†è§£è¿‡äº†ï¼Œé‚£å°±æ˜¯é€šè¿‡è‡ªå¸¦çš„DIï¼Œå³ä½¿ä¸€ä¸ªç±»ä¸­åŒ…å«å¤šä¸ªæ„é€ å‡½æ•°ï¼Œå®ƒä¹Ÿä¼šé€‰æ‹©æœ€ä¼˜çš„ä¸€ä¸ªï¼Œä¹Ÿå°±æ˜¯è¯´è‡ªå¸¦çš„DIå…è®¸ç±»åŒ…å«å¤šä¸ªæ„é€ å‡½æ•°ã€‚åˆ©ç”¨è¿™ä¸ªç‰¹å¾ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Controllerä¸­éªŒè¯ä¸€ä¸‹&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cs&quot;&gt;public class OrderController : Controller
{
    private readonly IOrderService _orderService;
    private readonly IPersonService _personService;

    public OrderController(IOrderService orderService)
    {
        _orderService = orderService;
    }

    public OrderController(IOrderService orderService, IPersonService personService)
    {
        _orderService = orderService;
        _personService = personService;
    }

    public IActionResult Index()
    {
        return View();
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨Controllerä¸­ç¼–å†™äº†ä¸¤ä¸ªæ„é€ å‡½æ•°ï¼Œç†è®ºä¸Šæ¥è¯´è¿™æ˜¯ç¬¦åˆDIç‰¹å¾çš„ï¼Œè¿è¡Œèµ·æ¥æµ‹è¯•ä¸€ä¸‹ï¼Œä¾ç„¶ä¼šæŠ¥é”™InvalidOperationException: Multiple constructors accepting all given argument types have been found in type 'OrderController'. There should only be one applicable constructorã€‚ä»¥ä¸Šç§ç§éƒ½æ˜¯ä¸ºäº†è¯å®ä¸€ä¸ªç»“è®ºï¼Œé»˜è®¤æƒ…å†µä¸‹Controllerå¹¶ä¸ä¼šæ‰˜ç®¡åˆ°IOCå½“ä¸­ã€‚&lt;/p&gt;
&lt;h4 id=&quot;defaultcontrollerfactoryæºç æ¢ç©¶&quot;&gt;DefaultControllerFactoryæºç æ¢ç©¶&lt;/h4&gt;
&lt;p&gt;Â Â Â Â ä¸Šé¢è™½ç„¶æˆ‘ä»¬çœ‹åˆ°äº†ä¸€äº›ç°è±¡ï¼Œèƒ½è¯´æ˜Controlleré»˜è®¤æƒ…å†µä¸‹å¹¶ä¸åœ¨IOCä¸­æ‰˜ç®¡ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰è¶³å¤Ÿçš„è¯´æœåŠ›ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥æŸ¥çœ‹æºç ,è¿™æ˜¯æœ€æœ‰è¯´æœåŠ›çš„ã€‚æˆ‘ä»¬æ‰¾åˆ°Controllerå·¥å‚æ³¨å†Œçš„åœ°æ–¹ï¼Œåœ¨MvcCoreServiceCollectionExtensionsæ‰©å±•ç±»ä¸­[&lt;a href=&quot;https://github.com/dotnet/aspnetcore/blob/v5.0.1/src/Mvc/Mvc.Core/src/DependencyInjection/MvcCoreServiceCollectionExtensions.cs#L186&quot; target=&quot;_blank&quot;&gt;ç‚¹å‡»æŸ¥çœ‹æºç ğŸ‘ˆ&lt;/a&gt;]çš„AddMvcCoreServicesæ–¹æ³•é‡Œ&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cs&quot;&gt;//ç»™IControllerFactoryæ³¨å†Œé»˜è®¤çš„Controllerå·¥å‚ç±»DefaultControllerFactory
//ä¹Ÿæ˜¯Controlleråˆ›å»ºçš„å…¥å£
services.TryAddSingleton&amp;lt;IControllerFactory, DefaultControllerFactory&amp;gt;();
//çœŸæ­£åˆ›å»ºControllerçš„å·¥ä½œç±»DefaultControllerActivator
services.TryAddTransient&amp;lt;IControllerActivator, DefaultControllerActivator&amp;gt;();
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç”±æ­¤æˆ‘ä»¬å¯ä»¥å¾—å‡ºï¼Œé»˜è®¤çš„Controlleråˆ›å»ºå·¥å‚ç±»ä¸ºDefaultControllerFactoryï¼Œé‚£ä¹ˆæˆ‘ä»¬ç›´æ¥æ‰¾åˆ°æºç ä½ç½®[&lt;a href=&quot;https://github.com/dotnet/aspnetcore/blob/v5.0.1/src/Mvc/Mvc.Core/src/Controllers/DefaultControllerFactory.cs&quot; target=&quot;_blank&quot;&gt;ç‚¹å‡»æŸ¥çœ‹æºç ğŸ‘ˆ&lt;/a&gt;],&lt;br/&gt;ä¸ºäº†æ–¹ä¾¿é˜…è¯»ï¼Œç²¾ç®€ä¸€ä¸‹æºç å¦‚ä¸‹æ‰€ç¤º&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cs&quot;&gt;internal class DefaultControllerFactory : IControllerFactory
{
    //çœŸæ­£åˆ›å»ºControllerçš„å·¥ä½œè€…
    private readonly IControllerActivator _controllerActivator;
    private readonly IControllerPropertyActivator[] _propertyActivators;

    public DefaultControllerFactory(
        IControllerActivator controllerActivator,
        IEnumerable&amp;lt;IControllerPropertyActivator&amp;gt; propertyActivators)
    {
        _controllerActivator = controllerActivator;
        _propertyActivators = propertyActivators.ToArray();
    }

    /// &amp;lt;summary&amp;gt;
    /// åˆ›å»ºControllerå®ä¾‹çš„æ–¹æ³•
    /// &amp;lt;/summary&amp;gt;
    public object CreateController(ControllerContext context)
    {
        //åˆ›å»ºControllerå®ä¾‹çš„å…·ä½“æ–¹æ³•(è¿™æ˜¯å…³é”®æ–¹æ³•)
        var controller = _controllerActivator.Create(context);
        foreach (var propertyActivator in _propertyActivators)
        {
            propertyActivator.Activate(context, controller);
        }
        return controller;
    }

    /// &amp;lt;summary&amp;gt;
    /// é‡Šæ”¾Controllerå®ä¾‹çš„æ–¹æ³•
    /// &amp;lt;/summary&amp;gt;
    public void ReleaseController(ControllerContext context, object controller)
    {
        _controllerActivator.Release(context, controller);
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç”¨è¿‡ä¸Šé¢çš„æºç å¯çŸ¥ï¼ŒçœŸæ­£åˆ›å»ºControllerçš„åœ°æ–¹åœ¨_controllerActivator.Createæ–¹æ³•ä¸­ï¼Œé€šè¿‡ä¸Šé¢çš„æºç å¯çŸ¥ä¸ºIControllerActivatoré»˜è®¤æ³¨å†Œçš„æ˜¯DefaultControllerActivatorç±»ï¼Œç›´æ¥æ‰¾åˆ°æºç ä½ç½®[&lt;a href=&quot;https://github.com/dotnet/aspnetcore/blob/v5.0.1/src/Mvc/Mvc.Core/src/Controllers/DefaultControllerActivator.cs&quot; target=&quot;_blank&quot;&gt;ç‚¹å‡»æŸ¥çœ‹æºç ğŸ‘ˆ&lt;/a&gt;],æˆ‘ä»¬ç»§ç»­ç®€åŒ–ä¸€ä¸‹æºç å¦‚ä¸‹æ‰€ç¤º&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cs&quot;&gt;internal class DefaultControllerActivator : IControllerActivator
{
    private readonly ITypeActivatorCache _typeActivatorCache;

    public DefaultControllerActivator(ITypeActivatorCache typeActivatorCache)
    {
        _typeActivatorCache = typeActivatorCache;
    }

    /// &amp;lt;summary&amp;gt;
    /// Controllerå®ä¾‹çš„åˆ›å»ºæ–¹æ³•
    /// &amp;lt;/summary&amp;gt;
    public object Create(ControllerContext controllerContext)
    {
        //è·å–Controllerç±»å‹ä¿¡æ¯
        var controllerTypeInfo = controllerContext.ActionDescriptor.ControllerTypeInfo;
        //è·å–ServiceProvider
        var serviceProvider = controllerContext.HttpContext.RequestServices;
        //åˆ›å»ºcontrollerå®ä¾‹
        return _typeActivatorCache.CreateInstance&amp;lt;object&amp;gt;(serviceProvider, controllerTypeInfo.AsType());
    }

    /// &amp;lt;summary&amp;gt;
    /// é‡Šæ”¾Controllerå®ä¾‹
    /// &amp;lt;/summary&amp;gt;
    public void Release(ControllerContext context, object controller)
    {
        //å¦‚æœcontrollerå®ç°äº†IDisposableæ¥å£ï¼Œé‚£ä¹ˆReleaseçš„æ—¶å€™ä¼šè‡ªåŠ¨è°ƒç”¨Controllerçš„Disposeæ–¹æ³•
        //å¦‚æœæˆ‘ä»¬åœ¨Controllerä¸­å­˜åœ¨éœ€è¦é‡Šæ”¾æˆ–è€…å…³é—­çš„æ“ä½œï¼Œå¯ä»¥å†Controllerçš„Disposeæ–¹æ³•ä¸­ç»Ÿä¸€é‡Šæ”¾
        if (controller is IDisposable disposable)
        {
            disposable.Dispose();
        }
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é€šè¿‡ä¸Šé¢çš„ä»£ç æˆ‘ä»¬ä¾ç„¶è¦ç»§ç»­æ·±å…¥åˆ°ITypeActivatorCacheå®ç°ä¸­å»å¯»æ‰¾ç­”æ¡ˆï¼Œé€šè¿‡æŸ¥çœ‹MvcCoreServiceCollectionExtensionsç±»çš„AddMvcCoreServicesæ–¹æ³•æºç æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°å¦‚ä¸‹ä¿¡æ¯&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cs&quot;&gt;services.TryAddSingleton&amp;lt;ITypeActivatorCache, TypeActivatorCache&amp;gt;();
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æœ‰äº†è¿™ä¸ªä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ‰¾åˆ°TypeActivatorCacheç±»çš„æºç [&lt;a href=&quot;https://github.com/dotnet/aspnetcore/blob/v5.0.1/src/Mvc/Mvc.Core/src/Infrastructure/TypeActivatorCache.cs&quot; target=&quot;_blank&quot;&gt;ç‚¹å‡»æŸ¥çœ‹æºç ğŸ‘ˆ&lt;/a&gt;]ä»£ç å¹¶ä¸å¤šï¼Œå¤§è‡´å¦‚ä¸‹æ‰€ç¤º&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cs&quot;&gt;internal class TypeActivatorCache : ITypeActivatorCache
{
    //åˆ›å»ºObjectFactoryçš„å§”æ‰˜
    private readonly Func&amp;lt;Type, ObjectFactory&amp;gt; _createFactory =
        (type) =&amp;gt; ActivatorUtilities.CreateFactory(type, Type.EmptyTypes);
    //Controllerç±»å‹å’Œå¯¹åº”åˆ›å»ºControllerå®ä¾‹çš„ObjectFactoryå®ä¾‹çš„ç¼“å­˜
    private readonly ConcurrentDictionary&amp;lt;Type, ObjectFactory&amp;gt; _typeActivatorCache =
           new ConcurrentDictionary&amp;lt;Type, ObjectFactory&amp;gt;();

    /// &amp;lt;summary&amp;gt;
    /// çœŸæ­£åˆ›å»ºå®ä¾‹çš„åœ°æ–¹
    /// &amp;lt;/summary&amp;gt;
    public TInstance CreateInstance&amp;lt;TInstance&amp;gt;(
        IServiceProvider serviceProvider,
        Type implementationType)
    {
        //çœŸæ­£åˆ›å»ºçš„æ“ä½œæ˜¯createFactory
        //é€šè¿‡Controllerç±»å‹åœ¨ConcurrentDictionaryç¼“å­˜ä¸­è·å¾—ObjectFactory
        //è€ŒObjectFactoryå®ä¾‹ç”±ActivatorUtilities.CreateFactoryæ–¹æ³•åˆ›å»ºçš„
        var createFactory = _typeActivatorCache.GetOrAdd(implementationType, _createFactory);
        //è¿”å›åˆ›å»ºå®ä¾‹
        return (TInstance)createFactory(serviceProvider, arguments: null);
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é€šè¿‡ä¸Šé¢ç±»çš„ä»£ç &lt;span&gt;æˆ‘ä»¬å¯ä»¥æ¸…æ™°çš„å¾—å‡ºä¸€ä¸ªç»“è®ºï¼Œé»˜è®¤æƒ…å†µä¸‹Controllerå®ä¾‹æ˜¯ç”±ObjectFactoryåˆ›å»ºå‡ºæ¥çš„ï¼Œè€ŒObjectFactoryå®ä¾‹æ˜¯ç”±ActivatorUtilitiesçš„CreateFactoryåˆ›å»ºå‡ºæ¥,æ‰€ä»¥Controllerå®ä¾‹æ¯æ¬¡éƒ½æ˜¯ç”±ObjectFactoryåˆ›å»ºè€Œæ¥ï¼Œå¹¶éæ³¨å†Œåˆ°IOCå®¹å™¨ä¸­ã€‚&lt;/span&gt;å¹¶ä¸”æˆ‘ä»¬è¿˜å¯ä»¥å¾—åˆ°ä¸€ä¸ªç»“è®ºObjectFactoryåº”è¯¥æ˜¯ä¸€ä¸ªå§”æ‰˜ï¼Œæˆ‘ä»¬æ‰¾åˆ°ObjectFactoryå®šä¹‰çš„åœ°æ–¹[&lt;a href=&quot;https://github.com/dotnet/aspnetcore/blob/v5.0.1/src/Shared/ActivatorUtilities/ObjectFactory.cs&quot; target=&quot;_blank&quot;&gt;ç‚¹å‡»æŸ¥çœ‹æºç ğŸ‘ˆ&lt;/a&gt;]&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cs&quot;&gt;delegate object ObjectFactory(IServiceProvider serviceProvider, object[] arguments);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™ä¸ªç¡®å®å¦‚æˆ‘ä»¬çŒœæƒ³çš„é‚£èˆ¬ï¼Œè¿™ä¸ªå§”æ‰˜ä¼šé€šè¿‡IServiceProviderå®ä¾‹å»æ„å»ºç±»å‹çš„å®ä¾‹ï¼Œé€šè¿‡ä¸Šè¿°æºç ç›¸å…³çš„æè¿°æˆ‘ä»¬ä¼šäº§ç”Ÿä¸€ä¸ªç–‘é—®ï¼Œæ—¢ç„¶Controllerå®ä¾‹å¹¶éç”±IOCå®¹å™¨æ‰˜ç®¡ï¼Œå®ƒç”±ObjectFactoryåˆ›å»ºè€Œæ¥ï¼Œä½†æ˜¯ObjectFactoryå®ä¾‹åˆæ˜¯ç”±ActivatorUtilitiesæ„å»ºçš„ï¼Œé‚£ä¹ˆç”Ÿäº§å¯¹è±¡çš„æ ¸å¿ƒä¹Ÿå°±åœ¨ActivatorUtilitiesç±»ä¸­ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥æ¢ç©¶ä¸€ä¸‹ActivatorUtilitiesçš„ç¥ç§˜é¢çº±ã€‚&lt;/p&gt;
&lt;h4 id=&quot;activatorutilitiesç±»çš„æ¢ç©¶&quot;&gt;ActivatorUtilitiesç±»çš„æ¢ç©¶&lt;/h4&gt;
&lt;p&gt;Â Â Â Â ä¹¦æ¥ä¸Šé¢ï¼Œæˆ‘ä»¬çŸ¥é“äº†ActivatorUtilitiesç±»æ˜¯åˆ›å»ºControllerå®ä¾‹æœ€åº•å±‚çš„åœ°æ–¹ï¼Œé‚£ä¹ˆActivatorUtilitiesåˆ°åº•å’Œå®¹å™¨æ˜¯å•¥å…³ç³»ï¼Œå› ä¸ºæˆ‘ä»¬çœ‹åˆ°äº†ActivatorUtilitiesåˆ›å»ºå®ä¾‹éœ€è¦ä¾èµ–ServiceProvider,ä¸€åˆ‡éƒ½è¦ä»æ‰¾åˆ°ActivatorUtilitiesç±»çš„æºç å¼€å§‹ã€‚æˆ‘ä»¬æœ€åˆæ¥è§¦è¿™ä¸ªç±»çš„åœ°æ–¹åœ¨äºå®ƒé€šè¿‡CreateFactoryæ–¹æ³•åˆ›å»ºäº†ObjectFactoryå®ä¾‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä»è¿™ä¸ªåœ°æ–¹å¼€å§‹ï¼Œæ‰¾åˆ°æºç ä½ç½®[&lt;a href=&quot;https://github.com/dotnet/aspnetcore/blob/v5.0.1/src/Shared/ActivatorUtilities/ActivatorUtilities.cs#L107&quot; target=&quot;_blank&quot;&gt;ç‚¹å‡»æŸ¥çœ‹æºç ğŸ‘ˆ&lt;/a&gt;]å®ç°å¦‚ä¸‹&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cs&quot;&gt;public static ObjectFactory CreateFactory(Type instanceType, Type[] argumentTypes)
{
    //æŸ¥æ‰¾instanceTypeçš„æ„é€ å‡½æ•°
    //æ‰¾åˆ°æ„é€ ä¿¡æ¯ConstructorInfo
    //å¾—åˆ°ç»™å®šç±»å‹ä¸æŸ¥æ‰¾ç±»å‹instanceTypeæ„é€ å‡½æ•°çš„æ˜ å°„å…³ç³»
    FindApplicableConstructor(instanceType, argumentTypes, out ConstructorInfo constructor, out int?[] parameterMap);
    //æ„å»ºIServiceProviderç±»å‹å‚æ•°
    var provider = Expression.Parameter(typeof(IServiceProvider), &quot;provider&quot;);
    //æ„å»ºç»™å®šç±»å‹å‚æ•°æ•°ç»„å‚æ•°
    var argumentArray = Expression.Parameter(typeof(object[]), &quot;argumentArray&quot;);
    //é€šè¿‡æ„é€ ä¿¡æ¯ã€æ„é€ å‚æ•°å¯¹åº”å…³ç³»ã€å®¹å™¨å’Œç»™å®šç±»å‹æ„å»ºè¡¨è¾¾å¼æ ‘Body
    var factoryExpressionBody = BuildFactoryExpression(constructor, parameterMap, provider, argumentArray);
    //æ„å»ºlambda
    var factoryLamda = Expression.Lambda&amp;lt;Func&amp;lt;IServiceProvider, object[], object&amp;gt;&amp;gt;(
        factoryExpressionBody, provider, argumentArray);
    var result = factoryLamda.Compile();
    //è¿”å›æ‰§è¡Œç»“æœ
    return result.Invoke;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ActivatorUtilitiesç±»çš„CreateFactoryæ–¹æ³•ä»£ç è™½ç„¶æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯å®ƒæ¶‰åŠåˆ°è°ƒç”¨äº†å…¶ä»–æ–¹æ³•ï¼Œç”±äºåµŒå¥—çš„æ¯”è¾ƒæ·±ä»£ç æ¯”è¾ƒå¤šï¼Œè€Œä¸”ä¸æ˜¯æœ¬æ–‡è®²è¿°çš„é‡ç‚¹ï¼Œæˆ‘ä»¬å°±ä¸å†è¿™é‡Œç»†è¯´äº†ï¼Œæˆ‘ä»¬å¯ä»¥å¤§æ¦‚çš„æè¿°ä¸€ä¸‹å®ƒçš„å·¥ä½œæµç¨‹ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;é¦–å…ˆåœ¨ç»™å®šçš„ç±»å‹é‡ŒæŸ¥æ‰¾åˆ°åˆé€‚çš„æ„é€ å‡½æ•°ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºæŸ¥æ‰¾Controllerçš„æ„é€ å‡½æ•°ã€‚&lt;/li&gt;
&lt;li&gt;ç„¶åå¾—åˆ°æ„é€ ä¿¡æ¯ï¼Œå¹¶å¾—åˆ°æ„é€ å‡½æ•°çš„å‚æ•°ä¸ç»™å®šç±»å‹å‚æ•°çš„å¯¹åº”å…³ç³»&lt;/li&gt;
&lt;li&gt;é€šè¿‡æ„é€ ä¿¡æ¯å’Œæ„é€ å‚æ•°çš„å¯¹åº”å…³ç³»ï¼Œåœ¨IServiceProviderå¾—åˆ°å¯¹åº”ç±»å‹çš„å®ä¾‹ä¸ºæ„é€ å‡½æ•°èµ‹å€¼&lt;/li&gt;
&lt;li&gt;æœ€åç»è¿‡ä¸Šé¢çš„æ“ä½œé€šè¿‡åˆå§‹åŒ–æŒ‡å®šçš„æ„é€ å‡½æ•°æ¥åˆ›å»ºç»™å®šControllerç±»å‹çš„å®ä¾‹&lt;br/&gt;ç»¼ä¸Šè¿°çš„ç›¸å…³æ­¥éª¤ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€ä¸ªç»“è®ºï¼ŒControllerå®ä¾‹çš„åˆå§‹åŒ–æ˜¯é€šè¿‡éå†Controllerç±»å‹æ„é€ å‡½æ•°é‡Œçš„å‚æ•°ï¼Œç„¶åæ ¹æ®æ„é€ å‡½æ•°æ¯ä¸ªå‚æ•°çš„ç±»å‹åœ¨IServiceProvideræŸ¥æ‰¾å·²ç»æ³¨å†Œåˆ°å®¹å™¨ä¸­ç›¸å…³çš„ç±»å‹å®ä¾‹ï¼Œæœ€ç»ˆåˆå§‹åŒ–å¾—åˆ°çš„Controllerå®ä¾‹ã€‚è¿™å°±æ˜¯åœ¨IServiceProviderå¾—åˆ°éœ€è¦çš„ä¾èµ–å…³ç³»ï¼Œç„¶ååˆ›å»ºè‡ªå·±çš„å®ä¾‹ï¼Œå®ƒå†…éƒ¨æ˜¯ä½¿ç”¨çš„è¡¨è¾¾å¼æ ‘æ¥å®Œæˆçš„è¿™ä¸€åˆ‡ï¼Œå¯ä»¥ç†è§£ä¸ºæ›´é«˜æ•ˆçš„åå°„æ–¹å¼ã€‚&lt;br/&gt;å…³äºActivatorUtilitiesç±»è¿˜åŒ…å«äº†å…¶ä»–æ¯”è¾ƒå®ç”¨çš„æ–¹æ³•ï¼Œæ¯”å¦‚CreateInstanceæ–¹æ³•&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-cs&quot;&gt;public static T CreateInstance&amp;lt;T&amp;gt;(IServiceProvider provider, params object[] parameters)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å®ƒå¯ä»¥é€šè¿‡æ„é€ æ³¨å…¥çš„æ–¹å¼åˆ›å»ºæŒ‡å®šç±»å‹Tçš„å®ä¾‹ï¼Œå…¶ä¸­æ„é€ å‡½æ•°é‡Œå…·ä½“çš„å‚æ•°å®ä¾‹æ˜¯é€šè¿‡åœ¨IServiceProviderå®ä¾‹é‡Œè·å–åˆ°çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬æˆ‘ä»¬æœ‰è¿™ä¹ˆä¸€ä¸ªç±»&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cs&quot;&gt;public class OrderController 
{
    private readonly IOrderService _orderService;
    private readonly IPersonService _personService;

    public OrderController(IOrderService orderService, IPersonService personService)
    {
        _orderService = orderService;
        _personService = personService;
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å…¶ä¸­å®ƒæ‰€ä¾èµ–çš„IOrderServiceå’ŒIPersonServiceå®ä¾‹æ˜¯æ³¨å†Œåˆ°IOCå®¹å™¨ä¸­çš„&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cs&quot;&gt;IServiceCollection services = new ServiceCollection()
 .AddScoped&amp;lt;IPersonService, PersonService&amp;gt;()
 .AddScoped&amp;lt;IOrderService, OrderService&amp;gt;();
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç„¶åä½ æƒ³è·å–åˆ°OrderControllerçš„å®ä¾‹ï¼Œä½†æ˜¯å®ƒåªåŒ…å«ä¸€ä¸ªæœ‰å‚æ„é€ å‡½æ•°ï¼Œä½†æ˜¯æ„é€ å‡½æ•°çš„å‚æ•°éƒ½ä»¥æ³¨å†Œåˆ°IOCå®¹å™¨ä¸­ã€‚å½“å­˜åœ¨è¿™ç§åœºæ™¯ä½ ä¾¿å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å¾—åˆ°ä½ æƒ³è¦çš„ç±»å‹å®ä¾‹ï¼Œå¦‚ä¸‹æ‰€ç¤º&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cs&quot;&gt;IServiceProvider serviceProvider = services.BuildServiceProvider();
OrderController orderController = ActivatorUtilities.CreateInstance&amp;lt;OrderController&amp;gt;(serviceProvider);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å³ä½¿ä½ çš„ç±»å‹OrderControllerå¹¶æ²¡æœ‰æ³¨å†Œåˆ°IOCå®¹å™¨ä¸­ï¼Œä½†æ˜¯å®ƒçš„ä¾èµ–éƒ½åœ¨å®¹å™¨ä¸­ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡æ„é€ æ³¨å…¥çš„æ–¹å¼å¾—åˆ°ä½ æƒ³è¦çš„å®ä¾‹ã€‚æ€»çš„æ¥è¯´ActivatorUtilitiesé‡Œçš„æ–¹æ³•è¿˜æ˜¯æ¯”è¾ƒå®ç”¨çš„ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è‡ªè¡Œå°è¯•ä¸€ä¸‹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æŸ¥çœ‹&lt;a href=&quot;https://github.com/dotnet/aspnetcore/blob/v5.0.1/src/Shared/ActivatorUtilities/ActivatorUtilities.cs&quot; target=&quot;_blank&quot;&gt;ActivatorUtilitiesæºç &lt;/a&gt;çš„æ–¹å¼äº†è§£å®ƒçš„å·¥ä½œåŸç†ã€‚&lt;/p&gt;
&lt;h4 id=&quot;addcontrollersasservicesæ–¹æ³•&quot;&gt;AddControllersAsServicesæ–¹æ³•&lt;/h4&gt;
&lt;p&gt;Â Â Â Â ä¸Šé¢æˆ‘ä»¬ä¸»è¦æ˜¯è®²è§£äº†é»˜è®¤æƒ…å†µä¸‹Controllerå¹¶ä¸æ˜¯æ‰˜ç®¡åˆ°IOCå®¹å™¨ä¸­çš„ï¼Œå®ƒåªæ˜¯è¡¨ç°å‡ºæ¥çš„è®©ä½ ä»¥ä¸ºå®ƒæ˜¯åœ¨IOCå®¹å™¨ä¸­ï¼Œå› ä¸ºå®ƒå¯ä»¥é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ç›¸å…³å®ä¾‹ï¼Œè¿™ä¸»è¦æ˜¯ActivatorUtilitiesç±»çš„åŠŸåŠ³ã€‚è¯´äº†è¿™ä¹ˆå¤šControllerå®ä¾‹åˆ°åº•å¯ä¸å¯ä»¥æ³¨å†Œåˆ°IOCå®¹å™¨ä¸­ï¼Œè®©å®ƒæˆä¸ºçœŸæ­£å—åˆ°IOCå®¹å™¨çš„æ‰˜ç®¡è€…ã€‚è¦è§£å†³è¿™ä¸ªï¼Œå¿…é¡»è¦æ»¡è¶³ä¸¤ç‚¹æ¡ä»¶&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;é¦–å…ˆï¼Œéœ€è¦å°†Controlleræ³¨å†Œåˆ°IOCå®¹å™¨ä¸­ï¼Œä½†æ˜¯ä»…ä»…è¿™æ ·è¿˜ä¸å¤Ÿï¼Œå› ä¸ºControlleræ˜¯ç”±ControllerFactoryåˆ›å»ºè€Œæ¥&lt;/li&gt;
&lt;li&gt;å…¶æ¬¡ï¼Œæˆ‘ä»¬è¦æ”¹é€ ControllerFactoryç±»ä¸­åˆ›å»ºControllerå®ä¾‹çš„åœ°æ–¹è®©å®ƒä»å®¹å™¨ä¸­è·å–Controllerå®ä¾‹ï¼Œè¿™æ ·å°±è§£å†³äº†æ‰€æœ‰çš„é—®é¢˜&lt;br/&gt;å¦‚æœæˆ‘ä»¬è‡ªå·±å»å®ç°å°†Controlleræ‰˜ç®¡åˆ°IOCå®¹å™¨ä¸­ï¼Œå°±éœ€è¦æ»¡è¶³ä»¥ä¸Šä¸¤ä¸ªæ“ä½œä¸€ä¸ªæ˜¯è¦å°†Controlleræ”¾å…¥å®¹å™¨ï¼Œç„¶åè®©åˆ›å»ºControllerçš„åœ°æ–¹ä»IOCå®¹å™¨ä¸­ç›´æ¥è·å–Controllerå®ä¾‹ã€‚åº†å¹¸çš„æ˜¯ï¼Œå¾®è½¯å¸®æˆ‘ä»¬å°è£…äº†ä¸€ä¸ªç›¸å…³çš„æ–¹æ³•ï¼Œå®ƒå¯ä»¥å¸®æˆ‘ä»¬è§£å†³å°†Controlleræ‰˜ç®¡åˆ°IOCå®¹å™¨çš„é—®é¢˜ï¼Œå®ƒçš„ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹æ‰€ç¤º&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-cs&quot;&gt;services.AddMvc().AddControllersAsServices();
//æˆ–å…¶ä»–æ–¹å¼ï¼Œè¿™å–å†³äºä½ æ„å»ºçš„Webé¡¹ç›®çš„ç”¨é€”å¯ä»¥æ˜¯WebApiã€Mvcã€RazorPageç­‰
//services.AddMvcCore().AddControllersAsServices();
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç›¸ä¿¡å¤§å®¶éƒ½çœ‹åˆ°äº†ï¼Œç„æœºå°±åœ¨AddControllersAsServicesæ–¹æ³•ä¸­ï¼Œä½†æ˜¯å®ƒå­˜åœ¨äºMvcCoreMvcBuilderExtensionsç±»å’ŒMvcCoreMvcCoreBuilderExtensionsç±»ä¸­ï¼Œä¸è¿‡é—®é¢˜ä¸å¤§ï¼Œå› ä¸ºå®ƒä»¬çš„ä»£ç æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚åªæ˜¯å› ä¸ºä½ å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼æ„å»ºWebé¡¹ç›®æ¯”å¦‚AddMvcæˆ–è€…AddMvcCoreï¼ŒåºŸè¯ä¸å¤šè¯´ç›´æ¥ä¸Šä»£ç [&lt;a href=&quot;https://github.com/dotnet/aspnetcore/blob/v5.0.1/src/Mvc/Mvc.Core/src/DependencyInjection/MvcCoreMvcBuilderExtensions.cs#L155&quot; target=&quot;_blank&quot;&gt;ç‚¹å‡»æŸ¥çœ‹æºç ğŸ‘ˆ&lt;/a&gt;]&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cs&quot;&gt;public static IMvcBuilder AddControllersAsServices(this IMvcBuilder builder)
{
    if (builder == null)
    {
        throw new ArgumentNullException(nameof(builder));
    }
    var feature = new ControllerFeature();
    builder.PartManager.PopulateFeature(feature);
    //ç¬¬ä¸€å°†Controllerå®ä¾‹æ·»åŠ åˆ°IOCå®¹å™¨ä¸­
    foreach (var controller in feature.Controllers.Select(c =&amp;gt; c.AsType()))
    {
        //æ³¨å†Œçš„å£°æ˜å‘¨æœŸæ˜¯Transient
        builder.Services.TryAddTransient(controller, controller);
    }
    //ç¬¬äºŒæ›¿æ¢æ‰åŸæœ¬DefaultControllerActivatorçš„ä¸ºServiceBasedControllerActivator
    builder.Services.Replace(ServiceDescriptor.Transient&amp;lt;IControllerActivator, ServiceBasedControllerActivator&amp;gt;());
    return builder;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç¬¬ä¸€ç‚¹æ²¡é—®é¢˜é‚£å°±æ˜¯å°†Controllerå®ä¾‹æ·»åŠ åˆ°IOCå®¹å™¨ä¸­ï¼Œç¬¬äºŒç‚¹å®ƒæ›¿æ¢æ‰äº†DefaultControllerActivatorä¸ºä¸ºServiceBasedControllerActivatorã€‚é€šè¿‡ä¸Šé¢æˆ‘ä»¬è®²è¿°çš„æºç äº†è§£åˆ°DefaultControllerActivatoræ˜¯é»˜è®¤æä¾›Controllerå®ä¾‹çš„åœ°æ–¹æ˜¯è·å–Controllerå®ä¾‹çš„æ ¸å¿ƒæ‰€åœ¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬çœ‹çœ‹ServiceBasedControllerActivatorä¸DefaultControllerActivatoråˆ°åº•æœ‰ä½•ä¸åŒï¼Œç›´æ¥è´´å‡ºä»£ç [&lt;a href=&quot;https://github.com/dotnet/aspnetcore/blob/v5.0.1/src/Mvc/Mvc.Core/src/Controllers/ServiceBasedControllerActivator.cs&quot; target=&quot;_blank&quot;&gt;ç‚¹å‡»æŸ¥çœ‹æºç ğŸ‘ˆ&lt;/a&gt;]&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cs&quot;&gt;public class ServiceBasedControllerActivator : IControllerActivator
{
    public object Create(ControllerContext actionContext)
    {
        if (actionContext == null)
        {
            throw new ArgumentNullException(nameof(actionContext));
        }
        //è·å–Controllerç±»å‹
        var controllerType = actionContext.ActionDescriptor.ControllerTypeInfo.AsType();
        //é€šè¿‡Controllerç±»å‹åœ¨å®¹å™¨ä¸­è·å–å®ä¾‹
        return actionContext.HttpContext.RequestServices.GetRequiredService(controllerType);
    }

    public virtual void Release(ControllerContext context, object controller)
    {
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Â Â Â Â ç›¸ä¿¡å¤§å®¶å¯¹ä¸Šé¢çš„ä»£ç ä¸€ç›®äº†ç„¶äº†ï¼Œå’Œæˆ‘ä»¬ä¸Šé¢æè¿°çš„ä¸€æ ·ï¼Œå°†åˆ›å»ºControllerå®ä¾‹çš„åœ°æ–¹æ”¹é€ äº†åœ¨å®¹å™¨ä¸­è·å–çš„æ–¹å¼ã€‚ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰æ³¨æ„åˆ°ServiceBasedControllerActivatorçš„Releaseçš„æ–¹æ³•å±…ç„¶æ²¡æœ‰å®ç°ï¼Œè¿™å¹¶ä¸æ˜¯æˆ‘æ²¡æœ‰ç²˜è´´å‡ºæ¥ï¼Œç¡®å®æ˜¯æ²¡æœ‰ä»£ç ï¼Œä¹‹å‰æˆ‘ä»¬çœ‹åˆ°çš„DefaultControllerActivatorå¯æ˜¯æœ‰è°ƒç”¨Controllerçš„Disposedçš„æ–¹æ³•ï¼Œè¿™é‡Œå´å•¥ä¹Ÿæ²¡æœ‰ã€‚ç›¸ä¿¡èªæ˜çš„ä½ å·²ç»æƒ³åˆ°äº†ï¼Œå› ä¸ºControllerå·²ç»æ‰˜ç®¡åˆ°äº†IOCå®¹å™¨ä¸­ï¼Œæ‰€ä»¥ä»–çš„ç”Ÿå‘½åŠå…¶ç›¸å…³é‡Šæ”¾éƒ½æ˜¯ç”±IOCå®¹å™¨å®Œæˆçš„ï¼Œæ‰€ä»¥è¿™é‡Œä¸éœ€è¦ä»»ä½•æ“ä½œã€‚&lt;br/&gt;Â Â Â Â æˆ‘ä»¬ä¸Šé¢è¿˜çœ‹åˆ°äº†æ³¨å†ŒControllerå®ä¾‹çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯TryAddTransientæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯æ¬¡éƒ½ä¼šåˆ›å»ºControllerå®ä¾‹ï¼Œè‡³äºä¸ºä»€ä¹ˆï¼Œæˆ‘æƒ³å¤§æ¦‚æ˜¯å› ä¸ºæ¯æ¬¡è¯·æ±‚éƒ½å…¶å®åªä¼šéœ€è¦ä¸€ä¸ªControllerå®ä¾‹ï¼Œå†µä¸”EFCoreçš„æ³¨å†Œæ–¹å¼å®˜æ–¹å»ºè®®ä¹Ÿæ˜¯Scopeçš„ï¼Œè€Œè¿™é‡Œçš„Scopeæ­£æ˜¯å¯¹åº”çš„ä¸€æ¬¡Controllerè¯·æ±‚ã€‚åœ¨åŠ ä¸Šè‡ªå¸¦çš„IOCä¼šæå‡ä¾èµ–ç±»å‹çš„å£°æ˜å‘¨æœŸï¼Œå¦‚æœå°†Controlleræ³¨å†Œä¸ºå•ä¾‹çš„è¯å¦‚æœä½¿ç”¨äº†EFCoreé‚£ä¹ˆå®ƒä¹Ÿä¼šè¢«æå‡ä¸ºå•ä¾‹ï¼Œè¿™æ ·ä¼šå­˜åœ¨å¾ˆå¤§çš„é—®é¢˜ã€‚ä¹Ÿè®¸æ­£æ˜¯åŸºäºè¿™ä¸ªåŸå› é»˜è®¤æ‰å°†Controlleræ³¨å†Œä¸ºTransientç±»å‹çš„ï¼Œå½“ç„¶è¿™å¹¶ä¸ä»£è¡¨åªèƒ½æ³¨å†Œä¸ºTransientç±»å‹çš„ï¼Œå¦‚æœä½ ä¸ä½¿ç”¨ç±»ä¼¼EFCoreè¿™ç§éœ€è¦ä½œç”¨åŸŸä¸ºScopeçš„æœåŠ¡çš„æ—¶å€™ï¼Œè€Œä¸”ä¿è¯ä½¿ç”¨çš„ä¸»é”®éƒ½å¯ä»¥ä½¿ç”¨å•ä¾‹çš„è¯ï¼Œå®Œå…¨å¯ä»¥å°†Controlleræ³¨å†Œä¸ºåˆ«çš„ç”Ÿå‘½å‘¨æœŸï¼Œå½“ç„¶è¿™ç§æ–¹å¼ä¸ªäººä¸æ˜¯å¾ˆå»ºè®®ã€‚&lt;/p&gt;
&lt;h4 id=&quot;controllerç»“åˆautofac&quot;&gt;Controllerç»“åˆAutofac&lt;/h4&gt;
&lt;p&gt;Â Â Â Â æœ‰æ—¶å€™å¤§å®¶å¯èƒ½ä¼šç»“åˆAutofacä¸€èµ·ä½¿ç”¨ï¼ŒAutofacç¡®å®æ˜¯ä¸€æ¬¾éå¸¸ä¼˜ç§€çš„IOCæ¡†æ¶ï¼Œå®ƒå®ƒæ”¯æŒå±æ€§å’Œæ„é€ ä¸¤ç§æ–¹å¼æ³¨å…¥ï¼Œå…³äºAutofacæ‰˜ç®¡è‡ªå¸¦IOCçš„åŸç†å’±ä»¬åœ¨ä¹‹å‰çš„æ–‡ç« &lt;a href=&quot;https://www.cnblogs.com/wucy/p/13268296.html#%E5%85%B3%E4%BA%8Euseserviceproviderfactory&quot; target=&quot;_blank&quot;&gt;æµ…è°ˆ.Net Core DependencyInjectionæºç æ¢ç©¶&lt;/a&gt;ä¸­æ›¾è¯¦ç»†çš„è®²è§£è¿‡ï¼Œè¿™é‡Œå’±ä»¬å°±ä¸è¿‡å¤šçš„æè¿°äº†ï¼Œå’±ä»¬ä»Šå¤©è¦è¯´çš„æ˜¯Autofacå’ŒControllerçš„ç»“åˆã€‚å¦‚æœä½ æƒ³ä¿æŒå’ŒåŸæœ‰çš„IOCä¸€è‡´çš„ä½¿ç”¨ä¹ æƒ¯ï¼Œå³åªä½¿ç”¨æ„é€ æ³¨å…¥çš„è¯ï¼Œä½ åªéœ€è¦å®Œæˆä¸¤æ­¥å³å¯&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;é¦–å…ˆå°†é»˜è®¤çš„IOCå®¹å™¨æ›¿æ¢ä¸ºAutofacï¼Œå…·ä½“æ“ä½œä¹Ÿéå¸¸ç®€å•ï¼Œå¦‚ä¸‹æ‰€ç¤º&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-cs&quot;&gt;public static IHostBuilder CreateHostBuilder(string[] args) =&amp;gt;
            Host.CreateDefaultBuilder(args)
              .ConfigureWebHostDefaults(webBuilder =&amp;gt;
              {
                  webBuilder.UseStartup&amp;lt;Startup&amp;gt;();
              })
              //åªéœ€è¦åœ¨è¿™é‡Œè®¾ç½®ServiceProviderFactoryä¸ºAutofacServiceProviderFactoryå³å¯
              .UseServiceProviderFactory(new AutofacServiceProviderFactory());
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;ç„¶åå°±æ˜¯å’±ä»¬ä¹‹å‰è¯´çš„ï¼Œè¦å°†Controlleræ”¾å…¥å®¹å™¨ä¸­ï¼Œç„¶åä¿®æ”¹ç”Ÿäº§Controllerå®ä¾‹çš„ControllerFactoryçš„æ“ä½œä¸ºåœ¨å®¹å™¨ä¸­è·å–ï¼Œå½“ç„¶è¿™ä¸€æ­¥å¾®è½¯å·²ç»ä¸ºæˆ‘ä»¬å°è£…äº†ä¾¿æ·çš„æ–¹æ³•&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-cs&quot;&gt;services.AddMvc().AddControllersAsServices();
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åªéœ€è¦é€šè¿‡ä¸Šé¢ç®€å•å¾—ä¸¤æ­¥ï¼Œæ—¢å¯ä»¥å°†Controlleræ‰˜ç®¡åˆ°Autofacå®¹å™¨ä¸­ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬è¯´è¿‡äº†Autofacè¿˜æ”¯æŒå±æ€§æ³¨å…¥ï¼Œä½†æ˜¯é»˜è®¤çš„æ–¹å¼åªæ”¯æŒæ„é€ æ³¨å…¥çš„æ–¹å¼ï¼Œé‚£ä¹ˆæ€ä¹ˆè®©Controlleræ”¯æŒå±æ€§æ³¨å…¥å‘¢ï¼Ÿæˆ‘ä»¬è¿˜å¾—ä»æœ€æ ¹æœ¬çš„å‡ºå‘ï¼Œé‚£å°±æ˜¯è§£å†³Controllerå®ä¾‹å­˜å’Œå–çš„é—®é¢˜&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;é¦–å…ˆä¸ºäº†è®©Controlleræ‰˜ç®¡åˆ°Autofacä¸­å¹¶ä¸”æ”¯æŒå±æ€§æ³¨å…¥ï¼Œé‚£ä¹ˆå°±åªèƒ½ä½¿ç”¨Autofacçš„æ–¹å¼å»æ³¨å†ŒControllerå®ä¾‹ï¼Œå…·ä½“æ“ä½œæ˜¯åœ¨Startupç±»ä¸­æ·»åŠ ConfigureContaineræ–¹æ³•ï¼Œç„¶åæ³¨å†ŒControllerå¹¶å£°æ˜æ”¯æŒå±æ€§æ³¨å…¥&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-cs&quot;&gt;public void ConfigureContainer(ContainerBuilder builder)
{
    var controllerBaseType = typeof(ControllerBase);
    //æ‰«æControllerç±»
    builder.RegisterAssemblyTypes(typeof(Program).Assembly)
    .Where(t =&amp;gt; controllerBaseType.IsAssignableFrom(t) &amp;amp;&amp;amp; t != controllerBaseType)
    //å±æ€§æ³¨å…¥
    .PropertiesAutowired();
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;å…¶æ¬¡æ˜¯è§£å†³å–çš„é—®é¢˜ï¼Œè¿™é‡Œæˆ‘ä»¬å°±ä¸éœ€è¦AddControllersAsServicesæ–¹æ³•äº†ï¼Œå› ä¸ºAddControllersAsServicesè§£å†³äº†Controllerå®ä¾‹åœ¨IOCä¸­å­˜å’Œå–çš„é—®é¢˜ï¼Œä½†æ˜¯è¿™é‡Œæˆ‘ä»¬åªéœ€è¦è§£å†³Controllerå–å¾—é—®é¢˜è¯´åªéœ€è¦ä½¿ç”¨ServiceBasedControllerActivatorå³å¯ï¼Œå…·ä½“æ“ä½œæ˜¯&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-cs&quot;&gt;services.Replace(ServiceDescriptor.Transient&amp;lt;IControllerActivator, ServiceBasedControllerActivator&amp;gt;());
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä»…éœ€è¦åœ¨é»˜è®¤çš„çŠ¶æ€ä¸‹å®Œæˆè¿™ä¸¤æ­¥ï¼Œæ—¢å¯ä»¥è§£å†³Controlleræ‰˜ç®¡åˆ°Autofacä¸­å¹¶æ”¯æŒå±æ€§æ³¨å…¥çš„é—®é¢˜ï¼Œè¿™ä¹Ÿæ˜¯æœ€åˆç†çš„æ–¹å¼ã€‚å½“ç„¶å¦‚æœä½ ä½¿ç”¨AddControllersAsServiceså¯æ˜¯å¯ä»¥å®ç°ç›¸åŒçš„æ•ˆæœäº†ï¼Œåªä¸è¿‡æ˜¯æ²¡å¿…è¦å°†å®¹å™¨é‡å¤çš„æ”¾å…¥å®¹å™¨ä¸­äº†ã€‚&lt;/p&gt;
&lt;h4 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h4&gt;
&lt;p&gt;Â Â Â Â æœ¬æ–‡æˆ‘ä»¬è®²è¿°äº†å…³äºASP.NET Core Controllerä¸IOCç»“åˆçš„é—®é¢˜ï¼Œæˆ‘è§‰å¾—è¿™æ˜¯æœ‰å¿…è¦è®©æ¯ä¸ªäººéƒ½æœ‰æ‰€äº†è§£çš„çŸ¥è¯†ç‚¹ï¼Œå› ä¸ºåœ¨æ—¥å¸¸çš„Webå¼€å‘ä¸­Controllerå¤ªå¸¸ç”¨äº†ï¼ŒçŸ¥é“è¿™ä¸ªé—®é¢˜å¯èƒ½ä¼šè®©å¤§å®¶åœ¨å¼€å‘ä¸­å°‘èµ°ä¸€ç‚¹å¼¯è·¯ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹æœ¬æ–‡å¤§è‡´è®²è§£çš„å†…å®¹&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;é¦–å…ˆè¯´æ˜äº†ä¸€ä¸ªç°è±¡ï¼Œé‚£å°±æ˜¯é»˜è®¤æƒ…å†µä¸‹Controllerå¹¶ä¸åœ¨IOCå®¹å™¨ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿé€šè¿‡å‡ ä¸ªç¤ºä¾‹éªŒè¯äº†ä¸€ä¸‹ã€‚&lt;/li&gt;
&lt;li&gt;å…¶æ¬¡è®²è§£äº†é»˜è®¤æƒ…å†µä¸‹åˆ›é€ Controllerå®ä¾‹çœŸæ­£çš„ç±»ActivatorUtilitiesï¼Œå¹¶å¤§è‡´è®²è§£äº†ActivatorUtilitiesçš„ç”¨é€”ã€‚&lt;/li&gt;
&lt;li&gt;ç„¶åæˆ‘ä»¬æ‰¾åˆ°äº†å°†Controlleræ‰˜ç®¡åˆ°IOCå®¹å™¨ä¸­çš„åŠæ³•AddControllersAsServicesï¼Œå¹¶æ¢ç©¶äº†å®ƒçš„æºç ï¼Œäº†è§£äº†å®ƒçš„å·¥ä½œæ–¹å¼ã€‚&lt;/li&gt;
&lt;li&gt;æœ€åæˆ‘ä»¬åˆæ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨æœ€åˆç†çš„æ–¹å¼å°†Controllerç»“åˆAutofacä¸€èµ·ä½¿ç”¨ï¼Œå¹¶ä¸”æ”¯æŒå±æ€§æ³¨å…¥ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æœ¬æ¬¡è®²è§£åˆ°è¿™é‡Œå°±å·®ä¸å¤šäº†ï¼Œå¸Œæœ›æœ¬æ¥å°±çŸ¥é“çš„åŒå­¦ä»¬èƒ½åŠ æ·±ä¸€ç‚¹äº†è§£ï¼Œä¸çŸ¥é“çš„åŒå­¦èƒ½å¤Ÿç»™ä½ ä»¬æä¾›ä¸€ç‚¹å¸®åŠ©ï¼Œèƒ½å¤Ÿåœ¨æ—¥å¸¸å¼€å‘ä¸­å°‘èµ°ä¸€ç‚¹å¼¯è·¯ã€‚æ–°çš„ä¸€å¹´å¼€å§‹äº†ï¼Œæœ¬ç¯‡æ–‡ç« æ˜¯æˆ‘2021å¹´çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œæ–°çš„ä¸€å¹´æ„Ÿè°¢å¤§å®¶çš„æ”¯æŒã€‚&lt;/p&gt;
&lt;div align=&quot;center&quot;&gt;&lt;span&gt;ğŸ‘‡æ¬¢è¿æ‰«ç å…³æ³¨æˆ‘çš„å…¬ä¼—å·ğŸ‘‡&lt;/span&gt; &lt;img src=&quot;https://img2020.cnblogs.com/blog/2042116/202006/2042116-20200622133425514-1420050576.png&quot;/&gt;&lt;/div&gt;
</description>
<pubDate>Sun, 03 Jan 2021 23:29:00 +0000</pubDate>
<dc:creator>yiå¿µä¹‹é—´</dc:creator>
<og:description>å‰è¨€ çœ‹åˆ°æ ‡é¢˜å¯èƒ½å¤§å®¶ä¼šæœ‰æ‰€ç–‘é—®Controllerå’ŒIOCèƒ½æœ‰å•¥ç¾ç»Šï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯æ‹’ç»å½“ä¸€ä¸ªæ ‡é¢˜å…šçš„ã€‚ç›¸ä¿¡æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†äººå·²ç»çŸ¥é“äº†è¿™ä¹ˆä¸€ä¸ªç»“è®ºï¼Œé»˜è®¤æƒ…å†µä¸‹ASP.NET Coreçš„Controller</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/wucy/p/14222973.html</dc:identifier>
</item>
<item>
<title>è¢«è‡ªå·±ä»¥ä¸ºçš„GZIPç§€åˆ°äº† - lulianqi15</title>
<link>http://www.cnblogs.com/lulianqi/p/14227682.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/lulianqi/p/14227682.html</guid>
<description>&lt;div class=&quot;wiki-content&quot; readability=&quot;76.78916172735&quot;&gt;

&lt;h2&gt;é—®é¢˜çš„å¼€å§‹&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/209007/202101/209007-20210104005325044-1918140857.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â æˆ‘å¸æŸäº§å“çº¿æœ‰è¿™ä¹ˆä¸€ä¸ªç¥å¥‡æ¥å£ (&lt;span&gt;&lt;em&gt;https://host/path/customQuery&lt;/em&gt;&lt;/span&gt;)&lt;/p&gt;
&lt;p&gt;è¯¥æ¥å£åœ¨é¢„å‘æˆ–çº¿ä¸Šç¼“å­˜æ­£å¸¸çš„æƒ…å†µä¸‹TTFBä¸º150mså·¦å³ï¼ˆå¯ä»¥è®¤ä¸ºæœåŠ¡å¤„ç†æ—¶é—´å·®ä¸å¤šå°±æ˜¯TTFBï¼‰ï¼Œä¸è¿‡ç›¸æ¯”150msçš„TTFBï¼Œæ˜¾ç„¶æ•°æ®èµ„æºä¸‹è½½æ—¶é—´è¿‡é•¿çš„é—®é¢˜ä¼šæ›´å¼•äººæ³¨æ„éœ€è¦100mså·¦å³ï¼ˆå½“ç„¶è¿™ä¹Ÿæ˜¯ç½‘ç»œæ¡ä¼˜ç§€çš„æƒ…å†µä¸‹ï¼Œç½‘ç»œä¸€èˆ¬çš„è¯è¿™ä¸ªä¸‹è½½æ—¶é—´ä¼šæ›´å¤¸å¼ ï¼‰&lt;br/&gt;customQueryè¯·æ±‚ä¸€æ¬¡è¯·æ±‚çš„æ•°æ®å“åº”å¤§æ¦‚ä¸º2.7MB, å‹ç¼©åä¹Ÿæœ‰è¶…è¿‡300KB&lt;br/&gt;ä¸‹è½½æ—¶é—´è¿‡é•¿çœ‹èµ·æ¥å°±æ˜¯å› ä¸ºè¿™ä¸ªå“åº”å®ä½“è¿‡å¤§äº†ï¼ˆ100Mbçš„å¸¦å®½æ»¡é€Ÿï¼Œ300KBå·®ä¸å¤šä¹Ÿéœ€è¦30msï¼‰ï¼Œé€šè¿‡æµ‹è¯•å¯ä»¥å‘ç°åŒæ ·çš„ç½‘ç»œæ¡ä»¶åŒä¸€ä¸ªåº”ç”¨çš„å…¶ä»–æ¥å£ï¼Œå¦‚æœå“åº”å‹ç¼©åå°äº1KBï¼Œå…¶ContentDownLoadæ—¶é—´å¯ä»¥å¿½ç•¥ä¸è®¡ï¼ˆé€šå¸¸éƒ½ä¼šå°äº2msï¼‰&lt;br/&gt;å› ä¸ºä»£ç†é»˜è®¤å¼€å¯äº†gzipï¼Œå…¶å®æ•°æ®å·²ç»è¢«å‹ç¼©äº†è¿‘10å€ï¼Œä½†æ˜¯å‹ç¼©åçš„æ•°æ®è¿˜æ˜¯è¿‡å¤§ã€‚&lt;br/&gt;åˆ†æäº†customQueryå“åº”å®ä½“çš„æ•°æ®ç»“æ„ã€‚&lt;br/&gt;å‘ç°æ•°æ®æ¯ä¸ªlistä¸­fieldsèŠ‚ç‚¹å¤§é‡é‡å¤å‡ºç°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/209007/202101/209007-20210104010608348-2045719318.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å¦‚ä¸Šå›¾å…¶ä¸­fieldçš„æè¿°æ˜¯å®Œå…¨ä¸€è‡´çš„ï¼ˆæŒ‰ä¸€é¡µ50æ¡è®¡ç®—ï¼Œè¿™äº›æ•°æ®é‡å¤äº†50éï¼‰&lt;br/&gt;è¿™äº›æ•°æ®fieldæè¿°æ•°æ®å•ä¸ªéƒ½å¤§å°å¤§æ¦‚æ˜¯50KBï¼ˆé‡å¤50æ¬¡å¯ä»¥çœ‹åˆ°2.7MBçš„æ•°æ®å‡ ä¹éƒ½æ˜¯è¿™äº›é‡å¤çš„æ•°æ®ï¼‰&lt;/p&gt;

&lt;h2&gt;å¼€å§‹ç§€äº†&lt;/h2&gt;
&lt;p&gt;æ—¢ç„¶å·²ç»æ˜ç¡®äº†è¿™äº›é‡å¤æè¿°æ•°æ®ï¼ŒæœåŠ¡ç«¯çš„åŒå­¦å¾ˆè‡ªç„¶æƒ³åˆ°æŠŠè¿™äº›fieldæè¿°æå–å‡ºæ¥é‡æ–°ç»„è£…æ•°æ®å¯ä»¥å¤§å¹…åº¦å‡å°æ•°æ®ä¼ è¾“çš„å¤§å°ã€‚&lt;br/&gt;ä¸è¿‡è‡ªå·±æ°å¥½æ›¾ç»â€œçœ‹è¿‡â€DEFLATEå‹ç¼©ï¼ˆhttpçš„gzipæ­£å¥½ä½¿ç”¨çš„æ˜¯DEFLATEï¼‰å…¶ä¸­ä½¿ç”¨åˆ°çš„LZ77æ˜¯ä¼šåŒ¹é…å‰æ–‡ç›¸åŒçŸ­è¯­åé¢çš„ç›¸åŒçŸ­è¯­éƒ½ä¼šè¢«æ›¿æ¢æˆâ€œæ ‡è®°â€ã€‚&lt;br/&gt;é‚£æˆ‘â€œç§€â€çš„æ—¶å€™åˆåˆ°äº†ï¼Œå½“å³è¡¨ç¤ºé‡‡ç”¨è¿™ç§æ•°æ®é‡ç»„çš„æ–¹å¼å¹¶ä¸ä¼šå¸¦æ¥æ˜æ˜¾çš„å®é™…æå‡ï¼Œå› ä¸ºæ•°æ®å®é™…çš„ä¿¡æ¯é‡æ²¡æœ‰å®é™…å˜åŒ–ï¼Œåªæ˜¯æ‰‹åŠ¨å»é™¤äº†å†—ä½™ï¼Œè€Œä¹‹å‰å†—ä½™çš„æ•°æ®å…¶å®å·²ç»è¢«gzipå¤„ç†è¿‡äº†ï¼Œæ‰€ä»¥ä»…ä»…å•çº¯å»é™¤é‡å¤æè¿°æ•°æ®ç‰‡æ®µå¹¶ä¸èƒ½å¸¦æ¥é¢„æœŸçš„æ”¶ç›Šã€‚&lt;br/&gt;å› ä¸ºæˆ‘ç§€çš„æ—¶å€™å¦‚æ­¤è‡ªä¿¡ï¼Œå¯¹æ–¹é©¬ä¸Šå°±è‡ªå·±ä¸è‡ªä¿¡äº†ï¼Œè¡¨ç¤ºè¦å›å»å…ˆéªŒè¯æ•ˆæœååœ¨åšæ‰“ç®—ã€‚&lt;/p&gt;

&lt;h2&gt;çœ‹èµ·æ¥æ˜¯å¤±è´¥äº†&lt;/h2&gt;
&lt;p&gt;æœç„¶åé¢çš„ç»“æœâ€œå±…ç„¶â€æ˜¯æˆ‘è¢«æ‰“è„¸äº†&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/209007/202101/209007-20210104012258247-1042083910.png&quot; alt=&quot;&quot; width=&quot;821&quot; height=&quot;472&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;


&lt;p&gt;Â customQueryæ¥å£è¿”å›çš„å®ä½“å¤§å°ç›´æ¥å˜æˆäº†25kbï¼Œè§£å‹å189kbï¼ˆä¹‹å‰æ˜¯327kbï¼Œè§£å‹å2.7Mbï¼‰&lt;/p&gt;
&lt;p&gt;é‚£è¿™å·®è·å¤ªå¤§äº†ï¼Œå®ä½“å¤§å°å‡å°åˆ°äº†ä¹‹å‰çš„10%ä¸åˆ°ï¼Œå½“ç„¶ä¸‹è½½é€Ÿåº¦ContentDownLoadä¹Ÿæœ‰äº†å¤§å¹…åº¦çš„é™ä½ã€‚ï¼ˆåŸºæœ¬ä¸Šå°±æ˜¯ä¸€ä¸ªRTTçš„æ—¶é—´ï¼‰&lt;br/&gt;ä¸è¿‡è¿™å®Œå…¨è·Ÿæˆ‘ä¹‹å‰çš„è®¤çŸ¥ä¸ä¸€æ ·å•Šï¼Œä¸€å®šæ˜¯å“ªé‡Œå‡ºç°äº†é—®é¢˜ã€‚ï¼ˆæ¯•ç«Ÿæ˜¯ä»¥ä¸ºè‡ªå·±æ‡‚äº†ç³»åˆ—ï¼‰&lt;/p&gt;

&lt;h2&gt;è¯•å›¾æŠ¢æ•‘ä¸‹&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†æŒ½å›é¢œé¢ï¼Œæˆ‘æŠŠè¿™2ç»„åŸå§‹æ•°æ®ä¸‹è½½ä¸‹æ¥ï¼Œæœ¬åœ°å‹ç¼©è¿›è¡Œåˆ†æï¼ˆè¿˜ä¸æƒ³æ‰¿è®¤è‡ªå·±é”™äº†ï¼Œè¯•å›¾æ‰¾åˆ°äº§ç”Ÿè¿™ç§ç»“æœçš„å…¶ä»–è§£é‡Šï¼‰&lt;/p&gt;
&lt;p&gt;å¦‚ä¸‹å›¾è€çš„æ•°æ®ä¸ºcustomQuery_v1ï¼ˆ2.7MBï¼‰ï¼Œæ–°çš„ä¸ºcustomQuery_v2ï¼ˆ190KBï¼‰&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/209007/202101/209007-20210104011546777-1825946281.png&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;åˆ†åˆ«ä½¿ç”¨zipï¼Œgzipï¼Œrarå¯¹2ç»„æ•°æ®è¿›è¡Œå‹ç¼© ï¼ˆgzipå³ä¸ºhttpé»˜è®¤ä½¿ç”¨çš„å‹ç¼©ç®—æ³•ï¼ŒMACä¸Šç›´æ¥ä½¿ç”¨gzipå‘½ä»¤å¯ä»¥å¯¹æ–‡ä»¶è¿›è¡Œå‹ç¼©ï¼‰&lt;br/&gt;å¯ä»¥å‘ç°RARçš„å‹ç¼©ç»“æœå°±ä¸æˆ‘æœ€å¼€å§‹çš„æƒ³æ³•å·®ä¸å¤šï¼ˆå³ä½¿åŸå§‹æ•°æ®å·®äº†è¶…è¿‡10å€ï¼Œè€Œå‹ç¼©çš„ç»“æœæ˜¯å‡ ä¹ä¸€è‡´çš„ï¼Œv1ä¸º19kb ï¼›v2ä¸º17kbï¼‰&lt;br/&gt;ä¸è¿‡gzipå¯¹2ç»„æ•°æ®çš„å‹ç¼©ç»“æœä¸åœ¨æµè§ˆå™¨ä¸Šçœ‹åˆ°çš„æ˜¯ä¸€æ ·çš„ã€‚ï¼ˆv1ä¸º329kb ï¼›v2ä¸º25kbï¼‰&lt;br/&gt;æ—¢ç„¶æœ¬åœ°å‹ç¼©ä¹Ÿå¾—åˆ°äº†åŒæ ·çš„ç»“æœï¼Œçœ‹æ¥çœŸçš„æ˜¯è‡ªå·±Too young too naive ï¼ˆå¤§æ„äº†ï¼Œæ²¡æœ‰é—ªï¼Œç§€çš„æ—¶å€™åº”è¯¥å…ˆåœ¨æœ¬åœ°éªŒè¯ä¸€ä¸‹çš„ï¼‰&lt;/p&gt;

&lt;h2&gt;é»˜é»˜é¢å¯¹é”™è¯¯åˆ†æåŸå› &lt;/h2&gt;
&lt;p&gt;ä½†æ˜¯ä¸ºä»€ä¹ˆä¼šæœ‰è¿™æ ·çš„ç»“æœï¼ŒæŒ‰æˆ‘çš„ç†è§£å‹ç¼©ç»“æœåº”è¯¥ä¸rarä¸€è‡´æ‰å¯¹ã€‚è¦ææ¸…æ¥šè¿˜è¦ä»å‹ç¼©çš„æ–¹å¼å…¥æ‰‹ã€‚&lt;br/&gt;ä¸€å®šæ˜¯æˆ‘ä»¥ä¸ºçš„å‹ç¼©è¡Œä¸ºä¸å®é™…å­˜åœ¨å·®å¼‚ï¼Œ&lt;a class=&quot;external-link&quot; href=&quot;https://zh.wikipedia.org/wiki/Gzip&quot; rel=&quot;nofollow&quot;&gt;gzip&lt;/a&gt;çš„åŸºç¡€æ˜¯&lt;a class=&quot;external-link&quot; href=&quot;https://zh.wikipedia.org/wiki/DEFLATE&quot; rel=&quot;nofollow&quot;&gt;DEFLATE&lt;/a&gt;ï¼ŒDEFLATEæ˜¯&lt;a class=&quot;external-link&quot; href=&quot;https://zh.wikipedia.org/wiki/LZ77%E4%B8%8ELZ78&quot; rel=&quot;nofollow&quot;&gt;LZ77&lt;/a&gt;ä¸&lt;a class=&quot;external-link&quot; href=&quot;https://zh.wikipedia.org/wiki/%E5%93%88%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81&quot; rel=&quot;nofollow&quot;&gt;å“ˆå¤«æ›¼ç¼–ç &lt;/a&gt;çš„ä¸€ä¸ªç»„åˆä½“ï¼ˆÂ &lt;a class=&quot;external-link&quot; href=&quot;https://tools.ietf.org/html/rfc1951&quot; rel=&quot;nofollow&quot;&gt;https://tools.ietf.org/html/rfc1951&lt;/a&gt;ï¼‰&lt;br/&gt;Huffman CodingÂ åªæ˜¯å•çº¯çš„å­—ç¬¦ç¼–ç ï¼Œç¼–ç åçš„å¤§å°ä¸ç¼–ç å‰çš„å¤§å°ç›´æ¥æ­£ç›¸å…³ï¼Œè‚¯å®šä¸æ˜¯äº§ç”Ÿç»“æœçš„åŸå› ã€‚&lt;br/&gt;é‚£å‰©ä¸‹å°±åªæœ‰æ˜¯LZ77ï¼Œåªèƒ½æ˜¯LZ77ä¸€å¼€å§‹æ²¡æœ‰æŠŠé‚£äº›é‡å¤çš„fieldså‹ç¼©æ‰ï¼Œè€Œä¸ºä»€ä¹ˆLZ77æ²¡æœ‰æŠŠåŸå§‹æ•°æ®é‡Œå¤§é‡é‡å¤çš„æè¿°â€œæ ‡è®°â€èµ·æ¥ã€‚&lt;br/&gt;LZ77æ•´ä½“æ˜¯æ˜¯ä½¿ç”¨å·²ç»å‡ºç°è¿‡çš„ç›¸åº”åŒ¹é…æ•°æ®ä¿¡æ¯æ›¿æ¢å½“å‰æ•°æ®ä»è€Œå®ç°å‹ç¼©åŠŸèƒ½ï¼Œä¸ºäº†åŒ¹é…æ•°æ®éœ€è¦ç”¨åˆ°äº†â€œæ»‘åŠ¨çª—å£â€çš„æ¦‚å¿µ&lt;br/&gt;ç»†ç»†ä¸€å“ï¼ŒLZ77å¹¶ä¸æ˜¯å…¨æ–‡åŒ¹é…ï¼Œæ•°æ®ä¸ºäº†å¯ä»¥è¾¹å‘é€è¾¹å‹ç¼©ä¼šè¿›è¡Œåˆ†å—å‹ç¼©ã€‚é€šè¿‡æŸ¥é˜…RFCæ–‡æ¡£ï¼Œå¤§æ¦‚å¯ä»¥æ˜ç¡®å—çš„å¤§å°è¢«é™åˆ¶åœ¨64kå†…ï¼Œæœ€å¤§æ»‘åŠ¨çª—å£å°±æ˜¯64k/2=32kï¼Œå¹¶ä¸”è¿˜è¦æ±‚â€œæ ‡è®°â€çš„æœ€å¤§é•¿åº¦ä¸º256å­—èŠ‚ï¼ˆå½“ç„¶æ ‡è®°é•¿åº¦è¿™ä¸ªé—®é¢˜ä¸å¤§ï¼Œå¤§ä¸äº†ä¸å¤šç”¨å‡ ä¸ªæ ‡è®°ï¼‰ã€‚è¿™é‡Œçš„é—®é¢˜åœ¨äºä½¿ç”¨æ»‘åŠ¨çª—å£å°±è¦æ±‚é‡å¤çš„æ•°æ®å¿…é¡»è¦â€œç›¸é‚»â€ è€Œå—å¤§å°æœ€å¤§ä¸º64Kï¼Œå¦‚æœé‡å¤çš„2æ®µæ•°æ®ä¸èƒ½å‡ºç°åœ¨ä¸€ä¸ªçª—å£å†…æ˜¯ä¸èƒ½è¢«æ ‡è®°çš„ã€‚ä½†æ˜¯çª—å£æœ€å¤šæ˜¯å—å¤§å°çš„ä¸€åŠ32Kbï¼ˆå®é™…ä¹Ÿä¸ä¼šç”¨è¿™ä¹ˆå¤§çš„çª—å£ï¼‰ï¼Œè€Œæˆ‘ä»¬ä¹‹å‰å°±è®¡ç®—è¿‡æˆ‘ä»¬é‡å¤çš„å•ä¸ªfieldæè¿°å°±æœ‰50Kbï¼Œè¦å‡ºç°æœ‰2ä¸ªé‡å¤çš„å†…å®¹ï¼Œå³ä½¿2ä¸ªæè¿°ç›¸é‚»é‚£ä¹Ÿè‡³å°‘ä¸Š100Kbï¼ˆä»–ä»¬ç”šè‡³éƒ½æ— æ³•åœ¨åŒä¸€ä¸ªå—é‡Œï¼‰ï¼Œå®é™…ä¸Šçª—å£æœ€å¤§32Kbï¼Œæ‰€ä»¥LZ77æ ¹æœ¬ä¸èƒ½æ ‡è®°å‡ºè¿™äº›é‡å¤çš„fieldã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹å¼•è‡³&lt;a class=&quot;external-link&quot; href=&quot;https://tools.ietf.org/html/rfc1951#section-2&quot; rel=&quot;nofollow&quot;&gt;https://tools.ietf.org/html/rfc1951#section-2&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;table-wrap&quot;&gt;
&lt;table class=&quot;confluenceTable&quot;&gt;&lt;colgroup&gt;&lt;col/&gt;&lt;/colgroup&gt;&lt;tbody readability=&quot;9.5&quot;&gt;&lt;tr readability=&quot;36&quot;&gt;&lt;td class=&quot;confluenceTd&quot; readability=&quot;37&quot;&gt;
&lt;p&gt;Compressed representation overview&lt;/p&gt;
&lt;p&gt;A compressed data set consists of a series of blocks, corresponding&lt;br/&gt;to successive blocks of input data. The block sizes are arbitrary,&lt;br/&gt;except that non-compressible blocks are limited to 65,535 bytes.&lt;/p&gt;
&lt;p&gt;Each block is compressed using a combination of the LZ77 algorithm&lt;br/&gt;and Huffman coding. The Huffman trees for each block are independent&lt;br/&gt;of those for previous or subsequent blocks; the LZ77 algorithm may&lt;br/&gt;use a reference to a duplicated string occurring in a previous block,&lt;br/&gt;up to 32K input bytes before.&lt;/p&gt;
&lt;p&gt;Each block consists of two parts: a pair of Huffman code trees that&lt;br/&gt;describe the representation of the compressed data part, and a&lt;br/&gt;compressed data part. (The Huffman trees themselves are compressed&lt;br/&gt;using Huffman encoding.) The compressed data consists of a series of&lt;br/&gt;elements of two types: literal bytes (of strings that have not been&lt;br/&gt;detected as duplicated within the previous 32K input bytes), and&lt;br/&gt;pointers to duplicated strings, where a pointer is represented as a&lt;br/&gt;pair &amp;lt;length, backward distance&amp;gt;. The representation used in the&lt;br/&gt;&quot;deflate&quot; format limits distances to 32K bytes and lengths to 258&lt;br/&gt;bytes, but does not limit the size of a block, except for&lt;br/&gt;uncompressible blocks, which are limited as noted above.&lt;/p&gt;
&lt;p&gt;Each type of value (literals, distances, and lengths) in the&lt;br/&gt;compressed data is represented using a Huffman code, using one code&lt;br/&gt;tree for literals and lengths and a separate code tree for distances.&lt;br/&gt;The code trees for each block appear in a compact form just before&lt;br/&gt;the compressed data for that block.&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;


&lt;h2&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;æœ€ç»ˆä¹Ÿè¿˜æ˜¯è‡ªå·±é”™äº†ï¼Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆå¥½æ€»ç»“çš„&lt;/p&gt;
&lt;p&gt;è¦æ˜¯ä»€ä¹ˆéƒ½ä¸çŸ¥é“ä¹Ÿä¸å‡ºé—®é¢˜ï¼Œè¦æ˜¯çŸ¥é“çš„å¾ˆæ¸…æ¥šä¹Ÿä¸ä¼šå‡ºé—®é¢˜ï¼Œå°±æ˜¯åœ¨â€œä»¥ä¸ºè‡ªå·±çŸ¥é“â€çš„æƒ…å†µä¸‹å°±å„ç§é—®é¢˜ã€‚&lt;/p&gt;
&lt;/div&gt;
</description>
<pubDate>Sun, 03 Jan 2021 18:05:00 +0000</pubDate>
<dc:creator>lulianqi15</dc:creator>
<og:description>é—®é¢˜çš„å¼€å§‹ æˆ‘å¸æŸäº§å“çº¿æœ‰è¿™ä¹ˆä¸€ä¸ªç¥å¥‡æ¥å£ (https://host/path/customQuery) è¯¥æ¥å£åœ¨é¢„å‘æˆ–çº¿ä¸Šç¼“å­˜æ­£å¸¸çš„æƒ…å†µä¸‹TTFBä¸º150mså·¦å³ï¼ˆå¯ä»¥è®¤ä¸ºæœåŠ¡å¤„ç†æ—¶é—´å·®ä¸å¤šå°±æ˜¯T</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/lulianqi/p/14227682.html</dc:identifier>
</item>
<item>
<title>JVM å¸¸ç”¨å‘½ä»¤è¡Œå·¥å…· - ä½åŸä¸ä½œè¯­</title>
<link>http://www.cnblogs.com/Yee-Q/p/14227666.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/Yee-Q/p/14227666.html</guid>
<description>&lt;br/&gt;&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;æœ¬æ–‡éƒ¨åˆ†æ‘˜è‡ªã€Šæ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºç¬¬ä¸‰ç‰ˆã€‹&lt;/p&gt;
&lt;/blockquote&gt;&lt;br/&gt;&lt;h2 id=&quot;åŸºç¡€æ•…éšœå¤„ç†å·¥å…·&quot;&gt;åŸºç¡€æ•…éšœå¤„ç†å·¥å…·&lt;/h2&gt;
&lt;p&gt;Java å¼€å‘äººå‘˜è‚¯å®šéƒ½çŸ¥é“ JDK çš„ bin ç›®å½•ä¸‹æœ‰è®¸å¤šå°å·¥å…·ï¼Œè¿™äº›å°å·¥å…·é™¤äº†ç”¨äºç¼–è¯‘å’Œè¿è¡Œ Java ç¨‹åºå¤–ï¼Œæ‰“åŒ…ã€éƒ¨ç½²ã€ç­¾åã€è°ƒè¯•ã€ç›‘æ§ã€è¿ç»´ç­‰å„ç§åœºæ™¯éƒ½å¯èƒ½ä¼šè§åˆ°å®ƒä»¬çš„å½±å­&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯ç”¨äºç›‘è§†è™šæ‹Ÿæœºè¿è¡ŒçŠ¶æ€å’Œè¿›è¡Œæ•…éšœå¤„ç†çš„å·¥å…·ï¼Œæ ¹æ®è½¯ä»¶å¯ç”¨æ€§å’Œæˆæƒçš„ä¸åŒï¼Œå¯ä»¥åˆ†æˆä¸‰ç±»ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å•†ä¸šæˆæƒå·¥å…·ï¼šä¸»è¦æ˜¯ JMCï¼ˆJava Mission Controlï¼‰åŠå®ƒè¦ä½¿ç”¨åˆ°çš„ JFRï¼ˆJava Flight Recorderï¼‰ã€‚JMC åœ¨ä¸ªäººå¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨æ˜¯å…è´¹çš„ï¼Œä½†åœ¨å•†ä¸šç¯å¢ƒä¸­ä½¿ç”¨åˆ™éœ€ä»˜è´¹&lt;/li&gt;
&lt;li&gt;æ­£å¼æ”¯æŒå·¥å…·ï¼šè¿™ä¸€ç±»å·¥å…·å±äºé•¿æœŸè¢«æ”¯æŒçš„å·¥å…·&lt;/li&gt;
&lt;li&gt;å®éªŒæ€§å·¥å…·ï¼šè¿™ä¸€ç±»å·¥å…·å¸¦æœ‰å®éªŒæ€§è´¨ï¼Œæ—¥åå¯èƒ½ä¼šè½¬æ­£ï¼Œä¹Ÿå¯èƒ½ä¼šåœ¨æŸä¸ª JDK ç‰ˆæœ¬ä¸­æ— å£°æ— æ¯åœ°æ¶ˆå¤±&lt;/li&gt;
&lt;/ul&gt;&lt;br/&gt;&lt;h2 id=&quot;è™šæ‹Ÿæœºè¿›ç¨‹çŠ¶å†µå·¥å…·&quot;&gt;è™šæ‹Ÿæœºè¿›ç¨‹çŠ¶å†µå·¥å…·&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨ jpsï¼ˆJVM Process Status Toolï¼‰å¯ä»¥åˆ—å‡ºæ­£åœ¨è¿è¡Œçš„è™šæ‹Ÿæœºè¿›ç¨‹ï¼Œå¹¶æ˜¾ç¤ºè™šæ‹Ÿæœºæ‰§è¡Œä¸»ç±»ï¼ˆmain å‡½æ•°æ‰€åœ¨çš„ç±»ï¼‰åç§°ä»¥åŠè¿™äº›è¿›ç¨‹çš„æœ¬åœ°è™šæ‹Ÿæœºå”¯ä¸€ IDï¼ˆLVMIDï¼ŒLocal Virtual Machine Identifierï¼‰&lt;/p&gt;
&lt;p&gt;è¯¥å‘½ä»¤å¯ä»¥è·å–è™šæ‹Ÿæœºè¿›ç¨‹çš„ LVMIDï¼Œä»è€Œå®šä½æƒ³è¦ç›‘æ§çš„ç¨‹åºï¼Œè€Œ LVMID ä¸€èˆ¬ä¸æ“ä½œç³»ç»Ÿçš„è¿›ç¨‹ ID ä¸€è‡´&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;jps [options] [hostid]
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;jps ä¹Ÿå¯ä»¥é€šè¿‡ RMI åè®®æŸ¥è¯¢å¼€å¯äº† RMI æœåŠ¡çš„è¿œç¨‹ Java è™šæ‹Ÿæœºè¿›ç¨‹çŠ¶æ€ï¼Œå‚æ•° hostid ä¸º RMI æ³¨å†Œè¡¨ä¸­æ³¨å†Œçš„ä¸»æœºå&lt;/p&gt;
&lt;p&gt;jps çš„å…¶ä»–å¸¸ç”¨é€‰é¡¹å¦‚è¡¨ï¼š&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;é€‰é¡¹&lt;/th&gt;
&lt;th&gt;ä½œç”¨&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody readability=&quot;4&quot;&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;-q&lt;/td&gt;
&lt;td&gt;åªè¾“å‡º LVMIDï¼Œçœç•¥ä¸»ç±»çš„åç§°&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;-m&lt;/td&gt;
&lt;td&gt;è¾“å‡ºè™šæ‹Ÿæœºè¿›ç¨‹å¯åŠ¨æ—¶ä¼ é€’ç»™ä¸»ç±» main() å‡½æ•°çš„å‚æ•°&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;-l&lt;/td&gt;
&lt;td&gt;è¾“å‡ºä¸»ç±»çš„å…¨åï¼Œå¦‚æœè¿›ç¨‹æ‰§è¡Œçš„æ˜¯ JAR åŒ…ï¼Œåˆ™è¾“å‡º&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;-v&lt;/td&gt;
&lt;td&gt;è¾“å‡ºè™šæ‹Ÿæœºè¿›ç¨‹å¯åŠ¨æ—¶çš„ JVM å‚æ•°&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;br/&gt;&lt;h2 id=&quot;è™šæ‹Ÿæœºç»Ÿè®¡ä¿¡æ¯ç›‘è§†å·¥å…·&quot;&gt;è™šæ‹Ÿæœºç»Ÿè®¡ä¿¡æ¯ç›‘è§†å·¥å…·&lt;/h2&gt;
&lt;p&gt;jstatï¼ˆJVM Statistics Monitoring Toolï¼‰æ˜¯ç”¨äºç›‘è§†è™šæ‹Ÿæœºå„ç§è¿è¡ŒçŠ¶æ€ä¿¡æ¯çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥æ˜¾ç¤ºæœ¬åœ°æˆ–è€…è¿œç¨‹è™šæ‹Ÿæœºè¿›ç¨‹ä¸­çš„ç±»åŠ è½½ã€å†…å­˜ã€åƒåœ¾æ”¶é›†ã€å³æ—¶ç¼–è¯‘ç­‰è¿è¡Œæ—¶æ•°æ®&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;jstat [ option vmid [interval[s|ms] [count]] ]
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚æœæ˜¯æœ¬åœ°è™šæ‹Ÿæœºè¿›ç¨‹ï¼ŒVMID ä¸ LVMID æ˜¯ä¸€è‡´çš„ï¼›å¦‚æœæ˜¯è¿œç¨‹è™šæ‹Ÿæœºè¿›ç¨‹ï¼Œé‚£ VMID çš„æ ¼å¼åº”å½“æ˜¯&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;[protocaol:][//]lvmid[@hostname[:port]/servername]
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å‚æ•° interval å’Œ count ä»£è¡¨æŸ¥è¯¢é—´éš”å’Œæ¬¡æ•°ï¼Œå¦‚æœçœç•¥è¿™ä¸¤ä¸ªå‚æ•°ï¼Œè¯´æ˜åªæŸ¥è¯¢ä¸€æ¬¡ã€‚å‡è®¾éœ€è¦æ¯ 250 æ¯«ç§’æŸ¥è¯¢ä¸€æ¬¡è¿›ç¨‹ 2764 çš„åƒåœ¾æ”¶é›†æƒ…å†µï¼Œä¸€å…±æŸ¥è¯¢ 20 æ¬¡ï¼Œé‚£å‘½ä»¤åº”å½“æ˜¯&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;jstat -gc 2764 250 20
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é€‰é¡¹ option ä»£è¡¨ç”¨æˆ·å¸Œæœ›æŸ¥è¯¢çš„è™šæ‹Ÿæœºä¿¡æ¯ï¼Œä¸»è¦åˆ†ä¸‰ç±»ï¼šç±»åŠ è½½ã€åƒåœ¾æ”¶é›†ã€è¿è¡ŒæœŸç¼–è¯‘çŠ¶å†µç­‰&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;é€‰é¡¹&lt;/th&gt;
&lt;th&gt;ä½œç”¨&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody readability=&quot;13&quot;&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;-class&lt;/td&gt;
&lt;td&gt;ç›‘è§†ç±»åŠ è½½ã€å¸è½½æ•°é‡ã€æ€»ç©ºé—´ä»¥åŠç±»è£…è½½æ‰€è€—è´¹çš„æ—¶é—´&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td&gt;-gc&lt;/td&gt;
&lt;td&gt;ç›‘è§† Java å †çŠ¶å†µï¼ŒåŒ…æ‹¬ Eden åŒºã€ä¸¤ä¸ª Survivor åŒºã€è€å¹´ä»£ã€æ°¸ä¹…ä»£ç­‰çš„å®¹é‡ã€å·²ç”¨ç©ºé—´ã€åƒåœ¾æ”¶é›†æ—¶é—´åˆè®¡ç­‰ä¿¡æ¯&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td&gt;-gccapacity&lt;/td&gt;
&lt;td&gt;ç›‘è§†å†…å®¹ä¸ -gc åŸºæœ¬ç›¸åŒï¼Œä½†è¾“å‡ºä¸»è¦å…³æ³¨ Java å †å„ä¸ªåŒºåŸŸä½¿ç”¨åˆ°çš„æœ€å¤§ã€æœ€å°ç©ºé—´&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;-gcutil&lt;/td&gt;
&lt;td&gt;ç›‘è§†å†…å®¹ä¸ -gc åŸºæœ¬ç›¸åŒï¼Œä½†è¾“å‡ºä¸»è¦å…³æ³¨å·²ä½¿ç”¨ç©ºé—´å æ€»ç©ºé—´çš„ç™¾åˆ†æ¯”&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;-gccause&lt;/td&gt;
&lt;td&gt;ä¸ -gcutil åŠŸèƒ½ä¸€æ ·ï¼Œä½†ä¼šé¢å¤–è¾“å‡ºå¯¼è‡´ä¸Šä¸€æ¬¡åƒåœ¾æ”¶é›†äº§ç”Ÿçš„åŸå› &lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;-gcnew&lt;/td&gt;
&lt;td&gt;ç›‘è§†æ–°ç”Ÿä»£åƒåœ¾æ”¶é›†æƒ…å†µ&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;-gcnewcapacity&lt;/td&gt;
&lt;td&gt;ç›‘è§†å†…å®¹ä¸ -gcnew åŸºæœ¬ç›¸åŒï¼Œä½†è¾“å‡ºä¸»è¦å…³æ³¨ä½¿ç”¨åˆ°çš„æœ€å¤§ã€æœ€å°ç©ºé—´&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;-gcold&lt;/td&gt;
&lt;td&gt;ç›‘è§†è€å¹´ä»£åƒåœ¾æ”¶é›†æƒ…å†µ&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;-gcoldcapacity&lt;/td&gt;
&lt;td&gt;ç›‘è§†å†…å®¹ä¸ -gcold åŸºæœ¬ç›¸åŒï¼Œä½†è¾“å‡ºä¸»è¦å…³æ³¨ä½¿ç”¨åˆ°çš„æœ€å¤§ã€æœ€å°ç©ºé—´&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;-gcpermcapacity&lt;/td&gt;
&lt;td&gt;è¾“å‡ºæ°¸ä¹…ä»£ä½¿ç”¨åˆ°çš„æœ€å¤§ã€æœ€å°ç©ºé—´&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;-compiler&lt;/td&gt;
&lt;td&gt;è¾“å‡ºå³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘è¿‡çš„æ–¹æ³•ã€è€—æ—¶ç­‰ä¿¡æ¯&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;-printcompilation&lt;/td&gt;
&lt;td&gt;è¾“å‡ºå·²ç»è¢«å³æ—¶ç¼–è¯‘çš„æ–¹æ³•&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;br/&gt;&lt;h2 id=&quot;java-é…ç½®ä¿¡æ¯å·¥å…·&quot;&gt;Java é…ç½®ä¿¡æ¯å·¥å…·&lt;/h2&gt;
&lt;p&gt;jinfoï¼ˆConfiguration Info for Javaï¼‰çš„ä½œç”¨æ˜¯å®æ—¶æŸ¥çœ‹å’Œè°ƒæ•´è™šæ‹Ÿæœºå„é¡¹å‚æ•°ï¼Œä½¿ç”¨ jps å‘½ä»¤çš„ -v å‚æ•°å¯ä»¥æŸ¥çœ‹è™šæ‹Ÿæœºå¯åŠ¨æ—¶æ˜¾ç¤ºæŒ‡å®šçš„å‚æ•°åˆ—è¡¨ï¼Œè·å– pid&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;jinfo [option] pid
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½¿ç”¨ -flag &amp;lt;name&amp;gt; é€‰é¡¹æ‰“å°è™šæ‹Ÿæœºæ ‡è®°å‚æ•°çš„å€¼ï¼Œname è¡¨ç¤ºè™šæ‹Ÿæœºæ ‡è®°å‚æ•°çš„åç§°&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;jinfo -flag PrintGC 21768
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½¿ç”¨ -flag [+|-]&amp;lt;name&amp;gt; é€‰é¡¹å¯ä»¥å¼€å¯æˆ–å…³é—­è™šæ‹Ÿæœºè¡¨ç¤ºå‚æ•°ï¼Œ+ è¡¨ç¤ºå¼€å¯ï¼Œ- è¡¨ç¤ºå…³é—­&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;jinfo -flag +PrintGC 21768
jinfo -flag -PrintGC 21768
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½¿ç”¨ -flag &amp;lt;name&amp;gt; = &amp;lt;value&amp;gt; å¯ä»¥è®¾ç½®è™šæ‹Ÿæœºæ ‡è®°å‚æ•°çš„å€¼ï¼Œä½†å¹¶ä¸æ˜¯æ¯ä¸ªå‚æ•°éƒ½å¯ä»¥è¢«åŠ¨æ€ä¿®æ”¹&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;jinfo -flag HeapDumpPath=C:\error.hprof 21768
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å‰©ä¸‹çš„å¸¸ç”¨é€‰é¡¹å¦‚è¡¨&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;é€‰é¡¹&lt;/th&gt;
&lt;th&gt;ä½œç”¨&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody readability=&quot;2&quot;&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;-flags&lt;/td&gt;
&lt;td&gt;æ‰“å°è™šæ‹Ÿæœºå‚æ•°ï¼Œå¦‚ -XX:NewSize&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;no option&lt;/td&gt;
&lt;td&gt;ä¸å¸¦ä»»ä½•é€‰é¡¹æ—¶ï¼Œä¼šåŒæ—¶æ‰“å°è™šæ‹Ÿæœºå‚æ•°å’Œç³»ç»Ÿå‚æ•°&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;-sysprops&lt;/td&gt;
&lt;td&gt;æ‰“å°ç³»ç»Ÿå‚æ•°&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;-h | -help&lt;/td&gt;
&lt;td&gt;æ‰“å°å¸®åŠ©ä¿¡æ¯&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;br/&gt;&lt;h2 id=&quot;java-å†…å­˜æ˜ å°„å·¥å…·&quot;&gt;Java å†…å­˜æ˜ å°„å·¥å…·&lt;/h2&gt;
&lt;p&gt;jmapï¼ˆMemory Map for Javaï¼‰å‘½ä»¤ç”¨äºç”Ÿæˆå †è½¬å‚¨å¿«ç…§ï¼Œè¿˜å¯ä»¥æŸ¥è¯¢ finalize æ‰§è¡Œé˜Ÿåˆ—ã€Java å †å’Œæ–¹æ³•åŒºçš„è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚ç©ºé—´ä½¿ç”¨ç‡ã€å½“å‰ç”¨çš„æ˜¯å“ªç§æ”¶é›†å™¨ç­‰&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;jmap [option] vmid
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;option é€‰é¡¹çš„åˆæ³•å€¼ä¸å…·ä½“å«ä¹‰&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;é€‰é¡¹&lt;/th&gt;
&lt;th&gt;ä½œç”¨&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody readability=&quot;7.5&quot;&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td&gt;-dump&lt;/td&gt;
&lt;td&gt;ç”Ÿæˆ Java å †è½¬å‚¨å¿«ç…§ï¼Œæ ¼å¼ä¸º -dump:[live,]format=b,file=&amp;lt;filename&amp;gt;ï¼Œå…¶ä¸­ live å­å‚æ•°è¯´æ˜æ˜¯å¦åª dump å‡ºå­˜æ´»çš„å¯¹è±¡&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;-finalizerinfo&lt;/td&gt;
&lt;td&gt;æ˜¾ç¤ºåœ¨ F-Queue ä¸­ç­‰å¾… Finalizer çº¿ç¨‹æ‰§è¡Œ finalize æ–¹æ³•çš„å¯¹è±¡&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;-heap&lt;/td&gt;
&lt;td&gt;æ˜¾ç¤º Java å †è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚ä½¿ç”¨å“ªç§å›æ”¶æœŸã€å‚æ•°é…ç½®ã€åˆ†ä»£çŠ¶å†µ&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;-histo&lt;/td&gt;
&lt;td&gt;æ˜¾ç¤ºå †ä¸­å¯¹è±¡ç»Ÿè®¡ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç±»ã€å®ä¾‹æ•°é‡ã€åˆè®¡å®¹é‡&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;-permstat&lt;/td&gt;
&lt;td&gt;ä»¥ ClassLoader ä¸ºç»Ÿè®¡å£å¾„æ˜¾ç¤ºæ°¸ä¹…ä»£å†…å­˜çŠ¶æ€&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;-F&lt;/td&gt;
&lt;td&gt;å½“è™šæ‹Ÿæœºè¿›ç¨‹å¯¹ -dump é€‰é¡¹æ²¡æœ‰å“åº”æ—¶ï¼Œå¯ä½¿ç”¨è¯¥é€‰é¡¹å¼ºåˆ¶ç”Ÿæˆ dump å¿«ç…§&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;br/&gt;&lt;h2 id=&quot;è™šæ‹Ÿæœºå †è½¬å‚¨å¿«ç…§åˆ†æå·¥å…·&quot;&gt;è™šæ‹Ÿæœºå †è½¬å‚¨å¿«ç…§åˆ†æå·¥å…·&lt;/h2&gt;
&lt;p&gt;JDK æä¾› jhatï¼ˆJVM Heap Analysis Toolï¼‰å‘½ä»¤å’Œ jmap æ­é…ä½¿ç”¨ï¼Œç”¨æ¥åˆ†æ jmap ç”Ÿæˆçš„å †è½¬å‚¨å¿«ç…§ã€‚ä¸è¿‡ jhat çš„åˆ†æåŠŸèƒ½ç›¸ç­‰ç®€é™‹ï¼Œä¸€èˆ¬ä¼šä½¿ç”¨å…¶ä»–åŠŸèƒ½æ›´å¼ºå¤§çš„åˆ†æå·¥å…·&lt;/p&gt;
&lt;p&gt;jhat å†…ç½®ä¸€ä¸ªç®€å•çš„ web æœåŠ¡å™¨ï¼Œæ­¤å‘½ä»¤æ‰§è¡Œåï¼Œjhat åœ¨å‘½ä»¤è¡Œé‡Œæ˜¾ç¤ºåˆ†æç»“æœçš„è®¿é—®åœ°å€ï¼Œå¯ä»¥ç”¨ -port é€‰é¡¹æŒ‡å®šç«¯å£&lt;/p&gt;
&lt;p&gt;æœ‰æ—¶ dump å‡ºæ¥çš„å †å¾ˆå¤§ï¼Œåœ¨å¯åŠ¨æ—¶ä¼šæŠ¥å †ç©ºé—´ä¸è¶³çš„é”™è¯¯ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‚æ•°&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;jhat -J-Xmx512m &amp;lt;heap dump file&amp;gt;       # è¿™ä¸ªå†…å­˜å¤§å°å¯æ ¹æ®è‡ªå·±ç”µè„‘è¿›è¡Œè®¾ç½®
&lt;/code&gt;
&lt;/pre&gt;
&lt;br/&gt;&lt;h2 id=&quot;java-å †æ ˆè·Ÿè¸ªå·¥å…·&quot;&gt;Java å †æ ˆè·Ÿè¸ªå·¥å…·&lt;/h2&gt;
&lt;p&gt;jstackï¼ˆStack Trace for Javaï¼‰å‘½ä»¤ç”¨äºç”Ÿæˆè™šæ‹Ÿæœºå½“å‰æ—¶åˆ»çš„çº¿ç¨‹å¿«ç…§ï¼ˆä¸€èˆ¬ç§°ä¸º threaddump æˆ– javacore æ–‡ä»¶ï¼‰ã€‚çº¿ç¨‹å¿«ç…§å°±æ˜¯å½“å‰è™šæ‹Ÿæœºå†…æ¯ä¸€æ¡çº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„æ–¹æ³•å †æ ˆçš„é›†åˆï¼Œç”Ÿæˆçº¿ç¨‹å¿«ç…§çš„ç›®çš„é€šå¸¸æ˜¯å®šä½çº¿ç¨‹å‡ºç°é•¿æ—¶é—´åœé¡¿çš„åŸå› ï¼Œå¦‚çº¿ç¨‹é—´æ­»é”ã€æ­»å¾ªç¯ã€è¯·æ±‚å¤–éƒ¨èµ„æºå¯¼è‡´çš„é•¿æ—¶é—´æŒ‚èµ·ç­‰&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;jstack [option] vmid
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;option é€‰é¡¹çš„åˆæ³•å€¼ä¸å…·ä½“å«ä¹‰å¦‚è¡¨&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;é€‰é¡¹&lt;/th&gt;
&lt;th&gt;ä½œç”¨&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody readability=&quot;3&quot;&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;-F&lt;/td&gt;
&lt;td&gt;å½“æ­£å¸¸è¾“å‡ºçš„è¯·æ±‚ä¸è¢«å“åº”æ—¶ï¼Œå¼ºåˆ¶è¾“å‡ºçº¿ç¨‹å †æ ˆ&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;-l&lt;/td&gt;
&lt;td&gt;é™¤å †æ ˆå¤–ï¼Œæ˜¾ç¤ºå…³äºé”çš„é™„åŠ ä¿¡æ¯&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;-m&lt;/td&gt;
&lt;td&gt;å¦‚æœè°ƒç”¨åˆ°æœ¬åœ°æ–¹æ³•çš„è¯ï¼Œå¯ä»¥æ˜¾ç¤º C/C++ çš„å †æ ˆ&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;ä» JDK5 å¼€å§‹ï¼Œjava.lang.Thread ç±»æ–°å¢äº†ä¸€ä¸ª getAllStackTraces() æ–¹æ³•ç”¨äºè·å–è™šæ‹Ÿæœºä¸­æ‰€æœ‰çº¿ç¨‹çš„ StackTraceElement å¯¹è±¡ï¼Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•å¯ä»¥å®Œæˆ jstack çš„å¤§éƒ¨åˆ†åŠŸèƒ½ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­å¯ä»¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•åšä¸€ä¸ªç®¡ç†å‘˜é¡µé¢ï¼Œéšæ—¶ä½¿ç”¨æµè§ˆå™¨æ¥æŸ¥é˜…çº¿ç¨‹å †æ ˆ&lt;/p&gt;
&lt;br/&gt;</description>
<pubDate>Sun, 03 Jan 2021 17:06:00 +0000</pubDate>
<dc:creator>ä½åŸä¸ä½œè¯­</dc:creator>
<og:description>æœ¬æ–‡éƒ¨åˆ†æ‘˜è‡ªã€Šæ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºç¬¬ä¸‰ç‰ˆã€‹ åŸºç¡€æ•…éšœå¤„ç†å·¥å…· Java å¼€å‘äººå‘˜è‚¯å®šéƒ½çŸ¥é“ JDK çš„ bin ç›®å½•ä¸‹æœ‰è®¸å¤šå°å·¥å…·ï¼Œè¿™äº›å°å·¥å…·é™¤äº†ç”¨äºç¼–è¯‘å’Œè¿è¡Œ Java ç¨‹åºå¤–ï¼Œæ‰“åŒ…ã€éƒ¨ç½²ã€ç­¾</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/Yee-Q/p/14227666.html</dc:identifier>
</item>
<item>
<title>Java8çš„Optionalï¼šå¦‚ä½•å¹²æ‰ç©ºæŒ‡é’ˆï¼Ÿ - å¤©ä¹”å·´å¤ä¸¶</title>
<link>http://www.cnblogs.com/summerday152/p/14227639.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/summerday152/p/14227639.html</guid>
<description>&lt;h2 id=&quot;optionalæ¦‚è¿°&quot;&gt;Optionalæ¦‚è¿°&lt;/h2&gt;
&lt;p&gt;Optional æ˜¯ä¸ªå®¹å™¨ï¼šå®ƒå¯ä»¥ä¿å­˜ç±»å‹Tçš„valueï¼Œæˆ–è€…ä»…ä»…ä¿å­˜nullã€‚Optionalæä¾›å¾ˆå¤šæœ‰ç”¨çš„æ–¹æ³•ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨æ˜¾å¼è¿›è¡Œç©ºå€¼æ£€æµ‹ï¼Œå¾ˆå¥½åœ°è§£å†³äº†ç©ºæŒ‡é’ˆå¼‚å¸¸å¤„ç†çš„é—®é¢˜ï¼Œæ¯”å¦‚å¯ä»¥ä½¿ç”¨&lt;code&gt;isPresent()&lt;/code&gt;æ–¹æ³•åˆ¤æ–­valueæ˜¯å¦ä¸ºnullï¼Œä½¿ç”¨&lt;code&gt;get()&lt;/code&gt;æ–¹æ³•è·å–valueå€¼ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;Optionalçš„æ„é€ æ–¹æ³•æ˜¯ç§æœ‰çš„ï¼Œå®ä¾‹ä¸èƒ½newï¼Œå¯ä»¥ä½¿ç”¨é™æ€æ–¹æ³•æ¥åˆ›å»ºï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;// 1ã€åˆ›å»ºä¸€ä¸ªåŒ…è£…å¯¹è±¡å€¼ä¸ºç©ºçš„Optionalå¯¹è±¡
Optional&amp;lt;String&amp;gt; optStr = Optional.empty();
// 2ã€åˆ›å»ºåŒ…è£…å¯¹è±¡å€¼éç©ºçš„Optionalå¯¹è±¡
Optional&amp;lt;String&amp;gt; optStr1 = Optional.of(&quot;optional&quot;);
// 3ã€åˆ›å»ºåŒ…è£…å¯¹è±¡å€¼å…è®¸ä¸ºç©ºçš„Optionalå¯¹è±¡
Optional&amp;lt;String&amp;gt; optStr2 = Optional.ofNullable(null);
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;optionalç®€å•æ¡ˆä¾‹&quot;&gt;Optionalç®€å•æ¡ˆä¾‹&lt;/h2&gt;
&lt;p&gt;çœ‹å®ŒOptionalçš„æ¦‚è¿°ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­è¯´æ˜ä¸€ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™æ®µä»£ç æ¥æ”¶ä¸€ä¸ªUserå¯¹è±¡ï¼Œå¦‚æœuserä¸ºnullï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€è¿™æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§„çš„é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸çš„åšæ³•ï¼Œå¦‚æœæ²¡æœ‰è¿™æ­¥ï¼ŒgetNameä¼šNPEã€‘ï¼Œå¦åˆ™è¿”å›userçš„nameã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;    public String getName1(User user) {
        if (user == null) {
            throw new RuntimeException(&quot;userä¸èƒ½ä¸ºnull!&quot;);
        }
        return user.getName();
    }
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚æœä½¿ç”¨Optionalï¼Œåº”è¯¥æ€ä¹ˆå»å¤„ç†å‘¢ï¼Ÿ&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;    public String getName2(User user) {
        return Optional.ofNullable(user) // åŒ…è£…userå¯¹è±¡ï¼Œå¦‚æœuserä¸ºnullï¼Œåˆ™è¿”å›ç©ºçš„Optionalå¯¹è±¡
                .map(User::getName)
                .orElseThrow(() -&amp;gt; new RuntimeException(&quot;userä¸èƒ½ä¸ºnull&quot;));// å¦‚æœæœ‰å€¼åˆ™è¿”å›ï¼Œæ²¡æœ‰åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚
    }
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;Optionalä½¿ç”¨é™æ€çš„&lt;code&gt;ofNullable&lt;/code&gt;æ–¹æ³•å°†userå¯¹è±¡è¿›è¡ŒåŒ…è£…ï¼Œå°†å¯èƒ½ä¸ºnullçš„userå¯¹è±¡ä¿æŠ¤èµ·æ¥ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;    public static &amp;lt;T&amp;gt; Optional&amp;lt;T&amp;gt; ofNullable(T value) {
        // empty() æ–¹æ³• åˆ›å»ºä¸€ä¸ªç©ºçš„Optionalå¯¹è±¡ï¼Œ ofå¯¹è±¡åœ¨æ„é€ Optionalçš„æ—¶å€™ï¼Œvalueå¦‚æœweinullï¼Œä¼šå¼•å‘NPE
        return value == null ? empty() : of(value);
    }
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;    public &amp;lt;X extends Throwable&amp;gt; T orElseThrow(Supplier&amp;lt;? extends X&amp;gt; exceptionSupplier) throws X {
        // å¦‚æœæœ‰å€¼ï¼Œç›´æ¥è¿”å›å€¼
        if (value != null) {
            return value;
        } else {
            // æŠ›å‡ºå¼‚å¸¸ï¼Œè¿™ä¸ªå¼‚å¸¸Supplieræ¥å£å®šä¹‰
            throw exceptionSupplier.get();
        }
    }
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;optionalçš„ä¸»è¦æ–¹æ³•&quot;&gt;Optionalçš„ä¸»è¦æ–¹æ³•&lt;/h2&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;æ–¹æ³•&lt;/th&gt;
&lt;th&gt;æè¿°&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody readability=&quot;14.5&quot;&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;&lt;code&gt;empty&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¿”å›ä¸€ä¸ªç©ºçš„ Optional å®ä¾‹&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td&gt;&lt;code&gt;filter&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¦‚æœå€¼å­˜åœ¨å¹¶ä¸”æ»¡è¶³æä¾›çš„æ–­è¨€ï¼Œ å°±è¿”å›åŒ…å«è¯¥å€¼çš„ Optional å¯¹è±¡ï¼›å¦åˆ™è¿”å›ä¸€ä¸ªç©ºçš„ Optional å¯¹è±¡&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;&lt;code&gt;map&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¦‚æœå€¼å­˜åœ¨ï¼Œå°±å¯¹è¯¥å€¼æ‰§è¡Œæä¾›çš„ mapping å‡½æ•°è°ƒç”¨&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td&gt;&lt;code&gt;flatMap&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¦‚æœå€¼å­˜åœ¨ï¼Œå°±å¯¹è¯¥å€¼æ‰§è¡Œæä¾›çš„ mapping å‡½æ•°è°ƒç”¨ï¼Œè¿”å›ä¸€ä¸ª Optional ç±»å‹çš„å€¼ï¼Œå¦åˆ™å°±è¿” å›ä¸€ä¸ªç©ºçš„ Optional å¯¹è±¡&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td&gt;&lt;code&gt;get&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¦‚æœè¯¥å€¼å­˜åœ¨ï¼Œå°†è¯¥å€¼ç”¨ Optional å°è£…è¿”å›ï¼Œå¦åˆ™æŠ›å‡ºä¸€ä¸ª NoSuchElementException å¼‚å¸¸&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;&lt;code&gt;ifPresent&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¦‚æœå€¼å­˜åœ¨ï¼Œå°±æ‰§è¡Œä½¿ç”¨è¯¥å€¼çš„æ–¹æ³•è°ƒç”¨ï¼Œå¦åˆ™ä»€ä¹ˆä¹Ÿä¸åš&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;&lt;code&gt;isPresent&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¦‚æœå€¼å­˜åœ¨å°±è¿”å› trueï¼Œå¦åˆ™è¿”å› false&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td&gt;&lt;code&gt;of&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å°†æŒ‡å®šå€¼ç”¨ Optional å°è£…ä¹‹åè¿”å›ï¼Œå¦‚æœè¯¥å€¼ä¸º nullï¼Œåˆ™æŠ›å‡ºä¸€ä¸ª NullPointerException å¼‚å¸¸&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td&gt;&lt;code&gt;ofNullable&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å°†æŒ‡å®šå€¼ç”¨ Optional å°è£…ä¹‹åè¿”å›ï¼Œå¦‚æœè¯¥å€¼ä¸º nullï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºçš„ Optional å¯¹è±¡&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;&lt;code&gt;orElse&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¦‚æœæœ‰å€¼åˆ™å°†å…¶è¿”å›ï¼Œå¦åˆ™è¿”å›ä¸€ä¸ªé»˜è®¤å€¼&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;&lt;code&gt;orElseGet&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¦‚æœæœ‰å€¼åˆ™å°†å…¶è¿”å›ï¼Œå¦åˆ™è¿”å›ä¸€ä¸ªç”±æŒ‡å®šçš„ Supplier æ¥å£ç”Ÿæˆçš„å€¼&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;&lt;code&gt;orElseThrow&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;å¦‚æœæœ‰å€¼åˆ™å°†å…¶è¿”å›ï¼Œå¦åˆ™æŠ›å‡ºä¸€ä¸ªç”±æŒ‡å®šçš„ Supplier æ¥å£ç”Ÿæˆçš„å¼‚å¸¸&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h2 id=&quot;å‚è€ƒé˜…è¯»&quot;&gt;å‚è€ƒé˜…è¯»&lt;/h2&gt;
</description>
<pubDate>Sun, 03 Jan 2021 16:34:00 +0000</pubDate>
<dc:creator>å¤©ä¹”å·´å¤ä¸¶</dc:creator>
<og:description>Optionalæ¦‚è¿° Optional æ˜¯ä¸ªå®¹å™¨ï¼šå®ƒå¯ä»¥ä¿å­˜ç±»å‹Tçš„valueï¼Œæˆ–è€…ä»…ä»…ä¿å­˜nullã€‚Optionalæä¾›å¾ˆå¤šæœ‰ç”¨çš„æ–¹æ³•ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨æ˜¾å¼è¿›è¡Œç©ºå€¼æ£€æµ‹ï¼Œå¾ˆå¥½åœ°è§£å†³äº†ç©ºæŒ‡é’ˆå¼‚å¸¸å¤„ç†çš„é—®</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/summerday152/p/14227639.html</dc:identifier>
</item>
<item>
<title>k8sä¹‹DNSæœåŠ¡å™¨æ­å»º - Liusy01</title>
<link>http://www.cnblogs.com/liusy01/p/14227422.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/liusy01/p/14227422.html</guid>
<description>&lt;p&gt;&lt;br/&gt;ä¸€ã€å¯¼è¯»&lt;/p&gt;
&lt;p&gt;åœ¨ä½¿ç”¨k8séƒ¨ç½²springboot+redisç®€å•åº”ç”¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œspring bootè¿æ¥redisæ˜¯ç›´æ¥ä½¿ç”¨çš„IPè¿æ¥ï¼Œé‚£ä¹ˆå¯ä¸å¯ä»¥ç›´æ¥ä½¿ç”¨æœåŠ¡åç§°è¿›è¡Œè¿æ¥å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œè¿™å°±æ˜¯k8sé›†ç¾¤èŒƒå›´å†…çš„DNSæœåŠ¡æ¥å®ŒæˆæœåŠ¡ååˆ°ClusterIPçš„è§£æï¼Œæ¥ä¸‹æ¥å°±ä¸€èµ·çœ‹ä¸€ä¸‹å¦‚ä½•æ­å»ºDNSæœåŠ¡å™¨ã€‚&lt;/p&gt;
&lt;p&gt;äºŒã€æ­å»ºDNSæœåŠ¡å™¨&lt;/p&gt;
&lt;p&gt;ï¼ˆ1ï¼‰ç®€ä»‹&lt;/p&gt;
&lt;p&gt;k8sæä¾›çš„DNSæœåŠ¡æ˜¯skydnsï¼Œç”±å››ä¸ªç»„ä»¶ç»„æˆ&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;etcdï¼šDNSä¿¡æ¯å­˜å‚¨&lt;/li&gt;
&lt;li&gt;kube2skyï¼šç›‘æ§k8sä¸­Serviceèµ„æºçš„å˜åŒ–ï¼Œæ ¹æ®Serviceçš„åç§°çš„IPåœ°å€ä¿¡æ¯ç”ŸæˆDNSè®°å½•ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ°etcdä¸­&lt;/li&gt;
&lt;li&gt;skyDNSï¼šä»etcdä¸­è¯»å–DNSä¿¡æ¯ï¼Œå¹¶æä¾›DNSæŸ¥è¯¢æœåŠ¡&lt;/li&gt;
&lt;li&gt;healthzï¼šæä¾›å¯¹skydnsæœåŠ¡çš„å¥åº·æ£€æŸ¥åŠŸèƒ½&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;pgc-img&quot;&gt;&lt;img src=&quot;https://p6-tt-ipv6.byteimg.com/img/pgc-image/6fbea8add5ff4e1093da46490f9cde3f~tplv-tt-shrink:640:0.image&quot;/&gt;&lt;p class=&quot;pgc-img-caption&quot;&gt;Â &lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;ï¼ˆ2ï¼‰skydnsé…ç½®æ–‡ä»¶è¯´æ˜&lt;/p&gt;
&lt;p&gt;skydnsæœåŠ¡æœ‰ä¸€ä¸ªRCå’Œä¸€ä¸ªServiceç»„æˆï¼Œåˆ†åˆ«ç”±é…ç½®æ–‡ä»¶skydns-rc.yamlå’Œskydns-svc.yamlå®šä¹‰ã€‚&lt;/p&gt;
&lt;p&gt;skydns-rc.yamlåŒ…å«äº†å››ä¸ªå®¹å™¨çš„å®šä¹‰ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;37&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
apiVersion: v1
kind: ReplicationController
metadata:
  name: kube-dns-v8
  namespace: kube-system
  labels:
    k8s-app: kube-dns
    version: v8
    kubernetes.io/cluster-service: &quot;true&quot;
spec:
  replicas: 1
  selector:
    k8s-app: kube-dns
    version: v8
  template:
    metadata:
      labels:
        k8s-app: kube-dns
        version: v8
        kubernetes.io/cluster-service: &quot;true&quot;
    spec:
      containers:
      - name: etcd
        image: empiregeneral/etcd-amd64:latest
        resources:
          limits:
            cpu: 100m
            memory: 50Mi
        command:
        - /usr/local/bin/etcd
        - -data-dir
        - /var/etcd/data
        - -listen-client-urls
        - http://127.0.0.1:2379,http://127.0.0.1:4001
        - -advertise-client-urls
        - http://127.0.0.1:2379,http://127.0.0.1:4001
        - -initial-cluster-token
        - skydns-etcd
        volumeMounts:
        - name: etcd-storage
          mountPath: /var/etcd/data
      - name: kube2sky
        image: syncgooglecontainers/kube2sky-amd64:1.15
        resources:
          limits:
            cpu: 100m
            memory: 50Mi
        args:
        - --domain=cluster.local
        - --kube_master_url=http://192.168.197.100:8080
      - name: skydns
        image: yaronr/skydns:latest
        resources:
          limits:
            cpu: 100m
            memory: 50Mi
        args:
        - -machines=http://localhost:4001
        - -addr=0.0.0.0:53
        - -domain=cluster.local
        ports:
        - containerPort: 53
          name: dns
          protocol: UDP
        - containerPort: 53
          name: dns-tcp
          protocol: TCP
        livenessProbe:
          httpGet:
            path: /healthz
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 30
          timeoutSeconds: 5
      - name: healthz
        image: syncgooglecontainers/exechealthz:1.1
        resources:
          limits:
            cpu: 10m
            memory: 20Mi
        args:
        - -cmd=nslookup kubernetes.default.svc.cluster.local localhost &amp;gt;/dev/null
        - -port=8080
        ports:
        - containerPort: 8080
          protocol: TCP
      volumes:
      - name: etcd-storage
        emptyDir: {}
      dnsPolicy: Default  # Don't use cluster DNS.
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šè¿°éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œéœ€è¦å°†&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
--kube_master_url=http://192.168.197.100:8080
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;æ”¹æˆé›†ç¾¤ä¸­masterçš„IPï¼Œé•œåƒå¦‚æœä¸‹è½½å¤±è´¥ï¼Œå¯ä»docker hubé‡Œé¢æ‰¾ï¼Œæˆ‘å°±æ˜¯ä»docker hubé‡Œé¢æ‰¾åˆ°ç›¸åº”çš„é•œåƒã€‚&lt;/p&gt;
&lt;p&gt;skydns-svc.yaml&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
apiVersion: v1
kind: Service
metadata:
  name: kube-dns
  namespace: kube-system
  labels:
    k8s-app: kube-dns
    kubernetes.io/cluster-service: &quot;true&quot;
    kubernetes.io/name: &quot;KubeDNS&quot;
spec:
  selector:
    k8s-app: kube-dns
  clusterIP: 10.96.0.10
  ports:
  - name: dns
    port: 53
    protocol: UDP
  - name: dns-tcp
    port: 53
    protocol: TCP
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;éœ€è¦æŒ‡å®šä¸€ä¸ªclusterIPï¼Œä¸èƒ½é k8sè‡ªåŠ¨åˆ†é…ï¼Œæ¯ä¸ªNodeçš„kubeletéƒ½æ˜¯ç”¨è¿™ä¸ªIPåœ°å€ï¼Œå¦å¤–ï¼Œè¿™ä¸ªIPéœ€è¦åœ¨kube-apiserverå¯åŠ¨å‚æ•°--service-cluster-ip-rangeæŒ‡å®šçš„IPèŒƒå›´å†…&lt;/p&gt;
&lt;p&gt;kube-apiserverçš„é…ç½®æ–‡ä»¶åœ¨/etc/kubernetes/manifestsç›®å½•ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;pgc-img&quot;&gt;&lt;img src=&quot;https://p1-tt-ipv6.byteimg.com/img/pgc-image/a112fa9f99944c0abf4890d0b11303a1~tplv-tt-shrink:640:0.image&quot;/&gt;&lt;p class=&quot;pgc-img-caption&quot;&gt;Â &lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;ï¼ˆ3ï¼‰ä¿®æ”¹æ¯å°Nodeä¸Šçš„kubeletå‚æ•°&lt;/p&gt;
&lt;p&gt;æ·»åŠ ä»¥ä¸‹ä¸¤ä¸ªå‚æ•°ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
--cluster_dns=169.169.0.100: ä¸ºdnsæœåŠ¡çš„clusterIPåœ°å€
--cluster_domain=cluster.local: ä¸ºdnsæœåŠ¡ä¸­è®¾ç½®çš„åŸŸå
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;æ¯”å¦‚æˆ‘è¿™è¾¹çš„æ˜¯è¿™æ ·ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
vim /usr/lib/systemd/system/kubelet.service.d/10-kubeadm.conf
#æ·»åŠ å¦‚ä¸‹ä¸€è¡Œ
Environment=&quot;KUBELET_DNS_ARGS=--cluster-dns=10.96.0.10 --cluster-domain=cluster.local&quot;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ç„¶åé‡å¯kubeletï¼Œä½¿ç”¨ps -ef | grep kubeletæŸ¥çœ‹æ˜¯å¦ç”Ÿæ•ˆ&lt;/p&gt;
&lt;p&gt;é‡å¯kubelet&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
systemctl stop kubelet
systemctl daemon-reload
systemctl start kubelet
&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;pgc-img&quot;&gt;&lt;img src=&quot;https://p1-tt-ipv6.byteimg.com/img/pgc-image/2a6d154296fa485386ff329b93fb6eb7~tplv-tt-shrink:640:0.image&quot;/&gt;&lt;p class=&quot;pgc-img-caption&quot;&gt;Â &lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;ä¿®æ”¹å®Œå‚æ•°ä¹‹åï¼Œå¯åŠ¨dns&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
kubectl create -f skydns-rc.yaml
kubectl create -f skydns-svc.yaml
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ï¼ˆ4ï¼‰éªŒè¯&lt;/p&gt;
&lt;p&gt;å¯åŠ¨ä¸€ä¸ªbusyboxå®¹å™¨ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;34&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
apiVersion: v1
kind: Pod
metadata:
  name: busybox
  labels:
    name: busybox
  namespace: default
spec:
  containers:
  - image: busybox
    imagePullPolicy: IfNotPresent
    command:
      - sleep
      - &quot;3600&quot;
    name: busybox
  restartPolicy: Always
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;å¯åŠ¨ä¹‹åè¿›å…¥å®¹å™¨å†…éƒ¨ï¼š&lt;/p&gt;
&lt;pre class=&quot;syl-page-code hljs nginx&quot;&gt;
&lt;code&gt;&lt;span class=&quot;hljs-attribute&quot;&gt;nsloogup æœåŠ¡å&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;div class=&quot;pgc-img&quot;&gt;&lt;img src=&quot;https://p1-tt-ipv6.byteimg.com/img/pgc-image/52ee59e2c74d4b52a7e67c42c2691a92~tplv-tt-shrink:640:0.image&quot;/&gt;&lt;p class=&quot;pgc-img-caption&quot;&gt;Â &lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;å¯çŸ¥è§£æåçš„ipæ˜¯10.102.184.126ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åæŸ¥æ‰¾å¯¹åº”çš„redis çš„Serviceçš„ipï¼Œå¯ä»¥çœ‹åˆ°ï¼Œä¸¤ä¸ªIPæ˜¯å¯¹çš„ä¸Šçš„ã€‚&lt;/p&gt;
&lt;div class=&quot;pgc-img&quot;&gt;&lt;img src=&quot;https://p6-tt-ipv6.byteimg.com/img/pgc-image/9bc3129ab3e84c59be3515e3ce3402b2~tplv-tt-shrink:640:0.image&quot;/&gt;&lt;p class=&quot;pgc-img-caption&quot;&gt;Â &lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;åˆä¾‹å¦‚ä¹‹å‰çš„springbootè¿æ¥redisï¼š&lt;/p&gt;
&lt;p&gt;åœ¨æ„å»ºé•œåƒçš„æ—¶å€™ç›´æ¥ä½¿ç”¨ipï¼Œè¿™æ¬¡æ”¹ä¸ºä½¿ç”¨æœåŠ¡åï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
FROM centos:7


LABEL author=lsy


ENV path=/usr/soft


RUN mkdir ${path}


WORKDIR ${path}


ADD jdk-8u191-linux-x64.tar.gz ${path}


ENV JAVA_HOME=${path}/jdk1.8.0_191
ENV CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
ENV PATH=$JAVA_HOME/bin:$PATH


COPY k8s_demo-1.0.jar ${path}


EXPOSE 8080


CMD  java -jar -DredisIp=redis k8s_demo-1.0.jar
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ç„¶åè¿›è¡Œé•œåƒæ„å»ºï¼š&lt;/p&gt;
&lt;div class=&quot;pgc-img&quot;&gt;&lt;img src=&quot;https://p1-tt-ipv6.byteimg.com/img/pgc-image/87e7876b043449cd8b1323dc3dbc3ff7~tplv-tt-shrink:640:0.image&quot;/&gt;&lt;p class=&quot;pgc-img-caption&quot;&gt;Â &lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;ç„¶åæ”¹ä¸ºä½¿ç”¨å½“å‰é•œåƒè¿›è¡Œå®¹å™¨çš„æ„å»ºï¼Œä¹‹ååˆ›å»ºå®¹å™¨&lt;/p&gt;
&lt;p&gt;æµ‹è¯•ï¼š&lt;/p&gt;
&lt;p&gt;è®¾ç½®å€¼ï¼š&lt;/p&gt;
&lt;div class=&quot;pgc-img&quot;&gt;&lt;img src=&quot;https://p26-tt.byteimg.com/img/pgc-image/93f2997621254d85bcf2af9c3371a90b~tplv-tt-shrink:640:0.image&quot;/&gt;&lt;p class=&quot;pgc-img-caption&quot;&gt;Â &lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;å–å€¼ï¼š&lt;/p&gt;
&lt;div class=&quot;pgc-img&quot;&gt;&lt;img src=&quot;https://p1-tt-ipv6.byteimg.com/img/pgc-image/be167c517a794d9194a667e31b7a02ef~tplv-tt-shrink:640:0.image&quot;/&gt;&lt;p class=&quot;pgc-img-caption&quot;&gt;Â &lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;ç»“å°¾ï¼š&lt;/p&gt;
&lt;p&gt;ç¥æ„¿å¤§å®¶åœ¨æ–°çš„ä¸€å¹´é‡Œå¿ƒæƒ³äº‹æˆï¼ï¼ï¼&lt;/p&gt;
</description>
<pubDate>Sun, 03 Jan 2021 15:11:00 +0000</pubDate>
<dc:creator>Liusy01</dc:creator>
<og:description>ä¸€ã€å¯¼è¯» åœ¨ä½¿ç”¨k8séƒ¨ç½²springboot+redisç®€å•åº”ç”¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œspring bootè¿æ¥redisæ˜¯ç›´æ¥ä½¿ç”¨çš„IPè¿æ¥ï¼Œé‚£ä¹ˆå¯ä¸å¯ä»¥ç›´æ¥ä½¿ç”¨æœåŠ¡åç§°è¿›è¡Œè¿æ¥å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œè¿™å°±æ˜¯k8</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/liusy01/p/14227422.html</dc:identifier>
</item>
<item>
<title>å¦‚ä½•æ ¹æ®è§’è‰²æ‰¹é‡æ¿€æ´»SAP FioriæœåŠ¡ - SAPæ¢¦å¿ƒ</title>
<link>http://www.cnblogs.com/saper/p/14227421.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/saper/p/14227421.html</guid>
<description>&lt;p&gt;&lt;span&gt;Â æˆ‘ä»¬çŸ¥é“Fioriçš„è§’è‰²è·ŸERPçš„è§’è‰²æ˜¯ä¸é€šç”¨çš„ï¼Œå³ä½¿ä½ çš„è´¦å·æœ‰SAP_ALLçš„æƒé™ï¼Œä½†æ‰“å¼€Fioriçš„æ—¶å€™ä¸€æ ·æ˜¯ç©ºçš„ä¸€ç‰‡ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/A7bLdtJnUNU1gvBhXGicY0UfwK1uD0LbnKzptQyicURzf68TmhEw4AMcM6PcrKuyGGXibz4hjy43ITkNHibDHianSyg/640?wx_fmt=png&quot; width=&quot;760&quot; height=&quot;473&quot; class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.62265625&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;åªæœ‰ç»™è´¦å·åŠ ä¸Šfioriéœ€è¦çš„è§’è‰²ï¼Œå¹¶æ¿€æ´»ç›¸å…³æœåŠ¡æ‰èƒ½ç”¨fiori appï¼Œå¦åˆ™æ‰“å¼€Fiori appsä¼šæŠ¥é”™ï¼Œå…·ä½“é”™è¯¯å¯ä»¥é€šè¿‡GUIäº‹åŠ¡ä»£ç ï¼š/n/iwfnd/error_log æŸ¥çœ‹å…·ä½“çš„åŸå› ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;é¦–å…ˆæ‰“å¼€fioriæ”¯æŒåº“ç½‘ç«™ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;https://fioriappslibrary.hana.ondemand.com/sap/fix/externalViewer/#&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;åœ¨å·¦ä¾§é€‰æ‹©ï¼šSAP Fiori apps for SAP S/4HANA&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/A7bLdtJnUNU1gvBhXGicY0UfwK1uD0LbnPtZKZiakZm7iavDQrYNIcb1eG3BWQ19soH47GBWlVceP3KGuDk5ZZjew/640?wx_fmt=png&quot; width=&quot;751&quot; height=&quot;385&quot; class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.51328125&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;åœ¨è¿™é‡Œé¢å°±å¯ä»¥æ ¹æ®å¤šç§æ–¹å¼æŸ¥è¯¢å‡ºç›¸å…³çš„Fiori appsï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬é€‰æ‹©é€šè¿‡è§’è‰²by Rolesæ¥æŸ¥è¯¢ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/A7bLdtJnUNU1gvBhXGicY0UfwK1uD0LbnNBDwu4SBTaZ24GPjmOwDVQAXUXTNicW03To4ZLyJFcSZDjoB1Bk9q0w/640?wx_fmt=png&quot; width=&quot;695&quot; height=&quot;357&quot; class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.5140625&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;è¿™æ ·å°±å¯ä»¥é€šè¿‡åç§°æŸ¥è¯¢å‡ºè§’è‰²ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/A7bLdtJnUNU1gvBhXGicY0UfwK1uD0Lbncl4DOzUK71S1O90OU9GYt4d0YzGWSB03gJSLVQib9xgkxT7vyRjXsuw/640?wx_fmt=png&quot; width=&quot;676&quot; height=&quot;331&quot; class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.48984375&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å½“ç„¶ä½ ä¹Ÿå¯ä»¥é€šè¿‡å…¶ä»–æ–¹å¼ï¼Œä½†æœ€ç»ˆçš„ç›®çš„éƒ½æ˜¯ä¸€æ ·ï¼Œè·å–æˆ‘ä»¬éœ€è¦çš„è§’è‰²åç§°ï¼Œæœ‰äº†è¿™ä¸ªè§’è‰²åç§°ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡å®ƒåœ¨GUIé‡Œé¢è¿›è¡Œæ¿€æ´»ç›¸å…³çš„ICF Serviceså’ŒOData Servicesï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ä»¥è§’è‰²ï¼šSAP_BR_CASH_MANAGER ä¸ºä¾‹ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å¯ä»¥åœ¨ç½‘ç«™ä¸ŠæŸ¥è¯¢åˆ°ç›¸å…³çš„icfæœåŠ¡ä»¥åŠOdataæœåŠ¡åç§°ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/A7bLdtJnUNU1gvBhXGicY0UfwK1uD0LbngL85ItD3yLTEdTibJeiaicrwqRJc5C7alWsHTOaTH44BnkicNLErTgOe8Q/640?wx_fmt=png&quot; width=&quot;661&quot; height=&quot;378&quot; class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.57265625&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;é¦–å…ˆåœ¨GUIæ‰§è¡ŒSTC01ï¼Œè¾“å…¥ï¼šSAP_FIORI_CONTENT_ACTIVATION&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/A7bLdtJnUNU1gvBhXGicY0UfwK1uD0LbneBIGIV1lkqwsMNqfcLfJzHANmrib6ibcsL7w3lFfEfppmAcDibjJ6XIvg/640?wx_fmt=png&quot; width=&quot;614&quot; height=&quot;228&quot; class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.371713508612874&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;1103&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æ‰§è¡Œä¹‹åï¼Œé€‰ä¸­ç¬¬ä¸€ä¸ªå¤é€‰æ¡†ï¼Œåœ¨ç‚¹å‡»è¾“å…¥å‚æ•°æŒ‰é’®ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/A7bLdtJnUNU1gvBhXGicY0UfwK1uD0LbngEovxtYYA6wp08gRib8ZyI4ic4kKKCHicUA3qDYiaVyia0icH7MVM8L8HiaUw/640?wx_fmt=png&quot; width=&quot;650&quot; height=&quot;333&quot; class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.5122838944494995&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;1099&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;è¾“å…¥æˆ‘ä»¬æƒ³è¦æ¿€æ´»çš„è§’è‰²ï¼Œå½“ç„¶è¿™é‡Œä¹Ÿå¯ä»¥è¾“å…¥å¤šæ¡è§’è‰²ï¼Œå»ºè®®ä¸€æ¬¡æ€§ä¸è¦è¶…è¿‡100æ¡ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/A7bLdtJnUNU1gvBhXGicY0UfwK1uD0Lbnias3csBoXg75MKB25lAcWhyko7Gd2XgGtf0JYp4qKvo4TseAAzgvd2g/640?wx_fmt=png&quot; width=&quot;709&quot; height=&quot;377&quot; class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.5317604355716878&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;1102&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;è¾“å…¥ä¹‹åï¼Œç‚¹å‡»â€œJobâ€æŒ‰é’®æ‰§è¡Œ&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/A7bLdtJnUNU1gvBhXGicY0UfwK1uD0LbnHUtaA3DfVSxqZL38jcPh7B1icGibtrat6EibaKWnCEvCdYFotpu6VvOwg/640?wx_fmt=png&quot; width=&quot;680&quot; height=&quot;354&quot; class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.5204359673024523&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;1101&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ä»æ‰§è¡Œä»»åŠ¡åˆ—è¡¨é‡Œé¢å¯ä»¥çœ‹åˆ°ç³»ç»Ÿä¼šåŒæ­¥æ¿€æ´»icfå’ŒodataæœåŠ¡ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/A7bLdtJnUNU1gvBhXGicY0UfwK1uD0Lbn3rf9Lm8JCBo4ArTuqPic18wiaO9RRMPnjQ8Xl5Gxouqr21j8rLb9eaiaQ/640?wx_fmt=png&quot; width=&quot;720&quot; height=&quot;424&quot; class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.5892531876138434&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;1098&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æ‰§è¡Œå®Œæˆï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/A7bLdtJnUNU1gvBhXGicY0UfwK1uD0LbnFiaCLdLYZl2GN5Tia7hib6cWyZhnNlV7icKZBoSSjNhUggLKjo6CJX1E3Q/640?wx_fmt=png&quot; width=&quot;712&quot; height=&quot;377&quot; class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.529891304347826&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;1104&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;åœ¨äº‹åŠ¡ä»£ç ï¼š/N/IWFND/MAINT_SERVICE å¯ä»¥çœ‹åˆ°ç›¸å…³çš„OdataæœåŠ¡å·²ç»æ¿€æ´»äº†ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/A7bLdtJnUNU1gvBhXGicY0UfwK1uD0LbnQlgQj3CrZEqeBjnOnHmVBPM5trXK3FkVHV85EpmG35dLtStL7uy8vw/640?wx_fmt=png&quot; width=&quot;763&quot; height=&quot;656&quot; class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.8598553345388789&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;1106&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ç›¸å…³çš„ICFæœåŠ¡ä¹Ÿå¤„äºæ¿€æ´»çŠ¶æ€ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/A7bLdtJnUNU1gvBhXGicY0UfwK1uD0LbnHkYF1Ub2TXExaATloYXzJw57JUqHic5ozWsrsvFc24B87iausTiagRRkA/640?wx_fmt=png&quot; width=&quot;752&quot; height=&quot;630&quot; class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.8378623188405797&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;1104&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æˆ‘ä»¬å°†è¿™ä¸ªè§’è‰²èµ‹ç»™ç”¨æˆ·ï¼Œå°±å¯ä»¥æ‰“å¼€Fioriçœ‹åˆ°ç›¸å…³çš„Fiori appsäº†ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/A7bLdtJnUNU1gvBhXGicY0UfwK1uD0Lbnibpmd8QvXcSFOSxahxFDlrJTR9XrwRVD4Ciab6aJUQh3fWZToW1ZITSg/640?wx_fmt=png&quot; class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.7535714285714286&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;840&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/A7bLdtJnUNU1gvBhXGicY0UfwK1uD0LbndMD0TSsBOCqpO2hfdDQLu21OnFFgNfNgfC1pEG52Dicvdx6TNvV2bibw/640?wx_fmt=png&quot; width=&quot;750&quot; height=&quot;465&quot; class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.6203125&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/A7bLdtJnUNU1gvBhXGicY0UfwK1uD0Lbn82pFXy5Rul6J88IMc1ysBuAeJ706qAnNuooziakBffRpoJgbTymBh2g/640?wx_fmt=png&quot; width=&quot;702&quot; height=&quot;436&quot; class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.62109375&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://mmbiz.qpic.cn/mmbiz_png/A7bLdtJnUNU1gvBhXGicY0UfwK1uD0Lbn6vT8aBD5m7EbLubdC8ibibkdQeQ96tE4Vrs5g1ibbItySRXqsTvmUIPgg/640?wx_fmt=png&quot; width=&quot;736&quot; height=&quot;579&quot; class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.787109375&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;1024&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;br/&gt;&lt;span&gt;ä»¥ä¸Šè¿™ç§æ–¹å¼æ˜¯è®©ç³»ç»Ÿå¸®æˆ‘ä»¬æå®šæ‰€éœ€çš„æœåŠ¡ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨å»æ¿€æ´»å„é¡¹æœåŠ¡ï¼Œç»“æœéƒ½æ˜¯ä¸€æ ·çš„ï¼&lt;/span&gt;&lt;/p&gt;
</description>
<pubDate>Sun, 03 Jan 2021 15:11:00 +0000</pubDate>
<dc:creator>SAPæ¢¦å¿ƒ</dc:creator>
<og:description>æˆ‘ä»¬çŸ¥é“Fioriçš„è§’è‰²è·ŸERPçš„è§’è‰²æ˜¯ä¸é€šç”¨çš„ï¼Œå³ä½¿ä½ çš„è´¦å·æœ‰SAP_ALLçš„æƒé™ï¼Œä½†æ‰“å¼€Fioriçš„æ—¶å€™ä¸€æ ·æ˜¯ç©ºçš„ä¸€ç‰‡ï¼š åªæœ‰ç»™è´¦å·åŠ ä¸Šfioriéœ€è¦çš„è§’è‰²ï¼Œå¹¶æ¿€æ´»ç›¸å…³æœåŠ¡æ‰èƒ½ç”¨fiori app</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/saper/p/14227421.html</dc:identifier>
</item>
</channel>
</rss>