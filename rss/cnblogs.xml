<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>åšå®¢å›­_é¦–é¡µ</title>
<link></link>
<description>ä»£ç æ”¹å˜ä¸–ç•Œ</description>
<item>
<title>ã€è¯»ä¹¦ç¬”è®°ã€‘å…³äºã€Šç²¾é€šC#(ç¬¬6ç‰ˆ)ã€‹ä¸ã€ŠC#5.0å›¾è§£æ•™ç¨‹ã€‹ä¸­çš„ä¸€ç‚¹çŸ›ç›¾çš„åœ°æ–¹ - shanzm</title>
<link>http://www.cnblogs.com/shanzhiming/p/12275431.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/shanzhiming/p/12275431.html</guid>
<description>&lt;p&gt;å¿—é“­-2020å¹´2æœˆ8æ—¥ 03:32:03&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;å…ˆè¯´æ˜ï¼Œè¿™æ˜¯ä¸€ä¸ªæ—§é—®é¢˜ï¼Œå¾ˆä¹…å¾ˆä¹…ä»¥å‰å¤§å®¶å°±è®¨è®ºäº†ï¼Œ&lt;/p&gt;
&lt;p&gt;å“ˆå“ˆå“ˆï¼Œè€Œä¸”å…ˆå£°æ˜è¿™æ˜¯ä¸€ä¸ªå¾ˆæ— èŠçš„é—®é¢˜ï¼ŒğŸ˜…ï¼&lt;/p&gt;
&lt;p&gt;åªæ˜¯ä»¥å‰æˆ‘ä¸äº†è§£ï¼Œä»Šå¤©æˆ‘é‡åˆ°äº†ï¼Œæ•…è®°å½•äºæ­¤ã€‚&lt;/p&gt;
&lt;p&gt;ã€Šç²¾é€šC#(ç¬¬6ç‰ˆ)ã€‹P571ï¼šè¯´æ˜ï¼šâ€œå¦‚æœå¼‚æ­¥è°ƒç”¨ä¸€ä¸ªæ— è¿”å›å€¼çš„æ–¹æ³•ï¼Œä»…ä»…è°ƒç”¨BeginInvoke()å°±å¯ä»¥äº†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç¼“å­˜IAsyncResultå…¼å®¹å¯¹è±¡ï¼Œä¹Ÿä¸éœ€è¦é¦–å…ˆè°ƒç”¨EndInvoke()ï¼ˆå› ä¸ºæ²¡æœ‰æ”¶åˆ°è¿”å›å€¼ï¼‰ã€‚â€&lt;/p&gt;
&lt;p&gt;ã€ŠC#5.0å›¾è§£æ•™ç¨‹ã€‹P432ï¼šè¯´æ˜ï¼šâ€œå› ä¸ºEndInvokeæ˜¯ä¸ºå¼€å¯çš„çº¿ç¨‹è¿›è¡Œæ¸…ç†ï¼Œæ‰€ä»¥å¿…é¡»ç¡®ä¿å¯¹æ¯ä¸€ä¸ªBeginInvokeéƒ½è°ƒç”¨EndInvokeã€‚â€&lt;/p&gt;
&lt;p&gt;å¥½åƒä¸¤æœ¬ä¹¦ä¸­å¯¹æ­¤çš„è§‚ç‚¹ä¸ä¸€æ ·,&lt;/p&gt;
&lt;p&gt;å…¶å®å…³äºEndInvoke()å’ŒEndInvoke()æ˜¯å¦ä¸€å®šè¦é…å¯¹ä½¿ç”¨ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥çœç•¥EndInvoke()çš„è®¨è®ºæœ‰å¾ˆå¤šï¼Œè€Œä¸”ç°åœ¨å‡ ä¹å°±æ²¡æœ‰äººåœ¨æŸ¥é˜…è¿™ä¸ªé—®é¢˜äº†ï¼Œå› ä¸ºç°åœ¨å¤§å®¶éƒ½ä¸åœ¨ä½¿ç”¨APMå¼‚æ­¥ç¼–ç¨‹æ¨¡å¼äº†ï¼&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯æ—¢ç„¶æˆ‘é‡åˆ°äº†ï¼Œé‚£æˆ‘å°±æŸ¥ä¸€æŸ¥å‘—&lt;/p&gt;
&lt;p&gt;ç½‘ä¸Šè®¨è®ºå¯ä»¥å‚è€ƒï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://q.cnblogs.com/q/57002/&quot;&gt;åšå®¢å›­:BeginInvoke å¦‚æœä¸è°ƒç”¨EndInvokeä¼šæ€ä¹ˆæ ·ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/qq_27508477/article/details/88045121&quot;&gt;CSDN : C#å¼‚æ­¥å§”æ‰˜BeginInvokeæ˜¯å¦å¿…é¡»å’ŒEndInvokeæˆå¯¹è°ƒç”¨ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è·¯äººç”²è¯´ï¼šBeginInvoke()å’ŒEndInvoke()å¿…é¡»é…å¯¹ä½¿ç”¨ï¼Œä»¥ä¾¿æ¸…ç†çº¿ç¨‹æ± èµ„æºï¼Œ&lt;/p&gt;
&lt;p&gt;è·¯äººä¹™è¯´ï¼šåªè¦ä½ ä¸éœ€è¦æ¥æ”¶å¼‚æ­¥æ“ä½œçš„è¿”å›å€¼ä¸”ä¸æŸ¥çœ‹å¼‚æ­¥æ“ä½œçš„çŠ¶æ€å°±å¯ä»¥ä¸è°ƒç”¨EndInvoke()ï¼Œè€Œä¸”å³ä½¿ä¸ç”¨EndInvoke()æ¸…ç†çº¿ç¨‹ï¼ŒGCä¹Ÿä¼šå¾ˆå¿«çš„æ¸…ç†ç”¨å®Œçš„Delegateå¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;æŸ¥é˜…&lt;a href=&quot;https://stackoverflow.com/questions/532722/is-endinvoke-optional-sort-of-optional-or-definitely-not-optional&quot;&gt;StackOverFlow:Is EndInvoke() optional, sort-of optional, or definitely not optional?&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°æœ€é«˜èµç­”æ¡ˆå¦‚ä¸‹ï¼Œæˆªå›¾ç¿»è¯‘äº†ä¸€ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1576687/202002/1576687-20200208035826832-294605463.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç®€å•çš„è¯´åœ¨MSDNä¸­ä¸¤ä¸­è¯´æ³•éƒ½æœ‰ï¼Œå†™ä¸å†™éƒ½å¯ä»¥ï¼&lt;/p&gt;
&lt;p&gt;å¥½å§ï¼Œä¸€èˆ¬æˆ‘æŸ¥é˜…é—®é¢˜å¯èƒ½å°±å¾—å‡ºç»“è®ºäº†ï¼Œå˜¿å˜¿ï¼Œä½†æ˜¯æˆ‘æ‰‹è´±åˆçœ‹äº†ä¸‹é¢çš„ä¸€ä¸ª18èµçš„ç­”æ¡ˆï¼Œç­”æ¡ˆç»™äº†ä¸€ä¸ªè¿æ¥ï¼š&lt;/p&gt;
&lt;p&gt;æ–‡ç« è¿æ¥&lt;a href=&quot;http://www.interact-sw.co.uk/iangblog/2005/05/16/endinvokerequired&quot;&gt;EndInvoke Not Optional&lt;/a&gt;,&lt;/p&gt;
&lt;p&gt;ç®€å•çš„çœ‹çœ‹äº†ï¼Œæ–‡ç« ä¸­è¯´æ˜¯ä¸€ä¸ªå¤§ä½¬é•¿æœŸè¯¯å¯¼äº†ä¸€äº›äººï¼Œ&lt;/p&gt;
&lt;p&gt;ç†è®ºä¸Šï¼š&lt;code&gt;&quot;CAUTION Always call EndInvoke after your asynchronous call completes.&quot;&lt;/code&gt;ï¼ˆæ³¨æ„ï¼Œå¼‚æ­¥è°ƒç”¨å®Œæˆåä¸€å®šè¦è°ƒç”¨EndInvokeï¼‰&lt;/p&gt;
&lt;p&gt;å…¶æ¬¡ï¼Œæ–‡ç« æåˆ°ï¼š&lt;br/&gt;â€œ&lt;code&gt;Microsoft obviously have the right to relax this requirement in the future if they want to, but for now, you have to call EndInvoke.&lt;/code&gt;â€&lt;/p&gt;
&lt;p&gt;ç®€å•çš„ç¿»è¯‘ä¸€ä¸‹ï¼šå¾®è½¯æ˜¾ç„¶æœ‰æƒåˆ©åœ¨å°†æ¥æ”¾å®½è¿™ä¸€è¦æ±‚ï¼Œä½†ç°åœ¨ï¼Œæ‚¨å¿…é¡»è°ƒç”¨EndInvokeï¼ˆå“ˆå“ˆï¼Œè¿™å¥æ˜¯2005å¹´ä»¥å‰çš„æƒ…å½¢ï¼Œç°åœ¨å¦‚ä½•ï¼Œå°±ä¸è€ƒè¯äº†ï¼Œå˜¿å˜¿ï¼ï¼‰&lt;/p&gt;
&lt;p&gt;å…¶å®å‘€ï¼Œ&lt;strong&gt;ç®€è€Œè¨€ä¹‹ï¼Œè°ƒç”¨EndInvokeä¸€å®šæ²¡åå¤„&lt;/strong&gt;&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;æˆ‘çš„ç†è§£å°±æ˜¯ï¼Œåœ¨æ²¡æœ‰è¿”å›å€¼çš„å¼•ç”¨å‡½æ•°æ—¶å®ç°å¼‚æ­¥ï¼Œä¸ä½¿ç”¨EndInvoke,&lt;/p&gt;
&lt;p&gt;å°±æ˜¯ç›¸å½“äº&lt;code&gt;async &amp;amp; await&lt;/code&gt;å…³é”®å­—å®ç°è¿”å›å€¼ä¸º&lt;code&gt;void&lt;/code&gt;çš„å¼‚æ­¥æ–¹æ³•ï¼Œ&lt;/p&gt;
&lt;p&gt;å³ä¸éœ€è¦å¯¹è¯¥å¼‚æ­¥æ–¹æ³•è¿›ä¸€æ­¥äº¤äº’ï¼Œç§°ä¹‹ä¸ºï¼šè°ƒç”¨å¹¶å¿˜è®°ï¼ˆfire and forgetï¼‰ï¼Œ&lt;/p&gt;
&lt;p&gt;è®¸å¤šæ—¶å€™å¼‚æ­¥ç¼–ç¨‹å°±æ˜¯éœ€è¦è¿™æ ·å‘€ï¼åªæ˜¯ç°åœ¨æˆ‘ä»¬ä¸€èˆ¬éƒ½ä¸ä½¿ç”¨APMæ¨¡å¼ç½¢äº†ï¼&lt;/p&gt;
</description>
<pubDate>Fri, 07 Feb 2020 20:07:00 +0000</pubDate>
<dc:creator>shanzm</dc:creator>
<og:description>å¿—é“­ 2020å¹´2æœˆ8æ—¥ 03:32:03 å…ˆè¯´æ˜ï¼Œè¿™æ˜¯ä¸€ä¸ªæ—§é—®é¢˜ï¼Œå¾ˆä¹…å¾ˆä¹…ä»¥å‰å¤§å®¶å°±è®¨è®ºäº†ï¼Œ å“ˆå“ˆå“ˆï¼Œè€Œä¸”å…ˆå£°æ˜è¿™æ˜¯ä¸€ä¸ªå¾ˆæ— èŠçš„é—®é¢˜ï¼Œ&amp;#128517;ï¼ åªæ˜¯ä»¥å‰æˆ‘ä¸äº†è§£ï¼Œä»Šå¤©æˆ‘é‡åˆ°äº†ï¼Œæ•…è®°å½•äºæ­¤</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/shanzhiming/p/12275431.html</dc:identifier>
</item>
<item>
<title>å›¾åƒå¢å¼ºä¹‹ç©ºé—´åŸŸé”åŒ– - å•Šå“ˆå½­</title>
<link>http://www.cnblogs.com/pingwen/p/12275235.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/pingwen/p/12275235.html</guid>
<description>&lt;p&gt;&lt;span&gt;&lt;strong&gt;1&lt;/strong&gt;&lt;strong&gt;ã€å›¾åƒé”åŒ–ç†è®º&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å›¾åƒé”åŒ–çš„ç›®çš„æ˜¯ä½¿å›¾åƒå˜å¾—æ¸…æ™°èµ·æ¥ï¼Œé”åŒ–ä¸»è¦ç”¨äºå¢å¼ºå›¾åƒçš„ç°åº¦è·³å˜éƒ¨åˆ†ï¼Œè¿™ä¸€ç‚¹ä¸å›¾åƒå¹³æ»‘å¯¹ç°åº¦è·³å˜çš„æŠ‘åˆ¶æ­£å¥½ç›¸åã€‚é”åŒ–æé«˜å›¾åƒçš„é«˜é¢‘åˆ†é‡ï¼Œå¢åŠ ç°åº¦åå·®å¢å¼ºå›¾åƒçš„è¾¹ç¼˜å’Œè½®å»“ï¼Œä»¥ä¾¿åæœŸå›¾åƒè¯†åˆ«ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;åœ¨å›¾åƒå¢å¼ºè¿‡ç¨‹ä¸­ï¼Œå¸¸ç”¨å¹³æ»‘ç®—æ³•æ¥æ¶ˆé™¤å™ªå£°ï¼Œå¹³æ»‘å±äºä½é€šæ»¤æ³¢ï¼Œå›¾åƒçš„èƒ½é‡ä¸»è¦é›†ä¸­åœ¨ä½é¢‘éƒ¨åˆ†ï¼Œå™ªå£°æ‰€åœ¨é¢‘æ®µä¸»è¦åœ¨é«˜é¢‘éƒ¨åˆ†ï¼ŒåŒæ—¶å›¾åƒçš„è¾¹ç¼˜ä¹Ÿé›†ä¸­åœ¨é«˜é¢‘éƒ¨åˆ†ï¼Œè¿™æ„å‘³ç€å›¾åƒå¹³æ»‘åï¼Œé«˜é¢‘è¢«è¡°å‡è½®å»“ä¼šå‡ºç°æ¨¡ç³Šã€‚å›¾åƒé”åŒ–å°±æ˜¯ä¸ºäº†å‡å°‘è¿™ç§ç°è±¡ï¼Œé€šè¿‡é«˜é€šæ»¤æ³¢ä½¿å›¾åƒè¾¹ç¼˜å’Œè½®å»“å˜å¾—æ¸…æ™°ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;2&lt;/strong&gt;&lt;strong&gt;ã€ä¸€é˜¶å¾®åˆ†å›¾åƒå¢å¼º--æ¢¯åº¦ç®—å­&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/743748/202002/743748-20200207234555895-1554547358.png&quot; alt=&quot;&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å…¶ä¸­ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/743748/202002/743748-20200207234649953-475458370.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æ¢¯åº¦çš„æ–¹å‘å°±æ˜¯å‡½æ•°&lt;span lang=&quot;EN-US&quot;&gt;f(x,y)&lt;/span&gt;æœ€å¤§å˜åŒ–ç‡çš„æ–¹å‘ã€‚æ¢¯åº¦çš„å¹…å€¼ä½œä¸ºæœ€å¤§å˜åŒ–ç‡å¤§å°çš„åº¦é‡ï¼Œå€¼ä¸ºï¼šÂ Â &lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/743748/202002/743748-20200207234719502-1782369155.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ç¦»æ•£çš„äºŒç»´å‡½æ•°&lt;span lang=&quot;EN-US&quot;&gt;f(i,j)&lt;/span&gt;ï¼Œå¯ä»¥ç”¨æœ‰é™å·®åˆ†ä½œä¸ºæ¢¯åº¦çš„ä¸€ä¸ªè¿‘ä¼¼å€¼ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/743748/202002/743748-20200207234806002-253393167.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ä¸ºäº†ç®€åŒ–è®¡ç®—ï¼Œå¯ä»¥ç”¨ç»å¯¹å€¼æ¥è¿‘ä¼¼ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;|&lt;/span&gt;â–½&lt;span lang=&quot;EN-US&quot;&gt;f(i,j)|= |f(i+1,j)-f(i,j)| +|f(i,j+1)-f(i,j)|&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span lang=&quot;EN-US&quot;&gt;2.1 Robert&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;ç®—å­&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot; align=&quot;center&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;Â  Â |&lt;/span&gt;â–½&lt;span lang=&quot;EN-US&quot;&gt;f(i,j)|= |f(i+1,j+1)-f(i,j)| +|f(i,j+1)-f(i+1,j)|&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;ä¸Šé¢ç®—å¼é‡‡ç”¨å¯¹è§’ç›¸å·®çš„å·®åˆ†æ³•æ¥ä»£æ›¿å¾®åˆ†ï¼Œå†™ä¸ºæ»¤æ³¢æ¨¡æ¿å½¢å¼ä¸ºï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/743748/202002/743748-20200207234852402-270200900.png&quot; alt=&quot;&quot;/&gt;å…¶ä¸­&lt;span lang=&quot;EN-US&quot;&gt;w1&lt;/span&gt;å¯¹æ¥è¿‘&lt;span lang=&quot;EN-US&quot;&gt;45Â°&lt;/span&gt;çš„è¾¹ç¼˜æœ‰è¾ƒå¼ºå“åº”ï¼Œ&lt;span lang=&quot;EN-US&quot;&gt;w2&lt;/span&gt;å¯¹æ¥è¿‘&lt;span lang=&quot;EN-US&quot;&gt;-45Â°&lt;/span&gt;çš„è¾¹ç¼˜æœ‰è¾ƒå¼ºå“åº”ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;61&quot;&gt;
&lt;pre&gt;
&lt;span&gt;imgPath = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;E:\opencv_pic\src_pic\pic6.bmp&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
img &lt;/span&gt;=&lt;span&gt; imread(imgPath);
img&lt;/span&gt;=&lt;span&gt;rgb2gray(img);
w1 &lt;/span&gt;=[-&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;0&lt;/span&gt;; &lt;span&gt;0&lt;/span&gt;,&lt;span&gt;1&lt;/span&gt;&lt;span&gt;];
w2 &lt;/span&gt;=[&lt;span&gt;0&lt;/span&gt;,-&lt;span&gt;1&lt;/span&gt;; &lt;span&gt;1&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;&lt;span&gt;];
 
G1&lt;/span&gt;=imfilter(img, w1, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;corr&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;replicate&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;);
G2&lt;/span&gt;=imfilter(img, w2, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;corr&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;replicate&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;);
G&lt;/span&gt;=abs(G1)+&lt;span&gt;abs(G2);
subplot(&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;1&lt;/span&gt;),imshow(img), title(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;åŸå§‹å›¾åƒ&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;);
subplot(&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;),imshow(abs(G1)), title(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;w1å›¾åƒ&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;);
subplot(&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;3&lt;/span&gt;),imshow(abs(G2)),title(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;w2æ»¤æ³¢&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;);
subplot(&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;4&lt;/span&gt;),imshow(G),title(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Robertäº¤å‰æ¢¯åº¦å›¾åƒ&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/743748/202002/743748-20200207234925803-1216116917.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å¯è§&lt;span lang=&quot;EN-US&quot;&gt;w1&lt;/span&gt;æ»¤æ³¢å&lt;span lang=&quot;EN-US&quot;&gt;45Â°&lt;/span&gt;çš„è¾¹ç¼˜è¢«çªå‡ºï¼Œ&lt;span lang=&quot;EN-US&quot;&gt;w2&lt;/span&gt;æ»¤æ³¢å&lt;span lang=&quot;EN-US&quot;&gt;-45Â°&lt;/span&gt;çš„è¾¹ç¼˜è¢«çªå‡ºã€‚&lt;span lang=&quot;EN-US&quot;&gt;Robert&lt;/span&gt;äº¤å‰æ»¤æ³¢åå…¨éƒ¨è¾¹ç¼˜çªå‡ºæ˜¾ç¤ºã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span lang=&quot;EN-US&quot;&gt;2.2 Sobel&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;ç®—å­&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;æ»¤æ³¢æ—¶ä¸€èˆ¬æ›´å¤šä½¿ç”¨å¥‡æ•°å°ºå¯¸çš„æ¨¡æ¿ï¼Œä¸‹é¢æ˜¯&lt;span lang=&quot;EN-US&quot;&gt;Sobel&lt;/span&gt;ç®—å­ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/743748/202002/743748-20200207234952272-1023473620.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;65&quot;&gt;
&lt;pre&gt;
&lt;span&gt;imgPath = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;E:\opencv_pic\src_pic\pic6.bmp&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
img &lt;/span&gt;=&lt;span&gt; imread(imgPath);
img&lt;/span&gt;=&lt;span&gt;rgb2gray(img);
 
 
w1 &lt;/span&gt;=[-&lt;span&gt;1&lt;/span&gt;,-&lt;span&gt;2&lt;/span&gt;,-&lt;span&gt;1&lt;/span&gt;; &lt;span&gt;0&lt;/span&gt;,&lt;span&gt;0&lt;/span&gt;,&lt;span&gt;0&lt;/span&gt;;  &lt;span&gt;1&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;, &lt;span&gt;1&lt;/span&gt;&lt;span&gt;];
w2 &lt;/span&gt;=[ -&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;0&lt;/span&gt;,&lt;span&gt;1&lt;/span&gt;;  -&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;0&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;; -&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;0&lt;/span&gt;,&lt;span&gt;1&lt;/span&gt;&lt;span&gt;];
G1&lt;/span&gt;=&lt;span&gt;imfilter(img, w1);
G2&lt;/span&gt;=&lt;span&gt;imfilter(img, w2);
G&lt;/span&gt;=abs(G1)+&lt;span&gt;abs(G2);
subplot(&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;1&lt;/span&gt;),imshow(img), title(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;åŸå§‹å›¾åƒ&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;);
subplot(&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;),imshow(abs(G1)), title(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;w1å›¾åƒ&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;);
subplot(&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;3&lt;/span&gt;),imshow(abs(G2)),title(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;w2æ»¤æ³¢&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;);
subplot(&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;4&lt;/span&gt;),imshow(G),title(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Sobeläº¤å‰æ¢¯åº¦å›¾åƒ&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;åŒ&lt;span lang=&quot;EN-US&quot;&gt;Robert&lt;/span&gt;ç®—å­ï¼Œ&lt;span lang=&quot;EN-US&quot;&gt;w1&lt;/span&gt;æ»¤æ³¢å&lt;span lang=&quot;EN-US&quot;&gt;45Â°&lt;/span&gt;çš„è¾¹ç¼˜è¢«çªå‡ºï¼Œ&lt;span lang=&quot;EN-US&quot;&gt;w2&lt;/span&gt;æ»¤æ³¢å&lt;span lang=&quot;EN-US&quot;&gt;-45Â°&lt;/span&gt;çš„è¾¹ç¼˜è¢«çªå‡ºã€‚&lt;span lang=&quot;EN-US&quot;&gt;Sobel&lt;/span&gt;äº¤å‰æ»¤æ³¢åå…¨éƒ¨è¾¹ç¼˜çªå‡ºæ˜¾ç¤ºã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/743748/202002/743748-20200207235022641-387363363.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span lang=&quot;EN-US&quot;&gt;3&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;ã€äºŒé˜¶å¾®åˆ†æ»¤æ³¢&lt;span lang=&quot;EN-US&quot;&gt;--&lt;/span&gt;æ‹‰æ™®æ‹‰æ–¯ç®—å­&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;äºŒç»´å‡½æ•°&lt;span lang=&quot;EN-US&quot;&gt;f(x,y)&lt;/span&gt;åœ¨äºŒé˜¶å¾®åˆ†ï¼ˆæ‹‰æ™®æ‹‰æ–¯ç®—å­ï¼‰çš„å®šä¹‰ä¸ºï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/743748/202002/743748-20200207235044841-1354958935.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/743748/202002/743748-20200207235107690-1568694105.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å°†ä¸Šå¼ç›¸åŠ åå°±å¾—åˆ°æ‹‰æ™®æ‹‰æ–¯ç®—å­ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/743748/202002/743748-20200207235135961-368122572.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;å¯¹åº”çš„æ»¤æ³¢æ¨¡æ¿å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/743748/202002/743748-20200207235148862-1850976793.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;è€ƒè™‘åˆ°æ±‚ç»å¯¹å€¼è®¡ç®—æ¢¯åº¦ï¼Œæ­£è´Ÿç³»æ•°å›¾å½¢çš„å“åº”ä¸€æ ·ï¼Œä¸Šé¢çš„æ¨¡æ¿ä¹Ÿå¯ä»¥è¡¨ç¤ºä¸ºï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/743748/202002/743748-20200207235208843-1772849037.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;ä¸Šé¢çš„æ¨¡æ¿å…·æœ‰å¯¹ç§°æ€§ï¼Œæ‰€ä»¥æ±‚ä¸€æ¬¡æ»¤æ³¢å°±å¯ä»¥ï¼Œä¸éœ€è¦åƒä¸€é˜¶å¾®åˆ†é‚£æ ·è®¡ç®—&lt;span lang=&quot;EN-US&quot;&gt;2&lt;/span&gt;æ¬¡ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;79&quot;&gt;
&lt;pre&gt;
&lt;span&gt;imgPath = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;E:\opencv_pic\src_pic\pic6.bmp&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
img &lt;/span&gt;=&lt;span&gt; imread(imgPath);
img&lt;/span&gt;=&lt;span&gt;rgb2gray(img);
 
w1 &lt;/span&gt;=[&lt;span&gt;0&lt;/span&gt;,&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;0&lt;/span&gt;;  &lt;span&gt;1&lt;/span&gt;,-&lt;span&gt;4&lt;/span&gt;,&lt;span&gt;1&lt;/span&gt;;   &lt;span&gt;0&lt;/span&gt;,&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;0&lt;/span&gt;&lt;span&gt;];
w2 &lt;/span&gt;=[&lt;span&gt;0&lt;/span&gt;,-&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;0&lt;/span&gt;; -&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;4&lt;/span&gt;,-&lt;span&gt;1&lt;/span&gt;;  &lt;span&gt;0&lt;/span&gt;,-&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;0&lt;/span&gt;&lt;span&gt;];
w3 &lt;/span&gt;=[&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;4&lt;/span&gt;,&lt;span&gt;1&lt;/span&gt;; &lt;span&gt;4&lt;/span&gt;,-&lt;span&gt;20&lt;/span&gt;,&lt;span&gt;4&lt;/span&gt;;  &lt;span&gt;1&lt;/span&gt;,&lt;span&gt;4&lt;/span&gt;,&lt;span&gt;1&lt;/span&gt;&lt;span&gt;];
G1&lt;/span&gt;=imfilter(img, w1, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;corr&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;replicate&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;);
G2&lt;/span&gt;=imfilter(img, w2, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;corr&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;replicate&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;);
G3&lt;/span&gt;=imfilter(img, w3, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;corr&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;replicate&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;);

subplot(&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;1&lt;/span&gt;),imshow(img,[]), title(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;åŸå§‹å›¾åƒ&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;);
subplot(&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;),imshow(abs(G1)), title(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;w1å›¾åƒ&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;);
subplot(&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;3&lt;/span&gt;),imshow(abs(G2)),title(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;w2æ»¤æ³¢&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;);
subplot(&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;4&lt;/span&gt;),imshow(abs(G3)),title(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;åŠ æƒäºŒé˜¶æ»¤æ³¢&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot;&gt;&lt;span&gt;äºŒé˜¶æ»¤æ³¢æ¯”ä¹‹å‰çš„ä¸€é˜¶æ»¤æ³¢é”åŒ–ç¨‹åº¦æ›´åŠ å¼ºçƒˆï¼Œç•™ä¸‹äº†éå¸¸æ¸…æ™°çš„è¾¹ç¼˜å›¾æ¡ˆã€‚&lt;span lang=&quot;EN-US&quot;&gt;w1&lt;/span&gt;å’Œ&lt;span lang=&quot;EN-US&quot;&gt;w2&lt;/span&gt;æ»¤æ³¢çš„æ–¹å‘æ€§ä¸æ˜æ˜¾å›¾åƒåŸºæœ¬ä¸€è‡´ï¼Œä»…&lt;span lang=&quot;EN-US&quot;&gt;w2&lt;/span&gt;æ»¤æ³¢å›¾åƒçš„è½®å»“æ›´åŠ æ·±ä¸€äº›ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot;&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/743748/202002/743748-20200207235237659-454913542.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ä½¿ç”¨&lt;span lang=&quot;EN-US&quot;&gt;imsharpen&lt;/span&gt;å¯¹å›¾åƒè¿›è¡Œé”åŒ–ï¼Œå¯¹é”åŒ–å¼ºåº¦å‚æ•°è¿›è¡Œæ§åˆ¶ï¼Œå¯è§å¤ªé«˜çš„é”åŒ–å¼ºåº¦å¯¼è‡´å›¾åƒå‡ºç°â€œçº¹ç†â€ï¼Œæ•ˆæœå˜å·®ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;63&quot;&gt;
&lt;pre&gt;
&lt;span&gt;b1=imsharpen(img,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Radius&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Amount&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;0.2&lt;/span&gt;&lt;span&gt;);
b2&lt;/span&gt;=imsharpen(img,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Radius&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Amount&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;&lt;span&gt;);
b3&lt;/span&gt;=imsharpen(img,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Radius&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Amount&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;1&lt;/span&gt;&lt;span&gt;);
subplot(&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;4&lt;/span&gt;,&lt;span&gt;1&lt;/span&gt;),imshow(img), title(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;åŸå§‹å›¾åƒ&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;);
subplot(&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;4&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;),imshow(b1), title(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;imsharpenå›¾åƒ1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;);
subplot(&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;4&lt;/span&gt;,&lt;span&gt;3&lt;/span&gt;),imshow(b2), title(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;imsharpenå›¾åƒ2&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;);
subplot(&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;4&lt;/span&gt;,&lt;span&gt;4&lt;/span&gt;),imshow(b3), title(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;imsharpenå›¾åƒ3&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/743748/202002/743748-20200207235303663-596485748.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span lang=&quot;EN-US&quot;&gt;4&lt;/span&gt;ã€é”åŒ–å›¾åƒåç»­å¤„ç†&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;æ— è®ºä¸€é˜¶å¾®åˆ†ç®—å­è¿˜æ˜¯äºŒé˜¶å¾®åˆ†ç®—å­ï¼Œå„ç³»æ•°ä¹‹å’Œéƒ½ä¸º&lt;span lang=&quot;EN-US&quot;&gt;0&lt;/span&gt;ï¼Œè¯´æ˜ç®—å­åœ¨ç°åº¦æ’å®šåŒºåŸŸçš„å“åº”ä¸º&lt;span lang=&quot;EN-US&quot;&gt;0&lt;/span&gt;ï¼Œå³é”åŒ–åçš„å›¾åƒï¼Œåœ¨åŸå›¾æ¯”è¾ƒå¹³å¦çš„åŒºåŸŸå‡ ä¹éƒ½å˜ä¸ºé»‘è‰²ï¼Œè€Œåœ¨å›¾åƒè¾¹ç¼˜ï¼Œç°åº¦è·³å˜ç‚¹çš„ç»†èŠ‚è¢«çªå‡ºæ˜¾ç¤ºã€‚ä¸€èˆ¬å›¾åƒé”åŒ–æ˜¯å¸Œæœ›å¢å¼ºå›¾åƒçš„è¾¹ç¼˜å’Œç»†èŠ‚ï¼Œè€Œéå°†å¹³æ»‘åŒºåŸŸçš„ç°åº¦ä¿¡æ¯ä¸¢å¤±ã€‚å› æ­¤ï¼Œå¯ä»¥ç”¨åŸå›¾åƒåŠ ä¸Šé”åŒ–åçš„å›¾åƒï¼Œå¾—åˆ°æ¯”è¾ƒç†æƒ³çš„ç»“æœã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;ä½¿ç”¨&lt;span lang=&quot;EN-US&quot;&gt;Sobel&lt;/span&gt;ç®—å­é”åŒ–å’Œ&lt;span lang=&quot;EN-US&quot;&gt;matlab&lt;/span&gt;å†…ç½®é”åŒ–å‡½æ•°é”åŒ–ä¹‹åçš„å›¾åƒå¯¹æ¯”ï¼Œä¸‹å›¾æ˜¯å†…ç½®å‡½æ•°é”åŒ–ç»“æœï¼š&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;45&quot;&gt;
&lt;pre&gt;
&lt;span&gt;b=imsharpen(img,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Radius&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Amount&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;1&lt;/span&gt;&lt;span&gt;);
subplot(&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;1&lt;/span&gt;),imshow(img), title(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;åŸå§‹å›¾åƒ&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;);
subplot(&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;),imshow(b), title(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;imsharpenå›¾åƒ&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/743748/202002/743748-20200207235322837-1805670540.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;imsharpenæ»¤æ³¢å›¾åƒæ˜æ˜¾æ¯”ç®—å­é”åŒ–çš„å›¾åƒäº®åº¦æ›´é«˜ï¼Œä¿ç•™äº†åŸå›¾æ¯”è¾ƒå¹³å¦çš„éƒ¨åˆ†ï¼Œæ¯”å¦‚èƒŒæ™¯å›¾éƒ¨åˆ†ã€‚å¦‚æœå¸Œæœ›ä¸Šé¢çš„æ»¤æ³¢å‡½æ•°ä¹Ÿè¾¾åˆ°è¿™ä¸ªæ•ˆæœï¼Œåªéœ€è¦æŠŠåŸå›¾åŠ ä¸Šæ»¤æ³¢åçš„å›¾åƒå³å¯ï¼Œç³»æ•°æ˜¯ä¸ºäº†é˜²æ­¢æº¢å‡ºï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ã€‚ä½¿ç”¨å‡½æ•°ä¸º&lt;span lang=&quot;EN-US&quot;&gt;imshow(G+0.7*img),title(&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;'Sobel&lt;/span&gt;&lt;span&gt;äº¤å‰æ¢¯åº¦å›¾åƒ&lt;span lang=&quot;EN-US&quot;&gt;'&lt;/span&gt;&lt;/span&gt;&lt;span lang=&quot;EN-US&quot;&gt;)ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/743748/202002/743748-20200207235343184-1881153787.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;5ã€å‚è€ƒæ–‡çŒ®&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;1&lt;/span&gt;ã€&lt;span lang=&quot;EN-US&quot;&gt;MATLAB--&lt;/span&gt;æ•°å­—å›¾åƒå¤„ç† å›¾åƒé”åŒ–&lt;span lang=&quot;EN-US&quot;&gt;(&lt;/span&gt;åŸç†ç¯‡&lt;span lang=&quot;EN-US&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://www.csdn.net/gather_24/MtjaMg4sMjg1OS1ibG9n.html&quot;&gt;https://www.csdn.net/gather_24/MtjaMg4sMjg1OS1ibG9n.html&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;2&lt;/span&gt;ã€&lt;span lang=&quot;EN-US&quot;&gt;imsharpen&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;&lt;a href=&quot;https://ww2.mathworks.cn/help/images/ref/imsharpen.html&quot;&gt;https://ww2.mathworks.cn/help/images/ref/imsharpen.html&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;&lt;span lang=&quot;EN-US&quot;&gt;3&lt;/span&gt;ã€ã€Šæ•°å­—å›¾åƒå¤„ç†ä¸æœºå™¨è§†è§‰ã€‹&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;ç¬¬äºŒç‰ˆã€‚ å¼ é“®ã€å¾è¶…ã€ä»»æ·‘éœã€éŸ©æµ·ç²ç­‰ç¼–è‘—ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;3.5368421052632&quot;&gt;
&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot;&gt;&lt;span&gt;Â å°Šé‡åŸåˆ›æŠ€æœ¯æ–‡ç« ï¼Œè½¬è½½è¯·æ³¨æ˜ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;MsoNormal&quot; align=&quot;left&quot;&gt;&lt;span&gt;&lt;a href=&quot;https://www.cnblogs.com/pingwen/p/12275235.html&quot;&gt;https://www.cnblogs.com/pingwen/p/12275235.html&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
<pubDate>Fri, 07 Feb 2020 16:05:00 +0000</pubDate>
<dc:creator>å•Šå“ˆå½­</dc:creator>
<og:description>å›¾åƒå¢å¼ºä¹‹ç©ºé—´åŸŸé”åŒ–</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/pingwen/p/12275235.html</dc:identifier>
</item>
<item>
<title>hadoop-2.10.0å®‰è£…hive-2.3.6 - ä¸ƒæ˜Ÿ6609</title>
<link>http://www.cnblogs.com/qixing/p/12275185.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/qixing/p/12275185.html</guid>
<description>&lt;p&gt;å…¬å¸å»ºç«‹æ•°ä»“ï¼Œhiveæ˜¯å¿…ä¸å¯å°‘çš„ï¼Œhiveæ˜¯å»ºç«‹åœ¨hadoopåŸºç¡€ä¸Šçš„æ•°æ®åº“ï¼Œå‰é¢å·²ç»æ­å»ºèµ·äº†hadoopé«˜å¯ç”¨ï¼Œè¦å­¦ä¹ hiveï¼Œå…ˆä»æ­å»ºå¼€å§‹ï¼Œä¸‹é¢æ¢³ç†ä¸€ä¸‹hiveæ­å»ºè¿‡ç¨‹&lt;/p&gt;
&lt;p&gt;1.ä¸‹è½½hiveå®‰è£…åŒ… ï¼Œä¸‹è½½åœ°å€ï¼š&lt;a href=&quot;https://hive.apache.org/downloads.html&quot;&gt;https://hive.apache.org/downloads.html&lt;/a&gt;Â &lt;/p&gt;
&lt;p&gt;æ‰¾åˆ°è‡ªå·±hadoopå¯¹åº”çš„ç‰ˆæœ¬ä¸‹è½½å®‰è£…ï¼Œæˆ‘è¿™é‡Œä¸‹è½½çš„æ˜¯Â apache-hive-2.3.6-bin.tar.gz&lt;/p&gt;
&lt;p&gt;2.å®‰è£…hiveï¼Œå°†å®‰è£…åŒ…è§£å‹åˆ°/opt/softä¸‹ï¼Œå¹¶å»ºç«‹è½¯é“¾æ¥&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
tar -zxvf apache-hive-&lt;span&gt;2.3&lt;/span&gt;.&lt;span&gt;6&lt;/span&gt;-bin.tar.gz -C /opt/soft/&lt;span&gt;
cd &lt;/span&gt;/opt/&lt;span&gt;soft
mv apache&lt;/span&gt;-hive-&lt;span&gt;2.3&lt;/span&gt;.&lt;span&gt;6&lt;/span&gt;-bin hive-&lt;span&gt;2.3&lt;/span&gt;.&lt;span&gt;6&lt;/span&gt;&lt;span&gt;
ln &lt;/span&gt;-s hive-&lt;span&gt;2.3&lt;/span&gt;.&lt;span&gt;6&lt;/span&gt; hive
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;3.é…ç½®ç¯å¢ƒå˜é‡/etc/profile&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;vim /etc/profile&lt;p&gt;#hive
export HIVE_HOME&lt;/p&gt;&lt;/span&gt;=/opt/soft/&lt;span&gt;hive
export PATH&lt;/span&gt;=$PATH:$HIVE_HOME/bin
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä¿å­˜ååˆ«å¿˜è®°ç¼–è¯‘ä¸€ä¸‹&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
source /etc/profile
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;4.é…ç½®hiveé…ç½®æ–‡ä»¶ï¼Œhiveå…ƒæ•°æ®é»˜è®¤å­˜å‚¨åˆ°derbyæ•°æ®åº“ä¸­ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨mysqlæ¥å­˜å‚¨ï¼Œhive-site.xmlé…ç½®ä¿¡æ¯è¾ƒå¤šå»ºè®®ä¸‹è½½åˆ°windowsä¸‹ä¿®æ”¹ï¼Œç„¶åå†ä¼ ä¸Šå»&lt;/p&gt;
&lt;p&gt;é¦–å…ˆå¤åˆ¶é»˜è®¤çš„é…ç½®æ–‡ä»¶æ¨¡æ¿ï¼Œé‡Œé¢å·²ç»åŒ…å«hiveæ‰€æœ‰çš„é»˜è®¤é…ç½®ä¿¡æ¯&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
cp hive-&lt;span&gt;default&lt;/span&gt;.xml.template hive-site.xml
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä¿®æ”¹hive-site.xmlé…ç½®æ–‡ä»¶ï¼Œå°†å…ƒæ•°æ®å­˜æ”¾æ•°æ®åº“æ”¹ä¸ºmysqlï¼Œåœ¨hive-site.xmlä¸­æ‰¾åˆ°ä¸‹åˆ—å±æ€§ï¼Œä¿®æ”¹ä¸ºï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;javax.jdo.option.ConnectionDriverName&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;com.mysql.jdbc.Driver&amp;lt;/value&amp;gt;
    &amp;lt;description&amp;gt;Driver &lt;span&gt;class&lt;/span&gt; name &lt;span&gt;for&lt;/span&gt; a JDBC metastore&amp;lt;/description&amp;gt;
  &amp;lt;/property&amp;gt;
  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;javax.jdo.option.ConnectionURL&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;jdbc:mysql:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;192.168.118.1:3306/hive2&amp;lt;/value&amp;gt;&lt;/span&gt;
    &amp;lt;description&amp;gt;&lt;span&gt;
      JDBC connect &lt;/span&gt;&lt;span&gt;string&lt;/span&gt; &lt;span&gt;for&lt;/span&gt;&lt;span&gt; a JDBC metastore.
      To use SSL to encrypt&lt;/span&gt;/authenticate the connection, provide database-specific SSL flag &lt;span&gt;in&lt;/span&gt;&lt;span&gt; the connection URL.
      For example, jdbc:postgresql:&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;myhost/db?ssl=true for postgres database.&lt;/span&gt;
    &amp;lt;/description&amp;gt;
  &amp;lt;/property&amp;gt;
  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;javax.jdo.option.ConnectionUserName&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;root&amp;lt;/value&amp;gt;
    &amp;lt;description&amp;gt;Username to use against metastore database&amp;lt;/description&amp;gt;
  &amp;lt;/property&amp;gt;
  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;javax.jdo.option.ConnectionPassword&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;&lt;span&gt;111111&lt;/span&gt;&amp;lt;/value&amp;gt;
    &amp;lt;description&amp;gt;password to use against metastore database&amp;lt;/description&amp;gt;
  &amp;lt;/property&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;æ•°æ®åº“é©±åŠ¨ä¸ºmysqlé©±åŠ¨com.mysql.jdbc.Driverï¼ŒURLæ”¹ä¸ºmysqlçš„hive2(è‡ªå®šä¹‰)æ•°æ®åº“ï¼Œç”¨æˆ·åå¯†ç ä¸ºè‡ªå·±æ•°æ®åº“å¯¹åº”çš„ç”¨æˆ·åå¯†ç &lt;/p&gt;
&lt;p&gt;ä¿®æ”¹hiveé…ç½®çš„ä¸€äº›ç›®å½•ï¼ŒæŒ‡å®šåˆ°è‡ªå·±é€‰æ‹©çš„ç›®å½•ï¼Œæœç´¢ä»¥Â ${system å¼€å¤´çš„ value æ›¿æ¢ä¸ºè‡ªå·±çš„ç›®å½•ï¼Œæˆ‘è¿™é‡Œæ›¿æ¢ä¸ºï¼š/home/hdfs/hiveä¸‹ç›¸å…³ç›®å½•&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;hive.exec.local.scratchdir&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;/home/hdfs/hive&amp;lt;/value&amp;gt;
    &amp;lt;description&amp;gt;Local scratch space &lt;span&gt;for&lt;/span&gt; Hive jobs&amp;lt;/description&amp;gt;
  &amp;lt;/property&amp;gt;
&amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;hive.downloaded.resources.dir&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;/home/hdfs/hive/downloads&amp;lt;/value&amp;gt;
    &amp;lt;description&amp;gt;Temporary local directory &lt;span&gt;for&lt;/span&gt; added resources &lt;span&gt;in&lt;/span&gt; the remote file system.&amp;lt;/description&amp;gt;
  &amp;lt;/property&amp;gt;
  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;hive.querylog.location&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;/home/hdfs/hive/querylog&amp;lt;/value&amp;gt;
    &amp;lt;description&amp;gt;Location of Hive run time structured log file&amp;lt;/description&amp;gt;
  &amp;lt;/property&amp;gt;
  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;hive.server2.logging.operation.log.location&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;/home/hdfs/hive/server2_logs&amp;lt;/value&amp;gt;
    &amp;lt;description&amp;gt;Top level directory &lt;span&gt;where&lt;/span&gt; operation logs are stored &lt;span&gt;if&lt;/span&gt; logging functionality &lt;span&gt;is&lt;/span&gt; enabled&amp;lt;/description&amp;gt;
  &amp;lt;/property&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä¿®æ”¹æƒé™éªŒè¯ä¸ºfalse&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
 &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;hive.server2.enable.doAs&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;&lt;span&gt;false&lt;/span&gt;&amp;lt;/value&amp;gt;
    &amp;lt;description&amp;gt;&lt;span&gt;
      Setting &lt;/span&gt;&lt;span&gt;this&lt;/span&gt; property to &lt;span&gt;true&lt;/span&gt;&lt;span&gt; will have HiveServer2 execute
      Hive operations &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; the user making the calls to it.
    &lt;/span&gt;&amp;lt;/description&amp;gt;
  &amp;lt;/property&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;5.æ—¢ç„¶ä¿®æ”¹å…ƒæ•°æ®å­˜æ”¾åœ¨mysqlåº“é‡Œï¼Œå°±éœ€è¦å°†mysqlé©±åŠ¨åŒ…æ”¾å…¥åˆ°hive/libä¸­ï¼Œæ³¨æ„mysqlç‰ˆæœ¬å’Œé©±åŠ¨åŒ…ä¸€è‡´&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
mv mysql-connector-java-&lt;span&gt;8.0&lt;/span&gt;.&lt;span&gt;18&lt;/span&gt;.jar /opt/soft/hive/lib/
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;6.åœ¨mysqlæ•°æ®åº“ä¸­åˆ›å»ºhive2åº“&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/480564/202002/480564-20200207232106186-445531199.png&quot; alt=&quot;&quot; width=&quot;153&quot; height=&quot;254&quot;/&gt;&lt;/p&gt;
&lt;p&gt;7.åˆå§‹åŒ–hiveçš„å…ƒæ•°æ®(è¡¨ç»“æ„)åˆ°mysqlä¸­ã€‚&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
cd /opt/soft/hive/&lt;span&gt;bin
schematool &lt;/span&gt;-dbType mysql -initSchema
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å‡ºç°å¦‚ä¸‹ä¿¡æ¯ï¼Œä»£è¡¨æˆåŠŸ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/480564/202002/480564-20200207232450351-114370066.png&quot; alt=&quot;&quot; width=&quot;1189&quot; height=&quot;206&quot;/&gt;&lt;/p&gt;

&lt;p&gt;ä¹Ÿå¯ä»¥æŸ¥çœ‹mysqlä¸­hive2åº“ï¼Œæ‰€æœ‰è¡¨åˆå§‹åŒ–å®Œæˆ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/480564/202002/480564-20200207232554151-1985052439.png&quot; alt=&quot;&quot; width=&quot;323&quot; height=&quot;525&quot;/&gt;&lt;/p&gt;


&lt;p&gt;8.å¯åŠ¨hadoopï¼Œå¦‚æœæ²¡æœ‰å®‰è£…å¯ä»¥å‚è€ƒï¼š&lt;a id=&quot;cb_post_title_url&quot; class=&quot;postTitle2&quot; href=&quot;https://www.cnblogs.com/qixing/p/12252111.html&quot;&gt;centos7æ­å»ºhadoop2.10é«˜å¯ç”¨(HA)&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
start-all.sh
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;9.å¯åŠ¨hive&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/480564/202002/480564-20200207232759753-1365013548.png&quot; alt=&quot;&quot; width=&quot;1038&quot; height=&quot;177&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â æŸ¥çœ‹ç›®å‰åªæœ‰defaultæ•°æ®åº“&lt;/p&gt;
&lt;p&gt;åˆ›å»ºæ•°æ®åº“ï¼š&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
create database myhivedb2;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/480564/202002/480564-20200207233006272-1949242369.png&quot; alt=&quot;&quot; width=&quot;343&quot; height=&quot;121&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â æŸ¥çœ‹åˆ›å»ºçš„mysqhivedb2å·²ç»å‡ºæ¥äº†&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æŸ¥ä¸€ä¸‹hdfsä¸­æ˜¯å¦åˆ›å»ºäº†å¯¹åº”çš„ç›®å½•&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
hdfs dfs -ls -R /user/hive/
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/480564/202002/480564-20200207233327615-681241870.png&quot; alt=&quot;&quot; width=&quot;578&quot; height=&quot;42&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â ä¹Ÿå¯ä»¥æŸ¥çœ‹mysqlä¸­hive2åº“çš„dbsè¡¨ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/480564/202002/480564-20200207233545693-1515627150.png&quot; alt=&quot;&quot; width=&quot;1043&quot; height=&quot;330&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â è‡³æ­¤hiveç¯å¢ƒæ­å»ºå®Œæˆ&lt;/p&gt;

</description>
<pubDate>Fri, 07 Feb 2020 15:40:00 +0000</pubDate>
<dc:creator>ä¸ƒæ˜Ÿ6609</dc:creator>
<og:description>å…¬å¸å»ºç«‹æ•°ä»“ï¼Œhiveæ˜¯å¿…ä¸å¯å°‘çš„ï¼Œhiveæ˜¯å»ºç«‹åœ¨hadoopåŸºç¡€ä¸Šçš„æ•°æ®åº“ï¼Œå‰é¢å·²ç»æ­å»ºèµ·äº†hadoopé«˜å¯ç”¨ï¼Œè¦å­¦ä¹ hiveï¼Œå…ˆä»æ­å»ºå¼€å§‹ï¼Œä¸‹é¢æ¢³ç†ä¸€ä¸‹hiveæ­å»ºè¿‡ç¨‹ 1.ä¸‹è½½hiveå®‰è£…åŒ…</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/qixing/p/12275185.html</dc:identifier>
</item>
<item>
<title>ä½¿ç”¨Bundleåœ¨Activityä¹‹é—´äº¤æ¢æ•°æ® - æ¸…é£ç´«é›ª</title>
<link>http://www.cnblogs.com/xiaofengzai/p/12275168.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/xiaofengzai/p/12275168.html</guid>
<description>&lt;p&gt;&lt;span&gt;ï¼ˆä¸€ï¼‰Bundleä»‹ç»&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Bundleä¸»è¦ç”¨äºä¼ é€’æ•°æ®ï¼›å®ƒä¿å­˜çš„æ•°æ®ï¼Œæ˜¯ä»¥key-value(é”®å€¼å¯¹)çš„å½¢å¼å­˜åœ¨çš„ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;æˆ‘ä»¬ç»å¸¸ä½¿ç”¨Bundleåœ¨Activityä¹‹é—´ä¼ é€’æ•°æ®ï¼Œä¼ é€’çš„æ•°æ®å¯ä»¥æ˜¯booleanã€byteã€intã€longã€floatã€doubleã€stringç­‰åŸºæœ¬ç±»å‹æˆ–å®ƒä»¬å¯¹åº”çš„æ•°ç»„ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡æˆ–å¯¹è±¡æ•°ç»„ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;å½“Bundleä¼ é€’çš„æ˜¯å¯¹è±¡æˆ–å¯¹è±¡æ•°ç»„æ—¶ï¼Œå¿…é¡»å®ç°&lt;a href=&quot;http://blog.csdn.net/mer1234567/article/details/7841657&quot;&gt;SerializableÂ æˆ–Parcelable&lt;/a&gt;æ¥å£ã€‚ä¸‹é¢åˆ†åˆ«ä»‹ç»Activityä¹‹é—´å¦‚ä½•ä¼ é€’åŸºæœ¬ç±»å‹ã€ä¼ é€’å¯¹è±¡ã€‚&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;Bundleæä¾›äº†å„ç§å¸¸ç”¨ç±»å‹çš„putXxx()/getXxx()æ–¹æ³•ï¼Œç”¨äºè¯»å†™åŸºæœ¬ç±»å‹çš„æ•°æ®ã€‚Bundleæ“ä½œåŸºæœ¬æ•°æ®ç±»å‹çš„APIè¡¨æ ¼å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/common/1717524/202002/1717524-20200207225754994-343192511.jpg&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;


&lt;p&gt;&lt;span&gt;å†™æ•°æ®çš„æ–¹æ³•å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;42&quot;&gt;
&lt;pre&gt;
btn.setOnClickListener(&lt;span&gt;new&lt;/span&gt;&lt;span&gt; View.OnClickListener() {
            @Override
            &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; onClick(View v) {
                String sate1&lt;/span&gt;=&lt;span&gt;((EditText)findViewById(R.id.site1)).getText().toString();
                String sate2&lt;/span&gt;=&lt;span&gt;((EditText)findViewById(R.id.site2)).getText().toString();
                String sate3&lt;/span&gt;=&lt;span&gt;((EditText)findViewById(R.id.site3)).getText().toString();
                String phone&lt;/span&gt;=&lt;span&gt;((EditText)findViewById(R.id.phone)).getText().toString();
                String name&lt;/span&gt;=&lt;span&gt;((EditText)findViewById(R.id.name)).getText().toString();

                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;(!&quot;&quot;.equals(sate1)&amp;amp;&amp;amp;!&quot;&quot;.equals(sate2)&amp;amp;&amp;amp;!&quot;&quot;.equals(sate3)&amp;amp;&amp;amp;!&quot;&quot;.equals(phone)&amp;amp;&amp;amp;!&quot;&quot;&lt;span&gt;.equals(name)){
                    Intent intent&lt;/span&gt;=&lt;span&gt;new&lt;/span&gt; Intent(MainActivity.&lt;span&gt;this&lt;/span&gt;,AddressActivity.&lt;span&gt;class&lt;/span&gt;&lt;span&gt;);
                    Bundle bundle&lt;/span&gt;=&lt;span&gt;new&lt;/span&gt;&lt;span&gt; Bundle();
                    bundle.putString(&lt;/span&gt;&quot;name&quot;&lt;span&gt;,name);
                    bundle.putString(&lt;/span&gt;&quot;phone&quot;&lt;span&gt;,phone);
                    bundle.putString(&lt;/span&gt;&quot;sate&quot;,sate1+sate2+&lt;span&gt;sate3);
                    intent.putExtra(&lt;/span&gt;&quot;bundle&quot;&lt;span&gt;,bundle);
                    startActivity(intent);
                }&lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;{
                    Toast.makeText(MainActivity.&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;,&quot;è¯·å°†ä¿¡æ¯å¡«å†™å®Œæ•´&quot;&lt;span&gt;,Toast.LENGTH_SHORT).show();
                }
            }
        });&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;å¯¹åº”çš„è¯»æ•°æ®çš„æ–¹æ³•å¦‚ä¸‹ï¼šå°†è¯»å–çš„æ•°æ®è®¾ç½®ç»™TextViewç»„ä»¶&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
Intent intent=&lt;span&gt;getIntent();
        Bundle bundle&lt;/span&gt;=intent.getBundleExtra(&quot;bundle&quot;&lt;span&gt;);

        TextView site&lt;/span&gt;=&lt;span&gt;(TextView) findViewById(R.id.site);
        TextView name&lt;/span&gt;=&lt;span&gt;(TextView)findViewById(R.id.name);
        TextView phone&lt;/span&gt;=&lt;span&gt;(TextView)findViewById(R.id.phone);

        site.setText(bundle.getString(&lt;/span&gt;&quot;sate&quot;&lt;span&gt;));
        phone.setText(bundle.getString(&lt;/span&gt;&quot;phone&quot;&lt;span&gt;));
        name.setText(bundle.getString(&lt;/span&gt;&quot;name&quot;));
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;æˆ‘ä»¬æ ¹æ®æ‰€å­¦çš„hundleçš„çŸ¥è¯†ï¼Œæ¥ç®€å•çš„åˆ¶ä½œä¸€ä¸ªæ¡ˆä¾‹ï¼šå®ç°é€šè¿‡bundleè¿›è¡Œactivityä¹‹é—´çš„æ•°æ®ä¼ é€’&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;activity_main.xml&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;?&lt;/span&gt;&lt;span&gt;xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;&lt;/span&gt;&lt;span&gt;?&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;androidx.constraintlayout.widget.ConstraintLayout &lt;/span&gt;&lt;span&gt;xmlns:android&lt;/span&gt;&lt;span&gt;=&quot;http://schemas.android.com/apk/res/android&quot;&lt;/span&gt;&lt;span&gt;
    xmlns:app&lt;/span&gt;&lt;span&gt;=&quot;http://schemas.android.com/apk/res-auto&quot;&lt;/span&gt;&lt;span&gt;
    xmlns:tools&lt;/span&gt;&lt;span&gt;=&quot;http://schemas.android.com/tools&quot;&lt;/span&gt;&lt;span&gt;
    android:layout_width&lt;/span&gt;&lt;span&gt;=&quot;match_parent&quot;&lt;/span&gt;&lt;span&gt;
    android:layout_height&lt;/span&gt;&lt;span&gt;=&quot;match_parent&quot;&lt;/span&gt;&lt;span&gt;
    tools:context&lt;/span&gt;&lt;span&gt;=&quot;.MainActivity&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;ImageView
        &lt;/span&gt;&lt;span&gt;android:id&lt;/span&gt;&lt;span&gt;=&quot;@+id/imageView&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_width&lt;/span&gt;&lt;span&gt;=&quot;match_parent&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_height&lt;/span&gt;&lt;span&gt;=&quot;wrap_content&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_marginBottom&lt;/span&gt;&lt;span&gt;=&quot;190dp&quot;&lt;/span&gt;&lt;span&gt;
        android:background&lt;/span&gt;&lt;span&gt;=&quot;@drawable/top&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintBottom_toTopOf&lt;/span&gt;&lt;span&gt;=&quot;@+id/site3&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintEnd_toEndOf&lt;/span&gt;&lt;span&gt;=&quot;parent&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintHorizontal_bias&lt;/span&gt;&lt;span&gt;=&quot;0.0&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span&gt;=&quot;parent&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintTop_toTopOf&lt;/span&gt;&lt;span&gt;=&quot;parent&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintVertical_bias&lt;/span&gt;&lt;span&gt;=&quot;0.0&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;

    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;EditText
        &lt;/span&gt;&lt;span&gt;android:id&lt;/span&gt;&lt;span&gt;=&quot;@+id/site1&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_width&lt;/span&gt;&lt;span&gt;=&quot;match_parent&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_height&lt;/span&gt;&lt;span&gt;=&quot;wrap_content&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_marginTop&lt;/span&gt;&lt;span&gt;=&quot;71dp&quot;&lt;/span&gt;&lt;span&gt;
        android:hint&lt;/span&gt;&lt;span&gt;=&quot;è¯·è¾“å…¥çœä»½&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span&gt;=&quot;parent&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintTop_toTopOf&lt;/span&gt;&lt;span&gt;=&quot;parent&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;

    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;EditText
        &lt;/span&gt;&lt;span&gt;android:id&lt;/span&gt;&lt;span&gt;=&quot;@+id/site2&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_width&lt;/span&gt;&lt;span&gt;=&quot;match_parent&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_height&lt;/span&gt;&lt;span&gt;=&quot;wrap_content&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_marginTop&lt;/span&gt;&lt;span&gt;=&quot;20dp&quot;&lt;/span&gt;&lt;span&gt;
        android:hint&lt;/span&gt;&lt;span&gt;=&quot;è¯·è¾“å…¥å¸‚&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span&gt;=&quot;parent&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintTop_toBottomOf&lt;/span&gt;&lt;span&gt;=&quot;@+id/site1&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;

    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;EditText
        &lt;/span&gt;&lt;span&gt;android:id&lt;/span&gt;&lt;span&gt;=&quot;@+id/site3&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_width&lt;/span&gt;&lt;span&gt;=&quot;match_parent&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_height&lt;/span&gt;&lt;span&gt;=&quot;wrap_content&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_marginTop&lt;/span&gt;&lt;span&gt;=&quot;24dp&quot;&lt;/span&gt;&lt;span&gt;
        android:hint&lt;/span&gt;&lt;span&gt;=&quot;è¯·è¾“å…¥å¿&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span&gt;=&quot;parent&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintTop_toBottomOf&lt;/span&gt;&lt;span&gt;=&quot;@+id/site2&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;

    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;EditText
        &lt;/span&gt;&lt;span&gt;android:id&lt;/span&gt;&lt;span&gt;=&quot;@+id/phone&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_width&lt;/span&gt;&lt;span&gt;=&quot;match_parent&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_height&lt;/span&gt;&lt;span&gt;=&quot;wrap_content&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_marginTop&lt;/span&gt;&lt;span&gt;=&quot;26dp&quot;&lt;/span&gt;&lt;span&gt;
        android:hint&lt;/span&gt;&lt;span&gt;=&quot;è¯·è¾“å…¥æ‰‹æœºç”µè¯&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span&gt;=&quot;parent&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintTop_toBottomOf&lt;/span&gt;&lt;span&gt;=&quot;@+id/site3&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;

    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;EditText
        &lt;/span&gt;&lt;span&gt;android:id&lt;/span&gt;&lt;span&gt;=&quot;@+id/name&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_width&lt;/span&gt;&lt;span&gt;=&quot;match_parent&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_height&lt;/span&gt;&lt;span&gt;=&quot;wrap_content&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_marginTop&lt;/span&gt;&lt;span&gt;=&quot;22dp&quot;&lt;/span&gt;&lt;span&gt;
        android:hint&lt;/span&gt;&lt;span&gt;=&quot;è¯·è¾“å…¥å§“å&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span&gt;=&quot;parent&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintTop_toBottomOf&lt;/span&gt;&lt;span&gt;=&quot;@+id/phone&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;

    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;Button
        &lt;/span&gt;&lt;span&gt;android:id&lt;/span&gt;&lt;span&gt;=&quot;@+id/btnok&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_width&lt;/span&gt;&lt;span&gt;=&quot;wrap_content&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_height&lt;/span&gt;&lt;span&gt;=&quot;wrap_content&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_marginEnd&lt;/span&gt;&lt;span&gt;=&quot;16dp&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_marginRight&lt;/span&gt;&lt;span&gt;=&quot;16dp&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_marginBottom&lt;/span&gt;&lt;span&gt;=&quot;98dp&quot;&lt;/span&gt;&lt;span&gt;
        android:background&lt;/span&gt;&lt;span&gt;=&quot;#045786&quot;&lt;/span&gt;&lt;span&gt;
        android:text&lt;/span&gt;&lt;span&gt;=&quot;ä¿å­˜&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintBottom_toBottomOf&lt;/span&gt;&lt;span&gt;=&quot;parent&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintEnd_toEndOf&lt;/span&gt;&lt;span&gt;=&quot;parent&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;

&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;androidx.constraintlayout.widget.ConstraintLayout&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;activity_address.xml&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;?&lt;/span&gt;&lt;span&gt;xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;&lt;/span&gt;&lt;span&gt;?&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;androidx.constraintlayout.widget.ConstraintLayout &lt;/span&gt;&lt;span&gt;xmlns:android&lt;/span&gt;&lt;span&gt;=&quot;http://schemas.android.com/apk/res/android&quot;&lt;/span&gt;&lt;span&gt;
    xmlns:app&lt;/span&gt;&lt;span&gt;=&quot;http://schemas.android.com/apk/res-auto&quot;&lt;/span&gt;&lt;span&gt;
    xmlns:tools&lt;/span&gt;&lt;span&gt;=&quot;http://schemas.android.com/tools&quot;&lt;/span&gt;&lt;span&gt;
    android:layout_width&lt;/span&gt;&lt;span&gt;=&quot;match_parent&quot;&lt;/span&gt;&lt;span&gt;
    android:layout_height&lt;/span&gt;&lt;span&gt;=&quot;match_parent&quot;&lt;/span&gt;&lt;span&gt;
    tools:context&lt;/span&gt;&lt;span&gt;=&quot;.AddressActivity&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;ImageView
        &lt;/span&gt;&lt;span&gt;android:id&lt;/span&gt;&lt;span&gt;=&quot;@+id/close&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_width&lt;/span&gt;&lt;span&gt;=&quot;wrap_content&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_height&lt;/span&gt;&lt;span&gt;=&quot;wrap_content&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_marginStart&lt;/span&gt;&lt;span&gt;=&quot;10dp&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_marginLeft&lt;/span&gt;&lt;span&gt;=&quot;10dp&quot;&lt;/span&gt;&lt;span&gt;
        android:src&lt;/span&gt;&lt;span&gt;=&quot;@drawable/guanbi&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintBottom_toBottomOf&lt;/span&gt;&lt;span&gt;=&quot;@+id/imageView2&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span&gt;=&quot;parent&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;

    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;ImageView
        &lt;/span&gt;&lt;span&gt;android:id&lt;/span&gt;&lt;span&gt;=&quot;@+id/imageView2&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_width&lt;/span&gt;&lt;span&gt;=&quot;0dp&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_height&lt;/span&gt;&lt;span&gt;=&quot;wrap_content&quot;&lt;/span&gt;&lt;span&gt;
        android:src&lt;/span&gt;&lt;span&gt;=&quot;@drawable/top&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintEnd_toEndOf&lt;/span&gt;&lt;span&gt;=&quot;parent&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintHorizontal_bias&lt;/span&gt;&lt;span&gt;=&quot;0.0&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span&gt;=&quot;parent&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintTop_toTopOf&lt;/span&gt;&lt;span&gt;=&quot;parent&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;

    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;TextView
        &lt;/span&gt;&lt;span&gt;android:id&lt;/span&gt;&lt;span&gt;=&quot;@+id/name&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_width&lt;/span&gt;&lt;span&gt;=&quot;wrap_content&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_height&lt;/span&gt;&lt;span&gt;=&quot;wrap_content&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_marginTop&lt;/span&gt;&lt;span&gt;=&quot;66dp&quot;&lt;/span&gt;&lt;span&gt;
        android:text&lt;/span&gt;&lt;span&gt;=&quot;æ”¶è´§å§“å&quot;&lt;/span&gt;&lt;span&gt;
        android:textSize&lt;/span&gt;&lt;span&gt;=&quot;20sp&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span&gt;=&quot;parent&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintTop_toTopOf&lt;/span&gt;&lt;span&gt;=&quot;parent&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;

    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;TextView
        &lt;/span&gt;&lt;span&gt;android:id&lt;/span&gt;&lt;span&gt;=&quot;@+id/phone&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_width&lt;/span&gt;&lt;span&gt;=&quot;wrap_content&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_height&lt;/span&gt;&lt;span&gt;=&quot;wrap_content&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_marginTop&lt;/span&gt;&lt;span&gt;=&quot;30dp&quot;&lt;/span&gt;&lt;span&gt;
        android:text&lt;/span&gt;&lt;span&gt;=&quot;ç”µè¯&quot;&lt;/span&gt;&lt;span&gt;
        android:textSize&lt;/span&gt;&lt;span&gt;=&quot;20sp&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span&gt;=&quot;parent&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintTop_toBottomOf&lt;/span&gt;&lt;span&gt;=&quot;@+id/name&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;

    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;TextView
        &lt;/span&gt;&lt;span&gt;android:id&lt;/span&gt;&lt;span&gt;=&quot;@+id/site&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_width&lt;/span&gt;&lt;span&gt;=&quot;wrap_content&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_height&lt;/span&gt;&lt;span&gt;=&quot;wrap_content&quot;&lt;/span&gt;&lt;span&gt;
        android:layout_marginTop&lt;/span&gt;&lt;span&gt;=&quot;68dp&quot;&lt;/span&gt;&lt;span&gt;

        android:textSize&lt;/span&gt;&lt;span&gt;=&quot;20sp&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintEnd_toEndOf&lt;/span&gt;&lt;span&gt;=&quot;@+id/phone&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintHorizontal_bias&lt;/span&gt;&lt;span&gt;=&quot;0.0&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintStart_toStartOf&lt;/span&gt;&lt;span&gt;=&quot;parent&quot;&lt;/span&gt;&lt;span&gt;
        app:layout_constraintTop_toBottomOf&lt;/span&gt;&lt;span&gt;=&quot;@+id/phone&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;


&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;androidx.constraintlayout.widget.ConstraintLayout&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;MainActivity.java&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;42&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package&lt;/span&gt;&lt;span&gt; com.example.bundle;

&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; androidx.appcompat.app.AppCompatActivity;

&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; android.content.Intent;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; android.net.Uri;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; android.os.Bundle;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; android.view.View;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; android.widget.Button;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; android.widget.EditText;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; android.widget.Toast;

&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; MainActivity &lt;span&gt;extends&lt;/span&gt;&lt;span&gt; AppCompatActivity {

    @Override
    &lt;/span&gt;&lt;span&gt;protected&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; onCreate(Bundle savedInstanceState) {
        &lt;/span&gt;&lt;span&gt;super&lt;/span&gt;&lt;span&gt;.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button btn&lt;/span&gt;=&lt;span&gt;(Button) findViewById(R.id.btnok);

        btn.setOnClickListener(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; View.OnClickListener() {
            @Override
            &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; onClick(View v) {
                String sate1&lt;/span&gt;=&lt;span&gt;((EditText)findViewById(R.id.site1)).getText().toString();
                String sate2&lt;/span&gt;=&lt;span&gt;((EditText)findViewById(R.id.site2)).getText().toString();
                String sate3&lt;/span&gt;=&lt;span&gt;((EditText)findViewById(R.id.site3)).getText().toString();
                String phone&lt;/span&gt;=&lt;span&gt;((EditText)findViewById(R.id.phone)).getText().toString();
                String name&lt;/span&gt;=&lt;span&gt;((EditText)findViewById(R.id.name)).getText().toString();

                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;(!&quot;&quot;.equals(sate1)&amp;amp;&amp;amp;!&quot;&quot;.equals(sate2)&amp;amp;&amp;amp;!&quot;&quot;.equals(sate3)&amp;amp;&amp;amp;!&quot;&quot;.equals(phone)&amp;amp;&amp;amp;!&quot;&quot;&lt;span&gt;.equals(name)){
                    Intent intent&lt;/span&gt;=&lt;span&gt;new&lt;/span&gt; Intent(MainActivity.&lt;span&gt;this&lt;/span&gt;,AddressActivity.&lt;span&gt;class&lt;/span&gt;&lt;span&gt;);
                    Bundle bundle&lt;/span&gt;=&lt;span&gt;new&lt;/span&gt;&lt;span&gt; Bundle();
                    bundle.putString(&lt;/span&gt;&quot;name&quot;&lt;span&gt;,name);
                    bundle.putString(&lt;/span&gt;&quot;phone&quot;&lt;span&gt;,phone);
                    bundle.putString(&lt;/span&gt;&quot;sate&quot;,sate1+sate2+&lt;span&gt;sate3);
                    intent.putExtra(&lt;/span&gt;&quot;bundle&quot;&lt;span&gt;,bundle);
                    startActivity(intent);
                }&lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;{
                    Toast.makeText(MainActivity.&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;,&quot;è¯·å°†ä¿¡æ¯å¡«å†™å®Œæ•´&quot;&lt;span&gt;,Toast.LENGTH_SHORT).show();
                }
            }
        });

    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;AddressActivity.java&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package&lt;/span&gt;&lt;span&gt; com.example.bundle;

&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; androidx.appcompat.app.AppCompatActivity;

&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; android.content.Intent;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; android.os.Bundle;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; android.view.View;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; android.widget.Button;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; android.widget.ImageView;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; android.widget.TextView;

&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; AddressActivity &lt;span&gt;extends&lt;/span&gt;&lt;span&gt; AppCompatActivity {

    @Override
    &lt;/span&gt;&lt;span&gt;protected&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; onCreate(Bundle savedInstanceState) {
        &lt;/span&gt;&lt;span&gt;super&lt;/span&gt;&lt;span&gt;.onCreate(savedInstanceState);
        setContentView(R.layout.activity_address);

        Intent intent&lt;/span&gt;=&lt;span&gt;getIntent();
        Bundle bundle&lt;/span&gt;=intent.getBundleExtra(&quot;bundle&quot;&lt;span&gt;);

        TextView site&lt;/span&gt;=&lt;span&gt;(TextView) findViewById(R.id.site);
        TextView name&lt;/span&gt;=&lt;span&gt;(TextView)findViewById(R.id.name);
        TextView phone&lt;/span&gt;=&lt;span&gt;(TextView)findViewById(R.id.phone);

        site.setText(bundle.getString(&lt;/span&gt;&quot;sate&quot;&lt;span&gt;));
        phone.setText(bundle.getString(&lt;/span&gt;&quot;phone&quot;&lt;span&gt;));
        name.setText(bundle.getString(&lt;/span&gt;&quot;name&quot;&lt;span&gt;));

        ImageView close&lt;/span&gt;=&lt;span&gt;(ImageView) findViewById(R.id.close);
        close.setOnClickListener(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; View.OnClickListener() {
            @Override
            &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; onClick(View v) {
                finish();
            }
        });
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;åˆå§‹ç•Œé¢ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1717524/202002/1717524-20200207231956006-192987470.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â ä¼ é€’æ•°æ®åçš„é¡µé¢ï¼š&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1717524/202002/1717524-20200207232012390-2030543478.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

</description>
<pubDate>Fri, 07 Feb 2020 15:37:00 +0000</pubDate>
<dc:creator>æ¸…é£ç´«é›ª</dc:creator>
<og:description>ï¼ˆä¸€ï¼‰Bundleä»‹ç» Bundleä¸»è¦ç”¨äºä¼ é€’æ•°æ®ï¼›å®ƒä¿å­˜çš„æ•°æ®ï¼Œæ˜¯ä»¥key-value(é”®å€¼å¯¹)çš„å½¢å¼å­˜åœ¨çš„ã€‚ æˆ‘ä»¬ç»å¸¸ä½¿ç”¨Bundleåœ¨Activityä¹‹é—´ä¼ é€’æ•°æ®ï¼Œä¼ é€’çš„æ•°æ®å¯ä»¥æ˜¯boolea</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/xiaofengzai/p/12275168.html</dc:identifier>
</item>
<item>
<title>KafkaåŠ¨æ€é…ç½®å®ç°åŸç†è§£æ - æå¿—æ¶›</title>
<link>http://www.cnblogs.com/lizherui/p/12271285.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/lizherui/p/12271285.html</guid>
<description>&lt;h2 id=&quot;KafkaåŠ¨æ€é…ç½®å®ç°åŸç†è§£æ-é—®é¢˜å¯¼è¯»&quot;&gt;é—®é¢˜å¯¼è¯»&lt;/h2&gt;
&lt;p&gt;Apache Kafkaåœ¨å…¨çƒå„ä¸ªé¢†åŸŸå„å¤§å…¬å¸è·å¾—å¹¿æ³›ä½¿ç”¨ï¼Œå¾—ç›Šäºå®ƒå¼ºå¤§çš„åŠŸèƒ½å’Œä¸æ–­å®Œå–„çš„ç”Ÿæ€ã€‚å…¶ä¸­KafkaåŠ¨æ€é…ç½®æ˜¯ä¸€ä¸ªæ¯”è¾ƒé«˜é¢‘å¥½ç”¨çš„åŠŸèƒ½ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥ä¸€æ¢ç©¶ç«Ÿã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;åŠ¨æ€é…ç½®æ˜¯å¦‚ä½•è®¾è®¡çš„ï¼Ÿ&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;åŠ¨æ€é…ç½®ä¼˜å…ˆçº§æ˜¯æ€æ ·çš„ï¼Ÿ&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;Brokeråˆå§‹åŒ–æ˜¯å¦‚ä½•è¯»å–é…ç½®çš„ï¼Ÿ&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;åŠ¨æ€é…ç½®æ”¯æŒå“ªäº›ç‰¹æ€§åŠŸèƒ½ï¼Ÿ&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;åŠ¨æ€é…ç½®å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿ&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;KafkaåŠ¨æ€é…ç½®å®ç°åŸç†è§£æ-å‰è¨€ä»‹ç»&quot;&gt;å‰è¨€ä»‹ç»&lt;/h2&gt;
&lt;p&gt;Â Kafkaåˆå§‹å¼€æºçš„å‡ ä¸ªç‰ˆæœ¬ï¼Œå½“brokeråˆå§‹åŒ–å¯åŠ¨æ—¶ï¼Œæ‰€æœ‰é…ç½®ä¿¡æ¯åªèƒ½ä»server.propertiesé™æ€æ–‡ä»¶è¯»å–ï¼Œä»¥åä¸å†å‘ç”Ÿä»»ä½•æ›´æ”¹ï¼Œéšç€Kafkaé€æ­¥è¿­ä»£ï¼Œåœ¨çº¿ä¸šåŠ¡å¯¹ç¨³å®šæ€§å’Œä¸ªæ€§åŒ–è¦æ±‚è¶Šæ¥è¶Šçªå‡ºï¼Œéœ€è¦èƒ½æ”¯æŒåœ¨çº¿ä¿®æ”¹åŠŸèƒ½åŠ¨æ€ç”Ÿæ•ˆçš„éœ€æ±‚åº”è¿è€Œç”Ÿã€‚ä¾‹å¦‚ï¼šæŒ‰ç…§topicç»´åº¦æ¸…ç†æ•°æ®ï¼Œä¾æ®clientidé™æµï¼Œæ ¹æ®ç”¨æˆ·åç§°è¿›è¡Œè®¿é—®æƒé™æ§åˆ¶ç­‰ç­‰ã€‚ç›®å‰Kafkaæœ€æ–°ç‰ˆæœ¬æ”¯æŒä»¥ä¸‹å‡ ç±»åŠ¨æ€é…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;Â &lt;img src=&quot;https://img2018.cnblogs.com/i-beta/273782/202002/273782-20200206223101210-1589498841.png&quot; alt=&quot;&quot; width=&quot;287&quot; height=&quot;139&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;KafkaåŠ¨æ€é…ç½®å®ç°åŸç†è§£æ-å‘å±•å†ç¨‹&quot;&gt;å‘å±•å†ç¨‹&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/273782/202002/273782-20200206230010945-213659491.png&quot; alt=&quot;&quot; width=&quot;787&quot; height=&quot;391&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;åŠ¨æ€é…ç½®æ–‡ä»¶å‘å±•å†ç¨‹ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;kafkaåœ¨0.8.0å¯¹topicçš„ç®¡ç†åŠŸèƒ½åˆ†å¸ƒåœ¨ä¸‰ä¸ªshellä¸­ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯kafka-list-topic.shã€kafka-create-topic.shã€kafka-delete-topic.shã€kafka-add-partitions.shï¼Œåæ¥ç¤¾åŒºè€ƒè™‘åˆ°topicç®¡ç†åŠŸèƒ½è¿‡äºåˆ†æ•£ï¼Œåˆ°äº†0.8.1ç‰ˆæœ¬æœ‰å…³topicæ‰€æœ‰åŠŸèƒ½æ”¶æ•›åˆ°kafka-topics.shä¸­ã€‚0.8.0ä¸­åªæœ‰topicçš„åˆ›å»ºã€åˆ é™¤å’Œåˆ—è¡¨åŠæ·»åŠ åˆ†åŒºåŠŸèƒ½ï¼Œåˆ°äº†0.8.1å¼€å§‹æ”¯æŒtopicsåŠ¨æ€é…ç½®äº†ã€‚Â &lt;/p&gt;
&lt;p&gt;0.9.0.0å¼€å§‹æ”¯æŒclient(producerå’Œconsumer)å®¢æˆ·ç«¯é…é¢é™æµæ”¯æŒï¼Œç¡®ä¿ä¸å› ä¸ºæŸä¸ªæˆ–å°‘æ•°å‡ ä¸ªtopicçš„å®¢æˆ·ç«¯å æ»¡äº†brokerå¸¦å®½èµ„æºå’Œç£ç›˜IOèµ„æºï¼Œå½±å“å…¶ä»–å®¢æˆ·ç«¯çš„æ­£å¸¸è¯»å†™ï¼Œå¯¼è‡´é›†ç¾¤å†…ä¸»ä»åŒæ­¥ä¹Ÿå—åˆ°å½±å“ã€‚è¿™ä¸ªåŠŸèƒ½å¯¹ç¡®ä¿ç³»ç»ŸSLAå¤§æœ‰å¥½å¤„ï¼Œé€šè¿‡æœåŠ¡é™çº§ï¼Œä¿è¯å†™/ç”Ÿäº§ä¸å—å½±å“ï¼Œé™ä½æˆ–æš‚åœè¯»/æ¶ˆè´¹æµé‡æ›´å®¹æ˜“è§£å†³ç³»ç»Ÿèµ„æºç“¶é¢ˆã€‚&lt;/p&gt;
&lt;p&gt;0.9.0ç‰ˆæœ¬åŠ¨æ€é…ç½®ä¸topicç®¡ç†åˆ†ç¦»ï¼Œä¸ºäº†ä¿æŒå‘ä¸‹å…¼å®¹kafka-topics.shä¾ç„¶åŒ…å«æ“ä½œtopicåŠ¨æ€é…ç½®åŠŸèƒ½ï¼Œæ–°å¢kafka-configs.shæ”¯æŒclientså’ŒtopicsåŠ¨æ€é…ç½®åŠŸèƒ½ï¼Œæ‰€ä»¥kafka-topics.shå’Œkafka-configs.shä»»æ„ä¸€ä¸ªéƒ½å¯ä»¥ä¿®æ”¹topicåŠ¨æ€é…ç½®&lt;/p&gt;
&lt;p&gt;0.10.1.0ç‰ˆæœ¬æ–°å¢æ”¯æŒuserså’ŒbrokersåŠ¨æ€é…ç½®åŠŸèƒ½ï¼ŒuseråŠ¨æ€é…ç½®ç”¨äºè®¿é—®èµ„æºçš„æƒé™æ§åˆ¶ï¼Œæå‡é›†ç¾¤çš„è®¿é—®å’Œæ•°æ®å®‰å…¨æ€§ï¼Œä¾‹å¦‚ï¼šç”¨æˆ·å¯¹è¯»/å†™/åˆ›å»º/åˆ é™¤ç­‰æ“ä½œå’ŒAPIã€topicã€groupèµ„æºè®¿é—®æ§åˆ¶ã€‚brokeråŠ¨æ€é…ç½®ï¼Œåœ¨ä¸ç”¨é‡å¯åŠå½±å“æœåŠ¡è¿è¡Œæƒ…å†µä¸‹ï¼Œbrokerçº§åˆ«åŠŸèƒ½å®ç°åŠ¨æ€ç”Ÿæ•ˆï¼Œä¾‹å¦‚ï¼šå‰¯æœ¬æ³¨å†Œå¤åˆ¶é€Ÿç‡ã€ç£ç›˜å†…æŒ‚è½½ç‚¹é—´æ•°æ®è¿ç§»é€Ÿç‡ã€ç½‘ç»œè¯·æ±‚çš„çº¿ç¨‹æ•°ã€å¤„ç†è¯·æ±‚çš„I/Oçº¿ç¨‹æ•°ç­‰ç­‰å…¨å±€å‚æ•°ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;0.10.1.0~2.3.1ç‰ˆæœ¬&lt;/span&gt;&lt;/strong&gt;éƒ½æ”¯æŒtopicsã€clientsã€usersã€brokerså››ç±»å‹åŠ¨æ€é…ç½®çš„11ç§ç²’åº¦é…ç½®å¯¹è±¡ï¼Œåªæ˜¯é…ç½®æ¨¡å—å’Œå±æ€§å­—æ®µæœ‰å¢å‡ä¸è°ƒæ•´ã€‚&lt;/p&gt;
&lt;h2 id=&quot;KafkaåŠ¨æ€é…ç½®å®ç°åŸç†è§£æ-åŠ¨æ€é…ç½®è®¾è®¡åŸç†&quot;&gt;åŠ¨æ€é…ç½®è®¾è®¡åŸç†&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/273782/202002/273782-20200206230132964-1312868962.png&quot; alt=&quot;&quot; width=&quot;370&quot; height=&quot;461&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ç”¨æˆ·ä½¿ç”¨kafka-configs.shè„šæœ¬ï¼Œæ ¹æ®æ ¼å¼å’Œå‚æ•°è§„èŒƒè¦æ±‚ï¼ŒConfigCommandç±»è¿›è¡Œç›¸å…³é€»è¾‘å¤„ç†ã€jsonæ ¼å¼å’Œå†…å®¹æ ¡éªŒï¼Œç”Ÿæˆnotification jsonï¼Œå†™å…¥åˆ°åºåˆ—åŒ–æŒä¹…èŠ‚ç‚¹ä¸Šï¼Œzkè·¯å¾„ä¸ºxxx/config/changes/config_change_seqNoï¼ŒèŠ‚ç‚¹åç§°ä¸ºconfig_change_seqNoï¼Œå…¶ä¸­seqNoä»1å¼€å§‹çš„è‡ªå¢åºå·ã€‚kafkaé›†ç¾¤ä¸­æ‰€æœ‰brokeré€šè¿‡ç›‘å¬zkä¸Šxxx/config/changesçš„childrenå˜åŒ–ï¼Œæ¯æ¬¡è·å¾—æ¯”å½“å‰å†…å­˜ä¸­last_seqNoå¤§çš„seqNoçš„jsonå†…å®¹ï¼Œä»ä¸­è¯»å–entity_type/entity_nameç›¸å¯¹è·¯å¾„ï¼Œç”±æ­¤åˆ¤æ–­å¦‚ä½•ä»xxx/config/topics|clients|users|brokerså››ç§ç±»å‹ä¸­è¯»å–å“ªä¸ªé…ç½®è·¯å¾„ã€‚åŒä¸€ä¸ªBrokeråœ¨æ“ä½œè¿‡ç¨‹ä¸­ä»»ä½•æ—¶åˆ»åªèƒ½ä¸²è¡Œè¯»å†™ä¸€ç§ç±»å‹çš„é…ç½®ï¼Œå¤šç§é…ç½®éœ€è¦ä¸²è¡Œæ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;å„ä¸ªè§’è‰²çš„ä½œç”¨ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;kafka-config.sh: è´Ÿè´£å†™dynamic configå’Œnotificationï¼Œå†™é¡ºåºä¸Šå›¾æœ‰å…ˆåæ ‡è¯†ã€‚&lt;/p&gt;
&lt;p&gt;brokerï¼šè´Ÿè´£ç›‘å¬xxx/config/changeså­èŠ‚ç‚¹å˜åŒ–å’Œè¯»å–entity_type/entity_nameè·¯å¾„èŠ‚ç‚¹ä¸Šå†…å®¹&lt;/p&gt;
&lt;p&gt;zkï¼šè´Ÿè´£å­˜å‚¨notificationå’Œdynamic configåŠä¸‹å‘é…ç½®ç»™ç›¸åº”çš„broker&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;notification jsonå†…å®¹ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;V1 0.10.0.1åŠä»¥å‰ç‰ˆæœ¬æœ‰æ•ˆ&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;{
    &lt;/span&gt;&quot;version&quot;: 1&lt;span&gt;,
    &lt;/span&gt;&quot;entity_type&quot;: &quot;topics&quot;&lt;span&gt;,
    &lt;/span&gt;&quot;entity_name&quot;:  &quot;finalTest&quot;&lt;span&gt;
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;V2 0.10.1.0~2.3.1 å½“å‰æœ€æ–°ç‰ˆæœ¬éƒ½æœ‰æ•ˆ&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;code panel pdl conf-macro output-block&quot; data-hasbody=&quot;true&quot; data-macro-name=&quot;code&quot; readability=&quot;89.384482758621&quot;&gt;
&lt;p&gt;ä»¥ä¸Šä¸ç®¡æ˜¯version 1è¿˜æ˜¯version2ï¼Œæœ¬è´¨ä¸Šæ²¡æœ‰å˜åŒ–ã€‚éƒ½æ˜¯é€šè¿‡entity_type/entity_nameè·å¾—entity_pathçš„zkç›¸å¯¹è·¯å¾„ï¼Œå…¨è·¯å¾„ä¸ºxxx/config/entityType/entityNameï¼Œå…·ä½“è¯·çœ‹å¦‚ä¸‹è¯¦å›¾&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/273782/202002/273782-20200206231425337-1090268899.png&quot; alt=&quot;&quot; width=&quot;627&quot; height=&quot;333&quot;/&gt;&lt;/p&gt;
&lt;p&gt;entity_type=topics | clients | users | brokers&lt;/p&gt;
&lt;p&gt;entity_name=topicName | clientId | userId | (brokerId | &amp;lt;default&amp;gt;)&lt;/p&gt;
&lt;p&gt;å½“entity_typeä¸ºbrokersæ—¶ï¼ŒbrokerIdä¸ºbrokerç¼–å·ä¸è‡ªå·±çš„server.propertieså¯¹åº”ï¼Œåªå¯¹æŸä¸ªbrokerç”Ÿæ•ˆã€‚â€œ&amp;lt;default&amp;gt;â€æŒ‡å¯¹æ‰€æœ‰brokerç”Ÿæ•ˆã€‚è€Œentity_typeä¸ºtopics | clients | userså¯¹æ‰€æœ‰brokeréƒ½ç”Ÿæ•ˆã€‚é€šè¿‡ä»¥ä¸Šentity_type/entity_nameå…­ç§ç»„åˆæˆå…­ä¸ªzkç›¸å¯¹è·¯å¾„ã€‚&lt;/p&gt;
&lt;p&gt;topicså’Œclientsç»„åˆåŸç†ä¸€æ ·ï¼Œä½†userså’Œbrokerså´ç•¥æœ‰ä¸åŒï¼Œä»–ä»¬å„è‡ªæœ‰2ä¸ªç»„åˆï¼Œé™¤äº†æ™®é€šç»„åˆè¿˜æœ‰å¤åˆç»„åˆï¼Œä¸¤ç§ç±»å‹ç»„åˆåœ¨ä¸€èµ·ï¼Œä¾‹å¦‚usersæœ‰usersä¸clientsç»„åˆï¼Œzkè·¯å¾„ä¸ºusers/&amp;lt;user&amp;gt;/clients/&amp;lt;clientId&amp;gt;ï¼›brokersåŠ¨æ€é…ç½®éå¸¸å®ç”¨ï¼Œä¸éœ€è¦é‡å¯å°±èƒ½åŠ¨æ€æ›´æ”¹ä»»æ„æ•°é‡brokersé…ç½®ï¼Œæ›´æ”¹æ‰€æœ‰brokersä¸ºxxx/brokers/&amp;lt;default&amp;gt;&lt;/p&gt;
&lt;p&gt;å››ç±»åŠ¨æ€é…ç½®11ç§zkç›¸å¯¹è·¯å¾„ï¼Œæ ¹æ®11ç§zkç›¸å¯¹è·¯å¾„å¯ä»¥è¯»å–11ç§ç²’åº¦é…ç½®å¯¹è±¡dynamic configã€‚&lt;/p&gt;
&lt;p&gt;&amp;lt;default&amp;gt;è¯´æ˜ï¼šæŸç§ç±»å‹ä¸‹æ‰€æœ‰ä½œç”¨åŸŸç”Ÿæ•ˆï¼Œä¾‹å¦‚xxx/clients/&amp;lt;default&amp;gt;å’Œxxx/brokers/&amp;lt;default&amp;gt;å°±æ˜¯é›†ç¾¤å†…æ‰€æœ‰All clientså’Œé›†ç¾¤å†…æ‰€æœ‰All brokersé…ç½®éƒ½ä¼šç”Ÿæ•ˆï¼Œå…¶ä»–åŒç†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;dynamic configå†…å®¹ç¤ºä¾‹ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;entity_type/entity_name=topics/&amp;lt;topic_name&amp;gt;=topics/finalTest&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/273782/202002/273782-20200206231827808-539268405.png&quot; alt=&quot;&quot; width=&quot;694&quot; height=&quot;270&quot;/&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt;{
    &lt;/span&gt;&quot;version&quot;: 1&lt;span&gt;,
    &lt;/span&gt;&quot;config&quot;&lt;span&gt;: {
        &lt;/span&gt;&quot;retention.bytes&quot;: &quot;102400000&quot;&lt;span&gt;,
        &lt;/span&gt;&quot;flush.ms&quot;: &quot;5000&quot;&lt;span&gt;,
        &lt;/span&gt;&quot;cleanup.policy&quot;: &quot;compact&quot;&lt;span&gt;,
        &lt;/span&gt;&quot;flush.messages&quot;&lt;span&gt;,
        ...
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;entity_type/entity_name=clients/&amp;lt;clientId&amp;gt;=clients/camusall&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/273782/202002/273782-20200206232329515-1026494621.png&quot; alt=&quot;&quot; width=&quot;688&quot; height=&quot;264&quot;/&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;{
    &lt;/span&gt;&quot;version&quot;: 1&lt;span&gt;,
    &lt;/span&gt;&quot;config&quot;&lt;span&gt;: {
        &lt;/span&gt;&quot;producer_byte_rate&quot;: &quot;20971520&quot;&lt;span&gt;,
        &lt;/span&gt;&quot;consumer_byte_rate&quot;: &quot;20971520&quot;&lt;span&gt;
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;&lt;strong&gt;entity_type/entity_name=brokers/all brokers=brokers/&amp;lt;default&amp;gt;&lt;/strong&gt;&lt;/span&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;strong&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/273782/202002/273782-20200206232737219-239590509.png&quot; alt=&quot;&quot; width=&quot;699&quot; height=&quot;348&quot;/&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;41&quot;&gt;
&lt;pre&gt;
&lt;span&gt;{
    &lt;/span&gt;&quot;version&quot;: 1&lt;span&gt;,
    &lt;/span&gt;&quot;config&quot;&lt;span&gt;: {
        &lt;/span&gt;&quot;leader.replication.throttled.rate&quot;: &quot;5000&quot;&lt;span&gt;,
        &lt;/span&gt;&quot;follower.replication.throttled.rate&quot;: &quot;60000&quot;&lt;span&gt;,
        &lt;/span&gt;&quot;replica.alter.log.dirs.io.max.bytes.per.second&quot;: &quot;5000&quot;&lt;span&gt;,
        &lt;/span&gt;&quot;log.retention.hours&quot;: &quot;24&quot;&lt;span&gt;,
        &lt;/span&gt;&quot;log.flush.interval.messages&quot;: &quot;5000&quot;&lt;span&gt;,
        &lt;/span&gt;&quot;min.insync.replicas&quot;: &quot;2&quot;&lt;span&gt;,
        ...
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;entity_type/entity_name=brokers/brokerIdÂ  Â  Â ä¸&lt;/strong&gt;&lt;strong&gt;&lt;strong&gt;all brokersçš„é…ç½®å½¢æˆå®Œå…¨ä¸€æ ·ï¼Œåªæ˜¯ä½œç”¨åŸŸèŒƒå›´ä¸åŒè€Œå·²ï¼Œæ­¤å¤„çœç•¥ã€‚&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;å†™é…ç½®æ ¼å¼æ ¡éªŒ&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœå†™å…¥é…ç½®ä¸è¿›è¡Œè§„èŒƒæ ¡éªŒï¼Œbrokerå°±ä¼šè¯»å–å¤„ç†è¿‡ç¨‹ä¸­ï¼Œå°±ä¼šå¡ä½æˆ–é˜»å¡ï¼Œå½±å“æœåŠ¡è¿è¡Œç¨³å®šæ€§ã€‚æ‰€ä»¥é…ç½®æ ¡éªŒè‡³å…³é‡è¦ï¼Œæ ¡éªŒè§„åˆ™å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;é…ç½®å‚æ•°æ ¼å¼å¿…é¡»åˆæ³•ï¼Œå¦åˆ™æŠ¥é”™ä¸äºˆæ¥æ”¶&lt;/li&gt;
&lt;li&gt;è¾“å…¥é…ç½®é¡¹è¿›è¡Œæ ¡éªŒï¼Œè¾“å…¥å‚æ•°å¿…é¡»æ˜¯kafkaåŒ…å«çš„é…ç½®é¡¹ï¼Œå¦åˆ™è¿‡æ»¤æ‰&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;config_change_seqNoç”Ÿæˆè§„åˆ™&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;line number1 index0 alt2&quot; readability=&quot;12&quot;&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/273782/202002/273782-20200206232926370-915965576.png&quot; alt=&quot;&quot; width=&quot;195&quot; height=&quot;289&quot;/&gt;&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/273782/202002/273782-20200206233001778-2144677476.png&quot; alt=&quot;&quot; width=&quot;666&quot; height=&quot;108&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â kafka-configs.shè„šæœ¬æ¯æˆåŠŸæ‰§è¡Œä¸€æ¬¡ï¼Œåœ¨zkä¸Šå°±åˆ›å»ºä¸€ä¸ªæ–°çš„seqNodeèŠ‚ç‚¹(å³/xxx/config/changes/config_change_seqNo)ï¼ŒseqNodeæ˜¯zkçš„æŒä¹…é¡ºåºèŠ‚ç‚¹ï¼ˆPERSISTENT_SEQUENTIALï¼‰ï¼Œå®ƒçš„ç»„æˆæ˜¯seqNode = seqNodePrefix + seqNodeSuffixï¼Œconfig_change_å›ºå®šä¸ºseqNodeçš„å‰ç¼€ï¼ŒseqNodeSuffix = seqNoä¸ºseqNodeçš„åç¼€ï¼ŒseqNoæ˜¯10ä½æ•°å­—çš„åºåˆ—å·ï¼Œè¿™ä¸ªåºåˆ—å·åç¼€æ˜¯è‡ªå¢çš„ï¼Œç”±zkæœåŠ¡ç«¯è‡ªåŠ¨ç”Ÿæˆå’Œç»´æŠ¤ï¼Œæ¯æ¬¡äº‹åŠ¡è¯·æ±‚æˆåŠŸå°±åŠ 1ï¼Œå®ƒä¸MySQLçš„è‡ªå¢idåŸç†ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;config_change_seqnoæ¸…é™¤è§„åˆ™&lt;/strong&gt;&lt;/span&gt;Â &lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;&lt;strong&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/273782/202002/273782-20200207231739291-1319098620.png&quot; alt=&quot;&quot; width=&quot;634&quot; height=&quot;116&quot;/&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é›†ç¾¤ç»è¿‡é•¿æœŸè¿è¡Œç§¯ç´¯ï¼Œxxx/config/changesä¸‹ä¼šç•™å­˜å¤§é‡å†å²èŠ‚ç‚¹ï¼Œå¦‚æœä¸åŠæ—¶æ¸…ç†ï¼Œä¼šæœ‰ä»¥ä¸‹å½±å“ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å¤§é‡æ— ç”¨çš„seqNodeè¿›è¡Œä¼ è¾“ï¼Œä¼šå¢åŠ ç½‘ç»œå¸¦å®½è´Ÿæ‹…&lt;/li&gt;
&lt;li&gt;å ç”¨zkæœåŠ¡ç«¯å†…å­˜åŠå­˜å‚¨èµ„æº&lt;/li&gt;
&lt;li&gt;Kafkaä¼šåšå¤§é‡æ— æ•ˆåˆ¤æ–­å’Œè®¡ç®—&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ç»¼ä¸Šæ‰€è¿°ï¼Œå› æ­¤å¿…é¡»è¦åŠæ—¶æ¸…é™¤æ— ç”¨çš„seqNodeé›†åˆï¼Œæ¸…é™¤å…¬å¼æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;å½“brokerç›‘å¬åˆ°notificationå˜åŒ–å›è°ƒæ—¶ï¼Œè®°å½•ç³»ç»Ÿæ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;è·å–xxx/config/changesä¸‹æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œè¯»å–æ¯ä¸ªseqNodeçš„åˆ›å»ºæ—¶é—´&lt;/li&gt;
&lt;li&gt;ç³»ç»Ÿæ—¶é—´å‡å»seqNodeåˆ›å»ºæ—¶é—´ï¼Œå¦‚æœæ—¶é—´å·®å€¼å¤§äºè¿‡æœŸæ—¶é—´ï¼Œå³changeExpirationMsï¼Œå°±ä¼šè¢«åˆ é™¤&lt;/li&gt;
&lt;li&gt;changeExpirationMsé»˜è®¤ä¸º15åˆ†é’Ÿï¼Œå¯ç”±brokeré…ç½®ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;config_change_seqno&lt;/strong&gt;åˆ¤æ–­å¤„ç†&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;strong&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/273782/202002/273782-20200207232023512-1481369022.png&quot; alt=&quot;&quot; width=&quot;246&quot; height=&quot;299&quot;/&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/273782/202002/273782-20200207232127834-1394479502.png&quot; alt=&quot;&quot; width=&quot;649&quot; height=&quot;119&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å‰é¢æåˆ°æ¯å½“è§¦å‘å›è°ƒå¤„ç†ï¼ŒseqNodeèŠ‚ç‚¹åˆ›å»ºæ—¶é—´è¿‡æœŸ15åˆ†é’Ÿä¼šè¢«åˆ é™¤ï¼Œåˆ é™¤æ¡ä»¶æ˜¯è§¦å‘æ‰ä¼šè¢«æ‰§è¡Œï¼Œå¦‚æœé•¿æ—¶é—´ä¸åˆ›å»ºå°±å¯èƒ½æœ‰å°‘æ•°å‡ ä¸ªseqNodeä¸€ç›´ä¿ç•™ã€‚å¦‚æœçŸ­æ—¶é—´å†…(15åˆ†é’Ÿå†…)åˆ›å»ºå¤§é‡seqNodeï¼Œåˆä¸ä¼šç«‹å³è¢«åˆ é™¤ï¼Œåªæœ‰ç­‰åˆ°ä¸‹æ¬¡è§¦å‘è¾¾åˆ°æ¡ä»¶æ‰è¡Œï¼Œé‚£æ€ä¹ˆåˆ¤æ–­å“ªäº›ä¼šè¢«å¤„ç†å‘¢ï¼Ÿbrokerç¼“å­˜ä¸­ç»´æŠ¤ä¸€ä¸ªå˜é‡lastExecutedSeqNoï¼Œå®ƒè´Ÿè´£ä¿å­˜æ‰§è¡Œå†å²ä¸­seqNodeæœ€å¤§é¡ºåºå·ï¼Œæ‰€ä»¥æ¯å½“è§¦å‘å›è°ƒè·å–seqNodeSetåˆ—è¡¨æ—¶ï¼Œéƒ½èƒ½è½»æ˜“åˆ¤æ–­å‡ºå“ªäº›éœ€è¦å¤„ç†è®¡ç®—ï¼Œä¹Ÿä¼šåŒæ­¥æ›´æ–°lastExecutedSeqNoã€‚&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;notificationä½œç”¨&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;é€šçŸ¥brokeræœ‰æ–°çš„åŠ¨æ€é…ç½®äº§ç”Ÿï¼Œè¯»å–ç›¸åº”çš„åŠ¨æ€é…ç½®&lt;/li&gt;
&lt;li&gt;ä¸ç”¨ç›‘å¬å¤§é‡å››ç§ç±»å‹é…ç½®ä¸‹å­èŠ‚ç‚¹ï¼Œæ¯ä¸ªbrokeråªéœ€è¦ç›‘å¬ä¸€ä¸ªnotificationèŠ‚ç‚¹å³å¯ï¼Œé«˜æ•ˆä¸”æ€§èƒ½ä¹Ÿé«˜&lt;/li&gt;
&lt;li&gt;å¤§å¤§å‡å°‘brokerç›‘å¬æ•°é‡ï¼Œå¦‚æœåƒcontrollerç›‘å¬/xxx/partitions/[0-N]/stateä¸€æ ·ï¼Œç›‘å¬æ•°é‡å°±æ˜¯å››ç§ç±»å‹é…ç½®zkè·¯å¾„ä¹˜ä»¥brokeræ•°é‡äº†&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;KafkaåŠ¨æ€é…ç½®å®ç°åŸç†è§£æ-é™æ€ä¸åŠ¨æ€çš„é…ç½®åŠä¼˜å…ˆçº§&quot;&gt;é™æ€ä¸åŠ¨æ€çš„é…ç½®åŠä¼˜å…ˆçº§&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;&lt;strong&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/273782/202002/273782-20200207232415536-399583457.png&quot; alt=&quot;&quot; width=&quot;564&quot; height=&quot;260&quot;/&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Â &lt;img src=&quot;https://img2018.cnblogs.com/i-beta/273782/202002/273782-20200207232515073-1164921658.png&quot; alt=&quot;&quot; width=&quot;535&quot; height=&quot;358&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;é™æ€ä¸åŠ¨æ€åŒºåˆ«&lt;/strong&gt;&lt;/span&gt;ã€‚é™æ€é…ç½®æ˜¯Brokerå†…ç½®é»˜è®¤é…ç½®å’Œé™æ€é…ç½®æ–‡ä»¶server.propertiesï¼Œbrokerå¯åŠ¨å‰å¯ä»¥ä»»æ„ä¿®æ”¹ï¼Œå¯åŠ¨åä¸å¯ä¿®æ”¹ã€‚åŠ¨æ€é…ç½®æ˜¯brokerå¯åŠ¨è¿è¡Œåï¼Œå¯ä»¥åœ¨çº¿æ›´æ–°ç”Ÿæ•ˆï¼Œå·å·è¯´ä¸€å¥ç¦»çº¿ä¹Ÿå¯ä»¥æ”¹ï¼Œå°±æ˜¯ä¸ç”Ÿæ•ˆè€Œå·²ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;é…ç½®ä¼˜å…ˆçº§&lt;/span&gt;ã€‚&lt;/strong&gt;ä»¥ä¸Š4ä¸ªå›¾åŒ…å«4ç±»å‹é…ç½®æ—¢æœ‰åŠ¨æ€ä¹Ÿæœ‰é™æ€ï¼Œé‚£ä¼˜å…ˆçº§å¦‚ä½•å‘¢ï¼ŸåŠ¨æ€é…ç½®ä¼˜å…ˆçº§é«˜äºé™æ€é…ç½®ã€‚å¦‚ä¸Šå›¾1ã€2ã€4ï¼Œç¯è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼Œå¯¹äºåŠ¨æ€é…ç½®æ¥è¯´ï¼Œä¿®æ”¹é…ç½®ä½œç”¨åŸŸèŒƒå›´è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼Œåä¹‹äº¦ç„¶ã€‚ä¼˜å…ˆçº§æœ€é«˜çš„ï¼Œä¼šé€çº§è¦†ç›–ç›¸åŒé…ç½®é¡¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;å½“brokerå¯åŠ¨æ—¶&lt;/span&gt;ã€‚&lt;/strong&gt;è¯»å–é¡ºåºä¾æ¬¡ä¸ºbrokerå†…ç½®é»˜è®¤é…ç½®ï¼Œbrokeré™æ€é…ç½®æ–‡ä»¶ï¼ŒåŠ¨æ€é…ç½®ã€‚å½“é…ç½®é¡¹ç›¸åŒæ—¶ï¼Œé«˜ä¼˜å…ˆçº§è¦†ç›–æ¬¡ä¼˜å…ˆçš„ï¼Œå…¶ä»–ä¾æ¬¡ç±»æ¨&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;å›¾ç¤ºè¯´æ˜&lt;/span&gt;ï¼š&lt;/strong&gt;ä¸Šå›¾1ã€2ã€3ã€4ä¸­ï¼Œå…¶ä¸­å›¾1ã€2ã€4ä¸­ç¯æ•°å­—è¡¨ç¤ºé…ç½®ä¼˜å…ˆçº§å…³ç³»ï¼Œæ•°å­—ä»1~5è¡¨ç¤ºä¼˜å…ˆçº§ä»é«˜åˆ°ä½ã€‚&lt;strong&gt;å›¾3ä¸ºä¸¤çº§å…³è”ã€‚&lt;/strong&gt;Userså’ŒClientsç»„åˆå®ç°é…ç½®ç®¡ç†ï¼Œè¿™ä¸¤è€…ç»„åˆç”¨äºå®¢æˆ·ç«¯é…é¢é™æµï¼ŒUsersä¸Clientså°±åƒä¸¤çº§ç›®å½•ä¸€æ ·ï¼Œä¸€ä¸ªUserå¯ä»¥åŒ…å«ä¸€ä¸ªã€å¤šä¸ªclientIdæˆ–æ‰€æœ‰clientIdã€‚&lt;strong&gt;å›¾4&lt;/strong&gt;ä¸­æ—¢æœ‰ä¼˜å…ˆçº§å…³ç³»ä¹Ÿæœ‰é…ç½®å‚æ•°åŒ…å«å…³ç³»ï¼Œtopicsç±»å‹é…ç½®æ˜¯brokersç±»å‹é…ç½®çš„å­é›†ï¼Œbrokersé™¤äº†åŒ…å«topicé…ç½®å¤–è¿˜æœ‰DynamicThreadPoolã€DynamicListenerConfigã€DynamicConnectionQuotaã€LogCleaneré…ç½®ã€‚&lt;/p&gt;
&lt;h2 id=&quot;KafkaåŠ¨æ€é…ç½®å®ç°åŸç†è§£æ-å¦‚ä½•ä½¿ç”¨åŠ¨æ€é…ç½®&quot;&gt;å¦‚ä½•ä½¿ç”¨åŠ¨æ€é…ç½®&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;ä½¿ç”¨è„šæœ¬kafka-configs.shå’Œkafka-topics.shï¼Œkafka-configs.shæ”¯æŒå››ç§ç±»å‹ï¼Œkafka-topics.shä»…æ”¯æŒtopicsç±»å‹&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨Apache-kafkaå®˜æ–¹æä¾›çš„javaç‰ˆæœ¬å®¢æˆ·ç«¯APIè°ƒç”¨&lt;/li&gt;
&lt;li&gt;ç›´æ¥å†™zkå®ç°ï¼Œå…·ä½“éµå¾ªå¦‚ä¸Šå†™notificationå’Œdynamic_configè§„èŒƒ&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å¦‚æƒ³æ›´æ·±å…¥äº†è§£&lt;a href=&quot;https://www.cnblogs.com/lizherui/p/12275193.html&quot; target=&quot;_blank&quot;&gt;kafka-configs.shç”¨æ³•&lt;/a&gt;ï¼Œè¯·æŸ¥çœ‹&lt;/p&gt;
&lt;h2 id=&quot;KafkaåŠ¨æ€é…ç½®å®ç°åŸç†è§£æ-æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h2&gt;
&lt;ul readability=&quot;-0.5&quot;&gt;&lt;li&gt;Kafkaé…ç½®å‚æ•°åˆ†ä¸ºé™æ€é…ç½®å’ŒåŠ¨æ€é…ç½®ï¼Œé™æ€åˆ†ä¸ºå†…ç½®é»˜è®¤ä¸å¤–ç½®ç”¨æˆ·é…ç½®ï¼Œç”¨æˆ·é…ç½®ä¼˜å…ˆäºå†…ç½®é…ç½®&lt;/li&gt;
&lt;li&gt;åŠ¨æ€é…ç½®ä¸º4ç±»å‹11ä¸ªzkç›¸å¯¹è·¯å¾„ï¼Œå³11ç§ç²’åº¦é…ç½®å¯¹è±¡ç”Ÿæ•ˆï¼ŒåŒç±»å‹ä½œç”¨åŸŸèŒƒå›´è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜&lt;/li&gt;
&lt;li&gt;åŠ¨æ€é…ç½®ä¼˜å…ˆçº§æ¯”é™æ€é…ç½®ä¼˜å…ˆçº§é«˜ï¼ŒåŠ¨æ€é…ç½®ä¸­Usersä¸Clientså¯ä»¥ç»„åˆé…ç½®&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;ä»è®¾è®¡åŸç†ä¸­äº†è§£config_change_seqNoç”Ÿæˆè§„åˆ™&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;å†™ä¸Šæ–‡ä¸­ç†è§£äº†å†™Notificationçš„ä½œç”¨ï¼Œä»è€Œç†è§£ä»€ä¹ˆåœºæ™¯ä¼šé€‚åˆä½¿ç”¨zkä¸­æŒä¹…é¡ºåºèŠ‚ç‚¹(PERSISTENT_SEQUENTIAL)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;æ³¨æ„äº‹é¡¹&lt;/span&gt;ï¼šä»¥ä¸Šé…ç½®è§£æï¼Œæ˜¯åŸºäºKafka-&lt;strong&gt;2.3.1ç‰ˆæœ¬åˆ†æ&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;KafkaåŠ¨æ€é…ç½®å®ç°åŸç†è§£æ-å‚è€ƒèµ„æ–™&quot;&gt;å‚è€ƒèµ„æ–™&lt;/h2&gt;
&lt;p&gt;Release Notes - Kafka - Version 0.8.1ï¼š&lt;a class=&quot;external-link&quot; href=&quot;https://archive.apache.org/dist/kafka/0.8.1/RELEASE_NOTES.html&quot; rel=&quot;nofollow&quot;&gt;https://archive.apache.org/dist/kafka/0.8.1/RELEASE_NOTES.html&lt;/a&gt;&lt;br/&gt;Release Notes - Kafka - Version 0.10.1.0ï¼š&lt;a class=&quot;external-link&quot; href=&quot;https://archive.apache.org/dist/kafka/0.10.1.0/RELEASE_NOTES.html&quot; rel=&quot;nofollow&quot;&gt;https://archive.apache.org/dist/kafka/0.10.1.0/RELEASE_NOTES.html&lt;/a&gt;&lt;br/&gt;Release Notes - Kafka - Version 0.10.2.0ï¼š&lt;a class=&quot;external-link&quot; href=&quot;https://archive.apache.org/dist/kafka/0.10.2.0/RELEASE_NOTES.html&quot; rel=&quot;nofollow&quot;&gt;https://archive.apache.org/dist/kafka/0.10.2.0/RELEASE_NOTES.html&lt;/a&gt;&lt;br/&gt;Release Notes - Kafka - Version 0.10.2.1ï¼š&lt;a class=&quot;external-link&quot; href=&quot;https://archive.apache.org/dist/kafka/0.10.2.1/RELEASE_NOTES.html&quot; rel=&quot;nofollow&quot;&gt;https://archive.apache.org/dist/kafka/0.10.2.1/RELEASE_NOTES.html&lt;/a&gt;&lt;br/&gt;Release Notes - Kafka - Version 1.1.0ï¼š&lt;a class=&quot;external-link&quot; href=&quot;https://archive.apache.org/dist/kafka/1.1.0/RELEASE_NOTES.html&quot; rel=&quot;nofollow&quot;&gt;https://archive.apache.org/dist/kafka/1.1.0/RELEASE_NOTES.html&lt;/a&gt;&lt;br/&gt;Release Notes - Kafka - Version 1.1.1ï¼š&lt;a class=&quot;external-link&quot; href=&quot;https://archive.apache.org/dist/kafka/1.1.1/RELEASE_NOTES.html&quot; rel=&quot;nofollow&quot;&gt;https://archive.apache.org/dist/kafka/1.1.1/RELEASE_NOTES.html&lt;/a&gt;&lt;br/&gt;Release Notes - Kafka - Version 2.0.0ï¼š&lt;a class=&quot;external-link&quot; href=&quot;https://archive.apache.org/dist/kafka/2.0.0/RELEASE_NOTES.html&quot; rel=&quot;nofollow&quot;&gt;https://archive.apache.org/dist/kafka/2.0.0/RELEASE_NOTES.html&lt;/a&gt;&lt;br/&gt;KIP-21 - Dynamic Configurationï¼š&lt;a class=&quot;external-link&quot; href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/KIP-21+-+Dynamic+Configuration&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/KAFKA/KIP-21+-+Dynamic+Configuration&lt;/a&gt;&lt;br/&gt;KIP-226 - Dynamic Broker Configurationï¼š&lt;a class=&quot;external-link&quot; href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/KIP-226+-+Dynamic+Broker+Configuration&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/KAFKA/KIP-226+-+Dynamic+Broker+Configuration&lt;/a&gt;&lt;br/&gt;Make DynamicConfigManager to use the ZkNodeChangeNotificationListener introduced as part of KAFKA-2211ï¼š&lt;a class=&quot;external-link&quot; href=&quot;https://issues.apache.org/jira/browse/KAFKA-2547&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/KAFKA-2547&lt;/a&gt;&lt;br/&gt;KIP-257 - Configurable Quota Managementï¼š&lt;a class=&quot;external-link&quot; href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/KIP-257+-+Configurable+Quota+Management&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/KAFKA/KIP-257+-+Configurable+Quota+Management&lt;/a&gt;&lt;br/&gt;KIP-73 Replication Quotasï¼š&lt;a class=&quot;external-link&quot; href=&quot;https://cwiki.apache.org/confluence/display/KAFKA/KIP-73+Replication+Quotas&quot; rel=&quot;nofollow&quot;&gt;https://cwiki.apache.org/confluence/display/KAFKA/KIP-73+Replication+Quotas&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
<pubDate>Fri, 07 Feb 2020 15:28:00 +0000</pubDate>
<dc:creator>æå¿—æ¶›</dc:creator>
<og:description>é—®é¢˜å¯¼è¯» Apache Kafkaåœ¨å…¨çƒå„ä¸ªé¢†åŸŸå„å¤§å…¬å¸è·å¾—å¹¿æ³›ä½¿ç”¨ï¼Œå¾—ç›Šäºå®ƒå¼ºå¤§çš„åŠŸèƒ½å’Œä¸æ–­å®Œå–„çš„ç”Ÿæ€ã€‚å…¶ä¸­KafkaåŠ¨æ€é…ç½®æ˜¯ä¸€ä¸ªæ¯”è¾ƒé«˜é¢‘å¥½ç”¨çš„åŠŸèƒ½ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥ä¸€æ¢ç©¶ç«Ÿã€‚ åŠ¨æ€é…ç½®æ˜¯å¦‚ä½•è®¾è®¡çš„ï¼Ÿ</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/lizherui/p/12271285.html</dc:identifier>
</item>
<item>
<title>pythonç¬”è®°13 - cuiyongchao007</title>
<link>http://www.cnblogs.com/cuiyongchao007/p/12275107.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/cuiyongchao007/p/12275107.html</guid>
<description>&lt;p&gt;ä»Šæ—¥å†…å®¹&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;è£…é¥°å™¨&lt;/li&gt;
&lt;li&gt;æ¨å¯¼å¼&lt;/li&gt;
&lt;li&gt;æ¨¡å—ã€å¯é€‰ã€‘&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å†…å®¹å›é¡¾&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;å‡½æ•°&lt;/li&gt;
&lt;/ol&gt;&lt;ul&gt;&lt;li&gt;å‚æ•°
&lt;ul&gt;&lt;li&gt;def (a1,a2):pass&lt;/li&gt;
&lt;li&gt;def (a1,a2=None):pass é»˜è®¤å‚æ•°æ¨èç”¨ä¸å¯å˜ç±»å‹ï¼Œæ…ç”¨å¯å˜ç±»å‹ã€‚&lt;/li&gt;
&lt;li&gt;def(*args,**kwargs):pass&lt;/li&gt;
&lt;li&gt;æ³¨æ„ï¼šä½ç½®å‚æ•° &amp;gt; å…³é”®å­—å‚æ•°&lt;/li&gt;
&lt;li&gt;é¢è¯•é¢˜
&lt;ul readability=&quot;1&quot;&gt;&lt;li&gt;å‡½æ•°å¯ä»¥åšå‚æ•°ã€çŸ¥è¯†ç‚¹ã€‘ã€‚&lt;br/&gt;def func(arg):&lt;br/&gt;arg()&lt;br/&gt;def show():&lt;br/&gt;pass&lt;br/&gt;func(show)&lt;/li&gt;
&lt;li readability=&quot;5&quot;&gt;
&lt;p&gt;å‡½æ•°çš„å‚æ•°ä¼ é€’çš„æ˜¯ä»€ä¹ˆï¼Ÿã€å†…å­˜åœ°å€=å¼•ç”¨ or å€¼ã€‘&lt;br/&gt;v = [11,2,33,4]&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;def func(arg):
    print(id(arg)) # åˆ—è¡¨å†…å­˜åœ°å€

print(id(v)) # åˆ—è¡¨å†…å­˜åœ°å€
func(v)

# ä¼ é€’çš„æ˜¯å†…å­˜åœ°å€ã€‚&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;*argså’Œ**kwargsçš„ä½œç”¨&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;è¿”å›å€¼
&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œå‡½æ•°
&lt;ul readability=&quot;6&quot;&gt;&lt;li readability=&quot;5&quot;&gt;
&lt;p&gt;å‡½æ•°ä¸è¢«è°ƒç”¨ï¼Œå†…éƒ¨ä»£ç æ°¸è¿œä¸æ‰§è¡Œã€‚&lt;br/&gt;def func():&lt;br/&gt;return i&lt;br/&gt;func_list = []&lt;br/&gt;for i in range(10):&lt;br/&gt;func_list.append(func)&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;print(i) # 9
v1 = func_list[4]()#9
v2 = func_list[0]()#9
func_list = []
for i in range(10):
    # func_list.append(lambda :x) # å‡½æ•°ä¸è¢«è°ƒç”¨ï¼Œå†…éƒ¨æ°¸è¿œä¸æ‰§è¡Œï¼ˆä¸çŸ¥é“æ˜¯ä»€ä¹ˆã€‚ï¼‰
    func_list.append(lambda :i) # å‡½æ•°ä¸è¢«è°ƒç”¨ï¼Œå†…éƒ¨æ°¸è¿œä¸æ‰§è¡Œï¼ˆä¸çŸ¥é“æ˜¯ä»€ä¹ˆã€‚ï¼‰

print(func_list)#åˆ—è¡¨ï¼Œ10ä¸ªå‡½æ•°çš„å†…å­˜åœ°å€ã€‚

print(func_list[2]())#9&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li readability=&quot;7&quot;&gt;
&lt;p&gt;æ‰§è¡Œå‡½æ•°æ—¶ï¼Œä¼šæ–°åˆ›å»ºä¸€å—å†…å­˜ä¿å­˜è‡ªå·±å‡½æ•°æ‰§è¡Œçš„ä¿¡æ¯ =&amp;gt; é—­åŒ…&lt;br/&gt;def base():&lt;br/&gt;return i&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;def func(arg):
    def inner():
        return arg
    return inner

base_list = [] # [base,base,]
func_list = [] # [ç”±ç¬¬ä¸€æ¬¡æ‰§è¡Œfuncå‡½æ•°çš„å†…å­˜åœ°å€ï¼Œå†…éƒ¨arg=0 åˆ›å»ºçš„innerå‡½æ•°ï¼Œæœ‰arg=1çš„innerå‡½æ•° ]
for i in range(10): # i = 0 ï¼Œ1
    base_list.append(base)
    func_list.append(func(i))

# 1. base_list å’Œ func_listä¸­åˆ†åˆ«ä¿å­˜çš„æ˜¯ä»€ä¹ˆï¼Ÿ
&quot;&quot;&quot;
base_listä¸­å­˜å‚¨éƒ½æ˜¯baseå‡½æ•°ã€‚
func_listä¸­å­˜å‚¨çš„æ˜¯innerå‡½æ•°ï¼Œç‰¹åˆ«è¦è¯´çš„æ˜¯æ¯ä¸ªinneræ˜¯åœ¨ä¸åŒçš„åœ°å€åˆ›å»ºã€‚
&quot;&quot;&quot;
# 2. å¦‚æœå¾ªç¯æ‰“å°ä»€ä¹ˆï¼Ÿ
for item in base_list:
    v = item() # æ‰§è¡Œbaseå‡½æ•°
    print(v) # éƒ½æ˜¯9
for data in func_list:
    v = data()
    print(v) # 0 1 2 3 4 ã€‚åœ¨forå¾ªç¯è¿‡ç¨‹ä¸­ï¼Œfuncï¼ˆiï¼‰å·²ç»æ‰§è¡Œï¼Œforå¾ªç¯è¿‡ç¨‹ä¸­içš„å˜åŒ–å€¼å·²ç»è¢«åŒ…åœ¨å…¶ä¸­ã€‚&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æ€»ç»“ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä¼ å‚ï¼šä½ç½®å‚æ•° &amp;gt; å…³é”®å­—å‚æ•°&lt;/li&gt;
&lt;li&gt;å‡½æ•°ä¸è¢«è°ƒç”¨ï¼Œå†…éƒ¨ä»£ç æ°¸è¿œä¸æ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;æ¯æ¬¡è°ƒç”¨å‡½æ•°æ—¶ï¼Œéƒ½ä¼šä¸ºæ­¤æ¬¡è°ƒç”¨å¼€è¾Ÿä¸€å—å†…å­˜ï¼Œå†…å­˜å¯ä»¥ä¿å­˜è‡ªå·±ä»¥åæƒ³è¦ç”¨çš„å€¼ã€‚&lt;/li&gt;
&lt;li&gt;å‡½æ•°æ˜¯ä½œç”¨åŸŸï¼Œå¦‚æœè‡ªå·±ä½œç”¨åŸŸä¸­æ²¡æœ‰ï¼Œåˆ™å¾€ä¸Šçº§ä½œç”¨åŸŸæ‰¾ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;ol&gt;&lt;li&gt;å†…ç½®å’ŒåŒ¿åå‡½æ•°ï¼ˆç²¾è‹±ï¼‰&lt;/li&gt;
&lt;/ol&gt;&lt;ul&gt;&lt;li&gt;å†…ç½®å‡½æ•°&lt;/li&gt;
&lt;li&gt;åŒ¿åå‡½æ•°&lt;/li&gt;
&lt;/ul&gt;&lt;ol&gt;&lt;li&gt;æ¨¡å—&lt;/li&gt;
&lt;/ol&gt;&lt;ul&gt;&lt;li&gt;getpass&lt;/li&gt;
&lt;li&gt;random&lt;/li&gt;
&lt;li&gt;hashlib&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å†…å®¹è¯¦ç»†&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;ä½œä¸šé¢˜è®²è§£&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;2.è£…é¥°å™¨&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;v = 1
v = 2 
# ########################
def func():
    pass 
v = 10
v = func

# ##########################
def base():
    print(1)

def bar():
    print(2)

bar = base
bar()

def func():
    def inner():
        pass
    return inner 

v = func()
print(v) # innerå‡½æ•°
# #########################################
def func(arg):
    def inner():
        print(arg)
    return inner 

v1 = func(1)
v2 = func(2)

print(v1,v2)
#ä¸¤ä¸ªinnerå‡½æ•°å†…å­˜åœ°å€ã€‚
# #########################################
def func(arg):
    def inner():
        arg()
    return inner

def f1():
    print(123)

v1 = func(f1)
v1()
# ###########################################
def func(arg):
    def inner():
        arg()
    return inner

def f1():
    print(123)
    return 666

v1 = func(f1)
result = v1() # æ‰§è¡Œinnerå‡½æ•° / f1å«å‡½æ•° -&amp;gt; 123 
print(result) # None
# ###########################################
def func(arg):
    def inner():
        return arg()
    return inner

def f1():
    print(123)
    return 666

v1 = func(f1)
result = v1() # æ‰§è¡Œinnerå‡½æ•° / f1å«å‡½æ•° -&amp;gt; 123
print(result) # 666


def func():
    print(1)
    
v1 = func
func = 666&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;===========================è£…é¥°å™¨=========&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;def func(arg):
    def inner():
        print('before')
        v = arg()
        print('after')
        return v 
    return inner 

def index():
    print('123')
    return '666'


# ç¤ºä¾‹ä¸€
&quot;&quot;&quot;
v1 = index() # æ‰§è¡Œindexå‡½æ•°ï¼Œæ‰“å°123å¹¶è¿”å›666èµ‹å€¼ç»™v1.
&quot;&quot;&quot;
# ç¤ºä¾‹äºŒ
&quot;&quot;&quot;
v2 = func(index) # v2æ˜¯innerå‡½æ•°ï¼Œarg=indexå‡½æ•°
index = 666 
v3 = v2()
&quot;&quot;&quot;
# ç¤ºä¾‹ä¸‰
&quot;&quot;&quot;
v4 = func(index)
index = v4  # index ==&amp;gt; inner 
index()
&quot;&quot;&quot;

# ç¤ºä¾‹å››
index = func(index)
index()

def func(arg):
    def inner():
        v = arg()
        return v 
    return inner 

# ç¬¬ä¸€æ­¥ï¼šæ‰§è¡Œfuncå‡½æ•°å¹¶å°†ä¸‹é¢çš„å‡½æ•°å‚æ•°ä¼ é€’ï¼Œç›¸å½“äºï¼šfunc(index)
# ç¬¬äºŒæ­¥ï¼šå°†funcçš„è¿”å›å€¼é‡æ–°èµ‹å€¼ç»™ä¸‹é¢çš„å‡½æ•°åã€‚ index = func(index)
@func 
def index():
    print(123)
    return 666

print(index)
index=func(index)
index()&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è£…é¥°å™¨ï¼šåœ¨ä¸æ”¹å˜åŸå‡½æ•°å†…éƒ¨ä»£ç çš„åŸºç¡€ä¸Šï¼Œåœ¨å‡½æ•°æ‰§è¡Œä¹‹å‰å’Œä¹‹åè‡ªåŠ¨æ‰§è¡ŒæŸä¸ªåŠŸèƒ½ã€‚ ï¼ˆä¹‹å‰å’Œä¹‹åå¢åŠ æŸäº›åŠŸèƒ½-funcï¼‰&lt;/p&gt;
&lt;p&gt;åº”ç”¨ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;# è®¡ç®—å‡½æ•°æ‰§è¡Œæ—¶é—´
import time
def wrapper(func):
    def inner():
        start_time = time.time()
        v = func()
        end_time = time.time()
        print(end_time-start_time)
        return v
    return inner

@wrapper
def func1():
    time.sleep(2)
    print(123)
@wrapper
def func2():
    time.sleep(1)
    print(123)

def func3():
    time.sleep(1.5)
    print(123)

func1()
#è£…é¥°å™¨ä½œç”¨ï¼Œåœ¨å˜åŠ¨åŸå‡½æ•°ï¼ˆfuncï¼‰çš„åŸºç¡€ä¸Šï¼Œå¢åŠ åŸå‡½æ•°çš„åŠŸèƒ½(åœ¨wrapperé‡Œå¢åŠ )ã€‚
#åœ¨ä¸æ”¹å˜åŸå‡½æ•°å†…éƒ¨ä»£ç çš„åŸºç¡€ä¸Šï¼Œåœ¨å‡½æ•°æ‰§è¡Œä¹‹å‰å’Œä¹‹åè‡ªåŠ¨æ‰§è¡ŒæŸä¸ªåŠŸèƒ½ã€‚&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ€»ç»“&lt;/p&gt;
&lt;ul readability=&quot;0&quot;&gt;&lt;li&gt;ç›®çš„ï¼šåœ¨ä¸æ”¹å˜åŸå‡½æ•°çš„åŸºç¡€ä¸Šï¼Œå†å‡½æ•°æ‰§è¡Œå‰åè‡ªå®šä¹‰åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;li readability=&quot;3&quot;&gt;
&lt;p&gt;ç¼–å†™è£…é¥°å™¨ å’Œåº”ç”¨&lt;br/&gt;# è£…é¥°å™¨çš„ç¼–å†™&lt;br/&gt;def x(func):&lt;br/&gt;def y():&lt;br/&gt;# å‰&lt;br/&gt;ret = func()&lt;br/&gt;# å&lt;br/&gt;return ret&lt;br/&gt;return y&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;# è£…é¥°å™¨çš„åº”ç”¨
@x
def index():
    return 10

@x
def manage():
    pass

# æ‰§è¡Œå‡½æ•°ï¼Œè‡ªåŠ¨è§¦å‘è£…é¥°å™¨äº†
v = index()
print(v)&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;åº”ç”¨åœºæ™¯ï¼šæƒ³è¦ä¸ºå‡½æ•°æ‰©å±•åŠŸèƒ½æ—¶ï¼Œå¯ä»¥é€‰æ‹©ç”¨è£…é¥°å™¨ã€‚&lt;/li&gt;
&lt;li&gt;è®°ä½ï¼š
&lt;ul readability=&quot;-0.5&quot;&gt;&lt;li&gt;è£…é¥°å™¨ç¼–å†™æ ¼å¼&lt;br/&gt;def å¤–å±‚å‡½æ•°(å‚æ•°): #å‚æ•°æ˜¯å‡½æ•°å&lt;br/&gt;def å†…å±‚å‡½æ•°(*args,**kwargs):&lt;br/&gt;return å‚æ•°(*args,**kwargs)&lt;br/&gt;return å†…å±‚å‡½æ•°&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;è£…é¥°å™¨åº”ç”¨æ ¼å¼&lt;br/&gt;@å¤–å±‚å‡½æ•°&lt;br/&gt;def index():&lt;br/&gt;pass&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;index()&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;é—®é¢˜ï¼šä¸ºä»€ä¹ˆè¦åŠ  *args, **kwargs&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;3.æ¨å¯¼å¼&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;åˆ—è¡¨æ¨å¯¼å¼
&lt;ul readability=&quot;4.5&quot;&gt;&lt;li readability=&quot;12&quot;&gt;
&lt;p&gt;åŸºæœ¬æ ¼å¼&lt;br/&gt;&quot;&quot;&quot;&lt;br/&gt;ç›®çš„ï¼šæ–¹ä¾¿çš„ç”Ÿæˆä¸€ä¸ªåˆ—è¡¨ã€‚&lt;br/&gt;æ ¼å¼ï¼š&lt;br/&gt;v1 = [i for i in å¯è¿­ä»£å¯¹è±¡ ]&lt;br/&gt;v2 = [i for i in å¯è¿­ä»£å¯¹è±¡ if æ¡ä»¶ ] # æ¡ä»¶ä¸ºtrueæ‰è¿›è¡Œappend&lt;br/&gt;&quot;&quot;&quot;&lt;br/&gt;v1 = [ i for i in 'alex' ]&lt;br/&gt;v2 = [i+100 for i in range(10)]&lt;br/&gt;v3 = [99 if i&amp;gt;5 else 66 for i in range(10)]&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;def func():
    return 100
v4 = [func for i in range(10)]

v5 = [lambda : 100 for i in range(10)]
result = v5[9]()

def func():
    return i
v6 = [func for i in range(10)]
result = v6[5]()

v7 = [lambda :i for i in range(10)]
result = v7[5]()


v8 = [lambda x:x*i for i in range(10)] # æ–°æµªå¾®åšé¢è¯•é¢˜
# 1.è¯·é—® v8 æ˜¯ä»€ä¹ˆï¼Ÿ
# 2.è¯·é—® v8[0](2) çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ

# é¢è¯•é¢˜
def num():
    return [lambda x:i*x for i in range(4)]
# num() -&amp;gt; [å‡½æ•°,å‡½æ•°,å‡½æ•°,å‡½æ•°]
print([ m(2) for m in num() ]) # [6,6,6,6]

# ##################### ç­›é€‰ #########################
v9 = [i for i in range(10) if i &amp;gt; 5]&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;é›†åˆæ¨å¯¼å¼&lt;br/&gt;v1 = { i for i in 'alex' }&lt;/li&gt;
&lt;li&gt;å­—å…¸çš„æ¨å¯¼å¼&lt;br/&gt;v1 = { 'k'+str(i):i for i in range(10) }&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä»Šæ—¥æ€»ç»“&lt;/p&gt;
</description>
<pubDate>Fri, 07 Feb 2020 15:17:00 +0000</pubDate>
<dc:creator>cuiyongchao007</dc:creator>
<og:description>ä»Šæ—¥å†…å®¹ è£…é¥°å™¨ æ¨å¯¼å¼ æ¨¡å—ã€å¯é€‰ã€‘ å†…å®¹å›é¡¾ 1. å‡½æ•° å‚æ•° def (a1,a2):pass def (a1,a2=None):pass é»˜è®¤å‚æ•°æ¨èç”¨ä¸å¯å˜ç±»å‹ï¼Œæ…ç”¨å¯å˜ç±»å‹ã€‚ def( a</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/cuiyongchao007/p/12275107.html</dc:identifier>
</item>
<item>
<title>å¹¶å‘é˜Ÿåˆ—ä¹‹ConcurrentLinkedQueue - javaå°æ–°äºº</title>
<link>http://www.cnblogs.com/wyq1995/p/12271664.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/wyq1995/p/12271664.html</guid>
<description>&lt;p&gt;ã€€ã€€æœ¬æ¥æƒ³ç€ç›´æ¥è¯´çº¿ç¨‹æ± çš„ï¼Œä¸è¿‡åœ¨è¯´çº¿ç¨‹æ± ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»è¦çŸ¥é“å¹¶å‘å®‰å…¨é˜Ÿåˆ—ï¼›å› ä¸ºä¸€èˆ¬æƒ…å†µä¸‹çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡æ˜¯ä¸€å®šçš„ï¼Œè‚¯å®šä¸ä¼šè¶…è¿‡æŸä¸ªé˜ˆå€¼ï¼Œé‚£ä¹ˆå½“ä»»åŠ¡å¤ªå¤šäº†çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¿…é¡»æŠŠå¤šä½™çš„ä»»åŠ¡ä¿å­˜åˆ°å¹¶å‘å®‰å…¨é˜Ÿåˆ—ä¸­ï¼Œå½“çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹ç©ºé—²ä¸‹æ¥äº†ï¼Œå°±ä¼šåˆ°å¹¶å‘å®‰å…¨é˜Ÿåˆ—ä¸­æ‹¿ä»»åŠ¡ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€é‚£ä¹ˆä»€ä¹ˆæ˜¯å¹¶å‘å®‰å…¨é˜Ÿåˆ—å‘¢ï¼Ÿå…¶å®å¯ä»¥ç®€å•çœ‹ä½œæ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œç„¶åæˆ‘ä»¬å…ˆåŠæ³•å»å­˜å–èŠ‚ç‚¹ï¼›æ€»çš„æ¥è¯´ï¼Œå¹¶å‘å®‰å…¨é˜Ÿåˆ—åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯é˜»å¡çš„ï¼Œä¸€ç§æ˜¯éé˜»å¡çš„ï¼Œå‰è€…æ˜¯ç”¨é”æ¥å®ç°çš„ï¼Œåè€…ç”¨CASå®ç°çš„ï¼›&lt;/p&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;ä¸€.ç®€å•ä»‹ç»ConcurrentLinkedQueue&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€è¿™ä¸ªé˜Ÿåˆ—ç”¨æ³•æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå°±ç±»ä¼¼LinkedListçš„ç”¨æ³•ï¼Œæ€ä¹ˆå¯¹ä¸€ä¸ªé“¾è¡¨ç»§ç»­å¢åˆ æ”¹æŸ¥ï¼Œä¸å¤šè¯´ï¼Œæˆ‘ä»¬å°±è¯´ä¸€ä¸‹å…¶ä¸­å‡ ä¸ªå…³é”®çš„æ–¹æ³•ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€é¦–å…ˆï¼Œè¿™ä¸ªé˜Ÿåˆ—æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„æ— ç•Œéé˜»å¡é˜Ÿåˆ—ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªå•å‘é“¾è¡¨ï¼Œæ— ç•Œçš„æ„æ€å°±æ˜¯æ²¡æœ‰é™åˆ¶æœ€å¤§é•¿åº¦ï¼Œéé˜»å¡è¡¨ç¤ºç”¨CASå®ç°å…¥é˜Ÿå’Œå‡ºé˜Ÿæ“ä½œï¼Œæˆ‘ä»¬æ‰“å¼€è¿™ä¸ªç±»å°±å¯ä»¥çŸ¥é“ï¼Œæœ‰ä¸€ä¸ªå†…éƒ¨ç±»Nodeï¼Œå…¶ä¸­é‡è¦çš„å±æ€§å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1368608/202002/1368608-20200207171741540-1608739999.png&quot; alt=&quot;&quot; width=&quot;329&quot; height=&quot;212&quot;/&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt;ç”¨äºå­˜æ”¾èŠ‚ç‚¹çš„å€¼&lt;/span&gt;
&lt;span&gt;volatile&lt;/span&gt;&lt;span&gt; E item;
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹&lt;/span&gt;
&lt;span&gt;volatile&lt;/span&gt; Node&amp;lt;E&amp;gt;&lt;span&gt; next;
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è¿™é‡Œä¹Ÿæ˜¯ç”¨çš„æ˜¯UNSAFEç±»ï¼Œå‰é¢è¯´è¿‡äº†ï¼Œè¿™ä¸ªç±»ç›´æ¥æä¾›CASæ“ä½œ&lt;/span&gt;
&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt;&lt;span&gt; sun.misc.Unsafe UNSAFE;
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;itemå­—æ®µçš„åç§»é‡&lt;/span&gt;
&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;long&lt;/span&gt;&lt;span&gt; itemOffset;
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;nextçš„åç§»é‡&lt;/span&gt;
&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;long&lt;/span&gt; nextOffset;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ã€€ã€€ç„¶åConcurrentLinkedQueueä¸­å‡ ä¸ªé‡è¦çš„å±æ€§ï¼Œå¥½åƒä¹Ÿæ²¡ä»€ä¹ˆé‡è¦çš„ï¼Œå°±ä¿å­˜äº†å¤´èŠ‚ç‚¹å’Œå°¾èŠ‚ç‚¹ï¼Œæ³¨æ„ï¼Œé»˜è®¤æƒ…å†µä¸‹å¤´èŠ‚ç‚¹å’Œå°¾èŠ‚ç‚¹éƒ½æ˜¯å“¨å…µèŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå­˜nullçš„NodeèŠ‚ç‚¹&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å­˜æ”¾é“¾è¡¨çš„å¤´èŠ‚ç‚¹&lt;/span&gt;
&lt;span&gt;private&lt;/span&gt; &lt;span&gt;transient&lt;/span&gt; &lt;span&gt;volatile&lt;/span&gt; Node&amp;lt;E&amp;gt;&lt;span&gt; head;
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å­˜æ”¾é“¾è¡¨çš„å°¾èŠ‚ç‚¹&lt;/span&gt;
&lt;span&gt;private&lt;/span&gt; &lt;span&gt;transient&lt;/span&gt; &lt;span&gt;volatile&lt;/span&gt; Node&amp;lt;E&amp;gt;&lt;span&gt; tail;
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;UNSAFEå¯¹è±¡&lt;/span&gt;
&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt;&lt;span&gt; sun.misc.Unsafe UNSAFE;
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;headå­—æ®µçš„åç§»é‡&lt;/span&gt;
&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;long&lt;/span&gt;&lt;span&gt; headOffset;
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;tailå­—æ®µåç§»é‡&lt;/span&gt;
&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;long&lt;/span&gt; tailOffset;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1368608/202002/1368608-20200207172743551-236154494.png&quot; alt=&quot;&quot; width=&quot;322&quot; height=&quot;67&quot;/&gt;&lt;/p&gt;



&lt;p&gt;ã€€ã€€ä¸‹é¢æˆ‘ä»¬ç›´æ¥çœ‹ä¸€äº›é‡è¦æ–¹æ³•å§ï¼æ…¢æ…¢åˆ†æå…¶ä¸­çš„ç®—æ³•æ‰æ˜¯å…³é”®çš„&lt;/p&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;äºŒ.offeræ–¹æ³•&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€è¿™ä¸ªæ–¹æ³•çš„ä½œç”¨å°±æ˜¯åœ¨é˜Ÿåˆ—æœ«ç«¯æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœä¼ é€’çš„å‚æ•°æ˜¯nullï¼Œå°±æŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œå¦åˆ™ç”±äºè¯¥é˜Ÿåˆ—æ˜¯æ— ç•Œé˜Ÿåˆ—ï¼Œè¯¥æ–¹æ³•ä¼šä¸€ç›´è¿”å›trueï¼Œè€Œä¸”è¯¥æ–¹æ³•ä½¿ç”¨CASç®—æ³•å®ç°çš„ï¼Œæ‰€ä»¥ä¸ä¼šé˜»å¡çº¿ç¨‹ï¼›&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;41&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt;é˜Ÿåˆ—æœ«ç«¯æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹&lt;/span&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;boolean&lt;/span&gt;&lt;span&gt; offer(E e) {
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å¦‚æœeä¸ºç©ºï¼Œé‚£ä¹ˆæŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸&lt;/span&gt;
&lt;span&gt;    checkNotNull(e);
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å°†ä¼ è¿›æ¥çš„å…ƒç´ å°è£…æˆä¸€ä¸ªèŠ‚ç‚¹ï¼ŒNodeçš„æ„é€ å™¨ä¸­è°ƒç”¨UNSAFE.putObject(this, itemOffset, item)æŠŠeèµ‹å€¼ç»™èŠ‚ç‚¹ä¸­çš„item&lt;/span&gt;
    &lt;span&gt;final&lt;/span&gt; Node&amp;lt;E&amp;gt; newNode = &lt;span&gt;new&lt;/span&gt; Node&amp;lt;E&amp;gt;&lt;span&gt;(e);

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;&lt;strong&gt;[1]
    &lt;/strong&gt;&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è¿™é‡Œçš„forå¾ªç¯ä»æœ€åçš„èŠ‚ç‚¹å¼€å§‹&lt;/span&gt;
    &lt;span&gt;for&lt;/span&gt; (Node&amp;lt;E&amp;gt; t = tail, p =&lt;span&gt; t;;) {
      Node&lt;/span&gt;&amp;lt;E&amp;gt; q =&lt;span&gt; p.next;
      &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;[2]&lt;/strong&gt;&lt;/span&gt;å¦‚æœqä¸ºnullï¼Œè¯´æ˜på°±æ˜¯æœ€åçš„èŠ‚ç‚¹äº†&lt;/span&gt;
        &lt;span&gt;if&lt;/span&gt; (q == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;[3]&lt;/strong&gt;&lt;/span&gt;CASæ›´æ–°ï¼šå¦‚æœpèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ˜¯nullï¼Œå°±æŠŠå†™ä¸ªèŠ‚ç‚¹æ›´æ–°ä¸ºnewNode&lt;/span&gt;
            &lt;span&gt;if&lt;/span&gt; (p.casNext(&lt;span&gt;null&lt;/span&gt;&lt;span&gt;, newNode)) {
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;[4]&lt;/strong&gt;&lt;/span&gt;CASæˆåŠŸï¼Œä½†æ˜¯è¿™æ—¶p==t,æ‰€ä»¥ä¸ä¼šè¿›å…¥åˆ°è¿™é‡Œçš„ifé‡Œé¢ï¼Œç›´æ¥è¿”å›true
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;é‚£ä¹ˆä»€ä¹ˆæ—¶å€™ä¼šèµ°åˆ°è¿™é‡Œé¢æ¥å‘¢ï¼Ÿå…¶å®æ˜¯è¦æœ‰å¦å¤–ä¸€ä¸ªçº¿ç¨‹ä¹Ÿåœ¨è°ƒç”¨offeræ–¹æ³•çš„æ—¶å€™ï¼Œä¼šè¿›å…¥åˆ°è¿™é‡Œé¢æ¥&lt;/span&gt;
                &lt;span&gt;if&lt;/span&gt; (p !=&lt;span&gt; t) 
                    casTail(t, newNode);  
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
            }
        }
        &lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (p == q) &lt;span&gt;//&lt;/span&gt;&lt;span&gt;&lt;strong&gt;[5]&lt;/strong&gt;&lt;/span&gt;
&lt;span&gt;            
            p &lt;/span&gt;= (t != (t = tail)) ?&lt;span&gt; t : head;
        &lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;&lt;strong&gt;[6]&lt;/strong&gt;&lt;/span&gt;
            p = (p != t &amp;amp;&amp;amp; t != (t = tail)) ?&lt;span&gt; t : q;
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ã€€ã€€ä¸Šé¢æ‰§è¡Œåˆ°[3]çš„æ—¶å€™ï¼Œç”±äºå¤´èŠ‚ç‚¹å’Œå°¾èŠ‚ç‚¹é»˜è®¤éƒ½æ˜¯æŒ‡å‘å“¨å…µèŠ‚ç‚¹çš„ï¼Œç”±äºè¿™ä¸ªæ—¶å€™pçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸ºnullï¼Œæ‰€ä»¥å½“å‰çº¿ç¨‹Aæ‰§è¡ŒCASä¼šæˆåŠŸï¼Œä¸‹å›¾æ‰€ç¤ºï¼›&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1368608/202002/1368608-20200207210203472-787903552.png&quot; alt=&quot;&quot; width=&quot;542&quot; height=&quot;164&quot;/&gt;&lt;/p&gt;


&lt;p&gt;ã€€ã€€å¦‚æœæ­¤æ—¶è¿˜æœ‰ä¸€ä¸ªçº¿ç¨‹Bä¹Ÿæ¥å°è¯•[3]ä¸­CASï¼Œç”±äºæ­¤æ—¶pèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸æ˜¯nulläº†ï¼Œäºæ˜¯çº¿ç¨‹Bä¼šè·³åˆ°[1]å‡ºè¿›è¡Œç¬¬äºŒæ¬¡å¾ªç¯ï¼Œç„¶åä¼šåˆ°[6]ä¸­ï¼Œç”±äºpå’Œtæ­¤æ—¶æ˜¯ç›¸ç­‰çš„ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯falseï¼Œå³p=qï¼Œä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1368608/202002/1368608-20200207204817101-80550711.png&quot; alt=&quot;&quot; width=&quot;322&quot; height=&quot;160&quot;/&gt;&lt;/p&gt;


&lt;p&gt;ã€€ã€€ç„¶åçº¿ç¨‹Båˆä¼šè·³åˆ°[1]å¤„è¿›è¡Œç¬¬ä¸‰æ¬¡å¾ªç¯ï¼Œç”±äºæ‰§è¡Œäº†Node&amp;lt;E&amp;gt; q = p.nextï¼Œæ‰€ä»¥æ­¤æ—¶qæŒ‡å‘æœ€åçš„nullï¼Œå°±åˆ°äº†[3]å¤„è¿›è¡ŒCASï¼Œè¿™æ¬¡æ˜¯å¯ä»¥æˆåŠŸçš„ï¼ŒæˆåŠŸä¹‹åå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;Â &lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1368608/202002/1368608-20200207205408211-1638673804.png&quot; alt=&quot;&quot; width=&quot;451&quot; height=&quot;168&quot;/&gt;&lt;/p&gt;


&lt;p&gt;ã€€ã€€è¿™ä¸ªæ—¶å€™å› ä¸ºpï¼=tï¼Œæ‰€ä»¥å¯ä»¥è¿›å…¥åˆ°[4]ï¼Œè¿™é‡Œåˆä¼šè¿›è¡Œä¸€ä¸ªCASï¼šå¦‚æœtailå’ŒtæŒ‡å‘çš„èŠ‚ç‚¹ä¸€æ ·ï¼Œé‚£ä¹ˆå°±å°†tailæŒ‡å‘æ–°æ·»åŠ çš„èŠ‚ç‚¹ï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œè¿™ä¸ªæ—¶å€™çº¿ç¨‹Bä¹Ÿå°±æ‰§è¡Œå®Œäº†ï¼›&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1368608/202002/1368608-20200207205903878-1551556016.png&quot; alt=&quot;&quot; width=&quot;415&quot; height=&quot;152&quot;/&gt;&lt;/p&gt;


&lt;p&gt;ã€€ã€€å…¶å®è¿˜æœ‰[5]æ²¡æœ‰èµ°åˆ°ï¼Œè¿™ä¸ªæ˜¯åœ¨pollæ“ä½œä¹‹åæ‰æ‰§è¡Œçš„ï¼Œæˆ‘ä»¬å…ˆè·³è¿‡ï¼Œç­‰è¯´å®Œpollæ–¹æ³•ä¹‹åå†å›å¤´çœ‹çœ‹ï¼›å¦å¤–è¯´ä¸€ä¸‹ï¼Œaddæ–¹æ³•å…¶å®å°±æ˜¯è°ƒç”¨çš„æ˜¯offeræ–¹æ³•ï¼Œå°±ä¸å¤šè¯´äº†ï¼›&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1368608/202002/1368608-20200207210544380-2115760831.png&quot; alt=&quot;&quot; width=&quot;241&quot; height=&quot;71&quot;/&gt;&lt;/p&gt;


&lt;p&gt;&lt;span&gt;&lt;strong&gt;ä¸‰.pollæ–¹æ³•&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€è¿™ä¸ªæ–¹æ³•æ˜¯è·å–å¤´éƒ¨çš„è¿™ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœé˜Ÿåˆ—ä¸ºç©ºåˆ™è¿”å›nullï¼›&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;42&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt;&lt;span&gt; E poll() {
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;è¿™é‡Œå…¶å®å°±æ˜¯ä¸€ä¸ªgotoçš„æ ‡è®°ï¼Œç”¨äºè·³å‡ºforå¾ªç¯&lt;/span&gt;
&lt;span&gt;    restartFromHead:
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;&lt;strong&gt;[1]&lt;/strong&gt;&lt;/span&gt;
    &lt;span&gt;for&lt;/span&gt;&lt;span&gt; (;;) {
        &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; (Node&amp;lt;E&amp;gt; h = head, p =&lt;span&gt; h, q;;) {
            E item &lt;/span&gt;=&lt;span&gt; p.item;
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;[2]&lt;/strong&gt;&lt;/span&gt;å¦‚æœå½“å‰èŠ‚ç‚¹ä¸­å­˜çš„å€¼ä¸ä¸ºç©ºï¼Œåˆ™CASè®¾ç½®ä¸ºnull&lt;/span&gt;
            &lt;span&gt;if&lt;/span&gt; (item != &lt;span&gt;null&lt;/span&gt; &amp;amp;&amp;amp; p.casItem(item, &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)) {
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;[3]&lt;/strong&gt;&lt;/span&gt;CASæˆåŠŸå°±æ›´æ–°å¤´èŠ‚ç‚¹çš„ä½ç½®&lt;/span&gt;
                &lt;span&gt;if&lt;/span&gt; (p !=&lt;span&gt; h) 
                    updateHead(h, ((q &lt;/span&gt;= p.next) != &lt;span&gt;null&lt;/span&gt;) ?&lt;span&gt; q : p);
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; item;
            }
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;[4]&lt;/strong&gt;&lt;/span&gt;å½“å‰é˜Ÿåˆ—ä¸ºç©ºï¼Œå°±è¿”å›null&lt;/span&gt;
            &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; ((q = p.next) == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                updateHead(h, p);
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
            }
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;[5]&lt;/strong&gt;&lt;/span&gt;å½“å‰èŠ‚ç‚¹å’Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸€æ ·ï¼Œè¯´æ˜èŠ‚ç‚¹è‡ªå¼•ç”¨ï¼Œåˆ™é‡æ–°æ‰¾å¤´èŠ‚ç‚¹&lt;/span&gt;
            &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (p ==&lt;span&gt; q)
                &lt;/span&gt;&lt;span&gt;continue&lt;/span&gt;&lt;span&gt; restartFromHead;
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;&lt;strong&gt;[6]&lt;/strong&gt;&lt;/span&gt;
            &lt;span&gt;else&lt;/span&gt;&lt;span&gt;
                p &lt;/span&gt;=&lt;span&gt; q;
        }
    }
}

&lt;/span&gt;&lt;span&gt;final&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; updateHead(Node&amp;lt;E&amp;gt; h, Node&amp;lt;E&amp;gt;&lt;span&gt; p) {
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (h != p &amp;amp;&amp;amp;&lt;span&gt; casHead(h, p))
        h.lazySetNext(h);
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;ã€€ã€€åˆ†ä¸ºå‡ ç§æƒ…å†µï¼Œç¬¬ä¸€ç§æƒ…å†µæ˜¯çº¿ç¨‹Aè°ƒç”¨pollæ–¹æ³•çš„æ—¶å€™ï¼Œå‘ç°é˜Ÿåˆ—æ˜¯ç©ºçš„ï¼Œå³å¤´èŠ‚ç‚¹å’Œå°¾èŠ‚ç‚¹éƒ½æŒ‡å‘å“¨å…µèŠ‚ç‚¹ï¼Œå°±ä¼šç›´æ¥åˆ°[4]ï¼Œè¿”å›null&lt;/p&gt;
&lt;p&gt;ã€€ã€€ç¬¬äºŒç§æƒ…å†µï¼Œçº¿ç¨‹Aæ‰§è¡Œåˆ°äº†[4]ï¼Œæ­¤æ—¶æœ‰ä¸€ä¸ªçº¿ç¨‹å´è°ƒç”¨offeræ–¹æ³•æ·»åŠ äº†ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸‹å›¾æ‰€ç¤ºï¼Œé‚£ä¹ˆæ­¤æ—¶çº¿ç¨‹Aå°±ä¸ä¼šèµ°[4]äº†ï¼Œ[5]ä¹Ÿä¸æ»¡è¶³ï¼Œäºæ˜¯ä¼šåˆ°[6]è¿™é‡Œæ¥ï¼Œç„¶åçº¿ç¨‹Aåˆä¼šè·³åˆ°[1]å¤„è¿›è¡Œå¾ªç¯ï¼Œæ­¤æ—¶pæŒ‡å‘çš„èŠ‚ç‚¹ä¸­itemä¸ä¸ºnullï¼Œæ‰€ä»¥ä¼šåˆ°[2]ä¸­ï¼›&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1368608/202002/1368608-20200207215314867-1643520705.png&quot; alt=&quot;&quot; width=&quot;719&quot; height=&quot;177&quot;/&gt;&lt;/p&gt;


&lt;p&gt;ã€€ã€€åˆ°äº†[2]ä¸­å°†pæŒ‡å‘çš„èŠ‚ç‚¹ä¸­itemç”¨CASè®¾ç½®ä¸ºnullï¼Œç„¶åå°±åˆ°äº†[3],ä¸‹é¢ç¬¬ä¸€ä¸ªå›¾ï¼Œç”±äºpï¼=hï¼Œq=nullï¼Œæ‰€ä»¥æœ€åè°ƒç”¨çš„æ˜¯updateHead(h,p)ï¼Œè¿™æ–¹æ³•ï¼šå¦‚æœå¤´èŠ‚ç‚¹å’ŒhæŒ‡å‘çš„æ˜¯ä¸€æ ·çš„ï¼Œå°±å°†å¤´èŠ‚ç‚¹æŒ‡å‘pï¼Œæˆ‘ä»¬è¿˜èƒ½çœ‹åˆ°updateHeadæ–¹æ³•ä¸­h.lazySetNext(h)è¡¨ç¤ºhçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘è‡ªå·±ï¼Œä¸‹é¢å›¾äºŒ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1368608/202002/1368608-20200207220300636-2132734633.png&quot; alt=&quot;&quot; width=&quot;767&quot; height=&quot;207&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â ã€€ã€€åˆ°äº†è¿™é‡Œè¿˜æ²¡å®Œï¼Œè¿˜è®°ä¸è®°å¾—offeræ–¹æ³•ä¸­æœ‰ä¸€ä¸ªåœ°æ–¹çš„ä»£ç æ²¡æœ‰æ‰§è¡Œçš„å•Šï¼å°±æ˜¯è¿™ç§æƒ…å†µï¼Œå°¾èŠ‚ç‚¹è‡ªå·±å¼•ç”¨è‡ªå·±ï¼Œæˆ‘ä»¬å†è°ƒç”¨offerä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ã€€ã€€&lt;span&gt;&lt;strong&gt;å›åˆ°offeræ–¹æ³•&lt;/strong&gt;&lt;/span&gt;ï¼Œå…ˆä¼šåˆ°[1]ï¼Œç„¶åqæŒ‡å‘è‡ªå·±è¿™ä¸ªå“¨å…µèŠ‚ç‚¹ï¼ˆæ³¨æ„ï¼Œæ­¤æ—¶è™½ç„¶pæŒ‡å‘çš„èŠ‚ç‚¹ä¸­å­˜çš„æ˜¯nullï¼Œä½†æ˜¯pï¼=null}ï¼Œäºæ˜¯å†åˆ°[5]ï¼Œæ­¤æ—¶çš„å›¾å¦‚ä¸‹å·¦å›¾æ‰€ç¤ºï¼›æ­¤æ—¶ç”±äºt==tailï¼Œæ‰€ä»¥p=headï¼›&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1368608/202002/1368608-20200207222122216-1037025903.png&quot; alt=&quot;&quot; width=&quot;710&quot; height=&quot;167&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Â ã€€ã€€å†åœ¨offeræ–¹æ³•å¾ªç¯ä¸€æ¬¡ï¼Œæ­¤æ—¶qæŒ‡å‘nullï¼Œä¸‹é¢å·¦å›¾æ‰€ç¤ºï¼Œç„¶åå°±å¯ä»¥è¿›å…¥[2]ä¸­è¿›è¡ŒCASï¼ŒCASæˆåŠŸï¼Œå› ä¸ºæ­¤æ—¶pï¼=tï¼Œæ‰€ä»¥è¿˜è¦è¿›è¡ŒCASå°†tailæŒ‡å‘æ–°èŠ‚ç‚¹ï¼Œä¸‹é¢å³å›¾æ‰€ç¤ºï¼Œå¯ä»¥è®©GCå›æ”¶é‚£ä¸ªåƒåœ¾ï¼&lt;/p&gt;
&lt;p&gt;å¦ˆè€¶ï¼Œè¿™é‡Œæ¯”è¾ƒç»•ï¼å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ&lt;/p&gt;
&lt;p&gt;Â &lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1368608/202002/1368608-20200207222818601-1821991280.png&quot; alt=&quot;&quot; width=&quot;773&quot; height=&quot;165&quot;/&gt;&lt;/p&gt;


&lt;p&gt;&lt;span&gt;&lt;strong&gt;å››.peekæ–¹æ³•&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€è¿™ä¸ªæ–¹æ³•çš„ä½œç”¨å°±æ˜¯è·å–é˜Ÿåˆ—å¤´éƒ¨çš„å…ƒç´ ï¼Œ&lt;span&gt;&lt;strong&gt;åªè·å–ä¸ç§»é™¤&lt;/strong&gt;&lt;/span&gt;ï¼Œæ³¨æ„è¿™ä¸ªæ–¹æ³•å’Œä¸Šé¢çš„pollæ–¹æ³•çš„åŒºåˆ«å•Šï¼&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;42&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt;&lt;span&gt; E peek() {
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;[1]gotoæ ‡å¿—&lt;/span&gt;
&lt;span&gt;    restartFromHead:
    &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; (;;) {
        &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; (Node&amp;lt;E&amp;gt; h = head, p =&lt;span&gt; h, q;;) {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;[2]&lt;/span&gt;
            E item =&lt;span&gt; p.item;
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;[3]&lt;/span&gt;
            &lt;span&gt;if&lt;/span&gt; (item != &lt;span&gt;null&lt;/span&gt; || (q = p.next) == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                updateHead(h, p);
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; item;
            }
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;[4]&lt;/span&gt;
            &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (p ==&lt;span&gt; q)
                &lt;/span&gt;&lt;span&gt;continue&lt;/span&gt;&lt;span&gt; restartFromHead;
            &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;[5]&lt;/span&gt;
                p =&lt;span&gt; q;
        }
    }
}&lt;br/&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;Â  final void updateHead(Node&amp;lt;E&amp;gt; h, Node&amp;lt;E&amp;gt; p) {&lt;br/&gt;ã€€ã€€Â  if (h != p &amp;amp;&amp;amp; casHead(h, p))&lt;br/&gt;ã€€ã€€Â  Â  Â  h.lazySetNext(h);&lt;br/&gt;Â  }&lt;/p&gt;
&lt;pre&gt;
&lt;span&gt; &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ã€€ã€€å¦‚æœé˜Ÿåˆ—ä¸­ä¸ºç©ºçš„æ—¶å€™ï¼Œèµ°åˆ°[3]çš„æ—¶å€™ï¼Œå°±ä¼šå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç”±äºh==p,æ‰€ä»¥updateHeadæ–¹æ³•å•¥ä¹Ÿä¸åšï¼Œç„¶åè¿”å›å°±è¿”å›itemä¸ºnull&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1368608/202002/1368608-20200207224456425-242673091.png&quot; alt=&quot;&quot; width=&quot;269&quot; height=&quot;172&quot;/&gt;&lt;/p&gt;


&lt;p&gt;ã€€ã€€å¦‚æœé˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œé‚£ä¹ˆå¦‚ä¸‹å·¦å›¾æ‰€ç¤ºï¼Œæ­¤æ—¶è¿›å…¥å¾ªç¯å†…ä¸æ»¡è¶³æ¡ä»¶ï¼Œä¼šåˆ°[5]è¿™é‡Œï¼Œå°†pæŒ‡å‘qï¼Œç„¶åå†è¿›è¡Œä¸€æ¬¡å¾ªç¯åˆ°[3]ï¼Œå°†qæŒ‡å‘pçš„åä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸‹é¢å³å›¾æ‰€ç¤ºï¼›&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1368608/202002/1368608-20200207225535132-1587909088.png&quot; alt=&quot;&quot; width=&quot;592&quot; height=&quot;141&quot;/&gt;&lt;/p&gt;


&lt;p&gt;ã€€ã€€ç„¶åè°ƒç”¨updateHeadæ–¹æ³•ï¼Œç”¨CASå°†å¤´èŠ‚ç‚¹æŒ‡å‘pè¿™é‡Œï¼Œç„¶åå°†hè‡ªå·±æŒ‡å‘è‡ªå·±ï¼Œä¸‹å›¾æ‰€ç¤ºï¼Œæœ€åè¿”å›item&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1368608/202002/1368608-20200207225845495-1427763903.png&quot; alt=&quot;&quot; width=&quot;363&quot; height=&quot;183&quot;/&gt;&lt;/p&gt;


&lt;p&gt;&lt;span&gt;&lt;strong&gt;äº”.æ€»ç»“&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€å…¶å®è¿˜æœ‰å‡ ä¸ªæ–¹æ³•æ²¡è¯´ï¼Œä½†æ˜¯æ„Ÿè§‰æ¯”è¾ƒå®¹æ˜“å°±ä¸æµªè´¹ç¯‡å¹…äº†ï¼Œæœ‰å…´è¶£çš„å¯ä»¥çœ‹çœ‹ï¼šsizeæ–¹æ³•ç”¨äºè®¡ç®—é˜Ÿåˆ—ä¸­èŠ‚ç‚¹çš„æ•°é‡ï¼Œå¯æ˜¯ç”±äºæ²¡æœ‰åŠ é”ï¼Œåœ¨å¹¶å‘çš„æ¡ä»¶ä¸‹ä¸å‡†ç¡®ï¼›removeæ–¹æ³•åˆ é™¤æŸä¸ªèŠ‚ç‚¹ï¼Œå…¶å®å°±æ˜¯éå†ç„¶åç”¨equalsæ–¹æ³•æ¯”è¾ƒitemæ˜¯ä¸æ˜¯ä¸€æ ·ï¼Œåªä¸è¿‡å¦‚æœå­˜åœ¨å¤šä¸ªç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹åªåˆ é™¤ç¬¬ä¸€ä¸ªï¼Œç„¶åè¿”å›trueï¼Œå¦åˆ™è¿”å›falseï¼›containsæ–¹æ³•åˆ¤æ–­é˜Ÿåˆ—ä¸­æ˜¯å¦åŒ…å«æŒ‡å®šitemçš„èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯éå†ï¼Œå¾ˆå®¹æ˜“ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€æœ€éº»çƒ¦çš„å°±æ˜¯offeræ–¹æ³•å’Œpollæ–¹æ³•ï¼Œofferæ–¹æ³•æ˜¯åœ¨é˜Ÿåˆ—çš„æœ€åé¢æ·»åŠ èŠ‚ç‚¹ï¼Œè€Œpollæ˜¯è·å–å¤´èŠ‚ç‚¹ï¼Œå¹¶ä¸”åˆ é™¤ç¬¬ä¸€ä¸ªçœŸæ­£çš„é˜Ÿåˆ—èŠ‚ç‚¹(æ³¨æ„ï¼ŒèŠ‚ç‚¹åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯å“¨å…µèŠ‚ç‚¹ï¼Œä¸€ç§æ˜¯çœŸæ­£çš„å­˜äº†æ•°æ®çš„èŠ‚ç‚¹å•Š)ï¼Œè¿˜ç®€å•çš„è¯´äº†ä¸€ä¸‹pollæ–¹æ³•å’Œpeekæ–¹æ³•çš„åŒºåˆ«ï¼Œåè€…åªæ˜¯è·å–ï¼Œè€Œä¸åˆ é™¤å•Šï¼ç”¨ä¸‹é¢è¿™ä¸ªå›¾å¸®åŠ©è®°å¿†ä¸€ä¸‹ï¼›&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1368608/202002/1368608-20200207231202417-1875891540.png&quot; alt=&quot;&quot; width=&quot;548&quot; height=&quot;190&quot;/&gt;&lt;/p&gt;

</description>
<pubDate>Fri, 07 Feb 2020 15:16:00 +0000</pubDate>
<dc:creator>javaå°æ–°äºº</dc:creator>
<og:description>æœ¬æ¥æƒ³ç€ç›´æ¥è¯´çº¿ç¨‹æ± çš„ï¼Œä¸è¿‡åœ¨è¯´çº¿ç¨‹æ± ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»è¦çŸ¥é“å¹¶å‘å®‰å…¨é˜Ÿåˆ—ï¼›å› ä¸ºä¸€èˆ¬æƒ…å†µä¸‹çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡æ˜¯ä¸€å®šçš„ï¼Œè‚¯å®šä¸ä¼šè¶…è¿‡æŸä¸ªé˜ˆå€¼ï¼Œé‚£ä¹ˆå½“ä»»åŠ¡å¤ªå¤šäº†çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¿…é¡»æŠŠå¤šä½™çš„ä»»åŠ¡ä¿å­˜åˆ°å¹¶å‘å®‰å…¨é˜Ÿåˆ—ä¸­</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/wyq1995/p/12271664.html</dc:identifier>
</item>
<item>
<title>.Net Coreåˆè¯†ä»¥åŠå¯åŠ¨é…ç½® - å°æ™ºOwner</title>
<link>http://www.cnblogs.com/sagecheng/p/12274959.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/sagecheng/p/12274959.html</guid>
<description>&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;è¿™æ®µæ—¶é—´ï¼Œä¼šé™†ç»­æŠŠå»å¹´ä¸€å¹´åœ¨å…¬å¸åšçš„ç›¸å…³åŸ¹è®­ï¼Œæ•´ç†æˆåšå®¢åˆ†äº«ç»™å¤§å®¶ï¼Œåœ¨å›¢é˜Ÿå†…éƒ¨å·²ç»æŠŠå¤§éƒ¨åˆ†çš„.neté¡¹ç›®å®¹å™¨åŒ–å¹¶éƒ¨ç½²åˆ°k8s,ä¸­é—´ä¹Ÿè¸©äº†å¾ˆå¤šå‘ï¼Œä¹Ÿä¼šæŠŠç›¸å…³é—®é¢˜æ•´ç†å¤„ç†ï¼Œå¤§å®¶ä¸€èµ·å­¦ä¹ äº¤æµï¼Œå“ˆã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul readability=&quot;2.4497487437186&quot;&gt;&lt;li readability=&quot;5.6842105263158&quot;&gt;
&lt;p&gt;.Net Core æ˜¯.Netçš„æœªæ¥ï¼Œå¾®è½¯åœ¨19å¹´ 5æœˆå·²ç»æ˜ç¡®è¯´æ˜ï¼Œæœªæ¥åªæœ‰.Net 5(=.NET Core vNext),.Net 5æ˜¯.net coreçš„ä¸‹ä¸€ä¸ªç‰ˆæœ¬ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥å¼€å‘&lt;code&gt;Windows&lt;/code&gt;,&lt;code&gt;Linux&lt;/code&gt;,&lt;code&gt;MacOs&lt;/code&gt;,&lt;code&gt;IOS&lt;/code&gt;,&lt;code&gt;Android&lt;/code&gt;ç­‰ç­‰åº”ç”¨ã€‚&lt;br/&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/sagecheng/1264371/o_200203124330Net5.png&quot; alt=&quot;avatar&quot;/&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://devblogs.microsoft.com/dotnet/introducing-net-5/&quot;&gt;å›¾ç‰‡æ¥æº&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;åœ¨å®¹å™¨ã€k8sã€Devopsã€å¾®æœåŠ¡ç­‰æŠ€æœ¯çš„æ¨åŠ¨ä¸‹ï¼Œ2020å¹´äº‘åŸç”Ÿå°†åŠ¿ä¸å¯æŒ¡ï¼Œ.net Corè€Œè®¾è®¡ä¹‹åˆå°±äº†é€‚é…äº‘åŸç”Ÿï¼Œå®ƒæœ‰å¾ˆå¤šä¼˜ç‚¹ï¼Œéƒ½è¯´æ˜å®ƒæ˜¯äº‘åŸç”Ÿæ—¶ä»£ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚&lt;/li&gt;
&lt;li&gt;å®ƒä½“ç§¯æ›´å°ï¼Œå¯åŠ¨é€Ÿåº¦æ›´å¿«ã€å ç”¨èµ„æºæ›´å°‘ã€æ”¯æŒæ°´å¹³æ‰©å±•&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;è€ƒè™‘è‡ªå·±çš„èŒä¸šå‘å±•ï¼Œ.net coreä¹Ÿæ˜¯å¿…é¡»éœ€è¦ç†Ÿæ‚‰çš„&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;&lt;li&gt;å¼€æºé€šç”¨çš„å¼€å‘æ¡†æ¶ &lt;a href=&quot;https://github.com/dotnet/core&quot;&gt;githubåœ°å€&lt;/a&gt;ï¼Œå¾®è½¯å’Œç¤¾åŒºå…±åŒç»´æŠ¤&lt;/li&gt;
&lt;li&gt;.net core æ¨¡å—åŒ–ç®¡ç†ï¼ŒæŒ‰éœ€å¼•ç”¨å¯¹åº”ç»„ä»¶&lt;/li&gt;
&lt;li&gt;æ”¯æŒè·¨å¹³å°ã€è·¨æ¶æ„å¼€å‘ï¼Œéƒ¨ç½²çµæ´»&lt;/li&gt;
&lt;li&gt;å…¼å®¹æ€§å¼º&lt;/li&gt;
&lt;li&gt;æ”¯æŒå‘½ä»¤è¡Œ&lt;br/&gt;&lt;/li&gt;
&lt;li&gt;åŒ…å«äº†&lt;code&gt;.Net Framework&lt;/code&gt;çš„ç±»åº“ ï¼ˆ3.0ç‰ˆæœ¬ä¹‹å‰å¾ˆå¤šéƒ½æ˜¯ä».Net Frameworkç±»åº“ç§»æ¤çš„ï¼Œç°åœ¨å·²ç»ä¸å†ç§»æ¤è€çš„ä»£ç  ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote readability=&quot;4.3181818181818&quot;&gt;
&lt;p&gt;æ¨èä¸€ç¯‡è®²çš„å¾ˆå¥½çš„æ–‡ç« ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†&lt;a href=&quot;https://www.cnblogs.com/vipyoumay/p/5603928.html&quot;&gt;ä¼ é€é—¨&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;&lt;li&gt;åŒçˆ¶å¼‚æ¯çš„å…„å¼Ÿå…³ç³»&lt;/li&gt;
&lt;li&gt;.Net coreå¯ä»¥è®¤ä¸ºæ˜¯.net Frameworkçš„ä¸‹ä¸€ä»£äº§å“ï¼Œåˆ°2020åéƒ½ç»Ÿä¸€ä¸º.Net 5&lt;br/&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/sagecheng/900243/o_200203124537schedule.png&quot; alt=&quot;.Net Schedule&quot;/&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;&lt;li&gt;.net core 3.1 2019å¹´12æœˆæ­£å¼å‘å¸ƒ LTS å¯ä»¥å•†ç”¨&lt;/li&gt;
&lt;li&gt;å…¼å®¹winformå’ŒWPFï¼Œè¿™éƒ¨åˆ†ç›®å‰ä¸è·¨å¹³å°ã€&lt;/li&gt;
&lt;li&gt;ä½“ç§¯æ›´å°ï¼Œå¯åŠ¨é€Ÿåº¦æ›´å¿«ï¼Œå ç”¨èµ„æºæ›´å°‘ï¼Œæ”¯æŒæ°´å¹³æ‰©å±•,æ›´å¥½é€‚é…äº‘åŸç”Ÿå’Œå¾®æœåŠ¡&lt;/li&gt;
&lt;li&gt;Blazor&lt;/li&gt;
&lt;li&gt;GRPC&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;asp.net-core-webåº”ç”¨å¯åŠ¨è¿‡ç¨‹&quot;&gt;ASP.NET Core Webåº”ç”¨å¯åŠ¨è¿‡ç¨‹&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/sagecheng/1264371/o_200203134627startup.png&quot; alt=&quot;å¯åŠ¨è¿‡ç¨‹&quot;/&gt;&lt;/p&gt;
&lt;p&gt;é€šè¿‡ä¸Šå›¾å¤§æ¦‚å¯ä»¥æŠŠå¯åŠ¨è¿‡ç¨‹æ€»ç»“ä¸ºï¼š&lt;/p&gt;
&lt;p&gt;åˆ›å»ºä¸»æœºç”Ÿæˆå™¨-é…ç½®ä¸»æœº-&amp;gt;åˆ›å»ºä¸»æœº-&amp;gt;è¿è¡Œä¸»æœº&lt;/p&gt;
&lt;h2 id=&quot;asp.net-core-webåº”ç”¨&quot;&gt;ASP.NET Core Webåº”ç”¨&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/sagecheng/1264371/o_200206034821NetApplication.png&quot; alt=&quot;applicarion&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;ä¸»æœºhost&quot;&gt;ä¸»æœºï¼ˆHostï¼‰&lt;/h2&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;ä¸»æœºä¸»è¦è´Ÿè´£åº”ç”¨ç¨‹åºçš„å¯åŠ¨å’Œç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†ï¼Œé…ç½®æœåŠ¡å™¨å’Œè¯·æ±‚å¤„ç†ç®¡é“ï¼Œå®è´¨æ˜¯ä¸€ä¸ªå°è£…äº†åº”ç”¨èµ„æºçš„&lt;code&gt;object&lt;/code&gt;&lt;br/&gt;é…ç½®æ—¥å¿—ã€ä¾èµ–æœåŠ¡çš„æ³¨å…¥&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;.Net core ä¸­çš„ä¸»æœºåˆ†ä¸º&lt;a href=&quot;https://docs.microsoft.com/zh-cn/aspnet/core/fundamentals/host/generic-host?view=aspnetcore-3.1&quot;&gt;æ³›å‹ä¸»æœº&lt;/a&gt;å’Œ &lt;a href=&quot;https://docs.microsoft.com/zh-cn/aspnet/core/fundamentals/host/web-host?view=aspnetcore-3.1&quot;&gt;webä¸»æœº&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;kestrel-ä»‹ç»&quot;&gt;Kestrel ä»‹ç»&lt;/h2&gt;
&lt;p&gt;Kestrel æ˜¯ ASP.NET Core é¡¹ç›®æ¨¡æ¿æŒ‡å®šçš„é»˜è®¤ Web æœåŠ¡å™¨ã€‚æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„é«˜æ€§èƒ½çš„WEBæœåŠ¡å™¨ï¼Œè§’è‰²å®šä½ç±»ä¼¼äºIISï¼Œä½†ä¸æ˜¯IISï¼Œå®ƒåœ¨linuxä¸‹æ€§èƒ½æ›´å¼ºï¼Œç›¸æ¯”äºIISå®ƒåŠŸèƒ½ç›¸å¯¹è¾ƒå°‘ï¼Œä¸æ”¯æŒåå‘ä»£ç†ã€‚&lt;br/&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/sagecheng/1264371/o_200203131821kestrel.png&quot; alt=&quot;Kestrel&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;å¯åŠ¨é…ç½®&quot;&gt;å¯åŠ¨é…ç½®&lt;/h2&gt;
&lt;p&gt;è¿™é‡Œè¯´çš„é…ç½®ï¼Œä¸»è¦åˆ†ä¸ºä¸¤ç§ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä¸»æœºé…ç½®&lt;/li&gt;
&lt;li&gt;æœåŠ¡é…ç½®ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä¸‹é¢æˆ‘ä»¬ä»¥å®é™…ä»£ç æ¥çœ‹ä¸‹ï¼Œæ€ä¹ˆæ–°å¢å’Œä¿®æ”¹é»˜è®¤çš„å¯åŠ¨é…ç½®&lt;/p&gt;
&lt;pre class=&quot;c#&quot;&gt;
&lt;code&gt;public class Program
{
    public static void Main(string[] args)
    {
        CreateHostBuilder(args).Build().Run();
    }

    public static IHostBuilder CreateHostBuilder(string[] args) =&amp;gt;
        Host.CreateDefaultBuilder(args)
            .ConfigureWebHostDefaults(webBuilder =&amp;gt;
            {
                webBuilder.UseStartup&amp;lt;Startup&amp;gt;();
            });
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™ä¸ªæ˜¯æˆ‘ä»¬é€šè¿‡vsç”Ÿæˆçš„ä¸€ä¸ªæœ€ç®€å•çš„.net core 3.1ç©ºçš„æ¨¡æ¿é¡¹ç›®ã€‚&lt;code&gt;Host.CreateDefaultBuilder()&lt;/code&gt;è¿™ä¸ªæ–¹æ³•é»˜è®¤ä¼š&lt;code&gt;åŠ è½½å‘½ä»¤è¡Œå‚æ•°&lt;/code&gt;, &lt;code&gt;åŠ è½½é…ç½®&lt;/code&gt; &lt;code&gt;åº”ç”¨é…ç½®ï¼ˆappsettings.jsonï¼‰``åŠ è½½ç¯å¢ƒå˜é‡&lt;/code&gt;,&lt;code&gt;åŠ è½½æ—¥å¿—ç»„ä»¶&lt;/code&gt;ç­‰é»˜è®¤é…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;çœ‹åˆ°è¿™äº›å¤§å®¶å¯èƒ½ä¼šç–‘é—®ï¼Œå¦‚æœç¯å¢ƒé…å‹ã€åº”ç”¨é…ç½®ã€å‘½ä»¤è¡Œä¸­æœ‰ç›¸åŒçš„é…ç½®ï¼Œåº”ç”¨ä¼šä»¥é‚£ä¸ªé…ç½®çš„ä¼˜å…ˆçº§ç”Ÿæ•ˆå‘¢ï¼Œä¸‹é¢æˆ‘ä»¬ä»¥æœ€ç®€å•å¯åŠ¨urlså‚æ•°ä¸ºä¾‹ï¼ŒéªŒè¯ä¸‹ï¼Œè¿™äº›é…ç½®çš„ä¼˜å…ˆçº§ã€‚&lt;/p&gt;
&lt;h3 id=&quot;urls-é…ç½®&quot;&gt;urls é…ç½®&lt;/h3&gt;
&lt;p&gt;.net core ä¸­æä¾›äº†ä¸‰ç§è®¾ç½®urlsçš„æ–¹æ³•&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ç¯å¢ƒå˜é‡, åœ¨ &lt;code&gt;launchSettings.json&lt;/code&gt;çš„ &lt;code&gt;environmentVariables&lt;/code&gt;å¢åŠ &lt;code&gt;ASPNETCORE_URLS&lt;/code&gt;æ¥è®¾ç½®urls&lt;/li&gt;
&lt;/ul&gt;&lt;pre class=&quot;json&quot;&gt;
&lt;code&gt;{
  &quot;profiles&quot;: {
    &quot;CoreStudyLesson1&quot;: {
      &quot;commandName&quot;: &quot;Project&quot;,
      &quot;launchBrowser&quot;: true,
      &quot;environmentVariables&quot;: {
        &quot;ASPNETCORE_ENVIRONMENT&quot;: &quot;Development&quot;,
        &quot;ASPNETCORE_URLS&quot;: &quot;http://*:7000&quot;
      },
      &quot;applicationUrl&quot;: &quot;http://localhost:5000&quot;
    }
  }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿è¡Œæ•ˆæœ&lt;br/&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/sagecheng/1264371/o_200207140309dotnet_run_3.png&quot; alt=&quot;dotnet_run_3&quot;/&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;&lt;li&gt;åº”ç”¨é…ç½®ã€‚ä¿®æ”¹&lt;code&gt;appsettings.json&lt;/code&gt;,å¢åŠ &lt;code&gt;urls&lt;/code&gt;èŠ‚ç‚¹&lt;/li&gt;
&lt;/ul&gt;&lt;pre class=&quot;json&quot;&gt;
&lt;code&gt;{
  &quot;Logging&quot;: {
    &quot;LogLevel&quot;: {
      &quot;Default&quot;: &quot;Information&quot;,
      &quot;Microsoft&quot;: &quot;Warning&quot;,
      &quot;Microsoft.Hosting.Lifetime&quot;: &quot;Information&quot;
    }
  },
  &quot;AllowedHosts&quot;: &quot;*&quot;,
  &quot;urls&quot;:&quot;http://*:8000&quot;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿è¡Œæ•ˆæœ&lt;br/&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/sagecheng/1264371/o_200207140320dotnet_run_4.png&quot; alt=&quot;dotnet_run_4&quot;/&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;&lt;li&gt;å‘½ä»¤è¡Œå¯åŠ¨ï¼Œ ä½¿ç”¨ &lt;code&gt;--urls&lt;/code&gt; å‚æ•°æŒ‡å®šurl&lt;/li&gt;
&lt;/ul&gt;&lt;pre class=&quot;cmd&quot;&gt;
&lt;code&gt;dotnet run --urls https://*:9000&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿è¡Œæ•ˆæœ&lt;br/&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/sagecheng/1264371/o_200207140257dotnet_run_2.png&quot; alt=&quot;dotnet_run_2&quot;/&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;&lt;li&gt;ä»£ç æŒ‡å®š&lt;/li&gt;
&lt;/ul&gt;&lt;pre class=&quot;c#&quot;&gt;
&lt;code&gt;
public class Program
{
    public static void Main(string[] args)
    {
        CreateHostBuilder(args).Build().Run();
    }

    public static IHostBuilder CreateHostBuilder(string[] args) =&amp;gt;
        Host.CreateDefaultBuilder(args)
            .ConfigureWebHostDefaults(webBuilder =&amp;gt;
            {
                webBuilder.UseStartup&amp;lt;Startup&amp;gt;();
                // è®¾ç½®ç›‘å¬Url å‘½ä»¤è¡Œ  ç¡¬ç¼–ç  åº”ç”¨é…ç½® ç¯å¢ƒå˜é‡  
                webBuilder.UseUrls(&quot;http://*:6001&quot;);
            });
}&lt;/code&gt;
&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿è¡Œæ•ˆæœ&lt;br/&gt;&lt;img src=&quot;https://images.cnblogs.com/cnblogs_com/sagecheng/1264371/o_200207142150dotnet_run_5.png&quot; alt=&quot;dotnet_run_5&quot;/&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å…·ä½“ä¼˜å…ˆçº§æ˜¯&lt;/p&gt;
&lt;p&gt;å‘½ä»¤è¡Œ &amp;gt;åº”ç”¨é…ç½®&amp;gt;ç¡¬ç¼–ç &amp;gt;ç¯å¢ƒå˜é‡&lt;/p&gt;
&lt;h3 id=&quot;ç»„ä»¶é…ç½®-kestrelé…ç½®&quot;&gt;ç»„ä»¶é…ç½®-Kestrelé…ç½®&lt;/h3&gt;
&lt;pre class=&quot;c#&quot;&gt;
&lt;code&gt;public class Program
{
    public static void Main(string[] args)
    {
        CreateHostBuilder(args).Build().Run();
    }

    public static IHostBuilder CreateHostBuilder(string[] args) =&amp;gt;
        Host.CreateDefaultBuilder(args)
            // é…ç½®webä¸»æœº kestrel
            .ConfigureWebHostDefaults(webBuilder =&amp;gt;
            {
                //ç»„ä»¶é…ç½®
                webBuilder.ConfigureKestrel((context,options)=&amp;gt;
                    options.Limits.MaxConcurrentConnections=10);//é»˜è®¤æ²¡æœ‰é™åˆ¶
                // ä¸»æœºé…ç½®é¡¹
                webBuilder.UseStartup&amp;lt;Startup&amp;gt;();
            });
}&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;ç»„ä»¶é…ç½®logé…ç½®&quot;&gt;ç»„ä»¶é…ç½®logé…ç½®&lt;/h3&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;ç§»é™¤é»˜è®¤çš„æ—¥å¿—ç»„ä»¶ï¼Œå¹¶æ·»åŠ åˆ¶å®šçš„logProvider.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre class=&quot;c#&quot;&gt;
&lt;code&gt;public class Program
{
    public static void Main(string[] args)
    {
        CreateHostBuilder(args).Build().Run();
    }

    public static IHostBuilder CreateHostBuilder(string[] args) =&amp;gt;
        Host.CreateDefaultBuilder(args)
            // é…ç½®webä¸»æœº kestrel
            .ConfigureWebHostDefaults(webBuilder =&amp;gt;
            {
                //ç»„ä»¶é…ç½®
                webBuilder.ConfigureKestrel((context,options)=&amp;gt;
                    options.Limits.MaxConcurrentConnections=10);//é»˜è®¤æ²¡æœ‰é™åˆ¶
                
                webBuilder.ConfigureLogging(logging =&amp;gt;
                    {
                        logging.ClearProviders();// ç§»é™¤.net Coreé»˜è®¤æ³¨å…¥çš„æ—¥å¿—Providers
                        logging.AddLog4Net();//æ‰€æœ‰æ—¥å¿—ç»Ÿä¸€ä½¿ç”¨log4net
                    });
                
                // ä¸»æœºé…ç½®é¡¹
                webBuilder.UseStartup&amp;lt;Startup&amp;gt;();
            });
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;ä¸»æœºé…ç½®-å¯åŠ¨é…ç½®&quot;&gt;ä¸»æœºé…ç½®-å¯åŠ¨é…ç½®&lt;/h3&gt;
&lt;pre class=&quot;c#&quot;&gt;
&lt;code&gt; // ä¸»æœºé…ç½®é¡¹
 webBuilder.UseStartup&amp;lt;Startup&amp;gt;();&lt;/code&gt;
&lt;/pre&gt;</description>
<pubDate>Fri, 07 Feb 2020 14:40:00 +0000</pubDate>
<dc:creator>å°æ™ºOwner</dc:creator>
<og:description>æ›´æ–°è®¡åˆ’ è¿™æ®µæ—¶é—´ï¼Œä¼šé™†ç»­æŠŠå»å¹´ä¸€å¹´åœ¨å…¬å¸åšçš„ç›¸å…³åŸ¹è®­ï¼Œæ•´ç†æˆåšå®¢åˆ†äº«ç»™å¤§å®¶ï¼Œåœ¨å›¢é˜Ÿå†…éƒ¨å·²ç»æŠŠå¤§éƒ¨åˆ†çš„.neté¡¹ç›®å®¹å™¨åŒ–å¹¶éƒ¨ç½²åˆ°k8s,ä¸­é—´ä¹Ÿè¸©äº†å¾ˆå¤šå‘ï¼Œä¹Ÿä¼šæŠŠç›¸å…³é—®é¢˜æ•´ç†å¤„ç†ï¼Œå¤§å®¶ä¸€èµ·å­¦ä¹ äº¤æµï¼Œå“ˆã€‚</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/sagecheng/p/12274959.html</dc:identifier>
</item>
<item>
<title>Linuxé˜²ç«å¢™ä¹‹iptableså¸¸ç”¨æ‰©å±•åŒ¹é…æ¡ä»¶ï¼ˆä¸€ï¼‰ - Linux-1874</title>
<link>http://www.cnblogs.com/qiuhom-1874/p/12273755.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/qiuhom-1874/p/12273755.html</guid>
<description>&lt;p&gt;ã€€ã€€ä¸Šä¸€ç¯‡åšæ–‡è®²äº†iptablesçš„åŸºæœ¬åŒ¹é…æ¡ä»¶å’Œéšå¼åŒ¹é…æ¡ä»¶ï¼Œå›é¡¾è¯·å‚è€ƒ&lt;a href=&quot;https://www.cnblogs.com/qiuhom-1874/p/12269717.html&quot; target=&quot;_blank&quot;&gt;https://www.cnblogs.com/qiuhom-1874/p/12269717.html&lt;/a&gt;ï¼›ä»Šå¤©åœ¨æ¥è¯´è¯´iptabelsçš„ä¸€äº›å¸¸ç”¨çš„æ˜¾ç¤ºæ‰©å±•åŒ¹é…æ¡ä»¶ï¼Œä½•è°“æ˜¾ç¤ºæ‰©å±•åŒ¹é…æ¡ä»¶å‘¢ï¼Ÿæ˜¾ç¤ºæ‰©å±•åŒ¹é…æ¡ä»¶å°±æ˜¯æˆ‘ä»¬éœ€è¦ç”¨åˆ°ä¸€äº›æ‰©å±•çš„æ¨¡å—ï¼Œç”¨-mé€‰é¡¹å»æŒ‡å®šåŠ¨æ€åŠ è½½å®ƒã€‚è¦ç”¨iptabelsçš„æ‰©å±•åŒ¹é…æ¡ä»¶çš„å‰ææ˜¯ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿä¸Šè¦æœ‰å¯¹åº”çš„æ‰©å±•æ¨¡å—ã€‚åœ¨Linuxä¸»æœºä¸Š/usr/lib64/xtables/è¿™ä¸ªç›®å½•ç”¨æ¥å­˜æ”¾iptablesçš„æ¨¡å—çš„ï¼Œè¿™é‡Œé¢çš„æ¨¡å—ä»¥libip6tå¼€å¤´çš„ï¼Œè¡¨ç¤ºé€‚ç”¨äºipv6ï¼Œå…¶ä½™çš„æ˜¯ipv4åè®®ç‰ˆæœ¬çš„æ¨¡å—ã€‚è¿™ä¸ªç›®å½•ä¸‹çš„æ¨¡å—å‘½åæ˜¯è¿™æ ·çš„ï¼Œlibipt_æˆ–è€…libip6t_åé¢çš„åå­—å¦‚æœå…¨æ˜¯å¤§å†™ï¼Œåˆ™è¯¥æ¨¡å—ç”¨äºå¤„ç†åŠ¨ä½œæ‰©å±•æ¨¡å—ï¼Œå¦‚æœæ˜¯å°å†™å°±æ˜¯åŒ¹é…æ¡ä»¶çš„æ‰©å±•æ¨¡å—ã€‚å¯¹äºè¿™äº›æ¨¡å—çš„å¸®åŠ©ä¿¡æ¯ï¼Œåœ¨centosä¸Šç”¨man iptableså‘½ä»¤å°±å¯ä»¥æ‰¾åˆ°ç›¸åº”çš„æ¨¡å—è¯´æ˜å’Œç”¨æ³•ï¼Œä»¥åŠæ¨¡å—çš„é€‰é¡¹ç­‰ç­‰ï¼Œåœ¨centos7ä¸Šæˆ‘ä»¬è¦æŸ¥çœ‹æ‰©å±•æ¨¡å—çš„ç”¨æ³•å¸®åŠ©ï¼Œéœ€è¦ç”¨man iptables-extensionså‘½ä»¤æ¥æŸ¥çœ‹ï¼›äº†è§£äº†iptablesçš„æ‰©å±•æ¨¡å—ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥è¯´è¯´å¸¸ç”¨çš„å‡ ç§æ‰©å±•æ¨¡å—çš„ä½¿ç”¨å’Œè¯´æ˜&lt;/p&gt;
&lt;p&gt;ã€€ã€€1ã€multiportæ‰©å±•ï¼Œè¿™ä¸ªæ‰©å±•æ¨¡å—ä¸»è¦ç”¨äºåŒ¹é…å¤šä¸ªæºç«¯å£æˆ–ç›®æ ‡ç«¯å£ï¼Œå‰é¢æˆ‘ä»¬äº†è§£äº†tcpå’Œudpä»–ä»¬éƒ½æœ‰ä¸¤ä¸ªéšå¼æ‰©å±•æ¥æŒ‡å®šè¿ç»­æˆ–å•ä¸ªæºç«¯å£æˆ–ç›®æ ‡ç«¯å£ï¼Œå®ƒä¸èƒ½åŒæ—¶æŒ‡å®šå¤šä¸ªç¦»æ•£çš„ç«¯å£ï¼Œmultiportè¿™ä¸ªæ¨¡å—å°±å¯ä»¥ä»¥ç¦»æ•£æ–¹å¼å®šä¹‰å¤šç«¯å£åŒ¹é…ï¼Œå½“ç„¶å®ƒä¹Ÿæ”¯æŒè¿ç»­çš„ç«¯å£åŒ¹é…ï¼Œè¿ç»­ç«¯å£åŒ¹é…åŒtcp/udpçš„è¿ç»­ç«¯å£åŒ¹é…ç”¨æ³•å’Œå†™æ³•ä¸€ç›´ï¼Œå®ƒä¹Ÿæ”¯æŒï¼Œè¿ç»­å’Œéè¿ç»­ç«¯å£çš„æ··åˆåŒ¹é…ï¼Œä½†è¿™ä¸ªæ¨¡å—æœ€å¤šåŒ¹é…15ä¸ªç«¯å£ã€‚è¿™é‡Œçš„15ä¸ªç«¯å£ä¸åŒäºæˆ‘ä»¬ç†è§£çš„15ä¸ªç«¯å£ï¼Œè¿™é‡Œçš„15ä¸ªç«¯å£æ˜¯è¯´ç”¨é€—å·éš”å¼€çš„ç¦»æ•£ç«¯å£ï¼Œä¹Ÿå°±æ˜¯è¯´è¿ç»­çš„ç«¯å£ï¼Œåœ¨è¿™é‡Œåªç®—ä¸€ä¸ªã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€[!] --source-ports,--sports port[,port|,port:port]...ï¼Œè¿™ä¸ªé€‰é¡¹è¡¨ç¤ºåŒ¹é…å¤šä¸ªæºç«¯å£&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;51&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@test ~]# iptables -F
[root@test ~]# iptables -nvL
Chain INPUT (policy ACCEPT 18 packets, 1292 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain FORWARD (policy DROP 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 13 packets, 1212 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain my_chain (0 references)
 pkts bytes target     prot opt in     out     source               destination         
[root@test ~]# iptables -A INPUT -s 172.16.0.0/16 -d 192.168.0.99 -p tcp -m multiport --sports 20:50,80,3306,9000 -j ACCEPT 
[root@test ~]# iptables -A my_chain  -s 172.16.0.0/16 -d 192.168.0.99 -p tcp -m multiport ! --sports 53,123,323 -j DROP
[root@test ~]# iptables -nvL
Chain INPUT (policy ACCEPT 24 packets, 1740 bytes)
 pkts bytes target     prot opt in     out     source               destination         
    0     0 ACCEPT     tcp  --  *      *       172.16.0.0/16        192.168.0.99         multiport sports 20:50,80,3306,9000

Chain FORWARD (policy DROP 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 17 packets, 1580 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain my_chain (0 references)
 pkts bytes target     prot opt in     out     source               destination         
    0     0 DROP       tcp  --  *      *       172.16.0.0/16        192.168.0.99         multiport sports  !53,123,323
[root@test ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼š--sportsæ”¯æŒå¯¹æŒ‡å®šç«¯å£å–åï¼Œè¡¨ç¤ºåŒ¹é…é™¤äº†æŒ‡å®šç«¯å£ä»¥å¤–çš„å…¶ä»–ç«¯å£ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€[!] --destination-ports,--dports port[,port|,port:port]...ï¼Œè¿™ä¸ªé€‰é¡¹è¡¨ç¤ºåŒ¹é…å¤šä¸ªç›®æ ‡ç«¯å£&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;53&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@test ~]# iptables -F  
[root@test ~]# iptables -nvL
Chain INPUT (policy ACCEPT 8 packets, 528 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain FORWARD (policy DROP 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 5 packets, 620 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain my_chain (0 references)
 pkts bytes target     prot opt in     out     source               destination         
[root@test ~]# iptables -A INPUT -d 192.168.0.99 -p tcp -m multiport --dports 22,80,3306,41319 -j ACCEPT  
[root@test ~]# iptables -A INPUT -d 192.168.0.99 -p tcp -m multiport ! --dports 22,80,3306,41319 -j DROP
[root@test ~]# iptables -nvL
Chain INPUT (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         
  152 12112 ACCEPT     tcp  --  *      *       0.0.0.0/0            192.168.0.99         multiport dports 22,80,3306,41319
    0     0 DROP       tcp  --  *      *       0.0.0.0/0            192.168.0.99         multiport dports  !22,80,3306,41319

Chain FORWARD (policy DROP 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 17 packets, 1580 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain my_chain (0 references)
 pkts bytes target     prot opt in     out     source               destination         
[root@test ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€[!] --ports port[,port|,port:port]...å¤šä¸ªæºæˆ–ç›®æ ‡ç«¯å£&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;49&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@test ~]# iptables -F
[root@test ~]# iptables -nvL
Chain INPUT (policy ACCEPT 18 packets, 1292 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain FORWARD (policy DROP 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 13 packets, 1212 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain my_chain (0 references)
 pkts bytes target     prot opt in     out     source               destination         
[root@test ~]# iptables -A INPUT -d 192.168.0.99 -p tcp -m multiport --ports 22,3306,41319 -j ACCEPT
[root@test ~]# iptables -A INPUT -d 192.168.0.99 -p tcp -m multiport ! --ports 22,3306,41319 -j DROP
[root@test ~]# iptables -nvL
Chain INPUT (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         
  121  9468 ACCEPT     tcp  --  *      *       0.0.0.0/0            192.168.0.99         multiport ports 22,3306,41319
    6   304 DROP       tcp  --  *      *       0.0.0.0/0            192.168.0.99         multiport ports  !22,3306,41319

Chain FORWARD (policy DROP 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 25 packets, 3120 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain my_chain (0 references)
 pkts bytes target     prot opt in     out     source               destination         
[root@test ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼š--portsè¡¨ç¤ºåŒ¹é…åˆ°çš„ç«¯å£ä¸ç®¡æ˜¯æºè¿˜æ˜¯ç›®æ ‡ï¼Œåªè¦æ˜¯æŒ‡å®šçš„ç«¯å£éƒ½èƒ½åŒ¹é…å¾—åˆ°ï¼Œç„¶ååšå‡ºç›¸åº”çš„å¤„ç†åŠ¨ä½œ&lt;/p&gt;
&lt;p&gt;ã€€ã€€2ã€iprangeæ‰©å±•ï¼Œæ­¤æ‰©å±•æ¨¡å—ä¸»è¦ç”¨äºåŒ¹é…è¿ç»­çš„ipåœ°å€èŒƒå›´&lt;/p&gt;
&lt;p&gt;ã€€ã€€[!] --src-range from[-to]Â  æ­¤é€‰é¡¹è¡¨ç¤ºåŒ¹é…æºipåœ°å€èŒƒå›´&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;41&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@test ~]# iptables -F
[root@test ~]# iptables -nvL
Chain INPUT (policy ACCEPT 25 packets, 1832 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain FORWARD (policy DROP 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 19 packets, 1832 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain my_chain (0 references)
 pkts bytes target     prot opt in     out     source               destination         
[root@test ~]# iptables -A INPUT -p tcp -m iprange --src-range 192.168.0.200-192.168.0.245 -j ACCEPT 
[root@test ~]# iptables -A INPUT -p tcp -m iprange ! --src-range 192.168.0.200-192.168.0.245 -j DROP   
[root@test ~]# iptables -nvL
Chain INPUT (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         
  144 12000 ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            source IP range 192.168.0.200-192.168.0.245
    0     0 DROP       tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            source IP range ! 192.168.0.200-192.168.0.245

Chain FORWARD (policy DROP 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 15 packets, 1396 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain my_chain (0 references)
 pkts bytes target     prot opt in     out     source               destination         
[root@test ~]#
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€[!] --dst-range from[-to]ï¼Œæ­¤é€‰é¡¹è¡¨ç¤ºåŒ¹é…ç›®æ ‡åœ°å€èŒƒå›´&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;41&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@test ~]# iptables -F
[root@test ~]# iptables -nvL
Chain INPUT (policy ACCEPT 29 packets, 2096 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain FORWARD (policy DROP 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 20 packets, 1856 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain my_chain (0 references)
 pkts bytes target     prot opt in     out     source               destination         
[root@test ~]# iptables -A OUTPUT -p tcp -m iprange --dst-range 192.168.0.100-192.168.0.245 -j ACCEPT
[root@test ~]# iptables -A OUTPUT -p tcp -m iprange ! --dst-range 192.168.0.100-192.168.0.245 -j DROP
[root@test ~]# iptables -nvL
Chain INPUT (policy ACCEPT 103 packets, 7240 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain FORWARD (policy DROP 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         
  175 16212 ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            destination IP range 192.168.0.100-192.168.0.245
    0     0 DROP       tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            destination IP range ! 192.168.0.100-192.168.0.245

Chain my_chain (0 references)
 pkts bytes target     prot opt in     out     source               destination         
[root@test ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€3ã€macæ‰©å±•ï¼Œè¯¥æ¨¡å—ç”¨äºåŒ¹é…ä¸»æœºçš„MACåœ°å€ï¼Œé€‚ç”¨äºPREROUTINGå’ŒFORWARDï¼ŒINPUTé“¾ä¸Š&lt;/p&gt;
&lt;p&gt;ã€€ã€€[!] --mac-source XX:XX:XX:XX:XX:XXï¼Œæ­¤é€‰é¡¹è¡¨ç¤ºåŒ¹é…æºMACåœ°å€&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;41&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@test ~]# iptables -F
[root@test ~]# iptables -nvL
Chain INPUT (policy ACCEPT 19 packets, 1332 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain FORWARD (policy DROP 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 13 packets, 1212 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain my_chain (0 references)
 pkts bytes target     prot opt in     out     source               destination         
[root@test ~]# iptables -A INPUT -p tcp -m mac --mac-source 00:24:81:68:ce:45 -j ACCEPT
[root@test ~]# iptables -A INPUT -s 192.168.0.151 -p tcp -j DROP
[root@test ~]# iptables -nvL
Chain INPUT (policy ACCEPT 65 packets, 16202 bytes)
 pkts bytes target     prot opt in     out     source               destination         
   18  1480 ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            MAC 00:24:81:68:CE:45
    0     0 DROP       tcp  --  *      *       192.168.0.151        0.0.0.0/0           

Chain FORWARD (policy DROP 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 70 packets, 19646 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain my_chain (0 references)
 pkts bytes target     prot opt in     out     source               destination         
[root@test ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€4ã€stringæ‰©å±•ï¼Œæ­¤æ¨¡å—ä¸»è¦å¯¹æŠ¥æ–‡ä¸­çš„åº”ç”¨å±‚æ•°æ®åšå­—ç¬¦ä¸²æ¨¡å¼åŒ¹é…æ£€æµ‹&lt;/p&gt;
&lt;p&gt;ã€€ã€€--algo {bm|kmp} ï¼ŒæŒ‡å®šå­—ç¬¦ä¸²åŒ¹é…æ£€æµ‹ç®—æ³•ï¼Œè¿™ä¸ªå¿…é¡»æŒ‡å®š&lt;/p&gt;
&lt;p&gt;ã€€ã€€--from offset:ä»ç¬¬å‡ ä¸ªå­—èŠ‚å¼€å§‹åŒ¹é…&lt;/p&gt;
&lt;p&gt;ã€€ã€€--to offset :åˆ°åº•å‡ ä¸ªå­—èŠ‚ç»“æŸ&lt;/p&gt;
&lt;p&gt;ã€€ã€€[!] --string pattern æŒ‡å®šè¦æ£€æµ‹åˆ°å­—ç¬¦ä¸²æ¨¡å¼&lt;/p&gt;
&lt;p&gt;ã€€ã€€[!] --hex-string pattern çŸ¥é“é‚£ä¸ªè¦æ£€æµ‹å­—ç¬¦ä¸²æ¨¡å¼ï¼Œ16è¿›åˆ¶æ ¼å¼&lt;/p&gt;
&lt;p&gt;ã€€ã€€ç¤ºä¾‹:å…¥ç«™æŠ¥æ–‡æœ‰loganalyzerçš„å­—çœ¼çš„æŠ¥æ–‡,ç»™äºˆä¸¢å¼ƒ&lt;/p&gt;
&lt;p&gt;ã€€ã€€åœ¨æ²¡æœ‰è®¾ç½®è§„åˆ™çš„æ˜¯å¯ä»¥æ­£å¸¸è®¿é—®çš„&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1503305/202002/1503305-20200207191935294-83535565.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â ã€€ã€€æ·»åŠ å¦‚ä¸‹è§„åˆ™&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;38&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@test ~]# iptables -A INPUT -p tcp --dport 80 -m string --algo bm --string &quot;loganalyzer&quot; -j DROP
[root@test ~]# iptables -nvL
Chain INPUT (policy ACCEPT 35 packets, 2328 bytes)
 pkts bytes target     prot opt in     out     source               destination         
    8  1840 DROP       tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            tcp dpt:80 STRING match  &quot;loganalyzer&quot; ALGO name bm TO 65535

Chain FORWARD (policy DROP 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 28 packets, 3200 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain my_chain (0 references)
 pkts bytes target     prot opt in     out     source               destination         
[root@test ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1503305/202002/1503305-20200207192528244-1650003118.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â ã€€ã€€æç¤º:å¯ä»¥çœ‹åˆ°æ·»åŠ äº†è§„åˆ™å,æˆ‘ä»¬å®¢æˆ·ç«¯å°±ä¸èƒ½å†è®¿é—®æˆ‘ä»¬çš„ç½‘ç«™äº†,è¿™ä¸ªå°±æ˜¯é€šè¿‡è¿‡æ»¤å­—ç¬¦ä¸²æ¥å®ç°æ§åˆ¶ç”¨æˆ·çš„è®¿é—®&lt;/p&gt;
&lt;p&gt;ã€€ã€€5ã€timeæ‰©å±•,æ­¤æ¨¡å—æ ¹æ®å°†æŠ¥æ–‡åˆ°è¾¾çš„æ—¶é—´ä¸æŒ‡å®šçš„æ—¶é—´èŒƒå›´è¿›è¡ŒåŒ¹é…&lt;/p&gt;
&lt;p&gt;ã€€ã€€--datestart YYYY[-MM[-DD[Thh[:mm[:ss]]]]]Â  æŒ‡å®šå¼€å§‹æ—¥æœŸ&lt;/p&gt;
&lt;p&gt;ã€€ã€€--datestop YYYY[-MM[-DD[Thh[:mm[:ss]]]]]Â  æŒ‡å®šç»“æŸæ—¥æœŸ&lt;/p&gt;
&lt;p&gt;ã€€ã€€--timestart hh:mm[:ss]Â  æŒ‡å®šå¼€å§‹æ—¶é—´&lt;/p&gt;
&lt;p&gt;ã€€ã€€--timestop hh:mm[:ss]Â  Â æŒ‡å®šç»“æŸæ—¶é—´&lt;/p&gt;
&lt;p&gt;ã€€ã€€[!] --monthdays day[,day...] æŒ‡å®šæ¯ä¸ªæœˆçš„å‡ å·&lt;/p&gt;
&lt;p&gt;ã€€ã€€[!] --weekdays day[,day...]Â  æŒ‡å®šæ˜ŸæœŸå‡ ï¼Œ1 â€“ 7 åˆ†åˆ«è¡¨ç¤ºæ˜ŸæœŸä¸€åˆ°æ˜ŸæœŸæ—¥&lt;/p&gt;
&lt;p&gt;ã€€ã€€--kerneltzï¼šä½¿ç”¨å†…æ ¸é…ç½®çš„æ—¶åŒºè€Œéé»˜è®¤çš„UTCï¼ŒCentOS7ç³»ç»Ÿé»˜è®¤ä¸ºUTC;æ³¨æ„ï¼š centos6 ä¸æ”¯æŒkerneltz ï¼Œ--localtzæŒ‡å®šæœ¬åœ°æ—¶åŒº(é»˜è®¤)&lt;/p&gt;
&lt;p&gt;ã€€ã€€é€šå¸¸æƒ…å†µæˆ‘ä»¬ç”¨--mouthdays å’Œ--timestart ã€--timestopç»“åˆæˆ–è€…--weekdays day å’Œ--timestart ã€--timestopæ¥ç»“åˆä½¿ç”¨å¾ˆå°‘å’Œ--datastart ã€datastopä½¿ç”¨ï¼›æœ€åæˆ‘ä»¬è¿˜æœ‰æŒ‡å®šä¸ºä½¿ç”¨çš„æ—¶åŒºï¼Œå¦‚æœæˆ‘ä»¬ä¸æŒ‡å®šï¼Œå®ƒé»˜è®¤ä½¿ç”¨çš„æ˜¯UTCæ—¶åŒºï¼Œåœ¨centos6 ä¸Šéœ€è¦ç”¨--localtzæ¥æŒ‡å®šæ—¶åŒº&lt;/p&gt;
&lt;p&gt;ã€€ã€€ç¤ºä¾‹ï¼šå…è®¸ä»»ä½•å®¢æˆ·ç«¯åœ¨æ™šä¸Šçš„20ï¼š00ï¼š00 åˆ°20ï¼š50ï¼š00 é€šè¿‡telnet æ¥è®¿é—®æˆ‘ä»¬æœåŠ¡å™¨&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;41&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@test ~]# iptables -F
[root@test ~]# iptables -nvL
Chain INPUT (policy ACCEPT 19 packets, 1332 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain FORWARD (policy DROP 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 13 packets, 1212 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain my_chain (0 references)
 pkts bytes target     prot opt in     out     source               destination         
[root@test ~]# iptables -A INPUT -p tcp --dport 23 -m time --timestart 20:00:00 --timestop 20:50:00 --kerneltz -j ACCEPT
[root@test ~]# iptables -A INPUT -p tcp --dport 23 -j DROP
[root@test ~]# iptables -A OUTPUT -p tcp --sport 23 -m time --timestart 20:00:00 --timestop 20:50:00 --kerneltz -j ACCEPT
[root@test ~]# iptables -A OUTPUT -p tcp --sport 23 -j DROP          
[root@test ~]# iptables -nvL
Chain INPUT (policy ACCEPT 19 packets, 1332 bytes)
 pkts bytes target     prot opt in     out     source               destination         
    0     0 ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            tcp dpt:23 TIME from 20:00:00 to 20:50:00
    0     0 DROP       tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            tcp dpt:23

Chain FORWARD (policy DROP 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 13 packets, 1212 bytes)
 pkts bytes target     prot opt in     out     source               destination         
    0     0 ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            tcp spt:23 TIME from 20:00:00 to 20:50:00
    0     0 DROP       tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            tcp spt:23

Chain my_chain (0 references)
 pkts bytes target     prot opt in     out     source               destination         
[root@test ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æµ‹è¯•ï¼šåœ¨å…è®¸çš„æ—¶é—´å†…é€šè¿‡Telnetè®¿é—®æœåŠ¡å™¨&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1503305/202002/1503305-20200207204838199-1138277690.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â Â ã€€ã€€æç¤ºï¼šå¯ä»¥çœ‹åˆ°åœ¨å…è®¸çš„æ—¶é—´è®¿é—®æœåŠ¡å™¨ä¸Šæ²¡æœ‰é—®é¢˜ï¼Œæˆ‘ä»¬ç­‰ä¼šä¸å†å…è®¸çš„æ—¶é—´èŒƒå›´å†…åœ¨è®¿é—®ä¸‹ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯å¯ä»¥æ­£å¸¸è®¿é—®å‘¢&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1503305/202002/1503305-20200207205053550-42978224.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â Â ã€€ã€€æç¤ºï¼šå¯ä»¥çœ‹åˆ°ä¸å†å…è®¸çš„æ—¶é—´èŒƒå›´å‘¢ æ˜¯ä¸å¯ä»¥è®¿é—®çš„&lt;/p&gt;
&lt;p&gt;ã€€ã€€é€šè¿‡timeæ¨¡å—æˆ‘ä»¬å¯ä»¥åšåˆ°åœ¨æŸä¸ªæ—¶é—´å…è®¸æˆ–æ‹’ç»å®¢æˆ·ç«¯çš„è®¿é—®ï¼Œæ—¶é—´å¯ä»¥ç”¨ä¸Šé¢çš„ä¸‰ç§æ—¶é—´ç»„åˆæ¥ç¡®å®šä¸€ä¸ªèŒƒå›´ï¼Œä¹Ÿå¯ä»¥åŒå…¶ä»–æ‰©å±•æ¨¡å—è”åˆä½¿ç”¨ï¼Œæ¯”å¦‚æˆ‘ä»¬åˆè¦æ§åˆ¶æ—¶é—´ï¼Œåˆè¦æ§åˆ¶éƒ¨åˆ†æºip æ¥è®¿é—®æˆ‘ä»¬æœåŠ¡å™¨ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨-mæŒ‡å®šiprange çš„èŒƒå›´ï¼Œiptablesé‡Œçš„ä¸€æ¡è§„åˆ™åŒ¹é…æ¡ä»¶éƒ½æ˜¯å–å¹¶é›†ï¼Œä¹Ÿå°±è¯´ä¸€æ¡è§„åˆ™æ˜¯å¦åŒ¹é…åˆ°æŠ¥æ–‡ï¼Œè¦çœ‹è¿™æ¡è§„åˆ™é‡Œçš„åŒ¹é…æ¡ä»¶æ˜¯å¦å¯¹æ•°æ®åŒ…éƒ½åŒ¹é…ï¼Œæ¢å¥è¯è¯´å°±æ˜¯ä¸€ä¸ªæ•°æ®è¦é€šè¿‡æŸä¸€æ¡è§„åˆ™ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°æ®åŒ…éœ€è¦æ»¡è¶³æˆ‘ä»¬ç»™å®šè§„åˆ™çš„æ‰€æœ‰æ¡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;Â ã€€ã€€ç¤ºä¾‹2ï¼šå…è®¸192.168.0.10-192.168.0.200 çš„æœåŠ¡å™¨åœ¨21ï¼š00ï¼š00åˆ°21ï¼š20ï¼š00 å…è®¸é€šè¿‡Telnetè®¿é—®æˆ‘ä»¬æœåŠ¡å™¨&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;41&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@test ~]# iptables -F
[root@test ~]# iptables -nvL
Chain INPUT (policy ACCEPT 20 packets, 1372 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain FORWARD (policy DROP 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 13 packets, 1212 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain my_chain (0 references)
 pkts bytes target     prot opt in     out     source               destination         
[root@test ~]# iptables -A INPUT  -p tcp --dport 23 -m iprange --src-range 192.168.0.10-192.168.0.200 -m time --timestart 21:00:00 --timestop 21:20:00 --kerneltz -j ACCEPT
[root@test ~]# iptables -A INPUT -p tcp --dport 23 -j DROP
[root@test ~]# iptables -A OUTPUT  -p tcp --sport 23 -m iprange --dst-range 192.168.0.10-192.168.0.200 -m time --timestart 21:00:00 --timestop 21:20:00 --kerneltz -j ACCEPT  
[root@test ~]# iptables -A OUTPUT -p tcp --dport 23 -j DROP     
[root@test ~]# iptables -nvL
Chain INPUT (policy ACCEPT 14 packets, 924 bytes)
 pkts bytes target     prot opt in     out     source               destination         
    0     0 ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            tcp dpt:23 source IP range 192.168.0.10-192.168.0.200 TIME from 21:00:00 to 21:20:00
    0     0 DROP       tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            tcp dpt:23

Chain FORWARD (policy DROP 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 11 packets, 1908 bytes)
 pkts bytes target     prot opt in     out     source               destination         
    0     0 ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            tcp spt:23 destination IP range 192.168.0.10-192.168.0.200 TIME from 21:00:00 to 21:20:00
    0     0 DROP       tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            tcp dpt:23

Chain my_chain (0 references)
 pkts bytes target     prot opt in     out     source               destination         
[root@test ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æµ‹è¯•ï¼šä¸åœ¨å…è®¸èŒƒå›´çš„ä¸»æœºå’Œåœ¨å…è®¸èŒƒå›´çš„ä¸»æœºéƒ½åœ¨å…è®¸æ—¶é—´æ˜¯å¦èƒ½è®¿é—®æœåŠ¡å™¨ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1503305/202002/1503305-20200207211535487-1399953954.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â Â ã€€ã€€æç¤ºï¼šå¯ä»¥çœ‹åˆ°è™½ç„¶éƒ½æ˜¯åœ¨å…è®¸çš„æ—¶é—´ï¼Œåœ¨å…è®¸èŒƒå›´çš„ä¸»æœºæ˜¯å¯ä»¥è®¿é—®çš„ï¼Œä¸å†å…è®¸èŒƒå›´çš„ä¸»æœºä¸Šä¸èƒ½è®¿é—®çš„ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€æµ‹è¯•ï¼šå…è®¸çš„ä¸»æœºå’Œä¸å…è®¸çš„ä¸»æœºï¼Œéƒ½åœ¨ä¸åœ¨å…è®¸çš„æ—¶é—´æ˜¯å¦å¯ä»¥è®¿é—®æœåŠ¡å™¨ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1503305/202002/1503305-20200207212228220-159926572.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â Â ã€€ã€€æç¤ºï¼šå¯ä»¥çœ‹åˆ°éƒ½ä¸åœ¨å…è®¸çš„æ—¶é—´ï¼Œå®ƒä¿©æ˜¯éƒ½ä¸èƒ½è®¿é—®çš„ï¼Œæ‰€ä»¥è¦æ»¡è¶³åœ¨å…è®¸çš„æ—¶é—´å†…çš„åŒæ—¶è¿˜è¦æ»¡è¶³æ˜¯å…è®¸çš„ä¸»æœºæ‰å¯ä»¥ï¼Œå®ƒä¿©æ¡ä»¶å¿…é¡»æ˜¯äº¤é›†ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€6ã€connlimitæ‰©å±•ï¼Œæ­¤æ¨¡å—å¯æ ¹æ®æ¯å®¢æˆ·ç«¯IPåšå¹¶å‘è¿æ¥æ•°æ•°é‡åŒ¹é…ï¼Œå¯é˜²æ­¢CC(Challenge CollapsaræŒ‘æˆ˜é»‘æ´)æ”»å‡»&lt;/p&gt;
&lt;p&gt;ã€€ã€€--connlimit-upto #ï¼šè¿æ¥çš„æ•°é‡å°äºç­‰äº#æ—¶åŒ¹é…&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;41&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@test ~]# iptables -F
[root@test ~]# iptables -nvL
Chain INPUT (policy ACCEPT 14 packets, 1004 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain FORWARD (policy DROP 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 11 packets, 996 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain my_chain (0 references)
 pkts bytes target     prot opt in     out     source               destination         
[root@test ~]# iptables -A INPUT -p tcp --dport 23 -m connlimit --connlimit-upto 2 -j ACCEPT
[root@test ~]# iptables -A INPUT -p tcp --dport 23 -j DROP
[root@test ~]# iptables -nvL
Chain INPUT (policy ACCEPT 23 packets, 1668 bytes)
 pkts bytes target     prot opt in     out     source               destination         
    0     0 ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            tcp dpt:23 #conn src/32 &amp;lt;= 2
    0     0 DROP       tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            tcp dpt:23

Chain FORWARD (policy DROP 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 17 packets, 1548 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain my_chain (0 references)
 pkts bytes target     prot opt in     out     source               destination         
[root@test ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šä»¥ä¸Šè§„åˆ™è¡¨ç¤ºï¼ŒåŒä¸€å®¢æˆ·ç«¯è¿æ¥æˆ‘æœ¬æœºæœåŠ¡å™¨ä¸Šçš„23å·ç«¯å£ï¼ˆTelnetæœåŠ¡ï¼‰ï¼Œå¦‚æœè¿æ¥æ•°å°äºç­‰äº2 å…è®¸è¿æ¥ã€‚&lt;/p&gt;
&lt;p&gt;æµ‹è¯•ï¼šåŒä¸€ä¸»æœºå¼€ä¸‰ä¸ªçª—å£å¯¹æœåŠ¡å™¨ï¼Œçœ‹çœ‹ç¬¬ä¸‰ä¸ªè¿æ¥æ˜¯å¦å¯ä»¥è¿æ¥&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1503305/202002/1503305-20200207215313796-990667686.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â ã€€ã€€æç¤ºï¼šå¯ä»¥çœ‹åˆ°å½“192.168.0.151 çš„ç¬¬ä¸‰ä¸ªè¿æ¥æ˜¯è¢«æœåŠ¡å™¨æ‹’ç»äº†Â &lt;/p&gt;
&lt;p&gt;ã€€ã€€--connlimit-above #ï¼šè¿æ¥çš„æ•°é‡å¤§äº#æ—¶åŒ¹é…&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;41&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@test ~]# iptables -F
[root@test ~]# iptables -nvL
Chain INPUT (policy ACCEPT 20 packets, 1372 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain FORWARD (policy DROP 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 13 packets, 1212 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain my_chain (0 references)
 pkts bytes target     prot opt in     out     source               destination         
[root@test ~]# iptables -A INPUT  -d 192.168.0.99 -p tcp --dport 23 -m connlimit --connlimit-above 2 -j DROP 
[root@test ~]# iptables -nvL
Chain INPUT (policy ACCEPT 23 packets, 1596 bytes)
 pkts bytes target     prot opt in     out     source               destination         
    0     0 DROP       tcp  --  *      *       0.0.0.0/0            192.168.0.99         tcp dpt:23 #conn src/32 &amp;gt; 2

Chain FORWARD (policy DROP 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 15 packets, 1396 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain my_chain (0 references)
 pkts bytes target     prot opt in     out     source               destination         
[root@test ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šæˆ‘ä»¬æŠŠä¸Šé¢çš„è§„åˆ™æ›´æ”¹ä¸ºåŒä¸€ä¸»æœºè¿æ¥æ•°å¤§äº2æ—¶ å°±ä¸¢å¼ƒï¼Œå…¶ä»–è¿æ¥èµ°é»˜è®¤åŒæ„æ”¾è¡Œè¿æ¥ï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦åŒä¸€ip è¿æ¥æ•°å¤§äº2 å°±æ‹’ç»&lt;/p&gt;
&lt;p&gt;ã€€ã€€æµ‹è¯•ï¼šåŒä¸€ä¸»æœºå¼€ä¸‰ä¸ªçª—å£å¯¹æœåŠ¡å™¨ï¼Œçœ‹çœ‹ç¬¬ä¸‰ä¸ªè¿æ¥æ˜¯å¦å¯ä»¥è¿æ¥&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1503305/202002/1503305-20200207220758802-285275107.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â Â ã€€ã€€æç¤ºï¼šå¯ä»¥çœ‹åˆ°åŒä¸€ä¸»æœºè¿æ¥å¤§äº2æ—¶å°±æ‹’ç»é“¾æ¥äº†&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1503305/202002/1503305-20200207221118591-90309036.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â Â ã€€ã€€æç¤ºï¼šåœ¨åŒä¸€ä¸»æœºè¿æ¥æ•°å¤§äº2æ—¶ ç”¨å¦å¤–çš„ä¸»æœºå»è¿æ¥æ˜¯ä¸å—å½±å“çš„&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä»ä»¥ä¸Šæµ‹è¯•çœ‹ï¼Œconnlimitæ¨¡å—å¯ä»¥æ§åˆ¶å•å°å®¢æˆ·ç«¯çš„å¹¶å‘è¿æ¥æ•°ï¼Œå¹¶ä¸”ä¸å¯¹å…¶ä»–å®¢æˆ·ç«¯äº§ç”Ÿå½±å“ï¼Œé€šå¸¸æƒ…å†µ--connlimit-upto å’Œ--connlimit-above å’Œé»˜è®¤ç­–ç•¥ç»“åˆä½¿ç”¨ï¼Œå¦‚æœé»˜è®¤ç­–ç•¥æ˜¯å…è®¸æ‰€æœ‰ä¸åŒ¹é…çš„æŠ¥æ–‡ï¼Œé‚£ä¹ˆæˆ‘å°±ç”¨--connlimit-above æ¥æ§åˆ¶è¿æ¥ä¸Šé™ï¼Œç„¶åå†æ‹’ç»ã€‚å¦‚æœé»˜è®¤ç­–ç•¥æ˜¯æ‹’ç»æ‰€æœ‰ä¸åŒ¹é…çš„æŠ¥æ–‡é‚£ä¹ˆæˆ‘ä»¬å°±ç”¨--connlimit-uptoæ¥å…è®¸è¿æ¥æ•°å°äºç­‰äºæŸä¸ªæ•°æ¥æ§åˆ¶è¿æ¥è¯·æ±‚ã€‚&lt;/p&gt;
</description>
<pubDate>Fri, 07 Feb 2020 14:29:00 +0000</pubDate>
<dc:creator>Linux-1874</dc:creator>
<og:description>ä¸Šä¸€ç¯‡åšæ–‡è®²äº†iptablesçš„åŸºæœ¬åŒ¹é…æ¡ä»¶å’Œéšå¼åŒ¹é…æ¡ä»¶ï¼Œå›é¡¾è¯·å‚è€ƒhttps://www.cnblogs.com/qiuhom-1874/p/12269717.htmlï¼›ä»Šå¤©åœ¨æ¥è¯´è¯´iptabel</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/qiuhom-1874/p/12273755.html</dc:identifier>
</item>
<item>
<title>SystemVerilogæ­å»ºAPB_I2C IP å±‚æ¬¡åŒ–éªŒè¯å¹³å° - æ²¡è½éª‘å£«</title>
<link>http://www.cnblogs.com/moluoqishi/p/12262434.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/moluoqishi/p/12262434.html</guid>
<description>&lt;p&gt;&lt;span&gt;&lt;strong&gt;ä¸€ã€å‰è¨€&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€&lt;span&gt;è¿‘æœŸç–«æƒ…ä¸¥é‡ï¼Œèº«ä¸ºç¤¾ç•œçš„æˆ‘åªèƒ½åœ¨å®¶ä¸­ç»§ç»­é’»ç ”æŠ€æœ¯äº†ã€‚ä¹‹å‰å†™è¿‡ä¸€ç¯‡å…³äºæ­å»ºFIFOéªŒè¯å¹³å°çš„åšæ–‡ï¼Œåˆ©ç”¨SVçš„OOPç‰¹æ€§å¯¹FIFOè¿›è¡Œåˆæ­¥éªŒè¯ï¼Œä½†æœ‰å¾ˆå¤šä¸è¶³ä¹‹å¤„ï¼Œæ¯”å¦‚ç»“æ„ä¸å¤Ÿè§„èŒƒã€éªŒè¯ç»„ä»¶ç±»ä¸ç‹¬ç«‹äºDUTç­‰é—®é¢˜ã€‚æ­¤æ¬¡å°è¯•éªŒè¯æ›´å¤æ‚çš„IPï¼Œå¹¶åˆ©ç”¨SVçš„æ›´å¤šé«˜çº§ç‰¹æ€§æ¥æ­å»ºå±‚æ¬¡åŒ–éªŒè¯å¹³å°ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;äºŒã€APB_I2C IPæ¦‚è¿°&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€å®è·µå‡ºçœŸçŸ¥ï¼Œäºæ˜¯åœ¨opencoresç½‘ç«™ä¸Šä¸‹è½½äº†ä¸ªAPB_I2Cçš„IPæ ¸ï¼Œä¾¿ç€æ‰‹å±•å¼€éªŒè¯å·¥ä½œã€‚ç¬¬ä¸€æ­¥æ˜¯ç†æ¸…æ¥šè¿™ä¸ªIPçš„æ•´ä½“åŠŸèƒ½ã€å¼•è„šä½œç”¨ä»¥åŠé¡¶å±‚ç»“æ„ã€‚æ•´ä½“åŠŸèƒ½ä»æ¨¡å—åç§°ä¾¿å¯å¾—çŸ¥æ˜¯å¸¦æœ‰APBæ€»çº¿æ¥å£çš„I2C_masterã€‚è¦äº†è§£å¼•è„šä½œç”¨ä¸æ—¶åºï¼Œç›´æ¥æˆªå–SPECä¸Šçš„ç¤ºæ„å›¾æŸ¥çœ‹ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;APB_WRITE:&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1201289/202002/1201289-20200207202315247-1029566031.png&quot; alt=&quot;&quot; width=&quot;526&quot; height=&quot;298&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â APB_READ:&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1201289/202002/1201289-20200207202353263-513104212.png&quot; alt=&quot;&quot; width=&quot;535&quot; height=&quot;317&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Â I2C_PROTOCOL:&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1201289/202002/1201289-20200207202439010-796245573.png&quot; alt=&quot;&quot; width=&quot;736&quot; height=&quot;53&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â ã€€ã€€&lt;span&gt;æ¥å£å’Œåè®®è¿™é‡Œå°±ä¸ç»†è¯´äº†ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹æŸ¥æ‰¾ç›¸å…³çš„èµ„æ–™ã€‚è‡³äºé¡¶å±‚ç»“æ„è¿™æ–¹é¢ï¼Œæœ€å¥½è¿˜æ˜¯äº¤ç»™å·¥å…·æ–¹ä¾¿ç‚¹ã€‚æ— å¥ˆå›å®¶æ²¡æœ‰å¸¦å›æˆ‘çš„è™šæ‹Ÿæœºç¡¬ç›˜ï¼Œåªèƒ½ä¸‹è½½ä¸ªWINDOWç‰ˆæœ¬çš„EDAå·¥å…·äº†ã€‚æœ¬æ–‡ä½¿ç”¨QuestaSimï¼ŒåŸç†å›¾å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1201289/202002/1201289-20200205085706835-523496812.png&quot; alt=&quot;&quot; width=&quot;886&quot; height=&quot;342&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€å¾ˆå®¹æ˜“çœ‹å‡ºè¯¥æ¨¡å—é¡¶å±‚åŒ…å«APBæ¥å£æ¨¡å—APBã€åˆ†åˆ«ç”¨äºç¼“å­˜å‘é€å’Œæ¥æ”¶æ•°æ®çš„FIFO_TXå’ŒFIFO_RXï¼Œä»¥åŠI2Cåè®®è½¬æ¢æ¨¡å—I2X_INTERNAL_RX_TXã€‚masteré€šè¿‡APBæ€»çº¿è®¿é—®è¯¥IPæ ¸å†…éƒ¨çš„æ•°æ®ç¼“å­˜åŒºå’Œé…ç½®å¯„å­˜å™¨ï¼Œæ— éœ€å…³æ³¨å†…éƒ¨å®ç°ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€é™¤äº†è¿™å‡ ä¸ªæ–¹é¢ï¼Œé…ç½®å¯„å­˜å™¨çš„è®¿é—®ä¹Ÿéå¸¸é‡è¦ã€‚IPæ ¸å¿…é¡»åšå‡ºæ­£ç¡®çš„é…ç½®å’Œä½¿èƒ½æ‰å¯ä»¥æŒ‰ç…§éœ€è¦æ­£å¸¸å·¥ä½œã€‚é…ç½®å¯„å­˜å™¨è§ä¸‹è¡¨ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1201289/202002/1201289-20200205093813460-946016644.png&quot; alt=&quot;&quot; width=&quot;773&quot; height=&quot;184&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Â &lt;strong&gt;&lt;span&gt;ä¸‰ã€QuestaSimå¸¸ç”¨æŒ‡ä»¤&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€&lt;span&gt;QuestaSimå·¥å…·çš„WINDOWS/LINUXç‰ˆæœ¬å¾ˆå®¹æ˜“ä¸‹è½½åˆ°ï¼Œå’ŒModelsimçš„ä¸»è¦åŒºåˆ«æ˜¯å¯¹SV UVMçš„æ”¯æŒæ€§è¾ƒå¥½ï¼Œè¿™ä¸€ç‚¹éå¸¸ç¬¦åˆæœ¬æ–‡çš„æ„æ„¿ã€‚ä½†ä»¿çœŸè¿‡ç¨‹ä¸­ä¸€æ¬¡æ¬¡ç‚¹å‡»é¼ æ ‡å¾ˆéº»çƒ¦ï¼Œåªå¥½å­¦ä¹ å­¦ä¹ æ“ä½œå‘½ä»¤äº†ï¼Œå†™ä¸ªè„šæœ¬é…åˆSVå®ç°è‡ªåŠ¨åŒ–ä»¿çœŸã€‚ä»¥ä¸‹æ˜¯åœ¨å®˜æ–¹æ–‡æ¡£user manualå’Œtutorialä¸­æˆªå–çš„å¸¸ç”¨æŒ‡ä»¤åŠè§£é‡Šã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;1 Compile the source files.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;vlog&lt;/strong&gt; gates.v and2.v cache.v memory.v proc.v set.v top.v&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;fontstyle0&quot;&gt;2 Use the &lt;span class=&quot;fontstyle0&quot;&gt;&lt;strong&gt;vopt&lt;/strong&gt; &lt;span class=&quot;fontstyle0&quot;&gt;command to optimize the design with full visibility into all design unitsÂ &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;lines ApplCommand&quot;&gt;&lt;span&gt;&lt;strong&gt;vopt +acc &amp;lt;design_name&amp;gt; -o &amp;lt;optimized_design_name&amp;gt; -debugdb&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;p&quot;&gt;&lt;span&gt;TheÂ &lt;span class=&quot;ph FontStyle bold&quot;&gt;+accÂ argument enables full visibility into the design for debugging purposes. TheÂ &lt;span class=&quot;ph FontStyle bold&quot;&gt;-oargumentÂ  is required for naming the optimized design object. TheÂ &lt;span class=&quot;ph FontStyle bold&quot;&gt;-debugdbÂ argument collects combinatorial and sequential logic data into the work library.&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle2&quot;&gt;&lt;span class=&quot;fontstyle3&quot;&gt;&lt;span class=&quot;fontstyle2&quot;&gt;&lt;span class=&quot;fontstyle3&quot;&gt;&lt;span class=&quot;fontstyle2&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;3 Use the optimized design name to load the design with the &lt;span class=&quot;fontstyle0&quot;&gt;vsim &lt;span class=&quot;fontstyle0&quot;&gt;command:&lt;br/&gt;&lt;span class=&quot;fontstyle2&quot;&gt;&lt;strong&gt;vsim testcounter_opt -debugdb&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle2&quot;&gt;&lt;span class=&quot;fontstyle3&quot;&gt;&lt;span class=&quot;fontstyle2&quot;&gt;&lt;span class=&quot;fontstyle3&quot;&gt;&lt;span class=&quot;fontstyle2&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle2&quot;&gt;4 &lt;strong&gt;set WildcardFilter &quot;Variable Constant Generic Parameter SpecParam Memory&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;Assertion Endpoint ImmediateAssert&quot;&lt;/strong&gt;&lt;br/&gt;&lt;span class=&quot;fontstyle2&quot;&gt;With this command, youÂ &lt;em&gt;remove â€œCellInternalâ€&lt;/em&gt;Â from the default list of Wildcard filters.&lt;br/&gt;This allows all signals in cells to be logged by the simulator so they will be visible in the&lt;br/&gt;debug environment.Â &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;5 &lt;strong&gt;Add Wave&lt;/strong&gt;Â *&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;6&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; &lt;strong&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;add log /*&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;This will provide the historic values of the events of interest plus its drivers&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span&gt;&lt;strong&gt;7 run 500&lt;/strong&gt;&lt;/span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span class=&quot;fontstyle0&quot;&gt;&lt;span&gt;ã€€ã€€ä¸€å¹¶ç»™å‡ºæˆ‘çš„doè„šæœ¬æ–‡ä»¶:&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('ff6e7c76-5182-4e2e-a3be-f7ac5fdb1d2c')&quot; readability=&quot;32.5&quot;&gt;&lt;img id=&quot;code_img_closed_ff6e7c76-5182-4e2e-a3be-f7ac5fdb1d2c&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_ff6e7c76-5182-4e2e-a3be-f7ac5fdb1d2c&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('ff6e7c76-5182-4e2e-a3be-f7ac5fdb1d2c',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_ff6e7c76-5182-4e2e-a3be-f7ac5fdb1d2c&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;60&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; #quit -&lt;span&gt;sim
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; 
&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;set filename testbench
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; 
&lt;span&gt; 5&lt;/span&gt; vlog *.v *&lt;span&gt;.sv
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt; 
&lt;span&gt; 7&lt;/span&gt; vopt -debugdb +acc work.$filename -&lt;span&gt;o top_opt1
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt; vsim -&lt;span&gt;debugdb top_opt1
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt; 
&lt;span&gt;10&lt;/span&gt; #vsim -vopt -debugdb +&lt;span&gt;acc work.$filename
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt; 
&lt;span&gt;12&lt;/span&gt; &lt;span&gt;# change WildcardFilter variables
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt; set WildcardFilter &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Variable Constant Generic Parameter SpecParam Memory Assertion Cover Endpoint ScVariable ImmediateAssert VHDLFile&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
&lt;span&gt;14&lt;/span&gt; 
&lt;span&gt;15&lt;/span&gt; add wave /$filename&lt;span&gt;/*&lt;/span&gt;
&lt;span&gt;16&lt;/span&gt; &lt;span&gt;add log -r /*
&lt;/span&gt;&lt;span&gt;17&lt;/span&gt; 
&lt;span&gt;18&lt;/span&gt; &lt;span&gt;run 1000ns&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;sim.do&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;Â å››ã€æ­å»ºéªŒè¯ç¯å¢ƒ&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€&lt;span&gt;è¿™ä¸€èŠ‚æ˜¯æœ¬æ–‡çš„æ ¸å¿ƒå†…å®¹äº†ã€‚é€šç”¨çš„éªŒè¯ç¯å¢ƒçš„ç»“æ„å’Œç»„ä»¶å¦‚å›¾ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1201289/202002/1201289-20200207205821568-86457834.png&quot; alt=&quot;&quot; width=&quot;693&quot; height=&quot;239&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â ã€€ã€€&lt;span&gt;Stimuluså°†æµ‹è¯•æ¿€åŠ±é€å…¥å¾…æµ‹è¯•æ¨¡å—DUTï¼ŒMonitorè§‚å¯Ÿå“åº”å¹¶å‘é€ç»™æ£€Checkerã€‚é‡åˆ°å¤æ‚çš„è®¾è®¡è¿˜éœ€è¦è®¾è®¡Reference modelï¼Œè¿›è€Œå¯¹æ¯”å®é™…å“åº”ä¸é»„é‡‘å‚è€ƒçš„å“åº”åŒºåˆ«ã€‚å¹¶ä¸”å½“Monitoræ— æ³•ç®€å•ç›´æ¥åœ°æ”¶é›†DUTå“åº”æ—¶ï¼Œè¿˜éœ€è¦è®¾è®¡VIPæ¥è§£æå¤æ‚çš„å“åº”ä¿¡å·æ—¶åºã€‚è¿™å‡ å¤©å‚ç…§å·¥å…·ä¹¦å’Œç½‘ä¸Šçš„æ•™ç¨‹è§†é¢‘ï¼Œæ ¹æ®APB_I2Cæ¨¡å—çš„ç‰¹æ€§æ„æ€å‡ºåŸºæœ¬çš„éªŒè¯ç¯å¢ƒã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€APB_I2Cæ¨¡å—å¹¶ä¸å¤æ‚ï¼Œæ‰€ä»¥æ²¡å¿…è¦è®¾è®¡reference modelã€‚è‹¥æƒ³åˆ©ç”¨Monitorç»„ä»¶è·å–DUTå“åº”éœ€è¦è§£æI2Cåè®®æ—¶åºï¼Œè¿™é‡Œç¼–å†™ä¸ªVIPæ¥å¸®åŠ©å®ƒè§£æå‡ºæœ‰æ•ˆæ•°æ®ï¼Œè¿›è€Œä¸Stimulusæ•°æ®å¯¹æ¯”ã€‚Monitorå› VIPçš„å­˜åœ¨å¾—åˆ°äº†å¾ˆå¤§ç¨‹åº¦ä¸Šçš„ç®€åŒ–ï¼Œä¸»è¦çš„åŠŸèƒ½ä¸ºå°†ç­‰å¾…è§¦å‘äº‹ä»¶å‘ç”Ÿåï¼Œå°†æ•°æ®é€šè¿‡MAILBOXä¼ è¾“ç»™Checkerè¿›è¡Œæ¯”è¾ƒã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€å¦å¤–ï¼Œä¸ºäº†è®©Stimulusè„±ç¦»å…·ä½“æ¥å£ä¿¡å·æ“ä½œï¼Œå»ºç«‹Generatorå’ŒInitiatorç±»åˆ†åˆ«ç”¨äºäº§ç”Ÿè¯»å†™è®¿é—®å’Œå°†è¯»å†™è®¿é—®è½¬æ¢æˆè¯»å†™æ“ä½œå¯¹åº”çš„å…·ä½“ä¿¡å·é€»è¾‘ã€‚ä¸ºäº†å®ç°OOPç‰¹æ€§ä¸­çš„â€œç»†èŠ‚éšè—â€ï¼Œå»ºç«‹é…ç½®ç±»Configæ¥é…ç½®éªŒè¯ç¯å¢ƒï¼Œè¿™é‡Œä¸»è¦æ˜¯é…ç½®Generatorå‘é€ç‰¹å®šåœºæ™¯çš„è¯»å†™è¯·æ±‚ã€‚æƒ³è¦æµ‹è¯•ä¸åŒçš„åŠŸèƒ½ç‰¹æ€§ï¼Œåªéœ€æ”¹åŠ¨ä¼ å…¥Configçš„å‚æ•°å³å¯ã€‚åˆ°æ­¤éªŒè¯ç¯å¢ƒåŒ…å«äº†Generator Initiator Monitor Checker Configäº”ä¸ªéªŒè¯ç»„ä»¶ï¼Œè¿™é‡Œå†å»ºç«‹Environmentç±»å°†è¿™äº›ç»„ä»¶åŒ…åœ¨ä¸€èµ·ï¼Œæ–¹ä¾¿è°ƒç”¨æ–¹æ³•ã€‚è¿˜æ˜¯ä¸Šå›¾æ›´ç›´è§‚äº›ï¼ˆæœ‰ç‚¹ä¸‘ï¼Œå‡‘æ´»çœ‹å§ï¼‰&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1201289/202002/1201289-20200207214230557-1074402786.png&quot; alt=&quot;&quot; width=&quot;814&quot; height=&quot;323&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Â ã€€ã€€&lt;span&gt;é™¤äº†éªŒè¯ç¯å¢ƒç»“æ„ï¼Œå¥½çš„ä»£ç ç»“æ„ä¹Ÿèƒ½æå¤§æé«˜å¹³å°çš„é‡ç”¨æ€§ã€‚è¿™é‡Œå°†æ‰€æœ‰ç±»åŠå¯¹åº”çš„å±æ€§æ–¹æ³•å°è£…åˆ°Package componentsä¸­ï¼Œæ–¹ä¾¿è¢«importåˆ°testbenchä¸­ã€‚éªŒè¯è¿‡ç¨‹ä¸­ç”¨åˆ°çš„æ‰€æœ‰å˜é‡ç±»å‹ã€å‚æ•°æ”¾ç½®åœ¨defines.svä¸­ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€ä¸Šä»£ç ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('92907b50-c21e-4324-962c-56178d5c24bc')&quot; readability=&quot;45&quot;&gt;&lt;img id=&quot;code_img_closed_92907b50-c21e-4324-962c-56178d5c24bc&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_92907b50-c21e-4324-962c-56178d5c24bc&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('92907b50-c21e-4324-962c-56178d5c24bc',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_92907b50-c21e-4324-962c-56178d5c24bc&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;85&quot;&gt;
&lt;pre&gt;
&lt;span&gt;  1&lt;/span&gt; &lt;span&gt;package components;
&lt;/span&gt;&lt;span&gt;  2&lt;/span&gt;     `&lt;span&gt;include&lt;/span&gt; &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;defines.sv&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
&lt;span&gt;  3&lt;/span&gt;     
&lt;span&gt;  4&lt;/span&gt; &lt;span&gt;    apb_bus_t apb_bus;
&lt;/span&gt;&lt;span&gt;  5&lt;/span&gt; &lt;span&gt;    logic event_tx_i2c_vld,event_tx_vld;
&lt;/span&gt;&lt;span&gt;  6&lt;/span&gt; &lt;span&gt;    data_t data_tx_i2c;
&lt;/span&gt;&lt;span&gt;  7&lt;/span&gt; &lt;span&gt;    logic data_tx_i2c_vld;
&lt;/span&gt;&lt;span&gt;  8&lt;/span&gt;     
&lt;span&gt;  9&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;Driver&lt;/span&gt;
&lt;span&gt; 10&lt;/span&gt; &lt;span&gt;    class Initiator;
&lt;/span&gt;&lt;span&gt; 11&lt;/span&gt;         
&lt;span&gt; 12&lt;/span&gt;         &lt;span&gt;function&lt;/span&gt;&lt;span&gt; void init_en();
&lt;/span&gt;&lt;span&gt; 13&lt;/span&gt;             apb_bus.sel = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 14&lt;/span&gt;             apb_bus.wdata = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 15&lt;/span&gt;             apb_bus.addr = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 16&lt;/span&gt;             apb_bus.write = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 17&lt;/span&gt;             apb_bus.enable = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 18&lt;/span&gt;         &lt;span&gt;endfunction&lt;/span&gt;
&lt;span&gt; 19&lt;/span&gt;         
&lt;span&gt; 20&lt;/span&gt;         &lt;span&gt;task&lt;/span&gt;&lt;span&gt; write_oper(address_t address,data_t data_w);
&lt;/span&gt;&lt;span&gt; 21&lt;/span&gt;             @(&lt;span&gt;posedge&lt;/span&gt;&lt;span&gt; apb_bus.clk);
&lt;/span&gt;&lt;span&gt; 22&lt;/span&gt;             #&lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 23&lt;/span&gt;             apb_bus.sel = &lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 24&lt;/span&gt;             apb_bus.write = &lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 25&lt;/span&gt;             apb_bus.wdata =&lt;span&gt; data_w;
&lt;/span&gt;&lt;span&gt; 26&lt;/span&gt;             apb_bus.addr =&lt;span&gt; address;
&lt;/span&gt;&lt;span&gt; 27&lt;/span&gt; &lt;span&gt;            #T;
&lt;/span&gt;&lt;span&gt; 28&lt;/span&gt;             apb_bus.enable = &lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 29&lt;/span&gt; &lt;span&gt;            #T;
&lt;/span&gt;&lt;span&gt; 30&lt;/span&gt; &lt;span&gt;            init_en();
&lt;/span&gt;&lt;span&gt; 31&lt;/span&gt; &lt;span&gt;        endtask
&lt;/span&gt;&lt;span&gt; 32&lt;/span&gt;         
&lt;span&gt; 33&lt;/span&gt;         &lt;span&gt;task&lt;/span&gt; read_oper(address_t address,&lt;span&gt;output&lt;/span&gt;&lt;span&gt; data_t data_r);
&lt;/span&gt;&lt;span&gt; 34&lt;/span&gt;             @(&lt;span&gt;posedge&lt;/span&gt;&lt;span&gt; apb_bus.clk);
&lt;/span&gt;&lt;span&gt; 35&lt;/span&gt;             #&lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 36&lt;/span&gt;             apb_bus.sel = &lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 37&lt;/span&gt;             apb_bus.write = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 38&lt;/span&gt;             apb_bus.addr =&lt;span&gt; address;
&lt;/span&gt;&lt;span&gt; 39&lt;/span&gt; &lt;span&gt;            #T;
&lt;/span&gt;&lt;span&gt; 40&lt;/span&gt;             apb_bus.enable = &lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 41&lt;/span&gt; &lt;span&gt;            #T;
&lt;/span&gt;&lt;span&gt; 42&lt;/span&gt;             data_r =&lt;span&gt; apb_bus.rdata;
&lt;/span&gt;&lt;span&gt; 43&lt;/span&gt; &lt;span&gt;            init_en();
&lt;/span&gt;&lt;span&gt; 44&lt;/span&gt; &lt;span&gt;        endtask
&lt;/span&gt;&lt;span&gt; 45&lt;/span&gt; &lt;span&gt;    endclass
&lt;/span&gt;&lt;span&gt; 46&lt;/span&gt; 
&lt;span&gt; 47&lt;/span&gt; &lt;span&gt;    typedef class Config;
&lt;/span&gt;&lt;span&gt; 48&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;Generator&lt;/span&gt;
&lt;span&gt; 49&lt;/span&gt; &lt;span&gt;    class Request; 
&lt;/span&gt;&lt;span&gt; 50&lt;/span&gt; &lt;span&gt;        data_t data_w;
&lt;/span&gt;&lt;span&gt; 51&lt;/span&gt; &lt;span&gt;        data_t data_r;
&lt;/span&gt;&lt;span&gt; 52&lt;/span&gt; &lt;span&gt;        Initiator initiator;
&lt;/span&gt;&lt;span&gt; 53&lt;/span&gt;         
&lt;span&gt; 54&lt;/span&gt;         &lt;span&gt;function&lt;/span&gt;&lt;span&gt; new();
&lt;/span&gt;&lt;span&gt; 55&lt;/span&gt;             data_w = &lt;span&gt;32&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;h1234_5678;//32&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;b0001_0010_0011_0100_0101_0110_0111_1000
&lt;/span&gt;&lt;span&gt; 56&lt;/span&gt;             initiator =&lt;span&gt; new();
&lt;/span&gt;&lt;span&gt; 57&lt;/span&gt; &lt;span&gt;            clear_req();
&lt;/span&gt;&lt;span&gt; 58&lt;/span&gt;         &lt;span&gt;endfunction&lt;/span&gt;
&lt;span&gt; 59&lt;/span&gt;         
&lt;span&gt; 60&lt;/span&gt;         &lt;span&gt;function&lt;/span&gt;&lt;span&gt; void clear_req();
&lt;/span&gt;&lt;span&gt; 61&lt;/span&gt; &lt;span&gt;            initiator.init_en();
&lt;/span&gt;&lt;span&gt; 62&lt;/span&gt;         &lt;span&gt;endfunction&lt;/span&gt;
&lt;span&gt; 63&lt;/span&gt;         
&lt;span&gt; 64&lt;/span&gt;         &lt;span&gt;task&lt;/span&gt;&lt;span&gt; configure_reg(data_t data_reg_config,data_t data_reg_timeout);
&lt;/span&gt;&lt;span&gt; 65&lt;/span&gt; &lt;span&gt;            initiator.write_oper(ADDR_REG_CONFIG,data_reg_config);
&lt;/span&gt;&lt;span&gt; 66&lt;/span&gt;             #(T*&lt;span&gt;10&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 67&lt;/span&gt; &lt;span&gt;            initiator.write_oper(ADD_REG_TIMEOUT,data_reg_timeout);
&lt;/span&gt;&lt;span&gt; 68&lt;/span&gt; &lt;span&gt;        endtask
&lt;/span&gt;&lt;span&gt; 69&lt;/span&gt;         
&lt;span&gt; 70&lt;/span&gt;         &lt;span&gt;task&lt;/span&gt;&lt;span&gt; write_data(data_t data_w);
&lt;/span&gt;&lt;span&gt; 71&lt;/span&gt; &lt;span&gt;            initiator.write_oper(ADDR_TX_FIFO,data_w);
&lt;/span&gt;&lt;span&gt; 72&lt;/span&gt; &lt;span&gt;        endtask
&lt;/span&gt;&lt;span&gt; 73&lt;/span&gt;         
&lt;span&gt; 74&lt;/span&gt;         &lt;span&gt;task&lt;/span&gt; read_data(&lt;span&gt;output&lt;/span&gt;&lt;span&gt; data_t data_r);
&lt;/span&gt;&lt;span&gt; 75&lt;/span&gt; &lt;span&gt;            initiator.read_oper(ADDR_RX_FIFO,data_r);
&lt;/span&gt;&lt;span&gt; 76&lt;/span&gt; &lt;span&gt;        endtask
&lt;/span&gt;&lt;span&gt; 77&lt;/span&gt;         
&lt;span&gt; 78&lt;/span&gt;         &lt;span&gt;task&lt;/span&gt;&lt;span&gt; req_run(Config req_config);
&lt;/span&gt;&lt;span&gt; 79&lt;/span&gt;             &lt;span&gt;if&lt;/span&gt;(req_config.config_type == CONFIG_WR_DATA)&lt;span&gt;begin&lt;/span&gt;
&lt;span&gt; 80&lt;/span&gt;                 configure_reg(data_t&lt;span&gt;'&lt;/span&gt;&lt;span&gt;({30&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;d10,WRI_EN}),data_t&lt;span&gt;'&lt;/span&gt;&lt;span&gt;(32&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;d10000));
&lt;/span&gt;&lt;span&gt; 81&lt;/span&gt; &lt;span&gt;                write_data(data_w);
&lt;/span&gt;&lt;span&gt; 82&lt;/span&gt;             &lt;span&gt;end&lt;/span&gt;
&lt;span&gt; 83&lt;/span&gt;             &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt;(req_config.config_type == CONFIG_RD_DATA)&lt;span&gt;begin&lt;/span&gt;
&lt;span&gt; 84&lt;/span&gt;                 configure_reg(data_t&lt;span&gt;'&lt;/span&gt;&lt;span&gt;({30&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;d10,RD_EN}),data_t&lt;span&gt;'&lt;/span&gt;&lt;span&gt;(32&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;d10000));
&lt;/span&gt;&lt;span&gt; 85&lt;/span&gt; &lt;span&gt;                read_data(data_r);
&lt;/span&gt;&lt;span&gt; 86&lt;/span&gt;             &lt;span&gt;end&lt;/span&gt;
&lt;span&gt; 87&lt;/span&gt; &lt;span&gt;        endtask
&lt;/span&gt;&lt;span&gt; 88&lt;/span&gt;     
&lt;span&gt; 89&lt;/span&gt; &lt;span&gt;    endclass:Request
&lt;/span&gt;&lt;span&gt; 90&lt;/span&gt;     
&lt;span&gt; 91&lt;/span&gt; &lt;span&gt;    class Config;
&lt;/span&gt;&lt;span&gt; 92&lt;/span&gt; &lt;span&gt;        config_type_t config_type;
&lt;/span&gt;&lt;span&gt; 93&lt;/span&gt;         
&lt;span&gt; 94&lt;/span&gt;         &lt;span&gt;function&lt;/span&gt; new(config_type_t config_type=&lt;span&gt;CONFIG_RD_DATA);
&lt;/span&gt;&lt;span&gt; 95&lt;/span&gt;             this.config_type =&lt;span&gt; config_type;
&lt;/span&gt;&lt;span&gt; 96&lt;/span&gt;         &lt;span&gt;endfunction&lt;/span&gt;
&lt;span&gt; 97&lt;/span&gt;         
&lt;span&gt; 98&lt;/span&gt; &lt;span&gt;    endclass:Config
&lt;/span&gt;&lt;span&gt; 99&lt;/span&gt;     
&lt;span&gt;100&lt;/span&gt; &lt;span&gt;    class Monitor;
&lt;/span&gt;&lt;span&gt;101&lt;/span&gt; 
&lt;span&gt;102&lt;/span&gt; &lt;span&gt;        mailbox #(data_t) mb_data_i2c_tx;
&lt;/span&gt;&lt;span&gt;103&lt;/span&gt; &lt;span&gt;        mailbox #(data_t) mb_data_tx;
&lt;/span&gt;&lt;span&gt;104&lt;/span&gt;         
&lt;span&gt;105&lt;/span&gt;         &lt;span&gt;function&lt;/span&gt;&lt;span&gt; new(mailbox mb1,mailbox mb2);
&lt;/span&gt;&lt;span&gt;106&lt;/span&gt;             this.mb_data_i2c_tx =&lt;span&gt; mb1;
&lt;/span&gt;&lt;span&gt;107&lt;/span&gt;             this.mb_data_tx =&lt;span&gt; mb2;
&lt;/span&gt;&lt;span&gt;108&lt;/span&gt;         &lt;span&gt;endfunction&lt;/span&gt;
&lt;span&gt;109&lt;/span&gt;         
&lt;span&gt;110&lt;/span&gt;         &lt;span&gt;task&lt;/span&gt;&lt;span&gt; store_res_tx();
&lt;/span&gt;&lt;span&gt;111&lt;/span&gt;             &lt;span&gt;wait&lt;/span&gt;&lt;span&gt;(event_tx_i2c_vld);
&lt;/span&gt;&lt;span&gt;112&lt;/span&gt;             #(T/&lt;span&gt;2.0&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;113&lt;/span&gt; &lt;span&gt;            mb_data_i2c_tx.put(data_tx_i2c);
&lt;/span&gt;&lt;span&gt;114&lt;/span&gt;             $display(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;store_res_tx:MAILBOX PUT:'h%h&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,data_tx_i2c);
&lt;/span&gt;&lt;span&gt;115&lt;/span&gt; &lt;span&gt;        endtask
&lt;/span&gt;&lt;span&gt;116&lt;/span&gt;         
&lt;span&gt;117&lt;/span&gt;         &lt;span&gt;task&lt;/span&gt;&lt;span&gt; store_source_tx();
&lt;/span&gt;&lt;span&gt;118&lt;/span&gt;             &lt;span&gt;wait&lt;/span&gt;&lt;span&gt;(event_tx_vld);
&lt;/span&gt;&lt;span&gt;119&lt;/span&gt;             #(T/&lt;span&gt;2.0&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;120&lt;/span&gt; &lt;span&gt;            mb_data_tx.put(apb_bus.wdata);
&lt;/span&gt;&lt;span&gt;121&lt;/span&gt;             $display(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;store_source_tx:MAILBOX PUT:'h%h&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,apb_bus.wdata);
&lt;/span&gt;&lt;span&gt;122&lt;/span&gt; &lt;span&gt;        endtask
&lt;/span&gt;&lt;span&gt;123&lt;/span&gt;         
&lt;span&gt;124&lt;/span&gt;         &lt;span&gt;task&lt;/span&gt;&lt;span&gt; mon_run();
&lt;/span&gt;&lt;span&gt;125&lt;/span&gt;             &lt;span&gt;fork&lt;/span&gt; 
&lt;span&gt;126&lt;/span&gt; &lt;span&gt;                store_res_tx();
&lt;/span&gt;&lt;span&gt;127&lt;/span&gt; &lt;span&gt;                store_source_tx();
&lt;/span&gt;&lt;span&gt;128&lt;/span&gt;             &lt;span&gt;join&lt;/span&gt;
&lt;span&gt;129&lt;/span&gt; &lt;span&gt;        endtask
&lt;/span&gt;&lt;span&gt;130&lt;/span&gt;     
&lt;span&gt;131&lt;/span&gt; &lt;span&gt;    endclass:Monitor
&lt;/span&gt;&lt;span&gt;132&lt;/span&gt;     
&lt;span&gt;133&lt;/span&gt; &lt;span&gt;    class Checker;
&lt;/span&gt;&lt;span&gt;134&lt;/span&gt;         &lt;span&gt;uint&lt;/span&gt;&lt;span&gt; cmp_cnt;
&lt;/span&gt;&lt;span&gt;135&lt;/span&gt;         &lt;span&gt;uint&lt;/span&gt;&lt;span&gt; err_cnt;
&lt;/span&gt;&lt;span&gt;136&lt;/span&gt; &lt;span&gt;        data_t data_A,data_B;
&lt;/span&gt;&lt;span&gt;137&lt;/span&gt; &lt;span&gt;        mailbox #(data_t) mb_data_A,mb_data_B;
&lt;/span&gt;&lt;span&gt;138&lt;/span&gt; &lt;span&gt;        sim_res_t check_res;
&lt;/span&gt;&lt;span&gt;139&lt;/span&gt;         
&lt;span&gt;140&lt;/span&gt;         &lt;span&gt;function&lt;/span&gt;&lt;span&gt; new(mailbox mb_A,mailbox mb_B);
&lt;/span&gt;&lt;span&gt;141&lt;/span&gt;             cmp_cnt = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;142&lt;/span&gt;             err_cnt = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;143&lt;/span&gt;             this.mb_data_A =&lt;span&gt; mb_A;
&lt;/span&gt;&lt;span&gt;144&lt;/span&gt;             this.mb_data_B =&lt;span&gt; mb_B;
&lt;/span&gt;&lt;span&gt;145&lt;/span&gt;         &lt;span&gt;endfunction&lt;/span&gt;
&lt;span&gt;146&lt;/span&gt;         
&lt;span&gt;147&lt;/span&gt;         &lt;span&gt;task&lt;/span&gt;&lt;span&gt; collect_res();
&lt;/span&gt;&lt;span&gt;148&lt;/span&gt; &lt;span&gt;            mb_data_A.get(this.data_A);
&lt;/span&gt;&lt;span&gt;149&lt;/span&gt; &lt;span&gt;            mb_data_B.get(this.data_B);
&lt;/span&gt;&lt;span&gt;150&lt;/span&gt;             $display(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;MAILBOX GET:'h%h, 'h%h&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,this.data_A,this.data_B);
&lt;/span&gt;&lt;span&gt;151&lt;/span&gt; &lt;span&gt;        endtask
&lt;/span&gt;&lt;span&gt;152&lt;/span&gt;         
&lt;span&gt;153&lt;/span&gt;         &lt;span&gt;function&lt;/span&gt;&lt;span&gt; sim_res_t compare(data_t dataA,data_t dataB);
&lt;/span&gt;&lt;span&gt;154&lt;/span&gt;             &lt;span&gt;if&lt;/span&gt;(dataA == dataB)&lt;span&gt;begin&lt;/span&gt;
&lt;span&gt;155&lt;/span&gt;                 check_res =&lt;span&gt; TRUE;
&lt;/span&gt;&lt;span&gt;156&lt;/span&gt;             &lt;span&gt;end&lt;/span&gt;
&lt;span&gt;157&lt;/span&gt;             &lt;span&gt;else&lt;/span&gt; &lt;span&gt;begin&lt;/span&gt;
&lt;span&gt;158&lt;/span&gt;                 err_cnt ++&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;159&lt;/span&gt;                 check_res =&lt;span&gt; FALSE;
&lt;/span&gt;&lt;span&gt;160&lt;/span&gt;             &lt;span&gt;end&lt;/span&gt;
&lt;span&gt;161&lt;/span&gt; &lt;span&gt;            return check_res;
&lt;/span&gt;&lt;span&gt;162&lt;/span&gt;         &lt;span&gt;endfunction&lt;/span&gt;
&lt;span&gt;163&lt;/span&gt;         
&lt;span&gt;164&lt;/span&gt;         &lt;span&gt;task&lt;/span&gt;&lt;span&gt; check_run();
&lt;/span&gt;&lt;span&gt;165&lt;/span&gt; &lt;span&gt;            sim_res_t check_res;
&lt;/span&gt;&lt;span&gt;166&lt;/span&gt; &lt;span&gt;            collect_res();
&lt;/span&gt;&lt;span&gt;167&lt;/span&gt;             check_res =&lt;span&gt; compare(data_A,data_B);
&lt;/span&gt;&lt;span&gt;168&lt;/span&gt;             &lt;span&gt;if&lt;/span&gt;(check_res ==&lt;span&gt; TRUE)
&lt;/span&gt;&lt;span&gt;169&lt;/span&gt;                 $display(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;RUN PASS&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;170&lt;/span&gt;             &lt;span&gt;else&lt;/span&gt;
&lt;span&gt;171&lt;/span&gt;                 $display(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;RUN FAIL&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;172&lt;/span&gt; &lt;span&gt;        endtask
&lt;/span&gt;&lt;span&gt;173&lt;/span&gt;     
&lt;span&gt;174&lt;/span&gt; &lt;span&gt;    endclass:Checker
&lt;/span&gt;&lt;span&gt;175&lt;/span&gt;     
&lt;span&gt;176&lt;/span&gt; &lt;span&gt;    class Environment;
&lt;/span&gt;&lt;span&gt;177&lt;/span&gt;         mailbox #(data_t) mb[&lt;span&gt;2&lt;/span&gt;&lt;span&gt;];
&lt;/span&gt;&lt;span&gt;178&lt;/span&gt; &lt;span&gt;        Checker chk;
&lt;/span&gt;&lt;span&gt;179&lt;/span&gt; &lt;span&gt;        Request req;
&lt;/span&gt;&lt;span&gt;180&lt;/span&gt; &lt;span&gt;        Monitor monitor;
&lt;/span&gt;&lt;span&gt;181&lt;/span&gt; &lt;span&gt;        Config req_config;
&lt;/span&gt;&lt;span&gt;182&lt;/span&gt;         
&lt;span&gt;183&lt;/span&gt;         &lt;span&gt;function&lt;/span&gt;&lt;span&gt; new();
&lt;/span&gt;&lt;span&gt;184&lt;/span&gt;             &lt;span&gt;uint&lt;/span&gt;&lt;span&gt; i;
&lt;/span&gt;&lt;span&gt;185&lt;/span&gt;             req_config =&lt;span&gt; new();
&lt;/span&gt;&lt;span&gt;186&lt;/span&gt;             req =&lt;span&gt; new();
&lt;/span&gt;&lt;span&gt;187&lt;/span&gt; &lt;span&gt;            foreach(mb[i])
&lt;/span&gt;&lt;span&gt;188&lt;/span&gt;                 mb[i] =&lt;span&gt; new();
&lt;/span&gt;&lt;span&gt;189&lt;/span&gt;             monitor = new(mb[&lt;span&gt;0&lt;/span&gt;],mb[&lt;span&gt;1&lt;/span&gt;&lt;span&gt;]);
&lt;/span&gt;&lt;span&gt;190&lt;/span&gt;             chk = new(mb[&lt;span&gt;0&lt;/span&gt;],mb[&lt;span&gt;1&lt;/span&gt;&lt;span&gt;]);
&lt;/span&gt;&lt;span&gt;191&lt;/span&gt;         &lt;span&gt;endfunction&lt;/span&gt;
&lt;span&gt;192&lt;/span&gt;         
&lt;span&gt;193&lt;/span&gt;         &lt;span&gt;task&lt;/span&gt;&lt;span&gt; env_run();
&lt;/span&gt;&lt;span&gt;194&lt;/span&gt;             &lt;span&gt;fork&lt;/span&gt;
&lt;span&gt;195&lt;/span&gt; &lt;span&gt;                req.req_run(req_config);
&lt;/span&gt;&lt;span&gt;196&lt;/span&gt; &lt;span&gt;                monitor.mon_run();
&lt;/span&gt;&lt;span&gt;197&lt;/span&gt;             &lt;span&gt;join&lt;/span&gt;
&lt;span&gt;198&lt;/span&gt; &lt;span&gt;            chk.check_run();
&lt;/span&gt;&lt;span&gt;199&lt;/span&gt; &lt;span&gt;        endtask
&lt;/span&gt;&lt;span&gt;200&lt;/span&gt;         
&lt;span&gt;201&lt;/span&gt; &lt;span&gt;    endclass:Environment
&lt;/span&gt;&lt;span&gt;202&lt;/span&gt;     
&lt;span&gt;203&lt;/span&gt; endpackage
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;components.sv&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('a33a67bf-01ba-4539-ab43-c6582dfcb6f3')&quot; readability=&quot;36.5&quot;&gt;&lt;img id=&quot;code_img_closed_a33a67bf-01ba-4539-ab43-c6582dfcb6f3&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_a33a67bf-01ba-4539-ab43-c6582dfcb6f3&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('a33a67bf-01ba-4539-ab43-c6582dfcb6f3',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_a33a67bf-01ba-4539-ab43-c6582dfcb6f3&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;68&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt;     &lt;span&gt;parameter&lt;/span&gt; T = &lt;span&gt;200&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt;     &lt;span&gt;parameter&lt;/span&gt; DATA_W = &lt;span&gt;32&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt;     
&lt;span&gt; 4&lt;/span&gt;     &lt;span&gt;parameter&lt;/span&gt; bit [&lt;span&gt;2&lt;/span&gt;-&lt;span&gt;1&lt;/span&gt;:&lt;span&gt;0&lt;/span&gt;] WRI_EN = &lt;span&gt;2&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;B01,&lt;/span&gt;
&lt;span&gt; 5&lt;/span&gt;                         RD_EN = &lt;span&gt;2&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;B10;&lt;/span&gt;
&lt;span&gt; 6&lt;/span&gt;     
&lt;span&gt; 7&lt;/span&gt;     typedef &lt;span&gt;int&lt;/span&gt; &lt;span&gt;unsigned&lt;/span&gt; &lt;span&gt;uint&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;ADDR_REG_CONFIG = 'd8,&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;configure register
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;ADD_REG_TIMEOUT = 'd12;&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;time before starting&lt;/span&gt;
&lt;span&gt;10&lt;/span&gt;     typedef enum &lt;span&gt;uint&lt;/span&gt; {ADDR_TX_FIFO = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;d0,ADDR_RX_FIFO = &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;d4,ADDR_REG_CONFIG = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;d8,ADD_REG_TIMEOUT = &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;d12} address_t;
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;     typedef enum &lt;span&gt;uint&lt;/span&gt;&lt;span&gt; {TRUE,FALSE} sim_res_t;
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;     typedef logic [DATA_W-&lt;span&gt;1&lt;/span&gt;:&lt;span&gt;0&lt;/span&gt;&lt;span&gt;] data_t;
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt; &lt;span&gt;    typedef struct {
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt; &lt;span&gt;    logic clk;
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt; &lt;span&gt;    logic write;
&lt;/span&gt;&lt;span&gt;16&lt;/span&gt; &lt;span&gt;    logic sel;
&lt;/span&gt;&lt;span&gt;17&lt;/span&gt; &lt;span&gt;    logic enable;
&lt;/span&gt;&lt;span&gt;18&lt;/span&gt; &lt;span&gt;    data_t wdata;
&lt;/span&gt;&lt;span&gt;19&lt;/span&gt; &lt;span&gt;    data_t rdata;
&lt;/span&gt;&lt;span&gt;20&lt;/span&gt; &lt;span&gt;    data_t addr;
&lt;/span&gt;&lt;span&gt;21&lt;/span&gt; &lt;span&gt;    logic ready;
&lt;/span&gt;&lt;span&gt;22&lt;/span&gt; &lt;span&gt;    logic slverr;
&lt;/span&gt;&lt;span&gt;23&lt;/span&gt; &lt;span&gt;    } apb_bus_t;
&lt;/span&gt;&lt;span&gt;24&lt;/span&gt;     
&lt;span&gt;25&lt;/span&gt; &lt;span&gt;    typedef enum {WR,RD} gen_t;
&lt;/span&gt;&lt;span&gt;26&lt;/span&gt;     typedef enum {CONFIG_WR_DATA,CONFIG_RD_DATA} config_type_t;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;defines.sv&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('a84bfce7-05b0-4aeb-ad56-82f2c52e9dcb')&quot; readability=&quot;38.5&quot;&gt;&lt;img id=&quot;code_img_closed_a84bfce7-05b0-4aeb-ad56-82f2c52e9dcb&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_a84bfce7-05b0-4aeb-ad56-82f2c52e9dcb&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('a84bfce7-05b0-4aeb-ad56-82f2c52e9dcb',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_a84bfce7-05b0-4aeb-ad56-82f2c52e9dcb&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;72&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; `timescale 1ns/&lt;span&gt;1ps
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; 
&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;module&lt;/span&gt;&lt;span&gt; i2c_slave
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; #(&lt;span&gt;parameter&lt;/span&gt; DATA_WIDTH=&lt;span&gt;32&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt; &lt;span&gt;(
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt; &lt;span&gt;input&lt;/span&gt;&lt;span&gt; clk,
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt; &lt;span&gt;input&lt;/span&gt;&lt;span&gt; scl,
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt; &lt;span&gt;inout&lt;/span&gt;&lt;span&gt; sda,
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt; &lt;span&gt;input&lt;/span&gt;&lt;span&gt; sda_master_en,
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt; 
&lt;span&gt;11&lt;/span&gt; &lt;span&gt;output&lt;/span&gt; logic [DATA_WIDTH-&lt;span&gt;1&lt;/span&gt;:&lt;span&gt;0&lt;/span&gt;] data_r,&lt;span&gt;//&lt;/span&gt;&lt;span&gt;master --&amp;gt; slave&lt;/span&gt;
&lt;span&gt;12&lt;/span&gt; &lt;span&gt;output&lt;/span&gt;&lt;span&gt; logic data_r_vld,
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt; &lt;span&gt;input&lt;/span&gt; [DATA_WIDTH-&lt;span&gt;1&lt;/span&gt;:&lt;span&gt;0&lt;/span&gt;&lt;span&gt;] data_w,
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt; &lt;span&gt;input&lt;/span&gt;&lt;span&gt; data_w_vld
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt; &lt;span&gt;);
&lt;/span&gt;&lt;span&gt;16&lt;/span&gt; 
&lt;span&gt;17&lt;/span&gt; &lt;span&gt;logic sda_r;
&lt;/span&gt;&lt;span&gt;18&lt;/span&gt; &lt;span&gt;logic sda_neg,sda_pos;
&lt;/span&gt;&lt;span&gt;19&lt;/span&gt; &lt;span&gt;logic cond_end,cond_start;
&lt;/span&gt;&lt;span&gt;20&lt;/span&gt; 
&lt;span&gt;21&lt;/span&gt; &lt;span&gt;assign&lt;/span&gt; sda = sda_master_en ? &lt;span&gt;1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;bz : 1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;b0;
&lt;/span&gt;&lt;span&gt;22&lt;/span&gt; 
&lt;span&gt;23&lt;/span&gt; &lt;span&gt;always&lt;/span&gt;@(&lt;span&gt;posedge&lt;/span&gt; clk)&lt;span&gt;begin&lt;/span&gt;
&lt;span&gt;24&lt;/span&gt;     sda_r &amp;lt;=&lt;span&gt; sda;
&lt;/span&gt;&lt;span&gt;25&lt;/span&gt; &lt;span&gt;end&lt;/span&gt;
&lt;span&gt;26&lt;/span&gt; &lt;span&gt;assign&lt;/span&gt; sda_neg = sda_r &amp;amp; ~&lt;span&gt;sda;
&lt;/span&gt;&lt;span&gt;27&lt;/span&gt; &lt;span&gt;assign&lt;/span&gt; sda_pos = ~sda_r &amp;amp;&lt;span&gt; sda;
&lt;/span&gt;&lt;span&gt;28&lt;/span&gt; 
&lt;span&gt;29&lt;/span&gt; &lt;span&gt;assign&lt;/span&gt; cond_start = sda_neg &amp;amp;&lt;span&gt; scl;
&lt;/span&gt;&lt;span&gt;30&lt;/span&gt; &lt;span&gt;assign&lt;/span&gt; cond_end = sda_pos &amp;amp;&lt;span&gt; scl;
&lt;/span&gt;&lt;span&gt;31&lt;/span&gt; 
&lt;span&gt;32&lt;/span&gt; &lt;span&gt;integer&lt;/span&gt; bit_index=&lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;33&lt;/span&gt; 
&lt;span&gt;34&lt;/span&gt; &lt;span&gt;always&lt;/span&gt;
&lt;span&gt;35&lt;/span&gt; &lt;span&gt;begin&lt;/span&gt;
&lt;span&gt;36&lt;/span&gt;     data_r_vld = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;37&lt;/span&gt;     &lt;span&gt;wait&lt;/span&gt;&lt;span&gt;(cond_start);
&lt;/span&gt;&lt;span&gt;38&lt;/span&gt;     $display(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;TRANSMISSION START&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;39&lt;/span&gt;     @(&lt;span&gt;posedge&lt;/span&gt;&lt;span&gt; scl);
&lt;/span&gt;&lt;span&gt;40&lt;/span&gt;     &lt;span&gt;while&lt;/span&gt;(bit_index &amp;lt; DATA_WIDTH)&lt;span&gt;begin&lt;/span&gt;
&lt;span&gt;41&lt;/span&gt;         @(&lt;span&gt;negedge&lt;/span&gt;&lt;span&gt; scl);
&lt;/span&gt;&lt;span&gt;42&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (sda_master_en)&lt;span&gt;begin&lt;/span&gt;
&lt;span&gt;43&lt;/span&gt;             @(&lt;span&gt;posedge&lt;/span&gt;&lt;span&gt; clk);
&lt;/span&gt;&lt;span&gt;44&lt;/span&gt;             data_r = {sda,data_r[DATA_WIDTH-&lt;span&gt;1&lt;/span&gt; -:DATA_WIDTH-&lt;span&gt;1&lt;/span&gt;&lt;span&gt;]};
&lt;/span&gt;&lt;span&gt;45&lt;/span&gt;             bit_index = bit_index+&lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;46&lt;/span&gt;             $display(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Get bit%d:%d&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,bit_index,sda);
&lt;/span&gt;&lt;span&gt;47&lt;/span&gt;         &lt;span&gt;end&lt;/span&gt;
&lt;span&gt;48&lt;/span&gt;     &lt;span&gt;end&lt;/span&gt;
&lt;span&gt;49&lt;/span&gt;     data_r_vld = &lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;50&lt;/span&gt;     &lt;span&gt;repeat&lt;/span&gt;(&lt;span&gt;10&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;51&lt;/span&gt;         @(&lt;span&gt;posedge&lt;/span&gt;&lt;span&gt; clk);
&lt;/span&gt;&lt;span&gt;52&lt;/span&gt;     data_r_vld = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;53&lt;/span&gt;     $display(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;TRANSMISSION END&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;54&lt;/span&gt;     bit_index = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;55&lt;/span&gt; &lt;span&gt;end&lt;/span&gt;
&lt;span&gt;56&lt;/span&gt; 
&lt;span&gt;57&lt;/span&gt; &lt;span&gt;endmodule&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;i2c_slave.sv&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('e9eca8d2-1608-489b-b23b-d37d53847c5c')&quot; readability=&quot;48&quot;&gt;&lt;img id=&quot;code_img_closed_e9eca8d2-1608-489b-b23b-d37d53847c5c&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_e9eca8d2-1608-489b-b23b-d37d53847c5c&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('e9eca8d2-1608-489b-b23b-d37d53847c5c',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_e9eca8d2-1608-489b-b23b-d37d53847c5c&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;91&quot;&gt;
&lt;pre&gt;
&lt;span&gt;  1&lt;/span&gt; `timescale 1ns/&lt;span&gt;1ps
&lt;/span&gt;&lt;span&gt;  2&lt;/span&gt; 
&lt;span&gt;  3&lt;/span&gt; import components::*&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;  4&lt;/span&gt; 
&lt;span&gt;  5&lt;/span&gt; 
&lt;span&gt;  6&lt;/span&gt; &lt;span&gt;module&lt;/span&gt;&lt;span&gt; testbench;
&lt;/span&gt;&lt;span&gt;  7&lt;/span&gt; 
&lt;span&gt;  8&lt;/span&gt; &lt;span&gt;logic pclk,presetn;
&lt;/span&gt;&lt;span&gt;  9&lt;/span&gt; logic [DATA_W-&lt;span&gt;1&lt;/span&gt;:&lt;span&gt;0&lt;/span&gt;&lt;span&gt;] paddr,pwdata,prdata;
&lt;/span&gt;&lt;span&gt; 10&lt;/span&gt; &lt;span&gt;logic pwrite,pselx,penable;
&lt;/span&gt;&lt;span&gt; 11&lt;/span&gt; &lt;span&gt;logic req_tx_vld;
&lt;/span&gt;&lt;span&gt; 12&lt;/span&gt; 
&lt;span&gt; 13&lt;/span&gt; &lt;span&gt;wire&lt;/span&gt;&lt;span&gt; pready,pslverr;
&lt;/span&gt;&lt;span&gt; 14&lt;/span&gt; &lt;span&gt;wire&lt;/span&gt;&lt;span&gt; int_rx,int_tx;
&lt;/span&gt;&lt;span&gt; 15&lt;/span&gt; &lt;span&gt;wire&lt;/span&gt;&lt;span&gt; sda_enable,scl_enable;
&lt;/span&gt;&lt;span&gt; 16&lt;/span&gt; &lt;span&gt;wire&lt;/span&gt;&lt;span&gt; scl;
&lt;/span&gt;&lt;span&gt; 17&lt;/span&gt; &lt;span&gt;wire&lt;/span&gt;&lt;span&gt; sda;
&lt;/span&gt;&lt;span&gt; 18&lt;/span&gt; 
&lt;span&gt; 19&lt;/span&gt; &lt;span&gt;wire&lt;/span&gt; [DATA_W-&lt;span&gt;1&lt;/span&gt;:&lt;span&gt;0&lt;/span&gt;&lt;span&gt;] data_r;
&lt;/span&gt;&lt;span&gt; 20&lt;/span&gt; &lt;span&gt;wire&lt;/span&gt;&lt;span&gt; data_r_vld;
&lt;/span&gt;&lt;span&gt; 21&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;apb_bus_t apb_bus;&lt;/span&gt;
&lt;span&gt; 22&lt;/span&gt; 
&lt;span&gt; 23&lt;/span&gt; &lt;span&gt;assign&lt;/span&gt; pwrite =&lt;span&gt; apb_bus.write; 
&lt;/span&gt;&lt;span&gt; 24&lt;/span&gt; &lt;span&gt;assign&lt;/span&gt; pselx =&lt;span&gt; apb_bus.sel;
&lt;/span&gt;&lt;span&gt; 25&lt;/span&gt; &lt;span&gt;assign&lt;/span&gt; penable =&lt;span&gt; apb_bus.enable;
&lt;/span&gt;&lt;span&gt; 26&lt;/span&gt; &lt;span&gt;assign&lt;/span&gt; pwdata =&lt;span&gt; apb_bus.wdata;
&lt;/span&gt;&lt;span&gt; 27&lt;/span&gt; &lt;span&gt;assign&lt;/span&gt; paddr =&lt;span&gt; apb_bus.addr;
&lt;/span&gt;&lt;span&gt; 28&lt;/span&gt; 
&lt;span&gt; 29&lt;/span&gt; &lt;span&gt;assign&lt;/span&gt; apb_bus.rdata =&lt;span&gt; prdata;
&lt;/span&gt;&lt;span&gt; 30&lt;/span&gt; &lt;span&gt;assign&lt;/span&gt; apb_bus.ready =&lt;span&gt; pready;
&lt;/span&gt;&lt;span&gt; 31&lt;/span&gt; &lt;span&gt;assign&lt;/span&gt; apb_bus.slverr =&lt;span&gt; pslverr;
&lt;/span&gt;&lt;span&gt; 32&lt;/span&gt; &lt;span&gt;assign&lt;/span&gt; apb_bus.clk =&lt;span&gt; pclk;
&lt;/span&gt;&lt;span&gt; 33&lt;/span&gt; 
&lt;span&gt; 34&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;logic event_tx_i2c_vld,event_tx_vld;&lt;/span&gt;
&lt;span&gt; 35&lt;/span&gt; &lt;span&gt;assign&lt;/span&gt; event_tx_vld     = req_tx_vld == &lt;span&gt;1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;b1;&lt;/span&gt;
&lt;span&gt; 36&lt;/span&gt; &lt;span&gt;assign&lt;/span&gt; event_tx_i2c_vld = data_r_vld == &lt;span&gt;1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;b1;&lt;/span&gt;
&lt;span&gt; 37&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;data_t data_tx_i2c;
&lt;/span&gt;&lt;span&gt; 38&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;logic data_tx_i2c_vld;&lt;/span&gt;
&lt;span&gt; 39&lt;/span&gt; &lt;span&gt;assign&lt;/span&gt; data_tx_i2c =&lt;span&gt; data_r;
&lt;/span&gt;&lt;span&gt; 40&lt;/span&gt; &lt;span&gt;assign&lt;/span&gt; data_tx_i2c_vld =&lt;span&gt; data_r_vld;
&lt;/span&gt;&lt;span&gt; 41&lt;/span&gt; 
&lt;span&gt; 42&lt;/span&gt; 
&lt;span&gt; 43&lt;/span&gt; &lt;span&gt;initial&lt;/span&gt; &lt;span&gt;begin&lt;/span&gt;
&lt;span&gt; 44&lt;/span&gt;     pclk = &lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 45&lt;/span&gt;     &lt;span&gt;forever&lt;/span&gt; &lt;span&gt;begin&lt;/span&gt;
&lt;span&gt; 46&lt;/span&gt;         #(T/&lt;span&gt;2.0&lt;/span&gt;) pclk = ~&lt;span&gt;pclk;
&lt;/span&gt;&lt;span&gt; 47&lt;/span&gt;     &lt;span&gt;end&lt;/span&gt;
&lt;span&gt; 48&lt;/span&gt; &lt;span&gt;end&lt;/span&gt;
&lt;span&gt; 49&lt;/span&gt; 
&lt;span&gt; 50&lt;/span&gt; &lt;span&gt;initial&lt;/span&gt; &lt;span&gt;begin&lt;/span&gt;
&lt;span&gt; 51&lt;/span&gt;     presetn = &lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 52&lt;/span&gt;     #&lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 53&lt;/span&gt;     presetn = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 54&lt;/span&gt;     #(T*&lt;span&gt;2&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 55&lt;/span&gt;     presetn = &lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 56&lt;/span&gt; &lt;span&gt;end&lt;/span&gt;
&lt;span&gt; 57&lt;/span&gt; 
&lt;span&gt; 58&lt;/span&gt; 
&lt;span&gt; 59&lt;/span&gt; &lt;span&gt;assign&lt;/span&gt; req_tx_vld = pselx &amp;amp; pwrite &amp;amp; penable &amp;amp; pready &amp;amp; ~pslverr &amp;amp; (paddr == ADDR_TX_FIFO || paddr ==&lt;span&gt; ADDR_RX_FIFO);
&lt;/span&gt;&lt;span&gt; 60&lt;/span&gt; 
&lt;span&gt; 61&lt;/span&gt; &lt;span&gt;Environment env;
&lt;/span&gt;&lt;span&gt; 62&lt;/span&gt; &lt;span&gt;Config req_config;
&lt;/span&gt;&lt;span&gt; 63&lt;/span&gt; &lt;span&gt;initial&lt;/span&gt; &lt;span&gt;begin&lt;/span&gt;
&lt;span&gt; 64&lt;/span&gt;     
&lt;span&gt; 65&lt;/span&gt;     env =&lt;span&gt; new();
&lt;/span&gt;&lt;span&gt; 66&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;req_config = new(CONFIG_WR_DATA);&lt;/span&gt;
&lt;span&gt; 67&lt;/span&gt;     req_config =&lt;span&gt; new(CONFIG_RD_DATA);
&lt;/span&gt;&lt;span&gt; 68&lt;/span&gt;     env.req_config =&lt;span&gt; req_config;
&lt;/span&gt;&lt;span&gt; 69&lt;/span&gt;     
&lt;span&gt; 70&lt;/span&gt;     #&lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 71&lt;/span&gt;     #(T*&lt;span&gt;2&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 72&lt;/span&gt;     
&lt;span&gt; 73&lt;/span&gt; &lt;span&gt;    env.env_run();
&lt;/span&gt;&lt;span&gt; 74&lt;/span&gt; &lt;span&gt;end&lt;/span&gt;
&lt;span&gt; 75&lt;/span&gt; &lt;span&gt;///////////////////////////&lt;/span&gt;      
&lt;span&gt; 76&lt;/span&gt; &lt;span&gt;i2c_slave 
&lt;/span&gt;&lt;span&gt; 77&lt;/span&gt; &lt;span&gt;#(.DATA_WIDTH(DATA_W))
&lt;/span&gt;&lt;span&gt; 78&lt;/span&gt; &lt;span&gt;i2c_slave_vip(
&lt;/span&gt;&lt;span&gt; 79&lt;/span&gt; &lt;span&gt;.clk            (pclk),
&lt;/span&gt;&lt;span&gt; 80&lt;/span&gt; &lt;span&gt;.scl            (scl),
&lt;/span&gt;&lt;span&gt; 81&lt;/span&gt; &lt;span&gt;.sda            (sda),
&lt;/span&gt;&lt;span&gt; 82&lt;/span&gt; &lt;span&gt;.sda_master_en  (sda_enable),
&lt;/span&gt;&lt;span&gt; 83&lt;/span&gt; &lt;span&gt;.data_r            (data_r),
&lt;/span&gt;&lt;span&gt; 84&lt;/span&gt; &lt;span&gt;.data_r_vld        (data_r_vld),
&lt;/span&gt;&lt;span&gt; 85&lt;/span&gt; &lt;span&gt;.data_w            (),
&lt;/span&gt;&lt;span&gt; 86&lt;/span&gt; &lt;span&gt;.data_w_vld        ()
&lt;/span&gt;&lt;span&gt; 87&lt;/span&gt; &lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 88&lt;/span&gt; 
&lt;span&gt; 89&lt;/span&gt; 
&lt;span&gt; 90&lt;/span&gt; &lt;span&gt;i2c DUT(
&lt;/span&gt;&lt;span&gt; 91&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;APB PORTS&lt;/span&gt;
&lt;span&gt; 92&lt;/span&gt; &lt;span&gt;    .PCLK            (pclk),
&lt;/span&gt;&lt;span&gt; 93&lt;/span&gt; &lt;span&gt;    .PRESETn        (presetn),
&lt;/span&gt;&lt;span&gt; 94&lt;/span&gt; &lt;span&gt;    .PADDR            (paddr),
&lt;/span&gt;&lt;span&gt; 95&lt;/span&gt; &lt;span&gt;    .PWDATA            (pwdata),
&lt;/span&gt;&lt;span&gt; 96&lt;/span&gt; &lt;span&gt;    .PWRITE            (pwrite),
&lt;/span&gt;&lt;span&gt; 97&lt;/span&gt; &lt;span&gt;    .PSELx            (pselx),
&lt;/span&gt;&lt;span&gt; 98&lt;/span&gt; &lt;span&gt;    .PENABLE        (penable),
&lt;/span&gt;&lt;span&gt; 99&lt;/span&gt; &lt;span&gt;    . PREADY        (pready),
&lt;/span&gt;&lt;span&gt;100&lt;/span&gt; &lt;span&gt;    . PSLVERR        (pslverr),
&lt;/span&gt;&lt;span&gt;101&lt;/span&gt; &lt;span&gt;    . INT_RX        (int_rx),    
&lt;/span&gt;&lt;span&gt;102&lt;/span&gt; &lt;span&gt;    . INT_TX        (int_tx),
&lt;/span&gt;&lt;span&gt;103&lt;/span&gt; &lt;span&gt;    . PRDATA        (prdata),
&lt;/span&gt;&lt;span&gt;104&lt;/span&gt; &lt;span&gt;    . SDA_ENABLE    (sda_enable),
&lt;/span&gt;&lt;span&gt;105&lt;/span&gt; &lt;span&gt;    . SCL_ENABLE    (scl_enable),
&lt;/span&gt;&lt;span&gt;106&lt;/span&gt; &lt;span&gt;    .SDA            (sda),
&lt;/span&gt;&lt;span&gt;107&lt;/span&gt; &lt;span&gt;    .SCL            (scl)    
&lt;/span&gt;&lt;span&gt;108&lt;/span&gt; 
&lt;span&gt;109&lt;/span&gt; &lt;span&gt;      );
&lt;/span&gt;&lt;span&gt;110&lt;/span&gt; 
&lt;span&gt;111&lt;/span&gt; &lt;span&gt;endmodule&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;testbench.sv&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;äº”ã€ä»¿çœŸåˆ†æ&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;ã€€ã€€&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;&lt;span&gt;å½“Configç±»å¯¹è±¡çš„é…ç½®å‚æ•°ä¸ºCONFIG_WR_DATAæ—¶ï¼Œgeneratorå‘èµ·å†™è¯·æ±‚ã€‚æ³¢å½¢å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1201289/202002/1201289-20200205182042099-1186020764.png&quot; alt=&quot;&quot; width=&quot;947&quot; height=&quot;224&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â ã€€ã€€&lt;span&gt;è§‚å¯Ÿæ‰“å°çš„Logå¯ä»¥çœ‹å‡ºæ¯ä¸ªSCLæ—¶é’Ÿå‘¨æœŸé‡‡é›†åˆ°ä¸€ä¸ªbitï¼ŒMAILBOXæ­£ç¡®ä¼ è¾“ï¼Œcheckerå¯¹æ¯”æ­£ç¡®ï¼Œæ•…è€Œä»¿çœŸPASSã€‚&lt;/span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1201289/202002/1201289-20200206184843128-1341662728.png&quot; alt=&quot;&quot; width=&quot;336&quot; height=&quot;657&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ã€€ã€€&lt;span&gt;éªŒè¯è¿‡ç¨‹ä¸­å‘ç°è¯¥æ¨¡å—æœ‰å¾ˆå¤šBUGï¼ï¼è¿™é‡Œä¸¾ä¸¤ä¸ªä¾‹å­ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;1 SDAä¸ºåŒå‘ç«¯å£ï¼Œä½†å½“sda_enableä¸º0æ—¶ï¼Œå¹¶æ²¡æœ‰èµ‹å€¼ä¸ºé«˜é˜»æ€ï¼Œå³é‡Šæ”¾ä¿¡å·çº¿æ§åˆ¶æƒç»™slaveã€‚åšå‡ºå¦‚ä¸‹ä¿®æ”¹å¹¶è®©VIPåœ¨ACKé˜¶æ®µæ‹‰ä½SDAã€‚&lt;/span&gt;&lt;br/&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1201289/202002/1201289-20200207093214961-442677054.png&quot; alt=&quot;&quot; width=&quot;644&quot; height=&quot;260&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â &lt;span&gt;2 SCLåœ¨è¯»æ“ä½œçŠ¶æ€æœºä¸­æ²¡æœ‰è¢«toggleï¼Œå› æ­¤configçš„é…ç½®å‚æ•°ä¸ºCONFIG_RD_DATAæ—¶SCLæ²¡æœ‰ç¿»è½¬ã€‚åœ¨è¯»æ“ä½œçŠ¶æ€æœºä¸­æ·»åŠ ç¿»è½¬é€»è¾‘ï¼Œä½¿BR_CLK_RX_Oä¿¡å·åœ¨counter_receive_data == clk_t_1_4æ—¶æ‹‰é«˜ï¼Œcounter_receive_data==clk_t_3_4æ—¶æ‹‰ä½ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1201289/202002/1201289-20200207215644075-802626151.png&quot; alt=&quot;&quot; width=&quot;713&quot; height=&quot;76&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â ã€€ã€€&lt;span&gt;æ³¢å½¢æ˜¾ç¤ºåœ¨è¯»æ“ä½œæ—¶SCLæ­£å¸¸ç¿»è½¬ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/i-beta/1201289/202002/1201289-20200207200615353-919487614.png&quot; alt=&quot;&quot; width=&quot;966&quot; height=&quot;276&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â ã€€ã€€&lt;span&gt;è¯¥æ¨¡å—çš„è¯»æ“ä½œå¾ˆå¤šåœ°æ–¹ä¸æ­£ç¡®è¿˜æœ‰å¾…ä¿®æ”¹ï¼Œå°±ä¸ä¸€ä¸€èµ˜è¿°äº†ã€‚æ€»çš„æ¥è¯´å°±æ˜¯æ ¹æœ¬ä¸èƒ½ç”¨o(â•¥ï¹â•¥)o ä¸æŠ±å¸Œæœ›äº†ï¼Œä¹‹åæˆ‘è¿˜æ˜¯è‡ªå·±å†™ä¸€ä¸ªå§ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;å…­ã€æ€»ç»“&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ã€€ã€€æœ¬æ–‡åˆ©ç”¨APB_I2Cæ¨¡å—ä¸ºä¾‹æ­å»ºäº†å±‚æ¬¡åŒ–éªŒè¯å¹³å°ï¼Œä½†è¿˜æœ‰å¾…æ”¹å–„ã€‚è¿™é‡Œåˆ—å‡ºå‡ ç‚¹ï¼š&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;1 æ²¡æœ‰å®Œå…¨åšåˆ°æµ‹è¯•ç”¨ä¾‹ä¸ç¯å¢ƒåˆ†ç¦»&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;2 æ²¡æœ‰æ„å»ºåœºæ™¯å±‚ç»™äºˆä¸°å¯Œçš„pattern&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;ä¸ƒã€å‚è€ƒ&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;1 ã€ŠSystemVerilogéªŒè¯â€”â€”æµ‹è¯•å¹³å°ç¼–å†™æŒ‡å—ã€‹&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;2 ã€ŠQuestaSim Tutorialã€‹&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;3 ã€ŠQuestaSim User Manualã€‹&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;4 ã€Šapbi2c_specã€‹&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;5Â &lt;/span&gt;Overview :: APB to I2C :: OpenCoresÂ &lt;strong&gt;&lt;em id=&quot;__mceDel&quot;&gt;https://opencores.org/projects/apbi2c&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;Â &lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
</description>
<pubDate>Fri, 07 Feb 2020 14:14:00 +0000</pubDate>
<dc:creator>æ²¡è½éª‘å£«</dc:creator>
<og:description>ä¸€ã€å‰è¨€ è¿‘æœŸç–«æƒ…ä¸¥é‡ï¼Œèº«ä¸ºç¤¾ç•œçš„æˆ‘åªèƒ½åœ¨å®¶ä¸­ç»§ç»­é’»ç ”æŠ€æœ¯äº†ã€‚ä¹‹å‰å†™è¿‡ä¸€ç¯‡å…³äºæ­å»ºFIFOéªŒè¯å¹³å°çš„åšæ–‡ï¼Œåˆ©ç”¨SVçš„OOPç‰¹æ€§å¯¹FIFOè¿›è¡Œåˆæ­¥éªŒè¯ï¼Œä½†æœ‰å¾ˆå¤šä¸è¶³ä¹‹å¤„ï¼Œæ¯”å¦‚ç»“æ„ä¸å¤Ÿè§„èŒƒã€éªŒè¯ç»„ä»¶ç±»ä¸ç‹¬</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/moluoqishi/p/12262434.html</dc:identifier>
</item>
</channel>
</rss>