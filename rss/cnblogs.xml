<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>åšå®¢å›­_é¦–é¡µ</title>
<link></link>
<description>ä»£ç æ”¹å˜ä¸–ç•Œ</description>
<item>
<title>ğŸ’•ã€Šç»™äº§å“ç»ç†è®²JVMã€‹ï¼šåƒåœ¾æ”¶é›†å™¨ - Viçš„æŠ€æœ¯åšå®¢</title>
<link>http://www.cnblogs.com/viyoung/p/12742241.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/viyoung/p/12742241.html</guid>
<description>&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span class=&quot;content&quot;&gt;å‰è¨€&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ä¸Šç¯‡ä¸­ï¼Œæˆ‘ä»¬æŠŠ JVM ä¸­çš„åƒåœ¾æ”¶é›†ç®—æ³•æœ‰äº†ä¸€ä¸ªå¤§æ¦‚çš„äº†è§£ï¼Œåˆæ˜¯ä¸€ä¸ªé˜´é›¨è¿ç»µçš„å‘¨æœ«ï¼Œå®…åœ¨å®¶é‡Œçš„æˆ‘ä»¬åˆå¼€å§‹äº†æ–°ä¸€è½®çš„å­¦ä¹ ï¼š&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“å¤§å¤§ï¼šä¸Šå‘¨æœ«æˆ‘ä»¬è¯´äº†åƒåœ¾æ”¶é›†ç®—æ³•ï¼Œä¸‹é¢æ˜¯ä¸æ˜¯è¦è®²ä¸€ä¸‹è¿™äº›ç®—æ³•çš„åº”ç”¨å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šå½“ç„¶ï¼Œå¦‚æœè¯´åƒåœ¾æ”¶é›†ç®—æ³•æ˜¯æ‰“ç‹—æ£’æ³•ï¼Œé‚£ä¹ˆåƒåœ¾æ”¶é›†å™¨å°±æ˜¯å†å±Šçš„ä¸å¸®å¸®ä¸»ä»¬ï¼Œä¸åŒçš„å¸®ä¸»é¢†æ‚Ÿåˆ°çš„è‡ªç„¶ä¹Ÿå°±ä¸åŒï¼Œæˆ‘å…ˆå¯¹è¿™äº›å¸®ä¸»è¿›è¡Œä¸€ä¸ªç®€å•çš„ä»‹ç»ï¼Œçœ‹å›¾ï¼&lt;/p&gt;
&lt;img src=&quot;http://viyoungblog.oss-cn-beijing.aliyuncs.com/viyoung/2020-03-26-142045.png&quot; alt=&quot;&quot;/&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šæˆ‘ä»å›æ”¶çš„åŒºåŸŸå»å¯¹åƒåœ¾æ”¶é›†å™¨è¿›è¡Œäº†ä¸€ä¸ªç®€å•çš„åˆ’åˆ†ï¼Œå¤§è‡´å¯ä»¥åˆ†ä¸ºè¿™æ ·ä¹ç§ï¼Œä¸‹é¢å°±ä¸”å¬æˆ‘ä¸ºä½ ä¸€ä¸€é“æ¥ã€‚&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“å¤§å¤§ï¼šå¥½å“’&lt;/p&gt;
&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span class=&quot;content&quot;&gt;Serial æ”¶é›†å™¨&lt;/span&gt;&lt;/h3&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šä¸‹é¢è¦è¯´çš„å°±æ˜¯ä¸€æ¬¾éå¸¸å¤è€çš„&lt;strong&gt;&lt;span&gt;ã€Œ&lt;/span&gt;æ–°ç”Ÿä»£æ”¶é›†å™¨&lt;span&gt;ã€&lt;/span&gt;&lt;/strong&gt;â€”â€” Serial æ”¶é›†å™¨ï¼Œå®ƒçš„å†å²å¯ä»¥è¿½æº¯åˆ° JDK è¿˜æ˜¯ä»¥1.xå‘½åçš„æ—¶ä»£ï¼ˆå¤§æ¦‚æ—¶é—´åœ¨æˆ‘äº”å²çš„æ—¶å€™ï¼Ÿ&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“å¤§å¤§ï¼šä» Serial è¿™ä¸ªåå­—ä¸Šå¯ä»¥çœ‹çš„å‡ºï¼Œè¿™åº”è¯¥æ˜¯ä¸€æ¬¾ä¸²è¡Œï¼ˆå•çº¿ç¨‹ï¼‰æ”¶é›†å™¨ï¼Œå¯¹å§ï¼Ÿ&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šæ²¡é”™ï¼ŒSerial æ”¶é›†å™¨æ˜¯ä¸€æ¬¾å•çº¿ç¨‹çš„æ”¶é›†å™¨ï¼Œå®ƒçš„æ”¶é›†è¿‡ç¨‹ä¹Ÿå¾ˆç®€å•ï¼ˆå¦‚ä¸‹å›¾ï¼‰ï¼Œè™½ç„¶å®ƒåªä¼šä½¿ç”¨ä¸€ä¸ªå¤„ç†å™¨æˆ–ä¸€æ¡çº¿ç¨‹å»æ”¶é›†åƒåœ¾ï¼Œä½†æ˜¯è¿™é‡Œæˆ‘ä¸å–œæ¬¢ç§°ä¹‹ä¸ºå•çº¿ç¨‹æ”¶é›†å™¨ï¼Œå®ƒæ›´é€‚åˆ&lt;strong&gt;&lt;span&gt;ã€Œ&lt;/span&gt;ä¸²è¡Œ&lt;span&gt;ã€&lt;/span&gt;&lt;/strong&gt;è¿™ä¸ªè¯ï¼Œå› ä¸ºå®ƒåœ¨è¿›è¡Œ GC çš„æ—¶å€™ï¼Œå¿…é¡»æš‚åœæ‰å…¶ä»–çš„çº¿ç¨‹ï¼ˆStop The Worldï¼ŒSTWï¼‰&lt;/p&gt;
&lt;img src=&quot;http://viyoungblog.oss-cn-beijing.aliyuncs.com/viyoung/2020-03-29-120946.png&quot; alt=&quot;&quot;/&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“å¤§å¤§ï¼šé‚£ä¹ˆè¿™ä¸ªæ”¶é›†å™¨æ˜¯ä¸æ˜¯å·²ç»åºŸå¼ƒæ‰äº†å•Šï¼Œä»…ä»…åœç•™åœ¨å†å²ä¸­ï¼Œä½œä¸ºä¸€ä¸ªå€¼å¾—å»çºªå¿µçš„ä¸œè¥¿ï¼Ÿ&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šå…¶å®ä¹Ÿå¹¶ä¸èƒ½è¿™ä¹ˆè¯´ï¼Œè™½ç„¶å®ƒç®€å•ï¼Œä½†æ˜¯ç®€å•æœ‰ç®€å•çš„å¥½å¤„ï¼Œå› ä¸ºå•çº¿ç¨‹ï¼Œæ‰€ä»¥æ²¡æœ‰åˆ‡æ¢çº¿ç¨‹çš„èµ„æºå¼€é”€ï¼Œæ‰€ä»¥åœ¨å•æ ¸CPUçš„ç¯å¢ƒä¸‹ï¼Œå®ƒçš„è¡¨ç°åè€Œä¼šæ˜¾å¾—æ›´åŠ ä¼˜ç§€ï¼Œåªèƒ½è¯´æ˜¯æ²¡æœ‰æœ€å¥½çš„æ”¶é›†å™¨ï¼Œåªæœ‰æœ€é€‚åˆçš„æ”¶é›†å™¨ï½&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“å¤§å¤§ï¼šé…±ç´«å“¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥è¯´ä¸‹ä¸€ä¸ªæ”¶é›†å™¨å§ï¼Œè¿™ä¸ªæˆ‘å·²ç»æœ‰ä¸€ä¸ªå¤§æ¦‚çš„äº†è§£äº†ï½&lt;/p&gt;
&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span class=&quot;content&quot;&gt;ParNew æ”¶é›†å™¨&lt;/span&gt;&lt;/h3&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šä¸‹ä¸€ä¸ªæ”¶é›†å™¨å•Šï¼Œå«åš ParNew æ”¶é›†å™¨ï¼Œè¿™ä¸ªæ”¶é›†å™¨å’Œä¸Šé¢æˆ‘ä»¬æ‰€è¯´çš„ Serial æ”¶é›†å™¨åŸºæœ¬ä¸Šä¸€æ¨¡ä¸€æ ·ï¼Œé™¤äº†å®ƒä¼šå¯åŠ¨å¤šä¸ªGCçº¿ç¨‹å»è¿›è¡Œåƒåœ¾çš„æ”¶é›†ï¼ˆå¹¶è¡Œæ”¶é›†ï¼‰&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“å¤§å¤§ï¼šå¹¶è¡Œï¼Ÿæˆ‘åªå¬è¿‡å¹¶å‘å“¦ã€‚ã€‚&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šå¹¶å‘æŒ‡çš„æ˜¯å·¥ä½œçº¿ç¨‹ä¸åƒåœ¾æ”¶é›†çº¿ç¨‹ä¹‹é—´çš„å…³ç³»ï¼Œè€Œå¹¶è¡ŒæŒ‡çš„æ˜¯å¤šæ¡åƒåœ¾æ”¶é›†çº¿ç¨‹ä¹‹é—´çš„å…³ç³»ï¼Œè¿™ä¸¤ä¸ªçš„æ¦‚å¿µæ˜¯ä¸ä¸€æ ·çš„ï¼Œå¹¶è¡Œçš„æ—¶å€™ï¼Œå·¥ä½œçº¿ç¨‹å¤„äºç­‰å¾…çŠ¶æ€ã€‚è€Œå¹¶å‘çš„æ—¶å€™ï¼Œå·¥ä½œçº¿ç¨‹å¤„äºæ´»åŠ¨çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“å¤§å¤§ï¼šé‚£ä¹ˆå®ƒå’Œ Serial æ”¶é›†å™¨æ¯”èµ·æ¥æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šåœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ï¼ŒSerial çš„ GC æ•ˆç‡æ˜¯è¦ä¼˜äºå®ƒçš„ï¼Œä½†æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå®ƒå¯¹äºåƒåœ¾æ”¶é›†æ—¶ç³»ç»Ÿèµ„æºçš„é«˜æ•ˆåˆ©ç”¨è¿˜æ˜¯å¾ˆæ˜¯é¢‡æœ‰æˆæ•ˆçš„ã€‚&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“å¤§å¤§ï¼šé‚£ä¹ˆå®ƒç°åœ¨è¿˜å¥½å˜›ï½&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šå®ƒåœ¨ HotSpot è™šæ‹Ÿæœºä¸­æ˜¯ç¬¬ä¸€æ¬¾é€€å‡ºäº†å†å²èˆå°çš„æ”¶é›†å™¨ï¼Œåœ¨ JDK 9 çš„æ—¶å€™ï¼ŒæŠŠå®ƒç­‰äºå¹¶å…¥äº† CMS æ”¶é›†å™¨ä¸­ï¼Œè€Œä¸”æ¥ä¸€ä¸ªå°å°çš„å‰§é€ã€‚ã€‚åœ¨ JDK 14 ä¸­ CMSä¹Ÿè¢«åˆ é™¤æ‰ï¼Œä»è¾‰ç…Œåˆ°è½å¹•ï¼Œæ­£å¼ç»“æŸäº†åœ¨æœåŠ¡ç«¯ç§°éœ¸çš„ç”Ÿæ¶¯ã€‚&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“å¤§å¤§ï¼šå¥½å¯æ€œï¼Œå‘œå‘œå‘œå‘œ&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šï¼Ÿï¼Ÿï¼Ÿåœæ­¢ä½ çš„è¡¨æ¼”ï¼Œæˆ‘ä»¬ç»§ç»­&lt;/p&gt;
&lt;img src=&quot;http://viyoungblog.oss-cn-beijing.aliyuncs.com/viyoung/2020-03-29-121132.png&quot; alt=&quot;&quot;/&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span class=&quot;content&quot;&gt;Parallel Scavenge æ”¶é›†å™¨&lt;/span&gt;&lt;/h3&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šä¸‹é¢è¦è¯´çš„è¿™ä¸ªä¹Ÿæ˜¯ä¸€ä¸ªæ–°ç”Ÿä»£çš„æ”¶é›†å™¨â€”â€”Parallel Scavenge æ”¶é›†å™¨ï¼Œä»è¡¨é¢ä¸Šæ¥çœ‹ï¼Œå®ƒå¥½åƒå’Œ ParNew æ”¶é›†å™¨ä¹‹é—´æ²¡æœ‰å¤ªå¤§çš„åŒºåˆ«ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦å®ƒå•ç‹¬åˆ—å‡ºæ¥å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“å¤§å¤§ï¼šè¿™æ˜¯åœ¨è€ƒæˆ‘å˜›ï¼Ÿ&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šè¯´è¯´çœ‹å’¯&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“å¤§å¤§ï¼šè™½ç„¶è¿™ä¿©è´§çœ‹èµ·æ¥å·®ä¸å¤šï¼Œä½†æ˜¯æˆ‘è§‰å¾—å°±åƒå¾®ä¿¡å’Œ QQ çš„åŒºåˆ«ä¸€æ ·ï¼Œè¿™ä¿©è´§è™½ç„¶çœ‹èµ·æ¥ä¹Ÿæ˜¯å¾ˆç±»ä¼¼ï¼Œä½†æ˜¯å®ƒä»¬çš„åŒºåˆ«å°±åœ¨äºä¾§é‡ç‚¹ä¸ä¸€æ ·ï¼Œç»†åˆ†å¸‚åœºçš„ä¸åŒä¼šè®©å®ƒä»¬è™½ç„¶æœ‰æ‰€å†²çªï¼Œä½†æ˜¯ä¸ä¼šæœ‰ä½ æ­»æˆ‘æ´»çš„é‚£æ ·æ¶æ€§çš„ç«äº‰å…³ç³»ï¼Œè€Œæ›´åå‘äºäº’è¡¥ï¼Œé˜´é˜³ç›¸ç”Ÿã€‚&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šè¯´çš„çœŸå¥½ï¼Œè¿™å˜´çœŸèƒ½å¿½æ‚ ï¼Œæ€ªä¸å¾—å¤©å¤©å¼€å‘å†™ä¸å®Œçš„éœ€æ±‚ï¼ˆé»˜é»˜ç¢ç¢å¿µä¸€ç™¾å¥&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šå®ƒæ›´ä¾§é‡äºååé‡ï¼Œååé‡çš„æ„æ€æ˜¯ä»€ä¹ˆå‘¢ï¼Œå®ƒå¹¶ä¸æ˜¯éå¸¸ Care æ¯æ¬¡STWçš„é—´éš”æ—¶é—´ï¼Œè€Œæ˜¯æ›´çœ‹é‡å¯¹èµ„æºçš„ä¸€ä¸ªæ•´ä½“åˆ©ç”¨ç‡ã€‚&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“å¤§å¤§ï¼šé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•å»æ§åˆ¶ååé‡å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šæœ‰è¿™ä¹ˆä¸¤ä¸ªå‚æ•°ï¼š-XXï¼šMaxGCPauseMillis å’Œ -XXï¼šGCTimeRatioã€‚ç¬¬ä¸€ä¸ªæ˜¯ç”¨æ¥æ§åˆ¶æ¯æ¬¡ STW çš„æ—¶é—´ï¼Œç¬¬äºŒä¸ªæ˜¯ç›´æ¥è®¾ç½®ååé‡çš„å¤§å°ï¼Œè¿˜æœ‰ä¸€ä¸ªå‚æ•°ï¼š-XXï¼š+UseAdaptiveSizePolicyï¼Œè¿™ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå¦‚æœå¼€å¯è¿™ä¸ªå¼€å…³ï¼Œè™šæ‹Ÿæœºä¼šè‡ªåŠ¨çš„å»è°ƒèŠ‚å‰ä¸¤ä¸ªå‚æ•°çš„å¤§å°ï¼Œå¯ä»¥è¾¾åˆ°ä¸€ä¸ªè‡ªé€‚åº”çš„æ•ˆæœã€‚è¿™ä¸ªå‚æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå…·æœ‰Parallel Scavengeç‰¹è‰²çš„ï¼ŒåŒºåˆ«äº ParNew çš„æ‰€åœ¨ã€‚&lt;/p&gt;
&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span class=&quot;content&quot;&gt;Serial Old æ”¶é›†å™¨&lt;/span&gt;&lt;/h3&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šæ–°ç”Ÿä»£çš„æ”¶é›†åˆ°è¿™å°±å‘Šä¸€æ®µè½äº†ï¼Œä¸‹é¢è¯´ä¸€ä¸‹è€å¹´ä»£çš„ä¸‰ä¸ªæ”¶é›†å™¨ï¼Œç¬¬ä¸€ä¸ªæ˜¯ Serial æ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬â€”â€”Serial Old æ”¶é›†å™¨ï¼Œå¦‚å…¶åé‚£æ ·ï¼Œå®ƒå’Œå®ƒçš„æ–°ç”Ÿä»£æ”¶é›†å™¨â€”â€” Serial æ”¶é›†å™¨ä¸€æ ·ï¼Œæ˜¯ä¸€ä¸ªå•çº¿ç¨‹çš„æ”¶é›†å™¨ï¼Œå’Œæ–°ç”Ÿä»£çš„ Serial ä¸åŒï¼Œå®ƒé‡‡ç”¨çš„æ˜¯æ ‡è®°æ•´ç†ç®—æ³•ã€‚&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“å¤§å¤§ï¼šè¿™æƒ…ä¾£ id å•§å•§ï¼Œæˆ‘å·²ç»æƒ³è±¡åˆ°äº†çœ‹åˆ°è¿™ä¿©åå­—çš„ç¨‹åºçŒ¿ï¼Œå†·å†·çš„ç‹—ç²®å¾€å˜´é‡Œèƒ¡ä¹±çš„å¡&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šå’³å’³ï¼Œè™½ç„¶è¿™ä¿©æ˜¯æƒ…ä¾£ id ï¼Œä½†æ˜¯å®ƒå¯ä»¥å’Œ Parallel Scavenge ç»„cpï¼Œè€Œä¸”å®ƒè¿˜æ˜¯ CMS çš„ä¸€ä¸ªå¤‡èƒã€‚ã€‚&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“å¤§å¤§ï¼šï¼Ÿï¼Ÿhetuiï¼Œç”·äººæ²¡æœ‰ä¸€ä¸ªå¥½ä¸œè¥¿ï¼Œä¸‹ä¸€ä¸ªå§ä¸‹ä¸€ä¸ª&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šï¼Ÿï¼Ÿï¼ˆå…³æˆ‘æ¯›äº‹å„¿ã€‚ã€‚äººåœ¨å®¶ä¸­åï¼Œé”…ä»å¤©ä¸Šæ¥&lt;/p&gt;
&lt;img src=&quot;http://viyoungblog.oss-cn-beijing.aliyuncs.com/viyoung/2020-03-29-121219.png&quot; alt=&quot;&quot;/&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span class=&quot;content&quot;&gt;Parallel Old æ”¶é›†å™¨&lt;/span&gt;&lt;/h3&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šå¥½äº†ï¼Œæˆ‘ä»¬ä¸æåˆšåˆšçš„é‚£ä¸ªå°æ’æ›²ï¼Œä¸‹é¢æˆ‘ä»¬æ¥è¯´ä¸€ä¸‹ Parellel Old è¿™æ¬¾è€å¹´ä»£çš„æ”¶é›†å™¨ï¼Œçœ‹è¿™ä¸ªåå­—ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“è¿™æ¬¾æ”¶é›†å™¨å’Œ Parellel Scavenge æ”¶é›†å™¨æ˜¯ä¸€å®¶å­ï¼Œå®ƒæ­£æ˜¯ Parallel Scanvenge çš„è€å¹´ä»£ç‰ˆæœ¬ï¼Œåœ¨å®ƒå‡ºç°ä¹‹å‰ï¼ŒSerial Old ä¸€ç›´å……å½“ç€ä»–çš„è§’è‰²ä¸ Parallel Scanvenge è¿›è¡Œé…åˆï¼Œä½†æ˜¯å®ƒå‡ºæ¥ä¹‹åï¼Œç®—æ˜¯æŠŠé‚£ä¸ªå°ä¸‰ç»™èµ¶èµ°äº†ï¼Œåæ¥å±…ä¸Šçš„æˆä¸ºäº†åŸé…ã€‚&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“å¤§å¤§ï¼šåŸæ¥è¿™ä¸ªå°±æ˜¯åŸé…å“¦ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœæˆ‘ä»¬çœ‹é‡ååé‡çš„è¯ï¼Œå°±å¯ä»¥ä½¿ç”¨å®ƒä»¬çš„ â€˜å¤«å¦»â€™ ç»„åˆå»å®Œæˆï¼ˆå¤«å¦»æ­é…ï¼Œå¹²æ´»ä¸ç´¯&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šæ˜¯è¿™æ ·çš„ï¼Œæ²¡é”™å‘¢ï¼Œä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸ªé‡é‡çº§çš„æ”¶é›†å™¨ï¼Œå®ƒåœ¨ JVM çš„åƒåœ¾æ”¶é›†å™¨å†å²ä¸­åˆ’ä¸‹äº†ä¸€ä¸ªæµ“å¢¨é‡å½©çš„ä¸€ç¬”ã€‚&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“å¤§å¤§ï¼šå¥½å•Šå¥½å•Šï½&lt;/p&gt;
&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span class=&quot;content&quot;&gt;CMS æ”¶é›†å™¨&lt;/span&gt;&lt;/h3&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šä¸‹é¢è¦ä»‹ç»çš„è¿™æ¬¾æ”¶é›†å™¨å«åšâ€”â€” CMSï¼ˆConcurrent Mark Sweepï¼‰æ”¶é›†å™¨ï¼Œä¸ºä»€ä¹ˆè¯´å®ƒæ˜¯ä¸€æ¬¾åˆ’æ—¶ä»£æ„ä¹‰çš„æ”¶é›†å™¨å‘¢ï¼Œå®ƒæ˜¯ç¬¬ä¸€æ¬¾å°†å¹¶å‘è¿™ä¸ªè¯è¯ é‡Šå‡ºæ„ä¹‰å¹¶è·å¾—å¤§èŒƒå›´çš„åº”ç”¨å’Œæ¨å¹¿çš„æ”¶é›†å™¨ï¼Œå°±æ˜¯è¯´ï¼Œå®ƒå¯ä»¥åšåˆ°ä¸€è¾¹ä¸¢åƒåœ¾ï¼Œä¸€è¾¹æ”¶åƒåœ¾ã€‚&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“å¤§å¤§ï¼šé‚£ä¹ˆå®ƒçš„è¿è¡Œæµç¨‹æ˜¯ä»€ä¹ˆå‘¢ï¼Œä¸€å®šå’Œå…¶ä»–æœ‰æ‰€ä¸åŒå§ï½&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šçœ‹å›¾ï½&lt;/p&gt;
&lt;img src=&quot;http://viyoungblog.oss-cn-beijing.aliyuncs.com/viyoung/2020-04-13-131933.png&quot; alt=&quot;&quot;/&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šé¦–å…ˆç”±å®ƒçš„åå­—æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œå®ƒæ˜¯åŸºäºæ ‡è®°â€”â€”æ¸…é™¤ç®—æ³•çš„ï¼Œè€Œå®ƒåˆ†ä¸ºäº†å››æ­¥èµ°ï¼š&lt;/p&gt;
&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;li&gt;
&lt;section&gt;åˆå§‹æ ‡è®°ï¼ˆè¿™ä¸€è¿‡ç¨‹è€—æ—¶å¾ˆçŸ­ï¼Œåªæ˜¯æ ‡è®°ä¸€ä¸‹GC Roots èƒ½ç›´æ¥å…³è”åˆ°çš„å¯¹è±¡&lt;/section&gt;&lt;/li&gt;
&lt;li&gt;
&lt;section&gt;å¹¶å‘æ ‡è®°ï¼ˆå’Œç”¨æˆ·çº¿ç¨‹ä¸€èµ·è¿è¡Œï¼Œè™½ç„¶è€—æ—¶è¾ƒé•¿ï¼Œä½†æ˜¯ä¸ä¼šé€ æˆSTW&lt;/section&gt;&lt;/li&gt;
&lt;li&gt;
&lt;section&gt;é‡æ–°æ ‡è®°ï¼ˆä¿®æ­£åœ¨å¹¶å‘æ ‡è®°è¿‡ç¨‹ä¸­çš„å˜åŠ¨ï¼Œè€—æ—¶æ¯”åˆå§‹é•¿ï¼Œä½†æ˜¯è¿œå°äºå¹¶å‘æ ‡è®°æ—¶é—´&lt;/section&gt;&lt;/li&gt;
&lt;li&gt;
&lt;section&gt;å¹¶å‘æ¸…é™¤ï¼ˆå’Œç”¨æˆ·çº¿ç¨‹ä¸€èµ·è¿è¡Œï¼Œè¿›è¡Œå¹¶å‘çš„æ¸…é™¤&lt;/section&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“å¤§å¤§ï¼šé‚£ä¹ˆ CMS æ—¢ç„¶è¿™ä¹ˆä¼˜ç§€ï¼Œæ˜¯ä¸æ˜¯æˆ‘ä»¬ä¸€ç›´éƒ½åœ¨ä½¿ç”¨è¿™ä¸ªå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šå¹¶ä¸ç„¶ï¼Œä¸€èˆ¬åˆ’æ—¶ä»£çš„ä¸‹åœºéƒ½ä¸ä¼šå¾ˆå¥½ï¼Œå› ä¸ºå®ƒå­˜åœ¨äº†ä¸‰ä¸ªé—®é¢˜ï¼š&lt;/p&gt;
&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;li&gt;
&lt;section&gt;å¯¹å¤„ç†å™¨çš„èµ„æºè€—è´¹è¾ƒå¤§ï¼Œæ¯”è¾ƒæ•æ„Ÿ&lt;/section&gt;&lt;/li&gt;
&lt;li&gt;
&lt;section&gt;åœ¨GCçš„è¿‡ç¨‹ä¸­ï¼Œå®¹æ˜“äº§ç”Ÿæ–°çš„åƒåœ¾ï¼Œæµ®åŠ¨åƒåœ¾çš„äº§ç”Ÿå¦‚æœå¯¼è‡´å¹¶å‘å¤±è´¥ï¼Œå°±ä¼šå¯ç”¨Serial Oldæ¥è¿›è¡Œï¼Œè¿™æ ·å°±å¾ˆæ…¢å¾ˆæ…¢äº†&lt;/section&gt;&lt;/li&gt;
&lt;li&gt;
&lt;section&gt;ç”±äºå®ƒæ˜¯åŸºäºæ ‡è®°â€”â€”æ¸…é™¤ç®—æ³•å®ç°çš„ï¼Œæ‰€ä»¥ä¼šäº§ç”Ÿä¸€äº›ç¢ç‰‡ç©ºé—´ï¼Œå½“ç¢ç‰‡ç©ºé—´ä¸è¶³ä»¥æ”¾ä¸‹å¯¹è±¡çš„æ—¶å€™ï¼Œå°±ä¼šè§¦å‘ Full GC&lt;/section&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“å¤§å¤§ï¼šé‚£ä¹ˆå®ƒç°åœ¨è¿™ä¹ˆæ ·äº†&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šå®ƒå•Šï¼Œåœ¨ JDK 9 ä¸­è¢«æ ‡è®°ä¸ºDeprecateï¼Œè€Œåœ¨æœ€æ–°æ›´æ–°çš„ JDK 14 ä¸­å½»åº•çš„é€€å‡ºäº†å†å²çš„èˆå°ï¼Œæ­¤æƒ…å¯å¾…æˆè¿½å¿†ï¼Œåªæ˜¯å½“æ—¶å·²æƒ˜ç„¶å•Šï½&lt;/p&gt;
&lt;img src=&quot;http://viyoungblog.oss-cn-beijing.aliyuncs.com/viyoung/2020-03-26-143035.png&quot; alt=&quot;image-20200326223034422&quot;/&gt;image-20200326223034422 &lt;img src=&quot;http://viyoungblog.oss-cn-beijing.aliyuncs.com/viyoung/2020-03-26-142929.png&quot; alt=&quot;&quot;/&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šä¸‹é¢æˆ‘æ¥ä»‹ç»ä¸€æ¬¾å½“ä¸‹æˆ‘ä»¬åœ¨ç”¨çš„æ”¶é›†å™¨å§ï¼Œä¹Ÿå°±æ˜¯é¼é¼å¤§åçš„ G1 æ”¶é›†å™¨ ï½&lt;/p&gt;
&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span class=&quot;content&quot;&gt;G1 æ”¶é›†å™¨&lt;/span&gt;&lt;/h3&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šGarbage First ä¹Ÿç§° G1ï¼Œå†·é…·çš„å¤–è¡¨ï¼Œæ— æƒ…çš„æ€§èƒ½ï¼Œè¶…å‰çš„è®¾è®¡ï¼Œç®€ç›´å°±æ˜¯ä¸€ä¸ªæœ¨å¾—æ„Ÿæƒ…çš„æ€æ‰‹ï¼ˆbiuï½&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“å¤§å¤§ï¼šè¯´äººè¯ï¼ˆæ‰‹åŠ¨å¾®ç¬‘è„¸&lt;/p&gt;
&lt;img src=&quot;http://viyoungblog.oss-cn-beijing.aliyuncs.com/viyoung/2020-04-18-093247.png&quot; alt=&quot;&quot;/&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼š G1 æ”¶é›†å™¨æ˜¯åˆä¸€ä¸ªé‡Œç¨‹ç¢‘æ„ä¹‰çš„æ”¶é›†å™¨ï¼Œå®ƒå¼€åˆ›äº†æ”¶é›†å™¨é¢å‘å±€éƒ¨æ”¶é›†çš„è®¾è®¡æ€è·¯å’ŒåŸºäºRegionçš„å†…å­˜å¸ƒå±€æ–¹å¼ã€‚&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“å¤§å¤§ï¼šæ­¤è¯æ€è§£ï¼Ÿ&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šåœ¨æˆ‘ä»¬ä¹‹å‰æ‰€äº†è§£çš„æ”¶é›†å™¨ä¸­ï¼Œæˆ‘ä»¬éƒ½æ˜¯åŸºäºå†…å­˜åˆ†ä»£ç†è®ºï¼ŒæŠŠå†…å­˜åŒºåŸŸåˆ†ä¸ºè€å¹´ä»£å’Œæ–°ç”Ÿä»£ï¼Œä¸åŒåŒºåŸŸçš„é‡‡ç”¨ä¸åŒçš„æ”¶é›†å™¨å»å®Œæˆï¼Œè€ŒG1é¢ è¦†äº†è¿™ä¸ªæ¦‚å¿µï¼Œå®ƒä¸å†å»åŒºåˆ†æ‰€è°“çš„è€å¹´ä»£å’Œæ–°ç”Ÿä»£ï¼Œè€Œæ˜¯é¢å‘å…¨å †è¿›è¡Œæ”¶é›†ï¼ŒæŠŠ Java å †åˆ’åˆ†ä¸ºå¤šä¸ªå¤§å°ç›¸ç­‰çš„ç‹¬ç«‹åŒºåŸŸï¼Œåœ¨è¿›è¡Œåƒåœ¾å›æ”¶çš„æ—¶å€™ï¼Œä¼šå°†éœ€è¦å›æ”¶çš„åŒºåŸŸç»„åˆæˆå›æ”¶é›†ï¼ˆCollection Setï¼‰ï¼Œå“ªå—å„¿å†…å­˜å­˜æ”¾çš„åƒåœ¾æ•°é‡æœ€å¤šï¼Œå›æ”¶æ”¶ç›Šæœ€å¤§ï¼Œä¼˜å…ˆå»å›æ”¶é‚£äº›æ”¶ç›Šæœ€å¤§çš„åŒºåŸŸï¼Œè¿™ä¹Ÿæ˜¯Garbage First è¿™ä¸ªåå­—çš„ç”±æ¥ï½&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“å¤§å¤§ï¼šé‚£ä¹ˆæˆ‘æœ‰ä¸€ä¸ªç–‘é—®ï¼Œå¦‚æœå¯¹è±¡çš„å¤§å°è¿‡äºåºå¤§ï¼Œä¸€ä¸ªåŒºåŸŸæ— æ³•æ”¾ä¸‹è¿™ä¸ªå¯¹è±¡çš„æ—¶å€™è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šé¦–å…ˆè¯´æ˜ä¸€ä¸‹ï¼Œè™½ç„¶åŒ–æ•´ä¸ºé›¶ï¼Œä½†æ˜¯ä»ç„¶ä¿å­˜äº†è€å¹´ä»£å’Œæ–°ç”Ÿä»£çš„æ¦‚å¿µï¼Œåªä¸è¿‡è¿™ä¸€å—å„¿ä¸æ˜¯ä¸€ä¸ªå›ºå®šçš„åŒºåŸŸäº†ï¼Œè€Œæ˜¯ä¸€ç³»åˆ—åŒºåŸŸçš„åŠ¨æ€é›†åˆï¼Œè€Œè¿™äº›å¤§å¯¹è±¡ä¼šè¢«å­˜æ”¾åœ¨ N ä¸ªè¿ç»­çš„ Humongous Region ä¸­ï¼Œè¿™äº› Region è¢«è§†ä¸ºè€å¹´ä»£çš„ä¸€éƒ¨åˆ†ï½&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“å¤§å¤§ï¼šé‚£ä¹ˆå’ŒCMSç›¸æ¯”èµ·æ¥ï¼Œå®ƒçš„ä¼˜åŠ¿åœ¨äºä»€ä¹ˆåœ°æ–¹å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šç›¸å¯¹äºCMSæ¥è¯´ï¼Œæœ€æ ¹æœ¬çš„ä¸€ç‚¹ï¼ŒCMSæ˜¯åŸºäºã€Œæ ‡è®°â€”â€”æ¸…é™¤ã€ç®—æ³•å®ç°çš„ï¼Œè€Œ G1 æ˜¯é€šè¿‡ã€Œæ ‡è®°â€”â€”æ•´ç†ã€ç®—æ³•ï¼Œæ¯ä¸ªåŒºåŸŸä¹‹é—´åˆæ˜¯é€šè¿‡ã€Œæ ‡è®°â€”â€”å¤åˆ¶ã€ç®—æ³•ï¼Œè¿™æ ·çš„åšæ³•ä¸ä¼šäº§ç”Ÿå¤§é‡çš„å†…å­˜ç¢ç‰‡ï¼Œå¯ä»¥ä½¿ç¨‹åºæ›´åŠ é•¿æ—¶é—´çš„ç¨³å®šè¿è¡Œï¼Œçœçš„å› ä¸ºå‡ºç°å¤§å¯¹è±¡æ— æ³•åˆ†é…è€Œå»è¿›è¡Œä¸‹ä¸€æ¬¡ Full GCã€‚&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“å¤§å¤§ï¼šé‚£ä¹ˆ G1 çš„ç¼ºç‚¹å…¶å®ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå®ƒçš„åŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œå¸¦æ¥çš„æ˜¯å¯¹å†…å­˜çš„è´Ÿè·å’Œå¯¹CPUçš„å‹åŠ›ï¼Œæ¯•ç«Ÿä¸–ç•Œä¸Šæ²¡æœ‰å…è´¹çš„åˆé¤ï½&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šæ²¡é”™å‘¢ï¼Œå› ä¸ºåœ¨å¤„ç†è·¨ Region å¼•ç”¨çš„æ—¶å€™ä½¿ç”¨çš„å¡è¡¨æŠ€æœ¯ï¼Œæ ‡è®°â€”â€”å¤åˆ¶ç®—æ³•è¿™äº›éƒ½ä¼šå¯¼è‡´å®ƒçš„å†…å­˜å‹åŠ›è¦æ¯”CMSé«˜20%ï¼Œä½†æ˜¯ä¸è®ºæ˜¯å¯¹äºå®ƒæ‰€å¸¦æ¥çš„æå‡å’Œçº¢åˆ©æ¥è¯´ï¼Œè¿˜æ˜¯å¯¹äºä¸€ä»£æ–°äººæ¢æ—§äººçš„å†å²å‘å±•æ¥è¯´ï¼Œæˆ‘ä»¬æ— ç–‘æ˜¯æ›´å€¾å‘äºå»é€‰æ‹© G1 çš„ï½&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“å¤§å¤§ï¼šå—¯å‘ï¼Œä¸‹é¢è¿˜æœ‰å˜›ï½&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šä¸‹é¢ç®€å•çš„ä»‹ç»ä¸¤æ¬¾å®éªŒè¿‡ç¨‹ä¸­çš„æ”¶é›†å™¨å§ï¼Œè™½ç„¶ä¸çŸ¥é“æœªæ¥å®ƒä»¬ä¼šæ€ä¹ˆæ ·ï¼Œä½†æ˜¯å®ƒä»¬å°±åƒå½“å¹´çš„ G1 çš„ä¸€æ ·ï¼Œæœªæ¥å¯æœŸï½&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“å¤§å¤§ï¼šå¥½çš„å‘¢ï½&lt;/p&gt;
&lt;img src=&quot;http://viyoungblog.oss-cn-beijing.aliyuncs.com/viyoung/2020-04-18-093640.png&quot; alt=&quot;&quot;/&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span class=&quot;content&quot;&gt;Shenandoah æ”¶é›†å™¨ &amp;amp;&amp;amp; ZGC æ”¶é›†å™¨&lt;/span&gt;&lt;/h3&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹è¿™ä¸¤æ¬¾ä½å»¶è¿Ÿæ”¶é›†å™¨ï¼Œåœ¨æˆ‘ä»¬çš„æ”¶é›†å™¨ä¸­ï¼Œä¸€èˆ¬ä¸»è¦è¯„åˆ¤çš„æ ‡å‡†æœ‰ä¸‰ç§ï¼šå†…å­˜å ç”¨ã€‚ååé‡ã€‚å»¶è¿Ÿï¼Œåœ¨è¿™ä¸‰è€…ä¹‹ä¸­ï¼Œæˆ‘ä»¬æœ€å¤šå¯ä»¥åœ¨ä¸¤ä¸ªä¹‹é—´åšåˆ°æè‡´ï¼Œéšç€æˆ‘ä»¬è®¡ç®—æœºç¡¬ä»¶çš„å‘å±•ï¼Œå†…å­˜å ç”¨æ…¢æ…¢æ²¡æœ‰é‚£ä¹ˆé‡è¦ï¼Œäººä»¬è¶Šæ¥è¶Šçœ‹é‡å»¶è¿Ÿï¼Œæ‰€ä»¥ä½å»¶è¿Ÿå°±ç§°ä¸ºæˆ‘ä»¬è¿½æ±‚çš„ç›®æ ‡ï¼Œè€Œè¿™ä¸¤æ¬¾æ”¶é›†å™¨å°±æ˜¯ä¸ºäº†è¾¾åˆ°GCåªéœ€ 10ms çš„ç›®æ ‡å»çš„ï½&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“å¤§å¤§ï¼šé‚£ä¹ˆå®ƒä»¬åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šä¸€ä¸ªå«åšShenandoahæ”¶é›†å™¨ï¼Œä¸€ä¸ªå«åšZGCæ”¶é›†å™¨ï¼Œå®ƒä»¬ä¸¤ä¸ªåŠŸèƒ½éå¸¸ç›¸ä¼¼ï¼Œåªä¸è¿‡ ZGC æ˜¯äº²ç”Ÿçš„ï¼Œè€ŒShenandoahæ˜¯æŠ±å…»çš„ï¼Œå®ƒä»¬éƒ½å¯ä»¥çœ‹ä½œæ˜¯ G1 çš„ç»§æ‰¿è€…ï¼ŒG1 åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¹Ÿå¯¹è¿™ä¸¤ä¸ªä»£ç æœ‰æ‰€å€Ÿé‰´å’Œæ”¹è¿›ã€‚&lt;/p&gt;
&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ï¼šZGC æ”¶é›†å™¨æ˜¯ä¸€æ¬¾åŸºäº Region å†…å­˜å¸ƒå±€çš„ï¼Œï¼ˆæš‚æ—¶ï¼‰ä¸è®¾åˆ†ä»£çš„ï¼Œä½¿ç”¨äº†è¯»å±éšœï¼ŒæŸ“è‰²æŒ‡é’ˆå’Œå†…å­˜å¤šé‡æ˜ å°„ç­‰æŠ€æœ¯æ¥å®ç°å¯å¹¶å‘çš„æ ‡è®°â€”â€”æ•´ç†ç®—æ³•çš„ï¼Œä»¥ä½å»¶è¿Ÿä¸ºé¦–è¦ç›®æ ‡çš„ä¸€æ¬¾åƒåœ¾æ”¶é›†å™¨ã€‚å®ƒçš„æŠ€æœ¯å®ç°ï¼Œæˆ‘è¿™é‡Œå°±ä¸å†è¯¦ç»†å»è®²äº†ï¼Œç­‰åˆ°å®ƒåº”ç”¨çš„æ¯”è¾ƒå¹¿æ³›çš„æ—¶å€™ï¼Œå†å»ç ”ç©¶ä¹Ÿä¸æ™šï½&lt;/p&gt;
&lt;img src=&quot;http://viyoungblog.oss-cn-beijing.aliyuncs.com/viyoung/2020-04-18-093327.png&quot; alt=&quot;&quot;/&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“å¤§å¤§ï¼šè¡Œå§ï½ é‚£æˆ‘ä»¬ä»Šå¤©åˆ°è¿™é‡Œï¼Œä¸‹æ¬¡æˆ‘ä»¬ç»§ç»­ï¼Œæˆ‘ä»¬ç°åœ¨å‡ºå»æ’¸ä¸²ï½&lt;/p&gt;
</description>
<pubDate>Tue, 21 Apr 2020 00:56:00 +0000</pubDate>
<dc:creator>Viçš„æŠ€æœ¯åšå®¢</dc:creator>
<og:description>å‰è¨€ åœ¨ä¸Šç¯‡ä¸­ï¼Œæˆ‘ä»¬æŠŠ JVM ä¸­çš„åƒåœ¾æ”¶é›†ç®—æ³•æœ‰äº†ä¸€ä¸ªå¤§æ¦‚çš„äº†è§£ï¼Œåˆæ˜¯ä¸€ä¸ªé˜´é›¨è¿ç»µçš„å‘¨æœ«ï¼Œå®…åœ¨å®¶é‡Œçš„æˆ‘ä»¬åˆå¼€å§‹äº†æ–°ä¸€è½®çš„å­¦ä¹ ï¼š äº§å“å¤§å¤§ï¼šä¸Šå‘¨æœ«æˆ‘ä»¬è¯´äº†åƒåœ¾æ”¶é›†ç®—æ³•ï¼Œä¸‹é¢æ˜¯ä¸æ˜¯è¦è®²ä¸€ä¸‹è¿™äº›ç®—æ³•çš„åº”ç”¨</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/viyoung/p/12742241.html</dc:identifier>
</item>
<item>
<title>æ­£åˆ™è¡¨è¾¾å¼çš„ç‚¹æ˜ŸåŒ¹é… - éƒ‘å·å¤§å­¦è€å¤§å”</title>
<link>http://www.cnblogs.com/zzalovelyq/p/12742243.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/zzalovelyq/p/12742243.html</guid>
<description>&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;#&lt;/span&gt;&lt;span&gt; -*- coding: utf-8 -*-&lt;/span&gt;
&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;
&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;Created on Mon Apr 20 22:51:44 2020
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; 
&lt;span&gt; 5&lt;/span&gt; &lt;span&gt;@author: 49594
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt; &lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;
&lt;span&gt; 7&lt;/span&gt; 
&lt;span&gt; 8&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; re
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt; a =&lt;span&gt; input()
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt; b =&lt;span&gt; input()
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt; m = re.search(b,a,re.I|&lt;span&gt;re.M)
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; m!=&lt;span&gt; None:
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt;     &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;True&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt; &lt;span&gt;else&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt;     &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;False&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ä¸ªäººåŸåˆ›ï¼ŒçŸ¥é“å¾ˆå¤šäººéœ€è¦ï¼Œç™¾åº¦ä¸Šæ²¡æœ‰ï¼Œæœ›ä¸å†è¢«ç§»å‡ºé¦–é¡µæ¨èåŒºï¼Œè°¢è°¢åšå®¢å›­åå°ç¨‹åºå°å“¥å“¥&lt;/p&gt;
&lt;p&gt;è½¬è½½è¯·æ³¨æ˜å‡ºå¤„&lt;/p&gt;
</description>
<pubDate>Tue, 21 Apr 2020 00:56:00 +0000</pubDate>
<dc:creator>éƒ‘å·å¤§å­¦è€å¤§å”</dc:creator>
<og:description>1 # -*- coding: utf-8 -*- 2 &amp;quot;&amp;quot;&amp;quot; 3 Created on Mon Apr 20 22:51:44 2020 4 5 @author: 49</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/zzalovelyq/p/12742243.html</dc:identifier>
</item>
<item>
<title>asp.net mvc æ¥æ”¶jquery ajaxå‘é€çš„æ•°ç»„å¯¹è±¡ - JxpStar</title>
<link>http://www.cnblogs.com/jxp0202/p/12742244.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/jxp0202/p/12742244.html</guid>
<description>[unable to retrieve full-text content]&lt;script type=&quot;text/javascript&quot;&gt; $(function () { var obj = { name: &quot;å†›éœ€å“&quot;, myclass: [{ one: 1, two: 2, three: 3 }, { one: 11, two: 22, three: 33 }, { on</description>
<pubDate>Tue, 21 Apr 2020 00:56:00 +0000</pubDate>
<dc:creator>JxpStar</dc:creator>
<dc:identifier>https://www.cnblogs.com/jxp0202/p/12742244.html</dc:identifier>
</item>
<item>
<title>ã€ç®€å•äº†è§£ç³»åˆ—ã€‘ä»åŸºç¡€çš„ä½¿ç”¨æ¥æ·±æŒ–HashMap - detectiveHLH</title>
<link>http://www.cnblogs.com/detectiveHLH/p/12742202.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/detectiveHLH/p/12742202.html</guid>
<description>&lt;h2 id=&quot;hhashmap&quot;&gt;&lt;span&gt;HashMapå®šä¹‰&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;è¯´çš„ä¸“ä¸šä¸€ç‚¹ï¼ŒHashMapæ˜¯å¸¸ç”¨çš„ç”¨äºå­˜å‚¨key-valueé”®å€¼å¯¹æ•°æ®çš„ä¸€ä¸ª&lt;strong&gt;é›†åˆ&lt;/strong&gt;ï¼Œåº•å±‚æ˜¯åŸºäºå¯¹&lt;strong&gt;Map&lt;/strong&gt;çš„æ¥å£å®ç°ã€‚æ¯ä¸€ä¸ªé”®å€¼å¯¹åˆå«&lt;strong&gt;Entry&lt;/strong&gt;ï¼Œè¿™äº›&lt;strong&gt;Entry&lt;/strong&gt;åˆ†æ•£çš„å­˜å‚¨åœ¨ä¸€ä¸ªç”±&lt;strong&gt;æ•°ç»„å’Œé“¾è¡¨&lt;/strong&gt;ç»„æˆçš„é›†åˆä¸­ã€‚å½“ç„¶åœ¨Java8ä¸­ï¼ŒEntryå˜æˆäº†&lt;strong&gt;Node&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;10&quot;&gt;
&lt;p&gt;è¯´çš„é€šä¿—ä¸€ç‚¹ï¼Œå°±åƒä½ å»ä½é…’åº—ï¼Œä½ ä¸‹å•æä¾›äº†ä½ çš„æ‰‹æœºå·ï¼Œç„¶ååˆ°é…’åº—äº†ç»™ä½ ä¸€ä¸ªæˆ¿å¡ï¼Œä½ çŸ¥é“äº†ä½ çš„æˆ¿å·ä¹‹åå†æ ¹æ®è¿™ä¸ªæˆ¿å·å»æ‰¾å¯¹åº”çš„æˆ¿é—´ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;æˆ¿å·å°±æ˜¯keyï¼Œæˆ¿é—´é‡Œå°±æ˜¯valueã€‚ä½ é€šè¿‡æ‰‹æœºå·ä¸‹å•åˆ°é…’åº—ç»™ä½ æˆ¿å·å¯ä»¥ç†è§£ä¸ºå¯¹keyå“ˆå¸Œçš„è¿‡ç¨‹ã€‚ä½ æ‰¾çš„è¿‡ç¨‹å°±æ˜¯HashMapæ ¹æ®keyå–åˆ°å¯¹åº”valueçš„è¿‡ç¨‹&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;hhashmap-1&quot;&gt;&lt;span&gt;HashMapåº•å±‚ç»“æ„&lt;/span&gt;&lt;/h2&gt;
&lt;h3 id=&quot;htable&quot;&gt;&lt;span&gt;tableæ•°ç»„&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ï¼Œæˆ‘ä»¬å­˜åœ¨HashMapä¸­çš„æ•°æ®æœ€ç»ˆæ˜¯å­˜äº†ä»€ä¹ˆåœ°æ–¹ï¼Œå°±æ˜¯å¦‚ä¸‹çš„ç»“æ„ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;bash language-bash hljs&quot;&gt;transient HashMap.Node&amp;lt;K, V&amp;gt;[] table;&lt;br/&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯èƒ½æœ‰äººçœ‹åˆ°transientæœ‰äº›é™Œç”Ÿï¼Œè¢«è¿™ä¸ªå…³é”®å­—ä¿®é¥°çš„å˜é‡å°†ä¸ä¼šè¢«åºåˆ—åŒ–ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯åºåˆ—åŒ–ä¹‹åè¿™ä¸ªå­—æ®µçš„å€¼å°±ä¼šè¢«å¹²æ‰ï¼Œç”¨äºä¸€äº›ä¸éœ€è¦ä¼ é€’ç»™ç¬¬ä¸‰æ–¹çš„å­—æ®µã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;10&quot;&gt;
&lt;p&gt;ä¾‹å¦‚ä¸€ä¸ªçŸ©å½¢ï¼Œåœ¨æœ¬åœ°ä½¿ç”¨çš„æ—¶å€™ï¼Œæœ‰é•¿ã€å®½å’Œé¢ç§¯ä¸‰ä¸ªå±æ€§ï¼Œä½†æ˜¯ä½ è¦æŠŠè¿™ä¸ªå¯¹è±¡ç»™ç¬¬ä¸‰æ–¹ç”¨ï¼Œä½†æ˜¯ç”±äºé¢ç§¯å¯ä»¥é€šè¿‡å¦å¤–ä¸¤ä¸ªå±æ€§æ¨å¯¼å‡ºæ¥ï¼Œè¿™ä¸ªkeyå°±ä¸éœ€è¦ä¼ é€’ç»™ç¬¬ä¸‰æ–¹äº†ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§æƒ…å†µå°±å¯ä»¥ç”¨transientå…³é”®å­—ä¿®é¥°ã€‚æ€»çš„æ¥è¯´å°±æ˜¯ï¼Œè¢«transientä¿®é¥°çš„å˜é‡å°†ä¸å†å‚ä¸åºåˆ—åŒ–ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;hnode&quot;&gt;&lt;span&gt;NodeèŠ‚ç‚¹&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;ä¸‹é¢æ˜¯NodeèŠ‚ç‚¹çš„å®šä¹‰ã€‚&lt;/p&gt;
&lt;pre readability=&quot;8.5&quot;&gt;
&lt;code class=&quot;java language-java hljs&quot; readability=&quot;11&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;hljs-class&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;Node&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;K&lt;/span&gt;, &lt;span class=&quot;hljs-title&quot;&gt;V&lt;/span&gt;&amp;gt; &lt;span class=&quot;hljs-keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;Entry&lt;/span&gt;&amp;lt;&lt;span class=&quot;hljs-title&quot;&gt;K&lt;/span&gt;, &lt;span class=&quot;hljs-title&quot;&gt;V&lt;/span&gt;&amp;gt; &lt;/span&gt;{&lt;br/&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;int&lt;/span&gt; hash;&lt;br/&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; K key;&lt;br/&gt;V value;&lt;br/&gt;Node&amp;lt;K,V&amp;gt; next;&lt;p&gt;Node(&lt;span class=&quot;hljs-keyword&quot;&gt;int&lt;/span&gt; hash, K key, V value, Node&amp;lt;K,V&amp;gt; next) {&lt;br/&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;.hash = hash;&lt;br/&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;.key = key;&lt;br/&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;.value = value;&lt;br/&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;.next = next;&lt;br/&gt;}&lt;/p&gt;&lt;p&gt;......&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; V &lt;span class=&quot;hljs-title&quot;&gt;getValue&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; value;&lt;br/&gt;}&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;final&lt;/span&gt; V &lt;span class=&quot;hljs-title&quot;&gt;setValue&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(V newValue)&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;V oldValue = value;&lt;br/&gt;value = newValue;&lt;br/&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; oldValue;&lt;br/&gt;}&lt;/p&gt;&lt;p&gt;......&lt;br/&gt;}&lt;br/&gt;&lt;/p&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸Šé¢çš„ä»£ç çœç•¥äº†ä¸€äº›&lt;strong&gt;Getter&lt;/strong&gt;å’Œ&lt;strong&gt;Setter&lt;/strong&gt;ï¼Œç»“æ„è¿˜æ˜¯éå¸¸æ¸…æ™°å’Œç®€å•ã€‚å¯ä»¥çœ‹åˆ°è¿™ä¸ªèŠ‚ç‚¹å­˜å‚¨äº†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„å¯¹è±¡çš„å¼•ç”¨ï¼Œå½¢æˆäº†ä¸€ä¸ªé“¾è¡¨çš„ç»“æ„ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆè¦ç”¨é“¾è¡¨ï¼Ÿç”¨æ•°ç»„ä¸è¡Œå—ï¼Ÿåˆšåˆšä¸Šé¢æåˆ°è¿‡ï¼Œè¿™ä¸ªé›†åˆæ˜¯ç”±é“¾è¡¨å’Œæ•°ç»„ç»„æˆçš„ã€‚å› ä¸ºå†å®Œç¾çš„hashç®—æ³•éƒ½æœ‰å¯èƒ½äº§ç”Ÿå“ˆå¸Œå†²çªï¼Œæ‰€ä»¥ä¸¤ä¸ªä¸åŒkeyçš„å…ƒç´ å¯ä»¥è¢«æ”¾åœ¨åŒä¸€ä¸ªåœ°æ–¹ã€‚&lt;/p&gt;
&lt;p&gt;è€Œå•ç”¨æ•°ç»„æ˜æ˜¾ä¸èƒ½æ»¡è¶³è¿™ä¸ªéœ€æ±‚ï¼Œè€Œåœ¨æ•°ç»„çš„æ§½ä½ä¸Šå­˜ä¸€ä¸ªé“¾è¡¨å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&quot;hhashmap-2&quot;&gt;&lt;span&gt;HashMapçš„ä½¿ç”¨&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;ä¸Šé¢ç®€å•äº†è§£äº†HashMapçš„å®šä¹‰å’ŒåŸºæœ¬çš„åº•å±‚æ•°æ®ç»“æ„ï¼Œæ¥ä¸‹æ¥é€šè¿‡HashMapåœ¨å¹³å¸¸å¼€å‘ä¸­çš„ä½¿ç”¨æ¥å…·ä½“çœ‹çœ‹æ€ä¹ˆå®ç°çš„ã€‚&lt;/p&gt;
&lt;pre readability=&quot;4.5&quot;&gt;
&lt;code class=&quot;java language-java hljs&quot; readability=&quot;3&quot;&gt;Map&amp;lt;String, String&amp;gt; map = &lt;span class=&quot;hljs-keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;&amp;gt;();&lt;p&gt;map.put(&lt;span class=&quot;hljs-string&quot;&gt;&quot;æœç´¢å…³æ³¨å…¬ä¼—å·&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;SHçš„å…¨æ ˆç¬”è®°&quot;&lt;/span&gt;); &lt;br/&gt;map.get(&lt;span class=&quot;hljs-string&quot;&gt;&quot;æœç´¢å…³æ³¨å…¬ä¼—å·&quot;&lt;/span&gt;);               &lt;br/&gt;&lt;/p&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;h&quot;&gt;&lt;span&gt;èµ‹å€¼&lt;/span&gt;&lt;/h2&gt;
&lt;h3 id=&quot;hput&quot;&gt;&lt;span&gt;putå‡½æ•°&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;ä¸Šé¢çš„Putæ–¹æ³•ï¼Œæˆ‘ä»¬ä¼ å…¥äº†ä¸¤ä¸ªå‚æ•°ï¼ŒKeyå’ŒValueï¼Œå‡½æ•°çš„å®šä¹‰å¦‚ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;java public V put(K key, V value) { return this.putVal(hash(key), key, value, false, true); }&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;åº”è¯¥è·Ÿå¤§å¤šæ•°äººYYçš„putæ–¹æ³•å·®ä¸å¤šï¼Œputæ–¹æ³•å†è°ƒç”¨äº†&lt;code&gt;putVal&lt;/code&gt; æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆç»è¿‡äº†hashä¹‹åçš„keyï¼Œæ˜¯ä¸€ä¸ªæ•´å‹çš„hashcodeï¼Œå…¶æ¬¡æ˜¯æˆ‘ä»¬ä¼ å…¥çš„keyå’Œvalueã€‚&lt;strong&gt;æœ€åä¸¤ä¸ªå¸ƒå°”å€¼ï¼Œåé¢ä¼šæåˆ°ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆä¸€è¿›å…¥putValå°±ä¼šå£°æ˜å­˜æ”¾æ•°æ®çš„tableï¼Œå¦‚æœè¿™ä¸ªHashMapæ˜¯é¦–æ¬¡è®¾ç½®å€¼ï¼Œå°±ä¼šè¢«åˆå§‹åŒ–ä¸€ä¸ªé»˜è®¤sizeçš„tableï¼Œä¸”æ‰€æœ‰å…ƒç´ çš„åˆå§‹å€¼éƒ½æ˜¯NULLï¼Œä¸‹é¢æ˜¯åˆå§‹åŒ–è¿™å—çš„æ ¸å¿ƒä»£ç ï¼Œæˆ‘çœç•¥æ‰äº†ä¸€äº›æ— å…³çš„å˜é‡å£°æ˜ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;æœ‰è¶£çš„æ˜¯ï¼Œåˆå§‹åŒ–è°ƒç”¨çš„æ˜¯&lt;code&gt;resize&lt;/code&gt;æ–¹æ³•ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre readability=&quot;4&quot;&gt;
&lt;code class=&quot;java language-java hljs&quot; readability=&quot;2&quot;&gt;Node&amp;lt;K,V&amp;gt;[] tab; &lt;br/&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;int&lt;/span&gt; n;&lt;br/&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;if&lt;/span&gt; ((tab = table) == &lt;span class=&quot;hljs-keyword&quot;&gt;null&lt;/span&gt; || (n = tab.length) == &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt;) {&lt;br/&gt;n = (tab = resize()).length;&lt;br/&gt;}&lt;p&gt;newCap = &lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;; &lt;br/&gt;newThr = &lt;span class=&quot;hljs-number&quot;&gt;12&lt;/span&gt;; &lt;br/&gt;&lt;/p&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;h16&quot;&gt;&lt;span&gt;é»˜è®¤å€¼ä¸ºå•¥æ˜¯16&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;ä¸Šé¢åˆå§‹åŒ–tableçš„é»˜è®¤sizeç»™çš„æ˜¯16ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±å®šä¹‰ï¼Œä½†æ˜¯å»ºè®®æ˜¯æœ€å¥½æ˜¯2çš„å¹‚ã€‚æœ‰çš„æœ‹ï¼ˆæ ï¼‰å‹ï¼ˆç²¾ï¼‰å°±è¦é—®äº†ï¼Œä¸ºä»€ä¹ˆæ˜¯16å‘¢ï¼Ÿæˆ‘13ï¼Œ14ä¸ä»–ä¸é¦™å—ï¼Ÿæˆ‘ä»¬æ¥ä¸‹æ¥å°±è¦åˆ†æä¸ºä»€ä¹ˆä¸é¦™ã€‚&lt;/p&gt;
&lt;p&gt;å½“æˆ‘ä»¬æ”¾å…ƒç´ è¿›å…¥mapçš„æ—¶å€™ï¼Œå®ƒæ˜¯å¦‚ä½•ç¡®å®šå…ƒç´ åœ¨tableæ•°ç»„ä¸­çš„ä½ç½®çš„å‘¢ï¼Ÿæˆ‘ä»¬æ‹¿&lt;code&gt;æœç´¢å…³æ³¨å…¬ä¼—å·&lt;/code&gt;è¿™ä¸ªkeyä¸¾ä¾‹ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;java language-java hljs&quot;&gt;hash = (h = key.hashCode()) ^ h &amp;gt;&amp;gt;&amp;gt; &lt;span class=&quot;hljs-number&quot;&gt;16&lt;/span&gt;&lt;br/&gt;p = tab[i = n - &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt; &amp;amp; hash]&lt;br/&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œæ˜¯å°†hashä¹‹åkeyå’Œæ•°ç»„çš„length-1åšä¸è¿ç®—å¾—åˆ°äº†ä¸€ä¸ªæ•°ç»„ä¸‹æ ‡ã€‚è€Œä¸”ï¼Œhashå€¼çš„äºŒè¿›åˆ¶çš„ä½æ•°ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹éƒ½ä¼šæ¯”tableçš„é•¿åº¦çš„äºŒè¿›åˆ¶ä½æ•°å¤šã€‚æ¢å¥è¯è¯´ï¼Œä¸è¿ç®—ä¹‹åå¾—åˆ°çš„æ•°ç»„ä¸‹æ ‡indexå®Œå…¨å–å†³äºhashå€¼çš„åå‡ ä½ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;d language-d&quot;&gt;16 // n   10000&lt;br/&gt;15 // n-1 1111&lt;br/&gt;14 //     1110&lt;br/&gt;13 //     1101&lt;br/&gt;12 //     1100&lt;br/&gt;11 //     1011&lt;br/&gt;10 //     1010&lt;br/&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä»13ã€14çš„äºŒè¿›åˆ¶å€¼å¯ä»¥çœ‹å‡ºæ¥ï¼Œå­˜åœ¨0å’Œ1åœ¨äºŒè¿›åˆ¶ä½æ•°ä¸Šåˆ†å¸ƒä¸å‡åŒ€çš„æƒ…å†µï¼Œè¿™æ ·ä¸€æ¥å°±ä¼šé€ æˆä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯ä¼šå­˜åœ¨æŸäº›&lt;strong&gt;ä¸åŒçš„hashå€¼&lt;/strong&gt;ç»è¿‡ä¸è¿ç®—å¾—åˆ°çš„å€¼æ˜¯&lt;strong&gt;ä¸€æ ·çš„&lt;/strong&gt;ã€‚è¿™æ ·å°±ä¼šå¯¼è‡´hashåˆ°çš„index&lt;strong&gt;ä¸å‡åŒ€&lt;/strong&gt;ï¼Œæ¢å¥è¯è¯´æœ‰äº›indexå¯èƒ½æ°¸è¿œéƒ½ä¸ä¼šè¢«hashåˆ°ï¼Œè€Œæœ‰äº›indexä¹Ÿè¢«é¢‘ç¹çš„hashåˆ°ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ¥hashç®—æ³•æ˜¯è¦æ±‚è®¡ç®—çš„ç»“æœè¦å‡åŒ€åˆ†å¸ƒçš„ï¼Œä½†æ˜¯ä¸Šè¿°çš„ç»“æœæ˜æ˜¾ä¸ç¬¦åˆå‡åŒ€åˆ†å¸ƒçš„è¦æ±‚ã€‚ç”¨n-1è€Œä¸ç”¨nä¹Ÿæ˜¯å› ä¸ºåŒæ ·çš„é“ç†ã€‚å¦‚æœè¿™ä¸ªå€¼æ˜¯2çš„å¹‚ï¼Œé‚£ä¹ˆ2çš„å¹‚çš„å€¼-1çš„æ‰€æœ‰äºŒè¿›åˆ¶ä½æ•°éƒ½æ˜¯1ï¼Œè¿™æ ·æœ‰åˆ©äºhashè®¡ç®—çš„å‡åŒ€åˆ†å¸ƒã€‚&lt;/p&gt;
&lt;p&gt;ç»¼ä¸Šæ‰€è¿°ï¼Œä¸ä¸€å®šæ˜¯16ï¼Œ&lt;strong&gt;2çš„å¹‚&lt;/strong&gt;éƒ½å¯ä»¥ï¼Œ16åªæ˜¯ä¸€ä¸ªç»éªŒå€¼ã€‚&lt;/p&gt;
&lt;h3 id=&quot;h-1&quot;&gt;&lt;span&gt;è‡ªåŠ¨æ‰©å®¹&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;é™¤äº†sizeï¼Œåˆå§‹åŒ–çš„æ—¶å€™è¿˜ä¼šè®¾å®šä¸€ä¸ªé˜ˆå€¼ï¼Œå€¼ä¸º12ï¼Œ&lt;code&gt;newThr = 12&lt;/code&gt;ï¼Œè¿™é‡Œéœ€è¦æåˆ°ä¸€ä¸ªæ¦‚å¿µ&lt;strong&gt;è´Ÿè½½å› å­&lt;/strong&gt;ï¼ŒHashMapçš„å®ç°é‡Œé»˜è®¤ç»™çš„æ˜¯0.75ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;java language-java hljs&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;hljs-title&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;()&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;.loadFactor = &lt;span class=&quot;hljs-number&quot;&gt;0.75F&lt;/span&gt;; &lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è´Ÿè½½å› å­æ˜¯ç”¨æ¥å¹²å˜›çš„å‘¢ï¼Ÿæœ€å¼€å§‹æˆ‘ä»¬æåˆ°äº†ï¼Œæœ€å¼€å§‹å­˜å‚¨çš„æ•°æ®ç»“æ„æ˜¯æ•°ç»„ï¼Œè¿™ç§åŸºç¡€ç»“æ„æ˜¯æœ‰sizeè®¾å®šçš„ã€‚å½“æˆ‘ä»¬ä¸åœçš„å¾€mapé‡Œå­˜æ•°æ®çš„æ—¶å€™ï¼Œæ€»ä¼šå­˜æ»¡ï¼Œå½“å…ƒç´ å¿«å­˜æ»¡çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦æ‰©å¤§mapçš„å®¹é‡ï¼Œæ¥å®¹çº³æ›´å¤šçš„å…ƒç´ ï¼Œè¿™å°±éœ€è¦ä¸€ä¸ª&lt;strong&gt;è‡ªåŠ¨æ‰©å®¹&lt;/strong&gt;çš„æœºåˆ¶äº†ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;ä¸æ˜¯æ‰©å®¹å¼¹åŒ£ï¼Œæƒ³å•¥å‘¢&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨å½“æ•°æ®é‡å¤§äºè¶…è¿‡è®¾å®šçš„é˜ˆå€¼çš„æ—¶å€™ï¼ˆå®¹é‡*è´Ÿè½½å› å­ï¼‰ï¼Œè‡ªåŠ¨å¯¹mapè¿›è¡Œæ‰©å®¹ï¼Œä»¥å­˜æ”¾æ›´å¤šçš„æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;è‡ªåŠ¨æ‰©å®¹åšäº†ä»€ä¹ˆäº‹æƒ…å‘¢ï¼Ÿæ€»ç»“æ¥è¯´å°±æ˜¯ä¸¤ä»¶äº‹ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;åˆ›å»ºæ–°çš„æ•°ç»„ï¼Œå¤§å°æ˜¯åŸæ¥æ•°ç»„çš„ä¸€å€ã€‚&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;å°†å…ƒç´ rehashåˆ°æ–°çš„æ•°ç»„&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä¸ºä»€ä¹ˆè¦&lt;strong&gt;rehash&lt;/strong&gt;å‘¢ï¼Ÿä¸Šé¢æˆ‘ä»¬æåˆ°è¿‡äº†ï¼Œå½“å…ƒç´ è¢«æ”¾è¿›mapæ—¶ï¼Œç¡®è®¤ä¸‹æ ‡çš„æ–¹æ³•æ˜¯&lt;strong&gt;tableçš„é•¿åº¦-1&lt;/strong&gt;å’Œ&lt;strong&gt;hashå€¼&lt;/strong&gt;åšä¸è¿ç®—ï¼Œç°åœ¨tableçš„é•¿åº¦å‘ç”Ÿäº†å˜åŒ–ï¼Œé‚£ä¹ˆè‡ªç„¶è€Œç„¶ï¼Œå…ƒç´ è·å–ä¸‹æ ‡çš„è¿ç®—ç»“æœä¹Ÿå°±è·Ÿä¹‹å‰çš„ä¸ä¸€æ ·äº†ï¼Œ æ‰€ä»¥éœ€è¦å°†è€çš„mapä¸­çš„å…ƒç´ å†æŒ‰ç…§æ–°çš„tableé•¿åº¦&lt;strong&gt;rehash&lt;/strong&gt;åˆ°æ‰©å®¹åçš„tableä¸­ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;æ‰€ä»¥åœ¨å½“ä½ å¯¹æ€§èƒ½æœ‰ä¸€å®šè¦æ±‚ï¼Œä¸”ä½ çŸ¥é“ä½ åˆ›å»ºmapçš„æ—¶å€™sizeçš„æ—¶å€™ï¼Œå¯ä»¥æŒ‡å®šsizeï¼Œè¿™æ ·ä¸€æ¥å°±ä¸ä¼šå› ä¸ºæ•°æ®é‡æŒç»­çš„å¢å¤§è€Œå»é¢‘ç¹çš„è‡ªåŠ¨æ‰©å®¹äº†&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;hput-1&quot;&gt;&lt;span&gt;putçš„è¿‡ç¨‹ä¸­åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆ&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;äº†è§£äº†&lt;strong&gt;åº•å±‚æ•°æ®ç»“æ„&lt;/strong&gt;å’Œ&lt;strong&gt;è‡ªåŠ¨æ‰©å®¹æœºåˆ¶&lt;/strong&gt;ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹putè¿‡ç¨‹ä¸­ç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆã€‚æˆ‘ä»¬ä¸Šé¢è¯´è¿‡äº†ï¼Œä¼šé€šè¿‡&lt;strong&gt;æ•°ç»„çš„é•¿åº¦-1&lt;/strong&gt;å’Œ&lt;strong&gt;hashå€¼&lt;/strong&gt;ä¸è¿ç®—å¾—åˆ°ä¸€ä¸ªæ•°ç»„ä¸‹æ ‡ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœè¯¥ä½ç½®æ²¡æœ‰å…ƒç´ ï¼Œé‚£ä¹ˆå°±å¾ˆç®€å•ï¼Œç›´æ¥æ–°å»ºä¸€ä¸ªèŠ‚ç‚¹å³å¯ç„¶åæ”¾ç½®åœ¨æ•°æ®çš„å…·ä½“ä½ç½®å³å¯ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;java language-java hljs&quot;&gt;tab[i] = &lt;span class=&quot;hljs-keyword&quot;&gt;this&lt;/span&gt;.newNode(hash, key, value, (HashMap.Node)&lt;span class=&quot;hljs-keyword&quot;&gt;null&lt;/span&gt;);&lt;br/&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä½†æ˜¯å¦‚æœè¯¥ä¸‹æ ‡å·²ç»æœ‰å…ƒç´ äº†ï¼Œè¿™ç§æƒ…å†µHashMapæ˜¯æ€ä¹ˆå¤„ç†çš„å‘¢ï¼Ÿè¿™ä¹Ÿè¦çœ‹æƒ…å†µã€‚&lt;/p&gt;
&lt;ul readability=&quot;5&quot;&gt;&lt;li readability=&quot;4&quot;&gt;
&lt;p&gt;å¦‚æœæ˜¯è·Ÿå½“å‰æ§½ä½ç›¸åŒçš„keyï¼Œå°±ç›´æ¥è¦†ç›–ã€‚è¿™å°±æ˜¯æˆ‘ä»¬ä¿®æ”¹æŸä¸ªkeyçš„å€¼ä¼šå‘ç”Ÿçš„æƒ…å†µã€‚é‚£HashMapæ€ä¹ˆæ¥åˆ¤æ–­æ˜¯ä¸æ˜¯åŒä¸€ä¸ªkeyå‘¢ï¼Ÿå°±åƒä¸‹é¢è¿™æ ·ã€‚&lt;code&gt;p&lt;/code&gt;å°±æ˜¯å½“å‰æ§½ä½ä¸Šå·²ç»æœ‰çš„å…ƒç´ ï¼Œå¦‚æœæ–°ã€è€å…ƒç´ çš„keyçš„&lt;strong&gt;hashCode&lt;/strong&gt;å’Œ&lt;strong&gt;å€¼&lt;/strong&gt;éƒ½ç›¸åŒ&lt;strong&gt;ä¸”keyä¸ä¸ºç©º&lt;/strong&gt;ï¼Œé‚£ä¹ˆå°±èƒ½è¯æ˜è¿™ä¸¤ä¸ªkeyæ˜¯ç›¸åŒçš„ï¼Œé‚£ä¹ˆæ­¤æ—¶åªéœ€è¦&lt;strong&gt;è¦†ç›–&lt;/strong&gt;å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;p.hash == hash &amp;amp;&amp;amp; ((k = p.key) == key || (key != null &amp;amp;&amp;amp; key.equals(k)))&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;è€Œå¦‚æœpæ˜¯&lt;code&gt;TreeNode&lt;/code&gt;çš„å®ä¾‹ï¼Œé‚£ä¹ˆå°±ä»£è¡¨å½“å‰æ§½ä½å·²ç»æ˜¯ä¸€ä¸ª&lt;strong&gt;çº¢é»‘æ ‘&lt;/strong&gt;äº†ï¼Œæ­¤æ—¶åªéœ€è¦å¾€è¿™ä¸ªæ ‘é‡Œ&lt;code&gt;putTreeVal&lt;/code&gt;å³å¯ã€‚è‡³äºä¸ºä»€ä¹ˆæ˜¯çº¢é»‘æ ‘ï¼Œå“ªå„¿æ¥çš„çº¢é»‘æ ‘ï¼Œä¸‹é¢é©¬ä¸Šå°±è¦è®²åˆ°äº†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;æœ€åä¸€ç§æƒ…å†µå°±æ˜¯ï¼Œæ—¢ä¸æ˜¯å·²ç»å­˜åœ¨çš„å…ƒç´ ä¹Ÿä¸æ˜¯TreeNodeçš„å®ä¾‹ï¼Œä¹Ÿä¸æ˜¯&lt;strong&gt;çº¢é»‘æ ‘&lt;/strong&gt;ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„Nodeã€‚ä½ å¯ä»¥ç†è§£ä¸ºé“¾è¡¨ï¼Œå¦‚æœhashå†²çªäº†ï¼Œå°±æŠŠè¿™ä¸ªNodeæ”¾åˆ°è¯¥ä½ç½®çš„&lt;strong&gt;é“¾è¡¨æœ«å°¾&lt;/strong&gt;ã€‚Java8ä¹‹å‰é‡‡ç”¨çš„&lt;strong&gt;å¤´æ’æ³•&lt;/strong&gt;ï¼Œè€ŒJava8æ¢æˆäº†&lt;strong&gt;å°¾æ’æ³•&lt;/strong&gt;ï¼Œè‡³äºä¸ºä»€ä¹ˆè¦æ¢ï¼Œåé¢ä¼šè®²ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;å½“è¯¥ä½ç½®çš„é“¾è¡¨ä¸­çš„å…ƒç´ è¶…è¿‡äº†&lt;code&gt;TREEIFY_THRESHOLD&lt;/code&gt;æ‰€è®¾ç½®çš„æ•°é‡æ—¶ï¼Œå°±ä¼šè§¦å‘æ ‘åŒ–ï¼Œå°†å…¶è½¬åŒ–ä¸º&lt;strong&gt;çº¢é»‘æ ‘&lt;/strong&gt;ã€‚Java8é‡Œç»™çš„é»˜è®¤å€¼æ˜¯&lt;strong&gt;8ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;h-2&quot;&gt;&lt;span&gt;ä¸ºå•¥è¦è½¬åŒ–æˆçº¢é»‘æ ‘&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ä¸ºä»€ä¹ˆè¦æ ‘åŒ–ã€‚å½“å¤§é‡çš„æ•°æ®æ”¾å…¥Mapä¸­ï¼ŒHashå†²çªä¼šè¶Šæ¥è¶Šå¤šï¼ŒæŸäº›ä½ç½®å°±ä¼šå‡ºç°ä¸€ä¸ªå¾ˆé•¿çš„é“¾è¡¨çš„æƒ…å†µã€‚è¿™ç§æƒ…å†µä¸‹ï¼ŒæŸ¥è¯¢æ—¶é—´å¤æ‚åº¦æ˜¯O(n) ï¼Œåˆ é™¤çš„æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯O(n)ï¼ŒæŸ¥è¯¢ã€åˆ é™¤çš„æ•ˆç‡ä¼šå¤§å¤§é™ä½ã€‚è€ŒåŒæ ·çš„æ•°æ®æƒ…å†µä¸‹ï¼Œå¹³è¡¡äºŒå‰æ ‘çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(logn)ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;æœ‰çš„æœ‹ï¼ˆæ ï¼‰å‹ï¼ˆç²¾ï¼‰çœ‹åˆ°è¿™ä¸ªå°æ ‡é¢˜ä¸ä¹æ„äº†ï¼Œæ€ä¹ˆå°±ç›´æ¥ç”¨çº¢é»‘æ ‘äº†ï¼Ÿæˆ‘ç”¨&lt;strong&gt;äºŒå‰æŸ¥æ‰¾æ ‘&lt;/strong&gt;å®ƒä¸é¦™å—ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸äº†è§£äºŒå‰æŸ¥æ‰¾æ ‘çš„ï¼Œæˆ‘æŠŠå®ƒçš„ç‰¹ç‚¹åˆ—åœ¨äº†ä¸‹é¢ã€‚&lt;/p&gt;
&lt;p&gt;å†ç²¾ç®€ä¸€ä¸‹å°±æ˜¯ï¼Œ&lt;strong&gt;å·¦å°å³å¤§&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œå¦‚æœæ•°æ®å¤§é‡çš„è¶‹è¿‘äºæœ‰åºï¼Œä¾‹å¦‚æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½æ¯”æ ¹èŠ‚ç‚¹å¤§ï¼Œé‚£è¿™ä¸ªæ—¶å€™&lt;strong&gt;äºŒå‰æŸ¥æ‰¾æ ‘&lt;/strong&gt;å°±é€€åŒ–æˆäº†&lt;strong&gt;é“¾è¡¨&lt;/strong&gt;ï¼ŒæŸ¥è¯¢æ•ˆç‡å°±ä¼šæ€¥å‰§ä¸‹é™ã€‚çœ‹åˆ°è¿™æ˜¯ä¸æ˜¯è§‰å¾—æœ‰ç‚¹ä¸å¯¹ï¼Œæˆ‘æ‰ä»é“¾è¡¨æ ‘åŒ–ï¼Œä½ è¿™åˆç»™æˆ‘é€€åŒ–æˆäº†é“¾è¡¨ï¼Ÿ&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;æœ‹å‹çœ‹åˆ°è¿™åˆä¸ä¹æ„äº†ï¼Œå¥½å¥½å¥½ï¼Œå°±ç®—äºŒå‰æŸ¥æ‰¾æ ‘ä¸è¡Œï¼Œé‚£AVLæ ‘å®ƒä¹Ÿä¸è¡Œï¼Ÿç”¨äº†AVLæ ‘å°±ä¸ä¼šå‡ºç°ä¸Šé¢æ‰€æè¿°çš„æ•ˆç‡æ€¥å‰§é€€åŒ–çš„æƒ…å†µäº†ä¸æ˜¯å—ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;çš„ç¡®æ˜¯è¿™æ ·ï¼ŒAVLä¹Ÿå¯ä»¥å«&lt;strong&gt;å¹³è¡¡äºŒå‰æœç´¢æ ‘&lt;/strong&gt;ã€‚AVLæ ‘ä¼šåœ¨å…¶æœ‰é€€åŒ–æˆé“¾è¡¨çš„è¶‹åŠ¿çš„æ—¶å€™ï¼ˆå·¦å³å­æ ‘çš„é«˜åº¦å·®è¶…è¿‡æŸä¸ªé˜ˆå€¼ï¼‰è°ƒæ•´æ ‘çš„ç»“æ„ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡å·¦æ—‹å’Œå³æ—‹æ¥ä½¿å…¶å·¦å³å­æ ‘çš„é«˜åº¦å°½é‡å¹³è¡¡ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;OKï¼ŒOKï¼Œå°±ç®—ä½ è§£é‡Šæ¸…æ¥šäº†ä¸ºä»€ä¹ˆè¦æ ‘åŒ–ï¼Œé‚£ä¸ºä»€ä¹ˆä¸€å®šè¦ç”¨&lt;strong&gt;çº¢é»‘æ ‘&lt;/strong&gt;ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å…·ä½“çš„ç»†èŠ‚ä¹Ÿå°±ä¸åœ¨è¿™é‡Œèµ˜è¿°ï¼Œä¸çŸ¥ä¸è§‰å·²ç»å†™äº†è¿™ä¹ˆå¤šäº†ï¼Œç›´æ¥è¯´ç»“è®ºå§ã€‚AVLæ ‘çš„æŸ¥æ‰¾é€Ÿåº¦æ›´å¿«ï¼Œä½†æ˜¯ç›¸åº”çš„æ’å…¥å’Œä¿®æ”¹çš„é€Ÿåº¦è¾ƒæ…¢ã€‚è€Œçº¢é»‘æ ‘åˆ™åœ¨æ’å…¥å’Œä¿®æ”¹æ“ä½œè¾ƒä¸ºå¯†é›†çš„æ—¶å€™è¡¨ç°æ›´å¥½ã€‚&lt;/p&gt;
&lt;p&gt;è€Œæ€»ç»“æˆ‘ä»¬æ—¥å¸¸çš„HashMapä½¿ç”¨ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹æ’å…¥å’Œä¿®æ”¹åº”è¯¥æ˜¯æ¯”æŸ¥æ‰¾æ›´é¢‘ç¹ä¸€äº›çš„ã€‚è€Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œçº¢é»‘æ ‘çš„ç»¼åˆè¡¨ç°ä¼šæ›´å¥½ä¸€äº›ã€‚&lt;/p&gt;
&lt;p&gt;è‡³äºçº¢é»‘æ ‘çš„ç›¸å…³ç»†èŠ‚ï¼Œæ¶‰åŠçš„ä¸œè¥¿è¿˜æ˜¯æŒºå¤šï¼Œæˆ‘ä¹‹åä¼šå•ç‹¬æ‹¿ä¸€ä¸ªç¯‡å¹…æ¥è®²ã€‚&lt;/p&gt;
&lt;h3 id=&quot;h-3&quot;&gt;&lt;span&gt;ä¸ºä»€ä¹ˆè¦ç”¨å°¾æ’æ³•&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬ç›®å‰ç”¨çš„æœ€å¤šçš„æ˜¯Java8ï¼Œåœ¨Java8ä¸­é‡‡ç”¨çš„æ˜¯&lt;strong&gt;å°¾æ’æ³•&lt;/strong&gt;ï¼ŒJava8ä¹‹å‰é‡‡ç”¨çš„æ˜¯å¤´æ’æ³•ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¸ºä»€ä¹ˆåé¢åˆå˜æˆäº†&lt;strong&gt;å°¾æ’æ³•&lt;/strong&gt;å‘¢ï¼Ÿæ”¾å¿ƒï¼Œè‚¯å®šä¸æ˜¯è®¾è®¡è€…é—²çš„è›‹ç–¼ï¼Œæ²¡äº‹æ¥æ”¹ä¸ªè®¾è®¡ã€‚è¿™æ ·åšä¸€å®šæ˜¯æœ‰ä¸€å®šçš„é“ç†çš„ã€‚åœ¨è§£é‡Šè¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ï¼Œå¦‚æœé‡‡å–å¤´æ’æ³•åœ¨&lt;strong&gt;å¤šçº¿ç¨‹&lt;/strong&gt;ä¸‹çš„æƒ…å†µä¸‹ä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬è®²è¿‡ï¼Œå‡è®¾æ•°ç»„ä¸­index=1çš„ä½ç½®å·²ç»æœ‰äº†å…ƒç´ &lt;code&gt;A&lt;/code&gt;ï¼Œä¹‹ååˆæœ‰å…ƒç´ &lt;code&gt;B&lt;/code&gt;è¢«åˆ†é…åˆ°äº†index=1çš„ä½ç½®ã€‚é‚£ä¹ˆåœ¨ä¸‹æ ‡ä¸º1çš„æ§½ä½ä¸Šçš„é“¾è¡¨å°±å˜æˆäº†B -&amp;gt; Aã€‚&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶å†åˆ†é…äº†ä¸€ä¸ªæ–°å…ƒç´ &lt;code&gt;C&lt;/code&gt;ï¼Œé“¾è¡¨åˆè¢«æ›´æ–°æˆäº†C -&amp;gt; B -&amp;gt; Aã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå«&lt;strong&gt;å¤´æ’æ³•&lt;/strong&gt;ï¼Œæ–°çš„å…ƒç´ ä¼šè¢«æ”¾åœ¨é“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼Œå› ä¸ºå½“æ—¶è®¾è®¡çš„æ—¶å€™è€ƒè™‘åˆ°åè¢«æ”¾å…¥mapçš„å…ƒç´ è¢«è®¿é—®çš„å¯èƒ½æ€§æ›´å¤§ã€‚&lt;/p&gt;
&lt;p&gt;ä¸Šé¢è®²åˆ°äº†åœ¨å½“ä¸åœçš„å¾€mapä¸­æ”¾ç½®å…ƒç´ åï¼Œè¶…è¿‡äº†è®¾å®šçš„é˜ˆå€¼ï¼Œå°±ä¼šè§¦å‘&lt;strong&gt;è‡ªåŠ¨æ‰©å®¹&lt;/strong&gt;ã€‚æ­¤æ—¶ä¼šè§¦å‘ä¸¤ä¸ªæ“ä½œï¼Œä¸€æ˜¯åˆ›å»ºä¸€ä¸ªå®¹é‡ä¸ºä¹‹å‰ä¸¤å€çš„åº•å±‚æ•°ç»„ï¼Œå¹¶ä¸”å°†è€çš„æ•°ç»„ä¸­çš„å…ƒç´ &lt;strong&gt;rehash&lt;/strong&gt;åˆ°æ–°çš„æ•°ç»„ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;è€Œç”±äºæ•°ç»„çš„é•¿åº¦å‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™å°±å¯¼è‡´äº†å…ƒç´ çš„rehashç»“æœè·Ÿä¹‹å‰åœ¨è€æ•°ç»„ä¸­çš„ä½ç½®ä¸ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆæˆ‘ä»¬æ¥æ¨¡æ‹Ÿä¸€ä¸‹rehashçš„è¿‡ç¨‹ï¼Œå‡è®¾æ–°çš„æ•°ç»„ä¸­ä¸‹æ ‡ä¸º2çš„æ§½ä½æ˜¯ç©ºçš„ã€‚&lt;/p&gt;
&lt;ul readability=&quot;1&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;é¦–å…ˆå…ƒç´ Cï¼Œè¢«æ”¾ç½®åœ¨äº†å…¶ä»–ä½ç½®ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;ç„¶åå…ƒç´ Bï¼Œè¢«rehashåˆ°äº†ä¸‹æ ‡ä¸º2çš„æ§½ä½ï¼Œ è‡³æ­¤éƒ½æ²¡æœ‰é—®é¢˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;æœ€åå…ƒç´ Aï¼ŒåŒæ ·è¢«rehashåˆ°äº†ä¸‹æ ‡ä¸º2çš„æ§½ä½ï¼Œæ­¤æ—¶é“¾è¡¨å˜æˆäº†A -&amp;gt; Bã€‚åˆ°è¿™å°±æœ‰é—®é¢˜äº†ï¼Œæœ€å¼€å§‹Bçš„nextæŒ‡å‘çš„æ˜¯AèŠ‚ç‚¹ã€‚ä½†æ˜¯rehashä¹‹åAçš„nextåˆæŒ‡å‘Bï¼Œçœ‹åˆ°è¿™ä½ åº”è¯¥å°±èƒ½æ˜ç™½å‘ç”Ÿäº†ä»€ä¹ˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;æˆ‘çœ‹åˆ°å¾ˆå¤šçš„å¯¹JDK1.7ç‰ˆçš„HashMapåœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹æ‰©å®¹ä¼šå‡ºç°æ­»é”çš„è§£é‡Šéƒ½åªåˆ°äº†ç¯å½¢é“¾è¡¨ã€‚ä½†æ˜¯å…¶å®å°±ç®—æ˜¯ç¯å½¢é“¾è¡¨ï¼Œåªè¦æ‰¾åˆ°äº†å¯¹åº”çš„å…ƒç´ ï¼Œå°±ä¼šç›´æ¥é€€å‡ºå¾ªç¯çš„é€»è¾‘ï¼Œä¹Ÿä¸ä¼šé€ æˆæ­»å¾ªç¯ã€‚&lt;/p&gt;
&lt;p&gt;å®é™…æƒ…å†µæ˜¯ï¼Œå½“è‡ªåŠ¨æ‰©å®¹å½¢æˆäº†ç¯å½¢é“¾è¡¨åï¼Œå½“ä½ å»Getäº†ä¸€ä¸ªåœ¨entryé“¾ä¸Š&lt;strong&gt;ä¸å­˜åœ¨çš„å…ƒç´ æ—¶&lt;/strong&gt;ï¼Œå°±ä¼šå‡ºç°æ­»å¾ªç¯çš„æƒ…å†µã€‚&lt;/p&gt;
&lt;h2 id=&quot;h-4&quot;&gt;&lt;span&gt;å–å€¼&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;ä¸Šé¢èŠäº†ç»™HashMapèµ‹å€¼çš„å¤§æ¦‚è¿‡ç¨‹ï¼Œæ¥ä¸‹æ¥èŠä¸€ä¸‹ä»HashMapè·å–å€¼ä¼šå‘ç”Ÿä»€ä¹ˆã€‚getæ–¹æ³•çš„å¼€å§‹ï¼Œè·Ÿputä¸€æ ·å¾ˆç®€å•ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;java language-java hljs&quot;&gt;&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;public&lt;/span&gt; V &lt;span class=&quot;hljs-title&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;hljs-params&quot;&gt;(Object key)&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;Node&amp;lt;K,V&amp;gt; e;&lt;br/&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;return&lt;/span&gt; (e = getNode(hash(key), key)) == &lt;span class=&quot;hljs-keyword&quot;&gt;null&lt;/span&gt; ? &lt;span class=&quot;hljs-keyword&quot;&gt;null&lt;/span&gt; : e.value;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œå–å€¼çš„æ ¸å¿ƒæ“ä½œæ˜¯&lt;code&gt;getNode&lt;/code&gt;æ¥è´Ÿè´£å®Œæˆçš„ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆç¬¬ä¸€ä»¶äº‹å°±æ˜¯å»checkçš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ä¸æ˜¯å½“å‰æŸ¥æ‰¾çš„å…ƒç´ ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä¸æ˜¯ï¼Œè€Œä¸”å½“å‰æ§½ä½å·²ç»è¢«æ ‘åŒ–æˆäº†çº¢é»‘æ ‘ï¼Œå°±èµ°çº¢é»‘æ ‘çš„&lt;code&gt;getTreeNode&lt;/code&gt;æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœè¿˜æ²¡æœ‰è¢«æ ‘åŒ–ï¼Œåªæ˜¯æ™®é€šçš„é“¾è¡¨ï¼Œåˆ™é¡ºç€nextä¸€è·¯æ‰¾ä¸‹å»ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºgetæ–¹æ³•é€»è¾‘å’Œå®ç°éƒ½æ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œå°±ä¸è´´å¤ªå¤šæºç äº†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;h-5&quot;&gt;&lt;span&gt;ç»“å°¾&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;ç”±äºæœ€è¿‘å¤ªå¿™äº†ï¼Œå·¥ä½œå’Œç”Ÿæ´»ä¸­çš„äº‹éƒ½å·¨å¤šï¼Œè¿™ç¯‡æ–‡ç« æ˜¯å‡ å‘¨åˆ©ç”¨é›¶é›¶æ•£æ•£çš„æ—¶é—´å†™å‡ºæ¥çš„ï¼Œå¦‚æœæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿å¤§å®¶åœ¨è¯„è®ºåŒºè®¨è®ºã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜éº»çƒ¦&lt;strong&gt;ç‚¹ä¸ªèµ&lt;/strong&gt;ï¼Œ&lt;strong&gt;å…³ä¸ªæ³¨&lt;/strong&gt;ï¼Œ&lt;strong&gt;åˆ†ä¸ªäº«&lt;/strong&gt;ï¼Œ&lt;strong&gt;ç•™ä¸ªè¨€&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¹Ÿå¯ä»¥å¾®ä¿¡æœç´¢å…¬ä¼—å·ã€SHçš„å…¨æ ˆç¬”è®°ã€‘ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥æ‰«æäºŒç»´ç å…³æ³¨&lt;/p&gt;
&lt;img src=&quot;https://user-gold-cdn.xitu.io/2020/4/20/17196831e5529ff2?w=430&amp;amp;h=430&amp;amp;f=jpeg&amp;amp;s=27150&quot; alt=&quot;&quot; title=&quot;&quot;/&gt;&lt;/blockquote&gt;
&lt;p&gt;æ‹œäº†ä¸ªæ‹œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2020/4/20/17196831e988d422?w=1000&amp;amp;h=744&amp;amp;f=jpeg&amp;amp;s=132135&quot; align=&quot;center&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 21 Apr 2020 00:45:00 +0000</pubDate>
<dc:creator>detectiveHLH</dc:creator>
<og:description>HashMapå®šä¹‰ è¯´çš„ä¸“ä¸šä¸€ç‚¹ï¼ŒHashMapæ˜¯å¸¸ç”¨çš„ç”¨äºå­˜å‚¨key valueé”®å€¼å¯¹æ•°æ®çš„ä¸€ä¸ªé›†åˆï¼Œåº•å±‚æ˜¯åŸºäºå¯¹Mapçš„æ¥å£å®ç°ã€‚æ¯ä¸€ä¸ªé”®å€¼å¯¹åˆå«Entryï¼Œè¿™äº›Entryåˆ†æ•£çš„å­˜å‚¨åœ¨ä¸€ä¸ªç”±æ•°ç»„å’Œ</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/detectiveHLH/p/12742202.html</dc:identifier>
</item>
<item>
<title>è®¾è®¡æ¨¡å¼æ‚è°ˆ - muggle1</title>
<link>http://www.cnblogs.com/muggle0/p/12742188.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/muggle0/p/12742188.html</guid>
<description>&lt;h2 id=&quot;å…³äºè®¾è®¡çš„ä¸ªäººçœ‹æ³•&quot;&gt;å…³äºè®¾è®¡çš„ä¸ªäººçœ‹æ³•&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬è®¾è®¡ä¸€ä¸ªåŠŸèƒ½çš„æ—¶å€™ï¼Œè¦è€ƒè™‘çš„æ— éæ˜¯é‚£äº›é—®é¢˜ï¼šå¯é æ€§ï¼Œé²æ£’æ€§ï¼Œè§£è€¦æ€§ï¼Œæ‰©å±•æ€§ï¼Œå¯è¯»æ€§ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯¹ä»£ç å’ŒåŠŸèƒ½çš„è®¾è®¡è¿‡ç¨‹ï¼Œä»é¢ç›¸å¯¹è±¡çš„è§’åº¦æ¥è®²å°±æ˜¯ä¸€ä¸ªæ‹Ÿç‰©æˆ–è€…æ‹ŸäººåŒ–çš„ä¸€ä¸ªè¿‡ç¨‹â€”â€”æˆ‘ä»¬å…ˆç¡®å®šæŸä¸ªåŠŸèƒ½éœ€è¦ä»€ä¹ˆæ ·çš„è§’è‰²æˆ–è€…â€œé›¶éƒ¨ä»¶â€å‚ä¸ï¼Œç„¶ååˆ›å»ºå¯¹åº”çš„ç±»ï¼ŒæŒ‡å®šç±»çš„è§’è‰²èŒèƒ½ï¼›ç„¶åå„ä¸ªç±»å„å¸å…¶èŒï¼›ç„¶åå†è€ƒè™‘ç±»çš„æ‰©å±•æ€§ç›¸å…³çš„é—®é¢˜ï¼Œåšå‡ºä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;è®¾è®¡åŠŸèƒ½çš„ç¬¬ä¸€æ­¥å½“ç„¶æ˜¯æ˜ç¡®éœ€æ±‚ï¼Œä½†æ˜¯åŠŸèƒ½è½åœ°çš„é‡è¦è¿‡ç¨‹æˆ‘è®¤ä¸ºå°±æ˜¯æ‹Ÿç‰©æ‹ŸäººåŒ–çš„è¿™ä¸ªè¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è®¾è®¡æ¡ˆä¾‹åˆ†æ&quot;&gt;è®¾è®¡æ¡ˆä¾‹åˆ†æ&lt;/h2&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬æœ‰ä¸ªéœ€æ±‚ï¼Œå¼‚æ­¥æ¨¡å—â€”â€”å°†è¦æ‰§è¡Œçš„æ•°æ®æ”¾åˆ°åå°å¼‚æ­¥å»æ‰§è¡Œï¼Œä½¿ç”¨åœºæ™¯æœ‰æ•°æ®å¯¼å…¥å¯¼å‡ºï¼Œæ•°æ®åº“é—´æ•°æ®åŒæ­¥ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬è¿›è¡Œæ‹Ÿç‰©æ‹ŸäººåŒ–çš„è¿‡ç¨‹ï¼ˆè§’è‰²åˆ’åˆ†ï¼‰æˆ‘å°†è¿™ä¸ªåŠŸèƒ½åˆ’åˆ†æˆä¸€ä¸‹å‡ ä¸ªè§’è‰²&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä»»åŠ¡ æŒ‡è¦å¤„ç†çš„æ•°æ®ç­‰&lt;/li&gt;
&lt;li&gt;èµ„æº è¿™é‡Œå•æŒ‡çº¿ç¨‹æ± &lt;/li&gt;
&lt;li&gt;ä»»åŠ¡å¤„ç†å™¨ å¤„ç†ä»»åŠ¡çš„å…·ä½“é€»è¾‘ã€‚&lt;/li&gt;
&lt;li&gt;ç®¡ç†å™¨ è´Ÿè´£è°ƒåº¦çº¿ç¨‹ï¼Œå®‰æ’ä»»åŠ¡ï¼Œå°†ä»»åŠ¡åˆ†å‘ç»™å„ä¸ªå¤„ç†å™¨&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;åŠŸèƒ½è®¾è®¡åˆ°è¿™ï¼Œè¿™ä¸ªæ¡†æ¶åªèƒ½æ»¡è¶³ä½¿ç”¨è¦æ±‚ï¼Œé€šç”¨æ€§ä¸å¼ºï¼›å°±æ˜¯è¯´ï¼Œèƒ½ç”¨ä½†æ˜¯æ¯”è¾ƒåƒåœ¾ã€‚ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´ï¼Œ&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬ä»»åŠ¡åº”è¯¥ä»¥ä»€ä¹ˆæ ·çš„å½¢å¼è·å–ï¼Ÿåˆä»¥ä»€ä¹ˆæ ·çš„å½¢å¼å»å‘å¸ƒä¸€ä¸ªä¸€ä¸ªä»»åŠ¡ï¼Ÿæ¡†æ¶ä¸­æœªåšè¯´æ˜ï¼Œä¹Ÿæ²¡æœ‰è§’è‰²æ¥å¹²è¿™ä¸ªäº‹æƒ…ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åœ¨ç®¡ç†å™¨ä¸­å®šä¹‰ä¸€ä¸ªå‘½ä»¤æ¨¡å¼ï¼Œè¿™ä¸ªå‘½ä»¤å°±æ˜¯ä»»åŠ¡ï¼Œå‘½ä»¤æ–¹æ³•å°±æ˜¯å‘å¸ƒä»»åŠ¡ï¼Œå†åœ¨å…¶å†…éƒ¨ä½¿ç”¨æ¨¡æ¿æ–¹æ³•æ¨¡å¼å›ºå®šä¸€äº›ç®—æ³•ã€‚å†æ·»åŠ ä¸€ä¸ªä»»åŠ¡å·¥å‚æ¥è·å–å’Œç®¡ç†ä»»åŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åä»»åŠ¡å¤„ç†å™¨è¿™ä¸€ç«¯ï¼Œä»»åŠ¡å¤„ç†é€»è¾‘è‚¯å®šæ˜¯ä½¿ç”¨è€…è‡ªå·±å®ç°çš„ï¼Œå› æ­¤è¦å…·æœ‰é€‚é…æ€§ï¼Œè¿™ä¸ªé€‚é…æ€§çš„æ”¯æŒï¼Œå¯ä»¥é€šè¿‡æ¥å£ä¹Ÿå¯ä»¥é€šè¿‡æ³¨è§£ï¼Œè¿™éƒ½æ— æ‰€è°“ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜è¦æ·»åŠ ä¸€ä¸ªä»»åŠ¡å¤„ç†å™¨é€‚é…å™¨ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åæ¡†æ¶å°±æˆäº†è¿™ä¸ªæ ·å­ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ä»»åŠ¡ï¼ˆå‘½ä»¤ï¼‰&lt;/li&gt;
&lt;li&gt;ä»»åŠ¡å·¥å‚&lt;/li&gt;
&lt;li&gt;ä»»åŠ¡å¤„ç†å™¨&lt;/li&gt;
&lt;li&gt;ä»»åŠ¡å¤„ç†å™¨é€‚é…å™¨&lt;/li&gt;
&lt;li&gt;ç®¡ç†å™¨&lt;/li&gt;
&lt;li&gt;èµ„æºï¼ˆçº¿ç¨‹æ± ï¼‰&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;OKï¼Œå®è¯å‘Šè¯‰ä½ å§ï¼Œè¿™ä¸ªæ¡†æ¶å’Œ &lt;code&gt;springmvc&lt;/code&gt; çš„åŸç†æ˜¯ä¸€ä¸ªæ„æ€ï¼šrequest å¯¹åº”ä»»åŠ¡ã€ dispatchServletå¯¹åº”çš„æ˜¯ç®¡ç†è€…ï¼ŒMaphandler å¯¹åº”çš„æ˜¯å¤„ç†å™¨é€‚é…å™¨ï¼Œcontrollerå¯¹åº”ä»»åŠ¡å¤„ç†å™¨ï¼Œ ä»»åŠ¡å·¥å‚å……å½“ä¸€ä¸ªå‰ç«¯ç”¨æˆ·è§’è‰²å‘é€ä¸€ä¸ªä¸ªè¯·æ±‚ã€‚æˆ‘è¿™é‡Œå¤šäº†ä¸ªå‘½ä»¤å‘é€æ–¹çš„è§’è‰²è®©ç®¡ç†å™¨å……å½“äº†ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨æ·»åŠ ä¸€ä¸ªå‘½ä»¤å‘é€å™¨ç±»ã€‚è¿™ä¸ªå¼‚æ­¥æ¡†æ¶æµç¨‹å°±å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;è°ƒç”¨å‘½ä»¤å‘é€å™¨å‘é€ä¸€ä¸ªå‘½ä»¤ï¼ˆä»»åŠ¡ï¼‰ï¼› å‘½ä»¤å‘é€å™¨æ ¹æ®å…·ä½“å®ç°æ¥å†³å®šè¿™ä¸ªå‘½ä»¤æ˜¯åº”è¯¥æ”¾å…¥åˆ°å†…å­˜ä¸­è¿˜æ˜¯æ”¾å…¥åˆ°æ•°æ®åº“é‡Œè¿˜æ˜¯ç›´æ¥æ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;ä»»åŠ¡å·¥å‚ä»æ•°æ®åº“ï¼Œæˆ–è€…å†…å­˜æˆ–è€…åˆ«çš„ä»€ä¹ˆåœ°æ–¹è¯»å–å‡ºä»»åŠ¡ï¼Œæ’æ ¹æ®ä»»åŠ¡ä¼˜å…ˆçº§åºä»»åŠ¡ï¼Œç„¶åå°†ä»»åŠ¡äº¤ç»™ç®¡ç†å™¨ã€‚&lt;/li&gt;
&lt;li&gt;ç®¡ç†å™¨æ ¹æ®ä»»åŠ¡ç±»å‹åŒ¹é…åˆ°å¯¹åº”çš„ä»»åŠ¡å¤„ç†å™¨ï¼Œäº¤ç»™ä»»åŠ¡å¤„ç†å™¨å»å¤„ç†&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;ä»»åŠ¡å¤„ç†å™¨çš„å®ç°å°±åƒspringmvcé‚£æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªå¤„ç†å™¨æ¥å£ï¼Œç„¶åæ‰€æœ‰å®ç°è¯¥æ¥å£çš„å¹¶æ³¨å…¥åˆ°springå®¹å™¨çš„å¯¹è±¡éƒ½æ˜¯å¤„ç†å™¨ã€‚ä¹Ÿå¯ä»¥å®šä¹‰ä¸€ä¸ªåƒ&lt;code&gt;@requestMaoing&lt;/code&gt;é‚£æ ·çš„æ³¨è§£ï¼Œæ‰€æœ‰åŠ ä¸Šè¯¥æ³¨è§£çš„æ–¹æ³•éƒ½ä¼šè¢«é€‚é…æˆä¸€ä¸ªå¤„ç†ï¼Œå®ç°èµ·æ¥ä¹Ÿå¾ˆå®¹æ˜“ã€‚ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å†å¯¹ä»»åŠ¡åŠ ä¸€ä¸ªç›‘å¬å™¨ï¼Œæˆ‘ä»¬æƒ³å‘å¸ƒä»»åŠ¡çš„æ—¶å€™åªè¦æŠ›å‡ºä¸€ä¸ªäº‹ä»¶å³å¯ï¼Œå½“ç„¶è¿™åªæ˜¯é™„å¸¦åŠŸèƒ½ï¼Œéå¿…é¡»çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å…³äºä»£ç å¯è¯»æ€§çš„æ€è€ƒ&quot;&gt;å…³äºä»£ç å¯è¯»æ€§çš„æ€è€ƒ&lt;/h2&gt;
&lt;p&gt;ä¸€ä¸ªå¥½çš„è®¾è®¡æ¨¡å¼è¿˜å¥½è¯´ï¼Œä¸€ä¸ªä½¿ç”¨ç³Ÿç³•çš„è®¾è®¡æ¨¡å¼ç®€ç›´æ˜¯ç¾éš¾ï¼Œä½œè€…å°±ç»å†è¿‡è¿™ç§ç¾éš¾ï¼šè®¾è®¡æ¨¡å¼ç”¨çš„è«åå…¶å¦™ï¼Œä¸æš—2å¥—è·¯æ¥ï¼Œå‘½åä¹Ÿæ— è¿¹å¯å¯»ï¼Œè¿™æ ·çš„ä»£ç å¯è¯»æ€§å°±å¾ˆå·®ã€‚å› ä¸ºè®¾è®¡æ¨¡å¼ä¹‹é—´ç±»å…³ç³»æœ¬èº«å°±å¾ˆå¤æ‚ï¼Œåœ¨å°‘ä¸€ç‚¹æ³¨é‡Šï¼ŒçœŸçš„å¾ˆéš¾å»è¯»æ‡‚ã€‚é‚£ä¹ˆæˆ‘ä»¬è¦æ€ä¹ˆè®©ä¸€æ®µä»£ç èƒ½è®©åˆ«äººè¯»æ‡‚å‘¢ï¼Ÿç¬¬ä¸€å°±æ˜¯åŠ æ³¨é‡Šï¼Œç¬¬äºŒå°±æ˜¯å‘½åè§„èŒƒã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥è¯´è¯´è®¾è®¡æ¨¡å¼çš„å‘½åè§„èŒƒå§ã€‚&lt;/p&gt;
&lt;p&gt;åŸºæœ¬çš„ä¸€äº›å‘½åï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ç±»ä¸€èˆ¬ä»¥ &lt;code&gt;template&lt;/code&gt; ç»“å°¾&lt;/li&gt;
&lt;li&gt;å·¥å‚æ¨¡å¼ä¸€èˆ¬ä»¥ &lt;code&gt;factory&lt;/code&gt; ç»“å°¾&lt;/li&gt;
&lt;li&gt;ä»£ç†æ¨¡å¼ä¸€èˆ¬ä»¥ &lt;code&gt;proxy&lt;/code&gt; ç»“å°¾ï¼Œä»£ç†æ–¹æ³•ä¸€èˆ¬å‘½åä¸º&lt;code&gt;invoke()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;æ‰§è¡Œå‘½ä»¤çš„æ–¹æ³•ä¸€èˆ¬å«&lt;code&gt;execute()&lt;/code&gt; ï¼Œå‘½ä»¤ç±»ä¸€èˆ¬ä»¥ &lt;code&gt;Command&lt;/code&gt; ç»“å°¾&lt;/li&gt;
&lt;li&gt;è§‚å¯Ÿè€…æ¨¡å¼ä¸­ï¼Œç›‘å¬å™¨ä¸€èˆ¬ä»¥ &lt;code&gt;listener&lt;/code&gt; ç»“å°¾&lt;/li&gt;
&lt;li&gt;å»ºé€ è€…ä¸€èˆ¬ä»¥ &lt;code&gt;builder&lt;/code&gt; ç»“å°¾&lt;/li&gt;
&lt;li&gt;é€‚é…å™¨ &lt;code&gt;Adapter&lt;/code&gt; ç»“å°¾&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä¸€äº›å¸¸ç”¨çš„â€œæ‹Ÿç‰©â€ ç»“å°¾åè¯&lt;/p&gt;
&lt;ul readability=&quot;0&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;å¤„ç†å™¨/æ‰§è¡Œå™¨&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;Resolver
Processor
Handler
Executor
Performer
Runner
&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;ç®¡ç†å™¨æ§åˆ¶å™¨&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Controller
Manager
Ordinator
Leader
Master
&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;è½¬æ¢å™¨&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Encoder/Decoder
Transformer
Converter
&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ˜ å°„å™¨&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code&gt;Mapper/Mapping
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;Chooser
Selector
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;å°ç»“&quot;&gt;å°ç»“&lt;/h2&gt;
&lt;p&gt;å¯¹äºè®¸å¤šæºç è€Œè¨€ï¼Œè®¾è®¡æ¨¡å¼éƒ½æ˜¯æ‚ç³…åœ¨ä¸€èµ·çš„ï¼Œè®¸å¤šç±»ä½ ä¸èƒ½ç‰‡é¢çš„åˆ’ä¸ºå“ªä¸€ä¸ªè®¾è®¡æ¨¡å¼ï¼Œå®ƒå¯èƒ½åœ¨è®¸å¤šæ¨¡å¼é‡Œé¢éƒ½å……å½“ç€è§’è‰²ã€‚æˆ‘ä»¬é˜…è¯»æºç çš„æ—¶å€™è¦æœ‰é€šè¿‡å‘½åå»çŒœè®¾è®¡æ¨¡å¼èƒ½åŠ›ï¼›åŒæ—¶æˆ‘ä»¬ä¹Ÿè¦æœ‰ä¸€å®šçš„è”æƒ³èƒ½åŠ›ï¼Œèƒ½å¤Ÿåœ¨å®æˆ˜ä¸­è”æƒ³åˆ°ç›¸å…³æºç ï¼Œè¦å­¦ä¼š â€œæŠ„ä½œä¸šâ€ ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://muggle.javaboy.org/2019/03/20/home/&quot;&gt;ç‚¹å‡»å…³æ³¨æˆ‘çš„åšå®¢&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 21 Apr 2020 00:40:00 +0000</pubDate>
<dc:creator>muggle1</dc:creator>
<og:description>å…³äºè®¾è®¡çš„ä¸ªäººçœ‹æ³• æˆ‘ä»¬è®¾è®¡ä¸€ä¸ªåŠŸèƒ½çš„æ—¶å€™ï¼Œè¦è€ƒè™‘çš„æ— éæ˜¯é‚£äº›é—®é¢˜ï¼šå¯é æ€§ï¼Œé²æ£’æ€§ï¼Œè§£è€¦æ€§ï¼Œæ‰©å±•æ€§ï¼Œå¯è¯»æ€§ç­‰ç­‰ã€‚ æˆ‘ä»¬å¯¹ä»£ç å’ŒåŠŸèƒ½çš„è®¾è®¡è¿‡ç¨‹ï¼Œä»é¢ç›¸å¯¹è±¡çš„è§’åº¦æ¥è®²å°±æ˜¯ä¸€ä¸ªæ‹Ÿç‰©æˆ–è€…æ‹ŸäººåŒ–çš„ä¸€ä¸ªè¿‡ç¨‹â€”â€”æˆ‘</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/muggle0/p/12742188.html</dc:identifier>
</item>
<item>
<title>Netty ä¸­çš„å¼‚æ­¥ç¼–ç¨‹ Future å’Œ Promise - rickiyang</title>
<link>http://www.cnblogs.com/rickiyang/p/12742091.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/rickiyang/p/12742091.html</guid>
<description>&lt;p&gt;Netty ä¸­å¤§é‡ I/O æ“ä½œéƒ½æ˜¯å¼‚æ­¥æ‰§è¡Œï¼Œæœ¬ç¯‡åšæ–‡æ¥èŠèŠ Netty ä¸­çš„å¼‚æ­¥ç¼–ç¨‹ã€‚&lt;/p&gt;
&lt;h4 id=&quot;java--future-æä¾›çš„å¼‚æ­¥æ¨¡å‹&quot;&gt;Java Future æä¾›çš„å¼‚æ­¥æ¨¡å‹&lt;/h4&gt;
&lt;p&gt;JDK 5 å¼•å…¥äº† Future æ¨¡å¼ã€‚Future æ¥å£æ˜¯ Java å¤šçº¿ç¨‹ Future æ¨¡å¼çš„å®ç°ï¼Œåœ¨ &lt;code&gt;java.util.concurrent&lt;/code&gt;åŒ…ä¸­ï¼Œå¯ä»¥æ¥è¿›è¡Œå¼‚æ­¥è®¡ç®—ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºå¼‚æ­¥ç¼–ç¨‹ï¼Œæˆ‘ä»¬æƒ³è¦çš„å®ç°æ˜¯ï¼šæäº¤ä¸€ä¸ªä»»åŠ¡ï¼Œåœ¨ä»»åŠ¡æ‰§è¡ŒæœŸé—´æäº¤è€…å¯ä»¥åšåˆ«çš„äº‹æƒ…ï¼Œè¿™ä¸ªä»»åŠ¡æ˜¯åœ¨å¼‚æ­¥æ‰§è¡Œçš„ï¼Œå½“ä»»åŠ¡æ‰§è¡Œå®Œæ¯•é€šçŸ¥æäº¤è€…ä»»åŠ¡å®Œæˆè·å–ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆåœ¨ Future ä¸­æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿæˆ‘ä»¬å…ˆçœ‹æ¥å£å®šä¹‰ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public interface Future&amp;lt;V&amp;gt; {

    boolean cancel(boolean mayInterruptIfRunning);

    boolean isCancelled();

    boolean isDone();

    V get() throws InterruptedException, ExecutionException;

    V get(long timeout, TimeUnit unit)
        throws InterruptedException, ExecutionException, TimeoutException;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬çœ‹ä¸€ä¸ªç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class FutureTest {

    public static void main(String[] args) {
        ExecutorService executorService = Executors.newFixedThreadPool(2);
        System.out.println(&quot;start&quot;);
        Future&amp;lt;Integer&amp;gt; submit = executorService.submit(() -&amp;gt; {
            try {
                Thread.sleep(3000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            return 1;
        });
        Integer value = null;
        try {
            value = submit.get();
        } catch (Exception e) {
            e.printStackTrace();
        } 
        System.out.println(value);
        System.out.println(&quot;end&quot;);
        
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Futrue çš„ä½¿ç”¨æ–¹å¼æ˜¯ï¼šæŠ•é€’ä¸€ä¸ªä»»åŠ¡åˆ° Future ä¸­æ‰§è¡Œï¼Œæ“ä½œå®Œä¹‹åè°ƒç”¨ &lt;code&gt;Future#get()&lt;/code&gt; æˆ–è€… &lt;code&gt;Future#isDone()&lt;/code&gt; æ–¹æ³•åˆ¤æ–­æ˜¯å¦æ‰§è¡Œå®Œæ¯•ã€‚ä»è¿™ä¸ªé€»è¾‘ä¸Šçœ‹ï¼Œ Future æä¾›çš„åŠŸèƒ½æ˜¯ï¼šç”¨æˆ·çº¿ç¨‹éœ€è¦ä¸»åŠ¨è½®è¯¢ Future çº¿ç¨‹æ˜¯å¦å®Œæˆå½“å‰ä»»åŠ¡ï¼Œå¦‚æœä¸é€šè¿‡è½®è¯¢æ˜¯å¦å®Œæˆè€Œæ˜¯åŒæ­¥ç­‰å¾…è·å–åˆ™ä¼šé˜»å¡ç›´åˆ°æ‰§è¡Œå®Œæ¯•ä¸ºæ­¢ã€‚æ‰€ä»¥ä»è¿™é‡Œçœ‹ï¼ŒFutureå¹¶ä¸æ˜¯çœŸæ­£çš„å¼‚æ­¥ï¼Œå› ä¸ºå®ƒå°‘äº†ä¸€ä¸ª&lt;strong&gt;å›è°ƒ&lt;/strong&gt;ï¼Œå……å…¶é‡åªèƒ½ç®—æ˜¯ä¸€ä¸ªåŒæ­¥éé˜»å¡æ¨¡å¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;executorService.submit()&lt;/code&gt;æ–¹æ³•è·å–å¸¦è¿”å›å€¼çš„ Future ç»“æœæœ‰ä¸¤ç§æ–¹å¼ï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;ä¸€ç§æ˜¯é€šè¿‡å®ç° &lt;code&gt;Callable&lt;/code&gt;æ¥å£ï¼›&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒç§æ˜¯ä¸­é—´å˜é‡è¿”å›ã€‚ç»§æ‰¿ Future çš„å­ç±»: FutureTaskï¼Œé€šè¿‡ FutureTask è¿”å›å¼‚æ­¥ç»“æœè€Œä¸æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­è·å–ï¼ˆFutureTask æœ¬è´¨ä¹Ÿæ˜¯ä½¿ç”¨ &lt;code&gt;Callable&lt;/code&gt; è¿›è¡Œåˆ›å»ºï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;ä¸Šé¢ä¸¤ç§æ–¹å¼çš„ä»£ç å°±å˜ä¸ºè¿™æ ·ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class FutureTest {

    public static void main(String[] args) {
        ExecutorService executorService = Executors.newFixedThreadPool(2);
        System.out.println(&quot;start&quot;);
        //æ–¹å¼1 é€šè¿‡ executorService æäº¤ä¸€ä¸ªå¼‚æ­¥çº¿ç¨‹
        //Future&amp;lt;Integer&amp;gt; submit = executorService.submit(new NewCallableTask());

        //æ–¹å¼2 é€šè¿‡ FutureTask åŒ…è£…å¼‚æ­¥çº¿ç¨‹çš„è¿”å›ï¼Œè¿”å›ç»“æœåœ¨ FutureTask ä¸­è·å–è€Œä¸æ˜¯ åœ¨æäº¤çº¿ç¨‹ä¸­
        FutureTask&amp;lt;Integer&amp;gt; task = new FutureTask&amp;lt;&amp;gt;(new NewCallableTask());
        executorService.submit(task);
        //-------------æ–¹å¼2--------------

        Integer value = null;
        try {
            value = task.get();
        } catch (Exception e) {
            e.printStackTrace();
        }
        System.out.println(value);
        System.out.println(&quot;end&quot;);

    }

    /**
     * é€šè¿‡å®ç° Callable æ¥å£
     */
     static class NewCallableTask implements Callable&amp;lt;Integer&amp;gt; {

        @Override
        public Integer call() throws Exception {
            try {
                Thread.sleep(3000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            return 1;
        }
    }

}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸€èˆ¬åœ¨ä½¿ç”¨çº¿ç¨‹æ± åˆ›å»ºçº¿ç¨‹æ‰§è¡Œä»»åŠ¡çš„æ—¶å€™ä¼šæœ‰ä¸¤ç§æ–¹å¼ï¼Œè¦ä¹ˆå®ç° Runnable æ¥å£ï¼Œè¦ä¹ˆå®ç° Callable æ¥å£ï¼Œå®ƒä»¬çš„åŒºåˆ«åœ¨äºï¼š&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;Callable å¯ä»¥åœ¨ä»»åŠ¡ç»“æŸçš„æ—¶å€™æä¾›ä¸€ä¸ªè¿”å›å€¼ï¼ŒRunnable æ— æ³•æä¾›è¿™ä¸ªåŠŸèƒ½ï¼›&lt;/li&gt;
&lt;li&gt;Callable çš„ call æ–¹æ³•åˆ†å¯ä»¥æŠ›å‡ºå¼‚å¸¸ï¼Œè€Œ Runnable çš„ run æ–¹æ³•ä¸èƒ½æŠ›å‡ºå¼‚å¸¸ã€‚&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;è€Œæˆ‘ä»¬çš„å¼‚æ­¥è¿”å›è‡ªç„¶æ˜¯ä½¿ç”¨ Callable æ–¹å¼ã€‚é‚£ä¹ˆ Callable æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ä» Callable è¢«æäº¤çš„åœ°æ–¹å…¥æ‰‹ï¼š&lt;code&gt;executorService.submit(task)&lt;/code&gt;, ExecutorService æ˜¯ä¸€ä¸ªæ¥å£ï¼Œä»–çš„é»˜è®¤å®ç°ç±»æ˜¯ï¼šAbstractExecutorServiceï¼Œæˆ‘ä»¬çœ‹è¿™é‡Œçš„ &lt;code&gt;submit()&lt;/code&gt;å®ç°æ–¹å¼ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public &amp;lt;T&amp;gt; Future&amp;lt;T&amp;gt; submit(Callable&amp;lt;T&amp;gt; task) {
  if (task == null) throw new NullPointerException();
  RunnableFuture&amp;lt;T&amp;gt; ftask = newTaskFor(task);
  execute(ftask);
  return ftask;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°å°† Callable åˆåŒ…è£…æˆäº† RunnableFutureã€‚è€Œè¿™ä¸ª &lt;code&gt;RunnableFuture&lt;/code&gt; å°±æ¯”è¾ƒç¥å¥‡ï¼Œå®ƒåŒæ—¶ç»§æ‰¿äº† Runnable å’Œ Future ï¼Œæ—¢æœ‰çº¿ç¨‹çš„èƒ½åŠ›åˆæœ‰å¯æºå¸¦è¿”å›å€¼çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public interface RunnableFuture&amp;lt;V&amp;gt; extends Runnable, Future&amp;lt;V&amp;gt; {
    /**
     * Sets this Future to the result of its computation
     * unless it has been cancelled.
     */
    void run();
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ‰€ä»¥å†çœ‹ &lt;code&gt;submit()&lt;/code&gt;æ–¹æ³•ï¼Œå…¶å®æ˜¯å°† RunnableFuture çº¿ç¨‹é€å…¥çº¿ç¨‹æ± æ‰§è¡Œï¼Œæ‰§è¡Œæ˜¯ä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œåªæ˜¯è¿™ä¸ªæ‰§è¡Œçš„å¯¹è±¡æä¾›äº† &lt;code&gt;get()&lt;/code&gt;æ–¹æ³•æ¥è·å–æ‰§è¡Œç»“æœã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆ Callable ä¼˜åŠ¿å¦‚ä½•å˜ä¸º RunnableFuture çš„å‘¢ï¼Ÿæˆ‘ä»¬çœ‹ &lt;code&gt;newTaskFor(task)&lt;/code&gt;æ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;protected &amp;lt;T&amp;gt; RunnableFuture&amp;lt;T&amp;gt; newTaskFor(Callable&amp;lt;T&amp;gt; callable) {
  return new FutureTask&amp;lt;T&amp;gt;(callable);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å°† Callable åŒ…è£…ä¸º FutureTask å¯¹è±¡ï¼Œçœ‹åˆ°è¿™é‡Œåˆå…³è”åˆ° FutureTask ï¼Œ ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class FutureTask&amp;lt;V&amp;gt; implements RunnableFuture&amp;lt;V&amp;gt; {
  
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ° FutureTask æ˜¯ RunnableFuture çš„å­ç±»ï¼Œè¿™ä¹Ÿå°±è§£é‡Šäº†ä¸Šé¢çš„ç¤ºä¾‹ä¸ºä»€ä¹ˆåœ¨çº¿ç¨‹æ± ä¸­å¯ä»¥æäº¤ FutureTask å®ä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;æ›´è¯¦ç»†çš„æ‰§è¡Œè¿‡ç¨‹è¿™é‡Œå°±ä¸å†åˆ†æï¼Œé‡ç‚¹å‰–æ Future çš„å®ç°è¿‡ç¨‹ï¼Œå®ƒå¹¶ä¸æ˜¯çœŸæ­£çš„å¼‚æ­¥ï¼Œæ²¡æœ‰å®ç°å›è°ƒã€‚æ‰€ä»¥åœ¨Java8 ä¸­åˆæ–°å¢äº†ä¸€ä¸ªçœŸæ­£çš„å¼‚æ­¥å‡½æ•°ï¼šCompletableFutureã€‚&lt;/p&gt;
&lt;h4 id=&quot;completablefuture-éé˜»å¡å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹&quot;&gt;CompletableFuture éé˜»å¡å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹&lt;/h4&gt;
&lt;p&gt;Java 8 ä¸­æ–°å¢åŠ äº†ä¸€ä¸ªç±»ï¼šCompletableFutureï¼Œå®ƒæä¾›äº†éå¸¸å¼ºå¤§çš„ Future çš„æ‰©å±•åŠŸèƒ½ï¼Œæœ€é‡è¦çš„æ˜¯å®ç°äº†å›è°ƒçš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public class CallableFutureTest {

                
    public static void main(String[] args) {
        System.out.println(&quot;start&quot;);
        /**
         * å¼‚æ­¥éé˜»å¡
         */
        CompletableFuture.runAsync(() -&amp;gt; {
            try {
                Thread.sleep(3000);
                System.out.println(&quot;sleep done&quot;);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        });
        
        try {
            Thread.sleep(4000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        
        System.out.println(&quot;done&quot;);
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;CompletableFuture.runAsync()&lt;/code&gt;æ–¹æ³•æä¾›äº†å¼‚æ­¥æ‰§è¡Œæ— è¿”å›å€¼ä»»åŠ¡çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;ExecutorService executorService = Executors.newFixedThreadPool(100);

CompletableFuture&amp;lt;String&amp;gt; future = CompletableFuture.supplyAsync(() -&amp;gt; {
    // do something
    return &quot;result&quot;;
}, executorService);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;CompletableFuture.supplyAsync()&lt;/code&gt;æ–¹æ³•æä¾›äº†å¼‚æ­¥æ‰§è¡Œæœ‰è¿”å›å€¼ä»»åŠ¡çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;CompletableFutureæºç ä¸­æœ‰å››ä¸ªé™æ€æ–¹æ³•ç”¨æ¥æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public static &amp;lt;U&amp;gt; CompletableFuture&amp;lt;U&amp;gt; supplyAsync(Supplier&amp;lt;U&amp;gt; supplier){..}

public static &amp;lt;U&amp;gt; CompletableFuture&amp;lt;U&amp;gt; supplyAsync(Supplier&amp;lt;U&amp;gt; supplier,Executor executor){..}

public static CompletableFuture&amp;lt;Void&amp;gt; runAsync(Runnable runnable){..}

public static CompletableFuture&amp;lt;Void&amp;gt; runAsync(Runnable runnable,
Executor executor){..}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å‰é¢ä¸¤ä¸ªå¯ä»¥çœ‹åˆ°æ˜¯å¸¦è¿”å›å€¼çš„æ–¹æ³•ï¼Œåé¢ä¸¤ä¸ªæ˜¯ä¸å¸¦è¿”å›å€¼çš„æ–¹æ³•ã€‚åŒæ—¶æ”¯æŒä¼ å…¥è‡ªå®šä¹‰çš„çº¿ç¨‹æ± ï¼Œå¦‚æœä¸ä¼ å…¥çº¿ç¨‹æ± çš„è¯é»˜è®¤æ˜¯ä½¿ç”¨ &lt;code&gt;ForkJoinPool.commonPool()&lt;/code&gt; ä½œä¸ºå®ƒçš„çº¿ç¨‹æ± æ‰§è¡Œå¼‚æ­¥ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åˆå¹¶ä¸¤ä¸ªå¼‚æ­¥ä»»åŠ¡&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœæœ‰ä¸¤ä¸ªä»»åŠ¡éœ€è¦å¼‚æ­¥æ‰§è¡Œï¼Œä¸”åé¢éœ€è¦å¯¹è¿™ä¸¤ä¸ªä»»åŠ¡çš„ç»“æœè¿›è¡Œåˆå¹¶å¤„ç†ï¼ŒCompletableFuture ä¹Ÿæ”¯æŒè¿™ç§å¤„ç†ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;ExecutorService executorService = Executors.newFixedThreadPool(100);

CompletableFuture&amp;lt;String&amp;gt; future1 = CompletableFuture.supplyAsync(() -&amp;gt; {
    return &quot;Task1&quot;;
}, executorService);
CompletableFuture&amp;lt;String&amp;gt; future2 = CompletableFuture.supplyAsync(() -&amp;gt; {
    return &quot;Task2&quot;;
}, executorService);
CompletableFuture&amp;lt;String&amp;gt; future = future1.thenCombineAsync(future2, (task1, task2) -&amp;gt; {
    return task1 + task2; // return &quot;Task1Task2&quot; String
});
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é€šè¿‡ &lt;code&gt;CompletableFuture.thenCombineAsync()&lt;/code&gt;æ–¹æ³•è·å–ä¸¤ä¸ªä»»åŠ¡çš„ç»“æœç„¶åè¿›è¡Œç›¸åº”çš„æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸‹ä¸€ä¸ªä¾èµ–ä¸Šä¸€ä¸ªçš„ç»“æœ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœç¬¬äºŒä¸ªä»»åŠ¡ä¾èµ–ç¬¬ä¸€ä¸ªä»»åŠ¡çš„ç»“æœï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;ExecutorService executorService = Executors.newFixedThreadPool(100);

CompletableFuture&amp;lt;String&amp;gt; future1 = CompletableFuture.supplyAsync(() -&amp;gt; {
    return &quot;Task1&quot;;
}, executorService);
CompletableFuture&amp;lt;String&amp;gt; future = future1.thenComposeAsync(task1 -&amp;gt; {
    return CompletableFuture.supplyAsync(() -&amp;gt; {
        return task1 + &quot;Task2&quot;; // return &quot;Task1Task2&quot; String
    });
}, executorService);
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;CompletableFuture.thenComposeAsync()&lt;/code&gt;æ”¯æŒå°†ç¬¬ä¸€ä¸ªä»»åŠ¡çš„ç»“æœä¼ å…¥ç¬¬äºŒä¸ªä»»åŠ¡ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¸¸ç”¨ API ä»‹ç»&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;æ‹¿åˆ°ä¸Šä¸€ä¸ªä»»åŠ¡çš„ç»“æœåšåç»­æ“ä½œï¼Œä¸Šä¸€ä¸ªä»»åŠ¡å®Œæˆåçš„åŠ¨ä½œ&lt;/li&gt;
&lt;/ol&gt;&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public CompletableFuture&amp;lt;T&amp;gt;     whenComplete(BiConsumer&amp;lt;? super T,? super Throwable&amp;gt; action)
public CompletableFuture&amp;lt;T&amp;gt;     whenCompleteAsync(BiConsumer&amp;lt;? super T,? super Throwable&amp;gt; action)
public CompletableFuture&amp;lt;T&amp;gt;     whenCompleteAsync(BiConsumer&amp;lt;? super T,? super Throwable&amp;gt; action, Executor executor)
public CompletableFuture&amp;lt;T&amp;gt;     exceptionally(Function&amp;lt;Throwable,? extends T&amp;gt; fn)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸Šé¢å››ä¸ªæ–¹æ³•è¡¨ç¤ºåœ¨å½“å‰é˜¶æ®µä»»åŠ¡å®Œæˆä¹‹åä¸‹ä¸€æ­¥è¦åšä»€ä¹ˆã€‚whenComplete è¡¨ç¤ºåœ¨å½“å‰çº¿ç¨‹å†…ç»§ç»­åšä¸‹ä¸€æ­¥ï¼Œå¸¦ Async åç¼€çš„è¡¨ç¤ºä½¿ç”¨æ–°çº¿ç¨‹å»æ‰§è¡Œã€‚&lt;/p&gt;
&lt;ol start=&quot;2&quot; readability=&quot;20.5&quot;&gt;&lt;li readability=&quot;18&quot;&gt;
&lt;p&gt;æ‹¿åˆ°ä¸Šä¸€ä¸ªä»»åŠ¡çš„ç»“æœåšåç»­æ“ä½œï¼Œä½¿ç”¨ handler æ¥å¤„ç†é€»è¾‘ï¼Œå¯ä»¥è¿”å›ä¸ç¬¬ä¸€é˜¶æ®µå¤„ç†çš„è¿”å›ç±»å‹ä¸ä¸€æ ·çš„è¿”å›ç±»å‹ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public &amp;lt;U&amp;gt; CompletableFuture&amp;lt;U&amp;gt;  handle(BiFunction&amp;lt;? super T,Throwable,? extends U&amp;gt; fn)
public &amp;lt;U&amp;gt; CompletableFuture&amp;lt;U&amp;gt;  handleAsync(BiFunction&amp;lt;? super T,Throwable,? extends U&amp;gt; fn)
public &amp;lt;U&amp;gt; CompletableFuture&amp;lt;U&amp;gt;  handleAsync(BiFunction&amp;lt;? super T,Throwable,? extends U&amp;gt; fn, Executor executor)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Handler ä¸ whenComplete çš„åŒºåˆ«æ˜¯ handler æ˜¯å¯ä»¥è¿”å›ä¸€ä¸ªæ–°çš„ CompletableFuture ç±»å‹çš„ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;CompletableFuture&amp;lt;Integer&amp;gt; f1 = CompletableFuture.supplyAsync(() -&amp;gt; {
    return &quot;hahaha&quot;;
}).handle((r, e) -&amp;gt; {
    return 1;
});
&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li readability=&quot;11&quot;&gt;
&lt;p&gt;æ‹¿åˆ°ä¸Šä¸€ä¸ªä»»åŠ¡çš„ç»“æœåšåç»­æ“ä½œï¼Œ thenApplyæ–¹æ³•&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public &amp;lt;U&amp;gt; CompletableFuture&amp;lt;U&amp;gt;  thenApply(Function&amp;lt;? super T,? extends U&amp;gt; fn)
public &amp;lt;U&amp;gt; CompletableFuture&amp;lt;U&amp;gt;  thenApplyAsync(Function&amp;lt;? super T,? extends U&amp;gt; fn)
public &amp;lt;U&amp;gt; CompletableFuture&amp;lt;U&amp;gt;  thenApplyAsync(Function&amp;lt;? super T,? extends U&amp;gt; fn, Executor executor)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ³¨æ„åˆ° thenApply æ–¹æ³•çš„å‚æ•°ä¸­æ˜¯æ²¡æœ‰ Throwableï¼Œè¿™å°±æ„å‘³ç€å¦‚æœ‰æœ‰å¼‚å¸¸å°±ä¼šç«‹å³å¤±è´¥ï¼Œä¸èƒ½åœ¨å¤„ç†é€»è¾‘å†…å¤„ç†ã€‚ä¸” thenApply è¿”å›çš„ä¹Ÿæ˜¯æ–°çš„ CompletableFutureã€‚ è¿™å°±æ˜¯å®ƒä¸å‰é¢ä¸¤ä¸ªçš„åŒºåˆ«ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;9&quot;&gt;
&lt;p&gt;æ‹¿åˆ°ä¸Šä¸€ä¸ªä»»åŠ¡çš„ç»“æœåšåç»­æ“ä½œï¼Œå¯ä»¥ä¸è¿”å›ä»»ä½•å€¼ï¼ŒthenAcceptæ–¹æ³•&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public CompletableFuture&amp;lt;Void&amp;gt;  thenAccept(Consumer&amp;lt;? super T&amp;gt; action)
public CompletableFuture&amp;lt;Void&amp;gt;  thenAcceptAsync(Consumer&amp;lt;? super T&amp;gt; action)
public CompletableFuture&amp;lt;Void&amp;gt;  thenAcceptAsync(Consumer&amp;lt;? super T&amp;gt; action, Executor executor)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;çœ‹è¿™é‡Œçš„ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;CompletableFuture.supplyAsync(() -&amp;gt; {
  return &quot;result&quot;;
}).thenAccept(r -&amp;gt; {
  System.out.println(r);
}).thenAccept(r -&amp;gt; {
  System.out.println(r);
});
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ‰§è¡Œå®Œæ¯•æ˜¯ä¸ä¼šè¿”å›ä»»ä½•å€¼çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;CompletableFuture çš„ç‰¹æ€§æç°åœ¨æ‰§è¡Œå®Œ runAsync æˆ–è€… supplyAsync ä¹‹åçš„æ“ä½œä¸Šã€‚CompletableFuture èƒ½å¤Ÿå°†å›è°ƒæ”¾åˆ°ä¸ä»»åŠ¡ä¸åŒçš„çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œä¹Ÿèƒ½å°†å›è°ƒä½œä¸ºç»§ç»­æ‰§è¡Œçš„åŒæ­¥å‡½æ•°ï¼Œåœ¨ä¸ä»»åŠ¡ç›¸åŒçš„çº¿ç¨‹ä¸­æ‰§è¡Œã€‚å®ƒé¿å…äº†ä¼ ç»Ÿå›è°ƒæœ€å¤§çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯èƒ½å¤Ÿå°†æ§åˆ¶æµåˆ†ç¦»åˆ°ä¸åŒçš„äº‹ä»¶å¤„ç†å™¨ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–å½“ä½ ä¾èµ– CompletableFuture çš„è®¡ç®—ç»“æœæ‰èƒ½è¿›è¡Œä¸‹ä¸€æ­¥çš„æ—¶å€™ï¼Œæ— éœ€æ‰‹åŠ¨åˆ¤æ–­å½“å‰è®¡ç®—æ˜¯å¦å®Œæˆï¼Œå¯ä»¥é€šè¿‡ CompletableFuture çš„äº‹ä»¶ç›‘å¬è‡ªåŠ¨å»å®Œæˆã€‚&lt;/p&gt;
&lt;h4 id=&quot;netty-ä¸­çš„å¼‚æ­¥ç¼–ç¨‹&quot;&gt;Netty ä¸­çš„å¼‚æ­¥ç¼–ç¨‹&lt;/h4&gt;
&lt;p&gt;è¯´ Netty ä¸­çš„å¼‚æ­¥ç¼–ç¨‹ä¹‹å‰å…ˆè¯´ä¸€ä¸ªå¼‚æ­¥ç¼–ç¨‹æ¨¡å‹ï¼šFuture/Promiseå¼‚æ­¥æ¨¡å‹ã€‚&lt;/p&gt;
&lt;blockquote readability=&quot;12.089810017271&quot;&gt;
&lt;p&gt;futureå’Œpromiseèµ·æºäº&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E5%87%BD%E6%95%B8%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80&quot;&gt;å‡½æ•°å¼ç¼–ç¨‹&lt;/a&gt;å’Œç›¸å…³èŒƒä¾‹ï¼ˆå¦‚&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E9%82%8F%E8%BC%AF%E7%B7%A8%E7%A8%8B&quot;&gt;é€»è¾‘ç¼–ç¨‹&lt;/a&gt; ï¼‰ï¼Œç›®çš„æ˜¯å°†å€¼ï¼ˆfutureï¼‰ä¸å…¶è®¡ç®—æ–¹å¼ï¼ˆpromiseï¼‰åˆ†ç¦»ï¼Œä»è€Œå…è®¸æ›´çµæ´»åœ°è¿›è¡Œè®¡ç®—ï¼Œç‰¹åˆ«æ˜¯é€šè¿‡å¹¶è¡ŒåŒ–ã€‚&lt;/p&gt;
&lt;p&gt;Future è¡¨ç¤ºç›®æ ‡è®¡ç®—çš„è¿”å›å€¼ï¼ŒPromise è¡¨ç¤ºè®¡ç®—çš„æ–¹å¼ï¼Œè¿™ä¸ªæ¨¡å‹å°†è¿”å›ç»“æœå’Œè®¡ç®—é€»è¾‘åˆ†ç¦»ï¼Œç›®çš„æ˜¯ä¸ºäº†è®©è®¡ç®—é€»è¾‘ä¸å½±å“è¿”å›ç»“æœï¼Œä»è€ŒæŠ½è±¡å‡ºä¸€å¥—å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹ã€‚é‚£è®¡ç®—é€»è¾‘å¦‚ä½•ä¸ç»“æœå…³è”å‘¢ï¼Ÿå®ƒä»¬ä¹‹é—´çš„çº½å¸¦å°±æ˜¯ callbackã€‚&lt;/p&gt;
&lt;p&gt;å¼•ç”¨è‡ªï¼š&lt;a href=&quot;https://zh.wikipedia.org/wiki/Future%E4%B8%8Epromise&quot;&gt;https://zh.wikipedia.org/wiki/Future%E4%B8%8Epromise&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨ Netty ä¸­çš„å¼‚æ­¥ç¼–ç¨‹å°±æ˜¯åŸºäºè¯¥æ¨¡å‹æ¥å®ç°ã€‚Netty ä¸­éå¸¸å¤šçš„å¼‚æ­¥è°ƒç”¨ï¼Œæœ€ç®€å•çš„ä¾‹å­å°±æ˜¯æˆ‘ä»¬ Server å’Œ Client ç«¯å¯åŠ¨çš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;p&gt;Serverï¼š&lt;br/&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1607781/202004/1607781-20200421074338686-31875767.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Clientï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1607781/202004/1607781-20200421074349869-1906798285.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Netty ä¸­ä½¿ç”¨äº†ä¸€ä¸ª ChannelFuture æ¥å®ç°å¼‚æ­¥æ“ä½œï¼Œçœ‹ä¼¼ä¸ Java ä¸­çš„ Future ç›¸ä¼¼ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹ä»£ç ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public interface ChannelFuture extends Future&amp;lt;Void&amp;gt; {
  
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œ ChannelFuture ç»§æ‰¿äº†ä¸€ä¸ª Futureï¼Œè¿™æ˜¯ Java ä¸­çš„ Future å—ï¼Ÿè·Ÿä¸‹å»å‘ç°å¹¶ä¸æ˜¯ JDK çš„ï¼Œè€Œæ˜¯ Netty è‡ªå·±å®ç°çš„ã€‚è¯¥ç±»ä½äºï¼š&lt;code&gt;io.netty.util.concurrent&lt;/code&gt;åŒ…ä¸­ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public interface Future&amp;lt;V&amp;gt; extends java.util.concurrent.Future&amp;lt;V&amp;gt; {
  
  // åªæœ‰IOæ“ä½œå®Œæˆæ—¶æ‰è¿”å›true
  boolean isSuccess();
  // åªæœ‰å½“cancel(boolean)æˆåŠŸå–æ¶ˆæ—¶æ‰è¿”å›true
  boolean isCancellable();
  // IOæ“ä½œå‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œè¿”å›å¯¼è‡´IOæ“ä½œä»¥æ­¤çš„åŸå› ï¼Œå¦‚æœæ²¡æœ‰å¼‚å¸¸ï¼Œè¿”å›null
  Throwable cause();
  // å‘Futureæ·»åŠ äº‹ä»¶ï¼Œfutureå®Œæˆæ—¶ï¼Œä¼šæ‰§è¡Œè¿™äº›äº‹ä»¶ï¼Œå¦‚æœaddæ—¶futureå·²ç»å®Œæˆï¼Œä¼šç«‹å³æ‰§è¡Œç›‘å¬äº‹ä»¶
  Future&amp;lt;V&amp;gt; addListener(GenericFutureListener&amp;lt;? extends Future&amp;lt;? super V&amp;gt;&amp;gt; listener);
  Future&amp;lt;V&amp;gt; addListeners(GenericFutureListener&amp;lt;? extends Future&amp;lt;? super V&amp;gt;&amp;gt;... listeners);
  // ç§»é™¤ç›‘å¬äº‹ä»¶ï¼Œfutureå®Œæˆæ—¶ï¼Œä¸ä¼šè§¦å‘
  Future&amp;lt;V&amp;gt; removeListener(GenericFutureListener&amp;lt;? extends Future&amp;lt;? super V&amp;gt;&amp;gt; listener);
  Future&amp;lt;V&amp;gt; removeListeners(GenericFutureListener&amp;lt;? extends Future&amp;lt;? super V&amp;gt;&amp;gt;... listeners);
  // ç­‰å¾…future done
  Future&amp;lt;V&amp;gt; sync() throws InterruptedException;
  // ç­‰å¾…future doneï¼Œä¸å¯æ‰“æ–­
  Future&amp;lt;V&amp;gt; syncUninterruptibly();
  // ç­‰å¾…futureå®Œæˆ
  Future&amp;lt;V&amp;gt; await() throws InterruptedException;
  // ç­‰å¾…future å®Œæˆï¼Œä¸å¯æ‰“æ–­
  Future&amp;lt;V&amp;gt; awaitUninterruptibly();
  boolean await(long timeout, TimeUnit unit) throws InterruptedException;
  boolean await(long timeoutMillis) throws InterruptedException;
  boolean awaitUninterruptibly(long timeout, TimeUnit unit);
  boolean awaitUninterruptibly(long timeoutMillis);
  // ç«‹åˆ»è·å¾—ç»“æœï¼Œå¦‚æœæ²¡æœ‰å®Œæˆï¼Œè¿”å›null
  V getNow();
  // å¦‚æœæˆåŠŸå–æ¶ˆï¼Œfutureä¼šå¤±è´¥ï¼Œå¯¼è‡´CancellationException
  @Override
  boolean cancel(boolean mayInterruptIfRunning);
  
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Netty è‡ªå·±å®ç°çš„ Future ç»§æ‰¿äº† JDK çš„ Futureï¼Œæ–°å¢äº† &lt;code&gt;sync()&lt;/code&gt; å’Œ &lt;code&gt;await()&lt;/code&gt; ç”¨äºé˜»å¡ç­‰å¾…ï¼Œè¿˜åŠ äº† Listenersï¼Œåªè¦ä»»åŠ¡ç»“æŸå»å›è°ƒ Listener å°±å¯ä»¥äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¸ä¸€å®šè¦ä¸»åŠ¨è°ƒç”¨ &lt;code&gt;isDone()&lt;/code&gt; æ¥è·å–çŠ¶æ€ï¼Œæˆ–é€šè¿‡ &lt;code&gt;get()&lt;/code&gt; é˜»å¡æ–¹æ³•æ¥è·å–å€¼ã€‚&lt;/p&gt;
&lt;p&gt;Nettyçš„ Future ä¸ Java çš„ Future è™½ç„¶ç±»åç›¸åŒï¼Œä½†åŠŸèƒ½ä¸Šç•¥æœ‰ä¸åŒï¼ŒNetty ä¸­å¼•å…¥äº† Promise æœºåˆ¶ã€‚åœ¨ Java çš„ Future ä¸­ï¼Œä¸šåŠ¡é€»è¾‘ä¸ºä¸€ä¸ª Callable æˆ– Runnable å®ç°ç±»ï¼Œè¯¥ç±»çš„ &lt;code&gt;call()&lt;/code&gt;æˆ– &lt;code&gt;run()&lt;/code&gt;æ‰§è¡Œå®Œæ¯•æ„å‘³ç€ä¸šåŠ¡é€»è¾‘çš„å®Œç»“ï¼Œåœ¨ Promise æœºåˆ¶ä¸­ï¼Œå¯ä»¥åœ¨ä¸šåŠ¡é€»è¾‘ä¸­äººå·¥è®¾ç½®ä¸šåŠ¡é€»è¾‘çš„æˆåŠŸä¸å¤±è´¥ï¼Œè¿™æ ·æ›´åŠ æ–¹ä¾¿çš„ç›‘æ§è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;public interface Promise&amp;lt;V&amp;gt; extends Future&amp;lt;V&amp;gt; {
        // è®¾ç½®futureæ‰§è¡Œç»“æœä¸ºæˆåŠŸ
    Promise&amp;lt;V&amp;gt; setSuccess(V result);
        
        // å°è¯•è®¾ç½®futureæ‰§è¡Œç»“æœä¸ºæˆåŠŸ,è¿”å›æ˜¯å¦è®¾ç½®æˆåŠŸ
    boolean trySuccess(V result);
        // è®¾ç½®å¤±è´¥
    Promise&amp;lt;V&amp;gt; setFailure(Throwable cause);
        // å°è¯•è®¾ç½®futureæ‰§è¡Œç»“æœä¸ºå¤±è´¥,è¿”å›æ˜¯å¦è®¾ç½®æˆåŠŸ 
    boolean tryFailure(Throwable cause);
    // è®¾ç½®ä¸ºä¸èƒ½å–æ¶ˆ
    boolean setUncancellable();
        
        // æºç ä¸­ï¼Œä»¥ä¸‹ä¸ºè¦†ç›–äº†Futureçš„æ–¹æ³•ï¼Œä¾‹å¦‚ï¼›
        
        Future&amp;lt;V&amp;gt; addListener(GenericFutureListener&amp;lt;? extends Future&amp;lt;? super V&amp;gt;&amp;gt; listener);
        
        @Override
    Promise&amp;lt;V&amp;gt; addListener(GenericFutureListener&amp;lt;? extends Future&amp;lt;? super V&amp;gt;&amp;gt; listener);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Promise æ¥å£ç»§æ‰¿è‡ª Future æ¥å£ï¼Œé‡ç‚¹æ·»åŠ äº†ä¸Šè¿°å‡ ä¸ªæ–¹æ³•ï¼Œå¯ä»¥äººå·¥è®¾ç½® future çš„æ‰§è¡ŒæˆåŠŸä¸å¤±è´¥ï¼Œå¹¶é€šçŸ¥æ‰€æœ‰ç›‘å¬çš„ listenerã€‚&lt;/p&gt;
&lt;p&gt;ä» Future å’Œ Promise æä¾›çš„æ–¹æ³•æ¥çœ‹ï¼ŒFuture éƒ½æ˜¯ get ç±»å‹çš„æ–¹æ³•ï¼Œä¸»è¦ç”¨æ¥åˆ¤æ–­å½“å‰ä»»åŠ¡çš„çŠ¶æ€ã€‚è€Œ Promise ä¸­æ˜¯ set ç±»å‹çš„æ–¹æ³•ï¼Œä¸»è¦æ¥å¯¹ä»»åŠ¡çš„çŠ¶æ€æ¥è¿›è¡Œæ“ä½œã€‚è¿™é‡Œå°±ä½“ç°å‡ºæ¥å°† ç»“æœå’Œæ“ä½œè¿‡ç¨‹åˆ†ç¦»çš„è®¾è®¡ã€‚&lt;/p&gt;
&lt;p&gt;Promise å®ç°ç±»æ˜¯DefaultPromiseç±»ï¼Œè¯¥ç±»ååˆ†é‡è¦ï¼ŒFuture çš„ listener æœºåˆ¶ä¹Ÿæ˜¯ç”±å®ƒå®ç°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆæ¥åˆ†æä¸€ä¸‹è¯¥ç±»ã€‚å…ˆæ¥çœ‹ä¸€ä¸‹å®ƒçš„é‡è¦å±æ€§ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;// å¯ä»¥åµŒå¥—çš„Listenerçš„æœ€å¤§å±‚æ•°ï¼Œå¯è§æœ€å¤§å€¼ä¸º8
private static final int MAX_LISTENER_STACK_DEPTH = Math.min(8,
                                                           SystemPropertyUtil.getInt(&quot;io.netty.defaultPromise.maxListenerStackDepth&quot;, 8));
// resultå­—æ®µç”±ä½¿ç”¨RESULT_UPDATERæ›´æ–°
@SuppressWarnings(&quot;rawtypes&quot;)
private static final AtomicReferenceFieldUpdater&amp;lt;DefaultPromise, Object&amp;gt; RESULT_UPDATER;
private static final Signal SUCCESS = Signal.valueOf(DefaultPromise.class, &quot;SUCCESS&quot;);
// å¼‚æ­¥æ“ä½œä¸å¯å–æ¶ˆ
private static final Signal UNCANCELLABLE = Signal.valueOf(DefaultPromise.class, &quot;UNCANCELLABLE&quot;);
// å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶ä¿å­˜å¼‚å¸¸åŸå› 
private static final CauseHolder CANCELLATION_CAUSE_HOLDER = new CauseHolder(ThrowableUtil.unknownStackTrace(
  new CancellationException(), DefaultPromise.class, &quot;cancel(...)&quot;));
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ç¬¬ä¸€ä¸ªå¥— listenerï¼Œæ˜¯æŒ‡åœ¨ listener çš„ &lt;code&gt;operationComplete()&lt;/code&gt; æ–¹æ³•ä¸­ï¼Œå¯ä»¥å†æ¬¡ä½¿ç”¨ &lt;code&gt;future.addListener()&lt;/code&gt; ç»§ç»­æ·»åŠ  listenerï¼ŒNetty é™åˆ¶çš„æœ€å¤§å±‚æ•°æ˜¯8ï¼Œç”¨æˆ·å¯ä½¿ç”¨ç³»ç»Ÿå˜é‡&lt;code&gt;io.netty.defaultPromise.maxListenerStackDepth&lt;/code&gt;è®¾ç½®ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ›´å¥½çš„è¯´æ˜ï¼Œå…ˆå†™äº†ä¸€ä¸ªç¤ºä¾‹ï¼ŒNetty ä¸­çš„ Future/Promiseæ¨¡å‹æ˜¯å¯ä»¥å•ç‹¬æ‹¿å‡ºæ¥ä½¿ç”¨çš„ã€‚&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;
import io.netty.channel.nio.NioEventLoopGroup;
import io.netty.util.concurrent.DefaultPromise;
import io.netty.util.concurrent.Promise;

import java.util.concurrent.TimeUnit;

/**
 * @author rickiyang
 * @date 2020-04-19
 * @Desc TODO
 */
public class PromiseTest {

    public static void main(String[] args) {
        PromiseTest testPromise = new PromiseTest();
        Promise&amp;lt;String&amp;gt; promise = testPromise.doSomething(&quot;å“ˆå“ˆ&quot;);
        promise.addListener(future -&amp;gt; System.out.println(promise.get()+&quot;, something is done&quot;));

    }

    /**
     * åˆ›å»ºä¸€ä¸ªDefaultPromiseå¹¶è¿”å›ï¼Œå°†ä¸šåŠ¡é€»è¾‘æ”¾å…¥çº¿ç¨‹æ± ä¸­æ‰§è¡Œ
     * @param value
     * @return
     */
    private Promise&amp;lt;String&amp;gt; doSomething(String value) {
        NioEventLoopGroup loop = new NioEventLoopGroup();
        DefaultPromise&amp;lt;String&amp;gt; promise = new DefaultPromise&amp;lt;&amp;gt;(loop.next());
        loop.schedule(() -&amp;gt; {
            try {
                Thread.sleep(1000);
                promise.setSuccess(&quot;æ‰§è¡ŒæˆåŠŸã€‚&quot; + value);
                return promise;
            } catch (InterruptedException ignored) {
                promise.setFailure(ignored);
            }
            return promise;
        }, 0, TimeUnit.SECONDS);
        return promise;
    }

}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é€šè¿‡è¿™ä¸ªä¾‹å­å¯ä»¥çœ‹åˆ°ï¼ŒPromise èƒ½å¤Ÿåœ¨ä¸šåŠ¡é€»è¾‘çº¿ç¨‹ä¸­é€šçŸ¥ Future æˆåŠŸæˆ–å¤±è´¥ï¼Œç”±äº Promise ç»§æ‰¿äº† Netty çš„ Futureï¼Œå› æ­¤å¯ä»¥åŠ å…¥ç›‘å¬äº‹ä»¶ã€‚è€Œ Future å’Œ Promise çš„å¥½å¤„åœ¨äºï¼Œè·å–åˆ° Promise å¯¹è±¡åå¯ä»¥ä¸ºå…¶è®¾ç½®å¼‚æ­¥è°ƒç”¨å®Œæˆåçš„æ“ä½œï¼Œç„¶åç«‹å³ç»§ç»­å»åšå…¶ä»–ä»»åŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;æ¥çœ‹ä¸€ä¸‹ addListener() æ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Override
public Promise&amp;lt;V&amp;gt; addListener(GenericFutureListener&amp;lt;? extends Future&amp;lt;? super V&amp;gt;&amp;gt; listener) {
  checkNotNull(listener, &quot;listener&quot;);
        //å¹¶å‘æ§åˆ¶ï¼Œä¿è¯å¤šçº¿ç¨‹æƒ…å†µä¸‹åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œæ·»åŠ æ“ä½œ
  synchronized (this) {
    addListener0(listener);
  }
        // æ“ä½œå®Œæˆï¼Œé€šçŸ¥ç›‘å¬è€…
  if (isDone()) {
    notifyListeners();
  }

  return this;
}



private void addListener0(GenericFutureListener&amp;lt;? extends Future&amp;lt;? super V&amp;gt;&amp;gt; listener) {
  if (listeners == null) {
    listeners = listener;
  } else if (listeners instanceof DefaultFutureListeners) {
    // å¦‚æœå½“å‰Promiseå®ä¾‹æŒæœ‰listenersçš„æ˜¯DefaultFutureListenersç±»å‹ï¼Œåˆ™è°ƒç”¨å®ƒçš„add()æ–¹æ³•è¿›è¡Œæ·»åŠ 
    ((DefaultFutureListeners) listeners).add(listener);
  } else {
    // æ­¥å…¥è¿™é‡Œè¯´æ˜å½“å‰Promiseå®ä¾‹æŒæœ‰listenersä¸ºå•ä¸ªGenericFutureListenerå®ä¾‹ï¼Œéœ€è¦è½¬æ¢ä¸ºDefaultFutureListenerså®ä¾‹
    listeners = new DefaultFutureListeners((GenericFutureListener&amp;lt;? extends Future&amp;lt;V&amp;gt;&amp;gt;) listeners, listener);
  }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œçœ‹åˆ°æœ‰ä¸€ä¸ªå…¨å±€å˜é‡ &lt;code&gt;listeners&lt;/code&gt;ï¼Œæˆ‘ä»¬çœ‹åˆ°ä»–çš„å®šä¹‰ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;private Object listeners;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸ºå•¥ä¼šæ˜¯ä¸€ä¸ª Object ç±»å‹çš„å¯¹è±¡å‘¢ï¼Œä¸æ˜¯åº”è¯¥æ˜¯ List æˆ–è€…æ˜¯æ•°ç»„æ‰å¯¹å˜›ã€‚Nettyä¹‹æ‰€ä»¥è¿™æ ·è®¾è®¡ï¼Œæ˜¯å› ä¸ºå¤§å¤šæ•°æƒ…å†µä¸‹ listener åªæœ‰ä¸€ä¸ªï¼Œç”¨é›†åˆå’Œæ•°ç»„éƒ½ä¼šé€ æˆæµªè´¹ã€‚å½“åªæœ‰ä¸€ä¸ª listener æ—¶ï¼Œè¯¥å­—æ®µä¸ºä¸€ä¸ª GenericFutureListener å¯¹è±¡ï¼›å½“å¤šäºä¸€ä¸ª listener æ—¶ï¼Œè¯¥å­—æ®µä¸º DefaultFutureListeners ï¼Œå¯ä»¥å‚¨å­˜å¤šä¸ª listenerã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å†æ¥çœ‹ &lt;code&gt;notifyListeners()&lt;/code&gt; æ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;private void notifyListeners() {
  EventExecutor executor = executor();
  //å½“å‰EventLoopçº¿ç¨‹éœ€è¦æ£€æŸ¥listeneråµŒå¥—
  if (executor.inEventLoop()) {
    final InternalThreadLocalMap threadLocals = InternalThreadLocalMap.get();
    //è¿™é‡Œæ˜¯å½“å‰listenerçš„åµŒå¥—å±‚æ•°
    final int stackDepth = threadLocals.futureListenerStackDepth();
    if (stackDepth &amp;lt; MAX_LISTENER_STACK_DEPTH) {
      threadLocals.setFutureListenerStackDepth(stackDepth + 1);
      try {
        notifyListenersNow();
      } finally {
        threadLocals.setFutureListenerStackDepth(stackDepth);
      }
      return;
    }
  }
        //å¤–éƒ¨çº¿ç¨‹ç›´æ¥æäº¤ç»™æ–°çº¿ç¨‹æ‰§è¡Œ
  safeExecute(executor, new Runnable() {
    @Override
    public void run() {
      notifyListenersNow();
    }
  });
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œæœ‰ä¸ªç–‘é—®å°±æ˜¯ä¸ºä»€ä¹ˆè¦è®¾ç½®å½“å‰çš„è°ƒç”¨æ ˆæ·±åº¦+1ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ç€çœ‹çœŸæ­£æ‰§è¡Œé€šçŸ¥çš„æ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;private void notifyListenersNow() {
  Object listeners;
  synchronized (this) {
     // æ­£åœ¨é€šçŸ¥æˆ–å·²æ²¡æœ‰ç›‘å¬è€…ï¼ˆå¤–éƒ¨çº¿ç¨‹åˆ é™¤ï¼‰ç›´æ¥è¿”å›
    if (notifyingListeners || this.listeners == null) {
      return;
    }
    notifyingListeners = true;
    listeners = this.listeners;
    this.listeners = null;
  }
  for (;;) {
    //åªæœ‰ä¸€ä¸ªlistener
    if (listeners instanceof DefaultFutureListeners) {
      notifyListeners0((DefaultFutureListeners) listeners);
    } else {
      //æœ‰å¤šä¸ªlistener
      notifyListener0(this, (GenericFutureListener&amp;lt;? extends Future&amp;lt;V&amp;gt;&amp;gt;) listeners);
    }
    synchronized (this) {
      if (this.listeners == null) {
        // æ‰§è¡Œå®Œæ¯•ä¸”å¤–éƒ¨çº¿ç¨‹æ²¡æœ‰å†æ·»åŠ ç›‘å¬è€…
        notifyingListeners = false;
        return;
      }
      //å¤–éƒ¨çº¿ç¨‹æ·»åŠ äº†æ–°çš„ç›‘å¬è€…ç»§ç»­æ‰§è¡Œ
      listeners = this.listeners;
      this.listeners = null;
    }
  }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Netty ä¸­ DefalutPromise æ˜¯ä¸€ä¸ªéå¸¸å¸¸ç”¨çš„ç±»ï¼Œè¿™æ˜¯ Promise å®ç°çš„åŸºç¡€ã€‚DefaultChannelPromise DefalutPromise çš„å­ç±»ï¼ŒåŠ å…¥äº† channel è¿™ä¸ªå±æ€§ã€‚&lt;/p&gt;
&lt;p&gt;Promise ç›®å‰æ”¯æŒä¸¤ç§ç±»å‹çš„ç›‘å¬å™¨ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;GenericFutureListenerï¼šæ”¯æŒæ³›å‹çš„ Future ï¼›&lt;/li&gt;
&lt;li&gt;GenericProgressiveFutureListenerï¼šå®ƒæ˜¯&lt;code&gt;GenericFutureListener&lt;/code&gt;çš„å­ç±»ï¼Œæ”¯æŒè¿›åº¦è¡¨ç¤ºå’Œæ”¯æŒæ³›å‹çš„Future ç›‘å¬å™¨ï¼ˆæœ‰äº›åœºæ™¯éœ€è¦å¤šä¸ªæ­¥éª¤å®ç°ï¼Œç±»ä¼¼äºè¿›åº¦æ¡é‚£æ ·ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ä¸ºäº†è®© Promise æ”¯æŒå¤šä¸ªç›‘å¬å™¨ï¼ŒNetty æ·»åŠ äº†ä¸€ä¸ªé»˜è®¤ä¿®é¥°ç¬¦ä¿®é¥°çš„&lt;code&gt;DefaultFutureListeners&lt;/code&gt;ç±»ç”¨äºä¿å­˜ç›‘å¬å™¨å®ä¾‹æ•°ç»„ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;final class DefaultFutureListeners {

    private GenericFutureListener&amp;lt;? extends Future&amp;lt;?&amp;gt;&amp;gt;[] listeners;
    private int size;
    private int progressiveSize; // the number of progressive listeners
    
    // è¿™ä¸ªæ„é€ ç›¸å¯¹ç‰¹åˆ«ï¼Œæ˜¯ä¸ºäº†è®©Promiseä¸­çš„listenersï¼ˆObjectç±»å‹ï¼‰å®ä¾‹ç”±å•ä¸ªGenericFutureListenerå®ä¾‹è½¬æ¢ä¸ºDefaultFutureListenersç±»å‹
    @SuppressWarnings(&quot;unchecked&quot;)
    DefaultFutureListeners(GenericFutureListener&amp;lt;? extends Future&amp;lt;?&amp;gt;&amp;gt; first, GenericFutureListener&amp;lt;? extends Future&amp;lt;?&amp;gt;&amp;gt; second) {
        listeners = new GenericFutureListener[2];
        listeners[0] = first;
        listeners[1] = second;
        size = 2;
        if (first instanceof GenericProgressiveFutureListener) {
            progressiveSize ++;
        }
        if (second instanceof GenericProgressiveFutureListener) {
            progressiveSize ++;
        }
    }

    public void add(GenericFutureListener&amp;lt;? extends Future&amp;lt;?&amp;gt;&amp;gt; l) {
        GenericFutureListener&amp;lt;? extends Future&amp;lt;?&amp;gt;&amp;gt;[] listeners = this.listeners;
        final int size = this.size;
        // æ³¨æ„è¿™é‡Œï¼Œæ¯æ¬¡æ‰©å®¹æ•°ç»„é•¿åº¦æ˜¯åŸæ¥çš„2å€
        if (size == listeners.length) {
            this.listeners = listeners = Arrays.copyOf(listeners, size &amp;lt;&amp;lt; 1);
        }
        // æŠŠå½“å‰çš„GenericFutureListeneråŠ å…¥æ•°ç»„ä¸­
        listeners[size] = l;
        // ç›‘å¬å™¨æ€»æ•°é‡åŠ 1
        this.size = size + 1;
        // å¦‚æœä¸ºGenericProgressiveFutureListenerï¼Œåˆ™å¸¦è¿›åº¦æŒ‡ç¤ºçš„ç›‘å¬å™¨æ€»æ•°é‡åŠ 1
        if (l instanceof GenericProgressiveFutureListener) {
            progressiveSize ++;
        }
    }

    public void remove(GenericFutureListener&amp;lt;? extends Future&amp;lt;?&amp;gt;&amp;gt; l) {
        final GenericFutureListener&amp;lt;? extends Future&amp;lt;?&amp;gt;&amp;gt;[] listeners = this.listeners;
        int size = this.size;
        for (int i = 0; i &amp;lt; size; i ++) {
            if (listeners[i] == l) {
                // è®¡ç®—éœ€è¦éœ€è¦ç§»åŠ¨çš„ç›‘å¬å™¨çš„ä¸‹æ ‡
                int listenersToMove = size - i - 1;
                if (listenersToMove &amp;gt; 0) {
                    // listenersToMoveåé¢çš„å…ƒç´ å…¨éƒ¨ç§»åŠ¨åˆ°æ•°ç»„çš„å‰ç«¯
                    System.arraycopy(listeners, i + 1, listeners, i, listenersToMove);
                }
                // å½“å‰ç›‘å¬å™¨æ€»é‡çš„æœ€åä¸€ä¸ªä½ç½®è®¾ç½®ä¸ºnullï¼Œæ•°é‡å‡1
                listeners[-- size] = null;
                this.size = size;
                // å¦‚æœç›‘å¬å™¨æ˜¯GenericProgressiveFutureListenerï¼Œåˆ™å¸¦è¿›åº¦æŒ‡ç¤ºçš„ç›‘å¬å™¨æ€»æ•°é‡å‡1
                if (l instanceof GenericProgressiveFutureListener) {
                    progressiveSize --;
                }
                return;
            }
        }
    }
    
    // è¿”å›ç›‘å¬å™¨å®ä¾‹æ•°ç»„
    public GenericFutureListener&amp;lt;? extends Future&amp;lt;?&amp;gt;&amp;gt;[] listeners() {
        return listeners;
    }
    
    // è¿”å›ç›‘å¬å™¨æ€»æ•°é‡
    public int size() {
        return size;
    }
    
    // è¿”å›å¸¦è¿›åº¦æŒ‡ç¤ºçš„ç›‘å¬å™¨æ€»æ•°é‡
    public int progressiveSize() {
        return progressiveSize;
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä»¥ä¸Šå°±æ˜¯å…³äº Promise å’Œç›‘å¬å™¨ç›¸å…³çš„å®ç°åˆ†æï¼Œå†å›åˆ°ä¹‹å‰çš„å¯åŠ¨ç±»ï¼Œæ˜¯ä¸æ˜¯è¿˜æœ‰ä¸€ä¸ª sync() æ–¹æ³•ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;@Override
public Promise&amp;lt;V&amp;gt; sync() throws InterruptedException {
  await();
  rethrowIfFailed();
  return this;
}


public Promise&amp;lt;V&amp;gt; await() throws InterruptedException {
  // å¼‚æ­¥æ“ä½œå·²ç»å®Œæˆï¼Œç›´æ¥è¿”å›
  if (isDone()) {
    return this;    
  }
  if (Thread.interrupted()) {
    throw new InterruptedException(toString());
  }
  // æ­»é”æ£€æµ‹
  checkDeadLock();
  // åŒæ­¥ä½¿ä¿®æ”¹waitersçš„çº¿ç¨‹åªæœ‰ä¸€ä¸ª
  synchronized (this) {
    while (!isDone()) { // ç­‰å¾…ç›´åˆ°å¼‚æ­¥æ“ä½œå®Œæˆ
      incWaiters();   // ++waiters;
      try {
        wait(); // JDKæ–¹æ³•
      } finally {
        decWaiters(); // --waiters
      }
    }
  }
  return this;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œå…¶å®å°±æ˜¯ä¸€ä¸ªåŒæ­¥æ£€æµ‹å½“å‰äº‹ä»¶æ˜¯å¦å®Œæˆçš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸Šå°±æ˜¯ Netty ä¸­å®ç°çš„ Future/Promise å¼‚æ­¥å›è°ƒæœºåˆ¶ã€‚å®ç°å¹¶ä¸æ˜¯å¾ˆéš¾æ‡‚ï¼Œä»£ç å¾ˆå€¼å¾—å­¦ä¹ ã€‚é™¤äº† Netty ä¸­å®ç°äº† Future/Promiseæ¨¡å‹ï¼Œåœ¨Guavaä¸­ä¹Ÿæœ‰ç›¸å…³çš„å®ç°ï¼Œå¤§å®¶æ—¥å¸¸ä½¿ç”¨å¯ä»¥çœ‹ä¹ æƒ¯å¼•ç”¨ç›¸å…³çš„åŒ…ã€‚&lt;/p&gt;
&lt;p&gt;Guavaå®ç°ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;&amp;lt;dependency&amp;gt;
   &amp;lt;groupId&amp;gt;com.google.guava&amp;lt;/groupId&amp;gt;
   &amp;lt;artifactId&amp;gt;guava&amp;lt;/artifactId&amp;gt;
   &amp;lt;version&amp;gt;21.0&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;
  
ListeningExecutorService service = MoreExecutors.listeningDecorator(Executors.newSingleThreadExecutor());
ListenableFuture&amp;lt;Integer&amp;gt; future = service.submit(new Callable&amp;lt;Integer&amp;gt;() {
    public Integer call() throws Exception {
        TimeUnit.SECONDS.sleep(5);
        return 100;
    }
});
Futures.addCallback(future, new FutureCallback&amp;lt;Integer&amp;gt;() {
    public void onSuccess(Integer result) {
        System.out.println(&quot;success:&quot; + result);
    }

    public void onFailure(Throwable throwable) {
        System.out.println(&quot;fail, e = &quot; + throwable);
    }
});

Thread.currentThread().join();
&lt;/code&gt;
&lt;/pre&gt;</description>
<pubDate>Mon, 20 Apr 2020 23:45:00 +0000</pubDate>
<dc:creator>rickiyang</dc:creator>
<og:description>Netty ä¸­çš„å¼‚æ­¥ç¼–ç¨‹ Future å’Œ Promise</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/rickiyang/p/12742091.html</dc:identifier>
</item>
<item>
<title>ä»é›¶å¼€å§‹å¼€å‘å’Œæ­å»ºç›´æ’­å¹³å°-æ•™ç¨‹æ±‡æ€»ç¯‡ - eguid</title>
<link>http://www.cnblogs.com/eguid/p/12741787.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/eguid/p/12741787.html</guid>
<description>&lt;div class=&quot;toc&quot;&gt;
&lt;h3&gt;ä»é›¶å¼€å§‹å¼€å‘å’Œæ­å»ºç›´æ’­å¹³å°-æ•™ç¨‹æ±‡æ€»ç¯‡&lt;/h3&gt;
&lt;/div&gt;

&lt;div class=&quot;cl-preview-section&quot; readability=&quot;10&quot;&gt;
&lt;p&gt;ä¹‹å‰ä¹Ÿåˆ†äº«è¿‡ä¸å°‘é›¶æ•£çš„æŠ€æœ¯æ–‡ç« ï¼ŒåŒ…æ‹¬&lt;strong&gt;éŸ³è§†é¢‘ã€å›¾åƒå¤„ç†å’Œæµåª’ä½“æœåŠ¡&lt;/strong&gt;ç›¸å…³çš„æŠ€æœ¯éƒ½ç•¥æœ‰æ¶‰çŒã€‚ä½†æ˜¯ï¼Œéƒ½å†™å¾—æ¯”è¾ƒåå…·ä½“åŠŸèƒ½çš„å®ç°ï¼Œä¸å¤Ÿç³»ç»Ÿã€‚å› æ­¤ä¹Ÿè®©å¾ˆå¤šè¯»è€…äº§ç”Ÿè¿·æƒ‘å’Œä¸è§£ã€‚éœ€è¦è¯»è€…å¯¹æµåª’ä½“ç›¸å…³çš„æ¶æ„å’ŒçŸ¥è¯†æœ‰ä¸€å®šçš„äº†è§£ä¹‹åæ‰èƒ½ä¸Šæ‰‹ã€‚&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;cl-preview-section&quot; readability=&quot;10&quot;&gt;
&lt;p&gt;å¯¹äºå¼€å‘è€…è€Œè¨€ï¼Œè¿™äº›éƒ½è¿˜å¥½è¯´ã€‚ä½†æ˜¯å¯¹äºéæŠ€æœ¯å‹è¯»è€…æ¥è¯´ï¼Œå¯ä»¥è¯´æ˜¯ç›´æ¥åŠé€€äº†ï¼Œå› æ­¤æœ¬ç³»åˆ—æ–‡ç« åˆ†ä¸ºé¢å‘å¼€å‘è€…å¾—&lt;strong&gt;æŠ€æœ¯å‘&lt;/strong&gt; å’Œ &lt;strong&gt;éæŠ€æœ¯å‘&lt;/strong&gt;ä¸¤ç§æ•™ç¨‹åˆ†åˆ«æ›´æ–°ï¼Œå¯¹äºâ€œéæŠ€æœ¯å‘â€ç³»åˆ—æ•™ç¨‹å°†ä¸ä¼šå‡ºç°ä»£ç ç¼–å†™ï¼ŒåŠ›æ±‚é€šä¿—æ˜“æ‡‚ï¼›å¯¹äºå¼€å‘è€…å¾—â€œæŠ€æœ¯å‘â€ç³»åˆ—æ•™ç¨‹å°†ä¼šå‡ºç°å¤§é‡å¾—ä»£ç å¼€å‘å’Œä¼˜åŒ–æ•™ç¨‹ã€‚&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;cl-preview-section&quot; readability=&quot;9&quot;&gt;
&lt;p&gt;æœ¬ç³»åˆ—æ–‡ç« å°†ä»¥å…·ä½“çš„åº”ç”¨åœºæ™¯ä½œä¸ºå®æˆ˜æ•™ç¨‹ï¼Œç³»ç»Ÿçš„è®²è§£æ•´ä¸ªç›´æ’­å¹³å°çš„æ¶æ„æ˜¯å¦‚ä½•è®¾è®¡çš„ï¼Œå¦‚ä½•å¼€å‘è¿™äº›å­ç³»ç»Ÿæˆ–è€…æ¨¡å—åŠŸèƒ½ï¼Œä»è€Œæ­å»ºä¸€å¥—å®Œæ•´çš„ç›´æ’­å¹³å°ã€‚&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;cl-preview-section&quot; readability=&quot;7&quot;&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;è¡¥å……ï¼šæœ¬æ•™ç¨‹ä¹Ÿé€‚ç”¨äº&lt;strong&gt;è§†é¢‘ä¼šè®®&lt;/strong&gt;ï¼Œ&lt;strong&gt;è§†é¢‘ç›‘æ§&lt;/strong&gt;ç­‰åº”ç”¨åœºæ™¯ã€‚è§†é¢‘ä¼šè®®ä¸ç›´æ’­ä¸­çš„è¿éº¦åŸç†æ˜¯ç›¸åŒçš„ï¼Œè§†é¢‘ç›‘æ§ä¸ç›´æ’­å¹³å°çš„å·®åˆ«æ˜¯æ²¡æœ‰ä¸»åŠ¨æ¨æµç«¯ï¼Œå¤šäº†æ‹‰æµæˆ–è€…è½¬æµç«¯ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;p&gt;
&lt;h2&gt;ç›´æ’­å¹³å°ç»“æ„&lt;/h2&gt;
&lt;/p&gt;
&lt;div class=&quot;cl-preview-section&quot; readability=&quot;10&quot;&gt;
&lt;p&gt;ä¸ºäº†é˜²æ­¢å‡ºç°ç›²äººæ‘¸è±¡çš„é—®é¢˜ã€‚ä»¥æˆ‘ä»¬å°†ç”±é¢åˆ°ç‚¹çš„ä»æ•´ä½“äº†è§£æ•´ä¸ªç›´æ’­å¹³å°çš„ç»“æ„ï¼Œç„¶åæŠŠè¿™ä¸ªé¢åˆ†è§£æˆä¸€ä¸ªä¸ªå­ç³»ç»Ÿæˆ–è€…å…·ä½“æ¨¡å—åŠŸèƒ½ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬æ‰èƒ½å¤Ÿæ¸…æ™°çš„äº†è§£ç›´æ’­å¹³å°ä¸‹æ¯ä¸ªç³»ç»Ÿæ¨¡å—çš„åŠŸèƒ½æ˜¯åšä»€ä¹ˆçš„ï¼Œå¦‚ä½•è¿è¡Œçš„ã€‚&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;cl-preview-section&quot; readability=&quot;9&quot;&gt;
&lt;p&gt;æœ€ç®€å•çš„ç›´æ’­å¹³å°ç»“æ„ï¼š&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/2020042023071833.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2VndWlkXzE=,size_16,color_FFFFFF,t_70#pic_center&quot; alt=&quot;æœ€ç®€å•çš„ç›´æ’­å¹³å°æ¶æ„&quot; width=&quot;300&quot; height=&quot;300&quot;/&gt;äº‹å®ä¸Šæˆ‘ä»¬åªè¦æ­å»ºäº†æµåª’ä½“æœåŠ¡ï¼Œå°±å·²ç»å®Œæˆæœ€ç®€å•çš„ç›´æ’­å¹³å°äº†ã€‚å‰©ä¸‹çš„å°±æ˜¯ç­‰ç›´æ’­UPä¸»æ¨æµï¼Œç„¶åç”¨æˆ·è§‚çœ‹å°±å¯ä»¥äº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•ã€‚&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;cl-preview-section&quot; readability=&quot;10&quot;&gt;
&lt;p&gt;å½“ç„¶äº†ï¼Œå…‰æ˜¯è¿™æ ·è¿˜ä¸è¡Œï¼Œç”¨æˆ·ä¸çŸ¥é“å¦‚ä½•è·å–å’Œæ’­æ”¾ä½ å¾—ç›´æ’­åœ°å€ï¼Œç›´æ’­UPä¸»ä¹Ÿä¸çŸ¥é“å¾€å“ªé‡Œæ¨æµï¼Œç›´æ’­å¹³å°å°±æ˜¯å¸®åŠ©ç”¨æˆ·æ˜¾ç¤ºç›´æ’­UPä¸»çš„æˆ¿é—´ï¼Œæ–¹ä¾¿ç­›é€‰å’Œè§‚çœ‹ï¼Œä¹Ÿæ–¹ä¾¿ç”¨æˆ·å‘å¼¹å¹•èƒ½å¤Ÿå’Œæ­£åœ¨ç›´æ’­çš„upä¸»äº¤æµã€‚è‡³äºç›´æ’­UPä¸»è¿™å—çš„æ¨æµï¼Œè¿˜æ˜¯éœ€è¦çŸ¥é“ç›´æ’­åœ°å€å¹¶ä½¿ç”¨OBSç­‰æ¨æµå·¥å…·è¿›è¡Œæ¨æµæ‰å¯ä»¥ç›´æ’­ã€‚&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;cl-preview-section&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;&lt;strong&gt;CDNåˆ†å‘&lt;/strong&gt;ï¼š&lt;br/&gt;ä¸ºä»€ä¹ˆä¼šç”¨åˆ°CDNåˆ†å‘ï¼Œè¿™æ˜¯å› ä¸ºä½¿ç”¨ç›´æ’­å¹³å°è§‚çœ‹ç›´æ’­çš„ç”¨æˆ·å¤šäº†ä»¥åå‡ºç°äº†ä¸€ä¸ªé‡å¤§é—®é¢˜ï¼Œé‚£å°±æ˜¯å¸¦å®½ä¸å¤Ÿäº†ã€‚&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;cl-preview-section&quot; readability=&quot;7.5&quot;&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;ä¸¾ä¸ªä¾‹å­ï¼šå‡è®¾ä½ åªæœ‰ä¸€ä¸ªç›´æ’­UPä¸»åœ¨æ¨ä¸€è·¯1080Pé«˜æ¸…ç›´æ’­ï¼Œç ç‡æ˜¯4Mbps/sï¼ˆæ¯ç§’512KBï¼‰ï¼Œç°åœ¨æœ‰ä¸€åƒä¸ªç”¨æˆ·åŒæ—¶åœ¨è§‚çœ‹ï¼Œæ¯ä¸ªç”¨æˆ·æ‹‰æµä¹Ÿæ˜¯4Mbps/sï¼ˆæ¯ç§’512KBï¼‰ï¼Œé‚£ä¹ˆä¸€åƒäººåŒæ—¶å°±éœ€è¦4000Mbp/sï¼ˆæ¯ç§’500MBçš„å®æ—¶æµé‡ï¼‰çš„å¸¦å®½ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸åˆ°ä¸‰åƒçš„ç”¨æˆ·å°±éœ€è¦ä¸€ä¸‡å…†çš„å¸¦å®½äº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div class=&quot;cl-preview-section&quot; readability=&quot;10&quot;&gt;
&lt;p&gt;æ€ä¹ˆåŠï¼Ÿå¯æƒ³è€ŒçŸ¥ï¼Œå…‰é å¸¦å®½ç¡¬æŠ—è‚¯å®šæ˜¯ä¸ç°å®çš„ã€‚è€Œä¸”å›½å†…å¸¦å®½è´¹ç”¨å¯ä¸ä¾¿å®œã€‚æ‰€ä»¥è¿™æ—¶å€™éœ€è¦CDNæ¥å¸®åŠ©ç¼“è§£æµåª’ä½“ä¸­å¿ƒæœåŠ¡å™¨çš„å¸¦å®½å‹åŠ›äº†ï¼ŒCDNåˆ†å‘ä¸€èˆ¬ä¼šæŒ‰ç…§æµé‡æ”¶è´¹ï¼Œå¤©ä¸‹æ²¡æœ‰å…è´¹çš„åˆé¤ã€‚&lt;br/&gt;è¿™æ—¶å€™ç›´æ’­å¹³å°çš„ç»“æ„å˜æˆäº†è¿™æ ·ï¼š&lt;br/&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/20200420234214259.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2VndWlkXzE=,size_16,color_FFFFFF,t_70#pic_center&quot; alt=&quot;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&quot; width=&quot;350&quot; height=&quot;300&quot;/&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;
&lt;h2&gt;æ¨æµç«¯&lt;/h2&gt;
&lt;/p&gt;
&lt;div class=&quot;cl-preview-section&quot; readability=&quot;9&quot;&gt;
&lt;p&gt;æ¨æµç«¯ä¸€èˆ¬ä½¿ç”¨çš„è½¯ä»¶æ˜¯&lt;strong&gt;OBS&lt;/strong&gt;æ¨æµå·¥å…·ã€‚è¿™ä¸ªå·¥å…·å°±ä¸å¤šèµ˜è¿°äº†ï¼Œç”¨çš„å®åœ¨å¾ˆå¹¿æ³›ã€‚&lt;br/&gt;å½“ç„¶äº†ï¼Œå¯¹äºå¼€å‘è€…è€Œè¨€ï¼Œè‚¯å®šéœ€è¦çš„æ˜¯&lt;strong&gt;FFmpeg&lt;/strong&gt; å’Œ &lt;strong&gt;opencv&lt;/strong&gt;äº†ï¼Œ&lt;strong&gt;FFmpeg&lt;/strong&gt;æ˜¯åšéŸ³è§†é¢‘ç¼–ç æ¨æµï¼Œopencvå½“ç„¶æ˜¯ç”¨æ¥å®ç°&lt;strong&gt;ç¾é¢œ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;
&lt;h2&gt;æµåª’ä½“æœåŠ¡&lt;/h2&gt;
&lt;/p&gt;
&lt;div class=&quot;cl-preview-section&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;æµåª’ä½“æœåŠ¡å°±æ˜¯å®æ—¶è§†é¢‘çš„ä¸­è½¬ç«™ã€‚&lt;br/&gt;æµåª’ä½“æœåŠ¡ä¸€èˆ¬è€Œè¨€ï¼š&lt;strong&gt;nginx&lt;/strong&gt;ï¼Œ&lt;strong&gt;srs&lt;/strong&gt;ï¼Œ&lt;strong&gt;red5&lt;/strong&gt;ç­‰ç­‰ï¼Œè¿™ä¸ªç³»åˆ—çš„åç»­æ•™ç¨‹ä¼šä¸»è¦æ¶‰åŠ&lt;strong&gt;nginx&lt;/strong&gt;å’Œ&lt;strong&gt;srs&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;
&lt;h2&gt;æ‹‰æµæ’­æ”¾ç«¯&lt;/h2&gt;
&lt;/p&gt;
&lt;div class=&quot;cl-preview-section&quot; readability=&quot;9&quot;&gt;
&lt;p&gt;PCç«¯ï¼šVLC&lt;br/&gt;webç«¯ï¼švideojsï¼Œflv.jsï¼Œhls.jsï¼Œckplayerç­‰ç­‰&lt;br/&gt;ç§»åŠ¨ç«¯ï¼šijkplayer&lt;br/&gt;å¾®ä¿¡å°ç¨‹åºï¼šæœ€å¥½ç”¨ä¼é¹…äº‘çš„æ’­æ”¾ï¼Œå¦åˆ™ä¼šå‡ºç°å…¼å®¹æ€§é—®é¢˜ï¼Œ&lt;strong&gt;äº²æµ‹&lt;/strong&gt;åªæœ‰ä¼é¹…è‡ªå·±çš„ç½‘é¡µæ’­æ”¾å™¨æ‰å¯ä»¥åŒæ—¶å…¼å®¹QQå¾®ä¿¡å°ç¨‹åºå’Œå…¬ä¼—å·ã€‚&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;cl-preview-section&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;ç³»åˆ—æ•™ç¨‹åç»­ä¼šä¸»è¦ä½¿ç”¨VLCæµ‹è¯•æ‹‰æµæ’­æ”¾ï¼Œè™½ç„¶VLCå»¶è¿Ÿå¾ˆå¤§ï¼Œä½†æ˜¯å…¼å®¹æ€§æ˜¯æœ€å¥½çš„ï¼Œç½‘é¡µç«¯æµ‹è¯•ä¸»è¦ä½¿ç”¨videojså’Œflv.jsä»¥åŠä¼é¹…çš„æ’­æ”¾å™¨&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;
&lt;h2&gt;CDNåˆ†å‘&lt;/h2&gt;
&lt;/p&gt;
&lt;div class=&quot;cl-preview-section&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;å¾ˆå¤šCDNæœåŠ¡å•†éƒ½æ”¯æŒrtmpï¼Œflvï¼Œhlsç­‰æµåª’ä½“çš„åˆ†å‘ï¼Œç”±äºæ¶‰åŠå…·ä½“å‚å®¶ï¼Œä¸æ‰“å¹¿å‘Šï¼Œè¿™é‡Œå°±ä¸åˆ—ä¸¾äº†ã€‚&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;
&lt;h2&gt;ä¸‹ä¸€ç« &lt;/h2&gt;
&lt;/p&gt;
&lt;div class=&quot;cl-preview-section&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;ä»é›¶å¼€å§‹å¼€å‘å’Œæ­å»ºç›´æ’­å¹³å°-æµåª’ä½“æœåŠ¡æ­å»ºä¹‹1-nginxæµåª’ä½“æœåŠ¡æ­å»º&lt;br/&gt;ä»é›¶å¼€å§‹å¼€å‘å’Œæ­å»ºç›´æ’­å¹³å°-æµåª’ä½“æœåŠ¡æ­å»ºä¹‹2-srsæµåª’ä½“æœåŠ¡æ­å»º&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;
&lt;h2&gt;javacvç³»åˆ—&lt;/h2&gt;
&lt;/p&gt;


&lt;p&gt;
&lt;h2&gt;ä»¥å‰å†™çš„æµåª’ä½“æœåŠ¡æ­å»º&lt;/h2&gt;
&lt;/p&gt;

&lt;div class=&quot;cl-preview-section&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;æ„Ÿè°¢æ”¯æŒeguidåŸåˆ›æ–‡ç« ã€‚æ¬¢è¿è½¬è½½æ–‡ç« ï¼Œä½†è¿˜è¯·æ³¨æ˜å‡ºå¤„ï¼Œåˆ›ä½œä¸æ˜“ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼&lt;/p&gt;
&lt;/div&gt;
</description>
<pubDate>Mon, 20 Apr 2020 16:39:00 +0000</pubDate>
<dc:creator>eguid</dc:creator>
<og:description>ä»é›¶å¼€å§‹å¼€å‘å’Œæ­å»ºç›´æ’­å¹³å°-æ•™ç¨‹æ±‡æ€»ç¯‡ å†™åœ¨å¼€å§‹ä¹‹å‰ ç›´æ’­å¹³å°ç»“æ„ æ¨æµç«¯ æµåª’ä½“æœåŠ¡ æ‹‰æµæ’­æ”¾ç«¯ CDNåˆ†å‘ ä¸‹ä¸€ç«  javacvç³»åˆ— ä»¥å‰å†™çš„æµåª’ä½“æœåŠ¡æ­å»º å†™åœ¨å¼€å§‹ä¹‹å‰ ä¹‹å‰ä¹Ÿåˆ†äº«è¿‡ä¸å°‘é›¶æ•£çš„æŠ€</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/eguid/p/12741787.html</dc:identifier>
</item>
<item>
<title>ã€Œæ—¥å¸¸å¼€å‘ã€è®°ä¸€æ¬¡å› ä½¿ç”¨Dateå¼•èµ·çš„çº¿ä¸ŠBUGå¤„ç† - Coderå°æ˜</title>
<link>http://www.cnblogs.com/coderxx/p/12741716.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/coderxx/p/12741716.html</guid>
<description>&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æŒæ§è‡ªå·±çš„æ—¶é—´ï¼Œå‡å°‘åŠ ç­ï¼Œæé«˜æ•ˆç‡ï¼›æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ“ä½œæ—¶é—´APIï¼Œä¿è¯æ•ˆç‡ã€å®‰å…¨ã€ç¨³å®šã€‚ç°åœ¨éƒ½2020å¹´äº†ï¼Œäº†è§£å¦‚ä½•åœ¨JDK8åŠä»¥åçš„ç‰ˆæœ¬ä¸­æ›´å¥½åœ°æ“æ§æ—¶é—´å°±å¾ˆæœ‰å¿…è¦ï¼Œå°¤å…¶æ˜¯ä¸€æ¬¡çº¿ä¸ŠBUGçš„å‘ç”Ÿï¼Œè®©å°æ˜æ›´æ˜¯æ·±æœ‰ä½“ä¼šã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;èƒŒæ™¯&quot;&gt;èƒŒæ™¯&lt;/h2&gt;
&lt;p&gt;åœ¨&lt;strong&gt;Java8&lt;/strong&gt;ä»¥å‰ï¼Œæ¯æ¯æ“æ§æ—¶é—´ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„ç±»åº“å°±æ˜¯&lt;strong&gt;Date&lt;/strong&gt;ï¼Œå¹¶ä¸”ä¼šé€šè¿‡&lt;strong&gt;SimpleDateFormat&lt;/strong&gt;ç±»å¯¹æ—¶é—´è¿›è¡Œæ ¼å¼åŒ–ã€‚ä½ å¯çŸ¥é“ï¼Ÿ&lt;strong&gt;Date&lt;/strong&gt;ç±»æ˜¯ä¸€ä¸ªå¯å˜ç±»ï¼Œ&lt;strong&gt;SimpleDateFormat&lt;/strong&gt;ç±»ä¹Ÿæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œå› æ­¤åœ¨å¤šçº¿ç¨‹çš„åœºæ™¯ä¸‹æ‰§è¡Œæ ¼å¼åŒ–æ“ä½œæ—¶ï¼Œå°±ä¼šå‘ç”Ÿæ„æƒ³ä¸åˆ°çš„æƒ…å†µã€‚ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸‹ä½¿ç”¨&lt;strong&gt;Date&lt;/strong&gt;ã€&lt;strong&gt;SimpleDateFormat&lt;/strong&gt;åœ¨å¤šçº¿ç¨‹ä¸‹å¯èƒ½å‘ç”Ÿçš„é—®é¢˜ä»¥åŠä½¿ç”¨&lt;strong&gt;LocalDateTime&lt;/strong&gt;ã€&lt;strong&gt;DateTimeFormatter&lt;/strong&gt;çš„æ–¹æ³•å’Œä¼˜åŠ¿ã€‚&lt;/p&gt;
&lt;h2 id=&quot;é—®é¢˜æ¥äº†&quot;&gt;é—®é¢˜æ¥äº†&lt;/h2&gt;
&lt;p&gt;å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œä½¿ç”¨&lt;strong&gt;Date&lt;/strong&gt;ã€&lt;strong&gt;SimpleDateFormat&lt;/strong&gt;æ—¶ï¼Œå¦‚æœæˆ‘ä»¬å°†å®ƒå®šä¹‰ä¸ºä¸€ä¸ªé™æ€å˜é‡ä½¿ç”¨ï¼Œè™½ç„¶ä¼šé¿å…é‡å¤åˆ›å»ºå®ä¾‹ï¼Œ ä½†æ˜¯ä¼šå‡ºç°ä¸ªåˆ«çº¿ç¨‹è·å–æ—¶é—´å¤±è´¥çš„ç°è±¡ï¼Œæˆ‘ä»¬é€šè¿‡ä»£ç æ¨¡æ‹Ÿè¿™ä¸ªåœºæ™¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1669068/202004/1669068-20200421001826974-841536309.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;è¿è¡Œ&lt;strong&gt;main&lt;/strong&gt;æ–¹æ³•ï¼ŒæŸ¥çœ‹æ§åˆ¶å°ä¼šå‘ç°æœ‰ä¸ªåˆ«çº¿ç¨‹ä¼šæŠ¥&lt;strong&gt;java.lang.NumberFormatException&lt;/strong&gt;å¼‚å¸¸ã€‚ç±»ä¼¼ä¸‹å›¾æ‰€ç¤º:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1669068/202004/1669068-20200421001827449-621115762.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;é—®é¢˜åˆ†æ&quot;&gt;é—®é¢˜åˆ†æ&lt;/h2&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡æŸ¥çœ‹æºç è¿›ä¸€æ­¥åˆ†æï¼ˆå¤šå›¾é¢„è­¦ï¼‰ï¼Œå¯ä»¥çœ‹åˆ°&lt;strong&gt;SimpleDateFormat&lt;/strong&gt;æ˜¯ç›´æ¥ç»§æ‰¿çš„&lt;strong&gt;DateFormat&lt;/strong&gt;ç±»ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1669068/202004/1669068-20200421001827766-2111805676.png&quot; alt=&quot;&quot;/&gt;å¹¶é‡å†™äº†&lt;strong&gt;parse()&lt;/strong&gt;ï¼ˆå­—ç¬¦ä¸²è½¬æ—¥æœŸï¼‰å’Œ &lt;strong&gt;format()&lt;/strong&gt;ï¼ˆæ—¥æœŸè½¬å­—ç¬¦ä¸²ï¼‰æ–¹æ³•ï¼Œå› æ­¤æˆ‘ä»¬é‡ç‚¹ä»è¿™ä¸¤ä¸ªæ–¹æ³•æ¥åˆ†æã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆæ˜¯&lt;strong&gt;SimpleDateFormat&lt;/strong&gt;çš„&lt;strong&gt;parse()&lt;/strong&gt;æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸­åˆ›å»ºäº†ä¸€ä¸ª&lt;strong&gt;CalendarBuilder&lt;/strong&gt;å¯¹è±¡ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1669068/202004/1669068-20200421001827963-1131645465.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å†å¾€ä¸‹çœ‹ï¼Œä¼šçœ‹åˆ°&lt;strong&gt;CalendarBuilder&lt;/strong&gt;ä½¿ç”¨&lt;strong&gt;establish&lt;/strong&gt;æ–¹æ³•å°†å˜é‡&lt;strong&gt;calendar&lt;/strong&gt;è®¾å€¼åˆ°å…¶å±æ€§ä¸­ï¼Œ&lt;/p&gt;
&lt;p&gt;![image-20200420012213545](/Users/xin/Library/Application Support/typora-user-images/image-20200420012213545.png)&lt;/p&gt;
&lt;p&gt;è€Œ&lt;strong&gt;calendar&lt;/strong&gt;æ˜¯çˆ¶ç±»&lt;strong&gt;DateFormat&lt;/strong&gt;ç±»çš„å…±äº«å˜é‡ï¼Œå¯ä»¥è¢«å¤šä¸ªçº¿ç¨‹è®¿é—®åˆ°&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1669068/202004/1669068-20200421001828201-1197511607.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å› æ­¤å½“&lt;strong&gt;SimpleDateFormat&lt;/strong&gt;å£°æ˜ä¸º&lt;strong&gt;static&lt;/strong&gt;æ—¶ï¼Œçº¿ç¨‹å¹¶ä¸å®‰å…¨ï¼Œå¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œè®¿é—®å°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚&lt;/p&gt;
&lt;p&gt;åŒæ ·åœ°é€šè¿‡æŸ¥çœ‹&lt;strong&gt;format()&lt;/strong&gt;ï¼Œæˆ‘ä»¬å‘ç°&lt;strong&gt;format&lt;/strong&gt;æ–¹æ³•ä¸­æœ‰ä¸€è¡Œ&lt;code&gt;calendar.setTime(date)&lt;/code&gt;;ä¹Ÿæ˜¯æ“ä½œçš„è¯¥å…±äº«å˜é‡&lt;strong&gt;calendar&lt;/strong&gt;ï¼Œçº¿ç¨‹ä¹Ÿæ˜¯ä¸å®‰å…¨çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1669068/202004/1669068-20200421001828425-1011297624.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æœ‰è¶£çš„æ˜¯ï¼Œåœ¨&lt;strong&gt;DateFormat&lt;/strong&gt;æºç æ³¨é‡Šä¸Šä½œè€…ä¹Ÿå·²ç»ç»™å‡ºé†’ç›®çš„æç¤º:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1669068/202004/1669068-20200421001828781-1985902101.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨Googleç¿»è¯‘è¿‡æ¥å°±æ˜¯&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;æ—¥æœŸæ ¼å¼ä¸åŒæ­¥ã€‚ å»ºè®®ä¸ºæ¯ä¸ªçº¿ç¨‹åˆ›å»ºå•ç‹¬çš„æ ¼å¼å®ä¾‹ã€‚ å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ä¸€ç§æ ¼å¼ï¼Œåˆ™å¿…é¡»åœ¨å¤–éƒ¨åŒæ­¥è¯¥æ ¼å¼ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;è§£å†³æ–¹æ¡ˆ&quot;&gt;è§£å†³æ–¹æ¡ˆ&lt;/h2&gt;
&lt;p&gt;å°æ˜æœ‰ä¸€å¥åº§å³é“­ï¼Œæ–¹æ³•æ€»æ¯”é—®é¢˜å¤šã€‚æˆ‘ä»¬æ¥çœ‹å‡ ä¸ªå°æ˜è®¤ä¸ºä¸é”™çš„è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h5 id=&quot;1ã€ä»…åœ¨éœ€è¦ç”¨åˆ°çš„åœ°æ–¹åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œå°±æ²¡æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚&quot;&gt;1ã€ä»…åœ¨éœ€è¦ç”¨åˆ°çš„åœ°æ–¹åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œå°±æ²¡æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚&lt;/h5&gt;
&lt;p&gt;&lt;strong&gt;ç‚¹è¯„&lt;/strong&gt;ï¼šåŠ é‡äº†åˆ›å»ºå¯¹è±¡çš„è´Ÿæ‹…ï¼Œé¢‘ç¹åœ°åˆ›å»ºå’Œé”€æ¯å¯¹è±¡ï¼Œæ¶ˆè€—èµ„æºï¼Œæ•ˆç‡è¾ƒä½ã€‚&lt;/p&gt;
&lt;h5 id=&quot;2ã€é€šè¿‡synchronizedè§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼›&quot;&gt;2ã€é€šè¿‡&lt;strong&gt;synchronized&lt;/strong&gt;è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼›&lt;/h5&gt;
&lt;p&gt;&lt;strong&gt;ç‚¹è¯„&lt;/strong&gt;ï¼šå¹¶å‘é‡å¤§çš„æ—¶å€™ä¼šå¯¹æ€§èƒ½æœ‰å½±å“ï¼Œå®¹æ˜“é€ æˆçº¿ç¨‹é˜»å¡ã€‚&lt;/p&gt;
&lt;h5 id=&quot;3ã€é€šè¿‡threadlocalä¿è¯çº¿ç¨‹ä¹‹é—´å˜é‡ä¸å…±äº«&quot;&gt;3ã€é€šè¿‡ThreadLocalä¿è¯çº¿ç¨‹ä¹‹é—´å˜é‡ä¸å…±äº«&lt;/h5&gt;
&lt;p&gt;&lt;strong&gt;ç‚¹è¯„ï¼š&lt;/strong&gt;ThreadLocalå¯ä»¥ç¡®ä¿æ¯ä¸ªçº¿ç¨‹éƒ½å¯ä»¥å¾—åˆ°å•ç‹¬çš„ä¸€ä¸ª&lt;strong&gt;SimpleDateFormat&lt;/strong&gt;çš„å¯¹è±¡ï¼Œé‚£ä¹ˆè‡ªç„¶ä¹Ÿå°±ä¸å­˜åœ¨ç«äº‰é—®é¢˜äº†ã€‚å°±æ˜¯æœ‰ç‚¹å¤§æå°ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1669068/202004/1669068-20200421001829009-1232715182.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä»¥ä¸Šå°±æ˜¯å°æ˜èƒ½å¤Ÿæä¾›çš„æ‰€æœ‰æ–¹æ¡ˆã€‚ä»€ä¹ˆï¼Œéƒ½ä¸æ»¡æ„ï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹2020å¹´JDK8çš„è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä½¿ç”¨localdatetime&quot;&gt;ä½¿ç”¨&lt;strong&gt;LocalDateTime&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;åœ¨&lt;strong&gt;Java8&lt;/strong&gt;ä»¥åï¼Œæˆ‘ä»¬æœ‰äº†æ–°çš„é€‰æ‹©ï¼Œä½¿ç”¨&lt;strong&gt;LocalDateTime&lt;/strong&gt;æ—¶é—´ç±»ã€‚é¦–å…ˆï¼Œ&lt;strong&gt;LocalDateTime&lt;/strong&gt;æœ¬èº«æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå…¶å¯¹åº”çš„æ ¼å¼åŒ–å·¥å…·ç±»&lt;strong&gt;DateTimeFormatter&lt;/strong&gt;ä¹Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¸å­˜åœ¨å˜é‡å…±äº«ï¼Œæ¯ä¸€ä¸ªå±æ€§å­—æ®µéƒ½ç”¨äº†finalå…³é”®å­—ä¿®é¥°ï¼Œå› æ­¤æ¯æ¬¡æ“ä½œåéƒ½æ˜¯è¿”å›çš„copyå¯¹è±¡ã€‚å¹¶ä¸”&lt;strong&gt;LocalDateTime&lt;/strong&gt;ç±»æœ¬èº«ä¹Ÿæœ‰å¾ˆå¤šæ“ä½œæ—¶é—´çš„APIæ¥æ›¿ä»£ä¼ ç»Ÿçš„&lt;strong&gt;Calendar&lt;/strong&gt;ç±»ã€‚&lt;/p&gt;
&lt;p&gt;åŸºäº&lt;strong&gt;Java8&lt;/strong&gt;çš„&lt;strong&gt;DateTimeFormatter&lt;/strong&gt;çš„è§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯¹ä¹‹å‰çš„ä»£ç è¿›è¡Œæ”¹é€ ï¼Œå¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œè¿è¡Œä»£ç ï¼Œå¹¶æœªå‘ç°ä»»ä½•å¼‚å¸¸ï¼Œç¨³å®šé«˜æ•ˆ:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1669068/202004/1669068-20200421001829256-2075652766.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹åˆ°&lt;strong&gt;åœ¨DateTimeFormatter&lt;/strong&gt;æºç ä¸Šä½œè€…ä¹Ÿè´´å¿ƒçš„åŠ æ³¨é‡Šè¯´æ˜ï¼Œè¯¥ç±»æ˜¯ä¸å¯å˜çš„ï¼Œå¹¶ä¸”æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1669068/202004/1669068-20200421001829411-2007552397.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;åŒç†ï¼Œè¿™ç‚¹æˆ‘ä»¬ä¹Ÿå¯ä»¥ä»&lt;strong&gt;LocalDateTime&lt;/strong&gt;çš„å®˜æ–¹æºç ä¸­çœ‹å‡ºã€‚&lt;/p&gt;
&lt;h2 id=&quot;å…¶ä»–éªšæ“ä½œ&quot;&gt;å…¶ä»–éªšæ“ä½œ&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†è®©å¤§å®¶å¿˜æ‰ä¹‹å‰ä½¿ç”¨&lt;strong&gt;Calendar&lt;/strong&gt;æ“ä½œæ—¶é—´çš„ç¬¨æ‹™ï¼Œæˆ‘ä»¬æ¥åˆ‡å®æ„Ÿå—ä¸€ä¸‹&lt;strong&gt;LocalDateTime&lt;/strong&gt;ç»™å®é™…å¼€å‘ä¸­å¸¦æ¥çš„ä¾¿åˆ©:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/other/1669068/202004/1669068-20200421001829676-1800491573.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;4.1481481481481&quot;&gt;
&lt;p&gt;æ›´å¤šä¸¾ä¾‹è¯´æ˜ï¼Œè¯·ç‚¹å‡»æ–‡æœ«é˜…è¯»åŸæ–‡&lt;/p&gt;
&lt;p&gt;ä»£ç åœ°å€ï¼š&lt;a href=&quot;https://github.com/WhenCoding/coder-xiaoming&quot;&gt;https://github.com/WhenCoding/coder-xiaoming&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;ç»¼ä¸Šï¼Œå°æ˜æ¨èå°ä¼™ä¼´ä»¬ä½¿ç”¨JDK8çš„&lt;strong&gt;LocalDateTime&lt;/strong&gt;ç³»åˆ—æ¥å–ä»£&lt;strong&gt;Date&lt;/strong&gt;ç³»åˆ—ï¼Œè¿™æ ·åšä¸ä»…èƒ½å¤Ÿä¿è¯çº¿ä¸Šé¡¹ç›®å¹³ç¨³è¿è¡Œï¼Œè€Œä¸”é€šè¿‡å…¶è‡ªå¸¦çš„APIè¿˜èƒ½æ“ä½œæ—¶é—´ï¼Œè¿˜èƒ½æé«˜å¼€å‘æ•ˆç‡ï¼Œä»Šæ™šå¯ä»¥ä¸åŠ ç­ï¼&lt;/p&gt;
&lt;p&gt;æ¬¢è¿å¤§å®¶è®¿é—®æˆ‘çš„ä¸ªäººåšå®¢ç½‘ç«™ï¼š&lt;a href=&quot;https://mynamecoder.com&quot;&gt;https://mynamecoder.com&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Mon, 20 Apr 2020 16:18:00 +0000</pubDate>
<dc:creator>Coderå°æ˜</dc:creator>
<og:description>ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æŒæ§è‡ªå·±çš„æ—¶é—´ï¼Œå‡å°‘åŠ ç­ï¼Œæé«˜æ•ˆç‡ï¼›æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ“ä½œæ—¶é—´APIï¼Œä¿è¯æ•ˆç‡ã€å®‰å…¨ã€ç¨³å®šã€‚ç°åœ¨éƒ½2020å¹´äº†ï¼Œäº†è§£å¦‚ä½•åœ¨JDK8åŠä»¥åçš„ç‰ˆæœ¬ä¸­æ›´å¥½åœ°æ“æ§æ—¶é—´å°±å¾ˆæœ‰å¿…è¦ï¼Œå°¤å…¶æ˜¯ä¸€æ¬¡çº¿</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/coderxx/p/12741716.html</dc:identifier>
</item>
<item>
<title>è´Ÿè½½å‡è¡¡æœåŠ¡ä¹‹HAProxyåŸºç¡€å…¥é—¨ - Linux-1874</title>
<link>http://www.cnblogs.com/qiuhom-1874/p/12741018.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/qiuhom-1874/p/12741018.html</guid>
<description>&lt;p&gt;ã€€ã€€é¦–å…ˆæˆ‘ä»¬æ¥äº†è§£ä¸‹haproxyæ˜¯å¹²å˜›çš„ï¼Ÿhaproxyæ˜¯ä¸€ä¸ªæ³•å›½äººåå«Willy Tarreauå¼€å‘çš„ä¸€ä¸ªå¼€æºè½¯ä»¶ï¼›è¿™æ¬¾è½¯ä»¶ä¸»è¦ç”¨äºè§£å†³å®¢æˆ·ç«¯10000ä»¥ä¸Šçš„åŒæ—¶è¿æ¥çš„é«˜æ€§èƒ½çš„TCPå’ŒHTTPè´Ÿè½½å‡è¡¡å™¨ã€‚å…¶åŠŸèƒ½æ˜¯ç”¨æ¥æä¾›åŸºäºcookieçš„æŒä¹…æ€§ï¼ŒåŸºäºå†…å®¹çš„äº¤æ¢ï¼Œè¿‡è½½ä¿æŠ¤çš„é«˜çº§æµé‡ç®¡åˆ¶ï¼Œè‡ªåŠ¨æ•…éšœåˆ‡æ¢ï¼Œä»¥æ­£åˆ™è¡¨è¾¾å¼ä¸ºåŸºç¡€çš„æ§åˆ¶è¿è¡Œæ—¶é—´ï¼ŒåŸºäºwebçš„æŠ¥è¡¨ï¼Œé«˜çº§æ—¥å¿—è®°å½•ä»¥å¸®åŠ©æ’é™¤æ•…éšœçš„åº”ç”¨æˆ–ç½‘ç»œåŠå…¶ä»–åŠŸèƒ½ï¼›ç®€å•è¯´å®ƒå°±æ˜¯åŸºäºtcpæˆ–httpåè®®çš„è´Ÿè½½å‡è¡¡å™¨ï¼›å¯¹äºè´Ÿè½½å‡è¡¡å™¨è¿™ä¸ªæ¦‚ç‡ç›¸ä¿¡å¤§å®¶äº†è§£nginxçš„éƒ½çŸ¥é“å§ï¼Œå…¶å®haproxyç±»ä¼¼nginxçš„upstreamåŠŸèƒ½ï¼›å®ƒå¯ä»¥åŸºäºtcpåšå››å±‚è´Ÿè½½ï¼Œä¹Ÿå¯ç”¨åŸºäºhttpåšä¸ƒå±‚è´Ÿè½½ï¼Œè¿™ä¸€ç‚¹å’Œnginxä¸€æ ·ï¼ˆnginxæ˜¯1.9.0åæ‰æ”¯æŒå››å±‚ä»£ç†ï¼‰ï¼›æœ‰å…³nginxçš„è´Ÿè½½å‡è¡¡åŠŸèƒ½çš„ä½¿ç”¨è¯´æ˜ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥å‚è€ƒä¸‹æœ¬äººçš„åšå®¢&lt;a href=&quot;https://www.cnblogs.com/qiuhom-1874/p/12458159.html&quot; target=&quot;_blank&quot;&gt;https://www.cnblogs.com/qiuhom-1874/p/12458159.html&lt;/a&gt;å’Œ&lt;a href=&quot;https://www.cnblogs.com/qiuhom-1874/p/12468946.html&quot; target=&quot;_blank&quot;&gt;https://www.cnblogs.com/qiuhom-1874/p/12468946.html&lt;/a&gt;ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€æœ‰å…³haproxyçš„ä»‹ç»è¿™é‡Œå°±ä¸è¿‡å¤šé˜è¿°ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥å»å‚è€ƒå®˜æ–¹ç½‘ç«™çš„ä»‹ç»&lt;a href=&quot;http://www.haproxy.org&quot; target=&quot;_blank&quot;&gt;http://www.haproxy.org&lt;/a&gt;ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€å‰é¢èŠnginxçš„æ—¶å€™æˆ‘ä»¬æœ‰èŠåˆ°è¿‡nginxçš„ä¸€ä¸ªé‡è¦çš„åŠŸèƒ½åå‘ä»£ç†ï¼Œè¿™é‡Œå†ç®€å•å›é¡¾ä¸‹ï¼Œæ‰€è°“ä»£ç†å°±æ˜¯â€œä¸€æ‰‹æ‰˜ä¸¤è¾¹â€ï¼Œä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå°±æ˜¯ä»£ç†æœåŠ¡å™¨å®ƒé¢å‘å®¢æˆ·ç«¯ä¸€ä¾§å®ƒæ‰®æ¼”æœåŠ¡å™¨è§’è‰²ï¼Œé¢å‘æœåŠ¡å™¨ä¸€ä¾§å®ƒæ‰®æ¼”å®¢æˆ·ç«¯è§’è‰²ï¼›è€Œåå‘ä»£ç†å°±æ˜¯ä»£ç†æœåŠ¡ç«¯å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼›æˆ‘ä»¬æŠŠè¿™ç§ç”¨äºä»£ç†æœåŠ¡å™¨å“åº”å®¢æˆ·ç«¯è§’è‰²å«åå‘ä»£ç†ï¼›haproxyå°±æ˜¯ä¸€åå‘ä»£ç†å®ç°çš„è½¯ä»¶ï¼Œåœ¨åŸºäºåä»£çš„æ¨¡å¼ä¸‹ï¼Œå¯ä»¥å¯¹åç«¯æœåŠ¡å™¨åšå››å±‚æˆ–ä¸ƒå±‚çš„è´Ÿè½½å‡è¡¡ï¼›é€šå¸¸æƒ…å†µä¸‹haproxyå·¥ä½œåœ¨ä¸€ä¸ªæµé‡å…¥å£çš„èŠ‚ç‚¹ä¸Šï¼Œç”¨äºæ¥æ”¶å¹¶æŠŠå®¢æˆ·ç«¯çš„è¯·æ±‚åˆ†å‘ç»™ä¸åŒåº”ç”¨çš„åç«¯æœåŠ¡å™¨ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€ç®€å•é˜è¿°äº†haproxyçš„åŠŸèƒ½åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹haproxyçš„ç¨‹åºç»„æˆéƒ¨åˆ†å’Œé…ç½®æ–‡ä»¶ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€åœ¨redhatç³»åˆ—çš„Linuxä¸Šå®‰è£…haproxyå¯ä»¥yumå®‰è£…ï¼Œåªä¸è¿‡è¿™ç§å®‰è£…æ–¹å¼å®‰è£…çš„ç‰ˆæœ¬æ¯”è¾ƒæ—§ï¼Œå¦‚æœè¦ä½¿ç”¨æ¯”è¾ƒæ–°çš„ç‰ˆæœ¬çš„haproxyå¯ä»¥é€‰æ‹©ç¼–è¾‘å®‰è£…ï¼›æˆ‘ä»¬è¿™é‡Œå…ˆç”¨yumå®‰è£…å…ˆçœ‹çœ‹haproxyæ€ä¹ˆç”¨å§&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;38&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@docker_node1 ~]# yum info haproxy
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirrors.aliyun.com
 * extras: mirrors.cn99.com
 * updates: mirrors.aliyun.com
Installed Packages
Name        : haproxy
Arch        : x86_64
Version     : 1.5.18
Release     : 9.el7
Size        : 2.6 M
Repo        : installed
From repo   : base
Summary     : TCP/HTTP proxy and load balancer for high availability environments
URL         : http://www.haproxy.org/
License     : GPLv2+
Description : HAProxy is a TCP/HTTP reverse proxy which is particularly suited for high
            : availability environments. Indeed, it can:
            :  - route HTTP requests depending on statically assigned cookies
            :  - spread load among several servers while assuring server persistence
            :    through the use of HTTP cookies
            :  - switch to backup servers in the event a main server fails
            :  - accept connections to special ports dedicated to service monitoring
            :  - stop accepting connections without breaking existing ones
            :  - add, modify, and delete HTTP headers in both directions
            :  - block requests matching particular patterns
            :  - report detailed status to authenticated users from a URI
            :    intercepted by the application

[root@docker_node1 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šhaproxyåœ¨baseå‚è€ƒçš„ç‰ˆæœ¬æ˜¯1.5.18ï¼›ä»ä¸Šé¢çš„ä¿¡æ¯å¯ä»¥çœ‹åˆ°haproxyçš„ä»‹ç»å’ŒåŠŸèƒ½ï¼Œæœ‰å…´è¶£çš„æœ‹å‹è‡ªè¡Œç¿»è¯‘ä¸‹ï¼›yumå®‰è£…è¿™é‡Œå°±ä¸å¤šè¯´äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹haproxyçš„ç¨‹åºç»„æˆï¼›&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@docker_node1 ~]# rpm -ql haproxy
/etc/haproxy
/etc/haproxy/haproxy.cfg
/etc/logrotate.d/haproxy
/etc/sysconfig/haproxy
/usr/bin/halog
/usr/bin/iprange
/usr/lib/systemd/system/haproxy.service
/usr/sbin/haproxy
/usr/sbin/haproxy-systemd-wrapper
/usr/share/doc/haproxy-1.5.18
â€¦â€¦çœç•¥éƒ¨åˆ†å†…å®¹â€¦â€¦
/usr/share/haproxy
/usr/share/haproxy/400.http
/usr/share/haproxy/403.http
/usr/share/haproxy/408.http
/usr/share/haproxy/500.http
/usr/share/haproxy/502.http
/usr/share/haproxy/503.http
/usr/share/haproxy/504.http
/usr/share/haproxy/README
/usr/share/man/man1/halog.1.gz
/usr/share/man/man1/haproxy.1.gz
/var/lib/haproxy
[root@docker_node1 ~]#
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šhaproxyçš„ä¸»ç¨‹åºæ–‡ä»¶æ˜¯/usr/sbin/haproxyï¼Œé…ç½®æ–‡ä»¶æ˜¯/etc/haproxy/haproxy.cfgï¼ŒUnit fileï¼š/usr/lib/systemd/system/haproxy.serviceï¼›æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹é…ç½®æ–‡ä»¶ï¼›&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;36&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@docker_node1 ~]# cat /etc/haproxy/haproxy.cfg
#---------------------------------------------------------------------
# Example configuration for a possible web application.  See the
# full configuration options online.
#
#   http://haproxy.1wt.eu/download/1.4/doc/configuration.txt
#
#---------------------------------------------------------------------

#---------------------------------------------------------------------
# Global settings
#---------------------------------------------------------------------
global
    # to have these messages end up in /var/log/haproxy.log you will
    # need to:
    #
    # 1) configure syslog to accept network log events.  This is done
    #    by adding the '-r' option to the SYSLOGD_OPTIONS in
    #    /etc/sysconfig/syslog
    #
    # 2) configure local2 events to go to the /var/log/haproxy.log
    #   file. A line like the following can be added to
    #   /etc/sysconfig/syslog
    #
    #    local2.*                       /var/log/haproxy.log
    #
    log         127.0.0.1 local2

    chroot      /var/lib/haproxy
    pidfile     /var/run/haproxy.pid
    maxconn     4000
    user        haproxy
    group       haproxy
    daemon

    # turn on stats unix socket
    stats socket /var/lib/haproxy/stats

#---------------------------------------------------------------------
# common defaults that all the 'listen' and 'backend' sections will
# use if not designated in their block
#---------------------------------------------------------------------
defaults
    mode                    http
    log                     global
    option                  httplog
    option                  dontlognull
    option http-server-close
    option forwardfor       except 127.0.0.0/8
    option                  redispatch
    retries                 3
    timeout http-request    10s
    timeout queue           1m
    timeout connect         10s
    timeout client          1m
    timeout server          1m
    timeout http-keep-alive 10s
    timeout check           10s
    maxconn                 3000

#---------------------------------------------------------------------
#main frontend which proxys to the backends
#---------------------------------------------------------------------
frontend  main *:5000
    acl url_static       path_beg       -i /static /images /javascript /stylesheets
    acl url_static       path_end       -i .jpg .gif .png .css .js

    use_backend static          if url_static
    default_backend             app

#---------------------------------------------------------------------
# static backend for serving up images, stylesheets and such
#---------------------------------------------------------------------
backend static
    balance     roundrobin
    server      static 127.0.0.1:4331 check

#---------------------------------------------------------------------
# round robin balancing between the various backends
#---------------------------------------------------------------------
backend app
    balance     roundrobin
    server  app1 127.0.0.1:5001 check
    server  app2 127.0.0.1:5002 check
    server  app3 127.0.0.1:5003 check
    server  app4 127.0.0.1:5004 check

[root@docker_node1 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šä»¥ä¸Šæ˜¯haproxy yumå®‰è£…çš„é…ç½®æ–‡ä»¶ï¼Œå…¶ä¸­é…ç½®æ–‡ä»¶å¤§è‡´åˆ†å…¨å±€é…ç½®æ®µå’Œä»£ç†é…ç½®æ®µï¼Œå…¨å±€é…ç½®æ®µä¸»è¦é…ç½®è¿›ç¨‹åŠå®‰å…¨é…ç½®ç›¸å…³çš„å‚æ•°ä»¥åŠæ€§èƒ½è°ƒæ•´ç›¸å…³å‚æ•°ï¼›ä»£ç†é…ç½®æ®µä¸»è¦æœ‰defaultsé…ç½®æ®µï¼Œè¯¥é…ç½®æ®µä¸»è¦é…ç½®frontend,backend,listené…ç½®æ®µé»˜è®¤é…ç½®ï¼Œå¦‚æœåœ¨åé¢çš„frontendã€backendã€listenä¸­é…ç½®æ®µæœ‰defaultsé…ç½®æ®µå‚æ•°ï¼Œåè€…ç”Ÿæ•ˆï¼Œæ²¡æœ‰é…ç½®åˆ™ç»§æ‰¿defaultsé…ç½®æ®µçš„å‚æ•°é…ç½®ï¼›frontendé…ç½®æ®µä¸»è¦é…ç½®å‰ç«¯é¢å‘å®¢æˆ·ç«¯æä¾›è®¿é—®çš„æ¥å£ï¼Œæ¯”å¦‚ç›‘å¬åœ¨é‚£ä¸ªåœ°å€çš„é‚£ä¸ªç«¯å£å‘€ï¼Œç›¸å½“äºnginxä¸­çš„serverçš„æ¦‚å¿µï¼›backendé…ç½®æ®µç”¨äºå®šä¹‰åç«¯æœåŠ¡å™¨ä¸»æœºçš„ï¼Œç›¸å½“äºnginxé‡Œçš„upstreamé…ç½®æ®µæ¦‚å¿µï¼›è€Œlistenæ˜¯åŒæ—¶é…ç½®å‰ç«¯ç›‘å¬ç«¯å£ä¿¡æ¯å’Œåç«¯è¢«ä»£ç†æœåŠ¡å™¨ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€äº†è§£äº†ä¸Šé¢é…ç½®æ–‡ä»¶çš„å¤§æ¦‚é…ç½®ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥é…ç½®ä¸‹ï¼Œè®©haproxyä»£ç†ä¸‰å°webæœåŠ¡å“åº”å®¢æˆ·ç«¯è¯·æ±‚ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€é¦–å…ˆè¯´ä¸‹å®éªŒç¯å¢ƒï¼Œå®¿ä¸»æœºhaproxyçš„åœ°å€æ˜¯192.168.0.22ï¼š80ä»£ç†172.17.0.2ã€3ã€4è¿™ä¸‰å°ä¸»æœºï¼ˆä¸ºäº†èŠ‚çœè™šæ‹Ÿæœºèµ„æºï¼Œæˆ‘ä»¬è¿™é‡Œåˆ†åˆ«ç”¨dockerå®¹å™¨æ¥æ¨¡æ‹Ÿä¸‰å°webæœåŠ¡å™¨ï¼‰&lt;/p&gt;
&lt;p&gt;ã€€ã€€åç«¯æœåŠ¡å™¨ç¯å¢ƒæ­å»º&lt;/p&gt;
&lt;p&gt;ã€€ã€€1ã€å®‰è£…docker-ce&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@docker_node1 ~]# yum install -y docker-ce
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šå®‰è£…ä¹‹å‰éœ€è¦å»é…ç½®å¥½dockerçš„yumæºå‚è€ƒï¼Œæ¨èå»é˜¿é‡Œäº‘yumä»“åº“&lt;/p&gt;
&lt;p&gt;ã€€ã€€2ã€æ‹‰å–é•œåƒ&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;34&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@docker_node1 ~]# docker pull httpd:2.4.37-alpine
Error response from daemon: Get https://registry-1.docker.io/v2/library/httpd/manifests/2.4.37-alpine: net/http: TLS handshake timeout
[root@docker_node1 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šè¿™æ˜¯æ²¡æœ‰é…ç½®dockeråŠ é€Ÿï¼Œæ‰€ä»¥å¯¼è‡´è¶…æ—¶ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€3ã€é…ç½®dockeråŠ é€Ÿå™¨&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1503305/202004/1503305-20200420214155615-782587861.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â ã€€ã€€æç¤ºï¼šç™»å½•è‡ªå·±çš„è´¦å·å»é˜¿é‡Œäº‘æ§åˆ¶å°é‡Œæ‰¾å®¹å™¨é•œåƒæœåŠ¡--&amp;gt;é•œåƒåŠ é€Ÿï¼Œå³è¾¹æœ‰ä¸ªæ“ä½œæ–‡æ¡£ï¼Œæ ¹æ®è‡ªå·±çš„ç³»ç»Ÿé€‰æ‹©ç›¸åº”çš„é…ç½®ï¼Œç„¶åå¤åˆ¶ä¸‹æ¥åˆ°ä½ è‡ªå·±çš„Linuxä¸Šæ‰§è¡Œå³å¯ï¼›é…ç½®å¥½åŠ é€Ÿå™¨åï¼Œåœ¨æ‹‰å–é•œåƒå°±æ¯”è¾ƒå¿«äº†ï¼›&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1503305/202004/1503305-20200420214633195-647177093.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â ã€€ã€€4ã€è¿è¡Œä¸‰ä¸ªä¸åŒåç§°çš„å®¹å™¨&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1503305/202004/1503305-20200420214850754-372950256.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â ã€€ã€€æç¤ºï¼šå¯ä»¥çœ‹åˆ°ä¸‰ä¸ªä¸åŒåç§°çš„å®ä¾‹è¿è¡Œèµ·æ¥äº†ï¼Œä¸ºäº†åŒºåˆ†å„å®¹å™¨æˆ‘ä»¬æ•…æ„æŠŠä¸»é¡µçš„å†…å®¹æ›´æ”¹ä¸ºä¸åŒçš„åç§°ä»¥ç¤ºåŒºåˆ†ï¼›&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1503305/202004/1503305-20200420215138335-767511188.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â ã€€ã€€æç¤ºï¼šæŠŠä¸‰ä¸ªå®¹å™¨çš„ä¸»é¡µæ›´æ”¹åï¼Œéœ€è¦åœ¨dockerå®¿ä¸»æœºä¸Šæµ‹è¯•æ˜¯å¦èƒ½å¤Ÿè®¿é—®&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1503305/202004/1503305-20200420215339420-464216532.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â ã€€ã€€æç¤ºï¼šå®¹å™¨è¿è¡Œçš„æœåŠ¡å·²ç»èƒ½å¤Ÿæ­£å¸¸è®¿é—®ï¼Œåˆ°æ­¤åç«¯serverå°±å‡†å¤‡å°±ç»ªï¼Œæ¥ä¸‹æ¥å°±æ˜¯é…ç½®haproxyæ¥åä»£è¿™ä¸‰ä¸ªå®¹å™¨å°±å¯ä»¥äº†ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€é…ç½®haproxyåä»£åç«¯æœåŠ¡å™¨&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1503305/202004/1503305-20200420220113416-570926319.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â ã€€ã€€æç¤ºï¼šä»¥ä¸Šçº¢æ¡†ä¸­çš„åå­—å¿…é¡»ç›¸åŒï¼Œä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå°±æ˜¯å‰ç«¯è°ƒç”¨å“ªä¸ªåç«¯æœåŠ¡å™¨ç»„ï¼Œåç«¯æœåŠ¡å™¨ç»„å¿…é¡»å¾—å­˜åœ¨ï¼Œå¦åˆ™haproxyèµ·ä¸æ¥ï¼›è¿™é‡Œè¯´ä¸€ä¸‹ä»¥ä¸Šé…ç½®ï¼Œä»¥ä¸Šé…ç½®è¡¨ç¤ºå‰ç«¯mywebè¿™ä¸ªæœåŠ¡ç›‘å¬åœ¨è¯¥ä¸»æœºçš„æ‰€æœ‰åœ°å€çš„80ç«¯å£ï¼Œå¹¶æŠŠå®¢æˆ·ç«¯çš„è¯·æ±‚åä»£è‡³webserversè¿™ä¸ªåç«¯æœåŠ¡å™¨ç»„ä¸Šè¿›è¡Œå“åº”ï¼›åç«¯æœåŠ¡å™¨webserversï¼Œå®šä¹‰äº†ä¸‰ä¸ªserveråˆ†åˆ«æ˜¯172.17.0.2ã€3ã€4;å¦‚æœå‰ç«¯ç›‘å¬ç«¯å£å’Œåç«¯æœåŠ¡å™¨ç›‘å¬ç«¯å£ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œåç«¯æœåŠ¡å™¨ä¸Šå¯ä»¥ä¸ç”¨è°¢ç«¯å£çš„ï¼›&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1503305/202004/1503305-20200420220310369-1356583443.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â ã€€ã€€æç¤ºï¼šå¯åŠ¨haproxyåï¼Œä¸ºäº†éªŒè¯é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰é—®é¢˜ï¼Œéœ€è¦æŸ¥çœ‹ä¸‹å¯¹åº”ç›‘å¬çš„ç«¯å£æ˜¯å¦èµ·æ¥äº†ï¼Œå¦‚æœé…ç½®æ–‡ä»¶æœ‰é—®é¢˜ï¼Œå¯åŠ¨haproxyæ˜¯ä¸ä¼šæœ‰ä»»ä½•æç¤ºçš„ï¼Œæˆ‘ä»¬åªæœ‰æŸ¥çœ‹ç«¯å£æ¥åˆ¤æ–­haproxyæ˜¯å¦é…ç½®æ­£ç¡®å’ŒæˆåŠŸå¯åŠ¨ï¼›ä»ä¸Šé¢çš„çš„ä¿¡æ¯çœ‹ï¼Œæˆ‘ä»¬é…ç½®çš„haproxyæ²¡æœ‰é—®é¢˜ï¼Œå¯¹åº”80ç«¯å£éƒ½å¯åŠ¨èµ·æ¥äº†ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€æµ‹è¯•ï¼šç”¨æµè§ˆå™¨å¯¹192.168.0.22ï¼š80è¿›è¡Œè®¿é—®ï¼Œçœ‹çœ‹æ˜¯å¦èƒ½å¤Ÿå“åº”åç«¯æœåŠ¡å™¨çš„ä¸»é¡µï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1503305/202004/1503305-20200420221510981-1887714351.gif&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â ã€€ã€€æç¤ºï¼šå¯ä»¥çœ‹åˆ°haproxyèƒ½å¤Ÿæ­£å¸¸çš„æŠŠå®¢æˆ·ç«¯çš„è¯·æ±‚ä»¥è½®è¯¢çš„æ–¹å¼å‘åç«¯æœåŠ¡å™¨åä»£ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€ä»¥ä¸Šå°±æ˜¯haproxyæœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼ï¼Œä½œä¸ºåä»£æœåŠ¡å™¨ä»£ç†æœåŠ¡ç«¯å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼›æ¥ä¸‹æ¥æˆ‘ä»¬æ¥è¯´è¯´ç¼–è¯‘å®‰è£…haproxy&lt;/p&gt;
&lt;p&gt;ã€€ã€€1ã€é¦–å…ˆæˆ‘ä»¬è¦æŠŠè‡ªå·±çš„ç¼–è¯‘ç¯å¢ƒæ­å»ºå¥½&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@haproxy_node1 ~]# yum groupinstall &quot;development tools&quot; -y
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šé€šå¸¸ç¼–è¯‘ç¯å¢ƒæ‰€éœ€è¦çš„åŒ…ï¼Œåœ¨development toolsè¿™ä¸ªåŒ…ç»„ä¸­éƒ½æœ‰ï¼Œæ‰€ä»¥é€šå¸¸æˆ‘ä»¬æºç ç¼–è¯‘å®‰è£…éƒ½æ˜¯æŠŠè¿™ä¸ªåŒ…ç»„è£…ä¸Šï¼Œç„¶åç¼–è¯‘ï¼Œå¦‚æœä¸­é€”æœ‰æŠ¥é”™æç¤ºæˆ‘ä»¬æ²¡æœ‰å“ªä¸ªåŒ…ï¼Œæˆ‘ä»¬åœ¨å®‰è£…ç›¸åº”çš„åŒ…å°±å¯ä»¥äº†&lt;/p&gt;
&lt;p&gt;ã€€ã€€2ã€ä¸‹è½½haproxyæºç åŒ…&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1503305/202004/1503305-20200420223512383-1613650015.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â ã€€ã€€æç¤ºï¼šæˆ‘è¿™ä¸ªæ˜¯ä»å®˜ç½‘ä¸Šä¸‹è½½åï¼Œç„¶åä¸Šä¼ ä¸Šæ¥çš„ï¼Œå®˜ç½‘æ˜¯å›½å¤–çš„ä¸€ä¸ªç½‘ç«™ï¼Œæƒ³è¦è®¿é—®å®ƒï¼Œæˆ‘ä»¬éœ€è¦ç¿»å¢™å‡ºå»æ‰å¯ä»¥ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€3ã€è§£å‹æºç åŒ…ï¼Œå¹¶è¿›å…¥åˆ°æºç ç›®å½•æŸ¥çœ‹ç¼–è¯‘æ‰‹å†Œ&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@haproxy_node1 src]# tar xf haproxy-1.8.20.tar.gz 
  oot@haproxy_node1 src]# cd haproxy-1.8.20
[root@haproxy_node1 haproxy-1.8.20]# ls
CHANGELOG  CONTRIBUTING  ebtree    include  MAINTAINERS  README     ROADMAP  src      tests    VERSION
contrib    doc           examples  LICENSE  Makefile     reg-tests  scripts  SUBVERS  VERDATE
[root@haproxy_node1 haproxy-1.8.20]#
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šREADMEå°±æ˜¯ç¼–è¯‘æ‰‹å†Œï¼Œé‡Œé¢å‘Šè¯‰æˆ‘ä»¬æ€ä¹ˆå»ç¼–è¯‘å®‰è£…haproxyï¼Œéœ€è¦æŒ‡å®šçš„é‚£äº›å‚æ•°ç­‰ç­‰è¯´æ˜ï¼›æˆ‘ä»¬éœ€è¦å…³å¿ƒçš„æ˜¯æˆ‘ä»¬ç³»ç»Ÿä¸Šä»€ä¹ˆæ¶æ„ï¼Œå†…æ ¸ç‰ˆæœ¬ä¿¡æ¯ï¼›ç¼–è¯‘çš„æ—¶å€™æˆ‘ä»¬éœ€è¦ç”¨ARCHæ¥æŒ‡å®šç³»ç»Ÿæ¶æ„ï¼Œç”¨TARGETæ¥æŒ‡å®šå†…æ ¸ç‰ˆæœ¬ï¼ŒLinux2.6ä»¥ä¸Šçš„å†…æ ¸ç‰ˆæœ¬éœ€è¦æŒ‡å®šTARGET=linux2628ï¼›å…¶ä»–ç‰ˆæœ¬ä¿¡æ¯å¯ä»¥å¯¹ç…§READMEé‡Œçš„è¯´æ˜ä¿¡æ¯å¯¹ç…§æ¥æŒ‡å®šå¯¹åº”çš„å‚æ•°ï¼›é™¤æ­¤ä»¥å¤–æˆ‘ä»¬è¿˜éœ€è¦æŒ‡å®šæ˜¯å¦æ”¯æŒopensslã€zipå‹ç¼©ã€ä»¥åŠæ˜¯å¦ä½¿ç”¨systemdçš„æ–¹å¼æ¥ç®¡ç†æœåŠ¡ç­‰ç­‰ä¿¡æ¯ï¼Œæ ¹æ®è‡ªå·±çš„éœ€è¦å®šåˆ¶ç¼–è¯‘å‚æ•°ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€4ã€æŒ‡å®šç¼–è¯‘å‚æ•°ï¼Œç¼–è¯‘haproxy&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;36&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@haproxy_node1 haproxy-1.8.20]#  make ARCH=x86_64 TARGET=linux2628 USE_PCRE=1 USE_OPENSSL=1 USE_ZLIB=1 USE_SYSTEMD=1 USE_CPU_AFFINITY=1
gcc -Iinclude -Iebtree -Wall -m64 -march=x86-64 -O2 -g -fno-strict-aliasing -Wdeclaration-after-statement -fwrapv    -Wno-unused-label       -DCONFIG_HAP_LINUX_SPLICE -DTPROXY -DCONFIG_HAP_LINUX_TPROXY -DCONFIG_HAP_CRYPT -DUSE_ZLIB  -DENABLE_POLL -DENABLE_EPOLL -DUSE_CPU_AFFINITY -DASSUME_SPLICE_WORKS -DUSE_ACCEPT4 -DNETFILTER -DUSE_THREAD -DUSE_OPENSSL  -DUSE_SYSCALL_FUTEX -DUSE_SYSTEMD -DUSE_PCRE -I/usr/local/include  -DCONFIG_HAPROXY_VERSION=\&quot;1.8.20\&quot; -DCONFIG_HAPROXY_DATE=\&quot;2019/04/25\&quot; -c -o src/ev_poll.o src/ev_poll.c
In file included from include/types/global.h:32:0,
                 from src/ev_poll.c:26:
include/types/listener.h:29:25: fatal error: openssl/ssl.h: No such file or directory
 #include &amp;lt;openssl/ssl.h&amp;gt;
                         ^
compilation terminated.
make: *** [src/ev_poll.o] Error 1
[root@haproxy_node1 haproxy-1.8.20]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šä»¥ä¸ŠæŠ¥é”™è¯´æ²¡æœ‰opensslè¿™ä¸ªå¤´æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…openssl-develè¿™ä¸ªåŒ…å³å¯&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@haproxy_node1 haproxy-1.8.20]# yum install -y openssl-devel
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirrors.aliyun.com
 * extras: mirrors.huaweicloud.com
 * updates: mirrors.aliyun.com
Resolving Dependencies
--&amp;gt; Running transaction check
---&amp;gt; Package openssl-devel.x86_64 1:1.0.2k-19.el7 will be installed
--&amp;gt; Processing Dependency: openssl-libs(x86-64) = 1:1.0.2k-19.el7 for package: 1:openssl-devel-1.0.2k-19.el7.x86_64
--&amp;gt; Processing Dependency: zlib-devel(x86-64) for package: 1:openssl-devel-1.0.2k-19.el7.x86_64
--&amp;gt; Processing Dependency: krb5-devel(x86-64) for package: 1:openssl-devel-1.0.2k-19.el7.x86_64
â€¦â€¦çœç•¥éƒ¨åˆ†ä¿¡æ¯â€¦â€¦
Installed:
  openssl-devel.x86_64 1:1.0.2k-19.el7                                                                              

Dependency Installed:
  keyutils-libs-devel.x86_64 0:1.5.8-3.el7                   krb5-devel.x86_64 0:1.15.1-37.el7_7.2                  
  libcom_err-devel.x86_64 0:1.42.9-16.el7                    libkadm5.x86_64 0:1.15.1-37.el7_7.2                    
  libselinux-devel.x86_64 0:2.5-14.1.el7                     libsepol-devel.x86_64 0:2.5-10.el7                     
  libverto-devel.x86_64 0:0.2.5-4.el7                        pcre-devel.x86_64 0:8.32-17.el7                        
  zlib-devel.x86_64 0:1.2.7-18.el7                          

Dependency Updated:
  e2fsprogs.x86_64 0:1.42.9-16.el7                         e2fsprogs-libs.x86_64 0:1.42.9-16.el7                    
  krb5-libs.x86_64 0:1.15.1-37.el7_7.2                     libcom_err.x86_64 0:1.42.9-16.el7                        
  libselinux.x86_64 0:2.5-14.1.el7                         libselinux-python.x86_64 0:2.5-14.1.el7                  
  libselinux-utils.x86_64 0:2.5-14.1.el7                   libsepol.x86_64 0:2.5-10.el7                             
  libss.x86_64 0:1.42.9-16.el7                             openssl.x86_64 1:1.0.2k-19.el7                           
  openssl-libs.x86_64 1:1.0.2k-19.el7                      zlib.x86_64 0:1.2.7-18.el7                               

Complete!
[root@haproxy_node1 haproxy-1.8.20]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šé€šå¸¸ç¼–è¯‘çš„æ—¶å€™æŠ¥é”™ï¼Œæˆ‘ä»¬è¦æ³¨æ„çœ‹å®ƒæç¤ºæˆ‘ä»¬ä»€ä¹ˆï¼Œé€šå¸¸éƒ½æ˜¯ç¼ºå°‘æŸäº›åŒ…å¼•èµ·çš„ï¼Œå¯¹åº”æˆ‘ä»¬å®‰è£…develç‰ˆåŒ…éƒ½èƒ½å¤Ÿè§£å†³ï¼›å®‰è£…äº†openssl-develè¿™ä¸ªåŒ…åï¼Œå†æ¬¡ç¼–è¯‘ï¼Œä¸Šé¢çš„æŠ¥é”™å°±ä¸ä¼šæœ‰äº†ï¼›&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
APROXY_DATE=\&quot;2019/04/25\&quot; \
      -DBUILD_TARGET='&quot;linux2628&quot;' \
      -DBUILD_ARCH='&quot;x86_64&quot;' \
      -DBUILD_CPU='&quot;generic&quot;' \
      -DBUILD_CC='&quot;gcc&quot;' \
      -DBUILD_CFLAGS='&quot;-m64 -march=x86-64 -O2 -g -fno-strict-aliasing -Wdeclaration-after-statement -fwrapv -Wno-unused-label&quot;' \
      -DBUILD_OPTIONS='&quot;USE_ZLIB=1 USE_CPU_AFFINITY=1 USE_OPENSSL=1 USE_SYSTEMD=1 USE_PCRE=1&quot;' \
       -c -o src/haproxy.o src/haproxy.c
src/haproxy.c:66:31: fatal error: systemd/sd-daemon.h: No such file or directory
 #include &amp;lt;systemd/sd-daemon.h&amp;gt;
                               ^
compilation terminated.
make: *** [src/haproxy.o] Error 1
[root@haproxy_node1 haproxy-1.8.20]#
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šä»¥ä¸ŠæŠ¥é”™æç¤ºæˆ‘ä»¬ç¼ºå°‘systemd/sd-daemon.hï¼Œæˆ‘ä»¬å®‰è£…systemd-develå³å¯è§£å†³&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@haproxy_node1 ~]# yum install -y systemd-devel
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirrors.aliyun.com
 * extras: mirrors.huaweicloud.com
 * updates: mirrors.aliyun.com
Resolving Dependencies
--&amp;gt; Running transaction check
---&amp;gt; Package systemd-devel.x86_64 0:219-67.el7_7.4 will be installed
--&amp;gt; Processing Dependency: systemd-libs = 219-67.el7_7.4 for package: systemd-devel-219-67.el7_7.4.x86_64
--&amp;gt; Processing Dependency: systemd = 219-67.el7_7.4 for package: systemd-devel-219-67.el7_7.4.x86_64
--&amp;gt; Running transaction check
---&amp;gt; Package systemd.x86_64 0:219-42.el7 will be updated
--&amp;gt; Processing Dependency: systemd = 219-42.el7 for package: systemd-sysv-219-42.el7.x86_64
---&amp;gt; Package systemd.x86_64 0:219-67.el7_7.4 will be an update
--&amp;gt; Processing Dependency: libcryptsetup.so.12(CRYPTSETUP_2.0)(64bit) for package: systemd-219-67.el7_7.4.x86_64
--&amp;gt; Processing Dependency: liblz4.so.1()(64bit) for package: systemd-219-67.el7_7.4.x86_64
--&amp;gt; Processing Dependency: libcryptsetup.so.12()(64bit) for package: systemd-219-67.el7_7.4.x86_64
---&amp;gt; Package systemd-libs.x86_64 0:219-42.el7 will be updated
---&amp;gt; Package systemd-libs.x86_64 0:219-67.el7_7.4 will be an update
--&amp;gt; Running transaction check
---&amp;gt; Package cryptsetup-libs.x86_64 0:1.7.4-3.el7 will be updated
---&amp;gt; Package cryptsetup-libs.x86_64 0:2.0.3-5.el7 will be an update
---&amp;gt; Package lz4.x86_64 0:1.7.5-3.el7 will be installed
---&amp;gt; Package systemd-sysv.x86_64 0:219-42.el7 will be updated
---&amp;gt; Package systemd-sysv.x86_64 0:219-67.el7_7.4 will be an update
--&amp;gt; Finished Dependency Resolution

Dependencies Resolved

====================================================================================================================
 Package                        Arch                  Version                          Repository              Size
====================================================================================================================
Installing:
 systemd-devel                  x86_64                219-67.el7_7.4                   updates                208 k
Installing for dependencies:
 lz4                            x86_64                1.7.5-3.el7                      base                    99 k
Updating for dependencies:
 cryptsetup-libs                x86_64                2.0.3-5.el7                      base                   338 k
 systemd                        x86_64                219-67.el7_7.4                   updates                5.1 M
 systemd-libs                   x86_64                219-67.el7_7.4                   updates                411 k
 systemd-sysv                   x86_64                219-67.el7_7.4                   updates                 89 k

Transaction Summary
====================================================================================================================
Install  1 Package  (+1 Dependent package)
Upgrade             ( 4 Dependent packages)

Total download size: 6.2 M
Downloading packages:
Delta RPMs disabled because /usr/bin/applydeltarpm not installed.
(1/6): systemd-libs-219-67.el7_7.4.x86_64.rpm                                                | 411 kB  00:00:00     
(2/6): systemd-devel-219-67.el7_7.4.x86_64.rpm                                               | 208 kB  00:00:00     
(3/6): cryptsetup-libs-2.0.3-5.el7.x86_64.rpm                                                | 338 kB  00:00:00     
(4/6): lz4-1.7.5-3.el7.x86_64.rpm                                                            |  99 kB  00:00:00     
(5/6): systemd-sysv-219-67.el7_7.4.x86_64.rpm                                                |  89 kB  00:00:00     
(6/6): systemd-219-67.el7_7.4.x86_64.rpm                                                     | 5.1 MB  00:00:01     
--------------------------------------------------------------------------------------------------------------------
Total                                                                               5.4 MB/s | 6.2 MB  00:00:01     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Installing : lz4-1.7.5-3.el7.x86_64                                                                          1/10 
  Updating   : systemd-libs-219-67.el7_7.4.x86_64                                                              2/10 
  Updating   : cryptsetup-libs-2.0.3-5.el7.x86_64                                                              3/10 
  Updating   : systemd-219-67.el7_7.4.x86_64                                                                   4/10 
  Installing : systemd-devel-219-67.el7_7.4.x86_64                                                             5/10 
  Updating   : systemd-sysv-219-67.el7_7.4.x86_64                                                              6/10 
  Cleanup    : systemd-sysv-219-42.el7.x86_64                                                                  7/10 
  Cleanup    : systemd-219-42.el7.x86_64                                                                       8/10 
  Cleanup    : cryptsetup-libs-1.7.4-3.el7.x86_64                                                              9/10 
  Cleanup    : systemd-libs-219-42.el7.x86_64                                                                 10/10 
  Verifying  : systemd-libs-219-67.el7_7.4.x86_64                                                              1/10 
  Verifying  : systemd-devel-219-67.el7_7.4.x86_64                                                             2/10 
  Verifying  : cryptsetup-libs-2.0.3-5.el7.x86_64                                                              3/10 
  Verifying  : systemd-219-67.el7_7.4.x86_64                                                                   4/10 
  Verifying  : lz4-1.7.5-3.el7.x86_64                                                                          5/10 
  Verifying  : systemd-sysv-219-67.el7_7.4.x86_64                                                              6/10 
  Verifying  : systemd-libs-219-42.el7.x86_64                                                                  7/10 
  Verifying  : systemd-sysv-219-42.el7.x86_64                                                                  8/10 
  Verifying  : systemd-219-42.el7.x86_64                                                                       9/10 
  Verifying  : cryptsetup-libs-1.7.4-3.el7.x86_64                                                             10/10 

Installed:
  systemd-devel.x86_64 0:219-67.el7_7.4                                                                             

Dependency Installed:
  lz4.x86_64 0:1.7.5-3.el7                                                                                          

Dependency Updated:
  cryptsetup-libs.x86_64 0:2.0.3-5.el7    systemd.x86_64 0:219-67.el7_7.4    systemd-libs.x86_64 0:219-67.el7_7.4   
  systemd-sysv.x86_64 0:219-67.el7_7.4   

Complete!
[root@haproxy_node1 ~]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€å†æ¬¡ç¼–è¯‘&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
-Wno-unused-label       -DCONFIG_HAP_LINUX_SPLICE -DTPROXY -DCONFIG_HAP_LINUX_TPROXY -DCONFIG_HAP_CRYPT -DUSE_ZLIB  -DENABLE_POLL -DENABLE_EPOLL -DUSE_CPU_AFFINITY -DASSUME_SPLICE_WORKS -DUSE_ACCEPT4 -DNETFILTER -DUSE_THREAD -DUSE_OPENSSL  -DUSE_SYSCALL_FUTEX -DUSE_SYSTEMD -DUSE_PCRE -I/usr/include  -DCONFIG_HAPROXY_VERSION=\&quot;1.8.20\&quot; -DCONFIG_HAPROXY_DATE=\&quot;2019/04/25\&quot; -c -o src/hash.o src/hash.c
gcc -m64 -march=x86-64 -g -o haproxy src/ev_poll.o src/ev_epoll.o src/ssl_sock.o ebtree/ebtree.o ebtree/eb32sctree.o ebtree/eb32tree.o ebtree/eb64tree.o ebtree/ebmbtree.o ebtree/ebsttree.o ebtree/ebimtree.o ebtree/ebistree.o src/proto_http.o src/cfgparse.o src/server.o src/stream.o src/flt_spoe.o src/stick_table.o src/stats.o src/mux_h2.o src/checks.o src/haproxy.o src/log.o src/dns.o src/peers.o src/standard.o src/sample.o src/cli.o src/stream_interface.o src/proto_tcp.o src/backend.o src/proxy.o src/tcp_rules.o src/listener.o src/flt_http_comp.o src/pattern.o src/cache.o src/filters.o src/vars.o src/acl.o src/payload.o src/connection.o src/raw_sock.o src/proto_uxst.o src/flt_trace.o src/session.o src/ev_select.o src/channel.o src/task.o src/queue.o src/applet.o src/map.o src/frontend.o src/freq_ctr.o src/lb_fwlc.o src/mux_pt.o src/auth.o src/fd.o src/hpack-dec.o src/memory.o src/lb_fwrr.o src/lb_chash.o src/lb_fas.o src/hathreads.o src/chunk.o src/lb_map.o src/xxhash.o src/regex.o src/shctx.o src/buffer.o src/action.o src/h1.o src/compression.o src/pipe.o src/namespace.o src/sha1.o src/hpack-tbl.o src/hpack-enc.o src/uri_auth.o src/time.o src/proto_udp.o src/arg.o src/signal.o src/protocol.o src/lru.o src/hdr_idx.o src/hpack-huff.o src/mailers.o src/h2.o src/base64.o src/hash.o   -lcrypt  -lz -ldl -lpthread  -lssl -lcrypto -ldl -lsystemd -L/usr/lib -lpcreposix -lpcre 
[root@haproxy_node1 haproxy-1.8.20]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šå†æ¬¡ç¼–è¯‘å°±æ²¡æœ‰æç¤ºä»»ä½•é”™è¯¯äº†ï¼Œè¯´æ˜æˆ‘ä»¬çš„ç¼–è¯‘é€šè¿‡äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥make install äº†&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@haproxy_node1 haproxy-1.8.20]# make install PREFIX=/usr/local/haproxy
install -d &quot;/usr/local/haproxy/sbin&quot;
install haproxy  &quot;/usr/local/haproxy/sbin&quot;
install -d &quot;/usr/local/haproxy/share/man&quot;/man1
install -m 644 doc/haproxy.1 &quot;/usr/local/haproxy/share/man&quot;/man1
install -d &quot;/usr/local/haproxy/doc/haproxy&quot;
for x in configuration management architecture peers-v2.0 cookie-options lua WURFL-device-detection proxy-protocol linux-syn-cookies network-namespaces DeviceAtlas-device-detection 51Degrees-device-detection netscaler-client-ip-insertion-protocol peers close-options SPOE intro; do \
        install -m 644 doc/$x.txt &quot;/usr/local/haproxy/doc/haproxy&quot; ; \
done
[root@haproxy_node1 haproxy-1.8.20]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šå®‰è£…çš„æ—¶å€™æˆ‘ä»¬éœ€è¦ç”¨PREFIXæ¥æŒ‡å®šå®‰è£…çš„ç›®å½•ï¼Œå…¶å®å®‰è£…çš„è¿‡ç¨‹ä¸å¤–ä¹å°±æ˜¯æŠŠç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶æ‹·æœ¬åˆ°æˆ‘ä»¬æŒ‡å®šçš„ç›®å½•ï¼›åˆ°æ­¤ç¼–è¯‘å®‰è£…å°±å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥æ®è¯´åˆ›å»ºUNIT æ–‡ä»¶&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1503305/202004/1503305-20200420231125993-852518514.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â ã€€ã€€æç¤ºï¼šè¯¥unit file å¯ä»¥å‚è€ƒhaproxyçš„ç”¨æ³•æ¥å†™ï¼Œä¸»è¦æ˜¯çœ‹haproxyçš„é€‰é¡¹ï¼Œ-fè¡¨ç¤ºæŒ‡å®šé…ç½®æ–‡ä»¶ï¼Œ-cè¡¨ç¤ºæ£€æŸ¥æ¨¡å¼ï¼Œ-qè¡¨ç¤ºé™é»˜æ¨¡å¼ï¼Œä¹‹æ‰€ä»¥æˆ‘ä»¬å³ä¾¿é…ç½®æ–‡ä»¶æœ‰é”™æˆ‘ä»¬å¯åŠ¨çš„æ—¶å€™éƒ½ä¸æŠ¥é”™çš„åŸå› å°±æ˜¯å¯ç”¨äº†é™é»˜æ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨æŒ‡å®šè¯¥å‚æ•°ï¼›-Wsè¡¨ç¤ºmaster-workeræ”¯æŒå•ä¸»å¤šå­è¿›ç¨‹ï¼›-pè¡¨ç¤ºæŒ‡å®špidæ–‡ä»¶ï¼›æ ¹æ®ä¸Šé¢çš„è„šæœ¬ä¿¡æ¯ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨å¯¹åº”ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå¹¶æ ¹æ®haproxyçš„é…ç½®æ–‡ä»¶æŒ‡å®šçš„ç”¨æˆ·æ¥åˆ›å»ºç”¨æˆ·ï¼›&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@haproxy_node1 haproxy]# cat haproxy.cfg
global
        maxconn 100000
        chroot /usr/local/haproxy
        user    haproxy
        group   haproxy
        daemon
#       nbproc 4
#       cpu-map 1 0
#       cpu-map 2 1
#       cpu-map 3 2
#       cpu-map 4 3
        pidfile /run/haproxy.pid
        log 127.0.0.1 local3 info

defaults
        option http-keep-alive
        option  forwardfor
        maxconn 100000
        mode http
        timeout http-request    10s
        timeout queue           1m
        timeout connect         10s
        timeout client          1m
        timeout server          1m
        timeout http-keep-alive 10s


listen  web_port
        bind 0.0.0.0:80
        mode http
        log global
        server web1  192.168.0.22:80  check inter 3000 fall 2 rise 5
[root@haproxy_node1 haproxy]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æç¤ºï¼šä»¥ä¸Šé…ç½®ä¿¡æ¯ï¼Œåœ¨åç»­çš„åšå®¢ä¸­ä¼šç€é‡å»è¯´ï¼Œè¿™é‡Œå…ˆä¸è§£é‡Šï¼Œå…ˆæŠŠæœåŠ¡è·‘èµ·æ¥å†è¯´ï¼›ä»ä¸Šé¢çš„é…ç½®çœ‹ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨ç³»ç»Ÿä¸Šåˆ›å»ºä¸€ä¸ªhaproxyçš„ç”¨æˆ·ï¼›å½“ç„¶å¦‚æœä½ ä¸æƒ³åˆ›å»ºç”¨æˆ·ä½ å¯ä»¥é€‰æ‹©ä¸€ä¸ªä½ ç³»ç»Ÿä¸Šç°æœ‰ç”¨æˆ·å³å¯ï¼›å»ºè®®ç”¨haproxyç”¨æˆ·å»å¯åŠ¨haproxy;å¹¶ä¸”æŠŠhaproxyç”¨æˆ·çš„shellç±»å‹è®¾ç½®æˆ/sbin/nologin&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
[root@haproxy_node1 haproxy]# useradd -s /sbin/nologin haproxy
[root@haproxy_node1 haproxy]# id haproxy
uid=1000(haproxy) gid=1000(haproxy) groups=1000(haproxy)
[root@haproxy_node1 haproxy]# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ã€€ã€€æ¥ä¸‹æ¥æˆ‘ä»¬å°è¯•ç”¨systemctl start haproxyæ¥å¯åŠ¨æœåŠ¡çœ‹çœ‹å¯¹åº”çš„80æœåŠ¡æ˜¯å¦èƒ½å¤Ÿèµ·æ¥&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1503305/202004/1503305-20200420235243571-263600384.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â ã€€ã€€æç¤ºï¼šåœ¨å¯åŠ¨å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æŠŠ/usr/local/haproxy/sbin/haproxy ç»™è½¯è¿æ¥è‡³/usr/sbin/ä¸‹ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨unit fileé‡Œå†™çš„æ˜¯è¿™ä¸ªè·¯å¾„ï¼›é™¤æ­¤ä¹‹å¤–è¿˜è¦æ‰§è¡Œsystemctl daemon-reload è®©systemctl æŠŠhaproxyåŠ è½½åˆ°systemdç®¡ç†ï¼›&lt;/p&gt;
&lt;p&gt;ã€€ã€€æµ‹è¯•ï¼šæˆ‘ä»¬ç”¨æµè§ˆå™¨è®¿é—®192.168.0.21ï¼š80ï¼Œçœ‹çœ‹æ˜¯å¦è®¿é—®å¾—åˆ°æˆ‘ä»¬ä¹‹å‰çš„ä¸‰å°httpdæœåŠ¡ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2020.cnblogs.com/blog/1503305/202004/1503305-20200420235957911-1198110174.gif&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Â ã€€ã€€æç¤ºï¼šä»¥ä¸Šèƒ½å¤Ÿè®¿é—®åˆ°çš„åŸå› æ˜¯ï¼Œæˆ‘åœ¨ä¸Šé¢çš„é…ç½®æ–‡ä»¶ä¸­ç”¨listen æŒ‡ä»¤æŒ‡å®šäº†ç›‘å¬*:80å¯¹åº”çš„åç«¯ä¸»æœºä¸Š192.168.0.22ï¼š80;åœ¨æœ€å¼€å§‹çš„æ—¶å€™æˆ‘ä»¬å°±ç”¨192.168.0.22ï¼š80åä»£åé¢ä¸‰å°å®¹å™¨ï¼›è¿™é‡Œç›¸å½“äºæ˜¯ä¸¤å±‚åä»£ç»“æ„ï¼Œç”¨æˆ·è¯·æ±‚å‘é€åˆ°192.168.0.21ï¼š80,ç„¶å192.168.0.21æŠŠç”¨æˆ·è¯·æ±‚åä»£ä¹‹192.168.0.22ï¼š80ï¼Œç„¶å192.168.0.22æŠŠè¯·æ±‚åä»£ä¹‹åç«¯çš„172.17.0.2ã€3ã€4è¿™ä¸‰å°å®¹å™¨ä¸Šï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æµè§ˆå™¨çœ‹åˆ°çš„å°±æ˜¯åç«¯å®¹å™¨å“åº”çš„ç»“æœï¼›åˆ°æ­¤haproxyç¼–è¯‘å®‰è£…å°±å®Œæˆäº†ï¼›åç»­æˆ‘ä¼šæŒç»­æ›´æ–°haproxyçš„å…¶ä»–é…ç½®ç›¸å…³åšå®¢ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥ç‚¹ç‚¹å…³æ³¨ï¼Œå…±åŒå­¦ä¹ ï¼›&lt;/p&gt;
</description>
<pubDate>Mon, 20 Apr 2020 16:11:00 +0000</pubDate>
<dc:creator>Linux-1874</dc:creator>
<og:description>é¦–å…ˆæˆ‘ä»¬æ¥äº†è§£ä¸‹haproxyæ˜¯å¹²å˜›çš„ï¼Ÿhaproxyæ˜¯ä¸€ä¸ªæ³•å›½äººåå«Willy Tarreauå¼€å‘çš„ä¸€ä¸ªå¼€æºè½¯ä»¶ï¼›è¿™æ¬¾è½¯ä»¶ä¸»è¦ç”¨äºè§£å†³å®¢æˆ·ç«¯10000ä»¥ä¸Šçš„åŒæ—¶è¿æ¥çš„é«˜æ€§èƒ½çš„TCPå’ŒHTTPè´Ÿè½½å‡è¡¡</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/qiuhom-1874/p/12741018.html</dc:identifier>
</item>
<item>
<title>RxHttp ï¼Œæ¯”Retrofit æ›´ä¼˜é›…çš„åç¨‹ä½“éªŒ  - åˆ˜æ•¬å…´</title>
<link>http://www.cnblogs.com/liujingxing/p/12741525.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/liujingxing/p/12741525.html</guid>
<description>&lt;p&gt;Helloï¼Œå„ä½å°ä¼™ä¼´ï¼Œåˆè§é¢äº†ï¼Œå›é¦–è¿‡å»ï¼Œ&lt;a href=&quot;https://github.com/liujingxing/okhttp-RxHttp&quot;&gt;RxHttp&lt;/a&gt; å°±è¦è¿æ¥ä¸€å‘¨å¹´ç”Ÿæ—¥äº†(19å¹´4æœˆæ¨å‡º)ï¼Œè¿™ä¸€å¹´ï¼Œèµ°è¿‡æ¥çœŸå¿ƒ....çœŸå¿ƒä¸å®¹æ˜“ï¼Œä»£ç ç»´æŠ¤ã€å†™æ–‡ç« ã€å†™æ–‡æ¡£ç­‰ç­‰ï¼Œç»å¸¸éƒ½æ˜¯å¹²åˆ°é›¶ç‚¹ä¹‹åï¼Œä¹Ÿæ˜¯æˆ‘é¦–æ¬¡èŠ±è´¹å¤§éƒ¨åˆ†ä¸šä½™æ—¶é—´æ¥ç»´æŠ¤ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå…¨ç¨‹ä¸€ä¸ªäººç»´æŠ¤ï¼Œè¦çŸ¥é“ï¼Œç½‘ç»œè¯·æ±‚åº“ä¸åŒäºå…¶å®ƒå¼€æºé¡¹ç›®ï¼Œå„ä½åŒåƒšå¯¹è¿™ç±»é¡¹ç›®çš„è¦æ±‚éƒ½éå¸¸é«˜ï¼Œè€Œä¸”å‰é¢æœ‰ä¸€åº§å¤§å±±Retrofitï¼Œå¦‚ä½•åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ€å‡ºé‡å›´ï¼Ÿé‚£å°±åªæœ‰æ­»ç£•ç»†èŠ‚ï¼Œåšåˆ°&lt;code&gt;äººæ— æˆ‘æœ‰ï¼Œäººæœ‰æˆ‘ç²¾&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¹¸è¿çš„æ˜¯ï¼ŒRxHttpå®ƒåšåˆ°äº†ï¼Œæˆªæ­¢æœ¬æ–‡å‘è¡¨ï¼Œåœ¨Githubä¸Šï¼Œå·²è¾¾åˆ°&lt;a href=&quot;https://github.com/liujingxing/okhttp-RxHttp&quot;&gt;1600+star&lt;/a&gt;ï¼Œåœ¨RxHttp$RxLifeäº¤æµç¾¤ï¼ˆç¾¤å·ï¼š378530627ï¼Œç»å¸¸ä¼šæœ‰æŠ€æœ¯äº¤æµï¼Œæ¬¢è¿è¿›ç¾¤ï¼‰ä¹Ÿæœ‰äº†300+äººï¼Œè¿™æ¬¡ï¼Œ&lt;a href=&quot;https://github.com/liujingxing/okhttp-RxHttp&quot;&gt;RxHttp&lt;/a&gt; æ›´æ–°åˆ°äº†2.xç‰ˆæœ¬ï¼Œç»™å¤§å®¶å¸¦æ¥ä¸ä¸€æ ·çš„åç¨‹ä½“éªŒï¼Œä¸ºå•¥ä¸ä¸€æ ·ï¼Ÿçœ‹å®Œæœ¬æ–‡ä½ ä¼šæœ‰ç­”æ¡ˆ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;gradleä¾èµ–&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-java&quot;&gt;dependencies {
   //å¿…é¡»
   implementation 'com.ljx.rxhttp:rxhttp:2.2.0'
   annotationProcessor 'com.ljx.rxhttp:rxhttp-compiler:2.2.0' //ç”ŸæˆRxHttpç±»

   //ä»¥ä¸‹å‡ä¸ºéå¿…é¡»
   implementation 'com.ljx.rxlife:rxlife-coroutine:2.0.0'  //ç®¡ç†åç¨‹ç”Ÿå‘½å‘¨æœŸï¼Œé¡µé¢é”€æ¯ï¼Œå…³é—­è¯·æ±‚
   implementation 'com.ljx.rxlife2:rxlife-rxjava:2.0.0'    //ç®¡ç†RxJava2ç”Ÿå‘½å‘¨æœŸï¼Œé¡µé¢é”€æ¯ï¼Œå…³é—­è¯·æ±‚
   implementation 'com.ljx.rxlife3:rxlife-rxjava:3.0.0'    //ç®¡ç†RxJava3ç”Ÿå‘½å‘¨æœŸï¼Œé¡µé¢é”€æ¯ï¼Œå…³é—­è¯·æ±‚

   //Converter æ ¹æ®è‡ªå·±éœ€æ±‚é€‰æ‹© RxHttpé»˜è®¤å†…ç½®äº†GsonConverter
   implementation 'com.ljx.rxhttp:converter-jackson:2.2.0'
   implementation 'com.ljx.rxhttp:converter-fastjson:2.2.0'
   implementation 'com.ljx.rxhttp:converter-protobuf:2.2.0'
   implementation 'com.ljx.rxhttp:converter-simplexml:2.2.0'
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;æ³¨ï¼šçº¯Javaé¡¹ç›®ï¼Œè¯·ä½¿ç”¨annotationProcessoræ›¿ä»£kaptï¼›ä¾èµ–å®Œï¼Œè®°å¾—rebuildï¼Œæ‰ä¼šç”ŸæˆRxHttpç±»&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;RxHttp2.2.0ç‰ˆæœ¬èµ·ï¼Œå·²å®Œå…¨å‰”é™¤äº†RxJavaï¼Œé‡‡ç”¨å¤–æŒ‚çš„æ–¹æ³•æ›¿ä»£ï¼Œæ”¯æŒRxJava2ã€RxJava3ï¼Œè¯¦æƒ…æŸ¥çœ‹&lt;a href=&quot;https://github.com/liujingxing/okhttp-RxHttp&quot;&gt;RxHttpä¸Šæ‰‹&lt;/a&gt;&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/liujingxing/okhttp-RxHttp/wiki/FAQ&quot;&gt;é‡åˆ°é—®é¢˜ï¼Œç‚¹è¿™é‡Œï¼Œç‚¹è¿™é‡Œï¼Œç‚¹è¿™é‡Œï¼Œ99%çš„é—®é¢˜éƒ½èƒ½è‡ªå·±è§£å†³&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡åªä»‹ç»RxHttpä¸åç¨‹ç›¸å…³çš„éƒ¨åˆ†ï¼Œå¦‚æœä½ ä¹‹å‰æ²¡æœ‰äº†è§£è¿‡RxHttpï¼Œå»ºè®®å…ˆé˜…è¯»&lt;a href=&quot;https://juejin.im/post/5ded221a518825125d14a1d4&quot;&gt;RxHttp è®©ä½ çœ¼å‰ä¸€äº®çš„Httpè¯·æ±‚æ¡†æ¶&lt;/a&gt;ä¸€æ–‡&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ ç°åœ¨å¯¹åç¨‹è¿˜ä¸€çŸ¥åŠè§£ï¼Œæ²¡æœ‰å…³ç³»ï¼Œé‚£æ˜¯å› ä¸ºä½ è¿˜æ²¡æœ‰æ‰¾åˆ°è¿ç”¨åœºæ™¯ï¼Œè€Œç½‘ç»œè¯·æ±‚æ­£æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åˆ‡å…¥åœºæ™¯ï¼Œæœ¬æ–‡ä¼šæ•™ä½ å¦‚ä½•ä¼˜é›…ï¼Œå¹¶ä¸”å®‰å…¨çš„å¼€å¯åç¨‹ï¼Œä»¥åŠç”¨åç¨‹å¤„ç†å¤šä»»åŠ¡ï¼Œç”¨ç€ç”¨ç€ä½ å°±ä¼šäº†ã€‚&lt;/p&gt;

&lt;p&gt;ç”¨è¿‡RxHttpçš„åŒå­¦çŸ¥é“ï¼ŒRxHttpå‘é€ä»»æ„è¯·æ±‚éƒ½éµå¾ªè¯·æ±‚ä¸‰éƒ¨æ›²ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2020/4/19/17192f499ff7c4f6?w=860&amp;amp;h=688&amp;amp;f=jpeg&amp;amp;s=76163&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;ä»£ç è¡¨ç¤º&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;RxHttp.get(&quot;/service/...&quot;) //ç¬¬ä¸€æ­¥ï¼Œç¡®å®šè¯·æ±‚æ–¹å¼ï¼Œå¯ä»¥é€‰æ‹©postFormã€postJsonç­‰æ–¹æ³•
    .asString()            //ç¬¬äºŒæ­¥ï¼Œä½¿ç”¨asXXXç³»åˆ—æ–¹æ³•ç¡®å®šè¿”å›ç±»å‹
    .subscribe(s -&amp;gt; {      //ç¬¬ä¸‰æ­¥, è®¢é˜…è§‚å¯Ÿè€…
        //æˆåŠŸå›è°ƒ
    }, throwable -&amp;gt; {
        //å¤±è´¥å›è°ƒ
    });
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¿™ä½¿å¾—åˆå­¦è€…éå¸¸å®¹æ˜“ä¸Šæ‰‹ï¼ŒæŒæ¡äº†è¯·æ±‚ä¸‰éƒ¨æ›²ï¼Œå°±æŒæ¡äº†RxHttpçš„ç²¾é«“ï¼Œè€Œåç¨‹ï¼Œäº¦éµå¾ªè¯·æ±‚ä¸‰éƒ¨æ›²ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2020/4/19/17191eeb8a281d9b?w=700&amp;amp;h=704&amp;amp;f=png&amp;amp;s=87287&quot; alt=&quot;&quot;/&gt;&lt;br/&gt;ä»£ç è¡¨ç¤º&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;val str = RxHttp.get(&quot;/service/...&quot;) //ç¬¬ä¸€æ­¥ï¼Œç¡®å®šè¯·æ±‚æ–¹å¼ï¼Œå¯ä»¥é€‰æ‹©postFormã€postJsonç­‰æ–¹æ³•
    .toStr()    //ç¬¬äºŒæ­¥ï¼Œç¡®è®¤è¿”å›ç±»å‹ï¼Œè¿™é‡Œä»£è¡¨è¿”å›Stringç±»å‹
    .await()    //ç¬¬äºŒæ­¥ï¼Œä½¿ç”¨awaitæ–¹æ³•æ‹¿åˆ°è¿”å›å€¼
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;æ³¨: &lt;code&gt;await()&lt;/code&gt;æ˜¯suspendæŒ‚æ–­æ–¹æ³•ï¼Œéœ€è¦åœ¨å¦ä¸€ä¸ªsuspendæ–¹æ³•æˆ–åç¨‹ç¯å¢ƒä¸­è°ƒç”¨&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;æ¥ç€ï¼Œå¦‚æœæˆ‘ä»¬è¦è·å–ä¸€ä¸ª&lt;code&gt;Student&lt;/code&gt;å¯¹è±¡æˆ–è€…&lt;code&gt;List&amp;lt;Student&amp;gt;&lt;/code&gt;é›†åˆå¯¹è±¡ç­‰ç­‰ä»»æ„æ•°æ®ç±»å‹ï¼Œä¹Ÿæ˜¯é€šè¿‡&lt;code&gt;await()&lt;/code&gt;æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;//Studentå¯¹è±¡
val student = RxHttp.get(&quot;/service/...&quot;)
    .toClass&amp;lt;Student&amp;gt;()
    .await()
    
//List&amp;lt;Student&amp;gt; å¯¹è±¡   
val students = RxHttp.get(&quot;/service/...&quot;)
    .toClass&amp;lt;List&amp;lt;Student&amp;gt;&amp;gt;()
    .await()
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;toClass()&lt;/code&gt;æ–¹æ³•æ˜¯ä¸‡èƒ½çš„ï¼Œå®ƒå¯ä»¥æ‹¿åˆ°ä»»æ„æ•°æ®ç±»å‹ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹&lt;code&gt;toClass()&lt;/code&gt;æ–¹æ³•çš„å®Œæ•´ç­¾å&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;inline fun &amp;lt;reified T : Any&amp;gt; IRxHttp.toClass() : IAwait&amp;lt;T&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œå®ƒæ²¡æœ‰ä»»ä½•å‚æ•°ï¼Œåªæ˜¯å£°æ˜äº†ä¸€ä¸ªæ³›å‹&lt;code&gt;T&lt;/code&gt;ï¼Œå¹¶å°†å®ƒä½œä¸ºäº†è¿”å›ç±»å‹ï¼Œæ‰€ä»¥é€šè¿‡è¯¥æ–¹æ³•ï¼Œå°±å¯ä»¥æ‹¿åˆ°ä»»æ„æ•°æ®ç±»å‹ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸Šå°±æ˜¯RxHttpåœ¨åç¨‹ä¸­æœ€å¸¸è§„çš„æ“ä½œï¼Œæ¥ä¸‹æ¥ï¼Œä¸ŠçœŸæ­£çš„å¹²è´§&lt;/p&gt;
&lt;h2 id=&quot;21ã€ä¸šåŠ¡codeç»Ÿä¸€åˆ¤æ–­&quot;&gt;2.1ã€ä¸šåŠ¡codeç»Ÿä¸€åˆ¤æ–­&lt;/h2&gt;
&lt;p&gt;æˆ‘æƒ³å¤§éƒ¨åˆ†äººçš„æ¥å£è¿”å›æ ¼å¼éƒ½æ˜¯è¿™æ ·çš„&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;class Response&amp;lt;T&amp;gt; {
    var code = 0
    var msg : String? = null
    var data : T 
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ‹¿åˆ°è¯¥å¯¹è±¡çš„ç¬¬ä¸€æ­¥å°±æ˜¯å¯¹codeåšåˆ¤æ–­ï¼Œå¦‚æœ&lt;code&gt;code != 200&lt;/code&gt;(å‡è®¾200ä»£ç æ•°æ®æ­£ç¡®)ï¼Œå°±ä¼šæ‹¿åˆ°msgå­—æ®µç»™ç”¨æˆ·ä¸€äº›é”™è¯¯æç¤ºï¼Œå¦‚æœç­‰äº200ï¼Œå°±æ‹¿åˆ°dataå­—æ®µå»æ›´æ–°UIï¼Œå¸¸è§„çš„æ“ä½œæ˜¯è¿™æ ·çš„&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;val response = RxHttp.get(&quot;/service/...&quot;)
    .toClass&amp;lt;Response&amp;lt;Student&amp;gt;&amp;gt;()
    .await()
if (response.code == 200) {
    //æ‹¿åˆ°dataå­—æ®µ(Student)åˆ·æ–°UI
} else {
    //æ‹¿åˆ°msgå­—æ®µç»™å‡ºé”™è¯¯æç¤º
} 
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è¯•æƒ³ä¸€ä¸‹ï¼Œä¸€ä¸ªé¡¹ç›®å°‘è¯´ä¹Ÿæœ‰30+ä¸ªè¿™æ ·çš„æ¥å£ï¼Œå¦‚æœæ¯ä¸ªæ¥å£è¯»å–è¿™ä¹ˆåˆ¤æ–­ï¼Œå°±æ˜¾å¾—ä¸å¤Ÿä¼˜é›…ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯ç¾éš¾ï¼Œç›¸ä¿¡ä¹Ÿæ²¡æœ‰äººä¼šè¿™ä¹ˆå¹²ã€‚è€Œä¸”å¯¹äºUIæ¥è¯´ï¼Œåªéœ€è¦dataå­—æ®µå³å¯ï¼Œé”™è¯¯æç¤ºå•¥çš„æˆ‘ç®¡ä¸ç€ã€‚&lt;/p&gt;
&lt;p&gt;é‚£æœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•ï¼Œèƒ½ç›´æ¥æ‹¿åˆ°dataå­—æ®µï¼Œå¹¶ä¸”å¯¹codeåšå‡ºç»Ÿä¸€åˆ¤æ–­å‘¢ï¼Ÿæœ‰çš„ï¼Œç›´æ¥ä¸Šä»£ç &lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;val student = RxHttp.get(&quot;/service/...&quot;)
    .toResponse&amp;lt;Student&amp;gt;() //è°ƒç”¨æ­¤æ–¹æ³•ï¼Œç›´æ¥æ‹¿åˆ°dataå­—æ®µï¼Œä¹Ÿå°±æ˜¯Studentå¯¹è±¡   
    .await()  
//ç›´æ¥å¼€å§‹æ›´æ–°UI
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œè°ƒç”¨äº†&lt;code&gt;toResponse()&lt;/code&gt;æ–¹æ³•ï¼Œå°±ç›´æ¥æ‹¿åˆ°äº†dataå­—æ®µï¼Œä¹Ÿå°±æ˜¯Studentå¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶ï¼Œç›¸ä¿¡å¾ˆå¤šäººä¼šæœ‰ç–‘é—®ï¼Œ&lt;/p&gt;
&lt;p&gt;ä¸ºæ­¤ï¼Œå…ˆæ¥å›ç­”ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œä¸šåŠ¡codeå“ªé‡Œåˆ¤æ–­çš„ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å…¶å®&lt;code&gt;toResponse()&lt;/code&gt;æ–¹æ³•å¹¶ä¸æ˜¯RxHttpå†…éƒ¨æä¾›çš„ï¼Œè€Œæ˜¯ç”¨æˆ·é€šè¿‡è‡ªå®šä¹‰è§£æå™¨ï¼Œå¹¶ç”¨&lt;code&gt;@Parser&lt;/code&gt;æ³¨è§£æ ‡æ³¨ï¼Œæœ€åç”±æ³¨è§£å¤„ç†å™¨&lt;code&gt;rxhttp-compiler&lt;/code&gt;è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œå¬ä¸æ‡‚ï¼Ÿæ²¡å…³ç³»ï¼Œç›´æ¥çœ‹ä»£ç &lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;@Parser(name = &quot;Response&quot;)
open class ResponseParser&amp;lt;T&amp;gt; : AbstractParser&amp;lt;T&amp;gt; {
    
    //ä»¥ä¸‹ä¸¤ä¸ªæ„é€ æ–¹æ³•æ˜¯å¿…é¡»çš„
    protected constructor() : super()
    constructor(type: Class&amp;lt;T&amp;gt;) : super(type)

    @Throws(IOException::class)
    override fun onParse(response: okhttp3.Response): T {
        val type: Type = ParameterizedTypeImpl[Response::class.java, mType] //è·å–æ³›å‹ç±»å‹
        val data: Response&amp;lt;T&amp;gt; = convert(response, type)   //è·å–Responseå¯¹è±¡
        val t = data.data                             //è·å–dataå­—æ®µ
        if (data.code != 200 || t == null) { //codeä¸ç­‰äº200ï¼Œè¯´æ˜æ•°æ®ä¸æ­£ç¡®ï¼ŒæŠ›å‡ºå¼‚å¸¸
            throw ParseException(data.code.toString(), data.msg, response)
        }
        return t
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸Šé¢ä»£ç åªéœ€è¦å…³æ³¨ä¸¤ç‚¹å³å¯ï¼Œ&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€ç‚¹ï¼Œæˆ‘ä»¬åœ¨ç±»å¼€å¤´ä½¿ç”¨äº†&lt;code&gt;@Parser&lt;/code&gt;æ³¨è§£ï¼Œå¹¶ä¸ºè§£æå™¨å–åä¸º&lt;code&gt;Response&lt;/code&gt;ï¼Œæ‰€ä»¥å°±æœ‰äº†&lt;code&gt;toResponse()&lt;/code&gt;æ–¹æ³•ï¼ˆå‘½åæ–¹å¼ä¸ºï¼što + Parseræ³¨è§£é‡Œè®¾ç½®çš„åå­—ï¼‰ï¼›&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒç‚¹ï¼Œæˆ‘ä»¬åœ¨&lt;code&gt;if&lt;/code&gt;è¯­å¥é‡Œï¼Œå¯¹codeåšäº†åˆ¤æ–­ï¼Œé200æˆ–è€…dataä¸ºç©ºæ—¶ï¼Œå°±æŠ›å‡ºå¼‚å¸¸ï¼Œå¹¶å¸¦ä¸Šäº†codeåŠmsgå­—æ®µï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å¼‚å¸¸å›è°ƒçš„åœ°æ–¹å°±èƒ½æ‹¿åˆ°è¿™ä¸¤ä¸ªå­—æ®µ&lt;/p&gt;
&lt;p&gt;æ¥ç€å›ç­”ç¬¬äºŒä¸ªé—®é¢˜ï¼Œcodeé200æ—¶ï¼Œå¦‚ä½•æ‹¿åˆ°msgå­—æ®µï¼Ÿç›´æ¥ä¸Šä»£ç ï¼Œçœ‹ä¸€ä¸ªä½¿ç”¨åç¨‹å‘é€è¯·æ±‚çš„å®Œæ•´æ¡ˆä¾‹&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;//å½“å‰ç¯å¢ƒåœ¨Fragmentä¸­
fun getStudent() {   
    //rxLifeScopeåœ¨rxLife-coroutineåº“ä¸­ï¼Œéœ€è¦å•ç‹¬ä¾èµ–                                 
    rxLifeScope.launch({    //é€šè¿‡launchæ–¹æ³•å¼€å¯ä¸€ä¸ªåç¨‹                           
        val student = RxHttp.get(&quot;/service/...&quot;) 
            .toResponse&amp;lt;Student&amp;gt;()
            .await()                 
    }, {                                               
        //å¼‚å¸¸å›è°ƒï¼Œè¿™é‡Œçš„itä¸ºThrowableç±»å‹                                        
        val code = it.code                            
        val msg = it.msg                              
    })                                                
}                                                     
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;æ³¨ï¼šRxLifeScope æ˜¯ &lt;a href=&quot;https://github.com/liujingxing/RxLife-Coroutine&quot;&gt;RxLife-Coroutine&lt;/a&gt;åº“ä¸­çš„ç±»ï¼Œæœ¬æ–‡åç»­ä¼šè¯¦ç»†ä»‹ç»&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šé¢çš„ä»£ç ï¼Œåœ¨å¼‚å¸¸å›è°ƒä¸­ä¾¿å¯æ‹¿åˆ°codeåŠmsgå­—æ®µï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ&lt;code&gt;it.code&lt;/code&gt;åŠ&lt;code&gt;it.msg&lt;/code&gt;æ˜¯æˆ‘ä¸ºThrowableç±»æ‰©å±•çš„ä¸¤ä¸ªå±æ€§ï¼Œä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;val Throwable.code: Int
    get() {
        val errorCode = when (this) {
            is HttpStatusCodeException -&amp;gt; this.statusCode //HttpçŠ¶æ€ç å¼‚å¸¸
            is ParseException -&amp;gt; this.errorCode     //ä¸šåŠ¡codeå¼‚å¸¸
            else -&amp;gt; &quot;-1&quot;
        }
        return try {
            errorCode.toInt()
        } catch (e: Exception) {
            -1
        }
    }

val Throwable.msg: String
    get() {
        return if (this is UnknownHostException) { //ç½‘ç»œå¼‚å¸¸
            &quot;å½“å‰æ— ç½‘ç»œï¼Œè¯·æ£€æŸ¥ä½ çš„ç½‘ç»œè®¾ç½®&quot;
        } else if (
            this is SocketTimeoutException  //okhttpå…¨å±€è®¾ç½®è¶…æ—¶
            || this is TimeoutException     //rxjavaä¸­çš„timeoutæ–¹æ³•è¶…æ—¶
            || this is TimeoutCancellationException  //åç¨‹è¶…æ—¶
        ) {
            &quot;è¿æ¥è¶…æ—¶,è¯·ç¨åå†è¯•&quot;
        } else if (this is ConnectException) {
            &quot;ç½‘ç»œä¸ç»™åŠ›ï¼Œè¯·ç¨å€™é‡è¯•ï¼&quot;
        } else if (this is HttpStatusCodeException) {               //è¯·æ±‚å¤±è´¥å¼‚å¸¸
            &quot;HttpçŠ¶æ€ç å¼‚å¸¸&quot;
        } else if (this is JsonSyntaxException) {  //è¯·æ±‚æˆåŠŸï¼Œä½†Jsonè¯­æ³•å¼‚å¸¸,å¯¼è‡´è§£æå¤±è´¥
            &quot;æ•°æ®è§£æå¤±è´¥,è¯·æ£€æŸ¥æ•°æ®æ˜¯å¦æ­£ç¡®&quot;
        } else if (this is ParseException) {       // ParseExceptionå¼‚å¸¸è¡¨æ˜è¯·æ±‚æˆåŠŸï¼Œä½†æ˜¯æ•°æ®ä¸æ­£ç¡®
            this.message ?: errorCode   //msgä¸ºç©ºï¼Œæ˜¾ç¤ºcode
        } else {
            &quot;è¯·æ±‚å¤±è´¥ï¼Œè¯·ç¨åå†è¯•&quot;
        }
    }
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åˆ°è¿™ï¼Œä¸šåŠ¡codeç»Ÿä¸€åˆ¤æ–­å°±ä»‹ç»å®Œæ¯•ï¼Œä¸Šé¢çš„ä»£ç ï¼Œå¤§éƒ¨åˆ†äººéƒ½å¯ä»¥ç®€å•ä¿®æ”¹åï¼Œç›´æ¥ç”¨åˆ°è‡ªå·±çš„é¡¹ç›®ä¸Šï¼Œå¦‚&lt;code&gt;ResponseParser&lt;/code&gt;è§£æå™¨ï¼Œåªéœ€è¦æ”¹ä¸‹&lt;code&gt;if&lt;/code&gt;è¯­å¥çš„åˆ¤æ–­æ¡ä»¶å³å¯&lt;/p&gt;
&lt;h2 id=&quot;22ã€retry-å¤±è´¥é‡è¯•&quot;&gt;2.2ã€retry å¤±è´¥é‡è¯•&lt;/h2&gt;
&lt;p&gt;OkHttpä¸ºæˆ‘ä»¬æä¾›äº†å…¨å±€çš„å¤±è´¥é‡è¯•æœºåˆ¶ï¼Œç„¶è€Œï¼Œè¿™è¿œè¿œä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œæ¯”å¦‚ï¼Œæˆ‘å°±éƒ¨åˆ†æ¥å£éœ€è¦å¤±è´¥é‡è¯•ï¼Œè€Œä¸æ˜¯å…¨å±€çš„ï¼›æˆ‘éœ€è¦æ ¹æ®æŸäº›æ¡ä»¶æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦é‡è¯•ï¼›äº¦æˆ–è€…æˆ‘éœ€è¦å‘¨æœŸæ€§é‡è¯•ï¼Œå³é—´éš”å‡ ç§’åé‡è¯•ç­‰ç­‰&lt;/p&gt;
&lt;p&gt;é‚£RxHttpåç¨‹æ˜¯å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜çš„å‘¢ï¼ŸRxHttpæä¾›äº†ä¸€ä¸ª&lt;code&gt;retry()&lt;/code&gt;æ–¹æ³•æ¥è§£å†³è¿™äº›éš¾é¢˜ï¼Œæ¥çœ‹ä¸‹å®Œæ•´çš„æ–¹æ³•ç­¾å&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;/**
 * å¤±è´¥é‡è¯•ï¼Œè¯¥æ–¹æ³•ä»…åœ¨ä½¿ç”¨åç¨‹æ—¶æ‰æœ‰æ•ˆ
 * @param times  é‡è¯•æ¬¡æ•°, é»˜è®¤Int.MAX_VALUE ä»£è¡¨ä¸æ–­é‡è¯•
 * @param period é‡è¯•å‘¨æœŸ, é»˜è®¤ä¸º0, å•ä½: milliseconds
 * @param test   é‡è¯•æ¡ä»¶, é»˜è®¤ä¸ºç©ºï¼Œå³æ— æ¡ä»¶é‡è¯•
 */
fun retry(
    times: Int = Int.MAX_VALUE,
    period: Long = 0,
    test: ((Throwable) -&amp;gt; Boolean)? = null
)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;retry()&lt;/code&gt;æ–¹æ³•å…±æœ‰3ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯é‡è¯•æ¬¡æ•°ã€é‡è¯•å‘¨æœŸã€é‡è¯•æ¡ä»¶ï¼Œéƒ½æœ‰é»˜è®¤å€¼ï¼Œ3ä¸ªå‚æ•°å¯ä»¥éšæ„æ­é…ï¼Œå¦‚ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;retry()    //æ— æ¡ä»¶ã€ä¸é—´æ–­ã€ä¸€ç›´é‡è¯•
retry(2)   //æ— æ¡ä»¶ã€ä¸é—´æ–­ã€é‡è¯•ä¸¤æ¬¡
retry(2, 1000)   //æ— æ¡ä»¶ é—´éš”1s é‡è¯•2æ­¤
retry { it is ConnectException } //æœ‰æ¡ä»¶ã€ä¸é—´æ–­ã€ä¸€ç›´é‡è¯•
retry(2) { it is ConnectException }  //æœ‰æ¡ä»¶ã€ä¸é—´æ–­ã€é‡è¯•2æ¬¡
retry(2, 1000) { it is ConnectException }  //æœ‰æ¡ä»¶ã€é—´éš”1sã€é‡è¯•2æ¬¡
retry(period = 1000) { it is ConnectException } //æœ‰æ¡ä»¶ã€é—´æ–­1sã€ä¸€ç›´é‡è¯•
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å‰ä¸¤ä¸ªå‚æ•°ç›¸ä¿¡å¤§å®¶ä¸€çœ‹å°±èƒ½æ˜ç™½ï¼Œè¿™é‡Œå¯¹ç¬¬3ä¸ªå‚æ•°é¢å¤–è¯´ä¸€ä¸‹ï¼Œé€šè¿‡ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æ‹¿åˆ°&lt;code&gt;Throwable&lt;/code&gt;å¼‚å¸¸å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å¼‚å¸¸åšåˆ¤æ–­ï¼Œå¦‚æœéœ€è¦é‡è¯•ï¼Œå°±è¿”å›trueï¼Œä¸éœ€è¦å°±è¿”å›falseï¼Œä¸‹é¢çœ‹çœ‹å…·ä½“ä»£ç &lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;val student = RxHttp.postForm(&quot;/service/...&quot;)
    .toResponse&amp;lt;Student&amp;gt;()
    .retry(2, 1000) {       //é‡è¯•2æ¬¡ï¼Œæ¯æ¬¡é—´éš”1s                       
        it is ConnectException   //å¦‚æœæ˜¯ç½‘ç»œå¼‚å¸¸å°±é‡è¯•     
    }                                             
    .await()                     
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;23ã€timeout-è¶…æ—¶&quot;&gt;2.3ã€timeout è¶…æ—¶&lt;/h2&gt;
&lt;p&gt;OkHttpæä¾›äº†å…¨å±€çš„è¯»ã€å†™åŠè¿æ¥è¶…æ—¶ï¼Œæœ‰æ—¶æˆ‘ä»¬ä¹Ÿéœ€è¦ä¸ºæŸä¸ªè¯·æ±‚è®¾ç½®ä¸åŒçš„è¶…æ—¶æ—¶é•¿ï¼Œæ­¤æ—¶å°±å¯ä»¥ç”¨åˆ°RxHttpçš„&lt;code&gt;timeout(Long)&lt;/code&gt;æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;val student = RxHttp.postForm(&quot;/service/...&quot;)
    .toResponse&amp;lt;Student&amp;gt;()
    .timeout(3000)      //è¶…æ—¶æ—¶é•¿ä¸º3s                           
    .await()                       
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;24ã€async-å¼‚æ­¥æ“ä½œç¬¦&quot;&gt;2.4ã€async å¼‚æ­¥æ“ä½œç¬¦&lt;/h2&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬ç”±ä¸¤ä¸ªè¯·æ±‚éœ€è¦å¹¶è¡Œæ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨è¯¥æ“ä½œç¬¦ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;//åŒæ—¶è·å–ä¸¤ä¸ªå­¦ç”Ÿä¿¡æ¯
suspend void initData() {
  val asyncStudent1 = RxHttp.postForm(&quot;/service/...&quot;)
    .toResponse&amp;lt;Student&amp;gt;()
    .async()   //è¿™é‡Œä¼šè¿”å›Deferred&amp;lt;Student&amp;gt;  
    
  val asyncStudent2 = RxHttp.postForm(&quot;/service/...&quot;)
    .toResponse&amp;lt;Student&amp;gt;()
    .async()   //è¿™é‡Œä¼šè¿”å›Deferred&amp;lt;Student&amp;gt;  

  //éšåè°ƒç”¨awaitæ–¹æ³•è·å–å¯¹è±¡    
  val student1 = asyncStudent1.await()
  val student2 = asyncStudent2.await()
} 
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;25ã€delayã€startdelay-å»¶è¿Ÿ&quot;&gt;2.5ã€delayã€startDelay å»¶è¿Ÿ&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;delay&lt;/code&gt;æ“ä½œç¬¦æ˜¯è¯·æ±‚ç»“æŸåï¼Œå»¶è¿Ÿä¸€æ®µæ—¶é—´è¿”å›ï¼›è€Œ&lt;code&gt;startDelay&lt;/code&gt;æ“ä½œç¬¦åˆ™æ˜¯å»¶è¿Ÿä¸€æ®µæ—¶é—´åå†å‘é€è¯·æ±‚ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;val student = RxHttp.postForm(&quot;/service/...&quot;)
    .toResponse&amp;lt;Student&amp;gt;()
    .delay(1000)      //è¯·æ±‚å›æ¥åï¼Œå»¶è¿Ÿ1sè¿”å›                         
    .await()       
    
val student = RxHttp.postForm(&quot;/service/...&quot;)
    .toResponse&amp;lt;Student&amp;gt;()
    .startDelay(1000)     //å»¶è¿Ÿ1såå†å‘é€è¯·æ±‚       
    .await()     
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;26ã€onerrorreturnã€onerrorreturnitemå¼‚å¸¸é»˜è®¤å€¼&quot;&gt;2.6ã€onErrorReturnã€onErrorReturnItemå¼‚å¸¸é»˜è®¤å€¼&lt;/h2&gt;
&lt;p&gt;æœ‰äº›æƒ…å†µï¼Œæˆ‘ä»¬ä¸å¸Œæœ›è¯·æ±‚å‡ºç°å¼‚å¸¸æ—¶ï¼Œç›´æ¥èµ°å¼‚å¸¸å›è°ƒï¼Œæ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä¸¤ä¸ªæ“ä½œç¬¦ï¼Œç»™å‡ºé»˜è®¤çš„å€¼ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;//æ ¹æ®å¼‚å¸¸ç»™å‡ºé»˜è®¤å€¼
val student = RxHttp.postForm(&quot;/service/...&quot;)
    .toResponse&amp;lt;Student&amp;gt;()
    .timeout(100)      //è¶…æ—¶æ—¶é•¿ä¸º100æ¯«ç§’  
    .onErrorReturn {
        //å¦‚æœæ—¶è¶…æ—¶å¼‚å¸¸ï¼Œå°±ç»™å‡ºé»˜è®¤å€¼ï¼Œå¦åˆ™ï¼ŒæŠ›å‡ºåŸå¼‚å¸¸
        return@onErrorReturn if (it is TimeoutCancellationException)
            Student()                                              
        else                                                        
            throw it                                                
    }
    .await()
    
//åªè¦å‡ºç°å¼‚å¸¸ï¼Œå°±è¿”å›é»˜è®¤å€¼
val student = RxHttp.postForm(&quot;/service/...&quot;)
    .toResponse&amp;lt;Student&amp;gt;()
    .timeout(100)      //è¶…æ—¶æ—¶é•¿ä¸º100æ¯«ç§’  
    .onErrorReturnItem(Student())
    .await()
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;27ã€tryawait-å¼‚å¸¸è¿”å›null&quot;&gt;2.7ã€tryAwait å¼‚å¸¸è¿”å›null&lt;/h2&gt;
&lt;p&gt;å¦‚æœä½ ä¸æƒ³åœ¨å¼‚å¸¸æ—¶è¿”å›é»˜è®¤å€¼ï¼Œåˆä¸æƒ³å¼‚å¸¸æ˜¯å½±å“ç¨‹åºçš„æ‰§è¡Œï¼Œ&lt;code&gt;tryAwait&lt;/code&gt;å°±æ´¾ä¸Šç”¨åœºäº†ï¼Œå®ƒä¼šåœ¨å¼‚å¸¸å‡ºç°æ—¶ï¼Œè¿”å›nullï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;val student = RxHttp.postForm(&quot;/service/...&quot;)
    .toResponse&amp;lt;Student&amp;gt;()
    .timeout(100)      //è¶…æ—¶æ—¶é•¿ä¸º100æ¯«ç§’                        
    .tryAwait()     //è¿™é‡Œè¿”å› Student? å¯¹è±¡ï¼Œå³æœ‰å¯èƒ½ä¸ºç©º  
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;28-map-è½¬æ¢ç¬¦å·&quot;&gt;2.8 map è½¬æ¢ç¬¦å·&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;map&lt;/code&gt;æ“ä½œç¬¦å¾ˆå¥½ç†è§£ï¼ŒRxJavaå³åç¨‹çš„Flowéƒ½æœ‰è¯¥æ“ä½œç¬¦ï¼ŒåŠŸèƒ½éƒ½æ˜¯ä¸€æ ·ï¼Œç”¨äºè½¬æ¢å¯¹è±¡ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;val student = RxHttp.postForm(&quot;/service/...&quot;)
    .toStr()
    .map { it.length }  //Stringè½¬Int                        
    .tryAwait()     //è¿™é‡Œè¿”å› Student? å¯¹è±¡ï¼Œå³æœ‰å¯èƒ½ä¸ºç©º  
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;29ã€ä»¥ä¸Šæ“ä½œç¬¦éšæ„æ­é…&quot;&gt;2.9ã€ä»¥ä¸Šæ“ä½œç¬¦éšæ„æ­é…&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸Šæ“ä½œç¬¦ï¼Œå¯éšæ„æ­é…ä½¿ç”¨ï¼Œä½†è°ƒç”¨é¡ºåºçš„ä¸åŒï¼Œäº§ç”Ÿçš„æ•ˆæœä¹Ÿä¸ä¸€æ ·ï¼Œè¿™é‡Œå…ˆå‘Šè¯‰å¤§å®¶ï¼Œä»¥ä¸Šæ“ä½œç¬¦åªä¼šå¯¹ä¸Šæ¸¸ä»£ç äº§ç”Ÿå½±å“ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚&lt;code&gt;timeoutåŠretry&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;val student = RxHttp.postForm(&quot;/service/...&quot;)
    .toResponse&amp;lt;Student&amp;gt;()
    .timeout(50)
    .retry(2, 1000) { it is TimeoutCancellationException }                                  
    .await()                       
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä»¥ä¸Šä»£ç ï¼Œåªè¦å‡ºç°è¶…æ—¶ï¼Œå°±ä¼šé‡è¯•ï¼Œå¹¶ä¸”æœ€å¤šé‡è¯•ä¸¤æ¬¡ã€‚&lt;/p&gt;
&lt;p&gt;ä½†å¦‚æœ&lt;code&gt;timeout&lt;/code&gt;ã€&lt;code&gt;retry&lt;/code&gt;äº’æ¢ä¸‹ä½ç½®ï¼Œå°±ä¸ä¸€æ ·äº†ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;val student = RxHttp.postForm(&quot;/service/...&quot;)
    .toResponse&amp;lt;Student&amp;gt;()
    .retry(2, 1000) { it is TimeoutCancellationException }       
    .timeout(50)                                  
    .await()                       
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æ­¤æ—¶ï¼Œå¦‚æœ50æ¯«ç§’å†…è¯·æ±‚æ²¡æœ‰å®Œæˆï¼Œå°±ä¼šè§¦å‘è¶…æ—¶å¼‚å¸¸ï¼Œå¹¶ä¸”ç›´æ¥èµ°å¼‚å¸¸å›è°ƒï¼Œä¸ä¼šé‡è¯•ã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼ŸåŸå› å¾ˆç®€å•ï¼Œ&lt;code&gt;timeoutåŠretry&lt;/code&gt;æ“ä½œç¬¦ï¼Œä»…å¯¹ä¸Šæ¸¸ä»£ç ç”Ÿæ•ˆã€‚å¦‚retryæ“ä½œç¬¦ï¼Œä¸‹æ¸¸çš„å¼‚å¸¸æ˜¯æ•è·ä¸åˆ°çš„ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆtimeoutåœ¨retryä¸‹ï¼Œè¶…æ—¶æ—¶ï¼Œé‡è¯•æœºåˆ¶æ²¡æœ‰è§¦å‘çš„åŸå› ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨çœ‹&lt;code&gt;timeout&lt;/code&gt;å’Œ&lt;code&gt;startDelay&lt;/code&gt;æ“ä½œç¬¦&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;val student = RxHttp.postForm(&quot;/service/...&quot;)
    .toResponse&amp;lt;Student&amp;gt;()
    .startDelay(2000)       
    .timeout(1000)                                  
    .await()                       
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä»¥ä¸Šä»£ç ï¼Œå¿…å®šä¼šè§¦å‘è¶…æ—¶å¼‚å¸¸ï¼Œå› ä¸ºstartDelayï¼Œå»¶è¿Ÿäº†2000æ¯«ç§’ï¼Œè€Œè¶…æ—¶æ—¶é•¿åªæœ‰1000æ¯«ç§’ï¼Œæ‰€ä»¥å¿…å®šè§¦å‘è¶…æ—¶ã€‚&lt;br/&gt;ä½†äº’æ¢ä¸‹ä½ç½®ï¼Œåˆä¸ä¸€æ ·äº†ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;val student = RxHttp.postForm(&quot;/service/...&quot;)
    .toResponse&amp;lt;Student&amp;gt;()
    .timeout(1000)    
    .startDelay(2000)       
    .await()                       
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä»¥ä¸Šä»£ç æ­£å¸¸æƒ…å†µä¸‹ï¼Œéƒ½èƒ½æ­£ç¡®æ‹¿åˆ°è¿”å›å€¼ï¼Œä¸ºä»€ä¹ˆï¼ŸåŸå› å¾ˆç®€å•ï¼Œä¸Šé¢è¯´è¿‡ï¼Œæ“ä½œç¬¦åªä¼šå¯¹ä¸Šæ¸¸äº§ç”Ÿå½±å“ï¼Œä¸‹æ¸¸çš„&lt;code&gt;startDelay&lt;/code&gt;å»¶è¿Ÿï¼Œå®ƒæ˜¯ä¸ç®¡çš„ï¼Œä¹Ÿç®¡ä¸åˆ°ã€‚&lt;/p&gt;

&lt;p&gt;RxHttpå¯¹æ–‡ä»¶çš„ä¼˜é›…æ“ä½œæ˜¯ä¸ç”Ÿä¿±æ¥çš„ï¼Œåœ¨åç¨‹çš„ç¯å¢ƒä¸‹ï¼Œä¾ç„¶å¦‚æ­¤ï¼Œæ²¡æœ‰ä»€ä¹ˆæ¯”ä»£ç æ›´å…·æœ‰è¯´æœåŠ›ï¼Œç›´æ¥ä¸Šä»£ç &lt;/p&gt;
&lt;h2 id=&quot;31ã€æ–‡ä»¶ä¸Šä¼ &quot;&gt;3.1ã€æ–‡ä»¶ä¸Šä¼ &lt;/h2&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt; val result = RxHttp.postForm(&quot;/service/...&quot;)  
     .addFile(&quot;file&quot;, File(&quot;xxx/1.png&quot;))        //æ·»åŠ å•ä¸ªæ–‡ä»¶   
     .addFile(&quot;fileList&quot;, ArrayList&amp;lt;File&amp;gt;())    //æ·»åŠ å¤šä¸ªæ–‡ä»¶
     .toResponse&amp;lt;String&amp;gt;()
     .await()                   
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åªéœ€è¦é€šè¿‡&lt;code&gt;addFile&lt;/code&gt;ç³»åˆ—æ–¹æ³•æ·»åŠ Fileå¯¹è±¡å³å¯ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ç²—æš´ï¼Œæƒ³ç›‘å¬ä¸Šä¼ è¿›åº¦ï¼Ÿç®€å•ï¼Œå†åŠ ä¸€ä¸ª&lt;code&gt;upload&lt;/code&gt;æ“ä½œç¬¦å³å¯ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;val result = RxHttp.postForm(&quot;/service/...&quot;)                               
    .addFile(&quot;file&quot;, File(&quot;xxx/1.png&quot;))                                     
    .addFile(&quot;fileList&quot;, ArrayList&amp;lt;File&amp;gt;())                                 
    .upload(this) {    //æ­¤thisä¸ºCoroutineScopeå¯¹è±¡ï¼Œå³å½“å‰åç¨‹å¯¹è±¡  
        //itä¸ºProgresså¯¹è±¡                                                
        val process = it.progress         //å·²ä¸Šä¼ è¿›åº¦  0-100                       
        val currentSize = it.currentSize  //å·²ä¸Šä¼ sizeï¼Œå•ä½ï¼šbyte                 
        val totalSize = it.totalSize      //è¦ä¸Šä¼ çš„æ€»size  å•ä½ï¼šbyte           
    }                                                               
    .toResponse&amp;lt;String&amp;gt;()        
    .await()                                                                                                                       
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬æ¥çœ‹ä¸‹&lt;code&gt;upload&lt;/code&gt;æ–¹æ³•çš„å®Œæ•´ç­¾åï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;/**
 * è°ƒç”¨æ­¤æ–¹æ³•ç›‘å¬ä¸Šä¼ è¿›åº¦                                                    
 * @param coroutine  CoroutineScopeå¯¹è±¡ï¼Œç”¨äºå¼€å¯åç¨‹ï¼Œå›è°ƒè¿›åº¦ï¼Œè¿›åº¦å›è°ƒæ‰€åœ¨çº¿ç¨‹å–å†³äºåç¨‹æ‰€åœ¨çº¿ç¨‹
 * @param progress è¿›åº¦å›è°ƒ  
 * æ³¨æ„ï¼šæ­¤æ–¹æ³•ä»…åœ¨åç¨‹ç¯å¢ƒä¸‹æ‰ç”Ÿæ•ˆ                                         
 */
fun RxHttpFormParam.upload(
    coroutine: CoroutineScope? = null, 
    progress: (Progress) -&amp;gt; Unit
):RxHttpFormParam
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;32ã€æ–‡ä»¶ä¸‹è½½&quot;&gt;3.2ã€æ–‡ä»¶ä¸‹è½½&lt;/h2&gt;
&lt;p&gt;æ¥ç€å†æ¥çœ‹çœ‹ä¸‹è½½ï¼Œç›´æ¥è´´ä»£ç &lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;val localPath = &quot;sdcard//android/data/..../1.apk&quot; 
val student = RxHttp.postForm(&quot;/service/...&quot;)     
    .toDownload(localPath)  //ä¸‹è½½éœ€è¦ä¼ å…¥æœ¬åœ°æ–‡ä»¶è·¯å¾„   
    .await()
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä¸‹è½½è°ƒç”¨&lt;code&gt;toDownload(String)&lt;/code&gt;æ–¹æ³•ï¼Œä¼ å…¥æœ¬åœ°æ–‡ä»¶è·¯å¾„å³å¯ï¼Œè¦ç›‘å¬ä¸‹è½½è¿›åº¦ï¼Ÿä¹Ÿç®€å•ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;val localPath = &quot;sdcard//android/data/..../1.apk&quot;  
val student = RxHttp.postForm(&quot;/service/...&quot;)      
    .toDownload(localPath, this) {   //æ­¤thisä¸ºCoroutineScopeå¯¹è±¡     
        //itä¸ºProgresså¯¹è±¡
        val process = it.progress        //å·²ä¸‹è½½è¿›åº¦ 0-100
        val currentSize = it.currentSize //å·²ä¸‹è½½sizeï¼Œå•ä½ï¼šbyte
        val totalSize = it.totalSize     //è¦ä¸‹è½½çš„æ€»size å•ä½ï¼šbyte                                           
    }     
    .await()
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;çœ‹ä¸‹&lt;code&gt;toDownload&lt;/code&gt;æ–¹æ³•å®Œæ•´ç­¾å&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;/**
 * @param destPath æœ¬åœ°å­˜å‚¨è·¯å¾„
 * @param coroutine CoroutineScopeå¯¹è±¡ï¼Œç”¨äºå¼€å¯åç¨‹ï¼Œå›è°ƒè¿›åº¦ï¼Œè¿›åº¦å›è°ƒæ‰€åœ¨çº¿ç¨‹å–å†³äºåç¨‹æ‰€åœ¨çº¿ç¨‹
 * @param progress è¿›åº¦å›è°ƒ
 */
fun IRxHttp.toDownload(
    destPath: String,
    coroutine: CoroutineScope? = null,
    progress: (Progress) -&amp;gt; Unit
): IAwait&amp;lt;String&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¦‚æœä½ éœ€è¦æ–­ç‚¹ä¸‹è½½ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä¸€è¡Œä»£ç çš„äº‹ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;val localPath = &quot;sdcard//android/data/..../1.apk&quot;                        
val student = RxHttp.postForm(&quot;/service/...&quot;)                            
    .setRangeHeader(1000, 300000)   //æ–­ç‚¹ä¸‹è½½ï¼Œè®¾ç½®ä¸‹è½½èµ·å§‹/ç»“æŸä½ç½®                                     
    .toDownload(localPath, this) { //æ­¤thisä¸ºCoroutineScopeå¯¹è±¡           
        //itä¸ºProgresså¯¹è±¡                                                  
        val process = it.progress        //å·²ä¸‹è½½è¿›åº¦ 0-100                          
        val currentSize = it.currentSize //å·²ä¸‹sizeï¼Œå•ä½ï¼šbyte               
        val totalSize = it.totalSize     //è¦ä¸‹çš„æ€»size å•ä½ï¼šbyte                 
    }      
    .await()
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;è€è§„åˆ™ï¼Œçœ‹ä¸‹&lt;code&gt;setRangeHeader&lt;/code&gt;å®Œæ•´ç­¾å&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;/**                                                                                      
 * è®¾ç½®æ–­ç‚¹ä¸‹è½½å¼€å§‹/ç»“æŸä½ç½®                                                                         
 * @param startIndex æ–­ç‚¹ä¸‹è½½å¼€å§‹ä½ç½®                                                            
 * @param endIndex æ–­ç‚¹ä¸‹è½½ç»“æŸä½ç½®ï¼Œé»˜è®¤ä¸º-1ï¼Œå³é»˜è®¤ç»“æŸä½ç½®ä¸ºæ–‡ä»¶æœ«å°¾                                           
 * @param connectLastProgress æ˜¯å¦è¡”æ¥ä¸Šæ¬¡çš„ä¸‹è½½è¿›åº¦ï¼Œè¯¥å‚æ•°ä»…åœ¨å¸¦è¿›åº¦æ–­ç‚¹ä¸‹è½½æ—¶ç”Ÿæ•ˆ                                
 */                                                                                      
fun setRangeHeader (
    startIndex: Long, 
    endIndex: Long = 0L, 
    connectLastProgress: Boolean = false
)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åˆ°è¿™ï¼ŒRxHttpåç¨‹çš„åŸºç¡€ApiåŸºæœ¬ä»‹ç»å®Œæ¯•ï¼Œé‚£ä¹ˆé—®é¢˜äº†ï¼Œä»¥ä¸Šä»‹ç»çš„Apiéƒ½ä¾èµ–ä¸åç¨‹ç¯å¢ƒï¼Œé‚£æˆ‘è¿™ä¹ˆå¼€å¯åç¨‹å‘¢ï¼Ÿäº¦æˆ–è€…è¯´ï¼Œæˆ‘å¯¹åç¨‹ä¸æ˜¯å¾ˆæ‡‚ï¼Œä½ åªè¦ä¿è¯å®‰å…¨çš„å‰æä¸‹ï¼Œå‘Šè¯‰æ€ä¹ˆç”¨å°±è¡Œäº†ï¼Œokï¼Œé‚£ä¸‹é¢å¦‚ä½•å®‰å…¨çš„å¼€å¯ä¸€ä¸ªåç¨‹ï¼Œåšåˆ°è‡ªåŠ¨å¼‚å¸¸æ•è·ï¼Œä¸”é¡µé¢é”€æ¯æ—¶ï¼Œè‡ªåŠ¨å…³é—­åç¨‹åŠè¯·æ±‚&lt;/p&gt;

&lt;p&gt;æ­¤æ—¶å°±è¦å¼•å…¥æœ¬äººå¼€æºçš„å¦ä¸€ä¸ªåº“&lt;a href=&quot;https://github.com/liujingxing/RxLife-Coroutine&quot;&gt;RxLife-Coroutine&lt;/a&gt;ï¼Œç”¨äºå¼€å¯/å…³é—­åç¨‹ï¼Œå¹¶è‡ªåŠ¨å¼‚å¸¸æ•è·ï¼Œä¾èµ–å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;implementation 'com.ljx.rxlife:rxlife-coroutine:2.0.0'
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æœ¬æ–‡åœ¨ä»‹ç»ä¸šåŠ¡codeç»Ÿä¸€å¤„ç†çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç”¨åˆ°rxLifeScopeå±æ€§å¼€å¯åç¨‹ï¼Œé‚£è¿™ä¸ªæ˜¯ä»€ä¹ˆç±»å‹å‘¢ï¼Ÿçœ‹ä»£ç &lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;val ViewModel.rxLifeScope: RxLifeScope
    get() {
        val scope: RxLifeScope? = this.getTag(JOB_KEY)
        if (scope != null) {
            return scope
        }
        return setTagIfAbsent(JOB_KEY, RxLifeScope())
    }

val LifecycleOwner.rxLifeScope: RxLifeScope
    get() = lifecycle.rxLifeScope
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ä¸º&lt;code&gt;ViewModel&lt;/code&gt;åŠ&lt;code&gt;LifecycleOwner&lt;/code&gt;éƒ½æ‰©å±•äº†ä¸€ä¸ªåä¸º&lt;code&gt;rxLifeScope&lt;/code&gt;çš„å±æ€§ï¼Œç±»å‹ä¸º&lt;code&gt;RxLifeScope&lt;/code&gt;ï¼ŒViewModelç›¸ä¿¡å¤§å®¶éƒ½çŸ¥é“äº†ï¼Œè¿™é‡Œå°±ç®€å•è®²ä¸€ä¸‹LifecycleOwneræ¥å£ï¼Œæˆ‘ä»¬çš„FragmentåŠFragmentActivityéƒ½å®ç°äº†&lt;code&gt;LifecycleOwner&lt;/code&gt;æ¥å£ï¼Œè€Œæˆ‘ä»¬çš„Activityä¸€èˆ¬ç»§æ‰¿äºAppCompatActivityï¼Œè€ŒAppCompatActivityç»§æ‰¿äºFragmentActivityï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨&lt;code&gt;FragmentActivity/Fragment/ViewModel&lt;/code&gt;ç¯å¢ƒä¸‹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨&lt;code&gt;rxLifeScope&lt;/code&gt;å¼€å¯åç¨‹ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;rxLifeScope.lanuch({
    //åç¨‹ä»£ç å—ï¼Œè¿è¡Œåœ¨UIçº¿ç¨‹
}, {
    //å¼‚å¸¸å›è°ƒï¼Œåç¨‹ä»£ç å—å‡ºç°ä»»ä½•å¼‚å¸¸ï¼Œéƒ½ä¼šç›´æ¥èµ°è¿™é‡Œ    
})
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;é€šè¿‡è¿™ç§æ–¹å¼å¼€å¯çš„åç¨‹ï¼Œä¼šåœ¨é¡µé¢é”€æ¯æ—¶ï¼Œä¼šè‡ªåŠ¨å…³é—­åç¨‹ï¼Œå½“ç„¶ï¼Œå¦‚æœä½ çš„åç¨‹ä»£ç å—é‡Œè¿˜æœ‰RxHttpè¯·æ±‚çš„ä»£ç ï¼Œåç¨‹å…³é—­çš„åŒæ—¶ï¼Œä¹Ÿæ˜¯å…³é—­è¯·æ±‚ï¼Œæ‰€ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåªéœ€è¦çŸ¥é“å¦‚ä½•å¼€å¯åç¨‹å°±è¡Œï¼Œå…¶å®ƒä¸€å¾‹ä¸ç®¡ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹&lt;code&gt;rxLifeScope.lanuch&lt;/code&gt;æ–¹æ³•çš„å®Œæ•´ç­¾å&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;/**                                                         
 * @param block     åç¨‹ä»£ç å—ï¼Œè¿è¡Œåœ¨UIçº¿ç¨‹                           
 * @param onError   å¼‚å¸¸å›è°ƒï¼Œè¿è¡Œåœ¨UIçº¿ç¨‹                            
 * @param onStart   åç¨‹å¼€å§‹å›è°ƒï¼Œè¿è¡Œåœ¨UIçº¿ç¨‹                          
 * @param onFinally åç¨‹ç»“æŸå›è°ƒï¼Œä¸ç®¡æˆåŠŸ/å¤±è´¥ï¼Œéƒ½ä¼šå›è°ƒï¼Œè¿è¡Œåœ¨UIçº¿ç¨‹             
 */                                                         
fun launch(                                                 
    block: suspend CoroutineScope.() -&amp;gt; Unit,               
    onError: ((Throwable) -&amp;gt; Unit)? = null,                 
    onStart: (() -&amp;gt; Unit)? = null,                          
    onFinally: (() -&amp;gt; Unit)? = null                         
): Job                                                    
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œä¸ä»…æœ‰å¤±è´¥å›è°ƒï¼Œè¿˜æœ‰å¼€å§‹åŠç»“æŸå›è°ƒï¼Œè¿™å¯¹äºæˆ‘ä»¬å‘è¯·æ±‚æ¥è¯´ï¼ŒçœŸçš„éå¸¸æ–¹ä¾¿ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;rxLifeScope.launch({                                      
    //åç¨‹ä»£ç å—                                              
    val students = RxHttp.postJson(&quot;/service/...&quot;)
        .toResponse&amp;lt;List&amp;lt;Student&amp;gt;&amp;gt;()
        .await()   
    //å¯ä»¥ç›´æ¥æ›´æ–°UI                   
}, {                                                      
    //å¼‚å¸¸å›è°ƒï¼Œè¿™é‡Œå¯ä»¥æ‹¿åˆ°Throwableå¯¹è±¡                             
}, {                                                     
    //å¼€å§‹å›è°ƒï¼Œå¯ä»¥å¼€å¯ç­‰å¾…å¼¹çª—                                      
}, {                                                     
    //ç»“æŸå›è°ƒï¼Œå¯ä»¥é”€æ¯ç­‰å¾…å¼¹çª—                                      
})                                                       
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä»¥ä¸Šä»£ç å‡è¿è¡Œåœ¨UIçº¿ç¨‹ä¸­ï¼Œè¯·æ±‚å›æ¥åï¼Œä¾¿å¯ç›´æ¥æ›´æ–°UI&lt;/p&gt;
&lt;p&gt;ä¹Ÿè®¸ä½ è¿˜æœ‰ç–‘é—®ï¼Œæˆ‘åœ¨é&lt;code&gt;FragmentActivity/Fragment/ViewModel&lt;/code&gt;ç¯å¢ƒä¸‹ï¼Œå¦‚ä½•å¼€å¯åç¨‹ï¼Œåˆå¦‚ä½•å…³é—­ï¼Œå…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;val job = RxLifeScope().launch({                                        
    val students = RxHttp.postJson(&quot;/service/...&quot;)
        .toResponse&amp;lt;List&amp;lt;Student&amp;gt;&amp;gt;()
        .await()            
}, {                                                
    //å¼‚å¸¸å›è°ƒï¼Œè¿™é‡Œå¯ä»¥æ‹¿åˆ°Throwableå¯¹è±¡                       
}, {                                               
    //å¼€å§‹å›è°ƒï¼Œå¯ä»¥å¼€å¯ç­‰å¾…å¼¹çª—                                
}, {                                               
    //ç»“æŸå›è°ƒï¼Œå¯ä»¥é”€æ¯ç­‰å¾…å¼¹çª—                                
})                                                 
job.cancel()  //å…³é—­åç¨‹                                                                                        
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;ä»¥ä¸Šä»£ç ï¼Œéœ€è¦æ³¨æ„ä¸¤ç‚¹ï¼Œç¬¬ä¸€ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨åˆ›å»º&lt;code&gt;RxLifeScope()&lt;/code&gt;å¯¹è±¡ï¼Œéšåå¼€å¯åç¨‹ï¼›ç¬¬äºŒï¼Œå¼€å¯åç¨‹åï¼Œå¯ä»¥æ‹¿åˆ°&lt;code&gt;Job&lt;/code&gt;å¯¹è±¡ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡è¯¥å¯¹è±¡æ‰‹åŠ¨å…³é—­åç¨‹ã€‚å…¶å®ƒå°±æ²¡å•¥åŒºåˆ«äº†ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬çŸ¥é“ï¼Œåç¨‹æœ€å¤§çš„ä¼˜åŠ¿å°±æ˜¯ï¼š&lt;code&gt;èƒ½ä»¥çœ‹èµ·æ¥åŒæ­¥çš„ä»£ç ï¼Œå†™å‡ºå¼‚æ­¥çš„é€»è¾‘&lt;/code&gt;ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥éå¸¸ä¼˜é›…çš„å®ç°å¤šä»»åŠ¡åœºæ™¯ï¼Œæ¯”å¦‚å¤šè¯·æ±‚çš„å¹¶è¡Œ/ä¸²è¡Œ&lt;/p&gt;
&lt;h2 id=&quot;51ã€åç¨‹ä¸²è¡Œå¤šä¸ªè¯·æ±‚&quot;&gt;5.1ã€åç¨‹ä¸²è¡Œå¤šä¸ªè¯·æ±‚&lt;/h2&gt;
&lt;p&gt;å‡è®¾ï¼Œæˆ‘ä»¬æœ‰è¿™ä¹ˆä¸€ç§åœºæ™¯ï¼Œé¦–å…ˆè·å–Studentå¯¹è±¡ï¼Œéšåé€šè¿‡studentIdè·å–å­¦ç”Ÿçš„å®¶åº­æˆå‘˜åˆ—è¡¨ï¼Œåè€…ä¾èµ–äºå‰è€…ï¼Œè¿™æ˜¯å…¸å‹çš„ä¸²è¡Œåœºæ™¯&lt;/p&gt;
&lt;p&gt;çœ‹çœ‹é€šè¿‡åç¨‹å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;class MainActivity : AppCompatActivity() {
    //å¯åŠ¨åç¨‹ï¼Œå‘é€è¯·æ±‚
    fun sendRequest() {
        rxLifeScope.launch({
            //å½“å‰è¿è¡Œåœ¨åç¨‹ä¸­ï¼Œä¸”åœ¨ä¸»çº¿ç¨‹è¿è¡Œ
            val student = getStudent()
            val personList = getFamilyPersons(student.id) //é€šè¿‡å­¦ç”ŸIdï¼ŒæŸ¥è¯¢å®¶åº­æˆå‘˜ä¿¡æ¯
            //æ‹¿åˆ°ç›¸å…³ä¿¡æ¯åï¼Œä¾¿å¯ç›´æ¥æ›´æ–°UIï¼Œå¦‚ï¼š
            tvName.text = student.name
        }, {
                //å‡ºç°å¼‚å¸¸ï¼Œå°±ä¼šåˆ°è¿™é‡Œï¼Œè¿™é‡Œçš„itä¸ºThrowableç±»å‹
            it.show(&quot;å‘é€å¤±è´¥,è¯·ç¨åå†è¯•!&quot;) //showæ–¹æ³•æ˜¯åœ¨Demoä¸­æ‰©å±•çš„æ–¹æ³•
        })
    }

    //æŒ‚æ–­æ–¹æ³•ï¼Œè·å–å­¦ç”Ÿä¿¡æ¯
    suspend fun getStudent(): Student {
        return RxHttp.get(&quot;/service/...&quot;)
            .add(&quot;key&quot;, &quot;value&quot;)
            .addHeader(&quot;headKey&quot;, &quot;headValue&quot;)
            .toClass&amp;lt;Student&amp;gt;()
            .await()
    }

    //æŒ‚æ–­æ–¹æ³•ï¼Œè·å–å®¶åº­æˆå‘˜ä¿¡æ¯
    suspend fun getFamilyPersons(studentId: Int): List&amp;lt;Person&amp;gt; {
        return RxHttp.get(&quot;/service/...&quot;)
            .add(&quot;studentId&quot;, &quot;studentId&quot;)
            .toClass&amp;lt;List&amp;lt;Person&amp;gt;&amp;gt;()
            .await()
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬é‡ç‚¹çœ‹ä¸‹åç¨‹ä»£ç å—ï¼Œé¦–å…ˆé€šè¿‡ç¬¬ä¸€ä¸ªè¯·æ±‚æ‹¿åˆ°Studentå¯¹è±¡ï¼Œéšåæ‹¿åˆ°studentIdï¼Œå‘é€ç¬¬äºŒä¸ªè¯·æ±‚è·å–å­¦ä¹ å®¶åº­æˆå‘˜åˆ—è¡¨ï¼Œæ‹¿åˆ°åï¼Œä¾¿å¯ä»¥ç›´æ¥æ›´æ–°UIï¼Œæ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯çœ‹èµ·æ¥åŒæ­¥çš„ä»£ç ï¼Œå†™å‡ºäº†å¼‚æ­¥çš„é€»è¾‘ã€‚&lt;/p&gt;
&lt;p&gt;ä¸²è¡Œè¯·æ±‚ä¸­ï¼Œåªè¦å…¶ä¸­ä¸€ä¸ªè¯·æ±‚å‡ºç°å¼‚å¸¸ï¼Œåç¨‹ä¾¿ä¼šå…³é—­ï¼ˆåŒæ—¶ä¹Ÿä¼šå…³é—­è¯·æ±‚ï¼‰ï¼Œåœæ­¢æ‰§è¡Œå‰©ä¸‹çš„ä»£ç ï¼Œæ¥ç€èµ°å¼‚å¸¸å›è°ƒ&lt;/p&gt;
&lt;h2 id=&quot;52ã€åç¨‹å¹¶è¡Œå¤šä¸ªè¯·æ±‚&quot;&gt;5.2ã€åç¨‹å¹¶è¡Œå¤šä¸ªè¯·æ±‚&lt;/h2&gt;
&lt;p&gt;è¯·æ±‚å¹¶è¡Œï¼Œåœ¨ç°å®å¼€å‘ä¸­ï¼Œä¹Ÿæ˜¯å®¶å¸¸ä¾¿é¥­ï¼Œåœ¨ä¸€ä¸ªActivityä¸­ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦æ‹¿åˆ°å¤šç§æ•°æ®æ¥å±•ç¤ºç»™ç”¨æˆ·ï¼Œè€Œè¿™äº›æ•°æ®ï¼Œéƒ½æ˜¯ä¸åŒæ¥å£ä¸‹å‘çš„ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªé¡µé¢ï¼Œé¡¶éƒ¨æ˜¯æ¨ªå‘æ»šåŠ¨çš„Banneræ¡ï¼ŒBanneræ¡ä¸‹é¢å±•ç¤ºå­¦ä¹ åˆ—è¡¨ï¼Œæ­¤æ—¶å°±æœ‰ä¸¤ä¸ªæ¥å£ï¼Œä¸€ä¸ªè·å–Banneræ¡åˆ—è¡¨ï¼Œä¸€ä¸ªè·å–å­¦ä¹ åˆ—è¡¨ï¼Œå®ƒä»¬ä¸¤ä¸ªäº’ä¸ä¾èµ–ï¼Œä¾¿å¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-kotlin&quot;&gt;class MainActivity : AppCompatActivity() {
    //å¯åŠ¨åç¨‹ï¼Œå‘é€è¯·æ±‚
    fun sendRequest() {
        rxLifeScope.launch({
            //å½“å‰è¿è¡Œåœ¨åç¨‹ä¸­ï¼Œä¸”åœ¨ä¸»çº¿ç¨‹è¿è¡Œ
            val asyncBanner = getBanners() //è¿™é‡Œè¿”å›Deferred&amp;lt;List&amp;lt;Banner&amp;gt;&amp;gt;å¯¹è±¡
            val asyncPersons = getStudents() //è¿™é‡Œè¿”å›Deferred&amp;lt;List&amp;lt;Student&amp;gt;&amp;gt;å¯¹è±¡
            val banners = asyncBanner.await()           //è¿™é‡Œè¿”å›List&amp;lt;Banner&amp;gt;å¯¹è±¡
            val students = asyncPersons.await()         //è¿™é‡Œè¿”å›List&amp;lt;Student&amp;gt;å¯¹è±¡
            //å¼€å§‹æ›´æ–°UI

        }, {
                //å‡ºç°å¼‚å¸¸ï¼Œå°±ä¼šåˆ°è¿™é‡Œï¼Œè¿™é‡Œçš„itä¸ºThrowableç±»å‹
            it.show(&quot;å‘é€å¤±è´¥,è¯·ç¨åå†è¯•!&quot;) //showæ–¹æ³•æ˜¯åœ¨Demoä¸­æ‰©å±•çš„æ–¹æ³•
        })
    }

    //æŒ‚æ–­æ–¹æ³•ï¼Œè·å–å­¦ç”Ÿä¿¡æ¯
    suspend fun getBanners(): Deferred&amp;lt;List&amp;lt;Banner&amp;gt;&amp;gt; {
        return RxHttp.get(&quot;/service/...&quot;)
            .add(&quot;key&quot;, &quot;value&quot;)
            .addHeader(&quot;headKey&quot;, &quot;headValue&quot;)
            .toClass&amp;lt;List&amp;lt;Banner&amp;gt;&amp;gt;()
            .async()  //æ³¨æ„è¿™é‡Œä½¿ç”¨asyncå¼‚æ­¥æ“ä½œç¬¦
    }

    //æŒ‚æ–­æ–¹æ³•ï¼Œè·å–å®¶åº­æˆå‘˜ä¿¡æ¯
    suspend fun getStudents(): Deferred&amp;lt;List&amp;lt;Student&amp;gt;&amp;gt; {
        return RxHttp.get(&quot;/service/...&quot;)
            .add(&quot;key&quot;, &quot;value&quot;)
            .toClass&amp;lt;List&amp;lt;Student&amp;gt;&amp;gt;()
            .async() //æ³¨æ„è¿™é‡Œä½¿ç”¨asyncå¼‚æ­¥æ“ä½œç¬¦
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;åœ¨ä¸Šè¿°ä»£ç çš„ä¸¤ä¸ªæŒ‚æ–­æ–¹æ³•ä¸­ï¼Œå‡ä½¿ç”¨äº†&lt;code&gt;async&lt;/code&gt;å¼‚æ­¥æ“ä½œç¬¦ï¼Œæ­¤æ—¶è¿™ä¸¤ä¸ªè¯·æ±‚å°±å¹¶è¡Œå‘é€è¯·æ±‚ï¼Œéšåæ‹¿åˆ°&lt;code&gt;Deferred&amp;lt;T&amp;gt;&lt;/code&gt;å¯¹è±¡ï¼Œè°ƒç”¨å…¶&lt;code&gt;await()&lt;/code&gt;æ–¹æ³•ï¼Œæœ€ç»ˆæ‹¿åˆ°Banneråˆ—è¡¨åŠStudentåˆ—è¡¨ï¼Œæœ€åä¾¿å¯ä»¥ç›´æ¥æ›´æ–°UIã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;åˆ’é‡ç‚¹&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;å¹¶è¡Œè·Ÿä¸²è¡Œä¸€æ ·ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªè¯·æ±‚å‡ºç°äº†å¼‚å¸¸ï¼Œåç¨‹ä¾¿ä¼šè‡ªåŠ¨å…³é—­ï¼ˆåŒæ—¶å…³é—­è¯·æ±‚ï¼‰ï¼Œåœæ­¢æ‰§è¡Œå‰©ä¸‹çš„ä»£ç ï¼Œæ¥ç€èµ°å¼‚å¸¸å›è°ƒã€‚å¦‚æœæƒ³å¤šä¸ªè¯·æ±‚äº’ä¸å½±å“ï¼Œå°±å¯ä»¥ä½¿ç”¨ä¸Šé¢ä»‹ç»çš„&lt;code&gt;onErrorReturn&lt;/code&gt;ã€&lt;code&gt;onErrorReturnItem&lt;/code&gt;æ“ä½œç¬¦ï¼Œå‡ºç°å¼‚å¸¸æ—¶ï¼Œç»™å‡ºä¸€ä¸ªé»˜è®¤å¯¹è±¡ï¼Œåˆæˆ–è€…ä½¿ç”¨&lt;code&gt;tryAwait&lt;/code&gt;æ“ä½œç¬¦è·å–è¿”å›å€¼ï¼Œå‡ºç°å¼‚å¸¸æ—¶ï¼Œè¿”å›nullï¼Œè¿™æ ·å°±ä¸ä¼šå½±å“å…¶å®ƒè¯·æ±‚çš„æ‰§è¡Œã€‚&lt;/p&gt;

&lt;p&gt;çœ‹å®Œæœ¬æ–‡ï¼Œç›¸ä¿¡ä½ å·²ç»é¢†æ‚Ÿåˆ°äº†RxHttpä¼˜é›…åŠç®€ä¾¿ï¼Œä¸šåŠ¡codeçš„ç»Ÿä¸€å¤„ç†ï¼Œå¤±è´¥é‡è¯•ã€è¶…æ—¶ã€æ–‡ä»¶ä¸Šä¼ /ä¸‹è½½åŠè¿›åº¦ç›‘å¬ï¼Œåˆ°åé¢&lt;code&gt;rxLifeScope&lt;/code&gt;åç¨‹çš„å¼€å¯/å…³é—­/å¼‚å¸¸å¤„ç†/å¤šä»»åŠ¡å¤„ç†ï¼Œä¸€åˆ‡éƒ½æ˜¯é‚£ä¹ˆçš„ä¼˜é›…ã€‚&lt;/p&gt;
&lt;p&gt;å…¶å®ï¼ŒRxHttpè¿œä¸æ­¢è¿™äº›ï¼Œæœ¬æ–‡åªæ˜¯è®²è§£äº†RxHttpä¸åç¨‹ç›¸å…³çš„ä¸œè¥¿ï¼Œæ›´å¤šä¼˜é›…çš„åŠŸèƒ½ï¼Œå¦‚ï¼šå¤š/åŠ¨æ€baseUrlçš„å¤„ç†ã€å…¬å…±å‚æ•°/è¯·æ±‚å¤´çš„æ·»åŠ ã€è¯·æ±‚åŠ è§£å¯†ã€ç¼“å­˜ç­‰ç­‰ï¼Œè¯·æŸ¥çœ‹&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://juejin.im/post/5ded221a518825125d14a1d4&quot;&gt;RxHttp è®©ä½ çœ¼å‰ä¸€äº®çš„Httpè¯·æ±‚æ¡†æ¶&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://juejin.im/post/5dff3c2de51d45582c27cea6&quot;&gt;RxHttp å…¨ç½‘Httpç¼“å­˜æœ€ä¼˜è§£&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œå¼€æºä¸æ˜“ï¼Œå†™æ–‡ç« æ›´ä¸æ˜“ï¼Œè¿˜éœ€è¦åŠ³çƒ¦å¤§å®¶ç»™æœ¬æ–‡ç‚¹ä¸ªèµï¼Œå¯ä»¥çš„è¯ï¼Œå†ç»™ä¸ª&lt;a href=&quot;https://github.com/liujingxing/okhttp-RxHttp&quot;&gt;star&lt;/a&gt;ï¼Œæ„Ÿè§‰ä¸å°½ï¼ŒğŸ™ğŸ™ğŸ™ğŸ™ğŸ™ğŸ™ğŸ™ğŸ™ğŸ™ğŸ™ğŸ™ğŸ™&lt;/p&gt;
</description>
<pubDate>Mon, 20 Apr 2020 15:34:00 +0000</pubDate>
<dc:creator>åˆ˜æ•¬å…´</dc:creator>
<og:description>1ã€å‰è¨€ Helloï¼Œå„ä½å°ä¼™ä¼´ï¼Œåˆè§é¢äº†ï¼Œå›é¦–è¿‡å»ï¼Œ &amp;quot;RxHttp&amp;quot; å°±è¦è¿æ¥ä¸€å‘¨å¹´ç”Ÿæ—¥äº†(19å¹´4æœˆæ¨å‡º)ï¼Œè¿™ä¸€å¹´ï¼Œèµ°è¿‡æ¥çœŸå¿ƒ....çœŸå¿ƒä¸å®¹æ˜“ï¼Œä»£ç ç»´æŠ¤ã€å†™æ–‡ç« ã€å†™æ–‡æ¡£ç­‰ç­‰</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cnblogs.com/liujingxing/p/12741525.html</dc:identifier>
</item>
</channel>
</rss>