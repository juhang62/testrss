<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=hnrss.org%2Fnewest%3Fpoints%3D200&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://hnrss.org/newest?points=200" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>Hacker News: Newest</title>
<link>https://news.ycombinator.com/newest</link>
<description>Hacker News RSS</description>
<item>
<title>Citing &amp;#039;Censorship&amp;#039; Concerns, North Idaho ISP Blocks Facebook, Twitter</title>
<link>https://www.kgw.com/article/news/local/idaho-internet-provider-blocks-facebook-and-twitter/293-867cc22b-fb90-4142-a296-8d800d2a03fb</link>
<guid isPermaLink="true" >https://www.kgw.com/article/news/local/idaho-internet-provider-blocks-facebook-and-twitter/293-867cc22b-fb90-4142-a296-8d800d2a03fb</guid>
<description>&lt;p&gt;The actions of Your T1 WIFI, which provides internet services to North Idaho and the Spokane area, could violate Washington state's Net Neutrality law.&lt;/p&gt;&lt;div readability=&quot;90.522297955209&quot;&gt;
&lt;div class=&quot;article__section article__section_type_text utility__text&quot; readability=&quot;36&quot;&gt;
&lt;p&gt;SPOKANE, Wash. — A North Idaho internet provider, Your T1 WIFI, confirmed it is blocking Facebook and Twitter from its WIFI service for some customers due to censorship claims.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;article__section article__section_type_text utility__text&quot; readability=&quot;26.329113924051&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https://www.yourt1wifi.com/&quot;&gt;Your T1 WIFI &lt;/a&gt;provides internet services to North Idaho and the Spokane area. &lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;article__section article__section_type_text utility__text&quot; readability=&quot;29.13829787234&quot;&gt;
&lt;p&gt;The move comes after Twitter and Facebook banned President Trump from their platforms due to &lt;a href=&quot;https://www.kgw.com/article/news/nation-world/us-capitol-riot-trump-supporters-mob-what-we-know/507-ab35f54a-6d88-4425-8598-df6e44e4844e&quot; rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot;&gt;incitement of violence&lt;/a&gt; and undermining the transition of power to President elect Joe Biden.  &lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;article__section article__section_type_text utility__text&quot; readability=&quot;36&quot;&gt;
&lt;p&gt;The social media sites banned the President due to violations of their terms of service. Because Twitter and Facebook are private companies, their bans on the President do not violate the First Amendment, which protects speech from being limited by the government.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;article__section article__section_type_text utility__text&quot; readability=&quot;26.8&quot;&gt;
&lt;p&gt;Your T1 WIFI's actions, however, could violate Washington state's &lt;a href=&quot;https://www.governor.wa.gov/news-media/washington-becomes-first-state-pass-net-neutrality-protections-law&quot; rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot;&gt;Net Neutrality law&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;article__section article__section_type_text utility__text&quot; readability=&quot;33&quot;&gt;
&lt;p&gt;Your T1 WIFI said it decided to block Twitter and Facebook after the company received several calls from customers about both websites. &lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;article__section article__section_type_text utility__text&quot; readability=&quot;34&quot;&gt;
&lt;p&gt;&quot;It has come to our attention that Twitter and Facebook are engaged in censorship of our customers and information,&quot; an email to customers reads. &lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;article__section article__section_type_text utility__text&quot; readability=&quot;33&quot;&gt;
&lt;p&gt;The service provider said the change would go into effect on Wednesday, Jan. 13.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;article__section article__section_type_text utility__text&quot; readability=&quot;32.279835390947&quot;&gt;
&lt;p&gt;In an email &lt;a href=&quot;https://twitter.com/yes4yep/status/1348418064518242305?s=20&quot; rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot;&gt;posted to Twitter by a customer&lt;/a&gt;, Krista Yep, the company says it was fielding calls from customers asking that the service not display the sites on the internet, and that they didn't want their children to be able to access them. &lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;article__section article__section_type_text utility__text&quot; readability=&quot;38&quot;&gt;
&lt;p&gt;&quot;Our company does not believe a website or social networking site has the authority to censor what you see and post and hide information from you, stop you from seeing what your friends and family are posting,&quot; the email reads. &quot;This is why with the amount of concerns, we have made this decision to block these two websites from being accessed from our network.&quot;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;article__section article__section_type_text utility__text&quot; readability=&quot;32&quot;&gt;
&lt;p&gt;The company did not specify what complaints customers had made.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;article__section article__section_type_text utility__text&quot; readability=&quot;32&quot;&gt;
&lt;p&gt;Yep said she found the company's email to customers alarming.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;article__section article__section_type_text utility__text&quot; readability=&quot;35&quot;&gt;
&lt;p&gt;&quot;I was pretty shocked that they were just coming out and saying that,&quot; Yep said. &quot;If it's not illegal, it's highly unethical.&quot; &lt;/p&gt;
&lt;/div&gt;


&lt;div class=&quot;article__section article__section_type_text utility__text&quot; readability=&quot;38&quot;&gt;
&lt;p&gt;Initially, the company said too many customers had requested the sites be blocked, so it would block them for all customers except for those who called the company and requested access. However, the company backtracked on Monday and said those who didn't request the sites be blocked would still have access.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;article__section article__section_type_text utility__text&quot; readability=&quot;37&quot;&gt;
&lt;p&gt; &quot;Just because you don't like what Twitter and Facebook have done, then you decide to block it for everyone else, so in your opposition to censorship, you're going with censorship,&quot; Yep said.  &lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;article__section article__section_type_text utility__text&quot; readability=&quot;33&quot;&gt;
&lt;p&gt;Yep said she plans to cancel her service, regardless of the company's backtracking. &lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;article__section article__section_type_text utility__text&quot; readability=&quot;33&quot;&gt;
&lt;p&gt;&quot;Their original email was pretty alarming and I don't trust them anymore,&quot; she said.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;article__section article__section_type_text utility__text&quot; readability=&quot;34&quot;&gt;
&lt;p&gt;Yep forwarded additional emails from the company to KREM. In them, the company states that two-thirds of customers asked for Twitter and Facebook to be blocked. &lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;article__section article__section_type_text utility__text&quot; readability=&quot;35&quot;&gt;
&lt;p&gt;In the emails, the company also wrote that their contract and acceptable use policy allows them to block websites if they deem the content &quot;break any rules (sic) or illegal or harmful to our customers and more.&quot; &lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;article__section article__section_type_text utility__text&quot; readability=&quot;36&quot;&gt;
&lt;p&gt;In a phone call with KREM, the owner of the company, Brett Fink, again said the websites would only be blocked for customers who asked. &lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;article__section article__section_type_text utility__text&quot; readability=&quot;36&quot;&gt;
&lt;p&gt;&quot;We've had customers asked to be blocked by it. That is what the email was about, so no we are not blocking anybody, only the ones that have asked for it,&quot; Fink said. &lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;article__section article__section_type_text utility__text&quot; readability=&quot;34.477272727273&quot;&gt;
&lt;p&gt;While Your T1 WIFI says they acted in response to censorship, the company's actions could also be considered censorship. In addition, they may violate Washington state's &lt;a href=&quot;https://www.governor.wa.gov/news-media/washington-becomes-first-state-pass-net-neutrality-protections-law&quot; rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot;&gt;Net Neutrality law&lt;/a&gt;, which states that internet providers may not manipulate access to content.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;article__section article__section_type_text utility__text&quot; readability=&quot;32&quot;&gt;
&lt;p&gt;The law contains the following language:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;article__section article__section_type_text utility__text&quot; readability=&quot;45&quot;&gt;
&lt;p&gt;&lt;em&gt;A person engaged in the provision of broadband internet access service in Washington state, insofar as the person is so engaged, may not:&lt;br/&gt;(a) Block lawful content, applications, services, or nonharmful devices, subject to reasonable network management;&lt;br/&gt;(b) Impair or degrade lawful internet traffic on the basis of internet content, application, or service, or use of a nonharmful device, subject to reasonable network management; or&lt;br/&gt;(c) Engage in paid prioritization&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;article__section article__section_type_text utility__text&quot; readability=&quot;36&quot;&gt;
&lt;p&gt;A spokesperson for Washington Gov. Jay Inslee's office said the attorney general's Consumer Protection Division was &quot;taking a look at the matter.&quot; Brionna Aho, a spokesperson for Attorney General Bob Ferguson, said he takes enforcement of the net neutrality law &quot;very seriously.&quot; &lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;article__section article__section_type_text utility__text&quot; readability=&quot;33&quot;&gt;
&lt;p&gt;Idaho does not have the same net neutrality law. A representative for the Idaho Attorney General said their office lacks the original jurisdiction to be the enforcement authority in this matter.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;article__section article__section_type_text utility__text&quot; readability=&quot;32&quot;&gt;
&lt;p&gt;KREM has also reached out to the Federal Communications Commission (FCC) for comment. &lt;/p&gt;
&lt;/div&gt;


&lt;/div&gt;</description>
<pubDate>Mon, 11 Jan 2021 22:29:12 +0000</pubDate>
<dc:creator>thereare5lights</dc:creator>
<og:url>https://www.kgw.com/article/news/local/technology/idaho-internet-provider-blocks-facebook-and-twitter/293-867cc22b-fb90-4142-a296-8d800d2a03fb</og:url>
<og:title>Citing 'censorship' concerns, North Idaho internet provider blocks Facebook, Twitter</og:title>
<og:description>The actions of Your T1 WIFI, which provides internet services to North Idaho and the Spokane area, could violate Washington state's Net Neutrality law.</og:description>
<og:type>article</og:type>
<og:image>https://media.kgw.com/assets/KARE/images/352373316/352373316_1140x641.jpg</og:image>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.kgw.com/article/news/local/idaho-internet-provider-blocks-facebook-and-twitter/293-867cc22b-fb90-4142-a296-8d800d2a03fb</dc:identifier>
</item>
<item>
<title>Facebook Says It Is Removing All Content Mentioning &amp;#039;Stop the Steal&amp;#039;</title>
<link>https://www.wsj.com/articles/facebook-says-it-is-removing-all-content-mentioning-stop-the-steal-11610401305</link>
<guid isPermaLink="true" >https://www.wsj.com/articles/facebook-says-it-is-removing-all-content-mentioning-stop-the-steal-11610401305</guid>
<description>&lt;p&gt;Facebook Inc. said it is removing all content mentioning “stop the steal,” a phrase popular among supporters of President Trump’s unproven claims of election fraud, as part of a raft of measures to stem misinformation and incitements to violence on its platform ahead of President-elect Joe Biden’s inauguration.&lt;/p&gt;
&lt;p&gt;The social-media giant said Monday that it would uphold its decision last week to &lt;a href=&quot;https://www.wsj.com/articles/president-trump-to-regain-ability-to-tweet-from-his-personal-twitter-account-11610032898?mod=article_inline&quot; target=&quot;_blank&quot; class=&quot;icon none&quot;&gt;suspend Mr. Trump from posting for at least two weeks&lt;/a&gt;, with Chief Executive Mark Zuckerberg saying at the time that the risks of the president using Facebook during this period were too great.&lt;/p&gt;
&lt;p&gt;The company also said Monday that it would continue to pause all U.S. ads about politics or elections, including those from Mr. Trump.&lt;/p&gt;
&lt;p&gt;“With continued attempts to organize events against the outcome of the U.S. presidential election that can lead to violence, and use of the [‘stop the steal’] term by those involved in Wednesday’s violence in DC, we’re taking this additional step in the lead up to the inauguration,” Facebook said in a &lt;a href=&quot;https://about.fb.com/news/2021/01/preparing-for-inauguration-day/&quot; target=&quot;_blank&quot; class=&quot;icon none&quot;&gt;blog post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;“It may take some time to scale up our enforcement of this new step but we have already removed a significant number of posts,” the company said.&lt;/p&gt;
</description>
<pubDate>Mon, 11 Jan 2021 21:50:21 +0000</pubDate>
<dc:creator>admiralspoo</dc:creator>
<og:title>Facebook Says It Is Removing All Content Mentioning ‘Stop the Steal’</og:title>
<og:description>Citing use of the phrase among members of the pro-Trump mob that stormed the Capitol, the tech giant said its move is aimed at stemming incitements to violence ahead of Inauguration Day.</og:description>
<og:url>https://www.wsj.com/articles/facebook-says-it-is-removing-all-content-mentioning-stop-the-steal-11610401305</og:url>
<og:image>https://images.wsj.net/im-283758/social</og:image>
<og:type>article</og:type>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.wsj.com/articles/facebook-says-it-is-removing-all-content-mentioning-stop-the-steal-11610401305</dc:identifier>
</item>
<item>
<title>FBI warns of plans for nationwide armed protests next week</title>
<link>https://www.seattletimes.com/nation-world/nation/fbi-warns-of-plans-for-nationwide-armed-protests-next-week/</link>
<guid isPermaLink="true" >https://www.seattletimes.com/nation-world/nation/fbi-warns-of-plans-for-nationwide-armed-protests-next-week/</guid>
<description>[unable to retrieve full-text content]
&lt;p&gt;Article URL: &lt;a href=&quot;https://www.seattletimes.com/nation-world/nation/fbi-warns-of-plans-for-nationwide-armed-protests-next-week/&quot;&gt;https://www.seattletimes.com/nation-world/nation/fbi-warns-of-plans-for-nationwide-armed-protests-next-week/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Comments URL: &lt;a href=&quot;https://news.ycombinator.com/item?id=25737011&quot;&gt;https://news.ycombinator.com/item?id=25737011&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Points: 280&lt;/p&gt;
&lt;p&gt;# Comments: 290&lt;/p&gt;
</description>
<pubDate>Mon, 11 Jan 2021 21:09:07 +0000</pubDate>
<dc:creator>ali92hm</dc:creator>
<dc:identifier>https://www.seattletimes.com/nation-world/nation/fbi-warns-of-plans-for-nationwide-armed-protests-next-week/</dc:identifier>
</item>
<item>
<title>Poland Justice Minister announces online freedom of speech bill</title>
<link>https://polandin.com/51388314/justice-minister-announces-online-freedom-of-speech-bill</link>
<guid isPermaLink="true" >https://polandin.com/51388314/justice-minister-announces-online-freedom-of-speech-bill</guid>
<description>&lt;p class=&quot;am-article__heading article__width&quot;&gt;&lt;strong&gt;Justice Minister Zbigniew Ziobro announced a legal initiative on Thursday aimed at enabling internet users to file complaints against the removal of online posts as well as the creation of a special court for freedom of speech.&lt;/strong&gt;&lt;/p&gt;
&lt;p class=&quot;am-article__text article__width&quot;&gt;Justice Minister Zbigniew Ziobro said the aim of the bill was to give internet users the feeling that their rights are protected and that their posts cannot be arbitrarily removed from online platforms.&lt;/p&gt;&lt;p&gt;The full name of the bill is the law on freedom of expressing one's own views and searching and disseminating information on the internet.&lt;/p&gt;&lt;p&gt;Under its provisions, social media services will not be allowed to remove content or block accounts if the content on them does not break Polish law. In the event of removal or blockage, a complaint can be sent to the platform, which will have 24 hours to consider it. Within 48 hours of the decision, the user will be able to file a petition to the court for the return of access. The court will consider complaints within seven days of receipt and the entire process is to be electronic.&lt;/p&gt;&lt;p&gt;&quot;Often, the victims of tendencies for ideological censorship are also representatives of various groups operating in Poland, whose content is removed or blocked, just because they express views and refer to values that are unacceptable from the point of view of communities... with an ever-stronger influence on the functioning of social media,&quot; Mr Ziobro said.&lt;/p&gt;&lt;p&gt;&quot;We realise that it is not an easy topic, we realise that on the internet there should also be a sphere of guarantees for everybody who feels slandered, a sphere of limitation of various content which may carry with it a negative impact on the sphere of other people's freedom,&quot; he said. &quot;But we would like to propose such tools that will enable both one side and the other to call for the decision of a body that will be able to adjudicate whether content appearing on such and such a social media account really violates personal rights, whether it can be eliminated, or whether there is censorship.&quot;&lt;/p&gt;&lt;p&gt;If a special court rules in favour of the plaintiff and the internet service does not obey the ruling it can subject the internet service to a fine of up to PLN 8 million (EUR 1.8 million) imposed by the Office of Electronic Communications.  &lt;/p&gt;
&lt;div class=&quot;am-article__source&quot;&gt;&lt;span&gt;source:&lt;/span&gt;
&lt;p class=&quot;am-article__print&quot;&gt;&lt;img class=&quot;img-responsive&quot; src=&quot;https://s.tvp.pl/files/portale-v4/polandin-com/images/logo/pap.png&quot;/&gt;&lt;/p&gt;
&lt;span class=&quot;am-article__tag&quot;&gt;pap&lt;/span&gt;&lt;/div&gt;
</description>
<pubDate>Mon, 11 Jan 2021 20:29:52 +0000</pubDate>
<dc:creator>andrenth</dc:creator>
<og:type>article</og:type>
<og:title>Justice Minister announces online freedom of speech bill</og:title>
<og:description>If a social media service doesn’t obey a ruling, a special court could subject it to a fine of up to EUR 1.8 million imposed by the Office of Electronic Communications.</og:description>
<og:image>http://s10.tvp.pl/images2/0/6/e/uid_06e8435fb29de0d047b646ea085c0a061608275303404_width_960_play_0_pos_0_gs_0_height_540.jpg</og:image>
<og:url>https://polandin.com/51388314/justice-minister-announces-online-freedom-of-speech-bill</og:url>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://polandin.com/51388314/justice-minister-announces-online-freedom-of-speech-bill</dc:identifier>
</item>
<item>
<title>Ubiquiti Networks Breach</title>
<link>https://mailchi.mp/ubnt/account-notification?e=30527b2904</link>
<guid isPermaLink="true" >https://mailchi.mp/ubnt/account-notification?e=30527b2904</guid>
<description>Dear Customer,&lt;p&gt;We recently became aware of unauthorized access to certain of our information technology systems hosted by a third party cloud provider. We have no indication that there has been unauthorized activity with respect to any user’s account.&lt;/p&gt;&lt;p&gt;We are not currently aware of evidence of access to any databases that host user data, but we cannot be certain that user data has not been exposed. This data may include your name, email address, and the one-way encrypted password to your account (in technical terms, the passwords are hashed and salted). The data may also include your address and phone number if you have provided that to us.&lt;/p&gt;&lt;p&gt;As a precaution, we encourage you to change your password. We recommend that you also change your password on any website where you use the same user ID or password. Finally, we recommend that you enable two-factor authentication on your Ubiquiti accounts if you have not already done so.&lt;/p&gt;</description>
<pubDate>Mon, 11 Jan 2021 19:36:23 +0000</pubDate>
<dc:creator>ShaneCurran</dc:creator>
<og:title>Account Notification</og:title>
<dc:format>text/html</dc:format>
<dc:identifier>https://mailchi.mp/ubnt/account-notification?e=30527b2904</dc:identifier>
</item>
<item>
<title>Parler LLC vs. Amazon Web Services Inc</title>
<link>https://www.courtlistener.com/docket/29095511/1/parler-llc-v-amazon-web-services-inc/</link>
<guid isPermaLink="true" >https://www.courtlistener.com/docket/29095511/1/parler-llc-v-amazon-web-services-inc/</guid>
<description>&lt;pre&gt;
            Case 2:21-cv-00031-BJR Document 1 Filed 01/11/21 Page 1 of 19




1

2

3

4

5

6

7

8    David J. Groesbeck
9    WSBA No. 24749
     David J. Groesbeck, P.S.
10
     1716 Sylvester St. SW
11   Olympia, Washington 98501
12
     Tel.: 509-747-2800
     Fax: 509-747-2828
13   Email: david@groesbecklaw.com
14
                  IN THE UNITED STATES DISTRICT COURT
15
                FOR THE WESTERN DISTRICT OF WASHINGTON
16

17
                                     AT SEATTLE

18

19   PARLER LLC,
20                                                No. ______________________
                           Plaintiff,
21
                 v.
22

23   AMAZON WEB SERVICES, INC.,
                                                  VERIFIED COMPLAINT
24

25                          Defendant          (JURY DEMAND REQUESTED)
26

27

28

29

30

31                                                              David J. Groesbeck, P.S.
      VERIFIED COMPLAINT - 1                                    Attorney and Counselor
32                                                               1716 Sylvester St. SW
                                                              Olympia, Washington 98501
                                                                    (509) 747-2800
                Case 2:21-cv-00031-BJR Document 1 Filed 01/11/21 Page 2 of 19




1          Plaintiff Parler LLC (“Parler”), by its undersigned counsel, alleges, and by
2
     its Chief Operating Officer, verifies, as follows:
3

4                               NATURE OF THE ACTION

5
           1.       This is a civil action for injunctive relief, including a temporary
6
     restraining order and preliminary injunctive relief, and damages. Last Month,
7

8    Defendant Amazon Web Services, Inc. (“AWS”) and the popular social media
9
     platform Twitter signed a multi-year deal so that AWS could support the daily
10

11   delivery of millions of tweets. AWS currently provides that same service to Parler,
12
     a conservative microblogging alternative and competitor to Twitter.
13

14         2.       When Twitter announced two evenings ago that it was permanently
15
     banning President Trump from its platform, conservative users began to flee
16

17   Twitter en masse for Parler. The exodus was so large that the next day, yesterday,
18
     Parler became the number one free app downloaded from Apple’s App Store.
19

20
           3.       Yet last evening, AWS announced that it would suspend Parler’s

21   account effective Sunday, January 10th, at 11:59 PM PST. And it stated the reason
22
     for the suspension was that AWS was not confident Parler could properly police its
23

24   platform regarding content that encourages or incites violence against others.
25
     However, Friday night one of the top trending tweets on Twitter was “Hang Mike
26

27   Pence.” But AWS has no plans nor has it made any threats to suspend Twitter’s
28
     account.
29

30

31                                                                      David J. Groesbeck, P.S.
       VERIFIED COMPLAINT - 2                                           Attorney and Counselor
32                                                                       1716 Sylvester St. SW
                                                                      Olympia, Washington 98501
                                                                            (509) 747-2800
                Case 2:21-cv-00031-BJR Document 1 Filed 01/11/21 Page 3 of 19




1          4.       AWS’s decision to effectively terminate Parler’s account is apparently
2
     motivated by political animus. It is also apparently designed to reduce competition
3

4    in the microblogging services market to the benefit of Twitter.

5
           5.       Thus, AWS is violating Section 1 of the Sherman Antitrust Act in
6
     combination with Defendant Twitter. AWS is also breaching it contract with
7

8    Parler, which requires AWS to provide Parler with a thirty-day notice before
9
     terminating service, rather than the less than thirty-hour notice AWS actually
10

11   provided. Finally, AWS is committing intentional interference with prospective
12
     economic advantage given the millions of users expected to sign up in the near
13

14   future.
15
           6.       This emergency suit seeks a Temporary Restraining Order against
16

17   Defendant Amazon Web Services to prevent it from shutting down Parler’s account
18
     at the end of today. Doing so is the equivalent of pulling the plug on a hospital
19

20
     patient on life support. It will kill Parler’s business—at the very time it is set to

21   skyrocket.
22
                               JURISDICTION AND VENUE
23

24         7.       This Court has subject matter jurisdiction over Parler’s federal
25
     antitrust claims under 28 U.S.C. §§ 1331 and 1337, as well as under 15 U.S.C. §
26

27   26. The Court has supplemental jurisdiction over Parler’s state law claims under
28
     28 U.S.C. § 1367.
29

30

31                                                                        David J. Groesbeck, P.S.
       VERIFIED COMPLAINT - 3                                             Attorney and Counselor
32                                                                         1716 Sylvester St. SW
                                                                        Olympia, Washington 98501
                                                                              (509) 747-2800
                 Case 2:21-cv-00031-BJR Document 1 Filed 01/11/21 Page 4 of 19




1           8.       This Court has personal jurisdiction over AWS as it is headquartered
2
     in the District. Also, AWS has engaged in sufficient minimum contacts with the
3

4    United States and has purposefully availed itself of the benefits and protections of

5
     both United States and Washington law such that exercise of jurisdiction over AWS
6
     would comport with due process requirements.
7

8           9.       Venue lies in this District under 28 U.S.C. § 1391(b) because AWS
9
     maintains its principal place of business in the State of Washington and in this
10

11   District, and because a substantial part of the events giving rise to Parler’s claims
12
     occurred in this District. Personal jurisdiction and venue may also be deemed
13

14   proper under 15 U.S.C. § 22, because AWS may be found in or transacts business
15
     in this District.
16

17                                          PARTIES
18
            10.      Plaintiff Parler LLC is a Nevada limited liability corporation with its
19

20
     principal place of business in Henderson, Nevada. Parler is “the solution to

21   problems that have surfaced in recent years due to changes in Big Tech policy
22
     influenced      by       various   special-interest    groups.”     Our          Company,
23

24   https://company.parler.com. Thus, “Parler is built upon a foundation of respect for
25
     privacy and personal data, free speech, free markets, and ethical, transparent
26

27   corporate policy.” Id.
28

29

30

31                                                                          David J. Groesbeck, P.S.
       VERIFIED COMPLAINT - 4                                               Attorney and Counselor
32                                                                           1716 Sylvester St. SW
                                                                          Olympia, Washington 98501
                                                                                (509) 747-2800
              Case 2:21-cv-00031-BJR Document 1 Filed 01/11/21 Page 5 of 19




1           11.    Defendant Amazon Web Services, Inc., an Amazon.com, Inc.
2
     company, is a Delaware corporation with its principal place of business in Seattle,
3

4    Washington. AWS is the world’s leading cloud service providers, capturing a third

5
     of the global market. See Global Cloud Infrastructure Market Q3 2020,
6
     https://www.canalys.com/newsroom/worldwide-cloud-market-q320. This is almost
7

8    double the next largest competitor, and equal to the next three largest competitors
9
     combined. Id. AWS generates tens of billions of dollars in revenue annually. Id.
10

11          12.    According to its own press release, “[f]or 14 years, [AWS] has been the
12
     world’s most comprehensive and broadly adopted cloud platform.” Twitter Selects
13

14   AWS as Strategic Provider to Serve Timelines, Press Center, Amazon, (Dec. 15,
15
     2020), https://press.aboutamazon.com/news-releases/news-release-details/twitter-
16

17   selects-aws-strategic-provider-serve-timelines.   That    is   why       “[m]illions              of
18
     customers—including the fastest-growing startups, largest enterprises, and leading
19

20
     government agencies—trust AWS to power their infrastructure, become more agile,

21   and lower costs.” Id. In short, AWS is the Rolls Royce of cloud platform providers.
22
                                           FACTS
23

24
            13.    Parler contracts with AWS to provide the cloud computing services
25

26   Parler needs for its apps and website to function on the internet. Further, that both
27
     the apps and the website are written to work with AWS’s technology. To have to
28

29   switch to a different service provider would require rewriting that code, meaning
30

31                                                                          David J. Groesbeck, P.S.
       VERIFIED COMPLAINT - 5                                               Attorney and Counselor
32                                                                           1716 Sylvester St. SW
                                                                          Olympia, Washington 98501
                                                                                (509) 747-2800
               Case 2:21-cv-00031-BJR Document 1 Filed 01/11/21 Page 6 of 19




1    Parler will be offline for a financially devastating period.
2

3            14.   Parler is also a competitor of Twitter as both provide a similar
4
     platform for users to communicate with short messages, links, and pictures. Like
5

6
     many social media platforms, Parler’s business model is not based on subscription

7    fees.
8

9            15.   Less than a month ago, AWS announced with a press release a new
10
     multi-year deal with Twitter. AWS will “provide global cloud infrastructure to
11

12   deliver Twitter timelines.” Twitter Selects AWS as Strategic Provider to Serve
13
     Timelines,       Press       Center,        Amazon,        (Dec.        15,              2020),
14

15   https://press.aboutamazon.com/news-releases/news-release-details/twitter-
16
     selects-aws-strategic-provider-serve-timelines.
17

18
             16.   According to the deal, “Twitter will leverage AWS’s proven
19

20
     infrastructure and portfolio of services to support delivery of millions of daily

21   Tweets.” Id. Further, “[t]his expansion onto AWS marks the first time that Twitter
22
     is leveraging the public cloud to scale their real-time service.” Id. This deal “buil[t]
23

24   on the companies’ more than decade-long collaboration, where AWS continues to
25
     provide Twitter with storage, compute, database, and content delivery services to
26

27   support its distribution of images, videos and ad content.” Id. What is more,
28
     together “Twitter and AWS will create an architecture that extends Twitter’s on-
29

30

31                                                                          David J. Groesbeck, P.S.
       VERIFIED COMPLAINT - 6                                               Attorney and Counselor
32                                                                           1716 Sylvester St. SW
                                                                          Olympia, Washington 98501
                                                                                (509) 747-2800
              Case 2:21-cv-00031-BJR Document 1 Filed 01/11/21 Page 7 of 19




1    premises infrastructure to enable them to seamlessly run and scale the real-time
2
     service globally, increase its reliability . . ., and rapidly move new features into
3

4    production around the world.” Id.

5
            17.   At the same time, Parler began to significantly increase its usership
6
     at the expense of Twitter. After the election in November, the New York Times
7

8    reported that “millions have migrated to alternative social media and media sites
9
     like Parler . . . .” Mike Isaac &amp;amp; Kellen Browning, Fact-Checked on Facebook and
10

11   Twitter, Some Conservatives Switch Their Apps, NY Times (Nov. 18, 2020),
12
     https://www.nytimes.com/2020/11/11/technology/parler-rumble-newsmax.html. In
13

14   fact, less than a week after Election Day, between November 3rd and November
15
     8th, Parler’s app experienced nearly one million downloads. See Parler, A
16

17   Conservative Twitter Clone, Has Seen Nearly 1 Million Downloads Since Election
18
     Day,           The            Verge             (Nov.           9,                    2020),
19

20
     https://www.theverge.com/2020/11/9/21557219/parler-conservative-app-download-

21   new-users-moderation-bias. This resulted in Parler rocketing to be “the #1 free app
22
     in the iOS App Store, up from #1,023” just a week earlier. Id. Likewise, in that
23

24   same week the Parler app went from 486th to 1st in the Google Play rankings. Id.
25
     Not surprisingly, “the app was the 10th most downloaded social media app in 2020
26

27   with 8.1 million new installs.” Jonathan Schieber, Parler Jumps to No. 1 on App
28
     Store after Facebook and Twitter Ban Trump, TechCrunch (Jan. 9, 2021),
29

30

31                                                                       David J. Groesbeck, P.S.
      VERIFIED COMPLAINT - 7                                             Attorney and Counselor
32                                                                        1716 Sylvester St. SW
                                                                       Olympia, Washington 98501
                                                                             (509) 747-2800
             Case 2:21-cv-00031-BJR Document 1 Filed 01/11/21 Page 8 of 19




1    https://techcrunch.com/2021/01/09/parler-jumps-to-no-1-on-app-store-after-
2
     facebook-and-twitter-bans/.
3

4          18.    In 2021, this trend not only continued, it accelerated, thanks to

5
     Twitter’s announcement two days ago that it would permanently ban President
6
     Trump from its platform. Id. On that day, last Friday, Parler saw installs increase
7

8    in the United States by 355%. Id. After Twitter’s announcement, conservative
9
     politicians and media figures began encouraging their followers to switch to Parler.
10

11   See Yelena Dzhanova, Top Conservative Figures are Tweeting to Advertise their
12
     Parler Accounts After Trump was Permanently Banned from Twitter, Business
13

14   Insider (Jan. 9, 2021), https://www.businessinsider.com/top-conservatives-moving-
15
     to-parler-after-trumps-ban-from-twitter-2021-1. See also Joseph A. Wulfsohn,
16

17   Conservatives Flee to Parler Following Twitter’s Permanent Suspension of Trump,
18
     Fox News (Jan. 9, 2021), https://www.foxnews.com/media/conservatives-join-
19

20
     parler-twitter-trump-ban.

21         19.    Speculation began to mount that President Trump would likewise
22
     move to Parler. Id. Given the close to 90 million followers the President had on
23

24   Twitter, this would be an astronomical boon to Parley and a heavy blow to Twitter.
25
     See Donald J. Trump (@realDonaldTrump) Twitter Statistics, Socialbakers,
26

27   https://www.socialbakers.com/statistics/twitter/profiles/detail/25073877-
28
     realdonaldtrump.
29

30

31                                                                       David J. Groesbeck, P.S.
      VERIFIED COMPLAINT - 8                                             Attorney and Counselor
32                                                                        1716 Sylvester St. SW
                                                                       Olympia, Washington 98501
                                                                             (509) 747-2800
                Case 2:21-cv-00031-BJR Document 1 Filed 01/11/21 Page 9 of 19




1          20.      Given the context of Parler’s looming threat to Twitter and the fact
2
     that the Twitter ban might not long muzzle the President if he switched to Parler,
3

4    potentially bringing tens of millions of followers with him, AWS moved to shut

5
     down Parler. See id.
6
           21.      Yesterday evening, at 6:07 pm PST, web news site BuzzFeed posted
7

8    an article with screenshots of a letter from AWS to Parler, informing Parler that
9
     its account would be suspended at 11:59 pm PST on Sunday, less than thirty hours
10

11   later. See John Paczkowski, Amazon Is Booting Parler Off of Its Web Hosting
12
     Service,               BuzzFeed             (Jan.             9,                       2021),
13

14   https://www.buzzfeednews.com/article/johnpaczkowski/amazon-parler-aws.
15
     Strangely, the article with the letter was posted before Parler itself received the
16

17   letter in an email, received at 7:19 pm PST, over an hour after the BuzzFeed article
18
     went online, meaning AWS leaked the letter to BuzzFeed before sending it to
19

20
     Parler. See Exhibit A.

21         22.      Last evening, the Associated Press reported that “Parler may be the
22
     leading candidate” for President Trump after his Twitter ban as “[e]xperts had
23

24   predicted Trump might pop up on Parler . . . .”). Frank Bajak, Squelched by Twitter,
25
     Trump Seeks New Online Megaphone, Associated Press (Jan. 9, 2021),
26

27   https://apnews.com/article/donald-trump-politics-media-social-media-coronavirus-
28
     pandemic-f5b565ca93a792640211e6438f2db842. However, the AP also observed
29

30

31                                                                        David J. Groesbeck, P.S.
       VERIFIED COMPLAINT - 9                                             Attorney and Counselor
32                                                                         1716 Sylvester St. SW
                                                                        Olympia, Washington 98501
                                                                              (509) 747-2800
              Case 2:21-cv-00031-BJR Document 1 Filed 01/11/21 Page 10 of 19




1    that “Amazon struck [a] blow Saturday [against the chances of Trump adopting
2
     the platform], informing Parler it would need to look for a new web-hosting service
3

4    effective midnight Sunday.” Id.

5
             23.     This death blow by AWS could not come at a worse time for Parler—
6
     a time when the company is surging with the potential of even more explosive
7

8    growth in the next few days. Worse than the timing is the result—Parler has tried
9
     to find alternative companies to host it and they have fallen through. It has no
10

11   other options. Without AWS, Parler is finished as it has no way to get online. And
12
     a delay of granting this TRO by even one day could also sound Parler’s death knell
13

14   as President Trump and others move on to other platforms.1 It is no wonder, then,
15
     that competitor Twitter’s CEO has heartily endorsed efforts to remove Parler from
16

17   the public sphere. See Kevin Shalvey, Parler’s CEO John Matze Responded Angrily
18
     After Jack Dorsey Endorsed Apple’s Removal of the Social Network Favored by
19

20
     Conservatives,             Busines             Insider           (Jan.           10,                 2021),

21   https://www.businessinsider.com/parler-john-matze-responded-angrily-jack-
22
     dorsey-apple-ban-2021-1.
23

24

25

26
     1 AWS indefinitely suspending Parler’s account is categorically different than Google or Apple
27
     dropping Parler from their app stores. In the instance of the latter, existing Parler users can still use
28   its app—it’s just harder for Parler to sign up new users. But with AWS’s move, both existing users
     and new users are completely prevented from using the app until Parler can find some other service
29   to replace AWS. Users are also prevented from using Parler’s website, which is likewise dependent
     upon AWS.
30

31                                                                                      David J. Groesbeck, P.S.
         VERIFIED COMPLAINT - 10                                                        Attorney and Counselor
32                                                                                       1716 Sylvester St. SW
                                                                                      Olympia, Washington 98501
                                                                                            (509) 747-2800
             Case 2:21-cv-00031-BJR Document 1 Filed 01/11/21 Page 11 of 19




1          24.    Parler’s rival social media apps, such as conservative-oriented Gab or
2
     conservative media Rumble, are also experiencing record growth right now. See
3

4    Isaac &amp;amp; Browning, Fact-checked on Facebook and Twitter, supra. If Parler is not

5
     available, people will turn to alternatives, or perhaps return to Twitter or
6
     Facebook. What is more, Parler’s current users are likely to leave and go to another
7

8    platform if Parler is down for an indefinite period. And once those users have begun
9
     to use another platform, they may not return to Parler once it’s back online.
10

11         25.    And by silencing Parler, AWS silences the millions of Parler users
12
     who do not feel their free speech is protected by Twitter or other social media apps.
13

14         26.    What is more, by pulling the plug on Parler but leaving Twitter alone
15
     despite identical conduct by users on both sites, AWS reveals that its expressed
16

17   reasons for suspending Parler’s account are but pretext. In its note announcing the
18
     pending termination of Parler’s service, AWS alleged that “[o]ver the past several
19

20
     weeks, we’ve reported 98 examples to Parler of posts that clearly encourage and

21   incite violence.” Exhibit A. AWS provide a few examples, including one that stated,
22
     “How bout make them hang?”, followed by a series of hashtags, including “#fu--
23

24   mikepence.” Id.
25
           27.    AWS further stated to Parler that the “violent content on your website
26

27   . . . violates our terms.” Id. Because, AWS declared, “we cannot provide services to
28
     a customer that is unable to effectively identify and remove content that
29

30

31                                                                        David J. Groesbeck, P.S.
       VERIFIED COMPLAINT - 11                                            Attorney and Counselor
32                                                                         1716 Sylvester St. SW
                                                                        Olympia, Washington 98501
                                                                              (509) 747-2800
             Case 2:21-cv-00031-BJR Document 1 Filed 01/11/21 Page 12 of 19




1    encourages or incites violence against others,” AWS announced the pending
2
     termination of Parler’s account. Id.
3

4          28.    However, the day before, on Friday, one of the top trends on Twitter

5
     was “Hang Mike Pence,” with over 14,000 tweets. See Peter Aitken, ‘Hang Mike
6
     Pence’ Trends on Twitter After Platform Suspends Trump for Risk of ‘Incitement of
7

8    Violence’, Fox News (Jan. 9, 2021), https://www.foxnews.com/politics/twitter-
9
     trending-hang-mike-pence. And earlier last week, a Los Angeles Times columnist
10

11   observed that Twitter and other social media platforms are partly culpable for the
12
     Capital Hill riot, by allowing rioters to communicate and rile each other up. See
13

14   Erika D. Smith, How Twitter, Facebook are Partly Culpable for Trump DC Riot,
15
     LA Times (Jan. 6, 2021), https://www.latimes.com/california/story/2021-01-06/how-
16

17   twitter-facebook-partly-culpable-trump-dc-riot-capitol. Yet these equivalent, if not
18
     greater, violations of AWS’s terms of service by Twitter have apparently been
19

20
     ignored by AWS.

21         29.    AWS knew its allegations contained in the letter it leaked to the press
22
     that Parler was not able to find and remove content that encouraged violence was
23

24   false—because over the last few days Parler had removed everything AWS had
25
     brought to its attention and more. Yet AWS sought to defame Parler nonetheless.
26

27   And because of AWS false claims, leaked to the public, Parler has not only lost
28
     current and future customers, but Parler has also been unable to find an
29

30

31                                                                       David J. Groesbeck, P.S.
       VERIFIED COMPLAINT - 12                                           Attorney and Counselor
32                                                                        1716 Sylvester St. SW
                                                                       Olympia, Washington 98501
                                                                             (509) 747-2800
                  Case 2:21-cv-00031-BJR Document 1 Filed 01/11/21 Page 13 of 19




1    alternative web hosting company. In short, AWS false claims have made Parler a
2
     pariah.
3

4                              Count One: Sherman Act, Section 1

5         AWS is prohibited from contracting or conspiring to restrain trade or
6                                     commerce.
7
              30.     Parler restates, re-alleges, and incorporates by reference each of the
8

9    allegations set forth in the rest of this Complaint as if fully set forth herein.
10
              31.     Section 1 of the Sherman Act prohibits “[e]very contract, combination
11

12
     in the form of trust or otherwise, or conspiracy, in restraint of trade or commerce .

13   . .” 15 U.S.C. § 1. “To state a claim under Section 1, a plaintiff must allege facts
14
     that, if true, will prove: (1) the existence of a conspiracy, (2) intention on the part
15

16   of     the     co-conspirators   to   restrain   trade,   and   (3)   actual       injury           to
17
     competition.” Coalition For ICANN Transparency, Inc. v. VeriSign, Inc., 611 F.3d
18

19   495, 501-02 (9th Cir. 2010).
20
              32.     Less than a month ago, AWS and Parler’s competitor, Twitter,
21

22   entered into a multi-year deal. Late Friday evening, Twitter banned President
23
     Trump from using its platform, thereby driving enormous numbers of its users to
24

25
     Parler. Twenty-four hours later, AWS announced it would indefinitely suspend

26   Parler’s account.
27
              33.     AWS’s reasons for doing so are not consistent with its treatment of
28

29   Twitter, indicating a desire to harm Parler.
30

31                                                                            David J. Groesbeck, P.S.
          VERIFIED COMPLAINT - 13                                             Attorney and Counselor
32                                                                             1716 Sylvester St. SW
                                                                            Olympia, Washington 98501
                                                                                  (509) 747-2800
               Case 2:21-cv-00031-BJR Document 1 Filed 01/11/21 Page 14 of 19




1          34.     By suspending Parler’s account, AWS will remove from the market a
2
     surging player, severely restraining commerce in the microblogging services
3

4    market.

5
           35. AWS’s actions violate the Sherman Act, 5 U.S.C. § 1.
6
           36. Parler is entitled to injunctive relief.
7

8                             Count Two: Breach of Contract
9
        AWS breached its contract with Parler by not providing thirty days’
10                   notice before terminating its account.
11
           37. Parler restates, re-alleges, and incorporates by reference each of the
12

13   allegations set forth in the rest of this Complaint as if fully set forth herein.
14
           38. Under Washington law, “[a] breach of contract is actionable only if the
15

16   contract imposes a duty, the duty is breached, and the breach proximately causes
17
     damage to the claimant.” See Northwest Independent Forest Mfrs. v. Dept. of Labor
18

19   and Industries, 78 Wn. App. 707, 712, 899 P.2d 6 (1995).
20
           39. The AWS Customer Agreement with Parler allows either party to
21

22
     terminate the agreement “for cause if the other party is in material breach of this

23   Agreement and the material breach remains uncured for a period of 30 days from
24
     receipt of notice by the other party.” Exhibit B.
25

26         40. On January 8, 2021, AWS brought concerns to Parler about user
27
     content that encouraged violence. Parler addressed them, and then AWS said it
28

29   was “okay” with Parler.
30

31                                                                          David J. Groesbeck, P.S.
       VERIFIED COMPLAINT - 14                                              Attorney and Counselor
32                                                                           1716 Sylvester St. SW
                                                                          Olympia, Washington 98501
                                                                                (509) 747-2800
             Case 2:21-cv-00031-BJR Document 1 Filed 01/11/21 Page 15 of 19




1          41. The next day, January 9, 2021, AWS brought more “bad” content to
2
     Parler and Parler took down all of that content by the evening.
3

4          42. Thus, there was no uncured material breach of the Agreement for 30

5
     days, as required for termination.
6
           43. Further, while AWS used the term “suspension” in its notice to Parler,
7

8    it stated that it would “ensure that all of your data is preserved for you to migrate
9
     to your own servers, and will work with you as best as we can to help your
10

11   migration.” Exhibit A. This is not action AWS would take for a temporary
12
     suspension, but rather for a permanent termination. Thus, whatever words AWS
13

14   used, it was terminating the Agreement with Parler.
15
           44. This termination will immediately make it impossible for Parler to have
16

17   an online presence for at least a week, depriving Parler’s current users of any use
18
     of the app and website, and completely preventing any new users from
19

20
     downloading and using the app, or the website.

21         45. Thus, AWS will have breached its contract with and harmed Parler.
22
     Further, lost future profits in this case are difficult to calculate due to the rapidly
23

24   increasing nature of Parler’s user base. That’s because “[t]he usual method for
25
     proving lost profits is to establish profit history.” Tiegs v. Watts, 135 Wash.2d 1
26

27   (1998). But that history will, at best, undervalue the future given how quickly
28
     Parler is growing. And at worst, Parler will get nothing as “[l]ost profits cannot be
29

30

31                                                                         David J. Groesbeck, P.S.
       VERIFIED COMPLAINT - 15                                             Attorney and Counselor
32                                                                          1716 Sylvester St. SW
                                                                         Olympia, Washington 98501
                                                                               (509) 747-2800
             Case 2:21-cv-00031-BJR Document 1 Filed 01/11/21 Page 16 of 19




1    recovered where they are speculative, uncertain and conjectural” because “[t]he
2
     amount of lost profits must be established with reasonable certainty.” Id. Thus,
3

4    money damages may not be available, but at the least are insufficient to make

5
     Parler whole.
6
           46. Parler is entitled to injunctive relief.
7

8         Count Three: Tortious Interference with a Contract or Business
9                                  Expectancy
10
      By terminating Parler’s account, AWS will intentionally interfere with
11     the contracts Parler has with millions of its present users, as well as
12
                 with the users it is projected to gain this week.

13         47. Parler restates, re-alleges, and incorporates by reference each of the
14
     allegations set forth in the rest of this Complaint as if fully set forth herein.
15

16         48. In Washington, “[t]he elements of tortious interference with a contract
17
     or expectancy are: (1) the existence of a valid contractual relationship or business
18

19   expectancy; (2) the defendant’s knowledge of that relationship; (3) an intentional
20
     interference inducing or causing a breach or termination of the relationship or
21

22   expectancy; (4) the defendant's interference for an improper purpose or by
23
     improper means; and (5) resulting damage.” Koch v. Mutual of Enumclaw Ins. Co.,
24

25
     108 Wn. App. 500, 506, 31 P.3d 698 (2001).

26         49. Parler currently has over 12 million users under contract. It expects to
27
     add millions more this week given its growth the last few days and the growing
28

29   voice of conservatives encouraging their Twitter followers to switch to Parler.
30

31                                                                          David J. Groesbeck, P.S.
       VERIFIED COMPLAINT - 16                                              Attorney and Counselor
32                                                                           1716 Sylvester St. SW
                                                                          Olympia, Washington 98501
                                                                                (509) 747-2800
            Case 2:21-cv-00031-BJR Document 1 Filed 01/11/21 Page 17 of 19




1          50. AWS is aware of Parler’s user numbers and current trends. AWS also
2
     knew that Parler was negotiating with it to increase its server capacity given this
3

4    ongoing and expected growth. AWS also knew of public speculation that Trump,

5
     with his nearly 90 million Twitter followers, was going to switch to Parler, likely
6
     bringing many of those followers with him. Finally, AWS also knew from public
7

8    statements that Parler was about to go to the market to raise money.
9
           51. AWS intentionally will interfere with Parler’s current contracts and
10

11   future expected customer relationships by terminating Parler’s Agreement with it
12
     under the pretext that Parler was in violation of that contract when AWS knew
13

14   Parler was not in violation (and when Twitter was engaging in identical conduct
15
     but AWS did not terminate its contract with Twitter).
16

17         52. Parler will be severely damaged financially and reputationally if it
18
     must go offline Sunday at midnight because AWS terminates Parler’s account. As
19

20
     noted above, given the speculative nature of Parler’s financial and reputational

21   damages, money damages will not make it whole.
22
           53. Therefore, Parler is entitled to injunctive relief.
23

24                               PRAYER FOR RELIEF
25

26      Plaintiff respectfully requests that the Court:
27
        A. Grant Parler’s motion for a Temporary Restraining Order and order AWS to
28

29   maintain Parler’s account until further notice from this Court, and to refrain from
30

31                                                                      David J. Groesbeck, P.S.
      VERIFIED COMPLAINT - 17                                           Attorney and Counselor
32                                                                       1716 Sylvester St. SW
                                                                      Olympia, Washington 98501
                                                                            (509) 747-2800
             Case 2:21-cv-00031-BJR Document 1 Filed 01/11/21 Page 18 of 19




1    suspending, terminating or failing to provide any services previously provided
2
     under Parler’s customer agreement with AWS.
3

4       B. Grant Parler damages, including trebled damages, in an amount to be

5
     determined at trial.
6
        C. Grant Parler such other relief as the Court deems just and proper.
7

8

9
           ///
10

11         ///
12
           ///
13

14         ///
15

16

17         Dated: January 10, 2021.

18
                                      Respectfully submitted,
19

20
                                      /s David J. Groesbeck
21                                    WSBA No. 24749
22
                                      DAVID J. GROESBECK, P.S.
                                      1716 Sylvester St. SW
23                                    Olympia, WA 98501
24                                    (509) 747-2800
                                      david@groesbecklaw.com
25

26                                    621 W. Mallon Ave., Suite 507
                                      Spokane, WA 99201
27

28                                    Counsel for Plaintiff
29

30

31                                                                      David J. Groesbeck, P.S.
      VERIFIED COMPLAINT - 18                                           Attorney and Counselor
32                                                                       1716 Sylvester St. SW
                                                                      Olympia, Washington 98501
                                                                            (509) 747-2800
        Case 2:21-cv-00031-BJR Document 1 Filed 01/11/21 Page 19 of 19




                                 VERIFICATION

      I, John Matze, say that I am the Chief Executive Officer of Parler LLC in the

case captioned Parler LLC v. Amazon Web Services, Inc., in the U.S. District Court

for the Western District of Washington, and have authorized the filing of this

complaint. I have reviewed the allegations made in the complaint, and to those

allegations of which I have personal knowledge, I know them to be true. As to those

allegations of which I do not have personal knowledge, I believe them to be true.

Dated: January 10, 2021

                                Verified by:

                                John Matze
                                Chief Executive Officer, Parler LLC
&lt;/pre&gt;</description>
<pubDate>Mon, 11 Jan 2021 18:06:48 +0000</pubDate>
<dc:creator>vo2maxer</dc:creator>
<og:type>website</og:type>
<og:title>Complaint – #1 in Parler LLC v. Amazon Web Services Inc (W.D. Wash., 2:21-cv-00031) – CourtListener.com</og:title>
<og:description>COMPLAINT against defendant(s) Amazon Web Solutions, Inc. (Receipt # AWAWDC-6862856) Attorney David J Groesbeck added to party Parler LLC(pty:pla), filed by Parler LLC. (Attachments: # 1 Exhibit Correspondence from Defendant to Plaintiff, # 2 Exhibit Defendant's Customer Agreement, # 3 Summons, # 4 Civil Cover Sheet)(Groesbeck, David) (Entered: 01/11/2021)</og:description>
<og:url>https://www.courtlistener.com/docket/29095511/1/parler-llc-v-amazon-web-services-inc/</og:url>
<og:image>https://www.courtlistener.com/recap-thumbnails/gov.uscourts.wawd.294664/156822356.thumb.1068.jpeg</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.courtlistener.com/docket/29095511/1/parler-llc-v-amazon-web-services-inc/</dc:identifier>
</item>
<item>
<title>Getting Started with Signal</title>
<link>https://www.justingarrison.com/blog/2021-01-11-getting-started-with-signal/</link>
<guid isPermaLink="true" >https://www.justingarrison.com/blog/2021-01-11-getting-started-with-signal/</guid>
<description>&lt;p&gt;You’ve discovered that &lt;a href=&quot;https://signal.org/&quot;&gt;Signal&lt;/a&gt; can provide you with secure communication from your phone that is cross platform and free!&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;https://www.justingarrison.com/img/signal-og-banner.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;First of all you may be asking “who makes Signal?” Signal Messenger LLC. is the company that makes the Signal app. They are funded by the Signal Foundation which is a non-profit organization that relies on &lt;a href=&quot;https://signal.org/donate/&quot;&gt;your donations&lt;/a&gt; to make the app free and not have ulterior motives with your data.&lt;/p&gt;
&lt;p&gt;The foundation’s mission is&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;To develop open source privacy technology that protects free expression and enables secure global communication.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The Signal app is all &lt;a href=&quot;https://github.com/signalapp&quot;&gt;open source on GitHub&lt;/a&gt; and their protocols are well documented and available &lt;a href=&quot;https://signal.org/docs/&quot;&gt;on their website&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;But that’s not why you’re here. Let’s show you some tips to get the most out of your new secure messaging app.&lt;/p&gt;
&lt;h2 id=&quot;important-settings&quot;&gt;Important settings&lt;/h2&gt;
&lt;p&gt;Signal is great, but there are a few things you may want to change depending on how secure or private you want your communications.&lt;/p&gt;
&lt;h3 id=&quot;notifications&quot;&gt;Notifications.&lt;/h3&gt;
&lt;p&gt;You can disable what is shown in notifications to help with privacy. Turn off whatever you don’t want shown.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://www.justingarrison.com/img/signal-notification-content.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;You may also want to disable the notification you get when one of your contacts join Signal. Especially ad the rapid pace people are joining.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://www.justingarrison.com/img/signal-contact-notifications.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;privacy&quot;&gt;Privacy&lt;/h3&gt;
&lt;p&gt;You can set the Signal app to lock when your phone locks under privacy. It may also be a good idea to enable incognito keyboard which will ask your keyboard to remove personalization while typing.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://www.justingarrison.com/img/signal-privacy.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;You can turn off read receipts, typing indicators, and automatic link previews under the communication settings. Link previews only work on &lt;a href=&quot;https://support.signal.org/hc/en-us/articles/360022474332-Link-Previews&quot;&gt;sites that use &lt;code&gt;https://&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://www.justingarrison.com/img/signal-communication-settings.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;chats-and-media&quot;&gt;Chats and media&lt;/h3&gt;
&lt;p&gt;In chats you can change when to auto-download files. Some of these can be quite large so it may be a good idea to only automatically download on Wi-Fi.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://www.justingarrison.com/img/signal-media-download.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;At the very bottom of Chats and media is a &lt;a href=&quot;https://support.signal.org/hc/en-us/articles/360007059752-Backup-and-Restore-Messages&quot;&gt;message backup option&lt;/a&gt;. The backup is encrypted and stored locally on your phone. If you’re using a backup service for your phone they will also be backed up to the cloud which you may or may not want (even if it’s encrypted).&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://www.justingarrison.com/img/signal-chat-backups.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;linked-devices&quot;&gt;Linked devices&lt;/h3&gt;
&lt;p&gt;You can use Signal from another device including tablets and laptops. Install the Signal app on the other device and it will show a QR code. Open the linked devices setting and click the + button at the bottom. Scan the QR code and you’re all set.&lt;/p&gt;
&lt;p&gt;If you tap on an existing linked device you have the option to remove it from being able to send or receive messages. Be aware that any existing messages on the device may still be available and cached on the device. This setting is not a “secure wipe.”&lt;/p&gt;
&lt;h2 id=&quot;chats-and-calls&quot;&gt;Chats and calls&lt;/h2&gt;
&lt;p&gt;Signal chats work similarly to traditional SMS messaging apps. You can send text, emoji, and stickers, or attach pictures, gifs (searched from giphy), files, contacts, or locations. You can record voice messages by holding the microphone.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://www.justingarrison.com/img/signal-message-attach.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;You can also make audio or video calls when you select a contact and click the icons in the top banner. All calls are encrypted and can optionally go through a relay server so you do not expose your IP address to the recipient. You can enable the relay server in settings -&amp;gt; privacy -&amp;gt; communication.&lt;/p&gt;
&lt;p&gt;A relay is a server that Signal controls that your call will go through. Similar to a VPN in the way it would expose the server IP to the recipient without exposing your IP. If you’re interested in the Signal server architecture you can check out &lt;a href=&quot;https://sorincocorada.ro/signal-messanger-architecture/&quot;&gt;this post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://www.justingarrison.com/img/signal-relay-calls.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;A single hallow check box next to a message you sent means your message was sent. Two check marks means the message was delivered. Once the recipient reads the message the check marks will fill in.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://www.justingarrison.com/img/signal-double-checks-hallow.png&quot; alt=&quot;&quot;/&gt;&lt;img src=&quot;https://www.justingarrison.com/img/signal-doublechecks-filled.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;If you see a little person icon next to the person’s name in chat it means that person is in your contacts. If you want their name to automatically be filled out you can go into your phone’s contacts and add the number to a contact.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://www.justingarrison.com/img/signal-contact.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;If you open a chat you can look in settings and enable disappearing messages. This is super helpful to prevent messages persisting.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://www.justingarrison.com/img/signal-disappearing.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;You can—and should—verify a contact to make sure you’re really talking to them. This verifies the encryption keys used at both ends of the conversation. You can do that manually or automatically by scanning their QR code.&lt;/p&gt;
&lt;p&gt;Ideally you will do this verification out-of-band from Signal either in person or through some other video/image sharing service. Facetime, zoom, etc. are great options if you can’t meet in person.&lt;/p&gt;
&lt;p&gt;Once you verify a contact you’ll see “Verified” text under their name. If you manually mark the contact as verified it will show a message in the chat that you marked them verified.&lt;/p&gt;
&lt;h3 id=&quot;group-messages&quot;&gt;Group messages&lt;/h3&gt;
&lt;p&gt;You can create a group message from the main screen clicking the pencil and then “New group.”&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://www.justingarrison.com/img/signal-new-group.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Add contacts to the group and you’re ready to go.&lt;/p&gt;
&lt;p&gt;You have similar settings to 1:1 chats. You can have a group video call with up to 8 people and a group chat with up to 150 people—RIP notifications! If you want to have a group call without video you need to start a video call and disable your camera before you join.&lt;/p&gt;
&lt;p&gt;You can change who can invite people to the group or make a group link easier for someone to share if they’re not in your contacts.&lt;/p&gt;
&lt;p&gt;The links are public but an admin needs to approve members joining the group by default.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://www.justingarrison.com/img/signal-group-link.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Group video calls work the same way as 1:1 calls but groups don’t have audio only calls—although you can disable your video in a video call.&lt;/p&gt;
&lt;h2 id=&quot;other-things-to-consider&quot;&gt;Other things to consider&lt;/h2&gt;
&lt;p&gt;If you want to use signal without giving out your real phone number you can use a service like twilio that will provide you a forwarding number.&lt;/p&gt;
&lt;p&gt;Check out &lt;a href=&quot;https://mshelton.medium.com/using-signal-without-giving-your-phone-number-3a575580f652&quot;&gt;this great guide&lt;/a&gt; on how to set it up.&lt;/p&gt;
&lt;h3 id=&quot;your-safety-number-has-changed&quot;&gt;Your safety number has changed&lt;/h3&gt;
&lt;p&gt;If you see this seemingly scary message don’t be alarmed. It likely just means the &lt;a href=&quot;https://support.signal.org/hc/en-us/articles/360007060632-What-is-a-safety-number-and-why-do-I-see-that-it-changed-&quot;&gt;person on the other end of the conversation&lt;/a&gt; got a new phone or re-installed Signal.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://www.justingarrison.com/img/signal-safety-number.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;You can still verify the persons safety number to make sure there is no man-in-the-middle attacks. This is distinctly different than how iMessage and Telegram work because in both of those apps they store your private key.&lt;/p&gt;
&lt;h3 id=&quot;pins&quot;&gt;Pins&lt;/h3&gt;
&lt;p&gt;Pins are important because they will enable Signal to get rid of phone number requirements.&lt;/p&gt;
&lt;p&gt;The &lt;a href=&quot;https://support.signal.org/hc/en-us/articles/360007059792-Signal-PIN&quot;&gt;support page&lt;/a&gt; says it best&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Your Signal PIN is a code used to support features like non-phone number based identifiers. This means that your PIN can recover your profile, settings, contacts, and who you’ve blocked if you ever lose or switch devices. A PIN can also serve as an optional registration lock to prevent others from registering your number on your behalf.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It hasn’t rolled out yet but has been in the works for a while.&lt;/p&gt;
&lt;p&gt;If you want to stay up to date on signal news I highly recommend you follow the &lt;a href=&quot;https://signal.org/blog/&quot;&gt;Signal blog&lt;/a&gt;. They have lots of great technical and non-technical information on new features and news.&lt;/p&gt;
</description>
<pubDate>Mon, 11 Jan 2021 18:02:18 +0000</pubDate>
<dc:creator>JustinGarrison</dc:creator>
<og:type>article</og:type>
<og:description>Personal site and blog of Justin Garrison</og:description>
<og:title>Getting started with signal</og:title>
<og:image>https://justingarrison.com/img/signal-og-banner.png</og:image>
<og:url>https://justingarrison.com/blog/2021-01-11-getting-started-with-signal</og:url>
<dc:language>en-us</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.justingarrison.com/blog/2021-01-11-getting-started-with-signal/</dc:identifier>
</item>
<item>
<title>China CCP to Nationalize Jack Ma&amp;#039;s Alibaba and Ant Group – Report</title>
<link>https://www.ibtimes.sg/china-ccp-nationalize-jack-mas-alibaba-ant-group-54444</link>
<guid isPermaLink="true" >https://www.ibtimes.sg/china-ccp-nationalize-jack-mas-alibaba-ant-group-54444</guid>
<description>&lt;p&gt;Reports from China indicate that the Chinese government may be working on a plan to nationalize Jack Ma's Alibaba and the Ant Group. China's ruling Chinese Communist Party (CCP) has gone further ahead with the antitrust investigation into e-commerce giant Alibaba.&lt;/p&gt;
&lt;p&gt;&quot;Based on tip-offs received by the State Administration for Market Regulation in recent days, the administration will be investigating Alibaba ... for suspected monopolistic activities,&quot; the government said.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https://www.ibtimes.sg/malaysias-mahathir-named-worlds-most-dangerous-extremists-list-alongside-isis-caliph-54749&quot; target=&quot;_blank&quot;&gt;ALSO READ: Malaysia's Mahathir Named in 'World's Most Dangerous Extremists' List Alongside ISIS Caliph&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The investigating agencies had set up an office at the Alibaba headquarters in November. Apart from the e-commerce giant, investigators are also probing social media giant Tencent and e-commerce company Meituan.&lt;/p&gt;
&lt;p&gt;The news of the government's plan to enforce more curbs on Alibaba sent its stock spiraling down as much as 8 percent. Alibaba said in a statement it would cooperate with any investigation. &quot;Today, Ant Group received a meeting notice from regulators,&quot; Alibaba said in a statement.&lt;/p&gt;
&lt;div class=&quot;innerBox&quot;&gt;&lt;img class=&quot;imgPhoto full&quot; id=&quot;i489&quot; src=&quot;https://data.ibtimes.sg/en/full/489/chinas-alibaba-secures-3-billion-loan-to-finance-acquisition-spree.jpg?w=736&quot; alt=&quot;China's Alibaba secures $3 billion loan to finance acquisition spree&quot; title=&quot;China's Alibaba secures $3 billion loan to finance acquisition spree&quot; width=&quot;736&quot; itemprop=&quot;contentUrl&quot;/&gt;&lt;span class=&quot;cap&quot; itemprop=&quot;caption&quot;&gt;A logo of Alibaba Group is pictured at its headquarters in Hangzhou, Zhejiang province, China, October 14, 2015.&lt;/span&gt; &lt;span class=&quot;credit&quot; itemprop=&quot;copyrightHolder&quot;&gt;Reuters&lt;/span&gt;&lt;/div&gt;
&lt;h3&gt;Decision Taken at Highest Levels of CCP&lt;/h3&gt;
&lt;p&gt;Meanwhile, sources have said the development is a proof of China's resolve to nationalize Alibaba. Song Qing, Internet finance industry insider, said the investigation is part of CCP plans to nationalize both Ant Group and Alibaba. &quot;There will definitely be an outcome, now that they have started the investigation ... This is probably coming from the highest levels,&quot; he told Radio Free Asia.&lt;/p&gt;
&lt;p&gt;The suggestions are that the plan to nationalize Alibaba has come from the very top of the ruling Communist Party structure. A few days ago, the People's Daily, the official mouthpiece of the CCP, said the government's &quot;anti-monopoly work&quot; will lead to &quot;better development.&quot; The paper said the party Politburo thought 'anti-monopoly work' should be strengthened to prevent the disorderly expansion of capital.&lt;/p&gt;
&lt;p&gt;Song Qing agrees with the view. &quot;Just a couple of weeks ago, they set out plans to nationalize Ant Group and Alibaba; the timing was deliberate ... Those plans all came from the central leadership,&quot; he said.&lt;/p&gt;
&lt;div class=&quot;innerBox&quot;&gt;&lt;img class=&quot;imgPhoto full&quot; id=&quot;i20672&quot; src=&quot;https://data.ibtimes.sg/en/full/20672/alibaba.jpg?w=736&quot; alt=&quot;Alibaba&quot; title=&quot;Alibaba&quot; width=&quot;736&quot; itemprop=&quot;contentUrl&quot;/&gt;&lt;span class=&quot;cap&quot; itemprop=&quot;caption&quot;&gt;Alibaba Group founder and executive chairman Jack Ma.&lt;/span&gt; &lt;span class=&quot;credit&quot; itemprop=&quot;copyrightHolder&quot;&gt;IANS&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;He also added that the government wants to make a lesson out of Alibaba. &quot;These nationalizations are definitely happening, and [the antitrust investigation] will likely speed up that process ... It's also, I think, about making an example of [Ant and Alibaba],&quot; &lt;a href=&quot;https://www.rfa.org/english/news/china/alibaba-probe-12252020170303.html&quot; rel=&quot;nofollow&quot; target=&quot;_blank&quot;&gt;he said&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;innerBox&quot;&gt;&lt;img class=&quot;imgPhoto full&quot; id=&quot;i14121&quot; src=&quot;https://data.ibtimes.sg/en/full/14121/visitors-use-their-smartphones-underneath-the-logo-of-tencent-at-the-global-mobile-internet-conference-in-beijing-may-6-2014-reuters-kim-kyung-hoon-file-photo.jpg?w=736&quot; alt=&quot;Visitors use their smartphones underneath the logo of Tencent at the Global Mobile Internet Conference in Beijing May 6, 2014. REUTERS/Kim Kyung-Hoon/File Photo&quot; title=&quot;Visitors use their smartphones underneath the logo of Tencent at the Global Mobile Internet Conference in Beijing May 6, 2014. REUTERS/Kim Kyung-Hoon/File Photo&quot; width=&quot;736&quot; itemprop=&quot;contentUrl&quot;/&gt;&lt;span class=&quot;cap&quot; itemprop=&quot;caption&quot;&gt;Visitors use their smartphones underneath the logo of Tencent at the Global Mobile Internet Conference in Beijing May 6, 2014. REUTERS/Kim Kyung-Hoon/File Photo&lt;/span&gt; &lt;span class=&quot;credit&quot; itemprop=&quot;copyrightHolder&quot;&gt;Reuters&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;As the antitrust probe progresses, the People's Bank of China, the China Banking Regulatory Commission, the China Securities Regulatory Commission and the State Administration of Foreign Exchange will also get involved in the investigation against Alibaba.&lt;/p&gt;
&lt;p&gt;Xi Jinping, Chinese President and CCP general secretary, had said in October that the plan was to make China a more state-controlled economy based on domestic demand. Observers think China's political economy is poised to see major changes. Many believe that Xi will change the pattern of property ownership in the country.&lt;/p&gt;
</description>
<pubDate>Mon, 11 Jan 2021 17:47:25 +0000</pubDate>
<dc:creator>masonhensley</dc:creator>
<og:title>China CCP to Nationalize Jack Ma's Alibaba and Ant Group - Report</og:title>
<og:type>article</og:type>
<og:url>https://www.ibtimes.sg/china-ccp-nationalize-jack-mas-alibaba-ant-group-54444</og:url>
<og:image>https://data.ibtimes.sg/en/full/489/chinas-alibaba-secures-3-billion-loan-finance-acquisition-spree.jpg</og:image>
<og:description>The news of the government's plan to enforce more curbs on Alibaba sent its stock crashing down as much as 8 percent. Alibaba said it would cooperate with any investigation.</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.ibtimes.sg/china-ccp-nationalize-jack-mas-alibaba-ant-group-54444</dc:identifier>
</item>
<item>
<title>Simple Anomaly Detection Using Plain SQL</title>
<link>https://hakibenita.com/sql-anomaly-detection</link>
<guid isPermaLink="true" >https://hakibenita.com/sql-anomaly-detection</guid>
<description>&lt;hr/&gt;&lt;p&gt;Many developers think that having a critical bug in their code is the worst thing that can happen. Well, there is something much worse than that: Having a critical bug in your code and &lt;strong&gt;not knowing about it!&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;To make sure I get notified about critical bugs as soon as possible, I started looking for ways to find anomalies in my data. I quickly found that information about these subjects tend to get very complicated, and involve a lot of ad-hoc tools and dependencies.&lt;/p&gt;
&lt;p&gt;I'm not a statistician and not a data scientist, I'm just a developer. Before I introduce dependencies into my system I make sure I really can't do without them. So, &lt;strong&gt;using some high school level statistics and a fair knowledge of SQL, I implemented a simple anomaly detection system &lt;em&gt;that works&lt;/em&gt;.&lt;/strong&gt;&lt;/p&gt;
&lt;img alt=&quot;Can you spot the anomaly?&amp;lt;br&amp;gt;&amp;lt;small&amp;gt;Photo by &amp;lt;a href=&amp;quot;https://unsplash.com/photos/KmKZV8pso-s&amp;quot;&amp;gt;Ricardo Gomez Angel&amp;lt;/a&amp;gt;&amp;lt;/small&amp;gt;&quot; src=&quot;https://hakibenita.com/images/00-sql-anomaly-detection.png&quot;/&gt;Can you spot the anomaly?&lt;br/&gt;&lt;small&gt;Photo by &lt;a href=&quot;https://unsplash.com/photos/KmKZV8pso-s&quot;&gt;Ricardo Gomez Angel&lt;/a&gt;&lt;/small&gt;
&lt;details class=&quot;toc-container&quot; open=&quot;&quot;&gt;Table of Contents

&lt;/details&gt;&lt;hr/&gt;&lt;div class=&quot;admonition tip&quot;&gt;
&lt;p class=&quot;admonition-title&quot;&gt;Interactive Editor&lt;/p&gt;

&lt;/div&gt;
&lt;hr/&gt;
&lt;p&gt;Anomaly in a data series is a significant deviation from some reasonable value. Looking at this series of numbers for example, which number stands out?&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;15&quot;&gt;
&lt;pre&gt;
2, 3, 5, 2, 3, 12, 5, 3, 4
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The number that stands out in this series is 12.&lt;/p&gt;
&lt;img alt=&quot;Scatter plot&quot; src=&quot;https://hakibenita.com/images/00-sql-anomaly-detection-scatter-plot.png&quot;/&gt;Scatter plot
&lt;p&gt;This is intuitive to a human, but computer programs don't have intuition...&lt;/p&gt;
&lt;p&gt;To find the anomaly in the series we first need to define what a reasonable value is, and then define how far away from this value we consider a significant deviation. A good place to start looking for a reasonable value is the mean:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;16&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;avg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;unnest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;go&quot;&gt;       avg&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;────────────────────&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;4.3333333333333333&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The mean is ~4.33.&lt;/p&gt;
&lt;p&gt;Next, we need to define the deviation. Let's use &lt;a href=&quot;https://en.wikipedia.org/wiki/Standard_deviation&quot; rel=&quot;noopener&quot;&gt;Standard Deviation&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;16&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stddev&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;unnest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;go&quot;&gt;      stddev&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;────────────────────&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;3.0822070014844882&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Standard deviation is the square root of the &lt;a href=&quot;https://en.wikipedia.org/wiki/Variance&quot; rel=&quot;noopener&quot;&gt;variance&lt;/a&gt;, which is the average squared distance from the mean. In this case it's 3.08.&lt;/p&gt;
&lt;p&gt;Now that we've defined a &quot;reasonable&quot; value and a deviation, we can define a &lt;em&gt;range&lt;/em&gt; of acceptable values:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;19&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;avg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stddev&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lower_bound&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;avg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stddev&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;upper_bound&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;unnest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;go&quot;&gt;    lower_bound    │     upper_bound&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;───────────────────┼────────────────────&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;1.2511263318488451 │ 7.4155403348178215&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The range we defined is one standard deviation from the mean. Any value outside this range is considered an anomaly:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;22&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;k&quot;&gt;WITH&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;series&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;unnest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;bounds&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;avg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stddev&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lower_bound&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;avg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stddev&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;upper_bound&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;series&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BETWEEN&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lower_bound&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;upper_bound&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;is_anomaly&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;series&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;bounds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;go&quot;&gt;n  │ is_anomaly&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;───┼────────────&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 2 │ f&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 3 │ f&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 5 │ f&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 2 │ f&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 3 │ f&lt;/span&gt;
&lt;span class=&quot;hll&quot;&gt;&lt;span class=&quot;go&quot;&gt;12 │ t&lt;/span&gt;
&lt;/span&gt;&lt;span class=&quot;go&quot;&gt; 5 │ f&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 3 │ f&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 4 │ f&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Using the query we found that the value 12 is outside the range of acceptable values, and identified it as an anomaly.&lt;/p&gt;
&lt;h3 id=&quot;understanding-z-score&quot;&gt;&lt;a class=&quot;toclink&quot; href=&quot;https://hakibenita.com/sql-anomaly-detection#understanding-z-score&quot;&gt;Understanding Z-Score&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Another way to represent a range of acceptable values is using a z-score. &lt;a href=&quot;https://en.wikipedia.org/wiki/Standard_score&quot; rel=&quot;noopener&quot;&gt;z-score, or Standard Score&lt;/a&gt;, is the number of standard deviations from the mean. In the previous section, our acceptable range was one standard deviation from the mean, or in other words, a z-score in the range ±1:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;22&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;k&quot;&gt;WITH&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;series&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;unnest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;stats&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;avg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;series_mean&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;stddev&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;series_stddev&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;series&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;hll&quot;&gt;   &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;series_mean&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;series_stddev&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;zscore&lt;/span&gt;
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;series&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;stats&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;go&quot;&gt;n  │         zscore&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;───┼─────────────────────────&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 2 │ -0.75703329861022517346&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 3 │ -0.43259045634870009448&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 5 │  0.21629522817435006346&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 2 │ -0.75703329861022517346&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 3 │ -0.43259045634870009448&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;12 │      2.4873951240050256&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 5 │  0.21629522817435006346&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 3 │ -0.43259045634870009448&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 4 │ -0.10814761408717501551&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Like before, we can detect anomalies by searching for values which are outside the acceptable range using the z-score:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;24&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;k&quot;&gt;WITH&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;series&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;unnest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;stats&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;avg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;series_avg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;stddev&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;series_stddev&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;series&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;zscores&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;series_avg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;series_stddev&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;zscore&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;series&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;stats&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
   &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;zscore&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BETWEEN&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;is_anomaly&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;zscores&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;go&quot;&gt;n  │         zscore          │ is_anomaly&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;───┼─────────────────────────┼────────────&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 2 │ -0.75703329861022517346 │ f&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 3 │ -0.43259045634870009448 │ f&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 5 │  0.21629522817435006346 │ f&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 2 │ -0.75703329861022517346 │ f&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 3 │ -0.43259045634870009448 │ f&lt;/span&gt;
&lt;span class=&quot;hll&quot;&gt;&lt;span class=&quot;go&quot;&gt;12 │      2.4873951240050256 │ t&lt;/span&gt;
&lt;/span&gt;&lt;span class=&quot;go&quot;&gt; 5 │  0.21629522817435006346 │ f&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 3 │ -0.43259045634870009448 │ f&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 4 │ -0.10814761408717501551 │ f&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Using z-score, we also identified 12 as an anomaly in this series.&lt;/p&gt;
&lt;h3 id=&quot;optimizing-z-score&quot;&gt;&lt;a class=&quot;toclink&quot; href=&quot;https://hakibenita.com/sql-anomaly-detection#optimizing-z-score&quot;&gt;Optimizing Z-Score&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;So far we used one standard deviation from the mean, or a z-score of ±1 to identify anomalies. Changing the z-score threshold can affect our results. For example, let's see what anomalies we identify when the z-score is greater than 0.5 and when it's greater than 3:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;26&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;k&quot;&gt;WITH&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;series&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;unnest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;stats&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;avg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;series_avg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;stddev&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;series_stddev&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;series&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;zscores&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;series_avg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;series_stddev&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;zscore&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;series&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;stats&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
   &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;hll&quot;&gt;   &lt;span class=&quot;n&quot;&gt;zscore&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BETWEEN&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;is_anomaly_0_5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&quot;hll&quot;&gt;   &lt;span class=&quot;n&quot;&gt;zscore&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BETWEEN&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;is_anomaly_1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&quot;hll&quot;&gt;   &lt;span class=&quot;n&quot;&gt;zscore&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BETWEEN&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;is_anomaly_3&lt;/span&gt;
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;zscores&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;go&quot;&gt;n  │         zscore          │ is_anomaly_0_5 │ is_anomaly_1 │ is_anomaly_3&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;───┼─────────────────────────┼────────────────┼──────────────┼──────────────&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 2 │ -0.75703329861022517346 │ t              │ f            │ f&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 3 │ -0.43259045634870009448 │ f              │ f            │ f&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 5 │  0.21629522817435006346 │ f              │ f            │ f&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 2 │ -0.75703329861022517346 │ t              │ f            │ f&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 3 │ -0.43259045634870009448 │ f              │ f            │ f&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;12 │      2.4873951240050256 │ t              │ t            │ f&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 5 │  0.21629522817435006346 │ f              │ f            │ f&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 3 │ -0.43259045634870009448 │ f              │ f            │ f&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt; 4 │ -0.10814761408717501551 │ f              │ f            │ f&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Let's see what we got:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;When we decreased the z-score threshold to 0.5, we identified the value 2 as an anomaly in addition to the value 12.&lt;/li&gt;
&lt;li&gt;When we increased the z-score threshold to 3 we did not identify any anomaly.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;The quality of our results are directly related to the parameters we set for the query. Later we'll see how using backtesting can help us identify ideal values.&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;Application servers such as nginx, Apache and IIS write a lot of useful information to access logs. The data in these logs can be extremely useful in identifying anomalies.&lt;/p&gt;
&lt;p&gt;We are going to analyze logs of a web application, so the data we are most interested in is the timestamp and the status code of every response from the server. To illustrate the type of insight we can draw from just this data:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;A sudden increase in 500 status code&lt;/strong&gt;: You may have a problem in the server. Did you just push a new version? Is there an external service you're using that started failing in unexpected ways?&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;A sudden increase in 400 status code&lt;/strong&gt;: You may have a problem in the client. Did you change some validation logic and forgot to update the client? Did you make a change and forgot to handle backward compatibility?&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;A sudden increase in 404 status code&lt;/strong&gt;: You may have an SEO problem. Did you move some pages and forgot to set up redirects? Is there some script kiddy running a scan on your site?&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;A sudden increase in 200 status code&lt;/strong&gt;: You either have some significant legit traffic coming in, or you are under a DOS attack. Either way, you probably want to check where it's coming from.&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;preparing-the-data&quot;&gt;&lt;a class=&quot;toclink&quot; href=&quot;https://hakibenita.com/sql-anomaly-detection#preparing-the-data&quot;&gt;Preparing the Data&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Parsing and processing logs is outside the scope of this article, so let's assume we did that and we have a table that looks like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;9&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TABLE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;server_log_summary&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timestamptz&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The table stores the number of entries for each status code at a given period. For example, our table stores how many responses returned each status code every minute:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;10&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;gp&quot;&gt;db=#&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;server_log_summary&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DESC&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;LIMIT&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;go&quot;&gt;        period         │ status_code │ entries&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;───────────────────────┼─────────────┼─────────&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 18:00:00+00 │         200 │    4084&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 18:00:00+00 │         404 │       0&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 18:00:00+00 │         400 │      24&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 18:00:00+00 │         500 │       0&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 17:59:00+00 │         400 │      12&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 17:59:00+00 │         200 │    3927&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 17:59:00+00 │         500 │       0&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 17:59:00+00 │         404 │       0&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 17:58:00+00 │         400 │       2&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 17:58:00+00 │         200 │    3850&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Note that the table has a row for every minute, even if the status code was never returned in that minute. Given a table of statuses, it's very tempting to do something like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;12&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;c1&quot;&gt;-- Wrong!&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;date_trunc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'minute'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;timestamp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;server_log&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;GROUP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is a common mistake and it can leave you with gaps in the data. Zero is a value, and it holds a significant meaning. A better approach is to create an &quot;axis&quot;, and join to it:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;22&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;c1&quot;&gt;-- Correct!&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WITH&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;axis&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;generate_series&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
           &lt;span class=&quot;n&quot;&gt;date_trunc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'minute'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()),&lt;/span&gt;
           &lt;span class=&quot;n&quot;&gt;date_trunc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'minute'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;interval&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'1 hour'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
           &lt;span class=&quot;nb&quot;&gt;interval&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'1 minute'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
       &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;VALUES&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;400&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;404&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;period&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;axis&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;LEFT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;JOIN&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;server_log&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;date_trunc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'minute'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;timestamp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;period&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;GROUP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;First we generate an axis using a cartesian join between the status codes we want to track, and the times we want to monitor. To generate the axis we used two nice features of PostgreSQL:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://www.postgresql.org/docs/current/functions-srf.html&quot; rel=&quot;noopener&quot;&gt;&lt;code&gt;generate_series&lt;/code&gt;&lt;/a&gt;: function that generates a range of values.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.postgresql.org/docs/current/queries-values.html&quot; rel=&quot;noopener&quot;&gt;&lt;code&gt;VALUES&lt;/code&gt; list&lt;/a&gt;: special clause that can generate &quot;constant tables&quot;, as the documentation calls it. You might be familiar with the &lt;code&gt;VALUES&lt;/code&gt; clause from &lt;code&gt;INSERT&lt;/code&gt; statements. In the old days, to generate data we had to use a bunch of &lt;code&gt;SELECT ... UNION ALL&lt;/code&gt;... using &lt;code&gt;VALUES&lt;/code&gt; is much nicer.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;After generating the axis, we left join the actual data into it to get a complete series for each status code. The resulting data has no gaps, and is ready for analysis.&lt;/p&gt;
&lt;h3 id=&quot;getting-a-sense-of-the-data&quot;&gt;&lt;a class=&quot;toclink&quot; href=&quot;https://hakibenita.com/sql-anomaly-detection#getting-a-sense-of-the-data&quot;&gt;Getting a Sense of the Data&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;To get a sense of the data, let's draw a stacked bar chart by status:&lt;/p&gt;
&lt;img alt=&quot;stacked bar chart by status, over time&quot; src=&quot;https://hakibenita.com/images/00-sql-anomaly-detection-chart-by-status-over-time.png&quot;/&gt;stacked bar chart by status, over time
&lt;p&gt;The chart shows a period of 12 hours. It looks like we have a nice trend with two peaks at around 09:30 and again at 18:00.&lt;/p&gt;
&lt;p&gt;We also spot right away that at ~11:30 there was a significant increase in 500 errors. The burst died down after around 10 minutes. This is the type of anomalies we want to identify early on.&lt;/p&gt;
&lt;p&gt;It's entirely possible that there were other problems during that time, we just can't spot them with a naked eye.&lt;/p&gt;
&lt;h3 id=&quot;identifying-anomalies&quot;&gt;&lt;a class=&quot;toclink&quot; href=&quot;https://hakibenita.com/sql-anomaly-detection#identifying-anomalies&quot;&gt;Identifying Anomalies&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;In anomaly detection systems, we usually want to identify if we have an anomaly &lt;em&gt;right now&lt;/em&gt;, and send an alert.&lt;/p&gt;
&lt;p&gt;To identify if the last datapoint is an anomaly, we start by calculating the mean and standard deviation for each status code in the past hour:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;14&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;gp&quot;&gt;db=#&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WITH&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stats&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MAX&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;ARRAY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;EXTRACT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'epoch'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]))[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;last_value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;AVG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mean_entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;STDDEV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stddev_entries&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;server_log_summary&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt;
       &lt;span class=&quot;c1&quot;&gt;-- In the demo data use:&lt;/span&gt;
       &lt;span class=&quot;c1&quot;&gt;-- period &amp;gt; '2020-08-01 17:00 UTC'::timestamptz&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;interval&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'1 hour'&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;GROUP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stats&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;go&quot;&gt;status_code │ last_value │      mean_entries      │     stddev_entries&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;────────────┼────────────┼────────────────────────┼────────────────────────&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        404 │          0 │ 0.13333333333333333333 │ 0.34280333180088158345&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │          0 │ 0.15000000000000000000 │ 0.36008473579027553993&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        200 │       4084 │  2779.1000000000000000 │       689.219644702665&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        400 │         24 │ 0.73333333333333333333 │     3.4388935285299212&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To get the last value in a GROUP BY in addition to the mean and standard deviation &lt;a href=&quot;https://hakibenita.com/sql-group-by-first-last-value&quot;&gt;we used a little array trick&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Next, we calculate the z-score for the last value for each status code:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;16&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;gp&quot;&gt;db=#&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WITH&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stats&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MAX&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;ARRAY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;EXTRACT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'epoch'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]))[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;last_value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;AVG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mean_entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;STDDEV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stddev_entries&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;server_log_summary&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt;
       &lt;span class=&quot;c1&quot;&gt;-- In the demo data use:&lt;/span&gt;
       &lt;span class=&quot;c1&quot;&gt;-- period &amp;gt; '2020-08-01 17:00 UTC'::timestamptz&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;interval&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'1 hour'&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;GROUP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
   &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;hll&quot;&gt;   &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;last_value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mean_entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULLIF&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stddev_entries&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;zscore&lt;/span&gt;
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;stats&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;go&quot;&gt;status_code │ last_value │ mean_entries │ stddev_entries │  zscore&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;────────────┼────────────┼──────────────┼────────────────┼────────&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        404 │          0 │ 0.133        │ 0.3428         │ -0.388&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │          0 │ 0.150        │ 0.3600         │ -0.416&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        200 │       4084 │ 2779.100     │ 689.2196       │  1.893&lt;/span&gt;
&lt;span class=&quot;hll&quot;&gt;&lt;span class=&quot;go&quot;&gt;        400 │         24 │ 0.733        │ 3.4388         │  6.765&lt;/span&gt;
&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We calculated the z-score by finding the number of standard deviations between the last value and the mean. To &lt;a href=&quot;https://hakibenita.com/sql-dos-and-donts#guard-against-division-by-zero-errors&quot;&gt;avoid a &quot;division by zero&quot; error&lt;/a&gt; we transform the denominator to NULL if it's zero.&lt;/p&gt;
&lt;p&gt;Looking at the z-scores we got, we can spot that status code 400 got a very high z-score of 6. In the past minute we returned a 400 status code 24 times, which is significantly higher than the average of 0.73 in the past hour.&lt;/p&gt;
&lt;p&gt;Let's take a look at the raw data:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;10&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;server_log_summary&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;400&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DESC&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;LIMIT&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;go&quot;&gt;        period         │ status_code │ entries&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;───────────────────────┼─────────────┼─────────&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 18:00:00+00 │         400 │      24&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 17:59:00+00 │         400 │      12&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 17:58:00+00 │         400 │       2&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 17:57:00+00 │         400 │       0&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 17:56:00+00 │         400 │       1&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 17:55:00+00 │         400 │       0&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 17:54:00+00 │         400 │       0&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 17:53:00+00 │         400 │       0&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 17:52:00+00 │         400 │       0&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 17:51:00+00 │         400 │       0&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 17:50:00+00 │         400 │       0&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 17:49:00+00 │         400 │       0&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 17:48:00+00 │         400 │       0&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 17:47:00+00 │         400 │       0&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 17:46:00+00 │         400 │       0&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 17:45:00+00 │         400 │       0&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 17:44:00+00 │         400 │       0&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 17:43:00+00 │         400 │       0&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 17:42:00+00 │         400 │       0&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;2020-08-01 17:41:00+00 │         400 │       0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It does look like in the last couple of minutes we are getting more errors than expected.&lt;/p&gt;
&lt;img alt=&quot;Status 400 in the past hour&quot; src=&quot;https://hakibenita.com/images/00-sql-anomaly-detection-400.png&quot;/&gt;Status 400 in the past hour
&lt;p&gt;What our naked eye missed in the chart and in the raw data, was found by the query, and was classified as an anomaly. We are off to a great start!&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;In the previous section we identified an anomaly. We found an increase in 400 status code because the z-score was 6. But how do we set the threshold for the z-score? Is a z-score of 3 an anomaly? What about 2, or 1?&lt;/p&gt;
&lt;p&gt;To find thresholds that fit our needs, we can run simulations on past data with different values, and evaluate the results. This is often called backtesting.&lt;/p&gt;
&lt;h3 id=&quot;finding-past-anomalies&quot;&gt;&lt;a class=&quot;toclink&quot; href=&quot;https://hakibenita.com/sql-anomaly-detection#finding-past-anomalies&quot;&gt;Finding Past Anomalies&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;The first thing we need to do is to calculate the mean and the standard deviation for each status code up until every row, just as if it’s the current value. This is a classic job for a &lt;a href=&quot;https://www.postgresql.org/docs/current/tutorial-window.html&quot; rel=&quot;noopener&quot;&gt;window function&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;14&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;k&quot;&gt;WITH&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;calculations_over_window&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;AVG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;OVER&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status_window&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mean_entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;STDDEV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;OVER&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status_window&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stddev_entries&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;server_log_summary&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;WINDOW&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status_window&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;PARTITION&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;ROWS&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BETWEEN&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;PRECEDING&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;CURRENT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ROW&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;calculations_over_window&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DESC&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;LIMIT&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;go&quot;&gt;status_code │         period         │ entries │      mean_entries      │     stddev_entries&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;────────────┼────────────────────────┼─────────┼────────────────────────┼────────────────────────&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        200 │ 2020-08-01 18:00:00+00 │    4084 │  2759.9672131147540984 │       699.597407256800&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        400 │ 2020-08-01 18:00:00+00 │      24 │ 0.72131147540983606557 │     3.4114080550460080&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        404 │ 2020-08-01 18:00:00+00 │       0 │ 0.13114754098360655738 │ 0.34036303344446665347&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 18:00:00+00 │       0 │ 0.14754098360655737705 │ 0.35758754516763638735&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 17:59:00+00 │       0 │ 0.16393442622950819672 │ 0.37328844382740000274&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        400 │ 2020-08-01 17:59:00+00 │      12 │ 0.32786885245901639344 │     1.5676023249473471&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        200 │ 2020-08-01 17:59:00+00 │    3927 │  2718.6721311475409836 │       694.466863171826&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        404 │ 2020-08-01 17:59:00+00 │       0 │ 0.13114754098360655738 │ 0.34036303344446665347&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 17:58:00+00 │       0 │ 0.16393442622950819672 │ 0.37328844382740000274&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        404 │ 2020-08-01 17:58:00+00 │       0 │ 0.13114754098360655738 │ 0.34036303344446665347&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        200 │ 2020-08-01 17:58:00+00 │    3850 │  2680.4754098360655738 │       690.967283512936&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        400 │ 2020-08-01 17:58:00+00 │       2 │ 0.13114754098360655738 │ 0.38623869286861001780&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        404 │ 2020-08-01 17:57:00+00 │       0 │ 0.13114754098360655738 │ 0.34036303344446665347&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        400 │ 2020-08-01 17:57:00+00 │       0 │ 0.09836065573770491803 │ 0.30027309973793774423&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 17:57:00+00 │       1 │ 0.16393442622950819672 │ 0.37328844382740000274&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        200 │ 2020-08-01 17:57:00+00 │    3702 │  2643.0327868852459016 │       688.414796645480&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        200 │ 2020-08-01 17:56:00+00 │    3739 │  2607.5081967213114754 │       688.769908918569&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        404 │ 2020-08-01 17:56:00+00 │       0 │ 0.14754098360655737705 │ 0.35758754516763638735&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        400 │ 2020-08-01 17:56:00+00 │       1 │ 0.11475409836065573770 │ 0.32137001808599097120&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 17:56:00+00 │       0 │ 0.14754098360655737705 │ 0.35758754516763638735&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To calculate the mean and standard deviation over a sliding window of 60 minutes, we use a &lt;a href=&quot;https://www.postgresql.org/docs/current/tutorial-window.html&quot; rel=&quot;noopener&quot;&gt;window function&lt;/a&gt;. To avoid having to repeat the &lt;code&gt;WINDOW&lt;/code&gt; clause for every aggregate, we define a &lt;a href=&quot;https://www.postgresql.org/docs/current/sql-select.html#SQL-WINDOW&quot; rel=&quot;noopener&quot;&gt;named window&lt;/a&gt; called &quot;status_window&quot;. This is another nice feature of PostgreSQL.&lt;/p&gt;
&lt;p&gt;In the results we can now see that for every entry, we have the mean and standard deviation of the previous 60 rows. This is similar to the calculation we did in the previous section, only this time we do it for every row.&lt;/p&gt;
&lt;p&gt;Now we can calculate the z-score for every row:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;19&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;k&quot;&gt;WITH&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;calculations_over_window&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;AVG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;OVER&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status_window&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mean_entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;STDDEV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;OVER&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status_window&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stddev_entries&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;server_log_summary&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;WINDOW&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status_window&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;PARTITION&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;ROWS&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BETWEEN&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;PRECEDING&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;CURRENT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ROW&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;

&lt;span class=&quot;hll&quot;&gt;&lt;span class=&quot;n&quot;&gt;with_zscore&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
&lt;/span&gt;   &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
       &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;hll&quot;&gt;       &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mean_entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULLIF&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stddev_entries&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;zscore&lt;/span&gt;
&lt;/span&gt;   &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;calculations_over_window&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;zscore&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;with_zscore&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DESC&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;LIMIT&lt;/span&gt;
   &lt;span class=&quot;mf&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;go&quot;&gt;status_code │         period         │        zscore&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;────────────┼────────────────────────┼──────────────────────&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        200 │ 2020-08-01 18:00:00+00 │   1.8925638848161648&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        400 │ 2020-08-01 18:00:00+00 │    6.823777205473068&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        404 │ 2020-08-01 18:00:00+00 │ -0.38531664163524526&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 18:00:00+00 │ -0.41260101365496504&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 17:59:00+00 │  -0.4391628750910588&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        400 │ 2020-08-01 17:59:00+00 │    7.445849602151508&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        200 │ 2020-08-01 17:59:00+00 │   1.7399359608515874&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        404 │ 2020-08-01 17:59:00+00 │ -0.38531664163524526&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 17:58:00+00 │  -0.4391628750910588&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        404 │ 2020-08-01 17:58:00+00 │ -0.38531664163524526&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        200 │ 2020-08-01 17:58:00+00 │   1.6925903990967166&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        400 │ 2020-08-01 17:58:00+00 │    4.838594613958412&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        404 │ 2020-08-01 17:57:00+00 │ -0.38531664163524526&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        400 │ 2020-08-01 17:57:00+00 │ -0.32757065425956844&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 17:57:00+00 │      2.2397306629644&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        200 │ 2020-08-01 17:57:00+00 │   1.5382691050147506&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        200 │ 2020-08-01 17:56:00+00 │   1.6427718293547886&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        404 │ 2020-08-01 17:56:00+00 │ -0.41260101365496504&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        400 │ 2020-08-01 17:56:00+00 │     2.75460015502278&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 17:56:00+00 │ -0.41260101365496504&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We now have z-scores for every row, and we can try to identify anomalies:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;23&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;k&quot;&gt;WITH&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;calculations_over_window&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;AVG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;OVER&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status_window&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mean_entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;STDDEV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;OVER&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status_window&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stddev_entries&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;server_log_summary&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;WINDOW&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status_window&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;PARTITION&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;ROWS&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BETWEEN&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;PRECEDING&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;CURRENT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ROW&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;with_zscore&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
       &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mean_entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULLIF&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stddev_entries&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;zscore&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;calculations_over_window&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;with_alert&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;

   &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
       &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;hll&quot;&gt;       &lt;span class=&quot;n&quot;&gt;zscore&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alert&lt;/span&gt;
&lt;/span&gt;   &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;with_zscore&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;zscore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;alert&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;with_alert&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;alert&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DESC&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;LIMIT&lt;/span&gt;
   &lt;span class=&quot;mf&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;go&quot;&gt;status_code │         period         │ entries │       zscore       │ alert&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;────────────┼────────────────────────┼─────────┼────────────────────┼───────&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        400 │ 2020-08-01 18:00:00+00 │      24 │  6.823777205473068 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        400 │ 2020-08-01 17:59:00+00 │      12 │  7.445849602151508 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        400 │ 2020-08-01 17:58:00+00 │       2 │  4.838594613958412 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 17:29:00+00 │       1 │ 3.0027309973793774 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 17:20:00+00 │       1 │ 3.3190952747131184 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 17:18:00+00 │       1 │ 3.7438474117708043 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 17:13:00+00 │       1 │ 3.7438474117708043 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 17:09:00+00 │       1 │  4.360778994930029 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 16:59:00+00 │       1 │ 3.7438474117708043 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        400 │ 2020-08-01 16:29:00+00 │       1 │ 3.0027309973793774 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        404 │ 2020-08-01 16:13:00+00 │       1 │ 3.0027309973793774 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 15:13:00+00 │       1 │ 3.0027309973793774 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 15:11:00+00 │       1 │ 3.0027309973793774 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 14:58:00+00 │       1 │ 3.0027309973793774 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        400 │ 2020-08-01 14:56:00+00 │       1 │ 3.0027309973793774 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        400 │ 2020-08-01 14:55:00+00 │       1 │ 3.3190952747131184 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        400 │ 2020-08-01 14:50:00+00 │       1 │ 3.3190952747131184 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 14:37:00+00 │       1 │ 3.0027309973793774 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        400 │ 2020-08-01 14:35:00+00 │       1 │ 3.3190952747131184 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        400 │ 2020-08-01 14:32:00+00 │       1 │ 3.3190952747131184 │ t&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We decided to classify values with z-score greater than 3 as anomalies. 3 is usually the magic number you’ll see in textbooks, but don’t get sentimental about it because you can definitely change it to get better results.&lt;/p&gt;
&lt;h3 id=&quot;adding-thresholds&quot;&gt;&lt;a class=&quot;toclink&quot; href=&quot;https://hakibenita.com/sql-anomaly-detection#adding-thresholds&quot;&gt;Adding Thresholds&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;In the last query we detected a large number of &quot;anomalies&quot; with just one entry. This is very common in errors that don't happen very often. In our case, every once in a while we get a 400 status code, but because it doesn't happen very often, the standard deviation is very low so that even a single error can be considered way above the acceptable value.&lt;/p&gt;
&lt;p&gt;We don't really want to receive an alert in the middle of the night just because of one 400 status code. We can't have every curious developer fiddling with the devtools in his browser wake us up in the middle of the night.&lt;/p&gt;
&lt;p&gt;To eliminate rows with only a few entries we set a threshold:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;23&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;k&quot;&gt;WITH&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;calculations_over_window&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;AVG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;OVER&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status_window&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mean_entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;STDDEV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;OVER&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status_window&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stddev_entries&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;server_log_summary&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;WINDOW&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status_window&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;PARTITION&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;ROWS&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BETWEEN&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;PRECEDING&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;CURRENT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ROW&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;with_zscore&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
       &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mean_entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULLIF&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stddev_entries&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;zscore&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;calculations_over_window&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;with_alert&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;

   &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
       &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;hll&quot;&gt;       &lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;zscore&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alert&lt;/span&gt;
&lt;/span&gt;   &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;with_zscore&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;zscore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;alert&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;with_alert&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;alert&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DESC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;go&quot;&gt;status_code │         period         │ entries │       zscore       │ alert&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;────────────┼────────────────────────┼─────────┼────────────────────┼───────&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        400 │ 2020-08-01 18:00:00+00 │      24 │  6.823777205473068 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        400 │ 2020-08-01 17:59:00+00 │      12 │  7.445849602151508 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 11:29:00+00 │    5001 │  3.172198441961645 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 11:28:00+00 │    4812 │ 3.3971646910263917 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 11:27:00+00 │    4443 │ 3.5349400089601586 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 11:26:00+00 │    4522 │ 4.1264785335553595 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 11:25:00+00 │    5567 │   6.17629336121081 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 11:24:00+00 │    3657 │ 6.8689992361141154 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 11:23:00+00 │    1512 │  6.342260662589681 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 11:22:00+00 │    1022 │  7.682189672504754 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        404 │ 2020-08-01 07:20:00+00 │      23 │  5.142126410098476 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        404 │ 2020-08-01 07:19:00+00 │      20 │  6.091200697920824 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        404 │ 2020-08-01 07:18:00+00 │      15 │   7.57547172423804 │ t&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;After eliminating potential anomalies with less than 10 entries we get much fewer, and probably more relevant results.&lt;/p&gt;
&lt;h3 id=&quot;eliminating-repeating-alerts&quot;&gt;&lt;a class=&quot;toclink&quot; href=&quot;https://hakibenita.com/sql-anomaly-detection#eliminating-repeating-alerts&quot;&gt;Eliminating Repeating Alerts&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;In the previous section we eliminated potential anomalies with less than 10 entries. Using thresholds we were able to remove some non interesting anomalies.&lt;/p&gt;
&lt;p&gt;Let's have a look at the data for status code 400 after applying the threshold:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;10&quot;&gt;
&lt;pre&gt;
status_code │         period         │ entries │       zscore       │ alert
────────────┼────────────────────────┼─────────┼────────────────────┼───────
        400 │ 2020-08-01 18:00:00+00 │      24 │  6.823777205473068 │ t
        400 │ 2020-08-01 17:59:00+00 │      12 │  7.445849602151508 │ t
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The first alert happened in 17:59, and a minute later the z-score was still high with a large number of entries and so we classified the next rows at 18:00 as an anomaly as well.&lt;/p&gt;
&lt;p&gt;If you think of an alerting system, we want to send an alert only when an anomaly first happens. We don't want to send an alert every minute until the z-score comes back below the threshold. In this case, we only want to send one alert at 17:59. We don't want to send &lt;em&gt;another&lt;/em&gt; alert a minute later at 18:00.&lt;/p&gt;
&lt;p&gt;Let's remove alerts where the previous period was also classified as an alert:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;25&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;k&quot;&gt;WITH&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;calculations_over_window&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;AVG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;OVER&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status_window&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mean_entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;STDDEV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;OVER&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status_window&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stddev_entries&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;server_log_summary&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;WINDOW&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status_window&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;PARTITION&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;ROWS&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BETWEEN&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;PRECEDING&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;CURRENT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ROW&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;with_zscore&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
       &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mean_entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULLIF&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stddev_entries&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;zscore&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;calculations_over_window&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;with_alert&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;

   &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
       &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;zscore&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alert&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;with_zscore&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;with_previous_alert&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
       &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;hll&quot;&gt;       &lt;span class=&quot;n&quot;&gt;LAG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;OVER&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;PARTITION&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;previous_alert&lt;/span&gt;
&lt;/span&gt;   &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;with_alert&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;zscore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;alert&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;with_previous_alert&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt;
&lt;span class=&quot;hll&quot;&gt;   &lt;span class=&quot;n&quot;&gt;alert&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;previous_alert&lt;/span&gt;
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DESC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;go&quot;&gt;status_code │         period         │ entries │      zscore       │ alert&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;────────────┼────────────────────────┼─────────┼───────────────────┼───────&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        400 │ 2020-08-01 17:59:00+00 │      12 │ 7.445849602151508 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        500 │ 2020-08-01 11:22:00+00 │    1022 │ 7.682189672504754 │ t&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;        404 │ 2020-08-01 07:18:00+00 │      15 │  7.57547172423804 │ t&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;By eliminating alerts that were already triggered we get a very small list of anomalies that may have happened during the day. Looking at the results we can see what anomalies we would have discovered:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Anomaly in status code 400 at 17:59: we also found that one earlier.&lt;/li&gt;
&lt;/ul&gt;&lt;img alt=&quot;Anomaly in status code 400&quot; src=&quot;https://hakibenita.com/images/00-sql-anomaly-detection-400.png&quot;/&gt;Anomaly in status code 400
&lt;ul&gt;&lt;li&gt;Anomaly in status code 500: we spotted this one on the chart when we started.&lt;/li&gt;
&lt;/ul&gt;&lt;img alt=&quot;Anomaly in status code 500&quot; src=&quot;https://hakibenita.com/images/00-sql-anomaly-detection-500.png&quot;/&gt;Anomaly in status code 500
&lt;ul&gt;&lt;li&gt;Anomaly in status code 404: this is a hidden hidden anomaly which we did not know about until now.&lt;/li&gt;
&lt;/ul&gt;&lt;img alt=&quot;A hidden anomaly in status code 404&quot; src=&quot;https://hakibenita.com/images/00-sql-anomaly-detection-404.png&quot;/&gt;A hidden anomaly in status code 404
&lt;p&gt;The query can now be used to fire alerts when it encounters an anomaly.&lt;/p&gt;
&lt;h3 id=&quot;experiment-with-different-values&quot;&gt;&lt;a class=&quot;toclink&quot; href=&quot;https://hakibenita.com/sql-anomaly-detection#experiment-with-different-values&quot;&gt;Experiment With Different Values&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;In the process so far we’ve used several constants in our calculations:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;Lookback period&lt;/strong&gt;: How far back we calculate the mean and standard deviation for each status code. The value we used is 60 minutes.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Entries Threshold&lt;/strong&gt;: The least amount of entries we want to get an alert for. The value we used is 10.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Z-Score Threshold&lt;/strong&gt;: The z-score after which we classify the value as an anomaly. The value we used is 6.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Now that we have a working query to backtest, we can experiment with different values.&lt;/p&gt;
&lt;img alt=&quot;Experimenting with parameter values&quot; src=&quot;https://hakibenita.com/images/00-sql-anomaly-detection-parameters.png&quot;/&gt;Experimenting with parameter values
&lt;p&gt;This is a chart showing the alerts our system identified in the past 12 hours:&lt;/p&gt;
&lt;img alt=&quot;Backtesting with default parameters. &amp;lt;a href=&amp;quot;https://popsql.com/queries/-MECQV6GiKr04WdCWM0K/simple-anomaly-detection-with-sql?access_token=2d2c0729f9a1cfa7b6a2dbb5b0adb45c&amp;quot;&amp;gt;View in editor&amp;lt;/a&amp;gt;&quot; src=&quot;https://hakibenita.com/images/00-sql-anomaly-detection-backtest-10-3-60.png&quot;/&gt;Backtesting with default parameters. &lt;a href=&quot;https://popsql.com/queries/-MECQV6GiKr04WdCWM0K/simple-anomaly-detection-with-sql?access_token=2d2c0729f9a1cfa7b6a2dbb5b0adb45c&quot;&gt;View in editor&lt;/a&gt;
&lt;p&gt;To get a sense of each parameter, let's adjust the values and see how it affects the number and quality of alerts we get.&lt;/p&gt;
&lt;p&gt;If we decrease the value of the z-score threshold from 3 to 1, we should get more alerts. With a lower threshold, more values are likely to be considered an anomaly:&lt;/p&gt;
&lt;img alt=&quot;Backtesting with lower z-score threshold&quot; src=&quot;https://hakibenita.com/images/00-sql-anomaly-detection-backtest-10-1-60.png&quot;/&gt;Backtesting with lower z-score threshold
&lt;p&gt;If we increase the entries threshold from 10 to 30, we should get less alerts:&lt;/p&gt;
&lt;img alt=&quot;Backtesting with higher entries threshold&quot; src=&quot;https://hakibenita.com/images/00-sql-anomaly-detection-backtest-30-3-60.png&quot;/&gt;Backtesting with higher entries threshold
&lt;p&gt;If we increase the backtest period from 60 minutes to 360 minutes, we get more alerts:&lt;/p&gt;
&lt;img alt=&quot;Backtesting with higher entries threshold&quot; src=&quot;https://hakibenita.com/images/00-sql-anomaly-detection-backtest-30-3-360.png&quot;/&gt;Backtesting with higher entries threshold
&lt;p&gt;A good alerting system is a system that produces true alerts, at a reasonable time. Using the backtesting query you can experiment with different values that produces quality alerts you can act on.&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;Using a z-score for detecting anomalies is an easy way to get started with anomaly detection and see results right away. But, this method is not always the best choice, and if you don't get good alerts using this method, there are some improvements and other methods you can try using just SQL.&lt;/p&gt;
&lt;h3 id=&quot;use-weighted-mean&quot;&gt;&lt;a class=&quot;toclink&quot; href=&quot;https://hakibenita.com/sql-anomaly-detection#use-weighted-mean&quot;&gt;Use Weighted Mean&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Our system uses a mean to determine a reasonable value, and a lookback period to determine how long back to calculate that mean over. In our case, we calculated the mean based on data from 1 hour ago.&lt;/p&gt;
&lt;p&gt;Using this method of calculating mean gives the same weight to entries that happened 1 hour ago and to entries that just happened. If you give more weight to recent entries at the expense of previous entries, the new weighted mean should become more sensitive to recent entries, and you may be able to identify anomalies quicker.&lt;/p&gt;
&lt;p&gt;To give more weight to recent entries, you can use a &lt;a href=&quot;https://en.wikipedia.org/wiki/Weighted_arithmetic_mean&quot; rel=&quot;noopener&quot;&gt;weighted average&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;12&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;avg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mean&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;entries&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;extract&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'seconds'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'2020-08-01 17:00 UTC'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;timestamptz&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;61&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weighted_mean&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;server_log_summary&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt;
   &lt;span class=&quot;c1&quot;&gt;-- Last 60 periods&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;period&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'2020-08-01 17:00 UTC'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;timestamptz&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;GROUP&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;BY&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;status_code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;go&quot;&gt; status_code │          mean          │    weighted_mean&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;─────────────┼────────────────────────┼─────────────────────&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;         404 │ 0.13333333333333333333 │ 0.26229508196721313&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;         500 │ 0.15000000000000000000 │ 0.29508196721311475&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;         200 │  2779.1000000000000000 │   5467.081967213115&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;         400 │ 0.73333333333333333333 │  1.4426229508196722&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In the results you can see the difference between the mean and the weighted mean for each status code.&lt;/p&gt;
&lt;p&gt;A weighted average is a very &lt;a href=&quot;https://www.investopedia.com/ask/answers/071414/whats-difference-between-moving-average-and-weighted-moving-average.asp&quot; rel=&quot;noopener&quot;&gt;common indicator used by stock traders&lt;/a&gt;. We used a linear weighted average, but there are also exponential weighted averages and others you can try.&lt;/p&gt;
&lt;h3 id=&quot;use-median&quot;&gt;&lt;a class=&quot;toclink&quot; href=&quot;https://hakibenita.com/sql-anomaly-detection#use-median&quot;&gt;Use Median&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;In statistics, a mean is considered not robust because it is influenced by extreme values. Given our use case, the measure we are using to identify extreme values, is affected by those values we are trying to identify.&lt;/p&gt;
&lt;p&gt;For example, in the beginning of the article we used this series of values:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;15&quot;&gt;
&lt;pre&gt;
2, 3, 5, 2, 3, 12, 5, 3, 4
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The mean of this series is 4.33, and we detected 12 as an anomaly.&lt;/p&gt;
&lt;p&gt;If the 12 were a 120, the mean of the series would have been 16.33. Hence, our &quot;reasonable&quot; value is heavily affected by the values it is supposed to identify.&lt;/p&gt;
&lt;p&gt;A measure that is considered more robust is a &lt;a href=&quot;https://en.wikipedia.org/wiki/Median&quot; rel=&quot;noopener&quot;&gt;median&lt;/a&gt;. The median of a series is the value that half the series is greater than, and half the series is less than:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;16&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;percentile_disc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;within&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;order&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;by&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;unnest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;ARRAY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;120&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;go&quot;&gt; median&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;────────&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;      3&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To calculate the median in PostgreSQL we use the function &lt;a href=&quot;https://www.postgresql.org/docs/current/functions-aggregate.html#FUNCTIONS-ORDEREDSET-TABLE&quot; rel=&quot;noopener&quot;&gt;&lt;code&gt;percentile_disc&lt;/code&gt;&lt;/a&gt;. In the series above, the median is 3. If we sort the list and cut it in the middle it will become more clear:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;14&quot;&gt;
&lt;pre&gt;
2, 2, 3, 3, 3
4, 5, 5, 12
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If we change the value of 12 to 120, the median will not be affected at all:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;14&quot;&gt;
&lt;pre&gt;
2, 2, 3, 3, 3
4, 5, 5, 120
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is why a median is considered more robust than mean.&lt;/p&gt;
&lt;h3 id=&quot;use-mad&quot;&gt;&lt;a class=&quot;toclink&quot; href=&quot;https://hakibenita.com/sql-anomaly-detection#use-mad&quot;&gt;Use MAD&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Median_absolute_deviation&quot; rel=&quot;noopener&quot;&gt;Median absolute deviation (MAD)&lt;/a&gt; is another way of finding anomalies in a series. MAD is considered better than z-score for real life data.&lt;/p&gt;
&lt;p&gt;MAD is calculated by finding the median of the deviations from the series median. Just for comparison, the standard deviation is the root square of the average square distance from the mean.&lt;/p&gt;
&lt;h3 id=&quot;use-different-measures&quot;&gt;&lt;a class=&quot;toclink&quot; href=&quot;https://hakibenita.com/sql-anomaly-detection#use-different-measures&quot;&gt;Use Different Measures&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;We used the number of entries per minute as an indicator. However, depending on the use case, there might be other things you can measure that can yield better results. For example:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;To try and identify DOS attacks you can monitor the ratio between unique IP addresses to HTTP requests.&lt;/li&gt;
&lt;li&gt;To reduce the amount of false positives, you can normalize the number of responses to the proportion of the total responses. This way, for example, if you're using a flaky remote service that fails once after every certain amount of requests, using the proportion may not trigger an alert when the increase in errors correlates with an increase in overall traffic.&lt;/li&gt;
&lt;/ul&gt;&lt;hr/&gt;
&lt;p&gt;The method presented above is a very simple method to detect anomalies and produce actionable alerts that can potentially save you a lot of grief. There are many tools out there that provide similar functionally, but they require either tight integration or $$$. The main appeal of this approach is that you can get started with tools you probably already have, some SQL and a scheduled task!&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;&lt;strong&gt;UPDATE:&lt;/strong&gt; many readers asked me how I created the charts in this article... well, I used &lt;a href=&quot;https://popsql.com&quot; rel=&quot;noopener&quot;&gt;PopSQL&lt;/a&gt;. It’s a new modern SQL editor focused on collaborative editing. If you're in the market for one, go check it out...&lt;/p&gt;
</description>
<pubDate>Mon, 11 Jan 2021 16:56:25 +0000</pubDate>
<dc:creator>harporoeder</dc:creator>
<og:type>article</og:type>
<og:title>Simple Anomaly Detection Using Plain SQL</og:title>
<og:description>Identify Problems Before They Become Disasters</og:description>
<og:url>https://hakibenita.com/sql-anomaly-detection</og:url>
<og:image>https://hakibenita.com/images/00-sql-anomaly-detection-backtest-30-3-360.png</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://hakibenita.com/sql-anomaly-detection</dc:identifier>
</item>
<item>
<title>Tell HN: Aaron Swartz died today, 8 years ago</title>
<link>https://news.ycombinator.com/item?id=25731566</link>
<guid isPermaLink="true" >https://news.ycombinator.com/item?id=25731566</guid>
<description>&lt;tr readability=&quot;0.58823529411765&quot;&gt;&lt;td bgcolor=&quot;#FF6600&quot;&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr id=&quot;pagespace&quot; title=&quot;Tell HN: Aaron Swartz died today, 8 years ago&quot;&gt;&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;10.847619047619&quot;&gt;&lt;td&gt;
&lt;table class=&quot;fatitem&quot; border=&quot;0&quot; readability=&quot;6.7&quot;&gt;&lt;tr class=&quot;athing&quot; id=&quot;25731566&quot; readability=&quot;0&quot;&gt;&lt;td align=&quot;right&quot; valign=&quot;top&quot; class=&quot;title&quot;/&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;title&quot;&gt;&lt;a href=&quot;https://news.ycombinator.com/item?id=25731566&quot; class=&quot;storylink&quot;&gt;Tell HN: Aaron Swartz died today, 8 years ago&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;0.7012987012987&quot;&gt;&lt;td colspan=&quot;2&quot;/&gt;
&lt;td class=&quot;subtext&quot;&gt;&lt;span class=&quot;score&quot; id=&quot;score_25731566&quot;&gt;804 points&lt;/span&gt; by &lt;a href=&quot;https://news.ycombinator.com/user?id=ignoramous&quot; class=&quot;hnuser&quot;&gt;ignoramous&lt;/a&gt; &lt;span class=&quot;age&quot;&gt;&lt;a href=&quot;https://news.ycombinator.com/item?id=25731566&quot;&gt;8 hours ago&lt;/a&gt;&lt;/span&gt; &lt;span id=&quot;unv_25731566&quot;/&gt; | &lt;a href=&quot;https://news.ycombinator.com/hide?id=25731566&amp;amp;goto=item%3Fid%3D25731566&quot;&gt;hide&lt;/a&gt; | &lt;a href=&quot;https://hn.algolia.com/?query=Tell%20HN%3A%20Aaron%20Swartz%20died%20today%2C%208%20years%20ago&amp;amp;sort=byDate&amp;amp;dateRange=all&amp;amp;type=story&amp;amp;storyText=false&amp;amp;prefix&amp;amp;page=0&quot; class=&quot;hnpast&quot;&gt;past&lt;/a&gt; | &lt;a href=&quot;https://news.ycombinator.com/fave?id=25731566&amp;amp;auth=553a73971bd88ced7400765823b84ee426cb3571&quot;&gt;favorite&lt;/a&gt; | &lt;a href=&quot;https://news.ycombinator.com/item?id=25731566&quot;&gt;162 comments&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;15.48023715415&quot;&gt;&lt;td colspan=&quot;2&quot;/&gt;
&lt;td readability=&quot;9.5830039525692&quot;&gt;&quot;Aaron is dead. Wanderers in this crazy world, we have lost a mentor, a wise elder. Hackers for right, we are one down, we have lost one of our own. Nurturers, carers, listeners, feeders, parents all, we have lost a child. Let us all weep.&quot; - Tim Berners Lee.
&lt;p&gt;Thank you for everything, Aaron.&lt;/p&gt;
&lt;p&gt;--&lt;/p&gt;
&lt;p&gt;Discussions at the time:&lt;/p&gt;
&lt;p&gt;1. &lt;a href=&quot;https://news.ycombinator.com/item?id=5046845&quot; rel=&quot;nofollow&quot;&gt;https://news.ycombinator.com/item?id=5046845&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;2. &lt;a href=&quot;https://news.ycombinator.com/item?id=5048820&quot; rel=&quot;nofollow&quot;&gt;https://news.ycombinator.com/item?id=5048820&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Blog post in 2016 by Noah, Aaron's brother: &lt;a href=&quot;https://news.ycombinator.com/item?id=10881413&quot; rel=&quot;nofollow&quot;&gt;https://news.ycombinator.com/item?id=10881413&lt;/a&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td colspan=&quot;2&quot;/&gt;
&lt;td&gt;

&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;0.71604938271605&quot;&gt;&lt;td&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;10&quot; width=&quot;0&quot;/&gt;&lt;br/&gt;&lt;center&gt;&lt;span class=&quot;yclinks&quot;&gt;&lt;a href=&quot;https://news.ycombinator.com/newsguidelines.html&quot;&gt;Guidelines&lt;/a&gt; | &lt;a href=&quot;https://news.ycombinator.com/newsfaq.html&quot;&gt;FAQ&lt;/a&gt; | &lt;a href=&quot;https://news.ycombinator.com/lists&quot;&gt;Lists&lt;/a&gt; | &lt;a href=&quot;https://github.com/HackerNews/API&quot;&gt;API&lt;/a&gt; | &lt;a href=&quot;https://news.ycombinator.com/security.html&quot;&gt;Security&lt;/a&gt; | &lt;a href=&quot;http://www.ycombinator.com/legal/&quot;&gt;Legal&lt;/a&gt; | &lt;a href=&quot;http://www.ycombinator.com/apply/&quot;&gt;Apply to YC&lt;/a&gt; | &lt;a href=&quot;mailto:hn@ycombinator.com&quot;&gt;Contact&lt;/a&gt;&lt;/span&gt;
&lt;/center&gt;
&lt;/td&gt;
&lt;/tr&gt;</description>
<pubDate>Mon, 11 Jan 2021 16:48:49 +0000</pubDate>
<dc:creator>ignoramous</dc:creator>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://news.ycombinator.com/item?id=25731566</dc:identifier>
</item>
</channel>
</rss>