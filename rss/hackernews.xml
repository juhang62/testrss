<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=hnrss.org%2Fnewest%3Fpoints%3D200&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://hnrss.org/newest?points=200" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>Hacker News: Newest</title>
<link>https://news.ycombinator.com/newest</link>
<description>Hacker News RSS</description>
<item>
<title>Please do not attempt to simplify this code</title>
<link>https://github.com/kubernetes/kubernetes/blob/ec2e767e59395376fa191d7c56a74f53936b7653/pkg/controller/volume/persistentvolume/pv_controller.go</link>
<guid isPermaLink="true" >https://github.com/kubernetes/kubernetes/blob/ec2e767e59395376fa191d7c56a74f53936b7653/pkg/controller/volume/persistentvolume/pv_controller.go</guid>
<description>&lt;tr&gt;&lt;td id=&quot;L1&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1&quot;/&gt;
&lt;td id=&quot;LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;/*&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L2&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;2&quot;/&gt;
&lt;td id=&quot;LC2&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;Copyright 2016 The Kubernetes Authors.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L3&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;3&quot;/&gt;
&lt;td id=&quot;LC3&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L4&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;4&quot;/&gt;
&lt;td id=&quot;LC4&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L5&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;5&quot;/&gt;
&lt;td id=&quot;LC5&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;you may not use this file except in compliance with the License.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L6&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;6&quot;/&gt;
&lt;td id=&quot;LC6&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;You may obtain a copy of the License at&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L7&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;7&quot;/&gt;
&lt;td id=&quot;LC7&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L8&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;8&quot;/&gt;
&lt;td id=&quot;LC8&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L9&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;9&quot;/&gt;
&lt;td id=&quot;LC9&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L10&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;10&quot;/&gt;
&lt;td id=&quot;LC10&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;Unless required by applicable law or agreed to in writing, software&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L11&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;11&quot;/&gt;
&lt;td id=&quot;LC11&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L12&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;12&quot;/&gt;
&lt;td id=&quot;LC12&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L13&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;13&quot;/&gt;
&lt;td id=&quot;LC13&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;See the License for the specific language governing permissions and&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L14&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;14&quot;/&gt;
&lt;td id=&quot;LC14&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;limitations under the License.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L15&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;15&quot;/&gt;
&lt;td id=&quot;LC15&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;*/&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L16&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;16&quot;/&gt;
&lt;td id=&quot;LC16&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L17&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;17&quot;/&gt;
&lt;td id=&quot;LC17&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;package&lt;/span&gt; persistentvolume&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L18&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;18&quot;/&gt;
&lt;td id=&quot;LC18&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L19&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;19&quot;/&gt;
&lt;td id=&quot;LC19&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;import&lt;/span&gt; (&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L20&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;20&quot;/&gt;
&lt;td id=&quot;LC20&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;fmt&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L21&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;21&quot;/&gt;
&lt;td id=&quot;LC21&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;reflect&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L22&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;22&quot;/&gt;
&lt;td id=&quot;LC22&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;strings&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L23&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;23&quot;/&gt;
&lt;td id=&quot;LC23&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;time&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L24&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;24&quot;/&gt;
&lt;td id=&quot;LC24&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L25&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;25&quot;/&gt;
&lt;td id=&quot;LC25&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;k8s.io/api/core/v1&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L26&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;26&quot;/&gt;
&lt;td id=&quot;LC26&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;storage &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;k8s.io/api/storage/v1&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L27&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;27&quot;/&gt;
&lt;td id=&quot;LC27&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;apierrs &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;k8s.io/apimachinery/pkg/api/errors&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L28&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;28&quot;/&gt;
&lt;td id=&quot;LC28&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;metav1 &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;k8s.io/apimachinery/pkg/apis/meta/v1&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L29&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;29&quot;/&gt;
&lt;td id=&quot;LC29&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;k8s.io/apimachinery/pkg/labels&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L30&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;30&quot;/&gt;
&lt;td id=&quot;LC30&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;k8s.io/apimachinery/pkg/util/sets&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L31&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;31&quot;/&gt;
&lt;td id=&quot;LC31&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;utilfeature &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;k8s.io/apiserver/pkg/util/feature&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L32&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;32&quot;/&gt;
&lt;td id=&quot;LC32&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;clientset &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;k8s.io/client-go/kubernetes&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L33&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;33&quot;/&gt;
&lt;td id=&quot;LC33&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;k8s.io/client-go/kubernetes/scheme&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L34&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;34&quot;/&gt;
&lt;td id=&quot;LC34&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;corelisters &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;k8s.io/client-go/listers/core/v1&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L35&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;35&quot;/&gt;
&lt;td id=&quot;LC35&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;storagelisters &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;k8s.io/client-go/listers/storage/v1&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L36&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;36&quot;/&gt;
&lt;td id=&quot;LC36&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;k8s.io/client-go/tools/cache&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L37&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;37&quot;/&gt;
&lt;td id=&quot;LC37&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;k8s.io/client-go/tools/record&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L38&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;38&quot;/&gt;
&lt;td id=&quot;LC38&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ref &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;k8s.io/client-go/tools/reference&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L39&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;39&quot;/&gt;
&lt;td id=&quot;LC39&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;k8s.io/client-go/util/workqueue&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L40&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;40&quot;/&gt;
&lt;td id=&quot;LC40&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;cloudprovider &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;k8s.io/cloud-provider&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L41&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;41&quot;/&gt;
&lt;td id=&quot;LC41&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;v1helper &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;k8s.io/kubernetes/pkg/apis/core/v1/helper&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L42&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;42&quot;/&gt;
&lt;td id=&quot;LC42&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;k8s.io/kubernetes/pkg/controller/volume/events&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L43&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;43&quot;/&gt;
&lt;td id=&quot;LC43&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;k8s.io/kubernetes/pkg/controller/volume/persistentvolume/metrics&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L44&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;44&quot;/&gt;
&lt;td id=&quot;LC44&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;k8s.io/kubernetes/pkg/features&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L45&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;45&quot;/&gt;
&lt;td id=&quot;LC45&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;k8s.io/kubernetes/pkg/util/goroutinemap&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L46&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;46&quot;/&gt;
&lt;td id=&quot;LC46&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;k8s.io/kubernetes/pkg/util/goroutinemap/exponentialbackoff&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L47&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;47&quot;/&gt;
&lt;td id=&quot;LC47&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;vol &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;k8s.io/kubernetes/pkg/volume&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L48&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;48&quot;/&gt;
&lt;td id=&quot;LC48&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;k8s.io/kubernetes/pkg/volume/util&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L49&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;49&quot;/&gt;
&lt;td id=&quot;LC49&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;k8s.io/kubernetes/pkg/volume/util/recyclerclient&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L50&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;50&quot;/&gt;
&lt;td id=&quot;LC50&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L51&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;51&quot;/&gt;
&lt;td id=&quot;LC51&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;k8s.io/klog&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L52&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;52&quot;/&gt;
&lt;td id=&quot;LC52&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L53&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;53&quot;/&gt;
&lt;td id=&quot;LC53&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L54&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;54&quot;/&gt;
&lt;td id=&quot;LC54&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; ==================================================================&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L55&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;55&quot;/&gt;
&lt;td id=&quot;LC55&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; PLEASE DO NOT ATTEMPT TO SIMPLIFY THIS CODE.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L56&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;56&quot;/&gt;
&lt;td id=&quot;LC56&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; KEEP THE SPACE SHUTTLE FLYING.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L57&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;57&quot;/&gt;
&lt;td id=&quot;LC57&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; ==================================================================&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L58&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;58&quot;/&gt;
&lt;td id=&quot;LC58&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L59&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;59&quot;/&gt;
&lt;td id=&quot;LC59&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; This controller is intentionally written in a very verbose style. You will&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L60&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;60&quot;/&gt;
&lt;td id=&quot;LC60&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; notice:&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L61&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;61&quot;/&gt;
&lt;td id=&quot;LC61&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L62&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;62&quot;/&gt;
&lt;td id=&quot;LC62&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; 1. Every 'if' statement has a matching 'else' (exception: simple error&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L63&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;63&quot;/&gt;
&lt;td id=&quot;LC63&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; checks for a client API call)&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L64&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;64&quot;/&gt;
&lt;td id=&quot;LC64&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; 2. Things that may seem obvious are commented explicitly&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L65&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;65&quot;/&gt;
&lt;td id=&quot;LC65&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L66&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;66&quot;/&gt;
&lt;td id=&quot;LC66&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; We call this style 'space shuttle style'. Space shuttle style is meant to&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L67&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;67&quot;/&gt;
&lt;td id=&quot;LC67&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; ensure that every branch and condition is considered and accounted for -&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L68&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;68&quot;/&gt;
&lt;td id=&quot;LC68&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; the same way code is written at NASA for applications like the space&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L69&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;69&quot;/&gt;
&lt;td id=&quot;LC69&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; shuttle.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L70&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;70&quot;/&gt;
&lt;td id=&quot;LC70&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L71&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;71&quot;/&gt;
&lt;td id=&quot;LC71&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Originally, the work of this controller was split amongst three&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L72&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;72&quot;/&gt;
&lt;td id=&quot;LC72&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; controllers. This controller is the result a large effort to simplify the&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L73&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;73&quot;/&gt;
&lt;td id=&quot;LC73&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; PV subsystem. During that effort, it became clear that we needed to ensure&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L74&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;74&quot;/&gt;
&lt;td id=&quot;LC74&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; that every single condition was handled and accounted for in the code, even&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L75&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;75&quot;/&gt;
&lt;td id=&quot;LC75&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; if it resulted in no-op code branches.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L76&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;76&quot;/&gt;
&lt;td id=&quot;LC76&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L77&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;77&quot;/&gt;
&lt;td id=&quot;LC77&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; As a result, the controller code may seem overly verbose, commented, and&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L78&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;78&quot;/&gt;
&lt;td id=&quot;LC78&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; 'branchy'. However, a large amount of business knowledge and context is&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L79&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;79&quot;/&gt;
&lt;td id=&quot;LC79&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; recorded here in order to ensure that future maintainers can correctly&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L80&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;80&quot;/&gt;
&lt;td id=&quot;LC80&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; reason through the complexities of the binding behavior. For that reason,&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L81&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;81&quot;/&gt;
&lt;td id=&quot;LC81&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; changes to this file should preserve and add to the space shuttle style.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L82&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;82&quot;/&gt;
&lt;td id=&quot;LC82&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L83&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;83&quot;/&gt;
&lt;td id=&quot;LC83&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; ==================================================================&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L84&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;84&quot;/&gt;
&lt;td id=&quot;LC84&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; PLEASE DO NOT ATTEMPT TO SIMPLIFY THIS CODE.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L85&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;85&quot;/&gt;
&lt;td id=&quot;LC85&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; KEEP THE SPACE SHUTTLE FLYING.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L86&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;86&quot;/&gt;
&lt;td id=&quot;LC86&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; ==================================================================&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L87&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;87&quot;/&gt;
&lt;td id=&quot;LC87&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L88&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;88&quot;/&gt;
&lt;td id=&quot;LC88&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Design:&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L89&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;89&quot;/&gt;
&lt;td id=&quot;LC89&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L90&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;90&quot;/&gt;
&lt;td id=&quot;LC90&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; The fundamental key to this design is the bi-directional &quot;pointer&quot; between&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L91&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;91&quot;/&gt;
&lt;td id=&quot;LC91&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; PersistentVolumes (PVs) and PersistentVolumeClaims (PVCs), which is&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L92&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;92&quot;/&gt;
&lt;td id=&quot;LC92&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; represented here as pvc.Spec.VolumeName and pv.Spec.ClaimRef. The bi-&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L93&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;93&quot;/&gt;
&lt;td id=&quot;LC93&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; directionality is complicated to manage in a transactionless system, but&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L94&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;94&quot;/&gt;
&lt;td id=&quot;LC94&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; without it we can't ensure sane behavior in the face of different forms of&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L95&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;95&quot;/&gt;
&lt;td id=&quot;LC95&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; trouble. For example, a rogue HA controller instance could end up racing&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L96&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;96&quot;/&gt;
&lt;td id=&quot;LC96&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; and making multiple bindings that are indistinguishable, resulting in&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L97&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;97&quot;/&gt;
&lt;td id=&quot;LC97&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; potential data loss.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L98&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;98&quot;/&gt;
&lt;td id=&quot;LC98&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L99&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;99&quot;/&gt;
&lt;td id=&quot;LC99&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; This controller is designed to work in active-passive high availability&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L100&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;100&quot;/&gt;
&lt;td id=&quot;LC100&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; mode. It *could* work also in active-active HA mode, all the object&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L101&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;101&quot;/&gt;
&lt;td id=&quot;LC101&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; transitions are designed to cope with this, however performance could be&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L102&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;102&quot;/&gt;
&lt;td id=&quot;LC102&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; lower as these two active controllers will step on each other toes&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L103&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;103&quot;/&gt;
&lt;td id=&quot;LC103&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; frequently.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L104&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;104&quot;/&gt;
&lt;td id=&quot;LC104&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L105&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;105&quot;/&gt;
&lt;td id=&quot;LC105&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; This controller supports pre-bound (by the creator) objects in both&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L106&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;106&quot;/&gt;
&lt;td id=&quot;LC106&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; directions: a PVC that wants a specific PV or a PV that is reserved for a&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L107&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;107&quot;/&gt;
&lt;td id=&quot;LC107&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; specific PVC.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L108&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;108&quot;/&gt;
&lt;td id=&quot;LC108&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L109&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;109&quot;/&gt;
&lt;td id=&quot;LC109&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; The binding is two-step process. PV.Spec.ClaimRef is modified first and&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L110&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;110&quot;/&gt;
&lt;td id=&quot;LC110&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; PVC.Spec.VolumeName second. At any point of this transaction, the PV or PVC&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L111&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;111&quot;/&gt;
&lt;td id=&quot;LC111&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; can be modified by user or other controller or completely deleted. Also,&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L112&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;112&quot;/&gt;
&lt;td id=&quot;LC112&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; two (or more) controllers may try to bind different volumes to different&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L113&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;113&quot;/&gt;
&lt;td id=&quot;LC113&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; claims at the same time. The controller must recover from any conflicts&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L114&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;114&quot;/&gt;
&lt;td id=&quot;LC114&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; that may arise from these conditions.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L115&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;115&quot;/&gt;
&lt;td id=&quot;LC115&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L116&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;116&quot;/&gt;
&lt;td id=&quot;LC116&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; annBindCompleted annotation applies to PVCs. It indicates that the lifecycle&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L117&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;117&quot;/&gt;
&lt;td id=&quot;LC117&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; of the PVC has passed through the initial setup. This information changes how&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L118&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;118&quot;/&gt;
&lt;td id=&quot;LC118&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; we interpret some observations of the state of the objects. Value of this&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L119&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;119&quot;/&gt;
&lt;td id=&quot;LC119&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; annotation does not matter.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L120&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;120&quot;/&gt;
&lt;td id=&quot;LC120&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;const&lt;/span&gt; annBindCompleted = &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;pv.kubernetes.io/bind-completed&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L121&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;121&quot;/&gt;
&lt;td id=&quot;LC121&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L122&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;122&quot;/&gt;
&lt;td id=&quot;LC122&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; annBoundByController annotation applies to PVs and PVCs. It indicates that&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L123&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;123&quot;/&gt;
&lt;td id=&quot;LC123&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; the binding (PV-&amp;gt;PVC or PVC-&amp;gt;PV) was installed by the controller. The&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L124&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;124&quot;/&gt;
&lt;td id=&quot;LC124&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; absence of this annotation means the binding was done by the user (i.e.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L125&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;125&quot;/&gt;
&lt;td id=&quot;LC125&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; pre-bound). Value of this annotation does not matter.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L126&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;126&quot;/&gt;
&lt;td id=&quot;LC126&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; External PV binders must bind PV the same way as PV controller, otherwise PV&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L127&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;127&quot;/&gt;
&lt;td id=&quot;LC127&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; controller may not handle it correctly.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L128&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;128&quot;/&gt;
&lt;td id=&quot;LC128&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;const&lt;/span&gt; annBoundByController = &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;pv.kubernetes.io/bound-by-controller&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L129&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;129&quot;/&gt;
&lt;td id=&quot;LC129&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L130&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;130&quot;/&gt;
&lt;td id=&quot;LC130&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; This annotation is added to a PV that has been dynamically provisioned by&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L131&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;131&quot;/&gt;
&lt;td id=&quot;LC131&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Kubernetes. Its value is name of volume plugin that created the volume.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L132&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;132&quot;/&gt;
&lt;td id=&quot;LC132&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; It serves both user (to show where a PV comes from) and Kubernetes (to&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L133&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;133&quot;/&gt;
&lt;td id=&quot;LC133&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; recognize dynamically provisioned PVs in its decisions).&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L134&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;134&quot;/&gt;
&lt;td id=&quot;LC134&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;const&lt;/span&gt; annDynamicallyProvisioned = &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;pv.kubernetes.io/provisioned-by&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L135&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;135&quot;/&gt;
&lt;td id=&quot;LC135&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L136&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;136&quot;/&gt;
&lt;td id=&quot;LC136&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; This annotation is added to a PVC that is supposed to be dynamically&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L137&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;137&quot;/&gt;
&lt;td id=&quot;LC137&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; provisioned. Its value is name of volume plugin that is supposed to provision&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L138&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;138&quot;/&gt;
&lt;td id=&quot;LC138&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; a volume for this PVC.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L139&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;139&quot;/&gt;
&lt;td id=&quot;LC139&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;const&lt;/span&gt; annStorageProvisioner = &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;volume.beta.kubernetes.io/storage-provisioner&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L140&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;140&quot;/&gt;
&lt;td id=&quot;LC140&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L141&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;141&quot;/&gt;
&lt;td id=&quot;LC141&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; This annotation is added to a PVC that has been triggered by scheduler to&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L142&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;142&quot;/&gt;
&lt;td id=&quot;LC142&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; be dynamically provisioned. Its value is the name of the selected node.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L143&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;143&quot;/&gt;
&lt;td id=&quot;LC143&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;const&lt;/span&gt; annSelectedNode = &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;volume.kubernetes.io/selected-node&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L144&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;144&quot;/&gt;
&lt;td id=&quot;LC144&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L145&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;145&quot;/&gt;
&lt;td id=&quot;LC145&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; If the provisioner name in a storage class is set to &quot;kubernetes.io/no-provisioner&quot;,&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L146&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;146&quot;/&gt;
&lt;td id=&quot;LC146&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; then dynamic provisioning is not supported by the storage.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L147&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;147&quot;/&gt;
&lt;td id=&quot;LC147&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;const&lt;/span&gt; notSupportedProvisioner = &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;kubernetes.io/no-provisioner&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L148&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;148&quot;/&gt;
&lt;td id=&quot;LC148&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L149&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;149&quot;/&gt;
&lt;td id=&quot;LC149&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; CloudVolumeCreatedForClaimNamespaceTag is a name of a tag attached to a real volume in cloud (e.g. AWS EBS or GCE PD)&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L150&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;150&quot;/&gt;
&lt;td id=&quot;LC150&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; with namespace of a persistent volume claim used to create this volume.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L151&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;151&quot;/&gt;
&lt;td id=&quot;LC151&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;CloudVolumeCreatedForClaimNamespaceTag&lt;/span&gt; = &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;kubernetes.io/created-for/pvc/namespace&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L152&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;152&quot;/&gt;
&lt;td id=&quot;LC152&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L153&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;153&quot;/&gt;
&lt;td id=&quot;LC153&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; CloudVolumeCreatedForClaimNameTag is a name of a tag attached to a real volume in cloud (e.g. AWS EBS or GCE PD)&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L154&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;154&quot;/&gt;
&lt;td id=&quot;LC154&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; with name of a persistent volume claim used to create this volume.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L155&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;155&quot;/&gt;
&lt;td id=&quot;LC155&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;CloudVolumeCreatedForClaimNameTag&lt;/span&gt; = &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;kubernetes.io/created-for/pvc/name&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L156&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;156&quot;/&gt;
&lt;td id=&quot;LC156&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L157&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;157&quot;/&gt;
&lt;td id=&quot;LC157&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; CloudVolumeCreatedForVolumeNameTag is a name of a tag attached to a real volume in cloud (e.g. AWS EBS or GCE PD)&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L158&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;158&quot;/&gt;
&lt;td id=&quot;LC158&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; with name of appropriate Kubernetes persistent volume .&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L159&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;159&quot;/&gt;
&lt;td id=&quot;LC159&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;CloudVolumeCreatedForVolumeNameTag&lt;/span&gt; = &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;kubernetes.io/created-for/pv/name&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L160&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;160&quot;/&gt;
&lt;td id=&quot;LC160&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L161&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;161&quot;/&gt;
&lt;td id=&quot;LC161&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Number of retries when we create a PV object for a provisioned volume.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L162&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;162&quot;/&gt;
&lt;td id=&quot;LC162&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;const&lt;/span&gt; createProvisionedPVRetryCount = &lt;span class=&quot;pl-c1&quot;&gt;5&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L163&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;163&quot;/&gt;
&lt;td id=&quot;LC163&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L164&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;164&quot;/&gt;
&lt;td id=&quot;LC164&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Interval between retries when we create a PV object for a provisioned volume.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L165&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;165&quot;/&gt;
&lt;td id=&quot;LC165&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;const&lt;/span&gt; createProvisionedPVInterval = &lt;span class=&quot;pl-c1&quot;&gt;10&lt;/span&gt; * time.&lt;span class=&quot;pl-smi&quot;&gt;Second&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L166&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;166&quot;/&gt;
&lt;td id=&quot;LC166&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L167&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;167&quot;/&gt;
&lt;td id=&quot;LC167&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; PersistentVolumeController is a controller that synchronizes&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L168&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;168&quot;/&gt;
&lt;td id=&quot;LC168&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; PersistentVolumeClaims and PersistentVolumes. It starts two&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L169&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;169&quot;/&gt;
&lt;td id=&quot;LC169&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; cache.Controllers that watch PersistentVolume and PersistentVolumeClaim&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L170&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;170&quot;/&gt;
&lt;td id=&quot;LC170&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; changes.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L171&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;171&quot;/&gt;
&lt;td id=&quot;LC171&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;struct&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L172&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;172&quot;/&gt;
&lt;td id=&quot;LC172&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;volumeLister corelisters.&lt;span class=&quot;pl-smi&quot;&gt;PersistentVolumeLister&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L173&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;173&quot;/&gt;
&lt;td id=&quot;LC173&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;volumeListerSynced cache.&lt;span class=&quot;pl-smi&quot;&gt;InformerSynced&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L174&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;174&quot;/&gt;
&lt;td id=&quot;LC174&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;claimLister corelisters.&lt;span class=&quot;pl-smi&quot;&gt;PersistentVolumeClaimLister&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L175&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;175&quot;/&gt;
&lt;td id=&quot;LC175&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;claimListerSynced cache.&lt;span class=&quot;pl-smi&quot;&gt;InformerSynced&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L176&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;176&quot;/&gt;
&lt;td id=&quot;LC176&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;classLister storagelisters.&lt;span class=&quot;pl-smi&quot;&gt;StorageClassLister&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L177&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;177&quot;/&gt;
&lt;td id=&quot;LC177&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;classListerSynced cache.&lt;span class=&quot;pl-smi&quot;&gt;InformerSynced&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L178&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;178&quot;/&gt;
&lt;td id=&quot;LC178&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;podLister corelisters.&lt;span class=&quot;pl-smi&quot;&gt;PodLister&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L179&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;179&quot;/&gt;
&lt;td id=&quot;LC179&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;podListerSynced cache.&lt;span class=&quot;pl-smi&quot;&gt;InformerSynced&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L180&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;180&quot;/&gt;
&lt;td id=&quot;LC180&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;NodeLister&lt;/span&gt; corelisters.&lt;span class=&quot;pl-smi&quot;&gt;NodeLister&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L181&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;181&quot;/&gt;
&lt;td id=&quot;LC181&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;NodeListerSynced&lt;/span&gt; cache.&lt;span class=&quot;pl-smi&quot;&gt;InformerSynced&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L182&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;182&quot;/&gt;
&lt;td id=&quot;LC182&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L183&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;183&quot;/&gt;
&lt;td id=&quot;LC183&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;kubeClient clientset.&lt;span class=&quot;pl-smi&quot;&gt;Interface&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L184&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;184&quot;/&gt;
&lt;td id=&quot;LC184&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;eventRecorder record.&lt;span class=&quot;pl-smi&quot;&gt;EventRecorder&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L185&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;185&quot;/&gt;
&lt;td id=&quot;LC185&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;cloud cloudprovider.&lt;span class=&quot;pl-smi&quot;&gt;Interface&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L186&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;186&quot;/&gt;
&lt;td id=&quot;LC186&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;volumePluginMgr vol.&lt;span class=&quot;pl-smi&quot;&gt;VolumePluginMgr&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L187&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;187&quot;/&gt;
&lt;td id=&quot;LC187&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;enableDynamicProvisioning &lt;span class=&quot;pl-k&quot;&gt;bool&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L188&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;188&quot;/&gt;
&lt;td id=&quot;LC188&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;clusterName &lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L189&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;189&quot;/&gt;
&lt;td id=&quot;LC189&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;resyncPeriod time.&lt;span class=&quot;pl-smi&quot;&gt;Duration&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L190&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;190&quot;/&gt;
&lt;td id=&quot;LC190&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L191&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;191&quot;/&gt;
&lt;td id=&quot;LC191&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Cache of the last known version of volumes and claims. This cache is&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L192&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;192&quot;/&gt;
&lt;td id=&quot;LC192&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; thread safe as long as the volumes/claims there are not modified, they&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L193&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;193&quot;/&gt;
&lt;td id=&quot;LC193&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; must be cloned before any modification. These caches get updated both by&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L194&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;194&quot;/&gt;
&lt;td id=&quot;LC194&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; &quot;xxx added/updated/deleted&quot; events from etcd and by the controller when&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L195&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;195&quot;/&gt;
&lt;td id=&quot;LC195&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; it saves newer version to etcd.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L196&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;196&quot;/&gt;
&lt;td id=&quot;LC196&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Why local cache: binding a volume to a claim generates 4 events, roughly&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L197&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;197&quot;/&gt;
&lt;td id=&quot;LC197&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; in this order (depends on goroutine ordering):&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L198&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;198&quot;/&gt;
&lt;td id=&quot;LC198&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; - volume.Spec update&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L199&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;199&quot;/&gt;
&lt;td id=&quot;LC199&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; - volume.Status update&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L200&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;200&quot;/&gt;
&lt;td id=&quot;LC200&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; - claim.Spec update&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L201&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;201&quot;/&gt;
&lt;td id=&quot;LC201&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; - claim.Status update&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L202&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;202&quot;/&gt;
&lt;td id=&quot;LC202&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; With these caches, the controller can check that it has already saved&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L203&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;203&quot;/&gt;
&lt;td id=&quot;LC203&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; volume.Status and claim.Spec+Status and does not need to do anything&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L204&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;204&quot;/&gt;
&lt;td id=&quot;LC204&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; when e.g. volume.Spec update event arrives before all the other events.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L205&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;205&quot;/&gt;
&lt;td id=&quot;LC205&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Without this cache, it would see the old version of volume.Status and&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L206&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;206&quot;/&gt;
&lt;td id=&quot;LC206&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; claim in the informers (it has not been updated from API server events&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L207&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;207&quot;/&gt;
&lt;td id=&quot;LC207&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; yet) and it would try to fix these objects to be bound together.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L208&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;208&quot;/&gt;
&lt;td id=&quot;LC208&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Any write to API server would fail with version conflict - these objects&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L209&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;209&quot;/&gt;
&lt;td id=&quot;LC209&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; have been already written.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L210&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;210&quot;/&gt;
&lt;td id=&quot;LC210&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;volumes persistentVolumeOrderedIndex&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L211&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;211&quot;/&gt;
&lt;td id=&quot;LC211&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;claims cache.&lt;span class=&quot;pl-smi&quot;&gt;Store&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L212&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;212&quot;/&gt;
&lt;td id=&quot;LC212&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L213&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;213&quot;/&gt;
&lt;td id=&quot;LC213&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Work queues of claims and volumes to process. Every queue should have&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L214&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;214&quot;/&gt;
&lt;td id=&quot;LC214&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; exactly one worker thread, especially syncClaim() is not reentrant.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L215&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;215&quot;/&gt;
&lt;td id=&quot;LC215&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Two syncClaims could bind two different claims to the same volume or one&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L216&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;216&quot;/&gt;
&lt;td id=&quot;LC216&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; claim to two volumes. The controller would recover from this (due to&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L217&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;217&quot;/&gt;
&lt;td id=&quot;LC217&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; version errors in API server and other checks in this controller),&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L218&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;218&quot;/&gt;
&lt;td id=&quot;LC218&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; however overall speed of multi-worker controller would be lower than if&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L219&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;219&quot;/&gt;
&lt;td id=&quot;LC219&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; it runs single thread only.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L220&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;220&quot;/&gt;
&lt;td id=&quot;LC220&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;claimQueue *workqueue.&lt;span class=&quot;pl-smi&quot;&gt;Type&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L221&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;221&quot;/&gt;
&lt;td id=&quot;LC221&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;volumeQueue *workqueue.&lt;span class=&quot;pl-smi&quot;&gt;Type&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L222&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;222&quot;/&gt;
&lt;td id=&quot;LC222&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L223&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;223&quot;/&gt;
&lt;td id=&quot;LC223&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Map of scheduled/running operations.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L224&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;224&quot;/&gt;
&lt;td id=&quot;LC224&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;runningOperations goroutinemap.&lt;span class=&quot;pl-smi&quot;&gt;GoRoutineMap&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L225&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;225&quot;/&gt;
&lt;td id=&quot;LC225&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L226&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;226&quot;/&gt;
&lt;td id=&quot;LC226&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; For testing only: hook to call before an asynchronous operation starts.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L227&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;227&quot;/&gt;
&lt;td id=&quot;LC227&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Not used when set to nil.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L228&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;228&quot;/&gt;
&lt;td id=&quot;LC228&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;preOperationHook &lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt;(operationName &lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L229&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;229&quot;/&gt;
&lt;td id=&quot;LC229&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L230&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;230&quot;/&gt;
&lt;td id=&quot;LC230&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;createProvisionedPVRetryCount &lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L231&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;231&quot;/&gt;
&lt;td id=&quot;LC231&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;createProvisionedPVInterval time.&lt;span class=&quot;pl-smi&quot;&gt;Duration&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L232&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;232&quot;/&gt;
&lt;td id=&quot;LC232&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L233&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;233&quot;/&gt;
&lt;td id=&quot;LC233&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L234&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;234&quot;/&gt;
&lt;td id=&quot;LC234&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; syncClaim is the main controller method to decide what to do with a claim.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L235&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;235&quot;/&gt;
&lt;td id=&quot;LC235&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; It's invoked by appropriate cache.Controller callbacks when a claim is&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L236&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;236&quot;/&gt;
&lt;td id=&quot;LC236&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; created, updated or periodically synced. We do not differentiate between&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L237&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;237&quot;/&gt;
&lt;td id=&quot;LC237&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; these events.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L238&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;238&quot;/&gt;
&lt;td id=&quot;LC238&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; For easier readability, it was split into syncUnboundClaim and syncBoundClaim&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L239&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;239&quot;/&gt;
&lt;td id=&quot;LC239&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; methods.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L240&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;240&quot;/&gt;
&lt;td id=&quot;LC240&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;syncClaim&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;claim&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeClaim&lt;/span&gt;) &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L241&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;241&quot;/&gt;
&lt;td id=&quot;LC241&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;synchronizing PersistentVolumeClaim[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), &lt;span class=&quot;pl-c1&quot;&gt;getClaimStatusForLogging&lt;/span&gt;(claim))&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L242&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;242&quot;/&gt;
&lt;td id=&quot;LC242&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L243&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;243&quot;/&gt;
&lt;td id=&quot;LC243&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !metav1.&lt;span class=&quot;pl-c1&quot;&gt;HasAnnotation&lt;/span&gt;(claim.&lt;span class=&quot;pl-smi&quot;&gt;ObjectMeta&lt;/span&gt;, annBindCompleted) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L244&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;244&quot;/&gt;
&lt;td id=&quot;LC244&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; ctrl.&lt;span class=&quot;pl-c1&quot;&gt;syncUnboundClaim&lt;/span&gt;(claim)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L245&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;245&quot;/&gt;
&lt;td id=&quot;LC245&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;} &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L246&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;246&quot;/&gt;
&lt;td id=&quot;LC246&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; ctrl.&lt;span class=&quot;pl-c1&quot;&gt;syncBoundClaim&lt;/span&gt;(claim)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L247&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;247&quot;/&gt;
&lt;td id=&quot;LC247&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L248&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;248&quot;/&gt;
&lt;td id=&quot;LC248&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L249&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;249&quot;/&gt;
&lt;td id=&quot;LC249&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L250&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;250&quot;/&gt;
&lt;td id=&quot;LC250&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt;checkVolumeSatisfyClaim checks if the volume requested by the claim satisfies the requirements of the claim&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L251&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;251&quot;/&gt;
&lt;td id=&quot;LC251&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;checkVolumeSatisfyClaim&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;volume&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolume&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;claim&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeClaim&lt;/span&gt;) &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L252&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;252&quot;/&gt;
&lt;td id=&quot;LC252&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;requestedQty&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; claim.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Resources&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Requests&lt;/span&gt;[v1.&lt;span class=&quot;pl-c1&quot;&gt;ResourceName&lt;/span&gt;(v1.&lt;span class=&quot;pl-smi&quot;&gt;ResourceStorage&lt;/span&gt;)]&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L253&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;253&quot;/&gt;
&lt;td id=&quot;LC253&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;requestedSize&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; requestedQty.&lt;span class=&quot;pl-c1&quot;&gt;Value&lt;/span&gt;()&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L254&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;254&quot;/&gt;
&lt;td id=&quot;LC254&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L255&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;255&quot;/&gt;
&lt;td id=&quot;LC255&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; check if PV's DeletionTimeStamp is set, if so, return error.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L256&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;256&quot;/&gt;
&lt;td id=&quot;LC256&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; utilfeature.&lt;span class=&quot;pl-smi&quot;&gt;DefaultFeatureGate&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Enabled&lt;/span&gt;(features.&lt;span class=&quot;pl-smi&quot;&gt;StorageObjectInUseProtection&lt;/span&gt;) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L257&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;257&quot;/&gt;
&lt;td id=&quot;LC257&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; volume.&lt;span class=&quot;pl-smi&quot;&gt;ObjectMeta&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;DeletionTimestamp&lt;/span&gt; != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L258&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;258&quot;/&gt;
&lt;td id=&quot;LC258&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Errorf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;the volume is marked for deletion&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L259&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;259&quot;/&gt;
&lt;td id=&quot;LC259&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L260&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;260&quot;/&gt;
&lt;td id=&quot;LC260&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L261&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;261&quot;/&gt;
&lt;td id=&quot;LC261&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L262&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;262&quot;/&gt;
&lt;td id=&quot;LC262&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;volumeQty&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Capacity&lt;/span&gt;[v1.&lt;span class=&quot;pl-smi&quot;&gt;ResourceStorage&lt;/span&gt;]&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L263&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;263&quot;/&gt;
&lt;td id=&quot;LC263&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;volumeSize&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; volumeQty.&lt;span class=&quot;pl-c1&quot;&gt;Value&lt;/span&gt;()&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L264&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;264&quot;/&gt;
&lt;td id=&quot;LC264&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; volumeSize &amp;lt; requestedSize {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L265&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;265&quot;/&gt;
&lt;td id=&quot;LC265&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Errorf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;requested PV is too small&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L266&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;266&quot;/&gt;
&lt;td id=&quot;LC266&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L267&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;267&quot;/&gt;
&lt;td id=&quot;LC267&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L268&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;268&quot;/&gt;
&lt;td id=&quot;LC268&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;requestedClass&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; v1helper.&lt;span class=&quot;pl-c1&quot;&gt;GetPersistentVolumeClaimClass&lt;/span&gt;(claim)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L269&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;269&quot;/&gt;
&lt;td id=&quot;LC269&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; v1helper.&lt;span class=&quot;pl-c1&quot;&gt;GetPersistentVolumeClass&lt;/span&gt;(volume) != requestedClass {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L270&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;270&quot;/&gt;
&lt;td id=&quot;LC270&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Errorf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;storageClassName does not match&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L271&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;271&quot;/&gt;
&lt;td id=&quot;LC271&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L272&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;272&quot;/&gt;
&lt;td id=&quot;LC272&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L273&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;273&quot;/&gt;
&lt;td id=&quot;LC273&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;isMismatch&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;checkVolumeModeMismatches&lt;/span&gt;(&amp;amp;claim.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;, &amp;amp;volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L274&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;274&quot;/&gt;
&lt;td id=&quot;LC274&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L275&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;275&quot;/&gt;
&lt;td id=&quot;LC275&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Errorf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;error checking volumeMode: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L276&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;276&quot;/&gt;
&lt;td id=&quot;LC276&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L277&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;277&quot;/&gt;
&lt;td id=&quot;LC277&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; isMismatch {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L278&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;278&quot;/&gt;
&lt;td id=&quot;LC278&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Errorf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;incompatible volumeMode&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L279&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;279&quot;/&gt;
&lt;td id=&quot;LC279&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L280&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;280&quot;/&gt;
&lt;td id=&quot;LC280&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L281&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;281&quot;/&gt;
&lt;td id=&quot;LC281&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !&lt;span class=&quot;pl-c1&quot;&gt;checkAccessModes&lt;/span&gt;(claim, volume) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L282&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;282&quot;/&gt;
&lt;td id=&quot;LC282&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Errorf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;incompatible accessMode&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L283&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;283&quot;/&gt;
&lt;td id=&quot;LC283&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L284&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;284&quot;/&gt;
&lt;td id=&quot;LC284&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L285&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;285&quot;/&gt;
&lt;td id=&quot;LC285&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L286&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;286&quot;/&gt;
&lt;td id=&quot;LC286&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L287&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;287&quot;/&gt;
&lt;td id=&quot;LC287&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L288&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;288&quot;/&gt;
&lt;td id=&quot;LC288&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;shouldDelayBinding&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;claim&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeClaim&lt;/span&gt;) (&lt;span class=&quot;pl-v&quot;&gt;bool&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt;) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L289&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;289&quot;/&gt;
&lt;td id=&quot;LC289&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !utilfeature.&lt;span class=&quot;pl-smi&quot;&gt;DefaultFeatureGate&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Enabled&lt;/span&gt;(features.&lt;span class=&quot;pl-smi&quot;&gt;VolumeScheduling&lt;/span&gt;) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L290&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;290&quot;/&gt;
&lt;td id=&quot;LC290&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L291&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;291&quot;/&gt;
&lt;td id=&quot;LC291&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L292&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;292&quot;/&gt;
&lt;td id=&quot;LC292&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L293&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;293&quot;/&gt;
&lt;td id=&quot;LC293&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; When feature VolumeScheduling enabled,&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L294&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;294&quot;/&gt;
&lt;td id=&quot;LC294&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Scheduler signal to the PV controller to start dynamic&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L295&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;295&quot;/&gt;
&lt;td id=&quot;LC295&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; provisioning by setting the &quot;annSelectedNode&quot; annotation&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L296&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;296&quot;/&gt;
&lt;td id=&quot;LC296&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; in the PVC&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L297&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;297&quot;/&gt;
&lt;td id=&quot;LC297&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;_&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; claim.&lt;span class=&quot;pl-smi&quot;&gt;Annotations&lt;/span&gt;[annSelectedNode]; ok {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L298&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;298&quot;/&gt;
&lt;td id=&quot;LC298&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L299&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;299&quot;/&gt;
&lt;td id=&quot;LC299&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L300&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;300&quot;/&gt;
&lt;td id=&quot;LC300&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L301&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;301&quot;/&gt;
&lt;td id=&quot;LC301&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;className&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; v1helper.&lt;span class=&quot;pl-c1&quot;&gt;GetPersistentVolumeClaimClass&lt;/span&gt;(claim)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L302&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;302&quot;/&gt;
&lt;td id=&quot;LC302&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; className == &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L303&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;303&quot;/&gt;
&lt;td id=&quot;LC303&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L304&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;304&quot;/&gt;
&lt;td id=&quot;LC304&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L305&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;305&quot;/&gt;
&lt;td id=&quot;LC305&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L306&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;306&quot;/&gt;
&lt;td id=&quot;LC306&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;class&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-smi&quot;&gt;classLister&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Get&lt;/span&gt;(className)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L307&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;307&quot;/&gt;
&lt;td id=&quot;LC307&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L308&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;308&quot;/&gt;
&lt;td id=&quot;LC308&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L309&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;309&quot;/&gt;
&lt;td id=&quot;LC309&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L310&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;310&quot;/&gt;
&lt;td id=&quot;LC310&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L311&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;311&quot;/&gt;
&lt;td id=&quot;LC311&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; class.&lt;span class=&quot;pl-smi&quot;&gt;VolumeBindingMode&lt;/span&gt; == &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L312&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;312&quot;/&gt;
&lt;td id=&quot;LC312&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt;, fmt.&lt;span class=&quot;pl-c1&quot;&gt;Errorf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;VolumeBindingMode not set for StorageClass &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, className)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L313&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;313&quot;/&gt;
&lt;td id=&quot;LC313&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L314&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;314&quot;/&gt;
&lt;td id=&quot;LC314&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L315&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;315&quot;/&gt;
&lt;td id=&quot;LC315&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; *class.&lt;span class=&quot;pl-smi&quot;&gt;VolumeBindingMode&lt;/span&gt; == storage.&lt;span class=&quot;pl-smi&quot;&gt;VolumeBindingWaitForFirstConsumer&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L316&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;316&quot;/&gt;
&lt;td id=&quot;LC316&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L317&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;317&quot;/&gt;
&lt;td id=&quot;LC317&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L318&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;318&quot;/&gt;
&lt;td id=&quot;LC318&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; syncUnboundClaim is the main controller method to decide what to do with an&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L319&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;319&quot;/&gt;
&lt;td id=&quot;LC319&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; unbound claim.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L320&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;320&quot;/&gt;
&lt;td id=&quot;LC320&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;syncUnboundClaim&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;claim&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeClaim&lt;/span&gt;) &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L321&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;321&quot;/&gt;
&lt;td id=&quot;LC321&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; This is a new PVC that has not completed binding&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L322&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;322&quot;/&gt;
&lt;td id=&quot;LC322&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; OBSERVATION: pvc is &quot;Pending&quot;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L323&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;323&quot;/&gt;
&lt;td id=&quot;LC323&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; claim.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;VolumeName&lt;/span&gt; == &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L324&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;324&quot;/&gt;
&lt;td id=&quot;LC324&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; User did not care which PV they get.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L325&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;325&quot;/&gt;
&lt;td id=&quot;LC325&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;delayBinding&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-c1&quot;&gt;shouldDelayBinding&lt;/span&gt;(claim)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L326&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;326&quot;/&gt;
&lt;td id=&quot;LC326&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L327&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;327&quot;/&gt;
&lt;td id=&quot;LC327&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L328&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;328&quot;/&gt;
&lt;td id=&quot;LC328&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L329&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;329&quot;/&gt;
&lt;td id=&quot;LC329&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L330&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;330&quot;/&gt;
&lt;td id=&quot;LC330&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; [Unit test set 1]&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L331&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;331&quot;/&gt;
&lt;td id=&quot;LC331&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;volume&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-smi&quot;&gt;volumes&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;findBestMatchForClaim&lt;/span&gt;(claim, delayBinding)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L332&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;332&quot;/&gt;
&lt;td id=&quot;LC332&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L333&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;333&quot;/&gt;
&lt;td id=&quot;LC333&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;synchronizing unbound PersistentVolumeClaim[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: Error finding PV for claim: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L334&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;334&quot;/&gt;
&lt;td id=&quot;LC334&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Errorf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Error finding PV for claim &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L335&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;335&quot;/&gt;
&lt;td id=&quot;LC335&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L336&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;336&quot;/&gt;
&lt;td id=&quot;LC336&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; volume == &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L337&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;337&quot;/&gt;
&lt;td id=&quot;LC337&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;synchronizing unbound PersistentVolumeClaim[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: no volume found&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim))&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L338&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;338&quot;/&gt;
&lt;td id=&quot;LC338&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; No PV could be found&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L339&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;339&quot;/&gt;
&lt;td id=&quot;LC339&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; OBSERVATION: pvc is &quot;Pending&quot;, will retry&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L340&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;340&quot;/&gt;
&lt;td id=&quot;LC340&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;switch&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L341&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;341&quot;/&gt;
&lt;td id=&quot;LC341&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;case&lt;/span&gt; delayBinding:&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L342&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;342&quot;/&gt;
&lt;td id=&quot;LC342&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ctrl.&lt;span class=&quot;pl-smi&quot;&gt;eventRecorder&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Event&lt;/span&gt;(claim, v1.&lt;span class=&quot;pl-smi&quot;&gt;EventTypeNormal&lt;/span&gt;, events.&lt;span class=&quot;pl-smi&quot;&gt;WaitForFirstConsumer&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;waiting for first consumer to be created before binding&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L343&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;343&quot;/&gt;
&lt;td id=&quot;LC343&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;case&lt;/span&gt; v1helper.&lt;span class=&quot;pl-c1&quot;&gt;GetPersistentVolumeClaimClass&lt;/span&gt;(claim) != &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;:&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L344&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;344&quot;/&gt;
&lt;td id=&quot;LC344&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;provisionClaim&lt;/span&gt;(claim); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L345&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;345&quot;/&gt;
&lt;td id=&quot;LC345&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L346&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;346&quot;/&gt;
&lt;td id=&quot;LC346&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L347&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;347&quot;/&gt;
&lt;td id=&quot;LC347&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L348&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;348&quot;/&gt;
&lt;td id=&quot;LC348&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;default&lt;/span&gt;:&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L349&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;349&quot;/&gt;
&lt;td id=&quot;LC349&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ctrl.&lt;span class=&quot;pl-smi&quot;&gt;eventRecorder&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Event&lt;/span&gt;(claim, v1.&lt;span class=&quot;pl-smi&quot;&gt;EventTypeNormal&lt;/span&gt;, events.&lt;span class=&quot;pl-smi&quot;&gt;FailedBinding&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;no persistent volumes available for this claim and no storage class is set&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L350&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;350&quot;/&gt;
&lt;td id=&quot;LC350&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L351&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;351&quot;/&gt;
&lt;td id=&quot;LC351&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L352&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;352&quot;/&gt;
&lt;td id=&quot;LC352&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Mark the claim as Pending and try to find a match in the next&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L353&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;353&quot;/&gt;
&lt;td id=&quot;LC353&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; periodic syncClaim&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L354&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;354&quot;/&gt;
&lt;td id=&quot;LC354&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; _, err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;updateClaimStatus&lt;/span&gt;(claim, v1.&lt;span class=&quot;pl-smi&quot;&gt;ClaimPending&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L355&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;355&quot;/&gt;
&lt;td id=&quot;LC355&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L356&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;356&quot;/&gt;
&lt;td id=&quot;LC356&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L357&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;357&quot;/&gt;
&lt;td id=&quot;LC357&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L358&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;358&quot;/&gt;
&lt;td id=&quot;LC358&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;} &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;/*&lt;/span&gt; pv != nil &lt;span class=&quot;pl-c&quot;&gt;*/&lt;/span&gt;&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L359&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;359&quot;/&gt;
&lt;td id=&quot;LC359&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Found a PV for this claim&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L360&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;360&quot;/&gt;
&lt;td id=&quot;LC360&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; OBSERVATION: pvc is &quot;Pending&quot;, pv is &quot;Available&quot;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L361&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;361&quot;/&gt;
&lt;td id=&quot;LC361&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;synchronizing unbound PersistentVolumeClaim[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; found: &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;getVolumeStatusForLogging&lt;/span&gt;(volume))&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L362&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;362&quot;/&gt;
&lt;td id=&quot;LC362&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;bind&lt;/span&gt;(volume, claim); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L363&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;363&quot;/&gt;
&lt;td id=&quot;LC363&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; On any error saving the volume or the claim, subsequent&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L364&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;364&quot;/&gt;
&lt;td id=&quot;LC364&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; syncClaim will finish the binding.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L365&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;365&quot;/&gt;
&lt;td id=&quot;LC365&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L366&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;366&quot;/&gt;
&lt;td id=&quot;LC366&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L367&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;367&quot;/&gt;
&lt;td id=&quot;LC367&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; OBSERVATION: claim is &quot;Bound&quot;, pv is &quot;Bound&quot;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L368&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;368&quot;/&gt;
&lt;td id=&quot;LC368&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L369&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;369&quot;/&gt;
&lt;td id=&quot;LC369&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L370&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;370&quot;/&gt;
&lt;td id=&quot;LC370&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;} &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;/*&lt;/span&gt; pvc.Spec.VolumeName != nil &lt;span class=&quot;pl-c&quot;&gt;*/&lt;/span&gt;&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L371&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;371&quot;/&gt;
&lt;td id=&quot;LC371&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; [Unit test set 2]&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L372&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;372&quot;/&gt;
&lt;td id=&quot;LC372&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; User asked for a specific PV.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L373&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;373&quot;/&gt;
&lt;td id=&quot;LC373&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;synchronizing unbound PersistentVolumeClaim[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; requested&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), claim.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;VolumeName&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L374&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;374&quot;/&gt;
&lt;td id=&quot;LC374&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;obj&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;found&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-smi&quot;&gt;volumes&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;store&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;GetByKey&lt;/span&gt;(claim.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;VolumeName&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L375&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;375&quot;/&gt;
&lt;td id=&quot;LC375&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L376&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;376&quot;/&gt;
&lt;td id=&quot;LC376&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L377&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;377&quot;/&gt;
&lt;td id=&quot;LC377&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L378&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;378&quot;/&gt;
&lt;td id=&quot;LC378&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !found {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L379&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;379&quot;/&gt;
&lt;td id=&quot;LC379&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; User asked for a PV that does not exist.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L380&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;380&quot;/&gt;
&lt;td id=&quot;LC380&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; OBSERVATION: pvc is &quot;Pending&quot;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L381&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;381&quot;/&gt;
&lt;td id=&quot;LC381&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Retry later.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L382&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;382&quot;/&gt;
&lt;td id=&quot;LC382&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;synchronizing unbound PersistentVolumeClaim[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; requested and not found, will try again next time&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), claim.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;VolumeName&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L383&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;383&quot;/&gt;
&lt;td id=&quot;LC383&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; _, err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;updateClaimStatus&lt;/span&gt;(claim, v1.&lt;span class=&quot;pl-smi&quot;&gt;ClaimPending&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L384&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;384&quot;/&gt;
&lt;td id=&quot;LC384&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L385&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;385&quot;/&gt;
&lt;td id=&quot;LC385&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L386&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;386&quot;/&gt;
&lt;td id=&quot;LC386&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L387&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;387&quot;/&gt;
&lt;td id=&quot;LC387&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;} &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L388&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;388&quot;/&gt;
&lt;td id=&quot;LC388&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;volume&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; obj.(*v1.&lt;span class=&quot;pl-smi&quot;&gt;PersistentVolume&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L389&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;389&quot;/&gt;
&lt;td id=&quot;LC389&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !ok {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L390&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;390&quot;/&gt;
&lt;td id=&quot;LC390&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Errorf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Cannot convert object from volume cache to volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;!?: &lt;span class=&quot;pl-c1&quot;&gt;%+v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, claim.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;VolumeName&lt;/span&gt;, obj)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L391&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;391&quot;/&gt;
&lt;td id=&quot;LC391&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L392&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;392&quot;/&gt;
&lt;td id=&quot;LC392&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;synchronizing unbound PersistentVolumeClaim[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; requested and found: &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), claim.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;VolumeName&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;getVolumeStatusForLogging&lt;/span&gt;(volume))&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L393&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;393&quot;/&gt;
&lt;td id=&quot;LC393&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt; == &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L394&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;394&quot;/&gt;
&lt;td id=&quot;LC394&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; User asked for a PV that is not claimed&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L395&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;395&quot;/&gt;
&lt;td id=&quot;LC395&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; OBSERVATION: pvc is &quot;Pending&quot;, pv is &quot;Available&quot;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L396&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;396&quot;/&gt;
&lt;td id=&quot;LC396&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;synchronizing unbound PersistentVolumeClaim[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: volume is unbound, binding&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim))&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L397&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;397&quot;/&gt;
&lt;td id=&quot;LC397&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err = &lt;span class=&quot;pl-c1&quot;&gt;checkVolumeSatisfyClaim&lt;/span&gt;(volume, claim); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L398&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;398&quot;/&gt;
&lt;td id=&quot;LC398&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Can't bind the claim to volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L399&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;399&quot;/&gt;
&lt;td id=&quot;LC399&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt;send an event&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L400&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;400&quot;/&gt;
&lt;td id=&quot;LC400&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;msg&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Sprintf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Cannot bind to requested volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L401&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;401&quot;/&gt;
&lt;td id=&quot;LC401&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ctrl.&lt;span class=&quot;pl-smi&quot;&gt;eventRecorder&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Event&lt;/span&gt;(claim, v1.&lt;span class=&quot;pl-smi&quot;&gt;EventTypeWarning&lt;/span&gt;, events.&lt;span class=&quot;pl-smi&quot;&gt;VolumeMismatch&lt;/span&gt;, msg)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L402&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;402&quot;/&gt;
&lt;td id=&quot;LC402&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt;volume does not satisfy the requirements of the claim&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L403&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;403&quot;/&gt;
&lt;td id=&quot;LC403&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; _, err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;updateClaimStatus&lt;/span&gt;(claim, v1.&lt;span class=&quot;pl-smi&quot;&gt;ClaimPending&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L404&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;404&quot;/&gt;
&lt;td id=&quot;LC404&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L405&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;405&quot;/&gt;
&lt;td id=&quot;LC405&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L406&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;406&quot;/&gt;
&lt;td id=&quot;LC406&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;} &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;bind&lt;/span&gt;(volume, claim); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L407&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;407&quot;/&gt;
&lt;td id=&quot;LC407&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; On any error saving the volume or the claim, subsequent&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L408&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;408&quot;/&gt;
&lt;td id=&quot;LC408&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; syncClaim will finish the binding.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L409&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;409&quot;/&gt;
&lt;td id=&quot;LC409&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L410&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;410&quot;/&gt;
&lt;td id=&quot;LC410&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L411&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;411&quot;/&gt;
&lt;td id=&quot;LC411&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; OBSERVATION: pvc is &quot;Bound&quot;, pv is &quot;Bound&quot;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L412&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;412&quot;/&gt;
&lt;td id=&quot;LC412&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L413&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;413&quot;/&gt;
&lt;td id=&quot;LC413&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;} &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;isVolumeBoundToClaim&lt;/span&gt;(volume, claim) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L414&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;414&quot;/&gt;
&lt;td id=&quot;LC414&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; User asked for a PV that is claimed by this PVC&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L415&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;415&quot;/&gt;
&lt;td id=&quot;LC415&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; OBSERVATION: pvc is &quot;Pending&quot;, pv is &quot;Bound&quot;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L416&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;416&quot;/&gt;
&lt;td id=&quot;LC416&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;synchronizing unbound PersistentVolumeClaim[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: volume already bound, finishing the binding&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim))&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L417&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;417&quot;/&gt;
&lt;td id=&quot;LC417&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L418&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;418&quot;/&gt;
&lt;td id=&quot;LC418&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Finish the volume binding by adding claim UID.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L419&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;419&quot;/&gt;
&lt;td id=&quot;LC419&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;bind&lt;/span&gt;(volume, claim); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L420&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;420&quot;/&gt;
&lt;td id=&quot;LC420&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L421&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;421&quot;/&gt;
&lt;td id=&quot;LC421&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L422&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;422&quot;/&gt;
&lt;td id=&quot;LC422&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; OBSERVATION: pvc is &quot;Bound&quot;, pv is &quot;Bound&quot;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L423&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;423&quot;/&gt;
&lt;td id=&quot;LC423&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L424&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;424&quot;/&gt;
&lt;td id=&quot;LC424&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;} &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L425&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;425&quot;/&gt;
&lt;td id=&quot;LC425&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; User asked for a PV that is claimed by someone else&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L426&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;426&quot;/&gt;
&lt;td id=&quot;LC426&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; OBSERVATION: pvc is &quot;Pending&quot;, pv is &quot;Bound&quot;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L427&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;427&quot;/&gt;
&lt;td id=&quot;LC427&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !metav1.&lt;span class=&quot;pl-c1&quot;&gt;HasAnnotation&lt;/span&gt;(claim.&lt;span class=&quot;pl-smi&quot;&gt;ObjectMeta&lt;/span&gt;, annBoundByController) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L428&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;428&quot;/&gt;
&lt;td id=&quot;LC428&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;synchronizing unbound PersistentVolumeClaim[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: volume already bound to different claim by user, will retry later&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim))&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L429&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;429&quot;/&gt;
&lt;td id=&quot;LC429&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; User asked for a specific PV, retry later&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L430&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;430&quot;/&gt;
&lt;td id=&quot;LC430&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; _, err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;updateClaimStatus&lt;/span&gt;(claim, v1.&lt;span class=&quot;pl-smi&quot;&gt;ClaimPending&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L431&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;431&quot;/&gt;
&lt;td id=&quot;LC431&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L432&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;432&quot;/&gt;
&lt;td id=&quot;LC432&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L433&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;433&quot;/&gt;
&lt;td id=&quot;LC433&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L434&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;434&quot;/&gt;
&lt;td id=&quot;LC434&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;} &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L435&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;435&quot;/&gt;
&lt;td id=&quot;LC435&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; This should never happen because someone had to remove&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L436&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;436&quot;/&gt;
&lt;td id=&quot;LC436&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; annBindCompleted annotation on the claim.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;7&quot;&gt;&lt;td id=&quot;L437&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;437&quot;/&gt;
&lt;td id=&quot;LC437&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;synchronizing unbound PersistentVolumeClaim[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: volume already bound to different claim &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; by controller, THIS SHOULD NEVER HAPPEN&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), &lt;span class=&quot;pl-c1&quot;&gt;claimrefToClaimKey&lt;/span&gt;(volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt;))&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L438&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;438&quot;/&gt;
&lt;td id=&quot;LC438&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Errorf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Invalid binding of claim &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; to volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;: volume already claimed by &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), claim.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;VolumeName&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimrefToClaimKey&lt;/span&gt;(volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt;))&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L439&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;439&quot;/&gt;
&lt;td id=&quot;LC439&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L440&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;440&quot;/&gt;
&lt;td id=&quot;LC440&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L441&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;441&quot;/&gt;
&lt;td id=&quot;LC441&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L442&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;442&quot;/&gt;
&lt;td id=&quot;LC442&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L443&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;443&quot;/&gt;
&lt;td id=&quot;LC443&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L444&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;444&quot;/&gt;
&lt;td id=&quot;LC444&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L445&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;445&quot;/&gt;
&lt;td id=&quot;LC445&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; syncBoundClaim is the main controller method to decide what to do with a&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L446&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;446&quot;/&gt;
&lt;td id=&quot;LC446&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; bound claim.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L447&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;447&quot;/&gt;
&lt;td id=&quot;LC447&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;syncBoundClaim&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;claim&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeClaim&lt;/span&gt;) &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L448&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;448&quot;/&gt;
&lt;td id=&quot;LC448&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; HasAnnotation(pvc, annBindCompleted)&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L449&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;449&quot;/&gt;
&lt;td id=&quot;LC449&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; This PVC has previously been bound&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L450&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;450&quot;/&gt;
&lt;td id=&quot;LC450&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; OBSERVATION: pvc is not &quot;Pending&quot;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L451&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;451&quot;/&gt;
&lt;td id=&quot;LC451&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; [Unit test set 3]&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L452&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;452&quot;/&gt;
&lt;td id=&quot;LC452&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; claim.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;VolumeName&lt;/span&gt; == &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L453&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;453&quot;/&gt;
&lt;td id=&quot;LC453&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Claim was bound before but not any more.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;10&quot;&gt;&lt;td id=&quot;L454&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;454&quot;/&gt;
&lt;td id=&quot;LC454&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;_&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-c1&quot;&gt;updateClaimStatusWithEvent&lt;/span&gt;(claim, v1.&lt;span class=&quot;pl-smi&quot;&gt;ClaimLost&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;, v1.&lt;span class=&quot;pl-smi&quot;&gt;EventTypeWarning&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;ClaimLost&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Bound claim has lost reference to PersistentVolume. Data on the volume is lost!&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L455&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;455&quot;/&gt;
&lt;td id=&quot;LC455&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L456&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;456&quot;/&gt;
&lt;td id=&quot;LC456&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L457&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;457&quot;/&gt;
&lt;td id=&quot;LC457&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L458&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;458&quot;/&gt;
&lt;td id=&quot;LC458&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L459&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;459&quot;/&gt;
&lt;td id=&quot;LC459&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;obj&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;found&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-smi&quot;&gt;volumes&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;store&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;GetByKey&lt;/span&gt;(claim.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;VolumeName&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L460&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;460&quot;/&gt;
&lt;td id=&quot;LC460&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L461&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;461&quot;/&gt;
&lt;td id=&quot;LC461&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L462&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;462&quot;/&gt;
&lt;td id=&quot;LC462&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L463&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;463&quot;/&gt;
&lt;td id=&quot;LC463&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !found {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L464&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;464&quot;/&gt;
&lt;td id=&quot;LC464&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Claim is bound to a non-existing volume.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;9&quot;&gt;&lt;td id=&quot;L465&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;465&quot;/&gt;
&lt;td id=&quot;LC465&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; _, err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;updateClaimStatusWithEvent&lt;/span&gt;(claim, v1.&lt;span class=&quot;pl-smi&quot;&gt;ClaimLost&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;, v1.&lt;span class=&quot;pl-smi&quot;&gt;EventTypeWarning&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;ClaimLost&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Bound claim has lost its PersistentVolume. Data on the volume is lost!&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L466&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;466&quot;/&gt;
&lt;td id=&quot;LC466&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L467&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;467&quot;/&gt;
&lt;td id=&quot;LC467&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L468&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;468&quot;/&gt;
&lt;td id=&quot;LC468&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L469&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;469&quot;/&gt;
&lt;td id=&quot;LC469&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;} &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L470&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;470&quot;/&gt;
&lt;td id=&quot;LC470&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;volume&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; obj.(*v1.&lt;span class=&quot;pl-smi&quot;&gt;PersistentVolume&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L471&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;471&quot;/&gt;
&lt;td id=&quot;LC471&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !ok {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L472&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;472&quot;/&gt;
&lt;td id=&quot;LC472&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Errorf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Cannot convert object from volume cache to volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;!?: &lt;span class=&quot;pl-c1&quot;&gt;%#v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, claim.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;VolumeName&lt;/span&gt;, obj)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L473&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;473&quot;/&gt;
&lt;td id=&quot;LC473&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L474&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;474&quot;/&gt;
&lt;td id=&quot;LC474&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L475&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;475&quot;/&gt;
&lt;td id=&quot;LC475&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;synchronizing bound PersistentVolumeClaim[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; found: &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), claim.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;VolumeName&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;getVolumeStatusForLogging&lt;/span&gt;(volume))&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L476&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;476&quot;/&gt;
&lt;td id=&quot;LC476&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt; == &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L477&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;477&quot;/&gt;
&lt;td id=&quot;LC477&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Claim is bound but volume has come unbound.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L478&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;478&quot;/&gt;
&lt;td id=&quot;LC478&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Or, a claim was bound and the controller has not received updated&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L479&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;479&quot;/&gt;
&lt;td id=&quot;LC479&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; volume yet. We can't distinguish these cases.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L480&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;480&quot;/&gt;
&lt;td id=&quot;LC480&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Bind the volume again and set all states to Bound.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L481&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;481&quot;/&gt;
&lt;td id=&quot;LC481&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;synchronizing bound PersistentVolumeClaim[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: volume is unbound, fixing&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim))&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L482&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;482&quot;/&gt;
&lt;td id=&quot;LC482&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;bind&lt;/span&gt;(volume, claim); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L483&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;483&quot;/&gt;
&lt;td id=&quot;LC483&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Objects not saved, next syncPV or syncClaim will try again&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L484&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;484&quot;/&gt;
&lt;td id=&quot;LC484&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L485&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;485&quot;/&gt;
&lt;td id=&quot;LC485&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L486&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;486&quot;/&gt;
&lt;td id=&quot;LC486&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L487&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;487&quot;/&gt;
&lt;td id=&quot;LC487&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;} &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;UID&lt;/span&gt; == claim.&lt;span class=&quot;pl-smi&quot;&gt;UID&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L488&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;488&quot;/&gt;
&lt;td id=&quot;LC488&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; All is well&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L489&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;489&quot;/&gt;
&lt;td id=&quot;LC489&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; NOTE: syncPV can handle this so it can be left out.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L490&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;490&quot;/&gt;
&lt;td id=&quot;LC490&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; NOTE: bind() call here will do nothing in most cases as&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L491&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;491&quot;/&gt;
&lt;td id=&quot;LC491&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; everything should be already set.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L492&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;492&quot;/&gt;
&lt;td id=&quot;LC492&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;synchronizing bound PersistentVolumeClaim[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: claim is already correctly bound&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim))&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L493&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;493&quot;/&gt;
&lt;td id=&quot;LC493&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;bind&lt;/span&gt;(volume, claim); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L494&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;494&quot;/&gt;
&lt;td id=&quot;LC494&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Objects not saved, next syncPV or syncClaim will try again&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L495&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;495&quot;/&gt;
&lt;td id=&quot;LC495&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L496&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;496&quot;/&gt;
&lt;td id=&quot;LC496&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L497&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;497&quot;/&gt;
&lt;td id=&quot;LC497&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L498&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;498&quot;/&gt;
&lt;td id=&quot;LC498&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;} &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L499&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;499&quot;/&gt;
&lt;td id=&quot;LC499&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Claim is bound but volume has a different claimant.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L500&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;500&quot;/&gt;
&lt;td id=&quot;LC500&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Set the claim phase to 'Lost', which is a terminal&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L501&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;501&quot;/&gt;
&lt;td id=&quot;LC501&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; phase.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;10&quot;&gt;&lt;td id=&quot;L502&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;502&quot;/&gt;
&lt;td id=&quot;LC502&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; _, err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;updateClaimStatusWithEvent&lt;/span&gt;(claim, v1.&lt;span class=&quot;pl-smi&quot;&gt;ClaimLost&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;, v1.&lt;span class=&quot;pl-smi&quot;&gt;EventTypeWarning&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;ClaimMisbound&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Two claims are bound to the same volume, this one is bound incorrectly&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L503&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;503&quot;/&gt;
&lt;td id=&quot;LC503&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L504&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;504&quot;/&gt;
&lt;td id=&quot;LC504&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L505&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;505&quot;/&gt;
&lt;td id=&quot;LC505&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L506&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;506&quot;/&gt;
&lt;td id=&quot;LC506&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L507&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;507&quot;/&gt;
&lt;td id=&quot;LC507&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L508&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;508&quot;/&gt;
&lt;td id=&quot;LC508&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L509&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;509&quot;/&gt;
&lt;td id=&quot;LC509&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L510&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;510&quot;/&gt;
&lt;td id=&quot;LC510&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; syncVolume is the main controller method to decide what to do with a volume.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L511&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;511&quot;/&gt;
&lt;td id=&quot;LC511&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; It's invoked by appropriate cache.Controller callbacks when a volume is&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L512&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;512&quot;/&gt;
&lt;td id=&quot;LC512&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; created, updated or periodically synced. We do not differentiate between&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L513&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;513&quot;/&gt;
&lt;td id=&quot;LC513&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; these events.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L514&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;514&quot;/&gt;
&lt;td id=&quot;LC514&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;syncVolume&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;volume&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolume&lt;/span&gt;) &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L515&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;515&quot;/&gt;
&lt;td id=&quot;LC515&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;synchronizing PersistentVolume[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;getVolumeStatusForLogging&lt;/span&gt;(volume))&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L516&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;516&quot;/&gt;
&lt;td id=&quot;LC516&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L517&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;517&quot;/&gt;
&lt;td id=&quot;LC517&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; [Unit test set 4]&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L518&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;518&quot;/&gt;
&lt;td id=&quot;LC518&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt; == &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L519&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;519&quot;/&gt;
&lt;td id=&quot;LC519&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Volume is unused&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L520&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;520&quot;/&gt;
&lt;td id=&quot;LC520&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;synchronizing PersistentVolume[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: volume is unused&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L521&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;521&quot;/&gt;
&lt;td id=&quot;LC521&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;_&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-c1&quot;&gt;updateVolumePhase&lt;/span&gt;(volume, v1.&lt;span class=&quot;pl-smi&quot;&gt;VolumeAvailable&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L522&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;522&quot;/&gt;
&lt;td id=&quot;LC522&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Nothing was saved; we will fall back into the same&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L523&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;523&quot;/&gt;
&lt;td id=&quot;LC523&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; condition in the next call to this method&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L524&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;524&quot;/&gt;
&lt;td id=&quot;LC524&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L525&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;525&quot;/&gt;
&lt;td id=&quot;LC525&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L526&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;526&quot;/&gt;
&lt;td id=&quot;LC526&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L527&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;527&quot;/&gt;
&lt;td id=&quot;LC527&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;} &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;/*&lt;/span&gt; pv.Spec.ClaimRef != nil &lt;span class=&quot;pl-c&quot;&gt;*/&lt;/span&gt;&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L528&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;528&quot;/&gt;
&lt;td id=&quot;LC528&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Volume is bound to a claim.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L529&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;529&quot;/&gt;
&lt;td id=&quot;LC529&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;UID&lt;/span&gt; == &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L530&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;530&quot;/&gt;
&lt;td id=&quot;LC530&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; The PV is reserved for a PVC; that PVC has not yet been&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L531&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;531&quot;/&gt;
&lt;td id=&quot;LC531&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; bound to this PV; the PVC sync will handle it.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L532&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;532&quot;/&gt;
&lt;td id=&quot;LC532&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;synchronizing PersistentVolume[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: volume is pre-bound to claim &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimrefToClaimKey&lt;/span&gt;(volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt;))&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L533&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;533&quot;/&gt;
&lt;td id=&quot;LC533&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;_&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-c1&quot;&gt;updateVolumePhase&lt;/span&gt;(volume, v1.&lt;span class=&quot;pl-smi&quot;&gt;VolumeAvailable&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L534&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;534&quot;/&gt;
&lt;td id=&quot;LC534&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Nothing was saved; we will fall back into the same&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L535&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;535&quot;/&gt;
&lt;td id=&quot;LC535&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; condition in the next call to this method&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L536&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;536&quot;/&gt;
&lt;td id=&quot;LC536&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L537&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;537&quot;/&gt;
&lt;td id=&quot;LC537&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L538&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;538&quot;/&gt;
&lt;td id=&quot;LC538&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L539&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;539&quot;/&gt;
&lt;td id=&quot;LC539&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L540&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;540&quot;/&gt;
&lt;td id=&quot;LC540&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;synchronizing PersistentVolume[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: volume is bound to claim &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimrefToClaimKey&lt;/span&gt;(volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt;))&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L541&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;541&quot;/&gt;
&lt;td id=&quot;LC541&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Get the PVC by _name_&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L542&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;542&quot;/&gt;
&lt;td id=&quot;LC542&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;claim&lt;/span&gt; *v1.&lt;span class=&quot;pl-smi&quot;&gt;PersistentVolumeClaim&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L543&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;543&quot;/&gt;
&lt;td id=&quot;LC543&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;claimName&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;claimrefToClaimKey&lt;/span&gt;(volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L544&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;544&quot;/&gt;
&lt;td id=&quot;LC544&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;obj&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;found&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-smi&quot;&gt;claims&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;GetByKey&lt;/span&gt;(claimName)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L545&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;545&quot;/&gt;
&lt;td id=&quot;LC545&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L546&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;546&quot;/&gt;
&lt;td id=&quot;LC546&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L547&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;547&quot;/&gt;
&lt;td id=&quot;LC547&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L548&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;548&quot;/&gt;
&lt;td id=&quot;LC548&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !found &amp;amp;&amp;amp; metav1.&lt;span class=&quot;pl-c1&quot;&gt;HasAnnotation&lt;/span&gt;(volume.&lt;span class=&quot;pl-smi&quot;&gt;ObjectMeta&lt;/span&gt;, annBoundByController) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L549&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;549&quot;/&gt;
&lt;td id=&quot;LC549&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; If PV is bound by external PV binder (e.g. kube-scheduler), it's&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L550&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;550&quot;/&gt;
&lt;td id=&quot;LC550&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; possible on heavy load that corresponding PVC is not synced to&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L551&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;551&quot;/&gt;
&lt;td id=&quot;LC551&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; controller local cache yet. So we need to double-check PVC in&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L552&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;552&quot;/&gt;
&lt;td id=&quot;LC552&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; 1) informer cache&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L553&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;553&quot;/&gt;
&lt;td id=&quot;LC553&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; 2) apiserver if not found in informer cache&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L554&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;554&quot;/&gt;
&lt;td id=&quot;LC554&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; to make sure we will not reclaim a PV wrongly.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L555&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;555&quot;/&gt;
&lt;td id=&quot;LC555&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Note that only non-released and non-failed volumes will be&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L556&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;556&quot;/&gt;
&lt;td id=&quot;LC556&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; updated to Released state when PVC does not eixst.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L557&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;557&quot;/&gt;
&lt;td id=&quot;LC557&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; volume.&lt;span class=&quot;pl-smi&quot;&gt;Status&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Phase&lt;/span&gt; != v1.&lt;span class=&quot;pl-smi&quot;&gt;VolumeReleased&lt;/span&gt; &amp;amp;&amp;amp; volume.&lt;span class=&quot;pl-smi&quot;&gt;Status&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Phase&lt;/span&gt; != v1.&lt;span class=&quot;pl-smi&quot;&gt;VolumeFailed&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L558&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;558&quot;/&gt;
&lt;td id=&quot;LC558&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;obj, err = ctrl.&lt;span class=&quot;pl-smi&quot;&gt;claimLister&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;PersistentVolumeClaims&lt;/span&gt;(volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Namespace&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Get&lt;/span&gt;(volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L559&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;559&quot;/&gt;
&lt;td id=&quot;LC559&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; &amp;amp;&amp;amp; !apierrs.&lt;span class=&quot;pl-c1&quot;&gt;IsNotFound&lt;/span&gt;(err) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L560&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;560&quot;/&gt;
&lt;td id=&quot;LC560&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L561&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;561&quot;/&gt;
&lt;td id=&quot;LC561&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L562&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;562&quot;/&gt;
&lt;td id=&quot;LC562&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;found = !apierrs.&lt;span class=&quot;pl-c1&quot;&gt;IsNotFound&lt;/span&gt;(err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L563&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;563&quot;/&gt;
&lt;td id=&quot;LC563&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !found {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L564&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;564&quot;/&gt;
&lt;td id=&quot;LC564&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;obj, err = ctrl.&lt;span class=&quot;pl-smi&quot;&gt;kubeClient&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;CoreV1&lt;/span&gt;().&lt;span class=&quot;pl-c1&quot;&gt;PersistentVolumeClaims&lt;/span&gt;(volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Namespace&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Get&lt;/span&gt;(volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, metav1.&lt;span class=&quot;pl-smi&quot;&gt;GetOptions&lt;/span&gt;{})&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L565&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;565&quot;/&gt;
&lt;td id=&quot;LC565&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; &amp;amp;&amp;amp; !apierrs.&lt;span class=&quot;pl-c1&quot;&gt;IsNotFound&lt;/span&gt;(err) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L566&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;566&quot;/&gt;
&lt;td id=&quot;LC566&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L567&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;567&quot;/&gt;
&lt;td id=&quot;LC567&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L568&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;568&quot;/&gt;
&lt;td id=&quot;LC568&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;found = !apierrs.&lt;span class=&quot;pl-c1&quot;&gt;IsNotFound&lt;/span&gt;(err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L569&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;569&quot;/&gt;
&lt;td id=&quot;LC569&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L570&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;570&quot;/&gt;
&lt;td id=&quot;LC570&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L571&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;571&quot;/&gt;
&lt;td id=&quot;LC571&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L572&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;572&quot;/&gt;
&lt;td id=&quot;LC572&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !found {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L573&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;573&quot;/&gt;
&lt;td id=&quot;LC573&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;synchronizing PersistentVolume[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: claim &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt; not found&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimrefToClaimKey&lt;/span&gt;(volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt;))&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L574&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;574&quot;/&gt;
&lt;td id=&quot;LC574&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Fall through with claim = nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L575&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;575&quot;/&gt;
&lt;td id=&quot;LC575&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;} &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L576&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;576&quot;/&gt;
&lt;td id=&quot;LC576&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;bool&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L577&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;577&quot;/&gt;
&lt;td id=&quot;LC577&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;claim, ok = obj.(*v1.&lt;span class=&quot;pl-smi&quot;&gt;PersistentVolumeClaim&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L578&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;578&quot;/&gt;
&lt;td id=&quot;LC578&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !ok {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L579&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;579&quot;/&gt;
&lt;td id=&quot;LC579&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Errorf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Cannot convert object from volume cache to volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;!?: &lt;span class=&quot;pl-c1&quot;&gt;%#v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, claim.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;VolumeName&lt;/span&gt;, obj)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L580&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;580&quot;/&gt;
&lt;td id=&quot;LC580&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L581&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;581&quot;/&gt;
&lt;td id=&quot;LC581&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;synchronizing PersistentVolume[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: claim &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt; found: &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimrefToClaimKey&lt;/span&gt;(volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt;), &lt;span class=&quot;pl-c1&quot;&gt;getClaimStatusForLogging&lt;/span&gt;(claim))&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L582&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;582&quot;/&gt;
&lt;td id=&quot;LC582&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L583&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;583&quot;/&gt;
&lt;td id=&quot;LC583&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; claim != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; &amp;amp;&amp;amp; claim.&lt;span class=&quot;pl-smi&quot;&gt;UID&lt;/span&gt; != volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;UID&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L584&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;584&quot;/&gt;
&lt;td id=&quot;LC584&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; The claim that the PV was pointing to was deleted, and another&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L585&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;585&quot;/&gt;
&lt;td id=&quot;LC585&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; with the same name created.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L586&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;586&quot;/&gt;
&lt;td id=&quot;LC586&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;synchronizing PersistentVolume[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: claim &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt; has different UID, the old one must have been deleted&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimrefToClaimKey&lt;/span&gt;(volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt;))&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L587&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;587&quot;/&gt;
&lt;td id=&quot;LC587&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Treat the volume as bound to a missing claim.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L588&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;588&quot;/&gt;
&lt;td id=&quot;LC588&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;claim = &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L589&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;589&quot;/&gt;
&lt;td id=&quot;LC589&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L590&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;590&quot;/&gt;
&lt;td id=&quot;LC590&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L591&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;591&quot;/&gt;
&lt;td id=&quot;LC591&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; claim == &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L592&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;592&quot;/&gt;
&lt;td id=&quot;LC592&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; If we get into this block, the claim must have been deleted;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L593&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;593&quot;/&gt;
&lt;td id=&quot;LC593&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; NOTE: reclaimVolume may either release the PV back into the pool or&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L594&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;594&quot;/&gt;
&lt;td id=&quot;LC594&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; recycle it or do nothing (retain)&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L595&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;595&quot;/&gt;
&lt;td id=&quot;LC595&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L596&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;596&quot;/&gt;
&lt;td id=&quot;LC596&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Do not overwrite previous Failed state - let the user see that&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L597&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;597&quot;/&gt;
&lt;td id=&quot;LC597&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; something went wrong, while we still re-try to reclaim the&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L598&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;598&quot;/&gt;
&lt;td id=&quot;LC598&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; volume.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L599&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;599&quot;/&gt;
&lt;td id=&quot;LC599&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; volume.&lt;span class=&quot;pl-smi&quot;&gt;Status&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Phase&lt;/span&gt; != v1.&lt;span class=&quot;pl-smi&quot;&gt;VolumeReleased&lt;/span&gt; &amp;amp;&amp;amp; volume.&lt;span class=&quot;pl-smi&quot;&gt;Status&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Phase&lt;/span&gt; != v1.&lt;span class=&quot;pl-smi&quot;&gt;VolumeFailed&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L600&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;600&quot;/&gt;
&lt;td id=&quot;LC600&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Also, log this only once:&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L601&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;601&quot;/&gt;
&lt;td id=&quot;LC601&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; is released and reclaim policy &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; will be executed&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;PersistentVolumeReclaimPolicy&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L602&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;602&quot;/&gt;
&lt;td id=&quot;LC602&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; volume, err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;updateVolumePhase&lt;/span&gt;(volume, v1.&lt;span class=&quot;pl-smi&quot;&gt;VolumeReleased&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L603&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;603&quot;/&gt;
&lt;td id=&quot;LC603&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Nothing was saved; we will fall back into the same condition&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L604&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;604&quot;/&gt;
&lt;td id=&quot;LC604&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; in the next call to this method&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L605&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;605&quot;/&gt;
&lt;td id=&quot;LC605&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L606&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;606&quot;/&gt;
&lt;td id=&quot;LC606&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L607&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;607&quot;/&gt;
&lt;td id=&quot;LC607&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L608&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;608&quot;/&gt;
&lt;td id=&quot;LC608&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L609&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;609&quot;/&gt;
&lt;td id=&quot;LC609&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;reclaimVolume&lt;/span&gt;(volume); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L610&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;610&quot;/&gt;
&lt;td id=&quot;LC610&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Release failed, we will fall back into the same condition&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L611&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;611&quot;/&gt;
&lt;td id=&quot;LC611&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; in the next call to this method&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L612&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;612&quot;/&gt;
&lt;td id=&quot;LC612&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L613&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;613&quot;/&gt;
&lt;td id=&quot;LC613&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L614&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;614&quot;/&gt;
&lt;td id=&quot;LC614&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L615&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;615&quot;/&gt;
&lt;td id=&quot;LC615&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;} &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; claim.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;VolumeName&lt;/span&gt; == &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L616&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;616&quot;/&gt;
&lt;td id=&quot;LC616&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;isMismatch&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;checkVolumeModeMismatches&lt;/span&gt;(&amp;amp;claim.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;, &amp;amp;volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; || isMismatch {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L617&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;617&quot;/&gt;
&lt;td id=&quot;LC617&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Binding for the volume won't be called in syncUnboundClaim,&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L618&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;618&quot;/&gt;
&lt;td id=&quot;LC618&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; because findBestMatchForClaim won't return the volume due to volumeMode mismatch.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L619&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;619&quot;/&gt;
&lt;td id=&quot;LC619&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;volumeMsg&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Sprintf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Cannot bind PersistentVolume to requested PersistentVolumeClaim &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; due to incompatible volumeMode.&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, claim.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L620&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;620&quot;/&gt;
&lt;td id=&quot;LC620&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ctrl.&lt;span class=&quot;pl-smi&quot;&gt;eventRecorder&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Event&lt;/span&gt;(volume, v1.&lt;span class=&quot;pl-smi&quot;&gt;EventTypeWarning&lt;/span&gt;, events.&lt;span class=&quot;pl-smi&quot;&gt;VolumeMismatch&lt;/span&gt;, volumeMsg)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L621&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;621&quot;/&gt;
&lt;td id=&quot;LC621&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;claimMsg&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Sprintf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Cannot bind PersistentVolume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; to requested PersistentVolumeClaim due to incompatible volumeMode.&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L622&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;622&quot;/&gt;
&lt;td id=&quot;LC622&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ctrl.&lt;span class=&quot;pl-smi&quot;&gt;eventRecorder&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Event&lt;/span&gt;(claim, v1.&lt;span class=&quot;pl-smi&quot;&gt;EventTypeWarning&lt;/span&gt;, events.&lt;span class=&quot;pl-smi&quot;&gt;VolumeMismatch&lt;/span&gt;, claimMsg)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L623&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;623&quot;/&gt;
&lt;td id=&quot;LC623&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Skipping syncClaim&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L624&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;624&quot;/&gt;
&lt;td id=&quot;LC624&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L625&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;625&quot;/&gt;
&lt;td id=&quot;LC625&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L626&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;626&quot;/&gt;
&lt;td id=&quot;LC626&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L627&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;627&quot;/&gt;
&lt;td id=&quot;LC627&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; metav1.&lt;span class=&quot;pl-c1&quot;&gt;HasAnnotation&lt;/span&gt;(volume.&lt;span class=&quot;pl-smi&quot;&gt;ObjectMeta&lt;/span&gt;, annBoundByController) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L628&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;628&quot;/&gt;
&lt;td id=&quot;LC628&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; The binding is not completed; let PVC sync handle it&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L629&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;629&quot;/&gt;
&lt;td id=&quot;LC629&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;synchronizing PersistentVolume[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: volume not bound yet, waiting for syncClaim to fix it&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L630&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;630&quot;/&gt;
&lt;td id=&quot;LC630&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;} &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L631&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;631&quot;/&gt;
&lt;td id=&quot;LC631&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Dangling PV; try to re-establish the link in the PVC sync&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L632&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;632&quot;/&gt;
&lt;td id=&quot;LC632&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;synchronizing PersistentVolume[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: volume was bound and got unbound (by user?), waiting for syncClaim to fix it&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L633&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;633&quot;/&gt;
&lt;td id=&quot;LC633&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L634&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;634&quot;/&gt;
&lt;td id=&quot;LC634&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; In both cases, the volume is Bound and the claim is Pending.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L635&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;635&quot;/&gt;
&lt;td id=&quot;LC635&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Next syncClaim will fix it. To speed it up, we enqueue the claim&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L636&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;636&quot;/&gt;
&lt;td id=&quot;LC636&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; into the controller, which results in syncClaim to be called&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L637&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;637&quot;/&gt;
&lt;td id=&quot;LC637&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; shortly (and in the right worker goroutine).&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L638&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;638&quot;/&gt;
&lt;td id=&quot;LC638&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; This speeds up binding of provisioned volumes - provisioner saves&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L639&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;639&quot;/&gt;
&lt;td id=&quot;LC639&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; only the new PV and it expects that next syncClaim will bind the&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L640&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;640&quot;/&gt;
&lt;td id=&quot;LC640&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; claim to it.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L641&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;641&quot;/&gt;
&lt;td id=&quot;LC641&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ctrl.&lt;span class=&quot;pl-smi&quot;&gt;claimQueue&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Add&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim))&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L642&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;642&quot;/&gt;
&lt;td id=&quot;LC642&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L643&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;643&quot;/&gt;
&lt;td id=&quot;LC643&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;} &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; claim.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;VolumeName&lt;/span&gt; == volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L644&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;644&quot;/&gt;
&lt;td id=&quot;LC644&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Volume is bound to a claim properly, update status if necessary&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L645&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;645&quot;/&gt;
&lt;td id=&quot;LC645&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;synchronizing PersistentVolume[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: all is bound&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L646&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;646&quot;/&gt;
&lt;td id=&quot;LC646&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; _, err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;updateVolumePhase&lt;/span&gt;(volume, v1.&lt;span class=&quot;pl-smi&quot;&gt;VolumeBound&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L647&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;647&quot;/&gt;
&lt;td id=&quot;LC647&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Nothing was saved; we will fall back into the same&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L648&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;648&quot;/&gt;
&lt;td id=&quot;LC648&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; condition in the next call to this method&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L649&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;649&quot;/&gt;
&lt;td id=&quot;LC649&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L650&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;650&quot;/&gt;
&lt;td id=&quot;LC650&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L651&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;651&quot;/&gt;
&lt;td id=&quot;LC651&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L652&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;652&quot;/&gt;
&lt;td id=&quot;LC652&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;} &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L653&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;653&quot;/&gt;
&lt;td id=&quot;LC653&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Volume is bound to a claim, but the claim is bound elsewhere&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L654&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;654&quot;/&gt;
&lt;td id=&quot;LC654&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; metav1.&lt;span class=&quot;pl-c1&quot;&gt;HasAnnotation&lt;/span&gt;(volume.&lt;span class=&quot;pl-smi&quot;&gt;ObjectMeta&lt;/span&gt;, annDynamicallyProvisioned) &amp;amp;&amp;amp; volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;PersistentVolumeReclaimPolicy&lt;/span&gt; == v1.&lt;span class=&quot;pl-smi&quot;&gt;PersistentVolumeReclaimDelete&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L655&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;655&quot;/&gt;
&lt;td id=&quot;LC655&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; This volume was dynamically provisioned for this claim. The&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L656&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;656&quot;/&gt;
&lt;td id=&quot;LC656&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; claim got bound elsewhere, and thus this volume is not&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L657&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;657&quot;/&gt;
&lt;td id=&quot;LC657&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; needed. Delete it.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L658&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;658&quot;/&gt;
&lt;td id=&quot;LC658&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Mark the volume as Released for external deleters and to let&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L659&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;659&quot;/&gt;
&lt;td id=&quot;LC659&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; the user know. Don't overwrite existing Failed status!&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L660&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;660&quot;/&gt;
&lt;td id=&quot;LC660&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; volume.&lt;span class=&quot;pl-smi&quot;&gt;Status&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Phase&lt;/span&gt; != v1.&lt;span class=&quot;pl-smi&quot;&gt;VolumeReleased&lt;/span&gt; &amp;amp;&amp;amp; volume.&lt;span class=&quot;pl-smi&quot;&gt;Status&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Phase&lt;/span&gt; != v1.&lt;span class=&quot;pl-smi&quot;&gt;VolumeFailed&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L661&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;661&quot;/&gt;
&lt;td id=&quot;LC661&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Also, log this only once:&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L662&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;662&quot;/&gt;
&lt;td id=&quot;LC662&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;dynamically volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; is released and it will be deleted&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L663&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;663&quot;/&gt;
&lt;td id=&quot;LC663&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; volume, err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;updateVolumePhase&lt;/span&gt;(volume, v1.&lt;span class=&quot;pl-smi&quot;&gt;VolumeReleased&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L664&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;664&quot;/&gt;
&lt;td id=&quot;LC664&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Nothing was saved; we will fall back into the same condition&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L665&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;665&quot;/&gt;
&lt;td id=&quot;LC665&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; in the next call to this method&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L666&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;666&quot;/&gt;
&lt;td id=&quot;LC666&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L667&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;667&quot;/&gt;
&lt;td id=&quot;LC667&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L668&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;668&quot;/&gt;
&lt;td id=&quot;LC668&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L669&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;669&quot;/&gt;
&lt;td id=&quot;LC669&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;reclaimVolume&lt;/span&gt;(volume); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L670&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;670&quot;/&gt;
&lt;td id=&quot;LC670&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Deletion failed, we will fall back into the same condition&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L671&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;671&quot;/&gt;
&lt;td id=&quot;LC671&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; in the next call to this method&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L672&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;672&quot;/&gt;
&lt;td id=&quot;LC672&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L673&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;673&quot;/&gt;
&lt;td id=&quot;LC673&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L674&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;674&quot;/&gt;
&lt;td id=&quot;LC674&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L675&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;675&quot;/&gt;
&lt;td id=&quot;LC675&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;} &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L676&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;676&quot;/&gt;
&lt;td id=&quot;LC676&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Volume is bound to a claim, but the claim is bound elsewhere&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L677&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;677&quot;/&gt;
&lt;td id=&quot;LC677&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; and it's not dynamically provisioned.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L678&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;678&quot;/&gt;
&lt;td id=&quot;LC678&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; metav1.&lt;span class=&quot;pl-c1&quot;&gt;HasAnnotation&lt;/span&gt;(volume.&lt;span class=&quot;pl-smi&quot;&gt;ObjectMeta&lt;/span&gt;, annBoundByController) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L679&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;679&quot;/&gt;
&lt;td id=&quot;LC679&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; This is part of the normal operation of the controller; the&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L680&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;680&quot;/&gt;
&lt;td id=&quot;LC680&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; controller tried to use this volume for a claim but the claim&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L681&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;681&quot;/&gt;
&lt;td id=&quot;LC681&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; was fulfilled by another volume. We did this; fix it.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L682&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;682&quot;/&gt;
&lt;td id=&quot;LC682&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;synchronizing PersistentVolume[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: volume is bound by controller to a claim that is bound to another volume, unbinding&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L683&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;683&quot;/&gt;
&lt;td id=&quot;LC683&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;unbindVolume&lt;/span&gt;(volume); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L684&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;684&quot;/&gt;
&lt;td id=&quot;LC684&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L685&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;685&quot;/&gt;
&lt;td id=&quot;LC685&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L686&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;686&quot;/&gt;
&lt;td id=&quot;LC686&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L687&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;687&quot;/&gt;
&lt;td id=&quot;LC687&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;} &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L688&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;688&quot;/&gt;
&lt;td id=&quot;LC688&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; The PV must have been created with this ptr; leave it alone.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L689&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;689&quot;/&gt;
&lt;td id=&quot;LC689&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;synchronizing PersistentVolume[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: volume is bound by user to a claim that is bound to another volume, waiting for the claim to get unbound&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L690&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;690&quot;/&gt;
&lt;td id=&quot;LC690&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; This just updates the volume phase and clears&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L691&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;691&quot;/&gt;
&lt;td id=&quot;LC691&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; volume.Spec.ClaimRef.UID. It leaves the volume pre-bound&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L692&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;692&quot;/&gt;
&lt;td id=&quot;LC692&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; to the claim.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L693&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;693&quot;/&gt;
&lt;td id=&quot;LC693&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;unbindVolume&lt;/span&gt;(volume); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L694&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;694&quot;/&gt;
&lt;td id=&quot;LC694&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L695&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;695&quot;/&gt;
&lt;td id=&quot;LC695&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L696&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;696&quot;/&gt;
&lt;td id=&quot;LC696&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L697&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;697&quot;/&gt;
&lt;td id=&quot;LC697&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L698&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;698&quot;/&gt;
&lt;td id=&quot;LC698&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L699&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;699&quot;/&gt;
&lt;td id=&quot;LC699&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L700&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;700&quot;/&gt;
&lt;td id=&quot;LC700&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L701&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;701&quot;/&gt;
&lt;td id=&quot;LC701&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L702&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;702&quot;/&gt;
&lt;td id=&quot;LC702&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L703&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;703&quot;/&gt;
&lt;td id=&quot;LC703&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; updateClaimStatus saves new claim.Status to API server.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L704&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;704&quot;/&gt;
&lt;td id=&quot;LC704&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Parameters:&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L705&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;705&quot;/&gt;
&lt;td id=&quot;LC705&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; claim - claim to update&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L706&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;706&quot;/&gt;
&lt;td id=&quot;LC706&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; phase - phase to set&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L707&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;707&quot;/&gt;
&lt;td id=&quot;LC707&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; volume - volume which Capacity is set into claim.Status.Capacity&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L708&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;708&quot;/&gt;
&lt;td id=&quot;LC708&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;updateClaimStatus&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;claim&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeClaim&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;phase&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeClaimPhase&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;volume&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolume&lt;/span&gt;) (*&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeClaim&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt;) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L709&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;709&quot;/&gt;
&lt;td id=&quot;LC709&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;updating PersistentVolumeClaim[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;] status: set phase &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), phase)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L710&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;710&quot;/&gt;
&lt;td id=&quot;LC710&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L711&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;711&quot;/&gt;
&lt;td id=&quot;LC711&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;dirty&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L712&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;712&quot;/&gt;
&lt;td id=&quot;LC712&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L713&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;713&quot;/&gt;
&lt;td id=&quot;LC713&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;claimClone&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; claim.&lt;span class=&quot;pl-c1&quot;&gt;DeepCopy&lt;/span&gt;()&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L714&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;714&quot;/&gt;
&lt;td id=&quot;LC714&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; claim.&lt;span class=&quot;pl-smi&quot;&gt;Status&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Phase&lt;/span&gt; != phase {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L715&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;715&quot;/&gt;
&lt;td id=&quot;LC715&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;claimClone.&lt;span class=&quot;pl-smi&quot;&gt;Status&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Phase&lt;/span&gt; = phase&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L716&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;716&quot;/&gt;
&lt;td id=&quot;LC716&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;dirty = &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L717&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;717&quot;/&gt;
&lt;td id=&quot;LC717&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L718&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;718&quot;/&gt;
&lt;td id=&quot;LC718&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L719&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;719&quot;/&gt;
&lt;td id=&quot;LC719&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; volume == &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L720&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;720&quot;/&gt;
&lt;td id=&quot;LC720&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Need to reset AccessModes and Capacity&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L721&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;721&quot;/&gt;
&lt;td id=&quot;LC721&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; claim.&lt;span class=&quot;pl-smi&quot;&gt;Status&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;AccessModes&lt;/span&gt; != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L722&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;722&quot;/&gt;
&lt;td id=&quot;LC722&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;claimClone.&lt;span class=&quot;pl-smi&quot;&gt;Status&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;AccessModes&lt;/span&gt; = &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L723&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;723&quot;/&gt;
&lt;td id=&quot;LC723&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;dirty = &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L724&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;724&quot;/&gt;
&lt;td id=&quot;LC724&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L725&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;725&quot;/&gt;
&lt;td id=&quot;LC725&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; claim.&lt;span class=&quot;pl-smi&quot;&gt;Status&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Capacity&lt;/span&gt; != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L726&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;726&quot;/&gt;
&lt;td id=&quot;LC726&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;claimClone.&lt;span class=&quot;pl-smi&quot;&gt;Status&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Capacity&lt;/span&gt; = &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L727&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;727&quot;/&gt;
&lt;td id=&quot;LC727&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;dirty = &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L728&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;728&quot;/&gt;
&lt;td id=&quot;LC728&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L729&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;729&quot;/&gt;
&lt;td id=&quot;LC729&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;} &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L730&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;730&quot;/&gt;
&lt;td id=&quot;LC730&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Need to update AccessModes and Capacity&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L731&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;731&quot;/&gt;
&lt;td id=&quot;LC731&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !reflect.&lt;span class=&quot;pl-c1&quot;&gt;DeepEqual&lt;/span&gt;(claim.&lt;span class=&quot;pl-smi&quot;&gt;Status&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;AccessModes&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;AccessModes&lt;/span&gt;) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L732&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;732&quot;/&gt;
&lt;td id=&quot;LC732&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;claimClone.&lt;span class=&quot;pl-smi&quot;&gt;Status&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;AccessModes&lt;/span&gt; = volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;AccessModes&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L733&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;733&quot;/&gt;
&lt;td id=&quot;LC733&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;dirty = &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L734&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;734&quot;/&gt;
&lt;td id=&quot;LC734&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L735&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;735&quot;/&gt;
&lt;td id=&quot;LC735&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L736&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;736&quot;/&gt;
&lt;td id=&quot;LC736&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Update Capacity if the claim is becoming Bound, not if it was already.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L737&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;737&quot;/&gt;
&lt;td id=&quot;LC737&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; A discrepancy can be intentional to mean that the PVC filesystem size&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L738&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;738&quot;/&gt;
&lt;td id=&quot;LC738&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; doesn't match the PV block device size, so don't clobber it&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L739&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;739&quot;/&gt;
&lt;td id=&quot;LC739&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; claim.&lt;span class=&quot;pl-smi&quot;&gt;Status&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Phase&lt;/span&gt; != phase {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L740&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;740&quot;/&gt;
&lt;td id=&quot;LC740&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;volumeCap&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Capacity&lt;/span&gt;[v1.&lt;span class=&quot;pl-smi&quot;&gt;ResourceStorage&lt;/span&gt;]&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L741&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;741&quot;/&gt;
&lt;td id=&quot;LC741&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !ok {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L742&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;742&quot;/&gt;
&lt;td id=&quot;LC742&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;, fmt.&lt;span class=&quot;pl-c1&quot;&gt;Errorf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;PersistentVolume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; is without a storage capacity&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L743&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;743&quot;/&gt;
&lt;td id=&quot;LC743&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L744&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;744&quot;/&gt;
&lt;td id=&quot;LC744&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;claimCap&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; claim.&lt;span class=&quot;pl-smi&quot;&gt;Status&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Capacity&lt;/span&gt;[v1.&lt;span class=&quot;pl-smi&quot;&gt;ResourceStorage&lt;/span&gt;]&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L745&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;745&quot;/&gt;
&lt;td id=&quot;LC745&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !ok || volumeCap.&lt;span class=&quot;pl-c1&quot;&gt;Cmp&lt;/span&gt;(claimCap) != &lt;span class=&quot;pl-c1&quot;&gt;0&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L746&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;746&quot;/&gt;
&lt;td id=&quot;LC746&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;claimClone.&lt;span class=&quot;pl-smi&quot;&gt;Status&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Capacity&lt;/span&gt; = volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Capacity&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L747&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;747&quot;/&gt;
&lt;td id=&quot;LC747&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;dirty = &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L748&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;748&quot;/&gt;
&lt;td id=&quot;LC748&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L749&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;749&quot;/&gt;
&lt;td id=&quot;LC749&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L750&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;750&quot;/&gt;
&lt;td id=&quot;LC750&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L751&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;751&quot;/&gt;
&lt;td id=&quot;LC751&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L752&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;752&quot;/&gt;
&lt;td id=&quot;LC752&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !dirty {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L753&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;753&quot;/&gt;
&lt;td id=&quot;LC753&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Nothing to do.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L754&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;754&quot;/&gt;
&lt;td id=&quot;LC754&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;updating PersistentVolumeClaim[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;] status: phase &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt; already set&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), phase)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L755&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;755&quot;/&gt;
&lt;td id=&quot;LC755&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; claim, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L756&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;756&quot;/&gt;
&lt;td id=&quot;LC756&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L757&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;757&quot;/&gt;
&lt;td id=&quot;LC757&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L758&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;758&quot;/&gt;
&lt;td id=&quot;LC758&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;newClaim&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-smi&quot;&gt;kubeClient&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;CoreV1&lt;/span&gt;().&lt;span class=&quot;pl-c1&quot;&gt;PersistentVolumeClaims&lt;/span&gt;(claimClone.&lt;span class=&quot;pl-smi&quot;&gt;Namespace&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;UpdateStatus&lt;/span&gt;(claimClone)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L759&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;759&quot;/&gt;
&lt;td id=&quot;LC759&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L760&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;760&quot;/&gt;
&lt;td id=&quot;LC760&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;updating PersistentVolumeClaim[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;] status: set phase &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt; failed: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), phase, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L761&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;761&quot;/&gt;
&lt;td id=&quot;LC761&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; newClaim, err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L762&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;762&quot;/&gt;
&lt;td id=&quot;LC762&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L763&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;763&quot;/&gt;
&lt;td id=&quot;LC763&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;_, err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;storeClaimUpdate&lt;/span&gt;(newClaim)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L764&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;764&quot;/&gt;
&lt;td id=&quot;LC764&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L765&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;765&quot;/&gt;
&lt;td id=&quot;LC765&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;updating PersistentVolumeClaim[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;] status: cannot update internal cache: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L766&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;766&quot;/&gt;
&lt;td id=&quot;LC766&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; newClaim, err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L767&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;767&quot;/&gt;
&lt;td id=&quot;LC767&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L768&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;768&quot;/&gt;
&lt;td id=&quot;LC768&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;claim &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; entered phase &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), phase)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L769&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;769&quot;/&gt;
&lt;td id=&quot;LC769&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; newClaim, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L770&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;770&quot;/&gt;
&lt;td id=&quot;LC770&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L771&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;771&quot;/&gt;
&lt;td id=&quot;LC771&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L772&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;772&quot;/&gt;
&lt;td id=&quot;LC772&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; updateClaimStatusWithEvent saves new claim.Status to API server and emits&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L773&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;773&quot;/&gt;
&lt;td id=&quot;LC773&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; given event on the claim. It saves the status and emits the event only when&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L774&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;774&quot;/&gt;
&lt;td id=&quot;LC774&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; the status has actually changed from the version saved in API server.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L775&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;775&quot;/&gt;
&lt;td id=&quot;LC775&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Parameters:&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L776&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;776&quot;/&gt;
&lt;td id=&quot;LC776&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; claim - claim to update&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L777&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;777&quot;/&gt;
&lt;td id=&quot;LC777&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; phase - phase to set&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L778&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;778&quot;/&gt;
&lt;td id=&quot;LC778&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; volume - volume which Capacity is set into claim.Status.Capacity&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L779&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;779&quot;/&gt;
&lt;td id=&quot;LC779&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; eventtype, reason, message - event to send, see EventRecorder.Event()&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;10&quot;&gt;&lt;td id=&quot;L780&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;780&quot;/&gt;
&lt;td id=&quot;LC780&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;updateClaimStatusWithEvent&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;claim&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeClaim&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;phase&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeClaimPhase&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;volume&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolume&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;eventtype&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;reason&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt;) (*&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeClaim&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt;) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L781&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;781&quot;/&gt;
&lt;td id=&quot;LC781&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;updating updateClaimStatusWithEvent[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: set phase &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), phase)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L782&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;782&quot;/&gt;
&lt;td id=&quot;LC782&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; claim.&lt;span class=&quot;pl-smi&quot;&gt;Status&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Phase&lt;/span&gt; == phase {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L783&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;783&quot;/&gt;
&lt;td id=&quot;LC783&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Nothing to do.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L784&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;784&quot;/&gt;
&lt;td id=&quot;LC784&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;updating updateClaimStatusWithEvent[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: phase &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt; already set&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), phase)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L785&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;785&quot;/&gt;
&lt;td id=&quot;LC785&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; claim, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L786&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;786&quot;/&gt;
&lt;td id=&quot;LC786&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L787&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;787&quot;/&gt;
&lt;td id=&quot;LC787&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L788&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;788&quot;/&gt;
&lt;td id=&quot;LC788&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;newClaim&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-c1&quot;&gt;updateClaimStatus&lt;/span&gt;(claim, phase, volume)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L789&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;789&quot;/&gt;
&lt;td id=&quot;LC789&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L790&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;790&quot;/&gt;
&lt;td id=&quot;LC790&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;, err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L791&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;791&quot;/&gt;
&lt;td id=&quot;LC791&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L792&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;792&quot;/&gt;
&lt;td id=&quot;LC792&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L793&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;793&quot;/&gt;
&lt;td id=&quot;LC793&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Emit the event only when the status change happens, not every time&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L794&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;794&quot;/&gt;
&lt;td id=&quot;LC794&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; syncClaim is called.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L795&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;795&quot;/&gt;
&lt;td id=&quot;LC795&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;claim &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; changed status to &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), phase, message)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L796&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;796&quot;/&gt;
&lt;td id=&quot;LC796&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ctrl.&lt;span class=&quot;pl-smi&quot;&gt;eventRecorder&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Event&lt;/span&gt;(newClaim, eventtype, reason, message)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L797&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;797&quot;/&gt;
&lt;td id=&quot;LC797&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L798&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;798&quot;/&gt;
&lt;td id=&quot;LC798&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; newClaim, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L799&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;799&quot;/&gt;
&lt;td id=&quot;LC799&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L800&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;800&quot;/&gt;
&lt;td id=&quot;LC800&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L801&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;801&quot;/&gt;
&lt;td id=&quot;LC801&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; updateVolumePhase saves new volume phase to API server.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L802&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;802&quot;/&gt;
&lt;td id=&quot;LC802&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;updateVolumePhase&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;volume&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolume&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;phase&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumePhase&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt;) (*&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolume&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt;) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L803&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;803&quot;/&gt;
&lt;td id=&quot;LC803&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;updating PersistentVolume[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: set phase &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, phase)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L804&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;804&quot;/&gt;
&lt;td id=&quot;LC804&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; volume.&lt;span class=&quot;pl-smi&quot;&gt;Status&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Phase&lt;/span&gt; == phase {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L805&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;805&quot;/&gt;
&lt;td id=&quot;LC805&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Nothing to do.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L806&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;806&quot;/&gt;
&lt;td id=&quot;LC806&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;updating PersistentVolume[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: phase &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt; already set&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, phase)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L807&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;807&quot;/&gt;
&lt;td id=&quot;LC807&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; volume, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L808&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;808&quot;/&gt;
&lt;td id=&quot;LC808&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L809&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;809&quot;/&gt;
&lt;td id=&quot;LC809&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L810&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;810&quot;/&gt;
&lt;td id=&quot;LC810&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;volumeClone&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; volume.&lt;span class=&quot;pl-c1&quot;&gt;DeepCopy&lt;/span&gt;()&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L811&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;811&quot;/&gt;
&lt;td id=&quot;LC811&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;volumeClone.&lt;span class=&quot;pl-smi&quot;&gt;Status&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Phase&lt;/span&gt; = phase&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L812&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;812&quot;/&gt;
&lt;td id=&quot;LC812&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;volumeClone.&lt;span class=&quot;pl-smi&quot;&gt;Status&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Message&lt;/span&gt; = message&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L813&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;813&quot;/&gt;
&lt;td id=&quot;LC813&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L814&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;814&quot;/&gt;
&lt;td id=&quot;LC814&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;newVol&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-smi&quot;&gt;kubeClient&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;CoreV1&lt;/span&gt;().&lt;span class=&quot;pl-c1&quot;&gt;PersistentVolumes&lt;/span&gt;().&lt;span class=&quot;pl-c1&quot;&gt;UpdateStatus&lt;/span&gt;(volumeClone)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L815&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;815&quot;/&gt;
&lt;td id=&quot;LC815&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L816&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;816&quot;/&gt;
&lt;td id=&quot;LC816&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;updating PersistentVolume[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: set phase &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt; failed: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, phase, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L817&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;817&quot;/&gt;
&lt;td id=&quot;LC817&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; newVol, err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L818&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;818&quot;/&gt;
&lt;td id=&quot;LC818&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L819&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;819&quot;/&gt;
&lt;td id=&quot;LC819&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;_, err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;storeVolumeUpdate&lt;/span&gt;(newVol)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L820&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;820&quot;/&gt;
&lt;td id=&quot;LC820&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L821&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;821&quot;/&gt;
&lt;td id=&quot;LC821&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;updating PersistentVolume[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: cannot update internal cache: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L822&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;822&quot;/&gt;
&lt;td id=&quot;LC822&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; newVol, err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L823&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;823&quot;/&gt;
&lt;td id=&quot;LC823&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L824&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;824&quot;/&gt;
&lt;td id=&quot;LC824&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; entered phase &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, phase)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L825&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;825&quot;/&gt;
&lt;td id=&quot;LC825&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; newVol, err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L826&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;826&quot;/&gt;
&lt;td id=&quot;LC826&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L827&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;827&quot;/&gt;
&lt;td id=&quot;LC827&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L828&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;828&quot;/&gt;
&lt;td id=&quot;LC828&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; updateVolumePhaseWithEvent saves new volume phase to API server and emits&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L829&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;829&quot;/&gt;
&lt;td id=&quot;LC829&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; given event on the volume. It saves the phase and emits the event only when&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L830&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;830&quot;/&gt;
&lt;td id=&quot;LC830&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; the phase has actually changed from the version saved in API server.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;8&quot;&gt;&lt;td id=&quot;L831&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;831&quot;/&gt;
&lt;td id=&quot;LC831&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;updateVolumePhaseWithEvent&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;volume&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolume&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;phase&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumePhase&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;eventtype&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;reason&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt;) (*&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolume&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt;) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L832&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;832&quot;/&gt;
&lt;td id=&quot;LC832&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;updating updateVolumePhaseWithEvent[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: set phase &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, phase)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L833&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;833&quot;/&gt;
&lt;td id=&quot;LC833&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; volume.&lt;span class=&quot;pl-smi&quot;&gt;Status&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Phase&lt;/span&gt; == phase {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L834&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;834&quot;/&gt;
&lt;td id=&quot;LC834&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Nothing to do.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L835&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;835&quot;/&gt;
&lt;td id=&quot;LC835&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;updating updateVolumePhaseWithEvent[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: phase &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt; already set&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, phase)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L836&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;836&quot;/&gt;
&lt;td id=&quot;LC836&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; volume, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L837&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;837&quot;/&gt;
&lt;td id=&quot;LC837&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L838&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;838&quot;/&gt;
&lt;td id=&quot;LC838&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L839&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;839&quot;/&gt;
&lt;td id=&quot;LC839&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;newVol&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-c1&quot;&gt;updateVolumePhase&lt;/span&gt;(volume, phase, message)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L840&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;840&quot;/&gt;
&lt;td id=&quot;LC840&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L841&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;841&quot;/&gt;
&lt;td id=&quot;LC841&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;, err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L842&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;842&quot;/&gt;
&lt;td id=&quot;LC842&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L843&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;843&quot;/&gt;
&lt;td id=&quot;LC843&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L844&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;844&quot;/&gt;
&lt;td id=&quot;LC844&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Emit the event only when the status change happens, not every time&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L845&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;845&quot;/&gt;
&lt;td id=&quot;LC845&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; syncClaim is called.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L846&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;846&quot;/&gt;
&lt;td id=&quot;LC846&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; changed status to &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, phase, message)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L847&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;847&quot;/&gt;
&lt;td id=&quot;LC847&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ctrl.&lt;span class=&quot;pl-smi&quot;&gt;eventRecorder&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Event&lt;/span&gt;(newVol, eventtype, reason, message)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L848&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;848&quot;/&gt;
&lt;td id=&quot;LC848&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L849&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;849&quot;/&gt;
&lt;td id=&quot;LC849&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; newVol, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L850&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;850&quot;/&gt;
&lt;td id=&quot;LC850&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L851&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;851&quot;/&gt;
&lt;td id=&quot;LC851&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L852&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;852&quot;/&gt;
&lt;td id=&quot;LC852&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; bindVolumeToClaim modifies given volume to be bound to a claim and saves it to&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L853&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;853&quot;/&gt;
&lt;td id=&quot;LC853&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; API server. The claim is not modified in this method!&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L854&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;854&quot;/&gt;
&lt;td id=&quot;LC854&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;bindVolumeToClaim&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;volume&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolume&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;claim&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeClaim&lt;/span&gt;) (*&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolume&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt;) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L855&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;855&quot;/&gt;
&lt;td id=&quot;LC855&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;updating PersistentVolume[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: binding to &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim))&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L856&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;856&quot;/&gt;
&lt;td id=&quot;LC856&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L857&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;857&quot;/&gt;
&lt;td id=&quot;LC857&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;volumeClone&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;dirty&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-c1&quot;&gt;getBindVolumeToClaim&lt;/span&gt;(volume, claim)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L858&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;858&quot;/&gt;
&lt;td id=&quot;LC858&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L859&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;859&quot;/&gt;
&lt;td id=&quot;LC859&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;, err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L860&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;860&quot;/&gt;
&lt;td id=&quot;LC860&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L861&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;861&quot;/&gt;
&lt;td id=&quot;LC861&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L862&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;862&quot;/&gt;
&lt;td id=&quot;LC862&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Save the volume only if something was changed&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L863&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;863&quot;/&gt;
&lt;td id=&quot;LC863&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; dirty {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L864&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;864&quot;/&gt;
&lt;td id=&quot;LC864&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; ctrl.&lt;span class=&quot;pl-c1&quot;&gt;updateBindVolumeToClaim&lt;/span&gt;(volumeClone, claim, &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L865&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;865&quot;/&gt;
&lt;td id=&quot;LC865&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L866&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;866&quot;/&gt;
&lt;td id=&quot;LC866&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L867&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;867&quot;/&gt;
&lt;td id=&quot;LC867&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;updating PersistentVolume[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: already bound to &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim))&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L868&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;868&quot;/&gt;
&lt;td id=&quot;LC868&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; volume, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L869&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;869&quot;/&gt;
&lt;td id=&quot;LC869&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L870&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;870&quot;/&gt;
&lt;td id=&quot;LC870&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L871&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;871&quot;/&gt;
&lt;td id=&quot;LC871&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; bindVolumeToClaim modifies given volume to be bound to a claim and saves it to&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L872&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;872&quot;/&gt;
&lt;td id=&quot;LC872&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; API server. The claim is not modified in this method!&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L873&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;873&quot;/&gt;
&lt;td id=&quot;LC873&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;updateBindVolumeToClaim&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;volumeClone&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolume&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;claim&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeClaim&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;updateCache&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;bool&lt;/span&gt;) (*&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolume&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt;) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L874&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;874&quot;/&gt;
&lt;td id=&quot;LC874&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;claim &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; bound to volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), volumeClone.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L875&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;875&quot;/&gt;
&lt;td id=&quot;LC875&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;newVol&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-smi&quot;&gt;kubeClient&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;CoreV1&lt;/span&gt;().&lt;span class=&quot;pl-c1&quot;&gt;PersistentVolumes&lt;/span&gt;().&lt;span class=&quot;pl-c1&quot;&gt;Update&lt;/span&gt;(volumeClone)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L876&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;876&quot;/&gt;
&lt;td id=&quot;LC876&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L877&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;877&quot;/&gt;
&lt;td id=&quot;LC877&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;updating PersistentVolume[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: binding to &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; failed: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volumeClone.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L878&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;878&quot;/&gt;
&lt;td id=&quot;LC878&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; newVol, err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L879&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;879&quot;/&gt;
&lt;td id=&quot;LC879&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L880&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;880&quot;/&gt;
&lt;td id=&quot;LC880&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; updateCache {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L881&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;881&quot;/&gt;
&lt;td id=&quot;LC881&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;_, err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;storeVolumeUpdate&lt;/span&gt;(newVol)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L882&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;882&quot;/&gt;
&lt;td id=&quot;LC882&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L883&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;883&quot;/&gt;
&lt;td id=&quot;LC883&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;updating PersistentVolume[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: cannot update internal cache: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volumeClone.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L884&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;884&quot;/&gt;
&lt;td id=&quot;LC884&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; newVol, err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L885&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;885&quot;/&gt;
&lt;td id=&quot;LC885&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L886&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;886&quot;/&gt;
&lt;td id=&quot;LC886&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L887&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;887&quot;/&gt;
&lt;td id=&quot;LC887&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;updating PersistentVolume[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: bound to &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, newVol.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim))&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L888&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;888&quot;/&gt;
&lt;td id=&quot;LC888&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; newVol, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L889&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;889&quot;/&gt;
&lt;td id=&quot;LC889&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L890&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;890&quot;/&gt;
&lt;td id=&quot;LC890&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L891&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;891&quot;/&gt;
&lt;td id=&quot;LC891&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Get new PV object only, no API or cache update&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L892&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;892&quot;/&gt;
&lt;td id=&quot;LC892&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;getBindVolumeToClaim&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;volume&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolume&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;claim&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeClaim&lt;/span&gt;) (*&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolume&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;bool&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt;) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L893&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;893&quot;/&gt;
&lt;td id=&quot;LC893&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;dirty&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L894&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;894&quot;/&gt;
&lt;td id=&quot;LC894&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L895&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;895&quot;/&gt;
&lt;td id=&quot;LC895&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Check if the volume was already bound (either by user or by controller)&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L896&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;896&quot;/&gt;
&lt;td id=&quot;LC896&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;shouldSetBoundByController&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L897&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;897&quot;/&gt;
&lt;td id=&quot;LC897&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !&lt;span class=&quot;pl-c1&quot;&gt;isVolumeBoundToClaim&lt;/span&gt;(volume, claim) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L898&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;898&quot;/&gt;
&lt;td id=&quot;LC898&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;shouldSetBoundByController = &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L899&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;899&quot;/&gt;
&lt;td id=&quot;LC899&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L900&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;900&quot;/&gt;
&lt;td id=&quot;LC900&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L901&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;901&quot;/&gt;
&lt;td id=&quot;LC901&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; The volume from method args can be pointing to watcher cache. We must not&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L902&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;902&quot;/&gt;
&lt;td id=&quot;LC902&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; modify these, therefore create a copy.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L903&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;903&quot;/&gt;
&lt;td id=&quot;LC903&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;volumeClone&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; volume.&lt;span class=&quot;pl-c1&quot;&gt;DeepCopy&lt;/span&gt;()&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L904&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;904&quot;/&gt;
&lt;td id=&quot;LC904&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L905&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;905&quot;/&gt;
&lt;td id=&quot;LC905&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Bind the volume to the claim if it is not bound yet&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L906&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;906&quot;/&gt;
&lt;td id=&quot;LC906&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt; == &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; ||&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L907&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;907&quot;/&gt;
&lt;td id=&quot;LC907&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt; != claim.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt; ||&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L908&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;908&quot;/&gt;
&lt;td id=&quot;LC908&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Namespace&lt;/span&gt; != claim.&lt;span class=&quot;pl-smi&quot;&gt;Namespace&lt;/span&gt; ||&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L909&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;909&quot;/&gt;
&lt;td id=&quot;LC909&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;UID&lt;/span&gt; != claim.&lt;span class=&quot;pl-smi&quot;&gt;UID&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L910&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;910&quot;/&gt;
&lt;td id=&quot;LC910&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L911&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;911&quot;/&gt;
&lt;td id=&quot;LC911&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;claimRef&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ref.&lt;span class=&quot;pl-c1&quot;&gt;GetReference&lt;/span&gt;(scheme.&lt;span class=&quot;pl-smi&quot;&gt;Scheme&lt;/span&gt;, claim)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L912&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;912&quot;/&gt;
&lt;td id=&quot;LC912&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L913&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;913&quot;/&gt;
&lt;td id=&quot;LC913&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt;, fmt.&lt;span class=&quot;pl-c1&quot;&gt;Errorf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Unexpected error getting claim reference: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L914&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;914&quot;/&gt;
&lt;td id=&quot;LC914&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L915&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;915&quot;/&gt;
&lt;td id=&quot;LC915&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;volumeClone.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt; = claimRef&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L916&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;916&quot;/&gt;
&lt;td id=&quot;LC916&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;dirty = &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L917&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;917&quot;/&gt;
&lt;td id=&quot;LC917&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L918&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;918&quot;/&gt;
&lt;td id=&quot;LC918&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L919&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;919&quot;/&gt;
&lt;td id=&quot;LC919&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Set annBoundByController if it is not set yet&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L920&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;920&quot;/&gt;
&lt;td id=&quot;LC920&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; shouldSetBoundByController &amp;amp;&amp;amp; !metav1.&lt;span class=&quot;pl-c1&quot;&gt;HasAnnotation&lt;/span&gt;(volumeClone.&lt;span class=&quot;pl-smi&quot;&gt;ObjectMeta&lt;/span&gt;, annBoundByController) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L921&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;921&quot;/&gt;
&lt;td id=&quot;LC921&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;metav1.&lt;span class=&quot;pl-c1&quot;&gt;SetMetaDataAnnotation&lt;/span&gt;(&amp;amp;volumeClone.&lt;span class=&quot;pl-smi&quot;&gt;ObjectMeta&lt;/span&gt;, annBoundByController, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;yes&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L922&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;922&quot;/&gt;
&lt;td id=&quot;LC922&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;dirty = &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L923&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;923&quot;/&gt;
&lt;td id=&quot;LC923&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L924&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;924&quot;/&gt;
&lt;td id=&quot;LC924&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L925&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;925&quot;/&gt;
&lt;td id=&quot;LC925&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; volumeClone, dirty, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L926&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;926&quot;/&gt;
&lt;td id=&quot;LC926&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L927&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;927&quot;/&gt;
&lt;td id=&quot;LC927&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L928&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;928&quot;/&gt;
&lt;td id=&quot;LC928&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; bindClaimToVolume modifies the given claim to be bound to a volume and&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L929&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;929&quot;/&gt;
&lt;td id=&quot;LC929&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; saves it to API server. The volume is not modified in this method!&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L930&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;930&quot;/&gt;
&lt;td id=&quot;LC930&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;bindClaimToVolume&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;claim&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeClaim&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;volume&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolume&lt;/span&gt;) (*&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeClaim&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt;) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L931&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;931&quot;/&gt;
&lt;td id=&quot;LC931&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;updating PersistentVolumeClaim[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: binding to &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L932&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;932&quot;/&gt;
&lt;td id=&quot;LC932&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L933&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;933&quot;/&gt;
&lt;td id=&quot;LC933&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;dirty&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L934&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;934&quot;/&gt;
&lt;td id=&quot;LC934&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L935&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;935&quot;/&gt;
&lt;td id=&quot;LC935&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Check if the claim was already bound (either by controller or by user)&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L936&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;936&quot;/&gt;
&lt;td id=&quot;LC936&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;shouldBind&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L937&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;937&quot;/&gt;
&lt;td id=&quot;LC937&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt; != claim.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;VolumeName&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L938&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;938&quot;/&gt;
&lt;td id=&quot;LC938&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;shouldBind = &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L939&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;939&quot;/&gt;
&lt;td id=&quot;LC939&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L940&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;940&quot;/&gt;
&lt;td id=&quot;LC940&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L941&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;941&quot;/&gt;
&lt;td id=&quot;LC941&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; The claim from method args can be pointing to watcher cache. We must not&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L942&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;942&quot;/&gt;
&lt;td id=&quot;LC942&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; modify these, therefore create a copy.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L943&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;943&quot;/&gt;
&lt;td id=&quot;LC943&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;claimClone&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; claim.&lt;span class=&quot;pl-c1&quot;&gt;DeepCopy&lt;/span&gt;()&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L944&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;944&quot;/&gt;
&lt;td id=&quot;LC944&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L945&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;945&quot;/&gt;
&lt;td id=&quot;LC945&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; shouldBind {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L946&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;946&quot;/&gt;
&lt;td id=&quot;LC946&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;dirty = &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L947&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;947&quot;/&gt;
&lt;td id=&quot;LC947&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Bind the claim to the volume&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L948&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;948&quot;/&gt;
&lt;td id=&quot;LC948&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;claimClone.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;VolumeName&lt;/span&gt; = volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L949&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;949&quot;/&gt;
&lt;td id=&quot;LC949&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L950&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;950&quot;/&gt;
&lt;td id=&quot;LC950&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Set annBoundByController if it is not set yet&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L951&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;951&quot;/&gt;
&lt;td id=&quot;LC951&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !metav1.&lt;span class=&quot;pl-c1&quot;&gt;HasAnnotation&lt;/span&gt;(claimClone.&lt;span class=&quot;pl-smi&quot;&gt;ObjectMeta&lt;/span&gt;, annBoundByController) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L952&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;952&quot;/&gt;
&lt;td id=&quot;LC952&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;metav1.&lt;span class=&quot;pl-c1&quot;&gt;SetMetaDataAnnotation&lt;/span&gt;(&amp;amp;claimClone.&lt;span class=&quot;pl-smi&quot;&gt;ObjectMeta&lt;/span&gt;, annBoundByController, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;yes&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L953&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;953&quot;/&gt;
&lt;td id=&quot;LC953&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L954&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;954&quot;/&gt;
&lt;td id=&quot;LC954&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L955&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;955&quot;/&gt;
&lt;td id=&quot;LC955&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L956&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;956&quot;/&gt;
&lt;td id=&quot;LC956&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Set annBindCompleted if it is not set yet&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L957&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;957&quot;/&gt;
&lt;td id=&quot;LC957&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !metav1.&lt;span class=&quot;pl-c1&quot;&gt;HasAnnotation&lt;/span&gt;(claimClone.&lt;span class=&quot;pl-smi&quot;&gt;ObjectMeta&lt;/span&gt;, annBindCompleted) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L958&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;958&quot;/&gt;
&lt;td id=&quot;LC958&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;metav1.&lt;span class=&quot;pl-c1&quot;&gt;SetMetaDataAnnotation&lt;/span&gt;(&amp;amp;claimClone.&lt;span class=&quot;pl-smi&quot;&gt;ObjectMeta&lt;/span&gt;, annBindCompleted, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;yes&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L959&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;959&quot;/&gt;
&lt;td id=&quot;LC959&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;dirty = &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L960&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;960&quot;/&gt;
&lt;td id=&quot;LC960&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L961&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;961&quot;/&gt;
&lt;td id=&quot;LC961&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L962&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;962&quot;/&gt;
&lt;td id=&quot;LC962&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; dirty {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L963&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;963&quot;/&gt;
&lt;td id=&quot;LC963&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; bound to claim &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim))&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L964&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;964&quot;/&gt;
&lt;td id=&quot;LC964&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;newClaim&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-smi&quot;&gt;kubeClient&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;CoreV1&lt;/span&gt;().&lt;span class=&quot;pl-c1&quot;&gt;PersistentVolumeClaims&lt;/span&gt;(claim.&lt;span class=&quot;pl-smi&quot;&gt;Namespace&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Update&lt;/span&gt;(claimClone)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L965&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;965&quot;/&gt;
&lt;td id=&quot;LC965&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L966&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;966&quot;/&gt;
&lt;td id=&quot;LC966&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;updating PersistentVolumeClaim[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: binding to &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; failed: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L967&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;967&quot;/&gt;
&lt;td id=&quot;LC967&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; newClaim, err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L968&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;968&quot;/&gt;
&lt;td id=&quot;LC968&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L969&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;969&quot;/&gt;
&lt;td id=&quot;LC969&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;_, err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;storeClaimUpdate&lt;/span&gt;(newClaim)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L970&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;970&quot;/&gt;
&lt;td id=&quot;LC970&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L971&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;971&quot;/&gt;
&lt;td id=&quot;LC971&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;updating PersistentVolumeClaim[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: cannot update internal cache: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L972&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;972&quot;/&gt;
&lt;td id=&quot;LC972&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; newClaim, err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L973&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;973&quot;/&gt;
&lt;td id=&quot;LC973&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L974&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;974&quot;/&gt;
&lt;td id=&quot;LC974&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;updating PersistentVolumeClaim[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: bound to &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L975&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;975&quot;/&gt;
&lt;td id=&quot;LC975&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; newClaim, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L976&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;976&quot;/&gt;
&lt;td id=&quot;LC976&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L977&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;977&quot;/&gt;
&lt;td id=&quot;LC977&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L978&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;978&quot;/&gt;
&lt;td id=&quot;LC978&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;updating PersistentVolumeClaim[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: already bound to &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L979&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;979&quot;/&gt;
&lt;td id=&quot;LC979&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; claim, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L980&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;980&quot;/&gt;
&lt;td id=&quot;LC980&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L981&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;981&quot;/&gt;
&lt;td id=&quot;LC981&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L982&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;982&quot;/&gt;
&lt;td id=&quot;LC982&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; bind saves binding information both to the volume and the claim and marks&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L983&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;983&quot;/&gt;
&lt;td id=&quot;LC983&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; both objects as Bound. Volume is saved first.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L984&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;984&quot;/&gt;
&lt;td id=&quot;LC984&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; It returns on first error, it's up to the caller to implement some retry&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L985&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;985&quot;/&gt;
&lt;td id=&quot;LC985&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; mechanism.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L986&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;986&quot;/&gt;
&lt;td id=&quot;LC986&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;bind&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;volume&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolume&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;claim&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeClaim&lt;/span&gt;) &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L987&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;987&quot;/&gt;
&lt;td id=&quot;LC987&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;error&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L988&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;988&quot;/&gt;
&lt;td id=&quot;LC988&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; use updateClaim/updatedVolume to keep the original claim/volume for&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L989&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;989&quot;/&gt;
&lt;td id=&quot;LC989&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; logging in error cases.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L990&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;990&quot;/&gt;
&lt;td id=&quot;LC990&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;updatedClaim&lt;/span&gt; *v1.&lt;span class=&quot;pl-smi&quot;&gt;PersistentVolumeClaim&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L991&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;991&quot;/&gt;
&lt;td id=&quot;LC991&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;updatedVolume&lt;/span&gt; *v1.&lt;span class=&quot;pl-smi&quot;&gt;PersistentVolume&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L992&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;992&quot;/&gt;
&lt;td id=&quot;LC992&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L993&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;993&quot;/&gt;
&lt;td id=&quot;LC993&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;binding volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; to claim &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim))&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L994&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;994&quot;/&gt;
&lt;td id=&quot;LC994&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L995&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;995&quot;/&gt;
&lt;td id=&quot;LC995&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; updatedVolume, err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;bindVolumeToClaim&lt;/span&gt;(volume, claim); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L996&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;996&quot;/&gt;
&lt;td id=&quot;LC996&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;error binding volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; to claim &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;: failed saving the volume: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L997&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;997&quot;/&gt;
&lt;td id=&quot;LC997&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L998&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;998&quot;/&gt;
&lt;td id=&quot;LC998&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L999&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;999&quot;/&gt;
&lt;td id=&quot;LC999&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;volume = updatedVolume&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1000&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1000&quot;/&gt;
&lt;td id=&quot;LC1000&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1001&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1001&quot;/&gt;
&lt;td id=&quot;LC1001&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; updatedVolume, err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;updateVolumePhase&lt;/span&gt;(volume, v1.&lt;span class=&quot;pl-smi&quot;&gt;VolumeBound&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L1002&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1002&quot;/&gt;
&lt;td id=&quot;LC1002&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;error binding volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; to claim &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;: failed saving the volume status: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1003&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1003&quot;/&gt;
&lt;td id=&quot;LC1003&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1004&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1004&quot;/&gt;
&lt;td id=&quot;LC1004&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1005&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1005&quot;/&gt;
&lt;td id=&quot;LC1005&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;volume = updatedVolume&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1006&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1006&quot;/&gt;
&lt;td id=&quot;LC1006&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1007&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1007&quot;/&gt;
&lt;td id=&quot;LC1007&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; updatedClaim, err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;bindClaimToVolume&lt;/span&gt;(claim, volume); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L1008&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1008&quot;/&gt;
&lt;td id=&quot;LC1008&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;error binding volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; to claim &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;: failed saving the claim: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1009&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1009&quot;/&gt;
&lt;td id=&quot;LC1009&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1010&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1010&quot;/&gt;
&lt;td id=&quot;LC1010&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1011&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1011&quot;/&gt;
&lt;td id=&quot;LC1011&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;claim = updatedClaim&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1012&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1012&quot;/&gt;
&lt;td id=&quot;LC1012&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1013&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1013&quot;/&gt;
&lt;td id=&quot;LC1013&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; updatedClaim, err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;updateClaimStatus&lt;/span&gt;(claim, v1.&lt;span class=&quot;pl-smi&quot;&gt;ClaimBound&lt;/span&gt;, volume); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L1014&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1014&quot;/&gt;
&lt;td id=&quot;LC1014&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;error binding volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; to claim &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;: failed saving the claim status: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1015&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1015&quot;/&gt;
&lt;td id=&quot;LC1015&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1016&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1016&quot;/&gt;
&lt;td id=&quot;LC1016&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1017&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1017&quot;/&gt;
&lt;td id=&quot;LC1017&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;claim = updatedClaim&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1018&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1018&quot;/&gt;
&lt;td id=&quot;LC1018&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1019&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1019&quot;/&gt;
&lt;td id=&quot;LC1019&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; bound to claim &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim))&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1020&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1020&quot;/&gt;
&lt;td id=&quot;LC1020&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; status after binding: &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;getVolumeStatusForLogging&lt;/span&gt;(volume))&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1021&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1021&quot;/&gt;
&lt;td id=&quot;LC1021&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;claim &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; status after binding: &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), &lt;span class=&quot;pl-c1&quot;&gt;getClaimStatusForLogging&lt;/span&gt;(claim))&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1022&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1022&quot;/&gt;
&lt;td id=&quot;LC1022&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1023&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1023&quot;/&gt;
&lt;td id=&quot;LC1023&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1024&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1024&quot;/&gt;
&lt;td id=&quot;LC1024&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1025&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1025&quot;/&gt;
&lt;td id=&quot;LC1025&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; unbindVolume rolls back previous binding of the volume. This may be necessary&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1026&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1026&quot;/&gt;
&lt;td id=&quot;LC1026&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; when two controllers bound two volumes to single claim - when we detect this,&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1027&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1027&quot;/&gt;
&lt;td id=&quot;LC1027&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; only one binding succeeds and the second one must be rolled back.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1028&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1028&quot;/&gt;
&lt;td id=&quot;LC1028&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; This method updates both Spec and Status.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1029&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1029&quot;/&gt;
&lt;td id=&quot;LC1029&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; It returns on first error, it's up to the caller to implement some retry&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1030&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1030&quot;/&gt;
&lt;td id=&quot;LC1030&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; mechanism.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1031&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1031&quot;/&gt;
&lt;td id=&quot;LC1031&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;unbindVolume&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;volume&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolume&lt;/span&gt;) &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1032&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1032&quot;/&gt;
&lt;td id=&quot;LC1032&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;updating PersistentVolume[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: rolling back binding from &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimrefToClaimKey&lt;/span&gt;(volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt;))&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1033&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1033&quot;/&gt;
&lt;td id=&quot;LC1033&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1034&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1034&quot;/&gt;
&lt;td id=&quot;LC1034&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Save the PV only when any modification is necessary.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1035&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1035&quot;/&gt;
&lt;td id=&quot;LC1035&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;volumeClone&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; volume.&lt;span class=&quot;pl-c1&quot;&gt;DeepCopy&lt;/span&gt;()&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1036&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1036&quot;/&gt;
&lt;td id=&quot;LC1036&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1037&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1037&quot;/&gt;
&lt;td id=&quot;LC1037&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; metav1.&lt;span class=&quot;pl-c1&quot;&gt;HasAnnotation&lt;/span&gt;(volume.&lt;span class=&quot;pl-smi&quot;&gt;ObjectMeta&lt;/span&gt;, annBoundByController) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1038&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1038&quot;/&gt;
&lt;td id=&quot;LC1038&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; The volume was bound by the controller.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1039&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1039&quot;/&gt;
&lt;td id=&quot;LC1039&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;volumeClone.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt; = &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1040&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1040&quot;/&gt;
&lt;td id=&quot;LC1040&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c1&quot;&gt;delete&lt;/span&gt;(volumeClone.&lt;span class=&quot;pl-smi&quot;&gt;Annotations&lt;/span&gt;, annBoundByController)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1041&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1041&quot;/&gt;
&lt;td id=&quot;LC1041&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;len&lt;/span&gt;(volumeClone.&lt;span class=&quot;pl-smi&quot;&gt;Annotations&lt;/span&gt;) == &lt;span class=&quot;pl-c1&quot;&gt;0&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1042&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1042&quot;/&gt;
&lt;td id=&quot;LC1042&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; No annotations look better than empty annotation map (and it's easier&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1043&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1043&quot;/&gt;
&lt;td id=&quot;LC1043&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; to test).&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1044&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1044&quot;/&gt;
&lt;td id=&quot;LC1044&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;volumeClone.&lt;span class=&quot;pl-smi&quot;&gt;Annotations&lt;/span&gt; = &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1045&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1045&quot;/&gt;
&lt;td id=&quot;LC1045&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1046&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1046&quot;/&gt;
&lt;td id=&quot;LC1046&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;} &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1047&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1047&quot;/&gt;
&lt;td id=&quot;LC1047&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; The volume was pre-bound by user. Clear only the binging UID.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1048&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1048&quot;/&gt;
&lt;td id=&quot;LC1048&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;volumeClone.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;UID&lt;/span&gt; = &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1049&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1049&quot;/&gt;
&lt;td id=&quot;LC1049&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1050&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1050&quot;/&gt;
&lt;td id=&quot;LC1050&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1051&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1051&quot;/&gt;
&lt;td id=&quot;LC1051&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;newVol&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-smi&quot;&gt;kubeClient&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;CoreV1&lt;/span&gt;().&lt;span class=&quot;pl-c1&quot;&gt;PersistentVolumes&lt;/span&gt;().&lt;span class=&quot;pl-c1&quot;&gt;Update&lt;/span&gt;(volumeClone)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1052&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1052&quot;/&gt;
&lt;td id=&quot;LC1052&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1053&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1053&quot;/&gt;
&lt;td id=&quot;LC1053&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;updating PersistentVolume[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: rollback failed: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1054&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1054&quot;/&gt;
&lt;td id=&quot;LC1054&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1055&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1055&quot;/&gt;
&lt;td id=&quot;LC1055&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1056&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1056&quot;/&gt;
&lt;td id=&quot;LC1056&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;_, err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;storeVolumeUpdate&lt;/span&gt;(newVol)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1057&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1057&quot;/&gt;
&lt;td id=&quot;LC1057&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1058&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1058&quot;/&gt;
&lt;td id=&quot;LC1058&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;updating PersistentVolume[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: cannot update internal cache: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1059&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1059&quot;/&gt;
&lt;td id=&quot;LC1059&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1060&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1060&quot;/&gt;
&lt;td id=&quot;LC1060&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1061&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1061&quot;/&gt;
&lt;td id=&quot;LC1061&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;updating PersistentVolume[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: rolled back&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, newVol.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1062&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1062&quot;/&gt;
&lt;td id=&quot;LC1062&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1063&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1063&quot;/&gt;
&lt;td id=&quot;LC1063&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Update the status&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1064&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1064&quot;/&gt;
&lt;td id=&quot;LC1064&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;_, err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;updateVolumePhase&lt;/span&gt;(newVol, v1.&lt;span class=&quot;pl-smi&quot;&gt;VolumeAvailable&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1065&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1065&quot;/&gt;
&lt;td id=&quot;LC1065&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1066&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1066&quot;/&gt;
&lt;td id=&quot;LC1066&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1067&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1067&quot;/&gt;
&lt;td id=&quot;LC1067&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1068&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1068&quot;/&gt;
&lt;td id=&quot;LC1068&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; reclaimVolume implements volume.Spec.PersistentVolumeReclaimPolicy and&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1069&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1069&quot;/&gt;
&lt;td id=&quot;LC1069&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; starts appropriate reclaim action.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1070&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1070&quot;/&gt;
&lt;td id=&quot;LC1070&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;reclaimVolume&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;volume&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolume&lt;/span&gt;) &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1071&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1071&quot;/&gt;
&lt;td id=&quot;LC1071&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;switch&lt;/span&gt; volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;PersistentVolumeReclaimPolicy&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1072&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1072&quot;/&gt;
&lt;td id=&quot;LC1072&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;case&lt;/span&gt; v1.&lt;span class=&quot;pl-smi&quot;&gt;PersistentVolumeReclaimRetain&lt;/span&gt;:&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1073&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1073&quot;/&gt;
&lt;td id=&quot;LC1073&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;reclaimVolume[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: policy is Retain, nothing to do&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1074&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1074&quot;/&gt;
&lt;td id=&quot;LC1074&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1075&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1075&quot;/&gt;
&lt;td id=&quot;LC1075&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;case&lt;/span&gt; v1.&lt;span class=&quot;pl-smi&quot;&gt;PersistentVolumeReclaimRecycle&lt;/span&gt;:&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1076&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1076&quot;/&gt;
&lt;td id=&quot;LC1076&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;reclaimVolume[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: policy is Recycle&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1077&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1077&quot;/&gt;
&lt;td id=&quot;LC1077&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;opName&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Sprintf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;recycle-&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;string&lt;/span&gt;(volume.&lt;span class=&quot;pl-smi&quot;&gt;UID&lt;/span&gt;))&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1078&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1078&quot;/&gt;
&lt;td id=&quot;LC1078&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ctrl.&lt;span class=&quot;pl-c1&quot;&gt;scheduleOperation&lt;/span&gt;(opName, &lt;span class=&quot;pl-c1&quot;&gt;func&lt;/span&gt;() &lt;span class=&quot;pl-k&quot;&gt;error&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1079&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1079&quot;/&gt;
&lt;td id=&quot;LC1079&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ctrl.&lt;span class=&quot;pl-c1&quot;&gt;recycleVolumeOperation&lt;/span&gt;(volume)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1080&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1080&quot;/&gt;
&lt;td id=&quot;LC1080&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1081&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1081&quot;/&gt;
&lt;td id=&quot;LC1081&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;})&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1082&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1082&quot;/&gt;
&lt;td id=&quot;LC1082&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1083&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1083&quot;/&gt;
&lt;td id=&quot;LC1083&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;case&lt;/span&gt; v1.&lt;span class=&quot;pl-smi&quot;&gt;PersistentVolumeReclaimDelete&lt;/span&gt;:&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1084&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1084&quot;/&gt;
&lt;td id=&quot;LC1084&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;reclaimVolume[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: policy is Delete&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1085&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1085&quot;/&gt;
&lt;td id=&quot;LC1085&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;opName&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Sprintf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;delete-&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;string&lt;/span&gt;(volume.&lt;span class=&quot;pl-smi&quot;&gt;UID&lt;/span&gt;))&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1086&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1086&quot;/&gt;
&lt;td id=&quot;LC1086&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;startTime&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; time.&lt;span class=&quot;pl-c1&quot;&gt;Now&lt;/span&gt;()&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1087&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1087&quot;/&gt;
&lt;td id=&quot;LC1087&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ctrl.&lt;span class=&quot;pl-c1&quot;&gt;scheduleOperation&lt;/span&gt;(opName, &lt;span class=&quot;pl-c1&quot;&gt;func&lt;/span&gt;() &lt;span class=&quot;pl-k&quot;&gt;error&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1088&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1088&quot;/&gt;
&lt;td id=&quot;LC1088&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;pluginName&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-c1&quot;&gt;deleteVolumeOperation&lt;/span&gt;(volume)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1089&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1089&quot;/&gt;
&lt;td id=&quot;LC1089&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;timeTaken&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; time.&lt;span class=&quot;pl-c1&quot;&gt;Since&lt;/span&gt;(startTime).&lt;span class=&quot;pl-c1&quot;&gt;Seconds&lt;/span&gt;()&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1090&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1090&quot;/&gt;
&lt;td id=&quot;LC1090&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;metrics.&lt;span class=&quot;pl-c1&quot;&gt;RecordVolumeOperationMetric&lt;/span&gt;(pluginName, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;delete&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, timeTaken, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1091&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1091&quot;/&gt;
&lt;td id=&quot;LC1091&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1092&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1092&quot;/&gt;
&lt;td id=&quot;LC1092&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;})&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1093&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1093&quot;/&gt;
&lt;td id=&quot;LC1093&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1094&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1094&quot;/&gt;
&lt;td id=&quot;LC1094&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;default&lt;/span&gt;:&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1095&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1095&quot;/&gt;
&lt;td id=&quot;LC1095&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Unknown PersistentVolumeReclaimPolicy&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;8&quot;&gt;&lt;td id=&quot;L1096&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1096&quot;/&gt;
&lt;td id=&quot;LC1096&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;_&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-c1&quot;&gt;updateVolumePhaseWithEvent&lt;/span&gt;(volume, v1.&lt;span class=&quot;pl-smi&quot;&gt;VolumeFailed&lt;/span&gt;, v1.&lt;span class=&quot;pl-smi&quot;&gt;EventTypeWarning&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;VolumeUnknownReclaimPolicy&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Volume has unrecognized PersistentVolumeReclaimPolicy&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1097&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1097&quot;/&gt;
&lt;td id=&quot;LC1097&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1098&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1098&quot;/&gt;
&lt;td id=&quot;LC1098&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1099&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1099&quot;/&gt;
&lt;td id=&quot;LC1099&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1100&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1100&quot;/&gt;
&lt;td id=&quot;LC1100&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1101&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1101&quot;/&gt;
&lt;td id=&quot;LC1101&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1102&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1102&quot;/&gt;
&lt;td id=&quot;LC1102&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1103&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1103&quot;/&gt;
&lt;td id=&quot;LC1103&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; doRerecycleVolumeOperationcycleVolume recycles a volume. This method is&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1104&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1104&quot;/&gt;
&lt;td id=&quot;LC1104&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; running in standalone goroutine and already has all necessary locks.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1105&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1105&quot;/&gt;
&lt;td id=&quot;LC1105&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;recycleVolumeOperation&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;volume&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolume&lt;/span&gt;) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1106&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1106&quot;/&gt;
&lt;td id=&quot;LC1106&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;recycleVolumeOperation [&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;] started&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1107&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1107&quot;/&gt;
&lt;td id=&quot;LC1107&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1108&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1108&quot;/&gt;
&lt;td id=&quot;LC1108&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; This method may have been waiting for a volume lock for some time.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1109&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1109&quot;/&gt;
&lt;td id=&quot;LC1109&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Previous recycleVolumeOperation might just have saved an updated version,&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1110&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1110&quot;/&gt;
&lt;td id=&quot;LC1110&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; so read current volume state now.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1111&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1111&quot;/&gt;
&lt;td id=&quot;LC1111&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;newVolume&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-smi&quot;&gt;kubeClient&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;CoreV1&lt;/span&gt;().&lt;span class=&quot;pl-c1&quot;&gt;PersistentVolumes&lt;/span&gt;().&lt;span class=&quot;pl-c1&quot;&gt;Get&lt;/span&gt;(volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, metav1.&lt;span class=&quot;pl-smi&quot;&gt;GetOptions&lt;/span&gt;{})&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1112&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1112&quot;/&gt;
&lt;td id=&quot;LC1112&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1113&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1113&quot;/&gt;
&lt;td id=&quot;LC1113&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;error reading persistent volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1114&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1114&quot;/&gt;
&lt;td id=&quot;LC1114&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1115&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1115&quot;/&gt;
&lt;td id=&quot;LC1115&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1116&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1116&quot;/&gt;
&lt;td id=&quot;LC1116&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;needsReclaim&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-c1&quot;&gt;isVolumeReleased&lt;/span&gt;(newVolume)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1117&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1117&quot;/&gt;
&lt;td id=&quot;LC1117&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1118&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1118&quot;/&gt;
&lt;td id=&quot;LC1118&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;error reading claim for volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1119&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1119&quot;/&gt;
&lt;td id=&quot;LC1119&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1120&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1120&quot;/&gt;
&lt;td id=&quot;LC1120&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1121&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1121&quot;/&gt;
&lt;td id=&quot;LC1121&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !needsReclaim {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1122&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1122&quot;/&gt;
&lt;td id=&quot;LC1122&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; no longer needs recycling, skipping&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1123&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1123&quot;/&gt;
&lt;td id=&quot;LC1123&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1124&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1124&quot;/&gt;
&lt;td id=&quot;LC1124&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1125&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1125&quot;/&gt;
&lt;td id=&quot;LC1125&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;pods&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;used&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-c1&quot;&gt;isVolumeUsed&lt;/span&gt;(newVolume)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1126&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1126&quot;/&gt;
&lt;td id=&quot;LC1126&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1127&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1127&quot;/&gt;
&lt;td id=&quot;LC1127&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;can't recycle volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1128&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1128&quot;/&gt;
&lt;td id=&quot;LC1128&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1129&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1129&quot;/&gt;
&lt;td id=&quot;LC1129&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1130&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1130&quot;/&gt;
&lt;td id=&quot;LC1130&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1131&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1131&quot;/&gt;
&lt;td id=&quot;LC1131&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Verify the claim is in cache: if so, then it is a different PVC with the same name&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1132&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1132&quot;/&gt;
&lt;td id=&quot;LC1132&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; since the volume is known to be released at this moment. Ths new (cached) PVC must use&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1133&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1133&quot;/&gt;
&lt;td id=&quot;LC1133&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; a different PV -- we checked that the PV is unused in isVolumeReleased.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1134&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1134&quot;/&gt;
&lt;td id=&quot;LC1134&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; So the old PV is safe to be recycled.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1135&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1135&quot;/&gt;
&lt;td id=&quot;LC1135&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;claimName&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;claimrefToClaimKey&lt;/span&gt;(volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1136&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1136&quot;/&gt;
&lt;td id=&quot;LC1136&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;_&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;claimCached&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-smi&quot;&gt;claims&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;GetByKey&lt;/span&gt;(claimName)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1137&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1137&quot;/&gt;
&lt;td id=&quot;LC1137&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1138&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1138&quot;/&gt;
&lt;td id=&quot;LC1138&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;error getting the claim &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt; from cache&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, claimName)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1139&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1139&quot;/&gt;
&lt;td id=&quot;LC1139&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1140&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1140&quot;/&gt;
&lt;td id=&quot;LC1140&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1141&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1141&quot;/&gt;
&lt;td id=&quot;LC1141&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1142&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1142&quot;/&gt;
&lt;td id=&quot;LC1142&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; used &amp;amp;&amp;amp; !claimCached {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1143&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1143&quot;/&gt;
&lt;td id=&quot;LC1143&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;msg&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Sprintf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Volume is used by pods: &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, strings.&lt;span class=&quot;pl-c1&quot;&gt;Join&lt;/span&gt;(pods, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;,&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;))&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1144&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1144&quot;/&gt;
&lt;td id=&quot;LC1144&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;can't recycle volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, msg)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1145&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1145&quot;/&gt;
&lt;td id=&quot;LC1145&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ctrl.&lt;span class=&quot;pl-smi&quot;&gt;eventRecorder&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Event&lt;/span&gt;(volume, v1.&lt;span class=&quot;pl-smi&quot;&gt;EventTypeNormal&lt;/span&gt;, events.&lt;span class=&quot;pl-smi&quot;&gt;VolumeFailedRecycle&lt;/span&gt;, msg)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1146&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1146&quot;/&gt;
&lt;td id=&quot;LC1146&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1147&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1147&quot;/&gt;
&lt;td id=&quot;LC1147&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1148&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1148&quot;/&gt;
&lt;td id=&quot;LC1148&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1149&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1149&quot;/&gt;
&lt;td id=&quot;LC1149&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Use the newest volume copy, this will save us from version conflicts on&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1150&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1150&quot;/&gt;
&lt;td id=&quot;LC1150&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; saving.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1151&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1151&quot;/&gt;
&lt;td id=&quot;LC1151&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;volume = newVolume&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1152&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1152&quot;/&gt;
&lt;td id=&quot;LC1152&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1153&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1153&quot;/&gt;
&lt;td id=&quot;LC1153&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Find a plugin.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1154&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1154&quot;/&gt;
&lt;td id=&quot;LC1154&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;spec&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; vol.&lt;span class=&quot;pl-c1&quot;&gt;NewSpecFromPersistentVolume&lt;/span&gt;(volume, &lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1155&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1155&quot;/&gt;
&lt;td id=&quot;LC1155&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;plugin&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-smi&quot;&gt;volumePluginMgr&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;FindRecyclablePluginBySpec&lt;/span&gt;(spec)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1156&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1156&quot;/&gt;
&lt;td id=&quot;LC1156&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1157&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1157&quot;/&gt;
&lt;td id=&quot;LC1157&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; No recycler found. Emit an event and mark the volume Failed.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;8&quot;&gt;&lt;td id=&quot;L1158&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1158&quot;/&gt;
&lt;td id=&quot;LC1158&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; _, err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;updateVolumePhaseWithEvent&lt;/span&gt;(volume, v1.&lt;span class=&quot;pl-smi&quot;&gt;VolumeFailed&lt;/span&gt;, v1.&lt;span class=&quot;pl-smi&quot;&gt;EventTypeWarning&lt;/span&gt;, events.&lt;span class=&quot;pl-smi&quot;&gt;VolumeFailedRecycle&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;No recycler plugin found for the volume!&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1159&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1159&quot;/&gt;
&lt;td id=&quot;LC1159&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;recycleVolumeOperation [&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: failed to mark volume as failed: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1160&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1160&quot;/&gt;
&lt;td id=&quot;LC1160&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Save failed, retry on the next deletion attempt&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1161&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1161&quot;/&gt;
&lt;td id=&quot;LC1161&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1162&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1162&quot;/&gt;
&lt;td id=&quot;LC1162&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1163&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1163&quot;/&gt;
&lt;td id=&quot;LC1163&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Despite the volume being Failed, the controller will retry recycling&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1164&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1164&quot;/&gt;
&lt;td id=&quot;LC1164&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; the volume in every syncVolume() call.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1165&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1165&quot;/&gt;
&lt;td id=&quot;LC1165&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1166&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1166&quot;/&gt;
&lt;td id=&quot;LC1166&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1167&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1167&quot;/&gt;
&lt;td id=&quot;LC1167&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1168&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1168&quot;/&gt;
&lt;td id=&quot;LC1168&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Plugin found&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1169&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1169&quot;/&gt;
&lt;td id=&quot;LC1169&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;recorder&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-c1&quot;&gt;newRecyclerEventRecorder&lt;/span&gt;(volume)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1170&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1170&quot;/&gt;
&lt;td id=&quot;LC1170&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1171&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1171&quot;/&gt;
&lt;td id=&quot;LC1171&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err = plugin.&lt;span class=&quot;pl-c1&quot;&gt;Recycle&lt;/span&gt;(volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, spec, recorder); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1172&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1172&quot;/&gt;
&lt;td id=&quot;LC1172&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Recycler failed&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1173&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1173&quot;/&gt;
&lt;td id=&quot;LC1173&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;strerr&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Sprintf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Recycle failed: &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;8&quot;&gt;&lt;td id=&quot;L1174&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1174&quot;/&gt;
&lt;td id=&quot;LC1174&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; _, err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;updateVolumePhaseWithEvent&lt;/span&gt;(volume, v1.&lt;span class=&quot;pl-smi&quot;&gt;VolumeFailed&lt;/span&gt;, v1.&lt;span class=&quot;pl-smi&quot;&gt;EventTypeWarning&lt;/span&gt;, events.&lt;span class=&quot;pl-smi&quot;&gt;VolumeFailedRecycle&lt;/span&gt;, strerr); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1175&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1175&quot;/&gt;
&lt;td id=&quot;LC1175&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;recycleVolumeOperation [&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: failed to mark volume as failed: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1176&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1176&quot;/&gt;
&lt;td id=&quot;LC1176&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Save failed, retry on the next deletion attempt&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1177&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1177&quot;/&gt;
&lt;td id=&quot;LC1177&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1178&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1178&quot;/&gt;
&lt;td id=&quot;LC1178&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1179&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1179&quot;/&gt;
&lt;td id=&quot;LC1179&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Despite the volume being Failed, the controller will retry recycling&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1180&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1180&quot;/&gt;
&lt;td id=&quot;LC1180&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; the volume in every syncVolume() call.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1181&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1181&quot;/&gt;
&lt;td id=&quot;LC1181&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1182&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1182&quot;/&gt;
&lt;td id=&quot;LC1182&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1183&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1183&quot;/&gt;
&lt;td id=&quot;LC1183&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1184&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1184&quot;/&gt;
&lt;td id=&quot;LC1184&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; recycled&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1185&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1185&quot;/&gt;
&lt;td id=&quot;LC1185&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Send an event&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1186&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1186&quot;/&gt;
&lt;td id=&quot;LC1186&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ctrl.&lt;span class=&quot;pl-smi&quot;&gt;eventRecorder&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Event&lt;/span&gt;(volume, v1.&lt;span class=&quot;pl-smi&quot;&gt;EventTypeNormal&lt;/span&gt;, events.&lt;span class=&quot;pl-smi&quot;&gt;VolumeRecycled&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Volume recycled&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1187&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1187&quot;/&gt;
&lt;td id=&quot;LC1187&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Make the volume available again&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1188&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1188&quot;/&gt;
&lt;td id=&quot;LC1188&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;unbindVolume&lt;/span&gt;(volume); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1189&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1189&quot;/&gt;
&lt;td id=&quot;LC1189&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Oops, could not save the volume and therefore the controller will&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1190&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1190&quot;/&gt;
&lt;td id=&quot;LC1190&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; recycle the volume again on next update. We _could_ maintain a cache&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1191&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1191&quot;/&gt;
&lt;td id=&quot;LC1191&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; of &quot;recently recycled volumes&quot; and avoid unnecessary recycling, this&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1192&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1192&quot;/&gt;
&lt;td id=&quot;LC1192&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; is left out as future optimization.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L1193&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1193&quot;/&gt;
&lt;td id=&quot;LC1193&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;recycleVolumeOperation [&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: failed to make recycled volume 'Available' (&lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;), we will recycle the volume again&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1194&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1194&quot;/&gt;
&lt;td id=&quot;LC1194&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1195&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1195&quot;/&gt;
&lt;td id=&quot;LC1195&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1196&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1196&quot;/&gt;
&lt;td id=&quot;LC1196&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1197&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1197&quot;/&gt;
&lt;td id=&quot;LC1197&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1198&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1198&quot;/&gt;
&lt;td id=&quot;LC1198&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1199&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1199&quot;/&gt;
&lt;td id=&quot;LC1199&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; deleteVolumeOperation deletes a volume. This method is running in standalone&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1200&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1200&quot;/&gt;
&lt;td id=&quot;LC1200&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; goroutine and already has all necessary locks.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1201&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1201&quot;/&gt;
&lt;td id=&quot;LC1201&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;deleteVolumeOperation&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;volume&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolume&lt;/span&gt;) (&lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt;) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1202&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1202&quot;/&gt;
&lt;td id=&quot;LC1202&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;deleteVolumeOperation [&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;] started&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1203&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1203&quot;/&gt;
&lt;td id=&quot;LC1203&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1204&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1204&quot;/&gt;
&lt;td id=&quot;LC1204&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; This method may have been waiting for a volume lock for some time.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1205&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1205&quot;/&gt;
&lt;td id=&quot;LC1205&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Previous deleteVolumeOperation might just have saved an updated version, so&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1206&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1206&quot;/&gt;
&lt;td id=&quot;LC1206&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; read current volume state now.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1207&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1207&quot;/&gt;
&lt;td id=&quot;LC1207&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;newVolume&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-smi&quot;&gt;kubeClient&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;CoreV1&lt;/span&gt;().&lt;span class=&quot;pl-c1&quot;&gt;PersistentVolumes&lt;/span&gt;().&lt;span class=&quot;pl-c1&quot;&gt;Get&lt;/span&gt;(volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, metav1.&lt;span class=&quot;pl-smi&quot;&gt;GetOptions&lt;/span&gt;{})&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1208&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1208&quot;/&gt;
&lt;td id=&quot;LC1208&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1209&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1209&quot;/&gt;
&lt;td id=&quot;LC1209&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;error reading persistent volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1210&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1210&quot;/&gt;
&lt;td id=&quot;LC1210&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1211&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1211&quot;/&gt;
&lt;td id=&quot;LC1211&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1212&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1212&quot;/&gt;
&lt;td id=&quot;LC1212&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;needsReclaim&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-c1&quot;&gt;isVolumeReleased&lt;/span&gt;(newVolume)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1213&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1213&quot;/&gt;
&lt;td id=&quot;LC1213&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1214&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1214&quot;/&gt;
&lt;td id=&quot;LC1214&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;error reading claim for volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1215&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1215&quot;/&gt;
&lt;td id=&quot;LC1215&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1216&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1216&quot;/&gt;
&lt;td id=&quot;LC1216&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1217&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1217&quot;/&gt;
&lt;td id=&quot;LC1217&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !needsReclaim {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1218&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1218&quot;/&gt;
&lt;td id=&quot;LC1218&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; no longer needs deletion, skipping&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1219&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1219&quot;/&gt;
&lt;td id=&quot;LC1219&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1220&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1220&quot;/&gt;
&lt;td id=&quot;LC1220&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1221&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1221&quot;/&gt;
&lt;td id=&quot;LC1221&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1222&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1222&quot;/&gt;
&lt;td id=&quot;LC1222&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;pluginName&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;deleted&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-c1&quot;&gt;doDeleteVolume&lt;/span&gt;(volume)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1223&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1223&quot;/&gt;
&lt;td id=&quot;LC1223&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1224&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1224&quot;/&gt;
&lt;td id=&quot;LC1224&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Delete failed, update the volume and emit an event.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1225&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1225&quot;/&gt;
&lt;td id=&quot;LC1225&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;deletion of volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; failed: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1226&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1226&quot;/&gt;
&lt;td id=&quot;LC1226&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; vol.&lt;span class=&quot;pl-c1&quot;&gt;IsDeletedVolumeInUse&lt;/span&gt;(err) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1227&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1227&quot;/&gt;
&lt;td id=&quot;LC1227&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; The plugin needs more time, don't mark the volume as Failed&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1228&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1228&quot;/&gt;
&lt;td id=&quot;LC1228&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; and send Normal event only&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1229&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1229&quot;/&gt;
&lt;td id=&quot;LC1229&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ctrl.&lt;span class=&quot;pl-smi&quot;&gt;eventRecorder&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Event&lt;/span&gt;(volume, v1.&lt;span class=&quot;pl-smi&quot;&gt;EventTypeNormal&lt;/span&gt;, events.&lt;span class=&quot;pl-smi&quot;&gt;VolumeDelete&lt;/span&gt;, err.&lt;span class=&quot;pl-c1&quot;&gt;Error&lt;/span&gt;())&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1230&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1230&quot;/&gt;
&lt;td id=&quot;LC1230&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;} &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1231&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1231&quot;/&gt;
&lt;td id=&quot;LC1231&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; The plugin failed, mark the volume as Failed and send Warning&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1232&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1232&quot;/&gt;
&lt;td id=&quot;LC1232&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; event&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;8&quot;&gt;&lt;td id=&quot;L1233&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1233&quot;/&gt;
&lt;td id=&quot;LC1233&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;_&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-c1&quot;&gt;updateVolumePhaseWithEvent&lt;/span&gt;(volume, v1.&lt;span class=&quot;pl-smi&quot;&gt;VolumeFailed&lt;/span&gt;, v1.&lt;span class=&quot;pl-smi&quot;&gt;EventTypeWarning&lt;/span&gt;, events.&lt;span class=&quot;pl-smi&quot;&gt;VolumeFailedDelete&lt;/span&gt;, err.&lt;span class=&quot;pl-c1&quot;&gt;Error&lt;/span&gt;()); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1234&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1234&quot;/&gt;
&lt;td id=&quot;LC1234&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;deleteVolumeOperation [&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: failed to mark volume as failed: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1235&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1235&quot;/&gt;
&lt;td id=&quot;LC1235&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Save failed, retry on the next deletion attempt&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1236&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1236&quot;/&gt;
&lt;td id=&quot;LC1236&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; pluginName, err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1237&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1237&quot;/&gt;
&lt;td id=&quot;LC1237&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1238&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1238&quot;/&gt;
&lt;td id=&quot;LC1238&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1239&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1239&quot;/&gt;
&lt;td id=&quot;LC1239&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1240&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1240&quot;/&gt;
&lt;td id=&quot;LC1240&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Despite the volume being Failed, the controller will retry deleting&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1241&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1241&quot;/&gt;
&lt;td id=&quot;LC1241&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; the volume in every syncVolume() call.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1242&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1242&quot;/&gt;
&lt;td id=&quot;LC1242&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; pluginName, err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1243&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1243&quot;/&gt;
&lt;td id=&quot;LC1243&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1244&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1244&quot;/&gt;
&lt;td id=&quot;LC1244&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !deleted {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1245&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1245&quot;/&gt;
&lt;td id=&quot;LC1245&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; The volume waits for deletion by an external plugin. Do nothing.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1246&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1246&quot;/&gt;
&lt;td id=&quot;LC1246&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; pluginName, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1247&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1247&quot;/&gt;
&lt;td id=&quot;LC1247&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1248&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1248&quot;/&gt;
&lt;td id=&quot;LC1248&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1249&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1249&quot;/&gt;
&lt;td id=&quot;LC1249&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;deleteVolumeOperation [&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: success&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1250&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1250&quot;/&gt;
&lt;td id=&quot;LC1250&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Delete the volume&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1251&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1251&quot;/&gt;
&lt;td id=&quot;LC1251&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err = ctrl.&lt;span class=&quot;pl-smi&quot;&gt;kubeClient&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;CoreV1&lt;/span&gt;().&lt;span class=&quot;pl-c1&quot;&gt;PersistentVolumes&lt;/span&gt;().&lt;span class=&quot;pl-c1&quot;&gt;Delete&lt;/span&gt;(volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1252&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1252&quot;/&gt;
&lt;td id=&quot;LC1252&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Oops, could not delete the volume and therefore the controller will&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1253&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1253&quot;/&gt;
&lt;td id=&quot;LC1253&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; try to delete the volume again on next update. We _could_ maintain a&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1254&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1254&quot;/&gt;
&lt;td id=&quot;LC1254&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; cache of &quot;recently deleted volumes&quot; and avoid unnecessary deletion,&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1255&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1255&quot;/&gt;
&lt;td id=&quot;LC1255&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; this is left out as future optimization.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1256&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1256&quot;/&gt;
&lt;td id=&quot;LC1256&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;failed to delete volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; from database: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1257&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1257&quot;/&gt;
&lt;td id=&quot;LC1257&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; pluginName, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1258&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1258&quot;/&gt;
&lt;td id=&quot;LC1258&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1259&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1259&quot;/&gt;
&lt;td id=&quot;LC1259&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; pluginName, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1260&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1260&quot;/&gt;
&lt;td id=&quot;LC1260&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1261&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1261&quot;/&gt;
&lt;td id=&quot;LC1261&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1262&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1262&quot;/&gt;
&lt;td id=&quot;LC1262&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; isVolumeReleased returns true if given volume is released and can be recycled&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1263&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1263&quot;/&gt;
&lt;td id=&quot;LC1263&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; or deleted, based on its retain policy. I.e. the volume is bound to a claim&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1264&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1264&quot;/&gt;
&lt;td id=&quot;LC1264&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; and the claim does not exist or exists and is bound to different volume.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1265&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1265&quot;/&gt;
&lt;td id=&quot;LC1265&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;isVolumeReleased&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;volume&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolume&lt;/span&gt;) (&lt;span class=&quot;pl-v&quot;&gt;bool&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt;) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1266&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1266&quot;/&gt;
&lt;td id=&quot;LC1266&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; A volume needs reclaim if it has ClaimRef and appropriate claim does not&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1267&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1267&quot;/&gt;
&lt;td id=&quot;LC1267&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; exist.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1268&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1268&quot;/&gt;
&lt;td id=&quot;LC1268&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt; == &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1269&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1269&quot;/&gt;
&lt;td id=&quot;LC1269&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;isVolumeReleased[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: ClaimRef is nil&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1270&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1270&quot;/&gt;
&lt;td id=&quot;LC1270&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1271&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1271&quot;/&gt;
&lt;td id=&quot;LC1271&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1272&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1272&quot;/&gt;
&lt;td id=&quot;LC1272&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;UID&lt;/span&gt; == &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1273&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1273&quot;/&gt;
&lt;td id=&quot;LC1273&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; This is a volume bound by user and the controller has not finished&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1274&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1274&quot;/&gt;
&lt;td id=&quot;LC1274&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; binding to the real claim yet.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1275&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1275&quot;/&gt;
&lt;td id=&quot;LC1275&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;isVolumeReleased[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: ClaimRef is not bound&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1276&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1276&quot;/&gt;
&lt;td id=&quot;LC1276&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1277&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1277&quot;/&gt;
&lt;td id=&quot;LC1277&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1278&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1278&quot;/&gt;
&lt;td id=&quot;LC1278&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1279&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1279&quot;/&gt;
&lt;td id=&quot;LC1279&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;claim&lt;/span&gt; *v1.&lt;span class=&quot;pl-smi&quot;&gt;PersistentVolumeClaim&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1280&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1280&quot;/&gt;
&lt;td id=&quot;LC1280&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;claimName&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;claimrefToClaimKey&lt;/span&gt;(volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1281&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1281&quot;/&gt;
&lt;td id=&quot;LC1281&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;obj&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;found&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-smi&quot;&gt;claims&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;GetByKey&lt;/span&gt;(claimName)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1282&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1282&quot;/&gt;
&lt;td id=&quot;LC1282&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1283&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1283&quot;/&gt;
&lt;td id=&quot;LC1283&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt;, err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1284&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1284&quot;/&gt;
&lt;td id=&quot;LC1284&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1285&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1285&quot;/&gt;
&lt;td id=&quot;LC1285&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !found {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1286&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1286&quot;/&gt;
&lt;td id=&quot;LC1286&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Fall through with claim = nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1287&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1287&quot;/&gt;
&lt;td id=&quot;LC1287&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;} &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1288&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1288&quot;/&gt;
&lt;td id=&quot;LC1288&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;bool&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1289&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1289&quot;/&gt;
&lt;td id=&quot;LC1289&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;claim, ok = obj.(*v1.&lt;span class=&quot;pl-smi&quot;&gt;PersistentVolumeClaim&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1290&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1290&quot;/&gt;
&lt;td id=&quot;LC1290&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !ok {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1291&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1291&quot;/&gt;
&lt;td id=&quot;LC1291&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt;, fmt.&lt;span class=&quot;pl-c1&quot;&gt;Errorf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Cannot convert object from claim cache to claim!?: &lt;span class=&quot;pl-c1&quot;&gt;%#v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, obj)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1292&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1292&quot;/&gt;
&lt;td id=&quot;LC1292&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1293&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1293&quot;/&gt;
&lt;td id=&quot;LC1293&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1294&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1294&quot;/&gt;
&lt;td id=&quot;LC1294&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; claim != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; &amp;amp;&amp;amp; claim.&lt;span class=&quot;pl-smi&quot;&gt;UID&lt;/span&gt; == volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;UID&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1295&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1295&quot;/&gt;
&lt;td id=&quot;LC1295&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; the claim still exists and has the right UID&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1296&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1296&quot;/&gt;
&lt;td id=&quot;LC1296&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1297&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1297&quot;/&gt;
&lt;td id=&quot;LC1297&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;len&lt;/span&gt;(claim.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;VolumeName&lt;/span&gt;) &amp;gt; &lt;span class=&quot;pl-c1&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp; claim.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;VolumeName&lt;/span&gt; != volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1298&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1298&quot;/&gt;
&lt;td id=&quot;LC1298&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; the claim is bound to another PV, this PV *is* released&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1299&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1299&quot;/&gt;
&lt;td id=&quot;LC1299&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1300&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1300&quot;/&gt;
&lt;td id=&quot;LC1300&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1301&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1301&quot;/&gt;
&lt;td id=&quot;LC1301&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1302&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1302&quot;/&gt;
&lt;td id=&quot;LC1302&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;isVolumeReleased[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: ClaimRef is still valid, volume is not released&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1303&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1303&quot;/&gt;
&lt;td id=&quot;LC1303&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1304&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1304&quot;/&gt;
&lt;td id=&quot;LC1304&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1305&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1305&quot;/&gt;
&lt;td id=&quot;LC1305&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1306&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1306&quot;/&gt;
&lt;td id=&quot;LC1306&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;isVolumeReleased[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: volume is released&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1307&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1307&quot;/&gt;
&lt;td id=&quot;LC1307&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1308&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1308&quot;/&gt;
&lt;td id=&quot;LC1308&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1309&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1309&quot;/&gt;
&lt;td id=&quot;LC1309&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1310&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1310&quot;/&gt;
&lt;td id=&quot;LC1310&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; isVolumeUsed returns list of pods that use given PV.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1311&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1311&quot;/&gt;
&lt;td id=&quot;LC1311&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;isVolumeUsed&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;pv&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolume&lt;/span&gt;) ([]&lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;bool&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt;) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1312&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1312&quot;/&gt;
&lt;td id=&quot;LC1312&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; pv.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt; == &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1313&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1313&quot;/&gt;
&lt;td id=&quot;LC1313&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1314&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1314&quot;/&gt;
&lt;td id=&quot;LC1314&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1315&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1315&quot;/&gt;
&lt;td id=&quot;LC1315&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;claimName&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; pv.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1316&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1316&quot;/&gt;
&lt;td id=&quot;LC1316&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1317&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1317&quot;/&gt;
&lt;td id=&quot;LC1317&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;podNames&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; sets.&lt;span class=&quot;pl-c1&quot;&gt;NewString&lt;/span&gt;()&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1318&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1318&quot;/&gt;
&lt;td id=&quot;LC1318&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;pods&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-smi&quot;&gt;podLister&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Pods&lt;/span&gt;(pv.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Namespace&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;List&lt;/span&gt;(labels.&lt;span class=&quot;pl-c1&quot;&gt;Everything&lt;/span&gt;())&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1319&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1319&quot;/&gt;
&lt;td id=&quot;LC1319&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1320&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1320&quot;/&gt;
&lt;td id=&quot;LC1320&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt;, fmt.&lt;span class=&quot;pl-c1&quot;&gt;Errorf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;error listing pods: &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1321&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1321&quot;/&gt;
&lt;td id=&quot;LC1321&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1322&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1322&quot;/&gt;
&lt;td id=&quot;LC1322&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;_&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;pod&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;range&lt;/span&gt; pods {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1323&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1323&quot;/&gt;
&lt;td id=&quot;LC1323&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; util.&lt;span class=&quot;pl-c1&quot;&gt;IsPodTerminated&lt;/span&gt;(pod, pod.&lt;span class=&quot;pl-smi&quot;&gt;Status&lt;/span&gt;) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1324&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1324&quot;/&gt;
&lt;td id=&quot;LC1324&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;continue&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1325&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1325&quot;/&gt;
&lt;td id=&quot;LC1325&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1326&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1326&quot;/&gt;
&lt;td id=&quot;LC1326&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;range&lt;/span&gt; pod.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Volumes&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1327&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1327&quot;/&gt;
&lt;td id=&quot;LC1327&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;usedPV&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &amp;amp;pod.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Volumes&lt;/span&gt;[i]&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1328&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1328&quot;/&gt;
&lt;td id=&quot;LC1328&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; usedPV.&lt;span class=&quot;pl-smi&quot;&gt;PersistentVolumeClaim&lt;/span&gt; != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; &amp;amp;&amp;amp; usedPV.&lt;span class=&quot;pl-smi&quot;&gt;PersistentVolumeClaim&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimName&lt;/span&gt; == claimName {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1329&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1329&quot;/&gt;
&lt;td id=&quot;LC1329&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;podNames.&lt;span class=&quot;pl-c1&quot;&gt;Insert&lt;/span&gt;(pod.&lt;span class=&quot;pl-smi&quot;&gt;Namespace&lt;/span&gt; + &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;/&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; + pod.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1330&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1330&quot;/&gt;
&lt;td id=&quot;LC1330&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1331&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1331&quot;/&gt;
&lt;td id=&quot;LC1331&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1332&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1332&quot;/&gt;
&lt;td id=&quot;LC1332&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1333&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1333&quot;/&gt;
&lt;td id=&quot;LC1333&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; podNames.&lt;span class=&quot;pl-c1&quot;&gt;List&lt;/span&gt;(), podNames.&lt;span class=&quot;pl-c1&quot;&gt;Len&lt;/span&gt;() != &lt;span class=&quot;pl-c1&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1334&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1334&quot;/&gt;
&lt;td id=&quot;LC1334&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1335&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1335&quot;/&gt;
&lt;td id=&quot;LC1335&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1336&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1336&quot;/&gt;
&lt;td id=&quot;LC1336&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; doDeleteVolume finds appropriate delete plugin and deletes given volume, returning&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1337&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1337&quot;/&gt;
&lt;td id=&quot;LC1337&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; the volume plugin name. Also, it returns 'true', when the volume was deleted and&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1338&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1338&quot;/&gt;
&lt;td id=&quot;LC1338&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; 'false' when the volume cannot be deleted because of the deleter is external. No&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1339&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1339&quot;/&gt;
&lt;td id=&quot;LC1339&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; error should be reported in this case.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1340&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1340&quot;/&gt;
&lt;td id=&quot;LC1340&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;doDeleteVolume&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;volume&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolume&lt;/span&gt;) (&lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;bool&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt;) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1341&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1341&quot;/&gt;
&lt;td id=&quot;LC1341&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;doDeleteVolume [&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1342&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1342&quot;/&gt;
&lt;td id=&quot;LC1342&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;error&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1343&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1343&quot;/&gt;
&lt;td id=&quot;LC1343&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1344&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1344&quot;/&gt;
&lt;td id=&quot;LC1344&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;plugin&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-c1&quot;&gt;findDeletablePlugin&lt;/span&gt;(volume)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1345&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1345&quot;/&gt;
&lt;td id=&quot;LC1345&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1346&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1346&quot;/&gt;
&lt;td id=&quot;LC1346&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt;, err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1347&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1347&quot;/&gt;
&lt;td id=&quot;LC1347&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1348&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1348&quot;/&gt;
&lt;td id=&quot;LC1348&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; plugin == &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1349&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1349&quot;/&gt;
&lt;td id=&quot;LC1349&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; External deleter is requested, do nothing&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1350&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1350&quot;/&gt;
&lt;td id=&quot;LC1350&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;external deleter for volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; requested, ignoring&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1351&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1351&quot;/&gt;
&lt;td id=&quot;LC1351&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1352&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1352&quot;/&gt;
&lt;td id=&quot;LC1352&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1353&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1353&quot;/&gt;
&lt;td id=&quot;LC1353&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1354&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1354&quot;/&gt;
&lt;td id=&quot;LC1354&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Plugin found&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1355&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1355&quot;/&gt;
&lt;td id=&quot;LC1355&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;pluginName&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; plugin.&lt;span class=&quot;pl-c1&quot;&gt;GetPluginName&lt;/span&gt;()&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1356&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1356&quot;/&gt;
&lt;td id=&quot;LC1356&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;5&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;found a deleter plugin &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; for volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, pluginName, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1357&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1357&quot;/&gt;
&lt;td id=&quot;LC1357&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;spec&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; vol.&lt;span class=&quot;pl-c1&quot;&gt;NewSpecFromPersistentVolume&lt;/span&gt;(volume, &lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1358&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1358&quot;/&gt;
&lt;td id=&quot;LC1358&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;deleter&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; plugin.&lt;span class=&quot;pl-c1&quot;&gt;NewDeleter&lt;/span&gt;(spec)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1359&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1359&quot;/&gt;
&lt;td id=&quot;LC1359&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1360&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1360&quot;/&gt;
&lt;td id=&quot;LC1360&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Cannot create deleter&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;7&quot;&gt;&lt;td id=&quot;L1361&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1361&quot;/&gt;
&lt;td id=&quot;LC1361&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; pluginName, &lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt;, fmt.&lt;span class=&quot;pl-c1&quot;&gt;Errorf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Failed to create deleter for volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1362&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1362&quot;/&gt;
&lt;td id=&quot;LC1362&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1363&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1363&quot;/&gt;
&lt;td id=&quot;LC1363&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1364&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1364&quot;/&gt;
&lt;td id=&quot;LC1364&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;opComplete&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; util.&lt;span class=&quot;pl-c1&quot;&gt;OperationCompleteHook&lt;/span&gt;(pluginName, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;volume_delete&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1365&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1365&quot;/&gt;
&lt;td id=&quot;LC1365&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;err = deleter.&lt;span class=&quot;pl-c1&quot;&gt;Delete&lt;/span&gt;()&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1366&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1366&quot;/&gt;
&lt;td id=&quot;LC1366&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c1&quot;&gt;opComplete&lt;/span&gt;(&amp;amp;err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1367&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1367&quot;/&gt;
&lt;td id=&quot;LC1367&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1368&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1368&quot;/&gt;
&lt;td id=&quot;LC1368&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Deleter failed&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1369&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1369&quot;/&gt;
&lt;td id=&quot;LC1369&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; pluginName, &lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt;, err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1370&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1370&quot;/&gt;
&lt;td id=&quot;LC1370&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1371&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1371&quot;/&gt;
&lt;td id=&quot;LC1371&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1372&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1372&quot;/&gt;
&lt;td id=&quot;LC1372&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; deleted&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1373&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1373&quot;/&gt;
&lt;td id=&quot;LC1373&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; pluginName, &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1374&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1374&quot;/&gt;
&lt;td id=&quot;LC1374&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1375&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1375&quot;/&gt;
&lt;td id=&quot;LC1375&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1376&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1376&quot;/&gt;
&lt;td id=&quot;LC1376&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; provisionClaim starts new asynchronous operation to provision a claim if&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1377&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1377&quot;/&gt;
&lt;td id=&quot;LC1377&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; provisioning is enabled.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1378&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1378&quot;/&gt;
&lt;td id=&quot;LC1378&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;provisionClaim&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;claim&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeClaim&lt;/span&gt;) &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1379&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1379&quot;/&gt;
&lt;td id=&quot;LC1379&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !ctrl.&lt;span class=&quot;pl-smi&quot;&gt;enableDynamicProvisioning&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1380&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1380&quot;/&gt;
&lt;td id=&quot;LC1380&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1381&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1381&quot;/&gt;
&lt;td id=&quot;LC1381&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1382&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1382&quot;/&gt;
&lt;td id=&quot;LC1382&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;provisionClaim[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: started&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim))&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1383&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1383&quot;/&gt;
&lt;td id=&quot;LC1383&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;opName&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Sprintf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;provision-&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), &lt;span class=&quot;pl-c1&quot;&gt;string&lt;/span&gt;(claim.&lt;span class=&quot;pl-smi&quot;&gt;UID&lt;/span&gt;))&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1384&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1384&quot;/&gt;
&lt;td id=&quot;LC1384&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;startTime&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; time.&lt;span class=&quot;pl-c1&quot;&gt;Now&lt;/span&gt;()&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1385&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1385&quot;/&gt;
&lt;td id=&quot;LC1385&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ctrl.&lt;span class=&quot;pl-c1&quot;&gt;scheduleOperation&lt;/span&gt;(opName, &lt;span class=&quot;pl-c1&quot;&gt;func&lt;/span&gt;() &lt;span class=&quot;pl-k&quot;&gt;error&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1386&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1386&quot;/&gt;
&lt;td id=&quot;LC1386&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;pluginName&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-c1&quot;&gt;provisionClaimOperation&lt;/span&gt;(claim)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1387&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1387&quot;/&gt;
&lt;td id=&quot;LC1387&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;timeTaken&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; time.&lt;span class=&quot;pl-c1&quot;&gt;Since&lt;/span&gt;(startTime).&lt;span class=&quot;pl-c1&quot;&gt;Seconds&lt;/span&gt;()&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1388&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1388&quot;/&gt;
&lt;td id=&quot;LC1388&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;metrics.&lt;span class=&quot;pl-c1&quot;&gt;RecordVolumeOperationMetric&lt;/span&gt;(pluginName, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;provision&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, timeTaken, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1389&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1389&quot;/&gt;
&lt;td id=&quot;LC1389&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1390&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1390&quot;/&gt;
&lt;td id=&quot;LC1390&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;})&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1391&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1391&quot;/&gt;
&lt;td id=&quot;LC1391&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1392&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1392&quot;/&gt;
&lt;td id=&quot;LC1392&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1393&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1393&quot;/&gt;
&lt;td id=&quot;LC1393&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1394&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1394&quot;/&gt;
&lt;td id=&quot;LC1394&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; provisionClaimOperation provisions a volume. This method is running in&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1395&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1395&quot;/&gt;
&lt;td id=&quot;LC1395&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; standalone goroutine and already has all necessary locks.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1396&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1396&quot;/&gt;
&lt;td id=&quot;LC1396&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;provisionClaimOperation&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;claim&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeClaim&lt;/span&gt;) (&lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt;) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1397&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1397&quot;/&gt;
&lt;td id=&quot;LC1397&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;claimClass&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; v1helper.&lt;span class=&quot;pl-c1&quot;&gt;GetPersistentVolumeClaimClass&lt;/span&gt;(claim)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L1398&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1398&quot;/&gt;
&lt;td id=&quot;LC1398&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;provisionClaimOperation [&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;] started, class: &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), claimClass)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1399&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1399&quot;/&gt;
&lt;td id=&quot;LC1399&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1400&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1400&quot;/&gt;
&lt;td id=&quot;LC1400&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;plugin&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;storageClass&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-c1&quot;&gt;findProvisionablePlugin&lt;/span&gt;(claim)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1401&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1401&quot;/&gt;
&lt;td id=&quot;LC1401&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1402&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1402&quot;/&gt;
&lt;td id=&quot;LC1402&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ctrl.&lt;span class=&quot;pl-smi&quot;&gt;eventRecorder&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Event&lt;/span&gt;(claim, v1.&lt;span class=&quot;pl-smi&quot;&gt;EventTypeWarning&lt;/span&gt;, events.&lt;span class=&quot;pl-smi&quot;&gt;ProvisioningFailed&lt;/span&gt;, err.&lt;span class=&quot;pl-c1&quot;&gt;Error&lt;/span&gt;())&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1403&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1403&quot;/&gt;
&lt;td id=&quot;LC1403&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;error finding provisioning plugin for claim &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1404&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1404&quot;/&gt;
&lt;td id=&quot;LC1404&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; The controller will retry provisioning the volume in every&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1405&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1405&quot;/&gt;
&lt;td id=&quot;LC1405&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; syncVolume() call.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1406&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1406&quot;/&gt;
&lt;td id=&quot;LC1406&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1407&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1407&quot;/&gt;
&lt;td id=&quot;LC1407&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1408&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1408&quot;/&gt;
&lt;td id=&quot;LC1408&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1409&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1409&quot;/&gt;
&lt;td id=&quot;LC1409&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;pluginName&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1410&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1410&quot;/&gt;
&lt;td id=&quot;LC1410&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; plugin != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1411&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1411&quot;/&gt;
&lt;td id=&quot;LC1411&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;pluginName = plugin.&lt;span class=&quot;pl-c1&quot;&gt;GetPluginName&lt;/span&gt;()&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1412&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1412&quot;/&gt;
&lt;td id=&quot;LC1412&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1413&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1413&quot;/&gt;
&lt;td id=&quot;LC1413&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1414&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1414&quot;/&gt;
&lt;td id=&quot;LC1414&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Add provisioner annotation so external provisioners know when to start&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1415&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1415&quot;/&gt;
&lt;td id=&quot;LC1415&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;newClaim&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-c1&quot;&gt;setClaimProvisioner&lt;/span&gt;(claim, storageClass)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1416&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1416&quot;/&gt;
&lt;td id=&quot;LC1416&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1417&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1417&quot;/&gt;
&lt;td id=&quot;LC1417&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Save failed, the controller will retry in the next sync&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1418&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1418&quot;/&gt;
&lt;td id=&quot;LC1418&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;error saving claim &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1419&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1419&quot;/&gt;
&lt;td id=&quot;LC1419&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; pluginName, err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1420&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1420&quot;/&gt;
&lt;td id=&quot;LC1420&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1421&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1421&quot;/&gt;
&lt;td id=&quot;LC1421&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;claim = newClaim&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1422&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1422&quot;/&gt;
&lt;td id=&quot;LC1422&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1423&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1423&quot;/&gt;
&lt;td id=&quot;LC1423&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; plugin == &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1424&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1424&quot;/&gt;
&lt;td id=&quot;LC1424&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; findProvisionablePlugin returned no error nor plugin.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1425&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1425&quot;/&gt;
&lt;td id=&quot;LC1425&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; This means that an unknown provisioner is requested. Report an event&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1426&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1426&quot;/&gt;
&lt;td id=&quot;LC1426&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; and wait for the external provisioner&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1427&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1427&quot;/&gt;
&lt;td id=&quot;LC1427&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;msg&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Sprintf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;waiting for a volume to be created, either by external provisioner &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; or manually created by system administrator&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, storageClass.&lt;span class=&quot;pl-smi&quot;&gt;Provisioner&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1428&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1428&quot;/&gt;
&lt;td id=&quot;LC1428&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ctrl.&lt;span class=&quot;pl-smi&quot;&gt;eventRecorder&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Event&lt;/span&gt;(claim, v1.&lt;span class=&quot;pl-smi&quot;&gt;EventTypeNormal&lt;/span&gt;, events.&lt;span class=&quot;pl-smi&quot;&gt;ExternalProvisioning&lt;/span&gt;, msg)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1429&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1429&quot;/&gt;
&lt;td id=&quot;LC1429&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;provisioning claim &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), msg)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1430&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1430&quot;/&gt;
&lt;td id=&quot;LC1430&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; pluginName, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1431&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1431&quot;/&gt;
&lt;td id=&quot;LC1431&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1432&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1432&quot;/&gt;
&lt;td id=&quot;LC1432&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1433&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1433&quot;/&gt;
&lt;td id=&quot;LC1433&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; internal provisioning&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1434&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1434&quot;/&gt;
&lt;td id=&quot;LC1434&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1435&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1435&quot;/&gt;
&lt;td id=&quot;LC1435&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; A previous doProvisionClaim may just have finished while we were waiting for&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1436&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1436&quot;/&gt;
&lt;td id=&quot;LC1436&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; the locks. Check that PV (with deterministic name) hasn't been provisioned&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1437&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1437&quot;/&gt;
&lt;td id=&quot;LC1437&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; yet.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1438&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1438&quot;/&gt;
&lt;td id=&quot;LC1438&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1439&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1439&quot;/&gt;
&lt;td id=&quot;LC1439&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;pvName&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-c1&quot;&gt;getProvisionedVolumeNameForClaim&lt;/span&gt;(claim)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1440&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1440&quot;/&gt;
&lt;td id=&quot;LC1440&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;volume&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-smi&quot;&gt;kubeClient&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;CoreV1&lt;/span&gt;().&lt;span class=&quot;pl-c1&quot;&gt;PersistentVolumes&lt;/span&gt;().&lt;span class=&quot;pl-c1&quot;&gt;Get&lt;/span&gt;(pvName, metav1.&lt;span class=&quot;pl-smi&quot;&gt;GetOptions&lt;/span&gt;{})&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1441&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1441&quot;/&gt;
&lt;td id=&quot;LC1441&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err == &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; &amp;amp;&amp;amp; volume != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1442&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1442&quot;/&gt;
&lt;td id=&quot;LC1442&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Volume has been already provisioned, nothing to do.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1443&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1443&quot;/&gt;
&lt;td id=&quot;LC1443&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;provisionClaimOperation [&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: volume already exists, skipping&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim))&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1444&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1444&quot;/&gt;
&lt;td id=&quot;LC1444&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; pluginName, err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1445&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1445&quot;/&gt;
&lt;td id=&quot;LC1445&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1446&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1446&quot;/&gt;
&lt;td id=&quot;LC1446&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1447&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1447&quot;/&gt;
&lt;td id=&quot;LC1447&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Prepare a claimRef to the claim early (to fail before a volume is&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1448&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1448&quot;/&gt;
&lt;td id=&quot;LC1448&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; provisioned)&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1449&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1449&quot;/&gt;
&lt;td id=&quot;LC1449&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;claimRef&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ref.&lt;span class=&quot;pl-c1&quot;&gt;GetReference&lt;/span&gt;(scheme.&lt;span class=&quot;pl-smi&quot;&gt;Scheme&lt;/span&gt;, claim)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1450&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1450&quot;/&gt;
&lt;td id=&quot;LC1450&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1451&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1451&quot;/&gt;
&lt;td id=&quot;LC1451&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;unexpected error getting claim reference: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1452&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1452&quot;/&gt;
&lt;td id=&quot;LC1452&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; pluginName, err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1453&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1453&quot;/&gt;
&lt;td id=&quot;LC1453&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1454&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1454&quot;/&gt;
&lt;td id=&quot;LC1454&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1455&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1455&quot;/&gt;
&lt;td id=&quot;LC1455&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Gather provisioning options&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1456&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1456&quot;/&gt;
&lt;td id=&quot;LC1456&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;tags&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;make&lt;/span&gt;(&lt;span class=&quot;pl-k&quot;&gt;map&lt;/span&gt;[&lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;]&lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1457&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1457&quot;/&gt;
&lt;td id=&quot;LC1457&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;tags[CloudVolumeCreatedForClaimNamespaceTag] = claim.&lt;span class=&quot;pl-smi&quot;&gt;Namespace&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1458&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1458&quot;/&gt;
&lt;td id=&quot;LC1458&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;tags[CloudVolumeCreatedForClaimNameTag] = claim.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1459&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1459&quot;/&gt;
&lt;td id=&quot;LC1459&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;tags[CloudVolumeCreatedForVolumeNameTag] = pvName&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1460&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1460&quot;/&gt;
&lt;td id=&quot;LC1460&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1461&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1461&quot;/&gt;
&lt;td id=&quot;LC1461&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; vol.&lt;span class=&quot;pl-smi&quot;&gt;VolumeOptions&lt;/span&gt;{&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1462&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1462&quot;/&gt;
&lt;td id=&quot;LC1462&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;PersistentVolumeReclaimPolicy: *storageClass.&lt;span class=&quot;pl-smi&quot;&gt;ReclaimPolicy&lt;/span&gt;,&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1463&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1463&quot;/&gt;
&lt;td id=&quot;LC1463&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;MountOptions: storageClass.&lt;span class=&quot;pl-smi&quot;&gt;MountOptions&lt;/span&gt;,&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1464&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1464&quot;/&gt;
&lt;td id=&quot;LC1464&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;CloudTags: &amp;amp;tags,&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1465&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1465&quot;/&gt;
&lt;td id=&quot;LC1465&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ClusterName: ctrl.&lt;span class=&quot;pl-smi&quot;&gt;clusterName&lt;/span&gt;,&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1466&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1466&quot;/&gt;
&lt;td id=&quot;LC1466&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;PVName: pvName,&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1467&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1467&quot;/&gt;
&lt;td id=&quot;LC1467&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;PVC: claim,&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1468&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1468&quot;/&gt;
&lt;td id=&quot;LC1468&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;Parameters: storageClass.&lt;span class=&quot;pl-smi&quot;&gt;Parameters&lt;/span&gt;,&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1469&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1469&quot;/&gt;
&lt;td id=&quot;LC1469&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1470&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1470&quot;/&gt;
&lt;td id=&quot;LC1470&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1471&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1471&quot;/&gt;
&lt;td id=&quot;LC1471&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Refuse to provision if the plugin doesn't support mount options, creation&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1472&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1472&quot;/&gt;
&lt;td id=&quot;LC1472&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; of PV would be rejected by validation anyway&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1473&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1473&quot;/&gt;
&lt;td id=&quot;LC1473&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !plugin.&lt;span class=&quot;pl-c1&quot;&gt;SupportsMountOption&lt;/span&gt;() &amp;amp;&amp;amp; &lt;span class=&quot;pl-c1&quot;&gt;len&lt;/span&gt;(options.&lt;span class=&quot;pl-smi&quot;&gt;MountOptions&lt;/span&gt;) &amp;gt; &lt;span class=&quot;pl-c1&quot;&gt;0&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1474&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1474&quot;/&gt;
&lt;td id=&quot;LC1474&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;strerr&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Sprintf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Mount options are not supported by the provisioner but StorageClass &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; has mount options &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, storageClass.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, options.&lt;span class=&quot;pl-smi&quot;&gt;MountOptions&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L1475&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1475&quot;/&gt;
&lt;td id=&quot;LC1475&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Mount options are not supported by the provisioner but claim &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;'s StorageClass &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; has mount options &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), storageClass.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, options.&lt;span class=&quot;pl-smi&quot;&gt;MountOptions&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1476&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1476&quot;/&gt;
&lt;td id=&quot;LC1476&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ctrl.&lt;span class=&quot;pl-smi&quot;&gt;eventRecorder&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Event&lt;/span&gt;(claim, v1.&lt;span class=&quot;pl-smi&quot;&gt;EventTypeWarning&lt;/span&gt;, events.&lt;span class=&quot;pl-smi&quot;&gt;ProvisioningFailed&lt;/span&gt;, strerr)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1477&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1477&quot;/&gt;
&lt;td id=&quot;LC1477&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; pluginName, fmt.&lt;span class=&quot;pl-c1&quot;&gt;Errorf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;provisioner &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; doesn't support mount options&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, plugin.&lt;span class=&quot;pl-c1&quot;&gt;GetPluginName&lt;/span&gt;())&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1478&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1478&quot;/&gt;
&lt;td id=&quot;LC1478&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1479&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1479&quot;/&gt;
&lt;td id=&quot;LC1479&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1480&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1480&quot;/&gt;
&lt;td id=&quot;LC1480&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Provision the volume&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1481&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1481&quot;/&gt;
&lt;td id=&quot;LC1481&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;provisioner&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; plugin.&lt;span class=&quot;pl-c1&quot;&gt;NewProvisioner&lt;/span&gt;(options)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1482&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1482&quot;/&gt;
&lt;td id=&quot;LC1482&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1483&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1483&quot;/&gt;
&lt;td id=&quot;LC1483&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;strerr&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Sprintf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Failed to create provisioner: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L1484&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1484&quot;/&gt;
&lt;td id=&quot;LC1484&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;failed to create provisioner for claim &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; with StorageClass &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), storageClass.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1485&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1485&quot;/&gt;
&lt;td id=&quot;LC1485&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ctrl.&lt;span class=&quot;pl-smi&quot;&gt;eventRecorder&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Event&lt;/span&gt;(claim, v1.&lt;span class=&quot;pl-smi&quot;&gt;EventTypeWarning&lt;/span&gt;, events.&lt;span class=&quot;pl-smi&quot;&gt;ProvisioningFailed&lt;/span&gt;, strerr)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1486&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1486&quot;/&gt;
&lt;td id=&quot;LC1486&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; pluginName, err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1487&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1487&quot;/&gt;
&lt;td id=&quot;LC1487&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1488&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1488&quot;/&gt;
&lt;td id=&quot;LC1488&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1489&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1489&quot;/&gt;
&lt;td id=&quot;LC1489&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;selectedNode&lt;/span&gt; *v1.&lt;span class=&quot;pl-smi&quot;&gt;Node&lt;/span&gt; = &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1490&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1490&quot;/&gt;
&lt;td id=&quot;LC1490&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;nodeName&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; claim.&lt;span class=&quot;pl-smi&quot;&gt;Annotations&lt;/span&gt;[annSelectedNode]; ok {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1491&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1491&quot;/&gt;
&lt;td id=&quot;LC1491&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;selectedNode, err = ctrl.&lt;span class=&quot;pl-smi&quot;&gt;NodeLister&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Get&lt;/span&gt;(nodeName)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1492&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1492&quot;/&gt;
&lt;td id=&quot;LC1492&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1493&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1493&quot;/&gt;
&lt;td id=&quot;LC1493&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;strerr&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Sprintf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Failed to get target node: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L1494&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1494&quot;/&gt;
&lt;td id=&quot;LC1494&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;unexpected error getting target node &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; for claim &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, nodeName, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1495&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1495&quot;/&gt;
&lt;td id=&quot;LC1495&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ctrl.&lt;span class=&quot;pl-smi&quot;&gt;eventRecorder&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Event&lt;/span&gt;(claim, v1.&lt;span class=&quot;pl-smi&quot;&gt;EventTypeWarning&lt;/span&gt;, events.&lt;span class=&quot;pl-smi&quot;&gt;ProvisioningFailed&lt;/span&gt;, strerr)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1496&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1496&quot;/&gt;
&lt;td id=&quot;LC1496&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; pluginName, err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1497&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1497&quot;/&gt;
&lt;td id=&quot;LC1497&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1498&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1498&quot;/&gt;
&lt;td id=&quot;LC1498&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1499&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1499&quot;/&gt;
&lt;td id=&quot;LC1499&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;allowedTopologies&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; storageClass.&lt;span class=&quot;pl-smi&quot;&gt;AllowedTopologies&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1500&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1500&quot;/&gt;
&lt;td id=&quot;LC1500&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1501&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1501&quot;/&gt;
&lt;td id=&quot;LC1501&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;opComplete&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; util.&lt;span class=&quot;pl-c1&quot;&gt;OperationCompleteHook&lt;/span&gt;(plugin.&lt;span class=&quot;pl-c1&quot;&gt;GetPluginName&lt;/span&gt;(), &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;volume_provision&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1502&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1502&quot;/&gt;
&lt;td id=&quot;LC1502&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;volume, err = provisioner.&lt;span class=&quot;pl-c1&quot;&gt;Provision&lt;/span&gt;(selectedNode, allowedTopologies)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1503&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1503&quot;/&gt;
&lt;td id=&quot;LC1503&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c1&quot;&gt;opComplete&lt;/span&gt;(&amp;amp;err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1504&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1504&quot;/&gt;
&lt;td id=&quot;LC1504&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1505&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1505&quot;/&gt;
&lt;td id=&quot;LC1505&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Other places of failure have nothing to do with VolumeScheduling,&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1506&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1506&quot;/&gt;
&lt;td id=&quot;LC1506&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; so just let controller retry in the next sync. We'll only call func&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1507&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1507&quot;/&gt;
&lt;td id=&quot;LC1507&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; rescheduleProvisioning here when the underlying provisioning actually failed.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1508&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1508&quot;/&gt;
&lt;td id=&quot;LC1508&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ctrl.&lt;span class=&quot;pl-c1&quot;&gt;rescheduleProvisioning&lt;/span&gt;(claim)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1509&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1509&quot;/&gt;
&lt;td id=&quot;LC1509&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1510&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1510&quot;/&gt;
&lt;td id=&quot;LC1510&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;strerr&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Sprintf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Failed to provision volume with StorageClass &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, storageClass.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L1511&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1511&quot;/&gt;
&lt;td id=&quot;LC1511&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;failed to provision volume for claim &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; with StorageClass &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), storageClass.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1512&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1512&quot;/&gt;
&lt;td id=&quot;LC1512&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ctrl.&lt;span class=&quot;pl-smi&quot;&gt;eventRecorder&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Event&lt;/span&gt;(claim, v1.&lt;span class=&quot;pl-smi&quot;&gt;EventTypeWarning&lt;/span&gt;, events.&lt;span class=&quot;pl-smi&quot;&gt;ProvisioningFailed&lt;/span&gt;, strerr)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1513&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1513&quot;/&gt;
&lt;td id=&quot;LC1513&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; pluginName, err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1514&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1514&quot;/&gt;
&lt;td id=&quot;LC1514&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1515&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1515&quot;/&gt;
&lt;td id=&quot;LC1515&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1516&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1516&quot;/&gt;
&lt;td id=&quot;LC1516&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; for claim &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; created&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim))&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1517&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1517&quot;/&gt;
&lt;td id=&quot;LC1517&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1518&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1518&quot;/&gt;
&lt;td id=&quot;LC1518&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Create Kubernetes PV object for the volume.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1519&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1519&quot;/&gt;
&lt;td id=&quot;LC1519&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt; == &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1520&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1520&quot;/&gt;
&lt;td id=&quot;LC1520&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt; = pvName&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1521&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1521&quot;/&gt;
&lt;td id=&quot;LC1521&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1522&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1522&quot;/&gt;
&lt;td id=&quot;LC1522&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Bind it to the claim&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1523&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1523&quot;/&gt;
&lt;td id=&quot;LC1523&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;ClaimRef&lt;/span&gt; = claimRef&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1524&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1524&quot;/&gt;
&lt;td id=&quot;LC1524&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;volume.&lt;span class=&quot;pl-smi&quot;&gt;Status&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;Phase&lt;/span&gt; = v1.&lt;span class=&quot;pl-smi&quot;&gt;VolumeBound&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1525&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1525&quot;/&gt;
&lt;td id=&quot;LC1525&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;volume.&lt;span class=&quot;pl-smi&quot;&gt;Spec&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;StorageClassName&lt;/span&gt; = claimClass&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1526&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1526&quot;/&gt;
&lt;td id=&quot;LC1526&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1527&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1527&quot;/&gt;
&lt;td id=&quot;LC1527&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Add annBoundByController (used in deleting the volume)&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1528&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1528&quot;/&gt;
&lt;td id=&quot;LC1528&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;metav1.&lt;span class=&quot;pl-c1&quot;&gt;SetMetaDataAnnotation&lt;/span&gt;(&amp;amp;volume.&lt;span class=&quot;pl-smi&quot;&gt;ObjectMeta&lt;/span&gt;, annBoundByController, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;yes&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1529&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1529&quot;/&gt;
&lt;td id=&quot;LC1529&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;metav1.&lt;span class=&quot;pl-c1&quot;&gt;SetMetaDataAnnotation&lt;/span&gt;(&amp;amp;volume.&lt;span class=&quot;pl-smi&quot;&gt;ObjectMeta&lt;/span&gt;, annDynamicallyProvisioned, plugin.&lt;span class=&quot;pl-c1&quot;&gt;GetPluginName&lt;/span&gt;())&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1530&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1530&quot;/&gt;
&lt;td id=&quot;LC1530&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1531&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1531&quot;/&gt;
&lt;td id=&quot;LC1531&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Try to create the PV object several times&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1532&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1532&quot;/&gt;
&lt;td id=&quot;LC1532&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;0&lt;/span&gt;; i &amp;lt; ctrl.&lt;span class=&quot;pl-smi&quot;&gt;createProvisionedPVRetryCount&lt;/span&gt;; i++ {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1533&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1533&quot;/&gt;
&lt;td id=&quot;LC1533&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;provisionClaimOperation [&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: trying to save volume &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1534&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1534&quot;/&gt;
&lt;td id=&quot;LC1534&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;newVol&lt;/span&gt; *v1.&lt;span class=&quot;pl-smi&quot;&gt;PersistentVolume&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1535&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1535&quot;/&gt;
&lt;td id=&quot;LC1535&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; newVol, err = ctrl.&lt;span class=&quot;pl-smi&quot;&gt;kubeClient&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;CoreV1&lt;/span&gt;().&lt;span class=&quot;pl-c1&quot;&gt;PersistentVolumes&lt;/span&gt;().&lt;span class=&quot;pl-c1&quot;&gt;Create&lt;/span&gt;(volume); err == &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; || apierrs.&lt;span class=&quot;pl-c1&quot;&gt;IsAlreadyExists&lt;/span&gt;(err) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1536&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1536&quot;/&gt;
&lt;td id=&quot;LC1536&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Save succeeded.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1537&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1537&quot;/&gt;
&lt;td id=&quot;LC1537&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L1538&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1538&quot;/&gt;
&lt;td id=&quot;LC1538&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; for claim &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; already exists, reusing&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim))&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1539&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1539&quot;/&gt;
&lt;td id=&quot;LC1539&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;err = &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1540&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1540&quot;/&gt;
&lt;td id=&quot;LC1540&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;} &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1541&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1541&quot;/&gt;
&lt;td id=&quot;LC1541&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; for claim &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; saved&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim))&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1542&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1542&quot;/&gt;
&lt;td id=&quot;LC1542&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1543&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1543&quot;/&gt;
&lt;td id=&quot;LC1543&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;_&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;updateErr&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-c1&quot;&gt;storeVolumeUpdate&lt;/span&gt;(newVol)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1544&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1544&quot;/&gt;
&lt;td id=&quot;LC1544&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; updateErr != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1545&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1545&quot;/&gt;
&lt;td id=&quot;LC1545&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; We will get an &quot;volume added&quot; event soon, this is not a big error&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1546&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1546&quot;/&gt;
&lt;td id=&quot;LC1546&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;provisionClaimOperation [&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: cannot update internal cache: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, updateErr)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1547&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1547&quot;/&gt;
&lt;td id=&quot;LC1547&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1548&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1548&quot;/&gt;
&lt;td id=&quot;LC1548&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1549&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1549&quot;/&gt;
&lt;td id=&quot;LC1549&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;break&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1550&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1550&quot;/&gt;
&lt;td id=&quot;LC1550&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1551&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1551&quot;/&gt;
&lt;td id=&quot;LC1551&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Save failed, try again after a while.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L1552&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1552&quot;/&gt;
&lt;td id=&quot;LC1552&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;failed to save volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; for claim &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1553&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1553&quot;/&gt;
&lt;td id=&quot;LC1553&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;time.&lt;span class=&quot;pl-c1&quot;&gt;Sleep&lt;/span&gt;(ctrl.&lt;span class=&quot;pl-smi&quot;&gt;createProvisionedPVInterval&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1554&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1554&quot;/&gt;
&lt;td id=&quot;LC1554&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1555&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1555&quot;/&gt;
&lt;td id=&quot;LC1555&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1556&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1556&quot;/&gt;
&lt;td id=&quot;LC1556&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1557&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1557&quot;/&gt;
&lt;td id=&quot;LC1557&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Save failed. Now we have a storage asset outside of Kubernetes,&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1558&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1558&quot;/&gt;
&lt;td id=&quot;LC1558&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; but we don't have appropriate PV object for it.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1559&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1559&quot;/&gt;
&lt;td id=&quot;LC1559&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Emit some event here and try to delete the storage asset several&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1560&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1560&quot;/&gt;
&lt;td id=&quot;LC1560&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; times.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1561&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1561&quot;/&gt;
&lt;td id=&quot;LC1561&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;strerr&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Sprintf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Error creating provisioned PV object for claim &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;. Deleting the volume.&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1562&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1562&quot;/&gt;
&lt;td id=&quot;LC1562&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Info&lt;/span&gt;(strerr)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1563&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1563&quot;/&gt;
&lt;td id=&quot;LC1563&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ctrl.&lt;span class=&quot;pl-smi&quot;&gt;eventRecorder&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Event&lt;/span&gt;(claim, v1.&lt;span class=&quot;pl-smi&quot;&gt;EventTypeWarning&lt;/span&gt;, events.&lt;span class=&quot;pl-smi&quot;&gt;ProvisioningFailed&lt;/span&gt;, strerr)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1564&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1564&quot;/&gt;
&lt;td id=&quot;LC1564&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1565&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1565&quot;/&gt;
&lt;td id=&quot;LC1565&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;deleteErr&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;error&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1566&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1566&quot;/&gt;
&lt;td id=&quot;LC1566&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;deleted&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;bool&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1567&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1567&quot;/&gt;
&lt;td id=&quot;LC1567&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;0&lt;/span&gt;; i &amp;lt; ctrl.&lt;span class=&quot;pl-smi&quot;&gt;createProvisionedPVRetryCount&lt;/span&gt;; i++ {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1568&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1568&quot;/&gt;
&lt;td id=&quot;LC1568&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;_, deleted, deleteErr = ctrl.&lt;span class=&quot;pl-c1&quot;&gt;doDeleteVolume&lt;/span&gt;(volume)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1569&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1569&quot;/&gt;
&lt;td id=&quot;LC1569&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; deleteErr == &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; &amp;amp;&amp;amp; deleted {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1570&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1570&quot;/&gt;
&lt;td id=&quot;LC1570&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Delete succeeded&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1571&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1571&quot;/&gt;
&lt;td id=&quot;LC1571&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;provisionClaimOperation [&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]: cleaning volume &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt; succeeded&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1572&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1572&quot;/&gt;
&lt;td id=&quot;LC1572&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;break&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1573&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1573&quot;/&gt;
&lt;td id=&quot;LC1573&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1574&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1574&quot;/&gt;
&lt;td id=&quot;LC1574&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !deleted {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1575&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1575&quot;/&gt;
&lt;td id=&quot;LC1575&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; This is unreachable code, the volume was provisioned by an&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1576&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1576&quot;/&gt;
&lt;td id=&quot;LC1576&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; internal plugin and therefore there MUST be an internal&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1577&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1577&quot;/&gt;
&lt;td id=&quot;LC1577&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; plugin that deletes it.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1578&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1578&quot;/&gt;
&lt;td id=&quot;LC1578&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;Errorf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Error finding internal deleter for volume plugin &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, plugin.&lt;span class=&quot;pl-c1&quot;&gt;GetPluginName&lt;/span&gt;())&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1579&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1579&quot;/&gt;
&lt;td id=&quot;LC1579&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;break&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1580&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1580&quot;/&gt;
&lt;td id=&quot;LC1580&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1581&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1581&quot;/&gt;
&lt;td id=&quot;LC1581&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Delete failed, try again after a while.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1582&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1582&quot;/&gt;
&lt;td id=&quot;LC1582&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;failed to delete volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, deleteErr)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1583&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1583&quot;/&gt;
&lt;td id=&quot;LC1583&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;time.&lt;span class=&quot;pl-c1&quot;&gt;Sleep&lt;/span&gt;(ctrl.&lt;span class=&quot;pl-smi&quot;&gt;createProvisionedPVInterval&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1584&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1584&quot;/&gt;
&lt;td id=&quot;LC1584&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1585&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1585&quot;/&gt;
&lt;td id=&quot;LC1585&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1586&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1586&quot;/&gt;
&lt;td id=&quot;LC1586&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; deleteErr != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1587&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1587&quot;/&gt;
&lt;td id=&quot;LC1587&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Delete failed several times. There is an orphaned volume and there&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1588&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1588&quot;/&gt;
&lt;td id=&quot;LC1588&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; is nothing we can do about it.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1589&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1589&quot;/&gt;
&lt;td id=&quot;LC1589&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;strerr&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Sprintf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Error cleaning provisioned volume for claim &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;. Please delete manually.&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim), deleteErr)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1590&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1590&quot;/&gt;
&lt;td id=&quot;LC1590&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Info&lt;/span&gt;(strerr)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1591&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1591&quot;/&gt;
&lt;td id=&quot;LC1591&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ctrl.&lt;span class=&quot;pl-smi&quot;&gt;eventRecorder&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Event&lt;/span&gt;(claim, v1.&lt;span class=&quot;pl-smi&quot;&gt;EventTypeWarning&lt;/span&gt;, events.&lt;span class=&quot;pl-smi&quot;&gt;ProvisioningCleanupFailed&lt;/span&gt;, strerr)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1592&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1592&quot;/&gt;
&lt;td id=&quot;LC1592&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1593&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1593&quot;/&gt;
&lt;td id=&quot;LC1593&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;} &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1594&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1594&quot;/&gt;
&lt;td id=&quot;LC1594&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; provisioned for claim &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(claim))&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1595&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1595&quot;/&gt;
&lt;td id=&quot;LC1595&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;msg&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Sprintf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Successfully provisioned volume &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt; using &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, plugin.&lt;span class=&quot;pl-c1&quot;&gt;GetPluginName&lt;/span&gt;())&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1596&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1596&quot;/&gt;
&lt;td id=&quot;LC1596&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ctrl.&lt;span class=&quot;pl-smi&quot;&gt;eventRecorder&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Event&lt;/span&gt;(claim, v1.&lt;span class=&quot;pl-smi&quot;&gt;EventTypeNormal&lt;/span&gt;, events.&lt;span class=&quot;pl-smi&quot;&gt;ProvisioningSucceeded&lt;/span&gt;, msg)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1597&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1597&quot;/&gt;
&lt;td id=&quot;LC1597&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1598&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1598&quot;/&gt;
&lt;td id=&quot;LC1598&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; pluginName, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1599&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1599&quot;/&gt;
&lt;td id=&quot;LC1599&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1600&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1600&quot;/&gt;
&lt;td id=&quot;LC1600&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1601&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1601&quot;/&gt;
&lt;td id=&quot;LC1601&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; rescheduleProvisioning signal back to the scheduler to retry dynamic provisioning&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1602&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1602&quot;/&gt;
&lt;td id=&quot;LC1602&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; by removing the annSelectedNode annotation&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1603&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1603&quot;/&gt;
&lt;td id=&quot;LC1603&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;rescheduleProvisioning&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;claim&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeClaim&lt;/span&gt;) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1604&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1604&quot;/&gt;
&lt;td id=&quot;LC1604&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;_&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; claim.&lt;span class=&quot;pl-smi&quot;&gt;Annotations&lt;/span&gt;[annSelectedNode]; !ok {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1605&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1605&quot;/&gt;
&lt;td id=&quot;LC1605&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Provisioning not triggered by the scheduler, skip&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1606&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1606&quot;/&gt;
&lt;td id=&quot;LC1606&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1607&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1607&quot;/&gt;
&lt;td id=&quot;LC1607&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1608&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1608&quot;/&gt;
&lt;td id=&quot;LC1608&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1609&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1609&quot;/&gt;
&lt;td id=&quot;LC1609&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; The claim from method args can be pointing to watcher cache. We must not&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1610&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1610&quot;/&gt;
&lt;td id=&quot;LC1610&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; modify these, therefore create a copy.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1611&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1611&quot;/&gt;
&lt;td id=&quot;LC1611&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;newClaim&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; claim.&lt;span class=&quot;pl-c1&quot;&gt;DeepCopy&lt;/span&gt;()&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1612&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1612&quot;/&gt;
&lt;td id=&quot;LC1612&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c1&quot;&gt;delete&lt;/span&gt;(newClaim.&lt;span class=&quot;pl-smi&quot;&gt;Annotations&lt;/span&gt;, annSelectedNode)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1613&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1613&quot;/&gt;
&lt;td id=&quot;LC1613&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Try to update the PVC object&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1614&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1614&quot;/&gt;
&lt;td id=&quot;LC1614&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;_&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-smi&quot;&gt;kubeClient&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;CoreV1&lt;/span&gt;().&lt;span class=&quot;pl-c1&quot;&gt;PersistentVolumeClaims&lt;/span&gt;(newClaim.&lt;span class=&quot;pl-smi&quot;&gt;Namespace&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Update&lt;/span&gt;(newClaim); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1615&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1615&quot;/&gt;
&lt;td id=&quot;LC1615&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Failed to delete annotation 'annSelectedNode' for PersistentVolumeClaim &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(newClaim), err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1616&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1616&quot;/&gt;
&lt;td id=&quot;LC1616&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1617&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1617&quot;/&gt;
&lt;td id=&quot;LC1617&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1618&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1618&quot;/&gt;
&lt;td id=&quot;LC1618&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;_&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-c1&quot;&gt;storeClaimUpdate&lt;/span&gt;(newClaim); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1619&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1619&quot;/&gt;
&lt;td id=&quot;LC1619&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; We will get an &quot;claim updated&quot; event soon, this is not a big error&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1620&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1620&quot;/&gt;
&lt;td id=&quot;LC1620&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Updating PersistentVolumeClaim &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;: cannot update internal cache: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;claimToClaimKey&lt;/span&gt;(newClaim), err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1621&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1621&quot;/&gt;
&lt;td id=&quot;LC1621&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1622&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1622&quot;/&gt;
&lt;td id=&quot;LC1622&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1623&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1623&quot;/&gt;
&lt;td id=&quot;LC1623&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1624&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1624&quot;/&gt;
&lt;td id=&quot;LC1624&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; getProvisionedVolumeNameForClaim returns PV.Name for the provisioned volume.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1625&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1625&quot;/&gt;
&lt;td id=&quot;LC1625&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; The name must be unique.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1626&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1626&quot;/&gt;
&lt;td id=&quot;LC1626&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;getProvisionedVolumeNameForClaim&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;claim&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeClaim&lt;/span&gt;) &lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1627&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1627&quot;/&gt;
&lt;td id=&quot;LC1627&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;pvc-&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; + &lt;span class=&quot;pl-c1&quot;&gt;string&lt;/span&gt;(claim.&lt;span class=&quot;pl-smi&quot;&gt;UID&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1628&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1628&quot;/&gt;
&lt;td id=&quot;LC1628&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1629&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1629&quot;/&gt;
&lt;td id=&quot;LC1629&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1630&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1630&quot;/&gt;
&lt;td id=&quot;LC1630&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; scheduleOperation starts given asynchronous operation on given volume. It&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1631&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1631&quot;/&gt;
&lt;td id=&quot;LC1631&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; makes sure the operation is already not running.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1632&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1632&quot;/&gt;
&lt;td id=&quot;LC1632&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; (&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-v&quot;&gt;scheduleOperation&lt;/span&gt;(operationName string, operation func() error) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1633&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1633&quot;/&gt;
&lt;td id=&quot;LC1633&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;scheduleOperation[&lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;]&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, operationName)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1634&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1634&quot;/&gt;
&lt;td id=&quot;LC1634&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1635&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1635&quot;/&gt;
&lt;td id=&quot;LC1635&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Poke test code that an operation is just about to get started.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1636&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1636&quot;/&gt;
&lt;td id=&quot;LC1636&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; ctrl.&lt;span class=&quot;pl-smi&quot;&gt;preOperationHook&lt;/span&gt; != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1637&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1637&quot;/&gt;
&lt;td id=&quot;LC1637&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ctrl.&lt;span class=&quot;pl-c1&quot;&gt;preOperationHook&lt;/span&gt;(operationName)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1638&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1638&quot;/&gt;
&lt;td id=&quot;LC1638&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1639&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1639&quot;/&gt;
&lt;td id=&quot;LC1639&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1640&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1640&quot;/&gt;
&lt;td id=&quot;LC1640&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-smi&quot;&gt;runningOperations&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Run&lt;/span&gt;(operationName, operation)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1641&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1641&quot;/&gt;
&lt;td id=&quot;LC1641&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1642&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1642&quot;/&gt;
&lt;td id=&quot;LC1642&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;switch&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1643&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1643&quot;/&gt;
&lt;td id=&quot;LC1643&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;case&lt;/span&gt; goroutinemap.&lt;span class=&quot;pl-c1&quot;&gt;IsAlreadyExists&lt;/span&gt;(err):&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1644&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1644&quot;/&gt;
&lt;td id=&quot;LC1644&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;operation &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; is already running, skipping&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, operationName)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1645&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1645&quot;/&gt;
&lt;td id=&quot;LC1645&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;case&lt;/span&gt; exponentialbackoff.&lt;span class=&quot;pl-c1&quot;&gt;IsExponentialBackoff&lt;/span&gt;(err):&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1646&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1646&quot;/&gt;
&lt;td id=&quot;LC1646&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;V&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;4&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Infof&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;operation &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; postponed due to exponential backoff&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, operationName)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1647&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1647&quot;/&gt;
&lt;td id=&quot;LC1647&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;default&lt;/span&gt;:&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1648&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1648&quot;/&gt;
&lt;td id=&quot;LC1648&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;klog.&lt;span class=&quot;pl-c1&quot;&gt;Errorf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;error scheduling operation &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, operationName, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1649&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1649&quot;/&gt;
&lt;td id=&quot;LC1649&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1650&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1650&quot;/&gt;
&lt;td id=&quot;LC1650&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1651&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1651&quot;/&gt;
&lt;td id=&quot;LC1651&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1652&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1652&quot;/&gt;
&lt;td id=&quot;LC1652&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1653&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1653&quot;/&gt;
&lt;td id=&quot;LC1653&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; newRecyclerEventRecorder returns a RecycleEventRecorder that sends all events&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1654&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1654&quot;/&gt;
&lt;td id=&quot;LC1654&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; to given volume.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1655&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1655&quot;/&gt;
&lt;td id=&quot;LC1655&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;newRecyclerEventRecorder&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;volume&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolume&lt;/span&gt;) &lt;span class=&quot;pl-v&quot;&gt;recyclerclient&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;RecycleEventRecorder&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1656&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1656&quot;/&gt;
&lt;td id=&quot;LC1656&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;func&lt;/span&gt;(eventtype, message &lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td id=&quot;L1657&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1657&quot;/&gt;
&lt;td id=&quot;LC1657&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;ctrl.&lt;span class=&quot;pl-smi&quot;&gt;eventRecorder&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Eventf&lt;/span&gt;(volume, eventtype, events.&lt;span class=&quot;pl-smi&quot;&gt;RecyclerPod&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Recycler pod: &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, message)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1658&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1658&quot;/&gt;
&lt;td id=&quot;LC1658&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1659&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1659&quot;/&gt;
&lt;td id=&quot;LC1659&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1660&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1660&quot;/&gt;
&lt;td id=&quot;LC1660&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1661&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1661&quot;/&gt;
&lt;td id=&quot;LC1661&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; findProvisionablePlugin finds a provisioner plugin for a given claim.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1662&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1662&quot;/&gt;
&lt;td id=&quot;LC1662&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; It returns either the provisioning plugin or nil when an external&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1663&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1663&quot;/&gt;
&lt;td id=&quot;LC1663&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; provisioner is requested.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1664&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1664&quot;/&gt;
&lt;td id=&quot;LC1664&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;findProvisionablePlugin&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;claim&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeClaim&lt;/span&gt;) (&lt;span class=&quot;pl-v&quot;&gt;vol&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;ProvisionableVolumePlugin&lt;/span&gt;, *&lt;span class=&quot;pl-v&quot;&gt;storage&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;StorageClass&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt;) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1665&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1665&quot;/&gt;
&lt;td id=&quot;LC1665&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; provisionClaim() which leads here is never called with claimClass==&quot;&quot;, we&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1666&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1666&quot;/&gt;
&lt;td id=&quot;LC1666&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; can save some checks.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1667&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1667&quot;/&gt;
&lt;td id=&quot;LC1667&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;claimClass&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; v1helper.&lt;span class=&quot;pl-c1&quot;&gt;GetPersistentVolumeClaimClass&lt;/span&gt;(claim)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1668&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1668&quot;/&gt;
&lt;td id=&quot;LC1668&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;class&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-smi&quot;&gt;classLister&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Get&lt;/span&gt;(claimClass)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1669&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1669&quot;/&gt;
&lt;td id=&quot;LC1669&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1670&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1670&quot;/&gt;
&lt;td id=&quot;LC1670&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;, err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1671&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1671&quot;/&gt;
&lt;td id=&quot;LC1671&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1672&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1672&quot;/&gt;
&lt;td id=&quot;LC1672&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1673&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1673&quot;/&gt;
&lt;td id=&quot;LC1673&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Find a plugin for the class&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1674&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1674&quot;/&gt;
&lt;td id=&quot;LC1674&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;plugin&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-smi&quot;&gt;volumePluginMgr&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;FindProvisionablePluginByName&lt;/span&gt;(class.&lt;span class=&quot;pl-smi&quot;&gt;Provisioner&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1675&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1675&quot;/&gt;
&lt;td id=&quot;LC1675&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1676&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1676&quot;/&gt;
&lt;td id=&quot;LC1676&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !strings.&lt;span class=&quot;pl-c1&quot;&gt;HasPrefix&lt;/span&gt;(class.&lt;span class=&quot;pl-smi&quot;&gt;Provisioner&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;kubernetes.io/&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1677&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1677&quot;/&gt;
&lt;td id=&quot;LC1677&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; External provisioner is requested, do not report error&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1678&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1678&quot;/&gt;
&lt;td id=&quot;LC1678&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;, class, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1679&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1679&quot;/&gt;
&lt;td id=&quot;LC1679&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1680&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1680&quot;/&gt;
&lt;td id=&quot;LC1680&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;, class, err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1681&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1681&quot;/&gt;
&lt;td id=&quot;LC1681&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1682&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1682&quot;/&gt;
&lt;td id=&quot;LC1682&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; plugin, class, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1683&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1683&quot;/&gt;
&lt;td id=&quot;LC1683&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1684&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1684&quot;/&gt;
&lt;td id=&quot;LC1684&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1685&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1685&quot;/&gt;
&lt;td id=&quot;LC1685&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; findDeletablePlugin finds a deleter plugin for a given volume. It returns&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1686&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1686&quot;/&gt;
&lt;td id=&quot;LC1686&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; either the deleter plugin or nil when an external deleter is requested.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td id=&quot;L1687&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1687&quot;/&gt;
&lt;td id=&quot;LC1687&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;ctrl&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;PersistentVolumeController&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;findDeletablePlugin&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;volume&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;v1&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;PersistentVolume&lt;/span&gt;) (&lt;span class=&quot;pl-v&quot;&gt;vol&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;DeletableVolumePlugin&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt;) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1688&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1688&quot;/&gt;
&lt;td id=&quot;LC1688&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Find a plugin. Try to find the same plugin that provisioned the volume&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1689&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1689&quot;/&gt;
&lt;td id=&quot;LC1689&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;plugin&lt;/span&gt; vol.&lt;span class=&quot;pl-smi&quot;&gt;DeletableVolumePlugin&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1690&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1690&quot;/&gt;
&lt;td id=&quot;LC1690&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; metav1.&lt;span class=&quot;pl-c1&quot;&gt;HasAnnotation&lt;/span&gt;(volume.&lt;span class=&quot;pl-smi&quot;&gt;ObjectMeta&lt;/span&gt;, annDynamicallyProvisioned) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1691&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1691&quot;/&gt;
&lt;td id=&quot;LC1691&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;provisionPluginName&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; volume.&lt;span class=&quot;pl-smi&quot;&gt;Annotations&lt;/span&gt;[annDynamicallyProvisioned]&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1692&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1692&quot;/&gt;
&lt;td id=&quot;LC1692&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; provisionPluginName != &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1693&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1693&quot;/&gt;
&lt;td id=&quot;LC1693&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;plugin&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-smi&quot;&gt;volumePluginMgr&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;FindDeletablePluginByName&lt;/span&gt;(provisionPluginName)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1694&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1694&quot;/&gt;
&lt;td id=&quot;LC1694&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1695&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1695&quot;/&gt;
&lt;td id=&quot;LC1695&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !strings.&lt;span class=&quot;pl-c1&quot;&gt;HasPrefix&lt;/span&gt;(provisionPluginName, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;kubernetes.io/&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;) {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1696&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1696&quot;/&gt;
&lt;td id=&quot;LC1696&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; External provisioner is requested, do not report error&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1697&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1697&quot;/&gt;
&lt;td id=&quot;LC1697&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1698&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1698&quot;/&gt;
&lt;td id=&quot;LC1698&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1699&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1699&quot;/&gt;
&lt;td id=&quot;LC1699&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;, err&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1700&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1700&quot;/&gt;
&lt;td id=&quot;LC1700&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1701&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1701&quot;/&gt;
&lt;td id=&quot;LC1701&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; plugin, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1702&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1702&quot;/&gt;
&lt;td id=&quot;LC1702&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1703&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1703&quot;/&gt;
&lt;td id=&quot;LC1703&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1704&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1704&quot;/&gt;
&lt;td id=&quot;LC1704&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1705&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1705&quot;/&gt;
&lt;td id=&quot;LC1705&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; The plugin that provisioned the volume was not found or the volume&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1706&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1706&quot;/&gt;
&lt;td id=&quot;LC1706&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; was not dynamically provisioned. Try to find a plugin by spec.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1707&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1707&quot;/&gt;
&lt;td id=&quot;LC1707&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;spec&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; vol.&lt;span class=&quot;pl-c1&quot;&gt;NewSpecFromPersistentVolume&lt;/span&gt;(volume, &lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt;)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td id=&quot;L1708&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1708&quot;/&gt;
&lt;td id=&quot;LC1708&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-smi&quot;&gt;plugin&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ctrl.&lt;span class=&quot;pl-smi&quot;&gt;volumePluginMgr&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;FindDeletablePluginBySpec&lt;/span&gt;(spec)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1709&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1709&quot;/&gt;
&lt;td id=&quot;LC1709&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td id=&quot;L1710&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1710&quot;/&gt;
&lt;td id=&quot;LC1710&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; No deleter found. Emit an event and mark the volume Failed.&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td id=&quot;L1711&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1711&quot;/&gt;
&lt;td id=&quot;LC1711&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;, fmt.&lt;span class=&quot;pl-c1&quot;&gt;Errorf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Error getting deleter volume plugin for volume &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, volume.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt;, err)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1712&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1712&quot;/&gt;
&lt;td id=&quot;LC1712&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1713&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1713&quot;/&gt;
&lt;td id=&quot;LC1713&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; plugin, &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td id=&quot;L1714&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;1714&quot;/&gt;
&lt;td id=&quot;LC1714&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;}&lt;/td&gt;
&lt;/tr&gt;</description>
<pubDate>Thu, 27 Dec 2018 21:42:33 +0000</pubDate>
<dc:creator>whalesalad</dc:creator>
<og:image>https://avatars1.githubusercontent.com/u/13629408?s=400&amp;v=4</og:image>
<og:type>object</og:type>
<og:title>kubernetes/kubernetes</og:title>
<og:url>https://github.com/kubernetes/kubernetes</og:url>
<og:description>Production-Grade Container Scheduling and Management - kubernetes/kubernetes</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://github.com/kubernetes/kubernetes/blob/ec2e767e59395376fa191d7c56a74f53936b7653/pkg/controller/volume/persistentvolume/pv_controller.go</dc:identifier>
</item>
<item>
<title>Fridge 0.2</title>
<link>http://joeyh.name/blog/entry/fridge_0.2/</link>
<guid isPermaLink="true" >http://joeyh.name/blog/entry/fridge_0.2/</guid>
<description>&lt;p&gt;My &lt;a href=&quot;http://joeyh.name/blog/entry/fridge_0.1/&quot;&gt;offgrid, solar powered, zero-battery-use fridge&lt;/a&gt; has sucessfully made it through spring, summer, fall, and more than enough winter.&lt;/p&gt;&lt;p&gt;I've proven that it works. I've not gotten food poisoning, though I did lose half a gallon of milk on one super rainy week. I have &lt;a href=&quot;http://homepower.joeyh.name/fridge.html&quot;&gt;piles of data&lt;/a&gt;, and &lt;a href=&quot;https://fridge0.branchable.com/&quot;&gt;a whole wiki&lt;/a&gt; documenting how I built it. I've developed 3 thousand lines of control software. It purrs along without any assistance.&lt;/p&gt;
&lt;p&gt;Fridge0 consists of a &lt;a href=&quot;https://fridge0.branchable.com/chest_freezer/&quot;&gt;standard chest freezer&lt;/a&gt;, an added &lt;a href=&quot;https://fridge0.branchable.com/thermal_mass/&quot;&gt;thermal mass&lt;/a&gt;, an &lt;a href=&quot;https://fridge0.branchable.com/inverter/&quot;&gt;inverter&lt;/a&gt;, and &lt;a href=&quot;https://fridge0.branchable.com/computer_control/&quot;&gt;computer control&lt;/a&gt;. It ties into the typical offfgrid system of a solar charge controller, battery bank, and photovoltaic panels.&lt;/p&gt;
&lt;p&gt;This isn't going to solve global warming or anything, but it does seem much less expensive than traditional offgrid fridge systems, and it ties in with thinking on renewable power such as Low Tech magazine's &lt;a href=&quot;https://solar.lowtechmagazine.com/2018/12/keeping-some-of-the-lights-on-redefining-energy-security.html&quot;&gt;Redefining Energy Security&lt;/a&gt; &quot;To improve energy security, we need to make infrastructures less reliable.&quot;&lt;/p&gt;
&lt;p&gt;I mostly wanted to share &lt;a href=&quot;https://fridge0.branchable.com/&quot;&gt;the wiki&lt;/a&gt;, in case someone wants to build something like this. And to post some data. Here's the summer and fall temperature data.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://joeyh.name/blog/pics/fridge_0.2/joeyh_dataset1.png&quot;&gt;&lt;img src=&quot;http://joeyh.name/blog/entry/fridge_0.2/450x-joeyh_dataset1.png&quot; width=&quot;449&quot; height=&quot;273&quot; class=&quot;img&quot;/&gt;&lt;/a&gt; &lt;a href=&quot;http://joeyh.name/blog/pics/fridge_0.2/joeyh_dataset2.png&quot;&gt;&lt;img src=&quot;http://joeyh.name/blog/entry/fridge_0.2/450x-joeyh_dataset2.png&quot; width=&quot;450&quot; height=&quot;269&quot; class=&quot;img&quot;/&gt;&lt;/a&gt;&lt;br/&gt;(&lt;a href=&quot;https://fridge0.branchable.com/temperature_range/&quot;&gt;More on temperature ranges here&lt;/a&gt;.)&lt;/p&gt;
&lt;p&gt;I want to be upfront that this is not guaranteed to work in every situation. Here's that time that the milk spoiled. A tropical storm was involved. Most of the time milk stays good 2 to 3 weeks in my fridge.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://joeyh.name/blog/pics/fridge_0.2/failure.png&quot;&gt;&lt;img src=&quot;http://joeyh.name/blog/entry/fridge_0.2/450x-failure.png&quot; width=&quot;450&quot; height=&quot;268&quot; class=&quot;img&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Some things I might get around to doing eventually:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Using a supercapacitor to provide power while shutting down on loss of solar power, instead of the current few minutes of use of batteries.&lt;/li&gt;
&lt;li&gt;Also running a freezer, dividing up solar power between them.&lt;/li&gt;
&lt;li&gt;A self-contained build with its own solar panels and electronics, instead of the current build that uses my house's server and solar panels.&lt;/li&gt;
&lt;li&gt;A full BOM or kit, just add solar panels and chest freezer to quickly build your own.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;I probably won't be devoting much time to this in the upcoming year, but if anyone wants to build one I'm happy to help you.&lt;/p&gt;
</description>
<pubDate>Thu, 27 Dec 2018 16:00:35 +0000</pubDate>
<dc:creator>Breadmaker</dc:creator>
<dc:format>text/html</dc:format>
<dc:identifier>http://joeyh.name/blog/entry/fridge_0.2/</dc:identifier>
</item>
<item>
<title>Seeing Theory: A visual introduction to probability and statistics (2017)</title>
<link>https://seeing-theory.brown.edu/index.html</link>
<guid isPermaLink="true" >https://seeing-theory.brown.edu/index.html</guid>
<description>[unable to retrieve full-text content]
&lt;p&gt;Article URL: &lt;a href=&quot;https://seeing-theory.brown.edu/index.html&quot;&gt;https://seeing-theory.brown.edu/index.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Comments URL: &lt;a href=&quot;https://news.ycombinator.com/item?id=18769099&quot;&gt;https://news.ycombinator.com/item?id=18769099&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Points: 360&lt;/p&gt;
&lt;p&gt;# Comments: 17&lt;/p&gt;
</description>
<pubDate>Thu, 27 Dec 2018 12:32:30 +0000</pubDate>
<dc:creator>jicks</dc:creator>
<og:url>http://seeingtheory.io</og:url>
<og:type>article</og:type>
<og:title>Seeing Theory</og:title>
<og:description>A visual introduction to probability and statistics.</og:description>
<og:image>http://students.brown.edu/seeing-theory/img/share/home.png</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://seeing-theory.brown.edu/index.html</dc:identifier>
</item>
<item>
<title>Krita in 2018 and 2019</title>
<link>https://krita.org/en/item/krita-in-2018-and-2019/</link>
<guid isPermaLink="true" >https://krita.org/en/item/krita-in-2018-and-2019/</guid>
<description>&lt;p&gt;&lt;em&gt;Published    12/24/2018&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;At the end of the year, we looked &lt;a href=&quot;https://krita.org/en/item/looking-back-looking-forward/&quot;&gt;back on 2017 and looked forward to 2018&lt;/a&gt;, it’s getting time to repeat the exercise! On the whole, 2018 was a better year for Krita than 2017. We hit some major milestones!&lt;/p&gt;
&lt;p&gt;We &lt;strong&gt;released &lt;a href=&quot;https://krita.org/en/item/krita-4-0-0-released/&quot;&gt;Krita 4.0&lt;/a&gt;&lt;/strong&gt;, which included Python scripting, the new, but sadly underpowered text tool, switched from ODG to SVG for vector graphics — and much, much more.&lt;/p&gt;
&lt;p&gt;&lt;iframe width=&quot;500&quot; height=&quot;281&quot; src=&quot;https://www.youtube.com/embed/a-CY4hmkg_I?feature=oembed&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;&quot;&gt;[embedded content]&lt;/iframe&gt;&lt;/p&gt;
&lt;p&gt;And after that, we released &lt;a href=&quot;https://krita.org/en/item/krita-4-0-1-released/&quot;&gt;4.0.1&lt;/a&gt;, &lt;a href=&quot;https://krita.org/en/item/krita-4-0-2-released/&quot;&gt;4.0.2&lt;/a&gt;, &lt;a href=&quot;https://krita.org/en/item/krita-4-0-3-released/&quot;&gt;4.0.3&lt;/a&gt;, &lt;a href=&quot;https://krita.org/en/item/krita-4-0-4-released/&quot;&gt;4.0.4&lt;/a&gt;, &lt;a href=&quot;https://krita.org/en/item/krita-4-1-0-released/&quot;&gt;4.1.0&lt;/a&gt; (with the &lt;a href=&quot;https://krita.org/en/krita-4-1-release-notes/&quot;&gt;new reference images tool, session management and more&lt;/a&gt;), &lt;a href=&quot;https://krita.org/en/item/krita-4-1-1-released/&quot;&gt;4.1.1&lt;/a&gt;, &lt;a href=&quot;https://krita.org/en/item/krita-4-1.3-released/&quot;&gt;4.1.3&lt;/a&gt;, &lt;a href=&quot;https://krita.org/en/item/krita-4-1.5-released/&quot;&gt;4.1.5&lt;/a&gt; and &lt;a href=&quot;https://krita.org/en/item/krita-4-1.7-released/&quot;&gt;4.1.7&lt;/a&gt;. That’s ten releases in one year, which means we’re getting closer to our goal of a release every month. Are we totally satisfied? Not quite… We had also wanted to release 4.2.0 this year, with all the work done by our Google Summer of Code students. Unfortunately, one essential part is still unfinished, and that leads to some extra instability when working with larger images. In the meantime, more and more new code accumulates in the master branch in Git — we’re in danger of forgetting what’s in there, so we’ve &lt;a href=&quot;https://krita.org/en/krita-4-2-release-notes/&quot;&gt;started on the release notes already&lt;/a&gt;!&lt;/p&gt;
&lt;p&gt;Speaking of &lt;a href=&quot;https://summerofcode.withgoogle.com/archive/&quot;&gt;&lt;strong&gt;Google Summer of Code&lt;/strong&gt;&lt;/a&gt;… We participated through the &lt;a href=&quot;https://www.kde.org&quot;&gt;KDE&lt;/a&gt; umbrella in 2018. We had three students, who all completed their projects succesfully. All the code has been merged — true, we still need to do some fixing, but it was a good year.&lt;/p&gt;
&lt;p&gt;And in 2019 there will be another edition of the Google Summer of Code. While it’s not certain, of course, that KDE will participate again, we’ve already &lt;a href=&quot;https://community.kde.org/GSoC/2019/Ideas&quot;&gt;put up some ideas for projects students could work on. They are quite challenging, so take a look&lt;/a&gt;! And if you’re a student and are interested, now is the time to get to know our developer community!&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://krita.org/wp-content/uploads/2018/09/2018-fundraiser-hero2.png&quot;&gt;&lt;img class=&quot;aligncenter size-full wp-image-8252&quot; src=&quot;https://krita.org/wp-content/uploads/2018/09/2018-fundraiser-hero2.png&quot; alt=&quot;&quot; width=&quot;850&quot; height=&quot;350&quot; srcset=&quot;https://krita.org/wp-content/uploads/2018/09/2018-fundraiser-hero2.png 850w, https://krita.org/wp-content/uploads/2018/09/2018-fundraiser-hero2-300x124.png 300w, https://krita.org/wp-content/uploads/2018/09/2018-fundraiser-hero2-768x316.png 768w&quot; sizes=&quot;(max-width: 850px) 100vw, 850px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;We also had a &lt;a href=&quot;https://krita.org/en/fundraising-2018-campaign/&quot;&gt;&lt;strong&gt;succesful fundraiser&lt;/strong&gt;&lt;/a&gt;. We didn’t use Kickstarter this time, so it was pretty &lt;a href=&quot;https://mail.kde.org/pipermail/kde-community/2018q4/004976.html&quot;&gt;hard to actually drive traffic to the fundraiser&lt;/a&gt;. On the other hand, what with Kickstarter’s cut, the actual net result was pretty much the same as with the 2016 fundraiser. We got about seven to eight months of development funded!&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://krita.org/wp-content/uploads/2018/12/busy.png&quot;&gt;&lt;img class=&quot;aligncenter size-full wp-image-8836&quot; src=&quot;https://krita.org/wp-content/uploads/2018/12/busy.png&quot; alt=&quot;&quot; width=&quot;1465&quot; height=&quot;513&quot; srcset=&quot;https://krita.org/wp-content/uploads/2018/12/busy.png 1465w, https://krita.org/wp-content/uploads/2018/12/busy-300x105.png 300w, https://krita.org/wp-content/uploads/2018/12/busy-768x269.png 768w, https://krita.org/wp-content/uploads/2018/12/busy-1024x359.png 1024w&quot; sizes=&quot;(max-width: 1465px) 100vw, 1465px&quot;/&gt;&lt;/a&gt;Our community has grown as well. Krita gets downloaded almost &lt;strong&gt;two million times&lt;/strong&gt; a year — and that’s just from our own website. There’s the Windows Store, there’s the rejuvenated Steam Store, community-driven flatpak, Windows download sites and Linux distributions being more and more up-to-date.&lt;/p&gt;
&lt;p&gt;As the Krita core team, we love interacting with our users, but it’s honestly getting too much for half a dozen people, who also want to do some coding! So we’ve got a new &lt;a href=&quot;https://ask.krita.org&quot;&gt;Questions and Answers&lt;/a&gt; website — though the idea there was that it would turn into a community of Krita users helping each other, and that hasn’t happened yet!&lt;/p&gt;

&lt;p&gt;So, 2018 was a pretty good year for Krita! What will 2019 bring?&lt;/p&gt;
&lt;p&gt;Of course there will be new releases. We’re working hard on what will become Krita 4.2. As said above, there’s already a lot of cool stuff available in the daily builds, but there are two special projects going on right now:&lt;/p&gt;
&lt;p&gt;Working closely together with Intel, we’re preparing &lt;strong&gt;support for painting in&lt;/strong&gt; &lt;a href=&quot;https://phabricator.kde.org/T9256&quot;&gt;&lt;strong&gt;HDR&lt;/strong&gt;&lt;/a&gt;. We’re really running ahead of the pack here: this technology is so new that there’s barely any hardware that supports it, and the only OS that has some support is Windows 10… (There’s preliminary work going on in graphics drivers for Linux/X11 as well.)&lt;/p&gt;
&lt;p&gt;But we’ve got it working, as a proof of concept, and the feel of painting on a wide-gamut, 1000 nits monitor is magical! We want to make sure that the support for HDR visuals becomes part of Qt itself, so other applications can follow. And then, of course, that hardware gets more widespread and OS support improves.&lt;/p&gt;
&lt;p&gt;The other big project that ate many, many hours in 2018 and isn’t nearly done is the rewriting of the &lt;strong&gt;resources system&lt;/strong&gt;. Resources are things like brush tips and presets, patterns and gradients. When KImageShop was started, twenty years ago, disks were small, memory was limited and people thought a 1024×768 pixel image was huge. Patterns and brushes and so on were small, too, and people would keep only a few around.&lt;/p&gt;
&lt;p&gt;These days, resources are huge, and people keep lots and lots of them around. Our code for handling resources has grown into a huge ball of knotty twine, kept together with chewing gum. We started designing a new system in 2017, and in 2018 we spent a lot of time on its implementation. That’s still ongoing. The new system will be much more memory friendly, reduce startup time and be much more reliable. At least, that’s what we’re working for!&lt;/p&gt;
&lt;p&gt;And, of course, we’re still going to spend a good bit of time on fixing bugs, improving performance and doing releases!&lt;/p&gt;
&lt;p&gt;And 2019 will mark &lt;a href=&quot;https://phabricator.kde.org/R511:3e91e954652b9db5c715b71c717b2a58cfe49bcd&quot;&gt;the twentieth anniversary of Krita&lt;/a&gt;!&lt;/p&gt;
&lt;div id=&quot;ssba-classic-2&quot; class=&quot;ssba ssbp-wrap left ssbp--theme-1&quot;&gt;
&lt;div&gt;&lt;a data-site=&quot;&quot; class=&quot;ssba_google_share&quot; href=&quot;https://plus.google.com/share?url=https://krita.org/en/item/krita-in-2018-and-2019/&quot; target=&quot;&amp;quot;_blank&amp;quot;&quot;&gt;&lt;img src=&quot;https://krita.org/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/google.png&quot; title=&quot;Google+&quot; class=&quot;ssba ssba-img&quot; alt=&quot;Share on Google+&quot;/&gt;&lt;/a&gt;
&lt;p&gt;Google+&lt;/p&gt;
&lt;span class=&quot; ssba_sharecount&quot;&gt;0&lt;/span&gt;&lt;a data-site=&quot;linkedin&quot; class=&quot;ssba_linkedin_share ssba_share_link&quot; href=&quot;http://www.linkedin.com/shareArticle?mini=true&amp;amp;url=https://krita.org/en/item/krita-in-2018-and-2019/&quot; target=&quot;&amp;quot;_blank&amp;quot;&quot;&gt;&lt;img src=&quot;https://krita.org/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/linkedin.png&quot; title=&quot;LinkedIn&quot; class=&quot;ssba ssba-img&quot; alt=&quot;Share on LinkedIn&quot;/&gt;&lt;/a&gt;
&lt;p&gt;Linkedin&lt;/p&gt;
&lt;a data-site=&quot;pinterest&quot; class=&quot;ssba_pinterest_share&quot; href=&quot;javascript:void((function()%7Bvar%20e=document.createElement('script');e.setAttribute('type','text/javascript');e.setAttribute('charset','UTF-8');e.setAttribute('src','//assets.pinterest.com/js/pinmarklet.js?r='+Math.random()*99999999);document.body.appendChild(e)%7D)());&quot;&gt;&lt;img src=&quot;https://krita.org/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/pinterest.png&quot; title=&quot;Pinterest&quot; class=&quot;ssba ssba-img&quot; alt=&quot;Pin on Pinterest&quot;/&gt;&lt;/a&gt;
&lt;p&gt;Pinterest&lt;/p&gt;
&lt;span class=&quot; ssba_sharecount&quot;&gt;1&lt;/span&gt;&lt;a data-site=&quot;reddit&quot; class=&quot;ssba_reddit_share&quot; href=&quot;http://reddit.com/submit?url=https://krita.org/en/item/krita-in-2018-and-2019/&amp;amp;title=Krita%20in%202018%20and%202019&quot; target=&quot;&amp;quot;_blank&amp;quot;&quot;&gt;&lt;img src=&quot;https://krita.org/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/reddit.png&quot; title=&quot;Reddit&quot; class=&quot;ssba ssba-img&quot; alt=&quot;Share on Reddit&quot;/&gt;&lt;/a&gt;
&lt;p&gt;Reddit&lt;/p&gt;
&lt;span class=&quot; ssba_sharecount&quot;&gt;227&lt;/span&gt;&lt;a data-site=&quot;&quot; class=&quot;ssba_facebook_share&quot; href=&quot;http://www.facebook.com/sharer.php?u=https://krita.org/en/item/krita-in-2018-and-2019/&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;https://krita.org/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/facebook.png&quot; title=&quot;Facebook&quot; class=&quot;ssba ssba-img&quot; alt=&quot;Share on Facebook&quot;/&gt;&lt;/a&gt;
&lt;p&gt;Facebook&lt;/p&gt;
&lt;span class=&quot; ssba_sharecount&quot;&gt;14&lt;/span&gt;&lt;a data-site=&quot;tumblr&quot; class=&quot;ssba_tumblr_share&quot; href=&quot;http://www.tumblr.com/share/link?url=https://krita.org/en/item/krita-in-2018-and-2019/&quot; target=&quot;&amp;quot;_blank&amp;quot;&quot;&gt;&lt;img src=&quot;https://krita.org/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/tumblr.png&quot; title=&quot;tumblr&quot; class=&quot;ssba ssba-img&quot; alt=&quot;Share on Tumblr&quot;/&gt;&lt;/a&gt;
&lt;p&gt;Tumblr&lt;/p&gt;
&lt;span class=&quot; ssba_sharecount&quot;&gt;0&lt;/span&gt;&lt;a data-site=&quot;&quot; class=&quot;ssba_twitter_share&quot; href=&quot;http://twitter.com/share?url=https://krita.org/en/item/krita-in-2018-and-2019/&amp;amp;text=Krita%20in%202018%20and%202019%20&quot; target=&quot;&amp;quot;_blank&amp;quot;&quot;&gt;&lt;img src=&quot;https://krita.org/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/twitter.png&quot; title=&quot;Twitter&quot; class=&quot;ssba ssba-img&quot; alt=&quot;Tweet about this on Twitter&quot;/&gt;&lt;/a&gt;
&lt;p&gt;Twitter&lt;/p&gt;
&lt;a data-site=&quot;vk&quot; class=&quot;ssba_vk_share ssba_share_link&quot; href=&quot;http://vkontakte.ru/share.php?url=https://krita.org/en/item/krita-in-2018-and-2019/&quot; target=&quot;&amp;quot;_blank&amp;quot;&quot;&gt;&lt;img src=&quot;https://krita.org/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/vk.png&quot; title=&quot;VK&quot; class=&quot;ssba ssba-img&quot; alt=&quot;Share on VK&quot;/&gt;&lt;/a&gt;
&lt;p&gt;VK&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
<pubDate>Thu, 27 Dec 2018 10:41:53 +0000</pubDate>
<dc:creator>emilsedgh</dc:creator>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://krita.org/en/item/krita-in-2018-and-2019/</dc:identifier>
</item>
<item>
<title>35th Chaos Communication Congress Live Streams</title>
<link>https://streaming.media.ccc.de/35c3/</link>
<guid isPermaLink="true" >https://streaming.media.ccc.de/35c3/</guid>
<description>[unable to retrieve full-text content]
&lt;p&gt;Article URL: &lt;a href=&quot;https://streaming.media.ccc.de/35c3/&quot;&gt;https://streaming.media.ccc.de/35c3/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Comments URL: &lt;a href=&quot;https://news.ycombinator.com/item?id=18768329&quot;&gt;https://news.ycombinator.com/item?id=18768329&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Points: 214&lt;/p&gt;
&lt;p&gt;# Comments: 19&lt;/p&gt;
</description>
<pubDate>Thu, 27 Dec 2018 08:45:24 +0000</pubDate>
<dc:creator>sschueller</dc:creator>
<dc:format>text/html</dc:format>
<dc:identifier>https://streaming.media.ccc.de/35c3/</dc:identifier>
</item>
<item>
<title>Ask HN: What do you use for authentication and authorization?</title>
<link>https://news.ycombinator.com/item?id=18767767</link>
<guid isPermaLink="true" >https://news.ycombinator.com/item?id=18767767</guid>
<description>&lt;tr readability=&quot;0.55737704918033&quot;&gt;&lt;td bgcolor=&quot;#FF6600&quot;&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr id=&quot;pagespace&quot; title=&quot;Ask HN: What do you use for authentication and authorization?&quot;&gt;&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6.6686838124054&quot;&gt;&lt;td&gt;
&lt;table class=&quot;fatitem&quot; border=&quot;0&quot; readability=&quot;5.0015128593041&quot;&gt;&lt;tr class=&quot;athing&quot; id=&quot;18767767&quot; readability=&quot;0&quot;&gt;&lt;td align=&quot;right&quot; valign=&quot;top&quot; class=&quot;title&quot;/&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;title&quot;&gt;&lt;a href=&quot;https://news.ycombinator.com/item?id=18767767&quot; class=&quot;storylink&quot;&gt;Ask HN: What do you use for authentication and authorization?&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;0.75949367088608&quot;&gt;&lt;td colspan=&quot;2&quot;/&gt;
&lt;td class=&quot;subtext&quot;&gt;&lt;span class=&quot;score&quot; id=&quot;score_18767767&quot;&gt;365 points&lt;/span&gt; by &lt;a href=&quot;https://news.ycombinator.com/user?id=nates&quot; class=&quot;hnuser&quot;&gt;nates&lt;/a&gt; &lt;span class=&quot;age&quot;&gt;&lt;a href=&quot;https://news.ycombinator.com/item?id=18767767&quot;&gt;17 hours ago&lt;/a&gt;&lt;/span&gt; &lt;span id=&quot;unv_18767767&quot;/&gt; | &lt;a href=&quot;https://news.ycombinator.com/hide?id=18767767&amp;amp;goto=item%3Fid%3D18767767&quot;&gt;hide&lt;/a&gt; | &lt;a href=&quot;https://hn.algolia.com/?query=Ask%20HN%3A%20What%20do%20you%20use%20for%20authentication%20and%20authorization%3F&amp;amp;sort=byDate&amp;amp;dateRange=all&amp;amp;type=story&amp;amp;storyText=false&amp;amp;prefix&amp;amp;page=0&quot; class=&quot;hnpast&quot;&gt;past&lt;/a&gt; | &lt;a href=&quot;https://www.google.com/search?q=Ask%20HN%3A%20What%20do%20you%20use%20for%20authentication%20and%20authorization%3F&quot;&gt;web&lt;/a&gt; | &lt;a href=&quot;https://news.ycombinator.com/fave?id=18767767&amp;amp;auth=9b26a98253fa52add0e81bcf3d3fba0805c88c3e&quot;&gt;favorite&lt;/a&gt; | &lt;a href=&quot;https://news.ycombinator.com/item?id=18767767&quot;&gt;208 comments&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td/&gt;
&lt;/tr&gt;&lt;tr readability=&quot;8&quot;&gt;&lt;td colspan=&quot;2&quot;/&gt;
&lt;td&gt;I am currently starting work on a new app/website. Currently planning to have 1 BE API set to start, probably graphql (which will be user data/information and need to check with the auth server about being protected). I will also have many client apps (web, mobile, potential partners) that will need to make queries to that BE. Do you usually roll your own authentication or use something like auth0/fusionauth/gluu/etc? This product is going to need to be secure as it will be in the healthcare space (so think oidc).&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td colspan=&quot;2&quot;/&gt;
&lt;td&gt;

&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;1&quot;&gt;&lt;td&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;10&quot; width=&quot;0&quot;/&gt;&lt;br/&gt;&lt;center&gt;&lt;span class=&quot;yclinks&quot;&gt;&lt;a href=&quot;https://news.ycombinator.com/newsguidelines.html&quot;&gt;Guidelines&lt;/a&gt; | &lt;a href=&quot;https://news.ycombinator.com/newsfaq.html&quot;&gt;FAQ&lt;/a&gt; | &lt;a href=&quot;mailto:hn@ycombinator.com&quot;&gt;Support&lt;/a&gt; | &lt;a href=&quot;https://github.com/HackerNews/API&quot;&gt;API&lt;/a&gt; | &lt;a href=&quot;https://news.ycombinator.com/security.html&quot;&gt;Security&lt;/a&gt; | &lt;a href=&quot;https://news.ycombinator.com/lists&quot;&gt;Lists&lt;/a&gt; | &lt;a href=&quot;https://news.ycombinator.com/bookmarklet.html&quot; rel=&quot;nofollow&quot;&gt;Bookmarklet&lt;/a&gt; | &lt;a href=&quot;http://www.ycombinator.com/legal/&quot;&gt;Legal&lt;/a&gt; | &lt;a href=&quot;http://www.ycombinator.com/apply/&quot;&gt;Apply to YC&lt;/a&gt; | &lt;a href=&quot;mailto:hn@ycombinator.com&quot;&gt;Contact&lt;/a&gt;&lt;/span&gt;
&lt;/center&gt;
&lt;/td&gt;
&lt;/tr&gt;</description>
<pubDate>Thu, 27 Dec 2018 06:16:59 +0000</pubDate>
<dc:creator>nates</dc:creator>
<dc:format>text/html</dc:format>
<dc:identifier>https://news.ycombinator.com/item?id=18767767</dc:identifier>
</item>
<item>
<title>Hospital prices are about to go public in the U.S.</title>
<link>https://www.ajc.com/news/national/hospital-prices-are-about-public/2jXYHgoR5CObBj6fSJQQUO/</link>
<guid isPermaLink="true" >https://www.ajc.com/news/national/hospital-prices-are-about-public/2jXYHgoR5CObBj6fSJQQUO/</guid>
<description>&lt;p&gt;Prices hospitals charge for their services will all go online Jan. 1 under a new federal requirement, but patient advocates say the realities of medical-industry pricing will make it difficult for consumers to get much out of the new data.&lt;/p&gt;
&lt;p&gt;A &lt;a href=&quot;https://www.hhs.gov/about/news/2018/04/24/hhs-takes-new-steps-in-secretary-azars-value-based-agenda.html&quot; shape=&quot;rect&quot;&gt;federal rule&lt;/a&gt; requires all hospitals to post online a master list of prices for the services they provide so consumers can review them starting Jan. 1.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.journal-news.com/business/local-hospital-prices-are-about-public/8tT2o8gHTiDR3bRXjldxUO/&quot; shape=&quot;rect&quot; target=&quot;_blank&quot;&gt;The health care industry nationally&lt;/a&gt; has a reputation for having little price transparency, which can make it difficult for consumers to price compare. But the hospital’s master list prices, sometimes called a chargemaster, is also not a complete look, consumer advocates say.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;&lt;a href=&quot;https://www.ajc.com/list/news/national/more-news-headlines/aJz4/&quot; shape=&quot;rect&quot;&gt;&amp;gt;&amp;gt; Read more trending news&lt;/a&gt;&lt;/em&gt;&lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;That’s because the final bill a patient receives is almost never the same as the sticker price for the services they received. Insurance companies negotiate discounts on the sticker prices. Co-pays, co-insurance, deductibles also add other layers of complexity that bring discounts or increased costs before a final charge is determined.&lt;/p&gt;
&lt;div class=&quot;chartbeat-story&quot;&gt;
&lt;div class=&quot;pers-rec-optimizely-wrapper&quot;&gt;
&lt;div class=&quot;pers-rec-free-story-hide pers-rec-variation-container-dy&quot;&gt;
&lt;h3 class=&quot;section-heading&quot;&gt;Recommended for you&lt;/h3&gt;

&lt;/div&gt;
&lt;div class=&quot;pers-rec-free-story-hide pers-rec-variation-container-li&quot;&gt;
&lt;h3 class=&quot;section-heading&quot;&gt;Recommended for you&lt;/h3&gt;

&lt;/div&gt;
&lt;div class=&quot;pers-rec-free-story-hide pers-rec-variation-container-bc&quot;&gt;
&lt;h3 class=&quot;section-heading&quot;&gt;Recommended for you&lt;/h3&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;p&gt;“The list prices are so high that the vast majority of hospitals don’t even try to collect list prices from uninsured patients,” said Benedic Ippolito, with the American Enterprise Institute, who has researched hospital list prices.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.journal-news.com/business/local-hospital-prices-are-about-public/8tT2o8gHTiDR3bRXjldxUO/&quot; shape=&quot;rect&quot; target=&quot;_blank&quot;&gt;The federal rule is&lt;/a&gt; being brought out as a measure to improve competition and help educate consumers.&lt;/p&gt;
&lt;p&gt;“We are just beginning on price transparency,” &lt;a href=&quot;https://www.apnews.com/fc3f681779e84752baaf588751724789&quot; shape=&quot;rect&quot; target=&quot;_blank&quot;&gt;Seema Verma, head of U.S. Centers for Medicare &amp;amp; Medicaid told the Associated Press&lt;/a&gt;. “We know that hospitals have this information and we’re asking them to post what they have online.”&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.journal-news.com/business/local-hospital-prices-are-about-public/8tT2o8gHTiDR3bRXjldxUO/&quot; shape=&quot;rect&quot; target=&quot;_blank&quot;&gt;But real transparency comes&lt;/a&gt; when consumers can easily see what they will pay to a provider based on their insurance benefits, said Thomas Campanella, Baldwin Wallace University health care MBA program director. He said some insurance companies are providing that information through price comparison tools.&lt;/p&gt;
&lt;p&gt;“I almost see it being more of a political ‘look at what we did,’” Campanella said of the requirement to post list prices.&lt;/p&gt;
&lt;p&gt;Kettering Health Network, which has eight hospitals in the Dayton, Ohio area, said the chargemaster will be posted on its patient pricing webpage after Jan. 1. Premier Health, which has three hospitals in the same region, said the information will be on its hospitals’ websites by Jan. 1. and consumers will find the list of charges where they currently find other pricing, insurance and billing information.&lt;/p&gt;
&lt;p&gt;List prices can show what is at stake when hospitals and insurance companies are out of network, or do not have contract agreements between them.&lt;/p&gt;
&lt;p&gt;A benefit of having health insurance is that the insurance companies negotiate with hospitals on a discount from what is listed on the chargemaster. If a hospital is “in network” it means the insurer and hospital have an agreement on discounted rates and the insurance company typically covers a higher portion of those prices.&lt;/p&gt;
&lt;p&gt;If a patient goes to a medical provider that is out-of-network, they could be billed the difference between what the chargemaster lists as the price and what their insurance writes a check for. The practice is called balance billing or sometimes called “surprise billing.”&lt;/p&gt;
&lt;p&gt;“Where list prices matter more nowadays is in the case of “surprise bills” or balance bills,” Ippolito said.&lt;/p&gt;
&lt;p&gt;Ippolito said some people will argue that hospitals actually use list prices and the threat of balance billing as a way to get insurers to negotiate with them or otherwise face irate policyholders stuck with high bills.&lt;/p&gt;
&lt;p&gt;“The idea is that you maintain a very high list price and you tell and insurer ‘Either you put me in your network or when one of your poor patients shows up in my hospital, I’m going to have no choice but to balance bill them for this huge amount and then you’re going to have to figure it out,” he said.&lt;/p&gt;
&lt;p&gt;A hospital official said insurers could do more to promote price transparency.&lt;/p&gt;
&lt;p&gt;“Ultimately, I think some of that unpredictability rests with the insurers and the fact that they establish what they will and won’t pay for,” said Sarah Hackenbracht, interim president and CEO of the Greater Dayton Area Hospital Association.&lt;/p&gt;
&lt;p&gt;“The health care providers are simply focused on making sure that they provide the highest quality and lowest cost services in our local communities,” she said.&lt;/p&gt;
&lt;p&gt;Cost is also only one factor to consider when shopping for care, with factors such as quality, safety and location affecting where a patient chooses to go, she said. In addition, it is difficult for someone to know ahead of time exactly what their final cost might be because physicians might discover after starting a procedure that they need additional tests, medications or other types of care, she said.&lt;/p&gt;
&lt;p&gt;Miranda Creviston Motter, president and CEO of Ohio Association of Health Plans, which represents insurance companies, said as health care costs continue to rise, provider cost information is important and the association supports federal policies requiring providers to provide easy to understand cost information directly to health care consumers.&lt;/p&gt;
&lt;p&gt;“This information supplements the cost information health plans currently offer their members. ,” she said in a statement.&lt;/p&gt;
&lt;p&gt;Price comparison tools are becoming increasingly available through insurance companies, but they have limits in usefulness. Not all health care costs can be shopped for ahead of time, such as emergency visits, and consumers can prioritize other things besides cost, such as a doctor they trust or a hospital close to home. Only a small number of employees at two large companies with a price transparency tool used the tool and it was not associated with lower health care spending, according to 2016 study in the Journal of the American Medical Association.&lt;/p&gt;
&lt;p&gt;Scott McGohan, CEO of McGohan Brabender, a benefits broker, said while many of the major insurance carriers have price shopping tools, it’s not always easy to know enough about medicine to know how to price shop.&lt;/p&gt;
&lt;p&gt;“For an MRI for example, if it asks with contrast or without contrast, then I have to know what is contrast and why is that important?” McGohan said.&lt;/p&gt;

</description>
<pubDate>Thu, 27 Dec 2018 01:01:13 +0000</pubDate>
<dc:creator>SQL2219</dc:creator>
<og:image>https://www.ajc.com/rf/image_large/Pub/p9/CmgSharedContent/2018/12/26/Videos/4559519.vpx.jpg</og:image>
<og:title>Hospital prices are about to go public</og:title>
<og:type>article</og:type>
<og:url>https://www.ajc.com/news/national/hospital-prices-are-about-public/2jXYHgoR5CObBj6fSJQQUO/</og:url>
<og:description>Prices hospitals charge for their services will all go online Jan.</og:description>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.ajc.com/news/national/hospital-prices-are-about-public/2jXYHgoR5CObBj6fSJQQUO/</dc:identifier>
</item>
<item>
<title>lsix: ls for images</title>
<link>https://github.com/hackerb9/lsix</link>
<guid isPermaLink="true" >https://github.com/hackerb9/lsix</guid>
<description>&lt;div class=&quot;Box-body p-6&quot;&gt;
&lt;article class=&quot;markdown-body entry-content&quot; itemprop=&quot;text&quot;&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot; href=&quot;https://github.com/hackerb9/lsix/blob/master/README.md.d/thumb.png&quot;&gt;&lt;img align=&quot;right&quot; src=&quot;https://github.com/hackerb9/lsix/raw/master/README.md.d/thumb.png&quot;/&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Like &quot;ls&quot;, but for images. Shows thumbnails in terminal using &lt;a href=&quot;https://en.wikipedia.org/wiki/Sixel&quot; rel=&quot;nofollow&quot;&gt;sixel&lt;/a&gt; graphics.&lt;/p&gt;
&lt;h2&gt;Usage&lt;/h2&gt;
&lt;pre&gt;
&lt;code&gt;lsix [ FILES ... ]
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2&gt;Examples&lt;/h2&gt;
&lt;h3&gt;Basic Usage&lt;/h3&gt;
&lt;p&gt;Just typing &lt;code&gt;lsix&lt;/code&gt; will show images in the current working directory. You can also specify filenames and, of course, use shell wild cards (e.g., &lt;code&gt;lsix *jpg *png&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;Because lsix uses ImageMagick pretty much any image format will be supported. However, some may be slow to render (like PDF), so lsix doesn't show them unless you ask specifically. If you want to force a listing of a certain type of image simply specify the filenames or use a wildcard (&lt;code&gt;*.pdf&lt;/code&gt; in the example below),.&lt;/p&gt;
&lt;p&gt;&lt;a target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot; href=&quot;https://github.com/hackerb9/lsix/blob/master/README.md.d/example1.png&quot;&gt;&lt;img src=&quot;https://github.com/hackerb9/lsix/raw/master/README.md.d/example1.png&quot; alt=&quot;Example 1 of lsix usage&quot; title=&quot;Most basic usage&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;Expanding GIFs&lt;/h3&gt;
&lt;p&gt;If you specify a GIF (or actually any file that has multiple images in it) on the command line, all the frames will get expanded and shown in a montage. For example, &lt;code&gt;lsix nyancat.gif&lt;/code&gt; shows all the frames. Note that GIF stores some frames as only the pixels that differ from the previous frame. &lt;a target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot; href=&quot;https://github.com/hackerb9/lsix/blob/master/README.md.d/example2.png&quot;&gt;&lt;img src=&quot;https://github.com/hackerb9/lsix/raw/master/README.md.d/example2.png&quot; alt=&quot;Example 2 of lsix usage&quot; title=&quot;GIFs get expanded&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;Terminal background color is detected&lt;/h3&gt;
&lt;p&gt;You may have noticed that PNGs and SVG files have correct alpha channel for the terminal background. That is because lsix uses terminal escape sequences to try to figure out your foreground and background colors. (Foreground is used for the text fill color.)&lt;/p&gt;
&lt;p&gt;In the first example below, after running &lt;code&gt;lsix&lt;/code&gt; in a white on black xterm, I sent an escape sequence to swap foreground and background colors. When I ran it again, &lt;code&gt;lsix&lt;/code&gt; detected it and changed the background color to white. Of course, you can pick whatever default colors you want (e.g., &lt;code&gt;xterm -bg blue&lt;/code&gt;, in the second example below).&lt;/p&gt;
&lt;p&gt;&lt;a target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot; href=&quot;https://github.com/hackerb9/lsix/blob/master/README.md.d/example3.png&quot;&gt;&lt;img src=&quot;https://github.com/hackerb9/lsix/raw/master/README.md.d/example3.png&quot; alt=&quot;Example 3 of lsix usage&quot; title=&quot;Reverse video works&quot;/&gt;&lt;/a&gt; &lt;a target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot; href=&quot;https://github.com/hackerb9/lsix/blob/master/README.md.d/example4.png&quot;&gt;&lt;img src=&quot;https://github.com/hackerb9/lsix/raw/master/README.md.d/example4.png&quot; alt=&quot;Example 4 of lsix usage&quot; title=&quot;Even 'xterm -bg blue' works&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Features&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;
&lt;p&gt;Works great over ssh. Perfect for manipulating those images on the web server when you can't quite remember what each one was.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Non-bitmap graphics often work fine (.svg, .eps, .pdf, .xcf).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Automatically detects if your terminal, like xterm, can increase the number of color registers to improve the image quality and does so.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Automatically detects terminal's foreground and background colors.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;In terminals that support dtterm WindowOps, the number of tiles per row will adjust appropriately to the window width.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;If there are many images in a directory (&amp;gt;21), lsix will display them one row at a time so you don't need to wait for the entire montage to be created.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;If your filenames are too long, lsix will wrap the text before passing it into ImageMagick's &lt;code&gt;montage&lt;/code&gt;. (Without lsix, &lt;code&gt;montage&lt;/code&gt; just jumbles long filenames on top of one another.)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;You can easily change things like the width of each tile in the montage, the font family, and point size by editing simple variables at the top of the file. &lt;em&gt;(Tip: try &lt;code&gt;convert -list font&lt;/code&gt; to see what fonts you have on your machine.)&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Unicode filenames work fine, as long as your font has the glyphs.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;Installation&lt;/h2&gt;
&lt;p&gt;Just put the &lt;a href=&quot;https://github.com/hackerb9/lsix/blob/master/lsix&quot;&gt;&lt;code&gt;lsix&lt;/code&gt;&lt;/a&gt; file in your path (e.g., /usr/local/bin) and run it. It's just a BASH shell script.&lt;/p&gt;
&lt;p&gt;The only prerequisite software is ImageMagick. If you don't have it yet, your OS's package manager will make it easy to get. (E.g., &lt;code&gt;apt-get install imagemagick&lt;/code&gt;).&lt;/p&gt;
&lt;h2&gt;Your Terminal must support Sixel graphics&lt;/h2&gt;
&lt;p&gt;I developed this on an xterm in vt340 emulation mode, but I believe this should work on pretty much any Sixel compatible terminal. Xterm does not have Sixel mode enabled by default, so you need to either run it like so:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;xterm -ti vt340
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Or, make vt340 the default terminal type for xterm. Add the following to your &lt;code&gt;.Xresources&lt;/code&gt; file and run &lt;code&gt;xrdb -merge .Xresources&lt;/code&gt;.&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;! Allow sixel graphics. (Try: &quot;convert -colors 16 foo.jpg sixel:-&quot;).
xterm*decTerminalID     :       vt340
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2&gt;Detecting screen size requires xterm configuration&lt;/h2&gt;
&lt;p&gt;If you are using xterm, to have &lt;code&gt;lsix&lt;/code&gt; automatically adjust how many tiles it shows based on your window size, you'll need to add the following to your .Xresources:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;! Allow lsix to read the terminal window size (op #14)
xterm*allowWindowOps      : False
xterm*disallowedWindowOps : 1,2,3,4,5,6,7,8,9,11,13,18,19,20,21,GetSelection,SetSelection,SetWinLines,SetXprop
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Xterm's configuration for this is rather recondite. In order to allow the operation checking the window size (#14), we have to tell xterm to not to allow window ops, but then we explicitly list the ops disallowed, and it just happens that that list does not include the number 14. (This is very silly.)&lt;/p&gt;
&lt;h2&gt;Configuration&lt;/h2&gt;
&lt;p&gt;Because &lt;code&gt;lsix&lt;/code&gt; is currently designed to be very simple, there are no command line flags, no configuration files, no knobs to twiddle, or frobs to frobnosticate. However, since the script is so simple, if you want to make a change, it's pretty easy to do just by editing the file. Everything is nicely commented with the most common default variables at the top.&lt;/p&gt;
&lt;h2&gt;Contact the author&lt;/h2&gt;
&lt;p&gt;I welcome feedback. If you use lsix and like it or have suggestions for how it can be improved, please go ahead and send your thoughts to me &lt;a href=&quot;https://github.com/hackerb9/lsix/issues/new&quot;&gt;@hackerb9&lt;/a&gt; via GitHub.&lt;/p&gt;
&lt;h2&gt;Bugs&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;
&lt;p&gt;Screen width is currently limited to 1000px due to a misfeature in xterm which caused it to silently show nothing. This limitation will be removed once xterm can handle images greater than 1000x1000.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Directories specified on the command line should perhaps be processed as if the user had cd'd to that directory.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Filenames that begin with &quot;@&quot; are special to ImageMagick and it'll freak out if you don't prepend a directory. (&lt;code&gt;lsix ./@foo.png&lt;/code&gt;) (This is a bug in ImageMagick, not lsix.)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Specifying the empty string &lt;code&gt;&quot;&quot;&lt;/code&gt; as a filename makes ImageMagick hang. (This appears to be an ImageMagick bug / misfeature).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Long filenames are wrapped, but not intelligently. Would it complicate this script too much to make it prefer to wrap on whites space, dashes, underscores, and periods? Maybe.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;If you run &lt;code&gt;lsix foo.avi&lt;/code&gt;, you're asking for trouble.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;Future Issues&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;
&lt;p&gt;The Sixel standard, at least as implemented by xterm, doesn't appear to have a way to query the size of the graphics screen. Reading the VT340 documentation, it appears your program has to already know the resolution of the device you're rendering on.&lt;/p&gt;
&lt;p&gt;There is a way to read the window size using the dtterm WindowOps extension but it is not quite the right solution and it is not enabled by default in xterm. The geometry of the Sixel graphics screen is not necessarily the same as the window size. (For example, xterm limits the graphics geometry to 1000x1000, even though the window can actually be larger.)&lt;/p&gt;
&lt;p&gt;For now, if your terminal can handle it, &lt;code&gt;lsix&lt;/code&gt; will use the dtterm WindowOps to read your window size, but the chances of that working are slim. For most people &lt;code&gt;lsix&lt;/code&gt; will assume you are on a VT340 (800x480) and can fit only 6 tiles per row. (I've e-mailed a proposed extension to the protocol to Thomas E. Dickey, maintainer of xterm.)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;The Sixel standard also lacks a way to query the number of color registers available. I used the extensions from &lt;code&gt;xterm&lt;/code&gt; to do so, but I do not know how widely implemented they are. If a terminal does not respond, &lt;code&gt;lsix&lt;/code&gt; presumes you're on an original vt340 and uses only 16 color registers. (Sorry, 4-gray vt330 users! Time to upgrade. ;-) )&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/saitoha/libsixel&quot;&gt;libsixel&lt;/a&gt; is an excellent project for writing programs that can output optimized Sixel graphics commands. Because I have a lot of respect for the project, I feel I should explain why &lt;code&gt;lsix&lt;/code&gt; does not use libsixel.&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;
&lt;p&gt;(a) I wanted lsix to work everywhere easily. Bash and imagemagick are ubiquitous, so a shell script is a natural solution.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;(b) I wanted &lt;code&gt;lsix&lt;/code&gt; to be simple enough that it could be easily customized and extended by other people. (Including myself.)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;(c) ImageMagick has better support for reading different formats than stb_image (the library used by libsixel's &lt;code&gt;img2sixel&lt;/code&gt;). (For example: xpm, svg, 16-bit png, and even sixel files are not recognized by img2sixel). Since ImageMagick can read all of those and write sixel output directly, it made sense to use it for both.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;(d) While libsixel is optimized and would surely be faster than ImageMagick, it's overkill. For a simple directory listing, this is plenty fast enough.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/article&gt;&lt;/div&gt;
</description>
<pubDate>Wed, 26 Dec 2018 23:41:17 +0000</pubDate>
<dc:creator>bb88</dc:creator>
<og:image>https://avatars2.githubusercontent.com/u/10174223?s=400&amp;v=4</og:image>
<og:type>object</og:type>
<og:title>hackerb9/lsix</og:title>
<og:url>https://github.com/hackerb9/lsix</og:url>
<og:description>Like &quot;ls&quot;, but for images. Shows thumbnails in terminal using sixel graphics. - hackerb9/lsix</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://github.com/hackerb9/lsix</dc:identifier>
</item>
<item>
<title>The future of Kubernetes is virtual machines</title>
<link>http://tech.paulcz.net/blog/future-of-kubernetes-is-virtual-machines/</link>
<guid isPermaLink="true" >http://tech.paulcz.net/blog/future-of-kubernetes-is-virtual-machines/</guid>
<description>&lt;h2 id=&quot;peering-into-the-crystal-ball&quot;&gt;Peering into the crystal ball&lt;/h2&gt;
&lt;p&gt;Kubernetes as a technology has been very important to my career this year, and will be even more so for next year too. As 2018 comes to a close its time to drag out the hubris and make a bold prediction. The future of Kubernetes is Virtual Machines, not Containers.&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;&lt;strong&gt;The future of Kubernetes is Virtual Machines, not Containers.&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The Chinese Zodiac calls 2018 the year of the Dog, in tech it was the year of the Kubernetes. There are plenty of people only now learning about Kubernetes. CIOs everywhere are hard at work trying to develop a “Kubernetes Strategy” [1]. Some organizations are already running large production workloads on Kubernetes.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;[1] If you’re trying to develop a Kubernetes strategy you’ve already failed, but that’s a different blog post.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;In other words there are plenty of people at each stage of the Gartner Hype Cycle for Kubernetes. Many are stuck in the trough of disillusionment or have drowned in the pit of despair.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://tech.paulcz.net/blog/future-of-kubernetes-is-virtual-machines/hype-cycle.png&quot; alt=&quot;Gartner Hype Cycle&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Jeremykemp at &lt;a href=&quot;https://commons.wikimedia.org/wiki/File:Gartner_Hype_Cycle.svg&quot;&gt;Wikipedia&lt;/a&gt; &lt;a href=&quot;https://creativecommons.org/licenses/by-sa/3.0&quot;&gt;Creative Commons CC BY-SA 3.0&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;I am a big fan of containers and I’m not going to try to suggest that &lt;a href=&quot;https://chrisshort.net/docker-inc-is-dead/&quot;&gt;containers are dead&lt;/a&gt;. What Docker brought us in 2013 was a wrapper around Linux Containers. They showed us an amazing new way to build, package, share, and deploy applications. This came at exactly the right time as we had started to get serious about Continuous Delivery. Their model was perfect for the modern delivery pipeline and the emergence of PaaS and later CaaS platforms.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://tech.paulcz.net/blog/future-of-kubernetes-is-virtual-machines/cloud-native-ops-pipeline.png&quot; alt=&quot;Cloud Native Operations Pipeline&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Engineers working at Google saw the technology community was finally ready for containers. Google has been using (and more or less invented) containers for a very long time already. They started to build Kubernetes which as we all know by now is a re-imagining of Google’s own Borg platform built in the open as a community effort.&lt;/p&gt;
&lt;p&gt;It didn’t take long for the big public clouds to provide a Kubernetes based platform (GKE, AKS, EKS). The on premise folks were also quick to build platforms based on Kubernetes as well (Pivotal Container Service, Openshift, etc).&lt;/p&gt;
&lt;h2 id=&quot;soft-and-squishy-multi-tenancy&quot;&gt;Soft and Squishy Multi-Tenancy&lt;/h2&gt;
&lt;p&gt;There’s one sticky problem that’s left to solve, and this I believe will prove to be the downfall of the container … multi-tenancy.&lt;/p&gt;
&lt;p&gt;Linux containers were not built to be secure isolated sandboxes (like Solaris Zones or FreeBSD Jails). Instead they’re built upon a shared kernel model that utilizes kernel features to provide basic process isolation. As &lt;a href=&quot;https://blog.jessfraz.com/post/containers-zones-jails-vms/&quot;&gt;Jessie Frazelle&lt;/a&gt; would say “Containers aren’t a real thing”.&lt;/p&gt;
&lt;blockquote class=&quot;twitter-tweet&quot;&gt;
&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;containers aren't things&lt;/p&gt;
— jessie frazelle 👩🏼‍🚀 (@jessfraz) &lt;a href=&quot;https://twitter.com/jessfraz/status/1015407561187655680?ref_src=twsrc%5Etfw&quot;&gt;July 7, 2018&lt;/a&gt;&lt;/blockquote&gt;
&lt;p&gt;Compounding this is the fact that most Kubernetes components are not Tenant aware. Sure you have &lt;a href=&quot;https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/&quot;&gt;Namespaces&lt;/a&gt; and &lt;a href=&quot;https://kubernetes.io/docs/concepts/policy/pod-security-policy/&quot;&gt;Pod Security Policies&lt;/a&gt; but the API itself is not. Nor are the internal components like the &lt;code&gt;kubelet&lt;/code&gt; or &lt;code&gt;kube-proxy&lt;/code&gt;. This leads to Kubernetes having a “Soft Tenancy” model.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://tech.paulcz.net/blog/future-of-kubernetes-is-virtual-machines/k8s-arch.png&quot; alt=&quot;Kubernetes Architecture&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Abstractions leak. A platform built on top of containers will inherit many of the soft tenancy aspects of containers. Platforms built on top of hard multi-tenancy Virtual Machines all inherit that hard tenancy (VMware, Amazon Web Services, OpenStack, etc).&lt;/p&gt;
&lt;h2 id=&quot;kubesprawl-rules-everything-around-me&quot;&gt;Kubesprawl Rules Everything Around Me&lt;/h2&gt;
&lt;p&gt;Kubernetes’ soft tenancy model leaves service providers and distributions in a weird place. The Kubernetes cluster itself becomes the line of “Hard Tenanacy”. There are many reasons (even inside the same organisation) to require hard tenancy between users (or appplications). Since the public clouds provide fully managed Kubernetes as a Service offerings its easy enough for each Tenant to get their own cluster and use the cluster boundary as the isolation point.&lt;/p&gt;
&lt;p&gt;Some Kubernetes distributions like &lt;a href=&quot;https://pivotal.io/platform/pivotal-container-service&quot;&gt;Pivotal Container Service (PKS)&lt;/a&gt; are very aware of this &lt;a href=&quot;https://content.pivotal.io/youtube-uberflip/kubernetes-one-cluster-or-many-3&quot;&gt;tenancy issue&lt;/a&gt; and have taken a similar model by providing that same Kubernetes as a Service experience you’d get from a public cloud but in your own datacenter.&lt;/p&gt;
&lt;p&gt;This leads to the emerging pattern of “many clusters” rather than “one big shared” cluster. Its not uncommon to see customers of Google’s GKE Service have dozens of Kubernetes clusters deployed for multiple teams. Often each developer gets their own cluster. This kind of behavior leads to a shocking amount of Kubesprawl.&lt;/p&gt;
&lt;p&gt;Alternatively Kubernetes operators running self Kubernetes clusters (either upstream or distribution based) in their own datacenters are left to take on the extra work of managing lots of clusters on their own, or to accept the soft tenancy on just one or two larger clusters.&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;&lt;strong&gt;“This kind of behavior leads to a shocking amount of Kubesprawl”&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Generally the smallest cluster you get is 4 machines (or VMs). One (or 3 for HA) for the Kubernetes Master, three for the Kubernetes Workers. This ties up a ton of money in systems that are for the most part just sitting there idle.&lt;/p&gt;
&lt;p&gt;So we need to somehow move Kubernetes to a hard-tenancy model. The Kubernetes community is very aware of this need and has a &lt;a href=&quot;https://groups.google.com/forum/#!forum/kubernetes-wg-multitenancy&quot;&gt;multi-tenancy working group&lt;/a&gt;. This group has working hard on that problem and they have several suggested models and proposals on how to solve each model.&lt;/p&gt;
&lt;p&gt;Jessie Frazelle wrote a &lt;a href=&quot;https://blog.jessfraz.com/post/hard-multi-tenancy-in-kubernetes/&quot;&gt;blog post&lt;/a&gt; about this exact topic which is great because she’s much smarter than me so I can link you to her and save myself about ten years of hard study trying to catch up to her. If you have not read it, stop reading here and go read it first.&lt;/p&gt;
&lt;h2 id=&quot;just-make-really-small-vms-optimized-for-speed&quot;&gt;Just make really small VMs optimized for speed…&lt;/h2&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;Kata Containers is an open source project and community working to build a standard implementation of lightweight Virtual Machines (VMs) that feel and perform like containers, but provide the workload isolation and security advantages of VMs.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Jessie suggests using a VM Container technology such as &lt;a href=&quot;https://katacontainers.io/&quot;&gt;Kata Containers&lt;/a&gt;. Kata Containers combine Virtual Machine level isolation that act and perform like Containers. This allows Kubernetes to give each Tenant (we’ll assume a tenant per namespace) its own set of Kubernetes system services running in nested VM Containers (A VM Container running inside a VM provided by the underlying IaaS).&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://tech.paulcz.net/blog/future-of-kubernetes-is-virtual-machines/jessie-tenancy1.png&quot; alt=&quot;Hard Tenancy Kubernetes&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;image from &lt;a href=&quot;https://blog.jessfraz.com/post/hard-multi-tenancy-in-kubernetes/&quot;&gt;Jessie Frazelle - Hard Multi-Tenancy in Kubernetes&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;This is an elegant solutions to Kubernetes multi-tenancy. Her suggestion goes even further to suggest that Kubernetes use nested Container VMs for the workloads (Pods) running on Kubernetes which provides a significant increase of resource utilization.&lt;/p&gt;
&lt;p&gt;We have at least one more optimization to make here. Build out a suitable Hypervisor for the underlying IaaS or cloud provider. If a VM Container is a first level abstraction provided by the IaaS then we increase our resource utilization even further. The minimal number of VMs required to run a Kubernetes cluster goes down to one (or three for HA) to host the Kubernetes control plane exposed to the “Superuser”.&lt;/p&gt;
&lt;h2 id=&quot;resource-cost-optimized-multi-tenancy&quot;&gt;Resource (cost) Optimized Multi-tenancy&lt;/h2&gt;
&lt;p&gt;A Kubernetes deployment with two namespaces both with a number of applications running would look something like this.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://tech.paulcz.net/blog/future-of-kubernetes-is-virtual-machines/hard-tenancy-k8s.png&quot; alt=&quot;Hard Tenancy Hosted Kubernetes&quot;/&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;Note: there are other cloud tenant workloads running on the same IaaS infrastructure. Since these are VM Containers they have the same level of isolation as a regular Cloud VM. Thus they can run on the same hypervisor with minimal risk.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Initially there is zero infrastructure deployed to the cloud, thus there is zero cost to the Superuser.&lt;/p&gt;
&lt;p&gt;The Superuser requests a Kubernetes cluster from the cloud. The Cloud provider creates a single Container VM (or 3 for HA) which is running the main Kubernetes API and System Services. The Superuser could choose to deploy pods in the system namespace, or create new namespaces to delegate access to other users.&lt;/p&gt;
&lt;p&gt;The Superuser create two Namespaces &lt;code&gt;foo&lt;/code&gt; and &lt;code&gt;bar&lt;/code&gt;. Kubernetes requests two VM containers from the Cloud for each Namespace’s Control Plane (Kubernetes API and System Services). The Superuser delegates access to those Namespaces to some users who each deploy some workloads (Pods), their respective Control Planes request VM containers for each of those workloads.&lt;/p&gt;
&lt;p&gt;At all stages of this, the superuser is only paying for the actual consumed resources. The cloud provider owns the capacity which is available to any user of the cloud.&lt;/p&gt;
&lt;h2 id=&quot;i-m-not-actually-saying-anything-new-here&quot;&gt;I’m not actually saying anything new here …&lt;/h2&gt;
&lt;p&gt;The cloud providers are already working towards this future. You can see this forming by watching what is happening in the Open Source Communities. (Arguably Amazon is already doing this opaquely with Fargate).&lt;/p&gt;
&lt;p&gt;The first hint is &lt;a href=&quot;https://github.com/virtual-kubelet/virtual-kubelet&quot;&gt;Virtual Kubelet&lt;/a&gt; which is an open source tool designed to masquerade as a kubelet. It connects Kubernetes to other APIs. This would allow Kubernetes to request Container VMs from a Cloud’s Container VM scheduler.&lt;/p&gt;
&lt;p&gt;Other hints are the number of emerging VM Container technologies, the already mentioned &lt;a href=&quot;https://katacontainers.io/&quot;&gt;Kata Containers&lt;/a&gt;, but also &lt;a href=&quot;https://aws.amazon.com/blogs/opensource/firecracker-open-source-secure-fast-microvm-serverless/&quot;&gt;Firecracker from Amazon&lt;/a&gt; and &lt;a href=&quot;https://github.com/google/gvisor&quot;&gt;gvisor&lt;/a&gt; from Google.&lt;/p&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;Tied together with the correct improvements to the Kubernetes hard tenancy model and you’ll arrive at the holy grail of Kubernetes. Full isolation of Kubernetes workloads and a pure per Pod consumption cost model to run workloads on Kubernetes.&lt;/p&gt;
&lt;p&gt;For those who aren’t on the public cloud, we don’t get the same consumption model as the onus for capacity remains with the infrastructure provider (in this case yourself). You will still get the benefits of higher resource utilization which pays off in lower capacity requirements.&lt;/p&gt;
&lt;p&gt;Let’s hope VMware and OpenStack are paying attention and bring us lightweight VM Container technology based hypervisors and the appropriate Virtual Kubelet implementations.&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;
&lt;h5&gt;Related Posts&lt;/h5&gt;
&lt;/p&gt;
</description>
<pubDate>Wed, 26 Dec 2018 23:09:13 +0000</pubDate>
<dc:creator>MordodeMaru</dc:creator>
<dc:language>en-us</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://tech.paulcz.net/blog/future-of-kubernetes-is-virtual-machines/</dc:identifier>
</item>
<item>
<title>Rust 2019 and beyond: limits to some growth</title>
<link>https://graydon2.dreamwidth.org/263429.html</link>
<guid isPermaLink="true" >https://graydon2.dreamwidth.org/263429.html</guid>
<description>&lt;br /&gt;This is a blog post (as solicited) about my suggestions for the Rust project in 2019 and beyond.&lt;br /&gt;I should note that I am speaking only for myself, not anyone else, and not even as a very active participant in Rust anymore. Moreover these suggestions, to a large extent, apply to many projects. Rust is just one case, but one that is currently doing some conscious year-end reflection.&lt;p&gt;I should also note overall that I'm quite pleased by the trajectory of the Rust project and this suggestion is being made only in the spirit of keeping it healthy and on-track, avoiding some problems I observe developing in it, as a mostly-outsider these days.&lt;/p&gt;&lt;h2&gt;TL;DR:&lt;/h2&gt;
&lt;br /&gt;I'm writing to make a recommendation about paying attention to -- acknowledging, planning, making explicit mechanisms and policy around the limits of -- the growth of two things in the project:&lt;br /&gt;&lt;ol&gt;&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Necessarily-shared technical artifacts, specifically the language definition itself.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;The strains on people participating in conversations about those artifacts.&lt;br /&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;br /&gt;In particular, I want to draw attention (as others have done, with other words) to the fact that unlimited growth in both of these things is neither possible nor desirable, that there are natural limits, and that as with all natural systems reaching their growth limits, it will be better for everyone if the encounter with the limits is made in a controlled, planned fashion.&lt;p&gt;Note that I am &lt;em&gt;not&lt;/em&gt; writing about limits to the growth of many other areas of the project. It may be possible to have (say) a package index that is too big, or a website that is too big, or maybe even a user community that is too big; but it's not clear that those are problems yet for Rust, and I'm presently only talking about the two specific areas above.&lt;/p&gt;&lt;h2&gt;Limiting factors and overshoots.&lt;/h2&gt;
&lt;br /&gt;Every natural system has factors that limit its growth. That is why the universe is not (for example) a single amoeba expanding outwards at the speed of light. A system grows (and often its rate of growth grows too!) until it starts to encounter limiting factors, and then one by one the rate-of-rate-of-change, and then the rate-of-change, and finally the overall size of the system eventually all plateau. Typical growth patterns thus look something like a sigmoid or &quot;S-curve&quot;, gradually approaching some asymptote. At least when the limiting factors are encountered in a gradual or controlled fashion.&lt;p&gt;&lt;img src=&quot;https://upload.wikimedia.org/wikipedia/commons/a/ac/Logistic-curve.png&quot; /&gt;&lt;/p&gt;&lt;p&gt;When a system encounters its limits in an &lt;em&gt;uncontrolled&lt;/em&gt; or &lt;em&gt;abrupt&lt;/em&gt; fashion, a phenomenon can occur that is more like an overshoot, or even oscillation: the limit still &lt;em&gt;exists&lt;/em&gt; but its effect is felt more in the form of collapse or crisis. The S-curve goes up to a peak, followed by a crash on the other side. That is what you don't want.&lt;/p&gt;&lt;h2&gt;Examples of control.&lt;/h2&gt;
&lt;br /&gt;The Rust project has a few forms of process control -- that are, in essence, limits on rates of change and/or growth -- that I think are very judicious, and in part responsible for the success of the project so far. I'd like to couch the following recommendations by analogy to them. These process controls are:&lt;br /&gt;&lt;ul&gt;&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;The Bors queue, generally gating changes on program-wide correctness.&lt;/li&gt;
&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Crater runs, generally gating releases on ecosystem-wide correctness.&lt;/li&gt;
&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Time-based releases, generally avoiding having to consider whether to slip a schedule rather than cut a feature. The decision is made by the clock, and everything not-ready gets cut.&lt;/li&gt;
&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;br /&gt;In addition, the project has grown some less-mechanized but nonetheless important social structures to manage the growth in people participating in the project.&lt;br /&gt;&lt;ul&gt;&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;The CoC. It's not always remembered, but the CoC does not just talk about social justice and harassment and so forth. It also lays out boundaries around the signal:noise ratio in conversation, the use of other people's attention and time, and the need to accept tradeoffs (I wish I'd had the foresight to use the term &quot;zero-sum&quot; here because I should have: not every decision is non-zero-sum).&lt;/li&gt;
&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;The RFC process. This includes rules about the form, content, timing, set of participants and permitted and expected forms of discourse when discussing significant changes.&lt;/li&gt;
&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;The governance model. This includes delineation of areas of responsibility, hierarchical delegation where necessary, roles and expectations of participants and so forth.&lt;/li&gt;
&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;br /&gt;All these are essentially acknowledgements that -- absent control -- overshoots can happen and crises (or at least a degree of chaos and dysfunction) may ensue. When possible, process controls are automatic and completely impartial (to minimize ill-will and subjective judgement, the temptation to cut corners, etc.) Where necessarily subjective, the norms and processes are at least clearly articulated in writing, in well-documented, easy-to-find places.&lt;h2&gt;Areas of concern.&lt;/h2&gt;
&lt;br /&gt;Going back to the two areas of concern, then: I want to bring attention to these two areas where the project does not currently have adequate mechanisms or policies in place to control growth, that carry risks of eventual dysfunction or even crisis. In both, it is not clear to me how far from such crisis the project currently is; but either way I think it is worth acting sooner rather than later.&lt;br /&gt;&lt;ol readability=&quot;0.5&quot;&gt;&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;&lt;strong&gt;The language itself&lt;/strong&gt;. Its definition. This is (unlike many parts of the project) a &lt;em&gt;necessarily shared&lt;/em&gt; technical artifact. Everyone has a stake in it, and every change potentially effects everyone. Moreover, everyone needs to learn and understand a substantial part of it: people do not have the option to ignore parts they are not interested in. Even parts one &lt;em&gt;wants&lt;/em&gt; to ignore will occur in shared contexts: documentation and teaching material, testsuites and validation material, compiler internals, formal models, other people's codebases, overall maintenance burden, etc. etc.&lt;p&gt;The limiting factors to the growth of the language &lt;em&gt;as an artifact&lt;/em&gt; then, include at least the following:&lt;br /&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;The ability for a beginner to learn the language.&lt;/li&gt;
&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;The ability for an intermediate user to feel confident, adapt to others' codebases.&lt;/li&gt;
&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;The ability for an expert or maintainer to know all (or most) of it, evaluate changes.&lt;/li&gt;
&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;The cost:benefit ratio of each new change, in terms of new and ongoing work that it incurs, vs. the number of people or use-cases that benefit from it. The costs are combinatorial with many dimensions of the project and language size, and almost always increase.&lt;/li&gt;
&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;br /&gt;The risks of overshooting these limits are potentially quite serious:&lt;br /&gt;&lt;ul&gt;&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Unsound language changes. Say: failure to maintain a critical safety guarantee.&lt;/li&gt;
&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Reputation for overcomplexity, loss of users. Becoming the next C++ or Haskell.&lt;/li&gt;
&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Lower-quality features with incomplete definition, testing, documentation.&lt;/li&gt;
&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Under-used features that simply absorb effort needed elsewhere.&lt;/li&gt;
&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Fragmentation into dialects, unsharable codebases, lower value.&lt;/li&gt;
&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;The &lt;strong&gt;strains on the people&lt;/strong&gt; working on the language. Some parts of the project can be delegated, de-synchronized, proceed in parallel with as many hands are available to work on them. Not so the shared technical artifacts. To some extent, many people (and an increasingly-many people) &lt;em&gt;need&lt;/em&gt; to be involved in &lt;em&gt;nearly all&lt;/em&gt; changes, and that means that there's a lot of pressure both for everyone in that group-of-many to &quot;keep up&quot; with all the discourse occurring, and for the standard of what it means to &quot;keep up&quot; to gradually creep upwards as both more changes are proposed, and more voices contribute to each discussion.&lt;p&gt;The limiting factors to the growth of these strains &lt;em&gt;on participating people&lt;/em&gt; include at least the following:&lt;br /&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;The number of hours in a day.&lt;/li&gt;
&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;The number of &lt;em&gt;paid&lt;/em&gt; hours in a day.&lt;/li&gt;
&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Responsibilities and interests in things outside the project.&lt;/li&gt;
&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Reservoirs of mental energy to understand what's being discussed.&lt;/li&gt;
&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Trust in the judgement of everyone participating in a conversation.&lt;/li&gt;
&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Reservoirs of psychological and emotional energy to read and discuss.&lt;/li&gt;
&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;The presumption of good faith in everyone participating in a conversation.&lt;/li&gt;
&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;br /&gt;The risks of overshooting these limits are also potentially quite serious:&lt;br /&gt;&lt;ul&gt;&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Poor decisions made through exhaustion or attrition.&lt;/li&gt;
&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Magnifying inequality: only the most-privileged, available, energetic, well-paid or otherwise well-situated participants can keep up.&lt;/li&gt;
&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Narrowing of discourse, from careful consideration to &quot;winning arguments&quot;.&lt;/li&gt;
&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;People acting out, burning out, behaving poorly, departing project.&lt;/li&gt;
&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Frustration, accusation of bad faith, grudges, conspiratorial thinking, forks.&lt;/li&gt;
&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;br /&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;br /&gt;I want to emphasize that the limits and risks I've outlined here are quite independent of people, topics, or even the Rust project generally. They will occur to varying degrees anywhere and with anyone. Simply swapping out the current maintainers (say) for your preferred people will not actually solve them: the limits will re-occur. The only solution is to manage the encounter with the limits. Put some controls in place.&lt;h2&gt;Suggested controls.&lt;/h2&gt;
&lt;br /&gt;This is the hard part and the part I'm going to leave least-definite. It's essential, after all, that the project adopt controls of its own volition rather than feeling that they're imposed from outside. I think the project needs to pause, reflect, consider collectively, and put some controls in place. I will therefore only offer a few possible suggestions here, not terribly structured but in the spirit of the holidays: as a bunch of possibly-interesting gifts to unwrap, look over, and decide whether to keep or swap for something more to your liking.&lt;br /&gt;&lt;ol&gt;&lt;li&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Embrace negative space. Make a process for defining features and concepts &lt;em&gt;out&lt;/em&gt; of the future trajectory of the language. Allow (or encourage) RFCs that say &quot;Rust will never have X&quot; for some value of X. While this sounds &quot;negative&quot; -- and it is, the word is written on the label -- it's a one-time thing where objections can be honestly considered with a long-term horizon (&quot;never&quot; is quite some time!) and given fair discussion, but then put to rest rather than being a perennial source of lingering conflict. A few examples where one might want to find and articulate negative spaces: paint certain categories of expressivity permanently out of the type system (eg. dependent types, HKTs, etc.), or out of the grammar (eg. parameter qualifiers, positional or keyword args), or out of the set of kinds of item (eg. anonymous record types), or out of the set of inference obligations in the middle-end (eg. constant value synthesis, implicit arguments). Put some hard limits in place, both to avoid those features themselves, and also to avoid people &quot;putting pieces in place&quot; that exist only to eventually-enable them.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Front-load costs, make them explicit. Taking a page from webassembly's change process, make it clear that moving an RFC past a very early phase is going to require a commensurate investment in implementation, formalization, documentation revision, teaching-materials revision, test-writing, maintenance and so forth. Absent a way to cover the costs, defer changes &quot;nobody has yet been found to pay for&quot; at that stage.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Set a learning-rate and book-length target. Try to work backwards from the amount of time and number of pages it &quot;should take&quot; to learn the language, or become expert in it, then cut things that go beyond that. If &quot;teach yourself Rust in 21 days&quot; isn't going to work, figure out what should. Three months? Six? A year? Think about languages that &quot;definitely take too long&quot;, and pick a number that's less than that. Is a thousand page manual healthy? Five hundred? Three hundred?&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Set other mechanized limits: lines of code in the compiler, overall time to bootstrap, dollars spent per day on AWS instances, number of productions in the grammar, number of inference rules in the type system, percent test coverage, percent of documents allowed to be marked as &quot;incomplete&quot;, etc. Get creative, figure out meaningful things you &lt;em&gt;can&lt;/em&gt; measure and then put mechanisms in place to limit them.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Rate-limit activity based on explicit personal-time-budgeting: ballpark-figure how many hours (or paid hours) per person are realistically available without exhaustion or burnout -- including the least-privileged but still necessary participants -- and work backwards to figure out how many hours of participation and review &quot;should be&quot; digested per team, per release cycle, thus how much work gets scheduled. Then cut or defer things that go beyond that.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;Allow the moderator team to apply rate limits or cooling-off periods to particular discussions &lt;em&gt;as a whole&lt;/em&gt;. Sometimes an outside perspective that a discussion is just too heated overall is an easier way to de-escalate than shining a spotlight on a single person's behaviour.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;As with the moderator team: grow an additional cross-project team that does budgeting and auditing of load levels &lt;em&gt;in other teams&lt;/em&gt;. This can be effective because the auditing/budgeting team sees their work as helping people to say no to the right things, rather than the default stance most people will have when participating in a team, to say yes to too many things.&lt;br /&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;br /&gt;These are just some ideas to outline the very general family of thing I am suggesting. I'm sure you can come up with more possible and more plausible ways of controlling the encounter with limits to the language's size and the personal strains of working on it. The Rust community has shown itself to be quite admirably creative, reflective and self-critical over the years. For this you should be commended. I hope this post is taken in the the same vein of constructive criticism.&lt;p&gt;Happy new year, and good luck!&lt;/p&gt;</description>
<pubDate>Wed, 26 Dec 2018 21:50:17 +0000</pubDate>
<dc:creator>janvdberg</dc:creator>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://graydon2.dreamwidth.org/263429.html</dc:identifier>
</item>
</channel>
</rss>