<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=hnrss.org%2Fnewest%3Fpoints%3D200&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://hnrss.org/newest?points=200" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>Hacker News: Newest</title>
<link>https://news.ycombinator.com/newest</link>
<description>Hacker News RSS</description>
<item>
<title>What&amp;#039;s Coming in Python 3.8</title>
<link>https://lwn.net/SubscriberLink/793818/0c6f9dd271021cd4/</link>
<guid isPermaLink="true" >https://lwn.net/SubscriberLink/793818/0c6f9dd271021cd4/</guid>
<description>&lt;center&gt;
&lt;table width=&quot;90%&quot; cellspacing=&quot;5&quot; readability=&quot;4.1829745596869&quot;&gt;&lt;tr readability=&quot;11.154598825832&quot;&gt;&lt;td valign=&quot;top&quot; readability=&quot;9&quot;&gt;
&lt;h3&gt;Welcome to LWN.net&lt;/h3&gt;
&lt;p&gt;The following subscription-only content has been made available to you by an LWN subscriber. Thousands of subscribers depend on LWN for the best news from the Linux and free software communities. If you enjoy this article, please consider accepting the trial offer on the right. Thank you for visiting LWN.net!&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot;&gt;
&lt;table class=&quot;Form&quot; width=&quot;100%&quot; readability=&quot;1.2016574585635&quot;&gt;&lt;tr readability=&quot;3.6049723756906&quot;&gt;&lt;td readability=&quot;4.8066298342541&quot;&gt;
&lt;h3&gt;Free trial subscription&lt;/h3&gt;
&lt;p&gt;Try LWN for free for 1 month: no payment or credit card required. &lt;a href=&quot;https://lwn.net/Promo/slink-trial2-3/claim&quot;&gt;Activate your trial subscription now&lt;/a&gt; and see why thousands of readers subscribe to LWN.net.&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/center&gt;
&lt;p&gt;By &lt;strong&gt;Jake Edge&lt;/strong&gt;&lt;br /&gt;July 17, 2019&lt;/p&gt;
&lt;p&gt;The Python 3.8 beta cycle is already underway, with &lt;a href=&quot;https://www.python.org/downloads/release/python-380b1/&quot;&gt;Python 3.8.0b1 released on June 4&lt;/a&gt;, followed by the &lt;a href=&quot;https://www.python.org/downloads/release/python-380b2/&quot;&gt;second beta on July 4&lt;/a&gt;. That means that Python 3.8 is feature complete at this point, which makes it a good time to see what will be part of it when the final release is made. That is &lt;a href=&quot;https://www.python.org/dev/peps/pep-0569/&quot;&gt;currently scheduled&lt;/a&gt; for October, so users don't have that long to wait to start using those new features.&lt;/p&gt;
&lt;h4&gt;The walrus operator&lt;/h4&gt;
&lt;p&gt;The headline feature for Python 3.8 is also its most contentious. The process for deciding on &lt;a href=&quot;https://www.python.org/dev/peps/pep-0572/&quot;&gt;PEP 572&lt;/a&gt; (&quot;Assignment Expressions&quot;) was a &lt;a href=&quot;https://lwn.net/Articles/759558/&quot;&gt;rather bumpy ride&lt;/a&gt; that eventually resulted in a &lt;a href=&quot;https://lwn.net/Articles/775105/&quot;&gt;new governance model&lt;/a&gt; for the language. That model meant that a new &lt;a href=&quot;https://lwn.net/Articles/788404/&quot;&gt;steering council&lt;/a&gt; would replace longtime benevolent dictator for life (BDFL) Guido van Rossum for decision-making, after Van Rossum stepped down in part due to &lt;a href=&quot;https://lwn.net/Articles/757713/&quot;&gt;the &quot;PEP 572 mess&quot;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Out of that came a new operator, however, that is often called the &quot;walrus operator&quot; due to its visual appearance. Using &quot;&lt;tt&gt;:=&lt;/tt&gt;&quot; in an &lt;tt&gt;if&lt;/tt&gt; or &lt;tt&gt;while&lt;/tt&gt; statement allows assigning a value to a variable while testing it. It is intended to simplify things like multiple-pattern matches and the so-called loop and a half, so:&lt;/p&gt;
&lt;pre&gt;
    m = re.match(p1, line)
    if m:
        return m.group(1)
    else:
        m = re.match(p2, line)
        if m:
            return m.group(2)
        else:
            m = re.match(p3, line)
            ...
&lt;/pre&gt;
becomes:
&lt;pre&gt;
    if m := re.match(p1, line):
        return m.group(1)
    elif m := re.match(p2, line):
        return m.group(2)
    elif m := re.match(p3, line):
        ...
&lt;/pre&gt;
And a loop over a non-&lt;a href=&quot;https://docs.python.org/3/glossary.html#term-iterable&quot;&gt;iterable&lt;/a&gt; object, such as:
&lt;pre&gt;
    ent = obj.next_entry()
    while ent:
        ...   # process ent
        ent = obj.next_entry()
&lt;/pre&gt;
can become:
&lt;pre&gt;
    while ent := obj.next_entry():
        ... # process ent
&lt;/pre&gt;
These and other uses (e.g. in list and dict comprehensions) help make the intent of the programmer clearer. It is a feature that many other languages have, but Python has, of course, gone without it for nearly 30 years at this point. In the end, it is actually a fairly small change for all of the uproar it caused.
&lt;h4&gt;Debug support for f-strings&lt;/h4&gt;
&lt;p&gt;The &lt;a href=&quot;https://lwn.net/Articles/656898/&quot;&gt;f-strings (or formatted strings)&lt;/a&gt; added into Python 3.6 are quite useful, but Pythonistas often found that they were using them the same way in debugging output. So Eric V. Smith &lt;a href=&quot;https://mail.python.org/pipermail/python-ideas/2018-October/053956.html&quot;&gt;proposed&lt;/a&gt; some additional syntax for f-strings to help with debugging output. The original idea came from Larry Hastings and the syntax has gone through some changes, as documented in two &lt;a href=&quot;https://bugs.python.org/issue36774&quot;&gt;feature-request&lt;/a&gt; &lt;a href=&quot;https://bugs.python.org/issue36817&quot;&gt;issues&lt;/a&gt; at bugs.python.org. The end result is that instead of the somewhat cumbersome:&lt;/p&gt;
&lt;pre&gt;
    print(f'foo={foo} bar={bar}')
&lt;/pre&gt;
Python 3.8 programmers will be able to do:
&lt;pre&gt;
    print(f'{foo=} {bar=}')
&lt;/pre&gt;
In both cases, the output will be as follows:
&lt;pre&gt;
    &amp;gt;&amp;gt;&amp;gt; foo = 42
    &amp;gt;&amp;gt;&amp;gt; bar = 'answer ...'
    &amp;gt;&amp;gt;&amp;gt; print(f'{foo=} {bar=}')
    foo=42 bar=answer ...
&lt;/pre&gt;
&lt;p&gt;Beyond that, some modifiers can be used to change the output, &quot;&lt;tt&gt;!s&lt;/tt&gt;&quot; uses the &lt;a href=&quot;https://docs.python.org/3/library/stdtypes.html#str&quot;&gt;&lt;tt&gt;str()&lt;/tt&gt;&lt;/a&gt; representation, rather than the default &lt;a href=&quot;https://docs.python.org/3/library/functions.html#repr&quot;&gt;&lt;tt&gt;repr()&lt;/tt&gt;&lt;/a&gt; value and &quot;&lt;tt&gt;!f&lt;/tt&gt;&quot; will be available to access formatting controls. They can be used as follows:&lt;/p&gt;
&lt;pre&gt;
    &amp;gt;&amp;gt;&amp;gt; import datetime
    &amp;gt;&amp;gt;&amp;gt; now = datetime.datetime.now()
    &amp;gt;&amp;gt;&amp;gt; print(f'{now=} {now=!s}')
    now=datetime.datetime(2019, 7, 16, 16, 58, 0, 680222) now=2019-07-16 16:58:00.680222

    &amp;gt;&amp;gt;&amp;gt; import math
    &amp;gt;&amp;gt;&amp;gt; print(f'{math.pi=!f:.2f}')
    math.pi=3.14
&lt;/pre&gt;
&lt;p&gt;One more useful feature, though it is mostly cosmetic (as is the whole feature in some sense), is the preservation of spaces in the f-string &quot;expression&quot;:&lt;/p&gt;
&lt;pre&gt;
    &amp;gt;&amp;gt;&amp;gt; a = 37
    &amp;gt;&amp;gt;&amp;gt; print(f'{a = }, {a  =  }')
    a = 37, a  =  37
&lt;/pre&gt;
The upshot of all of that is that users will be able to pretty-print their debugging, log, and other messages more easily. It may seem somewhat trivial in the grand scheme, but it is sure to see a lot of use. F-strings have completely replaced other string interpolation mechanisms for this Python programmer and I suspect I am far from the only one.
&lt;h4&gt;Positional-only parameters&lt;/h4&gt;
&lt;p&gt;Another change for 3.8 affords pure-Python functions the same options for parameters that those implemented in C already have. &lt;a href=&quot;https://www.python.org/dev/peps/pep-0570/&quot;&gt;PEP 570&lt;/a&gt; (&quot;Python Positional-Only Parameters&quot;) introduces new syntax that can be used in function definitions to &lt;a href=&quot;https://lwn.net/Articles/785245/&quot;&gt;denote positional-only arguments&lt;/a&gt;—parameters that cannot be passed as keyword arguments. For example, the &lt;a href=&quot;https://docs.python.org/3/library/functions.html#pow&quot;&gt;builtin &lt;tt&gt;pow()&lt;/tt&gt;&lt;/a&gt; function must be called with bare arguments:&lt;/p&gt;
&lt;pre&gt;
    &amp;gt;&amp;gt;&amp;gt; pow(2, 3)
    8
    &amp;gt;&amp;gt;&amp;gt; pow(x=2, y=3)
    ...
    TypeError: pow() takes no keyword arguments
&lt;/pre&gt;
&lt;p&gt;But if &lt;tt&gt;pow()&lt;/tt&gt; were a pure-Python function, as an alternative Python implementation might want, there is no easy way to force that behavior. A function could accept only &lt;tt&gt;*args&lt;/tt&gt; and &lt;tt&gt;**kwargs&lt;/tt&gt;, then enforce the condition that &lt;tt&gt;kwargs&lt;/tt&gt; is empty, but that obscures what the function is trying to do. There are other reasons described in the PEP, but many, perhaps most, are not things that the majority of Python programmers will encounter very often.&lt;/p&gt;
&lt;p&gt;Those that do, however, will probably be pleased that they can write a pure-Python &lt;tt&gt;pow()&lt;/tt&gt; function, which will behave the same as the builtin, as follows:&lt;/p&gt;
&lt;pre&gt;
    def pow(x, y, z=None, /):
        r = x**y
        if z is not None:
            r %= z
        return r
&lt;/pre&gt;
The &quot;&lt;tt&gt;/&lt;/tt&gt;&quot; denotes the end of the positional-only parameters in an argument list. The idea is similar to the &quot;&lt;tt&gt;*&lt;/tt&gt;&quot; that can be used in an argument list to delimit keyword-only arguments (those that must be passed as &lt;tt&gt;keyword=...&lt;/tt&gt;), which was specified in &lt;a href=&quot;https://www.python.org/dev/peps/pep-3102/&quot;&gt;PEP 3102&lt;/a&gt; (&quot;Keyword-Only Arguments&quot;). So a declaration like:
&lt;pre&gt;
    def fun(a, b, /, c, d, *, e, f):
        ...
&lt;/pre&gt;
Says that &lt;tt&gt;a&lt;/tt&gt; and &lt;tt&gt;b&lt;/tt&gt; must be passed positionally, &lt;tt&gt;c&lt;/tt&gt; and &lt;tt&gt;d&lt;/tt&gt; can be passed as either positional or by keyword, and &lt;tt&gt;e&lt;/tt&gt; and &lt;tt&gt;f&lt;/tt&gt; must be passed by keyword. So:
&lt;pre&gt;
    fun(1, 2, 3, 4, e=5, f=6)          # legal
    fun(1, 2, 3, d=4, e=5, f=6)        # legal
    fun(a=1, b=2, c=3, d=4, e=5, f=6)  # illegal
&lt;/pre&gt;
It seems likely that most Python programmers have not encountered &quot;&lt;tt&gt;*&lt;/tt&gt;&quot;; &quot;&lt;tt&gt;/&lt;/tt&gt;&quot; encounter rates are likely to be similar.
&lt;h4&gt;A movable &lt;tt&gt;__pycache__&lt;/tt&gt;&lt;/h4&gt;
&lt;p&gt;The &lt;tt&gt;__pycache__&lt;/tt&gt; directory is created by the Python 3 interpreter (starting with 3.2) to hold &lt;tt&gt;.pyc&lt;/tt&gt; files. Those files contain the byte code that is cached after the interpreter compiles &lt;tt&gt;.py&lt;/tt&gt; files. Earlier Python versions simply dropped the &lt;tt&gt;.pyc&lt;/tt&gt; file next to its &lt;tt&gt;.py&lt;/tt&gt; counterpart, but &lt;a href=&quot;https://www.python.org/dev/peps/pep-3147/&quot;&gt;PEP 3147&lt;/a&gt; (&quot;PYC Repository Directories&quot;) changed that.&lt;/p&gt;
&lt;p&gt;The intent was to support multiple installed versions of Python, along with the possibility that some of those might not be CPython at all (e.g. &lt;a href=&quot;https://pypy.org/&quot;&gt;PyPy&lt;/a&gt;). So, for example, standard library files could be compiled and cached by each Python version as needed. Each would write a file of the form &quot;&lt;tt&gt;name.interp-version.pyc&lt;/tt&gt;&quot; into &lt;tt&gt;__pycache__&lt;/tt&gt;. So, for example, on my Fedora system, &lt;tt&gt;foo.py&lt;/tt&gt; will be compiled when it is first used and &lt;tt&gt;__pycache__/foo.cpython-37.pyc&lt;/tt&gt; will be created.&lt;/p&gt;
&lt;p&gt;That's great from an efficiency standpoint, but may not be optimal for other reasons. Carl Meyer filed a &lt;a href=&quot;https://bugs.python.org/issue33499&quot;&gt;feature request&lt;/a&gt; asking for an environment variable to tell Python where to find (and put) these cache files. He was running into problems with permissions in his system and was disabling cache files as a result. So, he added a &lt;a href=&quot;https://docs.python.org/3.8/using/cmdline.html#envvar-PYTHONPYCACHEPREFIX&quot;&gt;&lt;tt&gt;PYTHONPYCACHEPREFIX&lt;/tt&gt;&lt;/a&gt; environment variable (also accessible via the &lt;tt&gt;-X pycache_prefix=PATH&lt;/tt&gt; command-line flag) to point the interpreter elsewhere for storing those files.&lt;/p&gt;
&lt;h4&gt;And more&lt;/h4&gt;
&lt;p&gt;Python 3.8 will add a &lt;a href=&quot;https://www.python.org/dev/peps/pep-0590/&quot;&gt;faster calling convention&lt;/a&gt; for C extensions based on the existing &quot;fastcall&quot; convention that is used internally by CPython. It is exposed in experimental fashion (i.e. names prefixed with underscores) for Python 3.8, but is expected to be finalized and fully released in 3.9. The &lt;a href=&quot;https://www.python.org/dev/peps/pep-0587/&quot;&gt;configuration handling in the interpreter&lt;/a&gt; has also been cleaned up so that the language can be more easily embedded into other programs without having environment variables and other configuration mechanisms interfere with the installed system Python.&lt;/p&gt;
&lt;p&gt;There are new features in various standard library modules as well. For example, the &lt;a href=&quot;https://docs.python.org/3/library/ast.html&quot;&gt;&lt;tt&gt;ast&lt;/tt&gt; module&lt;/a&gt; for processing Python abstract syntax trees has &lt;a href=&quot;https://docs.python.org/3.8/whatsnew/3.8.html#ast&quot;&gt;new features&lt;/a&gt;, as do &lt;a href=&quot;https://docs.python.org/3.8/whatsnew/3.8.html#statistics&quot;&gt;&lt;tt&gt;statistics&lt;/tt&gt;&lt;/a&gt; and &lt;a href=&quot;https://docs.python.org/3.8/whatsnew/3.8.html#typing&quot;&gt;&lt;tt&gt;typing&lt;/tt&gt;&lt;/a&gt;. And on and on. The draft &quot;&lt;a href=&quot;https://docs.python.org/3.8/whatsnew/3.8.html&quot;&gt;What's New In Python 3.8&lt;/a&gt;&quot; document has lots more information on these changes and many others. It is an excellent reference for what's coming in a few months.&lt;/p&gt;
&lt;p&gt;The status of &lt;a href=&quot;https://www.python.org/dev/peps/pep-0594/&quot;&gt;PEP 594&lt;/a&gt; (&quot;Removing dead batteries from the standard library&quot;) is not entirely clear, at least to me. The idea of removing old Python standard library modules has been in the works for a while, the PEP was proposed in May, and it was &lt;a href=&quot;https://lwn.net/Articles/790677/&quot;&gt;extensively discussed&lt;/a&gt; after that. Removing unloved standard library modules is not particularly controversial—at least in the abstract—until your favorite module is targeted, anyway.&lt;/p&gt;
&lt;p&gt;The steering council has not made a pronouncement on the PEP, nor has it delegated to a so-called BDFL-delegate. But the PEP is clear that even if it were accepted, the changes for 3.8 would be minimal. Some of the modules may start raising the &lt;tt&gt;PendingDeprecationWarning&lt;/tt&gt; exception (many already do since they have been deemed deprecated for some time), but the main change will be in the documentation. All of the 30 or so modules will be documented as being on their way out, but the actual removal will not happen until the 3.10 release—three or so years from now.&lt;/p&gt;
&lt;p&gt;The future Python release cadence is &lt;a href=&quot;https://lwn.net/Articles/791186/&quot;&gt;still under discussion&lt;/a&gt;; currently Python 3.9 is &lt;a href=&quot;https://www.python.org/dev/peps/pep-0596/&quot;&gt;scheduled&lt;/a&gt; for a June 2020 release, much sooner than usual. Python is on an 18-month cycle, but that is proposed to change to nine months (or perhaps a year). In any case, we can be sure that Python 3.8 will be here with the features above (and plenty more) sometime before &lt;a href=&quot;https://en.wikipedia.org/wiki/Halloween&quot;&gt;Halloween&lt;/a&gt; on October 31.&lt;/p&gt;

&lt;br clear=&quot;all&quot; /&gt;&lt;blockquote&gt;
&lt;table class=&quot;Form&quot; readability=&quot;1.2534246575342&quot;&gt;&lt;tr readability=&quot;2.5068493150685&quot;&gt;&lt;td&gt;&lt;strong&gt;Did you like this article?&lt;/strong&gt; Please accept our &lt;a href=&quot;https://lwn.net/Promo/slink-trial2-3/claim&quot;&gt;trial subscription offer&lt;/a&gt; to be able to see more content like it and to participate in the discussion.&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/blockquote&gt;
&lt;hr width=&quot;60%&quot; align=&quot;left&quot; /&gt;
(&lt;a href=&quot;https://lwn.net/Login/?target=/Articles/793818/&quot;&gt;Log in&lt;/a&gt; to post comments)</description>
<pubDate>Wed, 17 Jul 2019 19:35:04 +0000</pubDate>
<dc:creator>superwayne</dc:creator>
<dc:format>text/html</dc:format>
<dc:identifier>https://lwn.net/SubscriberLink/793818/0c6f9dd271021cd4/</dc:identifier>
</item>
<item>
<title>How can phone companies detect tethering?</title>
<link>https://android.stackexchange.com/questions/47819/how-can-phone-companies-detect-tethering-incl-wifi-hotspot</link>
<guid isPermaLink="true" >https://android.stackexchange.com/questions/47819/how-can-phone-companies-detect-tethering-incl-wifi-hotspot</guid>
<description>&lt;p&gt;How they detect that someone is tethering a device isn't something that network providers often want to talk about, for the obvious reason that the more consumers know about how this is being detected, the easier it is for them to find ways to hide the fact that they're doing it, and avoid the associated extra charges &lt;em&gt;(1)&lt;/em&gt;. However there are certain known techniques that will give away the fact that you're currently tethering, if your Service Provider happens to be running the right tool to check for these indicators:&lt;/p&gt;
&lt;h2&gt;Your Phone asks your network if tethering is allowed&lt;/h2&gt;
&lt;p&gt;The first and easiest method is that some phones will query the network to check whether the current contract allows tethering, and then totally disable the tethering options on the device in software if not. This generally only happens if you are running an OS version that has been customized by your Provider, &lt;a href=&quot;https://android.stackexchange.com/questions/36313/&quot;&gt;example 1&lt;/a&gt; &lt;a href=&quot;http://www.pcpro.co.uk/realworld/379738/can-the-network-tell-if-you-tether-your-pc-to-your-phone&quot; rel=&quot;nofollow noreferrer&quot;&gt;example 2&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Your phone tells your network that you are tethering&lt;/h2&gt;
&lt;p&gt;It's also rumoured that some phones have a second set of &lt;a href=&quot;http://en.wikipedia.org/wiki/Access_Point_Name&quot; rel=&quot;nofollow noreferrer&quot;&gt;APN&lt;/a&gt; details saved in them by the phone network, when you enable tethering they switch over to using this second APN for all tethered traffic, while using the normal APN for traffic originating on the phone. However I haven't found any concrete evidence of this, other than people finding odd APNs and wondering what they're for (bear in mind that an unlocked phone bought off-contract may have hundreds or thousands of APNs stored on it, ready for use on whichever network in whichever country the eventual owner decides to use it).&lt;/p&gt;
&lt;h2&gt;Inspecting the network packets for their TTL (time to live)&lt;/h2&gt;
&lt;p&gt;Every &lt;a href=&quot;http://en.wikipedia.org/wiki/Network_packet&quot; rel=&quot;nofollow noreferrer&quot;&gt;network packet&lt;/a&gt; travelling across a &lt;a href=&quot;http://en.wikipedia.org/wiki/Internet_Protocol&quot; rel=&quot;nofollow noreferrer&quot;&gt;TCP/IP network&lt;/a&gt;, like the internet, has a built-in time-to-live (&lt;a href=&quot;https://en.wikipedia.org/wiki/Time_to_live&quot; rel=&quot;nofollow noreferrer&quot;&gt;TTL&lt;/a&gt;) set on it, so that in case there is a problem with that packet reaching its destination this will stop it travelling around the network forever clogging everything up.&lt;/p&gt;
&lt;p&gt;The way this works is that the packet starts with a TTL number (say 128) set on it when it leaves the sending device (your phone, or laptop), and then every time that packet travels through a &lt;a href=&quot;https://en.wikipedia.org/wiki/Router_(computing)&quot; rel=&quot;nofollow noreferrer&quot;&gt;router&lt;/a&gt; of any kind (like your home broadband router, or a router at your ISP or phone company) that router subtracts one from the TTL (which would decrement the TTL to 127 in this example), the next router it travels through will in turn decrement the TTL again, and so on, if the TTL ever reaches zero then the router it's at discards the packet and doesn't transmit it again.&lt;/p&gt;
&lt;p&gt;When your phone is tethering it acts like a router so, as the packet passes from your tethered laptop through your phone and onto the phone network, your phone will subtract &quot;1&quot; from the TTL to show that the packet has passed through its first router. The phone networks know what the expected TTLs from common devices are (for instance packets from an iPhone always start at a TTL of 64), and so they can spot when they're one less (or totally different) than they're expecting.&lt;/p&gt;
&lt;h2&gt;MAC address inspection&lt;/h2&gt;
&lt;p&gt;Devices on a TCP/IP network, like the internet, all have a unique &lt;a href=&quot;http://en.wikipedia.org/wiki/MAC_address&quot; rel=&quot;nofollow noreferrer&quot;&gt;MAC&lt;/a&gt; ID set on their network interfaces. This is made up of two halves, one half identifying the manufacturer of the interface, and the other half being a unique identifier assigned by the manufacturer (like a serial number). Every network packet that is sent out will have been &quot;stamped&quot; with the MAC address of the originating device's network port. The MAC address of your laptop's wifi card will have a very different manufacturer and serial code than the MAC address of your phone's 3G interface.&lt;/p&gt;

&lt;p&gt;Different computer &lt;a href=&quot;http://en.wikipedia.org/wiki/Operating_system&quot; rel=&quot;nofollow noreferrer&quot;&gt;Operating Systems&lt;/a&gt; (eg Android, iOS, Windows, Mac OSX, Linux, etc) set up their TCP/IP stacks with different default values and settings (eg the Initial Packet Size, Initial TTL, Window Size...). The combination of these values can give a &quot;fingerprint&quot; that can be used to identify what operating system is running on the originating device. A side-effect of this may mean that if you're using an uncommon OS, or an OS that's similar to your phone's on your other device, your tethering &lt;a href=&quot;https://android.stackexchange.com/questions/5983/&quot;&gt;may not be spotted&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Looking at the Destination IP/URL&lt;/h2&gt;
&lt;p&gt;You can learn a lot by what a device regularly communicates with.&lt;/p&gt;
&lt;p&gt;For instance, many OSs these days do &lt;a href=&quot;https://en.wikipedia.org/wiki/Captive_portal&quot; rel=&quot;nofollow noreferrer&quot;&gt;Captive Portal&lt;/a&gt; Detection when they first connect to a wifi network (such as your wifi tether connection), they do this by trying to connect to a known web server across the internet, and checking to see if they get the response that they're expecting. If the expected response is not received, then it's likely that the wifi connection you're on is a &quot;captive portal&quot; and may need you to log in, or pay, to connect to it. As Microsoft OSs (like Windows Vista and Windows 7 &lt;a href=&quot;http://technet.microsoft.com/en-us/library/ee126135%28WS.10%29.aspx&quot; rel=&quot;nofollow noreferrer&quot;&gt;check with a Microsoft server by default&lt;/a&gt; and other OSs like Android, MacOS and so on all connect to their parent company's servers to do these checks, it can be used as a good indication of the operating system just after the initial connection is made.&lt;/p&gt;
&lt;p&gt;Additionally, if a device regularly contacts the Windows Update servers, then it's very likely that device is a Windows PC or laptop, whereas if it regularly checks with Google's Android update servers, then it's probably a phone. Or if they can see that you're connecting to the Apple App Store, but the &lt;a href=&quot;http://en.wikipedia.org/wiki/International_Mobile_Station_Equipment_Identity&quot; rel=&quot;nofollow noreferrer&quot;&gt;IMEI&lt;/a&gt; of the device that your SIM card is in indicates that it's not an Apple device, maybe you're tethering an iPad to an Android phone?&lt;/p&gt;
&lt;p&gt;More sophisticated systems can look at a whole range of data seeing who you're communicating with (eg are you connecting to the Facebook app's API servers which is more likely from a phone, or to Facebook's web servers which is more likely from a PC) and add a whole load of these indicators together to create a fingerprint that indicates what sort of device you're likely to be using. Some of these fingerprints can be caught out when new device types and services come out, for instance there are reports that just after tablets with built-in 3G came out, some owners of these on the AT&amp;amp;T network &lt;a href=&quot;http://forum.xda-developers.com/showthread.php?t=1893424&amp;amp;page=2&quot; rel=&quot;nofollow noreferrer&quot;&gt;received mails&lt;/a&gt; warning them that they'd been tethering when they hadn't, as the fingerprint from this new style of device didn't look like a typical phone.&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;&lt;em&gt;(1)&lt;/em&gt; Obviously before trying any methods to by-pass tethering detection please remember to check your phone contract and your phone company's policies on tethering. They may have penalty clauses buried in their contract, Fair Use Policy, or Acceptable Use Policy for people who try to bypass their restrictions and limits.&lt;/p&gt;
</description>
<pubDate>Wed, 17 Jul 2019 15:24:05 +0000</pubDate>
<dc:creator>antouank</dc:creator>
<og:type>website</og:type>
<og:url>https://android.stackexchange.com/questions/47819/how-can-phone-companies-detect-tethering-incl-wifi-hotspot</og:url>
<og:image>https://cdn.sstatic.net/Sites/android/img/apple-touch-icon@2.png?v=8f2d3ecfa663</og:image>
<og:title>How can phone companies detect tethering (incl. Wifi hotspot)</og:title>
<og:description>Mobile network operators (also: telephone companies, telcos, providers) sometimes offer low cost data packages that are usable only on the phone. Or so, they say. How can they distinguish between ...</og:description>
<dc:format>text/html</dc:format>
<dc:identifier>https://android.stackexchange.com/questions/47819/how-can-phone-companies-detect-tethering-incl-wifi-hotspot</dc:identifier>
</item>
<item>
<title>Firefox to Warn When Saved Logins Are Found in Data Breaches</title>
<link>https://www.bleepingcomputer.com/news/software/firefox-to-warn-when-saved-logins-are-found-in-data-breaches/</link>
<guid isPermaLink="true" >https://www.bleepingcomputer.com/news/software/firefox-to-warn-when-saved-logins-are-found-in-data-breaches/</guid>
<description>&lt;p&gt;&lt;img alt=&quot;Firefox&quot; height=&quot;455&quot; src=&quot;data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==&quot; width=&quot;1250&quot; data-src=&quot;https://www.bleepstatic.com/content/hl-images/2017/11/08/FirefoxLogo.png&quot; class=&quot;b-lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Starting in Firefox 70, Mozilla aims to have the browser report when any of your saved logins were found in data breaches. This will be done through their partnership with the Have I Been Pwned data breach site.&lt;/p&gt;
&lt;p&gt;Mozilla is slowly integrating their independent &lt;a href=&quot;https://www.bleepingcomputer.com/news/software/mozilla-launches-firefox-monitor-data-breach-notification-service/&quot; target=&quot;_blank&quot;&gt;Firefox Monitor service&lt;/a&gt; and the new &lt;a href=&quot;https://www.bleepingcomputer.com/news/security/firefox-lockwise-aims-to-revamp-browser-password-management/&quot; target=&quot;_blank&quot;&gt;Firefox Lockwise&lt;/a&gt; password manager directly into Firefox.  Mozilla is also considering premium services based around these features in the future.&lt;/p&gt;
&lt;p&gt;As &lt;a href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=1559365&quot; rel=&quot;nofollow&quot; target=&quot;_blank&quot;&gt;part of this integration&lt;/a&gt;, Firefox will scan the saved login names and passwords and see if they were exposed in a data breach listed on Have I been Pwned. If one is found, Firefox will alert the user and prompt them to change their password.&lt;/p&gt;
&lt;p&gt;This new feature will only work, though, for data breaches that exposed passwords and when the password was saved prior to an associated data breach.&lt;/p&gt;
&lt;p&gt;When a saved login is detected as being part of a breach, Mozilla will add an alert icon &lt;img align=&quot;absmiddle&quot; alt=&quot;alert&quot; src=&quot;data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==&quot; data-src=&quot;https://www.bleepstatic.com/images/news/web-browsers/firefox/70/saved-logins-data-breaches/alert.jpg&quot; class=&quot;b-lazy&quot;/&gt; next to the account profile in Firefox Lockwise as shown in a mockup from Mozilla below. Clicking on the saved login will open its subpanel that displays an alert that the &quot;Passwords were leaked or stolen&quot; as part of a data breach.&lt;/p&gt;
&lt;div&gt;&lt;img alt=&quot;Compromised Password Notification in Firefox Lockwise&quot; height=&quot;852&quot; src=&quot;data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==&quot; width=&quot;1214&quot; data-src=&quot;https://www.bleepstatic.com/images/news/web-browsers/firefox/70/saved-logins-data-breaches/breach-indicator.jpg&quot; class=&quot;b-lazy&quot;/&gt;&lt;strong&gt;Compromised Password Notification in Firefox Lockwise&lt;/strong&gt;&lt;/div&gt;
&lt;p&gt;Mozilla will also plans on displaying stats for the amount of data breaches your logins were involved in the browser's upcoming &lt;a href=&quot;https://www.bleepingcomputer.com/news/software/mozilla-firefox-protection-report-to-show-blocked-tracker-stats/&quot; target=&quot;_blank&quot;&gt;protection report&lt;/a&gt;. This protection report will eventally be available at the about:protections address.&lt;/p&gt;
&lt;div&gt;&lt;img alt=&quot;Firefox Monitor stats in Firefox Protection Report&quot; height=&quot;484&quot; src=&quot;data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==&quot; width=&quot;757&quot; data-src=&quot;https://www.bleepstatic.com/images/news/web-browsers/firefox/70/saved-logins-data-breaches/protection-panel.jpg&quot; class=&quot;b-lazy&quot;/&gt;&lt;strong&gt;Firefox Monitor stats in Firefox Protection Report&lt;/strong&gt;&lt;/div&gt;
&lt;p&gt;While the open bug reports indicate that Mozilla is targeting all of these new privacy and security features for Firefox 70, it is possible they will not be ready in time. Furthermore, as Mozilla has told BleepingComputer in the past, all of these features, their wording, and functionality may change as they are being developed. &lt;/p&gt;
&lt;p&gt;&lt;em&gt;H/T &lt;a href=&quot;https://techdows.com/2019/07/mozilla-firefox-70-expands-breach-notifications-to-saved-logins.html&quot; target=&quot;_blank&quot;&gt;TechDows.com&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;

</description>
<pubDate>Wed, 17 Jul 2019 15:14:24 +0000</pubDate>
<dc:creator>rahuldottech</dc:creator>
<og:url>https://www.bleepingcomputer.com/news/software/firefox-to-warn-when-saved-logins-are-found-in-data-breaches/</og:url>
<og:type>article</og:type>
<og:title>Firefox to Warn When Saved Logins are Found in Data Breaches</og:title>
<og:description>Starting in Firefox 70, Mozilla aims to have the browser report when any of your saved logins were found in data breaches. This will be done through their partnership with the Have I Been Pwned data breach site.</og:description>
<og:image>https://www.bleepstatic.com/content/hl-images/2017/11/08/FirefoxLogo.png</og:image>
<dc:language>en-us</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.bleepingcomputer.com/news/software/firefox-to-warn-when-saved-logins-are-found-in-data-breaches/</dc:identifier>
</item>
<item>
<title>The Raspberry Pi 4 needs a fan</title>
<link>https://www.jeffgeerling.com/blog/2019/raspberry-pi-4-needs-fan-heres-why-and-how-you-can-add-one</link>
<guid isPermaLink="true" >https://www.jeffgeerling.com/blog/2019/raspberry-pi-4-needs-fan-heres-why-and-how-you-can-add-one</guid>
<description>&lt;p&gt;The Raspberry Pi Foundation's &lt;a href=&quot;https://www.raspberrypi.org/blog/raspberry-pi-4-on-sale-now-from-35/&quot;&gt;Pi 4 announcement blog post&lt;/a&gt; touted the Pi 4 as providing &quot;PC-like level of performance for most users&quot;. The Foundation even offers a &lt;a href=&quot;https://www.raspberrypi.org/products/raspberry-pi-4-desktop-kit/&quot;&gt;Raspberry Pi 4 Desktop Kit&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The desktop kit includes the official Raspberry Pi 4 case, which is an enclosed plastic box with nothing in the way of ventilation.&lt;/p&gt;
&lt;p&gt;I have been using Pis for various projects since their introduction in 2012, and for many models, including the tiny Pi Zero and various A+ revisions, you didn't even need a fan or heatsink to avoid CPU throttling. And thermal images or point measurements using an IR thermometer usually showed the SoC putting out the most heat. As long as there was at least a little space for natural convection (that is, with no fan), you could do almost anything with a Pi and not have to worry about heat.&lt;/p&gt;
&lt;p&gt;The Pi 4 is a different beast, though. Not only does the CPU get appreciably hot even under normal load, there are a number of other parts of the board that heat up to the point they are uncomfortable to touch.&lt;/p&gt;
&lt;p&gt;Here's a thermal image taken with my &lt;a href=&quot;https://www.amazon.com/Seek-Thermal-Compact-Imager-iOS-Apple/dp/B00NYWABAA/ref=as_li_ss_tl?keywords=seek+thermal&amp;amp;qid=1563294096&amp;amp;s=hi&amp;amp;sr=1-1-spons&amp;amp;psc=1&amp;amp;linkCode=ll1&amp;amp;tag=mmjjg-20&amp;amp;linkId=6e3fdda32b0f76051f721598b8c232b7&amp;amp;language=en_US&quot;&gt;Seek thermal imager&lt;/a&gt; highlighting the parts of the board generating the most heat after 5 minutes at idle:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://www.jeffgeerling.com/sites/jeffgeerling.com/files/images/raspberry-pi-4-thermal.jpg&quot; width=&quot;650&quot; height=&quot;488&quot; alt=&quot;Raspberry Pi 4 Thermal IR image Seek&quot; class=&quot;insert-image&quot;/&gt;&lt;/p&gt;
&lt;p&gt;The CPU/System-on-a-Chip (SoC) was around 60°C as well, but the metal casing helps spread that heat around the perimeter pretty well, and in the IR image, the heat radiating off the top of the CPU is somewhat masked by the reflective metal surface. You might notice, however, the bright white areas on the lower left. That's all the power circuitry coming off the USB-C power input. That area of the board is almost always putting out a pretty large chunk of heat, and the components in this area don't put off heat as well as the metal-bodied CPU.&lt;/p&gt;
&lt;p&gt;Finally, this image was taken at idle, but if you have any activity on the USB ports, the USB controller chip on the right (that small red spot before you get to the far right of the image) lights up bright white and gets to be 60-70°C as well. A firmware update for the Pi 4 &lt;em&gt;may&lt;/em&gt; help keep that chip a little cooler, but it will still get hot under load.&lt;/p&gt;
&lt;p&gt;So imagine if you're truly using the Pi 4 as a desktop replacement, with at least one external USB 3.0 hard drive attached, WiFi connected and transferring large amounts of data, a USB keyboard and mouse, a few browser windows open (the average website these days might as well be an AAA video game with how resource-intense it is), a text editor, and a music player. This amount of load is enough to cause the CPU to throttle in less than 10 minutes, in my testing.&lt;/p&gt;
&lt;blockquote readability=&quot;13&quot;&gt;
&lt;p&gt;Why is throttling bad? Two reasons: First, throttling prevents you from getting the full CPU speed the Pi can offer, meaning things that you're doing will take longer. Second, it indicates that parts inside the Pi (usually just CPU, but likely other parts) are getting hot enough to reach their own internal safety limits. If you run computing hardware at its thermal capacity for long periods of time, this will cause more wear on the parts than if they are run well inside their limits.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;If you're just doing extremely light browsing, reading Wikipedia and the like, it might not hit the point where it throttles. But watching videos, scrolling through more complex sites, and switching applications frequently gets the CPU up to 80°C pretty fast, &lt;em&gt;especially if it's closed up inside a plastic box with no ventilation&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;For my more formal testing, I started running &lt;code&gt;stress --cpu 4&lt;/code&gt; to make the CPU do lots of work, continuously. After a couple minutes, using &lt;code&gt;vcgencmd measure_temp&lt;/code&gt; and &lt;code&gt;vcgencmd get_throttled&lt;/code&gt;, I was able to see the CPU start throttling as it hit 80°C (176°F):&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://www.jeffgeerling.com/sites/jeffgeerling.com/files/images/raspberry-pi-4-throttled-without-fan-80c.png&quot; width=&quot;325&quot; height=&quot;225&quot; alt=&quot;Raspberry Pi 4 throttling CPU at 80 degrees celsius measured using vcgencmd&quot; class=&quot;insert-image&quot;/&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;10&quot;&gt;
&lt;p&gt;To install &lt;code&gt;stress&lt;/code&gt;, run &lt;code&gt;sudo apt-get install -y stress&lt;/code&gt;. You can monitor the current temperature in a terminal window by running the command &lt;code&gt;watch -n 1 vcgencmd measure_temp&lt;/code&gt;. When the CPU throttles, the command &lt;code&gt;vcgencmd get_throttled&lt;/code&gt; outputs &lt;code&gt;0x20002&lt;/code&gt; (the first &lt;code&gt;2&lt;/code&gt; indicates the Pi has throttled at some point between the prior boot and now; the last &lt;code&gt;2&lt;/code&gt; indicates the Pi is &lt;em&gt;currently&lt;/em&gt; throttling the CPU frequency.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Modding the official Pi case to have a fan&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;tl;dr&lt;/strong&gt;: Watch the video (skip to 9:15 for the most exciting part, or read through the instructions below):&lt;/p&gt;
&lt;p&gt;&lt;iframe src=&quot;https://www.youtube.com/embed/mTHAO9P_hxQ&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;&quot;&gt;[embedded content]&lt;/iframe&gt;&lt;/p&gt;
&lt;p&gt;Without any ventilation, it's kind of a little plastic oven inside the Pi 4 case. A heat sink might help in some tiny way, but that heat has nowhere to go! So I decided to follow the lead of Redditor &lt;a href=&quot;https://www.reddit.com/r/raspberry_pi/comments/can2oe/modified_default_case_for_the_4b_with_temperature/&quot;&gt;u/CarbyCarberson&lt;/a&gt; and put a fan in the top cover.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://www.jeffgeerling.com/sites/jeffgeerling.com/files/images/pi-fan-pi-4-outside-case.jpg&quot; width=&quot;650&quot; height=&quot;487&quot; alt=&quot;Pi Fan outside Raspberry Pi 4 case unplugged&quot; class=&quot;insert-image&quot;/&gt;&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;I purchased a &lt;a href=&quot;https://www.amazon.com/MakerFocus-Raspberry-Brushless-Connector-Separating/dp/B072FW3DDQ/ref=as_li_ss_tl?keywords=pi-fan&amp;amp;qid=1563294616&amp;amp;s=gateway&amp;amp;sr=8-4&amp;amp;linkCode=ll1&amp;amp;tag=mmjjg-20&amp;amp;linkId=cb52387af7bd0d3de6c7ee0e6fadf29e&amp;amp;language=en_US&quot;&gt;Pi-Fan&lt;/a&gt; (came in a 2-pack) from Amazon, since it fits nicely above the board and comes with the proper screws for mounting. It plugs directly into the Pi's GPIO pins and needs no modifications.&lt;/li&gt;
&lt;li&gt;The easiest way to make a hole for the fan is to use a &lt;a href=&quot;https://www.amazon.com/Tools-Bi-Metal-Arbored-Technology-8-Inch/dp/B0052EDJ3O/ref=as_li_ss_tl?keywords=1+1/8%22+hole+saw&amp;amp;qid=1563343627&amp;amp;s=gateway&amp;amp;sr=8-3&amp;amp;linkCode=ll1&amp;amp;tag=mmjjg-20&amp;amp;linkId=4971fd1d12667b4fd697b8945fe25419&amp;amp;language=en_US&quot;&gt;1 1/8&quot; hole saw&lt;/a&gt;, drilling slowly.&lt;/li&gt;
&lt;li&gt;Put the hole saw on your drill, and either use the lower speed setting, or hold the trigger gently, and apply light pressure drilling while holding the Pi case steady.
&lt;ul&gt;&lt;li&gt;If you spin the hole saw too fast, you'll either lose control and scratch up your Pi case, or burn the plastic and make it look pretty ugly.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Drill directly over the center of the top of the case (make sure the Pi is &lt;em&gt;not&lt;/em&gt; inside!), in the middle of the area opposite the Pi logo (this way the fan won't be hitting the network or USB jacks).&lt;/li&gt;
&lt;li&gt;Use a file and/or sandpaper (up to 600 grit for a really nice finish) to smooth out the cut after you drill through.&lt;/li&gt;
&lt;li&gt;Place the fan on top of the hole, lining it up as closely as you can, then use a mechanical pencil or some other method to mark where the screw holes are around the fan's perimeter.&lt;/li&gt;
&lt;li&gt;Use a 7/64&quot; drill bit to drill out the fan screw holes you just marked.&lt;/li&gt;
&lt;li&gt;Use sandpaper to knock down the burrs from those screw holes on the inside.&lt;/li&gt;
&lt;li&gt;Place the fan under the top of the case, label sticking up (so you can see it through the top of the Pi case), and use the screws and nuts to secure the fan to the case.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;When you're putting the Pi back into the case, put it in as normal, then connect the red wire from the pan to the Pi's pin 4 (5V), and the black wire to the Pi's pin 6 (ground). (Reference: &lt;a href=&quot;https://learn.sparkfun.com/tutorials/raspberry-gpio/gpio-pinout&quot;&gt;GPIO pinout diagram&lt;/a&gt;.) Next time you plug in the Pi, the fan should start spinning right away. If it doesn't, either something is physically blocking the fan blades from turning, you have the fan plugged into the wrong GPIO pins, or your fan's a dud!&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://www.jeffgeerling.com/sites/jeffgeerling.com/files/images/raspberry-pi-4-official-case-with-fan.jpg&quot; width=&quot;650&quot; height=&quot;516&quot; alt=&quot;Raspberry Pi 4 official case with fan&quot; class=&quot;insert-image&quot;/&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;12&quot;&gt;
&lt;p&gt;If you don't have a drill and/or don't want to purchase a 1 1/8&quot; hole saw, you can also use a Dremel tool, though it takes a lot more care to drill through plastic without burning it or wrecking the rest of the top cover! Use a slow speed, and drill out a hole slightly less than the final size using a Dremel drill bit. Then use a round sanding bit to slowly cut back the last 1/8&quot; or so of plastic to reach the fan's outline. Then use the Dremel drill bit again to drill out the screw holes. Not as simple as using a real drill, but it can work.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Temperatures after installing a fan&lt;/h2&gt;
&lt;p&gt;After installing the fan, I booted the Pi and ran &lt;code&gt;stress --cpu 4&lt;/code&gt; and let it go for an hour. The entire time, the CPU's temperature stayed at or under 60°C (140°F), a full 20°C lower than the throttling point:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://www.jeffgeerling.com/sites/jeffgeerling.com/files/images/raspberry-pi-4-with-fan-at-60c-stable.png&quot; width=&quot;325&quot; height=&quot;203&quot; alt=&quot;Raspberry Pi 4 with stable CPU temperature at 60 degrees celsius&quot; class=&quot;insert-image&quot;/&gt;&lt;/p&gt;
&lt;p&gt;I have also been running a Kubernetes cluster with four Raspberry Pi 4's (see more: &lt;a href=&quot;https://www.pidramble.com&quot;&gt;Rasbperry Pi Dramble&lt;/a&gt;), and with the built-in fans on the official PoE HAT, those Pi's processors do not throttle either, even when I'm running a suite of tests which stresses the entire system for an hour or more. The area around the Pis gets fairly warm (since the fans are moving that heat out), but that's a good thing—the heat can dissipate into the surrounding air instead of forming a bubble around the board itself!&lt;/p&gt;
&lt;p&gt;The Pi-Fan that I am using produces 50 dB of sound at a distance of one foot (30 cm), so it's not silent, but it's actually a bit quieter than the little fans on the PoE HAT, which also have a higher pitched 'whine' to them that I found more distracting. When it's running, the fan also draws 80 mA of power, continuously, so if you're counting milliamps when supplying power to the Pi (e.g. when running off solar or battery), keep that in mind!&lt;/p&gt;
&lt;h2&gt;The Pi 4 needs a fan&lt;/h2&gt;
&lt;p&gt;A heatsink installed inside the Pi 4's official case will do precious little to avoid throttling the CPU (and likely other components, as they all get very hot). A case like the 'Flir' heatsink-as-a-case might help a little, though it still only offers passive heat dissipation. The Pi 3 B+ was the first model I used a fan with for intensive computing (e.g. running a Kubernetes cluster), but it could be used for light computing fanless. The Pi 4 pretty much demands a fan, and I'm amazed that the Pi 4 case doesn't even include holes for better natural heat convection.&lt;/p&gt;
&lt;p&gt;Here's to hoping the official Pi 4 B+ case includes some active ventilation, if we're going to keep increasing the speed and energy consumption of not only the SoC but all other Pi subsystems. Until then, I'll be modding my cases to include fans, or using something like the PoE board, with built-in ventilation, to keep my Pis cool.&lt;/p&gt;
&lt;p&gt;There are some other options which may be even easier than modifying the official case, like the &lt;a href=&quot;https://shop.pimoroni.com/products/fan-shim&quot;&gt;Fan Shim&lt;/a&gt; from Pimoroni or purchasing a 3rd party case with a fan built in. But this option was easy enough and all I needed to complete the project was a $4 fan and a $7 hole saw drill bit (which I can use for other projects in the future).&lt;/p&gt;
</description>
<pubDate>Wed, 17 Jul 2019 14:22:16 +0000</pubDate>
<dc:creator>geerlingguy</dc:creator>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.jeffgeerling.com/blog/2019/raspberry-pi-4-needs-fan-heres-why-and-how-you-can-add-one</dc:identifier>
</item>
<item>
<title>EU opens Amazon antitrust investigation</title>
<link>https://www.theverge.com/2019/7/17/20696214/amazon-european-union-antitrust-investigation-third-party-seller-marketplace</link>
<guid isPermaLink="true" >https://www.theverge.com/2019/7/17/20696214/amazon-european-union-antitrust-investigation-third-party-seller-marketplace</guid>
<description>&lt;p id=&quot;cTHE7W&quot;&gt;The EU’s Competition Commission has &lt;a href=&quot;http://europa.eu/rapid/press-release_IP-19-4291_en.htm&quot;&gt;opened a formal antitrust investigation&lt;/a&gt; into Amazon to investigate whether the company is using sales data to gain an unfair advantage over smaller sellers on the Marketplace platform. The Commission says it will look into Amazon’s agreements with marketplace sellers, as well as how Amazon uses data to choose which retailer to link to using the “Buy Box” on its site. The announcement comes on the same day that &lt;a href=&quot;https://www.reuters.com/article/us-amazon-com-germany/amazon-in-deal-with-german-watchdog-to-overhaul-marketplace-terms-idUSKCN1UC07B?feedType=RSS&amp;amp;feedName=technologyNews&quot;&gt;Amazon announced changes&lt;/a&gt; to its third-party seller service agreement in response to a separate antitrust investigation by German regulators.&lt;/p&gt;
&lt;p id=&quot;kSKLf7&quot;&gt;“E-commerce has boosted retail competition and brought more choice and better prices,” said the EU’s Competition Commissioner Margrethe Vestager. “We need to ensure that large online platforms don’t eliminate these benefits through anti-competitive behavior. I have therefore decided to take a very close look at Amazon’s business practices and its dual role as marketplace and retailer, to assess its compliance with EU competition rules.”&lt;/p&gt;
&lt;p id=&quot;lWP9Kc&quot;&gt;Responding to the news, Amazon told &lt;em&gt;The Verge&lt;/em&gt; that it “will cooperate fully with the European Commission and continue working hard to support businesses of all sizes and help them grow.”&lt;/p&gt;
&lt;div class=&quot;c-float-right&quot;&gt;
&lt;aside id=&quot;6wGFoY&quot;&gt;&lt;q&gt;A preliminary investigation started last September&lt;/q&gt;&lt;/aside&gt;&lt;/div&gt;
&lt;p id=&quot;dnv6nD&quot;&gt;It’s unclear how Amazon’s changes to its service agreement, also &lt;a href=&quot;https://www.reuters.com/article/us-amazon-com-germany/amazon-in-deal-with-german-watchdog-to-overhaul-marketplace-terms-idUSKCN1UC07B?feedType=RSS&amp;amp;feedName=technologyNews&quot;&gt;announced today&lt;/a&gt;, will affect the EU’s investigation. As part of the wide-ranging changes, Amazon agreed to give 30 days notice and a reason before removing sellers from its platform, and merchants will be able to take Amazon to court in their home countries, rather than being forced to do so in Luxembourg. After Amazon announced the changes, which are due to take effect in 30 days, German regulators agreed to drop their investigation.&lt;/p&gt;
&lt;p id=&quot;J6f6DC&quot;&gt;Last September, European regulators announced that they were &lt;a href=&quot;https://www.theverge.com/2018/9/19/17879480/amazon-eu-data-collection-probe&quot;&gt;taking a preliminary look&lt;/a&gt; at Amazon’s data collection practices. “If you, as Amazon, get the data from the smaller merchants that you host, which can be of course completely legitimate because you can improve your service to these smaller merchants, do you then also use this data to do your own calculations?” Vestager said at the time.&lt;/p&gt;
&lt;p id=&quot;Ts82Yq&quot;&gt;The investigation is the latest, and potentially the last, antitrust action to have been opened by Vestager, who has served as the Competition Commissioner on the European Commission for the past five years. During her tenure, which is due to end in October, Vestager has fined almost all of the major tech giants, including &lt;a href=&quot;https://www.theverge.com/2019/3/20/18270891/google-eu-antitrust-fine-adsense-advertising&quot;&gt;Google&lt;/a&gt;, &lt;a href=&quot;https://www.theverge.com/2018/1/24/16927042/qualcomm-apple-antitrust-chip-deal-eu-fine&quot;&gt;Qualcomm&lt;/a&gt;, and &lt;a href=&quot;https://www.theverge.com/2017/5/18/15657158/facebook-whatsapp-european-commission-fine-data-sharing&quot;&gt;Facebook&lt;/a&gt;. Apple was also forced to &lt;a href=&quot;https://www.theverge.com/2017/12/4/16736114/apple-ireland-european-union-order-back-taxes-agreement&quot;&gt;pay back $15.4 billion in taxes&lt;/a&gt;, thanks to a ruling by Vestager. So far, Amazon has managed to avoid being fined by EU regulators, but that could all change as a result of this investigation.&lt;/p&gt;
&lt;p id=&quot;GN5fMj&quot;&gt;&lt;em&gt;&lt;strong&gt;Update July 17th, 7:45AM ET:&lt;/strong&gt;&lt;/em&gt; &lt;em&gt;Updated with statement from Amazon and details of its contract changes in response to German investigation.&lt;/em&gt;&lt;/p&gt;
</description>
<pubDate>Wed, 17 Jul 2019 13:28:31 +0000</pubDate>
<dc:creator>Tomte</dc:creator>
<og:description>Amazon’s data-collection is being put under the microscope</og:description>
<og:image>https://cdn.vox-cdn.com/thumbor/HNPaWHizBMbmrxunsXiSQGEuFec=/0x146:2040x1214/fit-in/1200x630/cdn.vox-cdn.com/uploads/chorus_asset/file/11742007/acastro_1800724_1777_EU_0001.jpg</og:image>
<og:title>EU opens Amazon antitrust investigation</og:title>
<og:type>article</og:type>
<og:url>https://www.theverge.com/2019/7/17/20696214/amazon-european-union-antitrust-investigation-third-party-seller-marketplace</og:url>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.theverge.com/2019/7/17/20696214/amazon-european-union-antitrust-investigation-third-party-seller-marketplace</dc:identifier>
</item>
<item>
<title>Google&amp;#039;s Project Dragonfly &amp;#039;Terminated&amp;#039; in China</title>
<link>https://www.bbc.com/news/technology-49015516</link>
<guid isPermaLink="true" >https://www.bbc.com/news/technology-49015516</guid>
<description>&lt;figure class=&quot;media-landscape has-caption full-width lead&quot;&gt;&lt;span class=&quot;image-and-copyright-container&quot;&gt;
                
                &lt;img class=&quot;js-image-replace&quot; alt=&quot;China, Google, Project Dragonfly&quot; src=&quot;https://ichef.bbci.co.uk/news/320/cpsprodpb/17FE3/production/_104857289_china-google1.jpg&quot; width=&quot;976&quot; height=&quot;549&quot;/&gt;&lt;/span&gt;
            
            &lt;figcaption class=&quot;media-caption&quot;&gt;&lt;span class=&quot;off-screen&quot;&gt;Image caption&lt;/span&gt;
                &lt;span class=&quot;media-caption__text&quot;&gt;
                    Google's plans for a Chinese search engine attracted criticism from some
                &lt;/span&gt;
            &lt;/figcaption&gt;&lt;/figure&gt;&lt;p class=&quot;story-body__introduction&quot;&gt;Google's controversial plan to launch a censored search engine in China has been &quot;terminated&quot;, a company executive has said.&lt;/p&gt;&lt;p&gt;The project was &lt;a href=&quot;https://www.bbc.co.uk/news/technology-46604085&quot; class=&quot;story-body__link&quot;&gt;reported to have ceased late last year&lt;/a&gt; but rumours that it remained active persisted.&lt;/p&gt;&lt;p&gt;&quot;We have terminated Project Dragonfly,&quot; Google executive Karan Bhatia told the US Senate Judiciary Committee.&lt;/p&gt;&lt;p&gt;Buzzfeed, &lt;a href=&quot;https://www.buzzfeednews.com/article/daveyalba/google-project-dragonfly-terminated-senate-hearing&quot; class=&quot;story-body__link-external&quot;&gt;which reported the new comments&lt;/a&gt;, said it was the first public confirmation that Dragonfly had ended.&lt;/p&gt;&lt;p&gt;A spokesman for Google later confirmed to the site that Google currently had no plans to launch search in China and that no work was being done to that end.&lt;/p&gt;&lt;h2 class=&quot;story-body__crosshead&quot;&gt;'Disturbing' project&lt;/h2&gt;&lt;p&gt;Google's prototype Chinese search engine &lt;a href=&quot;https://www.bbc.co.uk/news/technology-45653035&quot; class=&quot;story-body__link&quot;&gt;had previously been labelled &quot;disturbing&quot; by one former employee.&lt;/a&gt;&lt;/p&gt;&lt;p&gt;Dragonfly had attracted criticism as a potential means through which Chinese authorities could censor web content and monitor citizens' behaviour online.&lt;/p&gt;&lt;p&gt;In late 2018, Google seemed reluctant to confirm that development of the search engine had been completely stopped, despite growing pressure on the firm.&lt;/p&gt;&lt;p&gt;Work on Dragonfly at that point was &quot;limited&quot;, chief executive Sundar Pichai told the US House Judiciary Committee in December.&lt;/p&gt;&lt;p&gt;According to documents obtained by investigative news site The Intercept, Dragonfly was launched as a company project in the spring of 2017.&lt;/p&gt;&lt;p&gt;The documents also suggested that Google engineers were at one point working on ways to filter out websites - including the BBC and Wikipedia - from search results, based on web censorship in China.&lt;/p&gt;
            </description>
<pubDate>Wed, 17 Jul 2019 13:22:08 +0000</pubDate>
<dc:creator>nedp</dc:creator>
<og:title>Google's Chinese search engine 'terminated'</og:title>
<og:type>article</og:type>
<og:description>The firm's plan to launch a censored search engine in China had faced much criticism.</og:description>
<og:url>https://www.bbc.com/news/technology-49015516</og:url>
<og:image>https://ichef.bbci.co.uk/news/1024/branded_news/17FE3/production/_104857289_china-google1.jpg</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.bbc.com/news/technology-49015516</dc:identifier>
</item>
<item>
<title>Zelda Screen Transitions Are Undefined Behaviour</title>
<link>https://gridbugs.org/zelda-screen-transitions-are-undefined-behaviour/</link>
<guid isPermaLink="true" >https://gridbugs.org/zelda-screen-transitions-are-undefined-behaviour/</guid>
<description>&lt;p&gt;The vertical scrolling effect in the original “The Legend of Zelda” relies on manipulating the NES graphics hardware in a manor likely that was unintended by its designers.&lt;/p&gt;
&lt;div class=&quot;nes-screenshot&quot;&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/title.png&quot; alt=&quot;title&quot;/&gt;&lt;/div&gt;
&lt;p&gt;Since I don’t have access to any official documentation for the NES Picture Processing Unit (PPU - the graphics chip), my claim of “undefined behaviour” is somewhat speculative. I’ve been relying on the &lt;a href=&quot;https://wiki.nesdev.com/w/index.php/PPU&quot;&gt;NesDev Wiki&lt;/a&gt; for a specification of how the graphics hardware behaves. The PPU is controlled by writing to memory-mapped registers. Using these registers for their (seemingly!) intended purposes, the following effect should not be possible:&lt;/p&gt;
&lt;div class=&quot;nes-screenshot&quot;&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/example.gif&quot; alt=&quot;example&quot;/&gt;&lt;/div&gt;
&lt;p&gt;When scrolling the screen vertically, the entire screen has to scroll together. The above video is an example of Partial Vertical Scrolling. Part of the screen remains stationary (the Heads Up Display) while another part (the game area) scrolls vertically. Partial vertical scrolling, can’t be done by interacting with the PPU in the “normal” way.&lt;/p&gt;
&lt;p&gt;Partial &lt;em&gt;horizontal&lt;/em&gt; scrolling, on the other hand, is completely well-defined.&lt;/p&gt;
&lt;div class=&quot;nes-screenshot&quot;&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/horizontal-scrolling.gif&quot; alt=&quot;horizontal-scrolling&quot;/&gt;&lt;/div&gt;
&lt;p&gt;Writing to a particular PPU register while a frame is being drawn can result in graphical artefacts. The Legend of Zelda intentionally causes an artefact which manifests itself as partial vertical scrolling. This post gives some background on NES graphics hardware, and explains how the partial vertical scrolling trick works.&lt;/p&gt;
&lt;h2 id=&quot;types-of-graphics&quot;&gt;Types of Graphics&lt;/h2&gt;
&lt;p&gt;The NES has 2 types of graphics:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;sprites, which are tiles that can be placed at arbitrary positions on the screen and independently move around&lt;/li&gt;
&lt;li&gt;the background, which is a grid of tiles that can be scrolled smoothly as a single image&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;To highlight the difference, here’s a scene made up of sprites and background:&lt;/p&gt;
&lt;div class=&quot;nes-screenshot&quot;&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/sprites-and-background.gif&quot; alt=&quot;sprites-and-background&quot;/&gt;&lt;/div&gt;
&lt;p&gt;Here’s the same scene with only the sprites visible:&lt;/p&gt;
&lt;div class=&quot;nes-screenshot&quot;&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/only-sprites.gif&quot; alt=&quot;only-sprites&quot;/&gt;&lt;/div&gt;
&lt;p&gt;And here’s the scene with only the background visible:&lt;/p&gt;
&lt;div class=&quot;nes-screenshot&quot;&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/only-background.gif&quot; alt=&quot;only-background&quot;/&gt;&lt;/div&gt;

&lt;p&gt;The NES Picture Processor supports scrolling background graphics. In video memory, the background graphics are stored as a 2D grid of tiles, covering an area twice the width and twice the height of the screen. The screen displays a screen-sized window into this grid, and the position of the window can be finely controlled. Gradually moving the visible window within the grid produces a smooth scrolling effect.&lt;/p&gt;
&lt;p&gt;The video output from the NES is 256x240 pixels. The in-memory tile grid represents a 512x480 pixel area, and is broken up into 4 screen-sized quadrants called “name tables”. Games can configure the Picture Processing Unit (PPU), to specify the position of the visible screen-sized window by selecting a pixel coordinate within the grid of name tables.&lt;/p&gt;
&lt;p&gt;Choosing the coordinate (0, 0) will display the entire top-left name table:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/0,0.png&quot; alt=&quot;0,0&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Scrolling to (125, 181) shows a bit of each name table:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/125,181.png&quot; alt=&quot;125,181&quot;/&gt;&lt;/p&gt;
&lt;p&gt;The visible window wraps around to the far side of the in-memory tile grid. Scrolling to (342, 290) will place the top-left corner of the visible screen inside the bottom-right name table, and parts of each name table will be visible due to wrapping:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/342,290.png&quot; alt=&quot;342,290&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;not-enough-memory&quot;&gt;Not Enough Memory!&lt;/h3&gt;
&lt;p&gt;Each name table is 1kb in size, but the NES only dedicates 2kb of its video memory to name tables, so only 2 name tables can fit in memory.&lt;/p&gt;
&lt;p&gt;How can there be 4 name tables?&lt;/p&gt;
&lt;h4 id=&quot;name-table-mirroring&quot;&gt;Name Table Mirroring&lt;/h4&gt;
&lt;p&gt;Video memory is connected to the PPU in such a way that when the PPU renders a tile from one of the 4 apparent name tables, one of the 2 real name tables is selected, and read from instead. This effectively means that the 4 apparent name tables are made up of 2 identical pairs of name tables.&lt;/p&gt;
&lt;p&gt;This image shows a snapshot of the contents of all 4 name tables. The top-left and top-right are identical, as are the bottom-left and bottom-right.&lt;/p&gt;
&lt;div class=&quot;nes-screenshot&quot;&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/name-table-mirroring.png&quot; alt=&quot;name-table-mirroring&quot;/&gt;&lt;/div&gt;
&lt;p&gt;Why not just have 2 name tables then?&lt;/p&gt;
&lt;p&gt;Fortunately, the precise mapping between apparent name table and real name table can be configured at runtime. If a game wants to scroll horizontally, it will configure graphics hardware such that the top-left and top-right name tables are different, so it can scroll between them without any visible duplication. In this configuration, the top-left and bottom-left name tables will refer to the same real name table, and likewise the top-right and bottom-right. This configuration is named “Vertical Mirroring”.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/vertical-mirroring.png&quot; alt=&quot;vertical-mirroring&quot;/&gt;&lt;/p&gt;
&lt;p&gt;The other possible configuration is “Horizontal Mirroring”, which games use when they want to scroll vertically.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/horizontal-mirroring.png&quot; alt=&quot;horizontal-mirroring&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Games usually don’t scroll diagonally, as it produces artifacts around the edge of the screen due to name table mirroring.&lt;/p&gt;
&lt;h3 id=&quot;cartridges&quot;&gt;Cartridges&lt;/h3&gt;
&lt;p&gt;Each game’s cartridge contains hardware which allows name table mirroring to be configured.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/cart.jpg&quot; alt=&quot;cart&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Some games don’t ever need to change mirroring, so their cartridges are hardwired to either horizontal or vertical mirroring. Other games need to dynamically switch between the two modes, so their cartridge can be configured by software to mirror horizontally or vertically. The Legend of Zelda falls into this category. Finally, some really fancy games come with extra video memory in the cartridge, which means they don’t need to mirror at all, and can scroll horizontally and vertically at the same time without any visible duplication.&lt;/p&gt;
&lt;h3 id=&quot;a-real-example&quot;&gt;A real example&lt;/h3&gt;
&lt;p&gt;On the left is an example of vertical scrolling as it would appear on the screen. On the right is a recording of the name tables, with horizontal mirroring, and the currently-visible window highlighted.&lt;/p&gt;
&lt;div class=&quot;nes-screenshot&quot;&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/scroll-demo.gif&quot; alt=&quot;scroll-demo&quot;/&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/scroll-demo-name-table.gif&quot; alt=&quot;scroll-demo-name-table&quot;/&gt;&lt;/div&gt;
&lt;p&gt;Remember, vertical scrolling itself isn’t unusual at all - just &lt;em&gt;split screen&lt;/em&gt; vertical scrolling.&lt;/p&gt;
&lt;h2 id=&quot;screen-splitting&quot;&gt;Screen Splitting&lt;/h2&gt;
&lt;p&gt;Each frame of video produced by the NES is drawn from top to bottom, one row of pixels at a time. Within each row, pixels are drawn one at a time, left to right. Mid way through drawing a frame, the game can reconfigure the PPU, which effects how the yet-to-be drawn pixels will be displayed. One common mid-frame change is to update the horizontal scroll position.&lt;/p&gt;
&lt;div class=&quot;nes-screenshot&quot;&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/horizontal-scroll-demo.gif&quot; alt=&quot;horizontal-scroll-demo&quot;/&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/horizontal-scroll-demo-name-table.gif&quot; alt=&quot;horizontal-scroll-demo-name-table&quot;/&gt;&lt;/div&gt;
&lt;p&gt;When scrolling horizontally between rooms, The Legend of Zelda always starts with scroll set to (0, 0), and renders the heads up display at the top of the screen. After the final row of pixels of the heads up display has been drawn to the screen, the horizontal scroll is changed by a value which increases slightly each frame, causing the camera to pan smoothly.&lt;/p&gt;
&lt;p&gt;The name table view shows how the game is changing from horizontal mirroring to vertical mirroring before it starts scrolling, then back to horizontal mirroring once the transition is complete. Also, while the scroll is in progress, the top-left (and bottom-left) name table is updated to contain a copy of the room being entered. Once the scroll is finished, the game stops splitting the screen, and renders entirely from the top-left name table again.&lt;/p&gt;
&lt;h3 id=&quot;measuring-draw-progress&quot;&gt;Measuring Draw Progress&lt;/h3&gt;
&lt;p&gt;In order to split the screen at the correct position, the game needs a way of finding out how much of the current frame has been drawn. Pixel rows are rendered at a known rate, so it’s possible to tell which row of pixels is currently being drawn by counting the number of CPU cycles that have passed since the start of the frame.&lt;/p&gt;
&lt;p&gt;There is another, more accurate technique, called “Sprite Zero Hit”.&lt;/p&gt;
&lt;p&gt;The NES can draw 64 sprites at a time. The first sprite in video memory is referred to as “Sprite Zero”. Each frame, the first time an opaque pixel of sprite zero overlaps with an opaque pixel of the background, an event called “Sprite Zero Hit” occurs. This has the effect of setting a bit in one of the memory-mapped PPU registers, which can be checked by the CPU.&lt;/p&gt;
&lt;p&gt;To use Sprite Zero Hit to split the screen, games place sprite zero at a vertical position near the boundary of the split, and during rendering, repeatedly check whether a Sprite Zero Hit has occurred. When Sprite Zero Hit occurs, the game changes the horizontal scroll to effect the split.&lt;/p&gt;
&lt;p&gt;This shows a horizontal room transition with and without the background.&lt;/p&gt;
&lt;div class=&quot;nes-screenshot&quot;&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/horizontal-scroll-demo-fast.gif&quot; alt=&quot;horizontal-scroll-demo-fast&quot;/&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/horizontal-scroll-demo-sprites.gif&quot; alt=&quot;horizontal-scroll-demo-sprites&quot;/&gt;&lt;/div&gt;
&lt;p&gt;The brown circle which appears at the start of the transition, and vanishes at the end, is sprite zero. Looking closer at the HUD with and without the background:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/hud.png&quot; alt=&quot;hud&quot;/&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/hud-sprites.png&quot; alt=&quot;hud-sprites&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Sprite zero is a discoloured bomb sprite, lined up exactly with the regular bomb sprite in the game’s HUD. Sprite zero is configured to appear behind the background, but since the black pixels in the HUD are considered transparent, the sprite zero bomb would be visible if it wasn’t strategically positioned behind the HUD bomb.&lt;/p&gt;
&lt;p&gt;Note that the sprite zero hit occurs several pixel rows before the bottom row of the HUD. It occurs at the top pixel of the fuse of the bomb, which is 16 pixels from the bottom of the HUD. When sprite zero hit happens, the game starts counting CPU cycles, and sets the horizontal scroll after a specific number of cycles have passed.&lt;/p&gt;
&lt;h2 id=&quot;vertical-blanking&quot;&gt;Vertical Blanking&lt;/h2&gt;
&lt;p&gt;The majority of the time, the NES PPU is drawing pixels to the screen. There is a brief period of “downtime” in between frames during which no drawing is taking place. This is known as the “Vertical Blank” or “vblank”. Some types of PPU configuration changes can only be made during vblank.&lt;/p&gt;

&lt;p&gt;Games change the scroll position by writing to a PPU register named &lt;code class=&quot;highlighter-rouge&quot;&gt;PPUSCROLL&lt;/code&gt;, which is mapped at address &lt;code class=&quot;highlighter-rouge&quot;&gt;0x2005&lt;/code&gt;. The first write to &lt;code class=&quot;highlighter-rouge&quot;&gt;PPUSCROLL&lt;/code&gt; sets the X component of the scroll position, and the second write sets the Y component. Writes continue to alternate in this fashion.&lt;/p&gt;
&lt;p&gt;This lists all the non-zero writes to &lt;code class=&quot;highlighter-rouge&quot;&gt;PPUSCROLL&lt;/code&gt; during this (slow motion) 16 frame recording of the story screen. The Y component of the scroll position is incremented once every 2 frames. All &lt;code class=&quot;highlighter-rouge&quot;&gt;PPUSCROLL&lt;/code&gt; writes occur during vblank in this example, which causes the entire background to scroll together.&lt;/p&gt;
&lt;div class=&quot;nes-screenshot&quot;&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/short-text-scroll.gif&quot; alt=&quot;short-text-scroll&quot;/&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/short-text-scroll-name-table.gif&quot; alt=&quot;short-text-scroll-name-table&quot;/&gt;&lt;/div&gt;
&lt;table class=&quot;short-table&quot;&gt;&lt;tr&gt;&lt;th&gt;Frame&lt;/th&gt;
&lt;th&gt;Sub-Frame&lt;/th&gt;
&lt;th&gt;Component&lt;/th&gt;
&lt;th&gt;Value&lt;/th&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;VBlank&lt;/td&gt;
&lt;td&gt;Y&lt;/td&gt;
&lt;td&gt;110&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;VBlank&lt;/td&gt;
&lt;td&gt;Y&lt;/td&gt;
&lt;td&gt;110&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;VBlank&lt;/td&gt;
&lt;td&gt;Y&lt;/td&gt;
&lt;td&gt;111&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;VBlank&lt;/td&gt;
&lt;td&gt;Y&lt;/td&gt;
&lt;td&gt;111&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;VBlank&lt;/td&gt;
&lt;td&gt;Y&lt;/td&gt;
&lt;td&gt;112&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;VBlank&lt;/td&gt;
&lt;td&gt;Y&lt;/td&gt;
&lt;td&gt;112&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;6&lt;/td&gt;
&lt;td&gt;VBlank&lt;/td&gt;
&lt;td&gt;Y&lt;/td&gt;
&lt;td&gt;113&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;7&lt;/td&gt;
&lt;td&gt;VBlank&lt;/td&gt;
&lt;td&gt;Y&lt;/td&gt;
&lt;td&gt;113&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;8&lt;/td&gt;
&lt;td&gt;VBlank&lt;/td&gt;
&lt;td&gt;Y&lt;/td&gt;
&lt;td&gt;114&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;9&lt;/td&gt;
&lt;td&gt;VBlank&lt;/td&gt;
&lt;td&gt;Y&lt;/td&gt;
&lt;td&gt;114&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;10&lt;/td&gt;
&lt;td&gt;VBlank&lt;/td&gt;
&lt;td&gt;Y&lt;/td&gt;
&lt;td&gt;115&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;11&lt;/td&gt;
&lt;td&gt;VBlank&lt;/td&gt;
&lt;td&gt;Y&lt;/td&gt;
&lt;td&gt;115&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;12&lt;/td&gt;
&lt;td&gt;VBlank&lt;/td&gt;
&lt;td&gt;Y&lt;/td&gt;
&lt;td&gt;116&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;13&lt;/td&gt;
&lt;td&gt;VBlank&lt;/td&gt;
&lt;td&gt;Y&lt;/td&gt;
&lt;td&gt;116&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;14&lt;/td&gt;
&lt;td&gt;VBlank&lt;/td&gt;
&lt;td&gt;Y&lt;/td&gt;
&lt;td&gt;117&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;15&lt;/td&gt;
&lt;td&gt;VBlank&lt;/td&gt;
&lt;td&gt;Y&lt;/td&gt;
&lt;td&gt;117&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;h3 id=&quot;split-screen-scrolling&quot;&gt;Split Screen Scrolling&lt;/h3&gt;
&lt;p&gt;Writes to &lt;code class=&quot;highlighter-rouge&quot;&gt;PPUSCROLL&lt;/code&gt; during vblank take effect at the beginning of frame drawn immediately after the vblank. If the scroll position is changed while a frame is being drawn (ie. outside of vblank), it takes effect when drawing reaches the next row of pixels. Partial horizontal scrolling works by writing to &lt;code class=&quot;highlighter-rouge&quot;&gt;PPUSCROLL&lt;/code&gt; while the PPU is drawing the last line of pixels before the scroll should happen.&lt;/p&gt;
&lt;div class=&quot;nes-screenshot&quot;&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/short-horizontal-scroll.gif&quot; alt=&quot;short-horizontal-scroll&quot;/&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/short-horizontal-scroll-name-table.gif&quot; alt=&quot;short-horizontal-scroll-name-table&quot;/&gt;&lt;/div&gt;
&lt;table class=&quot;short-table&quot;&gt;&lt;tr&gt;&lt;th&gt;Frame&lt;/th&gt;
&lt;th&gt;Sub-Frame&lt;/th&gt;
&lt;th&gt;Component&lt;/th&gt;
&lt;th&gt;Value&lt;/th&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;X&lt;/td&gt;
&lt;td&gt;72&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;X&lt;/td&gt;
&lt;td&gt;76&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;X&lt;/td&gt;
&lt;td&gt;80&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;X&lt;/td&gt;
&lt;td&gt;84&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;X&lt;/td&gt;
&lt;td&gt;88&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;X&lt;/td&gt;
&lt;td&gt;92&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;6&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;X&lt;/td&gt;
&lt;td&gt;96&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;7&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;X&lt;/td&gt;
&lt;td&gt;100&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;8&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;X&lt;/td&gt;
&lt;td&gt;104&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;9&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;X&lt;/td&gt;
&lt;td&gt;108&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;10&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;X&lt;/td&gt;
&lt;td&gt;112&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;11&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;X&lt;/td&gt;
&lt;td&gt;116&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;12&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;X&lt;/td&gt;
&lt;td&gt;120&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;13&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;X&lt;/td&gt;
&lt;td&gt;124&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;14&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;X&lt;/td&gt;
&lt;td&gt;128&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;15&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;X&lt;/td&gt;
&lt;td&gt;132&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;When the scroll position is updated mid-frame, only the X component of the scroll position is applied. That is, the Y component of scroll positions set mid-frame are ignored. Thus, if a game wants to split the screen, and change the scroll position of part of the frame, it may only scroll horizontally.&lt;/p&gt;
&lt;p&gt;And yet:&lt;/p&gt;
&lt;div class=&quot;nes-screenshot&quot;&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/short-vertical-scroll.gif&quot; alt=&quot;short-vertical-scroll&quot;/&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/short-vertical-scroll-name-table.gif&quot; alt=&quot;short-vertical-scroll-name-table&quot;/&gt;&lt;/div&gt;
&lt;p&gt;Believe it or not, the &lt;code class=&quot;highlighter-rouge&quot;&gt;PPUSCROLL&lt;/code&gt; register is not changed during this transition.&lt;/p&gt;
&lt;p&gt;You may notice a 1-pixel high graphical artefact just below the HUD. This is a bug in my emulator caused by not synchronising CPU clock cycles with per-pixel rendering.&lt;/p&gt;
&lt;h3 id=&quot;interference-with-other-registers&quot;&gt;Interference with Other Registers&lt;/h3&gt;
&lt;p&gt;A second register, named &lt;code class=&quot;highlighter-rouge&quot;&gt;PPUADDR&lt;/code&gt;, mapped to &lt;code class=&quot;highlighter-rouge&quot;&gt;0x2006&lt;/code&gt;, is used to set the current video memory address. When the game wants to change, for example, one of the tiles in a name table, it first writes the video memory address of the tile to &lt;code class=&quot;highlighter-rouge&quot;&gt;PPUADDR&lt;/code&gt;, then writes the new value of the tile to &lt;code class=&quot;highlighter-rouge&quot;&gt;PPUDATA&lt;/code&gt; - a third register mapped to &lt;code class=&quot;highlighter-rouge&quot;&gt;0x2007&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Writing to &lt;code class=&quot;highlighter-rouge&quot;&gt;PPUADDR&lt;/code&gt; outside of vblank (ie. while the frame is drawing) can cause graphical artefacts. This is because the PPU circuitry affected by writing &lt;code class=&quot;highlighter-rouge&quot;&gt;PPUADDR&lt;/code&gt; is also manipulated directly by the PPU as it retrieves tiles from video memory for the purposes of drawing them. As drawing proceeds from the top to the bottom of the screen, and left to right within each pixel row, the PPU effectively sets &lt;code class=&quot;highlighter-rouge&quot;&gt;PPUADDR&lt;/code&gt; to the address of the tile containing the pixel currently being drawn. When drawing moves from one tile to another, the &lt;code class=&quot;highlighter-rouge&quot;&gt;PPUADDR&lt;/code&gt; is changed by incrementing its current value.&lt;/p&gt;
&lt;p&gt;Thus writing to &lt;code class=&quot;highlighter-rouge&quot;&gt;PPUADDR&lt;/code&gt; mid-frame can alter the tiles which the PPU would fetch from memory for the duration of the current frame.&lt;/p&gt;
&lt;p&gt;Let’s log writes to &lt;code class=&quot;highlighter-rouge&quot;&gt;PPUADDR&lt;/code&gt; during the vertical transition. Since the name table is also being updated during the transition, logging &lt;em&gt;all&lt;/em&gt; writes to &lt;code class=&quot;highlighter-rouge&quot;&gt;PPUADDR&lt;/code&gt; would be noisy. In the horizontal transition, the scroll was set while drawing pixel row 63, so we’ll just look at &lt;code class=&quot;highlighter-rouge&quot;&gt;PPUADDR&lt;/code&gt; writes during this row.&lt;/p&gt;
&lt;div class=&quot;nes-screenshot&quot;&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/short-vertical-scroll.gif&quot; alt=&quot;short-vertical-scroll&quot;/&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/short-vertical-scroll-name-table.gif&quot; alt=&quot;short-vertical-scroll-name-table&quot;/&gt;&lt;/div&gt;
&lt;table class=&quot;short-table&quot;&gt;&lt;tr&gt;&lt;th&gt;Frame&lt;/th&gt;
&lt;th&gt;Sub-Frame&lt;/th&gt;
&lt;th&gt;Address&lt;/th&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;0x2280&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;0x2280&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;0x2260&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;0x2260&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;4&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;0x2240&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;5&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;0x2240&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;6&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;0x2220&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;7&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;0x2220&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;8&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;0x2200&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;9&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;0x2200&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;10&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;0x21E0&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;11&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;0x21E0&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;12&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;0x21C0&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;13&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;0x21C0&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;14&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;0x21A0&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;15&lt;/td&gt;
&lt;td&gt;Pixel Row 63&lt;/td&gt;
&lt;td&gt;0x21A0&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;There’s a clear pattern. Every 2 frames, the address written on pixel row 63 is decreased by 32 (0x20). But how does this translate into updating the effective scroll position?&lt;/p&gt;
&lt;h3 id=&quot;the-real-scroll-register&quot;&gt;The &lt;em&gt;Real&lt;/em&gt; Scroll Register&lt;/h3&gt;
&lt;p&gt;Internal to the PPU, and not mapped into the CPU’s memory, is a 15 bit register which is used as both the current video memory address to access, and background scroll configuration.&lt;/p&gt;
&lt;p&gt;When treating this value as an address, bit 14 is ignored, and bits 0-13 are treated as an address in video memory.&lt;/p&gt;
&lt;p&gt;When treating the register as scroll configuration, different parts of its contents have different meanings, according to this table.&lt;/p&gt;
&lt;table class=&quot;black-text-table&quot;&gt;&lt;tr&gt;&lt;th&gt;Bit&lt;/th&gt;
&lt;td class=&quot;bg-red&quot;&gt;14&lt;/td&gt;
&lt;td class=&quot;bg-red&quot;&gt;13&lt;/td&gt;
&lt;td class=&quot;bg-red&quot;&gt;12&lt;/td&gt;
&lt;td class=&quot;bg-yellow&quot;&gt;11&lt;/td&gt;
&lt;td class=&quot;bg-yellow&quot;&gt;10&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;9&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;8&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;7&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;6&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;5&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;4&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;3&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;2&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;1&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;Meaning&lt;/th&gt;
&lt;td colspan=&quot;3&quot; class=&quot;bg-red&quot;&gt;Fine Y Scroll&lt;/td&gt;
&lt;td colspan=&quot;2&quot; class=&quot;bg-yellow&quot;&gt;Name Table Select&lt;/td&gt;
&lt;td colspan=&quot;5&quot; class=&quot;bg-green&quot;&gt;Coarse Y Scroll&lt;/td&gt;
&lt;td colspan=&quot;5&quot; class=&quot;bg-blue&quot;&gt;Coarse X Scroll&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;&lt;span class=&quot;bg-yellow&quot;&gt;&lt;strong&gt;Name Table Select&lt;/strong&gt;&lt;/span&gt; is a value from 0 to 3, and selects the name table currently being drawn from.&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;bg-blue&quot;&gt;&lt;strong&gt;Coarse X Scroll&lt;/strong&gt;&lt;/span&gt; and &lt;span class=&quot;bg-green&quot;&gt;&lt;strong&gt;Coarse Y Scroll&lt;/strong&gt;&lt;/span&gt; give the coordinate of a tile within the selected name table. This is the tile currently being drawn.&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;bg-red&quot;&gt;&lt;strong&gt;Fine Y Scroll&lt;/strong&gt;&lt;/span&gt; contains a value from 0 to 7, and specifies the current vertical offset of the row of pixels within the current tile. Tiles are 8 pixels square.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Fine X Scroll&lt;/strong&gt; is absent from this register. There is a separate register which just contains the horizontal offset of the current pixel, but it won’t be relevant for explaining how The Legend of Zelda performs vertical scrolling.&lt;/p&gt;
&lt;p&gt;What happens to this register when the game writes &lt;code class=&quot;highlighter-rouge&quot;&gt;PPUADDR&lt;/code&gt;? Here are the first 3 writes from the demo above.&lt;/p&gt;
&lt;table class=&quot;black-text-table&quot;&gt;&lt;tr&gt;&lt;th&gt;Bit&lt;/th&gt;
&lt;td class=&quot;bg-red&quot;&gt;14&lt;/td&gt;
&lt;td class=&quot;bg-red&quot;&gt;13&lt;/td&gt;
&lt;td class=&quot;bg-red&quot;&gt;12&lt;/td&gt;
&lt;td class=&quot;bg-yellow&quot;&gt;11&lt;/td&gt;
&lt;td class=&quot;bg-yellow&quot;&gt;10&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;9&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;8&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;7&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;6&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;5&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;4&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;3&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;2&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;1&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;Meaning&lt;/th&gt;
&lt;td colspan=&quot;3&quot; class=&quot;bg-red&quot;&gt;Fine Y Scroll&lt;/td&gt;
&lt;td colspan=&quot;2&quot; class=&quot;bg-yellow&quot;&gt;Name Table Select&lt;/td&gt;
&lt;td colspan=&quot;5&quot; class=&quot;bg-green&quot;&gt;Coarse Y Scroll&lt;/td&gt;
&lt;td colspan=&quot;5&quot; class=&quot;bg-blue&quot;&gt;Coarse X Scroll&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;&lt;span&gt;0x2280&lt;/span&gt; Bits&lt;/th&gt;
&lt;td class=&quot;bg-red&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-red&quot;&gt;1&lt;/td&gt;
&lt;td class=&quot;bg-red&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-yellow&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-yellow&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;1&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;1&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;&lt;span&gt;0x2280&lt;/span&gt; Parts&lt;/th&gt;
&lt;td colspan=&quot;3&quot; class=&quot;bg-red&quot;&gt;2&lt;/td&gt;
&lt;td colspan=&quot;2&quot; class=&quot;bg-yellow&quot;&gt;0&lt;/td&gt;
&lt;td colspan=&quot;5&quot; class=&quot;bg-green&quot;&gt;20&lt;/td&gt;
&lt;td colspan=&quot;5&quot; class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;&lt;span&gt;0x2260&lt;/span&gt; Bits&lt;/th&gt;
&lt;td class=&quot;bg-red&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-red&quot;&gt;1&lt;/td&gt;
&lt;td class=&quot;bg-red&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-yellow&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-yellow&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;1&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;1&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;1&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;&lt;span&gt;0x2260&lt;/span&gt; Parts&lt;/th&gt;
&lt;td colspan=&quot;3&quot; class=&quot;bg-red&quot;&gt;2&lt;/td&gt;
&lt;td colspan=&quot;2&quot; class=&quot;bg-yellow&quot;&gt;0&lt;/td&gt;
&lt;td colspan=&quot;5&quot; class=&quot;bg-green&quot;&gt;19&lt;/td&gt;
&lt;td colspan=&quot;5&quot; class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;&lt;span&gt;0x2240&lt;/span&gt; Bits&lt;/th&gt;
&lt;td class=&quot;bg-red&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-red&quot;&gt;1&lt;/td&gt;
&lt;td class=&quot;bg-red&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-yellow&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-yellow&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;1&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;1&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;&lt;span&gt;0x2240&lt;/span&gt; Parts&lt;/th&gt;
&lt;td colspan=&quot;3&quot; class=&quot;bg-red&quot;&gt;2&lt;/td&gt;
&lt;td colspan=&quot;2&quot; class=&quot;bg-yellow&quot;&gt;0&lt;/td&gt;
&lt;td colspan=&quot;5&quot; class=&quot;bg-green&quot;&gt;18&lt;/td&gt;
&lt;td colspan=&quot;5&quot; class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Breaking the address writes into their scroll components, it’s clear what’s going on here. Every 2 frames, the &lt;span class=&quot;bg-green&quot;&gt;&lt;strong&gt;Coarse Y Scroll&lt;/strong&gt;&lt;/span&gt; is decremented, effecting a vertical scroll of 1 tile or 8 pixels.&lt;/p&gt;
&lt;p&gt;The initial scroll is 0,0 during each frame of the vertical transition, and then the address is written on pixel row 63. This means the first 63 rows of pixels are drawn from the top of the selected name table, which contains the HUD background. The 64th pixel row and onwards however, are drawn with the vertical scroll applied from this address. As that vertical scroll is decremented every second frame, this gives the impression of vertical scrolling of part of the screen.&lt;/p&gt;
&lt;h3 id=&quot;scroll-down-to-scroll-up&quot;&gt;Scroll Down to Scroll Up&lt;/h3&gt;
&lt;p&gt;The Legend of Zelda can’t completely hide this trick from players. It produces a visible artefact on vertical screen transitions which you can see if you look closely. When moving up between rooms, the first frame of the scroll animation scrolls down instead. Here’s the animation in extreme slow motion.&lt;/p&gt;
&lt;div class=&quot;nes-screenshot&quot;&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/brief-scroll-down.gif&quot; alt=&quot;brief-scroll-down&quot;/&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/brief-scroll-down-name-table.gif&quot; alt=&quot;brief-scroll-down-name-table&quot;/&gt;&lt;/div&gt;
&lt;p&gt;The name table view shows what’s going on. While to players it may look like the visible area is smoothly scrolling up, the scroll transition begins by moving the visible area from the top-left name table to the bottom-left name table, which contains a copy of the room background. This is necessary, as the HUD at the top of the screen is also part of the name table, so if the visible area was to scroll up from its original position, it would scroll past the HUD.&lt;/p&gt;
&lt;p&gt;The vertical scrolling is implemented by writing to the &lt;code class=&quot;highlighter-rouge&quot;&gt;PPUADDR&lt;/code&gt; register mid-frame, and the very first value written is &lt;code class=&quot;highlighter-rouge&quot;&gt;0x2800&lt;/code&gt;. 2 frames later, &lt;code class=&quot;highlighter-rouge&quot;&gt;0x23A0&lt;/code&gt; is written, and then starts decrementing the value by 32 every other frame.&lt;/p&gt;
&lt;table class=&quot;black-text-table&quot;&gt;&lt;tr&gt;&lt;th&gt;Bit&lt;/th&gt;
&lt;td class=&quot;bg-red&quot;&gt;14&lt;/td&gt;
&lt;td class=&quot;bg-red&quot;&gt;13&lt;/td&gt;
&lt;td class=&quot;bg-red&quot;&gt;12&lt;/td&gt;
&lt;td class=&quot;bg-yellow&quot;&gt;11&lt;/td&gt;
&lt;td class=&quot;bg-yellow&quot;&gt;10&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;9&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;8&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;7&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;6&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;5&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;4&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;3&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;2&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;1&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;Meaning&lt;/th&gt;
&lt;td colspan=&quot;3&quot; class=&quot;bg-red&quot;&gt;Fine Y Scroll&lt;/td&gt;
&lt;td colspan=&quot;2&quot; class=&quot;bg-yellow&quot;&gt;Name Table Select&lt;/td&gt;
&lt;td colspan=&quot;5&quot; class=&quot;bg-green&quot;&gt;Coarse Y Scroll&lt;/td&gt;
&lt;td colspan=&quot;5&quot; class=&quot;bg-blue&quot;&gt;Coarse X Scroll&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;&lt;span&gt;0x2800&lt;/span&gt; Bits&lt;/th&gt;
&lt;td class=&quot;bg-red&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-red&quot;&gt;1&lt;/td&gt;
&lt;td class=&quot;bg-red&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-yellow&quot;&gt;1&lt;/td&gt;
&lt;td class=&quot;bg-yellow&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;&lt;span&gt;0x2800&lt;/span&gt; Parts&lt;/th&gt;
&lt;td colspan=&quot;3&quot; class=&quot;bg-red&quot;&gt;2&lt;/td&gt;
&lt;td colspan=&quot;2&quot; class=&quot;bg-yellow&quot;&gt;2&lt;/td&gt;
&lt;td colspan=&quot;5&quot; class=&quot;bg-green&quot;&gt;0&lt;/td&gt;
&lt;td colspan=&quot;5&quot; class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;&lt;span&gt;0x23A0&lt;/span&gt; Bits&lt;/th&gt;
&lt;td class=&quot;bg-red&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-red&quot;&gt;1&lt;/td&gt;
&lt;td class=&quot;bg-red&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-yellow&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-yellow&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;1&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;1&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;1&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-green&quot;&gt;1&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;td class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;th&gt;&lt;span&gt;0x23A0&lt;/span&gt; Parts&lt;/th&gt;
&lt;td colspan=&quot;3&quot; class=&quot;bg-red&quot;&gt;2&lt;/td&gt;
&lt;td colspan=&quot;2&quot; class=&quot;bg-yellow&quot;&gt;0&lt;/td&gt;
&lt;td colspan=&quot;5&quot; class=&quot;bg-green&quot;&gt;29&lt;/td&gt;
&lt;td colspan=&quot;5&quot; class=&quot;bg-blue&quot;&gt;0&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;p&gt;Writing &lt;code class=&quot;highlighter-rouge&quot;&gt;0x2800&lt;/code&gt; to &lt;code class=&quot;highlighter-rouge&quot;&gt;PPUADDR&lt;/code&gt; sets the &lt;span class=&quot;bg-yellow&quot;&gt;&lt;strong&gt;Name Table Select&lt;/strong&gt;&lt;/span&gt; to 2, which will render out of the bottom-left name table. Since both scroll values are 0, it will start with the top-left tile of this name table. However, the &lt;span class=&quot;bg-red&quot;&gt;&lt;strong&gt;Fine Y Scroll&lt;/strong&gt;&lt;/span&gt; is 2, so there is a 2-pixel vertical offset from the top of the bottom-left name table, which is why on the very first frame of the transition, you see a 2-pixel high black bar at the bottom of the screen. The initial scroll setting for the transition animation is 2-pixels below where it would need to be for the transition to be seamless.&lt;/p&gt;
&lt;p&gt;2 frames later, &lt;code class=&quot;highlighter-rouge&quot;&gt;0x23A0&lt;/code&gt; is written to &lt;code class=&quot;highlighter-rouge&quot;&gt;PPUADDR&lt;/code&gt;. This brings us back to the top-left name table, and we’re rendering from the 29th row of tiles, which is the very bottom row. Still, the &lt;span class=&quot;bg-red&quot;&gt;&lt;strong&gt;Fine Y Scroll&lt;/strong&gt;&lt;/span&gt; contains a 2.&lt;/p&gt;
&lt;p&gt;Why is it necessary to set the &lt;span class=&quot;bg-red&quot;&gt;&lt;strong&gt;Fine Y Scroll&lt;/strong&gt;&lt;/span&gt; to 2? Why couldn’t the game just write &lt;code class=&quot;highlighter-rouge&quot;&gt;0x0800&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;0x03A0&lt;/code&gt; and not have to suffer the 2-pixel offset?&lt;/p&gt;
&lt;p&gt;The 4 name tables occupy a 4kb region of the PPU’s address space from &lt;code class=&quot;highlighter-rouge&quot;&gt;0x2000&lt;/code&gt; to &lt;code class=&quot;highlighter-rouge&quot;&gt;0x2FFF&lt;/code&gt;. Each tile in a name table occupies a single byte of video memory (they’re really just indices into another table), and the order of tiles and name tables in video memory is such that the &lt;span class=&quot;bg-yellow&quot;&gt;&lt;strong&gt;Name Table Select&lt;/strong&gt;&lt;/span&gt;, &lt;span class=&quot;bg-green&quot;&gt;&lt;strong&gt;Coarse Y Scroll&lt;/strong&gt;&lt;/span&gt; and &lt;span class=&quot;bg-blue&quot;&gt;&lt;strong&gt;Coarse X Scroll&lt;/strong&gt;&lt;/span&gt; comprise the offset of a tile within the name table region of memory. That is, taking the low 12 bits of the internal PPU register, and adding it to &lt;code class=&quot;highlighter-rouge&quot;&gt;0x2000&lt;/code&gt;, you can find the video memory address of a tile. This is no coincidence! This is precisely what allows this register to be treated as both an address register, and a scroll register.&lt;/p&gt;
&lt;p&gt;With one caveat.&lt;/p&gt;
&lt;p&gt;When treating it as an address register, bits 12 and 13 are treated as part of the address. During rendering, the PPU is constantly updating this register with the address of the tile it’s currently drawing. As tiles located in name tables, and name tables are in the region of memory from &lt;code class=&quot;highlighter-rouge&quot;&gt;0x2000&lt;/code&gt; to &lt;code class=&quot;highlighter-rouge&quot;&gt;0x2FFF&lt;/code&gt;, the PPU will be setting the register to values within this range.&lt;/p&gt;
&lt;p&gt;When a game writes to &lt;code class=&quot;highlighter-rouge&quot;&gt;PPUADDR&lt;/code&gt; mid frame, if it doesn’t write the address of a tile in a name table, the PPU will attempt to read from &lt;em&gt;somewhere else&lt;/em&gt; in video memory. Whatever bytes it happens to read will be treated as tiles, which will likely lead to undesirable outcomes. So every mid-frame write to &lt;code class=&quot;highlighter-rouge&quot;&gt;PPUADDR&lt;/code&gt; must lie between &lt;code class=&quot;highlighter-rouge&quot;&gt;0x2000&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;0x2FFF&lt;/code&gt;. Taking every number in that range, and considering its scroll components, the value of &lt;span class=&quot;bg-red&quot;&gt;&lt;strong&gt;Fine Y Scroll&lt;/strong&gt;&lt;/span&gt; will always be 2.&lt;/p&gt;
&lt;p&gt;This limitation means that you can’t change the &lt;span class=&quot;bg-red&quot;&gt;&lt;strong&gt;Fine Y Scroll&lt;/strong&gt;&lt;/span&gt; mid-frame, which means that when using this trick to implement split-screen vertical scrolling, you’re constrained to scroll 8 pixels at a time, and always with a 2-pixel vertical offset from a tile boundary. The Legend of Zelda scrolls 4 pixels per frame when scrolling horizontally, but scrolls 8 pixels every 2 frames when scrolling vertically, and this explains why.&lt;/p&gt;
&lt;p&gt;The artefact is also visible when scrolling down between rooms, but it occurs at the end of the animation instead.&lt;/p&gt;
&lt;div class=&quot;nes-screenshot&quot;&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/both-scroll-vertical.gif&quot; alt=&quot;both-scroll-vertical&quot;/&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/both-scroll-vertical-name-table.gif&quot; alt=&quot;both-scroll-vertical-name-table&quot;/&gt;&lt;/div&gt;
&lt;h2 id=&quot;further-reading&quot;&gt;Further Reading&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;The &lt;a href=&quot;https://wiki.nesdev.com/&quot;&gt;NesDev Wiki&lt;/a&gt; is an invaluable resource for learning about NES hardware. Specifically relevant to this post are the pages about &lt;a href=&quot;https://wiki.nesdev.com/w/index.php/PPU_scrolling&quot;&gt;PPU Scrolling&lt;/a&gt; and &lt;a href=&quot;https://wiki.nesdev.com/w/index.php/PPU_registers&quot;&gt;PPU Registers&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;My still very much incomplete NES emulator is &lt;a href=&quot;https://github.com/stevebob/mos6502&quot;&gt;here&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;notes&quot;&gt;Notes&lt;/h2&gt;
&lt;p&gt;Before I learnt about the internal PPU register, my emulator would display a wipe effect on vertical screen transitions in The Legend of Zelda.&lt;/p&gt;
&lt;div class=&quot;nes-screenshot&quot;&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/vertical-wipe.gif&quot; alt=&quot;vertical-wipe&quot;/&gt;&lt;img src=&quot;https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/vertical-wipe-name-table.gif&quot; alt=&quot;vertical-wipe-name-table&quot;/&gt;&lt;/div&gt;
&lt;p&gt;The Link sprite would slide down the screen as intended, but the background would not scroll. The wipe is caused by the game gradually updating the name table to contain the new room’s graphics, but not scrolling to keep the updates off-screen.&lt;/p&gt;
</description>
<pubDate>Wed, 17 Jul 2019 12:03:45 +0000</pubDate>
<dc:creator>Kaali</dc:creator>
<og:title>Zelda Screen Transitions are Undefined Behaviour</og:title>
<og:description>The vertical scrolling effect in the original “The Legend of Zelda” relies on manipulating the NES graphics hardware in a manor likely that was unintended by its designers. Since I don’t have access to any official documentation for the NES Picture Processing Unit (PPU - the graphics chip), my claim of “undefined behaviour” is somewhat speculative. I’ve been relying on the NesDev Wiki for a specification of how the graphics hardware behaves. The PPU is controlled by writing to memory-mapped registers. Using these registers for their (seemingly!) intended purposes, the following effect should not be possible:</og:description>
<og:url>https://gridbugs.org/zelda-screen-transitions-are-undefined-behaviour/</og:url>
<og:type>article</og:type>
<og:image>https://gridbugs.org/images/zelda-screen-transitions-are-undefined-behaviour/example.gif</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://gridbugs.org/zelda-screen-transitions-are-undefined-behaviour/</dc:identifier>
</item>
<item>
<title>Google Search is routinely gamed by private blog networks</title>
<link>https://unlikekinds.com/article/google-pbns</link>
<guid isPermaLink="true" >https://unlikekinds.com/article/google-pbns</guid>
<description>&lt;p&gt;Since its earliest days, the core of Google’s search algorithm - and its greatest innovation - has been ranking a page by the amount and quality of the links pointing to it.&lt;/p&gt;
&lt;p&gt;For almost as long, businesses have fought to climb to the lucrative top positions on search result pages, with some resorting to unethical methods which, if noticed, could see Google penalise their sites, or drop them entirely.&lt;/p&gt;
&lt;p&gt;Despite Google’s efforts, for many years businesses have been paying to have the internet flooded with hundreds of fake links to their sites which, if done correctly, can be impossible to detect.&lt;/p&gt;
&lt;h2 id=&quot;its-called-a-pbn-and-its-here-to-stay&quot;&gt;It’s called a PBN and it’s here to stay&lt;/h2&gt;
&lt;p&gt;A private blog network, or PBN, is a constellation of seemingly legitimate sites all linking to a page that a business with questionable ethics wants to promote. Businesses can set these up themselves, or they can choose from an increasingly sophisticated set of cheating-as-a-service providers, who’ll happily charge hundreds of dollars in return for setting up fake links.&lt;/p&gt;
&lt;p&gt;PBNs are pervasive. There are &lt;a href=&quot;https://www.google.com/search?q=blackhatworld+PBN+site:www.blackhatworld.com&quot; rel=&quot;nofollow noopener&quot; target=&quot;_blank&quot;&gt;forums&lt;/a&gt; dedicated to them with millions of views, businesses specialising in providing hosting &lt;a href=&quot;https://www.google.com/search?q=pbn+hosting&quot; rel=&quot;nofollow noopener&quot; target=&quot;_blank&quot;&gt;just for PBNs&lt;/a&gt;, and some offering to do the complete process: wire them money and they’ll point links from their networks to your site.&lt;/p&gt;
&lt;p&gt;Judging from the posts in black hat SEO forums, there are thousands of purchasers routinely receiving links in exchange for hundreds of dollars.&lt;/p&gt;
&lt;p&gt;A prominent marketplace for buying and selling money making websites, known for being a source of trustworthy, legitimate businesses, goes so far as to prominently &lt;a href=&quot;https://empireflippers.com/marketplace&quot; rel=&quot;nofollow noopener&quot; target=&quot;_blank&quot;&gt;display&lt;/a&gt; whether or not a business sale comes with a PBN included. Many do, and these businesses sell for figures in the tens of thousands.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/fMZ4ivO.jpg&quot; alt=&quot;The opportunity to easily and cheaply one-up the competition is hard for many businesses to pass up&quot; width=&quot;1096px&quot; height=&quot;630px&quot; title=&quot;The opportunity to easily and cheaply one-up the competition is hard for many businesses to pass up&quot;/&gt;The opportunity to easily and cheaply one-up the competition is hard for many businesses to pass up&lt;/p&gt;
&lt;h2 id=&quot;how-is-a-link-from-a-fake-blog-valuable&quot;&gt;How is a link from a fake blog valuable?&lt;/h2&gt;
&lt;p&gt;But what value is a link from a fake blog? Google determines the value of a link based on the reputation of the site, and that reputation is calculated by, as you might expect, the quality and amount of links it has coming in.&lt;/p&gt;
&lt;p&gt;It’s a bit like if links were rivers, and sites were lakes. The more water coming into a lake, the more it has to send out to others. The New York Times is a massive lake, with 714 million links (&lt;a href=&quot;https://ahrefs.com/backlink-checker&quot; rel=&quot;nofollow noopener&quot; target=&quot;_blank&quot;&gt;really&lt;/a&gt;) which bestows upon it the power to greatly enhance the profile of any site it links to, propelling the lucky recipient up the results page.&lt;/p&gt;
&lt;p&gt;One would assume a fake blog would be an empty basin, with a very unhealthy 0 links. But that’s not the case.&lt;/p&gt;
&lt;h2 id=&quot;how-to-fake-a-network&quot;&gt;How to fake a network&lt;/h2&gt;
&lt;p&gt;With advertising dollars fleeing the news sites for the greener pastures of Google and Facebook, media companies are dropping like flies. When a site goes out of business their domain name registration might lapse and become available again for purchase.&lt;/p&gt;
&lt;p&gt;These dropped domains, as they’re called, come with a very valuable commodity: their links. All an unscrupulous marketer has to do is snap it up and replace the content pages, then drop a link or two to the site they’re trying to promote. Dropped domains with lots of links are quickly bought just as soon as they drop, and dozens of sites have sprung up to help marketers snatch them.&lt;/p&gt;
&lt;p&gt;But what about the content? After all, apart from links, content is the other crucial ranking factor. Easy. You can pay someone to write a decent article for the price of a meal or two. Or you can use AI-infused tools to “spin” articles - a term used to refer to modifying someone else’s content enough that the search engines think it’s unique. They do this with varying levels of success, and some services offer to make manual tweaks to the automatically altered articles to improve their readability or uniqueness.&lt;/p&gt;
&lt;p&gt;Also, &lt;a href=&quot;https://ahrefs.com/blog/links-with-traffic-study/&quot; rel=&quot;nofollow noopener&quot; target=&quot;_blank&quot;&gt;there’s evidence&lt;/a&gt; that the amount of domains - not just the amount of links - to a page affects search rank. Meaning that even these low quality links help, just by virtue of coming from a variety of domains.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/fxxiPdu.jpg&quot; alt=&quot;Some of the PBN packages for sale, with huge amounts of views and replies&quot; width=&quot;1120px&quot; height=&quot;496px&quot; title=&quot;Some of the PBN packages for sale, with huge amounts of views and replies&quot;/&gt;Some of the PBN packages for sale, with huge amounts of views and replies&lt;/p&gt;
&lt;h2 id=&quot;massive-industry&quot;&gt;Massive industry&lt;/h2&gt;
&lt;p&gt;Businesses offering PBN services and their customers are commonplace. On a well known and very popular black-hat SEO forum, a post entitled “❇️ GROUND BREAKING PBN PACKAGE ❇️ AGED AUCTION DOMAINS❇️ HIGH PA/DA BLOGS ❇️ 50% OFF” has 4,000 replies and 490,000 views. That’s just one thread on one site, and there are hundreds, if not thousands, more.&lt;/p&gt;
&lt;p&gt;These aren’t just shoddy, poorly-written, obviously fake links being bought - after all, these people are in an arms race with all the Silicon Valley human and artificial intelligence of Google itself. This is a mature industry and ecosystem, all built around faking the web and fooling Google Search.&lt;/p&gt;
&lt;p&gt;Every package is advertised with just how they pull the wool over Google’s eyes, proudly proclaiming that their servers are in different countries, their domains aged many years with unique whois records, their sites using unique software and themes. They even promise to drip feed the links so everything seems above board, over time.&lt;/p&gt;
&lt;h2 id=&quot;lets-look-at-a-real-pbn&quot;&gt;Let’s look at a real PBN&lt;/h2&gt;
&lt;p&gt;I’m hesitant to link directly to a PBN or mention one lest Google smite us, but you can see an example of someone complaining to Google about one here (click the “more” link to see the links pointing to them): https://support.google.com/websearch/thread/4239775?hl=en.&lt;/p&gt;
&lt;p&gt;A quick examination of the links to the site shows there are many that are extremely suspicious. Some links appear suddenly in unrelated articles, which should be easy enough for Google to detect. But others appear on sites where they don’t look totally out of place.&lt;/p&gt;
&lt;p&gt;The site appears to have been snapped up as a dropped domain - there are lots of powerful links from the likes of PBS and Wikipedia to what appears to have been a &lt;a href=&quot;https://web.archive.org/web/20040203102411/http://www.music-critic.com/articles/revenuestar.htm&quot; rel=&quot;nofollow noopener&quot; target=&quot;_blank&quot;&gt;legitimate site&lt;/a&gt; with music reviews and interviews many years ago. Someone who follows these links these days would find a 404 page littered with links like “Top 10 Dynamic Vocal Mics for Live &amp;amp; Home Recording” - easily monetizable search engine targeted content.&lt;/p&gt;
&lt;p&gt;They also have a spammy link as a citation from Wikipedia where an article about the delay audio effect unit tangentially mentions “additionally, several companies make new analog delays” with a cite link to a page called “10 Best Analog Delay Pedals of 2019”. So apparently link spam on Wikipedia is still a valid technique in 2019.&lt;/p&gt;
&lt;p&gt;Somewhat disturbingly, on a high traffic programming site there’s a page entitled “How to create a simple REST API in PHP” containing a sentence suggesting if the reader is interested in making YouTube videos, they should follow a link to read camera reviews, which goes to the spammy site. The sentence is completely out of the blue, and doesn’t belong, but is unlikely to be picked up automatically.&lt;/p&gt;
&lt;h2 id=&quot;googles-response&quot;&gt;Google’s response&lt;/h2&gt;
&lt;p&gt;Google began to target PBNs in 2011 when it &lt;a href=&quot;https://www.nytimes.com/2011/02/13/business/13search.html&quot; rel=&quot;nofollow noopener&quot; target=&quot;_blank&quot;&gt;took action&lt;/a&gt; against JCPenney for one of the first large-scale link schemes. There was a &lt;a href=&quot;https://www.seroundtable.com/google-hits-private-blog-networks-19196.html&quot; rel=&quot;nofollow noopener&quot; target=&quot;_blank&quot;&gt;big drive&lt;/a&gt; to kill the technique in 2014.&lt;/p&gt;
&lt;p&gt;Since then it’s been a constant battle and core part of their efforts to combat spam, with search updates frequently sending waves of terror through black-hat communities, but they adapt their techniques and keep up their shady business.&lt;/p&gt;
&lt;p&gt;The G &lt;a href=&quot;https://support.google.com/adsense/answer/2661562?hl=en-GB&quot; rel=&quot;nofollow noopener&quot; target=&quot;_blank&quot;&gt;warns&lt;/a&gt; developers not to “…promote your site (or let anyone do so) using policy violating techniques […] posting links on link farms and ‘private blog networks’” but is otherwise surprisingly silent on the topic.&lt;/p&gt;
&lt;p&gt;Given that in theory a PBN can be completely undetectable, it’s hard to imagine the practice disappearing. All Google can do is improve the intelligence around their detection, but with improving AI content generation tools, the ability to spin up websites in minutes, and black-hats successfully avoiding detection for years, it’s hard to be optimistic that Google Search can become a fair platform.&lt;/p&gt;
</description>
<pubDate>Wed, 17 Jul 2019 11:25:06 +0000</pubDate>
<dc:creator>whalabi</dc:creator>
<og:title>Google Search is being routinely gamed by fake blogs and has been for years</og:title>
<og:type>article</og:type>
<og:image>https://i.imgur.com/K7Oz0UX.jpg</og:image>
<og:url>https://unlikekinds.com/article/google-pbns</og:url>
<og:description>For years, fraudsters have been getting away with tricking Google into pushing them higher up on the search result pages than they deserve to be. We’ll look at a PBN example, and explore if search engines can do anything about them.</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://unlikekinds.com/article/google-pbns</dc:identifier>
</item>
<item>
<title>Notre-Dame came closer to collapsing than people knew</title>
<link>https://www.nytimes.com/interactive/2019/07/16/world/europe/notre-dame.html</link>
<guid isPermaLink="true" >https://www.nytimes.com/interactive/2019/07/16/world/europe/notre-dame.html</guid>
<description>&lt;p class=&quot;paragraph&quot;&gt;PARIS — The security employee monitoring the smoke alarm panel at Notre-Dame cathedral was just three days on the job when the red warning light flashed on the evening of April 15: “Feu.” Fire.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;It was 6:18 on a Monday, the week before Easter. The Rev. Jean-Pierre Caveau was celebrating Mass before hundreds of worshipers and visitors, and the employee radioed a church guard who was standing just a few feet from the altar.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;Go check for fire, the guard was told. He did and found nothing.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;It took nearly 30 minutes before they realized their mistake: The guard had gone to the wrong building. The &lt;a href=&quot;https://www.nytimes.com/2019/04/15/world/europe/notre-dame-fire.html&quot;&gt;fire was in the attic of the cathedral&lt;/a&gt;, the famed latticework of ancient timbers known as “the forest.”&lt;/p&gt;
&lt;div class=&quot;rad-interactive full_bleed&quot; id=&quot;interactive-notre-dame-sequence1&quot; data-id=&quot;100000006600721&quot; data-slug=&quot;notre-dame-sequence1&quot;&gt;
&lt;div class=&quot;rad-interactive-wrapper&quot;&gt;
&lt;div class=&quot;g-story g-freebird g-max-limit&quot; data-preview-slug=&quot;2019-03-10-vi-freebird&quot;&gt;
&lt;div class=&quot;g-asset g-graphic g-asset-width-full&quot; id=&quot;&quot;&gt;
&lt;div id=&quot;sequence-content&quot; readability=&quot;31.5&quot;&gt;
&lt;div id=&quot;graphic-content&quot; readability=&quot;33&quot;&gt;EVACUATION CHURCHGUARD SECURITYEMPLOYEE CHURCHGUARD CHURCHGUARD  SECURITYSUPERVISOR FIRE DEPT. Sacristy Presbytery 
&lt;p class=&quot;g-subhed&quot; id=&quot;counter&quot;&gt;&lt;span id=&quot;mincount&quot;&gt;0&lt;/span&gt; minutes &lt;span class=&quot;thin&quot;&gt;after alarm&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&quot;text&quot;&gt;
&lt;div class=&quot;textblock&quot; id=&quot;block0&quot; readability=&quot;32&quot;&gt;
&lt;div class=&quot;steptext&quot; id=&quot;text0&quot; readability=&quot;59&quot;&gt;
&lt;p class=&quot;paragraph&quot;&gt;The fire was in the attic of the cathedral, the famed latticework of ancient timbers known as “the forest.”&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;textblock&quot; id=&quot;block1&quot; readability=&quot;31.5&quot;&gt;
&lt;div class=&quot;steptext&quot; id=&quot;text1&quot; readability=&quot;58&quot;&gt;
&lt;p class=&quot;paragraph&quot;&gt;The guard went to the attic of a small adjacent building, &lt;span class=&quot;highlight&quot;&gt;the sacristy&lt;/span&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;textblock&quot; id=&quot;block2&quot; readability=&quot;32&quot;&gt;
&lt;div class=&quot;steptext&quot; id=&quot;text2&quot; readability=&quot;59&quot;&gt;
&lt;p class=&quot;paragraph&quot;&gt;Instead of calling the fire department, the security employee &lt;span class=&quot;highlight&quot;&gt;called his boss but didn’t reach him&lt;/span&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;textblock&quot; id=&quot;block3&quot; readability=&quot;31.5&quot;&gt;
&lt;div class=&quot;steptext&quot; id=&quot;text3&quot; readability=&quot;58&quot;&gt;
&lt;p class=&quot;paragraph&quot;&gt;The manager called back and eventually deciphered the mistake. He called the guard: &lt;span class=&quot;highlight&quot;&gt;Leave the sacristy and run to the main attic&lt;/span&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;textblock&quot; id=&quot;block4&quot; readability=&quot;32.5&quot;&gt;
&lt;div class=&quot;steptext&quot; id=&quot;text4&quot; readability=&quot;60&quot;&gt;
&lt;p class=&quot;paragraph&quot;&gt;But by the time &lt;span class=&quot;highlight&quot;&gt;the guard climbed 300 narrow steps to the attic&lt;/span&gt;, the fire was burning out of control, putting firefighters in a near impossible position.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;


&lt;/div&gt;
&lt;/div&gt;
&lt;p class=&quot;paragraph&quot;&gt;The miscommunication, uncovered in interviews with church officials and managers of the fire security company, Elytis, has set off a bitter round of finger-pointing over who was responsible for allowing the fire to rage unchecked for so long. Who is to blame and how the fire started have not yet been determined and are at the heart of an &lt;a href=&quot;https://www.nytimes.com/2019/04/25/world/europe/notre-dame-fire-investigation.html?searchResultPosition=4&quot;&gt;investigation by the French authorities&lt;/a&gt; that will continue for months.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;But the damage is done. What happened that night changed Paris. The cathedral — a soaring medieval structure that has captured the hearts of believer and nonbeliever alike for 850 years — was ravaged.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;Today three jagged openings mar Notre-Dame’s vaulted ceiling, the stone of the structure is precarious, and the roof is gone. Some 150 workers remain busy recovering the stones, shoring up the building, and &lt;a href=&quot;https://www.nytimes.com/2019/04/23/world/europe/notre-dame-fire-protect.html?searchResultPosition=5&quot;&gt;protecting it from the elements with two giant tarps&lt;/a&gt;.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;Some of what went wrong that night has been reported in the French news media, including &lt;a href=&quot;https://www.lemonde.fr/culture/article/2019/05/31/a-notre-dame-les-failles-de-la-protection-incendie_5470055_3246.html&quot;&gt;Le Monde&lt;/a&gt; and Le Canard Enchaîné. Now, The New York Times conducted scores of interviews and reviewed hundreds of documents to reconstruct the missteps — and the battle that saved Notre-Dame in the first four critical hours after the blaze began.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;What became clear is just how close the cathedral came to collapsing.&lt;/p&gt;

&lt;p class=&quot;paragraph&quot;&gt;The first hour was defined by that initial, critical mistake: the failure to identify the location of the fire, and by the delay that followed.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;The second hour was dominated by a sense of helplessness. As people raced to the building, &lt;a href=&quot;https://www.nytimes.com/2019/04/19/opinion/notre-dame-fire.html?searchResultPosition=9&quot;&gt;waves of shock and mourning&lt;/a&gt; for one of the world’s most beloved and recognizable buildings, amplified over social media, rippled in real time across the globe.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;That Notre-Dame still stands is due solely to the enormous risks taken by firefighters in those third and fourth hours.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;Disadvantaged by their late start, firefighters would rush up the 300 steps to the burning attic and then be forced to retreat. Finally, a small group of firefighters was sent directly into the flames, as a last, desperate effort to save the cathedral.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;“There was a feeling that there was something bigger than life at stake,” said Ariel Weil, the mayor of the city’s Fourth Arrondissement, home to the cathedral, “and that Notre-Dame could be lost.”&lt;/p&gt;


&lt;p class=&quot;paragraph&quot;&gt;Paris has endured so much in recent years, from terrorist attacks to the recent violent demonstrations by Yellow Vest protesters. But to many Parisians, the sight of Notre-Dame in flames was unendurable.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;“For Parisians, Notre-Dame is Notre-Dame,” said its rector, Msgr. Patrick Chauvet, who watched in tears that night as firefighters struggled to tame the blaze. “They couldn’t think for one second that this could happen.”&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;The fire warning system at Notre-Dame took dozens of experts six years to put together, and in the end involved thousands of pages of diagrams, maps, spreadsheets and contracts, according to archival documents found in a suburban Paris library by The Times.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;The result was a system so arcane that when it was called upon to do the one thing that mattered — warn “fire!” and say where — it produced instead a nearly indecipherable message.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;It made a calamity almost inevitable, fire experts consulted by The Times said.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;“The only thing that surprised me is that this disaster didn’t happen sooner,” said Albert Simeoni, an expert born and trained in France, but now head of fire protection engineering at Worcester Polytechnic Institute in Massachusetts.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;The ponderous response plan, for example, &lt;a href=&quot;https://www.nytimes.com/2019/04/19/world/europe/notre-dame-fire-safety.html?action=click&amp;amp;module=inline&amp;amp;pgtype=Homepage&quot;&gt;underestimated the speed&lt;/a&gt; at which a fire would spread in Notre-Dame’s attic, where, to preserve the architecture, no sprinklers or fire walls had been added.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;The plan’s flaws may have been compounded by the inexperience of the security employee, who had been working at Notre-Dame just three days when the fire broke out.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;Stationed since 7 a.m. within the pale-green walls of the tiny presbytery room, he was supposed to have been relieved after working an eight-hour shift. His replacement was absent, so he was on the second leg of a double shift.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;The control panel he monitored was connected to an elaborate system consisting of tubes with tiny holes that ran throughout the cathedral complex. At one end of each tube was what is called an “aspirating” detector, a highly sensitive device that draws in air to detect any smoke.&lt;/p&gt;

&lt;p class=&quot;paragraph&quot;&gt;The message that scrolled across the monitor was far more complicated than the mere word “Feu.”&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;First it gave a shorthand description of a zone — the cathedral complex was divided into four — that read “Attic Nave Sacristy.”&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;That was followed by a long string of letters and numbers: ZDA-110-3-15-1. That was code for one specific smoke detector among the more than 160 detectors and manual alarms in the complex.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;Finally came the important part: “aspirating framework,” which indicated an aspirating detector in the cathedral’s attic, which was also known as the framework.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;It remains unclear just how much of that entire alert the employee understood or conveyed to the guard — and whether the critical part of it was relayed at all, though Elytis insists it was.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;By the time it was sorted out, the flames were already running wild, too high to be controlled by a fire extinguisher.&lt;/p&gt;

&lt;p class=&quot;paragraph&quot;&gt;Finally, the guard radioed the fire security employee to call the fire department. It was 6:48, 30 minutes after the first red signal lit up the word “Feu.”&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;All the sensitive technology at the heart of system had been undone by a cascade of oversights and erroneous assumptions built into the overall design, said Glenn Corbett, an associate professor of fire science at John Jay College of Criminal Justice in New York.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;“You have a system that is known for its ability to detect very small quantities of smoke,” Mr. Corbett said. “Yet the whole outcome of it is this clumsy human response. You can spend a lot to detect a fire, but it all goes down the drain when you don’t move on it.”&lt;/p&gt;

&lt;p class=&quot;paragraph&quot;&gt;If it took more than half an hour to call the fire department, it took just minutes once smoke appeared for the images to begin circulating around the world on social media.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;“I think Notre-Dame is burning,” someone posted on a Twitter video at 6:52 p.m. Within just a few minutes, the smoke, blowing west with the wind, was so thick it started to obscure the towers.&lt;/p&gt;
&lt;div class=&quot;rad-interactive full_bleed&quot; id=&quot;interactive-notre-dame-social-feed&quot; data-id=&quot;100000006601958&quot; data-slug=&quot;notre-dame-social-feed&quot;&gt;
&lt;div class=&quot;rad-interactive-wrapper&quot;&gt;
&lt;div class=&quot;g-story g-freebird g-max-limit&quot; data-preview-slug=&quot;2019-03-10-vi-freebird&quot;&gt;
&lt;div class=&quot;g-asset g-graphic g-asset-width-full&quot; id=&quot;&quot;&gt;
&lt;div class=&quot;grid&quot;&gt;











&lt;div class=&quot;grid-item vertical&quot;&gt;
&lt;p class=&quot;timestamp&quot;&gt;7:48 p.m.&lt;/p&gt;
&lt;img src=&quot;https://static01.nyt.com/newsgraphics/2019/07/08/notre-dame-social-media-stuff/b0d8503c95f734993ac140555dada308af0ec884/social/748.jpg&quot;/&gt;&lt;p class=&quot;caption&quot;&gt;By Addison Tesi&lt;/p&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;


&lt;/div&gt;
&lt;/div&gt;
&lt;p class=&quot;paragraph&quot;&gt;Minutes earlier, at 6:44, Elaine Leavenworth, a tourist from Chicago, had taken a picture of the facade against a clear blue sky. By the time she took a short walk across Pont Saint-Michel, she smelled smoke. She looked back to see the towers engulfed in smoke, and took another shot.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;“Frightening how quickly it changed,” Ms. Leavenworth &lt;a href=&quot;https://twitter.com/ELeavenworth/status/1117912125425504256&quot;&gt;posted on Twitter&lt;/a&gt; at 6:55 p.m., along with the two photos.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;Monsignor Chauvet, the rector, had been chatting just a couple of hundred yards from the cathedral with shopkeepers, when suddenly one of them pointed up and exclaimed: “Look, there is smoke coming out!”&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;A sinking feeling took hold. “I said to myself: ‘It’s the forest that’s caught fire,’” Monsignor Chauvet recalled, referring to the cathedral’s attic.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;He pulled out his cellphone and warned his staff. They said the fire department had been called but had yet to arrive.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;“I was incapable of doing anything,” Monsignor Chauvet said. “I couldn’t say anything. I watched the cathedral burn.”&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;Mr. Weil, the mayor of the Fourth Arrondissement, was just leaving a long meeting at the nearby Hôtel de Ville, the city hall, when he saw the smoke and ran toward Notre-Dame.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;He called the mayor of Paris, Anne Hidalgo, and she rushed to meet him. When they reached the plaza, tears were streaming down Monsignor Chauvet’s face. Ashes and fiery flakes drifted through the air.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;“It was like an end-of-the-world atmosphere,” Mr. Weil recalled.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;On the plaza, the gathering crowd was stunned, immobilized.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;“I cried because you are helpless to do anything,” Monsignor Chauvet said. “You wait for the firefighters.”&lt;/p&gt;


&lt;p class=&quot;paragraph&quot;&gt;By the time Master Cpl. Myriam Chudzinski arrived, a few minutes before 7 p.m., Notre-Dame was surrounded by hundreds of horrified bystanders. The fire already glowed through the roof.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;Corporal Chudzinski, 27, had wanted to be a firefighter since she was a little girl. Now she was staring speechless at a kind of blaze she had never encountered.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;Her truck stopped on the Rue du Cloître Notre-Dame, a narrow street that runs on one side of the cathedral. The building was so gigantic, she couldn’t see where the fire was spreading anymore.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;“We were so small that it was hard to get a proper idea from the bottom of the cathedral,” she said. “But it might have been better like that.”&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;Better not to know the danger she was walking into.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;Corporal Chudzinski’s team was one of the first to arrive, and headed to the attic. The firefighters immediately plugged their hoses into the cathedral’s dry risers, empty vertical pipes that would allow them to pump water up to the flames.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;Bearing 55 pounds of gear and a breathing pipe on her shoulder, Corporal Chudzinski climbed the dark staircase in the transept on the cathedral’s north side.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;She knew the structure well, having drilled at Notre-Dame last fall. As she climbed, she recalled that the attic had no firewalls to prevent the spread of a blaze — they had been rejected to preserve the web of historic wooden beams.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;With such intense flames, she realized, &lt;a href=&quot;https://www.nytimes.com/interactive/2019/04/17/world/europe/notre-dame-cathedral-fire-spread.html&quot;&gt;the attic would be a tinderbox&lt;/a&gt;.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;Aside from the drill, Corporal Chudzinski had visited the cathedral once a few years ago, marveling at its vastness. “It was so peaceful, so quiet,” she said. “But that night, it was more like hell.”&lt;/p&gt;

&lt;p class=&quot;paragraph&quot;&gt;Once at the top, Corporal Chudzinski and her team stopped on a cornice outside the attic as she took the lead dousing the flames, about 15 feet away.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;Her colleague holding the hose behind her could see that the flames were being pushed by a brisk wind toward the cathedral’s northern tower. The fire was starting to surround them, threatening to trap them outside, in the middle of the inferno. They retreated inside, toward the attic.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;There was no wind there. But the air was so hot, so barely breathable, that for the first time that night, Corporal Chudzinski plugged in her breathing apparatus. Her thirst was terrible.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;In the attic, the flames advanced as an unstoppable wall. They covered countless beams already and nibbled up the floor. Pieces of wood frayed and fell from the timbers one by one.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;About 7:50, almost an hour into the fight, a deafening blast engulfed her. It was, she said, like “a giant bulldozer dropping dozens of stones into a dumpster.”&lt;/p&gt;
&lt;div class=&quot;g-item g-video interactive_video&quot;&gt;

&lt;div class=&quot;g-video-annotations&quot; readability=&quot;23.5&quot;&gt;
&lt;div class=&quot;g-annotation&quot; readability=&quot;11&quot;&gt;
&lt;p&gt;&lt;span&gt;The 750-ton spire of the cathedral, wrought of heavy oak and lead, had collapsed. The blast was so powerful it slammed all the doors of the cathedral shut. The showering debris broke several stone vaults of the nave.&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;g-annotation&quot; readability=&quot;11&quot;&gt;
&lt;p&gt;&lt;span&gt;Corporal Chudzinski and other firefighters happened to be behind a wall when a fireball hurtled through the attic. It probably saved them. “I felt useless, ridiculously small,” she said. “I was just powerless.”&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;g-annotation&quot; readability=&quot;10&quot;&gt;
&lt;p&gt;&lt;span&gt;The generals overseeing the operation called everyone back. Some 50 firefighters, including Corporal Chudzinski and her team, were ordered to come down.&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;g-annotation&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;&lt;span&gt;They battled the fire from the ground, drawing water from the Seine. But it wasn’t working.&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;g-annotation&quot; readability=&quot;9&quot;&gt;
&lt;p&gt;&lt;span&gt;Before the blast, Corporal Chudzinski and her colleagues had made a critical observation: The flames were endangering the northern tower. The realization would change the course of the fight.&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;g-annotation&quot; readability=&quot;12&quot;&gt;
&lt;p&gt;&lt;span&gt;Inside that tower, eight giant bells hung precariously on wooden beams that were threatening to burn. If the beams collapsed, firefighters feared, the falling bells could act like wrecking balls and destroy the tower.&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;g-annotation&quot; readability=&quot;11&quot;&gt;
&lt;p&gt;&lt;span&gt;If the northern tower fell, firefighters believed, it could bring down the south tower, and the cathedral with it.&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&quot;videocredit&quot;&gt;
&lt;p&gt;Video by Xavier Guillerm&lt;/p&gt;
&lt;/div&gt;

&lt;p class=&quot;paragraph&quot;&gt;Near 8:30 p.m., President Emmanuel Macron arrived to survey the damage, along with Prime Minister Édouard Phillippe and other top officials.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;A group of about 20 officials, including Mayor Hidalgo, Mayor Weil and Monsignor Chauvet, convened across the plaza at Police Headquarters for a briefing by Gen. Jean-Claude Gallet, the head of the Paris fire brigade.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;Clad in firefighting gear, dripping with water, General Gallet, 54, had served in Afghanistan and specialized in crisis management. He entered the conference room and gave them the bad news.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;The attic could no longer be saved; he had decided to let it go. He would have his brigades throw all their energy into saving the towers, focusing on the northern one, already on fire.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;“He came in and told us, ‘In 20 minutes, I’ll know if we’ve lost it,’” Mr. Weil recalled. “The air was so thick. But we knew what he meant: He meant Notre-Dame could collapse.”&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;“At that point,” Mr. Weil added, “it was clear that some firefighters were going to go into the cathedral without knowing if they would come back out.”&lt;/p&gt;

&lt;p class=&quot;paragraph&quot;&gt;Monsignor Chauvet wept. The prime minister circled his thumbs nervously.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;President Macron remained silent, but appeared to give tacit approval to General Gallet’s decision.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;Out on the square, a temporary command post had been set up. There, General Gallet’s deputy, Gen. Jean-Marie Gontier, was managing the firefighters on the front lines.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;He gathered them around him to prepare for the second stage of the battle. A slippery carpet of ashes covered the stones underfoot in black and gray.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;The situation looked grim. Whiteboards displayed sketches of the fire’s progress. Police drone footage showed the cathedral’s roof as a fiery cross illuminating the night sky. At the center was a gaping hole where the spire had stood for more than 160 years.&lt;/p&gt;
&lt;div class=&quot;rad-interactive small&quot; id=&quot;interactive-notre-dame-sketches&quot; data-id=&quot;100000006605063&quot; data-slug=&quot;notre-dame-sketches&quot; readability=&quot;10&quot;&gt;
&lt;div class=&quot;rad-interactive-wrapper&quot; readability=&quot;15&quot;&gt;
&lt;h2 class=&quot;interactive-headline&quot;&gt;Scenes From a Firefighter’s Notebook&lt;/h2&gt;
&lt;p class=&quot;rad-interactive-summary&quot;&gt;For all the high-tech gear available to big-city fire departments, investigators still see value in old-school tools. These drawings were made by a French firefighter and professional sketch artist, Laurent Clerjeau, as the cathedral burned, and in the days afterward. They show how the flames spread, and record what firefighters did to try to contain them.&lt;/p&gt;

&lt;p class=&quot;credit&quot;&gt;Laurent Clerjeau&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;p class=&quot;paragraph&quot;&gt;Thick smoke was billowing from the wooden frame of the northern tower. Thumb-size embers flew like glittering hornets and pierced some hoses. One of the dry risers needed to get water to the top of the cathedral was leaking, lowering the water pressure.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;Now, all that time lost because the firefighters had been called late was exacting its toll. General Gontier compared it to a footrace. “It’s like starting a 400 meters, several dozen meters behind,” he said.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;Gabriel Plus, the Paris fire brigade spokesman, said, “We needed to make decisions, quickly.”&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;At the command post, Master Sgt. Rémi Lemaire, 39, had an idea.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;What if they went up the stairs in the southern tower, where he had been earlier in the fight. That way, they could carry up two additional hoses that could be plugged directly into a fire truck. It would give the team more water pressure than the leaking riser could muster.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;And then from there, the firefighters could enter the blazing northern tower.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;It was a high-risk strategy. But General Gontier agreed.&lt;/p&gt;

&lt;p class=&quot;paragraph&quot;&gt;Sergeant Lemaire had already seen the perils that the northern tower held earlier that evening. In the time it took to decide on the new plan, things had gotten only worse.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;“We were at first reluctant to go because we weren’t sure we’d have an escape route,” he recalled.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;A group of firefighters from a neighboring suburb refused to go, but another team said it would do it.&lt;/p&gt;
&lt;div class=&quot;g-item g-video interactive_video&quot;&gt;

&lt;div class=&quot;g-video-annotations&quot; readability=&quot;18&quot;&gt;
&lt;div class=&quot;g-annotation&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;&lt;span&gt;They moved forward with their plan to save the northern tower, which was already aflame.&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;g-annotation&quot; readability=&quot;9&quot;&gt;
&lt;p&gt;&lt;span&gt;Sergeant Lemaire led them up the southern tower, and they set up on a platform between the two towers.&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;g-annotation&quot; readability=&quot;9&quot;&gt;
&lt;p&gt;&lt;span&gt;He and his team dropped hoses over the side to connect to a fire truck on the ground, hoping to get more pressure than the leaking standpipe could muster.&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;g-annotation&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;&lt;span&gt;Another dozen or so firefighters doused the flames that threatened to collapse the floor beneath them. Others held back flames on the roof.&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;g-annotation&quot; readability=&quot;7&quot;&gt;
&lt;p&gt;&lt;span&gt;The gigantic bells above their heads could tumble down at any moment. They needed to work quickly.&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;g-annotation&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;&lt;span&gt;The firefighters moved higher, the structure ever more precarious as they went.&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;g-annotation&quot; readability=&quot;9&quot;&gt;
&lt;p&gt;&lt;span&gt;But they kept going, up another floor, closer to another set of bells.&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;g-annotation&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;&lt;span&gt;It took them 15 decisive minutes, but by 9:45 p.m. the flames were tamed.&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p class=&quot;paragraph&quot;&gt;General Gontier went up on the balcony of Notre-Dame to inspect the situation.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;“She is saved,” he declared as he descended.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;By 11, General Gallet told officials they were confident that the fire in the towers would be brought under control. Around 11:30, &lt;a href=&quot;https://www.nytimes.com/2019/04/16/world/europe/notre-dame-fire-investigation.html?module=inline&quot;&gt;President Macron addressed the nation&lt;/a&gt; live on television from in front of the cathedral.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;“The worst was avoided, even though the battle is not yet over,” he said. Then he made a pledge: “We will rebuild this cathedral together.”&lt;/p&gt;

&lt;p class=&quot;paragraph&quot;&gt;Over the past three months, investigators have conducted some 100 interviews and sifted the rubble, looking for clues to what started the fire.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;They have focused on the possibility of a short-circuit in the electrified bells of the spire, or in the elevators that had been set up on the scaffolding to help workers carry out renovations. They are also considering cigarette butts, which were found on the scaffolding, apparently left by workers.&lt;/p&gt;

&lt;p class=&quot;paragraph&quot;&gt;“We’re not ruling out any scenario, we just know it wasn’t criminal,” said a Paris police official, speaking on the condition of the anonymity because the investigation is still underway.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;The miscommunication that allowed the fire to rage unchecked for so long is now the source of a bitter dispute over who is responsible.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;Church officials say that the employee for Elytis, the fire security company, never mentioned the framework of the cathedral’s roof. “Several of them had a walkie-talkie and all heard ‘Attic Nave Sacristy,’” said André Finot, a spokesman for Notre-Dame. “That’s all.”&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;Monsignor Chauvet, Notre-Dame’s rector, has refused to make the employees available independently for interviews, citing the investigation. “Some might lose their jobs,’’ he said. “I asked them not to talk.”&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;Arnaud Demaret, the chief executive officer of Elytis, said his employee was still in shock. The company received two death threats over the telephone in the days after the fire, he said.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;But he insisted that his employee had communicated the fire’s location properly.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;“There is only one wooden framework,” Mr. Demaret said in an interview. “It’s in the attic.”&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;“Had the church employee gone up to the attic right after my employee alerted him,” he said, “he would have seen the smoke.”&lt;/p&gt;


&lt;p class=&quot;paragraph&quot;&gt;After the fire was brought under control, Sergeant Lemaire and his colleagues stayed up on the roof to put out the flames there and protect the southern tower, where three small fires had started.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;Corporal Chudzinski spent the rest of the night helping make space for other fire trucks and securing the area. Then she went back to her station. The city was quiet.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;She remembered her retreat, and the drone footage showing the cathedral from above as a flaming cross. Only then, when she was no longer absorbed in fighting the fire, did she fully comprehend the scope of the response.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;“I didn’t know how huge the teamwork had been,” she said.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;Miraculously, no one was killed.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;Three days later, she and Sergeant Lemaire were among the hundreds of firefighters and police officers honored by President Macron at the Élysée Palace.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;Countless Parisians stopped by the city’s fire stations to donate food and small gifts and express their thanks. Notes came from around the world.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;“These people were heroes,” Mayor Weil said.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;Still, &lt;a href=&quot;https://www.nytimes.com/2019/04/26/your-money/notre-dame-donation-backlash-philanthropy.html?searchResultPosition=7&quot;&gt;more than a few wondered&lt;/a&gt; why at a time when citizens were taking to the streets protesting inequality and economic hardship, when so many were dying in distant wars and on migrant boats sailing for Europe, should Notre-Dame matter.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;But &lt;a href=&quot;https://www.nytimes.com/2019/04/16/world/europe/france-notre-dame-religion.html?searchResultPosition=3&amp;amp;module=inline&quot;&gt;Notre-Dame was more than a building&lt;/a&gt;. It rests on Île de la Cité, the island in the middle of the Seine River where Paris was born. Made and remade over the centuries, it remains a focal point of French culture that has responded to the demands of each age it has passed through.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;And in the present moment, it represented an unbreakable link with what, for many French, is the essence of their &lt;a href=&quot;https://www.nytimes.com/2019/05/02/reader-center/paris-fire-notre-dame.html?searchResultPosition=30&quot;&gt;increasingly fragile nationhood&lt;/a&gt;.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;“Notre-Dame is good and old: Perhaps we’ll even see her bury Paris, whose birth she witnessed,” the poet Gérard de Nerval once said.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;That was back in the 19th century.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;That sense of the cathedral as a living, wounded entity has only intensified since the fire.&lt;/p&gt;
&lt;p class=&quot;paragraph&quot;&gt;“First off, this is all about our fragility,” Monsignor Chauvet, the rector, said on reflection. “We are as nothing. The fragility of man, in respect to God. We are nothing but — creatures.”&lt;/p&gt;

&lt;p class=&quot;production-credits&quot;&gt;Aurélien Breeden and Constant Méheut contributed reporting from Paris. Produced by Mona Boshnaq, Allison McCann, Andrew Rossback, Gaia Tripoli and Jeremy White. Additional work by Michael Beswetherick and Bedel Saget.&lt;/p&gt;

</description>
<pubDate>Wed, 17 Jul 2019 09:02:09 +0000</pubDate>
<dc:creator>Luc</dc:creator>
<og:url>https://www.nytimes.com/interactive/2019/07/16/world/europe/notre-dame.html</og:url>
<og:type>article</og:type>
<og:title>Notre-Dame came far closer to collapsing than people knew. This is how it was saved.</og:title>
<og:image>https://static01.nyt.com/images/2019/06/15/world/xxnotre-dame1/xxnotre-dame1-facebookJumbo-v2.jpg</og:image>
<og:description>A baffling alert. A race to the wrong building. Notre-Dame still stands only because firefighters decided to risk everything, a New York Times reconstruction has found.</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.nytimes.com/interactive/2019/07/16/world/europe/notre-dame.html</dc:identifier>
</item>
<item>
<title>How to Find Hidden Cameras in Your Airbnb</title>
<link>https://isc.sans.edu/diary/How+to+Find+Hidden+Cameras+in+your+AirBNB/24834</link>
<guid isPermaLink="true" >https://isc.sans.edu/diary/How+to+Find+Hidden+Cameras+in+your+AirBNB/24834</guid>
<description>&lt;p&gt;Recently, there have been a number of stories about hidden cameras found in Airbnb rentals [1][2]. Of course, these cameras are likely not limited to vacation rentals, and there have also been reports about cameras installed in hotels [3]. When considering defenses for any threat, it is important to keep in mind the adversary. In this case, I am assuming that the owner of the apartment you are renting is not a sophisticated network engineer but pretty much buying cheap off the shelf cameras and connecting them to the local network.&lt;/p&gt;
&lt;p&gt;You typically end up with your normal &quot;home network&quot; in an Airbnb. A single wireless router/access point connected to a consumer DSL or cable modem. The guest has access to the wireless network but usually does not have access to the admin console of the router.&lt;/p&gt;
&lt;p&gt;The very first thing you can do is a simple visual inspection of the rooms. Is anything out of place? Cameras often need power. Are there any devices that have power running to them that usually do not? Are any devices out of place. &lt;/p&gt;
&lt;p&gt;Popular devices used to hide cameras:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;USB chargers. They are typically plugged into the wall, and it would not be considered suspect to have them connected to power. Most popular USB charger cameras I have seen are black to hide the lens better. But the lens will be visible if you look closer. They also tend to be quite a bit larger. Below I have a picture of a normal Apple USB charger and one with a camera. If you unplug it, you may see a slot for a memory card.&lt;/li&gt;
&lt;li&gt;
&lt;table&gt;&lt;tbody readability=&quot;1&quot;&gt;&lt;tr&gt;&lt;td&gt;
&lt;p&gt;&lt;a href=&quot;https://isc.sans.edu/diaryimages/images/IMG_1121.jpg&quot;&gt;&lt;img alt=&quot;&quot; src=&quot;https://isc.sans.edu/diaryimages/images/IMG_1121.jpg&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td&gt;&lt;a href=&quot;https://isc.sans.edu/diaryimages/images/IMG_1123.jpg&quot;&gt;&lt;img alt=&quot;&quot; src=&quot;https://isc.sans.edu/diaryimages/images/IMG_1123.jpg&quot;/&gt;&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td colspan=&quot;2&quot;&gt;iPhone and iPad chargers compared to &quot;USB Spy Cam Charger&quot;&lt;br/&gt; &lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/li&gt;
&lt;li&gt;Digital clocks. These are difficult to spot. If you are worried, then unplug it and place it inside a drawer.&lt;/li&gt;
&lt;li&gt;Fire alarms. Again, this can be difficult to identify, and unlike for a digital clock, you should probably not just remove fire alarms. But is there a fire alarm out of place? For example, there should not be a fire alarm in the bathroom (but you often do have them in bedrooms). Is there more than one fire alarm in a particular room?&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Do a quick search on Amazon for &quot;hidden camera&quot; to get a decent list of possible devices you may encounter. Not all of them require power cords. Some run on batteries.&lt;/p&gt;
&lt;p&gt;Next, it may be a good idea to check the local network for odd devices. Most of these cameras will allow remote access via WiFi. As a very first step, see what networks are available (in addition to the one provided by the host). But this scan is likely going to show dozens of neighbor networks, and I do not recommend trying to connect to networks you are not authorized to connect. Watch for any networks with a surprisingly good signal.&lt;/p&gt;
&lt;p&gt;Once you are connected to the host's Wifi network, it is time to launch a quick Nmap scan. Most of these spy cameras offer a web server. So a simple scan like:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;nmap -Ap 80,8000,8080,443,8443,7443,7070,7000,22,23,21 10.5.1.0/24&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;is a good start. Here are some of the innocent devices you may find:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;The router/modem should respond, and it often uses a web-based admin interface&lt;/li&gt;
&lt;li&gt;Smart TVs, cable boxes and similar equipment will likely respond&lt;/li&gt;
&lt;li&gt;Printers&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;For any devices found, connect to them to see if you can identify them. If nothing is found, or if you find devices that do not respond on any of the ports above: run a more exhaustive scan. You will not find devices segmented into a different VLAN, or that are properly firewalled on to respond. If you want, you can be more intrusive. Reboot the router (unplug/plug it back in) and collect ARP messages with tcpdump to see if you missed any devices.&lt;/p&gt;
&lt;p&gt;Finally, try to figure out the public IP address of the network you are on ( &lt;a href=&quot;https://dshield.org/api/myip&quot;&gt;https://dshield.org/api/myip&lt;/a&gt; ) and either run a port scan from the outside to see if you find any odd open ports, or look it up in Shodan to see if Shodan found cameras on this IP in the past (but you likely will have a dynamic IP address).&lt;/p&gt;
&lt;p&gt;If you do have access to the router's admin console, you may want to check if it has a list of connected devices or additional networks it is offering, which may be used for these devices. Some home routers have two SSIDs, one typically used for &quot;Guest&quot; access, with a second SSID used for a more protected subnet. Cameras could be connected to this second network.&lt;/p&gt;
&lt;p&gt;More advanced techniques:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;An infrared camera can help (like a phone attachment). Cameras and devices like it will give off heat. But this will not identify cameras inside electronic devices, and the scans can be difficult to interpret (e.g. mirrors will reflect IR, so a hot spot on a mirror may be from a ceiling light not from a camera behind it)&lt;/li&gt;
&lt;li&gt;Battery operated cameras are almost always motion activated to save power. You could either try to correlate wireless traffic with motion, or you could set up fake motion (paper towel tied to a ceiling fan, blinking light) to drain the batteries.&lt;/li&gt;
&lt;li&gt;There are &quot;spy cameras&quot; that use non-WiFi RF transmissions. They are a bit more difficult to find. There are some special detectors for them, that will alert on RF signals on frequencies typically used by these cameras. I have no idea how well they work but assume that they will (a) not get anything as some cameras may use odd frequencies and (b) lead to false positives as some of these frequencies may be used by other devices as well. I do not have any first-hand experience with these detectors (and do not keep them in your hotel room if you are trying to sneak into Maro-Lago).&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;The same techniques can apply to a normal hotel as well. But hotel networks tend to be more complex, so a Nmap scan is likely to lead to ambiguous results. Hotels for example often have cameras in hallways and other public areas (hopefully your Nmap scan will not find them).&lt;/p&gt;
&lt;p&gt;[1] &lt;a href=&quot;https://nakedsecurity.sophos.com/2019/04/09/airbnb-says-sorry-after-man-detects-hidden-camera-with-network-scan/&quot;&gt;https://nakedsecurity.sophos.com/2019/04/09/airbnb-says-sorry-after-man-detects-hidden-camera-with-network-scan/&lt;/a&gt;&lt;br/&gt;[2] &lt;a href=&quot;https://www.airbnb.com/help/article/887/what-are-airbnb-s-rules-about-electronic-surveillance-devices-in-listings&quot;&gt;https://www.airbnb.com/help/article/887/what-are-airbnb-s-rules-about-electronic-surveillance-devices-in-listings&lt;/a&gt;&lt;br/&gt;[3] &lt;a href=&quot;https://www.desertsun.com/story/news/crime_courts/2017/05/09/hidden-camera-hotel-bathroom/314480001/&quot;&gt;https://www.desertsun.com/story/news/crime_courts/2017/05/09/hidden-camera-hotel-bathroom/314480001/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;---&lt;br/&gt;Johannes B. Ullrich, Ph.D. , Dean of Research, &lt;a href=&quot;https://sans.edu&quot;&gt;SANS Technology Institute&lt;/a&gt;&lt;br/&gt;&lt;a href=&quot;https://jbu.me/164&quot;&gt;Twitter&lt;/a&gt;|&lt;/p&gt;
</description>
<pubDate>Wed, 17 Jul 2019 07:55:03 +0000</pubDate>
<dc:creator>greencore</dc:creator>
<og:type>website</og:type>
<og:url>https://isc.sans.edu/diary.html?storyid=24834</og:url>
<og:image>https://isc.sans.edu/images/logos/isc/large.png</og:image>
<og:description>How to Find Hidden Cameras in your AirBNB, Author: Johannes Ullrich</og:description>
<dc:format>text/html</dc:format>
<dc:identifier>https://isc.sans.edu/diary/How+to+Find+Hidden+Cameras+in+your+AirBNB/24834</dc:identifier>
</item>
</channel>
</rss>