<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=hnrss.org%2Fnewest%3Fpoints%3D200&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://hnrss.org/newest?points=200" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>Hacker News: Newest</title>
<link>https://news.ycombinator.com/newest</link>
<description>Hacker News RSS</description>
<item>
<title>Severed fibre cables disrupted internet access in eastern Europe, Iran, Turkey</title>
<link>https://www.bbc.com/news/technology-50851420</link>
<guid isPermaLink="true" >https://www.bbc.com/news/technology-50851420</guid>
<description>&lt;figure class=&quot;media-landscape has-caption full-width lead&quot;&gt;&lt;span class=&quot;image-and-copyright-container&quot;&gt;
                
                &lt;img class=&quot;js-image-replace&quot; alt=&quot;Fibre optic cable&quot; src=&quot;https://ichef.bbci.co.uk/news/320/cpsprodpb/864F/production/_110238343_mediaitem110238339.jpg&quot; width=&quot;976&quot; height=&quot;549&quot;/&gt;&lt;span class=&quot;off-screen&quot;&gt;Image copyright&lt;/span&gt;
                 &lt;span class=&quot;story-image-copyright&quot;&gt;Getty Images&lt;/span&gt;
                
            &lt;/span&gt;
            
            &lt;figcaption class=&quot;media-caption&quot;&gt;&lt;span class=&quot;off-screen&quot;&gt;Image caption&lt;/span&gt;
                &lt;span class=&quot;media-caption__text&quot;&gt;
                    Fibre optic cables offer ultra-fast data transfer
                &lt;/span&gt;
            &lt;/figcaption&gt;&lt;/figure&gt;&lt;p class=&quot;story-body__introduction&quot;&gt;Severed fibre optic cables disrupted internet access in parts of eastern Europe, Iran and Turkey on Thursday.&lt;/p&gt;&lt;p&gt;The issue, which lasted for about two hours, was caused by multiple fibre cables being physically cut at the same time, a highly unusual thing to happen.&lt;/p&gt;&lt;p&gt;Google said its services were among those unavailable in the region for about 30 minutes.&lt;/p&gt;&lt;p&gt;The company told internet service providers to connect to its other servers to &quot;route around the problem&quot;.&lt;/p&gt;&lt;p&gt;In a statement, the company blamed &quot;multiple simultaneous fibre cuts&quot;, which are very rare.&lt;/p&gt;&lt;p&gt;BBC Monitoring confirmed that internet access in Bulgaria, Iran and Turkey had been disrupted for about two hours on Thursday morning.&lt;/p&gt;&lt;p&gt;Sadjad Bonabi, a director at Iran's Communications Infrastructure Company, said two cuts happened at once, one between Iran and Bucharest and the other on a line to Munich.&lt;/p&gt;&lt;p&gt;This disrupted traffic on one of the major fibre cables in the region. But Mr Bonabi said traffic had been routed on to &quot;healthy&quot; connections in western and southern Iran.&lt;/p&gt;&lt;p&gt;No explanation for the cut cables has been offered.&lt;/p&gt;&lt;p&gt;Google told the BBC it would publish a full incident report in the coming weeks.&lt;/p&gt;&lt;p&gt;International internet cables have been mistakenly cut in the past.&lt;/p&gt;&lt;p&gt;In 2011, a 75-year-old woman admitted damaging &lt;a href=&quot;https://www.bbc.co.uk/news/world-europe-12985082&quot; class=&quot;story-body__link&quot;&gt;fibre-optic cables linking Georgia to Armenia&lt;/a&gt; while scavenging for copper.&lt;/p&gt;&lt;p&gt;And in 2018, &lt;a href=&quot;https://www.bbc.co.uk/news/uk-scotland-north-east-orkney-shetland-46123798&quot; class=&quot;story-body__link&quot;&gt;a fibre link in Orkney was accidentally cut&lt;/a&gt; during the construction of a new hospital.&lt;/p&gt;
            </description>
<pubDate>Thu, 19 Dec 2019 18:33:45 +0000</pubDate>
<dc:creator>DarkContinent</dc:creator>
<og:title>Google goes offline after fibre cables cut</og:title>
<og:type>article</og:type>
<og:description>The tech giant's services were among those temporarily unavailable in eastern Europe on Thursday.</og:description>
<og:url>https://www.bbc.com/news/technology-50851420</og:url>
<og:image>https://ichef.bbci.co.uk/news/1024/branded_news/864F/production/_110238343_mediaitem110238339.jpg</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.bbc.com/news/technology-50851420</dc:identifier>
</item>
<item>
<title>Rust 1.40</title>
<link>https://blog.rust-lang.org/2019/12/19/Rust-1.40.0.html</link>
<guid isPermaLink="true" >https://blog.rust-lang.org/2019/12/19/Rust-1.40.0.html</guid>
<description>&lt;p&gt;Dec. 19, 2019 · The Rust Release Team&lt;/p&gt;&lt;div readability=&quot;135.29672707601&quot;&gt;
&lt;p&gt;The Rust team is happy to announce a new version of Rust, 1.40.0. Rust is a programming language that is empowering everyone to build reliable and efficient software.&lt;/p&gt;
&lt;p&gt;If you have a previous version of Rust installed via rustup, getting Rust 1.40.0 is as easy as:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-console&quot;&gt;rustup update stable
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;If you don't have it already, you can &lt;a href=&quot;https://www.rust-lang.org/install.html&quot;&gt;get &lt;code&gt;rustup&lt;/code&gt;&lt;/a&gt; from the appropriate page on our website, and check out the &lt;a href=&quot;https://github.com/rust-lang/rust/blob/master/RELEASES.md#version-1400-2019-12-19&quot;&gt;detailed release notes for 1.40.0&lt;/a&gt; on GitHub.&lt;/p&gt;
&lt;h2&gt;What's in 1.40.0 stable&lt;/h2&gt;
&lt;p&gt;The highlights of Rust 1.40.0 include &lt;code&gt;#[non_exhaustive]&lt;/code&gt; and improvements to &lt;code&gt;macros!()&lt;/code&gt; and &lt;code&gt;#[attribute]&lt;/code&gt;s. Finally, borrow-check migration warnings have become hard errors in Rust 2015. See the &lt;a href=&quot;https://github.com/rust-lang/rust/blob/master/RELEASES.md#version-1400-2019-12-19&quot;&gt;detailed release notes&lt;/a&gt; for additional information.&lt;/p&gt;
&lt;h3&gt;&lt;code&gt;#[non_exhaustive]&lt;/code&gt; structs, enums, and variants&lt;/h3&gt;
&lt;p&gt;Suppose you're a library author of a crate &lt;code&gt;alpha&lt;/code&gt;, that has a &lt;code&gt;pub struct Foo&lt;/code&gt;. You would like to make &lt;code&gt;alpha::Foo&lt;/code&gt;'s fields &lt;code&gt;pub&lt;/code&gt; as well, but you're not sure whether you might be adding more fields to &lt;code&gt;Foo&lt;/code&gt; in future releases. So now you have a dilemma: either you make the fields private, with the drawbacks that follow, or you risk users depending on the exact fields, breaking their code when you add a new one. Rust 1.40.0 introduces a way to break the logjam: &lt;code&gt;#[non_exhaustive]&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The attribute &lt;code&gt;#[non_exhaustive]&lt;/code&gt;, when attached to a &lt;code&gt;struct&lt;/code&gt; or the variant of an &lt;code&gt;enum&lt;/code&gt;, will prevent code outside of the crate defining it from constructing said &lt;code&gt;struct&lt;/code&gt; or variant. To avoid future breakage, other crates are also prevented from exhaustively matching on the fields. The following example illustrates errors in &lt;code&gt;beta&lt;/code&gt; which depends on &lt;code&gt;alpha&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;// alpha/lib.rs:

#[non_exhaustive]
struct Foo {
    pub a: bool,
}

enum Bar {
    #[non_exhaustive]
    Variant { b: u8 }
}

fn make_foo() -&amp;gt; Foo { ... }
fn make_bar() -&amp;gt; Bar { ... }

// beta/lib.rs:

let x = Foo { a: true }; //~ ERROR
let Foo { a } = make_foo(); //~ ERROR

// `beta` will still compile when more fields are added.
let Foo { a, .. } = make_foo(); //~ OK


let x = Bar::Variant { b: 42 }; //~ ERROR
let Bar::Variant { b } = make_bar(); //~ ERROR
let Bar::Variant { b, .. } = make_bar(); //~ OK
                   // -- `beta` will still compile...
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;What happens behind the scenes is that the visibility of the constructors for a &lt;code&gt;#[non_exhaustive]&lt;/code&gt; &lt;code&gt;struct&lt;/code&gt; or &lt;code&gt;enum&lt;/code&gt; variant is lowered to &lt;code&gt;pub(crate)&lt;/code&gt;, preventing access outside the crate defining it.&lt;/p&gt;
&lt;p&gt;A perhaps more important aspect of &lt;code&gt;#[non_exhaustive]&lt;/code&gt; is that it can also be attached to &lt;code&gt;enum&lt;/code&gt;s themselves. An example, taken from the standard library, is &lt;a href=&quot;https://doc.rust-lang.org/std/sync/atomic/enum.Ordering.html&quot;&gt;&lt;code&gt;Ordering&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;#[non_exhaustive]
pub enum Ordering { Relaxed, Release, Acquire, AcqRel, SeqCst }
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;The purpose of &lt;code&gt;#[non_exhaustive]&lt;/code&gt; in this context is to ensure that more variants can be added over time. This is achieved by preventing other crates from exhaustively pattern &lt;code&gt;match&lt;/code&gt;-ing on &lt;code&gt;Ordering&lt;/code&gt;. That is, the compiler would reject:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;match ordering {
    // This is an error, since if a new variant is added,
    // this would suddenly break on an upgrade of the compiler.
    Relaxed | Release | Acquire | AcqRel | SeqCst =&amp;gt; {
        /* logic */
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Instead, other crates need to account for the possibility of more variants by adding a wildcard arm using e.g. &lt;code&gt;_&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;match ordering {
    Relaxed | Release | Acquire | AcqRel | SeqCst =&amp;gt; { /* ... */ }
    // OK; if more variants are added, nothing will break.
    _ =&amp;gt; { /* logic */ }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;For more details on the &lt;code&gt;#[non_exhaustive]&lt;/code&gt; attribute, see the &lt;a href=&quot;https://github.com/rust-lang/rust/issues/44109#issuecomment-533356866&quot;&gt;stabilization report&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Macro and attribute improvements&lt;/h3&gt;
&lt;p&gt;In 1.40.0, we have introduced several improvements to macros and attributes, including:&lt;/p&gt;
&lt;ul readability=&quot;10.922495274102&quot;&gt;&lt;li readability=&quot;2.0625&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/rust-lang/rust/pull/63931/#issuecomment-526362396&quot;&gt;Calling procedural macros &lt;code&gt;mac!()&lt;/code&gt; in type contexts.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;For example, you may write &lt;code&gt;type Foo = expand_to_type!(bar);&lt;/code&gt; where &lt;code&gt;expand_to_type&lt;/code&gt; would be a procedural macro.&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;7.6931506849315&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/rust-lang/rust/pull/63931/#issuecomment-526362396&quot;&gt;Macros in &lt;code&gt;extern { ... }&lt;/code&gt; blocks.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This includes &lt;code&gt;bang!()&lt;/code&gt; macros, for example:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;macro_rules! make_item { ($name:ident) =&amp;gt; { fn $name(); } }

extern {
    make_item!(alpha);
    make_item!(beta);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Procedural macro attributes on items in &lt;a href=&quot;https://doc.rust-lang.org/nightly/reference/items/external-blocks.html&quot;&gt;&lt;code&gt;extern { ... }&lt;/code&gt; blocks&lt;/a&gt; are now also supported:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;extern &quot;C&quot; {
    // Let's assume that this expands to `fn foo();`.
    #[my_identity_macro]
    fn foo();
}
&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;li readability=&quot;2.3076923076923&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/rust-lang/rust/pull/64035#issuecomment-533890826&quot;&gt;Generating &lt;code&gt;macro_rules!&lt;/code&gt; items in procedural macros.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Function-like (&lt;code&gt;mac!()&lt;/code&gt;) and attribute (&lt;code&gt;#[mac]&lt;/code&gt;) macros can both now generate &lt;code&gt;macro_rules!&lt;/code&gt; items. For details on hygiene, please refer to the attached stabilization report.&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;5.0679611650485&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/rust-lang/rust/pull/63674&quot;&gt;The &lt;code&gt;$m:meta&lt;/code&gt; matcher&lt;/a&gt; supports &lt;a href=&quot;https://github.com/rust-lang/rust/pull/57367#issuecomment-457882109&quot;&gt;arbitrary token-stream values&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;That is, the following is now valid:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;macro_rules! accept_meta { ($m:meta) =&amp;gt; {} }
accept_meta!( my::path );
accept_meta!( my::path = &quot;lit&quot; );
accept_meta!( my::path ( a b c ) );
accept_meta!( my::path [ a b c ] );
accept_meta!( my::path { a b c } );
&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h3&gt;Borrow check migration warnings are hard errors in Rust 2015&lt;/h3&gt;
&lt;p&gt;In the 1.35.0 release, &lt;a href=&quot;https://blog.rust-lang.org/2019/07/04/Rust-1.36.0.html#nll-for-rust-2015&quot;&gt;we announced&lt;/a&gt; that NLL had come to Rust 2015 after first being released for the 2018 edition in &lt;a href=&quot;https://blog.rust-lang.org/2018/12/06/Rust-1.31-and-rust-2018.html#non-lexical-lifetimes&quot;&gt;Rust 1.31&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;As we noted back then, the old borrow checker had some bugs which would allow memory unsafety, and the NLL borrow checker fixed them. As these fixes break some stable code, we decided to gradually phase in the errors, by checking if the old borrow checker would accept the program and the NLL checker would reject it. In those cases, the errors would be downgraded to warnings.&lt;/p&gt;
&lt;p&gt;The previous release, Rust 1.39.0, changes these warnings into errors for code using the &lt;a href=&quot;https://github.com/rust-lang/rust/pull/63565&quot;&gt;2018 edition&lt;/a&gt;. Rust 1.40.0 applies the same change for users of the &lt;a href=&quot;https://github.com/rust-lang/rust/pull/64221&quot;&gt;2015 edition&lt;/a&gt;, closing those soundness holes for good. This also allows us to &lt;a href=&quot;https://github.com/rust-lang/rust/pull/64790&quot;&gt;clean up the old code from the compiler&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;If your build breaks due to this change, or you want to learn more, check out &lt;a href=&quot;https://blog.rust-lang.org/2019/11/01/nll-hard-errors.html&quot;&gt;Niko Matsakis's blog post&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;More &lt;code&gt;const fn&lt;/code&gt;s in the standard library&lt;/h3&gt;
&lt;p&gt;With Rust 1.40.0, the following function became &lt;code&gt;const fn&lt;/code&gt;:&lt;/p&gt;
&lt;h3&gt;Additions to the standard library&lt;/h3&gt;
&lt;p&gt;In Rust 1.40.0 the following functions and macros were stabilized:&lt;/p&gt;
&lt;ul readability=&quot;15.219619326501&quot;&gt;&lt;li readability=&quot;1.5208333333333&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https://doc.rust-lang.org/std/macro.todo.html&quot;&gt;&lt;code&gt;todo!()&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;A macro, which is a shorter, more memorable, and convenient version of &lt;a href=&quot;https://doc.rust-lang.org/std/macro.unimplemented.html&quot;&gt;&lt;code&gt;unimplemented!()&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-0.78333333333333&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https://doc.rust-lang.org/std/primitive.slice.html#method.repeat&quot;&gt;&lt;code&gt;slice::repeat&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Creates a &lt;code&gt;Vec&amp;lt;T&amp;gt;&lt;/code&gt; by repeating a slice &lt;code&gt;n&lt;/code&gt; times.&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1.3891213389121&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https://doc.rust-lang.org/std/mem/fn.take.html&quot;&gt;&lt;code&gt;mem::take&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This function &lt;code&gt;take&lt;/code&gt;s the value out of a mutable reference and replaces it with the type's default. This is similar to &lt;a href=&quot;https://doc.rust-lang.org/std/option/enum.Option.html#method.take&quot;&gt;&lt;code&gt;Option::take&lt;/code&gt;&lt;/a&gt; and &lt;a href=&quot;https://doc.rust-lang.org/std/cell/struct.Cell.html#method.take&quot;&gt;&lt;code&gt;Cell::take&lt;/code&gt;&lt;/a&gt; and provides a convenient short-hand for &lt;a href=&quot;https://doc.rust-lang.org/std/mem/fn.replace.html&quot;&gt;&lt;code&gt;mem::replace(&amp;amp;mut dst, Default::default())&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0.59821428571429&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https://doc.rust-lang.org/std/collections/struct.BTreeMap.html#method.get_key_value&quot;&gt;&lt;code&gt;BTreeMap::get_key_value&lt;/code&gt;&lt;/a&gt; and &lt;a href=&quot;https://doc.rust-lang.org/std/collections/struct.HashMap.html#method.get_key_value&quot;&gt;&lt;code&gt;HashMap::get_key_value&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Returns the key-value pair corresponding to the supplied key.&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;5.095406360424&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https://doc.rust-lang.org/std/option/enum.Option.html#method.as_deref&quot;&gt;&lt;code&gt;Option::as_deref&lt;/code&gt;&lt;/a&gt;, &lt;a href=&quot;https://doc.rust-lang.org/std/option/enum.Option.html#method.as_deref_mut&quot;&gt;&lt;code&gt;Option::as_deref_mut&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;These work similarly to &lt;a href=&quot;https://doc.rust-lang.org/std/option/enum.Option.html#method.as_ref&quot;&gt;&lt;code&gt;Option::as_ref&lt;/code&gt;&lt;/a&gt; and &lt;a href=&quot;https://doc.rust-lang.org/std/option/enum.Option.html#method.as_mut&quot;&gt;&lt;code&gt;Option::as_mut&lt;/code&gt;&lt;/a&gt; but also use &lt;a href=&quot;https://doc.rust-lang.org/std/ops/trait.Deref.html&quot;&gt;&lt;code&gt;Deref&lt;/code&gt;&lt;/a&gt; and &lt;a href=&quot;https://doc.rust-lang.org/std/ops/trait.DerefMut.html&quot;&gt;&lt;code&gt;DerefMut&lt;/code&gt;&lt;/a&gt; respectively, so that &lt;code&gt;opt_box.as_deref()&lt;/code&gt; and &lt;code&gt;opt_box.as_deref_mut()&lt;/code&gt;, where &lt;code&gt;opt_box: Option&amp;lt;Box&amp;lt;T&amp;gt;&amp;gt;&lt;/code&gt;, produce an &lt;code&gt;Option&amp;lt;&amp;amp;T&amp;gt;&lt;/code&gt; and &lt;code&gt;Option&amp;lt;&amp;amp;mut T&amp;gt;&lt;/code&gt; respectively.&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https://doc.rust-lang.org/std/option/enum.Option.html#method.flatten&quot;&gt;&lt;code&gt;Option::flatten&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This function flattens an &lt;code&gt;Option&amp;lt;Option&amp;lt;T&amp;gt;&amp;gt;&lt;/code&gt; to &lt;code&gt;Option&amp;lt;T&amp;gt;&lt;/code&gt; producing &lt;code&gt;Some(x)&lt;/code&gt; for &lt;code&gt;Some(Some(x))&lt;/code&gt; and &lt;code&gt;None&lt;/code&gt; otherwise. The function is similar to &lt;a href=&quot;https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.flatten&quot;&gt;&lt;code&gt;Iterator::flatten&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-0.79166666666667&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https://doc.rust-lang.org/std/net/struct.UdpSocket.html#method.peer_addr&quot;&gt;&lt;code&gt;UdpSocket::peer_addr&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Returns the socket address of the remote peer this socket was connected to.&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;8.6153846153846&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https://doc.rust-lang.org/std/primitive.f32.html#method.to_be_bytes&quot;&gt;&lt;code&gt;{f32,f64}::to_be_bytes&lt;/code&gt;&lt;/a&gt;, &lt;a href=&quot;https://doc.rust-lang.org/std/primitive.f32.html#method.to_le_bytes&quot;&gt;&lt;code&gt;{f32,f64}::to_le_bytes&lt;/code&gt;&lt;/a&gt;,&lt;a href=&quot;https://doc.rust-lang.org/std/primitive.f32.html#method.to_ne_bytes&quot;&gt;&lt;code&gt;{f32,f64}::to_ne_bytes&lt;/code&gt;&lt;/a&gt;, &lt;a href=&quot;https://doc.rust-lang.org/std/primitive.f32.html#method.from_be_bytes&quot;&gt;&lt;code&gt;{f32,f64}::from_be_bytes&lt;/code&gt;&lt;/a&gt;, &lt;a href=&quot;https://doc.rust-lang.org/std/primitive.f32.html#method.from_le_bytes&quot;&gt;&lt;code&gt;{f32,f64}::from_le_bytes&lt;/code&gt;&lt;/a&gt;, and &lt;a href=&quot;https://doc.rust-lang.org/std/primitive.f32.html#method.from_ne_bytes&quot;&gt;&lt;code&gt;{f32,f64}::from_ne_bytes&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Return the memory representation of the floating point number as a byte array in big-endian (network), little-endian, and native-endian byte order.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;h3&gt;Other changes&lt;/h3&gt;
&lt;p&gt;There are other changes in the Rust 1.40.0 release: check out what changed in &lt;a href=&quot;https://github.com/rust-lang/rust/blob/master/RELEASES.md#version-1400-2019-12-19&quot;&gt;Rust&lt;/a&gt;, &lt;a href=&quot;https://github.com/rust-lang/cargo/blob/master/CHANGELOG.md#cargo-140-2019-12-19&quot;&gt;Cargo&lt;/a&gt;, and &lt;a href=&quot;https://github.com/rust-lang/rust-clippy/blob/master/CHANGELOG.md#rust-140&quot;&gt;Clippy&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Please also see the &lt;a href=&quot;https://github.com/rust-lang/rust/blob/stable/RELEASES.md#compatibility-notes&quot;&gt;compatibility notes&lt;/a&gt; to check if you're affected by those changes.&lt;/p&gt;
&lt;h2&gt;Contributors to 1.40.0&lt;/h2&gt;
&lt;p&gt;Many people came together to create Rust 1.40.0. We couldn't have done it without all of you. &lt;a href=&quot;https://thanks.rust-lang.org/rust/1.40.0/&quot;&gt;Thanks!&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;</description>
<pubDate>Thu, 19 Dec 2019 16:02:41 +0000</pubDate>
<dc:creator>mark-simulacrum</dc:creator>
<og:title>Announcing Rust 1.40.0 | Rust Blog</og:title>
<og:description>Empowering everyone to build reliable and efficient software.</og:description>
<og:image>https://www.rust-lang.org/static/images/rust-social-wide.jpg</og:image>
<og:type>website</og:type>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://blog.rust-lang.org/2019/12/19/Rust-1.40.0.html</dc:identifier>
</item>
<item>
<title>Welcoming Mozilla to Matrix</title>
<link>https://matrix.org/blog/2019/12/19/welcoming-mozilla-to-matrix/</link>
<guid isPermaLink="true" >https://matrix.org/blog/2019/12/19/welcoming-mozilla-to-matrix/</guid>
<description>&lt;p&gt;Hi all,&lt;/p&gt;
&lt;p&gt;We’re incredibly excited that &lt;a href=&quot;https://discourse.mozilla.org/t/synchronous-messaging-at-mozilla-the-decision/50620&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Mozilla just announced&lt;/a&gt; that they’ve selected Matrix as the successor to IRC as the communication platform for the public Mozilla community!! This comes off the back of a &lt;a href=&quot;https://discourse.mozilla.org/t/synchronous-messaging-at-mozilla-trial-servers-feedback/44871&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;formal 1-month trial&lt;/a&gt; in September to evaluate various options side by side, and now New Vector will be helping Mozilla get their homeserver up and running on the &lt;a href=&quot;https://modular.im&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Modular.im&lt;/a&gt; hosting platform over the coming weeks - and federating openly with the rest of the open global Matrix network! :)&lt;/p&gt;
&lt;p&gt;We have always been massive fans of Mozilla: they have been an excellent role model as champions of the open web, open standards, not to mention open source - and it’s fair to say that Mozilla has been a major inspiration to how Matrix has evolved (Riot aspires to be to Matrix what Firefox is to the Web: a flagship open source app which provides an accessible friendly interface into an open standard network). It’s very reassuring to see that Mozillians from the trial recognise the alignment and have converged on Matrix as the way forward - it’s a massive win for the open web and standards-based communication in general.&lt;/p&gt;
&lt;p&gt;It’s worth noting that we’ve also always been massive fans of IRC, and Matrix is unashamedly derivative of IRC in capabilities and culture, while broadening the scope to decentralised synchronisation and relaying of any kind of data. For context, the genesis of the team which eventually spawned Matrix was on a student IRC server ~20 years ago - and subsequently everything we’ve worked on (up to Matrix) was coordinated exclusively through IRC. We even used to give conference talks on how to run your project/company off IRC. I can’t really overstate how fundamental IRC is to our history - and we still keep our private IRC network online for old time’s sake (albeit bridged to Matrix). The very first protocol bridge we built for Matrix back in 2015 was for IRC - and Moznet and Freenode were the first public bridges we turned on. As of right now, &lt;code class=&quot;language-text&quot;&gt;/stats u&lt;/code&gt; on Moznet says that there are 4950 connected users, of which 1724 (so 35%) are actually Matrix users connected via the Moznet bridge - effectively using Matrix as a big decentralised IRC bouncer in the sky.&lt;/p&gt;
&lt;p&gt;All of this is to say is that we deeply understand how dependent Mozilla has been on IRC over the years, and that we built Matrix to be a worthy successor which tries to capture all the best bits of IRC while providing much richer primitives (E2E encryption, openly federated decentralised chatrooms, arbitrary data sync, HTTP API, VoIP, etc). It’s also worth noting that even though Moznet is being turned off, &lt;a href=&quot;https://github.com/matrix-org/matrix-ircd&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;matrix-ircd&lt;/a&gt; exists as a very promising project that exposes &lt;em&gt;any&lt;/em&gt; Matrix homeserver as an ircd - so for all you IRC die-hards, Moznet can absolutely live on in the afterlife! (matrix-ircd is still alpha right now, but it’s a relatively modest amount of Rust and PRs are &lt;em&gt;very&lt;/em&gt; welcome - if you grok IRC it should be a really really fun project to contribute to).&lt;/p&gt;
&lt;p&gt;In other news, the trial in September was an amazing opportunity to gather feedback first-hand from a wide range of Mozillians as they gave Riot and Matrix a spin, often for the first time - and it was a lot of fun to take that feedback and rapidly act on it to improve the app. For instance, having direct expert feedback on our screenreader support meant that we were able to &lt;a href=&quot;https://blog.riot.im/riot-web-1-5/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;radically improve our accessibility&lt;/a&gt;, and we’ve kept up the momentum on this since the trial (regardless of the outcome) with Mozilla &amp;amp; Riot devs hacking together with the aim of making Riot the most accessible communication app out there without exception. Huge thanks to Marco Zehe for all his guidance (and PRs), as well as the rest of &lt;a href=&quot;https://matrix.to/#/#a11y:matrix.org&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;#a11y:matrix.org&lt;/a&gt;!&lt;/p&gt;
&lt;p&gt;Meanwhile, Riot’s UX continues to mature in general. One of our two primary projects right now is to improve First Time User Experience (&lt;a href=&quot;https://github.com/vector-im/riot-web/issues?utf8=%E2%9C%93&amp;amp;q=is%3Aissue+is%3Aopen+label%3Aproject%3AFtue+&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;FTUE&lt;/a&gt;) - i.e. making our UX as smooth and polished and predictable as possible, especially as seen by new users. This project had just kicked off in September as the Mozilla trial began, and some of the major improvements to the Room Directory and Room Creation flow which subsequently landed in Riot/Web 1.5 were prioritised directly based on Mozillian feedback. Since the trial we’ve been focusing more on our other primary project (getting E2E Encryption enabled by default), but we will be back on FTUE asap - particularly to incorporate all the feedback we anticipate as Mozilla goes live! We are absolutely determined for Riot to have as good if not better UX than the likes of Slack or Discord. New Vector is also &lt;a href=&quot;https://apply.workable.com/new-vector/j/6CB817C79E/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;actively hiring more designers&lt;/a&gt; to come work fulltime on Riot’s UI and UX as we shift Riot’s focus from being developer-led to design-led - if this sounds interesting, please get in touch! And finally, everything is of course open source and PRs are genuinely appreciated to keep Riot heading in the right direction (please just check first if they change the UI/UX).&lt;/p&gt;
&lt;p&gt;Finally, in case you’re dreading having to use a graphical chat client like Riot, the Mozilla instance will of course be accessible to any &lt;a href=&quot;https://matrix.org/clients/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Matrix client&lt;/a&gt; that floats your boat - for instance, &lt;a href=&quot;https://github.com/poljar/weechat-matrix&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;weechat-matrix&lt;/a&gt; also got a spurt of development to support Mozilla IAM single-sign-on so that commandline junkies can get their fix too. (It’s worth noting that weechat-matrix really is an incredibly fully featured and usable client - complete with full end-to-end encryption support. If you haven’t tried it, you’re missing out).&lt;/p&gt;
&lt;p&gt;So, to conclude: it has been indescribably valuable to have the expertise and enthusiasm of the Mozilla community in contributing feedback and fixes to Riot (and even &lt;a href=&quot;https://github.com/bnjbvr/botzilla&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;building new Matrix bots&lt;/a&gt;!). Huge thanks to everyone who invested their time and energy participating in the trial and for their trust in concluding that Matrix was the way forward. We see this as a massive responsibility and honour to help power the wider Mozilla community, and we will do everything we can to make it as successful as conceivably possible :)&lt;/p&gt;
&lt;p&gt;To the future of an open web, with even more open communications!&lt;/p&gt;
&lt;p&gt;Matthew, Amandine &amp;amp; the whole Matrix &amp;amp; Riot team :)&lt;/p&gt;
&lt;p&gt;P.S. we’ve come a long way since &lt;a href=&quot;https://discourse.mozilla.org/t/matrix-and-irc-mozillians-custom-client/2911/7&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;Matrix was first proposed&lt;/a&gt; for Mozilla :D&lt;/p&gt;
</description>
<pubDate>Thu, 19 Dec 2019 15:43:08 +0000</pubDate>
<dc:creator>Arathorn</dc:creator>
<og:url>https://matrix.org/blog/2019/12/19/welcoming-mozilla-to-matrix</og:url>
<og:type>article</og:type>
<og:title>Welcoming Mozilla to Matrix! | Matrix.org</og:title>
<og:image>https://matrix.org/blog/img/2019-12-19-mozilla.png</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://matrix.org/blog/2019/12/19/welcoming-mozilla-to-matrix/</dc:identifier>
</item>
<item>
<title>Synchronous Messaging at Mozilla: The Decision</title>
<link>https://discourse.mozilla.org/t/synchronous-messaging-at-mozilla-the-decision/50620</link>
<guid isPermaLink="true" >https://discourse.mozilla.org/t/synchronous-messaging-at-mozilla-the-decision/50620</guid>
<description>&lt;div class=&quot;post&quot; itemprop=&quot;articleBody&quot;&gt;
&lt;p&gt;You can scroll down to the punchline if you like, but I want to start by thanking the Mozilla community, contributors, industry partners and colleagues alike, for the work everyone has put into this. Hundreds of invested people have weighed in on our hard requirements, nice-to-haves and long term goals, and tested our candidates with an eye not just to our immediate technical and community needs but to Mozilla’s mission, our tools as an expression of our values and a vision of a better future. Having so many people show up and give a damn has a rewarding, inspiring experience, and I’m grateful for the trust and patience everyone involved has shown us in helping us get this over the line.&lt;/p&gt;
&lt;p&gt;We knew from the beginning that this was going to be a hard process; that it had to be not just transparent but open, not just legitimate but &lt;em&gt;seen to be&lt;/em&gt; legitimate, that we had to meet our hard operational requirements while staying true to our values in the process. Today, after almost a year of research, consulting, gathering requirements, testing candidate stacks and distilling everything we’ve learned in the process down to the essentials, I think we’ve accomplished that.&lt;/p&gt;
&lt;p&gt;I am delighted and honored to say that we have one candidate that unambiguously meets our institutional and operational needs: &lt;strong&gt;we have decided to replace IRC with Riot/Matrix, hosted by Modular.IM.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;While all of the candidates proved to be excellent team collaboration and communication tools, Riot/Matrix has distinguished itself as an excellent &lt;em&gt;open community collaboration&lt;/em&gt; tool, with robust support for accessibility and community safety that offers more agency and autonomy to the participants, teams and communities that make up Mozilla.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Community Safety&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;That Matrix gives individual community members effective tools for both reporting violations of Mozilla’s &lt;a href=&quot;https://www.mozilla.org/en-US/about/governance/policies/participation/&quot;&gt;Community Participation Guidelines&lt;/a&gt; (“CPG”) and securing their own safety weighed heavily in our decision-making. While all of the candidates offered robust, mature APIs that would meet the needs of our developer, infrastructure and developer productivity teams, Riot/Matrix was the only candidate that included CPG reporting and enforcement tooling as a standard part of their offering, offering individual users the opportunity to raise their own shields on their own terms as well as supporting the general health and safety of the community.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Accessibility&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Riot/Matrix was also the preferred choice of our accessibility team. Mozilla is committed to building a company, a community and a web without second class citizens, and from the beginning the accessibility team’s endorsement was a hard requirement for this process.&lt;/p&gt;
&lt;p&gt;Speaking personally, it is an enormous relief that we weren’t forced to make “pick-two” sort of choice between community safety, developer support and accessibility, and it is a testament to the hard work the Matrix team has done that we can have all three.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Next Steps&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Now that we’ve made our decision and formalized our relationship with the Modular.IM team, we’ll be standing up the new service in January. Soon after that we’ll start migrating tooling and forums over to the new system, and as previously mentioned no later than March of next year, we’ll shut down &lt;a href=&quot;http://IRC.mozilla.org&quot;&gt;IRC.mozilla.org&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;We’ll have a wider announcement out shortly, but I wanted you to hear it first. Thank you all for your help getting us here; I’m looking forward to seeing you on the new system.&lt;/p&gt;
&lt;/div&gt;&lt;div class=&quot;post&quot; itemprop=&quot;articleBody&quot;&gt;
&lt;p&gt;Thanks &lt;a class=&quot;mention&quot; href=&quot;https://discourse.mozilla.org/u/mhoye&quot;&gt;@mhoye&lt;/a&gt; for the update!&lt;/p&gt;
&lt;p&gt;First I want to appreciate your role leading this project and transition, it’s a tremendous effort to get everyone in the same page and run something like this, thanks so much.&lt;/p&gt;
&lt;p&gt;Second, I’m super exited about the new tool and really looking forward to use it and see communities and team adopting it.&lt;/p&gt;
&lt;p&gt;I believe it will provide our communities, teams and volunteers huge value, a modern messaging tool that enables a safe space for everyone, everywhere.&lt;/p&gt;
&lt;p&gt;Cheer.&lt;/p&gt;
&lt;p&gt;Update: It seems &lt;a href=&quot;https://matrix.org/blog/2019/12/19/welcoming-mozilla-to-matrix/&quot;&gt;the team over Matrix is as well exited about this&lt;/a&gt; &lt;img src=&quot;https://cdn.discourse-prod.itsre-apps.mozit.cloud/images/emoji/twitter/smiley.png?v=9&quot; title=&quot;:smiley:&quot; class=&quot;emoji&quot; alt=&quot;:smiley:&quot;/&gt;&lt;/p&gt;
&lt;/div&gt;&lt;div class=&quot;post&quot; itemprop=&quot;articleBody&quot;&gt;
&lt;p&gt;That is awesome news - the fact that we have a decision as much as the process that was followed and it’s openness (many, many thanks to &lt;a class=&quot;mention&quot; href=&quot;https://discourse.mozilla.org/u/mhoye&quot;&gt;@mhoye&lt;/a&gt; for that) as well as the result being a piece of FLOSS that can still fulfill all the criteria that were set. This is IMHO a huge victory for the open source movement (which Mozilla helped to grow in its infancy 20+ years ago) as the closed-source options were definitely tempting, even more with a lot of Mozilla being on Slack right now.&lt;br/&gt;I’m looking forward to participating more in the real-time channels again one this fully launches (as my personal Slack policy is to only use it when I have to)! &lt;img src=&quot;https://cdn.discourse-prod.itsre-apps.mozit.cloud/images/emoji/twitter/smiley.png?v=9&quot; title=&quot;:smiley:&quot; class=&quot;emoji&quot; alt=&quot;:smiley:&quot;/&gt;&lt;/p&gt;
&lt;/div&gt;&lt;div class=&quot;post&quot; itemprop=&quot;articleBody&quot;&gt;
&lt;p&gt;This is awesome! Riot is the 21st century IRC.&lt;/p&gt;
&lt;/div&gt;&lt;div class=&quot;post&quot; itemprop=&quot;articleBody&quot;&gt;
&lt;p&gt;Really good to hear you went for matrix. I’ve been using it for close to a year now and love the technology so far.&lt;/p&gt;
&lt;p&gt;I was a little surprised to read on the &lt;a href=&quot;http://Matrix.org&quot;&gt;Matrix.org&lt;/a&gt; blog that the Mozilla instance will be federated (at least partially). If that is true, this is even cooler - I didn’t expect a federated instance from Mozilla.&lt;/p&gt;
&lt;/div&gt;&lt;div class=&quot;post&quot; itemprop=&quot;articleBody&quot;&gt;
&lt;p&gt;Will there be an option for those of us who prefer IRC? For example, an IRC bridge to this new web-based service?&lt;/p&gt;
&lt;/div&gt;&lt;div class=&quot;post&quot; itemprop=&quot;articleBody&quot;&gt;
&lt;p&gt;Hi &lt;a class=&quot;mention&quot; href=&quot;https://discourse.mozilla.org/u/mhoye&quot;&gt;@mhoye&lt;/a&gt;,&lt;/p&gt;
&lt;p&gt;thanks for leading the immensely important infrastructural effort for Mozilla’s communities. Your collaboration style including consultation, alignment, decision-taking, and broad &amp;amp; deep listening stands unrivaled.&lt;/p&gt;
&lt;p&gt;This decision will most likely impact generations of Mozillians to come. Thank you for handling it the way you did.&lt;/p&gt;
&lt;p&gt;I am looking forward to signing up to the new service in January.&lt;/p&gt;
&lt;p&gt;Onwards,&lt;br/&gt;Henrik&lt;/p&gt;
&lt;/div&gt;&lt;div class=&quot;post&quot; itemprop=&quot;articleBody&quot;&gt;
&lt;aside class=&quot;quote no-group&quot; data-post=&quot;6&quot; data-topic=&quot;50620&quot; data-full=&quot;true&quot;&gt;&lt;div class=&quot;title&quot;&gt;

&lt;img alt=&quot;&quot; width=&quot;20&quot; height=&quot;20&quot; src=&quot;https://cdn.discourse-prod.itsre-apps.mozit.cloud/letter_avatar/johnmh/40/5_MOZILLA_1_02a1aaf4b66063a8f4cce7151aec9469.png&quot; class=&quot;avatar&quot;/&gt; JohnMH:&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;Will there be an option for those of us who prefer IRC? For example, an IRC bridge to this new web-based service?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/aside&gt;&lt;p&gt;The &lt;a href=&quot;https://matrix.org/blog/2019/12/19/welcoming-mozilla-to-matrix/&quot; rel=&quot;nofollow noopener&quot;&gt;Matrix blog post&lt;/a&gt; mentions one:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;It’s also worth noting that even though Moznet is being turned off, &lt;a href=&quot;https://github.com/matrix-org/matrix-ircd&quot; rel=&quot;nofollow noopener&quot;&gt;matrix-ircd&lt;/a&gt; exists as a very promising project that exposes &lt;em&gt;any&lt;/em&gt; Matrix homeserver as an ircd - so for all you IRC die-hards, Moznet can absolutely live on in the afterlife!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;&lt;div class=&quot;post&quot; itemprop=&quot;articleBody&quot;&gt;
&lt;p&gt;Nice. I do hope we’ll have something like that available, so that those of us who prefer IRC don’t have to use the web-based stuff. It’s unfortunate that a change from such a simple protocol has to take place simply because a few people had issues using IRC modes for moderation, but I guess that’s the way things are headed these days. The times sure are changing.&lt;/p&gt;
&lt;/div&gt;&lt;div class=&quot;post&quot; itemprop=&quot;articleBody&quot;&gt;
&lt;p&gt;I fear you might be slightly connfused. Matrix is no more web-based than IRC is. Riot is a web-based Matrix client, same as Mibbit is to IRC.&lt;/p&gt;
&lt;p&gt;Though most are in an alpha/beta state, there are a lot more Mtrix clients than this one. Here is a &lt;a href=&quot;https://matrix.org/clients/&quot; rel=&quot;nofollow noopener&quot;&gt;partial list&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;</description>
<pubDate>Thu, 19 Dec 2019 15:35:54 +0000</pubDate>
<dc:creator>gsnedders</dc:creator>
<og:image>https://discourse-prod-uploads-81679984178418.s3.dualstack.us-west-2.amazonaws.com/original/3X/1/e/1e9bf330a7eb757e98e400cdc695a6037f2ce9a0.png</og:image>
<og:url>https://discourse.mozilla.org/t/synchronous-messaging-at-mozilla-the-decision/50620?_escaped_fragment_=</og:url>
<og:title>Synchronous Messaging at Mozilla: The Decision</og:title>
<og:description>You can scroll down to the punchline if you like, but I want to start by thanking the Mozilla community, contributors, industry partners and colleagues alike, for the work everyone has put into this. Hundreds of invested people have weighed in on our hard requirements, nice-to-haves and long term goals, and tested our candidates with an eye not just to our immediate technical and community needs but to Mozilla’s mission, our tools as an expression of our values and a vision of a better future. H...</og:description>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://discourse.mozilla.org/t/synchronous-messaging-at-mozilla-the-decision/50620?_escaped_fragment_=</dc:identifier>
</item>
<item>
<title>Almost everything on computers is perceptually slower than it was in 1983 (2017)</title>
<link>https://twitter.com/gravislizard/status/927593460642615296</link>
<guid isPermaLink="true" >https://twitter.com/gravislizard/status/927593460642615296</guid>
<description>[unable to retrieve full-text content]
&lt;p&gt;Article URL: &lt;a href=&quot;https://twitter.com/gravislizard/status/927593460642615296&quot;&gt;https://twitter.com/gravislizard/status/927593460642615296&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Comments URL: &lt;a href=&quot;https://news.ycombinator.com/item?id=21835417&quot;&gt;https://news.ycombinator.com/item?id=21835417&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Points: 567&lt;/p&gt;
&lt;p&gt;# Comments: 391&lt;/p&gt;
</description>
<pubDate>Thu, 19 Dec 2019 15:00:52 +0000</pubDate>
<dc:creator>zdw</dc:creator>
<dc:format>text/html</dc:format>
<dc:identifier>https://mobile.twitter.com/gravislizard/status/927593460642615296</dc:identifier>
</item>
<item>
<title>The Amazon Premium</title>
<link>http://calpaterson.com/amazon-premium.html</link>
<guid isPermaLink="true" >http://calpaterson.com/amazon-premium.html</guid>
<description>&lt;p class=&quot;pretty-date&quot;&gt;December 2019&lt;/p&gt;
&lt;p id=&quot;article-description&quot;&gt;How the biggest cloud companies deliver the worst value&lt;/p&gt;
&lt;hr/&gt;&lt;h2&gt;Hypothesis&lt;/h2&gt;
&lt;p&gt;Amazon is probably the largest cloud services company in the world. Many people (especially in larger businesses) are so certain that they receive good value from Amazon Web Services that they do not even trouble themselves to evaluate alternatives.&lt;/p&gt;
&lt;p&gt;I personally doubt that Amazon provide good value, even for highly fungible (and so presumably highly competitive) resources like virtual machines (&quot;EC2&quot; in AWSese) and object storage (&quot;S3&quot;).&lt;/p&gt;
&lt;h2&gt;Method&lt;/h2&gt;
&lt;ol readability=&quot;7.5&quot;&gt;&lt;li readability=&quot;11&quot;&gt;
&lt;p&gt;I will compare virtual machine and object storage pricing for the following:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Amazon&lt;/li&gt;
&lt;li&gt;Google&lt;/li&gt;
&lt;li&gt;Microsoft (Azure)&lt;/li&gt;
&lt;li&gt;DigitalOcean&lt;/li&gt;
&lt;li&gt;Linode&lt;/li&gt;
&lt;li&gt;OVH&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;For virtual machines I will approximate the following spec:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;8 GB of RAM&lt;/li&gt;
&lt;li&gt;100 GB of local disk&lt;/li&gt;
&lt;li&gt;2 CPU cores&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;My reasoning is that this is about the smallest useful machine size for a production server - certainly the smallest machine that any commercial operation would use for anything important. The expectation is that prices scale roughly linearly upwards from this machine size.&lt;sup id=&quot;fnref:scale-down&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Where it is difficult to find exact equivalents across ranges I will have to club together instances that are slightly different. I will try to minimise these differences.&lt;/p&gt;
&lt;p&gt;For file storage (aka &quot;object storage&quot; aka &quot;Amazon S3&quot;) I will compare the price per terabyte because that gives more human-readable units.&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;Prices will be converted into USD for comparison purposes.&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;All prices will be for services provided in Western Europe - that means virtual machines or files are hosted somewhere between Ireland and Germany.&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;All virtual machines will be x86 based.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;h2&gt;Results&lt;/h2&gt;
&lt;p&gt;(Follow footnotes for more specifics and links).&lt;/p&gt;
&lt;h3&gt;Virtual machines&lt;sup id=&quot;fnref:vms&quot;/&gt;&lt;/h3&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Provider&lt;/th&gt;
&lt;th&gt;Machine class name&lt;/th&gt;
&lt;th&gt;Machine spec&lt;/th&gt;
&lt;th&gt;Price per month&lt;sup id=&quot;fnref:month&quot;/&gt; USD&lt;/th&gt;
&lt;th&gt;Price per month (native)&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody readability=&quot;1&quot;&gt;&lt;tr&gt;&lt;td&gt;Amazon&lt;/td&gt;
&lt;td&gt;t3a.large&lt;/td&gt;
&lt;td&gt;8GB, 2 core&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;$71&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;$59.74 + $11 USD for EBS&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Google&lt;/td&gt;
&lt;td&gt;n2-standard-2&lt;/td&gt;
&lt;td&gt;8GB, 2 core&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;$62&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;$62.37 + $4 for disk&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Azure&lt;/td&gt;
&lt;td&gt;D2 v3&lt;/td&gt;
&lt;td&gt;8GB, 2 core&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;$93&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;$87.60 + $5.89 for disk&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;DigitalOcean&lt;/td&gt;
&lt;td&gt;&quot;8 GB&quot;&lt;/td&gt;
&lt;td&gt;8GB, 4 core&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;$40&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;$40&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Linode&lt;/td&gt;
&lt;td&gt;&quot;8 GB&quot;&lt;/td&gt;
&lt;td&gt;8GB, 4 core&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;$40&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;$40&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;OVH&lt;/td&gt;
&lt;td&gt;b2-7&lt;/td&gt;
&lt;td&gt;7GB, 2 core&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;$27&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;22 EUR + 2 EUR for extra disk&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3&gt;Object storage&lt;sup id=&quot;fnref:object-storage&quot;/&gt;&lt;/h3&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Provider&lt;/th&gt;
&lt;th&gt;Price per TB/month USD&lt;/th&gt;
&lt;th&gt;Price per GB (native)&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody readability=&quot;2&quot;&gt;&lt;tr&gt;&lt;td&gt;Amazon&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;$23&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;$0.023&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Google&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;$23&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;$0.023&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Microsoft&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;$20&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;$0.0196&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;DigitalOcean&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;$20&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;$5 base (250 GB) + $0.02 per GB&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;Linode&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;$20&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;$5 base (250 GB) + $0.02 per GB&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;OVH&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;$11&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;0.01 EUR per GB&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h2&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;Big tech providers charge a considerable premium.&lt;/p&gt;
&lt;p&gt;The effect is even more pronounced once you consider that for $40/month, Linode and DigitalOcean provide four cores rather than two and SSD disks rather than HDD (or EBS).&lt;/p&gt;
&lt;h3&gt;Answers to common objections&lt;/h3&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;&quot;$BIG_TECH will give me a volume discount&quot;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I'm sure any cloud provider will negotiate a lower charge for a large customer.&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;&quot;$BIG_TECH will give better service&quot;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I haven't used Azure or AWS for a big project recently but I have used Google Cloud Platform and can confirm that it reflects Google's reputation for poor customer service. Conversely I have used DigitalOcean's support in a personal capacity and found it to be acceptable.&lt;/p&gt;
&lt;p&gt;Incredibly, Google's &lt;a href=&quot;https://cloud.google.com/support/&quot;&gt;&quot;role-based&quot;&lt;/a&gt; pricing requires $100 &lt;em&gt;per user&lt;/em&gt;, &lt;strong&gt;per month&lt;/strong&gt; to raise support requests. This was so expensive that accounts were limited and many senior developers did not have support-ticket privileges. And the quality of the service was poor with constant changeover between agents and confused and cryptic responses to basic questions such as &quot;where has my managed database instance gone?&quot;.&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;&quot;Smaller providers cannot operate at my yottabyte scale&quot;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;There is always someone pretending that their monster tech stack requires 2048 core virtual machines with 8 TB of RAM. I can only take these people at their word but I would point out that many businesses that are customers of AWS are deploying more mortal-sized web services on 2 core virtual machines with 8 GB of RAM.&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;&quot;$BIG_TECH provide a wider array of services that I rely on, such as hosted databases&quot;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It's true that the smaller providers don't provide the full suite of (for example) AWS. They probably never will. However they provide more and more of the most important services. &lt;a href=&quot;https://www.digitalocean.com/products/managed-databases/&quot;&gt;DigitalOcean&lt;/a&gt; and &lt;a href=&quot;https://www.ovh.co.uk/cloud-databases/&quot;&gt;OVH&lt;/a&gt; provide managed databases.&lt;/p&gt;
&lt;p&gt;The point of limiting this comparison to just virtual machines and object storage is that those two services are the easiest for smaller competitors to replicate and so logically should be the most competitively priced. I think it is by itself remarkable that they are not but it is reasonable to suspect that margins are much fatter on nicher services.&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;&quot;This is a naive navigation of the pricing schemes of $BIG_TECH&quot;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It probably is and there are entire fields of consultancy aimed specifically at reducing people's AWS bill (in that way, AWS is reminiscent of some of the darkest Oracle lore). I am a mere professional software developer applying my own knowledge out of sporting interest.&lt;/p&gt;
&lt;p&gt;I suggest that many people will have trouble navigating the complicated pricing schemes created by Amazon/Google/Microsoft and likely will end up paying over the odds. Corporate cloud invoices can make interesting reading. A surprising number of companies fail to take even the most basic steps to reduce their bill, such as committing to 1 year contracts, shutting down unused virtual machines or simply asking for a discount.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;If I have made a serious mistake&lt;/em&gt; in the pricing above: please &lt;a href=&quot;mailto:cal@calpaterson.com&quot;&gt;email me&lt;/a&gt; to tell me and I will correct it (if I agree).&lt;/p&gt;
&lt;h3&gt;Proprietary cloud services are likely even worse&lt;/h3&gt;
&lt;p&gt;Intuitively, I expect that Amazon premium to grow considerably once an organisation starts to adopt proprietary cloud services. Amazon's &quot;serverless&quot; web stack of Lambda, API Gateway, Cloudwatch, DynamoDB and SQS look to be charged at a considerably higher per-hour cost to normal virtual machines and object storage.&lt;/p&gt;
&lt;p&gt;It's also more difficult to switch away: none of the smaller providers have a Lambda-style service yet. &lt;a href=&quot;https://en.wikipedia.org/wiki/Vendor_lock-in&quot;&gt;Vendor-lock in&lt;/a&gt; has historically been an excellent predictor of high prices.&lt;/p&gt;
&lt;p&gt;Worse yet, pricing with the &quot;serverless&quot; stack is harder to predict in advance and (judging by blog posts) most people only seem to learn what the true running cost is after the app in question has been written and deployed.&lt;/p&gt;
&lt;h3&gt;Complicated pricing is correlated with high prices&lt;/h3&gt;
&lt;p&gt;One of the promises of the cloud is that you no longer have to buy physical machines outright and set them up ahead of time - using the cloud you should be able to only pay for what you use.&lt;/p&gt;
&lt;p&gt;Beyond that basic hope, the pricing of big tech providers is hideously complex and that seems to lead to many hidden costs. The more complicated the pricing scheme the more likely the buyer is to find something they never thought about (like &lt;a href=&quot;https://twitter.com/nickwalton00/status/1203370250030350338&quot;&gt;network egress bandwidth&lt;/a&gt;) ruinously expensive.&lt;/p&gt;
&lt;h2&gt;See also&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://toys.lerdorf.com/low-cost-vps-testing&quot;&gt;Rasmus Lerdorf did a comparison&lt;/a&gt; of &quot;low cost&quot; VPS servers, including performance comparison. I haven't done professional work with any of these (clients prefer Amazon Web Services, GCP or Azure) but I have used several of them personally.&lt;/li&gt;
&lt;/ul&gt;
</description>
<pubDate>Thu, 19 Dec 2019 14:54:28 +0000</pubDate>
<dc:creator>elorant</dc:creator>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://calpaterson.com/amazon-premium.html</dc:identifier>
</item>
<item>
<title>How Shopify Manages API Versioning and Breaking Changes</title>
<link>https://engineering.shopify.com/blogs/engineering/shopify-manages-api-versioning-breaking-changes</link>
<guid isPermaLink="true" >https://engineering.shopify.com/blogs/engineering/shopify-manages-api-versioning-breaking-changes</guid>
<description>&lt;p&gt;Earlier this year I took the train from Ottawa to Toronto. While I was waiting in line in the main hall of the station, I noticed a police officer with a detection dog. The police officer was giving the dog plenty of time at each bag or person as they worked and weaved their way back and forth along the lines. The dog would look to his handler for direction, receiving it with the wave of a hand or gesture towards the next target. That’s about the moment I began asking myself a number of questions about dogs… and APIs.&lt;/p&gt;
&lt;p&gt;To understand why, you have to appreciate that the Canadian government recently legalized cannabis. Watching this incredibly well-trained dog work his way up and down the lines, it made me wonder, how did they “update” the dogs once the legislation changed? Can you really retrain or un-train a dog? How easy is it to implement this change, and how long does it take to roll out? So when the officer ended up next to me I couldn’t help but ask,&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ME&lt;/strong&gt;: “Excuse me, I have a question about your dog if that’s alright with you?”&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;OFFICER&lt;/strong&gt;: “Sure, what’s on your mind?”&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ME&lt;/strong&gt;: “How did you retrain the dogs after the legalization of cannabis?”&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;OFFICER&lt;/strong&gt;: “We didn’t. We had to retire them all and train new ones. You really can’t teach an old dog new tricks.“&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ME&lt;/strong&gt;: “Wow, seriously? How long did that take?”&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;OFFICER&lt;/strong&gt;: “Yep, we needed a full THREE YEARS to retire the previous group and introduce a new generation. It was a ton of work.”&lt;/p&gt;
&lt;p&gt;I found myself sitting on the train thinking about how simple it might have been for one layer of government plotting out the changes, to completely underestimate the downstream impact on the K9 unit of the police services. To anyone that didn’t understand the system (dogs), the change sounds simple. Simply detect substances in a set that is now n-1 in size. In reality, due to the way this dog-dependent system works, it requires significant time and effort, and a three-year program to migrate from the old system to the new.&lt;/p&gt;

&lt;p&gt;At Shopify, we have tens of thousands of partners building on our APIs that depend on us to ensure our merchants can run their businesses every day. In April of this year, we &lt;a href=&quot;https://www.shopify.ca/partners/blog/api-versioning-at-shopify&quot; target=&quot;_blank&quot; title=&quot;https://www.shopify.ca/partners/blog/api-versioning-at-shopify&quot; rel=&quot;noopener noreferrer&quot;&gt;released the first official version of our API&lt;/a&gt;. All consumers of our APIs require stability and predictability and our API versioning scheme at Shopify allows us to continue to develop the platform while providing apps with stable API behavior and &lt;strong&gt;predictable timelines for adopting changes&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;The increasing growth of our API RPM quarter over quarter since 2017 overlaid with growth in active API clients&quot; src=&quot;https://cdn.shopify.com/s/files/1/0779/4361/files/GrowthOfAPICallsClients.jpg?v=1576600367&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;The increasing growth of our API RPM quarter over quarter since 2017 overlaid with growth in active API clients&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;To ensure that we provide a stable and predictable API, Shopify releases a new API version every three months at the beginning of the quarter. Version names are date-based to be meaningful and semantically unambiguous (for example, 2020-01).&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;Shopify API Versioning Schedule&quot; src=&quot;https://cdn.shopify.com/s/files/1/0779/4361/files/APIVersioningSchedule.jpg?v=1576601259&quot;/&gt;&lt;/p&gt;
&lt;div&gt;&lt;em&gt;Shopify API Versioning Schedule&lt;/em&gt;&lt;/div&gt;


&lt;p&gt;Although the Platform team is responsible for building the infrastructure, tooling, and systems that enforce our API versioning strategy at Shopify, there are a 1000+ engineers working across Shopify, each with the ability to ship code that can ultimately affect any of our APIs. So how do we think about versioning, and help manage changes to our APIs at scale?&lt;/p&gt;
&lt;p&gt;Our general rule of thumb about versioning is that&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;API versioning is a powerful tool that comes with added responsibility. Break the API contract with the ecosystem only when there are no alternatives or it’s uneconomical to do otherwise.&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;API versions and changes are represented in &lt;a href=&quot;https://engineering.shopify.com/blogs/engineering/deconstructing-monolith-designing-software-maximizes-developer-productivity&quot; target=&quot;_blank&quot; title=&quot;Deconstructing the Monolith: Designing Software that Maximizes Developer Productivity&quot; rel=&quot;noopener noreferrer&quot;&gt;our monolith&lt;/a&gt; through new &lt;a href=&quot;https://github.com/byroot/frozen_record&quot; target=&quot;_blank&quot; title=&quot;frozen_record: Read only ActiveRecord-like interface to query static YAML files&quot; rel=&quot;noopener noreferrer&quot;&gt;frozen records&lt;/a&gt;, one file for versions, and one for changes. API changes are packaged together and shipped as a part of a distinct version. API changes are initially introduced to the unstable version, and can optionally have a beta flag associated with the change, to prevent the change from being visible publicly. At runtime, our code can check whether a given change is in effect through a &lt;code&gt;ApiChange.in_effect?&lt;/code&gt; construct. I’ll show you how this, and other methods of the &lt;code&gt;ApiChange&lt;/code&gt; module are used in an example later on.&lt;/p&gt;
&lt;h2&gt;Dealing With Breaking and Non-breaking Changes&lt;/h2&gt;
&lt;p&gt;As we continue to improve our platform, changes are necessary and can be split into two broad categories: breaking and non-breaking.&lt;/p&gt;
&lt;p&gt;Breaking changes are more problematic and require a great deal of planning, care and go-to-market effort to ensure we support the ecosystem and provide a stable commerce platform for merchants. Ultimately, a breaking change is any change that requires a third-party developer to do any migration work to maintain the existing functionality of their application. Some examples of breaking changes are&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;adding a new or modifying an existing validation to an existing resource&lt;/li&gt;
&lt;li&gt;requiring a parameter that wasn’t required before&lt;/li&gt;
&lt;li&gt;changing existing error response codes/messages&lt;/li&gt;
&lt;li&gt;modifying the expected payload of webhooks and async callbacks&lt;/li&gt;
&lt;li&gt;changing the data type of an existing field&lt;/li&gt;
&lt;li&gt;changing supported filtering on existing endpoints&lt;/li&gt;
&lt;li&gt;renaming a field or endpoint&lt;/li&gt;
&lt;li&gt;adding a new feature that will change the meaning of a field&lt;/li&gt;
&lt;li&gt;removing an existing field or endpoint&lt;/li&gt;
&lt;li&gt;changing the URL structure of an existing endpoint.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Teams inside Shopify considering a breaking change conduct an impact analysis. They put themselves into the shoes of a third-party developer using the API and think through the changes that might be required. If there is ambiguity, our developer advocacy team can reach out to our partners to gain additional insight and gauge the impact of proposed changes. &lt;/p&gt;
&lt;p&gt;On the other hand, to determine if a change is non-breaking, a change must pass our forward compatibility test. Forward compatible changes are those which can be adopted and used by any merchant, without limitation, regardless of whether shops have been migrated or any other additional conditions have been met.&lt;/p&gt;
&lt;p&gt;Forward compatible changes can be freely adopted without worrying about whether there is a new user experience or the merchant’s data is adapted to work with the change, etc. Teams will keep these changes in the unstable API version and if forward compatibility cannot be met, keep access limited and managed by protecting the change with a beta flag.&lt;/p&gt;
&lt;p&gt;Every change is named in the changes frozen record mentioned above, to track and manage the change, and can be referenced by its name, for example,&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ApiChange.in_effect?(&lt;strong&gt;:really_big_change&lt;/strong&gt;)&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;Analyzing the Impact of Breaking Changes&lt;/h2&gt;
&lt;p&gt;If a proposed change is identified as a breaking change, and there is agreement amongst the stakeholders that it’s necessary, the next step is to enable our teams to figure out just how big the change’s impact is.&lt;/p&gt;
&lt;p&gt;Within the core monolith, teams make use of our API change tooling methods &lt;code&gt;mark_breaking&lt;/code&gt; and &lt;code&gt;mark_possibly_breaking&lt;/code&gt; to measure the impact of a potential breaking change. These methods work by capturing request metadata and context specific to the breaking code path then emitting this into our event pipeline, Monorail, which places the events into our data warehouse.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;mark_breaking&lt;/code&gt; method is called when the request would break if everything else was kept the same, while &lt;code&gt;mark_possibly_breaking&lt;/code&gt; would be used when we aren’t sure whether the call would have an adverse effect on the calling application. An example would be the case where a property of the response has been renamed or removed entirely:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ApiChange.&lt;strong&gt;mark_breaking&lt;/strong&gt;(:really_big_change)&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Once shipped to production, teams can use a prebuilt impact assessment report to see the potential impact of their changes across a number of dimensions.&lt;/p&gt;
&lt;h2&gt;Measuring and Managing API Adoption&lt;/h2&gt;
&lt;p&gt;Once the change has shipped as a part of an official API version, we’re able to make use of the data emitted from &lt;code&gt;mark_breaking&lt;/code&gt; and &lt;code&gt;mark_possibly_breaking&lt;/code&gt; to measure adoption and identify shops and apps that are still at risk. Our teams use the &lt;code&gt;ApiChange.in_effect?&lt;/code&gt; method (made available by our API change tooling) to create conditionals and manage support for the old and new behaviour in our API. A trivial example might look something like this:&lt;/p&gt;

&lt;p&gt;The &lt;code&gt;ApiChange&lt;/code&gt; module and the automated instrumentation it drives allow teams at Shopify to assess the current risk to the platform based on the proportion of API calls still on the breaking path, and assist in communicating these risks to affected developers.&lt;/p&gt;
&lt;p&gt;At Shopify, our ecosystem’s applications depend on the predictable nature of our APIs. The functionality these applications provide can be critical for the merchant’s businesses to function correctly on Shopify. In order to build and maintain trust with our ecosystem, we consider any proposed breaking change thoroughly and gauge the impact of our decisions. By providing the tooling to mark and analyze API calls, we empower teams at Shopify to assess the impact of proposed changes, and build a culture that respects the impact our decisions have on our ecosystem. There are real people out there building software for our merchants, and we want to avoid ever having to ask them to replace all the dogs at once!&lt;/p&gt;
&lt;hr/&gt;&lt;span&gt;We're always on the lookout for talent and we’d love to hear from you. Please take a look at our open positions on the &lt;/span&gt;&lt;a href=&quot;http://www.shopify.com/careers/specialties/engineering?itcat=EngBlog&amp;amp;itterm=Post&quot; title=&quot;Engineering Jobs at Shopify&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Engineering career page&lt;/a&gt;&lt;span&gt;.&lt;/span&gt;</description>
<pubDate>Thu, 19 Dec 2019 13:22:34 +0000</pubDate>
<dc:creator>tomnewton</dc:creator>
<og:url>https://engineering.shopify.com/blogs/engineering/shopify-manages-api-versioning-breaking-changes</og:url>
<og:title>How Shopify Manages API Versioning and Breaking Changes</og:title>
<og:type>article</og:type>
<og:description>Earlier this year I took the train from Ottawa to Toronto. While I was waiting in line in the main hall of the station, I noticed a police officer with a detection dog. The police officer was giving the dog plenty of time at each bag or person as they worked and weaved their way back and forth along the lines. The dog would look to his handler for direction, receiving it with the wave of a hand or gesture towards the next target. That’s about the moment I began asking myself a number of questions about dogs… and APIs. To understand why, you have to appreciate that the Canadian government recently legalized cannabis. Watching this incredibly well-trained dog work his way up and down the lines, it made me wonder, how did they “update” the dogs once the legislation changed? Can you really retrain or un-train a dog? How easy is it to implement this change, and how long does it take to roll out? So when the officer ended up next to me I couldn’t help but ask, ME: “Excuse me, I have a question about your dog if that’s alright with you?” OFFICER: “Sure, what’s on your mind?” ME: “How did you retrain the dogs after the legalization of cannabis?” OFFICER: “We didn’t. We had to retire them all and train new ones. You really can’t teach an old dog new tricks.“ ME: “Wow, seriously? How long did that take?” OFFICER: “Yep, we needed a full THREE YEARS to retire the previous group and introduce a new generation. It was a ton of work.” I found myself sitting on the train thinking about how simple it might have been for one layer of government plotting out the changes, to completely underestimate the downstream impact on the K9 unit of the police services. To anyone that didn’t understand the system (dogs), the change sounds simple. Simply detect substances in a set that is now n-1 in size. In reality, due to the way this dog-dependent system works, it requires significant time and effort, and a three-year program to migrate from the old system to the new. How We Handle API Versioning At Shopify, we have tens of thousands of partners building on our APIs that depend on us to ensure our merchants can run their businesses every day. In April of this year, we released the first official version of our API. All consumers of our APIs require stability and predictability and our API versioning scheme at Shopify allows us to continue to develop the platform while providing apps with stable API behavior and predictable timelines for adopting changes. The increasing growth of our API RPM quarter over quarter since 2017 overlaid with growth in active API clients To ensure that we provide a stable and predictable API, Shopify releases a new API version every three months at the beginning of the quarter. Version names are date-based to be meaningful and semantically unambiguous (for example, 2020-01). Shopify API Versioning Schedule   Although the Platform team is responsible for building the infrastructure, tooling, and systems that enforce our API versioning strategy at Shopify, there are a 1000+ engineers working across Shopify, each with the ability to ship code that can ultimately affect any of our APIs. So how do we think about versioning, and help manage changes to our APIs at scale? Our general rule of thumb about versioning is that API versioning is a powerful tool that comes with added responsibility. Break the API contract with the ecosystem only when there are no alternatives or it’s uneconomical to do otherwise. API versions and changes are represented in our monolith through new frozen records, one file for versions, and one for changes. API changes are packaged together and shipped as a part of a distinct version. API changes are initially introduced to the unstable version, and can optionally have a beta flag associated with the change, to prevent the change from being visible publicly. At runtime, our code can check whether a given change is in effect through a ApiChange.in_effect? construct. I’ll show you how this, and other methods of the ApiChange module are used in an example later on. Dealing With Breaking and Non-breaking Changes As we continue to improve our platform, changes are necessary and can be split into two broad categories: breaking and non-breaking. Breaking changes are more problematic and require a great deal of planning, care and go-to-market effort to ensure we support the ecosystem and provide a stable commerce platform for merchants. Ultimately, a breaking change is any change that requires a third-party developer to do any migration work to maintain the existing functionality of their application. Some examples of breaking changes are adding a new or modifying an existing validation to an existing resource requiring a parameter that wasn’t required before changing existing error response codes/messages modifying the expected payload of webhooks and async callbacks changing the data type of an existing field changing supported filtering on existing endpoints renaming a field or endpoint adding a new feature that will change the meaning of a field removing an existing field or endpoint changing the URL structure of an existing endpoint. Teams inside Shopify considering a breaking change conduct an impact analysis. They put themselves into the shoes of a third-party developer using the API and think through the changes that might be required. If there is ambiguity, our developer advocacy team can reach out to our partners to gain additional insight and gauge the impact of proposed changes.  On the other hand, to determine if a change is non-breaking, a change must pass our forward compatibility test. Forward compatible changes are those which can be adopted and used by any merchant, without limitation, regardless of whether shops have been migrated or any other additional conditions have been met. Forward compatible changes can be freely adopted without worrying about whether there is a new user experience or the merchant’s data is adapted to work with the change, etc. Teams will keep these changes in the unstable API version and if forward compatibility cannot be met, keep access limited and managed by protecting the change with a beta flag. Every change is named in the changes frozen record mentioned above, to track and manage the change, and can be referenced by its name, for example, ApiChange.in_effect?(:really_big_change) Analyzing the Impact of Breaking Changes If a proposed change is identified as a breaking change, and there is agreement amongst the stakeholders that it’s necessary, the next step is to enable our teams to figure out just how big the change’s impact is. Within the core monolith, teams make use of our API change tooling methods mark_breaking and mark_possibly_breaking to measure the impact of a potential breaking change. These methods work by capturing request metadata and context specific to the breaking code path then emitting this into our event pipeline, Monorail, which places the events into our data warehouse. The mark_breaking method is called when the request would break if everything else was kept the same, while mark_possibly_breaking would be used when we aren’t sure whether the call would have an adverse effect on the calling application. An example would be the case where a property of the response has been renamed or removed entirely: ApiChange.mark_breaking(:really_big_change). Once shipped to production, teams can use a prebuilt impact assessment report to see the potential impact of their changes across a number of dimensions. Measuring and Managing API Adoption Once the change has shipped as a part of an official API version, we’re able to make use of the data emitted from mark_breaking and mark_possibly_breaking to measure adoption and identify shops and apps that are still at risk. Our teams use the ApiChange.in_effect? method (made available by our API change tooling) to create conditionals and manage support for the old and new behaviour in our API. A trivial example might look something like this: The ApiChange module and the automated instrumentation it drives allow teams at Shopify to assess the current risk to the platform based on the proportion of API calls still on the breaking path, and assist in communicating these risks to affected developers. At Shopify, our ecosystem’s applications depend on the predictable nature of our APIs. The functionality these applications provide can be critical for the merchant’s businesses to function correctly on Shopify. In order to build and maintain trust with our ecosystem, we consider any proposed breaking change thoroughly and gauge the impact of our decisions. By providing the tooling to mark and analyze API calls, we empower teams at Shopify to assess the impact of proposed changes, and build a culture that respects the impact our decisions have on our ecosystem. There are real people out there building software for our merchants, and we want to avoid ever having to ask them to replace all the dogs at once! We're always on the lookout for talent and we’d love to hear from you. Please take a look at our open positions on the Engineering career page.</og:description>
<og:image>http://cdn.shopify.com/s/files/1/0779/4361/articles/APIVersioningSchedule_1024x1024.jpg?v=1576602188</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://engineering.shopify.com/blogs/engineering/shopify-manages-api-versioning-breaking-changes</dc:identifier>
</item>
<item>
<title>An investigation into the smartphone tracking industry</title>
<link>https://www.nytimes.com/interactive/2019/12/19/opinion/location-tracking-cell-phone.html</link>
<guid isPermaLink="true" >https://www.nytimes.com/interactive/2019/12/19/opinion/location-tracking-cell-phone.html</guid>
<description>&lt;div class=&quot;video-stepper&quot; id=&quot;video-stepper&quot;&gt;

&lt;div class=&quot;video-stepper-content&quot; readability=&quot;37&quot;&gt;

&lt;div class=&quot;texts&quot; readability=&quot;44&quot;&gt;
&lt;p&gt;&lt;span&gt;These are the actual locations&lt;br class=&quot;mobile-only&quot;/&gt;
for millions of Americans. At the New&lt;br/&gt;York Stock Exchange …&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;… in the beachfront neighborhoods&lt;br/&gt;of Los Angeles ...&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;… in secure facilities like&lt;br/&gt;the Pentagon …&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;… at the White House …&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;… and at Mar-a-Lago, President&lt;br/&gt;Trump’s Palm Beach resort.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;One nation, tracked&lt;/span&gt; &lt;span class=&quot;series-info&quot;&gt;An investigation into the smartphone tracking industry from Times Opinion&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;&lt;strong&gt;Every minute of every day,&lt;/strong&gt; everywhere on the planet, dozens of companies — largely unregulated, little scrutinized — are logging the movements of tens of millions of people with mobile phones and storing the information in gigantic data files. The Times &lt;a href=&quot;https://www.nytimes.com/privacy-project&quot;&gt;Privacy Project&lt;/a&gt; obtained one such file, by far the largest and most sensitive ever to be reviewed by journalists. It holds more than 50 billion location pings from the phones of more than 12 million Americans as they moved through several major cities, including Washington, New York, San Francisco and Los Angeles.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Each piece of information in this file represents the precise location of a single smartphone over a period of several months in 2016 and 2017. The data was provided to Times Opinion by sources who asked to remain anonymous because they were not authorized to share it and could face severe penalties for doing so. The sources of the information said they had grown alarmed about how it might be abused and urgently wanted to inform the public and lawmakers.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;After spending months sifting through the data, tracking the movements of people across the country and speaking with dozens of data companies, technologists, lawyers and academics who study this field, we feel the same sense of alarm. In the cities that the data file covers, it tracks people from nearly every neighborhood and block, whether they live in mobile homes in Alexandria, Va., or luxury towers in Manhattan.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;One search turned up more than a dozen people visiting the Playboy Mansion, some overnight. Without much effort we spotted visitors to the estates of Johnny Depp, Tiger Woods and Arnold Schwarzenegger, connecting the devices’ owners to the residences indefinitely.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;If you lived in one of the cities the dataset covers and use apps that share your location — anything from weather apps to local news apps to coupon savers — you could be in there, too.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;If you could see the full trove, you might never use your phone the same way again.&lt;/p&gt;
&lt;div class=&quot;single-video-wrapper small&quot; readability=&quot;8&quot;&gt;
&lt;div class=&quot;single-video-container&quot; readability=&quot;7&quot;&gt;
&lt;p&gt;A typical day at Grand Central Terminal in New York City&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Satellite imagery: Microsoft&lt;/p&gt;
&lt;/div&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;&lt;strong&gt;The data reviewed by Times Opinion&lt;/strong&gt; didn’t come from a telecom or giant tech company, nor did it come from a governmental surveillance operation. It originated from a location data company, one of dozens quietly collecting precise movements using software slipped onto mobile phone apps. You’ve probably never heard of most of the companies — and yet to anyone who has access to this data, your life is an open book. They can see the places you go every moment of the day, whom you meet with or spend the night with, where you pray, whether you visit a methadone clinic, a psychiatrist’s office or a massage parlor.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;&lt;a href=&quot;https://www.nytimes.com/interactive/2018/12/10/business/location-data-privacy-apps.html&quot;&gt;The Times&lt;/a&gt; and other news organizations have reported on smartphone tracking in the past. But never with a data set so large. Even still, this file represents just a small slice of what’s collected and sold every day by the location tracking industry — surveillance so omnipresent in our digital lives that it now seems impossible for anyone to avoid.&lt;/p&gt;

&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;It doesn’t take much imagination to conjure the powers such always-on surveillance can provide an authoritarian regime like China’s. Within America’s own representative democracy, citizens would surely rise up in outrage if the government attempted to mandate that every person above the age of 12 carry a tracking device that revealed their location 24 hours a day. Yet, in the decade since Apple’s App Store was created, Americans have, app by app, consented to just such a system run by private companies. Now, as the decade ends, tens of millions of Americans, including many children, find themselves carrying spies in their pockets during the day and leaving them beside their beds at night — even though the corporations that control their data are far less accountable than the government would be.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;“The seduction of these consumer products is so powerful that it blinds us to the possibility that there is another way to get the benefits of the technology without the invasion of privacy. But there is,” said William Staples, founding director of the Surveillance Studies Research Center at the University of Kansas. “All the companies collecting this location information act as what I have called Tiny Brothers, using a variety of data sponges to engage in everyday surveillance.”&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;In this and subsequent articles we’ll reveal what we’ve found and why it has so shaken us. We’ll ask you to consider the national security risks the existence of this kind of data creates and the specter of what such precise, always-on human tracking might mean in the hands of corporations and the government. We’ll also look at legal and ethical justifications that companies rely on to collect our precise locations and the deceptive techniques they use to lull us into sharing it.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Today, it’s perfectly legal to collect and sell all this information. In the United States, as in most of the world, no federal law limits what has become a vast and lucrative trade in human tracking. Only internal company policies and the decency of individual employees prevent those with access to the data from, say, stalking an estranged spouse or selling the evening commute of an intelligence officer to a hostile foreign power.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Companies say the data is shared only with vetted partners. As a society, we’re choosing simply to take their word for that, displaying a blithe faith in corporate beneficence that we don’t extend to far less intrusive yet more heavily regulated industries. Even if these companies are acting with the soundest moral code imaginable, there’s ultimately no foolproof way they can secure the data from falling into the hands of a foreign security service. Closer to home, on a smaller yet no less troubling scale, there are often few protections to stop an individual analyst with access to such data from tracking an ex-lover or a victim of abuse.&lt;/p&gt;
&lt;h2 class=&quot;g-subhed g-optimize-type&quot; id=&quot;&quot;&gt;A DIARY OF YOUR EVERY MOVEMENT&lt;/h2&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;&lt;strong&gt;The companies that collect&lt;/strong&gt; all this information on your movements justify their business on the basis of three claims: People consent to be tracked, the data is anonymous and the data is secure.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;None of those claims hold up, based on the file we’ve obtained and our review of company practices.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Yes, the location data contains billions of data points with no identifiable information like names or email addresses. But it’s child’s play to connect real names to the dots that appear on the maps.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Here’s what that looks like.&lt;/p&gt;
&lt;div id=&quot;main-map-stepper&quot; data-fullscreen=&quot;true&quot; class=&quot;zoommap-container map-stepper&quot;&gt;


&lt;div class=&quot;slides-container&quot;&gt;
&lt;div class=&quot;slide active&quot; id=&quot;main-map-stepper-slide-0&quot; data-id=&quot;0&quot; readability=&quot;31.5&quot;&gt;
&lt;div class=&quot;slide-inner&quot; readability=&quot;8&quot;&gt;
&lt;p class=&quot;graphic-text&quot;&gt;The data included more&lt;br/&gt;than 10,000 smartphones tracked&lt;br/&gt;in Central Park.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;slide&quot; id=&quot;main-map-stepper-slide-1&quot; data-id=&quot;1&quot; readability=&quot;31.5&quot;&gt;
&lt;div class=&quot;slide-inner&quot; readability=&quot;8&quot;&gt;
&lt;p class=&quot;graphic-text&quot;&gt;Here is one smartphone, isolated from the crowd.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;slide&quot; id=&quot;main-map-stepper-slide-2&quot; data-id=&quot;2&quot; readability=&quot;31&quot;&gt;
&lt;div class=&quot;slide-inner&quot; readability=&quot;7&quot;&gt;
&lt;p class=&quot;graphic-text&quot;&gt;Here are all pings from&lt;br/&gt;that smartphone over the period covered by the data.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;slide&quot; id=&quot;main-map-stepper-slide-3&quot; data-id=&quot;3&quot; readability=&quot;31&quot;&gt;
&lt;div class=&quot;slide-inner&quot; readability=&quot;7&quot;&gt;
&lt;p class=&quot;graphic-text&quot;&gt;Connecting those pings reveals a diary of the person’s life.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;zoommap-caption caption&quot; readability=&quot;12&quot;&gt;
&lt;p&gt;Note: Driving path is inferred. Data has been additionally obscured. Satellite imagery: Maxar Technologies, New York G.I.S., U.S.D.A. Farm Service Agency, Imagery, Landsat/Copernicus and Sanborn.&lt;/p&gt;
&lt;/div&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;&lt;strong&gt;In most cases,&lt;/strong&gt; ascertaining a home location and an office location was enough to identify a person. Consider your daily commute: Would any other smartphone travel directly between your house and your office every day?&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Describing location data as anonymous is “a completely false claim” that has been debunked in multiple studies, Paul Ohm, a law professor and privacy researcher at the Georgetown University Law Center, told us. “Really precise, longitudinal geolocation information is absolutely impossible to anonymize.”&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;“D.N.A.,” he added, “is probably the only thing that’s harder to anonymize than precise geolocation information.”&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;&lt;em&gt;&lt;em&gt;&lt;em&gt;[Work in the location tracking industry? Seen an abuse of data? We want to hear from you. Using a non-work phone or computer, contact us on a secure line at 440-295-5934, @charliewarzel on Wire or email&lt;/em&gt; &lt;a href=&quot;mailto:charlie.warzel@nytimes.com&quot;&gt;Charlie Warzel&lt;/a&gt; &lt;em&gt;and&lt;/em&gt; &lt;a href=&quot;mailto:stuart.thompson@nytimes.com&quot;&gt;Stuart A. Thompson&lt;/a&gt; &lt;em&gt;directly.]&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/p&gt;

&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Yet companies continue to claim that the data are anonymous. In marketing materials and at trade conferences, anonymity is a major selling point — key to allaying concerns over such invasive monitoring.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;To evaluate the companies’ claims, we turned most of our attention to identifying people in positions of power. With the help of publicly available information, like home addresses, we easily identified and then tracked scores of notables. We followed military officials with security clearances as they drove home at night. We tracked law enforcement officers as they took their kids to school. We watched high-powered lawyers (and their guests) as they traveled from private jets to vacation properties. We did not name any of the people we identified without their permission.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;The data set is large enough that it surely points to scandal and crime but our purpose wasn’t to dig up dirt. We wanted to document the risk of underregulated surveillance.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Watching dots move across a map sometimes revealed hints of faltering marriages, evidence of drug addiction, records of visits to psychological facilities.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Connecting a sanitized ping to an actual human in time and place could feel like reading someone else’s diary.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;In one case, we identified Mary Millben, a singer based in Virginia who has performed for three presidents, including President Trump. She was invited to the service at the Washington National Cathedral the morning after the president’s inauguration. That’s where we first found her.&lt;/p&gt;
&lt;div class=&quot;g-asset g-image&quot; id=&quot;&quot; readability=&quot;7&quot;&gt;
&lt;div class=&quot;g-asset_inner&quot;&gt;&lt;img src=&quot;https://static01.nyt.com/newsgraphics/2019/09/16/opinion-privacy-lead/b9733996d66c3ff944a1392e9b60cb4bc6d4fa34/millben.jpg&quot; class=&quot;g-image-element&quot;/&gt;&lt;/div&gt;
&lt;p&gt;&lt;span class=&quot;g-caption&quot;&gt;Mary Millben has performed for three presidents during her singing career.&lt;/span&gt; &lt;span class=&quot;g-credit&quot;&gt;Getty Images&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;She remembers how, surrounded by dignitaries and the first family, she was moved by the music echoing through the recesses of the cathedral while members of both parties joined together in prayer. All the while, the apps on her phone were also monitoring the moment, recording her position and the length of her stay in meticulous detail. For the advertisers who might buy access to the data, the intimate prayer service could well supply some profitable marketing insights.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;“To know that you have a list of places I have been, and my phone is connected to that, that’s scary,” Ms. Millben told us. “What’s the business of a company benefiting off of knowing where I am? That seems a little dangerous to me.”&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Like many people we identified in the data, Ms. Millben said she was careful about limiting how she shared her location. Yet like many of them, she also couldn’t name the app that might have collected it. Our privacy is only as secure as the least secure app on our device.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;“That makes me uncomfortable,” she said. “I’m sure that makes every other person uncomfortable, to know that companies can have free rein to take your data, locations, whatever else they’re using. It is disturbing.”&lt;/p&gt;

&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;The inauguration weekend yielded a trove of personal stories and experiences: elite attendees at presidential ceremonies, religious observers at church services, supporters assembling across the National Mall — all surveilled and recorded permanently in rigorous detail.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Protesters were tracked just as rigorously. After the pings of Trump supporters, basking in victory, vanished from the National Mall on Friday evening, they were replaced hours later by those of participants in the Women’s March, as a crowd of nearly half a million descended on the capital. Examining just a photo from the event, you might be hard-pressed to tie a face to a name. But in our data, pings at the protest connected to clear trails through the data, documenting the lives of protesters in the months before and after the protest, including where they lived and worked.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;We spotted a senior official at the Department of Defense walking through the Women’s March, beginning on the National Mall and moving past the Smithsonian National Museum of American History that afternoon. His wife was also on the mall that day, something we discovered after tracking him to his home in Virginia. Her phone was also beaming out location data, along with the phones of several neighbors.&lt;/p&gt;
&lt;div class=&quot;single-video-wrapper small&quot; readability=&quot;9&quot;&gt;
&lt;div class=&quot;single-video-container&quot; readability=&quot;7&quot;&gt;
&lt;p&gt;Senior Defense Department official and his wife identified at the Women’s March&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Note: Animated movement of the person’s location is inferred. Satellite imagery: Microsoft and DigitalGlobe.&lt;/p&gt;
&lt;/div&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;The official’s data trail also led to a high school, homes of friends, a visit to Joint Base Andrews, workdays spent in the Pentagon and a ceremony at Joint Base Myer-Henderson Hall with President Barack Obama in 2017 (nearly a dozen more phones were tracked there, too).&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Inauguration Day weekend was marked by other protests — and riots. Hundreds of protesters, some in black hoods and masks, gathered north of the National Mall that Friday, eventually &lt;a href=&quot;https://www.nytimes.com/2017/01/20/us/politics/inauguration-protests.html&quot;&gt;setting fire to a limousine&lt;/a&gt; near Franklin Square. The data documented those rioters, too. Filtering the data to that precise time and location led us to the doorsteps of some who were there. Police were present as well, many with faces obscured by riot gear. The data led us to the homes of at least two police officers who had been at the scene.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;As revealing as our searches of Washington were, we were relying on just one slice of data, sourced from one company, focused on one city, covering less than one year. Location data companies collect orders of magnitude more information every day than the totality of what Times Opinion received.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Data firms also typically draw on other sources of information that we didn’t use. We lacked the mobile advertising IDs or other identifiers that advertisers often combine with demographic information like home ZIP codes, age, gender, even phone numbers and emails to create detailed audience profiles used in &lt;a href=&quot;https://www.nytimes.com/interactive/2019/04/30/opinion/privacy-targeted-advertising.html&quot;&gt;targeted advertising&lt;/a&gt;. When datasets are combined, privacy risks can be amplified. Whatever protections existed in the location dataset can crumble with the addition of only one or two other sources.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;There are dozens of companies profiting off such data daily across the world — by collecting it directly from smartphones, creating new technology to better capture the data or creating audience profiles for targeted advertising.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;The full collection of companies can feel dizzying, as it’s constantly changing and seems impossible to pin down. Many use technical and nuanced language that may be confusing to average smartphone users.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;While many of them have been involved in the business of tracking us for years, the companies themselves are unfamiliar to most Americans. (Companies can work with data derived from GPS sensors, Bluetooth beacons and other sources. Not all companies in the location data business collect, buy, sell or work with granular location data.)&lt;/p&gt;
&lt;div class=&quot;g-asset g-graphic&quot; id=&quot;&quot; readability=&quot;8&quot;&gt;
&lt;div id=&quot;g-logos-box&quot; class=&quot;ai2html&quot;&gt;
&lt;div id=&quot;g-logos-Artboard_2&quot; class=&quot;g-artboard&quot; data-aspect-ratio=&quot;0.86&quot; data-min-width=&quot;0&quot; data-max-width=&quot;599&quot; readability=&quot;7&quot;&gt;

&lt;img id=&quot;g-logos-Artboard_2-img&quot; class=&quot;g-aiImg&quot; alt=&quot;&quot; data-src=&quot;https://static01.nyt.com/newsgraphics/2019/09/16/opinion-privacy-lead/b9733996d66c3ff944a1392e9b60cb4bc6d4fa34/logos-Artboard_2.jpg&quot; src=&quot;data:image/gif;base64,R0lGODlhCgAKAIAAAB8fHwAAACH5BAEAAAAALAAAAAAKAAoAAAIIhI+py+0PYysAOw==&quot;/&gt;&lt;div id=&quot;g-ai0-1&quot; class=&quot;g-ai2html-settings g-aiAbs g-aiPointText&quot; readability=&quot;34&quot;&gt;
&lt;p class=&quot;g-pstyle0&quot;&gt;A Selection of Companies Working&lt;/p&gt;
&lt;p class=&quot;g-pstyle0&quot;&gt;the Location Data Business&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&quot;g-logos-Artboard_3&quot; class=&quot;g-artboard&quot; data-aspect-ratio=&quot;1.26&quot; data-min-width=&quot;600&quot; readability=&quot;7&quot;&gt;

&lt;img id=&quot;g-logos-Artboard_3-img&quot; class=&quot;g-aiImg&quot; alt=&quot;&quot; data-src=&quot;https://static01.nyt.com/newsgraphics/2019/09/16/opinion-privacy-lead/b9733996d66c3ff944a1392e9b60cb4bc6d4fa34/logos-Artboard_3.jpg&quot; src=&quot;data:image/gif;base64,R0lGODlhCgAKAIAAAB8fHwAAACH5BAEAAAAALAAAAAAKAAoAAAIIhI+py+0PYysAOw==&quot;/&gt;&lt;div id=&quot;g-ai1-1&quot; class=&quot;g-ai2html-settings g-aiAbs g-aiPointText&quot; readability=&quot;34&quot;&gt;
&lt;p class=&quot;g-pstyle0&quot;&gt;A Selection of Companies Working&lt;/p&gt;
&lt;p class=&quot;g-pstyle0&quot;&gt;in the Location Data Business&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;span class=&quot;g-caption&quot;&gt;Sources: MightySignal, LUMA Partners and AppFigures.&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Location data companies generally downplay the risks of collecting such revealing information at scale. Many also say they’re not very concerned about potential regulation or software updates that could make it more difficult to collect location data.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;“No, it doesn’t really keep us up at night,” said Brian Czarny, chief marketing officer at Factual, one such company, said. He added that Factual does not resell detailed data like the information we reviewed. “We don’t feel like anybody should be doing that because it’s a risk to the whole business,” he said.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;In absence of a federal privacy law, the industry has largely relied on self-regulation. Several industry groups offer ethical guidelines meant to govern it. Factual joined the &lt;a href=&quot;https://www.mmaglobal.com/&quot;&gt;Mobile Marketing Association&lt;/a&gt;, along with many other data location and marketing companies, in drafting a pledge intended to improve its self-regulation. The pledge is slated to be released next year.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;States are starting to respond with their own laws. The California Consumer Protection Act goes into effect next year and adds new protections for residents there, like allowing them to ask companies to delete their data or prevent its sale. But aside from a few new requirements, the law could leave the industry largely unencumbered.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;“If a private company is legally collecting location data, they’re free to spread it or share it however they want,” said Calli Schroeder, a lawyer for the privacy and data protection company VeraSafe.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;The companies are required to disclose very little about their data collection. By law, companies need only describe their practices in their privacy policies, which tend to be &lt;a href=&quot;https://www.nytimes.com/interactive/2019/06/12/opinion/facebook-google-privacy-policies.html&quot;&gt;dense legal documents&lt;/a&gt; that few people read and even fewer can truly understand.&lt;/p&gt;
&lt;div class=&quot;single-video-wrapper fullscreen&quot; readability=&quot;8&quot;&gt;
&lt;div class=&quot;single-video-container&quot;&gt;
&lt;p&gt;Beverly Hills, Calif.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Satellite imagery: Microsoft, Vexcel and DigitalGlobe&lt;/p&gt;
&lt;/div&gt;
&lt;h2 class=&quot;g-subhed g-optimize-type&quot; id=&quot;&quot;&gt;EVERYTHING CAN BE HACKED&lt;/h2&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;&lt;strong&gt;Does it really matter&lt;/strong&gt; that your information isn’t actually anonymous? Location data companies argue that your data is safe — that it poses no real risk because it’s stored on guarded servers. This assurance has been undermined by the parade of publicly reported data breaches — to say nothing of breaches that don’t make headlines. In truth, sensitive information can be easily transferred or leaked, as evidenced by this very story.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;We’re constantly shedding data, for example, by surfing the internet or making credit card purchases. But location data is different. Our precise locations are used fleetingly in the moment for a targeted ad or notification, but then repurposed indefinitely for much more profitable ends, like tying your purchases to &lt;a href=&quot;https://web.clearchanneloutdoor.com/radar&quot;&gt;billboard ads&lt;/a&gt; you drove past on the freeway. Many apps that use your location, like weather services, work perfectly well without your precise location — but collecting your location feeds a lucrative secondary business of analyzing, licensing and transferring that information to third parties.&lt;/p&gt;
&lt;div class=&quot;g-asset g-graphic&quot; id=&quot;&quot; readability=&quot;11&quot;&gt;

&lt;p&gt;&lt;span class=&quot;g-caption&quot;&gt;The data contains simple information like date, latitude and longitude, making it easy to inspect, download and transfer.&lt;/span&gt; &lt;span class=&quot;g-credit&quot;&gt;Values are randomized to protect sources and device owners.&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;For many Americans, the only real risk they face from having their information exposed would be embarrassment or inconvenience. But for others, like survivors of abuse, the risks could be substantial. And who can say what practices or relationships any given individual might want to keep private, to withhold from friends, family, employers or the government? We found hundreds of pings in mosques and churches, abortion clinics, queer spaces and other sensitive areas.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;In one case, we observed a change in the regular movements of a Microsoft engineer. He made a visit one Tuesday afternoon to the main Seattle campus of a Microsoft competitor, Amazon. The following month, he started a new job at Amazon. It took minutes to identify him as Ben Broili, a manager now for Amazon Prime Air, a drone delivery service.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;“I can’t say I’m surprised,” Mr. Broili told us in early December. “But knowing that you all can get ahold of it and comb through and place me to see where I work and live — that’s weird.” That we could so easily discern that Mr. Broili was out on a job interview raises some obvious questions, like: Could the internal location surveillance of executives and employees become standard corporate practice?&lt;/p&gt;
&lt;div class=&quot;g-asset g-image&quot; id=&quot;&quot; readability=&quot;7&quot;&gt;
&lt;div class=&quot;g-asset_inner&quot;&gt;&lt;img src=&quot;https://static01.nyt.com/newsgraphics/2019/09/16/opinion-privacy-lead/b9733996d66c3ff944a1392e9b60cb4bc6d4fa34/broili_gsh_19.jpg&quot; class=&quot;g-image-element&quot;/&gt;&lt;/div&gt;
&lt;p&gt;&lt;span class=&quot;g-caption&quot;&gt;Ben Broili’s interview at Amazon was captured in the data.&lt;/span&gt; &lt;span class=&quot;g-credit&quot;&gt;Grant Hindsley for The New York Times&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Mr. Broili wasn’t worried about apps cataloguing his every move, but he said he felt unsure about whether the tradeoff between the services offered by the apps and the sacrifice of privacy was worth it. “It’s an awful lot of data,” he said. “And I really still don’t understand how it’s being used. I’d have to see how the other companies were weaponizing or monetizing it to make that call.”&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;If this kind of location data makes it easy to keep tabs on employees, it makes it just as simple to stalk celebrities. Their private conduct — even in the dead of night, in residences and far from paparazzi — could come under even closer scrutiny.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Reporters hoping to evade other forms of surveillance by meeting in person with a source might want to rethink that practice. Every major newsroom covered by the data contained dozens of pings; we easily traced one Washington Post journalist through Arlington, Va.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;In other cases, there were detours to hotels and late-night visits to the homes of prominent people. One person, plucked from the data in Los Angeles nearly at random, was found traveling to and from roadside motels multiple times, for visits of only a few hours each time.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;While these pointillist pings don’t in themselves reveal a complete picture, a lot can be gleaned by examining the date, time and length of time at each point.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Large data companies like Foursquare — perhaps the most familiar name in the location data business — say they don’t sell detailed location data like the kind reviewed for this story but rather use it to &lt;a href=&quot;https://www.nytimes.com/2019/10/16/opinion/foursquare-privacy-internet.html&quot;&gt;inform analysis&lt;/a&gt;, such as measuring whether you &lt;a href=&quot;https://enterprise.foursquare.com/products/attribution&quot;&gt;entered a store&lt;/a&gt; after seeing an ad on your mobile phone.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;But a number of companies do sell the detailed data. Buyers are typically data brokers and advertising companies. But some of them have little to do with consumer advertising, including financial institutions, geospatial analysis companies and real estate investment firms that can process and analyze such large quantities of information. They might pay more than $1 million for a tranche of data, according to a former location data company employee who agreed to speak anonymously.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Location data is also collected and shared alongside a mobile advertising ID, a supposedly anonymous identifier about 30 digits long that allows advertisers and other businesses to tie activity together across apps. The ID is also used to combine location trails with other information like your name, home address, email, phone number or even an identifier tied to your Wi-Fi network.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;The data can change hands in almost real time, so fast that your location could be transferred from your smartphone to the app’s servers and exported to third parties in milliseconds. This is how, for example, you might see an ad for a new car some time after walking through a dealership.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;That data can then be resold, copied, pirated and abused. There’s no way you can ever retrieve it.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Location data is about far more than consumers seeing a few more relevant ads. This information provides critical intelligence for big businesses. The Weather Channel app’s parent company, for example, analyzed users’ location data for &lt;a href=&quot;https://web.archive.org/web/20180731211011/https://business.weather.com/writable/documents/Financial-Markets/InvestorInsights_SolutionSheet.pdf&quot;&gt;hedge funds&lt;/a&gt;, according to a &lt;a href=&quot;https://www.nytimes.com/2019/01/03/technology/weather-channel-app-lawsuit.html&quot;&gt;lawsuit filed in Los Angeles this year&lt;/a&gt; that was triggered by Times reporting. And Foursquare received much attention in 2016 after using its data trove to &lt;a href=&quot;https://medium.com/foursquare-direct/foursquare-predicts-chipotle-s-q1-sales-down-nearly-30-foot-traffic-reveals-the-start-of-a-mixed-78515b2389af&quot;&gt;predict&lt;/a&gt; that after an E. coli crisis, Chipotle’s sales would drop by 30 percent in the coming months. Its same-store sales ultimately &lt;a href=&quot;https://www.cnbc.com/2016/04/26/chipotle-reports-first-quarter-results.html&quot;&gt;fell 29.7 percent&lt;/a&gt;.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Much of the concern over location data has focused on telecom giants like Verizon and AT&amp;amp;T, which have been &lt;a href=&quot;https://www.wyden.senate.gov/imo/media/doc/at&amp;amp;t%20letter%20to%20RW%206.15.pdf&quot;&gt;selling location data&lt;/a&gt; to third parties for years. Last year, Motherboard, Vice’s technology website, &lt;a href=&quot;https://motherboard.vice.com/en_us/article/nepxbz/i-gave-a-bounty-hunter-300-dollars-located-phone-microbilt-zumigo-tmobile&quot;&gt;found&lt;/a&gt; that once the data was sold, it was being shared to help bounty hunters find specific cellphones in real time. The resulting scandal forced the telecom giants to &lt;a href=&quot;https://arstechnica.com/tech-policy/2018/06/verizon-and-att-will-stop-selling-your-phones-location-to-data-brokers/&quot;&gt;pledge&lt;/a&gt; they would stop selling location movements to data brokers.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Yet no law prohibits them from doing so.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Location data is transmitted from your phone via software development kits, or S.D.Ks. as they’re known in the trade. The kits are small programs that can be used to build features within an app. They make it easy for app developers to simply include location-tracking features, a useful component of services like weather apps. Because they’re so useful and easy to use, S.D.K.s are embedded in thousands of apps. Facebook, Google and Amazon, for example, have extremely popular S.D.K.s that allow smaller apps to connect to bigger companies’ ad platforms or help provide web traffic analytics or payment infrastructure.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;But they could also sit on an app and collect location data while providing no real service back to the app. Location companies may &lt;a href=&quot;https://www.xmode.io/app-publishers/&quot;&gt;pay&lt;/a&gt; the apps to be included — collecting valuable data that can be monetized.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;“If you have an S.D.K. that’s frequently collecting location data, it is more than likely being resold across the industry,” said Nick Hall, chief executive of the data marketplace company VenPath.&lt;/p&gt;
&lt;div class=&quot;single-video-wrapper fullscreen&quot; readability=&quot;10&quot;&gt;
&lt;div class=&quot;single-video-container&quot;&gt;
&lt;p&gt;Downtown San Francisco&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Satellite imagery: Microsoft, DigitalGlobe, Vexcel Imaging, Distribution Airbus&lt;/p&gt;
&lt;/div&gt;
&lt;h2 class=&quot;g-subhed g-optimize-type&quot; id=&quot;&quot;&gt;THE ‘HOLY GRAIL’ FOR MARKETERS&lt;/h2&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;&lt;strong&gt;If this information is so sensitive,&lt;/strong&gt; why is it collected in the first place?&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;For brands, following someone’s precise movements is key to understanding the “customer journey” — every step of the process from seeing an ad to buying a product. It’s the Holy Grail of advertising, one marketer said, the complete picture that connects all of our interests and online activity with our real-world actions.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Once they have the complete customer journey, companies know a lot about what we want, what we buy and what made us buy it. Other groups have begun to find ways to use it too. Political campaigns could analyze the interests and demographics of &lt;a href=&quot;https://www.wsj.com/articles/political-campaigns-track-cellphones-to-identify-and-target-individual-voters-11570718889&quot;&gt;rally attendees&lt;/a&gt; and use that information to shape their messages to try to manipulate particular groups. Governments around the world could have a new tool to identify protestors.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Pointillist location data also has some clear benefits to society. Researchers can use the raw data to provide key insights for transportation studies and government planners. The City Council of Portland, Ore., unanimously &lt;a href=&quot;https://www.opb.org/news/article/cellphone-location-data-portland-google-privacy/&quot;&gt;approved a deal&lt;/a&gt; to study traffic and transit by monitoring millions of cellphones. Unicef &lt;a href=&quot;https://www.businesswire.com/news/home/20190910005037/en/Cuebiq%E2%80%99s-Data-Good-Program-UNICEF-High-Precision-Human&quot;&gt;announced a plan&lt;/a&gt; to use aggregated mobile location data to study epidemics, natural disasters and demographics.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;For individual consumers, the value of constant tracking is less tangible. And the lack of transparency from the advertising and tech industries raises still more concerns.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Does a coupon app need to sell second-by-second location data to other companies to be profitable? Does that really justify allowing companies to track millions and potentially expose our private lives?&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Data companies say users consent to tracking when they agree to share their location. But those consent screens rarely make clear how the data is being packaged and sold. If companies were clearer about what they were doing with the data, would anyone agree to share it?&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;What about data collected years ago, before hacks and leaks made privacy a forefront issue? Should it still be used, or should it be deleted for good?&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;If it’s possible that data stored securely today can easily be hacked, leaked or stolen, is this kind of data worth that risk?&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Is all of this surveillance and risk worth it merely so that we can be served slightly more relevant ads? Or so that hedge fund managers can get richer?&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;The companies profiting from our every move can’t be expected to voluntarily limit their practices. Congress has to step in to protect Americans’ needs as consumers and rights as citizens.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Until then, one thing is certain: We are living in the world’s most advanced surveillance system. This system wasn’t created deliberately. It was built through the interplay of technological advance and the profit motive. It was built to make money. The greatest trick technology companies ever played was persuading society to surveil itself.&lt;/p&gt;
&lt;div class=&quot;g-container g-methodology&quot; id=&quot;&quot; readability=&quot;22.3991507431&quot;&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Stuart A. Thompson (&lt;a href=&quot;mailto:stuart.thompson@nytimes.com&quot;&gt;stuart.thompson@nytimes.com&lt;/a&gt;) is a writer and editor in the Opinion section. Charlie Warzel (&lt;a href=&quot;mailto:charlie.warzel@nytimes.com&quot;&gt;charlie.warzel@nytimes.com&lt;/a&gt;) is a writer at large for Opinion.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Lora Kelley, Ben Smithgall, Vanessa Swales and Susan Beachy contributed research. Alex Kingsbury contributed reporting. Graphics by Stuart A. Thompson. Additional production by Jessia Ma and Gus Wezerek. Note: Visualizations have been adjusted to protect device owners.&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;Opening satellite imagery: Microsoft (New York Stock Exchange); Imagery (Pentagon, Los Angeles); Google and DigitalGlobe (White House); Microsoft and DigitalGlobe (Washington, D.C.); Imagery and Maxar Technologies (Mar-a-Lago).&lt;/p&gt;
&lt;p class=&quot;g-body&quot; id=&quot;&quot;&gt;&lt;em&gt;&lt;em&gt;Like other media companies, The Times collects data on its visitors when they read stories like this one. For more detail please see&lt;/em&gt; &lt;a href=&quot;https://help.nytimes.com/hc/en-us/articles/115014892108-Privacy-policy?module=inline&quot;&gt;our privacy policy&lt;/a&gt; &lt;em&gt;and&lt;/em&gt; &lt;a href=&quot;https://www.nytimes.com/2019/04/10/opinion/sulzberger-new-york-times-privacy.html?rref=collection%2Fspotlightcollection%2Fprivacy-project-does-privacy-matter&amp;amp;action=click&amp;amp;contentCollection=opinion&amp;amp;region=stream&amp;amp;module=stream_unit&amp;amp;version=latest&amp;amp;contentPlacement=8&amp;amp;pgtype=collection&quot;&gt;our publisher's description&lt;/a&gt; &lt;em&gt;of The Times's practices and continued steps to increase transparency and protections.&lt;/em&gt;&lt;/em&gt;&lt;/p&gt;

&lt;/div&gt;


</description>
<pubDate>Thu, 19 Dec 2019 10:46:37 +0000</pubDate>
<dc:creator>danso</dc:creator>
<og:url>https://www.nytimes.com/interactive/2019/12/19/opinion/location-tracking-cell-phone.html</og:url>
<og:type>article</og:type>
<og:title>Opinion | Twelve Million Phones, One Dataset, Zero Privacy</og:title>
<og:image>https://static01.nyt.com/images/2019/12/16/opinion/16tracked-lead-1576194333663/16tracked-lead-1576194333663-facebookJumbo.jpg</og:image>
<og:description>What we learned from the spy in your pocket.</og:description>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.nytimes.com/interactive/2019/12/19/opinion/location-tracking-cell-phone.html</dc:identifier>
</item>
<item>
<title>How tracking pixels work</title>
<link>https://jvns.ca/blog/how-tracking-pixels-work/</link>
<guid isPermaLink="true" >https://jvns.ca/blog/how-tracking-pixels-work/</guid>
<description>&lt;p&gt;I spent some time talking to a reporter yesterday about how advertisers track people on the internet. We had a really fun time looking at Firefox’s developer tools together (I’m not an internet privacy expert, but I do know how to use the network tab in developer tools!) and I learned a few things about how tracking pixels actually work in practice!&lt;/p&gt;
&lt;h3 id=&quot;the-question-how-does-facebook-know-that-you-went-to-old-navy&quot;&gt;the question: how does Facebook know that you went to Old Navy?&lt;/h3&gt;
&lt;p&gt;I often hear about this slightly creepy internet experience: you’re looking at a product online, and a day later see an ad for the same boots or whatever that you were looking at. This is called “retargeting”, but how does it actually work exactly in practice?&lt;/p&gt;
&lt;p&gt;In this post we’ll experiment a bit and see exactly how Facebook can know what products you’ve looked at online! I’m using Facebook as an example in this blog post just because it’s easy to find websites with Facebook tracking pixels on them but of course almost every internet advertising company does this kind of tracking.&lt;/p&gt;
&lt;h3 id=&quot;the-setup-allow-third-party-trackers-turn-off-my-adblocker&quot;&gt;the setup: allow third party trackers, turn off my adblocker&lt;/h3&gt;
&lt;p&gt;I use Firefox, and by default Firefox blocks a lot of this kind of tracking. So I needed to modify my Firefox privacy settings to get this tracking to work.&lt;/p&gt;
&lt;p&gt;I changed my privacy settings from the default (&lt;a href=&quot;https://jvns.ca/images/trackers.png&quot;&gt;screenshot&lt;/a&gt;) to a custom setting that allows third-party trackers (&lt;a href=&quot;https://jvns.ca/images/firefox-insecure-settings.png&quot;&gt;screenshot&lt;/a&gt;). I also disabled some privacy extensions I usually have running.&lt;/p&gt;
&lt;h3 id=&quot;tracking-pixels-it-s-not-the-gif-it-s-the-url-query-parameters&quot;&gt;tracking pixels: it’s not the gif, it’s the URL + query parameters&lt;/h3&gt;
&lt;p&gt;A tracking pixel is a 1x1 transparent gif that sites use to track you. By itself, obviously a tiny 1x1 gif doesn’t do too much. So how do tracking pixels track you? 2 ways:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;Sites use the &lt;strong&gt;URL and query parameters&lt;/strong&gt; in the tracking pixel to add extra information, like the URL of the page you’re visiting. So instead of just requesting &lt;code&gt;https://www.facebook.com/tr/&lt;/code&gt; (which is a 44-byte 1x1 gif), it’ll request &lt;code&gt;https://www.facebook.com/tr/?the_website_you're_on&lt;/code&gt;. (email marketers use similar tricks to figure out if you’ve opened an email, by giving the tracking pixel a unique URL)&lt;/li&gt;
&lt;li&gt;Sites send &lt;strong&gt;cookies&lt;/strong&gt; with the tracking pixel so that they can tell that the person who visited oldnavy.com is the same as the person who’s using Facebook on the same computer.&lt;/li&gt;
&lt;/ol&gt;&lt;h3 id=&quot;the-facebook-tracking-pixel-on-old-navy-s-website&quot;&gt;the Facebook tracking pixel on Old Navy’s website&lt;/h3&gt;
&lt;p&gt;To test this out, I went to look at a product on the Old Navy site with the URL &lt;a href=&quot;https://oldnavy.gap.com/browse/product.do?pid=504753002&amp;amp;cid=1125694&amp;amp;pcid=1135640&amp;amp;vid=1&amp;amp;grid=pds_0_109_1&quot;&gt;https://oldnavy.gap.com/browse/product.do?pid=504753002&amp;amp;cid=1125694&amp;amp;pcid=1135640&amp;amp;vid=1&amp;amp;grid=pds_0_109_1&lt;/a&gt; (a “Soft-Brushed Plaid Topcoat for Men”).&lt;/p&gt;
&lt;p&gt;When I did that, the Javascript running on that page (presumably &lt;a href=&quot;https://developers.facebook.com/docs/facebook-pixel/implementation/&quot;&gt;this code&lt;/a&gt;) sent a request to facebook.com that looks like this in Developer tools: (I censored most of the cookie values because some of them are my login cookies :) )&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://jvns.ca/images/fb-old-navy.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Let’s break down what’s happening:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;My browser sends a request to &lt;code&gt;https://www.facebook.com/tr/?id=937725046402747&amp;amp;ev=PageView&amp;amp;dl=https%3A%2F%2Foldnavy.gap.com%2Fbrowse%2Fproduct.do%3Fpid%3D504753002%26cid%3D1125694%26pcid%3Dxxxxxx0%26vid%3D1%26grid%3Dpds_0_109_1%23pdp-page-content&amp;amp;rl=https%3A%2F%2Foldnavy.gap.com%2Fbrowse%2Fcategory.do%3Fcid%3D1135640%26mlink%3D5155%2Cm_mts_a&amp;amp;if=false&amp;amp;ts=1576684838096&amp;amp;sw=1920&amp;amp;sh=1080&amp;amp;v=2.9.15&amp;amp;r=stable&amp;amp;a=tmtealium&amp;amp;ec=0&amp;amp;o=30&amp;amp;fbp=fb.1.1576684798512.1946041422&amp;amp;it=15xxxxxxxxxx4&amp;amp;coo=false&amp;amp;rqm=GET&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;With that request, it sends a cookie called &lt;code&gt;fr&lt;/code&gt; which is set to &lt;code&gt;10oGXEcKfGekg67iy.AWVdJq5MG3VLYaNjz4MTNRaU1zg.Bd-kxt.KU.F36.0.0.Bd-kx6.&lt;/code&gt; (which I guess is my Facebook ad tracking ID)&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;So the three most notable things that are being sent in the tracking pixel query string are:&lt;/p&gt;
&lt;h3 id=&quot;now-let-s-visit-facebook&quot;&gt;now let’s visit Facebook!&lt;/h3&gt;
&lt;p&gt;Next, let’s visit Facebook, where I’m logged in. What cookies is my browser sending Facebook?&lt;/p&gt;
&lt;p&gt;Unsurprisingly, it’s the same &lt;code&gt;fr&lt;/code&gt; cookie from before: &lt;code&gt;10oGXEcKfGekg67iy.AWVdJq5MG3VLYaNjz4MTNRaU1zg.Bd-kxt.KU.F36.0.0.Bd-kx6.&lt;/code&gt;. So Facebook now definitely knows that I (Julia Evans, the person with this Facebook account) visited the Old Navy website a couple of minutes ago and looked at a “Soft-Brushed Plaid Topcoat for Men”, because they can use that identifier to match up the data.&lt;/p&gt;
&lt;h3 id=&quot;these-cookies-are-third-party-cookies&quot;&gt;these cookies are third-party cookies&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;fr&lt;/code&gt; cookie that Facebook is using to track what websites I go to is called a “third party cookie”, because Old Navy’s website is using it to identify me to a third party (facebook.com). This is different from first-party cookies, which are used to keep you logged in.&lt;/p&gt;
&lt;p&gt;Safari and Firefox both block many third-party cookies by default (which is why I had to change Firefox’s privacy settings to get this experiment to work), and as of today Chrome doesn’t (presumably because Chrome is owned by an ad company).&lt;/p&gt;
&lt;h3 id=&quot;sites-have-lots-of-tracking-pixels&quot;&gt;sites have lots of tracking pixels&lt;/h3&gt;
&lt;p&gt;Like I expected, sites have &lt;strong&gt;lots&lt;/strong&gt; of tracking pixels. For example, wrangler.com loaded 19 different tracking pixels in my browser from a bunch of different domains. The tracking pixels on wrangler.com came from: &lt;code&gt;ct.pinterest.com&lt;/code&gt;, &lt;code&gt;af.monetate.net&lt;/code&gt;, &lt;code&gt;csm.va.us.criteo.net&lt;/code&gt;, &lt;code&gt;google-analytics.com&lt;/code&gt;, &lt;code&gt;dpm.demdex.net&lt;/code&gt;, &lt;code&gt;google.ca&lt;/code&gt;, &lt;code&gt;a.tribalfusion.com&lt;/code&gt;, &lt;code&gt;data.photorank.me&lt;/code&gt;, &lt;code&gt;stats.g.doubleclick.net&lt;/code&gt;, &lt;code&gt;vfcorp.dl.sc.omtrdc.net&lt;/code&gt;, &lt;code&gt;ib.adnxs.com&lt;/code&gt;, &lt;code&gt;idsync.rlcdn.com&lt;/code&gt;, &lt;code&gt;p.brsrvr.com&lt;/code&gt;, and &lt;code&gt;adservice.google.com&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;For most of these trackers, Firefox helpfully pointed out that it would have blocked them if I was using the standard Firefox privacy settings:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://jvns.ca/images/firefox-helpful.png&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;why-browsers-matter&quot;&gt;why browsers matter&lt;/h3&gt;
&lt;p&gt;The reason browsers matter so much is that your browser has the final word on what information it sends about you to which websites. The Javascript on the Old Navy’s website can ask your browser to send tracking information about you to Facebook, but your browser doesn’t have to do it! It can decide “oh yeah, I know that facebook.com/tr/ is a tracking pixel, I don’t want my users to be tracked, I’m just not going to send that request”.&lt;/p&gt;
&lt;p&gt;And it can make that behaviour configurable by changing browser settings or installing browser extensions, which is why there are lots of privacy extensions.&lt;/p&gt;
&lt;h3 id=&quot;it-s-fun-to-see-how-this-works&quot;&gt;it’s fun to see how this works!&lt;/h3&gt;
&lt;p&gt;I think it’s fun to see how cookies / tracking pixels are used to track you in practice, even if it’s kinda creepy! I sort of knew how this worked before but I’d never actually looked at the cookies on a tracking pixel myself or what kind of information it was sending in its query parameters exactly.&lt;/p&gt;
&lt;p&gt;And if you know how it works, it’s a easier to figure out how to be tracked less!&lt;/p&gt;
&lt;h3 id=&quot;what-can-you-do&quot;&gt;what can you do?&lt;/h3&gt;
&lt;p&gt;I do a few small things to get tracked on the internet a little less:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;install an adblocker (like ublock origin or something), which will block a lot of tracker domains&lt;/li&gt;
&lt;li&gt;use Firefox/Safari instead of Chrome (which have stronger default privacy settings right now)&lt;/li&gt;
&lt;li&gt;use the &lt;a href=&quot;https://addons.mozilla.org/en-CA/firefox/addon/facebook-container/&quot;&gt;Facebook Container&lt;/a&gt; Firefox extension, which takes extra steps to specifically prevent Facebook from tracking you&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;There are still lots of other ways to be tracked on the internet (especially when using mobile apps where you don’t have the same kind of control as with your browser), but I like understanding how this one method of tracking works and think it’s nice to be tracked a little bit less.&lt;/p&gt;
</description>
<pubDate>Thu, 19 Dec 2019 05:07:12 +0000</pubDate>
<dc:creator>dailymorn</dc:creator>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://jvns.ca/blog/how-tracking-pixels-work/</dc:identifier>
</item>
<item>
<title>Building a new Windows 3.1 app in 2019: A Slack Client</title>
<link>http://yeokhengmeng.com/2019/12/building-a-new-win-3-1-app-in-2019-part-1-slack-client/</link>
<guid isPermaLink="true" >http://yeokhengmeng.com/2019/12/building-a-new-win-3-1-app-in-2019-part-1-slack-client/</guid>
<description>&lt;p&gt;In October 2019, my company SP Digital held an internal hackathon. My colleague &lt;a href=&quot;https://twitter.com/subhransu&quot;&gt;Subhransu&lt;/a&gt; and I worked on a whacky idea of writing a brand-new &lt;a href=&quot;https://en.wikipedia.org/wiki/Windows_3.1x&quot;&gt;Windows 3.1&lt;/a&gt; app which was an OS released almost 30 years ago. The idea we chose was a Slack client. After all, Slack clients exist for most platforms but I’m certain one does not exist for Windows 3.1.&lt;/p&gt;
&lt;p&gt;A few months later in Dec 2019, I would join the &lt;a href=&quot;https://supersillyhackathon.sg/&quot;&gt;Super Silly Hackathon&lt;/a&gt; for the second time with fellow retrocomputing enthusiast &lt;a href=&quot;https://www.chenhuijing.com/&quot;&gt;Hui Jing&lt;/a&gt;. We would develop a small game for Win 3.1 with great help from the knowledge gained from this first project.&lt;/p&gt;
&lt;p&gt;For Part 1, I shall detail the learnings and process for how a new old app can be created with the aid of modern tools and hindsight of old technologies. And perhaps what lessons can it offer us today. This blog post is a few months late as I needed time to clean up the code and write the documentation.&lt;/p&gt;
&lt;p&gt;I shall leave Part 2 in a separate blog post to be written by Hui Jing.&lt;/p&gt;

&lt;p&gt;Of course let’s take a look at the app.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-shot.png&quot;&gt;&lt;img class=&quot;alignnone size-full wp-image-3361&quot; src=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-shot.png&quot; alt=&quot;&quot; width=&quot;450&quot; height=&quot;450&quot; srcset=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-shot.png 450w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-shot-150x150.png 150w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-shot-300x300.png 300w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-shot-250x250.png 250w&quot; sizes=&quot;(max-width: 450px) 100vw, 450px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I did not have the time to resolve the user IDs to the actual names.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-both.jpg&quot;&gt;&lt;img class=&quot;alignnone wp-image-3408&quot; src=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-both-1024x408.jpg&quot; alt=&quot;&quot; width=&quot;600&quot; height=&quot;239&quot; srcset=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-both-1024x408.jpg 1024w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-both-300x120.jpg 300w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-both-768x306.jpg 768w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-both-627x250.jpg 627w&quot; sizes=&quot;(max-width: 600px) 100vw, 600px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;iframe src=&quot;https://www.youtube.com/embed/vuofFUCo2Qc&quot; width=&quot;560&quot; height=&quot;315&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;allowfullscreen&quot;&gt;[embedded content]&lt;/iframe&gt;P&lt;br/&gt;Picture and video of the app in action. Left is my &lt;a href=&quot;http://yeokhengmeng.com/2016/09/windows-for-workgroups-3-11-on-vintage-and-modern-hardware-in-2016/&quot;&gt;Thinkpad 390e running Windows 3.1&lt;/a&gt;. On the right is my Mac with the Slack client for verification.&lt;/p&gt;
&lt;p&gt;If you are too lazy to continue reading and want to dive into code, here is the &lt;a href=&quot;https://github.com/yeokm1/w31slack&quot;&gt;repository on Github https://github.com/yeokm1/w31slack&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Or to be more precise, why &lt;a href=&quot;https://en.wikipedia.org/wiki/Windows_3.1x#Windows_for_Workgroups_3.11&quot;&gt;Windows For Workgroups (WFW) 3.11&lt;/a&gt;? There is a special reason for this, WFW 3.11 released in 1993 is the first Windows OS for consumers to have network installable TCP/IP support. Therefore, if one wants to write an app using Windows OS standard APIs, WFW 3.11 is the oldest one can go back without putting in even more exponential effort.&lt;/p&gt;
&lt;p&gt;Nevertheless, as you will see, the effort to put in to write such an app is still herculean in its own right. &lt;strong&gt;Windows 3.1 also largely consumes 16-bit apps&lt;/strong&gt; which is the tail-end of that era before Windows 95 came in.&lt;/p&gt;

&lt;p&gt;The most important aspect of developing an app is the compiler toolchain. Everything has to revolve around it and this project is no exception.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-compile.png&quot;&gt;&lt;img class=&quot;alignnone wp-image-3417&quot; src=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-compile.png&quot; alt=&quot;&quot; width=&quot;500&quot; height=&quot;319&quot; srcset=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-compile.png 821w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-compile-300x191.png 300w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-compile-768x490.png 768w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-compile-392x250.png 392w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;For this, we have the Visual C++ 1.52. This is the last VC++ compiler from Microsoft that can target for WFW 3.11. VC++ 1.52 is itself a 16-bit program so it can only be run on 32-bit Windows. Theoretically it should run even on Windows 10 32-bit but I did not have such a native setup lying around.&lt;/p&gt;
&lt;p&gt;So I had to take the Virtual Machine option using Windows 2000 with the following considerations in mind.&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;Oldest Windows OS with full Virtualbox support of drivers, network and bidirectional clipboard&lt;/li&gt;
&lt;li&gt;No product activation unlike its successor Windows XP&lt;/li&gt;
&lt;li&gt;Lightest resource usage with smallest disk footprint&lt;/li&gt;
&lt;li&gt;Compatible with both Windows 10/Mac and Windows 3.1 SMB file sharing&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;Testing a 16-bit program on a 32-bit OS VM is not a very realistic scenario as VMs can be too perfect. We need to occasionally test our app on the actual ancient hardware with WFW 3.11 during development.&lt;/p&gt;
&lt;p&gt;Also, we can’t write our code directly on the Windows 2000 VM as it has limited software support for modern IDEs like Visual Studio Code not to mention security issues.&lt;/p&gt;
&lt;p&gt;Windows 10 and Mac cannot directly talk to the ancient SMB protocol used by WFW 3.11.&lt;/p&gt;
&lt;h2&gt;Hardware setup&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-setup.jpg&quot;&gt;&lt;img class=&quot;alignnone wp-image-3365&quot; src=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-setup-1024x324.jpg&quot; alt=&quot;&quot; width=&quot;700&quot; height=&quot;222&quot; srcset=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-setup-1024x324.jpg 1024w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-setup-300x95.jpg 300w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-setup-768x243.jpg 768w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-setup-789x250.jpg 789w&quot; sizes=&quot;(max-width: 700px) 100vw, 700px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Primary development is done on the Mac with Visual Studio Code editor with the files residing on the Mac file system. VC++ 1.52 will access the source files using a mapped drive on SMB share and do the compilation.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-app2k.png&quot;&gt;&lt;img class=&quot;alignnone wp-image-3367&quot; src=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-app2k.png&quot; alt=&quot;&quot; width=&quot;600&quot; height=&quot;301&quot; srcset=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-app2k.png 991w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-app2k-300x150.png 300w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-app2k-768x385.png 768w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-app2k-498x250.png 498w&quot; sizes=&quot;(max-width: 600px) 100vw, 600px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I can do intermediate testing on Win 2K since it can run 16-bit apps.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-wfw-smb-share.png&quot;&gt;&lt;img class=&quot;alignnone wp-image-3368&quot; src=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-wfw-smb-share.png&quot; alt=&quot;&quot; width=&quot;600&quot; height=&quot;170&quot; srcset=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-wfw-smb-share.png 664w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-wfw-smb-share-300x85.png 300w&quot; sizes=&quot;(max-width: 600px) 100vw, 600px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;With Win 2K VM configured to use a bridged network and thus the same subnet, my native WFW 3.11 system can access the SMB share folder of the Win 2K VM as seen above. That’s actually the first time I saw the network drive icon in File Manager.&lt;/p&gt;
&lt;p&gt;Notice the binary size of the app is only 64KiB. That’s many orders of magnitude smaller then the modern Slack app on the App store 😛&lt;/p&gt;

&lt;p&gt;Coding an ancient app presents some very unique challenges not seen when using modern toolchains and programming languages. I had to wade through many issues which I detail the following key ones.&lt;/p&gt;
&lt;h2&gt;API Documentation&lt;/h2&gt;
&lt;p&gt;API documentation and usage examples are very important when it comes to software development. Typically, programmers will rely quite heavily on Google and Stackoverflow.&lt;/p&gt;
&lt;p&gt;Alas, Win 3.1 only came during the dawn of the internet era and Google cannot help if relevant websites do not even exist. Basically Windows 3.1, its API documentation and problems can’t be Googled easily, one has to rely on a more traditional method like books!&lt;/p&gt;
&lt;h3&gt;Reference Book&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-book.jpg&quot;&gt;&lt;img class=&quot;alignnone wp-image-3370&quot; src=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-book-1024x746.jpg&quot; alt=&quot;&quot; width=&quot;500&quot; height=&quot;364&quot; srcset=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-book-1024x746.jpg 1024w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-book-300x218.jpg 300w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-book-768x559.jpg 768w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-book-343x250.jpg 343w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-book.jpg 1185w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I purchased this book &lt;a href=&quot;https://www.amazon.com/Programming-Windows-3-1-Charles-Petzold/dp/1556153953/&quot;&gt;Programming Windows 3.1 by Charles Petzold from Amazon&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-book-back.jpg&quot;&gt;&lt;img class=&quot;alignnone wp-image-3371&quot; src=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-book-back-916x1024.jpg&quot; alt=&quot;&quot; width=&quot;500&quot; height=&quot;559&quot; srcset=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-book-back-916x1024.jpg 916w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-book-back-268x300.jpg 268w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-book-back-768x859.jpg 768w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-book-back-224x250.jpg 224w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-book-back.jpg 1084w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;“If you are going to program for Windows (3.1), buy this book. It will pay for itself in a matter of hours.”&lt;/em&gt; I concur with this.&lt;/p&gt;
&lt;p&gt;Try as I might I could not find a softcopy of this book which means I had to do things the old-fashioned way when I comes to research. Going by contents page and index for starters. If it may help others, I uploaded the sample codes of the floppy disk onto &lt;a href=&quot;https://github.com/yeokm1/programming-win31&quot;&gt;this Github repo&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Header file inspection&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-headers.png&quot;&gt;&lt;img class=&quot;alignnone wp-image-3373&quot; src=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-headers.png&quot; alt=&quot;&quot; width=&quot;600&quot; height=&quot;350&quot; srcset=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-headers.png 1006w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-headers-300x175.png 300w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-headers-768x447.png 768w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-headers-429x250.png 429w&quot; sizes=&quot;(max-width: 600px) 100vw, 600px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Sometimes I have to use certain APIs that may not be documented in the book, for example network APIs. In this case, I’ll have to manually inspect the header files in the compiler’s “include” directory to see what parameters are required for the functions.&lt;/p&gt;
&lt;h3&gt;Inverse deduction from modern Windows API&lt;/h3&gt;
&lt;p&gt;Looking up the function parameters may not be always sufficient as I need to know what the function actually does. Here is where Microsoft’s legendary backward compatibility becomes useful. Many modern Windows APIs are very similar to the traditional ones. Microsoft even has this &lt;a href=&quot;https://docs.microsoft.com/en-us/cpp/windows/walkthrough-creating-windows-desktop-applications-cpp?view=vs-2019&quot;&gt;walkthrough&lt;/a&gt; to create an app the traditional way.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The Windows API (also known as the Win32 API, Windows Desktop API, and Windows Classic API) is a C-language-based framework for creating Windows applications. It has been in existence since the 1980s and has been used to create Windows applications for decades. More advanced and easier-to-program frameworks have been built on top of the Windows API. For example, MFC, ATL, the .NET frameworks. Even the most modern Windows Runtime code for UWP and Store apps written in C++/WinRT uses the Windows API underneath.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Even if the modern APIs are different, the documentation may give me enough information to deduce what the older APIs do.&lt;/p&gt;
&lt;h2&gt;C89 language&lt;/h2&gt;
&lt;p&gt;VC++ 1.52 was released in the early 1990s obviously only supported the C standard of that era which was C89. Even though I use C quite a lot in my work, C89 has several intricacies that made my life harder.&lt;/p&gt;
&lt;h3&gt;Variable declaration at beginning of function scope&lt;/h3&gt;
&lt;p&gt;Basically this means I cannot declare a variable in the middle of a function. To get an idea how troublesome this is, take a look at this code sample.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-c89-vars.png&quot;&gt;&lt;img class=&quot;alignnone wp-image-3375&quot; src=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-c89-vars.png&quot; alt=&quot;&quot; width=&quot;500&quot; height=&quot;338&quot; srcset=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-c89-vars.png 909w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-c89-vars-300x203.png 300w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-c89-vars-768x519.png 768w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-c89-vars-370x250.png 370w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This sample code deals with the event loop in receiving callbacks from Windows. The variables ever used in this function has to be declared at the top not when I need to use them. So lots of work scrolling up and down.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://news.ycombinator.com/item?id=21832815&quot;&gt;userbinator on Hackernews had this to say&lt;/a&gt;: “Note that C89 only prevents declarations of variables in the middle of a &lt;em&gt;scope&lt;/em&gt;; you can simply create an inner scope with new variable declarations at &lt;em&gt;its&lt;/em&gt; start.”&lt;/p&gt;
&lt;h3&gt;No safe functions&lt;/h3&gt;
&lt;p&gt;I was taught to use “safer” functions like &lt;em&gt;snprintf&lt;/em&gt; vs &lt;em&gt;sprintf&lt;/em&gt;. The newer functions which allow the programmer to specify the number bytes to use thus preventing dangerous buffer overflows. These functions only came out in C99 so no go for me. I have to be very careful in defining my buffer sizes.&lt;/p&gt;
&lt;h3&gt;Lack of libraries&lt;/h3&gt;
&lt;p&gt;The ancient C89-only support rules out many C libraries I can find online. C is a hard-enough language, no library support means doing a lot of work by hand.&lt;/p&gt;
&lt;h2&gt;Memory Allocation&lt;/h2&gt;
&lt;p&gt;This was an extremely tough nut to crack that would have been impossible for me to solve without Petzold’s book.&lt;/p&gt;
&lt;p&gt;The stack size of a 16-bit program is typically 4-6 KiB with a similar size for the heap. This is smaller than the size of the HTTP reply + JSON returned by Slack!&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In the context of IBM PC compatible and Wintel platforms, a 16-bit application is any software written for MS-DOS, OS/2 1.x or early versions of Microsoft Windows which originally ran on the 16-bit Intel 8088 and Intel 80286 microprocessors. Such applications used a 20-bit or 24-bit segment or selector-offset address representation to extend the range of addressable memory locations beyond what was possible using only 16-bit addresses.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Programs containing more than 2^16 bytes (65,536 bytes) of instructions and data therefore required special instructions to switch between their 64-kilobyte segments, increasing the complexity of programming 16-bit applications&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Source: &lt;a href=&quot;https://en.wikipedia.org/wiki/16-bit#16-bit_application&quot;&gt;https://en.wikipedia.org/wiki/16-bit#16-bit_application&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Wikipedia is so correct !^^^&lt;/p&gt;
&lt;p&gt;The following 2 pages literally saved me from hours of Googling assuming Google turns out any answer at all!&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-allocmem.jpg&quot;&gt;&lt;img class=&quot;alignnone wp-image-3395&quot; src=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-allocmem-952x1024.jpg&quot; alt=&quot;&quot; width=&quot;500&quot; height=&quot;538&quot; srcset=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-allocmem-952x1024.jpg 952w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-allocmem-279x300.jpg 279w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-allocmem-768x826.jpg 768w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-allocmem-232x250.jpg 232w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-allocmem.jpg 978w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-memapi.jpg&quot;&gt;&lt;img class=&quot;alignnone wp-image-3396&quot; src=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-memapi-818x1024.jpg&quot; alt=&quot;&quot; width=&quot;500&quot; height=&quot;626&quot; srcset=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-memapi-818x1024.jpg 818w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-memapi-240x300.jpg 240w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-memapi-768x962.jpg 768w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-memapi-200x250.jpg 200w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-memapi.jpg 1125w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;To allocate a “large” chunk of memory from the APIs described in the book, we need to allocate them from the Global heap. This is what I did below.&lt;/p&gt;
&lt;pre class=&quot;brush: plain; title: ; notranslate&quot; title=&quot;&quot;&gt;
#include &amp;lt;windowsx.h&amp;gt;

//Up to 64K is possible
#define MAX_GLOBAL_MEM_ALLOCATION 32000

LPSTR lpGlobalMemory;
DWORD allocatedMemorySize;

lpGlobalMemory = GlobalAllocPtr(GMEM_MOVEABLE, MAX_GLOBAL_MEM_ALLOCATION);
allocatedMemorySize = GlobalSize(GlobalPtrHandle(lpGlobalMemory));

printf(&quot;We got allocated %u bytes of memory\n&quot;, allocatedMemorySize);,

GlobalFreePtr(lpGlobalMemory);
&lt;/pre&gt;
&lt;p&gt;LPSTR is a “FAR” 32-bit pointer which enables greater range of memory. The conventional “char” pointer type is only 16-bit in this era. We tell WFW 3.11 how much we hope to allocate. After allocating the memory, remember to verify how much was actually allocated. After you finish using the memory remember to free it.&lt;/p&gt;
&lt;h2&gt;Networking&lt;/h2&gt;
&lt;h3&gt;HTTPS issues&lt;/h3&gt;
&lt;p&gt;Secure Rest API communication via HTTPS is the norm today when it comes to dealing with web services. However it was not really so in that era.&lt;/p&gt;
&lt;p&gt;WFW 3.11 uses the &lt;a href=&quot;https://en.wikipedia.org/wiki/Winsock&quot;&gt;Windows Sockets API (Winsock)&lt;/a&gt; version 1.1. The &lt;a href=&quot;https://docs.microsoft.com/en-us/windows/win32/winsock/using-secure-socket-extensions&quot;&gt;Secure Socket Extensions to Winsock&lt;/a&gt; only came out in version 2. The conventional way is to use OpenSSL but it’s so complex that there’s no reasonable chance of me porting that entire project to support C89 on WFW 3.11.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-https-proxy.png&quot;&gt;&lt;img class=&quot;alignnone wp-image-3377&quot; src=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-https-proxy-1024x296.png&quot; alt=&quot;&quot; width=&quot;600&quot; height=&quot;173&quot; srcset=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-https-proxy-1024x296.png 1024w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-https-proxy-300x87.png 300w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-https-proxy-768x222.png 768w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-https-proxy-866x250.png 866w&quot; sizes=&quot;(max-width: 600px) 100vw, 600px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;After much hesitation and reluctance, I decided to cheat and write my own &lt;a href=&quot;https://github.com/yeokm1/http-to-https-proxy&quot;&gt;http-to-https-proxy&lt;/a&gt; in Golang. Acting as a transparent middleman, it inspects the host field of the HTTP requests and forwards the raw socket bytes as HTTPS to Slack’s servers. The result is then relayed back byte-for-byte back to the app.&lt;/p&gt;
&lt;p&gt;Purists may not like this solution but this is the best I can do with my abilities in a reasonable amount of time.&lt;/p&gt;
&lt;p&gt;It just came to my attention an existing project called &lt;a href=&quot;https://www.stunnel.org/&quot;&gt;stunnel&lt;/a&gt; already exists so this self-written proxy is not necessary. Oh well, at least I did learn something out of this.&lt;/p&gt;
&lt;h3&gt;Socket Programming&lt;/h3&gt;
&lt;p&gt;The last time I did low-level socket programming was in university. This days with modern programming languages and APIs, everything is done for you. But no such libraries exist for C89 last I checked. So I had construct the entire POST request by hand and call the socket APIs directly.&lt;/p&gt;
&lt;pre class=&quot;brush: plain; title: ; notranslate&quot; title=&quot;&quot;&gt;
#include &amp;lt;winsock.h&amp;gt;

#pragma comment(lib,&quot;winsock.lib&quot;)
#define POST_MESSAGE_FORMAT &quot;POST /api/chat.postMessage?channel=%s&amp;amp;as_user=true&amp;amp;text=%s HTTP/1.1\r\nHost: slack.com\r\nAuthorization: Bearer %s\r\nAccept: */*\r\nConnection: close\r\n\r\n&quot;

WSADATA wsaData;
struct sockaddr_in serveraddr;

WORD wVersionRequested = MAKEWORD(1, 1);
nErrorStatus = WSAStartup(wVersionRequested, &amp;amp;wsaData);

sock = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);

memset(&amp;amp;serveraddr, 0, sizeof(serveraddr));
serveraddr.sin_family      = AF_INET;
serveraddr.sin_addr.s_addr = inet_addr(ipaddress);
serveraddr.sin_port        = htons((unsigned short) port);
error = connect(socketID, (struct sockaddr *) &amp;amp;serveraddr, sizeof(serveraddr));

sprintf(buff, POST_MESSAGE_FORMAT, &quot;win31&quot;, &quot;hello&quot;, &quot;token&quot;);
bytesSent = send(socketID, request, requestLength, 0);
bytesReceivedThisInstant = recv(socketID, (char *) &amp;amp;buff, 1, 0);

closesocket(socketID);
WSACleanup();
&lt;/pre&gt;
&lt;p&gt;The above code starts the Winsock API, creates the TCP socket, connects to it, constructs the request, sends the request, receives the reply, closes the socket, stops the Winsock API.&lt;/p&gt;
&lt;p&gt;Most requests today use the &lt;em&gt;“Content-Encoding: deflate, gzip”&lt;/em&gt; option by default to enable compression to reduce bandwidth requirements. Here I have no means to decompress it so this is left out to force the server to give the reply in pure text format.&lt;/p&gt;
&lt;p&gt;I believe deep down in all networking libraries, this is how things are done. Just that now I don’t have the benefit of this abstraction.&lt;/p&gt;
&lt;h3&gt;JSON parsing&lt;/h3&gt;
&lt;p&gt;The output of most REST APIs are in JSON format. Again, no native JSON decoding APIs are available on VC++ 1.52. After much hunting, I found C89-compatible JSON parser called &lt;a href=&quot;https://github.com/zserge/jsmn&quot;&gt;JSMN,&lt;/a&gt; however it has some quirks that make using it more challenging.&lt;/p&gt;
&lt;p&gt;Typical JSON parsers provide a dictionary output where you can access the stored values by providing a key.&lt;/p&gt;
&lt;pre class=&quot;brush: plain; title: ; notranslate&quot; title=&quot;&quot;&gt;
value = jsonDictionary['key']
&lt;/pre&gt;
&lt;p&gt;However for memory-saving reasons, JSMN does not output a dictionary. It gives out an array of tokens structs that points to the token boundaries in the original JSON string. Let’s give an example from my code&lt;/p&gt;
&lt;pre class=&quot;brush: plain; title: ; notranslate&quot; title=&quot;&quot;&gt;
#include &quot;jsmn.h&quot;

jsmn_parser parser;
jsmntok_t tokens[MAX_TOKENS];
jsmntok_t currentToken;
char currentTokenString[MAX_TOKEN_KEYWORD_SIZE];
LPSTR startOfJson;
DWORD lengthOfJson;

jsmn_init(&amp;amp;parser);
jsmn_parse(&amp;amp;parser, jsonString, lengthOfJson, tokens, MAX_TOKENS);

for(index = 0; index &amp;lt; MAX_TOKENS; index++){
   currentToken = tokens[index];
   tokenStartPosition = currentToken.start;
   tokenSize = currentToken.end - tokenStartPosition;

   if(tokenSize &amp;lt;= 0){ continue; } if(tokenSize &amp;gt; MAX_TOKEN_KEYWORD_SIZE){
      continue;
   }

   memset(currentTokenString, 0, MAX_TOKEN_KEYWORD_SIZE);
   _fmemcpy(currentTokenString, startOfJson + tokenStartPosition, tokenSize);

   printf(&quot;Current token %s\n&quot;, currentTokenString);

}
&lt;/pre&gt;
&lt;p&gt;What’s happening above is that I’m iterating through all tokens provided by JSMN and attempting to print them out. JSMN provides the start and end positions of the parent array hence I need to use those values to copy out from memory to a separate char array for printing purposes. Certainly not so trivial.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;“_fmemcpy”&lt;/em&gt; is the FAR pointer equivalent for “memcpy” specific only to the Windows platform. I slightly modified the source code of JSMN to enable it to take larger arrays based on the LPSTR data type.&lt;/p&gt;
&lt;h2&gt;Testing&lt;/h2&gt;
&lt;p&gt;Test-driven development (TDD) is used quite often in modern software development but it wasn’t so in that era. Testing I felt was extremely critical even for this Science Project as I wanted to make sure my code would work in their unit forms.&lt;/p&gt;
&lt;p&gt;VC++ 1.52 does not seem to have testing facilities built in. I could not find a C89-compatible C testing framework that could work with VC++ 1.52 so I rolled a basic one on my own.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-testing.png&quot;&gt;&lt;img class=&quot;alignnone wp-image-3397&quot; src=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-testing-1024x782.png&quot; alt=&quot;&quot; width=&quot;600&quot; height=&quot;458&quot; srcset=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-testing-1024x782.png 1024w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-testing-300x229.png 300w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-testing-768x587.png 768w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-testing-327x250.png 327w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-testing.png 1191w&quot; sizes=&quot;(max-width: 600px) 100vw, 600px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I created a duplicate project called Test.mak which will compile “TestMain.C” which include the individual testing “test.h” functions within each package. When running the tests,  “test.h” will execute the individual tests in its file which will in turn test the functions in the package.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-test.png&quot;&gt;&lt;img class=&quot;alignnone size-full wp-image-3398&quot; src=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-test.png&quot; alt=&quot;&quot; width=&quot;469&quot; height=&quot;295&quot; srcset=&quot;http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-test.png 469w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-test-300x189.png 300w, http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-test-397x250.png 397w&quot; sizes=&quot;(max-width: 469px) 100vw, 469px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Test results are then shown in the VC++ debugger output.&lt;/p&gt;
&lt;h3&gt;Mock Servers&lt;/h3&gt;
&lt;p&gt;Due to my unfamiliarity with the Winsock APIs, I actually wrote mock servers in Golang to replay or reply to HTTP sockets requests that will be made during the testing process. Consult &lt;a href=&quot;https://github.com/yeokm1/w31slack&quot;&gt;repo&lt;/a&gt; to find out more!&lt;/p&gt;

&lt;p&gt;This project would not have been possible without the sample guide from &lt;a href=&quot;http://www.transmissionzero.co.uk/computing/win16-apps-in-c/&quot; rel=&quot;nofollow&quot;&gt;Transmission Zero Building Win16 GUI Applications in C&lt;/a&gt; and my colleague Subh who worked with me during the company hackathon.&lt;/p&gt;
&lt;p&gt;Without the benefit of modern libraries and languages, I had to read up and take care of many low level details, socket programming, HTTP, JSON parsing, UI design in code all under tight memory constraints. The extremely unstable and crash-prone WFW 3.1 did not help. Nevertheless, it was a terrific lesson in understanding how things work under the hood.&lt;/p&gt;
&lt;p&gt;I had to do things the old-fashioned way reading books and header files due to the dearth of online documentation. I can empathise with the plight of the programmers of yesteryears who had to code without the benefit of online search engines.&lt;/p&gt;
&lt;p&gt;If you read to this point, I’m sure you are one of those interested to see how an ancient app can be created with the aid of modern tools and hindsight of old technologies. With this blog post, I hope you enjoyed learning about the extremely painful development process for the newest Windows 3.1 app that’s released in the world today.&lt;/p&gt;
&lt;p&gt;And look out for Part 2 of my journey with Hui Jing for our game for Windows 3.1! 🙂&lt;/p&gt;
&lt;h3&gt;Comments&lt;/h3&gt;
&lt;p&gt;comments&lt;/p&gt;


</description>
<pubDate>Thu, 19 Dec 2019 04:05:40 +0000</pubDate>
<dc:creator>yeokm1</dc:creator>
<og:title>Building a new Win 3.1 app in 2019 Part 1: Slack client</og:title>
<og:url>http://yeokhengmeng.com/2019/12/building-a-new-win-3-1-app-in-2019-part-1-slack-client/</og:url>
<og:type>article</og:type>
<og:description>In October 2019, my company SP Digital held an internal hackathon. My colleague Subhransu and I worked on a whacky idea of writing a brand-new Windows 3.1 app which was an OS released almost 30 years ago. The idea we chose was a Slack client. After all, Slack clients exist for most platforms but I'm</og:description>
<og:image>http://yeokhengmeng.com/wp-content/uploads/2019/12/wfwslack-shot.png</og:image>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://yeokhengmeng.com/2019/12/building-a-new-win-3-1-app-in-2019-part-1-slack-client/</dc:identifier>
</item>
</channel>
</rss>