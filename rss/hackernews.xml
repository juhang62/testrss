<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=hnrss.org%2Fnewest%3Fpoints%3D200&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://hnrss.org/newest?points=200" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>Hacker News: Newest</title>
<link>https://news.ycombinator.com/newest</link>
<description>Hacker News RSS</description>
<item>
<title>Show HN: I built an After Effects for dummies</title>
<link>https://storycreatorapp.com</link>
<guid isPermaLink="true" >https://storycreatorapp.com</guid>
<description>[unable to retrieve full-text content]
&lt;p&gt;Article URL: &lt;a href=&quot;https://storycreatorapp.com&quot;&gt;https://storycreatorapp.com&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Comments URL: &lt;a href=&quot;https://news.ycombinator.com/item?id=24054382&quot;&gt;https://news.ycombinator.com/item?id=24054382&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Points: 308&lt;/p&gt;
&lt;p&gt;# Comments: 108&lt;/p&gt;
</description>
<pubDate>Tue, 04 Aug 2020 20:52:59 +0000</pubDate>
<dc:creator>michaelaubry</dc:creator>
<og:url>/</og:url>
<og:title>Story Creator - Social Media Video Editor For Brands &amp; Agencies</og:title>
<og:description>Story Creator is an easy and powerful social media video editor. Create your first video with subtitles, music, images to video, motion graphic elements, and much more.</og:description>
<og:image>https://storycreatorapp.com/static/images/og/og-home.png</og:image>
<og:type>website</og:type>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://storycreatorapp.com/</dc:identifier>
</item>
<item>
<title>1Password for Linux development preview</title>
<link>https://discussions.agilebits.com/discussion/114964/</link>
<guid isPermaLink="true" >https://discussions.agilebits.com/discussion/114964/</guid>
<description>&lt;p&gt;A full-featured Linux desktop app has been our most requested feature by far and responsible for the &lt;a rel=&quot;nofollow&quot; href=&quot;https://discussions.agilebits.com/discussion/2846/new-product-request-1password-for-linux&quot;&gt;longest forum post&lt;/a&gt; in our history. Today we‚Äôre thrilled to announce that 1Password is coming to Linux! üéâ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://com-agilebits-users.s3.amazonaws.com/dave/1password-linux-hero-nonscaled-web-iNFpMV172f7S.png&quot; alt=&quot;1Password for Linux running on Ubuntu&quot; class=&quot;embedImage-img importedEmbed-img&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Planned for official release later this year, we couldn‚Äôt wait to share the news with you so today we‚Äôre unveiling &lt;span&gt;an alpha&lt;/span&gt; a development preview so you can join in on the fun.&lt;/p&gt;
&lt;h2 data-id=&quot;not-exactly-an-lts-release&quot;&gt;Not exactly an LTS release&lt;/h2&gt;
&lt;p&gt;This isn‚Äôt a long-term support release! You can expect many updates and changes over the next few months as many features are not complete yet. For example, the app is currently read only: there is no item editing, creation of vaults, or item organization.&lt;/p&gt;
&lt;p&gt;As such this initial release should be used &lt;strong&gt;for testing and validation purposes only and is not suitable for business critical environments&lt;/strong&gt;. For a stable experience on Linux you‚Äôll want to use &lt;a rel=&quot;nofollow&quot; href=&quot;https://support.1password.com/explore/whats-new-1password-x/&quot;&gt;1Password X&lt;/a&gt; in your browser.&lt;/p&gt;
&lt;h2 data-id=&quot;a-true-linux-app&quot;&gt;A true Linux app&lt;/h2&gt;
&lt;p&gt;Our new app is built to meet the security and performance expectations of Linux users. Its backend is written completely in Rust, a secure systems programming language that has made a lot of waves in the Linux community. We‚Äôre especially proud to be using the incredible  to power the end-to-end encryption that keeps your data safe.&lt;/p&gt;
&lt;p&gt;In addition to a secure foundation we‚Äôve tailored the app to integrate with Desktop Linux with features like:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Simple and secure installs using apt and dnf packager managers üì¶&lt;/li&gt;
&lt;li&gt;Automatic Dark Mode selection based on your GTK theme üåì&lt;/li&gt;
&lt;li&gt;Open network locations (FTP, SSH, SMB) üåç&lt;/li&gt;
&lt;li&gt;Tiling window manager support and descriptive window titles üè†&lt;/li&gt;
&lt;li&gt;Unlock with your Linux user account, including biometrics ‚òùÔ∏è&lt;/li&gt;
&lt;li&gt;System tray icon for staying unlocked while closed üìå&lt;/li&gt;
&lt;li&gt;X11 clipboard integration and clearing ‚úÇÔ∏è&lt;/li&gt;
&lt;li&gt;Keyboard shortcuts ‚å®Ô∏è&lt;/li&gt;
&lt;li&gt;Data export ‚úàÔ∏è&lt;/li&gt;
&lt;li&gt;Unlock multiple accounts with different passwords üîê&lt;/li&gt;
&lt;li&gt;Create collections to organize data across accounts and vaults üéØ&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;And this is just what‚Äôs available in the preview. There will be many more exciting features that will take advantage of the power of Linux as we get closer to release.&lt;/p&gt;
&lt;h2 data-id=&quot;free-accounts-for-open-source-teams&quot;&gt;Free accounts for open source teams&lt;/h2&gt;
&lt;p&gt;Our new app is built on great open source projects like the Rust programming language for the underlying logic, and React for a responsive component-based UI.&lt;/p&gt;
&lt;p&gt;Building an app for Linux wouldn‚Äôt have been possible without these giant shoulders to stand upon so we want to give back to the free software community. If you work on an open source team that needs a password manager, open a PR against our  repo and we‚Äôll give you and everybody on your team a free account. You and your team will be able to continue using this account even when the development preview ends.&lt;/p&gt;
&lt;p&gt;Thank you so much for your contributions and making the world a better place. ü§ó‚ù§Ô∏è&lt;/p&gt;
&lt;h2 data-id=&quot;apt-get-install-1password&quot;&gt;apt-get install 1password&lt;/h2&gt;
&lt;p&gt;If you‚Äôre excited to report issues, work with us to resolve them, and update to verify fixes, then you‚Äôre welcome to join us on this journey. To get started read the guide &lt;a rel=&quot;nofollow&quot; href=&quot;https://support.1password.com/cs/getting-started-linux/&quot;&gt;Get to know 1Password for Linux&lt;/a&gt; to find installation and troubleshooting instructions.&lt;/p&gt;
&lt;p&gt;We maintain signed apt and rpm package repositories for Debian, Ubuntu, CentOS, Fedora, and Red Hat Enterprise Linux. We also have an AppImage for as-of-yet unsupported distributions. Let us know what distribution you use and how well 1Password works there.&lt;/p&gt;
&lt;p&gt;We hope you are as excited about a 1Password Linux app as we are. Our development team will be active in this forum so when you find issues please report them here.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://com-agilebits-users.s3.amazonaws.com/dave/apt-get-1password-full-dhSN8yDL2uBK.png&quot; alt=&quot;1Password apt install running on Ubuntu&quot; class=&quot;embedImage-img importedEmbed-img&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 04 Aug 2020 20:22:48 +0000</pubDate>
<dc:creator>terabytest</dc:creator>
<og:type>article</og:type>
<og:title>1Password for Linux development preview</og:title>
<og:url>https://discussions.agilebits.com/discussion/114964/1password-for-linux-development-preview</og:url>
<og:description>A full-featured Linux desktop app has been our most requested feature by far and responsible for the longest forum post in our history.</og:description>
<og:image>https://com-agilebits-users.s3.amazonaws.com/dave/1password-linux-hero-nonscaled-web-iNFpMV172f7S.png</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://discussions.agilebits.com/discussion/114964/</dc:identifier>
</item>
<item>
<title>We quit our jobs to build a cabin</title>
<link>https://www.outsideonline.com/2415766/friends-diy-cabin-build-washington</link>
<guid isPermaLink="true" >https://www.outsideonline.com/2415766/friends-diy-cabin-build-washington</guid>
<description>&lt;p&gt;Long hikes, casual breaks, and leisurely river sessions immediately went out the window. There was no time. In part, because we hadn‚Äôt anticipated the little things. The forest floor was steeply sloped and covered in rain-slicked clay and fern root balls that grabbed at our feet. Our shoes became caked in mud. We slid and fell, and when that happened, our tape measure‚Äôs delicate hold on some distant piece of lumber was lost, forcing us to start over. We never overcame these time warps, like how long it took to shift a ladder on a hillside‚Äîwe had to dig new holes with every move to provide equal footing for the ladder‚Äôs legs. Or how easily we lost entire days sourcing materials at the lumberyard 45 minutes away. Hundreds of boards went into the structure, and we hand selected every one, eyeing them carefully to ensure they weren‚Äôt overly warped, bowed, twisted, or cupped.¬†&lt;/p&gt;
&lt;p&gt;Days cascaded into weeks. We‚Äôd rise at 5 a.m. and build until the dimming light made it impossible to work anymore. By 9 p.m., we‚Äôd head to the bar¬†and use the Wi-Fi to madly produce copy for freelance writing ventures that barely kept our bank accounts afloat. Many of our casual promises‚Äîthe family camping trips, the birthday parties, the breaks to spend time with our girlfriends‚Äîwould soon be broken.¬†&lt;/p&gt;
&lt;p&gt;On a hot day in August, we experienced what was by turns the most bewildering and soul-crushing task of the build: getting the ridge beam in place. It was 28 feet long and hundreds of pounds, and it needed to be perched atop the highest point of the cabin, spanning the gap between the two tallest walls. We eventually produced a jimmy-rigged contraption that, in the kindest terms, might be called a slow-motion catapult that could (maybe) hoist the ridge beam into place.&lt;/p&gt;
&lt;p&gt;Anything¬†improvised like this to help ourselves accomplish a job,¬†we referred to as ‚Äújazz.‚Äù As in: &lt;em&gt;How on earth are we going to lift this beam without a giant crane?&lt;/em&gt; Answer: &lt;em&gt;We‚Äôll just rig up some jazz&lt;/em&gt;. The word was useful in its lack of specificity, delaying a problem and its potential fix until there was nothing left to do but finally create the jazz.¬†&lt;/p&gt;
&lt;p&gt;In some ways, the whole cabin was jazz. When we had nothing but the floor, we were still sketching and debating ridiculous design ideas over our morning coffee‚Äîcurved, pagoda-style rooflines; walls that folded down into decks; a spiral staircase wrapping around a tree trunk to the loft‚Äîas if we were made of money and time.¬†As if we were imbued with the skills of master tradespeople. As if our girlfriends wouldn‚Äôt mind us disappearing, maybe forever, to build a hut of fancy and ruin.¬†&lt;/p&gt;
&lt;p&gt;The catapult was the definition of jazz: a mess of ropes, screws, ratchet straps, and random bracing, then a longer rope that extended from the beam to the towing hitch of Pat‚Äôs Subaru at the top of the sloped lot. Around midday, one of our neighbors‚Äîa burly, muscled airplane mechanic named Jordy‚Äîstopped by, saw the jazz, and with noticeable alarm said, ‚ÄúHoly shit.‚Äù He brought down more ratchet straps to add to the pile¬†and then stayed to cheer us on. After eight hours of struggle and one last tug from Pat‚Äôs Subaru, the ridge beam slid into its perch. We placed a four-foot-long level on it and, with unbridled relief, saw that its bubble was dead center.¬†&lt;/p&gt;
&lt;p&gt;That night, exhausted but content, we jumped in the river and had a fire on its banks. We got good and drunk and temporarily forgot about the fact that we still had to cut and attach the rafters, build out the roof, install the door, finish the siding and windows, construct the kitchen and bathroom, put in the wood-burning stove, finish the loft, insulate and clad the walls, wire and plumb everything, never mind the finish tasks of trim, tile, light fixtures, and on and on.&lt;/p&gt;
</description>
<pubDate>Tue, 04 Aug 2020 16:54:38 +0000</pubDate>
<dc:creator>anarbadalov</dc:creator>
<og:type>article</og:type>
<og:url>https://www.outsideonline.com/2415766/friends-diy-cabin-build-washington</og:url>
<og:title>Two Friends Quit Their Jobs to Build a Cabin. Everything Went Wrong.</og:title>
<og:description>And it was awesome</og:description>
<og:image>https://www.outsideonline.com/sites/default/files/styles/full-page/public/2020/07/27/cabin-outdoors-roof_h.jpg?itok=HbM8e6J0</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.outsideonline.com/2415766/friends-diy-cabin-build-washington</dc:identifier>
</item>
<item>
<title>Let&amp;#039;s build a full-text search engine</title>
<link>https://artem.krylysov.com/blog/2020/07/28/lets-build-a-full-text-search-engine/</link>
<guid isPermaLink="true" >https://artem.krylysov.com/blog/2020/07/28/lets-build-a-full-text-search-engine/</guid>
<description>&lt;p&gt;Full-Text Search is one of those tools people use every day without realizing it. If you ever googled &quot;golang coverage report&quot; or tried to find &quot;indoor wireless camera&quot; on an e-commerce website, you used some kind of full-text search.&lt;/p&gt;
&lt;p&gt;Full-Text Search (FTS) is a technique for searching text in a collection of documents. A document can refer to a web page, a newspaper article, an email message, or any structured text.&lt;/p&gt;
&lt;p&gt;Today we are going to build our own FTS engine. By the end of this post, we'll be able to search across millions of documents in less than a millisecond. We'll start with simple search queries like &quot;give me all documents that contain the word &lt;em&gt;cat&lt;/em&gt;&quot; and we'll extend the engine to support more sophisticated boolean queries.&lt;/p&gt;
&lt;div class=&quot;admonition note&quot; readability=&quot;5.6288659793814&quot;&gt;
&lt;p class=&quot;admonition-title&quot;&gt;Note&lt;/p&gt;
&lt;p&gt;Most well-known FTS engine is &lt;a class=&quot;reference external&quot; href=&quot;https://lucene.apache.org/&quot; target=&quot;_blank&quot;&gt;Lucene&lt;/a&gt; (as well as &lt;a class=&quot;reference external&quot; href=&quot;https://github.com/elastic/elasticsearch&quot; target=&quot;_blank&quot;&gt;Elasticsearch&lt;/a&gt; and Solr built on top of it).&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;section&quot; id=&quot;why-fts&quot; readability=&quot;12&quot;&gt;
&lt;h3&gt;Why FTS &lt;/h3&gt;
&lt;p&gt;Before we start writing code, you may ask &quot;can't we just use &lt;em&gt;grep&lt;/em&gt; or have a loop that checks if every document contains the word I'm looking for?&quot;. Yes, we can. However, it's not always the best idea.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;section&quot; id=&quot;corpus&quot; readability=&quot;13.471172962227&quot;&gt;
&lt;h3&gt;Corpus &lt;/h3&gt;
&lt;p&gt;We are going to search a part of the abstract of English Wikipedia. The latest dump is available at &lt;a class=&quot;reference external&quot; href=&quot;https://dumps.wikimedia.org/enwiki/latest/enwiki-latest-abstract1.xml.gz&quot; target=&quot;_blank&quot;&gt;dumps.wikimedia.org&lt;/a&gt;. As of today, the file size after decompression is 913 MB. The XML file contains over 600K documents.&lt;/p&gt;
&lt;p&gt;Document example:&lt;/p&gt;
&lt;pre class=&quot;code xml literal-block&quot;&gt;
&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;title&amp;gt;&lt;/span&gt;Wikipedia: Kit-Cat Klock&lt;span class=&quot;nt&quot;&gt;&amp;lt;/title&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;url&amp;gt;&lt;/span&gt;https://en.wikipedia.org/wiki/Kit-Cat_Klock&lt;span class=&quot;nt&quot;&gt;&amp;lt;/url&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;abstract&amp;gt;&lt;/span&gt;The Kit-Cat Klock is an art deco novelty wall clock shaped like a grinning cat with cartoon eyes that swivel in time with its pendulum tail.&lt;span class=&quot;nt&quot;&gt;&amp;lt;/abstract&amp;gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;section&quot; id=&quot;loading-documents&quot; readability=&quot;24&quot;&gt;
&lt;h3&gt;Loading documents &lt;/h3&gt;
&lt;p&gt;First, we need to load all the documents from the dump. The built-in &lt;span class=&quot;docutils literal&quot;&gt;encoding/xml&lt;/span&gt; package comes very handy:&lt;/p&gt;
&lt;pre class=&quot;code go literal-block&quot;&gt;
&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;encoding/xml&quot;&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;os&quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;document&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;Title&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;`xml:&quot;title&quot;`&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;URL&lt;/span&gt;   &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;`xml:&quot;url&quot;`&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;Text&lt;/span&gt;  &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;`xml:&quot;abstract&quot;`&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;ID&lt;/span&gt;    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;loadDocuments&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([]&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;defer&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

    &lt;span class=&quot;nx&quot;&gt;dec&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;xml&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;NewDecoder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;dump&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;Documents&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;document&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;`xml:&quot;doc&quot;`&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}{}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;dec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Decode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;dump&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;nx&quot;&gt;docs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;dump&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Documents&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;docs&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;docs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ID&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;docs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;nil&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Every loaded document gets assigned a unique identifier. To keep things simple, the first loaded document gets assigned ID=0, the second ID=1 and so on.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;section&quot; id=&quot;first-attempt&quot; readability=&quot;27&quot;&gt;
&lt;h3&gt;First attempt &lt;/h3&gt;
&lt;div class=&quot;section&quot; id=&quot;searching-the-content&quot; readability=&quot;51&quot;&gt;
&lt;h4&gt;Searching the content &lt;/h4&gt;
&lt;p&gt;Now that we have all documents loaded into memory, we can try to find the ones about cats. At first, let's loop through all documents and check if they contain the substring &lt;em&gt;cat&lt;/em&gt;:&lt;/p&gt;
&lt;pre class=&quot;code go literal-block&quot;&gt;
&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;docs&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;term&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;document&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;document&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;doc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;docs&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;strings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Contains&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;doc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;term&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;doc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;On my laptop, the search phase takes 103ms - not too bad. If you spot check a few documents from the output, you may notice that the function matches &lt;em&gt;caterpillar&lt;/em&gt; and &lt;em&gt;category&lt;/em&gt;, but doesn't match &lt;em&gt;Cat&lt;/em&gt; with the capital &lt;em&gt;C&lt;/em&gt;. That's not quite what I was looking for.&lt;/p&gt;
&lt;p&gt;We need to fix two things before moving forward:&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;section&quot; id=&quot;searching-with-regular-expressions&quot; readability=&quot;28&quot;&gt;
&lt;h4&gt;Searching with regular expressions &lt;/h4&gt;
&lt;p&gt;One solution that quickly comes to mind and allows implementing both requirements is &lt;em&gt;regular expressions&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Here it is - &lt;span class=&quot;docutils literal&quot;&gt;&lt;span class=&quot;pre&quot;&gt;(?i)\bcat\b&lt;/span&gt;&lt;/span&gt;:&lt;/p&gt;
&lt;ul class=&quot;simple&quot; readability=&quot;-0.5&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;docutils literal&quot;&gt;&lt;span class=&quot;pre&quot;&gt;(?i)&lt;/span&gt;&lt;/span&gt; makes the regex case-insensitive&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;&lt;span class=&quot;docutils literal&quot;&gt;\b&lt;/span&gt; matches a word boundary (position where one side is a word character and another side is not a word character)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;pre class=&quot;code go literal-block&quot;&gt;
&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;docs&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;term&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;document&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;re&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;regexp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;MustCompile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;`(?i)\b`&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;term&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;`\b`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Don't do this in production, it's a security risk. term needs to be sanitized.
&lt;/span&gt;    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;document&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;doc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;docs&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;MatchString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;doc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;doc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Ugh, the search took more than 2 seconds. As you can see, things started getting slow even with 600K documents. While the approach is easy to implement, it doesn't scale well. As the dataset grows larger, we need to scan more and more documents. The time complexity of this algorithm is linear - the number of documents required to scan is equal to the total number of documents. If we had 6M documents instead of 600K, the search would take 20 seconds. We need to do better than that.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;section&quot; id=&quot;inverted-index&quot; readability=&quot;34&quot;&gt;
&lt;h3&gt;Inverted Index &lt;/h3&gt;
&lt;p&gt;To make search queries faster, we'll preprocess the text and build an index in advance.&lt;/p&gt;
&lt;p&gt;The core of FTS is a data structure called &lt;em&gt;Inverted Index&lt;/em&gt;. The Inverted Index associates every word in documents with documents that contain the word.&lt;/p&gt;
&lt;p&gt;Example:&lt;/p&gt;
&lt;pre class=&quot;code python literal-block&quot;&gt;
&lt;code&gt;&lt;span class=&quot;n&quot;&gt;documents&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;a donut on a glass plate&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;only the donut&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;listen to the drum machine&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;donut&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;on&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;glass&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;plate&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;only&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;the&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;listen&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;to&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;drum&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;machine&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Below is a real-world example of the Inverted Index. An index in a book where a term references a page number:&lt;/p&gt;
&lt;img alt=&quot;&quot; src=&quot;https://artem.krylysov.com/images/2020-fts/book-index.png&quot;/&gt;&lt;/div&gt;
&lt;div class=&quot;section&quot; id=&quot;text-analysis&quot; readability=&quot;36&quot;&gt;
&lt;h3&gt;Text analysis &lt;/h3&gt;
&lt;p&gt;Before we start building the index, we need to break the raw text down into a list of words (tokens) suitable for indexing and searching.&lt;/p&gt;
&lt;p&gt;The text analyzer consists of a tokenizer and multiple filters.&lt;/p&gt;
&lt;img alt=&quot;&quot; src=&quot;https://artem.krylysov.com/images/2020-fts/text-analysis.png&quot;/&gt;&lt;/div&gt;
&lt;div class=&quot;section&quot; id=&quot;tokenizer&quot; readability=&quot;24&quot;&gt;
&lt;h3&gt;Tokenizer &lt;/h3&gt;
&lt;p&gt;The tokenizer is the first step of text analysis. Its job is to convert text into a list of tokens. Our implementation splits the text on a word boundary and removes punctuation marks:&lt;/p&gt;
&lt;pre class=&quot;code go literal-block&quot;&gt;
&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;tokenize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;strings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;FieldsFunc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;rune&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// Split on any character that is not a letter or a number.
&lt;/span&gt;        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;unicode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;IsLetter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;unicode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;IsNumber&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;pre class=&quot;code go literal-block&quot;&gt;
&lt;code&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;tokenize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;A donut on a glass plate. Only the donuts.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;A&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;donut&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;on&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;glass&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;plate&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Only&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;the&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;donuts&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;section&quot; id=&quot;filters&quot; readability=&quot;63.073825503356&quot;&gt;
&lt;h3&gt;Filters &lt;/h3&gt;
&lt;p&gt;In most cases, just converting text into a list of tokens is not enough. To make the text easier to index and search, we'll need to do additional normalization.&lt;/p&gt;
&lt;div class=&quot;section&quot; id=&quot;lowercase&quot; readability=&quot;37&quot;&gt;
&lt;h4&gt;Lowercase &lt;/h4&gt;
&lt;p&gt;In order to make the search case-insensitive, the lowercase filter converts tokens to lower case. &lt;em&gt;cAt&lt;/em&gt;, &lt;em&gt;Cat&lt;/em&gt; and &lt;em&gt;caT&lt;/em&gt; are normalized to &lt;em&gt;cat&lt;/em&gt;. Later, when we query the index, we'll lower case the search terms as well. This will make the search term &lt;em&gt;cAt&lt;/em&gt; match the text &lt;em&gt;Cat&lt;/em&gt;.&lt;/p&gt;
&lt;pre class=&quot;code go literal-block&quot;&gt;
&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;lowercaseFilter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tokens&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tokens&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;token&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;tokens&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;strings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ToLower&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;pre class=&quot;code go literal-block&quot;&gt;
&lt;code&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;lowercaseFilter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;A&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;donut&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;on&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;glass&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;plate&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Only&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;the&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;donuts&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;donut&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;on&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;glass&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;plate&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;only&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;the&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;donuts&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;section&quot; id=&quot;dropping-common-words&quot; readability=&quot;48.527141133896&quot;&gt;
&lt;h4&gt;Dropping common words &lt;/h4&gt;
&lt;p&gt;Almost any English text contains commonly used words like &lt;em&gt;a&lt;/em&gt;, &lt;em&gt;I&lt;/em&gt;, &lt;em&gt;the&lt;/em&gt; or &lt;em&gt;be&lt;/em&gt;. Such words are called &lt;em&gt;stop words&lt;/em&gt;. We are going to remove them since almost any document would match the stop words.&lt;/p&gt;
&lt;p&gt;There is no &quot;official&quot; list of stop words. Let's exclude the top 10 by the &lt;a class=&quot;reference external&quot; href=&quot;https://en.wikipedia.org/wiki/Most_common_words_in_English&quot; target=&quot;_blank&quot;&gt;OEC rank&lt;/a&gt;. Feel free to add more:&lt;/p&gt;
&lt;pre class=&quot;code go literal-block&quot;&gt;
&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;stopwords&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{}{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// I wish Go had built-in sets.
&lt;/span&gt;    &lt;span class=&quot;s&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;and&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;be&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;have&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;i&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;in&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;of&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;that&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;the&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;to&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;stopwordFilter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tokens&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tokens&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;token&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;tokens&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;stopwords&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;pre class=&quot;code go literal-block&quot;&gt;
&lt;code&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;stopwordFilter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;donut&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;on&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;glass&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;plate&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;only&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;the&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;donuts&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;donut&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;on&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;glass&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;plate&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;only&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;donuts&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;section&quot; id=&quot;stemming&quot; readability=&quot;37.118320610687&quot;&gt;
&lt;h4&gt;Stemming &lt;/h4&gt;
&lt;p&gt;Because of the grammar rules, documents may include different forms of the same word. Stemming reduces words into their base form. For example, &lt;em&gt;fishing&lt;/em&gt;, &lt;em&gt;fished&lt;/em&gt; and &lt;em&gt;fisher&lt;/em&gt; may be reduced to the base form (stem) &lt;em&gt;fish&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Implementing a stemmer is a non-trivial task, it's not covered in this post. We'll take one of the &lt;a class=&quot;reference external&quot; href=&quot;https://github.com/kljensen/snowball&quot; target=&quot;_blank&quot;&gt;existing&lt;/a&gt; modules:&lt;/p&gt;
&lt;pre class=&quot;code go literal-block&quot;&gt;
&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;snowballeng&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;github.com/kljensen/snowball/english&quot;&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;stemmerFilter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tokens&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tokens&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;token&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;tokens&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;snowballeng&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Stem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;pre class=&quot;code go literal-block&quot;&gt;
&lt;code&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;stemmerFilter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;donut&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;on&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;glass&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;plate&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;only&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;donuts&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;donut&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;on&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;glass&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;plate&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;only&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;donut&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;div class=&quot;admonition note&quot; readability=&quot;8&quot;&gt;
&lt;p class=&quot;admonition-title&quot;&gt;Note&lt;/p&gt;
&lt;p&gt;A stem is not always a valid word. For example, some stemmers may reduce &lt;em&gt;airline&lt;/em&gt; to &lt;em&gt;airlin&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;section&quot; id=&quot;putting-the-analyzer-together&quot; readability=&quot;20&quot;&gt;
&lt;h3&gt;Putting the analyzer together &lt;/h3&gt;
&lt;pre class=&quot;code go literal-block&quot;&gt;
&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;analyze&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;tokens&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;tokenize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;tokens&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;lowercaseFilter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tokens&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;tokens&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;stopwordFilter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tokens&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;tokens&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;stemmerFilter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;tokens&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;tokens&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;The tokenizer and filters convert sentences into a list of tokens:&lt;/p&gt;
&lt;pre class=&quot;code go literal-block&quot;&gt;
&lt;code&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;analyze&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;A donut on a glass plate. Only the donuts.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;donut&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;on&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;glass&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;plate&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;only&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;donut&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;The tokens are ready for indexing.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;section&quot; id=&quot;building-the-index&quot; readability=&quot;27&quot;&gt;
&lt;h3&gt;Building the index &lt;/h3&gt;
&lt;p&gt;Back to the inverted index. It maps every word in documents to document IDs. The built-in &lt;span class=&quot;docutils literal&quot;&gt;map&lt;/span&gt; is a good candidate for storing the mapping. The key in the map is a token (string) and the value is a list of document IDs:&lt;/p&gt;
&lt;pre class=&quot;code go literal-block&quot;&gt;
&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;index&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Building the index consists of analyzing the documents and adding their IDs to the map:&lt;/p&gt;
&lt;pre class=&quot;code go literal-block&quot;&gt;
&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;idx&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;docs&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;doc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;docs&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;token&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;analyze&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;doc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;ids&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ids&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ids&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ids&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;doc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ID&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;c1&quot;&gt;// Don't add same ID twice.
&lt;/span&gt;                &lt;span class=&quot;k&quot;&gt;continue&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ids&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;doc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;idx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([]&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;A donut on a glass plate. Only the donuts.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}})&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([]&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;donut is a donut&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}})&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;fmt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;It works! Each token in the map refers to IDs of the documents that contain the token:&lt;/p&gt;
&lt;pre class=&quot;code literal-block&quot;&gt;
&lt;code&gt;map[donut:[1 2] glass:[1] is:[2] on:[1] only:[1] plate:[1]]&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;section&quot; id=&quot;querying&quot; readability=&quot;38&quot;&gt;
&lt;h3&gt;Querying &lt;/h3&gt;
&lt;p&gt;To query the index, we are going to apply the same tokenizer and filters we used for indexing:&lt;/p&gt;
&lt;pre class=&quot;code go literal-block&quot;&gt;
&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;idx&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[][]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[][]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;token&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;analyze&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ids&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ids&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;pre class=&quot;code go literal-block&quot;&gt;
&lt;code&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Small wild cat&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;173&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;303&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;98&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;173&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;765&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;51&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;173&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;And finally, we can find all documents that mention cats. Searching 600K documents took less than a millisecond (18¬µs)!&lt;/p&gt;
&lt;p&gt;With the inverted index, the time complexity of the search query is linear to the number of search tokens. In the example query above, other than analyzing the input text, &lt;span class=&quot;docutils literal&quot;&gt;search&lt;/span&gt; had to perform only three map lookups.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;section&quot; id=&quot;boolean-queries&quot; readability=&quot;53&quot;&gt;
&lt;h3&gt;Boolean queries &lt;/h3&gt;
&lt;p&gt;The query from the previous section returned a disjoined list of documents for each token. What we normally expect to find when we type &lt;em&gt;small wild cat&lt;/em&gt; in a search box is a list of results that contain &lt;em&gt;small&lt;/em&gt;, &lt;em&gt;wild&lt;/em&gt; and &lt;em&gt;cat&lt;/em&gt; at the same time. The next step is to compute the set intersection between the lists. This way we'll get a list of documents matching all tokens.&lt;/p&gt;
&lt;img alt=&quot;&quot; src=&quot;https://artem.krylysov.com/images/2020-fts/venn.png&quot;/&gt;&lt;p&gt;Luckily, IDs in our inverted index are inserted in ascending order. Since the IDs are sorted, it's possible to compute the intersection between two lists in linear time. The &lt;span class=&quot;docutils literal&quot;&gt;intersection&lt;/span&gt; function iterates two lists simultaneously and collect IDs that exist in both:&lt;/p&gt;
&lt;pre class=&quot;code go literal-block&quot;&gt;
&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;intersection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;maxLen&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;maxLen&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;maxLen&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;maxLen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;j&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;j&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Updated &lt;span class=&quot;docutils literal&quot;&gt;search&lt;/span&gt; analyzes the given query text, lookups tokens and computes the set intersection between lists of IDs:&lt;/p&gt;
&lt;pre class=&quot;code go literal-block&quot;&gt;
&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;idx&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;token&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;analyze&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ids&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ids&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;intersection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ids&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// Token doesn't exist.
&lt;/span&gt;            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;nil&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;The Wikipedia dump contains only two documents that match &lt;em&gt;small&lt;/em&gt;, &lt;em&gt;wild&lt;/em&gt; and &lt;em&gt;cat&lt;/em&gt; at the same time:&lt;/p&gt;
&lt;pre class=&quot;code go literal-block&quot;&gt;
&lt;code&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Small wild cat&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;mi&quot;&gt;130764&lt;/span&gt;  &lt;span class=&quot;nx&quot;&gt;The&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;wildcat&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;species&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;complex&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;comprising&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;two&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;small&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;wild&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cat&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;species&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;European&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;wildcat&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Felis&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;silvestris&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;African&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;wildcat&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;lybica&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;131692&lt;/span&gt;  &lt;span class=&quot;nx&quot;&gt;Catopuma&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;genus&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;containing&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;two&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Asian&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;small&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;wild&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cat&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;species&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Asian&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;golden&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cat&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;temminckii&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bay&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;The search is working as expected!&lt;/p&gt;
&lt;p&gt;By the way, this is the first time I hear about &lt;em&gt;catopuma&lt;/em&gt;, here is one of them:&lt;/p&gt;
&lt;img alt=&quot;By Karen Stout - originally posted to Flickr as Asian Golden cat, CC BY-SA 2.0, https://commons.wikimedia.org/w/index.php?curid=11413240&quot; src=&quot;https://artem.krylysov.com/images/2020-fts/asian-golden-cat-s.jpg&quot;/&gt;&lt;/div&gt;
&lt;div class=&quot;section&quot; id=&quot;conclusions&quot; readability=&quot;13.586497890295&quot;&gt;
&lt;h3&gt;Conclusions &lt;/h3&gt;
&lt;p&gt;We just built a Full-Text Search engine. Despite its simplicity, it can be a solid foundation for more advanced projects.&lt;/p&gt;
&lt;p&gt;I didn't touch on a lot of things that can significantly improve the performance and make the engine more user friendly. Here are some ideas for further improvements:&lt;/p&gt;
&lt;ul class=&quot;simple&quot; readability=&quot;1.4383561643836&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;Extend boolean queries to support &lt;em&gt;OR&lt;/em&gt; and &lt;em&gt;NOT&lt;/em&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Store the index on disk:&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;Experiment with memory and CPU-efficient data formats for storing sets of document IDs. Take a look at &lt;a class=&quot;reference external&quot; href=&quot;https://roaringbitmap.org/&quot; target=&quot;_blank&quot;&gt;Roaring Bitmaps&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;Support indexing multiple document fields.&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;Sort results by relevance.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;The full source code is available on &lt;a class=&quot;reference external&quot; href=&quot;https://github.com/akrylysov/simplefts&quot; target=&quot;_blank&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
</description>
<pubDate>Tue, 04 Aug 2020 15:59:01 +0000</pubDate>
<dc:creator>elorant</dc:creator>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://artem.krylysov.com/blog/2020/07/28/lets-build-a-full-text-search-engine/</dc:identifier>
</item>
<item>
<title>In spite of an increase in Internet speed, webpage speeds have not improved</title>
<link>https://www.nngroup.com/articles/the-need-for-speed/</link>
<guid isPermaLink="true" >https://www.nngroup.com/articles/the-need-for-speed/</guid>
<description>&lt;p&gt;23 years ago, the internet was quite different from the one we use today. Google didn‚Äôt exist yet, fewer than 20% of U.S. households &lt;a href=&quot;https://www.census.gov/prod/2001pubs/p23-207.pdf&quot;&gt;had internet access&lt;/a&gt;, and those who did were using a &lt;a href=&quot;https://en.wikipedia.org/wiki/Dial-up_Internet_access&quot;&gt;dial-up&lt;/a&gt; connection.&lt;/p&gt;&lt;p&gt;It‚Äôs no wonder that &lt;a href=&quot;https://www.nngroup.com/articles/the-need-for-speed-1997/&quot;&gt;people complained about slow speeds on every website we tested&lt;/a&gt; back then, because the internet and the computers used to access it were painfully slow.&lt;/p&gt;
&lt;p&gt;What &lt;em&gt;is&lt;/em&gt; surprising is that, despite today‚Äôs much faster network speeds and computer processors, people using the internet today are still plagued by the exact same frustration: slow websites.&lt;/p&gt;
&lt;h2&gt;The Internet Is Faster, but Websites Aren‚Äôt&lt;/h2&gt;
&lt;p&gt;You might be wondering whether people simply don‚Äôt notice how much faster today‚Äôs sites are because their expectations have increased over time. While it‚Äôs true that people‚Äôs estimates of wait times are sometimes exaggerated, in this case it‚Äôs not just a matter of distorted perceptions.&lt;/p&gt;
&lt;p&gt;For the past 10 years, &lt;a href=&quot;https://httparchive.org/&quot;&gt;Httparchive.org&lt;/a&gt; has recorded page load times for 6 million popular websites. (Httparchive.org is a part of the InternetArchive.org, whom you may know as the folks behind the WayBack Machine). The results are not encouraging: for webpages visited from a desktop computer, the median load time hasn‚Äôt improved. &lt;strong&gt;Today‚Äôs websites aren‚Äôt that much faster than they were 10 years ago.&lt;/strong&gt;&lt;/p&gt;
&lt;img alt=&quot;Line chart showing change from 2010 to 2019 in median page load time and in the average internet connection speed&quot; height=&quot;417&quot; src=&quot;https://media.nngroup.com/media/editor/2020/05/08/change-in-page-load-time-vs-connection-speed-desktop.png&quot; width=&quot;694&quot;/&gt;&lt;em&gt;Median page Onload time tracked by the Httparchive.org has remained about the same over the past 10 years, while, over the same period, the average internet speed for users in the U.S. (tracked by Akamai and Cable.co.uk) has steadily increased.&lt;/em&gt;
&lt;p&gt;As you might guess, the story on mobile is even worse ‚Äî connection speeds have improved for sure, but, over the past 10 years, the mobile page load times tracked by Httparchive have actually &lt;em&gt;increased&lt;/em&gt;.&lt;/p&gt;
&lt;img alt=&quot;Chart showing the change from 2011 to 2019 in the average page load time on mobile devices vs. the average mobile device internet connection speed&quot; height=&quot;427&quot; src=&quot;https://media.nngroup.com/media/editor/2020/05/08/mobile-change-in-page-load-time-vs-connection-speed.png&quot; width=&quot;694&quot;/&gt;&lt;em&gt;The average connection speed for U.S. mobile users has increased steadily in the past 10 years; meanwhile, the load times for mobile web pages over the same period have more than doubled. Connection speed data through 2017 is from Akamai (which in 2014 adjusted its methodology to record connection speeds from a larger sample of devices); data from 2018 and 2019 is from Opensignal.com, a mobile analytics company. Page OnLoad times for mobile webpages are as recorded by Httparchive.org.&lt;/em&gt;
&lt;p&gt;&lt;a href=&quot;https://www.nngroup.com/articles/law-of-bandwidth/&quot;&gt;Increases in internet speed&lt;/a&gt; clearly haven‚Äôt solved the problem of slow websites. Of course, network speed is not the only factor that affects performance, so it‚Äôs not reasonable to expect speeds to have completely kept pace with network connectivity. But it seems like huge increases in network speed should make it at least &lt;em&gt;somewhat&lt;/em&gt; faster to browse the web.&lt;/p&gt;
&lt;p&gt;You may be wondering if this data is really accurate, which is a fair question, as there are many different ways to measure performance and speed, such as by sampling different selections of websites or using different milestones to identify when a page is loaded. For example, in &lt;a href=&quot;https://www.thinkwithgoogle.com/marketing-resources/data-measurement/mobile-page-speed-new-industry-benchmarks/&quot;&gt;2018, Google reported an average time of 7 seconds for mobile pages to load content above the fold&lt;/a&gt;. But, since above-the-fold loading times from 10 years ago aren‚Äôt available, we can‚Äôt draw conclusions about trends in that particular metric. In any case, even this more favorable number is still 7 times slower than the recommended response time for navigating web pages.) The Httparchive.org data is unique in that it‚Äôs been &lt;a href=&quot;https://almanac.httparchive.org/en/2019/methodology&quot;&gt;collected using the same approach for the entire decade&lt;/a&gt;, allowing longitudinal comparison. This data strongly suggests that the websites people encounter today &lt;strong&gt;aren‚Äôt that much faster than they were a decade ago&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;How Slow Is Too Slow?&lt;/p&gt;
&lt;p&gt;The basic &lt;a href=&quot;https://www.nngroup.com/articles/response-times-3-important-limits/&quot;&gt;rules of human perception of time&lt;/a&gt; provide a framework for understanding the effects of webpage delays: people can detect delays as short as 1/10th of a second, so anything that takes longer doesn‚Äôt feel ‚Äòinstant.‚Äô &lt;strong&gt;Delays of just&lt;/strong&gt; &lt;strong&gt;1 second are enough to interrupt a person‚Äôs conscious thought process&lt;/strong&gt;, changing the experience into one of waiting for the system to catch up, rather than feeling as though you are directly controlling the interface. This delay reduces &lt;a href=&quot;https://www.nngroup.com/articles/conversion-rates/&quot;&gt;conversion&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;We‚Äôve described how these &lt;a href=&quot;https://www.nngroup.com/articles/website-response-times/&quot;&gt;delays of just a few seconds seriously hurt the experience&lt;/a&gt; of those trying to use a website. But you don‚Äôt have to take our word for it ‚Äî in the past 10 years, the effects of slow-loading web pages on site abandonment and conversion has been proven time and again:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;2009: &lt;a href=&quot;https://ai.googleblog.com/2009/06/speed-matters.html&quot;&gt;Google&lt;/a&gt; and &lt;a href=&quot;https://conferences.oreilly.com/velocity/velocity2009/public/schedule/detail/8523&quot;&gt;Bing&lt;/a&gt; both reported that even half-second delays in load time resulted in measurably lower conversion metrics (number of searches and revenue per user).&lt;/li&gt;
&lt;li&gt;2010: A &lt;a href=&quot;https://blog.mozilla.org/metrics/2010/04/05/firefox-page-load-speed-part-ii/&quot;&gt;Mozilla&lt;/a&gt; experiment which found that reducing the page load time by 2 seconds led to 15% higher conversion.&lt;/li&gt;
&lt;li&gt;2011: &lt;a href=&quot;http://www.mcrinc.com/Documents/Newsletters/201110_why_web_performance_matters.pdf&quot;&gt;Gomez&lt;/a&gt; reported on 150M pageviews across 150 sites and found that pages that took 6 seconds to load were 25% more likely to be abandoned than pages which loaded in 2 seconds.&lt;/li&gt;
&lt;li&gt;2016: &lt;a href=&quot;https://blogs.oracle.com/marketingcloud/how-does-load-speed-affect-conversion-rate&quot;&gt;Google&lt;/a&gt; found that increasing the load time of its SERPs by half a second resulted in a 20% higher bounce rate.&lt;/li&gt;
&lt;li&gt;2016: &lt;a href=&quot;https://www.thinkwithgoogle.com/marketing-resources/data-measurement/mobile-page-speed-new-industry-benchmarks/&quot;&gt;Google&lt;/a&gt; found 53% of mobile visits ended if a page took longer than &lt;strong&gt;3 seconds&lt;/strong&gt; to load.&lt;/li&gt;
&lt;li&gt;2017: &lt;a href=&quot;https://www.akamai.com/us/en/multimedia/documents/report/akamai-state-of-online-retail-performance-2017-holiday.pdf&quot;&gt;Akamai&lt;/a&gt; aggregated data from 17 retailers (7 billion pageviews) and found that conversion rates were highest for pages that loaded in less than 2 seconds; longer load times correlated with 50% drops in conversion rates and increased bounce rates, especially for mobile visitors.&lt;/li&gt;
&lt;li&gt;2018: &lt;a href=&quot;https://www.creativebloq.com/features/how-the-bbc-builds-websites-that-scale&quot;&gt;BBC&lt;/a&gt; found that for every extra second of page load time, 10% of users will leave.&lt;/li&gt;
&lt;li&gt;2024: just kidding, but we‚Äôre sure there will be many more compelling data points to add to this list in the future, because this problem won‚Äôt go away.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;If you‚Äôre still not convinced that response time matters in your specific industry or for smaller organizations, check out this &lt;a href=&quot;https://wpostats.com/&quot;&gt;collection of case studies by WPOStats.com&lt;/a&gt;, which documents how performance optimization dramatically improves traffic, sales, and usage metrics across many different types of websites and industries.&lt;/p&gt;
&lt;h2&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;All this data still does not precisely define a magic number at which &lt;em&gt;your&lt;/em&gt; site is ‚Äòfast enough‚Äô or ‚Äòtoo slow.‚Äô&lt;/p&gt;
&lt;p&gt;If you‚Äôre in a group of people being chased by a bear, you only need to be faster than the slowest person in the group. But that‚Äôs not how websites work: being faster than at least one other website, or even faster than the ‚Äòaverage‚Äô website, is not a great achievement when the average website speed is frustratingly slow.&lt;/p&gt;
&lt;p&gt;Subsecond load times would be ideal; realistically, this target is incredibly difficult to achieve while also delivering rich and engaging content. But, if there‚Äôs one thing that‚Äôs been amply proven in all the experiments listed above, it‚Äôs that each incremental improvement in speed pays off. Instead of settling for being ‚Äòfast enough,‚Äô investment in performance optimization should be driven by asking, ‚Äòhow much more successful would we be if we were 1 second faster?‚Äô &lt;strong&gt;Reducing page load times by even a second, will improve your users‚Äô experience, and increase your&lt;/strong&gt; &lt;strong&gt;&lt;a href=&quot;https://www.nngroup.com/articles/conversion-rates/&quot;&gt;conversion rates&lt;/a&gt;&lt;/strong&gt;. The slower your website is, the more you have to gain from making it faster.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;References&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;Httparchive.org ‚ÄúLoading Speed‚Äù Report, 2010-2019, &lt;a href=&quot;https://httparchive.org/reports/loading-speed#ol&quot;&gt;https://httparchive.org/reports/loading-speed#ol&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Akamai State of the Internet Connectivity Reports, 2010-2017 &lt;a href=&quot;https://www.akamai.com/us/en/resources/our-thinking/state-of-the-internet-report/global-state-of-the-internet-connectivity-reports.jsp&quot;&gt;https://www.akamai.com/us/en/resources/our-thinking/state-of-the-internet-report/global-state-of-the-internet-connectivity-reports.jsp&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Cable.co.uk, ‚ÄúWorldwide Broadband Speed League‚Äù reports. (This data is download speed rather than the connectivity speed reported by Akamai for 2010-2017, so is slightly inflated relative to the Akamai data) &lt;a href=&quot;https://www.cable.co.uk/broadband/speed/worldwide-speed-league/&quot;&gt;https://www.cable.co.uk/broadband/speed/worldwide-speed-league/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Opensignal.com, a mobile analytics company, ‚ÄúThe State of Mobile Network Experience‚Äù 2019 report, &lt;a href=&quot;https://www.opensignal.com/reports/2019/05/global-state-of-the-mobile-network&quot;&gt;https://www.opensignal.com/reports/2019/05/global-state-of-the-mobile-network&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Opensignal.com, a mobile analytics company, ‚ÄúThe State of Wifi vs. Mobile Network Experience as 5G Arrives‚Äù, &lt;a href=&quot;https://www.opensignal.com/reports/2018/11/global-state-of-the-mobile-network&quot;&gt;https://www.opensignal.com/reports/2018/11/global-state-of-the-mobile-network&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</description>
<pubDate>Tue, 04 Aug 2020 15:33:28 +0000</pubDate>
<dc:creator>kaonwarb</dc:creator>
<og:description>In spite of an increase in Internet speed, webpage speeds have not improved over time.</og:description>
<og:title>The Need for Speed, 23 Years Later</og:title>
<og:url>https://www.nngroup.com/articles/the-need-for-speed/</og:url>
<og:type>article</og:type>
<og:image>https://media.nngroup.com/media/articles/opengraph_images/Need-For-Speed-Social-Media-Posts_2020.png</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.nngroup.com/articles/the-need-for-speed/</dc:identifier>
</item>
<item>
<title>27-inch iMac gets a major update</title>
<link>https://www.apple.com/newsroom/2020/08/27-inch-imac-gets-a-major-update/</link>
<guid isPermaLink="true" >https://www.apple.com/newsroom/2020/08/27-inch-imac-gets-a-major-update/</guid>
<description>&lt;div class=&quot;pagebody-copy&quot; readability=&quot;49.723756906077&quot;&gt;Cupertino, California ‚Äî Apple today announced a major update to its 27-inch &lt;a href=&quot;https://apple.com/imac/&quot; target=&quot;_blank&quot;&gt;iMac&lt;/a&gt;. By far the most powerful and capable iMac ever, it features faster Intel processors up to 10 cores, double the memory capacity, next-generation AMD graphics, superfast SSDs across the line with four times the storage capacity, a new nano-texture glass option for an even more stunning Retina 5K display, a 1080p FaceTime HD camera, higher fidelity speakers, and studio-quality mics. For the consumer using their iMac all day, every day, to the aspiring creative looking for inspiration, to the serious pro pushing the limits of their creativity, the new 27-inch iMac delivers the ultimate desktop experience that is now better in every way.&lt;/div&gt;
&lt;p&gt;‚ÄúNow more than ever, our customers are relying on the Mac. And many of them need the most powerful and capable iMac we‚Äôve ever made,‚Äù said Tom Boger, Apple‚Äôs senior director of Mac and iPad Product Marketing. ‚ÄúWith blazing performance, double the memory, SSDs across the line with quadruple the storage, an even more stunning Retina 5K display, a better camera, higher fidelity speakers, and studio-quality mics, the 27-inch iMac is loaded with new features at the same price. It‚Äôs the ultimate desktop, to work, create, and communicate.‚Äù&lt;/p&gt;
</description>
<pubDate>Tue, 04 Aug 2020 15:05:04 +0000</pubDate>
<dc:creator>arafsheikh</dc:creator>
<og:type>article</og:type>
<og:title>27-inch iMac gets a major update</og:title>
<og:description>Apple today announced a major update to its 27-inch iMac that makes it the most powerful and capable iMac ever, along with improvements to the display, camera, speakers, and mics.</og:description>
<og:url>https://www.apple.com/newsroom/2020/08/27-inch-imac-gets-a-major-update/</og:url>
<og:image>https://www.apple.com/newsroom/images/product/imac/standard/Apple_imac-magickeyboardnum-magicmouse2-macos-wallpaper_08042020_LP_hero.jpg.og.jpg?202008041705</og:image>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.apple.com/newsroom/2020/08/27-inch-imac-gets-a-major-update/</dc:identifier>
</item>
<item>
<title>Windows 10: HOSTS file blocking telemetry is now flagged as a risk</title>
<link>https://www.bleepingcomputer.com/news/microsoft/windows-10-hosts-file-blocking-telemetry-is-now-flagged-as-a-risk/</link>
<guid isPermaLink="true" >https://www.bleepingcomputer.com/news/microsoft/windows-10-hosts-file-blocking-telemetry-is-now-flagged-as-a-risk/</guid>
<description>[unable to retrieve full-text content]
&lt;p&gt;Article URL: &lt;a href=&quot;https://www.bleepingcomputer.com/news/microsoft/windows-10-hosts-file-blocking-telemetry-is-now-flagged-as-a-risk/&quot;&gt;https://www.bleepingcomputer.com/news/microsoft/windows-10-hosts-file-blocking-telemetry-is-now-flagged-as-a-risk/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Comments URL: &lt;a href=&quot;https://news.ycombinator.com/item?id=24050262&quot;&gt;https://news.ycombinator.com/item?id=24050262&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Points: 254&lt;/p&gt;
&lt;p&gt;# Comments: 155&lt;/p&gt;
</description>
<pubDate>Tue, 04 Aug 2020 14:22:59 +0000</pubDate>
<dc:creator>maltalex</dc:creator>
<og:type>article</og:type>
<og:title>27-inch iMac gets a major update</og:title>
<og:description>Apple today announced a major update to its 27-inch iMac that makes it the most powerful and capable iMac ever, along with improvements to the display, camera, speakers, and mics.</og:description>
<og:url>https://www.apple.com/newsroom/2020/08/27-inch-imac-gets-a-major-update/</og:url>
<og:image>https://www.apple.com/newsroom/images/product/imac/standard/Apple_imac-magickeyboardnum-magicmouse2-macos-wallpaper_08042020_LP_hero.jpg.og.jpg?202008041705</og:image>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.apple.com/newsroom/2020/08/27-inch-imac-gets-a-major-update/</dc:identifier>
</item>
<item>
<title>TikTok and the Sorting Hat</title>
<link>https://www.eugenewei.com/blog/2020/8/3/tiktok-and-the-sorting-hat</link>
<guid isPermaLink="true" >https://www.eugenewei.com/blog/2020/8/3/tiktok-and-the-sorting-hat</guid>
<description>&lt;div class=&quot;sqs-layout sqs-grid-12 columns-12&quot; data-layout-label=&quot;Post Body&quot; data-type=&quot;item&quot; data-updated-on=&quot;1596455395321&quot; id=&quot;item-5f27f9e3faf3d92da6be4617&quot;&gt;
&lt;div class=&quot;row sqs-row&quot;&gt;
&lt;div class=&quot;col sqs-col-12 span-12&quot;&gt;
&lt;div class=&quot;sqs-block markdown-block sqs-block-markdown&quot; data-block-type=&quot;44&quot; id=&quot;block-yui_3_17_2_1_1596457344153_13390&quot;&gt;
&lt;div class=&quot;sqs-block-content&quot;&gt;
&lt;p&gt;I often describe myself as a cultural determinist, more as a way to differentiate myself from people with other dominant worldviews, though I am not a strict adherent. It‚Äôs more that in many situations when people ascribe causal power to something other than culture, I‚Äôm immediately suspicious.&lt;/p&gt;
&lt;p&gt;The 2010‚Äôs were a fascinating time to follow the consumer tech industry in China. Though I left Hulu in 2011, I still kept in touch with a lot of the team from our satellite Hulu Beijing office, many of whom scattered out to various Chinese tech companies throughout the past decade. On my last visit to the Hulu Beijing office in 2011, I was skeptical any of the new tech companies out of China would ever crack the U.S. market.&lt;/p&gt;
&lt;p&gt;It wasn‚Äôt just that the U.S. had strong incumbents, or that the Chinese tech companies were still in their infancy. My default hypothesis was that what I call the veil of cultural ignorance was too impenetrable a barrier. That companies from non-&lt;a href=&quot;https://amzn.to/33iA8aY&quot;&gt;WEIRD&lt;/a&gt; countries (Joseph Henrich shorthand for Western, Educated, Industrialized, Rich, and Democratic) would struggle to ship into WEIRD cultures. I was even skeptical of the reverse, of U.S. companies competing in China or India. The further the cultural distance between two countries, the more challenging it would be for companies in one to compete in the other. The path towards overcoming that seemed to lie in hiring a local leadership team, or sending someone over from the U.S. who understood the culture of that country inside-out.&lt;/p&gt;
&lt;p&gt;For the most part, that has held true. China has struggled, for the most part, to make real inroads in the U.S. WeChat tried to make inroads in the U.S. but only really managed to capture Chinese-Americans who used the app to communicate with friends, family, and business colleagues in China.&lt;/p&gt;
&lt;p&gt;In the other direction, the U.S. hasn‚Äôt made a huge dent in China. Obviously, the Great Firewall played a huge role in keeping a lot of U.S. companies out of the Chinese market, but in the few cases where a U.S. company got a crack at the Chinese market, like Uber China, the results were mixed.&lt;/p&gt;
&lt;p&gt;For this reason, I‚Äôve been fascinated with TikTok. Here in 2020, TikTok is, for many, including myself, the most entertaining short video app going. The U.S. government is considering banning the app as a national security risk, and while that‚Äôs the topic du jour for just about everyone right now, I‚Äôm much more interested in tracing how it got a foothold in markets outside of China, especially the U.S. with its powerful incumbents.&lt;/p&gt;
&lt;p&gt;They say you learn the most from failure, and in the same way I learn the most about my mental models from the exceptions. How did an app designed by two guys in Shanghai managed to run circles around U.S. video apps from YouTube to Facebook to Instagram to Snapchat, becoming the most fertile source for meme origination, mutation, and dissemination in a culture so different from the one in which it was built?&lt;/p&gt;
&lt;p&gt;The answer, I believe, has significant implications for the future of cross-border tech competition, as well as for understanding how product developers achieve product-market-fit. The rise of TikTok updated my thinking. It turns out that in some categories, &lt;strong&gt;a machine learning algorithm significantly responsive and accurate can pierce the veil of cultural ignorance&lt;/strong&gt;. Today, sometimes &lt;strong&gt;culture can be abstracted&lt;/strong&gt;.&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;TikTok's story begins in 2014, in Shanghai. Alex Zhu and Luyu ‚ÄúLouis‚Äù Yang had launched an educational short-form video app that hadn‚Äôt gotten any traction. They decided to pivot to lip-synch music videos, launching Musical.ly in the U.S. and China. Ironically, the app got more traction across the Pacific Ocean, so they killed their efforts in their home country of China and focused their efforts on their American market.&lt;/p&gt;
&lt;p&gt;The early user base consisted mostly of American teenage girls. Finally, an app offered users the chance to lip synch to the official version of popular songs and have those videos distributed to an audience for social feedback.&lt;/p&gt;
&lt;p&gt;That the app got any traction at all was progress. However, it presented Alex, Louis, and their team with a problem. American teen girls were not exactly an audience Alex and Louis really understood.&lt;input data-preserve-html-node=&quot;true&quot; type=&quot;checkbox&quot; id=&quot;sn-demo&quot; class=&quot;margin-toggle&quot;/&gt;&lt;span data-preserve-html-node=&quot;true&quot; class=&quot;sidenote&quot;&gt;To be fair, most American parents would argue they don't understand their teenage daughters either.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;During this era where China and the U.S. tech scenes have overlapped, the Chinese market has been largely impenetrable to the U.S. tech companies because of the Great Firewall, both the software instance and the outright bans from the CCP. But in the reverse direction, America has been almost as impenetrable to Chinese companies because of what might be though of as America‚Äôs cultural firewall. Outside of DJI in drones&lt;input data-preserve-html-node=&quot;true&quot; type=&quot;checkbox&quot; id=&quot;sn-demo&quot; class=&quot;margin-toggle&quot;/&gt;&lt;span data-preserve-html-node=&quot;true&quot; class=&quot;sidenote&quot;&gt;I'd argue one reason DJI had success in America was that drone control interfaces borrow heavily from standard flight control interfaces and are not culturally specific. Thus DJI could lean on its hardware prowess which was formidable.&lt;/span&gt;, I can‚Äôt think of any Chinese app making real inroads in the U.S. prior to Musical.ly. To build on its early traction, Musical.ly would have to overcome this cultural barrier.&lt;/p&gt;
&lt;p&gt;It‚Äôs been said that if you ask your customers what they want, they‚Äôll ask for a faster horse (attributed to Henry Ford, &lt;a href=&quot;https://hbr.org/2011/08/henry-ford-never-said-the-fast&quot;&gt;though that may not be true&lt;/a&gt;). Frankly, that‚Äôs always been half horses***, and not just because horses are involved. First of all, what if your customers are horse jockeys?&lt;/p&gt;
&lt;p&gt;Secondly, while you can‚Äôt listen to your customers exclusively, paying attention to them is a dependable way to build a solid SaaS business, and even in the consumer space it provides useful signal. As I‚Äôve written about before, customers may tell you they want a faster horse, and what you should hear is not that you should be injecting your horses with steroids but that your customers find their current mode of transportation, the aforementioned horse, to be too slow a means of getting around.&lt;/p&gt;
&lt;p&gt;Alex and Louis listened to Musical.ly‚Äôs early adopters. The app made feedback channels easy to find, and the American teenage girls using the app every day were more than willing to speak up about what they wanted to ease their video creation. They sent a ton of product requests, helping to inform a product roadmap for the Musical.ly team. That, combined with some clever growth hacks, like allowing watermarked videos to easily be downloaded and distributed via other networks like YouTube, Facebook, and Instagram, helped them achieve hockey-stick inflection among their target market.&lt;/p&gt;
&lt;p&gt;Still, Musical.ly ran into its &lt;a href=&quot;https://www.eugenewei.com/blog/2018/5/21/invisible-asymptotes&quot;&gt;invisible asymptote&lt;/a&gt; eventually. There are only so many teenage girls in the U.S. When they saturated that market, usage and growth flatlined. It was then that a suitor they had rebuffed previously, the Chinese technology company Bytedance, suddenly looked more attractive, like Professor Bhaer to Jo March at the end of Little Women. In a bit of dramatic irony, Bytedance had cloned Musical.ly in China with an app called Douyin, one that had taken off in China, and now Bytedance was buying the app that inspired it, Musical.ly, an app conceived and built in China but that had failed in China and instead gotten traction in the U.S.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sqs-block image-block sqs-block-image&quot; data-block-type=&quot;5&quot; id=&quot;block-yui_3_17_2_1_1596457344153_27186&quot;&gt;
&lt;div class=&quot;sqs-block-content&quot;&gt;
&lt;div class=&quot; image-block-outer-wrapper layout-caption-hidden design-layout-inline combination-animation-none individual-animation-none individual-text-animation-none&quot; data-test=&quot;image-block-inline-outer-wrapper&quot;&gt;&lt;button class=&quot; sqs-block-image-button lightbox&quot; data-description=&quot;&quot; data-lightbox-theme=&quot;dark&quot;&gt;&lt;span class=&quot;v6-visually-hidden&quot;&gt;View fullsize&lt;/span&gt;
&lt;div class=&quot; image-block-wrapper has-aspect-ratio&quot; data-animation-role=&quot;image&quot;&gt;&lt;noscript&gt;
&lt;p&gt;&lt;img src=&quot;https://images.squarespace-cdn.com/content/v1/4ff36e51e4b0d277e953e394/1596457417449-UZAGCUELC8ESLFIWPUUY/ke17ZwdGBToddI8pDm48kFr-MCz83LG2ZqzGFu9uALUUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYxCRW4BPu10St3TBAUQYVKcf42APUzg73I6BbvkUSZBpJhcOgRzHbaVuNgQSOKA8C5AwPhW16geOHSxinwWbjVI/image+%283%29.jpeg&quot; alt=&quot;image (3).jpeg&quot;/&gt;&lt;/p&gt;
&lt;/noscript&gt;&lt;img class=&quot;thumb-image&quot; data-src=&quot;https://images.squarespace-cdn.com/content/v1/4ff36e51e4b0d277e953e394/1596457417449-UZAGCUELC8ESLFIWPUUY/ke17ZwdGBToddI8pDm48kFr-MCz83LG2ZqzGFu9uALUUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYxCRW4BPu10St3TBAUQYVKcf42APUzg73I6BbvkUSZBpJhcOgRzHbaVuNgQSOKA8C5AwPhW16geOHSxinwWbjVI/image+%283%29.jpeg&quot; data-image=&quot;https://images.squarespace-cdn.com/content/v1/4ff36e51e4b0d277e953e394/1596457417449-UZAGCUELC8ESLFIWPUUY/ke17ZwdGBToddI8pDm48kFr-MCz83LG2ZqzGFu9uALUUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYxCRW4BPu10St3TBAUQYVKcf42APUzg73I6BbvkUSZBpJhcOgRzHbaVuNgQSOKA8C5AwPhW16geOHSxinwWbjVI/image+%283%29.jpeg&quot; data-image-dimensions=&quot;1280x960&quot; data-image-focal-point=&quot;0.5,0.5&quot; alt=&quot;image (3).jpeg&quot; data-load=&quot;false&quot; data-image-id=&quot;5f2801c89526e63b9bc1e3e3&quot; data-type=&quot;image&quot;/&gt;&lt;/div&gt;
&lt;/button&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sqs-block markdown-block sqs-block-markdown&quot; data-block-type=&quot;44&quot; id=&quot;block-yui_3_17_2_1_1596458721558_17293&quot;&gt;
&lt;div class=&quot;sqs-block-content&quot;&gt;
&lt;p&gt;After the purchase, Bytedance rebranded Musical.ly as TikTok. Still, if that‚Äôs all they had done, it‚Äôs not clear why the app would‚Äôve broken out of its stalled growth to the stunning extent it has under its new owner. After all, Bytedance paid just $1B for an app that‚Äôs rumored to sell now, if the U.S. government approves the transaction, for anywhere from $30 to $70B.&lt;/p&gt;
&lt;p&gt;Bytedance did two things in particular to jumpstart TikTok‚Äôs growth.&lt;/p&gt;
&lt;p&gt;First, it opened up its wallet and started spending on user acquisition in the U.S. the way wealthy Chinese used to spend on American real estate (no, I‚Äôm not still bitter at all the Chinese all-cash offers that trounced me repeatedly when condo-hunting six years ago). TikTok was rumored to have been spending a staggering eight or nine figures a month on advertising.&lt;/p&gt;
&lt;p&gt;The ubiquity of TikTok ads lent the theory credence. I saw TikTok ads everywhere, on YouTube, Instagram, Twitter, Facebook, and in mobile games&lt;input data-preserve-html-node=&quot;true&quot; type=&quot;checkbox&quot; id=&quot;sn-demo&quot; class=&quot;margin-toggle&quot;/&gt;&lt;span data-preserve-html-node=&quot;true&quot; class=&quot;sidenote&quot;&gt;TikTok ads are bizarre. The video ads I see for the app in mobile games convey nothing about what the app is or does. One ad I've seen dozens of times has an old lady doing lunges in her living room, another has a kid blow drying his hair, and as he does, his hair changes colors. I feel like the ads could do a better job of selling the app, but what do I know?&lt;/span&gt;. If Bytedance could have purchased ads on the back of my eyelids at sub $20 CPMs I don‚Äôt doubt they would have done so.&lt;/p&gt;
&lt;p&gt;It didn‚Äôt look like a wise investment at first. Rumors abounded that the 30-day retention of all those new users poured into the top of its funnel was sub 10%. They seemed to be lighting ad dollars on fire.&lt;/p&gt;
&lt;p&gt;Ultimately, the ROI on that spend would turn the corner, but only because of the second element of their assault on the US market, the most important piece of technology Bytedance introduced to TikTok: the updated For You Page feed algorithm.&lt;/p&gt;
&lt;p&gt;Bytedance has an absurd proportion of their software engineers focused on their algorithms, more than half at last check. It is known as the algorithm company, first for its breakout algorithmic ‚Äúnews‚Äù app Toutiao, then for its Musical.ly clone Douyin, and now for TikTok.&lt;/p&gt;
&lt;p&gt;Prior to TikTok, I would‚Äôve said YouTube had the strongest exploit algorithm in video,&lt;input data-preserve-html-node=&quot;true&quot; type=&quot;checkbox&quot; id=&quot;sn-demo&quot; class=&quot;margin-toggle&quot;/&gt;&lt;span data-preserve-html-node=&quot;true&quot; class=&quot;sidenote&quot;&gt;The exploit versus explore conundrum is sort of a classic of algorithmic design, usually mentioned in relation to the multi-armed bandit problem. For the purposes of this discussion, think of it simply as the problem of choosing which videos to show you. An exploit algorithm will give you more of what you like, while an explore algorithm tries to broaden your exposure to more than just what you‚Äôve shown you like. YouTube is often described as an exploit algorithm because it tends to really push more of what you like, and then before you know it, you‚Äôre looking at some alt-right video that‚Äôs trying to redpill you.&lt;/span&gt; but in comparison to TikTok, YouTube‚Äôs algorithm feels primitive (the top creators on YouTube have long ago figured out how to game YouTube‚Äôs algorithm‚Äôs heavy dependence on click-through rates and watch time, one reason so many YouTube videos are lengthening over time, much to my dismay).&lt;/p&gt;
&lt;p&gt;Before Bytedance bought Musical.ly and rebranded it TikTok, its Musical.ly clone called Douyin was already a sensation in the Chinese market thanks in large part to its effective algorithm. A few years ago, on a visit to Beijing, I caught up with a bunch of former colleagues from Hulu Beijing, and all of them showed me their Douyin feeds. They described the app as frighteningly addictive and the algorithm as eerily perceptive. More than one of them said they had to delete the app off their phone for months at a time because they were losing an hour or two every night just lying in bed watching videos.&lt;/p&gt;
&lt;p&gt;That same trip, I had coffee with an ex-Hulu developer who now was now a senior exec in the Bytedance engineering organization. Of course, he was tight-lipped about how their algorithm worked, but the scale of their infrastructure dedicated to their algorithms was clear. On my way in and out of this office, just one of several Bytedance spaces all across the city, I gawked at hundreds of workers sitting side by side in row after row in the open floorplan. It resembled what I‚Äôd seen at tech giants like Facebook in the U.S., but even denser.&lt;input data-preserve-html-node=&quot;true&quot; type=&quot;checkbox&quot; id=&quot;sn-demo&quot; class=&quot;margin-toggle&quot;/&gt;&lt;span data-preserve-html-node=&quot;true&quot; class=&quot;sidenote&quot;&gt;The mood was giddy. I could tell he was doing well. He took me and my friends to a Luckin Coffee in their office basement and told us to order drinks off an app on his phone. I reached in my pocket for some RMB to pay for the drinks and he put his hand on my arm to stop me. ‚ÄúDon‚Äôt worry, I can afford this,‚Äù he said, laughing. He didn‚Äôt mean it in a boasting manner, he seemed almost sheepish about how well they were doing. Afterwards, as we waited outside the office in their parking lot, he walked past and asked me if I needed a ride. No, I said, I‚Äôd be taking the subway. A Tesla Model X pulled up, the valet hopped out, and he jumped in and drove off.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;It‚Äôs rumored that Bytedance examines more features of videos than other companies. If you like a video featuring video game captures, that is noted. If you like videos featuring puppies, that is noted. Every Douyin feed I examined was distinctive. My friends all noted that after spending only a short amount of time in the app, it had locked onto their palate.&lt;/p&gt;
&lt;p&gt;That, more than anything else, was the critical upgrade Bytedance applied to Musical.ly to turn it into TikTok. Friends at Bytedance claimed, with some pride, that after they plugged Musical.ly, now TikTok, into Bytedance‚Äôs back-end algorithm, they doubled the time spent in the app. I was skeptical until I asked some friends who had some data on the before and after. The step change in the graph was anything but subtle.&lt;/p&gt;
&lt;p&gt;At the time Musical.ly got renamed TikTok, it was still dominated by teen girls doing lip synch videos. Many U.S. teens at the time described TikTok as ‚Äúcringey,‚Äù usually a kiss of death for networks looking to expand among youths, fickle as they are about what‚Äôs cool. Scrolling the app at the time felt like eavesdropping on the theater kids clique from high school. Entertaining, but hardly a mainstream entertainment staple.&lt;/p&gt;
&lt;p&gt;That‚Äôs where the one-two combination of Bytedance‚Äôs enormous marketing spend and the power of TikTok‚Äôs algorithm came to the rescue. To help a network break out from its early adopter group, you need both to bring lots of new people/subcultures into the app‚Äîthat‚Äôs where the massive marketing spend helps‚Äîbut also ways to help these disparate groups to 1) find each other quickly and 2) branch off into their own spaces.&lt;/p&gt;
&lt;p&gt;More than any other feed algorithm I can recall, Bytedance‚Äôs short video algorithm fulfilled these two requirements. It is a rapid, hyper-efficient matchmaker. Merely by watching some videos, and without having to follow or friend anyone, you can quickly train TikTok on what you like. In the two sided entertainment network that is TikTok, the algorithm acts as a rapid, efficient market maker, connecting videos with the audiences they‚Äôre destined to delight. The algorithm allows this to happen &lt;strong&gt;without an explicit follower graph&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Just as importantly, by personalizing everyone‚Äôs FYP feeds, TikTok helped to keep these distinct subcultures, with their different tastes, separated. One person‚Äôs cringe is another person‚Äôs pleasure, but figuring out which is which is no small feat.&lt;/p&gt;
&lt;p&gt;TikTok‚Äôs algorithm is the Sorting Hat from the Harry Potter universe. Just as that magical hat sorts students at Hogwarts into the Gryffindor, Hufflepuff, Ravenclaw, and Slytherin houses, TikTok‚Äôs algorithm sorts its users into dozens and dozens of subcultures&lt;input data-preserve-html-node=&quot;true&quot; type=&quot;checkbox&quot; id=&quot;sn-demo&quot; class=&quot;margin-toggle&quot;/&gt;&lt;span data-preserve-html-node=&quot;true&quot; class=&quot;sidenote&quot;&gt;The Sorting Hat is perhaps the most curious plot device from the Harry Potter universe. Is it a metaphor for genetic determinism? Did Draco have any hope of not being a Slytherin? By sorting Draco into that house, did it shape his destiny? Is the hat a metaphor for the U.S. college admissions system, with all its known biases? Is Harry Potter, sorted into Gryffindor, a legacy admit?&lt;/span&gt;. Not two FYP feeds are alike.&lt;/p&gt;
&lt;p&gt;For all the naive and idealistic dreams of the so-called ‚Äúmarketplace of ideas,‚Äù the first generation of large social networks has proven mostly unprepared and ill-equipped to deal with the resulting culture wars. Until they have some real substantial ideas and incentives to take on the costly task of mediating between strangers who disagree with each other, they‚Äôre better off sorting those people apart. The only types of people who enjoy being thrown into a gladiatorial online arena together with those they disagree with seem to be trolls, who benefit asymmetrically from the resultant violence.&lt;/p&gt;
&lt;p&gt;Consider Twitter's content moderation problems. How much of that results from throwing liberals and conservatives together in a timeline together? Twitter employees speak often about wanting to improve public discourse, but they‚Äôd be much better off (and society, too) keeping the Slytherins and Gryffindors apart until they have some real substantive ideas to solve the problem of low trust conversation.&lt;input data-preserve-html-node=&quot;true&quot; type=&quot;checkbox&quot; id=&quot;sn-demo&quot; class=&quot;margin-toggle&quot;/&gt;&lt;span data-preserve-html-node=&quot;true&quot; class=&quot;sidenote&quot;&gt;The same can be said of NextDoor and their problem of racist reporting of minorities just walking down the sidewalk. They‚Äôd be better off just removing that feature. At some point, NextDoor needs to face the fact that they aren‚Äôt going to solve racism. Tweak that feature all you want, put up all the hoops for users to jump through to file such a report, but adverse selection ensures that those most motivated to jump through them are the racist ones.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;After some time, new subcultures did indeed emerge on TikTok. No longer was it just teenage girls lip-synching. There are &lt;a href=&quot;https://www.nytimes.com/2020/06/10/style/elite-tiktok.html&quot;&gt;so many subcultures on TikTok&lt;/a&gt; I can barely track them because I only ever see a portion of them in my personalized FYP. This broadened TikTok‚Äôs appeal and total addressable market. Douyin had followed that path in China, so Bytedance at least had some precedent for committing to such an expensive bet, but I wasn‚Äôt certain if it would work in the U.S., a much more competitive media and entertainment market.&lt;/p&gt;
&lt;p&gt;Within a larger social network, even subcultures need some minimum viable scale, and though Bytedance paid dearly to fill the top of the funnel, its algorithm eventually helped assemble many subcultures surpassing that minimum viable scale. More notably, it did so with amazing speed.&lt;/p&gt;
&lt;p&gt;Think of how most other social networks have scaled. The usual path is organic. Users are encouraged to follow and friend each other to assemble their own graph one connection at a time. The challenge with that is that it‚Äôs almost always a really slow build, and you have to provide some reason for people to hang around and build that graph, often encapsulated by the aphorism ‚Äú&lt;a href=&quot;https://cdixon.org/2015/01/31/come-for-the-tool-stay-for-the-network&quot;&gt;come for the tool, stay for the network&lt;/a&gt;.‚Äù Today, it‚Äôs not as easy to build the ‚Äútool‚Äù part when so much of that landscape has already been mined and when scaled networks have learned to copy any tool achieving any level of traction.&lt;input data-preserve-html-node=&quot;true&quot; type=&quot;checkbox&quot; id=&quot;sn-demo&quot; class=&quot;margin-toggle&quot;/&gt;&lt;span data-preserve-html-node=&quot;true&quot; class=&quot;sidenote&quot;&gt;In the West, Facebook is the master of the fast follow. They struggle to launch new social graphs of their own invention, but if they spot any competing social network achieve any level of traction, they will lock down and ship a clone with blinding speed. Good artists borrow, great artists steal, the best artists steal the most quickly? Facebook as a competitor reminds me of that class of zombies in movies that stagger around drunk most of the time, but the moment they spot a target, they sprint at it like a pack of cheetahs. The type you see in 28 Days Later and I Am Legend. Terrifying.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Some people still think that a new social network will be built around a new content format, but it‚Äôs almost impossible to think of a format that couldn‚Äôt be copied in two to three months by a compact Facebook team put in lockdown with catered dinners. Yes, a new content format might create a new proof of work, as I wrote about in &lt;a href=&quot;https://www.eugenewei.com/blog/2019/2/19/status-as-a-service&quot;&gt;Status as a Service&lt;/a&gt;, but just as critical is building the right structures to distribute such content to the right audience to close the social feedback loop.&lt;/p&gt;
&lt;p&gt;What‚Äôs the last new social network to achieve scale in recent years? You probably can‚Äôt think of any, and that‚Äôs because there really aren‚Äôt any. Even Facebook hasn‚Äôt been able to launch any really new successful social products, and a lot of that is because they also seem fixated on building these things around some content format gimmick.&lt;/p&gt;
&lt;p&gt;Recall the three purposes which I used to distinguish among networks in Status as a Service: social capital (status), entertainment, and utility. In another post soon I promise to explain why I classify networks along these three axes, but for now, just know that while almost all networks serve some mix of the three, most lean heavily towards one of those three purposes.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sqs-block image-block sqs-block-image&quot; data-block-type=&quot;5&quot; id=&quot;block-yui_3_17_2_1_1596536037257_110358&quot;&gt;
&lt;div class=&quot;sqs-block-content&quot;&gt;
&lt;div class=&quot; image-block-outer-wrapper layout-caption-hidden design-layout-inline combination-animation-none individual-animation-none individual-text-animation-none&quot; data-test=&quot;image-block-inline-outer-wrapper&quot;&gt;
&lt;div class=&quot; image-block-wrapper has-aspect-ratio&quot; data-animation-role=&quot;image&quot;&gt;&lt;noscript&gt;
&lt;p&gt;&lt;img src=&quot;https://images.squarespace-cdn.com/content/v1/4ff36e51e4b0d277e953e394/1596536801608-OQKP0VME837YX5G6EWPS/ke17ZwdGBToddI8pDm48kLrCtcCYMJoFeQU5ToTim5pZw-zPPgdn4jUwVcJE1ZvWQUxwkmyExglNqGp0IvTJZamWLI2zvYWH8K3-s_4yszcp2ryTI0HqTOaaUohrI8PIiYIGa4H0Zi4cljq66YimTcneTV0Q5dn4H-IVAtrdT_k/3-axis.png&quot; alt=&quot;3-axis.png&quot;/&gt;&lt;/p&gt;
&lt;/noscript&gt;&lt;img class=&quot;thumb-image&quot; data-src=&quot;https://images.squarespace-cdn.com/content/v1/4ff36e51e4b0d277e953e394/1596536801608-OQKP0VME837YX5G6EWPS/ke17ZwdGBToddI8pDm48kLrCtcCYMJoFeQU5ToTim5pZw-zPPgdn4jUwVcJE1ZvWQUxwkmyExglNqGp0IvTJZamWLI2zvYWH8K3-s_4yszcp2ryTI0HqTOaaUohrI8PIiYIGa4H0Zi4cljq66YimTcneTV0Q5dn4H-IVAtrdT_k/3-axis.png&quot; data-image=&quot;https://images.squarespace-cdn.com/content/v1/4ff36e51e4b0d277e953e394/1596536801608-OQKP0VME837YX5G6EWPS/ke17ZwdGBToddI8pDm48kLrCtcCYMJoFeQU5ToTim5pZw-zPPgdn4jUwVcJE1ZvWQUxwkmyExglNqGp0IvTJZamWLI2zvYWH8K3-s_4yszcp2ryTI0HqTOaaUohrI8PIiYIGa4H0Zi4cljq66YimTcneTV0Q5dn4H-IVAtrdT_k/3-axis.png&quot; data-image-dimensions=&quot;799x640&quot; data-image-focal-point=&quot;0.5,0.5&quot; alt=&quot;3-axis.png&quot; data-load=&quot;false&quot; data-image-id=&quot;5f2937e1e3538d6f2ce9ecfd&quot; data-type=&quot;image&quot;/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sqs-block markdown-block sqs-block-markdown&quot; data-block-type=&quot;44&quot; id=&quot;block-yui_3_17_2_1_1596536037257_110646&quot;&gt;
&lt;div class=&quot;sqs-block-content&quot;&gt;
&lt;p&gt;A network like Venmo or Uber, for example, is mostly about utility: I need to pay someone money, or I need to travel from here to there. A network like YouTube is more about entertainment. Amuse me. And some networks, what most people refer to when they use the generic term ‚Äúsocial network,‚Äù are more focused on social capital. Soho Club, for example.&lt;/p&gt;
&lt;p&gt;TikTok is less a pure social network, the type focused on social capital, than an entertainment network. I don‚Äôt socialize with people on TikTok, I barely know any of them. It consists of a network of people connected to each other, but they are connected for a distinct reason, for creators to reach viewers with their short videos.&lt;input data-preserve-html-node=&quot;true&quot; type=&quot;checkbox&quot; id=&quot;sn-demo&quot; class=&quot;margin-toggle&quot;/&gt;&lt;span data-preserve-html-node=&quot;true&quot; class=&quot;sidenote&quot;&gt;Bytedance hasn't been successful in building out a social network to compete with WeChat, though it's not for lack of trying. I think they have a variety of options for doing so, but as with many companies that didn't begin as social first, it's not in their DNA. Facebook is underrated for its ability to build functional social plumbing at scale, that is a rare design skill. Companies as diverse as Amazon and Netflix have tried building social features and then later abandoned them. I suspect they tried when they didn't have enough users to create breakaway social scale, but it's difficult to imagine them pulling that off without more social DNA. But having a social-first DNA also means that Facebook isn't great at building non-social offerings. Their video or watch tab remains a bizarre and unfocused mess.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;One can debate the semantics of what constitutes a social network forever, but what matters here is realizing that another way to describe an entertainment network is as an interest network. TikTok takes content from one group of people and match it to other people who would enjoy that content. &lt;strong&gt;It is trying to figure out what hundreds of millions of viewers around the world are interested in&lt;/strong&gt;. When you frame TikTok's algorithm that way, its enormous unrealized potential snaps into focus.&lt;/p&gt;
&lt;p&gt;The idea of using a social graph to build out an interest-based network has always been a sort of approximation, a hack. You follow some people in an app, and it serves you some subset of the content from those people under the assumption that you‚Äôll find much of what they post of interest to you. It worked in college for Facebook because a bunch of hormonal college students are really interested in each other. It worked in Twitter, eventually, though it took a while. Twitter's unidirectional follow graph allowed people to pick and choose who to follow with more flexibility than Facebook's initial bi-directional friend model, but Twitter didn't provide enough feedback mechanisms early on to help train its users on what to tweet. The early days were filled with a lot of status updates of the variety people cite when criticizing social media: &quot;nobody cares what you ate for lunch.&quot;&lt;input data-preserve-html-node=&quot;true&quot; type=&quot;checkbox&quot; id=&quot;sn-demo&quot; class=&quot;margin-toggle&quot;/&gt;&lt;span data-preserve-html-node=&quot;true&quot; class=&quot;sidenote&quot;&gt;I talk about Twitter's slow path to product market fit in &lt;a href=&quot;https://www.eugenewei.com/blog/2019/2/19/status-as-a-service&quot;&gt;Status as a Service&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;But what if there was a way to build an interest graph for you without you having to follow anyone? What if you could skip the long and painstaking intermediate step of assembling a social graph and just jump directly to the interest graph? And what if that could be done really quickly and cheaply at scale, across millions of users? And what if the algorithm that pulled this off could also adjust to your evolving tastes in near real-time, without you having to actively tune it?&lt;/p&gt;
&lt;p&gt;The problem with approximating an interest graph with a social graph is that social graphs have negative network effects that kick in at scale. Take a social network like Twitter: the one-way follow graph structure is well-suited to interest graph construction, but the problem is that you‚Äôre rarely interested in everything from any single person you follow. You may enjoy Gruber‚Äôs thoughts on Apple but not his Yankees tweets. Or my tweets on tech but not on film. And so on. You can try to use Twitter Lists, or mute or block certain people or topics, but it‚Äôs all a big hassle that few have the energy or will to tackle.&lt;/p&gt;
&lt;p&gt;Think of what happened to Facebook when it‚Äôs users went from having their classmates as friends to hundreds and often thousands of people as friends, including coworkers, parents, and that random person you met at the open bar at a wedding reception and felt obligated to accept a friend request from even though their jokes didn‚Äôt seem as funny the next morning in the cold light of sobriety. Some have termed it context collapse, but by any name, it‚Äôs an annoyance everyone understands. It manifests itself in the declining visit and posting frequency on Facebook across many cohorts.&lt;/p&gt;
&lt;p&gt;Think of Snapchat‚Äôs struggles to differentiate between its utility‚Äî as a way to communicate among friends‚Äîand its entertainment function as a place famous people broadcast content to their fans. In a controversial redesign, Snapchat cleaved the broadcast content from influencers into the righthand Discover tab, leaving your conversations with friends in the left Chat pane. Look, the redesign seemed to say, Kylie Jenner is not your friend.&lt;/p&gt;
&lt;p&gt;TikTok doesn‚Äôt bump into the negative network effects of using a social graphs at scale because it doesn't really have one. It is more of a pure interest graph, one derived from its short video content, and the beauty is its algorithm is so efficient that it its interest graph can be assembled without imposing much of a burden on the user at all. It is passive personalization, learning throug consumption. Because the videos are so short, the volume of training data a user provides per unit of time is high. Because the videos are entertaining, this training process feels effortless, even enjoyable, for the user.&lt;/p&gt;
&lt;p&gt;I like to say that ‚Äú&lt;strong&gt;when you gaze into TikTok, TikTok gazes into you&lt;/strong&gt;.‚Äù Think of all the countless hours product managers, designers and engineers have dedicated to growth-hacking social onboarding‚Äîgoading people into adding friends and following people, urging them to grant access to their phone contact lists‚Äîall in an attempt to carry them past the dead zone to the minimum viable graph size necessary to provide them with a healthy, robust feed. (sidenote: Every social product manager has heard the story of Facebook and Twitter‚Äôs keystone metrics for minimum viable friend or follow graph size countless times.) Think of how many damn interest bubble UI‚Äôs you‚Äôve had to sit through before you could start using some new social product: what subjects interest you? who are your favorite musicians? what types of movies do you enjoy?&lt;input data-preserve-html-node=&quot;true&quot; type=&quot;checkbox&quot; id=&quot;sn-demo&quot; class=&quot;margin-toggle&quot;/&gt;&lt;span data-preserve-html-node=&quot;true&quot; class=&quot;sidenote&quot;&gt;The last time I tried to use Twitter‚Äôs new user onboarding flow, it recommended I follow, among other accounts, that of Donald Trump. There are countless ways they could onboard people more efficiently to provide them with a great experience immediately, but that is not one of them.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;TikTok came along and bypassed all of that. In a two-sided entertainment marketplace, they provide creators on one side with unmatched video creation tools coupled with potential super-scaled distribution, and viewers on the other side with an endless stream of entertainment that gets more personalized with time. In doing so, TikTok, with a product team and infrastructure mostly located in China, came out of left field and became a player in the attention marketplace on the same playing fields around the world as giants like Facebook, Instagram, Snapchat, YouTube, and Netflix. Not quite a Cinderella story...maybe a Mulan story?&lt;/p&gt;
&lt;p&gt;TikTok didn't just break out in America. It became unbelievably popular in India and in the Middle East, more countries whose cultures and language were foreign to the Chinese Bytedance product teams. Imagine an algorithm so clever it enables its builders to treat another market and culture as a complete black box. What do people in that country like? No, even better, what does each individual person in each of those foreign countries like? You don't have to figure it out. The algorithm will handle that. The algorithm knows.&lt;/p&gt;
&lt;p&gt;I don‚Äôt think the Chinese product teams I‚Äôve met in recent years in China are much further ahead than the ones I met in 2011 when it comes to understanding foreign cultures like America. But what the Bytedance algorithm did was it abstracted that problem away.&lt;input data-preserve-html-node=&quot;true&quot; type=&quot;checkbox&quot; id=&quot;sn-demo&quot; class=&quot;margin-toggle&quot;/&gt;&lt;span data-preserve-html-node=&quot;true&quot; class=&quot;sidenote&quot;&gt;One of the concerns about CCP ties with Bytedance is that they might use it as a propaganda tool against the U.S. I tend to think that problem is overrated because my sense is that many in China still don't understand the nuances of American culture, just as America doesn't understand theirs (though I speak Mandarin, some of the memes on Douyin fly way over my head). However, perhaps an algorithm that abstracts culture into a series of stimuli responses makes it more dangerous?&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Now imagine that level of hyper efficient interest matching applied to other opportunities and markets. Personalized TV of the future? Check. Education? I already find a lot of education videos in my TikTok feed, on everything from cooking to magic to iPhone hacks. Scale that up and Alex and Louis might finally realize their dream of a short video education app that they set out to build before Musical.ly.&lt;/p&gt;
&lt;p&gt;Shopping? A slam dunk, Douyin and Toutiao already enable a ton of commerce in China. Job marketplace? A bit of a stretch, but not impossible. If Microsoft buys TikTok, I‚Äôd certainly give the TikTok team a crack at improving my LinkedIn feed, which, to be clear, is horrifying. What about personalized reading, from books to newsletters to blogs? Music? Podcasts? Yes, yes, yes please. Dating? The world could absolutely use an alternative to the high GINI co-efficient, high inequality dating marketplace that is Tinder.&lt;/p&gt;
&lt;p&gt;Douyin already visualizes much of this future for us with its much broader diversity of videos and revenue models. In China, video e-commerce is light years ahead of where it is in the U.S. (for a variety of reasons, but none that aren‚Äôt surmountable; a topic, again, for another piece). Whereas TikTok can still feel, to me, like a pure entertainment time-killer, Douyin, which I track on a separate phone I keep just to run Chinese apps for research purposes, feels like much more than that. It feels like a realization of short video as a broad use case platform.&lt;/p&gt;
&lt;p&gt;There‚Äôs a reason that many people in the U.S. today describe social media as work. And why many, like me, have come to find TikTok a much more fun app to spend time in. Apps like Facebook, Instagram, and Twitter are built on social graphs, and as such, they amplify the scale, ubiquity, and reach of our performative social burden. They struggle to separate their social functions from their entertainment and utility functions, injecting an aspect of social artifice where it never used to exist.&lt;/p&gt;
&lt;p&gt;Facebook has struggled with its transition to utility, which would‚Äôve offered it a path towards becoming more of a societal operating system the way WeChat is in China. To be fair, the competition for many of those functions is much stiffer in the U.S. In payments, for example, Facebook must compete with credit cards, which work fine and which most people default to in the U.S., whereas in China AliPay and WeChat Pay were competing with a cash-dominant culture. Still, in the U.S., Facebook has yet to make any real inroads in significant utility use cases like commerce.&lt;input data-preserve-html-node=&quot;true&quot; type=&quot;checkbox&quot; id=&quot;sn-demo&quot; class=&quot;margin-toggle&quot;/&gt;&lt;span data-preserve-html-node=&quot;true&quot; class=&quot;sidenote&quot;&gt;I speak so often about how much video as a medium is underrated by tech elites. In an alternate history of Facebook, they would've made a harder shift to becoming a video-only app, moving up the ladder from text to photos to videos, and maybe they would've become TikTok before TikTok. If they had, I think their time spent figures would be even higher today. For as quickly as Facebook moved to disrupt itself in the past, there's a limit to how far they're willing to go. I plan to compare the Chinese and U.S. tech ecosystems in a future post, and one of the broadest and most important takeaways is that China leapfrogged the U.S. in the shift to video, among many other things. This doesn't mean the U.S. won't then leapfrog China the next time around, but for now, the U.S. is the trailing frog in several categories.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Instagram is some strange hybrid mix of social and interest graph, and now it‚Äôs also a jumble of formats, with a Stories feed relegated to a top bar in the app while the more stagnant and less active original feed continues to run vertically as the default. Messaging is pushed to a separate pane and also served by a separate app. Longer form videos bounce you to Instagram TV, which is just an app for videos that exceed some time limit, I guess? And soon, perhaps commerce will be jammed in somehow? Meanwhile, they have a Discover tab, or whatever it is called, which seems like it could be the default tab if they wanted to take a more interest-based approach like TikTok. But they seem to have punted on making any hard decisions for so long now that the app is just a Frankenstein of feeds and formats and functions spread across a somewhat confused constellation of apps.&lt;/p&gt;
&lt;p&gt;Twitter has never seemed to know what it is. Ask ten different Twitter employees, you‚Äôll hear ten different answers. Perhaps that‚Äôs why the dominant product philosophy of the company seems to be a sort of constant paralysis broken up by the occasional crisis mitigation. One reason I‚Äôve long wished Twitter had just become a open protocol and let the developer community go to town is that Twitter moves. At. A. Snail's. Pace.&lt;/p&gt;
&lt;p&gt;The shame of it is that Twitter had a head start on an interest graph, largely through the work of its users, who gave signal on what they cared about through the graphs they assembled. That could have been a foundation to all sorts of new markets for them. They could‚Äôve even been an interest-based social network, but instead users have mostly extracted that value themselves by pinging each other through the woefully neglected DM product.&lt;input data-preserve-html-node=&quot;true&quot; type=&quot;checkbox&quot; id=&quot;sn-demo&quot; class=&quot;margin-toggle&quot;/&gt;&lt;span data-preserve-html-node=&quot;true&quot; class=&quot;sidenote&quot;&gt;Of course, Twitter also once purchased Vine and then let it wither on the, uh vine. Of all the tech companies that could purchase TikTok, maybe Twitter is the one that least deserves it. At a minimu, they should be required to submit a book report showing they understand what it is they're buying.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;A few other tech companies are worth mentioning here. YouTube is a massive video network, but honestly they may have shipped even less than Twitter over the years. That they don‚Äôt have any video creation tools of note (do they have any?!) and allowed TikTok to come in and steal the short video space is both shocking and not.&lt;/p&gt;
&lt;p&gt;Amazon launched a short video commerce app some time ago. It came and went so quickly I didn‚Äôt even have time to try it. Though Amazon is good at many things, they just don‚Äôt have the DNA to build something like TikTok. That they have failed to realize the short video commerce vision that China led the way on is a shocking miss on their part.&lt;/p&gt;
&lt;p&gt;Apple owns the actual camera that so many of these videos are shot on, but they've never understood social.&lt;input data-preserve-html-node=&quot;true&quot; type=&quot;checkbox&quot; id=&quot;sn-demo&quot; class=&quot;margin-toggle&quot;/&gt;&lt;span data-preserve-html-node=&quot;true&quot; class=&quot;sidenote&quot;&gt;iMessages could be a social networking colossus if Apple had the social DNA, but every day other messaging apps further away in functionality and design. But I guess they're finally adding threading in iMessages with the next iOS release? Haha.&lt;/span&gt; At least they'll continue to improve the camera hardware with every successive iPhone release.&lt;/p&gt;
&lt;p&gt;None of this is to say TikTok is anywhere near the market value of any of these aforementioned American tech giants. If you still think of it as a novelty meme short video app, you're not far from the truth.&lt;input data-preserve-html-node=&quot;true&quot; type=&quot;checkbox&quot; id=&quot;sn-demo&quot; class=&quot;margin-toggle&quot;/&gt;&lt;span data-preserve-html-node=&quot;true&quot; class=&quot;sidenote&quot;&gt;Are there flaws with TikTok? Of course. It‚Äôs far from perfect. The algorithm can be too clingy. Sometimes I like one video from some meme and the next day TikTok serves me too many follow-up videos from the same meme. But the great thing about a hyper-responsive algorithm is that you can tune it quickly, almost like priming GPT-3 to get the results you want. Often all it takes to inject some new subculture into your TikTok feed is to find some video from it (you can easily find them on YouTube or via friends whose feeds are different from your own) and like it. Another problem for TikTok is that a lot of other use cases are being jammed into what was designed to be a portrait mode lip synch video app. Vertical video is good for the human figure, for dance and makeup videos, but not ideal for other types of communication and storytelling (I still hate when basketball and football highlight clips can‚Äôt show more of the horizontal playing field, and that goes for both IG and TikTok; in many highlights of Steph Curry hitting a long 3 you can‚Äôt see him, or the basket, only one of the two, lol).&lt;/span&gt; Stepping up a level, the list of opportunities Bytedance and TikTok have yet to capitalize on in the U.S. is long, and it wouldn‚Äôt surprise me if they miss many of them even if they stave off a ban from the U.S. government. Much of it would require new form factors, and it‚Äôs unclear how strong the TikTok product team would be, especially if divested out of Bytedance. Under Microsoft, a company with a fairly shaky history in the consumer market, it's unclear that their full potential would be realized.&lt;/p&gt;
&lt;p&gt;Still, none of that product work is rocket science. Much of it seems clear in my head. More importantly, TikTok, if armed with the Bytedance algorithm as part of a divestment, has a generalized interest-matching algorithm that can allow it to tackle U.S. tech giants not head on but from an oblique angle. To see it as merely a novelty meme video app for kids is to miss what its much greater disruptive potential. That an app launched out of China could come to the U.S. and sprint into cultural relevance in this attention marketplace should be a wake-up call to complacent U.S. tech companies. Given how many of those companies rely on intuiting user interests to sell them things or to show them ads, a company like TikTok which found a shortcut to assembling such an interest graph should raise all sorts of alarm bells.&lt;/p&gt;
&lt;p&gt;It surprises me that more U.S. tech companies aren‚Äôt taking a harder run at trying to acquire TikTok if the rumored CFIUS hammer stops short of an outright ban. I can‚Äôt think of any of them that shouldn‚Äôt be bidding for what is a once-in-a-generation forced fire sale asset. I‚Äôve seen prices like $30B tossed around online. If that‚Äôs true, it‚Äôs an absolute bargain. I‚Äôd easily pay twice that without a second thought.&lt;/p&gt;
&lt;p&gt;I could cycle through my long list of nits, but ultimately they are all easily solvable with the right product vision and execution. TikTok has figured out the hardest piece, the algorithm. With it, a massive team made up mostly by people who‚Äôve never left China, and many who never will, grabbed massive marketshare in cultures and markets they‚Äôd never experienced firsthand. To a cultural determinist like myself, that feels like black magic.&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;On that same trip to China in 2018 when I visited Bytedance, an ex-colleague of mine from Hulu organized a visit for me to &lt;a href=&quot;https://www.newsdogapp.com/en/&quot;&gt;Newsdog&lt;/a&gt;. It was a news app for the Indian market built by a startup headquartered in Beijing. As I exited the elevator into their lobby, I was greeted by a giant mural of Jeff Bezos‚Äô famous saying ‚ÄúIt‚Äôs Always Day One‚Äù on the opposite wall.&lt;/p&gt;
&lt;p&gt;A friend of a friend was the CEO there, and he sat me down in a conference room to walk me through their app. They had raised $50M from Tencent just a few months earlier that year, and they were the number one news app in India at the time.&lt;/p&gt;
&lt;p&gt;He opened the app on his phone and handed it to me. Similar to Toutiao in China, there were different topic areas in a scrollbar across the top, with a vertical feed of stories beneath each. All of these were stories selected algorithmically, as is the style of Toutiao and so many apps in China.&lt;/p&gt;
&lt;p&gt;I looked through the stories, all in Hindi (and yes, one feed that contained the thirst trap photos of attractive Indian girls in rather suggestive outfits standing under things like waterfalls; some parts of culture are universal). Then I looked up from the app and through the glass walls of the conference room at an office filled with about 40 Chinese engineers, mostly male, tapping away on their computers. Then I looked back down at page after page of Hindi stories in the app.&lt;/p&gt;
&lt;p&gt;‚ÄúWait,‚Äù I asked. ‚ÄúDo you have people in this office or at the company who know how to read Hindi?‚Äù&lt;/p&gt;
&lt;p&gt;He looked at me with a smile.&lt;/p&gt;
&lt;p&gt;‚ÄúNo,‚Äù he said. ‚ÄúNone of us can read any of it.‚Äù&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;sqs-block html-block sqs-block-html&quot; data-block-type=&quot;2&quot; id=&quot;block-b2642ba669955650d0dc&quot;&gt;
&lt;div class=&quot;sqs-block-content&quot;&gt;
&lt;p class=&quot;&quot;&gt;NEXT POST: Part II of my thoughts on TikTok, on how the app design is informed by its algorithm and vice versa in a virtuous circle.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
<pubDate>Tue, 04 Aug 2020 13:23:41 +0000</pubDate>
<dc:creator>hardmaru</dc:creator>
<og:title>TikTok and the Sorting Hat ‚Äî Remains of the Day</og:title>
<og:url>https://www.eugenewei.com/blog/2020/8/3/tiktok-and-the-sorting-hat</og:url>
<og:type>article</og:type>
<og:description>NEXT POST: Part II of my thoughts on TikTok, on how the app design is informed by its algorithm and vice versa in a virtuous circle.</og:description>
<og:image>http://static1.squarespace.com/static/4ff36e51e4b0d277e953e394/t/5f2801c89526e63b9bc1e3e3/1596457424557/image+%283%29.jpeg?format=1500w</og:image>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.eugenewei.com/blog/2020/8/3/tiktok-and-the-sorting-hat</dc:identifier>
</item>
<item>
<title>Unlearn rotation matrices as rotations</title>
<link>https://kodkodgames.gitlab.io/rotation_matrices/</link>
<guid isPermaLink="true" >https://kodkodgames.gitlab.io/rotation_matrices/</guid>
<description>&lt;time datetime=&quot;2020-06-12&quot;&gt;2020-06-12&lt;/time&gt;&lt;p&gt;‚Äì Hey, Markus! What format is this head-rotation representation in?&lt;/p&gt;
&lt;p&gt;‚Äì It is a rotation matrix, I answer. Right handed, z forward through the nose and x through the left ear. Our young newly graduated colleague nods his/her head.&lt;/p&gt;
&lt;p&gt;After about 10 minutes I hear my name again.&lt;/p&gt;
&lt;p&gt;‚Äì Markus‚Ä¶. Eh, what order is it?&lt;/p&gt;
&lt;p&gt;‚Äì Oh no! You have opened Wikipedia? Haven‚Äôt you? I answer in despair from my desk.&lt;/p&gt;
&lt;p&gt;It happens time to time that a newly graduated engineer (or summer intern) asks me exactly this question. Almost always with the Wikipedia page open at the screen, which I think is horrible (or even worse, some ‚ÄúLearn OpenGL‚Äù tutorial).&lt;/p&gt;
&lt;p&gt;I &lt;s&gt;steal&lt;/s&gt; take a chair to sit down beside the person. This will take a few minutes, we are going to do something that is harder than learning: we are going to unlearn.&lt;/p&gt;
&lt;p&gt;It is interesting, I get no questions, or only very short questions, on Euler angels, Rodriguez rotations and actually only one recurrent question on quaternions. But very often I get questions on rotation matrices. I think it is a bit odd since rotation matrices are very simple in comparison to many other rotation representations. I think a big reason for this is the Wikipedia page. It looks something like this:&lt;/p&gt;
&lt;p&gt;\[ R_x(\theta) = \begin{bmatrix} 1 &amp;amp; 0 &amp;amp; 0 \\ 0 &amp;amp; \cos \theta &amp;amp; -\sin \theta \\ 0 &amp;amp; \sin \theta &amp;amp; \cos \theta \end{bmatrix} \] \[ R_y(\theta) = \begin{bmatrix} \cos \theta &amp;amp; 0 &amp;amp; \sin \theta \\ 0 &amp;amp; 1 &amp;amp; 0 \\ -\sin \theta &amp;amp; 0 &amp;amp; \cos \theta \end{bmatrix} \] \[ R_z(\theta) = \begin{bmatrix} \cos \theta &amp;amp; -\sin \theta &amp;amp; 0 \\ \sin \theta &amp;amp; \cos \theta &amp;amp; 0\\ 0 &amp;amp; 0 &amp;amp; 1\\ \end{bmatrix} \] \[ R = \begin{bmatrix} \cos\alpha\cos\beta &amp;amp; \cos\alpha\sin\beta\sin\gamma - \sin\alpha\cos\gamma &amp;amp; \cos\alpha\sin\beta\cos\gamma + \sin\alpha\sin\gamma \\ \sin\alpha\cos\beta &amp;amp; \sin\alpha\sin\beta\sin\gamma + \cos\alpha\cos\gamma &amp;amp; \sin\alpha\sin\beta\cos\gamma - \cos\alpha\sin\gamma \\ -\sin\beta &amp;amp; \cos\beta\sin\gamma &amp;amp; \cos\beta\cos\gamma \\ \end{bmatrix} \]&lt;/p&gt;
&lt;p&gt;It talks about rotations. Rotation around different axes and their relation to Euler angles. This can be a bit confusing when working with for example a head pose. You can of course think about rotation matrices as if the head rotates around different axes in different order, but it becomes kind of hard to interpret:&lt;/p&gt;
&lt;p&gt;\[ \begin{bmatrix} -0.9987820 &amp;amp; 0.0348782 &amp;amp; -0.0348995 \\ 0.0283128 &amp;amp; 0.9844193 &amp;amp; 0.1735424 \\ 0.0404086 &amp;amp; 0.1723429 &amp;amp; -0.9842078 \end{bmatrix} \]&lt;/p&gt;
&lt;p&gt;So to interpret this we need to solve the following equation system:&lt;/p&gt;
&lt;p&gt;\[ \begin{cases} -\sin(\beta) &amp;amp; = 0.0404086 \\ \cos(\beta)\sin(\gamma) &amp;amp; = 0.1723429 \\ \cos(\alpha)\cos(\beta) &amp;amp; = -0.9987820 \end{cases} \]&lt;/p&gt;
&lt;p&gt;and then we get an &lt;em&gt;‚Äúintrinsic rotation whose Tait‚ÄìBryan angles are Œ±, Œ≤, Œ≥, about axes z, y, x‚Äù&lt;/em&gt; to visualize in our head.&lt;/p&gt;
&lt;p&gt;Its sad because I think rotation matrices are one of the easiest representation to interpret.&lt;/p&gt;
&lt;p&gt;Don‚Äôt think of them as rotations, think of them as a unit vectors of a new coordinate systems.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://kodkodgames.gitlab.io/post/matrix_cs.png#center&quot; alt=&quot;plot of the coordinate system&quot;/&gt;&lt;/p&gt;
&lt;p&gt;We describe where the coordinate system is located related to another coordinate system (where we rotate from), for example from the camera‚Äôs coordinate system perspective (z forward, y upwards). The first column of the rotation matrix is the new x-axis expressed in the old coordinate system, the second column is the y-axis and so on. An identity matrix would yield in no rotation since all unit vectors would be the same as the previous coordinate system.&lt;/p&gt;
&lt;p&gt;\[ R = \begin{bmatrix} X_x &amp;amp; Y_x &amp;amp; Z_x \\ X_y &amp;amp; Y_y &amp;amp; Z_y \\ X_z &amp;amp; Y_z &amp;amp; Z_z \end{bmatrix} \]&lt;/p&gt;
&lt;p&gt;Lets go back to the example with the head expressed in the camera coordinate system and assume the head position is atfront of the camera. So by interpret the previous matrix, we can look at the new z-axis:&lt;/p&gt;
&lt;p&gt;\[ Z_{axis} = \begin{bmatrix} Z_x \\ Z_y \\ Z_z \end{bmatrix} = \begin{bmatrix} -0.0348995 \\ 0.1735424 \\ -0.9842078 \end{bmatrix} \]&lt;/p&gt;
&lt;p&gt;(Remember that z-axis is where the head‚Äôs nose is pointing)&lt;/p&gt;
&lt;p&gt;We can quickly see that z-part of the z-axis is almost -1. This means the nose is pointing at the opposite direction as the camera, eg. towards the camera if the person is sitting at front of it.&lt;/p&gt;
&lt;p&gt;We can also se that the persons head is rotated a little bit up (positive y component of the z-axis) and is pointing a little bit to the right of the camera (negative x component).&lt;/p&gt;
&lt;p&gt;And that‚Äôs it! Rotation matrices just describe the unit vectors of a new coordinate system.&lt;/p&gt;
&lt;p&gt;‚Ä¶&lt;/p&gt;
&lt;p&gt;‚Äì Hey, Markus! How come this matrix is 4x4?&lt;/p&gt;
&lt;p&gt;// Markus&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://news.ycombinator.com/item?id=24049593&quot;&gt;HN discussion&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 04 Aug 2020 13:12:55 +0000</pubDate>
<dc:creator>dosshell</dc:creator>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://kodkodgames.gitlab.io/rotation_matrices/</dc:identifier>
</item>
<item>
<title>Math Overflow users resolve PhD thesis crisis</title>
<link>https://mathoverflow.net/questions/366765/issue-update-in-graph-theory-different-definitions-of-edge-crossing-numbers</link>
<guid isPermaLink="true" >https://mathoverflow.net/questions/366765/issue-update-in-graph-theory-different-definitions-of-edge-crossing-numbers</guid>
<description>&lt;p&gt;@user161819 I wanted to make a comment but it got too long, so putting it as an answer. But please take it just as a comment for later, once everything is finished:&lt;/p&gt;
&lt;blockquote readability=&quot;9&quot;&gt;
&lt;p&gt;If I understand your comment to my answer correctly, you are aiming to change your algorithm for the torus so it works with &lt;span class=&quot;math-container&quot;&gt;${\rm cr}(G)$&lt;/span&gt;. I think the whole MO community is keeping their fingers crossed, wishing you that you can successfully complete everything in time!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Looking at the far horizon, I wanted to make a suggestion to you. Once you have changed your torus algorithm and completed your thesis, you will have effectively two algorithms in your hands for the torus: The old one based on &lt;span class=&quot;math-container&quot;&gt;${\rm pcr}(G)$&lt;/span&gt; and the new one based on &lt;span class=&quot;math-container&quot;&gt;${\rm cr}(G)$&lt;/span&gt;. I am saying the obvious here, &lt;strong&gt;keep both of them&lt;/strong&gt;, they can really be fruitful for future research.&lt;/p&gt;
&lt;p&gt;(1) Obviously, your two algorithms could support research on the big open question whether &lt;span class=&quot;math-container&quot;&gt;${\rm pcr}(G)\stackrel{\rm ?}{=}{\rm cr}(G)$&lt;/span&gt; or not. They could produce experimental evidence, ideas, and insights for a future proof of equality, or an actual counterexample. (Again, I am saying the obvious here.)&lt;/p&gt;
&lt;p&gt;(2) To really pressure-test &lt;span class=&quot;math-container&quot;&gt;${\rm pcr}(G)\stackrel{\rm ?}{=}{\rm cr}(G)$&lt;/span&gt; on the torus, it would be interesting to also try the best known to date lower bound for &lt;span class=&quot;math-container&quot;&gt;${\rm cr}(G)$&lt;/span&gt; &lt;span class=&quot;math-container&quot;&gt;$$\frac{1}{29}\frac{e^3}{n^2}$$&lt;/span&gt; for graphs with &lt;span class=&quot;math-container&quot;&gt;$e&amp;gt;7n$&lt;/span&gt;. This lower bound is from Eyal Ackerman (2019): &quot;On topological graphs with at most four crossings per edge&quot;, Computational Geometry, 85: 101574, 31, doi:10.1016/j.comgeo.2019.101574 (probably you are aware of it from the Wikipedia article that you quoted).&lt;/p&gt;
&lt;p&gt;I think your question and this whole topic are really important. L√°szl√≥ Sz√©kely calls it one of the &quot;foundational problems&quot; and devotes a whole section to it in his article &lt;a href=&quot;https://doi.org/10.1007/978-3-319-31940-7_13&quot; rel=&quot;noreferrer&quot;&gt;Tur√°n‚Äôs Brick Factory Problem: The Status of the Conjectures of Zarankiewicz and Hill&lt;/a&gt;. In: R. Gera et al. (eds.)(2016): Graph Theory‚Äîfavorite conjectures and open problems. 1.)&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;&lt;em&gt;For now, fingers crossed that you can complete your thesis in time!&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
<pubDate>Tue, 04 Aug 2020 12:55:11 +0000</pubDate>
<dc:creator>DarkContinent</dc:creator>
<og:type>website</og:type>
<og:url>https://mathoverflow.net/questions/366765/issue-update-in-graph-theory-different-definitions-of-edge-crossing-numbers</og:url>
<og:image>https://cdn.sstatic.net/Sites/mathoverflow/Img/apple-touch-icon@2.png?v=f1c9606b77ff</og:image>
<og:title>Issue UPDATE: in graph theory, different definitions of edge crossing numbers - impact on applications?</og:title>
<og:description>QUICK FINAL UPDATE: Just wanted to thank you MO users for all your support. Special thanks for the fast answers, I've accepted first one, appreciated the clarity it gave me. I've updated my torus</og:description>
<dc:format>text/html</dc:format>
<dc:identifier>https://mathoverflow.net/questions/366765/issue-update-in-graph-theory-different-definitions-of-edge-crossing-numbers</dc:identifier>
</item>
</channel>
</rss>