<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=hnrss.org%2Fnewest%3Fpoints%3D200&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://hnrss.org/newest?points=200" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>Hacker News: Newest</title>
<link>https://news.ycombinator.com/newest</link>
<description>Hacker News RSS</description>
<item>
<title>I work in an Amazon warehouse in West Sacramento</title>
<link>https://quillette.com/2019/07/19/the-problem-with-tourist-journalism/</link>
<guid isPermaLink="true" >https://quillette.com/2019/07/19/the-problem-with-tourist-journalism/</guid>
<description>&lt;p&gt;A few days before the Fourth of July, British comic John Oliver used the pulpit of his US infotainment show, &lt;em&gt;Last Week Tonight&lt;/em&gt;, to deliver a lengthy monologue about the depredations of Amazon.com. His specific complaint was that Amazon doesn’t treat its employees very well. According to Oliver, among the indignities that the company has heaped upon its workforce are two separate instances in which a canister of bear repellant leaked in an Amazon warehouse. Oliver and his journalistic team also found former Amazon employees willing to complain on camera about working conditions in the company’s warehouses and fulfillment centers: they can get very hot in the summer and very cold in the winter; getting to the bathrooms sometimes requires a long walk; pregnant women get no special bathroom accommodations.&lt;/p&gt;
&lt;p&gt;Oliver’s researchers even uncovered an incident in which a worker had died on the job and her co-workers were told to carry on working in the presence of her corpse. Amazon disputes much of this, but I have no difficulty believing that incidents like these do occasionally occur. Amazon employs approximately 650,000 people worldwide. That number is higher than the populations of 50 of the world’s 233 countries. It’s entirely possible that at some point a citizen of Luxembourg (population 602,000) has been sprayed by bear repellant, or that workers somewhere in Iceland (360,000) have been required to work around a fallen co-worker. But neither of these things, if they happened, would be proof that working conditions in Luxembourg or Iceland are appalling.&lt;/p&gt;
&lt;p&gt;As it happens, I work in an Amazon warehouse in West Sacramento, California. When I showed up at a friend’s annual Fourth of July barbecue, I found myself besieged by well-meaning, right-thinking, Trump-hating friends, all of whom were eager to tell me just what a monstrous company I work for. This was weird because most of them know that Amazon has been a lifesaver for me financially, and they have heard me say how much I enjoy the work and appreciate the money. But they are now convinced that I work in something like a sweatshop. Bemused by this outburst of hostility towards my employer, I was led inside by our host who sat me down in front of his family’s 60-inch plasma TV screen to watch Oliver’s tirade, which he had courteously DVR’d for my benefit.&lt;/p&gt;
&lt;p&gt;I have to say I found Oliver’s takedown unpersuasive. It is possible that Oliver was aware his material was a little thin, which is why he padded the segment with scattershot complaints about Walmart and Verizon (the enemy did not seem to be Amazon in particular, but large corporations in general). Warehouse work, Oliver solemnly informed his audience, is strenuous, difficult, and doesn’t pay very well. To most Americans (and people in general, for that matter), this will not have been news. Warehouses serve as temporary holding centers for consumer goods. These goods have to be offloaded from vast pantechnicons and brought into the warehouse. Later they will be loaded onto smaller vehicles, usually delivery vans, and sent out again.&lt;/p&gt;
&lt;p&gt;The people who do this loading and unloading spend their days lifting toasters, boxes of kitty litter, minifridges, and thousands of other items, and carrying them to their designated storage rack. It’s a physically demanding job. Warehouses, such as the one I work in, have huge cargo bays that are almost always open to receive the back ends of incoming tractor trailer rigs. When these bays are open it is virtually impossible to control the temperature inside the warehouse artificially. If it is hot outside, the warehouse is likely to be very warm. If it is cold outside, the warehouse is likely to be very cool. Just about every working person in the world is aware of these facts, but John Oliver treated it like a scandalous revelation.&lt;/p&gt;
&lt;p&gt;The Amazon facilities Oliver criticized are large fulfillment centers. There is one of these located near the Sacramento airport. I don’t work there. I work in a facility known as a “sortation center” (a name that Oliver would no doubt mock, not without some justification). It is smaller than a fulfillment center but it is still a large warehouse and the people who work in it are required to do a lot of lifting and walking, like warehouse workers everywhere. We are also advised to dress warmly in the winter and to wear light clothing in the summer.&lt;/p&gt;
&lt;p&gt;Just about every job in my sortation center could probably be done by a robot. In fact, it amazes me that Amazon hasn’t simply automated the entire facility. After all, robots don’t call in sick, don’t steal from their employers, don’t sue for workman’s compensation, and they never complain about long hours or the heat or the cold. But nor do robots buy consumer goods. If I had to guess, I’d say that Amazon continues to employ lots of human beings because, by putting money into the pockets of working-class people, the company creates more customers. Robots may not buy basketball shoes or hibachi grills, but people sure do.&lt;/p&gt;
&lt;p&gt;Apart from employing a lot of staff, Amazon does a number of things progressives ought to like. For instance, it employs a very diverse group of people. On my shift, I work with African-Americans, Asian-Americans, Hispanic-Americans, white people, gay people, deaf people, ex-convicts, and people whose ethnicities and even genders are a mystery to me. I was hired the same day as a young Vietnamese-American named Lenny and a young Mexican-American named Ramon. They are both in their twenties. I am in my sixties. But because we started on the same day and went through training together, we bonded and became work friends.&lt;/p&gt;
&lt;p&gt;Although Ramon is an American citizen, his wife, Angela, is not, despite the fact that she has lived in America since she was three months old. He’s angry that President Trump has backed off from the DACA program President Obama put in place to help people like Angela find a path to citizenship. Listening to Ramon discuss his first-hand dealings with immigration authorities has brought the issue alive for me in ways that reading news reports cannot. Ramon’s mother Rita, a woman in her forties who speaks little English, also works with us at the warehouse. I speak no Spanish, but Rita and I are friends. We often work side-by-side.&lt;/p&gt;
&lt;p&gt;According to some authorities, Sacramento is the second most racially diverse city in America after Oakland, California. I have seen this statistic cited many times in local publications and it always used to surprise me. Most Sacramentans tend to self-segregate. Even when blacks and whites and browns live in the same neighborhood, or even the same block, they tend to hang out with their own ethnic group. I’ve noticed this in my own life. Almost all of my closest friends are white like me. But Amazon doesn’t allow its employees to self-segregate. The company wants every employee trained on every job in the warehouse. It also wants every employee to be able to interact with a wide variety of other workers.&lt;/p&gt;
&lt;p&gt;Every morning, before our shift begins, my fellow Amazonians and I gather at the front of the warehouse where all of our photos and names have been printed on rectangles that resemble refrigerator magnets. These magnetic photos are stuck to a large white board with a diagram that represents every station in the warehouse. One-by-one each person’s magnet is assigned a place on the map. Every day brings a new arrangement. One day I may be pulling packages off the conveyor belt between a young Hispanic woman and an older black male. The next day I may be helping to stow packages in an aisle alongside two Vietnamese women.&lt;/p&gt;
&lt;p&gt;This is a good thing. Working and cooperating every day as part of a diverse workforce can help clear up misperceptions. On my second or third day on the job I was paired with a young African-American woman who had been with Amazon a few weeks longer than I had. While talking to Celine, I learned that she Ubered to and from work every day because she didn’t own a car. The cost of the short ride was about $7.50 each way. In other words, she lost an hour’s pay every day just covering her commuting costs. When I discovered that she lived in a low-income housing project less than a mile from my house, I offered to drive her to and from work every day. She accepted.&lt;/p&gt;
&lt;p&gt;At first, I was a bit apprehensive about this, perhaps because I’ve seen too many episodes of &lt;em&gt;The Wire&lt;/em&gt;. But through my connection to Celine, I learned that the project is in fact just another quiet and orderly place filled with ordinary members of the working poor. Most of the occupants have jobs, and children, and they pay taxes like everyone else. Celine is a single mother with two jobs. In addition to her Amazon gig, she also works at a container store in a shopping mall located ten miles from her house. She takes a bus to that job. In fact, most of the people I work with have other jobs. Ramon works at a jewelry store. A girl named Imani has two other part-time jobs. I work evenings at a local independent bookstore. But almost all of these second and third jobs pay less than Amazon’s minimum wage of $15 an hour.&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;alignleft wp-image-93060 size-medium jetpack-lazy-image&quot; src=&quot;https://i0.wp.com/d24fkeqntp1r7r.cloudfront.net/wp-content/uploads/2019/07/19034040/619K1XfTcUL._SX327_BO1204203200_-198x300.jpg?resize=198%2C300&amp;amp;is-pending-load=1#038;ssl=1&quot; alt=&quot;&quot; width=&quot;198&quot; height=&quot;300&quot; data-recalc-dims=&quot;1&quot; data-lazy-srcset=&quot;https://d24fkeqntp1r7r.cloudfront.net/wp-content/uploads/2019/07/19034040/619K1XfTcUL._SX327_BO1204203200_.jpg 198w, https://d24fkeqntp1r7r.cloudfront.net/wp-content/uploads/2019/07/19034040/619K1XfTcUL._SX327_BO1204203200_.jpg 329w&quot; data-lazy-sizes=&quot;(max-width: 198px) 100vw, 198px&quot; srcset=&quot;data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7&quot;/&gt;&lt;/p&gt;&lt;noscript&gt;
&lt;p&gt;&lt;img class=&quot;alignleft wp-image-93060 size-medium&quot; src=&quot;https://i0.wp.com/d24fkeqntp1r7r.cloudfront.net/wp-content/uploads/2019/07/19034040/619K1XfTcUL._SX327_BO1204203200_-198x300.jpg?resize=198%2C300&amp;amp;ssl=1&quot; alt=&quot;&quot; width=&quot;198&quot; height=&quot;300&quot; srcset=&quot;https://d24fkeqntp1r7r.cloudfront.net/wp-content/uploads/2019/07/19034040/619K1XfTcUL._SX327_BO1204203200_.jpg 198w, https://d24fkeqntp1r7r.cloudfront.net/wp-content/uploads/2019/07/19034040/619K1XfTcUL._SX327_BO1204203200_.jpg 329w&quot; sizes=&quot;(max-width: 198px) 100vw, 198px&quot; data-recalc-dims=&quot;1&quot;/&gt;&lt;/p&gt;
&lt;/noscript&gt;John Oliver is not the only British journalist to portray Amazon as the modern-day equivalent of an antebellum cotton plantation. In 2013, Carole Cadwalladr, a reporter for the &lt;em&gt;Guardian&lt;/em&gt;, &lt;a href=&quot;https://www.theguardian.com/technology/2013/dec/01/week-amazon-insider-feature-treatment-employees-work&quot;&gt;went undercover for a week&lt;/a&gt; at an Amazon fulfillment center in Swansea. Unbeknownst to her, while she was working there, Adam Littler, a reporter for the BBC’s investigative programme &lt;em&gt;Panorama&lt;/em&gt;, was secretly filming his own exposé in the same warehouse. Then, in 2016, a British journalist named James Bloodworth went undercover in an Amazon fulfillment center in the small Staffordshire town of Rugeley. Bloodworth’s employment was part of the research for his book, &lt;a href=&quot;https://www.goodreads.com/en/book/show/37780792-hired&quot;&gt;&lt;em&gt;Hired: Six Months Undercover in Low Wage Britain&lt;/em&gt;&lt;/a&gt;, an extract of which was &lt;a href=&quot;https://www.thetimes.co.uk/article/constantly-monitored-searched-and-exhausted-my-month-undercover-in-an-amazon-warehouse-xvgmlh39r&quot;&gt;subsequently reprinted&lt;/a&gt; in the London &lt;em&gt;Times&lt;/em&gt; in February 2018 and subtitled “My Month Undercover in an Amazon Warehouse.” In September 2018, he &lt;a href=&quot;https://www.theguardian.com/commentisfree/2018/sep/17/amazon-warehouse-bernie-sanders&quot;&gt;wrote about the experience again&lt;/a&gt; for the &lt;em&gt;Guardian &lt;/em&gt;(although here he says his stint only lasted three weeks). “This was a workplace environment,” Bloodworth warned the &lt;em&gt;Guardian&lt;/em&gt;‘s readers, “in which decency, respect, and dignity were absent.”
&lt;p&gt;And what did these intrepid reporters uncover? A whole lot of nothing, if you ask me. Both Bloodworth and Cadwalladr report that fulfillment center workers are required to do a lot of walking. Cadwalladr notes that all this walking caused one of her co-workers, a 60-something man she refers to as “Les,” to lose two stone (28 pounds) in two months. Bloodworth, on the other hand, claims he &lt;em&gt;gained&lt;/em&gt; a stone (14 pounds) during his stint, despite walking up to 14 miles during a single shift according to a pedometer on his wrist (give me an hour or two in a rocking chair and I can put five miles on a pedometer; they are notoriously unreliable devices).&lt;/p&gt;
&lt;p&gt;Cadwalladr reports that Amazon employees who call in sick three times in their first three months will be terminated. Bloodworth, who was employed three years after Cadwalladr, reports that six absences due to sickness will cost you your Amazon job in Rugeley. Things do seem to have been improving, then. Each offense is recorded as a “point” on an employee’s record. When I began working for them on March 23 this year, we were told that 13 points would prevent us from transitioning from seasonal employees to permanent ones. Even that figure is misleading. A lot of offenses (such as punching out in the middle of a shift without management approval) will cost an employee only half a point. Amazon recently sent me and my fellow seasonal employees an email informing us that, so long as we’ve been employed with the company for at least 30 days and accumulated no more than 12.5 points, we would be eligible for permanent positions. Theoretically, that means that an Amazon employee who joined the company 30 days ago and left work early without permission 25 times during that period, is nonetheless still eligible for a permanent position.&lt;/p&gt;
&lt;p&gt;Some of what Cadwalladr and Bloodworth report seems rather histrionic. For instance, Bloodworth says that he had little time to eat a proper meal and quit buying bread and milk because these products always went stale/sour before he had a chance to use them. A fresh carton of milk is usually good for at least 10 days from the date of purchase. How many cartons of milk went stale during a three-week Amazon stint? And why not refrigerate or freeze your loaf to extend its life? His claim that he gained 14 pounds from junk food over a three week period during which he was walking an average of 10 miles a day doesn’t sound right, either. (It reminded me of “stunt journalist” Morgan Spurlock’s much-derided claim that eating every meal at McDonald’s for 30 days nearly wrecked his physical and emotional health.) Bloodworth even claims the Amazon job made him take up smoking again.&lt;/p&gt;
&lt;p&gt;I don’t see why Amazon should be held responsible for its employees’ diets or personal habits, and a lot of this looks to me like buck-passing of personal responsibility. The fact that James Bloodworth was unfortunate enough to work with a racist Romanian woman doesn’t seem to me to be the fault of the company, either. With roughly 650,000 employees worldwide, it would be surprising if Amazon didn’t employ a cross-section of bigots and kooks.&lt;/p&gt;
&lt;p&gt;Cadwalladr and Bloodworth make fun of the term “associate” which Amazon applies to its workers, and which both Cadwalladr and Bloodworth describe as “Orwellian.” While I prefer the term “worker,” I have a hard time working up much outrage over this. It certainly doesn’t strike me as particularly sinister or dystopian or totalitarian. Among the words the Merriam-Webster dictionary &lt;a href=&quot;https://www.merriam-webster.com/dictionary/associate&quot;&gt;uses to define “associate”&lt;/a&gt; are: “worker,” “employee,” “business partner,” “colleague,” and “entry-level member of an organization.” All of those sound like reasonable terms to apply to a newly hired Amazon worker.&lt;/p&gt;
&lt;p&gt;Bloodworth’s description of punishments dished out to Amazonians who break company policy as “draconian” is overwrought and his grievances are sometimes just unreasonable. He worked for Amazon for a total of three weeks but complains that his boss became upset when he took a sick day off. Maybe this is a generational thing, but my father always told me, “Never take a sick day during your first year of employment with any company, no matter what.” My wife and I have literally gone years between sick days. In the ’80s, I worked for a title insurance company that gave out a $500 bonus at the end of the year to any employee who hadn’t taken a sick day, and I earned that bonus five or six years in a row. If Bloodworth believes Amazon is inhumane for looking askance at a worker who asks for a sick day during his first three weeks on the job, then he and I live by different work ethics.&lt;/p&gt;
&lt;p&gt;As for safety concerns, well, warehouses are hazardous environments and, somewhere today, an Amazon employee is likely to be injured. But I can attest to the fact that Amazon takes employee safety extremely seriously. Employees are briefed on safety before every single shift. We are required to wear high-visibility vests and protective gloves at all times. Traffic managers ensure that the vehicles continuously coming and going do not endanger employees. The conveyor belts are all equipped with emergency shut-off cords, which any employee can pull at any time should the need arise. Any Amazon employee who violates a safety regulation is likely to find himself without a job in a hurry. We have a fully stocked first-aid center. Our managers are obsessed with keeping us properly hydrated. Free bottled waters and electrolyte-enriched popsicles are located in ice chests all over the facility.&lt;/p&gt;
&lt;p&gt;Bloodworth says he worked 10-and-a-half-hour days at Amazon, which sounds pretty brutal. Maybe they do things differently in the UK, but my Amazon sortation center is very flexible about the hours it offers. When I was applying for the job online, Amazon allowed me to create a schedule tailored to my needs. They asked me how many hours a week I’d like to work, and which days of the week suited me best. They asked if I preferred to work evenings, overnight, early mornings, days. After compiling this info, they gave me a shift that fits me like a glove. I work four and a half hours a day, five days a week. My shift begins at 6:30 am and ends at 11 am. But, when I need a bit more money, I can go to work at 5 am and pick up an extra 90 minutes of work pretty much whenever I want. Many of my co-workers add hours to their days whenever they are in need of a little extra cash, and we can take voluntary unpaid time off just about whenever we like.&lt;/p&gt;
&lt;p&gt;James Bloodworth worked 35 hours a week. In America, at least, a full-time job consumes at least 40 hours a week. A 35-hour working week doesn’t sound especially harsh to me. And if he was working three 10-and-a-half-hour shifts per week at Amazon, then he worked just nine shifts during his time there (eight, if you subtract the sick day he took). I’ve worked about 70 shifts since I started at Amazon, and I still wouldn’t presume to offer myself as an expert on the conditions of the entire workforce. But I have seen enough to know that the picture painted by tourist journalists is highly misleading and unhelpful.&lt;/p&gt;
&lt;p&gt;Amazon is not a perfect employer. I have a litany of gripes I’d be happy to share with you sometime. But I also have complaints about the small bookstore I work at in the evenings. I don’t know of anyone who doesn’t have complaints about their employer. Progressives tend to clamor about exposés&lt;em&gt; &lt;/em&gt;that portray large multinational corporations like Walmart, Amazon, and McDonald’s as nothing more than cold-hearted exploiters of the working class. This type of thing does no one any good. If Amazon is going to be castigated publicly every time one of its 650,000 employees has a bad day, it may well decide to automate as many positions as possible and do away with most of its human workforce.&lt;/p&gt;
&lt;p&gt;The problem with exposés like those mentioned here is that they don’t tell us how Amazon warehouses stack up against, say, warehouses operated by Home Depot (a former employer of mine), Starbucks, the &lt;em&gt;New York Times&lt;/em&gt;, the Ford Motor Company, Microsoft, Barnes and Noble, or even Warner Media (the parent company of John Oliver’s television home HBO). We don’t know how many employee complaints a company with 650,000 workers can expect in a typical day or month or year. On July 1, the same day that &lt;em&gt;Slate&lt;/em&gt; ran a largely uncritical story about Oliver’s anti-Amazon tirade, it &lt;a href=&quot;https://slate.com/technology/2019/07/dominican-republic-tourism-deaths-not-unusual-overblown.html&quot;&gt;published a highly critical story&lt;/a&gt; by Daniel Engber about the way (primarily right-wing) media outlets had reported on an alleged spike in American tourist deaths in the Dominican Republic.&lt;/p&gt;
&lt;p&gt;When Engber actually took a look at the statistics for himself, he found that, not only is the Dominican Republic probably not experiencing a spike in American tourist deaths this year, it may actually be experiencing &lt;em&gt;fewer&lt;/em&gt; tourist deaths in 2019 than in an average year. He recapped some of the more hysterical reports and then noted:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;What a morbid waste of everybody’s time. Whether we’re talking about 12 deaths, or 25, or even 50, it’s wrong to treat the mere proliferation of these tragedies as proof that US tourists are in danger. If we want to know for sure that something is amiss—or even to make an educated guess about the same—we’ll need to have a baseline death rate for comparison. How often do Americans usually die while drinking whiskey in their rooms in Punta Cana? Or, to be less specific: How many US tourists die during a normal year of visits to the Dominican Republic?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Engber combed through governmental research as well as academic research. He asked questions, crunched numbers, and displayed an admirable skepticism for the dominant media narrative. In other words, he practiced responsible journalism.&lt;/p&gt;
&lt;p&gt;Six years ago, I learned first-hand just how obstinate people can be when confronted with facts inconvenient to their preferred political narratives. I had just become one of the first beneficiaries of Obamacare by signing up for health coverage through Covered California. At family gatherings, my wife’s conservative family would say things like, “Not a single person has been able to sign up for health care through the state exchanges.” And: “The cost is so high that nobody who needs Obamacare can possibly afford it.” And: “Just wait until you try to access your coverage. You’ll have to pay hundreds of dollars just to see a nurse.” None of this was true, of course, but they refused to accept it. I started carrying around a copy of my monthly Covered California bill so I could prove to these people that Obamacare was working for at least some people. “That’s Covered California,” they’d say dismissively. “Nowhere on that bill does it say anything about Obamacare.” Try as I might, I couldn’t make them believe that Covered California &lt;em&gt;was&lt;/em&gt;&lt;em&gt; &lt;/em&gt;Obamacare and that it only cost me a dollar a month.&lt;/p&gt;
&lt;p&gt;I faced the same stubborn refusal to acknowledge complicating information after John Oliver’s Amazon report, only this time it was my progressive acquaintances who were resistant. I assured everyone at the Fourth of July barbecue that the sortation center where I work is not a miserable sweatshop, that I am treated well, and that I am relatively well remunerated for work I enjoy. But they would not listen. They just looked at me sadly and shook their heads as if to say, “He’s drunk the corporate Kool-Aid.”&lt;/p&gt;
&lt;p&gt;I don’t object to journalists writing about the trials and tribulations of Amazon employees. I only wish they would do so fairly. Just because a journalist has found an Amazon employee somewhere who got sprayed with bear repellant, that doesn’t mean Amazon employees spend their days in mortal fear of a chemical attack. In order for consumers to make informed purchasing choices, we need fair-minded and accurate reporting about the companies we patronize, not scaremongering polemics preaching a black-and-white gospel of tyranny and exploitation. Not all work done for a global commercial juggernaut like Amazon (or Walmart, or McDonald’s, or Starbucks) is, by definition, harsh, cruel, and damn near inhumane, fit only to be described ominously as “Orwellian” and “draconian.”&lt;/p&gt;
&lt;p&gt;To university-educated media professionals like Carole Cadwalladr, James Bloodworth, and John Oliver, an Amazon warehouse must seem like the Black Hole of Calcutta. But I’ve done low-paying manual labor for most of my working life, and rarely have I appreciated a job as much as my role as an Amazon associate. Oliver insists that Amazon should be spared no criticism just because it raised its minimum wage to $15 an hour. That may not sound like much to him, but it’s huge for people like me. Among US states, California (along with Washington and Massachusetts) has the highest minimum wage at $11 an hour (for companies with more than 25 employees, it’s $12). The $15 an hour I earn from Amazon is nearly 40 percent higher than the $11 an hour I earn from the bookstore. In fact, thanks to Jeff Bezos’s generosity, I may soon be able to give up my second job altogether.&lt;/p&gt;
&lt;p&gt;I am writing this on July 15—Amazon Prime Day, one of the busiest days of the year on the Amazon calendar. I put in a six-hour shift this morning at the West Sacramento warehouse. The workday wasn’t brutal. The company treated us all to a pancake breakfast in the break room during our 10-minute break. Of course, you can’t eat a pancake breakfast healthily in 10 minutes, but no one in charge complained about the fact that most of us spent at least 20 minutes eating. Yes, we were all encouraged to chant Prime Day slogans during our morning stretch. And we were all given little “Amazon Prime 2019” lapel pins and other bits of “flair” to wear on our high-visibility safety vests. So what? A bit of company spirit is downright American. I don’t mind being a small cog in the machinery of American commerce. It keeps the bills paid and my stomach from growling. But if John Oliver and his ilk keep harping away at how inhumanely Amazon treats its workers, Bezos might decide to completely automate his operation and people like me will be out of a job. And that will not only ruin my Fourth of July, it will ruin every other day of the year as well.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Kevin Mims is a freelance writer living in Sacramento, CA. His work has appeared in numerous venues including the &lt;em&gt;New York Times&lt;/em&gt;, National Public Radio’s &lt;em&gt;Morning Edition&lt;/em&gt;, &lt;em&gt;Salon&lt;/em&gt;, and many others. You can follow him on Twitter &lt;a class=&quot;ProfileHeaderCard-screennameLink u-linkComplex js-nav&quot; href=&quot;https://twitter.com/KevinMims16&quot;&gt;&lt;span class=&quot;username u-dir&quot; dir=&quot;ltr&quot;&gt;@&lt;strong class=&quot;u-linkComplex-target&quot;&gt;KevinMims16&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Photo by &lt;a href=&quot;https://unsplash.com/@bryanangelo?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText&quot;&gt;Bryan Angelo&lt;/a&gt; on &lt;a href=&quot;https://unsplash.com/search/photos/amazon?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText&quot;&gt;Unsplash&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Quillette &lt;em&gt;makes a small part of its revenue from Amazon sponsorship. Names (apart from the author’s) have all been changed.&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;sharedaddy sd-sharing-enabled&quot;&gt;
&lt;div class=&quot;robots-nocontent sd-block sd-social sd-social-official sd-sharing&quot;&gt;
&lt;h3 class=&quot;sd-title&quot;&gt;Share this:&lt;/h3&gt;

&lt;/div&gt;
&lt;/div&gt;

</description>
<pubDate>Sat, 20 Jul 2019 15:32:40 +0000</pubDate>
<dc:creator>juokaz</dc:creator>
<og:type>article</og:type>
<og:title>Tourist Journalism Versus the Working Class - Quillette</og:title>
<og:description>A few days before the Fourth of July, British comic John Oliver used the pulpit of his US infotainment show, Last Week Tonight, to deliver a lengthy monologue about the depredations of Amazon.com. His specific complaint was that Amazon doesn’t treat its employees very well. According to Oliver, among the indignities that the company has heaped upon its workforce are two separate instances in which a canister of bear repellant leaked in an Amazon warehouse. Oliver and his journalistic team also found former Amazon employees willing to complain on camera about working conditions in the company’s warehouses and fulfillment centers: they can get very hot in the summer and very cold in the winter; getting to the bathrooms sometimes requires a long walk; pregnant women get no special bathroom accommodations. Oliver’s researchers even uncovered an incident in which a worker had died on the job and her co-workers were told to carry on working in the presence of her corpse. Amazon disputes much of this, but I have no difficulty believing that incidents like these do …</og:description>
<og:url>https://quillette.com/2019/07/19/the-problem-with-tourist-journalism/</og:url>
<og:image>https://i0.wp.com/d24fkeqntp1r7r.cloudfront.net/wp-content/uploads/2019/07/17225232/bryan-angelo-FtiXADBTqGY-unsplash.jpg?fit=1200%2C800&amp;ssl=1</og:image>
<dc:language>en-AU</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://quillette.com/2019/07/19/the-problem-with-tourist-journalism/</dc:identifier>
</item>
<item>
<title>Let&amp;#039;s talk about peeing in space</title>
<link>https://twitter.com/MaryRobinette/status/1152277166996017152</link>
<guid isPermaLink="true" >https://twitter.com/MaryRobinette/status/1152277166996017152</guid>
<description>[unable to retrieve full-text content]
&lt;p&gt;Article URL: &lt;a href=&quot;https://twitter.com/MaryRobinette/status/1152277166996017152&quot;&gt;https://twitter.com/MaryRobinette/status/1152277166996017152&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Comments URL: &lt;a href=&quot;https://news.ycombinator.com/item?id=20485807&quot;&gt;https://news.ycombinator.com/item?id=20485807&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Points: 252&lt;/p&gt;
&lt;p&gt;# Comments: 51&lt;/p&gt;
</description>
<pubDate>Sat, 20 Jul 2019 14:04:11 +0000</pubDate>
<dc:creator>etxm</dc:creator>
<dc:format>text/html</dc:format>
<dc:identifier>https://mobile.twitter.com/MaryRobinette/status/1152277166996017152</dc:identifier>
</item>
<item>
<title>Hackers breach FSB contractor, expose Tor deanonymization project</title>
<link>https://www.zdnet.com/article/hackers-breach-fsb-contractor-expose-tor-deanonymization-project/</link>
<guid isPermaLink="true" >https://www.zdnet.com/article/hackers-breach-fsb-contractor-expose-tor-deanonymization-project/</guid>
<description>&lt;span class=&quot;img aspect-set&quot;&gt;&lt;img src=&quot;https://zdnet4.cbsistatic.com/hub/i/2019/07/20/54d4cbf8-6da0-465a-8222-17e3af8fe7f5/00b7de4cfd105136da8d514b9bdf2895/sytech-defaced.jpg&quot; class=&quot;&quot; alt=&quot;SyTech defaced&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;credit&quot;&gt;Image: 0v1ru$&lt;/span&gt;


&lt;p&gt;Hackers have breached SyTech, a contractor for FSB, Russia's national intelligence service, from where they stole information about internal projects the company was working on behalf of the agency -- including one for deanonymizing Tor traffic.&lt;/p&gt;
&lt;p&gt;The breach took place last weekend, on July 13, when a group of hackers going by the name of 0v1ru$ hacked into SyTech's Active Directory server from where they gained access to the company's entire IT network, including a JIRA instance.&lt;/p&gt;
&lt;p&gt;Hackers stole 7.5TB of data from the contractor's network, and they defaced the company's website with a &quot;yoba face,&quot; an emoji popular with Russian users that stands for &quot;trolling.&quot;&lt;/p&gt;
&lt;p&gt;Hackers posted screenshots of the company's servers on Twitter and later shared the stolen data with Digital Revolution, another hacking group &lt;a href=&quot;https://www.bbc.com/russian/features-46621322&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;who last year breached Quantum, another FSB contractor&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This second hacker group shared the stolen files in greater detail on their Twitter account, on Thursday, July 18, and with Russian journalists afterward.&lt;/p&gt;
&lt;span class=&quot;img aspect-set&quot;&gt;&lt;img src=&quot;https://www.zdnet.com/article/hackers-breach-fsb-contractor-expose-tor-deanonymization-project/&quot; class=&quot;lazy&quot; alt=&quot;SyTech Digital Revolution&quot; height=&quot;auto&quot; width=&quot;370&quot; data-original=&quot; https://zdnet1.cbsistatic.com/hub/i/r/2019/07/20/30ca173a-070c-4500-99c1-9fe14febf928/resize/370xauto/70f966203993f9d32d280301aeced1e8/sytech-dr.png&quot;/&gt;&lt;/span&gt;&lt;noscript&gt;
&lt;p&gt;&lt;span class=&quot;img aspect-set&quot;&gt;&lt;img src=&quot;https://zdnet1.cbsistatic.com/hub/i/r/2019/07/20/30ca173a-070c-4500-99c1-9fe14febf928/resize/370xauto/70f966203993f9d32d280301aeced1e8/sytech-dr.png&quot; class=&quot;&quot; alt=&quot;SyTech Digital Revolution&quot; height=&quot;auto&quot; width=&quot;370&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/noscript&gt;
&lt;h3&gt;FSB's secret projects&lt;/h3&gt;

&lt;p&gt;Per the different reports in Russian media, the files indicate that SyTech had worked since 2009 on a multitude of projects since 2009 for FSB unit 71330 and for fellow contractor Quantum. Projects include:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;Nautilus&lt;/strong&gt; - a project for collecting data about social media users (such as Facebook, MySpace, and LinkedIn).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Nautilus-S&lt;/strong&gt; - a project for deanonymizing Tor traffic with the help of rogue Tor servers.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Reward&lt;/strong&gt; - a project to covertly penetrate P2P networks, like the one used for torrents.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Mentor&lt;/strong&gt; - a project to monitor and search email communications on the servers of Russian companies.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Hope&lt;/strong&gt; - a project to investigate the topology of the Russian internet and how it connects to other countries' network.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Tax-3&lt;/strong&gt; - a project for the creation of a closed intranet to store the information of highly-sensitive state figures, judges, and local administration officials, separate from the rest of the state's IT networks.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;BBC Russia, who received the full trove of documents, claims there were other older projects for researching other network protocols such as Jabber (instant messaging), ED2K (eDonkey), and OpenFT (enterprise file transfer).&lt;/p&gt;
&lt;section class=&quot;sharethrough-top&quot; data-component=&quot;medusaContentRecommendation&quot; data-medusa-content-recommendation-options=&quot;{&amp;quot;promo&amp;quot;:&amp;quot;promo_ZD_recommendation_sharethrough_top_in_article_desktop&amp;quot;,&amp;quot;spot&amp;quot;:&amp;quot;dfp-in-article&amp;quot;}&quot;&gt;
&lt;/section&gt;&lt;p&gt;Other files posted on the Digital Revolution Twitter account claimed that the FSB was also tracking students and pensioners.&lt;/p&gt;
&lt;h3&gt;Some projects came to be, were tested&lt;/h3&gt;
&lt;p&gt;But while most of the projects look to be just research into modern technology -- which all intelligence services carry out -- there are two that appear to have been tested in the real world.&lt;/p&gt;
&lt;p&gt;The first was Nautilus-S, the one for deanonymizing Tor traffic. &lt;a href=&quot;https://www.bbc.com/russian/features-49050982&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;BBC Russia pointed out&lt;/a&gt; that work on Nautilus-S started in 2012. Two years later, in 2014, academics from Karlstad University in Sweden, &lt;a href=&quot;https://www.cs.kau.se/philwint/spoiled_onions/techreport.pdf&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;published a paper&lt;/a&gt; detailing the use of hostile Tor exit nodes that were attempting to decrypt Tor traffic.&lt;/p&gt;
&lt;p&gt;Researchers identified 25 malicious servers, 18 of which were located in Russia, and running Tor version 0.2.2.37, the same one detailed in the leaked files.&lt;/p&gt;
&lt;p&gt;The second project is Hope, the one which analyzed the structure and make-up of the Russian segment of the internet.&lt;/p&gt;
&lt;p&gt;Earlier this year, &lt;a href=&quot;https://www.zdnet.com/article/russia-to-disconnect-from-the-internet-as-part-of-a-planned-test/&quot; target=&quot;_blank&quot;&gt;Russia ran tests&lt;/a&gt; during which it disconnected its national segment from the rest of the internet.&lt;/p&gt;
&lt;p&gt;SyTech, the hacked company, has taken down its website since the hack and refused media inquiries.&lt;/p&gt;

&lt;h3&gt;More data breach coverage:&lt;/h3&gt;
</description>
<pubDate>Sat, 20 Jul 2019 13:07:09 +0000</pubDate>
<dc:creator>ga-vu</dc:creator>
<og:type>article</og:type>
<og:url>https://www.zdnet.com/article/hackers-breach-fsb-contractor-expose-tor-deanonymization-project/</og:url>
<og:title>Hackers breach FSB contractor, expose Tor deanonymization project and more | ZDNet</og:title>
<og:description>SyTech, the hacked company, was working on research projects for the FSB, Russia's intelligence service.</og:description>
<og:image>https://zdnet3.cbsistatic.com/hub/i/r/2019/07/20/54d4cbf8-6da0-465a-8222-17e3af8fe7f5/thumbnail/770x578/ba27a2d11b102bd7c8306ba4a1766bd3/sytech-defaced.jpg</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.zdnet.com/article/hackers-breach-fsb-contractor-expose-tor-deanonymization-project/</dc:identifier>
</item>
<item>
<title>Stunnel and Airline Wi-Fi</title>
<link>https://potatofrom.space/post/viasat-airline-free-wifi-stunnel/</link>
<guid isPermaLink="true" >https://potatofrom.space/post/viasat-airline-free-wifi-stunnel/</guid>
<description>[unable to retrieve full-text content]
&lt;p&gt;Article URL: &lt;a href=&quot;https://potatofrom.space/post/viasat-airline-free-wifi-stunnel/&quot;&gt;https://potatofrom.space/post/viasat-airline-free-wifi-stunnel/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Comments URL: &lt;a href=&quot;https://news.ycombinator.com/item?id=20485508&quot;&gt;https://news.ycombinator.com/item?id=20485508&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Points: 360&lt;/p&gt;
&lt;p&gt;# Comments: 218&lt;/p&gt;
</description>
<pubDate>Sat, 20 Jul 2019 13:05:25 +0000</pubDate>
<dc:creator>Pneumaticat</dc:creator>
<og:type>article</og:type>
<og:url>https://www.zdnet.com/article/hackers-breach-fsb-contractor-expose-tor-deanonymization-project/</og:url>
<og:title>Hackers breach FSB contractor, expose Tor deanonymization project and more | ZDNet</og:title>
<og:description>SyTech, the hacked company, was working on research projects for the FSB, Russia's intelligence service.</og:description>
<og:image>https://zdnet3.cbsistatic.com/hub/i/r/2019/07/20/54d4cbf8-6da0-465a-8222-17e3af8fe7f5/thumbnail/770x578/ba27a2d11b102bd7c8306ba4a1766bd3/sytech-defaced.jpg</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.zdnet.com/article/hackers-breach-fsb-contractor-expose-tor-deanonymization-project/</dc:identifier>
</item>
<item>
<title>Amazon deforestation: Brazil&amp;#039;s Bolsonaro dismisses data as &amp;#039;lies&amp;#039;</title>
<link>https://www.bbc.com/news/world-latin-america-49052360</link>
<guid isPermaLink="true" >https://www.bbc.com/news/world-latin-america-49052360</guid>
<description>&lt;figure class=&quot;media-landscape has-caption full-width lead&quot;&gt;&lt;span class=&quot;image-and-copyright-container&quot;&gt;
                
                &lt;img class=&quot;js-image-replace&quot; alt=&quot;A man points next to a tree extracted illegally from the Amazon rainforest in 2015&quot; src=&quot;https://ichef.bbci.co.uk/news/320/cpsprodpb/0857/production/_107953120_mediaitem107950526.jpg&quot; width=&quot;2048&quot; height=&quot;1152&quot;/&gt;&lt;span class=&quot;off-screen&quot;&gt;Image copyright&lt;/span&gt;
                 &lt;span class=&quot;story-image-copyright&quot;&gt;Reuters&lt;/span&gt;
                
            &lt;/span&gt;
            
            &lt;figcaption class=&quot;media-caption&quot;&gt;&lt;span class=&quot;off-screen&quot;&gt;Image caption&lt;/span&gt;
                &lt;span class=&quot;media-caption__text&quot;&gt;
                    Scientists say the Amazon has suffered losses at an accelerated rate since Mr Bolsonaro took office
                &lt;/span&gt;
            &lt;/figcaption&gt;&lt;/figure&gt;&lt;p class=&quot;story-body__introduction&quot;&gt;Brazilian President Jair Bolsonaro has accused his own country's national space institute of lying about the scale of deforestation in the Amazon.&lt;/p&gt;&lt;p&gt;He said the institute was smearing Brazil's reputation abroad by publishing data showing a dramatic increase in deforestation there.&lt;/p&gt;&lt;p&gt;The far-right president said he wanted to meet with the head of the agency to discuss the issue. &lt;/p&gt;&lt;p&gt;The National Space Research Institute (Inpe) says its data is 95% accurate. &lt;/p&gt;&lt;p&gt;Mr Bolsonaro's comments on Friday came a day after preliminary satellite data released by Inpe showed that more than 1,000 sq km (400 sq miles) of the rainforest had been cleared in the first 15 days of July - an increase of 68% from the entire month of July 2018. &lt;/p&gt;&lt;p&gt;Speaking in a meeting with foreign journalists, Mr Bolsonaro said the data &quot;doesn't relate to the reality&quot;.&lt;/p&gt;&lt;p&gt;Scientists say the Amazon has suffered losses at an accelerated rate since Mr Bolsonaro took office in January, with policies that favour development over conservation. &lt;/p&gt;&lt;p&gt;As the largest rainforest in the world, the Amazon is a vital carbon store that slows down the pace of global warming.&lt;/p&gt;&lt;figure class=&quot;media-with-caption&quot; readability=&quot;-24&quot;&gt;&lt;div class=&quot;player-with-placeholder&quot; readability=&quot;7&quot;&gt;
            &lt;img class=&quot;media-placeholder player-with-placeholder__image narrative-video-placeholder&quot; src=&quot;https://ichef.bbci.co.uk/images/ic/720x405/p07gdplz.jpg&quot;/&gt;&lt;p&gt;Media playback is unsupported on your device&lt;/p&gt;
      
    &lt;/div&gt;    &lt;figcaption class=&quot;media-with-caption__caption&quot;&gt;&lt;span class=&quot;off-screen&quot;&gt;Media caption&lt;/span&gt;How is the rainforest helping limit global warming?&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;Official figures suggest that the biggest reason to fell trees there is to create new pastures for cattle. &lt;/p&gt;&lt;p&gt;Over the past decade, previous governments had managed to reduce deforestation with concerted action by federal agencies and a system of fines.&lt;/p&gt;&lt;p&gt;But Mr Bolsonaro and his ministers have criticised the penalties and overseen a dramatic fall in confiscations of timber and convictions for environmental crimes.&lt;/p&gt;&lt;p&gt;Several scientific institutions, including the Brazilian Academy of Sciences, have defended Inpe and the accuracy of its data. &lt;/p&gt;&lt;p&gt;In his comments to foreign journalists on Friday, Mr Bolsonaro also denied the existence of hunger in Brazil. He said there are no &quot;people on the streets with skeletal physiques as seen in other countries&quot;, the Reuters news reports.&lt;/p&gt;&lt;p&gt;According to data from the UN's Food and Agriculture Organization, some 5.2 million people suffered from hunger in Brazil in 2017. &lt;/p&gt;
            </description>
<pubDate>Sat, 20 Jul 2019 10:35:09 +0000</pubDate>
<dc:creator>pseudolus</dc:creator>
<og:title>Bolsonaro calls Amazon deforestation data 'lies'</og:title>
<og:type>article</og:type>
<og:description>The Brazilian president accuses the national space agency of exaggerating the scale of deforestation.</og:description>
<og:url>https://www.bbc.com/news/world-latin-america-49052360</og:url>
<og:image>https://ichef.bbci.co.uk/news/1024/branded_news/0857/production/_107953120_mediaitem107950526.jpg</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.bbc.com/news/world-latin-america-49052360</dc:identifier>
</item>
<item>
<title>Tinder Bypasses Google Play, Joining Revolt Against App Store Fee</title>
<link>https://www.bloomberg.com/news/articles/2019-07-19/tinder-bypasses-google-play-joining-revolt-against-app-store-fee</link>
<guid isPermaLink="true" >https://www.bloomberg.com/news/articles/2019-07-19/tinder-bypasses-google-play-joining-revolt-against-app-store-fee</guid>
<description>[unable to retrieve full-text content]
&lt;p&gt;Article URL: &lt;a href=&quot;https://www.bloomberg.com/news/articles/2019-07-19/tinder-bypasses-google-play-joining-revolt-against-app-store-fee&quot;&gt;https://www.bloomberg.com/news/articles/2019-07-19/tinder-bypasses-google-play-joining-revolt-against-app-store-fee&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Comments URL: &lt;a href=&quot;https://news.ycombinator.com/item?id=20484444&quot;&gt;https://news.ycombinator.com/item?id=20484444&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Points: 257&lt;/p&gt;
&lt;p&gt;# Comments: 178&lt;/p&gt;
</description>
<pubDate>Sat, 20 Jul 2019 06:24:25 +0000</pubDate>
<dc:creator>samsonradu</dc:creator>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.bloomberg.com/tosv2.html?vid=&amp;uuid=1271e480-ab53-11e9-aefe-e1df43b1491d&amp;url=L25ld3MvYXJ0aWNsZXMvMjAxOS0wNy0xOS90aW5kZXItYnlwYXNzZXMtZ29vZ2xlLXBsYXktam9pbmluZy1yZXZvbHQtYWdhaW5zdC1hcHAtc3RvcmUtZmVl</dc:identifier>
</item>
<item>
<title>Drug cartels use dollar bill serial numbers as random keys for delivery receipts</title>
<link>https://twitter.com/arawnsley/status/1151849118790246402</link>
<guid isPermaLink="true" >https://twitter.com/arawnsley/status/1151849118790246402</guid>
<description>&lt;p&gt;Most interesting or at least the most moving find for me was poking through some of the Pueblo boxes and seeing letters that the families of the sailors had written to DOD or Congress pleading for help with all manner of old family photos of the sailors paper clipped to them&lt;/p&gt;
</description>
<pubDate>Sat, 20 Jul 2019 04:33:55 +0000</pubDate>
<dc:creator>dskrvk</dc:creator>
<dc:format>text/html</dc:format>
<dc:identifier>https://mobile.twitter.com/arawnsley/status/1151849118790246402</dc:identifier>
</item>
<item>
<title>Patrick Winston of MIT CSAIL has died</title>
<link>http://news.mit.edu/2019/patrick-winston-professor-obituary-0719</link>
<guid isPermaLink="true" >http://news.mit.edu/2019/patrick-winston-professor-obituary-0719</guid>
<description>&lt;div class=&quot;region region-content&quot;&gt;
&lt;div id=&quot;block-system-main&quot; class=&quot;block block-system&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;div class=&quot;field field-name-field-article-content field-type-text-long field-label-hidden&quot;&gt;
&lt;div class=&quot;field-items&quot;&gt;
&lt;div class=&quot;field-item even&quot;&gt;
&lt;p&gt;Patrick Winston, a beloved professor and computer scientist at MIT, died on July 19 at Massachusetts General Hospital in Boston. He was 76.&lt;br/&gt; &lt;br/&gt;A professor at MIT for almost 50 years, Winston was director of MIT’s Artificial Intelligence Laboratory from 1972 to 1997 before it merged with the Laboratory for Computer Science to become MIT’s Computer Science and Artificial Intelligence Laboratory (CSAIL).&lt;br/&gt; &lt;br/&gt;A devoted teacher and cherished colleague, Winston led CSAIL’s &lt;a href=&quot;https://www.csail.mit.edu/research/genesis-group&quot;&gt;Genesis Group&lt;/a&gt;, which focused on developing AI systems that have human-like intelligence, including the ability to tell, perceive, and comprehend stories. He believed that such work could help illuminate aspects of human intelligence that scientists don’t yet understand.&lt;br/&gt; &lt;br/&gt;“My principal interest is in figuring out what’s going on inside our heads, and I’m convinced that one of the defining features of human intelligence is that we can understand stories,'” said Winston, the Ford Professor of Artificial Intelligence and Computer Science, in a 2011 interview for CSAIL. “Believing as I do that stories are important, it was natural for me to try to build systems that understand stories, and that shed light on what the story-understanding process is all about.”&lt;br/&gt; &lt;br/&gt;He was renowned for his accessible and informative lectures, and gave a hugely popular talk every year during the Independent Activities Period called “How to Speak.” &lt;br/&gt; &lt;br/&gt;“As a speaker he always had his audience in the palm of his hand,” says MIT Professor Peter Szolovits. “He put a tremendous amount of work into his lectures, and yet managed to make them feel loose and spontaneous. He wasn’t flashy, but he was compelling and direct. ”&lt;br/&gt; &lt;br/&gt;Winston’s dedication to teaching earned him many accolades over the years, including the Baker Award, the Eta Kappa Nu Teaching Award, and the Graduate Student Council Teaching Award.&lt;br/&gt; &lt;br/&gt;“Patrick’s humanity and his commitment to the highest principles made him the soul of EECS,” MIT President L. Rafael Reif wrote in a letter to the MIT community. “I called on him often for advice and feedback, and he always responded with kindness, candor, wisdom and integrity.  I will be forever grateful for his counsel, his objectivity, and his tremendous inspiration and dedication to our students.”&lt;br/&gt; &lt;br/&gt;&lt;strong&gt;Teaching computers to think&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Born Feb. 5, 1943 in Peoria, Illinois, Winston was always exceptionally curious about science, technology and how to use such tools to explore what it means to be human. He was an MIT-lifer starting in 1961, earning his bachelor’s, master’s and doctoral degrees from the Institute before joining the faculty of the Department of Electrical Engineering and Computer Science in 1970.&lt;br/&gt; &lt;br/&gt;His thesis work with Marvin Minsky centered on the difficulty of learning, setting off a trajectory of work where he put a playful, yet laser-sharp focus on fine-tuning AI systems to better understand stories.&lt;br/&gt; &lt;br/&gt;His Genesis project aimed to faithfully model computers after human intelligence in order to fully grasp the inner workings of our own motivations, rationality, and perception. Using MIT research scientist Boris Katz’s START natural language processing system and a vision system developed by former MIT PhD student Sajit Rao, Genesis can digest short, simple chunks of text, then spit out reports about how it interpreted connections between events.&lt;br/&gt; &lt;br/&gt;While the system has processed many works, Winston chose “Macbeth” as a primary text because the tragedy offers an opportunity to take big human themes, such as greed and revenge, and map out their components.&lt;br/&gt; &lt;br/&gt;“[Shakespeare] was pretty good at his portrayal of ‘the human condition,’ as my friends in the humanities would say,” Winston &lt;a href=&quot;https://cbmm.mit.edu/news-events/news/toil-and-trouble-how-%E2%80%98macbeth%E2%80%99-could-teach-computers-think-boston-globe&quot;&gt;told &lt;em&gt;The Boston Globe&lt;/em&gt;&lt;/a&gt;. “So there’s all kinds of stuff in there about what’s typical when we humans wander through the world.”&lt;br/&gt; &lt;br/&gt;His deep fascination with humanity, human intelligence, and how we communicate information spilled over into what he often described as his favorite academic activity: teaching.&lt;br/&gt; &lt;br/&gt;“He was a superb educator who introduced the field to generations of students,” says MIT Professor and longtime colleague Randall Davis. “His lectures had an uncanny ability to move in minutes from the details of an algorithm to the larger issues it illustrated, to yet larger lessons about how to be a scientist and a human being.”&lt;br/&gt; &lt;br/&gt;A past president of the Association for the Advancement of Artificial Intelligence (AAAI), Winston also wrote and edited numerous books, including a seminal textbook on AI that’s still used in classrooms around the world. Outside of the lab he also co-founded Ascent Technology, which produces scheduling and workforce management applications for major airports.&lt;br/&gt; &lt;br/&gt;He is survived by his wife Karen Prendergast and his daughter Sarah.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;hr id=&quot;separator-comments&quot;/&gt;&lt;section&gt;
&lt;/section&gt;&lt;section&gt;
&lt;/section&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
<pubDate>Fri, 19 Jul 2019 21:54:11 +0000</pubDate>
<dc:creator>nikofeyn</dc:creator>
<og:image>http://news.mit.edu/sites/mit.edu.newsoffice/files/styles/og/public/images/2019/1%20Patrick%20Winston%20at%20____%20-%20photo%20credit%20Jason%20Dorfman%2C%20MIT%20CSAIL.jpg</og:image>
<og:title>Professor Patrick Winston, former director of MIT’s Artificial Intelligence Laboratory, dies at 76</og:title>
<og:description>Beloved professor conducted pioneering research on imbuing machines with human-like intelligence, including the ability to understand stories.</og:description>
<og:type>article</og:type>
<og:url>http://news.mit.edu/2019/patrick-winston-professor-obituary-0719</og:url>
<dc:format>text/html</dc:format>
<dc:identifier>http://news.mit.edu/2019/patrick-winston-professor-obituary-0719</dc:identifier>
</item>
<item>
<title>History and Effective Use of Vim</title>
<link>https://begriffs.com/posts/2019-07-19-history-use-vim.html</link>
<guid isPermaLink="true" >https://begriffs.com/posts/2019-07-19-history-use-vim.html</guid>
<description>&lt;p&gt;This article is based on historical research and on simply reading the Vim user manual cover to cover. Hopefully these notes will help you (re?)discover core functionality of the editor, so you can abandon pre-packaged vimrc files and use plugins more thoughtfully.&lt;/p&gt;
&lt;div class=&quot;figure&quot;&gt;&lt;img src=&quot;https://begriffs.com/images/vim-books.png&quot; alt=&quot;physical books&quot;/&gt;&lt;p class=&quot;caption&quot;&gt;physical books&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;To go beyond the topics in this blog post, I’d recommend getting a paper copy of the manual and a good pocket reference. I couldn’t find any hard copy of the official Vim manual, and ended up printing &lt;a href=&quot;https://begriffs.com/pdf/vim-user-manual.pdf&quot;&gt;this PDF&lt;/a&gt; using &lt;a href=&quot;https://www.printme1.com&quot;&gt;printme1.com&lt;/a&gt;. The PDF is a printer-friendly version of the files &lt;code&gt;$VIMRUNTIME/doc/usr_??.txt&lt;/code&gt; distributed with the editor. For a convenient list of commands, I’d recommend the &lt;a href=&quot;https://www.goodreads.com/book/show/9787030-vi-and-vim-editors-pocket-reference&quot;&gt;vi and Vim Editors Pocket Reference&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&quot;table-of-contents&quot;&gt;Table of Contents&lt;/h3&gt;
&lt;h3 id=&quot;history&quot;&gt;History&lt;/h3&gt;
&lt;h4 id=&quot;birth-of-vi&quot;&gt;Birth of vi&lt;/h4&gt;
&lt;p&gt;Vi commands and features go back more than fifty years, starting with the QED editor. Here is the lineage:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;1966 : QED (“Quick EDitor”) in Berkeley Timesharing System&lt;/li&gt;
&lt;li&gt;1969 Jul: moon landing (just for reference)&lt;/li&gt;
&lt;li&gt;1969 Aug: QED -&amp;gt; ed at AT&amp;amp;T&lt;/li&gt;
&lt;li&gt;1976 Feb: ed -&amp;gt; em (“Editor for Mortals”) at Queen Mary College&lt;/li&gt;
&lt;li&gt;1976 : em -&amp;gt; ex (“EXtended”) at UC Berkeley&lt;/li&gt;
&lt;li&gt;1977 Oct: ex gets visual mode, vi&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://begriffs.com/images/tty33asr.jpg&quot; class=&quot;right&quot; alt=&quot;hard copy terminal&quot;/&gt;&lt;/p&gt;
&lt;p&gt;You can discover the similarities all the way between QED and ex by reading the &lt;a href=&quot;https://begriffs.com/pdf/qed-editor.pdf&quot;&gt;QED manual&lt;/a&gt; and &lt;a href=&quot;https://begriffs.com/pdf/ex-manual.pdf&quot;&gt;ex manual&lt;/a&gt;. Both editors use a similar grammar to specify and operate on line ranges.&lt;/p&gt;
&lt;p&gt;Editors like QED, ed, and em were designed for hard-copy terminals, which are basically electric typewriters with a modem attached. Hard-copy terminals print system output on paper. Output could not be changed once printed, obviously, so the editing process consisted of user commands to update and manually print ranges of text.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://begriffs.com/images/adm3a.jpg&quot; class=&quot;left&quot; alt=&quot;video terminal&quot;/&gt;&lt;/p&gt;
&lt;p&gt;By 1976 video terminals such as the ADM-3A started to be available. The Ex editor added an “open mode” which allowed intraline editing on video terminals, and a visual mode for screen oriented editing on cursor-addressible terminals. The visual mode (activated with the command “vi”) kept an up-to-date view of part of the file on screen, while preserving an ex command line at the bottom of the screen. (Fun fact: the h,j,k,l keys on the ADM-3A had arrows drawn on them, so that choice of motion keys in vi was simply to match the keyboard.)&lt;/p&gt;
&lt;p&gt;Learn more about the journey from ed to ex/vi in this &lt;a href=&quot;https://begriffs.com/pdf/unix-review-bill-joy.pdf&quot;&gt;interview&lt;/a&gt; with Bill Joy. He talks about how he made ex/vi, and some things that disappointed him about it.&lt;/p&gt;
&lt;p&gt;Classic vi is truly just an alter-ego of ex – they are the same binary, which decides to start in ex mode or vi mode based on the name of the executable invoked. The legacy of all this history is that ex/vi is refined by use, requires scant system resources, and can operate under limited bandwidth communication. It is also available on most systems and &lt;a href=&quot;http://pubs.opengroup.org/onlinepubs/9699919799/utilities/vi.html&quot;&gt;fully specified&lt;/a&gt; in POSIX.&lt;/p&gt;
&lt;h4 id=&quot;from-vi-to-vim&quot;&gt;From vi to vim&lt;/h4&gt;
&lt;p&gt;Being a derivative of ed, the ex/vi editor was intellectual property of AT&amp;amp;T. To use vi on platforms other than Unix, people had to write clones that did not share in the original codebase.&lt;/p&gt;
&lt;p&gt;Some of the clones:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;nvi - 1980 for 4BSD&lt;/li&gt;
&lt;li&gt;calvin - 1987 for DOS&lt;/li&gt;
&lt;li&gt;vile - 1990 for DOS&lt;/li&gt;
&lt;li&gt;stevie - 1987 for Atari ST&lt;/li&gt;
&lt;li&gt;elvis - 1990 for Minix and 386BSD&lt;/li&gt;
&lt;li&gt;vim - 1991 for Amiga&lt;/li&gt;
&lt;li&gt;viper - 1995 for Emacs&lt;/li&gt;
&lt;li&gt;elwin - 1995 for Windows&lt;/li&gt;
&lt;li&gt;lemmy - 2002 for Windows&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;We’ll be focusing on that little one in the middle: vim. Bram Moolenaar wanted to use vi on the Amiga. He began porting Stevie from the Atari and evolving it. He called his port “Vi IMitation.” For a full first-hand account, see Bram’s &lt;a href=&quot;https://begriffs.com/pdf/vim-interview.pdf&quot;&gt;interview&lt;/a&gt; with Free Software Magazine.&lt;/p&gt;
&lt;p&gt;By version 1.22 Vim was rechristened “Vi IMproved,” matching and surpassing features of the original. Here is the timeline of the next major versions, with some of their big features:&lt;/p&gt;
&lt;table class=&quot;table&quot;&gt;&lt;tbody readability=&quot;11.5&quot;&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;1991 Nov 2&lt;/td&gt;
&lt;td&gt;Vim 1.14: First release (on Fred Fish disk #591).&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;1992&lt;/td&gt;
&lt;td&gt;Vim 1.22: Port to Unix. Vim now competes with Vi.&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;1994 Aug 12&lt;/td&gt;
&lt;td&gt;Vim 3.0: Support for multiple buffers and windows.&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;1996 May 29&lt;/td&gt;
&lt;td&gt;Vim 4.0: Graphical User Interface (largely by Robert Webb).&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;1998 Feb 19&lt;/td&gt;
&lt;td&gt;Vim 5.0: Syntax coloring/highlighting.&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td&gt;2001 Sep 26&lt;/td&gt;
&lt;td&gt;Vim 6.0: Folding, plugins, vertical split.&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td&gt;2006 May 8&lt;/td&gt;
&lt;td&gt;Vim 7.0: Spell check, omni completion, undo branches, tabs.&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td&gt;2016 Sep 12&lt;/td&gt;
&lt;td&gt;Vim 8.0: Jobs, async I/O, native packages.&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;For more info about each version, see e.g. &lt;code&gt;:help vim8&lt;/code&gt;. To see plans for the future, including known bugs, see &lt;code&gt;:help todo.txt&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Version 8 included some async job support due to peer pressure from NeoVim, whose developers &lt;a href=&quot;https://groups.google.com/forum/#!searchin/vim_dev/neovim/vim_dev/x0BF9Y0Uby8/Xse9Bvyza0AJ&quot;&gt;wanted&lt;/a&gt; to run debuggers and REPLs for their web scripting languages inside the editor.&lt;/p&gt;
&lt;p&gt;Vim is super portable. By adapting over time to work on a wide variety of platforms, the editor was forced to keep portable coding habits. It runs on OS/390, Amiga, BeOS and BeBox, Macintosh classic, Atari MiNT, MS-DOS, OS/2, QNX, RISC-OS, BSD, Linux, OS X, VMS, and MS-Windows. You can rely on Vim being there no matter what computer you’re using.&lt;/p&gt;
&lt;p&gt;In a final twist in the vi saga, the original ex/vi source code was finally released in 2002 under a BSD free software license. It is available at &lt;a href=&quot;http://ex-vi.sourceforge.net&quot;&gt;ex-vi.sourceforge.net&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Let’s get down to business. Before getting to odds, ends, and intermediate tricks, it helps to understand how Vim organizes and reads its configuration files.&lt;/p&gt;
&lt;h3 id=&quot;configuration-hierarchy&quot;&gt;Configuration hierarchy&lt;/h3&gt;
&lt;p&gt;I used to think, incorrectly, that Vim reads all its settings and scripts from the ~/.vimrc file alone. Browsing random “dotfiles” repositories can reinforce this notion. Quite often people publish monstrous single .vimrc files that try to control every aspect of the editor. These big configs are sometimes called “vim distros.”&lt;/p&gt;
&lt;p&gt;In reality Vim has a tidy structure, where .vimrc is just one of several inputs. In fact you can ask Vim exactly which scripts it has loaded. Try this: edit a source file from a random programming project on your computer. Once loaded, run&lt;/p&gt;
&lt;pre class=&quot;viml&quot;&gt;
&lt;code&gt;:scriptnames&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Take time to read the list. Try to guess what the scripts might do, and note the directories where they live.&lt;/p&gt;
&lt;p&gt;Was the list longer than you expected? If you have installed loads of plugins the editor has a lot to do. Check what slows down the editor most at startup by running the following and look at the &lt;code&gt;start.log&lt;/code&gt; it creates:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;sourceCode bash&quot;&gt;
&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;ex&quot;&gt;vim&lt;/span&gt; --startuptime start.log name-of-your-file&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Just for comparison, see how quickly Vim starts without your existing configuration:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;sourceCode bash&quot;&gt;
&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;ex&quot;&gt;vim&lt;/span&gt; --clean --startuptime clean.log name-of-your-file&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To determine which scripts to run at startup or buffer load time, Vim traverses a “runtime path.” The path is a comma-separated list of directories that each contain a common structure. Vim inspects the structure of each directory to find scripts to run. Directories are processed in the order they appear in the list.&lt;/p&gt;
&lt;p&gt;Check the runtimepath on your system by running:&lt;/p&gt;
&lt;pre class=&quot;viml&quot;&gt;
&lt;code&gt;:set runtimepath&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;My system contains the following directories in the default value for &lt;code&gt;runtimepath&lt;/code&gt;. Not all of them even exist in the filesystem, but they would be consulted if they did.&lt;/p&gt;
&lt;dl&gt;&lt;dt&gt;~/.vim&lt;/dt&gt;
&lt;dd&gt;The home directory, for personal preferences.&lt;/dd&gt;
&lt;dt&gt;/usr/local/share/vim/vimfiles&lt;/dt&gt;
&lt;dd&gt;A system-wide Vim directory, for preferences from the system administrator.&lt;/dd&gt;
&lt;dt&gt;/usr/local/share/vim/vim81&lt;/dt&gt;
&lt;dd&gt;Aka $VIMRUNTIME, for files distributed with Vim.&lt;/dd&gt;
&lt;dt&gt;/usr/local/share/vim/vimfiles/after&lt;/dt&gt;
&lt;dd&gt;The “after” directory in the system-wide Vim directory. This is for the system administrator to overrule or add to the distributed defaults.&lt;/dd&gt;
&lt;dt&gt;~/.vim/after&lt;/dt&gt;
&lt;dd&gt;The “after” directory in the home directory. This is for personal preferences to overrule or add to the distributed defaults or system-wide settings.&lt;/dd&gt;
&lt;/dl&gt;&lt;p&gt;Because directories are processed by their order in line, the only thing that is special about the “after” directories is that they are at the end of the list. There is nothing magical about the word “after.”&lt;/p&gt;
&lt;p&gt;When processing each directory, Vim looks for subfolders with specific names. To learn more about them, see &lt;code&gt;:help runtimepath&lt;/code&gt;. Here is a selection of those we will be covering, with brief descriptions.&lt;/p&gt;
&lt;dl&gt;&lt;dt&gt;plugin/&lt;/dt&gt;
&lt;dd&gt;Vim script files that are loaded automatically when editing any kind of file. Called “global plugins.”&lt;/dd&gt;
&lt;dt&gt;autoload/&lt;/dt&gt;
&lt;dd&gt;(Not to be confused with “plugin.”) Scripts in autoload contain functions that are loaded only when requested by other scripts.&lt;/dd&gt;
&lt;dt&gt;ftdetect/&lt;/dt&gt;
&lt;dd&gt;Scripts to detect filetypes. They can base their decision on filename extension, location, or internal file contents.&lt;/dd&gt;
&lt;dt&gt;ftplugin/&lt;/dt&gt;
&lt;dd&gt;Scripts that are executed when editing files with known type.&lt;/dd&gt;
&lt;dt&gt;compiler/&lt;/dt&gt;
&lt;dd&gt;Definitions of how to run various compilers or linters, and of how to parse their output. Can be shared between multiple ftplugins. Also not applied automatically, must be called with &lt;code&gt;:compiler&lt;/code&gt;&lt;/dd&gt;
&lt;dt&gt;pack/&lt;/dt&gt;
&lt;dd&gt;Container for Vim 8 native packages, the successor to “Pathogen” style package management. The native packaging system does not require any third-party code.&lt;/dd&gt;
&lt;/dl&gt;&lt;p&gt;Finally, &lt;code&gt;~/.vimrc&lt;/code&gt; is the catchall for general editor settings. Use it for setting defaults that can be overridden for particular file types. For a comprehensive overview of settings you can choose in .vimrc, run &lt;code&gt;:options&lt;/code&gt;.&lt;/p&gt;
&lt;h3 id=&quot;third-party-plugins&quot;&gt;Third-party plugins&lt;/h3&gt;
&lt;p&gt;Plugins are simply Vim scripts that must be put into the correct places in the runtimepath in order to execute. Installing them is conceptually easy: download the file(s) into place. The challenge is that it’s hard to remove or update some plugins because they litter subdirectories in the runtimepath with their scripts, and it can be hard to tell which plugin is responsible for which files.&lt;/p&gt;
&lt;p&gt;“Plugin managers” evolved to address this need. Vim.org has had a &lt;a href=&quot;https://www.vim.org/scripts/script_search_results.php&quot;&gt;plugin registry&lt;/a&gt; going back at least as far as 2003 (as identified by the Internet Archive). However it wasn’t until about 2008 that the notion of a plugin manager really came into vogue.&lt;/p&gt;
&lt;p&gt;These tools add plugins’ separate directories to Vim’s runtimepath, and compile help tags for plugin documentation. Most plugin managers also install and update plugin code from the internet, sometimes in parallel or with colorful progress bars.&lt;/p&gt;
&lt;p&gt;In chronological order, here is the parade of plugin managers. I based the date ranges on earliest and latest releases of each, or when no official releases are identified, on the earliest and latest commit dates.&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Mar 2006 - Jul 2014 : &lt;a href=&quot;https://www.vim.org/scripts/script.php?script_id=1502&quot;&gt;Vimball&lt;/a&gt; (A distribution format and associated Vim commands)&lt;/li&gt;
&lt;li&gt;Oct 2008 - Dec 2015 : &lt;a href=&quot;https://github.com/tpope/vim-pathogen&quot;&gt;Pathogen&lt;/a&gt; (Deprecated in favor of native vim packages)&lt;/li&gt;
&lt;li&gt;Aug 2009 - Dec 2009 : &lt;a href=&quot;https://github.com/c9s/Vimana&quot;&gt;Vimana&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Dec 2009 - Dec 2014 : &lt;a href=&quot;https://github.com/MarcWeber/vim-addon-manager&quot;&gt;VAM&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Aug 2010 - Nov 2010 : &lt;a href=&quot;https://github.com/vimjolts/jolt&quot;&gt;Jolt&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Oct 2010 - Nov 2012 : &lt;a href=&quot;https://github.com/tomtom/tplugin_vim&quot;&gt;tplugin&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Oct 2010 - Feb 2014 : &lt;a href=&quot;https://github.com/VundleVim/Vundle.vim&quot;&gt;Vundle&lt;/a&gt; (Discontinued after NeoBundle ripped off code)&lt;/li&gt;
&lt;li&gt;Mar 2012 - Mar 2018 : &lt;a href=&quot;https://github.com/kana/vim-flavor&quot;&gt;vim-flavor&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Apr 2012 - Mar 2016 : &lt;a href=&quot;https://github.com/Shougo/neobundle.vim&quot;&gt;NeoBundle&lt;/a&gt; (Deprecated in favor of dein)&lt;/li&gt;
&lt;li&gt;Jan 2013 - Aug 2017 : &lt;a href=&quot;https://github.com/csexton/infect&quot;&gt;infect&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Feb 2013 - Aug 2016 : &lt;a href=&quot;https://github.com/rkulla/vimogen&quot;&gt;vimogen&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Oct 2013 - Jan 2015 : &lt;a href=&quot;https://github.com/sunaku/vim-unbundle&quot;&gt;vim-unbundle&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Dec 2013 - Jul 2015 : &lt;a href=&quot;https://github.com/ardagnir/vizardry&quot;&gt;Vizardry&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Feb 2014 - Oct 2018 : &lt;a href=&quot;https://github.com/junegunn/vim-plug&quot;&gt;vim-plug&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Jan 2015 - Oct 2015 : &lt;a href=&quot;https://github.com/tomtom/enabler_vim&quot;&gt;enabler&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Aug 2015 - Apr 2016 : &lt;a href=&quot;https://github.com/dbeniamine/vizardry&quot;&gt;Vizardry 2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Jan 2016 - Jun 2018 : &lt;a href=&quot;https://github.com/Shougo/dein.vim&quot;&gt;dein.vim&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Sep 2016 - Present : native in Vim 8&lt;/li&gt;
&lt;li&gt;Feb 2017 - Sep 2018 : &lt;a href=&quot;https://github.com/k-takata/minpac&quot;&gt;minpac&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Mar 2018 - Mar 2018 : &lt;a href=&quot;https://github.com/meldavis/autopac&quot;&gt;autopac&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Feb 2017 - Jun 2018 : &lt;a href=&quot;https://github.com/maralla/pack&quot;&gt;pack&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Mar 2017 - Sep 2017 : &lt;a href=&quot;https://github.com/nicodebo/vim-pck&quot;&gt;vim-pck&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Sep 2017 - Sep 2017 : &lt;a href=&quot;https://github.com/mkarpoff/vim8-pack&quot;&gt;vim8-pack&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Sep 2017 - May 2019 : &lt;a href=&quot;https://github.com/vim-volt/volt&quot;&gt;volt&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Sep 2018 - Feb 2019 : &lt;a href=&quot;https://github.com/kristijanhusak/vim-packager&quot;&gt;vim-packager&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Feb 2019 - Feb 2019 : &lt;a href=&quot;https://github.com/bennyyip/plugpac.vim&quot;&gt;plugpac.vim&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;The first thing to note is the overwhelming variety of these tools, and the second is that each is typically active for about four years before presumably going out of fashion.&lt;/p&gt;
&lt;p&gt;The most stable way to manage plugins is to simply use Vim 8’s built-in functionality, which requires no third-party code. Let’s walk through how to do it.&lt;/p&gt;
&lt;p&gt;First create two directories, opt and start, within a pack directory in your runtimepath.&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;8&quot;&gt;
&lt;pre class=&quot;sourceCode bash&quot;&gt;
&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;fu&quot;&gt;mkdir&lt;/span&gt; -p ~/.vim/pack/foobar/&lt;span class=&quot;dt&quot;&gt;{opt,start}&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Note the placeholder “foobar.” This name is entirely up to you. It classifies the packages that will go inside. Most people throw all their plugins into a single nondescript category, which is fine. Pick whatever name you like; I’ll continue to use foobar here. You could theoretically create multiple categories too, like ~/.vim/pack/navigation and ~/.vim/pack/linting. Note that Vim does not detect duplication between categories and will double-load duplicates if they exist.&lt;/p&gt;
&lt;p&gt;Packages in “start” get loaded automatically, whereas those in “opt” won’t load until specifically requested in Vim with the &lt;code&gt;:packadd&lt;/code&gt; command. Opt is good for lesser-used packages, and keeps Vim fast by not running scripts unnecessarily. Note that there isn’t a counterpart to &lt;code&gt;:packadd&lt;/code&gt; to unload a package.&lt;/p&gt;
&lt;p&gt;For this example we’ll add the “ctrlp” fuzzy find plugin to opt. Download and extract the latest release into place:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;sourceCode bash&quot;&gt;
&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;ex&quot;&gt;curl&lt;/span&gt; -L https://github.com/kien/ctrlp.vim/archive/1.79.tar.gz \
        &lt;span class=&quot;kw&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;tar&lt;/span&gt; zx -C ~/.vim/pack/foobar/opt&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;That command creates a ~/.vim/pack/foobar/opt/ctrlp.vim-1.79 folder, and the package is ready to use. Back in vim, create a helptags index for the new package:&lt;/p&gt;
&lt;pre class=&quot;viml&quot;&gt;
&lt;code&gt;:helptags ~/.vim/pack/foobar/opt/ctrlp.vim-1.79/doc&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;That creates a file called “tags” in the package’s doc folder, which makes the topics available for browsing in Vim’s internal help system. (Alternately you can run &lt;code&gt;:helptags ALL&lt;/code&gt; once the package has been loaded, which takes care of all docs in the runtimepath.)&lt;/p&gt;
&lt;p&gt;When you want to use the package, load it (and know that tab completion works for plugin names, so you don’t have to type the whole name):&lt;/p&gt;
&lt;pre class=&quot;viml&quot;&gt;
&lt;code&gt;:packadd ctrlp.vim-1.79&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Packadd includes the package’s base directory in the runtimepath, and sources its plugin and ftdetect scripts. After loading ctrlp, you can press CTRL-P to pop up a fuzzy find file matcher.&lt;/p&gt;
&lt;p&gt;Some people keep their ~/.vim directory under version control and use git submodules for each package. For my part, I simply extract packages from tarballs and track them in my own repository. If you use mature packages you don’t need to upgrade them often, plus the scripts are generally small and don’t clutter git history much.&lt;/p&gt;
&lt;h3 id=&quot;backups-and-undo&quot;&gt;Backups and undo&lt;/h3&gt;
&lt;p&gt;Depending on user settings, Vim can protect against four types of loss:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;A crash during editing (between saves). Vim can protect against this one by periodically saving unwritten changes to a swap file.&lt;/li&gt;
&lt;li&gt;Editing the same file with two instances of Vim, overwriting changes from one or both instances. Swap files protect against this too.&lt;/li&gt;
&lt;li&gt;A crash during the save process itself, after the destination file is truncated but before the new contents have been fully written. Vim can protect against this with a “writebackup.” To do this, it writes to a new file and swaps it with the original on success, in a way that depends on the “backupcopy” setting.&lt;/li&gt;
&lt;li&gt;Saving new file contents but wanting the original back. Vim can protect against this by persisting the backup copy of the file after writing changes.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;Before examining sensible settings, how about some comic relief? Here are just a sampling of comments from vimrc files on GitHub:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;“Do not create swap file. Manage this in version control”&lt;/li&gt;
&lt;li&gt;“Backups are for pussies. Use version control”&lt;/li&gt;
&lt;li&gt;“use version control FFS!”&lt;/li&gt;
&lt;li&gt;“We live in a world with version control, so get rid of swaps and backups”&lt;/li&gt;
&lt;li&gt;“don’t write backup files, version control is enough backup”&lt;/li&gt;
&lt;li&gt;“I’ve never actually used the VIM backup files… Use version control”&lt;/li&gt;
&lt;li&gt;“Since most stuff is on version control anyway”&lt;/li&gt;
&lt;li&gt;“Disable backup files, you are using a version control system anyway :)”&lt;/li&gt;
&lt;li&gt;“version control has arrived, git will save us”&lt;/li&gt;
&lt;li&gt;“disable swap and backup files (Always use version control! ALWAYS!)”&lt;/li&gt;
&lt;li&gt;“Turn backup off, since I version control everything”&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;The comments reflect awareness of only the fourth case above (and the third by accident), whereas the authors generally go on to disable the swap file too, leaving one and two unprotected.&lt;/p&gt;
&lt;p&gt;Here is the configuration I recommend to keep your edits safe:&lt;/p&gt;
&lt;pre class=&quot;viml&quot;&gt;
&lt;code&gt;&quot; Protect changes between writes. Default values of
&quot; updatecount (200 keystrokes) and updatetime
&quot; (4 seconds) are fine
set swapfile
set directory^=~/.vim/swap//

&quot; protect against crash-during-write
set writebackup
&quot; but do not persist backup after successful write
set nobackup
&quot; use rename-and-write-new method whenever safe
set backupcopy=auto
&quot; patch required to honor double slash at end
if has(&quot;patch-8.1.0251&quot;)
        &quot; consolidate the writebackups -- not a big
        &quot; deal either way, since they usually get deleted
        set backupdir^=~/.vim/backup//
end

&quot; persist the undo tree for each file
set undofile
set undodir^=~/.vim/undo//&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;These settings enable backups for writes-in-progress, but do not persist them after successful write because version control etc etc. Note that you’ll need to &lt;code&gt;mkdir ~/.vim/{swap,undodir,backup}&lt;/code&gt; or else Vim will fall back to the next available folder in the preference list. You should also probably chmod the folders to keep the contents private, because the swap files and undo history might contain sensitive information.&lt;/p&gt;
&lt;p&gt;One thing to note about the paths in our config is that they end in a double slash. That ending enables a feature to disambiguate swaps and backups for files with the same name that live in different directories. For instance the swap file for &lt;code&gt;/foo/bar&lt;/code&gt; will be saved in &lt;code&gt;~/.vim/swap/%foo%bar.swp&lt;/code&gt; (slashes escaped as percent signs). Vim had a bug until a fairly recent patch where the double slash was not honored for backupdir, and we guard against that above.&lt;/p&gt;
&lt;p&gt;We also have Vim persist the history of undos for each file, so that you can apply them even after quitting and editing the file again. While it may sound redundant with the swap file, the undo history is complementary because it is written only when the file is written. (If it were written more frequently it might not match the state of the file on disk after a crash, so Vim doesn’t do that.)&lt;/p&gt;
&lt;p&gt;Speaking of undo, Vim maintains a full tree of edit history. This means you can make a change, undo it, then redo it differently and all three states are recoverable. You can see the times and magnitude of changes with the &lt;code&gt;:undolist&lt;/code&gt; command, but it’s hard to visualize the tree structure from it. You can navigate to specific changes in that list, or move in time with &lt;code&gt;:earlier&lt;/code&gt; and &lt;code&gt;:later&lt;/code&gt; which take a time argument like 5m, or the count of file saves, like 3f. However navigating the undo tree is an instance when I think a plugin – like &lt;a href=&quot;https://github.com/mbbill/undotree&quot;&gt;undotree&lt;/a&gt; – &lt;em&gt;is&lt;/em&gt; warranted.&lt;/p&gt;
&lt;p&gt;Enabling these disaster recovery settings can bring you peace of mind. I used to save compulsively after most edits or when stepping away from the computer, but now I’ve made an effort to leave documents unsaved for hours at a time. I know how the swap file works now.&lt;/p&gt;
&lt;p&gt;Some final notes: keep an eye on all these disaster recovery files, they can pile up in your .vim folder and use space over time. Also setting nowritebackup might be necessary when saving a huge file with low disk space, because Vim must otherwise make an entire copy of the file temporarily. By default the “backupskip” setting disables backups for anything in the system temp directory.&lt;/p&gt;
&lt;p&gt;Vim’s “patchmode” is related to backups. You can use it in directories that aren’t under version control. For instance if you want to download a source tarball, make an edit and send a patch over a mailing list without bringing git into the picture. Run &lt;code&gt;:set patchmod=.orig&lt;/code&gt; and any file ‘foo’ Vim is about to write will be backed up to ‘foo.orig’. You can then create a patch on the command line between the .orig files and the new ones.&lt;/p&gt;
&lt;h3 id=&quot;include-and-path&quot;&gt;Include and path&lt;/h3&gt;
&lt;p&gt;Most programming languages allow you to include one module or file from another. Vim knows how to track program identifiers in included files using the configuration settings &lt;code&gt;path&lt;/code&gt;, &lt;code&gt;include&lt;/code&gt;, &lt;code&gt;suffixesadd&lt;/code&gt;, and &lt;code&gt;includeexpr&lt;/code&gt;. The identifier search (see &lt;code&gt;:help include-search&lt;/code&gt;) is an alternative to maintaining a tags file with ctags for system headers.&lt;/p&gt;
&lt;p&gt;The settings for C programs work out of the box. Other languages are supported too, but require tweaking. That’s outside the scope of this article, see &lt;code&gt;:help include&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;If everything is configured right, you can press &lt;code&gt;[i&lt;/code&gt; on an identifier to display its definition, or &lt;code&gt;[d&lt;/code&gt; for a macro constant. Also when you press &lt;code&gt;gf&lt;/code&gt; with the cursor on a filename, Vim searches the path to find it and jump there. Because the path also affects the &lt;code&gt;:find&lt;/code&gt; command, some people have the tendency to add ‘**/*’ or commonly accessed directories to the path in order to use &lt;code&gt;:find&lt;/code&gt; like a poor man’s fuzzy finder. Doing this slows down the identifier search with directories which aren’t relevant to that task.&lt;/p&gt;
&lt;p&gt;A way to get the same level of crappy find capability, without polluting the path, is to just make another mapping. You can then press &amp;lt;Leader&amp;gt;&amp;lt;space&amp;gt; (which is typically backslash space) then start typing a filename and use tab or CTRL-D completion to find the file.&lt;/p&gt;
&lt;pre class=&quot;viml&quot;&gt;
&lt;code&gt;&quot; fuzzy-find lite
nmap &amp;lt;Leader&amp;gt;&amp;lt;space&amp;gt; :e ./**/&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Just to reiterate: the path parameter was designed for header files. If you want more proof, there is even a &lt;code&gt;:checkpath&lt;/code&gt; command to see whether the path is functioning. Load a C file and run &lt;code&gt;:checkpath&lt;/code&gt;. It will display filenames it was unable to find that are included transitively by the current file. Also &lt;code&gt;:checkpath!&lt;/code&gt; with a bang dumps the whole hierarchy of files included from the current file.&lt;/p&gt;
&lt;p&gt;By default path has the value “.,/usr/include,,” meaning the working directory, /usr/include, and files that are siblings of the active buffer. The directory specifiers and globs are pretty powerful, see &lt;code&gt;:help file-searching&lt;/code&gt; for the details.&lt;/p&gt;
&lt;p&gt;In my C ftplugin (more on that later), I also have the path search for include files within the current project, like ./src/include or ./include .&lt;/p&gt;
&lt;pre class=&quot;viml&quot;&gt;
&lt;code&gt;setlocal path=.,,*/include/**3,./*/include/**3
setlocal path+=/usr/include&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;The ** with a number like **3 bounds the depth of the search in subdirectories. It’s wise to add depth bounds where you can to avoid identifier searches that lock up.&lt;/p&gt;
&lt;p&gt;Here are other patterns you might consider adding to your path if &lt;code&gt;:checkpath&lt;/code&gt; identifies that files can’t be found in your project. It depends on your system of course.&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;More system includes: &lt;code&gt;/usr/include/**4,/usr/local/include/**3&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Homebrew library headers: &lt;code&gt;/usr/local/Cellar/**2/include/**2&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Macports library headers: &lt;code&gt;/opt/local/include/**&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;OpenBSD library headers: &lt;code&gt;/usr/local/lib/\*/include,/usr/X11R6/include/\*\*3&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;See also: &lt;code&gt;:he [&lt;/code&gt;, &lt;code&gt;:he gf&lt;/code&gt;, &lt;code&gt;:he :find&lt;/code&gt;.&lt;/p&gt;
&lt;h3 id=&quot;edit-compile-cycle&quot;&gt;Edit ⇄ compile cycle&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;:make&lt;/code&gt; command runs a program of the user’s choice to build a project, and collects the output in the quickfix buffer. Each item in the quickfix records the filename, line, column, type (warning/error) and message of each output item. A fairly idomatic mapping uses bracket commands to move through quickfix items:&lt;/p&gt;
&lt;pre class=&quot;viml&quot;&gt;
&lt;code&gt;&quot; quickfix shortcuts
nmap ]q :cnext&amp;lt;cr&amp;gt;
nmap ]Q :clast&amp;lt;cr&amp;gt;
nmap [q :cprev&amp;lt;cr&amp;gt;
nmap [Q :cfirst&amp;lt;cr&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;If, after updating the program and rebuilding, you are curious what the error messages said last time, use &lt;code&gt;:colder&lt;/code&gt; (and &lt;code&gt;:cnewer&lt;/code&gt; to return). To see more information about the currently selected error use &lt;code&gt;:cc&lt;/code&gt;, and use &lt;code&gt;:copen&lt;/code&gt; to see the full quickfix buffer. You can populate the quickfix yourself without running &lt;code&gt;:make&lt;/code&gt; with &lt;code&gt;:cfile&lt;/code&gt;, &lt;code&gt;:caddfile&lt;/code&gt;, or &lt;code&gt;:cexpr&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Vim parses output from the build process according to the errorformat string, which contains scanf-like escape sequences. It’s typical to set this in a “compiler file.” For instance, Vim ships with one for gcc in $VIMRUNTIME/compiler/gcc.vim, but has no compiler file for clang. I created the following definition for ~/.vim/compiler/clang.vim:&lt;/p&gt;
&lt;pre class=&quot;viml&quot;&gt;
&lt;code&gt;&quot; formatting variations documented at
&quot; https://clang.llvm.org/docs/UsersManual.html#formatting-of-diagnostics
&quot;
&quot; It should be possible to make this work for the combination of
&quot; -fno-show-column and -fcaret-diagnostics as well with multiline
&quot; and %p, but I was too lazy to figure it out.
&quot;
&quot; The %D and %X patterns are not clang per se. They capture the
&quot; directory change messages from (GNU) 'make -w'. I needed this
&quot; for building a project which used recursive Makefiles.

CompilerSet errorformat=
        \%f:%l%c:{%*[^}]}{%*[^}]}:\ %trror:\ %m,
        \%f:%l%c:{%*[^}]}{%*[^}]}:\ %tarning:\ %m,
        \%f:%l:%c:\ %trror:\ %m,
        \%f:%l:%c:\ %tarning:\ %m,
        \%f(%l,%c)\ :\ %trror:\ %m,
        \%f(%l,%c)\ :\ %tarning:\ %m,
        \%f\ +%l%c:\ %trror:\ %m,
        \%f\ +%l%c:\ %tarning:\ %m,
        \%f:%l:\ %trror:\ %m,
        \%f:%l:\ %tarning:\ %m,
        \%D%*\\a[%*\\d]:\ Entering\ directory\ %*[`']%f',
        \%D%*\\a:\ Entering\ directory\ %*[`']%f',
        \%X%*\\a[%*\\d]:\ Leaving\ directory\ %*[`']%f',
        \%X%*\\a:\ Leaving\ directory\ %*[`']%f',
        \%DMaking\ %*\\a\ in\ %f

CompilerSet makeprg=make&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;To activate this compiler profile, run &lt;code&gt;:compiler clang&lt;/code&gt;. This is typically done in an ftplugin file.&lt;/p&gt;
&lt;p&gt;Another example is running &lt;a href=&quot;https://www.gnu.org/software/diction/&quot;&gt;GNU Diction&lt;/a&gt; on a text document to identify wordy and commonly misused phrases in sentences. Create a “compiler” called diction.vim:&lt;/p&gt;
&lt;pre class=&quot;viml&quot;&gt;
&lt;code&gt;CompilerSet errorformat=%f:%l:\ %m
CompilerSet makeprg=diction\ -s\ %&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;After you run &lt;code&gt;:compiler diction&lt;/code&gt; you can use the normal &lt;code&gt;:make&lt;/code&gt; command to run it and populate the quickfix. The final mild convenience in my .vimrc is a mapping to run make:&lt;/p&gt;
&lt;pre class=&quot;viml&quot;&gt;
&lt;code&gt;&quot; real make
map &amp;lt;silent&amp;gt; &amp;lt;F5&amp;gt; :make&amp;lt;cr&amp;gt;&amp;lt;cr&amp;gt;&amp;lt;cr&amp;gt;
&quot; GNUism, for building recursively
map &amp;lt;silent&amp;gt; &amp;lt;s-F5&amp;gt; :make -w&amp;lt;cr&amp;gt;&amp;lt;cr&amp;gt;&amp;lt;cr&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;diffs-and-patches&quot;&gt;Diffs and patches&lt;/h3&gt;
&lt;p&gt;Vim’s internal diffing is powerful, but it can be daunting, especially the three-way merge view. In reality it’s not so bad once you take time to study it. The main idea is that every window is either in or out of “diff mode.” All windows put in diffmode (with &lt;code&gt;:difft[his]&lt;/code&gt;) get compared with all other windows already in diff mode.&lt;/p&gt;
&lt;p&gt;For example, let’s start simple. Create two files:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;9&quot;&gt;
&lt;pre class=&quot;sourceCode bash&quot;&gt;
&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;bu&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&quot;hello, world&quot;&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;&amp;gt;&lt;/span&gt; h1
&lt;span class=&quot;bu&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&quot;goodbye, world&quot;&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;&amp;gt;&lt;/span&gt; h2

&lt;span class=&quot;ex&quot;&gt;vim&lt;/span&gt; h1 h2&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In vim, split the arguments into their own windows with &lt;code&gt;:all&lt;/code&gt;. In the top window, for h1, run &lt;code&gt;:difft&lt;/code&gt;. You’ll see a gutter appear, but no difference detected. Move to the other window with CTWL-W CTRL-W and run &lt;code&gt;:difft&lt;/code&gt; again. Now hello and goobye are identified as different in the current chunk. Continuing in the bottom window, you can run &lt;code&gt;:diffg[et]&lt;/code&gt; to get “hello” from the top window, or &lt;code&gt;:diffp[ut]&lt;/code&gt; to send “goodbye” into the top window. Pressing &lt;code&gt;]c&lt;/code&gt; or &lt;code&gt;[c&lt;/code&gt; would move between chunks if there were more than one.&lt;/p&gt;
&lt;p&gt;A shortcut would be running &lt;code&gt;vim -d h1 h2&lt;/code&gt; instead (or its alias, &lt;code&gt;vimdiff h1 h2&lt;/code&gt;) which applies &lt;code&gt;:difft&lt;/code&gt; to all windows. Alternatively, load just h1 with &lt;code&gt;vim h1&lt;/code&gt; and then &lt;code&gt;:diffsplit h2&lt;/code&gt;. Remember that fundamentally these commands just load files into windows and set the diff mode.&lt;/p&gt;
&lt;p&gt;With these basics in mind, let’s learn to use Vim as a three-way mergetool for git. First configure git:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;8&quot;&gt;
&lt;pre class=&quot;sourceCode bash&quot;&gt;
&lt;code class=&quot;sourceCode bash&quot;&gt;&lt;span class=&quot;fu&quot;&gt;git&lt;/span&gt; config merge.tool vimdiff
&lt;span class=&quot;fu&quot;&gt;git&lt;/span&gt; config merge.conflictstyle diff3
&lt;span class=&quot;fu&quot;&gt;git&lt;/span&gt; config mergetool.prompt false&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now, when you hit a merge conflict, run &lt;code&gt;git mergetool&lt;/code&gt;. It will bring Vim up with four windows. This part looks scary, and is where I used to flail around and often quit in frustration.&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;+-----------+------------+------------+
|           |            |            |
|           |            |            |
|   LOCAL   |    BASE    |   REMOTE   |
+-----------+------------+------------+
|                                     |
|                                     |
|             (edit me)               |
+-------------------------------------+&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Here’s the trick: do all the editing in the bottom window. The top three windows simply provide context about how the file differs on either side of the merge (local / remote), and how it looked prior to either side doing any work (base).&lt;/p&gt;
&lt;p&gt;Move within the bottom window with &lt;code&gt;]c&lt;/code&gt;, and for each chunk choose whether to replace it with text from local, base, or remote – or whether to write in your own change which might combine parts from several.&lt;/p&gt;
&lt;p&gt;To make it easier to pull changes from the top windows, I set some mappings in my vimrc:&lt;/p&gt;
&lt;pre class=&quot;viml&quot;&gt;
&lt;code&gt;&quot; shortcuts for 3-way merge
map &amp;lt;Leader&amp;gt;1 :diffget LOCAL&amp;lt;CR&amp;gt;
map &amp;lt;Leader&amp;gt;2 :diffget BASE&amp;lt;CR&amp;gt;
map &amp;lt;Leader&amp;gt;3 :diffget REMOTE&amp;lt;CR&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;We’ve already seen &lt;code&gt;:diffget&lt;/code&gt;, and here our bindings pass an argument of the buffer name that identifies which window to pull from.&lt;/p&gt;
&lt;p&gt;Once done with the merge, run &lt;code&gt;:wqa&lt;/code&gt; to save all the windows and quit. If you want to abandon the merge instead, run &lt;code&gt;:cq&lt;/code&gt; to abort all changes and return an error code to the shell. This will signal to git that it should ignore your changes.&lt;/p&gt;
&lt;p&gt;Diffget can also accept a range. If you want to pull in &lt;em&gt;all&lt;/em&gt; changes from one of the top windows rather than working chunk by chunk, just run &lt;code&gt;:1,$+1diffget {LOCAL,BASE,REMOTE}&lt;/code&gt;. The “+1” is required because there can be deleted lines “below” the last line of a buffer.&lt;/p&gt;
&lt;p&gt;The three-way marge is fairly easy after all. There’s no need for plugins like Fugitive, at least for presenting a simplified view for resolving merge conflicts.&lt;/p&gt;
&lt;p&gt;Finally, as of patch 8.1.0360, Vim is bundled with the xdiff library and can create diffs internally. This can be more efficient than shelling out to an external program, and allows for a choice of diff algorithms. The “&lt;a href=&quot;https://bramcohen.livejournal.com/73318.html&quot;&gt;patience&lt;/a&gt;” algorithm often produces more human-readable output than the default, “myers.” Set it in your .vimrc like so:&lt;/p&gt;
&lt;pre class=&quot;viml&quot;&gt;
&lt;code&gt;if has(&quot;patch-8.1.0360&quot;)
        set diffopt+=internal,algorithm:patience
endif&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;buffer-io&quot;&gt;Buffer I/O&lt;/h3&gt;
&lt;p&gt;See if this sounds familiar: you’re editing a buffer and want to save it as a new file, so you &lt;code&gt;:w newname&lt;/code&gt;. After editing some more, you &lt;code&gt;:w&lt;/code&gt;, but it writes over the original file. What you want for this scenario is &lt;code&gt;:saveas newname&lt;/code&gt;, which does the write but also changes the filename of the buffer for future writes. Alternately, the &lt;code&gt;:file newname&lt;/code&gt; command will change the filename without doing a write.&lt;/p&gt;
&lt;p&gt;It also pays off to learn more about the read and write commands. Becuase r and w are Ex commands, they work with ranges. Here are some variations you might not know about:&lt;/p&gt;
&lt;table class=&quot;table&quot;&gt;&lt;tbody readability=&quot;13.5&quot;&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;:w &amp;gt;&amp;gt;foo&lt;/td&gt;
&lt;td&gt;append the whole buffer to a file&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;:.w &amp;gt;&amp;gt;foo&lt;/td&gt;
&lt;td&gt;append current line to a file&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;:$r foo&lt;/td&gt;
&lt;td&gt;read foo into the end of the buffer&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td&gt;:0r foo&lt;/td&gt;
&lt;td&gt;read foo into the start, moving existing lines down&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;:.,$w foo&lt;/td&gt;
&lt;td&gt;write current line and below to a file&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;:r !ls&lt;/td&gt;
&lt;td&gt;read ls output into cursor position&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;:w !wc&lt;/td&gt;
&lt;td&gt;send buffer to wc and display output&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td&gt;:.!tr ‘A-Za-z’ ‘N-ZA-Mn-za-m’&lt;/td&gt;
&lt;td&gt;apply ROT-13 to current line&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;:w|so %&lt;/td&gt;
&lt;td&gt;chain commands: write and then source buffer&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td&gt;:e!&lt;/td&gt;
&lt;td&gt;throw away unsaved changes, reload buffer&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td&gt;:hide edit foo&lt;/td&gt;
&lt;td&gt;edit foo, hide current buffer if dirty&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Useless fun fact: we piped a line to &lt;code&gt;tr&lt;/code&gt; in an example above to apply a ROT-13 cypher, but Vim has that functionality built in with the the &lt;code&gt;g?&lt;/code&gt; command. Apply it to a motion, like &lt;code&gt;g?$&lt;/code&gt;.&lt;/p&gt;
&lt;h3 id=&quot;filetypes&quot;&gt;Filetypes&lt;/h3&gt;
&lt;p&gt;Filetypes are a way to change settings based on the type of file detected in a buffer. They don’t need to be automatically detected though, we can manually enable them to interesting effect. An example is doing hex editing. Any file can be viewed as raw hexadecimal values. GitHub user the9ball &lt;a href=&quot;https://github.com/the9ball/.vim/blob/7138beef974b3510f0dc92b7629ad236ddd39ec9/ftplugin/xxd.vim&quot;&gt;created&lt;/a&gt; a clever ftplugin script that filters a buffer back and forth through the xxd utility for hex editing.&lt;/p&gt;
&lt;p&gt;The xxd utility was bundled as part of Vim 5 for convenience. The Vim todo.txt file mentions they want to make it more seamless to edit binary files, but xxd can take us pretty far.&lt;/p&gt;
&lt;p&gt;Here is code you can put in &lt;code&gt;~/.vim/ftplugin/xxd.vim&lt;/code&gt;. Its presence in ftplugin means Vim will execute the script when filetype (aka “ft”) becomes xxd. I added some basic comments to the script.&lt;/p&gt;
&lt;pre class=&quot;viml&quot;&gt;
&lt;code&gt;&quot; without the xxd command this is all pointless
if !executable('xxd')
        finish
endif

&quot; don't insert a newline in the final line if it
&quot; doesn't already exist, and don't insert linebreaks
setlocal binary noendofline
silent %!xxd -g 1
%s/\r$//e

&quot; put the autocmds into a group for easy removal later
augroup ftplugin-xxd
        &quot; erase any existing autocmds on buffer
        autocmd! * &amp;lt;buffer&amp;gt;

        &quot; before writing, translate back to binary
        autocmd BufWritePre &amp;lt;buffer&amp;gt; let b:xxd_cursor = getpos('.')
        autocmd BufWritePre &amp;lt;buffer&amp;gt; silent %!xxd -r

        &quot; after writing, restore hex view and mark unmodified
        autocmd BufWritePost &amp;lt;buffer&amp;gt; silent %!xxd -g 1
        autocmd BufWritePost &amp;lt;buffer&amp;gt; %s/\r$//e
        autocmd BufWritePost &amp;lt;buffer&amp;gt; setlocal nomodified
        autocmd BufWritePost &amp;lt;buffer&amp;gt; call setpos('.', b:xxd_cursor) | unlet b:xxd_cursor

        &quot; update text column after changing hex values
        autocmd TextChanged,InsertLeave &amp;lt;buffer&amp;gt; let b:xxd_cursor = getpos('.')
        autocmd TextChanged,InsertLeave &amp;lt;buffer&amp;gt; silent %!xxd -r
        autocmd TextChanged,InsertLeave &amp;lt;buffer&amp;gt; silent %!xxd -g 1
        autocmd TextChanged,InsertLeave &amp;lt;buffer&amp;gt; call setpos('.', b:xxd_cursor) | unlet b:xxd_cursor
augroup END

&quot; when filetype is set to no longer be &quot;xxd,&quot; put the binary
&quot; and endofline settings back to what they were before, remove
&quot; the autocmds, and replace buffer with its binary value
let b:undo_ftplugin = 'setl bin&amp;lt; eol&amp;lt; | execute &quot;au! ftplugin-xxd * &amp;lt;buffer&amp;gt;&quot; | execute &quot;silent %!xxd -r&quot;'&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Try opening a file, then running &lt;code&gt;:set ft&lt;/code&gt;. Note what type it is. Then&lt;code&gt;:set ft=xxd&lt;/code&gt;. Vim will turn into a hex editor. To restore your view, &lt;code&gt;:set ft=foo&lt;/code&gt; where foo was the original type. Note that in hex view you even get syntax highlighting because &lt;code&gt;$VIMRUNTIME/syntax/xxd.vim&lt;/code&gt; ships with Vim by default.&lt;/p&gt;
&lt;p&gt;Notice the nice use of “b:undo_ftplugin” which is an opportunity for filetypes to clean up after themselves when the user or ftdetect mechanism switches away from them to another filetype. (The example above could use a little work because if you &lt;code&gt;:set ft=xxd&lt;/code&gt; then set it back, the buffer is marked as modified even if you never changed anything.)&lt;/p&gt;
&lt;p&gt;Ftplugins also allow you to refine an existing filetype. For instance, Vim already has some good defaults for C programming in &lt;code&gt;$VIMRUNTIME/ftplugin/c.vim&lt;/code&gt;. I put these extra options in &lt;code&gt;~/.vim/after/ftplugin/c.vim&lt;/code&gt; to add my own settings on top:&lt;/p&gt;
&lt;pre class=&quot;viml&quot;&gt;
&lt;code&gt;&quot; the smartest indent engine for C
setlocal cindent
&quot; my preferred &quot;Allman&quot; style indentation
setlocal cino=&quot;Ls,:0,l1,t0,(s,U1,W4&quot;

&quot; for quickfix errorformat
compiler clang
&quot; shows long build messages better
setlocal ch=2

&quot; auto-create folds per grammar
setlocal foldmethod=syntax
setlocal foldlevel=10

&quot; local project headers
setlocal path=.,,*/include/**3,./*/include/**3
&quot; basic system headers
setlocal path+=/usr/include

setlocal tags=./tags,tags;~
&quot;                      ^ in working dir, or parents
&quot;                ^ sibling of open file

&quot; the default is menu,preview but the preview window is annoying
setlocal completeopt=menu

iabbrev #i #include
iabbrev #d #define
iabbrev main() int main(int argc, char **argv)

&quot; add #include guard
iabbrev #g _&amp;lt;c-r&amp;gt;=expand(&quot;%:t:r&quot;)&amp;lt;cr&amp;gt;&amp;lt;esc&amp;gt;VgUV:s/[^A-Z]/_/g&amp;lt;cr&amp;gt;A_H&amp;lt;esc&amp;gt;yypki#ifndef &amp;lt;esc&amp;gt;j0i#define &amp;lt;esc&amp;gt;o&amp;lt;cr&amp;gt;&amp;lt;cr&amp;gt;#endif&amp;lt;esc&amp;gt;2ki&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Notice how the script uses “setlocal” rather than “set.” This applies the changes to just the current buffer rather than the whole Vim instance.&lt;/p&gt;
&lt;p&gt;This script also enables some light abbreviations. Like I can type &lt;code&gt;#g&lt;/code&gt; and press enter and it adds an include guard with the current filename:&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;sourceCode c&quot;&gt;
&lt;code class=&quot;sourceCode c&quot;&gt;&lt;span class=&quot;pp&quot;&gt;#ifndef _FILENAME_H&lt;/span&gt;
&lt;span class=&quot;pp&quot;&gt;#define _FILENAME_H&lt;/span&gt;

&lt;span class=&quot;co&quot;&gt;/* &amp;lt;-- cursor here */&lt;/span&gt;

&lt;span class=&quot;pp&quot;&gt;#endif&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You can also mix filetypes by using a dot (“.”). Here is one application. Different projects have different coding conventions, so you can combine your default C settings with those for a particular project. The OpenBSD source code follows the &lt;a href=&quot;https://man.openbsd.org/style.9&quot;&gt;style(9)&lt;/a&gt; format, so let’s make a special openbsd filetype. Combine the two filetypes with &lt;code&gt;:set ft=c.openbsd&lt;/code&gt; on relevant files.&lt;/p&gt;
&lt;p&gt;To detect the openbsd filetype we can look at the &lt;em&gt;contents&lt;/em&gt; of buffers rather than just their extensions or locations on disk. The telltale sign is that C files in the &lt;a href=&quot;https://cvsweb.openbsd.org/cgi-bin/cvsweb/src/&quot;&gt;OpenBSD source&lt;/a&gt; contain &lt;code&gt;/* $OpenBSD:&lt;/code&gt; in the first line.&lt;/p&gt;
&lt;p&gt;To detect them, create &lt;code&gt;~/.vim/after/ftdetect/openbsd.vim&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&quot;viml&quot;&gt;
&lt;code&gt;augroup filetypedetect
        au BufRead,BufNewFile *.[ch]
                \  if getline(1) =~ 'OpenBSD;'
                \|   setl ft=c.openbsd
                \| endif
augroup END&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;The &lt;a href=&quot;https://cvsweb.openbsd.org/cgi-bin/cvsweb/ports/editors/vim/#dirlist&quot;&gt;Vim port&lt;/a&gt; for OpenBSD already includes a special syntax file for this filetype: &lt;code&gt;/usr/local/share/vim/vimfiles/syntax/openbsd.vim&lt;/code&gt;. If you recall, the &lt;code&gt;/usr/local/share/vim/vimfiles&lt;/code&gt; directory is in the runtimepath and is set aside for files from the system administrator. The provided openbsd.vim script includes a function:&lt;/p&gt;
&lt;pre class=&quot;viml&quot;&gt;
&lt;code&gt;function! OpenBSD_Style()
        setlocal cindent
        setlocal cinoptions=(4200,u4200,+0.5s,*500,:0,t0,U4200
        setlocal indentexpr=IgnoreParenIndent()
        setlocal indentkeys=0{,0},0),:,0#,!^F,o,O,e
        setlocal noexpandtab
        setlocal shiftwidth=8
        setlocal tabstop=8
        setlocal textwidth=80
endfun&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;We simply need to call the function at the appropriate time. Create &lt;code&gt;~/.vim/after/ftplugin/openbsd.vim&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&quot;viml&quot;&gt;
&lt;code&gt;call OpenBSD_Style()&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Now opening any C or header file with the characteristic comment at the top will be recognized as type c.openbsd and will use indenting options that conform with the style(9) man page.&lt;/p&gt;
&lt;h3 id=&quot;dont-forget-the-mouse&quot;&gt;Don’t forget the mouse&lt;/h3&gt;
&lt;p&gt;This is a friendly reminder that despite our command-line machismo, the mouse is in fact supported in Vim, and can do some things more easily than the keyboard. Mouse events work even over SSH thanks to xterm turning mouse events into stdin &lt;a href=&quot;https://invisible-island.net/xterm/ctlseqs/ctlseqs.html#h2-Mouse-Tracking&quot;&gt;escape codes&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;To enable mouse support, set &lt;code&gt;mouse=n&lt;/code&gt;. Many people use &lt;code&gt;mouse=a&lt;/code&gt; to make it work in all modes, but I prefer to enable it only in normal mode. This avoids creating visual selections when I click links with a keyboard modifier to open them in my browser.&lt;/p&gt;
&lt;p&gt;Here are things the mouse can do:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Open or close folds (when &lt;code&gt;foldcolumn&lt;/code&gt; &amp;gt; 0).&lt;/li&gt;
&lt;li&gt;Select tabs (beats gt gt gt…)&lt;/li&gt;
&lt;li&gt;Click to complete a motion, like d&amp;lt;click!&amp;gt;. Similar to the easymotion plugin but without any plugin.&lt;/li&gt;
&lt;li&gt;Jump to help topics with double click.&lt;/li&gt;
&lt;li&gt;Drag the status line at the bottom to change cmdheight.&lt;/li&gt;
&lt;li&gt;Drag edge of window to resize.&lt;/li&gt;
&lt;li&gt;Scroll wheel.&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;misc-editing&quot;&gt;Misc editing&lt;/h3&gt;
&lt;p&gt;This section could be enormous, but I’ll stick to a few tricks I learned. The first one that blew me away was &lt;code&gt;:set virtualedit=all&lt;/code&gt;. It allows you to move the cursor anywhere in the window. If you enter characters or insert a visual block, Vim will add whatever spaces are required to the left of the inserted characters to keep them in place. Virtual edit mode makes it simple to edit tabular data. Turn it off with &lt;code&gt;:set virtualedit=&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Next are some movement commands. I used to rely a lot on &lt;code&gt;}&lt;/code&gt; to jump by paragraphs, and just muscle my way down the page. However the &lt;code&gt;]&lt;/code&gt; character makes more precise motions: by function &lt;code&gt;]]&lt;/code&gt;, scope &lt;code&gt;]}&lt;/code&gt;, paren ‘])’, comment &lt;code&gt;]/&lt;/code&gt;, diff block &lt;code&gt;]c&lt;/code&gt;. This series is why the quickfix mapping &lt;code&gt;]q&lt;/code&gt; mentioned earlier fits the pattern so well.&lt;/p&gt;
&lt;p&gt;For big jumps I used to try things like &lt;code&gt;1000j&lt;/code&gt;, but in normal mode you can actually just type a percentage and Vim will go there, like &lt;code&gt;50%&lt;/code&gt;. Speaking of scroll percentage, you can see it at any time with CTRL-G. Thus I now do &lt;code&gt;:set noruler&lt;/code&gt; and ask to see the info as needed. It’s less cluttered. Kind of the opposite of the trend of colorful patched font powerlines.&lt;/p&gt;
&lt;p&gt;After jumping around between tags, files, or within a file, there are some commands to get your bearings. Try &lt;code&gt;:ls&lt;/code&gt;, &lt;code&gt;:tags&lt;/code&gt;, &lt;code&gt;:jumps&lt;/code&gt;, and &lt;code&gt;:marks&lt;/code&gt;. Jumping through tags actually creates a stack, and you can press CTRL-T to pop one back. I used to always press CTRL-O to back out of jumps, but it is not as direct as popping the tag stack.&lt;/p&gt;
&lt;p&gt;In a project directory that has been indexed with ctags, you can open the editor directly to a tag with &lt;code&gt;-t&lt;/code&gt;, like &lt;code&gt;vim -t main&lt;/code&gt;. To find tags files more flexibly, set the &lt;code&gt;tags&lt;/code&gt; configuration variable. Note the semicolon in the example below that allows Vim to search the current directory &lt;em&gt;upward&lt;/em&gt; to the home directory. This way you could have a more general system tags file outside the project folder.&lt;/p&gt;
&lt;pre class=&quot;viml&quot;&gt;
&lt;code&gt;set tags=./tags,**5/tags,tags;~
&quot;                          ^ in working dir, or parents
&quot;                   ^ in any subfolder of working dir
&quot;           ^ sibling of open file&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;There are some buffer tricks too. Switching to a buffer with &lt;code&gt;:bu&lt;/code&gt; can take a fragment of the buffer name, not just a number. Sometimes it’s harder to memorize those numbers than remember the name of a source file. You can navigate buffers with marks too. If you use a capital letter as the name of a mark, you can jump to it across buffers. You could set a mark H in a header, C in a source file, and M in a Makefile to go from one buffer to another.&lt;/p&gt;
&lt;p&gt;Do you ever get mad after yanking a word, deleting a word somewhere else, trying paste the first word in, and then discovering your original yank is overwritten? The Vim registers are underappreciated for this. Inspect their contents with &lt;code&gt;:reg&lt;/code&gt;. As you yank text, previous yanks are rotated into the registers &lt;code&gt;&quot;0&lt;/code&gt; - &lt;code&gt;&quot;9&lt;/code&gt;. So &lt;code&gt;&quot;0p&lt;/code&gt; pastes the next-to-last yank/deletion. The special registers &lt;code&gt;&quot;+&lt;/code&gt; and &lt;code&gt;&quot;*&lt;/code&gt; can copy/paste from/to the system clipboard. They usually mean the same thing, except in some X11 setups that distinguish primary and secondary selection.&lt;/p&gt;
&lt;p&gt;Another handy hidden feature is the command line window. It it’s a buffer that contains your previous commands and searches. Bring it up with &lt;code&gt;q:&lt;/code&gt; or &lt;code&gt;q/&lt;/code&gt;. Once inside you can move to any line and press enter to run it. However you can also edit any of the lines before pressing enter. Your changes won’t affect the line (the new command will merely be added to the bottom of the list).&lt;/p&gt;
&lt;p&gt;This article could go on and on, so I’m going to call it here. For more great topics, see these help sections: views-sessions, viminfo, TOhtml, ins-completion, cmdline-completion, multi-repeat, scroll-cursor, text-objects, grep, netrw-contents.&lt;/p&gt;
&lt;div class=&quot;figure&quot;&gt;&lt;img src=&quot;https://begriffs.com/images/vim-logo.gif&quot; alt=&quot;vim logo&quot;/&gt;&lt;p class=&quot;caption&quot;&gt;vim logo&lt;/p&gt;
&lt;/div&gt;
</description>
<pubDate>Fri, 19 Jul 2019 18:58:58 +0000</pubDate>
<dc:creator>begriffs</dc:creator>
<og:title>History and effective use of Vim</og:title>
<og:image>https://begriffs.com/images/vim-logo.gif</og:image>
<og:description>Great features are in store for those who truly learn the editor</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://begriffs.com/posts/2019-07-19-history-use-vim.html</dc:identifier>
</item>
<item>
<title>Dungeon Generation in Diablo 1</title>
<link>https://www.boristhebrave.com/2019/07/14/dungeon-generation-in-diablo-1/</link>
<guid isPermaLink="true" >https://www.boristhebrave.com/2019/07/14/dungeon-generation-in-diablo-1/</guid>
<description>&lt;div class=&quot;wp-block-jetpack-markdown&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Diablo_(video_game)&quot;&gt;Diablo 1&lt;/a&gt; is a classic 1996 hack and slash rogue-like. It was one of the first popular attempts at bringing roguelikes to the masses, from the niche ascii art. It’s spun a host of sequels, and imitators. It’s known for a dark, moody atmosphere that intensifies as the player descends into the dungeon beneath the town of Tristram. It was one of the first games I played with procedurally generated maps, and it blew me away that generating such convincing areas was even possible.&lt;/p&gt;
&lt;p&gt;I recently discovered that thanks to the discovery of various debug symbol files accidentally left lying around, several fans took it upon themselves to &lt;a href=&quot;https://github.com/diasurgical/devilution&quot;&gt;reverse-engineer the source code&lt;/a&gt; and clean it up into a good guess at what the original game is like. Thus began a week long deep dive into how exactly did lead developer, David Brevik, actually craft these levels. It may have taken away some of the magic of the game, but I learnt lots of techniques I think are applicable to anyone developing a similar game, which I share with you below.&lt;/p&gt;
&lt;/div&gt;
&lt;span id=&quot;more-353&quot;/&gt;
&lt;div class=&quot;wp-block-jetpack-markdown&quot;&gt;
&lt;p&gt;Thanks to David Brevik and the Blizard North team for making such an amazing game, and to &lt;a href=&quot;https://github.com/galaxyhaxz&quot;&gt;galaxyhaxz&lt;/a&gt; and the Devilution team for their amazing work restoring this game into a readable state.&lt;/p&gt;

&lt;p&gt;Diablo is an isometric tile based game. The game consists of 4 stages, each of 4 levels. The stages are &quot;Cathedral&quot;, &quot;Catacombs&quot;, &quot;Caves&quot; and &quot;Hell&quot;. There’s also some fixed levels, like the town of Tristram, which I will not cover here. Diablo has a separate level generation routine for each of the 4 stages, so I’ll first discuss features, and then how each stage works separately.&lt;/p&gt;
&lt;p&gt;I’m only really interested in how the levels are generated. For details on quests, monsters, etc, I can recommend &lt;a href=&quot;http://www.lurkerlounge.com/diablo/jarulf/jarulf162.pdf&quot;&gt;Jarulf’s Guide To Diablo and Hellfire&lt;/a&gt; which discusses these aspects in exhaustive detail.&lt;/p&gt;

&lt;p&gt;Although there’s a separate level generator for every stage, there are some common features they all share.&lt;/p&gt;
&lt;h2&gt;Dungeons and tiles&lt;/h2&gt;
&lt;p&gt;Every level of the game is generated to fill a 40 by 40 grid of tiles. The x-axis corresponds to south east on the map, and the y-axis to south west.&lt;/p&gt;
&lt;p&gt;These tiles are actually only used for level generating purposes. Once the level is created, each tile is subdivided into 4 &quot;dungeon pieces&quot; for rendering.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.boristhebrave.com/wp-content/uploads/2019/07/diablo_tile_to_dpiece.png&quot; alt=&quot;&quot; class=&quot;wp-image-360&quot; srcset=&quot;https://www.boristhebrave.com/wp-content/uploads/2019/07/diablo_tile_to_dpiece.png 423w, https://www.boristhebrave.com/wp-content/uploads/2019/07/diablo_tile_to_dpiece-300x106.png 300w&quot; sizes=&quot;(max-width: 423px) 100vw, 423px&quot;/&gt;&lt;/div&gt;
&lt;div class=&quot;wp-block-jetpack-markdown&quot;&gt;
&lt;p&gt;This more fine grained grid is used for determining what is walkable, and also allows for a more efficient re-use of graphics memory. I’ve written about &lt;a href=&quot;https://www.boristhebrave.com/2013/07/14/tileset-roundup/&quot;&gt;subdividing tile schemes in the past&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This means that a typical diablo map has over a hundred tiles, many of which are subtle variations of another, to account for all possible ways they can connect up. We’ll talk about this more later.&lt;/p&gt;
&lt;p&gt;To my surprise, unlike other games in the series, dungeons maps are not assembled out of pre-authored chunks. Almost everything is done on a per-tile basis with algorithms.&lt;/p&gt;
&lt;h2&gt;Multi stage process&lt;/h2&gt;
&lt;p&gt;Each dungeon routine is split into two stages. The &quot;predungeon generation&quot; doesn’t deal with choice of tiles at all. It just generates a array of which tiles are walkable, where there are doors, and a few other high level details. Then as a second stage, the predungeon is converted to an array of tiles, and further tile aware generation and changes is done afterwards.&lt;/p&gt;
&lt;p&gt;This must have been tremendously convenient as a designer. You can tinker with the floor plan completely independently from choice of tile and stylistic choice. But in many cases the two are somewhat interlinked to give a more coherent feel.&lt;/p&gt;
&lt;p&gt;All the predungeon stages work by starting with an entirely solid level, and recursively setting parts of the level to be floor tile. The details are covered later.&lt;/p&gt;
&lt;h2&gt;Set Pieces&lt;/h2&gt;
&lt;p&gt;Set pieces are pre-authored chunks of level that are simply pasted verbatim into an otherwise randomly generated level. They are used for the majority of the quests in the game. There can only be one set-piece per level, and the choice of positioning is custom to each stage.&lt;/p&gt;
&lt;/div&gt;
&lt;img src=&quot;https://www.boristhebrave.com/wp-content/uploads/2019/07/diablo_ButcherRoom.gif&quot; alt=&quot;&quot; class=&quot;wp-image-365&quot;/&gt;The Butcher’s Den – one of the first set pieces encountered in the game.
&lt;div class=&quot;wp-block-jetpack-markdown&quot;&gt;
&lt;h2&gt;Minisets&lt;/h2&gt;
&lt;p&gt;Minisets are another way that pre-authored content reaches a level. These are small patches, often around 3×3, which are inserted randomly into the dungeon. There’s a simple pattern matching scheme so that they only get put in &quot;valid&quot; positions. They are often coded with additional requirements, e.g. that minisets cannot be placed to near each other, and cannot overlap set pieces and so on. Some minisets always find and replace, some only do so at a fixed probability.&lt;/p&gt;
&lt;p&gt;Minisets are used for a wide variety of purposes in Diablo. They are used for placing larger tile based objects, such as stairways, but they are also for fixing up combinations of tiles that don’t properly connect together and adding some random variation to tiles.&lt;/p&gt;
&lt;h2&gt;Theme Rooms&lt;/h2&gt;
&lt;p&gt;Theme rooms are small spaces enclosed by a wall and a door. They typically have some preset objects randomly in them. For example, libraries always have a book case bracketed by two candles, and some random book stands and monsters. Monster pits have a ton of monsters and a random item, and so on.&lt;/p&gt;
&lt;p&gt;In cathedral levels, the generator already makes appropriate rooms, so they are detected via &lt;a href=&quot;https://en.wikipedia.org/wiki/Flood_fill&quot;&gt;floodfill&lt;/a&gt; and re-purposed. In other stages, open spaces are found and then a rectangle of walls and a door is drawn for the purpose.&lt;/p&gt;
&lt;p&gt;Each theme room type has specific requirements as to size and what stages it generates on.&lt;/p&gt;
&lt;h2&gt;Tile Substitutions&lt;/h2&gt;
&lt;p&gt;Several of the maps have special customization of tiles, but they all share in common that some tiles can be swapped out for equivalent variations. More common tiles (like floors and flat walls) tend to have more variants to break up the monotony. Tile substitutions are set to never be used twice too near each other.&lt;/p&gt;
&lt;h2&gt;Pattern matching and &quot;fixups&quot;&lt;/h2&gt;
&lt;p&gt;As discussed, minisets already work as basic find and replace mechanism to fix faults with the generators. But most stages include several routines to detect and fix more specific problems. I won’t go into specifics here as there are loads of them. Suffice to say that Diablo is pretty buggy and it’s apparent once they got closer to release it was easier to just add detection for specific problems rather than address the underlying issues.&lt;/p&gt;
&lt;p&gt;One common fixup is &quot;lockout&quot;, which detects if it’s not possible to walk across the entire dungeon, and restarts generation if it fails.&lt;/p&gt;
&lt;h2&gt;Quests&lt;/h2&gt;
&lt;p&gt;Most quests are handled by set pieces, but a few have custom logic. For example, &quot;Zhar the Mad&quot; generates in library theme rooms, &quot;Poisoned Water&quot;’s entrance is generated by a miniset, and the &quot;Anvil of Fury&quot; has specific level generation code. I won’t cover the specifics, but the code is littered with specific checks for quests.&lt;/p&gt;

&lt;p&gt;The cathedral is easily the most iconic of the diablo stages. It is defined by its long rows of gothic arches, boxy rooms and providing many choke points via doorways. Let’s delve into how it is constructed.&lt;/p&gt;
&lt;h2&gt;Predungeon&lt;/h2&gt;
&lt;p&gt;The first thing that is done is to draw the spine of this map. It randomly chooses to place up to 3 10×10 rooms in predefined positions along the central x or y axis. A wide corridor is also drawn along the axis to connect the room. If there’s a set piece on this level, it always goes in the center of one of these rooms. These central rooms are also marked as ineligible for adding extra walls too later, so they are always a large open space.&lt;/p&gt;
&lt;p&gt;All other rooms are generated by a recursive &quot;budding&quot; technique in a function called &lt;code&gt;L5roomGen&lt;/code&gt; which is initiated from each of the above rooms, and the choice of axis.&lt;/p&gt;
&lt;h3&gt;&lt;code&gt;L5roomGen Listing&lt;/code&gt;&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;Passed in a rectangle of the initial room to bud off, and a preferred axis.&lt;/li&gt;
&lt;li&gt;1 in 4 chance of switching the preferred axis between X and Y.&lt;/li&gt;
&lt;li&gt;Pick a random size for the new room, either 2, 4 or 6 tiles on each side.&lt;/li&gt;
&lt;li&gt;For each side of the initial room along the selected axis (i.e. SE/NW for X, SW/NE for Y):
&lt;ul&gt;&lt;li&gt;Align the new room rectangle to the center of that edge of the initial room&lt;/li&gt;
&lt;li&gt;Check nothing has been drawn there yet and we haven’t reached the edge of the map. A one tile border is required for walls.&lt;/li&gt;
&lt;li&gt;If the check passes, draw the room in.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;For each room that was drawn, invoke &lt;code&gt;L5roomGen&lt;/code&gt; recursively, passing in the new room, and the opposing axis to the one just used.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;The net effect of this procedure is to start with a few rooms in a large amount of solid tiles, and then repeatedly glue extra rectangles to carve out more walkable space. At this stage, all &quot;rooms&quot; are open on one side, as each new room is placed directly adjacent to the previous room, with no gap for a wall.&lt;/p&gt;
&lt;p&gt;The generator now counts the number of walkable tiles generated. If it doesn’t meet a minimum threshold that increases every level, the dungeon is scrapped and retried.&lt;/p&gt;
&lt;h2&gt;Dungeon&lt;/h2&gt;
&lt;p&gt;So far, the only tiles placed are solid and floor. We need to replace those with actual wall tiles. Diablo uses marching squares for this, which I’ve &lt;a href=&quot;https://www.boristhebrave.com/2018/04/15/marching-cubes-tutorial/&quot;&gt;discussed in a previous article&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;However, it uses an unusual variant. The cathedral tileset includes walls, but they are always at the back edge of the tile. So there’s a tile with a wall on the north-east face, but not one for the south east face. To get walls for the other sides, you have to find a solid tile which has an extra wall extending outside the tile boundary. This sounds weird, but it’s actually very convenient for depth sorting walls.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.boristhebrave.com/content/2019/07/diablo_walls.svg&quot; alt=&quot;&quot;/&gt;&lt;/div&gt;
&lt;p&gt;To deal with this, Diablo skips some walls during marching cubes:&lt;/p&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.boristhebrave.com/content/2019/07/diablo_mc.svg&quot; alt=&quot;&quot; width=&quot;332&quot; height=&quot;731&quot;/&gt;&lt;/div&gt;
&lt;div class=&quot;wp-block-jetpack-markdown&quot;&gt;
&lt;p&gt;The extra walls are added in a later fixup step. I think this simple procedure is one of the most responsible for the cathedral’s &quot;look&quot;. Because opposing walls are attached to solid tiles, if you have two rooms that are separated by one tile of walls, the opposing wall is simply not created. That means that separators between rooms are &quot;thinner&quot; than you could normally get with the resolution marching cubes is done at.&lt;/p&gt;
&lt;p&gt;Once the basic walls are placed, the generator also 4 free standing columns to each of the three central rooms, and a colonnade of arches for the central hallway. This helps the cathedral look more deliberately constructed than the other levels, and helps players orient themselves.&lt;/p&gt;
&lt;p&gt;Then the generator randomly adds dividing walls. Dividing walls always run straight along an axis from one wall to another. They start at corners, which tends to make them neatly divide areas into boxes. 25% of the time the wall is a series of arches, 25% of the time a series of arches with bars covering the entry, and otherwise is a solid wall. For bars and solid walls, a door or arch is randomly added somewhere along the dividing wall to ensure the space is still walkable.&lt;/p&gt;
&lt;p&gt;A floodfill routine identifies potential theme rooms.&lt;/p&gt;
&lt;p&gt;Stairs are placed to connect to other levels. The dungeon is retried if these cannot be placed.&lt;/p&gt;
&lt;p&gt;Then comes a raft of mini sets, fixups and substitutions I’m not going to go into. My favourite is the PANCREAS1 miniset, which has a 1% chance of placing a chunk of bloody flesh on a floor tile. Finally 5-10 lamps objects are dotted around to give some decoration.&lt;/p&gt;

&lt;p&gt;Whereas the Cathedral feels like a designed building, the Catacombs has a much more haphazard feel. It’s characterized by squarish rooms connected to each other via mazy winding corridors. It has wide openings instead of doors in many places, increasing the chance the player will be mobbed by many enemies.&lt;/p&gt;
&lt;p&gt;The catacombs is also where the generation algorithm is most advanced. I suspect time pressures caused simpler approaches to be taken for later stages.&lt;/p&gt;
&lt;h2&gt;Predungeon&lt;/h2&gt;
&lt;p&gt;The predungeon routine for catacombs is actually somewhat unique. The other stages have a simple boolean indicating if there is floor or not (plus a bitset for additional details). The catacombs stores its predungeon in an ascii map, much like the classic roguelikes. That’s not too much of a surprise considering &lt;a href=&quot;http://www.rpgfan.com/features/David_Brevik_Interview/index.html&quot;&gt;David Brevik explicitly took inspiration for Diablo from Angband&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The main room generation is a recursive algorithm again, this time recursive subdivision. The function &lt;code&gt;CreateRoom&lt;/code&gt; is called with the entire 40×40 dungeon area, with a 1 tile border removed.&lt;/p&gt;
&lt;h3&gt;&lt;code&gt;CreateRoom Listing&lt;/code&gt;&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;CreateRoom&lt;/code&gt; is passed a rectangle which is the area it is meant generate rooms inside. It’s also passed details about the originating room (initially null)&lt;/li&gt;
&lt;li&gt;If the area is too narrow, exit.&lt;/li&gt;
&lt;li&gt;Pick a random size for the room between 4 and 9 tiles each side, respecting the max size of the area to put the room in.&lt;/li&gt;
&lt;li&gt;Pick a random position for the room in the area.&lt;/li&gt;
&lt;li&gt;Draw the room into the ascii map. The drawing uses &lt;code&gt;'.'&lt;/code&gt; for floor tiles, &lt;code&gt;'#'&lt;/code&gt; for a surrounding wall, and &lt;code&gt;'A'&lt;/code&gt;, &lt;code&gt;'B'&lt;/code&gt;, &lt;code&gt;'C'&lt;/code&gt; and &lt;code&gt;'E'&lt;/code&gt; to mark the 4 corners.&lt;/li&gt;
&lt;li&gt;If there is an originating room:
&lt;ul&gt;&lt;li&gt;Pick a random tile on the closest sides of the originating and new room.&lt;/li&gt;
&lt;li&gt;Record that information in a hallway list to be used later.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Cut the remaining parts of the area excluding this room into 4 rectangles.&lt;/li&gt;
&lt;li&gt;For each rectangle, shrink the size by two tiles to ensure space between rooms, then recursively call &lt;code&gt;CreateRoom&lt;/code&gt; with that rect as the area, and the created room as the originating room.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;If there’s a set piece it will always be this first room created by CreateRoom, and it’ll be forced to a large enough size to fit the set piece.&lt;/p&gt;
&lt;p&gt;After calling &lt;code&gt;CreateRoom&lt;/code&gt;, there will be an ascii array something like the following (thanks to &lt;a href=&quot;https://github.com/nomdenom&quot;&gt;nomdenom&lt;/a&gt; for extracting this):&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-text&quot;&gt;                                         
                                         
                                         
                                         
                                 A##B   
                                 #..#    
         A####B                  #..#    
         #....#                  #..#    
         #....#                  C##E    
         #....#                          
         C####E                 A#####B  
                                #.....#  
                                #.....#  
          A########B            #.....#  
          #........#            #.....#  
          #........#            C#####E  
          #........#   A#B               
          #........#   #.#               
          #........#   #.#               
          #........#   #.#               
          #........#   #.#               
          #........#   #.#               
          C########E   #.#               
                       #.#        A#B    
                       C#E        #.#    
                A####B            #.#    
                #....#            #.#    
                #....#            #.#    
                #....#            #.#    
                C####E            #.#    
                                  #.#    
                       A#####B    C#E    
                       #.....#           
                 A###B #.....#           
                 #...# #.....#           
                 C###E #.....#           
                       C#####E           
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;In this case, the bottom most room was the &quot;root&quot; room created initially.&lt;/p&gt;
&lt;p&gt;Then the hallways information is used. A line is drawn between each recorded pair of points. When it intersects a wall, a &lt;code&gt;'D'&lt;/code&gt; is written, and when it intersects a solid tile &lt;code&gt;','&lt;/code&gt; is used. Hallways are randomly of width 1, 2 or 3. The corner tiles are used to assist navigation.&lt;/p&gt;
&lt;p&gt;Doors are skipped if they would be adjacent to another door and hallways can overlap, helps obfuscate the simplicity of the generator..&lt;/p&gt;
&lt;p&gt;After all halls are written, the ascii is cleaned up. Corner tiles become wall tiles, and all &lt;code&gt;' '&lt;/code&gt; tiles adjacent to a &lt;code&gt;','&lt;/code&gt; also become walls. Finally, &lt;code&gt;','&lt;/code&gt; is replaced with &lt;code&gt;'.'&lt;/code&gt;. That leaves a dungeon plan like the following.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-text&quot;&gt;                                         
                                         
                                         
                                         
                                 ####    
                                 #..#    
         ######                  #..#    
         #....#                  #..#    
         #....#                  #D##    
         #....#                  #.#     
         #D####                 ##D####  
         #..#                   #.....#  
         #..#                 ###.....#  
         ##D########          #.D.....#  
          #........#          #.#.....#  
          #........# ###      #.##D####  
          #........# #.###    #.##...#   
          #........###.D.#    #.##...#   
          #........##..#.#    #.##...#   
          #........##..#.#    #.##...#   
          #........##..#.#    #.##...#   
          #........##..#.#    #.##...#   
          ###D#######..#.#    #.##...#   
            #.......#..#.#    #.###D##   
            ###.....#..###    #.# #.#    
            #######D##.#      #.# #.#    
                #....#.#      #.# #.#    
                #....D.#      #.# #.#    
                #....######   #.# #.#    
               ##D####....##  #.# #.#    
               #...........#  #.# #.#    
               ####....###D####.# ###    
                  ######.....##.#        
                 #####.D.....##.#        
                 #...D.#.....D..#        
                 #####.#.....####        
                     #########           
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;As you can see, this routine can leave quite a lot of empty space on the map. Hence the next thing the generator does is &quot;fill voids&quot;. This looks for any contiguous stretch of wall that it can glue extra rectangles of floor to. The rectangles much be at least 5×5 and at most 12×14.&lt;/p&gt;
&lt;p&gt;Fill voids continues until there are at least 700 tiles, or the retry threshold is reached. If it doesn’t get to 700 then the dungeon is restarted from scratch.&lt;/p&gt;
&lt;p&gt;That gives us a the final predungeon seen below.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-text&quot;&gt;   ##########                            
   #........# ###########                
   #........# #.........#                
   #........# #.........#                
   #........# #.........#        ####    
   #........# #.........#        #..#    
   #######..###.........#        #..#    
         #..............#        #..#    
         #..............#        #D##    
         #..............#        #.#     
         #D####.........#       ##D####  
         #..# ###########       #.....#  
         #..#                 ###.....#  
         ##D########          #.D.....#  
          #........#          #.#.....#  
   ########........# ###      #.##D####  
   #...............# #.###    #.##...#   
   #...............###.D.#    #.##...#   
   #...............##..#.#    #.##...#   
   #...............##..#.#    #.##...#   
   #...............##..#.#    #.##...#   
   #...............##..#.#    #.##...#   
   #......###D#######..#.#    #.##...#   
   #......# #.......#..#.#    #.###D##   
   #......# ###.....#..###    #.# #.#    
   #......#########D##.#      #.# #.#    
   #.........#  #....#.#      #.# #.#    
   #.........#  #....D.#      #.# #.#    
   #.........#  #....######   #.# #.#    
   #.........# ##D####....##  #.# #.#    
   #.........# #...........#  #.# #.#    
   #.........# ####....###D####.# ###    
   #.........#    ######.....##.#        
   #.........#   #####.D.....##.#        
   #.........#   #...D.#.....D..#        
   ###########   #####.#.....####        
                     #########       
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2&gt;Dungeon&lt;/h2&gt;
&lt;p&gt;Again, catacombs departs from the standard level formula. Rather than use marching squares (which assigns tiles based on 2×2 rects in the predungeon), there is a custom pattern matching routine that matches looks at each 3×3 rect in the predungeon to decide the corresponding tile in the dungeon. The patterns specify whether each predungeon tile should be wall, floor, door or solid, or some combination of the above. I’m not sure why.&lt;/p&gt;
&lt;p&gt;The rest of the function should sound familiar if you’ve read the cathedral. Up/down staircases are placed, the dungeon is checked to see it’s fully navigable, and various fixes are run. Theme rooms are inserted as described in the Common Section, then a bunch of minisets and substitutions.&lt;/p&gt;
&lt;p&gt;I think the minisets fiddle around with doorways, but they’re pretty tedious to read without a tool so I didn’t go to far into it.&lt;/p&gt;

&lt;p&gt;The caves stages are filled with wide open spaces and rivers of lava. The walls of the area are rough and wobbly. The only rectilinear components are some wooden planking that is evidently a later addition than the caves themselves.&lt;/p&gt;
&lt;p&gt;This stage is one of the most visually stunning in the game due to the animated lava and as it feels a marked departure from the room-like structures found earlier. I was quite surprised therefore to discover much of the generation is modeled after the cathedral stage, with some clever ideas to make it feel more &quot;cave like&quot;.&lt;/p&gt;
&lt;h2&gt;Predungeon&lt;/h2&gt;
&lt;p&gt;Caves starts with a single random room of size 2×2 somewhere near the center of the map. It then calls the &lt;code&gt;DRLG_L3CreateBlock&lt;/code&gt; routine on each edge of that block.&lt;/p&gt;
&lt;p&gt;When rectangles are drawn in this level, they are not just a normal fill. The interior is always solid, but every tile on the edge has a 50% of being floor, and otherwise is left as solid.&lt;/p&gt;
&lt;h3&gt;&lt;code&gt;DRLG_L3CreateBlock Listing&lt;/code&gt;&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;This function takes a rectangle edge, i.e. a starting point, a direction and a length.&lt;/li&gt;
&lt;li&gt;Choose a new block size to create, between 3-4 on each size.&lt;/li&gt;
&lt;li&gt;Align the new block randomly against the input edge.&lt;/li&gt;
&lt;li&gt;If there’s not space to draw the block, exit.&lt;/li&gt;
&lt;li&gt;Draw the block.&lt;/li&gt;
&lt;li&gt;If a 1 in 4 chance, exit.&lt;/li&gt;
&lt;li&gt;Recursively call &lt;code&gt;DRLG_L3CreateBlock&lt;/code&gt; with the 3 edges of the block other than the one we came in from.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Though the routine is similar to &lt;code&gt;L5roomGen&lt;/code&gt; above, the fact is uses a much smaller block size and draws rough boundaries means it gives a much more organic feel. It also doesn’t include a 1 tile boundary for walls, so unlike the previous generators it can create loops.&lt;/p&gt;
&lt;p&gt;After blocking out the rough shape of the dungeon, the generator applies some erosion routines:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;First it finds 2×2 areas of tiles that two solid tiles diagonally opposite from each other. These formations are often fiddly to deal with when doing marching squares, so one of the solid tiles is replaced with floor, randomly.&lt;/li&gt;
&lt;li&gt;Any solid tiles that are solos, surrounded by 8 floor tiles, are replaced with floor.&lt;/li&gt;
&lt;li&gt;Any long, straight section of walls are randomly roughened up by replacing 50% of them with floor tiles.&lt;/li&gt;
&lt;li&gt;Diagonals are cleaned up a second time.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;All of these routines add more floor tiles, so the map is more open than it was before.&lt;/p&gt;
&lt;p&gt;If there are less than 600 floor tiles, the map is retried.&lt;/p&gt;
&lt;h2&gt;Dungeon&lt;/h2&gt;
&lt;p&gt;The predungeon is converted to tiles via marching squares. Unlike the cathedral and catacombs, the tileset is much more conventional, and includes nearly all combinations needed for marching squares. But it’s missing tiles for diagonally opposing walls – those were cleaned up in the predungeon phase so never come up.&lt;/p&gt;
&lt;p&gt;Next is a bunch of minisets, as usual. There are several minisets that identify a free standing section of wall and replace it with stalagmites and floor, adding to the openness.&lt;/p&gt;
&lt;p&gt;The a pool of lava is added. This is done by looking for a contiguous section of wall by &lt;a href=&quot;https://en.wikipedia.org/wiki/Flood_fill&quot;&gt;floodfill&lt;/a&gt;. If it can find a section of wall / solid tiles that is less than 40 tiles that is completely surrounded by floor tiles, it is replaced with lava. The dungeon is retried if a pool cannot be found.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;wp-block-image&quot;&gt;&lt;img src=&quot;https://www.boristhebrave.com/wp-content/uploads/2019/07/diablo_wall_to_lava.png&quot; alt=&quot;&quot; class=&quot;wp-image-366&quot; srcset=&quot;https://www.boristhebrave.com/wp-content/uploads/2019/07/diablo_wall_to_lava.png 872w, https://www.boristhebrave.com/wp-content/uploads/2019/07/diablo_wall_to_lava-300x75.png 300w, https://www.boristhebrave.com/wp-content/uploads/2019/07/diablo_wall_to_lava-768x192.png 768w&quot; sizes=&quot;(max-width: 872px) 100vw, 872px&quot;/&gt;A 3×3 wall is converted to a lava lake&lt;/div&gt;
&lt;div class=&quot;wp-block-jetpack-markdown&quot;&gt;
&lt;p&gt;Then some rivers of lava are added. The generator takes several attempts at drawing a river that starts at the pool of lava and terminates in a wall. The requirements are that the river never doubles back on itself, must be between 7 and 100 tiles long and there must be a valid spot to place a bridge tile. The bridge tile ensures that the whole map remains traversable. Up to 4 rivers can be added, if space is found.&lt;/p&gt;
&lt;p&gt;Then theme rooms are placed. In this stage, the walls of theme rooms are wooden fencing, which cannot be walked through, but can be seen through. More wooden fencing is involved in two further routines. The first gives wooden cladding to any remaining sections of walls that are long straight segments. The second draws a line of fencing across the map, from one wall to the opposing, then inserts a door. Unlike the cathedral generation, it doesn’t look for corners to start these walls.&lt;/p&gt;

&lt;p&gt;Hell is the final stage of Diablo. The focus at this point is really on the monsters and the level design takes a back seat. It has one of the smallest tile sets in the game, and much of that is used for the oversized staircases and pentagrams. Hell levels tends to be a few square rooms and a symmetric layout.&lt;/p&gt;
&lt;h2&gt;Predungeon&lt;/h2&gt;
&lt;p&gt;The generation of Hell starts with a random room of size 5-6 each side (larger if there is a quest set piece), then applies the same recursive budding used in the cathedral. The generation is restricted to a 20×20 area though.&lt;/p&gt;
&lt;p&gt;A vertical and horizontal corridor extending to the edge of the 20×20 area is added.&lt;/p&gt;
&lt;p&gt;Finally, the predungeon is mirrored vertically and horizontally to get to full size.&lt;/p&gt;
&lt;h2&gt;Dungeon&lt;/h2&gt;
&lt;p&gt;The predungeon is converted to tiles by marching squares again. Then walls are added similarly to the cathedral, and theme rooms, like the catacombs and caves.&lt;/p&gt;

&lt;p&gt;I enjoyed reading this code a lot. Though it’s clearly buggy, the naming conventions are a mess and some things couldn’t be reconstructed into quality source code, it’s also clearly very battle tested code, and brimming with clever ideas.&lt;/p&gt;
&lt;p&gt;Here are some of my key take aways:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;The devil is in the detail – the individual components are not crazy complex, but they combine together to give something that looks great. I imagine the devs just kept plugging away at improving the quality until the levels went from good to amazing. The number of tiles and combinatorial complexity of the tile sets is very high too – you cannot do that without a lot of attention to how things connect up.&lt;/li&gt;
&lt;li&gt;Pattern matching find-and-replace is very powerful, you can do a wide range of effects with it. It fixes buggy generation, adds variability, inserts pre-authored content, handles erosion, you name it!&lt;/li&gt;
&lt;li&gt;Seperation of dungeon generation into a walkability map (predungeon) and tile generation is also very handy, both for design and debugging.&lt;/li&gt;
&lt;li&gt;If you want to give different areas a different feel, writing a separate algorithm is a great way of doing that. A lot of code can be re-used while still creating a very different overall feel.&lt;/li&gt;
&lt;li&gt;When in doubt, glue more rectangles onto the side of things.&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;
</description>
<pubDate>Fri, 19 Jul 2019 17:26:35 +0000</pubDate>
<dc:creator>noad</dc:creator>
<og:type>article</og:type>
<og:title>Dungeon Generation in Diablo 1</og:title>
<og:url>https://www.boristhebrave.com/2019/07/14/dungeon-generation-in-diablo-1/</og:url>
<og:description>Diablo1 is a classic 1996 hack and slash rogue-like. several fans took it upon themselves to reverse-engineer the source code. I began a week long deep dive into how exactly did lead developer, Da…</og:description>
<og:image>https://www.boristhebrave.com/wp-content/uploads/2019/07/Diablo_title.png</og:image>
<dc:language>en-GB</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.boristhebrave.com/2019/07/14/dungeon-generation-in-diablo-1/</dc:identifier>
</item>
</channel>
</rss>