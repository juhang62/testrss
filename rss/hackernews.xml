<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=hnrss.org%2Fnewest%3Fpoints%3D200&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://hnrss.org/newest?points=200" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>Hacker News: Newest</title>
<link>https://news.ycombinator.com/newest</link>
<description>Hacker News RSS</description>
<item>
<title>Visa, Mastercard, Stripe, and eBay exit Facebook’s Libra project</title>
<link>https://www.theverge.com/2019/10/11/20910330/mastercard-stripe-ebay-facebook-libra-association-withdrawal-cryptocurrency</link>
<guid isPermaLink="true" >https://www.theverge.com/2019/10/11/20910330/mastercard-stripe-ebay-facebook-libra-association-withdrawal-cryptocurrency</guid>
<description>&lt;p id=&quot;baqviB&quot;&gt;Visa, Mastercard, eBay, Stripe, and Mercado Pago have all withdrawn from the Libra Association, dealing a major blow to Facebook’s plans for a distributed, global cryptocurrency. The withdrawals were first reported by the &lt;a href=&quot;https://www.ft.com/content/a3e952dc-ec5c-11e9-85f4-d00e5018f061&quot;&gt;&lt;em&gt;Financial Times&lt;/em&gt;&lt;/a&gt; and &lt;a href=&quot;https://twitter.com/TheStalwart/status/1182744674005635079&quot;&gt;&lt;em&gt;Bloomberg&lt;/em&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p id=&quot;TvtcIf&quot;&gt;A Visa spokesperson told The Verge. “Visa has decided not to join the Libra Association at this time,” the spokesperson said. “We will continue to evaluate and our ultimate decision will be determined by a number of factors, including the Association’s ability to fully satisfy all requisite regulatory expectations.”&lt;/p&gt;
&lt;p id=&quot;B6idqw&quot;&gt;The withdrawals leave Libra with no major US payment processor, a serious issue for the fledgling project. They also come just one week after PayPal (eBay’s former subsidiary) &lt;a href=&quot;https://www.theverge.com/2019/10/4/20899310/facebook-libra-paypal-online-currency-payment-system-cryptocurrency&quot;&gt;withdrew from the association&lt;/a&gt;.&lt;/p&gt;
&lt;p id=&quot;8kGIaR&quot;&gt;The first official meeting of the Libra Council is in just three days, scheduled for October 14th in Geneva. That meeting will likely result in more specific commitments from all the members involved, which may have inspired some of the recent defections. Still, the departures leave the project in a precarious place as Libra hopes to move beyond initial criticisms of the project.&lt;/p&gt;
&lt;div class=&quot;c-float-right&quot;&gt;
&lt;aside id=&quot;uKl8Bx&quot;&gt;&lt;q&gt;“We highly respect the vision of the Libra Association”&lt;/q&gt;&lt;/aside&gt;&lt;/div&gt;
&lt;p id=&quot;iTYUWf&quot;&gt;“We highly respect the vision of the Libra Association,” eBay said in a statement. “However, eBay has made the decision to not move forward as a founding member. At this time, we are focused on rolling out eBay’s managed payments experience for our customers.”&lt;/p&gt;
&lt;p id=&quot;dgvjm6&quot;&gt;Stripe gave a similar explanation for its withdrawal. “Stripe is supportive of projects that aim to make online commerce more accessible for people around the world,” the company said. “Libra has this potential. We will follow its progress closely and remain open to working with the Libra Association at a later stage.” Mastercard did not immediately respond to a request for comment.&lt;/p&gt;
&lt;p id=&quot;4kmjrF&quot;&gt;In response, Libra Association policy chief Dante Disparte thanked the companies for their ongoing support of the organization’s mission.&lt;/p&gt;
&lt;p id=&quot;7rZkc0&quot;&gt;“We are focused on moving forward and continuing to build a strong association of some of the world’s leading enterprises, social impact organizations and other stakeholders,” Disparte said. “We look forward to the inaugural Libra Association Council meeting in just 3 days and announcing the initial members of the Libra Association.”&lt;/p&gt;
&lt;p id=&quot;BS0rw3&quot;&gt;The remaining Libra members are facing growing pressure from governments and regulators, many of whom see the project as a threat to the existing financial system. On Wednesday, two Democratic senators &lt;a href=&quot;https://www.theverge.com/2019/10/9/20906348/libra-association-visa-mastercard-stripe-blockchain-us-lawmakers-schatz-sherrod-brown&quot;&gt;urged Visa, Mastercard, and Stripe&lt;/a&gt; to reconsider their involvement with Libra, saying it could have significant regulatory consequences for any payment processor involved.&lt;/p&gt;
&lt;p id=&quot;AYb2XM&quot;&gt;“If you take this on,” the letters read, “you can expect a high level of scrutiny from regulators not only on Libra-related activities, but on all payment activities.”&lt;/p&gt;
&lt;p id=&quot;ey1ZR5&quot;&gt;In response to the news, Libra chief David Marcus, a former president of former Libra Association, PayPal, conceded the news was not “great in the short term,” but “liberating” to “know that you’re on to something when so much pressure builds up.” Marcus also casts the news of Mastercard and Visa’s withdrawal from the project as the two payment giants simply waiting until there’s proper “regulatory clarity” on Libra.&lt;/p&gt;
&lt;div id=&quot;3MwCrR&quot; readability=&quot;7.6144578313253&quot;&gt;
&lt;blockquote class=&quot;twitter-tweet&quot; readability=&quot;8.566265060241&quot;&gt;
&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;I would caution against reading the fate of Libra into this update. Of course, it’s not great news in the short term, but in a way it’s liberating. Stay tuned for more very soon. Change of this magnitude is hard. You know you’re on to something when so much pressure builds up.&lt;/p&gt;
— David Marcus (@davidmarcus) &lt;a href=&quot;https://twitter.com/davidmarcus/status/1182775730427572224?ref_src=twsrc%5Etfw&quot;&gt;October 11, 2019&lt;/a&gt;&lt;/blockquote&gt;
&lt;/div&gt;
&lt;p id=&quot;dT4SXQ&quot;&gt;&lt;em&gt;&lt;strong&gt;Update, October 11, 4:14PM ET:&lt;/strong&gt;&lt;/em&gt; &lt;em&gt;Updated with comment from the Libra Association.&lt;/em&gt;&lt;/p&gt;
&lt;p id=&quot;4ct6UU&quot;&gt;&lt;em&gt;&lt;strong&gt;Update, October 11, 4:34PM ET:&lt;/strong&gt;&lt;/em&gt; &lt;em&gt;Updated with comment from Visa.&lt;/em&gt;&lt;/p&gt;
&lt;p id=&quot;mYzWyA&quot;&gt;&lt;em&gt;&lt;strong&gt;Update, October 11, 5:13PM ET:&lt;/strong&gt;&lt;/em&gt; &lt;em&gt;Updated with news that Mercado Pago is also leaving the association.&lt;/em&gt;&lt;/p&gt;
&lt;p id=&quot;iSpo46&quot;&gt;&lt;em&gt;&lt;strong&gt;Update, October 11, 6:20PM ET:&lt;/strong&gt;&lt;/em&gt; &lt;em&gt;Updated with comment from Libra chief David Marcus.&lt;/em&gt;&lt;/p&gt;
</description>
<pubDate>Fri, 11 Oct 2019 20:08:44 +0000</pubDate>
<dc:creator>gkolli</dc:creator>
<og:description>One week after PayPal left the project</og:description>
<og:image>https://cdn.vox-cdn.com/thumbor/yuDBII8tpczgtZPvToli-BuZJ-E=/0x146:2040x1214/fit-in/1200x630/cdn.vox-cdn.com/uploads/chorus_asset/file/16677181/VRG_ILLO_3512_001.jpg</og:image>
<og:title>Facebook’s Libra Association crumbling as Visa, Mastercard, Stripe, and others exit</og:title>
<og:type>article</og:type>
<og:url>https://www.theverge.com/2019/10/11/20910330/mastercard-stripe-ebay-facebook-libra-association-withdrawal-cryptocurrency</og:url>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.theverge.com/2019/10/11/20910330/mastercard-stripe-ebay-facebook-libra-association-withdrawal-cryptocurrency</dc:identifier>
</item>
<item>
<title>Larry Wall has approved renaming Perl 6 to Raku</title>
<link>https://github.com/perl6/problem-solving/pull/89</link>
<guid isPermaLink="true" >https://github.com/perl6/problem-solving/pull/89</guid>
<description>&lt;p&gt;Here's a quick update with a clarification because the problem-solving document is worded in a way that is not entirely clear (I'll work on fixing that after we merge this). Basically, &lt;a href=&quot;https://github.com/perl6/problem-solving#reviewers&quot;&gt;everyone&lt;/a&gt; has to &lt;a href=&quot;https://github.com/perl6/problem-solving#acceptance&quot;&gt;approve&lt;/a&gt; this PR so that we can merge it, but if someone doesn't leave a github review &lt;a href=&quot;https://github.com/perl6/problem-solving#edge-cases-and-other-notes&quot;&gt;in 14 days&lt;/a&gt;, then their approval won't be blocking the merge.&lt;/p&gt;
&lt;p&gt;Now, some people explicitly abstained, which is totally fine. However:&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;By approving a PR the dev confirms that they reviewed and understood the proposal, and that they are OK with it.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;So, as I see it, clicking &lt;code&gt;Approve&lt;/code&gt; doesn't have to mean that you're fully an advocate of a rename, just that you're fine with the change.&lt;/p&gt;
&lt;p&gt;Anyway, as of right now nobody requested any other changes (meaning that we're heading for the merge!), but some people still didn't leave a github review, which means we'll have to wait a bit.&lt;/p&gt;
&lt;p&gt;To keep it safe, it'll be 14 days since the voting &lt;a href=&quot;https://github.com/perl6/problem-solving/pull/89#issuecomment-536451971&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;/perl6/problem-solving/pull/89/hovercard&quot;&gt;was restarted&lt;/a&gt;. This means that &lt;strong&gt;this PR will be merged on October 14th&lt;/strong&gt; if nobody in the list rejects it or requests more changes.&lt;/p&gt;
&lt;p&gt;Because this is a massive change, I'm pinging the reviewers again.&lt;br/&gt;&lt;a class=&quot;user-mention&quot; data-hovercard-type=&quot;user&quot; data-hovercard-url=&quot;/hovercards?user_id=500&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; href=&quot;https://github.com/JJ&quot;&gt;@JJ&lt;/a&gt; &lt;a class=&quot;user-mention&quot; data-hovercard-type=&quot;user&quot; data-hovercard-url=&quot;/hovercards?user_id=50259&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; href=&quot;https://github.com/jnthn&quot;&gt;@jnthn&lt;/a&gt; &lt;a class=&quot;user-mention&quot; data-hovercard-type=&quot;user&quot; data-hovercard-url=&quot;/hovercards?user_id=2229339&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; href=&quot;https://github.com/lizmat&quot;&gt;@lizmat&lt;/a&gt; &lt;a class=&quot;user-mention&quot; data-hovercard-type=&quot;user&quot; data-hovercard-url=&quot;/hovercards?user_id=167811&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; href=&quot;https://github.com/maettu&quot;&gt;@maettu&lt;/a&gt; &lt;a class=&quot;user-mention&quot; data-hovercard-type=&quot;user&quot; data-hovercard-url=&quot;/hovercards?user_id=20627&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; href=&quot;https://github.com/masak&quot;&gt;@masak&lt;/a&gt; &lt;a class=&quot;user-mention&quot; data-hovercard-type=&quot;user&quot; data-hovercard-url=&quot;/hovercards?user_id=10255441&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; href=&quot;https://github.com/MasterDuke17&quot;&gt;@MasterDuke17&lt;/a&gt; &lt;a class=&quot;user-mention&quot; data-hovercard-type=&quot;user&quot; data-hovercard-url=&quot;/hovercards?user_id=123666&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; href=&quot;https://github.com/rba&quot;&gt;@rba&lt;/a&gt; &lt;a class=&quot;user-mention&quot; data-hovercard-type=&quot;user&quot; data-hovercard-url=&quot;/hovercards?user_id=20145557&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; href=&quot;https://github.com/samcv&quot;&gt;@samcv&lt;/a&gt; &lt;a class=&quot;user-mention&quot; data-hovercard-type=&quot;user&quot; data-hovercard-url=&quot;/hovercards?user_id=25167&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; href=&quot;https://github.com/timo&quot;&gt;@timo&lt;/a&gt; &lt;a class=&quot;user-mention&quot; data-hovercard-type=&quot;user&quot; data-hovercard-url=&quot;/hovercards?user_id=2029968&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; href=&quot;https://github.com/tony-o&quot;&gt;@tony-o&lt;/a&gt; &lt;a class=&quot;user-mention&quot; data-hovercard-type=&quot;user&quot; data-hovercard-url=&quot;/hovercards?user_id=239748&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; href=&quot;https://github.com/ugexe&quot;&gt;@ugexe&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Fri, 11 Oct 2019 19:08:53 +0000</pubDate>
<dc:creator>Ovid</dc:creator>
<og:image>https://avatars0.githubusercontent.com/u/52564?s=400&amp;v=4</og:image>
<og:type>object</og:type>
<og:title>Path to raku by lizmat · Pull Request #89 · perl6/problem-solving</og:title>
<og:url>https://github.com/perl6/problem-solving/pull/89</og:url>
<og:description>The implementation of #81</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://github.com/perl6/problem-solving/pull/89</dc:identifier>
</item>
<item>
<title>Uber Go Style Guide</title>
<link>https://github.com/uber-go/guide/blob/master/style.md</link>
<guid isPermaLink="true" >https://github.com/uber-go/guide/blob/master/style.md</guid>
<description>
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;Styles are the conventions that govern our code. The term style is a bit of a misnomer, since these conventions cover far more than just source file formatting—gofmt handles that for us.&lt;/p&gt;
&lt;p&gt;The goal of this guide is to manage this complexity by describing in detail the Dos and Don'ts of writing Go code at Uber. These rules exist to keep the code base manageable while still allowing engineers to use Go language features productively.&lt;/p&gt;
&lt;p&gt;This guide was originally created by &lt;a href=&quot;https://github.com/prashantv&quot;&gt;Prashant Varanasi&lt;/a&gt; and &lt;a href=&quot;https://github.com/nomis52&quot;&gt;Simon Newton&lt;/a&gt; as a way to bring some colleagues up to speed with using Go. Over the years it has been amended based on feedback from others.&lt;/p&gt;
&lt;p&gt;This documents idiomatic conventions in Go code that we follow at Uber. A lot of these are general guidelines for Go, while others extend upon external resources:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;&lt;a href=&quot;https://golang.org/doc/effective_go.html&quot; rel=&quot;nofollow&quot;&gt;Effective Go&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/golang/go/wiki/CodeReviewComments&quot;&gt;The Go common mistakes guide&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;All code should be error-free when run through &lt;code&gt;golint&lt;/code&gt; and &lt;code&gt;go vet&lt;/code&gt;. We recommend setting up your editor to:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Run &lt;code&gt;goimports&lt;/code&gt; on save&lt;/li&gt;
&lt;li&gt;Run &lt;code&gt;golint&lt;/code&gt; and &lt;code&gt;go vet&lt;/code&gt; to check for errors&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;You can find information in editor support for Go tools here: &lt;a href=&quot;https://github.com/golang/go/wiki/IDEsAndTextEditorPlugins&quot;&gt;https://github.com/golang/go/wiki/IDEsAndTextEditorPlugins&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Guidelines&lt;/h2&gt;
&lt;h3&gt;Pointers to Interfaces&lt;/h3&gt;
&lt;p&gt;You almost never need a pointer to an interface. You should be passing interfaces as values—the underlying data can still be a pointer.&lt;/p&gt;
&lt;p&gt;An interface is two fields:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;A pointer to some type-specific information. You can think of this as &quot;type.&quot;&lt;/li&gt;
&lt;li&gt;Data pointer. If the data stored is a pointer, it’s stored directly. If the data stored is a value, then a pointer to the value is stored.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;If you want interface methods to modify the underlying data, you must use a pointer.&lt;/p&gt;
&lt;h3&gt;Receivers and Interfaces&lt;/h3&gt;
&lt;p&gt;Methods with value receivers can be called on pointers as well as values.&lt;/p&gt;
&lt;p&gt;For example,&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;S&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;struct&lt;/span&gt; {
  data &lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;
}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;S&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Read&lt;/span&gt;&lt;/span&gt;() &lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt; {
  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; s.&lt;span class=&quot;pl-smi&quot;&gt;data&lt;/span&gt;
}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;s&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;S&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Write&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt;) {
  s.&lt;span class=&quot;pl-smi&quot;&gt;data&lt;/span&gt; = str
}

&lt;span class=&quot;pl-smi&quot;&gt;sVals&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;map&lt;/span&gt;[&lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt;]S{&lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;: {&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;A&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;}}

&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; You can only call Read using a value&lt;/span&gt;
sVals[&lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;].&lt;span class=&quot;pl-c1&quot;&gt;Read&lt;/span&gt;()

&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; This will not compile:&lt;/span&gt;
&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt;  sVals[1].Write(&quot;test&quot;)&lt;/span&gt;

&lt;span class=&quot;pl-smi&quot;&gt;sPtrs&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;map&lt;/span&gt;[&lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt;]*S{&lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;: {&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;A&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;}}

&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; You can call both Read and Write using a pointer&lt;/span&gt;
sPtrs[&lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;].&lt;span class=&quot;pl-c1&quot;&gt;Read&lt;/span&gt;()
sPtrs[&lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;].&lt;span class=&quot;pl-c1&quot;&gt;Write&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;test&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Similarly, an interface can be satisfied by a pointer, even if the method has a value receiver.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;F&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;interface&lt;/span&gt; {
  &lt;span class=&quot;pl-c1&quot;&gt;f&lt;/span&gt;()
}

&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;S1&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;struct&lt;/span&gt;{}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;S1&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;f&lt;/span&gt;&lt;/span&gt;() {}

&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;S2&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;struct&lt;/span&gt;{}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;s&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;S2&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;f&lt;/span&gt;&lt;/span&gt;() {}

&lt;span class=&quot;pl-smi&quot;&gt;s1Val&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;S1&lt;/span&gt;{}
&lt;span class=&quot;pl-smi&quot;&gt;s1Ptr&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &amp;amp;S1{}
&lt;span class=&quot;pl-smi&quot;&gt;s2Val&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;S2&lt;/span&gt;{}
&lt;span class=&quot;pl-smi&quot;&gt;s2Ptr&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &amp;amp;S2{}

&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;F&lt;/span&gt;
i = s1Val
i = s1Ptr
i = s2Ptr

&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; The following doesn't compile, since s2Val is a value, and there is no value receiver for f.&lt;/span&gt;
&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt;   i = s2Val&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Effective Go has a good write up on &lt;a href=&quot;https://golang.org/doc/effective_go.html#pointers_vs_values&quot; rel=&quot;nofollow&quot;&gt;Pointers vs. Values&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Zero-value Mutexes are Valid&lt;/h3&gt;
&lt;p&gt;The zero-value of &lt;code&gt;sync.Mutex&lt;/code&gt; and &lt;code&gt;sync.RWMutex&lt;/code&gt; is valid, so you almost never need a pointer to a mutex.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-smi&quot;&gt;mu&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;new&lt;/span&gt;(sync.&lt;span class=&quot;pl-smi&quot;&gt;Mutex&lt;/span&gt;)
mu.&lt;span class=&quot;pl-c1&quot;&gt;Lock&lt;/span&gt;()
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;mu&lt;/span&gt; sync.&lt;span class=&quot;pl-smi&quot;&gt;Mutex&lt;/span&gt;
mu.&lt;span class=&quot;pl-c1&quot;&gt;Lock&lt;/span&gt;()
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;If you use a struct by pointer, then the mutex can be a non-pointer field or, preferably, embedded directly into the struct.&lt;/p&gt;
&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; smap &lt;span class=&quot;pl-k&quot;&gt;struct&lt;/span&gt; {
  sync.&lt;span class=&quot;pl-smi&quot;&gt;Mutex&lt;/span&gt;

  data &lt;span class=&quot;pl-k&quot;&gt;map&lt;/span&gt;[&lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;]&lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;
}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;newSMap&lt;/span&gt;() *&lt;span class=&quot;pl-v&quot;&gt;smap&lt;/span&gt; {
  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &amp;amp;smap{
    data: &lt;span class=&quot;pl-c1&quot;&gt;make&lt;/span&gt;(&lt;span class=&quot;pl-k&quot;&gt;map&lt;/span&gt;[&lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;]&lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;),
  }
}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;m&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;smap&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Get&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;k&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt;) &lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt; {
  m.&lt;span class=&quot;pl-c1&quot;&gt;Lock&lt;/span&gt;()
  &lt;span class=&quot;pl-k&quot;&gt;defer&lt;/span&gt; m.&lt;span class=&quot;pl-c1&quot;&gt;Unlock&lt;/span&gt;()

  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; m.&lt;span class=&quot;pl-smi&quot;&gt;data&lt;/span&gt;[k]
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;SMap&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;struct&lt;/span&gt; {
  mu sync.&lt;span class=&quot;pl-smi&quot;&gt;Mutex&lt;/span&gt;

  data &lt;span class=&quot;pl-k&quot;&gt;map&lt;/span&gt;[&lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;]&lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;
}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;NewSMap&lt;/span&gt;() *&lt;span class=&quot;pl-v&quot;&gt;SMap&lt;/span&gt; {
  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &amp;amp;SMap{
    data: &lt;span class=&quot;pl-c1&quot;&gt;make&lt;/span&gt;(&lt;span class=&quot;pl-k&quot;&gt;map&lt;/span&gt;[&lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;]&lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;),
  }
}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;m&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;SMap&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Get&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;k&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt;) &lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt; {
  m.&lt;span class=&quot;pl-smi&quot;&gt;mu&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Lock&lt;/span&gt;()
  &lt;span class=&quot;pl-k&quot;&gt;defer&lt;/span&gt; m.&lt;span class=&quot;pl-smi&quot;&gt;mu&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Unlock&lt;/span&gt;()

  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; m.&lt;span class=&quot;pl-smi&quot;&gt;data&lt;/span&gt;[k]
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Embed for private types or types that need to implement the Mutex interface.&lt;/td&gt;
&lt;td&gt;For exported types, use a private lock.&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3&gt;Copy Slices and Maps at Boundaries&lt;/h3&gt;
&lt;p&gt;Slices and maps contain pointers to the underlying data so be wary of scenarios when they need to be copied.&lt;/p&gt;
&lt;h4&gt;Receiving Slices and Maps&lt;/h4&gt;
&lt;p&gt;Keep in mind that users can modify a map or slice you received as an argument if you store a reference to it.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;d&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;Driver&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;SetTrips&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;trips&lt;/span&gt; []&lt;span class=&quot;pl-v&quot;&gt;Trip&lt;/span&gt;) {
  d.&lt;span class=&quot;pl-smi&quot;&gt;trips&lt;/span&gt; = trips
}

&lt;span class=&quot;pl-smi&quot;&gt;trips&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ...
d1.&lt;span class=&quot;pl-c1&quot;&gt;SetTrips&lt;/span&gt;(trips)

&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Did you mean to modify d1.trips?&lt;/span&gt;
trips[&lt;span class=&quot;pl-c1&quot;&gt;0&lt;/span&gt;] = ...
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;d&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;Driver&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;SetTrips&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;trips&lt;/span&gt; []&lt;span class=&quot;pl-v&quot;&gt;Trip&lt;/span&gt;) {
  d.&lt;span class=&quot;pl-smi&quot;&gt;trips&lt;/span&gt; = &lt;span class=&quot;pl-c1&quot;&gt;make&lt;/span&gt;([]Trip, &lt;span class=&quot;pl-c1&quot;&gt;len&lt;/span&gt;(trips))
  &lt;span class=&quot;pl-c1&quot;&gt;copy&lt;/span&gt;(d.&lt;span class=&quot;pl-smi&quot;&gt;trips&lt;/span&gt;, trips)
}

&lt;span class=&quot;pl-smi&quot;&gt;trips&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ...
d1.&lt;span class=&quot;pl-c1&quot;&gt;SetTrips&lt;/span&gt;(trips)

&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; We can now modify trips[0] without affecting d1.trips.&lt;/span&gt;
trips[&lt;span class=&quot;pl-c1&quot;&gt;0&lt;/span&gt;] = ...
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h4&gt;Returning Slices and Maps&lt;/h4&gt;
&lt;p&gt;Similarly, be wary of user modifications to maps or slices exposing internal state.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;Stats&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;struct&lt;/span&gt; {
  sync.&lt;span class=&quot;pl-smi&quot;&gt;Mutex&lt;/span&gt;

  counters &lt;span class=&quot;pl-k&quot;&gt;map&lt;/span&gt;[&lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;]&lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt;
}

&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Snapshot returns the current stats.&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;s&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;Stats&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Snapshot&lt;/span&gt;&lt;/span&gt;() &lt;span class=&quot;pl-v&quot;&gt;map&lt;/span&gt;[&lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt;]&lt;span class=&quot;pl-v&quot;&gt;int&lt;/span&gt; {
  s.&lt;span class=&quot;pl-c1&quot;&gt;Lock&lt;/span&gt;()
  &lt;span class=&quot;pl-k&quot;&gt;defer&lt;/span&gt; s.&lt;span class=&quot;pl-c1&quot;&gt;Unlock&lt;/span&gt;()

  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; s.&lt;span class=&quot;pl-smi&quot;&gt;counters&lt;/span&gt;
}

&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; snapshot is no longer protected by the lock!&lt;/span&gt;
&lt;span class=&quot;pl-smi&quot;&gt;snapshot&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; stats.&lt;span class=&quot;pl-c1&quot;&gt;Snapshot&lt;/span&gt;()
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;Stats&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;struct&lt;/span&gt; {
  sync.&lt;span class=&quot;pl-smi&quot;&gt;Mutex&lt;/span&gt;

  counters &lt;span class=&quot;pl-k&quot;&gt;map&lt;/span&gt;[&lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;]&lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt;
}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;s&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;Stats&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Snapshot&lt;/span&gt;&lt;/span&gt;() &lt;span class=&quot;pl-v&quot;&gt;map&lt;/span&gt;[&lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt;]&lt;span class=&quot;pl-v&quot;&gt;int&lt;/span&gt; {
  s.&lt;span class=&quot;pl-c1&quot;&gt;Lock&lt;/span&gt;()
  &lt;span class=&quot;pl-k&quot;&gt;defer&lt;/span&gt; s.&lt;span class=&quot;pl-c1&quot;&gt;Unlock&lt;/span&gt;()

  &lt;span class=&quot;pl-smi&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;make&lt;/span&gt;(&lt;span class=&quot;pl-k&quot;&gt;map&lt;/span&gt;[&lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;]&lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;len&lt;/span&gt;(s.&lt;span class=&quot;pl-smi&quot;&gt;counters&lt;/span&gt;))
  &lt;span class=&quot;pl-k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;k&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;range&lt;/span&gt; s.&lt;span class=&quot;pl-smi&quot;&gt;counters&lt;/span&gt; {
    result[k] = v
  }
  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; result
}

&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Snapshot is now a copy.&lt;/span&gt;
&lt;span class=&quot;pl-smi&quot;&gt;snapshot&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; stats.&lt;span class=&quot;pl-c1&quot;&gt;Snapshot&lt;/span&gt;()
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3&gt;Defer to Clean Up&lt;/h3&gt;
&lt;p&gt;Use defer to clean up resources such as files and locks.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
p.&lt;span class=&quot;pl-c1&quot;&gt;Lock&lt;/span&gt;()
&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; p.&lt;span class=&quot;pl-smi&quot;&gt;count&lt;/span&gt; &amp;lt; &lt;span class=&quot;pl-c1&quot;&gt;10&lt;/span&gt; {
  p.&lt;span class=&quot;pl-c1&quot;&gt;Unlock&lt;/span&gt;()
  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; p.&lt;span class=&quot;pl-smi&quot;&gt;count&lt;/span&gt;
}

p.&lt;span class=&quot;pl-smi&quot;&gt;count&lt;/span&gt;++
&lt;span class=&quot;pl-smi&quot;&gt;newCount&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; p.&lt;span class=&quot;pl-smi&quot;&gt;count&lt;/span&gt;
p.&lt;span class=&quot;pl-c1&quot;&gt;Unlock&lt;/span&gt;()

&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; newCount

&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; easy to miss unlocks due to multiple returns&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
p.&lt;span class=&quot;pl-c1&quot;&gt;Lock&lt;/span&gt;()
&lt;span class=&quot;pl-k&quot;&gt;defer&lt;/span&gt; p.&lt;span class=&quot;pl-c1&quot;&gt;Unlock&lt;/span&gt;()

&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; p.&lt;span class=&quot;pl-smi&quot;&gt;count&lt;/span&gt; &amp;lt; &lt;span class=&quot;pl-c1&quot;&gt;10&lt;/span&gt; {
  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; p.&lt;span class=&quot;pl-smi&quot;&gt;count&lt;/span&gt;
}

p.&lt;span class=&quot;pl-smi&quot;&gt;count&lt;/span&gt;++
&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; p.&lt;span class=&quot;pl-smi&quot;&gt;count&lt;/span&gt;

&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; more readable&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Defer has an extremely small overhead and should be avoided only if you can prove that your function execution time is in the order of nanoseconds. The readability win of using defers is worth the miniscule cost of using them. This is especially true for larger methods that have more than simple memory accesses, where the other computations are more significant than the &lt;code&gt;defer&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;Channel Size is One or None&lt;/h3&gt;
&lt;p&gt;Channels should usually have a size of one or be unbuffered. By default, channels are unbuffered and have a size of zero. Any other size must be subject to a high level of scrutiny. Consider how the size is determined, what prevents the channel from filling up under load and blocking writers, and what happens when this occurs.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Ought to be enough for anybody!&lt;/span&gt;
&lt;span class=&quot;pl-smi&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;make&lt;/span&gt;(&lt;span class=&quot;pl-k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;64&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Size of one&lt;/span&gt;
&lt;span class=&quot;pl-smi&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;make&lt;/span&gt;(&lt;span class=&quot;pl-k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;) &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; or&lt;/span&gt;
&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Unbuffered channel, size of zero&lt;/span&gt;
&lt;span class=&quot;pl-smi&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;make&lt;/span&gt;(&lt;span class=&quot;pl-k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3&gt;Start Enums at One&lt;/h3&gt;
&lt;p&gt;The standard way of introducing enumerations in Go is to declare a custom type and a &lt;code&gt;const&lt;/code&gt; group with &lt;code&gt;iota&lt;/code&gt;. Since variables have a 0 default value, you should usually start your enums on a non-zero value.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;Operation&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt;

&lt;span class=&quot;pl-k&quot;&gt;const&lt;/span&gt; (
  &lt;span class=&quot;pl-v&quot;&gt;Add&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;Operation&lt;/span&gt; = &lt;span class=&quot;pl-c1&quot;&gt;iota&lt;/span&gt;
  &lt;span class=&quot;pl-v&quot;&gt;Subtract&lt;/span&gt;
  &lt;span class=&quot;pl-v&quot;&gt;Multiply&lt;/span&gt;
)

&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Add=0, Subtract=1, Multiply=2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;Operation&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt;

&lt;span class=&quot;pl-k&quot;&gt;const&lt;/span&gt; (
  &lt;span class=&quot;pl-v&quot;&gt;Add&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;Operation&lt;/span&gt; = &lt;span class=&quot;pl-c1&quot;&gt;iota&lt;/span&gt; + &lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;
  &lt;span class=&quot;pl-v&quot;&gt;Subtract&lt;/span&gt;
  &lt;span class=&quot;pl-v&quot;&gt;Multiply&lt;/span&gt;
)

&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Add=1, Subtract=2, Multiply=3&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;There are cases where using the zero value makes sense, for example when the zero value case is the desirable default behavior.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;LogOutput&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt;

&lt;span class=&quot;pl-k&quot;&gt;const&lt;/span&gt; (
  &lt;span class=&quot;pl-v&quot;&gt;LogToStdout&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;LogOutput&lt;/span&gt; = &lt;span class=&quot;pl-c1&quot;&gt;iota&lt;/span&gt;
  &lt;span class=&quot;pl-v&quot;&gt;LogToFile&lt;/span&gt;
  &lt;span class=&quot;pl-v&quot;&gt;LogToRemote&lt;/span&gt;
)

&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; LogToStdout=0, LogToFile=1, LogToRemote=2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Error Types&lt;/h3&gt;
&lt;p&gt;There are various options for declaring errors:&lt;/p&gt;
&lt;p&gt;When returning errors, consider the following to determine the best choice:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Is this a simple error that needs no extra information? If so, &lt;a href=&quot;https://golang.org/pkg/errors/#New&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;errors.New&lt;/code&gt;&lt;/a&gt; should suffice.&lt;/li&gt;
&lt;li&gt;Do the clients need to detect and handle this error? If so, you should use a custom type, and implement the &lt;code&gt;Error()&lt;/code&gt; method.&lt;/li&gt;
&lt;li&gt;Are you propagating an error returned by a downstream function? If so, check the &lt;a href=&quot;https://github.com/uber-go/guide/blob/master/style.md#error-wrapping&quot;&gt;section on error wrapping&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Otherwise, &lt;a href=&quot;https://golang.org/pkg/fmt/#Errorf&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;fmt.Errorf&lt;/code&gt;&lt;/a&gt; is okay.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;If the client needs to detect the error, and you have created a simple error using &lt;a href=&quot;https://golang.org/pkg/errors/#New&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;errors.New&lt;/code&gt;&lt;/a&gt;, use a var for the error.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; package foo&lt;/span&gt;

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;Open&lt;/span&gt;() &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt; {
  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; errors.&lt;span class=&quot;pl-c1&quot;&gt;New&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;could not open&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)
}

&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; package bar&lt;/span&gt;

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;use&lt;/span&gt;() {
  &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; foo.&lt;span class=&quot;pl-c1&quot;&gt;Open&lt;/span&gt;(); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {
    &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err.&lt;span class=&quot;pl-c1&quot;&gt;Error&lt;/span&gt;() == &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;could not open&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; {
      &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; handle&lt;/span&gt;
    } &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {
      &lt;span class=&quot;pl-c1&quot;&gt;panic&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;unknown error&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)
    }
  }
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; package foo&lt;/span&gt;

&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;ErrCouldNotOpen&lt;/span&gt; = errors.&lt;span class=&quot;pl-c1&quot;&gt;New&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;could not open&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;Open&lt;/span&gt;() &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt; {
  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; ErrCouldNotOpen
}

&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; package bar&lt;/span&gt;

&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; foo.&lt;span class=&quot;pl-c1&quot;&gt;Open&lt;/span&gt;(); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {
  &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err == foo.&lt;span class=&quot;pl-smi&quot;&gt;ErrCouldNotOpen&lt;/span&gt; {
    &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; handle&lt;/span&gt;
  } &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {
    &lt;span class=&quot;pl-c1&quot;&gt;panic&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;unknown error&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)
  }
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;If you have an error that clients may need to detect, and you would like to add more information to it (e.g., it is not a static string), then you should use a custom type.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;open&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;file&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt;) &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt; {
  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Errorf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;file &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; not found&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, file)
}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;use&lt;/span&gt;() {
  &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;open&lt;/span&gt;(); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {
    &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; strings.&lt;span class=&quot;pl-c1&quot;&gt;Contains&lt;/span&gt;(err.&lt;span class=&quot;pl-c1&quot;&gt;Error&lt;/span&gt;(), &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;not found&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;) {
      &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; handle&lt;/span&gt;
    } &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {
      &lt;span class=&quot;pl-c1&quot;&gt;panic&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;unknown error&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)
    }
  }
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; errNotFound &lt;span class=&quot;pl-k&quot;&gt;struct&lt;/span&gt; {
  file &lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;
}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;errNotFound&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Error&lt;/span&gt;&lt;/span&gt;() &lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt; {
  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Sprintf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;file &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; not found&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, e.&lt;span class=&quot;pl-smi&quot;&gt;file&lt;/span&gt;)
}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;open&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;file&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt;) &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt; {
  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; errNotFound{file: file}
}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;use&lt;/span&gt;() {
  &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;open&lt;/span&gt;(); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {
    &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;_&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; err.(errNotFound); ok {
      &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; handle&lt;/span&gt;
    } &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {
      &lt;span class=&quot;pl-c1&quot;&gt;panic&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;unknown error&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)
    }
  }
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Be careful with exporting custom error types directly since they become part of the public API of the package. It is preferable to expose matcher functions to check the error instead.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; package foo&lt;/span&gt;

&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; errNotFound &lt;span class=&quot;pl-k&quot;&gt;struct&lt;/span&gt; {
  file &lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;
}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;errNotFound&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Error&lt;/span&gt;&lt;/span&gt;() &lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt; {
  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Sprintf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;file &lt;span class=&quot;pl-c1&quot;&gt;%q&lt;/span&gt; not found&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, e.&lt;span class=&quot;pl-smi&quot;&gt;file&lt;/span&gt;)
}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;IsNotFoundError&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt;) &lt;span class=&quot;pl-v&quot;&gt;bool&lt;/span&gt; {
  &lt;span class=&quot;pl-smi&quot;&gt;_&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; err.(errNotFound)
  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; ok
}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;Open&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;file&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt;) &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt; {
  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; errNotFound{file: file}
}

&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; package bar&lt;/span&gt;

&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; foo.&lt;span class=&quot;pl-c1&quot;&gt;Open&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;foo&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {
  &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; foo.&lt;span class=&quot;pl-c1&quot;&gt;IsNotFoundError&lt;/span&gt;(err) {
    &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; handle&lt;/span&gt;
  } &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {
    &lt;span class=&quot;pl-c1&quot;&gt;panic&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;unknown error&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)
  }
}
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Error Wrapping&lt;/h3&gt;
&lt;p&gt;There are three main options for propagating errors if a call fails:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Return the original error if there is no additional context to add and you want to maintain the original error type.&lt;/li&gt;
&lt;li&gt;Add context using &lt;a href=&quot;https://godoc.org/github.com/pkg/errors#Wrap&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;&quot;pkg/errors&quot;.Wrap&lt;/code&gt;&lt;/a&gt; so that the error message provides more context and &lt;a href=&quot;https://godoc.org/github.com/pkg/errors#Cause&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;&quot;pkg/errors&quot;.Cause&lt;/code&gt;&lt;/a&gt; can be used to extract the original error.&lt;/li&gt;
&lt;li&gt;Use &lt;a href=&quot;https://golang.org/pkg/fmt/#Errorf&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;fmt.Errorf&lt;/code&gt;&lt;/a&gt; if the callers do not need to detect or handle that specific error case.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;It is recommended to add context where possible so that instead of a vague error such as &quot;connection refused&quot;, you get more useful errors such as &quot;call service foo: connection refused&quot;.&lt;/p&gt;
&lt;p&gt;When adding context to returned errors, keep the context succinct by avoiding phrases like &quot;failed to&quot;, which state the obvious and pile up as the error percolates up through the stack:&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-smi&quot;&gt;s&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; store.&lt;span class=&quot;pl-c1&quot;&gt;New&lt;/span&gt;()
&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {
    &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Errorf&lt;/span&gt;(
        &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;failed to create new store: &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, err)
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-smi&quot;&gt;s&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; store.&lt;span class=&quot;pl-c1&quot;&gt;New&lt;/span&gt;()
&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {
    &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Errorf&lt;/span&gt;(
        &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;new store: &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, err)
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;
&lt;pre&gt;
&lt;code&gt;failed to x: failed to y: failed to create new store: the error
&lt;/code&gt;
&lt;/pre&gt;&lt;/td&gt;
&lt;td&gt;
&lt;pre&gt;
&lt;code&gt;x: y: new store: the error
&lt;/code&gt;
&lt;/pre&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;However once the error is sent to another system, it should be clear the message is an error (e.g. an &lt;code&gt;err&lt;/code&gt; tag or &quot;Failed&quot; prefix in logs).&lt;/p&gt;
&lt;p&gt;See also &lt;a href=&quot;https://dave.cheney.net/2016/04/27/dont-just-check-errors-handle-them-gracefully&quot; rel=&quot;nofollow&quot;&gt;Don't just check errors, handle them gracefully&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Handle Type Assertion Failures&lt;/h3&gt;
&lt;p&gt;The single return value form of a &lt;a href=&quot;https://golang.org/ref/spec#Type_assertions&quot; rel=&quot;nofollow&quot;&gt;type assertion&lt;/a&gt; will panic on an incorrect type. Therefore, always use the &quot;comma ok&quot; idiom.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-smi&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; i.(&lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-smi&quot;&gt;t&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;ok&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; i.(&lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;)
&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; !ok {
  &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; handle the error gracefully&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3&gt;Don't Panic&lt;/h3&gt;
&lt;p&gt;Code running in production must avoid panics. Panics are a major source of &lt;a href=&quot;https://en.wikipedia.org/wiki/Cascading_failure&quot; rel=&quot;nofollow&quot;&gt;cascading failures&lt;/a&gt;. If an error occurs, the function must return an error and allow the caller to decide how to handle it.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;foo&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;bar&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt;) {
  &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;len&lt;/span&gt;(bar) == &lt;span class=&quot;pl-c1&quot;&gt;0&lt;/span&gt; {
    &lt;span class=&quot;pl-c1&quot;&gt;panic&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;bar must not be empty&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)
  }
  &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; ...&lt;/span&gt;
}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;main&lt;/span&gt;() {
  &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;len&lt;/span&gt;(os.&lt;span class=&quot;pl-smi&quot;&gt;Args&lt;/span&gt;) != &lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt; {
    fmt.&lt;span class=&quot;pl-c1&quot;&gt;Println&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;USAGE: foo &amp;lt;bar&amp;gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)
    os.&lt;span class=&quot;pl-c1&quot;&gt;Exit&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;)
  }
  &lt;span class=&quot;pl-c1&quot;&gt;foo&lt;/span&gt;(os.&lt;span class=&quot;pl-smi&quot;&gt;Args&lt;/span&gt;[&lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;])
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;foo&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;bar&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt;) &lt;span class=&quot;pl-v&quot;&gt;error&lt;/span&gt; {
  &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;len&lt;/span&gt;(bar) == &lt;span class=&quot;pl-c1&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; errors.&lt;span class=&quot;pl-c1&quot;&gt;New&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;bar must not be empty&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)
  }
  &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; ...&lt;/span&gt;
  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;
}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;main&lt;/span&gt;() {
  &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;len&lt;/span&gt;(os.&lt;span class=&quot;pl-smi&quot;&gt;Args&lt;/span&gt;) != &lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt; {
    fmt.&lt;span class=&quot;pl-c1&quot;&gt;Println&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;USAGE: foo &amp;lt;bar&amp;gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)
    os.&lt;span class=&quot;pl-c1&quot;&gt;Exit&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;)
  }
  &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;foo&lt;/span&gt;(os.&lt;span class=&quot;pl-smi&quot;&gt;Args&lt;/span&gt;[&lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;]); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {
    &lt;span class=&quot;pl-c1&quot;&gt;panic&lt;/span&gt;(err)
  }
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Panic/recover is not an error handling strategy. A program must panic only when something irrecoverable happens such as a nil dereference. An exception to this is program initialization: bad things at program startup that should abort the program may cause panic.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;_statusTemplate&lt;/span&gt; = template.&lt;span class=&quot;pl-c1&quot;&gt;Must&lt;/span&gt;(template.&lt;span class=&quot;pl-c1&quot;&gt;New&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;name&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;).&lt;span class=&quot;pl-c1&quot;&gt;Parse&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;_statusHTML&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;))
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Even in tests, prefer &lt;code&gt;t.Fatal&lt;/code&gt; or &lt;code&gt;t.FailNow&lt;/code&gt; over panics to ensure that the test is marked as failed.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; func TestFoo(t *testing.T)&lt;/span&gt;

&lt;span class=&quot;pl-smi&quot;&gt;f&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ioutil.&lt;span class=&quot;pl-c1&quot;&gt;TempFile&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;test&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)
&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {
  &lt;span class=&quot;pl-c1&quot;&gt;panic&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;failed to set up test&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; func TestFoo(t *testing.T)&lt;/span&gt;

&lt;span class=&quot;pl-smi&quot;&gt;f&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ioutil.&lt;span class=&quot;pl-c1&quot;&gt;TempFile&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;test&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)
&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {
  t.&lt;span class=&quot;pl-c1&quot;&gt;Fatal&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;failed to set up test&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3&gt;Use go.uber.org/atomic&lt;/h3&gt;
&lt;p&gt;Atomic operations with the &lt;a href=&quot;https://golang.org/pkg/sync/atomic/&quot; rel=&quot;nofollow&quot;&gt;sync/atomic&lt;/a&gt; package operate on the raw types (&lt;code&gt;int32&lt;/code&gt;, &lt;code&gt;int64&lt;/code&gt;, etc.) so it is easy to forget to use the atomic operation to read or modify the variables.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://godoc.org/go.uber.org/atomic&quot; rel=&quot;nofollow&quot;&gt;go.uber.org/atomic&lt;/a&gt; adds type safety to these operations by hiding the underlying type. Additionally, it includes a convenient &lt;code&gt;atomic.Bool&lt;/code&gt; type.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; foo &lt;span class=&quot;pl-k&quot;&gt;struct&lt;/span&gt; {
  running &lt;span class=&quot;pl-k&quot;&gt;int32&lt;/span&gt;  &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; atomic&lt;/span&gt;
}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;f&lt;/span&gt;* &lt;span class=&quot;pl-v&quot;&gt;foo&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;start&lt;/span&gt;&lt;/span&gt;() {
  &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; atomic.&lt;span class=&quot;pl-c1&quot;&gt;SwapInt32&lt;/span&gt;(&amp;amp;f.&lt;span class=&quot;pl-smi&quot;&gt;running&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;) == &lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt; {
     &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; already running…&lt;/span&gt;
     &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt;
  }
  &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; start the Foo&lt;/span&gt;
}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;f&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;foo&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;isRunning&lt;/span&gt;&lt;/span&gt;() &lt;span class=&quot;pl-v&quot;&gt;bool&lt;/span&gt; {
  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; f.&lt;span class=&quot;pl-smi&quot;&gt;running&lt;/span&gt; == &lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;  &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; race!&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; foo &lt;span class=&quot;pl-k&quot;&gt;struct&lt;/span&gt; {
  running atomic.&lt;span class=&quot;pl-smi&quot;&gt;Bool&lt;/span&gt;
}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;f&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;foo&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;start&lt;/span&gt;&lt;/span&gt;() {
  &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; f.&lt;span class=&quot;pl-smi&quot;&gt;running&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Swap&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;) {
     &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; already running…&lt;/span&gt;
     &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt;
  }
  &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; start the Foo&lt;/span&gt;
}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;f&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;foo&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;isRunning&lt;/span&gt;&lt;/span&gt;() &lt;span class=&quot;pl-v&quot;&gt;bool&lt;/span&gt; {
  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; f.&lt;span class=&quot;pl-smi&quot;&gt;running&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Load&lt;/span&gt;()
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h2&gt;Performance&lt;/h2&gt;
&lt;p&gt;Performance-specific guidelines apply only to the hot path.&lt;/p&gt;
&lt;h3&gt;Prefer strconv over fmt&lt;/h3&gt;
&lt;p&gt;When converting primitives to/from strings, &lt;code&gt;strconv&lt;/code&gt; is faster than &lt;code&gt;fmt&lt;/code&gt;.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;0&lt;/span&gt;; i &amp;lt; b.&lt;span class=&quot;pl-smi&quot;&gt;N&lt;/span&gt;; i++ {
  &lt;span class=&quot;pl-smi&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; fmt.&lt;span class=&quot;pl-c1&quot;&gt;Sprint&lt;/span&gt;(rand.&lt;span class=&quot;pl-c1&quot;&gt;Int&lt;/span&gt;())
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;0&lt;/span&gt;; i &amp;lt; b.&lt;span class=&quot;pl-smi&quot;&gt;N&lt;/span&gt;; i++ {
  &lt;span class=&quot;pl-smi&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; strconv.&lt;span class=&quot;pl-c1&quot;&gt;Itoa&lt;/span&gt;(rand.&lt;span class=&quot;pl-c1&quot;&gt;Int&lt;/span&gt;())
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;
&lt;pre&gt;
&lt;code&gt;BenchmarkFmtSprint-4    143 ns/op    2 allocs/op
&lt;/code&gt;
&lt;/pre&gt;&lt;/td&gt;
&lt;td&gt;
&lt;pre&gt;
&lt;code&gt;BenchmarkStrconv-4    64.2 ns/op    1 allocs/op
&lt;/code&gt;
&lt;/pre&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3&gt;Avoid string-to-byte conversion&lt;/h3&gt;
&lt;p&gt;Do not create byte slices from a fixed string repeatedly. Instead, perform the conversion once and capture the result.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;0&lt;/span&gt;; i &amp;lt; b.&lt;span class=&quot;pl-smi&quot;&gt;N&lt;/span&gt;; i++ {
  w.&lt;span class=&quot;pl-c1&quot;&gt;Write&lt;/span&gt;([]&lt;span class=&quot;pl-k&quot;&gt;byte&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Hello world&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;))
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-smi&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; []&lt;span class=&quot;pl-k&quot;&gt;byte&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Hello world&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)
&lt;span class=&quot;pl-k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;0&lt;/span&gt;; i &amp;lt; b.&lt;span class=&quot;pl-smi&quot;&gt;N&lt;/span&gt;; i++ {
  w.&lt;span class=&quot;pl-c1&quot;&gt;Write&lt;/span&gt;(data)
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;
&lt;pre&gt;
&lt;code&gt;BenchmarkBad-4   50000000   22.2 ns/op
&lt;/code&gt;
&lt;/pre&gt;&lt;/td&gt;
&lt;td&gt;
&lt;pre&gt;
&lt;code&gt;BenchmarkGood-4  500000000   3.25 ns/op
&lt;/code&gt;
&lt;/pre&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h2&gt;Style&lt;/h2&gt;
&lt;h3&gt;Group Similar Declarations&lt;/h3&gt;
&lt;p&gt;Go supports grouping similar declarations.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;a&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;b&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;import&lt;/span&gt; (
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;a&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;b&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
)
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;This also applies to constants, variables, and type declarations.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;const&lt;/span&gt; a = &lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;const&lt;/span&gt; b = &lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt;



&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;a&lt;/span&gt; = &lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;b&lt;/span&gt; = &lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt;



&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;Area&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;float64&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;Volume&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;float64&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;const&lt;/span&gt; (
  a = &lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;
  b = &lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt;
)

&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; (
  a = &lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;
  b = &lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt;
)

&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; (
  &lt;span class=&quot;pl-v&quot;&gt;Area&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;float64&lt;/span&gt;
  &lt;span class=&quot;pl-v&quot;&gt;Volume&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;float64&lt;/span&gt;
)
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Only group related declarations. Do not group declarations that are unrelated.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;Operation&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt;

&lt;span class=&quot;pl-k&quot;&gt;const&lt;/span&gt; (
  &lt;span class=&quot;pl-v&quot;&gt;Add&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;Operation&lt;/span&gt; = &lt;span class=&quot;pl-c1&quot;&gt;iota&lt;/span&gt; + &lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;
  &lt;span class=&quot;pl-v&quot;&gt;Subtract&lt;/span&gt;
  &lt;span class=&quot;pl-v&quot;&gt;Multiply&lt;/span&gt;
  &lt;span class=&quot;pl-v&quot;&gt;ENV_VAR&lt;/span&gt; = &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;MY_ENV&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
)
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;Operation&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt;

&lt;span class=&quot;pl-k&quot;&gt;const&lt;/span&gt; (
  &lt;span class=&quot;pl-v&quot;&gt;Add&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;Operation&lt;/span&gt; = &lt;span class=&quot;pl-c1&quot;&gt;iota&lt;/span&gt; + &lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;
  &lt;span class=&quot;pl-v&quot;&gt;Subtract&lt;/span&gt;
  &lt;span class=&quot;pl-v&quot;&gt;Multiply&lt;/span&gt;
)

&lt;span class=&quot;pl-k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;ENV_VAR&lt;/span&gt; = &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;MY_ENV&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Groups are not limited in where they can be used. For example, you can use them inside of functions.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;f&lt;/span&gt;() &lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt; {
  &lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;red&lt;/span&gt; = color.&lt;span class=&quot;pl-c1&quot;&gt;New&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;0xff0000&lt;/span&gt;)
  &lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;green&lt;/span&gt; = color.&lt;span class=&quot;pl-c1&quot;&gt;New&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;0x00ff00&lt;/span&gt;)
  &lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;blue&lt;/span&gt; = color.&lt;span class=&quot;pl-c1&quot;&gt;New&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;0x0000ff&lt;/span&gt;)

  ...
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;f&lt;/span&gt;() &lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt; {
  &lt;span class=&quot;pl-c1&quot;&gt;var&lt;/span&gt; (
    red   = color.&lt;span class=&quot;pl-c1&quot;&gt;New&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;0xff0000&lt;/span&gt;)
    green = color.&lt;span class=&quot;pl-c1&quot;&gt;New&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;0x00ff00&lt;/span&gt;)
    blue  = color.&lt;span class=&quot;pl-c1&quot;&gt;New&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;0x0000ff&lt;/span&gt;)
  )

  ...
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3&gt;Import Group Ordering&lt;/h3&gt;
&lt;p&gt;There should be two import groups:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Standard library&lt;/li&gt;
&lt;li&gt;Everything else&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;This is the grouping applied by goimports by default.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;import&lt;/span&gt; (
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;fmt&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;os&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;go.uber.org/atomic&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;golang.org/x/sync/errgroup&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
)
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;import&lt;/span&gt; (
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;fmt&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;os&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;

  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;go.uber.org/atomic&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;golang.org/x/sync/errgroup&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
)
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3&gt;Package Names&lt;/h3&gt;
&lt;p&gt;When naming packages, choose a name that is:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;All lower-case. No capitals or underscores.&lt;/li&gt;
&lt;li&gt;Does not need to be renamed using named imports at most call sites.&lt;/li&gt;
&lt;li&gt;Short and succinct. Remember that the name is identified in full at every call site.&lt;/li&gt;
&lt;li&gt;Not plural. For example, &lt;code&gt;net/url&lt;/code&gt;, not &lt;code&gt;net/urls&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Not &quot;common&quot;, &quot;util&quot;, &quot;shared&quot;, or &quot;lib&quot;. These are bad, uninformative names.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;See also &lt;a href=&quot;https://blog.golang.org/package-names&quot; rel=&quot;nofollow&quot;&gt;Package Names&lt;/a&gt; and &lt;a href=&quot;https://rakyll.org/style-packages/&quot; rel=&quot;nofollow&quot;&gt;Style guideline for Go packages&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Function Names&lt;/h3&gt;
&lt;p&gt;We follow the Go community's convention of using &lt;a href=&quot;https://golang.org/doc/effective_go.html#mixed-caps&quot; rel=&quot;nofollow&quot;&gt;MixedCaps for function names&lt;/a&gt;. An exception is made for test functions, which may contain underscores for the purpose of grouping related test cases, e.g., &lt;code&gt;TestMyFunction_WhatIsBeingTested&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;Import Aliasing&lt;/h3&gt;
&lt;p&gt;Import aliasing must be used if the package name does not match the last element of the import path.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;import&lt;/span&gt; (
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;net/http&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;

  client &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;example.com/client-go&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
  trace &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;example.com/trace/v2&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In all other scenarios, import aliases should be avoided unless there is a direct conflict between imports.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;import&lt;/span&gt; (
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;fmt&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;os&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;


  nettrace &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;golang.net/x/trace&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
)
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;import&lt;/span&gt; (
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;fmt&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;os&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;runtime/trace&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;

  nettrace &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;golang.net/x/trace&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
)
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3&gt;Function Grouping and Ordering&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;Functions should be sorted in rough call order.&lt;/li&gt;
&lt;li&gt;Functions in a file should be grouped by receiver.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Therefore, exported functions should appear first in a file, after &lt;code&gt;struct&lt;/code&gt;, &lt;code&gt;const&lt;/code&gt;, &lt;code&gt;var&lt;/code&gt; definitions.&lt;/p&gt;
&lt;p&gt;A &lt;code&gt;newXYZ()&lt;/code&gt;/&lt;code&gt;NewXYZ()&lt;/code&gt; may appear after the type is defined, but before the rest of the methods on the receiver.&lt;/p&gt;
&lt;p&gt;Since functions are grouped by receiver, plain utility functions should appear towards the end of the file.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;s&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;something&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Cost&lt;/span&gt;&lt;/span&gt;() {
  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;calcCost&lt;/span&gt;(s.&lt;span class=&quot;pl-smi&quot;&gt;weights&lt;/span&gt;)
}

&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; something &lt;span class=&quot;pl-k&quot;&gt;struct&lt;/span&gt;{ ... }

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;calcCost&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;int&lt;/span&gt;[]) &lt;span class=&quot;pl-v&quot;&gt;int&lt;/span&gt; {...}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;s&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;something&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Stop&lt;/span&gt;&lt;/span&gt;() {...}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;newSomething&lt;/span&gt;() *&lt;span class=&quot;pl-v&quot;&gt;something&lt;/span&gt; {
    &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &amp;amp;something{}
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; something &lt;span class=&quot;pl-k&quot;&gt;struct&lt;/span&gt;{ ... }

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;newSomething&lt;/span&gt;() *&lt;span class=&quot;pl-v&quot;&gt;something&lt;/span&gt; {
    &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &amp;amp;something{}
}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;s&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;something&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Cost&lt;/span&gt;&lt;/span&gt;() {
  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;calcCost&lt;/span&gt;(s.&lt;span class=&quot;pl-smi&quot;&gt;weights&lt;/span&gt;)
}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;s&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;something&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Stop&lt;/span&gt;&lt;/span&gt;() {...}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;calcCost&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;int&lt;/span&gt;[]) &lt;span class=&quot;pl-v&quot;&gt;int&lt;/span&gt; {...}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3&gt;Reduce Nesting&lt;/h3&gt;
&lt;p&gt;Code should reduce nesting where possible by handling error cases/special conditions first and returning early or continuing the loop. Reduce the amount of code that is nested multiple levels.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;_&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;range&lt;/span&gt; data {
  &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; v.&lt;span class=&quot;pl-smi&quot;&gt;F1&lt;/span&gt; == &lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt; {
    v = &lt;span class=&quot;pl-c1&quot;&gt;process&lt;/span&gt;(v)
    &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; v.&lt;span class=&quot;pl-c1&quot;&gt;Call&lt;/span&gt;(); err == &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {
      v.&lt;span class=&quot;pl-c1&quot;&gt;Send&lt;/span&gt;()
    } &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {
      &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err
    }
  } &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {
    log.&lt;span class=&quot;pl-c1&quot;&gt;Printf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Invalid v: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, v)
  }
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;_&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;range&lt;/span&gt; data {
  &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; v.&lt;span class=&quot;pl-smi&quot;&gt;F1&lt;/span&gt; != &lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt; {
    log.&lt;span class=&quot;pl-c1&quot;&gt;Printf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Invalid v: &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, v)
    &lt;span class=&quot;pl-k&quot;&gt;continue&lt;/span&gt;
  }

  v = &lt;span class=&quot;pl-c1&quot;&gt;process&lt;/span&gt;(v)
  &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; v.&lt;span class=&quot;pl-c1&quot;&gt;Call&lt;/span&gt;(); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {
    &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err
  }
  v.&lt;span class=&quot;pl-c1&quot;&gt;Send&lt;/span&gt;()
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3&gt;Unnecessary Else&lt;/h3&gt;
&lt;p&gt;If a variable is set in both branches of an if, it can be replaced with a single if.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; b {
  a = &lt;span class=&quot;pl-c1&quot;&gt;100&lt;/span&gt;
} &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {
  a = &lt;span class=&quot;pl-c1&quot;&gt;10&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-smi&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;10&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; b {
  a = &lt;span class=&quot;pl-c1&quot;&gt;100&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3&gt;Top-level Variable Declarations&lt;/h3&gt;
&lt;p&gt;At the top level, use the standard &lt;code&gt;var&lt;/code&gt; keyword. Do not specify the type, unless it is not the same type as the expression.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;_s&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt; = &lt;span class=&quot;pl-c1&quot;&gt;F&lt;/span&gt;()

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;F&lt;/span&gt;() &lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt; { &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;A&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;_s&lt;/span&gt; = &lt;span class=&quot;pl-c1&quot;&gt;F&lt;/span&gt;()
&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Since F already states that it returns a string, we don't need to specify&lt;/span&gt;
&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; the type again.&lt;/span&gt;

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;F&lt;/span&gt;() &lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt; { &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;A&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Specify the type if the type of the expression does not match the desired type exactly.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; myError &lt;span class=&quot;pl-k&quot;&gt;struct&lt;/span&gt;{}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;myError&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Error&lt;/span&gt;&lt;/span&gt;() &lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt; { &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;error&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; }

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;F&lt;/span&gt;() &lt;span class=&quot;pl-v&quot;&gt;myError&lt;/span&gt; { &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; myError{} }

&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;_e&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;error&lt;/span&gt; = &lt;span class=&quot;pl-c1&quot;&gt;F&lt;/span&gt;()
&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; F returns an object of type myError but we want error.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Prefix Unexported Globals with _&lt;/h3&gt;
&lt;p&gt;Prefix unexported top-level &lt;code&gt;var&lt;/code&gt;s and &lt;code&gt;const&lt;/code&gt;s with &lt;code&gt;_&lt;/code&gt; to make it clear when they are used that they are global symbols.&lt;/p&gt;
&lt;p&gt;Exception: Unexported error values, which should be prefixed with &lt;code&gt;err&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Rationale: Top-level variables and constants have a package scope. Using a generic name makes it easy to accidentally use the wrong value in a different file.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; foo.go&lt;/span&gt;

&lt;span class=&quot;pl-k&quot;&gt;const&lt;/span&gt; (
  defaultPort = &lt;span class=&quot;pl-c1&quot;&gt;8080&lt;/span&gt;
  defaultUser = &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;user&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
)

&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; bar.go&lt;/span&gt;

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;Bar&lt;/span&gt;() {
  &lt;span class=&quot;pl-smi&quot;&gt;defaultPort&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;9090&lt;/span&gt;
  ...
  fmt.&lt;span class=&quot;pl-c1&quot;&gt;Println&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Default port&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, defaultPort)

  &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; We will not see a compile error if the first line of&lt;/span&gt;
  &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Bar() is deleted.&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; foo.go&lt;/span&gt;

&lt;span class=&quot;pl-k&quot;&gt;const&lt;/span&gt; (
  _defaultPort = &lt;span class=&quot;pl-c1&quot;&gt;8080&lt;/span&gt;
  _defaultUser = &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;user&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
)
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3&gt;Embedding in Structs&lt;/h3&gt;
&lt;p&gt;Embedded types (such as mutexes) should be at the top of the field list of a struct, and there must be an empty line separating embedded fields from regular fields.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;Client&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;struct&lt;/span&gt; {
  version &lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt;
  http.&lt;span class=&quot;pl-smi&quot;&gt;Client&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;Client&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;struct&lt;/span&gt; {
  http.&lt;span class=&quot;pl-smi&quot;&gt;Client&lt;/span&gt;

  version &lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3&gt;Use Field Names to initialize Structs&lt;/h3&gt;
&lt;p&gt;You should almost always specify field names when initializing structs. This is now enforced by &lt;a href=&quot;https://golang.org/cmd/vet/&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;go vet&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-smi&quot;&gt;k&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;User&lt;/span&gt;{&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;John&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Doe&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-smi&quot;&gt;k&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;User&lt;/span&gt;{
    &lt;span class=&quot;pl-v&quot;&gt;FirstName&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;John&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
    &lt;span class=&quot;pl-v&quot;&gt;LastName&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Doe&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
    &lt;span class=&quot;pl-v&quot;&gt;Admin&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;,
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Exception: Field names &lt;em&gt;may&lt;/em&gt; be omitted in test tables when there are 3 or fewer fields.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-smi&quot;&gt;tests&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; []&lt;span class=&quot;pl-k&quot;&gt;struct&lt;/span&gt;{
}{
  op &lt;span class=&quot;pl-v&quot;&gt;Operation&lt;/span&gt;
  want &lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;
}{
  {Add, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;add&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;},
  {Subtract, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;subtract&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;},
}
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Local Variable Declarations&lt;/h3&gt;
&lt;p&gt;Short variable declarations (&lt;code&gt;:=&lt;/code&gt;) should be used if a variable is being set to some value explicitly.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;s&lt;/span&gt; = &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;foo&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-smi&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;foo&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;However, there are cases where the default value is clearer when the &lt;code&gt;var&lt;/code&gt; keyword is use. &lt;a href=&quot;https://github.com/golang/go/wiki/CodeReviewComments#declaring-empty-slices&quot;&gt;Declaring Empty Slices&lt;/a&gt;, for example.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;f&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;list&lt;/span&gt; []&lt;span class=&quot;pl-v&quot;&gt;int&lt;/span&gt;) {
  &lt;span class=&quot;pl-smi&quot;&gt;filtered&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; []&lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt;{}
  &lt;span class=&quot;pl-k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;_&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;range&lt;/span&gt; list {
    &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; v &amp;gt; &lt;span class=&quot;pl-c1&quot;&gt;10&lt;/span&gt; {
      filtered = &lt;span class=&quot;pl-c1&quot;&gt;append&lt;/span&gt;(filtered, v)
    }
  }
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;f&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;list&lt;/span&gt; []&lt;span class=&quot;pl-v&quot;&gt;int&lt;/span&gt;) {
  &lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;filtered&lt;/span&gt; []&lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt;
  &lt;span class=&quot;pl-k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;_&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;range&lt;/span&gt; list {
    &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; v &amp;gt; &lt;span class=&quot;pl-c1&quot;&gt;10&lt;/span&gt; {
      filtered = &lt;span class=&quot;pl-c1&quot;&gt;append&lt;/span&gt;(filtered, v)
    }
  }
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3&gt;nil is a valid slice&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;nil&lt;/code&gt; is a valid slice of length 0. This means that,&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;
&lt;p&gt;You should not return a slice of length zero explicitly. Return &lt;code&gt;nil&lt;/code&gt; instead.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; x == &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; {
  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; []&lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt;{}
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; x == &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; {
  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;To check if a slice is empty, always use &lt;code&gt;len(s) == 0&lt;/code&gt;. Do not check for &lt;code&gt;nil&lt;/code&gt;.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;isEmpty&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;s&lt;/span&gt; []&lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt;) &lt;span class=&quot;pl-v&quot;&gt;bool&lt;/span&gt; {
  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; s == &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;isEmpty&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;s&lt;/span&gt; []&lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt;) &lt;span class=&quot;pl-v&quot;&gt;bool&lt;/span&gt; {
  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;len&lt;/span&gt;(s) == &lt;span class=&quot;pl-c1&quot;&gt;0&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;The zero value (a slice declared with &lt;code&gt;var&lt;/code&gt;) is usable immediately without &lt;code&gt;make()&lt;/code&gt;.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-smi&quot;&gt;nums&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; []&lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt;{}
&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; or, nums := make([]int)&lt;/span&gt;

&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; add1 {
  nums = &lt;span class=&quot;pl-c1&quot;&gt;append&lt;/span&gt;(nums, &lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;)
}

&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; add2 {
  nums = &lt;span class=&quot;pl-c1&quot;&gt;append&lt;/span&gt;(nums, &lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt;)
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;nums&lt;/span&gt; []&lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt;

&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; add1 {
  nums = &lt;span class=&quot;pl-c1&quot;&gt;append&lt;/span&gt;(nums, &lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;)
}

&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; add2 {
  nums = &lt;span class=&quot;pl-c1&quot;&gt;append&lt;/span&gt;(nums, &lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt;)
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h3&gt;Reduce Scope of Variables&lt;/h3&gt;
&lt;p&gt;Where possible, reduce scope of variables. Do not reduce the scope if it conflicts with &lt;a href=&quot;https://github.com/uber-go/guide/blob/master/style.md#reduce-nesting&quot;&gt;Reduce Nesting&lt;/a&gt;.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ioutil.&lt;span class=&quot;pl-c1&quot;&gt;WriteFile&lt;/span&gt;(name, data, &lt;span class=&quot;pl-c1&quot;&gt;0644&lt;/span&gt;)
&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {
 &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ioutil.&lt;span class=&quot;pl-c1&quot;&gt;WriteFile&lt;/span&gt;(name, data, &lt;span class=&quot;pl-c1&quot;&gt;0644&lt;/span&gt;); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {
 &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;If you need a result of a function call outside of the if, then you should not try to reduce the scope.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;data&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ioutil.&lt;span class=&quot;pl-c1&quot;&gt;ReadFile&lt;/span&gt;(name); err == &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {
  err = cfg.&lt;span class=&quot;pl-c1&quot;&gt;Decode&lt;/span&gt;(data)
  &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {
    &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err
  }

  fmt.&lt;span class=&quot;pl-c1&quot;&gt;Println&lt;/span&gt;(cfg)
  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;
} &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {
  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-smi&quot;&gt;data&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; ioutil.&lt;span class=&quot;pl-c1&quot;&gt;ReadFile&lt;/span&gt;(name)
&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {
   &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err
}

&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; cfg.&lt;span class=&quot;pl-c1&quot;&gt;Decode&lt;/span&gt;(data); err != &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {
  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; err
}

fmt.&lt;span class=&quot;pl-c1&quot;&gt;Println&lt;/span&gt;(cfg)
&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3&gt;Avoid Naked Parameters&lt;/h3&gt;
&lt;p&gt;Naked parameters in function calls can hurt readability. Add C-style comments (&lt;code&gt;/* ... */&lt;/code&gt;) for parameter names when their meaning is not obvious.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; func printInfo(name string, isLocal, done bool)&lt;/span&gt;

&lt;span class=&quot;pl-c1&quot;&gt;printInfo&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;foo&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; func printInfo(name string, isLocal, done bool)&lt;/span&gt;

&lt;span class=&quot;pl-c1&quot;&gt;printInfo&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;foo&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;/*&lt;/span&gt; isLocal &lt;span class=&quot;pl-c&quot;&gt;*/&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;/*&lt;/span&gt; done &lt;span class=&quot;pl-c&quot;&gt;*/&lt;/span&gt;&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Better yet, replace naked &lt;code&gt;bool&lt;/code&gt; types with custom types for more readable and type-safe code. This allows more than just two states (true/false) for that parameter in the future.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;Region&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt;

&lt;span class=&quot;pl-k&quot;&gt;const&lt;/span&gt; (
  &lt;span class=&quot;pl-v&quot;&gt;UnknownRegion&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;Region&lt;/span&gt; = &lt;span class=&quot;pl-c1&quot;&gt;iota&lt;/span&gt;
  &lt;span class=&quot;pl-v&quot;&gt;Local&lt;/span&gt;
)

&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;Status&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt;

&lt;span class=&quot;pl-k&quot;&gt;const&lt;/span&gt; (
  &lt;span class=&quot;pl-v&quot;&gt;StatusReady&lt;/span&gt; = &lt;span class=&quot;pl-c1&quot;&gt;iota&lt;/span&gt; + &lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;
  &lt;span class=&quot;pl-v&quot;&gt;StatusDone&lt;/span&gt;
  &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Maybe we will have a StatusInProgress in the future.&lt;/span&gt;
)

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;printInfo&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;string&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;region&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;Region&lt;/span&gt;, &lt;span class=&quot;pl-v&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;Status&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Use Raw String Literals to Avoid Escaping&lt;/h3&gt;
&lt;p&gt;Go supports &lt;a href=&quot;https://golang.org/ref/spec#raw_string_lit&quot; rel=&quot;nofollow&quot;&gt;raw string literals&lt;/a&gt;, which can span multiple lines and include quotes. Use these to avoid hand-escaped strings which are much harder to read.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-smi&quot;&gt;wantError&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;unknown name:&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;test&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-smi&quot;&gt;wantError&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;`&lt;/span&gt;unknown error:&quot;test&quot;&lt;span class=&quot;pl-pds&quot;&gt;`&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3&gt;Initializing Struct References&lt;/h3&gt;
&lt;p&gt;Use &lt;code&gt;&amp;amp;T{}&lt;/code&gt; instead of &lt;code&gt;new(T)&lt;/code&gt; when initializing struct references so that it is consistent with the struct initialization.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-smi&quot;&gt;sval&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;T&lt;/span&gt;{Name: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;foo&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;}

&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; inconsistent&lt;/span&gt;
&lt;span class=&quot;pl-smi&quot;&gt;sptr&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;new&lt;/span&gt;(T)
sptr.&lt;span class=&quot;pl-smi&quot;&gt;Name&lt;/span&gt; = &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;bar&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-smi&quot;&gt;sval&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;T&lt;/span&gt;{Name: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;foo&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;}

&lt;span class=&quot;pl-smi&quot;&gt;sptr&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &amp;amp;T{Name: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;bar&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3&gt;Format Strings outside Printf&lt;/h3&gt;
&lt;p&gt;If you declare format strings for &lt;code&gt;Printf&lt;/code&gt;-style functions outside a string literal, make them &lt;code&gt;const&lt;/code&gt; values.&lt;/p&gt;
&lt;p&gt;This helps &lt;code&gt;go vet&lt;/code&gt; perform static analysis of the format string.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-smi&quot;&gt;msg&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;unexpected values &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-cce&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
fmt.&lt;span class=&quot;pl-c1&quot;&gt;Printf&lt;/span&gt;(msg, &lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;const&lt;/span&gt; msg = &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;unexpected values &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;%v&lt;/span&gt;&lt;span class=&quot;pl-cce&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
fmt.&lt;span class=&quot;pl-c1&quot;&gt;Printf&lt;/span&gt;(msg, &lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3&gt;Naming Printf-style Functions&lt;/h3&gt;
&lt;p&gt;When you declare a &lt;code&gt;Printf&lt;/code&gt;-style function, make sure that &lt;code&gt;go vet&lt;/code&gt; can detect it and check the format string.&lt;/p&gt;
&lt;p&gt;This means that you should use pre-defined &lt;code&gt;Printf&lt;/code&gt;-style function names if possible. &lt;code&gt;go vet&lt;/code&gt; will check these by default. See &lt;a href=&quot;https://golang.org/cmd/vet/#hdr-Printf_family&quot; rel=&quot;nofollow&quot;&gt;Printf family&lt;/a&gt; for more information.&lt;/p&gt;
&lt;p&gt;If using the pre-defined names is not an option, end the name you choose with f: &lt;code&gt;Wrapf&lt;/code&gt;, not &lt;code&gt;Wrap&lt;/code&gt;. &lt;code&gt;go vet&lt;/code&gt; can be asked to check specific &lt;code&gt;Printf&lt;/code&gt;-style names but they must end with f.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ go vet -printfuncs=wrapf,statusf
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;See also &lt;a href=&quot;https://kuzminva.wordpress.com/2017/11/07/go-vet-printf-family-check/&quot; rel=&quot;nofollow&quot;&gt;go vet: Printf family check&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Patterns&lt;/h2&gt;
&lt;h3&gt;Test Tables&lt;/h3&gt;
&lt;p&gt;Use table-driven tests with &lt;a href=&quot;https://blog.golang.org/subtests&quot; rel=&quot;nofollow&quot;&gt;subtests&lt;/a&gt; to avoid duplicating code when the core test logic is repetitive.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; func TestSplitHostPort(t *testing.T)&lt;/span&gt;

&lt;span class=&quot;pl-smi&quot;&gt;host&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;port&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; net.&lt;span class=&quot;pl-c1&quot;&gt;SplitHostPort&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;192.0.2.0:8000&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)
require.&lt;span class=&quot;pl-c1&quot;&gt;NoError&lt;/span&gt;(t, err)
assert.&lt;span class=&quot;pl-c1&quot;&gt;Equal&lt;/span&gt;(t, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;192.0.2.0&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, host)
assert.&lt;span class=&quot;pl-c1&quot;&gt;Equal&lt;/span&gt;(t, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;8000&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, port)

host, port, err = net.&lt;span class=&quot;pl-c1&quot;&gt;SplitHostPort&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;192.0.2.0:http&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)
require.&lt;span class=&quot;pl-c1&quot;&gt;NoError&lt;/span&gt;(t, err)
assert.&lt;span class=&quot;pl-c1&quot;&gt;Equal&lt;/span&gt;(t, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;192.0.2.0&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, host)
assert.&lt;span class=&quot;pl-c1&quot;&gt;Equal&lt;/span&gt;(t, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;http&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, port)

host, port, err = net.&lt;span class=&quot;pl-c1&quot;&gt;SplitHostPort&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;:8000&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)
require.&lt;span class=&quot;pl-c1&quot;&gt;NoError&lt;/span&gt;(t, err)
assert.&lt;span class=&quot;pl-c1&quot;&gt;Equal&lt;/span&gt;(t, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, host)
assert.&lt;span class=&quot;pl-c1&quot;&gt;Equal&lt;/span&gt;(t, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;8000&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, port)

host, port, err = net.&lt;span class=&quot;pl-c1&quot;&gt;SplitHostPort&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;1:8&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)
require.&lt;span class=&quot;pl-c1&quot;&gt;NoError&lt;/span&gt;(t, err)
assert.&lt;span class=&quot;pl-c1&quot;&gt;Equal&lt;/span&gt;(t, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;1&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, host)
assert.&lt;span class=&quot;pl-c1&quot;&gt;Equal&lt;/span&gt;(t, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;8&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, port)
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; func TestSplitHostPort(t *testing.T)&lt;/span&gt;

&lt;span class=&quot;pl-smi&quot;&gt;tests&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; []&lt;span class=&quot;pl-k&quot;&gt;struct&lt;/span&gt;{
  give     &lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;
  wantHost &lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;
  wantPort &lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;
}{
  {
    give:     &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;192.0.2.0:8000&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
    wantHost: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;192.0.2.0&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
    wantPort: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;8000&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
  },
  {
    give:     &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;192.0.2.0:http&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
    wantHost: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;192.0.2.0&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
    wantPort: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;http&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
  },
  {
    give:     &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;:8000&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
    wantHost: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
    wantPort: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;8000&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
  },
  {
    give:     &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;1:8&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
    wantHost: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;1&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
    wantPort: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;8&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
  },
}

&lt;span class=&quot;pl-k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;_&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;tt&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;range&lt;/span&gt; tests {
  t.&lt;span class=&quot;pl-c1&quot;&gt;Run&lt;/span&gt;(tt.&lt;span class=&quot;pl-smi&quot;&gt;give&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;func&lt;/span&gt;(t *testing.&lt;span class=&quot;pl-smi&quot;&gt;T&lt;/span&gt;) {
    &lt;span class=&quot;pl-smi&quot;&gt;host&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;port&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; net.&lt;span class=&quot;pl-c1&quot;&gt;SplitHostPort&lt;/span&gt;(tt.&lt;span class=&quot;pl-smi&quot;&gt;give&lt;/span&gt;)
    require.&lt;span class=&quot;pl-c1&quot;&gt;NoError&lt;/span&gt;(t, err)
    assert.&lt;span class=&quot;pl-c1&quot;&gt;Equal&lt;/span&gt;(t, tt.&lt;span class=&quot;pl-smi&quot;&gt;wantHost&lt;/span&gt;, host)
    assert.&lt;span class=&quot;pl-c1&quot;&gt;Equal&lt;/span&gt;(t, tt.&lt;span class=&quot;pl-smi&quot;&gt;wantPort&lt;/span&gt;, port)
  })
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Test tables make it easier to add context to error messages, reduce duplicate logic, and add new test cases.&lt;/p&gt;
&lt;p&gt;We follow the convention that the slice of structs is referred to as &lt;code&gt;tests&lt;/code&gt; and each test case &lt;code&gt;tt&lt;/code&gt;. Further, we encourage explicating the input and output values for each test case with &lt;code&gt;give&lt;/code&gt; and &lt;code&gt;want&lt;/code&gt; prefixes.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-smi&quot;&gt;tests&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; []&lt;span class=&quot;pl-k&quot;&gt;struct&lt;/span&gt;{
  give     &lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;
  wantHost &lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;
  wantPort &lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;
}{
  &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; ...&lt;/span&gt;
}

&lt;span class=&quot;pl-k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;_&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;tt&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;range&lt;/span&gt; tests {
  &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; ...&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Functional Options&lt;/h3&gt;
&lt;p&gt;Functional options is a pattern in which you declare an opaque &lt;code&gt;Option&lt;/code&gt; type that records information in some internal struct. You accept a variadic number of these options and act upon the full information recorded by the options on the internal struct.&lt;/p&gt;
&lt;p&gt;Use this pattern for optional arguments in constructors and other public APIs that you foresee needing to expand, especially if you already have three or more arguments on those functions.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Bad&lt;/th&gt;
&lt;th&gt;Good&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; package db&lt;/span&gt;

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;Connect&lt;/span&gt;(
  addr &lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;,
  timeout time.&lt;span class=&quot;pl-smi&quot;&gt;Duration&lt;/span&gt;,
  caching &lt;span class=&quot;pl-k&quot;&gt;bool&lt;/span&gt;,
) (*Connection, &lt;span class=&quot;pl-k&quot;&gt;error&lt;/span&gt;) {
  &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; ...&lt;/span&gt;
}

&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Timeout and caching must always be provided,&lt;/span&gt;
&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; even if the user wants to use the default.&lt;/span&gt;

db.&lt;span class=&quot;pl-c1&quot;&gt;Connect&lt;/span&gt;(addr, db.&lt;span class=&quot;pl-smi&quot;&gt;DefaultTimeout&lt;/span&gt;, db.&lt;span class=&quot;pl-smi&quot;&gt;DefaultCaching&lt;/span&gt;)
db.&lt;span class=&quot;pl-c1&quot;&gt;Connect&lt;/span&gt;(addr, newTimeout, db.&lt;span class=&quot;pl-smi&quot;&gt;DefaultCaching&lt;/span&gt;)
db.&lt;span class=&quot;pl-c1&quot;&gt;Connect&lt;/span&gt;(addr, db.&lt;span class=&quot;pl-smi&quot;&gt;DefaultTimeout&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;/*&lt;/span&gt; caching &lt;span class=&quot;pl-c&quot;&gt;*/&lt;/span&gt;&lt;/span&gt;)
db.&lt;span class=&quot;pl-c1&quot;&gt;Connect&lt;/span&gt;(addr, newTimeout, &lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;/*&lt;/span&gt; caching &lt;span class=&quot;pl-c&quot;&gt;*/&lt;/span&gt;&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;td&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; options &lt;span class=&quot;pl-k&quot;&gt;struct&lt;/span&gt; {
  timeout time.&lt;span class=&quot;pl-smi&quot;&gt;Duration&lt;/span&gt;
  caching &lt;span class=&quot;pl-k&quot;&gt;bool&lt;/span&gt;
}

&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Option overrides behavior of Connect.&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;Option&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;interface&lt;/span&gt; {
  &lt;span class=&quot;pl-c1&quot;&gt;apply&lt;/span&gt;(*options)
}

&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; optionFunc &lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt;(*options)

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;(&lt;span class=&quot;pl-v&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;optionFunc&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;apply&lt;/span&gt;&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;o&lt;/span&gt; *&lt;span class=&quot;pl-v&quot;&gt;options&lt;/span&gt;) {
  &lt;span class=&quot;pl-c1&quot;&gt;f&lt;/span&gt;(o)
}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;WithTimeout&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;time&lt;/span&gt;.&lt;span class=&quot;pl-v&quot;&gt;Duration&lt;/span&gt;) &lt;span class=&quot;pl-v&quot;&gt;Option&lt;/span&gt; {
  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;optionFunc&lt;/span&gt;(&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt;(o *options) {
    o.&lt;span class=&quot;pl-smi&quot;&gt;timeout&lt;/span&gt; = t
  })
}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;WithCaching&lt;/span&gt;(&lt;span class=&quot;pl-v&quot;&gt;cache&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;bool&lt;/span&gt;) &lt;span class=&quot;pl-v&quot;&gt;Option&lt;/span&gt; {
  &lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;optionFunc&lt;/span&gt;(&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt;(o *options) {
    o.&lt;span class=&quot;pl-smi&quot;&gt;caching&lt;/span&gt; = cache
  })
}

&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Connect creates a connection.&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-v&quot;&gt;Connect&lt;/span&gt;(
  addr &lt;span class=&quot;pl-k&quot;&gt;string&lt;/span&gt;,
  opts ...&lt;span class=&quot;pl-smi&quot;&gt;Option&lt;/span&gt;,
) (*Connection, &lt;span class=&quot;pl-k&quot;&gt;error&lt;/span&gt;) {
  &lt;span class=&quot;pl-smi&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; options{
    timeout: defaultTimeout,
    caching: defaultCaching,
  }

  &lt;span class=&quot;pl-k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;_&lt;/span&gt;, &lt;span class=&quot;pl-smi&quot;&gt;o&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;range&lt;/span&gt; opts {
    o.&lt;span class=&quot;pl-c1&quot;&gt;apply&lt;/span&gt;(&amp;amp;options)
  }

  &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; ...&lt;/span&gt;
}

&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; Options must be provided only if needed.&lt;/span&gt;

db.&lt;span class=&quot;pl-c1&quot;&gt;Connect&lt;/span&gt;(addr)
db.&lt;span class=&quot;pl-c1&quot;&gt;Connect&lt;/span&gt;(addr, db.&lt;span class=&quot;pl-c1&quot;&gt;WithTimeout&lt;/span&gt;(newTimeout))
db.&lt;span class=&quot;pl-c1&quot;&gt;Connect&lt;/span&gt;(addr, db.&lt;span class=&quot;pl-c1&quot;&gt;WithCaching&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt;))
db.&lt;span class=&quot;pl-c1&quot;&gt;Connect&lt;/span&gt;(
  addr,
  db.&lt;span class=&quot;pl-c1&quot;&gt;WithCaching&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt;),
  db.&lt;span class=&quot;pl-c1&quot;&gt;WithTimeout&lt;/span&gt;(newTimeout),
)
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;See also,&lt;/p&gt;
</description>
<pubDate>Fri, 11 Oct 2019 15:38:45 +0000</pubDate>
<dc:creator>robfig</dc:creator>
<og:image>https://avatars1.githubusercontent.com/u/19262598?s=400&amp;v=4</og:image>
<og:type>object</og:type>
<og:title>uber-go/guide</og:title>
<og:url>https://github.com/uber-go/guide</og:url>
<og:description>The Uber Go Style Guide. Contribute to uber-go/guide development by creating an account on GitHub.</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://github.com/uber-go/guide/blob/master/style.md</dc:identifier>
</item>
<item>
<title>Twitter, Facebook, WhatsApp and Instagram Restricted in Southern Turkey</title>
<link>https://netblocks.org/reports/twitter-facebook-whatsapp-and-instagram-restricted-in-southern-turkey-oy9RzE83</link>
<guid isPermaLink="true" >https://netblocks.org/reports/twitter-facebook-whatsapp-and-instagram-restricted-in-southern-turkey-oy9RzE83</guid>
<description>&lt;aside class=&quot;mashsb-container mashsb-main mashsb-stretched&quot;&gt;&amp;#13;
                &lt;/aside&gt;&lt;!-- Share buttons by mashshare.net - Version: 3.3.5--&gt;&lt;p&gt;Network data from the NetBlocks internet observatory confirm that Turkey has blocked access to social media and messaging platforms in the southern cities of Gaziantep, Şanlıurfa and Hatay, as the country launches military operation Peace Spring into northern Syria.&lt;/p&gt;
&lt;p&gt;Internet performance metrics show that Twitter, Facebook, WhatsApp and Instagram are currently blocked by leading internet service provider TTNet, corroborating reports emerging from users based in in the affected region. Access remains possible via other fixed-line and mobile providers, and VPN tools are effective in circumventing the blocks.&lt;/p&gt;
&lt;blockquote class=&quot;twitter-tweet&quot; data-width=&quot;550&quot; data-dnt=&quot;true&quot;&gt;
&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;Confirmed: Twitter, Facebook, WhatsApp and Instagram restricted in parts of southern &lt;a href=&quot;https://twitter.com/hashtag/Turkey?src=hash&amp;amp;ref_src=twsrc%5Etfw&quot;&gt;#Turkey&lt;/a&gt;; real-time network data show social media now blocked in Gaziantep, Şanlıurfa and Hatay by TTNet amid &lt;a href=&quot;https://twitter.com/hashtag/PeaceSpring?src=hash&amp;amp;ref_src=twsrc%5Etfw&quot;&gt;#PeaceSpring&lt;/a&gt; military operations into northern Syria 📉&lt;/p&gt;
&lt;p&gt;📰 &lt;a href=&quot;https://t.co/zx4QGrE56B&quot;&gt;https://t.co/zx4QGrE56B&lt;/a&gt; &lt;a href=&quot;https://t.co/jAO9YtM8vq&quot;&gt;pic.twitter.com/jAO9YtM8vq&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;— NetBlocks.org (@netblocks) &lt;a href=&quot;https://twitter.com/netblocks/status/1182529801015443456?ref_src=twsrc%5Etfw&quot;&gt;October 11, 2019&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;h3&gt;Wartime social media restrictions now in effect&lt;/h3&gt;
&lt;p&gt;The blocking measure marks the reinstatement of wartime social media restrictions, as the Turkish Armed Forces and Free Syrian Army launch an expansive incursion into northern Syria targeting PKK/YPG and IS groups in the first phase of &lt;a href=&quot;https://www.aa.com.tr/en/operation-peace-spring/operation-peace-spring-starts-in-n-syria-erdogan/1607147&quot;&gt;&lt;em&gt;Operation Peace Spring&lt;/em&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;A similar measure was previously invoked during the &lt;a href=&quot;https://turkeyblocks.org/2016/08/25/social-media-blocked-turkey/&quot;&gt;initial phase of &lt;em&gt;Operation Euphrates Shield&lt;/em&gt;&lt;/a&gt; on Thursday, 25 August 2016 when social media platforms Facebook, Twitter, YouTube, Vimeo and Instagram were blocked throughout Turkey for a period of seven hours:&lt;/p&gt;
&lt;blockquote class=&quot;twitter-tweet&quot; data-width=&quot;550&quot; data-dnt=&quot;true&quot;&gt;
&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;Confirmed: Twitter, Facebook &amp;amp; YouTube blocked by throttling in &lt;a href=&quot;https://twitter.com/hashtag/Turkey?src=hash&amp;amp;ref_src=twsrc%5Etfw&quot;&gt;#Turkey&lt;/a&gt; at 11:07PM – reason unknown &lt;a href=&quot;https://t.co/vEGSt0jvWU&quot;&gt;pic.twitter.com/vEGSt0jvWU&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;— Turkey Blocks (@TurkeyBlocks) &lt;a href=&quot;https://twitter.com/TurkeyBlocks/status/768904040839118848?ref_src=twsrc%5Etfw&quot;&gt;August 25, 2016&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;h3&gt;Why has social media been blocked in parts of southern Turkey?&lt;/h3&gt;
&lt;p&gt;Although no broadcast ban has yet been issued to the public, it is understood that the measures are intended to protect details surrounding troop and equipment deployments, particularly the sharing of photographs and videos of convoys which could compromise tactical operations.&lt;/p&gt;
&lt;p&gt;Turkey passed an internet “killswitch” into law in 2016, permitting the ICTA regulatory authority to “partially or entirely” suspend internet access due to war or national security needs without the need for ministerial oversight:&lt;/p&gt;
&lt;blockquote class=&quot;twitter-tweet&quot; data-width=&quot;550&quot; data-dnt=&quot;true&quot;&gt;
&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;Could &lt;a href=&quot;https://twitter.com/hashtag/Turkey?src=hash&amp;amp;ref_src=twsrc%5Etfw&quot;&gt;#Turkey&lt;/a&gt;'s new wartime net killswitch amendment explain mystery social media blackout?&lt;a href=&quot;https://t.co/ZpJ6jixhsB&quot;&gt;https://t.co/ZpJ6jixhsB&lt;/a&gt; &lt;a href=&quot;https://t.co/W2NcY2twlU&quot;&gt;pic.twitter.com/W2NcY2twlU&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;— Turkey Blocks (@TurkeyBlocks) &lt;a href=&quot;https://twitter.com/TurkeyBlocks/status/769018659004149760?ref_src=twsrc%5Etfw&quot;&gt;August 26, 2016&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;h3&gt;When was the last time Turkey blocked social media?&lt;/h3&gt;
&lt;p&gt;The new restrictions are the first to be implemented &lt;a href=&quot;https://turkeyblocks.org/2016/12/23/social-media-shutdowns-turkey-isis-releases-soldier-video/&quot;&gt;since December 2016&lt;/a&gt;, when Turkey blocked social media nationally to prevent the sharing of a video showing the immolation of Turkish soldiers by the IS group:&lt;/p&gt;
&lt;blockquote class=&quot;twitter-tweet&quot; data-width=&quot;550&quot; data-dnt=&quot;true&quot;&gt;
&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;Confirmed: Twitter, Facebook and YouTube blocked in &lt;a href=&quot;https://twitter.com/hashtag/Turkey?src=hash&amp;amp;ref_src=twsrc%5Etfw&quot;&gt;#Turkey&lt;/a&gt; after &lt;a href=&quot;https://twitter.com/hashtag/IS?src=hash&amp;amp;ref_src=twsrc%5Etfw&quot;&gt;#IS&lt;/a&gt; uploads soldier video&lt;a href=&quot;https://t.co/xeOXVf8tP2&quot;&gt;https://t.co/xeOXVf8tP2&lt;/a&gt; &lt;a href=&quot;https://t.co/XZ9kWCpiF7&quot;&gt;pic.twitter.com/XZ9kWCpiF7&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;— Turkey Blocks (@TurkeyBlocks) &lt;a href=&quot;https://twitter.com/TurkeyBlocks/status/812045230660849664?ref_src=twsrc%5Etfw&quot;&gt;December 22, 2016&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Unlike previous recorded incidents, this is the first time Turkey has imposed a sub-national social media ban, demonstrating an advance in technical capability which facilitates geographically constrained network filtering.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://netblocks.org/wp-content/uploads/sites/8/2019/10/southern-turkey-social-media-block-2019-10-11.png&quot;&gt;&lt;img class=&quot;aligncenter size-large wp-image-3756&quot; src=&quot;https://netblocks.org/wp-content/uploads/sites/8/2019/10/southern-turkey-social-media-block-2019-10-11-1024x766.png&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;598&quot; srcset=&quot;https://netblocks.org/wp-content/uploads/sites/8/2019/10/southern-turkey-social-media-block-2019-10-11-1024x766.png 1024w, https://netblocks.org/wp-content/uploads/sites/8/2019/10/southern-turkey-social-media-block-2019-10-11-300x224.png 300w, https://netblocks.org/wp-content/uploads/sites/8/2019/10/southern-turkey-social-media-block-2019-10-11-768x575.png 768w&quot; sizes=&quot;(max-width: 800px) 100vw, 800px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;

&lt;hr/&gt;&lt;h3&gt;Methodology&lt;/h3&gt;
&lt;p&gt;Internet performance and service reachability are determined via NetBlocks web probe measurements. Each measurement consists of latency round trip time, outage type and autonomous system identity aggregated in real-time to assess service availability and latency in a given country across service multiple network providers.&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;&lt;small&gt; &lt;a href=&quot;https://netblocks.org&quot;&gt;NetBlocks&lt;/a&gt; is a civil society group working at the intersection of digital rights, cyber-security and internet governance. Independent and non-partisan, NetBlocks strives for an open and inclusive digital future for all.&lt;/small&gt;&lt;/p&gt;
&lt;p&gt;&lt;small&gt;[ &lt;a href=&quot;https://netblocks.org/files/netblocks-handbook.pdf&quot;&gt;methodology handbook&lt;/a&gt; | &lt;a href=&quot;https://netblocks.org/press&quot;&gt;press&lt;/a&gt; | &lt;a href=&quot;https://netblocks.org/contact&quot;&gt;contact&lt;/a&gt; ] Graphics and visualizations provided under a free and open license for reuse with clear attribution.&lt;/small&gt;&lt;/p&gt;
&lt;aside class=&quot;mashsb-container mashsb-main mashsb-stretched&quot;&gt;&amp;#13;
                &lt;/aside&gt;&lt;!-- Share buttons by mashshare.net - Version: 3.3.5--&gt;</description>
<pubDate>Fri, 11 Oct 2019 13:42:37 +0000</pubDate>
<dc:creator>infodocket</dc:creator>
<og:type>article</og:type>
<og:title>Twitter, Facebook, WhatsApp and Instagram restricted in southern Turkey - NetBlocks</og:title>
<og:description>Network data from the NetBlocks internet observatory confirm that Turkey has blocked access to social media and messaging platforms in the southern cities of Gaziantep, Şanlıurfa and Hatay, as the ...</og:description>
<og:url>https://netblocks.org/reports/twitter-facebook-whatsapp-and-instagram-restricted-in-southern-turkey-oy9RzE83</og:url>
<og:image>https://netblocks.org/wp-content/uploads/sites/8/2019/10/southern-turkey-social-media-block-2019-10-11.png</og:image>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://netblocks.org/reports/twitter-facebook-whatsapp-and-instagram-restricted-in-southern-turkey-oy9RzE83</dc:identifier>
</item>
<item>
<title>Why Enterprise Software Sucks</title>
<link>https://twitter.com/random_walker/status/1182635589604171776</link>
<guid isPermaLink="true" >https://twitter.com/random_walker/status/1182635589604171776</guid>
<description>&lt;p&gt;Other baby outfits are meant for parents. They’re marked &quot;Easy On, Easy Off&quot; or some such, and they really mean it. Zippers aren't easy enough so they fasten using MAGNETS. A busy parent (i.e. a parent) can change an outfit in 5 seconds, one handed, before rushing to work.&lt;/p&gt;
</description>
<pubDate>Fri, 11 Oct 2019 13:38:04 +0000</pubDate>
<dc:creator>randomwalker</dc:creator>
<dc:format>text/html</dc:format>
<dc:identifier>https://mobile.twitter.com/random_walker/status/1182635589604171776</dc:identifier>
</item>
<item>
<title>Alexei Leonov, the first human to walk in space, has died</title>
<link>https://www.cbsnews.com/news/alexei-leonov-died-cosmonaut-first-man-to-walk-in-space-dead-age-85-cause-of-death-not-released-2019-10-11/</link>
<guid isPermaLink="true" >https://www.cbsnews.com/news/alexei-leonov-died-cosmonaut-first-man-to-walk-in-space-dead-age-85-cause-of-death-not-released-2019-10-11/</guid>
<description>&lt;p&gt;Legendary cosmonaut Alexei Leonov, the first human to walk in space — an experience that almost killed him — and later the commander of the Russian Soyuz spacecraft that docked with a NASA Apollo capsule, symbolizing a historic thaw in the Cold War, has died after a long illness, the Russian space agency confirmed Friday. He was 85.&lt;/p&gt;&lt;p&gt;An accomplished amateur artist and a widely respected statesman in the international space community, Leonov remained a lifelong friend of his Apollo-Soyuz Test Project crewmates and a source of inspiration to a younger generation of cosmonauts who carried his photo to the International Space Station and marked his 85th birthday during a spacewalk in May.&lt;/p&gt;
&lt;p&gt;&quot;Leonov was certainly a cosmonaut's cosmonaut, he was stout of mind, body and heart,&quot; James Oberg, an expert on the Russian space program, said in an interview with CBS Radio. &quot;He came through as a real tough guy who could handle problems, including almost being killed on his first spacewalk. But he also was a very decent human being.&quot;&lt;/p&gt;
&lt;span class=&quot;img embed__content&quot;&gt;&lt;img src=&quot;https://cbsnews3.cbsistatic.com/hub/i/r/2019/10/11/b0702525-cfd9-47b7-b514-9963e783f988/thumbnail/620x413/e1c5e827f7970aac1612a5dcf353ab72/cosmonaut-gettyimages-501414014.jpg#&quot; alt=&quot;The UK Watches As British Astronaut Launches Into Space &quot; height=&quot;413&quot; width=&quot;620&quot; class=&quot; lazyload&quot; data-srcset=&quot;https://cbsnews3.cbsistatic.com/hub/i/r/2019/10/11/b0702525-cfd9-47b7-b514-9963e783f988/thumbnail/620x413/e1c5e827f7970aac1612a5dcf353ab72/cosmonaut-gettyimages-501414014.jpg 1x, https://cbsnews2.cbsistatic.com/hub/i/r/2019/10/11/b0702525-cfd9-47b7-b514-9963e783f988/thumbnail/1240x826/b09fd65cbf704fbc3343b03ca34e6970/cosmonaut-gettyimages-501414014.jpg 2x&quot; srcset=&quot;data:image/svg+xml,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%20620%20413'%2F%3E&quot;/&gt;&lt;/span&gt; &lt;span class=&quot;embed__caption&quot;&gt;Alexei Leonov listens to Danish astronaut Andreas Mogensen speak at the London Science Museum ahead of the launch of space mission Principia on December 15, 2015 in London, United Kingdom.&lt;/span&gt; &lt;span class=&quot;embed__credit&quot;&gt;Ben Pruchnie / Getty Images&lt;/span&gt;
&lt;p&gt;Said retired astronaut Scott Kelly in a Twitter posting: Cosmonaut #AlexeiLeonov passed away today in Moscow. He was not only the first person to walk in space, but also an accomplished artist. Most significant, however, he was a great human being. Fair winds and following seas my friend.&quot;&lt;/p&gt;
&lt;div class=&quot;embed__content-wrapper&quot; readability=&quot;27.245253164557&quot;&gt;
&lt;blockquote class=&quot;twitter-tweet&quot; readability=&quot;8.1329113924051&quot;&gt;
&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;Cosmonaut &lt;a href=&quot;https://twitter.com/hashtag/AlexeiLeonov?src=hash&amp;amp;ref_src=twsrc%5Etfw&quot; rel=&quot;nofollow noopener&quot;&gt;#AlexeiLeonov&lt;/a&gt; passed away today in Moscow. He was not only the first person to walk in space, but also an accomplished artist. Most significant, however, he was a great human being. Fair winds and following seas my friend. &lt;a href=&quot;https://twitter.com/hashtag/RIP?src=hash&amp;amp;ref_src=twsrc%5Etfw&quot; rel=&quot;nofollow noopener&quot;&gt;#RIP&lt;/a&gt; &lt;a href=&quot;https://t.co/sOELAZMPte&quot; rel=&quot;nofollow noopener&quot;&gt;pic.twitter.com/sOELAZMPte&lt;/a&gt;&lt;/p&gt;
— Scott Kelly (@StationCDRKelly) &lt;a href=&quot;https://twitter.com/StationCDRKelly/status/1182663962028138496?ref_src=twsrc%5Etfw&quot; rel=&quot;nofollow noopener&quot;&gt;October 11, 2019&lt;/a&gt;&lt;/blockquote&gt;
&lt;/div&gt;
&lt;p&gt;The news of Leonov's passing came as two astronauts aboard the International Space Station were &lt;span class=&quot;link&quot;&gt;&lt;a href=&quot;https://www.cbsnews.com/news/nasa-spacewalkers-continue-space-station-battery-swap-outs/&quot; data-invalid-url-rewritten-http=&quot;&quot;&gt;beginning a 6.5 hour spacewalk&lt;/a&gt;&lt;/span&gt; to replace batteries in the lab's solar power system, the 220th spacewalk devoted to station assembly and maintenance since construction began in 1998.&lt;/p&gt;
&lt;div class=&quot;content-recirculation__wrapper&quot;&gt;
&lt;h4 class=&quot;content-recirculation__headline&quot;&gt;Trending News&lt;/h4&gt;
&lt;/div&gt;
&lt;p&gt;&quot;Here's a toast to a great man whose kindness and mentorship impacted so many explorers,&quot; tweeted astronaut Jack Fischer. &quot;On a day when two astronauts carry on the spacewalking tradition he started, his legacy is obvious.&quot;&lt;/p&gt;
&lt;p&gt;Added moonwalker Buzz Aldrin: &quot;The cosmonaut ambassador to the world. A great pleasure to be his friend. He tried for the moon but we made it. ... Farewell and Godspeed Alexi.&quot;&lt;/p&gt;
&lt;p&gt;Speaking to the NASA interviewer 50 years later, Leonov said &quot;I really don't know how I managed to turn and go with my legs first. I was running a fever, I was sweating, I could not see much because of the sweat.&quot;&lt;/p&gt;
&lt;span class=&quot;img embed__content&quot;&gt;&lt;img src=&quot;https://cbsnews3.cbsistatic.com/hub/i/r/2019/10/11/68fff4e2-943a-4b7a-ab3e-e9dcda886fa1/thumbnail/620x412/02cfc4ddc0a078f96a3e9219c38008b5/101119-leonov-eva.jpg#&quot; alt=&quot;101119-leonov-eva.jpg &quot; height=&quot;412&quot; width=&quot;620&quot; class=&quot; lazyload&quot; data-srcset=&quot;https://cbsnews3.cbsistatic.com/hub/i/r/2019/10/11/68fff4e2-943a-4b7a-ab3e-e9dcda886fa1/thumbnail/620x412/02cfc4ddc0a078f96a3e9219c38008b5/101119-leonov-eva.jpg 1x, https://cbsnews3.cbsistatic.com/hub/i/r/2019/10/11/68fff4e2-943a-4b7a-ab3e-e9dcda886fa1/thumbnail/1240x824/a4899362a0609cfb32cf412de834363a/101119-leonov-eva.jpg 2x&quot; srcset=&quot;data:image/svg+xml,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%20620%20412'%2F%3E&quot;/&gt;&lt;/span&gt; &lt;span class=&quot;embed__caption&quot;&gt;Alexei Leonov, floating outside his Voskhod 2 spacecraft in March 1965 during history's first spacewalk.&lt;/span&gt; &lt;span class=&quot;embed__credit&quot;&gt;Fédération Aéronautique Internationale via CollectSpace.com&lt;/span&gt;
&lt;p&gt;Oberg said Leonov &quot;always regretted and apologized in later years that he had been given written statements to give the press about how easy it was and how their training was perfect when, in fact, he said, it was just the opposite. He nearly died.&quot;&lt;/p&gt;
&lt;p&gt;Leonov and Belyayev returned to Earth on March 19, 1965, landing nearly 240 miles off course after their Soyuz descent module did not properly separate from from an upper compartment. Compared to the pinpoint landings Soyuz spacecraft make today returning from the International Space Station, Leonov's landing reads like an action adventure.&lt;/p&gt;
&lt;p&gt;&quot;The capsule's radio beacon antenna broke off while landing among the trees, making it more difficult for the rescue forces to locate them,&quot; Newkirk wrote. &quot;Since there were no clearings nearby for helicopters to land, it would be the next day until rescue forces reached the capsule.&lt;/p&gt;
&lt;p&gt;&quot;The cosmonauts were forced to retreat to the capsule after meeting timber wolves that night and had to hold the hatch closed ... while trying to rest in the very uncomfortable spacesuits. After skiing to recovery helicopters the next day, they were airlifted back to Star City.&quot;&lt;/p&gt;

&lt;p&gt;Leonov's second spaceflight came in July 1975 when he and cosmonaut Valeri Kubasov blasted off from the Baikonur Cosmodrome and then stood by in orbit while a NASA Apollo capsule carrying astronauts Tom Stafford, Vance Brand and Mercury 7 astronaut Deke Slayton caught up for a historic rendezvous.&lt;/p&gt;
&lt;span class=&quot;img embed__content&quot;&gt;&lt;img src=&quot;https://cbsnews3.cbsistatic.com/hub/i/r/2019/10/11/6b7d1998-8ff0-41ac-a9d9-9d45b76d8b77/thumbnail/620x494/7fa420127c97b3e598b537f940a8cfab/alexei-leonov-gettyimages-51504238.jpg#&quot; alt=&quot;Commander of the Soviet crew of Soyuz, Alexei Leon &quot; height=&quot;494&quot; width=&quot;620&quot; class=&quot; lazyload&quot; data-srcset=&quot;https://cbsnews3.cbsistatic.com/hub/i/r/2019/10/11/6b7d1998-8ff0-41ac-a9d9-9d45b76d8b77/thumbnail/620x494/7fa420127c97b3e598b537f940a8cfab/alexei-leonov-gettyimages-51504238.jpg 1x, https://cbsnews1.cbsistatic.com/hub/i/r/2019/10/11/6b7d1998-8ff0-41ac-a9d9-9d45b76d8b77/thumbnail/1240x988/16fdaa7c82a5818a3c1557efb2487be1/alexei-leonov-gettyimages-51504238.jpg 2x&quot; srcset=&quot;data:image/svg+xml,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%20620%20494'%2F%3E&quot;/&gt;&lt;/span&gt; &lt;span class=&quot;embed__caption&quot;&gt;Commander of the Soviet crew of Soyuz, Alexei Leonov (L) and commander of the American crew of Apollo, Thomas Stafford (R), shake hands 17 July 1975 in the space, somewhere over Western Germany, after the Apollo-Soyuz docking maneuvers.&lt;/span&gt; &lt;span class=&quot;embed__credit&quot;&gt;AFP/Getty Images&lt;/span&gt;
&lt;p&gt;The mission grew out of a treaty signed by the United States and the Soviet Union in 1972. It became one of the symbolic highlights of the era of detente when Cold War relations between the United States and the Soviet Union were easy after three decades of nuclear brinksmanship.&lt;/p&gt;
&lt;p&gt;After their linkup in space, Leonov welcomed Stafford with a handshake, smiling broadly. He would be promoted to general after the flight and go on to hold a variety of posts in the Russian space program and remained an active observer and a familiar face at Soyuz launchings long after retiring from an active role.&lt;/p&gt;
&lt;p&gt;He and Stafford remained life-long friends.&lt;/p&gt;
&lt;p&gt;&quot;He was absolutely open and honest,&quot; Oberg said. &quot;He didn't think twice about the effect or propriety of what he was going to be saying. He had his opinions, they were very well grounded in reality. ... But he was also genuinely compassionate and generous to people around him. So, as a fine human being, the first person to walk among the stars and now walking further among the stars, he was a marvelous selection, and the first person to shake hands in space with an American.&quot;&lt;/p&gt;
&lt;p&gt;A close friend of cosmonaut Yuri Gagarin, the first human in space, Leonov joined Pavel Belyayev aboard the two-seat Voskhod 2 spacecraft and rocketed into orbit on March 18, 1965. It was the seventh piloted spaceflight launched by the Soviet Union and the 16th overall.&lt;/p&gt;
&lt;p&gt;The flight came in the heated early days of the Cold War space race when the Soviet Union was chalking up an impressive lists of &quot;firsts&quot; while carrying out flights in near total secrecy. Knowing NASA was planning spacewalks in its Gemini program, Russia beat the U.S. space agency to the punch once again with the Voskhod 2 mission.&lt;/p&gt;
&lt;span class=&quot;img embed__content&quot;&gt;&lt;img src=&quot;https://cbsnews1.cbsistatic.com/hub/i/r/2019/10/11/26008182-03b3-467d-9b84-95be38eaf616/thumbnail/620x412/e83953ff53d67b4075cfa461fdecfddd/101119-leonov-hawking.jpg#&quot; alt=&quot;101119-leonov-hawking.jpg &quot; height=&quot;412&quot; width=&quot;620&quot; class=&quot; lazyload&quot; data-srcset=&quot;https://cbsnews1.cbsistatic.com/hub/i/r/2019/10/11/26008182-03b3-467d-9b84-95be38eaf616/thumbnail/620x412/e83953ff53d67b4075cfa461fdecfddd/101119-leonov-hawking.jpg 1x, https://cbsnews3.cbsistatic.com/hub/i/r/2019/10/11/26008182-03b3-467d-9b84-95be38eaf616/thumbnail/1240x824/7dce4fc866718c9a771cc783811136b2/101119-leonov-hawking.jpg 2x&quot; srcset=&quot;data:image/svg+xml,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%20620%20412'%2F%3E&quot;/&gt;&lt;/span&gt; &lt;span class=&quot;embed__caption&quot;&gt;Alexei Leonov presents a drawing of Stephen Hawking to the physicist during a 2015 visit to the Science Museum, London.&lt;/span&gt; &lt;span class=&quot;embed__credit&quot;&gt;Science Museum Group&lt;/span&gt;
&lt;p&gt;Using a jury-rigged inflatable airlock on the side of the Voskhod spacecraft, Leonov floated outside his spacecraft for what turned out to be a 12-minute spacewalk. Grainy video and photos released after the fact showed the cosmonaut floating against the backdrop of planet Earth, arms spread out like a skydiver.&lt;/p&gt;

&lt;p&gt;&quot;The most vivid impression of my life has to do with the fact that not only was I in a (spacesuit), but I found myself to be surrounded with the stars,&quot; he told a NASA interviewer on the 50th anniversary of the historic outing. &quot;Stars were on the right hand side and the Earth was on the left hand side, and there was just enormous, unbelievable silence.&lt;/p&gt;
&lt;p&gt;&quot;The ability to see the whole Earth as a globe is something that was extremely attractive, and I could easily recognize the Black Sea, the Crimea, Romania, Bulgaria, Italy. ... and it was all within minutes, if not seconds,&quot; he said. &quot;But the most (lasting) impression had to do with the silence.&lt;/p&gt;
&lt;p&gt;&quot;I hear how my heart was pounding,&quot; he recalled, speaking through a translator, &quot;I could hear myself breathe.&quot;&lt;/p&gt;
&lt;p&gt;He said the British writer Arthur C. Clarke and director Stanley Kubrick, working on the film &quot;2001: A Space Odyssey,&quot; captured that impression in the movie's soundtrack. And then there were the stars.&lt;/p&gt;
&lt;p&gt;&quot;The stars were very bright,&quot; Leonov said. &quot;They were everywhere. They were above, they were beneath. On the ground, you can only see stars up in the sky. In space, they are everywhere.&quot;&lt;/p&gt;
&lt;p&gt;Because of the stiffness of his pressurized spacesuit, Leonov ran into major problems getting back inside the Voskhod spacecraft, only succeeding by risking the bends and lowering the pressure enough to squeeze through the hatch like a contortionist.&lt;/p&gt;
&lt;p&gt;&quot;After several futile attempts at bending his legs into the airlock, he had to dangerously reduce air pressure in the suit ... to reduce the ballooning effect,&quot; Dennis Newkirk wrote in &quot;Almanac of Soviet Manned Space Flight.&quot;&lt;/p&gt;

&lt;p&gt;&quot;He found he still could not bend enough to go in feet first, and instead, went head first into the airlock. He somehow managed to turn around in the flexible airlock tube to reach the outer hatch and close it. ... Leonov later said said he was on the verge of a heat stoke and covered with sweat. He lost (12 pounds) of body weight that day.&quot;&lt;/p&gt;
</description>
<pubDate>Fri, 11 Oct 2019 12:52:00 +0000</pubDate>
<dc:creator>sohkamyung</dc:creator>
<og:type>article</og:type>
<og:url>https://www.cbsnews.com/news/alexei-leonov-died-cosmonaut-first-man-to-walk-in-space-dead-age-85-cause-of-death-not-released-2019-10-11/</og:url>
<og:title>Alexei Leonov, the first human to walk in space, has died at age 85</og:title>
<og:description>Alexei Leonov, a Soviet-era cosmonaut, was the first man to conduct a spacewalk in 1965 – an experience that almost killed him</og:description>
<og:image>https://cbsnews3.cbsistatic.com/hub/i/r/2019/10/11/6b7d1998-8ff0-41ac-a9d9-9d45b76d8b77/thumbnail/1200x630/b67d7a25aa33044e5985161321652e23/alexei-leonov-gettyimages-51504238.jpg</og:image>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.cbsnews.com/news/alexei-leonov-died-cosmonaut-first-man-to-walk-in-space-dead-age-85-cause-of-death-not-released-2019-10-11/</dc:identifier>
</item>
<item>
<title>Exposure to air pollution is linked to an increase in violent crime</title>
<link>https://www.economist.com/graphic-detail/2019/10/09/exposure-to-air-pollution-is-linked-to-an-increase-in-violent-crime</link>
<guid isPermaLink="true" >https://www.economist.com/graphic-detail/2019/10/09/exposure-to-air-pollution-is-linked-to-an-increase-in-violent-crime</guid>
<description>&lt;p&gt;AIR POLLUTION is nothing to sniff at. Perhaps a third of all deaths from strokes, lung cancer and respiratory diseases can be linked to toxic air. In some cities, breathing outdoors is as dangerous as smoking 25 cigarettes a day. But whereas the health problems associated with air pollution can take years to manifest themselves, new research highlights a much more immediate—and violent—risk.&lt;/p&gt;
&lt;p&gt;Breathing dirty air is linked to aggressive behaviour, according to a &lt;a href=&quot;https://www.sciencedirect.com/science/article/abs/pii/S0095069619301901&quot;&gt;new paper&lt;/a&gt; by Jesse Burkhardt and his colleagues at Colorado State University and the University of Minnesota. Using crime data from the Federal Bureau of Investigation and air-pollution data from the Environmental Protection Agency, the authors analyse the link between air pollution and violent crime in 397 American counties between 2006 and 2013.&lt;/p&gt;

&lt;div class=&quot;newsletter-form newsletter-form--inline&quot; readability=&quot;6&quot;&gt;
&lt;div class=&quot;newsletter-form__message&quot; readability=&quot;7&quot;&gt;&lt;strong&gt;Get our daily newsletter&lt;/strong&gt;
&lt;p&gt;Upgrade your inbox and get our Daily Dispatch and Editor's Picks.&lt;/p&gt;
&lt;/div&gt;

&lt;/div&gt;
&lt;p&gt;They find that a 10% increase in same-day exposure to PM2.5 (particulate matter less than 2.5 microns in diameter) is associated with a 0.14% increase in violent crimes, such as assault. An equivalent increase in exposure to ozone, an air pollutant, is associated with a 0.3% jump in such crimes. Pollution levels can easily rise by much more than that. Last November, owing to wildfires, PM2.5 levels in San Francisco rose seven times higher than average. Correlation is not causation of course (there may, for example, be a third variable affecting both pollution and crime) and the authors are cautious not to speculate about the precise mechanism by which contaminated air might lead to more rapes or robberies.&lt;/p&gt;
&lt;p&gt;This is not the first time researchers have identified a relationship between pollution and crime. In the 1970s America banned lead-based paint and began phasing out leaded petrol; two decades later, crime fell. Many researchers now argue that the two developments were linked. In a &lt;a href=&quot;https://www.nber.org/papers/w13097&quot;&gt;paper&lt;/a&gt; published in 2007, Jessica Wolpaw Reyes, an economist at Amherst College, estimated that the drop in lead exposure experienced by American children in the 1970s and 1980s may explain over half of the decline in violent crime in the 1990s.&lt;/p&gt;
&lt;p&gt;The findings of Mr Burkhardt and his co-authors suggest that cleaner air could reduce violent crime still further. The benefits would be substantial. The authors estimate that a 10% reduction in daily PM2.5 and ozone exposure could save America $1.4bn a year through reduced assaults (the savings range from the cost of the immediate police response to lost productivity due to injuries). A lot of people get angry about pollution. Now it seems they may do so because of it, too.&lt;/p&gt;
</description>
<pubDate>Fri, 11 Oct 2019 10:23:47 +0000</pubDate>
<dc:creator>pseudolus</dc:creator>
<og:description>Dirty air may be even more dangerous than previously thought</og:description>
<og:image>https://www.economist.com/sites/default/files/images/2019/10/articles/main/20191012_woc871.png</og:image>
<og:type>article</og:type>
<og:url>https://www.economist.com/graphic-detail/2019/10/09/exposure-to-air-pollution-is-linked-to-an-increase-in-violent-crime</og:url>
<og:title>Exposure to air pollution is linked to an increase in violent crime</og:title>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.economist.com/graphic-detail/2019/10/09/exposure-to-air-pollution-is-linked-to-an-increase-in-violent-crime</dc:identifier>
</item>
<item>
<title>600k concurrent websocket connections on AWS using Node.js (2015)</title>
<link>https://blog.jayway.com/2015/04/13/600k-concurrent-websocket-connections-on-aws-using-node-js/</link>
<guid isPermaLink="true" >https://blog.jayway.com/2015/04/13/600k-concurrent-websocket-connections-on-aws-using-node-js/</guid>
<description>&lt;p&gt;I recently faced the challenge to get as much power as possible out of a AWS EC2 instance at the lowest possible cost using concurrent persistent websockets.&lt;/p&gt;
&lt;p&gt;To do this I needed to use a &lt;span&gt;event-driven, non-blocking&lt;/span&gt; runtime environment. For this particular purpose Node.js is excellent with its lightweight and fast Chrome V8 engine.&lt;/p&gt;
&lt;h2&gt;Technical decisions&lt;/h2&gt;
&lt;h3&gt;Socket.io&lt;/h3&gt;
&lt;p&gt;I started out with using Socket.io for Node.js which worked out nicely as a start but since we are trying to get as much as possible out of the EC2 instance we needed something that is a little bit more light-weight. Also I noticed that since Socket.io v1.0 the cluster module doesn’t work. This removes the possibility to use this library on a environment with high load. Therefore I moved on to another websocket library &lt;strong&gt;Websockets/ws&lt;/strong&gt;.&lt;/p&gt;
&lt;h3&gt;&lt;a title=&quot;Websockets/ws&quot; href=&quot;https://github.com/websockets/ws&quot; target=&quot;_blank&quot;&gt;Websockets/ws&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Works good and is lightweight. This is probably the fastest Websocket library for Node.js. The library has no built in keep alive functionality so you have to implement that yourself via the ping/methods available in the lib. Make sure that your AWS loadbalancers timeout is not set lower than your keepalive, if not, it will drop your connections.&lt;/p&gt;
&lt;h3&gt;&lt;a title=&quot;Sticky-session&quot; href=&quot;https://github.com/indutny/sticky-session&quot; target=&quot;_blank&quot;&gt;Sticky-session&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Use the sticky-session Node.js module which enables you to run on all CPUs. Which you have to do in order to reach a high number of connections for one server. One CPU can only handle a certain amount of connections before the V8 GC goes wild and the CPU will stall on 100%.&lt;/p&gt;
&lt;h3&gt;M3.xlarge&lt;/h3&gt;
&lt;p&gt;After a lot of testing by generating users to create persistent websocket connections to the server and calculating the numbers up and down I finally decided to use a M3.xlarge EC2 instance to reach 620k idle connections. This gives us 4 CPUs and 15Gb of memory.&lt;/p&gt;
&lt;p&gt;At this level of live persistent connections the CPU load is constantly at 100% on all CPUs on the server. The reason behind the high CPU load is the V8:s(Node.js engine) garbage collection. But this is after optimizing the GC. To have a stable runtime environment I suggest that you set the maximum connections to 600k before the CPU load starts to go crazy high, when reaching this connection amount it is definitely time to scale up another instance.&lt;/p&gt;
&lt;p&gt;It is possible to reach a higher number of connections on a larger and more expensive EC2 instance that provides more CPU cores and more memory. When experimenting with this I reached 800k idle connections with a M3.2xlarge instance which gives you 8 CPUs and 30Gb of memory. But when you get over 600k connections other factors comes to limit the capacity, like money and the linux network implementation.&lt;/p&gt;
&lt;p&gt;These numbers are for idle websocket connections handling only keepalive pings from the server.  I’m sure if you have a high number of requests from the clients, the number of connections that the EC2 instance can handle will also decrease.&lt;/p&gt;

&lt;h2&gt;Configuration to reach 600k persistent connections&lt;/h2&gt;
&lt;h3&gt;Node.js flags&lt;/h3&gt;
&lt;p&gt;Set the following flags to launch your node.js application:&lt;/p&gt;
&lt;div id=&quot;crayon-5da125e61874b250809344&quot; class=&quot;crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-mouseover&quot; readability=&quot;8&quot;&gt;


&lt;p&gt;
&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly=&quot;readonly&quot;&gt;
node --nouse-idle-notification--expose-gc--max-new-space-size=2048--max-old-space-size=8192 ./server/websocketserver.js
&lt;/textarea&gt;&lt;/p&gt;
&lt;div class=&quot;crayon-main&quot;&gt;
&lt;table class=&quot;crayon-table&quot; readability=&quot;1.5&quot;&gt;&lt;tr class=&quot;crayon-row&quot; readability=&quot;3&quot;&gt;&lt;td class=&quot;crayon-nums&quot; data-settings=&quot;show&quot;&gt;

&lt;/td&gt;
&lt;td class=&quot;crayon-code&quot; readability=&quot;4.5&quot;&gt;
&lt;div class=&quot;crayon-pre&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;&lt;span class=&quot;crayon-v&quot;&gt;node&lt;/span&gt; &lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;nouse&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;idle&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;notification&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;expose&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;gc&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-r&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;space&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;2048&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;old&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;space&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;crayon-cn&quot;&gt;8192&lt;/span&gt; &lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;websocketserver&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;js&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;–nouse-idle-notification&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Turns of the idle garbage collection which makes the GC constantly run and is devastating for a realtime server environment. If not turned off the system will get a long hickup for almost a second once every few seconds.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;–expose-gc&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Use the expose-gc command to enable manual control of the GC from your code. I recommend to call GC once every 30 seconds.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;–max-old-space-size=8192&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Increases the limit for each V8 node process to use max 8Gb of heap memory instead of the 1,4Gb default on 64-bit machines(512Mb on a 32-bit machine).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;–max-new-space-size=2048&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Specified in kb and setting this flag optimizes the V8 for a stable allround environment with short pauses and ok high peak performance.&lt;/p&gt;
&lt;p&gt;If this flag is not used the pauses will be a little bit longer but the machine will handle peaks a little bit better. What you need in this case depends on the project you are working on. My pick is to have an allround stable server instead of just handling peaks so I stick with this flag.&lt;/p&gt;
&lt;h3&gt;EC2 configuration&lt;/h3&gt;
&lt;p&gt;Set the “soft” and “hard” nofile limit to 1000000. Instead of using the “ulimit -n” as some people do I had to specify the “soft” and “hard” limits for both root and all other users, for some reason I had to specify them separately.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;/etc/security/limits.d/custom.conf&lt;/strong&gt;&lt;/p&gt;
&lt;div id=&quot;crayon-5da125e618756149406068&quot; class=&quot;crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-mouseover&quot; readability=&quot;7&quot;&gt;


&lt;p&gt;
&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly=&quot;readonly&quot;&gt;
root soft nofile 1000000
root hard nofile 1000000
* soft nofile 1000000
* hard nofile 1000000
&lt;/textarea&gt;&lt;/p&gt;
&lt;div class=&quot;crayon-main&quot;&gt;
&lt;table class=&quot;crayon-table&quot; readability=&quot;1&quot;&gt;&lt;tr class=&quot;crayon-row&quot; readability=&quot;2&quot;&gt;&lt;td class=&quot;crayon-nums&quot; data-settings=&quot;show&quot;&gt;

&lt;/td&gt;
&lt;td class=&quot;crayon-code&quot;&gt;
&lt;div class=&quot;crayon-pre&quot;&gt;
&lt;p&gt;&lt;span class=&quot;crayon-e&quot;&gt;root&lt;/span&gt; &lt;span class=&quot;crayon-e&quot;&gt;soft&lt;/span&gt; &lt;span class=&quot;crayon-i&quot;&gt;nofile&lt;/span&gt; &lt;span class=&quot;crayon-cn&quot;&gt;1000000&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;crayon-e&quot;&gt;root&lt;/span&gt; &lt;span class=&quot;crayon-e&quot;&gt;hard&lt;/span&gt; &lt;span class=&quot;crayon-i&quot;&gt;nofile&lt;/span&gt; &lt;span class=&quot;crayon-cn&quot;&gt;1000000&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;crayon-e&quot;&gt;soft&lt;/span&gt; &lt;span class=&quot;crayon-i&quot;&gt;nofile&lt;/span&gt; &lt;span class=&quot;crayon-cn&quot;&gt;1000000&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;crayon-o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;crayon-e&quot;&gt;hard&lt;/span&gt; &lt;span class=&quot;crayon-i&quot;&gt;nofile&lt;/span&gt; &lt;span class=&quot;crayon-cn&quot;&gt;1000000&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Now set the amount of possible opened file handles and the size of the NAT ip connection tracking table.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;/etc/sysctl.conf&lt;/strong&gt;&lt;/p&gt;
&lt;div id=&quot;crayon-5da125e618759729728437&quot; class=&quot;crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate&quot; data-settings=&quot; minimize scroll-mouseover&quot; readability=&quot;8&quot;&gt;


&lt;p&gt;
&lt;textarea wrap=&quot;soft&quot; class=&quot;crayon-plain print-no&quot; data-settings=&quot;dblclick&quot; readonly=&quot;readonly&quot;&gt;
fs.file-max = 1000000
 fs.nr_open = 1000000       
 net.ipv4.netfilter.ip_conntrack_max = 1048576
 net.nf_conntrack_max = 1048576
&lt;/textarea&gt;&lt;/p&gt;
&lt;div class=&quot;crayon-main&quot;&gt;
&lt;table class=&quot;crayon-table&quot; readability=&quot;1.5&quot;&gt;&lt;tr class=&quot;crayon-row&quot; readability=&quot;3&quot;&gt;&lt;td class=&quot;crayon-nums&quot; data-settings=&quot;show&quot;&gt;

&lt;/td&gt;
&lt;td class=&quot;crayon-code&quot; readability=&quot;6&quot;&gt;
&lt;div class=&quot;crayon-pre&quot; readability=&quot;11&quot;&gt;
&lt;p&gt;&lt;span class=&quot;crayon-v&quot;&gt;fs&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;crayon-o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;max&lt;/span&gt; &lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;crayon-cn&quot;&gt;1000000&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;crayon-v&quot;&gt;fs&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;nr_open&lt;/span&gt; &lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;crayon-cn&quot;&gt;1000000&lt;/span&gt;&lt;span class=&quot;crayon-h&quot;&gt;      &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;crayon-v&quot;&gt;net&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ipv4&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;netfilter&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;ip_conntrack_max&lt;/span&gt; &lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;crayon-cn&quot;&gt;1048576&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;crayon-v&quot;&gt;net&lt;/span&gt;&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;crayon-v&quot;&gt;nf_conntrack_max&lt;/span&gt; &lt;span class=&quot;crayon-o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;crayon-cn&quot;&gt;1048576&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;“fs.file-max”&lt;br/&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The maximum file handles that can be allocated&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;“fs.nr_open”&lt;br/&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Max amount of file handles that can be opened&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;“net.ipv4.netfilter.ip_conntrack_max”&lt;br/&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Specifies how many connections the NAT can keep track of in the “tracking” table before it starts to drop packets and just break connections, this we totally want to avoid. The default value for this is 65536 so without this setting you wont be able to get more connections than that.&lt;/p&gt;

</description>
<pubDate>Fri, 11 Oct 2019 10:07:41 +0000</pubDate>
<dc:creator>dgelks</dc:creator>
<og:type>article</og:type>
<og:title>600k concurrent websocket connections on AWS using Node.js - blog.</og:title>
<og:description>I recently faced the challenge to get as much power as possible out of a AWS EC2 instance at the lowest possible cost using concurrent persistent websockets. To do this I needed to use a event-driven, non-blocking runtime environment. For this particular purpose Node.js is excellent with its lightweight and fast Chrome V8 engine. Technical decisions …</og:description>
<og:url>https://blog.jayway.com/2015/04/13/600k-concurrent-websocket-connections-on-aws-using-node-js/</og:url>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://blog.jayway.com/2015/04/13/600k-concurrent-websocket-connections-on-aws-using-node-js/</dc:identifier>
</item>
<item>
<title>Review of 737 Max Certification Finds Fault with Boeing and FAA</title>
<link>https://www.nytimes.com/2019/10/11/business/boeing-737-max.html</link>
<guid isPermaLink="true" >https://www.nytimes.com/2019/10/11/business/boeing-737-max.html</guid>
<description>&lt;div class=&quot;css-1fanzo5 StoryBodyCompanionColumn&quot;&gt;
&lt;div class=&quot;css-53u6y8&quot;&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;A breakdown in the nation’s regulatory system and poor communication from Boeing compromised the safety of the 737 Max jet before it crashed twice in five months and killed 346 people, according to a damning report released Friday.&lt;/p&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;Boeing did not adequately explain to federal regulators how a crucial new system on the plane worked, the report says. That system was found to have played a role in the accidents in Indonesia last October and Ethiopia in March.&lt;/p&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;The Federal Aviation Administration relied heavily on Boeing employees to vouch for the safety of the Max and lacked the ability to effectively analyze much of what &lt;a class=&quot;css-1g7m0tk&quot; href=&quot;https://www.nytimes.com/2019/03/23/business/boeing-737-max-crash.html?module=inline&quot; title=&quot;&quot;&gt;Boeing&lt;/a&gt; did share about the new plane, according to the report by a multiagency task force. The system of delegation is now being scrutinized by lawmakers in the wake of the tragedies.&lt;/p&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;Boeing employees who worked on behalf of the F.A.A. faced “undue pressures” at times during the plane’s development because of “conflicting priorities,” according to the report.&lt;/p&gt;
&lt;/div&gt;
&lt;aside class=&quot;css-o6xoe7&quot; aria-label=&quot;companion column&quot; aria-hidden=&quot;false&quot;/&gt;&lt;/div&gt;&lt;div class=&quot;css-1fanzo5 StoryBodyCompanionColumn&quot;&gt;
&lt;div class=&quot;css-53u6y8&quot;&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;“This report confirms our very worst fears about a broken system,” Senator Richard Blumenthal, Democrat of Connecticut, said in an interview. “To put the fox in charge of the henhouse never made any sense, and now we see the deeply tragic consequences.”&lt;/p&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;Hours after the report was released, Boeing’s board stripped the company’s chief executive, Dennis A. Muilenburg, of his chairman title. The move was the most direct response yet from a board that has resisted shaking up the management team before the Max is flying again, even as pressure mounted inside Boeing to hold someone accountable. The Max has been grounded for more than seven months.&lt;/p&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;Removing Mr. Muilenburg from his seat will give the board more independence from management. The board elevated David L. Calhoun, the lead independent director, to serve as chairman. Mr. Calhoun said in a statement that “the board has full confidence in Dennis as C.E.O.”&lt;/p&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;Friday’s report, which was put together by representatives of the Federal Aviation Administration, NASA and nine international regulators, provided the first official detailed account of how federal regulators certified the Max. Lawmakers and federal investigators are still conducting their own inquiries into the design and approval of the jet.&lt;/p&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;The review scrutinized the F.A.A.’s certification of the Max’s &lt;a class=&quot;css-1g7m0tk&quot; href=&quot;https://www.nytimes.com/2019/10/02/business/boeing-737-max-crashes.html?module=inline&quot; title=&quot;&quot;&gt;flight control system&lt;/a&gt;, including the new automated system, MCAS, which played a role in both crashes.&lt;/p&gt;
&lt;/div&gt;
&lt;aside class=&quot;css-o6xoe7&quot; aria-label=&quot;companion column&quot; aria-hidden=&quot;false&quot;/&gt;&lt;/div&gt;
&lt;div class=&quot;css-1fanzo5 StoryBodyCompanionColumn&quot;&gt;
&lt;div class=&quot;css-53u6y8&quot;&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;The report found that while the F.A.A. had been made aware of MCAS, “the information and discussions about MCAS were so fragmented and were delivered to disconnected groups” that it “was difficult to recognize the impacts and implications of this system.”&lt;/p&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;The task force said it believed that if F.A.A. technical staff had been fully aware of the details of MCAS, the agency would probably have required additional scrutiny of the system that might have identified its flaws.&lt;/p&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;In each crash, &lt;a class=&quot;css-1g7m0tk&quot; href=&quot;https://www.nytimes.com/2019/03/16/business/boeing-max-flight-simulator-ethiopia-lion-air.html?module=inline&quot; title=&quot;&quot;&gt;pilots struggled&lt;/a&gt; as a single damaged sensor sent the plane into an irrecoverable nose-dive within minutes of takeoff. Regulators around the world &lt;a class=&quot;css-1g7m0tk&quot; href=&quot;https://www.nytimes.com/2019/05/23/business/boeing-737-max-faa-regulation.html?module=inline&quot; title=&quot;&quot;&gt;grounded the Max&lt;/a&gt; after the second accident. Boeing is working on a software fix, and there is no timetable for when regulators will allow the aircraft to return to service.&lt;/p&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;The task force recommended that the F.A.A. review staffing levels at its Boeing office in Seattle and review the Boeing office that allows company employees to perform certification work.&lt;/p&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;Boeing is now &lt;a class=&quot;css-1g7m0tk&quot; href=&quot;https://www.nytimes.com/2019/04/01/business/boeing-737-max-software-fix.html?module=inline&quot; title=&quot;&quot;&gt;updating the system&lt;/a&gt; to make it less powerful, and it says it will install a modified version when &lt;a class=&quot;css-1g7m0tk&quot; href=&quot;https://www.nytimes.com/2019/03/21/business/boeing-safety-features-charge.html?module=inline&quot; title=&quot;&quot;&gt;the Max&lt;/a&gt; returns to service.&lt;/p&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;The F.A.A.’s administrator, Steve Dickson, said in a statement that he would “review every recommendation and take appropriate action.”&lt;/p&gt;
&lt;/div&gt;
&lt;aside class=&quot;css-o6xoe7&quot; aria-label=&quot;companion column&quot; aria-hidden=&quot;false&quot;/&gt;&lt;/div&gt;
&lt;div class=&quot;css-1fanzo5 StoryBodyCompanionColumn&quot;&gt;
&lt;div class=&quot;css-53u6y8&quot;&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;“We welcome this scrutiny and are confident that our openness to these efforts will further bolster aviation safety worldwide,” he added.&lt;/p&gt;
&lt;/div&gt;
&lt;aside class=&quot;css-o6xoe7&quot; aria-label=&quot;companion column&quot; aria-hidden=&quot;false&quot;/&gt;&lt;/div&gt;
&lt;div class=&quot;css-1sngw6j&quot;&gt;
&lt;div class=&quot;css-1eoytci&quot;&gt;&lt;img alt=&quot;&quot; src=&quot;https://static01.nyt.com/images/2019/03/22/business/22boeing-explainer-promo/merlin_152397885_5588305c-8e58-47f0-9b4a-3ac83d14e790-articleLarge.jpg&quot;/&gt;&lt;/div&gt;
&lt;div class=&quot;css-1rha1bf&quot;&gt;
&lt;h2 class=&quot;css-zd32qr&quot;&gt;Boeing 737 Max: The Latest on the Deadly Crashes and the Fallout&lt;/h2&gt;
&lt;p class=&quot;css-1uuihdo&quot;&gt;Boeing is under intense scrutiny after its best-selling 737 Max jet was involved in two deadly crashes in five months.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;css-1fanzo5 StoryBodyCompanionColumn&quot;&gt;
&lt;div class=&quot;css-53u6y8&quot;&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;In a statement, the Boeing spokesman Gordon Johndroe said, “Safety is a core value for everyone at Boeing.” The company, he added, “is committed to working with the F.A.A. in reviewing the recommendations and helping to continuously improve the process and approach used to validate and certify airplanes going forward.”&lt;/p&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;The Joint Authorities Technical Review, which produced the report, was led by Chris Hart, a former chairman of the National Transportation Safety Board, and included aviation regulators from Europe, China, Brazil and other countries. To conduct the review, Mr. Hart and his team were briefed by F.A.A. officials and Boeing executives, and they scrutinized extensive documentation on the certification of the Max.&lt;/p&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;A broad theme of the report is that the F.A.A. was too focused on the specifics of the new system and did not put sufficient effort into understanding its overall impact on the plane. In certification documents that Boeing submitted to the F.A.A., MCAS was not evaluated as “a complete and integrated function.”&lt;/p&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;The report also said Boeing had failed to inform the F.A.A. as the design of MCAS changed during the plane’s development. A New York Times investigation revealed that &lt;a class=&quot;css-1g7m0tk&quot; href=&quot;https://www.nytimes.com/2019/06/01/business/boeing-737-max-crash.html?module=inline&quot; title=&quot;&quot;&gt;the system changed significantly&lt;/a&gt; during that process, making MCAS riskier and more powerful, and that key F.A.A. officials in charge of reviewing it were inexperienced or unaware of the overhaul.&lt;/p&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;The task force said the certification documents that Boeing had provided to the F.A.A. “were not updated during the certification program to reflect the changes” made to MCAS. It added that two critical documents that describe the potential dangers of a system like MCAS, the system safety assessment and the functional hazard assessment, “were not consistently updated.”&lt;/p&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;Boeing also failed to thoroughly stress-test the design of MCAS, according to the report, which found that “the design assumptions were not adequately reviewed, updated or validated.”&lt;/p&gt;
&lt;/div&gt;
&lt;aside class=&quot;css-o6xoe7&quot; aria-label=&quot;companion column&quot; aria-hidden=&quot;false&quot;/&gt;&lt;/div&gt;
&lt;div class=&quot;css-1fanzo5 StoryBodyCompanionColumn&quot;&gt;
&lt;div class=&quot;css-53u6y8&quot;&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;In addition, the report criticized Boeing for not adequately assessing the extra effort that pilots might have to make to deal with MCAS, and it noted that Boeing had removed mention of MCAS from a draft of the pilot’s manual. As a result of that decision, some key F.A.A. officials were not fully aware of MCAS and were “not in a position to adequately assess training needs,” the report found.&lt;/p&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;To address some of these shortcomings, the report recommends that the F.A.A. update the certification process to allow the agency to be more involved early on.&lt;/p&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;&lt;a class=&quot;css-1g7m0tk&quot; href=&quot;https://www.nytimes.com/2019/04/08/business/boeing-737-max-.html?module=inline&quot; title=&quot;&quot;&gt;The Max&lt;/a&gt; was certified in 2017 as the latest version of the 737 family. Because it was based on a well-known design, the F.A.A. allowed it to undergo a less thorough certification process than if it were an entirely new plane.&lt;/p&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;“Some elements of the design and certification remain rooted in the original 1967 certification of the B737-100,” the review found. But while some modern safety tools have been incorporated into new versions of the 737, others were not included in the Max because they were deemed “impractical,” the review found.&lt;/p&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;Over all, the report found fault with the process for certifying a new plane based on an old design, saying it “lacks an adequate assessment of how proposed design changes integrate with existing systems.”&lt;/p&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;It recommended that the F.A.A. confirm that the Max is in fact compliant with regulations having to do with the plane’s flight guidance system, flight manual and stall demonstration.&lt;/p&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;Those recommendations, which could affect whether the plane is allowed back into service, have already been addressed by the F.A.A., according to a person familiar with the process. The effort to address those issues has contributed to the prolonged grounding of the Max.&lt;/p&gt;
&lt;/div&gt;
&lt;aside class=&quot;css-o6xoe7&quot; aria-label=&quot;companion column&quot; aria-hidden=&quot;false&quot;/&gt;&lt;/div&gt;
&lt;div class=&quot;css-1fanzo5 StoryBodyCompanionColumn&quot;&gt;
&lt;div class=&quot;css-53u6y8&quot;&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;In both of the flights that crashed, the pilots had a hard time identifying the cause of the problems and were unable to bring the planes under control.&lt;/p&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;The review found that the F.A.A. certification process had failed to adequately consider “pilot recognition time and pilot reaction time to failures.” In particular, the review suggested that the F.A.A. question Boeing’s assumption that pilots could react to a malfunction similar to the one caused by MCAS in just four seconds.&lt;/p&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;One source of the problems with the certification of the Max was &lt;a class=&quot;css-1g7m0tk&quot; href=&quot;https://www.nytimes.com/2019/07/27/business/boeing-737-max-faa.html?module=inline&quot; title=&quot;&quot;&gt;the F.A.A. office in Seattle&lt;/a&gt; that oversees Boeing, according to the report. It found that the Boeing office had “limited experience and knowledge of key technical aspects” of the Max.&lt;/p&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;In the end, the F.A.A. was simply unable to effectively assess MCAS, the review found.&lt;/p&gt;
&lt;p class=&quot;css-exrw3m evys1bk0&quot;&gt;“The F.A.A. had inadequate awareness of the MCAS function,” which meant that the agency could not adequately assess Boeing’s certification of the system, the report found.&lt;/p&gt;
&lt;/div&gt;
&lt;aside class=&quot;css-o6xoe7&quot; aria-label=&quot;companion column&quot; aria-hidden=&quot;false&quot;/&gt;&lt;/div&gt;
</description>
<pubDate>Fri, 11 Oct 2019 09:37:28 +0000</pubDate>
<dc:creator>awad</dc:creator>
<og:url>https://www.nytimes.com/2019/10/11/business/boeing-737-max.html</og:url>
<og:type>article</og:type>
<og:title>Boeing and F.A.A. Faulted in Damning Report on 737 Max Certification</og:title>
<og:image>https://static01.nyt.com/images/2019/10/11/world/11boeing-1/11boeing-1-facebookJumbo.jpg</og:image>
<og:description>A task force found that Boeing did not adequately describe the system that contributed to two crashes, and that the F.A.A. failed to understand much of what the company did share.</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.nytimes.com/2019/10/11/business/boeing-737-max.html</dc:identifier>
</item>
<item>
<title>Twitter analysis: identifying a propaganda bot network</title>
<link>https://www.bellingcat.com/news/2019/09/03/twitter-analysis-identifying-a-pro-indonesian-propaganda-bot-network/</link>
<guid isPermaLink="true" >https://www.bellingcat.com/news/2019/09/03/twitter-analysis-identifying-a-pro-indonesian-propaganda-bot-network/</guid>
<description>&lt;p&gt;&lt;span&gt;The ongoing conflict in West Papua has surged recently as the West Papuan freedom movement seeks independence from Indonesia. &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;While aggression has been documented on both sides, there are grave concerns that Indonesian security forces have been responsible for&lt;/span&gt; &lt;a href=&quot;https://www.amnesty.org.au/indonesia-police-and-military-unlawfully-kill-almost-100-people-in-papua-in-eight-years-with-near-total-impunity/&quot;&gt;&lt;span&gt;human rights abuses&lt;/span&gt;&lt;/a&gt; &lt;span&gt;through the violent suppression of West Papuans in their pursuit of independence. &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Hostilities have recently erupted in both Indonesia and West Papua. In August, protests were quashed by security forces with events seeing Papuan students&lt;/span&gt; &lt;a href=&quot;https://www.amnesty.org.uk/press-releases/west-papua-police-must-stop-discrimination-and-unlawful-use-force-against-students&quot;&gt;&lt;span&gt;tear gassed&lt;/span&gt;&lt;/a&gt; &lt;span&gt;in their dormitories in East Java and&lt;/span&gt; &lt;a href=&quot;https://twitter.com/BenDoBrown/status/1167534347722874880?s=20&quot;&gt;&lt;span&gt;security forces assisting violent mobs&lt;/span&gt;&lt;/a&gt; &lt;span&gt;in an attack on Papuan protestors in Fakfak.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Much of the conflict has been waged on the streets, but the fight has also spilled over into the digital world — as censorship and disinformation. While there has been targeted&lt;/span&gt; &lt;a href=&quot;https://netblocks.org/reports/internet-disrupted-in-papua-indonesia-amid-mass-protests-and-calls-for-independence-eBOgrDBZ&quot;&gt;&lt;span&gt;internet disruption in Papua&lt;/span&gt;&lt;/a&gt; &lt;span&gt;and Indonesia, and the banning of counter narrative&lt;/span&gt; &lt;a href=&quot;https://twitter.com/thejuicemedia/status/1166550365627699200?s=20&quot;&gt;&lt;span&gt;YouTube content&lt;/span&gt;&lt;/a&gt;&lt;span&gt;, something that has not been exposed, until now, is an active bot network disseminating pro-government content through major social media platforms.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;The campaign, fuelled by a network of bot accounts on Twitter, expands to Instagram, Facebook and YouTube. The content is spread in Tweets using specific hashtags such as #FreeWestPapua, #WestPapuaGenocide, #WestPapua and #fwpc.&lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;Conducting The Network Analysis&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;These findings came after capturing activity from Twitter using the #WestPapua and #FreeWestPapua tags from August 29 — September 2, 2019. The captured data was used to perform the network analysis.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Using this data, I built an itemised dataset of:&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;Usernames that tweeted the above tags&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;Usernames that retweeted and liked the posts&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;Timestamps&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;URL &lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;The type of activity (tweet, retweet, quote, mention). &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;With this working dataset, I was able to visualise the respective networks via the open source visualisation platform&lt;/span&gt; &lt;a href=&quot;https://gephi.org/&quot;&gt;&lt;span&gt;Gephi&lt;/span&gt;&lt;/a&gt;&lt;span&gt;. Below is a visualisation of the entire capture. &lt;/span&gt;&lt;/p&gt;
&lt;a href=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA2.png&quot;&gt;&lt;img class=&quot;aligncenter wp-image-24786 size-full&quot; src=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA2.png&quot; alt=&quot;&quot; width=&quot;630&quot; height=&quot;584&quot; srcset=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA2.png 630w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA2-300x278.png 300w&quot; sizes=&quot;(max-width: 630px) 100vw, 630px&quot;/&gt;&lt;/a&gt;
&lt;p&gt;&lt;span&gt;Opening the graph for analysis, labels and clusters are illustrated below:&lt;/span&gt;&lt;/p&gt;
&lt;a href=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA3.png&quot;&gt;&lt;img class=&quot;aligncenter wp-image-24787 size-full&quot; src=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA3.png&quot; alt=&quot;&quot; width=&quot;620&quot; height=&quot;561&quot; srcset=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA3.png 620w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA3-300x271.png 300w&quot; sizes=&quot;(max-width: 620px) 100vw, 620px&quot;/&gt;&lt;/a&gt;
&lt;p&gt;&lt;span&gt;The data is represented through two mediums: nodes and edges. &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;The nodes&lt;/strong&gt; &lt;span&gt;are the round coloured circles you are seeing, they are twitter accounts and vary in size based on the interaction of the account. &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;The edges&lt;/strong&gt; &lt;span&gt;are the lines between them. They represent the relationship between the accounts. In the captured data this is a mention, like, retweet or quote. &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Most networks have “influencer” bubbles. These are the larger circles. They’re often accounts that have a large following. On the visualisation, they are represented much like perfectly shaped fireworks. Any interactions they have had are captured around them in circular fashion.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Below is a representation of what happens when an “influencer” bubble usually posts a tweet. In this example, the account in the center is @thejuicemedia. They recently posted a satire video on YouTube which&lt;/span&gt; &lt;a href=&quot;https://twitter.com/thejuicemedia/status/1166550365627699200?s=20&quot;&gt;&lt;span&gt;was banned&lt;/span&gt;&lt;/a&gt; &lt;span&gt;in Indonesia after the Indonesian Government made a legal complaint to YouTube.  &lt;/span&gt;&lt;/p&gt;
&lt;a href=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA5.png&quot;&gt;&lt;img class=&quot;aligncenter wp-image-24788 size-full&quot; src=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA5.png&quot; alt=&quot;&quot; width=&quot;516&quot; height=&quot;330&quot; srcset=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA5.png 516w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA5-300x192.png 300w&quot; sizes=&quot;(max-width: 516px) 100vw, 516px&quot;/&gt;&lt;/a&gt;
&lt;p&gt;&lt;span&gt;One of these networks has a unique appearance in comparison to the others. I have highlighted it below in a red box.&lt;/span&gt;&lt;/p&gt;
&lt;a href=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA6.png&quot;&gt;&lt;img class=&quot;aligncenter wp-image-24789 size-full&quot; src=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA6.png&quot; alt=&quot;&quot; width=&quot;628&quot; height=&quot;604&quot; srcset=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA6.png 628w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA6-300x289.png 300w&quot; sizes=&quot;(max-width: 628px) 100vw, 628px&quot;/&gt;&lt;/a&gt;
&lt;p&gt;&lt;span&gt;Zooming in on that constellation provides me with a series of Twitter accounts acting in a behaviour that is not normal in comparison to the other networks. &lt;/span&gt;&lt;/p&gt;
&lt;a href=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA7.png&quot;&gt;&lt;img class=&quot;aligncenter wp-image-24790 size-full&quot; src=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA7.png&quot; alt=&quot;&quot; width=&quot;1024&quot; height=&quot;768&quot; srcset=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA7.png 1024w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA7-300x225.png 300w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA7-768x576.png 768w&quot; sizes=&quot;(max-width: 1024px) 100vw, 1024px&quot;/&gt;&lt;/a&gt;
&lt;p&gt;&lt;span&gt;I’ll zoom in on the cluster of accounts causing this irregularity in the system so we can identify the accounts responsible. &lt;/span&gt;&lt;/p&gt;
&lt;a href=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA8.png&quot;&gt;&lt;img class=&quot;aligncenter wp-image-24791 size-full&quot; src=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA8.png&quot; alt=&quot;&quot; width=&quot;1024&quot; height=&quot;768&quot; srcset=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA8.png 1024w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA8-300x225.png 300w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA8-768x576.png 768w&quot; sizes=&quot;(max-width: 1024px) 100vw, 1024px&quot;/&gt;&lt;/a&gt;
&lt;h2&gt;&lt;strong&gt;Twitter Level Analysis&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;In that network we can identify the individual accounts that are reacting with each other in this different manner. First, let’s take a look at the account&lt;/span&gt; &lt;a href=&quot;https://web.archive.org/save/https://twitter.com/marco26700420&quot;&gt;&lt;span&gt;@marco26700420&lt;/span&gt;&lt;/a&gt;&lt;span&gt;. I archived the account through the Wayback Machine.&lt;/span&gt;&lt;/p&gt;
&lt;a href=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA9.png&quot;&gt;&lt;img class=&quot;aligncenter wp-image-24792 size-full&quot; src=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA9.png&quot; alt=&quot;&quot; width=&quot;630&quot; height=&quot;376&quot; srcset=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA9.png 630w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA9-300x179.png 300w&quot; sizes=&quot;(max-width: 630px) 100vw, 630px&quot;/&gt;&lt;/a&gt;
&lt;p&gt;&lt;span&gt;This bot was created in June 2019. Its purpose is to disseminate information attached to various hashtags about West Papua and the freedom movement. &lt;/span&gt;&lt;/p&gt;
&lt;a href=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA10.png&quot;&gt;&lt;img class=&quot;aligncenter wp-image-24793 size-full&quot; src=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA10.png&quot; alt=&quot;&quot; width=&quot;601&quot; height=&quot;411&quot; srcset=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA10.png 601w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA10-300x205.png 300w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA10-600x411.png 600w&quot; sizes=&quot;(max-width: 601px) 100vw, 601px&quot;/&gt;&lt;/a&gt;
&lt;p&gt;&lt;span&gt;A simple Yandex reverse image search on the profile image shows this account is not genuine.&lt;/span&gt;&lt;/p&gt;
&lt;a href=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA11.png&quot;&gt;&lt;img class=&quot;aligncenter wp-image-24794 size-full&quot; src=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA11.png&quot; alt=&quot;&quot; width=&quot;842&quot; height=&quot;715&quot; srcset=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA11.png 842w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA11-300x255.png 300w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA11-768x652.png 768w&quot; sizes=&quot;(max-width: 842px) 100vw, 842px&quot;/&gt;&lt;/a&gt;
&lt;p&gt;&lt;span&gt;We can identify it is a bot as its followers and the accounts it is following match with the names in this network. All of the tweets are the same as the others, with the same tags. Many of those tweets imply that this account is pushing an interesting perspective, for example: &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;span&gt;“What are some secrets that Indonesia have been hiding in West Papua? Find out the answers here.” &lt;/span&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;This exact sentence was published by many of the other bots in their own individual tweets using the hashtags #westpapuagenocide and #freewestpapua. The content of the video is about “what Indonesia is trying to hide in West Papua.” It lists better budget monitoring through an app built by the government. &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;A gif-version of the video can be viewed&lt;/span&gt; &lt;a href=&quot;https://imgur.com/a/HyPMbjX&quot;&gt;&lt;span&gt;here&lt;/span&gt;&lt;/a&gt;&lt;span&gt;.&lt;/span&gt;&lt;/p&gt;
&lt;a href=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA12.png&quot;&gt;&lt;img class=&quot;aligncenter wp-image-24795 size-full&quot; src=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA12.png&quot; alt=&quot;&quot; width=&quot;599&quot; height=&quot;493&quot; srcset=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA12.png 599w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA12-300x247.png 300w&quot; sizes=&quot;(max-width: 599px) 100vw, 599px&quot;/&gt;&lt;/a&gt;
&lt;p&gt;&lt;span&gt;This same text and video has been re-uploaded to other accounts in the network — all at similar times. All of these accounts use stolen profile images.&lt;/span&gt;&lt;/p&gt;
&lt;a href=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA13.png&quot;&gt;&lt;img class=&quot;aligncenter wp-image-24796 size-full&quot; src=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA13.png&quot; alt=&quot;&quot; width=&quot;802&quot; height=&quot;429&quot; srcset=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA13.png 802w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA13-300x160.png 300w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA13-768x411.png 768w&quot; sizes=&quot;(max-width: 802px) 100vw, 802px&quot;/&gt;&lt;/a&gt;
&lt;p&gt;&lt;span&gt;Another bot going by the handle &lt;a href=&quot;https://web.archive.org/save/https://twitter.com/yerxi1&quot;&gt;@yerxi1&lt;/a&gt;, focuses more on retweeting action. We can see it in the graph below. It tags other accounts when it does a retweet mention. &lt;/span&gt;&lt;/p&gt;
&lt;a href=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA14.png&quot;&gt;&lt;img class=&quot;aligncenter wp-image-24797 size-full&quot; src=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA14.png&quot; alt=&quot;&quot; width=&quot;675&quot; height=&quot;449&quot; srcset=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA14.png 675w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA14-300x200.png 300w&quot; sizes=&quot;(max-width: 675px) 100vw, 675px&quot;/&gt;&lt;/a&gt;
&lt;p&gt;&lt;span&gt;Here is the Twitter account:&lt;/span&gt;&lt;/p&gt;
&lt;a href=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA15.png&quot;&gt;&lt;img class=&quot;aligncenter wp-image-24798 size-full&quot; src=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA15.png&quot; alt=&quot;&quot; width=&quot;604&quot; height=&quot;435&quot; srcset=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA15.png 604w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA15-300x216.png 300w&quot; sizes=&quot;(max-width: 604px) 100vw, 604px&quot;/&gt;&lt;/a&gt;
&lt;p&gt;&lt;span&gt;For the profile image, after a quick Yandex reverse image search and a&lt;/span&gt; &lt;a href=&quot;https://www.google.com/search?tbs=sbi:AMhZZivS5hADnmd9HpNAmNF1u2WIFxcGzPNVQ3bpGCoqEYc1KY4Ried3untQuYuaxrK1MuaaB74orEqM-LufKBj4M8WpT7Y0DoWS3QCO2eKBis-u_1tMPw7ZifYBQtU8KEkQ_1nVeC0K4abfFvxgl861_10yyIIw4uCK7WIUqLyEKh4knV_1iI6YK5WoS2QNoNjhc6gO7O4coqFWBSc5lUcgjm9mt5vhDwq4uV9RDGdpSPXI6m8XPufLMEOKHMBZGlwg0J9Z0n6lKzXaNWnvOiEyh7JIRVS3gXCxDc_1KGfoYNyh6C5guc8o2-sHz1GA03yMYychmXuQ8DtCjgUPP52-YiC3AIDFjET-kpg&amp;amp;btnG=Search%20by%20image&amp;amp;hl=en&quot;&gt;&lt;span&gt;termed Google reverse image search&lt;/span&gt;&lt;/a&gt; &lt;span&gt;I found out that the Twitter name gives it away. It’s&lt;/span&gt; &lt;a href=&quot;https://www.instagram.com/p/BtmGANFn3lX/&quot;&gt;&lt;span&gt;Jennie Kim&lt;/span&gt;&lt;/a&gt; – a South Korean rapper (obviously not the real one)&lt;span&gt;.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;These two accounts are only a part of the network visualised, and the data of that network is only made of tweets captured during a five-day period, so it is likely that there are many more accounts in this bot network than what has been displayed on the graph. Those accounts can be identified by viewing each individual account’s followers, and accounts that it is following. &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;We have seen that there are a number of correlating accounts in this network, but what are they promoting, and where?&lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;Website, Facebook, Youtube &amp;amp; Instagram Accounts&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;Many of the accounts refer back to more active accounts. One of the more active accounts in the network is&lt;/span&gt; &lt;a href=&quot;https://twitter.com/PapuaWestcom&quot;&gt;&lt;span&gt;@PapuaWestcom&lt;/span&gt;&lt;/a&gt;&lt;span&gt;. &lt;/span&gt;&lt;/p&gt;
&lt;a href=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA16.png&quot;&gt;&lt;img class=&quot;aligncenter wp-image-24799 size-full&quot; src=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA16.png&quot; alt=&quot;&quot; width=&quot;599&quot; height=&quot;487&quot; srcset=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA16.png 599w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA16-300x244.png 300w&quot; sizes=&quot;(max-width: 599px) 100vw, 599px&quot;/&gt;&lt;/a&gt;
&lt;p&gt;&lt;span&gt;This account runs tweets with video campaigns, some of which are promotional material for the Indonesian government and military in their work in West Papua. The video in the tweet below can be viewed&lt;/span&gt; &lt;a href=&quot;https://imgur.com/a/GE5nEyv&quot;&gt;&lt;span&gt;here&lt;/span&gt;&lt;/a&gt;&lt;span&gt;.&lt;/span&gt;&lt;/p&gt;
&lt;a href=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA17.png&quot;&gt;&lt;img class=&quot;aligncenter wp-image-24800 size-full&quot; src=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA17.png&quot; alt=&quot;&quot; width=&quot;600&quot; height=&quot;483&quot; srcset=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA17.png 600w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA17-300x242.png 300w&quot; sizes=&quot;(max-width: 600px) 100vw, 600px&quot;/&gt;&lt;/a&gt;
&lt;p&gt;&lt;span&gt;This twitter account promotes the website&lt;/span&gt; &lt;a href=&quot;https://web.archive.org/web/20190902143305/https://papuawest.com/&quot;&gt;&lt;span&gt;Papua West&lt;/span&gt;&lt;/a&gt;&lt;span&gt;. The about section of the site claims: “&lt;/span&gt;&lt;span&gt;PapuaWest.com is an online media which provides updated information related to business in the West Papua region”. The page is not only running a Twitter account, but also a&lt;/span&gt; &lt;a href=&quot;https://web.archive.org/web/20190902144230/https://www.facebook.com/aboutpapuawest/&quot;&gt;&lt;span&gt;Facebook Page&lt;/span&gt;&lt;/a&gt; &lt;span&gt;with 50,000+ followers and a YouTube channel, where it spreads the same video content. &lt;/span&gt;&lt;/p&gt;
&lt;a href=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA18.png&quot;&gt;&lt;img class=&quot;aligncenter wp-image-24801 size-full&quot; src=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA18.png&quot; alt=&quot;&quot; width=&quot;1038&quot; height=&quot;655&quot; srcset=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA18.png 1038w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA18-300x189.png 300w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA18-768x485.png 768w&quot; sizes=&quot;(max-width: 1038px) 100vw, 1038px&quot;/&gt;&lt;/a&gt;
&lt;p&gt;&lt;span&gt;If you peruse the network, you will find another interesting Twitter account —&lt;/span&gt; &lt;a href=&quot;https://web.archive.org/save/https://twitter.com/West_Papua_ID&quot;&gt;&lt;span&gt;@West_Papua_ID&lt;/span&gt;&lt;/a&gt;&lt;span&gt;. It works in conjunction with the network to boost tweets and, much like the bot account of Papua West (above), it has its own accounts on other social media platforms and a website. &lt;/span&gt;&lt;/p&gt;
&lt;a href=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA19.png&quot;&gt;&lt;img class=&quot;aligncenter wp-image-24802 size-full&quot; src=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA19.png&quot; alt=&quot;&quot; width=&quot;604&quot; height=&quot;443&quot; srcset=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA19.png 604w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA19-300x220.png 300w&quot; sizes=&quot;(max-width: 604px) 100vw, 604px&quot;/&gt;&lt;/a&gt;
&lt;p&gt;&lt;span&gt;@West_Papua_ID’s website is&lt;/span&gt; &lt;a href=&quot;https://web.archive.org/save/https://westpapuaindonesia.com/&quot;&gt;&lt;span&gt;westpapuaindonesia.com&lt;/span&gt;&lt;/a&gt;&lt;span&gt;, and links to a popular&lt;/span&gt; &lt;a href=&quot;https://www.youtube.com/channel/UCmW-IXwdKv_hX-1aNbxWjiQ&quot;&gt;&lt;span&gt;YouTube account&lt;/span&gt;&lt;/a&gt;&lt;span&gt;, an&lt;/span&gt; &lt;a href=&quot;https://www.instagram.com/westpapua.id/&quot;&gt;&lt;span&gt;Instagram account&lt;/span&gt;&lt;/a&gt; &lt;span&gt;with 10.3k followers and a&lt;/span&gt; &lt;a href=&quot;https://www.facebook.com/westpapua.id&quot;&gt;&lt;span&gt;Facebook page&lt;/span&gt;&lt;/a&gt; &lt;span&gt;with 152k followers, all of which are disseminating the same pro-Indonesian Government material about West Papua. &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;The Instagram account of Westpapua.id runs all of the same content as what the bot network was posting on Twitter.&lt;/span&gt;&lt;/p&gt;
&lt;a href=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA20.png&quot;&gt;&lt;img class=&quot;aligncenter wp-image-24803 size-full&quot; src=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA20.png&quot; alt=&quot;&quot; width=&quot;1002&quot; height=&quot;621&quot; srcset=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA20.png 1002w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA20-300x186.png 300w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA20-768x476.png 768w&quot; sizes=&quot;(max-width: 1002px) 100vw, 1002px&quot;/&gt;&lt;/a&gt;
&lt;p&gt;&lt;span&gt;I ran an&lt;/span&gt; &lt;a href=&quot;https://igaudit.io/&quot;&gt;&lt;span&gt;Instagram audit&lt;/span&gt;&lt;/a&gt; &lt;span&gt;on the account which resulted in a 34% real follower count.&lt;/span&gt;&lt;/p&gt;
&lt;a href=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA21.png&quot;&gt;&lt;img class=&quot;aligncenter wp-image-24804 size-full&quot; src=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA21.png&quot; alt=&quot;&quot; width=&quot;466&quot; height=&quot;240&quot; srcset=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA21.png 466w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA21-300x155.png 300w&quot; sizes=&quot;(max-width: 466px) 100vw, 466px&quot;/&gt;&lt;/a&gt;
&lt;p&gt;We now know that these accounts are pushing and circulating promotional content on the Indonesian relationship with West Papua, we have identified who (or what) is doing it, and where it is taking place. Now we can look at how the bot network runs.&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;Bot Deployment Analysis&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;A further analysis of the bot network can tell us how it works in its automated posting. For this we can look at the time any activity was deployed from the accounts. &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;To do that, I selected and compared randomly chosen accounts out of the network cluster identified earlier. &lt;/span&gt;&lt;/p&gt;
&lt;a href=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA22.png&quot;&gt;&lt;img class=&quot;aligncenter wp-image-24805 size-full&quot; src=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA22.png&quot; alt=&quot;&quot; width=&quot;1060&quot; height=&quot;595&quot; srcset=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA22.png 1060w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA22-300x168.png 300w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA22-768x431.png 768w&quot; sizes=&quot;(max-width: 1060px) 100vw, 1060px&quot;/&gt;&lt;/a&gt;
&lt;p&gt;&lt;span&gt;For the purpose of this post, I will use the following two in the comparison:&lt;/span&gt; &lt;a href=&quot;https://web.archive.org/web/20190902172839/https://twitter.com/kevinma40204275&quot;&gt;&lt;span&gt;@kevinma40204275&lt;/span&gt;&lt;/a&gt; &lt;span&gt;and&lt;/span&gt; &lt;a href=&quot;https://web.archive.org/web/20190902172911/https://twitter.com/bellanow1&quot;&gt;&lt;span&gt;@bellanow1&lt;/span&gt;&lt;/a&gt;&lt;span&gt;. &lt;/span&gt;&lt;/p&gt;
&lt;a href=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA23.png&quot;&gt;&lt;img class=&quot;aligncenter wp-image-24806 size-full&quot; src=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA23.png&quot; alt=&quot;&quot; width=&quot;1070&quot; height=&quot;596&quot; srcset=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA23.png 1070w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA23-300x167.png 300w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA23-768x428.png 768w&quot; sizes=&quot;(max-width: 1070px) 100vw, 1070px&quot;/&gt;&lt;/a&gt;
&lt;p&gt;&lt;span&gt;To identify when these bots deployed their content, I pulled all of their past tweets into a spreadsheet. I did this by using a Python script available on GitHub called&lt;/span&gt; &lt;a href=&quot;https://github.com/twintproject/twint&quot;&gt;&lt;span&gt;Twint&lt;/span&gt;&lt;/a&gt;&lt;span&gt;.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;I pulled all of the tweets using the code: &lt;/span&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;&lt;span&gt;sudo twint -u bellanow1 –media -o papuabots1 –csv&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span&gt;Below is a screenshot of what that looks like when the command is performed. &lt;/span&gt;&lt;/p&gt;
&lt;a href=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA24.png&quot;&gt;&lt;img class=&quot;aligncenter wp-image-24807 size-full&quot; src=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA24.png&quot; alt=&quot;&quot; width=&quot;1416&quot; height=&quot;854&quot; srcset=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA24.png 1416w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA24-300x181.png 300w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA24-768x463.png 768w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA24-1200x724.png 1200w&quot; sizes=&quot;(max-width: 1416px) 100vw, 1416px&quot;/&gt;&lt;/a&gt;
&lt;p&gt;&lt;span&gt;What I now have is a spreadsheet with all of the tweet data from the @bellanow1 bot account. It is itemised in columns as I commanded Twint to pull it into a csv file.&lt;/span&gt;&lt;/p&gt;
&lt;a href=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA25.png&quot;&gt;&lt;img class=&quot;aligncenter wp-image-24808 size-full&quot; src=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA25.png&quot; alt=&quot;&quot; width=&quot;1387&quot; height=&quot;633&quot; srcset=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA25.png 1387w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA25-300x137.png 300w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA25-768x351.png 768w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA25-1200x548.png 1200w&quot; sizes=&quot;(max-width: 1387px) 100vw, 1387px&quot;/&gt;&lt;/a&gt;
&lt;p&gt;&lt;span&gt;I repeated the same process for @kevinma40204275 to match the two up and compare them. I could map these into a data visualiser, but my only interest was in looking at when the activity occurred. &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;In lining up the two against each other, we can see that the activity is indicative of automated processes. These accounts are working in an automated flow in sync with one another to post at different times in part of a much larger network of bots. &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;In looking at the sequences we can see that on the evening of the 25th, the bots conducted activity on 23:32:52, 23:32:54 and 0:32:54, 0:32:56, 3:32:54 and 3:32:55. There is repetition in timecodes and similarities across the board. &lt;/span&gt;&lt;/p&gt;
&lt;a href=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA26.png&quot;&gt;&lt;img class=&quot;aligncenter wp-image-24809 size-full&quot; src=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA26.png&quot; alt=&quot;&quot; width=&quot;422&quot; height=&quot;497&quot; srcset=&quot;https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA26.png 422w, https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA26-255x300.png 255w&quot; sizes=&quot;(max-width: 422px) 100vw, 422px&quot;/&gt;&lt;/a&gt;
&lt;p&gt;&lt;span&gt;Through these findings, I am able to say that an automated bot network is being used on Twitter and utlises other major social media platforms to disseminate propaganda about the Indonesian Government’s involvement in West Papua, and that it is doing so by using hashtags on genocide and the West Papua freedom movement to drown out any anti-Indonesian government narrative. &lt;/span&gt;&lt;/p&gt;
</description>
<pubDate>Fri, 11 Oct 2019 07:22:07 +0000</pubDate>
<dc:creator>anigbrowl</dc:creator>
<og:type>article</og:type>
<og:title>Twitter Analysis: Identifying A Pro-Indonesian Propaganda Bot Network  - bellingcat</og:title>
<og:description>Conducting a Twitter network analysis uncovers a widespread bot network targeting West Papua with pro-Indonesian Government content on major social platforms.</og:description>
<og:url>https://www.bellingcat.com/news/2019/09/03/twitter-analysis-identifying-a-pro-indonesian-propaganda-bot-network/</og:url>
<og:image>https://017qndpynh-flywheel.netdna-ssl.com/wp-content/uploads/2019/09/TA1.png</og:image>
<dc:language>en-GB</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.bellingcat.com/news/2019/09/03/twitter-analysis-identifying-a-pro-indonesian-propaganda-bot-network/</dc:identifier>
</item>
</channel>
</rss>