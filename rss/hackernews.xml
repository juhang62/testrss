<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=hnrss.org%2Fnewest%3Fpoints%3D200&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://hnrss.org/newest?points=200" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>Hacker News: Newest</title>
<link>https://news.ycombinator.com/newest</link>
<description>Hacker News RSS</description>
<item>
<title>Apple has threatened to remove Amphetamine from the App Store</title>
<link>https://github.com/x74353/SaveAmphetamine</link>
<guid isPermaLink="true" >https://github.com/x74353/SaveAmphetamine</guid>
<description>&lt;p&gt;&lt;a href=&quot;https://apps.apple.com/app/amphetamine/id937984704?mt=12&quot; rel=&quot;nofollow&quot;&gt;Amphetamine&lt;/a&gt; is a free app that helps keep your Mac awake. Amphetamine has been on the Mac App Store since 2014 and it’s been downloaded over 432,800 times. It currently has over 1,400 reviews and a 4.8 out of 5.0 rating in the US Mac App Store.&lt;/p&gt;
&lt;h2&gt;Why Does Amphetamine Need Saving?&lt;/h2&gt;
&lt;p&gt;On December 29th, 2020, a representative from Apple contacted and informed me that, after 6 years on the Mac App Store, Amphetamine had spontaneously began violating one of Apple's &lt;a href=&quot;https://developer.apple.com/app-store/review/guidelines/#safety&quot; rel=&quot;nofollow&quot;&gt;App Store Guidelines&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Apple then proceeded to threaten to remove Amphetamine from the Mac App Store on January 12th, 2021 if changes to the app were not made. It is my belief that Amphetamine is &lt;strong&gt;not&lt;/strong&gt; in violation of any of Apple's Guidelines. It is also my belief that there are a lot of people out there who feel the same way as me, and want to see Amphetamine.app continue to flourish without a complete re-branding.&lt;/p&gt;
&lt;h2&gt;What Guideline Has Apple Accused Amphetamine of Violating?&lt;/h2&gt;
&lt;p&gt;Apple has accused Amphetamine of violating the following guideline:&lt;/p&gt;
&lt;blockquote readability=&quot;12&quot;&gt;
&lt;p&gt;1.4.3 Apps that encourage consumption of tobacco and vape products, illegal drugs, or excessive amounts of alcohol are not permitted on the App Store. Apps that encourage minors to consume any of these substances will be rejected. Facilitating the sale of marijuana, tobacco, or controlled substances (except for licensed pharmacies) isn’t allowed.&quot;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Apple further specified: &lt;em&gt;“Your app appears to promote inappropriate use of controlled substances. Specifically, your app name and icon include references to controlled substances, pills.”&lt;/em&gt;&lt;/p&gt;
&lt;h2&gt;How Can I Help?&lt;/h2&gt;
&lt;p&gt;Spread the word! Let the world know that you want to see Amphetamine.app continue to exist on the Mac App Store. Apple has threatened to remove Amphetamine from the Mac App Store on January 12th, 2021 if Apple's demands are not met.&lt;/p&gt;
&lt;h2&gt;What Happens Next?&lt;/h2&gt;
&lt;p&gt;I have filed an appeal/challenge to the Guidelines violation accusation directly with Apple. I do not personally have much faith in Apple reversing course based on the appeal alone, however. Hopefully, Apple will hear the voices of the Mac community and reconsider their decision.&lt;/p&gt;
&lt;p&gt;Should Apple refuse to reverse their decision, and thus remove Amphetamine from the Mac App Store, I will likely do one of the following:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Immediately begin work on rebranding Amphetamine and hopefully, get the newly-named app back on the Mac App Store&lt;/li&gt;
&lt;li&gt;Continue raise awareness of Apple's actions and essentially wait for Apple to reinstate Amphetamine on the Mac App Store&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;What Arguments Can Be Made for Keeping Amphetamine in the Mac App Store?&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Argument #1: Amphetamine Does Not Promote the Use of Illegal Drugs or Facilitate the Sale of Controlled Substances&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Amphetamine does not promote the use of illegal drugs. Not only that, Amphetamine does not promote the recreational use of legal/prescribed drugs. In the United States, amphetamine is prescribed by doctors to adults for narcolepsy and to children for ADHD.&lt;/p&gt;
&lt;p&gt;Adderall®, Concerta®, Dexedrine®, Focalin®, Metadate®, Methylin®, Ritalin® are all “brand name” amphetamines. There are other “generic” brands as well. These medications come in the form of a pill. Amphetamine’s icon includes a graphical representation of such a pill. Objectively speaking, there’s no imagery or text in Amphetamine’s icon that suggest the pill should be taken irresponsibly, illegally, or recreationally.&lt;/p&gt;
&lt;p&gt;The word “amphetamine” itself is simply a shortened version of the organic compound “alpha-methylphenethylamine.” &quot;Amphetamine” is not a “street-name/slang” for the organic compound, and in no way promotes its irresponsible, illegal, or recreational use. Just like amphetamine (the organic compound) can be legally used to keep humans awake and attentive, Amphetamine (the app) can be legally used to keep your Mac awake.&lt;/p&gt;
&lt;p&gt;There is nothing illicit about, or inherently wrong with, the legal use of prescribed amphetamines. The legal use and benefits of prescribed/legally obtained amphetamines cannot be ignored or dismissed simply because there is a potential for illegal abuse of the medication.&lt;/p&gt;
&lt;p&gt;Of course, it goes without saying that Amphetamine does not in any way, shape, or form, facilitate the sale of controlled substances.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Argument #2: Unfairly/Inconsistently Applied Guidelines&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;While Amphetamine (the app) does not promote the use of illegal drugs, there are other apps that do. You can find plenty of other apps on the App Store that either promote irresponsible use of both legal and illegal drugs, or outright glorify the manufacture and sale of illegal drugs. These other apps have not been removed from the App Store or forced to rebrand. Apple is not applying this guideline equally in the Mac or iOS App Stores. Amphetamine has been unfairly targeted.&lt;/p&gt;
&lt;p&gt;Examples:&lt;/p&gt;
&lt;ul readability=&quot;8.6115107913669&quot;&gt;&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https://apps.apple.com/us/app/coca/id1000808993?mt=12&quot; rel=&quot;nofollow&quot;&gt;Coca&lt;/a&gt; (macOS):&lt;/strong&gt; An app that keeps your Mac awake similar to Amphetamine. The coca plant’s leaves are used to make cocaine.&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;5.8819320214669&quot;&gt;
&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https://apps.apple.com/us/app/weed-tycoon-the-ultimate-marijuana-sim-cannabis-game/id789807894?mt=12&quot; rel=&quot;nofollow&quot;&gt;Weed Tycoon&lt;/a&gt; (macOS):&lt;/strong&gt; An app that simulates selling marijuana. Marijuana is not currently legal in all states of the United States. On a Federal level, marijuana remains a controlled substance In fact, the app’s description reads “In a future world where the ban on cannabis has been lifted world wide…”. The app is rated for persons 17 years or older. Most, if not all, states in the US that have legalized recreational marijuana use require the person to be at least 21 years of age. There are countless other apps like this one in the iOS App Store.&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;4.5110024449878&quot;&gt;
&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https://apps.apple.com/us/app/drug-mafia-weed-pawn-shop/id1523500596&quot; rel=&quot;nofollow&quot;&gt;Drug Mafia&lt;/a&gt; (iOS/iPadOS) &amp;amp; &lt;a href=&quot;https://apps.apple.com/us/app/narcos-cartel-wars-strategy/id1143052259&quot; rel=&quot;nofollow&quot;&gt;Narcos: Cartel Wars &amp;amp; Strategy&lt;/a&gt; (iOS/iPadOS):&lt;/strong&gt; These apps simulate the experience of manufacturing, distributing, and and/or profiting from illegal drugs such as cocaine and marijuana. While some of the substances that appear in the games have medical applications or a legalized/decriminalized status, these games in particular focus on the illicit trade and sale of these substances.&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0.98316498316498&quot;&gt;
&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https://apps.apple.com/us/app/ibeer-drink-from-your-phone/id475905823&quot; rel=&quot;nofollow&quot;&gt;iBeer&lt;/a&gt; (iOS/iPadOS):&lt;/strong&gt; This app allows you to endlessly “drink” beer from your iOS device. You tip the iOS device like a pint glass and “drink” the beer as many times as you want. This app is rated 17+ despite the legal drinking age in the United States being 21 years old in most localities.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;Argument #3: People (and Apple, Inc.) Love Amphetamine.app&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Amphetamine has been on the Mac App Store since 2014 (6 years), and existed as an AppleScript application prior to that. Throughout that time, Amphetamine’s icon has included a representation of a pill. The app’s name has always been “Amphetamine.” Never once has Apple objected to these before. Currently, in the US Mac App Store, Amphetamine has 1.4K reviews and a 4.8 out of 5 star rating. Clearly, if people are offended by Amphetamine’s name or icon, they are not the vocal majority.&lt;/p&gt;
&lt;p&gt;Apple, Inc. itself has featured Amphetamine in a &lt;a href=&quot;https://apps.apple.com/us/story/id1470456860&quot; rel=&quot;nofollow&quot;&gt;Mac App Store Story&lt;/a&gt;. Surely, there is someone at Apple who is “signing-off” or approving these Stories. How is it that, in all of the interactions I have had with Apple employees (hundreds? dozens?) over the last 6 years with regard to Amphetamine, not a single one of them has been offended by Amphetamine’s name or icon? Why is the name and icon offensive or dangerous today, but not last week?&lt;/p&gt;
&lt;p&gt;Amphetamine updates have been rejected by Apple on numerous occasions. One time, Apple’s App Review Team did not like my “Preview” screen shots. Another time, Apple objected to the default behavior when clicking Amphetamine’s menu bar icon, saying it must open the menu by default and not start a session. It is apparent that Apple is indeed paying attention when reviewing apps, and not just blindly approving apps without a real review. Not once has Amphetamine’s name and icon been called into question despite 41 app updates/submissions to Apple for review.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Argument #4: Amphetamine’s Name and Icon Are its Identity&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;“Amphetamine” is the brand name and identity of one of the apps that I have developed. Amphetamine is widely considered the go-to app for keeping your Mac awake. This is evidenced by its consistent high ranking in the Mac App Store, as well as its inclusion in various major-player tech sites’ “best of…” Mac apps lists. Amphetamine is deployed at businesses and universities large and small across the world. I often have tech support representatives from these businesses and schools email me to ask how to best deploy Amphetamine to their users’ devices.&lt;/p&gt;
&lt;p&gt;Once, the CEO of a large US-based healthcare group emailed me directly to request some customizations to Amphetamine for deployment in his organization! When I declined to make the customizations, the CEO offered me a job developing a custom application. Amphetamine is installed by default on Macs deployed at the Wyss Institute at Harvard Medical School. Countless individuals and organizations rely on Amphetamine, and recommend it by name.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Argument #5: Amphetamine’s Popularity Is Organic and User-Driven&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;As a part-time, small, and independent developer of a 100% free app like Amphetamine, you can understand how I don’t have a marketing budget. I have never purchased ads or otherwise significantly promoted Amphetamine.app on any web-based platform. Amphetamine’s popularity and growth is a direct result of word-of-mouth marketing done by the very people Apple, Inc. claims that Amphetamine.app is harming.&lt;/p&gt;
&lt;p&gt;Amphetamine is a very popular app, and is downloaded hundred to thousands of times every day. Since 2014, Amphetamine.app has been downloaded over 432,800 times.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Thank you!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Thank you again for helping save Amphetamine. It's people like you who made Amphetamine the app it is today. Amphetamine's popularity happened organically. I have never really done any advertising or marketing for Amphetamine beyond word-of-mouth, and the occasional post on Reddit or Twitter.&lt;/p&gt;
&lt;p&gt;If you have any questions, you can find me on &lt;a href=&quot;https://twitter.com/x74353&quot; rel=&quot;nofollow&quot;&gt;Twitter&lt;/a&gt;. ❤️&lt;/p&gt;
</description>
<pubDate>Fri, 01 Jan 2021 19:19:32 +0000</pubDate>
<dc:creator>giuliomagnifico</dc:creator>
<og:image>https://repository-images.githubusercontent.com/325698515/39601b00-4c26-11eb-9810-08ad8e3c371e</og:image>
<og:type>object</og:type>
<og:title>x74353/SaveAmphetamine</og:title>
<og:url>https://github.com/x74353/SaveAmphetamine</og:url>
<og:description>Apple has threatened to remove Amphetamine from the App Store. - x74353/SaveAmphetamine</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://github.com/x74353/SaveAmphetamine</dc:identifier>
</item>
<item>
<title>School or Prison</title>
<link>https://www.schoolprison.com/</link>
<guid isPermaLink="true" >https://www.schoolprison.com/</guid>
<description>[unable to retrieve full-text content]
&lt;p&gt;Article URL: &lt;a href=&quot;https://www.schoolprison.com/&quot;&gt;https://www.schoolprison.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Comments URL: &lt;a href=&quot;https://news.ycombinator.com/item?id=25605867&quot;&gt;https://news.ycombinator.com/item?id=25605867&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Points: 450&lt;/p&gt;
&lt;p&gt;# Comments: 239&lt;/p&gt;
</description>
<pubDate>Fri, 01 Jan 2021 19:18:23 +0000</pubDate>
<dc:creator>nickburlett</dc:creator>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.schoolprison.com/</dc:identifier>
</item>
<item>
<title>Artichoke is a Ruby made with Rust that compiles to WebAssembly</title>
<link>https://github.com/artichoke/artichoke</link>
<guid isPermaLink="true" >https://github.com/artichoke/artichoke</guid>
<description>&lt;p&gt;&lt;a href=&quot;https://github.com/artichoke/artichoke/actions&quot;&gt;&lt;img src=&quot;https://github.com/artichoke/artichoke/workflows/CI/badge.svg&quot; alt=&quot;GitHub Actions&quot;/&gt;&lt;/a&gt; &lt;a href=&quot;https://discord.gg/QCe2tp2&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;https://camo.githubusercontent.com/8f4001b08d37f35bc29a3d0118ea805339e8dd622601bdb5ef227b1afa0c5582/68747470733a2f2f696d672e736869656c64732e696f2f646973636f72642f363037363833393437343936373334373630&quot; alt=&quot;Discord&quot; data-canonical-src=&quot;https://img.shields.io/discord/607683947496734760&quot;/&gt;&lt;/a&gt; &lt;a href=&quot;https://twitter.com/artichokeruby&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;https://camo.githubusercontent.com/0deefe0c8d5040deae89423d40166ca1256934f188e3673e8213f6493c1517ff/68747470733a2f2f696d672e736869656c64732e696f2f747769747465722f666f6c6c6f772f6172746963686f6b65727562793f6c6162656c3d466f6c6c6f77267374796c653d736f6369616c&quot; alt=&quot;Twitter&quot; data-canonical-src=&quot;https://img.shields.io/twitter/follow/artichokeruby?label=Follow&amp;amp;style=social&quot;/&gt;&lt;/a&gt;&lt;br/&gt;&lt;a href=&quot;https://crates.io/crates/artichoke&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;https://camo.githubusercontent.com/b6517aac2944ad8b4f21826291eb25f95288d0f39200034b2f1aef17c003f224/68747470733a2f2f696d672e736869656c64732e696f2f6372617465732f762f6172746963686f6b652e737667&quot; alt=&quot;Crate&quot; data-canonical-src=&quot;https://img.shields.io/crates/v/artichoke.svg&quot;/&gt;&lt;/a&gt; &lt;a href=&quot;https://docs.rs/artichoke&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;https://camo.githubusercontent.com/4ce3abaf39828a57cb4b2133b48f9104388221ff801238aead5059a837eb5004/68747470733a2f2f646f63732e72732f6172746963686f6b652f62616467652e737667&quot; alt=&quot;API&quot; data-canonical-src=&quot;https://docs.rs/artichoke/badge.svg&quot;/&gt;&lt;/a&gt; &lt;a href=&quot;https://artichoke.github.io/artichoke/artichoke/&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;https://camo.githubusercontent.com/55d4f0e0880fb1fdd4a33a8ca340885d879c9bd1fccc396ca7038e1c7d8d5c4f/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f63732d7472756e6b2d626c75652e737667&quot; alt=&quot;API trunk&quot; data-canonical-src=&quot;https://img.shields.io/badge/docs-trunk-blue.svg&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p align=&quot;center&quot;&gt;&lt;a href=&quot;https://www.artichokeruby.org&quot; rel=&quot;nofollow&quot;&gt;&lt;img alt=&quot;Artichoke Ruby logo&quot; height=&quot;200&quot; width=&quot;200&quot; src=&quot;https://camo.githubusercontent.com/d024671df7757be45a2561ffddb91de1aac02a7c641972eaeac6eebb8b847ce9/68747470733a2f2f7777772e6172746963686f6b65727562792e6f72672f6172746963686f6b652d6c6f676f2e737667&quot; data-canonical-src=&quot;https://www.artichokeruby.org/artichoke-logo.svg&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Artichoke is a Ruby implementation written in Rust and Ruby. Artichoke intends to be &lt;a href=&quot;https://github.com/ruby/spec&quot;&gt;MRI-compatible&lt;/a&gt; and targets Ruby 2.6.3. Artichoke provides a Ruby runtime implemented in Rust and Ruby.&lt;/p&gt;
&lt;h2&gt;Try Artichoke&lt;/h2&gt;
&lt;p align=&quot;center&quot;&gt;&lt;a href=&quot;https://artichoke.run&quot; rel=&quot;nofollow&quot;&gt;&lt;img alt=&quot;Artichoke Ruby WebAssembly playground&quot; width=&quot;400&quot; src=&quot;https://camo.githubusercontent.com/1da935209594d642840eaf567cfb04cade284665bdaf4b46b6ba69abd4a776de/68747470733a2f2f6172746963686f6b652e72756e2f706c617967726f756e642e706e67&quot; data-canonical-src=&quot;https://artichoke.run/playground.png&quot;/&gt;&lt;/a&gt;&lt;br/&gt;&lt;em&gt;Artichoke Ruby Wasm Playground&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;You can &lt;a href=&quot;https://artichoke.run&quot; rel=&quot;nofollow&quot;&gt;try Artichoke in your browser&lt;/a&gt;. The &lt;a href=&quot;https://github.com/artichoke/playground&quot;&gt;Artichoke Playground&lt;/a&gt; runs a &lt;a href=&quot;https://webassembly.org/&quot; rel=&quot;nofollow&quot;&gt;WebAssembly&lt;/a&gt; build of Artichoke.&lt;/p&gt;
&lt;h2&gt;Install Artichoke&lt;/h2&gt;
&lt;h3&gt;Prebuilt nightly binaries&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/artichoke/nightly/releases/latest&quot;&gt;Download a prebuilt binary from artichoke/nightly&lt;/a&gt;. Binaries are available for Linux, Linux/musl, macOS, and Windows.&lt;/p&gt;
&lt;p&gt;These daily binaries track the latest trunk branch of Artichoke.&lt;/p&gt;
&lt;p&gt;Binaries are also distributed through &lt;a href=&quot;https://github.com/rbenv/ruby-build&quot;&gt;ruby-build&lt;/a&gt;. To install with &lt;a href=&quot;https://github.com/rbenv/rbenv&quot;&gt;rbenv&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot; readability=&quot;7&quot;&gt;
&lt;pre&gt;
rbenv install artichoke-dev
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Cargo&lt;/h3&gt;
&lt;p&gt;You can install a pre-release build of Artichoke using &lt;code&gt;cargo&lt;/code&gt;, Rust's package manager, by running:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot; readability=&quot;7&quot;&gt;
&lt;pre&gt;
cargo install --git https://github.com/artichoke/artichoke --branch trunk --locked artichoke
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To install via &lt;code&gt;cargo install&lt;/code&gt; or to checkout and build locally, you'll need Rust, clang, and Ruby. &lt;a href=&quot;https://github.com/artichoke/artichoke/blob/trunk/BUILD.md&quot;&gt;&lt;code&gt;BUILD.md&lt;/code&gt;&lt;/a&gt; has more detail on &lt;a href=&quot;https://github.com/artichoke/artichoke/blob/trunk/BUILD.md#prerequisites&quot;&gt;how to set up the compiler toolchain&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Docker&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://hub.docker.com/r/artichokeruby/artichoke&quot; rel=&quot;nofollow&quot;&gt;Artichoke is available on Docker Hub&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;You can launch a REPL by running:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot; readability=&quot;7&quot;&gt;
&lt;pre&gt;
docker run -it docker.io/artichokeruby/artichoke airb
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Usage&lt;/h2&gt;
&lt;p&gt;Artichoke ships with two binaries: &lt;code&gt;airb&lt;/code&gt; and &lt;code&gt;artichoke&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;&lt;code&gt;airb&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;airb&lt;/code&gt; is the Artichoke implementation of &lt;code&gt;irb&lt;/code&gt; and is an interactive Ruby shell and &lt;a href=&quot;https://en.wikipedia.org/wiki/Interactive_Ruby_Shell&quot; rel=&quot;nofollow&quot;&gt;REPL&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;airb&lt;/code&gt; is a readline-enabled shell, although it does not persist history.&lt;/p&gt;
&lt;h2&gt;&lt;code&gt;artichoke&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;artichoke&lt;/code&gt; is the &lt;code&gt;ruby&lt;/code&gt; binary frontend to Artichoke.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;artichoke&lt;/code&gt; supports executing programs via files, stdin, or inline with one or more &lt;code&gt;-e&lt;/code&gt; flags.&lt;/p&gt;
&lt;p&gt;Artichoke can &lt;code&gt;require&lt;/code&gt;, &lt;code&gt;require_relative&lt;/code&gt;, and &lt;code&gt;load&lt;/code&gt; files from the local filesystem, but otherwise does not yet support local filesystem access. A temporary workaround is to inject data into the interpreter with the &lt;code&gt;--with-fixture&lt;/code&gt; flag, which reads file contents into a &lt;code&gt;$fixture&lt;/code&gt; global.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-text-shell-session&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-s1&quot;&gt;artichoke --help&lt;/span&gt;
&lt;span class=&quot;pl-c1&quot;&gt;artichoke 0.1.0-pre.0&lt;/span&gt;
&lt;span class=&quot;pl-c1&quot;&gt;Artichoke is a Ruby made with Rust.&lt;/span&gt;

&lt;span class=&quot;pl-c1&quot;&gt;USAGE:&lt;/span&gt;
&lt;span class=&quot;pl-c1&quot;&gt;    artichoke [FLAGS] [OPTIONS] [--] [programfile]&lt;/span&gt;

&lt;span class=&quot;pl-c1&quot;&gt;FLAGS:&lt;/span&gt;
&lt;span class=&quot;pl-c1&quot;&gt;        --copyright    print the copyright&lt;/span&gt;
&lt;span class=&quot;pl-c1&quot;&gt;    -h, --help         Prints help information&lt;/span&gt;
&lt;span class=&quot;pl-c1&quot;&gt;    -V, --version      Prints version information&lt;/span&gt;

&lt;span class=&quot;pl-c1&quot;&gt;OPTIONS:&lt;/span&gt;
&lt;span class=&quot;pl-c1&quot;&gt;    -e &amp;lt;commands&amp;gt;...                one line of script. Several -e's allowed. Omit [programfile]&lt;/span&gt;
&lt;span class=&quot;pl-c1&quot;&gt;        --with-fixture &amp;lt;fixture&amp;gt;    file whose contents will be read into the `$fixture` global&lt;/span&gt;

&lt;span class=&quot;pl-c1&quot;&gt;ARGS:&lt;/span&gt;
&lt;span class=&quot;pl-c1&quot;&gt;    &amp;lt;programfile&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Design and Goals&lt;/h2&gt;
&lt;p&gt;Artichoke is &lt;a href=&quot;https://github.com/artichoke/artichoke/blob/trunk/VISION.md&quot;&gt;designed to enable experimentation&lt;/a&gt;. The top goals of the project are:&lt;/p&gt;
&lt;h2&gt;Contributing&lt;/h2&gt;
&lt;p&gt;Artichoke aspires to be a Ruby 2.6.3-compatible implementation of the Ruby programming language. &lt;a href=&quot;https://github.com/artichoke/artichoke/issues&quot;&gt;There is lots to do&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;If Artichoke does not run Ruby source code in the same way that MRI does, it is a bug and we would appreciate if you &lt;a href=&quot;https://github.com/artichoke/artichoke/issues/new&quot;&gt;filed an issue so we can fix it&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;If you would like to contribute code 👩‍💻👨‍💻, find an issue that looks interesting and leave a comment that you're beginning to investigate. If there is no issue, please file one before beginning to work on a PR. &lt;a href=&quot;https://github.com/artichoke/artichoke/labels/E-easy&quot;&gt;Good first issues are labeled &lt;code&gt;E-easy&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Discussion&lt;/h3&gt;
&lt;p&gt;If you'd like to engage in a discussion outside of GitHub, you can &lt;a href=&quot;https://discord.gg/QCe2tp2&quot; rel=&quot;nofollow&quot;&gt;join Artichoke's public Discord server&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;License&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;artichoke&lt;/code&gt; is licensed with the &lt;a href=&quot;https://github.com/artichoke/artichoke/blob/trunk/LICENSE&quot;&gt;MIT License&lt;/a&gt; (c) Ryan Lopopolo.&lt;/p&gt;
&lt;p&gt;Some portions of Artichoke are derived from third party sources. The READMEs in each workspace crate discuss which third party licenses are applicable to the sources and derived works in Artichoke.&lt;/p&gt;
</description>
<pubDate>Fri, 01 Jan 2021 18:40:20 +0000</pubDate>
<dc:creator>ibraheemdev</dc:creator>
<og:image>https://repository-images.githubusercontent.com/199196552/3b5f4100-4731-11eb-9873-fbca5428e628</og:image>
<og:type>object</og:type>
<og:title>artichoke/artichoke</og:title>
<og:url>https://github.com/artichoke/artichoke</og:url>
<og:description>💎 Artichoke is a Ruby made with Rust. Contribute to artichoke/artichoke development by creating an account on GitHub.</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://github.com/artichoke/artichoke</dc:identifier>
</item>
<item>
<title>My Experience at Apple</title>
<link>https://ex-apple-engineer.medium.com/my-experience-apple-5d8b6205cb56</link>
<guid isPermaLink="true" >https://ex-apple-engineer.medium.com/my-experience-apple-5d8b6205cb56</guid>
<description>&lt;div class=&quot;&quot;&gt;

&lt;div class=&quot;cs&quot;&gt;
&lt;div class=&quot;n cf gm gn go&quot;&gt;
&lt;div class=&quot;o n&quot;&gt;
&lt;div&gt;&lt;a rel=&quot;noopener&quot; href=&quot;https://ex-apple-engineer.medium.com/?source=post_page-----5d8b6205cb56--------------------------------&quot;&gt;&lt;img alt=&quot;Ex Apple Engineer&quot; class=&quot;s gp gq gr&quot; src=&quot;https://miro.medium.com/fit/c/56/56/1*o3l4N-q01WTDrG73LitR8g.jpeg&quot; width=&quot;28&quot; height=&quot;28&quot;/&gt;&lt;/a&gt;&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p id=&quot;83f9&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;Apple was my first job. A dream that came true after many years of hard work, sacrifices and a PhD in computer science under the supervision of one of the best and most well-known professors in the field.&lt;/p&gt;
&lt;p id=&quot;2ac1&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;Unfortunately, Apple became the place that I lost feeling of physical and psychological safety and the terror that it inflicted on me has impacted me on such a core level that the painful memories and flashbacks have replaced my dreams and they will hunt me until I am alive.&lt;/p&gt;
&lt;p id=&quot;f0f7&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;Every second &lt;span id=&quot;rmm&quot;&gt;&lt;span id=&quot;rmm&quot;&gt;o&lt;/span&gt;&lt;/span&gt;f my time at Apple, was spent on preparing for the worst and only when I thought it cannot get any worse, something worse happened. My Apple experience not only put my career in the wrong path but also robbed me of peace, joy and hope and showed me humans at their most disgusting level of darkness, deceitfulness and cruelty.&lt;/p&gt;
&lt;p id=&quot;65cc&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;Although time has passed by, I have not healed from the trauma. I have not found closure to the experience and I believe telling my story is an essential step in my healing journey. I no longer want to remain silent about the abuse. Silence turns abuse into a norm and enables abusers. Abusers are in minority; it is the silent majority who make the big difference and disarm them by exposing abuse.&lt;/p&gt;
&lt;p id=&quot;eb3b&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;Telling my story will make me free and I hope it helps others with similar workplace trauma. I hope that my story shines light on the dark and force employers like Apple to stop abuse in the workplace.&lt;/p&gt;
&lt;p id=&quot;fa5c&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;While I understand that this post is long and reading it might be painful, I wanted to give full details and context of what happened. I would like to use my story to initiate change. I want my readers to develop awareness about workplace abuse and if they are doing it or seeing this happening to anyone, I urge them to stop it. Workplace abuse can cost lives and at minimum it will leave major trauma needing years to recover from the invisible wounds.&lt;/p&gt;
&lt;p id=&quot;b33d&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;&lt;strong class=&quot;hx cv&quot;&gt;In this post you will read about how a team at Apple fabricated results for a project, their history of abuse, scapegoating, firing and forcing out employees, nepotism and corruption in the organization and contribution of senior management and HR to further worsening the situation.&lt;/strong&gt;&lt;/p&gt;
&lt;p id=&quot;a74e&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;If you are an Apple employee, please send this story to your upper management particularly Tim Cook.&lt;/p&gt;

&lt;p id=&quot;babd&quot; class=&quot;hv hw fq hx b hy jq ia ib ic jr ie if ig js ii ij ik jt im in io ju iq ir is di dz&quot;&gt;The first day of my job, I got to know that I was hired in a team of 3 including my manager. My manager and one of the team members were remote employees and living in a different city. My manager had suddenly decided to take a vacation and did not show up for my onboarding. An “iBuddy”, the other member of the team, showed up for onboarding me. She &lt;strong class=&quot;hx cv&quot;&gt;started my onboarding at Apple by telling me that I was hired as a replacement for a guy they just fired&lt;/strong&gt; and that &lt;strong class=&quot;hx cv&quot;&gt;I should watch it as the company fires people left and right!&lt;/strong&gt;&lt;/p&gt;
&lt;p id=&quot;d594&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;My first interaction with my manager happened when she finally showed up on my third day and &lt;strong class=&quot;hx cv&quot;&gt;started laughing and making fun of my last name&lt;/strong&gt; and that the last name must be the reason, I had difficulty setting up my accounts!&lt;/p&gt;
&lt;p id=&quot;0a40&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;Until the third day of my employment at Apple, I had no idea what I will be working on. First two days, the iBuddy said it was a secret and confidential and she cannot tell me what I will work on even though I had already started working in the company. On the third day, my manager emailed me a deck containing slides with few lines of text as introduction of the project. No explanation, no context, no data and no code. Just a deck that was emailed.&lt;/p&gt;
&lt;p id=&quot;617c&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;There was no code repository for our project and the page that was listed as the project page only had script names in it but no code was linked. For example, you could see name of the scripts such as garbage.py but there was no code! The page looked like a placeholder with no functionality or value.&lt;/p&gt;
&lt;p id=&quot;ed5e&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;&lt;strong class=&quot;hx cv&quot;&gt;The guy who had done most of the work for the project had got fired, my manager and other remote teammate did not know much about the project and were often out of office on vacation. My iBuddy was the only person who had all the information and resources on a project. It was very hard to make sense of the project with no documentation and the iBuddy was my only source.&lt;/strong&gt; Any questions I asked the iBuddy would answer by “you do it better if you know better”, “that is why we hired you”, “this is going to be your job to do that”, “ you do not get to decide that”, “You do not need to know that” or “you do not need to have that”, “I do not know”. Our conversations were very tense and upsetting and I did not gain any more information by asking questions.&lt;/p&gt;
&lt;p id=&quot;7670&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;&lt;strong class=&quot;hx cv&quot;&gt;There was great amount of nepotism in my team and in the organization.&lt;/strong&gt; My manager and the other team member had known each other as best friends for over 20 years, and they both knew the iBuddy for more than 10 years and soon there was a new hire who also was strongly connected to the iBuddy and other members in the organization. In the organization, there were many close relationships such as husband and wife who worked in the same teams and on the same projects. If you looked closer, you would see how most people have known each other for years and are a part of a clique. The attitude of the team was forming cliques and excluding whoever that does not belong to the their circle. This exclusion was very broad and included group lunch/coffee, work conversations in meetings, work meetings and after work events.&lt;/p&gt;
&lt;p id=&quot;8208&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;During my first few months, I got &lt;strong class=&quot;hx cv&quot;&gt;a lot of unnecessary information&lt;/strong&gt; from iBuddy, the manager and the other team member &lt;strong class=&quot;hx cv&quot;&gt;about the guy who was fired including&lt;/strong&gt; &lt;strong class=&quot;hx cv&quot;&gt;his name, his specific health condition and reason and full graphic description of his termination&lt;/strong&gt;. Most faults of the project was also being blamed on him. The most disturbing part was the joy and laughter that was expressed while describing it.&lt;/p&gt;
&lt;p id=&quot;1cdb&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;I also got to know about another &lt;strong class=&quot;hx cv&quot;&gt;intern who also worked in the team a few months prior to my start date and was overworked up to 70 hours a week&lt;/strong&gt;. It turns out the guy had been &lt;strong class=&quot;hx cv&quot;&gt;falsely accused of a serious violation&lt;/strong&gt; and while it was not proved, &lt;strong class=&quot;hx cv&quot;&gt;he spent hours in workplace investigation and HR during his short internship&lt;/strong&gt;. &lt;strong class=&quot;hx cv&quot;&gt;He was also abused in the team and had a very bad experience and had suffered continuous tension&lt;/strong&gt;. He was also blamed for faults in the project. He had lost his chance to work at Apple as the manager had given him a very negative evaluation. &lt;strong class=&quot;hx cv&quot;&gt;Accusing people and scapegoating seemed like a pattern in this team. I started to fear that they will pull something serious on me too, then fire me and blame everything on me just like what had happened with the previous two guys only a few months before I joined.&lt;/strong&gt;&lt;/p&gt;

&lt;p id=&quot;96c7&quot; class=&quot;hv hw fq hx b hy jq ia ib ic jr ie if ig js ii ij ik jt im in io ju iq ir is di dz&quot;&gt;&lt;strong class=&quot;hx cv&quot;&gt;My access to data and resources was still being limited and controlled by the iBuddy.&lt;/strong&gt; She would give me access to a document and send an email to me and cc manager that she gave me access, then she would revoke my access when I was looking at the document. I had no interaction with my manager and she was refusing to have regular 1:1 meetings with me and was not responding to my emails. &lt;strong class=&quot;hx cv&quot;&gt;My manager was giving indirect negative feedback through the iBuddy rather than speaking with me&lt;/strong&gt; and did not change this despite my formal request.&lt;/p&gt;
&lt;p id=&quot;bcec&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;&lt;strong class=&quot;hx cv&quot;&gt;I was constantly being excluded from work meetings and events.&lt;/strong&gt; There were meetings that &lt;strong class=&quot;hx cv&quot;&gt;I would be the only one who was not invited&lt;/strong&gt; to and considering the size of the team (4 people) and the that there was only one project we were working on, this was very upsetting and strange. &lt;strong class=&quot;hx cv&quot;&gt;I would enter the meetings and they would stop talking and make really strange gestures&lt;/strong&gt;. I was ignored, ridiculed and attacked in the team meetings. &lt;strong class=&quot;hx cv&quot;&gt;I was being assigned to do tasks such as manual annotation of the data and was being forced to complete my coworker’s tasks on top of my own tasks but was not given the credit after I was done.&lt;/strong&gt; One day the coworker would be sick, next day she would be in a car accident and next going through a breakup while the week after that she would go car shopping or get busy on her phone shoe shopping while the other teammate would have a family issue or just not in the mood to work. &lt;strong class=&quot;hx cv&quot;&gt;I was also constantly being compared to the previously fired employee which felt terrible.&lt;/strong&gt;&lt;/p&gt;
&lt;p id=&quot;436f&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;I had joined Apple on a &lt;strong class=&quot;hx cv&quot;&gt;student OPT visa&lt;/strong&gt; which was authorized by my university and was &lt;strong class=&quot;hx cv&quot;&gt;valid for one year&lt;/strong&gt;. It was extendable by having a valid offer by a qualified employer for another two years upon approval. To maintain this visa the employer and the student have to regularly report to USCIS and if they miss one or do not do it on time, the visa can be revoked. &lt;strong class=&quot;hx cv&quot;&gt;This reports are signed by student’s direct manager.&lt;/strong&gt;&lt;/p&gt;
&lt;p id=&quot;2ba0&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;As I am born in a certain country, I need an additional clearance process called obtaining &lt;strong class=&quot;hx cv&quot;&gt;“export license”&lt;/strong&gt; which is necessary to join majority of technical jobs in the united states. This process takes about 3–9 months and with a chance of taking more time or being rejected. Hence, many companies do not hire us on a visa and for the ones who hire, we need additional time to allow the process be completed and at times we lose the job opportunity because of delays in this process.&lt;/p&gt;
&lt;p id=&quot;13a5&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;When I joined Apple, &lt;strong class=&quot;hx cv&quot;&gt;I had used some of the allowed unemployment time of my OPT visa waiting for my position to start and was left with very limited days of allowed unemployment&lt;/strong&gt;. I had shared all this information with my manager right when I joined to make sure that my mandatory reporting will be on time and with no mistake as it could put me at risk.&lt;/p&gt;
&lt;p id=&quot;17a1&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;Given the description above, losing my position at Apple or resigning from it before being cleared for another job would technically mean I am at risk of &lt;strong class=&quot;hx cv&quot;&gt;losing status and deportation&lt;/strong&gt;. Also given that the &lt;strong class=&quot;hx cv&quot;&gt;Muslim ban has been in place since 2017&lt;/strong&gt;, if that had to happen &lt;strong class=&quot;hx cv&quot;&gt;obtaining another visa would be practically impossible for me&lt;/strong&gt; and if I had to leave USA at the time for any reason, it would have been a permanent decision.&lt;/p&gt;
&lt;p id=&quot;9332&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;So, hearing about firings in the company as an orientation and onboarding process, constantly being compared to the guy they had fired and being told I will be fired was more painful and damaging to me than people with no visa problems.&lt;/p&gt;
&lt;p id=&quot;52e9&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;&lt;strong class=&quot;hx cv&quot;&gt;The more I was seeing from the project, data or results, the more confident I was that they are seriously troubled.&lt;/strong&gt; Anything I would try to do would achieve 50% of their accuracy and I could see that there are serious interventions such as removing particular data points to achieve the results while remained unreported and was denied even when I directly asked, multiplying by a factor somewhere in the code, mixing features, etc. This completely changed the results, trends and conclusions. I brought this up multiple times and they said that &lt;strong class=&quot;hx cv&quot;&gt;higher ups are not technical to know this and they do not care&lt;/strong&gt;. &lt;strong class=&quot;hx cv&quot;&gt;It made me worried because they knew about it and did not correct.&lt;/strong&gt; At times the real result was as good as a random guess but was reported much higher and with knowledge of it, it meant they were cheating and fabricating results. Everything up to that point was blamed on the two previous guys and they both got into serious messy situations. The team had started my onboarding with firing threats and I was the only outsider in the team. How would I know their plan is not to scapegoat me if they get caught and get me fired for misconduct?&lt;/p&gt;
&lt;p id=&quot;3edb&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;After a few months, the constant tension in the team started to affect me very badly. I sent an email to my manager and told her that I was uncomfortable and would like her to intervene and help solve the problems that are happening in the team. In response, my manager told her manager and the senior director of the organization and then told HR. Then, she went and told the iBuddy that I have called HR on her!&lt;/p&gt;
&lt;p id=&quot;3395&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;&lt;strong class=&quot;hx cv&quot;&gt;HR scheduled a confrontational meeting between me, iBuddy and the manager&lt;/strong&gt; where the HR lady looked at the evidence of all the listed issues and concluded that the iBuddy just does not know how to speak English and that she does not have to like me! Most of the evidence such as being excluded from the work meetings, not having proper access, troubled results, etc. was written and provable. &lt;strong class=&quot;hx cv&quot;&gt;HR lady and the manager also told me that I cannot tell anyone about the abuse and that it is confidential!!&lt;/strong&gt;&lt;/p&gt;

&lt;p id=&quot;c14e&quot; class=&quot;hv hw fq hx b hy jq ia ib ic jr ie if ig js ii ij ik jt im in io ju iq ir is di dz&quot;&gt;&lt;strong class=&quot;hx cv&quot;&gt;After the confrontational HR meeting, things got even worse.&lt;/strong&gt;&lt;/p&gt;
&lt;p id=&quot;4822&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;The first time I spoke to my manager after the HR meeting, &lt;strong class=&quot;hx cv&quot;&gt;she started yelling at me and kept raising her voice in the meeting&lt;/strong&gt;. I asked my manager and HR to change my office and put me in an office with a person from a different team or let me work from home for a while. The environment of my team was toxic, and I did not want to deal with that in my office too. The request was denied, and my manager told me that the senior management and HR have told that I can only be officemate with a member of the team. She told me that if I cannot come to the office, I should officially ask for accommodation which they do not have to meet and it will lead to my termination since I am not able to do my basic job functions! It was interesting to see sitting in a two person office with a team member was a basic job function and I could be terminated for not wanting to do that. She assigned the other member of the team to be my new officemate.&lt;/p&gt;
&lt;p id=&quot;20ee&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;The new officemate had &lt;strong class=&quot;hx cv&quot;&gt;previous harassment history at Apple as well as criminal history and arrest.&lt;/strong&gt; &lt;strong class=&quot;hx cv&quot;&gt;She took pride that she does what she wants, and nobody can do anything about it.&lt;/strong&gt; She also shared that &lt;strong class=&quot;hx cv&quot;&gt;my manager has asked her to report on when I come to the office and when I leave, what tabs I have open on my monitor, who do I talk to, if I work hard, etc&lt;/strong&gt;. She described that she was assigned to watch the previous guy who just got fired and report all these metrics about him too.&lt;/p&gt;
&lt;p id=&quot;73e6&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;&lt;strong class=&quot;hx cv&quot;&gt;I was the youngest member of the team and did not have any work experience prior to Apple and I was also the only member who did not have strong connections to anyone in the team or in the organization.&lt;/strong&gt; &lt;strong class=&quot;hx cv&quot;&gt;The new officemate called me names, made hurtful comments about my home country, encouraged me to leave Apple, threatened to get me deported.&lt;/strong&gt; She had claimed multiple disabilities and everything she said or did was being justified by my manager saying “X is just being X!”.&lt;/p&gt;
&lt;p id=&quot;b35a&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;I cannot find words to describe how sad and stressed I felt being stuck with her in that windowless office and under her watch and that my manager’s opinion of me was dependent on what she told her.&lt;/p&gt;
&lt;p id=&quot;34d5&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;Some examples of what she used to tell me:&lt;/p&gt;
&lt;ul class=&quot;&quot;&gt;&lt;li id=&quot;74f0&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is jv jw jx dz&quot;&gt;“You are a skinny kid with no experience. Nobody cares about what you do. Just put your head down, shut your mouth or get yourself fired”.&lt;/li&gt;
&lt;li id=&quot;2c6e&quot; class=&quot;hv hw fq hx b hy jy ia ib ic jz ie if ig ka ii ij ik kb im in io kc iq ir is jv jw jx dz&quot;&gt;“You escaped a war zone; it is obvious you have many mental problems. ”&lt;/li&gt;
&lt;li id=&quot;770d&quot; class=&quot;hv hw fq hx b hy jy ia ib ic jz ie if ig ka ii ij ik kb im in io kc iq ir is jv jw jx dz&quot;&gt;“Just leave Apple before they kick you out. This is exactly what happened to the previous guy we fired.”&lt;/li&gt;
&lt;li id=&quot;a1a7&quot; class=&quot;hv hw fq hx b hy jy ia ib ic jz ie if ig ka ii ij ik kb im in io kc iq ir is jv jw jx dz&quot;&gt;“My husband worked for FBI and I can get you deported on a cargo boat if I want.”&lt;/li&gt;
&lt;li id=&quot;9f9b&quot; class=&quot;hv hw fq hx b hy jy ia ib ic jz ie if ig ka ii ij ik kb im in io kc iq ir is jv jw jx dz&quot;&gt;“How much do you drink? Do you do drugs?”&lt;/li&gt;
&lt;/ul&gt;&lt;p id=&quot;e015&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;Senior manager was added to my 1:1 meeting and &lt;strong class=&quot;hx cv&quot;&gt;my manager was doing her absolute best to point out any flaws she could find at all in my work which often meant typos.&lt;/strong&gt; She then would send emails cc’ing senior manager and talk about the “mistakes” I have made in writing my email!&lt;/p&gt;
&lt;p id=&quot;9f5f&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;The senior manager and my manager were counting minutes and hours of my work and setting up multiple meetings for justifying why I need that time (1-day!). This is while the rest of the team were taking weeks and months to complete a task that takes an hour, were on vacation or just out of office or out of touch. The time they were out of office was more than 2 months in one year! I asked for vacation once and my manager did not respond to my request and emails. After couple of weeks of resending it and asking senior manager, I managed to take 2 days of vacation!&lt;/p&gt;
&lt;p id=&quot;308c&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;On one occasion I had to obtain data from my iBuddy and officemate, I found a serious bug that was a complete mismatch in data and labels and had to be corrected. The bug was caused by my “iBuddy” and the new officemate. I reported the bug and there was a meeting scheduled by “iBuddy” for 5:00 pm in my office to close the bug as she was going on vacation the next day. The whole team including the manager were invited to the meeting. In that meeting, I was being yelled at and the conversation was getting very heated. My manager had not joined the meeting, I texted the senior manager and asked him for help, but he had already left work. &lt;strong class=&quot;hx cv&quot;&gt;My officemate was incredibly angry and was constantly yelling and she finally got super close to me and posed to punch me in the face.&lt;/strong&gt; The other teammates did nothing and watched it happen. I proposed to postpone the meeting and left work that day.&lt;/p&gt;
&lt;p id=&quot;1480&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;I sent a summary of the meeting to my manager and senior manager and once again asked the senior manager to help me transfer to a different team. I did not hear back on what is going on. I was worried and I scheduled a meeting with HR and described what had happened.&lt;/p&gt;
&lt;p id=&quot;ac77&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;&lt;strong class=&quot;hx cv&quot;&gt;Senior director of the organization sent a meeting request out of nowhere saying he has not met me and want to meet and greet me!&lt;/strong&gt; I went to that meeting and faced an emotionally charged person who was constantly attacking me and intimidating me. I could see on calendar that my manager had previous meetings with him prior to my meeting and it was very obvious that she had described me very negatively. He started talking about when layoffs happen in organization and he must let people go. Then he told me not to go to HR and go to him if I had any questions. He said HR does not know anything and he knows much better. &lt;strong class=&quot;hx cv&quot;&gt;Letting people go and not going to HR was the dominant topic of my “meet and greet” meeting with the senior director&lt;/strong&gt;.&lt;/p&gt;

&lt;p id=&quot;e4ce&quot; class=&quot;hv hw fq hx b hy jq ia ib ic jr ie if ig js ii ij ik jt im in io ju iq ir is di dz&quot;&gt;&lt;strong class=&quot;hx cv&quot;&gt;After what had happened, I was experiencing severe panic attacks and was not able to sleep or stop thinking about what happened.&lt;/strong&gt; I went to see a doctor at Apple wellness center. While I was waiting for the doctor in the room, my manager texted me and asked me to go to a meeting with her, senior manager and senior director. I started to have a panic attack. I was shaking, was not able to speak and my heart rate was abnormally high and it went on for more than an hour. It was bad enough that they called the director of the center and an on-call counselor to help me and eventually sent me home with beta blockers to keep my heart rate in check. My doctor gave me a note to work from home for 3 weeks and not be in the workplace.&lt;/p&gt;
&lt;p id=&quot;8ab7&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;In those 3 weeks, I worked from home and did not have any meetings and there was an investigation in process. &lt;strong class=&quot;hx cv&quot;&gt;After three weeks, I heard back from an Apple investigator that he sees some frictions in the team, and&lt;/strong&gt; &lt;strong class=&quot;hx cv&quot;&gt;I should just assume positive intent and everything will be fine!&lt;/strong&gt;&lt;/p&gt;
&lt;p id=&quot;5e78&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;Immediately after that, my manager scheduled a call with senior manager in it. &lt;strong class=&quot;hx cv&quot;&gt;She called and read a pre-written document over the phone full of accusations with no chance for me to respond and she immediately sent it via email cc’ing the senior manager&lt;/strong&gt;. I was sad that not only I was being abused but now I was also being blamed for it and told that I caused it! After two days, my manager sent me an email to do my first formal performance evaluation.&lt;/p&gt;
&lt;p id=&quot;f39a&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;&lt;strong class=&quot;hx cv&quot;&gt;After that, in every meeting she would accuse me of something and send an email about it.&lt;/strong&gt; I would reach out to ask about what happened and rather than responding to my questions they would accuse me of being argumentative, wasting their time and not being able to take feedback which would be additional &lt;strong class=&quot;hx cv&quot;&gt;emails where HR and senior director were also bcc’d&lt;/strong&gt;. In one occasion they cc’d them instead and in another occasion one of the bcc’d HR individuals responded to the email. I knew that they are making a paper trail as this is something &lt;strong class=&quot;hx cv&quot;&gt;my manager had described to me as a part of my onboarding process in the first few weeks that they need paper trail to get a person fired and not get into legal trouble.&lt;/strong&gt;&lt;/p&gt;
&lt;p id=&quot;4e5a&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;I asked HR and senior management to help me change teams since it clearly was not working, but they said you are bad at teamwork and we will not help you transfer. Teamwork with people who call me names, threaten to beat me, falsely accuse anyone who will not cover for them, get me to do their job and in return threaten me to get deported on a cargo boat and now hold power of evaluating my performance and future opportunities?&lt;/p&gt;
&lt;p id=&quot;7795&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;The tense meetings continued. &lt;strong class=&quot;hx cv&quot;&gt;I was yelled at, belittled, made fun of, kept under extreme scrutiny and called names&lt;/strong&gt;. &lt;strong class=&quot;hx cv&quot;&gt;The senior manager was aware that I experience panic attacks&lt;/strong&gt; and meetings are hard for me to attend. He was also aware that &lt;strong class=&quot;hx cv&quot;&gt;I am taking medications to sit in the meetings&lt;/strong&gt;, and I needed time in advance to take my medication and calling a meeting only a few minutes before that will not give me time to do it. &lt;strong class=&quot;hx cv&quot;&gt;He also knew cancelling and rescheduling meetings will force me to take more medication that had serious side effects for me&lt;/strong&gt;. I had spoken to him that the medication makes me tired and has other side effects and had asked to schedule meetings in advance if necessary but for things that can be handled in an email I preferred emails.&lt;/p&gt;
&lt;p id=&quot;5c93&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;After speaking with him, he seemed to use that information against me. In a team meeting he was obsessed with why I am taking 1-day to do a task. He then accused me that I have changed the time which was not true and the program manager pointed that out. Rather than apologizing he said we need to have a meeting about it. &lt;strong class=&quot;hx cv&quot;&gt;Nobody else was asked any questions about their timelines or tasks in the meeting and the entire time of the meeting was spent questioning and accusing me in front of the team&lt;/strong&gt;. I was having another panic attack in the meeting and my iBuddy was laughing about it. Then the senior manager scheduled a meeting to discuss he then cancelled it. I suffered multiple panic attacks that day and felt very unwell. I emailed the senior manager and wrote to him what sub tasks are involved, why I had allowed that much time (only 1-day) and suggested that he asks his questions in an email. I also said that I was unhappy about how he treated me in the meeting, how unwell I was feeling and that I do not understand why he is making a huge deal of 1-day that I needed to complete that task. He emailed me back and said I was resisting attending meetings and explaining what I am doing. This was absolutely not true. I had given a timeline for all my tasks and subtasks with estimate of time which they had approved and we reviewed them twice a week.&lt;/p&gt;
&lt;p id=&quot;33fb&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;Even though the tasks and timeline was clear and I had already explained why I needed that 1-day to complete the task, he scheduled another meeting, then he cancelled that meeting too only hours before the meeting. He then scheduled another meeting that me and the program manager went to but he bailed last minute and said he cannot attend. I explained to the program manager what I already had told in the meeting and to the senior manager in the email. &lt;strong class=&quot;hx cv&quot;&gt;But he did not let go. The scheduling and rescheduling went on for multiple times in that week&lt;/strong&gt; and finally we had a 10-minute meeting where I explained the same thing, I had emailed him a week ago. &lt;strong class=&quot;hx cv&quot;&gt;Then he sent another email accusing me of not doing my basic job functions (explaining my task and timelines) and threatened to put me on a performance improvement plan!!&lt;/strong&gt; He told me that if I cannot attend the meetings, I should officially ask for accommodation which they do not have to meet and it will lead to my termination since I am not able to do my basic job functions! He then sent an email with list of my benefits and cc’d HR!&lt;/p&gt;
&lt;p id=&quot;6399&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;The senior manager also said that the program manager has complained about me and that I have created tension with her. I was shocked because there was absolutely no problem and nothing had happened between us. I emailed the program manager to ask what the problem was, but she did not respond to my email and declined my meeting request and said that the senior manager has to be in the meeting. The senior manager sent an email and told me that I cannot meet the program manager without him being present in that meeting as I clearly was causing issues with everyone!!!&lt;/p&gt;
&lt;p id=&quot;cb14&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;&lt;strong class=&quot;hx cv&quot;&gt;One day I went to use the woman restroom my “iBuddy” was there. She told me “die!” and slammed the door in my face.&lt;/strong&gt; From that point I was afraid to use that restroom and had to go across the building not to face them. It was extremely uncomfortable even being in that environment.&lt;/p&gt;
&lt;p id=&quot;db2b&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;A few weeks after the previous incident, I was looking at work on Radar which my “iBuddy” had copied directly from what I had done, and I noticed &lt;strong class=&quot;hx cv&quot;&gt;a note under the note section of a hidden slide on a deck that she had uploaded and it was an indirect suicide/murder threat.&lt;/strong&gt; Given the history of the team, I felt worried sick and stayed home that day from &lt;strong class=&quot;hx cv&quot;&gt;fear of showing up to work and being harmed&lt;/strong&gt;. I alerted the senior manager who told the iBuddy. The “iBuddy” followed up with another &lt;strong class=&quot;hx cv&quot;&gt;email about a child who was murdered by her parents and was thrown into the river and a person who had committed suicide by hanging himself.&lt;/strong&gt;&lt;/p&gt;
&lt;p id=&quot;6cb3&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;HR and the senior management said it was very normal and it happens in all teams and organizations and is not a big deal. They said &lt;strong class=&quot;hx cv&quot;&gt;there is not “enough evidence” the iBuddy will harm me&lt;/strong&gt; and that I have to stay in the same team and physically show up to work and sit in the same office.&lt;/p&gt;
&lt;p id=&quot;73ca&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;&lt;strong class=&quot;hx cv&quot;&gt;During this time there was only 3 months left on my visa and no company wanted to hire me before my extension is approved.&lt;/strong&gt; In order to qualify for applying for an extension I had to be employed at a qualifying company and the time frame happened to be at the exact time. &lt;strong class=&quot;hx cv&quot;&gt;Either I had to resign and forget about all the dreams I had, leave USA and go back home or I had to show up to office. Everyday of being in that team and sitting in that office was taking a toll on me.&lt;/strong&gt;&lt;/p&gt;

&lt;p id=&quot;ff77&quot; class=&quot;hv hw fq hx b hy jq ia ib ic jr ie if ig js ii ij ik jt im in io ju iq ir is di dz&quot;&gt;Time passed and we reached October. The senior manager scheduled a meeting with me and my manager for my first performance evaluation. &lt;strong class=&quot;hx cv&quot;&gt;He handed me a piece of paper in the meeting and asked me to read it and they both stared at me with a big smile on their face as I was reading it.&lt;/strong&gt; My performance review had 2 lines in the results and innovation and big multiple paragraphs on the teamwork. They had not included anything positive. It was hard for me to even sit there and I barely held my tears. I asked my manager once again, examples of what she is accusing me. &lt;strong class=&quot;hx cv&quot;&gt;She refused to give me examples and said that I just carried negative energy and the mirror neurons in team members brain mirrored that negative energy which ruined teamwork!!!&lt;/strong&gt;&lt;/p&gt;
&lt;p id=&quot;081e&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;I scheduled a couple of follow up meetings with the senior manager and the senior director and went over the events that had taken place at my employment at Apple with written proof and timelines. &lt;strong class=&quot;hx cv&quot;&gt;I had also obtained three independent testimonies from three senior scientist, manager, and software developers at Apple who knew me and had worked with me who testified against their statements. They also testified that I exceeded their expectations in teamwork.&lt;/strong&gt; I gave the documents to both senior director and the senior manager. I asked them to reconsider my review and help me to transfer to a different team. They said that they will not change anything about my review and will not help me transfer and will continue to provide negative feedback when I try to initiate the transfer process myself. I emailed HR about it and HR said that no matter what other people think of you, if the manager &lt;strong class=&quot;hx cv&quot;&gt;feels&lt;/strong&gt; that you deserve a bad review you will have a bad review.&lt;/p&gt;
&lt;p id=&quot;9bcb&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;Senior manager and senior director told me that for anyone who does not meet expectation in any category, &lt;strong class=&quot;hx cv&quot;&gt;there is a mandatory review in 90 days which determines if the person will be fired or continue employment.&lt;/strong&gt; They also said if I cause issues by going to HR, they will count those against me in performance review.&lt;/p&gt;
&lt;p id=&quot;a47b&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;45 days passed by and I asked the senior manager for a written evaluation of where I stand. He scheduled a meeting to go over it. In the meeting he said that I am meeting expectations and there was no problem. I was so stressed that I fainted after the meeting ended. The senior manager helped me walk to a break room and he said that there will be another review in 45 days and that one is the official one.&lt;/p&gt;
&lt;p id=&quot;5933&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;I had talked to several managers in the organization and outside of the organization. Everyone was getting feedback from my manager and was thinking that I am a difficult person. People were missing the context and history of the team and that I was in constant fear of being accused of something serious, getting fired and facing deportation and always had to be on guard and watch what’s coming next. There was no way that I would trust that team or would be calm and do my best work. I tried to explain this to HR and senior management multiple times but they did not care.&lt;/p&gt;
&lt;p id=&quot;238d&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;Tense meetings continued to happen. I was given undesirable tasks. Urgent task would fall on my shoulders. &lt;strong class=&quot;hx cv&quot;&gt;My manager had forced me to share my calendar with her to see all contents of my calendar.&lt;/strong&gt; If I had booked my calendar for a doctor appointment or meeting someone, the manager or senior manager would schedule a conflicting meeting for the same time or would come and interrupt my meeting with the other person. If I had a doctor’s appointment, senior manager would tell me to take the whole day off if I had a one hour appointment. After they abused the information from my calendar, I stopped sharing my calendar with them but they could still see that I am busy at a certain time. In a meeting she was almost trying to physically snatch the laptop out of my hand to re-share the calendar and and then she threatened to give me poor teamwork again because of this.&lt;/p&gt;
&lt;p id=&quot;6d27&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;&lt;strong class=&quot;hx cv&quot;&gt;My manager asked me to violate Apples policy regarding data protection and send her screenshots/copies of data&lt;/strong&gt; which not only would get me fired but also get Apple in serious trouble as it would have been a &lt;strong class=&quot;hx cv&quot;&gt;violation of GDPR&lt;/strong&gt;. She had access to the server where data was but was refusing to learn how to work with the server even after we had training sessions and I offered to show her how. She threatened me again to give me another poor performance evaluation because I was insubordinate and bad at teamwork.&lt;/p&gt;
&lt;p id=&quot;6dd0&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;My manager continued to abuse me in the meetings and would assign me urgent tasks in group emails. &lt;strong class=&quot;hx cv&quot;&gt;My manager manipulated the meeting notes and summary of meetings in a way that was giving the impression that I am making mistakes in completing my tasks&lt;/strong&gt; while it was not true. When I reached out and ask her to correct, she refused to do so and told me it is just a difference in wording!&lt;/p&gt;
&lt;p id=&quot;b800&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;&lt;strong class=&quot;hx cv&quot;&gt;My manager and iBuddy were changing results of my work to something incorrect in shared documents&lt;/strong&gt; and when I called them out, she again would say that I am just arguing for something insignificant. My manager had put iBuddy in charge of evaluating my work and she was automatically cc’d in all my Radars even though she had nothing to do with that specific project and was not working on it.&lt;/p&gt;
&lt;p id=&quot;b2c8&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;After that 90 days of my first review, I was waiting for the mandatory review to be scheduled and feeling terribly stressed about it. I had cried the Christmas and New years break waiting for extension of my visa to come in and for the review. The senior manager was avoiding me and was not responding to my emails. My manager was also again on vacation and had taken another full week off for jury duty. I sent email to HR and asked about the process and &lt;strong class=&quot;hx cv&quot;&gt;HR said there is no such a policy of mandatory review in 90 days!&lt;/strong&gt;&lt;/p&gt;
&lt;p id=&quot;106c&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;This meant that &lt;strong class=&quot;hx cv&quot;&gt;my manager, senior manager, and senior director had lied about the company policies&lt;/strong&gt; and the senior manager refused to let go of the lie even after he saw closely how it impacted me and a human being fainted from stress in front of his eyes because of his lie.&lt;/p&gt;
&lt;p id=&quot;ed48&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;After a week the senior manager, scheduled a 1:1 technical meeting with me for end of the day 4:00 pm — 5:00 pm. &lt;strong class=&quot;hx cv&quot;&gt;The meeting room was in an abandoned suit at apple that not many people had access to, including myself.&lt;/strong&gt; The suit had about 20 offices and all of them were &lt;strong class=&quot;hx cv&quot;&gt;empty and people had moved out of the suit completely and nobody else was there at the time. Since I didn’t have access to get in the suit, the senior manager had to let me in.&lt;/strong&gt;&lt;/p&gt;

&lt;p id=&quot;250f&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;Halfway through my meeting, the senior director joined the meeting. I said I was not comfortable him joining my meetings without being invited to or letting me know that he is coming to my meeting but he stayed in the room anyway and said that it was not illegal and he was not breaking any law. I tried to leave but they said we first had to speak before I can leave and it was very important.&lt;/p&gt;
&lt;p id=&quot;3e22&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;&lt;strong class=&quot;hx cv&quot;&gt;The room was already small but the senior director was sitting so close to me that his knees were touching mine and I could smell his bad breath&lt;/strong&gt;. He was repeatedly saying &lt;strong class=&quot;hx cv&quot;&gt;he is going to fire me if I do not leave by myself.&lt;/strong&gt; The senior manager left after sometime and &lt;strong class=&quot;hx cv&quot;&gt;I was left with the senior director alone&lt;/strong&gt;. I first started to review the facts with him, but then I thought to myself that they already are aware of the facts, have seen all written proofs and know about the team’s history. &lt;strong class=&quot;hx cv&quot;&gt;If a senior director goes around and spends hours to intimidate engineers and make them leave rather than ethically manage an organization, more discussion will not serve any purpose.&lt;/strong&gt; &lt;strong class=&quot;hx cv&quot;&gt;If the senior director himself was a fair individual, things like this would never happen and if they did, they would not be tolerated and would be solved properly. I left that meeting and lost the last bit of hope.&lt;/strong&gt;&lt;/p&gt;
&lt;p id=&quot;929f&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;&lt;strong class=&quot;hx cv&quot;&gt;This meeting invitation was deleted from my calendar later&lt;/strong&gt; but I kept the picture of it. &lt;strong class=&quot;hx cv&quot;&gt;Disappearing meetings had happened to me before and if I talked about those, the management would say there was no such a meeting or conversation and I am just imagining it&lt;/strong&gt;. After sometime I thought I am losing my mind and started to take pictures, record, collect human witness, write details, etc. of everything happening for my personal record and specially in case I get harmed …&lt;/p&gt;
&lt;p id=&quot;569f&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;I felt sick for the next couple of days and took time off trying to think about what just happened. I was not able to perform normal life activities and certainly was not able to relax. I had a friend who was watching me 24/7 and I was feeling suicidal.&lt;/p&gt;

&lt;p id=&quot;7d29&quot; class=&quot;hv hw fq hx b hy jq ia ib ic jr ie if ig js ii ij ik jt im in io ju iq ir is di dz&quot;&gt;I returned to work for a couple of days but was constantly thinking about suicide. I had a clear plan and had planned multiple ways in case one failed, I would not survive the next. I had all details about it and that was all I was thinking about. I went to see my doctor and when he became aware of how I felt, he put me on medical leave and a cocktail of medication.&lt;/p&gt;
&lt;p id=&quot;ff71&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;Next couple of months was a serious struggle for me. I was convinced life does not worth living for someone like me. I was reviewing my life and how hard I had worked to make a good life for myself and get where I am and how easily and unfairly it was being taken away.&lt;/p&gt;
&lt;p id=&quot;ee0e&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;I was born to a middle-class family in a small town when there was a war happening. My family was not rich or well connected and I was in no way privileged. I went through a lot of unfortunate events and had worked hard to get anything in life. Despite all of that, I never accepted that something was not possible for me. I dreamed of becoming an astronaut as a 5 year old, I built my first robot when I was 12, I studied for science Olympiads in high school and became successful in it, I was accepted to one of the most prestigious universities in my home country and after that I came to USA to pursue my PhD in computer science on a full scholarship and then got my first job at Apple.&lt;/p&gt;
&lt;p id=&quot;d7cb&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;But this was different. I was just tired and did not see myself fighting an unfair battled longer. &lt;strong class=&quot;hx cv&quot;&gt;The worse part was that there were many people who witnessed the situation and knew details of what is happening and could have taken a step but chose to remain silent, contributed to the corruption or used it for their own benefit.&lt;/strong&gt; &lt;strong class=&quot;hx cv&quot;&gt;Their intervention could have made a very big difference but they made a decision to do nothing.&lt;/strong&gt;&lt;/p&gt;
&lt;p id=&quot;c1f2&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;During my medical leave, I was on a high dose of medication but I did not feel any better. I just felt numb. Before, I struggled to narrow down my interests and just focus on one main interest. Those months I did not feel interested in anything. It was a strange, unfamiliar but extremely unpleasant feeling that I did not know what to do with. I felt dead.&lt;/p&gt;
&lt;p id=&quot;71d3&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;&lt;strong class=&quot;hx cv&quot;&gt;While I was on a medical leave, I was still reading the meeting notes and could see that the team is blaming me for several failures in the project and accusing me of different things. I also received another performance review while I was on medical leave!&lt;/strong&gt;&lt;/p&gt;
&lt;p id=&quot;2d79&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;In the meanwhile, &lt;strong class=&quot;hx cv&quot;&gt;2 people from our team were taken out of my managers direct report&lt;/strong&gt; and had formed a new team and &lt;strong class=&quot;hx cv&quot;&gt;the iBuddy was promoted to management position who would report to the senior manager.&lt;/strong&gt; &lt;strong class=&quot;hx cv&quot;&gt;2 people who directly witnessed the situation had resigned from the organization&lt;/strong&gt; and our &lt;strong class=&quot;hx cv&quot;&gt;program manager who also witnessed what is happening got promoted and transferred to a different country&lt;/strong&gt;. This time was not any time close to normal review/promotion cycle.&lt;/p&gt;
&lt;p id=&quot;6836&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;After a couple of months my doctor cleared me to go back to work but strongly recommended leaving that job if I did not see significant change or improvements. &lt;strong class=&quot;hx cv&quot;&gt;When I went back to work, people who witnessed the situation were scattered, had resigned, were given promotion, were transferred, etc.&lt;/strong&gt;&lt;/p&gt;
&lt;p id=&quot;6f8d&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;&lt;strong class=&quot;hx cv&quot;&gt;I was still in the same team under the same manager and was welcomed by another series of yelling in the very first team meeting and was assigned tasks with hourly/daily deadlines. The tasks were sent in an email on a Friday evening at 10:30 pm&lt;/strong&gt; right before my manager took off again for another vacation. I resigned the Monday after I went back and gave my two week notice. There was an exit interview scheduled. Once again &lt;strong class=&quot;hx cv&quot;&gt;in my exit interview, I spoke with HR about everything that had happened which they already knew about and I also filled the written exit interview email as well&lt;/strong&gt;. After the exit interview, the senior manager responded to my email and said that my resignation was accepted and he wants me to give back my laptop and badge. Later I was escorted out of Apple facilities by the senior manager.&lt;/p&gt;
&lt;p id=&quot;9426&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;Although after my resignation, I left state of California and physically moved away in hope of a recovery, there has not been a single day that has passed by that I don’t think about what happened. There are many days that I think about what happened and grieve. What if my manager had showed up for my onboarding and had shared project info with me directly? What if the team was inclusive and the clique and gang mentality did not exist in the organization? What if people did not judge me and call me names based on where I was born, my age, experience level and had accepted me as a person in the team? What if I was safe and was treated respectfully and fairly? What if when the problem started to happen, it was solved properly? What if someone from all who witnessed the situation had spoken up and helped? What if HR had a close look and called it what it was and had helped me to transfer to a different team? But none of this happened.&lt;/p&gt;
&lt;p id=&quot;0cf7&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;Apple was such a waste of my mental energy. The energy I had to spend on survival and planning my next move for the next crazy thing, could have been spent on building my dreams and bringing them to millions of people. I had so much to give and so much to build. It is such a shame.&lt;/p&gt;
&lt;p id=&quot;9855&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;&lt;strong class=&quot;hx cv&quot;&gt;I know for a fact that I am not the only person who has been bullied in this organization&lt;/strong&gt;. There were multiple individuals before me in the same team under the same manager who had similar experiences. Senior management has also been doing this to many employees over the years. If this situation sounds familiar to you, now is the time to speak up. Do not let the bullies get away with their cruel actions and abuse more people.&lt;/p&gt;
&lt;p id=&quot;9e56&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;&lt;strong class=&quot;hx cv&quot;&gt;I expect Apple to take actions that they should have taken years ago to prevent more people experiencing abuse.&lt;/strong&gt; It is such a big shame and disappointment that my experience of working for a company who pretends so hard to portrait its work culture as inclusive, diverse, collaborative and fair turned into such a terrifying experience and &lt;strong class=&quot;hx cv&quot;&gt;even though senior management and HR were involved, they themselves contributed to the corruption.&lt;/strong&gt;&lt;/p&gt;
&lt;p id=&quot;1e2d&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;&lt;strong class=&quot;hx cv&quot;&gt;Stop pretending and using Blacks, transgenders and Muslims on your cover videos, those diversity charts, numbers, percentages, fancy words or those gender pronouns on your profiles to show how cool you are. Do not go behind the scenes abusing your employees and telling them abuse is confidential; they will find their voices someday and will tell their stories as public and as loud as they need to. Let go of the advertisement and building the image and instead see the problems, solve them and build the capacity and culture for real.&lt;/strong&gt;&lt;/p&gt;
&lt;p id=&quot;6ec1&quot; class=&quot;hv hw fq hx b hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is di dz&quot;&gt;If Apple refuse to take actions, I will interview with major media outlets describing the experience in more details and I will release a list of all individuals involved from senior management to the HR director and all the evidence as public record.&lt;/p&gt;
</description>
<pubDate>Fri, 01 Jan 2021 18:10:40 +0000</pubDate>
<dc:creator>limono</dc:creator>
<og:type>article</og:type>
<og:title>My Experience @ Apple</og:title>
<og:description>Apple was my first job. A dream that came true after many years of hard work, sacrifices and a PhD in computer science- machine learning…</og:description>
<og:url>https://ex-apple-engineer.medium.com/my-experience-apple-5d8b6205cb56</og:url>
<og:image>https://miro.medium.com/max/496/1*o3l4N-q01WTDrG73LitR8g.jpeg</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://ex-apple-engineer.medium.com/my-experience-apple-5d8b6205cb56</dc:identifier>
</item>
<item>
<title>Peer-reviewed papers are getting increasingly boring</title>
<link>https://lemire.me/blog/2021/01/01/peer-reviewed-papers-are-getting-increasingly-boring/</link>
<guid isPermaLink="true" >https://lemire.me/blog/2021/01/01/peer-reviewed-papers-are-getting-increasingly-boring/</guid>
<description>&lt;p&gt;The number of researchers and peer-review publications is growing exponentially.  It has been estimated that the number of researchers in the world doubles every 16 years and the number of research outputs is increasing even faster.&lt;/p&gt;
&lt;p&gt;If you accept that published research papers are an accurate measure of our scientific output, then we should be quite happy. However, &lt;a href=&quot;https://docs.google.com/document/d/1cEBsj18Y4NnVx5Qdu43cKEHMaVBODTTyfHBa8GIRSec/edit&quot;&gt;Cowen and Southwood take an opposing point of view&lt;/a&gt; and represent this growth as a growing cost without associated gains.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;(…) scientific inputs are being produced at a high and increasing rate, (…) It is a mistake, however, to infer that increases in these inputs are necessarily good news for progress in science (…) higher inputs are not valuable p​er se​, but instead they are a measure of cost, namely how much is being invested in scientific activity. The higher the inputs, or the steeper the advance in investment, presumably we might expect to see progress in science be all the more impressive. If not, then perhaps we should be worried all the more.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;So are these research papers that we are producing in greater numbers… the kind of research papers that represent real progress? &lt;a href=&quot;https://www.nber.org/system/files/working_papers/w26752/w26752.pdf&quot;&gt;Bhattacharya and Packalen&lt;/a&gt; conclude that though we produce more papers, science itself is stagnating because of the worse incentives which focuses the research on low-risk/no-reward ventures as opposed to genuine progress:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This emphasis on citations in the measurement of scientific productivity shifted scientist rewards and behavior on the margin toward incremental science and away from exploratory projects that are more likely to fail, but which are the fuel for future breakthroughs. As attention given to new ideas decreased, science stagnated.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0230325&quot;&gt;Thurner et al. concur&lt;/a&gt; in the sense that they find that “out-of-the-box” papers are getting harder to find:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;over the past decades the fraction of mainstream papers increases, the fraction of out-of-the-box decreases&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Surely, the scientists themselves have incentives to course correct and encourage themselves to produce more important and exciting research papers?&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.theatlantic.com/science/archive/2018/11/diminishing-returns-science/575665/&quot;&gt;Collison and Nielsen&lt;/a&gt; challenge scientists and institutions to tackle this perceived diminishing scientific productivity:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Most scientists strongly favor more research funding. They like to portray science in a positive light, emphasizing benefits and minimizing negatives. While understandable, the evidence is that science has slowed enormously per dollar or hour spent. That evidence demands a large-scale institutional response. It should be a major subject in public policy, and at grant agencies and universities. Better understanding the cause of this phenomenon is important, and identifying ways to reverse it is one of the greatest opportunities to improve our future.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;If we believe that research papers are becoming worse, that fewer of them convey important information, then the rational approach is to downplay them. Whenever you encounter a scientist and they tell you about how many papers they have published or where they were published, or how many citations they got… you should not mock the scientist in question, but you ought to bring the conversation at another level. What is the scientist working on and why is it important work? Dig below the surface.&lt;/p&gt;
&lt;p&gt;Importantly, it does not mean that we should discourage people from publishing a lot of papers not anymore than we generally discourage programmer from writing many lines of code. Everything else being equal, people who love what they are doing, and who are good at it, will do more of it. But nobody would mistake someone who writes a lot as a good writer if they aren’t.&lt;/p&gt;
&lt;p&gt;We need to challenge the conventional peer-reviewed research paper, by which I refer to a publication was reviewed by 2 to 5 peers before getting published. It is a relatively recent innovation that may not always be for the best. People like Einstein did not go through this process, at least not in their early years. Research used to be more more like “blogging”. You would write up your ideas and share them. People could read them and criticize them. This communication process can be done with different means: &lt;a href=&quot;https://numenta.com/blog/2019/05/14/numenta-live-streaming-research-meetings-on-twitch/&quot;&gt;some researchers broadcast their research meetings online&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The peer-reviewed research papers allow you to “measure” productivity. How many papers in top-tier venues did research X produce? And that is why it grew so strong.&lt;/p&gt;
&lt;p&gt;There is nothing wrong with people seeking recognition. Incentives are good. But we should reward people for the content of their research, not for the shallow metadata we can derive from their resume. If you have not read and used someone’s work, you have no business telling us whether they are good or bad.&lt;/p&gt;
&lt;p&gt;The other related problem is the incestious relationship between researchers and assessment. Is the work on theory X important? “Let us ask people who work on theory X”. No. You have to have customers, users, people who have incentives to provide honest assessments. A customer is someone who uses your research in an objective way. If you design a mathematical theory or a machine-learning algorithm and an investment banker relies on it, they are your customer (whether they are paying you or not). If it fails, they will stop using it.&lt;/p&gt;
&lt;p&gt;It seems like the peer-review research papers establish this kind of customer-vendor relationship where you get a frank assessment. Unfortunately, it fails as you scale it up. The customers of the research paper are the independent readers, that is true, but they are the readers who have their own motivations.&lt;/p&gt;
&lt;p&gt;You cannot easily “fake” customers. We do so sometimes, with movie critics, say. But movie critics have an incentive to give your recommendations you can trust.&lt;/p&gt;
&lt;p&gt;We could try to emulate the movie critic model in science. I could start reviewing papers on my blog. I would have every incentive to be a good critic because, otherwise, my reputation might suffer. But it is an expensive process. Being a movie critic is a full time job. Being a research paper critic would also be a full time job.&lt;/p&gt;
&lt;p&gt;What about citations? Well, citations of often granted by your nearest peers. If they are doing work that resembles yours, they have no incentive to take it down.&lt;/p&gt;
&lt;p&gt;In conclusion, I do find it credible that science might be facing a sort of systemic stagnation brought forth by a set of poorly aligned incentives. The peer-reviewed paper accepted at a good venue as the ultimate metric seems to be at the core of the problem. Further, the whole web of assessment in modern science often seems broken. It seems that, on an individual basis, researchers ought to adopt the following principles:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;Seek objective feedback regarding the quality of your own work using “customers”: people who would tell you frankly if your work was not good. Do not mislead citations or “peer review” for such an assessment.&lt;/li&gt;
&lt;li&gt; When assessing another research, try your best to behave as a customer who has some distance from the research. Do not count inputs and outputs as a quality metric. Nobody would describe Stephen King as a great writer because he published many books. If you are telling me that Mr Smith is a great researcher, then you should be able to tell me about the research and why it is important.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;strong&gt;Further reading&lt;/strong&gt;: &lt;a href=&quot;https://lemire.me/blog/2013/02/26/does-academic-research-cause-economic-growth/&quot;&gt;Does academic research cause economic growth?&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Fri, 01 Jan 2021 18:05:01 +0000</pubDate>
<dc:creator>ingve</dc:creator>
<og:type>article</og:type>
<og:url>https://lemire.me/blog/2021/01/01/peer-reviewed-papers-are-getting-increasingly-boring/</og:url>
<og:title>Peer-reviewed papers are getting increasingly boring</og:title>
<og:description>The number of researchers and peer-review publications is growing exponentially.  It has been estimated that the number of researchers in the world doubles every 16 years and the number of research outputs is increasing even faster. If you accept that published research papers are an accurate measure of our scientific output, then we should be … Continue reading Peer-reviewed papers are getting increasingly boring</og:description>
<og:image>https://lemire.me/img/portrait2018facebook.jpg</og:image>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://lemire.me/blog/2021/01/01/peer-reviewed-papers-are-getting-increasingly-boring/</dc:identifier>
</item>
<item>
<title>EU Signs €145B Declaration to Develop Next Gen Processors and 2nm Technology</title>
<link>https://www.eetimes.eu/eu-signs-e145bn-declaration-to-develop-next-gen-processors-and-2nm-technology/</link>
<guid isPermaLink="true" >https://www.eetimes.eu/eu-signs-e145bn-declaration-to-develop-next-gen-processors-and-2nm-technology/</guid>
<description>[unable to retrieve full-text content]
&lt;p&gt;Article URL: &lt;a href=&quot;https://www.eetimes.eu/eu-signs-e145bn-declaration-to-develop-next-gen-processors-and-2nm-technology/&quot;&gt;https://www.eetimes.eu/eu-signs-e145bn-declaration-to-develop-next-gen-processors-and-2nm-technology/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Comments URL: &lt;a href=&quot;https://news.ycombinator.com/item?id=25602950&quot;&gt;https://news.ycombinator.com/item?id=25602950&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Points: 561&lt;/p&gt;
&lt;p&gt;# Comments: 340&lt;/p&gt;
</description>
<pubDate>Fri, 01 Jan 2021 12:59:56 +0000</pubDate>
<dc:creator>simonpd</dc:creator>
<dc:identifier>https://www.eetimes.eu/eu-signs-e145bn-declaration-to-develop-next-gen-processors-and-2nm-technology/</dc:identifier>
</item>
<item>
<title>Fired App Reviewer Sues Apple</title>
<link>https://reason.com/volokh/2020/12/08/political-discrimination-lawsuit-against-apple-can-go-forward/</link>
<guid isPermaLink="true" >https://reason.com/volokh/2020/12/08/political-discrimination-lawsuit-against-apple-can-go-forward/</guid>
<description>&lt;p&gt;The decision is &lt;em&gt;&lt;a href=&quot;https://reason.com/wp-content/uploads/2020/12/PhamvApple.pdf&quot;&gt;Pham v. Apple, Inc.&lt;/a&gt;&lt;/em&gt;, by Judge Socrates Peter Manoukian, handed down three weeks ago but to my knowledge largely unnoticed until now. First, the allegations from the Amended Complaint, as repeated in the opinion:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Plaintiff Trieu Pham … worked for defendant Apple, Inc. … as an iOS App Reviewer …. As an App Reviewer, plaintiff Pham was responsible for determining whether software applications (&quot;Apps&quot;) were reliable, performed as expected, and were free of offensive materiaI. Plaintiff Pham reviewed Apps based on a pre-set of technical, content, and design criteria provided by defendant Apple; and plaintiff Pham determined whether to accept, reject, or hold each App…. Between July 2018 and September 2018, defendant Apple conducted an audit of plaintiff Pham's App Reviews, identified reviews by plaintiff Pham that were purportedly erroneous, and issued plaintiff Pham a Documented Coaching Plan [DCP] …. Following plaintiff Pham's rebuttal, defendant Apple reversed their classification of several of plaintiff Pham's purported errors.&lt;/p&gt;
&lt;p&gt;The most serious error identified in plaintiff Pham's DCP was plaintiff Pham's approval of a Guo Media App which was forbidden from defendant Apple's China App store. The same App was reviewed and approved by a series of other Apple employees, including three Chinese App Reviewers, yet none of them were disciplined for approval of the App as plaintiff Pham was. All of the Apps identified by defendant Apple's management team as being &quot;erroneously approved' by plaintiff Pham in the DCP remained on defendant Apple's App store following the audit and remain there to date.&lt;/p&gt;
&lt;p&gt;Guo Media was established by Guo Wengui  …, a Chinese dissident who fled China in 2014 to seek asylum in the United States. Guo remains wanted by the Chinese government for a series of alleged crimes. Guo regularly uses Guo Media to publicize claims of corruption against Chinese government officials and members of the Chinese Communist Part. After plaintiff Pham approved the Guo Media App, the Chinese government contacted defendant Apple and demanded that the Guo Media App be removed from defendant Apple's App store. Defendant Apple then performed an internal investigation and identified plaintiff Pham as the App Reviewer who approved the Guo Media App.&lt;/p&gt;
&lt;p&gt;In or around late September 2018, shortly after defendant Apple provided plaintiff Pham with the DCP, plaintiff Pham was called to a meeting to discuss the Guo Media App with multiple defendant Apple supervisors and managers. At this meeting, defendant Apple supervisors stated that the Guo Media App is critical of the Chinese government and, therefore, should be removed from the App store. Plaintiff Pham responded staling the Guo Media App publishes valid claims of corruption against the Chinese government and Chinese Communist Party and, therefore, should not be taken down. Plaintiff Pham further told his supervisors that the Guo Media App does not contain violent content or incite violence; does not violate any of defendant Apple's policies and procedures regarding Apps; and, therefore, it should remain on the App store as a matter of free speech.&lt;/p&gt;
&lt;p&gt;Plaintiff Pham also stated at this meeting that removing the Guo Media App under pressure from the Chinese government amounts to censorship. A few days later, plaintiff Pham met with [a supervisor] and again reiterated that the Guo Media App should not be taken down and Guo is entitled to publish his opinions. In the following weeks, plaintiff Pham discussed the Guo Media App with colleagues and relayed what transpired in his meetings with defendant Apple managers. Defendant Apple became aware of plaintiff Pham's criticism and defendant Apple's managers responded by retaliating against plaintiff Pham and ultimately terminating plaintiff Pham.&lt;/p&gt;
&lt;p&gt;Plaintiff Pham believes the DCP was pretextual and created by defendant Apple to appease the Chinese government and to signal to China that defendant Apple did not approve an App created by Guo. The DCP was created to punish and retaliate against employees who spoke out against censorship or complained and refused to remove Apps that the Chinese government objected to on political grounds. …&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Pham sued on various grounds, including national origin discrimination and discrimination based on a medical condition—claims that the court rejected—but the court allowed the case to go forward on a political discrimination claim:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;[Cal.] Labor Code section 1101 states, &quot;No employer shall make, adopt, or enforce any rule, regulation, or policy: (a) Forbidding or preventing employees from engaging or participating in politics or from becoming candidates for public office; (b) Controlling or directing, or tending to control or direct the political activities or affiliations of employees.&quot; …&lt;/p&gt;
&lt;p&gt;[Cal.] Labor Code section 1102 states, &quot;No employer shall coerce or influence or attempt to coerce or influence his employees through or by means of threat of discharge or loss of employment to adopt or follow or refrain from adopting or following any particular course or line of political action or political activity.&quot; …&lt;/p&gt;
&lt;p&gt;[A] prima facie case for employment discrimination requires the following showing:&lt;/p&gt;
&lt;p&gt;&quot;Generally, the plaintiff must provide evidence that (1) [s]he was a member of a protected class, (2) [s]he was qualified for the position [s]he sought or was performing competently in the position [s]he held, (3) [s]he suffered an adverse employment action, such as termination, demotion, or denial of an available job, and (4) some other circumstance suggests a discriminatory motive.&quot;&lt;/p&gt;
&lt;p&gt;&quot;To establish a prima facie case of retaliation, the plaintiff must show (1) he or she engaged in a protected activity; (2) the employer subjected the employee to an adverse employment action; and (3) a causal link between the protected activity and the employer's action.&quot;&lt;/p&gt;
&lt;p&gt;For both discrimination and retaliation, a plaintiff must demonstrate some discriminatory/ retaliatory intent. In other words, the alleged discrimination and retaliation (adverse action) must be because of or linked to plaintiffs engagement in some protected activity; here, plaintiff Pham's engagement or participation in political activity or affiliation.&lt;/p&gt;
&lt;p&gt;The timing of defendant's knowledge that plaintiff engaged in a protected activity is significant. If defendant is unaware that the plaintiff has engaged in a protected activity (or is a member of a protected class) and subjects the plaintiff to some adverse employment action, there can be no causal link as a matter of law. Such is the case here where plaintiff Pham has not alleged defendant Apple's awareness that plaintiff Pham was engaging in protected political activity prior to issuance of the DCP. There can be no link between the protected activity and the adverse employment action.&lt;/p&gt;
&lt;p&gt;However, plaintiff Pham's allegations in the [Amended Complaint] are sufficient to establish defendant Apple's awareness that plaintiff engaged in political activity prior to plaintiff Pham's termination. Plaintiff Pham must ultimately prove some causal link between his engagement in protected activity and his termination, but it is not a factual impossibility as it would be where plaintiff fails to allege defendant's knowledge and awareness that plaintiff engaged in protected activity prior to issuance of the DCP….&lt;/p&gt;
&lt;p&gt;[P]laintiff can survive a demurrer if he can &quot;show that he faced an adverse action because he engaged in political activity, or that he was coerced by threat of discharge to adopt or refrain from adopting a course of political activity.&quot; … [P]laintiff Pham's [has made] allegations … [about his] &quot;approval of, and vocal support for, the Guo Media app&quot; created by a political dissident…. Thus, there are now allegations contained in the [Complaint] that plaintiff engaged in protected activity and suffered retaliation and/or termination as a result.&lt;/p&gt;
&lt;p&gt;Accordingly, defendant Apple's demurrer to the first and second causes of action in plaintiff Pham's [Complaint] on the ground that the pleading does not state facts sufficient to constitute a cause of action for discrimination and retaliation, respectively, is OVERRULED….&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;For more on Cal. Labor Code §§ 1101-02 and similar statutes in other states, see &lt;a href=&quot;http://www.law.ucla.edu/volokh/empspeech.pdf&quot;&gt;this article&lt;/a&gt;.&lt;/p&gt;
</description>
<pubDate>Fri, 01 Jan 2021 08:57:48 +0000</pubDate>
<dc:creator>ksec</dc:creator>
<og:type>article</og:type>
<og:url>https://reason.com/volokh/2020/12/08/political-discrimination-lawsuit-against-apple-can-go-forward/</og:url>
<og:title>Political Discrimination Lawsuit Against Apple Can Go Forward</og:title>
<og:description>The plaintiff claims Apple was upset about his stance critical of censorship by the Chinese government, in the context of his reviewing the Guo Media App, established by a Chinese dissent.</og:description>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://reason.com/volokh/2020/12/08/political-discrimination-lawsuit-against-apple-can-go-forward/</dc:identifier>
</item>
<item>
<title>State machines are wonderful tools</title>
<link>https://nullprogram.com/blog/2020/12/31/</link>
<guid isPermaLink="true" >https://nullprogram.com/blog/2020/12/31/</guid>
<description>&lt;time datetime=&quot;2020-12-31&quot;&gt;December 31, 2020&lt;/time&gt;&lt;p&gt;nullprogram.com/blog/2020/12/31/&lt;/p&gt;
&lt;p&gt;I love when my current problem can be solved with a state machine. They’re fun to design and implement, and I have high confidence about correctness. They tend to:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;Present &lt;a href=&quot;https://nullprogram.com/blog/2018/06/10/&quot;&gt;minimal, tidy interfaces&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Require few, fixed resources&lt;/li&gt;
&lt;li&gt;Hold no opinions about input and output&lt;/li&gt;
&lt;li&gt;Have a compact, concise implementation&lt;/li&gt;
&lt;li&gt;Be easy to reason about&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;State machines are perhaps one of those concepts you heard about in college but never put into practice. Maybe you use them regularly. Regardless, you certainly run into them regularly, from &lt;a href=&quot;https://swtch.com/~rsc/regexp/&quot;&gt;regular expressions&lt;/a&gt; to traffic lights.&lt;/p&gt;
&lt;h3 id=&quot;morse-code-decoder-state-machine&quot;&gt;Morse code decoder state machine&lt;/h3&gt;
&lt;p&gt;Inspired by &lt;a href=&quot;https://possiblywrong.wordpress.com/2020/11/21/among-us-morse-code-puzzle/&quot;&gt;a puzzle&lt;/a&gt;, I came up with this deterministic state machine for decoding &lt;a href=&quot;https://en.wikipedia.org/wiki/Morse_code&quot;&gt;Morse code&lt;/a&gt;. It accepts a dot (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;'.'&lt;/code&gt;), dash (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;'-'&lt;/code&gt;), or terminator (0) one at a time, advancing through a state machine step by step:&lt;/p&gt;
&lt;div class=&quot;language-c highlighter-rouge&quot; readability=&quot;57.5&quot;&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;110&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;
&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;morse_decode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;mh&quot;&gt;0x03&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x3f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x7b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x4f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x2f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x63&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x5f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x77&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x7f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x72&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;mh&quot;&gt;0x87&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x3b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x57&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x47&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x67&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x4b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x81&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x40&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x01&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x58&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x68&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x51&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x88&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x34&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x8c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x92&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x6c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x02&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;mh&quot;&gt;0x03&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x18&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x14&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x08&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x1c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x24&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x28&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x04&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x31&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x33&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x34&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x35&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;mh&quot;&gt;0x36&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x37&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x38&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x39&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x41&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x42&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x43&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x44&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x45&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x46&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;mh&quot;&gt;0x47&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x48&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x49&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x4a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x4b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x4c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x4d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x4e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x4f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;mh&quot;&gt;0x51&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x52&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x53&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x54&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x55&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x56&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x57&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x58&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x59&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x5a&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;63&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x2e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;  &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x2d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;  &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;default:&lt;/span&gt;   &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;It typically compiles to under 200 bytes (table included), requires only a few bytes of memory to operate, and will fit on even the smallest of microcontrollers. The full source listing, documentation, and comprehensive test suite:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://gist.github.com/skeeto/f9e198b913b228f3fd773a0c4e266579&quot;&gt;https://gist.github.com/skeeto/f9e198b913b228f3fd773a0c4e266579&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The state machine is trie-shaped, and the 100-byte table &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;t&lt;/code&gt; is the static &lt;a href=&quot;https://nullprogram.com/blog/2016/11/15/&quot;&gt;encoding of the Morse code trie&lt;/a&gt;:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://nullprogram.com/img/diagram/morse.dot&quot;&gt;&lt;img src=&quot;https://nullprogram.com/img/diagram/morse.svg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Dots traverse left, dashes right, terminals emit the character at the current node (terminal state). Stopping on red nodes, or attempting to take an unlisted edge is an error (invalid input).&lt;/p&gt;
&lt;p&gt;Each node in the trie is a byte in the table. Dot and dash each have a bit indicating if their edge exists. The remaining bits index into a 1-based character table (at the end of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;t&lt;/code&gt;), and a 0 “index” indicates an empty (red) node. The nodes themselves are laid out as &lt;a href=&quot;https://en.wikipedia.org/wiki/Binary_heap#Heap_implementation&quot;&gt;a binary heap in an array&lt;/a&gt;: the left and right children of the node at &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;i&lt;/code&gt; are found at &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;i*2+1&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;i*2+2&lt;/code&gt;. No need to &lt;a href=&quot;https://nullprogram.com/blog/2020/10/19/#minimax-costs&quot;&gt;waste memory storing edges&lt;/a&gt;!&lt;/p&gt;
&lt;p&gt;Since C sadly does not have multiple return values, I’m using the sign bit of the return value to create a kind of sum type. A negative return value is a state — which is why the state is negated internally before use. A positive result is a character output. If zero, the input was invalid. Only the initial state is non-negative (zero), which is fine since it’s, by definition, not possible to traverse to the initial state. No &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;c&lt;/code&gt; input will produce a bad state.&lt;/p&gt;
&lt;p&gt;In the original problem the terminals were missing. Despite being a &lt;em&gt;state machine&lt;/em&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;morse_decode&lt;/code&gt; is a pure function. The caller can save their position in the trie by saving the state integer and trying different inputs from that state.&lt;/p&gt;
&lt;h3 id=&quot;utf-8-decoder-state-machine&quot;&gt;UTF-8 decoder state machine&lt;/h3&gt;
&lt;p&gt;The classic UTF-8 decoder state machine is &lt;a href=&quot;https://bjoern.hoehrmann.de/utf-8/decoder/dfa/&quot;&gt;Bjoern Hoehrmann’s Flexible and Economical UTF-8 Decoder&lt;/a&gt;. It packs the entire state machine into a relatively small table using clever tricks. It’s easily my favorite UTF-8 decoder.&lt;/p&gt;
&lt;p&gt;I wanted to try my own hand at it, so I re-derived the same canonical UTF-8 automaton:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://nullprogram.com/img/diagram/utf8.dot&quot;&gt;&lt;img src=&quot;https://nullprogram.com/img/diagram/utf8.svg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Then I encoded this diagram directly into a much larger (2,064-byte), less elegant table, too large to display inline here:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://gist.github.com/skeeto/945ab20bb6a8852da1cb3e504b7e7200&quot;&gt;https://gist.github.com/skeeto/945ab20bb6a8852da1cb3e504b7e7200&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;However, the trade-off is that the executable code is smaller, faster, and &lt;a href=&quot;https://nullprogram.com/blog/2017/10/06/&quot;&gt;branchless again&lt;/a&gt; (by accident, I swear!):&lt;/p&gt;
&lt;div class=&quot;language-c highlighter-rouge&quot; readability=&quot;8&quot;&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;11&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;
&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;utf8_decode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;signed&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;256&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* ... */&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;masks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* ... */&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;byte&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;masks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Like Bjoern’s decoder, there’s a code point accumulator. The &lt;em&gt;real&lt;/em&gt; state machine has 1,109,950 terminal states, and many more edges and nodes. The accumulator is an optimization to track exactly which edge was taken to which node without having to represent such a monstrosity.&lt;/p&gt;
&lt;p&gt;Despite the huge table I’m pretty happy with it.&lt;/p&gt;
&lt;h3 id=&quot;word-count-state-machine&quot;&gt;Word count state machine&lt;/h3&gt;
&lt;p&gt;Here’s another state machine I came up with awhile back for counting words one Unicode code point at a time while accounting for Unicode’s various kinds of whitespace. If your input is bytes, then plug this into the above UTF-8 state machine to convert bytes to code points! This one uses a switch instead of a lookup table since the table would be sparse (i.e. &lt;a href=&quot;https://nullprogram.com/blog/2019/12/09/&quot;&gt;let the compiler figure it out&lt;/a&gt;).&lt;/p&gt;
&lt;div class=&quot;language-c highlighter-rouge&quot; readability=&quot;9&quot;&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;13&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;
&lt;code&gt;&lt;span class=&quot;cm&quot;&gt;/* State machine counting words in a sequence of code points.
 *
 * The current word count is the absolute value of the state, so
 * the initial state is zero. Code points are fed into the state
 * machine one at a time, each call returning the next state.
 */&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;word_count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;codepoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;codepoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0009&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x000a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x000b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x000c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x000d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0020&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0085&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00a0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x1680&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x2000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x2001&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x2002&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x2003&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x2004&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x2005&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x2006&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x2007&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x2008&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x2009&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x200a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x2028&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x2029&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x202f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x205f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x3000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;default:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I’m particularly happy with the &lt;em&gt;edge-triggered&lt;/em&gt; state transition mechanism. The sign of the state tracks whether the “signal” is “high” (inside of a word) or “low” (outside of a word), and so it counts rising edges.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://nullprogram.com/img/diagram/wordcount.dot&quot;&gt;&lt;img src=&quot;https://nullprogram.com/img/diagram/wordcount.svg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The counter is not &lt;em&gt;technically&lt;/em&gt; part of the state machine — though it eventually overflows for practical reasons, it isn’t really “finite” — but is rather an external count of the times the state machine transitions from low to high, which is the actual, useful output.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Reader challenge&lt;/em&gt;: Find a slick, efficient way to encode all those code points as a table rather than rely on whatever the compiler generates for the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;switch&lt;/code&gt; (chain of branches, jump table?).&lt;/p&gt;
&lt;h3 id=&quot;coroutines-and-generators-as-state-machines&quot;&gt;Coroutines and generators as state machines&lt;/h3&gt;
&lt;p&gt;In languages that support them, state machines can be implemented using coroutines, including generators. I do particularly like the idea of &lt;a href=&quot;https://nullprogram.com/blog/2018/05/31/&quot;&gt;compiler-synthesized coroutines&lt;/a&gt; as state machines, though this is a rare treat. The state is implicit in the coroutine at each yield, so the programmer doesn’t have to manage it explicitly. (Though often that explicit control is powerful!)&lt;/p&gt;
&lt;p&gt;Unfortunately in practice it always feels clunky. The following implements the word count state machine (albeit in a rather un-Pythonic way). The generator returns the current count and is continued by sending it another code point:&lt;/p&gt;
&lt;div class=&quot;language-py highlighter-rouge&quot; readability=&quot;20&quot;&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;
&lt;code&gt;&lt;span class=&quot;n&quot;&gt;WHITESPACE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;mh&quot;&gt;0x0009&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x000a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x000b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x000c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x000d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;mh&quot;&gt;0x0020&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0085&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x00a0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x1680&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x2000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;mh&quot;&gt;0x2001&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x2002&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x2003&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x2004&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x2005&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;mh&quot;&gt;0x2006&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x2007&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x2008&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x2009&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x200a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;mh&quot;&gt;0x2028&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x2029&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x202f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x205f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x3000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;wordcount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;# low signal
&lt;/span&gt;            &lt;span class=&quot;n&quot;&gt;codepoint&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;codepoint&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;WHITESPACE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;# high signal
&lt;/span&gt;            &lt;span class=&quot;n&quot;&gt;codepoint&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;codepoint&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;WHITESPACE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;However, the generator ceremony dominates the interface, so you’d probably want to wrap it in something nicer — at which point there’s really no reason to use the generator in the first place:&lt;/p&gt;
&lt;div class=&quot;language-py highlighter-rouge&quot; readability=&quot;6.5&quot;&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;8&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;
&lt;code&gt;&lt;span class=&quot;n&quot;&gt;wc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wordcount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# prime the generator
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ord&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'A'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; 1
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ord&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;' '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; 1
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ord&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'B'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; 2
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ord&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;' '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; 2
&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Same idea in Lua, which famously has full coroutines:&lt;/p&gt;
&lt;div class=&quot;language-lua highlighter-rouge&quot; readability=&quot;19.5&quot;&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;34&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;
&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;local&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;WHITESPACE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x0009&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,[&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x000a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,[&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x000b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,[&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x000c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x000d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,[&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x0020&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,[&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x0085&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,[&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x00a0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x1680&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,[&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x2000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,[&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x2001&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,[&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x2002&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x2003&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,[&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x2004&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,[&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x2005&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,[&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x2006&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x2007&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,[&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x2008&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,[&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x2009&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,[&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x200a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x2028&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,[&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x2029&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,[&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x202f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,[&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x205f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x3000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;wordcount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;local&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;-- low signal&lt;/span&gt;
            &lt;span class=&quot;kd&quot;&gt;local&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;codepoint&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;coroutine.yield&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;WHITESPACE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;codepoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;-- high signal&lt;/span&gt;
            &lt;span class=&quot;kd&quot;&gt;local&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;codepoint&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;coroutine.yield&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;WHITESPACE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;codepoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Except for initially priming the coroutine, at least &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;coroutine.wrap()&lt;/code&gt; hides the fact that it’s a coroutine.&lt;/p&gt;
&lt;div class=&quot;language-lua highlighter-rouge&quot; readability=&quot;6.5&quot;&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;8&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;
&lt;code&gt;&lt;span class=&quot;n&quot;&gt;wc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;coroutine.wrap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wordcount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;wc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;-- prime the coroutine&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;wc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;string.byte&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'A'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;-- =&amp;gt; 1&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;wc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;string.byte&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;' '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;-- =&amp;gt; 1&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;wc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;string.byte&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'B'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;-- =&amp;gt; 2&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;wc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;string.byte&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;' '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;-- =&amp;gt; 2&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;Finally, a couple more examples not worth describing in detail here. First a Unicode case folding state machine:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://gist.github.com/skeeto/1b6443fb8dc85673a76c46027b3e3467&quot;&gt;https://gist.github.com/skeeto/1b6443fb8dc85673a76c46027b3e3467&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;It’s just an interface to do a lookup into the &lt;a href=&quot;https://www.unicode.org/Public/13.0.0/ucd/CaseFolding.txt&quot;&gt;official case folding table&lt;/a&gt;. It was an experiment, and I &lt;em&gt;probably&lt;/em&gt; wouldn’t use it in a real program.&lt;/p&gt;
&lt;p&gt;Second, I’ve mentioned &lt;a href=&quot;https://github.com/skeeto/utf-7&quot;&gt;my UTF-7 encoder and decoder&lt;/a&gt; before. It’s not obvious from the interface, but internally it’s just a state machine for both encoder and decoder, which is what it allows it to “pause” between any pair of input/output bytes.&lt;/p&gt;
&lt;ol class=&quot;references print-only&quot;/&gt;
&lt;nav class=&quot;no-print&quot;&gt;
&lt;/nav&gt;</description>
<pubDate>Fri, 01 Jan 2021 08:50:34 +0000</pubDate>
<dc:creator>chmaynard</dc:creator>
<dc:format>text/html</dc:format>
<dc:identifier>https://nullprogram.com/blog/2020/12/31/</dc:identifier>
</item>
<item>
<title>California law bans delivery apps from listing a restaurant without an agreement</title>
<link>https://leginfo.legislature.ca.gov/faces/billTextClient.xhtml?bill_id=201920200AB2149</link>
<guid isPermaLink="true" >https://leginfo.legislature.ca.gov/faces/billTextClient.xhtml?bill_id=201920200AB2149</guid>
<description>&lt;h2&gt;&lt;span class=&quot;hidden&quot;&gt;Bill Start&lt;/span&gt;&lt;/h2&gt;
&lt;div id=&quot;bill_all&quot; align=&quot;justify&quot; readability=&quot;13&quot;&gt;
&lt;div id=&quot;about&quot; readability=&quot;27.5&quot;&gt;&lt;br clear=&quot;all&quot;/&gt;&lt;div width=&quot;100%&quot;&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;Assembly Bill No. 2149&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;CHAPTER 125&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;&lt;span&gt;An act to add Chapter 22.4 (commencing with Section 22598) to Division 8 of the Business and Professions Code, relating to business.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;[ &lt;span&gt;Approved by&lt;/span&gt; &lt;span&gt;Governor&lt;/span&gt;  &lt;span&gt;September 24, 2020.&lt;/span&gt; &lt;span&gt;Filed with&lt;/span&gt; &lt;span&gt;Secretary of State&lt;/span&gt;  &lt;span&gt;September 24, 2020.&lt;/span&gt; ]&lt;/p&gt;
&lt;p&gt;
&lt;h2&gt;LEGISLATIVE COUNSEL'S DIGEST&lt;/h2&gt;
&lt;/p&gt;
&lt;p&gt;&lt;span id=&quot;subject&quot;&gt;AB 2149, Gonzalez. Food delivery platforms.&lt;/span&gt;&lt;/p&gt;
&lt;div readability=&quot;22&quot;&gt;&lt;span id=&quot;digesttext&quot;/&gt;
&lt;p&gt;&lt;span id=&quot;digesttext&quot;&gt;The California Retail Food Code (code) generally requires various businesses that prepare or otherwise provide food to the public to comply with uniform health and sanitation standards. The code defines “food facility” for its purposes as an operation that stores, prepares, packages, serves, vends, or otherwise provides food for human consumption at the retail level.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span id=&quot;digesttext&quot;&gt;This bill would enact the Fair Food Delivery Act of 2020, to prohibit a food delivery platform from arranging for the delivery of an order from a food facility without first obtaining an agreement with the food facility expressly authorizing the food delivery platform to take orders and deliver meals prepared by the food facility. The bill would define a “food delivery platform” as an online business that acts as an intermediary between consumers and multiple food facilities to submit food orders from a consumer to a participating food facility, and to arrange for the delivery of the order from the food facility to the consumer.&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h2&gt;&lt;span class=&quot;hidden&quot;&gt;Digest Key&lt;/span&gt;&lt;/h2&gt;
&lt;span id=&quot;vote&quot;&gt;Vote: &lt;span&gt;MAJORITY&lt;/span&gt;  &lt;/span&gt; &lt;span id=&quot;appropriation&quot;&gt;Appropriation: &lt;span&gt;NO&lt;/span&gt;  &lt;/span&gt; &lt;span id=&quot;fiscalcommittee&quot;&gt;Fiscal Committee: &lt;span&gt;NO&lt;/span&gt;  &lt;/span&gt; &lt;span id=&quot;localprogram&quot;&gt;Local Program: &lt;span&gt;NO&lt;/span&gt;  &lt;/span&gt;&lt;/div&gt;
&lt;hr/&gt;&lt;h2&gt;&lt;span class=&quot;hidden&quot;&gt;Bill Text&lt;/span&gt;&lt;/h2&gt;
&lt;div id=&quot;bill&quot; readability=&quot;9&quot;&gt;
&lt;p&gt;
&lt;h2&gt;The people of the State of California do enact as follows:&lt;/h2&gt;
&lt;br/&gt;&lt;/p&gt;
&lt;div id=&quot;s10.04397347778669958&quot; readability=&quot;7&quot;&gt;
&lt;div readability=&quot;9&quot;&gt;
&lt;p&gt;
&lt;h3&gt;SECTION 1.&lt;/h3&gt;
 This act shall be known, and may be cited, as the Fair Food Delivery Act of 2020.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&quot;s20.5855242317308498&quot; readability=&quot;9&quot;&gt;
&lt;p&gt;
&lt;h3&gt;SEC. 2.&lt;/h3&gt;
 Chapter 22.4 (commencing with Section 22598) is added to Division 8 of the Business and Professions Code, to read:&lt;/p&gt;
&lt;div&gt;
&lt;div readability=&quot;14&quot;&gt;
&lt;div id=&quot;id_3172F698-DAC3-4655-9045-486A6A091A7B&quot; readability=&quot;7&quot;&gt;
&lt;p&gt;
&lt;h5&gt;CHAPTER  22.4. Food Delivery Platforms&lt;/h5&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;div readability=&quot;17&quot;&gt;
&lt;p&gt;
&lt;h6&gt;22598.&lt;/h6&gt;
 For purposes of this chapter, the following definitions shall apply:&lt;/p&gt;
&lt;p&gt;(a) “Food delivery platform” means an online business that acts as an intermediary between consumers and multiple food facilities to submit food orders from a consumer to a participating food facility, and to arrange for the delivery of the order from the food facility to the consumer.&lt;/p&gt;
&lt;p&gt;(b) “Food facility” means a food facility, as defined in Section 113789 of the Health and Safety Code.&lt;/p&gt;
&lt;/div&gt;
&lt;div readability=&quot;9&quot;&gt;
&lt;p&gt;
&lt;h6&gt;22599.&lt;/h6&gt;
 A food delivery platform shall not arrange for the delivery of an order from a food facility without first obtaining an agreement with the food facility expressly authorizing the food delivery platform to take orders and deliver meals prepared by the food facility.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
<pubDate>Fri, 01 Jan 2021 08:49:13 +0000</pubDate>
<dc:creator>supernova87a</dc:creator>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://leginfo.legislature.ca.gov/faces/billTextClient.xhtml?bill_id=201920200AB2149</dc:identifier>
</item>
<item>
<title>TabFS: Mount your Browser Tabs as a Filesystem</title>
<link>https://omar.website/tabfs/</link>
<guid isPermaLink="true" >https://omar.website/tabfs/</guid>
<description>&lt;p&gt;&lt;a href=&quot;https://github.com/osnr/TabFS&quot;&gt;TabFS&lt;/a&gt; is a browser extension that mounts your browser tabs as a filesystem on your computer.&lt;/p&gt;
&lt;p&gt;Out of the box, it supports Chrome and (to a lesser extent) Firefox, on macOS and Linux.&lt;/p&gt;
&lt;p&gt;Each of your open tabs is mapped to a folder.&lt;/p&gt;
&lt;div class=&quot;figure&quot; readability=&quot;8&quot;&gt;&lt;img src=&quot;https://omar.website/tabfs/doc/00-browser.png&quot;/&gt;&lt;img src=&quot;https://omar.website/tabfs/doc/00-finder.png&quot;/&gt;&lt;p class=&quot;caption&quot;&gt;I have 3 tabs open, and they map to 3 folders in TabFS&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;The files inside a tab's folder directly reflect (and can control) the state of that tab in your browser. (TODO: update as I add more)&lt;/p&gt;
&lt;div class=&quot;figure&quot; readability=&quot;11&quot;&gt;
&lt;p class=&quot;caption&quot;&gt;Example: the url.txt, text.txt, and title.txt files inside a tab's folder, which tell me those live properties for that tab&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;This gives you a &lt;em&gt;ton&lt;/em&gt; of power, because now you can apply &lt;a href=&quot;https://twitter.com/rsnous/status/1018570020324962305&quot;&gt;all the existing tools&lt;/a&gt; on your computer that already know how to deal with files -- terminal commands, scripting languages, etc -- and use them to control and communicate with your browser.&lt;/p&gt;
&lt;p&gt;Now you don't need to &lt;a href=&quot;https://twitter.com/rsnous/status/1261392522485526528&quot;&gt;code up a browser extension from scratch&lt;/a&gt; every time you want to do anything. You can write a script that talks to your browser in, like, a melange of Python and bash, and you can save it as &lt;a href=&quot;https://twitter.com/rsnous/status/1308588645872435202&quot;&gt;a single ordinary file&lt;/a&gt; that you can run whenever, and it's no different from scripting any other part of your computer.&lt;/p&gt;
&lt;h3 id=&quot;table-of-contents&quot;&gt;table of contents&lt;/h3&gt;

&lt;h2 id=&quot;examples-of-stuff-you-can-do-examples&quot;&gt;Examples of stuff you can do!&lt;/h2&gt;
&lt;p&gt;(assuming your current directory is the &lt;code&gt;fs&lt;/code&gt; subdirectory of the git repo and you have the extension running)&lt;/p&gt;
&lt;h3 id=&quot;list-the-titles-of-all-the-tabs-you-have-open&quot;&gt;List the titles of all the tabs you have open&lt;/h3&gt;
&lt;pre&gt;
&lt;code&gt;$ cat mnt/tabs/by-id/*/title.txt
GitHub
Extensions
TabFS/install.sh at master · osnr/TabFS
Alternative Extension Distribution Options - Google Chrome
Web Store Hosting and Updating - Google Chrome
Home / Twitter
...
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;cull-tabs-like-any-other-files&quot;&gt;Cull tabs like any other files&lt;/h3&gt;
&lt;div class=&quot;figure&quot; readability=&quot;7&quot;&gt;
&lt;p class=&quot;caption&quot;&gt;Selecting and deleting a bunch of tabs in my file manager&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;I'm using Dired in Emacs here, but you could use whatever tools you already feel comfortable managing your files with.&lt;/p&gt;
&lt;h3 id=&quot;close-all-stack-overflow-tabs&quot;&gt;Close all Stack Overflow tabs&lt;/h3&gt;
&lt;pre&gt;
&lt;code&gt;$ rm mnt/tabs/by-title/*Stack_Overflow*
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;or (older / more explicit)&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;$ echo remove | tee -a mnt/tabs/by-title/*Stack_Overflow*/control
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;btw&quot;&gt;btw&lt;/h4&gt;
&lt;p&gt;(this task, removing all tabs whose titles contain some string, is a little contrived, but it's not that unrealistic, right?)&lt;/p&gt;
&lt;p&gt;(now... how would you do this &lt;em&gt;without&lt;/em&gt; TabFS? I honestly have no idea, off the top of my head. like, how do you even get the titles of tabs? how do you tell the browser to close them?)&lt;/p&gt;
&lt;p&gt;(I looked up the APIs, and, OK, if you're already in a browser extension, in a 'background script' inside the extension, &lt;em&gt;and&lt;/em&gt; your extension has the &lt;code&gt;tabs&lt;/code&gt; permission -- this already requires you to make 2 separate files and hop between your browser and your text editor to set it all up! -- you can do &lt;a href=&quot;https://developer.chrome.com/docs/extensions/reference/tabs/#method-query&quot;&gt;this&lt;/a&gt;: &lt;code&gt;chrome.tabs.query({}, tabs =&amp;gt; chrome.tabs.remove(tabs.filter(tab =&amp;gt; tab.title.includes('Stack Overflow')).map(tab =&amp;gt; tab.id)))&lt;/code&gt;)&lt;/p&gt;
&lt;p&gt;(not &lt;em&gt;terrible&lt;/em&gt;, but look at all that upfront overhead to get it set up. and it's not all that discoverable. and what if you want to reuse this later, or plug it into some larger pipeline of tools on your computer, or give it a visual interface? the jump in complexity once you need to communicate with anything -- possibly setting up a WebSocket, setting up handlers and a state machine -- is pretty horrifying)&lt;/p&gt;
&lt;p&gt;(but to be honest, I wouldn't even have conceived of this as a thing I could do in the first place)&lt;/p&gt;
&lt;h3 id=&quot;save-text-of-all-tabs-to-a-file&quot;&gt;Save text of all tabs to a file&lt;/h3&gt;
&lt;pre&gt;
&lt;code&gt;$ cat mnt/tabs/by-id/*/text.txt &amp;gt; text-of-all-tabs.txt
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;run-script&quot;&gt;Run script&lt;/h3&gt;
&lt;pre&gt;
&lt;code&gt;$ echo 'document.body.style.background = &quot;green&quot;' &amp;gt; mnt/tabs/last-focused/execute-script
$ echo 'alert(&quot;hi!&quot;)' &amp;gt; mnt/tabs/last-focused/execute-script
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;reload-an-extension-when-you-edit-its-source-code&quot;&gt;Reload an extension when you edit its source code&lt;/h3&gt;
&lt;p&gt;Suppose you're working on a Chrome extension (apart from this one). It's a pain to reload the extension (and possibly affected Web pages) every time you change its code. There's a &lt;a href=&quot;https://stackoverflow.com/questions/2963260/how-do-i-auto-reload-a-chrome-extension-im-developing&quot;&gt;Stack Overflow post&lt;/a&gt; with ways to automate this, but they're all sort of hacky. You need yet another extension, or you need to tack weird permissions onto your work-in-progress extension, and you don't just get a command you can trigger from your editor or shell to refresh the extension.&lt;/p&gt;
&lt;p&gt;TabFS lets you do all this in &lt;a href=&quot;https://github.com/osnr/playgroundize-devtools-protocol/blob/main/go.sh&quot;&gt;an ordinary shell script&lt;/a&gt;. You don't have to write any browser-side code at all.&lt;/p&gt;
&lt;p&gt;This script turns an extension (this one's title is &quot;Playgroundize DevTools Protocol&quot;) off, then turns it back on, then reloads any tabs that have the relevant pages open (in this case, I decided it's tabs whose titles start with &quot;Chrome Dev&quot;):&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;#!/bin/bash -eux
echo false &amp;gt; mnt/extensions/Playg*/enabled
echo true &amp;gt; mnt/extensions/Playg*/enabled
echo reload | tee mnt/tabs/by-title/Chrome_Dev*/control
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;I mapped this script to Ctrl-. in my text editor, and now I just hit that every time I want to reload my extension code.&lt;/p&gt;
&lt;h3 id=&quot;todo-live-edit-a-running-web-page&quot;&gt;TODO: Live edit a running Web page&lt;/h3&gt;
&lt;p&gt;edit &lt;code&gt;page.html&lt;/code&gt; in the tab folder. I guess it could just stomp outerHTML at first, eventually could do something more sophisticated&lt;/p&gt;
&lt;p&gt;(it would be cool to have a persistent storage story here also. I like the idea of being able to put arbitrary files anywhere in the subtree, actually, because then you could use git and emacs autosave and stuff for free... hmm)&lt;/p&gt;
&lt;h3 id=&quot;todo-watch-expressions&quot;&gt;TODO: Watch expressions&lt;/h3&gt;
&lt;pre&gt;
&lt;code&gt;$ touch mnt/tabs/last-focused/watches/window.scrollY
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Now you can &lt;code&gt;cat window.scrollY&lt;/code&gt; and see where you are scrolled on the page at any time.&lt;/p&gt;
&lt;p&gt;Could make an &lt;a href=&quot;https://twitter.com/rsnous/status/1080878682275803137&quot;&gt;ad-hoc dashboard&lt;/a&gt; around a Web page: a bunch of terminal windows floating around your screen, each sitting in a loop and using &lt;code&gt;cat&lt;/code&gt; to monitor a different variable.&lt;/p&gt;
&lt;h3 id=&quot;todo-import-data-json-xls-js&quot;&gt;TODO: Import data (JSON? XLS? JS?)&lt;/h3&gt;
&lt;p&gt;drag a JSON file &lt;code&gt;foo.json&lt;/code&gt; into the &lt;code&gt;imports&lt;/code&gt; subfolder of the tab and it shows up as the object &lt;code&gt;imports.foo&lt;/code&gt; in JS. (modify &lt;code&gt;imports.foo&lt;/code&gt; in JS and then read &lt;code&gt;imports/foo.json&lt;/code&gt; and you read the changes back?)&lt;/p&gt;
&lt;p&gt;import a plotting library or whatever the same way? dragging &lt;code&gt;plotlib.js&lt;/code&gt; into &lt;code&gt;imports/plotlib.js&lt;/code&gt; and then calling &lt;code&gt;imports.plotlib()&lt;/code&gt; to invoke that JS file&lt;/p&gt;
&lt;p&gt;the browser has a lot of potential power as an interactive programming environment, one where graphics come &lt;a href=&quot;https://twitter.com/rsnous/status/1295828978477932544&quot;&gt;as naturally&lt;/a&gt; as console I/O do in most programming languages. i think something that holds it back that is underexplored is lack of ability to just... drag files in and manage them with decent tools. many Web-based 'IDEs' have to reinvent file management, etc from scratch, and it's like a separate universe from the rest of your computer, and migrating between one and the other is a real pain (if you want to use some Python library to munge some data and then have a Web-based visualization of it, for instance, or if you want to version files inside it, or make snapshots so you &lt;a href=&quot;https://twitter.com/rsnous/status/1288725175895068673&quot;&gt;feel comfortable&lt;/a&gt; trying stuff, etc).&lt;/p&gt;
&lt;p&gt;(what would the persistent storage story here be? localStorage? it's interesting because I almost want each tab to be &lt;a href=&quot;https://twitter.com/rsnous/status/1344753559007420416&quot;&gt;less of a commodity&lt;/a&gt;, less &lt;a href=&quot;https://twitter.com/rsnous/status/1270192308772691968&quot;&gt;disposable&lt;/a&gt;, since now it's the site I'm dragging stuff to and it might have some persistent state attached. like, if I'm programming and editing stuff and saving inside a tab's folder, that tab suddenly really &lt;a href=&quot;https://twitter.com/rsnous/status/1251863115022491653&quot;&gt;matters&lt;/a&gt;; I want it to survive as long as a normal file would, unlike most browser tabs today)&lt;/p&gt;
&lt;h2 id=&quot;setup&quot;&gt;Setup&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;disclaimer&lt;/strong&gt;: this extension is an experiment. I think it's cool and useful and provocative, and I usually leave it on, but I make no promises about functionality or, especially, security. applications may freeze, your browser may freeze, there may be ways for Web pages to use the extension to escape and hurt your computer ... In some sense, the &lt;a href=&quot;https://twitter.com/rsnous/status/1338932056743546880&quot;&gt;whole point&lt;/a&gt; of this extension is to create a gigantic new surface area of communication between stuff inside your browser and software on the rest of your computer.&lt;/p&gt;
&lt;p&gt;Before doing anything, clone &lt;a href=&quot;https://github.com/osnr/TabFS&quot;&gt;this repository&lt;/a&gt;:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;$ git clone https://github.com/osnr/TabFS.git
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;First, install the browser extension.&lt;/p&gt;
&lt;p&gt;Then, install the C filesystem.&lt;/p&gt;
&lt;h3 id=&quot;1-install-the-browser-extension&quot;&gt;1. Install the browser extension&lt;/h3&gt;
&lt;p&gt;(I think for Opera or whatever other Chromium-based browser, you could get it to work, but you'd need to change the native messaging path in install.sh. Not sure about Safari. maybe Edge too? if you also got everything to compile for Windows)&lt;/p&gt;
&lt;h4 id=&quot;in-chrome&quot;&gt;in Chrome&lt;/h4&gt;
&lt;p&gt;Go to the &lt;a href=&quot;chrome://extensions&quot;&gt;Chrome extensions page&lt;/a&gt;. Enable Developer mode (top-right corner).&lt;/p&gt;
&lt;p&gt;Load-unpacked the &lt;code&gt;extension/&lt;/code&gt; folder in this repo.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Make a note of the extension ID Chrome assigns.&lt;/strong&gt; Mine is &lt;code&gt;jimpolemfaeckpjijgapgkmolankohgj&lt;/code&gt;. We'll use this later.&lt;/p&gt;
&lt;h4 id=&quot;in-firefox&quot;&gt;in Firefox&lt;/h4&gt;
&lt;p&gt;You'll need to install as a &quot;temporary extension&quot;, so it'll only last in your current FF session. (TODO: is this fixable? signature stuff?)&lt;/p&gt;
&lt;p&gt;Go to &lt;a href=&quot;about:debugging#/runtime/this-firefox&quot;&gt;about:debugging#/runtime/this-firefox&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Load Temporary Add-on...&lt;/p&gt;
&lt;p&gt;Choose manifest.json in the extension subfolder of this repo.&lt;/p&gt;
&lt;h3 id=&quot;2-install-the-c-filesystem&quot;&gt;2. Install the C filesystem&lt;/h3&gt;
&lt;p&gt;First, make sure you have FUSE and FUSE headers. On Linux, for example, &lt;code&gt;sudo apt install libfuse-dev&lt;/code&gt; or equivalent. On macOS, get &lt;a href=&quot;https://osxfuse.github.io/&quot;&gt;FUSE for macOS&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Then compile the C filesystem:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;$ cd fs
$ mkdir mnt
$ make
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Now install the native messaging host into your browser, so the extension can launch and talk to the filesystem:&lt;/p&gt;
&lt;h4 id=&quot;chrome-and-chromium&quot;&gt;Chrome and Chromium&lt;/h4&gt;
&lt;p&gt;Substitute the extension ID you copied earlier for &lt;code&gt;jimpolemfaeckpjijgapgkmolankohgj&lt;/code&gt; in the command below.&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;$ ./install.sh chrome jimpolemfaeckpjijgapgkmolankohgj
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;or&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;$ ./install.sh chromium jimpolemfaeckpjijgapgkmolankohgj
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;firefox&quot;&gt;Firefox&lt;/h4&gt;
&lt;pre&gt;
&lt;code&gt;$ ./install.sh firefox
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;3-ready&quot;&gt;3. Ready!&lt;/h3&gt;
&lt;p&gt;Go back to &lt;code&gt;chrome://extensions&lt;/code&gt; or &lt;code&gt;about:debugging#/runtime/this-firefox&lt;/code&gt; and reload the extension.&lt;/p&gt;
&lt;p&gt;Now your browser tabs should be mounted in &lt;code&gt;fs/mnt&lt;/code&gt;!&lt;/p&gt;
&lt;p&gt;Open the background page inspector to see the filesystem operations stream in. (in Chrome, click &quot;background page&quot; next to &quot;Inspect views&quot; in the extension's entry in the Chrome extensions page; in Firefox, click &quot;Inspect&quot;)&lt;/p&gt;
&lt;div class=&quot;figure&quot;&gt;&lt;img src=&quot;https://omar.website/tabfs/doc/inspector.png&quot;/&gt;&lt;/div&gt;
&lt;p&gt;This console is also incredibly helpful for debugging anything that goes wrong, which probably will happen. (If you get a generic I/O error at the shell when running a command on TabFS, that probably means that an exception happened which you can check here.)&lt;/p&gt;
&lt;p&gt;(My OS and applications are pretty chatty. They do a lot of operations, even when I don't feel like I'm actually doing anything. My sense is that macOS is generally chattier than Linux.)&lt;/p&gt;
&lt;h2 id=&quot;design&quot;&gt;Design&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;fs/&lt;/code&gt;: Native FUSE filesystem, written in C
&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://github.com/osnr/TabFS/tree/master/fs/tabfs.c&quot;&gt;&lt;code&gt;tabfs.c&lt;/code&gt;&lt;/a&gt;: Talks to FUSE, implements fs operations, talks to extension. I rarely have to change this file; it essentially is just a stub that forwards everything to the browser extension.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;extension/&lt;/code&gt;: Browser extension, written in JS
&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://github.com/osnr/TabFS/tree/master/extension/background.js&quot;&gt;&lt;code&gt;background.js&lt;/code&gt;&lt;/a&gt;: &lt;strong&gt;The most interesting file&lt;/strong&gt;. Defines all the synthetic files and what browser operations they invoke behind the scenes.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;My understanding is that when you, for example, &lt;code&gt;cat mnt/tabs/by-id/6377/title.txt&lt;/code&gt; in the tab filesystem:&lt;/p&gt;
&lt;ol readability=&quot;9.7727272727273&quot;&gt;&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;&lt;code&gt;cat&lt;/code&gt; on your computer does a system call &lt;code&gt;open()&lt;/code&gt; down into macOS or Linux,&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;macOS/Linux sees that this path is part of a FUSE filesystem, so it forwards the &lt;code&gt;open()&lt;/code&gt; to the FUSE kernel module,&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;FUSE forwards it to the &lt;code&gt;tabfs_open&lt;/code&gt; implementation in our userspace filesystem in &lt;code&gt;fs/tabfs.c&lt;/code&gt;,&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0.86046511627907&quot;&gt;
&lt;p&gt;then &lt;code&gt;tabfs_open&lt;/code&gt; rephrases the request as a JSON string and forwards it to our browser extension over stdout (&lt;a href=&quot;https://developer.chrome.com/docs/apps/nativeMessaging/&quot;&gt;'native messaging'&lt;/a&gt;),&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;4&quot;&gt;
&lt;p&gt;our browser extension in &lt;code&gt;extension/background.js&lt;/code&gt; gets the incoming message; it triggers the route for &lt;code&gt;/tabs/by-id/*/title.txt&lt;/code&gt;, which calls the browser extension API &lt;code&gt;browser.tabs.get&lt;/code&gt; to get the data about tab ID &lt;code&gt;6377&lt;/code&gt;, including its title,&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;so when &lt;code&gt;cat&lt;/code&gt; does &lt;code&gt;read()&lt;/code&gt; later, the title can get sent back in a JSON native message to &lt;code&gt;tabfs.c&lt;/code&gt; and finally back to FUSE and the kernel and &lt;code&gt;cat&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;(very little actual work happened here, tbh. it's all just marshalling)&lt;/p&gt;
&lt;p&gt;TODO: make diagrams?&lt;/p&gt;
&lt;h2 id=&quot;license&quot;&gt;License&lt;/h2&gt;
&lt;p&gt;GPLv3&lt;/p&gt;
&lt;h2 id=&quot;things-that-could-should-be-done&quot;&gt;things that could/should be done&lt;/h2&gt;
&lt;ul readability=&quot;24.433242506812&quot;&gt;&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;add more synthetic files!! view DOM nodes, snapshot current HTML of page, spelunk into living objects. see what your code is doing. make more files writable also&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;build more (GUI and CLI) tools on top, on both sides&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;8&quot;&gt;
&lt;p&gt;more persistence stuff. as I said earlier, it would also be cool if you could put arbitrary files in the subtrees, so .git, Mac extended attrs, editor temp files, etc all work. make it able to behave like a 'real' filesystem. also as I said earlier, some weirdness in the fact that tabs are so disposable; they have a very different lifecycle from most parts of my real filesystem. how to nudge that?&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;why can't Preview open images? GUI programs often struggle with the filesystem for some reason. CLI more reliable&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;16.88679245283&quot;&gt;
&lt;p&gt;multithreading. the key constraint is that I pass &lt;code&gt;-s&lt;/code&gt; to &lt;code&gt;fuse_main&lt;/code&gt; in &lt;code&gt;tabfs.c&lt;/code&gt;, which makes everything single-threaded. but I'm not clear on how much it would improve performance? maybe a lot, but not sure. maybe workload-dependent?&lt;/p&gt;
&lt;p&gt;the extension itself (and the stdin/stdout comm between the fs and the extension) would still be single-threaded, but you could interleave requests since most of that stuff is async. like the screenshot request that takes like half a second, you could do other stuff while waiting for the browser to get back to you on that (?)&lt;/p&gt;
&lt;p&gt;another issue is that &lt;em&gt;applications&lt;/em&gt; tend to hang if any individual request hangs anyway; they're not expecting the filesystem to be so slow (and to be fair to them, they really have &lt;a href=&quot;https://twitter.com/whitequark/status/1133905587819941888&quot;&gt;no way&lt;/a&gt; to). some of these problems may be inevitable for any FUSE filesystem, even ones you'd assume are reasonably battle-tested and well-engineered like sshfs?&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;other performance stuff -- remembering when we're already attached to things, reference counting, minimizing browser roundtrips. not sure impact of these&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;TypeScript (how to do with the minimum amount of build system and package manager nonsense?)&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;look into support for Firefox / Windows / Safari / etc. best FUSE equiv for Windows? can you bridge to the remote debugging APIs that all of them already have to get the augmented functionality? or just implement it all with JS monkey patching?&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;window management. tab management where you can move tabs. 'merge all windows'&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;hmm&quot;&gt;hmm&lt;/h2&gt;
&lt;ul readability=&quot;31.115718214512&quot;&gt;&lt;li readability=&quot;3.4052044609665&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https://lucasvr.gobolinux.org/etc/Killian84-Procfs-USENIX.pdf&quot;&gt;Processes as Files (1984)&lt;/a&gt;, &lt;a href=&quot;https://drawings.jvns.ca/proc/&quot;&gt;Julia Evans /proc comic&lt;/a&gt; lay out the original &lt;code&gt;/proc&lt;/code&gt; filesystem. it's very cool! very elegant in how it reapplies the existing interface of files to the new domain of Unix processes. but how much do I care about Unix processes now? most &lt;a href=&quot;https://twitter.com/rsnous/status/1176587656915849218&quot;&gt;programs&lt;/a&gt; that I care about running on my computer these days are Web pages, &lt;a href=&quot;https://twitter.com/rsnous/status/1076229968017772544&quot;&gt;not Unix processes&lt;/a&gt;. so I want to take the approach of &lt;code&gt;/proc&lt;/code&gt; -- 'expose the stuff you care about as a filesystem' -- and apply it to something &lt;a href=&quot;https://twitter.com/rsnous/status/1251342095698112512&quot;&gt;modern&lt;/a&gt;: the inside of the browser. 'browser tabs as files'&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;7&quot;&gt;
&lt;p&gt;there are two 'operating systems' on my computer, the browser and Unix, and Unix is by far the more accessible and programmable and cohesive as a computing environment (it has concepts that compose! shell, processes, files), even though it's arguably the less important to my daily life. how can the browser take on more of the properties of Unix?&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2.8646616541353&quot;&gt;
&lt;p&gt;it's &lt;a href=&quot;https://twitter.com/rsnous/status/1342236988938719232&quot;&gt;way too hard&lt;/a&gt; to make a browser extension. even 'make an extension' is a bad framing; it suggests making an extension is a whole Thing, a whole Project. like, why can't I just take a minute to ask my browser a question or tell it to automate something? lightness&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2.9075829383886&quot;&gt;
&lt;p&gt;a lot of existing uses of these browser control APIs are in an automation context: testing your code on a robotic browser as part of some pipeline. I'm much more interested in an interactive, end-user context. augmenting the way I use my everyday browser. that's why this is an extension. it doesn't require your browser to run in some weird remote debugging mode that you'd always forget to turn on. it just &lt;a href=&quot;https://twitter.com/rsnous/status/1340150818553561094&quot;&gt;stays running&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2.9171511627907&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https://jvns.ca/strace-zine-v2.pdf&quot;&gt;system call tracing&lt;/a&gt; (dtruss or strace) super useful when anything is going wrong. (need to disable SIP on macOS, though.) the combination of dtruss (application side) &amp;amp; console logging fs request/response (filesystem side) gives a huge amount of insight into basically any problem, end to end&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;there is sort of this sequence that I learned to try with anything. first, either simple shell commands or pure C calls -- shell commands are more ergonomic, C calls have the clearest mental model of what syscalls they actually invoke. only then do you move to the text editor or the Mac Finder, which are a lot fancier and throw a lot more stuff at the filesystem at once (so more can go wrong)&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li readability=&quot;6&quot;&gt;
&lt;p&gt;for a lot of things in the extension API, the browser can notify you of updates but there's no apparent way to query the full current state. so we'd need to sit in a lot of these places from the beginning and accumulate the incoming events to know, like, the last time a tab was updated, or the list of scripts currently running on a tab&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;async/await was absolutely vital to making this readable&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1.8793969849246&quot;&gt;
&lt;p&gt;filesystem as 'open input space' where there are things you can say beyond what this particular filesystem cares about. (it reminds me of my &lt;a href=&quot;https://screenotate.com&quot;&gt;Screenotate&lt;/a&gt; -- screenshots give you this open field where you can &lt;a href=&quot;https://twitter.com/rsnous/status/1221687986510680064&quot;&gt;carry through&lt;/a&gt; stuff that the OCR doesn't necessarily recognize or care about. same for the real world in Dynamicland; you can scribble notes or whatever even if the computer doesn't see them)&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;3&quot;&gt;
&lt;p&gt;now you have this whole 'language', this whole toolset, to control and automate your browser. there's this built-up existing capital where lots of people and lots of application software and lots of programming languages ... already know the operations to work with files&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2.7338709677419&quot;&gt;
&lt;p&gt;this project is cool bc i immediately get &lt;a href=&quot;https://twitter.com/rsnous/status/1084166291793965056&quot;&gt;a dataset i care about&lt;/a&gt;. I found myself using it 'authentically' pretty quickly -- to clear out my tabs, to help me develop other things in the browser so I'd have actions I could trigger from my editor, ...&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-0.7490297542044&quot;&gt;
&lt;p&gt;stuff that looks cool / is related:&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;5.4032258064516&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https://twitter.com/rsnous/status/1107427906832089088&quot;&gt;rmdir a non-empty directory&lt;/a&gt; -- when I was thinking if you should be able to &lt;code&gt;rm by-id/TABID&lt;/code&gt; even though &lt;code&gt;TABID&lt;/code&gt; is a folder. I feel like a new OS, something like Plan 9, should &lt;a href=&quot;https://twitter.com/rsnous/status/1070830656005988352&quot;&gt;generalize&lt;/a&gt; its file I/O APIs just enough to avoid problems like this. like design them with the disk in mind but also a few concrete cases of synthetic filesystems, very slow remote filesystems, etc&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;do you like setting up sockets? I don't&lt;/p&gt;

</description>
<pubDate>Fri, 01 Jan 2021 02:48:55 +0000</pubDate>
<dc:creator>thesephist</dc:creator>
<dc:language>en-us</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://omar.website/tabfs/</dc:identifier>
</item>
</channel>
</rss>