<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=hnrss.org%2Fnewest%3Fpoints%3D200&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://hnrss.org/newest?points=200" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>Hacker News: Newest</title>
<link>https://news.ycombinator.com/newest</link>
<description>Hacker News RSS</description>
<item>
<title>Tesla Q3 Financial Results</title>
<link>https://ir.tesla.com/static-files/47313d21-3cac-4f69-9497-d161bce15da4</link>
<guid isPermaLink="true" >https://ir.tesla.com/static-files/47313d21-3cac-4f69-9497-d161bce15da4</guid>
<description>&lt;a href=&quot;https://ir.tesla.com/static-files/47313d21-3cac-4f69-9497-d161bce15da4&quot;&gt;Download PDF&lt;/a&gt;</description>
<pubDate>Wed, 23 Oct 2019 20:55:53 +0000</pubDate>
<dc:creator>danhak</dc:creator>
<dc:format>application/pdf</dc:format>
<dc:identifier>https://ir.tesla.com/static-files/47313d21-3cac-4f69-9497-d161bce15da4</dc:identifier>
</item>
<item>
<title>US Constitution – A Git repo with history of edits</title>
<link>https://github.com/JesseKPhillips/USA-Constitution</link>
<guid isPermaLink="true" >https://github.com/JesseKPhillips/USA-Constitution</guid>
<description>&lt;div class=&quot;Box-body&quot;&gt;
&lt;article class=&quot;markdown-body entry-content p-5&quot; itemprop=&quot;text&quot;&gt;
&lt;p&gt;The United States of America's Constitution has seen many modifications over the centuries. These changes have been handled without modification of the original document through what is called an Amendment. But what does the final document look like? How did these Amendments actually change what that document said? This repository answers those questions, to the best of my ability.&lt;/p&gt;
&lt;p&gt;A good example of what I mean is the changes made by the Bill of Rights. &lt;a href=&quot;https://github.com/JesseKPhillips/USA-Constitution/commit/7f340829cfc2ea844de1adfa4d9618d2adb6f932&quot;&gt;https://github.com/JesseKPhillips/USA-Constitution/commit/7f340829cfc2ea844de1adfa4d9618d2adb6f932&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Who Made the Change?&lt;/h2&gt;
&lt;p&gt;I tried my best to identify a primary author of the Amendment utilizing that person as the Author of the commit. I also used the ability to change the commit date... which may not have been the best choice. Git dates are incapable of representing the year in which these events took place; in this case the 1970's could be represented so I decided to ignore the first two digits.&lt;/p&gt;
&lt;p&gt;With the exception of the commits made in 1971, the year was actually 1791, I follow the simple path of ignoring the least significant digit. So 1996 means 196?as I chop off the 19, the year 1000 is implied and then tack on the next two significant digits of the year which is 96 and leaves off the specific year.&lt;/p&gt;
&lt;p&gt;Going forward though, any amendments should use the actual amended date since there will be no confusion for this scheme and anything occurring after 2000.&lt;/p&gt;
&lt;h2&gt;The Eighteenth Amendment&lt;/h2&gt;
&lt;p&gt;I would draw attention to Amendment XVIII. First off the commit message says XVII which is incorrect but I'm referring to the Amendment itself.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/JesseKPhillips/USA-Constitution/commit/7868b033b9251a802bbd302eb49c25dc0cd3e169&quot;&gt;https://github.com/JesseKPhillips/USA-Constitution/commit/7868b033b9251a802bbd302eb49c25dc0cd3e169&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This was the only amendment to the Constitution which deserved the addition of a new Article. All other modifications had a reasonable Article they either modified or expanded on. The 18th Amendment however was the prohibition of alcohol, the only amendment to directly affect what people could do within their country. All other content in the Constitution covers how the government is put together, what role each segregation plays and even puts restrictions on what States can do.&lt;/p&gt;
&lt;p&gt;I had considered adding additional content to this commit that wasn't found in the Amendment. Why? Because I wanted to clearly state that the government was granting themselves the power necessary to enforce this. But at last I did not, because Article I Section 8 ends with&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;To make all Laws which shall be necessary and proper for carrying into Execution the foregoing Powers, and all other Powers vested by this Constitution in the Government of the United States, or in any Department or Officer thereof.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Which looking at again, does not say they have the power to lay laws to enforce the Articles of the Constitution, but instead the Powers vested by this Constitution... Hmmm, I expressly removed the portion of the Amendments which actually granted power to enforce the Amendment (as still visible in the amendments.md file).&lt;/p&gt;
&lt;p&gt;Makes you wonder if this was what was needed to ban alcohol, where does the government get the power to ban drugs.&lt;/p&gt;
&lt;h2&gt;Additional Contributions&lt;/h2&gt;
&lt;p&gt;Since the historic modifications are complete, additional markdown formatting is welcome.&lt;/p&gt;
&lt;p&gt;While the master branch shall remain the actual edits to the Constitution, feel free to propose a new branch that include changes you'd like to express. I'll arbitrarily evaluate if it is suitable to be added. One idea might be to change the Constitution to clearly state the powers the government is executing with.&lt;/p&gt;
&lt;p&gt;Keep in mind this is not a formal platform to establish Constitutional changes.&lt;/p&gt;
&lt;/article&gt;&lt;/div&gt;
</description>
<pubDate>Wed, 23 Oct 2019 19:55:49 +0000</pubDate>
<dc:creator>styfle</dc:creator>
<og:image>https://avatars1.githubusercontent.com/u/458618?s=400&amp;v=4</og:image>
<og:type>object</og:type>
<og:title>JesseKPhillips/USA-Constitution</og:title>
<og:url>https://github.com/JesseKPhillips/USA-Constitution</og:url>
<og:description>A history of edits to the US Constitution as it has been amended. Written in markdown to match original formatting. - JesseKPhillips/USA-Constitution</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://github.com/JesseKPhillips/USA-Constitution</dc:identifier>
</item>
<item>
<title>Comcast Is Lobbying Against DNS Encryption</title>
<link>https://www.vice.com/en_us/article/9kembz/comcast-lobbying-against-doh-dns-over-https-encryption-browsing-data</link>
<guid isPermaLink="true" >https://www.vice.com/en_us/article/9kembz/comcast-lobbying-against-doh-dns-over-https-encryption-browsing-data</guid>
<description>&lt;p&gt;Internet giant Comcast is lobbying U.S. lawmakers against plans to encrypt web traffic that would make it harder for internet service providers (ISPs) to determine your browsing history, according to a lobbying presentation obtained by Motherboard.&lt;/p&gt;
&lt;p&gt;The plan, which Google intends to implement soon, would enforce the encryption of DNS data made using Chrome, meaning the sites you visit. Privacy activists have praised Google's move. But ISPs are pushing back as part of a wider lobbying effort against encrypted DNS, according to the presentation. Technologists and activists say this encryption would make it harder for ISPs to leverage data for things such as targeted advertising, as well as block some forms of censorship by authoritarian regimes.&lt;/p&gt;

&lt;p&gt;Mozilla, which makes Firefox, is also planning a version of this encryption.&lt;/p&gt;
&lt;p&gt;&quot;The slides overall are extremely misleading and inaccurate, and frankly I would be somewhat embarrassed if my team had provided that slide deck to policy makers,&quot; Marshall Erwin, senior director of trust and safety at Mozilla, told Motherboard in a phone call after reviewing sections of the slide deck.&lt;/p&gt;
&lt;p&gt;&quot;We are trying to essentially shift the power to collect and monetize peoples' data away from ISPs and providing users with control and a set of default protections,&quot; he added, regarding Mozilla's changes.&lt;/p&gt;
&lt;div class=&quot;article__media&quot; readability=&quot;7&quot;&gt;&lt;img src=&quot;data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=&quot; alt=&quot;comcast-lobbying-presentation-slide-1&quot; class=&quot;col-12-xs&quot; data-src=&quot;https://video-images.vice.com/_uncategorized/1571835868586-summary.png&quot;/&gt;&lt;p&gt;A screenshot of the lobbying presentation. Image: Motherboard.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;In the presentation, Comcast paints this type of encryption as something that will fundamentally change the internet and will centralize power under Google.&lt;/p&gt;
&lt;p&gt;&quot;The unilateral centralization of DNS raises serious policy issues relating to cybersecurity, privacy, antitrust, national security and law enforcement, network performance and service quality (including 5G), and other areas,&quot; Comcast said in the presentation.&lt;/p&gt;
&lt;p&gt;&quot;Congress should demand that Google pause and answer key questions,&quot; a section of the presentation reads. &quot;Why is Google in such a rush?&quot; reads another.&lt;/p&gt;
&lt;p&gt;Google recently announced it would soon start testing the enforcement of DNS over HTTPS, or DoH. A DNS request is essentially a record of which website someone visited. Generally speaking, with DoH those requests would be harder to read for anyone intercepting the request, such as a hacker on the same Wi-Fi network, a government agency sitting on the wire, or the user's ISP.&lt;/p&gt;

&lt;p&gt;&quot;As part of our long standing commitment to making the web safer to use, we will be conducting an experiment to validate our implementation of DNS-over-HTTPS (aka DoH) in Chrome 78,&quot; Kenji Baheux, Chrome Product Manager, &lt;a href=&quot;https://blog.chromium.org/2019/09/experimenting-with-same-provider-dns.html&quot; target=&quot;_blank&quot;&gt;wrote in a blog post&lt;/a&gt; in September.&lt;/p&gt;
&lt;p&gt;The Comcast document, which has been presented to policy makers, says that encrypting browsing data &quot;will cause radical disruption.&quot; It also mentions raising issues for law enforcement; the slide deck does not, however, point out that DNS providers who respond to law enforcement requests can still provide relevant information to authorities.&lt;/p&gt;
&lt;p&gt;But much of the deck pushes one fundamental premise: that Google is centralizing DNS with its DoH, creating a monopoly over the data and its security.&lt;/p&gt;
&lt;p&gt;&quot;If Google encrypts and centralizes DNS, ISPs and other enterprises will be precluded from seeing and resolving their users’ DNS,&quot; the presentation says.&lt;/p&gt;
&lt;p class=&quot;article__blockquote&quot;&gt;&lt;em&gt;&lt;strong&gt;Do you know anything else about ISPs and their use of data? We'd love to hear from you. Using a non-work phone or computer, you can contact Joseph Cox securely on Signal on +44 20 8133 5190, Wickr on josephcox, OTR chat on jfcox@jabber.ccc.de, or email joseph.cox@vice.com.&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;That's not accurate, though. Google isn't actually forcing Chrome users to only use Google's DNS service, and so it is not centralizing the data. Google is instead configuring Chrome to use DoH connections by default if a user's DNS service supports it. A DNS service helps a web browser translate web domains into actual IP addresses to visit. Typically, ISPs will do this for customers, but Google, Cloudflare, and other cybersecurity companies also run their own DNS servers that people can use.&lt;br/&gt;&lt;/p&gt;

&lt;p&gt;&quot;One of the important points to highlight is that Google has no publicly announced plans to override the user’s configured DNS resolver as part of their implementation of DoH,&quot; Max Hunter, engineering director at the Electronic Frontier Foundation (EFF) wrote in an email. &quot;If Google did override the OS-configured resolver with their own, EFF would be very concerned about the potential for turnkey surveillance and censorship that level of DNS centralization would bring.&quot;&lt;/p&gt;
&lt;p&gt;“Google has no plans to centralize or change people’s DNS providers to Google by default. Any claim that we are trying to become the centralized encrypted DNS provider is inaccurate,&quot; a Google spokesperson told Motherboard in a statement.&lt;/p&gt;
&lt;p&gt;&quot;We're currently experimenting with new ways to enhance online privacy and security while maintaining existing content filtering and parental controls. Our proposal for DoH enables secure connections and does not change a user’s DNS, so all existing filters and controls remain intact. Furthermore, there is no change to how DNS providers work with law enforcement in accordance with court orders,&quot; the Google spokesperson added.&lt;/p&gt;
&lt;div class=&quot;article__media&quot; readability=&quot;7&quot;&gt;&lt;img src=&quot;data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=&quot; alt=&quot;comcast-lobbying-presentation-slide-2&quot; class=&quot;col-12-xs&quot; data-src=&quot;https://video-images.vice.com/_uncategorized/1571836014334-privacy.png&quot;/&gt;&lt;p&gt;A screenshot of the lobbying presentation. Image: Motherboard.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Even the maintainers of competing web browsers aren't buying Comcast's arguments.&lt;/p&gt;
&lt;p&gt;&quot;What this deck is attempting to do is take advantage of a lot of anti-Google sentiment that exists right now, build on top of that an inaccurate account of exactly what we are doing to stop that deployment,&quot; Erwin from Mozilla added.&lt;/p&gt;

&lt;p&gt;Mozilla's own plan for DoH differs somewhat to Google's. Erwin explained that Mozilla is in the process of rolling out DoH by default to a 5 percent slice of randomly selected users, with the plan to expand DoH across its user base. Mozilla is doing that in partnership with Cloudflare, which acts as the DNS resolver.&lt;/p&gt;
&lt;p&gt;&quot;The real one truthful point in this ISP lobbying effort is that DoH does represent a fundamental shift in the way the web works; and that's deliberate, on our part,&quot; Erwin said.&lt;/p&gt;
&lt;p&gt;Ellen Canale, director of corporate communications at Mozilla, wrote in an email, &quot;This is part of a pretty aggressive campaign we've seen from the ISPs to protect their control over DNS traffic and the tracking opportunities it provides them.&quot;&lt;/p&gt;
&lt;p&gt;Last month, multiple trade groups that represent ISPs' interests &lt;a href=&quot;https://www.ncta.com/sites/default/files/2019-09/Final%20DOH%20LETTER%209-19-19.pdf&quot; target=&quot;_blank&quot;&gt;wrote a letter to lawmakers&lt;/a&gt; urging them to call upon Google to not implement DoH. Hunter shared a copy of a letter EFF sent to Congress along with other organizations &lt;a href=&quot;https://www.eff.org/press/releases/eff-and-partners-urge-us-lawmakers-support-new-doh-protocol-more-secure-internet&quot; target=&quot;_blank&quot;&gt;in response to the trade bodies' letter&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&quot;Congress should support systemic adoption of DoH in order to close up one of the largest privacy gaps remaining on the Internet while furthering the cause of Internet freedom in many parts of the world in dire need of it,&quot; the EFF letter, also signed by Consumer Reports and the National Consumers League, reads.&lt;/p&gt;
&lt;p class=&quot;article__pull-quote&quot;&gt;&quot;The slides overall are extremely misleading and inaccurate, and frankly I would be somewhat embarrassed if my team had provided that slide deck to policy makers.&quot;&lt;/p&gt;

&lt;p&gt;Comcast, for its part, stressed it does not sell customers' browsing data.&lt;/p&gt;
&lt;p&gt;&quot;Where our Xfinity Internet customers go on the Internet is their business, not ours. We do not track the websites or apps our customers’ use through their broadband connections. Because we don’t track that information, we don’t use it to build a profile about our customers and have never sold that information to anyone,&quot; a spokesperson wrote in an emailed statement.&lt;/p&gt;
&lt;p&gt;&quot;We are supporters of encrypting DNS and want to make sure that it is implemented in a careful, collaborative manner for the benefit of Internet customers to ensure that important parental controls, cybersecurity protections and network security features are not broken in the process,&quot; the spokesperson said in a second statement. &quot;We believe that engagement by Google and Mozilla with other players in the Internet ecosystem would lead to a collaborative, industry-wide solution that protects everyone—just as has happened with other significant changes to Internet architecture. Any unilateral action that limits customer choice will not work.&quot;&lt;/p&gt;
&lt;p&gt;Of course, it's worth noting that, in 2017, &lt;a href=&quot;https://www.vice.com/en_us/article/538kqn/heres-the-data-republicans-just-allowed-isps-to-sell-without-your-consent&quot; target=&quot;_blank&quot;&gt;ISPs lobbied Congress&lt;/a&gt; to make it possible to sell your browsing data without your consent.&lt;/p&gt;
&lt;p&gt;&quot;Either, they are doing something with this data today that is not transparent to users, or they are working incredibly hard to protect a future business model,&quot; Erwin said.&lt;/p&gt;
&lt;p&gt;Motherboard has embedded the full lobby slide deck below.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;Subscribe to our new cybersecurity podcast, &lt;a href=&quot;https://itunes.apple.com/gb/podcast/cyber/id1441708044?mt=2&quot; target=&quot;_blank&quot;&gt;CYBER&lt;/a&gt;.&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
</description>
<pubDate>Wed, 23 Oct 2019 17:26:02 +0000</pubDate>
<dc:creator>president</dc:creator>
<og:type>article</og:type>
<og:title>Comcast Is Lobbying Against Encryption That Could Prevent it From Learning Your Browsing History</og:title>
<og:image>https://video-images.vice.com/articles/5db04bcf6593cd008dbf9128/lede/1571835232406-comcast-office.jpeg?crop=1xw:0.7983xh;0xw,0.0938xh&amp;resize=1200:*</og:image>
<og:url>https://www.vice.com/en_us/article/9kembz/comcast-lobbying-against-doh-dns-over-https-encryption-browsing-data</og:url>
<og:description>Motherboard has obtained a leaked presentation internet service providers are using to try and lobby lawmakers against a form of encrypted browsing data.</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.vice.com/en_us/article/9kembz/comcast-lobbying-against-doh-dns-over-https-encryption-browsing-data</dc:identifier>
</item>
<item>
<title>Quantum supremacy: the gloves are off</title>
<link>https://www.scottaaronson.com/blog/?p=4372</link>
<guid isPermaLink="true" >https://www.scottaaronson.com/blog/?p=4372</guid>
<description>&lt;p&gt;&lt;strong&gt;Links:&lt;/strong&gt;&lt;br /&gt;&lt;a href=&quot;https://www.nature.com/articles/s41586-019-1666-5&quot;&gt;Google paper in&lt;/a&gt; &lt;em&gt;&lt;a href=&quot;https://www.nature.com/articles/s41586-019-1666-5&quot;&gt;Nature&lt;/a&gt;&lt;/em&gt;&lt;br /&gt;&lt;em&gt;&lt;a href=&quot;https://www.nytimes.com/2019/10/23/technology/quantum-computing-google.html?action=click&amp;amp;module=Top%20Stories&amp;amp;pgtype=Homepage&quot;&gt;New York Times&lt;/a&gt;&lt;/em&gt; &lt;a href=&quot;https://www.nytimes.com/2019/10/23/technology/quantum-computing-google.html?action=click&amp;amp;module=Top%20Stories&amp;amp;pgtype=Homepage&quot;&gt;article&lt;/a&gt;&lt;br /&gt;IBM &lt;a href=&quot;https://arxiv.org/abs/1910.09534&quot;&gt;paper&lt;/a&gt; and &lt;a href=&quot;https://www.ibm.com/blogs/research/2019/10/on-quantum-supremacy/&quot;&gt;blog post&lt;/a&gt; responding to Google’s announcement&lt;/p&gt;
&lt;p&gt;When Google’s quantum supremacy paper leaked a month ago—not through Google’s error, but through NASA’s—I had a hard time figuring out how to cover the news here. I had to say &lt;em&gt;something&lt;/em&gt;; on the other hand, I wanted to avoid any detailed technical analysis of the leaked paper, because I was acutely aware that my colleagues at Google were still barred by &lt;em&gt;Nature&lt;/em&gt;‘s embargo rules from publicly responding to anything I or others said. (I was also one of the reviewers for the &lt;em&gt;Nature&lt;/em&gt; paper, which put additional obligations on me.)&lt;/p&gt;
&lt;p&gt;I ended up with &lt;a href=&quot;https://www.scottaaronson.com/blog/?p=4317&quot;&gt;Scott’s Supreme Quantum Supremacy FAQ&lt;/a&gt;, which tried to toe this impossible line by “answering general questions about quantum supremacy, and the consequences of its still-hypothetical achievement, in light of the leak.” It wasn’t an ideal solution—for one thing, because while I still regard Google’s sampling experiment as a historic milestone for our whole field, there &lt;em&gt;are&lt;/em&gt; some technical issues, aspects that subsequent experiments (hopefully coming soon) will need to improve. Alas, the ground rules of my FAQ forced me to avoid such issues, which caused some readers to conclude mistakenly that I didn’t think there were any.&lt;/p&gt;
&lt;p&gt;Now, though, the Google paper has &lt;a href=&quot;https://www.nature.com/articles/s41586-019-1666-5&quot;&gt;come out as&lt;/a&gt; &lt;em&gt;&lt;a href=&quot;https://www.nature.com/articles/s41586-019-1666-5&quot;&gt;Nature&lt;/a&gt;&lt;/em&gt;&lt;a href=&quot;https://www.nature.com/articles/s41586-019-1666-5&quot;&gt;‘s cover story&lt;/a&gt;, at the same time as there have been new technical developments—most obviously, the &lt;a href=&quot;https://arxiv.org/abs/1910.09534&quot;&gt;paper from IBM&lt;/a&gt; (see also their &lt;a href=&quot;https://www.ibm.com/blogs/research/2019/10/on-quantum-supremacy/&quot;&gt;blog post&lt;/a&gt;) saying that they could simulate the Google experiment in 2.5 days, rather than the 10,000 years that Google had estimated.&lt;/p&gt;
&lt;p&gt;(Yesterday I was deluged by emails asking me “whether I’d seen” IBM’s paper. As a science blogger, I try to respond to stuff pretty quickly when necessary, but I don’t—can’t—respond in Twitter time.)&lt;/p&gt;
&lt;p&gt;So now the gloves are off. No more embargo. Time to address the technical stuff under the hood—which is the purpose of this post.&lt;/p&gt;
&lt;p&gt;I’m going to assume, from this point on, that you already understand the basics of sampling-based quantum supremacy experiments, and that I don’t need to correct beginner-level misconceptions about what the term “quantum supremacy” does and doesn’t mean (no, it doesn’t mean scalability, fault-tolerance, useful applications, breaking public-key crypto, etc. etc.). If this is not the case, you could start (e.g.) with &lt;a href=&quot;https://www.scottaaronson.com/blog/?p=4317&quot;&gt;my FAQ&lt;/a&gt;, or with John Preskill’s &lt;a href=&quot;https://www.quantamagazine.org/john-preskill-explains-quantum-supremacy-20191002/&quot;&gt;excellent&lt;/a&gt; &lt;em&gt;&lt;a href=&quot;https://www.quantamagazine.org/john-preskill-explains-quantum-supremacy-20191002/&quot;&gt;Quanta&lt;/a&gt;&lt;/em&gt; &lt;a href=&quot;https://www.quantamagazine.org/john-preskill-explains-quantum-supremacy-20191002/&quot;&gt;commentary&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Without further ado:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;(1) So what about that IBM thing? &lt;em&gt;Are&lt;/em&gt; random quantum circuits easy to simulate classically?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;OK, so let’s carefully spell out what the IBM paper says. They argue that, by commandeering the full attention of &lt;a href=&quot;https://en.wikipedia.org/wiki/Summit_(supercomputer)&quot;&gt;Summit&lt;/a&gt; at Oak Ridge National Lab, the most powerful supercomputer that currently exists on Earth—one that fills the area of two basketball courts, and that (crucially) has &lt;strong&gt;250 petabytes&lt;/strong&gt; of hard disk space—one could just barely store the entire quantum state vector of Google’s 53-qubit Sycamore chip in hard disk.  And once one had done that, one could simulate the chip in ~2.5 days, more-or-less just by updating the entire state vector by brute force, rather than the 10,000 years that Google had estimated on the basis of my and Lijie Chen’s &lt;a href=&quot;https://arxiv.org/abs/1612.05903&quot;&gt;“Schrödinger-Feynman algorithm”&lt;/a&gt; (which can get by with less memory).&lt;/p&gt;
&lt;p&gt;The IBM group understandably hasn’t actually done this yet—even though IBM set it up, the world’s #1 supercomputer isn’t just sitting around waiting for jobs! But I see little reason to doubt that their analysis is basically right. I don’t know why the Google team didn’t consider how such near-astronomical hard disk space would change their calculations, probably they wish they had.&lt;/p&gt;
&lt;p&gt;I find this to be much, &lt;em&gt;much&lt;/em&gt; better than IBM’s initial reaction to the Google leak, which was simply to &lt;a href=&quot;https://www.ft.com/content/cede11e0-dd51-11e9-9743-db5a370481bc&quot;&gt;dismiss&lt;/a&gt; the importance of quantum supremacy as a milestone. Designing better classical simulations is precisely how IBM and others &lt;em&gt;should&lt;/em&gt; respond to Google’s announcement, and how I said a month ago that I hoped they &lt;em&gt;would&lt;/em&gt; respond. If we set aside the pass-the-popcorn PR war (or even if we don’t), this is how science progresses.&lt;/p&gt;
&lt;p&gt;But does IBM’s analysis mean that “quantum supremacy” hasn’t been achieved? No, it doesn’t—at least, not under any definition of “quantum supremacy” that I’ve ever used. The Sycamore chip took about 3 minutes to generate the ~5 million samples that were needed to pass the “linear cross-entropy benchmark”—the statistical test that Google applies to the outputs of its device. Three minutes versus 2.5 days is still a quantum speedup by a factor of 1200. More relevant, I think, is to compare the number of “elementary operations.” Let’s generously count a FLOP (floating-point operation) as the equivalent of a quantum gate. Then by my estimate, we’re comparing ~5×10&lt;sup&gt;9&lt;/sup&gt; quantum gates against ~2×10&lt;sup&gt;20&lt;/sup&gt; FLOPs—a quantum speedup by a factor of ~40 billion.&lt;/p&gt;
&lt;p&gt;For me, though, the broader point is that neither party here—certainly not IBM—denies that the top-supercomputers-on-the-planet-level difficulty of classically simulating Google’s 53-qubit programmable chip really &lt;em&gt;is&lt;/em&gt; coming from the exponential character of the quantum states in that chip, &lt;em&gt;and nothing else&lt;/em&gt;. That’s what makes this back-and-forth fundamentally different from the previous one between D-Wave and the people who sought to simulate &lt;em&gt;its&lt;/em&gt; devices classically. The skeptics, like me, didn’t much care what speedup over classical benchmarks there was or wasn’t today: we cared about the &lt;em&gt;increase&lt;/em&gt; in the speedup as D-Wave upgraded its hardware, and the trouble was we never saw a convincing case that there would be one. I’m a theoretical computer scientist, and this is what I believe: that after the constant factors have come and gone, what remains are asymptotic growth rates.&lt;/p&gt;
&lt;p&gt;In the present case, while increasing the circuit depth won’t evade IBM’s “store everything to hard disk” strategy, increasing the number of qubits will. If Google, or someone else, upgraded from 53 to 55 qubits, that would apparently already be enough to exceed Summit’s 250-petabyte storage capacity. At 60 qubits, you’d need 33 Summits. At 70 qubits, enough Summits to fill a city … you get the idea.&lt;/p&gt;
&lt;p&gt;From the beginning, it was clear that quantum supremacy would not be a milestone like the moon landing—something that’s achieved in a moment, and is then clear to everyone for all time. It would be more like eradicating measles: it could be achieved, then temporarily unachieved, then re-achieved. For by definition, quantum supremacy all about &lt;em&gt;beating&lt;/em&gt; something—namely, classical computation—and the latter can, at least for a while, fight back.&lt;/p&gt;
&lt;p&gt;As Boaz Barak put it to me, the current contest between IBM and Google is analogous to &lt;a href=&quot;https://en.wikipedia.org/wiki/Deep_Blue_versus_Garry_Kasparov&quot;&gt;Kasparov versus Deep Blue&lt;/a&gt;—&lt;em&gt;except with the world-historic irony that IBM is playing the role of Kasparov!&lt;/em&gt; In other words, Kasparov can put up a heroic struggle, during a “transitional period” that lasts a year or two, but the fundamentals of the situation are that he’s toast. If Kasparov had narrowly beaten Deep Blue in 1997, rather than narrowly losing, the whole public narrative would likely have been different (“humanity triumphs over computers after all!”). Yet as Kasparov himself well knew, the very fact that the contest was &lt;em&gt;close&lt;/em&gt; meant that, either way, human dominance was ending.&lt;/p&gt;
&lt;p&gt;Let me leave the last word on this to friend-of-the-blog Greg Kuperberg, who graciously gave me permission to quote his comments about the IBM paper.&lt;/p&gt;
&lt;blockquote class=&quot;wp-block-quote&quot; readability=&quot;27&quot;&gt;
&lt;p&gt;I’m not entirely sure how embarrassed Google should feel that they overlooked this.   I’m sure that they would have been happier to anticipate it, and happier still if they had put more qubits on their chip to defeat it.   However, it doesn’t change their real achievement.&lt;/p&gt;
&lt;p&gt;I respect the IBM paper, even if the press along with it seems more grouchy than necessary.   I tend to believe them that the Google team did not explore all avenues when they said that their 53 qubits aren’t classically simulable.   But if this is the best rebuttal, then you should still consider how much Google and IBM still agree on this as a proof-of-concept of QC.   This is still quantum David vs classical Goliath, in the extreme.   53 qubits is in some ways still just 53 bits, only enhanced with quantum randomness.  To answer those 53 qubits, IBM would still need entire days of computer time with the world’s fastest supercomputer, a 200-petaflop machine with hundreds of thousands of processing cores and trillions of high-speed transistors.   If we can confirm that the Google chip actually meets spec, but we need this much computer power to do it, then to me that’s about as convincing as a larger quantum supremacy demonstration that humanity can no longer confirm at all.&lt;/p&gt;
&lt;p&gt;Honestly, I’m happy to give both Google and IBM credit for helping the field of QC, even if it is the result of a strange dispute.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I should mention that, even before IBM’s announcement, Johnnie Gray, a postdoc at Imperial College, gave a talk (&lt;a href=&quot;https://www.caltech.edu/campus-life-events/master-calendar/iqi-weekly-seminar-2019-10-01&quot;&gt;abstract here&lt;/a&gt;) at Caltech’s Institute for Quantum Information with a proposal for a &lt;em&gt;different&lt;/em&gt; faster way to classically simulate quantum circuits like Google’s—in this case, by doing tensor network contraction more cleverly. Unlike both IBM’s proposed brute-force simulation, and the Schrödinger-Feynman algorithm that Google implemented, Gray’s algorithm (as far as we know now) would need to be repeated k times if you wanted k independent samples from the hard distribution. Partly because of this issue, Gray’s approach doesn’t currently look competitive for simulating thousands or millions of samples, but we’ll need to watch it and see what happens.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;(2) Direct versus indirect verification.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The discussion of IBM’s proposed simulation brings us to a curious aspect of the Google paper—one that was already apparent when &lt;em&gt;Nature&lt;/em&gt; sent me the paper for review back in August. Namely, Google took its supremacy experiments well past the point &lt;em&gt;where even they themselves knew how to verify the results&lt;/em&gt;, by any classical computation that they knew how to perform feasibly (say, in less than 10,000 years).&lt;/p&gt;
&lt;p&gt;So you might reasonably ask: if they couldn’t even verify the results, then how did they get to claim quantum speedups from those experiments? Well, they resorted to various gambits, which basically involved estimating the fidelity on quantum circuits that looked almost the same as the hard circuits, but happened to be easier to simulate classically, and then making the (totally plausible) assumption that that fidelity would be maintained on the hard circuits. Interestingly, they also cached their outputs and put them online (as part of the supplementary material to their &lt;em&gt;Nature&lt;/em&gt; paper), in case it became feasible to verify them in the future.&lt;/p&gt;
&lt;p&gt;Maybe you can now see where this is going. From Google’s perspective, IBM’s rainstorm comes with a big silver lining. Namely, by using Summit, hopefully it will now be possible to verify Google’s hardest (53-qubit and depth-20) sampling computations directly! This should provide an excellent test, since not even the Google group themselves would’ve known how to cheat and bias the results had they wanted to.&lt;/p&gt;
&lt;p&gt;This whole episode has demonstrated the importance, when doing a sampling-based quantum supremacy experiment, of &lt;em&gt;going deep into the regime where you can no longer classically verify the outputs&lt;/em&gt;, as weird as that sounds. Namely, you need to leave yourself a margin, in the likely event that the classical algorithms improve!&lt;/p&gt;
&lt;p&gt;Having said that, I don’t mind revealing at this point that the lack of direct verification of the outputs, for the largest reported speedups, was my single biggest complaint when I reviewed Google’s &lt;em&gt;Nature&lt;/em&gt; submission. It was because of my review that they added a paragraph explicitly pointing out that they &lt;em&gt;did&lt;/em&gt; do direct verification, using something like a million cores running for something like a month, for a smaller quantum speedup (merely a million times faster than a Schrödinger-Feynman simulation running on a million cores, rather than two billion times faster).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;(3) The asymptotic hardness of spoofing Google’s benchmark.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;OK, but if Google thought that spoofing its test would take 10,000 years, using the best known classical algorithms running on the world’s top supercomputers, and it turns out instead that it could probably be done in more like 2.5 days, then how much else could’ve been missed? Will we find out next that Google’s benchmark can be classically spoofed in mere milliseconds?&lt;/p&gt;
&lt;p&gt;Well, no one can rule that out, but we do have some reasons to think that it’s unlikely—and crucially, that even if it turned out to be true, one would just have to add 10 or 20 or 30 more qubits to make it no longer true. (We can’t be more definitive than that? Aye, such are the perils of life at a technological inflection point—and of computational complexity itself.)&lt;/p&gt;
&lt;p&gt;The key point to understand here is that we really are talking about simulating a &lt;em&gt;random&lt;/em&gt; quantum circuit, with no particular structure whatsoever. While such problems &lt;em&gt;might&lt;/em&gt; have a theoretically efficient classical algorithm—i.e., one that runs in time polynomial in the number of qubits—I’d personally be much less surprised if you told me there was a polynomial-time classical algorithm for factoring. In the universe where amplitudes of random quantum circuits turn out to be efficiently computable—well, you might as well just tell me that P=PSPACE and be done with it.&lt;/p&gt;
&lt;p&gt;Crucially, if you look at IBM’s approach to simulating quantum circuits classically, &lt;em&gt;and&lt;/em&gt; Johnnie Gray’s approach, &lt;em&gt;and&lt;/em&gt; Google’s approach, they could all be described as different flavors of “brute force.” That is, they all use extremely clever tricks to parallelize, shave off constant factors, make the best use of available memory, etc., but none involves any deep new mathematical insight that could roust BPP and BQP and the other complexity gods from their heavenly slumber. More concretely, none of these approaches seem to have any hope of “breaching the 2&lt;sup&gt;n&lt;/sup&gt; barrier,” where n is the number of qubits in the quantum circuit to be simulated (assuming that the circuit depth is reasonably large). Mostly, they’re just trying to get down to that barrier.&lt;/p&gt;
&lt;p&gt;Ah, but at the end of the day, we only believe that Google’s Sycamore chip is solving a classically hard problem because of the statistical test that Google applies to its outputs: the so-called “Linear Cross-Entropy Benchmark,” which I described in Q3 of my &lt;a href=&quot;https://www.scottaaronson.com/blog/?p=4317&quot;&gt;FAQ&lt;/a&gt;. And even if we grant that calculating the output probabilities for a random quantum circuit is almost certainly classically hard, and sampling the output distribution of a random quantum circuit is almost certainly classically hard—still, couldn’t &lt;em&gt;spoofing Google’s benchmark&lt;/em&gt; be classically easy?&lt;/p&gt;
&lt;p&gt;This last question is where complexity theory can contribute something to the story. A couple weeks ago, UT undergraduate Sam Gunn and I adapted the hardness analysis from my and Lijie Chen’s 2017 paper &lt;a href=&quot;https://arxiv.org/abs/1612.05903&quot;&gt;“Complexity-Theoretic Foundations of Quantum Supremacy Experiments,”&lt;/a&gt; to talk directly about the classical hardness of spoofing the Linear Cross-Entropy benchmark. Our short paper about this should be on the arXiv later this week (or early next week, given that there are no arXiv updates on Friday or Saturday nights).&lt;/p&gt;
&lt;p&gt;Briefly, Sam and I show that if you had a sub-2&lt;sup&gt;n&lt;/sup&gt; classical algorithm to spoof the Linear Cross-Entropy benchmark, then you’d also have a sub-2&lt;sup&gt;n&lt;/sup&gt; classical algorithm that, given as input a random quantum circuit, could estimate a &lt;em&gt;specific&lt;/em&gt; output probability (for example, that of the all-0 string) with variance at least &lt;em&gt;slightly&lt;/em&gt; (say, Ω(2&lt;sup&gt;-3n&lt;/sup&gt;)) better than that of the trivial estimator that just always guesses 2&lt;sup&gt;-n&lt;/sup&gt;. Or in other words: we show that spoofing Google’s benchmark is no easier than the general problem of nontrivially estimating amplitudes in random quantum circuits. Furthermore, this result automatically generalizes to the case of noisy circuits: all that the noise affects is the threshold for the Linear Cross-Entropy benchmark, and thus (indirectly) the number of samples one needs to take with the QC. Our result helps to explain why, indeed, neither IBM nor Johnnie Gray nor anyone else suggested any attack that’s specific to Google’s Linear Cross-Entropy benchmark: they all simply attack the general problem of calculating the final amplitudes.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;(4) Why use Linear Cross-Entropy at all?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;In the comments of my FAQ, some people wondered why Google chose the Linear Cross-Entropy benchmark specifically—especially since they’d used a different benchmark (&lt;em&gt;multiplicative&lt;/em&gt; cross-entropy, which unlike the linear version actually &lt;em&gt;is&lt;/em&gt; a cross-entropy) in their earlier papers. I asked John Martinis this question, and his answer was simply that linear cross-entropy had the lowest variance of any estimator they tried. Since I &lt;em&gt;also&lt;/em&gt; like linear cross-entropy—it turns out, for example, to be convenient for the analysis of my certified randomness protocol—I’m 100% happy with their choice. Having said that, there are many other choices of benchmark that would’ve also worked fine, and with roughly the same level of theoretical justification.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;(5) Controlled-Z versus iSWAP gates.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Another interesting detail from the Google paper is that, in their previous hardware, they could implement a particular 2-qubit gate called the Controlled-Z. For their quantum supremacy demonstration, on the other hand, they modified their hardware to implement a different 2-qubit gate called the &lt;s&gt;iSWAP&lt;/s&gt; some weird combination of iSWAP and Controlled-Z; see the comments section for more. Now, this other gate has no known advantages over the Controlled-Z, for any applications like quantum simulation or Shor’s algorithm or Grover search. Why then did Google make the switch? Simply because, with certain classical simulation methods that they’d been considering, the simulation’s running time grows like 4 to the power of the number of these other gates, but only like 2 to the power of the number of Controlled-Z gates! In other words, they made this engineering choice purely and entirely to make a classical simulation of their device sweat more. This seems totally fine and entirely within the rules to me. (Alas, this choice has no effect on a proposed simulation method like IBM’s.)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;(6) Gil Kalai’s objections.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Over the past month, &lt;em&gt;Shtetl-Optimized&lt;/em&gt; regular and quantum computing skeptic Gil Kalai has been posting one objection to the Google experiment after another on his &lt;a href=&quot;https://gilkalai.wordpress.com/&quot;&gt;blog&lt;/a&gt;. Unlike the IBM group and many of Google’s other critics, Gil completely accepts the centrality of quantum supremacy as a goal. Indeed, he’s firmly predicted for years that quantum supremacy could never be achieved for fundamental reasons—and he agrees that the Google result, if upheld, would refute his worldview. Gil also has no dispute with the exponential classical hardness of the problem that Google is solving.&lt;/p&gt;
&lt;p&gt;Instead, Gil—if we’re talking not about &lt;a href=&quot;https://en.wikipedia.org/wiki/Straw_man#Steelmanning&quot;&gt;“steelmanning”&lt;/a&gt; his views, but about what he himself actually said—has taken the position that the Google experiment must’ve been done wrong and will need to be retracted. He’s offered varying grounds for this. First he said that Google never computed the full histogram of probabilities with a smaller number of qubits (for which such an experiment is feasible), which would be an important sanity check. Except, it turns out they &lt;em&gt;did&lt;/em&gt; do that, and it’s in their &lt;a href=&quot;https://arxiv.org/abs/1709.06678&quot;&gt;2018 &lt;em&gt;Science&lt;/em&gt; paper&lt;/a&gt;. Next he said that the experiment is invalid because the qubits have to be calibrated in a way that depends on the specific circuit to be applied. Except, this too turns out to be false: John Martinis explicitly confirmed for me that once the qubits are calibrated, you can run any circuit on them that you want. In summary, unlike the objections of the IBM group, so far I’ve found Gil’s objections to be utterly devoid of scientific interest or merit.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;Update #1:&lt;/span&gt;&lt;/strong&gt; Alas, I’ll have limited availability today for answering comments, since we’ll be grading the midterm exam for my Intro to Quantum Information Science course! I’ll try to handle the backlog tomorrow (Thursday).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;Update #2:&lt;/span&gt;&lt;/strong&gt; Aaannd … timed to coincide with the Google paper, last night the group of Jianwei Pan and Chaoyang Lu put up a &lt;a href=&quot;https://arxiv.org/abs/1910.09930&quot;&gt;preprint on the arXiv&lt;/a&gt; reporting a BosonSampling experiment with 20 photons (the previous record had been 6 photons). At this stage of the quantum supremacy race, many had of course written off BosonSampling—or said that its importance was mostly historical, in that it inspired Google’s random circuit sampling effort.  I’m thrilled to see BosonSampling itself take such a big leap; hopefully, this will eventually lead to a demonstration that BosonSampling was (is) a viable pathway to quantum supremacy as well.  And right now, with fault-tolerance still having been demonstrated in &lt;em&gt;zero&lt;/em&gt; platforms, we need all the viable pathways we can get.  What an exciting day for the field.&lt;/p&gt;


&lt;p class=&quot;postmetadata alt&quot;&gt;&lt;small&gt;This entry was posted on Wednesday, October 23rd, 2019 at 10:50 am and is filed under &lt;a href=&quot;https://www.scottaaronson.com/blog/?cat=31&quot; rel=&quot;category&quot;&gt;Announcements&lt;/a&gt;, &lt;a href=&quot;https://www.scottaaronson.com/blog/?cat=33&quot; rel=&quot;category&quot;&gt;Bell's Theorem? But a Flesh Wound!&lt;/a&gt;, &lt;a href=&quot;https://www.scottaaronson.com/blog/?cat=5&quot; rel=&quot;category&quot;&gt;Complexity&lt;/a&gt;, &lt;a href=&quot;https://www.scottaaronson.com/blog/?cat=4&quot; rel=&quot;category&quot;&gt;Quantum&lt;/a&gt;. You can follow any responses to this entry through the &lt;a href=&quot;https://www.scottaaronson.com/blog/?feed=rss2&amp;amp;p=4372&quot;&gt;RSS 2.0&lt;/a&gt; feed. You can &lt;a href=&quot;https://www.scottaaronson.com/blog/?p=4372#respond&quot;&gt;leave a response&lt;/a&gt;, or &lt;a href=&quot;https://www.scottaaronson.com/blog/wp-trackback.php?p=4372&quot; rel=&quot;trackback&quot;&gt;trackback&lt;/a&gt; from your own site.&lt;/small&gt;&lt;/p&gt;
</description>
<pubDate>Wed, 23 Oct 2019 15:55:33 +0000</pubDate>
<dc:creator>furcyd</dc:creator>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.scottaaronson.com/blog/?p=4372</dc:identifier>
</item>
<item>
<title>Google’s Play Store gives a worse age rating to Fleksy, a Gboard rival</title>
<link>https://techcrunch.com/2019/10/23/googles-play-store-is-giving-an-age-rating-finger-to-fleksy-a-gboard-rival/</link>
<guid isPermaLink="true" >https://techcrunch.com/2019/10/23/googles-play-store-is-giving-an-age-rating-finger-to-fleksy-a-gboard-rival/</guid>
<description>&lt;p id=&quot;speakable-summary&quot;&gt;Platform power is a helluva a drug. Do a search on &lt;a class=&quot;crunchbase-link&quot; href=&quot;https://crunchbase.com/organization/google&quot; target=&quot;_blank&quot; data-type=&quot;organization&quot; data-entity=&quot;google&quot;&gt;Google’s&lt;/a&gt; Play Store in Europe and you’ll find the company’s own &lt;a href=&quot;https://play.google.com/store/apps/details?id=com.google.android.inputmethod.latin&amp;amp;hl=en&quot;&gt;Gboard app&lt;/a&gt; has an age rating of &lt;a href=&quot;https://pegi.info/what-do-the-labels-mean&quot;&gt;PEGI 3&lt;/a&gt; — aka the pan-European game information labelling system which signifies content is suitable for all age groups.&lt;/p&gt;
&lt;p&gt;PEGI 3 means it may still contain a little cartoon violence. Say, for example, an emoji fist or middle finger.&lt;/p&gt;
&lt;p&gt;Now do a search on &lt;a class=&quot;crunchbase-link&quot; href=&quot;https://crunchbase.com/organization/play-5b78&quot; target=&quot;_blank&quot; data-type=&quot;organization&quot; data-entity=&quot;play-5b78&quot;&gt;Play&lt;/a&gt; for the rival &lt;a href=&quot;https://play.google.com/store/apps/details?id=com.syntellia.fleksy.keyboard&amp;amp;hl=en&quot;&gt;Fleksy keyboard app&lt;/a&gt; and you’ll find it has a PEGI 12 age rating. This label signifies the rated content can contain slightly more graphic fantasy violence and mild bad language.&lt;/p&gt;
&lt;p&gt;The discrepancy in labelling suggests there’s a material difference between Gboard and Fleksy — in terms of the content you might encounter. Yet both are pretty similar keyboard apps — with features like predictive emoji and baked in GIFs. Gboard also lets you create &lt;a href=&quot;https://techcrunch.com/2018/10/30/googles-gboard-now-lets-you-create-a-set-of-emoji-that-look-like-you/&quot;&gt;custom emoji&lt;/a&gt;. While Fleksy puts &lt;a href=&quot;https://techcrunch.com/2019/04/03/fleksys-ai-keyboard-is-getting-a-store-to-put-mini-apps-at-chatters-fingertips/&quot;&gt;mini apps at your fingertips&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;A more major difference is that Gboard is made by Play Store owner and platform controller, Google. Whereas Fleksy is an indie keyboard that &lt;a href=&quot;https://techcrunch.com/2017/07/25/fleksy-keyboard-to-get-major-reboot-under-thingthing-dev-team/&quot;&gt;since 2017&lt;/a&gt; has been developed by ThingThing, a &lt;a href=&quot;https://techcrunch.com/2015/09/04/thingthing-keyboard/&quot;&gt;startup&lt;/a&gt; based out of Spain.&lt;/p&gt;
&lt;p&gt;Fleksy’s keyboard didn’t used to carry a 12+ age rating — this is a new development. Not based on its content changing but based on Google enforcing its Play Store policies differently.&lt;/p&gt;
&lt;p&gt;The Fleksy app, which has been on the Play Store for around eight years at this point — and per Play Store install stats has had more than 5M downloads to date — was PEGI 3 rating until earlier this month. But then Google stepped in and forced the team to up the rating to 12. Which means the Play Store description for Fleksy in Europe now rates it PEGI 12 and specifies it contains “Mild Swearing”.&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;size-large wp-image-1901304 aligncenter&quot; title=&quot;Screenshot 2019-10-23 at 12.39.45&quot; src=&quot;https://techcrunch.com/wp-content/uploads/2019/10/Screenshot-2019-10-23-at-12.39.45.png?w=680&quot; alt=&quot;Screenshot 2019 10 23 at 12.39.45&quot; width=&quot;680&quot; height=&quot;248&quot; srcset=&quot;https://techcrunch.com/wp-content/uploads/2019/10/Screenshot-2019-10-23-at-12.39.45.png 1438w, https://techcrunch.com/wp-content/uploads/2019/10/Screenshot-2019-10-23-at-12.39.45.png?resize=150,55 150w, https://techcrunch.com/wp-content/uploads/2019/10/Screenshot-2019-10-23-at-12.39.45.png?resize=300,109 300w, https://techcrunch.com/wp-content/uploads/2019/10/Screenshot-2019-10-23-at-12.39.45.png?resize=768,280 768w, https://techcrunch.com/wp-content/uploads/2019/10/Screenshot-2019-10-23-at-12.39.45.png?resize=680,248 680w, https://techcrunch.com/wp-content/uploads/2019/10/Screenshot-2019-10-23-at-12.39.45.png?resize=50,18 50w&quot; sizes=&quot;(max-width: 680px) 100vw, 680px&quot;/&gt;&lt;/p&gt;
&lt;p&gt;The Play store’s system for age ratings requires developers to fill in a &lt;a href=&quot;https://support.google.com/googleplay/android-developer/answer/188189?hl=en&quot;&gt;content ratings form&lt;/a&gt;, responding to a series of questions about their app’s content, in order to obtain a suggested rating.&lt;/p&gt;
&lt;p&gt;Fleksy’s team have done so over the years — and come up with the PEGI 3 rating without issue. But this month they found they were being issued the questionnaire multiple times and then that their latest app update was blocked without explanation — meaning they had to reach out to Play Developer Support to ask what was going wrong.&lt;/p&gt;
&lt;p&gt;After some email back and forth with support staff they were told that the app contained age inappropriate emoji content. Here’s what Google wrote:&lt;/p&gt;
&lt;blockquote readability=&quot;14&quot;&gt;
&lt;p&gt;During review, we found that the content rating is not accurate for your app… Content ratings are used to inform consumers, especially parents, of potentially objectionable content that exists within an app.&lt;/p&gt;
&lt;p&gt;For example, we found that your app contains content (e.g. emoji) that is not appropriate for all ages. Please refer to the attached screenshot.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;In the attached screenshot Google’s staff fingered the middle finger emoji as the reason for blocking the update:&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;vertical size-large wp-image-1901290 aligncenter&quot; title=&quot;Fleksy Play review emoji violation&quot; src=&quot;https://techcrunch.com/wp-content/uploads/2019/10/C398DA5E-4359-4C80-BBDF-9B82CCE0837E.png?w=313&quot; alt=&quot;Fleksy Play review emoji violation&quot; width=&quot;313&quot; height=&quot;640&quot; srcset=&quot;https://techcrunch.com/wp-content/uploads/2019/10/C398DA5E-4359-4C80-BBDF-9B82CCE0837E.png 313w, https://techcrunch.com/wp-content/uploads/2019/10/C398DA5E-4359-4C80-BBDF-9B82CCE0837E.png?resize=73,150 73w, https://techcrunch.com/wp-content/uploads/2019/10/C398DA5E-4359-4C80-BBDF-9B82CCE0837E.png?resize=147,300 147w, https://techcrunch.com/wp-content/uploads/2019/10/C398DA5E-4359-4C80-BBDF-9B82CCE0837E.png?resize=24,50 24w&quot; sizes=&quot;(max-width: 313px) 100vw, 313px&quot;/&gt;&lt;/p&gt;

&lt;p&gt;“We never thought a simple emoji is meant to be 12+,” ThingThing CEO Olivier Plante tells us.&lt;/p&gt;
&lt;p&gt;With their update rejected the team was forced to raise the rating of Fleksy to PEGI 12 — just to get their update unblocked so they could push out a round of bug fixes for the app.&lt;/p&gt;
&lt;p&gt;That’s not the end of the saga, though. Google’s Play Store team is &lt;em&gt;still&lt;/em&gt; not happy with the regional age rating for Fleksy — and wants to push the rating even higher — claiming, in a subsequent email, that “your app contains mature content (e.g. emoji) and should have higher rating”.&lt;/p&gt;
&lt;p&gt;Now, to be crystal clear, Google’s own Gboard app also contains the middle finger emoji. We are 100% sure of this because we double-checked…&lt;/p&gt;
&lt;div id=&quot;attachment_1901300&quot; class=&quot;wp-caption aligncenter&quot; readability=&quot;34&quot;&gt;&lt;img aria-describedby=&quot;caption-attachment-1901300&quot; class=&quot;wp-image-1901300 size-large&quot; title=&quot;Gboard finger&quot; src=&quot;https://techcrunch.com/wp-content/uploads/2019/10/Gboard-1-1.jpg?w=680&quot; alt=&quot;Gboard finger&quot; width=&quot;680&quot; height=&quot;510&quot; srcset=&quot;https://techcrunch.com/wp-content/uploads/2019/10/Gboard-1-1.jpg 4032w, https://techcrunch.com/wp-content/uploads/2019/10/Gboard-1-1.jpg?resize=150,113 150w, https://techcrunch.com/wp-content/uploads/2019/10/Gboard-1-1.jpg?resize=300,225 300w, https://techcrunch.com/wp-content/uploads/2019/10/Gboard-1-1.jpg?resize=768,576 768w, https://techcrunch.com/wp-content/uploads/2019/10/Gboard-1-1.jpg?resize=680,510 680w, https://techcrunch.com/wp-content/uploads/2019/10/Gboard-1-1.jpg?resize=50,38 50w&quot; sizes=&quot;(max-width: 680px) 100vw, 680px&quot;/&gt;&lt;p id=&quot;caption-attachment-1901300&quot; class=&quot;wp-caption-text&quot;&gt;Emojis available on Google’s Gboard keyboard, including the ‘screw you’ middle finger. Photo credit: Romain Dillet/TechCrunch&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;This is not surprising. Pretty much any smartphone keyboard — native or add-on — would contain this symbol because it’s a totally standard emoji.&lt;/p&gt;
&lt;p&gt;But when Plante pointed out to Google that the middle finger emoji can be found in both Fleksy’s and Gboard’s keyboards — and asked them to drop Fleksy’s rating back to PEGI 3 like Gboard — the Play team did not respond.&lt;/p&gt;
&lt;p&gt;A PEGI 16 rating means the depiction of violence (or sexual activity) “reaches a stage that looks the same as would be expected in real life”, per &lt;a href=&quot;https://pegi.info/what-do-the-labels-mean&quot;&gt;official guidance on the labels&lt;/a&gt;, while the use of bad language can be “more extreme”, and content may include the use of tobacco, alcohol or illegal drugs.&lt;/p&gt;
&lt;p&gt;And remember Google is objecting to “mature” emoji. So perhaps its app reviewers have been clutching at their pearls after finding other standard emojis which depict stuff like glasses of beer, martinis and wine… 🤦‍♀️&lt;/p&gt;
&lt;p&gt;Over on the US Play Store, meanwhile, the Fleksy app is rated “teen”.&lt;/p&gt;
&lt;p&gt;While Gboard is — yup, you guessed it! — ‘E for Everyone’… 🤔&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;size-large wp-image-1901295 aligncenter&quot; title=&quot;image (1)&quot; src=&quot;https://techcrunch.com/wp-content/uploads/2019/10/image-1-1.png?w=680&quot; alt=&quot;image 1 1&quot; width=&quot;680&quot; height=&quot;238&quot; srcset=&quot;https://techcrunch.com/wp-content/uploads/2019/10/image-1-1.png 1496w, https://techcrunch.com/wp-content/uploads/2019/10/image-1-1.png?resize=150,53 150w, https://techcrunch.com/wp-content/uploads/2019/10/image-1-1.png?resize=300,105 300w, https://techcrunch.com/wp-content/uploads/2019/10/image-1-1.png?resize=768,269 768w, https://techcrunch.com/wp-content/uploads/2019/10/image-1-1.png?resize=680,238 680w, https://techcrunch.com/wp-content/uploads/2019/10/image-1-1.png?resize=50,18 50w&quot; sizes=&quot;(max-width: 680px) 100vw, 680px&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Plante says the double standard Google is imposing on its own app vs third party keyboards is infuriating, and he accuses the platform giant of anti-competitive behavior.&lt;/p&gt;
&lt;p&gt;“We’re all-in for competition, it’s healthy… but incumbent players like Google playing it unfair, making their keyboard 3+ with identical emojis, is another showcase of abuse of power,” he tells TechCrunch.&lt;/p&gt;
&lt;p&gt;A quick search of the Play Store for other third party keyboard apps unearths a mixture of ratings — most rated PEGI 3 (such as &lt;a href=&quot;https://techcrunch.com/2016/02/03/microsoft-confirms-swiftkey-acquisition-for-250m-in-cash/&quot;&gt;Microsoft-owned SwiftKey&lt;/a&gt; and Grammarly Keyboard); some PEGI 12 (such as Facemoji Emoji Keyboard which, per Play Store’s summary contains “violence”).&lt;/p&gt;
&lt;p&gt;Only one that we could find among the top listed keyboard apps has a PEGI 16 rating.&lt;/p&gt;
&lt;p&gt;This is an app called Classic Big Keyboard — whose listing specifies it contains “Strong Language” (and what keyboard might not, frankly!?). Though, judging by the Play Store screenshots, it appears to be a fairly bog standard keyboard that simply offers adjustable key sizes. As well as, yes, standard emoji.&lt;/p&gt;
&lt;p&gt;“It came as a surprise,” says Plante describing how the trouble with Play started. “At first, in the past weeks, we started to fill in the rating reviews and I got constant emails the rating form needed to be filled with no details as why we needed to revise it so often (6 times) and then this last week we got rejected for the same reason. This emoji was in our product since day 1 of its existence.”&lt;/p&gt;
&lt;p&gt;Asked whether he can think of any trigger for Fleksy to come under scrutiny by Play Store reviewers now, he says: “We don’t know why but for sure we’re progressing nicely in the penetration of our keyboard. We’re growing fast for sure but unsure this is the reason.”&lt;/p&gt;
&lt;p&gt;“I suspect someone is doubling down on competitive keyboards over there as they lost quite some grip of their search business via the alternative browsers in Europe…. Perhaps there is a correlation?” he adds, referring to the European Commission’s &lt;a href=&quot;https://techcrunch.com/2018/07/18/google-gets-slapped-5bn-by-eu-for-android-antitrust-abuse/&quot;&gt;antitrust decision against Google Android last year&lt;/a&gt; — when the tech giant was hit with a $5BN fine for various breaches of EU competition law. A fine which it’s appealing.&lt;/p&gt;
&lt;p&gt;“I’ll continue to fight for a fair market and am glad that Europe is leading the way in this,” adds Plante.&lt;/p&gt;
&lt;p&gt;Following the EU antitrust ruling against &lt;a class=&quot;crunchbase-link&quot; href=&quot;https://crunchbase.com/organization/android&quot; target=&quot;_blank&quot; data-type=&quot;organization&quot; data-entity=&quot;android&quot;&gt;Android,&lt;/a&gt; which Google is legally compelled to comply with during any appeals process, it now displays &lt;a href=&quot;https://techcrunch.com/2019/08/02/google-to-auction-slots-on-android-default-search-choice-screen-in-europe-next-year-rivals-cry-pay-to-play-foul/&quot;&gt;choice screens to Android users in Europe&lt;/a&gt; — offering alternative search engines and browsers for download, alongside Google’s own dominate search  and browser (Chrome) apps.&lt;/p&gt;
&lt;p&gt;However the company still retains plenty of levers it can pull and push to influence the presentation of content within its dominant Play Store — influencing how rival apps are perceived by Android users and so whether or not they choose to download them.&lt;/p&gt;
&lt;p&gt;So requiring that a keyboard app rival gets badged with a much higher age rating than Google’s own keyboard app isn’t a good look to say the least.&lt;/p&gt;
&lt;p&gt;We reached out to Google for an explanation about the discrepancy in age ratings between Fleksy and Gboard and will update this report with any further response. At first glance a spokesman agreed with us that the situation looks odd.&lt;/p&gt;
</description>
<pubDate>Wed, 23 Oct 2019 14:29:27 +0000</pubDate>
<dc:creator>dmcy22</dc:creator>
<og:title>Google’s Play Store is giving an age-rating finger to Fleksy, a Gboard rival 🖕 – TechCrunch</og:title>
<og:description>Platform power is a helluva a drug. Do a search on Google’s Play Store in Europe and you’ll find the company’s own Gboard app has an age rating of PEGI 3 — aka the pan-European game information labelling system which signifies content is suitable for all age groups. PEGI 3 m…</og:description>
<og:image>https://techcrunch.com/wp-content/uploads/2019/10/google-play-logo-angled-1.jpg?w=711</og:image>
<og:url>http://social.techcrunch.com/2019/10/23/googles-play-store-is-giving-an-age-rating-finger-to-fleksy-a-gboard-rival/</og:url>
<og:type>article</og:type>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://techcrunch.com/2019/10/23/googles-play-store-is-giving-an-age-rating-finger-to-fleksy-a-gboard-rival/</dc:identifier>
</item>
<item>
<title>U.S. senators want social media users to be able to take their data with them</title>
<link>https://www.reuters.com/article/us-tech-antitrust-congress/u-s-senators-want-social-media-users-to-be-able-to-take-their-data-with-them-idUSKBN1X112C</link>
<guid isPermaLink="true" >https://www.reuters.com/article/us-tech-antitrust-congress/u-s-senators-want-social-media-users-to-be-able-to-take-their-data-with-them-idUSKBN1X112C</guid>
<description>&lt;p&gt;WASHINGTON (Reuters) - Three U.S. lawmakers active in tech issues introduced a bill on Tuesday that would require social networks like Facebook to allow users to pack up their data and go elsewhere, they said in a statement.&lt;/p&gt;
&lt;div class=&quot;PrimaryAsset_container&quot; readability=&quot;8.5&quot;&gt;
&lt;div class=&quot;Image_container&quot; tabindex=&quot;-1&quot; readability=&quot;12&quot;&gt;
&lt;div class=&quot;LazyImage_container LazyImage_dark&quot;&gt;&lt;img src=&quot;https://s1.reutersmedia.net/resources/r/?m=02&amp;amp;d=20191022&amp;amp;t=2&amp;amp;i=1443809490&amp;amp;r=LYNXMPEF9L0U0&amp;amp;w=20&quot; aria-label=&quot;FILE PHOTO: Stickers bearing the Facebook logo are pictured at Facebook Inc's F8 developers conference in San Jose, California, U.S., April 30, 2019. REUTERS/Stephen Lam&quot;/&gt;
&lt;/div&gt;

&lt;p&gt;&lt;span&gt;FILE PHOTO: Stickers bearing the Facebook logo are pictured at Facebook Inc's F8 developers conference in San Jose, California, U.S., April 30, 2019. REUTERS/Stephen Lam&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The senators, Republican Josh Hawley and Democrats Mark Warner and Richard Blumenthal, offered the bill at a time when there is growing concern that Facebook, along with Alphabet’s Google, have become so powerful that smaller rivals are unable to lure away their users.&lt;/p&gt;
&lt;p&gt;The bill currently does not have a counterpart in the U.S. House of Representatives, which it will need to become law.&lt;/p&gt;
&lt;p&gt;The bill would require communications platforms with more than 100 million monthly active members - Facebook has more than two billion - to allow its users to easily move, or port, their data to another network, Warner’s office said in a statement.&lt;/p&gt;
&lt;p&gt;Under the bill the companies would be required to maintain an interface to facilitate interoperability. Or users would be allowed to choose another company to manage a user’s account settings, content, and online interactions, the statement said.&lt;/p&gt;
&lt;p&gt;Portability means that a user who is unhappy with Facebook, for example, would be able to pull postings, comments and photos off Facebook and move them to another site. Interoperability means that users on different platforms - say Facebook and Twitter - would be able to communicate in the same way as email users are able to email to anyone without regard to provider.&lt;/p&gt;
&lt;p&gt;The trade group NetChoice, which counts Google and Facebook among its members, said that the bill would do little to protect consumers.&lt;/p&gt;
&lt;p&gt;“Data portability will inevitably endanger data security,” said Carl Szabo, general counsel at NetChoice. “Online hackers and criminals looking to steal consumer data will benefit.”&lt;/p&gt;
&lt;p&gt;The idea of portability, which is already part of European law, has the support of Representative David Cicilline, a Democrat who leads the House Judiciary Committee’s antitrust subcommittee.&lt;/p&gt;
&lt;p&gt;Data portability has been promoted as giving consumers the power to move their data, which could spur the growth of social media alternatives that offer features such as greater privacy or less advertising.&lt;/p&gt;
&lt;p&gt;Facebook has been hit by a number of privacy-related issues recently, including a glitch that exposed to its employees the passwords of millions of users which had been stored in readable format within its internal systems. The social media giant is also under strict data protections imposed by the company’s $5 billion settlement with the Federal Trade Commission, which was announced in July.&lt;/p&gt;
&lt;p&gt;“By enabling portability, interoperability, and delegatability, this bill will help put consumers in the driver’s seat when it comes to how and where they use social media,” said Sen. Warner, a former technology entrepreneur and venture capitalist.&lt;/p&gt;
&lt;p&gt;But the Electronic Frontier Foundation has pointed out that on its own “data portability cannot magically improve competition; the ability to take your data to another service is not helpful if there are no viable competitors.”&lt;/p&gt;
&lt;p&gt;Facebook said in September it “supports the principle of data portability” but did not outline specific future actions, and tech industry lobbyists at the Internet Association support the concept.&lt;/p&gt;
&lt;div class=&quot;Attribution_container&quot; readability=&quot;6&quot;&gt;
&lt;div class=&quot;Attribution_attribution&quot; readability=&quot;7&quot;&gt;
&lt;p class=&quot;Attribution_content&quot;&gt;Reporting by Diane Bartz; Editing by Shri Navaratnam and Andrea Ricci&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;StandardArticleBody_trustBadgeContainer&quot;&gt;&lt;span class=&quot;StandardArticleBody_trustBadgeTitle&quot;&gt;Our Standards:&lt;/span&gt;&lt;span class=&quot;trustBadgeUrl&quot;&gt;&lt;a href=&quot;http://thomsonreuters.com/en/about-us/trust-principles.html&quot;&gt;The Thomson Reuters Trust Principles.&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;
</description>
<pubDate>Wed, 23 Oct 2019 13:58:44 +0000</pubDate>
<dc:creator>howard941</dc:creator>
<og:title>U.S. senators want social media users to be able to take their data with them</og:title>
<og:url>https://www.reuters.com/article/us-tech-antitrust-congress-idUSKBN1X112C</og:url>
<og:type>article</og:type>
<og:description>Three U.S. lawmakers active in tech issues introduced a bill on Tuesday that wou...</og:description>
<og:image>https://s1.reutersmedia.net/resources/r/?m=02&amp;d=20191022&amp;t=2&amp;i=1443809490&amp;w=1200&amp;r=LYNXMPEF9L0U0</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.reuters.com/article/us-tech-antitrust-congress/u-s-senators-want-social-media-users-to-be-able-to-take-their-data-with-them-idUSKBN1X112C</dc:identifier>
</item>
<item>
<title>How to not rewrite it in Rust</title>
<link>http://adventures.michaelfbryan.com/posts/how-not-to-riir/</link>
<guid isPermaLink="true" >http://adventures.michaelfbryan.com/posts/how-not-to-riir/</guid>
<description>&lt;p&gt;Once you get past the growing pains of the &lt;em&gt;Borrow Checker&lt;/em&gt; and realise Rust gives you the power to do things which would be unheard of (or just plain dangerous) in other languages, the temptation to &lt;a href=&quot;https://transitiontech.ca/random/RIIR&quot;&gt;&lt;em&gt;Rewrite it in Rust&lt;/em&gt;&lt;/a&gt; can be quite strong. However at best, the temptation to &lt;em&gt;RiiR&lt;/em&gt; is unproductive (unnecessary duplication of effort), and at worst it can promote the creation of buggy software (why would &lt;em&gt;you&lt;/em&gt; be better equipped to write a library for some domain-specific purpose than the original author?).&lt;/p&gt;
&lt;p&gt;A much better alternative is to reuse the original library and just publish a safe interface to it.&lt;/p&gt;
&lt;h2 id=&quot;getting-started&quot;&gt;Getting Started&lt;/h2&gt;
&lt;p&gt;The first step in interfacing with a native library is to understand how it was originally intended to work.&lt;/p&gt;
&lt;div class=&quot;notices info&quot; readability=&quot;10&quot;&gt;
&lt;p&gt;Not only does this show us how to use the library, it also acts as a sanity check to make sure it builds, as well as providing build instructions and potential tests or examples.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Do not skip this step!&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;The library we’ll be binding to is &lt;a href=&quot;https://github.com/jedwing/CHMLib&quot;&gt;CHMLib&lt;/a&gt;, a C library for reading &lt;em&gt;Microsoft HTML Help Files&lt;/em&gt; (&lt;code&gt;.chm&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;First, we’ll make a new project and vendor &lt;code&gt;CHMLib&lt;/code&gt; using git submodules.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;17&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;$ git init chmlib &amp;amp;&amp;amp; cd chmlib
  Initialized empty Git repository in /home/michael/Documents/chmlib/.git/
$ touch README.md Cargo.toml
$ cargo new --lib chmlib
  Created library `chmlib` package
$ cargo new --lib chmlib-sys
  Created library `chmlib-sys` package
$ cat Cargo.toml
  [workspace]
  members = [&quot;chmlib&quot;, &quot;chmlib-sys&quot;]
$ git submodule add git@github.com:jedwing/CHMLib.git vendor/CHMLib
  Cloning into '/home/michael/Documents/chmlib/vendor/CHMLib'...
  remote: Enumerating objects: 99, done.
  remote: Total 99 (delta 0), reused 0 (delta 0), pack-reused 99
  Receiving objects: 100% (99/99), 375.51 KiB | 430.00 KiB/s, done.
  Resolving deltas: 100% (45/45), done.&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We can then use the &lt;code&gt;tree&lt;/code&gt; command to see what files are contained in the repository.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;11&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-command&quot; data-lang=&quot;command&quot;&gt;$ tree vendor/CHMLib
vendor/CHMLib
├── acinclude.m4
├── AUTHORS
├── ChangeLog
├── ChmLib-ce.zip
├── ChmLib-ds6.zip
├── configure.in
├── contrib
│   └── mozilla_helper.sh
├── COPYING
├── Makefile.am
├── NEWS
├── NOTES
├── README
└── src
    ├── chm_http.c
    ├── chm_lib.c
    ├── chm_lib.h
    ├── enum_chmLib.c
    ├── enumdir_chmLib.c
    ├── extract_chmLib.c
    ├── lzx.c
    ├── lzx.h
    ├── Makefile.am
    ├── Makefile.simple
    └── test_chmLib.c

2 directories, 23 files&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It looks like the original library uses &lt;a href=&quot;https://en.wikipedia.org/wiki/GNU_Autotools&quot;&gt;GNU Autotools&lt;/a&gt; as a build system. This may be problematic because it’ll require all users of our &lt;code&gt;chmlib&lt;/code&gt; crate (and their users) to have Autotools installed.&lt;/p&gt;
&lt;div class=&quot;notices note&quot; readability=&quot;9&quot;&gt;
&lt;p&gt;If possible we’ll try to avoid this “viral” need to install a dependency system-wide by invoking the C compiler manually, but file that thought away for later.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Upon further inspection, the &lt;code&gt;lzx.h&lt;/code&gt; and &lt;code&gt;lzx.c&lt;/code&gt; files are vendored copies of code for decompression using the &lt;a href=&quot;https://en.wikipedia.org/wiki/LZX&quot;&gt;LZX&lt;/a&gt; compression algorithm. Normally it’d be better to link with whatever &lt;code&gt;lzx&lt;/code&gt; library is installed on the user’s machine so we receive updates, but it’ll be a lot easier to compile it into &lt;code&gt;chmlib&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;enum_chmLib.c&lt;/code&gt;, &lt;code&gt;enumdir_chmLib.c&lt;/code&gt;, and &lt;code&gt;extract_chmLib.c&lt;/code&gt; appear to be examples displaying the usage of &lt;code&gt;chm_enumerate()&lt;/code&gt;, &lt;code&gt;chm_enumerate_dir()&lt;/code&gt;, and &lt;code&gt;chm_retrieve_object()&lt;/code&gt; respectively. These should be useful…&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;test_chmLib.c&lt;/code&gt; file appears to be another example, this time showing how to find a single document from the CHM file and extract it to disk.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;chm_http.c&lt;/code&gt; appears to be a simple HTTP server which serves the contents of a CHM file online. Let’s ignore it for now.&lt;/p&gt;
&lt;p&gt;Now we’ve had a look around the various files under &lt;code&gt;vendor/CHMLib/src/&lt;/code&gt;, let’s try to build the library.&lt;/p&gt;
&lt;p&gt;To be perfectly honest, this library is small enough that I can kinda stumble my way through until one of the examples runs.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;10&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;$ clang chm_lib.c enum_chmLib.c -o enum_chmLib
  /usr/bin/ld: /tmp/chm_lib-537dfe.o: in function `chm_close':
  chm_lib.c:(.text+0x8fa): undefined reference to `LZXteardown'
  /usr/bin/ld: /tmp/chm_lib-537dfe.o: in function `_chm_decompress_region':
  chm_lib.c:(.text+0x18ca): undefined reference to `LZXinit'
  /usr/bin/ld: /tmp/chm_lib-537dfe.o: in function `_chm_decompress_block':
  chm_lib.c:(.text+0x2900): undefined reference to `LZXreset'
  /usr/bin/ld: chm_lib.c:(.text+0x2a4b): undefined reference to `LZXdecompress'
  /usr/bin/ld: chm_lib.c:(.text+0x2abe): undefined reference to `LZXreset'
  /usr/bin/ld: chm_lib.c:(.text+0x2bf4): undefined reference to `LZXdecompress'
  clang: error: linker command failed with exit code 1 (use -v to see invocation)&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Okay, the linker can’t find some &lt;code&gt;LZX*&lt;/code&gt; routines…&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;7&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;$ clang chm_lib.c enum_chmLib.c lzx.c -o enum_chmLib&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Well… that worked?&lt;/p&gt;
&lt;p&gt;To make sure it works I’ve downloaded a sample help file from the internet.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;10&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;$ curl http://www.innovasys.com/static/hs/samples/topics.classic.chm.zip -o topics.classic.chm.zip
$ unzip topics.classic.chm.zip 
Archive:  topics.classic.chm.zip
  inflating: output/compiled/topics.classic.chm
$ file output/compiled/topics.classic.chm 
output/compiled/topics.classic.chm: MS Windows HtmlHelp Data&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Let’s see what &lt;code&gt;enum_chLib&lt;/code&gt; makes of it.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;10&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;$ ./enum_chmLib output/compiled/topics.classic.chm
output/compiled/topics.classic.chm:
 spc    start   length   type                   name
 ===    =====   ======   ====                   ====
   0        0        0   normal dir             /
   1  5125797     4096   special file           /#IDXHDR
   ...
   1  4944434    11234   normal file            /BrowserView.html
   ...
   0        0        0   normal dir             /flash/
   1   532689      727   normal file            /flash/expressinstall.swf
   0        0        0   normal dir             /Images/Commands/RealWorld/
   1    24363     1254   normal file            /Images/Commands/RealWorld/BrowserBack.bmp
   ...
   1    35672     1021   normal file            /Images/Employees24.gif
   ...
   1  3630715   200143   normal file            /template/packages/jquery-mobile/script/jquery.mobile-1.4.5.min.js
   ...
   0      134     1296   meta file              ::DataSpace/Storage/MSCompressed/Transform/{7FC28940-9D31-11D0-9B27-00A0C91E9C7C}/InstanceData/ResetTable&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Hmm, looks like even help files pull in jQuery ¯\_(ツ)_/¯&lt;/p&gt;
&lt;h2 id=&quot;building-chmlib-sys&quot;&gt;Building &lt;code&gt;chmlib-sys&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;Now we can kinda use CHMLib we need to write a &lt;code&gt;chmlib-sys&lt;/code&gt; crate which will manage building the native library so it can be linked by &lt;code&gt;rustc&lt;/code&gt;, and declare the various functions it exposes.&lt;/p&gt;
&lt;p&gt;To build the library we’ll need to write a &lt;code&gt;build.rs&lt;/code&gt; file. This will invoke the C compiler using the &lt;a href=&quot;https://docs.rs/cc&quot;&gt;&lt;code&gt;cc&lt;/code&gt;&lt;/a&gt; crate and send various messages to &lt;code&gt;rust&lt;/code&gt; to make sure everything links properly.&lt;/p&gt;
&lt;div class=&quot;notices info&quot; readability=&quot;7.7894736842105&quot;&gt;
&lt;p&gt;For our purposes we can pass all the hard work off to the &lt;a href=&quot;https://docs.rs/cc&quot;&gt;&lt;code&gt;cc&lt;/code&gt;&lt;/a&gt; crate, but normally it’s not that simple. Check out the &lt;a href=&quot;https://doc.rust-lang.org/cargo/reference/build-scripts.html&quot;&gt;docs on build scripts&lt;/a&gt; for more detailed information.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;First, add the &lt;code&gt;cc&lt;/code&gt; crate as a build dependency for &lt;code&gt;chmlib-sys&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;8&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;$ cd chmlib-sys
$ cargo add --build cc
    Updating 'https://github.com/rust-lang/crates.io-index' index
      Adding cc v1.0.46 to build-dependencies&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Then add a &lt;code&gt;build.rs&lt;/code&gt; file.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;11&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span&gt;// chmlib-sys/build.rs
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;use&lt;/span&gt;&lt;span&gt; &lt;/span&gt;cc::Build;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;use&lt;/span&gt;&lt;span&gt; &lt;/span&gt;std::{env,&lt;span&gt; &lt;/span&gt;path::PathBuf};&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;fn&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;()&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;project_dir&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;PathBuf::from(env::var(&lt;span&gt;&quot;CARGO_MANIFEST_DIR&quot;&lt;/span&gt;).unwrap())&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;.canonicalize()&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;.unwrap();&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;root_dir&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;project_dir.parent().unwrap();&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;src&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;root_dir.join(&lt;span&gt;&quot;vendor&quot;&lt;/span&gt;).join(&lt;span&gt;&quot;CHMLib&quot;&lt;/span&gt;).join(&lt;span&gt;&quot;src&quot;&lt;/span&gt;);&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;Build::new()&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;.file(src.join(&lt;span&gt;&quot;chm_lib.c&quot;&lt;/span&gt;))&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;.file(src.join(&lt;span&gt;&quot;lzx.c&quot;&lt;/span&gt;))&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;.include(&lt;span&gt;&amp;amp;&lt;/span&gt;src)&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;.warnings(&lt;span&gt;false&lt;/span&gt;)&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;.compile(&lt;span&gt;&quot;chmlib&quot;&lt;/span&gt;);&lt;span&gt;
&lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We also need to tell &lt;code&gt;cargo&lt;/code&gt; that &lt;code&gt;chmlib-sys&lt;/code&gt; links to the &lt;code&gt;chmlib&lt;/code&gt; native library. Cargo will make sure only one crate in a dependency graph can link to a particular native library, this helps prevent undecipherable linker errors due to duplicate symbols or accidentally using incompatible C libraries.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;12&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-diff&quot; data-lang=&quot;diff&quot;&gt;&lt;span&gt;--- a/chmlib-sys/Cargo.toml
&lt;/span&gt;&lt;span&gt;+++ b/chmlib-sys/Cargo.toml
&lt;/span&gt;&lt;span&gt;@@ -3,7 +3,13 @@ name = &quot;chmlib-sys&quot;
&lt;/span&gt; version = &quot;0.1.0&quot;
 authors = [&quot;Michael Bryan &amp;lt;michaelfbryan@gmail.com&amp;gt;&quot;]
 edition = &quot;2018&quot;
 description = &quot;Raw bindings to the CHMLib C library&quot;
 license = &quot;LGPL&quot;
 repository = &quot;https://github.com/Michael-F-Bryan/chmlib&quot;
&lt;span&gt;+links = &quot;chmlib&quot;
&lt;/span&gt;&lt;span&gt;+build = &quot;build.rs&quot;
&lt;/span&gt; 
 [dependencies]
 
 [build-dependencies]
 cc = { version = &quot;1.0&quot; }
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Next we need to declare the various functions exposed by the &lt;code&gt;chmlib&lt;/code&gt; C library so they can be called from Rust.&lt;/p&gt;
&lt;p&gt;There’s a project called &lt;a href=&quot;https://github.com/rust-lang/rust-bindgen&quot;&gt;bindgen&lt;/a&gt; which does exactly this. You give it a header file and it’ll automatically generate FFI bindings.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;17&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;$ cargo install bindgen
$ bindgen ../vendor/CHMLib/src/chm_lib.h \
    -o src/lib.rs \
    --raw-line '#![allow(non_snake_case, non_camel_case_types)]'
$ head src/lib.rs 
  /* automatically generated by rust-bindgen */
  
  #![allow(non_snake_case, non_camel_case_types)]
  
  pub const CHM_UNCOMPRESSED: u32 = 0;
  pub const CHM_COMPRESSED: u32 = 1;
  pub const CHM_MAX_PATHLEN: u32 = 512;
  pub const CHM_PARAM_MAX_BLOCKS_CACHED: u32 = 0;
  pub const CHM_RESOLVE_SUCCESS: u32 = 0;
  pub const CHM_RESOLVE_FAILURE: u32 = 1;
$ tail src/lib.rs
  extern &quot;C&quot; {
      pub fn chm_enumerate_dir(
          h: *mut chmFile,
          prefix: *const ::std::os::raw::c_char,
          what: ::std::os::raw::c_int,
          e: CHM_ENUMERATOR,
          context: *mut ::std::os::raw::c_void,
      ) -&amp;gt; ::std::os::raw::c_int;
  }&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;notices tip&quot; readability=&quot;6.5742574257426&quot;&gt;
&lt;p&gt;I would highly recommend browsing the &lt;a href=&quot;https://rust-lang.github.io/rust-bindgen/&quot;&gt;Bindgen User Guide&lt;/a&gt; If you want to know how to tweak the output.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;At this point it’s worth writing a small &lt;a href=&quot;http://softwaretestingfundamentals.com/smoke-testing/&quot;&gt;&lt;em&gt;Smoke Test&lt;/em&gt;&lt;/a&gt; to make sure things link properly and we can call functions from the C library.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;12&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span&gt;// chmlib-sys/tests/smoke_test.rs
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;// we need to convert the Path to a char* with trailing NULL. Unfortunately on
&lt;/span&gt;&lt;span&gt;// Windows OsStr (and therefore Path) is a [u16] under the hood and can't be
&lt;/span&gt;&lt;span&gt;// properly passed in as a char* string.
&lt;/span&gt;&lt;span&gt;#![cfg(unix)]&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;use&lt;/span&gt;&lt;span&gt; &lt;/span&gt;std::{ffi::CString,&lt;span&gt; &lt;/span&gt;os::unix::ffi::OsStrExt,&lt;span&gt; &lt;/span&gt;path::Path};&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;#[test]&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;fn&lt;/span&gt; &lt;span&gt;open_example_file&lt;/span&gt;()&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;project_dir&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;Path::new(env&lt;span&gt;!&lt;/span&gt;(&lt;span&gt;&quot;CARGO_MANIFEST_DIR&quot;&lt;/span&gt;));&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;sample_chm&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;project_dir.parent().unwrap().join(&lt;span&gt;&quot;topics.classic.chm&quot;&lt;/span&gt;);&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;c_str&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;CString::new(sample_chm.as_os_str().as_bytes()).unwrap();&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;unsafe&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;handle&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;chmlib_sys::chm_open(c_str.as_ptr());&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;assert&lt;span&gt;!&lt;/span&gt;(&lt;span&gt;!&lt;/span&gt;handle.is_null());&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;chmlib_sys::chm_close(handle);&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Running &lt;code&gt;cargo test&lt;/code&gt; shows that everything seems to be working okay.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;10&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;$ cargo test
    Finished test [unoptimized + debuginfo] target(s) in 0.03s
     Running /home/michael/Documents/chmlib/target/debug/deps/chmlib_sys-2ffd7b11a9fd8437

running 1 test
test bindgen_test_layout_chmUnitInfo ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out

     Running /home/michael/Documents/chmlib/target/debug/deps/smoke_test-f7be9810412559dc

running 1 test
test open_example_file ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out

   Doc-tests chmlib-sys

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;writing-a-safe-rust-wrapper&quot;&gt;Writing a Safe Rust Wrapper&lt;/h2&gt;
&lt;p&gt;We can now &lt;em&gt;technically&lt;/em&gt; use the CHMLib from Rust, but it requires a lot of &lt;code&gt;unsafe&lt;/code&gt; to call library functions. That’s okay for a quick’n’dirty implementation, but if this is going to be published to crates.io it’s worth writing a safe wrapper around the &lt;code&gt;unsafe&lt;/code&gt; code.&lt;/p&gt;
&lt;p&gt;Looking at the &lt;code&gt;chmlib-sys&lt;/code&gt; crate with &lt;code&gt;cargo doc --open&lt;/code&gt; shows it exposes half a dozen functions, most of which accept a &lt;code&gt;*mut ChmFile&lt;/code&gt; as the first parameter. This maps quite nicely to object methods.&lt;/p&gt;
&lt;details readability=&quot;19&quot;&gt;CHMLib Header File
&lt;div class=&quot;highlight&quot; readability=&quot;43&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c&quot; data-lang=&quot;c&quot;&gt;&lt;span&gt;/* $Id: chm_lib.h,v 1.10 2002/10/09 01:16:33 jedwin Exp $ */&lt;/span&gt;
&lt;span&gt;/***************************************************************************
&lt;/span&gt;&lt;span&gt; *             chm_lib.h - CHM archive manipulation routines               *
&lt;/span&gt;&lt;span&gt; *                           -------------------                           *
&lt;/span&gt;&lt;span&gt; *                                                                         *
&lt;/span&gt;&lt;span&gt; *  author:     Jed Wing &amp;lt;jedwin@ugcs.caltech.edu&amp;gt;                         *
&lt;/span&gt;&lt;span&gt; *  version:    0.3                                                        *
&lt;/span&gt;&lt;span&gt; *  notes:      These routines are meant for the manipulation of microsoft *
&lt;/span&gt;&lt;span&gt; *              .chm (compiled html help) files, but may likely be used    *
&lt;/span&gt;&lt;span&gt; *              for the manipulation of any ITSS archive, if ever ITSS     *
&lt;/span&gt;&lt;span&gt; *              archives are used for any other purpose.                   *
&lt;/span&gt;&lt;span&gt; *                                                                         *
&lt;/span&gt;&lt;span&gt; *              Note also that the section names are statically handled.   *
&lt;/span&gt;&lt;span&gt; *              To be entirely correct, the section names should be read   *
&lt;/span&gt;&lt;span&gt; *              from the section names meta-file, and then the various     *
&lt;/span&gt;&lt;span&gt; *              content sections and the &quot;transforms&quot; to apply to the data *
&lt;/span&gt;&lt;span&gt; *              they contain should be inferred from the section name and  *
&lt;/span&gt;&lt;span&gt; *              the meta-files referenced using that name; however, all of *
&lt;/span&gt;&lt;span&gt; *              the files I've been able to get my hands on appear to have *
&lt;/span&gt;&lt;span&gt; *              only two sections: Uncompressed and MSCompressed.          *
&lt;/span&gt;&lt;span&gt; *              Additionally, the ITSS.DLL file included with Windows does *
&lt;/span&gt;&lt;span&gt; *              not appear to handle any different transforms than the     *
&lt;/span&gt;&lt;span&gt; *              simple LZX-transform.  Furthermore, the list of transforms *
&lt;/span&gt;&lt;span&gt; *              to apply is broken, in that only half the required space   *
&lt;/span&gt;&lt;span&gt; *              is allocated for the list.  (It appears as though the      *
&lt;/span&gt;&lt;span&gt; *              space is allocated for ASCII strings, but the strings are  *
&lt;/span&gt;&lt;span&gt; *              written as unicode.  As a result, only the first half of   *
&lt;/span&gt;&lt;span&gt; *              the string appears.)  So this is probably not too big of   *
&lt;/span&gt;&lt;span&gt; *              a deal, at least until CHM v4 (MS .lit files), which also  *
&lt;/span&gt;&lt;span&gt; *              incorporate encryption, of some description.               *
&lt;/span&gt;&lt;span&gt; ***************************************************************************/&lt;/span&gt;

&lt;span&gt;/***************************************************************************
&lt;/span&gt;&lt;span&gt; *                                                                         *
&lt;/span&gt;&lt;span&gt; *   This program is free software; you can redistribute it and/or modify  *
&lt;/span&gt;&lt;span&gt; *   it under the terms of the GNU Lesser General Public License as        *
&lt;/span&gt;&lt;span&gt; *   published by the Free Software Foundation; either version 2.1 of the  *
&lt;/span&gt;&lt;span&gt; *   License, or (at your option) any later version.                       *
&lt;/span&gt;&lt;span&gt; *                                                                         *
&lt;/span&gt;&lt;span&gt; ***************************************************************************/&lt;/span&gt;

&lt;span&gt;#ifndef INCLUDED_CHMLIB_H
&lt;/span&gt;&lt;span&gt;#define INCLUDED_CHMLIB_H
&lt;/span&gt;
&lt;span&gt;#ifdef __cplusplus
&lt;/span&gt;&lt;span&gt;extern&lt;/span&gt; &lt;span&gt;&quot;C&quot;&lt;/span&gt; {
&lt;span&gt;#endif
&lt;/span&gt;
&lt;span&gt;/* RWE 6/12/1002 */&lt;/span&gt;
&lt;span&gt;#ifdef PPC_BSTR
&lt;/span&gt;&lt;span&gt;#include&lt;/span&gt; &lt;span&gt;&amp;lt;wtypes.h&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;#endif
&lt;/span&gt;
&lt;span&gt;#ifdef WIN32
&lt;/span&gt;&lt;span&gt;#ifdef __MINGW32__
&lt;/span&gt;&lt;span&gt;#define __int64 long long
&lt;/span&gt;&lt;span&gt;#endif
&lt;/span&gt;&lt;span&gt;typedef&lt;/span&gt; &lt;span&gt;unsigned&lt;/span&gt; &lt;span&gt;__int64&lt;/span&gt; LONGUINT64;
&lt;span&gt;typedef&lt;/span&gt; &lt;span&gt;__int64&lt;/span&gt;          LONGINT64;
&lt;span&gt;#else
&lt;/span&gt;&lt;span&gt;typedef&lt;/span&gt; &lt;span&gt;unsigned&lt;/span&gt; &lt;span&gt;long&lt;/span&gt; &lt;span&gt;long&lt;/span&gt; LONGUINT64;
&lt;span&gt;typedef&lt;/span&gt; &lt;span&gt;long&lt;/span&gt; &lt;span&gt;long&lt;/span&gt;          LONGINT64;
&lt;span&gt;#endif
&lt;/span&gt;
&lt;span&gt;/* the two available spaces in a CHM file                      */&lt;/span&gt;
&lt;span&gt;/* N.B.: The format supports arbitrarily many spaces, but only */&lt;/span&gt;
&lt;span&gt;/*       two appear to be used at present.                     */&lt;/span&gt;
&lt;span&gt;#define CHM_UNCOMPRESSED (0)
&lt;/span&gt;&lt;span&gt;#define CHM_COMPRESSED   (1)
&lt;/span&gt;
&lt;span&gt;/* structure representing an ITS (CHM) file stream             */&lt;/span&gt;
&lt;span&gt;struct&lt;/span&gt; chmFile;

&lt;span&gt;/* structure representing an element from an ITS file stream   */&lt;/span&gt;
&lt;span&gt;#define CHM_MAX_PATHLEN  (512)
&lt;/span&gt;&lt;span&gt;struct&lt;/span&gt; chmUnitInfo
{
    LONGUINT64         start;
    LONGUINT64         length;
    &lt;span&gt;int&lt;/span&gt;                space;
    &lt;span&gt;int&lt;/span&gt;                flags;
    &lt;span&gt;char&lt;/span&gt;               path[CHM_MAX_PATHLEN&lt;span&gt;+&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;];
};

&lt;span&gt;/* open an ITS archive */&lt;/span&gt;
&lt;span&gt;#ifdef PPC_BSTR
&lt;/span&gt;&lt;span&gt;/* RWE 6/12/2003 */&lt;/span&gt;
&lt;span&gt;struct&lt;/span&gt; chmFile&lt;span&gt;*&lt;/span&gt; &lt;span&gt;chm_open&lt;/span&gt;(BSTR filename);
&lt;span&gt;#else
&lt;/span&gt;&lt;span&gt;struct&lt;/span&gt; chmFile&lt;span&gt;*&lt;/span&gt; &lt;span&gt;chm_open&lt;/span&gt;(&lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;filename);
&lt;span&gt;#endif
&lt;/span&gt;
&lt;span&gt;/* close an ITS archive */&lt;/span&gt;
&lt;span&gt;void&lt;/span&gt; &lt;span&gt;chm_close&lt;/span&gt;(&lt;span&gt;struct&lt;/span&gt; chmFile &lt;span&gt;*&lt;/span&gt;h);

&lt;span&gt;/* methods for ssetting tuning parameters for particular file */&lt;/span&gt;
&lt;span&gt;#define CHM_PARAM_MAX_BLOCKS_CACHED 0
&lt;/span&gt;&lt;span&gt;void&lt;/span&gt; &lt;span&gt;chm_set_param&lt;/span&gt;(&lt;span&gt;struct&lt;/span&gt; chmFile &lt;span&gt;*&lt;/span&gt;h,
                   &lt;span&gt;int&lt;/span&gt; paramType,
                   &lt;span&gt;int&lt;/span&gt; paramVal);

&lt;span&gt;/* resolve a particular object from the archive */&lt;/span&gt;
&lt;span&gt;#define CHM_RESOLVE_SUCCESS (0)
&lt;/span&gt;&lt;span&gt;#define CHM_RESOLVE_FAILURE (1)
&lt;/span&gt;&lt;span&gt;int&lt;/span&gt; &lt;span&gt;chm_resolve_object&lt;/span&gt;(&lt;span&gt;struct&lt;/span&gt; chmFile &lt;span&gt;*&lt;/span&gt;h,
                       &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;objPath,
                       &lt;span&gt;struct&lt;/span&gt; chmUnitInfo &lt;span&gt;*&lt;/span&gt;ui);

&lt;span&gt;/* retrieve part of an object from the archive */&lt;/span&gt;
LONGINT64 &lt;span&gt;chm_retrieve_object&lt;/span&gt;(&lt;span&gt;struct&lt;/span&gt; chmFile &lt;span&gt;*&lt;/span&gt;h,
                              &lt;span&gt;struct&lt;/span&gt; chmUnitInfo &lt;span&gt;*&lt;/span&gt;ui,
                              &lt;span&gt;unsigned&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;buf,
                              LONGUINT64 addr,
                              LONGINT64 len);

&lt;span&gt;/* enumerate the objects in the .chm archive */&lt;/span&gt;
&lt;span&gt;typedef&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; (&lt;span&gt;*&lt;/span&gt;CHM_ENUMERATOR)(&lt;span&gt;struct&lt;/span&gt; chmFile &lt;span&gt;*&lt;/span&gt;h,
                              &lt;span&gt;struct&lt;/span&gt; chmUnitInfo &lt;span&gt;*&lt;/span&gt;ui,
                              &lt;span&gt;void&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;context);
&lt;span&gt;#define CHM_ENUMERATE_NORMAL    (1)
&lt;/span&gt;&lt;span&gt;#define CHM_ENUMERATE_META      (2)
&lt;/span&gt;&lt;span&gt;#define CHM_ENUMERATE_SPECIAL   (4)
&lt;/span&gt;&lt;span&gt;#define CHM_ENUMERATE_FILES     (8)
&lt;/span&gt;&lt;span&gt;#define CHM_ENUMERATE_DIRS      (16)
&lt;/span&gt;&lt;span&gt;#define CHM_ENUMERATE_ALL       (31)
&lt;/span&gt;&lt;span&gt;#define CHM_ENUMERATOR_FAILURE  (0)
&lt;/span&gt;&lt;span&gt;#define CHM_ENUMERATOR_CONTINUE (1)
&lt;/span&gt;&lt;span&gt;#define CHM_ENUMERATOR_SUCCESS  (2)
&lt;/span&gt;&lt;span&gt;int&lt;/span&gt; &lt;span&gt;chm_enumerate&lt;/span&gt;(&lt;span&gt;struct&lt;/span&gt; chmFile &lt;span&gt;*&lt;/span&gt;h,
                  &lt;span&gt;int&lt;/span&gt; what,
                  CHM_ENUMERATOR e,
                  &lt;span&gt;void&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;context);

&lt;span&gt;int&lt;/span&gt; &lt;span&gt;chm_enumerate_dir&lt;/span&gt;(&lt;span&gt;struct&lt;/span&gt; chmFile &lt;span&gt;*&lt;/span&gt;h,
                      &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;prefix,
                      &lt;span&gt;int&lt;/span&gt; what,
                      CHM_ENUMERATOR e,
                      &lt;span&gt;void&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;context);

&lt;span&gt;#ifdef __cplusplus
&lt;/span&gt;}
&lt;span&gt;#endif
&lt;/span&gt;
&lt;span&gt;#endif &lt;/span&gt;&lt;span&gt;/* INCLUDED_CHMLIB_H */&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/details&gt;&lt;p&gt;Let’s start off by creating a type that uses &lt;code&gt;chm_open()&lt;/code&gt; in its constructor and calls &lt;code&gt;chm_close()&lt;/code&gt; in its destructor.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;8&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span&gt;pub&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;unsafe&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;extern&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;C&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;fn&lt;/span&gt; &lt;span&gt;chm_open&lt;/span&gt;(filename: &lt;span&gt;*&lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;c_char)&lt;span&gt; &lt;/span&gt;-&amp;gt; &lt;span&gt;*&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;chmFile;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;pub&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;unsafe&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;extern&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;C&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;fn&lt;/span&gt; &lt;span&gt;chm_close&lt;/span&gt;(h: &lt;span&gt;*&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;chmFile);&lt;span&gt;
&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To make error handling easier we’ll pull in the &lt;a href=&quot;https://github.com/dtolnay/thiserror&quot;&gt;&lt;code&gt;thiserror&lt;/code&gt;&lt;/a&gt; crate to automatically derive &lt;code&gt;std::error::Error&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;7&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;$ cd chmlib
$ cargo add thiserror&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We now need some way to convert from a &lt;code&gt;std::path::Path&lt;/code&gt; to a &lt;code&gt;*const c_char&lt;/code&gt;. Unfortunately, due to various OS-specific quirks &lt;a href=&quot;https://stackoverflow.com/questions/38948669/whats-the-most-direct-way-to-convert-a-path-to-a-c-char&quot; title=&quot;Whats the most direct way to convert a Path to a *c_char?&quot;&gt;this&lt;/a&gt; &lt;a href=&quot;https://stackoverflow.com/questions/29590943/how-to-convert-a-path-into-a-const-char-for-ffi&quot; title=&quot;How to convert a Path into a const char* for FFI?&quot;&gt;isn’t&lt;/a&gt; &lt;a href=&quot;https://stackoverflow.com/questions/46342644/how-can-i-get-a-path-from-a-raw-c-string-cstr-or-const-u8&quot; title=&quot;How can I get a Path from a raw C string (CStr or *const u8)?&quot;&gt;simple&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;19&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span&gt;// chmlib/src/lib.rs
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;use&lt;/span&gt;&lt;span&gt; &lt;/span&gt;thiserror::Error;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;use&lt;/span&gt;&lt;span&gt; &lt;/span&gt;std::{ffi::CString,&lt;span&gt; &lt;/span&gt;path::Path};&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;#[cfg(unix)]&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;fn&lt;/span&gt; &lt;span&gt;path_to_cstring&lt;/span&gt;(path: &lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;Path&lt;/span&gt;)&lt;span&gt; &lt;/span&gt;-&amp;gt; &lt;span&gt;Result&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;CString,&lt;span&gt; &lt;/span&gt;InvalidPath&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;use&lt;/span&gt;&lt;span&gt; &lt;/span&gt;std::os::unix::ffi::OsStrExt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;bytes&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;path.as_os_str().as_bytes();&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;CString::new(bytes).map_err(&lt;span&gt;|&lt;/span&gt;_&lt;span&gt;|&lt;/span&gt;&lt;span&gt; &lt;/span&gt;InvalidPath)&lt;span&gt;
&lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;#[cfg(not(unix))]&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;fn&lt;/span&gt; &lt;span&gt;path_to_cstring&lt;/span&gt;(path: &lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;Path&lt;/span&gt;)&lt;span&gt; &lt;/span&gt;-&amp;gt; &lt;span&gt;Result&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;CString,&lt;span&gt; &lt;/span&gt;InvalidPath&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;// Unfortunately, on Windows CHMLib uses CreateFileA() which means all
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;// paths will need to be ascii. This can get quite messy, so let's just
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;// cross our fingers and hope for the best?
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;rust_str&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;path.as_os_str().as_str().ok_or(InvalidPath)&lt;span&gt;?&lt;/span&gt;;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;CString::new(rust_str).map_err(&lt;span&gt;|&lt;/span&gt;_&lt;span&gt;|&lt;/span&gt;&lt;span&gt; &lt;/span&gt;InvalidPath)&lt;span&gt;
&lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;#[derive(Error, Debug, Copy, Clone, PartialEq)]&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;#[error(&lt;/span&gt;&lt;span&gt;&quot;Invalid Path&quot;&lt;/span&gt;&lt;span&gt;)]&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;pub&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;struct&lt;/span&gt; &lt;span&gt;InvalidPath&lt;/span&gt;;&lt;span&gt;
&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Next we’ll create a &lt;code&gt;ChmFile&lt;/code&gt; which contains a non-null pointer to a &lt;code&gt;chmlib_sys::chmFile&lt;/code&gt;. If &lt;code&gt;chm_open()&lt;/code&gt; returns a null pointer we’ll know that opening the file failed and some sort of error occurred.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;22&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span&gt;// chmlib/src/lib.rs
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;use&lt;/span&gt;&lt;span&gt; &lt;/span&gt;std::{ffi::CString,&lt;span&gt; &lt;/span&gt;path::Path,&lt;span&gt; &lt;/span&gt;ptr::NonNull};&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;#[derive(Debug)]&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;pub&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;struct&lt;/span&gt; &lt;span&gt;ChmFile&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;raw: &lt;span&gt;NonNull&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;chmlib_sys::chmFile&lt;span&gt;&amp;gt;&lt;/span&gt;,&lt;span&gt;
&lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;impl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;ChmFile&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;pub&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;fn&lt;/span&gt; &lt;span&gt;open&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;P: &lt;span&gt;AsRef&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;Path&lt;span&gt;&amp;gt;&amp;gt;&lt;/span&gt;(path: &lt;span&gt;P&lt;/span&gt;)&lt;span&gt; &lt;/span&gt;-&amp;gt; &lt;span&gt;Result&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;ChmFile,&lt;span&gt; &lt;/span&gt;OpenError&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;c_path&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;path_to_cstring(path.as_ref())&lt;span&gt;?&lt;/span&gt;;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;// safe because we know c_path is valid
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;unsafe&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;raw&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;chmlib_sys::chm_open(c_path.as_ptr());&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;match&lt;/span&gt;&lt;span&gt; &lt;/span&gt;NonNull::new(raw)&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;Some&lt;/span&gt;(raw)&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Ok&lt;/span&gt;(ChmFile&lt;span&gt; &lt;/span&gt;{&lt;span&gt; &lt;/span&gt;raw&lt;span&gt; &lt;/span&gt;}),&lt;span&gt;
&lt;/span&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;None&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Err&lt;/span&gt;(OpenError::Other),&lt;span&gt;
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;impl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Drop&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; &lt;/span&gt;ChmFile&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;fn&lt;/span&gt; &lt;span&gt;drop&lt;/span&gt;(&lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;self)&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;unsafe&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;chmlib_sys::chm_close(self.raw.as_ptr());&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;/// The error returned when we are unable to open a [`ChmFile`].
&lt;/span&gt;&lt;span&gt;#[derive(Error, Debug, Copy, Clone, PartialEq)]&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;pub&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;enum&lt;/span&gt; &lt;span&gt;OpenError&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;#[error(&lt;/span&gt;&lt;span&gt;&quot;Invalid path&quot;&lt;/span&gt;&lt;span&gt;)]&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;InvalidPath(&lt;span&gt;#[from]&lt;/span&gt;&lt;span&gt; &lt;/span&gt;InvalidPath),&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;#[error(&lt;/span&gt;&lt;span&gt;&quot;Unable to open the ChmFile&quot;&lt;/span&gt;&lt;span&gt;)]&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;Other,&lt;span&gt;
&lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To make sure we’re not leaking memory, we can use &lt;code&gt;valgrind&lt;/code&gt; to run a test that constructs a &lt;code&gt;ChmFile&lt;/code&gt; then immediately drops it.&lt;/p&gt;
&lt;p&gt;The test:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;10&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span&gt;// chmlib/src/lib.rs
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;#[test]&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;fn&lt;/span&gt; &lt;span&gt;open_valid_chm_file&lt;/span&gt;()&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;sample&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;sample_path();&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;// open the file
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;chm_file&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;ChmFile::open(&lt;span&gt;&amp;amp;&lt;/span&gt;sample).unwrap();&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;// then immediately close it
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;drop(chm_file);&lt;span&gt;
&lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;fn&lt;/span&gt; &lt;span&gt;sample_path&lt;/span&gt;()&lt;span&gt; &lt;/span&gt;-&amp;gt; &lt;span&gt;PathBuf&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;project_dir&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;Path::new(env&lt;span&gt;!&lt;/span&gt;(&lt;span&gt;&quot;CARGO_MANIFEST_DIR&quot;&lt;/span&gt;));&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;sample&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;project_dir.parent().unwrap().join(&lt;span&gt;&quot;topics.classic.chm&quot;&lt;/span&gt;);&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;assert&lt;span&gt;!&lt;/span&gt;(sample.exists());&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;sample&lt;span&gt;
&lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And the output from &lt;code&gt;valgrind&lt;/code&gt; shows nothing is amiss.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;17&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;$ valgrind ../target/debug/deps/chmlib-8d8c740d57832498 open_valid_chm_file
==8953== Memcheck, a memory error detector
==8953== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==8953== Using Valgrind-3.14.0 and LibVEX; rerun with -h for copyright info
==8953== Command: /home/michael/Documents/chmlib/target/debug/deps/chmlib-8d8c740d57832498 open_valid_chm_file
==8953== 

running 1 test
test tests::open_valid_chm_file ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out

==8953== 
==8953== HEAP SUMMARY:
==8953==     in use at exit: 0 bytes in 0 blocks
==8953==   total heap usage: 249 allocs, 249 frees, 43,273 bytes allocated
==8953== 
==8953== All heap blocks were freed -- no leaks are possible
==8953== 
==8953== For counts of detected and suppressed errors, rerun with: -v
==8953== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;finding-an-item-by-name&quot;&gt;Finding an Item by Name&lt;/h3&gt;
&lt;p&gt;Next, we’ll implement the &lt;code&gt;chm_resolve_object()&lt;/code&gt; function.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;11&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span&gt;pub&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;CHM_RESOLVE_SUCCESS&lt;span&gt; &lt;/span&gt;: &lt;span&gt;u32&lt;/span&gt; &lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;pub&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;CHM_RESOLVE_FAILURE: &lt;span&gt;u32&lt;/span&gt; &lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;/* resolve a particular object from the archive */&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;pub&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;unsafe&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;extern&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;C&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;fn&lt;/span&gt; &lt;span&gt;chm_resolve_object&lt;/span&gt;(&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;h: &lt;span&gt;*&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;chmFile,&lt;span&gt; 
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;objPath: &lt;span&gt;*&lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;c_char,&lt;span&gt; 
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;ui: &lt;span&gt;*&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;chmUnitInfo&lt;span&gt;
&lt;/span&gt;)&lt;span&gt; &lt;/span&gt;-&amp;gt; &lt;span&gt;c_int&lt;/span&gt;;&lt;span&gt;
&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is a fallible operation, so the &lt;code&gt;chm_resolve_object()&lt;/code&gt; function returns a status code indicating success or failure and a pointer to some &lt;code&gt;chmUnitInfo&lt;/code&gt; object which will be populated if something was found.&lt;/p&gt;
&lt;p&gt;The &lt;a href=&quot;https://doc.rust-lang.org/std/mem/union.MaybeUninit.html#out-pointers&quot;&gt;&lt;code&gt;std::mem::MaybeUninit&lt;/code&gt;&lt;/a&gt; type was create for the exact purpose of representing the &lt;code&gt;ui&lt;/code&gt; “out pointer”.&lt;/p&gt;
&lt;p&gt;For now we’ll create an empty &lt;code&gt;UnitInfo&lt;/code&gt; struct to be the Rust equivalent of &lt;code&gt;chmUnitInfo&lt;/code&gt;. It will be populated when we start reading items out of the &lt;code&gt;ChmFile&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;15&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span&gt;// chmlib/src/lib.rs
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;impl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;ChmFile&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;...&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;/// Find a particular object in the archive.
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;pub&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;fn&lt;/span&gt; &lt;span&gt;find&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;P: &lt;span&gt;AsRef&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;Path&lt;span&gt;&amp;gt;&amp;gt;&lt;/span&gt;(&lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;self,&lt;span&gt; &lt;/span&gt;path: &lt;span&gt;P&lt;/span&gt;)&lt;span&gt; &lt;/span&gt;-&amp;gt; &lt;span&gt;Option&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;UnitInfo&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;path&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;path_to_cstring(path.as_ref()).ok()&lt;span&gt;?&lt;/span&gt;;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;unsafe&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;// put an uninitialized chmUnitInfo on the stack
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;resolved&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;MaybeUninit::&lt;span&gt;&amp;lt;&lt;/span&gt;chmlib_sys::chmUnitInfo&lt;span&gt;&amp;gt;&lt;/span&gt;::uninit();&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;// then try to resolve the unit info
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;ret&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;chmlib_sys::chm_resolve_object(&lt;span&gt;
&lt;/span&gt;&lt;span&gt;                &lt;/span&gt;self.raw.as_ptr(),&lt;span&gt;
&lt;/span&gt;&lt;span&gt;                &lt;/span&gt;path.as_ptr(),&lt;span&gt;
&lt;/span&gt;&lt;span&gt;                &lt;/span&gt;resolved.as_mut_ptr(),&lt;span&gt;
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;);&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; &lt;/span&gt;ret&lt;span&gt; &lt;/span&gt;&lt;span&gt;==&lt;/span&gt;&lt;span&gt; &lt;/span&gt;chmlib_sys::CHM_RESOLVE_SUCCESS&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;// if successful, &quot;resolved&quot; would have been initialized by C
&lt;/span&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;Some&lt;/span&gt;(UnitInfo::from_raw(resolved.assume_init()))&lt;span&gt;
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;}&lt;span&gt; &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;None&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;#[derive(Debug)]&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;pub&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;struct&lt;/span&gt; &lt;span&gt;UnitInfo&lt;/span&gt;;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;impl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;UnitInfo&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;fn&lt;/span&gt; &lt;span&gt;from_raw&lt;/span&gt;(ui: &lt;span&gt;chmlib_sys&lt;/span&gt;::chmUnitInfo)&lt;span&gt; &lt;/span&gt;-&amp;gt; &lt;span&gt;UnitInfo&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt; &lt;/span&gt;UnitInfo&lt;span&gt; &lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;notices info&quot; readability=&quot;10&quot;&gt;
&lt;p&gt;Note that &lt;code&gt;ChmFile::find()&lt;/code&gt; takes &lt;code&gt;&amp;amp;mut self&lt;/code&gt;, even though none of our Rust code seems to do any mutation. This is because under the hood it uses things like &lt;code&gt;fseek()&lt;/code&gt; to move back and forth around a file… which mutates internal state.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;We can test that &lt;code&gt;ChmFile::find()&lt;/code&gt; works using the sample CHM file from before.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;9&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span&gt;// chmlib/src/lib.rs
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;#[test]&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;fn&lt;/span&gt; &lt;span&gt;find_an_item_in_the_sample&lt;/span&gt;()&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;sample&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;sample_path();&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;chm&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;ChmFile::open(&lt;span&gt;&amp;amp;&lt;/span&gt;sample).unwrap();&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;assert&lt;span&gt;!&lt;/span&gt;(chm.find(&lt;span&gt;&quot;/BrowserView.html&quot;&lt;/span&gt;).is_some());&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;assert&lt;span&gt;!&lt;/span&gt;(chm.find(&lt;span&gt;&quot;doesn't exist.txt&quot;&lt;/span&gt;).is_none());&lt;span&gt;
&lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;enumerating-items-in-a-chm-file&quot;&gt;Enumerating Items in a CHM File&lt;/h3&gt;
&lt;p&gt;CHMLib exposes an API for inspecting items in the CHM file filtering the items to inspect based on a bitmask.&lt;/p&gt;
&lt;p&gt;We’ll be using the &lt;code&gt;bitflags&lt;/code&gt; crate.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;8&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;$ cargo add bitflags
    Updating 'https://github.com/rust-lang/crates.io-index' index
      Adding bitflags v1.2.1 to dependencies&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code&gt;Filter&lt;/code&gt; flags are defined straight from the &lt;code&gt;#define&lt;/code&gt;s in &lt;code&gt;chm_lib.h&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;10&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span&gt;// chmlib/src/lib.rs
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;bitflags::bitflags&lt;span&gt;!&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;pub&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;struct&lt;/span&gt; &lt;span&gt;Filter&lt;/span&gt;: &lt;span&gt;c_int&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;/// A normal file.
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;NORMAL&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;chmlib_sys::CHM_ENUMERATE_NORMAL&lt;span&gt; &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; &lt;/span&gt;c_int;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;/// A meta file (typically used by the CHM system).
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;META&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;chmlib_sys::CHM_ENUMERATE_META&lt;span&gt; &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; &lt;/span&gt;c_int;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;/// A special file (starts with `#` or `$`).
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;SPECIAL&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;chmlib_sys::CHM_ENUMERATE_SPECIAL&lt;span&gt; &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; &lt;/span&gt;c_int;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;/// It's a file.
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;FILES&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;chmlib_sys::CHM_ENUMERATE_FILES&lt;span&gt; &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; &lt;/span&gt;c_int;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;/// It's a directory.
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;DIRS&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;chmlib_sys::CHM_ENUMERATE_DIRS&lt;span&gt; &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; &lt;/span&gt;c_int;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We also need an &lt;code&gt;extern &quot;C&quot;&lt;/code&gt; adaptor to use a Rust closure as a normal function pointer.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;20&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span&gt;// chmlib/src/lib.rs
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;unsafe&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;extern&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;C&quot;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;fn&lt;/span&gt; &lt;span&gt;function_wrapper&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;F&lt;span&gt;&amp;gt;&lt;/span&gt;(&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;file: &lt;span&gt;*&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;chmlib_sys::chmFile,&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;unit: &lt;span&gt;*&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;chmlib_sys::chmUnitInfo,&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;state: &lt;span&gt;*&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;c_void,&lt;span&gt;
&lt;/span&gt;)&lt;span&gt; &lt;/span&gt;-&amp;gt; &lt;span&gt;c_int&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;where&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;F: &lt;span&gt;FnMut&lt;/span&gt;(&lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;ChmFile,&lt;span&gt; &lt;/span&gt;UnitInfo)&lt;span&gt; &lt;/span&gt;-&amp;gt; &lt;span&gt;Continuation&lt;/span&gt;,&lt;span&gt;
&lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;// we need to make sure panics can't escape across the FFI boundary.
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;result&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;panic::catch_unwind(&lt;span&gt;||&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;// Use ManuallyDrop because we want to give the caller a `&amp;amp;mut ChmFile`
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;// but want to make sure the destructor is never called (to
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;// prevent double-frees).
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;file&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;ManuallyDrop::new(ChmFile&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;raw: &lt;span&gt;NonNull&lt;/span&gt;::new_unchecked(file),&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;});&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;unit&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;UnitInfo::from_raw(unit.read());&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;// the opaque state pointer is guaranteed to point to an instance of our
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;// closure
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;closure&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;(state&lt;span&gt; &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;F);&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;closure(&lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;file,&lt;span&gt; &lt;/span&gt;unit)&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;});&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;match&lt;/span&gt;&lt;span&gt; &lt;/span&gt;result&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;Ok&lt;/span&gt;(Continuation::Continue)&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;chmlib_sys::CHM_ENUMERATOR_CONTINUE&lt;span&gt; &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; &lt;/span&gt;c_int&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;},&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;Ok&lt;/span&gt;(Continuation::Stop)&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;chmlib_sys::CHM_ENUMERATOR_SUCCESS&lt;span&gt; &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; &lt;/span&gt;c_int,&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;Err&lt;/span&gt;(_)&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;chmlib_sys::CHM_ENUMERATOR_FAILURE&lt;span&gt; &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; &lt;/span&gt;c_int,&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;notices warning&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;This &lt;code&gt;function_wrapper&lt;/code&gt; is a fairly tricky bit of &lt;code&gt;unsafe&lt;/code&gt; code and there are a couple things to keep in mind:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;The &lt;code&gt;state&lt;/code&gt; pointer &lt;strong&gt;must&lt;/strong&gt; point to an instance of our &lt;code&gt;F&lt;/code&gt; closure&lt;/li&gt;
&lt;li&gt;Unwinding the stack from Rust to C is Undefined behaviour, and our &lt;code&gt;closure&lt;/code&gt; may trigger a panic. We need to use &lt;code&gt;std::panic::catch_unwind()&lt;/code&gt; to prevent panics from escaping the &lt;code&gt;function_wrapper&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;The &lt;code&gt;chmlib_sys::chmFile&lt;/code&gt; passed to &lt;code&gt;function_wrapper&lt;/code&gt; is also pointed to by the calling &lt;code&gt;ChmFile&lt;/code&gt;. We need to make sure &lt;code&gt;closure&lt;/code&gt; is the only thing able to mutate the &lt;code&gt;chmlib_sys::chmFile&lt;/code&gt; otherwise we’ll open ourselves up to race conditions&lt;/li&gt;
&lt;li&gt;We want to pass a &lt;code&gt;&amp;amp;mut ChmFile&lt;/code&gt; to the closure which means we’ll need to construct a temporary one on the stack using the &lt;code&gt;file&lt;/code&gt; pointer. However if it gets dropped then the &lt;code&gt;chmlib_sys::chmFile&lt;/code&gt; will be freed prematurely. This can be prevented using &lt;code&gt;std::mem::ManuallyDrop&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;
&lt;p&gt;We can now use &lt;code&gt;function_wrapper&lt;/code&gt; to implement &lt;code&gt;ChmFile::for_each()&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span&gt;// chmlib/src/lib.rs
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;impl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;ChmFile&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;...&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;/// Inspect each item within the [`ChmFile`].
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;pub&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;fn&lt;/span&gt; &lt;span&gt;for_each&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;F&lt;span&gt;&amp;gt;&lt;/span&gt;(&lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;self,&lt;span&gt; &lt;/span&gt;filter: &lt;span&gt;Filter&lt;/span&gt;,&lt;span&gt; &lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;cb: &lt;span&gt;F&lt;/span&gt;)&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;where&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;F: &lt;span&gt;FnMut&lt;/span&gt;(&lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;ChmFile,&lt;span&gt; &lt;/span&gt;UnitInfo)&lt;span&gt; &lt;/span&gt;-&amp;gt; &lt;span&gt;Continuation&lt;/span&gt;,&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;unsafe&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;chmlib_sys::chm_enumerate(&lt;span&gt;
&lt;/span&gt;&lt;span&gt;                &lt;/span&gt;self.raw.as_ptr(),&lt;span&gt;
&lt;/span&gt;&lt;span&gt;                &lt;/span&gt;filter.bits(),&lt;span&gt;
&lt;/span&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;Some&lt;/span&gt;(function_wrapper::&lt;span&gt;&amp;lt;&lt;/span&gt;F&lt;span&gt;&amp;gt;&lt;/span&gt;),&lt;span&gt;
&lt;/span&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;cb&lt;span&gt; &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;_&lt;span&gt; &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;c_void,&lt;span&gt;
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;);&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;/// Inspect each item within the [`ChmFile`] inside a specified directory.
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;pub&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;fn&lt;/span&gt; &lt;span&gt;for_each_item_in_dir&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;F,&lt;span&gt; &lt;/span&gt;P&lt;span&gt;&amp;gt;&lt;/span&gt;(&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;self,&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;filter: &lt;span&gt;Filter&lt;/span&gt;,&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;prefix: &lt;span&gt;P&lt;/span&gt;,&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;cb: &lt;span&gt;F&lt;/span&gt;,&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;)&lt;span&gt; &lt;/span&gt;&lt;span&gt;where&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;P: &lt;span&gt;AsRef&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;Path&lt;span&gt;&amp;gt;&lt;/span&gt;,&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;F: &lt;span&gt;FnMut&lt;/span&gt;(&lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;ChmFile,&lt;span&gt; &lt;/span&gt;UnitInfo)&lt;span&gt; &lt;/span&gt;-&amp;gt; &lt;span&gt;Continuation&lt;/span&gt;,&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;path&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;match&lt;/span&gt;&lt;span&gt; &lt;/span&gt;path_to_cstring(prefix.as_ref())&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;Ok&lt;/span&gt;(p)&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;p,&lt;span&gt;
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;Err&lt;/span&gt;(_)&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;,&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;};&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;unsafe&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;chmlib_sys::chm_enumerate_dir(&lt;span&gt;
&lt;/span&gt;&lt;span&gt;                &lt;/span&gt;self.raw.as_ptr(),&lt;span&gt;
&lt;/span&gt;&lt;span&gt;                &lt;/span&gt;path.as_ptr(),&lt;span&gt;
&lt;/span&gt;&lt;span&gt;                &lt;/span&gt;filter.bits(),&lt;span&gt;
&lt;/span&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;Some&lt;/span&gt;(function_wrapper::&lt;span&gt;&amp;lt;&lt;/span&gt;F&lt;span&gt;&amp;gt;&lt;/span&gt;),&lt;span&gt;
&lt;/span&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;cb&lt;span&gt; &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;_&lt;span&gt; &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;c_void,&lt;span&gt;
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;);&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;notices info&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;This trick works by using the &lt;code&gt;F&lt;/code&gt; type parameter to instantiate &lt;code&gt;function_wrapper&lt;/code&gt; for our closure type. This is a trick that comes up often when wanting to pass a Rust closure across the FFI barrier.&lt;/p&gt;
&lt;/div&gt;
&lt;h3 id=&quot;reading-file-contents&quot;&gt;Reading File Contents&lt;/h3&gt;
&lt;p&gt;The last function we need to wrap is actually reading the contents of a file into memory with &lt;code&gt;chm_retrieve_object()&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The implementation is almost trivial, and quite similar to the &lt;code&gt;std::io::Read&lt;/code&gt; trait except with the addition of a starting &lt;code&gt;offset&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;24&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span&gt;// chmlib/src/lib.rs
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;impl&lt;/span&gt;&lt;span&gt; &lt;/span&gt;ChmFile&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;...&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;pub&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;fn&lt;/span&gt; &lt;span&gt;read&lt;/span&gt;(&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;self,&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;unit: &lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;UnitInfo&lt;/span&gt;,&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;offset: &lt;span&gt;u64&lt;/span&gt;,&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;buffer: &lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;[&lt;span&gt;u8&lt;/span&gt;],&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;)&lt;span&gt; &lt;/span&gt;-&amp;gt; &lt;span&gt;Result&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;usize&lt;/span&gt;,&lt;span&gt; &lt;/span&gt;ReadError&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;unit&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;unit.&lt;span&gt;0.&lt;/span&gt;clone();&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;bytes_written&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;unsafe&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;chmlib_sys::chm_retrieve_object(&lt;span&gt;
&lt;/span&gt;&lt;span&gt;                &lt;/span&gt;self.raw.as_ptr(),&lt;span&gt;
&lt;/span&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;unit,&lt;span&gt;
&lt;/span&gt;&lt;span&gt;                &lt;/span&gt;buffer.as_mut_ptr(),&lt;span&gt;
&lt;/span&gt;&lt;span&gt;                &lt;/span&gt;offset,&lt;span&gt;
&lt;/span&gt;&lt;span&gt;                &lt;/span&gt;buffer.len()&lt;span&gt; &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; &lt;/span&gt;_,&lt;span&gt;
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;)&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;};&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; &lt;/span&gt;bytes_written&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;Ok&lt;/span&gt;(bytes_written&lt;span&gt; &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;usize&lt;/span&gt;)&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;}&lt;span&gt; &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;Err&lt;/span&gt;(ReadError)&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;#[derive(Error, Debug, Copy, Clone, PartialEq)]&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;#[error(&lt;/span&gt;&lt;span&gt;&quot;The read failed&quot;&lt;/span&gt;&lt;span&gt;)]&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;pub&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;struct&lt;/span&gt; &lt;span&gt;ReadError&lt;/span&gt;;&lt;span&gt;
&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It would be nice to provide more useful error messages than &lt;em&gt;“the read failed”&lt;/em&gt;, but reading through the source code for &lt;code&gt;chm_retrieve_object()&lt;/code&gt; shows it doesn’t differentiate between:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Returning &lt;code&gt;0&lt;/code&gt; when all data is read&lt;/li&gt;
&lt;li&gt;Invalid arguments - null pointers or out of bounds reads return &lt;code&gt;0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;failed file reads - &lt;code&gt;man 2 read&lt;/code&gt; says &lt;code&gt;read()&lt;/code&gt; may return &lt;code&gt;-1&lt;/code&gt; and set &lt;code&gt;errno&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;decompression failure - not being able to &lt;code&gt;malloc()&lt;/code&gt; a scratch buffer or the decompression algorithm encountering malformed input will return &lt;code&gt;-1&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;We can also test the &lt;code&gt;ChmFile::read()&lt;/code&gt; function by looking for known input.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;16&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span&gt;// chmlib/src/lib.rs
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;#[test]&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;fn&lt;/span&gt; &lt;span&gt;read_an_item&lt;/span&gt;()&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;sample&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;sample_path();&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;chm&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;ChmFile::open(&lt;span&gt;&amp;amp;&lt;/span&gt;sample).unwrap();&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;filename&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;/template/packages/core-web/css/index.responsive.css&quot;&lt;/span&gt;;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;// look for a known file
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;item&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;chm.find(filename).unwrap();&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;// then read it into a buffer
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;buffer&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;vec&lt;span&gt;!&lt;/span&gt;[&lt;span&gt;0&lt;/span&gt;;&lt;span&gt; &lt;/span&gt;item.length()&lt;span&gt; &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;usize&lt;/span&gt;];&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;bytes_written&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;chm.read(&lt;span&gt;&amp;amp;&lt;/span&gt;item,&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;,&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;buffer).unwrap();&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;// we should have read everything
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;assert_eq&lt;span&gt;!&lt;/span&gt;(bytes_written,&lt;span&gt; &lt;/span&gt;item.length()&lt;span&gt; &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;usize&lt;/span&gt;);&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;// ... and got what we expected
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;got&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;String&lt;/span&gt;::from_utf8(buffer).unwrap();&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;assert&lt;span&gt;!&lt;/span&gt;(got.starts_with(&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&quot;html, body, div#i-index-container, div#i-index-body&quot;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;));&lt;span&gt;
&lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;implementing-the-examples&quot;&gt;Implementing the Examples&lt;/h2&gt;
&lt;p&gt;We’ve now covered the vast majority of the CHMLib API and by this point most people would be happy to call it a day, however it’s worth taking the time to make the crate more approachable for our users. This is primarily accomplished by adding examples and documentation, two things I’ve noticed the Rust and Go communities tend to put a lot of effort into (probably thanks to &lt;code&gt;rustdoc&lt;/code&gt; and &lt;code&gt;godoc&lt;/code&gt; being first-class citizens in the language toolchain).&lt;/p&gt;
&lt;p&gt;Luckily the underlying CHMLib came with examples, so we should just be able to port them to use the &lt;code&gt;chmlib&lt;/code&gt; crate.&lt;/p&gt;
&lt;p&gt;It’s also useful as a sanity check to make sure the underlying library and our wrapper generate the same output.&lt;/p&gt;
&lt;h3 id=&quot;enumerating-all-items&quot;&gt;Enumerating All Items&lt;/h3&gt;
&lt;p&gt;This example opens the provided CHM file and generates a table with information about all items inside.&lt;/p&gt;
&lt;details readability=&quot;15&quot;&gt;Original Example
&lt;div class=&quot;highlight&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c&quot; data-lang=&quot;c&quot;&gt;&lt;span&gt;/* $Id: enum_chmLib.c,v 1.7 2002/10/09 12:38:12 jedwin Exp $ */&lt;/span&gt;
&lt;span&gt;/***************************************************************************
&lt;/span&gt;&lt;span&gt; *          enum_chmLib.c - CHM archive test driver                        *
&lt;/span&gt;&lt;span&gt; *                           -------------------                           *
&lt;/span&gt;&lt;span&gt; *                                                                         *
&lt;/span&gt;&lt;span&gt; *  author:     Jed Wing &amp;lt;jedwin@ugcs.caltech.edu&amp;gt;                         *
&lt;/span&gt;&lt;span&gt; *  notes:      This is a quick-and-dirty test driver for the chm lib      *
&lt;/span&gt;&lt;span&gt; *              routines.  The program takes as its input the paths to one *
&lt;/span&gt;&lt;span&gt; *              or more .chm files.  It attempts to open each .chm file in *
&lt;/span&gt;&lt;span&gt; *              turn, and display a listing of all of the files in the     *
&lt;/span&gt;&lt;span&gt; *              archive.                                                   *
&lt;/span&gt;&lt;span&gt; *                                                                         *
&lt;/span&gt;&lt;span&gt; *              It is not included as a particularly useful program, but   *
&lt;/span&gt;&lt;span&gt; *              rather as a sort of &quot;simplest possible&quot; example of how to  *
&lt;/span&gt;&lt;span&gt; *              use the enumerate portion of the API.                      *
&lt;/span&gt;&lt;span&gt; ***************************************************************************/&lt;/span&gt;

&lt;span&gt;/***************************************************************************
&lt;/span&gt;&lt;span&gt; *                                                                         *
&lt;/span&gt;&lt;span&gt; *   This program is free software; you can redistribute it and/or modify  *
&lt;/span&gt;&lt;span&gt; *   it under the terms of the GNU Lesser General Public License as        *
&lt;/span&gt;&lt;span&gt; *   published by the Free Software Foundation; either version 2.1 of the  *
&lt;/span&gt;&lt;span&gt; *   License, or (at your option) any later version.                       *
&lt;/span&gt;&lt;span&gt; *                                                                         *
&lt;/span&gt;&lt;span&gt; ***************************************************************************/&lt;/span&gt;

&lt;span&gt;#include&lt;/span&gt; &lt;span&gt;&quot;chm_lib.h&quot;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;#include&lt;/span&gt; &lt;span&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;#include&lt;/span&gt; &lt;span&gt;&amp;lt;stdlib.h&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;#include&lt;/span&gt; &lt;span&gt;&amp;lt;string.h&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;
&lt;span&gt;/*
&lt;/span&gt;&lt;span&gt; * callback function for enumerate API
&lt;/span&gt;&lt;span&gt; */&lt;/span&gt;
&lt;span&gt;int&lt;/span&gt; &lt;span&gt;_print_ui&lt;/span&gt;(&lt;span&gt;struct&lt;/span&gt; chmFile &lt;span&gt;*&lt;/span&gt;h,
              &lt;span&gt;struct&lt;/span&gt; chmUnitInfo &lt;span&gt;*&lt;/span&gt;ui,
              &lt;span&gt;void&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;context)
{
    &lt;span&gt;static&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; szBuf[&lt;span&gt;128&lt;/span&gt;];
    memset(szBuf, &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;128&lt;/span&gt;);
    &lt;span&gt;if&lt;/span&gt;(ui&lt;span&gt;-&amp;gt;&lt;/span&gt;flags &lt;span&gt;&amp;amp;&lt;/span&gt; CHM_ENUMERATE_NORMAL)
        strcpy(szBuf, &lt;span&gt;&quot;normal &quot;&lt;/span&gt;);
    &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt;(ui&lt;span&gt;-&amp;gt;&lt;/span&gt;flags &lt;span&gt;&amp;amp;&lt;/span&gt; CHM_ENUMERATE_SPECIAL)
        strcpy(szBuf, &lt;span&gt;&quot;special &quot;&lt;/span&gt;);
    &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt;(ui&lt;span&gt;-&amp;gt;&lt;/span&gt;flags &lt;span&gt;&amp;amp;&lt;/span&gt; CHM_ENUMERATE_META)
        strcpy(szBuf, &lt;span&gt;&quot;meta &quot;&lt;/span&gt;);
    
    &lt;span&gt;if&lt;/span&gt;(ui&lt;span&gt;-&amp;gt;&lt;/span&gt;flags &lt;span&gt;&amp;amp;&lt;/span&gt; CHM_ENUMERATE_DIRS)
        strcat(szBuf, &lt;span&gt;&quot;dir&quot;&lt;/span&gt;);
    &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt;(ui&lt;span&gt;-&amp;gt;&lt;/span&gt;flags &lt;span&gt;&amp;amp;&lt;/span&gt; CHM_ENUMERATE_FILES)
        strcat(szBuf, &lt;span&gt;&quot;file&quot;&lt;/span&gt;);

    printf(&lt;span&gt;&quot;   %1d %8d %8d   %s&lt;/span&gt;&lt;span&gt;\t\t&lt;/span&gt;&lt;span&gt;%s&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,
           (&lt;span&gt;int&lt;/span&gt;)ui&lt;span&gt;-&amp;gt;&lt;/span&gt;space,
           (&lt;span&gt;int&lt;/span&gt;)ui&lt;span&gt;-&amp;gt;&lt;/span&gt;start,
           (&lt;span&gt;int&lt;/span&gt;)ui&lt;span&gt;-&amp;gt;&lt;/span&gt;length,
           szBuf,
           ui&lt;span&gt;-&amp;gt;&lt;/span&gt;path);
    &lt;span&gt;return&lt;/span&gt; CHM_ENUMERATOR_CONTINUE;
}

&lt;span&gt;int&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;(&lt;span&gt;int&lt;/span&gt; c, &lt;span&gt;char&lt;/span&gt; &lt;span&gt;**&lt;/span&gt;v)
{
    &lt;span&gt;struct&lt;/span&gt; chmFile &lt;span&gt;*&lt;/span&gt;h;
    &lt;span&gt;int&lt;/span&gt; i;

    &lt;span&gt;for&lt;/span&gt; (i&lt;span&gt;=&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;; i&lt;span&gt;&amp;lt;&lt;/span&gt;c; i&lt;span&gt;++&lt;/span&gt;)
    {
        h &lt;span&gt;=&lt;/span&gt; chm_open(v[i]);
        &lt;span&gt;if&lt;/span&gt; (h &lt;span&gt;==&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;)
        {
            fprintf(stderr, &lt;span&gt;&quot;failed to open %s&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, v[i]);
            exit(&lt;span&gt;1&lt;/span&gt;);
        }

        printf(&lt;span&gt;&quot;%s:&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, v[i]);
        printf(&lt;span&gt;&quot; spc    start   length   type&lt;/span&gt;&lt;span&gt;\t\t\t&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;);
        printf(&lt;span&gt;&quot; ===    =====   ======   ====&lt;/span&gt;&lt;span&gt;\t\t\t&lt;/span&gt;&lt;span&gt;====&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;);

        &lt;span&gt;if&lt;/span&gt; (&lt;span&gt;!&lt;/span&gt; chm_enumerate(h,
                            CHM_ENUMERATE_ALL,
                            _print_ui,
                            &lt;span&gt;NULL&lt;/span&gt;))
            printf(&lt;span&gt;&quot;   *** ERROR ***&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;);

        chm_close(h);
    }

    &lt;span&gt;return&lt;/span&gt; &lt;span&gt;0&lt;/span&gt;;
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/details&gt;&lt;p&gt;The &lt;code&gt;_print_ui()&lt;/code&gt; function can be translated to Rust quite with ease. It’s just creating a description based on the &lt;code&gt;UnitInfo&lt;/code&gt;’s flags and string concatenation, then playing around with padding to generate tabulated output.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;15&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span&gt;// chmlib/examples/enumerate-items.rs
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;fn&lt;/span&gt; &lt;span&gt;describe_item&lt;/span&gt;(item: &lt;span&gt;UnitInfo&lt;/span&gt;)&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;description&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;String&lt;/span&gt;::new();&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; &lt;/span&gt;item.is_normal()&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;description.push_str(&lt;span&gt;&quot;normal &quot;&lt;/span&gt;);&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;}&lt;span&gt; &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; &lt;/span&gt;item.is_special()&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;description.push_str(&lt;span&gt;&quot;special &quot;&lt;/span&gt;);&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;}&lt;span&gt; &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; &lt;/span&gt;item.is_meta()&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;description.push_str(&lt;span&gt;&quot;meta &quot;&lt;/span&gt;);&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; &lt;/span&gt;item.is_dir()&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;description.push_str(&lt;span&gt;&quot;dir&quot;&lt;/span&gt;);&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;}&lt;span&gt; &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; &lt;/span&gt;item.is_file()&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;description.push_str(&lt;span&gt;&quot;file&quot;&lt;/span&gt;);&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;println&lt;span&gt;!&lt;/span&gt;(&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;&quot;   {} {:8} {:8}   {}\t\t{}&quot;&lt;/span&gt;,&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;item.space(),&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;item.start(),&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;item.length(),&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;description,&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;item.path().unwrap_or(Path::new(&lt;span&gt;&quot;&quot;&lt;/span&gt;)).display()&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;);&lt;span&gt;
&lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Then the &lt;code&gt;main()&lt;/code&gt; function will do some naive command-line argument parsing before opening the file and passing &lt;code&gt;describe()&lt;/code&gt; to &lt;code&gt;ChmFile::for_each()&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;13&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span&gt;// chmlib/examples/enumerate-items.rs
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;fn&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;()&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;filename&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;env::args()&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;.nth(&lt;span&gt;1&lt;/span&gt;)&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;.unwrap_or_else(&lt;span&gt;||&lt;/span&gt;&lt;span&gt; &lt;/span&gt;panic&lt;span&gt;!&lt;/span&gt;(&lt;span&gt;&quot;Usage: enumerate-items &amp;lt;filename&amp;gt;&quot;&lt;/span&gt;));&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;file&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;ChmFile::open(&lt;span&gt;&amp;amp;&lt;/span&gt;filename).expect(&lt;span&gt;&quot;Unable to open the file&quot;&lt;/span&gt;);&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;println&lt;span&gt;!&lt;/span&gt;(&lt;span&gt;&quot;{}:&quot;&lt;/span&gt;,&lt;span&gt; &lt;/span&gt;filename);&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;println&lt;span&gt;!&lt;/span&gt;(&lt;span&gt;&quot; spc    start   length   type\t\t\tname&quot;&lt;/span&gt;);&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;println&lt;span&gt;!&lt;/span&gt;(&lt;span&gt;&quot; ===    =====   ======   ====\t\t\t====&quot;&lt;/span&gt;);&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;file.for_each(Filter::all(),&lt;span&gt; &lt;/span&gt;&lt;span&gt;|&lt;/span&gt;_file,&lt;span&gt; &lt;/span&gt;item&lt;span&gt;|&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;describe_item(item);&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;Continuation::Continue&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;});&lt;span&gt;
&lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As a sanity check we’ll compare the output from our Rust example with the original.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;9&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;$ cargo run --example enumerate-items topics.classic.chm &amp;gt; rust-example.txt
$ cd vendor/CHMLib/src
$ clang chm_lib.c enum_chmLib.c lzx.c -o enum_chmLib
$ cd ../../..
$ ./vendor/CHMLib/src/enum_chmLib topics.classic.chm &amp;gt; c-example.txt
$ diff -u rust-example.txt c-example.txt
$ echo $?
0&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The diff indicates both examples generate identical output, but to make sure &lt;code&gt;diff&lt;/code&gt; is actually doing something let’s inject some dodgy output and see the &lt;code&gt;diff&lt;/code&gt; complain.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;14&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-diff&quot; data-lang=&quot;diff&quot;&gt;&lt;span&gt;diff --git a/chmlib/examples/enumerate-items.rs b/chmlib/examples/enumerate-items.rs
&lt;/span&gt;&lt;span&gt;index e68fa58..ef855ac 100644
&lt;/span&gt;&lt;span&gt;--- a/chmlib/examples/enumerate-items.rs
&lt;/span&gt;&lt;span&gt;+++ b/chmlib/examples/enumerate-items.rs
&lt;/span&gt;&lt;span&gt;@@ -36,6 +36,10 @@ fn describe_item(item: UnitInfo) {
&lt;/span&gt;         description.push_str(&quot;file&quot;);
     }
 
&lt;span&gt;+    if item.length() % 7 == 0 {
&lt;/span&gt;&lt;span&gt;+        description.push_str(&quot;🦀&quot;);
&lt;/span&gt;&lt;span&gt;+    }
&lt;/span&gt;&lt;span&gt;+
&lt;/span&gt;     println!(
         &quot;   {} {:8} {:8}   {}\t\t{}&quot;,
         item.space(),
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And re-running with the new code:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;14&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;$ cargo run --example enumerate-items topics.classic.chm &amp;gt; rust-example.txt
$ diff -u rust-example.txt c-example.txt
--- rust-example.txt    2019-10-20 16:51:53.933560892 +0800
+++ c-example.txt       2019-10-20 16:40:42.007053966 +0800
@@ -1,9 +1,9 @@
 topics.classic.chm:
  spc    start   length   type                  name
  ===    =====   ======   ====                  ====
-   0        0        0   normal dir🦀           /
+   0        0        0   normal dir            /
    1  5125797     4096   special file          /#IDXHDR
-   0        0        0   special file🦀         /#ITBITS
+   0        0        0   special file          /#ITBITS
    1  5104520      148   special file          /#IVB
    1  5132009     1227   special file          /#STRINGS
    0     1430     4283   special file          /#SYSTEM
@@ -13,9 +13,9 @@
...&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Success!&lt;/p&gt;

&lt;p&gt;Another example provided with CHMLib is to extract all “normal” files to disk.&lt;/p&gt;
&lt;details readability=&quot;25.5&quot;&gt;Original Example
&lt;div class=&quot;highlight&quot; readability=&quot;56&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c&quot; data-lang=&quot;c&quot;&gt;&lt;span&gt;/* $Id: extract_chmLib.c,v 1.4 2002/10/10 03:24:51 jedwin Exp $ */&lt;/span&gt;
&lt;span&gt;/***************************************************************************
&lt;/span&gt;&lt;span&gt; *          extract_chmLib.c - CHM archive extractor                       *
&lt;/span&gt;&lt;span&gt; *                           -------------------                           *
&lt;/span&gt;&lt;span&gt; *                                                                         *
&lt;/span&gt;&lt;span&gt; *  author:     Jed Wing &amp;lt;jedwin@ugcs.caltech.edu&amp;gt;                         *
&lt;/span&gt;&lt;span&gt; *  notes:      This is a quick-and-dirty chm archive extractor.           *
&lt;/span&gt;&lt;span&gt; ***************************************************************************/&lt;/span&gt;

&lt;span&gt;/***************************************************************************
&lt;/span&gt;&lt;span&gt; *                                                                         *
&lt;/span&gt;&lt;span&gt; *   This program is free software; you can redistribute it and/or modify  *
&lt;/span&gt;&lt;span&gt; *   it under the terms of the GNU Lesser General Public License as        *
&lt;/span&gt;&lt;span&gt; *   published by the Free Software Foundation; either version 2.1 of the  *
&lt;/span&gt;&lt;span&gt; *   License, or (at your option) any later version.                       *
&lt;/span&gt;&lt;span&gt; *                                                                         *
&lt;/span&gt;&lt;span&gt; ***************************************************************************/&lt;/span&gt;

&lt;span&gt;#include&lt;/span&gt; &lt;span&gt;&quot;chm_lib.h&quot;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;#include&lt;/span&gt; &lt;span&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;#include&lt;/span&gt; &lt;span&gt;&amp;lt;stdlib.h&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;#include&lt;/span&gt; &lt;span&gt;&amp;lt;string.h&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;#ifdef WIN32
&lt;/span&gt;&lt;span&gt;#include&lt;/span&gt; &lt;span&gt;&amp;lt;windows.h&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;#include&lt;/span&gt; &lt;span&gt;&amp;lt;direct.h&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;#define mkdir(X, Y) _mkdir(X)
&lt;/span&gt;&lt;span&gt;#define snprintf _snprintf
&lt;/span&gt;&lt;span&gt;#else
&lt;/span&gt;&lt;span&gt;#include&lt;/span&gt; &lt;span&gt;&amp;lt;unistd.h&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;#include&lt;/span&gt; &lt;span&gt;&amp;lt;sys/stat.h&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;#include&lt;/span&gt; &lt;span&gt;&amp;lt;sys/types.h&amp;gt;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;#endif
&lt;/span&gt;
&lt;span&gt;struct&lt;/span&gt; extract_context
{
    &lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;base_path;
};

&lt;span&gt;static&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; &lt;span&gt;dir_exists&lt;/span&gt;(&lt;span&gt;const&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;path)
{
&lt;span&gt;#ifdef WIN32
&lt;/span&gt;        &lt;span&gt;/* why doesn't this work?!? */&lt;/span&gt;
        HANDLE hFile;

        hFile &lt;span&gt;=&lt;/span&gt; CreateFileA(path,
                        FILE_LIST_DIRECTORY,
                        &lt;span&gt;0&lt;/span&gt;,
                        &lt;span&gt;NULL&lt;/span&gt;,
                        OPEN_EXISTING,
                        FILE_ATTRIBUTE_NORMAL,
                        &lt;span&gt;NULL&lt;/span&gt;);
        &lt;span&gt;if&lt;/span&gt; (hFile &lt;span&gt;!=&lt;/span&gt; INVALID_HANDLE_VALUE)
        {
        CloseHandle(hFile);
        &lt;span&gt;return&lt;/span&gt; &lt;span&gt;1&lt;/span&gt;;
        }
        &lt;span&gt;else&lt;/span&gt;
        &lt;span&gt;return&lt;/span&gt; &lt;span&gt;0&lt;/span&gt;;
&lt;span&gt;#else
&lt;/span&gt;        &lt;span&gt;struct&lt;/span&gt; stat statbuf;
        &lt;span&gt;if&lt;/span&gt; (stat(path, &lt;span&gt;&amp;amp;&lt;/span&gt;statbuf) &lt;span&gt;!=&lt;/span&gt; &lt;span&gt;-&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;)
                &lt;span&gt;return&lt;/span&gt; &lt;span&gt;1&lt;/span&gt;;
        &lt;span&gt;else&lt;/span&gt;
                &lt;span&gt;return&lt;/span&gt; &lt;span&gt;0&lt;/span&gt;;
&lt;span&gt;#endif
&lt;/span&gt;}

&lt;span&gt;static&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; &lt;span&gt;rmkdir&lt;/span&gt;(&lt;span&gt;char&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;path)
{
    &lt;span&gt;/*
&lt;/span&gt;&lt;span&gt;     * strip off trailing components unless we can stat the directory, or we
&lt;/span&gt;&lt;span&gt;     * have run out of components
&lt;/span&gt;&lt;span&gt;     */&lt;/span&gt;

    &lt;span&gt;char&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;i &lt;span&gt;=&lt;/span&gt; strrchr(path, &lt;span&gt;'/'&lt;/span&gt;);

    &lt;span&gt;if&lt;/span&gt;(path[&lt;span&gt;0&lt;/span&gt;] &lt;span&gt;==&lt;/span&gt; &lt;span&gt;'\0'&lt;/span&gt;  &lt;span&gt;||&lt;/span&gt;  dir_exists(path))
        &lt;span&gt;return&lt;/span&gt; &lt;span&gt;0&lt;/span&gt;;

    &lt;span&gt;if&lt;/span&gt; (i &lt;span&gt;!=&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;)
    {
        &lt;span&gt;*&lt;/span&gt;i &lt;span&gt;=&lt;/span&gt; &lt;span&gt;'\0'&lt;/span&gt;;
        rmkdir(path);
        &lt;span&gt;*&lt;/span&gt;i &lt;span&gt;=&lt;/span&gt; &lt;span&gt;'/'&lt;/span&gt;;
        mkdir(path, &lt;span&gt;0777&lt;/span&gt;);
    }

&lt;span&gt;#ifdef WIN32
&lt;/span&gt;        &lt;span&gt;return&lt;/span&gt; &lt;span&gt;0&lt;/span&gt;;
&lt;span&gt;#else
&lt;/span&gt;    &lt;span&gt;if&lt;/span&gt; (dir_exists(path))
        &lt;span&gt;return&lt;/span&gt; &lt;span&gt;0&lt;/span&gt;;
    &lt;span&gt;else&lt;/span&gt;
        &lt;span&gt;return&lt;/span&gt; &lt;span&gt;-&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;;
&lt;span&gt;#endif
&lt;/span&gt;}

&lt;span&gt;/*
&lt;/span&gt;&lt;span&gt; * callback function for enumerate API
&lt;/span&gt;&lt;span&gt; */&lt;/span&gt;
&lt;span&gt;int&lt;/span&gt; &lt;span&gt;_extract_callback&lt;/span&gt;(&lt;span&gt;struct&lt;/span&gt; chmFile &lt;span&gt;*&lt;/span&gt;h,
              &lt;span&gt;struct&lt;/span&gt; chmUnitInfo &lt;span&gt;*&lt;/span&gt;ui,
              &lt;span&gt;void&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;context)
{
    LONGUINT64 ui_path_len;
    &lt;span&gt;char&lt;/span&gt; buffer[&lt;span&gt;32768&lt;/span&gt;];
    &lt;span&gt;struct&lt;/span&gt; extract_context &lt;span&gt;*&lt;/span&gt;ctx &lt;span&gt;=&lt;/span&gt; (&lt;span&gt;struct&lt;/span&gt; extract_context &lt;span&gt;*&lt;/span&gt;)context;
    &lt;span&gt;char&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;i;

    &lt;span&gt;if&lt;/span&gt; (ui&lt;span&gt;-&amp;gt;&lt;/span&gt;path[&lt;span&gt;0&lt;/span&gt;] &lt;span&gt;!=&lt;/span&gt; &lt;span&gt;'/'&lt;/span&gt;)
        &lt;span&gt;return&lt;/span&gt; CHM_ENUMERATOR_CONTINUE;

    &lt;span&gt;/* quick hack for security hole mentioned by Sven Tantau */&lt;/span&gt;
    &lt;span&gt;if&lt;/span&gt; (strstr(ui&lt;span&gt;-&amp;gt;&lt;/span&gt;path, &lt;span&gt;&quot;/../&quot;&lt;/span&gt;) &lt;span&gt;!=&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;)
    {
        &lt;span&gt;/* fprintf(stderr, &quot;Not extracting %s (dangerous path)\n&quot;, ui-&amp;gt;path); */&lt;/span&gt;
        &lt;span&gt;return&lt;/span&gt; CHM_ENUMERATOR_CONTINUE;
    }

    &lt;span&gt;if&lt;/span&gt; (snprintf(buffer, &lt;span&gt;sizeof&lt;/span&gt;(buffer), &lt;span&gt;&quot;%s%s&quot;&lt;/span&gt;, ctx&lt;span&gt;-&amp;gt;&lt;/span&gt;base_path, ui&lt;span&gt;-&amp;gt;&lt;/span&gt;path) &lt;span&gt;&amp;gt;&lt;/span&gt; &lt;span&gt;1024&lt;/span&gt;)
        &lt;span&gt;return&lt;/span&gt; CHM_ENUMERATOR_FAILURE;

    &lt;span&gt;/* Get the length of the path */&lt;/span&gt;
    ui_path_len &lt;span&gt;=&lt;/span&gt; strlen(ui&lt;span&gt;-&amp;gt;&lt;/span&gt;path)&lt;span&gt;-&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;;

    &lt;span&gt;/* Distinguish between files and dirs */&lt;/span&gt;
    &lt;span&gt;if&lt;/span&gt; (ui&lt;span&gt;-&amp;gt;&lt;/span&gt;path[ui_path_len] &lt;span&gt;!=&lt;/span&gt; &lt;span&gt;'/'&lt;/span&gt; )
    {
        FILE &lt;span&gt;*&lt;/span&gt;fout;
        LONGINT64 len, remain&lt;span&gt;=&lt;/span&gt;ui&lt;span&gt;-&amp;gt;&lt;/span&gt;length;
        LONGUINT64 offset &lt;span&gt;=&lt;/span&gt; &lt;span&gt;0&lt;/span&gt;;

        printf(&lt;span&gt;&quot;--&amp;gt; %s&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, ui&lt;span&gt;-&amp;gt;&lt;/span&gt;path);
        &lt;span&gt;if&lt;/span&gt; ((fout &lt;span&gt;=&lt;/span&gt; fopen(buffer, &lt;span&gt;&quot;wb&quot;&lt;/span&gt;)) &lt;span&gt;==&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;)
    {
        &lt;span&gt;/* make sure that it isn't just a missing directory before we abort */&lt;/span&gt; 
        &lt;span&gt;char&lt;/span&gt; newbuf[&lt;span&gt;32768&lt;/span&gt;];
        strcpy(newbuf, buffer);
        i &lt;span&gt;=&lt;/span&gt; strrchr(newbuf, &lt;span&gt;'/'&lt;/span&gt;);
        &lt;span&gt;*&lt;/span&gt;i &lt;span&gt;=&lt;/span&gt; &lt;span&gt;'\0'&lt;/span&gt;;
        rmkdir(newbuf);
        &lt;span&gt;if&lt;/span&gt; ((fout &lt;span&gt;=&lt;/span&gt; fopen(buffer, &lt;span&gt;&quot;wb&quot;&lt;/span&gt;)) &lt;span&gt;==&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;)
              &lt;span&gt;return&lt;/span&gt; CHM_ENUMERATOR_FAILURE;
    }

        &lt;span&gt;while&lt;/span&gt; (remain &lt;span&gt;!=&lt;/span&gt; &lt;span&gt;0&lt;/span&gt;)
        {
            len &lt;span&gt;=&lt;/span&gt; chm_retrieve_object(h, ui, (&lt;span&gt;unsigned&lt;/span&gt; &lt;span&gt;char&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;)buffer, offset, &lt;span&gt;32768&lt;/span&gt;);
            &lt;span&gt;if&lt;/span&gt; (len &lt;span&gt;&amp;gt;&lt;/span&gt; &lt;span&gt;0&lt;/span&gt;)
            {
                fwrite(buffer, &lt;span&gt;1&lt;/span&gt;, (size_t)len, fout);
                offset &lt;span&gt;+=&lt;/span&gt; len;
                remain &lt;span&gt;-=&lt;/span&gt; len;
            }
            &lt;span&gt;else&lt;/span&gt;
            {
                fprintf(stderr, &lt;span&gt;&quot;incomplete file: %s&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, ui&lt;span&gt;-&amp;gt;&lt;/span&gt;path);
                &lt;span&gt;break&lt;/span&gt;;
            }
        }

        fclose(fout);
    }
    &lt;span&gt;else&lt;/span&gt;
    {
        &lt;span&gt;if&lt;/span&gt; (rmkdir(buffer) &lt;span&gt;==&lt;/span&gt; &lt;span&gt;-&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;)
            &lt;span&gt;return&lt;/span&gt; CHM_ENUMERATOR_FAILURE;
    }

    &lt;span&gt;return&lt;/span&gt; CHM_ENUMERATOR_CONTINUE;
}

&lt;span&gt;int&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;(&lt;span&gt;int&lt;/span&gt; c, &lt;span&gt;char&lt;/span&gt; &lt;span&gt;**&lt;/span&gt;v)
{
    &lt;span&gt;struct&lt;/span&gt; chmFile &lt;span&gt;*&lt;/span&gt;h;
    &lt;span&gt;struct&lt;/span&gt; extract_context ec;

    &lt;span&gt;if&lt;/span&gt; (c &lt;span&gt;&amp;lt;&lt;/span&gt; &lt;span&gt;3&lt;/span&gt;)
    {
        fprintf(stderr, &lt;span&gt;&quot;usage: %s &amp;lt;chmfile&amp;gt; &amp;lt;outdir&amp;gt;&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, v[&lt;span&gt;0&lt;/span&gt;]);
        exit(&lt;span&gt;1&lt;/span&gt;);
    }

    h &lt;span&gt;=&lt;/span&gt; chm_open(v[&lt;span&gt;1&lt;/span&gt;]);
    &lt;span&gt;if&lt;/span&gt; (h &lt;span&gt;==&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;)
    {
        fprintf(stderr, &lt;span&gt;&quot;failed to open %s&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, v[&lt;span&gt;1&lt;/span&gt;]);
        exit(&lt;span&gt;1&lt;/span&gt;);
    }

    printf(&lt;span&gt;&quot;%s:&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, v[&lt;span&gt;1&lt;/span&gt;]);
    ec.base_path &lt;span&gt;=&lt;/span&gt; v[&lt;span&gt;2&lt;/span&gt;];
    &lt;span&gt;if&lt;/span&gt; (&lt;span&gt;!&lt;/span&gt; chm_enumerate(h,
                        CHM_ENUMERATE_ALL,
                        _extract_callback,
                        (&lt;span&gt;void&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;)&lt;span&gt;&amp;amp;&lt;/span&gt;ec))
        printf(&lt;span&gt;&quot;   *** ERROR ***&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;);

    chm_close(h);

    &lt;span&gt;return&lt;/span&gt; &lt;span&gt;0&lt;/span&gt;;
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/details&gt;&lt;p&gt;The original example is quite verbose due to C’s lack of high-level abstractions and crippled standard library, hopefully our example will be much more readable.&lt;/p&gt;
&lt;p&gt;The interesting code lies inside our &lt;code&gt;extract()&lt;/code&gt; function. The code is rather self-explanatory, so I’ll let you read that instead of describing the process of extracting items in plain English.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;20&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span&gt;// chmlib/examples/extract.rs
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;fn&lt;/span&gt; &lt;span&gt;extract&lt;/span&gt;(&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;root_dir: &lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;Path&lt;/span&gt;,&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;file: &lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;ChmFile,&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;item: &lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;UnitInfo&lt;/span&gt;,&lt;span&gt;
&lt;/span&gt;)&lt;span&gt; &lt;/span&gt;-&amp;gt; &lt;span&gt;Result&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;(),&lt;span&gt; &lt;/span&gt;&lt;span&gt;Box&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;dyn&lt;span&gt; &lt;/span&gt;Error&lt;span&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;!&lt;/span&gt;item.is_file()&lt;span&gt; &lt;/span&gt;&lt;span&gt;||&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;!&lt;/span&gt;item.is_normal()&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;// we only care about normal files
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Ok&lt;/span&gt;(());&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;path&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;match&lt;/span&gt;&lt;span&gt; &lt;/span&gt;item.path()&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;Some&lt;/span&gt;(p)&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;p,&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;// if we can't get the path, ignore it and continue
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;None&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Ok&lt;/span&gt;(()),&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;};&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;dest&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;root_dir.to_path_buf();&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;// Note: by design, the path for a normal file is absolute (starts with &quot;/&quot;)
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;// so when joining it with the root_dir we need to drop the initial &quot;/&quot;.
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;dest.extend(path.components().skip(&lt;span&gt;1&lt;/span&gt;));&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;// make sure the parent directory exists
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Some&lt;/span&gt;(parent)&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;dest.parent()&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;fs::create_dir_all(parent)&lt;span&gt;?&lt;/span&gt;;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;f&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;File::create(dest)&lt;span&gt;?&lt;/span&gt;;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;start_offset&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;// CHMLib doesn't give us a &amp;amp;[u8] with the file contents directly (e.g.
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;// because it may be compressed) so we need to copy chunks to an
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;// intermediate buffer
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;buffer&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;vec&lt;span&gt;!&lt;/span&gt;[&lt;span&gt;0&lt;/span&gt;;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;16&lt;/span&gt;];&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;loop&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;bytes_read&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;file.read(item,&lt;span&gt; &lt;/span&gt;start_offset,&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;buffer)&lt;span&gt;?&lt;/span&gt;;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; &lt;/span&gt;bytes_read&lt;span&gt; &lt;/span&gt;&lt;span&gt;==&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;// we've reached the end of the file
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;}&lt;span&gt; &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;// write this chunk to the file and continue
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;start_offset&lt;span&gt; &lt;/span&gt;&lt;span&gt;+=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;bytes_read&lt;span&gt; &lt;/span&gt;&lt;span&gt;as&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;u64&lt;/span&gt;;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;f.write_all(&lt;span&gt;&amp;amp;&lt;/span&gt;buffer)&lt;span&gt;?&lt;/span&gt;;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;Ok&lt;/span&gt;(())&lt;span&gt;
&lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Compared to &lt;code&gt;extract()&lt;/code&gt;, our &lt;code&gt;main()&lt;/code&gt; function is relatively simple, with the handling of failures during extraction being the only real difference from the previous example.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;17&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot; data-lang=&quot;rust&quot;&gt;&lt;span&gt;// chmlib/examples/extract.rs
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;fn&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;()&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;args: &lt;span&gt;Vec&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;_&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;env::args().skip(&lt;span&gt;1&lt;/span&gt;).collect();&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; &lt;/span&gt;args.len()&lt;span&gt; &lt;/span&gt;&lt;span&gt;!=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;||&lt;/span&gt;&lt;span&gt; &lt;/span&gt;args.iter().any(&lt;span&gt;|&lt;/span&gt;arg&lt;span&gt;|&lt;/span&gt;&lt;span&gt; &lt;/span&gt;arg.contains(&lt;span&gt;&quot;-h&quot;&lt;/span&gt;))&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;println&lt;span&gt;!&lt;/span&gt;(&lt;span&gt;&quot;Usage: extract &amp;lt;chm-file&amp;gt; &amp;lt;out-dir&amp;gt;&quot;&lt;/span&gt;);&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;file&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;ChmFile::open(&lt;span&gt;&amp;amp;&lt;/span&gt;args[&lt;span&gt;0&lt;/span&gt;]).expect(&lt;span&gt;&quot;Unable to open the file&quot;&lt;/span&gt;);&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;out_dir&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;PathBuf::from(&lt;span&gt;&amp;amp;&lt;/span&gt;args[&lt;span&gt;1&lt;/span&gt;]);&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;file.for_each(Filter::all(),&lt;span&gt; &lt;/span&gt;&lt;span&gt;|&lt;/span&gt;file,&lt;span&gt; &lt;/span&gt;item&lt;span&gt;|&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;match&lt;/span&gt;&lt;span&gt; &lt;/span&gt;extract(&lt;span&gt;&amp;amp;&lt;/span&gt;out_dir,&lt;span&gt; &lt;/span&gt;file,&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;amp;&lt;/span&gt;item)&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;Ok&lt;/span&gt;(_)&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;Continuation::Continue,&lt;span&gt;
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;Err&lt;/span&gt;(e)&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;{&lt;span&gt;
&lt;/span&gt;&lt;span&gt;                &lt;/span&gt;eprintln&lt;span&gt;!&lt;/span&gt;(&lt;span&gt;&quot;Error: {}&quot;&lt;/span&gt;,&lt;span&gt; &lt;/span&gt;e);&lt;span&gt;
&lt;/span&gt;&lt;span&gt;                &lt;/span&gt;Continuation::Stop&lt;span&gt;
&lt;/span&gt;&lt;span&gt;            &lt;/span&gt;},&lt;span&gt;
&lt;/span&gt;&lt;span&gt;        &lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;});&lt;span&gt;
&lt;/span&gt;}&lt;span&gt;
&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Running this example against our sample CHM file gives us a set of files which can be opened using a normal web browser.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;10&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;$ cargo run --example extract -- ./topics.classic.chm ./extracted
$ tree ./extracted
./extracted
├── default.html
├── BrowserForward.html
...
├── Images
│   ├── Commands
│   │   └── RealWorld
│   │       ├── BrowserBack.bmp
...
├── script
│   ├── _community
│   │   └── disqus.js
│   ├── hs-common.js
...
└── userinterface.html
$ firefox topics.classic/default.html
(opens default.html in firefox)&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Some of the JavaScript is broken (I’m assuming implementation quirks with the Microsoft Help viewer?) and there is no search functionality, but overall the website is quite usable.&lt;/p&gt;
&lt;h2 id=&quot;where-to-from-here&quot;&gt;Where To From Here?&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;chmlib&lt;/code&gt; crate is now essentially feature complete and (with a couple minor tweaks) ready to be published to crates.io.&lt;/p&gt;
&lt;p&gt;There are a couple places I’ve left as an exercise to the reader, though:&lt;/p&gt;
&lt;ul readability=&quot;7&quot;&gt;&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;If the &lt;code&gt;closure&lt;/code&gt; in &lt;code&gt;ChmFile::for_each()&lt;/code&gt; or &lt;code&gt;ChmFile::for_each_item_in_dir()&lt;/code&gt; panic, we should resume unwinding after returning from C to Rust instead of swallowing the error.&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;3&quot;&gt;
&lt;p&gt;It’d be nice if the simple case of iterating over every item in a &lt;code&gt;ChmFile&lt;/code&gt; didn’t need to return &lt;code&gt;Continuation::Continue&lt;/code&gt; for the closure passed to &lt;code&gt;ChmFile::for_each()&lt;/code&gt; and friends. This could probably be implemented by accepting &lt;code&gt;F: FnMut(&amp;amp;mut ChmFile, UnitInfo) -&amp;gt; C&lt;/code&gt; where &lt;code&gt;C: Into&amp;lt;Continuation&amp;gt;&lt;/code&gt; and then adding an &lt;code&gt;impl From&amp;lt;()&amp;gt; for Continuation&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;3&quot;&gt;
&lt;p&gt;Errors encountered during iteration (e.g. like our &lt;code&gt;extract()&lt;/code&gt; example) should also be passed back to the caller of &lt;code&gt;ChmFile::for_each()&lt;/code&gt; and abort iteration early. This could tie in with the previous point by adding an implementation of &lt;code&gt;impl&amp;lt;E&amp;gt; From&amp;lt;Result&amp;lt;(), E&amp;gt;&amp;gt; for Continuation where E: Error + 'static&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;Having to manually copy chunks into an intermediate buffer before writing them to a &lt;code&gt;File&lt;/code&gt; in the &lt;code&gt;extract()&lt;/code&gt; example is annoying. We may want to add a convenience function which will call &lt;code&gt;ChmFile:read()&lt;/code&gt; in a loop and write the entire item into some &lt;code&gt;std::io::Write&lt;/code&gt;r.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</description>
<pubDate>Wed, 23 Oct 2019 13:41:11 +0000</pubDate>
<dc:creator>yarapavan</dc:creator>
<og:title>How to not RiiR</og:title>
<og:description>Once you get past the growing pains of the Borrow Checker and realise Rust gives you the power to do things which would be unheard of (or just plain dangerous) in other languages, the temptation to Rewrite it in Rust can be quite strong. However at best, the temptation to RiiR is unproductive (unnecessary duplication of effort), and at worst it can promote the creation of buggy software (why would you be better equipped to write a library for some domain-specific purpose than the original author?</og:description>
<og:type>article</og:type>
<og:url>http://adventures.michaelfbryan.com/posts/how-not-to-riir/</og:url>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://adventures.michaelfbryan.com/posts/how-not-to-riir/</dc:identifier>
</item>
<item>
<title>IBM casts doubt on Google&amp;#039;s claims of quantum supremacy</title>
<link>https://www.ibm.com/blogs/research/2019/10/on-quantum-supremacy/</link>
<guid isPermaLink="true" >https://www.ibm.com/blogs/research/2019/10/on-quantum-supremacy/</guid>
<description>&lt;p class=&quot;ibm-bold&quot;&gt;&lt;label for=&quot;scopeoption&quot;&gt;Share this post:&lt;/label&gt;&lt;/p&gt;


&lt;p&gt;&lt;label for=&quot;scopeoption&quot;&gt;Quantum computers are starting to approach the limit of classical simulation and it is important that we continue to benchmark progress and to ask how difficult they are to simulate. This is a fascinating scientific question.&lt;/label&gt;&lt;/p&gt;
&lt;p&gt;&lt;label for=&quot;scopeoption&quot;&gt;Recent advances in quantum computing have resulted in two 53-qubit processors: one from our group in IBM and a device described by Google in a paper published in the journal &lt;em&gt;Nature&lt;/em&gt;. In the paper, it is argued that their device reached “quantum supremacy” and that “a state-of-the-art supercomputer would require approximately 10,000 years to perform the equivalent task.” &lt;em&gt;We argue that an ideal simulation of the same task can be performed on a classical system in 2.5 days and with far greater fidelity&lt;/em&gt;. This is in fact a conservative, worst-case estimate, and we expect that with additional refinements the classical cost of the simulation can be further reduced.&lt;/label&gt;&lt;/p&gt;
&lt;p&gt;&lt;label for=&quot;scopeoption&quot;&gt;Because the original meaning of the term “quantum supremacy,” as proposed by John Preskill in 2012, was to describe the point where quantum computers can do things that classical computers can’t, this threshold has not been met.&lt;/label&gt;&lt;/p&gt;
&lt;p&gt;&lt;label for=&quot;scopeoption&quot;&gt;This particular notion of “quantum supremacy” is based on executing a random quantum circuit of a size infeasible for simulation with any available classical computer. Specifically, the paper shows a computational experiment over a 53-qubit quantum processor that implements an impressively large two-qubit gate quantum circuit of depth 20, with 430 two-qubit and 1,113 single-qubit gates, and with predicted total fidelity of 0.2%. Their classical simulation estimate of 10,000 years is based on the observation that the RAM memory requirement to store the full state vector in a Schrödinger-type simulation would be prohibitive, and thus one needs to resort to a Schrödinger-Feynman simulation that trades off space for time.&lt;/label&gt;&lt;/p&gt;
&lt;p&gt;&lt;label for=&quot;scopeoption&quot;&gt;The concept of “quantum supremacy” showcases the resources unique to quantum computers, such as direct access to entanglement and superposition. However, classical computers have resources of their own such as a hierarchy of memories and high-precision computations in hardware, various software assets, and a vast knowledge base of algorithms, and it is important to leverage all such capabilities when comparing quantum to classical.&lt;/label&gt;&lt;/p&gt;
&lt;p&gt;&lt;label for=&quot;scopeoption&quot;&gt;When their comparison to classical was made, they relied on an advanced simulation that leverages parallelism, fast and error-free computation, and large aggregate RAM, but failed to fully account for plentiful disk storage. In contrast, our Schrödinger-style classical simulation approach uses both RAM and hard drive space to store and manipulate the state vector. Performance-enhancing techniques employed by our simulation methodology include circuit partitioning, tensor contraction deferral, gate aggregation and batching, careful orchestration of collective communication, and well-known optimization methods such as cache-blocking and double-buffering in order to overlap the communication transpiring between and computation taking place on the CPU and GPU components of the hybrid nodes. Further details may be found in &lt;a href=&quot;https://arxiv.org/abs/1910.09534&quot;&gt;Leveraging Secondary Storage to Simulate Deep 54-qubit Sycamore Circuits&lt;/a&gt;.&lt;/label&gt;&lt;/p&gt;
&lt;div id=&quot;attachment_37277&quot; class=&quot;wp-caption alignnone&quot; readability=&quot;35&quot;&gt;&lt;label for=&quot;scopeoption&quot;&gt;&lt;img class=&quot;wp-image-37277&quot; src=&quot;https://www.ibm.com/blogs/research/wp-content/uploads/2019/10/sycamorecircuits.jpg&quot; alt=&quot;Figure 1. Analysis of expected classical computing runtime vs circuit depth of “Google Sycamore Circuits”. The bottom (blue) line estimates the classical runtime for a 53-qubit processor (2.5 days for a circuit depth 20), and the upper line (orange) does so for a 54-qubit processor.&quot; width=&quot;700&quot; height=&quot;421&quot; srcset=&quot;https://www.ibm.com/blogs/research/wp-content/uploads/2019/10/sycamorecircuits.jpg 794w, https://www.ibm.com/blogs/research/wp-content/uploads/2019/10/sycamorecircuits-300x180.jpg 300w, https://www.ibm.com/blogs/research/wp-content/uploads/2019/10/sycamorecircuits-768x461.jpg 768w&quot; sizes=&quot;(max-width: 700px) 100vw, 700px&quot;/&gt;&lt;/label&gt;
&lt;p class=&quot;wp-caption-text&quot;&gt;&lt;label for=&quot;scopeoption&quot;&gt;Figure 1. Analysis of expected classical computing runtime vs circuit depth of “Google Sycamore Circuits”. The bottom (blue) line estimates the classical runtime for a 53-qubit processor (2.5 days for a circuit depth 20), and the upper line (orange) does so for a 54-qubit processor.&lt;/label&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;&lt;label for=&quot;scopeoption&quot;&gt;Our simulation approach features a number of nice properties that do not directly transfer from the classical to quantum worlds.  For instance, once computed classically, the full state vector can be accessed arbitrarily many times. The runtime of our simulation method scales approximately linearly with the circuit depth (see Figure 1 above), imposing no limits such as those owing to the limited coherence times. New and better classical hardware, code optimizations to more efficiently utilize the classical hardware, not to mention the potential of leveraging GPU-direct communications to run the kind of supremacy simulations of interest, could substantially accelerate our simulation.&lt;/label&gt;&lt;/p&gt;
&lt;p&gt;&lt;label for=&quot;scopeoption&quot;&gt;Building quantum systems is a feat of science and engineering and benchmarking them is a formidable challenge. Google’s experiment is an excellent demonstration of the progress in superconducting-based quantum computing, showing state-of-the-art gate fidelities on a 53-qubit device, but it should not be viewed as proof that quantum computers are “supreme” over classical computers.&lt;/label&gt;&lt;/p&gt;
&lt;p&gt;&lt;label for=&quot;scopeoption&quot;&gt;It is well known in the quantum community that we at IBM are concerned of where the term “quantum supremacy” has gone. The origins of the term, including both a reasoned defense and a candid reflection on some of its controversial dimensions, were recently discussed by John Preskill in a thoughtful &lt;a href=&quot;https://www.quantamagazine.org/john-preskill-explains-quantum-supremacy-20191002/&quot;&gt;article&lt;/a&gt; in Quanta Magazine. Professor Preskill summarized the two main objections to the term that have arisen from the community by explaining that the “word exacerbates the already overhyped reporting on the status of quantum technology” and that “through its association with white supremacy, evokes a repugnant political stance.”&lt;/label&gt;&lt;/p&gt;
&lt;p&gt;&lt;label for=&quot;scopeoption&quot;&gt;Both are sensible objections. And we would further add that the “supremacy” term is being misunderstood by nearly all (outside of the rarified world of quantum computing experts that can put it in the appropriate context). A headline that includes some variation of “Quantum Supremacy Achieved” is almost irresistible to print, but it will inevitably mislead the general public. First because, as we argue above, by its strictest definition the goal has not been met. But more fundamentally, because quantum computers will never reign “supreme” over classical computers, but will rather work in concert with them, since each have their unique strengths.&lt;/label&gt;&lt;/p&gt;
&lt;p&gt;&lt;label for=&quot;scopeoption&quot;&gt;For the reasons stated above, and since we already have ample evidence that the term “quantum supremacy” is being broadly misinterpreted and causing ever growing amounts of confusion, we urge the community to treat claims that, for the first time, a quantum computer did something that a classical computer cannot with a large dose of skepticism due to the complicated nature of benchmarking an appropriate metric.&lt;/label&gt;&lt;/p&gt;
&lt;p&gt;&lt;label for=&quot;scopeoption&quot;&gt;For quantum to positively impact society, the task ahead is to continue to build and make widely accessible ever more powerful programmable quantum computing systems that can implement, reproducibly and reliably, a broad array of quantum demonstrations, algorithms and programs. This is the only path forward for practical solutions to be realized in quantum computers.&lt;/label&gt;&lt;/p&gt;
&lt;p&gt;&lt;label for=&quot;scopeoption&quot;&gt;A final thought. The concept of quantum computing is inspiring a whole new generation of scientists, including physicists, engineers, and computer scientists, to fundamentally change the landscape of information technology. If you are already pushing the frontiers of quantum computing forward, let’s keep the momentum going. And if you are new to the field, come and join the community. Go ahead and &lt;a href=&quot;https://quantum-computing.ibm.com/login&quot;&gt;run&lt;/a&gt; your first program on a real quantum computer today.&lt;/label&gt;&lt;/p&gt;
&lt;p&gt;&lt;label for=&quot;scopeoption&quot;&gt;The best is yet to come.&lt;/label&gt;&lt;/p&gt;
&lt;p&gt;&lt;label for=&quot;scopeoption&quot;&gt;&lt;em&gt;Chief Architect for IBM Q Dmitri Maslov also contributed to this article.&lt;/em&gt;&lt;/label&gt;&lt;/p&gt;
</description>
<pubDate>Wed, 23 Oct 2019 10:21:44 +0000</pubDate>
<dc:creator>furcyd</dc:creator>
<og:type>article</og:type>
<og:title>On “Quantum Supremacy” | IBM Research Blog</og:title>
<og:description>Recent advances in quantum computing have resulted in two 53-qubit processors</og:description>
<og:url>https://www.ibm.com/blogs/research/2019/10/on-quantum-supremacy/</og:url>
<og:image>https://www.ibm.com/blogs/research/wp-content/uploads/2019/10/sycamorecircuits_tn.jpg</og:image>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.ibm.com/blogs/research/2019/10/on-quantum-supremacy/</dc:identifier>
</item>
<item>
<title>Edward Snowden on The Joe Rogan Experience [video]</title>
<link>https://www.youtube.com/watch?v=efs3QRr8LWw</link>
<guid isPermaLink="true" >https://www.youtube.com/watch?v=efs3QRr8LWw</guid>
<description>&lt;p id=&quot;eow-description&quot; class=&quot;&quot;&gt;Edward Snowden is an American whistleblower who copied and leaked highly classified information from the National Security Agency in 2013 when he was a Central Intelligence Agency employee and subcontractor. His new book &quot;Permanent Record&quot; is now available.&lt;/p&gt;
</description>
<pubDate>Wed, 23 Oct 2019 10:13:15 +0000</pubDate>
<dc:creator>juandazapata</dc:creator>
<og:url>https://www.youtube.com/watch?v=efs3QRr8LWw</og:url>
<og:title>Joe Rogan Experience #1368 - Edward Snowden</og:title>
<og:image>https://i.ytimg.com/vi/efs3QRr8LWw/hqdefault.jpg</og:image>
<og:description>Edward Snowden is an American whistleblower who copied and leaked highly classified information from the National Security Agency in 2013 when he was a Centr...</og:description>
<og:type>video.other</og:type>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.youtube.com/watch?v=efs3QRr8LWw</dc:identifier>
</item>
<item>
<title>Ask HN: How did you build up your personal knowledge base?</title>
<link>https://news.ycombinator.com/item?id=21332957</link>
<guid isPermaLink="true" >https://news.ycombinator.com/item?id=21332957</guid>
<description>&lt;tr class=&quot;athing comtr&quot; id=&quot;21334066&quot; readability=&quot;4.3028785982478&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21335635&quot; readability=&quot;8.9107611548556&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;4.4553805774278&quot;&gt;&lt;tr readability=&quot;8.9107611548556&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;40&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;8.9107611548556&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;17.265771812081&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;Hey Nikita! It's been a little more than a year since we last spoke: &lt;a href=&quot;https://philosopher.life/#2018.10.09%20-%20Nikita%3A%20Penpals&quot; rel=&quot;nofollow&quot;&gt;https://philosopher.life/#2018.10.09%20-%20Nikita%3A%20Penpa...&lt;/a&gt;.&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;I like the way you've got yours set up. I think we have similar mindsets to reasoning about personal wikis. In case you are interested in hunting around, I've run across some personal wikis larger than yours, but not many. Even my own wiki-epeen is about three times the size of yours in ~11k files (wrapped into one) and ~470k lines.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;Drafting what will eventually be static content from within the 'in progress' nature of the wiki is hard to beat. Including, this post, I draft many of my communications openly in the wiki, and that has been extremely useful. Lots of odd things come out of the practice.&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21336070&quot; readability=&quot;2.4272727272727&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;1.2136363636364&quot;&gt;&lt;tr readability=&quot;2.4272727272727&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;80&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;The font on your blog is extremely hard to read on macOS + a decent Dell 1080p screen.&lt;/span&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21336172&quot; readability=&quot;5.4666666666667&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;2.7333333333333&quot;&gt;&lt;tr readability=&quot;5.4666666666667&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;120&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;Yes, thank you for telling me. I agree the wiki doesn't look good on every screen or suit most people. Sorry. It works well for me, and I'm the one who uses my personal knowledge base the most (by far).&lt;/span&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21336228&quot; readability=&quot;3.283950617284&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;1.641975308642&quot;&gt;&lt;tr readability=&quot;3.283950617284&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;160&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;For what it's worth I really enjoy the design (and content) of your wiki. :) I'm also on macOS, using a decent 1440p Dell monitor.&lt;/span&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21338262&quot; readability=&quot;2.6594594594595&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;1.3297297297297&quot;&gt;&lt;tr readability=&quot;2.6594594594595&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;80&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;Nice wiki you got going there. Can you share the other personal wikis you came across? Well in case its fine with the author.. Im curious to see other approaches&lt;/span&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21336196&quot; readability=&quot;4.794921875&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;2.3974609375&quot;&gt;&lt;tr readability=&quot;4.794921875&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;40&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;6.2333984375&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;11.878542510121&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;For those of us without macs or ios - what would you recommend (if anything) for replacement of Alfred for Windows or Linux?&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;Or is there another kind of application you'd like to be able to use (that may or may not exist yet) in place of Alfred?&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;Would any search system work for that matter? Could a command line system be used (ie - some form of grep perhaps)? What about something like a &quot;google appliance&quot; style search system (a couple of these exist - both open source and otherwise)?&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21336356&quot; readability=&quot;5.9273927392739&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21337803&quot; readability=&quot;1.3051948051948&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21336386&quot; readability=&quot;1.5208333333333&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21337230&quot; readability=&quot;1.21875&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21337074&quot; readability=&quot;15.696921862668&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;7.8484609313339&quot;&gt;&lt;tr readability=&quot;15.696921862668&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;15.696921862668&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;30.875601926164&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;I realize this may not be the place for this comment, but a few of these comments got me thinking.&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;Human memory is squishy, and that's great. You retain facts + feelings that help you make future decisions and everything else is integrated into smaller and smaller summaries until it fades away entirely. I spent years clinging to every experience wanting not to forget anything, and being horrified when I couldn't remember. I documented everything. I wanted my memory to work more like infinite dropbox storage and less like a tool, evolved over millions of years, to keep me safe and making good choices.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;These days, my personal knowledge base is whatever I've bothered to remember. Usually I don't know I've kept something tucked away until I'm in the middle of a conversation and realize it's still there. My memory of events shifts and degrades over time, and I'm fine with that.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;If you don't use a tool to document every page you visit and every thing you read or learn, that's completely fine too. It all fades away eventually, and if it remains relevant enough you'll hold on to the important bits.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;The real power-up isn't keeping it all, it's being able to change and grow, with just enough focus on the past to make good choices.&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21340665&quot; readability=&quot;5.6&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;2.8&quot;&gt;&lt;tr readability=&quot;5.6&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;40&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;5.1333333333333&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;9.8687664041995&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;Yes I think the Knowledge Is Power aphorism leads mistakenly to a Knowledge-Value-Function K(x) &amp;gt; 0 for any item of knowledge x.&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;But knowledge value is only positive if it helps you achieve your goal, when recalled. Otherwise the time taken to recall and discard knowledge is a negative. So really optimal knowledge is where you only know what you need to achieve your goals.&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21339210&quot; readability=&quot;14.522546419098&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;7.2612732095491&quot;&gt;&lt;tr readability=&quot;14.522546419098&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;40&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;12.586206896552&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;24.829467939973&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;Thank you for posting this, as I had similar thoughts also when reading the last knowledge bank post.&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;I love learning and will regularly do courses to pick up something completely different, or something applicable to my career.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;However, I do think it's okay to allow some of the things I've learnt to fade away. Technology or previous interests become less relevant, and trying to retain everything keeps me too focused on the past, making me feel like I get worse over time, rather than keep a positive learning attitude towards the future.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;Also, relearning things I've used a long time ago, because it has now become relevant again, is a lot of fun. The second time I've looked at trigonometry, I actually really enjoyed it.&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21340181&quot; readability=&quot;4.4722222222222&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;2.2361111111111&quot;&gt;&lt;tr readability=&quot;4.4722222222222&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;40&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;&amp;gt; The real power-up isn't keeping it all, it's being able to change and grow, with just enough focus on the past to make good choices.&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;Love how you framed it!&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21338270&quot; readability=&quot;12.137168141593&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;6.0685840707965&quot;&gt;&lt;tr readability=&quot;12.137168141593&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;40&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;Some things remain as well. Such as references to where you learned the thing, the ability to pattern match (Oh this is a problem of form X, which is listed in textbooks A,B and C. I don't remember how to solve it, but I used to. Therefore given that I know I'm capable of solving it, as I've done it before, I know the problem type, and I know where to study it, I'm confident to tell you I can solve it in two weeks.&quot;&lt;/span&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21337473&quot; readability=&quot;4.7526501766784&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;2.3763250883392&quot;&gt;&lt;tr readability=&quot;4.7526501766784&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;40&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;I can't echo this sentiment enough. Forgetting is just as important as remembering. Past experience has only marginal value to the present and future and can just as often lead you into stray directions. The number of times having a pinpoint memory of some obscure fact has helped is a handful across decades? A bit of obvious bias: I can't really know all the times knowing something I didn't would have been helpful. But I can recall a substantially large number of times I -- in effect -- remembered too much and it was a hindrance.&lt;/span&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21333383&quot; readability=&quot;0.74626865671642&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21333446&quot; readability=&quot;9.4958753437214&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;4.7479376718607&quot;&gt;&lt;tr readability=&quot;9.4958753437214&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;11.869844179652&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;23.214218896165&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;I have been building and using an open source solution called Dnote [0] for the past two years. Maybe it could help you and others in search for a solution.&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;I used to write down information in note-taking apps but doing so didn't help me retain more knowledge. The reasons were: (a) no spaced repetition, because I never went back to my old notes once I wrote them. (b) environment switch due to having to launch external apps every time to write a note. Environment switch was especially painful when I was immersed in a complex coding problem.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;I solved those two pain points by sending myself an automated digest of my notes every week (spaced repetition on autopilot) and building CLI, browser extensions, and IDE plug-ins to talk to my personal knowledge base so that I don't have to switch environment to put stuff in the knowledge base.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;My experience is positive. It has helped me advance my foreign language skills, learn new vocabulary, and retain various technical micro-lessons that I come across during programming.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;[0] - &lt;a href=&quot;https://github.com/dnote/dnote&quot; rel=&quot;nofollow&quot;&gt;https://github.com/dnote/dnote&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21333699&quot; readability=&quot;8.4358523725835&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;4.2179261862917&quot;&gt;&lt;tr readability=&quot;8.4358523725835&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;40&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;6.7486818980668&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;13.131868131868&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;&amp;gt; I solved those two pain points by sending myself an automated digest of my notes every week (spaced repetition on autopilot) and building CLI, browser extensions, and IDE plug-ins to talk to my personal knowledge base so that I don't have to switch environment to put stuff in the knowledge base.&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;Oh, this is fantastic, thanks. I'm going to have to look into how I can do this for my own knowledge base. Especially the spaced repetition part.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;&amp;gt; &lt;a href=&quot;https://www.getdnote.com/blog/how-i-built-personal-knowledge-base-for-myself/&quot; rel=&quot;nofollow&quot;&gt;https://www.getdnote.com/blog/how-i-built-personal-knowledge...&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;Btw, this is a great article.&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21339022&quot; readability=&quot;5.6497461928934&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;2.8248730964467&quot;&gt;&lt;tr readability=&quot;5.6497461928934&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;40&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;I have used dnote locally for a short while and love it. Unfortunately I cannot connect to the &quot;pro&quot; server (company restrictions), so I am running my own dnote server for this. Works very nice except for a few minor bugs (which reminded me to get them reported on github). Any plans to make the browser extention configurable so it can work with a self-hosted server?&lt;/span&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21335125&quot; readability=&quot;2.4718309859155&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;1.2359154929577&quot;&gt;&lt;tr readability=&quot;2.4718309859155&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;40&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;I'm pretty skeptical of personal projects for things like this but this looks very compelling. Thanks for sharing.&lt;/span&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21336337&quot; readability=&quot;10.695501730104&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;5.3477508650519&quot;&gt;&lt;tr readability=&quot;10.695501730104&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;11.667820069204&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;22.864066193853&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;I've used Anki for a while, but never very consistently or effectively until recently. Over the past year, I've started doing the following:&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;1. Stopped trying to categorize cards and just create them all in a single deck (with tags in lieu of separate decks).&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;2. Whenever I find myself googling something or looking it up on StackOverflow (that's not wildly specific or related to domains I don't really care about), I add a new card for it.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;3. Review cards for a few minutes in the morning.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;The above has worked rather well. I mostly focus on topics I'm interested in diving deeper into (python, for example) and has helped fill various lacunae in my knowledge.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;For broader sorts of knowledge acquisition, I use Boostnote to keep track of interesting notes/articles, but I have to confess I'm not that great at keeping it updated/relevant.&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21336876&quot; readability=&quot;2.7070707070707&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21335536&quot; readability=&quot;12.76912568306&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;6.3845628415301&quot;&gt;&lt;tr readability=&quot;12.76912568306&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;15.715846994536&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;30.892435808466&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;This is an area that I'm keenly interested in. I desperately want to capture more information about my life both for posterity but also as a power-assist tool for my normal work/life.&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;I have noticed that many of the solutions here do not really translate well into cell phone use. Most of my life is not spent in front of my own computer. Even though I spend a lot of time at a work computer, it is heavily restricted (defense industry) and thus can't be used for personal projects. Anything I use has to work with my cellphone as a 1st class capture interface.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;In my case, I recently decided that I since I am a heavy user of wikipedia, I should just use mediawiki. I'm used to it and it is well supported. The syntax isn't great but it has great API support. They have a decent cell phone interface, though I find that it isn't fast enough for taking notes. So I take quick notes in Evernote and move them into the wiki when I'm at my home PC.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;It's working okay so far. I need to put more effort into my workflow. I want to have an automated infrastructure for capturing my various data from social networks, email, calendars, things like that.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;Side note: I can't believe we are coasting into the year 2020 and copy/paste is still so friggin bad on my cell phone. Android has had copy/paste from text entry fields for a long time, but I still can't copy text out of most apps. WHY??? Case in point: YouTube descriptions and comments.&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21338137&quot; readability=&quot;5.7504798464491&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;2.8752399232246&quot;&gt;&lt;tr readability=&quot;5.7504798464491&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;6.1612284069098&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;11.904191616766&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;I wrote more about my Hugo-based personal knowledge base here recently: &lt;a href=&quot;https://news.ycombinator.com/item?id=21311156&quot; rel=&quot;nofollow&quot;&gt;https://news.ycombinator.com/item?id=21311156&lt;/a&gt;&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;You can see it at &lt;a href=&quot;https://maxmasnick.com/kb&quot; rel=&quot;nofollow&quot;&gt;https://maxmasnick.com/kb&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;Essentially it is a folder of Markdown files with some YAML metadata at the top to define categories. Hugo takes care of rendering the HTML, which is automatically deployed every time I push updates to the ‘master’ branch on GitHub via the GitHub Actions beta. It works pretty well, and allows me to edit on iOS via Working Copy.&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21336837&quot; readability=&quot;4.5449871465296&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21335725&quot; readability=&quot;3.9499036608863&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21338628&quot; readability=&quot;17.287128712871&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;8.6435643564356&quot;&gt;&lt;tr readability=&quot;17.287128712871&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;17.287128712871&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;34.021505376344&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;I use a few giant PDF files that total up to 1500 pages and 600000 words. They are made with plain LaTeX and no special tools. [0]&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;To me the main choice you make for a knowledge base is the linking structure: do you want just an unorganized pile, a web, something hierarchical, or something linear? In general CS/programming people prefer less structured forms like webs (as can be seen in these comments), while physics/math people prefer the opposite. For example, the Stacks and Kerodon projects are huge collaborative knowledge bases for certain subfields, but they're organized like a standard textbook.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;This is partly because physics/math people prefer more stable software, since they don't have time to keep up with or build the latest thing. LaTeX has been stable for decades. Furthermore, the material in physics and math really &lt;em&gt;is&lt;/em&gt; more ordered and hierarchical, while CS seems to have a broader, more organic structure from its youth.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;I love the linear format, and I'd encourage you to try it too. It requires no special software. It forces you to think about what is most foundational, and how certain insights lead directionally to others -- issues which you can ignore if you give yourself the freedom of a web. And as you move forward to more advanced things, spaced repetition of the more foundational things will happen automatically.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;0: &lt;a href=&quot;https://knzhou.github.io/#lectures&quot; rel=&quot;nofollow&quot;&gt;https://knzhou.github.io/#lectures&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21335081&quot; readability=&quot;9.2326732673267&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;4.6163366336634&quot;&gt;&lt;tr readability=&quot;9.2326732673267&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;11.079207920792&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;22.69414893617&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;I learn by:&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;Reading books and taking notes.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;Watching videos and taking notes.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;Attending meetups and taking notes.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;Doing. Specifically, by applying what I learned to small projects.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;I collect all the notes and projects in GitHub. It's simple (markdown), searchable, versioned and all in one place.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;Oh, and free, portable and highly available while hosted by someone else.&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21338595&quot; readability=&quot;12.444444444444&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;6.2222222222222&quot;&gt;&lt;tr readability=&quot;12.444444444444&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;13.880341880342&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;27.189189189189&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;I'm surprised VoodooPad [1] does not get mentioned more often when this question gets asked.&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;It is by far the most straightforward wiki I have used. The two features I rely on most are (i) creating new pages that link back to a piece of text simply by highlighting the text and entering a shortcut and (ii) adding aliases to pages, so that each time either the page name or its aliases are mentioned anywhere in the wiki, a link is automatically created back to the page.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;Using these two workflows, pages can fulfil a similar function tags do: If a concept appears again and again across many different pages, I simply create a page which is named after the concept or has the concept as one of its aliases. When I open this new page, I can see all pages that link to it in a panel that lists all back-links. I then go on to edit the page, going into more detail.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;This has turned out to be the most organic way for me to write a wiki where editing, linking, and exploring works almost frictionlessly.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;[1] &lt;a href=&quot;http://www.voodoopad.com/&quot; rel=&quot;nofollow&quot;&gt;http://www.voodoopad.com/&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21335189&quot; readability=&quot;9.0527950310559&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;4.526397515528&quot;&gt;&lt;tr readability=&quot;9.0527950310559&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;A year ago, I found a perfect solution for myself. I'm using &lt;a href=&quot;https://github.com/vimwiki/vimwiki&quot; rel=&quot;nofollow&quot;&gt;https://github.com/vimwiki/vimwiki&lt;/a&gt;, writing there everything I find useful. From articles and quotes to lose ideas, notes, project information, or todos. It has support for markdown and export to HTML, which I can style however needed.&lt;/span&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21337027&quot; readability=&quot;2.2211538461538&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21335405&quot; readability=&quot;1.7647058823529&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21338570&quot; readability=&quot;12.524374176548&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;6.262187088274&quot;&gt;&lt;tr readability=&quot;12.524374176548&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;11.182476943347&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;21.986468200271&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;My whole system, minus the Apple Pencil bits, is described here: &lt;a href=&quot;https://cpbotha.net/2019/09/21/note-taking-strategy-2019/&quot; rel=&quot;nofollow&quot;&gt;https://cpbotha.net/2019/09/21/note-taking-strategy-2019/&lt;/a&gt;&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;In short:&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;- Emacs OrgMode with a specific setup as the core of everything.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;- I store interesting web-pages as PDFs on my local drive, currently synced using Dropbox.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;- Academic articles go in Zotero, with PDFs on local drive, synced using Dropbox.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;- On mobile, I use the Dropbox app to create and edit markdown files (I wish they would just treat .org files as normal text files!), and to save any web page to PDF.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;- I sometimes draw flow charts, architecture diagrams and UI using an Apple Pencil and the Notability app on a 2018 entry-level iPad, which syncs these sketches as searchable PDFs to ... Dropbox.&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21338548&quot; readability=&quot;13.574468085106&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;6.7872340425532&quot;&gt;&lt;tr readability=&quot;13.574468085106&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;I've been using a git repository of org-mode files for 5 years. It's currently over 600 thousand words, some of this written by me, some copy-pasted from e-books and webpages. I like this format because it has a multitude of useful features like intra-document links, project planning, tables with formulas, embedded LaTeX, and code than can be run directly inside the document, while being plain-text and very readable even without editor support. To make note-taking as frictionless as possible, I've also added a global keyboard shortcut which commits all changes with an autogenerated message, then executes pull --rebase and push.&lt;/span&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21333066&quot; readability=&quot;10.352941176471&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;5.1764705882353&quot;&gt;&lt;tr readability=&quot;10.352941176471&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;5.6470588235294&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;10.878048780488&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;I use Zim Wiki and have done for a few years now. Simple formatting, files in plain text, easy interlinking, decent search, and I've written some external scripts to work on the plain text files to be able to extract collated documents.&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;Backed up as part of my usual backup procedures, but only (easily) accessible with the GUI on my laptop. It would be trivial to sync it between devices and use it from multiple locations, but I don't need to.&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21337397&quot; readability=&quot;13.184304399524&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;6.5921521997622&quot;&gt;&lt;tr readability=&quot;13.184304399524&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;9.4173602853746&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;18.327228327228&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;I've been using TheBrain (&lt;a href=&quot;https://www.thebrain.com&quot; rel=&quot;nofollow&quot;&gt;https://www.thebrain.com&lt;/a&gt;) for ~10 years now and haven't found anything that comes close to it in terms of flexibility. If you haven't looked at it in awhile, it's worth checking out again. They have a new desktop app, much better mobile apps, and even after all these years, development continues steadily.&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;I've got 16,399 thoughts in mine and add more just about every day. Anything I think I may want to know later goes there. More ephemeral notes go in Apple Notes (I used Evernote for a long time but became annoyed with their business model and haven't missed it). Everything else goes in The Brain.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;Search great, the ability to link notes as parent/children/siblings is extremely powerful once you get the hang of it.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;It's not free, but it is, in my opinion, easily worth the cost.&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21336134&quot; readability=&quot;6.6811594202899&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;3.3405797101449&quot;&gt;&lt;tr readability=&quot;6.6811594202899&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;8.1128364389234&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;15.827586206897&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;I have been using plain text documents since 2001.&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;I just make a new file with a YYYY-MM format and dump everything in there, and on the next month I start a new file. I keep them all in 1 folder.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;It's really simple to use and very searchable with grep. I like it because it's all offline and doesn't get in the way.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;It becomes a brain dump of interesting links, notes about certain things I'm doing or whatever else I feel is worth jotting down at the time.&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21335045&quot; readability=&quot;2.8354430379747&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21335393&quot; readability=&quot;10.64468371467&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;5.3223418573351&quot;&gt;&lt;tr readability=&quot;10.64468371467&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;40&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;12.580080753701&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;24.826869806094&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;I am also using TiddlyWiki, but I just use it locally with almost all the defaults and no fancy formatting.&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;It's a little different than a traditional wiki in that each &quot;page&quot; (called a &quot;tiddler&quot;) is not really designed as a &quot;page&quot; that you view, but rather a snippet, which can be of any length. You can link between them and whatnot as in any wiki.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;The killer features for me are support for&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* code syntax highlighting&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* LaTeX math with KaTeX&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* adding in media (pictures, screenshots, etc. beyond just plain text)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* creating dynamic/aggregate tiddlers based on tags. For example, the code to create a list of links to all my tiddlers tagged with both `blog` and `ideas` is:&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;`&amp;lt;&amp;lt;list-links &quot;[tag[blog]tag[ideas]]&quot;&amp;gt;&amp;gt;`&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21339557&quot; readability=&quot;11.790967741935&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;5.8954838709677&quot;&gt;&lt;tr readability=&quot;11.790967741935&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;80&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;14.247419354839&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;27.908256880734&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;This is what I've come to love about TiddlyWiki so much. I use it as my personal Zettelkasten for my finance studies, with each Tiddler being a single thought. For example, a recent Tiddler I created was simply:&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;&quot;Banks have three alternatives for determining operational risk regulatory capital under Basel II&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;1 - Basic Indicator Approach 2 - Standardised Approach 3 - Advanced Measurement Approach (AMA)&quot;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;I make sure that each Tiddler has a link off to at least one other Tiddler. This one in particular has links off to my entries on the three particular approaches, which in turn link off to mathematical formulas and other related thoughts. I find by doing it this way I naturally tend to dive more and more in-depth to a particular topic until my Tiddlers are getting extremely specific but then one may link back to a very broad topic and the cycle repeats itself.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;By doing this, when I read over my notes, I find it almost feels like I'm having a conversation with them. Just like a normal conversation that you and your partner are deeply interested in, you'll dive deeper and deeper into specifics until another random, broader thought pops up and you repeat the process. I'm continuously surprised about the thoughts I run into as I randomly walk through my notes.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;But by far the most important thing for me is that this process has actually made note taking fun! I love it now. Every other system I've ever tried has felt like a chore. I enjoy it so much I'm usually adding several hundred new Tiddlers a day.&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21336003&quot; readability=&quot;7.7188049209139&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;3.8594024604569&quot;&gt;&lt;tr readability=&quot;7.7188049209139&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;80&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;10.130931458699&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;19.81884057971&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;All of those are //excellent// points. You can tailor it to suit your needs. For me, the killer features are:&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* It works in any standard browser.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* You own your data, and it's very hackable.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* Its learning curve is better than comparable tools (e.g. emacs).&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* It lowers the friction between you and your machine, enabling you to upload a semblance of your mind into the machine with minimal effort.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* Search and organization are mind-bendingly powerful.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* It is amazing at allowing you to reuse and reconstruct your work. It's designed to evolve.&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21333568&quot; readability=&quot;1.2876712328767&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21334943&quot; readability=&quot;2.4045801526718&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;1.2022900763359&quot;&gt;&lt;tr readability=&quot;2.4045801526718&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;40&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;Yes and what doesn't stick on a first read may stick when you read about it again in a different book.&lt;/span&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21336276&quot; readability=&quot;20.555891238671&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;10.277945619335&quot;&gt;&lt;tr readability=&quot;20.555891238671&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;15.172205438066&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;29.846153846154&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;Most of the stuff I learn, I try to keep it in my mind. Not perfect, but it has worked for people for a very long time, it's fairly portable, has low power usage, but retention isn't great, and i/o bandwidth is poor to say the least...&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;Ok - well, other than that it's a hodgepodge of text files on my phone and main workstation, some of which get moved to my small home NAS.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;And a few notebooks. And some stickies. And scraps of paper.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;Not a great system - well, let's face it, it stinks.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;At one time I had a website/blog I had built, but my vhosting provider updated PHP and it broke my stuff; not so much I couldn't fix it, but I got lazy and never fixed it, and now I've been mulling over for a while how to do everything as a github supported static page website instead, since I am pretty tired of my crufty PHP junk.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;I'm going to eagerly read everyone's thoughts here, though, as I think maybe they could help me become more organized in what I am doing and such.&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21336546&quot; readability=&quot;17.590521327014&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;8.7952606635071&quot;&gt;&lt;tr readability=&quot;17.590521327014&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;21.988151658768&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;43.787234042553&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;I've jumped around all over the place, I can never settle on a tool and it's really frustrating&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;I've been through&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* evernote - slow and buggy UX, properietary format&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* emacs org mode - good but you need buy in to org format, user experience across devices e.g. mobile not so good)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* quiver - pretty good, markdown format, but lacking android support&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* git + markdown files - ok, but a bit finicky, again annoying across devices&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* joplin - pretty good, has mobile support, has markdown etc&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* nVault - lightning fast, no mobile support&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;I saw a thread on HN recently talking about a similar topic and someone mentioned TiddlyWiki which seems promising, I'll investigate it soon, although I suspect I'll probably jump when the next thing comes along.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;Luckily most of my 'wiki' is in markdown format so it's fairly portable, I just want something that&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* is easily accessible across devices&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* supports markdown (+ rendering)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* supports inline LaTeX (e.g. $$x = 5 + y$$)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* renderer should support inline images&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* good search capability&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21337458&quot; readability=&quot;8.3929618768328&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;4.1964809384164&quot;&gt;&lt;tr readability=&quot;8.3929618768328&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;40&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;You could look at MediaWiki (same software Wikipedia uses). GitHub flavored markdown can be installed, I know because I've done it, and I have it installed on my own domain, therefore accessible across devices. You'll have to look at LaTeX and images, but I'm fairly sure it can be done. Search capability is great!&lt;/span&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21337009&quot; readability=&quot;9.8792452830189&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;4.9396226415094&quot;&gt;&lt;tr readability=&quot;9.8792452830189&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;40&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;Devonthink supports cross-device, has okay UI, excellent organizational tools, scripting capability, external opening support, a Web version, excellent search, and excellent &quot;Classify&quot; support that can automatically organize documents.&lt;/span&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21337792&quot; readability=&quot;2.3454545454545&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21338487&quot; readability=&quot;5.6896551724138&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;2.8448275862069&quot;&gt;&lt;tr readability=&quot;5.6896551724138&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;7.5862068965517&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;14.830699774266&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;Multiple tools, I guess.&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;I've used Tomboy for 8 years now to:&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;- brief note usage - blog drafts - turning those moments of inspiration and excitement into lasting documents&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;In the past year I've adopted Anki for committing knowledge to memory. Topics include:&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;- family birthdates - UNIX core utilities - python builtin functions - multiplication up to 20x20 (still a WIP) - US bill of rights - AI/ML terminology - Puppet concepts / idioms&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21338276&quot; readability=&quot;7.3960396039604&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;3.6980198019802&quot;&gt;&lt;tr readability=&quot;7.3960396039604&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;I used mind-mappers, until I got frustrated with their scalability, density, and performance. Then I wrote my own: &lt;a href=&quot;http://strlen.com/treesheets/&quot; rel=&quot;nofollow&quot;&gt;http://strlen.com/treesheets/&lt;/a&gt; (which is more of a &quot;hierarchical spreadsheet&quot; than a mind-mapper, but was designed specifically for my personal knowledge base :)&lt;/span&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21338360&quot; readability=&quot;5.4651162790698&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;2.7325581395349&quot;&gt;&lt;tr readability=&quot;5.4651162790698&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;I’ve been using Tomboy, then Evernote, then plain Markdown flies and now I have migrated everything to Notion (notion.so). I think I’ll stick with the latter for a while as their organisation system resonates with me quite well.&lt;/span&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21336366&quot; readability=&quot;5.6969696969697&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;2.8484848484848&quot;&gt;&lt;tr readability=&quot;5.6969696969697&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;I personally have a set of documents in Google docs that contain snippits and short command line fragments. Because most of what I like to retain are bookmarks I build my own bookmark application. I have something like 3000 to 4000 bookmarks in there. The application is open source and located on github. I imported all my Firefox and Chrome bookmarks into it and all github stars, I am planning to add more import abilities at some point... when I have more time...&lt;/span&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21337041&quot; readability=&quot;5.6934306569343&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;2.8467153284672&quot;&gt;&lt;tr readability=&quot;5.6934306569343&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;6.1678832116788&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;11.847328244275&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;Text files in a google filestream with daily incremental encrypted backups 2x onsite 1x cloud&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;I’ve gone down the special note taking software and formatting route before (OneNote first, OpenOffice later). What a mess.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;Tempted to try a self hosted wiki though. Definitely never touching a commercial solution again though. Evernote and co. Might replace filestream with nextcloud though&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21333888&quot; readability=&quot;4&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;2&quot;&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;3.2&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;6.0597014925373&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;I organize all my life with Notion [0], there is a lot of template to start with if you don't have inspirations or ideas. Also you can share your pages as a website !&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;[0] - &lt;a href=&quot;https://www.notion.so/&quot; rel=&quot;nofollow&quot;&gt;https://www.notion.so/&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21334314&quot; readability=&quot;0.61111111111111&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21335591&quot; readability=&quot;2.037037037037&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21335602&quot; readability=&quot;1.4081632653061&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21336132&quot; readability=&quot;6.6009501187648&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;3.3004750593824&quot;&gt;&lt;tr readability=&quot;6.6009501187648&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;I've been kicking around an idea of creating a site dedicated to in-depth writeups of the workflows that professionals use these days to stay organized - I've always had the problem of having too big of a toolbox (note-taking app, todo app, documentation app) but no cohesive way to combine all of them into something resembling organization. Would love to hear the details of how others do it.&lt;/span&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21335289&quot; readability=&quot;2.9894736842105&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21334574&quot; readability=&quot;1.0571428571429&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21335339&quot; readability=&quot;2.4661016949153&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;1.2330508474576&quot;&gt;&lt;tr readability=&quot;2.4661016949153&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;40&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;Timing is everything. I read yesterday's and today's comments and discovered different things.&lt;/span&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21337562&quot; readability=&quot;15.525330899133&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;7.7626654495664&quot;&gt;&lt;tr readability=&quot;15.525330899133&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;24.743496120493&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;48.85004599816&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;TLDR; [ email + git(markdown + wiki) + google calendar ]&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;Tried and failed :&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* emacs(org-mode)&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* plain text files&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* markdown files&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* tiddlywiki/ mediawiki/bunch of other wikis&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* google keep&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* one note&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* notational velocity&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* anki&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;* evernote&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;What &quot;works for me (TM)&quot;:&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;I use a separate email just for this. Every new thought, todo, bookmarks, quotes, images of doodles, event, information about people becomes a new email.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;Updates are email replies on last email on that subject. Todos are right there in my inbox reminding me each time I open up my email (many times a day). Once/twice a month I go though my email history. Any email with enough content or insight to a &quot;WIP&quot; wiki page in my git repo.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;Whenever I find time or feel like the need to research some concept that I left mid way, I go through my queue (my WIP page) of pending items.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;If there’s enough content/files/code, it gets its own markdown file and/or directory. Common patterns, get linked via their respective wiki pages. Related topics are back linked and cross referenced.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;This setup has worked well for me for almost a year now.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;I do not worry about email / git becoming obsolete. Or how I would move my email/git data when I need to switch vendors. I can access it via any device I own or use someone else’s with just a browser. There are backups of my git repo in almost every laptop/desktop I have access to. There's no shortage of client applications for any of these to choose from. And above all... like I said, this system &quot;works for me (TM)&quot;.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;Something that was not obvious at the start but I do now, is to keep my wiki relatively small. Because the purpose of the wiki is to supplement and complement my brain and its finite resources. I try to keep the gist in mind and offload details and references to this non-degradable store for when I need it. I've deleted/merged more content than I have added. I routinely see stuff added to my queue and deleted because its a rehash of a concept camouflaged as something new. No other system I used did this for me.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;I've posted this comment before [1] reposting as I still find it relevant.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;[1]: &lt;a href=&quot;https://news.ycombinator.com/item?id=20007108&quot; rel=&quot;nofollow&quot;&gt;https://news.ycombinator.com/item?id=20007108&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21335167&quot; readability=&quot;3.1898734177215&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21336473&quot; readability=&quot;5.4893617021277&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;2.7446808510638&quot;&gt;&lt;tr readability=&quot;5.4893617021277&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;5.031914893617&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;9.8084291187739&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;org-mode. Sync with git over SSH. Been using it for over a decade.&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;Not exclusive to personal knowledge base, but I keep a lot of notes in there because it's my default catch-all, including on the phone since I have Termux installed. It's easily greppable.&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21336435&quot; readability=&quot;3.2592592592593&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;1.6296296296296&quot;&gt;&lt;tr readability=&quot;3.2592592592593&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;3.2592592592593&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;6.6902654867257&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;Keep it stupid, keep it simple.&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;I use Markdown + KaTeX to render math and code. I keep everything in files.&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21336691&quot; readability=&quot;2.180412371134&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21336949&quot; readability=&quot;2.9281045751634&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21335043&quot; readability=&quot;6.3980891719745&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;3.1990445859873&quot;&gt;&lt;tr readability=&quot;6.3980891719745&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;I'm using Notion.so It's not a self-hosted platform and not personal in that sense but it has export to markdown capability so I feel safe storing my knowledgebase there knowing that I can download the data, files, images and everything else I have uploaded in a non-propriatry format&lt;/span&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr coll&quot; id=&quot;21335205&quot; readability=&quot;0.61111111111111&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21339071&quot; readability=&quot;5.2941176470588&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;2.6470588235294&quot;&gt;&lt;tr readability=&quot;5.2941176470588&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;80&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;5.2941176470588&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;9.9607843137255&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;This comment breaks several of the site guidelines quite badly. I appreciate your fine intention to protect the quality of HN—but the downside of being wrong (or even right) about a comment like this is orders of magnitude worse than the upside of being right. You simply can't attack a fellow user like this here. Comments need to remain respectful and assume good faith.&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;If you're worried about abuse, the thing to do is to email hn@ycombinator.com so we can look into it. That's in the guidelines too.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;&lt;a href=&quot;https://news.ycombinator.com/newsguidelines.html&quot; rel=&quot;nofollow&quot;&gt;https://news.ycombinator.com/newsguidelines.html&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21335495&quot; readability=&quot;2.512987012987&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;1.2564935064935&quot;&gt;&lt;tr readability=&quot;2.512987012987&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;80&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;This is too aggressive accusation without any proof given. I am so stupid to believe GP is recommending product in good faith.&lt;/span&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21333850&quot; readability=&quot;3.1794871794872&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21334956&quot; readability=&quot;2.1780821917808&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21336984&quot; readability=&quot;2.3720930232558&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21336387&quot; readability=&quot;2.4161073825503&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;1.2080536912752&quot;&gt;&lt;tr readability=&quot;2.4161073825503&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;I made a dropmark.com account and use it like a private pinterest board. Applies more to my non-web interests though.&lt;/span&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21335717&quot; readability=&quot;4.2808219178082&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;2.1404109589041&quot;&gt;&lt;tr readability=&quot;4.2808219178082&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;I use a very haphazard combo of evernote, google drive, and an ever-growing collection of physical books. It works for me.&lt;/span&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21335533&quot; readability=&quot;4.0573770491803&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;2.0286885245902&quot;&gt;&lt;tr readability=&quot;4.0573770491803&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;I use a blog, personally. It doesn't capture everything, but I do try to capture the big things.&lt;/span&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21332998&quot; readability=&quot;10.296&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;5.148&quot;&gt;&lt;tr readability=&quot;10.296&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;I use a markdown editor, currently Typora, since it has a side pane with folder structure. I keep folders for personal notes, study notes, project plans, compsci “knowledge” where I have massive notes for each subject. All of it is backed up and synced between devices using Nextcloud. Works fine, is free and doesn’t need paid subscriptions.&lt;/span&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21337109&quot; readability=&quot;3.2051282051282&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21335218&quot; readability=&quot;3.0676691729323&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21337894&quot; readability=&quot;2.3076923076923&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21337139&quot; readability=&quot;5.5272727272727&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;2.7636363636364&quot;&gt;&lt;tr readability=&quot;5.5272727272727&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;I recently started using DokuWiki. The reason I like it is that it is actually storing the current copies of pages as .txt files, so I don't have to worry about databases failing or migrating out of the platform or anything like that. It just puts kinda a clean browsing and editing experience on top.&lt;/span&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21336299&quot; readability=&quot;1.6904761904762&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21336062&quot; readability=&quot;7.4654377880184&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;3.7327188940092&quot;&gt;&lt;tr readability=&quot;7.4654377880184&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;11.198156682028&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;22.144721233689&quot;&gt;&lt;span class=&quot;commtext c00&quot;&gt;I split it up into two phases:&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;1. I use Omni Notes (simple note-taking app) and Bear [1] to write down thoughts and longer texts. And a simple voice recording app [2] for bigger ideas that need more words.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;2. After this, I evaluate them and add them to my personal wiki. I’m using BookStack [3] which is the best open-source wiki I’ve found. Every aspect of my life gets its own book with chapters and pages. It’s a pretty straight-forward structure.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;I'm using this process for a year and it served me well (understanding life goals, writing down business ideas, structuring knowledge). Next step is bookmark management, I'll probably try out Shiori [4] (was once featured in a Show HN).&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;[1]: &lt;a href=&quot;https://bear.app&quot; rel=&quot;nofollow&quot;&gt;https://bear.app&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;[2]: &lt;a href=&quot;https://github.com/dkim0419/SoundRecorder&quot; rel=&quot;nofollow&quot;&gt;https://github.com/dkim0419/SoundRecorder&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;[3]: &lt;a href=&quot;https://www.bookstackapp.com&quot; rel=&quot;nofollow&quot;&gt;https://www.bookstackapp.com&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;commtext c00&quot;&gt;[4]: &lt;a href=&quot;https://github.com/go-shiori/shiori&quot; rel=&quot;nofollow&quot;&gt;https://github.com/go-shiori/shiori&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21333748&quot; readability=&quot;1.4893617021277&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;21334910&quot; readability=&quot;2.3858267716535&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;</description>
<pubDate>Wed, 23 Oct 2019 09:55:09 +0000</pubDate>
<dc:creator>smartis2812</dc:creator>
<dc:format>text/html</dc:format>
<dc:identifier>https://news.ycombinator.com/item?id=21332957</dc:identifier>
</item>
</channel>
</rss>