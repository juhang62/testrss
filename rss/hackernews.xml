<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=hnrss.org%2Fnewest%3Fpoints%3D200&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://hnrss.org/newest?points=200" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>Hacker News: Newest</title>
<link>https://news.ycombinator.com/newest</link>
<description>Hacker News RSS</description>
<item>
<title>Mastercard Bans Automatic Billing After Free Trials</title>
<link>https://www.pcmag.com/news/366051/mastercard-bans-automatic-billing-after-free-trials</link>
<guid isPermaLink="true" >https://www.pcmag.com/news/366051/mastercard-bans-automatic-billing-after-free-trials</guid>
<description>&lt;span&gt;&lt;img src=&quot;https://assets.pcmag.com/media/images/628741-mastercard.jpg?thumb=y&amp;amp;width=810&amp;amp;height=456&quot; alt=&quot;Mastercard&quot;/&gt;&lt;/span&gt;&lt;p&gt;&lt;span&gt;Isn't it annoying when you sign up for a free trial, and forget to cancel before the company starts billing you? Mastercard apparently thinks so, because it will no longer allow the practice on its accounts.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;The credit card company this week &lt;a href=&quot;https://newsroom.mastercard.com/2019/01/16/free-trials-without-the-hassle/&quot; target=&quot;_blank&quot;&gt;announced a new policy&lt;/a&gt; requiring merchants to get a cardholder's approval at the end of a trial before they start billing. Companies must send the cardholder an email or text that includes the transaction amount, payment date, and instructions on how to cancel.&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;&quot;For some consumers, a free trial is a great way to test out a new product and get comfortable with it before making a purchasing decision,&quot; Mastercard wrote in its announcement. &quot;However, sometimes a free trial can unwittingly turn into a recurring subscription that is difficult to cancel. These situations can be frustrating and costly for both consumers and their banks.&quot;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;The new policy also requires companies to send cardholders an email or text receipt for every transaction that includes instructions on how to cancel the subscription. Plus, every charge that appears on the customer's statement must now include the seller's website URL or phone number.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&quot;Free trial offers can be a legitimate and useful way to increase sales and improve consumer satisfaction,&quot; Mastercard wrote. &quot;The new rules will help in increase transparency and ensure an outstanding experience for cardholders.&quot;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;It remains to be seen whether other credit card companies will follow suit.&lt;/span&gt;&lt;/p&gt;
</description>
<pubDate>Sat, 23 Nov 2019 15:13:35 +0000</pubDate>
<dc:creator>ceejayoz</dc:creator>
<og:title>Mastercard Bans Automatic Billing After Free Trials</og:title>
<og:type>article</og:type>
<og:url>https://www.pcmag.com/news/366051/mastercard-bans-automatic-billing-after-free-trials</og:url>
<og:image>https://assets.pcmag.com/media/images/628741-mastercard.jpg?thumb=y&amp;width=810&amp;height=456</og:image>
<og:description>The credit card company now requires merchants to get a cardholder's approval, via text or email, at the end of a trial before they start billing.</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.pcmag.com/news/366051/mastercard-bans-automatic-billing-after-free-trials</dc:identifier>
</item>
<item>
<title>AI is mostly about curve fitting (2018)</title>
<link>https://diginomica.com/ai-curve-fitting-not-intelligence</link>
<guid isPermaLink="true" >https://diginomica.com/ai-curve-fitting-not-intelligence</guid>
<description>

Judea Pearl -  fellow ACM, Turing Award winner
&lt;p&gt;As debates around AI's value continue, &lt;a href=&quot;https://venturebeat.com/2018/04/11/overblown-expectations-for-autonomous-cars-could-force-the-next-ai-winter/&quot;&gt;the risk of an AI winter&lt;/a&gt; is real. We need to level set what is real and what is imagined so that the next press release you see describing some amazing breakthrough is properly contextualized.&lt;/p&gt;&lt;p&gt;Unquestionably, the latest spike of interest in AI technology using machine learning and the neuron-inspired deep learning is behind incredible advancements in many software categories.&lt;/p&gt;
&lt;p&gt;Achievements such as language translation, image and scene recognition and conversational UIs that were once the stuff of sci-fi dreams are now a reality.&lt;/p&gt;
&lt;p&gt;However, there’s a growing frustration that the &lt;a href=&quot;https://diginomica.com/2018/05/21/ai-dumb-leading-incrementalism-not-transformation/&quot;&gt;software isn’t really “intelligent”, artificial or otherwise&lt;/a&gt;. Even as software using AI-labeled techniques continues to yield tremendous improvements in most software categories, both academics and skeptical observers have observed that &lt;a href=&quot;https://diginomica.com/2017/01/13/when-algorithms-fail-who-you-gonna-call/&quot;&gt;such algorithms fall far short&lt;/a&gt; of what can be reasonably considered intelligent.&lt;/p&gt;
&lt;h2&gt;Defining intelligence&lt;/h2&gt;
&lt;p&gt;Debates over the meaning of intellect date back to the Greek philosophers who were primarily concerned with what differentiated mankind from the animal kingdom, not machines. Aristotle famously stated that the mark of an educated mind is the ability to entertain a thought without accepting it. Little did he conceive that his maxim might equally be used to distinguish between biological intelligence and the artificial variety.&lt;/p&gt;
&lt;p&gt;Our machines are still incapable of independently coming up with a thought or hypothesis, testing it against others and accepting or rejecting its validity based on reasoning and experimentation, i.e. following the &lt;a href=&quot;https://courses.lumenlearning.com/boundless-psychology/chapter/the-scientific-method/&quot;&gt;core principles of the scientific method.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;While some forms of AI, like &lt;u&gt;&lt;a href=&quot;https://deeplearning4j.org/generative-adversarial-network&quot;&gt;adversarial networks&lt;/a&gt;&lt;/u&gt;, might play opposing goals against each other to reach an optimal result, few would call such algorithmic reasoning ‘intelligent.’&lt;/p&gt;
&lt;p&gt;Rather, it’s a more effective means of achieving a defined goal by having two neural networks work at cross-purposes using a common data set, to achieve a more accurate model than either one alone.&lt;/p&gt;
&lt;p&gt;The critical intellectual distinction between humans and machines is the ability to define goals and reason towards achieving them. It is also the ability to distinguish between cause and effect, understanding that despite two events often happen in close proximity, doesn’t mean that one &lt;em&gt;caused&lt;/em&gt; the other. The &lt;u&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Correlation_does_not_imply_causation&quot;&gt;correlation-causation fallacy&lt;/a&gt;&lt;/u&gt;, often seen in public discourse, is one of the most common logical errors.&lt;/p&gt;
&lt;h2&gt;AI - learning or describing?&lt;/h2&gt;
&lt;p&gt;An emerging debate among AI researchers is whether current machine and deep learning techniques amount a fundamentally new form of algorithmic reasoning or are merely an extension of longstanding mathematical techniques like descriptive statistics and curve fitting.&lt;/p&gt;
&lt;p&gt;In the latter camp is the influential &lt;u&gt;&lt;a href=&quot;http://bayes.cs.ucla.edu/jp_home.html&quot;&gt;professor of computer science&lt;/a&gt;&lt;/u&gt; and &lt;u&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Turing_Award&quot;&gt;Turing award winner&lt;/a&gt;&lt;/u&gt; Judea Pearl who’s &lt;u&gt;&lt;a href=&quot;https://www.basicbooks.com/titles/judea-pearl/the-book-of-why/9780465097609/&quot;&gt;new book&lt;/a&gt;&lt;/u&gt; on the science of cause and effect has ignited a discussion about the future of AI and whether deep learning can lead to anything approaching general human intelligence.&lt;/p&gt;
&lt;p&gt;Pearl had some trenchant observations in a &lt;u&gt;&lt;a href=&quot;https://www.quantamagazine.org/to-build-truly-intelligent-machines-teach-them-cause-and-effect-20180515/&quot;&gt;recent interview&lt;/a&gt;&lt;/u&gt; in which he covered both the ideas in his book and views on the state of AI software, including how the inability of current AI to perform causal reasoning is a severe shortcoming. His assessment of deep learning is both unsparing and enlightening (&lt;strong&gt;&lt;em&gt;emphasis added&lt;/em&gt;&lt;/strong&gt;),&lt;/p&gt;
&lt;blockquote readability=&quot;13&quot;&gt;
&lt;p&gt;As much as I look into what’s being done with deep learning, I see &lt;strong&gt;they’re all stuck there on the level of associations. Curve fitting.&lt;/strong&gt; That sounds like sacrilege, to say that all the impressive achievements of deep learning amount to just fitting a curve to data. From the point of view of the mathematical hierarchy, &lt;strong&gt;no matter how skillfully you manipulate the data and what you read into the data when you manipulate it, it’s still a curve-fitting exercise, albeit complex and nontrivial&lt;/strong&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;In essence, despite their cerebral inspiration, deep learning algorithms amount to another, albeit more powerful data analysis tool that is particularly adept at handling vast amounts of unstructured data.&lt;/p&gt;
&lt;p&gt;Nevertheless, deep learning is an exceptionally versatile and powerful curve fitting technique that can identify previously hidden patterns, extrapolate trends and predict results across a broad spectrum of problems. One risk with curve fitting approaches that are too good at representing a given data set is &lt;u&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Overfitting&quot;&gt;overfitting&lt;/a&gt;&lt;/u&gt;, in which the algorithm fails to recognize normal fluctuations in data and ends up being whipsawed by noise.&lt;/p&gt;
&lt;p&gt;Pearl acknowledges that the success of deep learning has surprised even experts in the field, but he worries that it could cause researchers to get stuck in a conceptual rut and jeopardize progress towards &lt;u&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Artificial_general_intelligence&quot;&gt;general forms of AI&lt;/a&gt;&lt;/u&gt; (&lt;strong&gt;&lt;em&gt;emphasis added&lt;/em&gt;&lt;/strong&gt;).&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;I’m very impressed, because we did not expect that so many problems could be solved by pure curve fitting. It turns out they can. &lt;strong&gt;But I’m asking about the future — what next?&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;AI researchers are aligning into factions defined by their view of deep learning with its most staunch advocates unreceptive to any criticism. Pearl characterizes the environment this way  (&lt;strong&gt;&lt;em&gt;emphasis added&lt;/em&gt;&lt;/strong&gt;),&lt;/p&gt;
&lt;blockquote readability=&quot;10&quot;&gt;
&lt;p&gt;AI is currently split. First, there are those who are intoxicated by the success of machine learning and deep learning and neural nets. &lt;strong&gt;They don’t understand what I’m talking about. They want to continue to fit curves&lt;/strong&gt;. &lt;strong&gt;But when you talk to people who have done any work in AI outside statistical learning, they get it immediately&lt;/strong&gt;. I have read several papers written in the past two months about the limitations of machine learning.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Pearl contends that until algorithms and the machines controlled by them can reason about cause and effect, or at least conceptualize the difference, their utility and versatility will never approach that of humans.&lt;/p&gt;
&lt;p&gt;He says that it will be impossible to have meaningful dialog with robots until they can simulate human intuition, which requires the ability to understand cause and effect along with alternative actions and outcomes that it might have taken. In short, we're back to Aristotle.&lt;/p&gt;
&lt;p&gt;While he might be in the minority, Pearl isn’t alone in recognizing the need for AI to think (sic) beyond deep learning before it can build machines that think like people.&lt;/p&gt;
&lt;p&gt;A &lt;u&gt;&lt;a href=&quot;http://www.mit.edu/~tomeru/papers/machines_that_think.pdf&quot;&gt;paper by MIT researchers&lt;/a&gt;&lt;/u&gt; argues that creating human-like learning and thinking machines requires that they be capable of building causal models of the world that can understand and explain their environment, not just solve problems using pattern recognition.&lt;/p&gt;
&lt;p&gt;The paper also contends that such systems must be grounded in both the physical (physics) and social (psychology) sciences to have any capability for intuitive reasoning about the world that would enable machines to “rapidly acquire and generalize knowledge to new tasks and situations.” Much like Pearl, the authors conclude with an exhortation to AI researchers (&lt;strong&gt;&lt;em&gt;emphasis added&lt;/em&gt;&lt;/strong&gt;),&lt;/p&gt;
&lt;blockquote readability=&quot;10&quot;&gt;
&lt;p&gt;Rather than just building systems that recognize handwritten characters and play Frostbite or Go as the end result of an asymptotic process, &lt;strong&gt;we suggest that deep learning and other computational paradigms should aim to tackle these tasks using as little training data as people need&lt;/strong&gt;, and also to &lt;strong&gt;evaluate models on a range of human-like generalizations beyond the one task the model was trained on.&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Such &lt;em&gt;artificial general intelligence&lt;/em&gt; (AGI) is the stuff of dystopian novels and warnings from tech luminaries like &lt;u&gt;&lt;a href=&quot;https://www.npr.org/sections/thetwo-way/2017/07/17/537686649/elon-musk-warns-governors-artificial-intelligence-poses-existential-risk&quot;&gt;Elon Musk&lt;/a&gt;&lt;/u&gt; and &lt;u&gt;&lt;a href=&quot;https://www.theguardian.com/technology/2015/jan/29/artificial-intelligence-strong-concern-bill-gates&quot;&gt;Bill Gates&lt;/a&gt;&lt;/u&gt;. The worst case scenarios are unlikely to be achieved anytime soon, or perhaps ever, if as Pearl fears, researchers keep refining existing techniques and don’t expand their conceptual horizons.&lt;/p&gt;
&lt;h2&gt;My take&lt;/h2&gt;
&lt;p&gt;Although I frequently use the term AI, it’s always with reluctance and out of convention and not conviction.&lt;/p&gt;
&lt;p&gt;Much like IoT and cloud, epithets that are equally abused and imprecise, AI is a widely understood, convenient shorthand for a set of techniques that are increasingly powerful, yet fundamentally distinct from human intelligence and rationality.&lt;/p&gt;
&lt;p&gt;While I regularly chronicle the impressive applications of today’s ML and deep learning software, I’ve recognized that it is a stretch to call it ‘intelligent’. Perhaps ‘adaptive’ and ‘self-optimizing’ are better terms. Even these come with caveats since the models require extensive human tuning of parameters and structure, as I’ve discussed &lt;u&gt;&lt;a href=&quot;https://diginomica.com/2017/05/25/ai-business-still-hard-waiting-netscape-moment/&quot;&gt;here&lt;/a&gt;&lt;/u&gt; and &lt;u&gt;&lt;a href=&quot;https://diginomica.com/2017/08/09/automated-deep-learning-finding-right-model/&quot;&gt;here&lt;/a&gt;&lt;/u&gt;.&lt;/p&gt;
&lt;p&gt;The technology industry writ large needs to have a collective epiphany regarding the state of AI technology.&lt;/p&gt;
&lt;p&gt;Yes, celebrate its successes, but acknowledge that far more fundamental research is needed before we’ll have software that can be legitimately called intelligent.&lt;/p&gt;
&lt;p&gt;Much work remains to teach machines causality, although &lt;u&gt;&lt;a href=&quot;http://ftp.cs.ucla.edu/pub/stat_ser/r402.pdf&quot;&gt;Pearl has already provided&lt;/a&gt;&lt;/u&gt; the necessary system of mathematics using Bayesian networks to &lt;u&gt;&lt;a href=&quot;https://arxiv.org/pdf/1305.5506v1.pdf&quot;&gt;describe causal relationships in what he named Do-Calculus&lt;/a&gt;&lt;/u&gt;.&lt;/p&gt;
&lt;p&gt;In the meantime, users of various machine learning tools must be aware of their limitations and of not making categorical inferences from results from a particular problem and data set.&lt;/p&gt;
</description>
<pubDate>Sat, 23 Nov 2019 13:29:09 +0000</pubDate>
<dc:creator>Anon84</dc:creator>
<og:type>article</og:type>
<og:url>https://diginomica.com/ai-curve-fitting-not-intelligence</og:url>
<og:title>AI today and tomorrow is mostly about curve fitting, not intelligence</og:title>
<og:description>Important academic discussions around the 'intelligence' in AI are emerging. They help level set the reality of what's possible now and into the future. Here's your guide as to what is real and what's imagined.</og:description>
<og:image>https://diginomica.com/sites/default/files/images/2018-06/judea-pearl.jpg</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://diginomica.com/ai-curve-fitting-not-intelligence</dc:identifier>
</item>
<item>
<title>Cook: ‘China Hasn’t Pressured Us’</title>
<link>https://daringfireball.net/linked/2019/11/21/cook-china-pressure</link>
<guid isPermaLink="true" >https://daringfireball.net/linked/2019/11/21/cook-china-pressure</guid>
<description>&lt;p&gt;ABC News:&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;Cook said he isn’t concerned over Apple’s relationship with China. “China really hasn’t pressured us, and so I don’t envision that,” he added.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;If China hasn’t pressured Apple, why was the Taiwanese flag emoji removed from iOS devices in Hong Kong?&lt;/p&gt;
&lt;p&gt;It’s far from the biggest issue surrounding China. I get that. It’s just a flag emoji, and we’re talking about a regime &lt;a href=&quot;https://www.nytimes.com/interactive/2019/11/16/world/asia/china-xinjiang-documents.html&quot;&gt;that has put over a million people into concentration camps&lt;/a&gt;. But it is bullshit. Under the &lt;a href=&quot;https://en.wikipedia.org/wiki/One_country,_two_systems&quot;&gt;one-country-two-systems arrangement&lt;/a&gt; China itself agreed to regarding Hong Kong, there is nothing illegal about the Taiwanese flag.&lt;/p&gt;
&lt;p&gt;It’s flat-out wrong that Apple removed the Taiwanese flag emoji in Hong Kong. But if they did so at the behest of China at least we’d have a reason why. If China hasn’t pressured Apple on this point, small though it may be, why in the world did Apple remove the flag?&lt;/p&gt;
&lt;p&gt;It reeks of cowardice.&lt;/p&gt;
&lt;p class=&quot;smallprint&quot;&gt;★ &lt;em&gt;Thursday, 21 November 2019&lt;/em&gt;&lt;/p&gt;
</description>
<pubDate>Sat, 23 Nov 2019 11:16:03 +0000</pubDate>
<dc:creator>pcr910303</dc:creator>
<og:title>Cook: ‘China Really Hasn’t Pressured Us’</og:title>
<og:url>https://daringfireball.net/linked/2019/11/21/cook-china-pressure</og:url>
<og:description>Link to: https://abcnews.go.com/Business/tim-cook-talks-vision-apple-breaks-ground-facility/story?id=67165042</og:description>
<og:image>https://daringfireball.net/graphics/df-square-1024</og:image>
<og:type>article</og:type>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://daringfireball.net/linked/2019/11/21/cook-china-pressure</dc:identifier>
</item>
<item>
<title>The Bus Ticket Theory of Genius</title>
<link>http://paulgraham.com/genius.html</link>
<guid isPermaLink="true" >http://paulgraham.com/genius.html</guid>
<description>&lt;img src=&quot;https://s.yimg.com/aah/paulgraham/the-bus-ticket-theory-of-genius-1.gif&quot; width=&quot;261&quot; height=&quot;18&quot; border=&quot;0&quot; hspace=&quot;0&quot; vspace=&quot;0&quot; alt=&quot;The Bus Ticket Theory of Genius&quot; /&gt;&lt;p&gt;&lt;span&gt;November 2019&lt;/span&gt;&lt;/p&gt;&lt;p&gt;Everyone knows that to do great work you need both natural ability and determination. But there's a third ingredient that's not as well understood: an obsessive interest in a particular topic.&lt;/p&gt;&lt;p&gt;To explain this point I need to burn my reputation with some group of people, and I'm going to choose bus ticket collectors. There are people who collect old bus tickets. Like many collectors, they have an obsessive interest in the minutiae of what they collect. They can keep track of distinctions between different types of bus tickets that would be hard for the rest of us to remember. Because we don't care enough. What's the point of spending so much time thinking about old bus tickets?&lt;/p&gt;&lt;p&gt;Which leads us to the second feature of this kind of obsession: there is no point. A bus ticket collector's love is disinterested. They're not doing it to impress us or to make themselves rich, but for its own sake.&lt;/p&gt;&lt;p&gt;When you look at the lives of people who've done great work, you see a consistent pattern. They often begin with a bus ticket collector's obsessive interest in something that would have seemed pointless to most of their contemporaries. One of the most striking features of Darwin's book about his voyage on the Beagle is the sheer depth of his interest in natural history. His curiosity seems infinite. Ditto for Ramanujan, sitting by the hour working out on his slate what happens to series.&lt;/p&gt;&lt;p&gt;It's a mistake to think they were &quot;laying the groundwork&quot; for the discoveries they made later. There's too much intention in that metaphor. Like bus ticket collectors, they were doing it because they liked it.&lt;/p&gt;&lt;p&gt;But there is a difference between Ramanujan and a bus ticket collector. Series matter, and bus tickets don't.&lt;/p&gt;&lt;p&gt;If I had to put the recipe for genius into one sentence, that might be it: to have a disinterested obsession with something that matters.&lt;/p&gt;&lt;p&gt;Aren't I forgetting about the other two ingredients? Less than you might think. An obsessive interest in a topic is both a proxy for ability and a substitute for determination. Unless you have sufficient mathematical aptitude, you won't find series interesting. And when you're obsessively interested in something, you don't need as much determination: you don't need to push yourself as hard when curiosity is pulling you.&lt;/p&gt;&lt;p&gt;An obsessive interest will even bring you luck, to the extent anything can. Chance, as Pasteur said, favors the prepared mind, and if there's one thing an obsessed mind is, it's prepared.&lt;/p&gt;&lt;p&gt;The disinterestedness of this kind of obsession is its most important feature. Not just because it's a filter for earnestness, but because it helps you discover new ideas.&lt;/p&gt;&lt;p&gt;The paths that lead to new ideas tend to look unpromising. If they looked promising, other people would already have explored them. How do the people who do great work discover these paths that others overlook? The popular story is that they simply have better vision: because they're so talented, they see paths that others miss. But if you look at the way great discoveries are made, that's not what happens. Darwin didn't pay closer attention to individual species than other people because he saw that this would lead to great discoveries, and they didn't. He was just really, really interested in such things.&lt;/p&gt;&lt;p&gt;Darwin couldn't turn it off. Neither could Ramanujan. They didn't discover the hidden paths that they did because they seemed promising, but because they couldn't help it. That's what allowed them to follow paths that someone who was merely ambitious would have ignored.&lt;/p&gt;&lt;p&gt;What rational person would decide that the way to write great novels was to begin by spending several years creating an imaginary elvish language, like Tolkien, or visiting every household in southwestern Britain, like Trollope? No one, including Tolkien and Trollope.&lt;/p&gt;&lt;p&gt;The bus ticket theory is similar to Carlyle's famous definition of genius as an infinite capacity for taking pains. But there are two differences. The bus ticket theory makes it clear that the source of this infinite capacity for taking pains is not infinite diligence, as Carlyle seems to have meant, but the sort of infinite interest that collectors have. It also adds an important qualification: an infinite capacity for taking pains about something that matters.&lt;/p&gt;&lt;p&gt;So what matters? You can never be sure. It's precisely because no one can tell in advance which paths are promising that you can discover new ideas by working on what you're interested in.&lt;/p&gt;&lt;p&gt;But there are some heuristics you can use to guess whether an obsession might be one that matters. For example, it's more promising if you're creating something, rather than just consuming something someone else creates. It's more promising if something you're interested in is difficult, especially if it's &lt;a href=&quot;http://paulgraham.com/work.html&quot;&gt;more difficult for other people&lt;/a&gt; than it is for you. And the obsessions of talented people are more likely to be promising. When talented people become interested in random things, they're not truly random.&lt;/p&gt;&lt;p&gt;But you can never be sure. In fact, here's an interesting idea that's also rather alarming if it's true: it may be that to do great work, you also have to waste a lot of time.&lt;/p&gt;&lt;p&gt;In many different areas, reward is proportionate to risk. If that rule holds here, then the way to find paths that lead to truly great work is to be willing to expend a lot of effort on things that turn out to be every bit as unpromising as they seem.&lt;/p&gt;&lt;p&gt;I'm not sure if this is true. On one hand, it seems surprisingly difficult to waste your time so long as you're working hard on something interesting. So much of what you do ends up being useful. But on the other hand, the rule about the relationship between risk and reward is so powerful that it seems to hold wherever risk occurs. &lt;a href=&quot;http://paulgraham.com/disc.html&quot;&gt;Newton's&lt;/a&gt; case, at least, suggests that the risk/reward rule holds here. He's famous for one particular obsession of his that turned out to be unprecedentedly fruitful: using math to describe the world. But he had two other obsessions, alchemy and theology, that seem to have been complete wastes of time. He ended up net ahead. His bet on what we now call physics paid off so well that it more than compensated for the other two. But were the other two necessary, in the sense that he had to take big risks to make such big discoveries? I don't know.&lt;/p&gt;&lt;p&gt;Here's an even more alarming idea: might one make all bad bets? It probably happens quite often. But we don't know how often, because these people don't become famous.&lt;/p&gt;&lt;p&gt;It's not merely that the returns from following a path are hard to predict. They change dramatically over time. 1830 was a really good time to be obsessively interested in natural history. If Darwin had been born in 1709 instead of 1809, we might never have heard of him.&lt;/p&gt;&lt;p&gt;What can one do in the face of such uncertainty? One solution is to hedge your bets, which in this case means to follow the obviously promising paths instead of your own private obsessions. But as with any hedge, you're decreasing reward when you decrease risk. If you forgo working on what you like in order to follow some more conventionally ambitious path, you might miss something wonderful that you'd otherwise have discovered. That too must happen all the time, perhaps even more often than the genius whose bets all fail.&lt;/p&gt;&lt;p&gt;The other solution is to let yourself be interested in lots of different things. You don't decrease your upside if you switch between equally genuine interests based on which seems to be working so far. But there is a danger here too: if you work on too many different projects, you might not get deeply enough into any of them.&lt;/p&gt;&lt;p&gt;One interesting thing about the bus ticket theory is that it may help explain why different types of people excel at different kinds of work. Interest is much more unevenly distributed than ability. If natural ability is all you need to do great work, and natural ability is evenly distributed, you have to invent elaborate theories to explain the skewed distributions we see among those who actually do great work in various fields. But it may be that much of the skew has a simpler explanation: different people are interested in different things.&lt;/p&gt;&lt;p&gt;The bus ticket theory also explains why people are less likely to do great work after they have children. Here interest has to compete not just with external obstacles, but with another interest, and one that for most people is extremely powerful. It's harder to find time for work after you have kids, but that's the easy part. The real change is that you don't want to.&lt;/p&gt;&lt;p&gt;But the most exciting implication of the bus ticket theory is that it suggests ways to encourage great work. If the recipe for genius is simply natural ability plus hard work, all we can do is hope we have a lot of ability, and work as hard as we can. But if interest is a critical ingredient in genius, we may be able, by cultivating interest, to cultivate genius.&lt;/p&gt;&lt;p&gt;For example, for the very ambitious, the bus ticket theory suggests that the way to do great work is to relax a little. Instead of gritting your teeth and diligently pursuing what all your peers agree is the most promising line of research, maybe you should try doing something just for fun. And if you're stuck, that may be the vector along which to break out.&lt;/p&gt;&lt;p&gt;I've always liked &lt;a href=&quot;http://paulgraham.com/hamming.html&quot;&gt;Hamming's&lt;/a&gt; famous double-barrelled question: what are the most important problems in your field, and why aren't you working on one of them? It's a great way to shake yourself up. But it may be overfitting a bit. It might be at least as useful to ask yourself: if you could take a year off to work on something that probably wouldn't be important but would be really interesting, what would it be?&lt;/p&gt;&lt;p&gt;The bus ticket theory also suggests a way to avoid slowing down as you get older. Perhaps the reason people have fewer new ideas as they get older is not simply that they're losing their edge. It may also be because once you become established, you can no longer mess about with irresponsible side projects the way you could when you were young and no one cared what you did.&lt;/p&gt;&lt;p&gt;The solution to that is obvious: remain irresponsible. It will be hard, though, because the apparently random projects you take up to stave off decline will read to outsiders as evidence of it. And you yourself won't know for sure that they're wrong. But it will at least be more fun to work on what you want.&lt;/p&gt;&lt;p&gt;It may even be that we can cultivate a habit of intellectual bus ticket collecting in kids. The usual plan in education is to start with a broad, shallow focus, then gradually become more specialized. But I've done the opposite with my kids. I know I can count on their school to handle the broad, shallow part, so I take them deep.&lt;/p&gt;&lt;p&gt;When they get interested in something, however random, I encourage them to go preposterously, bus ticket collectorly, deep. I don't do this because of the bus ticket theory. I do it because I want them to feel the joy of learning, and they're never going to feel that about something I'm making them learn. It has to be something they're interested in. I'm just following the path of least resistance; depth is a byproduct. But if in trying to show them the joy of learning I also end up training them to go deep, so much the better.&lt;/p&gt;&lt;p&gt;Will it have any effect? I have no idea. But that uncertainty may be the most interesting point of all. There is so much more to learn about how to do great work. As old as human civilization feels, it's really still very young if we haven't nailed something so basic. It's exciting to think there are still discoveries to make about discovery. If that's the sort of thing you're interested in.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Notes&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;[1] There are other types of collecting that illustrate this point better than bus tickets, but they're also more popular. It seemed just as well to use an inferior example rather than offend more people by telling them their hobby doesn't matter.&lt;/p&gt;&lt;p&gt;[2] I worried a little about using the word &quot;disinterested,&quot; since some people mistakenly believe it means not interested. But anyone who expects to be a genius will have to know the meaning of such a basic word, so I figure they may as well start now.&lt;/p&gt;&lt;p&gt;[3] Think how often genius must have been nipped in the bud by people being told, or telling themselves, to stop messing about and be responsible. Ramanujan's mother was a huge enabler. Imagine if she hadn't been. Imagine if his parents had made him go out and get a job instead of sitting around at home doing math.&lt;/p&gt;&lt;p&gt;On the other hand, anyone quoting the preceding paragraph to justify not getting a job is probably mistaken.&lt;/p&gt;&lt;p&gt;[4] 1709 Darwin is to time what the &lt;a href=&quot;http://paulgraham.com/cities.html&quot;&gt;Milanese Leonardo&lt;/a&gt; is to space.&lt;/p&gt;&lt;p&gt;[5] &quot;An infinite capacity for taking pains&quot; is a paraphrase of what Carlyle wrote. What he wrote, in his &lt;em&gt;History of Frederick the Great&lt;/em&gt;, was &quot;... it is the fruit of 'genius' (which means transcendent capacity of taking trouble, first of all)....&quot; Since the paraphrase seems the name of the idea at this point, I kept it.&lt;/p&gt;&lt;p&gt;Carlyle's History was published in 1858. In 1785 H�rault de S�chelles quoted Buffon as saying &quot;Le g�nie n'est qu'une plus grande aptitude � la patience.&quot; (Genius is only a greater aptitude for patience.)&lt;/p&gt;&lt;p&gt;[6] Trollope was establishing the system of postal routes. He himself sensed the obsessiveness with which he pursued this goal.
&lt;/p&gt;&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;&lt;span&gt;It is amusing to watch how a passion will grow upon a man. During those two years it was the ambition of my life to cover the country with rural letter-carriers.&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;&lt;span&gt;Even Newton occasionally sensed the degree of his obsessiveness. After computing pi to 15 digits, he wrote in a letter to a friend:&lt;/span&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;&lt;span&gt;I am ashamed to tell you to how many figures I carried these computations, having no other business at the time.&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;span&gt;Incidentally, Ramanujan was also a compulsive calculator. As Kanigel writes in his excellent biography:&lt;/span&gt;
&lt;blockquote readability=&quot;10&quot;&gt;
&lt;p&gt;&lt;span&gt;One Ramanujan scholar, B. M. Wilson, later told how Ramanujan's research into number theory was often &quot;preceded by a table of numerical results, carried usually to a length from which most of us would shrink.&quot;&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;span readability=&quot;25.669599217986&quot;&gt;[7] Working to understand the natural world counts as creating rather than consuming.&lt;p&gt;Newton tripped over this distinction when he chose to work on theology. His beliefs did not allow him to see it, but chasing down paradoxes in nature is fruitful in a way that chasing down paradoxes in sacred texts is not.&lt;/p&gt;&lt;p&gt;[8] How much of people's propensity to become interested in a topic is inborn? My experience so far suggests the answer is: most of it. Different kids get interested in different things, and it's hard to make a child interested in something they wouldn't otherwise be. Not in a way that sticks. The most you can do on behalf of a topic is to make sure it gets a fair showing — to make it clear to them, for example, that there's more to math than the dull drills they do in school. After that it's up to the child.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Thanks&lt;/strong&gt; to Marc Andreessen, Trevor Blackwell, Patrick Collison, Kevin Lacker, Jessica Livingston, Jackie McDonough, Robert Morris, Lisa Randall, Zak Stone, and &lt;a href=&quot;https://twitter.com/paulg/status/1196537802621669376&quot;&gt;my 7 year old&lt;/a&gt; for reading drafts of this.&lt;/p&gt;&lt;/span&gt;</description>
<pubDate>Sat, 23 Nov 2019 10:06:33 +0000</pubDate>
<dc:creator>pilingual</dc:creator>
<dc:format>text/html</dc:format>
<dc:identifier>http://paulgraham.com/genius.html</dc:identifier>
</item>
<item>
<title>PIA: Our Merger with Kape Technologies – Addressing Your Concerns</title>
<link>https://old.reddit.com/r/PrivateInternetAccess/comments/dz2w53/our_merger_with_kape_technologies_addressing_your/</link>
<guid isPermaLink="true" >https://old.reddit.com/r/PrivateInternetAccess/comments/dz2w53/our_merger_with_kape_technologies_addressing_your/</guid>
<description>&lt;p&gt;&lt;span class=&quot;score&quot; title=&quot;76&quot;&gt;76&lt;/span&gt;  · &lt;/p&gt;
&lt;p&gt;Longtime PIA user here - Run, Don't Walk, Away from PIA in Light of the Merger&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;score&quot; title=&quot;34&quot;&gt;34&lt;/span&gt;  · &lt;/p&gt;
&lt;p&gt;What vpn services are people moving to?&lt;/p&gt;


&lt;p&gt;The official PIA answer to my cancellation invoked the &quot;United Nations Declaration of Human Rights&quot; to show that they are on a mission to &quot;Protect the next three billion people connected to the internet&quot; and asking for time to prove it. This is hilariously over the top.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;score&quot; title=&quot;11&quot;&gt;11&lt;/span&gt;  · &lt;/p&gt;
&lt;p&gt;KAPE mission statement page doesn’t use HTTPS&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;score&quot; title=&quot;7&quot;&gt;7&lt;/span&gt;  · &lt;/p&gt;
&lt;p&gt;As someone who only uses PIA to route torrent traffic, how concerned should I be RE: Kape?&lt;/p&gt;

&lt;p&gt;· &lt;/p&gt;
&lt;p&gt;It looks like Kape's end goal is to actually assume the name &quot;Private Internet Access&quot; for itself.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;score&quot; title=&quot;21&quot;&gt;21&lt;/span&gt;  · &lt;/p&gt;
&lt;p&gt;How do I delete my account?&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;score&quot; title=&quot;12&quot;&gt;12&lt;/span&gt;  · &lt;/p&gt;
&lt;p&gt;I am an ex-Cyberghost user who moved to PIA VPN because Robert Knapp the owner of Cyberghost was very reluctant to make it a no log vpn, they only made it so after they realized that is where the money is, even then they use words that seem very suspicious and their terms suck. Robert Knapp is a big&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;score&quot; title=&quot;25&quot;&gt;25&lt;/span&gt;  · &lt;/p&gt;
&lt;p&gt;Why everyone should know that a simple &quot;no logs&quot; policy is NOT enough.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;score&quot; title=&quot;31&quot;&gt;31&lt;/span&gt;  · &lt;/p&gt;
&lt;p&gt;What alternative to PIA that is on both android and iOS and has same price range?&lt;/p&gt;
</description>
<pubDate>Sat, 23 Nov 2019 04:35:25 +0000</pubDate>
<dc:creator>rahuldottech</dc:creator>
<og:image>https://www.redditstatic.com/new-icon.png</og:image>
<og:description>Good morning all, First of all, I want to apologize for our delayed response. As you can imagine, with any transition, it’s been a hectic...</og:description>
<og:title>Our Merger with Kape Technologies - Addressing Your Concerns</og:title>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://old.reddit.com/r/PrivateInternetAccess/comments/dz2w53/our_merger_with_kape_technologies_addressing_your/</dc:identifier>
</item>
<item>
<title>Save .org</title>
<link>https://savedotorg.org/</link>
<guid isPermaLink="true" >https://savedotorg.org/</guid>
<description>&lt;h2&gt;Help &lt;span&gt;stop the sale&lt;/span&gt; of Public Interest Registry to a Private Equity Firm&lt;/h2&gt;
&lt;p&gt;November 22, 2019&lt;/p&gt;
&lt;p&gt;Internet Society&lt;br/&gt;Attn: Andrew Sullivan, President and CEO&lt;br/&gt;11710 Plaza America Drive, Suite 400&lt;br/&gt;Reston, VA 20190&lt;/p&gt;
&lt;p&gt;Dear Mr. Sullivan,&lt;br/&gt;We urge you to &lt;span&gt;stop the sale&lt;/span&gt; of the Public Interest Registry (PIR) to Ethos Capital.&lt;/p&gt;
&lt;p&gt;Non-governmental organizations all over the world rely on the .ORG top-level domain.&lt;/p&gt;
&lt;p&gt;Decisions affecting .ORG must be made with the consultation of the NGO community, overseen by a trusted community leader. If the Internet Society (ISOC) can no longer be that leader, it should work with the NGO community and the Internet Corporation for Assigned Names and Numbers (ICANN) to find an appropriate replacement.&lt;/p&gt;
&lt;p&gt;The 2019 .ORG Registry Agreement represents a significant departure from .ORG’s 34-year history. It gives the registry the power to make several policy decisions that would be detrimental to the .ORG community:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;The power to raise .ORG registration fees without the approval of ICANN or the .ORG community. A .ORG price hike would put many cash-strapped NGOs in the difficult position of either paying the increased fees or losing the legitimacy and brand recognition of a .ORG domain.&lt;/li&gt;
&lt;li&gt;The power to develop and implement Rights Protection Mechanisms unilaterally, without consulting the .ORG community . If such mechanisms are not carefully crafted in collaboration with the NGO community, they risk censoring completely legal nonprofit activities.&lt;/li&gt;
&lt;li&gt;The power to implement processes to suspend domain names based on accusations of “activity contrary to applicable law.” The .ORG registry should not implement such processes without understanding how state actors frequently target NGOs with allegations of illegal activity.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;A registry could abuse these powers to do significant harm to the global NGO sector, intentionally or not. We cannot afford to put them into the hands of a private equity firm that has not earned the trust of the NGO community. .ORG must be managed by a leader that puts the needs of NGOs over profits.&lt;/p&gt;
&lt;p&gt;When ISOC originally proposed transferring management of .ORG to PIR in 2002, ISOC’s then President and CEO Lynn St. Amour promised that .ORG would continue to be driven by the NGO community—in her words, PIR would “draw upon the resources of ISOC’s extended global network to drive policy and management.” As long-time members of that global network, we insist that you keep that promise.&lt;/p&gt;
&lt;hr/&gt;&lt;div class=&quot;ntc-logo-list&quot;&gt;&lt;span class=&quot;ntc-sponsor-category&quot;&gt;Original signers&lt;/span&gt;
&lt;/div&gt;
</description>
<pubDate>Sat, 23 Nov 2019 01:02:44 +0000</pubDate>
<dc:creator>jaden</dc:creator>
<og:type>website</og:type>
<og:title>Save .ORG | SaveDotOrg.org</og:title>
<og:description>The .org domain is about to be sold to a private equity firm. Join the coalition of nonprofits opposed to this blatant disregard of the public interest.</og:description>
<og:url>https://savedotorg.org/</og:url>
<og:image>https://savedotorg.org/wp-content/uploads/2019/11/savedotorg_facebook_1200x630.png</og:image>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://savedotorg.org/</dc:identifier>
</item>
<item>
<title>Tesla PowerWall 2 Hack</title>
<link>https://github.com/hackerschoice/thc-tesla-powerwall2-hack</link>
<guid isPermaLink="true" >https://github.com/hackerschoice/thc-tesla-powerwall2-hack</guid>
<description>&lt;div class=&quot;Box-body&quot;&gt;
&lt;article class=&quot;markdown-body entry-content p-5&quot; itemprop=&quot;text&quot;&gt;
&lt;p&gt;24h ago Elon Musk announced to build the next &lt;a href=&quot;https://techcrunch.com/2019/11/12/elon-musk-picks-berlin-for-teslas-europe-gigafactory/&quot; rel=&quot;nofollow&quot;&gt;TESLA Gigafactory in Germany&lt;/a&gt;, somewhere near Berlin. Here at THC we consider Berlin to be our home turf. Welcome to Berlin, Mr. Musk.❤️&lt;/p&gt;
&lt;p&gt;Let's take a look at this TESLA Powerwall 2. Let's make sure the security is up to our standards before it is being sold to our citizens.&lt;/p&gt;
&lt;p&gt;This is a start. Take this and take it further.&lt;/p&gt;
&lt;p&gt;Twitter: &lt;a href=&quot;https://www.twitter.com/hackerschoice&quot; rel=&quot;nofollow&quot;&gt;@hackerschoice&lt;/a&gt;&lt;br/&gt;eMail: root at thc.org&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;&lt;strong&gt;EXECUTIVE SUMMARY&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;GUI wide open.&lt;/li&gt;
&lt;li&gt;Default password on WiFi and management interface&lt;/li&gt;
&lt;li&gt;Attacker can cause financial damage to consumer&lt;/li&gt;
&lt;li&gt;Attacker can dump entire PW Load into the grid at once&lt;/li&gt;
&lt;li&gt;Attacker can oscilate between CHARGING and DUMPING (microseconds, the poor sub-station!)&lt;/li&gt;
&lt;li&gt;Attacker can change grid codes.&lt;/li&gt;
&lt;/ol&gt;&lt;hr/&gt;&lt;p&gt;&lt;strong&gt;Introduction:&lt;/strong&gt; The Tesla Powerwall 2 (PW) is a battery storage solution. It is often installed in combination with photovoltaic solar panels (PVs). The PW will store the PV generated power during daytime when the sun is shining and make the power available to the house when the sun is not shining. The PW can store up to 13.5kW of electric power and load/unload it at 5kW (7kW peak US / 5kW peak in the UK).&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;&lt;strong&gt;Components:&lt;/strong&gt; The Gateway (GW) consists of a Single Board Computer (SBC) and an energy meter (Neurio).&lt;/p&gt;
&lt;p&gt;The SBC is custom built by WinSystems Inc and is called the G400.&lt;/p&gt;
&lt;p&gt;The Neurio energy meter is the W1 module. It connects to the SBC via WiFi.&lt;/p&gt;
&lt;p&gt;RS-485 is used to communicate between the SBC and the battery. Up to 10 batteries can be connected to a single GW (daisy-chain).&lt;/p&gt;
&lt;p&gt;The research is based on GUI firmware &lt;em&gt;1.10.2&lt;/em&gt; and internal firmware &lt;em&gt;Tesla-0.0.7&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;The GW can be configured to connect via Ethernet, GSM and Wifi to the Internet/Tesla-HQ. The Internet connection is used for firmware updates and for Tesla to fiddle with your PW. Tesla has unrestricted and remote management capability.&lt;/p&gt;
&lt;p&gt;&lt;a target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot; href=&quot;https://github.com/hackerschoice/thc-tesla-powerwall2-hack/blob/master/images/tesla-pw-gw.jpg&quot;&gt;&lt;img src=&quot;https://github.com/hackerschoice/thc-tesla-powerwall2-hack/raw/master/images/tesla-pw-gw.jpg&quot; alt=&quot;Tesla GW PCB&quot;/&gt;&lt;/a&gt; Download: &lt;a href=&quot;https://github.com/hackerschoice/thc-tesla-powerwall2-hack/blob/master/images/tesla-pw-gw.jpg&quot;&gt;tesla-pw-gw.jpg&lt;/a&gt;&lt;br/&gt;Download: &lt;a href=&quot;https://github.com/hackerschoice/thc-tesla-powerwall2-hack/blob/master/images/tesla-pw-gw-front.jpg&quot;&gt;tesla-pw-gw-front.jpg&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;22/tcp open  ssh (SSH-2.0-OpenSSH_7.2)
80/tcp open  http (PW UI running here)
8306/tcp  open  Welcome to Model S hec-updater ONLINE Built for Package Version: 17.23.0 (up 28754.018395333s)
29810/tcp open  unknown
MAC ETH  Address: 00:01:45:07:31:17 (Winsystems)
MAC WiFi Address: 00:23:A7:AF:de:ad (Redpine Signals)
&lt;/code&gt;
&lt;/pre&gt;
&lt;hr/&gt;&lt;p&gt;&lt;strong&gt;PW-UI Management Interface&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The PW-GW’s management interface is accessible via WiFi. The WiFi network name is &lt;em&gt;TEG-XYZ&lt;/em&gt; with XYZ being the last 3 digits of the PW’s serial number. TEG stands for ‘Tesla Energy Gateway’.&lt;/p&gt;
&lt;p&gt;The password for the WiFi is the serial number. The serial number looks like this:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;ST&amp;lt;YY&amp;gt;&amp;lt;L&amp;gt;0001&amp;lt;XYZ&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;YY is the built year and L is the revision number. I’ve seen revisions with letter D through to I. For example &lt;em&gt;ST17H0001789&lt;/em&gt; would be a valid password for the Tesla PW on a WiFi network with SSID TEG-789.&lt;/p&gt;
&lt;p&gt;The Management Interface (PW-UI) is accessible at &lt;a href=&quot;http://192.168.91.1&quot; rel=&quot;nofollow&quot;&gt;http://192.168.91.1&lt;/a&gt;. The webpage will ask for a password which is again the serial number. The same management interface is accessible via the ethernet connection.&lt;/p&gt;
&lt;p&gt;The password can not be changed. It is not possible to disable the WiFi network. I accessed mine from 50m away. It's broadcasting its SSID as well (yeha!).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;THC says: Fix it! No default passwords. Do not have the WiFi accessable unless during installation.&lt;/strong&gt;&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;&lt;strong&gt;CT fun:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The Tesla PW comes with two CT sensors. These are A/C current clamps that are installed around the LIVE wire of the incoming GRID line (house LIVE) and the LIVE wire of the SOLAR PV.&lt;/p&gt;
&lt;p&gt;&lt;a target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot; href=&quot;https://github.com/hackerschoice/thc-tesla-powerwall2-hack/blob/master/images/Current-Transformer.jpg&quot;&gt;&lt;img src=&quot;https://github.com/hackerschoice/thc-tesla-powerwall2-hack/raw/master/images/Current-Transformer.jpg&quot; alt=&quot;CT Clamp&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The Tesla PW uses these clamps to determine when to charge the PW from the Solar PV. E.g. the PW goes into charging mode when the Solar PV generate more electricity than the house uses.&lt;/p&gt;
&lt;p&gt;The CT sensors have to be installed with the correct orientation or otherwise the GW gets an inverted (negative) reading. E.g. The GW thinks the house is exporting electricity rather than importing from the grid. Electricians do make mistakes and Tesla has this &lt;em&gt;amazing&lt;/em&gt; feature to &lt;em&gt;invert the reading in software&lt;/em&gt; if the installer fitted the CT clamps the wrong way around (sweet!)&lt;/p&gt;
&lt;p&gt;In the PW-UI Management Interface this is possible by selecting the &quot;Flip&quot; check-box next to the CT Sensor name on the CT configuration page.&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;&lt;strong&gt;CHARGE &amp;amp; KILL THE GRID&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Let's flip the reading of the GRID CT Clamp in the PW-UI. Lets assume the CT Clamp reading is +1kW (e.g. that the house is drawing +1kW from the grid). After flipping the reading the GW received -1kW and believes that the energy is being exported to the grid. The PW immediately goes into chargning mode and starts charging the PW. This causes more power to be drawn from the grid (say +2kW). The CT Clamp reports this to the GW as -2kW (remember, it's flipped) and the PW ramps up charging...and draws even more power from the grid..and so on and so on...until it's charging at full load of +5kW. All this happenes within microseconds. &lt;strong&gt;WARNING: The battiery gets hot very quickly and the fans start spinning at full power&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;There are other fun CT Clamp Flip Combinations. Another combination forces the PW to dump it's entire charge back into the grid - all at once of course.&lt;/p&gt;
&lt;p&gt;The Problem:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;Here in the UK we have night rate and day rate for electricty. Night rate is usually 300% cheaper and the PW is charged by night. Now an attacker can trick the PW to charge at day-rate and dump the load into the grid at night-rate, causing a financial loss to the consumer.&lt;/li&gt;
&lt;li&gt;The default password is crap. It's 2019. This should not happen. An attacker can access multiple Tesla PW's at the same time. Does anyone know how the grid feels if all Tesla PW's start dumping their load back into the grid? I can also quickly change between CHARGING and DUMPING. It's really quick. We are talking sub-second switching between CHARGING and DUMPING. How does the grid feel about me oscilating this and who will die first, the PW or the sub-station?&lt;/li&gt;
&lt;li&gt;It is little understood that Tesla can do all this from their HQ. By this I mean any attacker or employee with the right access to Tesla HQ can put all PW's worldwide into CHARGING and DUMPING and oscilating between these two very quickly (sub-second).&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;strong&gt;THC says: Err, do not cause any harm&lt;/strong&gt;&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;&lt;strong&gt;So much more to research&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The PW-UI managment interface has lots of other features which we have not explore (yet). It's possible to play with the grid codes such as forcing the PW into 60Hz or lowering/increasing the allowed export amperage or voltage. &lt;em&gt;Someone really should take a look at this....&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Imagine what somebody could to with access to the PW GW single board computer...and thus being able to send raw commands via the rs485 to the batteries....&lt;/p&gt;
&lt;p&gt;Looks like the ssh version might be vulnerable to &lt;a href=&quot;https://bugfuzz.com/stuff/ssh-check-username.py&quot; rel=&quot;nofollow&quot;&gt;username enumeration&lt;/a&gt;. Also somebody should check serial console and vga/keyboard on the PCB.&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;&lt;strong&gt;Automate your attack&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The PW-UI is a web-based interface. A simple Python script can be used to trigger any type of commands remotely. A lot of commands are uncodumented. The best way to get a list of commands is to have the Mozilla Network Monitor running during setup and testing.&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;&lt;strong&gt;Interesting API calls&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Most API calls are available without authentication. Auth is required for most API calls that write to the system. It's HTTP BASIC AUTH using the same password as the WiFi password.&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;GET API calls:
/api/status              # Shows start_tie, up_time, version, git_hash
/api/system_status/grid_faults
/api/system_status/soe   # Shows percentage
/api/config
/api/config/completed
/api/customer
/api/sitemaster/stop     # Stops the PW
/api/sitemaster/run      # Starts the PW
/api/customer/registration
/api/installer
/api/meters
/api/meters/aggregates  # Info about CTS and loads)
/api/meters/readings
/api/networks
/api/networks/wifi_security_types
/api/operation
/api/powerwall
/api/powerwalls/status 
/api/site_info
/api/sitemaster         # Shows running, uptime, connected_to_tesla...
/api/solar
/api/status
/api/system_status/grid_faults
/api/system/testing
/api/system/update/status
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;POST API calls:
/api/customer/registration/legal
/api/customer/registration/skip
/api/installer
/api/login/Basic
/api/meters/{CTS ID}/invert_cts
/api/networks/default_gsm/disable
/api/operation
/api/powerwalls
/api/powerwalls/update
/api/site_info/timezone timezone: Europe/London
/api/site_info/grid_code
/api/site_info/grid_code
/api/site_info/site_name
/api/site_info/timezone
/api/system/testing
/api/system/networks/conn_tests


&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Example:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;/api/site_info/grid_code
&lt;/code&gt;
&lt;/pre&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;variable&lt;/th&gt;
&lt;th&gt;value&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;grid_code&lt;/td&gt;
&lt;td&gt;50Hz_230V_1_G59:UK&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;region&lt;/td&gt;
&lt;td&gt;G59 21A&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Do not try any of these Grid Codes (really, please do not):&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;AU ASS4777.2
DE VDE4105
UK GA59 21A, GA83 16A
IT CEI-021
NZ NZS47772
US: IEEE1547 Split Phase 240V 60Hz
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;/api/installer
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Tesla Installer Account Numbers are sequential and can be retrieved with &lt;em&gt;api/installer/companies&lt;/em&gt;. Example: Installer 1681 is &lt;em&gt;ZSD Solar GmbH&lt;/em&gt;. This is how the installer can see your Tesla Installation and disable your tesla remotely. Good idea to change this :&amp;gt;&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;variable&lt;/th&gt;
&lt;th&gt;value&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Company&lt;/td&gt;
&lt;td&gt;THC&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;customer_id&lt;/td&gt;
&lt;td&gt;31337&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;phone&lt;/td&gt;
&lt;td&gt;0123456789&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;pre&gt;
&lt;code&gt;GET api/config
GET api/customer
GET completed
GET api/logout
&lt;/code&gt;
&lt;/pre&gt;
&lt;hr/&gt;&lt;p&gt;&lt;strong&gt;Hacking Environment&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;A list of some tips and tricks. Some parts are optional and not needed to hack the PW.&lt;/p&gt;
&lt;p&gt;Part 1: Place the PW on its own dedicated network behind a linux router. This will allow us to capture all network traffic between the PW and the Internet.&lt;/p&gt;
&lt;p&gt;Part 2: Run the PW-UI Wizard and write down all values. Disable GSM to prevent any further firmware upgrade and to prevent Tesla from fiddling with your PW.&lt;/p&gt;
&lt;p&gt;Part 3: We use the web browser ‘Mozilla’. Go to “about:config&quot; and delete the value in ‘network.http.accept-encoding’. This will make it easier to read captured network traffic between our browser and the PW:&lt;/p&gt;
&lt;p&gt;&lt;a target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot; href=&quot;https://github.com/hackerschoice/thc-tesla-powerwall2-hack/blob/master/images/disable-encoding.png&quot;&gt;&lt;img src=&quot;https://github.com/hackerschoice/thc-tesla-powerwall2-hack/raw/master/images/disable-encoding.png&quot; alt=&quot;disable-encoding&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Part 4: In Mozilla open the Network Monitor by pressing ‘Cmd+Opt+E’ (Windows: Ctrl+Shift+E). That's all it takes these days. This will allow us to inspect every request to the PW UI and read the response.&lt;/p&gt;
&lt;p&gt;&lt;a target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot; href=&quot;https://github.com/hackerschoice/thc-tesla-powerwall2-hack/blob/master/images/network-console.png&quot;&gt;&lt;img src=&quot;https://github.com/hackerschoice/thc-tesla-powerwall2-hack/raw/master/images/network-console.png&quot; alt=&quot;network-console&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;At Your Service,&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;The Hacker's Choice&lt;br/&gt;*** Berlin Branch ***&lt;/strong&gt;&lt;/p&gt;
&lt;/article&gt;&lt;/div&gt;
</description>
<pubDate>Fri, 22 Nov 2019 22:52:50 +0000</pubDate>
<dc:creator>amai</dc:creator>
<og:image>https://repository-images.githubusercontent.com/221465987/e4360400-0635-11ea-9788-66a77cf1e32a</og:image>
<og:type>object</og:type>
<og:title>hackerschoice/thc-tesla-powerwall2-hack</og:title>
<og:url>https://github.com/hackerschoice/thc-tesla-powerwall2-hack</og:url>
<og:description>TESLA PowerWall 2 Security Shenanigans . Contribute to hackerschoice/thc-tesla-powerwall2-hack development by creating an account on GitHub.</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://github.com/hackerschoice/thc-tesla-powerwall2-hack</dc:identifier>
</item>
<item>
<title>Collection of Jupyter notebooks for quantitative finance</title>
<link>https://github.com/cantaro86/Financial-Models-Numerical-Methods</link>
<guid isPermaLink="true" >https://github.com/cantaro86/Financial-Models-Numerical-Methods</guid>
<description>&lt;div class=&quot;Box-body&quot;&gt;
&lt;article class=&quot;markdown-body entry-content p-5&quot; itemprop=&quot;text&quot;&gt;
&lt;p&gt;This is a collection of &lt;a href=&quot;https://jupyter.org/&quot; rel=&quot;nofollow&quot;&gt;Jupyter notebooks&lt;/a&gt; based on different topics in the area of quantitative finance.&lt;/p&gt;
&lt;h3&gt;Is this a tutorial?&lt;/h3&gt;
&lt;p&gt;Almost! :)&lt;/p&gt;
&lt;p&gt;This is just a collection of topics and algorithms that in my opinion are interesting.&lt;/p&gt;
&lt;p&gt;It contains several topics that are not so popular nowadays, but that can be very powerful. Usually, topics such as PDE methods, Lévy processes, Fourier methods or Kalman filter are not very popular among practitioners, who prefers to work with more standard tools.&lt;br/&gt;The aim of these notebooks is to present these interesting topics, by showing their practical application through an interactive python implementation.&lt;/p&gt;
&lt;h3&gt;Who are these notebooks for?&lt;/h3&gt;
&lt;p&gt;Not for absolute beginners.&lt;/p&gt;
&lt;p&gt;These topics require a basic knowledge in stochastic calculus, financial mathematics and statistics. A basic knowledge of python programming is also necessary.&lt;/p&gt;
&lt;p&gt;In these notebooks I will not explain what is a call option, or what is a stochastic process, or a partial differential equation.&lt;br/&gt;However, every time I will introduce a concept, I will also add a link to the corresponding wiki page or to a reference manual. In this way, the reader will be able to immediately understand what I am talking about.&lt;/p&gt;
&lt;p&gt;These notes are for students in science, economics or finance who have followed at least one undergraduate course in financial mathematics and statistics.&lt;br/&gt;Self-taught students or practicioners should have read at least an introductiory books in financial mathematics.&lt;/p&gt;
&lt;h3&gt;Why is it worth to read these notes?&lt;/h3&gt;
&lt;p&gt;First of all, this is not a book!&lt;br/&gt;Every notebook is (almost) independent from the others. Therefore you can select only the notebook you are interested in!&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-diff&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-md&quot;&gt;&lt;span class=&quot;pl-md&quot;&gt;-&lt;/span&gt; Every notebook, contains python code ready to use!     &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It is not easy to find on internet examples of financial models implemented in python which are ready to use and well documented.&lt;br/&gt;I think that beginners in quantitative finance will find these notebooks very useful!&lt;/p&gt;
&lt;p&gt;Moreover, Jupyter notebooks are interactive i.e. you can run the code inside the notebook. This is probably the best way to study!&lt;/p&gt;
&lt;p&gt;If you open a notebook with Github or NBviewer, sometimes mathematical formulas are not displayed correctly. For this reason, I suggest you to clone/download the repository.&lt;/p&gt;
&lt;h3&gt;Is this series of notebooks complete?&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;No!&lt;/strong&gt;&lt;br/&gt;I will upload more notebooks from time to time.&lt;/p&gt;
&lt;p&gt;At the moment, I'm interested in the areas of stochastic processes, Kalman Filter, statistics and much more. I will add more interesting notebooks on these topics in the future.&lt;/p&gt;
&lt;p&gt;If you have any kind of questions, or if you find some errors, or you have suggestions for improvements, feel free to contact me.&lt;br/&gt;This is my &lt;a href=&quot;https://www.linkedin.com/in/nicolacantarutti&quot; rel=&quot;nofollow&quot;&gt;linkedin&lt;/a&gt; page.&lt;/p&gt;
&lt;h3&gt;Contents&lt;/h3&gt;
&lt;p&gt;1.1) &lt;strong&gt;Black-Scholes numerical methods&lt;/strong&gt; &lt;a href=&quot;https://nbviewer.ipython.org/github/cantaro86/Financial-Models-Numerical-Methods/blob/master/1.1%20Black-Scholes%20numerical%20methods.ipynb&quot; rel=&quot;nofollow&quot;&gt;nbviewer&lt;/a&gt; &lt;em&gt;(lognormal distribution, change of measure, Monte Carlo, Binomial method)&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;1.2) &lt;strong&gt;SDE simulation and statistics&lt;/strong&gt; &lt;a href=&quot;https://nbviewer.ipython.org/github/cantaro86/Financial-Models-Numerical-Methods/blob/master/1.2%20SDE%20simulations%20and%20statistics.ipynb&quot; rel=&quot;nofollow&quot;&gt;nbviewer&lt;/a&gt; &lt;em&gt;(paths generation, Confidence intervals, Hypothesys testing, Geometric Brownian motion, Cox-Ingersoll-Ross process, Euler Maruyama method, parameters estimation)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;1.3) &lt;strong&gt;Fourier inversion methods&lt;/strong&gt; &lt;a href=&quot;https://nbviewer.ipython.org/github/cantaro86/Financial-Models-Numerical-Methods/blob/master/1.3%20Fourier%20transform%20methods.ipynb&quot; rel=&quot;nofollow&quot;&gt;nbviewer&lt;/a&gt; &lt;em&gt;(derivation of inversion formula, numerical inversion, option pricing)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;1.4) &lt;strong&gt;SDE, Heston model&lt;/strong&gt; &lt;a href=&quot;https://nbviewer.ipython.org/github/cantaro86/Financial-Models-Numerical-Methods/blob/master/1.4%20SDE%20-%20Heston%20model.ipynb&quot; rel=&quot;nofollow&quot;&gt;nbviewer&lt;/a&gt; &lt;em&gt;(correlated Brownian motions, Heston paths, Heston distribution, characteristic function, option pricing)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;1.5) &lt;strong&gt;SDE, Lévy processes&lt;/strong&gt; &lt;a href=&quot;https://nbviewer.ipython.org/github/cantaro86/Financial-Models-Numerical-Methods/blob/master/1.5%20SDE%20-%20L%C3%A9vy%20processes.ipynb&quot; rel=&quot;nofollow&quot;&gt;nbviewer&lt;/a&gt; &lt;em&gt;(Merton, Variance Gamma, NIG, path generation, parameter estimation)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;2.1) &lt;strong&gt;The Black-Scholes PDE&lt;/strong&gt; &lt;a href=&quot;https://nbviewer.ipython.org/github/cantaro86/Financial-Models-Numerical-Methods/blob/master/2.1%20Black-Scholes%20PDE%20and%20sparse%20matrices.ipynb&quot; rel=&quot;nofollow&quot;&gt;nbviewer&lt;/a&gt; &lt;em&gt;(PDE discretization, Implicit method, sparse matrix tutorial)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;2.2) &lt;strong&gt;Exotic options&lt;/strong&gt; &lt;a href=&quot;https://nbviewer.ipython.org/github/cantaro86/Financial-Models-Numerical-Methods/blob/master/2.2%20Exotic%20options.ipynb&quot; rel=&quot;nofollow&quot;&gt;nbviewer&lt;/a&gt; &lt;em&gt;(Binary options, Barrier options)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;2.3) &lt;strong&gt;American options&lt;/strong&gt; &lt;a href=&quot;https://nbviewer.ipython.org/github/cantaro86/Financial-Models-Numerical-Methods/blob/master/2.3%20American%20Options.ipynb&quot; rel=&quot;nofollow&quot;&gt;nbviewer&lt;/a&gt; &lt;em&gt;(PDE, Binomial method, Longstaff-Schwartz)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;3.1) &lt;strong&gt;Merton Jump-Diffusion PIDE&lt;/strong&gt; &lt;a href=&quot;https://nbviewer.ipython.org/github/cantaro86/Financial-Models-Numerical-Methods/blob/master/3.1%20Merton%20jump-diffusion%2C%20PIDE%20method.ipynb&quot; rel=&quot;nofollow&quot;&gt;nbviewer&lt;/a&gt; &lt;em&gt;(Implicit-Explicit discretization, discrete convolution, model limitations, Monte Carlo, Fourier inversion, semi-closed formula )&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;3.2) &lt;strong&gt;Variance Gamma PIDE&lt;/strong&gt; &lt;a href=&quot;https://nbviewer.ipython.org/github/cantaro86/Financial-Models-Numerical-Methods/blob/master/3.2%20Variance%20Gamma%20model%2C%20PIDE%20method.ipynb&quot; rel=&quot;nofollow&quot;&gt;nbviewer&lt;/a&gt; &lt;em&gt;(approximated jump-diffusion PIDE, Monte Carlo, Fourier inversion, Comparison with Black-Scholes)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;3.3) &lt;strong&gt;Normal Inverse Gaussian PIDE&lt;/strong&gt; &lt;a href=&quot;https://nbviewer.ipython.org/github/cantaro86/Financial-Models-Numerical-Methods/blob/master/3.3%20Pricing%20with%20the%20NIG%20Process.ipynb&quot; rel=&quot;nofollow&quot;&gt;nbviewer&lt;/a&gt; &lt;em&gt;(approximated jump-diffusion PIDE, Monte Carlo, Fourier inversion, properties of the Lévy measure)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;4.1) &lt;strong&gt;Pricing with transaction costs&lt;/strong&gt; &lt;a href=&quot;https://nbviewer.ipython.org/github/cantaro86/Financial-Models-Numerical-Methods/blob/master/4.1%20Option%20pricing%20with%20transaction%20costs.ipynb&quot; rel=&quot;nofollow&quot;&gt;nbviewer&lt;/a&gt; &lt;em&gt;(Davis-Panas-Zariphopoulou model, singular control problem, HJB variational inequality, indifference pricing, binomial tree, performances)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;5.1) &lt;strong&gt;Linear regression and Kalman filter&lt;/strong&gt; &lt;a href=&quot;https://nbviewer.ipython.org/github/cantaro86/Financial-Models-Numerical-Methods/blob/master/5.1%20Linear%20regression%20-%20Kalman%20filter.ipynb&quot; rel=&quot;nofollow&quot;&gt;nbviewer&lt;/a&gt; &lt;em&gt;(market data cleaning, Linear regression methods, Kalman filter design, choice of parameters)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;A.1) &lt;strong&gt;Appendix: Linear equations&lt;/strong&gt; &lt;a href=&quot;https://nbviewer.ipython.org/github/cantaro86/Financial-Models-Numerical-Methods/blob/master/A.1%20Solution%20of%20linear%20equations.ipynb&quot; rel=&quot;nofollow&quot;&gt;nbviewer&lt;/a&gt; &lt;em&gt;(LU, Jacobi, Gauss-Seidel, SOR, Thomas)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;A.2) &lt;strong&gt;Appendix: Code optimization&lt;/strong&gt; &lt;a href=&quot;https://nbviewer.ipython.org/github/cantaro86/Financial-Models-Numerical-Methods/blob/master/A.2%20Optimize%20and%20speed%20up%20the%20code.%20%28SOR%20algorithm%2C%20Cython%20and%20C%29.ipynb&quot; rel=&quot;nofollow&quot;&gt;nbviewer&lt;/a&gt; &lt;em&gt;(cython, C code)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;A.3) &lt;strong&gt;Appendix: Review of Lévy processes theory&lt;/strong&gt; &lt;a href=&quot;https://github.com/cantaro86/Financial-Models-Numerical-Methods/blob/master/A.3%20Introduction%20to%20L%C3%A9vy%20processes%20and%20PIDEs.pdf&quot;&gt;github&lt;/a&gt; &lt;em&gt;(basic and important definitions, derivation of the pricing PIDE)&lt;/em&gt;&lt;/p&gt;
&lt;h2&gt;How to run the notebooks&lt;/h2&gt;
&lt;p&gt;You have two options:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;Install &lt;a href=&quot;https://www.docker.com/&quot; rel=&quot;nofollow&quot;&gt;docker&lt;/a&gt; following the instructions in &lt;a href=&quot;https://docs.docker.com/install/&quot; rel=&quot;nofollow&quot;&gt;install link&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;At this point, you just need to run the script &lt;code&gt;docker_start_notebook.py&lt;/code&gt; and you are done.&lt;br/&gt;This script will download the data-science docker image &lt;a href=&quot;https://hub.docker.com/r/jupyter/scipy-notebook&quot; rel=&quot;nofollow&quot;&gt;scipy-notebook&lt;/a&gt;, that will be used every time you run the script (the script will take about 10-15 minutes to download the image, ONLY the first time). You can also download a different image by modifying the script. For a list of images see &lt;a href=&quot;https://jupyter-docker-stacks.readthedocs.io/en/latest/using/selecting.html&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;ol start=&quot;2&quot;&gt;&lt;li&gt;Clone the repository and open the notebooks using &lt;code&gt;jupyter-notebook&lt;/code&gt;. If you are using an old version of python there can be compatibility problems.&lt;/li&gt;
&lt;/ol&gt;&lt;div class=&quot;highlight highlight-source-diff&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-md&quot;&gt;&lt;span class=&quot;pl-md&quot;&gt;-&lt;/span&gt; Cython code needs to be compiled!&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you are using the data science image, you can open the shell in the notebooks directory, and run the script&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
python docker_start_notebook.py
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;after that, copy-paste the following code into the shell:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
docker &lt;span class=&quot;pl-c1&quot;&gt;exec&lt;/span&gt; -it Numeric_Finance bash
&lt;span class=&quot;pl-c1&quot;&gt;cd&lt;/span&gt; work/functions/cython
python setup.py build_ext --inplace
&lt;span class=&quot;pl-c1&quot;&gt;exit&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(&lt;code&gt;Numeric_Finance&lt;/code&gt; is the name of the docker container)&lt;/p&gt;
&lt;p&gt;If you are not using docker, just copy in the shell the following:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-c1&quot;&gt;cd&lt;/span&gt; functions/cython
python setup.py build_ext --inplace
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Enjoy!&lt;/h3&gt;
&lt;/article&gt;&lt;/div&gt;
</description>
<pubDate>Fri, 22 Nov 2019 22:14:11 +0000</pubDate>
<dc:creator>Cantaro86</dc:creator>
<og:image>https://avatars1.githubusercontent.com/u/50926847?s=400&amp;v=4</og:image>
<og:type>object</og:type>
<og:title>cantaro86/Financial-Models-Numerical-Methods</og:title>
<og:url>https://github.com/cantaro86/Financial-Models-Numerical-Methods</og:url>
<og:description>Collection of notebooks about quantitative finance, with interactive python code. - cantaro86/Financial-Models-Numerical-Methods</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://github.com/cantaro86/Financial-Models-Numerical-Methods</dc:identifier>
</item>
<item>
<title>Microsoft REST API Guidelines</title>
<link>https://github.com/Microsoft/api-guidelines/blob/master/Guidelines.md</link>
<guid isPermaLink="true" >https://github.com/Microsoft/api-guidelines/blob/master/Guidelines.md</guid>
<description>
&lt;h2&gt;Microsoft REST API Guidelines Working Group&lt;/h2&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;
&lt;th&gt;Name&lt;/th&gt;
&lt;th&gt;Name&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Dave Campbell (CTO C+E)&lt;/td&gt;
&lt;td&gt;Rick Rashid (CTO ASG)&lt;/td&gt;
&lt;td&gt;John Shewchuk (Technical Fellow, TED HQ)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Mark Russinovich (CTO Azure)&lt;/td&gt;
&lt;td&gt;Steve Lucco (Technical Fellow, DevDiv)&lt;/td&gt;
&lt;td&gt;Murali Krishnaprasad (Azure App Plat)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Rob Howard (ASG)&lt;/td&gt;
&lt;td&gt;Peter Torr (OSG)&lt;/td&gt;
&lt;td&gt;Chris Mullins (ASG)&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;div&gt;Document editors: John Gossman (C+E), Chris Mullins (ASG), Gareth Jones (ASG), Rob Dolin (C+E), Mark Stafford (C+E)&lt;br/&gt;&lt;/div&gt;

&lt;h2&gt;1 Abstract&lt;/h2&gt;
&lt;p&gt;The Microsoft REST API Guidelines, as a design principle, encourages application developers to have resources accessible to them via a RESTful HTTP interface. To provide the smoothest possible experience for developers on platforms following the Microsoft REST API Guidelines, REST APIs SHOULD follow consistent design guidelines to make using them easy and intuitive.&lt;/p&gt;
&lt;p&gt;This document establishes the guidelines Microsoft REST APIs SHOULD follow so RESTful interfaces are developed consistently.&lt;/p&gt;
&lt;h2&gt;2 Table of contents&lt;/h2&gt;
&lt;h2&gt;3 Introduction&lt;/h2&gt;
&lt;p&gt;Developers access most Microsoft Cloud Platform resources via HTTP interfaces. Although each service typically provides language-specific frameworks to wrap their APIs, all of their operations eventually boil down to HTTP requests. Microsoft must support a wide range of clients and services and cannot rely on rich frameworks being available for every development environment. Thus a goal of these guidelines is to ensure Microsoft REST APIs can be easily and consistently consumed by any client with basic HTTP support.&lt;/p&gt;
&lt;p&gt;To provide the smoothest possible experience for developers, it's important to have these APIs follow consistent design guidelines, thus making using them easy and intuitive. This document establishes the guidelines to be followed by Microsoft REST API developers for developing such APIs consistently.&lt;/p&gt;
&lt;p&gt;The benefits of consistency accrue in aggregate as well; consistency allows teams to leverage common code, patterns, documentation and design decisions.&lt;/p&gt;
&lt;p&gt;These guidelines aim to achieve the following:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Define consistent practices and patterns for all API endpoints across Microsoft.&lt;/li&gt;
&lt;li&gt;Adhere as closely as possible to accepted REST/HTTP best practices in the industry at-large.*&lt;/li&gt;
&lt;li&gt;Make accessing Microsoft Services via REST interfaces easy for all application developers.&lt;/li&gt;
&lt;li&gt;Allow service developers to leverage the prior work of other services to implement, test and document REST endpoints defined consistently.&lt;/li&gt;
&lt;li&gt;Allow for partners (e.g., non-Microsoft entities) to use these guidelines for their own REST endpoint design.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;em&gt;Note: The guidelines are designed to align with building services which comply with the REST architectural style, though they do not address or require building services that follow the REST constraints. The term &quot;REST&quot; is used throughout this document to mean services that are in the spirit of REST rather than adhering to REST by the book.&lt;/em&gt;&lt;/p&gt;
&lt;h3&gt;3.1 Recommended reading&lt;/h3&gt;
&lt;p&gt;Understanding the philosophy behind the REST Architectural Style is recommended for developing good HTTP-based services. If you are new to RESTful design, here are some good resources:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Representational_state_transfer&quot; rel=&quot;nofollow&quot;&gt;REST on Wikipedia&lt;/a&gt; -- Overview of common definitions and core ideas behind REST.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm&quot; rel=&quot;nofollow&quot;&gt;REST Dissertation&lt;/a&gt; -- The chapter on REST in Roy Fielding's dissertation on Network Architecture, &quot;Architectural Styles and the Design of Network-based Software Architectures&quot;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://tools.ietf.org/html/rfc7231&quot; rel=&quot;nofollow&quot;&gt;RFC 7231&lt;/a&gt; -- Defines the specification for HTTP/1.1 semantics, and is considered the authoritative resource.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.amazon.com/REST-Practice-Hypermedia-Systems-Architecture/dp/0596805829/&quot; rel=&quot;nofollow&quot;&gt;REST in Practice&lt;/a&gt; -- Book on the fundamentals of REST.&lt;/p&gt;
&lt;h2&gt;4 Interpreting the guidelines&lt;/h2&gt;
&lt;h3&gt;4.1 Application of the guidelines&lt;/h3&gt;
&lt;p&gt;These guidelines are applicable to any REST API exposed publicly by Microsoft or any partner service. Private or internal APIs SHOULD also try to follow these guidelines because internal services tend to eventually be exposed publicly. Consistency is valuable to not only external customers but also internal service consumers, and these guidelines offer best practices useful for any service.&lt;/p&gt;
&lt;p&gt;There are legitimate reasons for exemption from these guidelines. Obviously a REST service that implements or must interoperate with some externally defined REST API must be compatible with that API and not necessarily these guidelines. Some services MAY also have special performance needs that require a different format, such as a binary protocol.&lt;/p&gt;
&lt;h3&gt;4.2 Guidelines for existing services and versioning of services&lt;/h3&gt;
&lt;p&gt;We do not recommend making a breaking change to a service that pre-dates these guidelines simply for compliance sake. The service SHOULD try to become compliant at the next version release when compatibility is being broken anyway. When a service adds a new API, that API SHOULD be consistent with the other APIs of the same version. So if a service was written against version 1.0 of the guidelines, new APIs added incrementally to the service SHOULD also follow version 1.0. The service can then upgrade to align with the latest version of the guidelines at the service's next major release.&lt;/p&gt;
&lt;h3&gt;4.3 Requirements language&lt;/h3&gt;
&lt;p&gt;The keywords &quot;MUST,&quot; &quot;MUST NOT,&quot; &quot;REQUIRED,&quot; &quot;SHALL,&quot; &quot;SHALL NOT,&quot; &quot;SHOULD,&quot; &quot;SHOULD NOT,&quot; &quot;RECOMMENDED,&quot; &quot;MAY,&quot; and &quot;OPTIONAL&quot; in this document are to be interpreted as described in &lt;a href=&quot;https://www.ietf.org/rfc/rfc2119.txt&quot; rel=&quot;nofollow&quot;&gt;RFC 2119&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;4.4 License&lt;/h3&gt;
&lt;p&gt;This work is licensed under the Creative Commons Attribution 4.0 International License. To view a copy of this license, visit &lt;a href=&quot;http://creativecommons.org/licenses/by/4.0/&quot; rel=&quot;nofollow&quot;&gt;http://creativecommons.org/licenses/by/4.0/&lt;/a&gt; or send a letter to Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.&lt;/p&gt;
&lt;h2&gt;5 Taxonomy&lt;/h2&gt;
&lt;p&gt;As part of onboarding to Microsoft REST API Guidelines, services MUST comply with the taxonomy defined below.&lt;/p&gt;
&lt;h3&gt;5.1 Errors&lt;/h3&gt;
&lt;p&gt;Errors, or more specifically Service Errors, are defined as a client passing invalid data to the service and the service &lt;em&gt;correctly&lt;/em&gt; rejecting that data. Examples include invalid credentials, incorrect parameters, unknown version IDs, or similar. These are generally &quot;4xx&quot; HTTP error codes and are the result of a client passing incorrect or invalid data.&lt;/p&gt;
&lt;p&gt;Errors do &lt;em&gt;not&lt;/em&gt; contribute to overall API availability.&lt;/p&gt;
&lt;h3&gt;5.2 Faults&lt;/h3&gt;
&lt;p&gt;Faults, or more specifically Service Faults, are defined as the service failing to correctly return in response to a valid client request. These are generally &quot;5xx&quot; HTTP error codes.&lt;/p&gt;
&lt;p&gt;Faults &lt;em&gt;do&lt;/em&gt; contribute to the overall API availability.&lt;/p&gt;
&lt;p&gt;Calls that fail due to rate limiting or quota failures MUST NOT count as faults. Calls that fail as the result of a service fast-failing requests (often for its own protection) do count as faults.&lt;/p&gt;
&lt;h3&gt;5.3 Latency&lt;/h3&gt;
&lt;p&gt;Latency is defined as how long a particular API call takes to complete, measured as closely to the client as possible. This metric applies to both synchronous and asynchronous APIs in the same way. For long running calls, the latency is measured on the initial request and measures how long that call (not the overall operation) takes to complete.&lt;/p&gt;
&lt;h3&gt;5.4 Time to complete&lt;/h3&gt;
&lt;p&gt;Services that expose long operations MUST track &quot;Time to Complete&quot; metrics around those operations.&lt;/p&gt;
&lt;h3&gt;5.5 Long running API faults&lt;/h3&gt;
&lt;p&gt;For a Long Running API, it's possible for both the initial request to begin the operation and the request to retrieve the results to technically work (each passing back a 200), but for the underlying operation to have failed. Long Running faults MUST roll up as Faults into the overall Availability metrics.&lt;/p&gt;
&lt;h2&gt;6 Client guidance&lt;/h2&gt;
&lt;p&gt;To ensure the best possible experience for clients talking to a REST service, clients SHOULD adhere to the following best practices:&lt;/p&gt;
&lt;h3&gt;6.1 Ignore rule&lt;/h3&gt;
&lt;p&gt;For loosely coupled clients where the exact shape of the data is not known before the call, if the server returns something the client wasn't expecting, the client MUST safely ignore it.&lt;/p&gt;
&lt;p&gt;Some services MAY add fields to responses without changing versions numbers. Services that do so MUST make this clear in their documentation and clients MUST ignore unknown fields.&lt;/p&gt;
&lt;h3&gt;6.2 Variable order rule&lt;/h3&gt;
&lt;p&gt;Clients MUST NOT rely on the order in which data appears in JSON service responses. For example, clients SHOULD be resilient to the reordering of fields within a JSON object. When supported by the service, clients MAY request that data be returned in a specific order. For example, services MAY support the use of the &lt;em&gt;$orderBy&lt;/em&gt; querystring parameter to specify the order of elements within a JSON array. Services MAY also explicitly specify the ordering of some elements as part of the service contract. For example, a service MAY always return a JSON object's &quot;type&quot; information as the first field in an object to simplify response parsing on the client. Clients MAY rely on ordering behavior explicitly identified by the service.&lt;/p&gt;
&lt;h3&gt;6.3 Silent fail rule&lt;/h3&gt;
&lt;p&gt;Clients requesting OPTIONAL server functionality (such as optional headers) MUST be resilient to the server ignoring that particular functionality.&lt;/p&gt;
&lt;h2&gt;7 Consistency fundamentals&lt;/h2&gt;
&lt;h3&gt;7.1 URL structure&lt;/h3&gt;
&lt;p&gt;Humans SHOULD be able to easily read and construct URLs.&lt;/p&gt;
&lt;p&gt;This facilitates discovery and eases adoption on platforms without a well-supported client library.&lt;/p&gt;
&lt;p&gt;An example of a well-structured URL is:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;https://api.contoso.com/v1.0/people/jdoe@contoso.com/inbox
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;An example URL that is not friendly is:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;https://api.contoso.com/EWS/OData/Users('jdoe@microsoft.com')/Folders('AAMkADdiYzI1MjUzLTk4MjQtNDQ1Yy05YjJkLWNlMzMzYmIzNTY0MwAuAAAAAACzMsPHYH6HQoSwfdpDx-2bAQCXhUk6PC1dS7AERFluCgBfAAABo58UAAA=')
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;A frequent pattern that comes up is the use of URLs as values. Services MAY use URLs as values. For example, the following is acceptable:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;https://api.contoso.com/v1.0/items?url=https://resources.contoso.com/shoes/fancy
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3&gt;7.2 URL length&lt;/h3&gt;
&lt;p&gt;The HTTP 1.1 message format, defined in RFC 7230, in section &lt;a href=&quot;https://tools.ietf.org/html/rfc7230#section-3.1.1&quot; rel=&quot;nofollow&quot;&gt;3.1.1&lt;/a&gt;, defines no length limit on the Request Line, which includes the target URL. From the RFC:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;HTTP does not place a predefined limit on the length of a request-line. [...] A server that receives a request-target longer than any URI it wishes to parse MUST respond with a 414 (URI Too Long) status code.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Services that can generate URLs longer than 2,083 characters MUST make accommodations for the clients they wish to support. Here are some sources for determining what target clients support:&lt;/p&gt;
&lt;p&gt;Also note that some technology stacks have hard and adjustable url limits, so keep this in mind as you design your services.&lt;/p&gt;
&lt;h3&gt;7.3 Canonical identifier&lt;/h3&gt;
&lt;p&gt;In addition to friendly URLs, resources that can be moved or be renamed SHOULD expose a URL that contains a unique stable identifier. It MAY be necessary to interact with the service to obtain a stable URL from the friendly name for the resource, as in the case of the &quot;/my&quot; shortcut used by some services.&lt;/p&gt;
&lt;p&gt;The stable identifier is not required to be a GUID.&lt;/p&gt;
&lt;p&gt;An example of a URL containing a canonical identifier is:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;https://api.contoso.com/v1.0/people/7011042402/inbox
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3&gt;7.4 Supported methods&lt;/h3&gt;
&lt;p&gt;Operations MUST use the proper HTTP methods whenever possible, and operation idempotency MUST be respected. HTTP methods are frequently referred to as the HTTP verbs. The terms are synonymous in this context, however the HTTP specification uses the term method.&lt;/p&gt;
&lt;p&gt;Below is a list of methods that Microsoft REST services SHOULD support. Not all resources will support all methods, but all resources using the methods below MUST conform to their usage.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Method&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;th&gt;Is Idempotent&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;GET&lt;/td&gt;
&lt;td&gt;Return the current value of an object&lt;/td&gt;
&lt;td&gt;True&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;PUT&lt;/td&gt;
&lt;td&gt;Replace an object, or create a named object, when applicable&lt;/td&gt;
&lt;td&gt;True&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;DELETE&lt;/td&gt;
&lt;td&gt;Delete an object&lt;/td&gt;
&lt;td&gt;True&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;POST&lt;/td&gt;
&lt;td&gt;Create a new object based on the data provided, or submit a command&lt;/td&gt;
&lt;td&gt;False&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;HEAD&lt;/td&gt;
&lt;td&gt;Return metadata of an object for a GET response. Resources that support the GET method MAY support the HEAD method as well&lt;/td&gt;
&lt;td&gt;True&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;PATCH&lt;/td&gt;
&lt;td&gt;Apply a partial update to an object&lt;/td&gt;
&lt;td&gt;False&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;OPTIONS&lt;/td&gt;
&lt;td&gt;Get information about a request; see below for details.&lt;/td&gt;
&lt;td&gt;True&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Table 1&lt;/p&gt;
&lt;h4&gt;7.4.1 POST&lt;/h4&gt;
&lt;p&gt;POST operations SHOULD support the Location response header to specify the location of any created resource that was not explicitly named, via the Location header.&lt;/p&gt;
&lt;p&gt;As an example, imagine a service that allows creation of hosted servers, which will be named by the service:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;POST&lt;/span&gt; http://api.contoso.com/account&lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;/servers
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The response would be something like:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-c1&quot;&gt;201 Created&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Location:&lt;/span&gt; http://api.contoso.com/account1/servers/server321&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Where &quot;server321&quot; is the service-allocated server name.&lt;/p&gt;
&lt;p&gt;Services MAY also return the full metadata for the created item in the response.&lt;/p&gt;
&lt;h4&gt;7.4.2 PATCH&lt;/h4&gt;
&lt;p&gt;PATCH has been standardized by IETF as the method to be used for updating an existing object incrementally (see &lt;a href=&quot;http://tools.ietf.org/html/rfc5789&quot; rel=&quot;nofollow&quot;&gt;RFC 5789&lt;/a&gt;). Microsoft REST API Guidelines compliant APIs SHOULD support PATCH.&lt;/p&gt;
&lt;h4&gt;7.4.3 Creating resources via PATCH (UPSERT semantics)&lt;/h4&gt;
&lt;p&gt;Services that allow callers to specify key values on create SHOULD support UPSERT semantics, and those that do MUST support creating resources using PATCH. Because PUT is defined as a complete replacement of the content, it is dangerous for clients to use PUT to modify data. Clients that do not understand (and hence ignore) properties on a resource are not likely to provide them on a PUT when trying to update a resource, hence such properties could be inadvertently removed. Services MAY optionally support PUT to update existing resources, but if they do they MUST use replacement semantics (that is, after the PUT, the resource's properties MUST match what was provided in the request, including deleting any server properties that were not provided).&lt;/p&gt;
&lt;p&gt;Under UPSERT semantics, a PATCH call to a nonexistent resource is handled by the server as a &quot;create,&quot; and a PATCH call to an existing resource is handled as an &quot;update.&quot; To ensure that an update request is not treated as a create or vice-versa, the client MAY specify precondition HTTP headers in the request. The service MUST NOT treat a PATCH request as an insert if it contains an If-Match header and MUST NOT treat a PATCH request as an update if it contains an If-None-Match header with a value of &quot;*&quot;.&lt;/p&gt;
&lt;p&gt;If a service does not support UPSERT, then a PATCH call against a resource that does not exist MUST result in an HTTP &quot;409 Conflict&quot; error.&lt;/p&gt;
&lt;h4&gt;7.4.4 Options and link headers&lt;/h4&gt;
&lt;p&gt;OPTIONS allows a client to retrieve information about a resource, at a minimum by returning the Allow header denoting the valid methods for this resource.&lt;/p&gt;
&lt;p&gt;In addition, services SHOULD include a Link header (see &lt;a href=&quot;http://tools.ietf.org/html/rfc5988&quot; rel=&quot;nofollow&quot;&gt;RFC 5988&lt;/a&gt;) to point to documentation for the resource in question:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Link:&lt;/span&gt; &amp;lt;{help}&amp;gt;; rel=&quot;help&quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Where {help} is the URL to a documentation resource.&lt;/p&gt;
&lt;p&gt;For examples on use of OPTIONS, see &lt;a href=&quot;http://www.w3.org/TR/cors/#resource-preflight-requests&quot; rel=&quot;nofollow&quot;&gt;preflighting CORS cross-domain calls&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;7.5 Standard request headers&lt;/h3&gt;
&lt;p&gt;The table of request headers below SHOULD be used by Microsoft REST API Guidelines services. Using these headers is not mandated, but if used they MUST be used consistently.&lt;/p&gt;
&lt;p&gt;All header values MUST follow the syntax rules set forth in the specification where the header field is defined. Many HTTP headers are defined in &lt;a href=&quot;https://tools.ietf.org/html/rfc7231&quot; rel=&quot;nofollow&quot;&gt;RFC7231&lt;/a&gt;, however a complete list of approved headers can be found in the &lt;a href=&quot;http://www.iana.org/assignments/message-headers/message-headers.xhtml&quot; rel=&quot;nofollow&quot;&gt;IANA Header Registry&lt;/a&gt;.&quot;&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Header&lt;/th&gt;
&lt;th&gt;Type&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Authorization&lt;/td&gt;
&lt;td&gt;String&lt;/td&gt;
&lt;td&gt;Authorization header for the request&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Date&lt;/td&gt;
&lt;td&gt;Date&lt;/td&gt;
&lt;td&gt;Timestamp of the request, based on the client's clock, in &lt;a href=&quot;https://tools.ietf.org/html/rfc5322#section-3.3&quot; rel=&quot;nofollow&quot;&gt;RFC 5322&lt;/a&gt; date and time format. The server SHOULD NOT make any assumptions about the accuracy of the client's clock. This header MAY be included in the request, but MUST be in this format when supplied. Greenwich Mean Time (GMT) MUST be used as the time zone reference for this header when it is provided. For example: &lt;code&gt;Wed, 24 Aug 2016 18:41:30 GMT&lt;/code&gt;. Note that GMT is exactly equal to UTC (Coordinated Universal Time) for this purpose.&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Accept&lt;/td&gt;
&lt;td&gt;Content type&lt;/td&gt;
&lt;td&gt;The requested content type for the response such as:
&lt;ul&gt;&lt;li&gt;application/xml&lt;/li&gt;
&lt;li&gt;text/xml&lt;/li&gt;
&lt;li&gt;application/json&lt;/li&gt;
&lt;li&gt;text/javascript (for JSONP)&lt;/li&gt;
&lt;/ul&gt;
Per the HTTP guidelines, this is just a hint and responses MAY have a different content type, such as a blob fetch where a successful response will just be the blob stream as the payload. For services following OData, the preference order specified in OData SHOULD be followed.&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Accept-Encoding&lt;/td&gt;
&lt;td&gt;Gzip, deflate&lt;/td&gt;
&lt;td&gt;REST endpoints SHOULD support GZIP and DEFLATE encoding, when applicable. For very large resources, services MAY ignore and return uncompressed data.&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Accept-Language&lt;/td&gt;
&lt;td&gt;&quot;en&quot;, &quot;es&quot;, etc.&lt;/td&gt;
&lt;td&gt;Specifies the preferred language for the response. Services are not required to support this, but if a service supports localization it MUST do so through the Accept-Language header.&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Accept-Charset&lt;/td&gt;
&lt;td&gt;Charset type like &quot;UTF-8&quot;&lt;/td&gt;
&lt;td&gt;Default is UTF-8, but services SHOULD be able to handle ISO-8859-1.&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Content-Type&lt;/td&gt;
&lt;td&gt;Content type&lt;/td&gt;
&lt;td&gt;Mime type of request body (PUT/POST/PATCH)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Prefer&lt;/td&gt;
&lt;td&gt;return=minimal, return=representation&lt;/td&gt;
&lt;td&gt;If the return=minimal preference is specified, services SHOULD return an empty body in response to a successful insert or update. If return=representation is specified, services SHOULD return the created or updated resource in the response. Services SHOULD support this header if they have scenarios where clients would sometimes benefit from responses, but sometimes the response would impose too much of a hit on bandwidth.&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;If-Match, If-None-Match, If-Range&lt;/td&gt;
&lt;td&gt;String&lt;/td&gt;
&lt;td&gt;Services that support updates to resources using optimistic concurrency control MUST support the If-Match header to do so. Services MAY also use other headers related to ETags as long as they follow the HTTP specification.&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3&gt;7.6 Standard response headers&lt;/h3&gt;
&lt;p&gt;Services SHOULD return the following response headers, except where noted in the &quot;required&quot; column.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Response Header&lt;/th&gt;
&lt;th&gt;Required&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Date&lt;/td&gt;
&lt;td&gt;All responses&lt;/td&gt;
&lt;td&gt;Timestamp the response was processed, based on the server's clock, in &lt;a href=&quot;https://tools.ietf.org/html/rfc5322#section-3.3&quot; rel=&quot;nofollow&quot;&gt;RFC 5322&lt;/a&gt; date and time format. This header MUST be included in the response. Greenwich Mean Time (GMT) MUST be used as the time zone reference for this header. For example: &lt;code&gt;Wed, 24 Aug 2016 18:41:30 GMT&lt;/code&gt;. Note that GMT is exactly equal to UTC (Coordinated Universal Time) for this purpose.&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Content-Type&lt;/td&gt;
&lt;td&gt;All responses&lt;/td&gt;
&lt;td&gt;The content type&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Content-Encoding&lt;/td&gt;
&lt;td&gt;All responses&lt;/td&gt;
&lt;td&gt;GZIP or DEFLATE, as appropriate&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Preference-Applied&lt;/td&gt;
&lt;td&gt;When specified in request&lt;/td&gt;
&lt;td&gt;Whether a preference indicated in the Prefer request header was applied&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;ETag&lt;/td&gt;
&lt;td&gt;When the requested resource has an entity tag&lt;/td&gt;
&lt;td&gt;The ETag response-header field provides the current value of the entity tag for the requested variant. Used with If-Match, If-None-Match and If-Range to implement optimistic concurrency control.&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3&gt;7.7 Custom headers&lt;/h3&gt;
&lt;p&gt;Custom headers MUST NOT be required for the basic operation of a given API.&lt;/p&gt;
&lt;p&gt;Some of the guidelines in this document prescribe the use of nonstandard HTTP headers. In addition, some services MAY need to add extra functionality, which is exposed via HTTP headers. The following guidelines help maintain consistency across usage of custom headers.&lt;/p&gt;
&lt;p&gt;Headers that are not standard HTTP headers MUST have one of two formats:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;A generic format for headers that are registered as &quot;provisional&quot; with IANA (&lt;a href=&quot;http://www.ietf.org/rfc/rfc3864.txt&quot; rel=&quot;nofollow&quot;&gt;RFC 3864&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;A scoped format for headers that are too usage-specific for registration&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;These two formats are described below.&lt;/p&gt;
&lt;h3&gt;7.8 Specifying headers as query parameters&lt;/h3&gt;
&lt;p&gt;Some headers pose challenges for some scenarios such as AJAX clients, especially when making cross-domain calls where adding headers MAY not be supported. As such, some headers MAY be accepted as Query Parameters in addition to headers, with the same naming as the header:&lt;/p&gt;
&lt;p&gt;Not all headers make sense as query parameters, including most standard HTTP headers.&lt;/p&gt;
&lt;p&gt;The criteria for considering when to accept headers as parameters are:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;Any custom headers MUST be also accepted as parameters.&lt;/li&gt;
&lt;li&gt;Required standard headers MAY be accepted as parameters.&lt;/li&gt;
&lt;li&gt;Required headers with security sensitivity (e.g., Authorization header) MIGHT NOT be appropriate as parameters; the service owner SHOULD evaluate these on a case-by-case basis.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;The one exception to this rule is the Accept header. It's common practice to use a scheme with simple names instead of the full functionality described in the HTTP specification for Accept.&lt;/p&gt;
&lt;h3&gt;7.9 PII parameters&lt;/h3&gt;
&lt;p&gt;Consistent with their organization's privacy policy, clients SHOULD NOT transmit personally identifiable information (PII) parameters in the URL (as part of path or query string) because this information can be inadvertently exposed via client, network, and server logs and other mechanisms.&lt;/p&gt;
&lt;p&gt;Consequently, a service SHOULD accept PII parameters transmitted as headers.&lt;/p&gt;
&lt;p&gt;However, there are many scenarios where the above recommendations cannot be followed due to client or software limitations. To address these limitations, services SHOULD also accept these PII parameters as part of the URL consistent with the rest of these guidelines.&lt;/p&gt;
&lt;p&gt;Services that accept PII parameters -- whether in the URL or as headers -- SHOULD be compliant with privacy policy specified by their organization's engineering leadership. This will typically include recommending that clients prefer headers for transmission and implementations adhere to special precautions to ensure that logs and other service data collection are properly handled.&lt;/p&gt;
&lt;h3&gt;7.10 Response formats&lt;/h3&gt;
&lt;p&gt;For organizations to have a successful platform, they must serve data in formats developers are accustomed to using, and in consistent ways that allow developers to handle responses with common code.&lt;/p&gt;
&lt;p&gt;Web-based communication, especially when a mobile or other low-bandwidth client is involved, has moved quickly in the direction of JSON for a variety of reasons, including its tendency to be lighter weight and its ease of consumption with JavaScript-based clients.&lt;/p&gt;
&lt;p&gt;JSON property names SHOULD be camelCased.&lt;/p&gt;
&lt;p&gt;Services SHOULD provide JSON as the default encoding.&lt;/p&gt;
&lt;h4&gt;7.10.1 Clients-specified response format&lt;/h4&gt;
&lt;p&gt;In HTTP, response format SHOULD be requested by the client using the Accept header. This is a hint, and the server MAY ignore it if it chooses to, even if this isn't typical of well-behaved servers. Clients MAY send multiple Accept headers and the service MAY choose one of them.&lt;/p&gt;
&lt;p&gt;The default response format (no Accept header provided) SHOULD be application/json, and all services MUST support application/json.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Accept Header&lt;/th&gt;
&lt;th&gt;Response type&lt;/th&gt;
&lt;th&gt;Notes&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;application/json&lt;/td&gt;
&lt;td&gt;Payload SHOULD be returned as JSON&lt;/td&gt;
&lt;td&gt;Also accept text/javascript for JSONP cases&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;GET&lt;/span&gt; https://api.contoso.com/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/products/user
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Accept:&lt;/span&gt; application/json&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;7.10.2 Error condition responses&lt;/h4&gt;
&lt;p&gt;For nonsuccess conditions, developers SHOULD be able to write one piece of code that handles errors consistently across different Microsoft REST API Guidelines services. This allows building of simple and reliable infrastructure to handle exceptions as a separate flow from successful responses. The following is based on the OData v4 JSON spec. However, it is very generic and does not require specific OData constructs. APIs SHOULD use this format even if they are not using other OData constructs.&lt;/p&gt;
&lt;p&gt;The error response MUST be a single JSON object. This object MUST have a name/value pair named &quot;error.&quot; The value MUST be a JSON object.&lt;/p&gt;
&lt;p&gt;This object MUST contain name/value pairs with the names &quot;code&quot; and &quot;message,&quot; and it MAY contain name/value pairs with the names &quot;target,&quot; &quot;details&quot; and &quot;innererror.&quot;&lt;/p&gt;
&lt;p&gt;The value for the &quot;code&quot; name/value pair is a language-independent string. Its value is a service-defined error code that SHOULD be human-readable. This code serves as a more specific indicator of the error than the HTTP error code specified in the response. Services SHOULD have a relatively small number (about 20) of possible values for &quot;code,&quot; and all clients MUST be capable of handling all of them. Most services will require a much larger number of more specific error codes, which are not interesting to all clients. These error codes SHOULD be exposed in the &quot;innererror&quot; name/value pair as described below. Introducing a new value for &quot;code&quot; that is visible to existing clients is a breaking change and requires a version increase. Services can avoid breaking changes by adding new error codes to &quot;innererror&quot; instead.&lt;/p&gt;
&lt;p&gt;The value for the &quot;message&quot; name/value pair MUST be a human-readable representation of the error. It is intended as an aid to developers and is not suitable for exposure to end users. Services wanting to expose a suitable message for end users MUST do so through an &lt;a href=&quot;http://docs.oasis-open.org/odata/odata-json-format/v4.0/os/odata-json-format-v4.0-os.html#_Instance_Annotations&quot; rel=&quot;nofollow&quot;&gt;annotation&lt;/a&gt; or custom property. Services SHOULD NOT localize &quot;message&quot; for the end user, because doing so MAY make the value unreadable to the app developer who may be logging the value, as well as make the value less searchable on the Internet.&lt;/p&gt;
&lt;p&gt;The value for the &quot;target&quot; name/value pair is the target of the particular error (e.g., the name of the property in error).&lt;/p&gt;
&lt;p&gt;The value for the &quot;details&quot; name/value pair MUST be an array of JSON objects that MUST contain name/value pairs for &quot;code&quot; and &quot;message,&quot; and MAY contain a name/value pair for &quot;target,&quot; as described above. The objects in the &quot;details&quot; array usually represent distinct, related errors that occurred during the request. See example below.&lt;/p&gt;
&lt;p&gt;The value for the &quot;innererror&quot; name/value pair MUST be an object. The contents of this object are service-defined. Services wanting to return more specific errors than the root-level code MUST do so by including a name/value pair for &quot;code&quot; and a nested &quot;innererror.&quot; Each nested &quot;innererror&quot; object represents a higher level of detail than its parent. When evaluating errors, clients MUST traverse through all of the nested &quot;innererrors&quot; and choose the deepest one that they understand. This scheme allows services to introduce new error codes anywhere in the hierarchy without breaking backwards compatibility, so long as old error codes still appear. The service MAY return different levels of depth and detail to different callers. For example, in development environments, the deepest &quot;innererror&quot; MAY contain internal information that can help debug the service. To guard against potential security concerns around information disclosure, services SHOULD take care not to expose too much detail unintentionally. Error objects MAY also include custom server-defined name/value pairs that MAY be specific to the code. Error types with custom server-defined properties SHOULD be declared in the service's metadata document. See example below.&lt;/p&gt;
&lt;p&gt;Error responses MAY contain &lt;a href=&quot;http://docs.oasis-open.org/odata/odata-json-format/v4.0/os/odata-json-format-v4.0-os.html#_Instance_Annotations&quot; rel=&quot;nofollow&quot;&gt;annotations&lt;/a&gt; in any of their JSON objects.&lt;/p&gt;
&lt;p&gt;We recommend that for any transient errors that may be retried, services SHOULD include a Retry-After HTTP header indicating the minimum number of seconds that clients SHOULD wait before attempting the operation again.&lt;/p&gt;
&lt;h5&gt;ErrorResponse : Object&lt;/h5&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Property&lt;/th&gt;
&lt;th&gt;Type&lt;/th&gt;
&lt;th&gt;Required&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;error&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Error&lt;/td&gt;
&lt;td&gt;✔&lt;/td&gt;
&lt;td&gt;The error object.&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h5&gt;Error : Object&lt;/h5&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Property&lt;/th&gt;
&lt;th&gt;Type&lt;/th&gt;
&lt;th&gt;Required&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;code&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;String (enumerated)&lt;/td&gt;
&lt;td&gt;✔&lt;/td&gt;
&lt;td&gt;One of a server-defined set of error codes.&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;message&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;String&lt;/td&gt;
&lt;td&gt;✔&lt;/td&gt;
&lt;td&gt;A human-readable representation of the error.&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;target&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;String&lt;/td&gt;
&lt;td/&gt;
&lt;td&gt;The target of the error.&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;details&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Error[]&lt;/td&gt;
&lt;td/&gt;
&lt;td&gt;An array of details about specific errors that led to this reported error.&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;innererror&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;InnerError&lt;/td&gt;
&lt;td/&gt;
&lt;td&gt;An object containing more specific information than the current object about the error.&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h5&gt;InnerError : Object&lt;/h5&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Property&lt;/th&gt;
&lt;th&gt;Type&lt;/th&gt;
&lt;th&gt;Required&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;code&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;String&lt;/td&gt;
&lt;td/&gt;
&lt;td&gt;A more specific error code than was provided by the containing error.&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;innererror&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;InnerError&lt;/td&gt;
&lt;td/&gt;
&lt;td&gt;An object containing more specific information than the current object about the error.&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h5&gt;Examples&lt;/h5&gt;
&lt;p&gt;Example of &quot;innererror&quot;:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-json&quot;&gt;
&lt;pre&gt;
{
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;error&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: {
    &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;code&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;BadArgument&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
    &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;message&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Previous passwords may not be reused&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
    &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;target&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;password&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
    &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;innererror&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: {
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;code&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;PasswordError&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;innererror&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: {
        &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;code&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;PasswordDoesNotMeetPolicy&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
        &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;minLength&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;6&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
        &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;maxLength&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;64&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
        &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;characterTypes&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: [&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;lowerCase&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;upperCase&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;number&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;symbol&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;],
        &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;minDistinctCharacterTypes&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;2&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
        &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;innererror&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: {
          &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;code&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;PasswordReuseNotAllowed&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
        }
      }
    }
  }
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In this example, the most basic error code is &quot;BadArgument,&quot; but for clients that are interested, there are more specific error codes in &quot;innererror.&quot; The &quot;PasswordReuseNotAllowed&quot; code may have been added by the service at a later date, having previously only returned &quot;PasswordDoesNotMeetPolicy.&quot; Existing clients do not break when the new error code is added, but new clients MAY take advantage of it. The &quot;PasswordDoesNotMeetPolicy&quot; error also includes additional name/value pairs that allow the client to determine the server's configuration, validate the user's input programmatically, or present the server's constraints to the user within the client's own localized messaging.&lt;/p&gt;
&lt;p&gt;Example of &quot;details&quot;:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-json&quot;&gt;
&lt;pre&gt;
{
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;error&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: {
    &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;code&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;BadArgument&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
    &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;message&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Multiple errors in ContactInfo data&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
    &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;target&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;ContactInfo&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
    &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;details&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: [
      {
        &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;code&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;NullValue&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
        &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;target&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;PhoneNumber&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
        &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;message&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Phone number must not be null&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
      },
      {
        &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;code&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;NullValue&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
        &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;target&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;LastName&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
        &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;message&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Last name must not be null&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
      },
      {
        &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;code&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;MalformedValue&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
        &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;target&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Address&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
        &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;message&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Address is not valid&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
      }
    ]
  }
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In this example there were multiple problems with the request, with each individual error listed in &quot;details.&quot;&lt;/p&gt;
&lt;h3&gt;7.11 HTTP Status Codes&lt;/h3&gt;
&lt;p&gt;Standard HTTP Status Codes SHOULD be used; see the HTTP Status Code definitions for more information.&lt;/p&gt;
&lt;h3&gt;7.12 Client library optional&lt;/h3&gt;
&lt;p&gt;Developers MUST be able to develop on a wide variety of platforms and languages, such as Windows, MacOS, Linux, C#, Python, Node.js, and Ruby.&lt;/p&gt;
&lt;p&gt;Services SHOULD be able to be accessed from simple HTTP tools such as curl without significant effort.&lt;/p&gt;
&lt;p&gt;Service developer portals SHOULD provide the equivalent of &quot;Get Developer Token&quot; to facilitate experimentation and curl support.&lt;/p&gt;
&lt;h2&gt;8 CORS&lt;/h2&gt;
&lt;p&gt;Services compliant with the Microsoft REST API Guidelines MUST support &lt;a href=&quot;http://www.w3.org/TR/access-control/&quot; rel=&quot;nofollow&quot;&gt;CORS (Cross Origin Resource Sharing)&lt;/a&gt;. Services SHOULD support an allowed origin of CORS * and enforce authorization through valid OAuth tokens. Services SHOULD NOT support user credentials with origin validation. There MAY be exceptions for special cases.&lt;/p&gt;
&lt;h3&gt;8.1 Client guidance&lt;/h3&gt;
&lt;p&gt;Web developers usually don't need to do anything special to take advantage of CORS. All of the handshake steps happen invisibly as part of the standard XMLHttpRequest calls they make.&lt;/p&gt;
&lt;p&gt;Many other platforms, such as .NET, have integrated support for CORS.&lt;/p&gt;
&lt;h4&gt;8.1.1 Avoiding preflight&lt;/h4&gt;
&lt;p&gt;Because the CORS protocol can trigger preflight requests that add additional round trips to the server, performance-critical apps might be interested in avoiding them. The spirit behind CORS is to avoid preflight for any simple cross-domain requests that old non-CORS-capable browsers were able to make. All other requests require preflight.&lt;/p&gt;
&lt;p&gt;A request is &quot;simple&quot; and avoids preflight if its method is GET, HEAD or POST, and if it doesn't contain any request headers besides Accept, Accept-Language and Content-Language. For POST requests, the Content-Type header is also allowed, but only if its value is &quot;application/x-www-form-urlencoded,&quot; &quot;multipart/form-data&quot; or &quot;text/plain.&quot; For any other headers or values, a preflight request will happen.&lt;/p&gt;
&lt;h3&gt;8.2 Service guidance&lt;/h3&gt;
&lt;p&gt;At minimum, services MUST:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Understand the Origin request header that browsers send on cross-domain requests, and the Access-Control-Request-Method request header that they send on preflight OPTIONS requests that check for access.&lt;/li&gt;
&lt;li&gt;If the Origin header is present in a request:
&lt;ul&gt;&lt;li&gt;If the request uses the OPTIONS method and contains the Access-Control-Request-Method header, then it is a preflight request intended to probe for access before the actual request. Otherwise, it is an actual request. For preflight requests, beyond performing the steps below to add headers, services MUST perform no additional processing and MUST return a 200 OK. For non-preflight requests, the headers below are added in addition to the request's regular processing.&lt;/li&gt;
&lt;li&gt;Add an Access-Control-Allow-Origin header to the response, containing the same value as the Origin request header. Note that this requires services to dynamically generate the header value. Resources that do not require cookies or any other form of &lt;a href=&quot;http://www.w3.org/TR/access-control/#user-credentials&quot; rel=&quot;nofollow&quot;&gt;user credentials&lt;/a&gt; MAY respond with a wildcard asterisk (*) instead. Note that the wildcard is acceptable here only, and not for any of the other headers described below.&lt;/li&gt;
&lt;li&gt;If the caller requires access to a response header that is not in the set of &lt;a href=&quot;http://www.w3.org/TR/access-control/#simple-header&quot; rel=&quot;nofollow&quot;&gt;simple response headers&lt;/a&gt; (Cache-Control, Content-Language, Content-Type, Expires, Last-Modified, Pragma), then add an Access-Control-Expose-Headers header containing the list of additional response header names the client should have access to.&lt;/li&gt;
&lt;li&gt;If the request requires cookies, then add an Access-Control-Allow-Credentials header set to &quot;true.&quot;&lt;/li&gt;
&lt;li&gt;If the request was a preflight request (see first bullet), then the service MUST:
&lt;ul&gt;&lt;li&gt;Add an Access-Control-Allow-Headers response header containing the list of request header names the client is permitted to use. This list need only contain headers that are not in the set of &lt;a href=&quot;http://www.w3.org/TR/access-control/#simple-header&quot; rel=&quot;nofollow&quot;&gt;simple request headers&lt;/a&gt; (Accept, Accept-Language, Content-Language). If there are no restrictions on headers the service accepts, the service MAY simply return the same value as the Access-Control-Request-Headers header sent by the client.&lt;/li&gt;
&lt;li&gt;Add an Access-Control-Allow-Methods response header containing the list of HTTP methods the caller is permitted to use.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Add an Access-Control-Max-Age pref response header containing the number of seconds for which this preflight response is valid (and hence can be avoided before subsequent actual requests). Note that while it is customary to use a large value like 2592000 (30 days), many browsers self-impose a much lower limit (e.g., five minutes).&lt;/p&gt;
&lt;p&gt;Because browser preflight response caches are notoriously weak, the additional round trip from a preflight response hurts performance. Services used by interactive Web clients where performance is critical SHOULD avoid patterns that cause a preflight request&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;
&lt;p&gt;For GET and HEAD calls, avoid requiring request headers that are not part of the simple set above. Allow them to be provided as query parameters instead.&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;The Authorization header is not part of the simple set, so the authentication token MUST be sent through the &quot;access_token&quot; query parameter instead, for resources requiring authentication. Note that passing authentication tokens in the URL is not recommended, because it can lead to the token getting recorded in server logs and exposed to anyone with access to those logs. Services that accept authentication tokens through the URL MUST take steps to mitigate the security risks, such as using short-lived authentication tokens, suppressing the auth token from getting logged, and controlling access to server logs.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Avoid requiring cookies. XmlHttpRequest will only send cookies on cross-domain requests if the &quot;withCredentials&quot; attribute is set; this also causes a preflight request.&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Services that require cookie-based authentication MUST use a &quot;dynamic canary&quot; to secure all APIs that accept cookies.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;For POST calls, prefer simple Content-Types in the set of (&quot;application/x-www-form-urlencoded,&quot; &quot;multipart/form-data,&quot; &quot;text/plain&quot;) where applicable. Any other Content-Type will induce a preflight request.&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Services MUST NOT contravene other API recommendations in the name of avoiding CORS preflight requests. In particular, in accordance with recommendations, most POST requests will actually require a preflight request due to the Content-Type.&lt;/li&gt;
&lt;li&gt;If eliminating preflight is critical, then a service MAY support alternative mechanisms for data transfer, but the RECOMMENDED approach MUST also be supported.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;In addition, when appropriate services MAY support the JSONP pattern for simple, GET-only cross-domain access. In JSONP, services take a parameter indicating the format (&lt;em&gt;$format=json&lt;/em&gt;) and a parameter indicating a callback (&lt;em&gt;$callback=someFunc&lt;/em&gt;), and return a text/javascript document containing the JSON response wrapped in a function call with the indicated name. More on JSONP at Wikipedia: &lt;a href=&quot;https://en.wikipedia.org/wiki/JSONP&quot; rel=&quot;nofollow&quot;&gt;JSONP&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;9 Collections&lt;/h2&gt;
&lt;h3&gt;9.1 Item keys&lt;/h3&gt;
&lt;p&gt;Services MAY support durable identifiers for each item in the collection, and that identifier SHOULD be represented in JSON as &quot;id&quot;. These durable identifiers are often used as item keys.&lt;/p&gt;
&lt;p&gt;Collections that support durable identifiers MAY support delta queries.&lt;/p&gt;
&lt;h3&gt;9.2 Serialization&lt;/h3&gt;
&lt;p&gt;Collections are represented in JSON using standard array notation.&lt;/p&gt;
&lt;h3&gt;9.3 Collection URL patterns&lt;/h3&gt;
&lt;p&gt;Collections are located directly under the service root when they are top level, or as a segment under another resource when scoped to that resource.&lt;/p&gt;
&lt;p&gt;For example:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;GET&lt;/span&gt; https://api.contoso.com/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/people
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Whenever possible, services MUST support the &quot;/&quot; pattern. For example:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;GET&lt;/span&gt; https://{&lt;span class=&quot;pl-ii&quot;&gt;serviceRoot&lt;/span&gt;}/{&lt;span class=&quot;pl-ii&quot;&gt;collection&lt;/span&gt;}/{&lt;span class=&quot;pl-ii&quot;&gt;id&lt;/span&gt;}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Where:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;{serviceRoot} – the combination of host (site URL) + the root path to the service&lt;/li&gt;
&lt;li&gt;{collection} – the name of the collection, unabbreviated, pluralized&lt;/li&gt;
&lt;li&gt;{id} – the value of the unique id property. When using the &quot;/&quot; pattern this MUST be the raw string/number/guid value with no quoting but properly escaped to fit in a URL segment.&lt;/li&gt;
&lt;/ul&gt;&lt;h4&gt;9.3.1 Nested collections and properties&lt;/h4&gt;
&lt;p&gt;Collection items MAY contain other collections. For example, a user collection MAY contain user resources that have multiple addresses:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;GET&lt;/span&gt; https://api.contoso.com/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/people/&lt;span class=&quot;pl-c1&quot;&gt;123&lt;/span&gt;/addresses
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;highlight highlight-source-json&quot;&gt;
&lt;pre&gt;
{
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;value&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: [
    { &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;street&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;1st Avenue&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;city&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Seattle&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; },
    { &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;street&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;124th Ave NE&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;city&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Redmond&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; }
  ]
}
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;9.4 Big collections&lt;/h3&gt;
&lt;p&gt;As data grows, so do collections. Planning for pagination is important for all services. Therefore, when multiple pages are available, the serialization payload MUST contain the opaque URL for the next page as appropriate. Refer to the paging guidance for more details.&lt;/p&gt;
&lt;p&gt;Clients MUST be resilient to collection data being either paged or nonpaged for any given request.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-json&quot;&gt;
&lt;pre&gt;
{
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;value&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;:[
    { &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;id&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Item 1&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;price&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;99.95&lt;/span&gt;,&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;sizes&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;null&lt;/span&gt;},
    { &lt;span class=&quot;pl-ii&quot;&gt;…&lt;/span&gt; },
    { &lt;span class=&quot;pl-ii&quot;&gt;…&lt;/span&gt; },
    { &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;id&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Item 99&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;price&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;59.99&lt;/span&gt;,&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;sizes&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;null&lt;/span&gt;}
  ],
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;@nextLink&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;{opaqueUrl}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;9.5 Changing collections&lt;/h3&gt;
&lt;p&gt;POST requests are not idempotent. This means that two POST requests sent to a collection resource with exactly the same payload MAY lead to multiple items being created in that collection. This is often the case for insert operations on items with a server-side generated id.&lt;/p&gt;
&lt;p&gt;For example, the following request:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;POST&lt;/span&gt; https://api.contoso.com/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/people
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Would lead to a response indicating the location of the new collection item:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-c1&quot;&gt;201 Created&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Location:&lt;/span&gt; https://api.contoso.com/v1.0/people/123&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And once executed again, would likely lead to another resource:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-c1&quot;&gt;201 Created&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Location:&lt;/span&gt; https://api.contoso.com/v1.0/people/124&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;While a PUT request would require the indication of the collection item with the corresponding key instead:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;PUT&lt;/span&gt; https://api.contoso.com/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/people/&lt;span class=&quot;pl-c1&quot;&gt;123&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;9.6 Sorting collections&lt;/h3&gt;
&lt;p&gt;The results of a collection query MAY be sorted based on property values. The property is determined by the value of the &lt;em&gt;$orderBy&lt;/em&gt; query parameter.&lt;/p&gt;
&lt;p&gt;The value of the &lt;em&gt;$orderBy&lt;/em&gt; parameter contains a comma-separated list of expressions used to sort the items. A special case of such an expression is a property path terminating on a primitive property.&lt;/p&gt;
&lt;p&gt;The expression MAY include the suffix &quot;asc&quot; for ascending or &quot;desc&quot; for descending, separated from the property name by one or more spaces. If &quot;asc&quot; or &quot;desc&quot; is not specified, the service MUST order by the specified property in ascending order.&lt;/p&gt;
&lt;p&gt;NULL values MUST sort as &quot;less than&quot; non-NULL values.&lt;/p&gt;
&lt;p&gt;Items MUST be sorted by the result values of the first expression, and then items with the same value for the first expression are sorted by the result value of the second expression, and so on. The sort order is the inherent order for the type of the property.&lt;/p&gt;
&lt;p&gt;For example:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;GET&lt;/span&gt; https://api.contoso.com/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/people&lt;span class=&quot;pl-c1&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;$orderBy&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;name&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Will return all people sorted by name in ascending order.&lt;/p&gt;
&lt;p&gt;For example:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;GET&lt;/span&gt; https://api.contoso.com/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/people&lt;span class=&quot;pl-c1&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;$orderBy&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;name desc&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Will return all people sorted by name in descending order.&lt;/p&gt;
&lt;p&gt;Sub-sorts can be specified by a comma-separated list of property names with OPTIONAL direction qualifier.&lt;/p&gt;
&lt;p&gt;For example:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;GET&lt;/span&gt; https://api.contoso.com/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/people&lt;span class=&quot;pl-c1&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;$orderBy&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;name desc,hireDate&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Will return all people sorted by name in descending order and a secondary sort order of hireDate in ascending order.&lt;/p&gt;
&lt;p&gt;Sorting MUST compose with filtering such that:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;GET&lt;/span&gt; https://api.contoso.com/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/people&lt;span class=&quot;pl-c1&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;$filter&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;name eq 'david'&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;$orderBy&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;hireDate&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Will return all people whose name is David sorted in ascending order by hireDate.&lt;/p&gt;
&lt;h4&gt;9.6.1 Interpreting a sorting expression&lt;/h4&gt;
&lt;p&gt;Sorting parameters MUST be consistent across pages, as both client and server-side paging is fully compatible with sorting.&lt;/p&gt;
&lt;p&gt;If a service does not support sorting by a property named in a &lt;em&gt;$orderBy&lt;/em&gt; expression, the service MUST respond with an error message as defined in the Responding to Unsupported Requests section.&lt;/p&gt;
&lt;h3&gt;9.7 Filtering&lt;/h3&gt;
&lt;p&gt;The &lt;em&gt;$filter&lt;/em&gt; querystring parameter allows clients to filter a collection of resources that are addressed by a request URL. The expression specified with &lt;em&gt;$filter&lt;/em&gt; is evaluated for each resource in the collection, and only items where the expression evaluates to true are included in the response. Resources for which the expression evaluates to false or to null, or which reference properties that are unavailable due to permissions, are omitted from the response.&lt;/p&gt;
&lt;p&gt;Example: return all Products whose Price is less than $10.00&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;GET&lt;/span&gt; https://api.contoso.com/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/products&lt;span class=&quot;pl-c1&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;$filter&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;price lt 10.00&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The value of the &lt;em&gt;$filter&lt;/em&gt; option is a Boolean expression.&lt;/p&gt;
&lt;h4&gt;9.7.1 Filter operations&lt;/h4&gt;
&lt;p&gt;Services that support &lt;em&gt;$filter&lt;/em&gt; SHOULD support the following minimal set of operations.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Operator&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;th&gt;Example&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Comparison Operators&lt;/td&gt;
&lt;td/&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;eq&lt;/td&gt;
&lt;td&gt;Equal&lt;/td&gt;
&lt;td&gt;city eq 'Redmond'&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;ne&lt;/td&gt;
&lt;td&gt;Not equal&lt;/td&gt;
&lt;td&gt;city ne 'London'&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;gt&lt;/td&gt;
&lt;td&gt;Greater than&lt;/td&gt;
&lt;td&gt;price gt 20&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;ge&lt;/td&gt;
&lt;td&gt;Greater than or equal&lt;/td&gt;
&lt;td&gt;price ge 10&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;lt&lt;/td&gt;
&lt;td&gt;Less than&lt;/td&gt;
&lt;td&gt;price lt 20&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;le&lt;/td&gt;
&lt;td&gt;Less than or equal&lt;/td&gt;
&lt;td&gt;price le 100&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Logical Operators&lt;/td&gt;
&lt;td/&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;and&lt;/td&gt;
&lt;td&gt;Logical and&lt;/td&gt;
&lt;td&gt;price le 200 and price gt 3.5&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;or&lt;/td&gt;
&lt;td&gt;Logical or&lt;/td&gt;
&lt;td&gt;price le 3.5 or price gt 200&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;not&lt;/td&gt;
&lt;td&gt;Logical negation&lt;/td&gt;
&lt;td&gt;not price le 3.5&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Grouping Operators&lt;/td&gt;
&lt;td/&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;( )&lt;/td&gt;
&lt;td&gt;Precedence grouping&lt;/td&gt;
&lt;td&gt;(priority eq 1 or city eq 'Redmond') and price gt 100&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h4&gt;9.7.2 Operator examples&lt;/h4&gt;
&lt;p&gt;The following examples illustrate the use and semantics of each of the logical operators.&lt;/p&gt;
&lt;p&gt;Example: all products with a name equal to 'Milk'&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;GET&lt;/span&gt; https://api.contoso.com/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/products&lt;span class=&quot;pl-c1&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;$filter&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;name eq 'Milk'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Example: all products with a name not equal to 'Milk'&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;GET&lt;/span&gt; https://api.contoso.com/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/products&lt;span class=&quot;pl-c1&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;$filter&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;name ne 'Milk'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Example: all products with the name 'Milk' that also have a price less than 2.55:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;GET&lt;/span&gt; https://api.contoso.com/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/products&lt;span class=&quot;pl-c1&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;$filter&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;name eq 'Milk' and price lt 2.55&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Example: all products that either have the name 'Milk' or have a price less than 2.55:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;GET&lt;/span&gt; https://api.contoso.com/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/products&lt;span class=&quot;pl-c1&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;$filter&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;name eq 'Milk' or price lt 2.55&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Example 54: all products that have the name 'Milk' or 'Eggs' and have a price less than 2.55:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;GET&lt;/span&gt; https://api.contoso.com/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/products&lt;span class=&quot;pl-c1&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;$filter&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;(name eq 'Milk' or name eq 'Eggs') and price lt 2.55&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;9.7.3 Operator precedence&lt;/h4&gt;
&lt;p&gt;Services MUST use the following operator precedence for supported operators when evaluating &lt;em&gt;$filter&lt;/em&gt; expressions. Operators are listed by category in order of precedence from highest to lowest. Operators in the same category have equal precedence:&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Group&lt;/th&gt;
&lt;th&gt;Operator&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Grouping&lt;/td&gt;
&lt;td&gt;( )&lt;/td&gt;
&lt;td&gt;Precedence grouping&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Unary&lt;/td&gt;
&lt;td&gt;not&lt;/td&gt;
&lt;td&gt;Logical Negation&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Relational&lt;/td&gt;
&lt;td&gt;gt&lt;/td&gt;
&lt;td&gt;Greater Than&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;pre&gt;
&lt;code&gt;            | ge       | Greater than or Equal
            | lt       | Less Than
            | le       | Less than or Equal
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Equality | eq | Equal | ne | Not Equal Conditional AND | and | Logical And Conditional OR | or | Logical Or&lt;/p&gt;
&lt;h3&gt;9.8 Pagination&lt;/h3&gt;
&lt;p&gt;RESTful APIs that return collections MAY return partial sets. Consumers of these services MUST expect partial result sets and correctly page through to retrieve an entire set.&lt;/p&gt;
&lt;p&gt;There are two forms of pagination that MAY be supported by RESTful APIs. Server-driven paging mitigates against denial-of-service attacks by forcibly paginating a request over multiple response payloads. Client-driven paging enables clients to request only the number of resources that it can use at a given time.&lt;/p&gt;
&lt;p&gt;Sorting and Filtering parameters MUST be consistent across pages, because both client- and server-side paging is fully compatible with both filtering and sorting.&lt;/p&gt;
&lt;h4&gt;9.8.1 Server-driven paging&lt;/h4&gt;
&lt;p&gt;Paginated responses MUST indicate a partial result by including a continuation token in the response. The absence of a continuation token means that no additional pages are available.&lt;/p&gt;
&lt;p&gt;Clients MUST treat the continuation URL as opaque, which means that query options may not be changed while iterating over a set of partial results.&lt;/p&gt;
&lt;p&gt;Example:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;GET&lt;/span&gt; http://api.contoso.com/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/people HTTP/&lt;span class=&quot;pl-c1&quot;&gt;1.1&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Accept:&lt;/span&gt; application/json&lt;/span&gt;

HTTP/&lt;span class=&quot;pl-c1&quot;&gt;1.1&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;200&lt;/span&gt; OK
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Content-Type:&lt;/span&gt; application/json&lt;/span&gt;

{
  &lt;span class=&quot;pl-ii&quot;&gt;...,&lt;/span&gt;
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;value&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: [&lt;span class=&quot;pl-ii&quot;&gt;...&lt;/span&gt;],
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;@nextLink&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;{opaqueUrl}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;9.8.2 Client-driven paging&lt;/h4&gt;
&lt;p&gt;Clients MAY use &lt;em&gt;$top&lt;/em&gt; and &lt;em&gt;$skip&lt;/em&gt; query parameters to specify a number of results to return and an offset. The server SHOULD honor the values specified by the client; however, clients MUST be prepared to handle responses that contain a different page size or contain a continuation token.&lt;/p&gt;
&lt;p&gt;Note: If the server can't honor &lt;em&gt;$top&lt;/em&gt; and/or &lt;em&gt;$skip&lt;/em&gt;, the server MUST return an error to the client informing about it instead of just ignoring the query options. This will avoid the risk of the client making assumptions about the data returned.&lt;/p&gt;
&lt;p&gt;Example:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;GET&lt;/span&gt; http://api.contoso.com/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/people&lt;span class=&quot;pl-c1&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;$top&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;$skip&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;2 HTTP/1.1&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Accept:&lt;/span&gt; application/json&lt;/span&gt;

HTTP/&lt;span class=&quot;pl-c1&quot;&gt;1.1&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;200&lt;/span&gt; OK
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Content-Type:&lt;/span&gt; application/json&lt;/span&gt;

{
  &lt;span class=&quot;pl-ii&quot;&gt;...,&lt;/span&gt;
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;value&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: [&lt;span class=&quot;pl-ii&quot;&gt;...&lt;/span&gt;]
}
&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;9.8.3 Additional considerations&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;Stable order prerequisite:&lt;/strong&gt; Both forms of paging depend on the collection of items having a stable order. The server MUST supplement any specified order criteria with additional sorts (typically by key) to ensure that items are always ordered consistently.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Missing/repeated results:&lt;/strong&gt; Even if the server enforces a consistent sort order, results MAY be missing or repeated based on creation or deletion of other resources. Clients MUST be prepared to deal with these discrepancies. The server SHOULD always encode the record ID of the last read record, helping the client in the process of managing repeated/missing results.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Combining client- and server-driven paging:&lt;/strong&gt; Note that client-driven paging does not preclude server-driven paging. If the page size requested by the client is larger than the default page size supported by the server, the expected response would be the number of results specified by the client, paginated as specified by the server paging settings.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Page Size:&lt;/strong&gt; Clients MAY request server-driven paging with a specific page size by specifying a &lt;em&gt;$maxpagesize&lt;/em&gt; preference. The server SHOULD honor this preference if the specified page size is smaller than the server's default page size.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Paginating embedded collections:&lt;/strong&gt; It is possible for both client-driven paging and server-driven paging to be applied to embedded collections. If a server paginates an embedded collection, it MUST include additional continuation tokens as appropriate.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Recordset count:&lt;/strong&gt; Developers who want to know the full number of records across all pages, MAY include the query parameter &lt;em&gt;$count=true&lt;/em&gt; to tell the server to include the count of items in the response.&lt;/p&gt;
&lt;h3&gt;9.9 Compound collection operations&lt;/h3&gt;
&lt;p&gt;Filtering, Sorting and Pagination operations MAY all be performed against a given collection. When these operations are performed together, the evaluation order MUST be:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;&lt;strong&gt;Filtering&lt;/strong&gt;. This includes all range expressions performed as an AND operation.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Sorting&lt;/strong&gt;. The potentially filtered list is sorted according to the sort criteria.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Pagination&lt;/strong&gt;. The materialized paginated view is presented over the filtered, sorted list. This applies to both server-driven pagination and client-driven pagination.&lt;/li&gt;
&lt;/ol&gt;&lt;h2&gt;10 Delta queries&lt;/h2&gt;
&lt;p&gt;Services MAY choose to support delta queries.&lt;/p&gt;
&lt;h3&gt;10.1 Delta links&lt;/h3&gt;
&lt;p&gt;Delta links are opaque, service-generated links that the client uses to retrieve subsequent changes to a result.&lt;/p&gt;
&lt;p&gt;At a conceptual level delta links are based on a defining query that describes the set of results for which changes are being tracked. The delta link encodes the collection of entities for which changes are being tracked, along with a starting point from which to track changes.&lt;/p&gt;
&lt;p&gt;If the query contains a filter, the response MUST include only changes to entities matching the specified criteria. The key principles of the Delta Query are:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Every item in the set MUST have a persistent identifier. That identifier SHOULD be represented as &quot;id&quot;. This identifier is a service defined opaque string that MAY be used by the client to track object across calls.&lt;/li&gt;
&lt;li&gt;The delta MUST contain an entry for each entity that newly matches the specified criteria, and MUST contain a &quot;@removed&quot; entry for each entity that no longer matches the criteria.&lt;/li&gt;
&lt;li&gt;Re-evaluate the query and compare it to original set of results; every entry uniquely in the current set MUST be returned as an Add operation, and every entry uniquely in the original set MUST be returned as a &quot;remove&quot; operation.&lt;/li&gt;
&lt;li&gt;Each entity that previously did not match the criteria but matches it now MUST be returned as an &quot;add&quot;; conversely, each entity that previously matched the query but no longer does MUST be returned as a &quot;@removed&quot; entry.&lt;/li&gt;
&lt;li&gt;Entities that have changed MUST be included in the set using their standard representation.&lt;/li&gt;
&lt;li&gt;Services MAY add additional metadata to the &quot;@removed&quot; node, such as a reason for removal, or a &quot;removed at&quot; timestamp. We recommend teams coordinate with the Microsoft REST API Guidelines Working Group on extensions to help maintain consistency.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;The delta link MUST NOT encode any client top or skip value.&lt;/p&gt;
&lt;h3&gt;10.2 Entity representation&lt;/h3&gt;
&lt;p&gt;Added and updated entities are represented in the entity set using their standard representation. From the perspective of the set, there is no difference between an added or updated entity.&lt;/p&gt;
&lt;p&gt;Removed entities are represented using only their &quot;id&quot; and an &quot;@removed&quot; node. The presence of an &quot;@removed&quot; node MUST represent the removal of the entry from the set.&lt;/p&gt;
&lt;h3&gt;10.3 Obtaining a delta link&lt;/h3&gt;
&lt;p&gt;A delta link is obtained by querying a collection or entity and appending a $delta query string parameter. For example:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;GET&lt;/span&gt; https://api.contoso.com/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/people&lt;span class=&quot;pl-c1&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;$delta&lt;/span&gt;
HTTP/&lt;span class=&quot;pl-c1&quot;&gt;1.1&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Accept:&lt;/span&gt; application/json&lt;/span&gt;

HTTP/&lt;span class=&quot;pl-c1&quot;&gt;1.1&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;200&lt;/span&gt; OK
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Content-Type:&lt;/span&gt; application/json&lt;/span&gt;

{
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;value&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;:[
    { &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;id&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;1&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;name&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Matt&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;},
    { &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;id&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;2&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;name&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Mark&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;},
    { &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;id&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;3&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;name&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;John&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;},
  ],
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;@deltaLink&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;{opaqueUrl}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Note: If the collection is paginated the deltaLink will only be present on the final page but MUST reflect any changes to the data returned across all pages.&lt;/p&gt;
&lt;h3&gt;10.4 Contents of a delta link response&lt;/h3&gt;
&lt;p&gt;Added/Updated entries MUST appear as regular JSON objects, with regular item properties. Returning the added/modified items in their regular representation allows the client to merge them into their existing &quot;cache&quot; using standard merge concepts based on the &quot;id&quot; field.&lt;/p&gt;
&lt;p&gt;Entries removed from the defined collection MUST be included in the response. Items removed from the set MUST be represented using only their &quot;id&quot; and an &quot;@removed&quot; node.&lt;/p&gt;
&lt;h3&gt;10.5 Using a delta link&lt;/h3&gt;
&lt;p&gt;The client requests changes by invoking the GET method on the delta link. The client MUST use the delta URL as is -- in other words the client MUST NOT modify the URL in any way (e.g., parsing it and adding additional query string parameters). In this example:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;GET&lt;/span&gt; https://{&lt;span class=&quot;pl-ii&quot;&gt;opaqueUrl&lt;/span&gt;} HTTP/&lt;span class=&quot;pl-c1&quot;&gt;1.1&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Accept:&lt;/span&gt; application/json&lt;/span&gt;

HTTP/&lt;span class=&quot;pl-c1&quot;&gt;1.1&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;200&lt;/span&gt; OK
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Content-Type:&lt;/span&gt; application/json&lt;/span&gt;

{
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;value&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;:[
    { &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;id&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;1&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;name&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Mat&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;},
    { &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;id&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;2&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;name&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Marc&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;},
    { &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;id&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;3&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;@removed&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: {} },
    { &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;id&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;4&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;name&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Luc&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;}
  ],
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;@deltaLink&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;{opaqueUrl}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The results of a request against the delta link may span multiple pages but MUST be ordered by the service across all pages in such a way as to ensure a deterministic result when applied in order to the response that contained the delta link.&lt;/p&gt;
&lt;p&gt;If no changes have occurred, the response is an empty collection that contains a delta link for subsequent changes if requested. This delta link MAY be identical to the delta link resulting in the empty collection of changes.&lt;/p&gt;
&lt;p&gt;If the delta link is no longer valid, the service MUST respond with &lt;em&gt;410 Gone&lt;/em&gt;. The response SHOULD include a Location header that the client can use to retrieve a new baseline set of results.&lt;/p&gt;
&lt;h2&gt;11 JSON standardizations&lt;/h2&gt;
&lt;h3&gt;11.1 JSON formatting standardization for primitive types&lt;/h3&gt;
&lt;p&gt;Primitive values MUST be serialized to JSON following the rules of &lt;a href=&quot;https://tools.ietf.org/html/rfc4627&quot; rel=&quot;nofollow&quot;&gt;RFC4627&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;11.2 Guidelines for dates and times&lt;/h3&gt;
&lt;h4&gt;11.2.1 Producing dates&lt;/h4&gt;
&lt;p&gt;Services MUST produce dates using the &lt;code&gt;DateLiteral&lt;/code&gt; format, and SHOULD use the &lt;code&gt;Iso8601Literal&lt;/code&gt; format unless there are compelling reasons to do otherwise. Services that do use the &lt;code&gt;StructuredDateLiteral&lt;/code&gt; format MUST NOT produce dates using the &lt;code&gt;T&lt;/code&gt; kind unless BOTH the additional precision is REQUIRED and ECMAScript clients are explicitly unsupported. (Non-Normative statement: When deciding which particular &lt;code&gt;DateKind&lt;/code&gt; to standardize on, the approximate order of preference is &lt;code&gt;E, C, U, W, O, X, I, T&lt;/code&gt;. This optimizes for ECMAScript, .NET, and C++ programmers, in that order.)&lt;/p&gt;
&lt;h4&gt;11.2.2 Consuming dates&lt;/h4&gt;
&lt;p&gt;Services MUST accept dates from clients that use the same &lt;code&gt;DateLiteral&lt;/code&gt; format (including the &lt;code&gt;DateKind&lt;/code&gt;, if applicable) that they produce, and SHOULD accept dates using any &lt;code&gt;DateLiteral&lt;/code&gt; format.&lt;/p&gt;
&lt;h4&gt;11.2.3 Compatibility&lt;/h4&gt;
&lt;p&gt;Services MUST use the same &lt;code&gt;DateLiteral&lt;/code&gt; format (including the same &lt;code&gt;DateKind&lt;/code&gt;, if applicable) for all resources of the same type, and SHOULD use the same &lt;code&gt;DateLiteral&lt;/code&gt; format (and &lt;code&gt;DateKind&lt;/code&gt;, if applicable) for all resources across the entire service.&lt;/p&gt;
&lt;p&gt;Any change to the &lt;code&gt;DateLiteral&lt;/code&gt; format produced by the service (including the &lt;code&gt;DateKind&lt;/code&gt;, if applicable) and any reductions in the &lt;code&gt;DateLiteral&lt;/code&gt; formats (and &lt;code&gt;DateKind&lt;/code&gt;, if applicable) accepted by the service MUST be treated as a breaking change. Any widening of the &lt;code&gt;DateLiteral&lt;/code&gt; formats accepted by the service is NOT considered a breaking change.&lt;/p&gt;
&lt;h3&gt;11.3 JSON serialization of dates and times&lt;/h3&gt;
&lt;p&gt;Round-tripping serialized dates with JSON is a hard problem. Although ECMAScript supports literals for most built-in types, it does not define a literal format for dates. The Web has coalesced around the &lt;a href=&quot;http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.1.15&quot; rel=&quot;nofollow&quot;&gt;ECMAScript subset of ISO 8601 date formats (ISO 8601)&lt;/a&gt;, but there are situations where this format is not desirable. For those cases, this document defines a JSON serialization format that can be used to unambiguously represent dates in different formats. Other serialization formats (such as XML) could be derived from this format.&lt;/p&gt;
&lt;h4&gt;11.3.1 The &lt;code&gt;DateLiteral&lt;/code&gt; format&lt;/h4&gt;
&lt;p&gt;Dates represented in JSON are serialized using the following grammar. Informally, a &lt;code&gt;DateValue&lt;/code&gt; is either an ISO 8601-formatted string or a JSON object containing two properties named &lt;code&gt;kind&lt;/code&gt; and &lt;code&gt;value&lt;/code&gt; that together define a point in time. The following is not a context-free grammar; in particular, the interpretation of &lt;code&gt;DateValue&lt;/code&gt; depends on the value of &lt;code&gt;DateKind&lt;/code&gt;, but this minimizes the number of productions required to describe the format.&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;DateLiteral:
  Iso8601Literal
  StructuredDateLiteral

Iso8601Literal:
  A string literal as defined in http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.1.15. Note that the full grammar for ISO 8601 (such as &quot;basic format&quot; without separators) is not supported.
  All dates default to UTC unless specified otherwise.

StructuredDateLiteral:
  { DateKindProperty , DateValueProperty }
  { DateValueProperty , DateKindProperty }

DateKindProperty
  &quot;kind&quot; : DateKind

DateKind:
  &quot;C&quot;            ; see below
  &quot;E&quot;            ; see below
  &quot;I&quot;            ; see below
  &quot;O&quot;            ; see below
  &quot;T&quot;            ; see below
  &quot;U&quot;            ; see below
  &quot;W&quot;            ; see below
  &quot;X&quot;            ; see below

DateValueProperty:
  &quot;value&quot; : DateValue

DateValue:
  UnsignedInteger        ; not defined here
  SignedInteger        ; not defined here
  RealNumber        ; not defined here
  Iso8601Literal        ; as above
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4&gt;11.3.2 Commentary on date formatting&lt;/h4&gt;
&lt;p&gt;A &lt;code&gt;DateLiteral&lt;/code&gt; using the &lt;code&gt;Iso8601Literal&lt;/code&gt; production is relatively straightforward. Here is an example of an object with a property named &lt;code&gt;creationDate&lt;/code&gt; that is set to February 13, 2015, at 1:15 p.m. UTC:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-json&quot;&gt;
&lt;pre&gt;
{ &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;creationDate&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; : &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;2015-02-13T13:15Z&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code&gt;StructuredDateLiteral&lt;/code&gt; consists of a &lt;code&gt;DateKind&lt;/code&gt; and an accompanying &lt;code&gt;DateValue&lt;/code&gt; whose valid values (and their interpretation) depend on the &lt;code&gt;DateKind&lt;/code&gt;. The following table describes the valid combinations and their meaning:&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;DateKind&lt;/th&gt;
&lt;th&gt;DateValue&lt;/th&gt;
&lt;th&gt;Colloquial Name &amp;amp; Interpretation&lt;/th&gt;
&lt;th&gt;More Info&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;C&lt;/td&gt;
&lt;td&gt;UnsignedInteger&lt;/td&gt;
&lt;td&gt;&quot;CLR&quot;; number of milliseconds since midnight January 1, 0001; negative values are not allowed. &lt;em&gt;See note below.&lt;/em&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&quot;https://msdn.microsoft.com/en-us/library/System.DateTime(v=vs.110).aspx&quot; rel=&quot;nofollow&quot;&gt;MSDN&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;E&lt;/td&gt;
&lt;td&gt;SignedInteger&lt;/td&gt;
&lt;td&gt;&quot;ECMAScript&quot;; number of milliseconds since midnight, January 1, 1970.&lt;/td&gt;
&lt;td&gt;&lt;a href=&quot;http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.1.1&quot; rel=&quot;nofollow&quot;&gt;ECMA International&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;I&lt;/td&gt;
&lt;td&gt;Iso8601Literal&lt;/td&gt;
&lt;td&gt;&quot;ISO 8601&quot;; a string limited to the ECMAScript subset.&lt;/td&gt;
&lt;td/&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;O&lt;/td&gt;
&lt;td&gt;RealNumber&lt;/td&gt;
&lt;td&gt;&quot;OLE Date&quot;; integral part is the number of days since midnight, December 31, 1899, and fractional part is the time within the day (0.5 = midday).&lt;/td&gt;
&lt;td&gt;&lt;a href=&quot;https://msdn.microsoft.com/en-us/library/windows/desktop/ms221199(v=vs.85).aspx&quot; rel=&quot;nofollow&quot;&gt;MSDN&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;T&lt;/td&gt;
&lt;td&gt;SignedInteger&lt;/td&gt;
&lt;td&gt;&quot;Ticks&quot;; number of ticks (100-nanosecond intervals) since midnight January 1, 1601. &lt;em&gt;See note below.&lt;/em&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&quot;https://msdn.microsoft.com/en-us/library/windows/desktop/ms724290(v=vs.85).aspx&quot; rel=&quot;nofollow&quot;&gt;MSDN&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;U&lt;/td&gt;
&lt;td&gt;SignedInteger&lt;/td&gt;
&lt;td&gt;&quot;UNIX&quot;; number of seconds since midnight, January 1, 1970.&lt;/td&gt;
&lt;td&gt;&lt;a href=&quot;https://msdn.microsoft.com/en-us/library/1f4c8f33.aspx&quot; rel=&quot;nofollow&quot;&gt;MSDN&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;W&lt;/td&gt;
&lt;td&gt;SignedInteger&lt;/td&gt;
&lt;td&gt;&quot;Windows&quot;; number of milliseconds since midnight January 1, 1601. &lt;em&gt;See note below.&lt;/em&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&quot;https://msdn.microsoft.com/en-us/library/windows/desktop/ms724290(v=vs.85).aspx&quot; rel=&quot;nofollow&quot;&gt;MSDN&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;X&lt;/td&gt;
&lt;td&gt;RealNumber&lt;/td&gt;
&lt;td&gt;&quot;Excel&quot;; as for &lt;code&gt;O&lt;/code&gt; but the year 1900 is incorrectly treated as a leap year, and day 0 is &quot;January 0 (zero).&quot;&lt;/td&gt;
&lt;td&gt;&lt;a href=&quot;http://support.microsoft.com/kb/214326?wa=wsignin1.0&quot; rel=&quot;nofollow&quot;&gt;Microsoft Support&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;Important note for &lt;code&gt;C&lt;/code&gt; and &lt;code&gt;W&lt;/code&gt; kinds:&lt;/strong&gt; The native CLR and Windows times are represented by 100-nanosecond &quot;tick&quot; values. To interoperate with ECMAScript clients that have limited precision, &lt;em&gt;these values MUST be converted to and from milliseconds&lt;/em&gt; when (de)serialized as a &lt;code&gt;DateLiteral&lt;/code&gt;. One millisecond is equivalent to 10,000 ticks.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Important note for &lt;code&gt;T&lt;/code&gt; kind:&lt;/strong&gt; This kind preserves the full fidelity of the Windows native time formats (and is trivially convertible to and from the native CLR format) but is incompatible with ECMAScript clients. Therefore, its use SHOULD be limited to only those scenarios that both require the additional precision and do not need to interoperate with ECMAScript clients.&lt;/p&gt;
&lt;p&gt;Here is the same example of an object with a property named creationDate that is set to February 13, 2015, at 1:15 p.m. UTC, using several formats:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-json&quot;&gt;
&lt;pre&gt;
[
  { &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;creationDate&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; : { &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;kind&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; : &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;O&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;value&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; : &lt;span class=&quot;pl-c1&quot;&gt;42048.55&lt;/span&gt; } },
  { &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;creationDate&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; : { &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;kind&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; : &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;E&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;value&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; : &lt;span class=&quot;pl-c1&quot;&gt;1423862100000&lt;/span&gt; } }
]
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;One of the benefits of separating the kind from the value is that once a client knows the kind used by a particular service, it can interpret the value without requiring any additional parsing. In the common case of the value being a number, this makes coding easier for developers:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-cs&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; We know this service always gives out ECMAScript-format dates&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;date&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;Date&lt;/span&gt;(&lt;span class=&quot;pl-smi&quot;&gt;serverResponse&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;someObject&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;creationDate&lt;/span&gt;.&lt;span class=&quot;pl-smi&quot;&gt;value&lt;/span&gt;);
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;11.4 Durations&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/ISO_8601#Durations&quot; rel=&quot;nofollow&quot;&gt;Durations&lt;/a&gt; need to be serialized in conformance with &lt;a href=&quot;http://en.wikipedia.org/wiki/ISO_8601#Durations&quot; rel=&quot;nofollow&quot;&gt;ISO 8601&lt;/a&gt;. Durations are &quot;represented by the format &lt;code&gt;P[n]Y[n]M[n]DT[n]H[n]M[n]S&lt;/code&gt;.&quot; From the standard:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;P is the duration designator (historically called &quot;period&quot;) placed at the start of the duration representation.&lt;/li&gt;
&lt;li&gt;Y is the year designator that follows the value for the number of years.&lt;/li&gt;
&lt;li&gt;M is the month designator that follows the value for the number of months.&lt;/li&gt;
&lt;li&gt;W is the week designator that follows the value for the number of weeks.&lt;/li&gt;
&lt;li&gt;D is the day designator that follows the value for the number of days.&lt;/li&gt;
&lt;li&gt;T is the time designator that precedes the time components of the representation.&lt;/li&gt;
&lt;li&gt;H is the hour designator that follows the value for the number of hours.&lt;/li&gt;
&lt;li&gt;M is the minute designator that follows the value for the number of minutes.&lt;/li&gt;
&lt;li&gt;S is the second designator that follows the value for the number of seconds.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;For example, &quot;P3Y6M4DT12H30M5S&quot; represents a duration of &quot;three years, six months, four days, twelve hours, thirty minutes, and five seconds.&quot;&lt;/p&gt;
&lt;h3&gt;11.5 Intervals&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/ISO_8601#Time_intervals&quot; rel=&quot;nofollow&quot;&gt;Intervals&lt;/a&gt; are defined as part of &lt;a href=&quot;http://en.wikipedia.org/wiki/ISO_8601#Time_intervals&quot; rel=&quot;nofollow&quot;&gt;ISO 8601&lt;/a&gt;.&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Start and end, such as &quot;2007-03-01T13:00:00Z/2008-05-11T15:30:00Z&quot;&lt;/li&gt;
&lt;li&gt;Start and duration, such as &quot;2007-03-01T13:00:00Z/P1Y2M10DT2H30M&quot;&lt;/li&gt;
&lt;li&gt;Duration and end, such as &quot;P1Y2M10DT2H30M/2008-05-11T15:30:00Z&quot;&lt;/li&gt;
&lt;li&gt;Duration only, such as &quot;P1Y2M10DT2H30M,&quot; with additional context information&lt;/li&gt;
&lt;/ul&gt;&lt;h3&gt;11.6 Repeating intervals&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/ISO_8601#Repeating_intervals&quot; rel=&quot;nofollow&quot;&gt;Repeating Intervals&lt;/a&gt;, as per &lt;a href=&quot;http://en.wikipedia.org/wiki/ISO_8601#Repeating_intervals&quot; rel=&quot;nofollow&quot;&gt;ISO 8601&lt;/a&gt;, are:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Formed by adding &quot;R[n]/&quot; to the beginning of an interval expression, where R is used as the letter itself and [n] is replaced by the number of repetitions. Leaving out the value for [n] means an unbounded number of repetitions.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;For example, to repeat the interval of &quot;P1Y2M10DT2H30M&quot; five times starting at &quot;2008-03-01T13:00:00Z,&quot; use &quot;R5/2008-03-01T13:00:00Z/P1Y2M10DT2H30M.&quot;&lt;/p&gt;
&lt;h2&gt;12 Versioning&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;All APIs compliant with the Microsoft REST API Guidelines MUST support explicit versioning.&lt;/strong&gt; It's critical that clients can count on services to be stable over time, and it's critical that services can add features and make changes.&lt;/p&gt;
&lt;h3&gt;12.1 Versioning formats&lt;/h3&gt;
&lt;p&gt;Services are versioned using a Major.Minor versioning scheme. Services MAY opt for a &quot;Major&quot; only version scheme in which case the &quot;.0&quot; is implied and all other rules in this section apply. Two options for specifying the version of a REST API request are supported:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Embedded in the path of the request URL, at the end of the service root: &lt;code&gt;https://api.contoso.com/v1.0/products/users&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;As a query string parameter of the URL: &lt;code&gt;https://api.contoso.com/products/users?api-version=1.0&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Guidance for choosing between the two options is as follows:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;Services co-located behind a DNS endpoint MUST use the same versioning mechanism.&lt;/li&gt;
&lt;li&gt;In this scenario, a consistent user experience across the endpoint is paramount. The Microsoft REST API Guidelines Working Group recommends that new top-level DNS endpoints are not created without explicit conversations with your organization's leadership team.&lt;/li&gt;
&lt;li&gt;Services that guarantee the stability of their REST API's URL paths, even through future versions of the API, MAY adopt the query string parameter mechanism. This means the naming and structure of the relationships described in the API cannot evolve after the API ships, even across versions with breaking changes.&lt;/li&gt;
&lt;li&gt;Services that cannot ensure URL path stability across future versions MUST embed the version in the URL path.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;Certain bedrock services such as Microsoft's Azure Active Directory may be exposed behind multiple endpoints. Such services MUST support the versioning mechanisms of each endpoint, even if that means supporting multiple versioning mechanisms.&lt;/p&gt;
&lt;h4&gt;12.1.1 Group versioning&lt;/h4&gt;
&lt;p&gt;Group versioning is an OPTIONAL feature that MAY be offered on services using the query string parameter mechanism. Group versions allow for logical grouping of API endpoints under a common versioning moniker. This allows developers to look up a single version number and use it across multiple endpoints. Group version numbers are well known, and services SHOULD reject any unrecognized values.&lt;/p&gt;
&lt;p&gt;Internally, services will take a Group Version and map it to the appropriate Major.Minor version.&lt;/p&gt;
&lt;p&gt;The Group Version format is defined as YYYY-MM-DD, for example 2012-12-07 for December 7, 2012. This Date versioning format applies only to Group Versions and SHOULD NOT be used as an alternative to Major.Minor versioning.&lt;/p&gt;
&lt;h5&gt;12.1.1.1 Examples of group versioning&lt;/h5&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Group&lt;/th&gt;
&lt;th&gt;Major.Minor&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;2012-12-01&lt;/td&gt;
&lt;td&gt;1.0&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;pre&gt;
&lt;code&gt;       | 1.1
       | 1.2
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;2013-03-21 | 1.0 | 2.0 | 3.0 | 3.1 | 3.2 | 3.3&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Version Format&lt;/th&gt;
&lt;th&gt;Example&lt;/th&gt;
&lt;th&gt;Interpretation&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;{groupVersion}&lt;/td&gt;
&lt;td&gt;2013-03-21, 2012-12-01&lt;/td&gt;
&lt;td&gt;3.3, 1.2&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;{majorVersion}&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;3.0&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;{majorVersion}.{minorVersion}&lt;/td&gt;
&lt;td&gt;1.2&lt;/td&gt;
&lt;td&gt;1.2&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Clients can specify either the group version or the Major.Minor version:&lt;/p&gt;
&lt;p&gt;For example:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;GET&lt;/span&gt; http://api.contoso.com/acct&lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;/c&lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;/blob&lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;api-version&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;PUT&lt;/span&gt; http://api.contoso.com/acct&lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;/c&lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;/b&lt;span class=&quot;pl-c1&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;api-version&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;2011-12-07&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;12.2 When to version&lt;/h3&gt;
&lt;p&gt;Services MUST increment their version number in response to any breaking API change. See the following section for a detailed discussion of what constitutes a breaking change. Services MAY increment their version number for nonbreaking changes as well, if desired.&lt;/p&gt;
&lt;p&gt;Use a new major version number to signal that support for existing clients will be deprecated in the future. When introducing a new major version, services MUST provide a clear upgrade path for existing clients and develop a plan for deprecation that is consistent with their business group's policies. Services SHOULD use a new minor version number for all other changes.&lt;/p&gt;
&lt;p&gt;Online documentation of versioned services MUST indicate the current support status of each previous API version and provide a path to the latest version.&lt;/p&gt;
&lt;h3&gt;12.3 Definition of a breaking change&lt;/h3&gt;
&lt;p&gt;Changes to the contract of an API are considered a breaking change. Changes that impact the backwards compatibility of an API are a breaking change.&lt;/p&gt;
&lt;p&gt;Teams MAY define backwards compatibility as their business needs require. For example, Azure defines the addition of a new JSON field in a response to be not backwards compatible. Office 365 has a looser definition of backwards compatibility and allows JSON fields to be added to responses.&lt;/p&gt;
&lt;p&gt;Clear examples of breaking changes:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;Removing or renaming APIs or API parameters&lt;/li&gt;
&lt;li&gt;Changes in behavior for an existing API&lt;/li&gt;
&lt;li&gt;Changes in Error Codes and Fault Contracts&lt;/li&gt;
&lt;li&gt;Anything that would violate the &lt;a href=&quot;http://en.wikipedia.org/wiki/Principle_of_least_astonishment&quot; rel=&quot;nofollow&quot;&gt;Principle of Least Astonishment&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;Services MUST explicitly define their definition of a breaking change, especially with regard to adding new fields to JSON responses and adding new API arguments with default fields. Services that are co-located behind a DNS Endpoint with other services MUST be consistent in defining contract extensibility.&lt;/p&gt;
&lt;p&gt;The applicable changes described &lt;a href=&quot;http://docs.oasis-open.org/odata/odata/v4.0/errata02/os/complete/part1-protocol/odata-v4.0-errata02-os-part1-protocol-complete.html#_Toc406398209&quot; rel=&quot;nofollow&quot;&gt;in this section of the OData V4 spec&lt;/a&gt; SHOULD be considered part of the minimum bar that all services MUST consider a breaking change.&lt;/p&gt;
&lt;h2&gt;13 Long running operations&lt;/h2&gt;
&lt;p&gt;Long running operations, sometimes called async operations, tend to mean different things to different people. This section sets forth guidance around different types of long running operations, and describes the wire protocols and best practices for these types of operations.&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;One or more clients MUST be able to monitor and operate on the same resource at the same time.&lt;/li&gt;
&lt;li&gt;The state of the system SHOULD be discoverable and testable at all times. Clients SHOULD be able to determine the system state even if the operation tracking resource is no longer active. The act of querying the state of a long running operation should itself leverage principles of the web. i.e. well defined resources with uniform interface semantics. Clients MAY issue a GET on some resource to determine the state of a long running operation&lt;/li&gt;
&lt;li&gt;Long running operations SHOULD work for clients looking to &quot;Fire and Forget&quot; and for clients looking to actively monitor and act upon results.&lt;/li&gt;
&lt;li&gt;Cancellation does not explicitly mean rollback. On a per-API defined case it may mean rollback, or compensation, or completion, or partial completion, etc. Following a cancelled operation, It SHOULD NOT be a client's responsibility to return the service to a consistent state which allows continued service.&lt;/li&gt;
&lt;/ol&gt;&lt;h3&gt;13.1 Resource based long running operations (RELO)&lt;/h3&gt;
&lt;p&gt;Resource based modeling is where the status of an operation is encoded in the resource and the wire protocol used is the standard synchronous protocol. In this model state transitions are well defined and goal states are similarly defined.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;This is the preferred model for long running operations and should be used wherever possible.&lt;/em&gt; Avoiding the complexity and mechanics of the LRO Wire Protocol makes things simpler for our users and tooling chain.&lt;/p&gt;
&lt;p&gt;An example may be a machine reboot, where the operation itself completes synchronously but the GET operation on the virtual machine resource would have a &quot;state: Rebooting&quot;, &quot;state: Running&quot; that could be queried at any time.&lt;/p&gt;
&lt;p&gt;This model MAY integrate Push Notifications.&lt;/p&gt;
&lt;p&gt;While most operations are likely to be POST semantics, In addition to POST semantics services MAY support PUT semantics via routing to simplify their APIs. For example, a user that wants to create a database named &quot;db1&quot; could call:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;PUT&lt;/span&gt; https://api.contoso.com/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/databases/db&lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In this scenario the databases segment is processing the PUT operation.&lt;/p&gt;
&lt;p&gt;Services MAY also use the hybrid defined below.&lt;/p&gt;
&lt;h3&gt;13.2 Stepwise long running operations&lt;/h3&gt;
&lt;p&gt;A stepwise operation is one that takes a long, and often unpredictable, length of time to complete, and doesn't offer state transition modeled in the resource. This section outlines the approach that services should use to expose such long running operations.&lt;/p&gt;
&lt;p&gt;Service MAY expose stepwise operations.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Stepwise Long Running Operations are sometimes called &quot;Async&quot; operations. This causes confusion, as it mixes elements of platforms (&quot;Async / await&quot;, &quot;promises&quot;, &quot;futures&quot;) with elements of API operation. This document uses the term &quot;Stepwise Long Running Operation&quot; or often just &quot;Stepwise Operation&quot; to avoid confusion over the word &quot;Async&quot;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Services MUST perform as much synchronous validation as practical on stepwise requests. Services MUST prioritize returning errors in a synchronous way, with the goal of having only &quot;Valid&quot; operations processed using the long running operation wire protocol.&lt;/p&gt;
&lt;p&gt;For an API that's defined as a Stepwise Long Running Operation the service MUST go through the Stepwise Long Running Operation flow even if the operation can be completed immediately. In other words, APIs must adopt and stick with a LRO pattern and not change patterns based on circumstance.&lt;/p&gt;
&lt;h4&gt;13.2.1 PUT&lt;/h4&gt;
&lt;p&gt;Services MAY enable PUT requests for entity creation.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;PUT&lt;/span&gt; https://api.contoso.com/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/databases/db&lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In this scenario the &lt;em&gt;databases&lt;/em&gt; segment is processing the PUT operation.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
HTTP/&lt;span class=&quot;pl-c1&quot;&gt;1.1&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;202&lt;/span&gt; Accepted
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Operation-Location:&lt;/span&gt; https://api.contoso.com/v1.0/operations/123&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For services that need to return a 201 Created here, use the hybrid flow described below.&lt;/p&gt;
&lt;p&gt;The 202 Accepted should return no body. The 201 Created case should return the body of the target resource.&lt;/p&gt;
&lt;h4&gt;13.2.2 POST&lt;/h4&gt;
&lt;p&gt;Services MAY enable POST requests for entity creation.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;POST&lt;/span&gt; https://api.contoso.com/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/databases/

{
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;fileName&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;someFile.db&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;color&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;red&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
HTTP/&lt;span class=&quot;pl-c1&quot;&gt;1.1&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;202&lt;/span&gt; Accepted
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Operation-Location:&lt;/span&gt; https://api.contoso.com/v1.0/operations/123&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;13.2.3 POST, hybrid model&lt;/h4&gt;
&lt;p&gt;Services MAY respond synchronously to POST requests to collections that create a resource even if the resources aren't fully created when the response is generated. In order to use this pattern, the response MUST include a representation of the incomplete resource and an indication that it is incomplete.&lt;/p&gt;
&lt;p&gt;For example:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;POST&lt;/span&gt; https://api.contoso.com/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/databases/ HTTP/&lt;span class=&quot;pl-c1&quot;&gt;1.1&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Host:&lt;/span&gt; api.contoso.com&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Content-Type:&lt;/span&gt; application/json&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Accept:&lt;/span&gt; application/json&lt;/span&gt;

{
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;fileName&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;someFile.db&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;color&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;red&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Service response says the database has been created, but indicates the request is not completed by including the Operation-Location header. In this case the status property in the response payload also indicates the operation has not fully completed.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
HTTP/&lt;span class=&quot;pl-c1&quot;&gt;1.1&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;201&lt;/span&gt; Created
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Location:&lt;/span&gt; https://api.contoso.com/v1.0/databases/db1&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Operation-Location:&lt;/span&gt; https://api.contoso.com/v1.0/operations/123&lt;/span&gt;

{
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;databaseName&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;db1&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;color&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;red&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Status&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Provisioning&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
  &lt;span class=&quot;pl-ii&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;pl-ii&quot;&gt;…&lt;/span&gt; &lt;span class=&quot;pl-ii&quot;&gt;other&lt;/span&gt; &lt;span class=&quot;pl-ii&quot;&gt;fields&lt;/span&gt; &lt;span class=&quot;pl-ii&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;database&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-ii&quot;&gt;…]&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;13.2.4 Operations resource&lt;/h4&gt;
&lt;p&gt;Services MAY provide a &quot;/operations&quot; resource at the tenant level.&lt;/p&gt;
&lt;p&gt;Services that provide the &quot;/operations&quot; resource MUST provide GET semantics. GET MUST enumerate the set of operations, following standard pagination, sorting, and filtering semantics. The default sort order for this operation MUST be:&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Primary Sort&lt;/th&gt;
&lt;th&gt;Secondary Sort&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Not Started Operations&lt;/td&gt;
&lt;td&gt;Operation Creation Time&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Running Operations&lt;/td&gt;
&lt;td&gt;Operation Creation Time&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Completed Operations&lt;/td&gt;
&lt;td&gt;Operation Creation Time&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Note that &quot;Completed Operations&quot; is a goal state (see below), and may actually be any of several different states such as &quot;successful&quot;, &quot;cancelled&quot;, &quot;failed&quot; and so forth.&lt;/p&gt;
&lt;h4&gt;13.2.5 Operation resource&lt;/h4&gt;
&lt;p&gt;An operation is a user addressable resource that tracks a stepwise long running operation. Operations MUST support GET semantics. The GET operation against an operation MUST return:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;The operation resource, it's state, and any extended state relevant to the particular API.&lt;/li&gt;
&lt;li&gt;200 OK as the response code.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;Services MAY support operation cancellation by exposing DELETE on the operation. If supported DELETE operations MUST be idempotent.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: From an API design perspective, cancellation does not explicitly mean rollback. On a per-API defined case it may mean rollback, or compensation, or completion, or partial completion, etc. Following a cancelled operation It SHOULD NOT be a client's responsibility to return the service to a consistent state which allows continued service.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Services that do not support operation cancellation MUST return a 405 Method Not Allowed in the event of a DELETE.&lt;/p&gt;
&lt;p&gt;Operations MUST support the following states:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;NotStarted&lt;/li&gt;
&lt;li&gt;Running&lt;/li&gt;
&lt;li&gt;Succeeded. Terminal State.&lt;/li&gt;
&lt;li&gt;Failed. Terminal State.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;Services MAY add additional states, such as &quot;Cancelled&quot; or &quot;Partially Completed&quot;. Services that support cancellation MUST sufficiently describe their cancellation such that the state of the system can be accurately determined and any compensating actions may be run.&lt;/p&gt;
&lt;p&gt;Services that support additional states should consider this list of canonical names and avoid creating new names if possible: Cancelling, Cancelled, Aborting, Aborted, Tombstone, Deleting, Deleted.&lt;/p&gt;
&lt;p&gt;An operation MUST contain, and provide in the GET response, the following information:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;The timestamp when the operation was created.&lt;/li&gt;
&lt;li&gt;A timestamp for when the current state was entered.&lt;/li&gt;
&lt;li&gt;The operation state (notstarted / running / completed).&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;Services MAY add additional, API specific, fields into the operation. The operation status JSON returned looks like:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-json&quot;&gt;
&lt;pre&gt;
{
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;createdDateTime&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;2015-06-19T12-01-03.45Z&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;lastActionDateTime&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;2015-06-19T12-01-03.45Z&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;status&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;notstarted | running | succeeded | failed&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;h5&gt;13.2.5.1 Percent complete&lt;/h5&gt;
&lt;p&gt;Sometimes it is impossible for services to know with any accuracy when an operation will complete. Which makes using the Retry-After header problematic. In that case, services MAY include, in the operationStatus JSON, a percent complete field.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-json&quot;&gt;
&lt;pre&gt;
{
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;createdDateTime&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;2015-06-19T12-01-03.45Z&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;percentComplete&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;50&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;status&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;running&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In this example the server has indicated to the client that the long running operation is 50% complete.&lt;/p&gt;
&lt;h5&gt;13.2.5.2 Target resource location&lt;/h5&gt;
&lt;p&gt;For operations that result in, or manipulate, a resource the service MUST include the target resource location in the status upon operation completion.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-json&quot;&gt;
&lt;pre&gt;
{
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;createdDateTime&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;2015-06-19T12-01-03.45Z&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;lastActionDateTime&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;2015-06-19T12-06-03.0024Z&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;status&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;succeeded&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;resourceLocation&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;https://api.contoso.com/v1.0/databases/db1&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;13.2.6 Operation tombstones&lt;/h4&gt;
&lt;p&gt;Services MAY choose to support tombstoned operations. Services MAY choose to delete tombstones after a service defined period of time.&lt;/p&gt;
&lt;h4&gt;13.2.7 The typical flow, polling&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;Client invokes a stepwise operation by invoking an action using POST&lt;/li&gt;
&lt;li&gt;The server MUST indicate the request has been started by responding with a 202 Accepted status code. The response SHOULD include the location header containing a URL that the client should poll for the results after waiting the number of seconds specified in the Retry-After header.&lt;/li&gt;
&lt;li&gt;Client polls the location until receiving a 200 OK response from the server.&lt;/li&gt;
&lt;/ul&gt;&lt;h5&gt;13.2.7.1 Example of the typical flow, polling&lt;/h5&gt;
&lt;p&gt;Client invokes the restart action:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;POST&lt;/span&gt; https://api.contoso.com/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/databases HTTP/&lt;span class=&quot;pl-c1&quot;&gt;1.1&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Accept:&lt;/span&gt; application/json&lt;/span&gt;

{
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;fromFile&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;myFile.db&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;color&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;red&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The server response indicates the request has been created.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
HTTP/&lt;span class=&quot;pl-c1&quot;&gt;1.1&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;202&lt;/span&gt; Accepted
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Operation-Location:&lt;/span&gt; https://api.contoso.com/v1.0/operations/123&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Client waits for a period of time then invokes another request to try to get the operation status.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;GET&lt;/span&gt; https://api.contoso.com/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/operations/&lt;span class=&quot;pl-c1&quot;&gt;123&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Accept:&lt;/span&gt; application/json&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Server responds that results are still not ready and optionally provides a recommendation to wait 30 seconds.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
HTTP/&lt;span class=&quot;pl-c1&quot;&gt;1.1&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;200&lt;/span&gt; OK
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Retry-After:&lt;/span&gt; 30&lt;/span&gt;

{
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;createdDateTime&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;2015-06-19T12-01-03.4Z&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;status&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;running&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Client waits the recommended 30 seconds and then invokes another request to get the results of the operation.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;GET&lt;/span&gt; https://api.contoso.com/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/operations/&lt;span class=&quot;pl-c1&quot;&gt;123&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Accept:&lt;/span&gt; application/json&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Server responds with a &quot;status:succeeded&quot; operation that includes the resource location.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
HTTP/&lt;span class=&quot;pl-c1&quot;&gt;1.1&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;200&lt;/span&gt; OK
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Content-Type:&lt;/span&gt; application/json&lt;/span&gt;

{
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;createdDateTime&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;2015-06-19T12-01-03.45Z&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;lastActionDateTime&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;2015-06-19T12-06-03.0024Z&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;status&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;succeeded&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;resourceLocation&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;https://api.contoso.com/v1.0/databases/db1&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;13.2.8 The typical flow, push notifications&lt;/h4&gt;
&lt;ol&gt;&lt;li&gt;Client invokes a long running operation by invoking an action using POST. The client has a push notification already setup on the parent resource.&lt;/li&gt;
&lt;li&gt;The service indicates the request has been started by responding with a 202 Accepted status code. The client ignores everything else.&lt;/li&gt;
&lt;li&gt;Upon completion of the overall operation the service pushes a notification via the subscription on the parent resource.&lt;/li&gt;
&lt;li&gt;The client retrieves the operation result via the resource URL.&lt;/li&gt;
&lt;/ol&gt;&lt;h5&gt;13.2.8.1 Example of the typical flow, push notifications existing subscription&lt;/h5&gt;
&lt;p&gt;Client invokes the backup action. The client already has a push notification subscription setup for db1.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;POST&lt;/span&gt; https://api.contoso.com/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/databases/db&lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;backup HTTP/1.1&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Accept:&lt;/span&gt; application/json&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The server response indicates the request has been accepted.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
HTTP/&lt;span class=&quot;pl-c1&quot;&gt;1.1&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;202&lt;/span&gt; Accepted
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Operation-Location:&lt;/span&gt; https://api.contoso.com/v1.0/operations/123&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The caller ignores all the headers in the return.&lt;/p&gt;
&lt;p&gt;The target URL receives a push notification when the operation is complete.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
HTTP/&lt;span class=&quot;pl-c1&quot;&gt;1.1&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;200&lt;/span&gt; OK
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Content-Type:&lt;/span&gt; application/json&lt;/span&gt;

{
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;value&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: [
    {
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;subscriptionId&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;1234-5678-1111-2222&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;context&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;subscription context that was specified at setup&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;resourceUrl&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;https://api.contoso.com/v1.0/databases/db1&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;userId&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; : &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;contoso.com/user@contoso.com&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;tenantId&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; : &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;contoso.com&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
    }
  ]
}
&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;13.2.9 Retry-After&lt;/h4&gt;
&lt;p&gt;In the examples above the Retry-After header indicates the number of seconds that the client should wait before trying to get the result from the URL identified by the location header.&lt;/p&gt;
&lt;p&gt;The HTTP specification allows the Retry-After header to alternatively specify a HTTP date, so clients should be prepared to handle this as well.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
HTTP/&lt;span class=&quot;pl-c1&quot;&gt;1.1&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;202&lt;/span&gt; Accepted
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Operation-Location:&lt;/span&gt; http://api.contoso.com/v1.0/operations/123&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Retry-After:&lt;/span&gt; 60&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Note: The use of the HTTP Date is inconsistent with the use of ISO 8601 Date Format used throughout this document, but is explicitly defined by the HTTP standard in [RFC 7231][rfc-7231-7-1-1-1]. Services SHOULD prefer the integer number of seconds (in decimal) format over the HTTP date format.&lt;/p&gt;
&lt;h3&gt;13.3 Retention policy for operation results&lt;/h3&gt;
&lt;p&gt;In some situations, the result of a long running operation is not a resource that can be addressed. For example, if you invoke a long running Action that returns a Boolean (rather than a resource). In these situations, the Location header points to a place where the Boolean result can be retrieved.&lt;/p&gt;
&lt;p&gt;Which begs the question: &quot;How long should operation results be retained?&quot;&lt;/p&gt;
&lt;p&gt;A recommended minimum retention time is 24 hours.&lt;/p&gt;
&lt;p&gt;Operations SHOULD transition to &quot;tombstone&quot; for an additional period of time prior to being purged from the system.&lt;/p&gt;
&lt;h2&gt;14 Push notifications via webhooks&lt;/h2&gt;
&lt;h3&gt;14.1 Scope&lt;/h3&gt;
&lt;p&gt;Services MAY implement push notifications via web hooks. This section addresses the following key scenario:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Push notification via HTTP Callbacks, often called Web Hooks, to publicly-addressable servers.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The approach set forth is chosen due to its simplicity, broad applicability, and low barrier to entry for service subscribers. It's intended as a minimal set of requirements and as a starting point for additional functionality.&lt;/p&gt;
&lt;h3&gt;14.2 Principles&lt;/h3&gt;
&lt;p&gt;The core principles for services that support web hooks are:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;Services MUST implement at least a poke/pull model. In the poke/pull model, a notification is sent to a client, and clients then send a request to get the current state or the record of change since their last notification. This approach avoids complexities around message ordering, missed messages, and change sets. Services MAY add more data to provide rich notifications.&lt;/li&gt;
&lt;li&gt;Services MUST implement the challenge/response protocol for configuring callback URLs.&lt;/li&gt;
&lt;li&gt;Services SHOULD have a recommended age-out period, with flexibility for services to vary based on scenario.&lt;/li&gt;
&lt;li&gt;Services SHOULD allow subscriptions that are raising successful notifications to live forever and SHOULD be tolerant of reasonable outage periods.&lt;/li&gt;
&lt;li&gt;Firehose subscriptions MUST be delivered only over HTTPS. Services SHOULD require other subscription types to be HTTPS. See the &quot;Security&quot; section for more details.&lt;/li&gt;
&lt;/ol&gt;&lt;h3&gt;14.3 Types of subscriptions&lt;/h3&gt;
&lt;p&gt;There are two subscription types, and services MAY implement either, both, or none. The supported subscription types are:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;Firehose subscriptions – a subscription is manually created for the subscribing application, typically in an app registration portal. Notifications of activity that any users have consented to the app receiving are sent to this single subscription.&lt;/li&gt;
&lt;li&gt;Per-resource subscriptions – the subscribing application uses code to programmatically create a subscription at runtime for some user-specific entity(s).&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;Services that support both subscription types SHOULD provide differentiated developer experiences for the two types:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;Firehose – Services MUST NOT require developers to create code except to directly verify and respond to notifications. Services MUST provide administrative UI for subscription management. Services SHOULD NOT assume that end users are aware of the subscription, only the subscribing application's functionality.&lt;/li&gt;
&lt;li&gt;Per-user – Services MUST provide an API for developers to create and manage subscriptions as part of their app as well as verifying and responding to notifications. Services MAY expect end users to be aware of subscriptions and MUST allow end users to revoke subscriptions where they were created directly in response to user actions.&lt;/li&gt;
&lt;/ol&gt;&lt;h3&gt;14.4 Call sequences&lt;/h3&gt;
&lt;p&gt;The call sequence for a firehose subscription MUST follow the diagram below. It shows manual registration of application and subscription, and then the end user making use of one of the service's APIs. At this part of the flow, two things MUST be stored:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;The service MUST store the end user's act of consent to receiving notifications from this specific application (typically a background usage OAUTH scope.)&lt;/li&gt;
&lt;li&gt;The subscribing application MUST store the end user's tokens in order to call back for details once notified of changes.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;The final part of the sequence is the notification flow itself.&lt;/p&gt;
&lt;p&gt;Non-normative implementation guidance: A resource in the service changes and the service needs to run the following logic:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;Determine the set of users who have access to the resource, and could thus expect apps to receive notifications about it on their behalf.&lt;/li&gt;
&lt;li&gt;See which of those users have consented to receiving notifications and from which apps.&lt;/li&gt;
&lt;li&gt;See which apps have registered a firehose subscription.&lt;/li&gt;
&lt;li&gt;Join 1, 2, 3 to produce the concrete set of notifications that must be sent to apps.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;It should be noted that the act of user consent and the act of setting up a firehose subscription could arrive in either order. Services SHOULD send notifications with setup processed in either order.&lt;/p&gt;
&lt;p&gt;&lt;a target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot; href=&quot;https://camo.githubusercontent.com/df0495791d84a25a2285a6cc1071cafba58efcef/687474703a2f2f7777772e77656273657175656e63656469616772616d732e636f6d2f6367692d62696e2f63647261773f6c7a3d626d39305a534276646d56794945526c646d56736233426c63697767515856306232316864476c76626977675158427749464e6c636e5a6c636a6f67436941674943416751573441454155414a776b6762476c725a53424e62335a705a55316861325679414341475632467564484d6764473867615735305a5764795958526c494864706447676763484a70625746796553427a5a584a3261574e6c4144634752484a7663474a766541706c626d5167626d39305a516f416751774c5169425162334a3059577773494552434149454a42564a6c5a326c7a6448494167526b4852454967546d393061575a70597743424c41567a414345476458526f4143734655774267426a6f675647686c414630654149465f436b4e736157567564414174426d56755a4342316332567963796367596e4a7664334e6c6369427663694270626e4e30595778735a5751675958427743674342495177416769516741494641425143424953384167516f4749446f6754574675645746734149467a45516f4b4367434441676f384c53302d4149497143694136494578765a326c7549476c7564473841676a384a41494931454342565743414b41436f4b4c5434674b77434357424d364149514742553568625755675a58526a4c6743444651344147784a446232356d61584a74414945424345466a5932567a637942556232746c62676f4b41494d33457941745069417441494e6b4351426e426b6c454149454d43774342565155416851494d41495233436d4e7663476c6c63774172434143434948414168484d4d41494d4b44774344414267364948646c596d6876623273676367434365673441676e55534149565144546f41685859485a584941677767474149635442674245435656535443776755324e7663475541687a49475355514b54674347505177416868774e4941434442683441486845416778455062674342616777416778774e41494d61446941416778304d6257463549474e7663486b414c5245416856747141495a484230463164476876636d6c36414959374277434758516374506941724149457544564a6c6358566c63335167595143464f515a306279424551694277636d39305a574e305a5751676157356d62334941696951474367434442517374506941744149637443564a6c5a476c795a574e30414459484147774e494756755a4842766157353041496f57426d45414477317941485947414945514441434a564163415377746c5a41415948674349434167414d4163416341344168476f474145304641494564466d4a6859327367644738416846384e6158526f49474e765a47554167686f61615143426167634167546f484144304a4149492d42334d4150677341676c4548414573464149497a4467434258773041676e3847644739725a57357a414363534149305f42584a705a3268304947396d4149747044554e685932686c4948526f5958516764476870637942566332567949456c454948427962335a705a47566b41494e4e437743495a676f416767634a41494e3744334e776232357a4149305f427743454367597349484a6c5a6e4a6c63326773494746755a43424a524143424841634167514d5041495941445143424441634167555547596e6b416a466b4649456c454149516b47335231636d34416846344d4948527649474d416a523846414977526167434a5677314762473933414959714351434d61516741676d6f4b614746755a3255416a3359464149465842575268644745674c534230655842705932467349485a70595143514467567959574e306157356e414a41504267434a51517432615745416a6e7348436743504e676f67414968444541434b5a7730416b464d4641496b424477434444415541676b59574b77424e437743485741706a4149457942514348526730416857554859574e6f414951654441434566775668626d5167496e4e70626d4e6c49674346455159416b53514f414952334367434e66776341684851464149705145414342556773416846416341494938425746755a4342755a58634159525141684655544f6942566347526864475567633352686448554167536b47414946444251417845776f4b436726733d6d736367656e&quot;&gt;&lt;img src=&quot;https://camo.githubusercontent.com/df0495791d84a25a2285a6cc1071cafba58efcef/687474703a2f2f7777772e77656273657175656e63656469616772616d732e636f6d2f6367692d62696e2f63647261773f6c7a3d626d39305a534276646d56794945526c646d56736233426c63697767515856306232316864476c76626977675158427749464e6c636e5a6c636a6f67436941674943416751573441454155414a776b6762476c725a53424e62335a705a55316861325679414341475632467564484d6764473867615735305a5764795958526c494864706447676763484a70625746796553427a5a584a3261574e6c4144634752484a7663474a766541706c626d5167626d39305a516f416751774c5169425162334a3059577773494552434149454a42564a6c5a326c7a6448494167526b4852454967546d393061575a70597743424c41567a414345476458526f4143734655774267426a6f675647686c414630654149465f436b4e736157567564414174426d56755a4342316332567963796367596e4a7664334e6c6369427663694270626e4e30595778735a5751675958427743674342495177416769516741494641425143424953384167516f4749446f6754574675645746734149467a45516f4b4367434441676f384c53302d4149497143694136494578765a326c7549476c7564473841676a384a41494931454342565743414b41436f4b4c5434674b77434357424d364149514742553568625755675a58526a4c6743444651344147784a446232356d61584a74414945424345466a5932567a637942556232746c62676f4b41494d33457941745069417441494e6b4351426e426b6c454149454d43774342565155416851494d41495233436d4e7663476c6c63774172434143434948414168484d4d41494d4b44774344414267364948646c596d6876623273676367434365673441676e55534149565144546f41685859485a584941677767474149635442674245435656535443776755324e7663475541687a49475355514b54674347505177416868774e4941434442683441486845416778455062674342616777416778774e41494d61446941416778304d6257463549474e7663486b414c5245416856747141495a484230463164476876636d6c36414959374277434758516374506941724149457544564a6c6358566c63335167595143464f515a306279424551694277636d39305a574e305a5751676157356d62334941696951474367434442517374506941744149637443564a6c5a476c795a574e30414459484147774e494756755a4842766157353041496f57426d45414477317941485947414945514441434a564163415377746c5a41415948674349434167414d4163416341344168476f474145304641494564466d4a6859327367644738416846384e6158526f49474e765a47554167686f61615143426167634167546f484144304a4149492d42334d4150677341676c4548414573464149497a4467434258773041676e3847644739725a57357a414363534149305f42584a705a3268304947396d4149747044554e685932686c4948526f5958516764476870637942566332567949456c454948427962335a705a47566b41494e4e437743495a676f416767634a41494e3744334e776232357a4149305f427743454367597349484a6c5a6e4a6c63326773494746755a43424a524143424841634167514d5041495941445143424441634167555547596e6b416a466b4649456c454149516b47335231636d34416846344d4948527649474d416a523846414977526167434a5677314762473933414959714351434d61516741676d6f4b614746755a3255416a3359464149465842575268644745674c534230655842705932467349485a70595143514467567959574e306157356e414a41504267434a51517432615745416a6e7348436743504e676f67414968444541434b5a7730416b464d4641496b424477434444415541676b59574b77424e437743485741706a4149457942514348526730416857554859574e6f414951654441434566775668626d5167496e4e70626d4e6c49674346455159416b53514f414952334367434e66776341684851464149705145414342556773416846416341494938425746755a4342755a58634159525141684655544f6942566347526864475567633352686448554167536b47414946444251417845776f4b436726733d6d736367656e&quot; alt=&quot;Firehose subscription setup&quot; data-canonical-src=&quot;http://www.websequencediagrams.com/cgi-bin/cdraw?lz=bm90ZSBvdmVyIERldmVsb3BlciwgQXV0b21hdGlvbiwgQXBwIFNlcnZlcjogCiAgICAgQW4AEAUAJwkgbGlrZSBNb3ZpZU1ha2VyACAGV2FudHMgdG8gaW50ZWdyYXRlIHdpdGggcHJpbWFyeSBzZXJ2aWNlADcGRHJvcGJveAplbmQgbm90ZQoAgQwLQiBQb3J0YWwsIERCAIEJBVJlZ2lzdHIAgRkHREIgTm90aWZpYwCBLAVzACEGdXRoACsFUwBgBjogVGhlAF0eAIF_CkNsaWVudAAtBmVuZCB1c2VycycgYnJvd3NlciBvciBpbnN0YWxsZWQgYXBwCgCBIQwAgiQgAIFABQCBIS8AgQoGIDogTWFudWFsAIFzEQoKCgCDAgo8LS0-AIIqCiA6IExvZ2luIGludG8Agj8JAII1ECBVWCAKACoKLT4gKwCCWBM6AIQGBU5hbWUgZXRjLgCDFQ4AGxJDb25maXJtAIEBCEFjY2VzcyBUb2tlbgoKAIM3EyAtPiAtAINkCQBnBklEAIEMCwCBVQUAhQIMAIR3CmNvcGllcwArCACCIHAAhHMMAIMKDwCDABg6IHdlYmhvb2sgcgCCeg4AgnUSAIVQDToAhXYHZXIAgwgGAIcTBgBECVVSTCwgU2NvcGUAhzIGSUQKTgCGPQwAhhwNIACDBh4AHhEAgxEPbgCBagwAgxwNAIMaDiAAgx0MbWF5IGNvcHkALREAhVtqAIZHB0F1dGhvcml6AIY7BwCGXQctPiArAIEuDVJlcXVlc3QgYQCFOQZ0byBEQiBwcm90ZWN0ZWQgaW5mb3IAiiQGCgCDBQstPiAtAIctCVJlZGlyZWN0ADYHAGwNIGVuZHBvaW50AIoWBmEADw1yAHYGAIEQDACJVAcASwtlZAAYHgCICAgAMAcAcA4AhGoGAE0FAIEdFmJhY2sgdG8AhF8NaXRoIGNvZGUAghoaaQCBagcAgToHAD0JAII-B3MAPgsAglEHAEsFAIIzDgCBXw0Agn8GdG9rZW5zACcSAI0_BXJpZ2h0IG9mAItpDUNhY2hlIHRoYXQgdGhpcyBVc2VyIElEIHByb3ZpZGVkAINNCwCIZgoAggcJAIN7D3Nwb25zAI0_BwCECgYsIHJlZnJlc2gsIGFuZCBJRACBHAcAgQMPAIYADQCBDAcAgUUGYnkAjFkFIElEAIQkG3R1cm4AhF4MIHRvIGMAjR8FAIwRagCJVw1GbG93AIYqCQCMaQgAgmoKaGFuZ2UAj3YFAIFXBWRhdGEgLSB0eXBpY2FsIHZpYQCQDgVyYWN0aW5nAJAPBgCJQQt2aWEAjnsHCgCPNgogAIhDEACKZw0AkFMFAIkBDwCDDAUAgkYWKwBNCwCHWApjAIEyBQCHRg0AhWUHYWNoAIQeDACEfwVhbmQgInNpbmNlIgCFEQYAkSQOAIR3CgCNfwcAhHQFAIpQEACBUgsAhFAcAII8BWFuZCBuZXcAYRQAhFUTOiBVcGRhdGUgc3RhdHUAgSkGAIFDBQAxEwoKCg&amp;amp;s=mscgen&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;For a per-user subscription, app registration is either manual or automated. The call flow for a per-user subscription MUST follow the diagram below. It shows the end user making use of one of the service's APIs, and again, the same two things MUST be stored:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;The service MUST store the end user's act of consent to receiving notifications from this specific application (typically a background usage OAUTH scope).&lt;/li&gt;
&lt;li&gt;The subscribing application MUST store the end user's tokens in order to call back for details once notified of changes.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;In this case, the subscription is set up programmatically using the end-user's token from the subscribing application. The app MUST store the ID of the registered subscription alongside the user tokens.&lt;/p&gt;
&lt;p&gt;Non normative implementation guidance: In the final part of the sequence, when an item of data in the service changes and the service needs to run the following logic:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;Find the set of subscriptions that correspond via resource to the data that changed.&lt;/li&gt;
&lt;li&gt;For subscriptions created under an app+user token, send a notification to the app per subscription with the subscription ID and user id of the subscription-creator.&lt;/li&gt;
&lt;/ol&gt;&lt;ul&gt;&lt;li&gt;
&lt;p&gt;For subscriptions created with an app only token, check that the owner of the changed data or any user that has visibility of the changed data has consented to notifications to the application, and if so send a set of notifications per user id to the app per subscription with the subscription ID.&lt;/p&gt;
&lt;p&gt;&lt;a target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot; href=&quot;https://camo.githubusercontent.com/de3129ed4573bcc492e23ba013ba4c370d00facf/687474703a2f2f7777772e77656273657175656e63656469616772616d732e636f6d2f6367692d62696e2f63647261773f6c7a3d626d39305a534276646d56794945526c646d56736233426c63697767515856306232316864476c76626977675158427749464e6c636e5a6c636a6f67436941674943416751573441454155414a776b6762476c725a53424e62335a705a55316861325679414341475632467564484d6764473867615735305a5764795958526c494864706447676763484a70625746796553427a5a584a3261574e6c4144634752484a7663474a766541706c626d5167626d39305a516f416751774c5169425162334a3059577773494552434149454a42564a6c5a326c7a6448494167526b4852454967546d393061575a70597743424c41567a414345476458526f4143734655774267426a6f675647686c414630654149465f436b4e736157567564414174426d56755a4342316332567963796367596e4a7664334e6c6369427663694270626e4e30595778735a5751675958427743674342495177416769516741494641425143424953384167516f4749446f416757775243677068624851416779554941494548426942794142514d494341416778734c50433074506743445477733649454e76626d5a705a3356795a516f6749414344614173674c5434674b77434357424d4165675a4f5957316c49475630597934416841674641494d61445141664567426442584a744149515f4255466a5932567a637942556232746c41494554426743444f7849674c5434674c5143424667784263484167535551416848774959334a6c644143424778417450674346466773674f69424662574a6c5a41416b46475673633255675457467564574673414949454a41434562516b674f69424d6232647062694270626e527641495542435143424b52465657414347474155414c516f416768386d4149495a4b77434243416341676a6f4e41494973484143474c776b41676a38494149455344674345434159416831454c41496446436d4e7663476c6c63774175434756755a41434565476f4168575148515856306147397961586f4168563848414956364279302d494373416732414e556d56786457567a6443426841495256426e527649455243494842796233526c5933526c5a434270626d5a766367434a5151594b414951614379302d49433041686b6f4a556d566b61584a6c593351414e676341624130675a57356b63473970626e514169544d475951415044584941646759416752414d414968784277424c4332566b414267654149526a43414177423045416351785657416f415351674167527757596d466a617942306277434664417741696c77465932396b5a5143434752707041494670427743424f51634150516b41676a30486377412d437743435541634153775541676a494f414946654451434366675a306232746c626e4d414a7849416a467346636d6c6e61485167623259416977554e5132466a61475567644768686443423061476c7a4946567a5a5849675355516763484a76646d6c6b5a5751416730774c41495536427743434241774167336f5063334276626e4d416a4673484149514a42697767636d566d636d567a614377675957356b49456c454149456342774342417738416944454e4149454d4277434252515a696551434c645155675355514168434d62644856796267434558517767644738675977434d4f77554b4367434c4c326f416a58554d41497754447743504e516f74506973416a6877514f67434f5251646c6367434d56775941673359495a574a6f62323972494656535443776755324e76634755416b414547535551416a776f4f41493572445341416932554b41494e464251434c5977304148424541677a554f4f6942754149453244414267434143444342316f5a5143426151354a52414344597755416168494167684234526d78766477434a4d776b416a45304941495630436d6868626d646c414a4963425143455951566b595852684943306764486c7761574e6862434232615745416b6a5146636d466a64476c755a7743534e5159416a56384c646d6c68414a456842776f416b56774b4941434e666841416841734e414a4a35425143435751384168685946414956514669734154517341696d454b597743424d675541696b384e414968764232466a614143484b41774169416b465957356b49434a7a6157356a5a53494169427347414a4e4b4467434941516f4168423063414946534377434857687741676a77465957356b4947356c647742684641434858784d36494656775a4746305a53427a64474630645143424b51594167554d464144455443676f4b26733d6d736367656e&quot;&gt;&lt;img src=&quot;https://camo.githubusercontent.com/de3129ed4573bcc492e23ba013ba4c370d00facf/687474703a2f2f7777772e77656273657175656e63656469616772616d732e636f6d2f6367692d62696e2f63647261773f6c7a3d626d39305a534276646d56794945526c646d56736233426c63697767515856306232316864476c76626977675158427749464e6c636e5a6c636a6f67436941674943416751573441454155414a776b6762476c725a53424e62335a705a55316861325679414341475632467564484d6764473867615735305a5764795958526c494864706447676763484a70625746796553427a5a584a3261574e6c4144634752484a7663474a766541706c626d5167626d39305a516f416751774c5169425162334a3059577773494552434149454a42564a6c5a326c7a6448494167526b4852454967546d393061575a70597743424c41567a414345476458526f4143734655774267426a6f675647686c414630654149465f436b4e736157567564414174426d56755a4342316332567963796367596e4a7664334e6c6369427663694270626e4e30595778735a5751675958427743674342495177416769516741494641425143424953384167516f4749446f416757775243677068624851416779554941494548426942794142514d494341416778734c50433074506743445477733649454e76626d5a705a3356795a516f6749414344614173674c5434674b77434357424d4165675a4f5957316c49475630597934416841674641494d61445141664567426442584a744149515f4255466a5932567a637942556232746c41494554426743444f7849674c5434674c5143424667784263484167535551416848774959334a6c644143424778417450674346466773674f69424662574a6c5a41416b46475673633255675457467564574673414949454a41434562516b674f69424d6232647062694270626e527641495542435143424b52465657414347474155414c516f416768386d4149495a4b77434243416341676a6f4e41494973484143474c776b41676a38494149455344674345434159416831454c41496446436d4e7663476c6c63774175434756755a41434565476f4168575148515856306147397961586f4168563848414956364279302d494373416732414e556d56786457567a6443426841495256426e527649455243494842796233526c5933526c5a434270626d5a766367434a5151594b414951614379302d49433041686b6f4a556d566b61584a6c593351414e676341624130675a57356b63473970626e514169544d475951415044584941646759416752414d414968784277424c4332566b414267654149526a43414177423045416351785657416f415351674167527757596d466a617942306277434664417741696c77465932396b5a5143434752707041494670427743424f51634150516b41676a30486377412d437743435541634153775541676a494f414946654451434366675a306232746c626e4d414a7849416a467346636d6c6e61485167623259416977554e5132466a61475567644768686443423061476c7a4946567a5a5849675355516763484a76646d6c6b5a5751416730774c41495536427743434241774167336f5063334276626e4d416a4673484149514a42697767636d566d636d567a614377675957356b49456c454149456342774342417738416944454e4149454d4277434252515a696551434c645155675355514168434d62644856796267434558517767644738675977434d4f77554b4367434c4c326f416a58554d41497754447743504e516f74506973416a6877514f67434f5251646c6367434d56775941673359495a574a6f62323972494656535443776755324e76634755416b414547535551416a776f4f41493572445341416932554b41494e464251434c5977304148424541677a554f4f6942754149453244414267434143444342316f5a5143426151354a52414344597755416168494167684234526d78766477434a4d776b416a45304941495630436d6868626d646c414a4963425143455951566b595852684943306764486c7761574e6862434232615745416b6a5146636d466a64476c755a7743534e5159416a56384c646d6c68414a456842776f416b56774b4941434e666841416841734e414a4a35425143435751384168685946414956514669734154517341696d454b597743424d675541696b384e414968764232466a614143484b41774169416b465957356b49434a7a6157356a5a53494169427347414a4e4b4467434941516f4168423063414946534377434857687741676a77465957356b4947356c647742684641434858784d36494656775a4746305a53427a64474630645143424b51594167554d464144455443676f4b26733d6d736367656e&quot; alt=&quot;User subscription setup&quot; data-canonical-src=&quot;http://www.websequencediagrams.com/cgi-bin/cdraw?lz=bm90ZSBvdmVyIERldmVsb3BlciwgQXV0b21hdGlvbiwgQXBwIFNlcnZlcjogCiAgICAgQW4AEAUAJwkgbGlrZSBNb3ZpZU1ha2VyACAGV2FudHMgdG8gaW50ZWdyYXRlIHdpdGggcHJpbWFyeSBzZXJ2aWNlADcGRHJvcGJveAplbmQgbm90ZQoAgQwLQiBQb3J0YWwsIERCAIEJBVJlZ2lzdHIAgRkHREIgTm90aWZpYwCBLAVzACEGdXRoACsFUwBgBjogVGhlAF0eAIF_CkNsaWVudAAtBmVuZCB1c2VycycgYnJvd3NlciBvciBpbnN0YWxsZWQgYXBwCgCBIQwAgiQgAIFABQCBIS8AgQoGIDoAgWwRCgphbHQAgyUIAIEHBiByABQMICAAgxsLPC0tPgCDTws6IENvbmZpZ3VyZQogIACDaAsgLT4gKwCCWBMAegZOYW1lIGV0Yy4AhAgFAIMaDQAfEgBdBXJtAIQ_BUFjY2VzcyBUb2tlAIETBgCDOxIgLT4gLQCBFgxBcHAgSUQAhHwIY3JldACBGxAtPgCFFgsgOiBFbWJlZAAkFGVsc2UgTWFudWFsAIIEJACEbQkgOiBMb2dpbiBpbnRvAIUBCQCBKRFVWACGGAUALQoAgh8mAIIZKwCBCAcAgjoNAIIsHACGLwkAgj8IAIESDgCECAYAh1ELAIdFCmNvcGllcwAuCGVuZACEeGoAhWQHQXV0aG9yaXoAhV8HAIV6By0-ICsAg2ANUmVxdWVzdCBhAIRVBnRvIERCIHByb3RlY3RlZCBpbmZvcgCJQQYKAIQaCy0-IC0AhkoJUmVkaXJlY3QANgcAbA0gZW5kcG9pbnQAiTMGYQAPDXIAdgYAgRAMAIhxBwBLC2VkABgeAIRjCAAwB0EAcQxVWAoASQgAgRwWYmFjayB0bwCFdAwAilwFY29kZQCCGRppAIFpBwCBOQcAPQkAgj0HcwA-CwCCUAcASwUAgjIOAIFeDQCCfgZ0b2tlbnMAJxIAjFsFcmlnaHQgb2YAiwUNQ2FjaGUgdGhhdCB0aGlzIFVzZXIgSUQgcHJvdmlkZWQAg0wLAIU6BwCCBAwAg3oPc3BvbnMAjFsHAIQJBiwgcmVmcmVzaCwgYW5kIElEAIEcBwCBAw8AiDENAIEMBwCBRQZieQCLdQUgSUQAhCMbdHVybgCEXQwgdG8gYwCMOwUKCgCLL2oAjXUMAIwTDwCPNQotPisAjhwQOgCORQdlcgCMVwYAg3YIZWJob29rIFVSTCwgU2NvcGUAkAEGSUQAjwoOAI5rDSAAi2UKAINFBQCLYw0AHBEAgzUOOiBuAIE2DABgCACDCB1oZQCBaQ5JRACDYwUAahIAghB4RmxvdwCJMwkAjE0IAIV0CmhhbmdlAJIcBQCEYQVkYXRhIC0gdHlwaWNhbCB2aWEAkjQFcmFjdGluZwCSNQYAjV8LdmlhAJEhBwoAkVwKIACNfhAAhAsNAJJ5BQCCWQ8AhhYFAIVQFisATQsAimEKYwCBMgUAik8NAIhvB2FjaACHKAwAiAkFYW5kICJzaW5jZSIAiBsGAJNKDgCIAQoAhB0cAIFSCwCHWhwAgjwFYW5kIG5ldwBhFACHXxM6IFVwZGF0ZSBzdGF0dQCBKQYAgUMFADETCgoK&amp;amp;s=mscgen&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;h3&gt;14.5 Verifying subscriptions&lt;/h3&gt;
&lt;p&gt;When subscriptions change either programmatically or in response to change via administrative UI portals, the subscribing service needs to be protected from malicious or unexpected calls from services pushing potentially large volumes of notification traffic.&lt;/p&gt;
&lt;p&gt;For all subscriptions, whether firehose or per-user, services MUST send a verification request as part of creation or modification via portal UI or API request, before sending any other notifications.&lt;/p&gt;
&lt;p&gt;Verification requests MUST be of the following format as an HTTP/HTTPS POST to the subscription's &lt;em&gt;notificationUrl&lt;/em&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;POST&lt;/span&gt; https://{&lt;span class=&quot;pl-ii&quot;&gt;notificationUrl&lt;/span&gt;}&lt;span class=&quot;pl-c1&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;validationToken&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;{randomString}&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;ClientState:&lt;/span&gt; clientOriginatedOpaqueToken (if provided by client on subscription-creation)&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Content-Length:&lt;/span&gt; 0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For the subscription to be set up, the application MUST respond with 200 OK to this request, with the &lt;em&gt;validationToken&lt;/em&gt; value as the sole entity body. Note that if the &lt;em&gt;notificationUrl&lt;/em&gt; contains query parameters, the &lt;em&gt;validationToken&lt;/em&gt; parameter must be appended with an &lt;code&gt;&amp;amp;&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;If any challenge request does not receive the prescribed response within 5 seconds of sending the request, the service MUST return an error, MUST NOT create the subscription, and MUST NOT send further requests or notifications to &lt;em&gt;notificationUrl&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Services MAY perform additional validations on URL ownership.&lt;/p&gt;
&lt;h3&gt;14.6 Receiving notifications&lt;/h3&gt;
&lt;p&gt;Services SHOULD send notifications in response to service data changes that do not include details of the changes themselves, but include enough information for the subscribing application to respond appropriately to the following process:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;Applications MUST identify the correct cached OAuth token to use for a callback&lt;/li&gt;
&lt;li&gt;Applications MAY look up any previous delta token for the relevant scope of change&lt;/li&gt;
&lt;li&gt;Applications MUST determine the URL to call to perform the relevant query for the new state of the service, which MAY be a delta query.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;Services that are providing notifications that will be relayed to end users MAY choose to add more detail to notification packets in order to reduce incoming call load on their service. Such services MUST be clear that notifications are not guaranteed to be delivered and may be lossy or out of order.&lt;/p&gt;
&lt;p&gt;Notifications MAY be aggregated and sent in batches. Applications MUST be prepared to receive multiple events inside a single push notification.&lt;/p&gt;
&lt;p&gt;The service MUST send all Web Hook data notifications as POST requests.&lt;/p&gt;
&lt;p&gt;Services MUST allow for a 30-second timeout for notifications. If a timeout occurs or the application responds with a 5xx response, then the service SHOULD retry the notification with exponential back-off. All other responses will be ignored.&lt;/p&gt;
&lt;p&gt;The service MUST NOT follow 301/302 redirect requests.&lt;/p&gt;
&lt;h4&gt;14.6.1 Notification payload&lt;/h4&gt;
&lt;p&gt;The basic format for notification payloads is a list of events, each containing the id of the subscription whose referenced resources have changed, the type of change, the resource that should be consumed to identify the exact details of the change and sufficient identity information to look up the token required to call that resource.&lt;/p&gt;
&lt;p&gt;For a firehose subscription, a concrete example of this may look like:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-json&quot;&gt;
&lt;pre&gt;
{
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;value&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: [
    {
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;subscriptionId&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;32b8cbd6174ab18b&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;resource&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;https://api.contoso.com/v1.0/users/user@contoso.com/files?$delta&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;userId&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; : &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&amp;lt;User GUID&amp;gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;tenantId&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; : &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&amp;lt;Tenant Id&amp;gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
    }
  ]
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For a per-user subscription, a concrete example of this may look like:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-json&quot;&gt;
&lt;pre&gt;
{
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;value&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: [
    {
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;subscriptionId&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;32b8cbd6174ab183&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;clientState&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;clientOriginatedOpaqueToken&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;expirationDateTime&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;2016-02-04T11:23Z&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;resource&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;https://api.contoso.com/v1.0/users/user@contoso.com/files/$delta&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;userId&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; : &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&amp;lt;User GUID&amp;gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;tenantId&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; : &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&amp;lt;Tenant Id&amp;gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
    },
    {
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;subscriptionId&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;97b391179fa22&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;clientState &lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;clientOriginatedOpaqueToken&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;expirationDateTime&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;2016-02-04T11:23Z&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;resource&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;https://api.contoso.com/v1.0/users/user@contoso.com/files/$delta&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;userId&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; : &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&amp;lt;User GUID&amp;gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;tenantId&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; : &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&amp;lt;Tenant Id&amp;gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
    }
  ]
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Following is a detailed description of the JSON payload.&lt;/p&gt;
&lt;p&gt;A notification item consists a top-level object that contains an array of events, each of which identified the subscription due to which this notification is being sent.&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Field&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;value&lt;/td&gt;
&lt;td&gt;Array of events that have been raised within the subscription’s scope since the last notification.&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Each item of the events array contains the following properties:&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Field&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;subscriptionId&lt;/td&gt;
&lt;td&gt;The id of the subscription due to which this notification has been sent.&lt;br/&gt;Services MUST provide the &lt;em&gt;subscriptionId&lt;/em&gt; field.&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;clientState&lt;/td&gt;
&lt;td&gt;Services MUST provide the &lt;em&gt;clientState&lt;/em&gt; field if it was provided at subscription creation time.&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;expirationDateTime&lt;/td&gt;
&lt;td&gt;Services MUST provide the &lt;em&gt;expirationDateTime&lt;/em&gt; field if the subscription has one.&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;resource&lt;/td&gt;
&lt;td&gt;Services MUST provide the resource field. This URL MUST be considered opaque by the subscribing application. In the case of a richer notification it MAY be subsumed by message content that implicitly contains the resource URL to avoid duplication.&lt;br/&gt;If a service is providing this data as part of a more detailed data packet, then it need not be duplicated.&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;userId&lt;/td&gt;
&lt;td&gt;Services MUST provide this field for user-scoped resources. In the case of user-scoped resources, the unique identifier for the user should be used.&lt;br/&gt;In the case of resources shared between a specific set of users, multiple notifications must be sent, passing the unique identifier of each user.&lt;br/&gt;For tenant-scoped resources, the user id of the subscription should be used.&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;tenantId&lt;/td&gt;
&lt;td&gt;Services that wish to support cross-tenant requests SHOULD provide this field. Services that provide notifications on tenant-scoped data MUST send this field.&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h3&gt;14.7 Managing subscriptions programmatically&lt;/h3&gt;
&lt;p&gt;For per-user subscriptions, an API MUST be provided to create and manage subscriptions. The API must support at least the operations described here.&lt;/p&gt;
&lt;h4&gt;14.7.1 Creating subscriptions&lt;/h4&gt;
&lt;p&gt;A client creates a subscription by issuing a POST request against the subscriptions resource. The subscription namespace is client-defined via the POST operation.&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;https://api.contoso.com/apiVersion/$subscriptions
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;The POST request contains a single subscription object to be created. That subscription object has the following properties:&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Property Name&lt;/th&gt;
&lt;th&gt;Required&lt;/th&gt;
&lt;th&gt;Notes&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;resource&lt;/td&gt;
&lt;td&gt;Yes&lt;/td&gt;
&lt;td&gt;Resource path to watch.&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;notificationUrl&lt;/td&gt;
&lt;td&gt;Yes&lt;/td&gt;
&lt;td&gt;The target web hook URL.&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;clientState&lt;/td&gt;
&lt;td&gt;No&lt;/td&gt;
&lt;td&gt;Opaque string passed back to the client on all notifications. Callers may choose to use this to provide tagging mechanisms.&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;If the subscription was successfully created, the service MUST respond with the status code 201 CREATED and a body containing at least the following properties:&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Property Name&lt;/th&gt;
&lt;th&gt;Required&lt;/th&gt;
&lt;th&gt;Notes&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;id&lt;/td&gt;
&lt;td&gt;Yes&lt;/td&gt;
&lt;td&gt;Unique ID of the new subscription that can be used later to update/delete the subscription.&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;expirationDateTime&lt;/td&gt;
&lt;td&gt;No&lt;/td&gt;
&lt;td&gt;Uses existing Microsoft REST API Guidelines defined time formats.&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;Creation of subscriptions SHOULD be idempotent. The combination of properties scoped to the auth token, provides a uniqueness constraint.&lt;/p&gt;
&lt;p&gt;Below is an example request using a User + Application principal to subscribe to notifications from a file:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;POST&lt;/span&gt; https://api.contoso.com/files/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/$subscriptions HTTP &lt;span class=&quot;pl-c1&quot;&gt;1.1&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Authorization:&lt;/span&gt; Bearer {UserPrincipalBearerToken}&lt;/span&gt;

{
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;resource&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;http://api.service.com/v1.0/files/file1.txt&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;notificationUrl&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;https://contoso.com/myCallbacks&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;clientState&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;clientOriginatedOpaqueToken&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The service SHOULD respond to such a message with a response format minimally like this:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-json&quot;&gt;
&lt;pre&gt;
{
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;id&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;32b8cbd6174ab18b&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;expirationDateTime&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;2016-02-04T11:23Z&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Below is an example using an Application-Only principal where the application is watching all files to which it's authorized:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;POST&lt;/span&gt; https://api.contoso.com/files/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/$subscriptions HTTP &lt;span class=&quot;pl-c1&quot;&gt;1.1&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Authorization:&lt;/span&gt; Bearer {ApplicationPrincipalBearerToken}&lt;/span&gt;

{
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;resource&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;All.Files&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;notificationUrl&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;https://contoso.com/myCallbacks&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;clientState&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;clientOriginatedOpaqueToken&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The service SHOULD respond to such a message with a response format minimally like this:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-json&quot;&gt;
&lt;pre&gt;
{
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;id&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;8cbd6174abb391179&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;expirationDateTime&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;2016-02-04T11:23Z&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;14.7.2 Updating subscriptions&lt;/h4&gt;
&lt;p&gt;Services MAY support amending subscriptions. To update the properties of an existing subscription, clients use PATCH requests providing the ID and the properties that need to change. Omitted properties will retain their values. To delete a property, assign a value of JSON null to it.&lt;/p&gt;
&lt;p&gt;As with creation, subscriptions are individually managed.&lt;/p&gt;
&lt;p&gt;The following request changes the notification URL of an existing subscription:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;PATCH&lt;/span&gt; https://api.contoso.com/files/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/$subscriptions/{&lt;span class=&quot;pl-ii&quot;&gt;id&lt;/span&gt;} HTTP &lt;span class=&quot;pl-c1&quot;&gt;1.1&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Authorization:&lt;/span&gt; Bearer {UserPrincipalBearerToken}&lt;/span&gt;

{
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;notificationUrl&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;https://contoso.com/myNewCallback&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If the PATCH request contains a new &lt;em&gt;notificationUrl&lt;/em&gt;, the server MUST perform validation on it as described above. If the new URL fails to validate, the service MUST fail the PATCH request and leave the subscription in its previous state.&lt;/p&gt;
&lt;p&gt;The service MUST return an empty body and &lt;code&gt;204 No Content&lt;/code&gt; to indicate a successful patch.&lt;/p&gt;
&lt;p&gt;The service MUST return an error body and status code if the patch failed.&lt;/p&gt;
&lt;p&gt;The operation MUST succeed or fail atomically.&lt;/p&gt;
&lt;h4&gt;14.7.3 Deleting subscriptions&lt;/h4&gt;
&lt;p&gt;Services MUST support deleting subscriptions. Existing subscriptions can be deleted by making a DELETE request against the subscription resource:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;DELETE&lt;/span&gt; https://api.contoso.com/files/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/$subscriptions/{&lt;span class=&quot;pl-ii&quot;&gt;id&lt;/span&gt;} HTTP &lt;span class=&quot;pl-c1&quot;&gt;1.1&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Authorization:&lt;/span&gt; Bearer {UserPrincipalBearerToken}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As with update, the service MUST return &lt;code&gt;204 No Content&lt;/code&gt; for a successful delete, or an error body and status code to indicate failure.&lt;/p&gt;
&lt;h4&gt;14.7.4 Enumerating subscriptions&lt;/h4&gt;
&lt;p&gt;To get a list of active subscriptions, clients issue a GET request against the subscriptions resource using a User + Application or Application-Only bearer token:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;GET&lt;/span&gt; https://api.contoso.com/files/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/$subscriptions HTTP &lt;span class=&quot;pl-c1&quot;&gt;1.1&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Authorization:&lt;/span&gt; Bearer {UserPrincipalBearerToken}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The service MUST return a format as below using a User + Application principal bearer token:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-json&quot;&gt;
&lt;pre&gt;
{
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;value&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: [
    {
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;id&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;32b8cbd6174ab18b&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;resource&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt; http://api.contoso.com/v1.0/files/file1.txt&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;notificationUrl&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;https://contoso.com/myCallbacks&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;clientState&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;clientOriginatedOpaqueToken&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;expirationDateTime&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;2016-02-04T11:23Z&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
    }
  ]
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;An example that may be returned using Application-Only principal bearer token:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-json&quot;&gt;
&lt;pre&gt;
{
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;value&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: [
    {
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;id&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;6174ab18bfa22&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;resource&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;All.Files &lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;notificationUrl&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;https://contoso.com/myCallbacks&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;clientState&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;clientOriginatedOpaqueToken&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
      &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;expirationDateTime&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;2016-02-04T11:23Z&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
    }
  ]
}
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;14.8 Security&lt;/h3&gt;
&lt;p&gt;All service URLs must be HTTPS (that is, all inbound calls MUST be HTTPS). Services that deal with Web Hooks MUST accept HTTPS.&lt;/p&gt;
&lt;p&gt;We recommend that services that allow client defined Web Hook Callback URLs SHOULD NOT transmit data over HTTP. This is because information can be inadvertently exposed via client, network, server logs and other mechanisms.&lt;/p&gt;
&lt;p&gt;However, there are scenarios where the above recommendations cannot be followed due to client endpoint or software limitations. Consequently, services MAY allow web hook URLs that are HTTP.&lt;/p&gt;
&lt;p&gt;Furthermore, services that allow client defined HTTP web hooks callback URLs SHOULD be compliant with privacy policy specified by engineering leadership. This will typically include recommending that clients prefer SSL connections and adhere to special precautions to ensure that logs and other service data collection are properly handled.&lt;/p&gt;
&lt;p&gt;For example, services may not want to require developers to generate certificates to onboard. Services might only enable this on test accounts.&lt;/p&gt;
&lt;h2&gt;15 Unsupported requests&lt;/h2&gt;
&lt;p&gt;RESTful API clients MAY request functionality that is currently unsupported. RESTful APIs MUST respond to valid but unsupported requests consistent with this section.&lt;/p&gt;
&lt;h3&gt;15.1 Essential guidance&lt;/h3&gt;
&lt;p&gt;RESTful APIs will often choose to limit functionality that can be performed by clients. For instance, auditing systems allow records to be created but not modified or deleted. Similarly, some APIs will expose collections but require or otherwise limit filtering and ordering criteria, or MAY not support client-driven pagination.&lt;/p&gt;
&lt;h3&gt;15.2 Feature allow list&lt;/h3&gt;
&lt;p&gt;If a service does not support any of the below API features, then an error response MUST be provided if the feature is requested by a caller. The features are:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Key Addressing in a collection, such as: &lt;code&gt;https://api.contoso.com/v1.0/people/user1@contoso.com&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Filtering a collection by a property value, such as: &lt;code&gt;https://api.contoso.com/v1.0/people?$filter=name eq 'david'&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Filtering a collection by range, such as: &lt;code&gt;http://api.contoso.com/v1.0/people?$filter=hireDate ge 2014-01-01 and hireDate le 2014-12-31&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Client-driven pagination via $top and $skip, such as: &lt;code&gt;http://api.contoso.com/v1.0/people?$top=5&amp;amp;$skip=2&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Sorting by $orderBy, such as: &lt;code&gt;https://api.contoso.com/v1.0/people?$orderBy=name desc&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Providing $delta tokens, such as: &lt;code&gt;https://api.contoso.com/v1.0/people?$delta&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h4&gt;15.2.1 Error response&lt;/h4&gt;
&lt;p&gt;Services MUST provide an error response if a caller requests an unsupported feature found in the feature allow list. The error response MUST be an HTTP status code from the 4xx series, indicating that the request cannot be fulfilled. Unless a more specific error status is appropriate for the given request, services SHOULD return &quot;400 Bad Request&quot; and an error payload conforming to the error response guidance provided in the Microsoft REST API Guidelines. Services SHOULD include enough detail in the response message for a developer to determine exactly what portion of the request is not supported.&lt;/p&gt;
&lt;p&gt;Example:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;GET&lt;/span&gt; https://api.contoso.com/v&lt;span class=&quot;pl-c1&quot;&gt;1.0&lt;/span&gt;/people&lt;span class=&quot;pl-c1&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;$orderBy&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;name HTTP/1.1&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Accept:&lt;/span&gt; application/json&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;highlight highlight-source-httpspec&quot;&gt;
&lt;pre&gt;
HTTP/&lt;span class=&quot;pl-c1&quot;&gt;1.1&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;400&lt;/span&gt; Bad Request
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-v&quot;&gt;Content-Type:&lt;/span&gt; application/json&lt;/span&gt;

{
  &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;error&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: {
    &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;code&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;ErrorUnsupportedOrderBy&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
    &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;message&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Ordering by name is not supported.&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
  }
}
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;16 Appendix&lt;/h2&gt;
&lt;h3&gt;16.1 Sequence diagram notes&lt;/h3&gt;
&lt;p&gt;All sequence diagrams in this document are generated using the WebSequenceDiagrams.com web site. To generate them, paste the text below into the web tool.&lt;/p&gt;
&lt;h4&gt;16.1.1 Push notifications, per user flow&lt;/h4&gt;
&lt;pre&gt;
&lt;code&gt;=== Being Text ===
note over Developer, Automation, App Server:
     An App Developer like MovieMaker
     Wants to integrate with primary service like Dropbox
end note
note over DB Portal, DB App Registration, DB Notifications, DB Auth, DB Service: The primary service like Dropbox
note over Client: The end users' browser or installed app

note over Developer, Automation, App Server, DB Portal, DB App Registration, DB Notifications, Client : Manual App Registration


Developer &amp;lt;--&amp;gt; DB Portal : Login into Portal, App Registration UX
DB Portal -&amp;gt; +DB App Registration: App Name etc.
note over DB App Registration: Confirm Portal Access Token

DB App Registration -&amp;gt; -DB Portal: App ID
DB Portal &amp;lt;--&amp;gt; App Server: Developer copies App ID

note over Developer, Automation, App Server, DB Portal, DB App Registration, DB Notifications, Client : Manual Notification Registration

Developer &amp;lt;--&amp;gt; DB Portal: webhook registration UX
DB Portal -&amp;gt; +DB Notifications: Register: App Server webhook URL, Scope, App ID
Note over DB Notifications : Confirm Portal Access Token
DB Notifications -&amp;gt; -DB Portal: notification ID
DB Portal --&amp;gt; App Server : Developer may copy notification ID


note over Developer, Automation, App Server, DB Portal, DB App Registration, DB Notifications, Client : Client Authorization

Client -&amp;gt; +App Server : Request access to DB protected information
App Server -&amp;gt; -Client : Redirect to DB Authorization endpoint with authorization request
Client -&amp;gt; +DB Auth : Redirected authorization request
Client &amp;lt;--&amp;gt; DB Auth : Authorization UX
DB Auth -&amp;gt; -Client : Redirect back to App Server with code
Client -&amp;gt; +App Server : Redirect request back to access server with access code
App Server -&amp;gt; +DB Auth : Request tokens with access code
note right of DB Service: Cache that this User ID provided access to App ID
DB Auth -&amp;gt; -App Server : Response with access, refresh, and ID tokens
note right of App Server : Cache tokens by user ID
App Server -&amp;gt; -Client : Return information to client

note over Developer, Automation, App Server, DB Portal, DB App Registration, DB Notifications, Client : Notification Flow

Client &amp;lt;--&amp;gt; DB Service: Changes to user data - typical via interacting with App Server via Client
DB Service -&amp;gt; App Server : Notification with notification ID and user ID
App Server -&amp;gt; +DB Service : Request changed information with cached access tokens and &quot;since&quot; token
note over DB Service: Confirm User Access Token
DB Service -&amp;gt; -App Server : Response with data and new &quot;since&quot; token
note right of App Server: Update status and cache new &quot;since&quot; token
=== End Text ===
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4&gt;16.1.2 Push notifications, firehose flow&lt;/h4&gt;
&lt;pre&gt;
&lt;code&gt;=== Being Text ===
note over Developer, Automation, App Server:
     An App Developer like MovieMaker
     Wants to integrate with primary service like Dropbox
end note
note over DB Portal, DB App Registration, DB Notifications, DB Auth, DB Service: The primary service like Dropbox
note over Client: The end users' browser or installed app

note over Developer, Automation, App Server, DB Portal, DB App Registration, DB Notifications, Client : App Registration

alt Automated app registration
   Developer &amp;lt;--&amp;gt; Automation: Configure
   Automation -&amp;gt; +DB App Registration: App Name etc.
   note over DB App Registration: Confirm App Access Token
   DB App Registration -&amp;gt; -Automation: App ID, App Secret
   Automation --&amp;gt; App Server : Embed App ID, App Secret
else Manual app registration
   Developer &amp;lt;--&amp;gt; DB Portal : Login into Portal, App Registration UX
   DB Portal -&amp;gt; +DB App Registration: App Name etc.
   note over DB App Registration: Confirm Portal Access Token

   DB App Registration -&amp;gt; -DB Portal: App ID
   DB Portal &amp;lt;--&amp;gt; App Server: Developer copies App ID
end

note over Developer, Automation, App Server, DB Portal, DB App Registration, DB Notifications, Client : Client Authorization

Client -&amp;gt; +App Server : Request access to DB protected information
App Server -&amp;gt; -Client : Redirect to DB Authorization endpoint with authorization request
Client -&amp;gt; +DB Auth : Redirected authorization request
Client &amp;lt;--&amp;gt; DB Auth : Authorization UX
DB Auth -&amp;gt; -Client : Redirect back to App Server with code
Client -&amp;gt; +App Server : Redirect request back to access server with access code
App Server -&amp;gt; +DB Auth : Request tokens with access code
note right of DB Service: Cache that this User ID provided access to App ID
DB Auth -&amp;gt; -App Server : Response with access, refresh, and ID tokens
note right of App Server : Cache tokens by user ID
App Server -&amp;gt; -Client : Return information to client



note over Developer, Automation, App Server, DB Portal, DB App Registration, DB Notifications, Client : Notification Registration

App Server-&amp;gt;+DB Notifications: Register: App server webhook URL, Scope, App ID
note over DB Notifications : Confirm User Access Token
DB Notifications -&amp;gt; -App Server: notification ID
note right of App Server : Cache the Notification ID and User Access Token



note over Developer, Automation, App Server, DB Portal, DB App Registration, DB Notifications, Client : Notification Flow

Client &amp;lt;--&amp;gt; DB Service: Changes to user data - typical via interacting with App Server via Client
DB Service -&amp;gt; App Server : Notification with notification ID and user ID
App Server -&amp;gt; +DB Service : Request changed information with cached access tokens and &quot;since&quot; token
note over DB Service: Confirm User Access Token
DB Service -&amp;gt; -App Server : Response with data and new &quot;since&quot; token
note right of App Server: Update status and cache new &quot;since&quot; token



=== End Text ===
&lt;/code&gt;
&lt;/pre&gt;</description>
<pubDate>Fri, 22 Nov 2019 20:39:05 +0000</pubDate>
<dc:creator>excerionsforte</dc:creator>
<og:image>https://avatars2.githubusercontent.com/u/6154722?s=400&amp;v=4</og:image>
<og:type>object</og:type>
<og:title>microsoft/api-guidelines</og:title>
<og:url>https://github.com/microsoft/api-guidelines</og:url>
<og:description>Microsoft REST API Guidelines. Contribute to microsoft/api-guidelines development by creating an account on GitHub.</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://github.com/Microsoft/api-guidelines/blob/master/Guidelines.md</dc:identifier>
</item>
<item>
<title>The revolution of machine learning has been exaggerated</title>
<link>http://nautil.us/issue/78/atmospheres/are-neural-networks-about-to-reinvent-physics</link>
<guid isPermaLink="true" >http://nautil.us/issue/78/atmospheres/are-neural-networks-about-to-reinvent-physics</guid>
<description>&lt;p&gt;&lt;span class=&quot;dropcap&quot;&gt;C&lt;/span&gt;an AI teach itself the laws of physics? Will classical computers soon be replaced by deep neural networks? Sure looks like it, if you’ve been following the news, which lately has been filled with headlines like, “&lt;a href=&quot;https://www.technologyreview.com/s/614597/a-neural-net-solves-the-three-body-problem-100-million-times-faster/&quot; target=&quot;_blank&quot;&gt;A neural net solves the three-body problem 100 million times faster&lt;/a&gt;: Machine learning provides an entirely new way to tackle one of the classic problems of applied mathematics,” and “&lt;a href=&quot;https://www.technologyreview.com/s/611798/who-needs-copernicus-if-you-have-machine-learning/&quot; target=&quot;_blank&quot;&gt;Who needs Copernicus if you have machine learning&lt;/a&gt;?”. The latter was described by another journalist, in an article called “&lt;a href=&quot;https://www.unite.ai/ai-teaches-itself-laws-of-physics/&quot; target=&quot;_blank&quot;&gt;AI Teaches Itself Laws of Physics&lt;/a&gt;,” as a “monumental moment in both AI and physics,” which “could be critical in solving quantum mechanics problems.”&lt;/p&gt;
&lt;blockquote class=&quot;pull-quote&quot;&gt;
&lt;p&gt;The trouble is, the authors have given no compelling reason to think that they could actually do this.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;None of these claims is even close to being true. All derive from just two recent studies that use machine learning to explore different aspects of planetary motion. Both papers represent interesting attempts to do new things, but neither warrant the excitement. The exaggerated claims made in both papers, and the resulting hype surrounding these, are symptoms of a tendency among science journalists—and sometimes scientists themselves—to overstate the significance of new advances in AI and machine learning.&lt;/p&gt;
&lt;p&gt;As always, when one sees large claims made for an AI system, the first question to ask is, “What does the system actually do?”&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;The Three-Body Problem&lt;/strong&gt;&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;The three-body problem is the problem of predicting how three objects—typically planets or stars—move over time under mutual gravitational force. If there are only two bodies, then, as Newton proved, the behavior is simple: Each of the objects moves along a circle, an ellipse, or a hyperbola. But, as Newton and his successors also determined, when there are three or more bodies involved, the behaviors can become very strange and complex. There is no simple mathematical formula; and accurate prediction over extended periods of time becomes very difficult. Finding good ways to calculate solutions to the three-body problem and the &lt;em&gt;n&lt;/em&gt;-body problem (the same problem, with more objects) has been a major challenge for computational physics for 300 years. The  slew of “AI that solves the three-body problem” articles were based on an article in arXiv entitled “&lt;a href=&quot;https://arxiv.org/abs/1910.07291&quot; target=&quot;_blank&quot;&gt;Newton vs The Machine: Solving The Chaotic Three-Body Problem Using Deep Neural Networks&lt;/a&gt;.”&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;As is often the case, the technical article is less over the top than the popular ones, but, for a technical scientific article, this one is still pretty ambitious. It ends with the prediction that techniques developed for a narrow case should extend both to the general three-body problem and then ultimately to the four- and five-body problems and other chaotic systems, which could conceivably constitute a genuine revolution.&lt;/p&gt;
&lt;p&gt;The trouble is, the authors have given no compelling reason to think that they could actually do this. In fact, they haven’t even engaged in the full breadth of the existing three-body problem. Instead, they focused only on a special case of the three-body problem, involving three particles of equal mass starting from specified positions with zero velocity.&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;Even here, they are entirely dependent on a conventional physics engine or simulator—which is to say no AI, no machine learning, just traditional numerical solution of the differential equations of motion—to generate the trajectories of motion over time from 10,000 different starting positions.&lt;/p&gt;
&lt;blockquote class=&quot;pull-quote&quot;&gt;
&lt;p&gt;The media enthusiasm is sending the wrong impression, making it sound like any old problem can be solved with a neural network.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;They then used this classically-derived database as input, to train the neural network. In testing the neural network on new examples, whose true solution was also calculated by the simulator, they found that the neural network could predict the later positions of the particles with reasonable accuracy, orders of magnitude faster than the conventional simulator.&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;In essence, what they were doing was to use the neural network as a new tool for interpolating from known values derived using an external, classical system. The neural network may be better at interpolation with a smooth space of values than other techniques, but most of the work comes from the external prior system doing the work. And, crucially, they haven’t shown that the same sort of interpolation would actually work in the more complex physics of the actual world, even for simple cases (particles of different masses), let alone in situations with more bodies than just three.&lt;/p&gt;
&lt;p&gt;Meanwhile, in technical terms, even within the three-body problem, the class of problems they have solved has is an easy subset viz. two degrees of freedom—that is, a problem instance is determined by two numerical parameters—whereas the general three-body problem has 10 degrees of freedom. In their limited version of the problem, the only choice you have in formulating a problem that fundamentally changes the behavior is where to place the third object relative to the first two. In the full problem, which they didn’t attempt, you can additionally choose the masses and initial velocities of the second and third objects; and each of these choices can radically change how the system evolves over time.&lt;/p&gt;
&lt;div class=&quot;reco&quot;&gt;
&lt;article class=&quot;issue-article&quot;&gt;&lt;div&gt;&lt;a href=&quot;http://nautil.us/issue/49/The%20Absurd/chaos-makes-the-multiverse-unnecessary&quot; class=&quot;obnd_lnk&quot; data-trval=&quot;chaos-makes-the-multiverse-unnecessary&quot; data-trlbl=&quot;foc_rec&quot; data-tract=&quot;internal_art&quot;&gt;&lt;img src=&quot;http://static.nautil.us/12600_9e411b2d0cbcc1d9cd8775e89e96774f.jpg&quot; alt=&quot;Sapolsky_TH-F1&quot; width=&quot;314&quot; height=&quot;177&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;div&gt;&lt;span class=&quot;article-tag&quot;&gt;&lt;span class=&quot;article-tag&quot;&gt;&lt;span class=&quot;article-tag-focus&quot;&gt;&lt;a href=&quot;http://nautil.us/term/f/Math&quot;&gt;Also in Math&lt;/a&gt;&lt;/span&gt;  &lt;/span&gt;&lt;/span&gt;
&lt;h4 class=&quot;article-title&quot;&gt;&lt;a href=&quot;http://nautil.us/issue/49/The%20Absurd/chaos-makes-the-multiverse-unnecessary&quot; class=&quot;obnd_lnk&quot; data-trval=&quot;chaos-makes-the-multiverse-unnecessary&quot; data-trlbl=&quot;foc_rec&quot; data-tract=&quot;internal_art&quot;&gt;Chaos Makes the Multiverse Unnecessary&lt;/a&gt;&lt;/h4&gt;
&lt;p class=&quot;article-author&quot;&gt;By Noson S. Yanofsky&lt;/p&gt;
&lt;p&gt;Scientists look around the universe and see amazing structure. There are objects and processes of fantastic complexity. Every action in our universe follows exact laws of nature that are perfectly expressed in a mathematical language. These laws of nature appear...&lt;strong&gt;&lt;a href=&quot;http://nautil.us/issue/49/The%20Absurd/chaos-makes-the-multiverse-unnecessary&quot; class=&quot;obnd_lnk&quot; data-trval=&quot;chaos-makes-the-multiverse-unnecessary&quot; data-trlbl=&quot;foc_rec&quot; data-tract=&quot;internal_art&quot;&gt;READ MORE&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;/article&gt;&lt;/div&gt;
&lt;p&gt;And we know that the complexity of this kind of problem tends to increase exponentially with the number of degrees of freedom. So the problem they have solved is not five times easier than the general problem, it is vastly easier. And the problem gets rapidly worse as you add more points: the four-body problem has 17 degrees of freedom, the five-body has 24, the &lt;em&gt;n&lt;/em&gt;-body has 7&lt;em&gt;n&lt;/em&gt;-11.&lt;/p&gt;
&lt;p&gt;Second, if you only have to worry about two dimensions, then calculating 10,000 data points gives pretty good coverage. If, let’s say, you want to map out the shape of a mountain, and you measure the elevation at 10,000 points—essentially, every point on a 100 x 100 grid—then you can estimate the elevation at any point in between pretty reliably. Things get much more complex as the number of dimensions increases, and the possibility of smooth interpolation working diminishes.&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;Third, the scientists failed to wrestle with the 800-pound chaotic butterfly in the room: the high degree of dependence on starting conditions. Two slightly different starting conditions can lead to radically different outcomes. This is not a limitation of the algorithm that you used to make the prediction; it is an inherent characteristic of the problem. Therefore, claiming that a machine learning system has learned to predict a chaotic system over the long term is like saying that it has learned to predict the behavior of a random process, like thermal noise or radioactive decay.  It simply can’t be done, regardless of the algorithm. (Kudos to &lt;a href=&quot;https://www.popularmechanics.com/science/a29714375/three-body-problem-unsolvable/&quot; target=&quot;_blank&quot;&gt;Caroline Delbert&lt;/a&gt; at &lt;em&gt;Popular Mechanics&lt;/em&gt; for noticing this; most journalists missed it.)&lt;/p&gt;
&lt;p&gt;Finally, even the comparison with a conventional simulator was flawed. Jonathan Goodman, of the math department at New York University, an expert on these kinds of dynamical systems, assures us that modern adaptive methods can compute these trajectories much faster than the timings quoted in the paper; the conventional simulator was a straw model.&lt;/p&gt;
&lt;img src=&quot;http://static.nautil.us/16598_59be87529097e488e3b631d6a4c62bc7.png&quot; width=&quot;733&quot; alt=&quot;&quot;/&gt;&lt;span class=&quot;caption&quot;&gt;&lt;strong&gt;THE DISCOVERER:&lt;/strong&gt; It’s misleading to say a neural network infers the planets revolve around the sun. It doesn’t understand anything is revolving around anything. The system is a calculator, Copernicus is the discoverer.&lt;/span&gt;&lt;span class=&quot;credit&quot;&gt;Mario Breda / Shutterstock&lt;/span&gt;
&lt;p&gt;&lt;strong&gt;Copernicus&lt;/strong&gt;&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;The situation with the Copernicus project is no better.&lt;/p&gt;
&lt;p&gt;Here a different set of authors, &lt;a href=&quot;https://arxiv.org/abs/1807.10300&quot; target=&quot;_blank&quot;&gt;in work to be published&lt;/a&gt; in &lt;em&gt;Physical Review Letters&lt;/em&gt;, constructed a neural network designed to take as input numerical data from a physical process and extract the key parameters that determine the behavior of the process. They described four experiments involving simple physical systems of different kinds, in which their neural network succeeds as they had hoped.&lt;/p&gt;
&lt;p&gt;The supposed rediscovery of the Copernican system from astronomical observation is what caused excitement in the popular press.&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;The trouble is that it is entirely misleading to say that their neural network infers that “the Earth and Mars revolve about the sun.” The neural network doesn’t actually understand that anything is revolving around anything, in a geometric sense; it has no sense of geometry and no idea what it would mean to revolve. All the neural network does is to extract the two numerical parameters involved; it has no idea that these represent angles from some fixed central point. As far as the network is concerned, these could be time-varying masses, or electric charges, or angles from two different central points. Correlations between data sources were extracted, but the system made no inferences about how those data sources related to the world; it is the human scientists who identify these as the angles of the Earth and Mars as measured from the sun, and who abstract the facts that such parameters are best interpreted as orbits. All of the real work of Copernicus’ actual discovery is done in advance; the system was a calculator, not a discoverer.&lt;/p&gt;
&lt;p&gt;Further, in the synthetic data the authors generated, the Earth and Mars move in constant-velocity circular orbits in the same plane. In the real solar system, things are notably trickier: The plane of Mars’ orbit is tilted at 1.8&lt;sup&gt;o&lt;/sup&gt; to the plane of the Earth’s orbit (the ecliptic). In consequence, the apparent position of Mars against the fixed stars does not just move on an east-west circle, as it would if the two orbits were co-planar; it also moves back and forth on a north-south arc about 4&lt;sup&gt;o&lt;/sup&gt; long. Viewed over a period of years, the position of Mars does not stay in a simple circular path in the sky; it lies in a strip that is 4&lt;sup&gt;o&lt;/sup&gt; wide at its widest. Copernicus’ real challenge (solved long before modern computers, and without Big Data) was vastly more complex than what the network had to deal with.&lt;/p&gt;
&lt;img src=&quot;http://static.nautil.us/16587_9f1974a3c9203cbce1166759bcb7fc0f.png&quot; width=&quot;733&quot; alt=&quot;&quot;/&gt;&lt;strong&gt;mars angles:&lt;/strong&gt; Mars is shown in its position furthest from the plane of the ecliptic. At that point the angle between the line from the sun to Mars and the ecliptic plane is then α = 1.8&lt;sup&gt;o&lt;/sup&gt;. The position of the earth, when Mars is at that place, varies from year to year. Earth (1) is the closest that the earth comes to that position of Mars; when the earth is there, the angle between the line from earth to Mars and the ecliptic is β = 5.5&lt;sup&gt;o&lt;/sup&gt;. Earth (2) is the furthest that earth gets from that position of Mars; when earth is there, the angle between the line from the earth to Mars and the ecliptic is γ = 1.1&lt;sup&gt;o&lt;/sup&gt;. The vertical axis has been exaggerated, for clarity.
&lt;p&gt;Four degrees may sound small, but by the standards of astronomical observations, it is huge.  By way of comparison, Orion’s belt is only 2.7&lt;sup&gt;o&lt;/sup&gt; wide. Measurements in Ptolemy’s &lt;em&gt;Almagest&lt;/em&gt; are mostly accurate to within about 1/10 of a degree.&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;Accordingly, both the Ptolemaic and the Copernican models of the solar system must have mechanisms to account for this transverse motion of Mars and the other planets. The Copernican model is therefore necessarily much more complicated than the simple model, that was produced (in a sense) by the neural network, in which the Earth and Mars revolve around the sun in circular orbits. In fact, the Copernican model included 48 epicycles, more than the Ptolemaic model, though it was simpler in other respects. The network system doesn’t even engage in the transverse movement.&lt;/p&gt;
&lt;p&gt;Buoyed by their supposed success in duplicating Copernicus’ accomplishment, the authors and journalists look forward to the days when this kind of machine learning technology can make radical advances in theoretical physics. &lt;a href=&quot;https://www.nature.com/articles/d41586-019-03332-7&quot; target=&quot;_blank&quot;&gt;An article&lt;/a&gt; in &lt;em&gt;Nature News&lt;/em&gt; even enthused, “A neural network that teaches itself the laws of physics could help to solve quantum-mechanics mysteries.”&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;This is pure fantasy. In the examples in this experiment, the relation between the data observed and the parameters extracted is fairly straightforward. By contrast, in most of the experimental evidence for quantum theories, the relation between the observations and underlying theories is extraordinarily indirect and subtle and requires extremely ingenious theorizing to reveal; detecting correlations as these neural network systems does not even scratch the surface of what would be required.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Why It Matters&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The flaws in these particular studies are not huge in themselves, but the way they have been reported is symptomatic of a problem that is in fact serious. Such overblown reports lend false credence to the idea—most notoriously promoted in Chris Anderson’s 2008 infamous article, “&lt;a href=&quot;https://www.wired.com/2008/06/pb-theory/&quot; target=&quot;_blank&quot;&gt;The End of Theory: The Data Deluge Makes the Scientific Method Obsolete&lt;/a&gt;,” and increasingly part of the general zeitgeist—that AI generally and deep learning theory will soon replace all other approaches to computation or even to knowledge, when nothing of the sort has been established. The media enthusiasm for deep learning is sending the wrong impression, making it sound like any old problem can be solved with a massive neural network and the right data set, without attention to the fundamentals in that domain.&lt;/p&gt;
&lt;p&gt;The truth is that many of the hard, open problems in the world require a great deal of expertise in particular domains. In the sort of problems in these two papers, it means if someone wants to make a useful contribution to the solution of the three-body problem or similar problems, one has to spend serious time studying the sophisticated science of differential equations, numerical computation, and dynamical systems. In the domain of natural language understanding, it might similar mean incorporating a great deal of work in linguistics and psycholinguistics, rather than gathering just a large data set and large assembly of sophisticated computers.&lt;/p&gt;
&lt;p&gt;The widespread misimpression that data + neural networks is a universal formula has real consequences: in what scientists choose to research, in what companies and governments choose to fund, in what journals and conferences choose to accept for publication, in what students choose to study, and in what universities choose to teach. The reality is that neural networks, in anything like their current form, cannot replace the sophisticated tools of scientific analysis, developed over centuries, and have not thus far duplicated the great scientific accomplishments of the past—let alone improved upon them. They should be seen as tools that supplement existing techniques, not foundational revisions to how we do science.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Acknowledgements&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Thanks to Jonathan Goodman for very useful information about the three-body problem study, and to him and Kyle Cranmer for helpful feedback on a draft.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Gary Marcus and Ernie Davis are co-authors of&lt;/em&gt; Rebooting AI: Building Artificial Intelligence We Can Trust, &lt;em&gt;and of numerous scientific and popular articles on cognitive psychology and artificial intelligence.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Gary Marcus is a scientist, best-selling author, and entrepreneur. He is the founder and CEO of &lt;a href=&quot;http://robust.ai&quot; target=&quot;_blank&quot;&gt;Robust.AI&lt;/a&gt;, and was the founder and CEO of Geometric Intelligence, a machine learning company acquired by Uber in 2016. In addition to&lt;/em&gt; Rebooting AI, &lt;em&gt;he is the author of five books, including&lt;/em&gt; The Algebraic Mind Kluge&lt;em&gt;,&lt;/em&gt; The Birth of the Mind&lt;em&gt;, and&lt;/em&gt; The New York Times &lt;em&gt;best seller&lt;/em&gt; Guitar Zero.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Ernie Davis is a professor of computer science at the Courant Institute of Mathematical Sciences, New York University. He is one of the world’s leading experts on common sense reasoning for artificial intelligence. He is the author of four books, including the textbooks&lt;/em&gt; Representations of Commonsense Knowledge &lt;em&gt;and&lt;/em&gt; &lt;a href=&quot;https://cs.nyu.edu/faculty/davise/MathTechniques/index.html&quot; target=&quot;_blank&quot;&gt;Linear Algebra and Probability for Computer Science Applications&lt;/a&gt;, &lt;em&gt;and&lt;/em&gt; &lt;a href=&quot;http://www.cs.nyu.edu/faculty/davise/Verses/&quot; target=&quot;_blank&quot;&gt;Verses for the Information Age&lt;/a&gt;, &lt;em&gt;a collection of light verse. With his late father Philip J. Davis, he edited&lt;/em&gt; &lt;a href=&quot;http://www.cs.nyu.edu/faculty/davise/MathOntology/&quot; target=&quot;_blank&quot;&gt;Mathematics, Substance and Surmise: Views on the Meaning and Ontology of Mathematics&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Lead image: metamorworks / Shutterstock&lt;/em&gt;&lt;/p&gt;
&lt;section class=&quot;leaderboard-ad-belt&quot;&gt;&lt;div class=&quot;leaderboard-ad-belt-inner adarticle&quot;&gt;&lt;div id=&quot;div-gpt-ad-1380044019755-0&quot; class=&quot;leaderboard-ad&quot;/&gt;
&lt;/div&gt;
&lt;/section&gt;</description>
<pubDate>Fri, 22 Nov 2019 17:28:05 +0000</pubDate>
<dc:creator>benryon</dc:creator>
<og:type>website</og:type>
<og:url>http://nautil.us/issue/78/atmospheres/are-neural-networks-about-to-reinvent-physics</og:url>
<og:title>Are Neural Networks About to Reinvent Physics? - Issue 78: Atmospheres - Nautilus</og:title>
<og:description>Can AI teach itself the laws of physics? Will classical computers soon be replaced by deep neural networks? Sure looks like it, if&amp;#8230;</og:description>
<og:image>http://static.nautil.us/16595_29ec8066dea8748449b852688c46ee5a.png</og:image>
<dc:format>text/html</dc:format>
<dc:identifier>http://nautil.us/issue/78/atmospheres/are-neural-networks-about-to-reinvent-physics</dc:identifier>
</item>
</channel>
</rss>