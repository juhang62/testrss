<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=hnrss.org%2Fnewest%3Fpoints%3D200&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://hnrss.org/newest?points=200" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>Hacker News: Newest</title>
<link>https://news.ycombinator.com/newest</link>
<description>Hacker News RSS</description>
<item>
<title>Blue Moon</title>
<link>http://blueorigin.com/blue-moon</link>
<guid isPermaLink="true" >http://blueorigin.com/blue-moon</guid>
<description>&lt;p&gt;Versatility&lt;/p&gt;
&lt;p&gt;Large Lunar Landing Payload Capability&lt;/p&gt;
&lt;div class=&quot;Copy__Primary Copy__PrimaryDark bard&quot; readability=&quot;13&quot;&gt;
&lt;p&gt;Blue Moon can land multiple metric tons of payload on the lunar surface.&lt;/p&gt;
&lt;p&gt;The top deck and lower bays easily accommodate a wide variety of payloads, including large payloads and ESPA-class payloads with standard ring port interfaces. There are lower mounting locations for payloads, useful for closer access to the lunar surface and off-loading. &lt;/p&gt;
&lt;/div&gt;
</description>
<pubDate>Thu, 09 May 2019 21:08:21 +0000</pubDate>
<dc:creator>goshx</dc:creator>
<og:type>website</og:type>
<og:title>Blue Moon</og:title>
<og:description>Earth, in all its beauty, is just our starting place. Blue Origin is opening the promise of space to all.</og:description>
<og:url>https://www-dev.blueorigin.com/blue-moon</og:url>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://blueorigin.com/blue-moon</dc:identifier>
</item>
<item>
<title>Technical Details on the Recent Firefox Add-On Outage</title>
<link>https://hacks.mozilla.org/2019/05/technical-details-on-the-recent-firefox-add-on-outage/</link>
<guid isPermaLink="true" >https://hacks.mozilla.org/2019/05/technical-details-on-the-recent-firefox-add-on-outage/</guid>
<description>&lt;p&gt;&lt;em&gt;Editor’s Note: May 9, 8:22 pt – Updated as follows: (1) Fixed verb tense (2) Clarified the situation with downstream distros. For more detail, see &lt;a href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=1549886&quot;&gt;Bug 1549886&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;&lt;p&gt;Recently, Firefox had an incident in which most add-ons stopped working. This was due to an error on our end: we let one of the certificates used to sign add-ons expire which had the effect of disabling the vast majority of add-ons. Now that we’ve fixed the problem for most users and most people’s add-ons are restored, I wanted to walk through the details of what happened, why, and how we repaired it.&lt;/p&gt;
&lt;h2&gt;Background: Add-Ons and Add-On Signing&lt;/h2&gt;
&lt;p&gt;Although many people use Firefox out of the box, Firefox also supports a powerful extension mechanism called “add-ons”. Add-ons allow users to add third party features to Firefox that extend the capabilities we offer by default. Currently there are over 15,000 Firefox add-ons with capabilities ranging from &lt;a href=&quot;https://addons.mozilla.org/en-US/firefox/addon/ublock-origin/&quot;&gt;blocking ads&lt;/a&gt; to &lt;a href=&quot;https://addons.mozilla.org/en-US/firefox/addon/tree-style-tab/&quot;&gt;managing hundreds of tabs&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Firefox requires that all add-ons that are installed be &lt;a href=&quot;https://blog.mozilla.org/addons/2015/02/10/extension-signing-safer-experience/&quot;&gt;digitally signed&lt;/a&gt;. This requirement is intended to protect users from malicious add-ons by requiring some minimal standard of review by Mozilla staff. Before we introduced this requirement in 2015, we had &lt;a href=&quot;https://blog.mozilla.org/addons/2015/04/15/the-case-for-extension-signing/&quot;&gt;serious problems&lt;/a&gt; with malicious add-ons.&lt;/p&gt;
&lt;p&gt;The way that the add-on signing works is that Firefox is configured with a preinstalled “root certificate”. That root is stored offline in a &lt;a href=&quot;https://en.wikipedia.org/wiki/Hardware_security_module&quot;&gt;hardware security module (HSM)&lt;/a&gt;. Every few years it is used to sign a new “intermediate certificate” which is kept online and used as part of the signing process. When an add-on is presented for signature, we generate a new temporary “end-entity certificate” and sign that using the intermediate certificate. The end-entity certificate is then used to sign the add-on itself. Shown visually, this looks like this:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2019/05/Add-on-blog-post-visual-May-7-2019.png&quot;&gt;&lt;img class=&quot;aligncenter wp-image-33450&quot; src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2019/05/Add-on-blog-post-visual-May-7-2019-250x280.png&quot; alt=&quot;Diagram showing the digital signature workflow from Root to Add-on&quot; width=&quot;359&quot; height=&quot;402&quot; srcset=&quot;https://hacks.mozilla.org/files/2019/05/Add-on-blog-post-visual-May-7-2019-250x280.png 250w, https://hacks.mozilla.org/files/2019/05/Add-on-blog-post-visual-May-7-2019-768x859.png 768w, https://hacks.mozilla.org/files/2019/05/Add-on-blog-post-visual-May-7-2019-500x559.png 500w, https://hacks.mozilla.org/files/2019/05/Add-on-blog-post-visual-May-7-2019.png 987w&quot; sizes=&quot;(max-width: 359px) 100vw, 359px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Note that each certificate has a “subject” (to whom the certificate belongs) and an “issuer” (the signer). In the case of the root, these are the same entity, but for other certificates, the issuer of a certificate is the subject of the certificate that signed it.&lt;/p&gt;
&lt;p&gt;An important point here is that each add-on is signed by its own end-entity certificate, but nearly all add-ons share the same intermediate certificate &lt;sup&gt;&lt;a href=&quot;https://hacks.mozilla.org/2019/05/technical-details-on-the-recent-firefox-add-on-outage/#footnote-1&quot;&gt;[1]&lt;/a&gt;&lt;/sup&gt;. It is this certificate that encountered a problem: Each certificate has a fixed period during which it is valid. Before or after this window, the certificate won’t be accepted, and an add-on signed with that certificate can’t be loaded into Firefox. Unfortunately, the intermediate certificate we were using expired just after 1AM UTC on May 4, and immediately every add-on that was signed with that certificate become unverifiable and could not be loaded into Firefox.&lt;/p&gt;
&lt;p&gt;Although add-ons all expired around midnight, the impact of the outage wasn’t felt immediately. The reason for this is that Firefox doesn’t continuously check add-ons for validity. Rather, all add-ons are checked about every 24 hours, with the time of the check being different for each user. The result is that some people experienced problems right away, some people didn’t experience them until much later. We at Mozilla first became aware of the problem around 6PM Pacific time on Friday May 3 and immediately assembled a team to try to solve the issue.&lt;/p&gt;
&lt;h2&gt;Damage Limitation&lt;/h2&gt;
&lt;p&gt;Once we realized what we were up against, we took several steps to try to avoid things getting any worse.&lt;/p&gt;
&lt;p&gt;First, we disabled signing of new add-ons. This was sensible at the time because we were signing with a certificate that we knew was expired. In retrospect, it might have been OK to leave it up, but it also turned out to interfere with the “hardwiring a date” mitigation we discuss below (though eventually didn’t use) and so it’s good we preserved the option. Signing is now back up.&lt;/p&gt;
&lt;p&gt;Second, we immediately pushed a hotfix which suppressed re-validating the signatures on add-ons. The idea here was to avoid breaking users who hadn’t re-validated yet. We did this before we had any other fix, and have removed it now that fixes are available.&lt;/p&gt;
&lt;h2&gt;Working in Parallel&lt;/h2&gt;
&lt;p&gt;In theory, fixing a problem like this looks simple: make a new, valid certificate and republish every add-on with that certificate. Unfortunately, we quickly determined that this wouldn’t work for a number of reasons:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;There are a very large number of add-ons (over 15,000) and the signing service isn’t optimized for bulk signing, so just re-signing every add-on would take longer than we wanted.&lt;/li&gt;
&lt;li&gt;Once add-ons were signed, users would need to get a new add-on. Some add-ons are hosted on Mozilla’s servers and Firefox would update those add-ons within 24 hours, but users would have to manually update any add-ons that they had installed from other sources, which would be very inconvenient.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;Instead, we focused on trying to develop a fix which we could provide to all our users with little or no manual intervention.&lt;/p&gt;
&lt;p&gt;After examining a number of approaches, we quickly converged on two major strategies which we pursued in parallel:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;Patching Firefox to change the date which is used to validate the certificate. This would make existing add-ons magically work again, but required shipping a new build of Firefox (a “dot release”).&lt;/li&gt;
&lt;li&gt;Generate a replacement certificate that was still valid and somehow convince Firefox to accept it instead of the existing, expired certificate.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;We weren’t sure that either of these would work, so we decided to pursue them in parallel and deploy the first one that looked like it was going to work. At the end of the day, we ended up deploying the second fix, the new certificate, which I’ll describe in some more detail below.&lt;/p&gt;
&lt;h2&gt;A Replacement Certificate&lt;/h2&gt;
&lt;p&gt;As suggested above, there are two main steps we had to follow here:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;Generate a new, valid, certificate.&lt;/li&gt;
&lt;li&gt;Install it remotely in Firefox.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;In order to understand why this works, you need to know a little more about how Firefox validates add-ons. The add-on itself comes as a bundle of files that includes the certificate chain used to sign it. The result is that the add-on is independently verifiable as long as you know the root certificate, which is configured into Firefox at build time. However, as I said, the intermediate certificate was broken, so the add-on wasn’t actually verifiable.&lt;/p&gt;
&lt;p&gt;However, it turns out that when Firefox tries to validate the add-on, it’s not limited to just using the certificates in the add-on itself. Instead, it tries to build a valid chain of certificates starting at the end-entity certificate and continuing until it gets to the root. The algorithm is complicated, but at a high level, you start with the end-entity certificate and then find a certificate whose subject is equal to the issuer of the end-entity certificate (i.e., the intermediate certificate). In the simple case, that’s just the intermediate that shipped with the add-on, but it could be any certificate that the browser happens to know about. If we can remotely add a new, valid, certificate, then Firefox will try that as well. The figure below shows the situation before and after we install the new certificate.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2019/05/Add-on-blog-post-visual-2-May-7-2019.png&quot;&gt;&lt;img class=&quot;aligncenter wp-image-33451&quot; src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2019/05/Add-on-blog-post-visual-2-May-7-2019-250x169.png&quot; alt=&quot;a diagram showing two workflows, before and after we installed a new valid certificate&quot; width=&quot;519&quot; height=&quot;351&quot; srcset=&quot;https://hacks.mozilla.org/files/2019/05/Add-on-blog-post-visual-2-May-7-2019-250x169.png 250w, https://hacks.mozilla.org/files/2019/05/Add-on-blog-post-visual-2-May-7-2019-768x520.png 768w, https://hacks.mozilla.org/files/2019/05/Add-on-blog-post-visual-2-May-7-2019-500x339.png 500w, https://hacks.mozilla.org/files/2019/05/Add-on-blog-post-visual-2-May-7-2019.png 1384w&quot; sizes=&quot;(max-width: 519px) 100vw, 519px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Once the new certificate is installed, Firefox has two choices for how to validate the certificate chain, use the old invalid certificate (which won’t work) and use the new valid certificate (which will work). An important feature here is that the new certificate has the same subject name and public key as the old certificate, so that its signature on the End-Entity certificate is valid. Fortunately, Firefox is smart enough to try both until it finds a path that works, so the add-on becomes valid again. Note that this is the same logic we use for validating TLS certificates, so it’s relatively well understood code that we were able to leverage.&lt;sup&gt;&lt;a href=&quot;https://hacks.mozilla.org/2019/05/technical-details-on-the-recent-firefox-add-on-outage/#footnote-2&quot;&gt;[2]&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;p&gt;The great thing about this fix is that it doesn’t require us to change any existing add-on. As long as we get the new certificate into Firefox, then even add-ons which are carrying the old certificate will just automatically verify. The tricky bit then becomes getting the new certificate into Firefox, which we need to do automatically and remotely, and then getting Firefox to recheck all the add-ons that may have been disabled.&lt;/p&gt;
&lt;h2&gt;Normandy and the Studies System&lt;/h2&gt;
&lt;p&gt;Ironically, the solution to this problem is a special type of add-on called a system add-on (SAO). In order to let us do research studies, we have developed a system called Normandy which lets us serve SAOs to Firefox users. Those SAOs automatically execute on the user’s browser and while they are usually used for running experiments, they also have extensive access to Firefox internal APIs. Important for this case, they can add new certificates to the certificate database that Firefox uses to verify add-ons.&lt;sup&gt;&lt;a href=&quot;https://hacks.mozilla.org/2019/05/technical-details-on-the-recent-firefox-add-on-outage/#footnote-3&quot;&gt;[3]&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;p&gt;So the fix here is to build a SAO which does two things:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;Install the new certificate we have made.&lt;/li&gt;
&lt;li&gt;Force the browser to re-verify every add-on so that the ones which were disabled become active.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;But wait, you say. Add-ons don’t work so how do we get it to run? Well, we sign it with the new certificate!&lt;/p&gt;
&lt;h2&gt;Putting it all together… and what took so long?&lt;/h2&gt;
&lt;p&gt;OK, so now we’ve got a plan: issue a new certificate to replace the old one, build a system add-on to install it on Firefox, and deploy it via Normandy. Starting from about 6 PM Pacific on Friday May 3, we were shipping the fix in Normandy at 2:44 AM, or after less than 9 hours, and then it took another 6-12 hours before most of our users had it. This is actually quite good from a standing start, but I’ve seen a number of questions on Twitter about why we couldn’t get it done faster. There are a number of steps that were time consuming.&lt;/p&gt;
&lt;p&gt;First, it took a while to issue the new intermediate certificate. As I mentioned above, the Root certificate is in a hardware security module which is stored offline. This is good security practice, as you use the Root very rarely and so you want it to be secure, but it’s obviously somewhat inconvenient if you want to issue a new certificate on an emergency basis. At any rate, one of our engineers had to drive to the secure location where the HSM is stored. Then there were a few false starts where we didn’t issue exactly the right certificate, and each attempt cost an hour or two of testing before we knew exactly what to do.&lt;/p&gt;
&lt;p&gt;Second, developing the system add-on takes some time. It’s conceptually very simple, but even simple programs require taking some care, and we really wanted to make sure we didn’t make things worse. And before we shipped the SAO, we had to test it, and that takes time, especially because it has to be signed. But the signing system was disabled, so we had to find some workarounds for that.&lt;/p&gt;
&lt;p&gt;Finally, once we had the SAO ready to ship, it still takes time to deploy. Firefox clients check for Normandy updates every 6 hours, and of course many clients are offline, so it takes some time for the fix to propagate through the Firefox population. However, at this point we expect that most people have received the update and/or the dot release we did later.&lt;/p&gt;
&lt;h2&gt;Final Steps&lt;/h2&gt;
&lt;p&gt;While the SAO that was deployed with Studies should fix most users, it didn’t get to everyone. In particular, there are a number of types of affected users who will need another approach:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Users who have disabled either Telemetry or Studies.&lt;/li&gt;
&lt;li&gt;Users on Firefox for Android (Fennec), where we don’t have Studies.&lt;/li&gt;
&lt;li&gt;Users of downstream builds of Firefox ESR that don’t opt-in to&lt;br/&gt;telemetry reporting.&lt;/li&gt;
&lt;li&gt;Users who are behind HTTPS Man-in-the-middle proxies, because our add-on installation systems enforce key pinning for these connections, which proxies interfere with.&lt;/li&gt;
&lt;li&gt;Users of very old builds of Firefox which the Studies system can’t reach.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;We can’t really do anything about the last group — they should update to a new version of Firefox anyway because older versions typically have quite serious unfixed security vulnerabilities. We know that some people have stayed on older versions of Firefox because they want to run old-style add-ons, but many of these now work with newer versions of Firefox. For the other groups we have developed a patch to Firefox that will install the new certificate once people update. This was released as a “dot release” so people will get it — and probably have already — through the ordinary update channel. If you have a downstream build, you’ll need to wait for your build maintainer to update.&lt;/p&gt;
&lt;p&gt;We recognize that none of this is perfect. In particular, in some cases, users lost data associated with their add-ons (an example here is the &lt;a href=&quot;https://bugzilla.mozilla.org/show_bug.cgi?id=1549204&quot;&gt;“multi-account containers” add-on&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;We were unable to develop a fix that would avoid this side effect, but we believe this is the best approach for the most users in the short term. Long term, we will be looking at better architectural approaches for dealing with this kind of issue.&lt;/p&gt;
&lt;h2&gt;Lessons&lt;/h2&gt;
&lt;p&gt;First, I want to say that the team here did amazing work: they built and shipped a fix in less than 12 hours from the initial report. As someone who sat in the meeting where it happened, I can say that people were working incredibly hard in a tough situation and that very little time was wasted.&lt;/p&gt;
&lt;p&gt;With that said, obviously this isn’t an ideal situation and it shouldn’t have happened in the first place. We clearly need to adjust our processes both to make this and similar incidents it less likely to happen and to make them easier to fix.&lt;/p&gt;
&lt;p&gt;We’ll be running a formal post-mortem next week and will publish the list of changes we intend to make, but in the meantime here are my initial thoughts about what we need to do. First, we should have a much better way of tracking the status of everything in Firefox that is a potential time bomb and making sure that we don’t find ourselves in a situation where one goes off unexpectedly. We’re still working out the details here, but at minimum we need to inventory everything of this nature.&lt;/p&gt;
&lt;p&gt;Second, we need a mechanism to be able to quickly push updates to our users even when — &lt;em&gt;especially when&lt;/em&gt; — everything else is down.  It was great that we are able to use the Studies system, but it was also an imperfect tool that we pressed into service, and that had some undesirable side effects. In particular, we know that many users have auto-updates enabled but would prefer not to participate in Studies and that’s a reasonable preference (true story: I had it off as well!) but at the same time we need to be able to push updates to our users; whatever the internal technical mechanisms, users should be able to opt-in to updates (including hot-fixes) but opt out of everything else. Additionally, the update channel should be more responsive than what we have today. Even on Monday, we still had some users who hadn’t picked up either the hotfix or the dot release, which clearly isn’t ideal. There’s been some work on this problem already, but this incident shows just how important it is.&lt;/p&gt;
&lt;p&gt;Finally, we’ll be looking more generally at our add-on security architecture to make sure that it’s enforcing the right security properties at the least risk of breakage.&lt;/p&gt;
&lt;p&gt;We’ll be following up next week with the results of a more thorough post-mortem, but in the meantime, I’ll be happy to answer questions by email at ekr-blog@mozilla.com.&lt;/p&gt;

&lt;p&gt;&lt;small&gt;&lt;a name=&quot;footnote-1&quot;&gt;[1]&lt;/a&gt; A few very old add-ons were signed with a different intermediate.&lt;/small&gt;&lt;/p&gt;
&lt;p&gt;&lt;small&gt;&lt;a name=&quot;footnote-2&quot;&gt;[2]&lt;/a&gt; Readers who are familiar with the WebPKI will recognize that this is also the way that cross-certification works.&lt;/small&gt;&lt;br/&gt;&lt;small&gt;&lt;a name=&quot;footnote-3&quot;&gt;[3]&lt;/a&gt; Technical note: we aren’t adding the certificate with any special privileges; it gets its authority by being signed for the root. We’re just adding it to the pool of certificates which can be used by Firefox. So, it’s not like we are adding a new privileged certificate to Firefox.&lt;/small&gt;&lt;/p&gt;
&lt;section class=&quot;about&quot; readability=&quot;2.2857142857143&quot;&gt;
&lt;p&gt;Eric is CTO of the Firefox team at Mozilla.&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;url&quot; href=&quot;https://hacks.mozilla.org/author/ekrmozilla-com/&quot;&gt;More articles by Eric Rescorla…&lt;/a&gt;&lt;/p&gt;
&lt;/section&gt;</description>
<pubDate>Thu, 09 May 2019 20:19:40 +0000</pubDate>
<dc:creator>headalgorithm</dc:creator>
<og:url>https://hacks.mozilla.org/2019/05/technical-details-on-the-recent-firefox-add-on-outage</og:url>
<og:title>Technical Details on the Recent Firefox Add-on Outage – Mozilla Hacks - the Web developer blog</og:title>
<og:description>Recently, Firefox had an incident in which most add-ons stopped working. This was due to an error on our end: we let one of the certificates used to sign add-ons ...</og:description>
<og:image>https://hacks.mozilla.org/files/2019/05/Add-on-blog-post-visual-2-May-7-2019.png</og:image>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://hacks.mozilla.org/2019/05/technical-details-on-the-recent-firefox-add-on-outage/</dc:identifier>
</item>
<item>
<title>Why are 2D vector graphics so much harder than 3D?</title>
<link>https://blog.mecheye.net/2019/05/why-is-2d-graphics-is-harder-than-3d-graphics/</link>
<guid isPermaLink="true" >https://blog.mecheye.net/2019/05/why-is-2d-graphics-is-harder-than-3d-graphics/</guid>
<description>&lt;p&gt;There’s a lot of fantastic research into 2D graphics rendering these days. Petr Kobalicek and Fabian Yzerman have been working on &lt;a href=&quot;https://blend2d.com/&quot;&gt;Blend2D&lt;/a&gt;, one of the fastest and most accurate CPU rasterizers on the market, with a novel JIT approach. Patrick Walton of Mozilla has explored not just one, but &lt;a href=&quot;https://github.com/pcwalton/pathfinder/wiki/Related-approaches&quot;&gt;three separate approaches&lt;/a&gt; in Pathfinder, culminating in now Pathfinder V3. Raph Linus has built a &lt;a href=&quot;https://github.com/linebender/piet-metal&quot;&gt;compute-based pipeline&lt;/a&gt; based on Gan et al’s ahead-of-its-time &lt;a href=&quot;http://w3.impa.br/~diego/projects/GanEtAl14/&quot;&gt;2014 paper on vector textures&lt;/a&gt;. Signed distance fields seem to be getting some further development from both &lt;a href=&quot;https://twitter.com/adamjsimmons/status/730911372532322304&quot;&gt;Adam Simmons&lt;/a&gt; and &lt;a href=&quot;https://www.merl.com/publications/docs/TR2000-15.pdf&quot;&gt;Sarah Frisken&lt;/a&gt; independently.&lt;/p&gt;
&lt;p&gt;One might wonder: why is there so much commotion about 2D? It seriously can’t be that much harder than 3D, right? 3D is a whole other dimension! Real-time raytracing is around the corner, with accurate lighting and and yet we can’t manage dinky 2D graphics with solid colors?&lt;/p&gt;
&lt;p&gt;To those not well-versed in the details of the modern GPU, it’s a very surprising conclusion! But 2D graphics has plenty of unique constraints that make it a difficult problem to solve, and one that doesn’t lend itself well to parallel approaches. Let’s take a stroll down history lane and trace the path that led us here in the first place, shall we?&lt;/p&gt;
&lt;h2&gt;The rise of PostScript&lt;/h2&gt;
&lt;p&gt;In the beginning, there was the plotter. The first graphics devices to interact with computers were &lt;a href=&quot;http://www.hpmuseum.net/display_item.php?hw=82&quot;&gt;“plotters”&lt;/a&gt;, which had one or multiple pens and an arm that could move over the paper. Things were drawn by &lt;a href=&quot;https://www.youtube.com/watch?v=zyp68emXMZM&quot;&gt;submitting a “pen-down” command, moving the arm in some unique way, possibly curved, and then submitting “pen-up”&lt;/a&gt;. HP, manufacturer of some of the earliest plotter printers, used a variant of BASIC called “AGL” on the host computer, which then would send commands to the plotter peripheral itself in a another language like &lt;a href=&quot;https://en.wikipedia.org/wiki/HP-GL&quot;&gt;HP-GL&lt;/a&gt;. During the 1970s, we saw the rise of affordable graphics terminals, starting with the &lt;a href=&quot;https://en.wikipedia.org/wiki/Tektronix_4010&quot;&gt;Tektronix 4010&lt;/a&gt;. It has a CRT for its display, but don’t be fooled: it’s &lt;em&gt;not&lt;/em&gt; a pixel display. Tektronix came from the analog oscilloscope industry, and these machines work by &lt;a href=&quot;https://www.youtube.com/watch?v=tpD1QXvtlcg&quot;&gt;driving the electron beam in a certain path&lt;/a&gt;, not in a grid-like order. As such, the Tektronix 4010 didn’t have pixel output. Instead, you sent commands to it with &lt;a href=&quot;http://vt100.net/docs/vt3xx-gp/chapter13.html#S13.14&quot;&gt;a simple graphing mode&lt;/a&gt; that could draw lines but, again, in a pen-up pen-down fashion.&lt;/p&gt;
&lt;p&gt;Like a lot of other inventions, this all changed at Xerox PARC. Researchers there were starting to develop a new kind of printer, one that was more computationally expressive than what was seen in plotters. This new printer was based on a small, stack-based Turing-complete language called Forth, and they named it… the &lt;a href=&quot;https://en.wikipedia.org/wiki/Interpress&quot;&gt;Interpress&lt;/a&gt;! Xerox, obviously, was unable to sell it, so the inventors jumped ship and founded a small, scrappy startup named “Adobe”. They took Interpress with them and tweaked it until was no longer recognizable as Interpress, and they renamed it PostScript. Besides the cute, Turing-complete stack-language language it comes with to calculate its shapes, the original &lt;a href=&quot;http://www.adobe.com/content/dam/acom/en/devnet/actionscript/articles/PLRM.pdf&quot;&gt;PostScript Language Reference&lt;/a&gt; marks up an Imaging Model in Chapter 4, near-identical to the APIs we widely see today. Example 4.1 of the manual has a code example which can be translated to HTML5 &amp;lt;canvas&amp;gt; nearly line-by-line.&lt;/p&gt;
&lt;pre class=&quot;brush: plain; title: ; notranslate&quot; title=&quot;&quot;&gt;
/box {                  function box() {
    newpath                 ctx.beginPath();
    0 0 moveto              ctx.moveTo(0, 0);
    0 1 lineto              ctx.lineTo(0, 1);
    1 1 lineto              ctx.lineTo(1, 1);
    1 0 lineto              ctx.lineTo(1, 0);
    closepath               ctx.closePath();
} def                   }
                        
gsave                   ctx.save();
72 72 scale             ctx.scale(72, 72);
box fill                box(); ctx.fill();
2 2 translate           ctx.translate(2, 2);
box fill                box(); ctx.fill();
grestore                ctx.restore();
&lt;/pre&gt;
&lt;p&gt;This is not a coincidence.&lt;/p&gt;
&lt;p&gt;Apple’s Steve Jobs had met the Interpress engineers on his visit to PARC. Jobs thought that the printing business would be lucrative, and tried to simply buy Adobe at birth. Instead, Adobe countered and eventually sold a five-year license for PostScript to Apple. The third pillar in Jobs’s printing plan was funding a small startup, Aldus, which was making a WSYWIG app to create PostScript documents, “PageMaker”. In early 1985, Apple released the first PostScript-compliant printer, the Apple LaserWriter. The combination of the point-and-click Macintosh, PageMaker, and the LaserWriter singlehandedly turned the printing industry on its head, giving way to “desktop publishing” and solidifying PostScript its place in history. The main competition, Hewlett-Packward, would eventually license PostScript for its competing LaserJet series of printers in 1991, after consumer pressure.&lt;/p&gt;
&lt;p&gt;PostScript slowly moved from being a printer control language to a file format in and of itself. Clever programmers noticed the underlying PostScript sent to the printers, and started writing PostScript documents by hand, introducing charts and graphs and art to their documents, with the PostScript evaluated for on-screen display. Demand sprung up for graphics outside of the printer! Adobe noticed, and quickly rushed out the &lt;a href=&quot;https://en.wikipedia.org/wiki/Encapsulated_PostScript&quot;&gt;Encapsulated PostScript&lt;/a&gt; format, which was nothing more than a few specially-formatted PostScript comments to give metadata about the size of the image, and restrictions about using printer-centric commands like “page feed”. That same year, 1985, Adobe started development on “Illustrator”, an application for artists to draw Encapsulated PostScript files through a point-and-click interface. These files could then be placed into Word Processors, which then created… PostScript documents which were sent to PostScript printers. The whole world was PostScript, and Adobe couldn’t be happier. Microsoft, while working on Windows 95, wanted to create its own graphics API for developers, and a primary goal was making it compatible with existing printers so the graphics could be sent to printers as easily as a screen. This API was eventually released as &lt;a href=&quot;https://msdn.microsoft.com/en-us/library/windows/desktop/dd145203(v=vs.85).aspx&quot;&gt;GDI&lt;/a&gt;, a core component used by every engineer during Windows’s meteoric rise to popularity in the 90s. Generations of programmers developing for the Windows platform started to unknowingly equate “2D vector graphics” with the PostScript imaging model, cementing its status as &lt;em&gt;the&lt;/em&gt; 2D imaging model.&lt;/p&gt;
&lt;p&gt;The only major problem with PostScript was its Turing-completeness — viewing page 86 of a document means first running the script for pages 1-85. And that could be slow. Adobe caught wind of this user complaint, and decided to create a new document format that didn’t have these restrictions, called the “Portable Document Format”, or “PDF” for short. It threw out the programming language — but the graphics technology stayed the same. A quote from the &lt;a href=&quot;http://www.adobe.com/content/dam/acom/en/devnet/acrobat/pdfs/pdf_reference_1-7.pdf#page=34&quot;&gt;PDF specification, Chapter 2.1, “Imaging Model”&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;At the heart of PDF is its ability to describe the appearance of sophisticated graphics and typography. This ability is achieved through the use of the &lt;em&gt;Adobe imaging model&lt;/em&gt;, the same high-level, device-independent representation used in the PostScript page description language.&lt;/p&gt;
&lt;/blockquote&gt;
By the time the W3C wanted to develop a 2D graphics markup language for the web, Adobe championed the XML-based &lt;a href=&quot;https://www.w3.org/TR/1998/NOTE-PGML-19980410&quot;&gt;PGML&lt;/a&gt;, which had the PostScript graphics model front and center.
&lt;blockquote&gt;
&lt;p&gt;PGML should encompass the PDF/PostScript imaging model to guarantee a 2D scalable graphics capability that satisfies the needs of both both casual users and graphics professionals.&lt;/p&gt;
&lt;/blockquote&gt;
Microsoft’s competing format, &lt;a href=&quot;https://www.w3.org/TR/NOTE-VML&quot;&gt;VML&lt;/a&gt;, was based on GDI, which as we know was based on PostScript. The two competing proposals, both still effectively PostScript, were combined to make up W3C’s “Scalable Vector Graphics” (“SVG”) technology we know and love today.
&lt;p&gt;Even though it’s old, let’s not pretend that the innovations PostScript brought to the world are anything less than a technological marvel. Apple’s PostScript printer, the LaserWriter, had a CPU twice as powerful as the Macintosh that was controlling it, just to interpret the PostScript and rasterize the vector paths to points on paper. That might seem excessive, but if you were already buying a fancy printer with a &lt;em&gt;laser&lt;/em&gt; in it, the expensive CPU on the side doesn’t seem so expensive in comparison. In its first incarnation, PostScript invented a fairly sophisticated imaging model, with all the features that we take for granted today. But the most powerful, wowing feature? Fonts. Fonts were, at the time, drawn by hand with ruler and protractor, and cast onto film, to be &lt;a href=&quot;https://en.wikipedia.org/wiki/Phototypesetting&quot;&gt;printed photochemically&lt;/a&gt;. In 1977, Donald Knuth showed the world what could be with his &lt;a href=&quot;https://en.wikipedia.org/wiki/Metafont&quot;&gt;METAFONT&lt;/a&gt; system, introduced together with his typesetting application TeX, but it didn’t catch on. It required the user to describe fonts mathematically, using brushes and curves, which wasn’t a skill that most fontgraphers really wanted to learn. And the fancy curves turned into mush at small sizes: the printers of the time did not have dots small enough, so they tended to bleed and blur into each other. Adobe’s PostScript proposed a novel solution to this: an algorithm to “snap” these paths to the coarser grids that printers had. This is known as “grid-fitting”. To prevent the geometry from getting too distorted, they allowed fonts to specify “hints” about what parts of the geometry were the most important, and how much should be preserved.&lt;/p&gt;
&lt;p&gt;Adobe’s original business model was to sell this font technology to people that make printers, and sell special recreations of fonts, with added hints, to publishers, which is why Adobe, to this day, sells their versions of &lt;a href=&quot;http://www.myfonts.com/fonts/adobe/times/&quot;&gt;Times&lt;/a&gt; and &lt;a href=&quot;http://www.myfonts.com/fonts/adobe/futura/&quot;&gt;Futura&lt;/a&gt;. Adobe can do this, by the way, because fonts, or, more formally, “typefaces”, are one of &lt;a href=&quot;https://www.ecfr.gov/cgi-bin/text-idx?node=se37.1.202_11&quot;&gt;five things explicitly excluded by US Copyright Law&lt;/a&gt;, since they were originally designated as “too plain or utilitarian to be creative works”. What &lt;em&gt;is&lt;/em&gt; sold and copyrighted instead is the &lt;em&gt;digital program&lt;/em&gt; that reproduces the font on the screen. So, to prevent people from copying Adobe’s fonts and adding their own, the &lt;a href=&quot;https://www-cdf.fnal.gov/offline/PostScript/T1_SPEC.PDF&quot;&gt;Type 1 Font&lt;/a&gt; format was originally proprietary to Adobe and contained “font encryption” code. Only Adobe’s PostScript could interpret a Type 1 Font, and only Adobe’s Type 1 Fonts had the custom hinting technology allowing them to be visible at small sizes.&lt;/p&gt;
&lt;p&gt;Grid fitting, by the way, was so universally popular that when Microsoft and Apple were tired of paying licensing fees to Adobe, they invented an alternate method for their font file competitor, &lt;a href=&quot;https://developer.apple.com/fonts/TrueType-Reference-Manual/&quot;&gt;TrueType&lt;/a&gt;. Instead of specifying declarative “hints”, TrueType gives the font author a &lt;a href=&quot;https://developer.apple.com/fonts/TrueType-Reference-Manual/RM03/Chap3.html&quot;&gt;complete Turing-complete stack language&lt;/a&gt; so that the author can control every part of grid-fitting (coincidentally avoiding Adobe’s patents on declarative “hints”). For years, the wars between the Adobe-backed Type 1 and the TrueType raged on, with font foundries being stuck in the middle, having to provide both formats to their users. Eventually, the industry reached a compromise: &lt;a href=&quot;https://www.microsoft.com/en-us/Typography/OpenTypeSpecification.aspx&quot;&gt;OpenType&lt;/a&gt;. But rather than actually decide a winner, they simply plopped both specifications into one file format: Adobe, now in the business of selling Photoshop and Illustrator rather than Type 1 Fonts, removed the encryption bits, gave the format a small amount of spit polish, and released &lt;a href=&quot;http://www.adobe.com/content/dam/Adobe/en/devnet/font/pdfs/5176.CFF.pdf&quot;&gt;CFF&lt;/a&gt; / &lt;a href=&quot;http://www.adobe.com/content/dam/Adobe/en/devnet/font/pdfs/5177.Type2.pdf&quot;&gt;Type 2&lt;/a&gt; fonts, which were grafted into OpenType wholesale as the &lt;a href=&quot;https://www.microsoft.com/typography/otspec/cff.htm&quot;&gt;cff table&lt;/a&gt;. TrueType, on the other hand, got shoved in as &lt;a href=&quot;https://www.microsoft.com/typography/otspec/otff.htm#ttTables&quot;&gt;glyf&lt;/a&gt; and other tables. OpenType, while ugly, seemed to get the job done for users, mostly by war of endurance: just require that all software supports both kinds of fonts, because OpenType requires you to support both kinds of fonts.&lt;/p&gt;
&lt;p&gt;Of course, we’re forced to ask: if PostScript didn’t become popular, what might have happened instead? It’s worth looking at some other alternatives. The previously mentioned METAFONT didn’t use filled paths. Instead, Knuth, in typical Knuth fashion, rigorously defines in his paper &lt;a href=&quot;http://www.math.lsa.umich.edu/~millerpd/docs/501_Winter13/Knuth79.pdf&quot;&gt;Mathematical Typography&lt;/a&gt; the concept of a curve that is “most pleasing”. You specify a number of points, and some algorithm finds the one correct “most pleasing” curve through them. You can stack these paths on top of each other: define such a path as a “pen”, and then “drag the pen” through some other path. Knuth, a computer scientist at heart, managed to introduce recursion to path stroking. Knuth’s thesis student, John Hobby, designed and implemented algorithms for calculating &lt;a href=&quot;http://i.stanford.edu/pub/cstr/reports/cs/tr/85/1047/CS-TR-85-1047.pdf&quot;&gt;the “most pleasing curve”&lt;/a&gt;, &lt;a href=&quot;http://ect.bell-labs.com/who/hobby/thesis.pdf&quot;&gt;the “flattening” of the nesting of paths&lt;/a&gt;, &lt;em&gt;and&lt;/em&gt; &lt;a href=&quot;http://ect.bell-labs.com/who/hobby/87_2-04.pdf&quot;&gt;rasterizing such curves&lt;/a&gt;. For more on METAFONT, curves, and the history of font technology in general, I &lt;em&gt;highly&lt;/em&gt; recommend the detailed reference of &lt;a href=&quot;http://shop.oreilly.com/product/9780596102425.do&quot;&gt;Fonts &amp;amp; Encodings&lt;/a&gt;, and the papers of &lt;a href=&quot;http://ect.bell-labs.com/who/hobby/Publications.shtml&quot;&gt;John D. Hobby&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Thankfully, the renewed interest in 2D graphics research means that Knuth and Hobby’s splines are not entirely forgotten. While definitely arcane and non-traditional, they recently made their way into &lt;a href=&quot;https://bosker.wordpress.com/2013/11/13/beyond-bezier-curves/&quot;&gt;Apple’s iWork Suite&lt;/a&gt; where they are now the default spline type.&lt;/p&gt;
&lt;h2&gt;The rise of triangles&lt;/h2&gt;
&lt;p&gt;Without getting too into the math weeds, at a high-level, we call approaches like Bezier curves and Hobby splines &lt;a href=&quot;https://en.wikipedia.org/wiki/Implicit_curve&quot;&gt;implicit curves&lt;/a&gt;, because they are specified as a mathematical function which generates the curve. They are smooth functions which look good at any resolution and zoom level, which happen to be good traits for a 2D image designed to be scalable.&lt;/p&gt;
&lt;p&gt;2D graphics started and maintained forward momentum around these implicit curves, by near necessity in their use in modelling human letterforms and glyphs. The hardware and software to compute these paths in real-time was expensive, but since the big industry push for vector graphics came from the printing industry, most of the rest of the existing industrial equipment was already plenty more expensive than the laser printer with the fancy CPU.&lt;/p&gt;
&lt;p&gt;3D graphics, however, had a very different route. From the very beginning, the near-universal approach was to use straight-edged polygons, often times manually &lt;a href=&quot;https://www.computerhistory.org/revolution/computer-graphics-music-and-art/15/206/560&quot;&gt;marked up&lt;/a&gt; and &lt;a href=&quot;https://www.computerhistory.org/revolution/computer-graphics-music-and-art/15/206/556&quot;&gt;entered into the computer by hand&lt;/a&gt;. Not all approaches, though. The 3D equivalent of an implicit curve is an &lt;a href=&quot;https://en.wikipedia.org/wiki/Implicit_surface&quot;&gt;implicit surface&lt;/a&gt;, made up of basic geometric primitives like spheres, cylinders and boxes. A perfect sphere with infinite resolution can be represented with a simple equation, so for organic geometry, it was a clear winner over &lt;a href=&quot;https://www.youtube.com/watch?v=lAD6Obi7Cag&quot;&gt;the polygon look of early 3D&lt;/a&gt;. &lt;a href=&quot;https://en.wikipedia.org/wiki/Mathematical_Applications_Group&quot;&gt;MAGI&lt;/a&gt; was one of a few companies pushing the limits of implicit surfaces, and combined with some clever artistic use of procedural textures, they won the contract with Disney to design the lightcycle sequences for the 1982 film Tron. Unfortunately, though, that approach quickly fell by the wayside. The number of triangles you could render in a scene was skyrocketing due to research into problems like “hidden surface removal” and faster CPUs, and for complex shapes, it was a lot easier for artists to think about polygons and vertices they could click and drag, rather than use combinations of boxes and cylinders to get the look they wanted.&lt;/p&gt;
&lt;p&gt;This is not to say that implicit surfaces weren’t used in the modelling &lt;em&gt;process&lt;/em&gt;. Tools like &lt;a href=&quot;https://en.wikipedia.org/wiki/Catmull%E2%80%93Clark_subdivision_surface&quot;&gt;Catmull-Clark subdivision&lt;/a&gt; were a ubiquitous industry standard by the early 80s, allowing artists to put a smooth, organic look on otherwise simple geometry. Though Catmull-Clark wasn’t even framed as an “implicit surface” that can be computed with an equation until the early 2000s. Back then, it was seen as an iterative algorithm: a way to subdivide polygons into even more polygons.&lt;/p&gt;
&lt;p&gt;Triangles reined supreme, and so followed the tools used to make 3D content. Up-and-coming artists for video games and CGI films were trained exclusively on polygon mesh modellers like Maya, 3DS Max and Softimage. As the “3D graphics accelerator” came onto the scene in late-80s, it was designed to accelerate the existing content out there: triangles. While some early GPU designs like the &lt;a href=&quot;https://en.wikipedia.org/wiki/NV1&quot;&gt;NVIDIA NV1&lt;/a&gt; had some limited hardware-accelerated curve support, it was buggy and quickly dropped from the product line.&lt;/p&gt;
&lt;p&gt;This culture mostly extends into what we see today. The dominant 2D imaging model, PostScript, started with a product that could render curves in “real-time”, while the 3D industry ignored curves as they were difficult to make work, relying on offline solutions to pre-transform curved surfaces into triangles.&lt;/p&gt;
&lt;h2&gt;Implicit surfaces rise from the dead&lt;/h2&gt;
&lt;p&gt;But why were implicit curves able to be done in real-time on 2D on a printer in the 80s, and yet 3D implicit curves are still too buggy near the early ’00s? Well, one answer is that Catmull-Clark is a lot more complicated than a Bezier curve. Bezier curves do exist in 3D, where they are known as B-splines, and they are computable, but they have the drawback that they limit the ways you can connect your mesh together. Surfaces like Catmull-Clark and NURBS allow for arbitrarily connected meshes to empower artists, but this can lead to polynomials greater than the fourth degree, which &lt;a href=&quot;https://en.wikipedia.org/wiki/Abel%E2%80%93Ruffini_theorem&quot;&gt;tend to have no closed-form solution&lt;/a&gt;. Instead, what you get are approximations based on subdividing polygons, like what happens in Pixar’s &lt;a href=&quot;http://graphics.pixar.com/opensubdiv/docs/intro.html&quot;&gt;OpenSubdiv&lt;/a&gt;. If someone ever finds an analytic closed-form solution to root-finding either Catmull-Clark or NURBS, Autodesk will pay a lot of money for it, for certain. Compared to these, triangles seem a lot nicer: simply compute &lt;a href=&quot;https://fgiesen.wordpress.com/2013/02/06/the-barycentric-conspirac/&quot;&gt;three linear plane equations&lt;/a&gt; and you have yourself an easy test.&lt;/p&gt;
&lt;p&gt;… but what if we don’t need an exact solution? That’s exactly what graphics developer of incredible infamy &lt;a href=&quot;https://www.iquilezles.org/index.html&quot;&gt;Íñigo Quílez&lt;/a&gt; asked when doing research into implicit surfaces again. The solution? Signed distance fields. Instead of telling you the exact intersection point of the surface, it tells you how far away you are from a surface. Analoguous to an analytically computed integral vs. Euler integration, if you have the distance to the closest object, you can “march” through the scene, asking how far away you are at any given point and stepping that distance. Such surfaces have seen a brand new life through the demoscene and places like Shadertoy. A twist on the old MAGI approach to modelling brings us incredible gems like Quílez’s &lt;a href=&quot;https://www.shadertoy.com/view/ldd3DX&quot;&gt;Surfer Boy&lt;/a&gt;, calculated in infinite precision like an implicit surface would. You don’t need to find the algebraic roots of Surfer Boy, you just feel it out as you march through.&lt;/p&gt;
&lt;p&gt;The difficulty, of course, is that &lt;em&gt;only&lt;/em&gt; a legitimate genius like Quílez can create Surfer Boy. There’s no existing tooling for signed-distance field geometry, it’s all code. That said, given the exciting resurgence of implicit surfaces for their organic, curved look, there’s now plenty of interest into the technique. MediaMolecule’s PS4 game &lt;a href=&quot;https://www.playstation.com/en-us/games/dreams-ps4/&quot;&gt;Dreams&lt;/a&gt; is a content-creation kit built around combining implicit surfaces, &lt;a href=&quot;http://advances.realtimerendering.com/s2015/AlexEvans_SIGGRAPH-2015-sml.pdf&quot;&gt;requiring them to tear down and reinvent most of traditional graphics in the process&lt;/a&gt;. It’s a promising approach, and the tools are &lt;a href=&quot;https://www.twitch.tv/videos/411848857?t=6h55m34s&quot;&gt;intuitive and fun&lt;/a&gt;. &lt;a href=&quot;https://www.oculus.com/medium&quot;&gt;Oculus Medium&lt;/a&gt; and &lt;a href=&quot;http://on-demand.gputechconf.com/gtc/2017/presentation/s7777-florian-hoenig-a-road-to-3d-for-everyone.pdf&quot;&gt;unbound.io&lt;/a&gt; are also putting good research into the problem. It’s definitely a promising look into what the future of 3D graphics and next-generation tools might look like.&lt;/p&gt;
&lt;p&gt;But some of these approaches are less adaptable to 2D than you might think. Common 3D game scenes tend to have lush materials and textures but low geometry counts, as many critics and &lt;a href=&quot;https://www.youtube.com/watch?v=00gAbgBu8R4&quot;&gt;snake-oil salesman&lt;/a&gt; are quick to point out. This means that we can rely on smaller amounts of anti-aliasing as silhouettes are not as majorly important. Approaches like 4x MSAA might cut the mustard for a lot of games, but for small fonts with solid colors, instead of &lt;a href=&quot;https://magcius.github.io/xplain/article/rast1.html#antialiasing&quot;&gt;16 fixed sample locations&lt;/a&gt;, you would much rather compute &lt;a href=&quot;http://nothings.org/gamedev/rasterize/&quot;&gt;the exact area under the curve&lt;/a&gt; for each pixel, giving you as much resolution as you want.&lt;/p&gt;
&lt;p&gt;Rotating the viewport around in a 3D game has the effect of causing effects similar to &lt;a href=&quot;https://en.wikipedia.org/wiki/Saccadic_masking&quot;&gt;saccadic masking&lt;/a&gt; as your brain re-adjusts to the new view. For a lot of games, this can help hide artifacts in post-processing effects like &lt;a href=&quot;https://twitter.com/CypherSignal/status/793631118209781760&quot;&gt;temporal antialiasing&lt;/a&gt;, which Dreams and unbound.io heavily lean on to get good performance of their scene. Conversely, in a typical 2D scene, we don’t have this luxury of perspective, so attempting to use it will make our glyphs and shapes boil and jitter with those artifacts in full glory. 2D is viewed differently, and the expectations are higher. Stability is important as you zoom, pan, and scroll.&lt;/p&gt;
&lt;p&gt;None of these effects are impossible to implement on a GPU, but they do show a radical departure from “3D” content, with different priorities. Ultimately, 2D graphics rendering is hard because it’s about shapes — accurate letterforms and glyphs — not materials and lighting, which is mostly a solid color. GPUs, through a consequence of history, chose not to focus on real-time implicit geometry like curves, but instead on everything that goes inside them. Maybe in a world where PostScript didn’t win, we would have a 2D imaging model that didn’t have Bezier as a core realtime requirement. And maybe in a world where triangles were replaced with better geometry representations sooner, we would see content creation tools focus on 3D splines, and GPUs that have realtime curves built right into the hardware. It’s always fun to imagine, after all.&lt;/p&gt;
</description>
<pubDate>Thu, 09 May 2019 19:06:18 +0000</pubDate>
<dc:creator>Jasper_</dc:creator>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://blog.mecheye.net/2019/05/why-is-2d-graphics-is-harder-than-3d-graphics/</dc:identifier>
</item>
<item>
<title>We Can Do Better Than SQL</title>
<link>https://edgedb.com/blog/we-can-do-better-than-sql</link>
<guid isPermaLink="true" >https://edgedb.com/blog/we-can-do-better-than-sql</guid>
<description>&lt;p&gt;The questions we often hear are “Why create a new query language?” and “What’s wrong with SQL?”. This post contains answers to both.&lt;/p&gt;&lt;p&gt;Before we begin, let’s overview some of the history of how the relational model came to be, and how SQL was created.&lt;/p&gt;&lt;div id=&quot;a-brief-history-of-the-relational-model-and-sql&quot; readability=&quot;98.866636731028&quot;&gt;
&lt;h2 id=&quot;a-brief-history-of-the-relational-model-and-sql&quot; class=&quot; src-components-header_link----header_link-module---header---1h6HM&quot;&gt;A Brief History of the Relational Model and SQL&lt;/h2&gt;
&lt;p&gt;The relational model was introduced by Edgar F. Codd in a seminal 1970 paper “A Relational Model of Data for Large Shared Data Banks” &lt;span&gt;[&lt;a id=&quot;id1&quot; href=&quot;https://edgedb.com/blog/we-can-do-better-than-sql#fcodd-1970&quot;&gt;4&lt;/a&gt;]&lt;/span&gt;. There, Codd postulated that all data in a database can be represented in terms of sets of tuples, called &lt;em&gt;relations&lt;/em&gt;. Codd also invented a form of first-order predicate logic to describe the database queries: &lt;em&gt;tuple relational calculus&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Codd’s ideas were revolutionary. For the first time, a database, and a universal way to query it, was described in a succinct, consistent mathematical model. This, naturally, created lots of interest in further research and, importantly, into practical implementation of the relational model.&lt;/p&gt;
&lt;p&gt;In 1974 Donald Chamberlin and Raymond Boyce published a paper &lt;span&gt;[&lt;a id=&quot;id2&quot; href=&quot;https://edgedb.com/blog/we-can-do-better-than-sql#fchamberlin-1974&quot;&gt;2&lt;/a&gt;]&lt;/span&gt;, which introduced “a set of simple operations on tabular structures, […] of equivalent power to the first order predicate calculus”. Chamberlin and Boyce felt that the formal relational query languages proposed at the time were too hard to understand for “users without formal training in mathematics or computer programming” and thought that the “predominant use of the language would be for ad-hoc queries” &lt;span&gt;[&lt;a id=&quot;id3&quot; href=&quot;https://edgedb.com/blog/we-can-do-better-than-sql#fchamberlin-2012&quot;&gt;3&lt;/a&gt;]&lt;/span&gt;. Initially, the authors did not consider SQL to be a “serious” language. Nonetheless, the great interest in the commercial application of the relational model had pushed IBM to quickly adopt and productize SQL, which was also picked up by their quickly-rising competitor–Oracle.&lt;/p&gt;
&lt;p&gt;IBM had an overwhelmingly large influence over the tech market at the time, so SQL became a de facto standard for relational databases, and then a proper standard with the publication of the first ANSI standard in 1989 that essentially circumscribed the most prominent existing implementations of SQL. Subsequent versions of the standard continued to be primarily influenced by the commercial vendors.&lt;/p&gt;
&lt;p&gt;Today, SQL is by far the most widely used database language. But that does not necessarily mean that it represents the best of what we can do. In fact, SQL’s beginnings as a “simple, ad-hoc” language coupled with “design by implementation” from competing vendors had left the language with a baggage of severe issues.&lt;/p&gt;
&lt;/div&gt;&lt;div id=&quot;critique-of-sql&quot; readability=&quot;146.81441737154&quot;&gt;

&lt;p&gt;SQL, especially its earlier versions, was heavily criticized by the experts, including Codd himself &lt;span&gt;[&lt;a id=&quot;id4&quot; href=&quot;https://edgedb.com/blog/we-can-do-better-than-sql#fcodd-1990&quot;&gt;6&lt;/a&gt;]&lt;/span&gt;, as well as C. J. Date, who published a multitude of papers and books on the subject (&lt;span&gt;[&lt;a id=&quot;id5&quot; href=&quot;https://edgedb.com/blog/we-can-do-better-than-sql#fdate-1985&quot;&gt;7&lt;/a&gt;]&lt;/span&gt;, &lt;span&gt;[&lt;a id=&quot;id6&quot; href=&quot;https://edgedb.com/blog/we-can-do-better-than-sql#fdate-1987&quot;&gt;9&lt;/a&gt;]&lt;/span&gt;, &lt;span&gt;[&lt;a id=&quot;id7&quot; href=&quot;https://edgedb.com/blog/we-can-do-better-than-sql#fdate-2009&quot;&gt;10&lt;/a&gt;]&lt;/span&gt;). While many of the early shortcomings were fixed in the later versions of the standard, some of the serious issues had been only further ingrained.&lt;/p&gt;
&lt;p&gt;Some of the complaints here apply to SQL as a whole, while others are specific to a certain implementation. We are primarily using PostgreSQL for the examples.&lt;/p&gt;
&lt;p&gt;SQL’s shortcomings can be grouped into these categories:&lt;/p&gt;
&lt;ul readability=&quot;1.5&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;lack of proper orthogonality — SQL is hard to compose;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;lack of compactness — SQL is a large language;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;lack of consistency — SQL is inconsistent in syntax and semantics;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;poor system cohesion — SQL does not integrate well enough with application languages and protocols.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;src-styles----blog-post-module---rest_section---aDpQC&quot; id=&quot;lack-of-orthogonality&quot; readability=&quot;83&quot;&gt;

&lt;p&gt;Orthogonality in a programming language means that a relatively small set of primitive constructs can be combined in a relatively small number of ways. A language with good orthogonality is smaller, more consistent, and is easier to learn due to there being few exceptions from the overall set of rules. Conversely, bad orthogonality leads to a large language with many exceptions and caveats.&lt;/p&gt;
&lt;p&gt;A good example of orthogonality in a programming language is the ability to substitute an arbitrary part of an expression with a variable, or a function call, without any effect on the final result.&lt;/p&gt;
&lt;p&gt;In SQL, such generic substitution is not possible, since there are &lt;em&gt;two&lt;/em&gt; mutually incompatible kinds of expressions:&lt;/p&gt;
&lt;ul readability=&quot;-0.5&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;A &lt;em&gt;table expression&lt;/em&gt; is a SQL expression that yields a table: &lt;code&gt;SELECT * FROM table&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;A &lt;em&gt;scalar expression&lt;/em&gt; is a SQL expression that yields a single scalar value: &lt;code&gt;SELECT count(*) FROM table&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Table expressions can only be used in a &lt;code&gt;FROM&lt;/code&gt; clause, in a function, or with an operator that specifically expects a table expression as input. What’s worse the scalar and table expressions may have exactly the same syntax, which can be a source of further confusion.&lt;/p&gt;
&lt;p&gt;For example, let’s imagine we needed to list the names of all department heads in a company. This query would do the job:&lt;/p&gt;
&lt;pre class=&quot;src-components-code----code-module---code---1IzoY src-styles----blog-post-module---rest_border_box---2usPO prismjs-light-syntax code-language-sql eql-block-pre src-components-code----code-module---block---aABGx&quot;&gt;
&lt;span class=&quot;src-components-code----code-module---wrapper---3ZlaG&quot;&gt;&lt;span class=&quot;tokens tokens-normal&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; name
&lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; emp
&lt;span class=&quot;token keyword&quot;&gt;WHERE&lt;/span&gt; role &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'dept head'&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;Now let’s say we needed to add this bit to a larger query that extracts information about a department. An intuitive way is to simply add the above as a subquery to the target list of our larger query:&lt;/p&gt;
&lt;pre class=&quot;src-components-code----code-module---code---1IzoY src-styles----blog-post-module---rest_border_box---2usPO prismjs-light-syntax code-language-sql eql-block-pre src-components-code----code-module---block---aABGx&quot;&gt;
&lt;span class=&quot;src-components-code----code-module---wrapper---3ZlaG&quot;&gt;&lt;span class=&quot;tokens tokens-normal&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt;
    dept&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; name &lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; emp
     &lt;span class=&quot;token keyword&quot;&gt;WHERE&lt;/span&gt; role &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'dept head'&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;AND&lt;/span&gt; deptno &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; dept&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;no&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt;
    dept
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;This is legal, but &lt;em&gt;only&lt;/em&gt; if the subquery returns not more than one row. Otherwise, an error would be raised at run time. To account for multiple department heads, we would need to rewrite the query using a join:&lt;/p&gt;
&lt;pre class=&quot;src-components-code----code-module---code---1IzoY src-styles----blog-post-module---rest_border_box---2usPO prismjs-light-syntax code-language-sql eql-block-pre src-components-code----code-module---block---aABGx&quot;&gt;
&lt;span class=&quot;src-components-code----code-module---wrapper---3ZlaG&quot;&gt;&lt;span class=&quot;tokens tokens-normal&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt;
    dept&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
    head&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name
&lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt;
    dept
    &lt;span class=&quot;token keyword&quot;&gt;INNER&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;JOIN&lt;/span&gt; emp &lt;span class=&quot;token keyword&quot;&gt;AS&lt;/span&gt; head
        &lt;span class=&quot;token keyword&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;head&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;deptno &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; dept&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;no&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;AND&lt;/span&gt; head&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;role &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'dept head'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;The difference in structure is large enough to make any sort of source-level query reuse impractical.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;src-styles----blog-post-module---rest_section---aDpQC&quot; id=&quot;lack-of-compactness&quot; readability=&quot;48.952657004831&quot;&gt;

&lt;div class=&quot;src-styles----blog-post-module---blockquote---1B1kK&quot; readability=&quot;33.902017291066&quot;&gt;
&lt;div class=&quot;src-styles----blog-post-module---quote---_LHxm&quot; readability=&quot;37.88379204893&quot;&gt;
&lt;p&gt;Few claim that SQL is an elegant language characterized by orthogonality. Some call it an elephant on clay feet. With each addition, its body grows, and it becomes less stable. SQL standardization is largely the domain of database vendors, not academic researchers without commercial interests or users with user interests. &lt;span&gt;[&lt;a id=&quot;id8&quot; href=&quot;https://edgedb.com/blog/we-can-do-better-than-sql#fatzeni-2013&quot;&gt;1&lt;/a&gt;]&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;src-styles----blog-post-module---attribution---3SQ4F&quot;&gt;
&lt;p&gt;Paolo Atzeni et al.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;SQL is not a small language. At the time of writing the PostgreSQL implementation contains &lt;strong&gt;469 keywords&lt;/strong&gt;. Just part 2 (out of 14) of the SQL:2016 standard has &lt;strong&gt;1732 pages&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;The main reason is that SQL, in line with its original goals, strives to be an English-like language, catered to “non-professionals”. However, with the growth of the language, this verbosity has contributed &lt;em&gt;negatively&lt;/em&gt; to the ability to write and comprehend SQL queries. We learnt this lesson with COBOL, and the world has long since moved on to newer, more succinct programming languages.&lt;/p&gt;
&lt;p&gt;In addition to keyword proliferation, the orthogonality issues discussed above make queries more verbose and harder to read.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;src-styles----blog-post-module---rest_section---aDpQC&quot; id=&quot;lack-of-consistency&quot; readability=&quot;52&quot;&gt;

&lt;p&gt;SQL is arbitrarily inconsistent both in its syntax and semantics. What makes things even worse is that different databases have their own version of SQL, often incompatible with other SQL variants.&lt;/p&gt;
&lt;p&gt;Here are a few examples of entirely different calling conventions in SQL:&lt;/p&gt;
&lt;pre class=&quot;src-components-code----code-module---code---1IzoY src-styles----blog-post-module---rest_border_box---2usPO prismjs-light-syntax code-language-sql eql-block-pre src-components-code----code-module---block---aABGx&quot;&gt;
&lt;span class=&quot;src-components-code----code-module---wrapper---3ZlaG&quot;&gt;&lt;span class=&quot;tokens tokens-normal&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; substring&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'PostgreSQL'&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; substring&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'PostgreSQL'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; 

&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; trim&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;both &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'yxSQLxx'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'xyz'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; extract&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;day&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;timestamp&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'2001-02-16 20:38:40'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;There are two syntaxes that specify the ordering of the input set in an aggregate function:&lt;/p&gt;
&lt;pre class=&quot;src-components-code----code-module---code---1IzoY src-styles----blog-post-module---rest_border_box---2usPO prismjs-light-syntax code-language-sql eql-block-pre src-components-code----code-module---block---aABGx&quot;&gt;
&lt;span class=&quot;src-components-code----code-module---wrapper---3ZlaG&quot;&gt;&lt;span class=&quot;tokens tokens-normal&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; array_agg&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;foo &lt;span class=&quot;token keyword&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;BY&lt;/span&gt; bar&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;and&lt;/p&gt;
&lt;pre class=&quot;src-components-code----code-module---code---1IzoY src-styles----blog-post-module---rest_border_box---2usPO prismjs-light-syntax code-language-sql eql-block-pre src-components-code----code-module---block---aABGx&quot;&gt;
&lt;span class=&quot;src-components-code----code-module---wrapper---3ZlaG&quot;&gt;&lt;span class=&quot;tokens tokens-normal&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; rank&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;foo&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;WITHIN&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;GROUP&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;BY&lt;/span&gt; bar&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;The list of inconsistencies like this does not end here and can be continued, but that’s beyond the scope of this blog post.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;src-styles----blog-post-module---rest_section---aDpQC&quot; id=&quot;null-a-bag-of-surprises&quot; readability=&quot;131.83505154639&quot;&gt;

&lt;div class=&quot;src-styles----blog-post-module---blockquote---1B1kK&quot; readability=&quot;32.873563218391&quot;&gt;
&lt;div class=&quot;src-styles----blog-post-module---quote---_LHxm&quot; readability=&quot;35.854251012146&quot;&gt;
&lt;p&gt;In some cases of inadequate handling of missing information, the problem is incorrectly perceived to be a problem of the relational model. In fact, the problem stems from the inadequacies of SQL and its non-conformance to the relational model. &lt;span&gt;[&lt;a id=&quot;id9&quot; href=&quot;https://edgedb.com/blog/we-can-do-better-than-sql#fcodd-1990&quot;&gt;6&lt;/a&gt;]&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;src-styles----blog-post-module---attribution---3SQ4F&quot;&gt;
&lt;p&gt;Edgar J. Codd&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;It has been extensively argued that &lt;code&gt;NULL&lt;/code&gt; is the biggest misfeature of SQL (&lt;span&gt;[&lt;a id=&quot;id10&quot; href=&quot;https://edgedb.com/blog/we-can-do-better-than-sql#fcodd-1987&quot;&gt;5&lt;/a&gt;]&lt;/span&gt;, &lt;span&gt;[&lt;a id=&quot;id11&quot; href=&quot;https://edgedb.com/blog/we-can-do-better-than-sql#fdate-1986&quot;&gt;8&lt;/a&gt;]&lt;/span&gt;, &lt;span&gt;[&lt;a id=&quot;id12&quot; href=&quot;https://edgedb.com/blog/we-can-do-better-than-sql#fdate-1987&quot;&gt;9&lt;/a&gt;]&lt;/span&gt;). In fact, the handling of &lt;code&gt;NULL&lt;/code&gt; in contemporary SQL implementations is so surprising, inconsistent, and dangerous that this topic deserves a separate section.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;NULL&lt;/code&gt; is so special that it’s not equal to anything, including itself:&lt;/p&gt;
&lt;pre class=&quot;src-components-code----code-module---code---1IzoY src-styles----blog-post-module---rest_border_box---2usPO prismjs-light-syntax eql-block-pre src-components-code----code-module---block---aABGx&quot;&gt;
&lt;span class=&quot;src-components-code----code-module---wrapper---3ZlaG&quot;&gt;&lt;span class=&quot;tokens tokens-normal&quot;&gt;postgres=# select NULL = NULL;
 ?column?
----------

(1 row)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;In fact, almost any operation on &lt;code&gt;NULL&lt;/code&gt; will return &lt;code&gt;NULL&lt;/code&gt; and the effect may be very subtle:&lt;/p&gt;
&lt;pre class=&quot;src-components-code----code-module---code---1IzoY src-styles----blog-post-module---rest_border_box---2usPO prismjs-light-syntax eql-block-pre src-components-code----code-module---block---aABGx&quot;&gt;
&lt;span class=&quot;src-components-code----code-module---wrapper---3ZlaG&quot;&gt;&lt;span class=&quot;tokens tokens-normal&quot;&gt;postgres=# CREATE TABLE x (a int, b text);
CREATE TABLE
postgres=# INSERT INTO x(a, b)
           VALUES (1, 'one'), (2, 'two'), (NULL, 'three')
           RETURNING a, b;
 a |   b
---+-------
 1 | one
 2 | two
   | three
(3 rows)

postgres=# SELECT * FROM x WHERE a NOT IN (1, null);
 a | b
---+---
(0 rows)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;But, in some cases &lt;code&gt;NULL&lt;/code&gt; &lt;em&gt;is&lt;/em&gt; equal to itself, such as in &lt;code&gt;DISTINCT&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&quot;src-components-code----code-module---code---1IzoY src-styles----blog-post-module---rest_border_box---2usPO prismjs-light-syntax eql-block-pre src-components-code----code-module---block---aABGx&quot;&gt;
&lt;span class=&quot;src-components-code----code-module---wrapper---3ZlaG&quot;&gt;&lt;span class=&quot;tokens tokens-normal&quot;&gt;elvis=# SELECT DISTINCT *
        FROM (VALUES (1), (NULL), (NULL)) AS q;
 column1
---------

       1
(2 rows)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;or &lt;code&gt;UNION&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&quot;src-components-code----code-module---code---1IzoY src-styles----blog-post-module---rest_border_box---2usPO prismjs-light-syntax eql-block-pre src-components-code----code-module---block---aABGx&quot;&gt;
&lt;span class=&quot;src-components-code----code-module---wrapper---3ZlaG&quot;&gt;&lt;span class=&quot;tokens tokens-normal&quot;&gt;elvis=# VALUES (1), (NULL) UNION VALUES (2), (NULL);
 column1
---------

       1
       2
(3 rows)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;Much of the traditional logic and boolean algebra rules cannot be safely applied to SQL boolean expressions in the presence of &lt;code&gt;NULL&lt;/code&gt;. For example, the law of excluded middle, &lt;em&gt;p&lt;/em&gt; OR NOT &lt;em&gt;p&lt;/em&gt;, does not evaluate to true if &lt;em&gt;p&lt;/em&gt; is &lt;code&gt;NULL&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&quot;src-components-code----code-module---code---1IzoY src-styles----blog-post-module---rest_border_box---2usPO prismjs-light-syntax eql-block-pre src-components-code----code-module---block---aABGx&quot;&gt;
&lt;span class=&quot;src-components-code----code-module---wrapper---3ZlaG&quot;&gt;&lt;span class=&quot;tokens tokens-normal&quot;&gt;postgres=# SELECT count(*) FROM x WHERE a = 1 OR a != 1;
 count
-------
     2
(1 row)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;Worse yet:&lt;/p&gt;
&lt;pre class=&quot;src-components-code----code-module---code---1IzoY src-styles----blog-post-module---rest_border_box---2usPO prismjs-light-syntax eql-block-pre src-components-code----code-module---block---aABGx&quot;&gt;
&lt;span class=&quot;src-components-code----code-module---wrapper---3ZlaG&quot;&gt;&lt;span class=&quot;tokens tokens-normal&quot;&gt;postgres=# SELECT
               b,
               CASE WHEN a = 1
               THEN 'one'
               ELSE 'not one'
               END
           FROM x;
   b   |  case
-------+---------
 one   | one
 two   | not one
 three | not one
(3 rows)

postgres=# SELECT
               b,
               CASE WHEN a != 1
               THEN 'not one'
               ELSE 'one'
               END
           FROM x;
   b   |  case
-------+---------
 one   | one
 two   | not one
 three | one
(3 rows)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;The the row containing &lt;code&gt;b=3&lt;/code&gt; is classified either as &lt;code&gt;'one'&lt;/code&gt; or &lt;code&gt;'not one'&lt;/code&gt; even though the construction of the &lt;code&gt;CASE&lt;/code&gt; expression appears equivalent in both cases.&lt;/p&gt;
&lt;p&gt;Rows containing &lt;code&gt;NULL&lt;/code&gt; sometimes get counted, and sometimes not:&lt;/p&gt;
&lt;pre class=&quot;src-components-code----code-module---code---1IzoY src-styles----blog-post-module---rest_border_box---2usPO prismjs-light-syntax eql-block-pre src-components-code----code-module---block---aABGx&quot;&gt;
&lt;span class=&quot;src-components-code----code-module---wrapper---3ZlaG&quot;&gt;&lt;span class=&quot;tokens tokens-normal&quot;&gt;postgres=# SELECT count(a) FROM x;
 count
-------
     2
(1 row)

postgres=# SELECT cardinality(array_agg(a)) FROM x;
 cardinality
-------------
           3
(1 row)

postgres=# SELECT count(*) FROM x;
 count
-------
     3
(1 row)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;Rows containing &lt;code&gt;NULL&lt;/code&gt; cannot be compared:&lt;/p&gt;
&lt;pre class=&quot;src-components-code----code-module---code---1IzoY src-styles----blog-post-module---rest_border_box---2usPO prismjs-light-syntax eql-block-pre src-components-code----code-module---block---aABGx&quot;&gt;
&lt;span class=&quot;src-components-code----code-module---wrapper---3ZlaG&quot;&gt;&lt;span class=&quot;tokens tokens-normal&quot;&gt;postgres=# SELECT (NULL, 1) = (NULL, 1);
 ?column?
----------

(1 row)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;And even &lt;code&gt;IS NULL&lt;/code&gt; doesn’t work:&lt;/p&gt;
&lt;pre class=&quot;src-components-code----code-module---code---1IzoY src-styles----blog-post-module---rest_border_box---2usPO prismjs-light-syntax eql-block-pre src-components-code----code-module---block---aABGx&quot;&gt;
&lt;span class=&quot;src-components-code----code-module---wrapper---3ZlaG&quot;&gt;&lt;span class=&quot;tokens tokens-normal&quot;&gt;postgres=# SELECT (NULL, 1) IS NULL;
 ?column?
----------
 f
(1 row)

postgres=# SELECT (NULL, 1) IS NOT NULL;
 ?column?
----------
 f
(1 row)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;What’s worse, the databases often uses &lt;code&gt;NULL&lt;/code&gt; to indicate an error condition, so your query might contain &lt;code&gt;NULLs&lt;/code&gt; even if you don’t expect them:&lt;/p&gt;
&lt;pre class=&quot;src-components-code----code-module---code---1IzoY src-styles----blog-post-module---rest_border_box---2usPO prismjs-light-syntax eql-block-pre src-components-code----code-module---block---aABGx&quot;&gt;
&lt;span class=&quot;src-components-code----code-module---wrapper---3ZlaG&quot;&gt;&lt;span class=&quot;tokens tokens-normal&quot;&gt;postgres=# SELECT (ARRAY[1, 2])[3];
 array
-------

(1 row)

postgres=# SELECT to_char(timestamp '2001-02-16 20:38:40', '');
 to_char
---------

(1 row)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;In PostgreSQL division by zero is an exception, whereas MySQL simply returns &lt;code&gt;NULL&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&quot;src-components-code----code-module---code---1IzoY src-styles----blog-post-module---rest_border_box---2usPO prismjs-light-syntax eql-block-pre src-components-code----code-module---block---aABGx&quot;&gt;
&lt;span class=&quot;src-components-code----code-module---wrapper---3ZlaG&quot;&gt;&lt;span class=&quot;tokens tokens-normal&quot;&gt;mysql&amp;gt; SELECT 1 / 0;
+-------+
| 1 / 0 |
+-------+
|  NULL |
+-------+
1 row in set, 1 warning (0.00 sec)&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;There are many more cases like these, and there is no consistency in a single SQL implementation, let alone across all implementations.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div id=&quot;why-does-all-this-matter&quot; readability=&quot;60&quot;&gt;

&lt;p&gt;OK, so we have highlighted the shortcomings of SQL. Why do they matter? It’s all about &lt;em&gt;ergonomics&lt;/em&gt;. Orthogonality, compactness, and consistency are all &lt;em&gt;essential&lt;/em&gt; traits of a programming language that is easy to learn and use effectively on every level of expertise, team size, and project complexity.&lt;/p&gt;
&lt;p&gt;We have become accustomed to a constant improvement and reimagination of programming languages. Swift, Rust, Kotlin, Go, just to name a few, are great examples in the advancement of engineer ergonomics and productivity. But SQL, often hidden behind layers of ORMs and frameworks, is still very much the dominant data language.&lt;/p&gt;
&lt;p&gt;The NoSQL movement was born, in part, out of the frustration with the perceived stagnation and inadequacy of SQL databases. Unfortunately, in the pursuit of ditching SQL, the NoSQL approaches also abandoned the relational model and other &lt;em&gt;good&lt;/em&gt; parts of RDBMSes.&lt;/p&gt;
&lt;/div&gt;&lt;div id=&quot;edgeql-query-language-evolution&quot; readability=&quot;83.896276595745&quot;&gt;

&lt;p&gt;The relational model is still the most generally applicable and effective method of representing data. The concept of SQL as a declarative, storage-neutral query language is powerful and versatile. We don’t need to abandon either. What we &lt;em&gt;do&lt;/em&gt; need is a “better SQL”: a query language that affords more power to its users, but that is also simpler and more consistent.&lt;/p&gt;
&lt;p&gt;The is exactly what we are working hard to achieve with &lt;strong&gt;EdgeQL&lt;/strong&gt;. We spent years of research and development, focusing on usability and performance without compromising correctness. In our &lt;a href=&quot;https://edgedb.com/blog/edgedb-1-0-alpha-1/&quot;&gt;earlier blog post&lt;/a&gt; we described some of the great features of the language, but it’s worth getting into some detail here to highlight how we are solving the issues brought up in this post.&lt;/p&gt;
&lt;div class=&quot;src-styles----blog-post-module---rest_section---aDpQC&quot; id=&quot;orthogonality-consistency-and-compactness&quot; readability=&quot;65.973180076628&quot;&gt;
&lt;h3 id=&quot;orthogonality-consistency-and-compactness&quot; class=&quot; src-components-header_link----header_link-module---header---1h6HM&quot;&gt;Orthogonality, Consistency, and Compactness&lt;/h3&gt;
&lt;p&gt;In EdgeQL &lt;a href=&quot;https://edgedb.com/docs/edgeql/overview#everything-is-a-set&quot;&gt;every value is a set&lt;/a&gt; and every expression is a function over sets, returning a set. This means that, syntactically, any part of an EdgeQL expression can be factored out into a view or a function without changing other parts of the query.&lt;/p&gt;
&lt;p&gt;Consider a query returning movies together with the number of reviews for each one:&lt;/p&gt;
&lt;pre class=&quot;src-components-code----code-module---code---1IzoY src-styles----blog-post-module---rest_border_box---2usPO prismjs-light-syntax code-language-edgeql eql-block-pre src-components-code----code-module---block---aABGx&quot;&gt;
&lt;span class=&quot;src-components-code----code-module---wrapper---3ZlaG&quot;&gt;&lt;span class=&quot;tokens tokens-normal&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; Movie {
    description,
    number_of_reviews &lt;span class=&quot;token definition punctuation&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;count&lt;/span&gt;(.reviews)
};&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;Let’s say we need the average number of reviews across all movies:&lt;/p&gt;
&lt;pre class=&quot;src-components-code----code-module---code---1IzoY src-styles----blog-post-module---rest_border_box---2usPO prismjs-light-syntax code-language-edgeql eql-block-pre src-components-code----code-module---block---aABGx&quot;&gt;
&lt;span class=&quot;src-components-code----code-module---wrapper---3ZlaG&quot;&gt;&lt;span class=&quot;tokens tokens-normal&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; math::&lt;span class=&quot;token builtin&quot;&gt;mean&lt;/span&gt;(
    Movie {
        description,
        number_of_reviews &lt;span class=&quot;token definition punctuation&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;count&lt;/span&gt;(.reviews)
    }.number_of_reviews
);&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;Now we &lt;em&gt;also&lt;/em&gt; need the maximum number of reviews per movie:&lt;/p&gt;
&lt;pre class=&quot;src-components-code----code-module---code---1IzoY src-styles----blog-post-module---rest_border_box---2usPO prismjs-light-syntax code-language-edgeql eql-block-pre src-components-code----code-module---block---aABGx&quot;&gt;
&lt;span class=&quot;src-components-code----code-module---wrapper---3ZlaG&quot;&gt;&lt;span class=&quot;tokens tokens-normal&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; (
    avg &lt;span class=&quot;token definition punctuation&quot;&gt;:=&lt;/span&gt; math::&lt;span class=&quot;token builtin&quot;&gt;mean&lt;/span&gt;(
        Movie {
            number_of_reviews &lt;span class=&quot;token definition punctuation&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;count&lt;/span&gt;(.reviews)
        }.number_of_reviews
    ),
    &lt;span class=&quot;token builtin&quot;&gt;max&lt;/span&gt; &lt;span class=&quot;token definition punctuation&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;max&lt;/span&gt;(
        Movie {
            number_of_reviews &lt;span class=&quot;token definition punctuation&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;count&lt;/span&gt;(.reviews)
        }.number_of_reviews
    )
);&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;This is a tad unwieldy, let’s make the query cleaner by factoring out the &lt;code&gt;Movie&lt;/code&gt; expression into a view:&lt;/p&gt;
&lt;pre class=&quot;src-components-code----code-module---code---1IzoY src-styles----blog-post-module---rest_border_box---2usPO prismjs-light-syntax code-language-edgeql eql-block-pre src-components-code----code-module---block---aABGx&quot;&gt;
&lt;span class=&quot;src-components-code----code-module---wrapper---3ZlaG&quot;&gt;&lt;span class=&quot;tokens tokens-normal&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;WITH&lt;/span&gt;
    MovieReviewCount &lt;span class=&quot;token definition punctuation&quot;&gt;:=&lt;/span&gt; Movie {
        number_of_reviews &lt;span class=&quot;token definition punctuation&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;count&lt;/span&gt;(.reviews)
    }
&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; (
    avg &lt;span class=&quot;token definition punctuation&quot;&gt;:=&lt;/span&gt; math::&lt;span class=&quot;token builtin&quot;&gt;mean&lt;/span&gt;(MovieReviewCount.number_of_reviews),
    &lt;span class=&quot;token builtin&quot;&gt;max&lt;/span&gt; &lt;span class=&quot;token definition punctuation&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;max&lt;/span&gt;(MovieReviewCount.number_of_reviews),
);&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;Since everything is a function over sets, there are only a handful of keywords in EdgeQL queries, and they are used mostly to delineate the major parts of a query.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;src-styles----blog-post-module---rest_section---aDpQC&quot; id=&quot;missing-data&quot; readability=&quot;49&quot;&gt;

&lt;p&gt;In EdgeQL, the notion of missing data is simple: it is always an empty set, and any element-wise operation on an empty set is, likewise, an empty set:&lt;/p&gt;
&lt;div class=&quot;src-styles----blog-post-module---rest_border_box---2usPO prismjs-light-syntax src-components-code----code-module---repl---7611z&quot;&gt;
&lt;div class=&quot;src-components-code----code-module---block---aABGx&quot;&gt;
&lt;div class=&quot;src-components-code----code-module---codePart---2l876 code-language-edgeql&quot;&gt;
&lt;pre&gt;
edgedb&amp;gt; 
&lt;/pre&gt;
&lt;pre&gt;
&lt;span class=&quot;tokens tokens-normal&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;OR&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;{};&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;src-components-code----code-module---block---aABGx&quot; readability=&quot;6&quot;&gt;
&lt;div class=&quot;src-components-code----code-module---codePart---2l876 code-language-edgeql&quot; readability=&quot;7&quot;&gt;
&lt;pre&gt;
edgedb&amp;gt; 
&lt;/pre&gt;
&lt;pre&gt;
&lt;span class=&quot;tokens tokens-normal&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;AND&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;{};&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Aggregation is consistent:&lt;/p&gt;
&lt;div class=&quot;src-styles----blog-post-module---rest_border_box---2usPO prismjs-light-syntax src-components-code----code-module---repl---7611z&quot;&gt;
&lt;div class=&quot;src-components-code----code-module---block---aABGx&quot;&gt;
&lt;div class=&quot;src-components-code----code-module---codePart---2l876 code-language-edgeql&quot;&gt;
&lt;pre&gt;
edgedb&amp;gt; 
&lt;/pre&gt;
&lt;pre&gt;
&lt;span class=&quot;tokens tokens-normal&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;count&lt;/span&gt;({});&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;src-components-code----code-module---block---aABGx&quot; readability=&quot;6&quot;&gt;
&lt;div class=&quot;src-components-code----code-module---codePart---2l876 code-language-edgeql&quot; readability=&quot;7&quot;&gt;
&lt;pre&gt;
edgedb&amp;gt; 
&lt;/pre&gt;
&lt;pre&gt;
&lt;span class=&quot;tokens tokens-normal&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;array_agg&lt;/span&gt;(&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;{});&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;In EdgeQL, sets are flat, i.e. a set (including an empty one) cannot be an element of another set:&lt;/p&gt;
&lt;div class=&quot;src-styles----blog-post-module---rest_border_box---2usPO prismjs-light-syntax src-components-code----code-module---repl---7611z&quot;&gt;
&lt;div class=&quot;src-components-code----code-module---block---aABGx&quot; readability=&quot;8&quot;&gt;
&lt;div class=&quot;src-components-code----code-module---codePart---2l876 code-language-edgeql&quot; readability=&quot;11&quot;&gt;
&lt;pre&gt;
edgedb&amp;gt; 
&lt;/pre&gt;
&lt;pre&gt;
&lt;span class=&quot;tokens tokens-normal&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; {&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;, {&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;}, {}, {}};&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The set constructor notation above is actually equivalent to a &lt;code&gt;UNION&lt;/code&gt; operation, which better highlights its set nature:&lt;/p&gt;
&lt;div class=&quot;src-styles----blog-post-module---rest_border_box---2usPO prismjs-light-syntax src-components-code----code-module---repl---7611z&quot;&gt;
&lt;div class=&quot;src-components-code----code-module---block---aABGx&quot; readability=&quot;6.5&quot;&gt;
&lt;div class=&quot;src-components-code----code-module---codePart---2l876 code-language-edgeql&quot; readability=&quot;8&quot;&gt;
&lt;pre&gt;
edgedb&amp;gt; 
&lt;/pre&gt;
&lt;pre&gt;
&lt;span class=&quot;tokens tokens-normal&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; {&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;} &lt;span class=&quot;token keyword&quot;&gt;UNION&lt;/span&gt; {&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;} &lt;span class=&quot;token keyword&quot;&gt;UNION&lt;/span&gt; {} &lt;span class=&quot;token keyword&quot;&gt;UNION&lt;/span&gt; {};&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;An empty set can be coalesced into a non-empty set:&lt;/p&gt;
&lt;div class=&quot;src-styles----blog-post-module---rest_border_box---2usPO prismjs-light-syntax src-components-code----code-module---repl---7611z&quot;&gt;
&lt;div class=&quot;src-components-code----code-module---block---aABGx&quot; readability=&quot;6.5&quot;&gt;
&lt;div class=&quot;src-components-code----code-module---codePart---2l876 code-language-edgeql&quot; readability=&quot;8&quot;&gt;
&lt;pre&gt;
edgedb&amp;gt; 
....... 
&lt;/pre&gt;
&lt;pre&gt;
&lt;span class=&quot;tokens tokens-normal&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;WITH&lt;/span&gt; empty_set_expr &lt;span class=&quot;token definition punctuation&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;int64&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;{}
&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; empty_set_expr &lt;span class=&quot;token operator&quot;&gt;??&lt;/span&gt; {&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;};&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;div class=&quot;src-components-code----code-module---block---aABGx&quot; readability=&quot;7&quot;&gt;
&lt;div class=&quot;src-components-code----code-module---codePart---2l876 code-language-edgeql&quot; readability=&quot;9&quot;&gt;
&lt;pre&gt;
edgedb&amp;gt; 
....... 
&lt;/pre&gt;
&lt;pre&gt;
&lt;span class=&quot;tokens tokens-normal&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;WITH&lt;/span&gt; empty_set_expr &lt;span class=&quot;token definition punctuation&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;int64&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;{}
&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; {&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;} &lt;span class=&quot;token keyword&quot;&gt;IF&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;EXISTS&lt;/span&gt; empty_set_expr &lt;span class=&quot;token keyword&quot;&gt;ELSE&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;42&lt;/span&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;src-styles----blog-post-module---rest_section---aDpQC&quot; id=&quot;system-integration&quot; readability=&quot;54.255216693419&quot;&gt;

&lt;p&gt;In EdgeDB, the data schema is formulated in a way that is &lt;a href=&quot;https://edgedb.com/docs/tutorial/createdb#sdl&quot;&gt;much closer&lt;/a&gt; to the contemporary application data model. This makes the database-application schema reflection straightforward and efficient.&lt;/p&gt;
&lt;p&gt;Unlike SQL, EdgeQL can easily extract arbitrary data trees:&lt;/p&gt;
&lt;pre class=&quot;src-components-code----code-module---code---1IzoY src-styles----blog-post-module---rest_border_box---2usPO prismjs-light-syntax code-language-edgeql eql-block-pre src-components-code----code-module---block---aABGx&quot;&gt;
&lt;span class=&quot;src-components-code----code-module---wrapper---3ZlaG&quot;&gt;&lt;span class=&quot;tokens tokens-normal&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; Movie {
    description,

    directors: {
        full_name,
        image,
    }
    &lt;span class=&quot;token keyword&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;BY&lt;/span&gt; .last_name,

    &lt;span class=&quot;token keyword&quot;&gt;cast&lt;/span&gt;: {
        full_name,
        image,
    }
    &lt;span class=&quot;token keyword&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;BY&lt;/span&gt; .last_name,

    reviews &lt;span class=&quot;token definition punctuation&quot;&gt;:=&lt;/span&gt; (
        &lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; Movie&lt;span class=&quot;token code&quot;&gt;.&amp;lt;&lt;/span&gt;movie[&lt;span class=&quot;token keyword&quot;&gt;IS&lt;/span&gt; Review] {
            body,
            rating,
            author: {
                name,
                image,
            }
        }
        &lt;span class=&quot;token keyword&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;BY&lt;/span&gt; .creation_time &lt;span class=&quot;token keyword&quot;&gt;DESC&lt;/span&gt;
    ),
};&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;Coupled with extensive &lt;a href=&quot;https://edgedb.com/docs/datamodel/scalars/json#constructing-json-values&quot;&gt;JSON support&lt;/a&gt;, this makes writing REST and &lt;a href=&quot;https://edgedb.com/docs/clients/99_graphql/index&quot;&gt;GraphQL&lt;/a&gt; backends an order of magnitude easier.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div id=&quot;final-words&quot; readability=&quot;38.944552529183&quot;&gt;

&lt;p&gt;SQL started with a goal to empower non-programmers to work with the relational data effectively. Despite its shortcomings, it has arguably been wildly successful, with most databases implementing or emulating it. However, like any solution, SQL is facing increasing inadequacy in the support of the new requirements, modes of use and user productivity. It is time we do something about it.&lt;/p&gt;
&lt;aside class=&quot;&quot; readability=&quot;3.7383177570093&quot;&gt;&lt;p&gt;&lt;a href=&quot;mailto:hello@edgedb.com&quot;&gt;Drop us a line&lt;/a&gt; if you have any inquiries or feedback.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://twitter.com/edgedatabase&quot;&gt;Follow EdgeDB&lt;/a&gt; on Twitter, and stay tuned for updates!&lt;/p&gt;
&lt;/aside&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/edgedb/edgedb&quot; class=&quot;src-styles----blog-post-module---github_btn---1ygFZ&quot;&gt;EdgeDB on GitHub&lt;/a&gt;&lt;/p&gt;










&lt;/div&gt;</description>
<pubDate>Thu, 09 May 2019 18:52:54 +0000</pubDate>
<dc:creator>1st1</dc:creator>
<dc:format>text/html</dc:format>
<dc:identifier>https://edgedb.com/blog/we-can-do-better-than-sql/</dc:identifier>
</item>
<item>
<title>It&amp;#039;s time to replace GIFs with AV1 video</title>
<link>https://www.singhkays.com/blog/its-time-replace-gifs-with-av1-video/</link>
<guid isPermaLink="true" >https://www.singhkays.com/blog/its-time-replace-gifs-with-av1-video/</guid>
<description>&lt;p&gt;It is 2019 and we need to make a decision about GIFs (&lt;a href=&quot;https://bits.blogs.nytimes.com/2013/05/23/battle-over-gif-pronunciation-erupts/&quot; target=&quot;_blank&quot;&gt;no, not that one! We’re never going to be able to decide that one!&lt;/a&gt;). GIFs take up a massive amount of space &lt;em&gt;(often multiple megabytes!)&lt;/em&gt; and if you’re a web developer, then that’s completely against your ethos! As a web developer, you want to minimize the bits your users need to download so that your website loads fast. That’s why you minify javascript, optimize PNGs, JPEGs and sometimes turn &lt;a href=&quot;https://developers.google.com/speed/webp/&quot; target=&quot;_blank&quot;&gt;JPEGs to WebPs as well&lt;/a&gt;. But then what about the venerable GIF?&lt;/p&gt;
&lt;h2 id=&quot;where-we-are-going-we-don-t-need-no-gifs&quot;&gt;Where we are going, we don’t need no GIFs!&lt;/h2&gt;
&lt;p&gt;If your goal is to improve your website’s loading performance, then a GIF needs to be yanked! But then how do you have moving pictures? The answer is a video. And in most cases, you’ll get better quality as well as almost 50-90% size savings! In life, most things have a pro and a con. When you’re replacing a GIF with a video, in majority of the cases you’ll be hard pressed to find a con&lt;/p&gt;
&lt;h2 id=&quot;replace-all-the-gifs&quot;&gt;Replace all the GIFs!&lt;/h2&gt;
&lt;p&gt;Fortunately, replacing GIFs with video has now been common for a few years so the tools needed to pull off this trick are already in play. In this blog, I’m not going to break new ground, but improve upon what already exists. So, here’s the lowdown on what you can currently do:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;Take a GIF and convert it into video&lt;/li&gt;
&lt;li&gt;Encode it with H.264 or VP9 codec i.e. compress it and package in a MP4 of WebM container&lt;/li&gt;
&lt;li&gt;Replace animated GIF &lt;code&gt;&amp;lt;img&amp;gt;&lt;/code&gt; elements with &lt;code&gt;&amp;lt;video&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Set the video to play automatically, sliently and in a loop to replicate the GIF functionality&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;a href=&quot;https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/replace-animated-gifs-with-video/&quot; target=&quot;_blank&quot;&gt;Google has a good documentation page describing the process.&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;it-is-2019&quot;&gt;It is 2019&lt;/h2&gt;
&lt;p&gt;It’s 2019. Tech moves forward and we need to move with it. Until now you’ve had two choices of codecs that are widely adopted across all browsers and platforms for encoding the video:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;&lt;strong&gt;H.264&lt;/strong&gt; – Introduced in 2003 and the most widely used codec today&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;VP9&lt;/strong&gt; – Introduced in 2013 and achieves up to 50% more compression compared to H.264 most of the times but it can look worse sometimes according to &lt;a href=&quot;https://www.reddit.com/r/AV1/comments/bjzqly/its_time_to_replace_gifs_with_av1_video/emcohnq/&quot; target=&quot;_blank&quot;&gt;this discussion on reddit&lt;/a&gt;.&lt;/li&gt;
&lt;/ol&gt;&lt;blockquote readability=&quot;8.25&quot;&gt;
&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; Even though H.265 is the next-gen version of H.264 and competes with VP9, I’m not including it in this comparison becuase of lack of browser support as noted on &lt;a href=&quot;https://caniuse.com/#feat=hevc&quot; target=&quot;_blank&quot;&gt;https://caniuse.com/#feat=hevc&lt;/a&gt;. Licensing costs is the major reason why H.265 is not as widely adopted as H.264 and Alliance of Open Media consortium is working a royalty-free codec i.e. AV1.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Remember, our goal is to reduce the humongous GIF to as small a size as possible to improve our webpage loading time. It wouldn’t be 2019 if we didn’t have a new video compression standard we could encode to. This is called AV1. With AV1, we are able to &lt;a href=&quot;http://compression.ru/video/codec_comparison/hevc_2017/MSU_HEVC_comparison_2017_P5_HQ_encoders.pdf&quot; target=&quot;_blank&quot;&gt;achieve ~30% more compression compared to VP9.&lt;/a&gt; So, now we’re up to about 80% better than H.264! Exciting! :)&lt;/p&gt;
&lt;h2 id=&quot;serving-you-av1-since-2019&quot;&gt;Serving you AV1 since 2019&lt;/h2&gt;
&lt;p&gt;Recently, support for decoding AV1 video has been enabled in &lt;a href=&quot;https://developers.google.com/web/updates/2018/09/chrome-70-media-updates#av1-decoder&quot; target=&quot;_blank&quot;&gt;Google Chrome 70&lt;/a&gt; and &lt;a href=&quot;https://medium.com/mozilla-tech/mozilla-celebrates-release-of-free-high-quality-video-compression-technology-av1-in-firefox-65-7c95f2b7e56&quot; target=&quot;_blank&quot;&gt;Mozilla Firefox 65&lt;/a&gt;. Now, all we need to do is serve an AV1 video for our users and if they haven’t updated their browsers to the latest version &lt;em&gt;(they really should!)&lt;/em&gt;, we’ll fall back to a H.264 or VP9 video. &lt;a href=&quot;https://www.singhkays.com/blog/detect-rolling-credits-video-indexer/&quot; target=&quot;_blank&quot;&gt;If you read my previous blog, this is what I did&lt;/a&gt;. I created a video tag like below which allowed me to serve the videos in this preference order - &lt;strong&gt;AV1&lt;/strong&gt;-&amp;gt;&lt;strong&gt;VP9&lt;/strong&gt;-&amp;gt;&lt;strong&gt;H.264&lt;/strong&gt;. If a user has a really old browser and cannot decode any of the videos, then they would just get the GIF file. :(&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;10&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&amp;lt;&lt;span&gt;video&lt;/span&gt; &lt;span&gt;style&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;display:block; margin: 0 auto;&quot;&lt;/span&gt; &lt;span&gt;autoplay&lt;/span&gt; &lt;span&gt;loop&lt;/span&gt; &lt;span&gt;muted&lt;/span&gt; &lt;span&gt;playsinline&lt;/span&gt; &lt;span&gt;poster&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;RollingCredits.jpg&quot;&lt;/span&gt;&amp;gt;
  &amp;lt;&lt;span&gt;source&lt;/span&gt; &lt;span&gt;src&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;media/RollingCredits.av1.mp4&quot;&lt;/span&gt; &lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;video/mp4&quot;&lt;/span&gt;&amp;gt;
  &amp;lt;&lt;span&gt;source&lt;/span&gt; &lt;span&gt;src&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;media/RollingCredits.vp9.webm&quot;&lt;/span&gt; &lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;video/webm&quot;&lt;/span&gt;&amp;gt;
  &amp;lt;&lt;span&gt;source&lt;/span&gt; &lt;span&gt;src&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;media/RollingCredits.x264.mp4&quot;&lt;/span&gt; &lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;video/mp4&quot;&lt;/span&gt;&amp;gt;
  &amp;lt;&lt;span&gt;img&lt;/span&gt; &lt;span&gt;src&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;media/RollingCredits.gif&quot;&lt;/span&gt;&amp;gt;
&amp;lt;/&lt;span&gt;video&lt;/span&gt;&amp;gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;the-av1-recipe&quot;&gt;The AV1 recipe&lt;/h2&gt;
&lt;p&gt;Creating an AV1 video is pretty simple. &lt;a href=&quot;https://ffmpeg.org/download.html&quot; target=&quot;_blank&quot;&gt;Download the latest build of ffmpeg for your platform from here&lt;/a&gt; and use the below commandline. We’re going to be using a 2-pass encoding mode to achieve a target bitrate. For this, we’ll run ffmpeg twice. In the first pass we’ll output to a null file descriptor, not an actual file. This generates a logfile that ffmpeg needs for the second pass.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;10&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span&gt;# Linux or Mac&lt;/span&gt;
&lt;span&gt;## Pass 1&lt;/span&gt;
ffmpeg -i input.mp4 -c:v libaom-av1 -b:v 200k -filter:v scale&lt;span&gt;=&lt;/span&gt;&lt;span&gt;720&lt;/span&gt;:-1 -strict experimental -cpu-used &lt;span&gt;1&lt;/span&gt; -tile-columns &lt;span&gt;2&lt;/span&gt; -row-mt &lt;span&gt;1&lt;/span&gt; -threads &lt;span&gt;8&lt;/span&gt; -pass &lt;span&gt;1&lt;/span&gt; -f mp4 /dev/null &lt;span&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span&gt;\
&lt;/span&gt;&lt;span&gt;## Pass 2&lt;/span&gt;
ffmpeg -i input.mp4 -pix_fmt yuv420p -movflags faststart -c:v libaom-av1 -b:v 200k -filter:v scale&lt;span&gt;=&lt;/span&gt;&lt;span&gt;720&lt;/span&gt;:-1 -strict experimental -cpu-used &lt;span&gt;1&lt;/span&gt; -tile-columns &lt;span&gt;2&lt;/span&gt; -row-mt &lt;span&gt;1&lt;/span&gt; -threads &lt;span&gt;8&lt;/span&gt; -pass &lt;span&gt;2&lt;/span&gt; output.mp4

&lt;span&gt;# Windows&lt;/span&gt;
&lt;span&gt;## Pass 1&lt;/span&gt;
ffmpeg.exe -i input.mp4 -c:v libaom-av1 -b:v 200k -filter:v scale&lt;span&gt;=&lt;/span&gt;&lt;span&gt;720&lt;/span&gt;:-1 -strict experimental -cpu-used &lt;span&gt;1&lt;/span&gt; -tile-columns &lt;span&gt;2&lt;/span&gt; -row-mt &lt;span&gt;1&lt;/span&gt; -threads &lt;span&gt;8&lt;/span&gt; -pass &lt;span&gt;1&lt;/span&gt; -f mp4 NUL &lt;span&gt;&amp;amp;&amp;amp;&lt;/span&gt; ^
&lt;span&gt;## Pass 2&lt;/span&gt;
ffmpeg.exe -i input.mp4 -pix_fmt yuv420p -movflags faststart -c:v libaom-av1 -b:v 200k -filter:v scale&lt;span&gt;=&lt;/span&gt;&lt;span&gt;720&lt;/span&gt;:-1 -strict experimental -cpu-used &lt;span&gt;1&lt;/span&gt; -tile-columns &lt;span&gt;2&lt;/span&gt; -row-mt &lt;span&gt;1&lt;/span&gt; -threads &lt;span&gt;8&lt;/span&gt; -pass &lt;span&gt;2&lt;/span&gt; output.mp4&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Here’s an explanation of what the command line options do&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;-i - Used to specify the input file

-pix_fmt - Use to specify the 4:2:0 chroma subsampling for the color information in the video. There are many different pixel formats but 4:2:0 is the most compatible, hence we specify that here.

-c:v - Used to specify the encoder to use i.e. AV1 in this case

-b:v – Used to specify the average bitrate we want to achieve

-filter:v scale - ffmpeg’s scale filter to reduce the resolution of the video. We specify this in the X:-1 format which tells ffmpeg to reduce the width of the video to X while and automatically set height that maintains the aspect ratio 

-strict experimental - Used because AV1 is a fairly new encoder

-cpu-used - Horribly named parameter but this is way to select the level of quality we want to achieve. Valid values are 0-4. Lower values (i.e. closer to 0) mean more quality as well as more encoding time taken

-tile-columns - Used to achieve multi-threading. Tells the AV1 encoder to split the scene into separate columns which can then be encoded independently of each other, thereby increasing CPU usage 

-row-mt – Similar concept as columns above but for rows within those columns

-threads - # of threads the encoder can use

-pass - Which pass the command executes

-f - Only used in the first pass. Specifies the format of the output file in the second pass i.e. MP4 in this case

-movflags faststart - Enables fast start of video by moving some data to the beginning of the file. This  allows the video to be played before it is completely downloaded

&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;gif-recipe&quot;&gt;GIF recipe&lt;/h2&gt;
&lt;p&gt;For generating the GIF, I used the below command. To reduce the size of the GIF, I scaled the GIF to 720px wide and 12 fps instead of 24 fps source video.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;9&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;./ffmpeg -i /mnt/c/Users/kasing/Desktop/ToS.mov -ss &lt;span&gt;00&lt;/span&gt;:08:08 -t &lt;span&gt;12&lt;/span&gt;
-filter_complex &lt;span&gt;&quot;[0:v] fps=12,scale=720:-1&quot;&lt;/span&gt; -y scene2.gif&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;test-results&quot;&gt;Test Results&lt;/h2&gt;
&lt;p&gt;The proof is in the pudding, right? Let’s see why AV1 is the right codec for this choice of work. I took the open source video Tears of Steel available here &lt;a href=&quot;https://mango.blender.org/&quot; target=&quot;_blank&quot;&gt;https://mango.blender.org/&lt;/a&gt; and encoded it to approximately similar bitrates for AV1, VP9, H.264 codecs. The resulting files are looping below so you can compare between them.&lt;/p&gt;
&lt;blockquote readability=&quot;17.75348189415&quot;&gt;
&lt;p&gt;&lt;strong&gt;NOTE 1:&lt;/strong&gt; If a file below doesn’t load for you, it’s possible you’ll need to update your browser. If your browser doesn’t work, I suggest using browsing in a Chromium based browser such as Chrome, Vivaldi, Brave or Opera. Here’s the latest on browser support for AV1 &lt;a href=&quot;https://caniuse.com/#feat=av1&quot; target=&quot;_blank&quot;&gt;https://caniuse.com/#feat=av1&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;NOTE 2:&lt;/strong&gt; For Firefox 66 on Linux, you’ll need to set the &lt;code&gt;media.av1.enabled&lt;/code&gt; flag to true in &lt;code&gt;about:config&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;NOTE 2:&lt;/strong&gt; I’m not including the GIFs inline below due to their large size and amount of data it will take to load this page! (Also would be ironic as that’s what I’m to get us away from :)). But you can view the GIFs here &lt;a href=&quot;https://github.com/singhkays/its-time-replace-gifs-with-av1-video/blob/master/GIFs&quot; target=&quot;_blank&quot;&gt;https://github.com/singhkays/its-time-replace-gifs-with-av1-video/blob/master/GIFs&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;scene-1-200-kbps&quot;&gt;Scene 1 @ 200 Kbps&lt;/h3&gt;
&lt;p&gt;This is a high motion scene so it really stresses the encoders at low bitrates. We quickly see how bad H.264 is at this bitrate exhibiting extreme blockiness. VP9 improves things a bit but you can still notice some blockiness. AV1 clearly wins in this test rendering a clearly better image.&lt;/p&gt;
&lt;p&gt;
&lt;h4 id=&quot;h-264&quot;&gt;H.264&lt;/h4&gt;
&lt;/p&gt;
&lt;p&gt;
&lt;h4 id=&quot;vp9&quot;&gt;VP9&lt;/h4&gt;
&lt;/p&gt;
&lt;p&gt;
&lt;h4 id=&quot;av1&quot;&gt;AV1&lt;/h4&gt;
&lt;/p&gt;
&lt;h3 id=&quot;scene-2-200-kbps&quot;&gt;Scene 2 @ 200 Kbps&lt;/h3&gt;
&lt;p&gt;This scene shows off a lot of translucent CGI generated content. The results are a lot closer than the last scene but overall AV1 ends up being the best.&lt;/p&gt;
&lt;p&gt;
&lt;h4 id=&quot;h-264&quot;&gt;H.264&lt;/h4&gt;
&lt;/p&gt;
&lt;p&gt;
&lt;h4 id=&quot;vp9&quot;&gt;VP9&lt;/h4&gt;
&lt;/p&gt;
&lt;p&gt;
&lt;h4 id=&quot;av1&quot;&gt;AV1&lt;/h4&gt;
&lt;/p&gt;
&lt;h3 id=&quot;scene-3-100-kbps&quot;&gt;Scene 3 @ 100 Kbps&lt;/h3&gt;
&lt;p&gt;In this scene, we really dial down the bitrate to 100 Kbps and the results are no surprise. AV1 maintains it’s advantage at this low bitrate as well!&lt;/p&gt;
&lt;p&gt;
&lt;h4 id=&quot;h-264&quot;&gt;H.264&lt;/h4&gt;
&lt;/p&gt;
&lt;p&gt;
&lt;h4 id=&quot;vp9&quot;&gt;VP9&lt;/h4&gt;
&lt;/p&gt;
&lt;p&gt;
&lt;h4 id=&quot;av1&quot;&gt;AV1&lt;/h4&gt;
&lt;/p&gt;
&lt;h2 id=&quot;encore&quot;&gt;Encore&lt;/h2&gt;
&lt;p&gt;To really drive home the point of the amount of space savings compared to a GIF – The total size of all the videos embedded above is …. &lt;strong&gt;1.62 MB!!&lt;/strong&gt; That’s right. 1,708,032 freakin bytes! For comparison, here’s the GIF and AV1 video size for each of the scenes&lt;/p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th/&gt;
&lt;th&gt;GIF&lt;/th&gt;
&lt;th&gt;AV1&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Scene 1&lt;/td&gt;
&lt;td&gt;11.7 MB&lt;/td&gt;
&lt;td&gt;0.33 MB&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Scene 2&lt;/td&gt;
&lt;td&gt;7.27 MB&lt;/td&gt;
&lt;td&gt;0.18 MB&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Scene 3&lt;/td&gt;
&lt;td&gt;5.62 MB&lt;/td&gt;
&lt;td&gt;0.088 MB&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;Absolutely mind blowing! Isn’t it?&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;9&quot;&gt;
&lt;p&gt;NOTE: I haven’t listed out the file sizes for VP9 and H264 because they are very similar to AV1 because of using the same bitrate for all codecs. Also, it would be redundant to add two more columns with similar sizes just to make the point that these codecs offer much better quality than GIF at highly reduced file sizes.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;changelog&quot;&gt;Changelog&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;2019-04-28&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Published v1&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;2019-05-09&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Updated size of Scene 2 GIF to 7.27 MB. This was erroneously specified as 9.06 MB before.&lt;/li&gt;
&lt;li&gt;Added links to GIFs based on Hacker News comment&lt;/li&gt;
&lt;li&gt;Added info about why H.265 wasn’t included in this comparison&lt;/li&gt;
&lt;li&gt;Added a link to latest browser support for AV1&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Reach out if you have any questions! Feel free to follow me on&lt;/p&gt;
</description>
<pubDate>Thu, 09 May 2019 18:16:34 +0000</pubDate>
<dc:creator>singhkays</dc:creator>
<og:title>It's time to replace GIFs with AV1 video!</og:title>
<og:description>It is 2019 and we need to make a decision about GIFs (no, not that one! We’re never going to be able to decide that one!). GIFs take up a massive amount of space (often multiple megabytes!) and if you’re a web developer, then that’s completely against your ethos! As a web developer, you want to minimize the bits your users need to download so that your website loads fast.</og:description>
<og:url>https://www.singhkays.com/blog/its-time-replace-gifs-with-av1-video/</og:url>
<og:type>article</og:type>
<og:image>https://www.singhkays.com/blog/its-time-replace-gifs-with-av1-video/media/aint-nobody-got-time-for-gif.png</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.singhkays.com/blog/its-time-replace-gifs-with-av1-video/</dc:identifier>
</item>
<item>
<title>Open source firmware is important for security</title>
<link>https://blog.jessfraz.com/post/why-open-source-firmware-is-important-for-security/</link>
<guid isPermaLink="true" >https://blog.jessfraz.com/post/why-open-source-firmware-is-important-for-security/</guid>
<description>&lt;p&gt;Wednesday, May 8, 2019&lt;/p&gt;
&lt;p&gt;I gave a talk recently at GoTo Chicago on &lt;a href=&quot;https://docs.google.com/presentation/d/1Qees556dT9LNoooEdf6En8V82L3V-_N8LbPuyGihZeI/edit?usp=sharing&quot;&gt;Why open source firmware is important&lt;/a&gt; and I thought it would be nice to also write a blog post with my findings. This post will focus on why open source firmware is important for security.&lt;/p&gt;
&lt;h2 id=&quot;privilege-levels&quot;&gt;Privilege Levels&lt;/h2&gt;
&lt;p&gt;In your typical “stack” today you have the various levels of privileges.&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;Ring 3 - Userspace:&lt;/strong&gt; has the least amount of privileges, short of there being a sandbox in userspace that is restricted further.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Ring 0 - Kernel:&lt;/strong&gt; The operating system kernel, for open source operating systems you get visibility into the code behind this.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Ring -1 - Hypervisor:&lt;/strong&gt; The virtual machine monitor (VMM) that creates and runs virtual machines. For open source hypervisors like Xen, KVM, bhyve, etc you have visibility into the code behind this.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Ring -2 -&lt;/strong&gt; &lt;strong&gt;System Management Mode (SMM), UEFI kernel:&lt;/strong&gt; Proprietary code, more on this &lt;a href=&quot;https://blog.jessfraz.com/post/why-open-source-firmware-is-important-for-security/#ring-2-smm-uefi-kernel&quot;&gt;below&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Ring -3 - Management Engine:&lt;/strong&gt; Proprietary code, more on this &lt;a href=&quot;https://blog.jessfraz.com/post/why-open-source-firmware-is-important-for-security/#ring-3-management-engine&quot;&gt;below&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;The negative rings were made up because there was no other way to express something with more privileges.&lt;/p&gt;
&lt;p&gt;From the above, it’s pretty clear that for Rings -1 to 3, we have the option to use open source software and have a large amount of visibility and control over the software we run. For the privilege levels under Ring -1, we have less control but it is getting better with the open source firmware community and projects.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;It’s counter-intuitive that the code that we have the least visibility into has the most privileges. This is what open source firmware is aiming to fix.&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;ring-2-smm-uefi-kernel&quot;&gt;Ring -2: SMM, UEFI kernel&lt;/h3&gt;
&lt;p&gt;This ring controls all CPU resources.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;System management mode (SMM)&lt;/strong&gt; is invisible to the rest of the stack on top of it. It has half a kernel. It was originally used for power management and system hardware control. It holds a lot of the proprietary designed code and is a place for vendors to add new proprietary features. It handles system events like memory or chipset errors as well as a bunch of other logic.&lt;/p&gt;
&lt;p&gt;The &lt;strong&gt;UEFI Kernel&lt;/strong&gt; is extremely complex. It has millions of lines of code. UEFI applications are active after boot. It was built with security from obscurity. The &lt;a href=&quot;https://uefi.org/specifications&quot;&gt;specification&lt;/a&gt; is absolutely insane if you want to dig in.&lt;/p&gt;
&lt;h3 id=&quot;ring-3-management-engine&quot;&gt;Ring -3: Management Engine&lt;/h3&gt;
&lt;p&gt;This is the most privileged ring. In the case of Intel (x86) this is the Intel Management Engine. It can turn on nodes and re-image disks invisibly. It has a kernel that runs &lt;a href=&quot;https://itsfoss.com/fact-intel-minix-case/&quot;&gt;Minix 3&lt;/a&gt; as well as a web server and entire networking stack. It turns out Minix is the most widely used operating system because of this. There is a lot of functionality in the Management Engine, it would probably take me all day to list it off but there are &lt;a href=&quot;https://www.intel.com/content/www/us/en/support/articles/000008927/software/chipset-software.html&quot;&gt;many&lt;/a&gt; &lt;a href=&quot;https://files.bitkeks.eu/docs/intelme-report.pdf&quot;&gt;resources&lt;/a&gt; for digging into more detail, should you want to.&lt;/p&gt;
&lt;p&gt;Between Ring -2 and Ring -3 we have at least 2 and a half other kernels in our stack as well as a bunch of proprietary and unnecessary complexity. Each of these kernels have their own networking stacks and web servers. The code can also modify itself and persist across power cycles and re-installs. &lt;strong&gt;We have very little visibility into what the code in these rings is actually doing, which is horrifying considering these rings have the most privileges.&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;they-all-have-exploits&quot;&gt;They all have exploits&lt;/h3&gt;
&lt;p&gt;It should be of no surprise to anyone that Rings -2 and -3 have their fair share of vulnerabilities. They are horrifying when they happen though. Just to use one as an example although I will let you find others on your own, &lt;a href=&quot;https://www.wired.com/2017/05/hack-brief-intel-fixes-critical-bug-lingered-7-dang-years/&quot;&gt;there was a bug in the web server of the Intel Management Engine that was there for seven years&lt;/a&gt; without them realizing.&lt;/p&gt;
&lt;h2 id=&quot;how-can-we-make-it-better&quot;&gt;How can we make it better?&lt;/h2&gt;
&lt;h3 id=&quot;nerf-non-extensible-reduced-firmware&quot;&gt;NERF: Non-Extensible Reduced Firmware&lt;/h3&gt;
&lt;p&gt;NERF is what the open source firmware community is working towards. The goals are to make firmware less capable of doing harm and make its actions more visible. They aim to remove all runtime components but currently with the Intel Management Engine, they cannot remove all but they can take away the web server and IP stack. They also remove UEFI IP stack and other drivers, as well as the Intel Management/UEFI self-reflash capability.&lt;/p&gt;
&lt;h3 id=&quot;me-cleaner&quot;&gt;me_cleaner&lt;/h3&gt;
&lt;p&gt;This is the project used to clean the Intel Management Engine to the smallest necessary capabilities. You can check it out on GitHub: &lt;a href=&quot;https://github.com/corna/me_cleaner&quot;&gt;github.com/corna/me_cleaner&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&quot;u-boot-and-coreboot&quot;&gt;u-boot and coreboot&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://www.chromium.org/developers/u-boot&quot;&gt;u-boot&lt;/a&gt; and &lt;a href=&quot;https://www.coreboot.org/&quot;&gt;coreboot&lt;/a&gt; are open source firmware. They handle silicon and DRAM initialization. Chromebooks use both, coreboot on x86, and u-boot for the rest. This is one part of how they &lt;a href=&quot;https://static.googleusercontent.com/media/research.google.com/en//pubs/archive/42038.pdf&quot;&gt;verify boot&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Coreboot’s design philosophy is to &lt;a href=&quot;https://doc.coreboot.org/&quot;&gt;“do the bare minimum necessary to ensure that hardware is usable and then pass control to a different program called the&lt;/a&gt; &lt;a href=&quot;https://doc.coreboot.org/&quot;&gt;&lt;em&gt;payload&lt;/em&gt;&lt;/a&gt;&lt;a href=&quot;https://doc.coreboot.org/&quot;&gt;.”&lt;/a&gt; The payload in this case is linuxboot.&lt;/p&gt;
&lt;h3 id=&quot;linuxboot&quot;&gt;linuxboot&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://www.linuxboot.org/&quot;&gt;Linuxboot&lt;/a&gt; handles device drivers, network stack, and gives the user a multi-user, multi-tasking environment. It is built with Linux so that a single kernel can work for several boards. Linux is already quite vetted and has a lot of eyes on it since it is used quite extensively. Better to use a open kernel with a lot of eyes on it, than the 2½ other kernels that were all different and closed off. This means that we are lessening the attack surface by using less variations of code and we are making an effort to rely on code that is open source. Linux improves boot reliability by replacing lightly-tested firmware drivers with hardened Linux drivers.&lt;/p&gt;
&lt;p&gt;By using a kernel we already have tooling around firmware devs can build in tools they already know. When they need to write logic for signature verification, disk decryption, etc it’s in a language that is modern, easily auditable, maintainable, and readable.&lt;/p&gt;
&lt;h3 id=&quot;u-root&quot;&gt;u-root&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/u-root/u-root&quot;&gt;u-root&lt;/a&gt; is a set of golang userspace tools and bootloader. It is then used as the initramfs for the Linux kernel from linuxboot.&lt;/p&gt;
&lt;p&gt;Through using the NERF stack they saw boot times were 20x faster. But this blog post is on security so let’s get back to that….&lt;/p&gt;
&lt;p&gt;The NERF stack helps improve the visibility into a lot of the components that were previously very proprietary. There is still a lot of other firmware on devices.&lt;/p&gt;
&lt;h2 id=&quot;what-about-all-the-other-firmware&quot;&gt;What about all the other firmware?&lt;/h2&gt;
&lt;p&gt;We need open source firmware for the network interface controller (NIC), solid state drives (SSD), and base management controller (BMC).&lt;/p&gt;
&lt;p&gt;For the NIC, there is some work being done in the open compute project on &lt;a href=&quot;https://www.opencompute.org/documents/ocp-nic-3-0-draft-0v85b-20181213b-tn-temp-no-cb-pdf&quot;&gt;NIC 3.0&lt;/a&gt;. It should be interesting to see where that goes.&lt;/p&gt;
&lt;p&gt;For the BMC, there is both &lt;a href=&quot;https://github.com/openbmc/openbmc&quot;&gt;OpenBMC&lt;/a&gt; and &lt;a href=&quot;https://github.com/u-root/u-bmc&quot;&gt;u-bmc&lt;/a&gt;. I had written a little about them in &lt;a href=&quot;https://blog.jessfraz.com/post/the-firmware-rabbit-hole/&quot;&gt;a previous blog post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;We need to have all open source firmware to have all the visibility into the stack but also to actually verify the state of software on a machine.&lt;/p&gt;
&lt;h2 id=&quot;roots-of-trust&quot;&gt;Roots of Trust&lt;/h2&gt;
&lt;p&gt;The goal of the root of trust should be to verify that the software installed in every component of the hardware is the software that was intended. This way you can know without a doubt and verify if hardware has been hacked. Since we have very little to no visibility into the code running in a lot of places in our hardware it is hard to do this. How do we really know that the firmware in a component is not vulnerable or that is doesn’t have any backdoors? Well we can’t. Not unless it was all open source.&lt;/p&gt;
&lt;p&gt;Every cloud and vendor seems to have their own way of doing a root of trust. Microsoft has &lt;a href=&quot;https://github.com/opencomputeproject/Project_Olympus/tree/master/Project_Cerberus&quot;&gt;Cerberus&lt;/a&gt;, Google has &lt;a href=&quot;https://cloud.google.com/blog/products/gcp/titan-in-depth-security-in-plaintext&quot;&gt;Titan&lt;/a&gt;, and Amazon has &lt;a href=&quot;https://perspectives.mvdirona.com/2019/02/aws-nitro-system/&quot;&gt;Nitro&lt;/a&gt;. These seem to assume an explicit amount of trust in the proprietary code (the code we cannot see). This leaves me with not a great feeling. &lt;strong&gt;Wouldn’t it be better to be able to use all open source code? Then we could verify without a doubt that the code you can read and build yourself is the same code running on hardware for all the various places we have firmware. We could then verify that a machine was in a correct state without a doubt of it being vulnerable or with a backdoor.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;It makes me wonder what the smaller cloud providers like DigitalOcean or Packet have for a root of trust. Often times we only hear of these projects from the big three or five. I asked this on twitter and didn’t get any good answers…&lt;/p&gt;
&lt;blockquote class=&quot;twitter-tweet&quot; readability=&quot;5.693023255814&quot;&gt;
&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;I’m surprised how many people are responding that they love DigitalOcean but seem entirely unconcerned there’s no answer here. You should be concerned.&lt;/p&gt;
— jessie frazelle 👩🏼‍🚀 (@jessfraz) &lt;a href=&quot;https://twitter.com/jessfraz/status/1126131424095100929?ref_src=twsrc%5Etfw&quot;&gt;May 8, 2019&lt;/a&gt;&lt;/blockquote&gt;
&lt;p&gt;There is a great talk by &lt;a href=&quot;https://twitter.com/PaulM&quot;&gt;Paul McMillan&lt;/a&gt; and Matt King on &lt;a href=&quot;https://www.youtube.com/watch?v=PEVVRkd-wPM&quot;&gt;Securing Hardware at Scale&lt;/a&gt;. It covers in great detail how to secure bare metal while also giving customers access to the bare metal. When they get back the hardware from customers they need to ensure with consistency and reliability that there is nothing from the customer hiding in any component of the hardware.&lt;/p&gt;
&lt;p&gt;All clouds need to ensure that the hardware they are running has not been compromised after a customer has run compute on it.&lt;/p&gt;
&lt;h2 id=&quot;platform-firmware-resiliency&quot;&gt;Platform Firmware Resiliency&lt;/h2&gt;
&lt;p&gt;As far as chip vendors go, they seem to have a different offering. Intel has &lt;a href=&quot;https://www.intel.com/content/dam/www/public/us/en/documents/solution-briefs/firmware-resilience-blocks-solution-brief.pdf&quot;&gt;Platform Firmware Resilience&lt;/a&gt; and Lattice has &lt;a href=&quot;http://www.latticesemi.com/en/Solutions/Solutions/SolutionsDetails02/PFR&quot;&gt;Platform Firmware Resiliency&lt;/a&gt;. These seem to be more focused on the NIST guidelines for &lt;a href=&quot;https://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-193.pdf&quot;&gt;Platform Firmware Resiliency&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I tried to ask the internet who was using this and heard very little back, so if you are using Platform Firmware Resiliency can you let me know!&lt;/p&gt;
&lt;blockquote class=&quot;twitter-tweet&quot; readability=&quot;4.8729281767956&quot;&gt;
&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;It seems that Intel has some effort called Platform Firmware Resiliency (anyone using this one?!) &lt;a href=&quot;https://t.co/fQq2gdLNOm&quot;&gt;https://t.co/fQq2gdLNOm&lt;/a&gt;&lt;/p&gt;
— jessie frazelle 👩🏼‍🚀 (@jessfraz) &lt;a href=&quot;https://twitter.com/jessfraz/status/1126121264819712000?ref_src=twsrc%5Etfw&quot;&gt;May 8, 2019&lt;/a&gt;&lt;/blockquote&gt;
&lt;p&gt;From the &lt;a href=&quot;https://www.opencompute.org/files/Intel-System-Firmware-InnovationsMohanKumar-OCP18.pdf&quot;&gt;OCP talk on Intel’s firmware innovations&lt;/a&gt;, it seems Intel’s Platform Firmware Resilience (PFR) and Cerberus go hand in hand. Intel is using PFR to deliver Cerberus’ attestation priniciples. Thanks &lt;a href=&quot;https://twitter.com/_msw_&quot;&gt;@msw&lt;/a&gt; for the clarification.&lt;/p&gt;
&lt;p&gt;It would be nice if there were not so many tools to do this job. I also wish the code was open source so we could verify for ourselves.&lt;/p&gt;
&lt;h2 id=&quot;how-to-help&quot;&gt;How to help&lt;/h2&gt;
&lt;p&gt;I hope this gave you some insight into what’s being built with open source firmware and how making firmware open source is important! If you would like to help with this effort, please help spread the word. Please try and use platforms that value open source firmware components. Chromebooks are a great example of this, as well as &lt;a href=&quot;https://puri.sm/&quot;&gt;Purism&lt;/a&gt; computers. You can ask your providers what they are doing for open source firmware or ensuring hardware security with roots of trust. Happy nerding! :)&lt;/p&gt;
&lt;p&gt;Huge thanks to the open source firmware community for helping me along this journey! Shout out to Ron Minnich, &lt;a href=&quot;https://twitter.com/qrs&quot;&gt;Trammel Hudson&lt;/a&gt;, &lt;a href=&quot;https://twitter.com/hugelgupf&quot;&gt;Chris Koch&lt;/a&gt;, &lt;a href=&quot;https://twitter.com/kc8apf&quot;&gt;Rick Altherr&lt;/a&gt;, and &lt;a href=&quot;https://twitter.com/_zaolin_&quot;&gt;Zaolin&lt;/a&gt;. And shout out to &lt;a href=&quot;https://twitter.com/bridgetkromhout&quot;&gt;Bridget Kromhout&lt;/a&gt; for always finding time to review my posts!&lt;/p&gt;
</description>
<pubDate>Thu, 09 May 2019 17:44:25 +0000</pubDate>
<dc:creator>eindiran</dc:creator>
<og:title>Why open source firmware is important for security</og:title>
<og:url>https://blog.jessfraz.com/post/why-open-source-firmware-is-important-for-security/</og:url>
<og:image>/img/share.png</og:image>
<og:description>Why open source firmware is important for security.</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://blog.jessfraz.com/post/why-open-source-firmware-is-important-for-security/</dc:identifier>
</item>
<item>
<title>All Chromebooks will also be Linux laptops going forward</title>
<link>https://www.zdnet.com/article/all-chromebooks-will-also-be-linux-laptops-going-forward/</link>
<guid isPermaLink="true" >https://www.zdnet.com/article/all-chromebooks-will-also-be-linux-laptops-going-forward/</guid>
<description>&lt;p&gt;At &lt;a href=&quot;https://www.google.com/io&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Google I/O&lt;/a&gt; in Mountain View, Google quietly let slip that &quot;all devices [Chromebook] launched this year will be Linux-ready right out of the box.&quot; Wait. What?&lt;/p&gt;
&lt;p&gt;In case you've missed it, last year, Google started making it possible to &lt;a href=&quot;https://www.zdnet.com/article/linux-comes-to-chromebooks/&quot;&gt;run desktop Linux on Chrome OS&lt;/a&gt;. Since then, more Chromebook devices are able to run Linux. Going forward, all of them will be able to do so, too. Yes. All of them. ARM and Intel-based.&lt;/p&gt;
&lt;p&gt;This isn't surprising. Chrome OS, after all, is built on Linux. &lt;a href=&quot;https://www.zdnet.com/article/the-secret-origins-of-googles-chrome-os/&quot;&gt;Chrome OS started as a spin off of Ubuntu Linux&lt;/a&gt;. It then migrated to &lt;a href=&quot;https://www.gentoo.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Gentoo Linux&lt;/a&gt; and evolved into Google's own take on the vanilla Linux kernel. But its interface remains the Chrome web browser UI -- to this day.&lt;/p&gt;
&lt;p&gt;Earlier, you could run Debian, &lt;a href=&quot;https://www.ubuntu.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Ubuntu&lt;/a&gt; and &lt;a href=&quot;https://www.kali.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Kali Linux&lt;/a&gt; on Chrome OS using the open-source &lt;a href=&quot;https://github.com/dnschneid/crouton&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Crouton&lt;/a&gt; program in a &lt;a href=&quot;https://wiki.archlinux.org/index.php/change_root&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;chroot&lt;/a&gt; container. Or, you could run &lt;a href=&quot;https://galliumos.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Gallium OS&lt;/a&gt;, a third-party, Xubuntu Chromebook-specific Linux variant. But it wasn't easy.&lt;/p&gt;
&lt;p&gt;Now? It's as simple as simple can be. Just open the Chrome OS app switcher by pressing the Search/Launcher key and then type &quot;Terminal&quot;. This launches the &lt;a href=&quot;https://chromium.googlesource.com/chromiumos/overlays/board-overlays/+/master/project-termina/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Termina&lt;/a&gt; VM, which will start running a &lt;a href=&quot;https://wiki.debian.org/DebianStretch&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Debian 9.0 Stretch&lt;/a&gt; Linux container.&lt;/p&gt;

&lt;p&gt;Congratulations! You're now running Debian Linux on your Chromebook.&lt;/p&gt;
&lt;p&gt;Want Ubuntu instead? It's a bit more trouble, but you can &lt;a href=&quot;https://www.reddit.com/r/Crostini/wiki/howto/run-ubuntu&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;bring up Ubuntu with a few shell commands&lt;/a&gt;. Want to run, say, &lt;a href=&quot;https://getfedora.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Fedora&lt;/a&gt;? You can run &lt;a href=&quot;https://www.reddit.com/r/Crostini/comments/as9igv/fedora_wiki/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Fedora with Chrome OS&lt;/a&gt;, as well. For more tips and tricks with running Linux on Chrome OS, check out the &lt;a href=&quot;https://www.reddit.com/r/Crostini&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Reddit Crostini&lt;/a&gt; sub-reddit. It's the best end-user Linux on Chromebook site around.&lt;/p&gt;
&lt;section class=&quot;sharethrough-top&quot; data-component=&quot;medusaContentRecommendation&quot; data-medusa-content-recommendation-options=&quot;{&amp;quot;promo&amp;quot;:&amp;quot;promo_ZD_recommendation_sharethrough_top_in_article_desktop&amp;quot;,&amp;quot;spot&amp;quot;:&amp;quot;dfp-in-article&amp;quot;}&quot;&gt;
&lt;/section&gt;&lt;p&gt;Linux on Chromebook laptops is not a dual-boot operation. You're running both operating systems simultaneously.  That means, for example, you can do things like clicking on a document file via the Chrome OS file manager and open it with LibreOffice -- without even starting a Linux session.&lt;/p&gt;
&lt;p&gt;Indeed, with the latest canary Chrome OS release, you can use the &lt;a href=&quot;https://developers.googleblog.com/2019/05/ChromeOS-io19.html&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;file manager to move your files across Chrome OS, Google Drive, Linux, and Android&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Oh yes. Android, too. Chrome OS has long supported Android apps. With this latest canary (read alpha) release, Google boosts its Android compatibility.&lt;/p&gt;
&lt;span class=&quot;img aspect-set&quot;&gt;&lt;img src=&quot;https://zdnet3.cbsistatic.com/hub/i/2019/05/08/80a4532a-7591-47b8-9718-aadd7b3ea18b/fb072ed4fae0171f7bd92f58ff997bdf/chrome-os-android-linux.jpg&quot; class=&quot;&quot; alt=&quot;One Chromebook, Three operating systems at once: Android, Chrome OS and Linux.&quot;/&gt;&lt;/span&gt; &lt;span class=&quot;credit&quot;&gt;sjvn&lt;/span&gt;
&lt;hr/&gt;&lt;h3&gt;Must read&lt;/h3&gt;
&lt;hr/&gt;&lt;p&gt;You can also now use port forwarding to connect networking services between Linux and Chrome OS. This means, you could, for example, run a web server within the Linux container while debugging it on the same machine.&lt;/p&gt;
&lt;p&gt;So, why would you want to do this? If you're a developer, the answer's easy: You can develop for all three operating systems off one platform. For example, it's now much easier to install &lt;a href=&quot;https://developer.android.com/studio&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Android Studio&lt;/a&gt; on Chrome OS.&lt;/p&gt;
&lt;p&gt;With Chrome OS 77,  you also now have secure USB support for Android phones. With this, you can develop, debug, and push your Android Application Package (APK) to Android phones on any of the &lt;a href=&quot;https://developer.android.com/studio#Requirements&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Android developer-recommended Chromebook&lt;/a&gt; laptops.&lt;/p&gt;
&lt;p&gt;A Chromebook with all three operating systems running at once is also darn useful for an ordinary Jane or Joe. For example, I can edit images using Linux &lt;a href=&quot;https://www.gimp.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;GIMP&lt;/a&gt; and write with &lt;a href=&quot;https://www.libreoffice.org/discover/writer/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;LibreOffice Writer&lt;/a&gt; while looking at pictures using Android &lt;a href=&quot;https://www.pinterest.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Pinterest&lt;/a&gt; and simultaneously check my Gmail in Chrome OS. It's all good.&lt;/p&gt;
&lt;p&gt;Chromebook laptops are more useful than ever with Android and Linux. Heck, with that many Chromebook devices out there with Linux built-in, maybe 2019 will be -- yes, I'm going to say it -- the year of the Linux desktop.&lt;/p&gt;



</description>
<pubDate>Thu, 09 May 2019 14:36:56 +0000</pubDate>
<dc:creator>CrankyBear</dc:creator>
<og:type>article</og:type>
<og:url>https://www.zdnet.com/article/all-chromebooks-will-also-be-linux-laptops-going-forward/</og:url>
<og:title>All Chromebooks will also be Linux laptops going forward | ZDNet</og:title>
<og:description>Google has announced that all new Chromebook devices will be Linux ready.</og:description>
<og:image>https://zdnet3.cbsistatic.com/hub/i/r/2019/05/09/d8ab4147-413c-4b32-91a1-a4ec8da8cae8/thumbnail/770x578/61899a325477c57fc08e60973eb00d9b/screen-shot-2019-05-09-at-9-49-32-am.png</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.zdnet.com/article/all-chromebooks-will-also-be-linux-laptops-going-forward/</dc:identifier>
</item>
<item>
<title>Keepass.com spreading malware acting as the official password manager site</title>
<link>https://twitter.com/berkcgoksel/status/1125727590440931329</link>
<guid isPermaLink="true" >https://twitter.com/berkcgoksel/status/1125727590440931329</guid>
<description>[unable to retrieve full-text content]
&lt;p&gt;Article URL: &lt;a href=&quot;https://twitter.com/berkcgoksel/status/1125727590440931329&quot;&gt;https://twitter.com/berkcgoksel/status/1125727590440931329&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Comments URL: &lt;a href=&quot;https://news.ycombinator.com/item?id=19867971&quot;&gt;https://news.ycombinator.com/item?id=19867971&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Points: 286&lt;/p&gt;
&lt;p&gt;# Comments: 91&lt;/p&gt;
</description>
<pubDate>Thu, 09 May 2019 13:17:26 +0000</pubDate>
<dc:creator>svacko</dc:creator>
<dc:format>text/html</dc:format>
<dc:identifier>https://mobile.twitter.com/berkcgoksel/status/1125727590440931329</dc:identifier>
</item>
<item>
<title>PostgreSQL 11.3 and 10.8</title>
<link>https://www.postgresql.org/about/news/1939/</link>
<guid isPermaLink="true" >https://www.postgresql.org/about/news/1939/</guid>
<description>&lt;p&gt;Posted on &lt;strong&gt;2019-05-09&lt;/strong&gt; by PostgreSQL Global Development Group&lt;/p&gt;
&lt;p&gt;The PostgreSQL Global Development Group has released an update to all supported versions of our database system, including 11.3, 10.8, 9.6.13, 9.5.17, and 9.4.22. This release fixes two security issues in the PostgreSQL server, a security issue found in two of the PostgreSQL Windows installers, and over 60 bugs reported over the last three months.&lt;/p&gt;
&lt;p&gt;Users who installed PostgreSQL using the Windows installers from EnterpriseDB and BigSQL respectively should upgrade as soon as possible. Similarly, users who are running any version of PostgreSQL 9.5, 9.6, 10, and 11 should also plan to upgrade as soon as possible.&lt;/p&gt;
&lt;p&gt;All other users should plan to apply this update at the next scheduled downtime.&lt;/p&gt;
&lt;h2&gt;Security Issues&lt;/h2&gt;
&lt;p&gt;Four security vulnerabilities have been closed by this release:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://access.redhat.com/security/cve/CVE-2019-10127&quot;&gt;CVE-2019-10127&lt;/a&gt;: BigSQL Windows installer does not clear permissive ACL entries&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://access.redhat.com/security/cve/CVE-2019-10128&quot;&gt;CVE-2019-10128&lt;/a&gt;: EnterpriseDB Windows installer does not clear permissive ACL entries&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Due to both the EnterpriseDB and BigSQL Windows installers not locking down the permissions of the PostgreSQL binary installation directory and the data directory, an unprivileged Windows user account and an unprivileged PostgreSQL account could cause the PostgreSQL service account to execute arbitrary code.&lt;/p&gt;
&lt;p&gt;This vulnerability is present in all supported versions of PostgreSQL for these installers, and possibly exists in older versions. Both sets of installers have fixed the permissions for these directories for both new and existing installations. If you have installed PostgreSQL on Windows using other methods, we advise that you check that your PostgreSQL binary directories are writable only to trusted users and that your data directories are only accessible to trusted users.&lt;/p&gt;
&lt;p&gt;The PostgreSQL project thanks Conner Jones for reporting this problem.&lt;/p&gt;
&lt;p&gt;Prior to this release, a user running PostgreSQL 11 can read arbitrary bytes of server memory by executing a purpose-crafted INSERT statement to a partitioned table.&lt;/p&gt;
&lt;p&gt;PostgreSQL maintains statistics for tables by sampling data available in columns; this data is consulted during the query planning process. Prior to this release, a user able to execute SQL queries with permissions to read a given column could craft a leaky operator that could read whatever data had been sampled from that column. If this happened to include values from rows that the user is forbidden to see by a row security policy, the user could effectively bypass the policy. This is fixed by only allowing a non-leakproof operator to use this data if there are no relevant row security policies for the table.&lt;/p&gt;
&lt;p&gt;This issue is present in PostgreSQL 9.5, 9.6, 10, and 11. The PostgreSQL project thanks Dean Rasheed for reporting this problem.&lt;/p&gt;
&lt;h2&gt;Bug Fixes and Improvements&lt;/h2&gt;
&lt;p&gt;This update also fixes over 60 bugs that were reported in the last several months. Some of these issues affect only version 11, but many affect all supported versions.&lt;/p&gt;
&lt;p&gt;Some of these fixes include:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Several catalog corruption fixes, including one related to running &lt;code&gt;ALTER TABLE&lt;/code&gt; on a partitioned table&lt;/li&gt;
&lt;li&gt;Several fixes for partitioning&lt;/li&gt;
&lt;li&gt;Avoid server crash when an error occurs while trying to persist a cursor query across a transaction commit&lt;/li&gt;
&lt;li&gt;Avoid O(N^2) performance issue when rolling back a transaction that created many tables&lt;/li&gt;
&lt;li&gt;Fix possible “could not access status of transaction” failures in &lt;code&gt;txid_status()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Fix updatable views to handle explicit DEFAULT items in &lt;code&gt;INSERT .. VALUES&lt;/code&gt; statements where there are multiple VALUES rows&lt;/li&gt;
&lt;li&gt;Fix CREATE VIEW to allow zero-column views&lt;/li&gt;
&lt;li&gt;Add missing support for the &lt;code&gt;CREATE TABLE IF NOT EXISTS .. AS EXECUTE ..&lt;/code&gt; statement&lt;/li&gt;
&lt;li&gt;Ensure that sub-SELECTs appearing in row-level-security policy expressions are executed with the correct user's permissions&lt;/li&gt;
&lt;li&gt;Accept XML documents as valid values of type xml when xmloption is set to content, as required by SQL:2006 and later&lt;/li&gt;
&lt;li&gt;Fix incompatibility of GIN-index WAL records that were introduced in 11.2, 10.7, 9.6.12, 9.5.16, and 9.4.21 that affected replica servers running these versions reading in changes to GIN indexes from primary servers of older versions&lt;/li&gt;
&lt;li&gt;Several memory leak fixes as well as fixes to management of dynamic shared memory&lt;/li&gt;
&lt;li&gt;Relax panics on fsync and sync_file_range failures for certain cases where a failure indicated &quot;operation not supported&quot;&lt;/li&gt;
&lt;li&gt;Several fixes to the query planner, several of which should lead to planning improvements&lt;/li&gt;
&lt;li&gt;Fix race condition in which a hot-standby postmaster could fail to shut down after receiving a smart-shutdown request&lt;/li&gt;
&lt;li&gt;Several fixes for SCRAM authentication&lt;/li&gt;
&lt;li&gt;Fix handling of &lt;code&gt;lc_time&lt;/code&gt; settings that imply an encoding different from the database's encoding&lt;/li&gt;
&lt;li&gt;Create the &lt;code&gt;current_logfiles&lt;/code&gt; file with the same permissions as other files in the server's &lt;code&gt;data&lt;/code&gt; directory&lt;/li&gt;
&lt;li&gt;Several ecpg fixes&lt;/li&gt;
&lt;li&gt;Make &lt;code&gt;pg_verify_checksums&lt;/code&gt; verify that the data directory it's pointed at is of the right PostgreSQL version&lt;/li&gt;
&lt;li&gt;Several fixes for &lt;code&gt;contrib/postgres_fdw&lt;/code&gt;, including one for remote partitions where an UPDATE could lead to incorrect results or a crash&lt;/li&gt;
&lt;li&gt;Several Windows fixes&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;This update also contains tzdata release 2019a for DST law changes in Palestine and Metlakatla, plus historical corrections for Israel. Etc/UCT is now a backward-compatibility link to Etc/UTC, instead of being a separate zone that generates the abbreviation UCT, which nowadays is typically a typo. PostgreSQL will still accept UCT as an input zone abbreviation, but it won't output it.&lt;/p&gt;
&lt;h2&gt;Updating&lt;/h2&gt;
&lt;p&gt;All PostgreSQL update releases are cumulative. As with other minor releases, users are not required to dump and reload their database or use &lt;code&gt;pg_upgrade&lt;/code&gt; in order to apply this update release; you may simply shutdown PostgreSQL and update its binaries.&lt;/p&gt;
&lt;p&gt;Users who have skipped one or more update releases may need to run additional, post-update steps; please see the release notes for earlier versions for details.&lt;/p&gt;
&lt;p&gt;PostgreSQL 9.4 will stop receiving fixes on February 13, 2020. Please see our &lt;a href=&quot;https://www.postgresql.org/support/versioning/&quot;&gt;versioning policy&lt;/a&gt; for more information.&lt;/p&gt;
&lt;h2&gt;Links&lt;/h2&gt;
&lt;span class=&quot;newstag&quot;&gt;&lt;a class=&quot;btn btn-primary&quot; href=&quot;https://www.postgresql.org/about/newsarchive/pgsql/&quot;&gt;PostgreSQL Project&lt;/a&gt;&lt;/span&gt; &lt;span class=&quot;newstag&quot;&gt;&lt;a class=&quot;btn btn-primary&quot; href=&quot;https://www.postgresql.org/about/newsarchive/security/&quot;&gt;Security&lt;/a&gt;&lt;/span&gt;</description>
<pubDate>Thu, 09 May 2019 13:14:07 +0000</pubDate>
<dc:creator>oskari</dc:creator>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.postgresql.org/about/news/1939/</dc:identifier>
</item>
<item>
<title>When Engineers Become Whistleblowers</title>
<link>https://blogs.scientificamerican.com/observations/when-engineers-become-whistleblowers/</link>
<guid isPermaLink="true" >https://blogs.scientificamerican.com/observations/when-engineers-become-whistleblowers/</guid>
<description>&lt;div class=&quot;mura-region mura-region-loose&quot;&gt;
&lt;div class=&quot;mura-region-local&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https://www.asce.org/question-of-ethics-articles/apr-2008/&quot;&gt;“Fundamental Canon No. 1”&lt;/a&gt; of the American Society of Engineers states that “Engineers shall hold paramount the safety, health, and welfare of the public.” Most engineering societies have this principle in their codes of ethics. This duty frames the decades of struggles by conscientious engineers—whether employees or consultants—who strive to balance professional ethics with &lt;em&gt;occupational&lt;/em&gt; survival.&lt;/p&gt;
&lt;p&gt;Compared to the technologically stagnant dark days in the auto industry of cruel suppression of technical dissent over safety and toxic emissions, a censorship that carried over to the industry-controlled Society of Automotive Engineers, today’s engineers are working in an improved environment for taking their conscience to work. Yet much more remains to be done to safeguard the ability of engineers to speak truth to the powers-that-be.&lt;/p&gt;
&lt;p&gt;For starters, the word &lt;em&gt;whistleblower&lt;/em&gt;—once popularly meant to describe a snitch or a disgruntled employee—now describes an ethical person willing to put his or her job on the line in order to expose corrupt, illegal, fraudulent and harmful activities. Indeed, in the aftermath of recent Boeing 737 MAX crashes, the media routinely and positively refers to disclosures by “Boeing whistleblowers.” Congressional investigating committees and federal agencies have called for whistleblowers to come forward and shed light on corporate misdeeds and governmental agency lapses.&lt;/p&gt;
&lt;p&gt;To put it mildly, this was not always the case. In 1971, I convened the Conference on Professional Responsibility—a sober name for a group of whistleblowers from corporations, government and unions. They were ragged as “malcontents” or “occupational-suiciders.” In fact, they were courageous, accurate, morally right, and willing to lose everything to expose wrongdoing.&lt;/p&gt;
&lt;p&gt;Keynoters at the whistleblower conference were Senator William Proxmire, who protected government whistleblowers on military defense issues, and Robert Townsend, author of the best-selling &lt;em&gt;Up the Organization.&lt;/em&gt; Townsend drew from his business experience to explain the critical role whistleblowing could play in giant corporations. Law Professor Arthur Miller reviewed the lack of legal protection and vulnerability of whistleblowers and presented what the law should provide “in its institutions and principles.” (See &lt;a href=&quot;https://trove.nla.gov.au/work/10873630&quot;&gt;&lt;em&gt;Whistle Blowing: The Report of the Conference on Professional Responsibility&lt;/em&gt;&lt;/a&gt;, by Ralph Nader, Peter Petkas and Kate Blackwell, 1972).&lt;/p&gt;
&lt;p&gt;After this watershed conference, much began to change. Numerous health and safety statutes now protect government employees who report noncompliance with environmental, worker safety and labor standards. Starting in 1978, a Merit System Protection Board was established and later strengthened under President George Herbert Walker Bush to give federal employees some, but not enough, due process against retaliation. Several states followed with their own whistleblower protections.&lt;/p&gt;
&lt;p&gt;In 1977 an NGO called the Government Accountability Project (GAP) started offering &lt;em&gt;pro bono&lt;/em&gt; representation to many government and corporate whistleblowers. After the enactment of the 1986 &lt;a href=&quot;https://en.wikipedia.org/wiki/False_Claims_Act&quot;&gt;False Claims Act&lt;/a&gt;, federal employees exposing fraud against the government were able to secure a sizable portion of any resultant verdict or settlement against those ripping off the taxpayers. This law alone has recovered over $60 billion from the fraudsters. Private law firms and the Justice Department are regularly involved in pursuing these claims.&lt;/p&gt;
&lt;p&gt;The vast world of state and federal procurement/military contracts and infrastructure is known to be rife with “waste, fraud and abuse.” Engineers are most likely to see such violations first. Decades ago, foreshadowing the many challenges in engineering, the Society of Professional Engineers, in its code of ethics, instructed engineers on their obligation to report safety and fraud violations to the appropriate outside authorities, should they find no recourse inside their place of employment.&lt;/p&gt;
&lt;p&gt;With $5 trillion of deferred maintenance for our public works, as measured by the American Society of Civil Engineers, the challenges to the assertion of engineering conscientiousness will be ever larger.&lt;/p&gt;
&lt;p&gt;We need more public interest engineering advocacy groups and initiatives to open up new frontiers of excellence and service as well as to support engineers inside the corporate framework. It was a Caltech professor, Arie Jan Haagen-Smit, not GM engineers or chemists, who proved in the 1950s the connection between motor vehicles and the lethal photochemical smog over the cities and suburbs of California. This led to smog-control regulations and ethical and legal foundations for industrial air pollution controls.&lt;/p&gt;
&lt;p&gt;Engineer &lt;a href=&quot;http://whirlwindwheelchair.org&quot; target=&quot;_blank&quot;&gt;Ralf Hotchkiss&lt;/a&gt;, rendered a paraplegic before college, courageously revolutionized the functional and economical design of superior wheelchairs, including showing natives how to utilize local materials in poor countries. He also helped break the virtual wheelchair monopoly of a British multinational company in the process. We need more engineers who embody the three principles of any profession—independence, scholarly pursuits, and commitment to public service. Those are the vital ethical pillars to helping engineers withstand the great pressures to place commercial priorities over their engineering integrity and limit harm to the public. We see the push to relegate engineers to indentured status in industries such as the chemical, nuclear, weapons systems, mining, auto, aviation, railroad and medical devices industries, as well as the new unregulated areas of biotechnology, nanotechnology and artificial intelligence.&lt;/p&gt;
&lt;p&gt;There has been progress in legal protections for whistleblowers, more civil litigations and, importantly, higher public expectations and popular support for these unsung protectors. There is, however, much more work to do, especially in educating the engineering school curricula and encouraging the numerous engineering societies to take their codes of ethics seriously. But as Nassim Taleb, author of &lt;em&gt;The Black Swan,&lt;/em&gt; has written, “Mental clarity is the child of courage, not the other way around.”&lt;/p&gt;
&lt;p&gt;In 1966, in an address to a chapter of the American Society of Engineering Education (reprinted in the new book &lt;a href=&quot;https://www.researchgate.net/publication/328442837_Ethics_Politics_and_Whistleblowing_in_Engineering&quot;&gt;&lt;em&gt;Ethics, Politics, and Whistleblowing in Engineering&lt;/em&gt;&lt;/a&gt;&lt;em&gt;,&lt;/em&gt; by Nicholas Sakellariou and Rania Milleron [my niece], CRC Press), I said “the [engineering] profession must assert itself towards its most magnificent aspirations—for so much of our future is in your trust.”&lt;/p&gt;
&lt;p&gt;Well, isn’t that a great understatement today!?&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
<pubDate>Thu, 09 May 2019 13:09:11 +0000</pubDate>
<dc:creator>furcyd</dc:creator>
<og:type>article</og:type>
<og:title>When Engineers Become Whistleblowers</og:title>
<og:description>They&amp;rsquo;re often the first to notice waste, fraud and safety issues</og:description>
<og:image>https://static.scientificamerican.com/blogs/cache/file/75FD8177-0CC5-4829-BEBE66F3248FBBB7.jpg</og:image>
<og:url>https://blogs.scientificamerican.com/observations/when-engineers-become-whistleblowers/</og:url>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://blogs.scientificamerican.com/observations/when-engineers-become-whistleblowers/</dc:identifier>
</item>
</channel>
</rss>